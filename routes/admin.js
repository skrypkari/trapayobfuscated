'use strict';const a19_0x26d336=a19_0x3dde;(function(_0x4d97ee,_0x2212ad){const _0x1efad8=a19_0x3dde,_0x209ad9=_0x4d97ee();while(!![]){try{const _0x48741f=parseInt(_0x1efad8(0x16e))/0x1*(parseInt(_0x1efad8(0x1ae))/0x2)+parseInt(_0x1efad8(0x186))/0x3+-parseInt(_0x1efad8(0x1d5))/0x4+-parseInt(_0x1efad8(0x1ab))/0x5+parseInt(_0x1efad8(0x1a7))/0x6+parseInt(_0x1efad8(0x18b))/0x7+parseInt(_0x1efad8(0x163))/0x8*(-parseInt(_0x1efad8(0x1ac))/0x9);if(_0x48741f===_0x2212ad)break;else _0x209ad9['push'](_0x209ad9['shift']());}catch(_0x3dea49){_0x209ad9['push'](_0x209ad9['shift']());}}}(a19_0x1a26,0xe18c2));function a19_0x3dde(_0x263659,_0x3d8641){const _0x1a267d=a19_0x1a26();return a19_0x3dde=function(_0x3dde5b,_0x4b74b2){_0x3dde5b=_0x3dde5b-0x158;let _0x5cda75=_0x1a267d[_0x3dde5b];return _0x5cda75;},a19_0x3dde(_0x263659,_0x3d8641);}var __createBinding=this&&this[a19_0x26d336(0x159)]||(Object['create']?function(_0x5be172,_0x1a96d0,_0x3aa546,_0x2c2049){const _0x577272=a19_0x26d336;if(_0x2c2049===undefined)_0x2c2049=_0x3aa546;var _0x1cee47=Object[_0x577272(0x17c)](_0x1a96d0,_0x3aa546);(!_0x1cee47||('get'in _0x1cee47?!_0x1a96d0[_0x577272(0x165)]:_0x1cee47[_0x577272(0x16f)]||_0x1cee47[_0x577272(0x1ba)]))&&(_0x1cee47={'enumerable':!![],'get':function(){return _0x1a96d0[_0x3aa546];}}),Object[_0x577272(0x170)](_0x5be172,_0x2c2049,_0x1cee47);}:function(_0x4fab04,_0xf3bafe,_0x4f5dac,_0x4d3dc7){if(_0x4d3dc7===undefined)_0x4d3dc7=_0x4f5dac;_0x4fab04[_0x4d3dc7]=_0xf3bafe[_0x4f5dac];}),__setModuleDefault=this&&this[a19_0x26d336(0x193)]||(Object[a19_0x26d336(0x1af)]?function(_0x54cd95,_0x16b1a4){const _0xf6bfc=a19_0x26d336;Object['defineProperty'](_0x54cd95,_0xf6bfc(0x1b9),{'enumerable':!![],'value':_0x16b1a4});}:function(_0x1894dc,_0x54cca5){_0x1894dc['default']=_0x54cca5;}),__importStar=this&&this[a19_0x26d336(0x1cd)]||(function(){var _0x4e2dcf=function(_0x4ba00c){const _0x1c0cd9=a19_0x3dde;return _0x4e2dcf=Object[_0x1c0cd9(0x174)]||function(_0x408172){const _0x390b80=_0x1c0cd9;var _0x428632=[];for(var _0x54fd1a in _0x408172)if(Object['prototype'][_0x390b80(0x198)]['call'](_0x408172,_0x54fd1a))_0x428632[_0x428632[_0x390b80(0x195)]]=_0x54fd1a;return _0x428632;},_0x4e2dcf(_0x4ba00c);};return function(_0x2433d5){const _0x2f0f64=a19_0x3dde;if(_0x2433d5&&_0x2433d5[_0x2f0f64(0x165)])return _0x2433d5;var _0xfb86ca={};if(_0x2433d5!=null){for(var _0x2a4f90=_0x4e2dcf(_0x2433d5),_0x2dc13a=0x0;_0x2dc13a<_0x2a4f90[_0x2f0f64(0x195)];_0x2dc13a++)if(_0x2a4f90[_0x2dc13a]!==_0x2f0f64(0x1b9))__createBinding(_0xfb86ca,_0x2433d5,_0x2a4f90[_0x2dc13a]);}return __setModuleDefault(_0xfb86ca,_0x2433d5),_0xfb86ca;};}());Object[a19_0x26d336(0x170)](exports,a19_0x26d336(0x165),{'value':!![]});function a19_0x1a26(){const _0x592c89=['createdAt','json','/logs/stats','/payments/:id','1bYVmuo','writable','defineProperty','put','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','Payments\x20automatically\x20expire\x20after\x20','getOwnPropertyNames','Failed\x20to\x20get\x20payment\x20information','status','post','../services/coinToPayStatusService','../middleware/auth','/domain-monitoring/check','getMerchantsAwaitingPayout','getOwnPropertyDescriptor','shop','gatewayPaymentId','createPayoutSchema','/payments','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','/users/:id/suspend','getUserById','amount','get','3508548GwMzCq','getMerchantStatistics','/domain-monitoring/stats','toISOString','getLogStats','4075407VDtdBJ','deletePayout','Payment\x20not\x20found','getPayouts','params','expiryDays','Failed\x20to\x20get\x20log\x20statistics','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','__setModuleDefault','Old\x20logs\x20cleaned\x20(kept\x20last\x20','length','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','getUsers','hasOwnProperty','EXPIRED','/cointopay/check/:paymentId','/payouts/:id','express','resolve','createPayout','/auth','checkPaymentById','getPayoutById','getServiceStats','../middleware/validation','updatePayment','/payout/merchants','../services/domainMonitoringService','7476240uJuEJl','validate','message','activateUser','7003530xEklVy','11651580pRdWjr','/statistics','1601318mdRaYd','create','getStatistics','updateUser','/users','CoinToPay\x20payment\x20status\x20checked\x20successfully','suspendUser','Failed\x20to\x20perform\x20manual\x20domain\x20check','domainMonitoringService','/users/:id','createUserSchema','default','configurable','/users/:id/activate','loggerService','getTime','\x20days\x20if\x20not\x20paid','/payout/stats','Domain\x20check\x20failed','body','manualCheck','coinToPayStatusService','deleteUser','checkAuth','gateway','Router','requireAdmin','getMonitoringStats','cointopay','🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','floor','__importStar','../config/database','../controllers/adminController','getPayoutStats','Failed\x20to\x20clean\x20old\x20logs','getPaymentTimerInfo','paymentId','currency','716992Qknnxc','updatedAt','../services/loggerService','__createBinding','❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','getPayments','delete','PAID','updateCustomerData','updateUserSchema','/cointopay/stats','/merchant-statistics','/payout','8oIqefz','createUser','__esModule','log','findUnique','/cointopay/payment/:paymentId','error'];a19_0x1a26=function(){return _0x592c89;};return a19_0x1a26();}const express_1=require(a19_0x26d336(0x19c)),adminController_1=require(a19_0x26d336(0x1cf)),validation_1=require(a19_0x26d336(0x1a3)),auth_1=require(a19_0x26d336(0x179)),loggerService_1=require(a19_0x26d336(0x158)),coinToPayStatusService_1=require(a19_0x26d336(0x178)),domainMonitoringService_1=require(a19_0x26d336(0x1a6)),router=(0x0,express_1[a19_0x26d336(0x1c7)])(),adminController=new adminController_1['AdminController']();router['use'](auth_1['authenticateToken'],auth_1[a19_0x26d336(0x1c8)]),router['get'](a19_0x26d336(0x19f),adminController[a19_0x26d336(0x1c5)]),router[a19_0x26d336(0x185)](a19_0x26d336(0x1ad),adminController[a19_0x26d336(0x1b0)]),router['get'](a19_0x26d336(0x161),adminController[a19_0x26d336(0x187)]),router['get'](a19_0x26d336(0x1bf),adminController[a19_0x26d336(0x1d0)]),router['get'](a19_0x26d336(0x1a5),adminController[a19_0x26d336(0x17b)]),router[a19_0x26d336(0x177)](a19_0x26d336(0x162),(0x0,validation_1[a19_0x26d336(0x1a8)])(validation_1[a19_0x26d336(0x17f)]),adminController[a19_0x26d336(0x19e)]),router[a19_0x26d336(0x185)]('/payouts',adminController[a19_0x26d336(0x18e)]),router[a19_0x26d336(0x185)](a19_0x26d336(0x19b),adminController[a19_0x26d336(0x1a1)]),router['delete'](a19_0x26d336(0x19b),adminController[a19_0x26d336(0x18c)]),router[a19_0x26d336(0x185)](a19_0x26d336(0x180),adminController[a19_0x26d336(0x15b)]),router[a19_0x26d336(0x185)](a19_0x26d336(0x16d),adminController['getPaymentById']),router[a19_0x26d336(0x171)](a19_0x26d336(0x16d),adminController[a19_0x26d336(0x1a4)]),router[a19_0x26d336(0x171)]('/payments/:id/customer',(0x0,validation_1[a19_0x26d336(0x1a8)])(validation_1['updateCustomerDataSchema']),adminController[a19_0x26d336(0x15e)]),router[a19_0x26d336(0x185)](a19_0x26d336(0x1b2),adminController[a19_0x26d336(0x197)]),router[a19_0x26d336(0x185)](a19_0x26d336(0x1b7),adminController[a19_0x26d336(0x183)]),router['post'](a19_0x26d336(0x1b2),(0x0,validation_1['validate'])(validation_1[a19_0x26d336(0x1b8)]),adminController[a19_0x26d336(0x164)]),router[a19_0x26d336(0x171)]('/users/:id',(0x0,validation_1[a19_0x26d336(0x1a8)])(validation_1[a19_0x26d336(0x15f)]),adminController[a19_0x26d336(0x1b1)]),router[a19_0x26d336(0x15c)](a19_0x26d336(0x1b7),adminController[a19_0x26d336(0x1c4)]),router[a19_0x26d336(0x177)](a19_0x26d336(0x182),adminController[a19_0x26d336(0x1b4)]),router['post'](a19_0x26d336(0x1bb),adminController[a19_0x26d336(0x1aa)]),router[a19_0x26d336(0x185)](a19_0x26d336(0x16c),(_0x3c6832,_0x57504b)=>{const _0x363488=a19_0x26d336;try{const _0x452096=loggerService_1[_0x363488(0x1bc)][_0x363488(0x18a)]();_0x57504b[_0x363488(0x16b)]({'success':!![],'result':_0x452096});}catch(_0x40b2f1){_0x57504b['status'](0x1f4)['json']({'success':![],'message':_0x363488(0x191)});}}),router[a19_0x26d336(0x177)]('/logs/clean',(_0x105990,_0x330d26)=>{const _0x996ef2=a19_0x26d336;try{const {daysToKeep:daysToKeep=0x1e}=_0x105990[_0x996ef2(0x1c1)];loggerService_1[_0x996ef2(0x1bc)]['cleanOldLogs'](daysToKeep),_0x330d26[_0x996ef2(0x16b)]({'success':!![],'message':_0x996ef2(0x194)+daysToKeep+'\x20days)'});}catch(_0x491168){_0x330d26['status'](0x1f4)[_0x996ef2(0x16b)]({'success':![],'message':_0x996ef2(0x1d1)});}}),router[a19_0x26d336(0x177)](a19_0x26d336(0x19a),async(_0x5b7066,_0x1f0edb)=>{const _0x34cae1=a19_0x26d336;try{const {paymentId:_0x105a14}=_0x5b7066[_0x34cae1(0x18f)];console[_0x34cae1(0x166)](_0x34cae1(0x1cb)+_0x105a14),await coinToPayStatusService_1[_0x34cae1(0x1c3)][_0x34cae1(0x1a0)](_0x105a14),_0x1f0edb[_0x34cae1(0x16b)]({'success':!![],'message':_0x34cae1(0x1b3)});}catch(_0x38e2b1){console[_0x34cae1(0x169)](_0x34cae1(0x15a)+_0x5b7066[_0x34cae1(0x18f)][_0x34cae1(0x1d3)]+':',_0x38e2b1),_0x1f0edb['status'](0x1f4)['json']({'success':![],'message':_0x38e2b1 instanceof Error?_0x38e2b1[_0x34cae1(0x1a9)]:_0x34cae1(0x192)});}}),router['get'](a19_0x26d336(0x160),(_0x5c6eea,_0x46ecf0)=>{const _0xaec5f7=a19_0x26d336;try{const _0x385021=coinToPayStatusService_1[_0xaec5f7(0x1c3)][_0xaec5f7(0x1a2)]();_0x46ecf0[_0xaec5f7(0x16b)]({'success':!![],'result':{..._0x385021,'description':'CoinToPay\x20automatic\x20status\x20checking\x20service','statusMapping':{'Paid':_0xaec5f7(0x15d),'Awaiting\x20Fiat':'PENDING','waiting':'PENDING','expired':_0xaec5f7(0x199),'failed':'FAILED'},'autoExpiryNote':_0xaec5f7(0x173)+_0x385021[_0xaec5f7(0x190)]+_0xaec5f7(0x1be),'individualTimersNote':_0xaec5f7(0x172)}});}catch(_0x152fff){_0x46ecf0[_0xaec5f7(0x176)](0x1f4)[_0xaec5f7(0x16b)]({'success':![],'message':'Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics'});}}),router[a19_0x26d336(0x185)](a19_0x26d336(0x168),async(_0x230e6b,_0x3a4be8)=>{const _0x3b4e6b=a19_0x26d336;try{const {paymentId:_0x4aaeda}=_0x230e6b[_0x3b4e6b(0x18f)],_0x1cbf8c=coinToPayStatusService_1[_0x3b4e6b(0x1c3)][_0x3b4e6b(0x1d2)](_0x4aaeda),_0x4525df=(await Promise[_0x3b4e6b(0x19d)]()['then'](()=>__importStar(require(_0x3b4e6b(0x1ce)))))[_0x3b4e6b(0x1b9)],_0x1edf8f=await _0x4525df['payment'][_0x3b4e6b(0x167)]({'where':{'id':_0x4aaeda},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x1edf8f)return _0x3a4be8[_0x3b4e6b(0x176)](0x194)[_0x3b4e6b(0x16b)]({'success':![],'message':_0x3b4e6b(0x18d)});_0x3a4be8['json']({'success':!![],'result':{'payment':{'id':_0x1edf8f['id'],'gateway':_0x1edf8f[_0x3b4e6b(0x1c6)],'gatewayPaymentId':_0x1edf8f[_0x3b4e6b(0x17e)],'status':_0x1edf8f['status'],'amount':_0x1edf8f[_0x3b4e6b(0x184)],'currency':_0x1edf8f[_0x3b4e6b(0x1d4)],'createdAt':_0x1edf8f[_0x3b4e6b(0x16a)],'updatedAt':_0x1edf8f[_0x3b4e6b(0x1d6)],'shop':_0x1edf8f[_0x3b4e6b(0x17d)]},'timers':_0x1cbf8c,'isCoinToPay':_0x1edf8f['gateway']===_0x3b4e6b(0x1ca),'ageInMinutes':Math[_0x3b4e6b(0x1cc)]((Date['now']()-_0x1edf8f[_0x3b4e6b(0x16a)][_0x3b4e6b(0x1bd)]())/(0x3e8*0x3c))}});}catch(_0x2d1c43){_0x3a4be8[_0x3b4e6b(0x176)](0x1f4)[_0x3b4e6b(0x16b)]({'success':![],'message':_0x2d1c43 instanceof Error?_0x2d1c43[_0x3b4e6b(0x1a9)]:_0x3b4e6b(0x175)});}}),router['get'](a19_0x26d336(0x188),(_0x337e20,_0x4cbb34)=>{const _0x2dc00e=a19_0x26d336;try{const _0x31b6a0=domainMonitoringService_1[_0x2dc00e(0x1b6)][_0x2dc00e(0x1c9)]();_0x4cbb34[_0x2dc00e(0x16b)]({'success':!![],'result':{..._0x31b6a0,'description':'Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','behavior':_0x2dc00e(0x181),'encoding':'Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs'}});}catch(_0x54607e){_0x4cbb34[_0x2dc00e(0x176)](0x1f4)[_0x2dc00e(0x16b)]({'success':![],'message':_0x2dc00e(0x196)});}}),router['post'](a19_0x26d336(0x17a),async(_0x257597,_0x2c333c)=>{const _0x3525c0=a19_0x26d336;try{const _0x192b1a=await domainMonitoringService_1[_0x3525c0(0x1b6)][_0x3525c0(0x1c2)]();_0x2c333c['json']({'success':!![],'result':{'domainAvailable':_0x192b1a,'message':_0x192b1a?'Domain\x20is\x20responding\x20correctly':_0x3525c0(0x1c0),'timestamp':new Date()[_0x3525c0(0x189)]()}});}catch(_0x4cb9db){_0x2c333c['status'](0x1f4)[_0x3525c0(0x16b)]({'success':![],'message':_0x4cb9db instanceof Error?_0x4cb9db['message']:_0x3525c0(0x1b5)});}}),exports['default']=router;