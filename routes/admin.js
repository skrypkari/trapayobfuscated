'use strict';const a19_0x3b2fe4=a19_0x1f8f;(function(_0x2afe38,_0x48cfdd){const _0x58a16b=a19_0x1f8f,_0x503871=_0x2afe38();while(!![]){try{const _0x5cea92=parseInt(_0x58a16b(0x1cb))/0x1+-parseInt(_0x58a16b(0x1f1))/0x2+parseInt(_0x58a16b(0x1c5))/0x3+parseInt(_0x58a16b(0x1be))/0x4+parseInt(_0x58a16b(0x1ee))/0x5+parseInt(_0x58a16b(0x1c3))/0x6*(-parseInt(_0x58a16b(0x19f))/0x7)+-parseInt(_0x58a16b(0x218))/0x8*(parseInt(_0x58a16b(0x204))/0x9);if(_0x5cea92===_0x48cfdd)break;else _0x503871['push'](_0x503871['shift']());}catch(_0x32528b){_0x503871['push'](_0x503871['shift']());}}}(a19_0x1ae2,0xd6364));var __createBinding=this&&this[a19_0x3b2fe4(0x1ef)]||(Object[a19_0x3b2fe4(0x1b9)]?function(_0xf35039,_0x37ab4b,_0x4e3f70,_0x40d80e){const _0x2ee14b=a19_0x3b2fe4;if(_0x40d80e===undefined)_0x40d80e=_0x4e3f70;var _0x3883be=Object['getOwnPropertyDescriptor'](_0x37ab4b,_0x4e3f70);(!_0x3883be||(_0x2ee14b(0x1a7)in _0x3883be?!_0x37ab4b['__esModule']:_0x3883be['writable']||_0x3883be[_0x2ee14b(0x1c1)]))&&(_0x3883be={'enumerable':!![],'get':function(){return _0x37ab4b[_0x4e3f70];}}),Object[_0x2ee14b(0x1ed)](_0xf35039,_0x40d80e,_0x3883be);}:function(_0x3574ec,_0x42e51f,_0x7887d8,_0x2c3a0d){if(_0x2c3a0d===undefined)_0x2c3a0d=_0x7887d8;_0x3574ec[_0x2c3a0d]=_0x42e51f[_0x7887d8];}),__setModuleDefault=this&&this[a19_0x3b2fe4(0x1bc)]||(Object[a19_0x3b2fe4(0x1b9)]?function(_0x1b90fa,_0x5b08a9){const _0x5edccc=a19_0x3b2fe4;Object[_0x5edccc(0x1ed)](_0x1b90fa,'default',{'enumerable':!![],'value':_0x5b08a9});}:function(_0x3f075e,_0x4b0c7a){const _0x565868=a19_0x3b2fe4;_0x3f075e[_0x565868(0x1ac)]=_0x4b0c7a;}),__importStar=this&&this['__importStar']||(function(){var _0x525658=function(_0x3a568c){const _0x71535a=a19_0x1f8f;return _0x525658=Object[_0x71535a(0x1a6)]||function(_0x110c80){const _0xafab53=_0x71535a;var _0x2e734d=[];for(var _0x4ecd08 in _0x110c80)if(Object[_0xafab53(0x1db)][_0xafab53(0x1b4)]['call'](_0x110c80,_0x4ecd08))_0x2e734d[_0x2e734d[_0xafab53(0x20d)]]=_0x4ecd08;return _0x2e734d;},_0x525658(_0x3a568c);};return function(_0x251b8b){const _0x58cb04=a19_0x1f8f;if(_0x251b8b&&_0x251b8b[_0x58cb04(0x1dd)])return _0x251b8b;var _0x2d81c4={};if(_0x251b8b!=null){for(var _0x44a2da=_0x525658(_0x251b8b),_0x6a4789=0x0;_0x6a4789<_0x44a2da[_0x58cb04(0x20d)];_0x6a4789++)if(_0x44a2da[_0x6a4789]!==_0x58cb04(0x1ac))__createBinding(_0x2d81c4,_0x251b8b,_0x44a2da[_0x6a4789]);}return __setModuleDefault(_0x2d81c4,_0x251b8b),_0x2d81c4;};}());function a19_0x1ae2(){const _0xf2a4c1=['hasOwnProperty','getMerchantStatistics','/payments/:id/customer','/payout/merchants','domainMonitoringService','create','FAILED','validate','__setModuleDefault','json','531864ipmaFU','updateCustomerDataSchema','/logs/stats','configurable','Router','313506ofLFyy','../middleware/validation','4133853xMOSyX','updateCustomerData','/users/:id/activate','deletePayout','/statistics','loggerService','953199nBYcDl','delete','CoinToPay\x20automatic\x20status\x20checking\x20service','getPayouts','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','getUsers','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','CoinToPay\x20payment\x20status\x20checked\x20successfully','createUser','cointopay','/cointopay/check/:paymentId','\x20days\x20if\x20not\x20paid','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','/users/:id/suspend','params','/users/:id','prototype','getMonitoringStats','__esModule','status','cleanOldLogs','gateway','suspendUser','currency','updateUser','authenticateToken','/merchants/selection','getMerchantsSelection','express','paymentId','Domain\x20is\x20responding\x20correctly','shop','createPayout','getPayoutById','defineProperty','8109430jPvKyJ','__createBinding','getPaymentById','3141772wKeqHE','getMerchantsAwaitingPayout','/payouts/:id','Old\x20logs\x20cleaned\x20(kept\x20last\x20','resolve','manualCheck','PENDING','createdAt','deleteUser','Failed\x20to\x20get\x20payment\x20information','post','../services/coinToPayStatusService','🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','Failed\x20to\x20perform\x20manual\x20domain\x20check','\x20days)','/payouts','EXPIRED','../config/database','../middleware/auth','11917782sLZUMX','../services/domainMonitoringService','now','/payments/:id','checkAuth','gatewayPaymentId','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','findUnique','use','length','getUserById','getLogStats','PAID','put','Domain\x20check\x20failed','../controllers/adminController','updatedAt','then','/payout','getPayments','8eiBdpA','Failed\x20to\x20get\x20log\x20statistics','amount','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','Failed\x20to\x20clean\x20old\x20logs','❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','expiryDays','getServiceStats','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','../services/loggerService','toISOString','coinToPayStatusService','42FshWMx','getPayoutStats','log','payment','requireAdmin','/cointopay/payment/:paymentId','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','getOwnPropertyNames','get','createPayoutSchema','/auth','/domain-monitoring/check','checkPaymentById','default','/logs/clean','activateUser','getStatistics','/cointopay/stats','/users','getPaymentTimerInfo','getTime'];a19_0x1ae2=function(){return _0xf2a4c1;};return a19_0x1ae2();}Object['defineProperty'](exports,a19_0x3b2fe4(0x1dd),{'value':!![]});function a19_0x1f8f(_0x2d35fa,_0x2aebba){const _0x1ae2de=a19_0x1ae2();return a19_0x1f8f=function(_0x1f8f17,_0x37c060){_0x1f8f17=_0x1f8f17-0x19c;let _0xebfc94=_0x1ae2de[_0x1f8f17];return _0xebfc94;},a19_0x1f8f(_0x2d35fa,_0x2aebba);}const express_1=require(a19_0x3b2fe4(0x1e7)),adminController_1=require(a19_0x3b2fe4(0x213)),validation_1=require(a19_0x3b2fe4(0x1c4)),auth_1=require(a19_0x3b2fe4(0x203)),loggerService_1=require(a19_0x3b2fe4(0x19c)),coinToPayStatusService_1=require(a19_0x3b2fe4(0x1fc)),domainMonitoringService_1=require(a19_0x3b2fe4(0x205)),router=(0x0,express_1[a19_0x3b2fe4(0x1c2)])(),adminController=new adminController_1['AdminController']();router[a19_0x3b2fe4(0x20c)](auth_1[a19_0x3b2fe4(0x1e4)],auth_1[a19_0x3b2fe4(0x1a3)]),router['get'](a19_0x3b2fe4(0x1a9),adminController[a19_0x3b2fe4(0x208)]),router[a19_0x3b2fe4(0x1a7)](a19_0x3b2fe4(0x1c9),adminController[a19_0x3b2fe4(0x1af)]),router['get']('/merchant-statistics',adminController[a19_0x3b2fe4(0x1b5)]),router['get']('/payout/stats',adminController[a19_0x3b2fe4(0x1a0)]),router['get'](a19_0x3b2fe4(0x1b7),adminController[a19_0x3b2fe4(0x1f2)]),router[a19_0x3b2fe4(0x1a7)](a19_0x3b2fe4(0x1e5),adminController[a19_0x3b2fe4(0x1e6)]),router[a19_0x3b2fe4(0x1fb)](a19_0x3b2fe4(0x216),(0x0,validation_1[a19_0x3b2fe4(0x1bb)])(validation_1[a19_0x3b2fe4(0x1a8)]),adminController[a19_0x3b2fe4(0x1eb)]),router[a19_0x3b2fe4(0x1a7)](a19_0x3b2fe4(0x200),adminController[a19_0x3b2fe4(0x1ce)]),router[a19_0x3b2fe4(0x1a7)](a19_0x3b2fe4(0x1f3),adminController[a19_0x3b2fe4(0x1ec)]),router['delete'](a19_0x3b2fe4(0x1f3),adminController[a19_0x3b2fe4(0x1c8)]),router[a19_0x3b2fe4(0x1a7)]('/payments',adminController[a19_0x3b2fe4(0x217)]),router[a19_0x3b2fe4(0x1a7)]('/payments/:id',adminController[a19_0x3b2fe4(0x1f0)]),router[a19_0x3b2fe4(0x211)](a19_0x3b2fe4(0x207),adminController['updatePayment']),router[a19_0x3b2fe4(0x211)](a19_0x3b2fe4(0x1b6),(0x0,validation_1[a19_0x3b2fe4(0x1bb)])(validation_1[a19_0x3b2fe4(0x1bf)]),adminController[a19_0x3b2fe4(0x1c6)]),router[a19_0x3b2fe4(0x1a7)](a19_0x3b2fe4(0x1b1),adminController[a19_0x3b2fe4(0x1d0)]),router['get'](a19_0x3b2fe4(0x1da),adminController[a19_0x3b2fe4(0x20e)]),router['post'](a19_0x3b2fe4(0x1b1),(0x0,validation_1[a19_0x3b2fe4(0x1bb)])(validation_1['createUserSchema']),adminController[a19_0x3b2fe4(0x1d3)]),router[a19_0x3b2fe4(0x211)](a19_0x3b2fe4(0x1da),(0x0,validation_1[a19_0x3b2fe4(0x1bb)])(validation_1['updateUserSchema']),adminController[a19_0x3b2fe4(0x1e3)]),router[a19_0x3b2fe4(0x1cc)](a19_0x3b2fe4(0x1da),adminController[a19_0x3b2fe4(0x1f9)]),router['post'](a19_0x3b2fe4(0x1d8),adminController[a19_0x3b2fe4(0x1e1)]),router[a19_0x3b2fe4(0x1fb)](a19_0x3b2fe4(0x1c7),adminController[a19_0x3b2fe4(0x1ae)]),router[a19_0x3b2fe4(0x1a7)](a19_0x3b2fe4(0x1c0),(_0x55cb00,_0x51615a)=>{const _0x516387=a19_0x3b2fe4;try{const _0x4c3189=loggerService_1[_0x516387(0x1ca)][_0x516387(0x20f)]();_0x51615a['json']({'success':!![],'result':_0x4c3189});}catch(_0x2ae98f){_0x51615a['status'](0x1f4)['json']({'success':![],'message':_0x516387(0x219)});}}),router[a19_0x3b2fe4(0x1fb)](a19_0x3b2fe4(0x1ad),(_0x13b783,_0x35bf91)=>{const _0x299050=a19_0x3b2fe4;try{const {daysToKeep:daysToKeep=0x1e}=_0x13b783['body'];loggerService_1[_0x299050(0x1ca)][_0x299050(0x1df)](daysToKeep),_0x35bf91[_0x299050(0x1bd)]({'success':!![],'message':_0x299050(0x1f4)+daysToKeep+_0x299050(0x1ff)});}catch(_0x5b6b65){_0x35bf91['status'](0x1f4)[_0x299050(0x1bd)]({'success':![],'message':_0x299050(0x21c)});}}),router['post'](a19_0x3b2fe4(0x1d5),async(_0x80476,_0x5a9250)=>{const _0x1ff5ae=a19_0x3b2fe4;try{const {paymentId:_0x161589}=_0x80476[_0x1ff5ae(0x1d9)];console[_0x1ff5ae(0x1a1)](_0x1ff5ae(0x1fd)+_0x161589),await coinToPayStatusService_1[_0x1ff5ae(0x19e)][_0x1ff5ae(0x1ab)](_0x161589),_0x5a9250['json']({'success':!![],'message':_0x1ff5ae(0x1d2)});}catch(_0x317072){console['error'](_0x1ff5ae(0x21d)+_0x80476[_0x1ff5ae(0x1d9)][_0x1ff5ae(0x1e8)]+':',_0x317072),_0x5a9250['status'](0x1f4)[_0x1ff5ae(0x1bd)]({'success':![],'message':_0x317072 instanceof Error?_0x317072['message']:_0x1ff5ae(0x1d7)});}}),router[a19_0x3b2fe4(0x1a7)](a19_0x3b2fe4(0x1b0),(_0x5e4201,_0x4dc35e)=>{const _0x368ca8=a19_0x3b2fe4;try{const _0x4faa99=coinToPayStatusService_1[_0x368ca8(0x19e)][_0x368ca8(0x21f)]();_0x4dc35e['json']({'success':!![],'result':{..._0x4faa99,'description':_0x368ca8(0x1cd),'statusMapping':{'Paid':_0x368ca8(0x210),'Awaiting\x20Fiat':_0x368ca8(0x1f7),'waiting':_0x368ca8(0x1f7),'expired':_0x368ca8(0x201),'failed':_0x368ca8(0x1ba)},'autoExpiryNote':'Payments\x20automatically\x20expire\x20after\x20'+_0x4faa99[_0x368ca8(0x21e)]+_0x368ca8(0x1d6),'individualTimersNote':_0x368ca8(0x21b)}});}catch(_0x17628c){_0x4dc35e[_0x368ca8(0x1de)](0x1f4)[_0x368ca8(0x1bd)]({'success':![],'message':_0x368ca8(0x1a5)});}}),router[a19_0x3b2fe4(0x1a7)](a19_0x3b2fe4(0x1a4),async(_0x23cc19,_0x1437af)=>{const _0x306089=a19_0x3b2fe4;try{const {paymentId:_0x4c0ff9}=_0x23cc19[_0x306089(0x1d9)],_0x322d64=coinToPayStatusService_1['coinToPayStatusService'][_0x306089(0x1b2)](_0x4c0ff9),_0x418ee0=(await Promise[_0x306089(0x1f5)]()[_0x306089(0x215)](()=>__importStar(require(_0x306089(0x202)))))[_0x306089(0x1ac)],_0x3a0f55=await _0x418ee0[_0x306089(0x1a2)][_0x306089(0x20b)]({'where':{'id':_0x4c0ff9},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x3a0f55)return _0x1437af['status'](0x194)['json']({'success':![],'message':'Payment\x20not\x20found'});_0x1437af['json']({'success':!![],'result':{'payment':{'id':_0x3a0f55['id'],'gateway':_0x3a0f55[_0x306089(0x1e0)],'gatewayPaymentId':_0x3a0f55[_0x306089(0x209)],'status':_0x3a0f55['status'],'amount':_0x3a0f55[_0x306089(0x21a)],'currency':_0x3a0f55[_0x306089(0x1e2)],'createdAt':_0x3a0f55[_0x306089(0x1f8)],'updatedAt':_0x3a0f55[_0x306089(0x214)],'shop':_0x3a0f55[_0x306089(0x1ea)]},'timers':_0x322d64,'isCoinToPay':_0x3a0f55[_0x306089(0x1e0)]===_0x306089(0x1d4),'ageInMinutes':Math['floor']((Date[_0x306089(0x206)]()-_0x3a0f55[_0x306089(0x1f8)][_0x306089(0x1b3)]())/(0x3e8*0x3c))}});}catch(_0x1e12bc){_0x1437af['status'](0x1f4)[_0x306089(0x1bd)]({'success':![],'message':_0x1e12bc instanceof Error?_0x1e12bc['message']:_0x306089(0x1fa)});}}),router[a19_0x3b2fe4(0x1a7)]('/domain-monitoring/stats',(_0x21dfa2,_0x5068c9)=>{const _0x299610=a19_0x3b2fe4;try{const _0x327fed=domainMonitoringService_1['domainMonitoringService'][_0x299610(0x1dc)]();_0x5068c9[_0x299610(0x1bd)]({'success':!![],'result':{..._0x327fed,'description':_0x299610(0x1cf),'behavior':_0x299610(0x1d1),'encoding':_0x299610(0x20a)}});}catch(_0x54e975){_0x5068c9['status'](0x1f4)[_0x299610(0x1bd)]({'success':![],'message':_0x299610(0x220)});}}),router[a19_0x3b2fe4(0x1fb)](a19_0x3b2fe4(0x1aa),async(_0x3e14b6,_0x57b563)=>{const _0x52d92c=a19_0x3b2fe4;try{const _0x1a00c8=await domainMonitoringService_1[_0x52d92c(0x1b8)][_0x52d92c(0x1f6)]();_0x57b563['json']({'success':!![],'result':{'domainAvailable':_0x1a00c8,'message':_0x1a00c8?_0x52d92c(0x1e9):_0x52d92c(0x212),'timestamp':new Date()[_0x52d92c(0x19d)]()}});}catch(_0x394896){_0x57b563[_0x52d92c(0x1de)](0x1f4)[_0x52d92c(0x1bd)]({'success':![],'message':_0x394896 instanceof Error?_0x394896['message']:_0x52d92c(0x1fe)});}}),exports[a19_0x3b2fe4(0x1ac)]=router;