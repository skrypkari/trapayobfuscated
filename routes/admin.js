'use strict';const a19_0x3914c1=a19_0x2f77;(function(_0x46c183,_0x5e9f85){const _0x53a470=a19_0x2f77,_0x21bbc6=_0x46c183();while(!![]){try{const _0x1e2a19=parseInt(_0x53a470(0x138))/0x1+parseInt(_0x53a470(0x154))/0x2+-parseInt(_0x53a470(0x10b))/0x3*(-parseInt(_0x53a470(0x16b))/0x4)+-parseInt(_0x53a470(0x14f))/0x5+parseInt(_0x53a470(0xf7))/0x6+parseInt(_0x53a470(0x14a))/0x7+-parseInt(_0x53a470(0x157))/0x8;if(_0x1e2a19===_0x5e9f85)break;else _0x21bbc6['push'](_0x21bbc6['shift']());}catch(_0x148981){_0x21bbc6['push'](_0x21bbc6['shift']());}}}(a19_0x3837,0x3499a));var __createBinding=this&&this[a19_0x3914c1(0x101)]||(Object[a19_0x3914c1(0xfa)]?function(_0x1942da,_0x248c08,_0x417bb9,_0x13dd5c){const _0x494a17=a19_0x3914c1;if(_0x13dd5c===undefined)_0x13dd5c=_0x417bb9;var _0x1fa6a8=Object[_0x494a17(0xfd)](_0x248c08,_0x417bb9);(!_0x1fa6a8||(_0x494a17(0x15a)in _0x1fa6a8?!_0x248c08[_0x494a17(0x10e)]:_0x1fa6a8[_0x494a17(0xfb)]||_0x1fa6a8[_0x494a17(0x153)]))&&(_0x1fa6a8={'enumerable':!![],'get':function(){return _0x248c08[_0x417bb9];}}),Object[_0x494a17(0x169)](_0x1942da,_0x13dd5c,_0x1fa6a8);}:function(_0x5d7936,_0x45fcce,_0x1a276f,_0x114bbe){if(_0x114bbe===undefined)_0x114bbe=_0x1a276f;_0x5d7936[_0x114bbe]=_0x45fcce[_0x1a276f];}),__setModuleDefault=this&&this[a19_0x3914c1(0x168)]||(Object[a19_0x3914c1(0xfa)]?function(_0x75acc,_0x5d7ae0){const _0x28b703=a19_0x3914c1;Object[_0x28b703(0x169)](_0x75acc,_0x28b703(0x143),{'enumerable':!![],'value':_0x5d7ae0});}:function(_0x24437a,_0x3060b0){_0x24437a['default']=_0x3060b0;}),__importStar=this&&this['__importStar']||(function(){var _0x2f5c53=function(_0x1890dd){const _0x4bd4fb=a19_0x2f77;return _0x2f5c53=Object[_0x4bd4fb(0xff)]||function(_0xd38ece){const _0x5ab77d=_0x4bd4fb;var _0x9ea90b=[];for(var _0x28cdcc in _0xd38ece)if(Object[_0x5ab77d(0x107)]['hasOwnProperty']['call'](_0xd38ece,_0x28cdcc))_0x9ea90b[_0x9ea90b[_0x5ab77d(0x106)]]=_0x28cdcc;return _0x9ea90b;},_0x2f5c53(_0x1890dd);};return function(_0x133ff1){const _0x329003=a19_0x2f77;if(_0x133ff1&&_0x133ff1['__esModule'])return _0x133ff1;var _0x28dcd0={};if(_0x133ff1!=null){for(var _0x354e1d=_0x2f5c53(_0x133ff1),_0x4ed411=0x0;_0x4ed411<_0x354e1d[_0x329003(0x106)];_0x4ed411++)if(_0x354e1d[_0x4ed411]!==_0x329003(0x143))__createBinding(_0x28dcd0,_0x133ff1,_0x354e1d[_0x4ed411]);}return __setModuleDefault(_0x28dcd0,_0x133ff1),_0x28dcd0;};}());Object[a19_0x3914c1(0x169)](exports,a19_0x3914c1(0x10e),{'value':!![]});function a19_0x2f77(_0x2aa2bc,_0x289850){const _0x3837d3=a19_0x3837();return a19_0x2f77=function(_0x2f7761,_0x21f201){_0x2f7761=_0x2f7761-0xf1;let _0x1e77af=_0x3837d3[_0x2f7761];return _0x1e77af;},a19_0x2f77(_0x2aa2bc,_0x289850);}function a19_0x3837(){const _0x3e34c9=['/domain-monitoring/stats','__createBinding','❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','createUser','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','length','prototype','delete','params','getPaymentTimerInfo','3uVFSDy','deleteUser','getMerchantStatistics','__esModule','/auth','getPayments','PENDING','Payment\x20not\x20found','manualCheck','domainMonitoringService','AdminController','body','../controllers/adminController','error','checkPaymentById','checkAuth','../middleware/validation','createPayout','/users/:id','coinToPayStatusService','getServiceStats','\x20days)','/users','getPayoutById','createUserSchema','getUserById','getLogStats','Failed\x20to\x20clean\x20old\x20logs','getUsers','deletePayout','amount','payment','/merchant-statistics','/payouts/:id','authenticateToken','floor','message','../services/coinToPayStatusService','status','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','Old\x20logs\x20cleaned\x20(kept\x20last\x20','Domain\x20is\x20responding\x20correctly','updateUserSchema','/payouts','updateCustomerData','213241RQAxtb','paymentId','/payments','../services/domainMonitoringService','CoinToPay\x20automatic\x20status\x20checking\x20service','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','shop','/cointopay/payment/:paymentId','/users/:id/suspend','post','Failed\x20to\x20perform\x20manual\x20domain\x20check','default','requireAdmin','getMerchantsSelection','/logs/stats','currency','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','2786721TDoSQO','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','/users/:id/activate','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','then','1435925wZxIJf','cleanOldLogs','\x20days\x20if\x20not\x20paid','FAILED','configurable','790056tPySFg','EXPIRED','updateUser','6401664UPYWkH','validate','CoinToPay\x20payment\x20status\x20checked\x20successfully','get','getPayouts','/payout/merchants','../config/database','loggerService','/payments/:id','/merchants/selection','/payout/stats','use','put','getTime','json','gateway','gatewayPaymentId','__setModuleDefault','defineProperty','Router','1055768QqBoyH','now','resolve','Failed\x20to\x20get\x20log\x20statistics','createPayoutSchema','/cointopay/stats','expiryDays','195174AlFuJJ','/payout','suspendUser','create','writable','getMonitoringStats','getOwnPropertyDescriptor','PAID','getOwnPropertyNames'];a19_0x3837=function(){return _0x3e34c9;};return a19_0x3837();}const express_1=require('express'),adminController_1=require(a19_0x3914c1(0x117)),validation_1=require(a19_0x3914c1(0x11b)),auth_1=require('../middleware/auth'),loggerService_1=require('../services/loggerService'),coinToPayStatusService_1=require(a19_0x3914c1(0x130)),domainMonitoringService_1=require(a19_0x3914c1(0x13b)),router=(0x0,express_1[a19_0x3914c1(0x16a)])(),adminController=new adminController_1[(a19_0x3914c1(0x115))]();router[a19_0x3914c1(0x162)](auth_1[a19_0x3914c1(0x12d)],auth_1[a19_0x3914c1(0x144)]),router[a19_0x3914c1(0x15a)](a19_0x3914c1(0x10f),adminController[a19_0x3914c1(0x11a)]),router[a19_0x3914c1(0x15a)]('/statistics',adminController['getStatistics']),router[a19_0x3914c1(0x15a)](a19_0x3914c1(0x12b),adminController[a19_0x3914c1(0x10d)]),router[a19_0x3914c1(0x15a)](a19_0x3914c1(0x161),adminController['getPayoutStats']),router[a19_0x3914c1(0x15a)](a19_0x3914c1(0x15c),adminController['getMerchantsAwaitingPayout']),router[a19_0x3914c1(0x15a)](a19_0x3914c1(0x160),adminController[a19_0x3914c1(0x145)]),router[a19_0x3914c1(0x141)](a19_0x3914c1(0xf8),(0x0,validation_1['validate'])(validation_1[a19_0x3914c1(0xf4)]),adminController[a19_0x3914c1(0x11c)]),router['get'](a19_0x3914c1(0x136),adminController[a19_0x3914c1(0x15b)]),router[a19_0x3914c1(0x15a)](a19_0x3914c1(0x12c),adminController[a19_0x3914c1(0x122)]),router[a19_0x3914c1(0x108)](a19_0x3914c1(0x12c),adminController[a19_0x3914c1(0x128)]),router[a19_0x3914c1(0x15a)](a19_0x3914c1(0x13a),adminController[a19_0x3914c1(0x110)]),router[a19_0x3914c1(0x15a)](a19_0x3914c1(0x15f),adminController['getPaymentById']),router[a19_0x3914c1(0x163)](a19_0x3914c1(0x15f),adminController['updatePayment']),router[a19_0x3914c1(0x163)]('/payments/:id/customer',(0x0,validation_1[a19_0x3914c1(0x158)])(validation_1['updateCustomerDataSchema']),adminController[a19_0x3914c1(0x137)]),router[a19_0x3914c1(0x15a)]('/users',adminController[a19_0x3914c1(0x127)]),router[a19_0x3914c1(0x15a)]('/users/:id',adminController[a19_0x3914c1(0x124)]),router['post'](a19_0x3914c1(0x121),(0x0,validation_1[a19_0x3914c1(0x158)])(validation_1[a19_0x3914c1(0x123)]),adminController[a19_0x3914c1(0x103)]),router[a19_0x3914c1(0x163)](a19_0x3914c1(0x11d),(0x0,validation_1['validate'])(validation_1[a19_0x3914c1(0x135)]),adminController[a19_0x3914c1(0x156)]),router['delete'](a19_0x3914c1(0x11d),adminController[a19_0x3914c1(0x10c)]),router[a19_0x3914c1(0x141)](a19_0x3914c1(0x140),adminController[a19_0x3914c1(0xf9)]),router[a19_0x3914c1(0x141)](a19_0x3914c1(0x14c),adminController['activateUser']),router[a19_0x3914c1(0x15a)](a19_0x3914c1(0x146),(_0x498d80,_0x3382ea)=>{const _0x33deda=a19_0x3914c1;try{const _0x2015c3=loggerService_1['loggerService'][_0x33deda(0x125)]();_0x3382ea[_0x33deda(0x165)]({'success':!![],'result':_0x2015c3});}catch(_0x332560){_0x3382ea[_0x33deda(0x131)](0x1f4)[_0x33deda(0x165)]({'success':![],'message':_0x33deda(0xf3)});}}),router[a19_0x3914c1(0x141)]('/logs/clean',(_0xa199b9,_0x154b77)=>{const _0xdd65b7=a19_0x3914c1;try{const {daysToKeep:daysToKeep=0x1e}=_0xa199b9[_0xdd65b7(0x116)];loggerService_1[_0xdd65b7(0x15e)][_0xdd65b7(0x150)](daysToKeep),_0x154b77[_0xdd65b7(0x165)]({'success':!![],'message':_0xdd65b7(0x133)+daysToKeep+_0xdd65b7(0x120)});}catch(_0x57c2c8){_0x154b77[_0xdd65b7(0x131)](0x1f4)['json']({'success':![],'message':_0xdd65b7(0x126)});}}),router[a19_0x3914c1(0x141)]('/cointopay/check/:paymentId',async(_0x47e103,_0xe44362)=>{const _0x498cf7=a19_0x3914c1;try{const {paymentId:_0x1ab880}=_0x47e103[_0x498cf7(0x109)];console['log'](_0x498cf7(0x149)+_0x1ab880),await coinToPayStatusService_1['coinToPayStatusService'][_0x498cf7(0x119)](_0x1ab880),_0xe44362[_0x498cf7(0x165)]({'success':!![],'message':_0x498cf7(0x159)});}catch(_0x2be576){console[_0x498cf7(0x118)](_0x498cf7(0x102)+_0x47e103[_0x498cf7(0x109)][_0x498cf7(0x139)]+':',_0x2be576),_0xe44362[_0x498cf7(0x131)](0x1f4)[_0x498cf7(0x165)]({'success':![],'message':_0x2be576 instanceof Error?_0x2be576['message']:_0x498cf7(0x14b)});}}),router[a19_0x3914c1(0x15a)](a19_0x3914c1(0xf5),(_0x1324e2,_0x594e0a)=>{const _0x222d78=a19_0x3914c1;try{const _0xd92e20=coinToPayStatusService_1[_0x222d78(0x11e)][_0x222d78(0x11f)]();_0x594e0a['json']({'success':!![],'result':{..._0xd92e20,'description':_0x222d78(0x13c),'statusMapping':{'Paid':_0x222d78(0xfe),'Awaiting\x20Fiat':'PENDING','waiting':_0x222d78(0x111),'expired':_0x222d78(0x155),'failed':_0x222d78(0x152)},'autoExpiryNote':'Payments\x20automatically\x20expire\x20after\x20'+_0xd92e20[_0x222d78(0xf6)]+_0x222d78(0x151),'individualTimersNote':_0x222d78(0x132)}});}catch(_0x1a15d7){_0x594e0a[_0x222d78(0x131)](0x1f4)[_0x222d78(0x165)]({'success':![],'message':_0x222d78(0x148)});}}),router[a19_0x3914c1(0x15a)](a19_0x3914c1(0x13f),async(_0x2adc49,_0x275d6)=>{const _0x5957fb=a19_0x3914c1;try{const {paymentId:_0x43255b}=_0x2adc49[_0x5957fb(0x109)],_0x1aa0c2=coinToPayStatusService_1['coinToPayStatusService'][_0x5957fb(0x10a)](_0x43255b),_0x1ad741=(await Promise[_0x5957fb(0xf2)]()[_0x5957fb(0x14e)](()=>__importStar(require(_0x5957fb(0x15d)))))[_0x5957fb(0x143)],_0x13268f=await _0x1ad741[_0x5957fb(0x12a)]['findUnique']({'where':{'id':_0x43255b},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x13268f)return _0x275d6[_0x5957fb(0x131)](0x194)[_0x5957fb(0x165)]({'success':![],'message':_0x5957fb(0x112)});_0x275d6[_0x5957fb(0x165)]({'success':!![],'result':{'payment':{'id':_0x13268f['id'],'gateway':_0x13268f[_0x5957fb(0x166)],'gatewayPaymentId':_0x13268f[_0x5957fb(0x167)],'status':_0x13268f[_0x5957fb(0x131)],'amount':_0x13268f[_0x5957fb(0x129)],'currency':_0x13268f[_0x5957fb(0x147)],'createdAt':_0x13268f['createdAt'],'updatedAt':_0x13268f['updatedAt'],'shop':_0x13268f[_0x5957fb(0x13e)]},'timers':_0x1aa0c2,'isCoinToPay':_0x13268f['gateway']==='cointopay','ageInMinutes':Math[_0x5957fb(0x12e)]((Date[_0x5957fb(0xf1)]()-_0x13268f['createdAt'][_0x5957fb(0x164)]())/(0x3e8*0x3c))}});}catch(_0x239314){_0x275d6[_0x5957fb(0x131)](0x1f4)[_0x5957fb(0x165)]({'success':![],'message':_0x239314 instanceof Error?_0x239314[_0x5957fb(0x12f)]:'Failed\x20to\x20get\x20payment\x20information'});}}),router[a19_0x3914c1(0x15a)](a19_0x3914c1(0x100),(_0x488688,_0x124065)=>{const _0x2d6199=a19_0x3914c1;try{const _0x1624fd=domainMonitoringService_1[_0x2d6199(0x114)][_0x2d6199(0xfc)]();_0x124065[_0x2d6199(0x165)]({'success':!![],'result':{..._0x1624fd,'description':_0x2d6199(0x104),'behavior':_0x2d6199(0x14d),'encoding':_0x2d6199(0x105)}});}catch(_0x18afed){_0x124065['status'](0x1f4)[_0x2d6199(0x165)]({'success':![],'message':_0x2d6199(0x13d)});}}),router[a19_0x3914c1(0x141)]('/domain-monitoring/check',async(_0x2bf9f2,_0x136f6c)=>{const _0x488841=a19_0x3914c1;try{const _0x470fe4=await domainMonitoringService_1['domainMonitoringService'][_0x488841(0x113)]();_0x136f6c['json']({'success':!![],'result':{'domainAvailable':_0x470fe4,'message':_0x470fe4?_0x488841(0x134):'Domain\x20check\x20failed','timestamp':new Date()['toISOString']()}});}catch(_0xfde70d){_0x136f6c[_0x488841(0x131)](0x1f4)[_0x488841(0x165)]({'success':![],'message':_0xfde70d instanceof Error?_0xfde70d['message']:_0x488841(0x142)});}}),exports[a19_0x3914c1(0x143)]=router;