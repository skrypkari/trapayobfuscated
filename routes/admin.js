'use strict';const a19_0x1ec366=a19_0x1b4d;function a19_0x1b4d(_0x1d1769,_0x5a2eda){const _0x354c3f=a19_0x354c();return a19_0x1b4d=function(_0x1b4ddd,_0xda8289){_0x1b4ddd=_0x1b4ddd-0xff;let _0x41bb7d=_0x354c3f[_0x1b4ddd];return _0x41bb7d;},a19_0x1b4d(_0x1d1769,_0x5a2eda);}(function(_0x4c22fb,_0x3ddc0a){const _0x5c2db2=a19_0x1b4d,_0x30dfa0=_0x4c22fb();while(!![]){try{const _0x1a3ed5=parseInt(_0x5c2db2(0x153))/0x1+-parseInt(_0x5c2db2(0x117))/0x2*(-parseInt(_0x5c2db2(0x157))/0x3)+parseInt(_0x5c2db2(0x14d))/0x4*(-parseInt(_0x5c2db2(0x121))/0x5)+parseInt(_0x5c2db2(0x105))/0x6+-parseInt(_0x5c2db2(0x162))/0x7*(-parseInt(_0x5c2db2(0x115))/0x8)+parseInt(_0x5c2db2(0x16d))/0x9*(parseInt(_0x5c2db2(0x13a))/0xa)+-parseInt(_0x5c2db2(0x174))/0xb;if(_0x1a3ed5===_0x3ddc0a)break;else _0x30dfa0['push'](_0x30dfa0['shift']());}catch(_0x51d024){_0x30dfa0['push'](_0x30dfa0['shift']());}}}(a19_0x354c,0xadcab));function a19_0x354c(){const _0x3189f7=['then','98556hZSitH','Payments\x20automatically\x20expire\x20after\x20','get','call','6PoHRlH','__esModule','length','createUser','log','cointopay','/cointopay/stats','getMerchantsAwaitingPayout','gateway','/payments/:id/customer','validate','7wIPHrX','default','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','prototype','createUserSchema','paymentId','getMerchantsSelection','PENDING','/payouts','/users/:id/suspend','getPayments','522mwWOTv','/payouts/:id','floor','Failed\x20to\x20clean\x20old\x20logs','now','/statistics','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','37199074PpHSVm','../controllers/adminController','getLogStats','getServiceStats','use','updatePayment','../middleware/validation','coinToPayStatusService','getMonitoringStats','Failed\x20to\x20perform\x20manual\x20domain\x20check','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','getMerchantStatistics','/payout/stats','8245302vanmjS','updatedAt','createdAt','getOwnPropertyDescriptor','Old\x20logs\x20cleaned\x20(kept\x20last\x20','json','writable','domainMonitoringService','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','../services/domainMonitoringService','updateCustomerData','/users/:id/activate','/cointopay/payment/:paymentId','updateCustomerDataSchema','Router','4912344nsOQFQ','post','745670hLGDnD','getPaymentById','Domain\x20is\x20responding\x20correctly','put','CoinToPay\x20payment\x20status\x20checked\x20successfully','getPaymentTimerInfo','currency','authenticateToken','loggerService','expiryDays','106905lJCxfa','Domain\x20check\x20failed','deleteUser','createPayout','cleanOldLogs','__importStar','/payments/:id','Failed\x20to\x20get\x20log\x20statistics','toISOString','requireAdmin','getPayouts','delete','getPayoutStats','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','/auth','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','gatewayPaymentId','defineProperty','AdminController','params','../config/database','updateUser','payment','deletePayout','getPayoutById','228490SYYEYJ','/payout/merchants','/logs/stats','status','../services/coinToPayStatusService','create','Failed\x20to\x20get\x20payment\x20information','/users/:id','createPayoutSchema','../services/loggerService','/cointopay/check/:paymentId','findUnique','express','suspendUser','/payout','manualCheck','/payments','amount','error','12pXcEik','/domain-monitoring/check','\x20days)','__setModuleDefault','message'];a19_0x354c=function(){return _0x3189f7;};return a19_0x354c();}var __createBinding=this&&this['__createBinding']||(Object['create']?function(_0x5b36a0,_0x2fe94e,_0x56c803,_0x209b2f){const _0x23dadd=a19_0x1b4d;if(_0x209b2f===undefined)_0x209b2f=_0x56c803;var _0x182c54=Object[_0x23dadd(0x108)](_0x2fe94e,_0x56c803);(!_0x182c54||(_0x23dadd(0x155)in _0x182c54?!_0x2fe94e[_0x23dadd(0x158)]:_0x182c54[_0x23dadd(0x10b)]||_0x182c54['configurable']))&&(_0x182c54={'enumerable':!![],'get':function(){return _0x2fe94e[_0x56c803];}}),Object['defineProperty'](_0x5b36a0,_0x209b2f,_0x182c54);}:function(_0x426cd3,_0x3cd533,_0x264522,_0x3b215e){if(_0x3b215e===undefined)_0x3b215e=_0x264522;_0x426cd3[_0x3b215e]=_0x3cd533[_0x264522];}),__setModuleDefault=this&&this[a19_0x1ec366(0x150)]||(Object[a19_0x1ec366(0x13f)]?function(_0x1a34bf,_0x38dfab){const _0x7311dc=a19_0x1ec366;Object['defineProperty'](_0x1a34bf,_0x7311dc(0x163),{'enumerable':!![],'value':_0x38dfab});}:function(_0x413b2d,_0x390a40){const _0x3089b7=a19_0x1ec366;_0x413b2d[_0x3089b7(0x163)]=_0x390a40;}),__importStar=this&&this[a19_0x1ec366(0x126)]||(function(){var _0x3b02d3=function(_0x5244ea){return _0x3b02d3=Object['getOwnPropertyNames']||function(_0x2bd661){const _0x468364=a19_0x1b4d;var _0x5b56c9=[];for(var _0x89f722 in _0x2bd661)if(Object[_0x468364(0x165)]['hasOwnProperty'][_0x468364(0x156)](_0x2bd661,_0x89f722))_0x5b56c9[_0x5b56c9[_0x468364(0x159)]]=_0x89f722;return _0x5b56c9;},_0x3b02d3(_0x5244ea);};return function(_0x35bba7){const _0x5cb4de=a19_0x1b4d;if(_0x35bba7&&_0x35bba7['__esModule'])return _0x35bba7;var _0x57db59={};if(_0x35bba7!=null){for(var _0x30b94e=_0x3b02d3(_0x35bba7),_0x507301=0x0;_0x507301<_0x30b94e[_0x5cb4de(0x159)];_0x507301++)if(_0x30b94e[_0x507301]!==_0x5cb4de(0x163))__createBinding(_0x57db59,_0x35bba7,_0x30b94e[_0x507301]);}return __setModuleDefault(_0x57db59,_0x35bba7),_0x57db59;};}());Object[a19_0x1ec366(0x132)](exports,a19_0x1ec366(0x158),{'value':!![]});const express_1=require(a19_0x1ec366(0x146)),adminController_1=require(a19_0x1ec366(0x175)),validation_1=require(a19_0x1ec366(0x17a)),auth_1=require('../middleware/auth'),loggerService_1=require(a19_0x1ec366(0x143)),coinToPayStatusService_1=require(a19_0x1ec366(0x13e)),domainMonitoringService_1=require(a19_0x1ec366(0x10f)),router=(0x0,express_1[a19_0x1ec366(0x114)])(),adminController=new adminController_1[(a19_0x1ec366(0x133))]();router[a19_0x1ec366(0x178)](auth_1[a19_0x1ec366(0x11e)],auth_1[a19_0x1ec366(0x12a)]),router['get'](a19_0x1ec366(0x12f),adminController['checkAuth']),router[a19_0x1ec366(0x155)](a19_0x1ec366(0x172),adminController['getStatistics']),router['get']('/merchant-statistics',adminController[a19_0x1ec366(0x103)]),router[a19_0x1ec366(0x155)](a19_0x1ec366(0x104),adminController[a19_0x1ec366(0x12d)]),router[a19_0x1ec366(0x155)](a19_0x1ec366(0x13b),adminController[a19_0x1ec366(0x15e)]),router[a19_0x1ec366(0x155)]('/merchants/selection',adminController[a19_0x1ec366(0x168)]),router[a19_0x1ec366(0x116)](a19_0x1ec366(0x148),(0x0,validation_1[a19_0x1ec366(0x161)])(validation_1[a19_0x1ec366(0x142)]),adminController[a19_0x1ec366(0x124)]),router[a19_0x1ec366(0x155)](a19_0x1ec366(0x16a),adminController[a19_0x1ec366(0x12b)]),router[a19_0x1ec366(0x155)](a19_0x1ec366(0x16e),adminController[a19_0x1ec366(0x139)]),router['delete'](a19_0x1ec366(0x16e),adminController[a19_0x1ec366(0x138)]),router[a19_0x1ec366(0x155)](a19_0x1ec366(0x14a),adminController[a19_0x1ec366(0x16c)]),router[a19_0x1ec366(0x155)](a19_0x1ec366(0x127),adminController[a19_0x1ec366(0x118)]),router[a19_0x1ec366(0x11a)]('/payments/:id',adminController[a19_0x1ec366(0x179)]),router['put'](a19_0x1ec366(0x160),(0x0,validation_1['validate'])(validation_1[a19_0x1ec366(0x113)]),adminController[a19_0x1ec366(0x110)]),router[a19_0x1ec366(0x155)]('/users',adminController['getUsers']),router[a19_0x1ec366(0x155)](a19_0x1ec366(0x141),adminController['getUserById']),router[a19_0x1ec366(0x116)]('/users',(0x0,validation_1['validate'])(validation_1[a19_0x1ec366(0x166)]),adminController[a19_0x1ec366(0x15a)]),router[a19_0x1ec366(0x11a)](a19_0x1ec366(0x141),(0x0,validation_1[a19_0x1ec366(0x161)])(validation_1['updateUserSchema']),adminController[a19_0x1ec366(0x136)]),router[a19_0x1ec366(0x12c)]('/users/:id',adminController[a19_0x1ec366(0x123)]),router[a19_0x1ec366(0x116)](a19_0x1ec366(0x16b),adminController[a19_0x1ec366(0x147)]),router[a19_0x1ec366(0x116)](a19_0x1ec366(0x111),adminController['activateUser']),router[a19_0x1ec366(0x155)](a19_0x1ec366(0x13c),(_0x465814,_0x45d427)=>{const _0x31321e=a19_0x1ec366;try{const _0x304e3b=loggerService_1['loggerService'][_0x31321e(0x176)]();_0x45d427['json']({'success':!![],'result':_0x304e3b});}catch(_0x4234a0){_0x45d427['status'](0x1f4)[_0x31321e(0x10a)]({'success':![],'message':_0x31321e(0x128)});}}),router['post']('/logs/clean',(_0xe724b4,_0x1b9560)=>{const _0x2f653f=a19_0x1ec366;try{const {daysToKeep:daysToKeep=0x1e}=_0xe724b4['body'];loggerService_1[_0x2f653f(0x11f)][_0x2f653f(0x125)](daysToKeep),_0x1b9560[_0x2f653f(0x10a)]({'success':!![],'message':_0x2f653f(0x109)+daysToKeep+_0x2f653f(0x14f)});}catch(_0x4666dc){_0x1b9560[_0x2f653f(0x13d)](0x1f4)[_0x2f653f(0x10a)]({'success':![],'message':_0x2f653f(0x170)});}}),router[a19_0x1ec366(0x116)](a19_0x1ec366(0x144),async(_0x352312,_0x42fd34)=>{const _0x1790ef=a19_0x1ec366;try{const {paymentId:_0x53b521}=_0x352312[_0x1790ef(0x134)];console[_0x1790ef(0x15b)]('üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20'+_0x53b521),await coinToPayStatusService_1[_0x1790ef(0xff)]['checkPaymentById'](_0x53b521),_0x42fd34['json']({'success':!![],'message':_0x1790ef(0x11b)});}catch(_0x453c5d){console[_0x1790ef(0x14c)](_0x1790ef(0x130)+_0x352312[_0x1790ef(0x134)][_0x1790ef(0x167)]+':',_0x453c5d),_0x42fd34[_0x1790ef(0x13d)](0x1f4)[_0x1790ef(0x10a)]({'success':![],'message':_0x453c5d instanceof Error?_0x453c5d[_0x1790ef(0x151)]:_0x1790ef(0x173)});}}),router[a19_0x1ec366(0x155)](a19_0x1ec366(0x15d),(_0x1930a3,_0x1b7f3d)=>{const _0x3cd8b6=a19_0x1ec366;try{const _0x830f49=coinToPayStatusService_1['coinToPayStatusService'][_0x3cd8b6(0x177)]();_0x1b7f3d[_0x3cd8b6(0x10a)]({'success':!![],'result':{..._0x830f49,'description':'CoinToPay\x20automatic\x20status\x20checking\x20service','statusMapping':{'Paid':'PAID','Awaiting\x20Fiat':_0x3cd8b6(0x169),'waiting':_0x3cd8b6(0x169),'expired':'EXPIRED','failed':'FAILED'},'autoExpiryNote':_0x3cd8b6(0x154)+_0x830f49[_0x3cd8b6(0x120)]+'\x20days\x20if\x20not\x20paid','individualTimersNote':_0x3cd8b6(0x164)}});}catch(_0x56f6e1){_0x1b7f3d[_0x3cd8b6(0x13d)](0x1f4)[_0x3cd8b6(0x10a)]({'success':![],'message':_0x3cd8b6(0x12e)});}}),router[a19_0x1ec366(0x155)](a19_0x1ec366(0x112),async(_0x23e9be,_0x261da9)=>{const _0x11c25d=a19_0x1ec366;try{const {paymentId:_0x59e902}=_0x23e9be[_0x11c25d(0x134)],_0x49ab68=coinToPayStatusService_1['coinToPayStatusService'][_0x11c25d(0x11c)](_0x59e902),_0x50a186=(await Promise['resolve']()[_0x11c25d(0x152)](()=>__importStar(require(_0x11c25d(0x135)))))['default'],_0x46a8f6=await _0x50a186[_0x11c25d(0x137)][_0x11c25d(0x145)]({'where':{'id':_0x59e902},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x46a8f6)return _0x261da9[_0x11c25d(0x13d)](0x194)[_0x11c25d(0x10a)]({'success':![],'message':'Payment\x20not\x20found'});_0x261da9[_0x11c25d(0x10a)]({'success':!![],'result':{'payment':{'id':_0x46a8f6['id'],'gateway':_0x46a8f6[_0x11c25d(0x15f)],'gatewayPaymentId':_0x46a8f6[_0x11c25d(0x131)],'status':_0x46a8f6[_0x11c25d(0x13d)],'amount':_0x46a8f6[_0x11c25d(0x14b)],'currency':_0x46a8f6[_0x11c25d(0x11d)],'createdAt':_0x46a8f6[_0x11c25d(0x107)],'updatedAt':_0x46a8f6[_0x11c25d(0x106)],'shop':_0x46a8f6['shop']},'timers':_0x49ab68,'isCoinToPay':_0x46a8f6['gateway']===_0x11c25d(0x15c),'ageInMinutes':Math[_0x11c25d(0x16f)]((Date[_0x11c25d(0x171)]()-_0x46a8f6[_0x11c25d(0x107)]['getTime']())/(0x3e8*0x3c))}});}catch(_0x54515e){_0x261da9[_0x11c25d(0x13d)](0x1f4)[_0x11c25d(0x10a)]({'success':![],'message':_0x54515e instanceof Error?_0x54515e[_0x11c25d(0x151)]:_0x11c25d(0x140)});}}),router[a19_0x1ec366(0x155)]('/domain-monitoring/stats',(_0x5b3115,_0x2b7ec1)=>{const _0x502305=a19_0x1ec366;try{const _0x49ca08=domainMonitoringService_1[_0x502305(0x10c)][_0x502305(0x100)]();_0x2b7ec1[_0x502305(0x10a)]({'success':!![],'result':{..._0x49ca08,'description':'Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','behavior':_0x502305(0x102),'encoding':_0x502305(0x10e)}});}catch(_0x57ceea){_0x2b7ec1['status'](0x1f4)['json']({'success':![],'message':_0x502305(0x10d)});}}),router[a19_0x1ec366(0x116)](a19_0x1ec366(0x14e),async(_0x21d7c5,_0x3d9fff)=>{const _0x22487d=a19_0x1ec366;try{const _0x3c42c0=await domainMonitoringService_1['domainMonitoringService'][_0x22487d(0x149)]();_0x3d9fff['json']({'success':!![],'result':{'domainAvailable':_0x3c42c0,'message':_0x3c42c0?_0x22487d(0x119):_0x22487d(0x122),'timestamp':new Date()[_0x22487d(0x129)]()}});}catch(_0x21f8ea){_0x3d9fff['status'](0x1f4)[_0x22487d(0x10a)]({'success':![],'message':_0x21f8ea instanceof Error?_0x21f8ea[_0x22487d(0x151)]:_0x22487d(0x101)});}}),exports[a19_0x1ec366(0x163)]=router;