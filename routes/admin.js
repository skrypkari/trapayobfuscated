'use strict';function a19_0x5ad0(_0x299100,_0x42f2b2){const _0xf7adb1=a19_0xf7ad();return a19_0x5ad0=function(_0x5ad0b4,_0x5856d1){_0x5ad0b4=_0x5ad0b4-0x194;let _0x1881ca=_0xf7adb1[_0x5ad0b4];return _0x1881ca;},a19_0x5ad0(_0x299100,_0x42f2b2);}const a19_0x1e7abe=a19_0x5ad0;(function(_0x101bf3,_0xac5bf7){const _0x48bc68=a19_0x5ad0,_0x35210a=_0x101bf3();while(!![]){try{const _0x488659=parseInt(_0x48bc68(0x1fe))/0x1+-parseInt(_0x48bc68(0x1bd))/0x2+-parseInt(_0x48bc68(0x1cf))/0x3*(parseInt(_0x48bc68(0x1be))/0x4)+parseInt(_0x48bc68(0x1c4))/0x5+parseInt(_0x48bc68(0x1e9))/0x6*(-parseInt(_0x48bc68(0x19d))/0x7)+parseInt(_0x48bc68(0x1ff))/0x8*(-parseInt(_0x48bc68(0x1ac))/0x9)+parseInt(_0x48bc68(0x1db))/0xa;if(_0x488659===_0xac5bf7)break;else _0x35210a['push'](_0x35210a['shift']());}catch(_0x420806){_0x35210a['push'](_0x35210a['shift']());}}}(a19_0xf7ad,0xef0f5));function a19_0xf7ad(){const _0x1d5cd1=['getOwnPropertyNames','/payments','coinToPayStatusService','getMerchantStatistics','Payments\x20automatically\x20expire\x20after\x20','1707634fqqnkT','2910508ExvzPR','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','params','Failed\x20to\x20get\x20log\x20statistics','authenticateToken','/users','1916270PjObRG','CoinToPay\x20automatic\x20status\x20checking\x20service','updatePayment','getPayoutById','CoinToPay\x20payment\x20status\x20checked\x20successfully','getUsers','configurable','createUser','Old\x20logs\x20cleaned\x20(kept\x20last\x20','../services/domainMonitoringService','json','3AdSnfc','domainMonitoringService','payment','put','writable','getPayments','resolve','createUserSchema','get','../middleware/validation','__createBinding','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','27756720Prgqxo','defineProperty','../config/database','\x20days)','status','/cointopay/check/:paymentId','findUnique','updateUserSchema','message','getLogStats','../middleware/auth','error','delete','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','6VQRSGX','../services/coinToPayStatusService','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','deleteUser','/logs/clean','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','cleanOldLogs','paymentId','gatewayPaymentId','/users/:id','/domain-monitoring/stats','/statistics','Failed\x20to\x20clean\x20old\x20logs','Failed\x20to\x20perform\x20manual\x20domain\x20check','/payments/:id/customer','checkPaymentById','shop','FAILED','__importStar','/users/:id/suspend','getPayoutStats','952856XxzBMu','7237304tVFurC','call','/users/:id/activate','activateUser','now','__esModule','suspendUser','create','amount','EXPIRED','PENDING','then','getPaymentById','/payout/merchants','post','Failed\x20to\x20get\x20payment\x20information','/merchant-statistics','floor','updateCustomerDataSchema','4525402EDuyDs','validate','getStatistics','/logs/stats','getUserById','updateUser','\x20days\x20if\x20not\x20paid','getServiceStats','length','express','body','default','requireAdmin','/domain-monitoring/check','use','9TjCljv','/payments/:id','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','/cointopay/payment/:paymentId','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','deletePayout','/cointopay/stats','PAID','getTime','/auth','checkAuth','/payouts/:id'];a19_0xf7ad=function(){return _0x1d5cd1;};return a19_0xf7ad();}var __createBinding=this&&this[a19_0x1e7abe(0x1d9)]||(Object['create']?function(_0x19cd49,_0x542d8a,_0x336962,_0x15bbae){const _0x3900c6=a19_0x1e7abe;if(_0x15bbae===undefined)_0x15bbae=_0x336962;var _0x481ae1=Object['getOwnPropertyDescriptor'](_0x542d8a,_0x336962);(!_0x481ae1||(_0x3900c6(0x1d7)in _0x481ae1?!_0x542d8a[_0x3900c6(0x204)]:_0x481ae1[_0x3900c6(0x1d3)]||_0x481ae1[_0x3900c6(0x1ca)]))&&(_0x481ae1={'enumerable':!![],'get':function(){return _0x542d8a[_0x336962];}}),Object[_0x3900c6(0x1dc)](_0x19cd49,_0x15bbae,_0x481ae1);}:function(_0x2bed9e,_0x20a90c,_0x453518,_0x1ba8ac){if(_0x1ba8ac===undefined)_0x1ba8ac=_0x453518;_0x2bed9e[_0x1ba8ac]=_0x20a90c[_0x453518];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a19_0x1e7abe(0x206)]?function(_0x38665d,_0x52e355){const _0x20e236=a19_0x1e7abe;Object[_0x20e236(0x1dc)](_0x38665d,_0x20e236(0x1a8),{'enumerable':!![],'value':_0x52e355});}:function(_0x35cc20,_0x46f7fd){_0x35cc20['default']=_0x46f7fd;}),__importStar=this&&this[a19_0x1e7abe(0x1fb)]||(function(){var _0x2105a8=function(_0x7284e0){const _0x466177=a19_0x5ad0;return _0x2105a8=Object[_0x466177(0x1b8)]||function(_0xdec8bb){const _0x18d581=_0x466177;var _0x104178=[];for(var _0x320614 in _0xdec8bb)if(Object['prototype']['hasOwnProperty'][_0x18d581(0x200)](_0xdec8bb,_0x320614))_0x104178[_0x104178[_0x18d581(0x1a5)]]=_0x320614;return _0x104178;},_0x2105a8(_0x7284e0);};return function(_0x78f0c9){const _0x54a6ce=a19_0x5ad0;if(_0x78f0c9&&_0x78f0c9[_0x54a6ce(0x204)])return _0x78f0c9;var _0x2ebc5d={};if(_0x78f0c9!=null){for(var _0xc24277=_0x2105a8(_0x78f0c9),_0x4ccdc3=0x0;_0x4ccdc3<_0xc24277[_0x54a6ce(0x1a5)];_0x4ccdc3++)if(_0xc24277[_0x4ccdc3]!==_0x54a6ce(0x1a8))__createBinding(_0x2ebc5d,_0x78f0c9,_0xc24277[_0x4ccdc3]);}return __setModuleDefault(_0x2ebc5d,_0x78f0c9),_0x2ebc5d;};}());Object['defineProperty'](exports,a19_0x1e7abe(0x204),{'value':!![]});const express_1=require(a19_0x1e7abe(0x1a6)),adminController_1=require('../controllers/adminController'),validation_1=require(a19_0x1e7abe(0x1d8)),auth_1=require(a19_0x1e7abe(0x1e5)),loggerService_1=require('../services/loggerService'),coinToPayStatusService_1=require(a19_0x1e7abe(0x1ea)),domainMonitoringService_1=require(a19_0x1e7abe(0x1cd)),router=(0x0,express_1['Router'])(),adminController=new adminController_1['AdminController']();router[a19_0x1e7abe(0x1ab)](auth_1[a19_0x1e7abe(0x1c2)],auth_1[a19_0x1e7abe(0x1a9)]),router[a19_0x1e7abe(0x1d7)](a19_0x1e7abe(0x1b5),adminController[a19_0x1e7abe(0x1b6)]),router[a19_0x1e7abe(0x1d7)](a19_0x1e7abe(0x1f4),adminController[a19_0x1e7abe(0x19f)]),router[a19_0x1e7abe(0x1d7)](a19_0x1e7abe(0x19a),adminController[a19_0x1e7abe(0x1bb)]),router[a19_0x1e7abe(0x1d7)]('/payout/stats',adminController[a19_0x1e7abe(0x1fd)]),router[a19_0x1e7abe(0x1d7)](a19_0x1e7abe(0x197),adminController['getMerchantsAwaitingPayout']),router[a19_0x1e7abe(0x198)]('/payout',(0x0,validation_1[a19_0x1e7abe(0x19e)])(validation_1['createPayoutSchema']),adminController['createPayout']),router[a19_0x1e7abe(0x1d7)]('/payouts',adminController['getPayouts']),router['get']('/payouts/:id',adminController[a19_0x1e7abe(0x1c7)]),router[a19_0x1e7abe(0x1e7)](a19_0x1e7abe(0x1b7),adminController[a19_0x1e7abe(0x1b1)]),router[a19_0x1e7abe(0x1d7)](a19_0x1e7abe(0x1b9),adminController[a19_0x1e7abe(0x1d4)]),router[a19_0x1e7abe(0x1d7)](a19_0x1e7abe(0x1ad),adminController[a19_0x1e7abe(0x196)]),router[a19_0x1e7abe(0x1d2)]('/payments/:id',adminController[a19_0x1e7abe(0x1c6)]),router[a19_0x1e7abe(0x1d2)](a19_0x1e7abe(0x1f7),(0x0,validation_1[a19_0x1e7abe(0x19e)])(validation_1[a19_0x1e7abe(0x19c)]),adminController['updateCustomerData']),router[a19_0x1e7abe(0x1d7)](a19_0x1e7abe(0x1c3),adminController[a19_0x1e7abe(0x1c9)]),router[a19_0x1e7abe(0x1d7)](a19_0x1e7abe(0x1f2),adminController[a19_0x1e7abe(0x1a1)]),router['post'](a19_0x1e7abe(0x1c3),(0x0,validation_1[a19_0x1e7abe(0x19e)])(validation_1[a19_0x1e7abe(0x1d6)]),adminController[a19_0x1e7abe(0x1cb)]),router[a19_0x1e7abe(0x1d2)](a19_0x1e7abe(0x1f2),(0x0,validation_1[a19_0x1e7abe(0x19e)])(validation_1[a19_0x1e7abe(0x1e2)]),adminController[a19_0x1e7abe(0x1a2)]),router[a19_0x1e7abe(0x1e7)](a19_0x1e7abe(0x1f2),adminController[a19_0x1e7abe(0x1ec)]),router[a19_0x1e7abe(0x198)](a19_0x1e7abe(0x1fc),adminController[a19_0x1e7abe(0x205)]),router['post'](a19_0x1e7abe(0x201),adminController[a19_0x1e7abe(0x202)]),router[a19_0x1e7abe(0x1d7)](a19_0x1e7abe(0x1a0),(_0x41300b,_0xf1dd1c)=>{const _0x2e6bc1=a19_0x1e7abe;try{const _0x29a857=loggerService_1['loggerService'][_0x2e6bc1(0x1e4)]();_0xf1dd1c[_0x2e6bc1(0x1ce)]({'success':!![],'result':_0x29a857});}catch(_0x307be7){_0xf1dd1c[_0x2e6bc1(0x1df)](0x1f4)[_0x2e6bc1(0x1ce)]({'success':![],'message':_0x2e6bc1(0x1c1)});}}),router[a19_0x1e7abe(0x198)](a19_0x1e7abe(0x1ed),(_0x4677ae,_0xe6cb8d)=>{const _0x321510=a19_0x1e7abe;try{const {daysToKeep:daysToKeep=0x1e}=_0x4677ae[_0x321510(0x1a7)];loggerService_1['loggerService'][_0x321510(0x1ef)](daysToKeep),_0xe6cb8d['json']({'success':!![],'message':_0x321510(0x1cc)+daysToKeep+_0x321510(0x1de)});}catch(_0x131510){_0xe6cb8d[_0x321510(0x1df)](0x1f4)['json']({'success':![],'message':_0x321510(0x1f5)});}}),router[a19_0x1e7abe(0x198)](a19_0x1e7abe(0x1e0),async(_0x5dc07b,_0x1d78ed)=>{const _0x559689=a19_0x1e7abe;try{const {paymentId:_0x2684fb}=_0x5dc07b[_0x559689(0x1c0)];console['log'](_0x559689(0x1ae)+_0x2684fb),await coinToPayStatusService_1[_0x559689(0x1ba)][_0x559689(0x1f8)](_0x2684fb),_0x1d78ed[_0x559689(0x1ce)]({'success':!![],'message':_0x559689(0x1c8)});}catch(_0x38d563){console[_0x559689(0x1e6)](_0x559689(0x1b0)+_0x5dc07b[_0x559689(0x1c0)][_0x559689(0x1f0)]+':',_0x38d563),_0x1d78ed[_0x559689(0x1df)](0x1f4)[_0x559689(0x1ce)]({'success':![],'message':_0x38d563 instanceof Error?_0x38d563[_0x559689(0x1e3)]:_0x559689(0x1eb)});}}),router['get'](a19_0x1e7abe(0x1b2),(_0xea31b0,_0x4da2c5)=>{const _0x2e37a8=a19_0x1e7abe;try{const _0x15496b=coinToPayStatusService_1[_0x2e37a8(0x1ba)][_0x2e37a8(0x1a4)]();_0x4da2c5[_0x2e37a8(0x1ce)]({'success':!![],'result':{..._0x15496b,'description':_0x2e37a8(0x1c5),'statusMapping':{'Paid':_0x2e37a8(0x1b3),'Awaiting\x20Fiat':_0x2e37a8(0x194),'waiting':_0x2e37a8(0x194),'expired':_0x2e37a8(0x208),'failed':_0x2e37a8(0x1fa)},'autoExpiryNote':_0x2e37a8(0x1bc)+_0x15496b['expiryDays']+_0x2e37a8(0x1a3),'individualTimersNote':'Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly'}});}catch(_0x4b30dc){_0x4da2c5['status'](0x1f4)[_0x2e37a8(0x1ce)]({'success':![],'message':_0x2e37a8(0x1ee)});}}),router[a19_0x1e7abe(0x1d7)](a19_0x1e7abe(0x1af),async(_0x41d3ce,_0x359f63)=>{const _0x2407e7=a19_0x1e7abe;try{const {paymentId:_0x1e4368}=_0x41d3ce[_0x2407e7(0x1c0)],_0x356597=coinToPayStatusService_1[_0x2407e7(0x1ba)]['getPaymentTimerInfo'](_0x1e4368),_0x211086=(await Promise[_0x2407e7(0x1d5)]()[_0x2407e7(0x195)](()=>__importStar(require(_0x2407e7(0x1dd)))))[_0x2407e7(0x1a8)],_0x152818=await _0x211086[_0x2407e7(0x1d1)][_0x2407e7(0x1e1)]({'where':{'id':_0x1e4368},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x152818)return _0x359f63[_0x2407e7(0x1df)](0x194)[_0x2407e7(0x1ce)]({'success':![],'message':'Payment\x20not\x20found'});_0x359f63[_0x2407e7(0x1ce)]({'success':!![],'result':{'payment':{'id':_0x152818['id'],'gateway':_0x152818['gateway'],'gatewayPaymentId':_0x152818[_0x2407e7(0x1f1)],'status':_0x152818[_0x2407e7(0x1df)],'amount':_0x152818[_0x2407e7(0x207)],'currency':_0x152818['currency'],'createdAt':_0x152818['createdAt'],'updatedAt':_0x152818['updatedAt'],'shop':_0x152818[_0x2407e7(0x1f9)]},'timers':_0x356597,'isCoinToPay':_0x152818['gateway']==='cointopay','ageInMinutes':Math[_0x2407e7(0x19b)]((Date[_0x2407e7(0x203)]()-_0x152818['createdAt'][_0x2407e7(0x1b4)]())/(0x3e8*0x3c))}});}catch(_0x4d8c2d){_0x359f63['status'](0x1f4)[_0x2407e7(0x1ce)]({'success':![],'message':_0x4d8c2d instanceof Error?_0x4d8c2d[_0x2407e7(0x1e3)]:_0x2407e7(0x199)});}}),router[a19_0x1e7abe(0x1d7)](a19_0x1e7abe(0x1f3),(_0x127645,_0x2f049d)=>{const _0x23ec6a=a19_0x1e7abe;try{const _0x12c55a=domainMonitoringService_1[_0x23ec6a(0x1d0)]['getMonitoringStats']();_0x2f049d[_0x23ec6a(0x1ce)]({'success':!![],'result':{..._0x12c55a,'description':_0x23ec6a(0x1bf),'behavior':'Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','encoding':_0x23ec6a(0x1da)}});}catch(_0x3b454a){_0x2f049d[_0x23ec6a(0x1df)](0x1f4)[_0x23ec6a(0x1ce)]({'success':![],'message':_0x23ec6a(0x1e8)});}}),router[a19_0x1e7abe(0x198)](a19_0x1e7abe(0x1aa),async(_0x46dfe7,_0x3c8572)=>{const _0xb1b05f=a19_0x1e7abe;try{const _0x1a7369=await domainMonitoringService_1[_0xb1b05f(0x1d0)]['manualCheck']();_0x3c8572['json']({'success':!![],'result':{'domainAvailable':_0x1a7369,'message':_0x1a7369?'Domain\x20is\x20responding\x20correctly':'Domain\x20check\x20failed','timestamp':new Date()['toISOString']()}});}catch(_0x362d01){_0x3c8572[_0xb1b05f(0x1df)](0x1f4)[_0xb1b05f(0x1ce)]({'success':![],'message':_0x362d01 instanceof Error?_0x362d01['message']:_0xb1b05f(0x1f6)});}}),exports[a19_0x1e7abe(0x1a8)]=router;