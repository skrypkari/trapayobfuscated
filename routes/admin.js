'use strict';const a19_0x2f75a6=a19_0x8c7a;function a19_0x3db2(){const _0x34ecba=['validate','put','/logs/clean','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','/merchants/selection','FAILED','../services/loggerService','log','body','createUserSchema','\x20days\x20if\x20not\x20paid','Router','default','authenticateToken','createPayout','CoinToPay\x20payment\x20status\x20checked\x20successfully','floor','payment','777159YfvKTS','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','/users','hasOwnProperty','paymentId','defineProperty','AdminController','getUsers','8333384jgewqa','suspendUser','/payments','activateUser','/users/:id','updatedAt','/payouts/:id','deleteUser','/domain-monitoring/stats','Failed\x20to\x20perform\x20manual\x20domain\x20check','PENDING','getMerchantStatistics','cointopay','coinToPayStatusService','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','29708EgvAyy','/cointopay/stats','PAID','post','updateCustomerData','resolve','loggerService','length','../controllers/adminController','manualCheck','__esModule','2956605OGaZWe','/users/:id/suspend','40NLNaNE','Failed\x20to\x20clean\x20old\x20logs','expiryDays','CoinToPay\x20automatic\x20status\x20checking\x20service','delete','getMonitoringStats','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','/users/:id/activate','get','getServiceStats','20184ZoeMdh','../middleware/auth','getLogStats','deletePayout','/payout/stats','params','cleanOldLogs','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','configurable','checkAuth','error','/payments/:id/customer','currency','/cointopay/payment/:paymentId','Payments\x20automatically\x20expire\x20after\x20','json','getUserById','domainMonitoringService','1662SXXFfr','getPayoutStats','create','express','toISOString','1652125TyCYfh','findUnique','getPaymentTimerInfo','/domain-monitoring/check','/payout/merchants','/cointopay/check/:paymentId','createPayoutSchema','Failed\x20to\x20get\x20log\x20statistics','/payout','gateway','12wUvKyk','/payments/:id','writable','669128WBIngQ','gatewayPaymentId','__setModuleDefault','prototype','use','getStatistics','now','updateCustomerDataSchema','/auth','EXPIRED','getTime','Payment\x20not\x20found','\x20days)','__createBinding','createdAt','../config/database','../middleware/validation','Failed\x20to\x20get\x20payment\x20information','amount','/merchant-statistics','14135dBPJdx','message','requireAdmin','2eHVdRd','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','getPaymentById','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','getMerchantsAwaitingPayout','createUser','call','checkPaymentById','status','updateUser'];a19_0x3db2=function(){return _0x34ecba;};return a19_0x3db2();}function a19_0x8c7a(_0x1da135,_0x557cea){const _0x3db2fe=a19_0x3db2();return a19_0x8c7a=function(_0x8c7ae0,_0x2bd842){_0x8c7ae0=_0x8c7ae0-0xe1;let _0x579347=_0x3db2fe[_0x8c7ae0];return _0x579347;},a19_0x8c7a(_0x1da135,_0x557cea);}(function(_0x845e71,_0xd81fae){const _0x510524=a19_0x8c7a,_0x5a31ab=_0x845e71();while(!![]){try{const _0x223e50=parseInt(_0x510524(0x145))/0x1*(parseInt(_0x510524(0x15c))/0x2)+parseInt(_0x510524(0x115))/0x3+parseInt(_0x510524(0x142))/0x4*(parseInt(_0x510524(0x138))/0x5)+-parseInt(_0x510524(0x133))/0x6*(parseInt(_0x510524(0x10a))/0x7)+parseInt(_0x510524(0xfb))/0x8+parseInt(_0x510524(0xf3))/0x9*(parseInt(_0x510524(0x117))/0xa)+-parseInt(_0x510524(0x159))/0xb*(parseInt(_0x510524(0x121))/0xc);if(_0x223e50===_0xd81fae)break;else _0x5a31ab['push'](_0x5a31ab['shift']());}catch(_0x274d75){_0x5a31ab['push'](_0x5a31ab['shift']());}}}(a19_0x3db2,0xa9ef9));var __createBinding=this&&this[a19_0x2f75a6(0x152)]||(Object[a19_0x2f75a6(0x135)]?function(_0x122852,_0x3fb008,_0x4a74f7,_0x3da809){const _0x1aa4d2=a19_0x2f75a6;if(_0x3da809===undefined)_0x3da809=_0x4a74f7;var _0x366c07=Object['getOwnPropertyDescriptor'](_0x3fb008,_0x4a74f7);(!_0x366c07||(_0x1aa4d2(0x11f)in _0x366c07?!_0x3fb008[_0x1aa4d2(0x114)]:_0x366c07[_0x1aa4d2(0x144)]||_0x366c07[_0x1aa4d2(0x129)]))&&(_0x366c07={'enumerable':!![],'get':function(){return _0x3fb008[_0x4a74f7];}}),Object[_0x1aa4d2(0xf8)](_0x122852,_0x3da809,_0x366c07);}:function(_0x39851a,_0x467bd8,_0x24d8a0,_0x2f91e7){if(_0x2f91e7===undefined)_0x2f91e7=_0x24d8a0;_0x39851a[_0x2f91e7]=_0x467bd8[_0x24d8a0];}),__setModuleDefault=this&&this[a19_0x2f75a6(0x147)]||(Object[a19_0x2f75a6(0x135)]?function(_0xad18ca,_0x10b6d0){const _0x45c7f=a19_0x2f75a6;Object['defineProperty'](_0xad18ca,_0x45c7f(0xed),{'enumerable':!![],'value':_0x10b6d0});}:function(_0xb45601,_0x320607){const _0x53e119=a19_0x2f75a6;_0xb45601[_0x53e119(0xed)]=_0x320607;}),__importStar=this&&this['__importStar']||(function(){var _0x50fff3=function(_0x15b2de){return _0x50fff3=Object['getOwnPropertyNames']||function(_0x200363){const _0x28d188=a19_0x8c7a;var _0x2d67b6=[];for(var _0x33fd51 in _0x200363)if(Object[_0x28d188(0x148)][_0x28d188(0xf6)][_0x28d188(0x162)](_0x200363,_0x33fd51))_0x2d67b6[_0x2d67b6['length']]=_0x33fd51;return _0x2d67b6;},_0x50fff3(_0x15b2de);};return function(_0x33cf69){const _0x229d82=a19_0x8c7a;if(_0x33cf69&&_0x33cf69[_0x229d82(0x114)])return _0x33cf69;var _0x14e5a9={};if(_0x33cf69!=null){for(var _0x5a94bb=_0x50fff3(_0x33cf69),_0x2d01c0=0x0;_0x2d01c0<_0x5a94bb[_0x229d82(0x111)];_0x2d01c0++)if(_0x5a94bb[_0x2d01c0]!==_0x229d82(0xed))__createBinding(_0x14e5a9,_0x33cf69,_0x5a94bb[_0x2d01c0]);}return __setModuleDefault(_0x14e5a9,_0x33cf69),_0x14e5a9;};}());Object[a19_0x2f75a6(0xf8)](exports,a19_0x2f75a6(0x114),{'value':!![]});const express_1=require(a19_0x2f75a6(0x136)),adminController_1=require(a19_0x2f75a6(0x112)),validation_1=require(a19_0x2f75a6(0x155)),auth_1=require(a19_0x2f75a6(0x122)),loggerService_1=require(a19_0x2f75a6(0xe7)),coinToPayStatusService_1=require('../services/coinToPayStatusService'),domainMonitoringService_1=require('../services/domainMonitoringService'),router=(0x0,express_1[a19_0x2f75a6(0xec)])(),adminController=new adminController_1[(a19_0x2f75a6(0xf9))]();router[a19_0x2f75a6(0x149)](auth_1[a19_0x2f75a6(0xee)],auth_1[a19_0x2f75a6(0x15b)]),router['get'](a19_0x2f75a6(0x14d),adminController[a19_0x2f75a6(0x12a)]),router[a19_0x2f75a6(0x11f)]('/statistics',adminController[a19_0x2f75a6(0x14a)]),router[a19_0x2f75a6(0x11f)](a19_0x2f75a6(0x158),adminController[a19_0x2f75a6(0x106)]),router[a19_0x2f75a6(0x11f)](a19_0x2f75a6(0x125),adminController[a19_0x2f75a6(0x134)]),router[a19_0x2f75a6(0x11f)](a19_0x2f75a6(0x13c),adminController[a19_0x2f75a6(0x160)]),router[a19_0x2f75a6(0x11f)](a19_0x2f75a6(0xe5),adminController['getMerchantsSelection']),router['post'](a19_0x2f75a6(0x140),(0x0,validation_1[a19_0x2f75a6(0x166)])(validation_1[a19_0x2f75a6(0x13e)]),adminController[a19_0x2f75a6(0xef)]),router['get']('/payouts',adminController['getPayouts']),router[a19_0x2f75a6(0x11f)](a19_0x2f75a6(0x101),adminController['getPayoutById']),router[a19_0x2f75a6(0x11b)]('/payouts/:id',adminController[a19_0x2f75a6(0x124)]),router[a19_0x2f75a6(0x11f)](a19_0x2f75a6(0xfd),adminController['getPayments']),router[a19_0x2f75a6(0x11f)](a19_0x2f75a6(0x143),adminController[a19_0x2f75a6(0x15e)]),router[a19_0x2f75a6(0xe1)](a19_0x2f75a6(0x143),adminController['updatePayment']),router[a19_0x2f75a6(0xe1)](a19_0x2f75a6(0x12c),(0x0,validation_1[a19_0x2f75a6(0x166)])(validation_1[a19_0x2f75a6(0x14c)]),adminController[a19_0x2f75a6(0x10e)]),router[a19_0x2f75a6(0x11f)](a19_0x2f75a6(0xf5),adminController[a19_0x2f75a6(0xfa)]),router[a19_0x2f75a6(0x11f)](a19_0x2f75a6(0xff),adminController[a19_0x2f75a6(0x131)]),router[a19_0x2f75a6(0x10d)](a19_0x2f75a6(0xf5),(0x0,validation_1['validate'])(validation_1[a19_0x2f75a6(0xea)]),adminController[a19_0x2f75a6(0x161)]),router[a19_0x2f75a6(0xe1)](a19_0x2f75a6(0xff),(0x0,validation_1['validate'])(validation_1['updateUserSchema']),adminController[a19_0x2f75a6(0x165)]),router[a19_0x2f75a6(0x11b)](a19_0x2f75a6(0xff),adminController[a19_0x2f75a6(0x102)]),router['post'](a19_0x2f75a6(0x116),adminController[a19_0x2f75a6(0xfc)]),router['post'](a19_0x2f75a6(0x11e),adminController[a19_0x2f75a6(0xfe)]),router['get']('/logs/stats',(_0x1ced84,_0x15aa83)=>{const _0x152493=a19_0x2f75a6;try{const _0x3ecca7=loggerService_1[_0x152493(0x110)][_0x152493(0x123)]();_0x15aa83[_0x152493(0x130)]({'success':!![],'result':_0x3ecca7});}catch(_0x3ac695){_0x15aa83[_0x152493(0x164)](0x1f4)[_0x152493(0x130)]({'success':![],'message':_0x152493(0x13f)});}}),router['post'](a19_0x2f75a6(0xe2),(_0x4262ea,_0x39904c)=>{const _0x1eba69=a19_0x2f75a6;try{const {daysToKeep:daysToKeep=0x1e}=_0x4262ea[_0x1eba69(0xe9)];loggerService_1[_0x1eba69(0x110)][_0x1eba69(0x127)](daysToKeep),_0x39904c['json']({'success':!![],'message':'Old\x20logs\x20cleaned\x20(kept\x20last\x20'+daysToKeep+_0x1eba69(0x151)});}catch(_0x282d66){_0x39904c[_0x1eba69(0x164)](0x1f4)[_0x1eba69(0x130)]({'success':![],'message':_0x1eba69(0x118)});}}),router[a19_0x2f75a6(0x10d)](a19_0x2f75a6(0x13d),async(_0x1e8ffc,_0x25024d)=>{const _0x56500c=a19_0x2f75a6;try{const {paymentId:_0x484de0}=_0x1e8ffc[_0x56500c(0x126)];console[_0x56500c(0xe8)](_0x56500c(0xe3)+_0x484de0),await coinToPayStatusService_1['coinToPayStatusService'][_0x56500c(0x163)](_0x484de0),_0x25024d['json']({'success':!![],'message':_0x56500c(0xf0)});}catch(_0x340c75){console[_0x56500c(0x12b)](_0x56500c(0xf4)+_0x1e8ffc['params'][_0x56500c(0xf7)]+':',_0x340c75),_0x25024d[_0x56500c(0x164)](0x1f4)[_0x56500c(0x130)]({'success':![],'message':_0x340c75 instanceof Error?_0x340c75['message']:_0x56500c(0x15d)});}}),router[a19_0x2f75a6(0x11f)](a19_0x2f75a6(0x10b),(_0x2c9e32,_0x14d31f)=>{const _0x18ca34=a19_0x2f75a6;try{const _0x44fb86=coinToPayStatusService_1[_0x18ca34(0x108)][_0x18ca34(0x120)]();_0x14d31f[_0x18ca34(0x130)]({'success':!![],'result':{..._0x44fb86,'description':_0x18ca34(0x11a),'statusMapping':{'Paid':_0x18ca34(0x10c),'Awaiting\x20Fiat':_0x18ca34(0x105),'waiting':_0x18ca34(0x105),'expired':_0x18ca34(0x14e),'failed':_0x18ca34(0xe6)},'autoExpiryNote':_0x18ca34(0x12f)+_0x44fb86[_0x18ca34(0x119)]+_0x18ca34(0xeb),'individualTimersNote':_0x18ca34(0x109)}});}catch(_0x2cfac8){_0x14d31f[_0x18ca34(0x164)](0x1f4)[_0x18ca34(0x130)]({'success':![],'message':_0x18ca34(0x15f)});}}),router[a19_0x2f75a6(0x11f)](a19_0x2f75a6(0x12e),async(_0x3533d9,_0x607041)=>{const _0x2d1026=a19_0x2f75a6;try{const {paymentId:_0x35b508}=_0x3533d9[_0x2d1026(0x126)],_0x56eca3=coinToPayStatusService_1[_0x2d1026(0x108)][_0x2d1026(0x13a)](_0x35b508),_0x2cc29b=(await Promise[_0x2d1026(0x10f)]()['then'](()=>__importStar(require(_0x2d1026(0x154)))))[_0x2d1026(0xed)],_0x1dbea3=await _0x2cc29b[_0x2d1026(0xf2)][_0x2d1026(0x139)]({'where':{'id':_0x35b508},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x1dbea3)return _0x607041[_0x2d1026(0x164)](0x194)[_0x2d1026(0x130)]({'success':![],'message':_0x2d1026(0x150)});_0x607041['json']({'success':!![],'result':{'payment':{'id':_0x1dbea3['id'],'gateway':_0x1dbea3[_0x2d1026(0x141)],'gatewayPaymentId':_0x1dbea3[_0x2d1026(0x146)],'status':_0x1dbea3['status'],'amount':_0x1dbea3[_0x2d1026(0x157)],'currency':_0x1dbea3[_0x2d1026(0x12d)],'createdAt':_0x1dbea3[_0x2d1026(0x153)],'updatedAt':_0x1dbea3[_0x2d1026(0x100)],'shop':_0x1dbea3['shop']},'timers':_0x56eca3,'isCoinToPay':_0x1dbea3[_0x2d1026(0x141)]===_0x2d1026(0x107),'ageInMinutes':Math[_0x2d1026(0xf1)]((Date[_0x2d1026(0x14b)]()-_0x1dbea3[_0x2d1026(0x153)][_0x2d1026(0x14f)]())/(0x3e8*0x3c))}});}catch(_0x4c6621){_0x607041[_0x2d1026(0x164)](0x1f4)[_0x2d1026(0x130)]({'success':![],'message':_0x4c6621 instanceof Error?_0x4c6621[_0x2d1026(0x15a)]:_0x2d1026(0x156)});}}),router[a19_0x2f75a6(0x11f)](a19_0x2f75a6(0x103),(_0x215766,_0x3594ea)=>{const _0x367a4a=a19_0x2f75a6;try{const _0x2ec8fc=domainMonitoringService_1[_0x367a4a(0x132)][_0x367a4a(0x11c)]();_0x3594ea[_0x367a4a(0x130)]({'success':!![],'result':{..._0x2ec8fc,'description':_0x367a4a(0xe4),'behavior':_0x367a4a(0x11d),'encoding':'Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs'}});}catch(_0x5a1368){_0x3594ea[_0x367a4a(0x164)](0x1f4)['json']({'success':![],'message':_0x367a4a(0x128)});}}),router['post'](a19_0x2f75a6(0x13b),async(_0x451457,_0x862ae)=>{const _0x5bc8dc=a19_0x2f75a6;try{const _0x56fdf7=await domainMonitoringService_1[_0x5bc8dc(0x132)][_0x5bc8dc(0x113)]();_0x862ae[_0x5bc8dc(0x130)]({'success':!![],'result':{'domainAvailable':_0x56fdf7,'message':_0x56fdf7?'Domain\x20is\x20responding\x20correctly':'Domain\x20check\x20failed','timestamp':new Date()[_0x5bc8dc(0x137)]()}});}catch(_0x3ebfca){_0x862ae[_0x5bc8dc(0x164)](0x1f4)['json']({'success':![],'message':_0x3ebfca instanceof Error?_0x3ebfca[_0x5bc8dc(0x15a)]:_0x5bc8dc(0x104)});}}),exports['default']=router;