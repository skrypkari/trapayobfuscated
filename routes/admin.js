'use strict';const a19_0x58bef8=a19_0x53b6;(function(_0x5bc5dd,_0x3bdf96){const _0x4e18a8=a19_0x53b6,_0x37d6b1=_0x5bc5dd();while(!![]){try{const _0xb1b04=parseInt(_0x4e18a8(0x242))/0x1+parseInt(_0x4e18a8(0x210))/0x2*(-parseInt(_0x4e18a8(0x1e8))/0x3)+-parseInt(_0x4e18a8(0x1ef))/0x4+-parseInt(_0x4e18a8(0x240))/0x5*(-parseInt(_0x4e18a8(0x204))/0x6)+parseInt(_0x4e18a8(0x20b))/0x7+-parseInt(_0x4e18a8(0x237))/0x8+-parseInt(_0x4e18a8(0x1e0))/0x9*(-parseInt(_0x4e18a8(0x1e3))/0xa);if(_0xb1b04===_0x3bdf96)break;else _0x37d6b1['push'](_0x37d6b1['shift']());}catch(_0x218d80){_0x37d6b1['push'](_0x37d6b1['shift']());}}}(a19_0xa7dc,0x94196));function a19_0xa7dc(){const _0x294f2d=['currency','3268846AxUXtw','AdminController','/domain-monitoring/check','getPayments','now','2isAEID','paymentId','/users/:id/suspend','/payout/stats','/cointopay/payment/:paymentId','/logs/stats','put','get','then','/payouts','PENDING','domainMonitoringService','shop','/domain-monitoring/stats','/users','PAID','Failed\x20to\x20get\x20payment\x20information','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','createPayout','/payout','default','use','message','createdAt','status','getOwnPropertyNames','/statistics','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','loggerService','length','/payouts/:id','CoinToPay\x20payment\x20status\x20checked\x20successfully','amount','findUnique','../services/domainMonitoringService','/cointopay/check/:paymentId','getMerchantsAwaitingPayout','__setModuleDefault','body','1196976UuKBYJ','/cointopay/stats','getPayouts','error','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','params','json','getMerchantsSelection','/logs/clean','15VocuUW','delete','453620XCsuiI','validate','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','post','createUser','/payments/:id','\x20days)','updatePayment','__esModule','gatewayPaymentId','requireAdmin','payment','getPayoutById','floor','/users/:id/activate','createUserSchema','expiryDays','getPaymentById','cointopay','Payments\x20automatically\x20expire\x20after\x20','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','81cJLVUJ','updatedAt','/merchant-statistics','1772350BHJGas','checkPaymentById','createPayoutSchema','updateUser','getUsers','3510006WeJBqp','getPayoutStats','getServiceStats','hasOwnProperty','/payout/merchants','Failed\x20to\x20get\x20log\x20statistics','../controllers/adminController','2424488QelKHs','gateway','/users/:id','defineProperty','/auth','writable','updateUserSchema','../middleware/validation','prototype','getMerchantStatistics','updateCustomerDataSchema','/merchants/selection','deleteUser','../middleware/auth','__createBinding','__importStar','coinToPayStatusService','Domain\x20is\x20responding\x20correctly','Router','activateUser','getUserById','33294WnHyAG','/payments','EXPIRED','Old\x20logs\x20cleaned\x20(kept\x20last\x20','create','\x20days\x20if\x20not\x20paid'];a19_0xa7dc=function(){return _0x294f2d;};return a19_0xa7dc();}var __createBinding=this&&this[a19_0x58bef8(0x1fd)]||(Object[a19_0x58bef8(0x208)]?function(_0xeb2665,_0x1a1cdd,_0x53290d,_0x3e344e){const _0x553913=a19_0x58bef8;if(_0x3e344e===undefined)_0x3e344e=_0x53290d;var _0xaad36c=Object['getOwnPropertyDescriptor'](_0x1a1cdd,_0x53290d);(!_0xaad36c||('get'in _0xaad36c?!_0x1a1cdd['__esModule']:_0xaad36c[_0x553913(0x1f4)]||_0xaad36c['configurable']))&&(_0xaad36c={'enumerable':!![],'get':function(){return _0x1a1cdd[_0x53290d];}}),Object[_0x553913(0x1f2)](_0xeb2665,_0x3e344e,_0xaad36c);}:function(_0x5e256a,_0x295c0a,_0x5722dd,_0x1f67d8){if(_0x1f67d8===undefined)_0x1f67d8=_0x5722dd;_0x5e256a[_0x1f67d8]=_0x295c0a[_0x5722dd];}),__setModuleDefault=this&&this[a19_0x58bef8(0x235)]||(Object[a19_0x58bef8(0x208)]?function(_0x427a93,_0x2e368a){const _0x491f42=a19_0x58bef8;Object[_0x491f42(0x1f2)](_0x427a93,'default',{'enumerable':!![],'value':_0x2e368a});}:function(_0x465fec,_0x578d90){_0x465fec['default']=_0x578d90;}),__importStar=this&&this[a19_0x58bef8(0x1fe)]||(function(){var _0x560a96=function(_0x52cd6a){const _0x52f019=a19_0x53b6;return _0x560a96=Object[_0x52f019(0x229)]||function(_0x37d452){const _0x245d0d=_0x52f019;var _0x542b8d=[];for(var _0x4086ef in _0x37d452)if(Object[_0x245d0d(0x1f7)][_0x245d0d(0x1eb)]['call'](_0x37d452,_0x4086ef))_0x542b8d[_0x542b8d['length']]=_0x4086ef;return _0x542b8d;},_0x560a96(_0x52cd6a);};return function(_0x44b71d){const _0x1f13d2=a19_0x53b6;if(_0x44b71d&&_0x44b71d[_0x1f13d2(0x1d3)])return _0x44b71d;var _0xcafa1a={};if(_0x44b71d!=null){for(var _0x1073b9=_0x560a96(_0x44b71d),_0x4b6954=0x0;_0x4b6954<_0x1073b9[_0x1f13d2(0x22d)];_0x4b6954++)if(_0x1073b9[_0x4b6954]!==_0x1f13d2(0x224))__createBinding(_0xcafa1a,_0x44b71d,_0x1073b9[_0x4b6954]);}return __setModuleDefault(_0xcafa1a,_0x44b71d),_0xcafa1a;};}());Object[a19_0x58bef8(0x1f2)](exports,a19_0x58bef8(0x1d3),{'value':!![]});function a19_0x53b6(_0x50df3b,_0x3b9732){const _0xa7dc7a=a19_0xa7dc();return a19_0x53b6=function(_0x53b633,_0x309e12){_0x53b633=_0x53b633-0x1d2;let _0x5a0020=_0xa7dc7a[_0x53b633];return _0x5a0020;},a19_0x53b6(_0x50df3b,_0x3b9732);}const express_1=require('express'),adminController_1=require(a19_0x58bef8(0x1ee)),validation_1=require(a19_0x58bef8(0x1f6)),auth_1=require(a19_0x58bef8(0x1fc)),loggerService_1=require('../services/loggerService'),coinToPayStatusService_1=require('../services/coinToPayStatusService'),domainMonitoringService_1=require(a19_0x58bef8(0x232)),router=(0x0,express_1[a19_0x58bef8(0x201)])(),adminController=new adminController_1[(a19_0x58bef8(0x20c))]();router[a19_0x58bef8(0x225)](auth_1['authenticateToken'],auth_1[a19_0x58bef8(0x1d5)]),router[a19_0x58bef8(0x217)](a19_0x58bef8(0x1f3),adminController['checkAuth']),router[a19_0x58bef8(0x217)](a19_0x58bef8(0x22a),adminController['getStatistics']),router[a19_0x58bef8(0x217)](a19_0x58bef8(0x1e2),adminController[a19_0x58bef8(0x1f8)]),router['get'](a19_0x58bef8(0x213),adminController[a19_0x58bef8(0x1e9)]),router[a19_0x58bef8(0x217)](a19_0x58bef8(0x1ec),adminController[a19_0x58bef8(0x234)]),router[a19_0x58bef8(0x217)](a19_0x58bef8(0x1fa),adminController[a19_0x58bef8(0x23e)]),router['post'](a19_0x58bef8(0x223),(0x0,validation_1[a19_0x58bef8(0x243)])(validation_1[a19_0x58bef8(0x1e5)]),adminController[a19_0x58bef8(0x222)]),router[a19_0x58bef8(0x217)](a19_0x58bef8(0x219),adminController[a19_0x58bef8(0x239)]),router[a19_0x58bef8(0x217)](a19_0x58bef8(0x22e),adminController[a19_0x58bef8(0x1d7)]),router[a19_0x58bef8(0x241)](a19_0x58bef8(0x22e),adminController['deletePayout']),router[a19_0x58bef8(0x217)](a19_0x58bef8(0x205),adminController[a19_0x58bef8(0x20e)]),router[a19_0x58bef8(0x217)](a19_0x58bef8(0x247),adminController[a19_0x58bef8(0x1dc)]),router[a19_0x58bef8(0x216)]('/payments/:id',adminController[a19_0x58bef8(0x1d2)]),router[a19_0x58bef8(0x216)]('/payments/:id/customer',(0x0,validation_1['validate'])(validation_1[a19_0x58bef8(0x1f9)]),adminController['updateCustomerData']),router[a19_0x58bef8(0x217)](a19_0x58bef8(0x21e),adminController[a19_0x58bef8(0x1e7)]),router['get']('/users/:id',adminController[a19_0x58bef8(0x203)]),router[a19_0x58bef8(0x245)](a19_0x58bef8(0x21e),(0x0,validation_1[a19_0x58bef8(0x243)])(validation_1[a19_0x58bef8(0x1da)]),adminController[a19_0x58bef8(0x246)]),router[a19_0x58bef8(0x216)]('/users/:id',(0x0,validation_1[a19_0x58bef8(0x243)])(validation_1[a19_0x58bef8(0x1f5)]),adminController[a19_0x58bef8(0x1e6)]),router['delete'](a19_0x58bef8(0x1f1),adminController[a19_0x58bef8(0x1fb)]),router[a19_0x58bef8(0x245)](a19_0x58bef8(0x212),adminController['suspendUser']),router[a19_0x58bef8(0x245)](a19_0x58bef8(0x1d9),adminController[a19_0x58bef8(0x202)]),router[a19_0x58bef8(0x217)](a19_0x58bef8(0x215),(_0x485136,_0x4422c6)=>{const _0x5f4f54=a19_0x58bef8;try{const _0x4d5878=loggerService_1[_0x5f4f54(0x22c)]['getLogStats']();_0x4422c6[_0x5f4f54(0x23d)]({'success':!![],'result':_0x4d5878});}catch(_0x35de46){_0x4422c6[_0x5f4f54(0x228)](0x1f4)[_0x5f4f54(0x23d)]({'success':![],'message':_0x5f4f54(0x1ed)});}}),router['post'](a19_0x58bef8(0x23f),(_0x42cc9c,_0x36f0a2)=>{const _0x184a2e=a19_0x58bef8;try{const {daysToKeep:daysToKeep=0x1e}=_0x42cc9c[_0x184a2e(0x236)];loggerService_1['loggerService']['cleanOldLogs'](daysToKeep),_0x36f0a2[_0x184a2e(0x23d)]({'success':!![],'message':_0x184a2e(0x207)+daysToKeep+_0x184a2e(0x248)});}catch(_0x220b85){_0x36f0a2[_0x184a2e(0x228)](0x1f4)[_0x184a2e(0x23d)]({'success':![],'message':'Failed\x20to\x20clean\x20old\x20logs'});}}),router[a19_0x58bef8(0x245)](a19_0x58bef8(0x233),async(_0x310bf3,_0x40cc71)=>{const _0x38edeb=a19_0x58bef8;try{const {paymentId:_0x4674ce}=_0x310bf3[_0x38edeb(0x23c)];console['log'](_0x38edeb(0x221)+_0x4674ce),await coinToPayStatusService_1['coinToPayStatusService'][_0x38edeb(0x1e4)](_0x4674ce),_0x40cc71[_0x38edeb(0x23d)]({'success':!![],'message':_0x38edeb(0x22f)});}catch(_0x2192a6){console[_0x38edeb(0x23a)]('‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20'+_0x310bf3[_0x38edeb(0x23c)][_0x38edeb(0x211)]+':',_0x2192a6),_0x40cc71['status'](0x1f4)['json']({'success':![],'message':_0x2192a6 instanceof Error?_0x2192a6[_0x38edeb(0x226)]:_0x38edeb(0x23b)});}}),router[a19_0x58bef8(0x217)](a19_0x58bef8(0x238),(_0x41d27,_0x27afd1)=>{const _0x149727=a19_0x58bef8;try{const _0x4d0e34=coinToPayStatusService_1[_0x149727(0x1ff)][_0x149727(0x1ea)]();_0x27afd1['json']({'success':!![],'result':{..._0x4d0e34,'description':'CoinToPay\x20automatic\x20status\x20checking\x20service','statusMapping':{'Paid':_0x149727(0x21f),'Awaiting\x20Fiat':_0x149727(0x21a),'waiting':_0x149727(0x21a),'expired':_0x149727(0x206),'failed':'FAILED'},'autoExpiryNote':_0x149727(0x1de)+_0x4d0e34[_0x149727(0x1db)]+_0x149727(0x209),'individualTimersNote':_0x149727(0x244)}});}catch(_0x1a26f9){_0x27afd1[_0x149727(0x228)](0x1f4)['json']({'success':![],'message':'Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics'});}}),router[a19_0x58bef8(0x217)](a19_0x58bef8(0x214),async(_0x1ad94d,_0xf4a2aa)=>{const _0x398110=a19_0x58bef8;try{const {paymentId:_0x108649}=_0x1ad94d[_0x398110(0x23c)],_0x54d2fe=coinToPayStatusService_1['coinToPayStatusService']['getPaymentTimerInfo'](_0x108649),_0x358a30=(await Promise['resolve']()[_0x398110(0x218)](()=>__importStar(require('../config/database'))))[_0x398110(0x224)],_0x4b3f80=await _0x358a30[_0x398110(0x1d6)][_0x398110(0x231)]({'where':{'id':_0x108649},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x4b3f80)return _0xf4a2aa['status'](0x194)['json']({'success':![],'message':'Payment\x20not\x20found'});_0xf4a2aa[_0x398110(0x23d)]({'success':!![],'result':{'payment':{'id':_0x4b3f80['id'],'gateway':_0x4b3f80[_0x398110(0x1f0)],'gatewayPaymentId':_0x4b3f80[_0x398110(0x1d4)],'status':_0x4b3f80[_0x398110(0x228)],'amount':_0x4b3f80[_0x398110(0x230)],'currency':_0x4b3f80[_0x398110(0x20a)],'createdAt':_0x4b3f80[_0x398110(0x227)],'updatedAt':_0x4b3f80[_0x398110(0x1e1)],'shop':_0x4b3f80[_0x398110(0x21c)]},'timers':_0x54d2fe,'isCoinToPay':_0x4b3f80[_0x398110(0x1f0)]===_0x398110(0x1dd),'ageInMinutes':Math[_0x398110(0x1d8)]((Date[_0x398110(0x20f)]()-_0x4b3f80[_0x398110(0x227)]['getTime']())/(0x3e8*0x3c))}});}catch(_0x412f2c){_0xf4a2aa[_0x398110(0x228)](0x1f4)[_0x398110(0x23d)]({'success':![],'message':_0x412f2c instanceof Error?_0x412f2c[_0x398110(0x226)]:_0x398110(0x220)});}}),router[a19_0x58bef8(0x217)](a19_0x58bef8(0x21d),(_0x461e8e,_0x265143)=>{const _0xe6a4da=a19_0x58bef8;try{const _0x53fa23=domainMonitoringService_1['domainMonitoringService']['getMonitoringStats']();_0x265143['json']({'success':!![],'result':{..._0x53fa23,'description':'Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','behavior':_0xe6a4da(0x1df),'encoding':_0xe6a4da(0x22b)}});}catch(_0x371f33){_0x265143[_0xe6a4da(0x228)](0x1f4)['json']({'success':![],'message':'Failed\x20to\x20get\x20domain\x20monitoring\x20statistics'});}}),router[a19_0x58bef8(0x245)](a19_0x58bef8(0x20d),async(_0x4a0c3,_0x3e6263)=>{const _0x3bfd12=a19_0x58bef8;try{const _0x5746b0=await domainMonitoringService_1[_0x3bfd12(0x21b)]['manualCheck']();_0x3e6263['json']({'success':!![],'result':{'domainAvailable':_0x5746b0,'message':_0x5746b0?_0x3bfd12(0x200):'Domain\x20check\x20failed','timestamp':new Date()['toISOString']()}});}catch(_0x488bd7){_0x3e6263[_0x3bfd12(0x228)](0x1f4)[_0x3bfd12(0x23d)]({'success':![],'message':_0x488bd7 instanceof Error?_0x488bd7[_0x3bfd12(0x226)]:'Failed\x20to\x20perform\x20manual\x20domain\x20check'});}}),exports[a19_0x58bef8(0x224)]=router;