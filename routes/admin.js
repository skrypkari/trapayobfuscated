'use strict';const a20_0x3a6688=a20_0x3737;(function(_0x39c51b,_0x38fa98){const _0x1d30d3=a20_0x3737,_0x21fe80=_0x39c51b();while(!![]){try{const _0x333a2c=parseInt(_0x1d30d3(0x168))/0x1+-parseInt(_0x1d30d3(0x1d3))/0x2*(parseInt(_0x1d30d3(0x1b5))/0x3)+-parseInt(_0x1d30d3(0x186))/0x4*(parseInt(_0x1d30d3(0x184))/0x5)+parseInt(_0x1d30d3(0x1a1))/0x6+-parseInt(_0x1d30d3(0x1d5))/0x7+-parseInt(_0x1d30d3(0x190))/0x8+-parseInt(_0x1d30d3(0x19a))/0x9*(-parseInt(_0x1d30d3(0x192))/0xa);if(_0x333a2c===_0x38fa98)break;else _0x21fe80['push'](_0x21fe80['shift']());}catch(_0x4f5999){_0x21fe80['push'](_0x21fe80['shift']());}}}(a20_0x5463,0xb6682));function a20_0x5463(){const _0x3dff3f=['authenticateToken','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','getServiceStats','Domain\x20is\x20responding\x20correctly','delete','getProcessingPaymentsStats','hasOwnProperty','json','then','../controllers/adminController','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','/users/:id','Failed\x20to\x20get\x20log\x20statistics','/domain-monitoring/check','/payments/:id','getStatistics','AdminController','requireAdmin','cleanupStalePayments','36OPlHxz','/payout','7871997fpsvEZ','call','/payouts/:id','getPaymentById','/payments/processing-stats','params','cleanupStalePendingPayments','CoinToPay\x20automatic\x20status\x20checking\x20service','checkPaymentById','/users','__createBinding','length','Failed\x20to\x20clean\x20old\x20logs','expiryDays','/payments/cleanup','error','/payout/stats','../middleware/validation','\x20days\x20if\x20not\x20paid','Old\x20logs\x20cleaned\x20(kept\x20last\x20','/logs/clean','CoinToPay\x20payment\x20status\x20checked\x20successfully','__importStar','express','getOwnPropertyNames','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','1385688OTJugm','writable','body','Failed\x20to\x20get\x20payment\x20information','getPaymentTimerInfo','/logs/stats','getUsers','shop','/payments/:id/customer','PENDING','deleteUser','post','/users/:id/suspend','gatewayPaymentId','put','createUserSchema','getPayoutStats','message','/statistics','domainMonitoringService','createdAt','suspendUser','updateCustomerData','status','currency','getTime','createPayoutSchema','prototype','4885GHETgr','/users/:id/activate','2180MCuGIz','configurable','/domain-monitoring/stats','defineProperty','default','checkAuth','resolve','updateUser','/auth','getUserById','8689944ampekx','/payments','1630gWdyhd','payment','cleanupStalePaymentsWithReport','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','loggerService','\x20days)','getPayments','/payouts','135882ZoEgms','PAID','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','deletePayout','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','findUnique','updatedAt','1136334HnPHyV','coinToPayStatusService','getMerchantsAwaitingPayout','/cointopay/payment/:paymentId','create','toISOString','use','/payments/cleanup-pending','__setModuleDefault','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','Domain\x20check\x20failed','/payments/cleanup-with-report','../services/domainMonitoringService','/cointopay/check/:paymentId','/merchants/selection','Payments\x20automatically\x20expire\x20after\x20','log','updateCustomerDataSchema','../services/coinToPayStatusService','createUser','90939CeHvAx','getMonitoringStats','paymentId','validate','Router','__esModule','activateUser','get','cleanOldLogs','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','../middleware/auth'];a20_0x5463=function(){return _0x3dff3f;};return a20_0x5463();}var __createBinding=this&&this[a20_0x3a6688(0x1df)]||(Object[a20_0x3a6688(0x1a5)]?function(_0x550d39,_0x2cb4b4,_0x284d21,_0x593d04){const _0x5218ee=a20_0x3a6688;if(_0x593d04===undefined)_0x593d04=_0x284d21;var _0x49b68c=Object['getOwnPropertyDescriptor'](_0x2cb4b4,_0x284d21);(!_0x49b68c||('get'in _0x49b68c?!_0x2cb4b4[_0x5218ee(0x1ba)]:_0x49b68c[_0x5218ee(0x169)]||_0x49b68c[_0x5218ee(0x187)]))&&(_0x49b68c={'enumerable':!![],'get':function(){return _0x2cb4b4[_0x284d21];}}),Object['defineProperty'](_0x550d39,_0x593d04,_0x49b68c);}:function(_0x5896b0,_0x4acb13,_0x1f3667,_0x45f941){if(_0x45f941===undefined)_0x45f941=_0x1f3667;_0x5896b0[_0x45f941]=_0x4acb13[_0x1f3667];}),__setModuleDefault=this&&this[a20_0x3a6688(0x1a9)]||(Object[a20_0x3a6688(0x1a5)]?function(_0x4668a2,_0x1e3dcb){const _0x9910b8=a20_0x3a6688;Object['defineProperty'](_0x4668a2,_0x9910b8(0x18a),{'enumerable':!![],'value':_0x1e3dcb});}:function(_0x14999d,_0x39cf2a){_0x14999d['default']=_0x39cf2a;}),__importStar=this&&this[a20_0x3a6688(0x1eb)]||(function(){var _0x3d3c03=function(_0x269ad4){const _0x365b8e=a20_0x3737;return _0x3d3c03=Object[_0x365b8e(0x1ed)]||function(_0x5f44d0){const _0x575aa0=_0x365b8e;var _0x5022a1=[];for(var _0x41cc97 in _0x5f44d0)if(Object[_0x575aa0(0x183)][_0x575aa0(0x1c6)][_0x575aa0(0x1d6)](_0x5f44d0,_0x41cc97))_0x5022a1[_0x5022a1[_0x575aa0(0x1e0)]]=_0x41cc97;return _0x5022a1;},_0x3d3c03(_0x269ad4);};return function(_0x5b2953){const _0x39f2de=a20_0x3737;if(_0x5b2953&&_0x5b2953[_0x39f2de(0x1ba)])return _0x5b2953;var _0x517436={};if(_0x5b2953!=null){for(var _0x1a7d27=_0x3d3c03(_0x5b2953),_0x4c0100=0x0;_0x4c0100<_0x1a7d27['length'];_0x4c0100++)if(_0x1a7d27[_0x4c0100]!=='default')__createBinding(_0x517436,_0x5b2953,_0x1a7d27[_0x4c0100]);}return __setModuleDefault(_0x517436,_0x5b2953),_0x517436;};}());function a20_0x3737(_0x489b42,_0x4767de){const _0x546359=a20_0x5463();return a20_0x3737=function(_0x3737c3,_0xe72ac2){_0x3737c3=_0x3737c3-0x168;let _0x54838f=_0x546359[_0x3737c3];return _0x54838f;},a20_0x3737(_0x489b42,_0x4767de);}Object[a20_0x3a6688(0x189)](exports,'__esModule',{'value':!![]});const express_1=require(a20_0x3a6688(0x1ec)),adminController_1=require(a20_0x3a6688(0x1c9)),validation_1=require(a20_0x3a6688(0x1e6)),auth_1=require(a20_0x3a6688(0x1bf)),loggerService_1=require('../services/loggerService'),coinToPayStatusService_1=require(a20_0x3a6688(0x1b3)),domainMonitoringService_1=require(a20_0x3a6688(0x1ad)),router=(0x0,express_1[a20_0x3a6688(0x1b9)])(),adminController=new adminController_1[(a20_0x3a6688(0x1d0))]();router[a20_0x3a6688(0x1a7)](auth_1[a20_0x3a6688(0x1c0)],auth_1[a20_0x3a6688(0x1d1)]),router['get'](a20_0x3a6688(0x18e),adminController[a20_0x3a6688(0x18b)]),router[a20_0x3a6688(0x1bc)](a20_0x3a6688(0x17a),adminController[a20_0x3a6688(0x1cf)]),router['get']('/merchant-statistics',adminController['getMerchantStatistics']),router['get'](a20_0x3a6688(0x1e5),adminController[a20_0x3a6688(0x178)]),router['get']('/payout/merchants',adminController[a20_0x3a6688(0x1a3)]),router[a20_0x3a6688(0x1bc)](a20_0x3a6688(0x1af),adminController['getMerchantsSelection']),router[a20_0x3a6688(0x173)](a20_0x3a6688(0x1d4),(0x0,validation_1[a20_0x3a6688(0x1b8)])(validation_1[a20_0x3a6688(0x182)]),adminController['createPayout']),router[a20_0x3a6688(0x1bc)](a20_0x3a6688(0x199),adminController['getPayouts']),router[a20_0x3a6688(0x1bc)](a20_0x3a6688(0x1d7),adminController['getPayoutById']),router[a20_0x3a6688(0x1c4)](a20_0x3a6688(0x1d7),adminController[a20_0x3a6688(0x19d)]),router[a20_0x3a6688(0x1bc)](a20_0x3a6688(0x191),adminController[a20_0x3a6688(0x198)]),router[a20_0x3a6688(0x1bc)](a20_0x3a6688(0x1ce),adminController[a20_0x3a6688(0x1d8)]),router[a20_0x3a6688(0x176)](a20_0x3a6688(0x1ce),adminController['updatePayment']),router['put'](a20_0x3a6688(0x170),(0x0,validation_1[a20_0x3a6688(0x1b8)])(validation_1[a20_0x3a6688(0x1b2)]),adminController[a20_0x3a6688(0x17e)]),router[a20_0x3a6688(0x1bc)](a20_0x3a6688(0x1d9),adminController[a20_0x3a6688(0x1c5)]),router[a20_0x3a6688(0x173)](a20_0x3a6688(0x1e3),adminController[a20_0x3a6688(0x1d2)]),router['post'](a20_0x3a6688(0x1a8),adminController[a20_0x3a6688(0x1db)]),router['post'](a20_0x3a6688(0x1ac),adminController[a20_0x3a6688(0x194)]),router['get']('/users',adminController[a20_0x3a6688(0x16e)]),router[a20_0x3a6688(0x1bc)](a20_0x3a6688(0x1cb),adminController[a20_0x3a6688(0x18f)]),router[a20_0x3a6688(0x173)](a20_0x3a6688(0x1de),(0x0,validation_1[a20_0x3a6688(0x1b8)])(validation_1[a20_0x3a6688(0x177)]),adminController[a20_0x3a6688(0x1b4)]),router[a20_0x3a6688(0x176)](a20_0x3a6688(0x1cb),(0x0,validation_1['validate'])(validation_1['updateUserSchema']),adminController[a20_0x3a6688(0x18d)]),router['delete'](a20_0x3a6688(0x1cb),adminController[a20_0x3a6688(0x172)]),router['post'](a20_0x3a6688(0x174),adminController[a20_0x3a6688(0x17d)]),router[a20_0x3a6688(0x173)](a20_0x3a6688(0x185),adminController[a20_0x3a6688(0x1bb)]),router[a20_0x3a6688(0x1bc)](a20_0x3a6688(0x16d),(_0x14e0ad,_0x1f0c3e)=>{const _0x2c2409=a20_0x3a6688;try{const _0x2e1d24=loggerService_1[_0x2c2409(0x196)]['getLogStats']();_0x1f0c3e[_0x2c2409(0x1c7)]({'success':!![],'result':_0x2e1d24});}catch(_0x6d81ea){_0x1f0c3e[_0x2c2409(0x17f)](0x1f4)[_0x2c2409(0x1c7)]({'success':![],'message':_0x2c2409(0x1cc)});}}),router[a20_0x3a6688(0x173)](a20_0x3a6688(0x1e9),(_0x522b8e,_0x4b6173)=>{const _0x187b3b=a20_0x3a6688;try{const {daysToKeep:daysToKeep=0x1e}=_0x522b8e[_0x187b3b(0x16a)];loggerService_1[_0x187b3b(0x196)][_0x187b3b(0x1bd)](daysToKeep),_0x4b6173[_0x187b3b(0x1c7)]({'success':!![],'message':_0x187b3b(0x1e8)+daysToKeep+_0x187b3b(0x197)});}catch(_0x7e842f){_0x4b6173[_0x187b3b(0x17f)](0x1f4)['json']({'success':![],'message':_0x187b3b(0x1e1)});}}),router['post'](a20_0x3a6688(0x1ae),async(_0x545d03,_0x112b08)=>{const _0x431de=a20_0x3a6688;try{const {paymentId:_0x558ffc}=_0x545d03[_0x431de(0x1da)];console[_0x431de(0x1b1)](_0x431de(0x19e)+_0x558ffc),await coinToPayStatusService_1['coinToPayStatusService'][_0x431de(0x1dd)](_0x558ffc),_0x112b08[_0x431de(0x1c7)]({'success':!![],'message':_0x431de(0x1ea)});}catch(_0x4f1b4b){console[_0x431de(0x1e4)]('‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20'+_0x545d03[_0x431de(0x1da)][_0x431de(0x1b7)]+':',_0x4f1b4b),_0x112b08['status'](0x1f4)[_0x431de(0x1c7)]({'success':![],'message':_0x4f1b4b instanceof Error?_0x4f1b4b['message']:_0x431de(0x1ee)});}}),router[a20_0x3a6688(0x1bc)]('/cointopay/stats',(_0x1a08e2,_0x1b17fa)=>{const _0x10bc9d=a20_0x3a6688;try{const _0x245811=coinToPayStatusService_1[_0x10bc9d(0x1a2)][_0x10bc9d(0x1c2)]();_0x1b17fa[_0x10bc9d(0x1c7)]({'success':!![],'result':{..._0x245811,'description':_0x10bc9d(0x1dc),'statusMapping':{'Paid':_0x10bc9d(0x19b),'Awaiting\x20Fiat':_0x10bc9d(0x171),'waiting':_0x10bc9d(0x171),'expired':'EXPIRED','failed':'FAILED'},'autoExpiryNote':_0x10bc9d(0x1b0)+_0x245811[_0x10bc9d(0x1e2)]+_0x10bc9d(0x1e7),'individualTimersNote':_0x10bc9d(0x1ca)}});}catch(_0x3fc152){_0x1b17fa[_0x10bc9d(0x17f)](0x1f4)[_0x10bc9d(0x1c7)]({'success':![],'message':_0x10bc9d(0x19c)});}}),router[a20_0x3a6688(0x1bc)](a20_0x3a6688(0x1a4),async(_0x39dc43,_0x47de50)=>{const _0x2a11cd=a20_0x3a6688;try{const {paymentId:_0x43526c}=_0x39dc43[_0x2a11cd(0x1da)],_0x30b23c=coinToPayStatusService_1['coinToPayStatusService'][_0x2a11cd(0x16c)](_0x43526c),_0xf13ecd=(await Promise[_0x2a11cd(0x18c)]()[_0x2a11cd(0x1c8)](()=>__importStar(require('../config/database'))))[_0x2a11cd(0x18a)],_0x30ca4c=await _0xf13ecd[_0x2a11cd(0x193)][_0x2a11cd(0x19f)]({'where':{'id':_0x43526c},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x30ca4c)return _0x47de50['status'](0x194)[_0x2a11cd(0x1c7)]({'success':![],'message':'Payment\x20not\x20found'});_0x47de50['json']({'success':!![],'result':{'payment':{'id':_0x30ca4c['id'],'gateway':_0x30ca4c['gateway'],'gatewayPaymentId':_0x30ca4c[_0x2a11cd(0x175)],'status':_0x30ca4c[_0x2a11cd(0x17f)],'amount':_0x30ca4c['amount'],'currency':_0x30ca4c[_0x2a11cd(0x180)],'createdAt':_0x30ca4c['createdAt'],'updatedAt':_0x30ca4c[_0x2a11cd(0x1a0)],'shop':_0x30ca4c[_0x2a11cd(0x16f)]},'timers':_0x30b23c,'isCoinToPay':_0x30ca4c['gateway']==='cointopay','ageInMinutes':Math['floor']((Date['now']()-_0x30ca4c[_0x2a11cd(0x17c)][_0x2a11cd(0x181)]())/(0x3e8*0x3c))}});}catch(_0x4c8396){_0x47de50['status'](0x1f4)[_0x2a11cd(0x1c7)]({'success':![],'message':_0x4c8396 instanceof Error?_0x4c8396[_0x2a11cd(0x179)]:_0x2a11cd(0x16b)});}}),router['get'](a20_0x3a6688(0x188),(_0x52cb43,_0x26c63b)=>{const _0x350e0c=a20_0x3a6688;try{const _0xb97398=domainMonitoringService_1[_0x350e0c(0x17b)][_0x350e0c(0x1b6)]();_0x26c63b['json']({'success':!![],'result':{..._0xb97398,'description':_0x350e0c(0x1aa),'behavior':_0x350e0c(0x1c1),'encoding':_0x350e0c(0x195)}});}catch(_0x29570b){_0x26c63b['status'](0x1f4)[_0x350e0c(0x1c7)]({'success':![],'message':_0x350e0c(0x1be)});}}),router[a20_0x3a6688(0x173)](a20_0x3a6688(0x1cd),async(_0x194e60,_0x1f5568)=>{const _0x3fdbb9=a20_0x3a6688;try{const _0x802dc8=await domainMonitoringService_1[_0x3fdbb9(0x17b)]['manualCheck']();_0x1f5568['json']({'success':!![],'result':{'domainAvailable':_0x802dc8,'message':_0x802dc8?_0x3fdbb9(0x1c3):_0x3fdbb9(0x1ab),'timestamp':new Date()[_0x3fdbb9(0x1a6)]()}});}catch(_0x4fefdf){_0x1f5568[_0x3fdbb9(0x17f)](0x1f4)[_0x3fdbb9(0x1c7)]({'success':![],'message':_0x4fefdf instanceof Error?_0x4fefdf['message']:'Failed\x20to\x20perform\x20manual\x20domain\x20check'});}}),exports[a20_0x3a6688(0x18a)]=router;