'use strict';const a19_0x3ada31=a19_0x4d16;function a19_0x4d16(_0x3dd0cb,_0x5bcf5c){const _0x41cb82=a19_0x41cb();return a19_0x4d16=function(_0x4d1674,_0x3a7d8f){_0x4d1674=_0x4d1674-0x137;let _0x3f8eb3=_0x41cb82[_0x4d1674];return _0x3f8eb3;},a19_0x4d16(_0x3dd0cb,_0x5bcf5c);}(function(_0x4ffd90,_0x5de30a){const _0x540afa=a19_0x4d16,_0x5e2b05=_0x4ffd90();while(!![]){try{const _0x36f02a=parseInt(_0x540afa(0x17c))/0x1+-parseInt(_0x540afa(0x197))/0x2*(parseInt(_0x540afa(0x1ad))/0x3)+parseInt(_0x540afa(0x188))/0x4*(parseInt(_0x540afa(0x168))/0x5)+-parseInt(_0x540afa(0x13e))/0x6+-parseInt(_0x540afa(0x1a1))/0x7+-parseInt(_0x540afa(0x14a))/0x8*(parseInt(_0x540afa(0x156))/0x9)+parseInt(_0x540afa(0x17a))/0xa;if(_0x36f02a===_0x5de30a)break;else _0x5e2b05['push'](_0x5e2b05['shift']());}catch(_0x3269f7){_0x5e2b05['push'](_0x5e2b05['shift']());}}}(a19_0x41cb,0xa5b83));function a19_0x41cb(){const _0x2c93d0=['get','5toHEFF','body','updateCustomerData','Domain\x20check\x20failed','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','then','cleanOldLogs','getLogStats','/payout/merchants','Domain\x20is\x20responding\x20correctly','/domain-monitoring/stats','AdminController','\x20days)','Failed\x20to\x20clean\x20old\x20logs','getMonitoringStats','getMerchantStatistics','deleteUser','create','38621580OMRjZB','updateUserSchema','450320XoFvOS','updateCustomerDataSchema','/payments','amount','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','loggerService','paymentId','getPayoutById','getPaymentTimerInfo','/payments/:id','now','Failed\x20to\x20get\x20log\x20statistics','1952804AnfzwQ','gateway','floor','updateUser','../middleware/validation','EXPIRED','error','status','../middleware/auth','Failed\x20to\x20perform\x20manual\x20domain\x20check','validate','prototype','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','put','createdAt','2111468qBsiem','post','findUnique','../services/domainMonitoringService','/users/:id','log','__esModule','../config/database','../services/coinToPayStatusService','\x20days\x20if\x20not\x20paid','7696458WSpZlh','toISOString','/logs/clean','Old\x20logs\x20cleaned\x20(kept\x20last\x20','/merchant-statistics','updatePayment','getOwnPropertyDescriptor','/cointopay/payment/:paymentId','getMerchantsAwaitingPayout','defineProperty','/users','expiryDays','3jmuTGy','deletePayout','__createBinding','hasOwnProperty','/cointopay/check/:paymentId','coinToPayStatusService','Payments\x20automatically\x20expire\x20after\x20','default','params','4851258AuVcyi','message','CoinToPay\x20payment\x20status\x20checked\x20successfully','/payments/:id/customer','__importStar','Failed\x20to\x20get\x20payment\x20information','createUser','/statistics','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','configurable','getServiceStats','8oCXiRM','/payouts/:id','updatedAt','/users/:id/activate','Payment\x20not\x20found','json','Router','createUserSchema','activateUser','__setModuleDefault','/logs/stats','resolve','10423089UKuiRw','createPayout','/payout','getStatistics','call','suspendUser','PENDING','currency','/cointopay/stats','requireAdmin','gatewayPaymentId','getUserById','shop','getMerchantsSelection','getPaymentById','delete','getPayouts'];a19_0x41cb=function(){return _0x2c93d0;};return a19_0x41cb();}var __createBinding=this&&this[a19_0x3ada31(0x137)]||(Object[a19_0x3ada31(0x179)]?function(_0x5cc5ba,_0x10ff35,_0x151572,_0x27fac5){const _0x58fe49=a19_0x3ada31;if(_0x27fac5===undefined)_0x27fac5=_0x151572;var _0x51ae8c=Object[_0x58fe49(0x1a7)](_0x10ff35,_0x151572);(!_0x51ae8c||(_0x58fe49(0x167)in _0x51ae8c?!_0x10ff35[_0x58fe49(0x19d)]:_0x51ae8c['writable']||_0x51ae8c[_0x58fe49(0x148)]))&&(_0x51ae8c={'enumerable':!![],'get':function(){return _0x10ff35[_0x151572];}}),Object['defineProperty'](_0x5cc5ba,_0x27fac5,_0x51ae8c);}:function(_0x30764b,_0x56407d,_0x362f68,_0x725155){if(_0x725155===undefined)_0x725155=_0x362f68;_0x30764b[_0x725155]=_0x56407d[_0x362f68];}),__setModuleDefault=this&&this[a19_0x3ada31(0x153)]||(Object[a19_0x3ada31(0x179)]?function(_0x5f015c,_0x5c9af0){const _0x4d49a2=a19_0x3ada31;Object[_0x4d49a2(0x1aa)](_0x5f015c,_0x4d49a2(0x13c),{'enumerable':!![],'value':_0x5c9af0});}:function(_0x217b95,_0x43f0f2){const _0x896859=a19_0x3ada31;_0x217b95[_0x896859(0x13c)]=_0x43f0f2;}),__importStar=this&&this[a19_0x3ada31(0x142)]||(function(){var _0x5e3732=function(_0x4b680c){return _0x5e3732=Object['getOwnPropertyNames']||function(_0x3ec376){const _0x112a8c=a19_0x4d16;var _0x19c45c=[];for(var _0x433f59 in _0x3ec376)if(Object[_0x112a8c(0x193)][_0x112a8c(0x138)][_0x112a8c(0x15a)](_0x3ec376,_0x433f59))_0x19c45c[_0x19c45c['length']]=_0x433f59;return _0x19c45c;},_0x5e3732(_0x4b680c);};return function(_0x1dbd33){const _0x1a04a2=a19_0x4d16;if(_0x1dbd33&&_0x1dbd33[_0x1a04a2(0x19d)])return _0x1dbd33;var _0x305879={};if(_0x1dbd33!=null){for(var _0x377131=_0x5e3732(_0x1dbd33),_0x349007=0x0;_0x349007<_0x377131['length'];_0x349007++)if(_0x377131[_0x349007]!==_0x1a04a2(0x13c))__createBinding(_0x305879,_0x1dbd33,_0x377131[_0x349007]);}return __setModuleDefault(_0x305879,_0x1dbd33),_0x305879;};}());Object[a19_0x3ada31(0x1aa)](exports,'__esModule',{'value':!![]});const express_1=require('express'),adminController_1=require('../controllers/adminController'),validation_1=require(a19_0x3ada31(0x18c)),auth_1=require(a19_0x3ada31(0x190)),loggerService_1=require('../services/loggerService'),coinToPayStatusService_1=require(a19_0x3ada31(0x19f)),domainMonitoringService_1=require(a19_0x3ada31(0x19a)),router=(0x0,express_1[a19_0x3ada31(0x150)])(),adminController=new adminController_1[(a19_0x3ada31(0x173))]();router['use'](auth_1['authenticateToken'],auth_1[a19_0x3ada31(0x15f)]),router['get']('/auth',adminController['checkAuth']),router['get'](a19_0x3ada31(0x145),adminController[a19_0x3ada31(0x159)]),router[a19_0x3ada31(0x167)](a19_0x3ada31(0x1a5),adminController[a19_0x3ada31(0x177)]),router[a19_0x3ada31(0x167)]('/payout/stats',adminController['getPayoutStats']),router[a19_0x3ada31(0x167)](a19_0x3ada31(0x170),adminController[a19_0x3ada31(0x1a9)]),router['get']('/merchants/selection',adminController[a19_0x3ada31(0x163)]),router[a19_0x3ada31(0x198)](a19_0x3ada31(0x158),(0x0,validation_1[a19_0x3ada31(0x192)])(validation_1['createPayoutSchema']),adminController[a19_0x3ada31(0x157)]),router['get']('/payouts',adminController[a19_0x3ada31(0x166)]),router['get'](a19_0x3ada31(0x14b),adminController[a19_0x3ada31(0x183)]),router[a19_0x3ada31(0x165)](a19_0x3ada31(0x14b),adminController[a19_0x3ada31(0x1ae)]),router[a19_0x3ada31(0x167)](a19_0x3ada31(0x17e),adminController['getPayments']),router[a19_0x3ada31(0x167)](a19_0x3ada31(0x185),adminController[a19_0x3ada31(0x164)]),router['put'](a19_0x3ada31(0x185),adminController[a19_0x3ada31(0x1a6)]),router[a19_0x3ada31(0x195)](a19_0x3ada31(0x141),(0x0,validation_1['validate'])(validation_1[a19_0x3ada31(0x17d)]),adminController[a19_0x3ada31(0x16a)]),router[a19_0x3ada31(0x167)]('/users',adminController['getUsers']),router['get'](a19_0x3ada31(0x19b),adminController[a19_0x3ada31(0x161)]),router['post'](a19_0x3ada31(0x1ab),(0x0,validation_1[a19_0x3ada31(0x192)])(validation_1[a19_0x3ada31(0x151)]),adminController[a19_0x3ada31(0x144)]),router[a19_0x3ada31(0x195)](a19_0x3ada31(0x19b),(0x0,validation_1[a19_0x3ada31(0x192)])(validation_1[a19_0x3ada31(0x17b)]),adminController[a19_0x3ada31(0x18b)]),router[a19_0x3ada31(0x165)](a19_0x3ada31(0x19b),adminController[a19_0x3ada31(0x178)]),router[a19_0x3ada31(0x198)]('/users/:id/suspend',adminController[a19_0x3ada31(0x15b)]),router[a19_0x3ada31(0x198)](a19_0x3ada31(0x14d),adminController[a19_0x3ada31(0x152)]),router[a19_0x3ada31(0x167)](a19_0x3ada31(0x154),(_0x1d496a,_0x310878)=>{const _0x4fb66d=a19_0x3ada31;try{const _0x4b475d=loggerService_1['loggerService'][_0x4fb66d(0x16f)]();_0x310878['json']({'success':!![],'result':_0x4b475d});}catch(_0x5d8a1b){_0x310878['status'](0x1f4)[_0x4fb66d(0x14f)]({'success':![],'message':_0x4fb66d(0x187)});}}),router[a19_0x3ada31(0x198)](a19_0x3ada31(0x1a3),(_0x365f23,_0x50ba71)=>{const _0x2a852f=a19_0x3ada31;try{const {daysToKeep:daysToKeep=0x1e}=_0x365f23[_0x2a852f(0x169)];loggerService_1[_0x2a852f(0x181)][_0x2a852f(0x16e)](daysToKeep),_0x50ba71[_0x2a852f(0x14f)]({'success':!![],'message':_0x2a852f(0x1a4)+daysToKeep+_0x2a852f(0x174)});}catch(_0x503cd1){_0x50ba71['status'](0x1f4)[_0x2a852f(0x14f)]({'success':![],'message':_0x2a852f(0x175)});}}),router[a19_0x3ada31(0x198)](a19_0x3ada31(0x139),async(_0x47b676,_0x278e43)=>{const _0x522512=a19_0x3ada31;try{const {paymentId:_0x4470e9}=_0x47b676[_0x522512(0x13d)];console[_0x522512(0x19c)](_0x522512(0x180)+_0x4470e9),await coinToPayStatusService_1['coinToPayStatusService']['checkPaymentById'](_0x4470e9),_0x278e43['json']({'success':!![],'message':_0x522512(0x140)});}catch(_0x5e0aca){console[_0x522512(0x18e)](_0x522512(0x16c)+_0x47b676[_0x522512(0x13d)][_0x522512(0x182)]+':',_0x5e0aca),_0x278e43[_0x522512(0x18f)](0x1f4)['json']({'success':![],'message':_0x5e0aca instanceof Error?_0x5e0aca['message']:'Failed\x20to\x20check\x20CoinToPay\x20payment\x20status'});}}),router[a19_0x3ada31(0x167)](a19_0x3ada31(0x15e),(_0x5dacce,_0x404364)=>{const _0x148fa1=a19_0x3ada31;try{const _0x3bb9af=coinToPayStatusService_1[_0x148fa1(0x13a)][_0x148fa1(0x149)]();_0x404364['json']({'success':!![],'result':{..._0x3bb9af,'description':'CoinToPay\x20automatic\x20status\x20checking\x20service','statusMapping':{'Paid':'PAID','Awaiting\x20Fiat':_0x148fa1(0x15c),'waiting':'PENDING','expired':_0x148fa1(0x18d),'failed':'FAILED'},'autoExpiryNote':_0x148fa1(0x13b)+_0x3bb9af[_0x148fa1(0x1ac)]+_0x148fa1(0x1a0),'individualTimersNote':_0x148fa1(0x146)}});}catch(_0x53d6f7){_0x404364[_0x148fa1(0x18f)](0x1f4)[_0x148fa1(0x14f)]({'success':![],'message':'Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics'});}}),router[a19_0x3ada31(0x167)](a19_0x3ada31(0x1a8),async(_0x3de63b,_0x13d9ac)=>{const _0x11b339=a19_0x3ada31;try{const {paymentId:_0x1ecb73}=_0x3de63b['params'],_0x1af48c=coinToPayStatusService_1[_0x11b339(0x13a)][_0x11b339(0x184)](_0x1ecb73),_0x5ae4ea=(await Promise[_0x11b339(0x155)]()[_0x11b339(0x16d)](()=>__importStar(require(_0x11b339(0x19e)))))['default'],_0x1a5e14=await _0x5ae4ea['payment'][_0x11b339(0x199)]({'where':{'id':_0x1ecb73},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x1a5e14)return _0x13d9ac['status'](0x194)[_0x11b339(0x14f)]({'success':![],'message':_0x11b339(0x14e)});_0x13d9ac[_0x11b339(0x14f)]({'success':!![],'result':{'payment':{'id':_0x1a5e14['id'],'gateway':_0x1a5e14['gateway'],'gatewayPaymentId':_0x1a5e14[_0x11b339(0x160)],'status':_0x1a5e14['status'],'amount':_0x1a5e14[_0x11b339(0x17f)],'currency':_0x1a5e14[_0x11b339(0x15d)],'createdAt':_0x1a5e14[_0x11b339(0x196)],'updatedAt':_0x1a5e14[_0x11b339(0x14c)],'shop':_0x1a5e14[_0x11b339(0x162)]},'timers':_0x1af48c,'isCoinToPay':_0x1a5e14[_0x11b339(0x189)]==='cointopay','ageInMinutes':Math[_0x11b339(0x18a)]((Date[_0x11b339(0x186)]()-_0x1a5e14[_0x11b339(0x196)]['getTime']())/(0x3e8*0x3c))}});}catch(_0x1a4c62){_0x13d9ac[_0x11b339(0x18f)](0x1f4)[_0x11b339(0x14f)]({'success':![],'message':_0x1a4c62 instanceof Error?_0x1a4c62[_0x11b339(0x13f)]:_0x11b339(0x143)});}}),router['get'](a19_0x3ada31(0x172),(_0x3fa1b6,_0x1b07df)=>{const _0xf4d779=a19_0x3ada31;try{const _0x2d5ff1=domainMonitoringService_1['domainMonitoringService'][_0xf4d779(0x176)]();_0x1b07df['json']({'success':!![],'result':{..._0x2d5ff1,'description':'Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','behavior':_0xf4d779(0x194),'encoding':'Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs'}});}catch(_0x3c2300){_0x1b07df[_0xf4d779(0x18f)](0x1f4)[_0xf4d779(0x14f)]({'success':![],'message':_0xf4d779(0x147)});}}),router['post']('/domain-monitoring/check',async(_0x5b6225,_0x40b75e)=>{const _0x2c9608=a19_0x3ada31;try{const _0x34d6d5=await domainMonitoringService_1['domainMonitoringService']['manualCheck']();_0x40b75e[_0x2c9608(0x14f)]({'success':!![],'result':{'domainAvailable':_0x34d6d5,'message':_0x34d6d5?_0x2c9608(0x171):_0x2c9608(0x16b),'timestamp':new Date()[_0x2c9608(0x1a2)]()}});}catch(_0x5b3160){_0x40b75e[_0x2c9608(0x18f)](0x1f4)[_0x2c9608(0x14f)]({'success':![],'message':_0x5b3160 instanceof Error?_0x5b3160[_0x2c9608(0x13f)]:_0x2c9608(0x191)});}}),exports[a19_0x3ada31(0x13c)]=router;