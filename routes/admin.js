'use strict';function a19_0x5b71(){const _0x2b72d3=['deleteUser','Failed\x20to\x20get\x20log\x20statistics','updatedAt','create','Failed\x20to\x20clean\x20old\x20logs','/payouts','/cointopay/check/:paymentId','../services/domainMonitoringService','/payout/stats','updateUserSchema','writable','__createBinding','createdAt','createUser','Failed\x20to\x20get\x20payment\x20information','getPayments','/payout/merchants','cleanOldLogs','manualCheck','/payouts/:id','message','3368084VVSIMc','/cointopay/payment/:paymentId','findUnique','\x20days)','get','getUsers','../controllers/adminController','7093902Inxeky','../services/coinToPayStatusService','updateUser','floor','currency','resolve','7eqWPmU','__esModule','paymentId','requireAdmin','loggerService','PENDING','params','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','EXPIRED','coinToPayStatusService','../middleware/validation','gateway','17292396YRQhvQ','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','status','shop','checkPaymentById','body','Old\x20logs\x20cleaned\x20(kept\x20last\x20','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','getLogStats','createPayoutSchema','configurable','toISOString','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','gatewayPaymentId','prototype','getPayoutStats','getPaymentById','getServiceStats','call','use','Payments\x20automatically\x20expire\x20after\x20','47315SgdQpa','checkAuth','600990IYyoCh','5608meJMBF','getOwnPropertyNames','13239spuKlC','\x20days\x20if\x20not\x20paid','5ttTDYr','getMonitoringStats','defineProperty','put','default','../config/database','then','107418BbokVu','../middleware/auth','getStatistics','/users','__importStar','/users/:id/suspend','CoinToPay\x20payment\x20status\x20checked\x20successfully','/domain-monitoring/stats','validate','getPayouts','Router','__setModuleDefault','55mYhvLj','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','/users/:id/activate','/cointopay/stats','cointopay','getPayoutById','AdminController','payment','json','/auth','expiryDays','activateUser','94IyDRqz','updateCustomerDataSchema','createUserSchema','/users/:id','/merchant-statistics','hasOwnProperty','/statistics','/logs/stats','post','domainMonitoringService','/payments/:id','amount','delete'];a19_0x5b71=function(){return _0x2b72d3;};return a19_0x5b71();}function a19_0x2633(_0x1ac1cf,_0x48943a){const _0x5b719b=a19_0x5b71();return a19_0x2633=function(_0x26334d,_0x59c86c){_0x26334d=_0x26334d-0x187;let _0x2c891c=_0x5b719b[_0x26334d];return _0x2c891c;},a19_0x2633(_0x1ac1cf,_0x48943a);}const a19_0x470fc1=a19_0x2633;(function(_0x40816b,_0x205de6){const _0x41dccf=a19_0x2633,_0x5b7470=_0x40816b();while(!![]){try{const _0x2ccc5c=parseInt(_0x41dccf(0x1d7))/0x1+-parseInt(_0x41dccf(0x1fd))/0x2*(parseInt(_0x41dccf(0x1e5))/0x3)+-parseInt(_0x41dccf(0x1a8))/0x4*(parseInt(_0x41dccf(0x1de))/0x5)+parseInt(_0x41dccf(0x1af))/0x6*(parseInt(_0x41dccf(0x1b5))/0x7)+parseInt(_0x41dccf(0x1da))/0x8*(parseInt(_0x41dccf(0x1dc))/0x9)+-parseInt(_0x41dccf(0x1d9))/0xa*(parseInt(_0x41dccf(0x1f1))/0xb)+parseInt(_0x41dccf(0x1c2))/0xc;if(_0x2ccc5c===_0x205de6)break;else _0x5b7470['push'](_0x5b7470['shift']());}catch(_0x5a2083){_0x5b7470['push'](_0x5b7470['shift']());}}}(a19_0x5b71,0xd5f96));var __createBinding=this&&this[a19_0x470fc1(0x19e)]||(Object[a19_0x470fc1(0x196)]?function(_0x488509,_0x395830,_0xe64b21,_0x59d3e4){const _0x2f82cf=a19_0x470fc1;if(_0x59d3e4===undefined)_0x59d3e4=_0xe64b21;var _0x12daab=Object['getOwnPropertyDescriptor'](_0x395830,_0xe64b21);(!_0x12daab||(_0x2f82cf(0x1ac)in _0x12daab?!_0x395830['__esModule']:_0x12daab[_0x2f82cf(0x19d)]||_0x12daab[_0x2f82cf(0x1cc)]))&&(_0x12daab={'enumerable':!![],'get':function(){return _0x395830[_0xe64b21];}}),Object[_0x2f82cf(0x1e0)](_0x488509,_0x59d3e4,_0x12daab);}:function(_0x404983,_0x38dabb,_0x2415a3,_0x26b374){if(_0x26b374===undefined)_0x26b374=_0x2415a3;_0x404983[_0x26b374]=_0x38dabb[_0x2415a3];}),__setModuleDefault=this&&this[a19_0x470fc1(0x1f0)]||(Object['create']?function(_0x3856bb,_0x344169){const _0x3eac85=a19_0x470fc1;Object[_0x3eac85(0x1e0)](_0x3856bb,_0x3eac85(0x1e2),{'enumerable':!![],'value':_0x344169});}:function(_0x445e58,_0x3af385){const _0x2ce071=a19_0x470fc1;_0x445e58[_0x2ce071(0x1e2)]=_0x3af385;}),__importStar=this&&this[a19_0x470fc1(0x1e9)]||(function(){var _0xbc74b7=function(_0x4dc809){const _0x2614fb=a19_0x2633;return _0xbc74b7=Object[_0x2614fb(0x1db)]||function(_0x5a7641){const _0x3b085b=_0x2614fb;var _0x46d43d=[];for(var _0x3f502a in _0x5a7641)if(Object[_0x3b085b(0x1d0)][_0x3b085b(0x18b)][_0x3b085b(0x1d4)](_0x5a7641,_0x3f502a))_0x46d43d[_0x46d43d['length']]=_0x3f502a;return _0x46d43d;},_0xbc74b7(_0x4dc809);};return function(_0x2ce468){const _0x34e38a=a19_0x2633;if(_0x2ce468&&_0x2ce468[_0x34e38a(0x1b6)])return _0x2ce468;var _0x14a29e={};if(_0x2ce468!=null){for(var _0x54c25d=_0xbc74b7(_0x2ce468),_0x318bfb=0x0;_0x318bfb<_0x54c25d['length'];_0x318bfb++)if(_0x54c25d[_0x318bfb]!==_0x34e38a(0x1e2))__createBinding(_0x14a29e,_0x2ce468,_0x54c25d[_0x318bfb]);}return __setModuleDefault(_0x14a29e,_0x2ce468),_0x14a29e;};}());Object[a19_0x470fc1(0x1e0)](exports,'__esModule',{'value':!![]});const express_1=require('express'),adminController_1=require(a19_0x470fc1(0x1ae)),validation_1=require(a19_0x470fc1(0x1c0)),auth_1=require(a19_0x470fc1(0x1e6)),loggerService_1=require('../services/loggerService'),coinToPayStatusService_1=require(a19_0x470fc1(0x1b0)),domainMonitoringService_1=require(a19_0x470fc1(0x19a)),router=(0x0,express_1[a19_0x470fc1(0x1ef)])(),adminController=new adminController_1[(a19_0x470fc1(0x1f7))]();router[a19_0x470fc1(0x1d5)](auth_1['authenticateToken'],auth_1[a19_0x470fc1(0x1b8)]),router['get'](a19_0x470fc1(0x1fa),adminController[a19_0x470fc1(0x1d8)]),router[a19_0x470fc1(0x1ac)](a19_0x470fc1(0x18c),adminController[a19_0x470fc1(0x1e7)]),router[a19_0x470fc1(0x1ac)](a19_0x470fc1(0x18a),adminController['getMerchantStatistics']),router['get'](a19_0x470fc1(0x19b),adminController[a19_0x470fc1(0x1d1)]),router[a19_0x470fc1(0x1ac)](a19_0x470fc1(0x1a3),adminController['getMerchantsAwaitingPayout']),router[a19_0x470fc1(0x18e)]('/payout',(0x0,validation_1[a19_0x470fc1(0x1ed)])(validation_1[a19_0x470fc1(0x1cb)]),adminController['createPayout']),router['get'](a19_0x470fc1(0x198),adminController[a19_0x470fc1(0x1ee)]),router[a19_0x470fc1(0x1ac)]('/payouts/:id',adminController[a19_0x470fc1(0x1f6)]),router[a19_0x470fc1(0x192)](a19_0x470fc1(0x1a6),adminController['deletePayout']),router[a19_0x470fc1(0x1ac)]('/payments',adminController[a19_0x470fc1(0x1a2)]),router[a19_0x470fc1(0x1ac)](a19_0x470fc1(0x190),adminController[a19_0x470fc1(0x1d2)]),router[a19_0x470fc1(0x1e1)](a19_0x470fc1(0x190),adminController['updatePayment']),router[a19_0x470fc1(0x1e1)]('/payments/:id/customer',(0x0,validation_1[a19_0x470fc1(0x1ed)])(validation_1[a19_0x470fc1(0x187)]),adminController['updateCustomerData']),router[a19_0x470fc1(0x1ac)](a19_0x470fc1(0x1e8),adminController[a19_0x470fc1(0x1ad)]),router[a19_0x470fc1(0x1ac)](a19_0x470fc1(0x189),adminController['getUserById']),router['post']('/users',(0x0,validation_1[a19_0x470fc1(0x1ed)])(validation_1[a19_0x470fc1(0x188)]),adminController[a19_0x470fc1(0x1a0)]),router[a19_0x470fc1(0x1e1)](a19_0x470fc1(0x189),(0x0,validation_1[a19_0x470fc1(0x1ed)])(validation_1[a19_0x470fc1(0x19c)]),adminController[a19_0x470fc1(0x1b1)]),router[a19_0x470fc1(0x192)](a19_0x470fc1(0x189),adminController[a19_0x470fc1(0x193)]),router['post'](a19_0x470fc1(0x1ea),adminController['suspendUser']),router[a19_0x470fc1(0x18e)](a19_0x470fc1(0x1f3),adminController[a19_0x470fc1(0x1fc)]),router[a19_0x470fc1(0x1ac)](a19_0x470fc1(0x18d),(_0x448d02,_0x779461)=>{const _0x41c65f=a19_0x470fc1;try{const _0x336ce2=loggerService_1[_0x41c65f(0x1b9)][_0x41c65f(0x1ca)]();_0x779461[_0x41c65f(0x1f9)]({'success':!![],'result':_0x336ce2});}catch(_0x5e7461){_0x779461[_0x41c65f(0x1c4)](0x1f4)[_0x41c65f(0x1f9)]({'success':![],'message':_0x41c65f(0x194)});}}),router[a19_0x470fc1(0x18e)]('/logs/clean',(_0x3dbbc3,_0x3560b9)=>{const _0x35b9a7=a19_0x470fc1;try{const {daysToKeep:daysToKeep=0x1e}=_0x3dbbc3[_0x35b9a7(0x1c7)];loggerService_1[_0x35b9a7(0x1b9)][_0x35b9a7(0x1a4)](daysToKeep),_0x3560b9[_0x35b9a7(0x1f9)]({'success':!![],'message':_0x35b9a7(0x1c8)+daysToKeep+_0x35b9a7(0x1ab)});}catch(_0x465fed){_0x3560b9['status'](0x1f4)['json']({'success':![],'message':_0x35b9a7(0x197)});}}),router[a19_0x470fc1(0x18e)](a19_0x470fc1(0x199),async(_0xb9fd87,_0x52aef0)=>{const _0x88dd92=a19_0x470fc1;try{const {paymentId:_0x2e4508}=_0xb9fd87[_0x88dd92(0x1bb)];console['log'](_0x88dd92(0x1c9)+_0x2e4508),await coinToPayStatusService_1[_0x88dd92(0x1bf)][_0x88dd92(0x1c6)](_0x2e4508),_0x52aef0[_0x88dd92(0x1f9)]({'success':!![],'message':_0x88dd92(0x1eb)});}catch(_0x316e32){console['error']('‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20'+_0xb9fd87[_0x88dd92(0x1bb)][_0x88dd92(0x1b7)]+':',_0x316e32),_0x52aef0[_0x88dd92(0x1c4)](0x1f4)['json']({'success':![],'message':_0x316e32 instanceof Error?_0x316e32[_0x88dd92(0x1a7)]:'Failed\x20to\x20check\x20CoinToPay\x20payment\x20status'});}}),router[a19_0x470fc1(0x1ac)](a19_0x470fc1(0x1f4),(_0x32c03c,_0x2cd0e4)=>{const _0x8579a5=a19_0x470fc1;try{const _0x29a8f0=coinToPayStatusService_1[_0x8579a5(0x1bf)][_0x8579a5(0x1d3)]();_0x2cd0e4['json']({'success':!![],'result':{..._0x29a8f0,'description':'CoinToPay\x20automatic\x20status\x20checking\x20service','statusMapping':{'Paid':'PAID','Awaiting\x20Fiat':_0x8579a5(0x1ba),'waiting':_0x8579a5(0x1ba),'expired':_0x8579a5(0x1be),'failed':'FAILED'},'autoExpiryNote':_0x8579a5(0x1d6)+_0x29a8f0[_0x8579a5(0x1fb)]+_0x8579a5(0x1dd),'individualTimersNote':_0x8579a5(0x1bd)}});}catch(_0x329821){_0x2cd0e4[_0x8579a5(0x1c4)](0x1f4)[_0x8579a5(0x1f9)]({'success':![],'message':_0x8579a5(0x1f2)});}}),router[a19_0x470fc1(0x1ac)](a19_0x470fc1(0x1a9),async(_0x13bebd,_0x261342)=>{const _0xd7ccbc=a19_0x470fc1;try{const {paymentId:_0x534dc4}=_0x13bebd[_0xd7ccbc(0x1bb)],_0x3e083f=coinToPayStatusService_1['coinToPayStatusService']['getPaymentTimerInfo'](_0x534dc4),_0x5672d2=(await Promise[_0xd7ccbc(0x1b4)]()[_0xd7ccbc(0x1e4)](()=>__importStar(require(_0xd7ccbc(0x1e3)))))['default'],_0x1e3904=await _0x5672d2[_0xd7ccbc(0x1f8)][_0xd7ccbc(0x1aa)]({'where':{'id':_0x534dc4},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x1e3904)return _0x261342[_0xd7ccbc(0x1c4)](0x194)[_0xd7ccbc(0x1f9)]({'success':![],'message':'Payment\x20not\x20found'});_0x261342[_0xd7ccbc(0x1f9)]({'success':!![],'result':{'payment':{'id':_0x1e3904['id'],'gateway':_0x1e3904[_0xd7ccbc(0x1c1)],'gatewayPaymentId':_0x1e3904[_0xd7ccbc(0x1cf)],'status':_0x1e3904['status'],'amount':_0x1e3904[_0xd7ccbc(0x191)],'currency':_0x1e3904[_0xd7ccbc(0x1b3)],'createdAt':_0x1e3904[_0xd7ccbc(0x19f)],'updatedAt':_0x1e3904[_0xd7ccbc(0x195)],'shop':_0x1e3904[_0xd7ccbc(0x1c5)]},'timers':_0x3e083f,'isCoinToPay':_0x1e3904[_0xd7ccbc(0x1c1)]===_0xd7ccbc(0x1f5),'ageInMinutes':Math[_0xd7ccbc(0x1b2)]((Date['now']()-_0x1e3904['createdAt']['getTime']())/(0x3e8*0x3c))}});}catch(_0xf3fdc2){_0x261342['status'](0x1f4)[_0xd7ccbc(0x1f9)]({'success':![],'message':_0xf3fdc2 instanceof Error?_0xf3fdc2['message']:_0xd7ccbc(0x1a1)});}}),router[a19_0x470fc1(0x1ac)](a19_0x470fc1(0x1ec),(_0x357bf2,_0x472ffa)=>{const _0x5559cd=a19_0x470fc1;try{const _0x4785f7=domainMonitoringService_1[_0x5559cd(0x18f)][_0x5559cd(0x1df)]();_0x472ffa['json']({'success':!![],'result':{..._0x4785f7,'description':_0x5559cd(0x1c3),'behavior':_0x5559cd(0x1bc),'encoding':_0x5559cd(0x1ce)}});}catch(_0x56291b){_0x472ffa[_0x5559cd(0x1c4)](0x1f4)[_0x5559cd(0x1f9)]({'success':![],'message':'Failed\x20to\x20get\x20domain\x20monitoring\x20statistics'});}}),router['post']('/domain-monitoring/check',async(_0x2dcae4,_0xc3171d)=>{const _0x4da43d=a19_0x470fc1;try{const _0x20809c=await domainMonitoringService_1[_0x4da43d(0x18f)][_0x4da43d(0x1a5)]();_0xc3171d[_0x4da43d(0x1f9)]({'success':!![],'result':{'domainAvailable':_0x20809c,'message':_0x20809c?'Domain\x20is\x20responding\x20correctly':'Domain\x20check\x20failed','timestamp':new Date()[_0x4da43d(0x1cd)]()}});}catch(_0x216d26){_0xc3171d[_0x4da43d(0x1c4)](0x1f4)[_0x4da43d(0x1f9)]({'success':![],'message':_0x216d26 instanceof Error?_0x216d26[_0x4da43d(0x1a7)]:'Failed\x20to\x20perform\x20manual\x20domain\x20check'});}}),exports[a19_0x470fc1(0x1e2)]=router;