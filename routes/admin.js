'use strict';const a19_0x5dafad=a19_0x1032;(function(_0x2f54f0,_0x3d8904){const _0x4ba3b3=a19_0x1032,_0x313aac=_0x2f54f0();while(!![]){try{const _0x33101f=-parseInt(_0x4ba3b3(0x231))/0x1+-parseInt(_0x4ba3b3(0x1c7))/0x2*(parseInt(_0x4ba3b3(0x1ee))/0x3)+-parseInt(_0x4ba3b3(0x1d2))/0x4+-parseInt(_0x4ba3b3(0x224))/0x5*(parseInt(_0x4ba3b3(0x238))/0x6)+parseInt(_0x4ba3b3(0x20b))/0x7+parseInt(_0x4ba3b3(0x1c5))/0x8+parseInt(_0x4ba3b3(0x20f))/0x9;if(_0x33101f===_0x3d8904)break;else _0x313aac['push'](_0x313aac['shift']());}catch(_0x59f1d5){_0x313aac['push'](_0x313aac['shift']());}}}(a19_0x1674,0xb6c3f));function a19_0x1032(_0x226fc3,_0x1f6188){const _0x167499=a19_0x1674();return a19_0x1032=function(_0x103267,_0x3d8e0c){_0x103267=_0x103267-0x1c1;let _0x3859c6=_0x167499[_0x103267];return _0x3859c6;},a19_0x1032(_0x226fc3,_0x1f6188);}var __createBinding=this&&this[a19_0x5dafad(0x237)]||(Object['create']?function(_0x2f8874,_0x55678d,_0x44a8c7,_0x97cb22){const _0x5a5092=a19_0x5dafad;if(_0x97cb22===undefined)_0x97cb22=_0x44a8c7;var _0x41d3b7=Object[_0x5a5092(0x216)](_0x55678d,_0x44a8c7);(!_0x41d3b7||(_0x5a5092(0x211)in _0x41d3b7?!_0x55678d['__esModule']:_0x41d3b7['writable']||_0x41d3b7[_0x5a5092(0x1f6)]))&&(_0x41d3b7={'enumerable':!![],'get':function(){return _0x55678d[_0x44a8c7];}}),Object['defineProperty'](_0x2f8874,_0x97cb22,_0x41d3b7);}:function(_0x112024,_0x36f14f,_0x13cbfd,_0x4322d6){if(_0x4322d6===undefined)_0x4322d6=_0x13cbfd;_0x112024[_0x4322d6]=_0x36f14f[_0x13cbfd];}),__setModuleDefault=this&&this[a19_0x5dafad(0x210)]||(Object[a19_0x5dafad(0x1ea)]?function(_0x144ee7,_0x25777d){const _0x44a751=a19_0x5dafad;Object[_0x44a751(0x20d)](_0x144ee7,_0x44a751(0x1c4),{'enumerable':!![],'value':_0x25777d});}:function(_0x24d981,_0xf5621f){_0x24d981['default']=_0xf5621f;}),__importStar=this&&this[a19_0x5dafad(0x1d3)]||(function(){var _0x2e7981=function(_0x506dfa){return _0x2e7981=Object['getOwnPropertyNames']||function(_0x5ee5f2){const _0x2dfbc9=a19_0x1032;var _0x53f60a=[];for(var _0x3a1db3 in _0x5ee5f2)if(Object[_0x2dfbc9(0x227)][_0x2dfbc9(0x1da)][_0x2dfbc9(0x1f9)](_0x5ee5f2,_0x3a1db3))_0x53f60a[_0x53f60a['length']]=_0x3a1db3;return _0x53f60a;},_0x2e7981(_0x506dfa);};return function(_0x167819){const _0x21c8b2=a19_0x1032;if(_0x167819&&_0x167819[_0x21c8b2(0x1e9)])return _0x167819;var _0x38faf5={};if(_0x167819!=null){for(var _0x3d1b8f=_0x2e7981(_0x167819),_0x220e37=0x0;_0x220e37<_0x3d1b8f[_0x21c8b2(0x1d0)];_0x220e37++)if(_0x3d1b8f[_0x220e37]!==_0x21c8b2(0x1c4))__createBinding(_0x38faf5,_0x167819,_0x3d1b8f[_0x220e37]);}return __setModuleDefault(_0x38faf5,_0x167819),_0x38faf5;};}());Object[a19_0x5dafad(0x20d)](exports,a19_0x5dafad(0x1e9),{'value':!![]});const express_1=require(a19_0x5dafad(0x1c3)),adminController_1=require('../controllers/adminController'),validation_1=require(a19_0x5dafad(0x1e4)),auth_1=require(a19_0x5dafad(0x21a)),loggerService_1=require('../services/loggerService'),coinToPayStatusService_1=require('../services/coinToPayStatusService'),domainMonitoringService_1=require('../services/domainMonitoringService'),router=(0x0,express_1[a19_0x5dafad(0x1e3)])(),adminController=new adminController_1[(a19_0x5dafad(0x1d9))]();router['use'](auth_1['authenticateToken'],auth_1[a19_0x5dafad(0x1eb)]),router['get'](a19_0x5dafad(0x230),adminController[a19_0x5dafad(0x1f4)]),router[a19_0x5dafad(0x211)](a19_0x5dafad(0x21e),adminController[a19_0x5dafad(0x1dd)]),router[a19_0x5dafad(0x211)]('/merchant-statistics',adminController[a19_0x5dafad(0x21b)]),router['get'](a19_0x5dafad(0x1c6),adminController[a19_0x5dafad(0x1e8)]),router[a19_0x5dafad(0x211)](a19_0x5dafad(0x1e5),adminController[a19_0x5dafad(0x1d4)]),router[a19_0x5dafad(0x211)](a19_0x5dafad(0x223),adminController['getMerchantsSelection']),router[a19_0x5dafad(0x1f3)]('/payout',(0x0,validation_1[a19_0x5dafad(0x1fc)])(validation_1[a19_0x5dafad(0x1e1)]),adminController[a19_0x5dafad(0x233)]),router['get'](a19_0x5dafad(0x1f2),adminController[a19_0x5dafad(0x1f0)]),router[a19_0x5dafad(0x211)](a19_0x5dafad(0x218),adminController[a19_0x5dafad(0x22e)]),router[a19_0x5dafad(0x1e7)](a19_0x5dafad(0x218),adminController[a19_0x5dafad(0x220)]),router[a19_0x5dafad(0x211)](a19_0x5dafad(0x228),adminController[a19_0x5dafad(0x209)]),router[a19_0x5dafad(0x211)]('/payments/:id',adminController[a19_0x5dafad(0x1fa)]),router['put'](a19_0x5dafad(0x1f5),adminController[a19_0x5dafad(0x1d6)]),router[a19_0x5dafad(0x203)](a19_0x5dafad(0x202),(0x0,validation_1[a19_0x5dafad(0x1fc)])(validation_1[a19_0x5dafad(0x225)]),adminController[a19_0x5dafad(0x20a)]),router['get']('/users',adminController[a19_0x5dafad(0x217)]),router[a19_0x5dafad(0x211)](a19_0x5dafad(0x229),adminController[a19_0x5dafad(0x208)]),router['post'](a19_0x5dafad(0x1cc),(0x0,validation_1[a19_0x5dafad(0x1fc)])(validation_1['createUserSchema']),adminController[a19_0x5dafad(0x1c9)]),router[a19_0x5dafad(0x203)]('/users/:id',(0x0,validation_1[a19_0x5dafad(0x1fc)])(validation_1[a19_0x5dafad(0x200)]),adminController['updateUser']),router[a19_0x5dafad(0x1e7)](a19_0x5dafad(0x229),adminController[a19_0x5dafad(0x1dc)]),router['post']('/users/:id/suspend',adminController['suspendUser']),router['post'](a19_0x5dafad(0x234),adminController['activateUser']),router[a19_0x5dafad(0x211)](a19_0x5dafad(0x204),(_0x20c257,_0x3d9ab7)=>{const _0x406936=a19_0x5dafad;try{const _0x251818=loggerService_1[_0x406936(0x1de)][_0x406936(0x1e2)]();_0x3d9ab7['json']({'success':!![],'result':_0x251818});}catch(_0x586b86){_0x3d9ab7[_0x406936(0x222)](0x1f4)['json']({'success':![],'message':'Failed\x20to\x20get\x20log\x20statistics'});}}),router['post'](a19_0x5dafad(0x21d),(_0x55d542,_0x2c8e70)=>{const _0x4ad0ec=a19_0x5dafad;try{const {daysToKeep:daysToKeep=0x1e}=_0x55d542[_0x4ad0ec(0x1cb)];loggerService_1[_0x4ad0ec(0x1de)][_0x4ad0ec(0x1d1)](daysToKeep),_0x2c8e70[_0x4ad0ec(0x232)]({'success':!![],'message':'Old\x20logs\x20cleaned\x20(kept\x20last\x20'+daysToKeep+'\x20days)'});}catch(_0x5375d1){_0x2c8e70['status'](0x1f4)[_0x4ad0ec(0x232)]({'success':![],'message':_0x4ad0ec(0x1ef)});}}),router[a19_0x5dafad(0x1f3)](a19_0x5dafad(0x22c),async(_0x15bdda,_0x1f6c94)=>{const _0x356f4a=a19_0x5dafad;try{const {paymentId:_0x3c5bde}=_0x15bdda[_0x356f4a(0x1ce)];console[_0x356f4a(0x1c8)](_0x356f4a(0x1c1)+_0x3c5bde),await coinToPayStatusService_1[_0x356f4a(0x1f8)][_0x356f4a(0x21f)](_0x3c5bde),_0x1f6c94[_0x356f4a(0x232)]({'success':!![],'message':_0x356f4a(0x219)});}catch(_0x4a92dc){console['error'](_0x356f4a(0x22f)+_0x15bdda[_0x356f4a(0x1ce)][_0x356f4a(0x1db)]+':',_0x4a92dc),_0x1f6c94['status'](0x1f4)['json']({'success':![],'message':_0x4a92dc instanceof Error?_0x4a92dc['message']:_0x356f4a(0x1cf)});}}),router[a19_0x5dafad(0x211)](a19_0x5dafad(0x1e6),(_0x2d01c6,_0x334ab4)=>{const _0x51cd02=a19_0x5dafad;try{const _0x5923c9=coinToPayStatusService_1['coinToPayStatusService'][_0x51cd02(0x1fb)]();_0x334ab4[_0x51cd02(0x232)]({'success':!![],'result':{..._0x5923c9,'description':_0x51cd02(0x215),'statusMapping':{'Paid':_0x51cd02(0x1e0),'Awaiting\x20Fiat':'PENDING','waiting':_0x51cd02(0x1ed),'expired':'EXPIRED','failed':_0x51cd02(0x1cd)},'autoExpiryNote':_0x51cd02(0x212)+_0x5923c9[_0x51cd02(0x1fe)]+'\x20days\x20if\x20not\x20paid','individualTimersNote':_0x51cd02(0x1f1)}});}catch(_0x3b9351){_0x334ab4[_0x51cd02(0x222)](0x1f4)[_0x51cd02(0x232)]({'success':![],'message':_0x51cd02(0x207)});}}),router[a19_0x5dafad(0x211)]('/cointopay/payment/:paymentId',async(_0x34aae4,_0x3c87a5)=>{const _0x473df1=a19_0x5dafad;try{const {paymentId:_0x59dfed}=_0x34aae4[_0x473df1(0x1ce)],_0x38ac6c=coinToPayStatusService_1[_0x473df1(0x1f8)][_0x473df1(0x1d7)](_0x59dfed),_0x47c67d=(await Promise[_0x473df1(0x1fd)]()[_0x473df1(0x1ca)](()=>__importStar(require(_0x473df1(0x236)))))[_0x473df1(0x1c4)],_0x40d136=await _0x47c67d['payment'][_0x473df1(0x1ec)]({'where':{'id':_0x59dfed},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x40d136)return _0x3c87a5[_0x473df1(0x222)](0x194)[_0x473df1(0x232)]({'success':![],'message':_0x473df1(0x22b)});_0x3c87a5[_0x473df1(0x232)]({'success':!![],'result':{'payment':{'id':_0x40d136['id'],'gateway':_0x40d136[_0x473df1(0x20c)],'gatewayPaymentId':_0x40d136[_0x473df1(0x1c2)],'status':_0x40d136[_0x473df1(0x222)],'amount':_0x40d136[_0x473df1(0x201)],'currency':_0x40d136['currency'],'createdAt':_0x40d136[_0x473df1(0x1d5)],'updatedAt':_0x40d136[_0x473df1(0x205)],'shop':_0x40d136[_0x473df1(0x213)]},'timers':_0x38ac6c,'isCoinToPay':_0x40d136[_0x473df1(0x20c)]===_0x473df1(0x206),'ageInMinutes':Math[_0x473df1(0x1df)]((Date[_0x473df1(0x221)]()-_0x40d136['createdAt'][_0x473df1(0x22d)]())/(0x3e8*0x3c))}});}catch(_0x3d3e3b){_0x3c87a5[_0x473df1(0x222)](0x1f4)['json']({'success':![],'message':_0x3d3e3b instanceof Error?_0x3d3e3b[_0x473df1(0x20e)]:'Failed\x20to\x20get\x20payment\x20information'});}}),router[a19_0x5dafad(0x211)](a19_0x5dafad(0x21c),(_0x491dea,_0x5d78a8)=>{const _0xbbadc7=a19_0x5dafad;try{const _0xfcc072=domainMonitoringService_1[_0xbbadc7(0x1ff)][_0xbbadc7(0x1d8)]();_0x5d78a8[_0xbbadc7(0x232)]({'success':!![],'result':{..._0xfcc072,'description':_0xbbadc7(0x214),'behavior':_0xbbadc7(0x226),'encoding':_0xbbadc7(0x22a)}});}catch(_0x4eed10){_0x5d78a8[_0xbbadc7(0x222)](0x1f4)[_0xbbadc7(0x232)]({'success':![],'message':_0xbbadc7(0x1f7)});}}),router[a19_0x5dafad(0x1f3)]('/domain-monitoring/check',async(_0x59244b,_0x10ab8d)=>{const _0x5823c9=a19_0x5dafad;try{const _0x51a1bf=await domainMonitoringService_1[_0x5823c9(0x1ff)]['manualCheck']();_0x10ab8d['json']({'success':!![],'result':{'domainAvailable':_0x51a1bf,'message':_0x51a1bf?'Domain\x20is\x20responding\x20correctly':_0x5823c9(0x235),'timestamp':new Date()['toISOString']()}});}catch(_0x32fe82){_0x10ab8d[_0x5823c9(0x222)](0x1f4)[_0x5823c9(0x232)]({'success':![],'message':_0x32fe82 instanceof Error?_0x32fe82['message']:'Failed\x20to\x20perform\x20manual\x20domain\x20check'});}}),exports['default']=router;function a19_0x1674(){const _0xce2a5b=['getUserById','getPayments','updateCustomerData','8789998ukhwOm','gateway','defineProperty','message','34557138YdxLvw','__setModuleDefault','get','Payments\x20automatically\x20expire\x20after\x20','shop','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','CoinToPay\x20automatic\x20status\x20checking\x20service','getOwnPropertyDescriptor','getUsers','/payouts/:id','CoinToPay\x20payment\x20status\x20checked\x20successfully','../middleware/auth','getMerchantStatistics','/domain-monitoring/stats','/logs/clean','/statistics','checkPaymentById','deletePayout','now','status','/merchants/selection','529110gefXvB','updateCustomerDataSchema','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','prototype','/payments','/users/:id','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','Payment\x20not\x20found','/cointopay/check/:paymentId','getTime','getPayoutById','❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','/auth','1416244UhUxaR','json','createPayout','/users/:id/activate','Domain\x20check\x20failed','../config/database','__createBinding','84fktxgO','🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','gatewayPaymentId','express','default','4513408yLixFo','/payout/stats','183842QBGDsG','log','createUser','then','body','/users','FAILED','params','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','length','cleanOldLogs','5479064LWIwBi','__importStar','getMerchantsAwaitingPayout','createdAt','updatePayment','getPaymentTimerInfo','getMonitoringStats','AdminController','hasOwnProperty','paymentId','deleteUser','getStatistics','loggerService','floor','PAID','createPayoutSchema','getLogStats','Router','../middleware/validation','/payout/merchants','/cointopay/stats','delete','getPayoutStats','__esModule','create','requireAdmin','findUnique','PENDING','21jcHeXs','Failed\x20to\x20clean\x20old\x20logs','getPayouts','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','/payouts','post','checkAuth','/payments/:id','configurable','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','coinToPayStatusService','call','getPaymentById','getServiceStats','validate','resolve','expiryDays','domainMonitoringService','updateUserSchema','amount','/payments/:id/customer','put','/logs/stats','updatedAt','cointopay','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics'];a19_0x1674=function(){return _0xce2a5b;};return a19_0x1674();}