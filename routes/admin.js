'use strict';function a18_0x46d0(_0x5d19ff,_0x533f06){const _0x30de6a=a18_0x30de();return a18_0x46d0=function(_0x46d065,_0x3c7f2e){_0x46d065=_0x46d065-0x105;let _0x72bf82=_0x30de6a[_0x46d065];return _0x72bf82;},a18_0x46d0(_0x5d19ff,_0x533f06);}const a18_0x14f87e=a18_0x46d0;(function(_0xc49d77,_0x3232ea){const _0x5d5410=a18_0x46d0,_0x2dc30a=_0xc49d77();while(!![]){try{const _0x514358=-parseInt(_0x5d5410(0x150))/0x1*(-parseInt(_0x5d5410(0x10a))/0x2)+parseInt(_0x5d5410(0x16c))/0x3+parseInt(_0x5d5410(0x153))/0x4*(-parseInt(_0x5d5410(0x172))/0x5)+parseInt(_0x5d5410(0x11c))/0x6+-parseInt(_0x5d5410(0x113))/0x7+-parseInt(_0x5d5410(0x117))/0x8+parseInt(_0x5d5410(0x125))/0x9;if(_0x514358===_0x3232ea)break;else _0x2dc30a['push'](_0x2dc30a['shift']());}catch(_0x20e756){_0x2dc30a['push'](_0x2dc30a['shift']());}}}(a18_0x30de,0x7afd1));function a18_0x30de(){const _0x45825b=['expiryDays','/payments','EXPIRED','updateUserSchema','findUnique','createPayout','\x20days\x20if\x20not\x20paid','createUserSchema','Payment\x20not\x20found','/logs/stats','getPayoutStats','PAID','configurable','domainMonitoringService','amount','12379LpfVQv','getPaymentTimerInfo','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','3907824JOcNwT','get','Failed\x20to\x20clean\x20old\x20logs','getPayouts','cointopay','updatedAt','coinToPayStatusService','../services/loggerService','getMerchantStatistics','now','resolve','/domain-monitoring/stats','../services/domainMonitoringService','getLogStats','Failed\x20to\x20perform\x20manual\x20domain\x20check','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','/users/:id/activate','shop','/payout/stats','deletePayout','getOwnPropertyDescriptor','deleteUser','activateUser','message','defineProperty','763326kxdyAp','status','log','Old\x20logs\x20cleaned\x20(kept\x20last\x20','delete','create','5nimJMO','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','manualCheck','/payout','cleanOldLogs','../middleware/validation','CoinToPay\x20automatic\x20status\x20checking\x20service','/users','hasOwnProperty','/cointopay/payment/:paymentId','/payments/:id','checkAuth','Failed\x20to\x20get\x20log\x20statistics','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','call','28tDHuGV','/users/:id','getTime','prototype','createUser','/auth','updateCustomerData','body','validate','5026994BnHgvK','post','/logs/clean','CoinToPay\x20payment\x20status\x20checked\x20successfully','7722576McrBEo','getMonitoringStats','\x20days)','getUserById','__importStar','3973728UKeoeT','gateway','length','authenticateToken','Domain\x20check\x20failed','paymentId','put','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','/payouts/:id','18667305eXkVnw','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','loggerService','/payments/:id/customer','/merchant-statistics','PENDING','json','default','/cointopay/check/:paymentId','__createBinding','updateUser','../services/coinToPayStatusService','/payout/merchants','createdAt','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','params','__esModule','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','getStatistics','FAILED','Router','/domain-monitoring/check','gatewayPaymentId','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','getServiceStats','suspendUser','getMerchantsAwaitingPayout','floor'];a18_0x30de=function(){return _0x45825b;};return a18_0x30de();}var __createBinding=this&&this[a18_0x14f87e(0x12e)]||(Object['create']?function(_0x5a0cf8,_0x32be35,_0x387fc3,_0xb182fd){const _0x4ea070=a18_0x14f87e;if(_0xb182fd===undefined)_0xb182fd=_0x387fc3;var _0x341140=Object[_0x4ea070(0x167)](_0x32be35,_0x387fc3);(!_0x341140||(_0x4ea070(0x154)in _0x341140?!_0x32be35[_0x4ea070(0x135)]:_0x341140['writable']||_0x341140[_0x4ea070(0x14d)]))&&(_0x341140={'enumerable':!![],'get':function(){return _0x32be35[_0x387fc3];}}),Object[_0x4ea070(0x16b)](_0x5a0cf8,_0xb182fd,_0x341140);}:function(_0x529165,_0x1a1993,_0x16a006,_0x1b2297){if(_0x1b2297===undefined)_0x1b2297=_0x16a006;_0x529165[_0x1b2297]=_0x1a1993[_0x16a006];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a18_0x14f87e(0x171)]?function(_0x45722c,_0x390f41){const _0xb894d=a18_0x14f87e;Object['defineProperty'](_0x45722c,_0xb894d(0x12c),{'enumerable':!![],'value':_0x390f41});}:function(_0x560df,_0x320107){const _0xb02892=a18_0x14f87e;_0x560df[_0xb02892(0x12c)]=_0x320107;}),__importStar=this&&this[a18_0x14f87e(0x11b)]||(function(){var _0x1ba156=function(_0x10fe74){return _0x1ba156=Object['getOwnPropertyNames']||function(_0x35b120){const _0x116e25=a18_0x46d0;var _0x3dfb20=[];for(var _0x37b897 in _0x35b120)if(Object[_0x116e25(0x10d)][_0x116e25(0x17a)][_0x116e25(0x109)](_0x35b120,_0x37b897))_0x3dfb20[_0x3dfb20[_0x116e25(0x11e)]]=_0x37b897;return _0x3dfb20;},_0x1ba156(_0x10fe74);};return function(_0x148e9f){const _0x446158=a18_0x46d0;if(_0x148e9f&&_0x148e9f[_0x446158(0x135)])return _0x148e9f;var _0x273739={};if(_0x148e9f!=null){for(var _0x283a54=_0x1ba156(_0x148e9f),_0x5c05d9=0x0;_0x5c05d9<_0x283a54['length'];_0x5c05d9++)if(_0x283a54[_0x5c05d9]!=='default')__createBinding(_0x273739,_0x148e9f,_0x283a54[_0x5c05d9]);}return __setModuleDefault(_0x273739,_0x148e9f),_0x273739;};}());Object[a18_0x14f87e(0x16b)](exports,a18_0x14f87e(0x135),{'value':!![]});const express_1=require('express'),adminController_1=require('../controllers/adminController'),validation_1=require(a18_0x14f87e(0x177)),auth_1=require('../middleware/auth'),loggerService_1=require(a18_0x14f87e(0x15a)),coinToPayStatusService_1=require(a18_0x14f87e(0x130)),domainMonitoringService_1=require(a18_0x14f87e(0x15f)),router=(0x0,express_1[a18_0x14f87e(0x139)])(),adminController=new adminController_1['AdminController']();router['use'](auth_1[a18_0x14f87e(0x11f)],auth_1['requireAdmin']),router[a18_0x14f87e(0x154)](a18_0x14f87e(0x10f),adminController[a18_0x14f87e(0x106)]),router[a18_0x14f87e(0x154)]('/statistics',adminController[a18_0x14f87e(0x137)]),router[a18_0x14f87e(0x154)](a18_0x14f87e(0x129),adminController[a18_0x14f87e(0x15b)]),router[a18_0x14f87e(0x154)](a18_0x14f87e(0x165),adminController[a18_0x14f87e(0x14b)]),router[a18_0x14f87e(0x154)](a18_0x14f87e(0x131),adminController[a18_0x14f87e(0x13f)]),router['post'](a18_0x14f87e(0x175),(0x0,validation_1['validate'])(validation_1['createPayoutSchema']),adminController[a18_0x14f87e(0x146)]),router[a18_0x14f87e(0x154)]('/payouts',adminController[a18_0x14f87e(0x156)]),router[a18_0x14f87e(0x154)](a18_0x14f87e(0x124),adminController['getPayoutById']),router[a18_0x14f87e(0x170)](a18_0x14f87e(0x124),adminController[a18_0x14f87e(0x166)]),router[a18_0x14f87e(0x154)](a18_0x14f87e(0x142),adminController['getPayments']),router[a18_0x14f87e(0x154)](a18_0x14f87e(0x105),adminController['getPaymentById']),router[a18_0x14f87e(0x122)](a18_0x14f87e(0x105),adminController['updatePayment']),router[a18_0x14f87e(0x122)](a18_0x14f87e(0x128),(0x0,validation_1['validate'])(validation_1['updateCustomerDataSchema']),adminController[a18_0x14f87e(0x110)]),router[a18_0x14f87e(0x154)](a18_0x14f87e(0x179),adminController['getUsers']),router[a18_0x14f87e(0x154)](a18_0x14f87e(0x10b),adminController[a18_0x14f87e(0x11a)]),router[a18_0x14f87e(0x114)](a18_0x14f87e(0x179),(0x0,validation_1['validate'])(validation_1[a18_0x14f87e(0x148)]),adminController[a18_0x14f87e(0x10e)]),router[a18_0x14f87e(0x122)](a18_0x14f87e(0x10b),(0x0,validation_1[a18_0x14f87e(0x112)])(validation_1[a18_0x14f87e(0x144)]),adminController[a18_0x14f87e(0x12f)]),router[a18_0x14f87e(0x170)]('/users/:id',adminController[a18_0x14f87e(0x168)]),router[a18_0x14f87e(0x114)]('/users/:id/suspend',adminController[a18_0x14f87e(0x13e)]),router['post'](a18_0x14f87e(0x163),adminController[a18_0x14f87e(0x169)]),router[a18_0x14f87e(0x154)](a18_0x14f87e(0x14a),(_0x2a33c6,_0x88091c)=>{const _0x198c93=a18_0x14f87e;try{const _0x2aaae6=loggerService_1[_0x198c93(0x127)][_0x198c93(0x160)]();_0x88091c['json']({'success':!![],'result':_0x2aaae6});}catch(_0x3a670a){_0x88091c['status'](0x1f4)[_0x198c93(0x12b)]({'success':![],'message':_0x198c93(0x107)});}}),router[a18_0x14f87e(0x114)](a18_0x14f87e(0x115),(_0x24898c,_0x5d3189)=>{const _0x52933d=a18_0x14f87e;try{const {daysToKeep:daysToKeep=0x1e}=_0x24898c[_0x52933d(0x111)];loggerService_1['loggerService'][_0x52933d(0x176)](daysToKeep),_0x5d3189['json']({'success':!![],'message':_0x52933d(0x16f)+daysToKeep+_0x52933d(0x119)});}catch(_0x21f3d3){_0x5d3189[_0x52933d(0x16d)](0x1f4)['json']({'success':![],'message':_0x52933d(0x155)});}}),router[a18_0x14f87e(0x114)](a18_0x14f87e(0x12d),async(_0x3915cf,_0x4e5d3a)=>{const _0x46d50a=a18_0x14f87e;try{const {paymentId:_0x682c78}=_0x3915cf[_0x46d50a(0x134)];console[_0x46d50a(0x16e)](_0x46d50a(0x13c)+_0x682c78),await coinToPayStatusService_1[_0x46d50a(0x159)]['checkPaymentById'](_0x682c78),_0x4e5d3a[_0x46d50a(0x12b)]({'success':!![],'message':_0x46d50a(0x116)});}catch(_0xc1742c){console['error'](_0x46d50a(0x162)+_0x3915cf['params'][_0x46d50a(0x121)]+':',_0xc1742c),_0x4e5d3a[_0x46d50a(0x16d)](0x1f4)[_0x46d50a(0x12b)]({'success':![],'message':_0xc1742c instanceof Error?_0xc1742c[_0x46d50a(0x16a)]:_0x46d50a(0x152)});}}),router[a18_0x14f87e(0x154)]('/cointopay/stats',(_0x283bed,_0x36f842)=>{const _0x9342f6=a18_0x14f87e;try{const _0x495aae=coinToPayStatusService_1[_0x9342f6(0x159)][_0x9342f6(0x13d)]();_0x36f842[_0x9342f6(0x12b)]({'success':!![],'result':{..._0x495aae,'description':_0x9342f6(0x178),'statusMapping':{'Paid':_0x9342f6(0x14c),'Awaiting\x20Fiat':_0x9342f6(0x12a),'waiting':_0x9342f6(0x12a),'expired':_0x9342f6(0x143),'failed':_0x9342f6(0x138)},'autoExpiryNote':'Payments\x20automatically\x20expire\x20after\x20'+_0x495aae[_0x9342f6(0x141)]+_0x9342f6(0x147),'individualTimersNote':_0x9342f6(0x136)}});}catch(_0x3cf07c){_0x36f842[_0x9342f6(0x16d)](0x1f4)[_0x9342f6(0x12b)]({'success':![],'message':_0x9342f6(0x133)});}}),router[a18_0x14f87e(0x154)](a18_0x14f87e(0x17b),async(_0x57fb4a,_0x31ce87)=>{const _0xd52958=a18_0x14f87e;try{const {paymentId:_0x338642}=_0x57fb4a['params'],_0x2a5bc9=coinToPayStatusService_1['coinToPayStatusService'][_0xd52958(0x151)](_0x338642),_0x3efbb3=(await Promise[_0xd52958(0x15d)]()['then'](()=>__importStar(require('../config/database'))))[_0xd52958(0x12c)],_0x551a1d=await _0x3efbb3['payment'][_0xd52958(0x145)]({'where':{'id':_0x338642},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x551a1d)return _0x31ce87[_0xd52958(0x16d)](0x194)[_0xd52958(0x12b)]({'success':![],'message':_0xd52958(0x149)});_0x31ce87[_0xd52958(0x12b)]({'success':!![],'result':{'payment':{'id':_0x551a1d['id'],'gateway':_0x551a1d[_0xd52958(0x11d)],'gatewayPaymentId':_0x551a1d[_0xd52958(0x13b)],'status':_0x551a1d[_0xd52958(0x16d)],'amount':_0x551a1d[_0xd52958(0x14f)],'currency':_0x551a1d['currency'],'createdAt':_0x551a1d[_0xd52958(0x132)],'updatedAt':_0x551a1d[_0xd52958(0x158)],'shop':_0x551a1d[_0xd52958(0x164)]},'timers':_0x2a5bc9,'isCoinToPay':_0x551a1d[_0xd52958(0x11d)]===_0xd52958(0x157),'ageInMinutes':Math[_0xd52958(0x140)]((Date[_0xd52958(0x15c)]()-_0x551a1d[_0xd52958(0x132)][_0xd52958(0x10c)]())/(0x3e8*0x3c))}});}catch(_0x4d97e5){_0x31ce87['status'](0x1f4)[_0xd52958(0x12b)]({'success':![],'message':_0x4d97e5 instanceof Error?_0x4d97e5[_0xd52958(0x16a)]:'Failed\x20to\x20get\x20payment\x20information'});}}),router[a18_0x14f87e(0x154)](a18_0x14f87e(0x15e),(_0x42ab57,_0x52417f)=>{const _0x12417a=a18_0x14f87e;try{const _0x387949=domainMonitoringService_1[_0x12417a(0x14e)][_0x12417a(0x118)]();_0x52417f['json']({'success':!![],'result':{..._0x387949,'description':_0x12417a(0x108),'behavior':_0x12417a(0x173),'encoding':_0x12417a(0x126)}});}catch(_0x44dc4e){_0x52417f[_0x12417a(0x16d)](0x1f4)[_0x12417a(0x12b)]({'success':![],'message':_0x12417a(0x123)});}}),router[a18_0x14f87e(0x114)](a18_0x14f87e(0x13a),async(_0x23412d,_0x244c25)=>{const _0x4dbe1c=a18_0x14f87e;try{const _0x174ef6=await domainMonitoringService_1[_0x4dbe1c(0x14e)][_0x4dbe1c(0x174)]();_0x244c25[_0x4dbe1c(0x12b)]({'success':!![],'result':{'domainAvailable':_0x174ef6,'message':_0x174ef6?'Domain\x20is\x20responding\x20correctly':_0x4dbe1c(0x120),'timestamp':new Date()['toISOString']()}});}catch(_0xeeee0d){_0x244c25[_0x4dbe1c(0x16d)](0x1f4)[_0x4dbe1c(0x12b)]({'success':![],'message':_0xeeee0d instanceof Error?_0xeeee0d[_0x4dbe1c(0x16a)]:_0x4dbe1c(0x161)});}}),exports[a18_0x14f87e(0x12c)]=router;