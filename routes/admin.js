'use strict';function a19_0xfef8(){const _0x4a050a=['PENDING','getPayouts','/payout/stats','Old\x20logs\x20cleaned\x20(kept\x20last\x20','createUser','/domain-monitoring/check','expiryDays','coinToPayStatusService','/cointopay/stats','now','/logs/stats','147616erbotw','express','/logs/clean','502950cvMZNC','use','/payouts/:id','writable','32veGBBK','json','8MKggan','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','hasOwnProperty','log','domainMonitoringService','delete','updateUserSchema','__esModule','\x20days\x20if\x20not\x20paid','create','toISOString','status','EXPIRED','../services/coinToPayStatusService','validate','getStatistics','then','Failed\x20to\x20get\x20payment\x20information','params','resolve','put','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','Failed\x20to\x20clean\x20old\x20logs','/users','getUsers','../controllers/adminController','currency','loggerService','getMerchantsAwaitingPayout','/payments','getOwnPropertyDescriptor','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','getLogStats','685602abcMEH','deletePayout','payment','getTime','CoinToPay\x20payment\x20status\x20checked\x20successfully','__setModuleDefault','requireAdmin','gatewayPaymentId','error','/statistics','Failed\x20to\x20perform\x20manual\x20domain\x20check','__importStar','paymentId','/domain-monitoring/stats','Domain\x20check\x20failed','amount','65510Wqkjmz','4345iOPUAW','defineProperty','gateway','cointopay','post','body','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','7664356pCWalQ','17nIXzNt','checkPaymentById','shop','getMerchantsSelection','call','findUnique','getMerchantStatistics','message','/payments/:id/customer','1494306RAjtqK','/cointopay/payment/:paymentId','getMonitoringStats','\x20days)','floor','1641355SCbfjb','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','getPayoutById','getOwnPropertyNames','/users/:id','../services/loggerService','/users/:id/activate','/payments/:id','createPayoutSchema','authenticateToken','length','Router','configurable','createdAt','manualCheck','get','/payout','Domain\x20is\x20responding\x20correctly','updatedAt','AdminController','updatePayment','/users/:id/suspend','getServiceStats','Payments\x20automatically\x20expire\x20after\x20','suspendUser','default'];a19_0xfef8=function(){return _0x4a050a;};return a19_0xfef8();}const a19_0x3fcde4=a19_0x2911;(function(_0xb6f864,_0x2dbf79){const _0x593ed6=a19_0x2911,_0x2e6c83=_0xb6f864();while(!![]){try{const _0x4771da=parseInt(_0x593ed6(0x16b))/0x1*(parseInt(_0x593ed6(0x19e))/0x2)+parseInt(_0x593ed6(0x1a1))/0x3+parseInt(_0x593ed6(0x131))/0x4*(parseInt(_0x593ed6(0x179))/0x5)+-parseInt(_0x593ed6(0x174))/0x6+parseInt(_0x593ed6(0x16a))/0x7+-parseInt(_0x593ed6(0x1a5))/0x8*(-parseInt(_0x593ed6(0x152))/0x9)+parseInt(_0x593ed6(0x162))/0xa*(-parseInt(_0x593ed6(0x163))/0xb);if(_0x4771da===_0x2dbf79)break;else _0x2e6c83['push'](_0x2e6c83['shift']());}catch(_0x52d4b0){_0x2e6c83['push'](_0x2e6c83['shift']());}}}(a19_0xfef8,0x9cb3c));var __createBinding=this&&this['__createBinding']||(Object[a19_0x3fcde4(0x13a)]?function(_0x591989,_0x4e856e,_0xc15c4e,_0x5b8bc8){const _0xc02c38=a19_0x3fcde4;if(_0x5b8bc8===undefined)_0x5b8bc8=_0xc15c4e;var _0x41acbd=Object[_0xc02c38(0x14f)](_0x4e856e,_0xc15c4e);(!_0x41acbd||(_0xc02c38(0x188)in _0x41acbd?!_0x4e856e[_0xc02c38(0x138)]:_0x41acbd[_0xc02c38(0x1a4)]||_0x41acbd[_0xc02c38(0x185)]))&&(_0x41acbd={'enumerable':!![],'get':function(){return _0x4e856e[_0xc15c4e];}}),Object['defineProperty'](_0x591989,_0x5b8bc8,_0x41acbd);}:function(_0x5bc515,_0x1120e8,_0x4f6e68,_0x12a3dd){if(_0x12a3dd===undefined)_0x12a3dd=_0x4f6e68;_0x5bc515[_0x12a3dd]=_0x1120e8[_0x4f6e68];}),__setModuleDefault=this&&this[a19_0x3fcde4(0x157)]||(Object[a19_0x3fcde4(0x13a)]?function(_0x57fb06,_0x3caab9){const _0x5dc665=a19_0x3fcde4;Object[_0x5dc665(0x164)](_0x57fb06,'default',{'enumerable':!![],'value':_0x3caab9});}:function(_0x108761,_0x4e7771){_0x108761['default']=_0x4e7771;}),__importStar=this&&this[a19_0x3fcde4(0x15d)]||(function(){var _0x3dd50f=function(_0x14813e){const _0x5ccc31=a19_0x2911;return _0x3dd50f=Object[_0x5ccc31(0x17c)]||function(_0x2e784b){const _0xdeb724=_0x5ccc31;var _0x448daa=[];for(var _0x1d01cc in _0x2e784b)if(Object['prototype'][_0xdeb724(0x133)][_0xdeb724(0x16f)](_0x2e784b,_0x1d01cc))_0x448daa[_0x448daa[_0xdeb724(0x183)]]=_0x1d01cc;return _0x448daa;},_0x3dd50f(_0x14813e);};return function(_0x124f15){const _0x2de779=a19_0x2911;if(_0x124f15&&_0x124f15[_0x2de779(0x138)])return _0x124f15;var _0x168f5c={};if(_0x124f15!=null){for(var _0x25298c=_0x3dd50f(_0x124f15),_0x22bc10=0x0;_0x22bc10<_0x25298c[_0x2de779(0x183)];_0x22bc10++)if(_0x25298c[_0x22bc10]!=='default')__createBinding(_0x168f5c,_0x124f15,_0x25298c[_0x22bc10]);}return __setModuleDefault(_0x168f5c,_0x124f15),_0x168f5c;};}());Object['defineProperty'](exports,a19_0x3fcde4(0x138),{'value':!![]});const express_1=require(a19_0x3fcde4(0x19f)),adminController_1=require(a19_0x3fcde4(0x14a)),validation_1=require('../middleware/validation'),auth_1=require('../middleware/auth'),loggerService_1=require(a19_0x3fcde4(0x17e)),coinToPayStatusService_1=require(a19_0x3fcde4(0x13e)),domainMonitoringService_1=require('../services/domainMonitoringService'),router=(0x0,express_1[a19_0x3fcde4(0x184)])(),adminController=new adminController_1[(a19_0x3fcde4(0x18c))]();function a19_0x2911(_0x304d35,_0x458c26){const _0xfef857=a19_0xfef8();return a19_0x2911=function(_0x2911b6,_0x663ef1){_0x2911b6=_0x2911b6-0x131;let _0x53b1a3=_0xfef857[_0x2911b6];return _0x53b1a3;},a19_0x2911(_0x304d35,_0x458c26);}router[a19_0x3fcde4(0x1a2)](auth_1[a19_0x3fcde4(0x182)],auth_1[a19_0x3fcde4(0x158)]),router[a19_0x3fcde4(0x188)]('/auth',adminController['checkAuth']),router[a19_0x3fcde4(0x188)](a19_0x3fcde4(0x15b),adminController[a19_0x3fcde4(0x140)]),router[a19_0x3fcde4(0x188)]('/merchant-statistics',adminController[a19_0x3fcde4(0x171)]),router['get'](a19_0x3fcde4(0x195),adminController['getPayoutStats']),router[a19_0x3fcde4(0x188)]('/payout/merchants',adminController[a19_0x3fcde4(0x14d)]),router[a19_0x3fcde4(0x188)]('/merchants/selection',adminController[a19_0x3fcde4(0x16e)]),router[a19_0x3fcde4(0x167)](a19_0x3fcde4(0x189),(0x0,validation_1['validate'])(validation_1[a19_0x3fcde4(0x181)]),adminController['createPayout']),router[a19_0x3fcde4(0x188)]('/payouts',adminController[a19_0x3fcde4(0x194)]),router[a19_0x3fcde4(0x188)]('/payouts/:id',adminController[a19_0x3fcde4(0x17b)]),router['delete'](a19_0x3fcde4(0x1a3),adminController[a19_0x3fcde4(0x153)]),router['get'](a19_0x3fcde4(0x14e),adminController['getPayments']),router[a19_0x3fcde4(0x188)](a19_0x3fcde4(0x180),adminController['getPaymentById']),router[a19_0x3fcde4(0x145)](a19_0x3fcde4(0x180),adminController[a19_0x3fcde4(0x18d)]),router[a19_0x3fcde4(0x145)](a19_0x3fcde4(0x173),(0x0,validation_1[a19_0x3fcde4(0x13f)])(validation_1['updateCustomerDataSchema']),adminController['updateCustomerData']),router[a19_0x3fcde4(0x188)]('/users',adminController[a19_0x3fcde4(0x149)]),router[a19_0x3fcde4(0x188)]('/users/:id',adminController['getUserById']),router[a19_0x3fcde4(0x167)](a19_0x3fcde4(0x148),(0x0,validation_1[a19_0x3fcde4(0x13f)])(validation_1['createUserSchema']),adminController[a19_0x3fcde4(0x197)]),router[a19_0x3fcde4(0x145)](a19_0x3fcde4(0x17d),(0x0,validation_1[a19_0x3fcde4(0x13f)])(validation_1[a19_0x3fcde4(0x137)]),adminController['updateUser']),router[a19_0x3fcde4(0x136)](a19_0x3fcde4(0x17d),adminController['deleteUser']),router[a19_0x3fcde4(0x167)](a19_0x3fcde4(0x18e),adminController[a19_0x3fcde4(0x191)]),router[a19_0x3fcde4(0x167)](a19_0x3fcde4(0x17f),adminController['activateUser']),router[a19_0x3fcde4(0x188)](a19_0x3fcde4(0x19d),(_0x51fee9,_0x5b9dc7)=>{const _0x4d1a84=a19_0x3fcde4;try{const _0x56ede5=loggerService_1[_0x4d1a84(0x14c)][_0x4d1a84(0x151)]();_0x5b9dc7['json']({'success':!![],'result':_0x56ede5});}catch(_0x569935){_0x5b9dc7['status'](0x1f4)[_0x4d1a84(0x1a6)]({'success':![],'message':'Failed\x20to\x20get\x20log\x20statistics'});}}),router['post'](a19_0x3fcde4(0x1a0),(_0x245d66,_0x19aa57)=>{const _0x2cf292=a19_0x3fcde4;try{const {daysToKeep:daysToKeep=0x1e}=_0x245d66[_0x2cf292(0x168)];loggerService_1[_0x2cf292(0x14c)]['cleanOldLogs'](daysToKeep),_0x19aa57[_0x2cf292(0x1a6)]({'success':!![],'message':_0x2cf292(0x196)+daysToKeep+_0x2cf292(0x177)});}catch(_0x230acf){_0x19aa57[_0x2cf292(0x13c)](0x1f4)[_0x2cf292(0x1a6)]({'success':![],'message':_0x2cf292(0x147)});}}),router[a19_0x3fcde4(0x167)]('/cointopay/check/:paymentId',async(_0x504eef,_0x1960bb)=>{const _0x4f8430=a19_0x3fcde4;try{const {paymentId:_0x46742f}=_0x504eef['params'];console[_0x4f8430(0x134)](_0x4f8430(0x146)+_0x46742f),await coinToPayStatusService_1['coinToPayStatusService'][_0x4f8430(0x16c)](_0x46742f),_0x1960bb[_0x4f8430(0x1a6)]({'success':!![],'message':_0x4f8430(0x156)});}catch(_0x465d2f){console[_0x4f8430(0x15a)](_0x4f8430(0x169)+_0x504eef[_0x4f8430(0x143)][_0x4f8430(0x15e)]+':',_0x465d2f),_0x1960bb[_0x4f8430(0x13c)](0x1f4)[_0x4f8430(0x1a6)]({'success':![],'message':_0x465d2f instanceof Error?_0x465d2f[_0x4f8430(0x172)]:_0x4f8430(0x17a)});}}),router[a19_0x3fcde4(0x188)](a19_0x3fcde4(0x19b),(_0x1dfb49,_0x20be09)=>{const _0x4f7737=a19_0x3fcde4;try{const _0x123332=coinToPayStatusService_1[_0x4f7737(0x19a)][_0x4f7737(0x18f)]();_0x20be09['json']({'success':!![],'result':{..._0x123332,'description':'CoinToPay\x20automatic\x20status\x20checking\x20service','statusMapping':{'Paid':'PAID','Awaiting\x20Fiat':'PENDING','waiting':_0x4f7737(0x193),'expired':_0x4f7737(0x13d),'failed':'FAILED'},'autoExpiryNote':_0x4f7737(0x190)+_0x123332[_0x4f7737(0x199)]+_0x4f7737(0x139),'individualTimersNote':_0x4f7737(0x132)}});}catch(_0x15911e){_0x20be09[_0x4f7737(0x13c)](0x1f4)['json']({'success':![],'message':'Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics'});}}),router['get'](a19_0x3fcde4(0x175),async(_0x1f3df6,_0x4c03ad)=>{const _0xb27a4d=a19_0x3fcde4;try{const {paymentId:_0x2ccb47}=_0x1f3df6[_0xb27a4d(0x143)],_0x3cf6a6=coinToPayStatusService_1[_0xb27a4d(0x19a)]['getPaymentTimerInfo'](_0x2ccb47),_0x38b637=(await Promise[_0xb27a4d(0x144)]()[_0xb27a4d(0x141)](()=>__importStar(require('../config/database'))))[_0xb27a4d(0x192)],_0x7b7a3e=await _0x38b637[_0xb27a4d(0x154)][_0xb27a4d(0x170)]({'where':{'id':_0x2ccb47},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x7b7a3e)return _0x4c03ad[_0xb27a4d(0x13c)](0x194)['json']({'success':![],'message':'Payment\x20not\x20found'});_0x4c03ad[_0xb27a4d(0x1a6)]({'success':!![],'result':{'payment':{'id':_0x7b7a3e['id'],'gateway':_0x7b7a3e[_0xb27a4d(0x165)],'gatewayPaymentId':_0x7b7a3e[_0xb27a4d(0x159)],'status':_0x7b7a3e['status'],'amount':_0x7b7a3e[_0xb27a4d(0x161)],'currency':_0x7b7a3e[_0xb27a4d(0x14b)],'createdAt':_0x7b7a3e[_0xb27a4d(0x186)],'updatedAt':_0x7b7a3e[_0xb27a4d(0x18b)],'shop':_0x7b7a3e[_0xb27a4d(0x16d)]},'timers':_0x3cf6a6,'isCoinToPay':_0x7b7a3e[_0xb27a4d(0x165)]===_0xb27a4d(0x166),'ageInMinutes':Math[_0xb27a4d(0x178)]((Date[_0xb27a4d(0x19c)]()-_0x7b7a3e[_0xb27a4d(0x186)][_0xb27a4d(0x155)]())/(0x3e8*0x3c))}});}catch(_0x3195fe){_0x4c03ad['status'](0x1f4)[_0xb27a4d(0x1a6)]({'success':![],'message':_0x3195fe instanceof Error?_0x3195fe[_0xb27a4d(0x172)]:_0xb27a4d(0x142)});}}),router[a19_0x3fcde4(0x188)](a19_0x3fcde4(0x15f),(_0x432330,_0xbd5b84)=>{const _0x5d6521=a19_0x3fcde4;try{const _0x45fbf7=domainMonitoringService_1[_0x5d6521(0x135)][_0x5d6521(0x176)]();_0xbd5b84[_0x5d6521(0x1a6)]({'success':!![],'result':{..._0x45fbf7,'description':_0x5d6521(0x150),'behavior':'Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','encoding':'Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs'}});}catch(_0x530511){_0xbd5b84[_0x5d6521(0x13c)](0x1f4)[_0x5d6521(0x1a6)]({'success':![],'message':'Failed\x20to\x20get\x20domain\x20monitoring\x20statistics'});}}),router[a19_0x3fcde4(0x167)](a19_0x3fcde4(0x198),async(_0xfa5878,_0x35c4ff)=>{const _0x56596d=a19_0x3fcde4;try{const _0x4d4353=await domainMonitoringService_1['domainMonitoringService'][_0x56596d(0x187)]();_0x35c4ff[_0x56596d(0x1a6)]({'success':!![],'result':{'domainAvailable':_0x4d4353,'message':_0x4d4353?_0x56596d(0x18a):_0x56596d(0x160),'timestamp':new Date()[_0x56596d(0x13b)]()}});}catch(_0x156249){_0x35c4ff[_0x56596d(0x13c)](0x1f4)['json']({'success':![],'message':_0x156249 instanceof Error?_0x156249[_0x56596d(0x172)]:_0x56596d(0x15c)});}}),exports['default']=router;