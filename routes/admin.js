'use strict';const a19_0x548d75=a19_0x12ca;function a19_0x457f(){const _0x176c9f=['‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','/payout','Router','now','body','getTime','1276224voRamt','getPayouts','../services/domainMonitoringService','message','call','gateway','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','createPayoutSchema','getMerchantsAwaitingPayout','resolve','log','authenticateToken','getPaymentTimerInfo','requireAdmin','Failed\x20to\x20clean\x20old\x20logs','error','getUserById','../controllers/adminController','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','cleanOldLogs','defineProperty','getLogStats','__createBinding','/users/:id','/payments','FAILED','/domain-monitoring/check','cointopay','/payouts/:id','338135pRDjAb','updateCustomerDataSchema','\x20days)','domainMonitoringService','../services/coinToPayStatusService','post','json','prototype','/logs/clean','/payout/merchants','get','hasOwnProperty','getPaymentById','status','getMerchantsSelection','checkPaymentById','suspendUser','/domain-monitoring/stats','792540lxqQek','delete','createPayout','/cointopay/payment/:paymentId','Failed\x20to\x20get\x20payment\x20information','/payout/stats','getMerchantStatistics','checkAuth','getUsers','currency','Payments\x20automatically\x20expire\x20after\x20','getPayments','shop','updatedAt','getOwnPropertyDescriptor','../services/loggerService','updateCustomerData','getMonitoringStats','amount','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','updateUserSchema','2389905ZvrXcT','146EMimOl','60jMpqne','manualCheck','../config/database','getOwnPropertyNames','getStatistics','PAID','put','/cointopay/stats','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','configurable','gatewayPaymentId','default','coinToPayStatusService','updatePayment','27906IZZRJT','1002wEelZJ','length','__setModuleDefault','deletePayout','Domain\x20is\x20responding\x20correctly','then','paymentId','/logs/stats','/merchant-statistics','Failed\x20to\x20perform\x20manual\x20domain\x20check','../middleware/validation','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','PENDING','createUser','params','/merchants/selection','findUnique','createUserSchema','validate','expiryDays','__esModule','Failed\x20to\x20get\x20log\x20statistics','/payments/:id/customer','updateUser','1892394ElmRuM','payment','getPayoutStats','getServiceStats','writable','loggerService','Domain\x20check\x20failed'];a19_0x457f=function(){return _0x176c9f;};return a19_0x457f();}(function(_0x4b2618,_0x3a1e58){const _0x15b20e=a19_0x12ca,_0x5c70da=_0x4b2618();while(!![]){try{const _0x2b77b0=-parseInt(_0x15b20e(0xd7))/0x1*(parseInt(_0x15b20e(0xe7))/0x2)+parseInt(_0x15b20e(0xe6))/0x3*(parseInt(_0x15b20e(0xd8))/0x4)+parseInt(_0x15b20e(0x129))/0x5+-parseInt(_0x15b20e(0x13b))/0x6+parseInt(_0x15b20e(0xff))/0x7+parseInt(_0x15b20e(0x10c))/0x8+-parseInt(_0x15b20e(0xd6))/0x9;if(_0x2b77b0===_0x3a1e58)break;else _0x5c70da['push'](_0x5c70da['shift']());}catch(_0x2800e5){_0x5c70da['push'](_0x5c70da['shift']());}}}(a19_0x457f,0x28966));function a19_0x12ca(_0x195937,_0x3fe51e){const _0x457f14=a19_0x457f();return a19_0x12ca=function(_0x12caef,_0x14c030){_0x12caef=_0x12caef-0xd0;let _0x1d22f1=_0x457f14[_0x12caef];return _0x1d22f1;},a19_0x12ca(_0x195937,_0x3fe51e);}var __createBinding=this&&this[a19_0x548d75(0x122)]||(Object['create']?function(_0x572ec5,_0x4669a4,_0x4c0f7c,_0xf561ae){const _0x17548a=a19_0x548d75;if(_0xf561ae===undefined)_0xf561ae=_0x4c0f7c;var _0x5bb3e2=Object[_0x17548a(0x149)](_0x4669a4,_0x4c0f7c);(!_0x5bb3e2||('get'in _0x5bb3e2?!_0x4669a4[_0x17548a(0xfb)]:_0x5bb3e2[_0x17548a(0x103)]||_0x5bb3e2[_0x17548a(0xe1)]))&&(_0x5bb3e2={'enumerable':!![],'get':function(){return _0x4669a4[_0x4c0f7c];}}),Object[_0x17548a(0x120)](_0x572ec5,_0xf561ae,_0x5bb3e2);}:function(_0x1d3478,_0x296dab,_0x37f66b,_0xcb8407){if(_0xcb8407===undefined)_0xcb8407=_0x37f66b;_0x1d3478[_0xcb8407]=_0x296dab[_0x37f66b];}),__setModuleDefault=this&&this[a19_0x548d75(0xe9)]||(Object['create']?function(_0x24a2ff,_0x4a2270){const _0x407428=a19_0x548d75;Object[_0x407428(0x120)](_0x24a2ff,_0x407428(0xe3),{'enumerable':!![],'value':_0x4a2270});}:function(_0x2ba4e6,_0x23843b){const _0x3594cc=a19_0x548d75;_0x2ba4e6[_0x3594cc(0xe3)]=_0x23843b;}),__importStar=this&&this['__importStar']||(function(){var _0xc9aa72=function(_0x28c27d){const _0x2bb961=a19_0x12ca;return _0xc9aa72=Object[_0x2bb961(0xdb)]||function(_0x181e7f){const _0x48cea1=_0x2bb961;var _0x3b0b91=[];for(var _0xcec000 in _0x181e7f)if(Object[_0x48cea1(0x130)][_0x48cea1(0x134)][_0x48cea1(0x110)](_0x181e7f,_0xcec000))_0x3b0b91[_0x3b0b91[_0x48cea1(0xe8)]]=_0xcec000;return _0x3b0b91;},_0xc9aa72(_0x28c27d);};return function(_0x5018c9){const _0x3f31f7=a19_0x12ca;if(_0x5018c9&&_0x5018c9['__esModule'])return _0x5018c9;var _0x461e0b={};if(_0x5018c9!=null){for(var _0xf2217e=_0xc9aa72(_0x5018c9),_0x53f5fc=0x0;_0x53f5fc<_0xf2217e[_0x3f31f7(0xe8)];_0x53f5fc++)if(_0xf2217e[_0x53f5fc]!==_0x3f31f7(0xe3))__createBinding(_0x461e0b,_0x5018c9,_0xf2217e[_0x53f5fc]);}return __setModuleDefault(_0x461e0b,_0x5018c9),_0x461e0b;};}());Object[a19_0x548d75(0x120)](exports,'__esModule',{'value':!![]});const express_1=require('express'),adminController_1=require(a19_0x548d75(0x11d)),validation_1=require(a19_0x548d75(0xf1)),auth_1=require('../middleware/auth'),loggerService_1=require(a19_0x548d75(0xd0)),coinToPayStatusService_1=require(a19_0x548d75(0x12d)),domainMonitoringService_1=require(a19_0x548d75(0x10e)),router=(0x0,express_1[a19_0x548d75(0x108)])(),adminController=new adminController_1['AdminController']();router['use'](auth_1[a19_0x548d75(0x117)],auth_1[a19_0x548d75(0x119)]),router[a19_0x548d75(0x133)]('/auth',adminController[a19_0x548d75(0x142)]),router[a19_0x548d75(0x133)]('/statistics',adminController[a19_0x548d75(0xdc)]),router['get'](a19_0x548d75(0xef),adminController[a19_0x548d75(0x141)]),router[a19_0x548d75(0x133)](a19_0x548d75(0x140),adminController[a19_0x548d75(0x101)]),router[a19_0x548d75(0x133)](a19_0x548d75(0x132),adminController[a19_0x548d75(0x114)]),router[a19_0x548d75(0x133)](a19_0x548d75(0xf6),adminController[a19_0x548d75(0x137)]),router[a19_0x548d75(0x12e)](a19_0x548d75(0x107),(0x0,validation_1[a19_0x548d75(0xf9)])(validation_1[a19_0x548d75(0x113)]),adminController[a19_0x548d75(0x13d)]),router[a19_0x548d75(0x133)]('/payouts',adminController[a19_0x548d75(0x10d)]),router[a19_0x548d75(0x133)]('/payouts/:id',adminController['getPayoutById']),router[a19_0x548d75(0x13c)](a19_0x548d75(0x128),adminController[a19_0x548d75(0xea)]),router[a19_0x548d75(0x133)](a19_0x548d75(0x124),adminController[a19_0x548d75(0x146)]),router[a19_0x548d75(0x133)]('/payments/:id',adminController[a19_0x548d75(0x135)]),router['put']('/payments/:id',adminController[a19_0x548d75(0xe5)]),router[a19_0x548d75(0xde)](a19_0x548d75(0xfd),(0x0,validation_1[a19_0x548d75(0xf9)])(validation_1[a19_0x548d75(0x12a)]),adminController[a19_0x548d75(0xd1)]),router[a19_0x548d75(0x133)]('/users',adminController[a19_0x548d75(0x143)]),router[a19_0x548d75(0x133)](a19_0x548d75(0x123),adminController[a19_0x548d75(0x11c)]),router['post']('/users',(0x0,validation_1['validate'])(validation_1[a19_0x548d75(0xf8)]),adminController[a19_0x548d75(0xf4)]),router[a19_0x548d75(0xde)](a19_0x548d75(0x123),(0x0,validation_1[a19_0x548d75(0xf9)])(validation_1[a19_0x548d75(0xd5)]),adminController[a19_0x548d75(0xfe)]),router['delete'](a19_0x548d75(0x123),adminController['deleteUser']),router[a19_0x548d75(0x12e)]('/users/:id/suspend',adminController[a19_0x548d75(0x139)]),router[a19_0x548d75(0x12e)]('/users/:id/activate',adminController['activateUser']),router[a19_0x548d75(0x133)](a19_0x548d75(0xee),(_0x193080,_0x37f779)=>{const _0x4a6366=a19_0x548d75;try{const _0x117e88=loggerService_1[_0x4a6366(0x104)][_0x4a6366(0x121)]();_0x37f779[_0x4a6366(0x12f)]({'success':!![],'result':_0x117e88});}catch(_0x4aea86){_0x37f779[_0x4a6366(0x136)](0x1f4)[_0x4a6366(0x12f)]({'success':![],'message':_0x4a6366(0xfc)});}}),router[a19_0x548d75(0x12e)](a19_0x548d75(0x131),(_0x257562,_0x1fa404)=>{const _0x13621f=a19_0x548d75;try{const {daysToKeep:daysToKeep=0x1e}=_0x257562[_0x13621f(0x10a)];loggerService_1[_0x13621f(0x104)][_0x13621f(0x11f)](daysToKeep),_0x1fa404[_0x13621f(0x12f)]({'success':!![],'message':'Old\x20logs\x20cleaned\x20(kept\x20last\x20'+daysToKeep+_0x13621f(0x12b)});}catch(_0xe97b21){_0x1fa404[_0x13621f(0x136)](0x1f4)['json']({'success':![],'message':_0x13621f(0x11a)});}}),router[a19_0x548d75(0x12e)]('/cointopay/check/:paymentId',async(_0x14f9fb,_0x1c248f)=>{const _0x9174b3=a19_0x548d75;try{const {paymentId:_0x2b3559}=_0x14f9fb[_0x9174b3(0xf5)];console[_0x9174b3(0x116)](_0x9174b3(0xe0)+_0x2b3559),await coinToPayStatusService_1['coinToPayStatusService'][_0x9174b3(0x138)](_0x2b3559),_0x1c248f[_0x9174b3(0x12f)]({'success':!![],'message':'CoinToPay\x20payment\x20status\x20checked\x20successfully'});}catch(_0x5e7da3){console[_0x9174b3(0x11b)](_0x9174b3(0x106)+_0x14f9fb[_0x9174b3(0xf5)][_0x9174b3(0xed)]+':',_0x5e7da3),_0x1c248f[_0x9174b3(0x136)](0x1f4)['json']({'success':![],'message':_0x5e7da3 instanceof Error?_0x5e7da3[_0x9174b3(0x10f)]:'Failed\x20to\x20check\x20CoinToPay\x20payment\x20status'});}}),router['get'](a19_0x548d75(0xdf),(_0x3aa2ab,_0x4ea42f)=>{const _0x333d45=a19_0x548d75;try{const _0x4e146c=coinToPayStatusService_1[_0x333d45(0xe4)][_0x333d45(0x102)]();_0x4ea42f[_0x333d45(0x12f)]({'success':!![],'result':{..._0x4e146c,'description':'CoinToPay\x20automatic\x20status\x20checking\x20service','statusMapping':{'Paid':_0x333d45(0xdd),'Awaiting\x20Fiat':_0x333d45(0xf3),'waiting':'PENDING','expired':'EXPIRED','failed':_0x333d45(0x125)},'autoExpiryNote':_0x333d45(0x145)+_0x4e146c[_0x333d45(0xfa)]+'\x20days\x20if\x20not\x20paid','individualTimersNote':'Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly'}});}catch(_0x524c23){_0x4ea42f[_0x333d45(0x136)](0x1f4)['json']({'success':![],'message':_0x333d45(0xd4)});}}),router[a19_0x548d75(0x133)](a19_0x548d75(0x13e),async(_0xee590a,_0xa62ba0)=>{const _0x21aa64=a19_0x548d75;try{const {paymentId:_0x2de728}=_0xee590a[_0x21aa64(0xf5)],_0x430121=coinToPayStatusService_1['coinToPayStatusService'][_0x21aa64(0x118)](_0x2de728),_0x3520a7=(await Promise[_0x21aa64(0x115)]()[_0x21aa64(0xec)](()=>__importStar(require(_0x21aa64(0xda)))))[_0x21aa64(0xe3)],_0x33a627=await _0x3520a7[_0x21aa64(0x100)][_0x21aa64(0xf7)]({'where':{'id':_0x2de728},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x33a627)return _0xa62ba0[_0x21aa64(0x136)](0x194)[_0x21aa64(0x12f)]({'success':![],'message':'Payment\x20not\x20found'});_0xa62ba0[_0x21aa64(0x12f)]({'success':!![],'result':{'payment':{'id':_0x33a627['id'],'gateway':_0x33a627[_0x21aa64(0x111)],'gatewayPaymentId':_0x33a627[_0x21aa64(0xe2)],'status':_0x33a627[_0x21aa64(0x136)],'amount':_0x33a627[_0x21aa64(0xd3)],'currency':_0x33a627[_0x21aa64(0x144)],'createdAt':_0x33a627['createdAt'],'updatedAt':_0x33a627[_0x21aa64(0x148)],'shop':_0x33a627[_0x21aa64(0x147)]},'timers':_0x430121,'isCoinToPay':_0x33a627[_0x21aa64(0x111)]===_0x21aa64(0x127),'ageInMinutes':Math['floor']((Date[_0x21aa64(0x109)]()-_0x33a627['createdAt'][_0x21aa64(0x10b)]())/(0x3e8*0x3c))}});}catch(_0x325684){_0xa62ba0[_0x21aa64(0x136)](0x1f4)[_0x21aa64(0x12f)]({'success':![],'message':_0x325684 instanceof Error?_0x325684[_0x21aa64(0x10f)]:_0x21aa64(0x13f)});}}),router['get'](a19_0x548d75(0x13a),(_0x7077fb,_0xdde0e0)=>{const _0x28c577=a19_0x548d75;try{const _0x27f19d=domainMonitoringService_1[_0x28c577(0x12c)][_0x28c577(0xd2)]();_0xdde0e0[_0x28c577(0x12f)]({'success':!![],'result':{..._0x27f19d,'description':_0x28c577(0x112),'behavior':_0x28c577(0xf2),'encoding':'Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs'}});}catch(_0x323119){_0xdde0e0[_0x28c577(0x136)](0x1f4)[_0x28c577(0x12f)]({'success':![],'message':_0x28c577(0x11e)});}}),router['post'](a19_0x548d75(0x126),async(_0x4330bf,_0x54e05d)=>{const _0x1a6e7c=a19_0x548d75;try{const _0x137d77=await domainMonitoringService_1[_0x1a6e7c(0x12c)][_0x1a6e7c(0xd9)]();_0x54e05d['json']({'success':!![],'result':{'domainAvailable':_0x137d77,'message':_0x137d77?_0x1a6e7c(0xeb):_0x1a6e7c(0x105),'timestamp':new Date()['toISOString']()}});}catch(_0x1dc01b){_0x54e05d[_0x1a6e7c(0x136)](0x1f4)[_0x1a6e7c(0x12f)]({'success':![],'message':_0x1dc01b instanceof Error?_0x1dc01b[_0x1a6e7c(0x10f)]:_0x1a6e7c(0xf0)});}}),exports['default']=router;