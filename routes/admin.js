'use strict';const a19_0x109b45=a19_0x1e26;(function(_0x34b560,_0x39d1a7){const _0x4ee959=a19_0x1e26,_0x3198a7=_0x34b560();while(!![]){try{const _0x29610f=parseInt(_0x4ee959(0x164))/0x1*(-parseInt(_0x4ee959(0x16d))/0x2)+-parseInt(_0x4ee959(0x116))/0x3*(parseInt(_0x4ee959(0x163))/0x4)+parseInt(_0x4ee959(0x114))/0x5+parseInt(_0x4ee959(0x168))/0x6+parseInt(_0x4ee959(0x13e))/0x7*(parseInt(_0x4ee959(0x142))/0x8)+-parseInt(_0x4ee959(0x187))/0x9*(parseInt(_0x4ee959(0x133))/0xa)+parseInt(_0x4ee959(0x173))/0xb;if(_0x29610f===_0x39d1a7)break;else _0x3198a7['push'](_0x3198a7['shift']());}catch(_0x5c960b){_0x3198a7['push'](_0x3198a7['shift']());}}}(a19_0x2817,0xd8cb7));function a19_0x1e26(_0xc40f54,_0x23796d){const _0x28174f=a19_0x2817();return a19_0x1e26=function(_0x1e268d,_0x199e2f){_0x1e268d=_0x1e268d-0x10e;let _0x684bcd=_0x28174f[_0x1e268d];return _0x684bcd;},a19_0x1e26(_0xc40f54,_0x23796d);}var __createBinding=this&&this[a19_0x109b45(0x115)]||(Object['create']?function(_0x4847a9,_0x162cde,_0x57fbd0,_0x5712e9){const _0x5191a7=a19_0x109b45;if(_0x5712e9===undefined)_0x5712e9=_0x57fbd0;var _0x44ff9a=Object[_0x5191a7(0x17c)](_0x162cde,_0x57fbd0);(!_0x44ff9a||('get'in _0x44ff9a?!_0x162cde['__esModule']:_0x44ff9a[_0x5191a7(0x14b)]||_0x44ff9a['configurable']))&&(_0x44ff9a={'enumerable':!![],'get':function(){return _0x162cde[_0x57fbd0];}}),Object[_0x5191a7(0x15c)](_0x4847a9,_0x5712e9,_0x44ff9a);}:function(_0x16357d,_0x1afe42,_0x173e42,_0x10e6a3){if(_0x10e6a3===undefined)_0x10e6a3=_0x173e42;_0x16357d[_0x10e6a3]=_0x1afe42[_0x173e42];}),__setModuleDefault=this&&this[a19_0x109b45(0x137)]||(Object[a19_0x109b45(0x11f)]?function(_0x1140c7,_0x596436){const _0x4abdf7=a19_0x109b45;Object[_0x4abdf7(0x15c)](_0x1140c7,_0x4abdf7(0x131),{'enumerable':!![],'value':_0x596436});}:function(_0x43cca8,_0xe7f8b9){_0x43cca8['default']=_0xe7f8b9;}),__importStar=this&&this[a19_0x109b45(0x12d)]||(function(){var _0x51b230=function(_0x20f716){const _0x9cb04b=a19_0x1e26;return _0x51b230=Object[_0x9cb04b(0x149)]||function(_0x46a8cb){const _0x22f9a8=_0x9cb04b;var _0x29852a=[];for(var _0x253053 in _0x46a8cb)if(Object['prototype'][_0x22f9a8(0x16f)][_0x22f9a8(0x136)](_0x46a8cb,_0x253053))_0x29852a[_0x29852a[_0x22f9a8(0x185)]]=_0x253053;return _0x29852a;},_0x51b230(_0x20f716);};return function(_0x492ac1){const _0x30cae9=a19_0x1e26;if(_0x492ac1&&_0x492ac1[_0x30cae9(0x141)])return _0x492ac1;var _0x493714={};if(_0x492ac1!=null){for(var _0x1d87e6=_0x51b230(_0x492ac1),_0x1c4fd9=0x0;_0x1c4fd9<_0x1d87e6[_0x30cae9(0x185)];_0x1c4fd9++)if(_0x1d87e6[_0x1c4fd9]!==_0x30cae9(0x131))__createBinding(_0x493714,_0x492ac1,_0x1d87e6[_0x1c4fd9]);}return __setModuleDefault(_0x493714,_0x492ac1),_0x493714;};}());Object[a19_0x109b45(0x15c)](exports,a19_0x109b45(0x141),{'value':!![]});const express_1=require(a19_0x109b45(0x130)),adminController_1=require(a19_0x109b45(0x11c)),validation_1=require(a19_0x109b45(0x10f)),auth_1=require(a19_0x109b45(0x119)),loggerService_1=require('../services/loggerService'),coinToPayStatusService_1=require(a19_0x109b45(0x128)),domainMonitoringService_1=require(a19_0x109b45(0x15e)),router=(0x0,express_1['Router'])(),adminController=new adminController_1['AdminController']();function a19_0x2817(){const _0x4285d0=['Failed\x20to\x20get\x20log\x20statistics','Failed\x20to\x20clean\x20old\x20logs','/payout/stats','/payments/:id/customer','updateUser','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','getOwnPropertyNames','gateway','writable','deletePayout','updateCustomerDataSchema','PAID','/users/:id/suspend','activateUser','FAILED','log','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','Failed\x20to\x20get\x20payment\x20information','Old\x20logs\x20cleaned\x20(kept\x20last\x20','json','currency','/payments/:id','checkPaymentById','domainMonitoringService','defineProperty','updateCustomerData','../services/domainMonitoringService','Failed\x20to\x20perform\x20manual\x20domain\x20check','floor','message','getUserById','436jjCFzH','71310oUnLlb','post','/payouts/:id','gatewayPaymentId','2917680eehYwP','amount','then','/statistics','createdAt','38spyOYs','getPayoutById','hasOwnProperty','authenticateToken','/auth','updateUserSchema','39483125ETLKGL','getServiceStats','now','Payment\x20not\x20found','paymentId','params','../config/database','/payout','/logs/clean','getOwnPropertyDescriptor','put','getStatistics','body','createUserSchema','get','use','CoinToPay\x20payment\x20status\x20checked\x20successfully','updatedAt','length','/users/:id','54DMObPf','Payments\x20automatically\x20expire\x20after\x20','../middleware/validation','Domain\x20is\x20responding\x20correctly','/merchants/selection','coinToPayStatusService','Domain\x20check\x20failed','592955JsPFnV','__createBinding','46263RlTTnc','cleanOldLogs','payment','../middleware/auth','requireAdmin','/logs/stats','../controllers/adminController','PENDING','getMerchantsAwaitingPayout','create','checkAuth','/users','getPaymentTimerInfo','status','validate','/domain-monitoring/check','createUser','shop','../services/coinToPayStatusService','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','getMerchantsSelection','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','deleteUser','__importStar','loggerService','/users/:id/activate','express','default','getLogStats','1172570nsKLNu','/cointopay/stats','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','call','__setModuleDefault','error','/domain-monitoring/stats','createPayoutSchema','getMonitoringStats','manualCheck','/payouts','1515731ZjDRAF','expiryDays','🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','__esModule','16hdOHIi'];a19_0x2817=function(){return _0x4285d0;};return a19_0x2817();}router[a19_0x109b45(0x182)](auth_1[a19_0x109b45(0x170)],auth_1[a19_0x109b45(0x11a)]),router[a19_0x109b45(0x181)](a19_0x109b45(0x171),adminController[a19_0x109b45(0x120)]),router[a19_0x109b45(0x181)](a19_0x109b45(0x16b),adminController[a19_0x109b45(0x17e)]),router[a19_0x109b45(0x181)]('/merchant-statistics',adminController['getMerchantStatistics']),router[a19_0x109b45(0x181)](a19_0x109b45(0x145),adminController['getPayoutStats']),router[a19_0x109b45(0x181)]('/payout/merchants',adminController[a19_0x109b45(0x11e)]),router['get'](a19_0x109b45(0x111),adminController[a19_0x109b45(0x12a)]),router[a19_0x109b45(0x165)](a19_0x109b45(0x17a),(0x0,validation_1[a19_0x109b45(0x124)])(validation_1[a19_0x109b45(0x13a)]),adminController['createPayout']),router[a19_0x109b45(0x181)](a19_0x109b45(0x13d),adminController['getPayouts']),router[a19_0x109b45(0x181)](a19_0x109b45(0x166),adminController[a19_0x109b45(0x16e)]),router['delete'](a19_0x109b45(0x166),adminController[a19_0x109b45(0x14c)]),router['get']('/payments',adminController['getPayments']),router['get'](a19_0x109b45(0x159),adminController['getPaymentById']),router[a19_0x109b45(0x17d)]('/payments/:id',adminController['updatePayment']),router['put'](a19_0x109b45(0x146),(0x0,validation_1[a19_0x109b45(0x124)])(validation_1[a19_0x109b45(0x14d)]),adminController[a19_0x109b45(0x15d)]),router['get'](a19_0x109b45(0x121),adminController['getUsers']),router['get']('/users/:id',adminController[a19_0x109b45(0x162)]),router['post']('/users',(0x0,validation_1[a19_0x109b45(0x124)])(validation_1[a19_0x109b45(0x180)]),adminController[a19_0x109b45(0x126)]),router[a19_0x109b45(0x17d)](a19_0x109b45(0x186),(0x0,validation_1[a19_0x109b45(0x124)])(validation_1[a19_0x109b45(0x172)]),adminController[a19_0x109b45(0x147)]),router['delete'](a19_0x109b45(0x186),adminController[a19_0x109b45(0x12c)]),router['post'](a19_0x109b45(0x14f),adminController['suspendUser']),router[a19_0x109b45(0x165)](a19_0x109b45(0x12f),adminController[a19_0x109b45(0x150)]),router[a19_0x109b45(0x181)](a19_0x109b45(0x11b),(_0x834aff,_0x50b249)=>{const _0x287e15=a19_0x109b45;try{const _0x1f6662=loggerService_1[_0x287e15(0x12e)][_0x287e15(0x132)]();_0x50b249[_0x287e15(0x157)]({'success':!![],'result':_0x1f6662});}catch(_0x216a33){_0x50b249[_0x287e15(0x123)](0x1f4)[_0x287e15(0x157)]({'success':![],'message':_0x287e15(0x143)});}}),router[a19_0x109b45(0x165)](a19_0x109b45(0x17b),(_0x16efd8,_0x160a67)=>{const _0x154ad7=a19_0x109b45;try{const {daysToKeep:daysToKeep=0x1e}=_0x16efd8[_0x154ad7(0x17f)];loggerService_1['loggerService'][_0x154ad7(0x117)](daysToKeep),_0x160a67['json']({'success':!![],'message':_0x154ad7(0x156)+daysToKeep+'\x20days)'});}catch(_0x2f9bf0){_0x160a67['status'](0x1f4)[_0x154ad7(0x157)]({'success':![],'message':_0x154ad7(0x144)});}}),router[a19_0x109b45(0x165)]('/cointopay/check/:paymentId',async(_0x504ac4,_0x4f41cc)=>{const _0x3c412e=a19_0x109b45;try{const {paymentId:_0xfefbe4}=_0x504ac4[_0x3c412e(0x178)];console[_0x3c412e(0x152)](_0x3c412e(0x140)+_0xfefbe4),await coinToPayStatusService_1[_0x3c412e(0x112)][_0x3c412e(0x15a)](_0xfefbe4),_0x4f41cc[_0x3c412e(0x157)]({'success':!![],'message':_0x3c412e(0x183)});}catch(_0x4e8921){console[_0x3c412e(0x138)]('❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20'+_0x504ac4[_0x3c412e(0x178)][_0x3c412e(0x177)]+':',_0x4e8921),_0x4f41cc['status'](0x1f4)[_0x3c412e(0x157)]({'success':![],'message':_0x4e8921 instanceof Error?_0x4e8921['message']:_0x3c412e(0x135)});}}),router[a19_0x109b45(0x181)](a19_0x109b45(0x134),(_0x5be192,_0x5c32b9)=>{const _0x383581=a19_0x109b45;try{const _0x1e1235=coinToPayStatusService_1['coinToPayStatusService'][_0x383581(0x174)]();_0x5c32b9[_0x383581(0x157)]({'success':!![],'result':{..._0x1e1235,'description':'CoinToPay\x20automatic\x20status\x20checking\x20service','statusMapping':{'Paid':_0x383581(0x14e),'Awaiting\x20Fiat':_0x383581(0x11d),'waiting':'PENDING','expired':'EXPIRED','failed':_0x383581(0x151)},'autoExpiryNote':_0x383581(0x10e)+_0x1e1235[_0x383581(0x13f)]+'\x20days\x20if\x20not\x20paid','individualTimersNote':_0x383581(0x148)}});}catch(_0x48ef95){_0x5c32b9['status'](0x1f4)[_0x383581(0x157)]({'success':![],'message':_0x383581(0x154)});}}),router['get']('/cointopay/payment/:paymentId',async(_0x5173da,_0x42ba2b)=>{const _0x327784=a19_0x109b45;try{const {paymentId:_0x4fec9c}=_0x5173da[_0x327784(0x178)],_0x137e2d=coinToPayStatusService_1[_0x327784(0x112)][_0x327784(0x122)](_0x4fec9c),_0x155f07=(await Promise['resolve']()[_0x327784(0x16a)](()=>__importStar(require(_0x327784(0x179)))))[_0x327784(0x131)],_0x45513e=await _0x155f07[_0x327784(0x118)]['findUnique']({'where':{'id':_0x4fec9c},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x45513e)return _0x42ba2b['status'](0x194)[_0x327784(0x157)]({'success':![],'message':_0x327784(0x176)});_0x42ba2b[_0x327784(0x157)]({'success':!![],'result':{'payment':{'id':_0x45513e['id'],'gateway':_0x45513e[_0x327784(0x14a)],'gatewayPaymentId':_0x45513e[_0x327784(0x167)],'status':_0x45513e['status'],'amount':_0x45513e[_0x327784(0x169)],'currency':_0x45513e[_0x327784(0x158)],'createdAt':_0x45513e[_0x327784(0x16c)],'updatedAt':_0x45513e[_0x327784(0x184)],'shop':_0x45513e[_0x327784(0x127)]},'timers':_0x137e2d,'isCoinToPay':_0x45513e[_0x327784(0x14a)]==='cointopay','ageInMinutes':Math[_0x327784(0x160)]((Date[_0x327784(0x175)]()-_0x45513e[_0x327784(0x16c)]['getTime']())/(0x3e8*0x3c))}});}catch(_0x279f93){_0x42ba2b['status'](0x1f4)[_0x327784(0x157)]({'success':![],'message':_0x279f93 instanceof Error?_0x279f93['message']:_0x327784(0x155)});}}),router[a19_0x109b45(0x181)](a19_0x109b45(0x139),(_0x4d1e8d,_0x4a3c3d)=>{const _0x8d3dd2=a19_0x109b45;try{const _0x13d9d8=domainMonitoringService_1[_0x8d3dd2(0x15b)][_0x8d3dd2(0x13b)]();_0x4a3c3d[_0x8d3dd2(0x157)]({'success':!![],'result':{..._0x13d9d8,'description':_0x8d3dd2(0x153),'behavior':'Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','encoding':_0x8d3dd2(0x12b)}});}catch(_0x57fc8f){_0x4a3c3d[_0x8d3dd2(0x123)](0x1f4)[_0x8d3dd2(0x157)]({'success':![],'message':_0x8d3dd2(0x129)});}}),router[a19_0x109b45(0x165)](a19_0x109b45(0x125),async(_0x236fdb,_0x4a7bae)=>{const _0x8c862f=a19_0x109b45;try{const _0x3372b4=await domainMonitoringService_1['domainMonitoringService'][_0x8c862f(0x13c)]();_0x4a7bae[_0x8c862f(0x157)]({'success':!![],'result':{'domainAvailable':_0x3372b4,'message':_0x3372b4?_0x8c862f(0x110):_0x8c862f(0x113),'timestamp':new Date()['toISOString']()}});}catch(_0x3f40ab){_0x4a7bae['status'](0x1f4)[_0x8c862f(0x157)]({'success':![],'message':_0x3f40ab instanceof Error?_0x3f40ab[_0x8c862f(0x161)]:_0x8c862f(0x15f)});}}),exports[a19_0x109b45(0x131)]=router;