'use strict';const a19_0x2e1ff8=a19_0xb784;function a19_0xb784(_0x2bcdda,_0x2f4195){const _0x3f2d02=a19_0x3f2d();return a19_0xb784=function(_0xb7848d,_0x289ca6){_0xb7848d=_0xb7848d-0x125;let _0x51fa6d=_0x3f2d02[_0xb7848d];return _0x51fa6d;},a19_0xb784(_0x2bcdda,_0x2f4195);}(function(_0x37eb11,_0x4ce9fc){const _0x5250d4=a19_0xb784,_0x100597=_0x37eb11();while(!![]){try{const _0x33c8eb=-parseInt(_0x5250d4(0x135))/0x1*(parseInt(_0x5250d4(0x185))/0x2)+-parseInt(_0x5250d4(0x195))/0x3*(-parseInt(_0x5250d4(0x163))/0x4)+parseInt(_0x5250d4(0x199))/0x5*(-parseInt(_0x5250d4(0x16b))/0x6)+-parseInt(_0x5250d4(0x16a))/0x7*(-parseInt(_0x5250d4(0x154))/0x8)+parseInt(_0x5250d4(0x137))/0x9+parseInt(_0x5250d4(0x13c))/0xa+parseInt(_0x5250d4(0x1a1))/0xb*(-parseInt(_0x5250d4(0x180))/0xc);if(_0x33c8eb===_0x4ce9fc)break;else _0x100597['push'](_0x100597['shift']());}catch(_0x4972ec){_0x100597['push'](_0x100597['shift']());}}}(a19_0x3f2d,0xdec4c));var __createBinding=this&&this['__createBinding']||(Object[a19_0x2e1ff8(0x17d)]?function(_0xf6db53,_0x12ee60,_0xcc4d6a,_0x39cde1){const _0x18d981=a19_0x2e1ff8;if(_0x39cde1===undefined)_0x39cde1=_0xcc4d6a;var _0x54be78=Object['getOwnPropertyDescriptor'](_0x12ee60,_0xcc4d6a);(!_0x54be78||('get'in _0x54be78?!_0x12ee60['__esModule']:_0x54be78['writable']||_0x54be78['configurable']))&&(_0x54be78={'enumerable':!![],'get':function(){return _0x12ee60[_0xcc4d6a];}}),Object[_0x18d981(0x166)](_0xf6db53,_0x39cde1,_0x54be78);}:function(_0x1c0c1a,_0x2c5ae0,_0x1d4b8a,_0x5990aa){if(_0x5990aa===undefined)_0x5990aa=_0x1d4b8a;_0x1c0c1a[_0x5990aa]=_0x2c5ae0[_0x1d4b8a];}),__setModuleDefault=this&&this[a19_0x2e1ff8(0x149)]||(Object['create']?function(_0x105326,_0x40aff2){const _0x3bdb91=a19_0x2e1ff8;Object[_0x3bdb91(0x166)](_0x105326,'default',{'enumerable':!![],'value':_0x40aff2});}:function(_0x586aba,_0x37a4d3){_0x586aba['default']=_0x37a4d3;}),__importStar=this&&this[a19_0x2e1ff8(0x143)]||(function(){var _0x51202e=function(_0x238c88){const _0x40fcf6=a19_0xb784;return _0x51202e=Object[_0x40fcf6(0x131)]||function(_0x2d7b67){const _0x4b38d6=_0x40fcf6;var _0x5441a8=[];for(var _0x9a6136 in _0x2d7b67)if(Object[_0x4b38d6(0x178)][_0x4b38d6(0x191)]['call'](_0x2d7b67,_0x9a6136))_0x5441a8[_0x5441a8[_0x4b38d6(0x1a0)]]=_0x9a6136;return _0x5441a8;},_0x51202e(_0x238c88);};return function(_0x2c952a){const _0x1966b9=a19_0xb784;if(_0x2c952a&&_0x2c952a[_0x1966b9(0x127)])return _0x2c952a;var _0x5bd614={};if(_0x2c952a!=null){for(var _0x516736=_0x51202e(_0x2c952a),_0x3a17e4=0x0;_0x3a17e4<_0x516736[_0x1966b9(0x1a0)];_0x3a17e4++)if(_0x516736[_0x3a17e4]!==_0x1966b9(0x192))__createBinding(_0x5bd614,_0x2c952a,_0x516736[_0x3a17e4]);}return __setModuleDefault(_0x5bd614,_0x2c952a),_0x5bd614;};}());Object[a19_0x2e1ff8(0x166)](exports,'__esModule',{'value':!![]});const express_1=require(a19_0x2e1ff8(0x151)),adminController_1=require(a19_0x2e1ff8(0x182)),validation_1=require(a19_0x2e1ff8(0x186)),auth_1=require(a19_0x2e1ff8(0x198)),loggerService_1=require(a19_0x2e1ff8(0x179)),coinToPayStatusService_1=require(a19_0x2e1ff8(0x193)),domainMonitoringService_1=require('../services/domainMonitoringService'),router=(0x0,express_1[a19_0x2e1ff8(0x12a)])(),adminController=new adminController_1[(a19_0x2e1ff8(0x172))]();router['use'](auth_1[a19_0x2e1ff8(0x148)],auth_1[a19_0x2e1ff8(0x184)]),router[a19_0x2e1ff8(0x15a)](a19_0x2e1ff8(0x162),adminController[a19_0x2e1ff8(0x139)]),router[a19_0x2e1ff8(0x15a)](a19_0x2e1ff8(0x15b),adminController[a19_0x2e1ff8(0x187)]),router[a19_0x2e1ff8(0x15a)](a19_0x2e1ff8(0x1a4),adminController[a19_0x2e1ff8(0x12e)]),router[a19_0x2e1ff8(0x15a)](a19_0x2e1ff8(0x130),adminController[a19_0x2e1ff8(0x19a)]),router[a19_0x2e1ff8(0x15a)](a19_0x2e1ff8(0x16e),adminController[a19_0x2e1ff8(0x173)]),router[a19_0x2e1ff8(0x15a)](a19_0x2e1ff8(0x142),adminController[a19_0x2e1ff8(0x194)]),router[a19_0x2e1ff8(0x175)](a19_0x2e1ff8(0x153),(0x0,validation_1[a19_0x2e1ff8(0x177)])(validation_1[a19_0x2e1ff8(0x168)]),adminController[a19_0x2e1ff8(0x14d)]),router[a19_0x2e1ff8(0x15a)](a19_0x2e1ff8(0x15f),adminController['getPayouts']),router[a19_0x2e1ff8(0x15a)](a19_0x2e1ff8(0x13d),adminController[a19_0x2e1ff8(0x19e)]),router[a19_0x2e1ff8(0x160)]('/payouts/:id',adminController['deletePayout']),router[a19_0x2e1ff8(0x15a)](a19_0x2e1ff8(0x14b),adminController[a19_0x2e1ff8(0x133)]),router[a19_0x2e1ff8(0x15a)]('/payments/:id',adminController['getPaymentById']),router[a19_0x2e1ff8(0x176)](a19_0x2e1ff8(0x164),adminController['updatePayment']),router[a19_0x2e1ff8(0x176)]('/payments/:id/customer',(0x0,validation_1[a19_0x2e1ff8(0x177)])(validation_1[a19_0x2e1ff8(0x12b)]),adminController[a19_0x2e1ff8(0x13e)]),router[a19_0x2e1ff8(0x15a)]('/users',adminController[a19_0x2e1ff8(0x15d)]),router[a19_0x2e1ff8(0x15a)](a19_0x2e1ff8(0x1a3),adminController[a19_0x2e1ff8(0x158)]),router[a19_0x2e1ff8(0x175)](a19_0x2e1ff8(0x136),(0x0,validation_1[a19_0x2e1ff8(0x177)])(validation_1[a19_0x2e1ff8(0x140)]),adminController[a19_0x2e1ff8(0x16f)]),router[a19_0x2e1ff8(0x176)](a19_0x2e1ff8(0x1a3),(0x0,validation_1[a19_0x2e1ff8(0x177)])(validation_1[a19_0x2e1ff8(0x190)]),adminController[a19_0x2e1ff8(0x150)]),router['delete'](a19_0x2e1ff8(0x1a3),adminController[a19_0x2e1ff8(0x169)]),router[a19_0x2e1ff8(0x175)](a19_0x2e1ff8(0x19b),adminController[a19_0x2e1ff8(0x128)]),router[a19_0x2e1ff8(0x175)](a19_0x2e1ff8(0x13a),adminController[a19_0x2e1ff8(0x126)]),router['get']('/logs/stats',(_0x276e8a,_0x2e258f)=>{const _0x4d91e8=a19_0x2e1ff8;try{const _0x276797=loggerService_1['loggerService'][_0x4d91e8(0x14a)]();_0x2e258f[_0x4d91e8(0x167)]({'success':!![],'result':_0x276797});}catch(_0x107c05){_0x2e258f[_0x4d91e8(0x197)](0x1f4)[_0x4d91e8(0x167)]({'success':![],'message':_0x4d91e8(0x12f)});}}),router[a19_0x2e1ff8(0x175)](a19_0x2e1ff8(0x16c),(_0x1d40e5,_0x7012fb)=>{const _0x1f1ae7=a19_0x2e1ff8;try{const {daysToKeep:daysToKeep=0x1e}=_0x1d40e5[_0x1f1ae7(0x14f)];loggerService_1[_0x1f1ae7(0x15c)][_0x1f1ae7(0x19f)](daysToKeep),_0x7012fb['json']({'success':!![],'message':_0x1f1ae7(0x170)+daysToKeep+_0x1f1ae7(0x159)});}catch(_0x1a5624){_0x7012fb['status'](0x1f4)['json']({'success':![],'message':_0x1f1ae7(0x16d)});}}),router[a19_0x2e1ff8(0x175)]('/cointopay/check/:paymentId',async(_0x44b168,_0x53459b)=>{const _0x1c3a57=a19_0x2e1ff8;try{const {paymentId:_0x2cd79c}=_0x44b168['params'];console['log'](_0x1c3a57(0x1a2)+_0x2cd79c),await coinToPayStatusService_1[_0x1c3a57(0x132)][_0x1c3a57(0x152)](_0x2cd79c),_0x53459b[_0x1c3a57(0x167)]({'success':!![],'message':'CoinToPay\x20payment\x20status\x20checked\x20successfully'});}catch(_0x34c027){console[_0x1c3a57(0x161)](_0x1c3a57(0x189)+_0x44b168[_0x1c3a57(0x12c)]['paymentId']+':',_0x34c027),_0x53459b[_0x1c3a57(0x197)](0x1f4)['json']({'success':![],'message':_0x34c027 instanceof Error?_0x34c027[_0x1c3a57(0x196)]:_0x1c3a57(0x129)});}}),router[a19_0x2e1ff8(0x15a)](a19_0x2e1ff8(0x157),(_0x47c6c2,_0x2e42b0)=>{const _0x179e74=a19_0x2e1ff8;try{const _0x44d2e7=coinToPayStatusService_1[_0x179e74(0x132)][_0x179e74(0x155)]();_0x2e42b0[_0x179e74(0x167)]({'success':!![],'result':{..._0x44d2e7,'description':_0x179e74(0x146),'statusMapping':{'Paid':_0x179e74(0x144),'Awaiting\x20Fiat':_0x179e74(0x17f),'waiting':_0x179e74(0x17f),'expired':'EXPIRED','failed':_0x179e74(0x18c)},'autoExpiryNote':'Payments\x20automatically\x20expire\x20after\x20'+_0x44d2e7[_0x179e74(0x18b)]+_0x179e74(0x19d),'individualTimersNote':'Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly'}});}catch(_0x3605e5){_0x2e42b0[_0x179e74(0x197)](0x1f4)[_0x179e74(0x167)]({'success':![],'message':_0x179e74(0x171)});}}),router[a19_0x2e1ff8(0x15a)](a19_0x2e1ff8(0x188),async(_0x340740,_0x405c00)=>{const _0x15ccd8=a19_0x2e1ff8;try{const {paymentId:_0x40302e}=_0x340740[_0x15ccd8(0x12c)],_0xef414f=coinToPayStatusService_1[_0x15ccd8(0x132)][_0x15ccd8(0x17b)](_0x40302e),_0x588240=(await Promise[_0x15ccd8(0x19c)]()[_0x15ccd8(0x156)](()=>__importStar(require(_0x15ccd8(0x12d)))))[_0x15ccd8(0x192)],_0x52529b=await _0x588240[_0x15ccd8(0x17a)][_0x15ccd8(0x181)]({'where':{'id':_0x40302e},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x52529b)return _0x405c00[_0x15ccd8(0x197)](0x194)[_0x15ccd8(0x167)]({'success':![],'message':_0x15ccd8(0x18f)});_0x405c00['json']({'success':!![],'result':{'payment':{'id':_0x52529b['id'],'gateway':_0x52529b[_0x15ccd8(0x18d)],'gatewayPaymentId':_0x52529b[_0x15ccd8(0x141)],'status':_0x52529b[_0x15ccd8(0x197)],'amount':_0x52529b[_0x15ccd8(0x17e)],'currency':_0x52529b[_0x15ccd8(0x147)],'createdAt':_0x52529b[_0x15ccd8(0x183)],'updatedAt':_0x52529b[_0x15ccd8(0x15e)],'shop':_0x52529b[_0x15ccd8(0x125)]},'timers':_0xef414f,'isCoinToPay':_0x52529b[_0x15ccd8(0x18d)]===_0x15ccd8(0x14c),'ageInMinutes':Math[_0x15ccd8(0x13b)]((Date[_0x15ccd8(0x165)]()-_0x52529b[_0x15ccd8(0x183)]['getTime']())/(0x3e8*0x3c))}});}catch(_0x2237cc){_0x405c00[_0x15ccd8(0x197)](0x1f4)[_0x15ccd8(0x167)]({'success':![],'message':_0x2237cc instanceof Error?_0x2237cc[_0x15ccd8(0x196)]:_0x15ccd8(0x138)});}}),router[a19_0x2e1ff8(0x15a)]('/domain-monitoring/stats',(_0x5ac529,_0x5b1410)=>{const _0x46a75f=a19_0x2e1ff8;try{const _0x3c6c60=domainMonitoringService_1[_0x46a75f(0x14e)][_0x46a75f(0x18a)]();_0x5b1410[_0x46a75f(0x167)]({'success':!![],'result':{..._0x3c6c60,'description':'Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','behavior':_0x46a75f(0x174),'encoding':'Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs'}});}catch(_0xada6fc){_0x5b1410[_0x46a75f(0x197)](0x1f4)[_0x46a75f(0x167)]({'success':![],'message':_0x46a75f(0x145)});}}),router['post']('/domain-monitoring/check',async(_0x30baa8,_0x299ac5)=>{const _0x30a114=a19_0x2e1ff8;try{const _0x49bf4e=await domainMonitoringService_1[_0x30a114(0x14e)][_0x30a114(0x1a5)]();_0x299ac5['json']({'success':!![],'result':{'domainAvailable':_0x49bf4e,'message':_0x49bf4e?_0x30a114(0x13f):_0x30a114(0x17c),'timestamp':new Date()[_0x30a114(0x18e)]()}});}catch(_0x8ed302){_0x299ac5['status'](0x1f4)[_0x30a114(0x167)]({'success':![],'message':_0x8ed302 instanceof Error?_0x8ed302['message']:_0x30a114(0x134)});}}),exports[a19_0x2e1ff8(0x192)]=router;function a19_0x3f2d(){const _0x11b2c2=['61129xmvxTr','/users','1026711yzsDqT','Failed\x20to\x20get\x20payment\x20information','checkAuth','/users/:id/activate','floor','11933800wogSik','/payouts/:id','updateCustomerData','Domain\x20is\x20responding\x20correctly','createUserSchema','gatewayPaymentId','/merchants/selection','__importStar','PAID','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','CoinToPay\x20automatic\x20status\x20checking\x20service','currency','authenticateToken','__setModuleDefault','getLogStats','/payments','cointopay','createPayout','domainMonitoringService','body','updateUser','express','checkPaymentById','/payout','5659880oVHArD','getServiceStats','then','/cointopay/stats','getUserById','\x20days)','get','/statistics','loggerService','getUsers','updatedAt','/payouts','delete','error','/auth','10636AoxTsY','/payments/:id','now','defineProperty','json','createPayoutSchema','deleteUser','14PwsXlD','5052SXSFeV','/logs/clean','Failed\x20to\x20clean\x20old\x20logs','/payout/merchants','createUser','Old\x20logs\x20cleaned\x20(kept\x20last\x20','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','AdminController','getMerchantsAwaitingPayout','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','post','put','validate','prototype','../services/loggerService','payment','getPaymentTimerInfo','Domain\x20check\x20failed','create','amount','PENDING','16526820azoLWy','findUnique','../controllers/adminController','createdAt','requireAdmin','4vcdIGQ','../middleware/validation','getStatistics','/cointopay/payment/:paymentId','❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','getMonitoringStats','expiryDays','FAILED','gateway','toISOString','Payment\x20not\x20found','updateUserSchema','hasOwnProperty','default','../services/coinToPayStatusService','getMerchantsSelection','1917toyvoI','message','status','../middleware/auth','3755GmYidD','getPayoutStats','/users/:id/suspend','resolve','\x20days\x20if\x20not\x20paid','getPayoutById','cleanOldLogs','length','22kaiSUQ','🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','/users/:id','/merchant-statistics','manualCheck','shop','activateUser','__esModule','suspendUser','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','Router','updateCustomerDataSchema','params','../config/database','getMerchantStatistics','Failed\x20to\x20get\x20log\x20statistics','/payout/stats','getOwnPropertyNames','coinToPayStatusService','getPayments','Failed\x20to\x20perform\x20manual\x20domain\x20check'];a19_0x3f2d=function(){return _0x11b2c2;};return a19_0x3f2d();}