'use strict';const a27_0x435846=a27_0x2a30;function a27_0x2af7(){const _0x40bd5d=['updateUser','updateCustomerData','getStatistics','CoinToPay\x20automatic\x20status\x20checking\x20service','/2fa/disable','cleanupStalePendingPayments','body','4839408QXxHdy','getPayouts','updatePayoutSchema','Failed\x20to\x20get\x20payment\x20information','get','changePasswordSchema','setup2FA','/shops/:shopId/2fa/setup','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','AdminController','checkAuth','Domain\x20check\x20failed','getPaymentTimerInfo','PENDING','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','Payment\x20not\x20found','/login-logs/:shopId','/users/:id','/users/:id/activate','/payment-links/expire','coinToPayStatusService','disableAdmin2FA','24PuJsGW','979dMyUvb','CoinToPay\x20payment\x20status\x20checked\x20successfully','checkPaymentById','__setModuleDefault','create','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','getMonitoringStats','/shops/:shopId/2fa/enable','__esModule','prototype','findUnique','/merchant-statistics','/payout/stats','/shops/:shopId/wallets','/cointopay/payment/:paymentId','length','createPayoutSchema','/domain-monitoring/stats','createdAt','getLoginLogs','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','defineProperty','/users','updateGatewaySettings','FAILED','/auth','deletePayout','getGatewayStatistics','loggerService','/payments/:id/customer','getMerchantsAwaitingPayout','../middleware/validation','amount','default','createUserSchema','/statistics','/gateway-settings','call','params','changeAdminPassword','getProcessingPaymentsStats','EXPIRED','gateway','/payments/cleanup','../controllers/adminController','getLogStats','156012LyVPUp','/deposit','/logs/clean','resolve','then','/payments/:id','updateCustomerDataSchema','expiryDays','updateUserSchema','suspendUser','/payments/cleanup-pending','delete','getGatewaySettings','get2FASettings','Payments\x20automatically\x20expire\x20after\x20','configurable','\x20days\x20if\x20not\x20paid','/domain-monitoring/check','paymentId','307180CqFckr','activateUser','createPayout','post','88508pJuiCj','getPaymentById','getTime','validate','now','getMerchantStatistics','Failed\x20to\x20get\x20log\x20statistics','put','Router','cleanupStalePayments','floor','../services/loggerService','Domain\x20is\x20responding\x20correctly','getShopWallets','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','express','/payouts/reports','/payments','json','deleteUser','message','requireAdmin','72796AmjuOg','../config/database','584NnZHIZ','status','domainMonitoringService','use','65zIXnBC','patch','../services/domainMonitoringService','expirePaymentLinks','/logs/stats','getPayments','2366376XwNDAy','cleanOldLogs','hasOwnProperty','/payments/processing-stats','__importStar','/2fa/settings','shop','../middleware/auth','gatewayPaymentId','802282WprBtr','/payments/cleanup-with-report','/gateway-settings/:gatewayId','/2fa/setup','/payout/:id','__createBinding','toISOString','/payouts/:id','log','getUserById'];a27_0x2af7=function(){return _0x40bd5d;};return a27_0x2af7();}(function(_0x3fa3e7,_0x4f7cab){const _0x3331f6=a27_0x2a30,_0x64ee8a=_0x3fa3e7();while(!![]){try{const _0x1dc024=-parseInt(_0x3331f6(0x112))/0x1+parseInt(_0x3331f6(0x168))/0x2*(-parseInt(_0x3331f6(0x139))/0x3)+-parseInt(_0x3331f6(0xfd))/0x4*(-parseInt(_0x3331f6(0x103))/0x5)+parseInt(_0x3331f6(0x109))/0x6+parseInt(_0x3331f6(0xe7))/0x7*(-parseInt(_0x3331f6(0xff))/0x8)+-parseInt(_0x3331f6(0x123))/0x9+parseInt(_0x3331f6(0xe3))/0xa*(parseInt(_0x3331f6(0x13a))/0xb);if(_0x1dc024===_0x4f7cab)break;else _0x64ee8a['push'](_0x64ee8a['shift']());}catch(_0x257abf){_0x64ee8a['push'](_0x64ee8a['shift']());}}}(a27_0x2af7,0x74a87));var __createBinding=this&&this[a27_0x435846(0x117)]||(Object[a27_0x435846(0x13e)]?function(_0x11a48e,_0x4d6fd9,_0x1cb20e,_0x5a5051){const _0x5e0ef2=a27_0x435846;if(_0x5a5051===undefined)_0x5a5051=_0x1cb20e;var _0x1b8158=Object['getOwnPropertyDescriptor'](_0x4d6fd9,_0x1cb20e);(!_0x1b8158||('get'in _0x1b8158?!_0x4d6fd9['__esModule']:_0x1b8158['writable']||_0x1b8158[_0x5e0ef2(0xdf)]))&&(_0x1b8158={'enumerable':!![],'get':function(){return _0x4d6fd9[_0x1cb20e];}}),Object[_0x5e0ef2(0x14f)](_0x11a48e,_0x5a5051,_0x1b8158);}:function(_0x2d4914,_0x49b959,_0x3e44a1,_0x4b3201){if(_0x4b3201===undefined)_0x4b3201=_0x3e44a1;_0x2d4914[_0x4b3201]=_0x49b959[_0x3e44a1];}),__setModuleDefault=this&&this[a27_0x435846(0x13d)]||(Object[a27_0x435846(0x13e)]?function(_0x4f4398,_0x12455e){const _0xe987f4=a27_0x435846;Object[_0xe987f4(0x14f)](_0x4f4398,_0xe987f4(0x15b),{'enumerable':!![],'value':_0x12455e});}:function(_0x719c5b,_0x4f011f){const _0xdee59b=a27_0x435846;_0x719c5b[_0xdee59b(0x15b)]=_0x4f011f;}),__importStar=this&&this[a27_0x435846(0x10d)]||(function(){var _0x1d239f=function(_0x6c6b3c){return _0x1d239f=Object['getOwnPropertyNames']||function(_0x4a6aad){const _0x853b4=a27_0x2a30;var _0x34bfc0=[];for(var _0x2de7ec in _0x4a6aad)if(Object[_0x853b4(0x143)][_0x853b4(0x10b)][_0x853b4(0x15f)](_0x4a6aad,_0x2de7ec))_0x34bfc0[_0x34bfc0[_0x853b4(0x149)]]=_0x2de7ec;return _0x34bfc0;},_0x1d239f(_0x6c6b3c);};return function(_0x362db7){const _0x1bf9d0=a27_0x2a30;if(_0x362db7&&_0x362db7['__esModule'])return _0x362db7;var _0xad5fef={};if(_0x362db7!=null){for(var _0xcf61df=_0x1d239f(_0x362db7),_0x63e9d6=0x0;_0x63e9d6<_0xcf61df[_0x1bf9d0(0x149)];_0x63e9d6++)if(_0xcf61df[_0x63e9d6]!==_0x1bf9d0(0x15b))__createBinding(_0xad5fef,_0x362db7,_0xcf61df[_0x63e9d6]);}return __setModuleDefault(_0xad5fef,_0x362db7),_0xad5fef;};}());function a27_0x2a30(_0x156610,_0x5526e0){_0x156610=_0x156610-0xda;const _0x2af7f1=a27_0x2af7();let _0x2a30fc=_0x2af7f1[_0x156610];return _0x2a30fc;}Object['defineProperty'](exports,a27_0x435846(0x142),{'value':!![]});const express_1=require(a27_0x435846(0xf6)),adminController_1=require(a27_0x435846(0x166)),validation_1=require(a27_0x435846(0x159)),auth_1=require(a27_0x435846(0x110)),loggerService_1=require(a27_0x435846(0xf2)),coinToPayStatusService_1=require('../services/coinToPayStatusService'),domainMonitoringService_1=require(a27_0x435846(0x105)),router=(0x0,express_1[a27_0x435846(0xef)])(),adminController=new adminController_1[(a27_0x435846(0x12c))]();router[a27_0x435846(0x102)](auth_1['authenticateToken'],auth_1[a27_0x435846(0xfc)]),router[a27_0x435846(0x127)](a27_0x435846(0x153),adminController[a27_0x435846(0x12d)]),router['get'](a27_0x435846(0x15d),adminController[a27_0x435846(0x11e)]),router[a27_0x435846(0x127)](a27_0x435846(0x145),adminController[a27_0x435846(0xec)]),router['get'](a27_0x435846(0x146),adminController['getPayoutStats']),router[a27_0x435846(0x127)]('/payout/merchants',adminController[a27_0x435846(0x158)]),router[a27_0x435846(0x127)](a27_0x435846(0xf7),adminController['getPayoutReports']),router[a27_0x435846(0x127)]('/merchants/selection',adminController['getMerchantsSelection']),router[a27_0x435846(0xe6)]('/payout',(0x0,validation_1[a27_0x435846(0xea)])(validation_1[a27_0x435846(0x14a)]),adminController[a27_0x435846(0xe5)]),router[a27_0x435846(0xee)](a27_0x435846(0x116),(0x0,validation_1[a27_0x435846(0xea)])(validation_1[a27_0x435846(0x125)]),adminController['updatePayout']),router[a27_0x435846(0x127)]('/payouts',adminController[a27_0x435846(0x124)]),router[a27_0x435846(0x127)](a27_0x435846(0x119),adminController['getPayoutById']),router['delete'](a27_0x435846(0x119),adminController[a27_0x435846(0x154)]),router[a27_0x435846(0x127)](a27_0x435846(0xf8),adminController[a27_0x435846(0x108)]),router[a27_0x435846(0x127)](a27_0x435846(0x16d),adminController[a27_0x435846(0xe8)]),router[a27_0x435846(0xee)]('/payments/:id',adminController['updatePayment']),router[a27_0x435846(0xee)](a27_0x435846(0x157),(0x0,validation_1[a27_0x435846(0xea)])(validation_1[a27_0x435846(0x16e)]),adminController[a27_0x435846(0x11d)]),router[a27_0x435846(0x127)](a27_0x435846(0x10c),adminController[a27_0x435846(0x162)]),router[a27_0x435846(0xe6)](a27_0x435846(0x165),adminController[a27_0x435846(0xf0)]),router[a27_0x435846(0xe6)](a27_0x435846(0xda),adminController[a27_0x435846(0x121)]),router[a27_0x435846(0xe6)](a27_0x435846(0x113),adminController['cleanupStalePaymentsWithReport']),router[a27_0x435846(0xe6)](a27_0x435846(0x136),adminController[a27_0x435846(0x106)]),router[a27_0x435846(0x127)](a27_0x435846(0x150),adminController['getUsers']),router['get'](a27_0x435846(0x134),adminController[a27_0x435846(0x11b)]),router[a27_0x435846(0xe6)](a27_0x435846(0x150),(0x0,validation_1[a27_0x435846(0xea)])(validation_1[a27_0x435846(0x15c)]),adminController['createUser']),router[a27_0x435846(0xee)](a27_0x435846(0x134),(0x0,validation_1['validate'])(validation_1[a27_0x435846(0x170)]),adminController[a27_0x435846(0x11c)]),router[a27_0x435846(0xdb)]('/users/:id',adminController[a27_0x435846(0xfa)]),router[a27_0x435846(0x127)](a27_0x435846(0x147),adminController[a27_0x435846(0xf4)]),router[a27_0x435846(0xe6)](a27_0x435846(0x12a),adminController[a27_0x435846(0x129)]),router[a27_0x435846(0xe6)](a27_0x435846(0x141),adminController['enable2FA']),router[a27_0x435846(0xe6)]('/shops/:shopId/2fa/disable',adminController['disable2FA']),router['post']('/password',(0x0,validation_1[a27_0x435846(0xea)])(validation_1[a27_0x435846(0x128)]),adminController[a27_0x435846(0x161)]),router[a27_0x435846(0x127)](a27_0x435846(0x10e),adminController[a27_0x435846(0xdd)]),router[a27_0x435846(0xe6)](a27_0x435846(0x115),adminController['setupAdmin2FA']),router[a27_0x435846(0xe6)]('/2fa/enable',adminController['enableAdmin2FA']),router['post'](a27_0x435846(0x120),adminController[a27_0x435846(0x138)]),router['post']('/users/:id/suspend',adminController[a27_0x435846(0x171)]),router[a27_0x435846(0xe6)](a27_0x435846(0x135),adminController[a27_0x435846(0xe4)]),router['post'](a27_0x435846(0x169),adminController['depositBalance']),router[a27_0x435846(0x127)](a27_0x435846(0x133),adminController[a27_0x435846(0x14d)]),router[a27_0x435846(0x127)](a27_0x435846(0x15e),adminController[a27_0x435846(0xdc)]),router[a27_0x435846(0x104)](a27_0x435846(0x114),adminController[a27_0x435846(0x151)]),router['get']('/gateway-statistics/:gatewayId',adminController[a27_0x435846(0x155)]),router[a27_0x435846(0x127)](a27_0x435846(0x107),(_0xa8406e,_0x54c568)=>{const _0x46a91c=a27_0x435846;try{const _0x1ad810=loggerService_1['loggerService'][_0x46a91c(0x167)]();_0x54c568[_0x46a91c(0xf9)]({'success':!![],'result':_0x1ad810});}catch(_0x4c9600){_0x54c568[_0x46a91c(0x100)](0x1f4)[_0x46a91c(0xf9)]({'success':![],'message':_0x46a91c(0xed)});}}),router[a27_0x435846(0xe6)](a27_0x435846(0x16a),(_0x2425fd,_0x299626)=>{const _0x49d153=a27_0x435846;try{const {daysToKeep:daysToKeep=0x1e}=_0x2425fd[_0x49d153(0x122)];loggerService_1[_0x49d153(0x156)][_0x49d153(0x10a)](daysToKeep),_0x299626[_0x49d153(0xf9)]({'success':!![],'message':'Old\x20logs\x20cleaned\x20(kept\x20last\x20'+daysToKeep+'\x20days)'});}catch(_0x5d1f49){_0x299626[_0x49d153(0x100)](0x1f4)[_0x49d153(0xf9)]({'success':![],'message':'Failed\x20to\x20clean\x20old\x20logs'});}}),router[a27_0x435846(0xe6)]('/cointopay/check/:paymentId',async(_0x3b05ee,_0x459fba)=>{const _0x59b444=a27_0x435846;try{const {paymentId:_0x567e75}=_0x3b05ee[_0x59b444(0x160)];console[_0x59b444(0x11a)](_0x59b444(0x12b)+_0x567e75),await coinToPayStatusService_1[_0x59b444(0x137)][_0x59b444(0x13c)](_0x567e75),_0x459fba[_0x59b444(0xf9)]({'success':!![],'message':_0x59b444(0x13b)});}catch(_0x5ccd62){console['error'](_0x59b444(0xf5)+_0x3b05ee['params'][_0x59b444(0xe2)]+':',_0x5ccd62),_0x459fba[_0x59b444(0x100)](0x1f4)[_0x59b444(0xf9)]({'success':![],'message':_0x5ccd62 instanceof Error?_0x5ccd62[_0x59b444(0xfb)]:_0x59b444(0x14e)});}}),router[a27_0x435846(0x127)]('/cointopay/stats',(_0x1af84d,_0x1fde0b)=>{const _0x244927=a27_0x435846;try{const _0x49a55c=coinToPayStatusService_1[_0x244927(0x137)]['getServiceStats']();_0x1fde0b[_0x244927(0xf9)]({'success':!![],'result':{..._0x49a55c,'description':_0x244927(0x11f),'statusMapping':{'Paid':'PAID','Awaiting\x20Fiat':_0x244927(0x130),'waiting':'PENDING','expired':_0x244927(0x163),'failed':_0x244927(0x152)},'autoExpiryNote':_0x244927(0xde)+_0x49a55c[_0x244927(0x16f)]+_0x244927(0xe0),'individualTimersNote':'Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly'}});}catch(_0x33e643){_0x1fde0b[_0x244927(0x100)](0x1f4)[_0x244927(0xf9)]({'success':![],'message':_0x244927(0x131)});}}),router['get'](a27_0x435846(0x148),async(_0x429ff3,_0x2b248d)=>{const _0x514ac3=a27_0x435846;try{const {paymentId:_0x386961}=_0x429ff3[_0x514ac3(0x160)],_0x457261=coinToPayStatusService_1[_0x514ac3(0x137)][_0x514ac3(0x12f)](_0x386961),_0x47158a=(await Promise[_0x514ac3(0x16b)]()[_0x514ac3(0x16c)](()=>__importStar(require(_0x514ac3(0xfe)))))[_0x514ac3(0x15b)],_0x413cb6=await _0x47158a['payment'][_0x514ac3(0x144)]({'where':{'id':_0x386961},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x413cb6)return _0x2b248d[_0x514ac3(0x100)](0x194)[_0x514ac3(0xf9)]({'success':![],'message':_0x514ac3(0x132)});_0x2b248d[_0x514ac3(0xf9)]({'success':!![],'result':{'payment':{'id':_0x413cb6['id'],'gateway':_0x413cb6[_0x514ac3(0x164)],'gatewayPaymentId':_0x413cb6[_0x514ac3(0x111)],'status':_0x413cb6[_0x514ac3(0x100)],'amount':_0x413cb6[_0x514ac3(0x15a)],'currency':_0x413cb6['currency'],'createdAt':_0x413cb6[_0x514ac3(0x14c)],'updatedAt':_0x413cb6['updatedAt'],'shop':_0x413cb6[_0x514ac3(0x10f)]},'timers':_0x457261,'isCoinToPay':_0x413cb6['gateway']==='cointopay','ageInMinutes':Math[_0x514ac3(0xf1)]((Date[_0x514ac3(0xeb)]()-_0x413cb6[_0x514ac3(0x14c)][_0x514ac3(0xe9)]())/(0x3e8*0x3c))}});}catch(_0x33de7d){_0x2b248d[_0x514ac3(0x100)](0x1f4)['json']({'success':![],'message':_0x33de7d instanceof Error?_0x33de7d[_0x514ac3(0xfb)]:_0x514ac3(0x126)});}}),router[a27_0x435846(0x127)](a27_0x435846(0x14b),(_0x4a2855,_0x250e00)=>{const _0x101018=a27_0x435846;try{const _0x3e9fb0=domainMonitoringService_1['domainMonitoringService'][_0x101018(0x140)]();_0x250e00[_0x101018(0xf9)]({'success':!![],'result':{..._0x3e9fb0,'description':_0x101018(0x13f),'behavior':'Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','encoding':'Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs'}});}catch(_0xe37c51){_0x250e00[_0x101018(0x100)](0x1f4)['json']({'success':![],'message':'Failed\x20to\x20get\x20domain\x20monitoring\x20statistics'});}}),router[a27_0x435846(0xe6)](a27_0x435846(0xe1),async(_0x5a31af,_0x220cc2)=>{const _0xf3c047=a27_0x435846;try{const _0x2c6540=await domainMonitoringService_1[_0xf3c047(0x101)]['manualCheck']();_0x220cc2[_0xf3c047(0xf9)]({'success':!![],'result':{'domainAvailable':_0x2c6540,'message':_0x2c6540?_0xf3c047(0xf3):_0xf3c047(0x12e),'timestamp':new Date()[_0xf3c047(0x118)]()}});}catch(_0x4ce719){_0x220cc2[_0xf3c047(0x100)](0x1f4)[_0xf3c047(0xf9)]({'success':![],'message':_0x4ce719 instanceof Error?_0x4ce719[_0xf3c047(0xfb)]:'Failed\x20to\x20perform\x20manual\x20domain\x20check'});}}),exports['default']=router;