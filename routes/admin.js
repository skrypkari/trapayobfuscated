'use strict';const a19_0x57092b=a19_0x115d;function a19_0x115d(_0x12c62d,_0x146a31){const _0x22f6f4=a19_0x22f6();return a19_0x115d=function(_0x115d2d,_0x38d2a6){_0x115d2d=_0x115d2d-0x8c;let _0x3c2fe3=_0x22f6f4[_0x115d2d];return _0x3c2fe3;},a19_0x115d(_0x12c62d,_0x146a31);}function a19_0x22f6(){const _0x447972=['/logs/stats','deleteUser','findUnique','error','Payments\x20automatically\x20expire\x20after\x20','validate','/merchants/selection','gatewayPaymentId','/logs/clean','shop','deletePayout','/cointopay/stats','/payments/:id/customer','hasOwnProperty','createPayout','configurable','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','getMerchantsAwaitingPayout','Old\x20logs\x20cleaned\x20(kept\x20last\x20','/auth','/payouts/:id','log','resolve','default','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','message','params','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','then','Failed\x20to\x20get\x20payment\x20information','204305OkjyMy','Failed\x20to\x20clean\x20old\x20logs','719601UakKTr','PENDING','/domain-monitoring/check','getPayoutStats','AdminController','updatedAt','getLogStats','gateway','currency','amount','/payments/:id','/cointopay/check/:paymentId','expiryDays','createUserSchema','writable','/users/:id','createPayoutSchema','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','getTime','express','/statistics','CoinToPay\x20automatic\x20status\x20checking\x20service','put','__createBinding','loggerService','../middleware/auth','getStatistics','504060fySxDb','getMerchantStatistics','coinToPayStatusService','getPayoutById','getOwnPropertyNames','delete','../services/loggerService','getOwnPropertyDescriptor','__setModuleDefault','/payments','floor','createdAt','/payout/merchants','1327319xCKgUb','134884aVTimY','/users/:id/suspend','payment','updateCustomerDataSchema','getPayments','get','defineProperty','getServiceStats','json','__esModule','domainMonitoringService','\x20days)','updateCustomerData','510870IANJAG','/payouts','15dqQqzr','Domain\x20check\x20failed','requireAdmin','suspendUser','CoinToPay\x20payment\x20status\x20checked\x20successfully','getPaymentTimerInfo','post','../config/database','Payment\x20not\x20found','checkPaymentById','cleanOldLogs','\x20days\x20if\x20not\x20paid','/payout/stats','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','7687168ZIsnym','status','now','Failed\x20to\x20get\x20log\x20statistics','body','length','prototype','getPaymentById','authenticateToken','/users','FAILED'];a19_0x22f6=function(){return _0x447972;};return a19_0x22f6();}(function(_0x5906dd,_0x20d09f){const _0x21f8db=a19_0x115d,_0x3619ca=_0x5906dd();while(!![]){try{const _0x26444c=parseInt(_0x21f8db(0xe3))/0x1+parseInt(_0x21f8db(0x8d))/0x2+parseInt(_0x21f8db(0xe5))/0x3+-parseInt(_0x21f8db(0x9b))/0x4+-parseInt(_0x21f8db(0xaa))/0x5*(-parseInt(_0x21f8db(0xa8))/0x6)+parseInt(_0x21f8db(0x9a))/0x7+-parseInt(_0x21f8db(0xb8))/0x8;if(_0x26444c===_0x20d09f)break;else _0x3619ca['push'](_0x3619ca['shift']());}catch(_0x30a848){_0x3619ca['push'](_0x3619ca['shift']());}}}(a19_0x22f6,0x23ccd));var __createBinding=this&&this[a19_0x57092b(0xfc)]||(Object['create']?function(_0x242959,_0x4911b2,_0xf76dcb,_0x477c9c){const _0x235e43=a19_0x57092b;if(_0x477c9c===undefined)_0x477c9c=_0xf76dcb;var _0x18ac13=Object[_0x235e43(0x94)](_0x4911b2,_0xf76dcb);(!_0x18ac13||(_0x235e43(0xa0)in _0x18ac13?!_0x4911b2[_0x235e43(0xa4)]:_0x18ac13[_0x235e43(0xf3)]||_0x18ac13[_0x235e43(0xd2)]))&&(_0x18ac13={'enumerable':!![],'get':function(){return _0x4911b2[_0xf76dcb];}}),Object[_0x235e43(0xa1)](_0x242959,_0x477c9c,_0x18ac13);}:function(_0x5a7feb,_0x839933,_0x191c0d,_0x489c12){if(_0x489c12===undefined)_0x489c12=_0x191c0d;_0x5a7feb[_0x489c12]=_0x839933[_0x191c0d];}),__setModuleDefault=this&&this[a19_0x57092b(0x95)]||(Object['create']?function(_0x15c7f4,_0x42d504){const _0x93603b=a19_0x57092b;Object['defineProperty'](_0x15c7f4,_0x93603b(0xda),{'enumerable':!![],'value':_0x42d504});}:function(_0xf1b346,_0x5a4b73){const _0x24eb34=a19_0x57092b;_0xf1b346[_0x24eb34(0xda)]=_0x5a4b73;}),__importStar=this&&this['__importStar']||(function(){var _0x182835=function(_0x513fd1){const _0x371eba=a19_0x115d;return _0x182835=Object[_0x371eba(0x91)]||function(_0x2dbf56){const _0x5aa327=_0x371eba;var _0x39f0a7=[];for(var _0x414008 in _0x2dbf56)if(Object[_0x5aa327(0xbe)][_0x5aa327(0xd0)]['call'](_0x2dbf56,_0x414008))_0x39f0a7[_0x39f0a7[_0x5aa327(0xbd)]]=_0x414008;return _0x39f0a7;},_0x182835(_0x513fd1);};return function(_0xb21138){const _0x185f09=a19_0x115d;if(_0xb21138&&_0xb21138[_0x185f09(0xa4)])return _0xb21138;var _0x1fa461={};if(_0xb21138!=null){for(var _0x23f2bb=_0x182835(_0xb21138),_0x44bbdd=0x0;_0x44bbdd<_0x23f2bb[_0x185f09(0xbd)];_0x44bbdd++)if(_0x23f2bb[_0x44bbdd]!=='default')__createBinding(_0x1fa461,_0xb21138,_0x23f2bb[_0x44bbdd]);}return __setModuleDefault(_0x1fa461,_0xb21138),_0x1fa461;};}());Object[a19_0x57092b(0xa1)](exports,a19_0x57092b(0xa4),{'value':!![]});const express_1=require(a19_0x57092b(0xf8)),adminController_1=require('../controllers/adminController'),validation_1=require('../middleware/validation'),auth_1=require(a19_0x57092b(0xfe)),loggerService_1=require(a19_0x57092b(0x93)),coinToPayStatusService_1=require('../services/coinToPayStatusService'),domainMonitoringService_1=require('../services/domainMonitoringService'),router=(0x0,express_1['Router'])(),adminController=new adminController_1[(a19_0x57092b(0xe9))]();router['use'](auth_1[a19_0x57092b(0xc0)],auth_1[a19_0x57092b(0xac)]),router[a19_0x57092b(0xa0)](a19_0x57092b(0xd6),adminController['checkAuth']),router[a19_0x57092b(0xa0)](a19_0x57092b(0xf9),adminController[a19_0x57092b(0x8c)]),router[a19_0x57092b(0xa0)]('/merchant-statistics',adminController[a19_0x57092b(0x8e)]),router[a19_0x57092b(0xa0)](a19_0x57092b(0xb6),adminController[a19_0x57092b(0xe8)]),router[a19_0x57092b(0xa0)](a19_0x57092b(0x99),adminController[a19_0x57092b(0xd4)]),router[a19_0x57092b(0xa0)](a19_0x57092b(0xc9),adminController['getMerchantsSelection']),router[a19_0x57092b(0xb0)]('/payout',(0x0,validation_1['validate'])(validation_1[a19_0x57092b(0xf5)]),adminController[a19_0x57092b(0xd1)]),router[a19_0x57092b(0xa0)](a19_0x57092b(0xa9),adminController['getPayouts']),router[a19_0x57092b(0xa0)](a19_0x57092b(0xd7),adminController[a19_0x57092b(0x90)]),router[a19_0x57092b(0x92)]('/payouts/:id',adminController[a19_0x57092b(0xcd)]),router['get'](a19_0x57092b(0x96),adminController[a19_0x57092b(0x9f)]),router[a19_0x57092b(0xa0)]('/payments/:id',adminController[a19_0x57092b(0xbf)]),router['put'](a19_0x57092b(0xef),adminController['updatePayment']),router[a19_0x57092b(0xfb)](a19_0x57092b(0xcf),(0x0,validation_1['validate'])(validation_1[a19_0x57092b(0x9e)]),adminController[a19_0x57092b(0xa7)]),router[a19_0x57092b(0xa0)](a19_0x57092b(0xc1),adminController['getUsers']),router[a19_0x57092b(0xa0)](a19_0x57092b(0xf4),adminController['getUserById']),router[a19_0x57092b(0xb0)](a19_0x57092b(0xc1),(0x0,validation_1['validate'])(validation_1[a19_0x57092b(0xf2)]),adminController['createUser']),router[a19_0x57092b(0xfb)](a19_0x57092b(0xf4),(0x0,validation_1[a19_0x57092b(0xc8)])(validation_1['updateUserSchema']),adminController['updateUser']),router[a19_0x57092b(0x92)](a19_0x57092b(0xf4),adminController[a19_0x57092b(0xc4)]),router['post'](a19_0x57092b(0x9c),adminController[a19_0x57092b(0xad)]),router[a19_0x57092b(0xb0)]('/users/:id/activate',adminController['activateUser']),router[a19_0x57092b(0xa0)](a19_0x57092b(0xc3),(_0x37abc3,_0xb7b61f)=>{const _0x1110d9=a19_0x57092b;try{const _0x3b8583=loggerService_1[_0x1110d9(0xfd)][_0x1110d9(0xeb)]();_0xb7b61f['json']({'success':!![],'result':_0x3b8583});}catch(_0x5d4f86){_0xb7b61f['status'](0x1f4)[_0x1110d9(0xa3)]({'success':![],'message':_0x1110d9(0xbb)});}}),router[a19_0x57092b(0xb0)](a19_0x57092b(0xcb),(_0x57b90b,_0x183c59)=>{const _0x21c188=a19_0x57092b;try{const {daysToKeep:daysToKeep=0x1e}=_0x57b90b[_0x21c188(0xbc)];loggerService_1[_0x21c188(0xfd)][_0x21c188(0xb4)](daysToKeep),_0x183c59[_0x21c188(0xa3)]({'success':!![],'message':_0x21c188(0xd5)+daysToKeep+_0x21c188(0xa6)});}catch(_0x4ac73b){_0x183c59[_0x21c188(0xb9)](0x1f4)[_0x21c188(0xa3)]({'success':![],'message':_0x21c188(0xe4)});}}),router[a19_0x57092b(0xb0)](a19_0x57092b(0xf0),async(_0x24cda7,_0x33550d)=>{const _0x4c204d=a19_0x57092b;try{const {paymentId:_0x4da781}=_0x24cda7[_0x4c204d(0xdf)];console[_0x4c204d(0xd8)](_0x4c204d(0xf6)+_0x4da781),await coinToPayStatusService_1[_0x4c204d(0x8f)][_0x4c204d(0xb3)](_0x4da781),_0x33550d[_0x4c204d(0xa3)]({'success':!![],'message':_0x4c204d(0xae)});}catch(_0x11c468){console[_0x4c204d(0xc6)](_0x4c204d(0xb7)+_0x24cda7[_0x4c204d(0xdf)]['paymentId']+':',_0x11c468),_0x33550d[_0x4c204d(0xb9)](0x1f4)[_0x4c204d(0xa3)]({'success':![],'message':_0x11c468 instanceof Error?_0x11c468['message']:_0x4c204d(0xd3)});}}),router['get'](a19_0x57092b(0xce),(_0x154207,_0x5517ec)=>{const _0x48a23f=a19_0x57092b;try{const _0x5cac38=coinToPayStatusService_1['coinToPayStatusService'][_0x48a23f(0xa2)]();_0x5517ec[_0x48a23f(0xa3)]({'success':!![],'result':{..._0x5cac38,'description':_0x48a23f(0xfa),'statusMapping':{'Paid':'PAID','Awaiting\x20Fiat':'PENDING','waiting':_0x48a23f(0xe6),'expired':'EXPIRED','failed':_0x48a23f(0xc2)},'autoExpiryNote':_0x48a23f(0xc7)+_0x5cac38[_0x48a23f(0xf1)]+_0x48a23f(0xb5),'individualTimersNote':'Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly'}});}catch(_0x17b10d){_0x5517ec[_0x48a23f(0xb9)](0x1f4)[_0x48a23f(0xa3)]({'success':![],'message':_0x48a23f(0xe0)});}}),router[a19_0x57092b(0xa0)]('/cointopay/payment/:paymentId',async(_0x3b70d1,_0x1d7c9c)=>{const _0x1a46c1=a19_0x57092b;try{const {paymentId:_0x31ab1e}=_0x3b70d1[_0x1a46c1(0xdf)],_0x5ec0da=coinToPayStatusService_1[_0x1a46c1(0x8f)][_0x1a46c1(0xaf)](_0x31ab1e),_0x9f50fd=(await Promise[_0x1a46c1(0xd9)]()[_0x1a46c1(0xe1)](()=>__importStar(require(_0x1a46c1(0xb1)))))['default'],_0x2988d1=await _0x9f50fd[_0x1a46c1(0x9d)][_0x1a46c1(0xc5)]({'where':{'id':_0x31ab1e},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x2988d1)return _0x1d7c9c[_0x1a46c1(0xb9)](0x194)[_0x1a46c1(0xa3)]({'success':![],'message':_0x1a46c1(0xb2)});_0x1d7c9c[_0x1a46c1(0xa3)]({'success':!![],'result':{'payment':{'id':_0x2988d1['id'],'gateway':_0x2988d1['gateway'],'gatewayPaymentId':_0x2988d1[_0x1a46c1(0xca)],'status':_0x2988d1[_0x1a46c1(0xb9)],'amount':_0x2988d1[_0x1a46c1(0xee)],'currency':_0x2988d1[_0x1a46c1(0xed)],'createdAt':_0x2988d1[_0x1a46c1(0x98)],'updatedAt':_0x2988d1[_0x1a46c1(0xea)],'shop':_0x2988d1[_0x1a46c1(0xcc)]},'timers':_0x5ec0da,'isCoinToPay':_0x2988d1[_0x1a46c1(0xec)]==='cointopay','ageInMinutes':Math[_0x1a46c1(0x97)]((Date[_0x1a46c1(0xba)]()-_0x2988d1['createdAt'][_0x1a46c1(0xf7)]())/(0x3e8*0x3c))}});}catch(_0x4d0e70){_0x1d7c9c['status'](0x1f4)[_0x1a46c1(0xa3)]({'success':![],'message':_0x4d0e70 instanceof Error?_0x4d0e70[_0x1a46c1(0xde)]:_0x1a46c1(0xe2)});}}),router[a19_0x57092b(0xa0)]('/domain-monitoring/stats',(_0x594c9e,_0x4d1c05)=>{const _0x205ea7=a19_0x57092b;try{const _0x3a106=domainMonitoringService_1[_0x205ea7(0xa5)]['getMonitoringStats']();_0x4d1c05[_0x205ea7(0xa3)]({'success':!![],'result':{..._0x3a106,'description':_0x205ea7(0xdd),'behavior':'Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','encoding':_0x205ea7(0xdb)}});}catch(_0x26c8f2){_0x4d1c05[_0x205ea7(0xb9)](0x1f4)[_0x205ea7(0xa3)]({'success':![],'message':_0x205ea7(0xdc)});}}),router[a19_0x57092b(0xb0)](a19_0x57092b(0xe7),async(_0x52c649,_0x1692cd)=>{const _0x27d73e=a19_0x57092b;try{const _0x3c4497=await domainMonitoringService_1[_0x27d73e(0xa5)]['manualCheck']();_0x1692cd[_0x27d73e(0xa3)]({'success':!![],'result':{'domainAvailable':_0x3c4497,'message':_0x3c4497?'Domain\x20is\x20responding\x20correctly':_0x27d73e(0xab),'timestamp':new Date()['toISOString']()}});}catch(_0x391d16){_0x1692cd['status'](0x1f4)['json']({'success':![],'message':_0x391d16 instanceof Error?_0x391d16[_0x27d73e(0xde)]:'Failed\x20to\x20perform\x20manual\x20domain\x20check'});}}),exports['default']=router;