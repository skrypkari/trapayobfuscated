'use strict';const a19_0x20a983=a19_0x3654;(function(_0x1ad6d8,_0x4847e9){const _0x46dd20=a19_0x3654,_0x1791bb=_0x1ad6d8();while(!![]){try{const _0x5474c1=parseInt(_0x46dd20(0x21c))/0x1+parseInt(_0x46dd20(0x1d6))/0x2*(parseInt(_0x46dd20(0x1f6))/0x3)+-parseInt(_0x46dd20(0x21d))/0x4*(parseInt(_0x46dd20(0x206))/0x5)+-parseInt(_0x46dd20(0x1db))/0x6+parseInt(_0x46dd20(0x1a4))/0x7*(-parseInt(_0x46dd20(0x1bf))/0x8)+parseInt(_0x46dd20(0x205))/0x9*(-parseInt(_0x46dd20(0x1fb))/0xa)+-parseInt(_0x46dd20(0x1a3))/0xb*(-parseInt(_0x46dd20(0x211))/0xc);if(_0x5474c1===_0x4847e9)break;else _0x1791bb['push'](_0x1791bb['shift']());}catch(_0x28b7fb){_0x1791bb['push'](_0x1791bb['shift']());}}}(a19_0x1fce,0x21406));function a19_0x1fce(){const _0x4435f5=['cointopay','getLogStats','validate','now','19080zLrTiu','5PyugSG','createPayoutSchema','/logs/stats','configurable','delete','\x20days)','create','json','Old\x20logs\x20cleaned\x20(kept\x20last\x20','floor','suspendUser','5540592dVBFdS','body','../services/domainMonitoringService','get','updateCustomerData','paymentId','/payout/stats','/logs/clean','getMerchantsSelection','amount','then','127586hfXciv','1035724rskXQr','params','getPaymentTimerInfo','Failed\x20to\x20get\x20payment\x20information','Router','hasOwnProperty','activateUser','PAID','Domain\x20is\x20responding\x20correctly','11NrBMUu','7JZeEhq','cleanOldLogs','../controllers/adminController','../services/loggerService','Domain\x20check\x20failed','/users/:id/suspend','__importStar','updateUserSchema','EXPIRED','gateway','../services/coinToPayStatusService','getServiceStats','FAILED','Failed\x20to\x20get\x20log\x20statistics','AdminController','__createBinding','/auth','/payouts','/domain-monitoring/check','expiryDays','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','length','getOwnPropertyDescriptor','../config/database','coinToPayStatusService','getOwnPropertyNames','defineProperty','1820936PzFKVH','message','domainMonitoringService','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','getPayouts','/users/:id/activate','/payments','put','writable','PENDING','/statistics','getMerchantStatistics','/users','getPayments','__esModule','loggerService','default','Failed\x20to\x20clean\x20old\x20logs','checkAuth','currency','getTime','shop','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','39876hQkeEK','createPayout','use','getPaymentById','/payments/:id/customer','56460dXAVpp','payment','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','getPayoutStats','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','Failed\x20to\x20perform\x20manual\x20domain\x20check','requireAdmin','/cointopay/payment/:paymentId','\x20days\x20if\x20not\x20paid','prototype','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','gatewayPaymentId','createUser','/payments/:id','manualCheck','../middleware/validation','status','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','checkPaymentById','Payment\x20not\x20found','/users/:id','authenticateToken','error','createUserSchema','updateCustomerDataSchema','CoinToPay\x20automatic\x20status\x20checking\x20service','updatedAt','9tPgzVZ','post','/payouts/:id','resolve','call','80HMIJWF','Payments\x20automatically\x20expire\x20after\x20','updateUser','getMerchantsAwaitingPayout','/payout','express'];a19_0x1fce=function(){return _0x4435f5;};return a19_0x1fce();}var __createBinding=this&&this[a19_0x20a983(0x1b3)]||(Object[a19_0x20a983(0x20c)]?function(_0x5bf7e6,_0x34fe7b,_0x57f056,_0x50ed71){const _0x5bbe53=a19_0x20a983;if(_0x50ed71===undefined)_0x50ed71=_0x57f056;var _0x4de29c=Object[_0x5bbe53(0x1ba)](_0x34fe7b,_0x57f056);(!_0x4de29c||(_0x5bbe53(0x214)in _0x4de29c?!_0x34fe7b[_0x5bbe53(0x1cd)]:_0x4de29c[_0x5bbe53(0x1c7)]||_0x4de29c[_0x5bbe53(0x209)]))&&(_0x4de29c={'enumerable':!![],'get':function(){return _0x34fe7b[_0x57f056];}}),Object['defineProperty'](_0x5bf7e6,_0x50ed71,_0x4de29c);}:function(_0x3e1441,_0x12ac26,_0x2ea11f,_0x509127){if(_0x509127===undefined)_0x509127=_0x2ea11f;_0x3e1441[_0x509127]=_0x12ac26[_0x2ea11f];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a19_0x20a983(0x20c)]?function(_0x29cbca,_0x524dbb){const _0xaa7d1c=a19_0x20a983;Object[_0xaa7d1c(0x1be)](_0x29cbca,_0xaa7d1c(0x1cf),{'enumerable':!![],'value':_0x524dbb});}:function(_0x5893db,_0x302702){_0x5893db['default']=_0x302702;}),__importStar=this&&this[a19_0x20a983(0x1aa)]||(function(){var _0x187445=function(_0xf3025d){const _0x44fb1e=a19_0x3654;return _0x187445=Object[_0x44fb1e(0x1bd)]||function(_0x1bbc6a){const _0x263922=_0x44fb1e;var _0xc622e4=[];for(var _0x1a891d in _0x1bbc6a)if(Object[_0x263922(0x1e4)][_0x263922(0x19f)][_0x263922(0x1fa)](_0x1bbc6a,_0x1a891d))_0xc622e4[_0xc622e4[_0x263922(0x1b9)]]=_0x1a891d;return _0xc622e4;},_0x187445(_0xf3025d);};return function(_0x5b9580){const _0x532050=a19_0x3654;if(_0x5b9580&&_0x5b9580[_0x532050(0x1cd)])return _0x5b9580;var _0x5acb00={};if(_0x5b9580!=null){for(var _0x558f30=_0x187445(_0x5b9580),_0x3bff47=0x0;_0x3bff47<_0x558f30[_0x532050(0x1b9)];_0x3bff47++)if(_0x558f30[_0x3bff47]!==_0x532050(0x1cf))__createBinding(_0x5acb00,_0x5b9580,_0x558f30[_0x3bff47]);}return __setModuleDefault(_0x5acb00,_0x5b9580),_0x5acb00;};}());function a19_0x3654(_0x1b41fd,_0xff66c0){const _0x1fce2d=a19_0x1fce();return a19_0x3654=function(_0x365433,_0x605414){_0x365433=_0x365433-0x19c;let _0xb74864=_0x1fce2d[_0x365433];return _0xb74864;},a19_0x3654(_0x1b41fd,_0xff66c0);}Object[a19_0x20a983(0x1be)](exports,a19_0x20a983(0x1cd),{'value':!![]});const express_1=require(a19_0x20a983(0x200)),adminController_1=require(a19_0x20a983(0x1a6)),validation_1=require(a19_0x20a983(0x1ea)),auth_1=require('../middleware/auth'),loggerService_1=require(a19_0x20a983(0x1a7)),coinToPayStatusService_1=require(a19_0x20a983(0x1ae)),domainMonitoringService_1=require(a19_0x20a983(0x213)),router=(0x0,express_1[a19_0x20a983(0x19e)])(),adminController=new adminController_1[(a19_0x20a983(0x1b2))]();router[a19_0x20a983(0x1d8)](auth_1[a19_0x20a983(0x1f0)],auth_1[a19_0x20a983(0x1e1)]),router[a19_0x20a983(0x214)](a19_0x20a983(0x1b4),adminController[a19_0x20a983(0x1d1)]),router[a19_0x20a983(0x214)](a19_0x20a983(0x1c9),adminController['getStatistics']),router[a19_0x20a983(0x214)]('/merchant-statistics',adminController[a19_0x20a983(0x1ca)]),router['get'](a19_0x20a983(0x217),adminController[a19_0x20a983(0x1de)]),router[a19_0x20a983(0x214)]('/payout/merchants',adminController[a19_0x20a983(0x1fe)]),router[a19_0x20a983(0x214)]('/merchants/selection',adminController[a19_0x20a983(0x219)]),router[a19_0x20a983(0x1f7)](a19_0x20a983(0x1ff),(0x0,validation_1['validate'])(validation_1[a19_0x20a983(0x207)]),adminController[a19_0x20a983(0x1d7)]),router[a19_0x20a983(0x214)](a19_0x20a983(0x1b5),adminController[a19_0x20a983(0x1c3)]),router[a19_0x20a983(0x214)](a19_0x20a983(0x1f8),adminController['getPayoutById']),router['delete']('/payouts/:id',adminController['deletePayout']),router[a19_0x20a983(0x214)](a19_0x20a983(0x1c5),adminController[a19_0x20a983(0x1cc)]),router[a19_0x20a983(0x214)](a19_0x20a983(0x1e8),adminController[a19_0x20a983(0x1d9)]),router['put'](a19_0x20a983(0x1e8),adminController['updatePayment']),router[a19_0x20a983(0x1c6)](a19_0x20a983(0x1da),(0x0,validation_1[a19_0x20a983(0x203)])(validation_1[a19_0x20a983(0x1f3)]),adminController[a19_0x20a983(0x215)]),router['get'](a19_0x20a983(0x1cb),adminController['getUsers']),router['get'](a19_0x20a983(0x1ef),adminController['getUserById']),router['post']('/users',(0x0,validation_1[a19_0x20a983(0x203)])(validation_1[a19_0x20a983(0x1f2)]),adminController[a19_0x20a983(0x1e7)]),router[a19_0x20a983(0x1c6)](a19_0x20a983(0x1ef),(0x0,validation_1[a19_0x20a983(0x203)])(validation_1[a19_0x20a983(0x1ab)]),adminController[a19_0x20a983(0x1fd)]),router[a19_0x20a983(0x20a)]('/users/:id',adminController['deleteUser']),router[a19_0x20a983(0x1f7)](a19_0x20a983(0x1a9),adminController[a19_0x20a983(0x210)]),router['post'](a19_0x20a983(0x1c4),adminController[a19_0x20a983(0x1a0)]),router['get'](a19_0x20a983(0x208),(_0x52cc94,_0x4b5e45)=>{const _0x2a207c=a19_0x20a983;try{const _0x26d890=loggerService_1[_0x2a207c(0x1ce)][_0x2a207c(0x202)]();_0x4b5e45[_0x2a207c(0x20d)]({'success':!![],'result':_0x26d890});}catch(_0x502a18){_0x4b5e45[_0x2a207c(0x1eb)](0x1f4)[_0x2a207c(0x20d)]({'success':![],'message':_0x2a207c(0x1b1)});}}),router[a19_0x20a983(0x1f7)](a19_0x20a983(0x218),(_0xcb95bb,_0x572d63)=>{const _0x3a0228=a19_0x20a983;try{const {daysToKeep:daysToKeep=0x1e}=_0xcb95bb[_0x3a0228(0x212)];loggerService_1['loggerService'][_0x3a0228(0x1a5)](daysToKeep),_0x572d63[_0x3a0228(0x20d)]({'success':!![],'message':_0x3a0228(0x20e)+daysToKeep+_0x3a0228(0x20b)});}catch(_0x29b85d){_0x572d63[_0x3a0228(0x1eb)](0x1f4)[_0x3a0228(0x20d)]({'success':![],'message':_0x3a0228(0x1d0)});}}),router[a19_0x20a983(0x1f7)]('/cointopay/check/:paymentId',async(_0x9615d4,_0x52c4a9)=>{const _0x1b826c=a19_0x20a983;try{const {paymentId:_0x580571}=_0x9615d4[_0x1b826c(0x21e)];console['log'](_0x1b826c(0x1dd)+_0x580571),await coinToPayStatusService_1['coinToPayStatusService'][_0x1b826c(0x1ed)](_0x580571),_0x52c4a9[_0x1b826c(0x20d)]({'success':!![],'message':'CoinToPay\x20payment\x20status\x20checked\x20successfully'});}catch(_0x58633e){console[_0x1b826c(0x1f1)](_0x1b826c(0x1e5)+_0x9615d4[_0x1b826c(0x21e)][_0x1b826c(0x216)]+':',_0x58633e),_0x52c4a9['status'](0x1f4)[_0x1b826c(0x20d)]({'success':![],'message':_0x58633e instanceof Error?_0x58633e['message']:_0x1b826c(0x1ec)});}}),router[a19_0x20a983(0x214)]('/cointopay/stats',(_0x12ac39,_0x3bc4e5)=>{const _0x2bedeb=a19_0x20a983;try{const _0x1044f6=coinToPayStatusService_1[_0x2bedeb(0x1bc)][_0x2bedeb(0x1af)]();_0x3bc4e5[_0x2bedeb(0x20d)]({'success':!![],'result':{..._0x1044f6,'description':_0x2bedeb(0x1f4),'statusMapping':{'Paid':_0x2bedeb(0x1a1),'Awaiting\x20Fiat':'PENDING','waiting':_0x2bedeb(0x1c8),'expired':_0x2bedeb(0x1ac),'failed':_0x2bedeb(0x1b0)},'autoExpiryNote':_0x2bedeb(0x1fc)+_0x1044f6[_0x2bedeb(0x1b7)]+_0x2bedeb(0x1e3),'individualTimersNote':_0x2bedeb(0x1df)}});}catch(_0x500f69){_0x3bc4e5[_0x2bedeb(0x1eb)](0x1f4)[_0x2bedeb(0x20d)]({'success':![],'message':_0x2bedeb(0x1b8)});}}),router[a19_0x20a983(0x214)](a19_0x20a983(0x1e2),async(_0x4b98fb,_0x49a828)=>{const _0x4406d6=a19_0x20a983;try{const {paymentId:_0x50384d}=_0x4b98fb[_0x4406d6(0x21e)],_0x16345d=coinToPayStatusService_1[_0x4406d6(0x1bc)][_0x4406d6(0x19c)](_0x50384d),_0x460e1e=(await Promise[_0x4406d6(0x1f9)]()[_0x4406d6(0x21b)](()=>__importStar(require(_0x4406d6(0x1bb)))))['default'],_0x34535c=await _0x460e1e[_0x4406d6(0x1dc)]['findUnique']({'where':{'id':_0x50384d},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x34535c)return _0x49a828['status'](0x194)['json']({'success':![],'message':_0x4406d6(0x1ee)});_0x49a828[_0x4406d6(0x20d)]({'success':!![],'result':{'payment':{'id':_0x34535c['id'],'gateway':_0x34535c[_0x4406d6(0x1ad)],'gatewayPaymentId':_0x34535c[_0x4406d6(0x1e6)],'status':_0x34535c[_0x4406d6(0x1eb)],'amount':_0x34535c[_0x4406d6(0x21a)],'currency':_0x34535c[_0x4406d6(0x1d2)],'createdAt':_0x34535c['createdAt'],'updatedAt':_0x34535c[_0x4406d6(0x1f5)],'shop':_0x34535c[_0x4406d6(0x1d4)]},'timers':_0x16345d,'isCoinToPay':_0x34535c[_0x4406d6(0x1ad)]===_0x4406d6(0x201),'ageInMinutes':Math[_0x4406d6(0x20f)]((Date[_0x4406d6(0x204)]()-_0x34535c['createdAt'][_0x4406d6(0x1d3)]())/(0x3e8*0x3c))}});}catch(_0x3bece2){_0x49a828['status'](0x1f4)[_0x4406d6(0x20d)]({'success':![],'message':_0x3bece2 instanceof Error?_0x3bece2[_0x4406d6(0x1c0)]:_0x4406d6(0x19d)});}}),router[a19_0x20a983(0x214)]('/domain-monitoring/stats',(_0x2ea0c9,_0x512abe)=>{const _0x1fa3e5=a19_0x20a983;try{const _0x4232af=domainMonitoringService_1[_0x1fa3e5(0x1c1)]['getMonitoringStats']();_0x512abe['json']({'success':!![],'result':{..._0x4232af,'description':'Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','behavior':'Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','encoding':_0x1fa3e5(0x1d5)}});}catch(_0xb524e){_0x512abe[_0x1fa3e5(0x1eb)](0x1f4)[_0x1fa3e5(0x20d)]({'success':![],'message':_0x1fa3e5(0x1c2)});}}),router[a19_0x20a983(0x1f7)](a19_0x20a983(0x1b6),async(_0x38d592,_0x2cb192)=>{const _0x16a2f7=a19_0x20a983;try{const _0x4df17f=await domainMonitoringService_1[_0x16a2f7(0x1c1)][_0x16a2f7(0x1e9)]();_0x2cb192['json']({'success':!![],'result':{'domainAvailable':_0x4df17f,'message':_0x4df17f?_0x16a2f7(0x1a2):_0x16a2f7(0x1a8),'timestamp':new Date()['toISOString']()}});}catch(_0x5c4525){_0x2cb192[_0x16a2f7(0x1eb)](0x1f4)[_0x16a2f7(0x20d)]({'success':![],'message':_0x5c4525 instanceof Error?_0x5c4525[_0x16a2f7(0x1c0)]:_0x16a2f7(0x1e0)});}}),exports[a19_0x20a983(0x1cf)]=router;