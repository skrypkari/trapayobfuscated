'use strict';const a19_0x146d35=a19_0x4f0c;(function(_0x5550b8,_0x355a88){const _0x38d634=a19_0x4f0c,_0x61431a=_0x5550b8();while(!![]){try{const _0x157868=-parseInt(_0x38d634(0x127))/0x1+-parseInt(_0x38d634(0x172))/0x2*(parseInt(_0x38d634(0x13a))/0x3)+parseInt(_0x38d634(0x14d))/0x4+parseInt(_0x38d634(0x12a))/0x5+-parseInt(_0x38d634(0x156))/0x6*(parseInt(_0x38d634(0x141))/0x7)+parseInt(_0x38d634(0x142))/0x8*(-parseInt(_0x38d634(0x13c))/0x9)+parseInt(_0x38d634(0x14c))/0xa*(parseInt(_0x38d634(0x12c))/0xb);if(_0x157868===_0x355a88)break;else _0x61431a['push'](_0x61431a['shift']());}catch(_0x283e9b){_0x61431a['push'](_0x61431a['shift']());}}}(a19_0x5ba0,0xd43d7));var __createBinding=this&&this[a19_0x146d35(0x166)]||(Object[a19_0x146d35(0x10e)]?function(_0xfb0974,_0x5c00f8,_0x281757,_0x1b734a){const _0x4b9b9a=a19_0x146d35;if(_0x1b734a===undefined)_0x1b734a=_0x281757;var _0x52c269=Object[_0x4b9b9a(0x14e)](_0x5c00f8,_0x281757);(!_0x52c269||(_0x4b9b9a(0x11a)in _0x52c269?!_0x5c00f8[_0x4b9b9a(0x140)]:_0x52c269['writable']||_0x52c269[_0x4b9b9a(0x164)]))&&(_0x52c269={'enumerable':!![],'get':function(){return _0x5c00f8[_0x281757];}}),Object[_0x4b9b9a(0x173)](_0xfb0974,_0x1b734a,_0x52c269);}:function(_0x8bafe7,_0x40db5e,_0x4c83f8,_0x2493bb){if(_0x2493bb===undefined)_0x2493bb=_0x4c83f8;_0x8bafe7[_0x2493bb]=_0x40db5e[_0x4c83f8];}),__setModuleDefault=this&&this[a19_0x146d35(0x149)]||(Object[a19_0x146d35(0x10e)]?function(_0x1e4750,_0x3f165e){const _0x79658=a19_0x146d35;Object[_0x79658(0x173)](_0x1e4750,_0x79658(0x15a),{'enumerable':!![],'value':_0x3f165e});}:function(_0xf53b2b,_0x20545e){const _0x59e2c4=a19_0x146d35;_0xf53b2b[_0x59e2c4(0x15a)]=_0x20545e;}),__importStar=this&&this['__importStar']||(function(){var _0x539cfe=function(_0x44ae41){const _0x147c8e=a19_0x4f0c;return _0x539cfe=Object[_0x147c8e(0x163)]||function(_0x369c9f){const _0x4bea29=_0x147c8e;var _0x4b5058=[];for(var _0x3a8408 in _0x369c9f)if(Object[_0x4bea29(0x17a)][_0x4bea29(0x180)]['call'](_0x369c9f,_0x3a8408))_0x4b5058[_0x4b5058[_0x4bea29(0x14f)]]=_0x3a8408;return _0x4b5058;},_0x539cfe(_0x44ae41);};return function(_0x3d228d){const _0x3f431f=a19_0x4f0c;if(_0x3d228d&&_0x3d228d[_0x3f431f(0x140)])return _0x3d228d;var _0xc8482a={};if(_0x3d228d!=null){for(var _0x283220=_0x539cfe(_0x3d228d),_0x21b77f=0x0;_0x21b77f<_0x283220[_0x3f431f(0x14f)];_0x21b77f++)if(_0x283220[_0x21b77f]!=='default')__createBinding(_0xc8482a,_0x3d228d,_0x283220[_0x21b77f]);}return __setModuleDefault(_0xc8482a,_0x3d228d),_0xc8482a;};}());Object['defineProperty'](exports,'__esModule',{'value':!![]});function a19_0x5ba0(){const _0x4786e6=['createUser','\x20days)','floor','/statistics','get','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','getMerchantsAwaitingPayout','../config/database','updatedAt','requireAdmin','updateCustomerData','currency','getTime','post','AdminController','checkAuth','getPayouts','394181htuMFU','getPayoutById','paymentId','6817650zyltBR','getLogStats','6430633sjonUP','updateUserSchema','activateUser','/payouts/:id','domainMonitoringService','validate','authenticateToken','json','Payments\x20automatically\x20expire\x20after\x20','../services/loggerService','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','put','CoinToPay\x20payment\x20status\x20checked\x20successfully','/payout/merchants','1141947jDAciy','Old\x20logs\x20cleaned\x20(kept\x20last\x20','4153527SHRRJf','../services/coinToPayStatusService','/users/:id','Failed\x20to\x20get\x20payment\x20information','__esModule','2062403aHAetM','8NzXOPd','FAILED','Router','/payments','getUserById','/users/:id/suspend','Failed\x20to\x20perform\x20manual\x20domain\x20check','__setModuleDefault','findUnique','/cointopay/payment/:paymentId','10ZxNPwZ','6522720ehFBqT','getOwnPropertyDescriptor','length','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','status','/logs/clean','/cointopay/check/:paymentId','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','30UojQef','message','/payments/:id','../controllers/adminController','default','gatewayPaymentId','shop','cleanOldLogs','getMerchantStatistics','toISOString','deletePayout','getStatistics','getMerchantsSelection','getOwnPropertyNames','configurable','/payments/:id/customer','__createBinding','/merchants/selection','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','gateway','/payout/stats','updateCustomerDataSchema','/payout','Domain\x20check\x20failed','/auth','/users','getUsers','getMonitoringStats','2uNBgiY','defineProperty','amount','loggerService','PENDING','/domain-monitoring/check','log','updatePayment','prototype','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','params','\x20days\x20if\x20not\x20paid','/users/:id/activate','../services/domainMonitoringService','hasOwnProperty','createPayoutSchema','coinToPayStatusService','createdAt','Failed\x20to\x20clean\x20old\x20logs','create','updateUser','EXPIRED','getPaymentTimerInfo','CoinToPay\x20automatic\x20status\x20checking\x20service','createUserSchema','getServiceStats','Payment\x20not\x20found'];a19_0x5ba0=function(){return _0x4786e6;};return a19_0x5ba0();}function a19_0x4f0c(_0x1c33a6,_0x137dac){const _0x5ba05d=a19_0x5ba0();return a19_0x4f0c=function(_0x4f0c1d,_0x4caed9){_0x4f0c1d=_0x4f0c1d-0x10a;let _0x3d2a15=_0x5ba05d[_0x4f0c1d];return _0x3d2a15;},a19_0x4f0c(_0x1c33a6,_0x137dac);}const express_1=require('express'),adminController_1=require(a19_0x146d35(0x159)),validation_1=require('../middleware/validation'),auth_1=require('../middleware/auth'),loggerService_1=require(a19_0x146d35(0x135)),coinToPayStatusService_1=require(a19_0x146d35(0x13d)),domainMonitoringService_1=require(a19_0x146d35(0x17f)),router=(0x0,express_1[a19_0x146d35(0x144)])(),adminController=new adminController_1[(a19_0x146d35(0x124))]();router['use'](auth_1[a19_0x146d35(0x132)],auth_1[a19_0x146d35(0x11f)]),router[a19_0x146d35(0x11a)](a19_0x146d35(0x16e),adminController[a19_0x146d35(0x125)]),router[a19_0x146d35(0x11a)](a19_0x146d35(0x119),adminController[a19_0x146d35(0x161)]),router[a19_0x146d35(0x11a)]('/merchant-statistics',adminController[a19_0x146d35(0x15e)]),router[a19_0x146d35(0x11a)](a19_0x146d35(0x16a),adminController['getPayoutStats']),router[a19_0x146d35(0x11a)](a19_0x146d35(0x139),adminController[a19_0x146d35(0x11c)]),router['get'](a19_0x146d35(0x167),adminController[a19_0x146d35(0x162)]),router['post'](a19_0x146d35(0x16c),(0x0,validation_1[a19_0x146d35(0x131)])(validation_1[a19_0x146d35(0x10a)]),adminController['createPayout']),router[a19_0x146d35(0x11a)]('/payouts',adminController[a19_0x146d35(0x126)]),router[a19_0x146d35(0x11a)](a19_0x146d35(0x12f),adminController[a19_0x146d35(0x128)]),router['delete']('/payouts/:id',adminController[a19_0x146d35(0x160)]),router[a19_0x146d35(0x11a)](a19_0x146d35(0x145),adminController['getPayments']),router[a19_0x146d35(0x11a)]('/payments/:id',adminController['getPaymentById']),router[a19_0x146d35(0x137)](a19_0x146d35(0x158),adminController[a19_0x146d35(0x179)]),router[a19_0x146d35(0x137)](a19_0x146d35(0x165),(0x0,validation_1['validate'])(validation_1[a19_0x146d35(0x16b)]),adminController[a19_0x146d35(0x120)]),router[a19_0x146d35(0x11a)](a19_0x146d35(0x16f),adminController[a19_0x146d35(0x170)]),router['get'](a19_0x146d35(0x13e),adminController[a19_0x146d35(0x146)]),router[a19_0x146d35(0x123)]('/users',(0x0,validation_1[a19_0x146d35(0x131)])(validation_1[a19_0x146d35(0x113)]),adminController[a19_0x146d35(0x116)]),router[a19_0x146d35(0x137)]('/users/:id',(0x0,validation_1[a19_0x146d35(0x131)])(validation_1[a19_0x146d35(0x12d)]),adminController[a19_0x146d35(0x10f)]),router['delete'](a19_0x146d35(0x13e),adminController['deleteUser']),router[a19_0x146d35(0x123)](a19_0x146d35(0x147),adminController['suspendUser']),router[a19_0x146d35(0x123)](a19_0x146d35(0x17e),adminController[a19_0x146d35(0x12e)]),router['get']('/logs/stats',(_0x5c8c2a,_0x483252)=>{const _0x2d0902=a19_0x146d35;try{const _0x545631=loggerService_1['loggerService'][_0x2d0902(0x12b)]();_0x483252['json']({'success':!![],'result':_0x545631});}catch(_0xaf9dcd){_0x483252[_0x2d0902(0x151)](0x1f4)['json']({'success':![],'message':'Failed\x20to\x20get\x20log\x20statistics'});}}),router['post'](a19_0x146d35(0x152),(_0x2e4f5f,_0x3d1160)=>{const _0x9d1ef8=a19_0x146d35;try{const {daysToKeep:daysToKeep=0x1e}=_0x2e4f5f['body'];loggerService_1[_0x9d1ef8(0x175)][_0x9d1ef8(0x15d)](daysToKeep),_0x3d1160[_0x9d1ef8(0x133)]({'success':!![],'message':_0x9d1ef8(0x13b)+daysToKeep+_0x9d1ef8(0x117)});}catch(_0x4ebfeb){_0x3d1160['status'](0x1f4)[_0x9d1ef8(0x133)]({'success':![],'message':_0x9d1ef8(0x10d)});}}),router['post'](a19_0x146d35(0x153),async(_0x56fd1c,_0x233df0)=>{const _0x1ce442=a19_0x146d35;try{const {paymentId:_0x502a59}=_0x56fd1c[_0x1ce442(0x17c)];console[_0x1ce442(0x178)](_0x1ce442(0x155)+_0x502a59),await coinToPayStatusService_1[_0x1ce442(0x10b)]['checkPaymentById'](_0x502a59),_0x233df0[_0x1ce442(0x133)]({'success':!![],'message':_0x1ce442(0x138)});}catch(_0x45cc92){console['error']('❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20'+_0x56fd1c[_0x1ce442(0x17c)][_0x1ce442(0x129)]+':',_0x45cc92),_0x233df0[_0x1ce442(0x151)](0x1f4)['json']({'success':![],'message':_0x45cc92 instanceof Error?_0x45cc92['message']:_0x1ce442(0x136)});}}),router[a19_0x146d35(0x11a)]('/cointopay/stats',(_0x2322c4,_0x253155)=>{const _0x5c22df=a19_0x146d35;try{const _0x58cf3d=coinToPayStatusService_1[_0x5c22df(0x10b)][_0x5c22df(0x114)]();_0x253155[_0x5c22df(0x133)]({'success':!![],'result':{..._0x58cf3d,'description':_0x5c22df(0x112),'statusMapping':{'Paid':'PAID','Awaiting\x20Fiat':'PENDING','waiting':_0x5c22df(0x176),'expired':_0x5c22df(0x110),'failed':_0x5c22df(0x143)},'autoExpiryNote':_0x5c22df(0x134)+_0x58cf3d['expiryDays']+_0x5c22df(0x17d),'individualTimersNote':_0x5c22df(0x17b)}});}catch(_0xa5cc17){_0x253155['status'](0x1f4)['json']({'success':![],'message':_0x5c22df(0x154)});}}),router[a19_0x146d35(0x11a)](a19_0x146d35(0x14b),async(_0x9565b2,_0x2274de)=>{const _0x1454b1=a19_0x146d35;try{const {paymentId:_0x1036ba}=_0x9565b2[_0x1454b1(0x17c)],_0x2e23f9=coinToPayStatusService_1[_0x1454b1(0x10b)][_0x1454b1(0x111)](_0x1036ba),_0x1af58e=(await Promise['resolve']()['then'](()=>__importStar(require(_0x1454b1(0x11d)))))['default'],_0x279136=await _0x1af58e['payment'][_0x1454b1(0x14a)]({'where':{'id':_0x1036ba},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x279136)return _0x2274de[_0x1454b1(0x151)](0x194)[_0x1454b1(0x133)]({'success':![],'message':_0x1454b1(0x115)});_0x2274de[_0x1454b1(0x133)]({'success':!![],'result':{'payment':{'id':_0x279136['id'],'gateway':_0x279136[_0x1454b1(0x169)],'gatewayPaymentId':_0x279136[_0x1454b1(0x15b)],'status':_0x279136['status'],'amount':_0x279136[_0x1454b1(0x174)],'currency':_0x279136[_0x1454b1(0x121)],'createdAt':_0x279136['createdAt'],'updatedAt':_0x279136[_0x1454b1(0x11e)],'shop':_0x279136[_0x1454b1(0x15c)]},'timers':_0x2e23f9,'isCoinToPay':_0x279136[_0x1454b1(0x169)]==='cointopay','ageInMinutes':Math[_0x1454b1(0x118)]((Date['now']()-_0x279136[_0x1454b1(0x10c)][_0x1454b1(0x122)]())/(0x3e8*0x3c))}});}catch(_0x3314ed){_0x2274de[_0x1454b1(0x151)](0x1f4)[_0x1454b1(0x133)]({'success':![],'message':_0x3314ed instanceof Error?_0x3314ed[_0x1454b1(0x157)]:_0x1454b1(0x13f)});}}),router[a19_0x146d35(0x11a)]('/domain-monitoring/stats',(_0x45c5ee,_0x1ff884)=>{const _0x1f6e2d=a19_0x146d35;try{const _0x1a05d4=domainMonitoringService_1['domainMonitoringService'][_0x1f6e2d(0x171)]();_0x1ff884['json']({'success':!![],'result':{..._0x1a05d4,'description':_0x1f6e2d(0x11b),'behavior':'Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','encoding':_0x1f6e2d(0x150)}});}catch(_0x287f2f){_0x1ff884[_0x1f6e2d(0x151)](0x1f4)[_0x1f6e2d(0x133)]({'success':![],'message':_0x1f6e2d(0x168)});}}),router[a19_0x146d35(0x123)](a19_0x146d35(0x177),async(_0x2b9051,_0x468942)=>{const _0x5d6633=a19_0x146d35;try{const _0x153cca=await domainMonitoringService_1[_0x5d6633(0x130)]['manualCheck']();_0x468942['json']({'success':!![],'result':{'domainAvailable':_0x153cca,'message':_0x153cca?'Domain\x20is\x20responding\x20correctly':_0x5d6633(0x16d),'timestamp':new Date()[_0x5d6633(0x15f)]()}});}catch(_0x5bab68){_0x468942['status'](0x1f4)[_0x5d6633(0x133)]({'success':![],'message':_0x5bab68 instanceof Error?_0x5bab68['message']:_0x5d6633(0x148)});}}),exports[a19_0x146d35(0x15a)]=router;