'use strict';const a24_0x419e38=a24_0xe971;(function(_0x2a83b1,_0x1b6cee){const _0x1db67c=a24_0xe971,_0x2685ae=_0x2a83b1();while(!![]){try{const _0x21e900=parseInt(_0x1db67c(0x108))/0x1*(parseInt(_0x1db67c(0x158))/0x2)+-parseInt(_0x1db67c(0x152))/0x3+parseInt(_0x1db67c(0xee))/0x4+-parseInt(_0x1db67c(0x119))/0x5+-parseInt(_0x1db67c(0xe6))/0x6*(parseInt(_0x1db67c(0x148))/0x7)+parseInt(_0x1db67c(0x112))/0x8*(-parseInt(_0x1db67c(0xde))/0x9)+parseInt(_0x1db67c(0x149))/0xa*(parseInt(_0x1db67c(0x11b))/0xb);if(_0x21e900===_0x1b6cee)break;else _0x2685ae['push'](_0x2685ae['shift']());}catch(_0x57ee82){_0x2685ae['push'](_0x2685ae['shift']());}}}(a24_0x4325,0x8a0bb));var __createBinding=this&&this['__createBinding']||(Object[a24_0x419e38(0x144)]?function(_0x1065d0,_0x209849,_0x3643b0,_0x589aa0){const _0x25b08d=a24_0x419e38;if(_0x589aa0===undefined)_0x589aa0=_0x3643b0;var _0x58a352=Object[_0x25b08d(0x125)](_0x209849,_0x3643b0);(!_0x58a352||(_0x25b08d(0x14f)in _0x58a352?!_0x209849[_0x25b08d(0x13d)]:_0x58a352[_0x25b08d(0xdc)]||_0x58a352[_0x25b08d(0x11f)]))&&(_0x58a352={'enumerable':!![],'get':function(){return _0x209849[_0x3643b0];}}),Object[_0x25b08d(0x134)](_0x1065d0,_0x589aa0,_0x58a352);}:function(_0x39d74f,_0x2acc67,_0x1222a5,_0x4890b9){if(_0x4890b9===undefined)_0x4890b9=_0x1222a5;_0x39d74f[_0x4890b9]=_0x2acc67[_0x1222a5];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a24_0x419e38(0x144)]?function(_0x10a51d,_0x2e7e1f){const _0x2b5339=a24_0x419e38;Object[_0x2b5339(0x134)](_0x10a51d,_0x2b5339(0x120),{'enumerable':!![],'value':_0x2e7e1f});}:function(_0x397ca5,_0x2f9880){const _0x3b7113=a24_0x419e38;_0x397ca5[_0x3b7113(0x120)]=_0x2f9880;}),__importStar=this&&this[a24_0x419e38(0x157)]||(function(){var _0x19415f=function(_0x4d9d22){const _0x568dcc=a24_0xe971;return _0x19415f=Object[_0x568dcc(0x106)]||function(_0x58dd3a){const _0x38d78c=_0x568dcc;var _0x4c4c72=[];for(var _0x179020 in _0x58dd3a)if(Object[_0x38d78c(0xdb)]['hasOwnProperty'][_0x38d78c(0x12d)](_0x58dd3a,_0x179020))_0x4c4c72[_0x4c4c72[_0x38d78c(0x117)]]=_0x179020;return _0x4c4c72;},_0x19415f(_0x4d9d22);};return function(_0x187e52){const _0x4b4cff=a24_0xe971;if(_0x187e52&&_0x187e52[_0x4b4cff(0x13d)])return _0x187e52;var _0x10e6e1={};if(_0x187e52!=null){for(var _0x15bd1f=_0x19415f(_0x187e52),_0xae5ae6=0x0;_0xae5ae6<_0x15bd1f[_0x4b4cff(0x117)];_0xae5ae6++)if(_0x15bd1f[_0xae5ae6]!==_0x4b4cff(0x120))__createBinding(_0x10e6e1,_0x187e52,_0x15bd1f[_0xae5ae6]);}return __setModuleDefault(_0x10e6e1,_0x187e52),_0x10e6e1;};}());function a24_0x4325(){const _0x4b65ef=['5824fPUwkw','15309190YIiEIF','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','/domain-monitoring/stats','updatePayment','/users/:id/suspend','getPaymentById','get','\x20days)','CoinToPay\x20payment\x20status\x20checked\x20successfully','3318549zuaZZF','Failed\x20to\x20clean\x20old\x20logs','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','/payout/merchants','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','__importStar','6RDdNyq','getMerchantsAwaitingPayout','manualCheck','/users','ðŸ”\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','put','toISOString','Router','../config/database','expiryDays','prototype','writable','/payments/processing-stats','1521VspvEb','/payments/:id/customer','getUsers','use','Failed\x20to\x20get\x20payment\x20information','/payments/cleanup','\x20days\x20if\x20not\x20paid','Domain\x20check\x20failed','1188aVIint','/auth','CoinToPay\x20automatic\x20status\x20checking\x20service','cleanOldLogs','post','gatewayPaymentId','getProcessingPaymentsStats','checkPaymentById','1296832FZuUrp','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','getPaymentTimerInfo','domainMonitoringService','payment','loggerService','../services/domainMonitoringService','json','../services/loggerService','params','/payout/stats','validate','/payouts/:id','cleanupStalePayments','checkAuth','/users/:id','gateway','/payments/:id','getServiceStats','coinToPayStatusService','PAID','requireAdmin','getMerchantsSelection','/statistics','getOwnPropertyNames','activateUser','13488iGbiRL','express','Failed\x20to\x20perform\x20manual\x20domain\x20check','getTime','Domain\x20is\x20responding\x20correctly','getUserById','now','deletePayout','message','updatedAt','1408KmmHvK','status','../controllers/adminController','/cointopay/check/:paymentId','cleanupStalePaymentsWithReport','length','getPayments','147465UEInFx','../middleware/auth','11YKKdpL','/users/:id/activate','/payments/cleanup-pending','resolve','configurable','default','suspendUser','cointopay','../middleware/validation','createdAt','getOwnPropertyDescriptor','createUserSchema','getPayouts','/payments/cleanup-with-report','updateUserSchema','getMerchantStatistics','deleteUser','/cointopay/payment/:paymentId','call','createPayoutSchema','authenticateToken','../services/coinToPayStatusService','cleanupStalePendingPayments','getPayoutById','FAILED','defineProperty','error','createUser','findUnique','log','PENDING','getPayoutStats','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','AdminController','__esModule','âŒ\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','createPayout','/logs/stats','then','/payouts','getLogStats','create','Old\x20logs\x20cleaned\x20(kept\x20last\x20','/merchant-statistics','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status'];a24_0x4325=function(){return _0x4b65ef;};return a24_0x4325();}Object[a24_0x419e38(0x134)](exports,a24_0x419e38(0x13d),{'value':!![]});const express_1=require(a24_0x419e38(0x109)),adminController_1=require(a24_0x419e38(0x114)),validation_1=require(a24_0x419e38(0x123)),auth_1=require(a24_0x419e38(0x11a)),loggerService_1=require(a24_0x419e38(0xf6)),coinToPayStatusService_1=require(a24_0x419e38(0x130)),domainMonitoringService_1=require(a24_0x419e38(0xf4)),router=(0x0,express_1[a24_0x419e38(0x15f)])(),adminController=new adminController_1[(a24_0x419e38(0x13c))]();function a24_0xe971(_0x538788,_0x12c205){_0x538788=_0x538788-0xdb;const _0x4325db=a24_0x4325();let _0xe97161=_0x4325db[_0x538788];return _0xe97161;}router[a24_0x419e38(0xe1)](auth_1[a24_0x419e38(0x12f)],auth_1[a24_0x419e38(0x103)]),router[a24_0x419e38(0x14f)](a24_0x419e38(0xe7),adminController[a24_0x419e38(0xfc)]),router['get'](a24_0x419e38(0x105),adminController['getStatistics']),router[a24_0x419e38(0x14f)](a24_0x419e38(0x146),adminController[a24_0x419e38(0x12a)]),router[a24_0x419e38(0x14f)](a24_0x419e38(0xf8),adminController[a24_0x419e38(0x13a)]),router[a24_0x419e38(0x14f)](a24_0x419e38(0x155),adminController[a24_0x419e38(0x159)]),router['get']('/merchants/selection',adminController[a24_0x419e38(0x104)]),router[a24_0x419e38(0xea)]('/payout',(0x0,validation_1[a24_0x419e38(0xf9)])(validation_1[a24_0x419e38(0x12e)]),adminController[a24_0x419e38(0x13f)]),router[a24_0x419e38(0x14f)](a24_0x419e38(0x142),adminController[a24_0x419e38(0x127)]),router[a24_0x419e38(0x14f)](a24_0x419e38(0xfa),adminController[a24_0x419e38(0x132)]),router['delete'](a24_0x419e38(0xfa),adminController[a24_0x419e38(0x10f)]),router[a24_0x419e38(0x14f)]('/payments',adminController[a24_0x419e38(0x118)]),router[a24_0x419e38(0x14f)](a24_0x419e38(0xff),adminController[a24_0x419e38(0x14e)]),router['put'](a24_0x419e38(0xff),adminController[a24_0x419e38(0x14c)]),router[a24_0x419e38(0x15d)](a24_0x419e38(0xdf),(0x0,validation_1[a24_0x419e38(0xf9)])(validation_1['updateCustomerDataSchema']),adminController['updateCustomerData']),router[a24_0x419e38(0x14f)](a24_0x419e38(0xdd),adminController[a24_0x419e38(0xec)]),router[a24_0x419e38(0xea)](a24_0x419e38(0xe3),adminController[a24_0x419e38(0xfb)]),router['post'](a24_0x419e38(0x11d),adminController[a24_0x419e38(0x131)]),router[a24_0x419e38(0xea)](a24_0x419e38(0x128),adminController[a24_0x419e38(0x116)]),router['get'](a24_0x419e38(0x15b),adminController[a24_0x419e38(0xe0)]),router[a24_0x419e38(0x14f)](a24_0x419e38(0xfd),adminController[a24_0x419e38(0x10d)]),router['post'](a24_0x419e38(0x15b),(0x0,validation_1[a24_0x419e38(0xf9)])(validation_1[a24_0x419e38(0x126)]),adminController[a24_0x419e38(0x136)]),router[a24_0x419e38(0x15d)](a24_0x419e38(0xfd),(0x0,validation_1['validate'])(validation_1[a24_0x419e38(0x129)]),adminController['updateUser']),router['delete'](a24_0x419e38(0xfd),adminController[a24_0x419e38(0x12b)]),router[a24_0x419e38(0xea)](a24_0x419e38(0x14d),adminController[a24_0x419e38(0x121)]),router[a24_0x419e38(0xea)](a24_0x419e38(0x11c),adminController[a24_0x419e38(0x107)]),router['get'](a24_0x419e38(0x140),(_0x3ddab7,_0xf84cc1)=>{const _0x4a89e6=a24_0x419e38;try{const _0x91b1b=loggerService_1[_0x4a89e6(0xf3)][_0x4a89e6(0x143)]();_0xf84cc1[_0x4a89e6(0xf5)]({'success':!![],'result':_0x91b1b});}catch(_0xa3ba13){_0xf84cc1['status'](0x1f4)[_0x4a89e6(0xf5)]({'success':![],'message':'Failed\x20to\x20get\x20log\x20statistics'});}}),router[a24_0x419e38(0xea)]('/logs/clean',(_0x59552e,_0xaa7ce6)=>{const _0x59c4c7=a24_0x419e38;try{const {daysToKeep:daysToKeep=0x1e}=_0x59552e['body'];loggerService_1[_0x59c4c7(0xf3)][_0x59c4c7(0xe9)](daysToKeep),_0xaa7ce6[_0x59c4c7(0xf5)]({'success':!![],'message':_0x59c4c7(0x145)+daysToKeep+_0x59c4c7(0x150)});}catch(_0x10d97e){_0xaa7ce6[_0x59c4c7(0x113)](0x1f4)[_0x59c4c7(0xf5)]({'success':![],'message':_0x59c4c7(0x153)});}}),router['post'](a24_0x419e38(0x115),async(_0xdf563,_0x1a7bbd)=>{const _0x5833e6=a24_0x419e38;try{const {paymentId:_0x7c7967}=_0xdf563['params'];console[_0x5833e6(0x138)](_0x5833e6(0x15c)+_0x7c7967),await coinToPayStatusService_1[_0x5833e6(0x101)][_0x5833e6(0xed)](_0x7c7967),_0x1a7bbd[_0x5833e6(0xf5)]({'success':!![],'message':_0x5833e6(0x151)});}catch(_0x2ebf12){console[_0x5833e6(0x135)](_0x5833e6(0x13e)+_0xdf563[_0x5833e6(0xf7)]['paymentId']+':',_0x2ebf12),_0x1a7bbd[_0x5833e6(0x113)](0x1f4)[_0x5833e6(0xf5)]({'success':![],'message':_0x2ebf12 instanceof Error?_0x2ebf12[_0x5833e6(0x110)]:_0x5833e6(0x147)});}}),router[a24_0x419e38(0x14f)]('/cointopay/stats',(_0x118daa,_0x13094b)=>{const _0xb6b74a=a24_0x419e38;try{const _0x2ebed8=coinToPayStatusService_1[_0xb6b74a(0x101)][_0xb6b74a(0x100)]();_0x13094b['json']({'success':!![],'result':{..._0x2ebed8,'description':_0xb6b74a(0xe8),'statusMapping':{'Paid':_0xb6b74a(0x102),'Awaiting\x20Fiat':_0xb6b74a(0x139),'waiting':_0xb6b74a(0x139),'expired':'EXPIRED','failed':_0xb6b74a(0x133)},'autoExpiryNote':'Payments\x20automatically\x20expire\x20after\x20'+_0x2ebed8[_0xb6b74a(0x161)]+_0xb6b74a(0xe4),'individualTimersNote':_0xb6b74a(0x154)}});}catch(_0x42184f){_0x13094b[_0xb6b74a(0x113)](0x1f4)[_0xb6b74a(0xf5)]({'success':![],'message':_0xb6b74a(0x156)});}}),router[a24_0x419e38(0x14f)](a24_0x419e38(0x12c),async(_0x2c5f7a,_0xcc508f)=>{const _0x5f42de=a24_0x419e38;try{const {paymentId:_0x474802}=_0x2c5f7a[_0x5f42de(0xf7)],_0x1d88a5=coinToPayStatusService_1[_0x5f42de(0x101)][_0x5f42de(0xf0)](_0x474802),_0x59edf2=(await Promise[_0x5f42de(0x11e)]()[_0x5f42de(0x141)](()=>__importStar(require(_0x5f42de(0x160)))))[_0x5f42de(0x120)],_0x29fa53=await _0x59edf2[_0x5f42de(0xf2)][_0x5f42de(0x137)]({'where':{'id':_0x474802},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x29fa53)return _0xcc508f[_0x5f42de(0x113)](0x194)[_0x5f42de(0xf5)]({'success':![],'message':'Payment\x20not\x20found'});_0xcc508f['json']({'success':!![],'result':{'payment':{'id':_0x29fa53['id'],'gateway':_0x29fa53[_0x5f42de(0xfe)],'gatewayPaymentId':_0x29fa53[_0x5f42de(0xeb)],'status':_0x29fa53[_0x5f42de(0x113)],'amount':_0x29fa53['amount'],'currency':_0x29fa53['currency'],'createdAt':_0x29fa53[_0x5f42de(0x124)],'updatedAt':_0x29fa53[_0x5f42de(0x111)],'shop':_0x29fa53['shop']},'timers':_0x1d88a5,'isCoinToPay':_0x29fa53[_0x5f42de(0xfe)]===_0x5f42de(0x122),'ageInMinutes':Math['floor']((Date[_0x5f42de(0x10e)]()-_0x29fa53[_0x5f42de(0x124)][_0x5f42de(0x10b)]())/(0x3e8*0x3c))}});}catch(_0x195572){_0xcc508f[_0x5f42de(0x113)](0x1f4)['json']({'success':![],'message':_0x195572 instanceof Error?_0x195572[_0x5f42de(0x110)]:_0x5f42de(0xe2)});}}),router[a24_0x419e38(0x14f)](a24_0x419e38(0x14b),(_0x557184,_0x279215)=>{const _0x41d403=a24_0x419e38;try{const _0x11dd11=domainMonitoringService_1[_0x41d403(0xf1)]['getMonitoringStats']();_0x279215['json']({'success':!![],'result':{..._0x11dd11,'description':_0x41d403(0xef),'behavior':_0x41d403(0x13b),'encoding':'Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs'}});}catch(_0x4de89d){_0x279215['status'](0x1f4)[_0x41d403(0xf5)]({'success':![],'message':_0x41d403(0x14a)});}}),router[a24_0x419e38(0xea)]('/domain-monitoring/check',async(_0x32ff21,_0x498224)=>{const _0x5a9add=a24_0x419e38;try{const _0x4335d5=await domainMonitoringService_1[_0x5a9add(0xf1)][_0x5a9add(0x15a)]();_0x498224[_0x5a9add(0xf5)]({'success':!![],'result':{'domainAvailable':_0x4335d5,'message':_0x4335d5?_0x5a9add(0x10c):_0x5a9add(0xe5),'timestamp':new Date()[_0x5a9add(0x15e)]()}});}catch(_0x335d6a){_0x498224['status'](0x1f4)['json']({'success':![],'message':_0x335d6a instanceof Error?_0x335d6a[_0x5a9add(0x110)]:_0x5a9add(0x10a)});}}),exports[a24_0x419e38(0x120)]=router;