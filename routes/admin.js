'use strict';const a19_0x5e9e35=a19_0x5970;function a19_0x10b2(){const _0x48cd67=['../services/domainMonitoringService','/users/:id','PENDING','getTime','807cSsoJu','/statistics','domainMonitoringService','__createBinding','/logs/clean','getMerchantStatistics','findUnique','Router','now','Failed\x20to\x20get\x20payment\x20information','cleanOldLogs','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','/payouts/:id','delete','writable','__importStar','\x20days)','EXPIRED','CoinToPay\x20payment\x20status\x20checked\x20successfully','createPayout','\x20days\x20if\x20not\x20paid','getMerchantsSelection','updateCustomerData','__esModule','473893kVetSV','body','message','/payments/:id','activateUser','post','106IFGCTD','cointopay','/merchants/selection','/payout/stats','../middleware/validation','paymentId','963055WPRzGS','/payout/merchants','createPayoutSchema','express','Domain\x20check\x20failed','validate','status','shop','__setModuleDefault','resolve','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','40FcdAem','params','defineProperty','CoinToPay\x20automatic\x20status\x20checking\x20service','put','../controllers/adminController','suspendUser','requireAdmin','getOwnPropertyNames','get','updateCustomerDataSchema','999966ZyRjXm','create','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','coinToPayStatusService','loggerService','manualCheck','default','expiryDays','getPayoutStats','gatewayPaymentId','/merchant-statistics','../middleware/auth','hasOwnProperty','768728cKVhsZ','FAILED','getPayments','updatedAt','then','6317SHgLVv','/users/:id/suspend','../config/database','checkAuth','/logs/stats','AdminController','getPaymentById','deletePayout','floor','use','/auth','error','getLogStats','2060qmmsQU','PAID','Old\x20logs\x20cleaned\x20(kept\x20last\x20','../services/coinToPayStatusService','length','/payments/:id/customer','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','getUsers','prototype','getMonitoringStats','updatePayment','configurable','/users','/cointopay/payment/:paymentId','/payments','getPayouts','Payments\x20automatically\x20expire\x20after\x20','459990tfhlJi','/domain-monitoring/check','getStatistics','../services/loggerService','json','getUserById','Payment\x20not\x20found'];a19_0x10b2=function(){return _0x48cd67;};return a19_0x10b2();}(function(_0x231bf3,_0x290535){const _0x53b85f=a19_0x5970,_0x6bd7e0=_0x231bf3();while(!![]){try{const _0x3f8b34=parseInt(_0x53b85f(0x1d3))/0x1*(parseInt(_0x53b85f(0x1a5))/0x2)+-parseInt(_0x53b85f(0x186))/0x3*(-parseInt(_0x53b85f(0x16a))/0x4)+parseInt(_0x53b85f(0x1ab))/0x5+-parseInt(_0x53b85f(0x1c1))/0x6+parseInt(_0x53b85f(0x19f))/0x7+-parseInt(_0x53b85f(0x1ce))/0x8+parseInt(_0x53b85f(0x17b))/0x9*(-parseInt(_0x53b85f(0x1b6))/0xa);if(_0x3f8b34===_0x290535)break;else _0x6bd7e0['push'](_0x6bd7e0['shift']());}catch(_0x51c735){_0x6bd7e0['push'](_0x6bd7e0['shift']());}}}(a19_0x10b2,0x410d6));function a19_0x5970(_0x2bec7e,_0x5960d8){const _0x10b2b4=a19_0x10b2();return a19_0x5970=function(_0x59707b,_0x43938d){_0x59707b=_0x59707b-0x161;let _0x1e238a=_0x10b2b4[_0x59707b];return _0x1e238a;},a19_0x5970(_0x2bec7e,_0x5960d8);}var __createBinding=this&&this[a19_0x5e9e35(0x189)]||(Object[a19_0x5e9e35(0x1c2)]?function(_0x1f920a,_0x43f3b0,_0x455170,_0xf3cde2){const _0xdf7d27=a19_0x5e9e35;if(_0xf3cde2===undefined)_0xf3cde2=_0x455170;var _0x171c25=Object['getOwnPropertyDescriptor'](_0x43f3b0,_0x455170);(!_0x171c25||('get'in _0x171c25?!_0x43f3b0['__esModule']:_0x171c25[_0xdf7d27(0x195)]||_0x171c25[_0xdf7d27(0x175)]))&&(_0x171c25={'enumerable':!![],'get':function(){return _0x43f3b0[_0x455170];}}),Object['defineProperty'](_0x1f920a,_0xf3cde2,_0x171c25);}:function(_0x26351c,_0x28fc70,_0x14201e,_0x98f9c0){if(_0x98f9c0===undefined)_0x98f9c0=_0x14201e;_0x26351c[_0x98f9c0]=_0x28fc70[_0x14201e];}),__setModuleDefault=this&&this[a19_0x5e9e35(0x1b3)]||(Object['create']?function(_0x4e6732,_0x462499){const _0x32cb9e=a19_0x5e9e35;Object[_0x32cb9e(0x1b8)](_0x4e6732,_0x32cb9e(0x1c7),{'enumerable':!![],'value':_0x462499});}:function(_0x4ec315,_0x21a474){const _0x2b0e5c=a19_0x5e9e35;_0x4ec315[_0x2b0e5c(0x1c7)]=_0x21a474;}),__importStar=this&&this[a19_0x5e9e35(0x196)]||(function(){var _0x381fe9=function(_0x53e4a3){const _0x4e7861=a19_0x5970;return _0x381fe9=Object[_0x4e7861(0x1be)]||function(_0x38ef52){const _0x308800=_0x4e7861;var _0x55b0fc=[];for(var _0x4d6008 in _0x38ef52)if(Object[_0x308800(0x172)][_0x308800(0x1cd)]['call'](_0x38ef52,_0x4d6008))_0x55b0fc[_0x55b0fc[_0x308800(0x16e)]]=_0x4d6008;return _0x55b0fc;},_0x381fe9(_0x53e4a3);};return function(_0x32c366){const _0x870a6d=a19_0x5970;if(_0x32c366&&_0x32c366['__esModule'])return _0x32c366;var _0xfc423b={};if(_0x32c366!=null){for(var _0x389398=_0x381fe9(_0x32c366),_0x537c14=0x0;_0x537c14<_0x389398[_0x870a6d(0x16e)];_0x537c14++)if(_0x389398[_0x537c14]!==_0x870a6d(0x1c7))__createBinding(_0xfc423b,_0x32c366,_0x389398[_0x537c14]);}return __setModuleDefault(_0xfc423b,_0x32c366),_0xfc423b;};}());Object[a19_0x5e9e35(0x1b8)](exports,a19_0x5e9e35(0x19e),{'value':!![]});const express_1=require(a19_0x5e9e35(0x1ae)),adminController_1=require(a19_0x5e9e35(0x1bb)),validation_1=require(a19_0x5e9e35(0x1a9)),auth_1=require(a19_0x5e9e35(0x1cc)),loggerService_1=require(a19_0x5e9e35(0x17e)),coinToPayStatusService_1=require(a19_0x5e9e35(0x16d)),domainMonitoringService_1=require(a19_0x5e9e35(0x182)),router=(0x0,express_1[a19_0x5e9e35(0x18d)])(),adminController=new adminController_1[(a19_0x5e9e35(0x162))]();router[a19_0x5e9e35(0x166)](auth_1['authenticateToken'],auth_1[a19_0x5e9e35(0x1bd)]),router[a19_0x5e9e35(0x1bf)](a19_0x5e9e35(0x167),adminController[a19_0x5e9e35(0x1d6)]),router['get'](a19_0x5e9e35(0x187),adminController[a19_0x5e9e35(0x17d)]),router['get'](a19_0x5e9e35(0x1cb),adminController[a19_0x5e9e35(0x18b)]),router[a19_0x5e9e35(0x1bf)](a19_0x5e9e35(0x1a8),adminController[a19_0x5e9e35(0x1c9)]),router[a19_0x5e9e35(0x1bf)](a19_0x5e9e35(0x1ac),adminController['getMerchantsAwaitingPayout']),router['get'](a19_0x5e9e35(0x1a7),adminController[a19_0x5e9e35(0x19c)]),router[a19_0x5e9e35(0x1a4)]('/payout',(0x0,validation_1[a19_0x5e9e35(0x1b0)])(validation_1[a19_0x5e9e35(0x1ad)]),adminController[a19_0x5e9e35(0x19a)]),router[a19_0x5e9e35(0x1bf)]('/payouts',adminController[a19_0x5e9e35(0x179)]),router[a19_0x5e9e35(0x1bf)](a19_0x5e9e35(0x193),adminController['getPayoutById']),router[a19_0x5e9e35(0x194)](a19_0x5e9e35(0x193),adminController[a19_0x5e9e35(0x164)]),router['get'](a19_0x5e9e35(0x178),adminController[a19_0x5e9e35(0x1d0)]),router[a19_0x5e9e35(0x1bf)]('/payments/:id',adminController[a19_0x5e9e35(0x163)]),router[a19_0x5e9e35(0x1ba)](a19_0x5e9e35(0x1a2),adminController[a19_0x5e9e35(0x174)]),router[a19_0x5e9e35(0x1ba)](a19_0x5e9e35(0x16f),(0x0,validation_1[a19_0x5e9e35(0x1b0)])(validation_1[a19_0x5e9e35(0x1c0)]),adminController[a19_0x5e9e35(0x19d)]),router[a19_0x5e9e35(0x1bf)](a19_0x5e9e35(0x176),adminController[a19_0x5e9e35(0x171)]),router[a19_0x5e9e35(0x1bf)](a19_0x5e9e35(0x183),adminController[a19_0x5e9e35(0x180)]),router[a19_0x5e9e35(0x1a4)](a19_0x5e9e35(0x176),(0x0,validation_1[a19_0x5e9e35(0x1b0)])(validation_1['createUserSchema']),adminController['createUser']),router[a19_0x5e9e35(0x1ba)](a19_0x5e9e35(0x183),(0x0,validation_1[a19_0x5e9e35(0x1b0)])(validation_1['updateUserSchema']),adminController['updateUser']),router[a19_0x5e9e35(0x194)]('/users/:id',adminController['deleteUser']),router['post'](a19_0x5e9e35(0x1d4),adminController[a19_0x5e9e35(0x1bc)]),router[a19_0x5e9e35(0x1a4)]('/users/:id/activate',adminController[a19_0x5e9e35(0x1a3)]),router['get'](a19_0x5e9e35(0x161),(_0x26dff1,_0x3fbb4c)=>{const _0x1ce502=a19_0x5e9e35;try{const _0xcab56a=loggerService_1[_0x1ce502(0x1c5)][_0x1ce502(0x169)]();_0x3fbb4c['json']({'success':!![],'result':_0xcab56a});}catch(_0x257c00){_0x3fbb4c['status'](0x1f4)[_0x1ce502(0x17f)]({'success':![],'message':'Failed\x20to\x20get\x20log\x20statistics'});}}),router[a19_0x5e9e35(0x1a4)](a19_0x5e9e35(0x18a),(_0x2409a9,_0x24c1f4)=>{const _0x5b1534=a19_0x5e9e35;try{const {daysToKeep:daysToKeep=0x1e}=_0x2409a9[_0x5b1534(0x1a0)];loggerService_1[_0x5b1534(0x1c5)][_0x5b1534(0x190)](daysToKeep),_0x24c1f4['json']({'success':!![],'message':_0x5b1534(0x16c)+daysToKeep+_0x5b1534(0x197)});}catch(_0x204e39){_0x24c1f4[_0x5b1534(0x1b1)](0x1f4)['json']({'success':![],'message':'Failed\x20to\x20clean\x20old\x20logs'});}}),router[a19_0x5e9e35(0x1a4)]('/cointopay/check/:paymentId',async(_0x1746ec,_0x3835cf)=>{const _0x3f4198=a19_0x5e9e35;try{const {paymentId:_0x3834c1}=_0x1746ec[_0x3f4198(0x1b7)];console['log'](_0x3f4198(0x192)+_0x3834c1),await coinToPayStatusService_1['coinToPayStatusService']['checkPaymentById'](_0x3834c1),_0x3835cf[_0x3f4198(0x17f)]({'success':!![],'message':_0x3f4198(0x199)});}catch(_0x302a47){console[_0x3f4198(0x168)](_0x3f4198(0x1c3)+_0x1746ec['params'][_0x3f4198(0x1aa)]+':',_0x302a47),_0x3835cf['status'](0x1f4)[_0x3f4198(0x17f)]({'success':![],'message':_0x302a47 instanceof Error?_0x302a47[_0x3f4198(0x1a1)]:'Failed\x20to\x20check\x20CoinToPay\x20payment\x20status'});}}),router[a19_0x5e9e35(0x1bf)]('/cointopay/stats',(_0x37e695,_0x2d6bb3)=>{const _0x48a2f2=a19_0x5e9e35;try{const _0x4f3981=coinToPayStatusService_1['coinToPayStatusService']['getServiceStats']();_0x2d6bb3[_0x48a2f2(0x17f)]({'success':!![],'result':{..._0x4f3981,'description':_0x48a2f2(0x1b9),'statusMapping':{'Paid':_0x48a2f2(0x16b),'Awaiting\x20Fiat':_0x48a2f2(0x184),'waiting':_0x48a2f2(0x184),'expired':_0x48a2f2(0x198),'failed':_0x48a2f2(0x1cf)},'autoExpiryNote':_0x48a2f2(0x17a)+_0x4f3981[_0x48a2f2(0x1c8)]+_0x48a2f2(0x19b),'individualTimersNote':_0x48a2f2(0x1b5)}});}catch(_0x310df6){_0x2d6bb3[_0x48a2f2(0x1b1)](0x1f4)[_0x48a2f2(0x17f)]({'success':![],'message':_0x48a2f2(0x170)});}}),router['get'](a19_0x5e9e35(0x177),async(_0x3505c6,_0xe6ba01)=>{const _0x3262cd=a19_0x5e9e35;try{const {paymentId:_0x3f4932}=_0x3505c6[_0x3262cd(0x1b7)],_0x2da371=coinToPayStatusService_1[_0x3262cd(0x1c4)]['getPaymentTimerInfo'](_0x3f4932),_0x48a608=(await Promise[_0x3262cd(0x1b4)]()[_0x3262cd(0x1d2)](()=>__importStar(require(_0x3262cd(0x1d5)))))[_0x3262cd(0x1c7)],_0x51a8f9=await _0x48a608['payment'][_0x3262cd(0x18c)]({'where':{'id':_0x3f4932},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x51a8f9)return _0xe6ba01[_0x3262cd(0x1b1)](0x194)[_0x3262cd(0x17f)]({'success':![],'message':_0x3262cd(0x181)});_0xe6ba01[_0x3262cd(0x17f)]({'success':!![],'result':{'payment':{'id':_0x51a8f9['id'],'gateway':_0x51a8f9['gateway'],'gatewayPaymentId':_0x51a8f9[_0x3262cd(0x1ca)],'status':_0x51a8f9['status'],'amount':_0x51a8f9['amount'],'currency':_0x51a8f9['currency'],'createdAt':_0x51a8f9['createdAt'],'updatedAt':_0x51a8f9[_0x3262cd(0x1d1)],'shop':_0x51a8f9[_0x3262cd(0x1b2)]},'timers':_0x2da371,'isCoinToPay':_0x51a8f9['gateway']===_0x3262cd(0x1a6),'ageInMinutes':Math[_0x3262cd(0x165)]((Date[_0x3262cd(0x18e)]()-_0x51a8f9['createdAt'][_0x3262cd(0x185)]())/(0x3e8*0x3c))}});}catch(_0x24a6e9){_0xe6ba01[_0x3262cd(0x1b1)](0x1f4)['json']({'success':![],'message':_0x24a6e9 instanceof Error?_0x24a6e9[_0x3262cd(0x1a1)]:_0x3262cd(0x18f)});}}),router[a19_0x5e9e35(0x1bf)]('/domain-monitoring/stats',(_0x4f0c03,_0x4d8686)=>{const _0x333e9c=a19_0x5e9e35;try{const _0x2f3e07=domainMonitoringService_1[_0x333e9c(0x188)][_0x333e9c(0x173)]();_0x4d8686[_0x333e9c(0x17f)]({'success':!![],'result':{..._0x2f3e07,'description':_0x333e9c(0x191),'behavior':'Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','encoding':'Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs'}});}catch(_0x463e93){_0x4d8686[_0x333e9c(0x1b1)](0x1f4)[_0x333e9c(0x17f)]({'success':![],'message':'Failed\x20to\x20get\x20domain\x20monitoring\x20statistics'});}}),router['post'](a19_0x5e9e35(0x17c),async(_0x291814,_0x1e3115)=>{const _0x3d334f=a19_0x5e9e35;try{const _0x4dd698=await domainMonitoringService_1[_0x3d334f(0x188)][_0x3d334f(0x1c6)]();_0x1e3115[_0x3d334f(0x17f)]({'success':!![],'result':{'domainAvailable':_0x4dd698,'message':_0x4dd698?'Domain\x20is\x20responding\x20correctly':_0x3d334f(0x1af),'timestamp':new Date()['toISOString']()}});}catch(_0x3943ab){_0x1e3115[_0x3d334f(0x1b1)](0x1f4)[_0x3d334f(0x17f)]({'success':![],'message':_0x3943ab instanceof Error?_0x3943ab[_0x3d334f(0x1a1)]:'Failed\x20to\x20perform\x20manual\x20domain\x20check'});}}),exports[a19_0x5e9e35(0x1c7)]=router;