'use strict';const a19_0x1fb521=a19_0x380c;(function(_0x52c23d,_0x29c2b7){const _0x2424b0=a19_0x380c,_0x4c2133=_0x52c23d();while(!![]){try{const _0x59ec84=parseInt(_0x2424b0(0x16a))/0x1*(-parseInt(_0x2424b0(0xf9))/0x2)+parseInt(_0x2424b0(0x13a))/0x3*(-parseInt(_0x2424b0(0x163))/0x4)+parseInt(_0x2424b0(0x11b))/0x5+parseInt(_0x2424b0(0x169))/0x6*(parseInt(_0x2424b0(0x108))/0x7)+parseInt(_0x2424b0(0x10f))/0x8*(-parseInt(_0x2424b0(0x112))/0x9)+parseInt(_0x2424b0(0xff))/0xa+parseInt(_0x2424b0(0x101))/0xb;if(_0x59ec84===_0x29c2b7)break;else _0x4c2133['push'](_0x4c2133['shift']());}catch(_0x4a8285){_0x4c2133['push'](_0x4c2133['shift']());}}}(a19_0x1e33,0x5baff));var __createBinding=this&&this[a19_0x1fb521(0x146)]||(Object[a19_0x1fb521(0x106)]?function(_0x52f9d1,_0x20dcb8,_0x29fb16,_0x55e134){const _0x401ce8=a19_0x1fb521;if(_0x55e134===undefined)_0x55e134=_0x29fb16;var _0x1edf31=Object[_0x401ce8(0x158)](_0x20dcb8,_0x29fb16);(!_0x1edf31||(_0x401ce8(0x13c)in _0x1edf31?!_0x20dcb8['__esModule']:_0x1edf31[_0x401ce8(0x107)]||_0x1edf31['configurable']))&&(_0x1edf31={'enumerable':!![],'get':function(){return _0x20dcb8[_0x29fb16];}}),Object['defineProperty'](_0x52f9d1,_0x55e134,_0x1edf31);}:function(_0x5f4129,_0x44799e,_0x549231,_0xfc77a6){if(_0xfc77a6===undefined)_0xfc77a6=_0x549231;_0x5f4129[_0xfc77a6]=_0x44799e[_0x549231];}),__setModuleDefault=this&&this[a19_0x1fb521(0x111)]||(Object[a19_0x1fb521(0x106)]?function(_0xb83e91,_0x4ab0dc){const _0x16a8de=a19_0x1fb521;Object[_0x16a8de(0xf0)](_0xb83e91,_0x16a8de(0x12a),{'enumerable':!![],'value':_0x4ab0dc});}:function(_0x397d98,_0x1486a4){const _0x203715=a19_0x1fb521;_0x397d98[_0x203715(0x12a)]=_0x1486a4;}),__importStar=this&&this[a19_0x1fb521(0x129)]||(function(){var _0x23b57a=function(_0x161464){const _0xce81cc=a19_0x380c;return _0x23b57a=Object[_0xce81cc(0x120)]||function(_0x97c87f){const _0x34ae31=_0xce81cc;var _0x5c7dd6=[];for(var _0x302e5c in _0x97c87f)if(Object[_0x34ae31(0x127)][_0x34ae31(0xfd)][_0x34ae31(0x13e)](_0x97c87f,_0x302e5c))_0x5c7dd6[_0x5c7dd6[_0x34ae31(0x154)]]=_0x302e5c;return _0x5c7dd6;},_0x23b57a(_0x161464);};return function(_0x109e09){const _0x3d602f=a19_0x380c;if(_0x109e09&&_0x109e09[_0x3d602f(0x147)])return _0x109e09;var _0x118b7a={};if(_0x109e09!=null){for(var _0x47d7b5=_0x23b57a(_0x109e09),_0x157fb0=0x0;_0x157fb0<_0x47d7b5[_0x3d602f(0x154)];_0x157fb0++)if(_0x47d7b5[_0x157fb0]!==_0x3d602f(0x12a))__createBinding(_0x118b7a,_0x109e09,_0x47d7b5[_0x157fb0]);}return __setModuleDefault(_0x118b7a,_0x109e09),_0x118b7a;};}());Object[a19_0x1fb521(0xf0)](exports,a19_0x1fb521(0x147),{'value':!![]});function a19_0x1e33(){const _0x498305=['../controllers/adminController','\x20days)','Failed\x20to\x20clean\x20old\x20logs','create','writable','387485HeQGCD','cointopay','CoinToPay\x20payment\x20status\x20checked\x20successfully','getTime','/merchants/selection','CoinToPay\x20automatic\x20status\x20checking\x20service','message','10032mvRDHa','error','__setModuleDefault','2232laJpgd','body','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','/payouts','suspendUser','Old\x20logs\x20cleaned\x20(kept\x20last\x20','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','/payments/:id/customer','gateway','986020VObDNP','findUnique','\x20days\x20if\x20not\x20paid','activateUser','getStatistics','getOwnPropertyNames','/cointopay/check/:paymentId','paymentId','validate','/payouts/:id','coinToPayStatusService','getMerchantsSelection','prototype','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','__importStar','default','toISOString','/payout/merchants','put','getUserById','use','delete','express','FAILED','/payout/stats','getPayments','/payout','getMonitoringStats','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','authenticateToken','getPayoutStats','6DshohP','log','get','checkPaymentById','call','updatedAt','shop','/users','domainMonitoringService','expiryDays','resolve','Failed\x20to\x20get\x20log\x20statistics','__createBinding','__esModule','updateUserSchema','payment','params','EXPIRED','updateCustomerDataSchema','/logs/stats','requireAdmin','Payments\x20automatically\x20expire\x20after\x20','AdminController','🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','Failed\x20to\x20perform\x20manual\x20domain\x20check','❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','length','post','/merchant-statistics','getPaymentTimerInfo','getOwnPropertyDescriptor','../middleware/auth','updateCustomerData','getUsers','../services/coinToPayStatusService','json','amount','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','/payments','status','/users/:id/suspend','433652MUufFE','updateUser','/cointopay/payment/:paymentId','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','/domain-monitoring/check','deleteUser','36xXWUHL','55iijHyr','defineProperty','deletePayout','gatewayPaymentId','cleanOldLogs','createPayout','Failed\x20to\x20get\x20payment\x20information','checkAuth','../config/database','Payment\x20not\x20found','13364sBWRER','createUserSchema','/users/:id','/logs/clean','hasOwnProperty','createPayoutSchema','1533090aWQuXJ','PENDING','6470596BSvSNg','/auth'];a19_0x1e33=function(){return _0x498305;};return a19_0x1e33();}function a19_0x380c(_0x460cbc,_0x472d97){const _0x1e3336=a19_0x1e33();return a19_0x380c=function(_0x380c64,_0x34371f){_0x380c64=_0x380c64-0xf0;let _0x4402a1=_0x1e3336[_0x380c64];return _0x4402a1;},a19_0x380c(_0x460cbc,_0x472d97);}const express_1=require(a19_0x1fb521(0x131)),adminController_1=require(a19_0x1fb521(0x103)),validation_1=require('../middleware/validation'),auth_1=require(a19_0x1fb521(0x159)),loggerService_1=require('../services/loggerService'),coinToPayStatusService_1=require(a19_0x1fb521(0x15c)),domainMonitoringService_1=require('../services/domainMonitoringService'),router=(0x0,express_1['Router'])(),adminController=new adminController_1[(a19_0x1fb521(0x150))]();router[a19_0x1fb521(0x12f)](auth_1[a19_0x1fb521(0x138)],auth_1[a19_0x1fb521(0x14e)]),router[a19_0x1fb521(0x13c)](a19_0x1fb521(0x102),adminController[a19_0x1fb521(0xf6)]),router[a19_0x1fb521(0x13c)]('/statistics',adminController[a19_0x1fb521(0x11f)]),router[a19_0x1fb521(0x13c)](a19_0x1fb521(0x156),adminController['getMerchantStatistics']),router[a19_0x1fb521(0x13c)](a19_0x1fb521(0x133),adminController[a19_0x1fb521(0x139)]),router[a19_0x1fb521(0x13c)](a19_0x1fb521(0x12c),adminController['getMerchantsAwaitingPayout']),router['get'](a19_0x1fb521(0x10c),adminController[a19_0x1fb521(0x126)]),router[a19_0x1fb521(0x155)](a19_0x1fb521(0x135),(0x0,validation_1['validate'])(validation_1[a19_0x1fb521(0xfe)]),adminController[a19_0x1fb521(0xf4)]),router[a19_0x1fb521(0x13c)](a19_0x1fb521(0x115),adminController['getPayouts']),router[a19_0x1fb521(0x13c)]('/payouts/:id',adminController['getPayoutById']),router[a19_0x1fb521(0x130)](a19_0x1fb521(0x124),adminController[a19_0x1fb521(0xf1)]),router[a19_0x1fb521(0x13c)](a19_0x1fb521(0x160),adminController[a19_0x1fb521(0x134)]),router[a19_0x1fb521(0x13c)]('/payments/:id',adminController['getPaymentById']),router[a19_0x1fb521(0x12d)]('/payments/:id',adminController['updatePayment']),router[a19_0x1fb521(0x12d)](a19_0x1fb521(0x119),(0x0,validation_1[a19_0x1fb521(0x123)])(validation_1[a19_0x1fb521(0x14c)]),adminController[a19_0x1fb521(0x15a)]),router[a19_0x1fb521(0x13c)](a19_0x1fb521(0x141),adminController[a19_0x1fb521(0x15b)]),router[a19_0x1fb521(0x13c)]('/users/:id',adminController[a19_0x1fb521(0x12e)]),router[a19_0x1fb521(0x155)](a19_0x1fb521(0x141),(0x0,validation_1['validate'])(validation_1[a19_0x1fb521(0xfa)]),adminController['createUser']),router[a19_0x1fb521(0x12d)](a19_0x1fb521(0xfb),(0x0,validation_1[a19_0x1fb521(0x123)])(validation_1[a19_0x1fb521(0x148)]),adminController[a19_0x1fb521(0x164)]),router[a19_0x1fb521(0x130)](a19_0x1fb521(0xfb),adminController[a19_0x1fb521(0x168)]),router[a19_0x1fb521(0x155)](a19_0x1fb521(0x162),adminController[a19_0x1fb521(0x116)]),router[a19_0x1fb521(0x155)]('/users/:id/activate',adminController[a19_0x1fb521(0x11e)]),router[a19_0x1fb521(0x13c)](a19_0x1fb521(0x14d),(_0x406527,_0x33da60)=>{const _0x551769=a19_0x1fb521;try{const _0x2b7d94=loggerService_1['loggerService']['getLogStats']();_0x33da60[_0x551769(0x15d)]({'success':!![],'result':_0x2b7d94});}catch(_0xd3707d){_0x33da60['status'](0x1f4)[_0x551769(0x15d)]({'success':![],'message':_0x551769(0x145)});}}),router[a19_0x1fb521(0x155)](a19_0x1fb521(0xfc),(_0x2f2730,_0x57a738)=>{const _0x20798b=a19_0x1fb521;try{const {daysToKeep:daysToKeep=0x1e}=_0x2f2730[_0x20798b(0x113)];loggerService_1['loggerService'][_0x20798b(0xf3)](daysToKeep),_0x57a738['json']({'success':!![],'message':_0x20798b(0x117)+daysToKeep+_0x20798b(0x104)});}catch(_0x50bd36){_0x57a738[_0x20798b(0x161)](0x1f4)[_0x20798b(0x15d)]({'success':![],'message':_0x20798b(0x105)});}}),router['post'](a19_0x1fb521(0x121),async(_0x5d605e,_0x25ced8)=>{const _0x1b85b5=a19_0x1fb521;try{const {paymentId:_0x558a57}=_0x5d605e['params'];console[_0x1b85b5(0x13b)](_0x1b85b5(0x151)+_0x558a57),await coinToPayStatusService_1['coinToPayStatusService'][_0x1b85b5(0x13d)](_0x558a57),_0x25ced8[_0x1b85b5(0x15d)]({'success':!![],'message':_0x1b85b5(0x10a)});}catch(_0x2d4dc1){console[_0x1b85b5(0x110)](_0x1b85b5(0x153)+_0x5d605e[_0x1b85b5(0x14a)][_0x1b85b5(0x122)]+':',_0x2d4dc1),_0x25ced8['status'](0x1f4)['json']({'success':![],'message':_0x2d4dc1 instanceof Error?_0x2d4dc1[_0x1b85b5(0x10e)]:_0x1b85b5(0x137)});}}),router[a19_0x1fb521(0x13c)]('/cointopay/stats',(_0x1b6071,_0x14bf99)=>{const _0x4af5a4=a19_0x1fb521;try{const _0x29af31=coinToPayStatusService_1[_0x4af5a4(0x125)]['getServiceStats']();_0x14bf99[_0x4af5a4(0x15d)]({'success':!![],'result':{..._0x29af31,'description':_0x4af5a4(0x10d),'statusMapping':{'Paid':'PAID','Awaiting\x20Fiat':_0x4af5a4(0x100),'waiting':_0x4af5a4(0x100),'expired':_0x4af5a4(0x14b),'failed':_0x4af5a4(0x132)},'autoExpiryNote':_0x4af5a4(0x14f)+_0x29af31[_0x4af5a4(0x143)]+_0x4af5a4(0x11d),'individualTimersNote':_0x4af5a4(0x128)}});}catch(_0x4b1e92){_0x14bf99['status'](0x1f4)['json']({'success':![],'message':_0x4af5a4(0x166)});}}),router[a19_0x1fb521(0x13c)](a19_0x1fb521(0x165),async(_0x2a0f91,_0x3b7a2a)=>{const _0x1fdcfb=a19_0x1fb521;try{const {paymentId:_0x31f2a1}=_0x2a0f91['params'],_0x38af92=coinToPayStatusService_1['coinToPayStatusService'][_0x1fdcfb(0x157)](_0x31f2a1),_0x5059ad=(await Promise[_0x1fdcfb(0x144)]()['then'](()=>__importStar(require(_0x1fdcfb(0xf7)))))[_0x1fdcfb(0x12a)],_0x561a5e=await _0x5059ad[_0x1fdcfb(0x149)][_0x1fdcfb(0x11c)]({'where':{'id':_0x31f2a1},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x561a5e)return _0x3b7a2a[_0x1fdcfb(0x161)](0x194)[_0x1fdcfb(0x15d)]({'success':![],'message':_0x1fdcfb(0xf8)});_0x3b7a2a[_0x1fdcfb(0x15d)]({'success':!![],'result':{'payment':{'id':_0x561a5e['id'],'gateway':_0x561a5e[_0x1fdcfb(0x11a)],'gatewayPaymentId':_0x561a5e[_0x1fdcfb(0xf2)],'status':_0x561a5e[_0x1fdcfb(0x161)],'amount':_0x561a5e[_0x1fdcfb(0x15e)],'currency':_0x561a5e['currency'],'createdAt':_0x561a5e['createdAt'],'updatedAt':_0x561a5e[_0x1fdcfb(0x13f)],'shop':_0x561a5e[_0x1fdcfb(0x140)]},'timers':_0x38af92,'isCoinToPay':_0x561a5e[_0x1fdcfb(0x11a)]===_0x1fdcfb(0x109),'ageInMinutes':Math['floor']((Date['now']()-_0x561a5e['createdAt'][_0x1fdcfb(0x10b)]())/(0x3e8*0x3c))}});}catch(_0x4505a2){_0x3b7a2a['status'](0x1f4)[_0x1fdcfb(0x15d)]({'success':![],'message':_0x4505a2 instanceof Error?_0x4505a2[_0x1fdcfb(0x10e)]:_0x1fdcfb(0xf5)});}}),router[a19_0x1fb521(0x13c)]('/domain-monitoring/stats',(_0x14fba8,_0xd9ad52)=>{const _0x4834aa=a19_0x1fb521;try{const _0x5acb8d=domainMonitoringService_1[_0x4834aa(0x142)][_0x4834aa(0x136)]();_0xd9ad52[_0x4834aa(0x15d)]({'success':!![],'result':{..._0x5acb8d,'description':_0x4834aa(0x118),'behavior':'Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','encoding':_0x4834aa(0x15f)}});}catch(_0x33431e){_0xd9ad52[_0x4834aa(0x161)](0x1f4)['json']({'success':![],'message':_0x4834aa(0x114)});}}),router[a19_0x1fb521(0x155)](a19_0x1fb521(0x167),async(_0xbc2bf3,_0x38915f)=>{const _0x3d82fe=a19_0x1fb521;try{const _0x5d8d50=await domainMonitoringService_1['domainMonitoringService']['manualCheck']();_0x38915f[_0x3d82fe(0x15d)]({'success':!![],'result':{'domainAvailable':_0x5d8d50,'message':_0x5d8d50?'Domain\x20is\x20responding\x20correctly':'Domain\x20check\x20failed','timestamp':new Date()[_0x3d82fe(0x12b)]()}});}catch(_0x1e3db5){_0x38915f[_0x3d82fe(0x161)](0x1f4)[_0x3d82fe(0x15d)]({'success':![],'message':_0x1e3db5 instanceof Error?_0x1e3db5[_0x3d82fe(0x10e)]:_0x3d82fe(0x152)});}}),exports[a19_0x1fb521(0x12a)]=router;