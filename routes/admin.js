'use strict';const a24_0x41c4d6=a24_0x23fa;(function(_0x151ee0,_0x114510){const _0x5d747a=a24_0x23fa,_0x520344=_0x151ee0();while(!![]){try{const _0x354d75=-parseInt(_0x5d747a(0x197))/0x1+parseInt(_0x5d747a(0x166))/0x2*(-parseInt(_0x5d747a(0x14f))/0x3)+parseInt(_0x5d747a(0x186))/0x4*(-parseInt(_0x5d747a(0x13f))/0x5)+-parseInt(_0x5d747a(0x143))/0x6+parseInt(_0x5d747a(0x19f))/0x7+-parseInt(_0x5d747a(0x164))/0x8+parseInt(_0x5d747a(0x182))/0x9;if(_0x354d75===_0x114510)break;else _0x520344['push'](_0x520344['shift']());}catch(_0x1644ce){_0x520344['push'](_0x520344['shift']());}}}(a24_0x4dd7,0x3e3ee));function a24_0x23fa(_0x54c0c3,_0x306779){_0x54c0c3=_0x54c0c3-0x131;const _0x4dd706=a24_0x4dd7();let _0x23faf2=_0x4dd706[_0x54c0c3];return _0x23faf2;}function a24_0x4dd7(){const _0x2f5815=['Failed\x20to\x20get\x20log\x20statistics','createdAt','length','express','deleteUser','3277344hTUqcs','defineProperty','18QmhXVI','put','/payments/:id/customer','activateUser','/payments','\x20days\x20if\x20not\x20paid','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','/cointopay/stats','createUser','currency','domainMonitoringService','message','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','floor','payment','FAILED','getLogStats','cleanOldLogs','suspendUser','use','/payouts/:id','getTime','/logs/stats','../services/loggerService','authenticateToken','cointopay','resolve','prototype','8586351BKxsmW','/cointopay/check/:paymentId','cleanupStalePayments','getPaymentTimerInfo','565456WcShdf','AdminController','EXPIRED','then','createUserSchema','/merchants/selection','/merchant-statistics','getOwnPropertyNames','Domain\x20is\x20responding\x20correctly','getStatistics','requireAdmin','/payments/:id','/auth','Failed\x20to\x20perform\x20manual\x20domain\x20check','expiryDays','validate','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','55916zhWEbM','/payout/stats','PENDING','getPayoutStats','getMerchantsAwaitingPayout','../services/coinToPayStatusService','/payout','coinToPayStatusService','2984051wlugNM','getProcessingPaymentsStats','loggerService','cleanupStalePendingPayments','body','__importStar','../controllers/adminController','status','findUnique','../config/database','__esModule','Domain\x20check\x20failed','checkAuth','../services/domainMonitoringService','paymentId','gateway','Router','configurable','now','get','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','default','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','/statistics','post','/payments/cleanup','/domain-monitoring/stats','getMerchantsSelection','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','10RVpMUX','/payments/cleanup-with-report','updateCustomerData','create','1349610jdqyOs','cleanupStalePaymentsWithReport','/users','PAID','amount','getMerchantStatistics','\x20days)','createPayout','params','Failed\x20to\x20clean\x20old\x20logs','delete','manualCheck','50709NKljXu','getPayments','gatewayPaymentId','toISOString','/payments/processing-stats','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','/users/:id/suspend','getPayoutById','error','writable','__setModuleDefault','shop','getUsers','Payment\x20not\x20found','/users/:id','json'];a24_0x4dd7=function(){return _0x2f5815;};return a24_0x4dd7();}var __createBinding=this&&this['__createBinding']||(Object[a24_0x41c4d6(0x142)]?function(_0x305f1d,_0x48a3f9,_0x12c18f,_0x5738f4){const _0x46a0bd=a24_0x41c4d6;if(_0x5738f4===undefined)_0x5738f4=_0x12c18f;var _0x228823=Object['getOwnPropertyDescriptor'](_0x48a3f9,_0x12c18f);(!_0x228823||(_0x46a0bd(0x135)in _0x228823?!_0x48a3f9['__esModule']:_0x228823[_0x46a0bd(0x158)]||_0x228823[_0x46a0bd(0x133)]))&&(_0x228823={'enumerable':!![],'get':function(){return _0x48a3f9[_0x12c18f];}}),Object[_0x46a0bd(0x165)](_0x305f1d,_0x5738f4,_0x228823);}:function(_0x2e9a12,_0x4ad702,_0x59bd78,_0x40c9f7){if(_0x40c9f7===undefined)_0x40c9f7=_0x59bd78;_0x2e9a12[_0x40c9f7]=_0x4ad702[_0x59bd78];}),__setModuleDefault=this&&this[a24_0x41c4d6(0x159)]||(Object[a24_0x41c4d6(0x142)]?function(_0x4f3b34,_0x759231){const _0x20a70f=a24_0x41c4d6;Object[_0x20a70f(0x165)](_0x4f3b34,'default',{'enumerable':!![],'value':_0x759231});}:function(_0xceee50,_0x553b90){const _0x3a914d=a24_0x41c4d6;_0xceee50[_0x3a914d(0x137)]=_0x553b90;}),__importStar=this&&this[a24_0x41c4d6(0x1a4)]||(function(){var _0x41b63e=function(_0xffee5){const _0x1f806d=a24_0x23fa;return _0x41b63e=Object[_0x1f806d(0x18d)]||function(_0x454f5a){const _0x223810=_0x1f806d;var _0x42fddf=[];for(var _0x5edc7b in _0x454f5a)if(Object[_0x223810(0x181)]['hasOwnProperty']['call'](_0x454f5a,_0x5edc7b))_0x42fddf[_0x42fddf[_0x223810(0x161)]]=_0x5edc7b;return _0x42fddf;},_0x41b63e(_0xffee5);};return function(_0x4a1659){const _0x57b937=a24_0x23fa;if(_0x4a1659&&_0x4a1659[_0x57b937(0x1a9)])return _0x4a1659;var _0x301eb6={};if(_0x4a1659!=null){for(var _0x5a2e7f=_0x41b63e(_0x4a1659),_0x1589cb=0x0;_0x1589cb<_0x5a2e7f['length'];_0x1589cb++)if(_0x5a2e7f[_0x1589cb]!==_0x57b937(0x137))__createBinding(_0x301eb6,_0x4a1659,_0x5a2e7f[_0x1589cb]);}return __setModuleDefault(_0x301eb6,_0x4a1659),_0x301eb6;};}());Object[a24_0x41c4d6(0x165)](exports,'__esModule',{'value':!![]});const express_1=require(a24_0x41c4d6(0x162)),adminController_1=require(a24_0x41c4d6(0x1a5)),validation_1=require('../middleware/validation'),auth_1=require('../middleware/auth'),loggerService_1=require(a24_0x41c4d6(0x17d)),coinToPayStatusService_1=require(a24_0x41c4d6(0x19c)),domainMonitoringService_1=require(a24_0x41c4d6(0x1ac)),router=(0x0,express_1[a24_0x41c4d6(0x132)])(),adminController=new adminController_1[(a24_0x41c4d6(0x187))]();router[a24_0x41c4d6(0x179)](auth_1[a24_0x41c4d6(0x17e)],auth_1[a24_0x41c4d6(0x190)]),router[a24_0x41c4d6(0x135)](a24_0x41c4d6(0x192),adminController[a24_0x41c4d6(0x1ab)]),router[a24_0x41c4d6(0x135)](a24_0x41c4d6(0x139),adminController[a24_0x41c4d6(0x18f)]),router[a24_0x41c4d6(0x135)](a24_0x41c4d6(0x18c),adminController[a24_0x41c4d6(0x148)]),router[a24_0x41c4d6(0x135)](a24_0x41c4d6(0x198),adminController[a24_0x41c4d6(0x19a)]),router['get']('/payout/merchants',adminController[a24_0x41c4d6(0x19b)]),router['get'](a24_0x41c4d6(0x18b),adminController[a24_0x41c4d6(0x13d)]),router[a24_0x41c4d6(0x13a)](a24_0x41c4d6(0x19d),(0x0,validation_1[a24_0x41c4d6(0x195)])(validation_1['createPayoutSchema']),adminController[a24_0x41c4d6(0x14a)]),router[a24_0x41c4d6(0x135)]('/payouts',adminController['getPayouts']),router['get'](a24_0x41c4d6(0x17a),adminController[a24_0x41c4d6(0x156)]),router[a24_0x41c4d6(0x14d)](a24_0x41c4d6(0x17a),adminController['deletePayout']),router[a24_0x41c4d6(0x135)](a24_0x41c4d6(0x16a),adminController[a24_0x41c4d6(0x150)]),router[a24_0x41c4d6(0x135)](a24_0x41c4d6(0x191),adminController['getPaymentById']),router[a24_0x41c4d6(0x167)](a24_0x41c4d6(0x191),adminController['updatePayment']),router[a24_0x41c4d6(0x167)](a24_0x41c4d6(0x168),(0x0,validation_1[a24_0x41c4d6(0x195)])(validation_1['updateCustomerDataSchema']),adminController[a24_0x41c4d6(0x141)]),router[a24_0x41c4d6(0x135)](a24_0x41c4d6(0x153),adminController[a24_0x41c4d6(0x1a0)]),router[a24_0x41c4d6(0x13a)](a24_0x41c4d6(0x13b),adminController[a24_0x41c4d6(0x184)]),router[a24_0x41c4d6(0x13a)]('/payments/cleanup-pending',adminController[a24_0x41c4d6(0x1a2)]),router[a24_0x41c4d6(0x13a)](a24_0x41c4d6(0x140),adminController[a24_0x41c4d6(0x144)]),router['get'](a24_0x41c4d6(0x145),adminController[a24_0x41c4d6(0x15b)]),router[a24_0x41c4d6(0x135)](a24_0x41c4d6(0x15d),adminController['getUserById']),router['post'](a24_0x41c4d6(0x145),(0x0,validation_1['validate'])(validation_1[a24_0x41c4d6(0x18a)]),adminController[a24_0x41c4d6(0x16e)]),router[a24_0x41c4d6(0x167)](a24_0x41c4d6(0x15d),(0x0,validation_1[a24_0x41c4d6(0x195)])(validation_1['updateUserSchema']),adminController['updateUser']),router[a24_0x41c4d6(0x14d)](a24_0x41c4d6(0x15d),adminController[a24_0x41c4d6(0x163)]),router[a24_0x41c4d6(0x13a)](a24_0x41c4d6(0x155),adminController[a24_0x41c4d6(0x178)]),router[a24_0x41c4d6(0x13a)]('/users/:id/activate',adminController[a24_0x41c4d6(0x169)]),router[a24_0x41c4d6(0x135)](a24_0x41c4d6(0x17c),(_0x23e05e,_0x306eaa)=>{const _0x5253f3=a24_0x41c4d6;try{const _0x3093b9=loggerService_1[_0x5253f3(0x1a1)][_0x5253f3(0x176)]();_0x306eaa['json']({'success':!![],'result':_0x3093b9});}catch(_0x2a9fee){_0x306eaa[_0x5253f3(0x1a6)](0x1f4)[_0x5253f3(0x15e)]({'success':![],'message':_0x5253f3(0x15f)});}}),router[a24_0x41c4d6(0x13a)]('/logs/clean',(_0xfc9e9b,_0x37ff9c)=>{const _0x5194f7=a24_0x41c4d6;try{const {daysToKeep:daysToKeep=0x1e}=_0xfc9e9b[_0x5194f7(0x1a3)];loggerService_1[_0x5194f7(0x1a1)][_0x5194f7(0x177)](daysToKeep),_0x37ff9c[_0x5194f7(0x15e)]({'success':!![],'message':'Old\x20logs\x20cleaned\x20(kept\x20last\x20'+daysToKeep+_0x5194f7(0x149)});}catch(_0x4e5a36){_0x37ff9c[_0x5194f7(0x1a6)](0x1f4)[_0x5194f7(0x15e)]({'success':![],'message':_0x5194f7(0x14c)});}}),router[a24_0x41c4d6(0x13a)](a24_0x41c4d6(0x183),async(_0x3a64a9,_0x2fc707)=>{const _0x2437d8=a24_0x41c4d6;try{const {paymentId:_0x52515c}=_0x3a64a9[_0x2437d8(0x14b)];console['log']('üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20'+_0x52515c),await coinToPayStatusService_1[_0x2437d8(0x19e)]['checkPaymentById'](_0x52515c),_0x2fc707['json']({'success':!![],'message':'CoinToPay\x20payment\x20status\x20checked\x20successfully'});}catch(_0x48c294){console[_0x2437d8(0x157)](_0x2437d8(0x138)+_0x3a64a9['params'][_0x2437d8(0x1ad)]+':',_0x48c294),_0x2fc707[_0x2437d8(0x1a6)](0x1f4)['json']({'success':![],'message':_0x48c294 instanceof Error?_0x48c294[_0x2437d8(0x171)]:_0x2437d8(0x196)});}}),router[a24_0x41c4d6(0x135)](a24_0x41c4d6(0x16d),(_0xd8e4b8,_0x585318)=>{const _0x10e75e=a24_0x41c4d6;try{const _0x49fad7=coinToPayStatusService_1[_0x10e75e(0x19e)]['getServiceStats']();_0x585318['json']({'success':!![],'result':{..._0x49fad7,'description':'CoinToPay\x20automatic\x20status\x20checking\x20service','statusMapping':{'Paid':_0x10e75e(0x146),'Awaiting\x20Fiat':_0x10e75e(0x199),'waiting':_0x10e75e(0x199),'expired':_0x10e75e(0x188),'failed':_0x10e75e(0x175)},'autoExpiryNote':'Payments\x20automatically\x20expire\x20after\x20'+_0x49fad7[_0x10e75e(0x194)]+_0x10e75e(0x16b),'individualTimersNote':_0x10e75e(0x16c)}});}catch(_0x5590f0){_0x585318[_0x10e75e(0x1a6)](0x1f4)['json']({'success':![],'message':_0x10e75e(0x154)});}}),router[a24_0x41c4d6(0x135)]('/cointopay/payment/:paymentId',async(_0x324305,_0x2f6c73)=>{const _0x45f4a3=a24_0x41c4d6;try{const {paymentId:_0x27363d}=_0x324305[_0x45f4a3(0x14b)],_0x391cdd=coinToPayStatusService_1[_0x45f4a3(0x19e)][_0x45f4a3(0x185)](_0x27363d),_0x3de18f=(await Promise[_0x45f4a3(0x180)]()[_0x45f4a3(0x189)](()=>__importStar(require(_0x45f4a3(0x1a8)))))[_0x45f4a3(0x137)],_0x13a072=await _0x3de18f[_0x45f4a3(0x174)][_0x45f4a3(0x1a7)]({'where':{'id':_0x27363d},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x13a072)return _0x2f6c73[_0x45f4a3(0x1a6)](0x194)[_0x45f4a3(0x15e)]({'success':![],'message':_0x45f4a3(0x15c)});_0x2f6c73[_0x45f4a3(0x15e)]({'success':!![],'result':{'payment':{'id':_0x13a072['id'],'gateway':_0x13a072[_0x45f4a3(0x131)],'gatewayPaymentId':_0x13a072[_0x45f4a3(0x151)],'status':_0x13a072['status'],'amount':_0x13a072[_0x45f4a3(0x147)],'currency':_0x13a072[_0x45f4a3(0x16f)],'createdAt':_0x13a072[_0x45f4a3(0x160)],'updatedAt':_0x13a072['updatedAt'],'shop':_0x13a072[_0x45f4a3(0x15a)]},'timers':_0x391cdd,'isCoinToPay':_0x13a072[_0x45f4a3(0x131)]===_0x45f4a3(0x17f),'ageInMinutes':Math[_0x45f4a3(0x173)]((Date[_0x45f4a3(0x134)]()-_0x13a072[_0x45f4a3(0x160)][_0x45f4a3(0x17b)]())/(0x3e8*0x3c))}});}catch(_0x4232fc){_0x2f6c73[_0x45f4a3(0x1a6)](0x1f4)['json']({'success':![],'message':_0x4232fc instanceof Error?_0x4232fc['message']:'Failed\x20to\x20get\x20payment\x20information'});}}),router[a24_0x41c4d6(0x135)](a24_0x41c4d6(0x13c),(_0x1b3d55,_0x3a8dac)=>{const _0xd4da16=a24_0x41c4d6;try{const _0x1aed89=domainMonitoringService_1[_0xd4da16(0x170)]['getMonitoringStats']();_0x3a8dac[_0xd4da16(0x15e)]({'success':!![],'result':{..._0x1aed89,'description':_0xd4da16(0x13e),'behavior':'Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','encoding':_0xd4da16(0x172)}});}catch(_0x24f96b){_0x3a8dac[_0xd4da16(0x1a6)](0x1f4)[_0xd4da16(0x15e)]({'success':![],'message':_0xd4da16(0x136)});}}),router['post']('/domain-monitoring/check',async(_0xb27dcf,_0x5a0c34)=>{const _0x1bcd7b=a24_0x41c4d6;try{const _0xf67608=await domainMonitoringService_1[_0x1bcd7b(0x170)][_0x1bcd7b(0x14e)]();_0x5a0c34[_0x1bcd7b(0x15e)]({'success':!![],'result':{'domainAvailable':_0xf67608,'message':_0xf67608?_0x1bcd7b(0x18e):_0x1bcd7b(0x1aa),'timestamp':new Date()[_0x1bcd7b(0x152)]()}});}catch(_0x9c011f){_0x5a0c34[_0x1bcd7b(0x1a6)](0x1f4)[_0x1bcd7b(0x15e)]({'success':![],'message':_0x9c011f instanceof Error?_0x9c011f['message']:_0x1bcd7b(0x193)});}}),exports[a24_0x41c4d6(0x137)]=router;