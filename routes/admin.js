'use strict';function a21_0x1f58(_0x26a120,_0x365d0c){const _0x38588a=a21_0x3858();return a21_0x1f58=function(_0x1f58b3,_0x275142){_0x1f58b3=_0x1f58b3-0x6f;let _0x41f7af=_0x38588a[_0x1f58b3];return _0x41f7af;},a21_0x1f58(_0x26a120,_0x365d0c);}function a21_0x3858(){const _0x265068=['loggerService','../config/database','/cointopay/check/:paymentId','600zhdiDZ','getPayouts','Failed\x20to\x20get\x20log\x20statistics','message','cleanOldLogs','currency','suspendUser','createUser','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','prototype','payment','12618431FXeVts','checkPaymentById','createUserSchema','Failed\x20to\x20clean\x20old\x20logs','use','error','createdAt','getMerchantsAwaitingPayout','getMerchantStatistics','Failed\x20to\x20get\x20payment\x20information','json','cleanupStalePaymentsWithReport','EXPIRED','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','updateCustomerDataSchema','cleanupStalePendingPayments','updatedAt','__importStar','4OoUMzG','CoinToPay\x20automatic\x20status\x20checking\x20service','18266468lGKXEW','__setModuleDefault','8RVYoip','deleteUser','params','Router','Payment\x20not\x20found','getServiceStats','getUserById','getMonitoringStats','Domain\x20check\x20failed','call','log','now','coinToPayStatusService','/payments/cleanup','getPaymentTimerInfo','/domain-monitoring/check','/merchants/selection','/users/:id','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','updatePayment','/payments/:id/customer','getOwnPropertyDescriptor','configurable','FAILED','getLogStats','findUnique','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','default','delete','\x20days)','/payouts','status','/payments/:id','/logs/clean','__esModule','CoinToPay\x20payment\x20status\x20checked\x20successfully','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','cleanupStalePayments','getOwnPropertyNames','expiryDays','/payments/cleanup-pending','getTime','gateway','validate','../controllers/adminController','deletePayout','13363024tZVZbn','234412UuEWcw','__createBinding','toISOString','/users','/cointopay/stats','1861386SNudyP','AdminController','createPayout','getPayoutStats','put','../services/domainMonitoringService','getProcessingPaymentsStats','/logs/stats','2313WDInik','Domain\x20is\x20responding\x20correctly','getPayments','/payout/merchants','/statistics','cointopay','../services/coinToPayStatusService','../middleware/auth','checkAuth','create','amount','PAID','domainMonitoringService','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','6995VzhwkT','manualCheck','get','post','/merchant-statistics','/payouts/:id','\x20days\x20if\x20not\x20paid','/users/:id/activate','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','../middleware/validation','Payments\x20automatically\x20expire\x20after\x20','then','/cointopay/payment/:paymentId','defineProperty','24820FzdvyR','length','/payments/processing-stats','shop','authenticateToken','requireAdmin','activateUser','/users/:id/suspend','PENDING'];a21_0x3858=function(){return _0x265068;};return a21_0x3858();}const a21_0x3149f6=a21_0x1f58;(function(_0x1280de,_0x4718fd){const _0x40bfb8=a21_0x1f58,_0x32df00=_0x1280de();while(!![]){try{const _0x5e5bdd=parseInt(_0x40bfb8(0x80))/0x1*(parseInt(_0x40bfb8(0xd2))/0x2)+parseInt(_0x40bfb8(0x85))/0x3*(parseInt(_0x40bfb8(0xd6))/0x4)+-parseInt(_0x40bfb8(0x9b))/0x5*(-parseInt(_0x40bfb8(0xb5))/0x6)+parseInt(_0x40bfb8(0xc0))/0x7+-parseInt(_0x40bfb8(0x7f))/0x8+parseInt(_0x40bfb8(0x8d))/0x9*(parseInt(_0x40bfb8(0xa9))/0xa)+-parseInt(_0x40bfb8(0xd4))/0xb;if(_0x5e5bdd===_0x4718fd)break;else _0x32df00['push'](_0x32df00['shift']());}catch(_0x44989e){_0x32df00['push'](_0x32df00['shift']());}}}(a21_0x3858,0xea2d5));var __createBinding=this&&this[a21_0x3149f6(0x81)]||(Object[a21_0x3149f6(0x96)]?function(_0x40558c,_0x3a10ef,_0x57fa26,_0x23f39c){const _0x516302=a21_0x3149f6;if(_0x23f39c===undefined)_0x23f39c=_0x57fa26;var _0x495e39=Object[_0x516302(0xeb)](_0x3a10ef,_0x57fa26);(!_0x495e39||(_0x516302(0x9d)in _0x495e39?!_0x3a10ef[_0x516302(0x73)]:_0x495e39['writable']||_0x495e39[_0x516302(0xec)]))&&(_0x495e39={'enumerable':!![],'get':function(){return _0x3a10ef[_0x57fa26];}}),Object['defineProperty'](_0x40558c,_0x23f39c,_0x495e39);}:function(_0x46a614,_0xf76d61,_0x127248,_0x3dd0bd){if(_0x3dd0bd===undefined)_0x3dd0bd=_0x127248;_0x46a614[_0x3dd0bd]=_0xf76d61[_0x127248];}),__setModuleDefault=this&&this[a21_0x3149f6(0xd5)]||(Object['create']?function(_0x273f4d,_0x1cc716){const _0x4d3552=a21_0x3149f6;Object[_0x4d3552(0xa8)](_0x273f4d,_0x4d3552(0xf1),{'enumerable':!![],'value':_0x1cc716});}:function(_0x253617,_0x224c34){const _0xedea34=a21_0x3149f6;_0x253617[_0xedea34(0xf1)]=_0x224c34;}),__importStar=this&&this[a21_0x3149f6(0xd1)]||(function(){var _0x1485b9=function(_0x1364c9){const _0x22b654=a21_0x1f58;return _0x1485b9=Object[_0x22b654(0x77)]||function(_0x2ce633){const _0x274679=_0x22b654;var _0x56bc61=[];for(var _0x1b6ef1 in _0x2ce633)if(Object[_0x274679(0xbe)]['hasOwnProperty'][_0x274679(0xdf)](_0x2ce633,_0x1b6ef1))_0x56bc61[_0x56bc61[_0x274679(0xaa)]]=_0x1b6ef1;return _0x56bc61;},_0x1485b9(_0x1364c9);};return function(_0x660069){const _0x3f8cff=a21_0x1f58;if(_0x660069&&_0x660069[_0x3f8cff(0x73)])return _0x660069;var _0x509b37={};if(_0x660069!=null){for(var _0x3357ef=_0x1485b9(_0x660069),_0x1165d3=0x0;_0x1165d3<_0x3357ef[_0x3f8cff(0xaa)];_0x1165d3++)if(_0x3357ef[_0x1165d3]!==_0x3f8cff(0xf1))__createBinding(_0x509b37,_0x660069,_0x3357ef[_0x1165d3]);}return __setModuleDefault(_0x509b37,_0x660069),_0x509b37;};}());Object['defineProperty'](exports,a21_0x3149f6(0x73),{'value':!![]});const express_1=require('express'),adminController_1=require(a21_0x3149f6(0x7d)),validation_1=require(a21_0x3149f6(0xa4)),auth_1=require(a21_0x3149f6(0x94)),loggerService_1=require('../services/loggerService'),coinToPayStatusService_1=require(a21_0x3149f6(0x93)),domainMonitoringService_1=require(a21_0x3149f6(0x8a)),router=(0x0,express_1[a21_0x3149f6(0xd9)])(),adminController=new adminController_1[(a21_0x3149f6(0x86))]();router[a21_0x3149f6(0xc4)](auth_1[a21_0x3149f6(0xad)],auth_1[a21_0x3149f6(0xae)]),router['get']('/auth',adminController[a21_0x3149f6(0x95)]),router[a21_0x3149f6(0x9d)](a21_0x3149f6(0x91),adminController['getStatistics']),router[a21_0x3149f6(0x9d)](a21_0x3149f6(0x9f),adminController[a21_0x3149f6(0xc8)]),router[a21_0x3149f6(0x9d)]('/payout/stats',adminController[a21_0x3149f6(0x88)]),router['get'](a21_0x3149f6(0x90),adminController[a21_0x3149f6(0xc7)]),router[a21_0x3149f6(0x9d)](a21_0x3149f6(0xe6),adminController['getMerchantsSelection']),router['post']('/payout',(0x0,validation_1[a21_0x3149f6(0x7c)])(validation_1['createPayoutSchema']),adminController[a21_0x3149f6(0x87)]),router[a21_0x3149f6(0x9d)](a21_0x3149f6(0x6f),adminController[a21_0x3149f6(0xb6)]),router[a21_0x3149f6(0x9d)](a21_0x3149f6(0xa0),adminController['getPayoutById']),router[a21_0x3149f6(0xf2)](a21_0x3149f6(0xa0),adminController[a21_0x3149f6(0x7e)]),router[a21_0x3149f6(0x9d)]('/payments',adminController[a21_0x3149f6(0x8f)]),router['get']('/payments/:id',adminController['getPaymentById']),router[a21_0x3149f6(0x89)](a21_0x3149f6(0x71),adminController[a21_0x3149f6(0xe9)]),router['put'](a21_0x3149f6(0xea),(0x0,validation_1[a21_0x3149f6(0x7c)])(validation_1[a21_0x3149f6(0xce)]),adminController['updateCustomerData']),router[a21_0x3149f6(0x9d)](a21_0x3149f6(0xab),adminController[a21_0x3149f6(0x8b)]),router[a21_0x3149f6(0x9e)](a21_0x3149f6(0xe3),adminController[a21_0x3149f6(0x76)]),router['post'](a21_0x3149f6(0x79),adminController[a21_0x3149f6(0xcf)]),router[a21_0x3149f6(0x9e)]('/payments/cleanup-with-report',adminController[a21_0x3149f6(0xcb)]),router[a21_0x3149f6(0x9d)](a21_0x3149f6(0x83),adminController['getUsers']),router['get'](a21_0x3149f6(0xe7),adminController[a21_0x3149f6(0xdc)]),router[a21_0x3149f6(0x9e)]('/users',(0x0,validation_1[a21_0x3149f6(0x7c)])(validation_1[a21_0x3149f6(0xc2)]),adminController[a21_0x3149f6(0xbc)]),router[a21_0x3149f6(0x89)]('/users/:id',(0x0,validation_1[a21_0x3149f6(0x7c)])(validation_1['updateUserSchema']),adminController['updateUser']),router[a21_0x3149f6(0xf2)]('/users/:id',adminController[a21_0x3149f6(0xd7)]),router['post'](a21_0x3149f6(0xb0),adminController[a21_0x3149f6(0xbb)]),router[a21_0x3149f6(0x9e)](a21_0x3149f6(0xa2),adminController[a21_0x3149f6(0xaf)]),router['get'](a21_0x3149f6(0x8c),(_0x3a06f1,_0x17873a)=>{const _0x513548=a21_0x3149f6;try{const _0x5a570e=loggerService_1[_0x513548(0xb2)][_0x513548(0xee)]();_0x17873a[_0x513548(0xca)]({'success':!![],'result':_0x5a570e});}catch(_0x11bc97){_0x17873a['status'](0x1f4)[_0x513548(0xca)]({'success':![],'message':_0x513548(0xb7)});}}),router['post'](a21_0x3149f6(0x72),(_0x9fa48f,_0x1b0459)=>{const _0x232880=a21_0x3149f6;try{const {daysToKeep:daysToKeep=0x1e}=_0x9fa48f['body'];loggerService_1[_0x232880(0xb2)][_0x232880(0xb9)](daysToKeep),_0x1b0459[_0x232880(0xca)]({'success':!![],'message':'Old\x20logs\x20cleaned\x20(kept\x20last\x20'+daysToKeep+_0x232880(0xf3)});}catch(_0x4787bd){_0x1b0459[_0x232880(0x70)](0x1f4)[_0x232880(0xca)]({'success':![],'message':_0x232880(0xc3)});}}),router['post'](a21_0x3149f6(0xb4),async(_0x24253f,_0x3beb3a)=>{const _0x3a5313=a21_0x3149f6;try{const {paymentId:_0x543bd8}=_0x24253f[_0x3a5313(0xd8)];console[_0x3a5313(0xe0)](_0x3a5313(0x9a)+_0x543bd8),await coinToPayStatusService_1[_0x3a5313(0xe2)][_0x3a5313(0xc1)](_0x543bd8),_0x3beb3a[_0x3a5313(0xca)]({'success':!![],'message':_0x3a5313(0x74)});}catch(_0x24f0c5){console[_0x3a5313(0xc5)](_0x3a5313(0xcd)+_0x24253f[_0x3a5313(0xd8)]['paymentId']+':',_0x24f0c5),_0x3beb3a['status'](0x1f4)[_0x3a5313(0xca)]({'success':![],'message':_0x24f0c5 instanceof Error?_0x24f0c5[_0x3a5313(0xb8)]:_0x3a5313(0x75)});}}),router[a21_0x3149f6(0x9d)](a21_0x3149f6(0x84),(_0x3a68d9,_0x2d44f8)=>{const _0x5e814c=a21_0x3149f6;try{const _0x503164=coinToPayStatusService_1['coinToPayStatusService'][_0x5e814c(0xdb)]();_0x2d44f8['json']({'success':!![],'result':{..._0x503164,'description':_0x5e814c(0xd3),'statusMapping':{'Paid':_0x5e814c(0x98),'Awaiting\x20Fiat':_0x5e814c(0xb1),'waiting':_0x5e814c(0xb1),'expired':_0x5e814c(0xcc),'failed':_0x5e814c(0xed)},'autoExpiryNote':_0x5e814c(0xa5)+_0x503164[_0x5e814c(0x78)]+_0x5e814c(0xa1),'individualTimersNote':_0x5e814c(0xa3)}});}catch(_0x48a5ce){_0x2d44f8[_0x5e814c(0x70)](0x1f4)[_0x5e814c(0xca)]({'success':![],'message':_0x5e814c(0xf0)});}}),router[a21_0x3149f6(0x9d)](a21_0x3149f6(0xa7),async(_0x3db871,_0x38a6ad)=>{const _0x5b1497=a21_0x3149f6;try{const {paymentId:_0x3b059b}=_0x3db871[_0x5b1497(0xd8)],_0x126780=coinToPayStatusService_1[_0x5b1497(0xe2)][_0x5b1497(0xe4)](_0x3b059b),_0x151926=(await Promise['resolve']()[_0x5b1497(0xa6)](()=>__importStar(require(_0x5b1497(0xb3)))))['default'],_0x3ca574=await _0x151926[_0x5b1497(0xbf)][_0x5b1497(0xef)]({'where':{'id':_0x3b059b},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x3ca574)return _0x38a6ad['status'](0x194)[_0x5b1497(0xca)]({'success':![],'message':_0x5b1497(0xda)});_0x38a6ad['json']({'success':!![],'result':{'payment':{'id':_0x3ca574['id'],'gateway':_0x3ca574[_0x5b1497(0x7b)],'gatewayPaymentId':_0x3ca574['gatewayPaymentId'],'status':_0x3ca574[_0x5b1497(0x70)],'amount':_0x3ca574[_0x5b1497(0x97)],'currency':_0x3ca574[_0x5b1497(0xba)],'createdAt':_0x3ca574[_0x5b1497(0xc6)],'updatedAt':_0x3ca574[_0x5b1497(0xd0)],'shop':_0x3ca574[_0x5b1497(0xac)]},'timers':_0x126780,'isCoinToPay':_0x3ca574[_0x5b1497(0x7b)]===_0x5b1497(0x92),'ageInMinutes':Math['floor']((Date[_0x5b1497(0xe1)]()-_0x3ca574[_0x5b1497(0xc6)][_0x5b1497(0x7a)]())/(0x3e8*0x3c))}});}catch(_0x556f3b){_0x38a6ad[_0x5b1497(0x70)](0x1f4)['json']({'success':![],'message':_0x556f3b instanceof Error?_0x556f3b[_0x5b1497(0xb8)]:_0x5b1497(0xc9)});}}),router['get']('/domain-monitoring/stats',(_0x4edfc1,_0x432f18)=>{const _0x539691=a21_0x3149f6;try{const _0x4d355c=domainMonitoringService_1['domainMonitoringService'][_0x539691(0xdd)]();_0x432f18['json']({'success':!![],'result':{..._0x4d355c,'description':_0x539691(0xe8),'behavior':'Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','encoding':_0x539691(0xbd)}});}catch(_0xeafb78){_0x432f18[_0x539691(0x70)](0x1f4)[_0x539691(0xca)]({'success':![],'message':'Failed\x20to\x20get\x20domain\x20monitoring\x20statistics'});}}),router[a21_0x3149f6(0x9e)](a21_0x3149f6(0xe5),async(_0x39f716,_0x52af13)=>{const _0x4c7de1=a21_0x3149f6;try{const _0x565ae1=await domainMonitoringService_1[_0x4c7de1(0x99)][_0x4c7de1(0x9c)]();_0x52af13['json']({'success':!![],'result':{'domainAvailable':_0x565ae1,'message':_0x565ae1?_0x4c7de1(0x8e):_0x4c7de1(0xde),'timestamp':new Date()[_0x4c7de1(0x82)]()}});}catch(_0xb7c467){_0x52af13[_0x4c7de1(0x70)](0x1f4)[_0x4c7de1(0xca)]({'success':![],'message':_0xb7c467 instanceof Error?_0xb7c467[_0x4c7de1(0xb8)]:'Failed\x20to\x20perform\x20manual\x20domain\x20check'});}}),exports[a21_0x3149f6(0xf1)]=router;