'use strict';const a19_0x5039b3=a19_0x41a0;(function(_0x59cead,_0x3a78db){const _0x4b84d4=a19_0x41a0,_0x507e6b=_0x59cead();while(!![]){try{const _0x17ce6f=parseInt(_0x4b84d4(0x13b))/0x1+-parseInt(_0x4b84d4(0x168))/0x2*(-parseInt(_0x4b84d4(0x145))/0x3)+-parseInt(_0x4b84d4(0x136))/0x4+parseInt(_0x4b84d4(0x165))/0x5*(parseInt(_0x4b84d4(0x153))/0x6)+-parseInt(_0x4b84d4(0x171))/0x7+parseInt(_0x4b84d4(0x11d))/0x8*(parseInt(_0x4b84d4(0x148))/0x9)+parseInt(_0x4b84d4(0x146))/0xa;if(_0x17ce6f===_0x3a78db)break;else _0x507e6b['push'](_0x507e6b['shift']());}catch(_0x137f18){_0x507e6b['push'](_0x507e6b['shift']());}}}(a19_0x1a5a,0x34a63));var __createBinding=this&&this[a19_0x5039b3(0x18d)]||(Object[a19_0x5039b3(0x159)]?function(_0x4cbbda,_0x32f531,_0x50df32,_0x4cd8be){const _0x5d6b29=a19_0x5039b3;if(_0x4cd8be===undefined)_0x4cd8be=_0x50df32;var _0x447268=Object[_0x5d6b29(0x190)](_0x32f531,_0x50df32);(!_0x447268||('get'in _0x447268?!_0x32f531['__esModule']:_0x447268['writable']||_0x447268[_0x5d6b29(0x176)]))&&(_0x447268={'enumerable':!![],'get':function(){return _0x32f531[_0x50df32];}}),Object[_0x5d6b29(0x13c)](_0x4cbbda,_0x4cd8be,_0x447268);}:function(_0x5d2a5c,_0x3f970a,_0x3207a5,_0x30ce89){if(_0x30ce89===undefined)_0x30ce89=_0x3207a5;_0x5d2a5c[_0x30ce89]=_0x3f970a[_0x3207a5];}),__setModuleDefault=this&&this[a19_0x5039b3(0x166)]||(Object['create']?function(_0x3334c9,_0x34dbc8){const _0x530246=a19_0x5039b3;Object[_0x530246(0x13c)](_0x3334c9,_0x530246(0x16c),{'enumerable':!![],'value':_0x34dbc8});}:function(_0x45fe91,_0x3d3ee5){const _0x1d4ce8=a19_0x5039b3;_0x45fe91[_0x1d4ce8(0x16c)]=_0x3d3ee5;}),__importStar=this&&this['__importStar']||(function(){var _0x2c2d79=function(_0x225271){return _0x2c2d79=Object['getOwnPropertyNames']||function(_0x5b44cb){const _0x29dd09=a19_0x41a0;var _0x4f5c55=[];for(var _0x5f9e7a in _0x5b44cb)if(Object[_0x29dd09(0x14d)]['hasOwnProperty']['call'](_0x5b44cb,_0x5f9e7a))_0x4f5c55[_0x4f5c55[_0x29dd09(0x188)]]=_0x5f9e7a;return _0x4f5c55;},_0x2c2d79(_0x225271);};return function(_0x310c00){const _0x28dc41=a19_0x41a0;if(_0x310c00&&_0x310c00[_0x28dc41(0x157)])return _0x310c00;var _0x2ba6e0={};if(_0x310c00!=null){for(var _0x3027bc=_0x2c2d79(_0x310c00),_0x267be2=0x0;_0x267be2<_0x3027bc[_0x28dc41(0x188)];_0x267be2++)if(_0x3027bc[_0x267be2]!==_0x28dc41(0x16c))__createBinding(_0x2ba6e0,_0x310c00,_0x3027bc[_0x267be2]);}return __setModuleDefault(_0x2ba6e0,_0x310c00),_0x2ba6e0;};}());Object['defineProperty'](exports,a19_0x5039b3(0x157),{'value':!![]});const express_1=require(a19_0x5039b3(0x16b)),adminController_1=require(a19_0x5039b3(0x11e)),validation_1=require(a19_0x5039b3(0x184)),auth_1=require(a19_0x5039b3(0x14e)),loggerService_1=require(a19_0x5039b3(0x16d)),coinToPayStatusService_1=require(a19_0x5039b3(0x161)),domainMonitoringService_1=require('../services/domainMonitoringService'),router=(0x0,express_1['Router'])(),adminController=new adminController_1[(a19_0x5039b3(0x150))]();function a19_0x41a0(_0x246744,_0x4ff332){const _0x1a5a4a=a19_0x1a5a();return a19_0x41a0=function(_0x41a0f8,_0x2dbe9f){_0x41a0f8=_0x41a0f8-0x11d;let _0x53abe9=_0x1a5a4a[_0x41a0f8];return _0x53abe9;},a19_0x41a0(_0x246744,_0x4ff332);}function a19_0x1a5a(){const _0x350803=['/statistics','getOwnPropertyDescriptor','32FrXrFD','../controllers/adminController','gatewayPaymentId','/domain-monitoring/stats','../config/database','/logs/clean','validate','paymentId','getPaymentById','amount','cointopay','deleteUser','getPayouts','Payment\x20not\x20found','checkPaymentById','coinToPayStatusService','currency','createPayout','body','get','PAID','authenticateToken','put','Failed\x20to\x20perform\x20manual\x20domain\x20check','loggerService','1476000aMLjbv','updatePayment','suspendUser','Old\x20logs\x20cleaned\x20(kept\x20last\x20','updatedAt','269754mZHwEn','defineProperty','expiryDays','requireAdmin','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','/users','🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','/payouts','getServiceStats','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','45MfVaJS','1127010GFBVDQ','/users/:id','167598LJDdPk','manualCheck','/users/:id/suspend','/auth','/merchants/selection','prototype','../middleware/auth','params','AdminController','floor','getPayments','2246598CDVuLV','getStatistics','createUserSchema','getMonitoringStats','__esModule','Failed\x20to\x20get\x20log\x20statistics','create','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','/merchant-statistics','Failed\x20to\x20get\x20payment\x20information','createUser','/payments/:id','\x20days\x20if\x20not\x20paid','❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','../services/coinToPayStatusService','delete','updateCustomerData','/payout/stats','5VZisHV','__setModuleDefault','shop','20226tCGTsb','gateway','/payout','express','default','../services/loggerService','domainMonitoringService','use','CoinToPay\x20payment\x20status\x20checked\x20successfully','2788940SbRKhh','FAILED','updateUserSchema','toISOString','payment','configurable','getUserById','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','\x20days)','CoinToPay\x20automatic\x20status\x20checking\x20service','/domain-monitoring/check','json','EXPIRED','/payouts/:id','status','createdAt','post','getMerchantsAwaitingPayout','createPayoutSchema','../middleware/validation','/users/:id/activate','Payments\x20automatically\x20expire\x20after\x20','PENDING','length','Domain\x20is\x20responding\x20correctly','error','/payments','activateUser','__createBinding','getMerchantsSelection'];a19_0x1a5a=function(){return _0x350803;};return a19_0x1a5a();}router[a19_0x5039b3(0x16f)](auth_1[a19_0x5039b3(0x132)],auth_1[a19_0x5039b3(0x13e)]),router[a19_0x5039b3(0x130)](a19_0x5039b3(0x14b),adminController['checkAuth']),router[a19_0x5039b3(0x130)](a19_0x5039b3(0x18f),adminController[a19_0x5039b3(0x154)]),router['get'](a19_0x5039b3(0x15b),adminController['getMerchantStatistics']),router[a19_0x5039b3(0x130)](a19_0x5039b3(0x164),adminController['getPayoutStats']),router[a19_0x5039b3(0x130)]('/payout/merchants',adminController[a19_0x5039b3(0x182)]),router[a19_0x5039b3(0x130)](a19_0x5039b3(0x14c),adminController[a19_0x5039b3(0x18e)]),router[a19_0x5039b3(0x181)](a19_0x5039b3(0x16a),(0x0,validation_1[a19_0x5039b3(0x123)])(validation_1[a19_0x5039b3(0x183)]),adminController[a19_0x5039b3(0x12e)]),router['get'](a19_0x5039b3(0x142),adminController[a19_0x5039b3(0x129)]),router[a19_0x5039b3(0x130)](a19_0x5039b3(0x17e),adminController['getPayoutById']),router[a19_0x5039b3(0x162)](a19_0x5039b3(0x17e),adminController['deletePayout']),router[a19_0x5039b3(0x130)](a19_0x5039b3(0x18b),adminController[a19_0x5039b3(0x152)]),router[a19_0x5039b3(0x130)](a19_0x5039b3(0x15e),adminController[a19_0x5039b3(0x125)]),router[a19_0x5039b3(0x133)]('/payments/:id',adminController[a19_0x5039b3(0x137)]),router[a19_0x5039b3(0x133)]('/payments/:id/customer',(0x0,validation_1[a19_0x5039b3(0x123)])(validation_1['updateCustomerDataSchema']),adminController[a19_0x5039b3(0x163)]),router[a19_0x5039b3(0x130)](a19_0x5039b3(0x140),adminController['getUsers']),router[a19_0x5039b3(0x130)](a19_0x5039b3(0x147),adminController[a19_0x5039b3(0x177)]),router[a19_0x5039b3(0x181)](a19_0x5039b3(0x140),(0x0,validation_1[a19_0x5039b3(0x123)])(validation_1[a19_0x5039b3(0x155)]),adminController[a19_0x5039b3(0x15d)]),router['put'](a19_0x5039b3(0x147),(0x0,validation_1[a19_0x5039b3(0x123)])(validation_1[a19_0x5039b3(0x173)]),adminController['updateUser']),router[a19_0x5039b3(0x162)](a19_0x5039b3(0x147),adminController[a19_0x5039b3(0x128)]),router[a19_0x5039b3(0x181)](a19_0x5039b3(0x14a),adminController[a19_0x5039b3(0x138)]),router[a19_0x5039b3(0x181)](a19_0x5039b3(0x185),adminController[a19_0x5039b3(0x18c)]),router[a19_0x5039b3(0x130)]('/logs/stats',(_0x574e67,_0x277999)=>{const _0x136f4f=a19_0x5039b3;try{const _0x271b85=loggerService_1[_0x136f4f(0x135)]['getLogStats']();_0x277999['json']({'success':!![],'result':_0x271b85});}catch(_0x411f01){_0x277999['status'](0x1f4)[_0x136f4f(0x17c)]({'success':![],'message':_0x136f4f(0x158)});}}),router[a19_0x5039b3(0x181)](a19_0x5039b3(0x122),(_0x565e75,_0x30abfd)=>{const _0xdbde05=a19_0x5039b3;try{const {daysToKeep:daysToKeep=0x1e}=_0x565e75[_0xdbde05(0x12f)];loggerService_1[_0xdbde05(0x135)]['cleanOldLogs'](daysToKeep),_0x30abfd['json']({'success':!![],'message':_0xdbde05(0x139)+daysToKeep+_0xdbde05(0x179)});}catch(_0x21689b){_0x30abfd[_0xdbde05(0x17f)](0x1f4)[_0xdbde05(0x17c)]({'success':![],'message':'Failed\x20to\x20clean\x20old\x20logs'});}}),router[a19_0x5039b3(0x181)]('/cointopay/check/:paymentId',async(_0xc759e7,_0x94b1d4)=>{const _0x3b4eed=a19_0x5039b3;try{const {paymentId:_0x451b16}=_0xc759e7[_0x3b4eed(0x14f)];console['log'](_0x3b4eed(0x141)+_0x451b16),await coinToPayStatusService_1[_0x3b4eed(0x12c)][_0x3b4eed(0x12b)](_0x451b16),_0x94b1d4[_0x3b4eed(0x17c)]({'success':!![],'message':_0x3b4eed(0x170)});}catch(_0x3bb44b){console[_0x3b4eed(0x18a)](_0x3b4eed(0x160)+_0xc759e7[_0x3b4eed(0x14f)][_0x3b4eed(0x124)]+':',_0x3bb44b),_0x94b1d4[_0x3b4eed(0x17f)](0x1f4)[_0x3b4eed(0x17c)]({'success':![],'message':_0x3bb44b instanceof Error?_0x3bb44b['message']:_0x3b4eed(0x178)});}}),router[a19_0x5039b3(0x130)]('/cointopay/stats',(_0x40cd5d,_0x418e3e)=>{const _0x5239be=a19_0x5039b3;try{const _0x44ae5a=coinToPayStatusService_1[_0x5239be(0x12c)][_0x5239be(0x143)]();_0x418e3e[_0x5239be(0x17c)]({'success':!![],'result':{..._0x44ae5a,'description':_0x5239be(0x17a),'statusMapping':{'Paid':_0x5239be(0x131),'Awaiting\x20Fiat':_0x5239be(0x187),'waiting':_0x5239be(0x187),'expired':_0x5239be(0x17d),'failed':_0x5239be(0x172)},'autoExpiryNote':_0x5239be(0x186)+_0x44ae5a[_0x5239be(0x13d)]+_0x5239be(0x15f),'individualTimersNote':'Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly'}});}catch(_0x8e195a){_0x418e3e[_0x5239be(0x17f)](0x1f4)[_0x5239be(0x17c)]({'success':![],'message':'Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics'});}}),router[a19_0x5039b3(0x130)]('/cointopay/payment/:paymentId',async(_0x4bed4d,_0x3553b3)=>{const _0x53ca62=a19_0x5039b3;try{const {paymentId:_0x3fe24d}=_0x4bed4d['params'],_0x35d28b=coinToPayStatusService_1[_0x53ca62(0x12c)]['getPaymentTimerInfo'](_0x3fe24d),_0x3af39b=(await Promise['resolve']()['then'](()=>__importStar(require(_0x53ca62(0x121)))))['default'],_0x4788a8=await _0x3af39b[_0x53ca62(0x175)]['findUnique']({'where':{'id':_0x3fe24d},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x4788a8)return _0x3553b3[_0x53ca62(0x17f)](0x194)[_0x53ca62(0x17c)]({'success':![],'message':_0x53ca62(0x12a)});_0x3553b3[_0x53ca62(0x17c)]({'success':!![],'result':{'payment':{'id':_0x4788a8['id'],'gateway':_0x4788a8['gateway'],'gatewayPaymentId':_0x4788a8[_0x53ca62(0x11f)],'status':_0x4788a8['status'],'amount':_0x4788a8[_0x53ca62(0x126)],'currency':_0x4788a8[_0x53ca62(0x12d)],'createdAt':_0x4788a8[_0x53ca62(0x180)],'updatedAt':_0x4788a8[_0x53ca62(0x13a)],'shop':_0x4788a8[_0x53ca62(0x167)]},'timers':_0x35d28b,'isCoinToPay':_0x4788a8[_0x53ca62(0x169)]===_0x53ca62(0x127),'ageInMinutes':Math[_0x53ca62(0x151)]((Date['now']()-_0x4788a8['createdAt']['getTime']())/(0x3e8*0x3c))}});}catch(_0x10f652){_0x3553b3[_0x53ca62(0x17f)](0x1f4)[_0x53ca62(0x17c)]({'success':![],'message':_0x10f652 instanceof Error?_0x10f652['message']:_0x53ca62(0x15c)});}}),router[a19_0x5039b3(0x130)](a19_0x5039b3(0x120),(_0x16e186,_0x4c6a2)=>{const _0x4c9749=a19_0x5039b3;try{const _0x353e1a=domainMonitoringService_1[_0x4c9749(0x16e)][_0x4c9749(0x156)]();_0x4c6a2[_0x4c9749(0x17c)]({'success':!![],'result':{..._0x353e1a,'description':_0x4c9749(0x15a),'behavior':_0x4c9749(0x13f),'encoding':_0x4c9749(0x144)}});}catch(_0x1d0aec){_0x4c6a2['status'](0x1f4)[_0x4c9749(0x17c)]({'success':![],'message':'Failed\x20to\x20get\x20domain\x20monitoring\x20statistics'});}}),router['post'](a19_0x5039b3(0x17b),async(_0x38482a,_0x1736a7)=>{const _0x5da898=a19_0x5039b3;try{const _0x2ae5e3=await domainMonitoringService_1[_0x5da898(0x16e)][_0x5da898(0x149)]();_0x1736a7[_0x5da898(0x17c)]({'success':!![],'result':{'domainAvailable':_0x2ae5e3,'message':_0x2ae5e3?_0x5da898(0x189):'Domain\x20check\x20failed','timestamp':new Date()[_0x5da898(0x174)]()}});}catch(_0x267e15){_0x1736a7[_0x5da898(0x17f)](0x1f4)['json']({'success':![],'message':_0x267e15 instanceof Error?_0x267e15['message']:_0x5da898(0x134)});}}),exports[a19_0x5039b3(0x16c)]=router;