'use strict';const a19_0xc25a63=a19_0x3087;(function(_0x1960e1,_0x20e824){const _0x285c74=a19_0x3087,_0x272786=_0x1960e1();while(!![]){try{const _0x5c4eb0=-parseInt(_0x285c74(0x243))/0x1+parseInt(_0x285c74(0x20f))/0x2+parseInt(_0x285c74(0x1dd))/0x3+parseInt(_0x285c74(0x23f))/0x4+parseInt(_0x285c74(0x1e2))/0x5*(-parseInt(_0x285c74(0x1f1))/0x6)+parseInt(_0x285c74(0x21c))/0x7+parseInt(_0x285c74(0x22f))/0x8*(-parseInt(_0x285c74(0x1da))/0x9);if(_0x5c4eb0===_0x20e824)break;else _0x272786['push'](_0x272786['shift']());}catch(_0x24f62c){_0x272786['push'](_0x272786['shift']());}}}(a19_0x4ee2,0x97ebc));var __createBinding=this&&this['__createBinding']||(Object['create']?function(_0x5d4c19,_0x5e47fd,_0x2e7a76,_0x5ccee3){const _0xcc8c60=a19_0x3087;if(_0x5ccee3===undefined)_0x5ccee3=_0x2e7a76;var _0x2dda46=Object[_0xcc8c60(0x21b)](_0x5e47fd,_0x2e7a76);(!_0x2dda46||(_0xcc8c60(0x22e)in _0x2dda46?!_0x5e47fd['__esModule']:_0x2dda46[_0xcc8c60(0x234)]||_0x2dda46[_0xcc8c60(0x21a)]))&&(_0x2dda46={'enumerable':!![],'get':function(){return _0x5e47fd[_0x2e7a76];}}),Object['defineProperty'](_0x5d4c19,_0x5ccee3,_0x2dda46);}:function(_0x1e00cf,_0xf79a99,_0x5d3eeb,_0x4f429c){if(_0x4f429c===undefined)_0x4f429c=_0x5d3eeb;_0x1e00cf[_0x4f429c]=_0xf79a99[_0x5d3eeb];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a19_0xc25a63(0x1e1)]?function(_0x364433,_0x3e8f7d){const _0x56c6c6=a19_0xc25a63;Object[_0x56c6c6(0x1d6)](_0x364433,_0x56c6c6(0x23a),{'enumerable':!![],'value':_0x3e8f7d});}:function(_0x150869,_0x45388f){const _0x37189e=a19_0xc25a63;_0x150869[_0x37189e(0x23a)]=_0x45388f;}),__importStar=this&&this[a19_0xc25a63(0x23c)]||(function(){var _0xcc093d=function(_0x2136ad){const _0x163c1c=a19_0x3087;return _0xcc093d=Object[_0x163c1c(0x235)]||function(_0x5c18a5){const _0x3730b7=_0x163c1c;var _0x3dd56e=[];for(var _0x71097b in _0x5c18a5)if(Object['prototype'][_0x3730b7(0x224)]['call'](_0x5c18a5,_0x71097b))_0x3dd56e[_0x3dd56e[_0x3730b7(0x207)]]=_0x71097b;return _0x3dd56e;},_0xcc093d(_0x2136ad);};return function(_0x4ed4ec){const _0xd4def=a19_0x3087;if(_0x4ed4ec&&_0x4ed4ec['__esModule'])return _0x4ed4ec;var _0x357dfd={};if(_0x4ed4ec!=null){for(var _0x1bf6b5=_0xcc093d(_0x4ed4ec),_0x393c30=0x0;_0x393c30<_0x1bf6b5[_0xd4def(0x207)];_0x393c30++)if(_0x1bf6b5[_0x393c30]!=='default')__createBinding(_0x357dfd,_0x4ed4ec,_0x1bf6b5[_0x393c30]);}return __setModuleDefault(_0x357dfd,_0x4ed4ec),_0x357dfd;};}());Object[a19_0xc25a63(0x1d6)](exports,a19_0xc25a63(0x237),{'value':!![]});const express_1=require(a19_0xc25a63(0x1ec)),adminController_1=require('../controllers/adminController'),validation_1=require(a19_0xc25a63(0x223)),auth_1=require(a19_0xc25a63(0x24c)),loggerService_1=require(a19_0xc25a63(0x20c)),coinToPayStatusService_1=require(a19_0xc25a63(0x22b)),domainMonitoringService_1=require(a19_0xc25a63(0x200)),router=(0x0,express_1[a19_0xc25a63(0x213)])(),adminController=new adminController_1[(a19_0xc25a63(0x1d8))]();function a19_0x3087(_0x5dc5f9,_0xd6ef59){const _0x4ee2a1=a19_0x4ee2();return a19_0x3087=function(_0x308712,_0x125065){_0x308712=_0x308712-0x1d2;let _0x30861b=_0x4ee2a1[_0x308712];return _0x30861b;},a19_0x3087(_0x5dc5f9,_0xd6ef59);}router['use'](auth_1[a19_0xc25a63(0x20b)],auth_1[a19_0xc25a63(0x228)]),router[a19_0xc25a63(0x22e)](a19_0xc25a63(0x241),adminController[a19_0xc25a63(0x1fa)]),router['get'](a19_0xc25a63(0x221),adminController[a19_0xc25a63(0x1e7)]),router[a19_0xc25a63(0x22e)](a19_0xc25a63(0x20a),adminController['getMerchantStatistics']),router[a19_0xc25a63(0x22e)](a19_0xc25a63(0x21d),adminController[a19_0xc25a63(0x1fd)]),router[a19_0xc25a63(0x22e)](a19_0xc25a63(0x1ea),adminController[a19_0xc25a63(0x23e)]),router[a19_0xc25a63(0x22e)](a19_0xc25a63(0x1d7),adminController[a19_0xc25a63(0x217)]),router[a19_0xc25a63(0x1f2)](a19_0xc25a63(0x1e9),(0x0,validation_1[a19_0xc25a63(0x226)])(validation_1[a19_0xc25a63(0x20d)]),adminController[a19_0xc25a63(0x203)]),router[a19_0xc25a63(0x22e)](a19_0xc25a63(0x232),adminController[a19_0xc25a63(0x1f9)]),router[a19_0xc25a63(0x22e)](a19_0xc25a63(0x219),adminController[a19_0xc25a63(0x247)]),router[a19_0xc25a63(0x22a)](a19_0xc25a63(0x219),adminController['deletePayout']),router[a19_0xc25a63(0x22e)]('/payments',adminController[a19_0xc25a63(0x239)]),router[a19_0xc25a63(0x22e)](a19_0xc25a63(0x1fc),adminController[a19_0xc25a63(0x227)]),router['put'](a19_0xc25a63(0x1fc),adminController['updatePayment']),router[a19_0xc25a63(0x238)](a19_0xc25a63(0x1db),(0x0,validation_1[a19_0xc25a63(0x226)])(validation_1[a19_0xc25a63(0x24b)]),adminController['updateCustomerData']),router['get'](a19_0xc25a63(0x1e3),adminController[a19_0xc25a63(0x1f5)]),router[a19_0xc25a63(0x22e)](a19_0xc25a63(0x218),adminController['getUserById']),router['post'](a19_0xc25a63(0x1e3),(0x0,validation_1['validate'])(validation_1['createUserSchema']),adminController[a19_0xc25a63(0x209)]),router['put'](a19_0xc25a63(0x218),(0x0,validation_1[a19_0xc25a63(0x226)])(validation_1[a19_0xc25a63(0x231)]),adminController[a19_0xc25a63(0x24e)]),router['delete']('/users/:id',adminController[a19_0xc25a63(0x244)]),router['post'](a19_0xc25a63(0x222),adminController['suspendUser']),router[a19_0xc25a63(0x1f2)](a19_0xc25a63(0x216),adminController[a19_0xc25a63(0x208)]),router[a19_0xc25a63(0x22e)](a19_0xc25a63(0x1e4),(_0x333599,_0x17250b)=>{const _0x30f30b=a19_0xc25a63;try{const _0x50023c=loggerService_1[_0x30f30b(0x1e5)][_0x30f30b(0x21f)]();_0x17250b[_0x30f30b(0x21e)]({'success':!![],'result':_0x50023c});}catch(_0x1005b8){_0x17250b[_0x30f30b(0x1ff)](0x1f4)[_0x30f30b(0x21e)]({'success':![],'message':_0x30f30b(0x242)});}}),router[a19_0xc25a63(0x1f2)](a19_0xc25a63(0x202),(_0x345e55,_0xa9a05a)=>{const _0x126e92=a19_0xc25a63;try{const {daysToKeep:daysToKeep=0x1e}=_0x345e55['body'];loggerService_1[_0x126e92(0x1e5)][_0x126e92(0x210)](daysToKeep),_0xa9a05a[_0x126e92(0x21e)]({'success':!![],'message':_0x126e92(0x240)+daysToKeep+_0x126e92(0x1e0)});}catch(_0x2f2aa3){_0xa9a05a[_0x126e92(0x1ff)](0x1f4)[_0x126e92(0x21e)]({'success':![],'message':'Failed\x20to\x20clean\x20old\x20logs'});}}),router[a19_0xc25a63(0x1f2)](a19_0xc25a63(0x1fe),async(_0x54f875,_0x39e402)=>{const _0x2e8759=a19_0xc25a63;try{const {paymentId:_0x47ecdf}=_0x54f875[_0x2e8759(0x1eb)];console[_0x2e8759(0x1ee)]('🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20'+_0x47ecdf),await coinToPayStatusService_1['coinToPayStatusService'][_0x2e8759(0x1e6)](_0x47ecdf),_0x39e402[_0x2e8759(0x21e)]({'success':!![],'message':_0x2e8759(0x220)});}catch(_0x18bf9d){console[_0x2e8759(0x22d)](_0x2e8759(0x22c)+_0x54f875[_0x2e8759(0x1eb)][_0x2e8759(0x249)]+':',_0x18bf9d),_0x39e402[_0x2e8759(0x1ff)](0x1f4)[_0x2e8759(0x21e)]({'success':![],'message':_0x18bf9d instanceof Error?_0x18bf9d[_0x2e8759(0x1f7)]:_0x2e8759(0x1f8)});}}),router[a19_0xc25a63(0x22e)](a19_0xc25a63(0x1f4),(_0x1db7b9,_0x3025c3)=>{const _0x5dc349=a19_0xc25a63;try{const _0x14c884=coinToPayStatusService_1['coinToPayStatusService'][_0x5dc349(0x1fb)]();_0x3025c3[_0x5dc349(0x21e)]({'success':!![],'result':{..._0x14c884,'description':'CoinToPay\x20automatic\x20status\x20checking\x20service','statusMapping':{'Paid':_0x5dc349(0x246),'Awaiting\x20Fiat':'PENDING','waiting':_0x5dc349(0x1f6),'expired':'EXPIRED','failed':'FAILED'},'autoExpiryNote':_0x5dc349(0x245)+_0x14c884[_0x5dc349(0x214)]+_0x5dc349(0x24d),'individualTimersNote':'Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly'}});}catch(_0x53ed51){_0x3025c3['status'](0x1f4)[_0x5dc349(0x21e)]({'success':![],'message':_0x5dc349(0x215)});}}),router['get'](a19_0xc25a63(0x204),async(_0x2d6480,_0x21faa6)=>{const _0x35d0c0=a19_0xc25a63;try{const {paymentId:_0x65dd2a}=_0x2d6480[_0x35d0c0(0x1eb)],_0x5f8f5a=coinToPayStatusService_1[_0x35d0c0(0x206)][_0x35d0c0(0x1df)](_0x65dd2a),_0x24ef22=(await Promise[_0x35d0c0(0x1d3)]()['then'](()=>__importStar(require(_0x35d0c0(0x248)))))[_0x35d0c0(0x23a)],_0x808b87=await _0x24ef22[_0x35d0c0(0x1f3)]['findUnique']({'where':{'id':_0x65dd2a},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x808b87)return _0x21faa6[_0x35d0c0(0x1ff)](0x194)[_0x35d0c0(0x21e)]({'success':![],'message':_0x35d0c0(0x1dc)});_0x21faa6[_0x35d0c0(0x21e)]({'success':!![],'result':{'payment':{'id':_0x808b87['id'],'gateway':_0x808b87[_0x35d0c0(0x1d4)],'gatewayPaymentId':_0x808b87[_0x35d0c0(0x1d2)],'status':_0x808b87[_0x35d0c0(0x1ff)],'amount':_0x808b87[_0x35d0c0(0x23b)],'currency':_0x808b87[_0x35d0c0(0x205)],'createdAt':_0x808b87[_0x35d0c0(0x211)],'updatedAt':_0x808b87[_0x35d0c0(0x229)],'shop':_0x808b87[_0x35d0c0(0x1d9)]},'timers':_0x5f8f5a,'isCoinToPay':_0x808b87[_0x35d0c0(0x1d4)]===_0x35d0c0(0x1e8),'ageInMinutes':Math[_0x35d0c0(0x236)]((Date[_0x35d0c0(0x23d)]()-_0x808b87[_0x35d0c0(0x211)]['getTime']())/(0x3e8*0x3c))}});}catch(_0x1b727a){_0x21faa6[_0x35d0c0(0x1ff)](0x1f4)['json']({'success':![],'message':_0x1b727a instanceof Error?_0x1b727a[_0x35d0c0(0x1f7)]:'Failed\x20to\x20get\x20payment\x20information'});}}),router[a19_0xc25a63(0x22e)](a19_0xc25a63(0x1ed),(_0x510b61,_0x350ef3)=>{const _0x36db38=a19_0xc25a63;try{const _0x95a7f2=domainMonitoringService_1[_0x36db38(0x1f0)][_0x36db38(0x24a)]();_0x350ef3[_0x36db38(0x21e)]({'success':!![],'result':{..._0x95a7f2,'description':_0x36db38(0x1d5),'behavior':_0x36db38(0x1de),'encoding':_0x36db38(0x233)}});}catch(_0x3a0d6f){_0x350ef3[_0x36db38(0x1ff)](0x1f4)[_0x36db38(0x21e)]({'success':![],'message':_0x36db38(0x20e)});}}),router[a19_0xc25a63(0x1f2)](a19_0xc25a63(0x212),async(_0x2d92a1,_0x2c0c49)=>{const _0x2ab02f=a19_0xc25a63;try{const _0x15c78f=await domainMonitoringService_1[_0x2ab02f(0x1f0)][_0x2ab02f(0x230)]();_0x2c0c49['json']({'success':!![],'result':{'domainAvailable':_0x15c78f,'message':_0x15c78f?_0x2ab02f(0x201):_0x2ab02f(0x225),'timestamp':new Date()['toISOString']()}});}catch(_0x2a7f5f){_0x2c0c49[_0x2ab02f(0x1ff)](0x1f4)['json']({'success':![],'message':_0x2a7f5f instanceof Error?_0x2a7f5f[_0x2ab02f(0x1f7)]:_0x2ab02f(0x1ef)});}}),exports[a19_0xc25a63(0x23a)]=router;function a19_0x4ee2(){const _0x3811f1=['requireAdmin','updatedAt','delete','../services/coinToPayStatusService','❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','error','get','10842376QIVbwA','manualCheck','updateUserSchema','/payouts','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','writable','getOwnPropertyNames','floor','__esModule','put','getPayments','default','amount','__importStar','now','getMerchantsAwaitingPayout','4139512VOBjoh','Old\x20logs\x20cleaned\x20(kept\x20last\x20','/auth','Failed\x20to\x20get\x20log\x20statistics','464437oxRtgb','deleteUser','Payments\x20automatically\x20expire\x20after\x20','PAID','getPayoutById','../config/database','paymentId','getMonitoringStats','updateCustomerDataSchema','../middleware/auth','\x20days\x20if\x20not\x20paid','updateUser','gatewayPaymentId','resolve','gateway','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','defineProperty','/merchants/selection','AdminController','shop','9oWJQqi','/payments/:id/customer','Payment\x20not\x20found','1547673Gtjjrw','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','getPaymentTimerInfo','\x20days)','create','493775xyQsCt','/users','/logs/stats','loggerService','checkPaymentById','getStatistics','cointopay','/payout','/payout/merchants','params','express','/domain-monitoring/stats','log','Failed\x20to\x20perform\x20manual\x20domain\x20check','domainMonitoringService','6SzThTm','post','payment','/cointopay/stats','getUsers','PENDING','message','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','getPayouts','checkAuth','getServiceStats','/payments/:id','getPayoutStats','/cointopay/check/:paymentId','status','../services/domainMonitoringService','Domain\x20is\x20responding\x20correctly','/logs/clean','createPayout','/cointopay/payment/:paymentId','currency','coinToPayStatusService','length','activateUser','createUser','/merchant-statistics','authenticateToken','../services/loggerService','createPayoutSchema','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','1019580TEbqFU','cleanOldLogs','createdAt','/domain-monitoring/check','Router','expiryDays','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','/users/:id/activate','getMerchantsSelection','/users/:id','/payouts/:id','configurable','getOwnPropertyDescriptor','3361386KJHZuX','/payout/stats','json','getLogStats','CoinToPay\x20payment\x20status\x20checked\x20successfully','/statistics','/users/:id/suspend','../middleware/validation','hasOwnProperty','Domain\x20check\x20failed','validate','getPaymentById'];a19_0x4ee2=function(){return _0x3811f1;};return a19_0x4ee2();}