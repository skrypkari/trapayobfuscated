'use strict';const a19_0x2b79ba=a19_0x3db4;(function(_0x1030b3,_0x50b3d6){const _0x31d438=a19_0x3db4,_0x16eada=_0x1030b3();while(!![]){try{const _0x145e48=-parseInt(_0x31d438(0x202))/0x1+-parseInt(_0x31d438(0x1f3))/0x2+parseInt(_0x31d438(0x230))/0x3*(parseInt(_0x31d438(0x20b))/0x4)+parseInt(_0x31d438(0x229))/0x5+parseInt(_0x31d438(0x252))/0x6+parseInt(_0x31d438(0x24e))/0x7+-parseInt(_0x31d438(0x1fd))/0x8;if(_0x145e48===_0x50b3d6)break;else _0x16eada['push'](_0x16eada['shift']());}catch(_0x4038ac){_0x16eada['push'](_0x16eada['shift']());}}}(a19_0x28f5,0x9eedd));function a19_0x3db4(_0x435089,_0x5eb399){const _0x28f56a=a19_0x28f5();return a19_0x3db4=function(_0x3db40e,_0x567378){_0x3db40e=_0x3db40e-0x1e3;let _0x3d4e9b=_0x28f56a[_0x3db40e];return _0x3d4e9b;},a19_0x3db4(_0x435089,_0x5eb399);}var __createBinding=this&&this[a19_0x2b79ba(0x234)]||(Object[a19_0x2b79ba(0x236)]?function(_0x738d39,_0x15bd55,_0x507298,_0x1f19ac){const _0x490a25=a19_0x2b79ba;if(_0x1f19ac===undefined)_0x1f19ac=_0x507298;var _0x282abb=Object[_0x490a25(0x246)](_0x15bd55,_0x507298);(!_0x282abb||(_0x490a25(0x218)in _0x282abb?!_0x15bd55[_0x490a25(0x23a)]:_0x282abb[_0x490a25(0x24c)]||_0x282abb[_0x490a25(0x250)]))&&(_0x282abb={'enumerable':!![],'get':function(){return _0x15bd55[_0x507298];}}),Object['defineProperty'](_0x738d39,_0x1f19ac,_0x282abb);}:function(_0x261d63,_0x5220d0,_0x46cfea,_0x5d7731){if(_0x5d7731===undefined)_0x5d7731=_0x46cfea;_0x261d63[_0x5d7731]=_0x5220d0[_0x46cfea];}),__setModuleDefault=this&&this[a19_0x2b79ba(0x256)]||(Object[a19_0x2b79ba(0x236)]?function(_0x440155,_0x153afa){Object['defineProperty'](_0x440155,'default',{'enumerable':!![],'value':_0x153afa});}:function(_0x11566e,_0x2d80d2){const _0x3ac3e8=a19_0x2b79ba;_0x11566e[_0x3ac3e8(0x231)]=_0x2d80d2;}),__importStar=this&&this['__importStar']||(function(){var _0x2fa0f7=function(_0x26d92a){const _0x53e389=a19_0x3db4;return _0x2fa0f7=Object[_0x53e389(0x21b)]||function(_0x5a4027){const _0x2bdbe6=_0x53e389;var _0x3ebaad=[];for(var _0x365e0b in _0x5a4027)if(Object[_0x2bdbe6(0x247)][_0x2bdbe6(0x255)][_0x2bdbe6(0x22e)](_0x5a4027,_0x365e0b))_0x3ebaad[_0x3ebaad[_0x2bdbe6(0x21d)]]=_0x365e0b;return _0x3ebaad;},_0x2fa0f7(_0x26d92a);};return function(_0x3d446f){const _0x2cc94c=a19_0x3db4;if(_0x3d446f&&_0x3d446f['__esModule'])return _0x3d446f;var _0xc5a964={};if(_0x3d446f!=null){for(var _0x39fbfa=_0x2fa0f7(_0x3d446f),_0x200114=0x0;_0x200114<_0x39fbfa['length'];_0x200114++)if(_0x39fbfa[_0x200114]!==_0x2cc94c(0x231))__createBinding(_0xc5a964,_0x3d446f,_0x39fbfa[_0x200114]);}return __setModuleDefault(_0xc5a964,_0x3d446f),_0xc5a964;};}());Object['defineProperty'](exports,a19_0x2b79ba(0x23a),{'value':!![]});const express_1=require(a19_0x2b79ba(0x228)),adminController_1=require(a19_0x2b79ba(0x20f)),validation_1=require(a19_0x2b79ba(0x1ee)),auth_1=require(a19_0x2b79ba(0x1eb)),loggerService_1=require('../services/loggerService'),coinToPayStatusService_1=require(a19_0x2b79ba(0x253)),domainMonitoringService_1=require('../services/domainMonitoringService'),router=(0x0,express_1[a19_0x2b79ba(0x21e)])(),adminController=new adminController_1['AdminController']();function a19_0x28f5(){const _0x5f48c6=['../controllers/adminController','authenticateToken','Old\x20logs\x20cleaned\x20(kept\x20last\x20','validate','/users/:id','createUser','json','/merchants/selection','CoinToPay\x20payment\x20status\x20checked\x20successfully','get','\x20days)','getLogStats','getOwnPropertyNames','createdAt','length','Router','/users/:id/activate','/domain-monitoring/check','/payout/stats','findUnique','getMonitoringStats','CoinToPay\x20automatic\x20status\x20checking\x20service','Failed\x20to\x20perform\x20manual\x20domain\x20check','createUserSchema','FAILED','express','3666875HtEjgr','Payments\x20automatically\x20expire\x20after\x20','PAID','/payouts/:id','log','call','activateUser','33jqtwdi','default','paymentId','gatewayPaymentId','__createBinding','coinToPayStatusService','create','Domain\x20is\x20responding\x20correctly','getMerchantsSelection','EXPIRED','__esModule','status','/cointopay/check/:paymentId','getUserById','updatedAt','../config/database','gateway','manualCheck','Payment\x20not\x20found','domainMonitoringService','Domain\x20check\x20failed','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','getOwnPropertyDescriptor','prototype','toISOString','updateCustomerData','shop','put','writable','cointopay','7130753udWzVH','/users','configurable','createPayoutSchema','3676176SzEBqC','../services/coinToPayStatusService','getServiceStats','hasOwnProperty','__setModuleDefault','getPayoutStats','/payout/merchants','PENDING','getMerchantsAwaitingPayout','delete','getPayments','deletePayout','/payments/:id/customer','now','getPaymentById','/logs/clean','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','../middleware/auth','checkAuth','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','../middleware/validation','/merchant-statistics','getTime','/auth','params','995648QzlUAX','cleanOldLogs','/domain-monitoring/stats','\x20days\x20if\x20not\x20paid','Failed\x20to\x20get\x20log\x20statistics','getMerchantStatistics','updatePayment','getPayouts','getPaymentTimerInfo','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','8530768PWdRJk','deleteUser','/statistics','message','🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','303398nOIeZP','post','payment','getStatistics','loggerService','Failed\x20to\x20clean\x20old\x20logs','getPayoutById','updateUserSchema','/payments','55924fcybTd','checkPaymentById','/payments/:id','updateCustomerDataSchema'];a19_0x28f5=function(){return _0x5f48c6;};return a19_0x28f5();}router['use'](auth_1[a19_0x2b79ba(0x210)],auth_1['requireAdmin']),router['get'](a19_0x2b79ba(0x1f1),adminController[a19_0x2b79ba(0x1ec)]),router['get'](a19_0x2b79ba(0x1ff),adminController[a19_0x2b79ba(0x205)]),router[a19_0x2b79ba(0x218)](a19_0x2b79ba(0x1ef),adminController[a19_0x2b79ba(0x1f8)]),router[a19_0x2b79ba(0x218)](a19_0x2b79ba(0x221),adminController[a19_0x2b79ba(0x257)]),router[a19_0x2b79ba(0x218)](a19_0x2b79ba(0x258),adminController[a19_0x2b79ba(0x25a)]),router[a19_0x2b79ba(0x218)](a19_0x2b79ba(0x216),adminController[a19_0x2b79ba(0x238)]),router[a19_0x2b79ba(0x203)]('/payout',(0x0,validation_1[a19_0x2b79ba(0x212)])(validation_1[a19_0x2b79ba(0x251)]),adminController['createPayout']),router[a19_0x2b79ba(0x218)]('/payouts',adminController[a19_0x2b79ba(0x1fa)]),router[a19_0x2b79ba(0x218)](a19_0x2b79ba(0x22c),adminController[a19_0x2b79ba(0x208)]),router['delete']('/payouts/:id',adminController[a19_0x2b79ba(0x1e5)]),router[a19_0x2b79ba(0x218)](a19_0x2b79ba(0x20a),adminController[a19_0x2b79ba(0x1e4)]),router[a19_0x2b79ba(0x218)]('/payments/:id',adminController[a19_0x2b79ba(0x1e8)]),router[a19_0x2b79ba(0x24b)](a19_0x2b79ba(0x20d),adminController[a19_0x2b79ba(0x1f9)]),router[a19_0x2b79ba(0x24b)](a19_0x2b79ba(0x1e6),(0x0,validation_1['validate'])(validation_1[a19_0x2b79ba(0x20e)]),adminController[a19_0x2b79ba(0x249)]),router['get'](a19_0x2b79ba(0x24f),adminController['getUsers']),router[a19_0x2b79ba(0x218)](a19_0x2b79ba(0x213),adminController[a19_0x2b79ba(0x23d)]),router[a19_0x2b79ba(0x203)](a19_0x2b79ba(0x24f),(0x0,validation_1[a19_0x2b79ba(0x212)])(validation_1[a19_0x2b79ba(0x226)]),adminController[a19_0x2b79ba(0x214)]),router['put'](a19_0x2b79ba(0x213),(0x0,validation_1[a19_0x2b79ba(0x212)])(validation_1[a19_0x2b79ba(0x209)]),adminController['updateUser']),router[a19_0x2b79ba(0x1e3)]('/users/:id',adminController[a19_0x2b79ba(0x1fe)]),router[a19_0x2b79ba(0x203)]('/users/:id/suspend',adminController['suspendUser']),router['post'](a19_0x2b79ba(0x21f),adminController[a19_0x2b79ba(0x22f)]),router['get']('/logs/stats',(_0x2a32f8,_0x299f48)=>{const _0x177681=a19_0x2b79ba;try{const _0x5c03c3=loggerService_1[_0x177681(0x206)][_0x177681(0x21a)]();_0x299f48[_0x177681(0x215)]({'success':!![],'result':_0x5c03c3});}catch(_0x381a6b){_0x299f48[_0x177681(0x23b)](0x1f4)[_0x177681(0x215)]({'success':![],'message':_0x177681(0x1f7)});}}),router[a19_0x2b79ba(0x203)](a19_0x2b79ba(0x1e9),(_0x2e826d,_0x1ef3d2)=>{const _0x4969b2=a19_0x2b79ba;try{const {daysToKeep:daysToKeep=0x1e}=_0x2e826d['body'];loggerService_1[_0x4969b2(0x206)][_0x4969b2(0x1f4)](daysToKeep),_0x1ef3d2[_0x4969b2(0x215)]({'success':!![],'message':_0x4969b2(0x211)+daysToKeep+_0x4969b2(0x219)});}catch(_0x51d693){_0x1ef3d2[_0x4969b2(0x23b)](0x1f4)[_0x4969b2(0x215)]({'success':![],'message':_0x4969b2(0x207)});}}),router[a19_0x2b79ba(0x203)](a19_0x2b79ba(0x23c),async(_0x2c5d3c,_0x19b4b1)=>{const _0x32dbb1=a19_0x2b79ba;try{const {paymentId:_0x2227e0}=_0x2c5d3c['params'];console[_0x32dbb1(0x22d)](_0x32dbb1(0x201)+_0x2227e0),await coinToPayStatusService_1[_0x32dbb1(0x235)][_0x32dbb1(0x20c)](_0x2227e0),_0x19b4b1[_0x32dbb1(0x215)]({'success':!![],'message':_0x32dbb1(0x217)});}catch(_0x34b6c7){console['error']('❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20'+_0x2c5d3c[_0x32dbb1(0x1f2)][_0x32dbb1(0x232)]+':',_0x34b6c7),_0x19b4b1[_0x32dbb1(0x23b)](0x1f4)[_0x32dbb1(0x215)]({'success':![],'message':_0x34b6c7 instanceof Error?_0x34b6c7[_0x32dbb1(0x200)]:'Failed\x20to\x20check\x20CoinToPay\x20payment\x20status'});}}),router['get']('/cointopay/stats',(_0x515a97,_0x48f599)=>{const _0x52ac17=a19_0x2b79ba;try{const _0x383b78=coinToPayStatusService_1[_0x52ac17(0x235)][_0x52ac17(0x254)]();_0x48f599['json']({'success':!![],'result':{..._0x383b78,'description':_0x52ac17(0x224),'statusMapping':{'Paid':_0x52ac17(0x22b),'Awaiting\x20Fiat':'PENDING','waiting':_0x52ac17(0x259),'expired':_0x52ac17(0x239),'failed':_0x52ac17(0x227)},'autoExpiryNote':_0x52ac17(0x22a)+_0x383b78['expiryDays']+_0x52ac17(0x1f6),'individualTimersNote':'Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly'}});}catch(_0x3e7fc1){_0x48f599['status'](0x1f4)[_0x52ac17(0x215)]({'success':![],'message':'Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics'});}}),router['get']('/cointopay/payment/:paymentId',async(_0x3e7445,_0x2ede5b)=>{const _0x89c231=a19_0x2b79ba;try{const {paymentId:_0x4d1d80}=_0x3e7445[_0x89c231(0x1f2)],_0x47a2c5=coinToPayStatusService_1[_0x89c231(0x235)][_0x89c231(0x1fb)](_0x4d1d80),_0x17ff71=(await Promise['resolve']()['then'](()=>__importStar(require(_0x89c231(0x23f)))))[_0x89c231(0x231)],_0x460301=await _0x17ff71[_0x89c231(0x204)][_0x89c231(0x222)]({'where':{'id':_0x4d1d80},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x460301)return _0x2ede5b[_0x89c231(0x23b)](0x194)['json']({'success':![],'message':_0x89c231(0x242)});_0x2ede5b[_0x89c231(0x215)]({'success':!![],'result':{'payment':{'id':_0x460301['id'],'gateway':_0x460301['gateway'],'gatewayPaymentId':_0x460301[_0x89c231(0x233)],'status':_0x460301[_0x89c231(0x23b)],'amount':_0x460301['amount'],'currency':_0x460301['currency'],'createdAt':_0x460301[_0x89c231(0x21c)],'updatedAt':_0x460301[_0x89c231(0x23e)],'shop':_0x460301[_0x89c231(0x24a)]},'timers':_0x47a2c5,'isCoinToPay':_0x460301[_0x89c231(0x240)]===_0x89c231(0x24d),'ageInMinutes':Math['floor']((Date[_0x89c231(0x1e7)]()-_0x460301[_0x89c231(0x21c)][_0x89c231(0x1f0)]())/(0x3e8*0x3c))}});}catch(_0x6216fb){_0x2ede5b['status'](0x1f4)[_0x89c231(0x215)]({'success':![],'message':_0x6216fb instanceof Error?_0x6216fb['message']:'Failed\x20to\x20get\x20payment\x20information'});}}),router[a19_0x2b79ba(0x218)](a19_0x2b79ba(0x1f5),(_0x474294,_0x4f236d)=>{const _0x430be9=a19_0x2b79ba;try{const _0x1ca953=domainMonitoringService_1[_0x430be9(0x243)][_0x430be9(0x223)]();_0x4f236d[_0x430be9(0x215)]({'success':!![],'result':{..._0x1ca953,'description':_0x430be9(0x245),'behavior':_0x430be9(0x1ed),'encoding':_0x430be9(0x1fc)}});}catch(_0x49f746){_0x4f236d[_0x430be9(0x23b)](0x1f4)[_0x430be9(0x215)]({'success':![],'message':_0x430be9(0x1ea)});}}),router[a19_0x2b79ba(0x203)](a19_0x2b79ba(0x220),async(_0x2fd61e,_0x47c276)=>{const _0x355b61=a19_0x2b79ba;try{const _0x544d1d=await domainMonitoringService_1['domainMonitoringService'][_0x355b61(0x241)]();_0x47c276[_0x355b61(0x215)]({'success':!![],'result':{'domainAvailable':_0x544d1d,'message':_0x544d1d?_0x355b61(0x237):_0x355b61(0x244),'timestamp':new Date()[_0x355b61(0x248)]()}});}catch(_0x4d367e){_0x47c276[_0x355b61(0x23b)](0x1f4)[_0x355b61(0x215)]({'success':![],'message':_0x4d367e instanceof Error?_0x4d367e[_0x355b61(0x200)]:_0x355b61(0x225)});}}),exports[a19_0x2b79ba(0x231)]=router;