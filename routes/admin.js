'use strict';const a25_0x4cf7f6=a25_0x12dc;(function(_0x128c8b,_0x18fd3b){const _0x171f64=a25_0x12dc,_0x1f6b65=_0x128c8b();while(!![]){try{const _0x51fc67=parseInt(_0x171f64(0xf0))/0x1+parseInt(_0x171f64(0x12f))/0x2*(parseInt(_0x171f64(0x114))/0x3)+-parseInt(_0x171f64(0xda))/0x4+-parseInt(_0x171f64(0xdf))/0x5+parseInt(_0x171f64(0x137))/0x6*(-parseInt(_0x171f64(0x142))/0x7)+-parseInt(_0x171f64(0xf7))/0x8*(-parseInt(_0x171f64(0x109))/0x9)+parseInt(_0x171f64(0xd3))/0xa;if(_0x51fc67===_0x18fd3b)break;else _0x1f6b65['push'](_0x1f6b65['shift']());}catch(_0x3ef7d9){_0x1f6b65['push'](_0x1f6b65['shift']());}}}(a25_0x5c90,0xb1c60));function a25_0x12dc(_0x265303,_0xfa511b){_0x265303=_0x265303-0xab;const _0x5c9020=a25_0x5c90();let _0x12dc6d=_0x5c9020[_0x265303];return _0x12dc6d;}var __createBinding=this&&this[a25_0x4cf7f6(0xc4)]||(Object[a25_0x4cf7f6(0xd9)]?function(_0x313b0b,_0x2f1267,_0x44df83,_0x7ac82e){const _0x380109=a25_0x4cf7f6;if(_0x7ac82e===undefined)_0x7ac82e=_0x44df83;var _0x5ccb10=Object[_0x380109(0xbb)](_0x2f1267,_0x44df83);(!_0x5ccb10||(_0x380109(0x141)in _0x5ccb10?!_0x2f1267[_0x380109(0xb6)]:_0x5ccb10[_0x380109(0x10a)]||_0x5ccb10['configurable']))&&(_0x5ccb10={'enumerable':!![],'get':function(){return _0x2f1267[_0x44df83];}}),Object[_0x380109(0xca)](_0x313b0b,_0x7ac82e,_0x5ccb10);}:function(_0x29b264,_0x5709bf,_0x3d9d28,_0x5e2f20){if(_0x5e2f20===undefined)_0x5e2f20=_0x3d9d28;_0x29b264[_0x5e2f20]=_0x5709bf[_0x3d9d28];}),__setModuleDefault=this&&this[a25_0x4cf7f6(0x122)]||(Object[a25_0x4cf7f6(0xd9)]?function(_0xae33b4,_0x4e79fd){Object['defineProperty'](_0xae33b4,'default',{'enumerable':!![],'value':_0x4e79fd});}:function(_0xee0db5,_0x1171ef){_0xee0db5['default']=_0x1171ef;}),__importStar=this&&this[a25_0x4cf7f6(0x129)]||(function(){var _0x3386ca=function(_0x131d8d){const _0x2b7398=a25_0x12dc;return _0x3386ca=Object[_0x2b7398(0x139)]||function(_0x1e9b28){const _0x2a7fdb=_0x2b7398;var _0x21446b=[];for(var _0xa87d55 in _0x1e9b28)if(Object[_0x2a7fdb(0xf2)][_0x2a7fdb(0xad)]['call'](_0x1e9b28,_0xa87d55))_0x21446b[_0x21446b[_0x2a7fdb(0x110)]]=_0xa87d55;return _0x21446b;},_0x3386ca(_0x131d8d);};return function(_0x10759c){const _0x24b2cd=a25_0x12dc;if(_0x10759c&&_0x10759c[_0x24b2cd(0xb6)])return _0x10759c;var _0x2da6ba={};if(_0x10759c!=null){for(var _0x2d5249=_0x3386ca(_0x10759c),_0x4c411b=0x0;_0x4c411b<_0x2d5249['length'];_0x4c411b++)if(_0x2d5249[_0x4c411b]!==_0x24b2cd(0x112))__createBinding(_0x2da6ba,_0x10759c,_0x2d5249[_0x4c411b]);}return __setModuleDefault(_0x2da6ba,_0x10759c),_0x2da6ba;};}());Object[a25_0x4cf7f6(0xca)](exports,a25_0x4cf7f6(0xb6),{'value':!![]});function a25_0x5c90(){const _0x285db2=['/merchant-statistics','../middleware/auth','deletePayout','createdAt','getMerchantsAwaitingPayout','cleanupStalePayments','now','log','disable2FA','params','/payouts','expiryDays','9758538IhTomy','writable','post','Failed\x20to\x20perform\x20manual\x20domain\x20check','getPaymentTimerInfo','getMonitoringStats','/payout/:id','length','/users/:id/activate','default','Payment\x20not\x20found','62313nTzyAi','gateway','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','json','getUsers','put','coinToPayStatusService','body','/2fa/disable','/logs/stats','getMerchantsSelection','message','../services/loggerService','__setModuleDefault','/cointopay/check/:paymentId','/payouts/:id','âŒ\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','/shops/:shopId/2fa/setup','PENDING','getPayments','__importStar','/users/:id','CoinToPay\x20automatic\x20status\x20checking\x20service','cleanupStalePendingPayments','Old\x20logs\x20cleaned\x20(kept\x20last\x20','/merchants/selection','26qNCiNO','error','createPayoutSchema','getShopWallets','expirePaymentLinks','/logs/clean','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','getServiceStats','7071846tKTwjf','/payments/:id/customer','getOwnPropertyNames','/password','/payout/stats','/users','createUser','enable2FA','PAID','/payments/cleanup-pending','get','7uqRdBw','delete','amount','FAILED','hasOwnProperty','createPayout','loggerService','activateUser','domainMonitoringService','/shops/:shopId/2fa/disable','../middleware/validation','requireAdmin','gatewayPaymentId','__esModule','ðŸ”\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','status','enableAdmin2FA','updatedAt','getOwnPropertyDescriptor','cleanupStalePaymentsWithReport','Failed\x20to\x20get\x20payment\x20information','../config/database','Failed\x20to\x20get\x20log\x20statistics','/payout','../services/coinToPayStatusService','getProcessingPaymentsStats','Domain\x20check\x20failed','__createBinding','paymentId','/payments','toISOString','/statistics','EXPIRED','defineProperty','getPayouts','validate','/domain-monitoring/check','/cointopay/stats','Payments\x20automatically\x20expire\x20after\x20','updatePayout','authenticateToken','\x20days)','10786760OUDrCR','createUserSchema','cointopay','getUserById','suspendUser','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','create','1722228veaZbi','manualCheck','/payments/:id','/2fa/enable','updateCustomerData','5778300buMBBc','../controllers/adminController','/2fa/settings','AdminController','express','getStatistics','resolve','getTime','/shops/:shopId/2fa/enable','../services/domainMonitoringService','disableAdmin2FA','payment','/payments/processing-stats','updatePayment','getPayoutById','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','Router','1060037ueMjGX','Domain\x20is\x20responding\x20correctly','prototype','floor','/auth','get2FASettings','getLogStats','8zWBfeQ','getPaymentById','/domain-monitoring/stats','/users/:id/suspend','/payments/cleanup','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu'];a25_0x5c90=function(){return _0x285db2;};return a25_0x5c90();}const express_1=require(a25_0x4cf7f6(0xe3)),adminController_1=require(a25_0x4cf7f6(0xe0)),validation_1=require(a25_0x4cf7f6(0xb3)),auth_1=require(a25_0x4cf7f6(0xfe)),loggerService_1=require(a25_0x4cf7f6(0x121)),coinToPayStatusService_1=require(a25_0x4cf7f6(0xc1)),domainMonitoringService_1=require(a25_0x4cf7f6(0xe8)),router=(0x0,express_1[a25_0x4cf7f6(0xef)])(),adminController=new adminController_1[(a25_0x4cf7f6(0xe2))]();router['use'](auth_1[a25_0x4cf7f6(0xd1)],auth_1[a25_0x4cf7f6(0xb4)]),router['get'](a25_0x4cf7f6(0xf4),adminController['checkAuth']),router[a25_0x4cf7f6(0x141)](a25_0x4cf7f6(0xc8),adminController[a25_0x4cf7f6(0xe4)]),router[a25_0x4cf7f6(0x141)](a25_0x4cf7f6(0xfd),adminController['getMerchantStatistics']),router['get'](a25_0x4cf7f6(0x13b),adminController['getPayoutStats']),router[a25_0x4cf7f6(0x141)]('/payout/merchants',adminController[a25_0x4cf7f6(0x101)]),router[a25_0x4cf7f6(0x141)](a25_0x4cf7f6(0x12e),adminController[a25_0x4cf7f6(0x11f)]),router['post'](a25_0x4cf7f6(0xc0),(0x0,validation_1[a25_0x4cf7f6(0xcc)])(validation_1[a25_0x4cf7f6(0x131)]),adminController[a25_0x4cf7f6(0xae)]),router['put'](a25_0x4cf7f6(0x10f),(0x0,validation_1['validate'])(validation_1['updatePayoutSchema']),adminController[a25_0x4cf7f6(0xd0)]),router[a25_0x4cf7f6(0x141)](a25_0x4cf7f6(0x107),adminController[a25_0x4cf7f6(0xcb)]),router[a25_0x4cf7f6(0x141)](a25_0x4cf7f6(0x124),adminController[a25_0x4cf7f6(0xed)]),router[a25_0x4cf7f6(0x143)]('/payouts/:id',adminController[a25_0x4cf7f6(0xff)]),router['get'](a25_0x4cf7f6(0xc6),adminController[a25_0x4cf7f6(0x128)]),router[a25_0x4cf7f6(0x141)](a25_0x4cf7f6(0xdc),adminController[a25_0x4cf7f6(0xf8)]),router['put']('/payments/:id',adminController[a25_0x4cf7f6(0xec)]),router[a25_0x4cf7f6(0x11a)](a25_0x4cf7f6(0x138),(0x0,validation_1[a25_0x4cf7f6(0xcc)])(validation_1['updateCustomerDataSchema']),adminController[a25_0x4cf7f6(0xde)]),router[a25_0x4cf7f6(0x141)](a25_0x4cf7f6(0xeb),adminController[a25_0x4cf7f6(0xc2)]),router['post'](a25_0x4cf7f6(0xfb),adminController[a25_0x4cf7f6(0x102)]),router[a25_0x4cf7f6(0x10b)](a25_0x4cf7f6(0x140),adminController[a25_0x4cf7f6(0x12c)]),router['post']('/payments/cleanup-with-report',adminController[a25_0x4cf7f6(0xbc)]),router[a25_0x4cf7f6(0x10b)]('/payment-links/expire',adminController[a25_0x4cf7f6(0x133)]),router[a25_0x4cf7f6(0x141)](a25_0x4cf7f6(0x13c),adminController[a25_0x4cf7f6(0x119)]),router[a25_0x4cf7f6(0x141)](a25_0x4cf7f6(0x12a),adminController[a25_0x4cf7f6(0xd6)]),router[a25_0x4cf7f6(0x10b)]('/users',(0x0,validation_1['validate'])(validation_1[a25_0x4cf7f6(0xd4)]),adminController[a25_0x4cf7f6(0x13d)]),router[a25_0x4cf7f6(0x11a)](a25_0x4cf7f6(0x12a),(0x0,validation_1['validate'])(validation_1['updateUserSchema']),adminController['updateUser']),router[a25_0x4cf7f6(0x143)](a25_0x4cf7f6(0x12a),adminController['deleteUser']),router[a25_0x4cf7f6(0x141)]('/shops/:shopId/wallets',adminController[a25_0x4cf7f6(0x132)]),router[a25_0x4cf7f6(0x10b)](a25_0x4cf7f6(0x126),adminController['setup2FA']),router[a25_0x4cf7f6(0x10b)](a25_0x4cf7f6(0xe7),adminController[a25_0x4cf7f6(0x13e)]),router['post'](a25_0x4cf7f6(0xb2),adminController[a25_0x4cf7f6(0x105)]),router[a25_0x4cf7f6(0x10b)](a25_0x4cf7f6(0x13a),(0x0,validation_1[a25_0x4cf7f6(0xcc)])(validation_1['changePasswordSchema']),adminController['changeAdminPassword']),router['get'](a25_0x4cf7f6(0xe1),adminController[a25_0x4cf7f6(0xf5)]),router[a25_0x4cf7f6(0x10b)]('/2fa/setup',adminController['setupAdmin2FA']),router[a25_0x4cf7f6(0x10b)](a25_0x4cf7f6(0xdd),adminController[a25_0x4cf7f6(0xb9)]),router[a25_0x4cf7f6(0x10b)](a25_0x4cf7f6(0x11d),adminController[a25_0x4cf7f6(0xe9)]),router[a25_0x4cf7f6(0x10b)](a25_0x4cf7f6(0xfa),adminController[a25_0x4cf7f6(0xd7)]),router[a25_0x4cf7f6(0x10b)](a25_0x4cf7f6(0x111),adminController[a25_0x4cf7f6(0xb0)]),router[a25_0x4cf7f6(0x141)](a25_0x4cf7f6(0x11e),(_0x3883c7,_0x2471d2)=>{const _0x2bca50=a25_0x4cf7f6;try{const _0x59d1f9=loggerService_1['loggerService'][_0x2bca50(0xf6)]();_0x2471d2[_0x2bca50(0x118)]({'success':!![],'result':_0x59d1f9});}catch(_0x40f26c){_0x2471d2[_0x2bca50(0xb8)](0x1f4)['json']({'success':![],'message':_0x2bca50(0xbf)});}}),router[a25_0x4cf7f6(0x10b)](a25_0x4cf7f6(0x134),(_0x20e70a,_0x3e623e)=>{const _0x3e6808=a25_0x4cf7f6;try{const {daysToKeep:daysToKeep=0x1e}=_0x20e70a[_0x3e6808(0x11c)];loggerService_1[_0x3e6808(0xaf)]['cleanOldLogs'](daysToKeep),_0x3e623e['json']({'success':!![],'message':_0x3e6808(0x12d)+daysToKeep+_0x3e6808(0xd2)});}catch(_0x2a16ea){_0x3e623e['status'](0x1f4)[_0x3e6808(0x118)]({'success':![],'message':'Failed\x20to\x20clean\x20old\x20logs'});}}),router[a25_0x4cf7f6(0x10b)](a25_0x4cf7f6(0x123),async(_0x32c19c,_0x35ac19)=>{const _0x1f68c0=a25_0x4cf7f6;try{const {paymentId:_0x1bf59c}=_0x32c19c[_0x1f68c0(0x106)];console[_0x1f68c0(0x104)](_0x1f68c0(0xb7)+_0x1bf59c),await coinToPayStatusService_1[_0x1f68c0(0x11b)]['checkPaymentById'](_0x1bf59c),_0x35ac19[_0x1f68c0(0x118)]({'success':!![],'message':'CoinToPay\x20payment\x20status\x20checked\x20successfully'});}catch(_0x5bb04f){console[_0x1f68c0(0x130)](_0x1f68c0(0x125)+_0x32c19c['params'][_0x1f68c0(0xc5)]+':',_0x5bb04f),_0x35ac19[_0x1f68c0(0xb8)](0x1f4)[_0x1f68c0(0x118)]({'success':![],'message':_0x5bb04f instanceof Error?_0x5bb04f['message']:_0x1f68c0(0xee)});}}),router[a25_0x4cf7f6(0x141)](a25_0x4cf7f6(0xce),(_0x70e11d,_0x4e741d)=>{const _0x6cfbd6=a25_0x4cf7f6;try{const _0x33df1b=coinToPayStatusService_1[_0x6cfbd6(0x11b)][_0x6cfbd6(0x136)]();_0x4e741d[_0x6cfbd6(0x118)]({'success':!![],'result':{..._0x33df1b,'description':_0x6cfbd6(0x12b),'statusMapping':{'Paid':_0x6cfbd6(0x13f),'Awaiting\x20Fiat':_0x6cfbd6(0x127),'waiting':_0x6cfbd6(0x127),'expired':_0x6cfbd6(0xc9),'failed':_0x6cfbd6(0xac)},'autoExpiryNote':_0x6cfbd6(0xcf)+_0x33df1b[_0x6cfbd6(0x108)]+'\x20days\x20if\x20not\x20paid','individualTimersNote':_0x6cfbd6(0x116)}});}catch(_0x462a24){_0x4e741d[_0x6cfbd6(0xb8)](0x1f4)[_0x6cfbd6(0x118)]({'success':![],'message':'Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics'});}}),router[a25_0x4cf7f6(0x141)]('/cointopay/payment/:paymentId',async(_0x158c0e,_0xb82115)=>{const _0x579731=a25_0x4cf7f6;try{const {paymentId:_0x3b3863}=_0x158c0e[_0x579731(0x106)],_0x497c43=coinToPayStatusService_1['coinToPayStatusService'][_0x579731(0x10d)](_0x3b3863),_0x4ad9a3=(await Promise[_0x579731(0xe5)]()['then'](()=>__importStar(require(_0x579731(0xbe)))))[_0x579731(0x112)],_0x45b5c4=await _0x4ad9a3[_0x579731(0xea)]['findUnique']({'where':{'id':_0x3b3863},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x45b5c4)return _0xb82115[_0x579731(0xb8)](0x194)[_0x579731(0x118)]({'success':![],'message':_0x579731(0x113)});_0xb82115[_0x579731(0x118)]({'success':!![],'result':{'payment':{'id':_0x45b5c4['id'],'gateway':_0x45b5c4[_0x579731(0x115)],'gatewayPaymentId':_0x45b5c4[_0x579731(0xb5)],'status':_0x45b5c4[_0x579731(0xb8)],'amount':_0x45b5c4[_0x579731(0xab)],'currency':_0x45b5c4['currency'],'createdAt':_0x45b5c4[_0x579731(0x100)],'updatedAt':_0x45b5c4[_0x579731(0xba)],'shop':_0x45b5c4['shop']},'timers':_0x497c43,'isCoinToPay':_0x45b5c4[_0x579731(0x115)]===_0x579731(0xd5),'ageInMinutes':Math[_0x579731(0xf3)]((Date[_0x579731(0x103)]()-_0x45b5c4[_0x579731(0x100)][_0x579731(0xe6)]())/(0x3e8*0x3c))}});}catch(_0x22f1dd){_0xb82115[_0x579731(0xb8)](0x1f4)[_0x579731(0x118)]({'success':![],'message':_0x22f1dd instanceof Error?_0x22f1dd['message']:_0x579731(0xbd)});}}),router[a25_0x4cf7f6(0x141)](a25_0x4cf7f6(0xf9),(_0x36c8c1,_0x4f5b8e)=>{const _0x4b07f2=a25_0x4cf7f6;try{const _0x2d5b15=domainMonitoringService_1['domainMonitoringService'][_0x4b07f2(0x10e)]();_0x4f5b8e['json']({'success':!![],'result':{..._0x2d5b15,'description':_0x4b07f2(0xfc),'behavior':_0x4b07f2(0x117),'encoding':_0x4b07f2(0x135)}});}catch(_0x47ab44){_0x4f5b8e[_0x4b07f2(0xb8)](0x1f4)[_0x4b07f2(0x118)]({'success':![],'message':_0x4b07f2(0xd8)});}}),router[a25_0x4cf7f6(0x10b)](a25_0x4cf7f6(0xcd),async(_0x5d163e,_0x72963e)=>{const _0x2917d4=a25_0x4cf7f6;try{const _0x344493=await domainMonitoringService_1[_0x2917d4(0xb1)][_0x2917d4(0xdb)]();_0x72963e[_0x2917d4(0x118)]({'success':!![],'result':{'domainAvailable':_0x344493,'message':_0x344493?_0x2917d4(0xf1):_0x2917d4(0xc3),'timestamp':new Date()[_0x2917d4(0xc7)]()}});}catch(_0x5e94e9){_0x72963e[_0x2917d4(0xb8)](0x1f4)[_0x2917d4(0x118)]({'success':![],'message':_0x5e94e9 instanceof Error?_0x5e94e9[_0x2917d4(0x120)]:_0x2917d4(0x10c)});}}),exports[a25_0x4cf7f6(0x112)]=router;