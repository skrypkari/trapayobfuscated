'use strict';const a19_0x22a805=a19_0x1bea;(function(_0x49b347,_0x554d8d){const _0x3433ef=a19_0x1bea,_0x1d8f0c=_0x49b347();while(!![]){try{const _0x18d724=-parseInt(_0x3433ef(0x17e))/0x1*(parseInt(_0x3433ef(0x1b9))/0x2)+-parseInt(_0x3433ef(0x14d))/0x3+parseInt(_0x3433ef(0x149))/0x4*(-parseInt(_0x3433ef(0x1b1))/0x5)+parseInt(_0x3433ef(0x1b5))/0x6*(parseInt(_0x3433ef(0x14b))/0x7)+-parseInt(_0x3433ef(0x160))/0x8*(parseInt(_0x3433ef(0x19b))/0x9)+-parseInt(_0x3433ef(0x146))/0xa+parseInt(_0x3433ef(0x145))/0xb*(parseInt(_0x3433ef(0x150))/0xc);if(_0x18d724===_0x554d8d)break;else _0x1d8f0c['push'](_0x1d8f0c['shift']());}catch(_0x3ccf63){_0x1d8f0c['push'](_0x1d8f0c['shift']());}}}(a19_0x1551,0x1ba4c));var __createBinding=this&&this[a19_0x22a805(0x15b)]||(Object[a19_0x22a805(0x188)]?function(_0x448fa7,_0x2a3df3,_0x6f83a3,_0x2316b3){const _0x3147e4=a19_0x22a805;if(_0x2316b3===undefined)_0x2316b3=_0x6f83a3;var _0x334c4e=Object[_0x3147e4(0x1ac)](_0x2a3df3,_0x6f83a3);(!_0x334c4e||(_0x3147e4(0x161)in _0x334c4e?!_0x2a3df3[_0x3147e4(0x1ad)]:_0x334c4e['writable']||_0x334c4e[_0x3147e4(0x164)]))&&(_0x334c4e={'enumerable':!![],'get':function(){return _0x2a3df3[_0x6f83a3];}}),Object[_0x3147e4(0x1ba)](_0x448fa7,_0x2316b3,_0x334c4e);}:function(_0x2cf9d5,_0x2da4b7,_0x1a42a1,_0x230e6b){if(_0x230e6b===undefined)_0x230e6b=_0x1a42a1;_0x2cf9d5[_0x230e6b]=_0x2da4b7[_0x1a42a1];}),__setModuleDefault=this&&this[a19_0x22a805(0x147)]||(Object[a19_0x22a805(0x188)]?function(_0x319e44,_0x2ca4b6){const _0x388bdb=a19_0x22a805;Object[_0x388bdb(0x1ba)](_0x319e44,_0x388bdb(0x1a1),{'enumerable':!![],'value':_0x2ca4b6});}:function(_0x47dafc,_0x384dd3){const _0x4bf4ba=a19_0x22a805;_0x47dafc[_0x4bf4ba(0x1a1)]=_0x384dd3;}),__importStar=this&&this['__importStar']||(function(){var _0x54f479=function(_0x61e57a){const _0xdb7144=a19_0x1bea;return _0x54f479=Object[_0xdb7144(0x152)]||function(_0x21653a){const _0x26f245=_0xdb7144;var _0xada363=[];for(var _0x1e1726 in _0x21653a)if(Object[_0x26f245(0x196)][_0x26f245(0x16f)]['call'](_0x21653a,_0x1e1726))_0xada363[_0xada363['length']]=_0x1e1726;return _0xada363;},_0x54f479(_0x61e57a);};return function(_0xf1ef20){const _0x232d1c=a19_0x1bea;if(_0xf1ef20&&_0xf1ef20[_0x232d1c(0x1ad)])return _0xf1ef20;var _0x41ac34={};if(_0xf1ef20!=null){for(var _0x42210a=_0x54f479(_0xf1ef20),_0x5dde25=0x0;_0x5dde25<_0x42210a[_0x232d1c(0x184)];_0x5dde25++)if(_0x42210a[_0x5dde25]!==_0x232d1c(0x1a1))__createBinding(_0x41ac34,_0xf1ef20,_0x42210a[_0x5dde25]);}return __setModuleDefault(_0x41ac34,_0xf1ef20),_0x41ac34;};}());function a19_0x1bea(_0x25c390,_0x58dc3a){const _0x1551c4=a19_0x1551();return a19_0x1bea=function(_0x1beafd,_0x39d50d){_0x1beafd=_0x1beafd-0x145;let _0x2b5ba6=_0x1551c4[_0x1beafd];return _0x2b5ba6;},a19_0x1bea(_0x25c390,_0x58dc3a);}Object[a19_0x22a805(0x1ba)](exports,a19_0x22a805(0x1ad),{'value':!![]});const express_1=require(a19_0x22a805(0x178)),adminController_1=require('../controllers/adminController'),validation_1=require(a19_0x22a805(0x177)),auth_1=require('../middleware/auth'),loggerService_1=require(a19_0x22a805(0x1aa)),coinToPayStatusService_1=require(a19_0x22a805(0x19a)),domainMonitoringService_1=require(a19_0x22a805(0x15e)),router=(0x0,express_1[a19_0x22a805(0x1a3)])(),adminController=new adminController_1[(a19_0x22a805(0x1bc))]();router['use'](auth_1[a19_0x22a805(0x18e)],auth_1[a19_0x22a805(0x17f)]),router[a19_0x22a805(0x161)]('/auth',adminController[a19_0x22a805(0x17a)]),router[a19_0x22a805(0x161)](a19_0x22a805(0x1a7),adminController[a19_0x22a805(0x166)]),router['get'](a19_0x22a805(0x162),adminController[a19_0x22a805(0x194)]),router[a19_0x22a805(0x161)](a19_0x22a805(0x16e),adminController[a19_0x22a805(0x14c)]),router[a19_0x22a805(0x161)](a19_0x22a805(0x193),adminController['getMerchantsAwaitingPayout']),router[a19_0x22a805(0x161)]('/merchants/selection',adminController['getMerchantsSelection']),router[a19_0x22a805(0x158)](a19_0x22a805(0x155),(0x0,validation_1[a19_0x22a805(0x157)])(validation_1[a19_0x22a805(0x1a0)]),adminController[a19_0x22a805(0x182)]),router[a19_0x22a805(0x161)](a19_0x22a805(0x1af),adminController[a19_0x22a805(0x172)]),router[a19_0x22a805(0x161)](a19_0x22a805(0x180),adminController['getPayoutById']),router[a19_0x22a805(0x1a2)](a19_0x22a805(0x180),adminController[a19_0x22a805(0x1b4)]),router[a19_0x22a805(0x161)](a19_0x22a805(0x1a9),adminController['getPayments']),router[a19_0x22a805(0x161)](a19_0x22a805(0x16c),adminController[a19_0x22a805(0x16a)]),router['put'](a19_0x22a805(0x16c),adminController[a19_0x22a805(0x163)]),router[a19_0x22a805(0x19f)](a19_0x22a805(0x18b),(0x0,validation_1['validate'])(validation_1[a19_0x22a805(0x183)]),adminController['updateCustomerData']),router['get'](a19_0x22a805(0x16b),adminController[a19_0x22a805(0x19e)]),router[a19_0x22a805(0x161)]('/users/:id',adminController['getUserById']),router[a19_0x22a805(0x158)](a19_0x22a805(0x16b),(0x0,validation_1[a19_0x22a805(0x157)])(validation_1[a19_0x22a805(0x1b0)]),adminController[a19_0x22a805(0x176)]),router[a19_0x22a805(0x19f)]('/users/:id',(0x0,validation_1[a19_0x22a805(0x157)])(validation_1[a19_0x22a805(0x156)]),adminController[a19_0x22a805(0x15a)]),router[a19_0x22a805(0x1a2)](a19_0x22a805(0x148),adminController['deleteUser']),router['post'](a19_0x22a805(0x167),adminController['suspendUser']),router[a19_0x22a805(0x158)]('/users/:id/activate',adminController[a19_0x22a805(0x1b8)]),router[a19_0x22a805(0x161)](a19_0x22a805(0x17b),(_0x244384,_0x59c716)=>{const _0x2e3595=a19_0x22a805;try{const _0x12e3ce=loggerService_1[_0x2e3595(0x1a5)][_0x2e3595(0x192)]();_0x59c716[_0x2e3595(0x154)]({'success':!![],'result':_0x12e3ce});}catch(_0x42548e){_0x59c716['status'](0x1f4)[_0x2e3595(0x154)]({'success':![],'message':_0x2e3595(0x189)});}}),router[a19_0x22a805(0x158)](a19_0x22a805(0x19c),(_0x273338,_0x4b1070)=>{const _0x17dc64=a19_0x22a805;try{const {daysToKeep:daysToKeep=0x1e}=_0x273338[_0x17dc64(0x153)];loggerService_1[_0x17dc64(0x1a5)][_0x17dc64(0x159)](daysToKeep),_0x4b1070[_0x17dc64(0x154)]({'success':!![],'message':'Old\x20logs\x20cleaned\x20(kept\x20last\x20'+daysToKeep+_0x17dc64(0x18c)});}catch(_0xab5b80){_0x4b1070['status'](0x1f4)[_0x17dc64(0x154)]({'success':![],'message':_0x17dc64(0x14a)});}}),router[a19_0x22a805(0x158)]('/cointopay/check/:paymentId',async(_0xe97492,_0xecd94e)=>{const _0x28438b=a19_0x22a805;try{const {paymentId:_0x16381d}=_0xe97492[_0x28438b(0x1b3)];console[_0x28438b(0x199)](_0x28438b(0x197)+_0x16381d),await coinToPayStatusService_1['coinToPayStatusService'][_0x28438b(0x151)](_0x16381d),_0xecd94e['json']({'success':!![],'message':_0x28438b(0x1ab)});}catch(_0x3ae768){console['error'](_0x28438b(0x171)+_0xe97492[_0x28438b(0x1b3)][_0x28438b(0x19d)]+':',_0x3ae768),_0xecd94e['status'](0x1f4)[_0x28438b(0x154)]({'success':![],'message':_0x3ae768 instanceof Error?_0x3ae768[_0x28438b(0x1a6)]:'Failed\x20to\x20check\x20CoinToPay\x20payment\x20status'});}}),router[a19_0x22a805(0x161)](a19_0x22a805(0x15d),(_0x565eb1,_0x2346b6)=>{const _0xc9348c=a19_0x22a805;try{const _0x1044aa=coinToPayStatusService_1[_0xc9348c(0x179)][_0xc9348c(0x165)]();_0x2346b6[_0xc9348c(0x154)]({'success':!![],'result':{..._0x1044aa,'description':_0xc9348c(0x14e),'statusMapping':{'Paid':_0xc9348c(0x17d),'Awaiting\x20Fiat':_0xc9348c(0x16d),'waiting':_0xc9348c(0x16d),'expired':_0xc9348c(0x1bb),'failed':'FAILED'},'autoExpiryNote':'Payments\x20automatically\x20expire\x20after\x20'+_0x1044aa[_0xc9348c(0x174)]+_0xc9348c(0x18a),'individualTimersNote':_0xc9348c(0x190)}});}catch(_0xe01f06){_0x2346b6[_0xc9348c(0x1a4)](0x1f4)['json']({'success':![],'message':_0xc9348c(0x185)});}}),router['get'](a19_0x22a805(0x181),async(_0x4338d5,_0x5375b2)=>{const _0xec0b64=a19_0x22a805;try{const {paymentId:_0x500d26}=_0x4338d5[_0xec0b64(0x1b3)],_0x235b83=coinToPayStatusService_1['coinToPayStatusService']['getPaymentTimerInfo'](_0x500d26),_0x5b8784=(await Promise[_0xec0b64(0x15c)]()[_0xec0b64(0x173)](()=>__importStar(require('../config/database'))))[_0xec0b64(0x1a1)],_0x152f01=await _0x5b8784[_0xec0b64(0x1c0)][_0xec0b64(0x169)]({'where':{'id':_0x500d26},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x152f01)return _0x5375b2['status'](0x194)[_0xec0b64(0x154)]({'success':![],'message':'Payment\x20not\x20found'});_0x5375b2[_0xec0b64(0x154)]({'success':!![],'result':{'payment':{'id':_0x152f01['id'],'gateway':_0x152f01[_0xec0b64(0x1b7)],'gatewayPaymentId':_0x152f01[_0xec0b64(0x195)],'status':_0x152f01[_0xec0b64(0x1a4)],'amount':_0x152f01[_0xec0b64(0x175)],'currency':_0x152f01[_0xec0b64(0x1ae)],'createdAt':_0x152f01['createdAt'],'updatedAt':_0x152f01['updatedAt'],'shop':_0x152f01[_0xec0b64(0x1bd)]},'timers':_0x235b83,'isCoinToPay':_0x152f01[_0xec0b64(0x1b7)]===_0xec0b64(0x1b2),'ageInMinutes':Math[_0xec0b64(0x1b6)]((Date[_0xec0b64(0x1bf)]()-_0x152f01['createdAt'][_0xec0b64(0x198)]())/(0x3e8*0x3c))}});}catch(_0x58231a){_0x5375b2['status'](0x1f4)[_0xec0b64(0x154)]({'success':![],'message':_0x58231a instanceof Error?_0x58231a[_0xec0b64(0x1a6)]:'Failed\x20to\x20get\x20payment\x20information'});}}),router[a19_0x22a805(0x161)](a19_0x22a805(0x1be),(_0x32fc68,_0x5f2eb4)=>{const _0x154add=a19_0x22a805;try{const _0x624556=domainMonitoringService_1['domainMonitoringService'][_0x154add(0x186)]();_0x5f2eb4[_0x154add(0x154)]({'success':!![],'result':{..._0x624556,'description':_0x154add(0x18d),'behavior':_0x154add(0x168),'encoding':_0x154add(0x18f)}});}catch(_0x13c6e4){_0x5f2eb4['status'](0x1f4)[_0x154add(0x154)]({'success':![],'message':'Failed\x20to\x20get\x20domain\x20monitoring\x20statistics'});}}),router[a19_0x22a805(0x158)](a19_0x22a805(0x1a8),async(_0x377a9e,_0x406b9a)=>{const _0x3451c4=a19_0x22a805;try{const _0x213ee6=await domainMonitoringService_1[_0x3451c4(0x17c)][_0x3451c4(0x170)]();_0x406b9a[_0x3451c4(0x154)]({'success':!![],'result':{'domainAvailable':_0x213ee6,'message':_0x213ee6?_0x3451c4(0x14f):_0x3451c4(0x187),'timestamp':new Date()[_0x3451c4(0x15f)]()}});}catch(_0x37f5d5){_0x406b9a['status'](0x1f4)[_0x3451c4(0x154)]({'success':![],'message':_0x37f5d5 instanceof Error?_0x37f5d5['message']:_0x3451c4(0x191)});}}),exports[a19_0x22a805(0x1a1)]=router;function a19_0x1551(){const _0x2042c5=['checkAuth','/logs/stats','domainMonitoringService','PAID','132446ugUsfZ','requireAdmin','/payouts/:id','/cointopay/payment/:paymentId','createPayout','updateCustomerDataSchema','length','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','getMonitoringStats','Domain\x20check\x20failed','create','Failed\x20to\x20get\x20log\x20statistics','\x20days\x20if\x20not\x20paid','/payments/:id/customer','\x20days)','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','authenticateToken','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','Failed\x20to\x20perform\x20manual\x20domain\x20check','getLogStats','/payout/merchants','getMerchantStatistics','gatewayPaymentId','prototype','🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','getTime','log','../services/coinToPayStatusService','2745BSbOWs','/logs/clean','paymentId','getUsers','put','createPayoutSchema','default','delete','Router','status','loggerService','message','/statistics','/domain-monitoring/check','/payments','../services/loggerService','CoinToPay\x20payment\x20status\x20checked\x20successfully','getOwnPropertyDescriptor','__esModule','currency','/payouts','createUserSchema','125455EgjHYm','cointopay','params','deletePayout','65574rnbNtO','floor','gateway','activateUser','2HPIzgT','defineProperty','EXPIRED','AdminController','shop','/domain-monitoring/stats','now','payment','881661cqHakn','234220dfgLiv','__setModuleDefault','/users/:id','36KRdPjY','Failed\x20to\x20clean\x20old\x20logs','49SlXgcd','getPayoutStats','404145hSkGfP','CoinToPay\x20automatic\x20status\x20checking\x20service','Domain\x20is\x20responding\x20correctly','84wZWvEs','checkPaymentById','getOwnPropertyNames','body','json','/payout','updateUserSchema','validate','post','cleanOldLogs','updateUser','__createBinding','resolve','/cointopay/stats','../services/domainMonitoringService','toISOString','208ToYPzY','get','/merchant-statistics','updatePayment','configurable','getServiceStats','getStatistics','/users/:id/suspend','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','findUnique','getPaymentById','/users','/payments/:id','PENDING','/payout/stats','hasOwnProperty','manualCheck','❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','getPayouts','then','expiryDays','amount','createUser','../middleware/validation','express','coinToPayStatusService'];a19_0x1551=function(){return _0x2042c5;};return a19_0x1551();}