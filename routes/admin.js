'use strict';const a18_0x30f7c3=a18_0x5a72;function a18_0x3ac5(){const _0x3832b5=['Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','1368Uascaz','__esModule','getTime','status','updatePayment','Payments\x20automatically\x20expire\x20after\x20','configurable','/payments/:id/customer','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','63XMzcyB','gateway','getServiceStats','floor','validate','coinToPayStatusService','default','cointopay','/logs/stats','482670dnwCbe','expiryDays','getPayments','manualCheck','create','resolve','updateUser','../middleware/auth','createUserSchema','requireAdmin','__importStar','call','createdAt','../config/database','shop','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','log','61569aeVBGY','5061xIPFNB','then','AdminController','\x20days\x20if\x20not\x20paid','createPayoutSchema','Domain\x20is\x20responding\x20correctly','Old\x20logs\x20cleaned\x20(kept\x20last\x20','getPaymentTimerInfo','328936HcQBQZ','Failed\x20to\x20get\x20payment\x20information','error','getMerchantsAwaitingPayout','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','suspendUser','loggerService','defineProperty','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','../controllers/adminController','put','/cointopay/check/:paymentId','/users/:id/suspend','length','CoinToPay\x20automatic\x20status\x20checking\x20service','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','\x20days)','getPayoutStats','/payout/merchants','Router','/cointopay/stats','checkAuth','/users/:id','body','hasOwnProperty','../middleware/validation','/payments/:id','json','payment','now','getStatistics','4774825yiJrUK','getOwnPropertyNames','../services/loggerService','domainMonitoringService','/statistics','CoinToPay\x20payment\x20status\x20checked\x20successfully','/payouts/:id','/users','getUsers','authenticateToken','getUserById','PENDING','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','cleanOldLogs','post','/users/:id/activate','get','Domain\x20check\x20failed','delete','amount','getPayoutById','findUnique','2060MTAcdI','checkPaymentById','FAILED','/logs/clean','currency','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','__setModuleDefault','/domain-monitoring/check','922800jVVPkC','Failed\x20to\x20get\x20log\x20statistics','paymentId','Failed\x20to\x20perform\x20manual\x20domain\x20check','use','params','1618620LZUhLT','updateUserSchema','EXPIRED','PAID','getPayouts','../services/domainMonitoringService','message','express'];a18_0x3ac5=function(){return _0x3832b5;};return a18_0x3ac5();}(function(_0x59601d,_0x105f7b){const _0x1a4fb1=a18_0x5a72,_0x241a8b=_0x59601d();while(!![]){try{const _0x1f0019=parseInt(_0x1a4fb1(0x1a4))/0x1+parseInt(_0x1a4fb1(0x1c5))/0x2+-parseInt(_0x1a4fb1(0x1d7))/0x3*(-parseInt(_0x1a4fb1(0x1b3))/0x4)+parseInt(_0x1a4fb1(0x186))/0x5+-parseInt(_0x1a4fb1(0x1aa))/0x6+-parseInt(_0x1a4fb1(0x1bc))/0x7*(parseInt(_0x1a4fb1(0x1df))/0x8)+parseInt(_0x1a4fb1(0x1d6))/0x9*(-parseInt(_0x1a4fb1(0x19c))/0xa);if(_0x1f0019===_0x105f7b)break;else _0x241a8b['push'](_0x241a8b['shift']());}catch(_0x3982fa){_0x241a8b['push'](_0x241a8b['shift']());}}}(a18_0x3ac5,0x9df49));function a18_0x5a72(_0x5f0f5b,_0x983c2f){const _0x3ac523=a18_0x3ac5();return a18_0x5a72=function(_0x5a72df,_0x2f7429){_0x5a72df=_0x5a72df-0x174;let _0x328c1c=_0x3ac523[_0x5a72df];return _0x328c1c;},a18_0x5a72(_0x5f0f5b,_0x983c2f);}var __createBinding=this&&this['__createBinding']||(Object[a18_0x30f7c3(0x1c9)]?function(_0x29785f,_0x16475d,_0x1dfbaf,_0x1d3078){const _0x1d05ca=a18_0x30f7c3;if(_0x1d3078===undefined)_0x1d3078=_0x1dfbaf;var _0x5f4646=Object['getOwnPropertyDescriptor'](_0x16475d,_0x1dfbaf);(!_0x5f4646||(_0x1d05ca(0x196)in _0x5f4646?!_0x16475d[_0x1d05ca(0x1b4)]:_0x5f4646['writable']||_0x5f4646[_0x1d05ca(0x1b9)]))&&(_0x5f4646={'enumerable':!![],'get':function(){return _0x16475d[_0x1dfbaf];}}),Object[_0x1d05ca(0x1e6)](_0x29785f,_0x1d3078,_0x5f4646);}:function(_0x33a0e8,_0x5ce6c9,_0x1ad8ad,_0x5813d6){if(_0x5813d6===undefined)_0x5813d6=_0x1ad8ad;_0x33a0e8[_0x5813d6]=_0x5ce6c9[_0x1ad8ad];}),__setModuleDefault=this&&this[a18_0x30f7c3(0x1a2)]||(Object[a18_0x30f7c3(0x1c9)]?function(_0xf504b9,_0x5e41f7){const _0x431ffd=a18_0x30f7c3;Object['defineProperty'](_0xf504b9,_0x431ffd(0x1c2),{'enumerable':!![],'value':_0x5e41f7});}:function(_0x19a6a8,_0x3d9e95){const _0x2e6b40=a18_0x30f7c3;_0x19a6a8[_0x2e6b40(0x1c2)]=_0x3d9e95;}),__importStar=this&&this[a18_0x30f7c3(0x1cf)]||(function(){var _0x438d8e=function(_0x5e054b){const _0x113480=a18_0x5a72;return _0x438d8e=Object[_0x113480(0x187)]||function(_0x2d461a){const _0x2675b7=_0x113480;var _0x1031ab=[];for(var _0x3a6aa3 in _0x2d461a)if(Object['prototype'][_0x2675b7(0x17f)][_0x2675b7(0x1d0)](_0x2d461a,_0x3a6aa3))_0x1031ab[_0x1031ab[_0x2675b7(0x174)]]=_0x3a6aa3;return _0x1031ab;},_0x438d8e(_0x5e054b);};return function(_0x1a8d65){const _0x35b028=a18_0x5a72;if(_0x1a8d65&&_0x1a8d65[_0x35b028(0x1b4)])return _0x1a8d65;var _0x1413cc={};if(_0x1a8d65!=null){for(var _0x221549=_0x438d8e(_0x1a8d65),_0x1b641b=0x0;_0x1b641b<_0x221549[_0x35b028(0x174)];_0x1b641b++)if(_0x221549[_0x1b641b]!==_0x35b028(0x1c2))__createBinding(_0x1413cc,_0x1a8d65,_0x221549[_0x1b641b]);}return __setModuleDefault(_0x1413cc,_0x1a8d65),_0x1413cc;};}());Object[a18_0x30f7c3(0x1e6)](exports,'__esModule',{'value':!![]});const express_1=require(a18_0x30f7c3(0x1b1)),adminController_1=require(a18_0x30f7c3(0x1e8)),validation_1=require(a18_0x30f7c3(0x180)),auth_1=require(a18_0x30f7c3(0x1cc)),loggerService_1=require(a18_0x30f7c3(0x188)),coinToPayStatusService_1=require('../services/coinToPayStatusService'),domainMonitoringService_1=require(a18_0x30f7c3(0x1af)),router=(0x0,express_1[a18_0x30f7c3(0x17a)])(),adminController=new adminController_1[(a18_0x30f7c3(0x1d9))]();router[a18_0x30f7c3(0x1a8)](auth_1[a18_0x30f7c3(0x18f)],auth_1[a18_0x30f7c3(0x1ce)]),router['get']('/auth',adminController[a18_0x30f7c3(0x17c)]),router[a18_0x30f7c3(0x196)](a18_0x30f7c3(0x18a),adminController[a18_0x30f7c3(0x185)]),router[a18_0x30f7c3(0x196)]('/merchant-statistics',adminController['getMerchantStatistics']),router[a18_0x30f7c3(0x196)]('/payout/stats',adminController[a18_0x30f7c3(0x178)]),router['get'](a18_0x30f7c3(0x179),adminController[a18_0x30f7c3(0x1e2)]),router[a18_0x30f7c3(0x194)]('/payout',(0x0,validation_1['validate'])(validation_1[a18_0x30f7c3(0x1db)]),adminController['createPayout']),router[a18_0x30f7c3(0x196)]('/payouts',adminController[a18_0x30f7c3(0x1ae)]),router[a18_0x30f7c3(0x196)](a18_0x30f7c3(0x18c),adminController[a18_0x30f7c3(0x19a)]),router[a18_0x30f7c3(0x198)](a18_0x30f7c3(0x18c),adminController['deletePayout']),router['get']('/payments',adminController[a18_0x30f7c3(0x1c7)]),router[a18_0x30f7c3(0x196)](a18_0x30f7c3(0x181),adminController['getPaymentById']),router[a18_0x30f7c3(0x1e9)](a18_0x30f7c3(0x181),adminController[a18_0x30f7c3(0x1b7)]),router['put'](a18_0x30f7c3(0x1ba),(0x0,validation_1[a18_0x30f7c3(0x1c0)])(validation_1['updateCustomerDataSchema']),adminController['updateCustomerData']),router[a18_0x30f7c3(0x196)](a18_0x30f7c3(0x18d),adminController[a18_0x30f7c3(0x18e)]),router['get'](a18_0x30f7c3(0x17d),adminController[a18_0x30f7c3(0x190)]),router[a18_0x30f7c3(0x194)](a18_0x30f7c3(0x18d),(0x0,validation_1[a18_0x30f7c3(0x1c0)])(validation_1[a18_0x30f7c3(0x1cd)]),adminController['createUser']),router[a18_0x30f7c3(0x1e9)](a18_0x30f7c3(0x17d),(0x0,validation_1[a18_0x30f7c3(0x1c0)])(validation_1[a18_0x30f7c3(0x1ab)]),adminController[a18_0x30f7c3(0x1cb)]),router[a18_0x30f7c3(0x198)]('/users/:id',adminController['deleteUser']),router[a18_0x30f7c3(0x194)](a18_0x30f7c3(0x1eb),adminController[a18_0x30f7c3(0x1e4)]),router['post'](a18_0x30f7c3(0x195),adminController['activateUser']),router['get'](a18_0x30f7c3(0x1c4),(_0x5bec82,_0x237fab)=>{const _0x514a96=a18_0x30f7c3;try{const _0x3d6996=loggerService_1[_0x514a96(0x1e5)]['getLogStats']();_0x237fab['json']({'success':!![],'result':_0x3d6996});}catch(_0x503cc7){_0x237fab['status'](0x1f4)[_0x514a96(0x182)]({'success':![],'message':_0x514a96(0x1a5)});}}),router['post'](a18_0x30f7c3(0x19f),(_0x85894f,_0x4746ac)=>{const _0x4a8a90=a18_0x30f7c3;try{const {daysToKeep:daysToKeep=0x1e}=_0x85894f[_0x4a8a90(0x17e)];loggerService_1[_0x4a8a90(0x1e5)][_0x4a8a90(0x193)](daysToKeep),_0x4746ac[_0x4a8a90(0x182)]({'success':!![],'message':_0x4a8a90(0x1dd)+daysToKeep+_0x4a8a90(0x177)});}catch(_0x145171){_0x4746ac['status'](0x1f4)[_0x4a8a90(0x182)]({'success':![],'message':'Failed\x20to\x20clean\x20old\x20logs'});}}),router[a18_0x30f7c3(0x194)](a18_0x30f7c3(0x1ea),async(_0x30cbeb,_0x5cb72b)=>{const _0x4c6a71=a18_0x30f7c3;try{const {paymentId:_0x1b46f7}=_0x30cbeb[_0x4c6a71(0x1a9)];console[_0x4c6a71(0x1d5)]('üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20'+_0x1b46f7),await coinToPayStatusService_1[_0x4c6a71(0x1c1)][_0x4c6a71(0x19d)](_0x1b46f7),_0x5cb72b[_0x4c6a71(0x182)]({'success':!![],'message':_0x4c6a71(0x18b)});}catch(_0x1d557c){console[_0x4c6a71(0x1e1)](_0x4c6a71(0x1e7)+_0x30cbeb[_0x4c6a71(0x1a9)][_0x4c6a71(0x1a6)]+':',_0x1d557c),_0x5cb72b[_0x4c6a71(0x1b6)](0x1f4)[_0x4c6a71(0x182)]({'success':![],'message':_0x1d557c instanceof Error?_0x1d557c[_0x4c6a71(0x1b0)]:_0x4c6a71(0x1bb)});}}),router[a18_0x30f7c3(0x196)](a18_0x30f7c3(0x17b),(_0x488fae,_0x296e35)=>{const _0x2455de=a18_0x30f7c3;try{const _0x2cfd2e=coinToPayStatusService_1['coinToPayStatusService'][_0x2455de(0x1be)]();_0x296e35[_0x2455de(0x182)]({'success':!![],'result':{..._0x2cfd2e,'description':_0x2455de(0x175),'statusMapping':{'Paid':_0x2455de(0x1ad),'Awaiting\x20Fiat':_0x2455de(0x191),'waiting':'PENDING','expired':_0x2455de(0x1ac),'failed':_0x2455de(0x19e)},'autoExpiryNote':_0x2455de(0x1b8)+_0x2cfd2e[_0x2455de(0x1c6)]+_0x2455de(0x1da),'individualTimersNote':_0x2455de(0x1b2)}});}catch(_0x36f0a4){_0x296e35['status'](0x1f4)[_0x2455de(0x182)]({'success':![],'message':_0x2455de(0x1e3)});}}),router[a18_0x30f7c3(0x196)]('/cointopay/payment/:paymentId',async(_0x1d1aed,_0x512f28)=>{const _0x162ae9=a18_0x30f7c3;try{const {paymentId:_0x15978f}=_0x1d1aed[_0x162ae9(0x1a9)],_0x5b14fb=coinToPayStatusService_1[_0x162ae9(0x1c1)][_0x162ae9(0x1de)](_0x15978f),_0x3fda6f=(await Promise[_0x162ae9(0x1ca)]()[_0x162ae9(0x1d8)](()=>__importStar(require(_0x162ae9(0x1d2)))))[_0x162ae9(0x1c2)],_0x52344f=await _0x3fda6f[_0x162ae9(0x183)][_0x162ae9(0x19b)]({'where':{'id':_0x15978f},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x52344f)return _0x512f28[_0x162ae9(0x1b6)](0x194)['json']({'success':![],'message':'Payment\x20not\x20found'});_0x512f28[_0x162ae9(0x182)]({'success':!![],'result':{'payment':{'id':_0x52344f['id'],'gateway':_0x52344f[_0x162ae9(0x1bd)],'gatewayPaymentId':_0x52344f['gatewayPaymentId'],'status':_0x52344f[_0x162ae9(0x1b6)],'amount':_0x52344f[_0x162ae9(0x199)],'currency':_0x52344f[_0x162ae9(0x1a0)],'createdAt':_0x52344f['createdAt'],'updatedAt':_0x52344f['updatedAt'],'shop':_0x52344f[_0x162ae9(0x1d3)]},'timers':_0x5b14fb,'isCoinToPay':_0x52344f['gateway']===_0x162ae9(0x1c3),'ageInMinutes':Math[_0x162ae9(0x1bf)]((Date[_0x162ae9(0x184)]()-_0x52344f[_0x162ae9(0x1d1)][_0x162ae9(0x1b5)]())/(0x3e8*0x3c))}});}catch(_0x5f313b){_0x512f28['status'](0x1f4)[_0x162ae9(0x182)]({'success':![],'message':_0x5f313b instanceof Error?_0x5f313b[_0x162ae9(0x1b0)]:_0x162ae9(0x1e0)});}}),router[a18_0x30f7c3(0x196)]('/domain-monitoring/stats',(_0x5d5f70,_0x3079ae)=>{const _0x1e9c2e=a18_0x30f7c3;try{const _0x18bdf0=domainMonitoringService_1['domainMonitoringService']['getMonitoringStats']();_0x3079ae['json']({'success':!![],'result':{..._0x18bdf0,'description':_0x1e9c2e(0x1a1),'behavior':_0x1e9c2e(0x192),'encoding':_0x1e9c2e(0x1d4)}});}catch(_0x1ecd69){_0x3079ae[_0x1e9c2e(0x1b6)](0x1f4)['json']({'success':![],'message':_0x1e9c2e(0x176)});}}),router[a18_0x30f7c3(0x194)](a18_0x30f7c3(0x1a3),async(_0x5afd80,_0x451301)=>{const _0x4e9841=a18_0x30f7c3;try{const _0x35b61=await domainMonitoringService_1[_0x4e9841(0x189)][_0x4e9841(0x1c8)]();_0x451301[_0x4e9841(0x182)]({'success':!![],'result':{'domainAvailable':_0x35b61,'message':_0x35b61?_0x4e9841(0x1dc):_0x4e9841(0x197),'timestamp':new Date()['toISOString']()}});}catch(_0x10e323){_0x451301[_0x4e9841(0x1b6)](0x1f4)['json']({'success':![],'message':_0x10e323 instanceof Error?_0x10e323[_0x4e9841(0x1b0)]:_0x4e9841(0x1a7)});}}),exports['default']=router;