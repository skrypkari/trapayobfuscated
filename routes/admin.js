'use strict';function a19_0x199c(_0x473ce8,_0x22f9b3){const _0x504326=a19_0x5043();return a19_0x199c=function(_0x199cf3,_0x4a3b43){_0x199cf3=_0x199cf3-0xec;let _0x3f1af9=_0x504326[_0x199cf3];return _0x3f1af9;},a19_0x199c(_0x473ce8,_0x22f9b3);}const a19_0x214219=a19_0x199c;(function(_0x334124,_0x1f8600){const _0x4cf28e=a19_0x199c,_0x1bc71a=_0x334124();while(!![]){try{const _0x1f35c7=-parseInt(_0x4cf28e(0xf5))/0x1+-parseInt(_0x4cf28e(0x158))/0x2*(-parseInt(_0x4cf28e(0x105))/0x3)+parseInt(_0x4cf28e(0x114))/0x4+parseInt(_0x4cf28e(0x138))/0x5+-parseInt(_0x4cf28e(0x15c))/0x6+parseInt(_0x4cf28e(0x13d))/0x7*(-parseInt(_0x4cf28e(0x133))/0x8)+parseInt(_0x4cf28e(0x106))/0x9*(parseInt(_0x4cf28e(0x13a))/0xa);if(_0x1f35c7===_0x1f8600)break;else _0x1bc71a['push'](_0x1bc71a['shift']());}catch(_0x27b7f7){_0x1bc71a['push'](_0x1bc71a['shift']());}}}(a19_0x5043,0x4f016));function a19_0x5043(){const _0x22e561=['/cointopay/payment/:paymentId','getStatistics','create','\x20days\x20if\x20not\x20paid','../middleware/validation','../middleware/auth','EXPIRED','activateUser','getUserById','getPayments','shop','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','payment','/payments','Payment\x20not\x20found','deleteUser','checkAuth','Domain\x20check\x20failed','14585PmqAVz','updatedAt','__esModule','__createBinding','Domain\x20is\x20responding\x20correctly','hasOwnProperty','createdAt','cointopay','/statistics','getLogStats','getPayouts','Failed\x20to\x20perform\x20manual\x20domain\x20check','status','length','../services/loggerService','/users/:id/activate','5850HzEWal','9DUxrqX','/payout','/domain-monitoring/check','updateCustomerDataSchema','createPayout','getServiceStats','checkPaymentById','prototype','CoinToPay\x20automatic\x20status\x20checking\x20service','gateway','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','/cointopay/check/:paymentId','createUser','createUserSchema','1361296ISAkQj','now','post','suspendUser','Payments\x20automatically\x20expire\x20after\x20','Failed\x20to\x20get\x20log\x20statistics','loggerService','/auth','/payments/:id','../services/coinToPayStatusService','amount','../controllers/adminController','log','Failed\x20to\x20get\x20payment\x20information','Router','getPayoutStats','AdminController','delete','\x20days)','/users/:id','defineProperty','PENDING','params','FAILED','/logs/clean','expiryDays','/payouts','put','getPaymentById','/merchants/selection','/merchant-statistics','8mRcQrp','getOwnPropertyNames','/logs/stats','Old\x20logs\x20cleaned\x20(kept\x20last\x20','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','3102815XqvkMK','__importStar','483150xwUziK','getTime','get','3055724SpKtwe','../services/domainMonitoringService','/payouts/:id','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','validate','default','authenticateToken','PAID','/domain-monitoring/stats','getMerchantStatistics','coinToPayStatusService','manualCheck','/users/:id/suspend','call','updatePayment','updateUser','json','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','domainMonitoringService','/cointopay/stats','requireAdmin','message','use','writable','then','express','paymentId','250rHaMUa','/users','currency','resolve','2869374FtTWTc'];a19_0x5043=function(){return _0x22e561;};return a19_0x5043();}var __createBinding=this&&this[a19_0x214219(0xf8)]||(Object[a19_0x214219(0x15f)]?function(_0x23988b,_0x195c81,_0x14e6a5,_0x269029){const _0x3c32c3=a19_0x214219;if(_0x269029===undefined)_0x269029=_0x14e6a5;var _0x134dfe=Object['getOwnPropertyDescriptor'](_0x195c81,_0x14e6a5);(!_0x134dfe||('get'in _0x134dfe?!_0x195c81[_0x3c32c3(0xf7)]:_0x134dfe[_0x3c32c3(0x154)]||_0x134dfe['configurable']))&&(_0x134dfe={'enumerable':!![],'get':function(){return _0x195c81[_0x14e6a5];}}),Object['defineProperty'](_0x23988b,_0x269029,_0x134dfe);}:function(_0x380dc0,_0x50dab0,_0x16a545,_0x225deb){if(_0x225deb===undefined)_0x225deb=_0x16a545;_0x380dc0[_0x225deb]=_0x50dab0[_0x16a545];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object['create']?function(_0x470555,_0x167b04){const _0x5ea364=a19_0x214219;Object[_0x5ea364(0x128)](_0x470555,_0x5ea364(0x142),{'enumerable':!![],'value':_0x167b04});}:function(_0x487893,_0x2eb444){const _0x88ec58=a19_0x214219;_0x487893[_0x88ec58(0x142)]=_0x2eb444;}),__importStar=this&&this[a19_0x214219(0x139)]||(function(){var _0x5a9e9c=function(_0x3b6770){const _0x3b6f00=a19_0x199c;return _0x5a9e9c=Object[_0x3b6f00(0x134)]||function(_0x209c42){const _0x373868=_0x3b6f00;var _0x1f61d0=[];for(var _0x348a43 in _0x209c42)if(Object[_0x373868(0x10d)][_0x373868(0xfa)][_0x373868(0x14a)](_0x209c42,_0x348a43))_0x1f61d0[_0x1f61d0['length']]=_0x348a43;return _0x1f61d0;},_0x5a9e9c(_0x3b6770);};return function(_0x7aadd8){const _0x3208ec=a19_0x199c;if(_0x7aadd8&&_0x7aadd8[_0x3208ec(0xf7)])return _0x7aadd8;var _0x5d13cc={};if(_0x7aadd8!=null){for(var _0x576887=_0x5a9e9c(_0x7aadd8),_0x573020=0x0;_0x573020<_0x576887[_0x3208ec(0x102)];_0x573020++)if(_0x576887[_0x573020]!==_0x3208ec(0x142))__createBinding(_0x5d13cc,_0x7aadd8,_0x576887[_0x573020]);}return __setModuleDefault(_0x5d13cc,_0x7aadd8),_0x5d13cc;};}());Object['defineProperty'](exports,'__esModule',{'value':!![]});const express_1=require(a19_0x214219(0x156)),adminController_1=require(a19_0x214219(0x11f)),validation_1=require(a19_0x214219(0x161)),auth_1=require(a19_0x214219(0x162)),loggerService_1=require(a19_0x214219(0x103)),coinToPayStatusService_1=require(a19_0x214219(0x11d)),domainMonitoringService_1=require(a19_0x214219(0x13e)),router=(0x0,express_1[a19_0x214219(0x122)])(),adminController=new adminController_1[(a19_0x214219(0x124))]();router[a19_0x214219(0x153)](auth_1[a19_0x214219(0x143)],auth_1[a19_0x214219(0x151)]),router[a19_0x214219(0x13c)](a19_0x214219(0x11b),adminController[a19_0x214219(0xf3)]),router[a19_0x214219(0x13c)](a19_0x214219(0xfd),adminController[a19_0x214219(0x15e)]),router['get'](a19_0x214219(0x132),adminController[a19_0x214219(0x146)]),router['get']('/payout/stats',adminController[a19_0x214219(0x123)]),router['get']('/payout/merchants',adminController['getMerchantsAwaitingPayout']),router[a19_0x214219(0x13c)](a19_0x214219(0x131),adminController['getMerchantsSelection']),router[a19_0x214219(0x116)](a19_0x214219(0x107),(0x0,validation_1['validate'])(validation_1['createPayoutSchema']),adminController[a19_0x214219(0x10a)]),router['get'](a19_0x214219(0x12e),adminController[a19_0x214219(0xff)]),router['get']('/payouts/:id',adminController['getPayoutById']),router['delete'](a19_0x214219(0x13f),adminController['deletePayout']),router[a19_0x214219(0x13c)](a19_0x214219(0xf0),adminController[a19_0x214219(0x166)]),router['get']('/payments/:id',adminController[a19_0x214219(0x130)]),router[a19_0x214219(0x12f)](a19_0x214219(0x11c),adminController[a19_0x214219(0x14b)]),router[a19_0x214219(0x12f)]('/payments/:id/customer',(0x0,validation_1['validate'])(validation_1[a19_0x214219(0x109)]),adminController['updateCustomerData']),router[a19_0x214219(0x13c)]('/users',adminController['getUsers']),router[a19_0x214219(0x13c)](a19_0x214219(0x127),adminController[a19_0x214219(0x165)]),router[a19_0x214219(0x116)](a19_0x214219(0x159),(0x0,validation_1[a19_0x214219(0x141)])(validation_1[a19_0x214219(0x113)]),adminController[a19_0x214219(0x112)]),router[a19_0x214219(0x12f)](a19_0x214219(0x127),(0x0,validation_1['validate'])(validation_1['updateUserSchema']),adminController[a19_0x214219(0x14c)]),router[a19_0x214219(0x125)]('/users/:id',adminController[a19_0x214219(0xf2)]),router[a19_0x214219(0x116)](a19_0x214219(0x149),adminController[a19_0x214219(0x117)]),router[a19_0x214219(0x116)](a19_0x214219(0x104),adminController[a19_0x214219(0x164)]),router[a19_0x214219(0x13c)](a19_0x214219(0x135),(_0x17ca5d,_0x25d054)=>{const _0x1f39cc=a19_0x214219;try{const _0x1ecfe5=loggerService_1['loggerService'][_0x1f39cc(0xfe)]();_0x25d054[_0x1f39cc(0x14d)]({'success':!![],'result':_0x1ecfe5});}catch(_0x235e2d){_0x25d054[_0x1f39cc(0x101)](0x1f4)[_0x1f39cc(0x14d)]({'success':![],'message':_0x1f39cc(0x119)});}}),router[a19_0x214219(0x116)](a19_0x214219(0x12c),(_0x44ec88,_0x3cfe1b)=>{const _0x47e9c3=a19_0x214219;try{const {daysToKeep:daysToKeep=0x1e}=_0x44ec88['body'];loggerService_1[_0x47e9c3(0x11a)]['cleanOldLogs'](daysToKeep),_0x3cfe1b[_0x47e9c3(0x14d)]({'success':!![],'message':_0x47e9c3(0x136)+daysToKeep+_0x47e9c3(0x126)});}catch(_0x69bb83){_0x3cfe1b[_0x47e9c3(0x101)](0x1f4)['json']({'success':![],'message':'Failed\x20to\x20clean\x20old\x20logs'});}}),router[a19_0x214219(0x116)](a19_0x214219(0x111),async(_0x59b0d6,_0x53ce0e)=>{const _0x5e11f5=a19_0x214219;try{const {paymentId:_0xb42961}=_0x59b0d6[_0x5e11f5(0x12a)];console[_0x5e11f5(0x120)]('🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20'+_0xb42961),await coinToPayStatusService_1[_0x5e11f5(0x147)][_0x5e11f5(0x10c)](_0xb42961),_0x53ce0e[_0x5e11f5(0x14d)]({'success':!![],'message':'CoinToPay\x20payment\x20status\x20checked\x20successfully'});}catch(_0x3508dc){console['error']('❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20'+_0x59b0d6[_0x5e11f5(0x12a)][_0x5e11f5(0x157)]+':',_0x3508dc),_0x53ce0e[_0x5e11f5(0x101)](0x1f4)[_0x5e11f5(0x14d)]({'success':![],'message':_0x3508dc instanceof Error?_0x3508dc['message']:'Failed\x20to\x20check\x20CoinToPay\x20payment\x20status'});}}),router['get'](a19_0x214219(0x150),(_0x1e6e1c,_0x535ac3)=>{const _0x21a960=a19_0x214219;try{const _0x4eb984=coinToPayStatusService_1[_0x21a960(0x147)][_0x21a960(0x10b)]();_0x535ac3[_0x21a960(0x14d)]({'success':!![],'result':{..._0x4eb984,'description':_0x21a960(0x10e),'statusMapping':{'Paid':_0x21a960(0x144),'Awaiting\x20Fiat':_0x21a960(0x129),'waiting':_0x21a960(0x129),'expired':_0x21a960(0x163),'failed':_0x21a960(0x12b)},'autoExpiryNote':_0x21a960(0x118)+_0x4eb984[_0x21a960(0x12d)]+_0x21a960(0x160),'individualTimersNote':_0x21a960(0xee)}});}catch(_0xda2cd0){_0x535ac3['status'](0x1f4)['json']({'success':![],'message':_0x21a960(0x14e)});}}),router[a19_0x214219(0x13c)](a19_0x214219(0x15d),async(_0x1f721b,_0x40cb9b)=>{const _0x293842=a19_0x214219;try{const {paymentId:_0x3e9262}=_0x1f721b['params'],_0x40c029=coinToPayStatusService_1[_0x293842(0x147)]['getPaymentTimerInfo'](_0x3e9262),_0xcc843e=(await Promise[_0x293842(0x15b)]()[_0x293842(0x155)](()=>__importStar(require('../config/database'))))[_0x293842(0x142)],_0x51f78e=await _0xcc843e[_0x293842(0xef)]['findUnique']({'where':{'id':_0x3e9262},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x51f78e)return _0x40cb9b[_0x293842(0x101)](0x194)[_0x293842(0x14d)]({'success':![],'message':_0x293842(0xf1)});_0x40cb9b[_0x293842(0x14d)]({'success':!![],'result':{'payment':{'id':_0x51f78e['id'],'gateway':_0x51f78e[_0x293842(0x10f)],'gatewayPaymentId':_0x51f78e['gatewayPaymentId'],'status':_0x51f78e[_0x293842(0x101)],'amount':_0x51f78e[_0x293842(0x11e)],'currency':_0x51f78e[_0x293842(0x15a)],'createdAt':_0x51f78e[_0x293842(0xfb)],'updatedAt':_0x51f78e[_0x293842(0xf6)],'shop':_0x51f78e[_0x293842(0xec)]},'timers':_0x40c029,'isCoinToPay':_0x51f78e[_0x293842(0x10f)]===_0x293842(0xfc),'ageInMinutes':Math['floor']((Date[_0x293842(0x115)]()-_0x51f78e[_0x293842(0xfb)][_0x293842(0x13b)]())/(0x3e8*0x3c))}});}catch(_0x209263){_0x40cb9b[_0x293842(0x101)](0x1f4)[_0x293842(0x14d)]({'success':![],'message':_0x209263 instanceof Error?_0x209263[_0x293842(0x152)]:_0x293842(0x121)});}}),router[a19_0x214219(0x13c)](a19_0x214219(0x145),(_0x595ed3,_0x391ca6)=>{const _0x31364c=a19_0x214219;try{const _0x49c737=domainMonitoringService_1[_0x31364c(0x14f)]['getMonitoringStats']();_0x391ca6[_0x31364c(0x14d)]({'success':!![],'result':{..._0x49c737,'description':_0x31364c(0xed),'behavior':_0x31364c(0x140),'encoding':_0x31364c(0x137)}});}catch(_0x20f377){_0x391ca6[_0x31364c(0x101)](0x1f4)[_0x31364c(0x14d)]({'success':![],'message':_0x31364c(0x110)});}}),router[a19_0x214219(0x116)](a19_0x214219(0x108),async(_0x4dd460,_0x313f1c)=>{const _0x445a85=a19_0x214219;try{const _0x191e0e=await domainMonitoringService_1[_0x445a85(0x14f)][_0x445a85(0x148)]();_0x313f1c[_0x445a85(0x14d)]({'success':!![],'result':{'domainAvailable':_0x191e0e,'message':_0x191e0e?_0x445a85(0xf9):_0x445a85(0xf4),'timestamp':new Date()['toISOString']()}});}catch(_0x417b62){_0x313f1c[_0x445a85(0x101)](0x1f4)[_0x445a85(0x14d)]({'success':![],'message':_0x417b62 instanceof Error?_0x417b62[_0x445a85(0x152)]:_0x445a85(0x100)});}}),exports[a19_0x214219(0x142)]=router;