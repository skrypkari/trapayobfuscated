'use strict';const a19_0x4a4659=a19_0x11d2;function a19_0x11d2(_0x394568,_0x4a6478){const _0x3b50c4=a19_0x3b50();return a19_0x11d2=function(_0x11d29d,_0x3bb067){_0x11d29d=_0x11d29d-0x13f;let _0x5a3de4=_0x3b50c4[_0x11d29d];return _0x5a3de4;},a19_0x11d2(_0x394568,_0x4a6478);}(function(_0x2f1239,_0x5e0acb){const _0x5dddb3=a19_0x11d2,_0x4795d5=_0x2f1239();while(!![]){try{const _0x734e54=parseInt(_0x5dddb3(0x1ba))/0x1*(parseInt(_0x5dddb3(0x180))/0x2)+parseInt(_0x5dddb3(0x145))/0x3*(-parseInt(_0x5dddb3(0x154))/0x4)+parseInt(_0x5dddb3(0x163))/0x5*(-parseInt(_0x5dddb3(0x1aa))/0x6)+-parseInt(_0x5dddb3(0x195))/0x7+-parseInt(_0x5dddb3(0x199))/0x8+parseInt(_0x5dddb3(0x189))/0x9*(-parseInt(_0x5dddb3(0x198))/0xa)+parseInt(_0x5dddb3(0x1b5))/0xb*(parseInt(_0x5dddb3(0x142))/0xc);if(_0x734e54===_0x5e0acb)break;else _0x4795d5['push'](_0x4795d5['shift']());}catch(_0x4cf3f1){_0x4795d5['push'](_0x4795d5['shift']());}}}(a19_0x3b50,0xdd99a));var __createBinding=this&&this[a19_0x4a4659(0x1b1)]||(Object[a19_0x4a4659(0x168)]?function(_0x382948,_0x13f249,_0x1e57ca,_0x4e57da){const _0x59f1fe=a19_0x4a4659;if(_0x4e57da===undefined)_0x4e57da=_0x1e57ca;var _0x507d7f=Object['getOwnPropertyDescriptor'](_0x13f249,_0x1e57ca);(!_0x507d7f||(_0x59f1fe(0x15e)in _0x507d7f?!_0x13f249[_0x59f1fe(0x17b)]:_0x507d7f[_0x59f1fe(0x141)]||_0x507d7f['configurable']))&&(_0x507d7f={'enumerable':!![],'get':function(){return _0x13f249[_0x1e57ca];}}),Object[_0x59f1fe(0x196)](_0x382948,_0x4e57da,_0x507d7f);}:function(_0x12d607,_0xfad84a,_0x5c3f5b,_0x27391c){if(_0x27391c===undefined)_0x27391c=_0x5c3f5b;_0x12d607[_0x27391c]=_0xfad84a[_0x5c3f5b];}),__setModuleDefault=this&&this[a19_0x4a4659(0x191)]||(Object['create']?function(_0x31b8b3,_0x3e8fd5){const _0x34423e=a19_0x4a4659;Object['defineProperty'](_0x31b8b3,_0x34423e(0x159),{'enumerable':!![],'value':_0x3e8fd5});}:function(_0x3346b8,_0x3df0f7){const _0x1e91b1=a19_0x4a4659;_0x3346b8[_0x1e91b1(0x159)]=_0x3df0f7;}),__importStar=this&&this[a19_0x4a4659(0x15f)]||(function(){var _0x2f43fc=function(_0x2e8651){const _0x771d9=a19_0x11d2;return _0x2f43fc=Object[_0x771d9(0x165)]||function(_0x4c1ca9){const _0x324f8f=_0x771d9;var _0x59bd2e=[];for(var _0x473bfd in _0x4c1ca9)if(Object['prototype'][_0x324f8f(0x158)][_0x324f8f(0x181)](_0x4c1ca9,_0x473bfd))_0x59bd2e[_0x59bd2e[_0x324f8f(0x17c)]]=_0x473bfd;return _0x59bd2e;},_0x2f43fc(_0x2e8651);};return function(_0x2e1f6c){const _0x149a47=a19_0x11d2;if(_0x2e1f6c&&_0x2e1f6c['__esModule'])return _0x2e1f6c;var _0x3c0d4d={};if(_0x2e1f6c!=null){for(var _0x39b73d=_0x2f43fc(_0x2e1f6c),_0x3f1cb3=0x0;_0x3f1cb3<_0x39b73d[_0x149a47(0x17c)];_0x3f1cb3++)if(_0x39b73d[_0x3f1cb3]!==_0x149a47(0x159))__createBinding(_0x3c0d4d,_0x2e1f6c,_0x39b73d[_0x3f1cb3]);}return __setModuleDefault(_0x3c0d4d,_0x2e1f6c),_0x3c0d4d;};}());function a19_0x3b50(){const _0x27d72e=['getPayoutById','payment','44GBKNHA','call','/payouts','Router','domainMonitoringService','PENDING','/payout','suspendUser','PAID','54ytwKLv','/statistics','createdAt','Failed\x20to\x20get\x20log\x20statistics','\x20days\x20if\x20not\x20paid','then','../services/domainMonitoringService','cleanOldLogs','__setModuleDefault','express','paymentId','deleteUser','385063sCFgxx','defineProperty','Payment\x20not\x20found','3019630UPJVjL','10712488xMzirb','validate','/payout/merchants','checkAuth','CoinToPay\x20automatic\x20status\x20checking\x20service','/users','updateCustomerData','/users/:id','FAILED','Payments\x20automatically\x20expire\x20after\x20','../middleware/validation','log','/payments','❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','getPaymentById','../config/database','getMonitoringStats','13794qBunFI','getUserById','updateUserSchema','/auth','../services/coinToPayStatusService','🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','delete','__createBinding','Failed\x20to\x20perform\x20manual\x20domain\x20check','currency','/logs/clean','11575454gejeTI','findUnique','deletePayout','post','\x20days)','34889rEUzss','getMerchantStatistics','getTime','getPayoutStats','/merchant-statistics','now','createPayout','writable','72hFqfCH','createUserSchema','gatewayPaymentId','338463IAxrgn','../services/loggerService','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','Failed\x20to\x20clean\x20old\x20logs','/payouts/:id','CoinToPay\x20payment\x20status\x20checked\x20successfully','resolve','createPayoutSchema','loggerService','amount','body','put','updateUser','/payments/:id','use','52OrLHWo','/domain-monitoring/stats','/cointopay/payment/:paymentId','../middleware/auth','hasOwnProperty','default','message','status','getMerchantsSelection','AdminController','get','__importStar','/cointopay/stats','../controllers/adminController','cointopay','3265hWHpQh','getMerchantsAwaitingPayout','getOwnPropertyNames','requireAdmin','gateway','create','manualCheck','params','coinToPayStatusService','getPaymentTimerInfo','toISOString','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','/cointopay/check/:paymentId','shop','checkPaymentById','/payments/:id/customer','Failed\x20to\x20get\x20payment\x20information','authenticateToken','getLogStats','EXPIRED','updateCustomerDataSchema','updatedAt','createUser','json','__esModule','length','getStatistics'];a19_0x3b50=function(){return _0x27d72e;};return a19_0x3b50();}Object[a19_0x4a4659(0x196)](exports,a19_0x4a4659(0x17b),{'value':!![]});const express_1=require(a19_0x4a4659(0x192)),adminController_1=require(a19_0x4a4659(0x161)),validation_1=require(a19_0x4a4659(0x1a3)),auth_1=require(a19_0x4a4659(0x157)),loggerService_1=require(a19_0x4a4659(0x146)),coinToPayStatusService_1=require(a19_0x4a4659(0x1ae)),domainMonitoringService_1=require(a19_0x4a4659(0x18f)),router=(0x0,express_1[a19_0x4a4659(0x183)])(),adminController=new adminController_1[(a19_0x4a4659(0x15d))]();router[a19_0x4a4659(0x153)](auth_1[a19_0x4a4659(0x174)],auth_1[a19_0x4a4659(0x166)]),router[a19_0x4a4659(0x15e)](a19_0x4a4659(0x1ad),adminController[a19_0x4a4659(0x19c)]),router[a19_0x4a4659(0x15e)](a19_0x4a4659(0x18a),adminController[a19_0x4a4659(0x17d)]),router[a19_0x4a4659(0x15e)](a19_0x4a4659(0x1be),adminController[a19_0x4a4659(0x1bb)]),router[a19_0x4a4659(0x15e)]('/payout/stats',adminController[a19_0x4a4659(0x1bd)]),router[a19_0x4a4659(0x15e)](a19_0x4a4659(0x19b),adminController[a19_0x4a4659(0x164)]),router['get']('/merchants/selection',adminController[a19_0x4a4659(0x15c)]),router[a19_0x4a4659(0x1b8)](a19_0x4a4659(0x186),(0x0,validation_1[a19_0x4a4659(0x19a)])(validation_1[a19_0x4a4659(0x14c)]),adminController[a19_0x4a4659(0x140)]),router[a19_0x4a4659(0x15e)](a19_0x4a4659(0x182),adminController['getPayouts']),router[a19_0x4a4659(0x15e)](a19_0x4a4659(0x149),adminController[a19_0x4a4659(0x17e)]),router[a19_0x4a4659(0x1b0)](a19_0x4a4659(0x149),adminController[a19_0x4a4659(0x1b7)]),router['get'](a19_0x4a4659(0x1a5),adminController['getPayments']),router[a19_0x4a4659(0x15e)](a19_0x4a4659(0x152),adminController[a19_0x4a4659(0x1a7)]),router[a19_0x4a4659(0x150)](a19_0x4a4659(0x152),adminController['updatePayment']),router['put'](a19_0x4a4659(0x172),(0x0,validation_1[a19_0x4a4659(0x19a)])(validation_1[a19_0x4a4659(0x177)]),adminController[a19_0x4a4659(0x19f)]),router[a19_0x4a4659(0x15e)](a19_0x4a4659(0x19e),adminController['getUsers']),router[a19_0x4a4659(0x15e)](a19_0x4a4659(0x1a0),adminController[a19_0x4a4659(0x1ab)]),router[a19_0x4a4659(0x1b8)]('/users',(0x0,validation_1[a19_0x4a4659(0x19a)])(validation_1[a19_0x4a4659(0x143)]),adminController[a19_0x4a4659(0x179)]),router[a19_0x4a4659(0x150)]('/users/:id',(0x0,validation_1[a19_0x4a4659(0x19a)])(validation_1[a19_0x4a4659(0x1ac)]),adminController[a19_0x4a4659(0x151)]),router[a19_0x4a4659(0x1b0)](a19_0x4a4659(0x1a0),adminController[a19_0x4a4659(0x194)]),router[a19_0x4a4659(0x1b8)]('/users/:id/suspend',adminController[a19_0x4a4659(0x187)]),router[a19_0x4a4659(0x1b8)]('/users/:id/activate',adminController['activateUser']),router[a19_0x4a4659(0x15e)]('/logs/stats',(_0x179367,_0x48e309)=>{const _0x165d14=a19_0x4a4659;try{const _0x3bd444=loggerService_1[_0x165d14(0x14d)][_0x165d14(0x175)]();_0x48e309[_0x165d14(0x17a)]({'success':!![],'result':_0x3bd444});}catch(_0x28a4c7){_0x48e309[_0x165d14(0x15b)](0x1f4)[_0x165d14(0x17a)]({'success':![],'message':_0x165d14(0x18c)});}}),router[a19_0x4a4659(0x1b8)](a19_0x4a4659(0x1b4),(_0x39d8fa,_0x526049)=>{const _0x1b0448=a19_0x4a4659;try{const {daysToKeep:daysToKeep=0x1e}=_0x39d8fa[_0x1b0448(0x14f)];loggerService_1[_0x1b0448(0x14d)][_0x1b0448(0x190)](daysToKeep),_0x526049['json']({'success':!![],'message':'Old\x20logs\x20cleaned\x20(kept\x20last\x20'+daysToKeep+_0x1b0448(0x1b9)});}catch(_0x482a6a){_0x526049[_0x1b0448(0x15b)](0x1f4)[_0x1b0448(0x17a)]({'success':![],'message':_0x1b0448(0x148)});}}),router[a19_0x4a4659(0x1b8)](a19_0x4a4659(0x16f),async(_0x266986,_0x44a083)=>{const _0x34cb9b=a19_0x4a4659;try{const {paymentId:_0x3bc8c4}=_0x266986[_0x34cb9b(0x16a)];console[_0x34cb9b(0x1a4)](_0x34cb9b(0x1af)+_0x3bc8c4),await coinToPayStatusService_1[_0x34cb9b(0x16b)][_0x34cb9b(0x171)](_0x3bc8c4),_0x44a083['json']({'success':!![],'message':_0x34cb9b(0x14a)});}catch(_0xacc7fd){console['error'](_0x34cb9b(0x1a6)+_0x266986[_0x34cb9b(0x16a)][_0x34cb9b(0x193)]+':',_0xacc7fd),_0x44a083[_0x34cb9b(0x15b)](0x1f4)[_0x34cb9b(0x17a)]({'success':![],'message':_0xacc7fd instanceof Error?_0xacc7fd['message']:'Failed\x20to\x20check\x20CoinToPay\x20payment\x20status'});}}),router[a19_0x4a4659(0x15e)](a19_0x4a4659(0x160),(_0x3247e6,_0x1bb306)=>{const _0x246ead=a19_0x4a4659;try{const _0x24cea9=coinToPayStatusService_1[_0x246ead(0x16b)]['getServiceStats']();_0x1bb306['json']({'success':!![],'result':{..._0x24cea9,'description':_0x246ead(0x19d),'statusMapping':{'Paid':_0x246ead(0x188),'Awaiting\x20Fiat':'PENDING','waiting':_0x246ead(0x185),'expired':_0x246ead(0x176),'failed':_0x246ead(0x1a1)},'autoExpiryNote':_0x246ead(0x1a2)+_0x24cea9['expiryDays']+_0x246ead(0x18d),'individualTimersNote':_0x246ead(0x147)}});}catch(_0xa23fc8){_0x1bb306['status'](0x1f4)[_0x246ead(0x17a)]({'success':![],'message':_0x246ead(0x16e)});}}),router[a19_0x4a4659(0x15e)](a19_0x4a4659(0x156),async(_0x233652,_0x27f409)=>{const _0x4ddfdc=a19_0x4a4659;try{const {paymentId:_0x3f4fa9}=_0x233652[_0x4ddfdc(0x16a)],_0x46ef5c=coinToPayStatusService_1[_0x4ddfdc(0x16b)][_0x4ddfdc(0x16c)](_0x3f4fa9),_0x4a79ad=(await Promise[_0x4ddfdc(0x14b)]()[_0x4ddfdc(0x18e)](()=>__importStar(require(_0x4ddfdc(0x1a8)))))[_0x4ddfdc(0x159)],_0x4a9d30=await _0x4a79ad[_0x4ddfdc(0x17f)][_0x4ddfdc(0x1b6)]({'where':{'id':_0x3f4fa9},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x4a9d30)return _0x27f409[_0x4ddfdc(0x15b)](0x194)['json']({'success':![],'message':_0x4ddfdc(0x197)});_0x27f409[_0x4ddfdc(0x17a)]({'success':!![],'result':{'payment':{'id':_0x4a9d30['id'],'gateway':_0x4a9d30[_0x4ddfdc(0x167)],'gatewayPaymentId':_0x4a9d30[_0x4ddfdc(0x144)],'status':_0x4a9d30[_0x4ddfdc(0x15b)],'amount':_0x4a9d30[_0x4ddfdc(0x14e)],'currency':_0x4a9d30[_0x4ddfdc(0x1b3)],'createdAt':_0x4a9d30[_0x4ddfdc(0x18b)],'updatedAt':_0x4a9d30[_0x4ddfdc(0x178)],'shop':_0x4a9d30[_0x4ddfdc(0x170)]},'timers':_0x46ef5c,'isCoinToPay':_0x4a9d30['gateway']===_0x4ddfdc(0x162),'ageInMinutes':Math['floor']((Date[_0x4ddfdc(0x13f)]()-_0x4a9d30[_0x4ddfdc(0x18b)][_0x4ddfdc(0x1bc)]())/(0x3e8*0x3c))}});}catch(_0x275d42){_0x27f409[_0x4ddfdc(0x15b)](0x1f4)[_0x4ddfdc(0x17a)]({'success':![],'message':_0x275d42 instanceof Error?_0x275d42[_0x4ddfdc(0x15a)]:_0x4ddfdc(0x173)});}}),router['get'](a19_0x4a4659(0x155),(_0x9383e4,_0x5296d4)=>{const _0x3675c4=a19_0x4a4659;try{const _0x167e44=domainMonitoringService_1[_0x3675c4(0x184)][_0x3675c4(0x1a9)]();_0x5296d4[_0x3675c4(0x17a)]({'success':!![],'result':{..._0x167e44,'description':'Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','behavior':'Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','encoding':'Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs'}});}catch(_0x31d490){_0x5296d4['status'](0x1f4)['json']({'success':![],'message':'Failed\x20to\x20get\x20domain\x20monitoring\x20statistics'});}}),router[a19_0x4a4659(0x1b8)]('/domain-monitoring/check',async(_0x226634,_0x57c22e)=>{const _0x457d41=a19_0x4a4659;try{const _0x24c9d5=await domainMonitoringService_1[_0x457d41(0x184)][_0x457d41(0x169)]();_0x57c22e[_0x457d41(0x17a)]({'success':!![],'result':{'domainAvailable':_0x24c9d5,'message':_0x24c9d5?'Domain\x20is\x20responding\x20correctly':'Domain\x20check\x20failed','timestamp':new Date()[_0x457d41(0x16d)]()}});}catch(_0x106c30){_0x57c22e[_0x457d41(0x15b)](0x1f4)['json']({'success':![],'message':_0x106c30 instanceof Error?_0x106c30[_0x457d41(0x15a)]:_0x457d41(0x1b2)});}}),exports['default']=router;