'use strict';const a19_0x11445a=a19_0x51da;function a19_0x186d(){const _0x5cbe93=['manualCheck','getPayments','21717GtZGwj','/merchant-statistics','createdAt','createPayout','EXPIRED','payment','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','352YimPbz','../middleware/auth','getMonitoringStats','gatewayPaymentId','paymentId','/users/:id/suspend','getMerchantsAwaitingPayout','cointopay','writable','toISOString','getUserById','getTime','post','/payout','findUnique','__importStar','cleanOldLogs','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','AdminController','/payouts/:id','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','put','getPaymentTimerInfo','domainMonitoringService','__setModuleDefault','default','../middleware/validation','/auth','__esModule','getServiceStats','PENDING','coinToPayStatusService','1917570SmVIYV','loggerService','get','log','createPayoutSchema','updatePayment','deletePayout','10597230vZJwnM','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','796wKWocQ','status','343860NRYdUE','315402OoWNBx','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','Failed\x20to\x20perform\x20manual\x20domain\x20check','gateway','json','currency','/users','call','use','../services/coinToPayStatusService','error','/cointopay/payment/:paymentId','/cointopay/check/:paymentId','/users/:id','/domain-monitoring/stats','createUser','getMerchantsSelection','shop','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','314538HluGTV','body','updateUser','CoinToPay\x20automatic\x20status\x20checking\x20service','getPayouts','now','/payments/:id/customer','updatedAt','Old\x20logs\x20cleaned\x20(kept\x20last\x20','expiryDays','checkPaymentById','/users/:id/activate','express','/logs/stats','deleteUser','/payout/merchants','defineProperty','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','getStatistics','../services/domainMonitoringService','Failed\x20to\x20clean\x20old\x20logs','params','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','Domain\x20is\x20responding\x20correctly','create','Payment\x20not\x20found','Failed\x20to\x20get\x20log\x20statistics','PAID','/payouts','45390stbyQD','\x20days\x20if\x20not\x20paid','validate','then','resolve','getPayoutById','Payments\x20automatically\x20expire\x20after\x20','105kvSyMl','getPaymentById','/payments/:id','configurable','suspendUser','updateCustomerDataSchema','activateUser','hasOwnProperty','/cointopay/stats','getPayoutStats','prototype','message','144zXBZBR','../services/loggerService','/payments','floor','amount','/statistics','../config/database','delete','getUsers'];a19_0x186d=function(){return _0x5cbe93;};return a19_0x186d();}(function(_0xfde4a8,_0x28c59b){const _0x5c8d42=a19_0x51da,_0x149bcd=_0xfde4a8();while(!![]){try{const _0x1e652a=parseInt(_0x5c8d42(0x1b3))/0x1+parseInt(_0x5c8d42(0x1a7))/0x2+-parseInt(_0x5c8d42(0x180))/0x3*(parseInt(_0x5c8d42(0x1b0))/0x4)+-parseInt(_0x5c8d42(0x169))/0x5*(-parseInt(_0x5c8d42(0x1b2))/0x6)+parseInt(_0x5c8d42(0x144))/0x7*(parseInt(_0x5c8d42(0x175))/0x8)+-parseInt(_0x5c8d42(0x1ae))/0x9+parseInt(_0x5c8d42(0x162))/0xa*(parseInt(_0x5c8d42(0x187))/0xb);if(_0x1e652a===_0x28c59b)break;else _0x149bcd['push'](_0x149bcd['shift']());}catch(_0x51b299){_0x149bcd['push'](_0x149bcd['shift']());}}}(a19_0x186d,0xc6a9e));var __createBinding=this&&this['__createBinding']||(Object[a19_0x11445a(0x15d)]?function(_0x488884,_0x5acc72,_0x12da4b,_0x1a5037){const _0x1ad1a5=a19_0x11445a;if(_0x1a5037===undefined)_0x1a5037=_0x12da4b;var _0x2bb8ef=Object['getOwnPropertyDescriptor'](_0x5acc72,_0x12da4b);(!_0x2bb8ef||(_0x1ad1a5(0x1a9)in _0x2bb8ef?!_0x5acc72['__esModule']:_0x2bb8ef[_0x1ad1a5(0x18f)]||_0x2bb8ef[_0x1ad1a5(0x16c)]))&&(_0x2bb8ef={'enumerable':!![],'get':function(){return _0x5acc72[_0x12da4b];}}),Object[_0x1ad1a5(0x154)](_0x488884,_0x1a5037,_0x2bb8ef);}:function(_0x6e132d,_0x223e02,_0x1235d6,_0x546c2f){if(_0x546c2f===undefined)_0x546c2f=_0x1235d6;_0x6e132d[_0x546c2f]=_0x223e02[_0x1235d6];}),__setModuleDefault=this&&this[a19_0x11445a(0x19f)]||(Object['create']?function(_0x4f043e,_0x517948){const _0x132df7=a19_0x11445a;Object[_0x132df7(0x154)](_0x4f043e,'default',{'enumerable':!![],'value':_0x517948});}:function(_0x3d6e72,_0x3e62a4){const _0x96e2d4=a19_0x11445a;_0x3d6e72[_0x96e2d4(0x1a0)]=_0x3e62a4;}),__importStar=this&&this[a19_0x11445a(0x196)]||(function(){var _0x3c02e1=function(_0x281561){return _0x3c02e1=Object['getOwnPropertyNames']||function(_0x1c27ec){const _0x55b7e6=a19_0x51da;var _0x43b6ba=[];for(var _0x7b216f in _0x1c27ec)if(Object[_0x55b7e6(0x173)][_0x55b7e6(0x170)][_0x55b7e6(0x138)](_0x1c27ec,_0x7b216f))_0x43b6ba[_0x43b6ba['length']]=_0x7b216f;return _0x43b6ba;},_0x3c02e1(_0x281561);};return function(_0x47da5a){const _0x56a917=a19_0x51da;if(_0x47da5a&&_0x47da5a['__esModule'])return _0x47da5a;var _0x5a6a2b={};if(_0x47da5a!=null){for(var _0x41cde8=_0x3c02e1(_0x47da5a),_0x40e068=0x0;_0x40e068<_0x41cde8['length'];_0x40e068++)if(_0x41cde8[_0x40e068]!==_0x56a917(0x1a0))__createBinding(_0x5a6a2b,_0x47da5a,_0x41cde8[_0x40e068]);}return __setModuleDefault(_0x5a6a2b,_0x47da5a),_0x5a6a2b;};}());Object[a19_0x11445a(0x154)](exports,a19_0x11445a(0x1a3),{'value':!![]});function a19_0x51da(_0x58764d,_0x26c343){const _0x186da3=a19_0x186d();return a19_0x51da=function(_0x51da2f,_0x1fff6d){_0x51da2f=_0x51da2f-0x138;let _0x1ef155=_0x186da3[_0x51da2f];return _0x1ef155;},a19_0x51da(_0x58764d,_0x26c343);}const express_1=require(a19_0x11445a(0x150)),adminController_1=require('../controllers/adminController'),validation_1=require(a19_0x11445a(0x1a1)),auth_1=require(a19_0x11445a(0x188)),loggerService_1=require(a19_0x11445a(0x176)),coinToPayStatusService_1=require(a19_0x11445a(0x13a)),domainMonitoringService_1=require(a19_0x11445a(0x158)),router=(0x0,express_1['Router'])(),adminController=new adminController_1[(a19_0x11445a(0x199))]();router[a19_0x11445a(0x139)](auth_1['authenticateToken'],auth_1['requireAdmin']),router[a19_0x11445a(0x1a9)](a19_0x11445a(0x1a2),adminController['checkAuth']),router[a19_0x11445a(0x1a9)](a19_0x11445a(0x17a),adminController[a19_0x11445a(0x157)]),router['get'](a19_0x11445a(0x181),adminController['getMerchantStatistics']),router[a19_0x11445a(0x1a9)]('/payout/stats',adminController[a19_0x11445a(0x172)]),router[a19_0x11445a(0x1a9)](a19_0x11445a(0x153),adminController[a19_0x11445a(0x18d)]),router[a19_0x11445a(0x1a9)]('/merchants/selection',adminController[a19_0x11445a(0x141)]),router[a19_0x11445a(0x193)](a19_0x11445a(0x194),(0x0,validation_1[a19_0x11445a(0x164)])(validation_1[a19_0x11445a(0x1ab)]),adminController[a19_0x11445a(0x183)]),router[a19_0x11445a(0x1a9)](a19_0x11445a(0x161),adminController[a19_0x11445a(0x148)]),router[a19_0x11445a(0x1a9)]('/payouts/:id',adminController[a19_0x11445a(0x167)]),router[a19_0x11445a(0x17c)](a19_0x11445a(0x19a),adminController[a19_0x11445a(0x1ad)]),router['get'](a19_0x11445a(0x177),adminController[a19_0x11445a(0x17f)]),router['get'](a19_0x11445a(0x16b),adminController[a19_0x11445a(0x16a)]),router[a19_0x11445a(0x19c)](a19_0x11445a(0x16b),adminController[a19_0x11445a(0x1ac)]),router[a19_0x11445a(0x19c)](a19_0x11445a(0x14a),(0x0,validation_1[a19_0x11445a(0x164)])(validation_1[a19_0x11445a(0x16e)]),adminController['updateCustomerData']),router[a19_0x11445a(0x1a9)]('/users',adminController[a19_0x11445a(0x17d)]),router[a19_0x11445a(0x1a9)](a19_0x11445a(0x13e),adminController[a19_0x11445a(0x191)]),router['post'](a19_0x11445a(0x1b9),(0x0,validation_1['validate'])(validation_1['createUserSchema']),adminController[a19_0x11445a(0x140)]),router[a19_0x11445a(0x19c)](a19_0x11445a(0x13e),(0x0,validation_1[a19_0x11445a(0x164)])(validation_1['updateUserSchema']),adminController[a19_0x11445a(0x146)]),router[a19_0x11445a(0x17c)]('/users/:id',adminController[a19_0x11445a(0x152)]),router[a19_0x11445a(0x193)](a19_0x11445a(0x18c),adminController[a19_0x11445a(0x16d)]),router['post'](a19_0x11445a(0x14f),adminController[a19_0x11445a(0x16f)]),router[a19_0x11445a(0x1a9)](a19_0x11445a(0x151),(_0x378b12,_0x5f535a)=>{const _0x5a952a=a19_0x11445a;try{const _0x1c1c95=loggerService_1[_0x5a952a(0x1a8)]['getLogStats']();_0x5f535a[_0x5a952a(0x1b7)]({'success':!![],'result':_0x1c1c95});}catch(_0x315ee2){_0x5f535a[_0x5a952a(0x1b1)](0x1f4)[_0x5a952a(0x1b7)]({'success':![],'message':_0x5a952a(0x15f)});}}),router[a19_0x11445a(0x193)]('/logs/clean',(_0x4bc5bd,_0xd6dee9)=>{const _0x39d7f4=a19_0x11445a;try{const {daysToKeep:daysToKeep=0x1e}=_0x4bc5bd[_0x39d7f4(0x145)];loggerService_1['loggerService'][_0x39d7f4(0x197)](daysToKeep),_0xd6dee9[_0x39d7f4(0x1b7)]({'success':!![],'message':_0x39d7f4(0x14c)+daysToKeep+'\x20days)'});}catch(_0x318dd5){_0xd6dee9['status'](0x1f4)['json']({'success':![],'message':_0x39d7f4(0x159)});}}),router[a19_0x11445a(0x193)](a19_0x11445a(0x13d),async(_0x433ac1,_0x5b13bb)=>{const _0x385a7c=a19_0x11445a;try{const {paymentId:_0x335f8f}=_0x433ac1[_0x385a7c(0x15a)];console[_0x385a7c(0x1aa)](_0x385a7c(0x19b)+_0x335f8f),await coinToPayStatusService_1[_0x385a7c(0x1a6)][_0x385a7c(0x14e)](_0x335f8f),_0x5b13bb[_0x385a7c(0x1b7)]({'success':!![],'message':'CoinToPay\x20payment\x20status\x20checked\x20successfully'});}catch(_0x229452){console[_0x385a7c(0x13b)](_0x385a7c(0x156)+_0x433ac1[_0x385a7c(0x15a)][_0x385a7c(0x18b)]+':',_0x229452),_0x5b13bb[_0x385a7c(0x1b1)](0x1f4)[_0x385a7c(0x1b7)]({'success':![],'message':_0x229452 instanceof Error?_0x229452['message']:_0x385a7c(0x1b4)});}}),router[a19_0x11445a(0x1a9)](a19_0x11445a(0x171),(_0x14ae05,_0x4109e8)=>{const _0x3d93a4=a19_0x11445a;try{const _0x476103=coinToPayStatusService_1[_0x3d93a4(0x1a6)][_0x3d93a4(0x1a4)]();_0x4109e8[_0x3d93a4(0x1b7)]({'success':!![],'result':{..._0x476103,'description':_0x3d93a4(0x147),'statusMapping':{'Paid':_0x3d93a4(0x160),'Awaiting\x20Fiat':_0x3d93a4(0x1a5),'waiting':_0x3d93a4(0x1a5),'expired':_0x3d93a4(0x184),'failed':'FAILED'},'autoExpiryNote':_0x3d93a4(0x168)+_0x476103[_0x3d93a4(0x14d)]+_0x3d93a4(0x163),'individualTimersNote':_0x3d93a4(0x198)}});}catch(_0x395872){_0x4109e8[_0x3d93a4(0x1b1)](0x1f4)['json']({'success':![],'message':_0x3d93a4(0x155)});}}),router[a19_0x11445a(0x1a9)](a19_0x11445a(0x13c),async(_0x20e667,_0x233dc7)=>{const _0x4b001b=a19_0x11445a;try{const {paymentId:_0x3c443a}=_0x20e667[_0x4b001b(0x15a)],_0x2c1cd2=coinToPayStatusService_1[_0x4b001b(0x1a6)][_0x4b001b(0x19d)](_0x3c443a),_0x362c5d=(await Promise[_0x4b001b(0x166)]()[_0x4b001b(0x165)](()=>__importStar(require(_0x4b001b(0x17b)))))[_0x4b001b(0x1a0)],_0x25e5da=await _0x362c5d[_0x4b001b(0x185)][_0x4b001b(0x195)]({'where':{'id':_0x3c443a},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x25e5da)return _0x233dc7['status'](0x194)[_0x4b001b(0x1b7)]({'success':![],'message':_0x4b001b(0x15e)});_0x233dc7[_0x4b001b(0x1b7)]({'success':!![],'result':{'payment':{'id':_0x25e5da['id'],'gateway':_0x25e5da[_0x4b001b(0x1b6)],'gatewayPaymentId':_0x25e5da[_0x4b001b(0x18a)],'status':_0x25e5da[_0x4b001b(0x1b1)],'amount':_0x25e5da[_0x4b001b(0x179)],'currency':_0x25e5da[_0x4b001b(0x1b8)],'createdAt':_0x25e5da[_0x4b001b(0x182)],'updatedAt':_0x25e5da[_0x4b001b(0x14b)],'shop':_0x25e5da[_0x4b001b(0x142)]},'timers':_0x2c1cd2,'isCoinToPay':_0x25e5da[_0x4b001b(0x1b6)]===_0x4b001b(0x18e),'ageInMinutes':Math[_0x4b001b(0x178)]((Date[_0x4b001b(0x149)]()-_0x25e5da[_0x4b001b(0x182)][_0x4b001b(0x192)]())/(0x3e8*0x3c))}});}catch(_0x41e15a){_0x233dc7[_0x4b001b(0x1b1)](0x1f4)[_0x4b001b(0x1b7)]({'success':![],'message':_0x41e15a instanceof Error?_0x41e15a[_0x4b001b(0x174)]:'Failed\x20to\x20get\x20payment\x20information'});}}),router[a19_0x11445a(0x1a9)](a19_0x11445a(0x13f),(_0x5b2a32,_0x253b6e)=>{const _0x4ff806=a19_0x11445a;try{const _0x378397=domainMonitoringService_1[_0x4ff806(0x19e)][_0x4ff806(0x189)]();_0x253b6e['json']({'success':!![],'result':{..._0x378397,'description':_0x4ff806(0x186),'behavior':_0x4ff806(0x143),'encoding':_0x4ff806(0x15b)}});}catch(_0xe464d7){_0x253b6e[_0x4ff806(0x1b1)](0x1f4)[_0x4ff806(0x1b7)]({'success':![],'message':_0x4ff806(0x1af)});}}),router[a19_0x11445a(0x193)]('/domain-monitoring/check',async(_0x5672e7,_0x16af86)=>{const _0xf39ee3=a19_0x11445a;try{const _0x261962=await domainMonitoringService_1[_0xf39ee3(0x19e)][_0xf39ee3(0x17e)]();_0x16af86[_0xf39ee3(0x1b7)]({'success':!![],'result':{'domainAvailable':_0x261962,'message':_0x261962?_0xf39ee3(0x15c):'Domain\x20check\x20failed','timestamp':new Date()[_0xf39ee3(0x190)]()}});}catch(_0x395c83){_0x16af86['status'](0x1f4)['json']({'success':![],'message':_0x395c83 instanceof Error?_0x395c83['message']:_0xf39ee3(0x1b5)});}}),exports[a19_0x11445a(0x1a0)]=router;