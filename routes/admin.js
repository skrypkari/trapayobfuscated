'use strict';function a19_0x5b42(_0x396faf,_0x33824b){const _0x16d1af=a19_0x16d1();return a19_0x5b42=function(_0x5b423b,_0x47351c){_0x5b423b=_0x5b423b-0xc2;let _0x408a68=_0x16d1af[_0x5b423b];return _0x408a68;},a19_0x5b42(_0x396faf,_0x33824b);}const a19_0x11717d=a19_0x5b42;function a19_0x16d1(){const _0x492e=['/payout','createPayout','getPaymentTimerInfo','shop','1076736RnfvhL','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','/cointopay/stats','updatedAt','getPayments','CoinToPay\x20automatic\x20status\x20checking\x20service','domainMonitoringService','status','updatePayment','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','getOwnPropertyDescriptor','getServiceStats','post','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','express','4rcGpvq','error','paymentId','requireAdmin','/payouts/:id','getUserById','/auth','payment','Failed\x20to\x20perform\x20manual\x20domain\x20check','createPayoutSchema','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','getMerchantsSelection','Failed\x20to\x20get\x20log\x20statistics','PAID','Payments\x20automatically\x20expire\x20after\x20','Domain\x20check\x20failed','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','../services/loggerService','2422880cUknKx','/payments/:id','getMerchantsAwaitingPayout','1330910hFsYjO','coinToPayStatusService','../middleware/validation','floor','/users/:id/activate','getPayoutById','create','configurable','json','then','/statistics','getLogStats','delete','put','/users','createdAt','/payments','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','/domain-monitoring/check','/payments/:id/customer','EXPIRED','cleanOldLogs','body','getPayoutStats','__importStar','validate','manualCheck','gatewayPaymentId','/users/:id','2725702hxoQnC','hasOwnProperty','now','__setModuleDefault','../services/coinToPayStatusService','message','Domain\x20is\x20responding\x20correctly','9nwxntm','call','Failed\x20to\x20get\x20payment\x20information','16539aHMBdt','activateUser','currency','prototype','../middleware/auth','updateUserSchema','deleteUser','getMonitoringStats','deletePayout','359136JIMAbu','updateCustomerDataSchema','11IjCKxq','Router','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','11394DkvIAg','Failed\x20to\x20clean\x20old\x20logs','/payout/merchants','70NlWGnU','use','getUsers','../config/database','/logs/clean','defineProperty','checkAuth','toISOString','updateUser','getPayouts','getStatistics','params','getMerchantStatistics','get','/users/:id/suspend','log','/logs/stats','findUnique','/payout/stats','/merchant-statistics','\x20days\x20if\x20not\x20paid','default','\x20days)','createUserSchema','PENDING','__esModule','getOwnPropertyNames','authenticateToken','gateway','/merchants/selection','updateCustomerData'];a19_0x16d1=function(){return _0x492e;};return a19_0x16d1();}(function(_0x250c30,_0x361bb4){const _0x404fe0=a19_0x5b42,_0x2b73aa=_0x250c30();while(!![]){try{const _0x49bf8e=parseInt(_0x404fe0(0xff))/0x1+-parseInt(_0x404fe0(0x12a))/0x2+parseInt(_0x404fe0(0xf6))/0x3*(parseInt(_0x404fe0(0x13b))/0x4)+parseInt(_0x404fe0(0x107))/0x5*(-parseInt(_0x404fe0(0x104))/0x6)+parseInt(_0x404fe0(0xec))/0x7+parseInt(_0x404fe0(0xcc))/0x8*(parseInt(_0x404fe0(0xf3))/0x9)+parseInt(_0x404fe0(0xcf))/0xa*(-parseInt(_0x404fe0(0x101))/0xb);if(_0x49bf8e===_0x361bb4)break;else _0x2b73aa['push'](_0x2b73aa['shift']());}catch(_0x2f54c0){_0x2b73aa['push'](_0x2b73aa['shift']());}}}(a19_0x16d1,0x579c2));var __createBinding=this&&this['__createBinding']||(Object[a19_0x11717d(0xd5)]?function(_0x5427f3,_0x4de945,_0x31ad3e,_0x1319cc){const _0x354655=a19_0x11717d;if(_0x1319cc===undefined)_0x1319cc=_0x31ad3e;var _0xe00ecb=Object[_0x354655(0x136)](_0x4de945,_0x31ad3e);(!_0xe00ecb||(_0x354655(0x114)in _0xe00ecb?!_0x4de945[_0x354655(0x120)]:_0xe00ecb['writable']||_0xe00ecb[_0x354655(0xd6)]))&&(_0xe00ecb={'enumerable':!![],'get':function(){return _0x4de945[_0x31ad3e];}}),Object['defineProperty'](_0x5427f3,_0x1319cc,_0xe00ecb);}:function(_0x236e12,_0x24aa1b,_0x51075b,_0x55e29d){if(_0x55e29d===undefined)_0x55e29d=_0x51075b;_0x236e12[_0x55e29d]=_0x24aa1b[_0x51075b];}),__setModuleDefault=this&&this[a19_0x11717d(0xef)]||(Object['create']?function(_0x5089d4,_0x19b92c){const _0x5b909b=a19_0x11717d;Object[_0x5b909b(0x10c)](_0x5089d4,_0x5b909b(0x11c),{'enumerable':!![],'value':_0x19b92c});}:function(_0x12b4fa,_0x2d19f1){const _0x3b04af=a19_0x11717d;_0x12b4fa[_0x3b04af(0x11c)]=_0x2d19f1;}),__importStar=this&&this[a19_0x11717d(0xe7)]||(function(){var _0x1ed8c0=function(_0x327845){const _0x1f78c2=a19_0x5b42;return _0x1ed8c0=Object[_0x1f78c2(0x121)]||function(_0xccf1cc){const _0x57a114=_0x1f78c2;var _0x4bd66e=[];for(var _0x1dbc05 in _0xccf1cc)if(Object[_0x57a114(0xf9)][_0x57a114(0xed)][_0x57a114(0xf4)](_0xccf1cc,_0x1dbc05))_0x4bd66e[_0x4bd66e['length']]=_0x1dbc05;return _0x4bd66e;},_0x1ed8c0(_0x327845);};return function(_0x4942f0){const _0x15d7eb=a19_0x5b42;if(_0x4942f0&&_0x4942f0['__esModule'])return _0x4942f0;var _0x5488f3={};if(_0x4942f0!=null){for(var _0x3367b3=_0x1ed8c0(_0x4942f0),_0x3afc41=0x0;_0x3afc41<_0x3367b3['length'];_0x3afc41++)if(_0x3367b3[_0x3afc41]!==_0x15d7eb(0x11c))__createBinding(_0x5488f3,_0x4942f0,_0x3367b3[_0x3afc41]);}return __setModuleDefault(_0x5488f3,_0x4942f0),_0x5488f3;};}());Object['defineProperty'](exports,a19_0x11717d(0x120),{'value':!![]});const express_1=require(a19_0x11717d(0x13a)),adminController_1=require('../controllers/adminController'),validation_1=require(a19_0x11717d(0xd1)),auth_1=require(a19_0x11717d(0xfa)),loggerService_1=require(a19_0x11717d(0xcb)),coinToPayStatusService_1=require(a19_0x11717d(0xf0)),domainMonitoringService_1=require('../services/domainMonitoringService'),router=(0x0,express_1[a19_0x11717d(0x102)])(),adminController=new adminController_1['AdminController']();router[a19_0x11717d(0x108)](auth_1[a19_0x11717d(0x122)],auth_1[a19_0x11717d(0x13e)]),router[a19_0x11717d(0x114)](a19_0x11717d(0x141),adminController[a19_0x11717d(0x10d)]),router[a19_0x11717d(0x114)](a19_0x11717d(0xd9),adminController[a19_0x11717d(0x111)]),router[a19_0x11717d(0x114)](a19_0x11717d(0x11a),adminController[a19_0x11717d(0x113)]),router[a19_0x11717d(0x114)](a19_0x11717d(0x119),adminController[a19_0x11717d(0xe6)]),router[a19_0x11717d(0x114)](a19_0x11717d(0x106),adminController[a19_0x11717d(0xce)]),router[a19_0x11717d(0x114)](a19_0x11717d(0x124),adminController[a19_0x11717d(0xc5)]),router[a19_0x11717d(0x138)](a19_0x11717d(0x126),(0x0,validation_1['validate'])(validation_1[a19_0x11717d(0xc3)]),adminController[a19_0x11717d(0x127)]),router[a19_0x11717d(0x114)]('/payouts',adminController[a19_0x11717d(0x110)]),router[a19_0x11717d(0x114)](a19_0x11717d(0x13f),adminController[a19_0x11717d(0xd4)]),router['delete'](a19_0x11717d(0x13f),adminController[a19_0x11717d(0xfe)]),router[a19_0x11717d(0x114)](a19_0x11717d(0xdf),adminController[a19_0x11717d(0x130)]),router[a19_0x11717d(0x114)](a19_0x11717d(0xcd),adminController['getPaymentById']),router[a19_0x11717d(0xdc)](a19_0x11717d(0xcd),adminController[a19_0x11717d(0x134)]),router[a19_0x11717d(0xdc)](a19_0x11717d(0xe2),(0x0,validation_1[a19_0x11717d(0xe8)])(validation_1[a19_0x11717d(0x100)]),adminController[a19_0x11717d(0x125)]),router[a19_0x11717d(0x114)]('/users',adminController[a19_0x11717d(0x109)]),router[a19_0x11717d(0x114)](a19_0x11717d(0xeb),adminController[a19_0x11717d(0x140)]),router['post'](a19_0x11717d(0xdd),(0x0,validation_1['validate'])(validation_1[a19_0x11717d(0x11e)]),adminController['createUser']),router[a19_0x11717d(0xdc)]('/users/:id',(0x0,validation_1[a19_0x11717d(0xe8)])(validation_1[a19_0x11717d(0xfb)]),adminController[a19_0x11717d(0x10f)]),router[a19_0x11717d(0xdb)](a19_0x11717d(0xeb),adminController[a19_0x11717d(0xfc)]),router['post'](a19_0x11717d(0x115),adminController['suspendUser']),router[a19_0x11717d(0x138)](a19_0x11717d(0xd3),adminController[a19_0x11717d(0xf7)]),router[a19_0x11717d(0x114)](a19_0x11717d(0x117),(_0x29f2fd,_0x3ed394)=>{const _0x14df11=a19_0x11717d;try{const _0x1bec83=loggerService_1['loggerService'][_0x14df11(0xda)]();_0x3ed394[_0x14df11(0xd7)]({'success':!![],'result':_0x1bec83});}catch(_0x2d2073){_0x3ed394[_0x14df11(0x133)](0x1f4)['json']({'success':![],'message':_0x14df11(0xc6)});}}),router[a19_0x11717d(0x138)](a19_0x11717d(0x10b),(_0x405537,_0x43d50e)=>{const _0xff8c86=a19_0x11717d;try{const {daysToKeep:daysToKeep=0x1e}=_0x405537[_0xff8c86(0xe5)];loggerService_1['loggerService'][_0xff8c86(0xe4)](daysToKeep),_0x43d50e['json']({'success':!![],'message':'Old\x20logs\x20cleaned\x20(kept\x20last\x20'+daysToKeep+_0xff8c86(0x11d)});}catch(_0x8da7aa){_0x43d50e[_0xff8c86(0x133)](0x1f4)[_0xff8c86(0xd7)]({'success':![],'message':_0xff8c86(0x105)});}}),router[a19_0x11717d(0x138)]('/cointopay/check/:paymentId',async(_0x537af8,_0x33fef6)=>{const _0x57016e=a19_0x11717d;try{const {paymentId:_0x486ba6}=_0x537af8[_0x57016e(0x112)];console[_0x57016e(0x116)](_0x57016e(0x139)+_0x486ba6),await coinToPayStatusService_1[_0x57016e(0xd0)]['checkPaymentById'](_0x486ba6),_0x33fef6[_0x57016e(0xd7)]({'success':!![],'message':'CoinToPay\x20payment\x20status\x20checked\x20successfully'});}catch(_0x3d6496){console[_0x57016e(0x13c)](_0x57016e(0x12c)+_0x537af8['params'][_0x57016e(0x13d)]+':',_0x3d6496),_0x33fef6['status'](0x1f4)[_0x57016e(0xd7)]({'success':![],'message':_0x3d6496 instanceof Error?_0x3d6496['message']:_0x57016e(0xca)});}}),router['get'](a19_0x11717d(0x12e),(_0x151b0a,_0xcf0820)=>{const _0x37eadd=a19_0x11717d;try{const _0x372ac7=coinToPayStatusService_1[_0x37eadd(0xd0)][_0x37eadd(0x137)]();_0xcf0820['json']({'success':!![],'result':{..._0x372ac7,'description':_0x37eadd(0x131),'statusMapping':{'Paid':_0x37eadd(0xc7),'Awaiting\x20Fiat':_0x37eadd(0x11f),'waiting':_0x37eadd(0x11f),'expired':_0x37eadd(0xe3),'failed':'FAILED'},'autoExpiryNote':_0x37eadd(0xc8)+_0x372ac7['expiryDays']+_0x37eadd(0x11b),'individualTimersNote':_0x37eadd(0xc4)}});}catch(_0x460975){_0xcf0820[_0x37eadd(0x133)](0x1f4)[_0x37eadd(0xd7)]({'success':![],'message':_0x37eadd(0xe0)});}}),router[a19_0x11717d(0x114)]('/cointopay/payment/:paymentId',async(_0x326b81,_0x219c1a)=>{const _0x5b483=a19_0x11717d;try{const {paymentId:_0x3d6bcd}=_0x326b81[_0x5b483(0x112)],_0x55ee67=coinToPayStatusService_1['coinToPayStatusService'][_0x5b483(0x128)](_0x3d6bcd),_0x3f57c0=(await Promise['resolve']()[_0x5b483(0xd8)](()=>__importStar(require(_0x5b483(0x10a)))))['default'],_0x5c523e=await _0x3f57c0[_0x5b483(0x142)][_0x5b483(0x118)]({'where':{'id':_0x3d6bcd},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x5c523e)return _0x219c1a[_0x5b483(0x133)](0x194)[_0x5b483(0xd7)]({'success':![],'message':'Payment\x20not\x20found'});_0x219c1a['json']({'success':!![],'result':{'payment':{'id':_0x5c523e['id'],'gateway':_0x5c523e['gateway'],'gatewayPaymentId':_0x5c523e[_0x5b483(0xea)],'status':_0x5c523e[_0x5b483(0x133)],'amount':_0x5c523e['amount'],'currency':_0x5c523e[_0x5b483(0xf8)],'createdAt':_0x5c523e['createdAt'],'updatedAt':_0x5c523e[_0x5b483(0x12f)],'shop':_0x5c523e[_0x5b483(0x129)]},'timers':_0x55ee67,'isCoinToPay':_0x5c523e[_0x5b483(0x123)]==='cointopay','ageInMinutes':Math[_0x5b483(0xd2)]((Date[_0x5b483(0xee)]()-_0x5c523e[_0x5b483(0xde)]['getTime']())/(0x3e8*0x3c))}});}catch(_0x3530c9){_0x219c1a[_0x5b483(0x133)](0x1f4)['json']({'success':![],'message':_0x3530c9 instanceof Error?_0x3530c9[_0x5b483(0xf1)]:_0x5b483(0xf5)});}}),router[a19_0x11717d(0x114)]('/domain-monitoring/stats',(_0x533b99,_0x3325a7)=>{const _0x4b397e=a19_0x11717d;try{const _0x180109=domainMonitoringService_1[_0x4b397e(0x132)][_0x4b397e(0xfd)]();_0x3325a7[_0x4b397e(0xd7)]({'success':!![],'result':{..._0x180109,'description':_0x4b397e(0x103),'behavior':_0x4b397e(0x12b),'encoding':_0x4b397e(0x135)}});}catch(_0x32e9f5){_0x3325a7[_0x4b397e(0x133)](0x1f4)[_0x4b397e(0xd7)]({'success':![],'message':_0x4b397e(0x12d)});}}),router['post'](a19_0x11717d(0xe1),async(_0x5a944d,_0x31b461)=>{const _0x555484=a19_0x11717d;try{const _0x1dcfc4=await domainMonitoringService_1[_0x555484(0x132)][_0x555484(0xe9)]();_0x31b461[_0x555484(0xd7)]({'success':!![],'result':{'domainAvailable':_0x1dcfc4,'message':_0x1dcfc4?_0x555484(0xf2):_0x555484(0xc9),'timestamp':new Date()[_0x555484(0x10e)]()}});}catch(_0x561d98){_0x31b461['status'](0x1f4)['json']({'success':![],'message':_0x561d98 instanceof Error?_0x561d98['message']:_0x555484(0xc2)});}}),exports[a19_0x11717d(0x11c)]=router;