'use strict';function a19_0x37fa(){const _0xf7afbc=['getTime','getStatistics','getOwnPropertyDescriptor','1717788axPGUB','expiryDays','length','shop','resolve','EXPIRED','error','log','getLogStats','amount','/payouts','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','/payments/:id/customer','writable','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','toISOString','params','/payout','defineProperty','body','10293084DASaOp','getPaymentTimerInfo','558WTPvWq','delete','getPayoutById','/logs/clean','Domain\x20check\x20failed','/merchant-statistics','createPayoutSchema','/payouts/:id','use','getPaymentById','cointopay','updateUserSchema','/payments','get','FAILED','paymentId','Payment\x20not\x20found','getMerchantStatistics','createUser','createUserSchema','message','CoinToPay\x20payment\x20status\x20checked\x20successfully','/payout/stats','178oiDDkt','4405BPNWGM','checkPaymentById','default','/cointopay/payment/:paymentId','__esModule','__importStar','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','Failed\x20to\x20perform\x20manual\x20domain\x20check','/cointopay/stats','../services/domainMonitoringService','349813mZGVAZ','coinToPayStatusService','post','manualCheck','status','getPayouts','PENDING','payment','/domain-monitoring/check','CoinToPay\x20automatic\x20status\x20checking\x20service','PAID','getPayments','Payments\x20automatically\x20expire\x20after\x20','\x20days)','getOwnPropertyNames','../config/database','suspendUser','createdAt','/payments/:id','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','activateUser','gateway','then','call','floor','create','deleteUser','Failed\x20to\x20get\x20payment\x20information','2641387GpAuly','Domain\x20is\x20responding\x20correctly','put','/users','/auth','../middleware/auth','gatewayPaymentId','findUnique','../middleware/validation','/cointopay/check/:paymentId','currency','../services/coinToPayStatusService','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','json','validate','10173yPhsRh','/domain-monitoring/stats','getMonitoringStats','updateCustomerDataSchema','/users/:id','configurable','/payout/merchants','getUserById','createPayout','updatedAt','getServiceStats','1309400gHgQLv'];a19_0x37fa=function(){return _0xf7afbc;};return a19_0x37fa();}const a19_0xfa44e=a19_0x190f;(function(_0x4d73a4,_0x19e252){const _0x2c27fb=a19_0x190f,_0x435c74=_0x4d73a4();while(!![]){try{const _0x4dd152=parseInt(_0x2c27fb(0x16c))/0x1+parseInt(_0x2c27fb(0x161))/0x2*(parseInt(_0x2c27fb(0x197))/0x3)+parseInt(_0x2c27fb(0x1a6))/0x4+parseInt(_0x2c27fb(0x162))/0x5*(parseInt(_0x2c27fb(0x14a))/0x6)+parseInt(_0x2c27fb(0x188))/0x7+-parseInt(_0x2c27fb(0x1a2))/0x8+-parseInt(_0x2c27fb(0x1bb))/0x9;if(_0x4dd152===_0x19e252)break;else _0x435c74['push'](_0x435c74['shift']());}catch(_0x50113e){_0x435c74['push'](_0x435c74['shift']());}}}(a19_0x37fa,0x38e16));function a19_0x190f(_0x4eb6ac,_0x2f598e){const _0x37fa46=a19_0x37fa();return a19_0x190f=function(_0x190f5b,_0x2756a5){_0x190f5b=_0x190f5b-0x14a;let _0x350d07=_0x37fa46[_0x190f5b];return _0x350d07;},a19_0x190f(_0x4eb6ac,_0x2f598e);}var __createBinding=this&&this['__createBinding']||(Object[a19_0xfa44e(0x185)]?function(_0x4213df,_0x57b108,_0x21fe4e,_0xb64d03){const _0x492229=a19_0xfa44e;if(_0xb64d03===undefined)_0xb64d03=_0x21fe4e;var _0x165e95=Object[_0x492229(0x1a5)](_0x57b108,_0x21fe4e);(!_0x165e95||(_0x492229(0x157)in _0x165e95?!_0x57b108['__esModule']:_0x165e95[_0x492229(0x1b4)]||_0x165e95[_0x492229(0x19c)]))&&(_0x165e95={'enumerable':!![],'get':function(){return _0x57b108[_0x21fe4e];}}),Object[_0x492229(0x1b9)](_0x4213df,_0xb64d03,_0x165e95);}:function(_0x5334f3,_0x269c0c,_0x3a26f9,_0x5a3008){if(_0x5a3008===undefined)_0x5a3008=_0x3a26f9;_0x5334f3[_0x5a3008]=_0x269c0c[_0x3a26f9];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a19_0xfa44e(0x185)]?function(_0x249ae9,_0x508270){const _0x556e14=a19_0xfa44e;Object['defineProperty'](_0x249ae9,_0x556e14(0x164),{'enumerable':!![],'value':_0x508270});}:function(_0x27d390,_0x5a7395){const _0x38089c=a19_0xfa44e;_0x27d390[_0x38089c(0x164)]=_0x5a7395;}),__importStar=this&&this[a19_0xfa44e(0x167)]||(function(){var _0xe13bba=function(_0x14634a){const _0x4a9680=a19_0x190f;return _0xe13bba=Object[_0x4a9680(0x17a)]||function(_0x168987){const _0x592f89=_0x4a9680;var _0xcce800=[];for(var _0x34ce94 in _0x168987)if(Object['prototype']['hasOwnProperty'][_0x592f89(0x183)](_0x168987,_0x34ce94))_0xcce800[_0xcce800[_0x592f89(0x1a8)]]=_0x34ce94;return _0xcce800;},_0xe13bba(_0x14634a);};return function(_0x4dae47){const _0x4de702=a19_0x190f;if(_0x4dae47&&_0x4dae47[_0x4de702(0x166)])return _0x4dae47;var _0x5651d4={};if(_0x4dae47!=null){for(var _0x234602=_0xe13bba(_0x4dae47),_0x39bf5f=0x0;_0x39bf5f<_0x234602['length'];_0x39bf5f++)if(_0x234602[_0x39bf5f]!==_0x4de702(0x164))__createBinding(_0x5651d4,_0x4dae47,_0x234602[_0x39bf5f]);}return __setModuleDefault(_0x5651d4,_0x4dae47),_0x5651d4;};}());Object[a19_0xfa44e(0x1b9)](exports,a19_0xfa44e(0x166),{'value':!![]});const express_1=require('express'),adminController_1=require('../controllers/adminController'),validation_1=require(a19_0xfa44e(0x190)),auth_1=require(a19_0xfa44e(0x18d)),loggerService_1=require('../services/loggerService'),coinToPayStatusService_1=require(a19_0xfa44e(0x193)),domainMonitoringService_1=require(a19_0xfa44e(0x16b)),router=(0x0,express_1['Router'])(),adminController=new adminController_1['AdminController']();router[a19_0xfa44e(0x152)](auth_1['authenticateToken'],auth_1['requireAdmin']),router['get'](a19_0xfa44e(0x18c),adminController['checkAuth']),router[a19_0xfa44e(0x157)]('/statistics',adminController[a19_0xfa44e(0x1a4)]),router[a19_0xfa44e(0x157)](a19_0xfa44e(0x14f),adminController[a19_0xfa44e(0x15b)]),router[a19_0xfa44e(0x157)](a19_0xfa44e(0x160),adminController['getPayoutStats']),router[a19_0xfa44e(0x157)](a19_0xfa44e(0x19d),adminController['getMerchantsAwaitingPayout']),router[a19_0xfa44e(0x16e)](a19_0xfa44e(0x1b8),(0x0,validation_1[a19_0xfa44e(0x196)])(validation_1[a19_0xfa44e(0x150)]),adminController[a19_0xfa44e(0x19f)]),router[a19_0xfa44e(0x157)](a19_0xfa44e(0x1b0),adminController[a19_0xfa44e(0x171)]),router['get'](a19_0xfa44e(0x151),adminController[a19_0xfa44e(0x14c)]),router[a19_0xfa44e(0x14b)]('/payouts/:id',adminController['deletePayout']),router[a19_0xfa44e(0x157)](a19_0xfa44e(0x156),adminController[a19_0xfa44e(0x177)]),router[a19_0xfa44e(0x157)](a19_0xfa44e(0x17e),adminController[a19_0xfa44e(0x153)]),router[a19_0xfa44e(0x18a)](a19_0xfa44e(0x17e),adminController['updatePayment']),router[a19_0xfa44e(0x18a)](a19_0xfa44e(0x1b3),(0x0,validation_1['validate'])(validation_1[a19_0xfa44e(0x19a)]),adminController['updateCustomerData']),router['get'](a19_0xfa44e(0x18b),adminController['getUsers']),router[a19_0xfa44e(0x157)]('/users/:id',adminController[a19_0xfa44e(0x19e)]),router[a19_0xfa44e(0x16e)](a19_0xfa44e(0x18b),(0x0,validation_1[a19_0xfa44e(0x196)])(validation_1[a19_0xfa44e(0x15d)]),adminController[a19_0xfa44e(0x15c)]),router[a19_0xfa44e(0x18a)](a19_0xfa44e(0x19b),(0x0,validation_1[a19_0xfa44e(0x196)])(validation_1[a19_0xfa44e(0x155)]),adminController['updateUser']),router[a19_0xfa44e(0x14b)](a19_0xfa44e(0x19b),adminController[a19_0xfa44e(0x186)]),router['post']('/users/:id/suspend',adminController[a19_0xfa44e(0x17c)]),router[a19_0xfa44e(0x16e)]('/users/:id/activate',adminController[a19_0xfa44e(0x180)]),router[a19_0xfa44e(0x157)]('/logs/stats',(_0x4ccf7c,_0x8b8d36)=>{const _0x575b35=a19_0xfa44e;try{const _0x2c1440=loggerService_1['loggerService'][_0x575b35(0x1ae)]();_0x8b8d36[_0x575b35(0x195)]({'success':!![],'result':_0x2c1440});}catch(_0x535416){_0x8b8d36[_0x575b35(0x170)](0x1f4)[_0x575b35(0x195)]({'success':![],'message':'Failed\x20to\x20get\x20log\x20statistics'});}}),router[a19_0xfa44e(0x16e)](a19_0xfa44e(0x14d),(_0x57a39d,_0xf61f3)=>{const _0x4fdf80=a19_0xfa44e;try{const {daysToKeep:daysToKeep=0x1e}=_0x57a39d[_0x4fdf80(0x1ba)];loggerService_1['loggerService']['cleanOldLogs'](daysToKeep),_0xf61f3[_0x4fdf80(0x195)]({'success':!![],'message':'Old\x20logs\x20cleaned\x20(kept\x20last\x20'+daysToKeep+_0x4fdf80(0x179)});}catch(_0x55bcf1){_0xf61f3[_0x4fdf80(0x170)](0x1f4)[_0x4fdf80(0x195)]({'success':![],'message':'Failed\x20to\x20clean\x20old\x20logs'});}}),router[a19_0xfa44e(0x16e)](a19_0xfa44e(0x191),async(_0x459661,_0x219423)=>{const _0x29f2c7=a19_0xfa44e;try{const {paymentId:_0x4a7c35}=_0x459661[_0x29f2c7(0x1b7)];console[_0x29f2c7(0x1ad)](_0x29f2c7(0x1b5)+_0x4a7c35),await coinToPayStatusService_1[_0x29f2c7(0x16d)][_0x29f2c7(0x163)](_0x4a7c35),_0x219423[_0x29f2c7(0x195)]({'success':!![],'message':_0x29f2c7(0x15f)});}catch(_0x424ff5){console[_0x29f2c7(0x1ac)](_0x29f2c7(0x1b2)+_0x459661[_0x29f2c7(0x1b7)][_0x29f2c7(0x159)]+':',_0x424ff5),_0x219423[_0x29f2c7(0x170)](0x1f4)['json']({'success':![],'message':_0x424ff5 instanceof Error?_0x424ff5[_0x29f2c7(0x15e)]:_0x29f2c7(0x194)});}}),router[a19_0xfa44e(0x157)](a19_0xfa44e(0x16a),(_0x445002,_0x75dcb)=>{const _0x4d8454=a19_0xfa44e;try{const _0x5d1ec3=coinToPayStatusService_1[_0x4d8454(0x16d)][_0x4d8454(0x1a1)]();_0x75dcb[_0x4d8454(0x195)]({'success':!![],'result':{..._0x5d1ec3,'description':_0x4d8454(0x175),'statusMapping':{'Paid':_0x4d8454(0x176),'Awaiting\x20Fiat':_0x4d8454(0x172),'waiting':_0x4d8454(0x172),'expired':_0x4d8454(0x1ab),'failed':_0x4d8454(0x158)},'autoExpiryNote':_0x4d8454(0x178)+_0x5d1ec3[_0x4d8454(0x1a7)]+'\x20days\x20if\x20not\x20paid','individualTimersNote':_0x4d8454(0x17f)}});}catch(_0x43bf6a){_0x75dcb['status'](0x1f4)['json']({'success':![],'message':'Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics'});}}),router[a19_0xfa44e(0x157)](a19_0xfa44e(0x165),async(_0x30cb10,_0x5d2376)=>{const _0x181310=a19_0xfa44e;try{const {paymentId:_0x12a1da}=_0x30cb10[_0x181310(0x1b7)],_0x40201f=coinToPayStatusService_1['coinToPayStatusService'][_0x181310(0x1bc)](_0x12a1da),_0x5b3fda=(await Promise[_0x181310(0x1aa)]()[_0x181310(0x182)](()=>__importStar(require(_0x181310(0x17b)))))['default'],_0x257d01=await _0x5b3fda[_0x181310(0x173)][_0x181310(0x18f)]({'where':{'id':_0x12a1da},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x257d01)return _0x5d2376[_0x181310(0x170)](0x194)[_0x181310(0x195)]({'success':![],'message':_0x181310(0x15a)});_0x5d2376[_0x181310(0x195)]({'success':!![],'result':{'payment':{'id':_0x257d01['id'],'gateway':_0x257d01[_0x181310(0x181)],'gatewayPaymentId':_0x257d01[_0x181310(0x18e)],'status':_0x257d01['status'],'amount':_0x257d01[_0x181310(0x1af)],'currency':_0x257d01[_0x181310(0x192)],'createdAt':_0x257d01[_0x181310(0x17d)],'updatedAt':_0x257d01[_0x181310(0x1a0)],'shop':_0x257d01[_0x181310(0x1a9)]},'timers':_0x40201f,'isCoinToPay':_0x257d01['gateway']===_0x181310(0x154),'ageInMinutes':Math[_0x181310(0x184)]((Date['now']()-_0x257d01['createdAt'][_0x181310(0x1a3)]())/(0x3e8*0x3c))}});}catch(_0x55761d){_0x5d2376[_0x181310(0x170)](0x1f4)[_0x181310(0x195)]({'success':![],'message':_0x55761d instanceof Error?_0x55761d[_0x181310(0x15e)]:_0x181310(0x187)});}}),router[a19_0xfa44e(0x157)](a19_0xfa44e(0x198),(_0x479817,_0x142488)=>{const _0x1961fb=a19_0xfa44e;try{const _0x1243b7=domainMonitoringService_1['domainMonitoringService'][_0x1961fb(0x199)]();_0x142488[_0x1961fb(0x195)]({'success':!![],'result':{..._0x1243b7,'description':_0x1961fb(0x168),'behavior':'Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','encoding':'Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs'}});}catch(_0x1eccbd){_0x142488[_0x1961fb(0x170)](0x1f4)[_0x1961fb(0x195)]({'success':![],'message':_0x1961fb(0x1b1)});}}),router[a19_0xfa44e(0x16e)](a19_0xfa44e(0x174),async(_0x253ecf,_0x65dfe7)=>{const _0x18cc13=a19_0xfa44e;try{const _0x1c1b82=await domainMonitoringService_1['domainMonitoringService'][_0x18cc13(0x16f)]();_0x65dfe7[_0x18cc13(0x195)]({'success':!![],'result':{'domainAvailable':_0x1c1b82,'message':_0x1c1b82?_0x18cc13(0x189):_0x18cc13(0x14e),'timestamp':new Date()[_0x18cc13(0x1b6)]()}});}catch(_0x5364c1){_0x65dfe7[_0x18cc13(0x170)](0x1f4)['json']({'success':![],'message':_0x5364c1 instanceof Error?_0x5364c1[_0x18cc13(0x15e)]:_0x18cc13(0x169)});}}),exports[a19_0xfa44e(0x164)]=router;