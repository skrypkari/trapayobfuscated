'use strict';const a25_0x21ff8a=a25_0x31c6;function a25_0x31c6(_0x59759a,_0x4f2137){_0x59759a=_0x59759a-0x1a9;const _0x50e669=a25_0x50e6();let _0x31c67d=_0x50e669[_0x59759a];return _0x31c67d;}(function(_0x20594d,_0x2ee4ee){const _0x44e63c=a25_0x31c6,_0xe65b8b=_0x20594d();while(!![]){try{const _0x1c8fe6=parseInt(_0x44e63c(0x1c8))/0x1*(parseInt(_0x44e63c(0x1ac))/0x2)+-parseInt(_0x44e63c(0x1d8))/0x3+-parseInt(_0x44e63c(0x1cc))/0x4*(parseInt(_0x44e63c(0x1b4))/0x5)+parseInt(_0x44e63c(0x1f2))/0x6+parseInt(_0x44e63c(0x1bb))/0x7*(parseInt(_0x44e63c(0x214))/0x8)+parseInt(_0x44e63c(0x1b6))/0x9*(-parseInt(_0x44e63c(0x1d5))/0xa)+parseInt(_0x44e63c(0x22d))/0xb*(parseInt(_0x44e63c(0x218))/0xc);if(_0x1c8fe6===_0x2ee4ee)break;else _0xe65b8b['push'](_0xe65b8b['shift']());}catch(_0xff16f2){_0xe65b8b['push'](_0xe65b8b['shift']());}}}(a25_0x50e6,0xaddad));var __createBinding=this&&this[a25_0x21ff8a(0x1b2)]||(Object[a25_0x21ff8a(0x1ea)]?function(_0x18d233,_0x462ba7,_0x1d4b50,_0x33cbb9){const _0x35fba3=a25_0x21ff8a;if(_0x33cbb9===undefined)_0x33cbb9=_0x1d4b50;var _0x25624e=Object[_0x35fba3(0x1ef)](_0x462ba7,_0x1d4b50);(!_0x25624e||(_0x35fba3(0x219)in _0x25624e?!_0x462ba7['__esModule']:_0x25624e[_0x35fba3(0x204)]||_0x25624e['configurable']))&&(_0x25624e={'enumerable':!![],'get':function(){return _0x462ba7[_0x1d4b50];}}),Object[_0x35fba3(0x1ad)](_0x18d233,_0x33cbb9,_0x25624e);}:function(_0x77aee4,_0x8a4cbe,_0x14da53,_0x24e993){if(_0x24e993===undefined)_0x24e993=_0x14da53;_0x77aee4[_0x24e993]=_0x8a4cbe[_0x14da53];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a25_0x21ff8a(0x1ea)]?function(_0x4ed363,_0x2ae8b4){const _0x2fa97c=a25_0x21ff8a;Object[_0x2fa97c(0x1ad)](_0x4ed363,_0x2fa97c(0x1dc),{'enumerable':!![],'value':_0x2ae8b4});}:function(_0xb24a7f,_0x34781c){const _0x27056d=a25_0x21ff8a;_0xb24a7f[_0x27056d(0x1dc)]=_0x34781c;}),__importStar=this&&this['__importStar']||(function(){var _0x50f5c3=function(_0x3d724a){const _0x1d38f9=a25_0x31c6;return _0x50f5c3=Object[_0x1d38f9(0x1c5)]||function(_0x357ceb){const _0x4e9483=_0x1d38f9;var _0x25a750=[];for(var _0x7201c5 in _0x357ceb)if(Object[_0x4e9483(0x1ec)][_0x4e9483(0x1af)][_0x4e9483(0x1f9)](_0x357ceb,_0x7201c5))_0x25a750[_0x25a750[_0x4e9483(0x221)]]=_0x7201c5;return _0x25a750;},_0x50f5c3(_0x3d724a);};return function(_0x1bfafc){const _0x347f7c=a25_0x31c6;if(_0x1bfafc&&_0x1bfafc[_0x347f7c(0x21d)])return _0x1bfafc;var _0x2ad0e3={};if(_0x1bfafc!=null){for(var _0x68dea7=_0x50f5c3(_0x1bfafc),_0x57d222=0x0;_0x57d222<_0x68dea7[_0x347f7c(0x221)];_0x57d222++)if(_0x68dea7[_0x57d222]!==_0x347f7c(0x1dc))__createBinding(_0x2ad0e3,_0x1bfafc,_0x68dea7[_0x57d222]);}return __setModuleDefault(_0x2ad0e3,_0x1bfafc),_0x2ad0e3;};}());Object[a25_0x21ff8a(0x1ad)](exports,a25_0x21ff8a(0x21d),{'value':!![]});const express_1=require(a25_0x21ff8a(0x1e3)),adminController_1=require('../controllers/adminController'),validation_1=require('../middleware/validation'),auth_1=require('../middleware/auth'),loggerService_1=require(a25_0x21ff8a(0x1d0)),coinToPayStatusService_1=require(a25_0x21ff8a(0x20b)),domainMonitoringService_1=require(a25_0x21ff8a(0x22f)),router=(0x0,express_1[a25_0x21ff8a(0x213)])(),adminController=new adminController_1[(a25_0x21ff8a(0x1c2))]();router[a25_0x21ff8a(0x21f)](auth_1['authenticateToken'],auth_1[a25_0x21ff8a(0x1b1)]),router[a25_0x21ff8a(0x219)](a25_0x21ff8a(0x201),adminController[a25_0x21ff8a(0x1e2)]),router[a25_0x21ff8a(0x219)](a25_0x21ff8a(0x1e8),adminController['getStatistics']),router['get']('/merchant-statistics',adminController[a25_0x21ff8a(0x22a)]),router[a25_0x21ff8a(0x219)](a25_0x21ff8a(0x1d4),adminController['getPayoutStats']),router[a25_0x21ff8a(0x219)](a25_0x21ff8a(0x1ff),adminController[a25_0x21ff8a(0x1e9)]),router[a25_0x21ff8a(0x219)](a25_0x21ff8a(0x1ca),adminController[a25_0x21ff8a(0x1b3)]),router[a25_0x21ff8a(0x1c1)]('/payout',(0x0,validation_1[a25_0x21ff8a(0x1d3)])(validation_1[a25_0x21ff8a(0x21a)]),adminController[a25_0x21ff8a(0x1ed)]),router[a25_0x21ff8a(0x219)](a25_0x21ff8a(0x1cf),adminController['getPayouts']),router[a25_0x21ff8a(0x219)](a25_0x21ff8a(0x1fe),adminController[a25_0x21ff8a(0x1b7)]),router[a25_0x21ff8a(0x1b9)](a25_0x21ff8a(0x1fe),adminController[a25_0x21ff8a(0x1f3)]),router[a25_0x21ff8a(0x219)](a25_0x21ff8a(0x1f1),adminController[a25_0x21ff8a(0x1c9)]),router[a25_0x21ff8a(0x219)](a25_0x21ff8a(0x228),adminController[a25_0x21ff8a(0x226)]),router[a25_0x21ff8a(0x20d)](a25_0x21ff8a(0x228),adminController[a25_0x21ff8a(0x1e0)]),router['put'](a25_0x21ff8a(0x1e7),(0x0,validation_1['validate'])(validation_1[a25_0x21ff8a(0x22b)]),adminController[a25_0x21ff8a(0x222)]),router[a25_0x21ff8a(0x219)]('/payments/processing-stats',adminController[a25_0x21ff8a(0x1a9)]),router['post'](a25_0x21ff8a(0x1f7),adminController[a25_0x21ff8a(0x22c)]),router[a25_0x21ff8a(0x1c1)](a25_0x21ff8a(0x1ba),adminController['cleanupStalePendingPayments']),router[a25_0x21ff8a(0x1c1)]('/payments/cleanup-with-report',adminController[a25_0x21ff8a(0x215)]),router['post'](a25_0x21ff8a(0x1e1),adminController[a25_0x21ff8a(0x229)]),router['get'](a25_0x21ff8a(0x206),adminController[a25_0x21ff8a(0x216)]),router[a25_0x21ff8a(0x219)]('/users/:id',adminController[a25_0x21ff8a(0x21e)]),router['post'](a25_0x21ff8a(0x206),(0x0,validation_1[a25_0x21ff8a(0x1d3)])(validation_1[a25_0x21ff8a(0x1c3)]),adminController[a25_0x21ff8a(0x21c)]),router[a25_0x21ff8a(0x20d)](a25_0x21ff8a(0x1bf),(0x0,validation_1[a25_0x21ff8a(0x1d3)])(validation_1[a25_0x21ff8a(0x1de)]),adminController[a25_0x21ff8a(0x20f)]),router[a25_0x21ff8a(0x1b9)](a25_0x21ff8a(0x1bf),adminController[a25_0x21ff8a(0x1fc)]),router[a25_0x21ff8a(0x1c1)](a25_0x21ff8a(0x1c7),adminController[a25_0x21ff8a(0x1ab)]),router[a25_0x21ff8a(0x1c1)](a25_0x21ff8a(0x20e),adminController[a25_0x21ff8a(0x1ee)]),router[a25_0x21ff8a(0x219)]('/logs/stats',(_0x57319d,_0x5aef13)=>{const _0x9a8f3c=a25_0x21ff8a;try{const _0xa588ab=loggerService_1[_0x9a8f3c(0x220)][_0x9a8f3c(0x1aa)]();_0x5aef13[_0x9a8f3c(0x207)]({'success':!![],'result':_0xa588ab});}catch(_0x32f6b1){_0x5aef13[_0x9a8f3c(0x1f4)](0x1f4)[_0x9a8f3c(0x207)]({'success':![],'message':_0x9a8f3c(0x227)});}}),router[a25_0x21ff8a(0x1c1)](a25_0x21ff8a(0x1b8),(_0x353870,_0x44ff60)=>{const _0x855718=a25_0x21ff8a;try{const {daysToKeep:daysToKeep=0x1e}=_0x353870['body'];loggerService_1['loggerService'][_0x855718(0x1e4)](daysToKeep),_0x44ff60[_0x855718(0x207)]({'success':!![],'message':_0x855718(0x1fd)+daysToKeep+_0x855718(0x20a)});}catch(_0x806dcc){_0x44ff60[_0x855718(0x1f4)](0x1f4)[_0x855718(0x207)]({'success':![],'message':_0x855718(0x1f5)});}}),router[a25_0x21ff8a(0x1c1)](a25_0x21ff8a(0x20c),async(_0x2d4f7f,_0x4e953e)=>{const _0x1f691d=a25_0x21ff8a;try{const {paymentId:_0xdd8fda}=_0x2d4f7f[_0x1f691d(0x1bc)];console['log'](_0x1f691d(0x1bd)+_0xdd8fda),await coinToPayStatusService_1[_0x1f691d(0x1fb)][_0x1f691d(0x1c6)](_0xdd8fda),_0x4e953e[_0x1f691d(0x207)]({'success':!![],'message':_0x1f691d(0x223)});}catch(_0x1d4338){console[_0x1f691d(0x21b)](_0x1f691d(0x212)+_0x2d4f7f[_0x1f691d(0x1bc)][_0x1f691d(0x217)]+':',_0x1d4338),_0x4e953e[_0x1f691d(0x1f4)](0x1f4)[_0x1f691d(0x207)]({'success':![],'message':_0x1d4338 instanceof Error?_0x1d4338['message']:'Failed\x20to\x20check\x20CoinToPay\x20payment\x20status'});}}),router[a25_0x21ff8a(0x219)](a25_0x21ff8a(0x1f6),(_0x3e5232,_0x5193cb)=>{const _0x37d8a5=a25_0x21ff8a;try{const _0x54ce45=coinToPayStatusService_1[_0x37d8a5(0x1fb)][_0x37d8a5(0x1eb)]();_0x5193cb[_0x37d8a5(0x207)]({'success':!![],'result':{..._0x54ce45,'description':_0x37d8a5(0x211),'statusMapping':{'Paid':_0x37d8a5(0x208),'Awaiting\x20Fiat':_0x37d8a5(0x203),'waiting':_0x37d8a5(0x203),'expired':_0x37d8a5(0x1ae),'failed':_0x37d8a5(0x225)},'autoExpiryNote':_0x37d8a5(0x1da)+_0x54ce45['expiryDays']+_0x37d8a5(0x1df),'individualTimersNote':_0x37d8a5(0x1c4)}});}catch(_0x4ad1d9){_0x5193cb[_0x37d8a5(0x1f4)](0x1f4)['json']({'success':![],'message':_0x37d8a5(0x205)});}}),router[a25_0x21ff8a(0x219)]('/cointopay/payment/:paymentId',async(_0x507bb0,_0x22b3aa)=>{const _0x42c901=a25_0x21ff8a;try{const {paymentId:_0x41ac55}=_0x507bb0[_0x42c901(0x1bc)],_0x44e5de=coinToPayStatusService_1[_0x42c901(0x1fb)][_0x42c901(0x1fa)](_0x41ac55),_0x5efc1f=(await Promise[_0x42c901(0x1e5)]()['then'](()=>__importStar(require('../config/database'))))[_0x42c901(0x1dc)],_0x1a5ba0=await _0x5efc1f[_0x42c901(0x1c0)][_0x42c901(0x1d1)]({'where':{'id':_0x41ac55},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x1a5ba0)return _0x22b3aa['status'](0x194)['json']({'success':![],'message':_0x42c901(0x1d7)});_0x22b3aa[_0x42c901(0x207)]({'success':!![],'result':{'payment':{'id':_0x1a5ba0['id'],'gateway':_0x1a5ba0[_0x42c901(0x1b0)],'gatewayPaymentId':_0x1a5ba0[_0x42c901(0x1e6)],'status':_0x1a5ba0['status'],'amount':_0x1a5ba0[_0x42c901(0x1b5)],'currency':_0x1a5ba0['currency'],'createdAt':_0x1a5ba0['createdAt'],'updatedAt':_0x1a5ba0[_0x42c901(0x22e)],'shop':_0x1a5ba0['shop']},'timers':_0x44e5de,'isCoinToPay':_0x1a5ba0[_0x42c901(0x1b0)]===_0x42c901(0x1d2),'ageInMinutes':Math['floor']((Date[_0x42c901(0x200)]()-_0x1a5ba0[_0x42c901(0x224)][_0x42c901(0x1db)]())/(0x3e8*0x3c))}});}catch(_0x57fcff){_0x22b3aa[_0x42c901(0x1f4)](0x1f4)[_0x42c901(0x207)]({'success':![],'message':_0x57fcff instanceof Error?_0x57fcff[_0x42c901(0x202)]:_0x42c901(0x1cb)});}}),router[a25_0x21ff8a(0x219)](a25_0x21ff8a(0x1d6),(_0x10040b,_0x5883c5)=>{const _0x4df87f=a25_0x21ff8a;try{const _0x1a7b75=domainMonitoringService_1[_0x4df87f(0x1f0)][_0x4df87f(0x209)]();_0x5883c5[_0x4df87f(0x207)]({'success':!![],'result':{..._0x1a7b75,'description':'Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','behavior':_0x4df87f(0x1cd),'encoding':_0x4df87f(0x210)}});}catch(_0x365991){_0x5883c5[_0x4df87f(0x1f4)](0x1f4)['json']({'success':![],'message':_0x4df87f(0x1be)});}}),router[a25_0x21ff8a(0x1c1)](a25_0x21ff8a(0x1dd),async(_0x534f55,_0x2f1484)=>{const _0x502a45=a25_0x21ff8a;try{const _0x2420c1=await domainMonitoringService_1[_0x502a45(0x1f0)]['manualCheck']();_0x2f1484[_0x502a45(0x207)]({'success':!![],'result':{'domainAvailable':_0x2420c1,'message':_0x2420c1?_0x502a45(0x1f8):_0x502a45(0x1ce),'timestamp':new Date()['toISOString']()}});}catch(_0x270ec3){_0x2f1484[_0x502a45(0x1f4)](0x1f4)['json']({'success':![],'message':_0x270ec3 instanceof Error?_0x270ec3[_0x502a45(0x202)]:_0x502a45(0x1d9)});}}),exports['default']=router;function a25_0x50e6(){const _0x5a8703=['deletePayout','status','Failed\x20to\x20clean\x20old\x20logs','/cointopay/stats','/payments/cleanup','Domain\x20is\x20responding\x20correctly','call','getPaymentTimerInfo','coinToPayStatusService','deleteUser','Old\x20logs\x20cleaned\x20(kept\x20last\x20','/payouts/:id','/payout/merchants','now','/auth','message','PENDING','writable','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','/users','json','PAID','getMonitoringStats','\x20days)','../services/coinToPayStatusService','/cointopay/check/:paymentId','put','/users/:id/activate','updateUser','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','CoinToPay\x20automatic\x20status\x20checking\x20service','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','Router','2780184rHYSFY','cleanupStalePaymentsWithReport','getUsers','paymentId','3552eahlVX','get','createPayoutSchema','error','createUser','__esModule','getUserById','use','loggerService','length','updateCustomerData','CoinToPay\x20payment\x20status\x20checked\x20successfully','createdAt','FAILED','getPaymentById','Failed\x20to\x20get\x20log\x20statistics','/payments/:id','expirePaymentLinks','getMerchantStatistics','updateCustomerDataSchema','cleanupStalePayments','32945kkiMRE','updatedAt','../services/domainMonitoringService','getProcessingPaymentsStats','getLogStats','suspendUser','16PAmDTk','defineProperty','EXPIRED','hasOwnProperty','gateway','requireAdmin','__createBinding','getMerchantsSelection','2239475qKgTzd','amount','26802yXpQTt','getPayoutById','/logs/clean','delete','/payments/cleanup-pending','14dIjXhN','params','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','/users/:id','payment','post','AdminController','createUserSchema','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','getOwnPropertyNames','checkPaymentById','/users/:id/suspend','84859CFCAdE','getPayments','/merchants/selection','Failed\x20to\x20get\x20payment\x20information','4yfDalv','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','Domain\x20check\x20failed','/payouts','../services/loggerService','findUnique','cointopay','validate','/payout/stats','2000FWsXiK','/domain-monitoring/stats','Payment\x20not\x20found','2856912AABwPS','Failed\x20to\x20perform\x20manual\x20domain\x20check','Payments\x20automatically\x20expire\x20after\x20','getTime','default','/domain-monitoring/check','updateUserSchema','\x20days\x20if\x20not\x20paid','updatePayment','/payment-links/expire','checkAuth','express','cleanOldLogs','resolve','gatewayPaymentId','/payments/:id/customer','/statistics','getMerchantsAwaitingPayout','create','getServiceStats','prototype','createPayout','activateUser','getOwnPropertyDescriptor','domainMonitoringService','/payments','2684820UggrPb'];a25_0x50e6=function(){return _0x5a8703;};return a25_0x50e6();}