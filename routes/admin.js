'use strict';const a19_0x254366=a19_0x171a;(function(_0x335485,_0xe5c960){const _0x5bb558=a19_0x171a,_0x5943c9=_0x335485();while(!![]){try{const _0x23379e=-parseInt(_0x5bb558(0x1cc))/0x1+parseInt(_0x5bb558(0x181))/0x2*(parseInt(_0x5bb558(0x1c9))/0x3)+parseInt(_0x5bb558(0x1a7))/0x4+parseInt(_0x5bb558(0x16e))/0x5+-parseInt(_0x5bb558(0x18f))/0x6*(-parseInt(_0x5bb558(0x171))/0x7)+-parseInt(_0x5bb558(0x1a0))/0x8+-parseInt(_0x5bb558(0x1d7))/0x9*(parseInt(_0x5bb558(0x1d0))/0xa);if(_0x23379e===_0xe5c960)break;else _0x5943c9['push'](_0x5943c9['shift']());}catch(_0x3a588){_0x5943c9['push'](_0x5943c9['shift']());}}}(a19_0x59af,0x852f7));var __createBinding=this&&this[a19_0x254366(0x18a)]||(Object[a19_0x254366(0x1dd)]?function(_0x4f9883,_0x5a0201,_0x49c8ca,_0x53304c){const _0x1dbaf7=a19_0x254366;if(_0x53304c===undefined)_0x53304c=_0x49c8ca;var _0x10cbd5=Object['getOwnPropertyDescriptor'](_0x5a0201,_0x49c8ca);(!_0x10cbd5||('get'in _0x10cbd5?!_0x5a0201[_0x1dbaf7(0x1c3)]:_0x10cbd5[_0x1dbaf7(0x1a2)]||_0x10cbd5[_0x1dbaf7(0x1a3)]))&&(_0x10cbd5={'enumerable':!![],'get':function(){return _0x5a0201[_0x49c8ca];}}),Object[_0x1dbaf7(0x1d9)](_0x4f9883,_0x53304c,_0x10cbd5);}:function(_0x63323d,_0x168c3e,_0x5d454d,_0x390cfe){if(_0x390cfe===undefined)_0x390cfe=_0x5d454d;_0x63323d[_0x390cfe]=_0x168c3e[_0x5d454d];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object['create']?function(_0xda1793,_0x2ff72c){const _0x2f85b3=a19_0x254366;Object[_0x2f85b3(0x1d9)](_0xda1793,_0x2f85b3(0x17b),{'enumerable':!![],'value':_0x2ff72c});}:function(_0x337eb2,_0x4eaaf0){const _0x47d8b5=a19_0x254366;_0x337eb2[_0x47d8b5(0x17b)]=_0x4eaaf0;}),__importStar=this&&this[a19_0x254366(0x1c5)]||(function(){var _0x39d31f=function(_0x4dcb9a){const _0xefa5=a19_0x171a;return _0x39d31f=Object[_0xefa5(0x1b8)]||function(_0x82759d){const _0x40ee37=_0xefa5;var _0x466ac2=[];for(var _0x30eac9 in _0x82759d)if(Object[_0x40ee37(0x1cf)][_0x40ee37(0x1dc)][_0x40ee37(0x1ab)](_0x82759d,_0x30eac9))_0x466ac2[_0x466ac2[_0x40ee37(0x1a1)]]=_0x30eac9;return _0x466ac2;},_0x39d31f(_0x4dcb9a);};return function(_0x1a18ed){const _0x4b3b4f=a19_0x171a;if(_0x1a18ed&&_0x1a18ed['__esModule'])return _0x1a18ed;var _0x4a4ebd={};if(_0x1a18ed!=null){for(var _0x2200df=_0x39d31f(_0x1a18ed),_0x5ed0a4=0x0;_0x5ed0a4<_0x2200df[_0x4b3b4f(0x1a1)];_0x5ed0a4++)if(_0x2200df[_0x5ed0a4]!==_0x4b3b4f(0x17b))__createBinding(_0x4a4ebd,_0x1a18ed,_0x2200df[_0x5ed0a4]);}return __setModuleDefault(_0x4a4ebd,_0x1a18ed),_0x4a4ebd;};}());Object[a19_0x254366(0x1d9)](exports,a19_0x254366(0x1c3),{'value':!![]});function a19_0x171a(_0x5c9e90,_0x1ea733){const _0x59af8b=a19_0x59af();return a19_0x171a=function(_0x171abf,_0x152fde){_0x171abf=_0x171abf-0x16d;let _0x29047a=_0x59af8b[_0x171abf];return _0x29047a;},a19_0x171a(_0x5c9e90,_0x1ea733);}const express_1=require(a19_0x254366(0x1d6)),adminController_1=require(a19_0x254366(0x1d5)),validation_1=require(a19_0x254366(0x1c7)),auth_1=require(a19_0x254366(0x195)),loggerService_1=require(a19_0x254366(0x1ad)),coinToPayStatusService_1=require(a19_0x254366(0x19e)),domainMonitoringService_1=require(a19_0x254366(0x1b1)),router=(0x0,express_1['Router'])(),adminController=new adminController_1['AdminController']();function a19_0x59af(){const _0x18214e=['getMonitoringStats','/cointopay/stats','default','body','/logs/clean','Failed\x20to\x20get\x20log\x20statistics','delete','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','62VGzZAA','cointopay','/domain-monitoring/stats','🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','updatedAt','/payments/:id/customer','params','put','suspendUser','__createBinding','/users/:id/activate','deletePayout','/users/:id','getServiceStats','228mfLuNl','error','CoinToPay\x20automatic\x20status\x20checking\x20service','loggerService','floor','domainMonitoringService','../middleware/auth','now','Domain\x20is\x20responding\x20correctly','toISOString','then','updateUserSchema','createUser','json','/payout','../services/coinToPayStatusService','FAILED','1418400mWgqHi','length','writable','configurable','checkPaymentById','paymentId','checkAuth','2687796wgOwZm','❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','getPaymentById','/statistics','call','findUnique','../services/loggerService','/cointopay/payment/:paymentId','activateUser','createPayout','../services/domainMonitoringService','cleanOldLogs','deleteUser','get','/logs/stats','/users/:id/suspend','/payments','getOwnPropertyNames','status','Failed\x20to\x20clean\x20old\x20logs','PENDING','message','getPayouts','../config/database','/users','/payments/:id','updateCustomerDataSchema','Failed\x20to\x20perform\x20manual\x20domain\x20check','__esModule','createdAt','__importStar','getStatistics','../middleware/validation','post','10320FoklFW','requireAdmin','Old\x20logs\x20cleaned\x20(kept\x20last\x20','675330qUsFdk','validate','updateCustomerData','prototype','11330nDpVCp','updatePayment','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','/merchant-statistics','../controllers/adminController','express','7659vYGjcO','Payments\x20automatically\x20expire\x20after\x20','defineProperty','gateway','coinToPayStatusService','hasOwnProperty','create','getTime','5289535zDGiGP','getPayments','PAID','96866RtWSne','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','getUsers','resolve','log','getUserById','getPayoutStats','createUserSchema'];a19_0x59af=function(){return _0x18214e;};return a19_0x59af();}router['use'](auth_1['authenticateToken'],auth_1[a19_0x254366(0x1ca)]),router['get']('/auth',adminController[a19_0x254366(0x1a6)]),router['get'](a19_0x254366(0x1aa),adminController[a19_0x254366(0x1c6)]),router[a19_0x254366(0x1b4)](a19_0x254366(0x1d4),adminController['getMerchantStatistics']),router[a19_0x254366(0x1b4)]('/payout/stats',adminController[a19_0x254366(0x177)]),router[a19_0x254366(0x1b4)]('/payout/merchants',adminController['getMerchantsAwaitingPayout']),router[a19_0x254366(0x1c8)](a19_0x254366(0x19d),(0x0,validation_1['validate'])(validation_1['createPayoutSchema']),adminController[a19_0x254366(0x1b0)]),router[a19_0x254366(0x1b4)]('/payouts',adminController[a19_0x254366(0x1bd)]),router[a19_0x254366(0x1b4)]('/payouts/:id',adminController['getPayoutById']),router['delete']('/payouts/:id',adminController[a19_0x254366(0x18c)]),router[a19_0x254366(0x1b4)](a19_0x254366(0x1b7),adminController[a19_0x254366(0x16f)]),router[a19_0x254366(0x1b4)]('/payments/:id',adminController[a19_0x254366(0x1a9)]),router['put'](a19_0x254366(0x1c0),adminController[a19_0x254366(0x1d1)]),router['put'](a19_0x254366(0x186),(0x0,validation_1[a19_0x254366(0x1cd)])(validation_1[a19_0x254366(0x1c1)]),adminController[a19_0x254366(0x1ce)]),router[a19_0x254366(0x1b4)](a19_0x254366(0x1bf),adminController[a19_0x254366(0x173)]),router[a19_0x254366(0x1b4)](a19_0x254366(0x18d),adminController[a19_0x254366(0x176)]),router[a19_0x254366(0x1c8)](a19_0x254366(0x1bf),(0x0,validation_1['validate'])(validation_1[a19_0x254366(0x178)]),adminController[a19_0x254366(0x19b)]),router[a19_0x254366(0x188)]('/users/:id',(0x0,validation_1[a19_0x254366(0x1cd)])(validation_1[a19_0x254366(0x19a)]),adminController['updateUser']),router[a19_0x254366(0x17f)](a19_0x254366(0x18d),adminController[a19_0x254366(0x1b3)]),router['post'](a19_0x254366(0x1b6),adminController[a19_0x254366(0x189)]),router[a19_0x254366(0x1c8)](a19_0x254366(0x18b),adminController[a19_0x254366(0x1af)]),router[a19_0x254366(0x1b4)](a19_0x254366(0x1b5),(_0x1ff43d,_0x141994)=>{const _0x2dac7c=a19_0x254366;try{const _0x17789b=loggerService_1[_0x2dac7c(0x192)]['getLogStats']();_0x141994[_0x2dac7c(0x19c)]({'success':!![],'result':_0x17789b});}catch(_0x5a4317){_0x141994[_0x2dac7c(0x1b9)](0x1f4)[_0x2dac7c(0x19c)]({'success':![],'message':_0x2dac7c(0x17e)});}}),router[a19_0x254366(0x1c8)](a19_0x254366(0x17d),(_0x24a453,_0x202b78)=>{const _0x411bd7=a19_0x254366;try{const {daysToKeep:daysToKeep=0x1e}=_0x24a453[_0x411bd7(0x17c)];loggerService_1[_0x411bd7(0x192)][_0x411bd7(0x1b2)](daysToKeep),_0x202b78[_0x411bd7(0x19c)]({'success':!![],'message':_0x411bd7(0x1cb)+daysToKeep+'\x20days)'});}catch(_0x29a148){_0x202b78[_0x411bd7(0x1b9)](0x1f4)[_0x411bd7(0x19c)]({'success':![],'message':_0x411bd7(0x1ba)});}}),router['post']('/cointopay/check/:paymentId',async(_0xbad85d,_0x296391)=>{const _0x1e14b2=a19_0x254366;try{const {paymentId:_0x40eaf4}=_0xbad85d[_0x1e14b2(0x187)];console[_0x1e14b2(0x175)](_0x1e14b2(0x184)+_0x40eaf4),await coinToPayStatusService_1[_0x1e14b2(0x1db)][_0x1e14b2(0x1a4)](_0x40eaf4),_0x296391[_0x1e14b2(0x19c)]({'success':!![],'message':'CoinToPay\x20payment\x20status\x20checked\x20successfully'});}catch(_0x3228f3){console[_0x1e14b2(0x190)](_0x1e14b2(0x1a8)+_0xbad85d['params'][_0x1e14b2(0x1a5)]+':',_0x3228f3),_0x296391[_0x1e14b2(0x1b9)](0x1f4)[_0x1e14b2(0x19c)]({'success':![],'message':_0x3228f3 instanceof Error?_0x3228f3[_0x1e14b2(0x1bc)]:'Failed\x20to\x20check\x20CoinToPay\x20payment\x20status'});}}),router[a19_0x254366(0x1b4)](a19_0x254366(0x17a),(_0x2a18a9,_0x54d719)=>{const _0x450271=a19_0x254366;try{const _0xca3a0b=coinToPayStatusService_1['coinToPayStatusService'][_0x450271(0x18e)]();_0x54d719['json']({'success':!![],'result':{..._0xca3a0b,'description':_0x450271(0x191),'statusMapping':{'Paid':_0x450271(0x170),'Awaiting\x20Fiat':_0x450271(0x1bb),'waiting':_0x450271(0x1bb),'expired':'EXPIRED','failed':_0x450271(0x19f)},'autoExpiryNote':_0x450271(0x1d8)+_0xca3a0b['expiryDays']+'\x20days\x20if\x20not\x20paid','individualTimersNote':_0x450271(0x180)}});}catch(_0x53471b){_0x54d719[_0x450271(0x1b9)](0x1f4)[_0x450271(0x19c)]({'success':![],'message':_0x450271(0x1d3)});}}),router[a19_0x254366(0x1b4)](a19_0x254366(0x1ae),async(_0x42022d,_0x532184)=>{const _0x43ca9b=a19_0x254366;try{const {paymentId:_0x1d4154}=_0x42022d[_0x43ca9b(0x187)],_0x5508d7=coinToPayStatusService_1[_0x43ca9b(0x1db)]['getPaymentTimerInfo'](_0x1d4154),_0x45230b=(await Promise[_0x43ca9b(0x174)]()[_0x43ca9b(0x199)](()=>__importStar(require(_0x43ca9b(0x1be)))))[_0x43ca9b(0x17b)],_0x40c116=await _0x45230b['payment'][_0x43ca9b(0x1ac)]({'where':{'id':_0x1d4154},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x40c116)return _0x532184['status'](0x194)[_0x43ca9b(0x19c)]({'success':![],'message':'Payment\x20not\x20found'});_0x532184[_0x43ca9b(0x19c)]({'success':!![],'result':{'payment':{'id':_0x40c116['id'],'gateway':_0x40c116[_0x43ca9b(0x1da)],'gatewayPaymentId':_0x40c116['gatewayPaymentId'],'status':_0x40c116['status'],'amount':_0x40c116['amount'],'currency':_0x40c116['currency'],'createdAt':_0x40c116[_0x43ca9b(0x1c4)],'updatedAt':_0x40c116[_0x43ca9b(0x185)],'shop':_0x40c116['shop']},'timers':_0x5508d7,'isCoinToPay':_0x40c116[_0x43ca9b(0x1da)]===_0x43ca9b(0x182),'ageInMinutes':Math[_0x43ca9b(0x193)]((Date[_0x43ca9b(0x196)]()-_0x40c116[_0x43ca9b(0x1c4)][_0x43ca9b(0x16d)]())/(0x3e8*0x3c))}});}catch(_0x3d4cb5){_0x532184['status'](0x1f4)['json']({'success':![],'message':_0x3d4cb5 instanceof Error?_0x3d4cb5['message']:'Failed\x20to\x20get\x20payment\x20information'});}}),router[a19_0x254366(0x1b4)](a19_0x254366(0x183),(_0x352c9e,_0x4b1d28)=>{const _0x51977b=a19_0x254366;try{const _0x5cb574=domainMonitoringService_1[_0x51977b(0x194)][_0x51977b(0x179)]();_0x4b1d28[_0x51977b(0x19c)]({'success':!![],'result':{..._0x5cb574,'description':_0x51977b(0x172),'behavior':'Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','encoding':'Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs'}});}catch(_0x194ef5){_0x4b1d28[_0x51977b(0x1b9)](0x1f4)['json']({'success':![],'message':_0x51977b(0x1d2)});}}),router[a19_0x254366(0x1c8)]('/domain-monitoring/check',async(_0x3f7de4,_0x171df9)=>{const _0x559001=a19_0x254366;try{const _0x5d57d4=await domainMonitoringService_1['domainMonitoringService']['manualCheck']();_0x171df9[_0x559001(0x19c)]({'success':!![],'result':{'domainAvailable':_0x5d57d4,'message':_0x5d57d4?_0x559001(0x197):'Domain\x20check\x20failed','timestamp':new Date()[_0x559001(0x198)]()}});}catch(_0x2f2767){_0x171df9[_0x559001(0x1b9)](0x1f4)[_0x559001(0x19c)]({'success':![],'message':_0x2f2767 instanceof Error?_0x2f2767[_0x559001(0x1bc)]:_0x559001(0x1c2)});}}),exports[a19_0x254366(0x17b)]=router;