'use strict';const a18_0x3c80a2=a18_0x33a7;(function(_0x4a0d28,_0x5a6b54){const _0x291168=a18_0x33a7,_0x59e54c=_0x4a0d28();while(!![]){try{const _0x402a77=parseInt(_0x291168(0x13f))/0x1+-parseInt(_0x291168(0x140))/0x2+-parseInt(_0x291168(0x139))/0x3*(-parseInt(_0x291168(0x109))/0x4)+parseInt(_0x291168(0x134))/0x5+parseInt(_0x291168(0x121))/0x6+parseInt(_0x291168(0xec))/0x7*(parseInt(_0x291168(0x128))/0x8)+-parseInt(_0x291168(0x13b))/0x9*(parseInt(_0x291168(0x113))/0xa);if(_0x402a77===_0x5a6b54)break;else _0x59e54c['push'](_0x59e54c['shift']());}catch(_0x37f03d){_0x59e54c['push'](_0x59e54c['shift']());}}}(a18_0x2d11,0xdab7e));function a18_0x2d11(){const _0x163abe=['error','length','getPaymentById','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','getServiceStats','getPayments','updatedAt','getPaymentTimerInfo','use','__importStar','PAID','createPayoutSchema','create','/users/:id','getPayoutStats','gateway','now','configurable','writable','getLogStats','__setModuleDefault','toISOString','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','/payments/:id','getMerchantStatistics','1948Tcmnal','post','hasOwnProperty','loggerService','Payments\x20automatically\x20expire\x20after\x20','express','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','updateUserSchema','createUserSchema','41724650UlNEuN','PENDING','Failed\x20to\x20get\x20log\x20statistics','/cointopay/payment/:paymentId','../middleware/validation','activateUser','../services/coinToPayStatusService','get','paymentId','Domain\x20is\x20responding\x20correctly','/cointopay/stats','Router','updatePayment','/payments','8401866FwIYPt','resolve','floor','log','call','createdAt','Domain\x20check\x20failed','636536ndKjAP','updateCustomerDataSchema','expiryDays','checkAuth','checkPaymentById','deletePayout','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','getMonitoringStats','findUnique','../services/domainMonitoringService','then','getTime','3758150ROVzps','/domain-monitoring/stats','../middleware/auth','default','/payouts','8805httxhq','__createBinding','9oOBWgL','\x20days\x20if\x20not\x20paid','/auth','EXPIRED','1054768RwvpHc','1045046vNjunZ','json','getUsers','/payouts/:id','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','/payments/:id/customer','currency','/users','getMerchantsAwaitingPayout','getStatistics','prototype','requireAdmin','shop','params','/payout/stats','/payout/merchants','/logs/stats','../services/loggerService','validate','put','CoinToPay\x20payment\x20status\x20checked\x20successfully','getOwnPropertyNames','coinToPayStatusService','cleanOldLogs','/domain-monitoring/check','suspendUser','authenticateToken','__esModule','Failed\x20to\x20perform\x20manual\x20domain\x20check','\x20days)','/cointopay/check/:paymentId','/payout','delete','Failed\x20to\x20get\x20payment\x20information','payment','gatewayPaymentId','createUser','message','status','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','FAILED','defineProperty','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','domainMonitoringService','createPayout','84YwPDxg','/merchant-statistics','body','/logs/clean'];a18_0x2d11=function(){return _0x163abe;};return a18_0x2d11();}var __createBinding=this&&this[a18_0x3c80a2(0x13a)]||(Object[a18_0x3c80a2(0xfc)]?function(_0x4cdeba,_0x19f0db,_0x34f1d4,_0x23534e){const _0x1c248d=a18_0x3c80a2;if(_0x23534e===undefined)_0x23534e=_0x34f1d4;var _0xba0ed5=Object['getOwnPropertyDescriptor'](_0x19f0db,_0x34f1d4);(!_0xba0ed5||(_0x1c248d(0x11a)in _0xba0ed5?!_0x19f0db[_0x1c248d(0xda)]:_0xba0ed5[_0x1c248d(0x102)]||_0xba0ed5[_0x1c248d(0x101)]))&&(_0xba0ed5={'enumerable':!![],'get':function(){return _0x19f0db[_0x34f1d4];}}),Object[_0x1c248d(0xe8)](_0x4cdeba,_0x23534e,_0xba0ed5);}:function(_0x127e92,_0x47b832,_0x1d3549,_0x26f799){if(_0x26f799===undefined)_0x26f799=_0x1d3549;_0x127e92[_0x26f799]=_0x47b832[_0x1d3549];}),__setModuleDefault=this&&this[a18_0x3c80a2(0x104)]||(Object[a18_0x3c80a2(0xfc)]?function(_0x45d8c5,_0x8d645c){const _0x1e50f1=a18_0x3c80a2;Object['defineProperty'](_0x45d8c5,_0x1e50f1(0x137),{'enumerable':!![],'value':_0x8d645c});}:function(_0x23aeb7,_0x3cea24){const _0x2f05c6=a18_0x3c80a2;_0x23aeb7[_0x2f05c6(0x137)]=_0x3cea24;}),__importStar=this&&this[a18_0x3c80a2(0xf9)]||(function(){var _0x4eb114=function(_0x3b34ec){const _0x4586f1=a18_0x33a7;return _0x4eb114=Object[_0x4586f1(0xd4)]||function(_0x3e248c){const _0x190190=_0x4586f1;var _0x209024=[];for(var _0x12015a in _0x3e248c)if(Object[_0x190190(0xc9)][_0x190190(0x10b)][_0x190190(0x125)](_0x3e248c,_0x12015a))_0x209024[_0x209024[_0x190190(0xf1)]]=_0x12015a;return _0x209024;},_0x4eb114(_0x3b34ec);};return function(_0x125cbb){const _0x581530=a18_0x33a7;if(_0x125cbb&&_0x125cbb['__esModule'])return _0x125cbb;var _0x2df78b={};if(_0x125cbb!=null){for(var _0x20444f=_0x4eb114(_0x125cbb),_0x4635cd=0x0;_0x4635cd<_0x20444f['length'];_0x4635cd++)if(_0x20444f[_0x4635cd]!==_0x581530(0x137))__createBinding(_0x2df78b,_0x125cbb,_0x20444f[_0x4635cd]);}return __setModuleDefault(_0x2df78b,_0x125cbb),_0x2df78b;};}());function a18_0x33a7(_0x1ecee5,_0x11b861){const _0x2d119c=a18_0x2d11();return a18_0x33a7=function(_0x33a741,_0x28ba4d){_0x33a741=_0x33a741-0xc1;let _0x283b57=_0x2d119c[_0x33a741];return _0x283b57;},a18_0x33a7(_0x1ecee5,_0x11b861);}Object[a18_0x3c80a2(0xe8)](exports,a18_0x3c80a2(0xda),{'value':!![]});const express_1=require(a18_0x3c80a2(0x10e)),adminController_1=require('../controllers/adminController'),validation_1=require(a18_0x3c80a2(0x117)),auth_1=require(a18_0x3c80a2(0x136)),loggerService_1=require(a18_0x3c80a2(0xd0)),coinToPayStatusService_1=require(a18_0x3c80a2(0x119)),domainMonitoringService_1=require(a18_0x3c80a2(0x131)),router=(0x0,express_1[a18_0x3c80a2(0x11e)])(),adminController=new adminController_1['AdminController']();router[a18_0x3c80a2(0xf8)](auth_1[a18_0x3c80a2(0xd9)],auth_1[a18_0x3c80a2(0xca)]),router['get'](a18_0x3c80a2(0x13d),adminController[a18_0x3c80a2(0x12b)]),router[a18_0x3c80a2(0x11a)]('/statistics',adminController[a18_0x3c80a2(0xc8)]),router[a18_0x3c80a2(0x11a)](a18_0x3c80a2(0xed),adminController[a18_0x3c80a2(0x108)]),router[a18_0x3c80a2(0x11a)](a18_0x3c80a2(0xcd),adminController[a18_0x3c80a2(0xfe)]),router['get'](a18_0x3c80a2(0xce),adminController[a18_0x3c80a2(0xc7)]),router[a18_0x3c80a2(0x10a)](a18_0x3c80a2(0xde),(0x0,validation_1[a18_0x3c80a2(0xd1)])(validation_1[a18_0x3c80a2(0xfb)]),adminController[a18_0x3c80a2(0xeb)]),router[a18_0x3c80a2(0x11a)](a18_0x3c80a2(0x138),adminController['getPayouts']),router[a18_0x3c80a2(0x11a)](a18_0x3c80a2(0xc2),adminController['getPayoutById']),router[a18_0x3c80a2(0xdf)](a18_0x3c80a2(0xc2),adminController[a18_0x3c80a2(0x12d)]),router[a18_0x3c80a2(0x11a)](a18_0x3c80a2(0x120),adminController[a18_0x3c80a2(0xf5)]),router[a18_0x3c80a2(0x11a)]('/payments/:id',adminController[a18_0x3c80a2(0xf2)]),router[a18_0x3c80a2(0xd2)](a18_0x3c80a2(0x107),adminController[a18_0x3c80a2(0x11f)]),router[a18_0x3c80a2(0xd2)](a18_0x3c80a2(0xc4),(0x0,validation_1['validate'])(validation_1[a18_0x3c80a2(0x129)]),adminController['updateCustomerData']),router[a18_0x3c80a2(0x11a)]('/users',adminController[a18_0x3c80a2(0xc1)]),router[a18_0x3c80a2(0x11a)](a18_0x3c80a2(0xfd),adminController['getUserById']),router['post'](a18_0x3c80a2(0xc6),(0x0,validation_1[a18_0x3c80a2(0xd1)])(validation_1[a18_0x3c80a2(0x112)]),adminController[a18_0x3c80a2(0xe3)]),router['put'](a18_0x3c80a2(0xfd),(0x0,validation_1[a18_0x3c80a2(0xd1)])(validation_1[a18_0x3c80a2(0x111)]),adminController['updateUser']),router[a18_0x3c80a2(0xdf)](a18_0x3c80a2(0xfd),adminController['deleteUser']),router[a18_0x3c80a2(0x10a)]('/users/:id/suspend',adminController[a18_0x3c80a2(0xd8)]),router[a18_0x3c80a2(0x10a)]('/users/:id/activate',adminController[a18_0x3c80a2(0x118)]),router[a18_0x3c80a2(0x11a)](a18_0x3c80a2(0xcf),(_0x52b6dd,_0x197bc1)=>{const _0x724031=a18_0x3c80a2;try{const _0x367a52=loggerService_1[_0x724031(0x10c)][_0x724031(0x103)]();_0x197bc1[_0x724031(0x141)]({'success':!![],'result':_0x367a52});}catch(_0x4d8970){_0x197bc1[_0x724031(0xe5)](0x1f4)[_0x724031(0x141)]({'success':![],'message':_0x724031(0x115)});}}),router[a18_0x3c80a2(0x10a)](a18_0x3c80a2(0xef),(_0x30cc27,_0x2686ce)=>{const _0x29c836=a18_0x3c80a2;try{const {daysToKeep:daysToKeep=0x1e}=_0x30cc27[_0x29c836(0xee)];loggerService_1['loggerService'][_0x29c836(0xd6)](daysToKeep),_0x2686ce['json']({'success':!![],'message':'Old\x20logs\x20cleaned\x20(kept\x20last\x20'+daysToKeep+_0x29c836(0xdc)});}catch(_0x26ac1d){_0x2686ce['status'](0x1f4)[_0x29c836(0x141)]({'success':![],'message':'Failed\x20to\x20clean\x20old\x20logs'});}}),router[a18_0x3c80a2(0x10a)](a18_0x3c80a2(0xdd),async(_0x34ad46,_0x1aeb04)=>{const _0x1b46f=a18_0x3c80a2;try{const {paymentId:_0x26ae00}=_0x34ad46['params'];console[_0x1b46f(0x124)](_0x1b46f(0x106)+_0x26ae00),await coinToPayStatusService_1[_0x1b46f(0xd5)][_0x1b46f(0x12c)](_0x26ae00),_0x1aeb04[_0x1b46f(0x141)]({'success':!![],'message':_0x1b46f(0xd3)});}catch(_0x160f60){console[_0x1b46f(0xf0)](_0x1b46f(0xe6)+_0x34ad46[_0x1b46f(0xcc)][_0x1b46f(0x11b)]+':',_0x160f60),_0x1aeb04[_0x1b46f(0xe5)](0x1f4)[_0x1b46f(0x141)]({'success':![],'message':_0x160f60 instanceof Error?_0x160f60['message']:_0x1b46f(0xe9)});}}),router[a18_0x3c80a2(0x11a)](a18_0x3c80a2(0x11d),(_0x33818c,_0x17570a)=>{const _0x15437b=a18_0x3c80a2;try{const _0x2a7443=coinToPayStatusService_1[_0x15437b(0xd5)][_0x15437b(0xf4)]();_0x17570a[_0x15437b(0x141)]({'success':!![],'result':{..._0x2a7443,'description':'CoinToPay\x20automatic\x20status\x20checking\x20service','statusMapping':{'Paid':_0x15437b(0xfa),'Awaiting\x20Fiat':_0x15437b(0x114),'waiting':'PENDING','expired':_0x15437b(0x13e),'failed':_0x15437b(0xe7)},'autoExpiryNote':_0x15437b(0x10d)+_0x2a7443[_0x15437b(0x12a)]+_0x15437b(0x13c),'individualTimersNote':_0x15437b(0xf3)}});}catch(_0x23f768){_0x17570a[_0x15437b(0xe5)](0x1f4)[_0x15437b(0x141)]({'success':![],'message':_0x15437b(0x110)});}}),router[a18_0x3c80a2(0x11a)](a18_0x3c80a2(0x116),async(_0x4c2ea4,_0x345deb)=>{const _0x52b7cf=a18_0x3c80a2;try{const {paymentId:_0xf53809}=_0x4c2ea4[_0x52b7cf(0xcc)],_0x2c2664=coinToPayStatusService_1[_0x52b7cf(0xd5)][_0x52b7cf(0xf7)](_0xf53809),_0x58fd5f=(await Promise[_0x52b7cf(0x122)]()[_0x52b7cf(0x132)](()=>__importStar(require('../config/database'))))[_0x52b7cf(0x137)],_0x33b8a7=await _0x58fd5f[_0x52b7cf(0xe1)][_0x52b7cf(0x130)]({'where':{'id':_0xf53809},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x33b8a7)return _0x345deb[_0x52b7cf(0xe5)](0x194)[_0x52b7cf(0x141)]({'success':![],'message':'Payment\x20not\x20found'});_0x345deb[_0x52b7cf(0x141)]({'success':!![],'result':{'payment':{'id':_0x33b8a7['id'],'gateway':_0x33b8a7[_0x52b7cf(0xff)],'gatewayPaymentId':_0x33b8a7[_0x52b7cf(0xe2)],'status':_0x33b8a7[_0x52b7cf(0xe5)],'amount':_0x33b8a7['amount'],'currency':_0x33b8a7[_0x52b7cf(0xc5)],'createdAt':_0x33b8a7['createdAt'],'updatedAt':_0x33b8a7[_0x52b7cf(0xf6)],'shop':_0x33b8a7[_0x52b7cf(0xcb)]},'timers':_0x2c2664,'isCoinToPay':_0x33b8a7[_0x52b7cf(0xff)]==='cointopay','ageInMinutes':Math[_0x52b7cf(0x123)]((Date[_0x52b7cf(0x100)]()-_0x33b8a7[_0x52b7cf(0x126)][_0x52b7cf(0x133)]())/(0x3e8*0x3c))}});}catch(_0x3c7293){_0x345deb[_0x52b7cf(0xe5)](0x1f4)[_0x52b7cf(0x141)]({'success':![],'message':_0x3c7293 instanceof Error?_0x3c7293[_0x52b7cf(0xe4)]:_0x52b7cf(0xe0)});}}),router[a18_0x3c80a2(0x11a)](a18_0x3c80a2(0x135),(_0x1e9059,_0x4048bb)=>{const _0x37a5cc=a18_0x3c80a2;try{const _0x4a27cd=domainMonitoringService_1[_0x37a5cc(0xea)][_0x37a5cc(0x12f)]();_0x4048bb[_0x37a5cc(0x141)]({'success':!![],'result':{..._0x4a27cd,'description':'Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','behavior':_0x37a5cc(0x10f),'encoding':_0x37a5cc(0xc3)}});}catch(_0x2d53fe){_0x4048bb[_0x37a5cc(0xe5)](0x1f4)[_0x37a5cc(0x141)]({'success':![],'message':_0x37a5cc(0x12e)});}}),router['post'](a18_0x3c80a2(0xd7),async(_0x24516c,_0x119688)=>{const _0x15ece6=a18_0x3c80a2;try{const _0x51b194=await domainMonitoringService_1[_0x15ece6(0xea)]['manualCheck']();_0x119688[_0x15ece6(0x141)]({'success':!![],'result':{'domainAvailable':_0x51b194,'message':_0x51b194?_0x15ece6(0x11c):_0x15ece6(0x127),'timestamp':new Date()[_0x15ece6(0x105)]()}});}catch(_0x159d8d){_0x119688[_0x15ece6(0xe5)](0x1f4)[_0x15ece6(0x141)]({'success':![],'message':_0x159d8d instanceof Error?_0x159d8d[_0x15ece6(0xe4)]:_0x15ece6(0xdb)});}}),exports[a18_0x3c80a2(0x137)]=router;