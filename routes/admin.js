'use strict';function a19_0x3dd5(){const _0x3987e1=['PENDING','authenticateToken','createPayout','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','hasOwnProperty','json','FAILED','checkPaymentById','304348NYvUTE','__importStar','/users/:id','updateCustomerDataSchema','/auth','/domain-monitoring/check','46178dAVhUL','__esModule','getServiceStats','44CVobDb','now','updateUserSchema','expiryDays','cointopay','defineProperty','../middleware/validation','manualCheck','amount','__createBinding','/logs/stats','Router','270ToeswY','params','deletePayout','cleanOldLogs','/merchant-statistics','createPayoutSchema','../config/database','../controllers/adminController','CoinToPay\x20automatic\x20status\x20checking\x20service','floor','Failed\x20to\x20perform\x20manual\x20domain\x20check','put','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','Failed\x20to\x20get\x20payment\x20information','post','getPaymentTimerInfo','/payments/:id/customer','getStatistics','/users','payment','24ZRcUMw','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','updatePayment','updateCustomerData','error','320257ZAYhnu','Domain\x20is\x20responding\x20correctly','/payout/stats','PAID','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','domainMonitoringService','/payments/:id','AdminController','status','suspendUser','createdAt','/users/:id/activate','getTime','../middleware/auth','/payments','deleteUser','createUser','36FjXjKg','log','writable','getLogStats','getOwnPropertyDescriptor','create','/payout','message','Old\x20logs\x20cleaned\x20(kept\x20last\x20','getPayoutStats','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','shop','Payments\x20automatically\x20expire\x20after\x20','getPayouts','../services/coinToPayStatusService','getPayoutById','requireAdmin','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','69120ZaTXgE','getMerchantsAwaitingPayout','/payout/merchants','default','get','54cQSVJc','coinToPayStatusService','delete','845504WBFgjD','toISOString','/payouts','getPayments','28016616wgoihv','gatewayPaymentId','use','\x20days\x20if\x20not\x20paid','getMonitoringStats','\x20days)','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','CoinToPay\x20payment\x20status\x20checked\x20successfully','validate','/payouts/:id','gateway','/users/:id/suspend','Failed\x20to\x20clean\x20old\x20logs','resolve','/cointopay/check/:paymentId','/domain-monitoring/stats','then','activateUser','paymentId','__setModuleDefault','body','18682bkESpv','getUserById'];a19_0x3dd5=function(){return _0x3987e1;};return a19_0x3dd5();}const a19_0x212189=a19_0x3069;(function(_0x504349,_0x4a286b){const _0x56c2b2=a19_0x3069,_0x1bdbbd=_0x504349();while(!![]){try{const _0xebe9cf=parseInt(_0x56c2b2(0xcc))/0x1*(-parseInt(_0x56c2b2(0xdf))/0x2)+parseInt(_0x56c2b2(0x83))/0x3*(-parseInt(_0x56c2b2(0xd6))/0x4)+parseInt(_0x56c2b2(0xab))/0x5+parseInt(_0x56c2b2(0xb0))/0x6*(-parseInt(_0x56c2b2(0x88))/0x7)+parseInt(_0x56c2b2(0xb3))/0x8*(-parseInt(_0x56c2b2(0x99))/0x9)+parseInt(_0x56c2b2(0xeb))/0xa*(-parseInt(_0x56c2b2(0xdc))/0xb)+parseInt(_0x56c2b2(0xb7))/0xc;if(_0xebe9cf===_0x4a286b)break;else _0x1bdbbd['push'](_0x1bdbbd['shift']());}catch(_0x2d7a71){_0x1bdbbd['push'](_0x1bdbbd['shift']());}}}(a19_0x3dd5,0x5d039));function a19_0x3069(_0x3a2e75,_0x296ff3){const _0x3dd5af=a19_0x3dd5();return a19_0x3069=function(_0x3069c6,_0x2e6564){_0x3069c6=_0x3069c6-0x82;let _0x4ea64d=_0x3dd5af[_0x3069c6];return _0x4ea64d;},a19_0x3069(_0x3a2e75,_0x296ff3);}var __createBinding=this&&this[a19_0x212189(0xe8)]||(Object[a19_0x212189(0x9e)]?function(_0xb0a5bb,_0xb5fdc4,_0x21e942,_0xf3ae4f){const _0x3410c0=a19_0x212189;if(_0xf3ae4f===undefined)_0xf3ae4f=_0x21e942;var _0x4c64f7=Object[_0x3410c0(0x9d)](_0xb5fdc4,_0x21e942);(!_0x4c64f7||(_0x3410c0(0xaf)in _0x4c64f7?!_0xb5fdc4['__esModule']:_0x4c64f7[_0x3410c0(0x9b)]||_0x4c64f7['configurable']))&&(_0x4c64f7={'enumerable':!![],'get':function(){return _0xb5fdc4[_0x21e942];}}),Object[_0x3410c0(0xe4)](_0xb0a5bb,_0xf3ae4f,_0x4c64f7);}:function(_0x1fd725,_0x472bec,_0x5627da,_0x9adaa6){if(_0x9adaa6===undefined)_0x9adaa6=_0x5627da;_0x1fd725[_0x9adaa6]=_0x472bec[_0x5627da];}),__setModuleDefault=this&&this[a19_0x212189(0xca)]||(Object['create']?function(_0x4ff418,_0x161edb){const _0x5ecf0a=a19_0x212189;Object[_0x5ecf0a(0xe4)](_0x4ff418,_0x5ecf0a(0xae),{'enumerable':!![],'value':_0x161edb});}:function(_0xb9c3c1,_0x1d3202){const _0x5b714a=a19_0x212189;_0xb9c3c1[_0x5b714a(0xae)]=_0x1d3202;}),__importStar=this&&this[a19_0x212189(0xd7)]||(function(){var _0x55d98a=function(_0x1d2b17){return _0x55d98a=Object['getOwnPropertyNames']||function(_0x48fcde){const _0x5187f6=a19_0x3069;var _0x49c725=[];for(var _0x17f81d in _0x48fcde)if(Object['prototype'][_0x5187f6(0xd2)]['call'](_0x48fcde,_0x17f81d))_0x49c725[_0x49c725['length']]=_0x17f81d;return _0x49c725;},_0x55d98a(_0x1d2b17);};return function(_0x238af2){const _0x1ba052=a19_0x3069;if(_0x238af2&&_0x238af2[_0x1ba052(0xdd)])return _0x238af2;var _0x466545={};if(_0x238af2!=null){for(var _0x1f7494=_0x55d98a(_0x238af2),_0x2d50f0=0x0;_0x2d50f0<_0x1f7494['length'];_0x2d50f0++)if(_0x1f7494[_0x2d50f0]!==_0x1ba052(0xae))__createBinding(_0x466545,_0x238af2,_0x1f7494[_0x2d50f0]);}return __setModuleDefault(_0x466545,_0x238af2),_0x466545;};}());Object[a19_0x212189(0xe4)](exports,a19_0x212189(0xdd),{'value':!![]});const express_1=require('express'),adminController_1=require(a19_0x212189(0xf2)),validation_1=require(a19_0x212189(0xe5)),auth_1=require(a19_0x212189(0x95)),loggerService_1=require('../services/loggerService'),coinToPayStatusService_1=require(a19_0x212189(0xa7)),domainMonitoringService_1=require('../services/domainMonitoringService'),router=(0x0,express_1[a19_0x212189(0xea)])(),adminController=new adminController_1[(a19_0x212189(0x8f))]();router[a19_0x212189(0xb9)](auth_1[a19_0x212189(0xcf)],auth_1[a19_0x212189(0xa9)]),router[a19_0x212189(0xaf)](a19_0x212189(0xda),adminController['checkAuth']),router['get']('/statistics',adminController[a19_0x212189(0xfc)]),router[a19_0x212189(0xaf)](a19_0x212189(0xef),adminController['getMerchantStatistics']),router['get'](a19_0x212189(0x8a),adminController[a19_0x212189(0xa2)]),router[a19_0x212189(0xaf)](a19_0x212189(0xad),adminController[a19_0x212189(0xac)]),router[a19_0x212189(0xf9)](a19_0x212189(0x9f),(0x0,validation_1['validate'])(validation_1[a19_0x212189(0xf0)]),adminController[a19_0x212189(0xd0)]),router['get'](a19_0x212189(0xb5),adminController[a19_0x212189(0xa6)]),router['get'](a19_0x212189(0xc0),adminController[a19_0x212189(0xa8)]),router[a19_0x212189(0xb2)](a19_0x212189(0xc0),adminController[a19_0x212189(0xed)]),router[a19_0x212189(0xaf)](a19_0x212189(0x96),adminController[a19_0x212189(0xb6)]),router['get']('/payments/:id',adminController['getPaymentById']),router[a19_0x212189(0xf6)](a19_0x212189(0x8e),adminController[a19_0x212189(0x85)]),router[a19_0x212189(0xf6)](a19_0x212189(0xfb),(0x0,validation_1[a19_0x212189(0xbf)])(validation_1[a19_0x212189(0xd9)]),adminController[a19_0x212189(0x86)]),router[a19_0x212189(0xaf)](a19_0x212189(0xfd),adminController['getUsers']),router[a19_0x212189(0xaf)](a19_0x212189(0xd8),adminController[a19_0x212189(0xcd)]),router[a19_0x212189(0xf9)](a19_0x212189(0xfd),(0x0,validation_1[a19_0x212189(0xbf)])(validation_1['createUserSchema']),adminController[a19_0x212189(0x98)]),router[a19_0x212189(0xf6)](a19_0x212189(0xd8),(0x0,validation_1[a19_0x212189(0xbf)])(validation_1[a19_0x212189(0xe1)]),adminController['updateUser']),router[a19_0x212189(0xb2)](a19_0x212189(0xd8),adminController[a19_0x212189(0x97)]),router[a19_0x212189(0xf9)](a19_0x212189(0xc2),adminController[a19_0x212189(0x91)]),router[a19_0x212189(0xf9)](a19_0x212189(0x93),adminController[a19_0x212189(0xc8)]),router[a19_0x212189(0xaf)](a19_0x212189(0xe9),(_0x5aa764,_0x7227c2)=>{const _0x471acb=a19_0x212189;try{const _0x1dadc6=loggerService_1['loggerService'][_0x471acb(0x9c)]();_0x7227c2[_0x471acb(0xd3)]({'success':!![],'result':_0x1dadc6});}catch(_0xdd8450){_0x7227c2[_0x471acb(0x90)](0x1f4)['json']({'success':![],'message':'Failed\x20to\x20get\x20log\x20statistics'});}}),router[a19_0x212189(0xf9)]('/logs/clean',(_0x13ac29,_0x148f16)=>{const _0x6cf1bd=a19_0x212189;try{const {daysToKeep:daysToKeep=0x1e}=_0x13ac29[_0x6cf1bd(0xcb)];loggerService_1['loggerService'][_0x6cf1bd(0xee)](daysToKeep),_0x148f16['json']({'success':!![],'message':_0x6cf1bd(0xa1)+daysToKeep+_0x6cf1bd(0xbc)});}catch(_0x563be8){_0x148f16[_0x6cf1bd(0x90)](0x1f4)[_0x6cf1bd(0xd3)]({'success':![],'message':_0x6cf1bd(0xc3)});}}),router[a19_0x212189(0xf9)](a19_0x212189(0xc5),async(_0x1d0bfa,_0x3b6a0f)=>{const _0xb92a76=a19_0x212189;try{const {paymentId:_0x4dc258}=_0x1d0bfa[_0xb92a76(0xec)];console[_0xb92a76(0x9a)](_0xb92a76(0xf7)+_0x4dc258),await coinToPayStatusService_1[_0xb92a76(0xb1)][_0xb92a76(0xd5)](_0x4dc258),_0x3b6a0f[_0xb92a76(0xd3)]({'success':!![],'message':_0xb92a76(0xbe)});}catch(_0x54f434){console[_0xb92a76(0x87)](_0xb92a76(0x84)+_0x1d0bfa[_0xb92a76(0xec)][_0xb92a76(0xc9)]+':',_0x54f434),_0x3b6a0f[_0xb92a76(0x90)](0x1f4)[_0xb92a76(0xd3)]({'success':![],'message':_0x54f434 instanceof Error?_0x54f434[_0xb92a76(0xa0)]:_0xb92a76(0x8c)});}}),router[a19_0x212189(0xaf)]('/cointopay/stats',(_0x410837,_0x538a69)=>{const _0x47eaae=a19_0x212189;try{const _0xd44737=coinToPayStatusService_1[_0x47eaae(0xb1)][_0x47eaae(0xde)]();_0x538a69[_0x47eaae(0xd3)]({'success':!![],'result':{..._0xd44737,'description':_0x47eaae(0xf3),'statusMapping':{'Paid':_0x47eaae(0x8b),'Awaiting\x20Fiat':_0x47eaae(0xce),'waiting':_0x47eaae(0xce),'expired':'EXPIRED','failed':_0x47eaae(0xd4)},'autoExpiryNote':_0x47eaae(0xa5)+_0xd44737[_0x47eaae(0xe2)]+_0x47eaae(0xba),'individualTimersNote':'Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly'}});}catch(_0x23a9b4){_0x538a69[_0x47eaae(0x90)](0x1f4)['json']({'success':![],'message':_0x47eaae(0xa3)});}}),router[a19_0x212189(0xaf)]('/cointopay/payment/:paymentId',async(_0x29e27f,_0x385709)=>{const _0x23a399=a19_0x212189;try{const {paymentId:_0x96a2db}=_0x29e27f['params'],_0x1110da=coinToPayStatusService_1[_0x23a399(0xb1)][_0x23a399(0xfa)](_0x96a2db),_0x100cb5=(await Promise[_0x23a399(0xc4)]()[_0x23a399(0xc7)](()=>__importStar(require(_0x23a399(0xf1)))))[_0x23a399(0xae)],_0x41e7a8=await _0x100cb5[_0x23a399(0x82)]['findUnique']({'where':{'id':_0x96a2db},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x41e7a8)return _0x385709[_0x23a399(0x90)](0x194)[_0x23a399(0xd3)]({'success':![],'message':'Payment\x20not\x20found'});_0x385709['json']({'success':!![],'result':{'payment':{'id':_0x41e7a8['id'],'gateway':_0x41e7a8[_0x23a399(0xc1)],'gatewayPaymentId':_0x41e7a8[_0x23a399(0xb8)],'status':_0x41e7a8[_0x23a399(0x90)],'amount':_0x41e7a8[_0x23a399(0xe7)],'currency':_0x41e7a8['currency'],'createdAt':_0x41e7a8[_0x23a399(0x92)],'updatedAt':_0x41e7a8['updatedAt'],'shop':_0x41e7a8[_0x23a399(0xa4)]},'timers':_0x1110da,'isCoinToPay':_0x41e7a8[_0x23a399(0xc1)]===_0x23a399(0xe3),'ageInMinutes':Math[_0x23a399(0xf4)]((Date[_0x23a399(0xe0)]()-_0x41e7a8['createdAt'][_0x23a399(0x94)]())/(0x3e8*0x3c))}});}catch(_0xb040e4){_0x385709[_0x23a399(0x90)](0x1f4)[_0x23a399(0xd3)]({'success':![],'message':_0xb040e4 instanceof Error?_0xb040e4[_0x23a399(0xa0)]:_0x23a399(0xf8)});}}),router[a19_0x212189(0xaf)](a19_0x212189(0xc6),(_0x50aea8,_0x47bc55)=>{const _0x6a99da=a19_0x212189;try{const _0x11c1bb=domainMonitoringService_1[_0x6a99da(0x8d)][_0x6a99da(0xbb)]();_0x47bc55['json']({'success':!![],'result':{..._0x11c1bb,'description':'Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','behavior':_0x6a99da(0xd1),'encoding':_0x6a99da(0xaa)}});}catch(_0xd73d3b){_0x47bc55['status'](0x1f4)[_0x6a99da(0xd3)]({'success':![],'message':_0x6a99da(0xbd)});}}),router[a19_0x212189(0xf9)](a19_0x212189(0xdb),async(_0xd27395,_0x4c064b)=>{const _0x1fc38c=a19_0x212189;try{const _0x82d320=await domainMonitoringService_1['domainMonitoringService'][_0x1fc38c(0xe6)]();_0x4c064b['json']({'success':!![],'result':{'domainAvailable':_0x82d320,'message':_0x82d320?_0x1fc38c(0x89):'Domain\x20check\x20failed','timestamp':new Date()[_0x1fc38c(0xb4)]()}});}catch(_0x36a6b0){_0x4c064b[_0x1fc38c(0x90)](0x1f4)['json']({'success':![],'message':_0x36a6b0 instanceof Error?_0x36a6b0[_0x1fc38c(0xa0)]:_0x1fc38c(0xf5)});}}),exports[a19_0x212189(0xae)]=router;