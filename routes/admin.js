'use strict';const a19_0x30d534=a19_0xf9b6;(function(_0x4e28be,_0x2cd72f){const _0x5b037e=a19_0xf9b6,_0xa86a39=_0x4e28be();while(!![]){try{const _0x93d53f=parseInt(_0x5b037e(0x12e))/0x1*(parseInt(_0x5b037e(0x159))/0x2)+parseInt(_0x5b037e(0x135))/0x3+parseInt(_0x5b037e(0x15c))/0x4*(parseInt(_0x5b037e(0x152))/0x5)+parseInt(_0x5b037e(0x14a))/0x6*(-parseInt(_0x5b037e(0x127))/0x7)+-parseInt(_0x5b037e(0x18b))/0x8*(parseInt(_0x5b037e(0x123))/0x9)+-parseInt(_0x5b037e(0x126))/0xa*(-parseInt(_0x5b037e(0x18d))/0xb)+parseInt(_0x5b037e(0x12a))/0xc*(parseInt(_0x5b037e(0x150))/0xd);if(_0x93d53f===_0x2cd72f)break;else _0xa86a39['push'](_0xa86a39['shift']());}catch(_0x1181c4){_0xa86a39['push'](_0xa86a39['shift']());}}}(a19_0x3e47,0x9c87d));var __createBinding=this&&this[a19_0x30d534(0x18e)]||(Object[a19_0x30d534(0x155)]?function(_0x5f299f,_0x4af50c,_0x63ec66,_0x5633b){const _0x2ed623=a19_0x30d534;if(_0x5633b===undefined)_0x5633b=_0x63ec66;var _0x320864=Object[_0x2ed623(0x16e)](_0x4af50c,_0x63ec66);(!_0x320864||(_0x2ed623(0x13d)in _0x320864?!_0x4af50c[_0x2ed623(0x153)]:_0x320864[_0x2ed623(0x166)]||_0x320864[_0x2ed623(0x168)]))&&(_0x320864={'enumerable':!![],'get':function(){return _0x4af50c[_0x63ec66];}}),Object[_0x2ed623(0x132)](_0x5f299f,_0x5633b,_0x320864);}:function(_0x5e9632,_0x151166,_0x3535c6,_0x5553b8){if(_0x5553b8===undefined)_0x5553b8=_0x3535c6;_0x5e9632[_0x5553b8]=_0x151166[_0x3535c6];}),__setModuleDefault=this&&this[a19_0x30d534(0x129)]||(Object['create']?function(_0x3c2fd5,_0x96b269){const _0x5873ac=a19_0x30d534;Object[_0x5873ac(0x132)](_0x3c2fd5,_0x5873ac(0x119),{'enumerable':!![],'value':_0x96b269});}:function(_0xad27f8,_0x151a24){const _0x356f50=a19_0x30d534;_0xad27f8[_0x356f50(0x119)]=_0x151a24;}),__importStar=this&&this[a19_0x30d534(0x180)]||(function(){var _0x53a284=function(_0x26b200){const _0x4a1d60=a19_0xf9b6;return _0x53a284=Object[_0x4a1d60(0x13a)]||function(_0x31a6bc){const _0x28f05b=_0x4a1d60;var _0x559ca7=[];for(var _0x55465f in _0x31a6bc)if(Object[_0x28f05b(0x17f)][_0x28f05b(0x163)][_0x28f05b(0x161)](_0x31a6bc,_0x55465f))_0x559ca7[_0x559ca7[_0x28f05b(0x181)]]=_0x55465f;return _0x559ca7;},_0x53a284(_0x26b200);};return function(_0x5a9dd0){const _0x51abe3=a19_0xf9b6;if(_0x5a9dd0&&_0x5a9dd0[_0x51abe3(0x153)])return _0x5a9dd0;var _0x4cf907={};if(_0x5a9dd0!=null){for(var _0x24c62d=_0x53a284(_0x5a9dd0),_0x59c20a=0x0;_0x59c20a<_0x24c62d[_0x51abe3(0x181)];_0x59c20a++)if(_0x24c62d[_0x59c20a]!==_0x51abe3(0x119))__createBinding(_0x4cf907,_0x5a9dd0,_0x24c62d[_0x59c20a]);}return __setModuleDefault(_0x4cf907,_0x5a9dd0),_0x4cf907;};}());Object['defineProperty'](exports,a19_0x30d534(0x153),{'value':!![]});function a19_0x3e47(){const _0x1306e9=['domainMonitoringService','PAID','3532XNMExz','Failed\x20to\x20get\x20payment\x20information','requireAdmin','express','/users/:id','call','AdminController','hasOwnProperty','findUnique','currency','writable','/payout','configurable','/payouts','createUserSchema','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','/merchant-statistics','updateUser','getOwnPropertyDescriptor','put','checkAuth','/users/:id/activate','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','../services/coinToPayStatusService','\x20days)','suspendUser','Old\x20logs\x20cleaned\x20(kept\x20last\x20','❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','message','/cointopay/check/:paymentId','amount','authenticateToken','activateUser','/payments/:id','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','prototype','__importStar','length','delete','resolve','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','Failed\x20to\x20get\x20log\x20statistics','/cointopay/stats','validate','getUserById','/domain-monitoring/stats','getStatistics','432gEWsuH','getTime','77uTaqwQ','__createBinding','/payments','default','CoinToPay\x20payment\x20status\x20checked\x20successfully','Failed\x20to\x20perform\x20manual\x20domain\x20check','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','getPaymentTimerInfo','getMerchantStatistics','deleteUser','coinToPayStatusService','error','cointopay','205731mbOmvG','/cointopay/payment/:paymentId','getPayments','1564770HTdEBR','11431RIzitB','/payouts/:id','__setModuleDefault','59484AzxOfq','then','createdAt','../middleware/validation','73149vprqaS','FAILED','PENDING','gateway','defineProperty','post','/payments/:id/customer','541341wbnepR','/logs/stats','params','gatewayPaymentId','getMerchantsAwaitingPayout','getOwnPropertyNames','/logs/clean','createPayoutSchema','get','loggerService','getPaymentById','Payment\x20not\x20found','checkPaymentById','updateCustomerDataSchema','now','toISOString','/users/:id/suspend','Router','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','updateCustomerData','../services/loggerService','1308YmOKGJ','payment','json','../services/domainMonitoringService','../config/database','getLogStats','1222bZGOQC','/payout/stats','1945ewzHGU','__esModule','status','create','Domain\x20check\x20failed','deletePayout','getServiceStats','4zjxfUn'];a19_0x3e47=function(){return _0x1306e9;};return a19_0x3e47();}const express_1=require(a19_0x30d534(0x15f)),adminController_1=require('../controllers/adminController'),validation_1=require(a19_0x30d534(0x12d)),auth_1=require('../middleware/auth'),loggerService_1=require(a19_0x30d534(0x149)),coinToPayStatusService_1=require(a19_0x30d534(0x173)),domainMonitoringService_1=require(a19_0x30d534(0x14d)),router=(0x0,express_1[a19_0x30d534(0x146)])(),adminController=new adminController_1[(a19_0x30d534(0x162))]();function a19_0xf9b6(_0x4ec516,_0x1099d1){const _0x3e4717=a19_0x3e47();return a19_0xf9b6=function(_0xf9b6c5,_0x27eda3){_0xf9b6c5=_0xf9b6c5-0x118;let _0x10f3fe=_0x3e4717[_0xf9b6c5];return _0x10f3fe;},a19_0xf9b6(_0x4ec516,_0x1099d1);}router['use'](auth_1[a19_0x30d534(0x17b)],auth_1[a19_0x30d534(0x15e)]),router[a19_0x30d534(0x13d)]('/auth',adminController[a19_0x30d534(0x170)]),router[a19_0x30d534(0x13d)]('/statistics',adminController[a19_0x30d534(0x18a)]),router[a19_0x30d534(0x13d)](a19_0x30d534(0x16c),adminController[a19_0x30d534(0x11e)]),router[a19_0x30d534(0x13d)](a19_0x30d534(0x151),adminController['getPayoutStats']),router[a19_0x30d534(0x13d)]('/payout/merchants',adminController[a19_0x30d534(0x139)]),router['post'](a19_0x30d534(0x167),(0x0,validation_1['validate'])(validation_1[a19_0x30d534(0x13c)]),adminController['createPayout']),router['get'](a19_0x30d534(0x169),adminController['getPayouts']),router['get']('/payouts/:id',adminController['getPayoutById']),router[a19_0x30d534(0x182)](a19_0x30d534(0x128),adminController[a19_0x30d534(0x157)]),router[a19_0x30d534(0x13d)](a19_0x30d534(0x118),adminController[a19_0x30d534(0x125)]),router['get'](a19_0x30d534(0x17d),adminController[a19_0x30d534(0x13f)]),router['put']('/payments/:id',adminController['updatePayment']),router[a19_0x30d534(0x16f)](a19_0x30d534(0x134),(0x0,validation_1[a19_0x30d534(0x187)])(validation_1[a19_0x30d534(0x142)]),adminController[a19_0x30d534(0x148)]),router[a19_0x30d534(0x13d)]('/users',adminController['getUsers']),router['get'](a19_0x30d534(0x160),adminController[a19_0x30d534(0x188)]),router[a19_0x30d534(0x133)]('/users',(0x0,validation_1[a19_0x30d534(0x187)])(validation_1[a19_0x30d534(0x16a)]),adminController['createUser']),router[a19_0x30d534(0x16f)](a19_0x30d534(0x160),(0x0,validation_1['validate'])(validation_1['updateUserSchema']),adminController[a19_0x30d534(0x16d)]),router[a19_0x30d534(0x182)](a19_0x30d534(0x160),adminController[a19_0x30d534(0x11f)]),router[a19_0x30d534(0x133)](a19_0x30d534(0x145),adminController[a19_0x30d534(0x175)]),router[a19_0x30d534(0x133)](a19_0x30d534(0x171),adminController[a19_0x30d534(0x17c)]),router['get'](a19_0x30d534(0x136),(_0x58e7a1,_0x1f9072)=>{const _0x2c7aed=a19_0x30d534;try{const _0x484c74=loggerService_1[_0x2c7aed(0x13e)][_0x2c7aed(0x14f)]();_0x1f9072[_0x2c7aed(0x14c)]({'success':!![],'result':_0x484c74});}catch(_0x447004){_0x1f9072[_0x2c7aed(0x154)](0x1f4)['json']({'success':![],'message':_0x2c7aed(0x185)});}}),router[a19_0x30d534(0x133)](a19_0x30d534(0x13b),(_0x4b56a6,_0x5c3841)=>{const _0x390d0a=a19_0x30d534;try{const {daysToKeep:daysToKeep=0x1e}=_0x4b56a6['body'];loggerService_1[_0x390d0a(0x13e)]['cleanOldLogs'](daysToKeep),_0x5c3841[_0x390d0a(0x14c)]({'success':!![],'message':_0x390d0a(0x176)+daysToKeep+_0x390d0a(0x174)});}catch(_0x287a7d){_0x5c3841[_0x390d0a(0x154)](0x1f4)[_0x390d0a(0x14c)]({'success':![],'message':'Failed\x20to\x20clean\x20old\x20logs'});}}),router[a19_0x30d534(0x133)](a19_0x30d534(0x179),async(_0xd882cb,_0x53c9cb)=>{const _0x52a04c=a19_0x30d534;try{const {paymentId:_0x3517b7}=_0xd882cb[_0x52a04c(0x137)];console['log']('🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20'+_0x3517b7),await coinToPayStatusService_1[_0x52a04c(0x120)][_0x52a04c(0x141)](_0x3517b7),_0x53c9cb[_0x52a04c(0x14c)]({'success':!![],'message':_0x52a04c(0x11a)});}catch(_0x4b64e4){console[_0x52a04c(0x121)](_0x52a04c(0x177)+_0xd882cb[_0x52a04c(0x137)]['paymentId']+':',_0x4b64e4),_0x53c9cb[_0x52a04c(0x154)](0x1f4)[_0x52a04c(0x14c)]({'success':![],'message':_0x4b64e4 instanceof Error?_0x4b64e4[_0x52a04c(0x178)]:_0x52a04c(0x147)});}}),router[a19_0x30d534(0x13d)](a19_0x30d534(0x186),(_0x2b1513,_0x37905d)=>{const _0x4299d0=a19_0x30d534;try{const _0x34aadd=coinToPayStatusService_1[_0x4299d0(0x120)][_0x4299d0(0x158)]();_0x37905d[_0x4299d0(0x14c)]({'success':!![],'result':{..._0x34aadd,'description':'CoinToPay\x20automatic\x20status\x20checking\x20service','statusMapping':{'Paid':_0x4299d0(0x15b),'Awaiting\x20Fiat':_0x4299d0(0x130),'waiting':_0x4299d0(0x130),'expired':'EXPIRED','failed':_0x4299d0(0x12f)},'autoExpiryNote':'Payments\x20automatically\x20expire\x20after\x20'+_0x34aadd['expiryDays']+'\x20days\x20if\x20not\x20paid','individualTimersNote':_0x4299d0(0x184)}});}catch(_0x2e3955){_0x37905d[_0x4299d0(0x154)](0x1f4)[_0x4299d0(0x14c)]({'success':![],'message':'Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics'});}}),router['get'](a19_0x30d534(0x124),async(_0x370478,_0x58722f)=>{const _0x1bd9ca=a19_0x30d534;try{const {paymentId:_0x21ee8e}=_0x370478[_0x1bd9ca(0x137)],_0x4ff4d5=coinToPayStatusService_1[_0x1bd9ca(0x120)][_0x1bd9ca(0x11d)](_0x21ee8e),_0x244b08=(await Promise[_0x1bd9ca(0x183)]()[_0x1bd9ca(0x12b)](()=>__importStar(require(_0x1bd9ca(0x14e)))))['default'],_0x5d6414=await _0x244b08[_0x1bd9ca(0x14b)][_0x1bd9ca(0x164)]({'where':{'id':_0x21ee8e},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x5d6414)return _0x58722f[_0x1bd9ca(0x154)](0x194)['json']({'success':![],'message':_0x1bd9ca(0x140)});_0x58722f[_0x1bd9ca(0x14c)]({'success':!![],'result':{'payment':{'id':_0x5d6414['id'],'gateway':_0x5d6414['gateway'],'gatewayPaymentId':_0x5d6414[_0x1bd9ca(0x138)],'status':_0x5d6414[_0x1bd9ca(0x154)],'amount':_0x5d6414[_0x1bd9ca(0x17a)],'currency':_0x5d6414[_0x1bd9ca(0x165)],'createdAt':_0x5d6414['createdAt'],'updatedAt':_0x5d6414['updatedAt'],'shop':_0x5d6414['shop']},'timers':_0x4ff4d5,'isCoinToPay':_0x5d6414[_0x1bd9ca(0x131)]===_0x1bd9ca(0x122),'ageInMinutes':Math['floor']((Date[_0x1bd9ca(0x143)]()-_0x5d6414[_0x1bd9ca(0x12c)][_0x1bd9ca(0x18c)]())/(0x3e8*0x3c))}});}catch(_0x4becdc){_0x58722f[_0x1bd9ca(0x154)](0x1f4)[_0x1bd9ca(0x14c)]({'success':![],'message':_0x4becdc instanceof Error?_0x4becdc[_0x1bd9ca(0x178)]:_0x1bd9ca(0x15d)});}}),router[a19_0x30d534(0x13d)](a19_0x30d534(0x189),(_0x27c37c,_0x4f11ef)=>{const _0x2ef2c4=a19_0x30d534;try{const _0x241c54=domainMonitoringService_1['domainMonitoringService']['getMonitoringStats']();_0x4f11ef[_0x2ef2c4(0x14c)]({'success':!![],'result':{..._0x241c54,'description':_0x2ef2c4(0x11c),'behavior':_0x2ef2c4(0x172),'encoding':_0x2ef2c4(0x16b)}});}catch(_0x435c3b){_0x4f11ef[_0x2ef2c4(0x154)](0x1f4)['json']({'success':![],'message':_0x2ef2c4(0x17e)});}}),router[a19_0x30d534(0x133)]('/domain-monitoring/check',async(_0x8b3e77,_0x2a59f0)=>{const _0x58a20f=a19_0x30d534;try{const _0x28b90e=await domainMonitoringService_1[_0x58a20f(0x15a)]['manualCheck']();_0x2a59f0[_0x58a20f(0x14c)]({'success':!![],'result':{'domainAvailable':_0x28b90e,'message':_0x28b90e?'Domain\x20is\x20responding\x20correctly':_0x58a20f(0x156),'timestamp':new Date()[_0x58a20f(0x144)]()}});}catch(_0x38b6fe){_0x2a59f0[_0x58a20f(0x154)](0x1f4)['json']({'success':![],'message':_0x38b6fe instanceof Error?_0x38b6fe['message']:_0x58a20f(0x11b)});}}),exports[a19_0x30d534(0x119)]=router;