'use strict';function a19_0x2920(_0x3ec245,_0x1baf7c){const _0x1c751b=a19_0x1c75();return a19_0x2920=function(_0x29207a,_0x21e728){_0x29207a=_0x29207a-0x1a2;let _0x314338=_0x1c751b[_0x29207a];return _0x314338;},a19_0x2920(_0x3ec245,_0x1baf7c);}function a19_0x1c75(){const _0x2cc0e3=['validate','getUserById','14203fcCSgu','params','createdAt','shop','getStatistics','getPaymentById','__setModuleDefault','cleanOldLogs','/payouts','/payments/:id','body','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','Old\x20logs\x20cleaned\x20(kept\x20last\x20','defineProperty','/merchants/selection','createPayoutSchema','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','/payouts/:id','deletePayout','getMonitoringStats','/auth','\x20days\x20if\x20not\x20paid','18762230NQVoew','/cointopay/check/:paymentId','call','PENDING','coinToPayStatusService','updateCustomerData','createUser','1490kXrgcx','resolve','/payout','paymentId','findUnique','/users','expiryDays','configurable','__importStar','delete','Domain\x20check\x20failed','/users/:id','1506681mtNfXz','/users/:id/suspend','/cointopay/payment/:paymentId','getPayments','/logs/clean','../controllers/adminController','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','manualCheck','Router','default','createUserSchema','create','loggerService','2pNeLVy','/statistics','../services/domainMonitoringService','8090FlUxLM','get','getMerchantsAwaitingPayout','Payments\x20automatically\x20expire\x20after\x20','5229414yaaTOb','updatedAt','Failed\x20to\x20clean\x20old\x20logs','json','getPayoutById','length','status','use','4326xSHFoO','gatewayPaymentId','post','__createBinding','CoinToPay\x20payment\x20status\x20checked\x20successfully','EXPIRED','/domain-monitoring/check','CoinToPay\x20automatic\x20status\x20checking\x20service','/payments','getLogStats','message','put','../services/loggerService','log','now','/cointopay/stats','updatePayment','prototype','checkPaymentById','/users/:id/activate','PAID','updateCustomerDataSchema','cointopay','__esModule','getPayoutStats','payment','requireAdmin','Payment\x20not\x20found','../middleware/auth','getOwnPropertyDescriptor','then','authenticateToken','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','gateway','amount','hasOwnProperty','writable','1153876vztVHM','/payout/stats','FAILED','getServiceStats','Failed\x20to\x20get\x20log\x20statistics','getPaymentTimerInfo','updateUser','createPayout','../middleware/validation','domainMonitoringService','1528OtsogW','floor','Domain\x20is\x20responding\x20correctly','currency','AdminController','/payments/:id/customer'];a19_0x1c75=function(){return _0x2cc0e3;};return a19_0x1c75();}const a19_0x8b0eba=a19_0x2920;(function(_0x48d242,_0x289b67){const _0x3ba80f=a19_0x2920,_0x3230f5=_0x48d242();while(!![]){try{const _0x26b406=parseInt(_0x3ba80f(0x1c0))/0x1*(parseInt(_0x3ba80f(0x1bd))/0x2)+-parseInt(_0x3ba80f(0x1b0))/0x3+-parseInt(_0x3ba80f(0x1f1))/0x4+-parseInt(_0x3ba80f(0x1a4))/0x5*(-parseInt(_0x3ba80f(0x1cc))/0x6)+parseInt(_0x3ba80f(0x203))/0x7*(-parseInt(_0x3ba80f(0x1fb))/0x8)+-parseInt(_0x3ba80f(0x1c4))/0x9+parseInt(_0x3ba80f(0x21b))/0xa;if(_0x26b406===_0x289b67)break;else _0x3230f5['push'](_0x3230f5['shift']());}catch(_0x2d8e53){_0x3230f5['push'](_0x3230f5['shift']());}}}(a19_0x1c75,0x52fb2));var __createBinding=this&&this[a19_0x8b0eba(0x1cf)]||(Object['create']?function(_0x497fb0,_0x53c957,_0x121b3f,_0x23c631){const _0x52da66=a19_0x8b0eba;if(_0x23c631===undefined)_0x23c631=_0x121b3f;var _0x2a6c12=Object[_0x52da66(0x1e9)](_0x53c957,_0x121b3f);(!_0x2a6c12||('get'in _0x2a6c12?!_0x53c957[_0x52da66(0x1e3)]:_0x2a6c12[_0x52da66(0x1f0)]||_0x2a6c12[_0x52da66(0x1ab)]))&&(_0x2a6c12={'enumerable':!![],'get':function(){return _0x53c957[_0x121b3f];}}),Object['defineProperty'](_0x497fb0,_0x23c631,_0x2a6c12);}:function(_0x9d149e,_0x3eb55f,_0x1dd824,_0x44fe63){if(_0x44fe63===undefined)_0x44fe63=_0x1dd824;_0x9d149e[_0x44fe63]=_0x3eb55f[_0x1dd824];}),__setModuleDefault=this&&this[a19_0x8b0eba(0x209)]||(Object[a19_0x8b0eba(0x1bb)]?function(_0x5227b2,_0x55b987){const _0x3cef2f=a19_0x8b0eba;Object[_0x3cef2f(0x212)](_0x5227b2,_0x3cef2f(0x1b9),{'enumerable':!![],'value':_0x55b987});}:function(_0x57773f,_0x4d7874){const _0x11ce58=a19_0x8b0eba;_0x57773f[_0x11ce58(0x1b9)]=_0x4d7874;}),__importStar=this&&this[a19_0x8b0eba(0x1ac)]||(function(){var _0x316c1f=function(_0x18abcb){return _0x316c1f=Object['getOwnPropertyNames']||function(_0x55ade0){const _0x4bfe89=a19_0x2920;var _0x5531e9=[];for(var _0x26f534 in _0x55ade0)if(Object[_0x4bfe89(0x1dd)][_0x4bfe89(0x1ef)][_0x4bfe89(0x21d)](_0x55ade0,_0x26f534))_0x5531e9[_0x5531e9[_0x4bfe89(0x1c9)]]=_0x26f534;return _0x5531e9;},_0x316c1f(_0x18abcb);};return function(_0x457255){const _0x5a1bec=a19_0x2920;if(_0x457255&&_0x457255[_0x5a1bec(0x1e3)])return _0x457255;var _0x3bc8fa={};if(_0x457255!=null){for(var _0x8beff=_0x316c1f(_0x457255),_0x5ef078=0x0;_0x5ef078<_0x8beff[_0x5a1bec(0x1c9)];_0x5ef078++)if(_0x8beff[_0x5ef078]!==_0x5a1bec(0x1b9))__createBinding(_0x3bc8fa,_0x457255,_0x8beff[_0x5ef078]);}return __setModuleDefault(_0x3bc8fa,_0x457255),_0x3bc8fa;};}());Object[a19_0x8b0eba(0x212)](exports,'__esModule',{'value':!![]});const express_1=require('express'),adminController_1=require(a19_0x8b0eba(0x1b5)),validation_1=require(a19_0x8b0eba(0x1f9)),auth_1=require(a19_0x8b0eba(0x1e8)),loggerService_1=require(a19_0x8b0eba(0x1d8)),coinToPayStatusService_1=require('../services/coinToPayStatusService'),domainMonitoringService_1=require(a19_0x8b0eba(0x1bf)),router=(0x0,express_1[a19_0x8b0eba(0x1b8)])(),adminController=new adminController_1[(a19_0x8b0eba(0x1ff))]();router[a19_0x8b0eba(0x1cb)](auth_1[a19_0x8b0eba(0x1eb)],auth_1[a19_0x8b0eba(0x1e6)]),router[a19_0x8b0eba(0x1c1)](a19_0x8b0eba(0x219),adminController['checkAuth']),router[a19_0x8b0eba(0x1c1)](a19_0x8b0eba(0x1be),adminController[a19_0x8b0eba(0x207)]),router[a19_0x8b0eba(0x1c1)]('/merchant-statistics',adminController['getMerchantStatistics']),router[a19_0x8b0eba(0x1c1)](a19_0x8b0eba(0x1f2),adminController[a19_0x8b0eba(0x1e4)]),router[a19_0x8b0eba(0x1c1)]('/payout/merchants',adminController[a19_0x8b0eba(0x1c2)]),router[a19_0x8b0eba(0x1c1)](a19_0x8b0eba(0x213),adminController['getMerchantsSelection']),router['post'](a19_0x8b0eba(0x1a6),(0x0,validation_1[a19_0x8b0eba(0x201)])(validation_1[a19_0x8b0eba(0x214)]),adminController[a19_0x8b0eba(0x1f8)]),router['get'](a19_0x8b0eba(0x20b),adminController['getPayouts']),router[a19_0x8b0eba(0x1c1)]('/payouts/:id',adminController[a19_0x8b0eba(0x1c8)]),router[a19_0x8b0eba(0x1ad)](a19_0x8b0eba(0x216),adminController[a19_0x8b0eba(0x217)]),router['get'](a19_0x8b0eba(0x1d4),adminController[a19_0x8b0eba(0x1b3)]),router[a19_0x8b0eba(0x1c1)](a19_0x8b0eba(0x20c),adminController[a19_0x8b0eba(0x208)]),router[a19_0x8b0eba(0x1d7)](a19_0x8b0eba(0x20c),adminController[a19_0x8b0eba(0x1dc)]),router[a19_0x8b0eba(0x1d7)](a19_0x8b0eba(0x200),(0x0,validation_1[a19_0x8b0eba(0x201)])(validation_1[a19_0x8b0eba(0x1e1)]),adminController[a19_0x8b0eba(0x1a2)]),router['get'](a19_0x8b0eba(0x1a9),adminController['getUsers']),router[a19_0x8b0eba(0x1c1)](a19_0x8b0eba(0x1af),adminController[a19_0x8b0eba(0x202)]),router[a19_0x8b0eba(0x1ce)]('/users',(0x0,validation_1[a19_0x8b0eba(0x201)])(validation_1[a19_0x8b0eba(0x1ba)]),adminController[a19_0x8b0eba(0x1a3)]),router[a19_0x8b0eba(0x1d7)](a19_0x8b0eba(0x1af),(0x0,validation_1[a19_0x8b0eba(0x201)])(validation_1['updateUserSchema']),adminController[a19_0x8b0eba(0x1f7)]),router[a19_0x8b0eba(0x1ad)](a19_0x8b0eba(0x1af),adminController['deleteUser']),router['post'](a19_0x8b0eba(0x1b1),adminController['suspendUser']),router[a19_0x8b0eba(0x1ce)](a19_0x8b0eba(0x1df),adminController['activateUser']),router[a19_0x8b0eba(0x1c1)]('/logs/stats',(_0xa69f35,_0x112265)=>{const _0x4bd10e=a19_0x8b0eba;try{const _0xf176f8=loggerService_1['loggerService'][_0x4bd10e(0x1d5)]();_0x112265['json']({'success':!![],'result':_0xf176f8});}catch(_0x4d5866){_0x112265[_0x4bd10e(0x1ca)](0x1f4)['json']({'success':![],'message':_0x4bd10e(0x1f5)});}}),router[a19_0x8b0eba(0x1ce)](a19_0x8b0eba(0x1b4),(_0x65c39e,_0x1d3b41)=>{const _0x4bc73a=a19_0x8b0eba;try{const {daysToKeep:daysToKeep=0x1e}=_0x65c39e[_0x4bc73a(0x20d)];loggerService_1[_0x4bc73a(0x1bc)][_0x4bc73a(0x20a)](daysToKeep),_0x1d3b41[_0x4bc73a(0x1c7)]({'success':!![],'message':_0x4bc73a(0x211)+daysToKeep+'\x20days)'});}catch(_0x296d6f){_0x1d3b41[_0x4bc73a(0x1ca)](0x1f4)[_0x4bc73a(0x1c7)]({'success':![],'message':_0x4bc73a(0x1c6)});}}),router[a19_0x8b0eba(0x1ce)](a19_0x8b0eba(0x21c),async(_0x40aa9c,_0x2b0ade)=>{const _0x4f646d=a19_0x8b0eba;try{const {paymentId:_0x3c0def}=_0x40aa9c[_0x4f646d(0x204)];console[_0x4f646d(0x1d9)](_0x4f646d(0x215)+_0x3c0def),await coinToPayStatusService_1[_0x4f646d(0x21f)][_0x4f646d(0x1de)](_0x3c0def),_0x2b0ade[_0x4f646d(0x1c7)]({'success':!![],'message':_0x4f646d(0x1d0)});}catch(_0x30b358){console['error']('‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20'+_0x40aa9c[_0x4f646d(0x204)][_0x4f646d(0x1a7)]+':',_0x30b358),_0x2b0ade['status'](0x1f4)[_0x4f646d(0x1c7)]({'success':![],'message':_0x30b358 instanceof Error?_0x30b358['message']:_0x4f646d(0x1ec)});}}),router[a19_0x8b0eba(0x1c1)](a19_0x8b0eba(0x1db),(_0x4ebe25,_0x1aaa69)=>{const _0x4443ff=a19_0x8b0eba;try{const _0x2f4450=coinToPayStatusService_1[_0x4443ff(0x21f)][_0x4443ff(0x1f4)]();_0x1aaa69[_0x4443ff(0x1c7)]({'success':!![],'result':{..._0x2f4450,'description':_0x4443ff(0x1d3),'statusMapping':{'Paid':_0x4443ff(0x1e0),'Awaiting\x20Fiat':_0x4443ff(0x21e),'waiting':'PENDING','expired':_0x4443ff(0x1d1),'failed':_0x4443ff(0x1f3)},'autoExpiryNote':_0x4443ff(0x1c3)+_0x2f4450[_0x4443ff(0x1aa)]+_0x4443ff(0x21a),'individualTimersNote':'Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly'}});}catch(_0x43780d){_0x1aaa69[_0x4443ff(0x1ca)](0x1f4)[_0x4443ff(0x1c7)]({'success':![],'message':'Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics'});}}),router[a19_0x8b0eba(0x1c1)](a19_0x8b0eba(0x1b2),async(_0x18767c,_0x4e88ef)=>{const _0x1a0d78=a19_0x8b0eba;try{const {paymentId:_0x530ef4}=_0x18767c[_0x1a0d78(0x204)],_0x273fc1=coinToPayStatusService_1[_0x1a0d78(0x21f)][_0x1a0d78(0x1f6)](_0x530ef4),_0x4daf49=(await Promise[_0x1a0d78(0x1a5)]()[_0x1a0d78(0x1ea)](()=>__importStar(require('../config/database'))))[_0x1a0d78(0x1b9)],_0x573e90=await _0x4daf49[_0x1a0d78(0x1e5)][_0x1a0d78(0x1a8)]({'where':{'id':_0x530ef4},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x573e90)return _0x4e88ef['status'](0x194)[_0x1a0d78(0x1c7)]({'success':![],'message':_0x1a0d78(0x1e7)});_0x4e88ef[_0x1a0d78(0x1c7)]({'success':!![],'result':{'payment':{'id':_0x573e90['id'],'gateway':_0x573e90[_0x1a0d78(0x1ed)],'gatewayPaymentId':_0x573e90[_0x1a0d78(0x1cd)],'status':_0x573e90[_0x1a0d78(0x1ca)],'amount':_0x573e90[_0x1a0d78(0x1ee)],'currency':_0x573e90[_0x1a0d78(0x1fe)],'createdAt':_0x573e90[_0x1a0d78(0x205)],'updatedAt':_0x573e90[_0x1a0d78(0x1c5)],'shop':_0x573e90[_0x1a0d78(0x206)]},'timers':_0x273fc1,'isCoinToPay':_0x573e90[_0x1a0d78(0x1ed)]===_0x1a0d78(0x1e2),'ageInMinutes':Math[_0x1a0d78(0x1fc)]((Date[_0x1a0d78(0x1da)]()-_0x573e90[_0x1a0d78(0x205)]['getTime']())/(0x3e8*0x3c))}});}catch(_0x4cc1da){_0x4e88ef[_0x1a0d78(0x1ca)](0x1f4)[_0x1a0d78(0x1c7)]({'success':![],'message':_0x4cc1da instanceof Error?_0x4cc1da['message']:'Failed\x20to\x20get\x20payment\x20information'});}}),router[a19_0x8b0eba(0x1c1)]('/domain-monitoring/stats',(_0xe62056,_0x2917ee)=>{const _0x2d3c75=a19_0x8b0eba;try{const _0x29b725=domainMonitoringService_1[_0x2d3c75(0x1fa)][_0x2d3c75(0x218)]();_0x2917ee[_0x2d3c75(0x1c7)]({'success':!![],'result':{..._0x29b725,'description':_0x2d3c75(0x20f),'behavior':_0x2d3c75(0x210),'encoding':_0x2d3c75(0x1b6)}});}catch(_0x1ef353){_0x2917ee[_0x2d3c75(0x1ca)](0x1f4)[_0x2d3c75(0x1c7)]({'success':![],'message':_0x2d3c75(0x20e)});}}),router['post'](a19_0x8b0eba(0x1d2),async(_0x5eb73e,_0x4ccdf7)=>{const _0x142a10=a19_0x8b0eba;try{const _0x58d4cd=await domainMonitoringService_1['domainMonitoringService'][_0x142a10(0x1b7)]();_0x4ccdf7[_0x142a10(0x1c7)]({'success':!![],'result':{'domainAvailable':_0x58d4cd,'message':_0x58d4cd?_0x142a10(0x1fd):_0x142a10(0x1ae),'timestamp':new Date()['toISOString']()}});}catch(_0x40290b){_0x4ccdf7[_0x142a10(0x1ca)](0x1f4)[_0x142a10(0x1c7)]({'success':![],'message':_0x40290b instanceof Error?_0x40290b[_0x142a10(0x1d6)]:'Failed\x20to\x20perform\x20manual\x20domain\x20check'});}}),exports['default']=router;