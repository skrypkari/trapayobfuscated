'use strict';const a19_0x514cda=a19_0x2273;(function(_0xab5049,_0x3b9430){const _0x39eff0=a19_0x2273,_0x5eabe1=_0xab5049();while(!![]){try{const _0xae87e7=-parseInt(_0x39eff0(0xd7))/0x1+parseInt(_0x39eff0(0x12b))/0x2+parseInt(_0x39eff0(0xb5))/0x3*(parseInt(_0x39eff0(0x101))/0x4)+parseInt(_0x39eff0(0x109))/0x5*(parseInt(_0x39eff0(0xc8))/0x6)+parseInt(_0x39eff0(0x120))/0x7*(-parseInt(_0x39eff0(0xca))/0x8)+-parseInt(_0x39eff0(0xe4))/0x9*(-parseInt(_0x39eff0(0x114))/0xa)+parseInt(_0x39eff0(0xeb))/0xb*(parseInt(_0x39eff0(0x12e))/0xc);if(_0xae87e7===_0x3b9430)break;else _0x5eabe1['push'](_0x5eabe1['shift']());}catch(_0x3b664d){_0x5eabe1['push'](_0x5eabe1['shift']());}}}(a19_0x5c28,0x511d6));function a19_0x2273(_0xef785f,_0x5a2fc1){const _0x5c28dd=a19_0x5c28();return a19_0x2273=function(_0x227324,_0x5260a6){_0x227324=_0x227324-0xb1;let _0x440430=_0x5c28dd[_0x227324];return _0x440430;},a19_0x2273(_0xef785f,_0x5a2fc1);}function a19_0x5c28(){const _0x4d3d5e=['/logs/stats','get','166708HkOlgH','updateUserSchema','__importStar','1800udGgZs','loggerService','Domain\x20check\x20failed','Payment\x20not\x20found','/payout/stats','__esModule','currency','__createBinding','166077ufcdDv','writable','\x20days\x20if\x20not\x20paid','params','EXPIRED','default','updateCustomerDataSchema','checkPaymentById','log','/domain-monitoring/check','now','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','CoinToPay\x20automatic\x20status\x20checking\x20service','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','toISOString','updatedAt','gatewayPaymentId','getOwnPropertyNames','domainMonitoringService','12LUYqqO','/users/:id/suspend','861720lWXRnr','payment','configurable','body','getPayments','deleteUser','post','Router','/payouts','getPayoutById','error','getServiceStats','message','211586kbNhBZ','hasOwnProperty','json','../config/database','getMerchantsSelection','FAILED','status','updateCustomerData','Failed\x20to\x20clean\x20old\x20logs','getPayouts','getUserById','getUsers','/users/:id','1089onyqWR','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','coinToPayStatusService','Domain\x20is\x20responding\x20correctly','delete','amount','/payments/:id/customer','14091mPWHce','express','PAID','findUnique','/auth','createPayoutSchema','updateUser','\x20days)','/payout','/logs/clean','checkAuth','getPaymentById','/payments','call','createdAt','getMerchantStatistics','expiryDays','/cointopay/check/:paymentId','getTime','validate','/users','AdminController','8UVKrnq','../services/domainMonitoringService','getMerchantsAwaitingPayout','../middleware/validation','paymentId','activateUser','deletePayout','cleanOldLogs','717105MynvtT','create','getOwnPropertyDescriptor','getStatistics','suspendUser','/payouts/:id','Old\x20logs\x20cleaned\x20(kept\x20last\x20','/merchants/selection','../controllers/adminController','Failed\x20to\x20perform\x20manual\x20domain\x20check','getMonitoringStats','33830PuJhft','Failed\x20to\x20get\x20payment\x20information','cointopay','Failed\x20to\x20get\x20log\x20statistics','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','put','createUser','length','Payments\x20automatically\x20expire\x20after\x20','/merchant-statistics','use','manualCheck','35JSwgrx','/cointopay/payment/:paymentId','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','/payments/:id','updatePayment','shop','/cointopay/stats','getPayoutStats'];a19_0x5c28=function(){return _0x4d3d5e;};return a19_0x5c28();}var __createBinding=this&&this[a19_0x514cda(0xb4)]||(Object[a19_0x514cda(0x10a)]?function(_0x31555e,_0x33adba,_0x2ecb8f,_0xba3977){const _0x48d0a0=a19_0x514cda;if(_0xba3977===undefined)_0xba3977=_0x2ecb8f;var _0x13587f=Object[_0x48d0a0(0x10b)](_0x33adba,_0x2ecb8f);(!_0x13587f||(_0x48d0a0(0x12a)in _0x13587f?!_0x33adba['__esModule']:_0x13587f[_0x48d0a0(0xb6)]||_0x13587f[_0x48d0a0(0xcc)]))&&(_0x13587f={'enumerable':!![],'get':function(){return _0x33adba[_0x2ecb8f];}}),Object['defineProperty'](_0x31555e,_0xba3977,_0x13587f);}:function(_0x1ab8c2,_0x1452dd,_0x2249d7,_0x3672d8){if(_0x3672d8===undefined)_0x3672d8=_0x2249d7;_0x1ab8c2[_0x3672d8]=_0x1452dd[_0x2249d7];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a19_0x514cda(0x10a)]?function(_0x232d87,_0x5b6875){const _0x3dff98=a19_0x514cda;Object['defineProperty'](_0x232d87,_0x3dff98(0xba),{'enumerable':!![],'value':_0x5b6875});}:function(_0x37ff31,_0xd42ead){const _0x5477c2=a19_0x514cda;_0x37ff31[_0x5477c2(0xba)]=_0xd42ead;}),__importStar=this&&this[a19_0x514cda(0x12d)]||(function(){var _0x21ff09=function(_0x40974e){const _0x2bfa2f=a19_0x2273;return _0x21ff09=Object[_0x2bfa2f(0xc6)]||function(_0x19297b){const _0xf8a581=_0x2bfa2f;var _0x3dd686=[];for(var _0x181f14 in _0x19297b)if(Object['prototype'][_0xf8a581(0xd8)][_0xf8a581(0xf8)](_0x19297b,_0x181f14))_0x3dd686[_0x3dd686[_0xf8a581(0x11b)]]=_0x181f14;return _0x3dd686;},_0x21ff09(_0x40974e);};return function(_0x5c57e5){const _0x45e0e3=a19_0x2273;if(_0x5c57e5&&_0x5c57e5['__esModule'])return _0x5c57e5;var _0x4d7e84={};if(_0x5c57e5!=null){for(var _0x39a56c=_0x21ff09(_0x5c57e5),_0x4dbd22=0x0;_0x4dbd22<_0x39a56c[_0x45e0e3(0x11b)];_0x4dbd22++)if(_0x39a56c[_0x4dbd22]!==_0x45e0e3(0xba))__createBinding(_0x4d7e84,_0x5c57e5,_0x39a56c[_0x4dbd22]);}return __setModuleDefault(_0x4d7e84,_0x5c57e5),_0x4d7e84;};}());Object['defineProperty'](exports,a19_0x514cda(0xb2),{'value':!![]});const express_1=require(a19_0x514cda(0xec)),adminController_1=require(a19_0x514cda(0x111)),validation_1=require(a19_0x514cda(0x104)),auth_1=require('../middleware/auth'),loggerService_1=require('../services/loggerService'),coinToPayStatusService_1=require('../services/coinToPayStatusService'),domainMonitoringService_1=require(a19_0x514cda(0x102)),router=(0x0,express_1[a19_0x514cda(0xd1)])(),adminController=new adminController_1[(a19_0x514cda(0x100))]();router[a19_0x514cda(0x11e)](auth_1['authenticateToken'],auth_1['requireAdmin']),router[a19_0x514cda(0x12a)](a19_0x514cda(0xef),adminController[a19_0x514cda(0xf5)]),router[a19_0x514cda(0x12a)]('/statistics',adminController[a19_0x514cda(0x10c)]),router[a19_0x514cda(0x12a)](a19_0x514cda(0x11d),adminController[a19_0x514cda(0xfa)]),router[a19_0x514cda(0x12a)](a19_0x514cda(0xb1),adminController[a19_0x514cda(0x128)]),router[a19_0x514cda(0x12a)]('/payout/merchants',adminController[a19_0x514cda(0x103)]),router[a19_0x514cda(0x12a)](a19_0x514cda(0x110),adminController[a19_0x514cda(0xdb)]),router[a19_0x514cda(0xd0)](a19_0x514cda(0xf3),(0x0,validation_1[a19_0x514cda(0xfe)])(validation_1[a19_0x514cda(0xf0)]),adminController['createPayout']),router[a19_0x514cda(0x12a)](a19_0x514cda(0xd2),adminController[a19_0x514cda(0xe0)]),router['get'](a19_0x514cda(0x10e),adminController[a19_0x514cda(0xd3)]),router[a19_0x514cda(0xe8)](a19_0x514cda(0x10e),adminController[a19_0x514cda(0x107)]),router[a19_0x514cda(0x12a)](a19_0x514cda(0xf7),adminController[a19_0x514cda(0xce)]),router[a19_0x514cda(0x12a)](a19_0x514cda(0x124),adminController[a19_0x514cda(0xf6)]),router['put'](a19_0x514cda(0x124),adminController[a19_0x514cda(0x125)]),router[a19_0x514cda(0x119)](a19_0x514cda(0xea),(0x0,validation_1[a19_0x514cda(0xfe)])(validation_1[a19_0x514cda(0xbb)]),adminController[a19_0x514cda(0xde)]),router['get'](a19_0x514cda(0xff),adminController[a19_0x514cda(0xe2)]),router[a19_0x514cda(0x12a)](a19_0x514cda(0xe3),adminController[a19_0x514cda(0xe1)]),router[a19_0x514cda(0xd0)](a19_0x514cda(0xff),(0x0,validation_1[a19_0x514cda(0xfe)])(validation_1['createUserSchema']),adminController[a19_0x514cda(0x11a)]),router['put']('/users/:id',(0x0,validation_1[a19_0x514cda(0xfe)])(validation_1[a19_0x514cda(0x12c)]),adminController[a19_0x514cda(0xf1)]),router['delete'](a19_0x514cda(0xe3),adminController[a19_0x514cda(0xcf)]),router[a19_0x514cda(0xd0)](a19_0x514cda(0xc9),adminController[a19_0x514cda(0x10d)]),router[a19_0x514cda(0xd0)]('/users/:id/activate',adminController[a19_0x514cda(0x106)]),router['get'](a19_0x514cda(0x129),(_0x363e39,_0x3d02ff)=>{const _0x4c039d=a19_0x514cda;try{const _0x3c47dc=loggerService_1['loggerService']['getLogStats']();_0x3d02ff[_0x4c039d(0xd9)]({'success':!![],'result':_0x3c47dc});}catch(_0x57e383){_0x3d02ff['status'](0x1f4)[_0x4c039d(0xd9)]({'success':![],'message':_0x4c039d(0x117)});}}),router[a19_0x514cda(0xd0)](a19_0x514cda(0xf4),(_0x35ea87,_0xfcdaf5)=>{const _0x3e3847=a19_0x514cda;try{const {daysToKeep:daysToKeep=0x1e}=_0x35ea87[_0x3e3847(0xcd)];loggerService_1[_0x3e3847(0x12f)][_0x3e3847(0x108)](daysToKeep),_0xfcdaf5[_0x3e3847(0xd9)]({'success':!![],'message':_0x3e3847(0x10f)+daysToKeep+_0x3e3847(0xf2)});}catch(_0x189d77){_0xfcdaf5['status'](0x1f4)[_0x3e3847(0xd9)]({'success':![],'message':_0x3e3847(0xdf)});}}),router[a19_0x514cda(0xd0)](a19_0x514cda(0xfc),async(_0x1cb15a,_0x341950)=>{const _0x28a463=a19_0x514cda;try{const {paymentId:_0x54e0d6}=_0x1cb15a[_0x28a463(0xb8)];console[_0x28a463(0xbd)]('üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20'+_0x54e0d6),await coinToPayStatusService_1[_0x28a463(0xe6)][_0x28a463(0xbc)](_0x54e0d6),_0x341950[_0x28a463(0xd9)]({'success':!![],'message':'CoinToPay\x20payment\x20status\x20checked\x20successfully'});}catch(_0x340050){console[_0x28a463(0xd4)](_0x28a463(0x123)+_0x1cb15a['params'][_0x28a463(0x105)]+':',_0x340050),_0x341950['status'](0x1f4)['json']({'success':![],'message':_0x340050 instanceof Error?_0x340050[_0x28a463(0xd6)]:_0x28a463(0xe5)});}}),router[a19_0x514cda(0x12a)](a19_0x514cda(0x127),(_0x5b8192,_0x5c019f)=>{const _0x4d9123=a19_0x514cda;try{const _0x1a7b05=coinToPayStatusService_1['coinToPayStatusService'][_0x4d9123(0xd5)]();_0x5c019f[_0x4d9123(0xd9)]({'success':!![],'result':{..._0x1a7b05,'description':_0x4d9123(0xc1),'statusMapping':{'Paid':_0x4d9123(0xed),'Awaiting\x20Fiat':'PENDING','waiting':'PENDING','expired':_0x4d9123(0xb9),'failed':_0x4d9123(0xdc)},'autoExpiryNote':_0x4d9123(0x11c)+_0x1a7b05[_0x4d9123(0xfb)]+_0x4d9123(0xb7),'individualTimersNote':'Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly'}});}catch(_0x57b60b){_0x5c019f['status'](0x1f4)[_0x4d9123(0xd9)]({'success':![],'message':_0x4d9123(0x118)});}}),router['get'](a19_0x514cda(0x121),async(_0x32ff72,_0x5bcb70)=>{const _0x5c84b6=a19_0x514cda;try{const {paymentId:_0x54eaca}=_0x32ff72['params'],_0x147940=coinToPayStatusService_1[_0x5c84b6(0xe6)]['getPaymentTimerInfo'](_0x54eaca),_0x5d8b98=(await Promise['resolve']()['then'](()=>__importStar(require(_0x5c84b6(0xda)))))[_0x5c84b6(0xba)],_0x48b5da=await _0x5d8b98[_0x5c84b6(0xcb)][_0x5c84b6(0xee)]({'where':{'id':_0x54eaca},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x48b5da)return _0x5bcb70[_0x5c84b6(0xdd)](0x194)['json']({'success':![],'message':_0x5c84b6(0x131)});_0x5bcb70[_0x5c84b6(0xd9)]({'success':!![],'result':{'payment':{'id':_0x48b5da['id'],'gateway':_0x48b5da['gateway'],'gatewayPaymentId':_0x48b5da[_0x5c84b6(0xc5)],'status':_0x48b5da[_0x5c84b6(0xdd)],'amount':_0x48b5da[_0x5c84b6(0xe9)],'currency':_0x48b5da[_0x5c84b6(0xb3)],'createdAt':_0x48b5da[_0x5c84b6(0xf9)],'updatedAt':_0x48b5da[_0x5c84b6(0xc4)],'shop':_0x48b5da[_0x5c84b6(0x126)]},'timers':_0x147940,'isCoinToPay':_0x48b5da['gateway']===_0x5c84b6(0x116),'ageInMinutes':Math['floor']((Date[_0x5c84b6(0xbf)]()-_0x48b5da[_0x5c84b6(0xf9)][_0x5c84b6(0xfd)]())/(0x3e8*0x3c))}});}catch(_0xcbc564){_0x5bcb70[_0x5c84b6(0xdd)](0x1f4)[_0x5c84b6(0xd9)]({'success':![],'message':_0xcbc564 instanceof Error?_0xcbc564['message']:_0x5c84b6(0x115)});}}),router[a19_0x514cda(0x12a)]('/domain-monitoring/stats',(_0xec5d58,_0x87736c)=>{const _0x2bb072=a19_0x514cda;try{const _0x54c953=domainMonitoringService_1[_0x2bb072(0xc7)][_0x2bb072(0x113)]();_0x87736c['json']({'success':!![],'result':{..._0x54c953,'description':_0x2bb072(0x122),'behavior':'Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','encoding':_0x2bb072(0xc0)}});}catch(_0x32ddc2){_0x87736c[_0x2bb072(0xdd)](0x1f4)[_0x2bb072(0xd9)]({'success':![],'message':_0x2bb072(0xc2)});}}),router['post'](a19_0x514cda(0xbe),async(_0x5625ed,_0x3032f0)=>{const _0x3a1452=a19_0x514cda;try{const _0x8aa4de=await domainMonitoringService_1[_0x3a1452(0xc7)][_0x3a1452(0x11f)]();_0x3032f0[_0x3a1452(0xd9)]({'success':!![],'result':{'domainAvailable':_0x8aa4de,'message':_0x8aa4de?_0x3a1452(0xe7):_0x3a1452(0x130),'timestamp':new Date()[_0x3a1452(0xc3)]()}});}catch(_0x1c08a8){_0x3032f0[_0x3a1452(0xdd)](0x1f4)['json']({'success':![],'message':_0x1c08a8 instanceof Error?_0x1c08a8[_0x3a1452(0xd6)]:_0x3a1452(0x112)});}}),exports[a19_0x514cda(0xba)]=router;