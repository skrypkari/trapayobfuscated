'use strict';const a24_0x3799d6=a24_0x693e;(function(_0x14c851,_0x5841b4){const _0x44daa7=a24_0x693e,_0x6c8273=_0x14c851();while(!![]){try{const _0x36d4c2=-parseInt(_0x44daa7(0xcb))/0x1+-parseInt(_0x44daa7(0x105))/0x2+parseInt(_0x44daa7(0xda))/0x3*(parseInt(_0x44daa7(0x120))/0x4)+-parseInt(_0x44daa7(0x117))/0x5+parseInt(_0x44daa7(0xd2))/0x6*(parseInt(_0x44daa7(0xd5))/0x7)+parseInt(_0x44daa7(0xce))/0x8+parseInt(_0x44daa7(0xfd))/0x9;if(_0x36d4c2===_0x5841b4)break;else _0x6c8273['push'](_0x6c8273['shift']());}catch(_0x423859){_0x6c8273['push'](_0x6c8273['shift']());}}}(a24_0x7001,0x9df6d));function a24_0x693e(_0x32326b,_0x127437){_0x32326b=_0x32326b-0x9f;const _0x7001da=a24_0x7001();let _0x693e7=_0x7001da[_0x32326b];return _0x693e7;}function a24_0x7001(){const _0x34accc=['Payments\x20automatically\x20expire\x20after\x20','gatewayPaymentId','\x20days)','/merchants/selection','getProcessingPaymentsStats','/statistics','AdminController','paymentId','getOwnPropertyDescriptor','Old\x20logs\x20cleaned\x20(kept\x20last\x20','PAID','createdAt','updateCustomerDataSchema','updateCustomerData','then','updateUserSchema','prototype','/payouts/:id','findUnique','/users/:id/suspend','../services/coinToPayStatusService','\x20days\x20if\x20not\x20paid','/users/:id/activate','toISOString','use','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','Router','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','getPayoutById','Domain\x20is\x20responding\x20correctly','__createBinding','params','437875vplcQt','floor','createUser','5194040dThrwJ','__esModule','shop','/users/:id','2784BznChe','currency','get','17017lBVRxZ','default','checkAuth','status','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','55569meUsTl','EXPIRED','cleanupStalePayments','error','updatePayment','deleteUser','getPayments','getPaymentTimerInfo','/payments/cleanup','getPaymentById','getStatistics','FAILED','/cointopay/check/:paymentId','put','../middleware/validation','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','updatedAt','../services/domainMonitoringService','CoinToPay\x20payment\x20status\x20checked\x20successfully','/logs/stats','getUserById','requireAdmin','delete','/auth','__setModuleDefault','/logs/clean','cleanOldLogs','Failed\x20to\x20get\x20log\x20statistics','cointopay','length','/payments/:id','../controllers/adminController','amount','/payout','/payouts','4038822glGUKd','createPayoutSchema','/payout/stats','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','getUsers','updateUser','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','1274420PtoDXX','loggerService','checkPaymentById','call','getPayoutStats','createPayout','payment','express','cleanupStalePaymentsWithReport','/users','post','__importStar','configurable','createUserSchema','coinToPayStatusService','/payments/:id/customer','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','message','2889915QHunIA','/payments/cleanup-pending','../services/loggerService','getOwnPropertyNames','/payments/processing-stats','getLogStats','gateway','create','Domain\x20check\x20failed','16vRpVQG','cleanupStalePendingPayments','getPayouts','json','hasOwnProperty','validate','body','authenticateToken','defineProperty','Failed\x20to\x20perform\x20manual\x20domain\x20check','now','Failed\x20to\x20clean\x20old\x20logs','/payments','getServiceStats'];a24_0x7001=function(){return _0x34accc;};return a24_0x7001();}var __createBinding=this&&this[a24_0x3799d6(0xc9)]||(Object[a24_0x3799d6(0x11e)]?function(_0x431e95,_0x2f8bcf,_0x3703d9,_0x46f55e){const _0x1c6f97=a24_0x3799d6;if(_0x46f55e===undefined)_0x46f55e=_0x3703d9;var _0x1a3616=Object[_0x1c6f97(0xb3)](_0x2f8bcf,_0x3703d9);(!_0x1a3616||(_0x1c6f97(0xd4)in _0x1a3616?!_0x2f8bcf['__esModule']:_0x1a3616['writable']||_0x1a3616[_0x1c6f97(0x111)]))&&(_0x1a3616={'enumerable':!![],'get':function(){return _0x2f8bcf[_0x3703d9];}}),Object[_0x1c6f97(0xa5)](_0x431e95,_0x46f55e,_0x1a3616);}:function(_0x22d069,_0x4f055c,_0x875ca6,_0x1ac865){if(_0x1ac865===undefined)_0x1ac865=_0x875ca6;_0x22d069[_0x1ac865]=_0x4f055c[_0x875ca6];}),__setModuleDefault=this&&this[a24_0x3799d6(0xf2)]||(Object['create']?function(_0x38c5b0,_0x8854e4){const _0x4656bf=a24_0x3799d6;Object[_0x4656bf(0xa5)](_0x38c5b0,_0x4656bf(0xd6),{'enumerable':!![],'value':_0x8854e4});}:function(_0x200aee,_0x150e33){_0x200aee['default']=_0x150e33;}),__importStar=this&&this[a24_0x3799d6(0x110)]||(function(){var _0x220e75=function(_0x11dc84){const _0x57c9aa=a24_0x693e;return _0x220e75=Object[_0x57c9aa(0x11a)]||function(_0x58f927){const _0x406450=_0x57c9aa;var _0x5dd3f5=[];for(var _0x21ed51 in _0x58f927)if(Object[_0x406450(0xbb)][_0x406450(0xa1)][_0x406450(0x108)](_0x58f927,_0x21ed51))_0x5dd3f5[_0x5dd3f5[_0x406450(0xf7)]]=_0x21ed51;return _0x5dd3f5;},_0x220e75(_0x11dc84);};return function(_0x54e132){if(_0x54e132&&_0x54e132['__esModule'])return _0x54e132;var _0x5baf63={};if(_0x54e132!=null){for(var _0x3880d9=_0x220e75(_0x54e132),_0x1f30dc=0x0;_0x1f30dc<_0x3880d9['length'];_0x1f30dc++)if(_0x3880d9[_0x1f30dc]!=='default')__createBinding(_0x5baf63,_0x54e132,_0x3880d9[_0x1f30dc]);}return __setModuleDefault(_0x5baf63,_0x54e132),_0x5baf63;};}());Object[a24_0x3799d6(0xa5)](exports,a24_0x3799d6(0xcf),{'value':!![]});const express_1=require(a24_0x3799d6(0x10c)),adminController_1=require(a24_0x3799d6(0xf9)),validation_1=require(a24_0x3799d6(0xe8)),auth_1=require('../middleware/auth'),loggerService_1=require(a24_0x3799d6(0x119)),coinToPayStatusService_1=require(a24_0x3799d6(0xbf)),domainMonitoringService_1=require(a24_0x3799d6(0xeb)),router=(0x0,express_1[a24_0x3799d6(0xc5)])(),adminController=new adminController_1[(a24_0x3799d6(0xb1))]();router[a24_0x3799d6(0xc3)](auth_1[a24_0x3799d6(0xa4)],auth_1[a24_0x3799d6(0xef)]),router[a24_0x3799d6(0xd4)](a24_0x3799d6(0xf1),adminController[a24_0x3799d6(0xd7)]),router[a24_0x3799d6(0xd4)](a24_0x3799d6(0xb0),adminController[a24_0x3799d6(0xe4)]),router[a24_0x3799d6(0xd4)]('/merchant-statistics',adminController['getMerchantStatistics']),router[a24_0x3799d6(0xd4)](a24_0x3799d6(0xff),adminController[a24_0x3799d6(0x109)]),router[a24_0x3799d6(0xd4)]('/payout/merchants',adminController['getMerchantsAwaitingPayout']),router[a24_0x3799d6(0xd4)](a24_0x3799d6(0xae),adminController['getMerchantsSelection']),router[a24_0x3799d6(0x10f)](a24_0x3799d6(0xfb),(0x0,validation_1[a24_0x3799d6(0xa2)])(validation_1[a24_0x3799d6(0xfe)]),adminController[a24_0x3799d6(0x10a)]),router['get'](a24_0x3799d6(0xfc),adminController[a24_0x3799d6(0x9f)]),router[a24_0x3799d6(0xd4)](a24_0x3799d6(0xbc),adminController[a24_0x3799d6(0xc7)]),router[a24_0x3799d6(0xf0)](a24_0x3799d6(0xbc),adminController['deletePayout']),router['get'](a24_0x3799d6(0xa9),adminController[a24_0x3799d6(0xe0)]),router[a24_0x3799d6(0xd4)](a24_0x3799d6(0xf8),adminController[a24_0x3799d6(0xe3)]),router['put'](a24_0x3799d6(0xf8),adminController[a24_0x3799d6(0xde)]),router[a24_0x3799d6(0xe7)](a24_0x3799d6(0x114),(0x0,validation_1['validate'])(validation_1[a24_0x3799d6(0xb7)]),adminController[a24_0x3799d6(0xb8)]),router[a24_0x3799d6(0xd4)](a24_0x3799d6(0x11b),adminController[a24_0x3799d6(0xaf)]),router['post'](a24_0x3799d6(0xe2),adminController[a24_0x3799d6(0xdc)]),router[a24_0x3799d6(0x10f)](a24_0x3799d6(0x118),adminController[a24_0x3799d6(0x121)]),router[a24_0x3799d6(0x10f)]('/payments/cleanup-with-report',adminController[a24_0x3799d6(0x10d)]),router['get'](a24_0x3799d6(0x10e),adminController[a24_0x3799d6(0x102)]),router[a24_0x3799d6(0xd4)](a24_0x3799d6(0xd1),adminController[a24_0x3799d6(0xee)]),router[a24_0x3799d6(0x10f)](a24_0x3799d6(0x10e),(0x0,validation_1[a24_0x3799d6(0xa2)])(validation_1[a24_0x3799d6(0x112)]),adminController[a24_0x3799d6(0xcd)]),router['put'](a24_0x3799d6(0xd1),(0x0,validation_1[a24_0x3799d6(0xa2)])(validation_1[a24_0x3799d6(0xba)]),adminController[a24_0x3799d6(0x103)]),router[a24_0x3799d6(0xf0)](a24_0x3799d6(0xd1),adminController[a24_0x3799d6(0xdf)]),router[a24_0x3799d6(0x10f)](a24_0x3799d6(0xbe),adminController['suspendUser']),router['post'](a24_0x3799d6(0xc1),adminController['activateUser']),router[a24_0x3799d6(0xd4)](a24_0x3799d6(0xed),(_0x4e2b6c,_0x312d95)=>{const _0x4251ce=a24_0x3799d6;try{const _0x33634a=loggerService_1[_0x4251ce(0x106)][_0x4251ce(0x11c)]();_0x312d95[_0x4251ce(0xa0)]({'success':!![],'result':_0x33634a});}catch(_0x3bad62){_0x312d95[_0x4251ce(0xd8)](0x1f4)[_0x4251ce(0xa0)]({'success':![],'message':_0x4251ce(0xf5)});}}),router[a24_0x3799d6(0x10f)](a24_0x3799d6(0xf3),(_0x2c8611,_0x55d10d)=>{const _0x1aa563=a24_0x3799d6;try{const {daysToKeep:daysToKeep=0x1e}=_0x2c8611[_0x1aa563(0xa3)];loggerService_1[_0x1aa563(0x106)][_0x1aa563(0xf4)](daysToKeep),_0x55d10d[_0x1aa563(0xa0)]({'success':!![],'message':_0x1aa563(0xb4)+daysToKeep+_0x1aa563(0xad)});}catch(_0x397f06){_0x55d10d[_0x1aa563(0xd8)](0x1f4)[_0x1aa563(0xa0)]({'success':![],'message':_0x1aa563(0xa8)});}}),router[a24_0x3799d6(0x10f)](a24_0x3799d6(0xe6),async(_0x56792c,_0x24d695)=>{const _0x51f535=a24_0x3799d6;try{const {paymentId:_0x4e2561}=_0x56792c[_0x51f535(0xca)];console['log'](_0x51f535(0x104)+_0x4e2561),await coinToPayStatusService_1['coinToPayStatusService'][_0x51f535(0x107)](_0x4e2561),_0x24d695[_0x51f535(0xa0)]({'success':!![],'message':_0x51f535(0xec)});}catch(_0x1271a3){console[_0x51f535(0xdd)](_0x51f535(0xc4)+_0x56792c[_0x51f535(0xca)][_0x51f535(0xb2)]+':',_0x1271a3),_0x24d695[_0x51f535(0xd8)](0x1f4)[_0x51f535(0xa0)]({'success':![],'message':_0x1271a3 instanceof Error?_0x1271a3['message']:_0x51f535(0xe9)});}}),router[a24_0x3799d6(0xd4)]('/cointopay/stats',(_0x328374,_0x395b52)=>{const _0xc02dcf=a24_0x3799d6;try{const _0x350e07=coinToPayStatusService_1[_0xc02dcf(0x113)][_0xc02dcf(0xaa)]();_0x395b52[_0xc02dcf(0xa0)]({'success':!![],'result':{..._0x350e07,'description':'CoinToPay\x20automatic\x20status\x20checking\x20service','statusMapping':{'Paid':_0xc02dcf(0xb5),'Awaiting\x20Fiat':'PENDING','waiting':'PENDING','expired':_0xc02dcf(0xdb),'failed':_0xc02dcf(0xe5)},'autoExpiryNote':_0xc02dcf(0xab)+_0x350e07['expiryDays']+_0xc02dcf(0xc0),'individualTimersNote':_0xc02dcf(0x101)}});}catch(_0x4f493f){_0x395b52[_0xc02dcf(0xd8)](0x1f4)['json']({'success':![],'message':_0xc02dcf(0x115)});}}),router[a24_0x3799d6(0xd4)]('/cointopay/payment/:paymentId',async(_0x879e54,_0x200514)=>{const _0x266d78=a24_0x3799d6;try{const {paymentId:_0x1d8e16}=_0x879e54['params'],_0x4da4ad=coinToPayStatusService_1[_0x266d78(0x113)][_0x266d78(0xe1)](_0x1d8e16),_0x2c27a4=(await Promise['resolve']()[_0x266d78(0xb9)](()=>__importStar(require('../config/database'))))[_0x266d78(0xd6)],_0x58c74c=await _0x2c27a4[_0x266d78(0x10b)][_0x266d78(0xbd)]({'where':{'id':_0x1d8e16},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x58c74c)return _0x200514['status'](0x194)[_0x266d78(0xa0)]({'success':![],'message':'Payment\x20not\x20found'});_0x200514[_0x266d78(0xa0)]({'success':!![],'result':{'payment':{'id':_0x58c74c['id'],'gateway':_0x58c74c[_0x266d78(0x11d)],'gatewayPaymentId':_0x58c74c[_0x266d78(0xac)],'status':_0x58c74c['status'],'amount':_0x58c74c[_0x266d78(0xfa)],'currency':_0x58c74c[_0x266d78(0xd3)],'createdAt':_0x58c74c[_0x266d78(0xb6)],'updatedAt':_0x58c74c[_0x266d78(0xea)],'shop':_0x58c74c[_0x266d78(0xd0)]},'timers':_0x4da4ad,'isCoinToPay':_0x58c74c['gateway']===_0x266d78(0xf6),'ageInMinutes':Math[_0x266d78(0xcc)]((Date[_0x266d78(0xa7)]()-_0x58c74c[_0x266d78(0xb6)]['getTime']())/(0x3e8*0x3c))}});}catch(_0x43d654){_0x200514[_0x266d78(0xd8)](0x1f4)[_0x266d78(0xa0)]({'success':![],'message':_0x43d654 instanceof Error?_0x43d654['message']:'Failed\x20to\x20get\x20payment\x20information'});}}),router[a24_0x3799d6(0xd4)]('/domain-monitoring/stats',(_0x1963c5,_0x3256bc)=>{const _0x225687=a24_0x3799d6;try{const _0x483ba9=domainMonitoringService_1['domainMonitoringService']['getMonitoringStats']();_0x3256bc[_0x225687(0xa0)]({'success':!![],'result':{..._0x483ba9,'description':_0x225687(0xd9),'behavior':_0x225687(0x100),'encoding':_0x225687(0xc6)}});}catch(_0x510f0c){_0x3256bc[_0x225687(0xd8)](0x1f4)['json']({'success':![],'message':'Failed\x20to\x20get\x20domain\x20monitoring\x20statistics'});}}),router[a24_0x3799d6(0x10f)]('/domain-monitoring/check',async(_0x5be898,_0x4fd376)=>{const _0x5a001c=a24_0x3799d6;try{const _0x4cb5c4=await domainMonitoringService_1['domainMonitoringService']['manualCheck']();_0x4fd376[_0x5a001c(0xa0)]({'success':!![],'result':{'domainAvailable':_0x4cb5c4,'message':_0x4cb5c4?_0x5a001c(0xc8):_0x5a001c(0x11f),'timestamp':new Date()[_0x5a001c(0xc2)]()}});}catch(_0xe59976){_0x4fd376['status'](0x1f4)['json']({'success':![],'message':_0xe59976 instanceof Error?_0xe59976[_0x5a001c(0x116)]:_0x5a001c(0xa6)});}}),exports[a24_0x3799d6(0xd6)]=router;