'use strict';function a19_0x3472(_0x42e1aa,_0x41db71){const _0x24682d=a19_0x2468();return a19_0x3472=function(_0x347299,_0x43280d){_0x347299=_0x347299-0xdf;let _0x57232c=_0x24682d[_0x347299];return _0x57232c;},a19_0x3472(_0x42e1aa,_0x41db71);}function a19_0x2468(){const _0x6347d7=['/users/:id','findUnique','__esModule','createUser','Failed\x20to\x20get\x20payment\x20information','error','/statistics','Payments\x20automatically\x20expire\x20after\x20','344EzYWzz','4527Jhkwsp','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','/cointopay/check/:paymentId','updateUserSchema','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','6469687OsMzuo','/payout','paymentId','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','1091465euhNSR','/users','message','defineProperty','gateway','getMerchantsAwaitingPayout','/cointopay/stats','default','../middleware/validation','4136KJetUg','prototype','CoinToPay\x20payment\x20status\x20checked\x20successfully','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','cleanOldLogs','json','shop','Failed\x20to\x20get\x20log\x20statistics','getPayoutById','getPayments','5860060efinEs','then','/payments/:id/customer','status','deleteUser','manualCheck','12vmyjZg','post','validate','PAID','/merchant-statistics','Router','EXPIRED','domainMonitoringService','getTime','requireAdmin','coinToPayStatusService','getOwnPropertyNames','/payout/stats','activateUser','5078718mQJobA','/payments/:id','get','params','getLogStats','PENDING','AdminController','updateUser','createdAt','length','getUserById','floor','configurable','/users/:id/activate','1153041atuVlk','updatePayment','getPaymentById','delete','create','Domain\x20is\x20responding\x20correctly','/users/:id/suspend','createPayoutSchema','loggerService','../middleware/auth','use','../controllers/adminController','writable','/logs/stats','updateCustomerDataSchema','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','getPayoutStats','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','Failed\x20to\x20perform\x20manual\x20domain\x20check','CoinToPay\x20automatic\x20status\x20checking\x20service','../services/coinToPayStatusService','__setModuleDefault','__createBinding','put','/merchants/selection','/payout/merchants','cointopay','/auth','Domain\x20check\x20failed','getMerchantsSelection','expiryDays','11VZMJww','getServiceStats','getPaymentTimerInfo','express','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','getMerchantStatistics','/domain-monitoring/check','authenticateToken','Old\x20logs\x20cleaned\x20(kept\x20last\x20','Failed\x20to\x20clean\x20old\x20logs','call','deletePayout','body','/payments','checkAuth','getPayouts','/payouts','createPayout','updatedAt','8776yMbXib'];a19_0x2468=function(){return _0x6347d7;};return a19_0x2468();}const a19_0x19665e=a19_0x3472;(function(_0x3bebe9,_0x193451){const _0x3bc86e=a19_0x3472,_0x52f7a9=_0x3bebe9();while(!![]){try{const _0x5cdc66=parseInt(_0x3bc86e(0x153))/0x1*(parseInt(_0x3bc86e(0xeb))/0x2)+parseInt(_0x3bc86e(0x117))/0x3+parseInt(_0x3bc86e(0xfb))/0x4*(-parseInt(_0x3bc86e(0xe2))/0x5)+-parseInt(_0x3bc86e(0x109))/0x6+parseInt(_0x3bc86e(0x159))/0x7+-parseInt(_0x3bc86e(0x14a))/0x8*(-parseInt(_0x3bc86e(0x154))/0x9)+-parseInt(_0x3bc86e(0xf5))/0xa*(parseInt(_0x3bc86e(0x137))/0xb);if(_0x5cdc66===_0x193451)break;else _0x52f7a9['push'](_0x52f7a9['shift']());}catch(_0xc876a2){_0x52f7a9['push'](_0x52f7a9['shift']());}}}(a19_0x2468,0x76451));var __createBinding=this&&this[a19_0x19665e(0x12e)]||(Object[a19_0x19665e(0x11b)]?function(_0x217a5e,_0x423be2,_0x4e99eb,_0xcfaa46){const _0x1e094c=a19_0x19665e;if(_0xcfaa46===undefined)_0xcfaa46=_0x4e99eb;var _0x2f757f=Object['getOwnPropertyDescriptor'](_0x423be2,_0x4e99eb);(!_0x2f757f||(_0x1e094c(0x10b)in _0x2f757f?!_0x423be2[_0x1e094c(0x14d)]:_0x2f757f[_0x1e094c(0x123)]||_0x2f757f[_0x1e094c(0x115)]))&&(_0x2f757f={'enumerable':!![],'get':function(){return _0x423be2[_0x4e99eb];}}),Object[_0x1e094c(0xe5)](_0x217a5e,_0xcfaa46,_0x2f757f);}:function(_0x20f267,_0x511894,_0x365be8,_0x4e73){if(_0x4e73===undefined)_0x4e73=_0x365be8;_0x20f267[_0x4e73]=_0x511894[_0x365be8];}),__setModuleDefault=this&&this[a19_0x19665e(0x12d)]||(Object[a19_0x19665e(0x11b)]?function(_0x28adb0,_0x47c139){const _0x5e0a58=a19_0x19665e;Object[_0x5e0a58(0xe5)](_0x28adb0,'default',{'enumerable':!![],'value':_0x47c139});}:function(_0x808d46,_0xc960b){_0x808d46['default']=_0xc960b;}),__importStar=this&&this['__importStar']||(function(){var _0x42ffc7=function(_0x4c653f){const _0x558eaf=a19_0x3472;return _0x42ffc7=Object[_0x558eaf(0x106)]||function(_0x361837){const _0x58a1c1=_0x558eaf;var _0x8150cb=[];for(var _0x1d255f in _0x361837)if(Object[_0x58a1c1(0xec)]['hasOwnProperty'][_0x58a1c1(0x141)](_0x361837,_0x1d255f))_0x8150cb[_0x8150cb[_0x58a1c1(0x112)]]=_0x1d255f;return _0x8150cb;},_0x42ffc7(_0x4c653f);};return function(_0x5ab397){const _0x4c775a=a19_0x3472;if(_0x5ab397&&_0x5ab397[_0x4c775a(0x14d)])return _0x5ab397;var _0x27aa2d={};if(_0x5ab397!=null){for(var _0x3c74d9=_0x42ffc7(_0x5ab397),_0x52988c=0x0;_0x52988c<_0x3c74d9[_0x4c775a(0x112)];_0x52988c++)if(_0x3c74d9[_0x52988c]!==_0x4c775a(0xe9))__createBinding(_0x27aa2d,_0x5ab397,_0x3c74d9[_0x52988c]);}return __setModuleDefault(_0x27aa2d,_0x5ab397),_0x27aa2d;};}());Object[a19_0x19665e(0xe5)](exports,a19_0x19665e(0x14d),{'value':!![]});const express_1=require(a19_0x19665e(0x13a)),adminController_1=require(a19_0x19665e(0x122)),validation_1=require(a19_0x19665e(0xea)),auth_1=require(a19_0x19665e(0x120)),loggerService_1=require('../services/loggerService'),coinToPayStatusService_1=require(a19_0x19665e(0x12c)),domainMonitoringService_1=require('../services/domainMonitoringService'),router=(0x0,express_1[a19_0x19665e(0x100)])(),adminController=new adminController_1[(a19_0x19665e(0x10f))]();router[a19_0x19665e(0x121)](auth_1[a19_0x19665e(0x13e)],auth_1[a19_0x19665e(0x104)]),router['get'](a19_0x19665e(0x133),adminController[a19_0x19665e(0x145)]),router[a19_0x19665e(0x10b)](a19_0x19665e(0x151),adminController['getStatistics']),router[a19_0x19665e(0x10b)](a19_0x19665e(0xff),adminController[a19_0x19665e(0x13c)]),router[a19_0x19665e(0x10b)](a19_0x19665e(0x107),adminController[a19_0x19665e(0x128)]),router[a19_0x19665e(0x10b)](a19_0x19665e(0x131),adminController[a19_0x19665e(0xe7)]),router[a19_0x19665e(0x10b)](a19_0x19665e(0x130),adminController[a19_0x19665e(0x135)]),router[a19_0x19665e(0xfc)](a19_0x19665e(0xdf),(0x0,validation_1[a19_0x19665e(0xfd)])(validation_1[a19_0x19665e(0x11e)]),adminController[a19_0x19665e(0x148)]),router['get'](a19_0x19665e(0x147),adminController[a19_0x19665e(0x146)]),router['get']('/payouts/:id',adminController[a19_0x19665e(0xf3)]),router[a19_0x19665e(0x11a)]('/payouts/:id',adminController[a19_0x19665e(0x142)]),router[a19_0x19665e(0x10b)](a19_0x19665e(0x144),adminController[a19_0x19665e(0xf4)]),router[a19_0x19665e(0x10b)](a19_0x19665e(0x10a),adminController[a19_0x19665e(0x119)]),router[a19_0x19665e(0x12f)](a19_0x19665e(0x10a),adminController[a19_0x19665e(0x118)]),router[a19_0x19665e(0x12f)](a19_0x19665e(0xf7),(0x0,validation_1['validate'])(validation_1[a19_0x19665e(0x125)]),adminController['updateCustomerData']),router[a19_0x19665e(0x10b)](a19_0x19665e(0xe3),adminController['getUsers']),router[a19_0x19665e(0x10b)](a19_0x19665e(0x14b),adminController[a19_0x19665e(0x113)]),router[a19_0x19665e(0xfc)]('/users',(0x0,validation_1['validate'])(validation_1['createUserSchema']),adminController[a19_0x19665e(0x14e)]),router[a19_0x19665e(0x12f)](a19_0x19665e(0x14b),(0x0,validation_1['validate'])(validation_1[a19_0x19665e(0x157)]),adminController[a19_0x19665e(0x110)]),router[a19_0x19665e(0x11a)](a19_0x19665e(0x14b),adminController[a19_0x19665e(0xf9)]),router[a19_0x19665e(0xfc)](a19_0x19665e(0x11d),adminController['suspendUser']),router[a19_0x19665e(0xfc)](a19_0x19665e(0x116),adminController[a19_0x19665e(0x108)]),router['get'](a19_0x19665e(0x124),(_0x593438,_0x346bc9)=>{const _0x28dd9b=a19_0x19665e;try{const _0x110611=loggerService_1['loggerService'][_0x28dd9b(0x10d)]();_0x346bc9[_0x28dd9b(0xf0)]({'success':!![],'result':_0x110611});}catch(_0x4dbb85){_0x346bc9[_0x28dd9b(0xf8)](0x1f4)['json']({'success':![],'message':_0x28dd9b(0xf2)});}}),router[a19_0x19665e(0xfc)]('/logs/clean',(_0xc4c7c1,_0x1e333a)=>{const _0x53cc45=a19_0x19665e;try{const {daysToKeep:daysToKeep=0x1e}=_0xc4c7c1[_0x53cc45(0x143)];loggerService_1[_0x53cc45(0x11f)][_0x53cc45(0xef)](daysToKeep),_0x1e333a[_0x53cc45(0xf0)]({'success':!![],'message':_0x53cc45(0x13f)+daysToKeep+'\x20days)'});}catch(_0x542610){_0x1e333a['status'](0x1f4)[_0x53cc45(0xf0)]({'success':![],'message':_0x53cc45(0x140)});}}),router[a19_0x19665e(0xfc)](a19_0x19665e(0x156),async(_0x23d320,_0x17eb12)=>{const _0x1064d5=a19_0x19665e;try{const {paymentId:_0x4a3aa7}=_0x23d320[_0x1064d5(0x10c)];console['log'](_0x1064d5(0x155)+_0x4a3aa7),await coinToPayStatusService_1[_0x1064d5(0x105)]['checkPaymentById'](_0x4a3aa7),_0x17eb12[_0x1064d5(0xf0)]({'success':!![],'message':_0x1064d5(0xed)});}catch(_0x8e7d){console[_0x1064d5(0x150)](_0x1064d5(0xe1)+_0x23d320[_0x1064d5(0x10c)][_0x1064d5(0xe0)]+':',_0x8e7d),_0x17eb12[_0x1064d5(0xf8)](0x1f4)[_0x1064d5(0xf0)]({'success':![],'message':_0x8e7d instanceof Error?_0x8e7d[_0x1064d5(0xe4)]:_0x1064d5(0x127)});}}),router['get'](a19_0x19665e(0xe8),(_0x4087d0,_0x31aee1)=>{const _0x23732e=a19_0x19665e;try{const _0x114d53=coinToPayStatusService_1[_0x23732e(0x105)][_0x23732e(0x138)]();_0x31aee1['json']({'success':!![],'result':{..._0x114d53,'description':_0x23732e(0x12b),'statusMapping':{'Paid':_0x23732e(0xfe),'Awaiting\x20Fiat':_0x23732e(0x10e),'waiting':_0x23732e(0x10e),'expired':_0x23732e(0x101),'failed':'FAILED'},'autoExpiryNote':_0x23732e(0x152)+_0x114d53[_0x23732e(0x136)]+'\x20days\x20if\x20not\x20paid','individualTimersNote':_0x23732e(0x13b)}});}catch(_0x559bd1){_0x31aee1[_0x23732e(0xf8)](0x1f4)['json']({'success':![],'message':_0x23732e(0x126)});}}),router['get']('/cointopay/payment/:paymentId',async(_0x136ad4,_0x3321fc)=>{const _0x3cff0e=a19_0x19665e;try{const {paymentId:_0x19c632}=_0x136ad4['params'],_0x51d7ea=coinToPayStatusService_1[_0x3cff0e(0x105)][_0x3cff0e(0x139)](_0x19c632),_0x363e05=(await Promise['resolve']()[_0x3cff0e(0xf6)](()=>__importStar(require('../config/database'))))[_0x3cff0e(0xe9)],_0x213585=await _0x363e05['payment'][_0x3cff0e(0x14c)]({'where':{'id':_0x19c632},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x213585)return _0x3321fc['status'](0x194)[_0x3cff0e(0xf0)]({'success':![],'message':'Payment\x20not\x20found'});_0x3321fc[_0x3cff0e(0xf0)]({'success':!![],'result':{'payment':{'id':_0x213585['id'],'gateway':_0x213585['gateway'],'gatewayPaymentId':_0x213585['gatewayPaymentId'],'status':_0x213585[_0x3cff0e(0xf8)],'amount':_0x213585['amount'],'currency':_0x213585['currency'],'createdAt':_0x213585[_0x3cff0e(0x111)],'updatedAt':_0x213585[_0x3cff0e(0x149)],'shop':_0x213585[_0x3cff0e(0xf1)]},'timers':_0x51d7ea,'isCoinToPay':_0x213585[_0x3cff0e(0xe6)]===_0x3cff0e(0x132),'ageInMinutes':Math[_0x3cff0e(0x114)]((Date['now']()-_0x213585['createdAt'][_0x3cff0e(0x103)]())/(0x3e8*0x3c))}});}catch(_0x46b686){_0x3321fc['status'](0x1f4)[_0x3cff0e(0xf0)]({'success':![],'message':_0x46b686 instanceof Error?_0x46b686[_0x3cff0e(0xe4)]:_0x3cff0e(0x14f)});}}),router[a19_0x19665e(0x10b)]('/domain-monitoring/stats',(_0x1a759b,_0x3b61a6)=>{const _0x2d8847=a19_0x19665e;try{const _0x1cfad9=domainMonitoringService_1[_0x2d8847(0x102)]['getMonitoringStats']();_0x3b61a6[_0x2d8847(0xf0)]({'success':!![],'result':{..._0x1cfad9,'description':_0x2d8847(0x158),'behavior':_0x2d8847(0xee),'encoding':_0x2d8847(0x129)}});}catch(_0x41bda1){_0x3b61a6[_0x2d8847(0xf8)](0x1f4)[_0x2d8847(0xf0)]({'success':![],'message':'Failed\x20to\x20get\x20domain\x20monitoring\x20statistics'});}}),router[a19_0x19665e(0xfc)](a19_0x19665e(0x13d),async(_0x1bf347,_0x2ab637)=>{const _0x23b8c0=a19_0x19665e;try{const _0x10f9bb=await domainMonitoringService_1[_0x23b8c0(0x102)][_0x23b8c0(0xfa)]();_0x2ab637[_0x23b8c0(0xf0)]({'success':!![],'result':{'domainAvailable':_0x10f9bb,'message':_0x10f9bb?_0x23b8c0(0x11c):_0x23b8c0(0x134),'timestamp':new Date()['toISOString']()}});}catch(_0x550aeb){_0x2ab637[_0x23b8c0(0xf8)](0x1f4)[_0x23b8c0(0xf0)]({'success':![],'message':_0x550aeb instanceof Error?_0x550aeb[_0x23b8c0(0xe4)]:_0x23b8c0(0x12a)});}}),exports[a19_0x19665e(0xe9)]=router;