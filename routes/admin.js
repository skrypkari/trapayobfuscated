'use strict';const a19_0x3f1724=a19_0x29a7;(function(_0x37664c,_0x455335){const _0x1d8530=a19_0x29a7,_0x60fb42=_0x37664c();while(!![]){try{const _0x5e67fa=parseInt(_0x1d8530(0x239))/0x1*(-parseInt(_0x1d8530(0x228))/0x2)+-parseInt(_0x1d8530(0x236))/0x3+-parseInt(_0x1d8530(0x1d7))/0x4*(parseInt(_0x1d8530(0x1f5))/0x5)+parseInt(_0x1d8530(0x1ff))/0x6*(-parseInt(_0x1d8530(0x202))/0x7)+-parseInt(_0x1d8530(0x23a))/0x8*(-parseInt(_0x1d8530(0x23e))/0x9)+parseInt(_0x1d8530(0x254))/0xa+parseInt(_0x1d8530(0x1fb))/0xb;if(_0x5e67fa===_0x455335)break;else _0x60fb42['push'](_0x60fb42['shift']());}catch(_0x3f30fb){_0x60fb42['push'](_0x60fb42['shift']());}}}(a19_0x723d,0x3637f));function a19_0x29a7(_0x2269e1,_0x406259){const _0x723d8d=a19_0x723d();return a19_0x29a7=function(_0x29a750,_0x32dffc){_0x29a750=_0x29a750-0x1d7;let _0x573f64=_0x723d8d[_0x29a750];return _0x573f64;},a19_0x29a7(_0x2269e1,_0x406259);}function a19_0x723d(){const _0x202781=['getPayoutById','/auth','cleanOldLogs','getMerchantStatistics','EXPIRED','createUser','2TMXCBY','manualCheck','gateway','hasOwnProperty','paymentId','/payout/merchants','defineProperty','loggerService','payment','Domain\x20check\x20failed','suspendUser','../controllers/adminController','status','currency','298299zuYsMX','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','shop','290009unNHaF','344DLTQbw','getMerchantsSelection','message','Failed\x20to\x20perform\x20manual\x20domain\x20check','65511XmExLn','CoinToPay\x20payment\x20status\x20checked\x20successfully','deleteUser','domainMonitoringService','createPayout','create','Failed\x20to\x20clean\x20old\x20logs','post','getPayouts','use','resolve','/payout','FAILED','requireAdmin','/payments/:id/customer','checkAuth','deletePayout','updateCustomerData','params','/statistics','__setModuleDefault','getPaymentById','3507600BBwgYS','604ctxttc','/merchants/selection','configurable','/payments','then','/domain-monitoring/stats','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','updateUserSchema','PAID','/payments/:id','get','/payouts','getMonitoringStats','getMerchantsAwaitingPayout','updatePayment','expiryDays','updatedAt','toISOString','gatewayPaymentId','createdAt','activateUser','/cointopay/check/:paymentId','put','Old\x20logs\x20cleaned\x20(kept\x20last\x20','getTime','getPayoutStats','getUsers','getPayments','length','810MhjvEC','../middleware/auth','validate','Payments\x20automatically\x20expire\x20after\x20','/logs/clean','__importStar','2316655MrpYfg','/users/:id','/payouts/:id','amount','11262gPhTLR','getOwnPropertyDescriptor','writable','889RfWZIb','getLogStats','delete','coinToPayStatusService','/users','../services/coinToPayStatusService','\x20days)','Payment\x20not\x20found','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','body','AdminController','floor','authenticateToken','cointopay','Failed\x20to\x20get\x20payment\x20information','/cointopay/stats','getStatistics','call','createPayoutSchema','json','/cointopay/payment/:paymentId','__esModule','express','findUnique','CoinToPay\x20automatic\x20status\x20checking\x20service','default','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','\x20days\x20if\x20not\x20paid','/users/:id/suspend','checkPaymentById','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu'];a19_0x723d=function(){return _0x202781;};return a19_0x723d();}var __createBinding=this&&this['__createBinding']||(Object[a19_0x3f1724(0x243)]?function(_0x4dcd6,_0x17e4e3,_0x36b19b,_0x3039c7){const _0x5234f3=a19_0x3f1724;if(_0x3039c7===undefined)_0x3039c7=_0x36b19b;var _0x52c174=Object[_0x5234f3(0x200)](_0x17e4e3,_0x36b19b);(!_0x52c174||(_0x5234f3(0x1e2)in _0x52c174?!_0x17e4e3[_0x5234f3(0x217)]:_0x52c174[_0x5234f3(0x201)]||_0x52c174[_0x5234f3(0x1d9)]))&&(_0x52c174={'enumerable':!![],'get':function(){return _0x17e4e3[_0x36b19b];}}),Object[_0x5234f3(0x22e)](_0x4dcd6,_0x3039c7,_0x52c174);}:function(_0x1152fa,_0x1c5ba0,_0x2b1460,_0x176b7c){if(_0x176b7c===undefined)_0x176b7c=_0x2b1460;_0x1152fa[_0x176b7c]=_0x1c5ba0[_0x2b1460];}),__setModuleDefault=this&&this[a19_0x3f1724(0x252)]||(Object[a19_0x3f1724(0x243)]?function(_0x307364,_0x30a4bb){const _0x57188e=a19_0x3f1724;Object[_0x57188e(0x22e)](_0x307364,_0x57188e(0x21b),{'enumerable':!![],'value':_0x30a4bb});}:function(_0x36edfe,_0x57aae1){const _0x1e9fbd=a19_0x3f1724;_0x36edfe[_0x1e9fbd(0x21b)]=_0x57aae1;}),__importStar=this&&this[a19_0x3f1724(0x1fa)]||(function(){var _0x40f762=function(_0x38670c){return _0x40f762=Object['getOwnPropertyNames']||function(_0x18eac8){const _0x3f266a=a19_0x29a7;var _0x15292e=[];for(var _0x32cba0 in _0x18eac8)if(Object['prototype'][_0x3f266a(0x22b)][_0x3f266a(0x213)](_0x18eac8,_0x32cba0))_0x15292e[_0x15292e[_0x3f266a(0x1f4)]]=_0x32cba0;return _0x15292e;},_0x40f762(_0x38670c);};return function(_0x423d54){const _0x567a04=a19_0x29a7;if(_0x423d54&&_0x423d54[_0x567a04(0x217)])return _0x423d54;var _0x5a0003={};if(_0x423d54!=null){for(var _0xf3ca0d=_0x40f762(_0x423d54),_0x599927=0x0;_0x599927<_0xf3ca0d[_0x567a04(0x1f4)];_0x599927++)if(_0xf3ca0d[_0x599927]!==_0x567a04(0x21b))__createBinding(_0x5a0003,_0x423d54,_0xf3ca0d[_0x599927]);}return __setModuleDefault(_0x5a0003,_0x423d54),_0x5a0003;};}());Object['defineProperty'](exports,a19_0x3f1724(0x217),{'value':!![]});const express_1=require(a19_0x3f1724(0x218)),adminController_1=require(a19_0x3f1724(0x233)),validation_1=require('../middleware/validation'),auth_1=require(a19_0x3f1724(0x1f6)),loggerService_1=require('../services/loggerService'),coinToPayStatusService_1=require(a19_0x3f1724(0x207)),domainMonitoringService_1=require('../services/domainMonitoringService'),router=(0x0,express_1['Router'])(),adminController=new adminController_1[(a19_0x3f1724(0x20c))]();router[a19_0x3f1724(0x247)](auth_1[a19_0x3f1724(0x20e)],auth_1[a19_0x3f1724(0x24b)]),router[a19_0x3f1724(0x1e2)](a19_0x3f1724(0x223),adminController[a19_0x3f1724(0x24d)]),router['get'](a19_0x3f1724(0x251),adminController[a19_0x3f1724(0x212)]),router[a19_0x3f1724(0x1e2)]('/merchant-statistics',adminController[a19_0x3f1724(0x225)]),router['get']('/payout/stats',adminController[a19_0x3f1724(0x1f1)]),router[a19_0x3f1724(0x1e2)](a19_0x3f1724(0x22d),adminController[a19_0x3f1724(0x1e5)]),router[a19_0x3f1724(0x1e2)](a19_0x3f1724(0x1d8),adminController[a19_0x3f1724(0x23b)]),router[a19_0x3f1724(0x245)](a19_0x3f1724(0x249),(0x0,validation_1['validate'])(validation_1[a19_0x3f1724(0x214)]),adminController[a19_0x3f1724(0x242)]),router[a19_0x3f1724(0x1e2)](a19_0x3f1724(0x1e3),adminController[a19_0x3f1724(0x246)]),router[a19_0x3f1724(0x1e2)](a19_0x3f1724(0x1fd),adminController[a19_0x3f1724(0x222)]),router[a19_0x3f1724(0x204)]('/payouts/:id',adminController[a19_0x3f1724(0x24e)]),router[a19_0x3f1724(0x1e2)](a19_0x3f1724(0x1da),adminController[a19_0x3f1724(0x1f3)]),router[a19_0x3f1724(0x1e2)](a19_0x3f1724(0x1e1),adminController[a19_0x3f1724(0x253)]),router[a19_0x3f1724(0x1ee)](a19_0x3f1724(0x1e1),adminController[a19_0x3f1724(0x1e6)]),router[a19_0x3f1724(0x1ee)](a19_0x3f1724(0x24c),(0x0,validation_1[a19_0x3f1724(0x1f7)])(validation_1['updateCustomerDataSchema']),adminController[a19_0x3f1724(0x24f)]),router[a19_0x3f1724(0x1e2)](a19_0x3f1724(0x206),adminController[a19_0x3f1724(0x1f2)]),router[a19_0x3f1724(0x1e2)](a19_0x3f1724(0x1fc),adminController['getUserById']),router[a19_0x3f1724(0x245)](a19_0x3f1724(0x206),(0x0,validation_1[a19_0x3f1724(0x1f7)])(validation_1['createUserSchema']),adminController[a19_0x3f1724(0x227)]),router[a19_0x3f1724(0x1ee)](a19_0x3f1724(0x1fc),(0x0,validation_1[a19_0x3f1724(0x1f7)])(validation_1[a19_0x3f1724(0x1df)]),adminController['updateUser']),router[a19_0x3f1724(0x204)](a19_0x3f1724(0x1fc),adminController[a19_0x3f1724(0x240)]),router['post'](a19_0x3f1724(0x21f),adminController[a19_0x3f1724(0x232)]),router['post']('/users/:id/activate',adminController[a19_0x3f1724(0x1ec)]),router['get']('/logs/stats',(_0x15b8e1,_0x27fd6a)=>{const _0x330eaf=a19_0x3f1724;try{const _0x1a083a=loggerService_1[_0x330eaf(0x22f)][_0x330eaf(0x203)]();_0x27fd6a[_0x330eaf(0x215)]({'success':!![],'result':_0x1a083a});}catch(_0x113784){_0x27fd6a['status'](0x1f4)[_0x330eaf(0x215)]({'success':![],'message':'Failed\x20to\x20get\x20log\x20statistics'});}}),router['post'](a19_0x3f1724(0x1f9),(_0x5ce151,_0x165538)=>{const _0x3650b0=a19_0x3f1724;try{const {daysToKeep:daysToKeep=0x1e}=_0x5ce151[_0x3650b0(0x20b)];loggerService_1['loggerService'][_0x3650b0(0x224)](daysToKeep),_0x165538[_0x3650b0(0x215)]({'success':!![],'message':_0x3650b0(0x1ef)+daysToKeep+_0x3650b0(0x208)});}catch(_0x49e53a){_0x165538['status'](0x1f4)[_0x3650b0(0x215)]({'success':![],'message':_0x3650b0(0x244)});}}),router[a19_0x3f1724(0x245)](a19_0x3f1724(0x1ed),async(_0x582c8c,_0x4284b3)=>{const _0x3d41d5=a19_0x3f1724;try{const {paymentId:_0x17a242}=_0x582c8c['params'];console['log'](_0x3d41d5(0x20a)+_0x17a242),await coinToPayStatusService_1[_0x3d41d5(0x205)][_0x3d41d5(0x220)](_0x17a242),_0x4284b3[_0x3d41d5(0x215)]({'success':!![],'message':_0x3d41d5(0x23f)});}catch(_0x12b7ba){console['error']('‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20'+_0x582c8c[_0x3d41d5(0x250)][_0x3d41d5(0x22c)]+':',_0x12b7ba),_0x4284b3[_0x3d41d5(0x234)](0x1f4)[_0x3d41d5(0x215)]({'success':![],'message':_0x12b7ba instanceof Error?_0x12b7ba[_0x3d41d5(0x23c)]:_0x3d41d5(0x1dd)});}}),router[a19_0x3f1724(0x1e2)](a19_0x3f1724(0x211),(_0x4dbe39,_0x357313)=>{const _0x27f904=a19_0x3f1724;try{const _0x247871=coinToPayStatusService_1['coinToPayStatusService']['getServiceStats']();_0x357313[_0x27f904(0x215)]({'success':!![],'result':{..._0x247871,'description':_0x27f904(0x21a),'statusMapping':{'Paid':_0x27f904(0x1e0),'Awaiting\x20Fiat':'PENDING','waiting':'PENDING','expired':_0x27f904(0x226),'failed':_0x27f904(0x24a)},'autoExpiryNote':_0x27f904(0x1f8)+_0x247871[_0x27f904(0x1e7)]+_0x27f904(0x21e),'individualTimersNote':_0x27f904(0x21d)}});}catch(_0x46052e){_0x357313[_0x27f904(0x234)](0x1f4)[_0x27f904(0x215)]({'success':![],'message':'Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics'});}}),router['get'](a19_0x3f1724(0x216),async(_0x2989c9,_0x1cf353)=>{const _0x2d8b33=a19_0x3f1724;try{const {paymentId:_0x5b045}=_0x2989c9[_0x2d8b33(0x250)],_0x23d4bf=coinToPayStatusService_1[_0x2d8b33(0x205)]['getPaymentTimerInfo'](_0x5b045),_0x5577fd=(await Promise[_0x2d8b33(0x248)]()[_0x2d8b33(0x1db)](()=>__importStar(require('../config/database'))))['default'],_0x7c3bf5=await _0x5577fd[_0x2d8b33(0x230)][_0x2d8b33(0x219)]({'where':{'id':_0x5b045},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x7c3bf5)return _0x1cf353[_0x2d8b33(0x234)](0x194)[_0x2d8b33(0x215)]({'success':![],'message':_0x2d8b33(0x209)});_0x1cf353[_0x2d8b33(0x215)]({'success':!![],'result':{'payment':{'id':_0x7c3bf5['id'],'gateway':_0x7c3bf5[_0x2d8b33(0x22a)],'gatewayPaymentId':_0x7c3bf5[_0x2d8b33(0x1ea)],'status':_0x7c3bf5[_0x2d8b33(0x234)],'amount':_0x7c3bf5[_0x2d8b33(0x1fe)],'currency':_0x7c3bf5[_0x2d8b33(0x235)],'createdAt':_0x7c3bf5[_0x2d8b33(0x1eb)],'updatedAt':_0x7c3bf5[_0x2d8b33(0x1e8)],'shop':_0x7c3bf5[_0x2d8b33(0x238)]},'timers':_0x23d4bf,'isCoinToPay':_0x7c3bf5['gateway']===_0x2d8b33(0x20f),'ageInMinutes':Math[_0x2d8b33(0x20d)]((Date['now']()-_0x7c3bf5[_0x2d8b33(0x1eb)][_0x2d8b33(0x1f0)]())/(0x3e8*0x3c))}});}catch(_0x568c39){_0x1cf353[_0x2d8b33(0x234)](0x1f4)['json']({'success':![],'message':_0x568c39 instanceof Error?_0x568c39[_0x2d8b33(0x23c)]:_0x2d8b33(0x210)});}}),router['get'](a19_0x3f1724(0x1dc),(_0x53104a,_0x337b71)=>{const _0x13d208=a19_0x3f1724;try{const _0xce1186=domainMonitoringService_1[_0x13d208(0x241)][_0x13d208(0x1e4)]();_0x337b71['json']({'success':!![],'result':{..._0xce1186,'description':_0x13d208(0x221),'behavior':_0x13d208(0x21c),'encoding':_0x13d208(0x1de)}});}catch(_0x32773a){_0x337b71[_0x13d208(0x234)](0x1f4)[_0x13d208(0x215)]({'success':![],'message':_0x13d208(0x237)});}}),router[a19_0x3f1724(0x245)]('/domain-monitoring/check',async(_0xebc714,_0x2e08cd)=>{const _0x2bcc73=a19_0x3f1724;try{const _0x1c8ba8=await domainMonitoringService_1[_0x2bcc73(0x241)][_0x2bcc73(0x229)]();_0x2e08cd['json']({'success':!![],'result':{'domainAvailable':_0x1c8ba8,'message':_0x1c8ba8?'Domain\x20is\x20responding\x20correctly':_0x2bcc73(0x231),'timestamp':new Date()[_0x2bcc73(0x1e9)]()}});}catch(_0x3b8b81){_0x2e08cd[_0x2bcc73(0x234)](0x1f4)[_0x2bcc73(0x215)]({'success':![],'message':_0x3b8b81 instanceof Error?_0x3b8b81[_0x2bcc73(0x23c)]:_0x2bcc73(0x23d)});}}),exports['default']=router;