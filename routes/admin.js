'use strict';const a19_0x482c06=a19_0x7c25;function a19_0x7c25(_0x450bcd,_0x52d64a){const _0x2c537a=a19_0x2c53();return a19_0x7c25=function(_0x7c25f5,_0x5a4fd7){_0x7c25f5=_0x7c25f5-0x97;let _0x55be04=_0x2c537a[_0x7c25f5];return _0x55be04;},a19_0x7c25(_0x450bcd,_0x52d64a);}(function(_0x2ee05b,_0x171aed){const _0x4fde00=a19_0x7c25,_0x188220=_0x2ee05b();while(!![]){try{const _0x184486=parseInt(_0x4fde00(0xae))/0x1+parseInt(_0x4fde00(0xf4))/0x2+parseInt(_0x4fde00(0xc3))/0x3*(parseInt(_0x4fde00(0x9e))/0x4)+parseInt(_0x4fde00(0x10a))/0x5*(parseInt(_0x4fde00(0xb9))/0x6)+parseInt(_0x4fde00(0xb0))/0x7+-parseInt(_0x4fde00(0xb7))/0x8*(parseInt(_0x4fde00(0xed))/0x9)+parseInt(_0x4fde00(0xd8))/0xa*(-parseInt(_0x4fde00(0xfa))/0xb);if(_0x184486===_0x171aed)break;else _0x188220['push'](_0x188220['shift']());}catch(_0x5992b3){_0x188220['push'](_0x188220['shift']());}}}(a19_0x2c53,0xc0203));function a19_0x2c53(){const _0x56f75e=['/cointopay/stats','/auth','/users/:id','configurable','174070xlNIUJ','coinToPayStatusService','/statistics','/payout','defineProperty','express','getLogStats','__esModule','getUserById','/payouts/:id','body','/domain-monitoring/check','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','domainMonitoringService','../middleware/validation','Payments\x20automatically\x20expire\x20after\x20','get','shop','createdAt','call','/payouts','837BKsWpm','../services/domainMonitoringService','Payment\x20not\x20found','expiryDays','getStatistics','requireAdmin','cointopay','3109518sIcvnp','validate','../services/coinToPayStatusService','post','amount','../services/loggerService','1771FJPjYf','hasOwnProperty','getMonitoringStats','gatewayPaymentId','getServiceStats','../config/database','/domain-monitoring/stats','resolve','getPayoutStats','/payments','log','PENDING','activateUser','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','updateCustomerData','\x20days)','20KqJUJp','deletePayout','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','now','/cointopay/check/:paymentId','Domain\x20is\x20responding\x20correctly','getPayouts','length','\x20days\x20if\x20not\x20paid','4vxFLuM','getPaymentById','checkAuth','paymentId','delete','/payout/merchants','error','put','Failed\x20to\x20clean\x20old\x20logs','create','/logs/clean','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','message','CoinToPay\x20automatic\x20status\x20checking\x20service','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','EXPIRED','1506558IroCFQ','Failed\x20to\x20perform\x20manual\x20domain\x20check','1951089mfmcrJ','status','updatedAt','updatePayment','/users/:id/activate','default','createPayoutSchema','8536IbCMhP','/cointopay/payment/:paymentId','388740zHPyAA','use','deleteUser','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','createUser','params','gateway','/merchant-statistics','getPayments','268503LuNJEF','/users','updateUserSchema','/payments/:id','CoinToPay\x20payment\x20status\x20checked\x20successfully','checkPaymentById','floor','getPaymentTimerInfo','cleanOldLogs','getOwnPropertyDescriptor','loggerService','/users/:id/suspend','/payments/:id/customer','Failed\x20to\x20get\x20payment\x20information','prototype','../controllers/adminController','json'];a19_0x2c53=function(){return _0x56f75e;};return a19_0x2c53();}var __createBinding=this&&this['__createBinding']||(Object[a19_0x482c06(0xa7)]?function(_0x3c946b,_0x1dbef2,_0x3b1949,_0x1bf225){const _0x4adad9=a19_0x482c06;if(_0x1bf225===undefined)_0x1bf225=_0x3b1949;var _0x324480=Object[_0x4adad9(0xcc)](_0x1dbef2,_0x3b1949);(!_0x324480||(_0x4adad9(0xe8)in _0x324480?!_0x1dbef2['__esModule']:_0x324480['writable']||_0x324480[_0x4adad9(0xd7)]))&&(_0x324480={'enumerable':!![],'get':function(){return _0x1dbef2[_0x3b1949];}}),Object[_0x4adad9(0xdc)](_0x3c946b,_0x1bf225,_0x324480);}:function(_0x36d0e5,_0x1819fd,_0x3e1b46,_0x2e8ee2){if(_0x2e8ee2===undefined)_0x2e8ee2=_0x3e1b46;_0x36d0e5[_0x2e8ee2]=_0x1819fd[_0x3e1b46];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a19_0x482c06(0xa7)]?function(_0x314dc5,_0x2349c5){const _0x20c3f2=a19_0x482c06;Object[_0x20c3f2(0xdc)](_0x314dc5,_0x20c3f2(0xb5),{'enumerable':!![],'value':_0x2349c5});}:function(_0x44831e,_0x31276a){const _0x1c0dd4=a19_0x482c06;_0x44831e[_0x1c0dd4(0xb5)]=_0x31276a;}),__importStar=this&&this['__importStar']||(function(){var _0x497f86=function(_0x3cac31){return _0x497f86=Object['getOwnPropertyNames']||function(_0x1ad489){const _0x17788f=a19_0x7c25;var _0x1fd0ee=[];for(var _0x4552bc in _0x1ad489)if(Object[_0x17788f(0xd1)][_0x17788f(0xfb)][_0x17788f(0xeb)](_0x1ad489,_0x4552bc))_0x1fd0ee[_0x1fd0ee[_0x17788f(0x9c)]]=_0x4552bc;return _0x1fd0ee;},_0x497f86(_0x3cac31);};return function(_0x3fab12){const _0x397849=a19_0x7c25;if(_0x3fab12&&_0x3fab12[_0x397849(0xdf)])return _0x3fab12;var _0x425498={};if(_0x3fab12!=null){for(var _0x4f2a68=_0x497f86(_0x3fab12),_0x684654=0x0;_0x684654<_0x4f2a68[_0x397849(0x9c)];_0x684654++)if(_0x4f2a68[_0x684654]!==_0x397849(0xb5))__createBinding(_0x425498,_0x3fab12,_0x4f2a68[_0x684654]);}return __setModuleDefault(_0x425498,_0x3fab12),_0x425498;};}());Object[a19_0x482c06(0xdc)](exports,a19_0x482c06(0xdf),{'value':!![]});const express_1=require(a19_0x482c06(0xdd)),adminController_1=require(a19_0x482c06(0xd2)),validation_1=require(a19_0x482c06(0xe6)),auth_1=require('../middleware/auth'),loggerService_1=require(a19_0x482c06(0xf9)),coinToPayStatusService_1=require(a19_0x482c06(0xf6)),domainMonitoringService_1=require(a19_0x482c06(0xee)),router=(0x0,express_1['Router'])(),adminController=new adminController_1['AdminController']();router[a19_0x482c06(0xba)](auth_1['authenticateToken'],auth_1[a19_0x482c06(0xf2)]),router[a19_0x482c06(0xe8)](a19_0x482c06(0xd5),adminController[a19_0x482c06(0xa0)]),router[a19_0x482c06(0xe8)](a19_0x482c06(0xda),adminController[a19_0x482c06(0xf1)]),router[a19_0x482c06(0xe8)](a19_0x482c06(0xc1),adminController['getMerchantStatistics']),router[a19_0x482c06(0xe8)]('/payout/stats',adminController[a19_0x482c06(0x102)]),router['get'](a19_0x482c06(0xa3),adminController['getMerchantsAwaitingPayout']),router[a19_0x482c06(0xf7)](a19_0x482c06(0xdb),(0x0,validation_1[a19_0x482c06(0xf5)])(validation_1[a19_0x482c06(0xb6)]),adminController['createPayout']),router[a19_0x482c06(0xe8)](a19_0x482c06(0xec),adminController[a19_0x482c06(0x9b)]),router['get']('/payouts/:id',adminController['getPayoutById']),router[a19_0x482c06(0xa2)](a19_0x482c06(0xe1),adminController[a19_0x482c06(0x10b)]),router['get'](a19_0x482c06(0x103),adminController[a19_0x482c06(0xc2)]),router[a19_0x482c06(0xe8)]('/payments/:id',adminController[a19_0x482c06(0x9f)]),router[a19_0x482c06(0xa5)](a19_0x482c06(0xc6),adminController[a19_0x482c06(0xb3)]),router[a19_0x482c06(0xa5)](a19_0x482c06(0xcf),(0x0,validation_1['validate'])(validation_1['updateCustomerDataSchema']),adminController[a19_0x482c06(0x108)]),router[a19_0x482c06(0xe8)](a19_0x482c06(0xc4),adminController['getUsers']),router[a19_0x482c06(0xe8)](a19_0x482c06(0xd6),adminController[a19_0x482c06(0xe0)]),router['post'](a19_0x482c06(0xc4),(0x0,validation_1[a19_0x482c06(0xf5)])(validation_1['createUserSchema']),adminController[a19_0x482c06(0xbe)]),router[a19_0x482c06(0xa5)](a19_0x482c06(0xd6),(0x0,validation_1[a19_0x482c06(0xf5)])(validation_1[a19_0x482c06(0xc5)]),adminController['updateUser']),router[a19_0x482c06(0xa2)](a19_0x482c06(0xd6),adminController[a19_0x482c06(0xbb)]),router[a19_0x482c06(0xf7)](a19_0x482c06(0xce),adminController['suspendUser']),router[a19_0x482c06(0xf7)](a19_0x482c06(0xb4),adminController[a19_0x482c06(0x106)]),router['get']('/logs/stats',(_0x44b60f,_0x204096)=>{const _0x16e546=a19_0x482c06;try{const _0x66fd6c=loggerService_1['loggerService'][_0x16e546(0xde)]();_0x204096[_0x16e546(0xd3)]({'success':!![],'result':_0x66fd6c});}catch(_0x155c89){_0x204096[_0x16e546(0xb1)](0x1f4)[_0x16e546(0xd3)]({'success':![],'message':'Failed\x20to\x20get\x20log\x20statistics'});}}),router[a19_0x482c06(0xf7)](a19_0x482c06(0xa8),(_0x39876d,_0x41f909)=>{const _0x23794d=a19_0x482c06;try{const {daysToKeep:daysToKeep=0x1e}=_0x39876d[_0x23794d(0xe2)];loggerService_1[_0x23794d(0xcd)][_0x23794d(0xcb)](daysToKeep),_0x41f909[_0x23794d(0xd3)]({'success':!![],'message':'Old\x20logs\x20cleaned\x20(kept\x20last\x20'+daysToKeep+_0x23794d(0x109)});}catch(_0x597718){_0x41f909[_0x23794d(0xb1)](0x1f4)['json']({'success':![],'message':_0x23794d(0xa6)});}}),router['post'](a19_0x482c06(0x99),async(_0x29c3c2,_0x673d81)=>{const _0x46d9ed=a19_0x482c06;try{const {paymentId:_0x1d0e49}=_0x29c3c2['params'];console[_0x46d9ed(0x104)](_0x46d9ed(0xbd)+_0x1d0e49),await coinToPayStatusService_1[_0x46d9ed(0xd9)][_0x46d9ed(0xc8)](_0x1d0e49),_0x673d81['json']({'success':!![],'message':_0x46d9ed(0xc7)});}catch(_0x263459){console[_0x46d9ed(0xa4)](_0x46d9ed(0xbc)+_0x29c3c2[_0x46d9ed(0xbf)][_0x46d9ed(0xa1)]+':',_0x263459),_0x673d81[_0x46d9ed(0xb1)](0x1f4)[_0x46d9ed(0xd3)]({'success':![],'message':_0x263459 instanceof Error?_0x263459[_0x46d9ed(0xaa)]:_0x46d9ed(0xa9)});}}),router[a19_0x482c06(0xe8)](a19_0x482c06(0xd4),(_0x39864d,_0x217bc4)=>{const _0x508e30=a19_0x482c06;try{const _0x2e01b1=coinToPayStatusService_1[_0x508e30(0xd9)][_0x508e30(0xfe)]();_0x217bc4[_0x508e30(0xd3)]({'success':!![],'result':{..._0x2e01b1,'description':_0x508e30(0xab),'statusMapping':{'Paid':'PAID','Awaiting\x20Fiat':_0x508e30(0x105),'waiting':'PENDING','expired':_0x508e30(0xad),'failed':'FAILED'},'autoExpiryNote':_0x508e30(0xe7)+_0x2e01b1[_0x508e30(0xf0)]+_0x508e30(0x9d),'individualTimersNote':'Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly'}});}catch(_0x2e7c49){_0x217bc4[_0x508e30(0xb1)](0x1f4)[_0x508e30(0xd3)]({'success':![],'message':'Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics'});}}),router[a19_0x482c06(0xe8)](a19_0x482c06(0xb8),async(_0x4c9ec6,_0x3cb024)=>{const _0x21cc99=a19_0x482c06;try{const {paymentId:_0x1df666}=_0x4c9ec6['params'],_0x3b7b69=coinToPayStatusService_1['coinToPayStatusService'][_0x21cc99(0xca)](_0x1df666),_0x1ac00c=(await Promise[_0x21cc99(0x101)]()['then'](()=>__importStar(require(_0x21cc99(0xff)))))['default'],_0x1578f4=await _0x1ac00c['payment']['findUnique']({'where':{'id':_0x1df666},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x1578f4)return _0x3cb024[_0x21cc99(0xb1)](0x194)[_0x21cc99(0xd3)]({'success':![],'message':_0x21cc99(0xef)});_0x3cb024[_0x21cc99(0xd3)]({'success':!![],'result':{'payment':{'id':_0x1578f4['id'],'gateway':_0x1578f4[_0x21cc99(0xc0)],'gatewayPaymentId':_0x1578f4[_0x21cc99(0xfd)],'status':_0x1578f4[_0x21cc99(0xb1)],'amount':_0x1578f4[_0x21cc99(0xf8)],'currency':_0x1578f4['currency'],'createdAt':_0x1578f4[_0x21cc99(0xea)],'updatedAt':_0x1578f4[_0x21cc99(0xb2)],'shop':_0x1578f4[_0x21cc99(0xe9)]},'timers':_0x3b7b69,'isCoinToPay':_0x1578f4[_0x21cc99(0xc0)]===_0x21cc99(0xf3),'ageInMinutes':Math[_0x21cc99(0xc9)]((Date[_0x21cc99(0x98)]()-_0x1578f4[_0x21cc99(0xea)]['getTime']())/(0x3e8*0x3c))}});}catch(_0x4fac91){_0x3cb024[_0x21cc99(0xb1)](0x1f4)['json']({'success':![],'message':_0x4fac91 instanceof Error?_0x4fac91[_0x21cc99(0xaa)]:_0x21cc99(0xd0)});}}),router[a19_0x482c06(0xe8)](a19_0x482c06(0x100),(_0x3a720d,_0x31cf67)=>{const _0x4b4699=a19_0x482c06;try{const _0x31d602=domainMonitoringService_1[_0x4b4699(0xe5)][_0x4b4699(0xfc)]();_0x31cf67['json']({'success':!![],'result':{..._0x31d602,'description':_0x4b4699(0xac),'behavior':_0x4b4699(0xe4),'encoding':_0x4b4699(0x97)}});}catch(_0x17539a){_0x31cf67[_0x4b4699(0xb1)](0x1f4)['json']({'success':![],'message':_0x4b4699(0x107)});}}),router[a19_0x482c06(0xf7)](a19_0x482c06(0xe3),async(_0xe4eee7,_0x398cdb)=>{const _0x5b64fc=a19_0x482c06;try{const _0x113e05=await domainMonitoringService_1[_0x5b64fc(0xe5)]['manualCheck']();_0x398cdb['json']({'success':!![],'result':{'domainAvailable':_0x113e05,'message':_0x113e05?_0x5b64fc(0x9a):'Domain\x20check\x20failed','timestamp':new Date()['toISOString']()}});}catch(_0xdb7e22){_0x398cdb['status'](0x1f4)[_0x5b64fc(0xd3)]({'success':![],'message':_0xdb7e22 instanceof Error?_0xdb7e22[_0x5b64fc(0xaa)]:_0x5b64fc(0xaf)});}}),exports[a19_0x482c06(0xb5)]=router;