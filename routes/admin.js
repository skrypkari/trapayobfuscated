'use strict';const a19_0x4df500=a19_0x3a98;(function(_0x302ab0,_0x1a8732){const _0x2eb0ca=a19_0x3a98,_0xafaa9=_0x302ab0();while(!![]){try{const _0x4ba9c8=parseInt(_0x2eb0ca(0x19b))/0x1*(parseInt(_0x2eb0ca(0x1ae))/0x2)+-parseInt(_0x2eb0ca(0x1ba))/0x3+-parseInt(_0x2eb0ca(0x150))/0x4+-parseInt(_0x2eb0ca(0x1a8))/0x5*(-parseInt(_0x2eb0ca(0x19a))/0x6)+parseInt(_0x2eb0ca(0x19d))/0x7*(-parseInt(_0x2eb0ca(0x1a1))/0x8)+-parseInt(_0x2eb0ca(0x177))/0x9*(-parseInt(_0x2eb0ca(0x1c1))/0xa)+parseInt(_0x2eb0ca(0x14d))/0xb;if(_0x4ba9c8===_0x1a8732)break;else _0xafaa9['push'](_0xafaa9['shift']());}catch(_0x23c95f){_0xafaa9['push'](_0xafaa9['shift']());}}}(a19_0x10c5,0x61621));var __createBinding=this&&this[a19_0x4df500(0x192)]||(Object[a19_0x4df500(0x15f)]?function(_0x23a0da,_0x5d5e85,_0x15f494,_0xb6d08f){const _0x2294da=a19_0x4df500;if(_0xb6d08f===undefined)_0xb6d08f=_0x15f494;var _0x374d72=Object[_0x2294da(0x186)](_0x5d5e85,_0x15f494);(!_0x374d72||(_0x2294da(0x195)in _0x374d72?!_0x5d5e85['__esModule']:_0x374d72[_0x2294da(0x157)]||_0x374d72[_0x2294da(0x1b0)]))&&(_0x374d72={'enumerable':!![],'get':function(){return _0x5d5e85[_0x15f494];}}),Object[_0x2294da(0x171)](_0x23a0da,_0xb6d08f,_0x374d72);}:function(_0xd481ff,_0x5c5f8b,_0x4f1da8,_0x110fe7){if(_0x110fe7===undefined)_0x110fe7=_0x4f1da8;_0xd481ff[_0x110fe7]=_0x5c5f8b[_0x4f1da8];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object['create']?function(_0x575569,_0x1fbf96){const _0x36b84b=a19_0x4df500;Object[_0x36b84b(0x171)](_0x575569,_0x36b84b(0x18b),{'enumerable':!![],'value':_0x1fbf96});}:function(_0xfab5a7,_0x5b9d5d){const _0x3c67cf=a19_0x4df500;_0xfab5a7[_0x3c67cf(0x18b)]=_0x5b9d5d;}),__importStar=this&&this[a19_0x4df500(0x158)]||(function(){var _0x23e19d=function(_0x2c28e1){const _0x5457bc=a19_0x3a98;return _0x23e19d=Object[_0x5457bc(0x1b8)]||function(_0x390cce){const _0x2ab503=_0x5457bc;var _0x51a826=[];for(var _0x577432 in _0x390cce)if(Object['prototype'][_0x2ab503(0x17a)]['call'](_0x390cce,_0x577432))_0x51a826[_0x51a826[_0x2ab503(0x1a7)]]=_0x577432;return _0x51a826;},_0x23e19d(_0x2c28e1);};return function(_0x4f70f0){const _0x3e04cd=a19_0x3a98;if(_0x4f70f0&&_0x4f70f0[_0x3e04cd(0x162)])return _0x4f70f0;var _0x4694cd={};if(_0x4f70f0!=null){for(var _0x3a332d=_0x23e19d(_0x4f70f0),_0x385995=0x0;_0x385995<_0x3a332d[_0x3e04cd(0x1a7)];_0x385995++)if(_0x3a332d[_0x385995]!==_0x3e04cd(0x18b))__createBinding(_0x4694cd,_0x4f70f0,_0x3a332d[_0x385995]);}return __setModuleDefault(_0x4694cd,_0x4f70f0),_0x4694cd;};}());function a19_0x10c5(){const _0x7583e5=['/auth','deleteUser','domainMonitoringService','/logs/stats','171HJAFJO','PENDING','amount','hasOwnProperty','CoinToPay\x20automatic\x20status\x20checking\x20service','activateUser','Failed\x20to\x20perform\x20manual\x20domain\x20check','Domain\x20is\x20responding\x20correctly','/statistics','currency','EXPIRED','/payouts/:id','updateCustomerData','/domain-monitoring/stats','validate','getOwnPropertyDescriptor','../middleware/auth','status','shop','/users/:id','default','createdAt','/users/:id/suspend','\x20days\x20if\x20not\x20paid','createPayout','put','Domain\x20check\x20failed','__createBinding','gatewayPaymentId','params','get','resolve','updateUserSchema','updateUser','getTime','270906ixcuBB','684211TwLJWY','manualCheck','587615VtKHlP','findUnique','getPayments','requireAdmin','48jSrIQT','message','then','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','getMonitoringStats','getPaymentById','length','35XNRxmR','/cointopay/stats','checkAuth','Old\x20logs\x20cleaned\x20(kept\x20last\x20','/merchants/selection','/payout','2zZRLLy','getServiceStats','configurable','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','../services/coinToPayStatusService','../services/domainMonitoringService','now','expiryDays','gateway','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','getOwnPropertyNames','\x20days)','2101509gWcDSL','/users','/logs/clean','cointopay','AdminController','updatePayment','/payments/:id/customer','270610NCqEmN','/payout/merchants','floor','/cointopay/payment/:paymentId','deletePayout','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','Failed\x20to\x20get\x20log\x20statistics','createPayoutSchema','1262514uenzCD','coinToPayStatusService','updatedAt','104588dQHHPj','/domain-monitoring/check','payment','log','json','/payments/:id','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','writable','__importStar','getPayoutStats','cleanOldLogs','getUsers','paymentId','Payments\x20automatically\x20expire\x20after\x20','error','create','🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','../controllers/adminController','__esModule','FAILED','/merchant-statistics','getPaymentTimerInfo','loggerService','getLogStats','/payments','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','getMerchantsSelection','body','Failed\x20to\x20get\x20payment\x20information','post','❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','checkPaymentById','/payouts','defineProperty','delete'];a19_0x10c5=function(){return _0x7583e5;};return a19_0x10c5();}Object[a19_0x4df500(0x171)](exports,a19_0x4df500(0x162),{'value':!![]});const express_1=require('express'),adminController_1=require(a19_0x4df500(0x161)),validation_1=require('../middleware/validation'),auth_1=require(a19_0x4df500(0x187)),loggerService_1=require('../services/loggerService'),coinToPayStatusService_1=require(a19_0x4df500(0x1b2)),domainMonitoringService_1=require(a19_0x4df500(0x1b3)),router=(0x0,express_1['Router'])(),adminController=new adminController_1[(a19_0x4df500(0x1be))]();function a19_0x3a98(_0x30283e,_0x323bd9){const _0x10c5db=a19_0x10c5();return a19_0x3a98=function(_0x3a9823,_0x90807d){_0x3a9823=_0x3a9823-0x149;let _0x1605fb=_0x10c5db[_0x3a9823];return _0x1605fb;},a19_0x3a98(_0x30283e,_0x323bd9);}router['use'](auth_1['authenticateToken'],auth_1[a19_0x4df500(0x1a0)]),router[a19_0x4df500(0x195)](a19_0x4df500(0x173),adminController[a19_0x4df500(0x1aa)]),router[a19_0x4df500(0x195)](a19_0x4df500(0x17f),adminController['getStatistics']),router[a19_0x4df500(0x195)](a19_0x4df500(0x164),adminController['getMerchantStatistics']),router['get']('/payout/stats',adminController[a19_0x4df500(0x159)]),router['get'](a19_0x4df500(0x1c2),adminController['getMerchantsAwaitingPayout']),router[a19_0x4df500(0x195)](a19_0x4df500(0x1ac),adminController[a19_0x4df500(0x16a)]),router[a19_0x4df500(0x16d)](a19_0x4df500(0x1ad),(0x0,validation_1['validate'])(validation_1[a19_0x4df500(0x14c)]),adminController[a19_0x4df500(0x18f)]),router[a19_0x4df500(0x195)](a19_0x4df500(0x170),adminController['getPayouts']),router[a19_0x4df500(0x195)](a19_0x4df500(0x182),adminController['getPayoutById']),router['delete']('/payouts/:id',adminController[a19_0x4df500(0x149)]),router[a19_0x4df500(0x195)](a19_0x4df500(0x168),adminController[a19_0x4df500(0x19f)]),router[a19_0x4df500(0x195)](a19_0x4df500(0x155),adminController[a19_0x4df500(0x1a6)]),router[a19_0x4df500(0x190)](a19_0x4df500(0x155),adminController[a19_0x4df500(0x1bf)]),router[a19_0x4df500(0x190)](a19_0x4df500(0x1c0),(0x0,validation_1[a19_0x4df500(0x185)])(validation_1['updateCustomerDataSchema']),adminController[a19_0x4df500(0x183)]),router['get']('/users',adminController[a19_0x4df500(0x15b)]),router[a19_0x4df500(0x195)]('/users/:id',adminController['getUserById']),router[a19_0x4df500(0x16d)](a19_0x4df500(0x1bb),(0x0,validation_1['validate'])(validation_1['createUserSchema']),adminController['createUser']),router[a19_0x4df500(0x190)](a19_0x4df500(0x18a),(0x0,validation_1[a19_0x4df500(0x185)])(validation_1[a19_0x4df500(0x197)]),adminController[a19_0x4df500(0x198)]),router[a19_0x4df500(0x172)](a19_0x4df500(0x18a),adminController[a19_0x4df500(0x174)]),router['post'](a19_0x4df500(0x18d),adminController['suspendUser']),router['post']('/users/:id/activate',adminController[a19_0x4df500(0x17c)]),router[a19_0x4df500(0x195)](a19_0x4df500(0x176),(_0x352b4a,_0x9139b4)=>{const _0x443e5d=a19_0x4df500;try{const _0x4d9892=loggerService_1['loggerService'][_0x443e5d(0x167)]();_0x9139b4[_0x443e5d(0x154)]({'success':!![],'result':_0x4d9892});}catch(_0x39d7cc){_0x9139b4[_0x443e5d(0x188)](0x1f4)[_0x443e5d(0x154)]({'success':![],'message':_0x443e5d(0x14b)});}}),router[a19_0x4df500(0x16d)](a19_0x4df500(0x1bc),(_0x1227b7,_0x3814f2)=>{const _0x1f8432=a19_0x4df500;try{const {daysToKeep:daysToKeep=0x1e}=_0x1227b7[_0x1f8432(0x16b)];loggerService_1[_0x1f8432(0x166)][_0x1f8432(0x15a)](daysToKeep),_0x3814f2['json']({'success':!![],'message':_0x1f8432(0x1ab)+daysToKeep+_0x1f8432(0x1b9)});}catch(_0x5495c9){_0x3814f2[_0x1f8432(0x188)](0x1f4)[_0x1f8432(0x154)]({'success':![],'message':'Failed\x20to\x20clean\x20old\x20logs'});}}),router[a19_0x4df500(0x16d)]('/cointopay/check/:paymentId',async(_0x11fc9f,_0x12f90a)=>{const _0x1168d7=a19_0x4df500;try{const {paymentId:_0x432c9d}=_0x11fc9f[_0x1168d7(0x194)];console[_0x1168d7(0x153)](_0x1168d7(0x160)+_0x432c9d),await coinToPayStatusService_1['coinToPayStatusService'][_0x1168d7(0x16f)](_0x432c9d),_0x12f90a[_0x1168d7(0x154)]({'success':!![],'message':'CoinToPay\x20payment\x20status\x20checked\x20successfully'});}catch(_0x3313a2){console[_0x1168d7(0x15e)](_0x1168d7(0x16e)+_0x11fc9f[_0x1168d7(0x194)][_0x1168d7(0x15c)]+':',_0x3313a2),_0x12f90a[_0x1168d7(0x188)](0x1f4)[_0x1168d7(0x154)]({'success':![],'message':_0x3313a2 instanceof Error?_0x3313a2['message']:_0x1168d7(0x1b1)});}}),router['get'](a19_0x4df500(0x1a9),(_0x4fdf50,_0x19e3bc)=>{const _0x23c026=a19_0x4df500;try{const _0x2e2c3f=coinToPayStatusService_1[_0x23c026(0x14e)][_0x23c026(0x1af)]();_0x19e3bc[_0x23c026(0x154)]({'success':!![],'result':{..._0x2e2c3f,'description':_0x23c026(0x17b),'statusMapping':{'Paid':'PAID','Awaiting\x20Fiat':_0x23c026(0x178),'waiting':'PENDING','expired':_0x23c026(0x181),'failed':_0x23c026(0x163)},'autoExpiryNote':_0x23c026(0x15d)+_0x2e2c3f[_0x23c026(0x1b5)]+_0x23c026(0x18e),'individualTimersNote':'Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly'}});}catch(_0x299479){_0x19e3bc[_0x23c026(0x188)](0x1f4)[_0x23c026(0x154)]({'success':![],'message':_0x23c026(0x1b7)});}}),router[a19_0x4df500(0x195)](a19_0x4df500(0x1c4),async(_0x35f357,_0x2b82e9)=>{const _0x43cda7=a19_0x4df500;try{const {paymentId:_0x3494fe}=_0x35f357['params'],_0x4ae986=coinToPayStatusService_1[_0x43cda7(0x14e)][_0x43cda7(0x165)](_0x3494fe),_0x3b17f0=(await Promise[_0x43cda7(0x196)]()[_0x43cda7(0x1a3)](()=>__importStar(require('../config/database'))))[_0x43cda7(0x18b)],_0x264592=await _0x3b17f0[_0x43cda7(0x152)][_0x43cda7(0x19e)]({'where':{'id':_0x3494fe},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x264592)return _0x2b82e9[_0x43cda7(0x188)](0x194)[_0x43cda7(0x154)]({'success':![],'message':'Payment\x20not\x20found'});_0x2b82e9[_0x43cda7(0x154)]({'success':!![],'result':{'payment':{'id':_0x264592['id'],'gateway':_0x264592[_0x43cda7(0x1b6)],'gatewayPaymentId':_0x264592[_0x43cda7(0x193)],'status':_0x264592['status'],'amount':_0x264592[_0x43cda7(0x179)],'currency':_0x264592[_0x43cda7(0x180)],'createdAt':_0x264592[_0x43cda7(0x18c)],'updatedAt':_0x264592[_0x43cda7(0x14f)],'shop':_0x264592[_0x43cda7(0x189)]},'timers':_0x4ae986,'isCoinToPay':_0x264592[_0x43cda7(0x1b6)]===_0x43cda7(0x1bd),'ageInMinutes':Math[_0x43cda7(0x1c3)]((Date[_0x43cda7(0x1b4)]()-_0x264592[_0x43cda7(0x18c)][_0x43cda7(0x199)]())/(0x3e8*0x3c))}});}catch(_0x57dce7){_0x2b82e9['status'](0x1f4)['json']({'success':![],'message':_0x57dce7 instanceof Error?_0x57dce7['message']:_0x43cda7(0x16c)});}}),router[a19_0x4df500(0x195)](a19_0x4df500(0x184),(_0x13257d,_0x59af11)=>{const _0x3f70ea=a19_0x4df500;try{const _0x681cc9=domainMonitoringService_1[_0x3f70ea(0x175)][_0x3f70ea(0x1a5)]();_0x59af11[_0x3f70ea(0x154)]({'success':!![],'result':{..._0x681cc9,'description':_0x3f70ea(0x169),'behavior':_0x3f70ea(0x1a4),'encoding':_0x3f70ea(0x14a)}});}catch(_0x293310){_0x59af11[_0x3f70ea(0x188)](0x1f4)[_0x3f70ea(0x154)]({'success':![],'message':_0x3f70ea(0x156)});}}),router['post'](a19_0x4df500(0x151),async(_0x15fa35,_0x4e35f9)=>{const _0x1e242f=a19_0x4df500;try{const _0x5a2ee8=await domainMonitoringService_1[_0x1e242f(0x175)][_0x1e242f(0x19c)]();_0x4e35f9[_0x1e242f(0x154)]({'success':!![],'result':{'domainAvailable':_0x5a2ee8,'message':_0x5a2ee8?_0x1e242f(0x17e):_0x1e242f(0x191),'timestamp':new Date()['toISOString']()}});}catch(_0x1471ce){_0x4e35f9[_0x1e242f(0x188)](0x1f4)[_0x1e242f(0x154)]({'success':![],'message':_0x1471ce instanceof Error?_0x1471ce[_0x1e242f(0x1a2)]:_0x1e242f(0x17d)});}}),exports[a19_0x4df500(0x18b)]=router;