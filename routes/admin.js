'use strict';function a19_0x58b0(){const _0x320e53=['104yHzxkr','/cointopay/check/:paymentId','Failed\x20to\x20get\x20payment\x20information','call','PAID','/users','/domain-monitoring/stats','/users/:id','__setModuleDefault','102248RCpXKo','/payments/:id/customer','\x20days\x20if\x20not\x20paid','updatedAt','createPayoutSchema','../services/coinToPayStatusService','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','post','/statistics','CoinToPay\x20payment\x20status\x20checked\x20successfully','getMonitoringStats','/logs/clean','getPayoutStats','1736670IoYgaf','__createBinding','/users/:id/suspend','../services/domainMonitoringService','924fYmlbP','Old\x20logs\x20cleaned\x20(kept\x20last\x20','cointopay','Router','log','/payout/stats','getPaymentTimerInfo','/payouts/:id','81700ZiAWpX','floor','getPayments','get','40rGLqXM','payment','CoinToPay\x20automatic\x20status\x20checking\x20service','amount','7954770RfUlQA','prototype','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','checkPaymentById','coinToPayStatusService','hasOwnProperty','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','createdAt','message','deleteUser','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','FAILED','updateCustomerData','defineProperty','updateUserSchema','5qGmAsP','/merchants/selection','status','../middleware/auth','getTime','paymentId','/payments/:id','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','/auth','629881fwkkNS','getPayoutById','/users/:id/activate','getPaymentById','../middleware/validation','gateway','/payouts','Payment\x20not\x20found','getOwnPropertyDescriptor','createPayout','EXPIRED','getUserById','/payout','put','params','json','validate','getMerchantsAwaitingPayout','writable','updateUser','toISOString','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','loggerService','Payments\x20automatically\x20expire\x20after\x20','4240224TJilTi','getMerchantStatistics','522484AnTgod','requireAdmin','default','__esModule','length','PENDING','domainMonitoringService','/cointopay/stats','Failed\x20to\x20get\x20log\x20statistics','create','createUser','expiryDays','error','Domain\x20check\x20failed','body','/domain-monitoring/check','__importStar','/logs/stats','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','use','express','\x20days)','then','cleanOldLogs','/merchant-statistics','delete','Domain\x20is\x20responding\x20correctly'];a19_0x58b0=function(){return _0x320e53;};return a19_0x58b0();}const a19_0x46d08c=a19_0x38db;(function(_0x555429,_0x441ea5){const _0x37af61=a19_0x38db,_0x462ff9=_0x555429();while(!![]){try{const _0x39f081=-parseInt(_0x37af61(0x181))/0x1*(-parseInt(_0x37af61(0x1a5))/0x2)+parseInt(_0x37af61(0x1d6))/0x3+parseInt(_0x37af61(0x1c9))/0x4*(-parseInt(_0x37af61(0x1e6))/0x5)+parseInt(_0x37af61(0x1ea))/0x6+-parseInt(_0x37af61(0x18a))/0x7*(parseInt(_0x37af61(0x1c0))/0x8)+-parseInt(_0x37af61(0x1a3))/0x9+-parseInt(_0x37af61(0x1e2))/0xa*(parseInt(_0x37af61(0x1da))/0xb);if(_0x39f081===_0x441ea5)break;else _0x462ff9['push'](_0x462ff9['shift']());}catch(_0x160e78){_0x462ff9['push'](_0x462ff9['shift']());}}}(a19_0x58b0,0xa5d24));var __createBinding=this&&this[a19_0x46d08c(0x1d7)]||(Object[a19_0x46d08c(0x1ae)]?function(_0x51a69a,_0x457661,_0x3653b3,_0x54df55){const _0x5bb20c=a19_0x46d08c;if(_0x54df55===undefined)_0x54df55=_0x3653b3;var _0x3f4768=Object[_0x5bb20c(0x192)](_0x457661,_0x3653b3);(!_0x3f4768||(_0x5bb20c(0x1e5)in _0x3f4768?!_0x457661[_0x5bb20c(0x1a8)]:_0x3f4768[_0x5bb20c(0x19c)]||_0x3f4768['configurable']))&&(_0x3f4768={'enumerable':!![],'get':function(){return _0x457661[_0x3653b3];}}),Object[_0x5bb20c(0x17f)](_0x51a69a,_0x54df55,_0x3f4768);}:function(_0x25ec04,_0x4ac7df,_0x477f8d,_0x5eaaff){if(_0x5eaaff===undefined)_0x5eaaff=_0x477f8d;_0x25ec04[_0x5eaaff]=_0x4ac7df[_0x477f8d];}),__setModuleDefault=this&&this[a19_0x46d08c(0x1c8)]||(Object[a19_0x46d08c(0x1ae)]?function(_0x123b37,_0x3a9772){const _0x78481a=a19_0x46d08c;Object['defineProperty'](_0x123b37,_0x78481a(0x1a7),{'enumerable':!![],'value':_0x3a9772});}:function(_0x58b882,_0x5c5822){const _0x1e0ec7=a19_0x46d08c;_0x58b882[_0x1e0ec7(0x1a7)]=_0x5c5822;}),__importStar=this&&this[a19_0x46d08c(0x1b5)]||(function(){var _0x6b5201=function(_0x3a6e64){return _0x6b5201=Object['getOwnPropertyNames']||function(_0x56ce3c){const _0x2eba0a=a19_0x38db;var _0x312b7d=[];for(var _0x529d9d in _0x56ce3c)if(Object[_0x2eba0a(0x1eb)][_0x2eba0a(0x1ef)][_0x2eba0a(0x1c3)](_0x56ce3c,_0x529d9d))_0x312b7d[_0x312b7d[_0x2eba0a(0x1a9)]]=_0x529d9d;return _0x312b7d;},_0x6b5201(_0x3a6e64);};return function(_0x33a2a5){const _0x31ca5c=a19_0x38db;if(_0x33a2a5&&_0x33a2a5[_0x31ca5c(0x1a8)])return _0x33a2a5;var _0xe6e8f7={};if(_0x33a2a5!=null){for(var _0xb28c28=_0x6b5201(_0x33a2a5),_0x4472f8=0x0;_0x4472f8<_0xb28c28[_0x31ca5c(0x1a9)];_0x4472f8++)if(_0xb28c28[_0x4472f8]!=='default')__createBinding(_0xe6e8f7,_0x33a2a5,_0xb28c28[_0x4472f8]);}return __setModuleDefault(_0xe6e8f7,_0x33a2a5),_0xe6e8f7;};}());Object[a19_0x46d08c(0x17f)](exports,a19_0x46d08c(0x1a8),{'value':!![]});const express_1=require(a19_0x46d08c(0x1b9)),adminController_1=require('../controllers/adminController'),validation_1=require(a19_0x46d08c(0x18e)),auth_1=require(a19_0x46d08c(0x184)),loggerService_1=require('../services/loggerService'),coinToPayStatusService_1=require(a19_0x46d08c(0x1ce)),domainMonitoringService_1=require(a19_0x46d08c(0x1d9)),router=(0x0,express_1[a19_0x46d08c(0x1dd)])(),adminController=new adminController_1['AdminController']();function a19_0x38db(_0x507739,_0x3d77cd){const _0x58b069=a19_0x58b0();return a19_0x38db=function(_0x38db3d,_0x5661d5){_0x38db3d=_0x38db3d-0x17c;let _0x20e62e=_0x58b069[_0x38db3d];return _0x20e62e;},a19_0x38db(_0x507739,_0x3d77cd);}router[a19_0x46d08c(0x1b8)](auth_1['authenticateToken'],auth_1[a19_0x46d08c(0x1a6)]),router[a19_0x46d08c(0x1e5)](a19_0x46d08c(0x189),adminController['checkAuth']),router['get'](a19_0x46d08c(0x1d1),adminController['getStatistics']),router[a19_0x46d08c(0x1e5)](a19_0x46d08c(0x1bd),adminController[a19_0x46d08c(0x1a4)]),router['get'](a19_0x46d08c(0x1df),adminController[a19_0x46d08c(0x1d5)]),router[a19_0x46d08c(0x1e5)]('/payout/merchants',adminController[a19_0x46d08c(0x19b)]),router[a19_0x46d08c(0x1e5)](a19_0x46d08c(0x182),adminController['getMerchantsSelection']),router[a19_0x46d08c(0x1d0)](a19_0x46d08c(0x196),(0x0,validation_1['validate'])(validation_1[a19_0x46d08c(0x1cd)]),adminController[a19_0x46d08c(0x193)]),router[a19_0x46d08c(0x1e5)](a19_0x46d08c(0x190),adminController['getPayouts']),router[a19_0x46d08c(0x1e5)](a19_0x46d08c(0x1e1),adminController[a19_0x46d08c(0x18b)]),router['delete'](a19_0x46d08c(0x1e1),adminController['deletePayout']),router[a19_0x46d08c(0x1e5)]('/payments',adminController[a19_0x46d08c(0x1e4)]),router[a19_0x46d08c(0x1e5)](a19_0x46d08c(0x187),adminController[a19_0x46d08c(0x18d)]),router['put'](a19_0x46d08c(0x187),adminController['updatePayment']),router[a19_0x46d08c(0x197)](a19_0x46d08c(0x1ca),(0x0,validation_1[a19_0x46d08c(0x19a)])(validation_1['updateCustomerDataSchema']),adminController[a19_0x46d08c(0x17e)]),router[a19_0x46d08c(0x1e5)](a19_0x46d08c(0x1c5),adminController['getUsers']),router[a19_0x46d08c(0x1e5)](a19_0x46d08c(0x1c7),adminController[a19_0x46d08c(0x195)]),router[a19_0x46d08c(0x1d0)](a19_0x46d08c(0x1c5),(0x0,validation_1[a19_0x46d08c(0x19a)])(validation_1['createUserSchema']),adminController[a19_0x46d08c(0x1af)]),router[a19_0x46d08c(0x197)](a19_0x46d08c(0x1c7),(0x0,validation_1['validate'])(validation_1[a19_0x46d08c(0x180)]),adminController[a19_0x46d08c(0x19d)]),router[a19_0x46d08c(0x1be)](a19_0x46d08c(0x1c7),adminController[a19_0x46d08c(0x1f3)]),router['post'](a19_0x46d08c(0x1d8),adminController['suspendUser']),router[a19_0x46d08c(0x1d0)](a19_0x46d08c(0x18c),adminController['activateUser']),router[a19_0x46d08c(0x1e5)](a19_0x46d08c(0x1b6),(_0x37f694,_0x51a14b)=>{const _0x57755a=a19_0x46d08c;try{const _0x309f10=loggerService_1[_0x57755a(0x1a1)]['getLogStats']();_0x51a14b[_0x57755a(0x199)]({'success':!![],'result':_0x309f10});}catch(_0x4ac0c5){_0x51a14b[_0x57755a(0x183)](0x1f4)[_0x57755a(0x199)]({'success':![],'message':_0x57755a(0x1ad)});}}),router[a19_0x46d08c(0x1d0)](a19_0x46d08c(0x1d4),(_0x13d12e,_0x2777ce)=>{const _0x3fe12c=a19_0x46d08c;try{const {daysToKeep:daysToKeep=0x1e}=_0x13d12e[_0x3fe12c(0x1b3)];loggerService_1[_0x3fe12c(0x1a1)][_0x3fe12c(0x1bc)](daysToKeep),_0x2777ce['json']({'success':!![],'message':_0x3fe12c(0x1db)+daysToKeep+_0x3fe12c(0x1ba)});}catch(_0x1c57e2){_0x2777ce[_0x3fe12c(0x183)](0x1f4)[_0x3fe12c(0x199)]({'success':![],'message':'Failed\x20to\x20clean\x20old\x20logs'});}}),router[a19_0x46d08c(0x1d0)](a19_0x46d08c(0x1c1),async(_0xb4dc39,_0x4969a4)=>{const _0x4241ff=a19_0x46d08c;try{const {paymentId:_0x3ece12}=_0xb4dc39['params'];console[_0x4241ff(0x1de)]('üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20'+_0x3ece12),await coinToPayStatusService_1[_0x4241ff(0x1ee)][_0x4241ff(0x1ed)](_0x3ece12),_0x4969a4[_0x4241ff(0x199)]({'success':!![],'message':_0x4241ff(0x1d2)});}catch(_0x1aaf79){console[_0x4241ff(0x1b1)](_0x4241ff(0x19f)+_0xb4dc39['params'][_0x4241ff(0x186)]+':',_0x1aaf79),_0x4969a4[_0x4241ff(0x183)](0x1f4)[_0x4241ff(0x199)]({'success':![],'message':_0x1aaf79 instanceof Error?_0x1aaf79['message']:_0x4241ff(0x1f0)});}}),router['get'](a19_0x46d08c(0x1ac),(_0x4bf8fd,_0x1146d7)=>{const _0x130c63=a19_0x46d08c;try{const _0x5a458d=coinToPayStatusService_1['coinToPayStatusService']['getServiceStats']();_0x1146d7[_0x130c63(0x199)]({'success':!![],'result':{..._0x5a458d,'description':_0x130c63(0x1e8),'statusMapping':{'Paid':_0x130c63(0x1c4),'Awaiting\x20Fiat':_0x130c63(0x1aa),'waiting':_0x130c63(0x1aa),'expired':_0x130c63(0x194),'failed':_0x130c63(0x17d)},'autoExpiryNote':_0x130c63(0x1a2)+_0x5a458d[_0x130c63(0x1b0)]+_0x130c63(0x1cb),'individualTimersNote':_0x130c63(0x1b7)}});}catch(_0x50e8fe){_0x1146d7[_0x130c63(0x183)](0x1f4)[_0x130c63(0x199)]({'success':![],'message':_0x130c63(0x1cf)});}}),router[a19_0x46d08c(0x1e5)]('/cointopay/payment/:paymentId',async(_0x30b570,_0x2704e9)=>{const _0xb4de89=a19_0x46d08c;try{const {paymentId:_0x2b1126}=_0x30b570[_0xb4de89(0x198)],_0x4a65ad=coinToPayStatusService_1['coinToPayStatusService'][_0xb4de89(0x1e0)](_0x2b1126),_0x2d5b01=(await Promise['resolve']()[_0xb4de89(0x1bb)](()=>__importStar(require('../config/database'))))[_0xb4de89(0x1a7)],_0x5ccf6f=await _0x2d5b01[_0xb4de89(0x1e7)]['findUnique']({'where':{'id':_0x2b1126},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x5ccf6f)return _0x2704e9[_0xb4de89(0x183)](0x194)[_0xb4de89(0x199)]({'success':![],'message':_0xb4de89(0x191)});_0x2704e9[_0xb4de89(0x199)]({'success':!![],'result':{'payment':{'id':_0x5ccf6f['id'],'gateway':_0x5ccf6f[_0xb4de89(0x18f)],'gatewayPaymentId':_0x5ccf6f['gatewayPaymentId'],'status':_0x5ccf6f['status'],'amount':_0x5ccf6f[_0xb4de89(0x1e9)],'currency':_0x5ccf6f['currency'],'createdAt':_0x5ccf6f[_0xb4de89(0x1f1)],'updatedAt':_0x5ccf6f[_0xb4de89(0x1cc)],'shop':_0x5ccf6f['shop']},'timers':_0x4a65ad,'isCoinToPay':_0x5ccf6f[_0xb4de89(0x18f)]===_0xb4de89(0x1dc),'ageInMinutes':Math[_0xb4de89(0x1e3)]((Date['now']()-_0x5ccf6f[_0xb4de89(0x1f1)][_0xb4de89(0x185)]())/(0x3e8*0x3c))}});}catch(_0xbb031){_0x2704e9[_0xb4de89(0x183)](0x1f4)[_0xb4de89(0x199)]({'success':![],'message':_0xbb031 instanceof Error?_0xbb031[_0xb4de89(0x1f2)]:_0xb4de89(0x1c2)});}}),router['get'](a19_0x46d08c(0x1c6),(_0x4f1aef,_0x2e5fe4)=>{const _0x188aeb=a19_0x46d08c;try{const _0x22c314=domainMonitoringService_1[_0x188aeb(0x1ab)][_0x188aeb(0x1d3)]();_0x2e5fe4[_0x188aeb(0x199)]({'success':!![],'result':{..._0x22c314,'description':_0x188aeb(0x17c),'behavior':_0x188aeb(0x188),'encoding':_0x188aeb(0x1ec)}});}catch(_0x20ae85){_0x2e5fe4[_0x188aeb(0x183)](0x1f4)[_0x188aeb(0x199)]({'success':![],'message':_0x188aeb(0x1a0)});}}),router[a19_0x46d08c(0x1d0)](a19_0x46d08c(0x1b4),async(_0xd29af,_0x155705)=>{const _0x59903b=a19_0x46d08c;try{const _0x58c6a2=await domainMonitoringService_1['domainMonitoringService']['manualCheck']();_0x155705['json']({'success':!![],'result':{'domainAvailable':_0x58c6a2,'message':_0x58c6a2?_0x59903b(0x1bf):_0x59903b(0x1b2),'timestamp':new Date()[_0x59903b(0x19e)]()}});}catch(_0xb30173){_0x155705[_0x59903b(0x183)](0x1f4)[_0x59903b(0x199)]({'success':![],'message':_0xb30173 instanceof Error?_0xb30173[_0x59903b(0x1f2)]:'Failed\x20to\x20perform\x20manual\x20domain\x20check'});}}),exports['default']=router;