'use strict';const a20_0x4c575d=a20_0x4820;function a20_0xf433(){const _0x1c08bc=['Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','updatedAt','coinToPayStatusService','get','requireAdmin','getUserById','error','Domain\x20is\x20responding\x20correctly','payment','Router','deletePayout','../middleware/auth','json','getTime','post','validate','currency','cointopay','updatePayment','/cointopay/stats','gatewayPaymentId','prototype','__createBinding','EXPIRED','defineProperty','6118880MThbDX','Domain\x20check\x20failed','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','/payouts','getOwnPropertyDescriptor','put','/logs/clean','/payout','getPayments','findUnique','createPayout','/payout/merchants','authenticateToken','/users/:id','floor','24ICqVDU','message','log','expiryDays','../controllers/adminController','/payments/:id','/auth','/users/:id/suspend','shop','/payments','gateway','default','createUser','getMerchantsSelection','toISOString','../services/loggerService','resolve','Payments\x20automatically\x20expire\x20after\x20','Payment\x20not\x20found','Old\x20logs\x20cleaned\x20(kept\x20last\x20','/cointopay/payment/:paymentId','amount','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','2lVcadi','status','updateCustomerData','suspendUser','createdAt','/statistics','getLogStats','create','activateUser','createPayoutSchema','../services/domainMonitoringService','/merchant-statistics','4886NCKdUe','length','getServiceStats','getStatistics','getPayoutById','10472880PtLbck','/domain-monitoring/check','Failed\x20to\x20get\x20log\x20statistics','manualCheck','../middleware/validation','getPaymentTimerInfo','../services/coinToPayStatusService','326169dPEDSd','PENDING','getPayouts','hasOwnProperty','checkPaymentById','createUserSchema','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','2698113LgOEBc','domainMonitoringService','/users','336KjCbbI','/domain-monitoring/stats','updateCustomerDataSchema','Failed\x20to\x20clean\x20old\x20logs','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','4286184zplqnp','/merchants/selection','__importStar','use','deleteUser','cleanOldLogs','express','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','checkAuth','paymentId','getMonitoringStats','getMerchantStatistics','getMerchantsAwaitingPayout','PAID','delete','getPaymentById','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','loggerService','__setModuleDefault','/users/:id/activate','params','259099HafmfS'];a20_0xf433=function(){return _0x1c08bc;};return a20_0xf433();}(function(_0x4fbba6,_0x1ccfed){const _0x28d2d5=a20_0x4820,_0x448cb0=_0x4fbba6();while(!![]){try{const _0x47e697=-parseInt(_0x28d2d5(0x16b))/0x1*(-parseInt(_0x28d2d5(0x1ab))/0x2)+-parseInt(_0x28d2d5(0x14e))/0x3+parseInt(_0x28d2d5(0x156))/0x4+parseInt(_0x28d2d5(0x185))/0x5+-parseInt(_0x28d2d5(0x151))/0x6*(parseInt(_0x28d2d5(0x13b))/0x7)+parseInt(_0x28d2d5(0x194))/0x8*(parseInt(_0x28d2d5(0x147))/0x9)+-parseInt(_0x28d2d5(0x140))/0xa;if(_0x47e697===_0x1ccfed)break;else _0x448cb0['push'](_0x448cb0['shift']());}catch(_0x2c4dc7){_0x448cb0['push'](_0x448cb0['shift']());}}}(a20_0xf433,0xa5615));var __createBinding=this&&this[a20_0x4c575d(0x182)]||(Object[a20_0x4c575d(0x136)]?function(_0xd1d05d,_0x1e8705,_0x322fd6,_0x3be6f8){const _0x2fabcf=a20_0x4c575d;if(_0x3be6f8===undefined)_0x3be6f8=_0x322fd6;var _0x1567e5=Object[_0x2fabcf(0x189)](_0x1e8705,_0x322fd6);(!_0x1567e5||(_0x2fabcf(0x16f)in _0x1567e5?!_0x1e8705['__esModule']:_0x1567e5['writable']||_0x1567e5['configurable']))&&(_0x1567e5={'enumerable':!![],'get':function(){return _0x1e8705[_0x322fd6];}}),Object[_0x2fabcf(0x184)](_0xd1d05d,_0x3be6f8,_0x1567e5);}:function(_0x184c8b,_0x5d45ee,_0x2d4798,_0x4e1792){if(_0x4e1792===undefined)_0x4e1792=_0x2d4798;_0x184c8b[_0x4e1792]=_0x5d45ee[_0x2d4798];}),__setModuleDefault=this&&this[a20_0x4c575d(0x168)]||(Object[a20_0x4c575d(0x136)]?function(_0x3cc4a9,_0x4b31f0){const _0x128326=a20_0x4c575d;Object['defineProperty'](_0x3cc4a9,_0x128326(0x19f),{'enumerable':!![],'value':_0x4b31f0});}:function(_0x47f6ce,_0x3fd14e){const _0x37936c=a20_0x4c575d;_0x47f6ce[_0x37936c(0x19f)]=_0x3fd14e;}),__importStar=this&&this[a20_0x4c575d(0x158)]||(function(){var _0x39e146=function(_0x2abc94){return _0x39e146=Object['getOwnPropertyNames']||function(_0x19bce4){const _0x3ab6d4=a20_0x4820;var _0x100ef7=[];for(var _0x343b73 in _0x19bce4)if(Object[_0x3ab6d4(0x181)][_0x3ab6d4(0x14a)]['call'](_0x19bce4,_0x343b73))_0x100ef7[_0x100ef7[_0x3ab6d4(0x13c)]]=_0x343b73;return _0x100ef7;},_0x39e146(_0x2abc94);};return function(_0x4fc482){const _0x300742=a20_0x4820;if(_0x4fc482&&_0x4fc482['__esModule'])return _0x4fc482;var _0x53658e={};if(_0x4fc482!=null){for(var _0x32ffa0=_0x39e146(_0x4fc482),_0x2ae1b8=0x0;_0x2ae1b8<_0x32ffa0['length'];_0x2ae1b8++)if(_0x32ffa0[_0x2ae1b8]!==_0x300742(0x19f))__createBinding(_0x53658e,_0x4fc482,_0x32ffa0[_0x2ae1b8]);}return __setModuleDefault(_0x53658e,_0x4fc482),_0x53658e;};}());Object[a20_0x4c575d(0x184)](exports,'__esModule',{'value':!![]});const express_1=require(a20_0x4c575d(0x15c)),adminController_1=require(a20_0x4c575d(0x198)),validation_1=require(a20_0x4c575d(0x144)),auth_1=require(a20_0x4c575d(0x177)),loggerService_1=require(a20_0x4c575d(0x1a3)),coinToPayStatusService_1=require(a20_0x4c575d(0x146)),domainMonitoringService_1=require(a20_0x4c575d(0x139)),router=(0x0,express_1[a20_0x4c575d(0x175)])(),adminController=new adminController_1['AdminController']();function a20_0x4820(_0x50c7a0,_0x25959e){const _0xf4334b=a20_0xf433();return a20_0x4820=function(_0x482031,_0xb040b1){_0x482031=_0x482031-0x133;let _0x57e295=_0xf4334b[_0x482031];return _0x57e295;},a20_0x4820(_0x50c7a0,_0x25959e);}router[a20_0x4c575d(0x159)](auth_1[a20_0x4c575d(0x191)],auth_1[a20_0x4c575d(0x170)]),router[a20_0x4c575d(0x16f)](a20_0x4c575d(0x19a),adminController[a20_0x4c575d(0x15e)]),router[a20_0x4c575d(0x16f)](a20_0x4c575d(0x134),adminController[a20_0x4c575d(0x13e)]),router[a20_0x4c575d(0x16f)](a20_0x4c575d(0x13a),adminController[a20_0x4c575d(0x161)]),router[a20_0x4c575d(0x16f)]('/payout/stats',adminController['getPayoutStats']),router['get'](a20_0x4c575d(0x190),adminController[a20_0x4c575d(0x162)]),router[a20_0x4c575d(0x16f)](a20_0x4c575d(0x157),adminController[a20_0x4c575d(0x1a1)]),router[a20_0x4c575d(0x17a)](a20_0x4c575d(0x18c),(0x0,validation_1[a20_0x4c575d(0x17b)])(validation_1[a20_0x4c575d(0x138)]),adminController[a20_0x4c575d(0x18f)]),router[a20_0x4c575d(0x16f)](a20_0x4c575d(0x188),adminController[a20_0x4c575d(0x149)]),router[a20_0x4c575d(0x16f)]('/payouts/:id',adminController[a20_0x4c575d(0x13f)]),router[a20_0x4c575d(0x164)]('/payouts/:id',adminController[a20_0x4c575d(0x176)]),router[a20_0x4c575d(0x16f)](a20_0x4c575d(0x19d),adminController[a20_0x4c575d(0x18d)]),router[a20_0x4c575d(0x16f)](a20_0x4c575d(0x199),adminController[a20_0x4c575d(0x165)]),router[a20_0x4c575d(0x18a)]('/payments/:id',adminController[a20_0x4c575d(0x17e)]),router[a20_0x4c575d(0x18a)]('/payments/:id/customer',(0x0,validation_1[a20_0x4c575d(0x17b)])(validation_1[a20_0x4c575d(0x153)]),adminController[a20_0x4c575d(0x1ad)]),router[a20_0x4c575d(0x16f)](a20_0x4c575d(0x150),adminController['getUsers']),router[a20_0x4c575d(0x16f)](a20_0x4c575d(0x192),adminController[a20_0x4c575d(0x171)]),router[a20_0x4c575d(0x17a)](a20_0x4c575d(0x150),(0x0,validation_1[a20_0x4c575d(0x17b)])(validation_1[a20_0x4c575d(0x14c)]),adminController[a20_0x4c575d(0x1a0)]),router[a20_0x4c575d(0x18a)](a20_0x4c575d(0x192),(0x0,validation_1[a20_0x4c575d(0x17b)])(validation_1['updateUserSchema']),adminController['updateUser']),router[a20_0x4c575d(0x164)]('/users/:id',adminController[a20_0x4c575d(0x15a)]),router[a20_0x4c575d(0x17a)](a20_0x4c575d(0x19b),adminController[a20_0x4c575d(0x1ae)]),router['post'](a20_0x4c575d(0x169),adminController[a20_0x4c575d(0x137)]),router[a20_0x4c575d(0x16f)]('/logs/stats',(_0xdaf06b,_0x34db89)=>{const _0x1e89ca=a20_0x4c575d;try{const _0x5a3b86=loggerService_1[_0x1e89ca(0x167)][_0x1e89ca(0x135)]();_0x34db89[_0x1e89ca(0x178)]({'success':!![],'result':_0x5a3b86});}catch(_0x24e948){_0x34db89[_0x1e89ca(0x1ac)](0x1f4)['json']({'success':![],'message':_0x1e89ca(0x142)});}}),router[a20_0x4c575d(0x17a)](a20_0x4c575d(0x18b),(_0x4d645c,_0x264624)=>{const _0xe539f2=a20_0x4c575d;try{const {daysToKeep:daysToKeep=0x1e}=_0x4d645c['body'];loggerService_1['loggerService'][_0xe539f2(0x15b)](daysToKeep),_0x264624[_0xe539f2(0x178)]({'success':!![],'message':_0xe539f2(0x1a7)+daysToKeep+'\x20days)'});}catch(_0x36bd47){_0x264624[_0xe539f2(0x1ac)](0x1f4)[_0xe539f2(0x178)]({'success':![],'message':_0xe539f2(0x154)});}}),router['post']('/cointopay/check/:paymentId',async(_0x47230a,_0x1c249a)=>{const _0xc6acbb=a20_0x4c575d;try{const {paymentId:_0x55a81b}=_0x47230a[_0xc6acbb(0x16a)];console[_0xc6acbb(0x196)](_0xc6acbb(0x14d)+_0x55a81b),await coinToPayStatusService_1[_0xc6acbb(0x16e)][_0xc6acbb(0x14b)](_0x55a81b),_0x1c249a['json']({'success':!![],'message':'CoinToPay\x20payment\x20status\x20checked\x20successfully'});}catch(_0x428fa7){console[_0xc6acbb(0x172)](_0xc6acbb(0x166)+_0x47230a[_0xc6acbb(0x16a)][_0xc6acbb(0x15f)]+':',_0x428fa7),_0x1c249a[_0xc6acbb(0x1ac)](0x1f4)[_0xc6acbb(0x178)]({'success':![],'message':_0x428fa7 instanceof Error?_0x428fa7[_0xc6acbb(0x195)]:'Failed\x20to\x20check\x20CoinToPay\x20payment\x20status'});}}),router[a20_0x4c575d(0x16f)](a20_0x4c575d(0x17f),(_0x531732,_0x5eeb12)=>{const _0x4798b4=a20_0x4c575d;try{const _0x4d56eb=coinToPayStatusService_1[_0x4798b4(0x16e)][_0x4798b4(0x13d)]();_0x5eeb12[_0x4798b4(0x178)]({'success':!![],'result':{..._0x4d56eb,'description':'CoinToPay\x20automatic\x20status\x20checking\x20service','statusMapping':{'Paid':_0x4798b4(0x163),'Awaiting\x20Fiat':_0x4798b4(0x148),'waiting':_0x4798b4(0x148),'expired':_0x4798b4(0x183),'failed':'FAILED'},'autoExpiryNote':_0x4798b4(0x1a5)+_0x4d56eb[_0x4798b4(0x197)]+'\x20days\x20if\x20not\x20paid','individualTimersNote':_0x4798b4(0x187)}});}catch(_0x2124c6){_0x5eeb12[_0x4798b4(0x1ac)](0x1f4)[_0x4798b4(0x178)]({'success':![],'message':'Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics'});}}),router[a20_0x4c575d(0x16f)](a20_0x4c575d(0x1a8),async(_0x42ce6d,_0x284c96)=>{const _0x4d4429=a20_0x4c575d;try{const {paymentId:_0x30250e}=_0x42ce6d[_0x4d4429(0x16a)],_0x29df97=coinToPayStatusService_1[_0x4d4429(0x16e)][_0x4d4429(0x145)](_0x30250e),_0x5cad6d=(await Promise[_0x4d4429(0x1a4)]()['then'](()=>__importStar(require('../config/database'))))[_0x4d4429(0x19f)],_0x160ce7=await _0x5cad6d[_0x4d4429(0x174)][_0x4d4429(0x18e)]({'where':{'id':_0x30250e},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x160ce7)return _0x284c96[_0x4d4429(0x1ac)](0x194)[_0x4d4429(0x178)]({'success':![],'message':_0x4d4429(0x1a6)});_0x284c96['json']({'success':!![],'result':{'payment':{'id':_0x160ce7['id'],'gateway':_0x160ce7[_0x4d4429(0x19e)],'gatewayPaymentId':_0x160ce7[_0x4d4429(0x180)],'status':_0x160ce7[_0x4d4429(0x1ac)],'amount':_0x160ce7[_0x4d4429(0x1a9)],'currency':_0x160ce7[_0x4d4429(0x17c)],'createdAt':_0x160ce7[_0x4d4429(0x133)],'updatedAt':_0x160ce7[_0x4d4429(0x16d)],'shop':_0x160ce7[_0x4d4429(0x19c)]},'timers':_0x29df97,'isCoinToPay':_0x160ce7['gateway']===_0x4d4429(0x17d),'ageInMinutes':Math[_0x4d4429(0x193)]((Date['now']()-_0x160ce7[_0x4d4429(0x133)][_0x4d4429(0x179)]())/(0x3e8*0x3c))}});}catch(_0x3227b7){_0x284c96[_0x4d4429(0x1ac)](0x1f4)[_0x4d4429(0x178)]({'success':![],'message':_0x3227b7 instanceof Error?_0x3227b7[_0x4d4429(0x195)]:'Failed\x20to\x20get\x20payment\x20information'});}}),router[a20_0x4c575d(0x16f)](a20_0x4c575d(0x152),(_0x3069d4,_0x6ef376)=>{const _0xb582ba=a20_0x4c575d;try{const _0x5715be=domainMonitoringService_1[_0xb582ba(0x14f)][_0xb582ba(0x160)]();_0x6ef376['json']({'success':!![],'result':{..._0x5715be,'description':_0xb582ba(0x1aa),'behavior':_0xb582ba(0x16c),'encoding':_0xb582ba(0x15d)}});}catch(_0x78532){_0x6ef376['status'](0x1f4)[_0xb582ba(0x178)]({'success':![],'message':_0xb582ba(0x155)});}}),router[a20_0x4c575d(0x17a)](a20_0x4c575d(0x141),async(_0x283b9f,_0x55b60c)=>{const _0x9046a=a20_0x4c575d;try{const _0x7804af=await domainMonitoringService_1[_0x9046a(0x14f)][_0x9046a(0x143)]();_0x55b60c[_0x9046a(0x178)]({'success':!![],'result':{'domainAvailable':_0x7804af,'message':_0x7804af?_0x9046a(0x173):_0x9046a(0x186),'timestamp':new Date()[_0x9046a(0x1a2)]()}});}catch(_0x5de2e5){_0x55b60c[_0x9046a(0x1ac)](0x1f4)[_0x9046a(0x178)]({'success':![],'message':_0x5de2e5 instanceof Error?_0x5de2e5[_0x9046a(0x195)]:'Failed\x20to\x20perform\x20manual\x20domain\x20check'});}}),exports[a20_0x4c575d(0x19f)]=router;