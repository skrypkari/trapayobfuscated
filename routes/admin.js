'use strict';const a19_0x3de8c8=a19_0x3460;function a19_0x135c(){const _0x19fdb8=['Failed\x20to\x20get\x20payment\x20information','now','getMerchantsAwaitingPayout','amount','get','../controllers/adminController','/users/:id','__esModule','coinToPayStatusService','shop','11073622PSamgc','json','findUnique','getUserById','hasOwnProperty','15ZHCsFk','getPayouts','checkPaymentById','expiryDays','defineProperty','getPayments','use','updateUser','paymentId','__importStar','../middleware/auth','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','2309490tBufqz','/cointopay/stats','cleanOldLogs','/cointopay/check/:paymentId','default','806068yAwXJH','305706jrxLLh','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','\x20days\x20if\x20not\x20paid','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','log','toISOString','delete','getPaymentTimerInfo','/domain-monitoring/stats','then','floor','post','deletePayout','gateway','createUserSchema','authenticateToken','createPayout','loggerService','call','createUser','payment','/payments/:id/customer','/users','getTime','/statistics','1712ULYHyx','11sKFudf','put','/payout','getServiceStats','Payment\x20not\x20found','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','Domain\x20is\x20responding\x20correctly','getPayoutById','create','CoinToPay\x20automatic\x20status\x20checking\x20service','1969250vjlpZk','../services/domainMonitoringService','getMonitoringStats','error','getOwnPropertyDescriptor','length','Old\x20logs\x20cleaned\x20(kept\x20last\x20','24741ldkSaT','suspendUser','params','getMerchantStatistics','77LwpqPi','updatedAt','/payouts/:id','currency','/payout/stats','/payout/merchants','manualCheck','getUsers','express','FAILED','validate','/payments/:id','/users/:id/suspend','../config/database','configurable','AdminController','deleteUser','../services/coinToPayStatusService','domainMonitoringService','status','CoinToPay\x20payment\x20status\x20checked\x20successfully','updateUserSchema','PENDING','resolve','/logs/stats','/domain-monitoring/check','updatePayment','createPayoutSchema','5701490BVsDTo','\x20days)','message','/cointopay/payment/:paymentId','activateUser','createdAt','/users/:id/activate','prototype','PAID','Router','/payouts','Failed\x20to\x20clean\x20old\x20logs','getPayoutStats','__createBinding','Failed\x20to\x20get\x20log\x20statistics'];a19_0x135c=function(){return _0x19fdb8;};return a19_0x135c();}(function(_0x14abde,_0x50bd8f){const _0x12a56c=a19_0x3460,_0x1324fc=_0x14abde();while(!![]){try{const _0x48b6c0=-parseInt(_0x12a56c(0xfd))/0x1*(-parseInt(_0x12a56c(0xe3))/0x2)+-parseInt(_0x12a56c(0xd1))/0x3*(-parseInt(_0x12a56c(0xe2))/0x4)+-parseInt(_0x12a56c(0x8c))/0x5+parseInt(_0x12a56c(0xdd))/0x6+parseInt(_0x12a56c(0xcc))/0x7+-parseInt(_0x12a56c(0xfc))/0x8*(-parseInt(_0x12a56c(0x93))/0x9)+-parseInt(_0x12a56c(0xb3))/0xa*(parseInt(_0x12a56c(0x97))/0xb);if(_0x48b6c0===_0x50bd8f)break;else _0x1324fc['push'](_0x1324fc['shift']());}catch(_0x4be165){_0x1324fc['push'](_0x1324fc['shift']());}}}(a19_0x135c,0xd1c56));var __createBinding=this&&this[a19_0x3de8c8(0xc0)]||(Object[a19_0x3de8c8(0x8a)]?function(_0x38f4c2,_0x41f402,_0x569d6d,_0x4a8a44){const _0x4aa67a=a19_0x3de8c8;if(_0x4a8a44===undefined)_0x4a8a44=_0x569d6d;var _0x2d994c=Object[_0x4aa67a(0x90)](_0x41f402,_0x569d6d);(!_0x2d994c||(_0x4aa67a(0xc6)in _0x2d994c?!_0x41f402[_0x4aa67a(0xc9)]:_0x2d994c['writable']||_0x2d994c[_0x4aa67a(0xa5)]))&&(_0x2d994c={'enumerable':!![],'get':function(){return _0x41f402[_0x569d6d];}}),Object[_0x4aa67a(0xd5)](_0x38f4c2,_0x4a8a44,_0x2d994c);}:function(_0x8495ab,_0x296997,_0x2460c9,_0x19911f){if(_0x19911f===undefined)_0x19911f=_0x2460c9;_0x8495ab[_0x19911f]=_0x296997[_0x2460c9];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object['create']?function(_0x370db0,_0x1ad7d9){Object['defineProperty'](_0x370db0,'default',{'enumerable':!![],'value':_0x1ad7d9});}:function(_0x5a0ba9,_0x2cb74a){const _0x1bad38=a19_0x3de8c8;_0x5a0ba9[_0x1bad38(0xe1)]=_0x2cb74a;}),__importStar=this&&this[a19_0x3de8c8(0xda)]||(function(){var _0x35b946=function(_0x11abde){return _0x35b946=Object['getOwnPropertyNames']||function(_0x2c470){const _0x5138c9=a19_0x3460;var _0x1dee92=[];for(var _0x446026 in _0x2c470)if(Object[_0x5138c9(0xba)][_0x5138c9(0xd0)][_0x5138c9(0xf5)](_0x2c470,_0x446026))_0x1dee92[_0x1dee92[_0x5138c9(0x91)]]=_0x446026;return _0x1dee92;},_0x35b946(_0x11abde);};return function(_0x29aa20){const _0x21b9b2=a19_0x3460;if(_0x29aa20&&_0x29aa20[_0x21b9b2(0xc9)])return _0x29aa20;var _0x8cfb1c={};if(_0x29aa20!=null){for(var _0x53aca5=_0x35b946(_0x29aa20),_0x5de723=0x0;_0x5de723<_0x53aca5[_0x21b9b2(0x91)];_0x5de723++)if(_0x53aca5[_0x5de723]!==_0x21b9b2(0xe1))__createBinding(_0x8cfb1c,_0x29aa20,_0x53aca5[_0x5de723]);}return __setModuleDefault(_0x8cfb1c,_0x29aa20),_0x8cfb1c;};}());Object['defineProperty'](exports,'__esModule',{'value':!![]});function a19_0x3460(_0x3d742d,_0x3b1cae){const _0x135c19=a19_0x135c();return a19_0x3460=function(_0x346012,_0x1e3b7d){_0x346012=_0x346012-0x87;let _0x5afa9d=_0x135c19[_0x346012];return _0x5afa9d;},a19_0x3460(_0x3d742d,_0x3b1cae);}const express_1=require(a19_0x3de8c8(0x9f)),adminController_1=require(a19_0x3de8c8(0xc7)),validation_1=require('../middleware/validation'),auth_1=require(a19_0x3de8c8(0xdb)),loggerService_1=require('../services/loggerService'),coinToPayStatusService_1=require(a19_0x3de8c8(0xa8)),domainMonitoringService_1=require(a19_0x3de8c8(0x8d)),router=(0x0,express_1[a19_0x3de8c8(0xbc)])(),adminController=new adminController_1[(a19_0x3de8c8(0xa6))]();router[a19_0x3de8c8(0xd7)](auth_1[a19_0x3de8c8(0xf2)],auth_1['requireAdmin']),router[a19_0x3de8c8(0xc6)]('/auth',adminController['checkAuth']),router['get'](a19_0x3de8c8(0xfb),adminController['getStatistics']),router[a19_0x3de8c8(0xc6)]('/merchant-statistics',adminController[a19_0x3de8c8(0x96)]),router[a19_0x3de8c8(0xc6)](a19_0x3de8c8(0x9b),adminController[a19_0x3de8c8(0xbf)]),router[a19_0x3de8c8(0xc6)](a19_0x3de8c8(0x9c),adminController[a19_0x3de8c8(0xc4)]),router[a19_0x3de8c8(0xee)](a19_0x3de8c8(0xff),(0x0,validation_1['validate'])(validation_1[a19_0x3de8c8(0xb2)]),adminController[a19_0x3de8c8(0xf3)]),router[a19_0x3de8c8(0xc6)](a19_0x3de8c8(0xbd),adminController[a19_0x3de8c8(0xd2)]),router['get'](a19_0x3de8c8(0x99),adminController[a19_0x3de8c8(0x89)]),router['delete'](a19_0x3de8c8(0x99),adminController[a19_0x3de8c8(0xef)]),router[a19_0x3de8c8(0xc6)]('/payments',adminController[a19_0x3de8c8(0xd6)]),router['get'](a19_0x3de8c8(0xa2),adminController['getPaymentById']),router[a19_0x3de8c8(0xfe)](a19_0x3de8c8(0xa2),adminController[a19_0x3de8c8(0xb1)]),router[a19_0x3de8c8(0xfe)](a19_0x3de8c8(0xf8),(0x0,validation_1[a19_0x3de8c8(0xa1)])(validation_1['updateCustomerDataSchema']),adminController['updateCustomerData']),router[a19_0x3de8c8(0xc6)]('/users',adminController[a19_0x3de8c8(0x9e)]),router[a19_0x3de8c8(0xc6)](a19_0x3de8c8(0xc8),adminController[a19_0x3de8c8(0xcf)]),router[a19_0x3de8c8(0xee)](a19_0x3de8c8(0xf9),(0x0,validation_1[a19_0x3de8c8(0xa1)])(validation_1[a19_0x3de8c8(0xf1)]),adminController[a19_0x3de8c8(0xf6)]),router[a19_0x3de8c8(0xfe)]('/users/:id',(0x0,validation_1[a19_0x3de8c8(0xa1)])(validation_1[a19_0x3de8c8(0xac)]),adminController[a19_0x3de8c8(0xd8)]),router[a19_0x3de8c8(0xe9)](a19_0x3de8c8(0xc8),adminController[a19_0x3de8c8(0xa7)]),router[a19_0x3de8c8(0xee)](a19_0x3de8c8(0xa3),adminController[a19_0x3de8c8(0x94)]),router['post'](a19_0x3de8c8(0xb9),adminController[a19_0x3de8c8(0xb7)]),router[a19_0x3de8c8(0xc6)](a19_0x3de8c8(0xaf),(_0x23e29b,_0x1d1d6a)=>{const _0x336c3e=a19_0x3de8c8;try{const _0x5a0eb2=loggerService_1[_0x336c3e(0xf4)]['getLogStats']();_0x1d1d6a[_0x336c3e(0xcd)]({'success':!![],'result':_0x5a0eb2});}catch(_0x4d599a){_0x1d1d6a[_0x336c3e(0xaa)](0x1f4)[_0x336c3e(0xcd)]({'success':![],'message':_0x336c3e(0xc1)});}}),router[a19_0x3de8c8(0xee)]('/logs/clean',(_0x4cf3ad,_0x1a5dff)=>{const _0x3d7bcf=a19_0x3de8c8;try{const {daysToKeep:daysToKeep=0x1e}=_0x4cf3ad['body'];loggerService_1[_0x3d7bcf(0xf4)][_0x3d7bcf(0xdf)](daysToKeep),_0x1a5dff[_0x3d7bcf(0xcd)]({'success':!![],'message':_0x3d7bcf(0x92)+daysToKeep+_0x3d7bcf(0xb4)});}catch(_0x9958b7){_0x1a5dff['status'](0x1f4)[_0x3d7bcf(0xcd)]({'success':![],'message':_0x3d7bcf(0xbe)});}}),router['post'](a19_0x3de8c8(0xe0),async(_0x54a3b9,_0x236794)=>{const _0x300cd9=a19_0x3de8c8;try{const {paymentId:_0x1b5b12}=_0x54a3b9[_0x300cd9(0x95)];console[_0x300cd9(0xe7)]('🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20'+_0x1b5b12),await coinToPayStatusService_1[_0x300cd9(0xca)][_0x300cd9(0xd3)](_0x1b5b12),_0x236794[_0x300cd9(0xcd)]({'success':!![],'message':_0x300cd9(0xab)});}catch(_0x143340){console[_0x300cd9(0x8f)]('❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20'+_0x54a3b9[_0x300cd9(0x95)][_0x300cd9(0xd9)]+':',_0x143340),_0x236794[_0x300cd9(0xaa)](0x1f4)[_0x300cd9(0xcd)]({'success':![],'message':_0x143340 instanceof Error?_0x143340[_0x300cd9(0xb5)]:_0x300cd9(0x87)});}}),router[a19_0x3de8c8(0xc6)](a19_0x3de8c8(0xde),(_0x3ab0d8,_0x5dc2c6)=>{const _0x169d79=a19_0x3de8c8;try{const _0x57a2a6=coinToPayStatusService_1[_0x169d79(0xca)][_0x169d79(0x100)]();_0x5dc2c6['json']({'success':!![],'result':{..._0x57a2a6,'description':_0x169d79(0x8b),'statusMapping':{'Paid':_0x169d79(0xbb),'Awaiting\x20Fiat':'PENDING','waiting':_0x169d79(0xad),'expired':'EXPIRED','failed':_0x169d79(0xa0)},'autoExpiryNote':'Payments\x20automatically\x20expire\x20after\x20'+_0x57a2a6[_0x169d79(0xd4)]+_0x169d79(0xe5),'individualTimersNote':_0x169d79(0xe4)}});}catch(_0x26db27){_0x5dc2c6[_0x169d79(0xaa)](0x1f4)[_0x169d79(0xcd)]({'success':![],'message':_0x169d79(0xe6)});}}),router[a19_0x3de8c8(0xc6)](a19_0x3de8c8(0xb6),async(_0x5134d1,_0x277381)=>{const _0x4b9a9c=a19_0x3de8c8;try{const {paymentId:_0x431ebf}=_0x5134d1[_0x4b9a9c(0x95)],_0x74f437=coinToPayStatusService_1['coinToPayStatusService'][_0x4b9a9c(0xea)](_0x431ebf),_0x18e6ba=(await Promise[_0x4b9a9c(0xae)]()[_0x4b9a9c(0xec)](()=>__importStar(require(_0x4b9a9c(0xa4)))))[_0x4b9a9c(0xe1)],_0x5a5594=await _0x18e6ba[_0x4b9a9c(0xf7)][_0x4b9a9c(0xce)]({'where':{'id':_0x431ebf},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x5a5594)return _0x277381['status'](0x194)[_0x4b9a9c(0xcd)]({'success':![],'message':_0x4b9a9c(0x101)});_0x277381[_0x4b9a9c(0xcd)]({'success':!![],'result':{'payment':{'id':_0x5a5594['id'],'gateway':_0x5a5594[_0x4b9a9c(0xf0)],'gatewayPaymentId':_0x5a5594['gatewayPaymentId'],'status':_0x5a5594[_0x4b9a9c(0xaa)],'amount':_0x5a5594[_0x4b9a9c(0xc5)],'currency':_0x5a5594[_0x4b9a9c(0x9a)],'createdAt':_0x5a5594[_0x4b9a9c(0xb8)],'updatedAt':_0x5a5594[_0x4b9a9c(0x98)],'shop':_0x5a5594[_0x4b9a9c(0xcb)]},'timers':_0x74f437,'isCoinToPay':_0x5a5594[_0x4b9a9c(0xf0)]==='cointopay','ageInMinutes':Math[_0x4b9a9c(0xed)]((Date[_0x4b9a9c(0xc3)]()-_0x5a5594['createdAt'][_0x4b9a9c(0xfa)]())/(0x3e8*0x3c))}});}catch(_0x5984c1){_0x277381[_0x4b9a9c(0xaa)](0x1f4)['json']({'success':![],'message':_0x5984c1 instanceof Error?_0x5984c1[_0x4b9a9c(0xb5)]:_0x4b9a9c(0xc2)});}}),router['get'](a19_0x3de8c8(0xeb),(_0x315335,_0x53c071)=>{const _0x4f53a4=a19_0x3de8c8;try{const _0x406360=domainMonitoringService_1[_0x4f53a4(0xa9)][_0x4f53a4(0x8e)]();_0x53c071[_0x4f53a4(0xcd)]({'success':!![],'result':{..._0x406360,'description':_0x4f53a4(0xdc),'behavior':'Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','encoding':'Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs'}});}catch(_0x1eced3){_0x53c071[_0x4f53a4(0xaa)](0x1f4)[_0x4f53a4(0xcd)]({'success':![],'message':'Failed\x20to\x20get\x20domain\x20monitoring\x20statistics'});}}),router[a19_0x3de8c8(0xee)](a19_0x3de8c8(0xb0),async(_0x152bcc,_0x482e63)=>{const _0x435544=a19_0x3de8c8;try{const _0x14bee0=await domainMonitoringService_1['domainMonitoringService'][_0x435544(0x9d)]();_0x482e63[_0x435544(0xcd)]({'success':!![],'result':{'domainAvailable':_0x14bee0,'message':_0x14bee0?_0x435544(0x88):'Domain\x20check\x20failed','timestamp':new Date()[_0x435544(0xe8)]()}});}catch(_0x53adeb){_0x482e63[_0x435544(0xaa)](0x1f4)[_0x435544(0xcd)]({'success':![],'message':_0x53adeb instanceof Error?_0x53adeb['message']:'Failed\x20to\x20perform\x20manual\x20domain\x20check'});}}),exports[a19_0x3de8c8(0xe1)]=router;