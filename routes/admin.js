'use strict';function a19_0x1d16(_0x3587d7,_0x546f52){const _0x38bd8e=a19_0x38bd();return a19_0x1d16=function(_0x1d168b,_0x312307){_0x1d168b=_0x1d168b-0x125;let _0x2d2187=_0x38bd8e[_0x1d168b];return _0x2d2187;},a19_0x1d16(_0x3587d7,_0x546f52);}const a19_0x3c7c2f=a19_0x1d16;(function(_0x5e8801,_0x11a51f){const _0x25e7ac=a19_0x1d16,_0x180dbf=_0x5e8801();while(!![]){try{const _0x46c2f6=parseInt(_0x25e7ac(0x145))/0x1*(parseInt(_0x25e7ac(0x18c))/0x2)+-parseInt(_0x25e7ac(0x190))/0x3+parseInt(_0x25e7ac(0x195))/0x4+-parseInt(_0x25e7ac(0x15e))/0x5*(parseInt(_0x25e7ac(0x125))/0x6)+-parseInt(_0x25e7ac(0x130))/0x7*(-parseInt(_0x25e7ac(0x177))/0x8)+-parseInt(_0x25e7ac(0x1a4))/0x9*(parseInt(_0x25e7ac(0x139))/0xa)+parseInt(_0x25e7ac(0x19a))/0xb;if(_0x46c2f6===_0x11a51f)break;else _0x180dbf['push'](_0x180dbf['shift']());}catch(_0x27e66e){_0x180dbf['push'](_0x180dbf['shift']());}}}(a19_0x38bd,0xd4f4f));var __createBinding=this&&this[a19_0x3c7c2f(0x17c)]||(Object[a19_0x3c7c2f(0x127)]?function(_0x11d03d,_0x21bd35,_0x43ae32,_0x494822){const _0x5d0bdd=a19_0x3c7c2f;if(_0x494822===undefined)_0x494822=_0x43ae32;var _0x35cb30=Object[_0x5d0bdd(0x13d)](_0x21bd35,_0x43ae32);(!_0x35cb30||(_0x5d0bdd(0x171)in _0x35cb30?!_0x21bd35[_0x5d0bdd(0x132)]:_0x35cb30[_0x5d0bdd(0x188)]||_0x35cb30['configurable']))&&(_0x35cb30={'enumerable':!![],'get':function(){return _0x21bd35[_0x43ae32];}}),Object[_0x5d0bdd(0x17e)](_0x11d03d,_0x494822,_0x35cb30);}:function(_0x43eba3,_0x3f1484,_0x4dee5d,_0x12b9a5){if(_0x12b9a5===undefined)_0x12b9a5=_0x4dee5d;_0x43eba3[_0x12b9a5]=_0x3f1484[_0x4dee5d];}),__setModuleDefault=this&&this[a19_0x3c7c2f(0x1a2)]||(Object['create']?function(_0x4112c4,_0x5d1b8a){const _0xa51e74=a19_0x3c7c2f;Object[_0xa51e74(0x17e)](_0x4112c4,'default',{'enumerable':!![],'value':_0x5d1b8a});}:function(_0x438495,_0x54d7b3){const _0x364371=a19_0x3c7c2f;_0x438495[_0x364371(0x160)]=_0x54d7b3;}),__importStar=this&&this[a19_0x3c7c2f(0x157)]||(function(){var _0x23213e=function(_0x432a7f){const _0x505e59=a19_0x1d16;return _0x23213e=Object[_0x505e59(0x169)]||function(_0x590580){const _0x47b096=_0x505e59;var _0x410b22=[];for(var _0xe545e2 in _0x590580)if(Object[_0x47b096(0x166)][_0x47b096(0x136)]['call'](_0x590580,_0xe545e2))_0x410b22[_0x410b22[_0x47b096(0x172)]]=_0xe545e2;return _0x410b22;},_0x23213e(_0x432a7f);};return function(_0x12146d){const _0x3b4ea8=a19_0x1d16;if(_0x12146d&&_0x12146d['__esModule'])return _0x12146d;var _0x52663f={};if(_0x12146d!=null){for(var _0x3f4617=_0x23213e(_0x12146d),_0x2c93f9=0x0;_0x2c93f9<_0x3f4617[_0x3b4ea8(0x172)];_0x2c93f9++)if(_0x3f4617[_0x2c93f9]!=='default')__createBinding(_0x52663f,_0x12146d,_0x3f4617[_0x2c93f9]);}return __setModuleDefault(_0x52663f,_0x12146d),_0x52663f;};}());Object[a19_0x3c7c2f(0x17e)](exports,a19_0x3c7c2f(0x132),{'value':!![]});const express_1=require(a19_0x3c7c2f(0x134)),adminController_1=require(a19_0x3c7c2f(0x18f)),validation_1=require(a19_0x3c7c2f(0x182)),auth_1=require(a19_0x3c7c2f(0x126)),loggerService_1=require('../services/loggerService'),coinToPayStatusService_1=require(a19_0x3c7c2f(0x16d)),domainMonitoringService_1=require(a19_0x3c7c2f(0x13b)),router=(0x0,express_1[a19_0x3c7c2f(0x163)])(),adminController=new adminController_1[(a19_0x3c7c2f(0x13e))]();function a19_0x38bd(){const _0x2331d1=['length','deletePayout','message','json','\x20days\x20if\x20not\x20paid','272Ozfpdl','getMerchantStatistics','post','/users/:id/activate','now','__createBinding','getServiceStats','defineProperty','/payments/:id','use','/payouts/:id','../middleware/validation','/cointopay/stats','/payout/merchants','getLogStats','updateCustomerDataSchema','updateUserSchema','writable','Failed\x20to\x20get\x20payment\x20information','/payout/stats','floor','8TjLEBm','PAID','PENDING','../controllers/adminController','4993581oNmCnA','amount','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','getStatistics','6823536YYIQXH','Payment\x20not\x20found','❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','deleteUser','findUnique','4013460WzjSSq','../config/database','suspendUser','getUsers','Domain\x20check\x20failed','/users/:id','log','/domain-monitoring/check','__setModuleDefault','updatedAt','27SnqMAo','6aScsWb','../middleware/auth','create','getUserById','/logs/stats','🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','Old\x20logs\x20cleaned\x20(kept\x20last\x20','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','/domain-monitoring/stats','delete','activateUser','289177noyPGk','getPaymentTimerInfo','__esModule','then','express','coinToPayStatusService','hasOwnProperty','CoinToPay\x20payment\x20status\x20checked\x20successfully','toISOString','5264080SXwsLt','/cointopay/payment/:paymentId','../services/domainMonitoringService','/payouts','getOwnPropertyDescriptor','AdminController','getMonitoringStats','loggerService','updateUser','createUserSchema','shop','gatewayPaymentId','254542ILLlEN','currency','resolve','Failed\x20to\x20perform\x20manual\x20domain\x20check','params','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','getPayments','getMerchantsAwaitingPayout','getPaymentById','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','getPayouts','domainMonitoringService','createdAt','getPayoutById','put','getPayoutStats','/users/:id/suspend','/users','__importStar','/payments/:id/customer','createPayout','payment','status','createUser','checkAuth','1887320BPSlzP','getTime','default','CoinToPay\x20automatic\x20status\x20checking\x20service','gateway','Router','requireAdmin','cleanOldLogs','prototype','/cointopay/check/:paymentId','cointopay','getOwnPropertyNames','validate','manualCheck','expiryDays','../services/coinToPayStatusService','/payout','Payments\x20automatically\x20expire\x20after\x20','Domain\x20is\x20responding\x20correctly','get'];a19_0x38bd=function(){return _0x2331d1;};return a19_0x38bd();}router[a19_0x3c7c2f(0x180)](auth_1['authenticateToken'],auth_1[a19_0x3c7c2f(0x164)]),router[a19_0x3c7c2f(0x171)]('/auth',adminController[a19_0x3c7c2f(0x15d)]),router[a19_0x3c7c2f(0x171)]('/statistics',adminController[a19_0x3c7c2f(0x194)]),router[a19_0x3c7c2f(0x171)]('/merchant-statistics',adminController[a19_0x3c7c2f(0x178)]),router[a19_0x3c7c2f(0x171)](a19_0x3c7c2f(0x18a),adminController[a19_0x3c7c2f(0x154)]),router[a19_0x3c7c2f(0x171)](a19_0x3c7c2f(0x184),adminController[a19_0x3c7c2f(0x14c)]),router[a19_0x3c7c2f(0x179)](a19_0x3c7c2f(0x16e),(0x0,validation_1[a19_0x3c7c2f(0x16a)])(validation_1['createPayoutSchema']),adminController[a19_0x3c7c2f(0x159)]),router[a19_0x3c7c2f(0x171)](a19_0x3c7c2f(0x13c),adminController[a19_0x3c7c2f(0x14f)]),router[a19_0x3c7c2f(0x171)](a19_0x3c7c2f(0x181),adminController[a19_0x3c7c2f(0x152)]),router[a19_0x3c7c2f(0x12e)](a19_0x3c7c2f(0x181),adminController[a19_0x3c7c2f(0x173)]),router['get']('/payments',adminController[a19_0x3c7c2f(0x14b)]),router[a19_0x3c7c2f(0x171)](a19_0x3c7c2f(0x17f),adminController[a19_0x3c7c2f(0x14d)]),router[a19_0x3c7c2f(0x153)](a19_0x3c7c2f(0x17f),adminController['updatePayment']),router[a19_0x3c7c2f(0x153)](a19_0x3c7c2f(0x158),(0x0,validation_1[a19_0x3c7c2f(0x16a)])(validation_1[a19_0x3c7c2f(0x186)]),adminController['updateCustomerData']),router[a19_0x3c7c2f(0x171)](a19_0x3c7c2f(0x156),adminController[a19_0x3c7c2f(0x19d)]),router['get'](a19_0x3c7c2f(0x19f),adminController[a19_0x3c7c2f(0x128)]),router[a19_0x3c7c2f(0x179)]('/users',(0x0,validation_1[a19_0x3c7c2f(0x16a)])(validation_1[a19_0x3c7c2f(0x142)]),adminController[a19_0x3c7c2f(0x15c)]),router['put'](a19_0x3c7c2f(0x19f),(0x0,validation_1['validate'])(validation_1[a19_0x3c7c2f(0x187)]),adminController[a19_0x3c7c2f(0x141)]),router[a19_0x3c7c2f(0x12e)](a19_0x3c7c2f(0x19f),adminController[a19_0x3c7c2f(0x198)]),router[a19_0x3c7c2f(0x179)](a19_0x3c7c2f(0x155),adminController[a19_0x3c7c2f(0x19c)]),router[a19_0x3c7c2f(0x179)](a19_0x3c7c2f(0x17a),adminController[a19_0x3c7c2f(0x12f)]),router['get'](a19_0x3c7c2f(0x129),(_0x215c0b,_0x1381a7)=>{const _0x15c489=a19_0x3c7c2f;try{const _0x4c25e2=loggerService_1['loggerService'][_0x15c489(0x185)]();_0x1381a7[_0x15c489(0x175)]({'success':!![],'result':_0x4c25e2});}catch(_0x485348){_0x1381a7[_0x15c489(0x15b)](0x1f4)[_0x15c489(0x175)]({'success':![],'message':'Failed\x20to\x20get\x20log\x20statistics'});}}),router['post']('/logs/clean',(_0x39046b,_0x1616b6)=>{const _0x5636d9=a19_0x3c7c2f;try{const {daysToKeep:daysToKeep=0x1e}=_0x39046b['body'];loggerService_1[_0x5636d9(0x140)][_0x5636d9(0x165)](daysToKeep),_0x1616b6['json']({'success':!![],'message':_0x5636d9(0x12b)+daysToKeep+'\x20days)'});}catch(_0x525327){_0x1616b6['status'](0x1f4)[_0x5636d9(0x175)]({'success':![],'message':'Failed\x20to\x20clean\x20old\x20logs'});}}),router[a19_0x3c7c2f(0x179)](a19_0x3c7c2f(0x167),async(_0x5e7bfe,_0x3d8a73)=>{const _0xd55eae=a19_0x3c7c2f;try{const {paymentId:_0x1624cf}=_0x5e7bfe[_0xd55eae(0x149)];console[_0xd55eae(0x1a0)](_0xd55eae(0x12a)+_0x1624cf),await coinToPayStatusService_1['coinToPayStatusService']['checkPaymentById'](_0x1624cf),_0x3d8a73[_0xd55eae(0x175)]({'success':!![],'message':_0xd55eae(0x137)});}catch(_0x494ed6){console['error'](_0xd55eae(0x197)+_0x5e7bfe[_0xd55eae(0x149)]['paymentId']+':',_0x494ed6),_0x3d8a73[_0xd55eae(0x15b)](0x1f4)['json']({'success':![],'message':_0x494ed6 instanceof Error?_0x494ed6[_0xd55eae(0x174)]:_0xd55eae(0x12c)});}}),router[a19_0x3c7c2f(0x171)](a19_0x3c7c2f(0x183),(_0x546e09,_0x79b208)=>{const _0x15c2e6=a19_0x3c7c2f;try{const _0x4be20b=coinToPayStatusService_1[_0x15c2e6(0x135)][_0x15c2e6(0x17d)]();_0x79b208[_0x15c2e6(0x175)]({'success':!![],'result':{..._0x4be20b,'description':_0x15c2e6(0x161),'statusMapping':{'Paid':_0x15c2e6(0x18d),'Awaiting\x20Fiat':_0x15c2e6(0x18e),'waiting':_0x15c2e6(0x18e),'expired':'EXPIRED','failed':'FAILED'},'autoExpiryNote':_0x15c2e6(0x16f)+_0x4be20b[_0x15c2e6(0x16c)]+_0x15c2e6(0x176),'individualTimersNote':_0x15c2e6(0x14e)}});}catch(_0x33d0a5){_0x79b208[_0x15c2e6(0x15b)](0x1f4)['json']({'success':![],'message':_0x15c2e6(0x192)});}}),router[a19_0x3c7c2f(0x171)](a19_0x3c7c2f(0x13a),async(_0x40650b,_0xbf3094)=>{const _0x1e5038=a19_0x3c7c2f;try{const {paymentId:_0x307c7e}=_0x40650b[_0x1e5038(0x149)],_0x4f5cc8=coinToPayStatusService_1[_0x1e5038(0x135)][_0x1e5038(0x131)](_0x307c7e),_0x5c59ff=(await Promise[_0x1e5038(0x147)]()[_0x1e5038(0x133)](()=>__importStar(require(_0x1e5038(0x19b)))))['default'],_0x310950=await _0x5c59ff[_0x1e5038(0x15a)][_0x1e5038(0x199)]({'where':{'id':_0x307c7e},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x310950)return _0xbf3094['status'](0x194)[_0x1e5038(0x175)]({'success':![],'message':_0x1e5038(0x196)});_0xbf3094[_0x1e5038(0x175)]({'success':!![],'result':{'payment':{'id':_0x310950['id'],'gateway':_0x310950[_0x1e5038(0x162)],'gatewayPaymentId':_0x310950[_0x1e5038(0x144)],'status':_0x310950[_0x1e5038(0x15b)],'amount':_0x310950[_0x1e5038(0x191)],'currency':_0x310950[_0x1e5038(0x146)],'createdAt':_0x310950[_0x1e5038(0x151)],'updatedAt':_0x310950[_0x1e5038(0x1a3)],'shop':_0x310950[_0x1e5038(0x143)]},'timers':_0x4f5cc8,'isCoinToPay':_0x310950[_0x1e5038(0x162)]===_0x1e5038(0x168),'ageInMinutes':Math[_0x1e5038(0x18b)]((Date[_0x1e5038(0x17b)]()-_0x310950[_0x1e5038(0x151)][_0x1e5038(0x15f)]())/(0x3e8*0x3c))}});}catch(_0x5a3392){_0xbf3094[_0x1e5038(0x15b)](0x1f4)[_0x1e5038(0x175)]({'success':![],'message':_0x5a3392 instanceof Error?_0x5a3392[_0x1e5038(0x174)]:_0x1e5038(0x189)});}}),router['get'](a19_0x3c7c2f(0x12d),(_0x46aac4,_0x13aba0)=>{const _0x298070=a19_0x3c7c2f;try{const _0x4c44a5=domainMonitoringService_1[_0x298070(0x150)][_0x298070(0x13f)]();_0x13aba0[_0x298070(0x175)]({'success':!![],'result':{..._0x4c44a5,'description':_0x298070(0x14a),'behavior':'Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','encoding':_0x298070(0x193)}});}catch(_0x3970b7){_0x13aba0[_0x298070(0x15b)](0x1f4)['json']({'success':![],'message':'Failed\x20to\x20get\x20domain\x20monitoring\x20statistics'});}}),router[a19_0x3c7c2f(0x179)](a19_0x3c7c2f(0x1a1),async(_0x47a65c,_0x4e0f1c)=>{const _0x14e6b5=a19_0x3c7c2f;try{const _0x3f9095=await domainMonitoringService_1['domainMonitoringService'][_0x14e6b5(0x16b)]();_0x4e0f1c['json']({'success':!![],'result':{'domainAvailable':_0x3f9095,'message':_0x3f9095?_0x14e6b5(0x170):_0x14e6b5(0x19e),'timestamp':new Date()[_0x14e6b5(0x138)]()}});}catch(_0x5b029d){_0x4e0f1c[_0x14e6b5(0x15b)](0x1f4)[_0x14e6b5(0x175)]({'success':![],'message':_0x5b029d instanceof Error?_0x5b029d[_0x14e6b5(0x174)]:_0x14e6b5(0x148)});}}),exports[a19_0x3c7c2f(0x160)]=router;