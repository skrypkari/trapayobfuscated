'use strict';const a19_0x1e3014=a19_0x5bd4;(function(_0x2d7314,_0x19c8a6){const _0x296887=a19_0x5bd4,_0x14b91d=_0x2d7314();while(!![]){try{const _0x521ba8=parseInt(_0x296887(0x10d))/0x1+parseInt(_0x296887(0x16d))/0x2+-parseInt(_0x296887(0x163))/0x3*(parseInt(_0x296887(0x121))/0x4)+-parseInt(_0x296887(0x146))/0x5*(parseInt(_0x296887(0x153))/0x6)+parseInt(_0x296887(0x176))/0x7+-parseInt(_0x296887(0x14d))/0x8+parseInt(_0x296887(0x122))/0x9;if(_0x521ba8===_0x19c8a6)break;else _0x14b91d['push'](_0x14b91d['shift']());}catch(_0x2b498d){_0x14b91d['push'](_0x14b91d['shift']());}}}(a19_0x7fca,0xb9a91));var __createBinding=this&&this[a19_0x1e3014(0x134)]||(Object['create']?function(_0x493651,_0x53d15f,_0x3282fc,_0x1003c1){const _0x26e47b=a19_0x1e3014;if(_0x1003c1===undefined)_0x1003c1=_0x3282fc;var _0x21a4fc=Object['getOwnPropertyDescriptor'](_0x53d15f,_0x3282fc);(!_0x21a4fc||(_0x26e47b(0x152)in _0x21a4fc?!_0x53d15f['__esModule']:_0x21a4fc[_0x26e47b(0x149)]||_0x21a4fc['configurable']))&&(_0x21a4fc={'enumerable':!![],'get':function(){return _0x53d15f[_0x3282fc];}}),Object[_0x26e47b(0x12f)](_0x493651,_0x1003c1,_0x21a4fc);}:function(_0x3117b4,_0x19e330,_0x2eb419,_0x5a3103){if(_0x5a3103===undefined)_0x5a3103=_0x2eb419;_0x3117b4[_0x5a3103]=_0x19e330[_0x2eb419];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a19_0x1e3014(0x114)]?function(_0x1251c3,_0x3587c3){const _0x11b6a0=a19_0x1e3014;Object[_0x11b6a0(0x12f)](_0x1251c3,_0x11b6a0(0x179),{'enumerable':!![],'value':_0x3587c3});}:function(_0x1b3269,_0xd60422){const _0x58ab0d=a19_0x1e3014;_0x1b3269[_0x58ab0d(0x179)]=_0xd60422;}),__importStar=this&&this['__importStar']||(function(){var _0xd2176=function(_0x1b6ff2){const _0x5abd51=a19_0x5bd4;return _0xd2176=Object[_0x5abd51(0x15c)]||function(_0x57fc67){const _0x5bc43c=_0x5abd51;var _0x41ebce=[];for(var _0x1564be in _0x57fc67)if(Object['prototype']['hasOwnProperty']['call'](_0x57fc67,_0x1564be))_0x41ebce[_0x41ebce[_0x5bc43c(0x111)]]=_0x1564be;return _0x41ebce;},_0xd2176(_0x1b6ff2);};return function(_0x2db60b){const _0x190341=a19_0x5bd4;if(_0x2db60b&&_0x2db60b[_0x190341(0x170)])return _0x2db60b;var _0xa22320={};if(_0x2db60b!=null){for(var _0x31b42a=_0xd2176(_0x2db60b),_0x12065b=0x0;_0x12065b<_0x31b42a[_0x190341(0x111)];_0x12065b++)if(_0x31b42a[_0x12065b]!=='default')__createBinding(_0xa22320,_0x2db60b,_0x31b42a[_0x12065b]);}return __setModuleDefault(_0xa22320,_0x2db60b),_0xa22320;};}());function a19_0x5bd4(_0x1f8dd0,_0xf37183){const _0x7fca49=a19_0x7fca();return a19_0x5bd4=function(_0x5bd4e1,_0x4dd8a0){_0x5bd4e1=_0x5bd4e1-0x10b;let _0x33a003=_0x7fca49[_0x5bd4e1];return _0x33a003;},a19_0x5bd4(_0x1f8dd0,_0xf37183);}Object[a19_0x1e3014(0x12f)](exports,a19_0x1e3014(0x170),{'value':!![]});const express_1=require('express'),adminController_1=require(a19_0x1e3014(0x123)),validation_1=require(a19_0x1e3014(0x13d)),auth_1=require(a19_0x1e3014(0x138)),loggerService_1=require(a19_0x1e3014(0x17f)),coinToPayStatusService_1=require(a19_0x1e3014(0x112)),domainMonitoringService_1=require(a19_0x1e3014(0x16a)),router=(0x0,express_1[a19_0x1e3014(0x10b)])(),adminController=new adminController_1[(a19_0x1e3014(0x15a))]();function a19_0x7fca(){const _0x398883=['checkAuth','/payout','getMerchantsSelection','../middleware/auth','updateUserSchema','createUserSchema','getPayoutById','status','../middleware/validation','authenticateToken','/domain-monitoring/stats','/payments/:id','deletePayout','json','gatewayPaymentId','put','checkPaymentById','173710urHJDA','CoinToPay\x20payment\x20status\x20checked\x20successfully','❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','writable','createPayoutSchema','validate','CoinToPay\x20automatic\x20status\x20checking\x20service','4527600FEnodz','/users/:id','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','domainMonitoringService','post','get','198MRSnhJ','/logs/clean','getServiceStats','Payment\x20not\x20found','manualCheck','/merchant-statistics','activateUser','AdminController','resolve','getOwnPropertyNames','/users/:id/activate','🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','Failed\x20to\x20perform\x20manual\x20domain\x20check','FAILED','message','gateway','561168vecBHz','getPayments','params','EXPIRED','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','updateUser','Failed\x20to\x20clean\x20old\x20logs','../services/domainMonitoringService','/merchants/selection','createUser','2538690mDlAAi','Failed\x20to\x20get\x20log\x20statistics','delete','__esModule','payment','Domain\x20check\x20failed','getPayoutStats','suspendUser','toISOString','5739517RskScM','/domain-monitoring/check','findUnique','default','createdAt','/payouts/:id','use','shop','getPaymentById','../services/loggerService','updatePayment','Router','log','1425827XKQJcC','Failed\x20to\x20get\x20payment\x20information','/users','loggerService','length','../services/coinToPayStatusService','PENDING','create','expiryDays','/auth','/payout/stats','updatedAt','getUsers','\x20days\x20if\x20not\x20paid','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','PAID','paymentId','requireAdmin','../config/database','/payments/:id/customer','28ZhnPja','2404710jjDGTj','../controllers/adminController','/statistics','/cointopay/stats','coinToPayStatusService','getPayouts','getLogStats','/users/:id/suspend','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','body','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','getTime','Old\x20logs\x20cleaned\x20(kept\x20last\x20','defineProperty','cointopay','updateCustomerDataSchema','getMonitoringStats','amount','__createBinding'];a19_0x7fca=function(){return _0x398883;};return a19_0x7fca();}router[a19_0x1e3014(0x17c)](auth_1[a19_0x1e3014(0x13e)],auth_1[a19_0x1e3014(0x11e)]),router[a19_0x1e3014(0x152)](a19_0x1e3014(0x116),adminController[a19_0x1e3014(0x135)]),router[a19_0x1e3014(0x152)](a19_0x1e3014(0x124),adminController['getStatistics']),router[a19_0x1e3014(0x152)](a19_0x1e3014(0x158),adminController['getMerchantStatistics']),router[a19_0x1e3014(0x152)](a19_0x1e3014(0x117),adminController[a19_0x1e3014(0x173)]),router['get']('/payout/merchants',adminController['getMerchantsAwaitingPayout']),router[a19_0x1e3014(0x152)](a19_0x1e3014(0x16b),adminController[a19_0x1e3014(0x137)]),router[a19_0x1e3014(0x151)](a19_0x1e3014(0x136),(0x0,validation_1[a19_0x1e3014(0x14b)])(validation_1[a19_0x1e3014(0x14a)]),adminController['createPayout']),router[a19_0x1e3014(0x152)]('/payouts',adminController[a19_0x1e3014(0x127)]),router['get'](a19_0x1e3014(0x17b),adminController[a19_0x1e3014(0x13b)]),router[a19_0x1e3014(0x16f)](a19_0x1e3014(0x17b),adminController[a19_0x1e3014(0x141)]),router[a19_0x1e3014(0x152)]('/payments',adminController[a19_0x1e3014(0x164)]),router[a19_0x1e3014(0x152)](a19_0x1e3014(0x140),adminController[a19_0x1e3014(0x17e)]),router[a19_0x1e3014(0x144)]('/payments/:id',adminController[a19_0x1e3014(0x180)]),router[a19_0x1e3014(0x144)](a19_0x1e3014(0x120),(0x0,validation_1[a19_0x1e3014(0x14b)])(validation_1[a19_0x1e3014(0x131)]),adminController['updateCustomerData']),router[a19_0x1e3014(0x152)](a19_0x1e3014(0x10f),adminController[a19_0x1e3014(0x119)]),router['get']('/users/:id',adminController['getUserById']),router[a19_0x1e3014(0x151)](a19_0x1e3014(0x10f),(0x0,validation_1[a19_0x1e3014(0x14b)])(validation_1[a19_0x1e3014(0x13a)]),adminController[a19_0x1e3014(0x16c)]),router[a19_0x1e3014(0x144)](a19_0x1e3014(0x14e),(0x0,validation_1[a19_0x1e3014(0x14b)])(validation_1[a19_0x1e3014(0x139)]),adminController[a19_0x1e3014(0x168)]),router[a19_0x1e3014(0x16f)](a19_0x1e3014(0x14e),adminController['deleteUser']),router[a19_0x1e3014(0x151)](a19_0x1e3014(0x129),adminController[a19_0x1e3014(0x174)]),router['post'](a19_0x1e3014(0x15d),adminController[a19_0x1e3014(0x159)]),router[a19_0x1e3014(0x152)]('/logs/stats',(_0x5a7320,_0x457799)=>{const _0x3007de=a19_0x1e3014;try{const _0x2f27db=loggerService_1[_0x3007de(0x110)][_0x3007de(0x128)]();_0x457799[_0x3007de(0x142)]({'success':!![],'result':_0x2f27db});}catch(_0x2fc607){_0x457799[_0x3007de(0x13c)](0x1f4)[_0x3007de(0x142)]({'success':![],'message':_0x3007de(0x16e)});}}),router[a19_0x1e3014(0x151)](a19_0x1e3014(0x154),(_0x14919a,_0x52873e)=>{const _0x2418fd=a19_0x1e3014;try{const {daysToKeep:daysToKeep=0x1e}=_0x14919a[_0x2418fd(0x12b)];loggerService_1[_0x2418fd(0x110)]['cleanOldLogs'](daysToKeep),_0x52873e[_0x2418fd(0x142)]({'success':!![],'message':_0x2418fd(0x12e)+daysToKeep+'\x20days)'});}catch(_0x5db2d6){_0x52873e[_0x2418fd(0x13c)](0x1f4)[_0x2418fd(0x142)]({'success':![],'message':_0x2418fd(0x169)});}}),router[a19_0x1e3014(0x151)]('/cointopay/check/:paymentId',async(_0x3a875e,_0x153956)=>{const _0x23c143=a19_0x1e3014;try{const {paymentId:_0x176ef6}=_0x3a875e[_0x23c143(0x165)];console[_0x23c143(0x10c)](_0x23c143(0x15e)+_0x176ef6),await coinToPayStatusService_1[_0x23c143(0x126)][_0x23c143(0x145)](_0x176ef6),_0x153956[_0x23c143(0x142)]({'success':!![],'message':_0x23c143(0x147)});}catch(_0x333d23){console['error'](_0x23c143(0x148)+_0x3a875e['params'][_0x23c143(0x11d)]+':',_0x333d23),_0x153956[_0x23c143(0x13c)](0x1f4)[_0x23c143(0x142)]({'success':![],'message':_0x333d23 instanceof Error?_0x333d23[_0x23c143(0x161)]:_0x23c143(0x12a)});}}),router[a19_0x1e3014(0x152)](a19_0x1e3014(0x125),(_0x36b548,_0x25fefd)=>{const _0x180c38=a19_0x1e3014;try{const _0x4c9508=coinToPayStatusService_1['coinToPayStatusService'][_0x180c38(0x155)]();_0x25fefd[_0x180c38(0x142)]({'success':!![],'result':{..._0x4c9508,'description':_0x180c38(0x14c),'statusMapping':{'Paid':_0x180c38(0x11c),'Awaiting\x20Fiat':_0x180c38(0x113),'waiting':_0x180c38(0x113),'expired':_0x180c38(0x166),'failed':_0x180c38(0x160)},'autoExpiryNote':'Payments\x20automatically\x20expire\x20after\x20'+_0x4c9508[_0x180c38(0x115)]+_0x180c38(0x11a),'individualTimersNote':'Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly'}});}catch(_0x48256e){_0x25fefd[_0x180c38(0x13c)](0x1f4)['json']({'success':![],'message':'Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics'});}}),router[a19_0x1e3014(0x152)]('/cointopay/payment/:paymentId',async(_0x38e453,_0x3f766c)=>{const _0x53c2a7=a19_0x1e3014;try{const {paymentId:_0x67d184}=_0x38e453[_0x53c2a7(0x165)],_0x40e382=coinToPayStatusService_1[_0x53c2a7(0x126)]['getPaymentTimerInfo'](_0x67d184),_0x36553e=(await Promise[_0x53c2a7(0x15b)]()['then'](()=>__importStar(require(_0x53c2a7(0x11f)))))[_0x53c2a7(0x179)],_0x451a12=await _0x36553e[_0x53c2a7(0x171)][_0x53c2a7(0x178)]({'where':{'id':_0x67d184},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x451a12)return _0x3f766c[_0x53c2a7(0x13c)](0x194)[_0x53c2a7(0x142)]({'success':![],'message':_0x53c2a7(0x156)});_0x3f766c['json']({'success':!![],'result':{'payment':{'id':_0x451a12['id'],'gateway':_0x451a12[_0x53c2a7(0x162)],'gatewayPaymentId':_0x451a12[_0x53c2a7(0x143)],'status':_0x451a12[_0x53c2a7(0x13c)],'amount':_0x451a12[_0x53c2a7(0x133)],'currency':_0x451a12['currency'],'createdAt':_0x451a12[_0x53c2a7(0x17a)],'updatedAt':_0x451a12[_0x53c2a7(0x118)],'shop':_0x451a12[_0x53c2a7(0x17d)]},'timers':_0x40e382,'isCoinToPay':_0x451a12['gateway']===_0x53c2a7(0x130),'ageInMinutes':Math['floor']((Date['now']()-_0x451a12[_0x53c2a7(0x17a)][_0x53c2a7(0x12d)]())/(0x3e8*0x3c))}});}catch(_0x5f1662){_0x3f766c[_0x53c2a7(0x13c)](0x1f4)['json']({'success':![],'message':_0x5f1662 instanceof Error?_0x5f1662[_0x53c2a7(0x161)]:_0x53c2a7(0x10e)});}}),router[a19_0x1e3014(0x152)](a19_0x1e3014(0x13f),(_0x3910e7,_0x5b5d50)=>{const _0x59b4af=a19_0x1e3014;try{const _0x5832ec=domainMonitoringService_1[_0x59b4af(0x150)][_0x59b4af(0x132)]();_0x5b5d50[_0x59b4af(0x142)]({'success':!![],'result':{..._0x5832ec,'description':_0x59b4af(0x12c),'behavior':_0x59b4af(0x11b),'encoding':_0x59b4af(0x167)}});}catch(_0x501482){_0x5b5d50['status'](0x1f4)[_0x59b4af(0x142)]({'success':![],'message':_0x59b4af(0x14f)});}}),router[a19_0x1e3014(0x151)](a19_0x1e3014(0x177),async(_0x441187,_0x1eff23)=>{const _0x36fd5a=a19_0x1e3014;try{const _0x2a4ec0=await domainMonitoringService_1[_0x36fd5a(0x150)][_0x36fd5a(0x157)]();_0x1eff23[_0x36fd5a(0x142)]({'success':!![],'result':{'domainAvailable':_0x2a4ec0,'message':_0x2a4ec0?'Domain\x20is\x20responding\x20correctly':_0x36fd5a(0x172),'timestamp':new Date()[_0x36fd5a(0x175)]()}});}catch(_0x3ea994){_0x1eff23[_0x36fd5a(0x13c)](0x1f4)[_0x36fd5a(0x142)]({'success':![],'message':_0x3ea994 instanceof Error?_0x3ea994[_0x36fd5a(0x161)]:_0x36fd5a(0x15f)});}}),exports['default']=router;