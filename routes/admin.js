'use strict';const a25_0xe8d2d3=a25_0x1cd8;(function(_0x4a072f,_0x39da5a){const _0xd9ab85=a25_0x1cd8,_0xddeaa7=_0x4a072f();while(!![]){try{const _0x1c76a3=-parseInt(_0xd9ab85(0xaa))/0x1*(parseInt(_0xd9ab85(0x119))/0x2)+parseInt(_0xd9ab85(0x114))/0x3+parseInt(_0xd9ab85(0xd6))/0x4+parseInt(_0xd9ab85(0xda))/0x5+-parseInt(_0xd9ab85(0x100))/0x6*(-parseInt(_0xd9ab85(0x118))/0x7)+parseInt(_0xd9ab85(0x115))/0x8+-parseInt(_0xd9ab85(0xe8))/0x9*(parseInt(_0xd9ab85(0xc2))/0xa);if(_0x1c76a3===_0x39da5a)break;else _0xddeaa7['push'](_0xddeaa7['shift']());}catch(_0x3c806a){_0xddeaa7['push'](_0xddeaa7['shift']());}}}(a25_0x1dee,0x1eb9a));var __createBinding=this&&this[a25_0xe8d2d3(0xd7)]||(Object['create']?function(_0x5e139e,_0x5304be,_0x5bd6b4,_0x17f610){const _0xfd4fd9=a25_0xe8d2d3;if(_0x17f610===undefined)_0x17f610=_0x5bd6b4;var _0x49564e=Object[_0xfd4fd9(0xcc)](_0x5304be,_0x5bd6b4);(!_0x49564e||(_0xfd4fd9(0xeb)in _0x49564e?!_0x5304be[_0xfd4fd9(0xed)]:_0x49564e[_0xfd4fd9(0xe7)]||_0x49564e['configurable']))&&(_0x49564e={'enumerable':!![],'get':function(){return _0x5304be[_0x5bd6b4];}}),Object[_0xfd4fd9(0xc7)](_0x5e139e,_0x17f610,_0x49564e);}:function(_0x583c70,_0x4fc244,_0x4e8772,_0x38ae87){if(_0x38ae87===undefined)_0x38ae87=_0x4e8772;_0x583c70[_0x38ae87]=_0x4fc244[_0x4e8772];}),__setModuleDefault=this&&this[a25_0xe8d2d3(0xe4)]||(Object[a25_0xe8d2d3(0xa5)]?function(_0x1e6038,_0x548b5b){const _0x56b001=a25_0xe8d2d3;Object[_0x56b001(0xc7)](_0x1e6038,_0x56b001(0xc5),{'enumerable':!![],'value':_0x548b5b});}:function(_0x537d02,_0x4ed33a){const _0xaaa1d=a25_0xe8d2d3;_0x537d02[_0xaaa1d(0xc5)]=_0x4ed33a;}),__importStar=this&&this[a25_0xe8d2d3(0xab)]||(function(){var _0x3bd7f9=function(_0x235caf){const _0x1fd619=a25_0x1cd8;return _0x3bd7f9=Object[_0x1fd619(0xfc)]||function(_0x1be7bd){const _0x59677b=_0x1fd619;var _0x4e5634=[];for(var _0x2a7f25 in _0x1be7bd)if(Object['prototype']['hasOwnProperty'][_0x59677b(0x104)](_0x1be7bd,_0x2a7f25))_0x4e5634[_0x4e5634[_0x59677b(0xa0)]]=_0x2a7f25;return _0x4e5634;},_0x3bd7f9(_0x235caf);};return function(_0x5bb56d){const _0x3498db=a25_0x1cd8;if(_0x5bb56d&&_0x5bb56d[_0x3498db(0xed)])return _0x5bb56d;var _0x2ed495={};if(_0x5bb56d!=null){for(var _0x5ed257=_0x3bd7f9(_0x5bb56d),_0x3e58a0=0x0;_0x3e58a0<_0x5ed257[_0x3498db(0xa0)];_0x3e58a0++)if(_0x5ed257[_0x3e58a0]!==_0x3498db(0xc5))__createBinding(_0x2ed495,_0x5bb56d,_0x5ed257[_0x3e58a0]);}return __setModuleDefault(_0x2ed495,_0x5bb56d),_0x2ed495;};}());Object[a25_0xe8d2d3(0xc7)](exports,a25_0xe8d2d3(0xed),{'value':!![]});function a25_0x1dee(){const _0x82a075=['/cointopay/check/:paymentId','getTime','getOwnPropertyNames','Failed\x20to\x20get\x20log\x20statistics','/users/:id','json','426wcYllx','/shops/:shopId/2fa/setup','getPayoutStats','/domain-monitoring/stats','call','Failed\x20to\x20clean\x20old\x20logs','gateway','expirePaymentLinks','/payment-links/expire','cointopay','checkPaymentById','/payout/:id','expiryDays','/users','../services/coinToPayStatusService','/statistics','params','getMerchantStatistics','EXPIRED','Domain\x20check\x20failed','365835cfpglP','702616siNCtM','shop','body','602CLladc','285648UrNPJW','status','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','../services/domainMonitoringService','getServiceStats','setup2FA','deleteUser','PAID','/domain-monitoring/check','../middleware/validation','getShopWallets','getLogStats','getUsers','âŒ\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','Domain\x20is\x20responding\x20correctly','floor','/payouts','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','length','cleanOldLogs','CoinToPay\x20automatic\x20status\x20checking\x20service','\x20days)','createUser','create','getPaymentTimerInfo','getPayoutById','Payments\x20automatically\x20expire\x20after\x20','delete','1RkXLcu','__importStar','disable2FA','post','/logs/clean','suspendUser','/payments/:id','../config/database','/cointopay/payment/:paymentId','deletePayout','Payment\x20not\x20found','getProcessingPaymentsStats','manualCheck','updatePayoutSchema','/users/:id/activate','/payments/cleanup','/merchants/selection','currency','createUserSchema','log','getMerchantsSelection','getUserById','getPayments','updateCustomerData','494060vEJdMi','findUnique','Failed\x20to\x20perform\x20manual\x20domain\x20check','default','checkAuth','defineProperty','Router','paymentId','/shops/:shopId/2fa/disable','enable2FA','getOwnPropertyDescriptor','payment','createPayoutSchema','getMonitoringStats','coinToPayStatusService','Failed\x20to\x20get\x20payment\x20information','resolve','updateUser','/cointopay/stats','../middleware/auth','48260bYSBvM','__createBinding','Old\x20logs\x20cleaned\x20(kept\x20last\x20','updatePayout','944745blDjth','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','\x20days\x20if\x20not\x20paid','requireAdmin','updatedAt','validate','put','CoinToPay\x20payment\x20status\x20checked\x20successfully','cleanupStalePayments','express','__setModuleDefault','ðŸ”\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','/payout/stats','writable','27vKJEue','/shops/:shopId/wallets','updateUserSchema','get','gatewayPaymentId','__esModule','amount','activateUser','createdAt','/payouts/:id','createPayout','cleanupStalePendingPayments','getPayouts','getMerchantsAwaitingPayout','/payout','domainMonitoringService','loggerService','message'];a25_0x1dee=function(){return _0x82a075;};return a25_0x1dee();}function a25_0x1cd8(_0x5bc91e,_0x1f7b6f){_0x5bc91e=_0x5bc91e-0xa0;const _0x1dee80=a25_0x1dee();let _0x1cd877=_0x1dee80[_0x5bc91e];return _0x1cd877;}const express_1=require(a25_0xe8d2d3(0xe3)),adminController_1=require('../controllers/adminController'),validation_1=require(a25_0xe8d2d3(0x122)),auth_1=require(a25_0xe8d2d3(0xd5)),loggerService_1=require('../services/loggerService'),coinToPayStatusService_1=require(a25_0xe8d2d3(0x10e)),domainMonitoringService_1=require(a25_0xe8d2d3(0x11c)),router=(0x0,express_1[a25_0xe8d2d3(0xc8)])(),adminController=new adminController_1['AdminController']();router['use'](auth_1['authenticateToken'],auth_1[a25_0xe8d2d3(0xdd)]),router[a25_0xe8d2d3(0xeb)]('/auth',adminController[a25_0xe8d2d3(0xc6)]),router[a25_0xe8d2d3(0xeb)](a25_0xe8d2d3(0x10f),adminController['getStatistics']),router[a25_0xe8d2d3(0xeb)]('/merchant-statistics',adminController[a25_0xe8d2d3(0x111)]),router[a25_0xe8d2d3(0xeb)](a25_0xe8d2d3(0xe6),adminController[a25_0xe8d2d3(0x102)]),router[a25_0xe8d2d3(0xeb)]('/payout/merchants',adminController[a25_0xe8d2d3(0xf5)]),router['get'](a25_0xe8d2d3(0xba),adminController[a25_0xe8d2d3(0xbe)]),router[a25_0xe8d2d3(0xad)](a25_0xe8d2d3(0xf6),(0x0,validation_1['validate'])(validation_1[a25_0xe8d2d3(0xce)]),adminController[a25_0xe8d2d3(0xf2)]),router[a25_0xe8d2d3(0xe0)](a25_0xe8d2d3(0x10b),(0x0,validation_1[a25_0xe8d2d3(0xdf)])(validation_1[a25_0xe8d2d3(0xb7)]),adminController[a25_0xe8d2d3(0xd9)]),router[a25_0xe8d2d3(0xeb)](a25_0xe8d2d3(0x129),adminController[a25_0xe8d2d3(0xf4)]),router['get'](a25_0xe8d2d3(0xf1),adminController[a25_0xe8d2d3(0xa7)]),router[a25_0xe8d2d3(0xa9)]('/payouts/:id',adminController[a25_0xe8d2d3(0xb3)]),router['get']('/payments',adminController[a25_0xe8d2d3(0xc0)]),router[a25_0xe8d2d3(0xeb)]('/payments/:id',adminController['getPaymentById']),router['put'](a25_0xe8d2d3(0xb0),adminController['updatePayment']),router[a25_0xe8d2d3(0xe0)]('/payments/:id/customer',(0x0,validation_1[a25_0xe8d2d3(0xdf)])(validation_1['updateCustomerDataSchema']),adminController[a25_0xe8d2d3(0xc1)]),router[a25_0xe8d2d3(0xeb)]('/payments/processing-stats',adminController[a25_0xe8d2d3(0xb5)]),router[a25_0xe8d2d3(0xad)](a25_0xe8d2d3(0xb9),adminController[a25_0xe8d2d3(0xe2)]),router['post']('/payments/cleanup-pending',adminController[a25_0xe8d2d3(0xf3)]),router['post']('/payments/cleanup-with-report',adminController['cleanupStalePaymentsWithReport']),router[a25_0xe8d2d3(0xad)](a25_0xe8d2d3(0x108),adminController[a25_0xe8d2d3(0x107)]),router[a25_0xe8d2d3(0xeb)](a25_0xe8d2d3(0x10d),adminController[a25_0xe8d2d3(0x125)]),router[a25_0xe8d2d3(0xeb)](a25_0xe8d2d3(0xfe),adminController[a25_0xe8d2d3(0xbf)]),router[a25_0xe8d2d3(0xad)](a25_0xe8d2d3(0x10d),(0x0,validation_1[a25_0xe8d2d3(0xdf)])(validation_1[a25_0xe8d2d3(0xbc)]),adminController[a25_0xe8d2d3(0xa4)]),router[a25_0xe8d2d3(0xe0)]('/users/:id',(0x0,validation_1[a25_0xe8d2d3(0xdf)])(validation_1[a25_0xe8d2d3(0xea)]),adminController[a25_0xe8d2d3(0xd3)]),router[a25_0xe8d2d3(0xa9)](a25_0xe8d2d3(0xfe),adminController[a25_0xe8d2d3(0x11f)]),router[a25_0xe8d2d3(0xeb)](a25_0xe8d2d3(0xe9),adminController[a25_0xe8d2d3(0x123)]),router[a25_0xe8d2d3(0xad)](a25_0xe8d2d3(0x101),adminController[a25_0xe8d2d3(0x11e)]),router[a25_0xe8d2d3(0xad)]('/shops/:shopId/2fa/enable',adminController[a25_0xe8d2d3(0xcb)]),router[a25_0xe8d2d3(0xad)](a25_0xe8d2d3(0xca),adminController[a25_0xe8d2d3(0xac)]),router[a25_0xe8d2d3(0xad)]('/users/:id/suspend',adminController[a25_0xe8d2d3(0xaf)]),router['post'](a25_0xe8d2d3(0xb8),adminController[a25_0xe8d2d3(0xef)]),router[a25_0xe8d2d3(0xeb)]('/logs/stats',(_0x4a5533,_0x1b9602)=>{const _0xa4df2b=a25_0xe8d2d3;try{const _0xab6e8a=loggerService_1[_0xa4df2b(0xf8)][_0xa4df2b(0x124)]();_0x1b9602['json']({'success':!![],'result':_0xab6e8a});}catch(_0x5e77f2){_0x1b9602[_0xa4df2b(0x11a)](0x1f4)[_0xa4df2b(0xff)]({'success':![],'message':_0xa4df2b(0xfd)});}}),router[a25_0xe8d2d3(0xad)](a25_0xe8d2d3(0xae),(_0x5d3171,_0x4af64d)=>{const _0x213d6c=a25_0xe8d2d3;try{const {daysToKeep:daysToKeep=0x1e}=_0x5d3171[_0x213d6c(0x117)];loggerService_1[_0x213d6c(0xf8)][_0x213d6c(0xa1)](daysToKeep),_0x4af64d['json']({'success':!![],'message':_0x213d6c(0xd8)+daysToKeep+_0x213d6c(0xa3)});}catch(_0x17f0b8){_0x4af64d[_0x213d6c(0x11a)](0x1f4)[_0x213d6c(0xff)]({'success':![],'message':_0x213d6c(0x105)});}}),router[a25_0xe8d2d3(0xad)](a25_0xe8d2d3(0xfa),async(_0xc73bc,_0x225a24)=>{const _0x1917c8=a25_0xe8d2d3;try{const {paymentId:_0x24c239}=_0xc73bc[_0x1917c8(0x110)];console[_0x1917c8(0xbd)](_0x1917c8(0xe5)+_0x24c239),await coinToPayStatusService_1[_0x1917c8(0xd0)][_0x1917c8(0x10a)](_0x24c239),_0x225a24[_0x1917c8(0xff)]({'success':!![],'message':_0x1917c8(0xe1)});}catch(_0x2b7789){console['error'](_0x1917c8(0x126)+_0xc73bc[_0x1917c8(0x110)][_0x1917c8(0xc9)]+':',_0x2b7789),_0x225a24['status'](0x1f4)[_0x1917c8(0xff)]({'success':![],'message':_0x2b7789 instanceof Error?_0x2b7789['message']:'Failed\x20to\x20check\x20CoinToPay\x20payment\x20status'});}}),router[a25_0xe8d2d3(0xeb)](a25_0xe8d2d3(0xd4),(_0x170448,_0x272d63)=>{const _0x4718dd=a25_0xe8d2d3;try{const _0x425d0a=coinToPayStatusService_1[_0x4718dd(0xd0)][_0x4718dd(0x11d)]();_0x272d63[_0x4718dd(0xff)]({'success':!![],'result':{..._0x425d0a,'description':_0x4718dd(0xa2),'statusMapping':{'Paid':_0x4718dd(0x120),'Awaiting\x20Fiat':'PENDING','waiting':'PENDING','expired':_0x4718dd(0x112),'failed':'FAILED'},'autoExpiryNote':_0x4718dd(0xa8)+_0x425d0a[_0x4718dd(0x10c)]+_0x4718dd(0xdc),'individualTimersNote':'Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly'}});}catch(_0x3202e4){_0x272d63['status'](0x1f4)[_0x4718dd(0xff)]({'success':![],'message':_0x4718dd(0xdb)});}}),router[a25_0xe8d2d3(0xeb)](a25_0xe8d2d3(0xb2),async(_0x4113c1,_0x466605)=>{const _0x3fd2f6=a25_0xe8d2d3;try{const {paymentId:_0xf9880d}=_0x4113c1[_0x3fd2f6(0x110)],_0xfb4b38=coinToPayStatusService_1[_0x3fd2f6(0xd0)][_0x3fd2f6(0xa6)](_0xf9880d),_0x1682b2=(await Promise[_0x3fd2f6(0xd2)]()['then'](()=>__importStar(require(_0x3fd2f6(0xb1)))))[_0x3fd2f6(0xc5)],_0x4b61b1=await _0x1682b2[_0x3fd2f6(0xcd)][_0x3fd2f6(0xc3)]({'where':{'id':_0xf9880d},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x4b61b1)return _0x466605['status'](0x194)[_0x3fd2f6(0xff)]({'success':![],'message':_0x3fd2f6(0xb4)});_0x466605[_0x3fd2f6(0xff)]({'success':!![],'result':{'payment':{'id':_0x4b61b1['id'],'gateway':_0x4b61b1[_0x3fd2f6(0x106)],'gatewayPaymentId':_0x4b61b1[_0x3fd2f6(0xec)],'status':_0x4b61b1[_0x3fd2f6(0x11a)],'amount':_0x4b61b1[_0x3fd2f6(0xee)],'currency':_0x4b61b1[_0x3fd2f6(0xbb)],'createdAt':_0x4b61b1[_0x3fd2f6(0xf0)],'updatedAt':_0x4b61b1[_0x3fd2f6(0xde)],'shop':_0x4b61b1[_0x3fd2f6(0x116)]},'timers':_0xfb4b38,'isCoinToPay':_0x4b61b1[_0x3fd2f6(0x106)]===_0x3fd2f6(0x109),'ageInMinutes':Math[_0x3fd2f6(0x128)]((Date['now']()-_0x4b61b1[_0x3fd2f6(0xf0)][_0x3fd2f6(0xfb)]())/(0x3e8*0x3c))}});}catch(_0x570760){_0x466605['status'](0x1f4)['json']({'success':![],'message':_0x570760 instanceof Error?_0x570760[_0x3fd2f6(0xf9)]:_0x3fd2f6(0xd1)});}}),router[a25_0xe8d2d3(0xeb)](a25_0xe8d2d3(0x103),(_0x32a091,_0x4d4b0a)=>{const _0x3221cf=a25_0xe8d2d3;try{const _0x5ccb18=domainMonitoringService_1[_0x3221cf(0xf7)][_0x3221cf(0xcf)]();_0x4d4b0a[_0x3221cf(0xff)]({'success':!![],'result':{..._0x5ccb18,'description':_0x3221cf(0x11b),'behavior':'Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','encoding':_0x3221cf(0x12a)}});}catch(_0x3a7dbf){_0x4d4b0a[_0x3221cf(0x11a)](0x1f4)[_0x3221cf(0xff)]({'success':![],'message':'Failed\x20to\x20get\x20domain\x20monitoring\x20statistics'});}}),router['post'](a25_0xe8d2d3(0x121),async(_0x5655a3,_0x58ca7e)=>{const _0x49e4d3=a25_0xe8d2d3;try{const _0x1969b8=await domainMonitoringService_1[_0x49e4d3(0xf7)][_0x49e4d3(0xb6)]();_0x58ca7e[_0x49e4d3(0xff)]({'success':!![],'result':{'domainAvailable':_0x1969b8,'message':_0x1969b8?_0x49e4d3(0x127):_0x49e4d3(0x113),'timestamp':new Date()['toISOString']()}});}catch(_0x2bbebe){_0x58ca7e['status'](0x1f4)['json']({'success':![],'message':_0x2bbebe instanceof Error?_0x2bbebe[_0x49e4d3(0xf9)]:_0x49e4d3(0xc4)});}}),exports[a25_0xe8d2d3(0xc5)]=router;