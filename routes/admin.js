'use strict';const a19_0x55fa7a=a19_0xc61e;(function(_0x19bf30,_0x41d547){const _0x15f19c=a19_0xc61e,_0x5ded70=_0x19bf30();while(!![]){try{const _0x3d1791=-parseInt(_0x15f19c(0x14e))/0x1*(-parseInt(_0x15f19c(0x1a3))/0x2)+parseInt(_0x15f19c(0x193))/0x3+parseInt(_0x15f19c(0x1a7))/0x4*(-parseInt(_0x15f19c(0x15b))/0x5)+parseInt(_0x15f19c(0x16e))/0x6+-parseInt(_0x15f19c(0x18f))/0x7*(-parseInt(_0x15f19c(0x167))/0x8)+parseInt(_0x15f19c(0x15e))/0x9+-parseInt(_0x15f19c(0x16f))/0xa;if(_0x3d1791===_0x41d547)break;else _0x5ded70['push'](_0x5ded70['shift']());}catch(_0x1f0827){_0x5ded70['push'](_0x5ded70['shift']());}}}(a19_0x5236,0x6250c));function a19_0xc61e(_0x3fb588,_0x1da289){const _0x5236b8=a19_0x5236();return a19_0xc61e=function(_0xc61e13,_0x3f0daa){_0xc61e13=_0xc61e13-0x145;let _0xb82294=_0x5236b8[_0xc61e13];return _0xb82294;},a19_0xc61e(_0x3fb588,_0x1da289);}var __createBinding=this&&this[a19_0x55fa7a(0x149)]||(Object[a19_0x55fa7a(0x1b1)]?function(_0x31831f,_0x580b2e,_0xb77adc,_0x5eb144){const _0x364684=a19_0x55fa7a;if(_0x5eb144===undefined)_0x5eb144=_0xb77adc;var _0x4b657c=Object[_0x364684(0x183)](_0x580b2e,_0xb77adc);(!_0x4b657c||('get'in _0x4b657c?!_0x580b2e['__esModule']:_0x4b657c[_0x364684(0x19d)]||_0x4b657c['configurable']))&&(_0x4b657c={'enumerable':!![],'get':function(){return _0x580b2e[_0xb77adc];}}),Object[_0x364684(0x148)](_0x31831f,_0x5eb144,_0x4b657c);}:function(_0x4279ae,_0x2d610c,_0x43cb1f,_0x4222f9){if(_0x4222f9===undefined)_0x4222f9=_0x43cb1f;_0x4279ae[_0x4222f9]=_0x2d610c[_0x43cb1f];}),__setModuleDefault=this&&this[a19_0x55fa7a(0x159)]||(Object[a19_0x55fa7a(0x1b1)]?function(_0x52135f,_0x1b134f){const _0x2910ab=a19_0x55fa7a;Object[_0x2910ab(0x148)](_0x52135f,_0x2910ab(0x1ae),{'enumerable':!![],'value':_0x1b134f});}:function(_0x4ee84e,_0x5a03a3){const _0x4c25c0=a19_0x55fa7a;_0x4ee84e[_0x4c25c0(0x1ae)]=_0x5a03a3;}),__importStar=this&&this['__importStar']||(function(){var _0xfc68ca=function(_0x19f81a){const _0x470039=a19_0xc61e;return _0xfc68ca=Object[_0x470039(0x1ab)]||function(_0x52bc5a){const _0x438721=_0x470039;var _0x4fa916=[];for(var _0x50e886 in _0x52bc5a)if(Object[_0x438721(0x17a)][_0x438721(0x182)][_0x438721(0x14a)](_0x52bc5a,_0x50e886))_0x4fa916[_0x4fa916['length']]=_0x50e886;return _0x4fa916;},_0xfc68ca(_0x19f81a);};return function(_0x7715c){const _0x7c67d2=a19_0xc61e;if(_0x7715c&&_0x7715c[_0x7c67d2(0x18e)])return _0x7715c;var _0xa71b00={};if(_0x7715c!=null){for(var _0xc9eb07=_0xfc68ca(_0x7715c),_0x5185b1=0x0;_0x5185b1<_0xc9eb07['length'];_0x5185b1++)if(_0xc9eb07[_0x5185b1]!=='default')__createBinding(_0xa71b00,_0x7715c,_0xc9eb07[_0x5185b1]);}return __setModuleDefault(_0xa71b00,_0x7715c),_0xa71b00;};}());Object[a19_0x55fa7a(0x148)](exports,a19_0x55fa7a(0x18e),{'value':!![]});const express_1=require(a19_0x55fa7a(0x156)),adminController_1=require(a19_0x55fa7a(0x198)),validation_1=require(a19_0x55fa7a(0x1b7)),auth_1=require(a19_0x55fa7a(0x194)),loggerService_1=require('../services/loggerService'),coinToPayStatusService_1=require(a19_0x55fa7a(0x15a)),domainMonitoringService_1=require('../services/domainMonitoringService'),router=(0x0,express_1[a19_0x55fa7a(0x16c)])(),adminController=new adminController_1[(a19_0x55fa7a(0x177))]();router[a19_0x55fa7a(0x16a)](auth_1[a19_0x55fa7a(0x1b2)],auth_1[a19_0x55fa7a(0x1ac)]),router[a19_0x55fa7a(0x150)]('/auth',adminController['checkAuth']),router[a19_0x55fa7a(0x150)](a19_0x55fa7a(0x160),adminController[a19_0x55fa7a(0x14d)]),router[a19_0x55fa7a(0x150)](a19_0x55fa7a(0x1b5),adminController['getMerchantStatistics']),router[a19_0x55fa7a(0x150)](a19_0x55fa7a(0x1a5),adminController[a19_0x55fa7a(0x163)]),router[a19_0x55fa7a(0x150)](a19_0x55fa7a(0x1b0),adminController['getMerchantsAwaitingPayout']),router[a19_0x55fa7a(0x172)]('/payout',(0x0,validation_1['validate'])(validation_1[a19_0x55fa7a(0x181)]),adminController['createPayout']),router[a19_0x55fa7a(0x150)]('/payouts',adminController['getPayouts']),router['get'](a19_0x55fa7a(0x1a1),adminController[a19_0x55fa7a(0x19e)]),router[a19_0x55fa7a(0x1af)](a19_0x55fa7a(0x1a1),adminController['deletePayout']),router[a19_0x55fa7a(0x150)](a19_0x55fa7a(0x174),adminController['getPayments']),router[a19_0x55fa7a(0x150)](a19_0x55fa7a(0x18a),adminController[a19_0x55fa7a(0x1aa)]),router[a19_0x55fa7a(0x19a)](a19_0x55fa7a(0x18a),adminController['updatePayment']),router[a19_0x55fa7a(0x19a)](a19_0x55fa7a(0x152),(0x0,validation_1[a19_0x55fa7a(0x191)])(validation_1[a19_0x55fa7a(0x17b)]),adminController[a19_0x55fa7a(0x1a8)]),router[a19_0x55fa7a(0x150)](a19_0x55fa7a(0x192),adminController['getUsers']),router['get'](a19_0x55fa7a(0x145),adminController[a19_0x55fa7a(0x147)]),router[a19_0x55fa7a(0x172)](a19_0x55fa7a(0x192),(0x0,validation_1[a19_0x55fa7a(0x191)])(validation_1[a19_0x55fa7a(0x19f)]),adminController[a19_0x55fa7a(0x166)]),router[a19_0x55fa7a(0x19a)](a19_0x55fa7a(0x145),(0x0,validation_1['validate'])(validation_1[a19_0x55fa7a(0x185)]),adminController[a19_0x55fa7a(0x146)]),router['delete']('/users/:id',adminController['deleteUser']),router[a19_0x55fa7a(0x172)](a19_0x55fa7a(0x14c),adminController[a19_0x55fa7a(0x175)]),router[a19_0x55fa7a(0x172)](a19_0x55fa7a(0x162),adminController[a19_0x55fa7a(0x1a6)]),router[a19_0x55fa7a(0x150)](a19_0x55fa7a(0x18b),(_0x312285,_0x54648d)=>{const _0x49c95a=a19_0x55fa7a;try{const _0x1787d4=loggerService_1[_0x49c95a(0x169)][_0x49c95a(0x188)]();_0x54648d[_0x49c95a(0x157)]({'success':!![],'result':_0x1787d4});}catch(_0x27fc85){_0x54648d[_0x49c95a(0x19c)](0x1f4)['json']({'success':![],'message':_0x49c95a(0x153)});}}),router['post']('/logs/clean',(_0x55d45a,_0x31c068)=>{const _0x3349a7=a19_0x55fa7a;try{const {daysToKeep:daysToKeep=0x1e}=_0x55d45a[_0x3349a7(0x161)];loggerService_1['loggerService'][_0x3349a7(0x178)](daysToKeep),_0x31c068[_0x3349a7(0x157)]({'success':!![],'message':'Old\x20logs\x20cleaned\x20(kept\x20last\x20'+daysToKeep+_0x3349a7(0x158)});}catch(_0xc15ac3){_0x31c068['status'](0x1f4)[_0x3349a7(0x157)]({'success':![],'message':'Failed\x20to\x20clean\x20old\x20logs'});}}),router[a19_0x55fa7a(0x172)]('/cointopay/check/:paymentId',async(_0x28096f,_0x272040)=>{const _0xb6285a=a19_0x55fa7a;try{const {paymentId:_0x3efa8d}=_0x28096f['params'];console[_0xb6285a(0x15d)](_0xb6285a(0x1ad)+_0x3efa8d),await coinToPayStatusService_1['coinToPayStatusService']['checkPaymentById'](_0x3efa8d),_0x272040['json']({'success':!![],'message':_0xb6285a(0x199)});}catch(_0x468a75){console[_0xb6285a(0x189)](_0xb6285a(0x17c)+_0x28096f[_0xb6285a(0x195)]['paymentId']+':',_0x468a75),_0x272040[_0xb6285a(0x19c)](0x1f4)['json']({'success':![],'message':_0x468a75 instanceof Error?_0x468a75['message']:_0xb6285a(0x1b3)});}}),router[a19_0x55fa7a(0x150)](a19_0x55fa7a(0x179),(_0x329f51,_0x391952)=>{const _0x3e1057=a19_0x55fa7a;try{const _0x140e1c=coinToPayStatusService_1[_0x3e1057(0x173)][_0x3e1057(0x186)]();_0x391952['json']({'success':!![],'result':{..._0x140e1c,'description':_0x3e1057(0x16d),'statusMapping':{'Paid':_0x3e1057(0x155),'Awaiting\x20Fiat':_0x3e1057(0x171),'waiting':_0x3e1057(0x171),'expired':'EXPIRED','failed':_0x3e1057(0x170)},'autoExpiryNote':_0x3e1057(0x154)+_0x140e1c[_0x3e1057(0x15c)]+_0x3e1057(0x190),'individualTimersNote':_0x3e1057(0x151)}});}catch(_0x562473){_0x391952[_0x3e1057(0x19c)](0x1f4)[_0x3e1057(0x157)]({'success':![],'message':_0x3e1057(0x14b)});}}),router[a19_0x55fa7a(0x150)](a19_0x55fa7a(0x1b4),async(_0x2ed272,_0x48aa51)=>{const _0x40e0ad=a19_0x55fa7a;try{const {paymentId:_0x439855}=_0x2ed272[_0x40e0ad(0x195)],_0x4e0398=coinToPayStatusService_1[_0x40e0ad(0x173)][_0x40e0ad(0x196)](_0x439855),_0x9d6f34=(await Promise[_0x40e0ad(0x17f)]()[_0x40e0ad(0x1b6)](()=>__importStar(require(_0x40e0ad(0x165)))))[_0x40e0ad(0x1ae)],_0x3069e2=await _0x9d6f34[_0x40e0ad(0x168)][_0x40e0ad(0x184)]({'where':{'id':_0x439855},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x3069e2)return _0x48aa51['status'](0x194)['json']({'success':![],'message':_0x40e0ad(0x187)});_0x48aa51[_0x40e0ad(0x157)]({'success':!![],'result':{'payment':{'id':_0x3069e2['id'],'gateway':_0x3069e2[_0x40e0ad(0x197)],'gatewayPaymentId':_0x3069e2[_0x40e0ad(0x14f)],'status':_0x3069e2[_0x40e0ad(0x19c)],'amount':_0x3069e2[_0x40e0ad(0x1a2)],'currency':_0x3069e2[_0x40e0ad(0x17d)],'createdAt':_0x3069e2[_0x40e0ad(0x164)],'updatedAt':_0x3069e2['updatedAt'],'shop':_0x3069e2[_0x40e0ad(0x18d)]},'timers':_0x4e0398,'isCoinToPay':_0x3069e2[_0x40e0ad(0x197)]===_0x40e0ad(0x15f),'ageInMinutes':Math['floor']((Date[_0x40e0ad(0x16b)]()-_0x3069e2['createdAt'][_0x40e0ad(0x18c)]())/(0x3e8*0x3c))}});}catch(_0x459157){_0x48aa51['status'](0x1f4)['json']({'success':![],'message':_0x459157 instanceof Error?_0x459157['message']:'Failed\x20to\x20get\x20payment\x20information'});}}),router[a19_0x55fa7a(0x150)]('/domain-monitoring/stats',(_0x31c83d,_0x59fdd8)=>{const _0xac77b=a19_0x55fa7a;try{const _0x1be4a3=domainMonitoringService_1[_0xac77b(0x19b)][_0xac77b(0x180)]();_0x59fdd8[_0xac77b(0x157)]({'success':!![],'result':{..._0x1be4a3,'description':'Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','behavior':'Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','encoding':'Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs'}});}catch(_0x167db6){_0x59fdd8[_0xac77b(0x19c)](0x1f4)['json']({'success':![],'message':_0xac77b(0x1a4)});}}),router['post'](a19_0x55fa7a(0x1a9),async(_0x65ee7c,_0x46ebd4)=>{const _0x20b2b4=a19_0x55fa7a;try{const _0x47525b=await domainMonitoringService_1[_0x20b2b4(0x19b)][_0x20b2b4(0x176)]();_0x46ebd4['json']({'success':!![],'result':{'domainAvailable':_0x47525b,'message':_0x47525b?_0x20b2b4(0x17e):'Domain\x20check\x20failed','timestamp':new Date()['toISOString']()}});}catch(_0x2eb7e6){_0x46ebd4[_0x20b2b4(0x19c)](0x1f4)[_0x20b2b4(0x157)]({'success':![],'message':_0x2eb7e6 instanceof Error?_0x2eb7e6[_0x20b2b4(0x1a0)]:'Failed\x20to\x20perform\x20manual\x20domain\x20check'});}}),exports[a19_0x55fa7a(0x1ae)]=router;function a19_0x5236(){const _0x5ab1d7=['createdAt','../config/database','createUser','96qTyrRW','payment','loggerService','use','now','Router','CoinToPay\x20automatic\x20status\x20checking\x20service','1570380bAScws','13496220Hsoysx','FAILED','PENDING','post','coinToPayStatusService','/payments','suspendUser','manualCheck','AdminController','cleanOldLogs','/cointopay/stats','prototype','updateCustomerDataSchema','❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','currency','Domain\x20is\x20responding\x20correctly','resolve','getMonitoringStats','createPayoutSchema','hasOwnProperty','getOwnPropertyDescriptor','findUnique','updateUserSchema','getServiceStats','Payment\x20not\x20found','getLogStats','error','/payments/:id','/logs/stats','getTime','shop','__esModule','186879dDxPrU','\x20days\x20if\x20not\x20paid','validate','/users','1496088VPVnHa','../middleware/auth','params','getPaymentTimerInfo','gateway','../controllers/adminController','CoinToPay\x20payment\x20status\x20checked\x20successfully','put','domainMonitoringService','status','writable','getPayoutById','createUserSchema','message','/payouts/:id','amount','343496cxxNxv','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','/payout/stats','activateUser','664XIEgYu','updateCustomerData','/domain-monitoring/check','getPaymentById','getOwnPropertyNames','requireAdmin','🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','default','delete','/payout/merchants','create','authenticateToken','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','/cointopay/payment/:paymentId','/merchant-statistics','then','../middleware/validation','/users/:id','updateUser','getUserById','defineProperty','__createBinding','call','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','/users/:id/suspend','getStatistics','4VFRFcB','gatewayPaymentId','get','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','/payments/:id/customer','Failed\x20to\x20get\x20log\x20statistics','Payments\x20automatically\x20expire\x20after\x20','PAID','express','json','\x20days)','__setModuleDefault','../services/coinToPayStatusService','22030TylzvL','expiryDays','log','6443424HjUGYx','cointopay','/statistics','body','/users/:id/activate','getPayoutStats'];a19_0x5236=function(){return _0x5ab1d7;};return a19_0x5236();}