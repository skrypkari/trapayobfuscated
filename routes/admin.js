'use strict';const a19_0x152ed3=a19_0x4c8c;(function(_0x44da60,_0x4d90f0){const _0x386137=a19_0x4c8c,_0x20809e=_0x44da60();while(!![]){try{const _0x492eab=parseInt(_0x386137(0x163))/0x1*(-parseInt(_0x386137(0x183))/0x2)+-parseInt(_0x386137(0x146))/0x3*(-parseInt(_0x386137(0x156))/0x4)+parseInt(_0x386137(0x196))/0x5*(parseInt(_0x386137(0x190))/0x6)+-parseInt(_0x386137(0x144))/0x7*(-parseInt(_0x386137(0x15e))/0x8)+parseInt(_0x386137(0x19d))/0x9+-parseInt(_0x386137(0x193))/0xa+-parseInt(_0x386137(0x155))/0xb*(-parseInt(_0x386137(0x194))/0xc);if(_0x492eab===_0x4d90f0)break;else _0x20809e['push'](_0x20809e['shift']());}catch(_0x18b2d9){_0x20809e['push'](_0x20809e['shift']());}}}(a19_0x11e7,0x4bf5b));var __createBinding=this&&this[a19_0x152ed3(0x158)]||(Object[a19_0x152ed3(0x1b7)]?function(_0x564743,_0x100e7b,_0x5800ce,_0x4cebdc){const _0x5f3357=a19_0x152ed3;if(_0x4cebdc===undefined)_0x4cebdc=_0x5800ce;var _0x26c6f6=Object[_0x5f3357(0x1b5)](_0x100e7b,_0x5800ce);(!_0x26c6f6||('get'in _0x26c6f6?!_0x100e7b[_0x5f3357(0x1af)]:_0x26c6f6[_0x5f3357(0x149)]||_0x26c6f6[_0x5f3357(0x154)]))&&(_0x26c6f6={'enumerable':!![],'get':function(){return _0x100e7b[_0x5800ce];}}),Object[_0x5f3357(0x184)](_0x564743,_0x4cebdc,_0x26c6f6);}:function(_0x102a5f,_0x8a06d,_0xb85d62,_0x38e804){if(_0x38e804===undefined)_0x38e804=_0xb85d62;_0x102a5f[_0x38e804]=_0x8a06d[_0xb85d62];}),__setModuleDefault=this&&this[a19_0x152ed3(0x14b)]||(Object[a19_0x152ed3(0x1b7)]?function(_0x3b9d2c,_0x512b18){const _0x272b97=a19_0x152ed3;Object[_0x272b97(0x184)](_0x3b9d2c,'default',{'enumerable':!![],'value':_0x512b18});}:function(_0x46e79e,_0x2b230e){const _0xf42ca6=a19_0x152ed3;_0x46e79e[_0xf42ca6(0x164)]=_0x2b230e;}),__importStar=this&&this[a19_0x152ed3(0x197)]||(function(){var _0x14e081=function(_0x3642c4){const _0x5b4287=a19_0x4c8c;return _0x14e081=Object[_0x5b4287(0x14a)]||function(_0x37cd47){const _0x48b026=_0x5b4287;var _0x551b48=[];for(var _0x520575 in _0x37cd47)if(Object[_0x48b026(0x19a)][_0x48b026(0x174)]['call'](_0x37cd47,_0x520575))_0x551b48[_0x551b48['length']]=_0x520575;return _0x551b48;},_0x14e081(_0x3642c4);};return function(_0x23f977){const _0x20c25f=a19_0x4c8c;if(_0x23f977&&_0x23f977['__esModule'])return _0x23f977;var _0x45fd9e={};if(_0x23f977!=null){for(var _0x4060d5=_0x14e081(_0x23f977),_0x3c8a91=0x0;_0x3c8a91<_0x4060d5['length'];_0x3c8a91++)if(_0x4060d5[_0x3c8a91]!==_0x20c25f(0x164))__createBinding(_0x45fd9e,_0x23f977,_0x4060d5[_0x3c8a91]);}return __setModuleDefault(_0x45fd9e,_0x23f977),_0x45fd9e;};}());function a19_0x11e7(){const _0x3f73fb=['4037706uDGOTO','currency','/payouts','PENDING','../config/database','getLogStats','then','put','../services/loggerService','../services/domainMonitoringService','createPayout','getPaymentTimerInfo','FAILED','CoinToPay\x20automatic\x20status\x20checking\x20service','status','getPayoutStats','log','message','__esModule','error','validate','findUnique','Failed\x20to\x20clean\x20old\x20logs','Domain\x20is\x20responding\x20correctly','getOwnPropertyDescriptor','now','create','5033QUqsgk','amount','5199tnhUPV','/users/:id/activate','updateUser','writable','getOwnPropertyNames','__setModuleDefault','updatePayment','getPaymentById','🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','Payment\x20not\x20found','PAID','Payments\x20automatically\x20expire\x20after\x20','/users/:id/suspend','/merchants/selection','configurable','11dbPvXU','896JZexQD','/payments/:id','__createBinding','updateCustomerDataSchema','/cointopay/payment/:paymentId','express','createdAt','/payments/:id/customer','936OIXnXO','/statistics','get','json','checkPaymentById','1226HdHepd','default','getTime','Failed\x20to\x20get\x20log\x20statistics','../middleware/validation','getMerchantStatistics','suspendUser','AdminController','cointopay','updateCustomerData','deletePayout','payment','/payments','/users','updateUserSchema','createUser','getPayments','hasOwnProperty','/payout/merchants','/domain-monitoring/stats','delete','getPayoutById','params','../services/coinToPayStatusService','Failed\x20to\x20get\x20payment\x20information','Router','/domain-monitoring/check','updatedAt','getStatistics','/logs/clean','getPayouts','/cointopay/check/:paymentId','794VfOBuK','defineProperty','/merchant-statistics','/payout/stats','\x20days)','/users/:id','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','gatewayPaymentId','getMerchantsSelection','activateUser','createPayoutSchema','coinToPayStatusService','/payouts/:id','157578XqUZCT','/logs/stats','post','5013600WixCdD','2963388WYUeAS','loggerService','25NVUwAt','__importStar','getMerchantsAwaitingPayout','Old\x20logs\x20cleaned\x20(kept\x20last\x20','prototype','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','domainMonitoringService'];a19_0x11e7=function(){return _0x3f73fb;};return a19_0x11e7();}Object[a19_0x152ed3(0x184)](exports,a19_0x152ed3(0x1af),{'value':!![]});const express_1=require(a19_0x152ed3(0x15b)),adminController_1=require('../controllers/adminController'),validation_1=require(a19_0x152ed3(0x167)),auth_1=require('../middleware/auth'),loggerService_1=require(a19_0x152ed3(0x1a5)),coinToPayStatusService_1=require(a19_0x152ed3(0x17a)),domainMonitoringService_1=require(a19_0x152ed3(0x1a6)),router=(0x0,express_1[a19_0x152ed3(0x17c)])(),adminController=new adminController_1[(a19_0x152ed3(0x16a))]();function a19_0x4c8c(_0xb4b25c,_0x5e108d){const _0x11e7e8=a19_0x11e7();return a19_0x4c8c=function(_0x4c8cc2,_0x31975f){_0x4c8cc2=_0x4c8cc2-0x144;let _0x1a7468=_0x11e7e8[_0x4c8cc2];return _0x1a7468;},a19_0x4c8c(_0xb4b25c,_0x5e108d);}router['use'](auth_1['authenticateToken'],auth_1['requireAdmin']),router['get']('/auth',adminController['checkAuth']),router[a19_0x152ed3(0x160)](a19_0x152ed3(0x15f),adminController[a19_0x152ed3(0x17f)]),router[a19_0x152ed3(0x160)](a19_0x152ed3(0x185),adminController[a19_0x152ed3(0x168)]),router[a19_0x152ed3(0x160)](a19_0x152ed3(0x186),adminController[a19_0x152ed3(0x1ac)]),router[a19_0x152ed3(0x160)](a19_0x152ed3(0x175),adminController[a19_0x152ed3(0x198)]),router[a19_0x152ed3(0x160)](a19_0x152ed3(0x153),adminController[a19_0x152ed3(0x18b)]),router[a19_0x152ed3(0x192)]('/payout',(0x0,validation_1[a19_0x152ed3(0x1b1)])(validation_1[a19_0x152ed3(0x18d)]),adminController[a19_0x152ed3(0x1a7)]),router[a19_0x152ed3(0x160)](a19_0x152ed3(0x19f),adminController[a19_0x152ed3(0x181)]),router[a19_0x152ed3(0x160)](a19_0x152ed3(0x18f),adminController[a19_0x152ed3(0x178)]),router['delete']('/payouts/:id',adminController[a19_0x152ed3(0x16d)]),router[a19_0x152ed3(0x160)](a19_0x152ed3(0x16f),adminController[a19_0x152ed3(0x173)]),router['get'](a19_0x152ed3(0x157),adminController[a19_0x152ed3(0x14d)]),router[a19_0x152ed3(0x1a4)](a19_0x152ed3(0x157),adminController[a19_0x152ed3(0x14c)]),router[a19_0x152ed3(0x1a4)](a19_0x152ed3(0x15d),(0x0,validation_1[a19_0x152ed3(0x1b1)])(validation_1[a19_0x152ed3(0x159)]),adminController[a19_0x152ed3(0x16c)]),router[a19_0x152ed3(0x160)](a19_0x152ed3(0x170),adminController['getUsers']),router[a19_0x152ed3(0x160)]('/users/:id',adminController['getUserById']),router[a19_0x152ed3(0x192)](a19_0x152ed3(0x170),(0x0,validation_1[a19_0x152ed3(0x1b1)])(validation_1['createUserSchema']),adminController[a19_0x152ed3(0x172)]),router['put'](a19_0x152ed3(0x188),(0x0,validation_1[a19_0x152ed3(0x1b1)])(validation_1[a19_0x152ed3(0x171)]),adminController[a19_0x152ed3(0x148)]),router[a19_0x152ed3(0x177)]('/users/:id',adminController['deleteUser']),router['post'](a19_0x152ed3(0x152),adminController[a19_0x152ed3(0x169)]),router[a19_0x152ed3(0x192)](a19_0x152ed3(0x147),adminController[a19_0x152ed3(0x18c)]),router['get'](a19_0x152ed3(0x191),(_0xceee40,_0x51e140)=>{const _0x255493=a19_0x152ed3;try{const _0x4ce6f4=loggerService_1[_0x255493(0x195)][_0x255493(0x1a2)]();_0x51e140[_0x255493(0x161)]({'success':!![],'result':_0x4ce6f4});}catch(_0x1e830a){_0x51e140[_0x255493(0x1ab)](0x1f4)[_0x255493(0x161)]({'success':![],'message':_0x255493(0x166)});}}),router[a19_0x152ed3(0x192)](a19_0x152ed3(0x180),(_0x25f187,_0x2f98d7)=>{const _0x3c5716=a19_0x152ed3;try{const {daysToKeep:daysToKeep=0x1e}=_0x25f187['body'];loggerService_1['loggerService']['cleanOldLogs'](daysToKeep),_0x2f98d7[_0x3c5716(0x161)]({'success':!![],'message':_0x3c5716(0x199)+daysToKeep+_0x3c5716(0x187)});}catch(_0x3a6a94){_0x2f98d7[_0x3c5716(0x1ab)](0x1f4)['json']({'success':![],'message':_0x3c5716(0x1b3)});}}),router[a19_0x152ed3(0x192)](a19_0x152ed3(0x182),async(_0x5498fa,_0x57bf24)=>{const _0x17d9a4=a19_0x152ed3;try{const {paymentId:_0x8118e4}=_0x5498fa[_0x17d9a4(0x179)];console[_0x17d9a4(0x1ad)](_0x17d9a4(0x14e)+_0x8118e4),await coinToPayStatusService_1[_0x17d9a4(0x18e)][_0x17d9a4(0x162)](_0x8118e4),_0x57bf24['json']({'success':!![],'message':'CoinToPay\x20payment\x20status\x20checked\x20successfully'});}catch(_0x6dbfd2){console[_0x17d9a4(0x1b0)]('❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20'+_0x5498fa[_0x17d9a4(0x179)]['paymentId']+':',_0x6dbfd2),_0x57bf24['status'](0x1f4)[_0x17d9a4(0x161)]({'success':![],'message':_0x6dbfd2 instanceof Error?_0x6dbfd2[_0x17d9a4(0x1ae)]:_0x17d9a4(0x189)});}}),router[a19_0x152ed3(0x160)]('/cointopay/stats',(_0x5258ba,_0x141098)=>{const _0x3a50e5=a19_0x152ed3;try{const _0x147a2a=coinToPayStatusService_1[_0x3a50e5(0x18e)]['getServiceStats']();_0x141098[_0x3a50e5(0x161)]({'success':!![],'result':{..._0x147a2a,'description':_0x3a50e5(0x1aa),'statusMapping':{'Paid':_0x3a50e5(0x150),'Awaiting\x20Fiat':'PENDING','waiting':_0x3a50e5(0x1a0),'expired':'EXPIRED','failed':_0x3a50e5(0x1a9)},'autoExpiryNote':_0x3a50e5(0x151)+_0x147a2a['expiryDays']+'\x20days\x20if\x20not\x20paid','individualTimersNote':'Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly'}});}catch(_0x53c934){_0x141098[_0x3a50e5(0x1ab)](0x1f4)['json']({'success':![],'message':_0x3a50e5(0x19b)});}}),router[a19_0x152ed3(0x160)](a19_0x152ed3(0x15a),async(_0xb78390,_0x2bd2c0)=>{const _0x11f104=a19_0x152ed3;try{const {paymentId:_0x470de8}=_0xb78390[_0x11f104(0x179)],_0x46b33d=coinToPayStatusService_1['coinToPayStatusService'][_0x11f104(0x1a8)](_0x470de8),_0x2e9d70=(await Promise['resolve']()[_0x11f104(0x1a3)](()=>__importStar(require(_0x11f104(0x1a1)))))['default'],_0x211c18=await _0x2e9d70[_0x11f104(0x16e)][_0x11f104(0x1b2)]({'where':{'id':_0x470de8},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x211c18)return _0x2bd2c0[_0x11f104(0x1ab)](0x194)['json']({'success':![],'message':_0x11f104(0x14f)});_0x2bd2c0[_0x11f104(0x161)]({'success':!![],'result':{'payment':{'id':_0x211c18['id'],'gateway':_0x211c18['gateway'],'gatewayPaymentId':_0x211c18[_0x11f104(0x18a)],'status':_0x211c18[_0x11f104(0x1ab)],'amount':_0x211c18[_0x11f104(0x145)],'currency':_0x211c18[_0x11f104(0x19e)],'createdAt':_0x211c18[_0x11f104(0x15c)],'updatedAt':_0x211c18[_0x11f104(0x17e)],'shop':_0x211c18['shop']},'timers':_0x46b33d,'isCoinToPay':_0x211c18['gateway']===_0x11f104(0x16b),'ageInMinutes':Math['floor']((Date[_0x11f104(0x1b6)]()-_0x211c18[_0x11f104(0x15c)][_0x11f104(0x165)]())/(0x3e8*0x3c))}});}catch(_0x127dd7){_0x2bd2c0[_0x11f104(0x1ab)](0x1f4)['json']({'success':![],'message':_0x127dd7 instanceof Error?_0x127dd7[_0x11f104(0x1ae)]:_0x11f104(0x17b)});}}),router[a19_0x152ed3(0x160)](a19_0x152ed3(0x176),(_0x525223,_0x2afe98)=>{const _0x437305=a19_0x152ed3;try{const _0x29fcf3=domainMonitoringService_1[_0x437305(0x19c)]['getMonitoringStats']();_0x2afe98[_0x437305(0x161)]({'success':!![],'result':{..._0x29fcf3,'description':'Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','behavior':'Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','encoding':'Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs'}});}catch(_0xc2659b){_0x2afe98[_0x437305(0x1ab)](0x1f4)['json']({'success':![],'message':'Failed\x20to\x20get\x20domain\x20monitoring\x20statistics'});}}),router['post'](a19_0x152ed3(0x17d),async(_0x158f07,_0xa6b7c2)=>{const _0x16d1a2=a19_0x152ed3;try{const _0x4a6400=await domainMonitoringService_1['domainMonitoringService']['manualCheck']();_0xa6b7c2[_0x16d1a2(0x161)]({'success':!![],'result':{'domainAvailable':_0x4a6400,'message':_0x4a6400?_0x16d1a2(0x1b4):'Domain\x20check\x20failed','timestamp':new Date()['toISOString']()}});}catch(_0x74963){_0xa6b7c2['status'](0x1f4)['json']({'success':![],'message':_0x74963 instanceof Error?_0x74963[_0x16d1a2(0x1ae)]:'Failed\x20to\x20perform\x20manual\x20domain\x20check'});}}),exports[a19_0x152ed3(0x164)]=router;