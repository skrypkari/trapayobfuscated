'use strict';const a18_0x154365=a18_0x4125;(function(_0x5f4e29,_0x2ba1ae){const _0x3db522=a18_0x4125,_0xe37fc8=_0x5f4e29();while(!![]){try{const _0x3b4a91=-parseInt(_0x3db522(0x244))/0x1*(-parseInt(_0x3db522(0x237))/0x2)+parseInt(_0x3db522(0x214))/0x3*(-parseInt(_0x3db522(0x1fe))/0x4)+-parseInt(_0x3db522(0x1e9))/0x5+-parseInt(_0x3db522(0x224))/0x6+parseInt(_0x3db522(0x249))/0x7+-parseInt(_0x3db522(0x1e2))/0x8+parseInt(_0x3db522(0x218))/0x9*(parseInt(_0x3db522(0x1ef))/0xa);if(_0x3b4a91===_0x2ba1ae)break;else _0xe37fc8['push'](_0xe37fc8['shift']());}catch(_0xa453a0){_0xe37fc8['push'](_0xe37fc8['shift']());}}}(a18_0x5d4d,0x9da28));function a18_0x5d4d(){const _0x4bb862=['prototype','createUser','/payout','/payout/stats','currency','loggerService','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','/users','domainMonitoringService','activateUser','EXPIRED','/auth','getMerchantsAwaitingPayout','Failed\x20to\x20get\x20payment\x20information','createdAt','cleanOldLogs','getPayoutStats','deletePayout','102XppYqI','../middleware/auth','toISOString','getMonitoringStats','coinToPayStatusService','getUserById','PAID','/logs/stats','cointopay','checkPaymentById','message','createPayoutSchema','findUnique','9221vNHnrX','Failed\x20to\x20perform\x20manual\x20domain\x20check','Failed\x20to\x20get\x20log\x20statistics','get','CoinToPay\x20payment\x20status\x20checked\x20successfully','6524049jrSnjb','express','defineProperty','post','writable','put','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','suspendUser','gateway','createUserSchema','/cointopay/stats','1298456lCoTIb','/payments','/users/:id','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','shop','__createBinding','../services/loggerService','911590NvzorZ','checkAuth','status','length','/statistics','/users/:id/activate','10HVbhfa','getServiceStats','getLogStats','Domain\x20check\x20failed','json','validate','PENDING','\x20days\x20if\x20not\x20paid','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','__esModule','then','updatedAt','Failed\x20to\x20clean\x20old\x20logs','/payout/merchants','getStatistics','1264LSScle','AdminController','delete','createPayout','params','authenticateToken','/payouts/:id','getTime','/payments/:id','body','paymentId','/logs/clean','configurable','log','getUsers','../services/domainMonitoringService','error','hasOwnProperty','Payment\x20not\x20found','/domain-monitoring/stats','Payments\x20automatically\x20expire\x20after\x20','getMerchantStatistics','7113BVmScy','getPayoutById','/cointopay/check/:paymentId','__importStar','9401121QQKlbj','\x20days)','Domain\x20is\x20responding\x20correctly','now','/users/:id/suspend','floor','default','create','getPaymentById','../controllers/adminController','getOwnPropertyNames','requireAdmin','4243884RhmTqL'];a18_0x5d4d=function(){return _0x4bb862;};return a18_0x5d4d();}var __createBinding=this&&this[a18_0x154365(0x1e7)]||(Object[a18_0x154365(0x21f)]?function(_0x5029e4,_0x2d9289,_0x3c3eb4,_0x46f5d3){const _0xdcbd21=a18_0x154365;if(_0x46f5d3===undefined)_0x46f5d3=_0x3c3eb4;var _0x3fa0aa=Object['getOwnPropertyDescriptor'](_0x2d9289,_0x3c3eb4);(!_0x3fa0aa||(_0xdcbd21(0x247)in _0x3fa0aa?!_0x2d9289[_0xdcbd21(0x1f8)]:_0x3fa0aa[_0xdcbd21(0x24d)]||_0x3fa0aa[_0xdcbd21(0x20a)]))&&(_0x3fa0aa={'enumerable':!![],'get':function(){return _0x2d9289[_0x3c3eb4];}}),Object[_0xdcbd21(0x24b)](_0x5029e4,_0x46f5d3,_0x3fa0aa);}:function(_0x4ffafc,_0x53b8c9,_0x2956ab,_0x4a7380){if(_0x4a7380===undefined)_0x4a7380=_0x2956ab;_0x4ffafc[_0x4a7380]=_0x53b8c9[_0x2956ab];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object['create']?function(_0x38066a,_0x19db4d){const _0x39ac40=a18_0x154365;Object[_0x39ac40(0x24b)](_0x38066a,_0x39ac40(0x21e),{'enumerable':!![],'value':_0x19db4d});}:function(_0x1072c0,_0x5a6109){const _0x2b02d7=a18_0x154365;_0x1072c0[_0x2b02d7(0x21e)]=_0x5a6109;}),__importStar=this&&this[a18_0x154365(0x217)]||(function(){var _0x31cc4e=function(_0x2a0f7b){const _0x2abbe5=a18_0x4125;return _0x31cc4e=Object[_0x2abbe5(0x222)]||function(_0x745152){const _0x3a77ae=_0x2abbe5;var _0x4cd9d1=[];for(var _0x2a4c87 in _0x745152)if(Object[_0x3a77ae(0x225)][_0x3a77ae(0x20f)]['call'](_0x745152,_0x2a4c87))_0x4cd9d1[_0x4cd9d1[_0x3a77ae(0x1ec)]]=_0x2a4c87;return _0x4cd9d1;},_0x31cc4e(_0x2a0f7b);};return function(_0x58838c){const _0x3aa7df=a18_0x4125;if(_0x58838c&&_0x58838c[_0x3aa7df(0x1f8)])return _0x58838c;var _0x551f11={};if(_0x58838c!=null){for(var _0x441b24=_0x31cc4e(_0x58838c),_0xa79644=0x0;_0xa79644<_0x441b24['length'];_0xa79644++)if(_0x441b24[_0xa79644]!==_0x3aa7df(0x21e))__createBinding(_0x551f11,_0x58838c,_0x441b24[_0xa79644]);}return __setModuleDefault(_0x551f11,_0x58838c),_0x551f11;};}());Object[a18_0x154365(0x24b)](exports,a18_0x154365(0x1f8),{'value':!![]});const express_1=require(a18_0x154365(0x24a)),adminController_1=require(a18_0x154365(0x221)),validation_1=require('../middleware/validation'),auth_1=require(a18_0x154365(0x238)),loggerService_1=require(a18_0x154365(0x1e8)),coinToPayStatusService_1=require('../services/coinToPayStatusService'),domainMonitoringService_1=require(a18_0x154365(0x20d)),router=(0x0,express_1['Router'])(),adminController=new adminController_1[(a18_0x154365(0x1ff))]();function a18_0x4125(_0x4c48c3,_0x155f98){const _0x5d4da5=a18_0x5d4d();return a18_0x4125=function(_0x4125d3,_0x2ebda1){_0x4125d3=_0x4125d3-0x1e1;let _0x2eab14=_0x5d4da5[_0x4125d3];return _0x2eab14;},a18_0x4125(_0x4c48c3,_0x155f98);}router['use'](auth_1[a18_0x154365(0x203)],auth_1[a18_0x154365(0x223)]),router[a18_0x154365(0x247)](a18_0x154365(0x230),adminController[a18_0x154365(0x1ea)]),router[a18_0x154365(0x247)](a18_0x154365(0x1ed),adminController[a18_0x154365(0x1fd)]),router['get']('/merchant-statistics',adminController[a18_0x154365(0x213)]),router[a18_0x154365(0x247)](a18_0x154365(0x228),adminController[a18_0x154365(0x235)]),router[a18_0x154365(0x247)](a18_0x154365(0x1fc),adminController[a18_0x154365(0x231)]),router[a18_0x154365(0x24c)](a18_0x154365(0x227),(0x0,validation_1[a18_0x154365(0x1f4)])(validation_1[a18_0x154365(0x242)]),adminController[a18_0x154365(0x201)]),router['get']('/payouts',adminController['getPayouts']),router[a18_0x154365(0x247)](a18_0x154365(0x204),adminController[a18_0x154365(0x215)]),router[a18_0x154365(0x200)]('/payouts/:id',adminController[a18_0x154365(0x236)]),router['get'](a18_0x154365(0x1e3),adminController['getPayments']),router[a18_0x154365(0x247)](a18_0x154365(0x206),adminController[a18_0x154365(0x220)]),router[a18_0x154365(0x24e)]('/payments/:id',adminController['updatePayment']),router[a18_0x154365(0x247)]('/users',adminController[a18_0x154365(0x20c)]),router[a18_0x154365(0x247)](a18_0x154365(0x1e4),adminController[a18_0x154365(0x23c)]),router['post'](a18_0x154365(0x22c),(0x0,validation_1[a18_0x154365(0x1f4)])(validation_1[a18_0x154365(0x252)]),adminController[a18_0x154365(0x226)]),router[a18_0x154365(0x24e)](a18_0x154365(0x1e4),(0x0,validation_1[a18_0x154365(0x1f4)])(validation_1['updateUserSchema']),adminController['updateUser']),router['delete']('/users/:id',adminController['deleteUser']),router['post'](a18_0x154365(0x21c),adminController[a18_0x154365(0x250)]),router['post'](a18_0x154365(0x1ee),adminController[a18_0x154365(0x22e)]),router['get'](a18_0x154365(0x23e),(_0x5171a2,_0xe45fed)=>{const _0x1f2b7f=a18_0x154365;try{const _0x27c294=loggerService_1['loggerService'][_0x1f2b7f(0x1f1)]();_0xe45fed[_0x1f2b7f(0x1f3)]({'success':!![],'result':_0x27c294});}catch(_0x35560b){_0xe45fed['status'](0x1f4)[_0x1f2b7f(0x1f3)]({'success':![],'message':_0x1f2b7f(0x246)});}}),router[a18_0x154365(0x24c)](a18_0x154365(0x209),(_0xfb9d97,_0x497a87)=>{const _0x192f8e=a18_0x154365;try{const {daysToKeep:daysToKeep=0x1e}=_0xfb9d97[_0x192f8e(0x207)];loggerService_1[_0x192f8e(0x22a)][_0x192f8e(0x234)](daysToKeep),_0x497a87[_0x192f8e(0x1f3)]({'success':!![],'message':'Old\x20logs\x20cleaned\x20(kept\x20last\x20'+daysToKeep+_0x192f8e(0x219)});}catch(_0x3cadc7){_0x497a87['status'](0x1f4)['json']({'success':![],'message':_0x192f8e(0x1fb)});}}),router['post'](a18_0x154365(0x216),async(_0x146148,_0x4218ad)=>{const _0x422e2f=a18_0x154365;try{const {paymentId:_0x162104}=_0x146148[_0x422e2f(0x202)];console[_0x422e2f(0x20b)]('ðŸ”\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20'+_0x162104),await coinToPayStatusService_1[_0x422e2f(0x23b)][_0x422e2f(0x240)](_0x162104),_0x4218ad[_0x422e2f(0x1f3)]({'success':!![],'message':_0x422e2f(0x248)});}catch(_0x6adb24){console[_0x422e2f(0x20e)]('âŒ\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20'+_0x146148[_0x422e2f(0x202)][_0x422e2f(0x208)]+':',_0x6adb24),_0x4218ad[_0x422e2f(0x1eb)](0x1f4)[_0x422e2f(0x1f3)]({'success':![],'message':_0x6adb24 instanceof Error?_0x6adb24['message']:'Failed\x20to\x20check\x20CoinToPay\x20payment\x20status'});}}),router[a18_0x154365(0x247)](a18_0x154365(0x1e1),(_0x378ee5,_0x126d50)=>{const _0x326e1a=a18_0x154365;try{const _0x4d1749=coinToPayStatusService_1[_0x326e1a(0x23b)][_0x326e1a(0x1f0)]();_0x126d50[_0x326e1a(0x1f3)]({'success':!![],'result':{..._0x4d1749,'description':'CoinToPay\x20automatic\x20status\x20checking\x20service','statusMapping':{'Paid':_0x326e1a(0x23d),'Awaiting\x20Fiat':'PENDING','waiting':_0x326e1a(0x1f5),'expired':_0x326e1a(0x22f),'failed':'FAILED'},'autoExpiryNote':_0x326e1a(0x212)+_0x4d1749['expiryDays']+_0x326e1a(0x1f6),'individualTimersNote':'Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly'}});}catch(_0x14d9d1){_0x126d50['status'](0x1f4)['json']({'success':![],'message':'Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics'});}}),router[a18_0x154365(0x247)]('/cointopay/payment/:paymentId',async(_0x985251,_0x4ec1f5)=>{const _0x58a126=a18_0x154365;try{const {paymentId:_0x34cd33}=_0x985251[_0x58a126(0x202)],_0x2d9586=coinToPayStatusService_1['coinToPayStatusService']['getPaymentTimerInfo'](_0x34cd33),_0x1db50c=(await Promise['resolve']()[_0x58a126(0x1f9)](()=>__importStar(require('../config/database'))))[_0x58a126(0x21e)],_0x76ad15=await _0x1db50c['payment'][_0x58a126(0x243)]({'where':{'id':_0x34cd33},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x76ad15)return _0x4ec1f5[_0x58a126(0x1eb)](0x194)[_0x58a126(0x1f3)]({'success':![],'message':_0x58a126(0x210)});_0x4ec1f5[_0x58a126(0x1f3)]({'success':!![],'result':{'payment':{'id':_0x76ad15['id'],'gateway':_0x76ad15[_0x58a126(0x251)],'gatewayPaymentId':_0x76ad15['gatewayPaymentId'],'status':_0x76ad15['status'],'amount':_0x76ad15['amount'],'currency':_0x76ad15[_0x58a126(0x229)],'createdAt':_0x76ad15[_0x58a126(0x233)],'updatedAt':_0x76ad15[_0x58a126(0x1fa)],'shop':_0x76ad15[_0x58a126(0x1e6)]},'timers':_0x2d9586,'isCoinToPay':_0x76ad15[_0x58a126(0x251)]===_0x58a126(0x23f),'ageInMinutes':Math[_0x58a126(0x21d)]((Date[_0x58a126(0x21b)]()-_0x76ad15[_0x58a126(0x233)][_0x58a126(0x205)]())/(0x3e8*0x3c))}});}catch(_0x647623){_0x4ec1f5[_0x58a126(0x1eb)](0x1f4)[_0x58a126(0x1f3)]({'success':![],'message':_0x647623 instanceof Error?_0x647623['message']:_0x58a126(0x232)});}}),router['get'](a18_0x154365(0x211),(_0x4ad9be,_0x19d7c2)=>{const _0x845d66=a18_0x154365;try{const _0x43669f=domainMonitoringService_1[_0x845d66(0x22d)][_0x845d66(0x23a)]();_0x19d7c2[_0x845d66(0x1f3)]({'success':!![],'result':{..._0x43669f,'description':_0x845d66(0x1e5),'behavior':_0x845d66(0x22b),'encoding':_0x845d66(0x24f)}});}catch(_0x14feb7){_0x19d7c2['status'](0x1f4)[_0x845d66(0x1f3)]({'success':![],'message':_0x845d66(0x1f7)});}}),router[a18_0x154365(0x24c)]('/domain-monitoring/check',async(_0x463990,_0x19ce66)=>{const _0xf3515=a18_0x154365;try{const _0x34dfc4=await domainMonitoringService_1['domainMonitoringService']['manualCheck']();_0x19ce66[_0xf3515(0x1f3)]({'success':!![],'result':{'domainAvailable':_0x34dfc4,'message':_0x34dfc4?_0xf3515(0x21a):_0xf3515(0x1f2),'timestamp':new Date()[_0xf3515(0x239)]()}});}catch(_0x44d626){_0x19ce66['status'](0x1f4)['json']({'success':![],'message':_0x44d626 instanceof Error?_0x44d626[_0xf3515(0x241)]:_0xf3515(0x245)});}}),exports[a18_0x154365(0x21e)]=router;