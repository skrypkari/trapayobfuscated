'use strict';function a24_0x1b8c(){const _0x1ebfc1=['/payments','PENDING','/payouts/:id','/payments/processing-stats','Domain\x20is\x20responding\x20correctly','writable','6PrSGxz','Domain\x20check\x20failed','../services/domainMonitoringService','1636735ukCKxN','/logs/stats','createUserSchema','prototype','/payments/cleanup-with-report','/users','getPayments','body','/payout/merchants','suspendUser','configurable','message','getStatistics','defineProperty','getServiceStats','/payments/:id','1742178QkLzjg','currency','/payout','params','checkPaymentById','loggerService','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','getUsers','getLogStats','../middleware/validation','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','63450QBYXcV','checkAuth','cleanOldLogs','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','getMerchantStatistics','570516nZJLsq','getMonitoringStats','payment','call','validate','/users/:id','deletePayout','/payments/cleanup-pending','../config/database','Old\x20logs\x20cleaned\x20(kept\x20last\x20','put','Payment\x20not\x20found','updatedAt','hasOwnProperty','PAID','__setModuleDefault','__esModule','/payout/stats','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','cleanupStalePayments','floor','/auth','activateUser','/cointopay/stats','status','../services/coinToPayStatusService','resolve','__importStar','/users/:id/suspend','cointopay','Failed\x20to\x20perform\x20manual\x20domain\x20check','then','coinToPayStatusService','use','updateCustomerDataSchema','Router','Failed\x20to\x20get\x20log\x20statistics','requireAdmin','__createBinding','../services/loggerService','manualCheck','expiryDays','Failed\x20to\x20get\x20payment\x20information','/payments/cleanup','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','delete','cleanupStalePendingPayments','getOwnPropertyNames','3359265cAdUwE','CoinToPay\x20payment\x20status\x20checked\x20successfully','authenticateToken','createPayout','json','getProcessingPaymentsStats','default','domainMonitoringService','post','create','CoinToPay\x20automatic\x20status\x20checking\x20service','/merchants/selection','getMerchantsSelection','\x20days\x20if\x20not\x20paid','express','get','gatewayPaymentId','toISOString','getPayoutStats','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','amount','getOwnPropertyDescriptor','updateUser','AdminController','/payouts','/users/:id/activate','/statistics','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','../controllers/adminController','3479432sZhiRl','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','/cointopay/payment/:paymentId','getPayoutById','/payments/:id/customer','\x20days)','getUserById','/cointopay/check/:paymentId','665094oknckm'];a24_0x1b8c=function(){return _0x1ebfc1;};return a24_0x1b8c();}const a24_0x3f4654=a24_0x3f69;(function(_0x9a6242,_0x3893a5){const _0xd271da=a24_0x3f69,_0x54fa46=_0x9a6242();while(!![]){try{const _0x70e05e=parseInt(_0xd271da(0x14b))/0x1+parseInt(_0xd271da(0x170))/0x2+-parseInt(_0xd271da(0x165))/0x3+-parseInt(_0xd271da(0x175))/0x4+parseInt(_0xd271da(0x155))/0x5*(parseInt(_0xd271da(0x152))/0x6)+parseInt(_0xd271da(0x126))/0x7+-parseInt(_0xd271da(0x143))/0x8;if(_0x70e05e===_0x3893a5)break;else _0x54fa46['push'](_0x54fa46['shift']());}catch(_0x6f29a0){_0x54fa46['push'](_0x54fa46['shift']());}}}(a24_0x1b8c,0x546b1));function a24_0x3f69(_0x5056da,_0x4565ea){_0x5056da=_0x5056da-0x109;const _0x1b8c48=a24_0x1b8c();let _0x3f69b1=_0x1b8c48[_0x5056da];return _0x3f69b1;}var __createBinding=this&&this[a24_0x3f4654(0x11c)]||(Object[a24_0x3f4654(0x12f)]?function(_0x29a927,_0x17574c,_0x5f3a5d,_0x1ac93f){const _0x1bd8d5=a24_0x3f4654;if(_0x1ac93f===undefined)_0x1ac93f=_0x5f3a5d;var _0x3f3ad3=Object[_0x1bd8d5(0x13b)](_0x17574c,_0x5f3a5d);(!_0x3f3ad3||(_0x1bd8d5(0x135)in _0x3f3ad3?!_0x17574c['__esModule']:_0x3f3ad3[_0x1bd8d5(0x151)]||_0x3f3ad3[_0x1bd8d5(0x15f)]))&&(_0x3f3ad3={'enumerable':!![],'get':function(){return _0x17574c[_0x5f3a5d];}}),Object[_0x1bd8d5(0x162)](_0x29a927,_0x1ac93f,_0x3f3ad3);}:function(_0x1e7938,_0xe8d336,_0x6cc01e,_0x47a593){if(_0x47a593===undefined)_0x47a593=_0x6cc01e;_0x1e7938[_0x47a593]=_0xe8d336[_0x6cc01e];}),__setModuleDefault=this&&this[a24_0x3f4654(0x184)]||(Object[a24_0x3f4654(0x12f)]?function(_0x22829f,_0x42b093){const _0x3baa2e=a24_0x3f4654;Object[_0x3baa2e(0x162)](_0x22829f,_0x3baa2e(0x12c),{'enumerable':!![],'value':_0x42b093});}:function(_0x365b83,_0x491a45){const _0x403d37=a24_0x3f4654;_0x365b83[_0x403d37(0x12c)]=_0x491a45;}),__importStar=this&&this[a24_0x3f4654(0x111)]||(function(){var _0x4f6ec9=function(_0x22e378){const _0x3bba22=a24_0x3f69;return _0x4f6ec9=Object[_0x3bba22(0x125)]||function(_0x1a135c){const _0x4c00a4=_0x3bba22;var _0x1e2ef9=[];for(var _0x2f067b in _0x1a135c)if(Object[_0x4c00a4(0x158)][_0x4c00a4(0x182)][_0x4c00a4(0x178)](_0x1a135c,_0x2f067b))_0x1e2ef9[_0x1e2ef9['length']]=_0x2f067b;return _0x1e2ef9;},_0x4f6ec9(_0x22e378);};return function(_0x37374c){const _0x8a404b=a24_0x3f69;if(_0x37374c&&_0x37374c[_0x8a404b(0x185)])return _0x37374c;var _0x1705c={};if(_0x37374c!=null){for(var _0x54bf6d=_0x4f6ec9(_0x37374c),_0x32a0a8=0x0;_0x32a0a8<_0x54bf6d['length'];_0x32a0a8++)if(_0x54bf6d[_0x32a0a8]!=='default')__createBinding(_0x1705c,_0x37374c,_0x54bf6d[_0x32a0a8]);}return __setModuleDefault(_0x1705c,_0x37374c),_0x1705c;};}());Object[a24_0x3f4654(0x162)](exports,a24_0x3f4654(0x185),{'value':!![]});const express_1=require(a24_0x3f4654(0x134)),adminController_1=require(a24_0x3f4654(0x142)),validation_1=require(a24_0x3f4654(0x16e)),auth_1=require('../middleware/auth'),loggerService_1=require(a24_0x3f4654(0x11d)),coinToPayStatusService_1=require(a24_0x3f4654(0x10f)),domainMonitoringService_1=require(a24_0x3f4654(0x154)),router=(0x0,express_1[a24_0x3f4654(0x119)])(),adminController=new adminController_1[(a24_0x3f4654(0x13d))]();router[a24_0x3f4654(0x117)](auth_1[a24_0x3f4654(0x128)],auth_1[a24_0x3f4654(0x11b)]),router[a24_0x3f4654(0x135)](a24_0x3f4654(0x10b),adminController[a24_0x3f4654(0x171)]),router['get'](a24_0x3f4654(0x140),adminController[a24_0x3f4654(0x161)]),router[a24_0x3f4654(0x135)]('/merchant-statistics',adminController[a24_0x3f4654(0x174)]),router[a24_0x3f4654(0x135)](a24_0x3f4654(0x186),adminController[a24_0x3f4654(0x138)]),router['get'](a24_0x3f4654(0x15d),adminController['getMerchantsAwaitingPayout']),router[a24_0x3f4654(0x135)](a24_0x3f4654(0x131),adminController[a24_0x3f4654(0x132)]),router['post'](a24_0x3f4654(0x167),(0x0,validation_1[a24_0x3f4654(0x179)])(validation_1['createPayoutSchema']),adminController[a24_0x3f4654(0x129)]),router[a24_0x3f4654(0x135)](a24_0x3f4654(0x13e),adminController['getPayouts']),router['get']('/payouts/:id',adminController[a24_0x3f4654(0x146)]),router['delete'](a24_0x3f4654(0x14e),adminController[a24_0x3f4654(0x17b)]),router[a24_0x3f4654(0x135)](a24_0x3f4654(0x14c),adminController[a24_0x3f4654(0x15b)]),router[a24_0x3f4654(0x135)](a24_0x3f4654(0x164),adminController['getPaymentById']),router[a24_0x3f4654(0x17f)](a24_0x3f4654(0x164),adminController['updatePayment']),router['put'](a24_0x3f4654(0x147),(0x0,validation_1['validate'])(validation_1[a24_0x3f4654(0x118)]),adminController['updateCustomerData']),router[a24_0x3f4654(0x135)](a24_0x3f4654(0x14f),adminController[a24_0x3f4654(0x12b)]),router[a24_0x3f4654(0x12e)](a24_0x3f4654(0x121),adminController[a24_0x3f4654(0x109)]),router[a24_0x3f4654(0x12e)](a24_0x3f4654(0x17c),adminController[a24_0x3f4654(0x124)]),router[a24_0x3f4654(0x12e)](a24_0x3f4654(0x159),adminController['cleanupStalePaymentsWithReport']),router[a24_0x3f4654(0x135)](a24_0x3f4654(0x15a),adminController[a24_0x3f4654(0x16c)]),router[a24_0x3f4654(0x135)]('/users/:id',adminController[a24_0x3f4654(0x149)]),router[a24_0x3f4654(0x12e)](a24_0x3f4654(0x15a),(0x0,validation_1['validate'])(validation_1[a24_0x3f4654(0x157)]),adminController['createUser']),router[a24_0x3f4654(0x17f)](a24_0x3f4654(0x17a),(0x0,validation_1[a24_0x3f4654(0x179)])(validation_1['updateUserSchema']),adminController[a24_0x3f4654(0x13c)]),router[a24_0x3f4654(0x123)]('/users/:id',adminController['deleteUser']),router['post'](a24_0x3f4654(0x112),adminController[a24_0x3f4654(0x15e)]),router[a24_0x3f4654(0x12e)](a24_0x3f4654(0x13f),adminController[a24_0x3f4654(0x10c)]),router[a24_0x3f4654(0x135)](a24_0x3f4654(0x156),(_0x4aaece,_0x340c0c)=>{const _0x42a10b=a24_0x3f4654;try{const _0x343c2f=loggerService_1[_0x42a10b(0x16a)][_0x42a10b(0x16d)]();_0x340c0c[_0x42a10b(0x12a)]({'success':!![],'result':_0x343c2f});}catch(_0x318854){_0x340c0c[_0x42a10b(0x10e)](0x1f4)[_0x42a10b(0x12a)]({'success':![],'message':_0x42a10b(0x11a)});}}),router[a24_0x3f4654(0x12e)]('/logs/clean',(_0x1e5cd2,_0x4e7f57)=>{const _0x5ae639=a24_0x3f4654;try{const {daysToKeep:daysToKeep=0x1e}=_0x1e5cd2[_0x5ae639(0x15c)];loggerService_1[_0x5ae639(0x16a)][_0x5ae639(0x172)](daysToKeep),_0x4e7f57[_0x5ae639(0x12a)]({'success':!![],'message':_0x5ae639(0x17e)+daysToKeep+_0x5ae639(0x148)});}catch(_0x9d5986){_0x4e7f57['status'](0x1f4)[_0x5ae639(0x12a)]({'success':![],'message':'Failed\x20to\x20clean\x20old\x20logs'});}}),router['post'](a24_0x3f4654(0x14a),async(_0x1427d3,_0x19ecfb)=>{const _0x76fe71=a24_0x3f4654;try{const {paymentId:_0xb3a678}=_0x1427d3[_0x76fe71(0x168)];console['log'](_0x76fe71(0x16b)+_0xb3a678),await coinToPayStatusService_1['coinToPayStatusService'][_0x76fe71(0x169)](_0xb3a678),_0x19ecfb[_0x76fe71(0x12a)]({'success':!![],'message':_0x76fe71(0x127)});}catch(_0x21f888){console['error']('‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20'+_0x1427d3['params']['paymentId']+':',_0x21f888),_0x19ecfb[_0x76fe71(0x10e)](0x1f4)['json']({'success':![],'message':_0x21f888 instanceof Error?_0x21f888[_0x76fe71(0x160)]:_0x76fe71(0x187)});}}),router[a24_0x3f4654(0x135)](a24_0x3f4654(0x10d),(_0x209a73,_0x39c42c)=>{const _0x2e5463=a24_0x3f4654;try{const _0x5523ed=coinToPayStatusService_1['coinToPayStatusService'][_0x2e5463(0x163)]();_0x39c42c[_0x2e5463(0x12a)]({'success':!![],'result':{..._0x5523ed,'description':_0x2e5463(0x130),'statusMapping':{'Paid':_0x2e5463(0x183),'Awaiting\x20Fiat':_0x2e5463(0x14d),'waiting':'PENDING','expired':'EXPIRED','failed':'FAILED'},'autoExpiryNote':'Payments\x20automatically\x20expire\x20after\x20'+_0x5523ed[_0x2e5463(0x11f)]+_0x2e5463(0x133),'individualTimersNote':_0x2e5463(0x141)}});}catch(_0x38b34b){_0x39c42c['status'](0x1f4)[_0x2e5463(0x12a)]({'success':![],'message':_0x2e5463(0x16f)});}}),router[a24_0x3f4654(0x135)](a24_0x3f4654(0x145),async(_0x388ed2,_0x37baeb)=>{const _0x31e34d=a24_0x3f4654;try{const {paymentId:_0x5ea76d}=_0x388ed2[_0x31e34d(0x168)],_0x107e96=coinToPayStatusService_1[_0x31e34d(0x116)]['getPaymentTimerInfo'](_0x5ea76d),_0x1868c7=(await Promise[_0x31e34d(0x110)]()[_0x31e34d(0x115)](()=>__importStar(require(_0x31e34d(0x17d)))))[_0x31e34d(0x12c)],_0x43ea95=await _0x1868c7[_0x31e34d(0x177)]['findUnique']({'where':{'id':_0x5ea76d},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x43ea95)return _0x37baeb[_0x31e34d(0x10e)](0x194)[_0x31e34d(0x12a)]({'success':![],'message':_0x31e34d(0x180)});_0x37baeb[_0x31e34d(0x12a)]({'success':!![],'result':{'payment':{'id':_0x43ea95['id'],'gateway':_0x43ea95['gateway'],'gatewayPaymentId':_0x43ea95[_0x31e34d(0x136)],'status':_0x43ea95[_0x31e34d(0x10e)],'amount':_0x43ea95[_0x31e34d(0x13a)],'currency':_0x43ea95[_0x31e34d(0x166)],'createdAt':_0x43ea95['createdAt'],'updatedAt':_0x43ea95[_0x31e34d(0x181)],'shop':_0x43ea95['shop']},'timers':_0x107e96,'isCoinToPay':_0x43ea95['gateway']===_0x31e34d(0x113),'ageInMinutes':Math[_0x31e34d(0x10a)]((Date['now']()-_0x43ea95['createdAt']['getTime']())/(0x3e8*0x3c))}});}catch(_0x1bb871){_0x37baeb[_0x31e34d(0x10e)](0x1f4)[_0x31e34d(0x12a)]({'success':![],'message':_0x1bb871 instanceof Error?_0x1bb871[_0x31e34d(0x160)]:_0x31e34d(0x120)});}}),router['get']('/domain-monitoring/stats',(_0x217d75,_0x390c64)=>{const _0x5a5de5=a24_0x3f4654;try{const _0x495299=domainMonitoringService_1[_0x5a5de5(0x12d)][_0x5a5de5(0x176)]();_0x390c64[_0x5a5de5(0x12a)]({'success':!![],'result':{..._0x495299,'description':_0x5a5de5(0x122),'behavior':_0x5a5de5(0x144),'encoding':_0x5a5de5(0x139)}});}catch(_0x1a6f3d){_0x390c64[_0x5a5de5(0x10e)](0x1f4)[_0x5a5de5(0x12a)]({'success':![],'message':_0x5a5de5(0x173)});}}),router[a24_0x3f4654(0x12e)]('/domain-monitoring/check',async(_0x16de5d,_0x51ad9a)=>{const _0x14a50d=a24_0x3f4654;try{const _0x3c252a=await domainMonitoringService_1[_0x14a50d(0x12d)][_0x14a50d(0x11e)]();_0x51ad9a['json']({'success':!![],'result':{'domainAvailable':_0x3c252a,'message':_0x3c252a?_0x14a50d(0x150):_0x14a50d(0x153),'timestamp':new Date()[_0x14a50d(0x137)]()}});}catch(_0x41f085){_0x51ad9a[_0x14a50d(0x10e)](0x1f4)[_0x14a50d(0x12a)]({'success':![],'message':_0x41f085 instanceof Error?_0x41f085['message']:_0x14a50d(0x114)});}}),exports[a24_0x3f4654(0x12c)]=router;