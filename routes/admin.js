'use strict';const a19_0x1c4303=a19_0x4719;(function(_0x33f0e6,_0x575f1b){const _0x32f17e=a19_0x4719,_0x2510e6=_0x33f0e6();while(!![]){try{const _0x213405=-parseInt(_0x32f17e(0x96))/0x1+parseInt(_0x32f17e(0x99))/0x2*(-parseInt(_0x32f17e(0xe2))/0x3)+-parseInt(_0x32f17e(0xc6))/0x4+-parseInt(_0x32f17e(0xcd))/0x5+-parseInt(_0x32f17e(0xec))/0x6*(-parseInt(_0x32f17e(0x83))/0x7)+parseInt(_0x32f17e(0xb6))/0x8*(-parseInt(_0x32f17e(0xc2))/0x9)+-parseInt(_0x32f17e(0xa4))/0xa*(-parseInt(_0x32f17e(0xae))/0xb);if(_0x213405===_0x575f1b)break;else _0x2510e6['push'](_0x2510e6['shift']());}catch(_0x942c5d){_0x2510e6['push'](_0x2510e6['shift']());}}}(a19_0x1775,0x4203e));var __createBinding=this&&this['__createBinding']||(Object[a19_0x1c4303(0xad)]?function(_0x36a021,_0xe06b14,_0x19c4ee,_0x350af2){const _0x2b5674=a19_0x1c4303;if(_0x350af2===undefined)_0x350af2=_0x19c4ee;var _0x1dc0cf=Object[_0x2b5674(0xa0)](_0xe06b14,_0x19c4ee);(!_0x1dc0cf||(_0x2b5674(0xa1)in _0x1dc0cf?!_0xe06b14[_0x2b5674(0xdd)]:_0x1dc0cf[_0x2b5674(0xcf)]||_0x1dc0cf[_0x2b5674(0xe9)]))&&(_0x1dc0cf={'enumerable':!![],'get':function(){return _0xe06b14[_0x19c4ee];}}),Object['defineProperty'](_0x36a021,_0x350af2,_0x1dc0cf);}:function(_0x1450ca,_0x3821b7,_0x2cc3d3,_0x141783){if(_0x141783===undefined)_0x141783=_0x2cc3d3;_0x1450ca[_0x141783]=_0x3821b7[_0x2cc3d3];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a19_0x1c4303(0xad)]?function(_0x52ad7e,_0x32ab3d){const _0x426056=a19_0x1c4303;Object[_0x426056(0xc3)](_0x52ad7e,_0x426056(0xf0),{'enumerable':!![],'value':_0x32ab3d});}:function(_0x556c7f,_0x53cc8e){const _0x5e9618=a19_0x1c4303;_0x556c7f[_0x5e9618(0xf0)]=_0x53cc8e;}),__importStar=this&&this['__importStar']||(function(){var _0x55aeeb=function(_0x8d7f91){const _0x4ae872=a19_0x4719;return _0x55aeeb=Object[_0x4ae872(0x85)]||function(_0x527fe9){const _0x59f055=_0x4ae872;var _0x1c0d13=[];for(var _0x39f6f9 in _0x527fe9)if(Object[_0x59f055(0x9d)]['hasOwnProperty']['call'](_0x527fe9,_0x39f6f9))_0x1c0d13[_0x1c0d13[_0x59f055(0xa6)]]=_0x39f6f9;return _0x1c0d13;},_0x55aeeb(_0x8d7f91);};return function(_0x2d54e1){const _0xe8b865=a19_0x4719;if(_0x2d54e1&&_0x2d54e1[_0xe8b865(0xdd)])return _0x2d54e1;var _0xd011a2={};if(_0x2d54e1!=null){for(var _0x495541=_0x55aeeb(_0x2d54e1),_0x45291a=0x0;_0x45291a<_0x495541[_0xe8b865(0xa6)];_0x45291a++)if(_0x495541[_0x45291a]!==_0xe8b865(0xf0))__createBinding(_0xd011a2,_0x2d54e1,_0x495541[_0x45291a]);}return __setModuleDefault(_0xd011a2,_0x2d54e1),_0xd011a2;};}());function a19_0x4719(_0x3ea0f8,_0x3d1bc2){const _0x1775f8=a19_0x1775();return a19_0x4719=function(_0x4719a7,_0xaf3217){_0x4719a7=_0x4719a7-0x7e;let _0x5507af=_0x1775f8[_0x4719a7];return _0x5507af;},a19_0x4719(_0x3ea0f8,_0x3d1bc2);}function a19_0x1775(){const _0x51717b=['/statistics','116962SkBAgY','deletePayout','log','checkAuth','prototype','Failed\x20to\x20clean\x20old\x20logs','body','getOwnPropertyDescriptor','get','CoinToPay\x20automatic\x20status\x20checking\x20service','../services/domainMonitoringService','14084880bwGzNU','getPayoutById','length','/payments/:id','toISOString','currency','getUsers','/merchant-statistics','/cointopay/payment/:paymentId','create','11pNnVAN','/payout/merchants','expiryDays','json','gateway','getServiceStats','/logs/clean','/logs/stats','662984RAuHFP','updatedAt','getTime','/payments','domainMonitoringService','/users/:id/suspend','delete','FAILED','checkPaymentById','../services/loggerService','🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','Payments\x20automatically\x20expire\x20after\x20','18rsrxdd','defineProperty','manualCheck','PAID','1082120mWqsFW','createPayoutSchema','updatePayment','put','/users','getMonitoringStats','paymentId','496100XQcokp','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','writable','getMerchantsSelection','activateUser','loggerService','getUserById','../config/database','/cointopay/stats','CoinToPay\x20payment\x20status\x20checked\x20successfully','deleteUser','getMerchantStatistics','payment','createUserSchema','EXPIRED','suspendUser','__esModule','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','AdminController','/payout/stats','Failed\x20to\x20perform\x20manual\x20domain\x20check','9UZiyek','getPayoutStats','Failed\x20to\x20get\x20payment\x20information','/payout','gatewayPaymentId','use','PENDING','configurable','Payment\x20not\x20found','requireAdmin','6wFPwiz','/payouts/:id','amount','Failed\x20to\x20get\x20log\x20statistics','default','resolve','/users/:id','getPaymentById','now','../services/coinToPayStatusService','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','/auth','validate','coinToPayStatusService','getPaymentTimerInfo','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','post','520639fqOliq','then','getOwnPropertyNames','getPayouts','updateCustomerData','getPayments','getMerchantsAwaitingPayout','updateCustomerDataSchema','/cointopay/check/:paymentId','updateUserSchema','cointopay','status','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','/users/:id/activate','findUnique','shop','message','updateUser','/payouts','501528GOOZsb','floor'];a19_0x1775=function(){return _0x51717b;};return a19_0x1775();}Object['defineProperty'](exports,a19_0x1c4303(0xdd),{'value':!![]});const express_1=require('express'),adminController_1=require('../controllers/adminController'),validation_1=require('../middleware/validation'),auth_1=require('../middleware/auth'),loggerService_1=require(a19_0x1c4303(0xbf)),coinToPayStatusService_1=require(a19_0x1c4303(0xf5)),domainMonitoringService_1=require(a19_0x1c4303(0xa3)),router=(0x0,express_1['Router'])(),adminController=new adminController_1[(a19_0x1c4303(0xdf))]();router[a19_0x1c4303(0xe7)](auth_1['authenticateToken'],auth_1[a19_0x1c4303(0xeb)]),router[a19_0x1c4303(0xa1)](a19_0x1c4303(0xf7),adminController[a19_0x1c4303(0x9c)]),router[a19_0x1c4303(0xa1)](a19_0x1c4303(0x98),adminController['getStatistics']),router[a19_0x1c4303(0xa1)](a19_0x1c4303(0xab),adminController[a19_0x1c4303(0xd8)]),router[a19_0x1c4303(0xa1)](a19_0x1c4303(0xe0),adminController[a19_0x1c4303(0xe3)]),router[a19_0x1c4303(0xa1)](a19_0x1c4303(0xaf),adminController[a19_0x1c4303(0x89)]),router['get']('/merchants/selection',adminController[a19_0x1c4303(0xd0)]),router['post'](a19_0x1c4303(0xe5),(0x0,validation_1[a19_0x1c4303(0x7e)])(validation_1[a19_0x1c4303(0xc7)]),adminController['createPayout']),router[a19_0x1c4303(0xa1)](a19_0x1c4303(0x95),adminController[a19_0x1c4303(0x86)]),router[a19_0x1c4303(0xa1)](a19_0x1c4303(0xed),adminController[a19_0x1c4303(0xa5)]),router[a19_0x1c4303(0xbc)](a19_0x1c4303(0xed),adminController[a19_0x1c4303(0x9a)]),router['get'](a19_0x1c4303(0xb9),adminController[a19_0x1c4303(0x88)]),router[a19_0x1c4303(0xa1)](a19_0x1c4303(0xa7),adminController[a19_0x1c4303(0xf3)]),router[a19_0x1c4303(0xc9)](a19_0x1c4303(0xa7),adminController[a19_0x1c4303(0xc8)]),router['put']('/payments/:id/customer',(0x0,validation_1[a19_0x1c4303(0x7e)])(validation_1[a19_0x1c4303(0x8a)]),adminController[a19_0x1c4303(0x87)]),router[a19_0x1c4303(0xa1)](a19_0x1c4303(0xca),adminController[a19_0x1c4303(0xaa)]),router[a19_0x1c4303(0xa1)](a19_0x1c4303(0xf2),adminController[a19_0x1c4303(0xd3)]),router[a19_0x1c4303(0x82)](a19_0x1c4303(0xca),(0x0,validation_1['validate'])(validation_1[a19_0x1c4303(0xda)]),adminController['createUser']),router['put']('/users/:id',(0x0,validation_1[a19_0x1c4303(0x7e)])(validation_1[a19_0x1c4303(0x8c)]),adminController[a19_0x1c4303(0x94)]),router['delete']('/users/:id',adminController[a19_0x1c4303(0xd7)]),router[a19_0x1c4303(0x82)](a19_0x1c4303(0xbb),adminController[a19_0x1c4303(0xdc)]),router[a19_0x1c4303(0x82)](a19_0x1c4303(0x90),adminController[a19_0x1c4303(0xd1)]),router['get'](a19_0x1c4303(0xb5),(_0x2b56b2,_0x59c4ba)=>{const _0x399d1e=a19_0x1c4303;try{const _0x468f8d=loggerService_1[_0x399d1e(0xd2)]['getLogStats']();_0x59c4ba['json']({'success':!![],'result':_0x468f8d});}catch(_0x4d96b5){_0x59c4ba[_0x399d1e(0x8e)](0x1f4)[_0x399d1e(0xb1)]({'success':![],'message':_0x399d1e(0xef)});}}),router[a19_0x1c4303(0x82)](a19_0x1c4303(0xb4),(_0x1cbb46,_0x4a797e)=>{const _0x377f4f=a19_0x1c4303;try{const {daysToKeep:daysToKeep=0x1e}=_0x1cbb46[_0x377f4f(0x9f)];loggerService_1[_0x377f4f(0xd2)]['cleanOldLogs'](daysToKeep),_0x4a797e[_0x377f4f(0xb1)]({'success':!![],'message':'Old\x20logs\x20cleaned\x20(kept\x20last\x20'+daysToKeep+'\x20days)'});}catch(_0x114822){_0x4a797e[_0x377f4f(0x8e)](0x1f4)[_0x377f4f(0xb1)]({'success':![],'message':_0x377f4f(0x9e)});}}),router[a19_0x1c4303(0x82)](a19_0x1c4303(0x8b),async(_0x503fed,_0x1809ac)=>{const _0x4dc9aa=a19_0x1c4303;try{const {paymentId:_0x35eba6}=_0x503fed['params'];console[_0x4dc9aa(0x9b)](_0x4dc9aa(0xc0)+_0x35eba6),await coinToPayStatusService_1[_0x4dc9aa(0x7f)][_0x4dc9aa(0xbe)](_0x35eba6),_0x1809ac[_0x4dc9aa(0xb1)]({'success':!![],'message':_0x4dc9aa(0xd6)});}catch(_0x498b98){console['error']('❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20'+_0x503fed['params'][_0x4dc9aa(0xcc)]+':',_0x498b98),_0x1809ac[_0x4dc9aa(0x8e)](0x1f4)['json']({'success':![],'message':_0x498b98 instanceof Error?_0x498b98['message']:_0x4dc9aa(0xde)});}}),router[a19_0x1c4303(0xa1)](a19_0x1c4303(0xd5),(_0x58882c,_0x11940c)=>{const _0x5aa2e6=a19_0x1c4303;try{const _0x2740f4=coinToPayStatusService_1[_0x5aa2e6(0x7f)][_0x5aa2e6(0xb3)]();_0x11940c[_0x5aa2e6(0xb1)]({'success':!![],'result':{..._0x2740f4,'description':_0x5aa2e6(0xa2),'statusMapping':{'Paid':_0x5aa2e6(0xc5),'Awaiting\x20Fiat':'PENDING','waiting':_0x5aa2e6(0xe8),'expired':_0x5aa2e6(0xdb),'failed':_0x5aa2e6(0xbd)},'autoExpiryNote':_0x5aa2e6(0xc1)+_0x2740f4[_0x5aa2e6(0xb0)]+'\x20days\x20if\x20not\x20paid','individualTimersNote':_0x5aa2e6(0xce)}});}catch(_0x48fc3a){_0x11940c[_0x5aa2e6(0x8e)](0x1f4)['json']({'success':![],'message':'Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics'});}}),router[a19_0x1c4303(0xa1)](a19_0x1c4303(0xac),async(_0x50b987,_0x48165d)=>{const _0x4b7521=a19_0x1c4303;try{const {paymentId:_0x4fd0de}=_0x50b987['params'],_0x1ae694=coinToPayStatusService_1[_0x4b7521(0x7f)][_0x4b7521(0x80)](_0x4fd0de),_0x27a9f7=(await Promise[_0x4b7521(0xf1)]()[_0x4b7521(0x84)](()=>__importStar(require(_0x4b7521(0xd4)))))[_0x4b7521(0xf0)],_0x178100=await _0x27a9f7[_0x4b7521(0xd9)][_0x4b7521(0x91)]({'where':{'id':_0x4fd0de},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x178100)return _0x48165d[_0x4b7521(0x8e)](0x194)[_0x4b7521(0xb1)]({'success':![],'message':_0x4b7521(0xea)});_0x48165d[_0x4b7521(0xb1)]({'success':!![],'result':{'payment':{'id':_0x178100['id'],'gateway':_0x178100[_0x4b7521(0xb2)],'gatewayPaymentId':_0x178100[_0x4b7521(0xe6)],'status':_0x178100[_0x4b7521(0x8e)],'amount':_0x178100[_0x4b7521(0xee)],'currency':_0x178100[_0x4b7521(0xa9)],'createdAt':_0x178100['createdAt'],'updatedAt':_0x178100[_0x4b7521(0xb7)],'shop':_0x178100[_0x4b7521(0x92)]},'timers':_0x1ae694,'isCoinToPay':_0x178100[_0x4b7521(0xb2)]===_0x4b7521(0x8d),'ageInMinutes':Math[_0x4b7521(0x97)]((Date[_0x4b7521(0xf4)]()-_0x178100['createdAt'][_0x4b7521(0xb8)]())/(0x3e8*0x3c))}});}catch(_0x1c5151){_0x48165d['status'](0x1f4)[_0x4b7521(0xb1)]({'success':![],'message':_0x1c5151 instanceof Error?_0x1c5151[_0x4b7521(0x93)]:_0x4b7521(0xe4)});}}),router[a19_0x1c4303(0xa1)]('/domain-monitoring/stats',(_0x3c77fa,_0x49a116)=>{const _0x4be63d=a19_0x1c4303;try{const _0x493764=domainMonitoringService_1[_0x4be63d(0xba)][_0x4be63d(0xcb)]();_0x49a116[_0x4be63d(0xb1)]({'success':!![],'result':{..._0x493764,'description':_0x4be63d(0x81),'behavior':'Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','encoding':_0x4be63d(0x8f)}});}catch(_0x2cc6b2){_0x49a116[_0x4be63d(0x8e)](0x1f4)[_0x4be63d(0xb1)]({'success':![],'message':_0x4be63d(0xf6)});}}),router[a19_0x1c4303(0x82)]('/domain-monitoring/check',async(_0x156d7d,_0x4203d9)=>{const _0xd5e224=a19_0x1c4303;try{const _0x2bd84a=await domainMonitoringService_1['domainMonitoringService'][_0xd5e224(0xc4)]();_0x4203d9['json']({'success':!![],'result':{'domainAvailable':_0x2bd84a,'message':_0x2bd84a?'Domain\x20is\x20responding\x20correctly':'Domain\x20check\x20failed','timestamp':new Date()[_0xd5e224(0xa8)]()}});}catch(_0x2dd2f6){_0x4203d9[_0xd5e224(0x8e)](0x1f4)[_0xd5e224(0xb1)]({'success':![],'message':_0x2dd2f6 instanceof Error?_0x2dd2f6[_0xd5e224(0x93)]:_0xd5e224(0xe1)});}}),exports[a19_0x1c4303(0xf0)]=router;