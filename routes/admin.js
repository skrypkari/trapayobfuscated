'use strict';function a19_0x2e45(){const _0x1cca18=['getLogStats','/users/:id/activate','delete','updateUser','Router','../services/loggerService','getOwnPropertyDescriptor','now','gateway','12015520FHHLIL','Failed\x20to\x20get\x20payment\x20information','8VlYdQO','log','/payments/:id','CoinToPay\x20automatic\x20status\x20checking\x20service','/payout/merchants','message','getPaymentTimerInfo','call','getTime','updatePayment','body','payment','1878160JXmfnt','resolve','updateCustomerDataSchema','/payouts','/merchants/selection','activateUser','/cointopay/stats','domainMonitoringService','createdAt','../services/coinToPayStatusService','createPayout','13842RrhPsb','createUser','4nHXtwe','coinToPayStatusService','length','error','Domain\x20check\x20failed','writable','cointopay','/users/:id','PENDING','getMonitoringStats','checkAuth','updatedAt','/users','get','../config/database','PAID','EXPIRED','currency','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','amount','put','4090CZerWL','getMerchantsAwaitingPayout','getOwnPropertyNames','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','authenticateToken','getPayoutById','getPayouts','post','json','/auth','__esModule','/logs/clean','floor','findUnique','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','3371490cNNktZ','/payout','updateUserSchema','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','/payouts/:id','/statistics','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','createPayoutSchema','__createBinding','CoinToPay\x20payment\x20status\x20checked\x20successfully','5074517TcHCvm','configurable','status','/domain-monitoring/check','expiryDays','default','/merchant-statistics','toISOString','validate','params','paymentId','FAILED','../middleware/auth','/cointopay/check/:paymentId','prototype','requireAdmin','/payments','defineProperty','Payment\x20not\x20found','getMerchantStatistics','manualCheck','295404hIqAka','create','__importStar','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','Failed\x20to\x20clean\x20old\x20logs','\x20days)','777342SnZKJO','getPayoutStats','/domain-monitoring/stats','/logs/stats','getServiceStats','getPaymentById','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','__setModuleDefault','cleanOldLogs','gatewayPaymentId','5AtOVHJ','use','/payout/stats','loggerService'];a19_0x2e45=function(){return _0x1cca18;};return a19_0x2e45();}const a19_0x31825d=a19_0x19ca;(function(_0x4829f5,_0x3b9d13){const _0x54957a=a19_0x19ca,_0x326fd3=_0x4829f5();while(!![]){try{const _0x3af647=-parseInt(_0x54957a(0x19f))/0x1*(-parseInt(_0x54957a(0x20b))/0x2)+-parseInt(_0x54957a(0x211))/0x3*(parseInt(_0x54957a(0x1c7))/0x4)+-parseInt(_0x54957a(0x1ba))/0x5+parseInt(_0x54957a(0x1eb))/0x6+-parseInt(_0x54957a(0x1f6))/0x7*(parseInt(_0x54957a(0x1ae))/0x8)+-parseInt(_0x54957a(0x1c5))/0x9*(parseInt(_0x54957a(0x1dc))/0xa)+parseInt(_0x54957a(0x1ac))/0xb;if(_0x3af647===_0x3b9d13)break;else _0x326fd3['push'](_0x326fd3['shift']());}catch(_0x4e961e){_0x326fd3['push'](_0x326fd3['shift']());}}}(a19_0x2e45,0x62a3a));var __createBinding=this&&this[a19_0x31825d(0x1f4)]||(Object[a19_0x31825d(0x20c)]?function(_0x1e1322,_0x1fa015,_0x52ee23,_0x3899b7){const _0x39bfe5=a19_0x31825d;if(_0x3899b7===undefined)_0x3899b7=_0x52ee23;var _0x1b8b12=Object[_0x39bfe5(0x1a9)](_0x1fa015,_0x52ee23);(!_0x1b8b12||(_0x39bfe5(0x1d4)in _0x1b8b12?!_0x1fa015[_0x39bfe5(0x1e6)]:_0x1b8b12[_0x39bfe5(0x1cc)]||_0x1b8b12[_0x39bfe5(0x1f7)]))&&(_0x1b8b12={'enumerable':!![],'get':function(){return _0x1fa015[_0x52ee23];}}),Object[_0x39bfe5(0x207)](_0x1e1322,_0x3899b7,_0x1b8b12);}:function(_0x171008,_0x338d34,_0x284891,_0x4510cb){if(_0x4510cb===undefined)_0x4510cb=_0x284891;_0x171008[_0x4510cb]=_0x338d34[_0x284891];}),__setModuleDefault=this&&this[a19_0x31825d(0x19c)]||(Object[a19_0x31825d(0x20c)]?function(_0x31059f,_0x567ca9){const _0x32837b=a19_0x31825d;Object[_0x32837b(0x207)](_0x31059f,_0x32837b(0x1fb),{'enumerable':!![],'value':_0x567ca9});}:function(_0x5de2e1,_0x21f071){const _0x51d413=a19_0x31825d;_0x5de2e1[_0x51d413(0x1fb)]=_0x21f071;}),__importStar=this&&this[a19_0x31825d(0x20d)]||(function(){var _0x1e5b66=function(_0x2ded35){const _0x322275=a19_0x19ca;return _0x1e5b66=Object[_0x322275(0x1de)]||function(_0x5ca32b){const _0x4ddf04=_0x322275;var _0x57939c=[];for(var _0x57828e in _0x5ca32b)if(Object[_0x4ddf04(0x204)]['hasOwnProperty'][_0x4ddf04(0x1b5)](_0x5ca32b,_0x57828e))_0x57939c[_0x57939c[_0x4ddf04(0x1c9)]]=_0x57828e;return _0x57939c;},_0x1e5b66(_0x2ded35);};return function(_0x4eeaf0){const _0x38d119=a19_0x19ca;if(_0x4eeaf0&&_0x4eeaf0[_0x38d119(0x1e6)])return _0x4eeaf0;var _0x4515ac={};if(_0x4eeaf0!=null){for(var _0x493142=_0x1e5b66(_0x4eeaf0),_0x510d18=0x0;_0x510d18<_0x493142[_0x38d119(0x1c9)];_0x510d18++)if(_0x493142[_0x510d18]!==_0x38d119(0x1fb))__createBinding(_0x4515ac,_0x4eeaf0,_0x493142[_0x510d18]);}return __setModuleDefault(_0x4515ac,_0x4eeaf0),_0x4515ac;};}());function a19_0x19ca(_0x1cf738,_0x10d40e){const _0x2e4536=a19_0x2e45();return a19_0x19ca=function(_0x19cacd,_0x1acf86){_0x19cacd=_0x19cacd-0x19a;let _0x510980=_0x2e4536[_0x19cacd];return _0x510980;},a19_0x19ca(_0x1cf738,_0x10d40e);}Object[a19_0x31825d(0x207)](exports,'__esModule',{'value':!![]});const express_1=require('express'),adminController_1=require('../controllers/adminController'),validation_1=require('../middleware/validation'),auth_1=require(a19_0x31825d(0x202)),loggerService_1=require(a19_0x31825d(0x1a8)),coinToPayStatusService_1=require(a19_0x31825d(0x1c3)),domainMonitoringService_1=require('../services/domainMonitoringService'),router=(0x0,express_1[a19_0x31825d(0x1a7)])(),adminController=new adminController_1['AdminController']();router[a19_0x31825d(0x1a0)](auth_1[a19_0x31825d(0x1e0)],auth_1[a19_0x31825d(0x205)]),router['get'](a19_0x31825d(0x1e5),adminController[a19_0x31825d(0x1d1)]),router[a19_0x31825d(0x1d4)](a19_0x31825d(0x1f1),adminController['getStatistics']),router[a19_0x31825d(0x1d4)](a19_0x31825d(0x1fc),adminController[a19_0x31825d(0x209)]),router[a19_0x31825d(0x1d4)](a19_0x31825d(0x1a1),adminController[a19_0x31825d(0x212)]),router[a19_0x31825d(0x1d4)](a19_0x31825d(0x1b2),adminController[a19_0x31825d(0x1dd)]),router[a19_0x31825d(0x1d4)](a19_0x31825d(0x1be),adminController['getMerchantsSelection']),router[a19_0x31825d(0x1e3)](a19_0x31825d(0x1ec),(0x0,validation_1[a19_0x31825d(0x1fe)])(validation_1[a19_0x31825d(0x1f3)]),adminController[a19_0x31825d(0x1c4)]),router[a19_0x31825d(0x1d4)](a19_0x31825d(0x1bd),adminController[a19_0x31825d(0x1e2)]),router[a19_0x31825d(0x1d4)](a19_0x31825d(0x1f0),adminController[a19_0x31825d(0x1e1)]),router[a19_0x31825d(0x1a5)](a19_0x31825d(0x1f0),adminController['deletePayout']),router[a19_0x31825d(0x1d4)](a19_0x31825d(0x206),adminController['getPayments']),router[a19_0x31825d(0x1d4)](a19_0x31825d(0x1b0),adminController[a19_0x31825d(0x19a)]),router['put'](a19_0x31825d(0x1b0),adminController[a19_0x31825d(0x1b7)]),router['put']('/payments/:id/customer',(0x0,validation_1[a19_0x31825d(0x1fe)])(validation_1[a19_0x31825d(0x1bc)]),adminController['updateCustomerData']),router[a19_0x31825d(0x1d4)]('/users',adminController['getUsers']),router[a19_0x31825d(0x1d4)](a19_0x31825d(0x1ce),adminController['getUserById']),router['post'](a19_0x31825d(0x1d3),(0x0,validation_1['validate'])(validation_1['createUserSchema']),adminController[a19_0x31825d(0x1c6)]),router[a19_0x31825d(0x1db)](a19_0x31825d(0x1ce),(0x0,validation_1[a19_0x31825d(0x1fe)])(validation_1[a19_0x31825d(0x1ed)]),adminController[a19_0x31825d(0x1a6)]),router[a19_0x31825d(0x1a5)]('/users/:id',adminController['deleteUser']),router[a19_0x31825d(0x1e3)]('/users/:id/suspend',adminController['suspendUser']),router[a19_0x31825d(0x1e3)](a19_0x31825d(0x1a4),adminController[a19_0x31825d(0x1bf)]),router[a19_0x31825d(0x1d4)](a19_0x31825d(0x214),(_0x317703,_0x36ec51)=>{const _0x1bad62=a19_0x31825d;try{const _0x388d11=loggerService_1[_0x1bad62(0x1a2)][_0x1bad62(0x1a3)]();_0x36ec51[_0x1bad62(0x1e4)]({'success':!![],'result':_0x388d11});}catch(_0x26c8fe){_0x36ec51[_0x1bad62(0x1f8)](0x1f4)['json']({'success':![],'message':'Failed\x20to\x20get\x20log\x20statistics'});}}),router[a19_0x31825d(0x1e3)](a19_0x31825d(0x1e7),(_0x4845e5,_0x7eebf0)=>{const _0x1e1b01=a19_0x31825d;try{const {daysToKeep:daysToKeep=0x1e}=_0x4845e5[_0x1e1b01(0x1b8)];loggerService_1[_0x1e1b01(0x1a2)][_0x1e1b01(0x19d)](daysToKeep),_0x7eebf0[_0x1e1b01(0x1e4)]({'success':!![],'message':'Old\x20logs\x20cleaned\x20(kept\x20last\x20'+daysToKeep+_0x1e1b01(0x210)});}catch(_0x13978f){_0x7eebf0[_0x1e1b01(0x1f8)](0x1f4)[_0x1e1b01(0x1e4)]({'success':![],'message':_0x1e1b01(0x20f)});}}),router[a19_0x31825d(0x1e3)](a19_0x31825d(0x203),async(_0x1bb916,_0x2da812)=>{const _0x31b018=a19_0x31825d;try{const {paymentId:_0xcc2f75}=_0x1bb916[_0x31b018(0x1ff)];console[_0x31b018(0x1af)]('üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20'+_0xcc2f75),await coinToPayStatusService_1[_0x31b018(0x1c8)]['checkPaymentById'](_0xcc2f75),_0x2da812['json']({'success':!![],'message':_0x31b018(0x1f5)});}catch(_0x271fe0){console[_0x31b018(0x1ca)](_0x31b018(0x19b)+_0x1bb916[_0x31b018(0x1ff)][_0x31b018(0x200)]+':',_0x271fe0),_0x2da812[_0x31b018(0x1f8)](0x1f4)[_0x31b018(0x1e4)]({'success':![],'message':_0x271fe0 instanceof Error?_0x271fe0[_0x31b018(0x1b3)]:_0x31b018(0x1ef)});}}),router[a19_0x31825d(0x1d4)](a19_0x31825d(0x1c0),(_0x45e2f5,_0x419104)=>{const _0x2f324e=a19_0x31825d;try{const _0x4e1717=coinToPayStatusService_1[_0x2f324e(0x1c8)][_0x2f324e(0x215)]();_0x419104[_0x2f324e(0x1e4)]({'success':!![],'result':{..._0x4e1717,'description':_0x2f324e(0x1b1),'statusMapping':{'Paid':_0x2f324e(0x1d6),'Awaiting\x20Fiat':_0x2f324e(0x1cf),'waiting':'PENDING','expired':_0x2f324e(0x1d7),'failed':_0x2f324e(0x201)},'autoExpiryNote':'Payments\x20automatically\x20expire\x20after\x20'+_0x4e1717[_0x2f324e(0x1fa)]+'\x20days\x20if\x20not\x20paid','individualTimersNote':_0x2f324e(0x1df)}});}catch(_0x5eca8e){_0x419104['status'](0x1f4)['json']({'success':![],'message':_0x2f324e(0x20e)});}}),router['get']('/cointopay/payment/:paymentId',async(_0x5cedd2,_0x86b651)=>{const _0x40b41e=a19_0x31825d;try{const {paymentId:_0x414457}=_0x5cedd2[_0x40b41e(0x1ff)],_0x4b166d=coinToPayStatusService_1[_0x40b41e(0x1c8)][_0x40b41e(0x1b4)](_0x414457),_0x5e9e31=(await Promise[_0x40b41e(0x1bb)]()['then'](()=>__importStar(require(_0x40b41e(0x1d5)))))[_0x40b41e(0x1fb)],_0x27f396=await _0x5e9e31[_0x40b41e(0x1b9)][_0x40b41e(0x1e9)]({'where':{'id':_0x414457},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x27f396)return _0x86b651[_0x40b41e(0x1f8)](0x194)[_0x40b41e(0x1e4)]({'success':![],'message':_0x40b41e(0x208)});_0x86b651['json']({'success':!![],'result':{'payment':{'id':_0x27f396['id'],'gateway':_0x27f396[_0x40b41e(0x1ab)],'gatewayPaymentId':_0x27f396[_0x40b41e(0x19e)],'status':_0x27f396[_0x40b41e(0x1f8)],'amount':_0x27f396[_0x40b41e(0x1da)],'currency':_0x27f396[_0x40b41e(0x1d8)],'createdAt':_0x27f396[_0x40b41e(0x1c2)],'updatedAt':_0x27f396[_0x40b41e(0x1d2)],'shop':_0x27f396['shop']},'timers':_0x4b166d,'isCoinToPay':_0x27f396[_0x40b41e(0x1ab)]===_0x40b41e(0x1cd),'ageInMinutes':Math[_0x40b41e(0x1e8)]((Date[_0x40b41e(0x1aa)]()-_0x27f396[_0x40b41e(0x1c2)][_0x40b41e(0x1b6)]())/(0x3e8*0x3c))}});}catch(_0x289654){_0x86b651[_0x40b41e(0x1f8)](0x1f4)[_0x40b41e(0x1e4)]({'success':![],'message':_0x289654 instanceof Error?_0x289654[_0x40b41e(0x1b3)]:_0x40b41e(0x1ad)});}}),router[a19_0x31825d(0x1d4)](a19_0x31825d(0x213),(_0x461b8c,_0x1a413e)=>{const _0x329580=a19_0x31825d;try{const _0x8c2406=domainMonitoringService_1['domainMonitoringService'][_0x329580(0x1d0)]();_0x1a413e[_0x329580(0x1e4)]({'success':!![],'result':{..._0x8c2406,'description':_0x329580(0x1ee),'behavior':_0x329580(0x1d9),'encoding':_0x329580(0x1f2)}});}catch(_0x2fb2d9){_0x1a413e[_0x329580(0x1f8)](0x1f4)[_0x329580(0x1e4)]({'success':![],'message':_0x329580(0x1ea)});}}),router[a19_0x31825d(0x1e3)](a19_0x31825d(0x1f9),async(_0x5b2ff2,_0x6b157d)=>{const _0x34cea1=a19_0x31825d;try{const _0xe92d6a=await domainMonitoringService_1[_0x34cea1(0x1c1)][_0x34cea1(0x20a)]();_0x6b157d[_0x34cea1(0x1e4)]({'success':!![],'result':{'domainAvailable':_0xe92d6a,'message':_0xe92d6a?'Domain\x20is\x20responding\x20correctly':_0x34cea1(0x1cb),'timestamp':new Date()[_0x34cea1(0x1fd)]()}});}catch(_0x14c7d7){_0x6b157d[_0x34cea1(0x1f8)](0x1f4)['json']({'success':![],'message':_0x14c7d7 instanceof Error?_0x14c7d7[_0x34cea1(0x1b3)]:'Failed\x20to\x20perform\x20manual\x20domain\x20check'});}}),exports[a19_0x31825d(0x1fb)]=router;