'use strict';function a19_0x1458(_0x519507,_0x551642){const _0x3e739d=a19_0x3e73();return a19_0x1458=function(_0x1458a0,_0x2f7bbb){_0x1458a0=_0x1458a0-0x1e6;let _0x3f799d=_0x3e739d[_0x1458a0];return _0x3f799d;},a19_0x1458(_0x519507,_0x551642);}const a19_0x1f3988=a19_0x1458;(function(_0x585786,_0x5ada70){const _0x489d4d=a19_0x1458,_0x2c4a27=_0x585786();while(!![]){try{const _0x43edfd=-parseInt(_0x489d4d(0x214))/0x1+-parseInt(_0x489d4d(0x1f0))/0x2+-parseInt(_0x489d4d(0x243))/0x3+parseInt(_0x489d4d(0x1e7))/0x4+-parseInt(_0x489d4d(0x1e8))/0x5+-parseInt(_0x489d4d(0x223))/0x6*(parseInt(_0x489d4d(0x22b))/0x7)+parseInt(_0x489d4d(0x201))/0x8;if(_0x43edfd===_0x5ada70)break;else _0x2c4a27['push'](_0x2c4a27['shift']());}catch(_0x1bbea9){_0x2c4a27['push'](_0x2c4a27['shift']());}}}(a19_0x3e73,0x63f30));var __createBinding=this&&this[a19_0x1f3988(0x236)]||(Object[a19_0x1f3988(0x256)]?function(_0x28d334,_0x5d3cc5,_0x338d15,_0x20aca6){const _0x3e0066=a19_0x1f3988;if(_0x20aca6===undefined)_0x20aca6=_0x338d15;var _0x27f15e=Object['getOwnPropertyDescriptor'](_0x5d3cc5,_0x338d15);(!_0x27f15e||('get'in _0x27f15e?!_0x5d3cc5[_0x3e0066(0x247)]:_0x27f15e[_0x3e0066(0x227)]||_0x27f15e[_0x3e0066(0x24e)]))&&(_0x27f15e={'enumerable':!![],'get':function(){return _0x5d3cc5[_0x338d15];}}),Object[_0x3e0066(0x22c)](_0x28d334,_0x20aca6,_0x27f15e);}:function(_0x157367,_0x2604be,_0x5a9d8a,_0x4836d3){if(_0x4836d3===undefined)_0x4836d3=_0x5a9d8a;_0x157367[_0x4836d3]=_0x2604be[_0x5a9d8a];}),__setModuleDefault=this&&this[a19_0x1f3988(0x1f8)]||(Object['create']?function(_0x81baa2,_0x220a13){const _0xb2e5ca=a19_0x1f3988;Object[_0xb2e5ca(0x22c)](_0x81baa2,_0xb2e5ca(0x1e9),{'enumerable':!![],'value':_0x220a13});}:function(_0x1ecc91,_0x405696){const _0x444efa=a19_0x1f3988;_0x1ecc91[_0x444efa(0x1e9)]=_0x405696;}),__importStar=this&&this[a19_0x1f3988(0x1f5)]||(function(){var _0x434513=function(_0x7f8545){return _0x434513=Object['getOwnPropertyNames']||function(_0x191d59){const _0x27580f=a19_0x1458;var _0x4121ec=[];for(var _0x305667 in _0x191d59)if(Object[_0x27580f(0x206)][_0x27580f(0x250)]['call'](_0x191d59,_0x305667))_0x4121ec[_0x4121ec[_0x27580f(0x20a)]]=_0x305667;return _0x4121ec;},_0x434513(_0x7f8545);};return function(_0x29fc43){const _0x57a411=a19_0x1458;if(_0x29fc43&&_0x29fc43[_0x57a411(0x247)])return _0x29fc43;var _0x41c879={};if(_0x29fc43!=null){for(var _0x46689d=_0x434513(_0x29fc43),_0x43f2c3=0x0;_0x43f2c3<_0x46689d[_0x57a411(0x20a)];_0x43f2c3++)if(_0x46689d[_0x43f2c3]!==_0x57a411(0x1e9))__createBinding(_0x41c879,_0x29fc43,_0x46689d[_0x43f2c3]);}return __setModuleDefault(_0x41c879,_0x29fc43),_0x41c879;};}());Object[a19_0x1f3988(0x22c)](exports,'__esModule',{'value':!![]});function a19_0x3e73(){const _0x41c85d=['FAILED','getServiceStats','/payments/:id','shop','checkAuth','authenticateToken','floor','❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','14619928YYLNek','body','/logs/clean','../services/loggerService','updatePayment','prototype','PENDING','getMonitoringStats','getPaymentById','length','/cointopay/payment/:paymentId','manualCheck','validate','../middleware/auth','/cointopay/stats','findUnique','/domain-monitoring/check','paymentId','getMerchantsSelection','632803CELdVb','log','/auth','updatedAt','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','Router','/users','resolve','getTime','loggerService','/payments','/users/:id/suspend','error','deletePayout','getPayments','23568pfMaMH','put','getPayouts','params','writable','Payment\x20not\x20found','getPayoutById','gatewayPaymentId','749uHgvXr','defineProperty','/merchant-statistics','Payments\x20automatically\x20expire\x20after\x20','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','/payout/merchants','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','Failed\x20to\x20get\x20log\x20statistics','PAID','delete','status','__createBinding','message','post','getLogStats','getStatistics','gateway','🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','\x20days\x20if\x20not\x20paid','/payout','currency','/payouts','coinToPayStatusService','Old\x20logs\x20cleaned\x20(kept\x20last\x20','176538LddyXR','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','getPaymentTimerInfo','../controllers/adminController','__esModule','createUser','createUserSchema','/payouts/:id','requireAdmin','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','Domain\x20check\x20failed','configurable','/payout/stats','hasOwnProperty','Failed\x20to\x20get\x20payment\x20information','express','amount','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','/users/:id','create','getUserById','EXPIRED','/statistics','then','domainMonitoringService','2254300yYnnek','814055AXsSOT','default','expiryDays','createPayoutSchema','Domain\x20is\x20responding\x20correctly','Failed\x20to\x20clean\x20old\x20logs','createdAt','updateUserSchema','1413836vnwXiE','json','/cointopay/check/:paymentId','CoinToPay\x20automatic\x20status\x20checking\x20service','suspendUser','__importStar','get','deleteUser','__setModuleDefault'];a19_0x3e73=function(){return _0x41c85d;};return a19_0x3e73();}const express_1=require(a19_0x1f3988(0x252)),adminController_1=require(a19_0x1f3988(0x246)),validation_1=require('../middleware/validation'),auth_1=require(a19_0x1f3988(0x20e)),loggerService_1=require(a19_0x1f3988(0x204)),coinToPayStatusService_1=require('../services/coinToPayStatusService'),domainMonitoringService_1=require('../services/domainMonitoringService'),router=(0x0,express_1[a19_0x1f3988(0x219)])(),adminController=new adminController_1['AdminController']();router['use'](auth_1[a19_0x1f3988(0x1fe)],auth_1[a19_0x1f3988(0x24b)]),router[a19_0x1f3988(0x1f6)](a19_0x1f3988(0x216),adminController[a19_0x1f3988(0x1fd)]),router[a19_0x1f3988(0x1f6)](a19_0x1f3988(0x259),adminController[a19_0x1f3988(0x23a)]),router[a19_0x1f3988(0x1f6)](a19_0x1f3988(0x22d),adminController['getMerchantStatistics']),router[a19_0x1f3988(0x1f6)](a19_0x1f3988(0x24f),adminController['getPayoutStats']),router['get'](a19_0x1f3988(0x230),adminController['getMerchantsAwaitingPayout']),router[a19_0x1f3988(0x1f6)]('/merchants/selection',adminController[a19_0x1f3988(0x213)]),router[a19_0x1f3988(0x238)](a19_0x1f3988(0x23e),(0x0,validation_1[a19_0x1f3988(0x20d)])(validation_1[a19_0x1f3988(0x1eb)]),adminController['createPayout']),router['get'](a19_0x1f3988(0x240),adminController[a19_0x1f3988(0x225)]),router['get'](a19_0x1f3988(0x24a),adminController[a19_0x1f3988(0x229)]),router[a19_0x1f3988(0x234)](a19_0x1f3988(0x24a),adminController[a19_0x1f3988(0x221)]),router[a19_0x1f3988(0x1f6)](a19_0x1f3988(0x21e),adminController[a19_0x1f3988(0x222)]),router['get']('/payments/:id',adminController[a19_0x1f3988(0x209)]),router[a19_0x1f3988(0x224)](a19_0x1f3988(0x1fb),adminController[a19_0x1f3988(0x205)]),router[a19_0x1f3988(0x224)]('/payments/:id/customer',(0x0,validation_1[a19_0x1f3988(0x20d)])(validation_1['updateCustomerDataSchema']),adminController['updateCustomerData']),router[a19_0x1f3988(0x1f6)](a19_0x1f3988(0x21a),adminController['getUsers']),router[a19_0x1f3988(0x1f6)](a19_0x1f3988(0x255),adminController[a19_0x1f3988(0x257)]),router[a19_0x1f3988(0x238)]('/users',(0x0,validation_1[a19_0x1f3988(0x20d)])(validation_1[a19_0x1f3988(0x249)]),adminController[a19_0x1f3988(0x248)]),router[a19_0x1f3988(0x224)](a19_0x1f3988(0x255),(0x0,validation_1[a19_0x1f3988(0x20d)])(validation_1[a19_0x1f3988(0x1ef)]),adminController['updateUser']),router[a19_0x1f3988(0x234)](a19_0x1f3988(0x255),adminController[a19_0x1f3988(0x1f7)]),router[a19_0x1f3988(0x238)](a19_0x1f3988(0x21f),adminController[a19_0x1f3988(0x1f4)]),router[a19_0x1f3988(0x238)]('/users/:id/activate',adminController['activateUser']),router['get']('/logs/stats',(_0x2c1ed4,_0xfeca64)=>{const _0x36386b=a19_0x1f3988;try{const _0x403fbf=loggerService_1[_0x36386b(0x21d)][_0x36386b(0x239)]();_0xfeca64[_0x36386b(0x1f1)]({'success':!![],'result':_0x403fbf});}catch(_0x485865){_0xfeca64['status'](0x1f4)[_0x36386b(0x1f1)]({'success':![],'message':_0x36386b(0x232)});}}),router['post'](a19_0x1f3988(0x203),(_0x23dc90,_0x2e77d6)=>{const _0x24cdaf=a19_0x1f3988;try{const {daysToKeep:daysToKeep=0x1e}=_0x23dc90[_0x24cdaf(0x202)];loggerService_1[_0x24cdaf(0x21d)]['cleanOldLogs'](daysToKeep),_0x2e77d6[_0x24cdaf(0x1f1)]({'success':!![],'message':_0x24cdaf(0x242)+daysToKeep+'\x20days)'});}catch(_0x6bde8){_0x2e77d6[_0x24cdaf(0x235)](0x1f4)['json']({'success':![],'message':_0x24cdaf(0x1ed)});}}),router[a19_0x1f3988(0x238)](a19_0x1f3988(0x1f2),async(_0xe28284,_0x13082c)=>{const _0x32eb7e=a19_0x1f3988;try{const {paymentId:_0xddb1c7}=_0xe28284[_0x32eb7e(0x226)];console[_0x32eb7e(0x215)](_0x32eb7e(0x23c)+_0xddb1c7),await coinToPayStatusService_1['coinToPayStatusService']['checkPaymentById'](_0xddb1c7),_0x13082c[_0x32eb7e(0x1f1)]({'success':!![],'message':'CoinToPay\x20payment\x20status\x20checked\x20successfully'});}catch(_0x3bc6a8){console[_0x32eb7e(0x220)](_0x32eb7e(0x200)+_0xe28284['params'][_0x32eb7e(0x212)]+':',_0x3bc6a8),_0x13082c[_0x32eb7e(0x235)](0x1f4)[_0x32eb7e(0x1f1)]({'success':![],'message':_0x3bc6a8 instanceof Error?_0x3bc6a8[_0x32eb7e(0x237)]:_0x32eb7e(0x24c)});}}),router[a19_0x1f3988(0x1f6)](a19_0x1f3988(0x20f),(_0x167e59,_0xee41e7)=>{const _0x55fe91=a19_0x1f3988;try{const _0x227f91=coinToPayStatusService_1[_0x55fe91(0x241)][_0x55fe91(0x1fa)]();_0xee41e7[_0x55fe91(0x1f1)]({'success':!![],'result':{..._0x227f91,'description':_0x55fe91(0x1f3),'statusMapping':{'Paid':_0x55fe91(0x233),'Awaiting\x20Fiat':_0x55fe91(0x207),'waiting':_0x55fe91(0x207),'expired':_0x55fe91(0x258),'failed':_0x55fe91(0x1f9)},'autoExpiryNote':_0x55fe91(0x22e)+_0x227f91[_0x55fe91(0x1ea)]+_0x55fe91(0x23d),'individualTimersNote':'Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly'}});}catch(_0x4220fd){_0xee41e7[_0x55fe91(0x235)](0x1f4)[_0x55fe91(0x1f1)]({'success':![],'message':_0x55fe91(0x22f)});}}),router['get'](a19_0x1f3988(0x20b),async(_0x1d6391,_0x4dc417)=>{const _0x4be764=a19_0x1f3988;try{const {paymentId:_0x5e7a72}=_0x1d6391[_0x4be764(0x226)],_0x3efb76=coinToPayStatusService_1[_0x4be764(0x241)][_0x4be764(0x245)](_0x5e7a72),_0x1bddce=(await Promise[_0x4be764(0x21b)]()[_0x4be764(0x25a)](()=>__importStar(require('../config/database'))))[_0x4be764(0x1e9)],_0x5986f5=await _0x1bddce['payment'][_0x4be764(0x210)]({'where':{'id':_0x5e7a72},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x5986f5)return _0x4dc417[_0x4be764(0x235)](0x194)[_0x4be764(0x1f1)]({'success':![],'message':_0x4be764(0x228)});_0x4dc417[_0x4be764(0x1f1)]({'success':!![],'result':{'payment':{'id':_0x5986f5['id'],'gateway':_0x5986f5[_0x4be764(0x23b)],'gatewayPaymentId':_0x5986f5[_0x4be764(0x22a)],'status':_0x5986f5[_0x4be764(0x235)],'amount':_0x5986f5[_0x4be764(0x253)],'currency':_0x5986f5[_0x4be764(0x23f)],'createdAt':_0x5986f5[_0x4be764(0x1ee)],'updatedAt':_0x5986f5[_0x4be764(0x217)],'shop':_0x5986f5[_0x4be764(0x1fc)]},'timers':_0x3efb76,'isCoinToPay':_0x5986f5[_0x4be764(0x23b)]==='cointopay','ageInMinutes':Math[_0x4be764(0x1ff)]((Date['now']()-_0x5986f5[_0x4be764(0x1ee)][_0x4be764(0x21c)]())/(0x3e8*0x3c))}});}catch(_0x212bb6){_0x4dc417[_0x4be764(0x235)](0x1f4)['json']({'success':![],'message':_0x212bb6 instanceof Error?_0x212bb6['message']:_0x4be764(0x251)});}}),router[a19_0x1f3988(0x1f6)]('/domain-monitoring/stats',(_0x2f5872,_0x34a426)=>{const _0x199228=a19_0x1f3988;try{const _0x2938ab=domainMonitoringService_1[_0x199228(0x1e6)][_0x199228(0x208)]();_0x34a426[_0x199228(0x1f1)]({'success':!![],'result':{..._0x2938ab,'description':_0x199228(0x244),'behavior':_0x199228(0x231),'encoding':_0x199228(0x218)}});}catch(_0x20a11b){_0x34a426[_0x199228(0x235)](0x1f4)[_0x199228(0x1f1)]({'success':![],'message':_0x199228(0x254)});}}),router['post'](a19_0x1f3988(0x211),async(_0xb0c52d,_0x344c73)=>{const _0x4e52ce=a19_0x1f3988;try{const _0x524939=await domainMonitoringService_1[_0x4e52ce(0x1e6)][_0x4e52ce(0x20c)]();_0x344c73[_0x4e52ce(0x1f1)]({'success':!![],'result':{'domainAvailable':_0x524939,'message':_0x524939?_0x4e52ce(0x1ec):_0x4e52ce(0x24d),'timestamp':new Date()['toISOString']()}});}catch(_0xc6cb01){_0x344c73[_0x4e52ce(0x235)](0x1f4)['json']({'success':![],'message':_0xc6cb01 instanceof Error?_0xc6cb01[_0x4e52ce(0x237)]:'Failed\x20to\x20perform\x20manual\x20domain\x20check'});}}),exports[a19_0x1f3988(0x1e9)]=router;