'use strict';const a19_0x3e7c04=a19_0x8453;function a19_0x8453(_0x281182,_0x4b1ea2){const _0x28bde2=a19_0x28bd();return a19_0x8453=function(_0x84536a,_0x576eb3){_0x84536a=_0x84536a-0x7d;let _0x1fa29d=_0x28bde2[_0x84536a];return _0x1fa29d;},a19_0x8453(_0x281182,_0x4b1ea2);}(function(_0x4a9a33,_0x25aec4){const _0x2d1bb5=a19_0x8453,_0x4acdeb=_0x4a9a33();while(!![]){try{const _0x4d6a9a=parseInt(_0x2d1bb5(0xe2))/0x1*(-parseInt(_0x2d1bb5(0xd7))/0x2)+-parseInt(_0x2d1bb5(0x98))/0x3+-parseInt(_0x2d1bb5(0xcd))/0x4+parseInt(_0x2d1bb5(0xc9))/0x5+-parseInt(_0x2d1bb5(0xef))/0x6*(parseInt(_0x2d1bb5(0xde))/0x7)+parseInt(_0x2d1bb5(0xd8))/0x8+-parseInt(_0x2d1bb5(0xe8))/0x9*(-parseInt(_0x2d1bb5(0x7f))/0xa);if(_0x4d6a9a===_0x25aec4)break;else _0x4acdeb['push'](_0x4acdeb['shift']());}catch(_0x5c95cd){_0x4acdeb['push'](_0x4acdeb['shift']());}}}(a19_0x28bd,0x418dd));var __createBinding=this&&this[a19_0x3e7c04(0xcc)]||(Object['create']?function(_0x3ba17b,_0x1fe210,_0x51254c,_0x3480c4){const _0xced5a=a19_0x3e7c04;if(_0x3480c4===undefined)_0x3480c4=_0x51254c;var _0x2cb2f8=Object[_0xced5a(0xe3)](_0x1fe210,_0x51254c);(!_0x2cb2f8||(_0xced5a(0xd4)in _0x2cb2f8?!_0x1fe210[_0xced5a(0xf7)]:_0x2cb2f8[_0xced5a(0xb0)]||_0x2cb2f8[_0xced5a(0xa2)]))&&(_0x2cb2f8={'enumerable':!![],'get':function(){return _0x1fe210[_0x51254c];}}),Object[_0xced5a(0xb3)](_0x3ba17b,_0x3480c4,_0x2cb2f8);}:function(_0x276805,_0x47fcae,_0x2a1ddc,_0x3bb020){if(_0x3bb020===undefined)_0x3bb020=_0x2a1ddc;_0x276805[_0x3bb020]=_0x47fcae[_0x2a1ddc];}),__setModuleDefault=this&&this[a19_0x3e7c04(0xd2)]||(Object[a19_0x3e7c04(0xe6)]?function(_0x5f52bd,_0x48e904){Object['defineProperty'](_0x5f52bd,'default',{'enumerable':!![],'value':_0x48e904});}:function(_0x9b7ce2,_0x701b61){const _0x16964f=a19_0x3e7c04;_0x9b7ce2[_0x16964f(0xd0)]=_0x701b61;}),__importStar=this&&this[a19_0x3e7c04(0xd1)]||(function(){var _0x59eebe=function(_0x28adf7){const _0x449a40=a19_0x8453;return _0x59eebe=Object[_0x449a40(0xea)]||function(_0x1d63e7){const _0x32186a=_0x449a40;var _0x67c38f=[];for(var _0x47fa2e in _0x1d63e7)if(Object[_0x32186a(0xed)][_0x32186a(0x9f)][_0x32186a(0xd6)](_0x1d63e7,_0x47fa2e))_0x67c38f[_0x67c38f[_0x32186a(0xc3)]]=_0x47fa2e;return _0x67c38f;},_0x59eebe(_0x28adf7);};return function(_0x188cfe){const _0x291529=a19_0x8453;if(_0x188cfe&&_0x188cfe[_0x291529(0xf7)])return _0x188cfe;var _0x6f621a={};if(_0x188cfe!=null){for(var _0x42cf32=_0x59eebe(_0x188cfe),_0xa44bf=0x0;_0xa44bf<_0x42cf32[_0x291529(0xc3)];_0xa44bf++)if(_0x42cf32[_0xa44bf]!==_0x291529(0xd0))__createBinding(_0x6f621a,_0x188cfe,_0x42cf32[_0xa44bf]);}return __setModuleDefault(_0x6f621a,_0x188cfe),_0x6f621a;};}());Object['defineProperty'](exports,a19_0x3e7c04(0xf7),{'value':!![]});const express_1=require(a19_0x3e7c04(0x93)),adminController_1=require(a19_0x3e7c04(0xf1)),validation_1=require(a19_0x3e7c04(0xb6)),auth_1=require(a19_0x3e7c04(0xee)),loggerService_1=require(a19_0x3e7c04(0xa4)),coinToPayStatusService_1=require(a19_0x3e7c04(0x82)),domainMonitoringService_1=require(a19_0x3e7c04(0xca)),router=(0x0,express_1[a19_0x3e7c04(0x9e)])(),adminController=new adminController_1[(a19_0x3e7c04(0xa3))]();function a19_0x28bd(){const _0x1d04af=['getUsers','message','prototype','../middleware/auth','6xTYadM','Failed\x20to\x20clean\x20old\x20logs','../controllers/adminController','FAILED','Payments\x20automatically\x20expire\x20after\x20','activateUser','requireAdmin','PENDING','__esModule','validate','cleanOldLogs','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','delete','20HIhSlG','use','❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','../services/coinToPayStatusService','getMonitoringStats','updateCustomerDataSchema','cointopay','getPayouts','createUser','/cointopay/check/:paymentId','amount','/payouts/:id','coinToPayStatusService','createdAt','gatewayPaymentId','updatedAt','../config/database','checkAuth','/domain-monitoring/stats','getPayments','express','updateCustomerData','\x20days)','/merchant-statistics','getMerchantStatistics','1090929nfqTJa','getUserById','params','put','/payments/:id/customer','updateUserSchema','Router','hasOwnProperty','Failed\x20to\x20perform\x20manual\x20domain\x20check','deleteUser','configurable','AdminController','../services/loggerService','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','getPaymentById','/users','deletePayout','getTime','json','status','/domain-monitoring/check','getMerchantsAwaitingPayout','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','/users/:id','writable','/payments/:id','/cointopay/payment/:paymentId','defineProperty','getMerchantsSelection','🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','../middleware/validation','log','checkPaymentById','loggerService','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','authenticateToken','createUserSchema','resolve','post','updatePayment','getServiceStats','findUnique','paymentId','length','shop','error','/logs/stats','gateway','createPayout','1120495EPwlRg','../services/domainMonitoringService','Payment\x20not\x20found','__createBinding','695656pJPNnS','domainMonitoringService','/statistics','default','__importStar','__setModuleDefault','PAID','get','createPayoutSchema','call','4742NgPheI','1335208kJvgIV','CoinToPay\x20payment\x20status\x20checked\x20successfully','/cointopay/stats','then','/payments','Failed\x20to\x20get\x20log\x20statistics','2614311hnifkk','/payout/stats','/merchants/selection','payment','37RYBLhT','getOwnPropertyDescriptor','getPayoutById','now','create','updateUser','3943197Hcgqrv','Failed\x20to\x20get\x20payment\x20information','getOwnPropertyNames'];a19_0x28bd=function(){return _0x1d04af;};return a19_0x28bd();}router[a19_0x3e7c04(0x80)](auth_1[a19_0x3e7c04(0xbb)],auth_1[a19_0x3e7c04(0xf5)]),router[a19_0x3e7c04(0xd4)]('/auth',adminController[a19_0x3e7c04(0x90)]),router['get'](a19_0x3e7c04(0xcf),adminController['getStatistics']),router[a19_0x3e7c04(0xd4)](a19_0x3e7c04(0x96),adminController[a19_0x3e7c04(0x97)]),router[a19_0x3e7c04(0xd4)](a19_0x3e7c04(0xdf),adminController['getPayoutStats']),router[a19_0x3e7c04(0xd4)]('/payout/merchants',adminController[a19_0x3e7c04(0xad)]),router[a19_0x3e7c04(0xd4)](a19_0x3e7c04(0xe0),adminController[a19_0x3e7c04(0xb4)]),router[a19_0x3e7c04(0xbe)]('/payout',(0x0,validation_1['validate'])(validation_1[a19_0x3e7c04(0xd5)]),adminController[a19_0x3e7c04(0xc8)]),router[a19_0x3e7c04(0xd4)]('/payouts',adminController[a19_0x3e7c04(0x86)]),router[a19_0x3e7c04(0xd4)](a19_0x3e7c04(0x8a),adminController[a19_0x3e7c04(0xe4)]),router[a19_0x3e7c04(0x7e)](a19_0x3e7c04(0x8a),adminController[a19_0x3e7c04(0xa8)]),router[a19_0x3e7c04(0xd4)](a19_0x3e7c04(0xdc),adminController[a19_0x3e7c04(0x92)]),router[a19_0x3e7c04(0xd4)](a19_0x3e7c04(0xb1),adminController[a19_0x3e7c04(0xa6)]),router[a19_0x3e7c04(0x9b)](a19_0x3e7c04(0xb1),adminController[a19_0x3e7c04(0xbf)]),router[a19_0x3e7c04(0x9b)](a19_0x3e7c04(0x9c),(0x0,validation_1[a19_0x3e7c04(0xf8)])(validation_1[a19_0x3e7c04(0x84)]),adminController[a19_0x3e7c04(0x94)]),router[a19_0x3e7c04(0xd4)](a19_0x3e7c04(0xa7),adminController[a19_0x3e7c04(0xeb)]),router['get'](a19_0x3e7c04(0xaf),adminController[a19_0x3e7c04(0x99)]),router[a19_0x3e7c04(0xbe)](a19_0x3e7c04(0xa7),(0x0,validation_1[a19_0x3e7c04(0xf8)])(validation_1[a19_0x3e7c04(0xbc)]),adminController[a19_0x3e7c04(0x87)]),router[a19_0x3e7c04(0x9b)](a19_0x3e7c04(0xaf),(0x0,validation_1[a19_0x3e7c04(0xf8)])(validation_1[a19_0x3e7c04(0x9d)]),adminController[a19_0x3e7c04(0xe7)]),router[a19_0x3e7c04(0x7e)]('/users/:id',adminController[a19_0x3e7c04(0xa1)]),router[a19_0x3e7c04(0xbe)]('/users/:id/suspend',adminController['suspendUser']),router[a19_0x3e7c04(0xbe)]('/users/:id/activate',adminController[a19_0x3e7c04(0xf4)]),router[a19_0x3e7c04(0xd4)](a19_0x3e7c04(0xc6),(_0x19847b,_0x25efc3)=>{const _0x84b222=a19_0x3e7c04;try{const _0x3575a1=loggerService_1[_0x84b222(0xb9)]['getLogStats']();_0x25efc3[_0x84b222(0xaa)]({'success':!![],'result':_0x3575a1});}catch(_0x487a64){_0x25efc3[_0x84b222(0xab)](0x1f4)[_0x84b222(0xaa)]({'success':![],'message':_0x84b222(0xdd)});}}),router['post']('/logs/clean',(_0x5bc719,_0x5452f3)=>{const _0x43b801=a19_0x3e7c04;try{const {daysToKeep:daysToKeep=0x1e}=_0x5bc719['body'];loggerService_1[_0x43b801(0xb9)][_0x43b801(0xf9)](daysToKeep),_0x5452f3['json']({'success':!![],'message':'Old\x20logs\x20cleaned\x20(kept\x20last\x20'+daysToKeep+_0x43b801(0x95)});}catch(_0x1fb762){_0x5452f3[_0x43b801(0xab)](0x1f4)[_0x43b801(0xaa)]({'success':![],'message':_0x43b801(0xf0)});}}),router[a19_0x3e7c04(0xbe)](a19_0x3e7c04(0x88),async(_0x40fdb2,_0x17e338)=>{const _0x4c7c6b=a19_0x3e7c04;try{const {paymentId:_0x4243c6}=_0x40fdb2[_0x4c7c6b(0x9a)];console[_0x4c7c6b(0xb7)](_0x4c7c6b(0xb5)+_0x4243c6),await coinToPayStatusService_1[_0x4c7c6b(0x8b)][_0x4c7c6b(0xb8)](_0x4243c6),_0x17e338[_0x4c7c6b(0xaa)]({'success':!![],'message':_0x4c7c6b(0xd9)});}catch(_0x21b509){console[_0x4c7c6b(0xc5)](_0x4c7c6b(0x81)+_0x40fdb2['params'][_0x4c7c6b(0xc2)]+':',_0x21b509),_0x17e338[_0x4c7c6b(0xab)](0x1f4)[_0x4c7c6b(0xaa)]({'success':![],'message':_0x21b509 instanceof Error?_0x21b509[_0x4c7c6b(0xec)]:_0x4c7c6b(0xba)});}}),router[a19_0x3e7c04(0xd4)](a19_0x3e7c04(0xda),(_0x533c97,_0x476723)=>{const _0xd15348=a19_0x3e7c04;try{const _0x3aa262=coinToPayStatusService_1[_0xd15348(0x8b)][_0xd15348(0xc0)]();_0x476723['json']({'success':!![],'result':{..._0x3aa262,'description':'CoinToPay\x20automatic\x20status\x20checking\x20service','statusMapping':{'Paid':_0xd15348(0xd3),'Awaiting\x20Fiat':'PENDING','waiting':_0xd15348(0xf6),'expired':'EXPIRED','failed':_0xd15348(0xf2)},'autoExpiryNote':_0xd15348(0xf3)+_0x3aa262['expiryDays']+'\x20days\x20if\x20not\x20paid','individualTimersNote':_0xd15348(0xae)}});}catch(_0x50e8cf){_0x476723[_0xd15348(0xab)](0x1f4)['json']({'success':![],'message':'Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics'});}}),router[a19_0x3e7c04(0xd4)](a19_0x3e7c04(0xb2),async(_0x50c042,_0x3e7540)=>{const _0x3a0f91=a19_0x3e7c04;try{const {paymentId:_0x5c0dad}=_0x50c042['params'],_0x269029=coinToPayStatusService_1[_0x3a0f91(0x8b)]['getPaymentTimerInfo'](_0x5c0dad),_0x49d6f5=(await Promise[_0x3a0f91(0xbd)]()[_0x3a0f91(0xdb)](()=>__importStar(require(_0x3a0f91(0x8f)))))['default'],_0x39ab50=await _0x49d6f5[_0x3a0f91(0xe1)][_0x3a0f91(0xc1)]({'where':{'id':_0x5c0dad},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x39ab50)return _0x3e7540[_0x3a0f91(0xab)](0x194)[_0x3a0f91(0xaa)]({'success':![],'message':_0x3a0f91(0xcb)});_0x3e7540['json']({'success':!![],'result':{'payment':{'id':_0x39ab50['id'],'gateway':_0x39ab50[_0x3a0f91(0xc7)],'gatewayPaymentId':_0x39ab50[_0x3a0f91(0x8d)],'status':_0x39ab50[_0x3a0f91(0xab)],'amount':_0x39ab50[_0x3a0f91(0x89)],'currency':_0x39ab50['currency'],'createdAt':_0x39ab50[_0x3a0f91(0x8c)],'updatedAt':_0x39ab50[_0x3a0f91(0x8e)],'shop':_0x39ab50[_0x3a0f91(0xc4)]},'timers':_0x269029,'isCoinToPay':_0x39ab50[_0x3a0f91(0xc7)]===_0x3a0f91(0x85),'ageInMinutes':Math['floor']((Date[_0x3a0f91(0xe5)]()-_0x39ab50[_0x3a0f91(0x8c)][_0x3a0f91(0xa9)]())/(0x3e8*0x3c))}});}catch(_0x59e05d){_0x3e7540['status'](0x1f4)[_0x3a0f91(0xaa)]({'success':![],'message':_0x59e05d instanceof Error?_0x59e05d['message']:_0x3a0f91(0xe9)});}}),router[a19_0x3e7c04(0xd4)](a19_0x3e7c04(0x91),(_0x477d6a,_0x3c1e53)=>{const _0x35b3ba=a19_0x3e7c04;try{const _0x5c1017=domainMonitoringService_1[_0x35b3ba(0xce)][_0x35b3ba(0x83)]();_0x3c1e53['json']({'success':!![],'result':{..._0x5c1017,'description':'Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','behavior':_0x35b3ba(0xa5),'encoding':_0x35b3ba(0x7d)}});}catch(_0x3c2e98){_0x3c1e53[_0x35b3ba(0xab)](0x1f4)[_0x35b3ba(0xaa)]({'success':![],'message':'Failed\x20to\x20get\x20domain\x20monitoring\x20statistics'});}}),router[a19_0x3e7c04(0xbe)](a19_0x3e7c04(0xac),async(_0x1ba6bb,_0x25bbfc)=>{const _0x582f94=a19_0x3e7c04;try{const _0x271600=await domainMonitoringService_1[_0x582f94(0xce)]['manualCheck']();_0x25bbfc[_0x582f94(0xaa)]({'success':!![],'result':{'domainAvailable':_0x271600,'message':_0x271600?'Domain\x20is\x20responding\x20correctly':'Domain\x20check\x20failed','timestamp':new Date()['toISOString']()}});}catch(_0x15fb06){_0x25bbfc[_0x582f94(0xab)](0x1f4)[_0x582f94(0xaa)]({'success':![],'message':_0x15fb06 instanceof Error?_0x15fb06[_0x582f94(0xec)]:_0x582f94(0xa0)});}}),exports[a19_0x3e7c04(0xd0)]=router;