'use strict';function a19_0x537c(){const _0x41d089=['configurable','3156KdshWJ','PENDING','/logs/stats','EXPIRED','/users/:id/suspend','currency','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','Failed\x20to\x20perform\x20manual\x20domain\x20check','checkPaymentById','60tzBSeS','/payout','get','../services/coinToPayStatusService','put','authenticateToken','../middleware/validation','floor','getTime','Domain\x20check\x20failed','Payments\x20automatically\x20expire\x20after\x20','then','/payments/:id','express','getStatistics','/cointopay/check/:paymentId','/auth','getMonitoringStats','getPaymentById','gateway','log','payment','amount','delete','requireAdmin','/payouts/:id','error','createUser','findUnique','PAID','3928480xVLbtA','__esModule','createPayoutSchema','/users/:id','4908946iPcGWN','Failed\x20to\x20get\x20log\x20statistics','call','suspendUser','coinToPayStatusService','536brwnGU','/logs/clean','getPayoutById','createdAt','updatePayment','../services/domainMonitoringService','expiryDays','shop','status','toISOString','AdminController','prototype','../controllers/adminController','length','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','json','1838460JAAmpn','Router','updateCustomerData','18rhxinH','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','getOwnPropertyDescriptor','deleteUser','14379280HPtiJc','/payments','../config/database','727384tSBTgd','202348XINQky','updateCustomerDataSchema','\x20days\x20if\x20not\x20paid','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','\x20days)','CoinToPay\x20payment\x20status\x20checked\x20successfully','post','getServiceStats','/payout/merchants','../services/loggerService','Failed\x20to\x20get\x20payment\x20information','loggerService','cointopay','createUserSchema','checkAuth','/payout/stats','create','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','/users','__createBinding','getPayouts','writable','default','/payments/:id/customer','updatedAt','Domain\x20is\x20responding\x20correctly','body','activateUser','message','defineProperty','domainMonitoringService','hasOwnProperty','/domain-monitoring/check','paymentId','validate','use','resolve','getPayoutStats','params','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','FAILED'];a19_0x537c=function(){return _0x41d089;};return a19_0x537c();}const a19_0x55b5de=a19_0xdede;function a19_0xdede(_0x78cdf2,_0x21abf9){const _0x537cf5=a19_0x537c();return a19_0xdede=function(_0xdede7e,_0x4d2f34){_0xdede7e=_0xdede7e-0x1b9;let _0x3b0153=_0x537cf5[_0xdede7e];return _0x3b0153;},a19_0xdede(_0x78cdf2,_0x21abf9);}(function(_0x4c79f7,_0x3abb4b){const _0x3d37ef=a19_0xdede,_0x5cefe6=_0x4c79f7();while(!![]){try{const _0x32a642=-parseInt(_0x3d37ef(0x1fa))/0x1+parseInt(_0x3d37ef(0x1df))/0x2*(-parseInt(_0x3d37ef(0x225))/0x3)+-parseInt(_0x3d37ef(0x1fb))/0x4*(parseInt(_0x3d37ef(0x22e))/0x5)+parseInt(_0x3d37ef(0x1f0))/0x6+-parseInt(_0x3d37ef(0x1da))/0x7+-parseInt(_0x3d37ef(0x1d6))/0x8+parseInt(_0x3d37ef(0x1f3))/0x9*(parseInt(_0x3d37ef(0x1f7))/0xa);if(_0x32a642===_0x3abb4b)break;else _0x5cefe6['push'](_0x5cefe6['shift']());}catch(_0x40dfb8){_0x5cefe6['push'](_0x5cefe6['shift']());}}}(a19_0x537c,0x5b33c));var __createBinding=this&&this[a19_0x55b5de(0x20e)]||(Object[a19_0x55b5de(0x20b)]?function(_0x1edfe1,_0x38f61a,_0x82b85c,_0x29213a){const _0x1a1c49=a19_0x55b5de;if(_0x29213a===undefined)_0x29213a=_0x82b85c;var _0x3f1641=Object[_0x1a1c49(0x1f5)](_0x38f61a,_0x82b85c);(!_0x3f1641||('get'in _0x3f1641?!_0x38f61a['__esModule']:_0x3f1641[_0x1a1c49(0x210)]||_0x3f1641[_0x1a1c49(0x224)]))&&(_0x3f1641={'enumerable':!![],'get':function(){return _0x38f61a[_0x82b85c];}}),Object[_0x1a1c49(0x218)](_0x1edfe1,_0x29213a,_0x3f1641);}:function(_0x4a6a25,_0x1a0e6f,_0x300cb7,_0x3a307b){if(_0x3a307b===undefined)_0x3a307b=_0x300cb7;_0x4a6a25[_0x3a307b]=_0x1a0e6f[_0x300cb7];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object['create']?function(_0x2c51fc,_0x3f97a4){const _0x191ee3=a19_0x55b5de;Object[_0x191ee3(0x218)](_0x2c51fc,'default',{'enumerable':!![],'value':_0x3f97a4});}:function(_0x3f5a3b,_0x1b3d06){const _0x36d360=a19_0x55b5de;_0x3f5a3b[_0x36d360(0x211)]=_0x1b3d06;}),__importStar=this&&this['__importStar']||(function(){var _0x21c9d1=function(_0x54e022){return _0x21c9d1=Object['getOwnPropertyNames']||function(_0x289994){const _0x2ae848=a19_0xdede;var _0x2e12b3=[];for(var _0x1bbc23 in _0x289994)if(Object[_0x2ae848(0x1ea)][_0x2ae848(0x21a)][_0x2ae848(0x1dc)](_0x289994,_0x1bbc23))_0x2e12b3[_0x2e12b3[_0x2ae848(0x1ec)]]=_0x1bbc23;return _0x2e12b3;},_0x21c9d1(_0x54e022);};return function(_0x28cd47){const _0x438372=a19_0xdede;if(_0x28cd47&&_0x28cd47['__esModule'])return _0x28cd47;var _0x2cc691={};if(_0x28cd47!=null){for(var _0x4400de=_0x21c9d1(_0x28cd47),_0x565249=0x0;_0x565249<_0x4400de[_0x438372(0x1ec)];_0x565249++)if(_0x4400de[_0x565249]!==_0x438372(0x211))__createBinding(_0x2cc691,_0x28cd47,_0x4400de[_0x565249]);}return __setModuleDefault(_0x2cc691,_0x28cd47),_0x2cc691;};}());Object['defineProperty'](exports,a19_0x55b5de(0x1d7),{'value':!![]});const express_1=require(a19_0x55b5de(0x1c5)),adminController_1=require(a19_0x55b5de(0x1eb)),validation_1=require(a19_0x55b5de(0x1be)),auth_1=require('../middleware/auth'),loggerService_1=require(a19_0x55b5de(0x204)),coinToPayStatusService_1=require(a19_0x55b5de(0x1bb)),domainMonitoringService_1=require(a19_0x55b5de(0x1e4)),router=(0x0,express_1[a19_0x55b5de(0x1f1)])(),adminController=new adminController_1[(a19_0x55b5de(0x1e9))]();router[a19_0x55b5de(0x21e)](auth_1[a19_0x55b5de(0x1bd)],auth_1[a19_0x55b5de(0x1d0)]),router[a19_0x55b5de(0x1ba)](a19_0x55b5de(0x1c8),adminController[a19_0x55b5de(0x209)]),router[a19_0x55b5de(0x1ba)]('/statistics',adminController[a19_0x55b5de(0x1c6)]),router['get']('/merchant-statistics',adminController['getMerchantStatistics']),router[a19_0x55b5de(0x1ba)](a19_0x55b5de(0x20a),adminController[a19_0x55b5de(0x220)]),router[a19_0x55b5de(0x1ba)](a19_0x55b5de(0x203),adminController['getMerchantsAwaitingPayout']),router[a19_0x55b5de(0x201)](a19_0x55b5de(0x1b9),(0x0,validation_1[a19_0x55b5de(0x21d)])(validation_1[a19_0x55b5de(0x1d8)]),adminController['createPayout']),router[a19_0x55b5de(0x1ba)]('/payouts',adminController[a19_0x55b5de(0x20f)]),router[a19_0x55b5de(0x1ba)](a19_0x55b5de(0x1d1),adminController[a19_0x55b5de(0x1e1)]),router['delete'](a19_0x55b5de(0x1d1),adminController['deletePayout']),router[a19_0x55b5de(0x1ba)](a19_0x55b5de(0x1f8),adminController['getPayments']),router[a19_0x55b5de(0x1ba)](a19_0x55b5de(0x1c4),adminController[a19_0x55b5de(0x1ca)]),router[a19_0x55b5de(0x1bc)](a19_0x55b5de(0x1c4),adminController[a19_0x55b5de(0x1e3)]),router[a19_0x55b5de(0x1bc)](a19_0x55b5de(0x212),(0x0,validation_1[a19_0x55b5de(0x21d)])(validation_1[a19_0x55b5de(0x1fc)]),adminController[a19_0x55b5de(0x1f2)]),router[a19_0x55b5de(0x1ba)](a19_0x55b5de(0x20d),adminController['getUsers']),router[a19_0x55b5de(0x1ba)](a19_0x55b5de(0x1d9),adminController['getUserById']),router['post'](a19_0x55b5de(0x20d),(0x0,validation_1[a19_0x55b5de(0x21d)])(validation_1[a19_0x55b5de(0x208)]),adminController[a19_0x55b5de(0x1d3)]),router['put'](a19_0x55b5de(0x1d9),(0x0,validation_1[a19_0x55b5de(0x21d)])(validation_1['updateUserSchema']),adminController['updateUser']),router[a19_0x55b5de(0x1cf)](a19_0x55b5de(0x1d9),adminController[a19_0x55b5de(0x1f6)]),router['post'](a19_0x55b5de(0x229),adminController[a19_0x55b5de(0x1dd)]),router[a19_0x55b5de(0x201)]('/users/:id/activate',adminController[a19_0x55b5de(0x216)]),router['get'](a19_0x55b5de(0x227),(_0x5d5417,_0x8a910c)=>{const _0x475810=a19_0x55b5de;try{const _0x224f45=loggerService_1[_0x475810(0x206)]['getLogStats']();_0x8a910c['json']({'success':!![],'result':_0x224f45});}catch(_0x254864){_0x8a910c[_0x475810(0x1e7)](0x1f4)[_0x475810(0x1ef)]({'success':![],'message':_0x475810(0x1db)});}}),router[a19_0x55b5de(0x201)](a19_0x55b5de(0x1e0),(_0x6b97a,_0x2847c4)=>{const _0x287cec=a19_0x55b5de;try{const {daysToKeep:daysToKeep=0x1e}=_0x6b97a[_0x287cec(0x215)];loggerService_1[_0x287cec(0x206)]['cleanOldLogs'](daysToKeep),_0x2847c4[_0x287cec(0x1ef)]({'success':!![],'message':'Old\x20logs\x20cleaned\x20(kept\x20last\x20'+daysToKeep+_0x287cec(0x1ff)});}catch(_0xe24f20){_0x2847c4[_0x287cec(0x1e7)](0x1f4)[_0x287cec(0x1ef)]({'success':![],'message':'Failed\x20to\x20clean\x20old\x20logs'});}}),router['post'](a19_0x55b5de(0x1c7),async(_0x347946,_0x519e7a)=>{const _0x16cb90=a19_0x55b5de;try{const {paymentId:_0x5940bd}=_0x347946['params'];console[_0x16cb90(0x1cc)](_0x16cb90(0x1f4)+_0x5940bd),await coinToPayStatusService_1['coinToPayStatusService'][_0x16cb90(0x22d)](_0x5940bd),_0x519e7a[_0x16cb90(0x1ef)]({'success':!![],'message':_0x16cb90(0x200)});}catch(_0x14eadd){console[_0x16cb90(0x1d2)](_0x16cb90(0x1ee)+_0x347946[_0x16cb90(0x221)][_0x16cb90(0x21c)]+':',_0x14eadd),_0x519e7a[_0x16cb90(0x1e7)](0x1f4)[_0x16cb90(0x1ef)]({'success':![],'message':_0x14eadd instanceof Error?_0x14eadd[_0x16cb90(0x217)]:'Failed\x20to\x20check\x20CoinToPay\x20payment\x20status'});}}),router[a19_0x55b5de(0x1ba)]('/cointopay/stats',(_0x45e157,_0x4c250a)=>{const _0x4a5e0d=a19_0x55b5de;try{const _0x2f8126=coinToPayStatusService_1[_0x4a5e0d(0x1de)][_0x4a5e0d(0x202)]();_0x4c250a[_0x4a5e0d(0x1ef)]({'success':!![],'result':{..._0x2f8126,'description':'CoinToPay\x20automatic\x20status\x20checking\x20service','statusMapping':{'Paid':_0x4a5e0d(0x1d5),'Awaiting\x20Fiat':'PENDING','waiting':_0x4a5e0d(0x226),'expired':_0x4a5e0d(0x228),'failed':_0x4a5e0d(0x223)},'autoExpiryNote':_0x4a5e0d(0x1c2)+_0x2f8126[_0x4a5e0d(0x1e5)]+_0x4a5e0d(0x1fd),'individualTimersNote':_0x4a5e0d(0x1ed)}});}catch(_0x2489e9){_0x4c250a['status'](0x1f4)[_0x4a5e0d(0x1ef)]({'success':![],'message':_0x4a5e0d(0x1fe)});}}),router[a19_0x55b5de(0x1ba)]('/cointopay/payment/:paymentId',async(_0x454faa,_0x3381a5)=>{const _0x11fd52=a19_0x55b5de;try{const {paymentId:_0x15e3b1}=_0x454faa[_0x11fd52(0x221)],_0x3acf02=coinToPayStatusService_1['coinToPayStatusService']['getPaymentTimerInfo'](_0x15e3b1),_0x3271c4=(await Promise[_0x11fd52(0x21f)]()[_0x11fd52(0x1c3)](()=>__importStar(require(_0x11fd52(0x1f9)))))[_0x11fd52(0x211)],_0x50282a=await _0x3271c4[_0x11fd52(0x1cd)][_0x11fd52(0x1d4)]({'where':{'id':_0x15e3b1},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x50282a)return _0x3381a5[_0x11fd52(0x1e7)](0x194)[_0x11fd52(0x1ef)]({'success':![],'message':'Payment\x20not\x20found'});_0x3381a5[_0x11fd52(0x1ef)]({'success':!![],'result':{'payment':{'id':_0x50282a['id'],'gateway':_0x50282a[_0x11fd52(0x1cb)],'gatewayPaymentId':_0x50282a['gatewayPaymentId'],'status':_0x50282a['status'],'amount':_0x50282a[_0x11fd52(0x1ce)],'currency':_0x50282a[_0x11fd52(0x22a)],'createdAt':_0x50282a[_0x11fd52(0x1e2)],'updatedAt':_0x50282a[_0x11fd52(0x213)],'shop':_0x50282a[_0x11fd52(0x1e6)]},'timers':_0x3acf02,'isCoinToPay':_0x50282a['gateway']===_0x11fd52(0x207),'ageInMinutes':Math[_0x11fd52(0x1bf)]((Date['now']()-_0x50282a[_0x11fd52(0x1e2)][_0x11fd52(0x1c0)]())/(0x3e8*0x3c))}});}catch(_0x58b9bb){_0x3381a5['status'](0x1f4)['json']({'success':![],'message':_0x58b9bb instanceof Error?_0x58b9bb[_0x11fd52(0x217)]:_0x11fd52(0x205)});}}),router[a19_0x55b5de(0x1ba)]('/domain-monitoring/stats',(_0x228da1,_0x43f457)=>{const _0x1d658c=a19_0x55b5de;try{const _0x12b196=domainMonitoringService_1[_0x1d658c(0x219)][_0x1d658c(0x1c9)]();_0x43f457[_0x1d658c(0x1ef)]({'success':!![],'result':{..._0x12b196,'description':_0x1d658c(0x222),'behavior':_0x1d658c(0x20c),'encoding':_0x1d658c(0x22b)}});}catch(_0x2e4b5d){_0x43f457[_0x1d658c(0x1e7)](0x1f4)['json']({'success':![],'message':'Failed\x20to\x20get\x20domain\x20monitoring\x20statistics'});}}),router[a19_0x55b5de(0x201)](a19_0x55b5de(0x21b),async(_0xbddd30,_0x41673e)=>{const _0x2ade48=a19_0x55b5de;try{const _0x4dcf46=await domainMonitoringService_1[_0x2ade48(0x219)]['manualCheck']();_0x41673e[_0x2ade48(0x1ef)]({'success':!![],'result':{'domainAvailable':_0x4dcf46,'message':_0x4dcf46?_0x2ade48(0x214):_0x2ade48(0x1c1),'timestamp':new Date()[_0x2ade48(0x1e8)]()}});}catch(_0x146c35){_0x41673e['status'](0x1f4)['json']({'success':![],'message':_0x146c35 instanceof Error?_0x146c35[_0x2ade48(0x217)]:_0x2ade48(0x22c)});}}),exports[a19_0x55b5de(0x211)]=router;