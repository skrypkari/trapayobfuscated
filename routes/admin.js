'use strict';function a25_0x3eb1(){const _0x5e5818=['Failed\x20to\x20get\x20log\x20statistics','expirePaymentLinks','/payout/merchants','1992760mvvFuC','getPaymentById','cleanupStalePendingPayments','json','getPayoutById','message','/domain-monitoring/check','Router','Failed\x20to\x20perform\x20manual\x20domain\x20check','21Kchwzo','__importStar','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','checkAuth','getShopWallets','length','cleanOldLogs','/shops/:shopId/wallets','getPayouts','default','../middleware/auth','cointopay','1552620fbqVGl','configurable','gatewayPaymentId','cleanupStalePayments','Failed\x20to\x20get\x20payment\x20information','/cointopay/check/:paymentId','amount','suspendUser','call','use','resolve','/logs/stats','5509674ZPVAwb','getUserById','/logs/clean','getUsers','/users/:id','updateCustomerDataSchema','getMerchantsAwaitingPayout','45097UEFUcQ','findUnique','getTime','/payments/cleanup-with-report','paymentId','disable2FA','domainMonitoringService','/statistics','validate','../services/loggerService','\x20days\x20if\x20not\x20paid','get','../controllers/adminController','408426hGNQJU','CoinToPay\x20automatic\x20status\x20checking\x20service','createdAt','1588245bwPSjM','defineProperty','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','writable','createUserSchema','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','getOwnPropertyDescriptor','484560dPDMBV','/payments/cleanup-pending','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','deletePayout','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','getLogStats','/payments/:id','__esModule','CoinToPay\x20payment\x20status\x20checked\x20successfully','../config/database','expiryDays','/users/:id/suspend','/payout','create','floor','Domain\x20is\x20responding\x20correctly','updatePayout','PAID','createUser','/payouts','updatedAt','/payments/:id/customer','put','/cointopay/stats','getMonitoringStats','updateUserSchema','updateCustomerData','Failed\x20to\x20clean\x20old\x20logs','loggerService','/payments/cleanup','error','authenticateToken','log','createPayout','status','params','Payments\x20automatically\x20expire\x20after\x20','/merchant-statistics','Old\x20logs\x20cleaned\x20(kept\x20last\x20','/payments/processing-stats','body','__createBinding','now','activateUser','/users/:id/activate','coinToPayStatusService','gateway','updateUser','/users','FAILED','then','AdminController','delete','/shops/:shopId/2fa/enable','post','../services/coinToPayStatusService','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','cleanupStalePaymentsWithReport','getProcessingPaymentsStats','enable2FA','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','2FxEivo','manualCheck','../middleware/validation','/payouts/:id','shop'];a25_0x3eb1=function(){return _0x5e5818;};return a25_0x3eb1();}const a25_0x9843fb=a25_0x2b77;(function(_0x5648e2,_0x5c2563){const _0x5d1c0f=a25_0x2b77,_0x181609=_0x5648e2();while(!![]){try{const _0x3f9ec0=parseInt(_0x5d1c0f(0x229))/0x1+parseInt(_0x5d1c0f(0x1f9))/0x2*(parseInt(_0x5d1c0f(0x236))/0x3)+-parseInt(_0x5d1c0f(0x216))/0x4+parseInt(_0x5d1c0f(0x239))/0x5+parseInt(_0x5d1c0f(0x240))/0x6*(-parseInt(_0x5d1c0f(0x20a))/0x7)+-parseInt(_0x5d1c0f(0x201))/0x8+parseInt(_0x5d1c0f(0x222))/0x9;if(_0x3f9ec0===_0x5c2563)break;else _0x181609['push'](_0x181609['shift']());}catch(_0x190937){_0x181609['push'](_0x181609['shift']());}}}(a25_0x3eb1,0x38878));var __createBinding=this&&this[a25_0x9843fb(0x1e5)]||(Object[a25_0x9843fb(0x1c9)]?function(_0x34032c,_0x652e99,_0x55e45e,_0xb1f331){const _0x2b572c=a25_0x9843fb;if(_0xb1f331===undefined)_0xb1f331=_0x55e45e;var _0x48d6f4=Object[_0x2b572c(0x23f)](_0x652e99,_0x55e45e);(!_0x48d6f4||(_0x2b572c(0x234)in _0x48d6f4?!_0x652e99[_0x2b572c(0x1c3)]:_0x48d6f4[_0x2b572c(0x23c)]||_0x48d6f4[_0x2b572c(0x217)]))&&(_0x48d6f4={'enumerable':!![],'get':function(){return _0x652e99[_0x55e45e];}}),Object['defineProperty'](_0x34032c,_0xb1f331,_0x48d6f4);}:function(_0x356786,_0x11ef1d,_0x1715e8,_0x1b07c3){if(_0x1b07c3===undefined)_0x1b07c3=_0x1715e8;_0x356786[_0x1b07c3]=_0x11ef1d[_0x1715e8];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a25_0x9843fb(0x1c9)]?function(_0x13fa52,_0x2c6bd6){const _0xf0b6c2=a25_0x9843fb;Object[_0xf0b6c2(0x23a)](_0x13fa52,_0xf0b6c2(0x213),{'enumerable':!![],'value':_0x2c6bd6});}:function(_0x4568a3,_0x3e25ad){const _0x3758c2=a25_0x9843fb;_0x4568a3[_0x3758c2(0x213)]=_0x3e25ad;}),__importStar=this&&this[a25_0x9843fb(0x20b)]||(function(){var _0x36fe16=function(_0x12f8e0){return _0x36fe16=Object['getOwnPropertyNames']||function(_0x43615e){const _0x38c0f8=a25_0x2b77;var _0x1c4f51=[];for(var _0x5ccff7 in _0x43615e)if(Object['prototype']['hasOwnProperty'][_0x38c0f8(0x21e)](_0x43615e,_0x5ccff7))_0x1c4f51[_0x1c4f51[_0x38c0f8(0x20f)]]=_0x5ccff7;return _0x1c4f51;},_0x36fe16(_0x12f8e0);};return function(_0x43d17f){const _0x144165=a25_0x2b77;if(_0x43d17f&&_0x43d17f[_0x144165(0x1c3)])return _0x43d17f;var _0x940d1={};if(_0x43d17f!=null){for(var _0x3e64c2=_0x36fe16(_0x43d17f),_0x825bd9=0x0;_0x825bd9<_0x3e64c2[_0x144165(0x20f)];_0x825bd9++)if(_0x3e64c2[_0x825bd9]!==_0x144165(0x213))__createBinding(_0x940d1,_0x43d17f,_0x3e64c2[_0x825bd9]);}return __setModuleDefault(_0x940d1,_0x43d17f),_0x940d1;};}());Object[a25_0x9843fb(0x23a)](exports,a25_0x9843fb(0x1c3),{'value':!![]});const express_1=require('express'),adminController_1=require(a25_0x9843fb(0x235)),validation_1=require(a25_0x9843fb(0x1fb)),auth_1=require(a25_0x9843fb(0x214)),loggerService_1=require(a25_0x9843fb(0x232)),coinToPayStatusService_1=require(a25_0x9843fb(0x1f3)),domainMonitoringService_1=require('../services/domainMonitoringService'),router=(0x0,express_1[a25_0x9843fb(0x208)])(),adminController=new adminController_1[(a25_0x9843fb(0x1ef))]();function a25_0x2b77(_0x2db7e6,_0x523d11){_0x2db7e6=_0x2db7e6-0x1bd;const _0x3eb185=a25_0x3eb1();let _0x2b77fa=_0x3eb185[_0x2db7e6];return _0x2b77fa;}router[a25_0x9843fb(0x21f)](auth_1[a25_0x9843fb(0x1db)],auth_1['requireAdmin']),router[a25_0x9843fb(0x234)]('/auth',adminController[a25_0x9843fb(0x20d)]),router[a25_0x9843fb(0x234)](a25_0x9843fb(0x230),adminController['getStatistics']),router[a25_0x9843fb(0x234)](a25_0x9843fb(0x1e1),adminController['getMerchantStatistics']),router['get']('/payout/stats',adminController['getPayoutStats']),router[a25_0x9843fb(0x234)](a25_0x9843fb(0x200),adminController[a25_0x9843fb(0x228)]),router['get']('/merchants/selection',adminController['getMerchantsSelection']),router[a25_0x9843fb(0x1f2)](a25_0x9843fb(0x1c8),(0x0,validation_1[a25_0x9843fb(0x231)])(validation_1['createPayoutSchema']),adminController[a25_0x9843fb(0x1dd)]),router[a25_0x9843fb(0x1d2)]('/payout/:id',(0x0,validation_1['validate'])(validation_1['updatePayoutSchema']),adminController[a25_0x9843fb(0x1cc)]),router['get'](a25_0x9843fb(0x1cf),adminController[a25_0x9843fb(0x212)]),router[a25_0x9843fb(0x234)](a25_0x9843fb(0x1fc),adminController[a25_0x9843fb(0x205)]),router[a25_0x9843fb(0x1f0)](a25_0x9843fb(0x1fc),adminController[a25_0x9843fb(0x1bf)]),router[a25_0x9843fb(0x234)]('/payments',adminController['getPayments']),router['get']('/payments/:id',adminController[a25_0x9843fb(0x202)]),router[a25_0x9843fb(0x1d2)](a25_0x9843fb(0x1c2),adminController['updatePayment']),router[a25_0x9843fb(0x1d2)](a25_0x9843fb(0x1d1),(0x0,validation_1[a25_0x9843fb(0x231)])(validation_1[a25_0x9843fb(0x227)]),adminController[a25_0x9843fb(0x1d6)]),router[a25_0x9843fb(0x234)](a25_0x9843fb(0x1e3),adminController[a25_0x9843fb(0x1f6)]),router[a25_0x9843fb(0x1f2)](a25_0x9843fb(0x1d9),adminController[a25_0x9843fb(0x219)]),router[a25_0x9843fb(0x1f2)](a25_0x9843fb(0x1bd),adminController[a25_0x9843fb(0x203)]),router['post'](a25_0x9843fb(0x22c),adminController[a25_0x9843fb(0x1f5)]),router[a25_0x9843fb(0x1f2)]('/payment-links/expire',adminController[a25_0x9843fb(0x1ff)]),router[a25_0x9843fb(0x234)](a25_0x9843fb(0x1ec),adminController[a25_0x9843fb(0x225)]),router[a25_0x9843fb(0x234)](a25_0x9843fb(0x226),adminController[a25_0x9843fb(0x223)]),router['post'](a25_0x9843fb(0x1ec),(0x0,validation_1[a25_0x9843fb(0x231)])(validation_1[a25_0x9843fb(0x23d)]),adminController[a25_0x9843fb(0x1ce)]),router[a25_0x9843fb(0x1d2)](a25_0x9843fb(0x226),(0x0,validation_1[a25_0x9843fb(0x231)])(validation_1[a25_0x9843fb(0x1d5)]),adminController[a25_0x9843fb(0x1eb)]),router[a25_0x9843fb(0x1f0)]('/users/:id',adminController['deleteUser']),router['get'](a25_0x9843fb(0x211),adminController[a25_0x9843fb(0x20e)]),router[a25_0x9843fb(0x1f2)]('/shops/:shopId/2fa/setup',adminController['setup2FA']),router['post'](a25_0x9843fb(0x1f1),adminController[a25_0x9843fb(0x1f7)]),router['post']('/shops/:shopId/2fa/disable',adminController[a25_0x9843fb(0x22e)]),router['post'](a25_0x9843fb(0x1c7),adminController[a25_0x9843fb(0x21d)]),router[a25_0x9843fb(0x1f2)](a25_0x9843fb(0x1e8),adminController[a25_0x9843fb(0x1e7)]),router[a25_0x9843fb(0x234)](a25_0x9843fb(0x221),(_0x344b99,_0xb9bc7c)=>{const _0x5de2e7=a25_0x9843fb;try{const _0x69a72f=loggerService_1[_0x5de2e7(0x1d8)][_0x5de2e7(0x1c1)]();_0xb9bc7c[_0x5de2e7(0x204)]({'success':!![],'result':_0x69a72f});}catch(_0x260d62){_0xb9bc7c[_0x5de2e7(0x1de)](0x1f4)['json']({'success':![],'message':_0x5de2e7(0x1fe)});}}),router[a25_0x9843fb(0x1f2)](a25_0x9843fb(0x224),(_0x2dca4b,_0x2e1b22)=>{const _0xe89439=a25_0x9843fb;try{const {daysToKeep:daysToKeep=0x1e}=_0x2dca4b[_0xe89439(0x1e4)];loggerService_1[_0xe89439(0x1d8)][_0xe89439(0x210)](daysToKeep),_0x2e1b22[_0xe89439(0x204)]({'success':!![],'message':_0xe89439(0x1e2)+daysToKeep+'\x20days)'});}catch(_0x57dfad){_0x2e1b22['status'](0x1f4)['json']({'success':![],'message':_0xe89439(0x1d7)});}}),router[a25_0x9843fb(0x1f2)](a25_0x9843fb(0x21b),async(_0x32bc74,_0x18cbef)=>{const _0x469a6d=a25_0x9843fb;try{const {paymentId:_0x12c0dd}=_0x32bc74['params'];console[_0x469a6d(0x1dc)](_0x469a6d(0x1be)+_0x12c0dd),await coinToPayStatusService_1['coinToPayStatusService']['checkPaymentById'](_0x12c0dd),_0x18cbef['json']({'success':!![],'message':_0x469a6d(0x1c4)});}catch(_0x38a1b1){console[_0x469a6d(0x1da)](_0x469a6d(0x23b)+_0x32bc74[_0x469a6d(0x1df)][_0x469a6d(0x22d)]+':',_0x38a1b1),_0x18cbef['status'](0x1f4)[_0x469a6d(0x204)]({'success':![],'message':_0x38a1b1 instanceof Error?_0x38a1b1[_0x469a6d(0x206)]:_0x469a6d(0x20c)});}}),router[a25_0x9843fb(0x234)](a25_0x9843fb(0x1d3),(_0x180fb4,_0x3f99bd)=>{const _0x2dd5bd=a25_0x9843fb;try{const _0x565246=coinToPayStatusService_1[_0x2dd5bd(0x1e9)]['getServiceStats']();_0x3f99bd[_0x2dd5bd(0x204)]({'success':!![],'result':{..._0x565246,'description':_0x2dd5bd(0x237),'statusMapping':{'Paid':_0x2dd5bd(0x1cd),'Awaiting\x20Fiat':'PENDING','waiting':'PENDING','expired':'EXPIRED','failed':_0x2dd5bd(0x1ed)},'autoExpiryNote':_0x2dd5bd(0x1e0)+_0x565246[_0x2dd5bd(0x1c6)]+_0x2dd5bd(0x233),'individualTimersNote':_0x2dd5bd(0x1c0)}});}catch(_0x351111){_0x3f99bd[_0x2dd5bd(0x1de)](0x1f4)[_0x2dd5bd(0x204)]({'success':![],'message':'Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics'});}}),router[a25_0x9843fb(0x234)]('/cointopay/payment/:paymentId',async(_0x369dd4,_0x469d7a)=>{const _0x381230=a25_0x9843fb;try{const {paymentId:_0x2a4bb4}=_0x369dd4[_0x381230(0x1df)],_0x2030a2=coinToPayStatusService_1['coinToPayStatusService']['getPaymentTimerInfo'](_0x2a4bb4),_0xafb081=(await Promise[_0x381230(0x220)]()[_0x381230(0x1ee)](()=>__importStar(require(_0x381230(0x1c5)))))['default'],_0x10f276=await _0xafb081['payment'][_0x381230(0x22a)]({'where':{'id':_0x2a4bb4},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x10f276)return _0x469d7a['status'](0x194)[_0x381230(0x204)]({'success':![],'message':'Payment\x20not\x20found'});_0x469d7a[_0x381230(0x204)]({'success':!![],'result':{'payment':{'id':_0x10f276['id'],'gateway':_0x10f276[_0x381230(0x1ea)],'gatewayPaymentId':_0x10f276[_0x381230(0x218)],'status':_0x10f276[_0x381230(0x1de)],'amount':_0x10f276[_0x381230(0x21c)],'currency':_0x10f276['currency'],'createdAt':_0x10f276[_0x381230(0x238)],'updatedAt':_0x10f276[_0x381230(0x1d0)],'shop':_0x10f276[_0x381230(0x1fd)]},'timers':_0x2030a2,'isCoinToPay':_0x10f276['gateway']===_0x381230(0x215),'ageInMinutes':Math[_0x381230(0x1ca)]((Date[_0x381230(0x1e6)]()-_0x10f276[_0x381230(0x238)][_0x381230(0x22b)]())/(0x3e8*0x3c))}});}catch(_0xd4f135){_0x469d7a[_0x381230(0x1de)](0x1f4)[_0x381230(0x204)]({'success':![],'message':_0xd4f135 instanceof Error?_0xd4f135[_0x381230(0x206)]:_0x381230(0x21a)});}}),router[a25_0x9843fb(0x234)]('/domain-monitoring/stats',(_0x2656df,_0x4f8b80)=>{const _0x3efdcd=a25_0x9843fb;try{const _0x140dfe=domainMonitoringService_1[_0x3efdcd(0x22f)][_0x3efdcd(0x1d4)]();_0x4f8b80[_0x3efdcd(0x204)]({'success':!![],'result':{..._0x140dfe,'description':_0x3efdcd(0x23e),'behavior':'Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','encoding':_0x3efdcd(0x1f8)}});}catch(_0xafeff2){_0x4f8b80[_0x3efdcd(0x1de)](0x1f4)[_0x3efdcd(0x204)]({'success':![],'message':_0x3efdcd(0x1f4)});}}),router[a25_0x9843fb(0x1f2)](a25_0x9843fb(0x207),async(_0x26bb78,_0x5cffe4)=>{const _0x239f7f=a25_0x9843fb;try{const _0x34a75f=await domainMonitoringService_1[_0x239f7f(0x22f)][_0x239f7f(0x1fa)]();_0x5cffe4[_0x239f7f(0x204)]({'success':!![],'result':{'domainAvailable':_0x34a75f,'message':_0x34a75f?_0x239f7f(0x1cb):'Domain\x20check\x20failed','timestamp':new Date()['toISOString']()}});}catch(_0x19b6c8){_0x5cffe4['status'](0x1f4)[_0x239f7f(0x204)]({'success':![],'message':_0x19b6c8 instanceof Error?_0x19b6c8[_0x239f7f(0x206)]:_0x239f7f(0x209)});}}),exports[a25_0x9843fb(0x213)]=router;