'use strict';const a20_0x1ab1a4=a20_0x4c9a;(function(_0xd3b826,_0x5097d4){const _0x26e7e2=a20_0x4c9a,_0x718fb6=_0xd3b826();while(!![]){try{const _0x3b64cc=parseInt(_0x26e7e2(0xaa))/0x1+parseInt(_0x26e7e2(0x9a))/0x2*(parseInt(_0x26e7e2(0xcc))/0x3)+-parseInt(_0x26e7e2(0x79))/0x4*(parseInt(_0x26e7e2(0xd8))/0x5)+parseInt(_0x26e7e2(0xdf))/0x6+parseInt(_0x26e7e2(0xd4))/0x7+-parseInt(_0x26e7e2(0xbf))/0x8+-parseInt(_0x26e7e2(0x8f))/0x9*(parseInt(_0x26e7e2(0x82))/0xa);if(_0x3b64cc===_0x5097d4)break;else _0x718fb6['push'](_0x718fb6['shift']());}catch(_0x290c0c){_0x718fb6['push'](_0x718fb6['shift']());}}}(a20_0x7be5,0xb76dc));var __createBinding=this&&this['__createBinding']||(Object['create']?function(_0x9b8a20,_0x596416,_0x8e326f,_0x4800a9){const _0x544f46=a20_0x4c9a;if(_0x4800a9===undefined)_0x4800a9=_0x8e326f;var _0x306d80=Object['getOwnPropertyDescriptor'](_0x596416,_0x8e326f);(!_0x306d80||(_0x544f46(0x9b)in _0x306d80?!_0x596416[_0x544f46(0xa7)]:_0x306d80[_0x544f46(0xd0)]||_0x306d80[_0x544f46(0xad)]))&&(_0x306d80={'enumerable':!![],'get':function(){return _0x596416[_0x8e326f];}}),Object[_0x544f46(0xa1)](_0x9b8a20,_0x4800a9,_0x306d80);}:function(_0xe1da7d,_0x310552,_0x507880,_0x15ab55){if(_0x15ab55===undefined)_0x15ab55=_0x507880;_0xe1da7d[_0x15ab55]=_0x310552[_0x507880];}),__setModuleDefault=this&&this[a20_0x1ab1a4(0xa8)]||(Object[a20_0x1ab1a4(0xb3)]?function(_0x5c6c57,_0x105f75){const _0x21a9f3=a20_0x1ab1a4;Object[_0x21a9f3(0xa1)](_0x5c6c57,'default',{'enumerable':!![],'value':_0x105f75});}:function(_0x551da7,_0x43ca47){const _0x21c894=a20_0x1ab1a4;_0x551da7[_0x21c894(0x81)]=_0x43ca47;}),__importStar=this&&this[a20_0x1ab1a4(0xe7)]||(function(){var _0x2e5393=function(_0x55ca3e){const _0x4d128b=a20_0x4c9a;return _0x2e5393=Object[_0x4d128b(0x76)]||function(_0x113bc7){const _0x520e47=_0x4d128b;var _0x17e949=[];for(var _0x3a8bd8 in _0x113bc7)if(Object[_0x520e47(0xab)][_0x520e47(0x89)]['call'](_0x113bc7,_0x3a8bd8))_0x17e949[_0x17e949[_0x520e47(0x84)]]=_0x3a8bd8;return _0x17e949;},_0x2e5393(_0x55ca3e);};return function(_0x4f6eab){const _0x291a0c=a20_0x4c9a;if(_0x4f6eab&&_0x4f6eab['__esModule'])return _0x4f6eab;var _0x353336={};if(_0x4f6eab!=null){for(var _0x3cae81=_0x2e5393(_0x4f6eab),_0x3be1dc=0x0;_0x3be1dc<_0x3cae81[_0x291a0c(0x84)];_0x3be1dc++)if(_0x3cae81[_0x3be1dc]!==_0x291a0c(0x81))__createBinding(_0x353336,_0x4f6eab,_0x3cae81[_0x3be1dc]);}return __setModuleDefault(_0x353336,_0x4f6eab),_0x353336;};}());Object[a20_0x1ab1a4(0xa1)](exports,a20_0x1ab1a4(0xa7),{'value':!![]});function a20_0x4c9a(_0x2a8b08,_0x58ec65){const _0x7be57c=a20_0x7be5();return a20_0x4c9a=function(_0x4c9a3a,_0x2f7de4){_0x4c9a3a=_0x4c9a3a-0x70;let _0x3d671e=_0x7be57c[_0x4c9a3a];return _0x3d671e;},a20_0x4c9a(_0x2a8b08,_0x58ec65);}const express_1=require(a20_0x1ab1a4(0x77)),adminController_1=require(a20_0x1ab1a4(0x96)),validation_1=require(a20_0x1ab1a4(0xaf)),auth_1=require(a20_0x1ab1a4(0xec)),loggerService_1=require(a20_0x1ab1a4(0xe0)),coinToPayStatusService_1=require('../services/coinToPayStatusService'),domainMonitoringService_1=require(a20_0x1ab1a4(0xca)),router=(0x0,express_1['Router'])(),adminController=new adminController_1['AdminController']();router[a20_0x1ab1a4(0x83)](auth_1[a20_0x1ab1a4(0x7c)],auth_1[a20_0x1ab1a4(0x9d)]),router[a20_0x1ab1a4(0x9b)](a20_0x1ab1a4(0xd1),adminController['checkAuth']),router[a20_0x1ab1a4(0x9b)](a20_0x1ab1a4(0x7e),adminController[a20_0x1ab1a4(0x7d)]),router[a20_0x1ab1a4(0x9b)](a20_0x1ab1a4(0x90),adminController['getMerchantStatistics']),router['get'](a20_0x1ab1a4(0xc8),adminController[a20_0x1ab1a4(0x7f)]),router['get']('/payout/merchants',adminController[a20_0x1ab1a4(0x95)]),router['get'](a20_0x1ab1a4(0xb9),adminController[a20_0x1ab1a4(0xbb)]),router[a20_0x1ab1a4(0xb4)](a20_0x1ab1a4(0x75),(0x0,validation_1['validate'])(validation_1[a20_0x1ab1a4(0xcd)]),adminController[a20_0x1ab1a4(0xbe)]),router['get'](a20_0x1ab1a4(0xd3),adminController[a20_0x1ab1a4(0xba)]),router[a20_0x1ab1a4(0x9b)](a20_0x1ab1a4(0xc0),adminController[a20_0x1ab1a4(0xb1)]),router[a20_0x1ab1a4(0xcf)](a20_0x1ab1a4(0xc0),adminController[a20_0x1ab1a4(0xb6)]),router[a20_0x1ab1a4(0x9b)](a20_0x1ab1a4(0x8e),adminController[a20_0x1ab1a4(0xd6)]),router[a20_0x1ab1a4(0x9b)](a20_0x1ab1a4(0xdd),adminController[a20_0x1ab1a4(0xa0)]),router['put'](a20_0x1ab1a4(0xdd),adminController['updatePayment']),router[a20_0x1ab1a4(0x8d)](a20_0x1ab1a4(0xe6),(0x0,validation_1['validate'])(validation_1[a20_0x1ab1a4(0x85)]),adminController[a20_0x1ab1a4(0xe1)]),router[a20_0x1ab1a4(0x9b)](a20_0x1ab1a4(0xcb),adminController[a20_0x1ab1a4(0x8a)]),router[a20_0x1ab1a4(0x9b)](a20_0x1ab1a4(0xc5),adminController[a20_0x1ab1a4(0xef)]),router[a20_0x1ab1a4(0xb4)]('/users',(0x0,validation_1[a20_0x1ab1a4(0xc2)])(validation_1['createUserSchema']),adminController[a20_0x1ab1a4(0xac)]),router[a20_0x1ab1a4(0x8d)](a20_0x1ab1a4(0xc5),(0x0,validation_1[a20_0x1ab1a4(0xc2)])(validation_1[a20_0x1ab1a4(0xe4)]),adminController[a20_0x1ab1a4(0x94)]),router[a20_0x1ab1a4(0xcf)](a20_0x1ab1a4(0xc5),adminController[a20_0x1ab1a4(0xc3)]),router[a20_0x1ab1a4(0xb4)]('/users/:id/suspend',adminController[a20_0x1ab1a4(0xa5)]),router[a20_0x1ab1a4(0xb4)](a20_0x1ab1a4(0x80),adminController['activateUser']),router[a20_0x1ab1a4(0x9b)](a20_0x1ab1a4(0xa9),(_0x3de3d8,_0x5a6d7c)=>{const _0x46ab02=a20_0x1ab1a4;try{const _0x1931fa=loggerService_1[_0x46ab02(0x7b)][_0x46ab02(0x98)]();_0x5a6d7c[_0x46ab02(0xea)]({'success':!![],'result':_0x1931fa});}catch(_0x44c953){_0x5a6d7c['status'](0x1f4)[_0x46ab02(0xea)]({'success':![],'message':_0x46ab02(0xe8)});}}),router[a20_0x1ab1a4(0xb4)](a20_0x1ab1a4(0xb8),(_0x59e812,_0x3a42c9)=>{const _0x1a0840=a20_0x1ab1a4;try{const {daysToKeep:daysToKeep=0x1e}=_0x59e812[_0x1a0840(0x73)];loggerService_1[_0x1a0840(0x7b)][_0x1a0840(0x8c)](daysToKeep),_0x3a42c9[_0x1a0840(0xea)]({'success':!![],'message':_0x1a0840(0xd5)+daysToKeep+_0x1a0840(0xc7)});}catch(_0x5baf02){_0x3a42c9['status'](0x1f4)[_0x1a0840(0xea)]({'success':![],'message':_0x1a0840(0xda)});}}),router['post'](a20_0x1ab1a4(0xee),async(_0x3ff87e,_0x775ae2)=>{const _0x42357d=a20_0x1ab1a4;try{const {paymentId:_0x3b0a72}=_0x3ff87e['params'];console[_0x42357d(0x9e)]('🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20'+_0x3b0a72),await coinToPayStatusService_1[_0x42357d(0xa6)]['checkPaymentById'](_0x3b0a72),_0x775ae2[_0x42357d(0xea)]({'success':!![],'message':_0x42357d(0xc1)});}catch(_0x1ab34f){console['error'](_0x42357d(0xd2)+_0x3ff87e[_0x42357d(0xa3)]['paymentId']+':',_0x1ab34f),_0x775ae2[_0x42357d(0x93)](0x1f4)[_0x42357d(0xea)]({'success':![],'message':_0x1ab34f instanceof Error?_0x1ab34f[_0x42357d(0xb0)]:_0x42357d(0xe2)});}}),router[a20_0x1ab1a4(0x9b)](a20_0x1ab1a4(0xd7),(_0x1added,_0x1cf0ee)=>{const _0x408ed9=a20_0x1ab1a4;try{const _0x117344=coinToPayStatusService_1[_0x408ed9(0xa6)][_0x408ed9(0xb2)]();_0x1cf0ee['json']({'success':!![],'result':{..._0x117344,'description':_0x408ed9(0x7a),'statusMapping':{'Paid':'PAID','Awaiting\x20Fiat':_0x408ed9(0x70),'waiting':_0x408ed9(0x70),'expired':_0x408ed9(0xe3),'failed':_0x408ed9(0xc6)},'autoExpiryNote':_0x408ed9(0xbd)+_0x117344[_0x408ed9(0x88)]+_0x408ed9(0xed),'individualTimersNote':_0x408ed9(0x74)}});}catch(_0x2c4270){_0x1cf0ee['status'](0x1f4)[_0x408ed9(0xea)]({'success':![],'message':_0x408ed9(0xbc)});}}),router[a20_0x1ab1a4(0x9b)](a20_0x1ab1a4(0x99),async(_0x55b79f,_0x3dbadd)=>{const _0x2fcae=a20_0x1ab1a4;try{const {paymentId:_0x32634f}=_0x55b79f[_0x2fcae(0xa3)],_0x578235=coinToPayStatusService_1[_0x2fcae(0xa6)][_0x2fcae(0xde)](_0x32634f),_0xfc230d=(await Promise[_0x2fcae(0x71)]()[_0x2fcae(0x9f)](()=>__importStar(require(_0x2fcae(0x8b)))))[_0x2fcae(0x81)],_0x2c7f68=await _0xfc230d[_0x2fcae(0x86)][_0x2fcae(0xd9)]({'where':{'id':_0x32634f},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x2c7f68)return _0x3dbadd[_0x2fcae(0x93)](0x194)['json']({'success':![],'message':_0x2fcae(0xeb)});_0x3dbadd['json']({'success':!![],'result':{'payment':{'id':_0x2c7f68['id'],'gateway':_0x2c7f68['gateway'],'gatewayPaymentId':_0x2c7f68[_0x2fcae(0x97)],'status':_0x2c7f68['status'],'amount':_0x2c7f68[_0x2fcae(0xdc)],'currency':_0x2c7f68['currency'],'createdAt':_0x2c7f68['createdAt'],'updatedAt':_0x2c7f68[_0x2fcae(0xe5)],'shop':_0x2c7f68[_0x2fcae(0x72)]},'timers':_0x578235,'isCoinToPay':_0x2c7f68[_0x2fcae(0xb5)]===_0x2fcae(0xb7),'ageInMinutes':Math[_0x2fcae(0xc9)]((Date['now']()-_0x2c7f68['createdAt']['getTime']())/(0x3e8*0x3c))}});}catch(_0x3ccef6){_0x3dbadd['status'](0x1f4)[_0x2fcae(0xea)]({'success':![],'message':_0x3ccef6 instanceof Error?_0x3ccef6['message']:_0x2fcae(0x9c)});}}),router['get']('/domain-monitoring/stats',(_0x2a43a1,_0x499c60)=>{const _0x4787e5=a20_0x1ab1a4;try{const _0x146c1e=domainMonitoringService_1[_0x4787e5(0x78)][_0x4787e5(0xae)]();_0x499c60[_0x4787e5(0xea)]({'success':!![],'result':{..._0x146c1e,'description':_0x4787e5(0xa4),'behavior':_0x4787e5(0xc4),'encoding':_0x4787e5(0xe9)}});}catch(_0x518f26){_0x499c60[_0x4787e5(0x93)](0x1f4)['json']({'success':![],'message':_0x4787e5(0x92)});}}),router['post'](a20_0x1ab1a4(0x87),async(_0x163827,_0x58fecf)=>{const _0x23c8c5=a20_0x1ab1a4;try{const _0x535f96=await domainMonitoringService_1['domainMonitoringService'][_0x23c8c5(0xa2)]();_0x58fecf['json']({'success':!![],'result':{'domainAvailable':_0x535f96,'message':_0x535f96?'Domain\x20is\x20responding\x20correctly':_0x23c8c5(0xce),'timestamp':new Date()[_0x23c8c5(0x91)]()}});}catch(_0x2e4599){_0x58fecf[_0x23c8c5(0x93)](0x1f4)[_0x23c8c5(0xea)]({'success':![],'message':_0x2e4599 instanceof Error?_0x2e4599[_0x23c8c5(0xb0)]:_0x23c8c5(0xdb)});}}),exports[a20_0x1ab1a4(0x81)]=router;function a20_0x7be5(){const _0x247565=['../middleware/auth','\x20days\x20if\x20not\x20paid','/cointopay/check/:paymentId','getUserById','PENDING','resolve','shop','body','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','/payout','getOwnPropertyNames','express','domainMonitoringService','8UBxpuz','CoinToPay\x20automatic\x20status\x20checking\x20service','loggerService','authenticateToken','getStatistics','/statistics','getPayoutStats','/users/:id/activate','default','22868350HlzZqP','use','length','updateCustomerDataSchema','payment','/domain-monitoring/check','expiryDays','hasOwnProperty','getUsers','../config/database','cleanOldLogs','put','/payments','9fANwXp','/merchant-statistics','toISOString','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','status','updateUser','getMerchantsAwaitingPayout','../controllers/adminController','gatewayPaymentId','getLogStats','/cointopay/payment/:paymentId','1025186VTLaTa','get','Failed\x20to\x20get\x20payment\x20information','requireAdmin','log','then','getPaymentById','defineProperty','manualCheck','params','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','suspendUser','coinToPayStatusService','__esModule','__setModuleDefault','/logs/stats','1243544xEOSIK','prototype','createUser','configurable','getMonitoringStats','../middleware/validation','message','getPayoutById','getServiceStats','create','post','gateway','deletePayout','cointopay','/logs/clean','/merchants/selection','getPayouts','getMerchantsSelection','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','Payments\x20automatically\x20expire\x20after\x20','createPayout','9013376WJlkhc','/payouts/:id','CoinToPay\x20payment\x20status\x20checked\x20successfully','validate','deleteUser','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','/users/:id','FAILED','\x20days)','/payout/stats','floor','../services/domainMonitoringService','/users','3IvnHSo','createPayoutSchema','Domain\x20check\x20failed','delete','writable','/auth','❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','/payouts','9931026PSSNxU','Old\x20logs\x20cleaned\x20(kept\x20last\x20','getPayments','/cointopay/stats','126215KiKpDd','findUnique','Failed\x20to\x20clean\x20old\x20logs','Failed\x20to\x20perform\x20manual\x20domain\x20check','amount','/payments/:id','getPaymentTimerInfo','6242772wRGEFb','../services/loggerService','updateCustomerData','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','EXPIRED','updateUserSchema','updatedAt','/payments/:id/customer','__importStar','Failed\x20to\x20get\x20log\x20statistics','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','json','Payment\x20not\x20found'];a20_0x7be5=function(){return _0x247565;};return a20_0x7be5();}