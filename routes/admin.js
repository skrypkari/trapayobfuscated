'use strict';const a19_0x25244d=a19_0x221c;function a19_0x221c(_0x406872,_0x258851){const _0x3f5202=a19_0x3f52();return a19_0x221c=function(_0x221c99,_0x4cd855){_0x221c99=_0x221c99-0x6d;let _0x2f8038=_0x3f5202[_0x221c99];return _0x2f8038;},a19_0x221c(_0x406872,_0x258851);}(function(_0x51faa4,_0x2a903d){const _0x57eeaa=a19_0x221c,_0x2be2ca=_0x51faa4();while(!![]){try{const _0x1fac0c=-parseInt(_0x57eeaa(0x95))/0x1+-parseInt(_0x57eeaa(0x77))/0x2*(-parseInt(_0x57eeaa(0xa4))/0x3)+parseInt(_0x57eeaa(0x91))/0x4+parseInt(_0x57eeaa(0xb2))/0x5+-parseInt(_0x57eeaa(0xc2))/0x6+-parseInt(_0x57eeaa(0x84))/0x7+parseInt(_0x57eeaa(0xe1))/0x8*(-parseInt(_0x57eeaa(0xac))/0x9);if(_0x1fac0c===_0x2a903d)break;else _0x2be2ca['push'](_0x2be2ca['shift']());}catch(_0x3124f9){_0x2be2ca['push'](_0x2be2ca['shift']());}}}(a19_0x3f52,0x2e296));var __createBinding=this&&this[a19_0x25244d(0x9f)]||(Object[a19_0x25244d(0xa3)]?function(_0x39ff04,_0x20fd42,_0x3ddacd,_0x13ebdc){const _0x2d2ff5=a19_0x25244d;if(_0x13ebdc===undefined)_0x13ebdc=_0x3ddacd;var _0x84dd0b=Object[_0x2d2ff5(0xad)](_0x20fd42,_0x3ddacd);(!_0x84dd0b||(_0x2d2ff5(0x9b)in _0x84dd0b?!_0x20fd42[_0x2d2ff5(0x73)]:_0x84dd0b['writable']||_0x84dd0b[_0x2d2ff5(0xd0)]))&&(_0x84dd0b={'enumerable':!![],'get':function(){return _0x20fd42[_0x3ddacd];}}),Object['defineProperty'](_0x39ff04,_0x13ebdc,_0x84dd0b);}:function(_0x3c21e1,_0x678a6,_0x416983,_0x437674){if(_0x437674===undefined)_0x437674=_0x416983;_0x3c21e1[_0x437674]=_0x678a6[_0x416983];}),__setModuleDefault=this&&this[a19_0x25244d(0x93)]||(Object[a19_0x25244d(0xa3)]?function(_0x114f13,_0x5913ff){const _0x44cedc=a19_0x25244d;Object[_0x44cedc(0xb8)](_0x114f13,'default',{'enumerable':!![],'value':_0x5913ff});}:function(_0x257463,_0x5bf28e){const _0x1fd96d=a19_0x25244d;_0x257463[_0x1fd96d(0x71)]=_0x5bf28e;}),__importStar=this&&this['__importStar']||(function(){var _0x56b70e=function(_0x569684){const _0x50d75b=a19_0x221c;return _0x56b70e=Object[_0x50d75b(0xe2)]||function(_0x272e0a){const _0x10d34a=_0x50d75b;var _0x15d5a7=[];for(var _0x196abc in _0x272e0a)if(Object[_0x10d34a(0xc8)][_0x10d34a(0x80)][_0x10d34a(0x94)](_0x272e0a,_0x196abc))_0x15d5a7[_0x15d5a7[_0x10d34a(0xa0)]]=_0x196abc;return _0x15d5a7;},_0x56b70e(_0x569684);};return function(_0x286401){const _0x3d2d44=a19_0x221c;if(_0x286401&&_0x286401['__esModule'])return _0x286401;var _0xc43e38={};if(_0x286401!=null){for(var _0x6b777b=_0x56b70e(_0x286401),_0x234cbd=0x0;_0x234cbd<_0x6b777b[_0x3d2d44(0xa0)];_0x234cbd++)if(_0x6b777b[_0x234cbd]!=='default')__createBinding(_0xc43e38,_0x286401,_0x6b777b[_0x234cbd]);}return __setModuleDefault(_0xc43e38,_0x286401),_0xc43e38;};}());Object[a19_0x25244d(0xb8)](exports,a19_0x25244d(0x73),{'value':!![]});const express_1=require(a19_0x25244d(0xa9)),adminController_1=require(a19_0x25244d(0xc7)),validation_1=require(a19_0x25244d(0xe4)),auth_1=require(a19_0x25244d(0xbf)),loggerService_1=require(a19_0x25244d(0x8e)),coinToPayStatusService_1=require(a19_0x25244d(0xa6)),domainMonitoringService_1=require(a19_0x25244d(0x99)),router=(0x0,express_1[a19_0x25244d(0x9d)])(),adminController=new adminController_1[(a19_0x25244d(0xbc))]();function a19_0x3f52(){const _0x17834c=['updateCustomerDataSchema','72KofYDk','getOwnPropertyNames','/logs/clean','../middleware/validation','now','/users','cleanOldLogs','/payments/:id','gateway','getPayoutById','requireAdmin','default','createUser','__esModule','message','use','Failed\x20to\x20get\x20payment\x20information','2rEEmjR','Payment\x20not\x20found','log','Old\x20logs\x20cleaned\x20(kept\x20last\x20','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','getPayments','getPaymentTimerInfo','/users/:id/activate','hasOwnProperty','Domain\x20is\x20responding\x20correctly','currency','getPaymentById','170772DQpcOU','/users/:id','floor','shop','/domain-monitoring/stats','/payout/merchants','getMonitoringStats','expiryDays','activateUser','deleteUser','../services/loggerService','\x20days)','CoinToPay\x20payment\x20status\x20checked\x20successfully','519296WYEIAx','Payments\x20automatically\x20expire\x20after\x20','__setModuleDefault','call','60927xTEVEi','coinToPayStatusService','gatewayPaymentId','delete','../services/domainMonitoringService','domainMonitoringService','get','amount','Router','checkPaymentById','__createBinding','length','getServiceStats','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','create','798006UkmZvg','getTime','../services/coinToPayStatusService','getMerchantStatistics','/payouts/:id','express','getPayouts','/statistics','55098COixmh','getOwnPropertyDescriptor','manualCheck','post','updateUser','updatePayment','855010nTzsOc','updateUserSchema','/payouts','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','Domain\x20check\x20failed','defineProperty','/users/:id/suspend','body','getStatistics','AdminController','checkAuth','\x20days\x20if\x20not\x20paid','../middleware/auth','loggerService','deletePayout','1423974dqkfoB','/domain-monitoring/check','FAILED','/payments/:id/customer','put','../controllers/adminController','prototype','/payout/stats','authenticateToken','paymentId','then','getMerchantsAwaitingPayout','PAID','validate','configurable','/payments','EXPIRED','Failed\x20to\x20get\x20log\x20statistics','Failed\x20to\x20clean\x20old\x20logs','suspendUser','cointopay','/logs/stats','status','json','params','createdAt','findUnique','Failed\x20to\x20perform\x20manual\x20domain\x20check','PENDING','/cointopay/stats'];a19_0x3f52=function(){return _0x17834c;};return a19_0x3f52();}router[a19_0x25244d(0x75)](auth_1[a19_0x25244d(0xca)],auth_1[a19_0x25244d(0x70)]),router[a19_0x25244d(0x9b)]('/auth',adminController[a19_0x25244d(0xbd)]),router[a19_0x25244d(0x9b)](a19_0x25244d(0xab),adminController[a19_0x25244d(0xbb)]),router['get']('/merchant-statistics',adminController[a19_0x25244d(0xa7)]),router[a19_0x25244d(0x9b)](a19_0x25244d(0xc9),adminController['getPayoutStats']),router['get'](a19_0x25244d(0x89),adminController[a19_0x25244d(0xcd)]),router[a19_0x25244d(0xaf)]('/payout',(0x0,validation_1['validate'])(validation_1['createPayoutSchema']),adminController['createPayout']),router[a19_0x25244d(0x9b)](a19_0x25244d(0xb4),adminController[a19_0x25244d(0xaa)]),router['get']('/payouts/:id',adminController[a19_0x25244d(0x6f)]),router[a19_0x25244d(0x98)](a19_0x25244d(0xa8),adminController[a19_0x25244d(0xc1)]),router[a19_0x25244d(0x9b)](a19_0x25244d(0xd1),adminController[a19_0x25244d(0x7d)]),router[a19_0x25244d(0x9b)](a19_0x25244d(0x6d),adminController[a19_0x25244d(0x83)]),router['put']('/payments/:id',adminController[a19_0x25244d(0xb1)]),router[a19_0x25244d(0xc6)](a19_0x25244d(0xc5),(0x0,validation_1[a19_0x25244d(0xcf)])(validation_1[a19_0x25244d(0xe0)]),adminController['updateCustomerData']),router[a19_0x25244d(0x9b)](a19_0x25244d(0xe6),adminController['getUsers']),router[a19_0x25244d(0x9b)]('/users/:id',adminController['getUserById']),router[a19_0x25244d(0xaf)]('/users',(0x0,validation_1[a19_0x25244d(0xcf)])(validation_1['createUserSchema']),adminController[a19_0x25244d(0x72)]),router[a19_0x25244d(0xc6)](a19_0x25244d(0x85),(0x0,validation_1[a19_0x25244d(0xcf)])(validation_1[a19_0x25244d(0xb3)]),adminController[a19_0x25244d(0xb0)]),router[a19_0x25244d(0x98)]('/users/:id',adminController[a19_0x25244d(0x8d)]),router[a19_0x25244d(0xaf)](a19_0x25244d(0xb9),adminController[a19_0x25244d(0xd5)]),router[a19_0x25244d(0xaf)](a19_0x25244d(0x7f),adminController[a19_0x25244d(0x8c)]),router[a19_0x25244d(0x9b)](a19_0x25244d(0xd7),(_0x1dd139,_0xc24ef9)=>{const _0x1326cb=a19_0x25244d;try{const _0x534b7d=loggerService_1[_0x1326cb(0xc0)]['getLogStats']();_0xc24ef9['json']({'success':!![],'result':_0x534b7d});}catch(_0x3c7629){_0xc24ef9[_0x1326cb(0xd8)](0x1f4)['json']({'success':![],'message':_0x1326cb(0xd3)});}}),router[a19_0x25244d(0xaf)](a19_0x25244d(0xe3),(_0x47b31d,_0x16a4a4)=>{const _0x433e9f=a19_0x25244d;try{const {daysToKeep:daysToKeep=0x1e}=_0x47b31d[_0x433e9f(0xba)];loggerService_1['loggerService'][_0x433e9f(0xe7)](daysToKeep),_0x16a4a4[_0x433e9f(0xd9)]({'success':!![],'message':_0x433e9f(0x7a)+daysToKeep+_0x433e9f(0x8f)});}catch(_0x448a5e){_0x16a4a4[_0x433e9f(0xd8)](0x1f4)[_0x433e9f(0xd9)]({'success':![],'message':_0x433e9f(0xd4)});}}),router[a19_0x25244d(0xaf)]('/cointopay/check/:paymentId',async(_0x589650,_0x2205b5)=>{const _0x512f33=a19_0x25244d;try{const {paymentId:_0x2bbb2b}=_0x589650['params'];console[_0x512f33(0x79)]('🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20'+_0x2bbb2b),await coinToPayStatusService_1[_0x512f33(0x96)][_0x512f33(0x9e)](_0x2bbb2b),_0x2205b5[_0x512f33(0xd9)]({'success':!![],'message':_0x512f33(0x90)});}catch(_0x3c23d2){console['error']('❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20'+_0x589650[_0x512f33(0xda)][_0x512f33(0xcb)]+':',_0x3c23d2),_0x2205b5['status'](0x1f4)[_0x512f33(0xd9)]({'success':![],'message':_0x3c23d2 instanceof Error?_0x3c23d2[_0x512f33(0x74)]:'Failed\x20to\x20check\x20CoinToPay\x20payment\x20status'});}}),router[a19_0x25244d(0x9b)](a19_0x25244d(0xdf),(_0x478122,_0xfbf904)=>{const _0x2363b0=a19_0x25244d;try{const _0x5b02ef=coinToPayStatusService_1['coinToPayStatusService'][_0x2363b0(0xa1)]();_0xfbf904['json']({'success':!![],'result':{..._0x5b02ef,'description':'CoinToPay\x20automatic\x20status\x20checking\x20service','statusMapping':{'Paid':_0x2363b0(0xce),'Awaiting\x20Fiat':_0x2363b0(0xde),'waiting':_0x2363b0(0xde),'expired':_0x2363b0(0xd2),'failed':_0x2363b0(0xc4)},'autoExpiryNote':_0x2363b0(0x92)+_0x5b02ef[_0x2363b0(0x8b)]+_0x2363b0(0xbe),'individualTimersNote':_0x2363b0(0xa2)}});}catch(_0xdd2502){_0xfbf904[_0x2363b0(0xd8)](0x1f4)[_0x2363b0(0xd9)]({'success':![],'message':'Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics'});}}),router[a19_0x25244d(0x9b)]('/cointopay/payment/:paymentId',async(_0x483637,_0x1154f7)=>{const _0x1b142a=a19_0x25244d;try{const {paymentId:_0x2212eb}=_0x483637[_0x1b142a(0xda)],_0x460228=coinToPayStatusService_1[_0x1b142a(0x96)][_0x1b142a(0x7e)](_0x2212eb),_0x284787=(await Promise['resolve']()[_0x1b142a(0xcc)](()=>__importStar(require('../config/database'))))[_0x1b142a(0x71)],_0x5550f7=await _0x284787['payment'][_0x1b142a(0xdc)]({'where':{'id':_0x2212eb},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x5550f7)return _0x1154f7[_0x1b142a(0xd8)](0x194)[_0x1b142a(0xd9)]({'success':![],'message':_0x1b142a(0x78)});_0x1154f7['json']({'success':!![],'result':{'payment':{'id':_0x5550f7['id'],'gateway':_0x5550f7[_0x1b142a(0x6e)],'gatewayPaymentId':_0x5550f7[_0x1b142a(0x97)],'status':_0x5550f7[_0x1b142a(0xd8)],'amount':_0x5550f7[_0x1b142a(0x9c)],'currency':_0x5550f7[_0x1b142a(0x82)],'createdAt':_0x5550f7[_0x1b142a(0xdb)],'updatedAt':_0x5550f7['updatedAt'],'shop':_0x5550f7[_0x1b142a(0x87)]},'timers':_0x460228,'isCoinToPay':_0x5550f7[_0x1b142a(0x6e)]===_0x1b142a(0xd6),'ageInMinutes':Math[_0x1b142a(0x86)]((Date[_0x1b142a(0xe5)]()-_0x5550f7[_0x1b142a(0xdb)][_0x1b142a(0xa5)]())/(0x3e8*0x3c))}});}catch(_0x46121c){_0x1154f7[_0x1b142a(0xd8)](0x1f4)[_0x1b142a(0xd9)]({'success':![],'message':_0x46121c instanceof Error?_0x46121c[_0x1b142a(0x74)]:_0x1b142a(0x76)});}}),router[a19_0x25244d(0x9b)](a19_0x25244d(0x88),(_0x2d87c2,_0x3c5bbb)=>{const _0x35d190=a19_0x25244d;try{const _0x28b762=domainMonitoringService_1[_0x35d190(0x9a)][_0x35d190(0x8a)]();_0x3c5bbb['json']({'success':!![],'result':{..._0x28b762,'description':_0x35d190(0x7c),'behavior':_0x35d190(0xb5),'encoding':_0x35d190(0xb6)}});}catch(_0x5d20d7){_0x3c5bbb['status'](0x1f4)[_0x35d190(0xd9)]({'success':![],'message':_0x35d190(0x7b)});}}),router['post'](a19_0x25244d(0xc3),async(_0x357686,_0x4856bf)=>{const _0x4c4891=a19_0x25244d;try{const _0x47087a=await domainMonitoringService_1[_0x4c4891(0x9a)][_0x4c4891(0xae)]();_0x4856bf['json']({'success':!![],'result':{'domainAvailable':_0x47087a,'message':_0x47087a?_0x4c4891(0x81):_0x4c4891(0xb7),'timestamp':new Date()['toISOString']()}});}catch(_0x911677){_0x4856bf[_0x4c4891(0xd8)](0x1f4)[_0x4c4891(0xd9)]({'success':![],'message':_0x911677 instanceof Error?_0x911677[_0x4c4891(0x74)]:_0x4c4891(0xdd)});}}),exports[a19_0x25244d(0x71)]=router;