'use strict';const a19_0x1dfa53=a19_0x333f;(function(_0x276779,_0x48aee4){const _0x570350=a19_0x333f,_0x5424a7=_0x276779();while(!![]){try{const _0x2c656c=-parseInt(_0x570350(0xed))/0x1*(-parseInt(_0x570350(0xf1))/0x2)+parseInt(_0x570350(0x118))/0x3+-parseInt(_0x570350(0x109))/0x4+parseInt(_0x570350(0xf2))/0x5+-parseInt(_0x570350(0x101))/0x6+-parseInt(_0x570350(0x112))/0x7*(parseInt(_0x570350(0x108))/0x8)+-parseInt(_0x570350(0x100))/0x9*(parseInt(_0x570350(0xf6))/0xa);if(_0x2c656c===_0x48aee4)break;else _0x5424a7['push'](_0x5424a7['shift']());}catch(_0x15fb99){_0x5424a7['push'](_0x5424a7['shift']());}}}(a19_0x42a2,0xd717c));function a19_0x333f(_0x48bbe5,_0x38b779){const _0x42a256=a19_0x42a2();return a19_0x333f=function(_0x333fd0,_0x8bfe81){_0x333fd0=_0x333fd0-0xa2;let _0x182cde=_0x42a256[_0x333fd0];return _0x182cde;},a19_0x333f(_0x48bbe5,_0x38b779);}var __createBinding=this&&this[a19_0x1dfa53(0xcf)]||(Object[a19_0x1dfa53(0x103)]?function(_0x43f7ea,_0x5d24be,_0x1bdadf,_0x192309){const _0xfe4f20=a19_0x1dfa53;if(_0x192309===undefined)_0x192309=_0x1bdadf;var _0x30a430=Object[_0xfe4f20(0xba)](_0x5d24be,_0x1bdadf);(!_0x30a430||(_0xfe4f20(0x102)in _0x30a430?!_0x5d24be[_0xfe4f20(0xc9)]:_0x30a430[_0xfe4f20(0x10b)]||_0x30a430[_0xfe4f20(0xd5)]))&&(_0x30a430={'enumerable':!![],'get':function(){return _0x5d24be[_0x1bdadf];}}),Object[_0xfe4f20(0xcc)](_0x43f7ea,_0x192309,_0x30a430);}:function(_0x220089,_0x5d7775,_0x191815,_0xb7100c){if(_0xb7100c===undefined)_0xb7100c=_0x191815;_0x220089[_0xb7100c]=_0x5d7775[_0x191815];}),__setModuleDefault=this&&this[a19_0x1dfa53(0xde)]||(Object[a19_0x1dfa53(0x103)]?function(_0x293f98,_0xcacc7c){const _0x5cb66b=a19_0x1dfa53;Object[_0x5cb66b(0xcc)](_0x293f98,_0x5cb66b(0x113),{'enumerable':!![],'value':_0xcacc7c});}:function(_0x397e3d,_0x23ff7e){const _0x57b658=a19_0x1dfa53;_0x397e3d[_0x57b658(0x113)]=_0x23ff7e;}),__importStar=this&&this[a19_0x1dfa53(0xfe)]||(function(){var _0x1fff18=function(_0x3a114e){const _0x17e7ed=a19_0x333f;return _0x1fff18=Object[_0x17e7ed(0xd8)]||function(_0x456428){const _0x7a59bc=_0x17e7ed;var _0x4b50fc=[];for(var _0x510669 in _0x456428)if(Object['prototype'][_0x7a59bc(0xb4)][_0x7a59bc(0xd6)](_0x456428,_0x510669))_0x4b50fc[_0x4b50fc[_0x7a59bc(0xdc)]]=_0x510669;return _0x4b50fc;},_0x1fff18(_0x3a114e);};return function(_0x1e516a){const _0x91c5d4=a19_0x333f;if(_0x1e516a&&_0x1e516a[_0x91c5d4(0xc9)])return _0x1e516a;var _0x3d612b={};if(_0x1e516a!=null){for(var _0x17b405=_0x1fff18(_0x1e516a),_0x2a2592=0x0;_0x2a2592<_0x17b405[_0x91c5d4(0xdc)];_0x2a2592++)if(_0x17b405[_0x2a2592]!==_0x91c5d4(0x113))__createBinding(_0x3d612b,_0x1e516a,_0x17b405[_0x2a2592]);}return __setModuleDefault(_0x3d612b,_0x1e516a),_0x3d612b;};}());Object[a19_0x1dfa53(0xcc)](exports,a19_0x1dfa53(0xc9),{'value':!![]});const express_1=require(a19_0x1dfa53(0xbf)),adminController_1=require(a19_0x1dfa53(0xe2)),validation_1=require(a19_0x1dfa53(0x10d)),auth_1=require(a19_0x1dfa53(0xa2)),loggerService_1=require(a19_0x1dfa53(0xb9)),coinToPayStatusService_1=require(a19_0x1dfa53(0xc8)),domainMonitoringService_1=require(a19_0x1dfa53(0xb3)),router=(0x0,express_1[a19_0x1dfa53(0xc7)])(),adminController=new adminController_1[(a19_0x1dfa53(0xae))]();function a19_0x42a2(){const _0xf8ebc8=['loggerService','Failed\x20to\x20clean\x20old\x20logs','configurable','call','manualCheck','getOwnPropertyNames','cleanOldLogs','FAILED','PAID','length','Old\x20logs\x20cleaned\x20(kept\x20last\x20','__setModuleDefault','updateUser','floor','/logs/clean','../controllers/adminController','expiryDays','updatePayment','getStatistics','Failed\x20to\x20get\x20log\x20statistics','CoinToPay\x20automatic\x20status\x20checking\x20service','use','deletePayout','/users','domainMonitoringService','updateUserSchema','131596SNordj','json','checkPaymentById','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','18marnwm','3907700LldNKd','/cointopay/payment/:paymentId','params','getUserById','449980HymMgo','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','createPayoutSchema','/users/:id','post','getTime','log','activateUser','__importStar','/auth','9jeLyqr','10329768OGdlaG','get','create','❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','/payments/:id/customer','/users/:id/suspend','createPayout','8YCpaTD','1187980FgieUY','updateCustomerData','writable','/payouts/:id','../middleware/validation','validate','message','Payments\x20automatically\x20expire\x20after\x20','EXPIRED','3637599YKWZUn','default','getPayoutStats','Failed\x20to\x20get\x20payment\x20information','error','/payout/stats','4495182vCvToo','../middleware/auth','gateway','coinToPayStatusService','paymentId','Payment\x20not\x20found','Failed\x20to\x20perform\x20manual\x20domain\x20check','PENDING','/domain-monitoring/check','/domain-monitoring/stats','body','/users/:id/activate','createUser','AdminController','currency','checkAuth','Domain\x20check\x20failed','getPaymentTimerInfo','../services/domainMonitoringService','hasOwnProperty','/merchant-statistics','toISOString','/payments/:id','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','../services/loggerService','getOwnPropertyDescriptor','/payments','updateCustomerDataSchema','shop','CoinToPay\x20payment\x20status\x20checked\x20successfully','express','put','getPayments','payment','delete','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','createdAt','getUsers','Router','../services/coinToPayStatusService','__esModule','/payout','status','defineProperty','\x20days\x20if\x20not\x20paid','getServiceStats','__createBinding','resolve','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','/cointopay/stats'];a19_0x42a2=function(){return _0xf8ebc8;};return a19_0x42a2();}router[a19_0x1dfa53(0xe8)](auth_1['authenticateToken'],auth_1['requireAdmin']),router[a19_0x1dfa53(0x102)](a19_0x1dfa53(0xff),adminController[a19_0x1dfa53(0xb0)]),router[a19_0x1dfa53(0x102)]('/statistics',adminController[a19_0x1dfa53(0xe5)]),router['get'](a19_0x1dfa53(0xb5),adminController['getMerchantStatistics']),router['get'](a19_0x1dfa53(0x117),adminController[a19_0x1dfa53(0x114)]),router[a19_0x1dfa53(0x102)]('/payout/merchants',adminController['getMerchantsAwaitingPayout']),router[a19_0x1dfa53(0xfa)](a19_0x1dfa53(0xca),(0x0,validation_1['validate'])(validation_1[a19_0x1dfa53(0xf8)]),adminController[a19_0x1dfa53(0x107)]),router['get']('/payouts',adminController['getPayouts']),router[a19_0x1dfa53(0x102)](a19_0x1dfa53(0x10c),adminController['getPayoutById']),router[a19_0x1dfa53(0xc3)](a19_0x1dfa53(0x10c),adminController[a19_0x1dfa53(0xe9)]),router[a19_0x1dfa53(0x102)](a19_0x1dfa53(0xbb),adminController[a19_0x1dfa53(0xc1)]),router[a19_0x1dfa53(0x102)](a19_0x1dfa53(0xb7),adminController['getPaymentById']),router[a19_0x1dfa53(0xc0)](a19_0x1dfa53(0xb7),adminController[a19_0x1dfa53(0xe4)]),router[a19_0x1dfa53(0xc0)](a19_0x1dfa53(0x105),(0x0,validation_1[a19_0x1dfa53(0x10e)])(validation_1[a19_0x1dfa53(0xbc)]),adminController[a19_0x1dfa53(0x10a)]),router[a19_0x1dfa53(0x102)](a19_0x1dfa53(0xea),adminController[a19_0x1dfa53(0xc6)]),router[a19_0x1dfa53(0x102)](a19_0x1dfa53(0xf9),adminController[a19_0x1dfa53(0xf5)]),router[a19_0x1dfa53(0xfa)](a19_0x1dfa53(0xea),(0x0,validation_1[a19_0x1dfa53(0x10e)])(validation_1['createUserSchema']),adminController[a19_0x1dfa53(0xad)]),router[a19_0x1dfa53(0xc0)](a19_0x1dfa53(0xf9),(0x0,validation_1['validate'])(validation_1[a19_0x1dfa53(0xec)]),adminController[a19_0x1dfa53(0xdf)]),router[a19_0x1dfa53(0xc3)](a19_0x1dfa53(0xf9),adminController['deleteUser']),router[a19_0x1dfa53(0xfa)](a19_0x1dfa53(0x106),adminController['suspendUser']),router[a19_0x1dfa53(0xfa)](a19_0x1dfa53(0xac),adminController[a19_0x1dfa53(0xfd)]),router[a19_0x1dfa53(0x102)]('/logs/stats',(_0x46bf7d,_0x36843a)=>{const _0x1f185c=a19_0x1dfa53;try{const _0x323f43=loggerService_1[_0x1f185c(0xd3)]['getLogStats']();_0x36843a[_0x1f185c(0xee)]({'success':!![],'result':_0x323f43});}catch(_0x31c6fc){_0x36843a[_0x1f185c(0xcb)](0x1f4)[_0x1f185c(0xee)]({'success':![],'message':_0x1f185c(0xe6)});}}),router[a19_0x1dfa53(0xfa)](a19_0x1dfa53(0xe1),(_0x3520bf,_0x867e36)=>{const _0x8074e1=a19_0x1dfa53;try{const {daysToKeep:daysToKeep=0x1e}=_0x3520bf[_0x8074e1(0xab)];loggerService_1[_0x8074e1(0xd3)][_0x8074e1(0xd9)](daysToKeep),_0x867e36['json']({'success':!![],'message':_0x8074e1(0xdd)+daysToKeep+'\x20days)'});}catch(_0x296319){_0x867e36['status'](0x1f4)[_0x8074e1(0xee)]({'success':![],'message':_0x8074e1(0xd4)});}}),router[a19_0x1dfa53(0xfa)]('/cointopay/check/:paymentId',async(_0x957cda,_0xbb2e6c)=>{const _0x392030=a19_0x1dfa53;try{const {paymentId:_0x3a4694}=_0x957cda[_0x392030(0xf4)];console[_0x392030(0xfc)]('🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20'+_0x3a4694),await coinToPayStatusService_1['coinToPayStatusService'][_0x392030(0xef)](_0x3a4694),_0xbb2e6c[_0x392030(0xee)]({'success':!![],'message':_0x392030(0xbe)});}catch(_0x3fe23f){console[_0x392030(0x116)](_0x392030(0x104)+_0x957cda[_0x392030(0xf4)][_0x392030(0xa5)]+':',_0x3fe23f),_0xbb2e6c[_0x392030(0xcb)](0x1f4)[_0x392030(0xee)]({'success':![],'message':_0x3fe23f instanceof Error?_0x3fe23f[_0x392030(0x10f)]:_0x392030(0xf7)});}}),router['get'](a19_0x1dfa53(0xd2),(_0x124dcc,_0x61a270)=>{const _0x843eeb=a19_0x1dfa53;try{const _0x2f0041=coinToPayStatusService_1[_0x843eeb(0xa4)][_0x843eeb(0xce)]();_0x61a270['json']({'success':!![],'result':{..._0x2f0041,'description':_0x843eeb(0xe7),'statusMapping':{'Paid':_0x843eeb(0xdb),'Awaiting\x20Fiat':_0x843eeb(0xa8),'waiting':_0x843eeb(0xa8),'expired':_0x843eeb(0x111),'failed':_0x843eeb(0xda)},'autoExpiryNote':_0x843eeb(0x110)+_0x2f0041[_0x843eeb(0xe3)]+_0x843eeb(0xcd),'individualTimersNote':'Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly'}});}catch(_0x3af3e3){_0x61a270[_0x843eeb(0xcb)](0x1f4)['json']({'success':![],'message':_0x843eeb(0xf0)});}}),router['get'](a19_0x1dfa53(0xf3),async(_0x3c7499,_0x592a69)=>{const _0x3ba85b=a19_0x1dfa53;try{const {paymentId:_0x1d4953}=_0x3c7499[_0x3ba85b(0xf4)],_0x2458e8=coinToPayStatusService_1[_0x3ba85b(0xa4)][_0x3ba85b(0xb2)](_0x1d4953),_0x194326=(await Promise[_0x3ba85b(0xd0)]()['then'](()=>__importStar(require('../config/database'))))['default'],_0x1771d1=await _0x194326[_0x3ba85b(0xc2)]['findUnique']({'where':{'id':_0x1d4953},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x1771d1)return _0x592a69['status'](0x194)[_0x3ba85b(0xee)]({'success':![],'message':_0x3ba85b(0xa6)});_0x592a69[_0x3ba85b(0xee)]({'success':!![],'result':{'payment':{'id':_0x1771d1['id'],'gateway':_0x1771d1[_0x3ba85b(0xa3)],'gatewayPaymentId':_0x1771d1['gatewayPaymentId'],'status':_0x1771d1[_0x3ba85b(0xcb)],'amount':_0x1771d1['amount'],'currency':_0x1771d1[_0x3ba85b(0xaf)],'createdAt':_0x1771d1[_0x3ba85b(0xc5)],'updatedAt':_0x1771d1['updatedAt'],'shop':_0x1771d1[_0x3ba85b(0xbd)]},'timers':_0x2458e8,'isCoinToPay':_0x1771d1[_0x3ba85b(0xa3)]==='cointopay','ageInMinutes':Math[_0x3ba85b(0xe0)]((Date['now']()-_0x1771d1[_0x3ba85b(0xc5)][_0x3ba85b(0xfb)]())/(0x3e8*0x3c))}});}catch(_0x319eb8){_0x592a69['status'](0x1f4)[_0x3ba85b(0xee)]({'success':![],'message':_0x319eb8 instanceof Error?_0x319eb8[_0x3ba85b(0x10f)]:_0x3ba85b(0x115)});}}),router[a19_0x1dfa53(0x102)](a19_0x1dfa53(0xaa),(_0xa213,_0x34425a)=>{const _0x3a8c64=a19_0x1dfa53;try{const _0xc1f996=domainMonitoringService_1[_0x3a8c64(0xeb)]['getMonitoringStats']();_0x34425a[_0x3a8c64(0xee)]({'success':!![],'result':{..._0xc1f996,'description':_0x3a8c64(0xb8),'behavior':'Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','encoding':_0x3a8c64(0xc4)}});}catch(_0xf2efc4){_0x34425a[_0x3a8c64(0xcb)](0x1f4)[_0x3a8c64(0xee)]({'success':![],'message':_0x3a8c64(0xd1)});}}),router[a19_0x1dfa53(0xfa)](a19_0x1dfa53(0xa9),async(_0x2e648f,_0x39b353)=>{const _0x3b7b52=a19_0x1dfa53;try{const _0xb54894=await domainMonitoringService_1[_0x3b7b52(0xeb)][_0x3b7b52(0xd7)]();_0x39b353[_0x3b7b52(0xee)]({'success':!![],'result':{'domainAvailable':_0xb54894,'message':_0xb54894?'Domain\x20is\x20responding\x20correctly':_0x3b7b52(0xb1),'timestamp':new Date()[_0x3b7b52(0xb6)]()}});}catch(_0x51eb93){_0x39b353['status'](0x1f4)[_0x3b7b52(0xee)]({'success':![],'message':_0x51eb93 instanceof Error?_0x51eb93['message']:_0x3b7b52(0xa7)});}}),exports[a19_0x1dfa53(0x113)]=router;