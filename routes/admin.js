'use strict';function a19_0x53d0(_0x26fee4,_0x51ac34){const _0x56dded=a19_0x56dd();return a19_0x53d0=function(_0x53d088,_0x1bb4f6){_0x53d088=_0x53d088-0x1bf;let _0x3a0135=_0x56dded[_0x53d088];return _0x3a0135;},a19_0x53d0(_0x26fee4,_0x51ac34);}const a19_0x45a9eb=a19_0x53d0;(function(_0x3c2553,_0x5c26ed){const _0x18c928=a19_0x53d0,_0x39b271=_0x3c2553();while(!![]){try{const _0x5dd6b6=parseInt(_0x18c928(0x238))/0x1*(parseInt(_0x18c928(0x214))/0x2)+-parseInt(_0x18c928(0x219))/0x3+parseInt(_0x18c928(0x201))/0x4*(parseInt(_0x18c928(0x1d7))/0x5)+parseInt(_0x18c928(0x1c1))/0x6+parseInt(_0x18c928(0x1ce))/0x7*(-parseInt(_0x18c928(0x236))/0x8)+parseInt(_0x18c928(0x1c5))/0x9+-parseInt(_0x18c928(0x233))/0xa;if(_0x5dd6b6===_0x5c26ed)break;else _0x39b271['push'](_0x39b271['shift']());}catch(_0x45fb33){_0x39b271['push'](_0x39b271['shift']());}}}(a19_0x56dd,0x62d57));var __createBinding=this&&this['__createBinding']||(Object[a19_0x45a9eb(0x220)]?function(_0x2c385a,_0x20ed3c,_0x243c28,_0x7a3cef){const _0x6b0b86=a19_0x45a9eb;if(_0x7a3cef===undefined)_0x7a3cef=_0x243c28;var _0x4a3a23=Object[_0x6b0b86(0x224)](_0x20ed3c,_0x243c28);(!_0x4a3a23||(_0x6b0b86(0x21a)in _0x4a3a23?!_0x20ed3c[_0x6b0b86(0x20a)]:_0x4a3a23[_0x6b0b86(0x227)]||_0x4a3a23[_0x6b0b86(0x239)]))&&(_0x4a3a23={'enumerable':!![],'get':function(){return _0x20ed3c[_0x243c28];}}),Object[_0x6b0b86(0x1e7)](_0x2c385a,_0x7a3cef,_0x4a3a23);}:function(_0x5a1781,_0x3a7724,_0x5237b9,_0x35bcc0){if(_0x35bcc0===undefined)_0x35bcc0=_0x5237b9;_0x5a1781[_0x35bcc0]=_0x3a7724[_0x5237b9];}),__setModuleDefault=this&&this[a19_0x45a9eb(0x1d4)]||(Object['create']?function(_0x319517,_0x538479){const _0x4c0351=a19_0x45a9eb;Object[_0x4c0351(0x1e7)](_0x319517,_0x4c0351(0x1fe),{'enumerable':!![],'value':_0x538479});}:function(_0x224ecf,_0x111486){_0x224ecf['default']=_0x111486;}),__importStar=this&&this['__importStar']||(function(){var _0x50526b=function(_0x52af79){return _0x50526b=Object['getOwnPropertyNames']||function(_0xfd9834){const _0x327c31=a19_0x53d0;var _0xfad3f0=[];for(var _0x2b6dce in _0xfd9834)if(Object[_0x327c31(0x200)][_0x327c31(0x1ea)][_0x327c31(0x22e)](_0xfd9834,_0x2b6dce))_0xfad3f0[_0xfad3f0['length']]=_0x2b6dce;return _0xfad3f0;},_0x50526b(_0x52af79);};return function(_0x416611){const _0x2255cc=a19_0x53d0;if(_0x416611&&_0x416611[_0x2255cc(0x20a)])return _0x416611;var _0x141961={};if(_0x416611!=null){for(var _0x2f10f6=_0x50526b(_0x416611),_0x9076e4=0x0;_0x9076e4<_0x2f10f6[_0x2255cc(0x1c7)];_0x9076e4++)if(_0x2f10f6[_0x9076e4]!==_0x2255cc(0x1fe))__createBinding(_0x141961,_0x416611,_0x2f10f6[_0x9076e4]);}return __setModuleDefault(_0x141961,_0x416611),_0x141961;};}());Object[a19_0x45a9eb(0x1e7)](exports,a19_0x45a9eb(0x20a),{'value':!![]});function a19_0x56dd(){const _0x2e788d=['__setModuleDefault','/payouts/:id','findUnique','115ZbtWks','getTime','/logs/stats','deleteUser','../controllers/adminController','updatedAt','authenticateToken','then','createdAt','createPayoutSchema','Failed\x20to\x20get\x20payment\x20information','delete','getPayoutStats','put','gateway','getPayoutById','defineProperty','getMerchantStatistics','/cointopay/check/:paymentId','hasOwnProperty','/payouts','coinToPayStatusService','\x20days\x20if\x20not\x20paid','/payments','/users/:id/activate','../services/coinToPayStatusService','Failed\x20to\x20clean\x20old\x20logs','../middleware/auth','/payments/:id','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','getMerchantsAwaitingPayout','getMerchantsSelection','Failed\x20to\x20get\x20log\x20statistics','floor','/payout','log','createPayout','params','Payments\x20automatically\x20expire\x20after\x20','default','requireAdmin','prototype','2604RVLtjY','post','EXPIRED','getPaymentById','shop','loggerService','express','getPaymentTimerInfo','now','__esModule','getMonitoringStats','/merchant-statistics','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','Router','updatePayment','/payout/stats','/logs/clean','currency','getUserById','12vXABtI','/auth','paymentId','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','resolve','1129308kynVaA','get','../config/database','message','json','status','/users/:id','create','cleanOldLogs','amount','updateUserSchema','getOwnPropertyDescriptor','Domain\x20check\x20failed','validate','writable','/merchants/selection','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','cointopay','manualCheck','/payments/:id/customer','toISOString','call','activateUser','getServiceStats','/users','getPayouts','1534670MeWpQR','expiryDays','../middleware/validation','8jeNJgM','Old\x20logs\x20cleaned\x20(kept\x20last\x20','129814nhxOKF','configurable','/domain-monitoring/check','../services/loggerService','1876632dklKcO','/cointopay/payment/:paymentId','updateCustomerData','CoinToPay\x20automatic\x20status\x20checking\x20service','5581314QxdSrR','\x20days)','length','/users/:id/suspend','FAILED','CoinToPay\x20payment\x20status\x20checked\x20successfully','getUsers','deletePayout','PAID','5544343QKYzpE','Failed\x20to\x20perform\x20manual\x20domain\x20check','domainMonitoringService','PENDING','checkAuth','AdminController'];a19_0x56dd=function(){return _0x2e788d;};return a19_0x56dd();}const express_1=require(a19_0x45a9eb(0x207)),adminController_1=require(a19_0x45a9eb(0x1db)),validation_1=require(a19_0x45a9eb(0x235)),auth_1=require(a19_0x45a9eb(0x1f2)),loggerService_1=require(a19_0x45a9eb(0x1c0)),coinToPayStatusService_1=require(a19_0x45a9eb(0x1f0)),domainMonitoringService_1=require('../services/domainMonitoringService'),router=(0x0,express_1[a19_0x45a9eb(0x20e)])(),adminController=new adminController_1[(a19_0x45a9eb(0x1d3))]();router['use'](auth_1[a19_0x45a9eb(0x1dd)],auth_1[a19_0x45a9eb(0x1ff)]),router['get'](a19_0x45a9eb(0x215),adminController[a19_0x45a9eb(0x1d2)]),router[a19_0x45a9eb(0x21a)]('/statistics',adminController['getStatistics']),router[a19_0x45a9eb(0x21a)](a19_0x45a9eb(0x20c),adminController[a19_0x45a9eb(0x1e8)]),router[a19_0x45a9eb(0x21a)](a19_0x45a9eb(0x210),adminController[a19_0x45a9eb(0x1e3)]),router[a19_0x45a9eb(0x21a)]('/payout/merchants',adminController[a19_0x45a9eb(0x1f5)]),router[a19_0x45a9eb(0x21a)](a19_0x45a9eb(0x228),adminController[a19_0x45a9eb(0x1f6)]),router[a19_0x45a9eb(0x202)](a19_0x45a9eb(0x1f9),(0x0,validation_1[a19_0x45a9eb(0x226)])(validation_1[a19_0x45a9eb(0x1e0)]),adminController[a19_0x45a9eb(0x1fb)]),router[a19_0x45a9eb(0x21a)](a19_0x45a9eb(0x1eb),adminController[a19_0x45a9eb(0x232)]),router['get'](a19_0x45a9eb(0x1d5),adminController[a19_0x45a9eb(0x1e6)]),router[a19_0x45a9eb(0x1e2)]('/payouts/:id',adminController[a19_0x45a9eb(0x1cc)]),router['get'](a19_0x45a9eb(0x1ee),adminController['getPayments']),router[a19_0x45a9eb(0x21a)]('/payments/:id',adminController[a19_0x45a9eb(0x204)]),router[a19_0x45a9eb(0x1e4)](a19_0x45a9eb(0x1f3),adminController[a19_0x45a9eb(0x20f)]),router[a19_0x45a9eb(0x1e4)](a19_0x45a9eb(0x22c),(0x0,validation_1[a19_0x45a9eb(0x226)])(validation_1['updateCustomerDataSchema']),adminController[a19_0x45a9eb(0x1c3)]),router[a19_0x45a9eb(0x21a)](a19_0x45a9eb(0x231),adminController[a19_0x45a9eb(0x1cb)]),router[a19_0x45a9eb(0x21a)](a19_0x45a9eb(0x21f),adminController[a19_0x45a9eb(0x213)]),router[a19_0x45a9eb(0x202)]('/users',(0x0,validation_1[a19_0x45a9eb(0x226)])(validation_1['createUserSchema']),adminController['createUser']),router[a19_0x45a9eb(0x1e4)]('/users/:id',(0x0,validation_1['validate'])(validation_1[a19_0x45a9eb(0x223)]),adminController['updateUser']),router[a19_0x45a9eb(0x1e2)](a19_0x45a9eb(0x21f),adminController[a19_0x45a9eb(0x1da)]),router[a19_0x45a9eb(0x202)](a19_0x45a9eb(0x1c8),adminController['suspendUser']),router[a19_0x45a9eb(0x202)](a19_0x45a9eb(0x1ef),adminController[a19_0x45a9eb(0x22f)]),router[a19_0x45a9eb(0x21a)](a19_0x45a9eb(0x1d9),(_0x454d6c,_0x55a876)=>{const _0x2f69e1=a19_0x45a9eb;try{const _0x19aeac=loggerService_1[_0x2f69e1(0x206)]['getLogStats']();_0x55a876[_0x2f69e1(0x21d)]({'success':!![],'result':_0x19aeac});}catch(_0x17545d){_0x55a876[_0x2f69e1(0x21e)](0x1f4)[_0x2f69e1(0x21d)]({'success':![],'message':_0x2f69e1(0x1f7)});}}),router[a19_0x45a9eb(0x202)](a19_0x45a9eb(0x211),(_0x18fd68,_0x1c3a70)=>{const _0x1f3f21=a19_0x45a9eb;try{const {daysToKeep:daysToKeep=0x1e}=_0x18fd68['body'];loggerService_1[_0x1f3f21(0x206)][_0x1f3f21(0x221)](daysToKeep),_0x1c3a70[_0x1f3f21(0x21d)]({'success':!![],'message':_0x1f3f21(0x237)+daysToKeep+_0x1f3f21(0x1c6)});}catch(_0x510973){_0x1c3a70[_0x1f3f21(0x21e)](0x1f4)['json']({'success':![],'message':_0x1f3f21(0x1f1)});}}),router['post'](a19_0x45a9eb(0x1e9),async(_0x56e9c7,_0xfacf35)=>{const _0x200901=a19_0x45a9eb;try{const {paymentId:_0xd32b81}=_0x56e9c7['params'];console[_0x200901(0x1fa)]('🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20'+_0xd32b81),await coinToPayStatusService_1['coinToPayStatusService']['checkPaymentById'](_0xd32b81),_0xfacf35[_0x200901(0x21d)]({'success':!![],'message':_0x200901(0x1ca)});}catch(_0x4f1632){console['error']('❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20'+_0x56e9c7[_0x200901(0x1fc)][_0x200901(0x216)]+':',_0x4f1632),_0xfacf35['status'](0x1f4)[_0x200901(0x21d)]({'success':![],'message':_0x4f1632 instanceof Error?_0x4f1632['message']:_0x200901(0x217)});}}),router[a19_0x45a9eb(0x21a)]('/cointopay/stats',(_0x19b3bd,_0x14a255)=>{const _0x1b4d40=a19_0x45a9eb;try{const _0x357b24=coinToPayStatusService_1[_0x1b4d40(0x1ec)][_0x1b4d40(0x230)]();_0x14a255[_0x1b4d40(0x21d)]({'success':!![],'result':{..._0x357b24,'description':_0x1b4d40(0x1c4),'statusMapping':{'Paid':_0x1b4d40(0x1cd),'Awaiting\x20Fiat':'PENDING','waiting':_0x1b4d40(0x1d1),'expired':_0x1b4d40(0x203),'failed':_0x1b4d40(0x1c9)},'autoExpiryNote':_0x1b4d40(0x1fd)+_0x357b24[_0x1b4d40(0x234)]+_0x1b4d40(0x1ed),'individualTimersNote':_0x1b4d40(0x229)}});}catch(_0x4829b8){_0x14a255['status'](0x1f4)['json']({'success':![],'message':'Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics'});}}),router[a19_0x45a9eb(0x21a)](a19_0x45a9eb(0x1c2),async(_0x14376f,_0x2e740c)=>{const _0x5e6159=a19_0x45a9eb;try{const {paymentId:_0x246cd0}=_0x14376f[_0x5e6159(0x1fc)],_0x327532=coinToPayStatusService_1[_0x5e6159(0x1ec)][_0x5e6159(0x208)](_0x246cd0),_0x3d5025=(await Promise[_0x5e6159(0x218)]()[_0x5e6159(0x1de)](()=>__importStar(require(_0x5e6159(0x21b)))))[_0x5e6159(0x1fe)],_0x52a060=await _0x3d5025['payment'][_0x5e6159(0x1d6)]({'where':{'id':_0x246cd0},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x52a060)return _0x2e740c[_0x5e6159(0x21e)](0x194)['json']({'success':![],'message':'Payment\x20not\x20found'});_0x2e740c[_0x5e6159(0x21d)]({'success':!![],'result':{'payment':{'id':_0x52a060['id'],'gateway':_0x52a060[_0x5e6159(0x1e5)],'gatewayPaymentId':_0x52a060['gatewayPaymentId'],'status':_0x52a060[_0x5e6159(0x21e)],'amount':_0x52a060[_0x5e6159(0x222)],'currency':_0x52a060[_0x5e6159(0x212)],'createdAt':_0x52a060[_0x5e6159(0x1df)],'updatedAt':_0x52a060[_0x5e6159(0x1dc)],'shop':_0x52a060[_0x5e6159(0x205)]},'timers':_0x327532,'isCoinToPay':_0x52a060[_0x5e6159(0x1e5)]===_0x5e6159(0x22a),'ageInMinutes':Math[_0x5e6159(0x1f8)]((Date[_0x5e6159(0x209)]()-_0x52a060[_0x5e6159(0x1df)][_0x5e6159(0x1d8)]())/(0x3e8*0x3c))}});}catch(_0x40206c){_0x2e740c[_0x5e6159(0x21e)](0x1f4)['json']({'success':![],'message':_0x40206c instanceof Error?_0x40206c[_0x5e6159(0x21c)]:_0x5e6159(0x1e1)});}}),router[a19_0x45a9eb(0x21a)]('/domain-monitoring/stats',(_0x1458cc,_0x2942b0)=>{const _0x913a5e=a19_0x45a9eb;try{const _0xbd08b2=domainMonitoringService_1[_0x913a5e(0x1d0)][_0x913a5e(0x20b)]();_0x2942b0['json']({'success':!![],'result':{..._0xbd08b2,'description':_0x913a5e(0x1f4),'behavior':'Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','encoding':'Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs'}});}catch(_0x3ecf8a){_0x2942b0[_0x913a5e(0x21e)](0x1f4)[_0x913a5e(0x21d)]({'success':![],'message':_0x913a5e(0x20d)});}}),router[a19_0x45a9eb(0x202)](a19_0x45a9eb(0x1bf),async(_0x456828,_0x50dd9f)=>{const _0xac2282=a19_0x45a9eb;try{const _0x905eec=await domainMonitoringService_1[_0xac2282(0x1d0)][_0xac2282(0x22b)]();_0x50dd9f[_0xac2282(0x21d)]({'success':!![],'result':{'domainAvailable':_0x905eec,'message':_0x905eec?'Domain\x20is\x20responding\x20correctly':_0xac2282(0x225),'timestamp':new Date()[_0xac2282(0x22d)]()}});}catch(_0x34e13a){_0x50dd9f[_0xac2282(0x21e)](0x1f4)[_0xac2282(0x21d)]({'success':![],'message':_0x34e13a instanceof Error?_0x34e13a[_0xac2282(0x21c)]:_0xac2282(0x1cf)});}}),exports['default']=router;