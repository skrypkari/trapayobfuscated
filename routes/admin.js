'use strict';const a19_0x2801a6=a19_0x10ae;(function(_0x460e9d,_0x3094ef){const _0x4e6ba8=a19_0x10ae,_0x286a60=_0x460e9d();while(!![]){try{const _0x4f053a=parseInt(_0x4e6ba8(0x103))/0x1+-parseInt(_0x4e6ba8(0x110))/0x2*(-parseInt(_0x4e6ba8(0xf7))/0x3)+parseInt(_0x4e6ba8(0x114))/0x4+-parseInt(_0x4e6ba8(0xdd))/0x5+-parseInt(_0x4e6ba8(0xc8))/0x6*(parseInt(_0x4e6ba8(0xa8))/0x7)+-parseInt(_0x4e6ba8(0xc7))/0x8*(parseInt(_0x4e6ba8(0x124))/0x9)+parseInt(_0x4e6ba8(0xff))/0xa*(parseInt(_0x4e6ba8(0xef))/0xb);if(_0x4f053a===_0x3094ef)break;else _0x286a60['push'](_0x286a60['shift']());}catch(_0x24d810){_0x286a60['push'](_0x286a60['shift']());}}}(a19_0x4a3d,0xede84));function a19_0x4a3d(){const _0x45520c=['suspendUser','getPayouts','getPayments','hasOwnProperty','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','4802237wOXpkU','createUserSchema','authenticateToken','__importStar','getMerchantsAwaitingPayout','getOwnPropertyDescriptor','/payout','Domain\x20is\x20responding\x20correctly','3foHIPH','/logs/stats','post','amount','Old\x20logs\x20cleaned\x20(kept\x20last\x20','express','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','/users/:id/activate','10psELQT','expiryDays','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','/users','916122UbkXac','Payments\x20automatically\x20expire\x20after\x20','/domain-monitoring/check','deleteUser','getMonitoringStats','/statistics','createUser','error','length','getPayoutById','checkAuth','updatePayment','/domain-monitoring/stats','2511356ufDEAg','writable','Payment\x20not\x20found','/cointopay/check/:paymentId','6026708mFFYEh','Failed\x20to\x20get\x20log\x20statistics','../config/database','updatedAt','\x20days)','\x20days\x20if\x20not\x20paid','/cointopay/payment/:paymentId','body','create','CoinToPay\x20payment\x20status\x20checked\x20successfully','params','now','defineProperty','loggerService','__createBinding','/users/:id/suspend','18wSYxac','EXPIRED','getLogStats','5446JjTASB','/payout/merchants','then','AdminController','configurable','/logs/clean','prototype','activateUser','Failed\x20to\x20clean\x20old\x20logs','json','gateway','getPaymentTimerInfo','getStatistics','findUnique','getUserById','updateCustomerDataSchema','Failed\x20to\x20perform\x20manual\x20domain\x20check','/payments/:id','PENDING','toISOString','__setModuleDefault','FAILED','delete','getTime','Router','domainMonitoringService','/payouts','use','currency','../controllers/adminController','getOwnPropertyNames','4321640rwSPSy','10482nyGTnC','../middleware/auth','cleanOldLogs','updateUser','createdAt','Domain\x20check\x20failed','floor','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','deletePayout','put','default','../middleware/validation','status','../services/loggerService','__esModule','/payout/stats','/users/:id','getMerchantStatistics','validate','/payments','updateCustomerData','3505000YfxaPW','gatewayPaymentId','call','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','getServiceStats','coinToPayStatusService','get','resolve','/cointopay/stats','updateUserSchema','/payments/:id/customer'];a19_0x4a3d=function(){return _0x45520c;};return a19_0x4a3d();}var __createBinding=this&&this[a19_0x2801a6(0x122)]||(Object[a19_0x2801a6(0x11c)]?function(_0x5be221,_0x37ad19,_0x3a865d,_0x2f44fb){const _0x4e61de=a19_0x2801a6;if(_0x2f44fb===undefined)_0x2f44fb=_0x3a865d;var _0x25f912=Object[_0x4e61de(0xf4)](_0x37ad19,_0x3a865d);(!_0x25f912||(_0x4e61de(0xe5)in _0x25f912?!_0x37ad19['__esModule']:_0x25f912[_0x4e61de(0x111)]||_0x25f912[_0x4e61de(0xac)]))&&(_0x25f912={'enumerable':!![],'get':function(){return _0x37ad19[_0x3a865d];}}),Object['defineProperty'](_0x5be221,_0x2f44fb,_0x25f912);}:function(_0x1eb895,_0x533a59,_0x497b3e,_0xe8b474){if(_0xe8b474===undefined)_0xe8b474=_0x497b3e;_0x1eb895[_0xe8b474]=_0x533a59[_0x497b3e];}),__setModuleDefault=this&&this[a19_0x2801a6(0xbc)]||(Object['create']?function(_0x5a5b63,_0x1e4a37){const _0x3f1d1c=a19_0x2801a6;Object[_0x3f1d1c(0x120)](_0x5a5b63,'default',{'enumerable':!![],'value':_0x1e4a37});}:function(_0x4c801a,_0x91e5ae){const _0x5e41b3=a19_0x2801a6;_0x4c801a[_0x5e41b3(0xd2)]=_0x91e5ae;}),__importStar=this&&this[a19_0x2801a6(0xf2)]||(function(){var _0x319643=function(_0x52c891){const _0x13af2a=a19_0x10ae;return _0x319643=Object[_0x13af2a(0xc6)]||function(_0x38e5cc){const _0x874cf0=_0x13af2a;var _0x937e75=[];for(var _0x5d541d in _0x38e5cc)if(Object[_0x874cf0(0xae)][_0x874cf0(0xed)][_0x874cf0(0xdf)](_0x38e5cc,_0x5d541d))_0x937e75[_0x937e75[_0x874cf0(0x10b)]]=_0x5d541d;return _0x937e75;},_0x319643(_0x52c891);};return function(_0x75c624){const _0x54b286=a19_0x10ae;if(_0x75c624&&_0x75c624[_0x54b286(0xd6)])return _0x75c624;var _0x4130b4={};if(_0x75c624!=null){for(var _0x116e94=_0x319643(_0x75c624),_0x2f3de9=0x0;_0x2f3de9<_0x116e94[_0x54b286(0x10b)];_0x2f3de9++)if(_0x116e94[_0x2f3de9]!==_0x54b286(0xd2))__createBinding(_0x4130b4,_0x75c624,_0x116e94[_0x2f3de9]);}return __setModuleDefault(_0x4130b4,_0x75c624),_0x4130b4;};}());Object[a19_0x2801a6(0x120)](exports,'__esModule',{'value':!![]});function a19_0x10ae(_0x5b2985,_0x375095){const _0x4a3dbb=a19_0x4a3d();return a19_0x10ae=function(_0x10aeae,_0xd07c60){_0x10aeae=_0x10aeae-0xa6;let _0x532573=_0x4a3dbb[_0x10aeae];return _0x532573;},a19_0x10ae(_0x5b2985,_0x375095);}const express_1=require(a19_0x2801a6(0xfc)),adminController_1=require(a19_0x2801a6(0xc5)),validation_1=require(a19_0x2801a6(0xd3)),auth_1=require(a19_0x2801a6(0xc9)),loggerService_1=require(a19_0x2801a6(0xd5)),coinToPayStatusService_1=require('../services/coinToPayStatusService'),domainMonitoringService_1=require('../services/domainMonitoringService'),router=(0x0,express_1[a19_0x2801a6(0xc0)])(),adminController=new adminController_1[(a19_0x2801a6(0xab))]();router[a19_0x2801a6(0xc3)](auth_1[a19_0x2801a6(0xf1)],auth_1['requireAdmin']),router[a19_0x2801a6(0xe5)]('/auth',adminController[a19_0x2801a6(0x10d)]),router[a19_0x2801a6(0xe5)](a19_0x2801a6(0x108),adminController[a19_0x2801a6(0xb4)]),router[a19_0x2801a6(0xe5)]('/merchant-statistics',adminController[a19_0x2801a6(0xd9)]),router[a19_0x2801a6(0xe5)](a19_0x2801a6(0xd7),adminController['getPayoutStats']),router[a19_0x2801a6(0xe5)](a19_0x2801a6(0xa9),adminController[a19_0x2801a6(0xf3)]),router[a19_0x2801a6(0xf9)](a19_0x2801a6(0xf5),(0x0,validation_1['validate'])(validation_1['createPayoutSchema']),adminController['createPayout']),router[a19_0x2801a6(0xe5)](a19_0x2801a6(0xc2),adminController[a19_0x2801a6(0xeb)]),router[a19_0x2801a6(0xe5)]('/payouts/:id',adminController[a19_0x2801a6(0x10c)]),router[a19_0x2801a6(0xbe)]('/payouts/:id',adminController[a19_0x2801a6(0xd0)]),router[a19_0x2801a6(0xe5)](a19_0x2801a6(0xdb),adminController[a19_0x2801a6(0xec)]),router[a19_0x2801a6(0xe5)](a19_0x2801a6(0xb9),adminController['getPaymentById']),router[a19_0x2801a6(0xd1)](a19_0x2801a6(0xb9),adminController[a19_0x2801a6(0x10e)]),router['put'](a19_0x2801a6(0xe9),(0x0,validation_1['validate'])(validation_1[a19_0x2801a6(0xb7)]),adminController[a19_0x2801a6(0xdc)]),router[a19_0x2801a6(0xe5)](a19_0x2801a6(0x102),adminController['getUsers']),router[a19_0x2801a6(0xe5)](a19_0x2801a6(0xd8),adminController[a19_0x2801a6(0xb6)]),router['post'](a19_0x2801a6(0x102),(0x0,validation_1['validate'])(validation_1[a19_0x2801a6(0xf0)]),adminController[a19_0x2801a6(0x109)]),router[a19_0x2801a6(0xd1)](a19_0x2801a6(0xd8),(0x0,validation_1[a19_0x2801a6(0xda)])(validation_1[a19_0x2801a6(0xe8)]),adminController[a19_0x2801a6(0xcb)]),router['delete'](a19_0x2801a6(0xd8),adminController[a19_0x2801a6(0x106)]),router['post'](a19_0x2801a6(0x123),adminController[a19_0x2801a6(0xea)]),router[a19_0x2801a6(0xf9)](a19_0x2801a6(0xfe),adminController[a19_0x2801a6(0xaf)]),router[a19_0x2801a6(0xe5)](a19_0x2801a6(0xf8),(_0x1ec49e,_0x7f7b02)=>{const _0x57b200=a19_0x2801a6;try{const _0x1fc138=loggerService_1['loggerService'][_0x57b200(0xa7)]();_0x7f7b02[_0x57b200(0xb1)]({'success':!![],'result':_0x1fc138});}catch(_0x3d625a){_0x7f7b02[_0x57b200(0xd4)](0x1f4)['json']({'success':![],'message':_0x57b200(0x115)});}}),router[a19_0x2801a6(0xf9)](a19_0x2801a6(0xad),(_0x3963d8,_0x5e9a88)=>{const _0x417c96=a19_0x2801a6;try{const {daysToKeep:daysToKeep=0x1e}=_0x3963d8[_0x417c96(0x11b)];loggerService_1[_0x417c96(0x121)][_0x417c96(0xca)](daysToKeep),_0x5e9a88[_0x417c96(0xb1)]({'success':!![],'message':_0x417c96(0xfb)+daysToKeep+_0x417c96(0x118)});}catch(_0x32ebbe){_0x5e9a88[_0x417c96(0xd4)](0x1f4)[_0x417c96(0xb1)]({'success':![],'message':_0x417c96(0xb0)});}}),router[a19_0x2801a6(0xf9)](a19_0x2801a6(0x113),async(_0xc50a22,_0x317a13)=>{const _0x3f9785=a19_0x2801a6;try{const {paymentId:_0x5ee541}=_0xc50a22[_0x3f9785(0x11e)];console['log']('üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20'+_0x5ee541),await coinToPayStatusService_1[_0x3f9785(0xe4)]['checkPaymentById'](_0x5ee541),_0x317a13[_0x3f9785(0xb1)]({'success':!![],'message':_0x3f9785(0x11d)});}catch(_0x16584e){console[_0x3f9785(0x10a)](_0x3f9785(0xe0)+_0xc50a22[_0x3f9785(0x11e)]['paymentId']+':',_0x16584e),_0x317a13['status'](0x1f4)[_0x3f9785(0xb1)]({'success':![],'message':_0x16584e instanceof Error?_0x16584e['message']:_0x3f9785(0xfd)});}}),router['get'](a19_0x2801a6(0xe7),(_0x4e9f56,_0x27aa0b)=>{const _0x4c7a42=a19_0x2801a6;try{const _0x7f460a=coinToPayStatusService_1[_0x4c7a42(0xe4)][_0x4c7a42(0xe3)]();_0x27aa0b[_0x4c7a42(0xb1)]({'success':!![],'result':{..._0x7f460a,'description':'CoinToPay\x20automatic\x20status\x20checking\x20service','statusMapping':{'Paid':'PAID','Awaiting\x20Fiat':_0x4c7a42(0xba),'waiting':_0x4c7a42(0xba),'expired':_0x4c7a42(0xa6),'failed':_0x4c7a42(0xbd)},'autoExpiryNote':_0x4c7a42(0x104)+_0x7f460a[_0x4c7a42(0x100)]+_0x4c7a42(0x119),'individualTimersNote':_0x4c7a42(0xee)}});}catch(_0x22078a){_0x27aa0b[_0x4c7a42(0xd4)](0x1f4)[_0x4c7a42(0xb1)]({'success':![],'message':_0x4c7a42(0xe2)});}}),router[a19_0x2801a6(0xe5)](a19_0x2801a6(0x11a),async(_0x2a6d13,_0x236446)=>{const _0x3c29d1=a19_0x2801a6;try{const {paymentId:_0x234e5d}=_0x2a6d13[_0x3c29d1(0x11e)],_0x3aa04e=coinToPayStatusService_1[_0x3c29d1(0xe4)][_0x3c29d1(0xb3)](_0x234e5d),_0x4d389d=(await Promise[_0x3c29d1(0xe6)]()[_0x3c29d1(0xaa)](()=>__importStar(require(_0x3c29d1(0x116)))))[_0x3c29d1(0xd2)],_0x1277b8=await _0x4d389d['payment'][_0x3c29d1(0xb5)]({'where':{'id':_0x234e5d},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x1277b8)return _0x236446['status'](0x194)[_0x3c29d1(0xb1)]({'success':![],'message':_0x3c29d1(0x112)});_0x236446[_0x3c29d1(0xb1)]({'success':!![],'result':{'payment':{'id':_0x1277b8['id'],'gateway':_0x1277b8[_0x3c29d1(0xb2)],'gatewayPaymentId':_0x1277b8[_0x3c29d1(0xde)],'status':_0x1277b8['status'],'amount':_0x1277b8[_0x3c29d1(0xfa)],'currency':_0x1277b8[_0x3c29d1(0xc4)],'createdAt':_0x1277b8[_0x3c29d1(0xcc)],'updatedAt':_0x1277b8[_0x3c29d1(0x117)],'shop':_0x1277b8['shop']},'timers':_0x3aa04e,'isCoinToPay':_0x1277b8[_0x3c29d1(0xb2)]==='cointopay','ageInMinutes':Math[_0x3c29d1(0xce)]((Date[_0x3c29d1(0x11f)]()-_0x1277b8[_0x3c29d1(0xcc)][_0x3c29d1(0xbf)]())/(0x3e8*0x3c))}});}catch(_0x56960f){_0x236446['status'](0x1f4)['json']({'success':![],'message':_0x56960f instanceof Error?_0x56960f['message']:'Failed\x20to\x20get\x20payment\x20information'});}}),router['get'](a19_0x2801a6(0x10f),(_0x376810,_0x346022)=>{const _0x2a8513=a19_0x2801a6;try{const _0x328e9f=domainMonitoringService_1[_0x2a8513(0xc1)][_0x2a8513(0x107)]();_0x346022['json']({'success':!![],'result':{..._0x328e9f,'description':_0x2a8513(0x101),'behavior':'Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','encoding':_0x2a8513(0xcf)}});}catch(_0x4f89f0){_0x346022[_0x2a8513(0xd4)](0x1f4)['json']({'success':![],'message':_0x2a8513(0xe1)});}}),router['post'](a19_0x2801a6(0x105),async(_0x2d50a2,_0x592479)=>{const _0x1f8755=a19_0x2801a6;try{const _0x299703=await domainMonitoringService_1[_0x1f8755(0xc1)]['manualCheck']();_0x592479[_0x1f8755(0xb1)]({'success':!![],'result':{'domainAvailable':_0x299703,'message':_0x299703?_0x1f8755(0xf6):_0x1f8755(0xcd),'timestamp':new Date()[_0x1f8755(0xbb)]()}});}catch(_0x12db4f){_0x592479['status'](0x1f4)[_0x1f8755(0xb1)]({'success':![],'message':_0x12db4f instanceof Error?_0x12db4f['message']:_0x1f8755(0xb8)});}}),exports[a19_0x2801a6(0xd2)]=router;