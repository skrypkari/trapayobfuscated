'use strict';const a19_0x21999d=a19_0x4838;(function(_0x2520d2,_0x489640){const _0x3116b3=a19_0x4838,_0x25683e=_0x2520d2();while(!![]){try{const _0x1ee5ac=parseInt(_0x3116b3(0x1e4))/0x1+-parseInt(_0x3116b3(0x1ff))/0x2+-parseInt(_0x3116b3(0x1ec))/0x3+parseInt(_0x3116b3(0x23f))/0x4*(-parseInt(_0x3116b3(0x20b))/0x5)+-parseInt(_0x3116b3(0x1f1))/0x6*(parseInt(_0x3116b3(0x220))/0x7)+-parseInt(_0x3116b3(0x23c))/0x8*(parseInt(_0x3116b3(0x212))/0x9)+parseInt(_0x3116b3(0x236))/0xa;if(_0x1ee5ac===_0x489640)break;else _0x25683e['push'](_0x25683e['shift']());}catch(_0x3e8b85){_0x25683e['push'](_0x25683e['shift']());}}}(a19_0x3a9d,0xb94b9));var __createBinding=this&&this[a19_0x21999d(0x227)]||(Object[a19_0x21999d(0x1e8)]?function(_0x337b87,_0x8a58a4,_0x54e54e,_0x1b1f32){const _0x112b12=a19_0x21999d;if(_0x1b1f32===undefined)_0x1b1f32=_0x54e54e;var _0xf976f2=Object[_0x112b12(0x24a)](_0x8a58a4,_0x54e54e);(!_0xf976f2||(_0x112b12(0x1f0)in _0xf976f2?!_0x8a58a4[_0x112b12(0x21c)]:_0xf976f2['writable']||_0xf976f2[_0x112b12(0x205)]))&&(_0xf976f2={'enumerable':!![],'get':function(){return _0x8a58a4[_0x54e54e];}}),Object[_0x112b12(0x226)](_0x337b87,_0x1b1f32,_0xf976f2);}:function(_0x1bda5b,_0x3abb4e,_0x55c54d,_0x4c38ee){if(_0x4c38ee===undefined)_0x4c38ee=_0x55c54d;_0x1bda5b[_0x4c38ee]=_0x3abb4e[_0x55c54d];}),__setModuleDefault=this&&this[a19_0x21999d(0x22e)]||(Object[a19_0x21999d(0x1e8)]?function(_0xa6ded1,_0x3e8be6){const _0x4946f1=a19_0x21999d;Object[_0x4946f1(0x226)](_0xa6ded1,_0x4946f1(0x1ed),{'enumerable':!![],'value':_0x3e8be6});}:function(_0x31daa5,_0x3a3980){const _0x5cf601=a19_0x21999d;_0x31daa5[_0x5cf601(0x1ed)]=_0x3a3980;}),__importStar=this&&this['__importStar']||(function(){var _0x57ab47=function(_0x28cb22){const _0x5a46ec=a19_0x4838;return _0x57ab47=Object[_0x5a46ec(0x232)]||function(_0x5d5da6){var _0x27b03e=[];for(var _0x58c443 in _0x5d5da6)if(Object['prototype']['hasOwnProperty']['call'](_0x5d5da6,_0x58c443))_0x27b03e[_0x27b03e['length']]=_0x58c443;return _0x27b03e;},_0x57ab47(_0x28cb22);};return function(_0x3aa667){const _0x515bea=a19_0x4838;if(_0x3aa667&&_0x3aa667[_0x515bea(0x21c)])return _0x3aa667;var _0x127aae={};if(_0x3aa667!=null){for(var _0x5a830f=_0x57ab47(_0x3aa667),_0x1e1fc2=0x0;_0x1e1fc2<_0x5a830f[_0x515bea(0x21f)];_0x1e1fc2++)if(_0x5a830f[_0x1e1fc2]!==_0x515bea(0x1ed))__createBinding(_0x127aae,_0x3aa667,_0x5a830f[_0x1e1fc2]);}return __setModuleDefault(_0x127aae,_0x3aa667),_0x127aae;};}());Object[a19_0x21999d(0x226)](exports,a19_0x21999d(0x21c),{'value':!![]});function a19_0x3a9d(){const _0x5192d9=['getPayoutStats','getOwnPropertyNames','/users/:id/suspend','Router','checkPaymentById','43102500EBrRPr','requireAdmin','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','getPaymentById','🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','createPayoutSchema','21752NLVROD','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','../config/database','8OoMGdU','Domain\x20is\x20responding\x20correctly','getLogStats','loggerService','getServiceStats','createdAt','../controllers/adminController','getPayments','getUsers','updateCustomerDataSchema','gatewayPaymentId','getOwnPropertyDescriptor','getPaymentTimerInfo','Failed\x20to\x20get\x20log\x20statistics','/logs/stats','/merchant-statistics','/statistics','updatedAt','post','amount','../middleware/auth','Payment\x20not\x20found','../middleware/validation','Failed\x20to\x20get\x20payment\x20information','/payments/:id','cleanOldLogs','CoinToPay\x20payment\x20status\x20checked\x20successfully','body','1177678cEigOP','shop','/payout','authenticateToken','create','❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','getMerchantsAwaitingPayout','FAILED','2312952DOdXat','default','error','/domain-monitoring/stats','get','6hKnsuO','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','manualCheck','createUser','Failed\x20to\x20perform\x20manual\x20domain\x20check','updateUserSchema','/cointopay/payment/:paymentId','/logs/clean','gateway','/payments/:id/customer','message','/users','json','params','1108200QxtkpW','status','activateUser','delete','CoinToPay\x20automatic\x20status\x20checking\x20service','getMerchantsSelection','configurable','/users/:id','suspendUser','getPayouts','validate','createPayout','3322330VhUFQT','/cointopay/stats','coinToPayStatusService','deleteUser','cointopay','/cointopay/check/:paymentId','/payouts','3789iHVHCX','\x20days\x20if\x20not\x20paid','expiryDays','getTime','express','paymentId','getPayoutById','currency','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','../services/coinToPayStatusService','__esModule','/payout/stats','AdminController','length','6511708Vgynft','/payments','Domain\x20check\x20failed','put','deletePayout','../services/loggerService','defineProperty','__createBinding','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','updateUser','/payouts/:id','Old\x20logs\x20cleaned\x20(kept\x20last\x20','createUserSchema','log','__setModuleDefault','Payments\x20automatically\x20expire\x20after\x20','PAID'];a19_0x3a9d=function(){return _0x5192d9;};return a19_0x3a9d();}function a19_0x4838(_0x56263e,_0x5ef4e8){const _0x3a9d1f=a19_0x3a9d();return a19_0x4838=function(_0x483817,_0x4c1bd7){_0x483817=_0x483817-0x1e3;let _0x5e31bd=_0x3a9d1f[_0x483817];return _0x5e31bd;},a19_0x4838(_0x56263e,_0x5ef4e8);}const express_1=require(a19_0x21999d(0x216)),adminController_1=require(a19_0x21999d(0x245)),validation_1=require(a19_0x21999d(0x255)),auth_1=require(a19_0x21999d(0x253)),loggerService_1=require(a19_0x21999d(0x225)),coinToPayStatusService_1=require(a19_0x21999d(0x21b)),domainMonitoringService_1=require('../services/domainMonitoringService'),router=(0x0,express_1[a19_0x21999d(0x234)])(),adminController=new adminController_1[(a19_0x21999d(0x21e))]();router['use'](auth_1[a19_0x21999d(0x1e7)],auth_1[a19_0x21999d(0x237)]),router[a19_0x21999d(0x1f0)]('/auth',adminController['checkAuth']),router[a19_0x21999d(0x1f0)](a19_0x21999d(0x24f),adminController['getStatistics']),router[a19_0x21999d(0x1f0)](a19_0x21999d(0x24e),adminController['getMerchantStatistics']),router[a19_0x21999d(0x1f0)](a19_0x21999d(0x21d),adminController[a19_0x21999d(0x231)]),router[a19_0x21999d(0x1f0)]('/payout/merchants',adminController[a19_0x21999d(0x1ea)]),router[a19_0x21999d(0x1f0)]('/merchants/selection',adminController[a19_0x21999d(0x204)]),router[a19_0x21999d(0x251)](a19_0x21999d(0x1e6),(0x0,validation_1[a19_0x21999d(0x209)])(validation_1[a19_0x21999d(0x23b)]),adminController[a19_0x21999d(0x20a)]),router[a19_0x21999d(0x1f0)](a19_0x21999d(0x211),adminController[a19_0x21999d(0x208)]),router[a19_0x21999d(0x1f0)](a19_0x21999d(0x22a),adminController[a19_0x21999d(0x218)]),router[a19_0x21999d(0x202)](a19_0x21999d(0x22a),adminController[a19_0x21999d(0x224)]),router['get'](a19_0x21999d(0x221),adminController[a19_0x21999d(0x246)]),router[a19_0x21999d(0x1f0)](a19_0x21999d(0x257),adminController[a19_0x21999d(0x239)]),router[a19_0x21999d(0x223)](a19_0x21999d(0x257),adminController['updatePayment']),router[a19_0x21999d(0x223)](a19_0x21999d(0x1fa),(0x0,validation_1[a19_0x21999d(0x209)])(validation_1[a19_0x21999d(0x248)]),adminController['updateCustomerData']),router['get'](a19_0x21999d(0x1fc),adminController[a19_0x21999d(0x247)]),router[a19_0x21999d(0x1f0)]('/users/:id',adminController['getUserById']),router['post'](a19_0x21999d(0x1fc),(0x0,validation_1[a19_0x21999d(0x209)])(validation_1[a19_0x21999d(0x22c)]),adminController[a19_0x21999d(0x1f4)]),router[a19_0x21999d(0x223)](a19_0x21999d(0x206),(0x0,validation_1['validate'])(validation_1[a19_0x21999d(0x1f6)]),adminController[a19_0x21999d(0x229)]),router[a19_0x21999d(0x202)](a19_0x21999d(0x206),adminController[a19_0x21999d(0x20e)]),router[a19_0x21999d(0x251)](a19_0x21999d(0x233),adminController[a19_0x21999d(0x207)]),router[a19_0x21999d(0x251)]('/users/:id/activate',adminController[a19_0x21999d(0x201)]),router[a19_0x21999d(0x1f0)](a19_0x21999d(0x24d),(_0x3f047c,_0x316807)=>{const _0x202298=a19_0x21999d;try{const _0x142854=loggerService_1[_0x202298(0x242)][_0x202298(0x241)]();_0x316807[_0x202298(0x1fd)]({'success':!![],'result':_0x142854});}catch(_0x5133bf){_0x316807[_0x202298(0x200)](0x1f4)[_0x202298(0x1fd)]({'success':![],'message':_0x202298(0x24c)});}}),router[a19_0x21999d(0x251)](a19_0x21999d(0x1f8),(_0xd38441,_0x261dbe)=>{const _0x376ec7=a19_0x21999d;try{const {daysToKeep:daysToKeep=0x1e}=_0xd38441[_0x376ec7(0x1e3)];loggerService_1[_0x376ec7(0x242)][_0x376ec7(0x258)](daysToKeep),_0x261dbe[_0x376ec7(0x1fd)]({'success':!![],'message':_0x376ec7(0x22b)+daysToKeep+'\x20days)'});}catch(_0x4425c6){_0x261dbe['status'](0x1f4)[_0x376ec7(0x1fd)]({'success':![],'message':'Failed\x20to\x20clean\x20old\x20logs'});}}),router[a19_0x21999d(0x251)](a19_0x21999d(0x210),async(_0x213b2c,_0x5114d5)=>{const _0x548607=a19_0x21999d;try{const {paymentId:_0x2180dd}=_0x213b2c[_0x548607(0x1fe)];console[_0x548607(0x22d)](_0x548607(0x23a)+_0x2180dd),await coinToPayStatusService_1['coinToPayStatusService'][_0x548607(0x235)](_0x2180dd),_0x5114d5['json']({'success':!![],'message':_0x548607(0x259)});}catch(_0x7d0c5f){console[_0x548607(0x1ee)](_0x548607(0x1e9)+_0x213b2c[_0x548607(0x1fe)][_0x548607(0x217)]+':',_0x7d0c5f),_0x5114d5[_0x548607(0x200)](0x1f4)[_0x548607(0x1fd)]({'success':![],'message':_0x7d0c5f instanceof Error?_0x7d0c5f[_0x548607(0x1fb)]:'Failed\x20to\x20check\x20CoinToPay\x20payment\x20status'});}}),router[a19_0x21999d(0x1f0)](a19_0x21999d(0x20c),(_0x19a326,_0x1b3259)=>{const _0xa40269=a19_0x21999d;try{const _0x38b888=coinToPayStatusService_1[_0xa40269(0x20d)][_0xa40269(0x243)]();_0x1b3259[_0xa40269(0x1fd)]({'success':!![],'result':{..._0x38b888,'description':_0xa40269(0x203),'statusMapping':{'Paid':_0xa40269(0x230),'Awaiting\x20Fiat':'PENDING','waiting':'PENDING','expired':'EXPIRED','failed':_0xa40269(0x1eb)},'autoExpiryNote':_0xa40269(0x22f)+_0x38b888[_0xa40269(0x214)]+_0xa40269(0x213),'individualTimersNote':'Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly'}});}catch(_0x22e508){_0x1b3259[_0xa40269(0x200)](0x1f4)[_0xa40269(0x1fd)]({'success':![],'message':_0xa40269(0x21a)});}}),router[a19_0x21999d(0x1f0)](a19_0x21999d(0x1f7),async(_0x42752c,_0x1191c7)=>{const _0x3e7d90=a19_0x21999d;try{const {paymentId:_0x1b8c2a}=_0x42752c[_0x3e7d90(0x1fe)],_0x11e0e5=coinToPayStatusService_1[_0x3e7d90(0x20d)][_0x3e7d90(0x24b)](_0x1b8c2a),_0x73f272=(await Promise['resolve']()['then'](()=>__importStar(require(_0x3e7d90(0x23e)))))['default'],_0x1df2ee=await _0x73f272['payment']['findUnique']({'where':{'id':_0x1b8c2a},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x1df2ee)return _0x1191c7[_0x3e7d90(0x200)](0x194)['json']({'success':![],'message':_0x3e7d90(0x254)});_0x1191c7[_0x3e7d90(0x1fd)]({'success':!![],'result':{'payment':{'id':_0x1df2ee['id'],'gateway':_0x1df2ee['gateway'],'gatewayPaymentId':_0x1df2ee[_0x3e7d90(0x249)],'status':_0x1df2ee[_0x3e7d90(0x200)],'amount':_0x1df2ee[_0x3e7d90(0x252)],'currency':_0x1df2ee[_0x3e7d90(0x219)],'createdAt':_0x1df2ee[_0x3e7d90(0x244)],'updatedAt':_0x1df2ee[_0x3e7d90(0x250)],'shop':_0x1df2ee[_0x3e7d90(0x1e5)]},'timers':_0x11e0e5,'isCoinToPay':_0x1df2ee[_0x3e7d90(0x1f9)]===_0x3e7d90(0x20f),'ageInMinutes':Math['floor']((Date['now']()-_0x1df2ee[_0x3e7d90(0x244)][_0x3e7d90(0x215)]())/(0x3e8*0x3c))}});}catch(_0x3243fd){_0x1191c7['status'](0x1f4)['json']({'success':![],'message':_0x3243fd instanceof Error?_0x3243fd[_0x3e7d90(0x1fb)]:_0x3e7d90(0x256)});}}),router[a19_0x21999d(0x1f0)](a19_0x21999d(0x1ef),(_0xae19bd,_0x4b05c0)=>{const _0x263107=a19_0x21999d;try{const _0x2275ed=domainMonitoringService_1['domainMonitoringService']['getMonitoringStats']();_0x4b05c0[_0x263107(0x1fd)]({'success':!![],'result':{..._0x2275ed,'description':_0x263107(0x1f2),'behavior':_0x263107(0x23d),'encoding':_0x263107(0x238)}});}catch(_0x54bfdd){_0x4b05c0['status'](0x1f4)[_0x263107(0x1fd)]({'success':![],'message':_0x263107(0x228)});}}),router[a19_0x21999d(0x251)]('/domain-monitoring/check',async(_0x5039bd,_0x49fecd)=>{const _0x5adfcf=a19_0x21999d;try{const _0x46d525=await domainMonitoringService_1['domainMonitoringService'][_0x5adfcf(0x1f3)]();_0x49fecd[_0x5adfcf(0x1fd)]({'success':!![],'result':{'domainAvailable':_0x46d525,'message':_0x46d525?_0x5adfcf(0x240):_0x5adfcf(0x222),'timestamp':new Date()['toISOString']()}});}catch(_0x5aa5cb){_0x49fecd[_0x5adfcf(0x200)](0x1f4)['json']({'success':![],'message':_0x5aa5cb instanceof Error?_0x5aa5cb[_0x5adfcf(0x1fb)]:_0x5adfcf(0x1f5)});}}),exports['default']=router;