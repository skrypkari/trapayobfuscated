'use strict';const a18_0x7d5f17=a18_0x3811;(function(_0x1caa35,_0x223c6c){const _0x44cb93=a18_0x3811,_0x5b581f=_0x1caa35();while(!![]){try{const _0x5507b1=parseInt(_0x44cb93(0xe2))/0x1*(parseInt(_0x44cb93(0x13c))/0x2)+parseInt(_0x44cb93(0xdf))/0x3*(parseInt(_0x44cb93(0x11d))/0x4)+-parseInt(_0x44cb93(0xd0))/0x5+-parseInt(_0x44cb93(0x11e))/0x6*(parseInt(_0x44cb93(0xd6))/0x7)+parseInt(_0x44cb93(0xe9))/0x8+parseInt(_0x44cb93(0x130))/0x9*(-parseInt(_0x44cb93(0xd7))/0xa)+parseInt(_0x44cb93(0x10a))/0xb;if(_0x5507b1===_0x223c6c)break;else _0x5b581f['push'](_0x5b581f['shift']());}catch(_0x16ebef){_0x5b581f['push'](_0x5b581f['shift']());}}}(a18_0x5837,0x34a01));var __createBinding=this&&this[a18_0x7d5f17(0x118)]||(Object['create']?function(_0x5ae9e7,_0x507809,_0x5b22a2,_0x4e898d){const _0x156874=a18_0x7d5f17;if(_0x4e898d===undefined)_0x4e898d=_0x5b22a2;var _0x3143df=Object[_0x156874(0x127)](_0x507809,_0x5b22a2);(!_0x3143df||(_0x156874(0x12a)in _0x3143df?!_0x507809[_0x156874(0x123)]:_0x3143df['writable']||_0x3143df[_0x156874(0x112)]))&&(_0x3143df={'enumerable':!![],'get':function(){return _0x507809[_0x5b22a2];}}),Object[_0x156874(0x10f)](_0x5ae9e7,_0x4e898d,_0x3143df);}:function(_0x4744c2,_0x53768a,_0x2933a5,_0x40dfa5){if(_0x40dfa5===undefined)_0x40dfa5=_0x2933a5;_0x4744c2[_0x40dfa5]=_0x53768a[_0x2933a5];}),__setModuleDefault=this&&this[a18_0x7d5f17(0x131)]||(Object[a18_0x7d5f17(0x12d)]?function(_0x557b70,_0xfee66a){const _0x5b0298=a18_0x7d5f17;Object['defineProperty'](_0x557b70,_0x5b0298(0xd3),{'enumerable':!![],'value':_0xfee66a});}:function(_0x9dd733,_0x4c9991){const _0x2d670a=a18_0x7d5f17;_0x9dd733[_0x2d670a(0xd3)]=_0x4c9991;}),__importStar=this&&this[a18_0x7d5f17(0xf4)]||(function(){var _0x42dff1=function(_0x247b60){return _0x42dff1=Object['getOwnPropertyNames']||function(_0x94a355){const _0x52cc1e=a18_0x3811;var _0x191804=[];for(var _0x1922e1 in _0x94a355)if(Object['prototype']['hasOwnProperty'][_0x52cc1e(0x132)](_0x94a355,_0x1922e1))_0x191804[_0x191804[_0x52cc1e(0x107)]]=_0x1922e1;return _0x191804;},_0x42dff1(_0x247b60);};return function(_0x3e5787){const _0x382ccf=a18_0x3811;if(_0x3e5787&&_0x3e5787[_0x382ccf(0x123)])return _0x3e5787;var _0x52f75e={};if(_0x3e5787!=null){for(var _0x14430a=_0x42dff1(_0x3e5787),_0x144564=0x0;_0x144564<_0x14430a[_0x382ccf(0x107)];_0x144564++)if(_0x14430a[_0x144564]!=='default')__createBinding(_0x52f75e,_0x3e5787,_0x14430a[_0x144564]);}return __setModuleDefault(_0x52f75e,_0x3e5787),_0x52f75e;};}());Object['defineProperty'](exports,a18_0x7d5f17(0x123),{'value':!![]});function a18_0x5837(){const _0xcec2de=['domainMonitoringService','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','now','Payments\x20automatically\x20expire\x20after\x20','/logs/stats','AdminController','deleteUser','findUnique','5480tPNUxX','getLogStats','getPayments','delete','body','activateUser','authenticateToken','CoinToPay\x20automatic\x20status\x20checking\x20service','manualCheck','requireAdmin','/payments/:id','getMerchantsAwaitingPayout','/payments','Domain\x20check\x20failed','gatewayPaymentId','put','post','amount','1599950DPhypz','Router','Domain\x20is\x20responding\x20correctly','default','getServiceStats','/users/:id/suspend','377846QvbzHi','29750evVrQM','/auth','getTime','message','updateUserSchema','getPaymentTimerInfo','/payout/merchants','createdAt','225scYHik','/domain-monitoring/check','getPayoutStats','43zmEAVE','/users/:id/activate','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','floor','currency','../controllers/adminController','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','3298312HYMBoi','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','/cointopay/stats','\x20days\x20if\x20not\x20paid','/payouts','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','../middleware/validation','/payouts/:id','/payout','getMonitoringStats','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','__importStar','express','payment','PAID','/cointopay/check/:paymentId','Failed\x20to\x20get\x20log\x20statistics','error','/cointopay/payment/:paymentId','validate','cleanOldLogs','\x20days)','createPayout','../services/loggerService','../services/coinToPayStatusService','Failed\x20to\x20clean\x20old\x20logs','loggerService','getPaymentById','json','getMerchantStatistics','length','expiryDays','then','2363031QkLJDf','PENDING','CoinToPay\x20payment\x20status\x20checked\x20successfully','/users','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','defineProperty','status','getUsers','configurable','Failed\x20to\x20get\x20payment\x20information','log','params','updateUser','/users/:id','__createBinding','coinToPayStatusService','/statistics','suspendUser','deletePayout','17008qarSHi','24KIIszl','createPayoutSchema','../services/domainMonitoringService','resolve','createUserSchema','__esModule','Payment\x20not\x20found','getPayoutById','/domain-monitoring/stats','getOwnPropertyDescriptor','createUser','paymentId','get','gateway','getUserById','create','Old\x20logs\x20cleaned\x20(kept\x20last\x20','checkPaymentById','945ughEuX','__setModuleDefault','call','shop'];a18_0x5837=function(){return _0xcec2de;};return a18_0x5837();}const express_1=require(a18_0x7d5f17(0xf5)),adminController_1=require(a18_0x7d5f17(0xe7)),validation_1=require(a18_0x7d5f17(0xef)),auth_1=require('../middleware/auth'),loggerService_1=require(a18_0x7d5f17(0x100)),coinToPayStatusService_1=require(a18_0x7d5f17(0x101)),domainMonitoringService_1=require(a18_0x7d5f17(0x120)),router=(0x0,express_1[a18_0x7d5f17(0xd1)])(),adminController=new adminController_1[(a18_0x7d5f17(0x139))]();function a18_0x3811(_0x548356,_0x2e6b73){const _0x58378d=a18_0x5837();return a18_0x3811=function(_0x381122,_0x4b8535){_0x381122=_0x381122-0xcb;let _0x31f236=_0x58378d[_0x381122];return _0x31f236;},a18_0x3811(_0x548356,_0x2e6b73);}router['use'](auth_1[a18_0x7d5f17(0x142)],auth_1[a18_0x7d5f17(0x145)]),router[a18_0x7d5f17(0x12a)](a18_0x7d5f17(0xd8),adminController['checkAuth']),router[a18_0x7d5f17(0x12a)](a18_0x7d5f17(0x11a),adminController['getStatistics']),router['get']('/merchant-statistics',adminController[a18_0x7d5f17(0x106)]),router[a18_0x7d5f17(0x12a)]('/payout/stats',adminController[a18_0x7d5f17(0xe1)]),router[a18_0x7d5f17(0x12a)](a18_0x7d5f17(0xdd),adminController[a18_0x7d5f17(0x147)]),router[a18_0x7d5f17(0xce)](a18_0x7d5f17(0xf1),(0x0,validation_1[a18_0x7d5f17(0xfc)])(validation_1[a18_0x7d5f17(0x11f)]),adminController[a18_0x7d5f17(0xff)]),router[a18_0x7d5f17(0x12a)](a18_0x7d5f17(0xed),adminController['getPayouts']),router[a18_0x7d5f17(0x12a)](a18_0x7d5f17(0xf0),adminController[a18_0x7d5f17(0x125)]),router[a18_0x7d5f17(0x13f)]('/payouts/:id',adminController[a18_0x7d5f17(0x11c)]),router[a18_0x7d5f17(0x12a)](a18_0x7d5f17(0x148),adminController[a18_0x7d5f17(0x13e)]),router[a18_0x7d5f17(0x12a)]('/payments/:id',adminController[a18_0x7d5f17(0x104)]),router[a18_0x7d5f17(0xcd)](a18_0x7d5f17(0x146),adminController['updatePayment']),router[a18_0x7d5f17(0x12a)](a18_0x7d5f17(0x10d),adminController[a18_0x7d5f17(0x111)]),router[a18_0x7d5f17(0x12a)]('/users/:id',adminController[a18_0x7d5f17(0x12c)]),router[a18_0x7d5f17(0xce)](a18_0x7d5f17(0x10d),(0x0,validation_1[a18_0x7d5f17(0xfc)])(validation_1[a18_0x7d5f17(0x122)]),adminController[a18_0x7d5f17(0x128)]),router['put'](a18_0x7d5f17(0x117),(0x0,validation_1[a18_0x7d5f17(0xfc)])(validation_1[a18_0x7d5f17(0xdb)]),adminController[a18_0x7d5f17(0x116)]),router['delete'](a18_0x7d5f17(0x117),adminController[a18_0x7d5f17(0x13a)]),router[a18_0x7d5f17(0xce)](a18_0x7d5f17(0xd5),adminController[a18_0x7d5f17(0x11b)]),router[a18_0x7d5f17(0xce)](a18_0x7d5f17(0xe3),adminController[a18_0x7d5f17(0x141)]),router[a18_0x7d5f17(0x12a)](a18_0x7d5f17(0x138),(_0x42dec9,_0x56deec)=>{const _0x10617f=a18_0x7d5f17;try{const _0x1127d0=loggerService_1[_0x10617f(0x103)][_0x10617f(0x13d)]();_0x56deec[_0x10617f(0x105)]({'success':!![],'result':_0x1127d0});}catch(_0x5aa40c){_0x56deec[_0x10617f(0x110)](0x1f4)['json']({'success':![],'message':_0x10617f(0xf9)});}}),router['post']('/logs/clean',(_0x3ddecc,_0x312c20)=>{const _0x20de45=a18_0x7d5f17;try{const {daysToKeep:daysToKeep=0x1e}=_0x3ddecc[_0x20de45(0x140)];loggerService_1[_0x20de45(0x103)][_0x20de45(0xfd)](daysToKeep),_0x312c20['json']({'success':!![],'message':_0x20de45(0x12e)+daysToKeep+_0x20de45(0xfe)});}catch(_0x160253){_0x312c20[_0x20de45(0x110)](0x1f4)[_0x20de45(0x105)]({'success':![],'message':_0x20de45(0x102)});}}),router[a18_0x7d5f17(0xce)](a18_0x7d5f17(0xf8),async(_0x16fdf9,_0x522808)=>{const _0x3e3c4d=a18_0x7d5f17;try{const {paymentId:_0x52ba13}=_0x16fdf9[_0x3e3c4d(0x115)];console[_0x3e3c4d(0x114)]('🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20'+_0x52ba13),await coinToPayStatusService_1['coinToPayStatusService'][_0x3e3c4d(0x12f)](_0x52ba13),_0x522808[_0x3e3c4d(0x105)]({'success':!![],'message':_0x3e3c4d(0x10c)});}catch(_0x3a924d){console[_0x3e3c4d(0xfa)]('❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20'+_0x16fdf9[_0x3e3c4d(0x115)][_0x3e3c4d(0x129)]+':',_0x3a924d),_0x522808['status'](0x1f4)[_0x3e3c4d(0x105)]({'success':![],'message':_0x3a924d instanceof Error?_0x3a924d[_0x3e3c4d(0xda)]:_0x3e3c4d(0x10e)});}}),router[a18_0x7d5f17(0x12a)](a18_0x7d5f17(0xeb),(_0x4272aa,_0x3cb887)=>{const _0x505037=a18_0x7d5f17;try{const _0xecf453=coinToPayStatusService_1[_0x505037(0x119)][_0x505037(0xd4)]();_0x3cb887[_0x505037(0x105)]({'success':!![],'result':{..._0xecf453,'description':_0x505037(0x143),'statusMapping':{'Paid':_0x505037(0xf7),'Awaiting\x20Fiat':_0x505037(0x10b),'waiting':_0x505037(0x10b),'expired':'EXPIRED','failed':'FAILED'},'autoExpiryNote':_0x505037(0x137)+_0xecf453[_0x505037(0x108)]+_0x505037(0xec),'individualTimersNote':_0x505037(0x135)}});}catch(_0x285f8c){_0x3cb887[_0x505037(0x110)](0x1f4)[_0x505037(0x105)]({'success':![],'message':_0x505037(0xe4)});}}),router[a18_0x7d5f17(0x12a)](a18_0x7d5f17(0xfb),async(_0x315f0f,_0x6bf1db)=>{const _0x49a606=a18_0x7d5f17;try{const {paymentId:_0x3934d6}=_0x315f0f['params'],_0x5bcda7=coinToPayStatusService_1[_0x49a606(0x119)][_0x49a606(0xdc)](_0x3934d6),_0xc86f91=(await Promise[_0x49a606(0x121)]()[_0x49a606(0x109)](()=>__importStar(require('../config/database'))))['default'],_0x24289f=await _0xc86f91[_0x49a606(0xf6)][_0x49a606(0x13b)]({'where':{'id':_0x3934d6},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x24289f)return _0x6bf1db[_0x49a606(0x110)](0x194)['json']({'success':![],'message':_0x49a606(0x124)});_0x6bf1db[_0x49a606(0x105)]({'success':!![],'result':{'payment':{'id':_0x24289f['id'],'gateway':_0x24289f[_0x49a606(0x12b)],'gatewayPaymentId':_0x24289f[_0x49a606(0xcc)],'status':_0x24289f[_0x49a606(0x110)],'amount':_0x24289f[_0x49a606(0xcf)],'currency':_0x24289f[_0x49a606(0xe6)],'createdAt':_0x24289f[_0x49a606(0xde)],'updatedAt':_0x24289f['updatedAt'],'shop':_0x24289f[_0x49a606(0x133)]},'timers':_0x5bcda7,'isCoinToPay':_0x24289f['gateway']==='cointopay','ageInMinutes':Math[_0x49a606(0xe5)]((Date[_0x49a606(0x136)]()-_0x24289f[_0x49a606(0xde)][_0x49a606(0xd9)]())/(0x3e8*0x3c))}});}catch(_0x24fd43){_0x6bf1db[_0x49a606(0x110)](0x1f4)[_0x49a606(0x105)]({'success':![],'message':_0x24fd43 instanceof Error?_0x24fd43[_0x49a606(0xda)]:_0x49a606(0x113)});}}),router[a18_0x7d5f17(0x12a)](a18_0x7d5f17(0x126),(_0x2ea9a3,_0xc9198f)=>{const _0x2f6159=a18_0x7d5f17;try{const _0x1a553a=domainMonitoringService_1[_0x2f6159(0x134)][_0x2f6159(0xf2)]();_0xc9198f[_0x2f6159(0x105)]({'success':!![],'result':{..._0x1a553a,'description':_0x2f6159(0xee),'behavior':_0x2f6159(0xe8),'encoding':_0x2f6159(0xea)}});}catch(_0x576528){_0xc9198f['status'](0x1f4)[_0x2f6159(0x105)]({'success':![],'message':_0x2f6159(0xf3)});}}),router['post'](a18_0x7d5f17(0xe0),async(_0x49d255,_0xf87622)=>{const _0x1e8345=a18_0x7d5f17;try{const _0x502ff0=await domainMonitoringService_1[_0x1e8345(0x134)][_0x1e8345(0x144)]();_0xf87622[_0x1e8345(0x105)]({'success':!![],'result':{'domainAvailable':_0x502ff0,'message':_0x502ff0?_0x1e8345(0xd2):_0x1e8345(0xcb),'timestamp':new Date()['toISOString']()}});}catch(_0x2c4d40){_0xf87622[_0x1e8345(0x110)](0x1f4)[_0x1e8345(0x105)]({'success':![],'message':_0x2c4d40 instanceof Error?_0x2c4d40[_0x1e8345(0xda)]:'Failed\x20to\x20perform\x20manual\x20domain\x20check'});}}),exports[a18_0x7d5f17(0xd3)]=router;