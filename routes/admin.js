'use strict';function a18_0x207f(_0x1456e8,_0x3425d9){const _0x4c5dee=a18_0x4c5d();return a18_0x207f=function(_0x207f6b,_0x3a9ee8){_0x207f6b=_0x207f6b-0xe0;let _0x231e98=_0x4c5dee[_0x207f6b];return _0x231e98;},a18_0x207f(_0x1456e8,_0x3425d9);}const a18_0x1abd8c=a18_0x207f;(function(_0x1893b0,_0x277f24){const _0xefc6fc=a18_0x207f,_0x219dab=_0x1893b0();while(!![]){try{const _0x47b62e=-parseInt(_0xefc6fc(0x10e))/0x1+-parseInt(_0xefc6fc(0xfe))/0x2+parseInt(_0xefc6fc(0x10d))/0x3+parseInt(_0xefc6fc(0x134))/0x4*(parseInt(_0xefc6fc(0xe3))/0x5)+-parseInt(_0xefc6fc(0xe8))/0x6+-parseInt(_0xefc6fc(0x145))/0x7+parseInt(_0xefc6fc(0x14e))/0x8;if(_0x47b62e===_0x277f24)break;else _0x219dab['push'](_0x219dab['shift']());}catch(_0x2a4026){_0x219dab['push'](_0x219dab['shift']());}}}(a18_0x4c5d,0xe623b));var __createBinding=this&&this[a18_0x1abd8c(0x141)]||(Object[a18_0x1abd8c(0x12c)]?function(_0x10cd3e,_0x2d99a8,_0x2077e9,_0x2a8c6b){const _0x87968b=a18_0x1abd8c;if(_0x2a8c6b===undefined)_0x2a8c6b=_0x2077e9;var _0x13c034=Object[_0x87968b(0xe4)](_0x2d99a8,_0x2077e9);(!_0x13c034||(_0x87968b(0xfa)in _0x13c034?!_0x2d99a8[_0x87968b(0x122)]:_0x13c034[_0x87968b(0x11d)]||_0x13c034['configurable']))&&(_0x13c034={'enumerable':!![],'get':function(){return _0x2d99a8[_0x2077e9];}}),Object[_0x87968b(0x126)](_0x10cd3e,_0x2a8c6b,_0x13c034);}:function(_0x3511b3,_0x341231,_0x584e39,_0x740ca7){if(_0x740ca7===undefined)_0x740ca7=_0x584e39;_0x3511b3[_0x740ca7]=_0x341231[_0x584e39];}),__setModuleDefault=this&&this[a18_0x1abd8c(0x13e)]||(Object[a18_0x1abd8c(0x12c)]?function(_0x395b02,_0x151853){const _0x3ee6de=a18_0x1abd8c;Object[_0x3ee6de(0x126)](_0x395b02,_0x3ee6de(0xed),{'enumerable':!![],'value':_0x151853});}:function(_0x47d6e0,_0x57afa0){const _0x11b9ae=a18_0x1abd8c;_0x47d6e0[_0x11b9ae(0xed)]=_0x57afa0;}),__importStar=this&&this[a18_0x1abd8c(0x114)]||(function(){var _0x23c06a=function(_0x2fbe83){return _0x23c06a=Object['getOwnPropertyNames']||function(_0x5dbd11){const _0x353bd0=a18_0x207f;var _0x2294fe=[];for(var _0x519ed1 in _0x5dbd11)if(Object[_0x353bd0(0x137)]['hasOwnProperty'][_0x353bd0(0x128)](_0x5dbd11,_0x519ed1))_0x2294fe[_0x2294fe[_0x353bd0(0x123)]]=_0x519ed1;return _0x2294fe;},_0x23c06a(_0x2fbe83);};return function(_0x44f9e7){const _0x403fdb=a18_0x207f;if(_0x44f9e7&&_0x44f9e7[_0x403fdb(0x122)])return _0x44f9e7;var _0x10d1f4={};if(_0x44f9e7!=null){for(var _0x19805a=_0x23c06a(_0x44f9e7),_0x4108bc=0x0;_0x4108bc<_0x19805a[_0x403fdb(0x123)];_0x4108bc++)if(_0x19805a[_0x4108bc]!==_0x403fdb(0xed))__createBinding(_0x10d1f4,_0x44f9e7,_0x19805a[_0x4108bc]);}return __setModuleDefault(_0x10d1f4,_0x44f9e7),_0x10d1f4;};}());Object['defineProperty'](exports,a18_0x1abd8c(0x122),{'value':!![]});function a18_0x4c5d(){const _0x2bdce3=['AdminController','default','params','gateway','activateUser','updateCustomerDataSchema','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','/payout/merchants','Payment\x20not\x20found','post','/payments/:id','../middleware/auth','log','Failed\x20to\x20perform\x20manual\x20domain\x20check','get','getMerchantsAwaitingPayout','findUnique','/cointopay/payment/:paymentId','3192282iFzhkc','manualCheck','CoinToPay\x20automatic\x20status\x20checking\x20service','authenticateToken','delete','toISOString','/statistics','now','validate','../services/domainMonitoringService','getMonitoringStats','checkAuth','Failed\x20to\x20clean\x20old\x20logs','amount','/payouts/:id','2176161npfPGE','1344414MsLKMf','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','/domain-monitoring/stats','/cointopay/stats','/users/:id/activate','coinToPayStatusService','__importStar','Payments\x20automatically\x20expire\x20after\x20','updateUserSchema','currency','createPayout','createdAt','getTime','/auth','/cointopay/check/:paymentId','writable','getServiceStats','getPaymentTimerInfo','ðŸ”\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','getPayments','__esModule','length','json','message','defineProperty','PENDING','call','Old\x20logs\x20cleaned\x20(kept\x20last\x20','then','/merchant-statistics','create','Failed\x20to\x20get\x20payment\x20information','âŒ\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','paymentId','\x20days)','cointopay','/users/:id/suspend','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','76zZfHUn','shop','domainMonitoringService','prototype','getStatistics','EXPIRED','getMerchantStatistics','loggerService','/payout','/users/:id','__setModuleDefault','expiryDays','updatePayment','__createBinding','suspendUser','createUserSchema','/users','4906293VBUmsp','/logs/stats','createPayoutSchema','/payout/stats','Domain\x20check\x20failed','put','getPaymentById','getPayouts','/logs/clean','21375888UftpeU','status','/payouts','../middleware/validation','Domain\x20is\x20responding\x20correctly','resolve','requireAdmin','336705NkKTzp','getOwnPropertyDescriptor','cleanOldLogs','/domain-monitoring/check','../config/database','556482tWGDUu','updateCustomerData','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','body'];a18_0x4c5d=function(){return _0x2bdce3;};return a18_0x4c5d();}const express_1=require('express'),adminController_1=require('../controllers/adminController'),validation_1=require(a18_0x1abd8c(0x151)),auth_1=require(a18_0x1abd8c(0xf7)),loggerService_1=require('../services/loggerService'),coinToPayStatusService_1=require('../services/coinToPayStatusService'),domainMonitoringService_1=require(a18_0x1abd8c(0x107)),router=(0x0,express_1['Router'])(),adminController=new adminController_1[(a18_0x1abd8c(0xec))]();router['use'](auth_1[a18_0x1abd8c(0x101)],auth_1[a18_0x1abd8c(0xe2)]),router[a18_0x1abd8c(0xfa)](a18_0x1abd8c(0x11b),adminController[a18_0x1abd8c(0x109)]),router[a18_0x1abd8c(0xfa)](a18_0x1abd8c(0x104),adminController[a18_0x1abd8c(0x138)]),router[a18_0x1abd8c(0xfa)](a18_0x1abd8c(0x12b),adminController[a18_0x1abd8c(0x13a)]),router[a18_0x1abd8c(0xfa)](a18_0x1abd8c(0x148),adminController['getPayoutStats']),router[a18_0x1abd8c(0xfa)](a18_0x1abd8c(0xf3),adminController[a18_0x1abd8c(0xfb)]),router[a18_0x1abd8c(0xf5)](a18_0x1abd8c(0x13c),(0x0,validation_1[a18_0x1abd8c(0x106)])(validation_1[a18_0x1abd8c(0x147)]),adminController[a18_0x1abd8c(0x118)]),router['get'](a18_0x1abd8c(0x150),adminController[a18_0x1abd8c(0x14c)]),router[a18_0x1abd8c(0xfa)](a18_0x1abd8c(0x10c),adminController['getPayoutById']),router['delete'](a18_0x1abd8c(0x10c),adminController['deletePayout']),router[a18_0x1abd8c(0xfa)]('/payments',adminController[a18_0x1abd8c(0x121)]),router[a18_0x1abd8c(0xfa)]('/payments/:id',adminController[a18_0x1abd8c(0x14b)]),router[a18_0x1abd8c(0x14a)](a18_0x1abd8c(0xf6),adminController[a18_0x1abd8c(0x140)]),router[a18_0x1abd8c(0x14a)]('/payments/:id/customer',(0x0,validation_1['validate'])(validation_1[a18_0x1abd8c(0xf1)]),adminController[a18_0x1abd8c(0xe9)]),router[a18_0x1abd8c(0xfa)](a18_0x1abd8c(0x144),adminController['getUsers']),router[a18_0x1abd8c(0xfa)]('/users/:id',adminController['getUserById']),router[a18_0x1abd8c(0xf5)](a18_0x1abd8c(0x144),(0x0,validation_1[a18_0x1abd8c(0x106)])(validation_1[a18_0x1abd8c(0x143)]),adminController['createUser']),router[a18_0x1abd8c(0x14a)](a18_0x1abd8c(0x13d),(0x0,validation_1[a18_0x1abd8c(0x106)])(validation_1[a18_0x1abd8c(0x116)]),adminController['updateUser']),router[a18_0x1abd8c(0x102)](a18_0x1abd8c(0x13d),adminController['deleteUser']),router[a18_0x1abd8c(0xf5)](a18_0x1abd8c(0x132),adminController[a18_0x1abd8c(0x142)]),router[a18_0x1abd8c(0xf5)](a18_0x1abd8c(0x112),adminController[a18_0x1abd8c(0xf0)]),router[a18_0x1abd8c(0xfa)](a18_0x1abd8c(0x146),(_0x4a0805,_0x2879c3)=>{const _0x2cbae4=a18_0x1abd8c;try{const _0x343565=loggerService_1[_0x2cbae4(0x13b)]['getLogStats']();_0x2879c3['json']({'success':!![],'result':_0x343565});}catch(_0x2f1fa9){_0x2879c3['status'](0x1f4)['json']({'success':![],'message':'Failed\x20to\x20get\x20log\x20statistics'});}}),router['post'](a18_0x1abd8c(0x14d),(_0x3a68ff,_0x318345)=>{const _0x718af=a18_0x1abd8c;try{const {daysToKeep:daysToKeep=0x1e}=_0x3a68ff[_0x718af(0xeb)];loggerService_1[_0x718af(0x13b)][_0x718af(0xe5)](daysToKeep),_0x318345[_0x718af(0x124)]({'success':!![],'message':_0x718af(0x129)+daysToKeep+_0x718af(0x130)});}catch(_0x12b8f8){_0x318345['status'](0x1f4)[_0x718af(0x124)]({'success':![],'message':_0x718af(0x10a)});}}),router[a18_0x1abd8c(0xf5)](a18_0x1abd8c(0x11c),async(_0x4e68bb,_0x5c5007)=>{const _0x2d69f3=a18_0x1abd8c;try{const {paymentId:_0x381777}=_0x4e68bb[_0x2d69f3(0xee)];console[_0x2d69f3(0xf8)](_0x2d69f3(0x120)+_0x381777),await coinToPayStatusService_1[_0x2d69f3(0x113)]['checkPaymentById'](_0x381777),_0x5c5007[_0x2d69f3(0x124)]({'success':!![],'message':'CoinToPay\x20payment\x20status\x20checked\x20successfully'});}catch(_0x39d151){console['error'](_0x2d69f3(0x12e)+_0x4e68bb[_0x2d69f3(0xee)][_0x2d69f3(0x12f)]+':',_0x39d151),_0x5c5007[_0x2d69f3(0x14f)](0x1f4)[_0x2d69f3(0x124)]({'success':![],'message':_0x39d151 instanceof Error?_0x39d151[_0x2d69f3(0x125)]:'Failed\x20to\x20check\x20CoinToPay\x20payment\x20status'});}}),router[a18_0x1abd8c(0xfa)](a18_0x1abd8c(0x111),(_0x5607f6,_0x55be0)=>{const _0x301240=a18_0x1abd8c;try{const _0xe8a8be=coinToPayStatusService_1['coinToPayStatusService'][_0x301240(0x11e)]();_0x55be0['json']({'success':!![],'result':{..._0xe8a8be,'description':_0x301240(0x100),'statusMapping':{'Paid':'PAID','Awaiting\x20Fiat':'PENDING','waiting':_0x301240(0x127),'expired':_0x301240(0x139),'failed':'FAILED'},'autoExpiryNote':_0x301240(0x115)+_0xe8a8be[_0x301240(0x13f)]+'\x20days\x20if\x20not\x20paid','individualTimersNote':_0x301240(0xf2)}});}catch(_0x178946){_0x55be0['status'](0x1f4)[_0x301240(0x124)]({'success':![],'message':'Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics'});}}),router[a18_0x1abd8c(0xfa)](a18_0x1abd8c(0xfd),async(_0x230ee7,_0x4d8e39)=>{const _0x255af2=a18_0x1abd8c;try{const {paymentId:_0x2d9845}=_0x230ee7[_0x255af2(0xee)],_0x5ab1b6=coinToPayStatusService_1[_0x255af2(0x113)][_0x255af2(0x11f)](_0x2d9845),_0xeab0dc=(await Promise[_0x255af2(0xe1)]()[_0x255af2(0x12a)](()=>__importStar(require(_0x255af2(0xe7)))))[_0x255af2(0xed)],_0x5c321c=await _0xeab0dc['payment'][_0x255af2(0xfc)]({'where':{'id':_0x2d9845},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x5c321c)return _0x4d8e39[_0x255af2(0x14f)](0x194)['json']({'success':![],'message':_0x255af2(0xf4)});_0x4d8e39['json']({'success':!![],'result':{'payment':{'id':_0x5c321c['id'],'gateway':_0x5c321c[_0x255af2(0xef)],'gatewayPaymentId':_0x5c321c['gatewayPaymentId'],'status':_0x5c321c[_0x255af2(0x14f)],'amount':_0x5c321c[_0x255af2(0x10b)],'currency':_0x5c321c[_0x255af2(0x117)],'createdAt':_0x5c321c['createdAt'],'updatedAt':_0x5c321c['updatedAt'],'shop':_0x5c321c[_0x255af2(0x135)]},'timers':_0x5ab1b6,'isCoinToPay':_0x5c321c[_0x255af2(0xef)]===_0x255af2(0x131),'ageInMinutes':Math['floor']((Date[_0x255af2(0x105)]()-_0x5c321c[_0x255af2(0x119)][_0x255af2(0x11a)]())/(0x3e8*0x3c))}});}catch(_0x2f8748){_0x4d8e39[_0x255af2(0x14f)](0x1f4)[_0x255af2(0x124)]({'success':![],'message':_0x2f8748 instanceof Error?_0x2f8748['message']:_0x255af2(0x12d)});}}),router[a18_0x1abd8c(0xfa)](a18_0x1abd8c(0x110),(_0x50c65f,_0x2be7bc)=>{const _0x5440dd=a18_0x1abd8c;try{const _0xf804c0=domainMonitoringService_1[_0x5440dd(0x136)][_0x5440dd(0x108)]();_0x2be7bc[_0x5440dd(0x124)]({'success':!![],'result':{..._0xf804c0,'description':_0x5440dd(0x133),'behavior':'Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','encoding':_0x5440dd(0x10f)}});}catch(_0x15c350){_0x2be7bc[_0x5440dd(0x14f)](0x1f4)[_0x5440dd(0x124)]({'success':![],'message':_0x5440dd(0xea)});}}),router['post'](a18_0x1abd8c(0xe6),async(_0x4388fd,_0x36070e)=>{const _0x45a3ff=a18_0x1abd8c;try{const _0x411f7b=await domainMonitoringService_1[_0x45a3ff(0x136)][_0x45a3ff(0xff)]();_0x36070e['json']({'success':!![],'result':{'domainAvailable':_0x411f7b,'message':_0x411f7b?_0x45a3ff(0xe0):_0x45a3ff(0x149),'timestamp':new Date()[_0x45a3ff(0x103)]()}});}catch(_0x113086){_0x36070e[_0x45a3ff(0x14f)](0x1f4)['json']({'success':![],'message':_0x113086 instanceof Error?_0x113086['message']:_0x45a3ff(0xf9)});}}),exports[a18_0x1abd8c(0xed)]=router;