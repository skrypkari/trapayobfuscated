'use strict';const a19_0x152365=a19_0x91dc;(function(_0x4c4a91,_0x3ff078){const _0x6c35f7=a19_0x91dc,_0x5b49eb=_0x4c4a91();while(!![]){try{const _0x400f73=-parseInt(_0x6c35f7(0x107))/0x1+-parseInt(_0x6c35f7(0xff))/0x2*(-parseInt(_0x6c35f7(0x9e))/0x3)+parseInt(_0x6c35f7(0xad))/0x4+parseInt(_0x6c35f7(0xa4))/0x5*(parseInt(_0x6c35f7(0x9d))/0x6)+parseInt(_0x6c35f7(0xeb))/0x7*(parseInt(_0x6c35f7(0xfa))/0x8)+parseInt(_0x6c35f7(0x112))/0x9+parseInt(_0x6c35f7(0xd7))/0xa*(-parseInt(_0x6c35f7(0xbf))/0xb);if(_0x400f73===_0x3ff078)break;else _0x5b49eb['push'](_0x5b49eb['shift']());}catch(_0x50891a){_0x5b49eb['push'](_0x5b49eb['shift']());}}}(a19_0x3696,0x86341));var __createBinding=this&&this[a19_0x152365(0xe2)]||(Object[a19_0x152365(0xdb)]?function(_0x1a8d31,_0xf70f45,_0x42fa39,_0x1b19bb){const _0x3c8848=a19_0x152365;if(_0x1b19bb===undefined)_0x1b19bb=_0x42fa39;var _0x7ffa34=Object[_0x3c8848(0x103)](_0xf70f45,_0x42fa39);(!_0x7ffa34||(_0x3c8848(0xb2)in _0x7ffa34?!_0xf70f45[_0x3c8848(0x114)]:_0x7ffa34['writable']||_0x7ffa34[_0x3c8848(0x113)]))&&(_0x7ffa34={'enumerable':!![],'get':function(){return _0xf70f45[_0x42fa39];}}),Object[_0x3c8848(0xd9)](_0x1a8d31,_0x1b19bb,_0x7ffa34);}:function(_0x2a259f,_0x12cd02,_0x53b5cf,_0x11e8f3){if(_0x11e8f3===undefined)_0x11e8f3=_0x53b5cf;_0x2a259f[_0x11e8f3]=_0x12cd02[_0x53b5cf];}),__setModuleDefault=this&&this[a19_0x152365(0xee)]||(Object['create']?function(_0x2915df,_0x7df53e){const _0x1a8763=a19_0x152365;Object[_0x1a8763(0xd9)](_0x2915df,_0x1a8763(0xda),{'enumerable':!![],'value':_0x7df53e});}:function(_0x1a01a4,_0x282fbc){const _0x349321=a19_0x152365;_0x1a01a4[_0x349321(0xda)]=_0x282fbc;}),__importStar=this&&this[a19_0x152365(0x111)]||(function(){var _0x285c01=function(_0x255b25){const _0x321985=a19_0x91dc;return _0x285c01=Object[_0x321985(0xa1)]||function(_0x21dc10){const _0x13302a=_0x321985;var _0x2bc64e=[];for(var _0xb1820b in _0x21dc10)if(Object[_0x13302a(0x102)]['hasOwnProperty'][_0x13302a(0xf3)](_0x21dc10,_0xb1820b))_0x2bc64e[_0x2bc64e['length']]=_0xb1820b;return _0x2bc64e;},_0x285c01(_0x255b25);};return function(_0x16fefe){const _0x51c01b=a19_0x91dc;if(_0x16fefe&&_0x16fefe['__esModule'])return _0x16fefe;var _0xe76584={};if(_0x16fefe!=null){for(var _0x460761=_0x285c01(_0x16fefe),_0x45dc41=0x0;_0x45dc41<_0x460761[_0x51c01b(0xf0)];_0x45dc41++)if(_0x460761[_0x45dc41]!==_0x51c01b(0xda))__createBinding(_0xe76584,_0x16fefe,_0x460761[_0x45dc41]);}return __setModuleDefault(_0xe76584,_0x16fefe),_0xe76584;};}());function a19_0x3696(){const _0x311051=['__setModuleDefault','getPayouts','length','/payout/stats','updatePayment','call','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','getPaymentById','activateUser','gateway','/logs/stats','/domain-monitoring/stats','24coRXpr','Old\x20logs\x20cleaned\x20(kept\x20last\x20','CoinToPay\x20automatic\x20status\x20checking\x20service','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','cleanOldLogs','634GrfzmT','Payments\x20automatically\x20expire\x20after\x20','put','prototype','getOwnPropertyDescriptor','../services/domainMonitoringService','updateCustomerData','checkPaymentById','96461UECvTb','../middleware/validation','validate','updateUser','Failed\x20to\x20clean\x20old\x20logs','/payout/merchants','then','domainMonitoringService','updateUserSchema','/domain-monitoring/check','__importStar','3463416cJBtau','configurable','__esModule','delete','deletePayout','params','express','requireAdmin','post','cointopay','136932gCFBoi','42Hmfzuz','../services/coinToPayStatusService','/payout','getOwnPropertyNames','createUserSchema','/users','110nGGykg','\x20days)','createdAt','FAILED','error','/users/:id','Domain\x20check\x20failed','getPayoutStats','/payments','2867100GIiBrf','json','createUser','getStatistics','findUnique','get','/users/:id/suspend','resolve','expiryDays','message','createPayout','Failed\x20to\x20perform\x20manual\x20domain\x20check','status','use','/auth','getLogStats','/payouts','../middleware/auth','11VDqNHM','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','getPayments','/payouts/:id','manualCheck','createPayoutSchema','/cointopay/stats','/merchants/selection','PAID','shop','checkAuth','/payments/:id','/merchant-statistics','PENDING','loggerService','🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','\x20days\x20if\x20not\x20paid','updateCustomerDataSchema','../config/database','coinToPayStatusService','getMonitoringStats','/cointopay/payment/:paymentId','body','amount','13004440apdJNu','CoinToPay\x20payment\x20status\x20checked\x20successfully','defineProperty','default','create','getPayoutById','Failed\x20to\x20get\x20payment\x20information','getPaymentTimerInfo','now','/users/:id/activate','❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','__createBinding','paymentId','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','authenticateToken','/statistics','gatewayPaymentId','Payment\x20not\x20found','payment','../services/loggerService','789789DAkdIM','getTime','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu'];a19_0x3696=function(){return _0x311051;};return a19_0x3696();}Object['defineProperty'](exports,a19_0x152365(0x114),{'value':!![]});const express_1=require(a19_0x152365(0x118)),adminController_1=require('../controllers/adminController'),validation_1=require(a19_0x152365(0x108)),auth_1=require(a19_0x152365(0xbe)),loggerService_1=require(a19_0x152365(0xea)),coinToPayStatusService_1=require(a19_0x152365(0x9f)),domainMonitoringService_1=require(a19_0x152365(0x104)),router=(0x0,express_1['Router'])(),adminController=new adminController_1['AdminController']();function a19_0x91dc(_0x1a7e9e,_0x5f612b){const _0x369692=a19_0x3696();return a19_0x91dc=function(_0x91dc47,_0x285e01){_0x91dc47=_0x91dc47-0x9a;let _0x2790ab=_0x369692[_0x91dc47];return _0x2790ab;},a19_0x91dc(_0x1a7e9e,_0x5f612b);}router[a19_0x152365(0xba)](auth_1[a19_0x152365(0xe5)],auth_1[a19_0x152365(0x9a)]),router[a19_0x152365(0xb2)](a19_0x152365(0xbb),adminController[a19_0x152365(0xc9)]),router['get'](a19_0x152365(0xe6),adminController[a19_0x152365(0xb0)]),router[a19_0x152365(0xb2)](a19_0x152365(0xcb),adminController['getMerchantStatistics']),router[a19_0x152365(0xb2)](a19_0x152365(0xf1),adminController[a19_0x152365(0xab)]),router[a19_0x152365(0xb2)](a19_0x152365(0x10c),adminController['getMerchantsAwaitingPayout']),router[a19_0x152365(0xb2)](a19_0x152365(0xc6),adminController['getMerchantsSelection']),router['post'](a19_0x152365(0xa0),(0x0,validation_1[a19_0x152365(0x109)])(validation_1[a19_0x152365(0xc4)]),adminController[a19_0x152365(0xb7)]),router[a19_0x152365(0xb2)](a19_0x152365(0xbd),adminController[a19_0x152365(0xef)]),router[a19_0x152365(0xb2)](a19_0x152365(0xc2),adminController[a19_0x152365(0xdc)]),router[a19_0x152365(0x115)](a19_0x152365(0xc2),adminController[a19_0x152365(0x116)]),router['get'](a19_0x152365(0xac),adminController[a19_0x152365(0xc1)]),router[a19_0x152365(0xb2)](a19_0x152365(0xca),adminController[a19_0x152365(0xf5)]),router['put'](a19_0x152365(0xca),adminController[a19_0x152365(0xf2)]),router[a19_0x152365(0x101)]('/payments/:id/customer',(0x0,validation_1[a19_0x152365(0x109)])(validation_1[a19_0x152365(0xd0)]),adminController[a19_0x152365(0x105)]),router['get'](a19_0x152365(0xa3),adminController['getUsers']),router[a19_0x152365(0xb2)](a19_0x152365(0xa9),adminController['getUserById']),router[a19_0x152365(0x9b)](a19_0x152365(0xa3),(0x0,validation_1[a19_0x152365(0x109)])(validation_1[a19_0x152365(0xa2)]),adminController[a19_0x152365(0xaf)]),router[a19_0x152365(0x101)](a19_0x152365(0xa9),(0x0,validation_1[a19_0x152365(0x109)])(validation_1[a19_0x152365(0x10f)]),adminController[a19_0x152365(0x10a)]),router[a19_0x152365(0x115)]('/users/:id',adminController['deleteUser']),router[a19_0x152365(0x9b)](a19_0x152365(0xb3),adminController['suspendUser']),router[a19_0x152365(0x9b)](a19_0x152365(0xe0),adminController[a19_0x152365(0xf6)]),router[a19_0x152365(0xb2)](a19_0x152365(0xf8),(_0x3b91b2,_0x15b982)=>{const _0x4f08fe=a19_0x152365;try{const _0xbc6471=loggerService_1[_0x4f08fe(0xcd)][_0x4f08fe(0xbc)]();_0x15b982[_0x4f08fe(0xae)]({'success':!![],'result':_0xbc6471});}catch(_0x3fc107){_0x15b982[_0x4f08fe(0xb9)](0x1f4)[_0x4f08fe(0xae)]({'success':![],'message':'Failed\x20to\x20get\x20log\x20statistics'});}}),router[a19_0x152365(0x9b)]('/logs/clean',(_0x1ac28d,_0x29a941)=>{const _0x5668cf=a19_0x152365;try{const {daysToKeep:daysToKeep=0x1e}=_0x1ac28d[_0x5668cf(0xd5)];loggerService_1[_0x5668cf(0xcd)][_0x5668cf(0xfe)](daysToKeep),_0x29a941[_0x5668cf(0xae)]({'success':!![],'message':_0x5668cf(0xfb)+daysToKeep+_0x5668cf(0xa5)});}catch(_0x1e4620){_0x29a941[_0x5668cf(0xb9)](0x1f4)[_0x5668cf(0xae)]({'success':![],'message':_0x5668cf(0x10b)});}}),router[a19_0x152365(0x9b)]('/cointopay/check/:paymentId',async(_0x28a80b,_0x3cdea8)=>{const _0x141ef3=a19_0x152365;try{const {paymentId:_0x2a0f6e}=_0x28a80b[_0x141ef3(0x117)];console['log'](_0x141ef3(0xce)+_0x2a0f6e),await coinToPayStatusService_1['coinToPayStatusService'][_0x141ef3(0x106)](_0x2a0f6e),_0x3cdea8[_0x141ef3(0xae)]({'success':!![],'message':_0x141ef3(0xd8)});}catch(_0x3fa483){console[_0x141ef3(0xa8)](_0x141ef3(0xe1)+_0x28a80b[_0x141ef3(0x117)][_0x141ef3(0xe3)]+':',_0x3fa483),_0x3cdea8[_0x141ef3(0xb9)](0x1f4)['json']({'success':![],'message':_0x3fa483 instanceof Error?_0x3fa483[_0x141ef3(0xb6)]:'Failed\x20to\x20check\x20CoinToPay\x20payment\x20status'});}}),router[a19_0x152365(0xb2)](a19_0x152365(0xc5),(_0x141017,_0x7792d7)=>{const _0x28d139=a19_0x152365;try{const _0x3b746b=coinToPayStatusService_1[_0x28d139(0xd2)]['getServiceStats']();_0x7792d7['json']({'success':!![],'result':{..._0x3b746b,'description':_0x28d139(0xfc),'statusMapping':{'Paid':_0x28d139(0xc7),'Awaiting\x20Fiat':'PENDING','waiting':_0x28d139(0xcc),'expired':'EXPIRED','failed':_0x28d139(0xa7)},'autoExpiryNote':_0x28d139(0x100)+_0x3b746b[_0x28d139(0xb5)]+_0x28d139(0xcf),'individualTimersNote':_0x28d139(0xe4)}});}catch(_0x1ada50){_0x7792d7['status'](0x1f4)[_0x28d139(0xae)]({'success':![],'message':'Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics'});}}),router[a19_0x152365(0xb2)](a19_0x152365(0xd4),async(_0x4f97c9,_0x511675)=>{const _0x584b27=a19_0x152365;try{const {paymentId:_0x26aa86}=_0x4f97c9[_0x584b27(0x117)],_0x4b441e=coinToPayStatusService_1[_0x584b27(0xd2)][_0x584b27(0xde)](_0x26aa86),_0x124d3a=(await Promise[_0x584b27(0xb4)]()[_0x584b27(0x10d)](()=>__importStar(require(_0x584b27(0xd1)))))[_0x584b27(0xda)],_0x38bc85=await _0x124d3a[_0x584b27(0xe9)][_0x584b27(0xb1)]({'where':{'id':_0x26aa86},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x38bc85)return _0x511675[_0x584b27(0xb9)](0x194)['json']({'success':![],'message':_0x584b27(0xe8)});_0x511675[_0x584b27(0xae)]({'success':!![],'result':{'payment':{'id':_0x38bc85['id'],'gateway':_0x38bc85[_0x584b27(0xf7)],'gatewayPaymentId':_0x38bc85[_0x584b27(0xe7)],'status':_0x38bc85['status'],'amount':_0x38bc85[_0x584b27(0xd6)],'currency':_0x38bc85['currency'],'createdAt':_0x38bc85[_0x584b27(0xa6)],'updatedAt':_0x38bc85['updatedAt'],'shop':_0x38bc85[_0x584b27(0xc8)]},'timers':_0x4b441e,'isCoinToPay':_0x38bc85[_0x584b27(0xf7)]===_0x584b27(0x9c),'ageInMinutes':Math['floor']((Date[_0x584b27(0xdf)]()-_0x38bc85[_0x584b27(0xa6)][_0x584b27(0xec)]())/(0x3e8*0x3c))}});}catch(_0x314746){_0x511675['status'](0x1f4)[_0x584b27(0xae)]({'success':![],'message':_0x314746 instanceof Error?_0x314746[_0x584b27(0xb6)]:_0x584b27(0xdd)});}}),router[a19_0x152365(0xb2)](a19_0x152365(0xf9),(_0x4a7944,_0x2167e4)=>{const _0x39f87e=a19_0x152365;try{const _0xd25514=domainMonitoringService_1['domainMonitoringService'][_0x39f87e(0xd3)]();_0x2167e4[_0x39f87e(0xae)]({'success':!![],'result':{..._0xd25514,'description':_0x39f87e(0xed),'behavior':_0x39f87e(0xc0),'encoding':_0x39f87e(0xf4)}});}catch(_0x5f1159){_0x2167e4[_0x39f87e(0xb9)](0x1f4)[_0x39f87e(0xae)]({'success':![],'message':_0x39f87e(0xfd)});}}),router[a19_0x152365(0x9b)](a19_0x152365(0x110),async(_0x5b9593,_0x3ededa)=>{const _0x148057=a19_0x152365;try{const _0x4247b6=await domainMonitoringService_1[_0x148057(0x10e)][_0x148057(0xc3)]();_0x3ededa[_0x148057(0xae)]({'success':!![],'result':{'domainAvailable':_0x4247b6,'message':_0x4247b6?'Domain\x20is\x20responding\x20correctly':_0x148057(0xaa),'timestamp':new Date()['toISOString']()}});}catch(_0x2037d1){_0x3ededa[_0x148057(0xb9)](0x1f4)[_0x148057(0xae)]({'success':![],'message':_0x2037d1 instanceof Error?_0x2037d1[_0x148057(0xb6)]:_0x148057(0xb8)});}}),exports['default']=router;