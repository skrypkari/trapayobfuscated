'use strict';const a24_0x33606f=a24_0x237b;(function(_0x42224a,_0x43390d){const _0x3f9a23=a24_0x237b,_0x58f54a=_0x42224a();while(!![]){try{const _0x3c6a62=parseInt(_0x3f9a23(0x250))/0x1+-parseInt(_0x3f9a23(0x1dc))/0x2*(parseInt(_0x3f9a23(0x1f6))/0x3)+parseInt(_0x3f9a23(0x22e))/0x4+-parseInt(_0x3f9a23(0x239))/0x5*(-parseInt(_0x3f9a23(0x251))/0x6)+-parseInt(_0x3f9a23(0x24e))/0x7*(parseInt(_0x3f9a23(0x1e0))/0x8)+parseInt(_0x3f9a23(0x238))/0x9+parseInt(_0x3f9a23(0x24c))/0xa*(-parseInt(_0x3f9a23(0x221))/0xb);if(_0x3c6a62===_0x43390d)break;else _0x58f54a['push'](_0x58f54a['shift']());}catch(_0x1035b6){_0x58f54a['push'](_0x58f54a['shift']());}}}(a24_0xb7bb,0xde69f));var __createBinding=this&&this[a24_0x33606f(0x237)]||(Object[a24_0x33606f(0x20b)]?function(_0x11158c,_0x30b170,_0x1e1d1c,_0x1d05e7){const _0x593524=a24_0x33606f;if(_0x1d05e7===undefined)_0x1d05e7=_0x1e1d1c;var _0x2e5c11=Object[_0x593524(0x1fb)](_0x30b170,_0x1e1d1c);(!_0x2e5c11||(_0x593524(0x256)in _0x2e5c11?!_0x30b170[_0x593524(0x1db)]:_0x2e5c11[_0x593524(0x20f)]||_0x2e5c11['configurable']))&&(_0x2e5c11={'enumerable':!![],'get':function(){return _0x30b170[_0x1e1d1c];}}),Object[_0x593524(0x208)](_0x11158c,_0x1d05e7,_0x2e5c11);}:function(_0x1a1e67,_0x3a2c0a,_0xaeff9a,_0x355623){if(_0x355623===undefined)_0x355623=_0xaeff9a;_0x1a1e67[_0x355623]=_0x3a2c0a[_0xaeff9a];}),__setModuleDefault=this&&this[a24_0x33606f(0x24b)]||(Object[a24_0x33606f(0x20b)]?function(_0x2239d2,_0x249a95){const _0x19bdd8=a24_0x33606f;Object[_0x19bdd8(0x208)](_0x2239d2,'default',{'enumerable':!![],'value':_0x249a95});}:function(_0x227ae6,_0x3a39ad){const _0x242f5d=a24_0x33606f;_0x227ae6[_0x242f5d(0x1ed)]=_0x3a39ad;}),__importStar=this&&this[a24_0x33606f(0x201)]||(function(){var _0x1ce85d=function(_0x2bac15){const _0x3fb4df=a24_0x237b;return _0x1ce85d=Object[_0x3fb4df(0x245)]||function(_0x24c7f6){const _0x510cf0=_0x3fb4df;var _0x2e9ed1=[];for(var _0x47779a in _0x24c7f6)if(Object[_0x510cf0(0x1ff)]['hasOwnProperty'][_0x510cf0(0x216)](_0x24c7f6,_0x47779a))_0x2e9ed1[_0x2e9ed1[_0x510cf0(0x241)]]=_0x47779a;return _0x2e9ed1;},_0x1ce85d(_0x2bac15);};return function(_0x1fc5b9){const _0x1951c0=a24_0x237b;if(_0x1fc5b9&&_0x1fc5b9[_0x1951c0(0x1db)])return _0x1fc5b9;var _0x50845b={};if(_0x1fc5b9!=null){for(var _0x5650a9=_0x1ce85d(_0x1fc5b9),_0xa1d9fa=0x0;_0xa1d9fa<_0x5650a9[_0x1951c0(0x241)];_0xa1d9fa++)if(_0x5650a9[_0xa1d9fa]!=='default')__createBinding(_0x50845b,_0x1fc5b9,_0x5650a9[_0xa1d9fa]);}return __setModuleDefault(_0x50845b,_0x1fc5b9),_0x50845b;};}());Object[a24_0x33606f(0x208)](exports,a24_0x33606f(0x1db),{'value':!![]});function a24_0xb7bb(){const _0x1eb6f4=['call','../config/database','suspendUser','/payments/cleanup-with-report','/payouts/:id','Old\x20logs\x20cleaned\x20(kept\x20last\x20','/users/:id/suspend','getUserById','PAID','createPayout','PENDING','858PFZqZj','../middleware/auth','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','âŒ\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','getStatistics','post','requireAdmin','put','/auth','/domain-monitoring/stats','params','Payment\x20not\x20found','then','1361464VoXjDO','gateway','getPaymentById','/payments/:id/customer','checkPaymentById','getMerchantsAwaitingPayout','../middleware/validation','expiryDays','getPaymentTimerInfo','__createBinding','13528890cxvwbh','4635DooDTB','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','../services/coinToPayStatusService','coinToPayStatusService','EXPIRED','/payout/stats','now','Router','length','/payments/:id','cleanupStalePaymentsWithReport','manualCheck','getOwnPropertyNames','json','loggerService','getProcessingPaymentsStats','CoinToPay\x20automatic\x20status\x20checking\x20service','log','__setModuleDefault','412640QkcIhy','deleteUser','63VwYuuD','delete','1814137HuCMBZ','9930bbwHUn','cleanOldLogs','/payments/processing-stats','checkAuth','updateCustomerDataSchema','get','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','floor','/statistics','getPayoutById','\x20days\x20if\x20not\x20paid','__esModule','324922NTcLrk','Domain\x20is\x20responding\x20correctly','\x20days)','/merchants/selection','799856adrrCq','findUnique','getTime','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','Failed\x20to\x20get\x20log\x20statistics','message','createUserSchema','/cointopay/check/:paymentId','/logs/stats','createPayoutSchema','FAILED','cleanupStalePayments','currency','default','/cointopay/stats','Domain\x20check\x20failed','deletePayout','/domain-monitoring/check','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','/users','createdAt','/cointopay/payment/:paymentId','3NtkOCE','cleanupStalePendingPayments','/payout','error','Failed\x20to\x20perform\x20manual\x20domain\x20check','getOwnPropertyDescriptor','getMonitoringStats','createUser','shop','prototype','Failed\x20to\x20clean\x20old\x20logs','__importStar','/users/:id','../controllers/adminController','authenticateToken','getMerchantsSelection','validate','updateUserSchema','defineProperty','getPayouts','../services/loggerService','create','updatePayment','AdminController','status','writable','/logs/clean','updatedAt','domainMonitoringService','resolve','gatewayPaymentId','/payments/cleanup-pending'];a24_0xb7bb=function(){return _0x1eb6f4;};return a24_0xb7bb();}const express_1=require('express'),adminController_1=require(a24_0x33606f(0x203)),validation_1=require(a24_0x33606f(0x234)),auth_1=require(a24_0x33606f(0x222)),loggerService_1=require(a24_0x33606f(0x20a)),coinToPayStatusService_1=require(a24_0x33606f(0x23b)),domainMonitoringService_1=require('../services/domainMonitoringService'),router=(0x0,express_1[a24_0x33606f(0x240)])(),adminController=new adminController_1[(a24_0x33606f(0x20d))]();function a24_0x237b(_0x2184e4,_0x4dcb04){_0x2184e4=_0x2184e4-0x1d8;const _0xb7bbdf=a24_0xb7bb();let _0x237bc2=_0xb7bbdf[_0x2184e4];return _0x237bc2;}router['use'](auth_1[a24_0x33606f(0x204)],auth_1[a24_0x33606f(0x227)]),router[a24_0x33606f(0x256)](a24_0x33606f(0x229),adminController[a24_0x33606f(0x254)]),router[a24_0x33606f(0x256)](a24_0x33606f(0x1d8),adminController[a24_0x33606f(0x225)]),router['get']('/merchant-statistics',adminController['getMerchantStatistics']),router[a24_0x33606f(0x256)](a24_0x33606f(0x23e),adminController['getPayoutStats']),router['get']('/payout/merchants',adminController[a24_0x33606f(0x233)]),router['get'](a24_0x33606f(0x1df),adminController[a24_0x33606f(0x205)]),router[a24_0x33606f(0x226)](a24_0x33606f(0x1f8),(0x0,validation_1[a24_0x33606f(0x206)])(validation_1[a24_0x33606f(0x1e9)]),adminController[a24_0x33606f(0x21f)]),router[a24_0x33606f(0x256)]('/payouts',adminController[a24_0x33606f(0x209)]),router['get']('/payouts/:id',adminController[a24_0x33606f(0x1d9)]),router[a24_0x33606f(0x24f)](a24_0x33606f(0x21a),adminController[a24_0x33606f(0x1f0)]),router[a24_0x33606f(0x256)]('/payments',adminController['getPayments']),router[a24_0x33606f(0x256)](a24_0x33606f(0x242),adminController[a24_0x33606f(0x230)]),router[a24_0x33606f(0x228)](a24_0x33606f(0x242),adminController[a24_0x33606f(0x20c)]),router['put'](a24_0x33606f(0x231),(0x0,validation_1['validate'])(validation_1[a24_0x33606f(0x255)]),adminController['updateCustomerData']),router[a24_0x33606f(0x256)](a24_0x33606f(0x253),adminController[a24_0x33606f(0x248)]),router[a24_0x33606f(0x226)]('/payments/cleanup',adminController[a24_0x33606f(0x1eb)]),router[a24_0x33606f(0x226)](a24_0x33606f(0x215),adminController[a24_0x33606f(0x1f7)]),router[a24_0x33606f(0x226)](a24_0x33606f(0x219),adminController[a24_0x33606f(0x243)]),router['get'](a24_0x33606f(0x1f3),adminController['getUsers']),router[a24_0x33606f(0x256)](a24_0x33606f(0x202),adminController[a24_0x33606f(0x21d)]),router[a24_0x33606f(0x226)](a24_0x33606f(0x1f3),(0x0,validation_1[a24_0x33606f(0x206)])(validation_1[a24_0x33606f(0x1e6)]),adminController[a24_0x33606f(0x1fd)]),router['put'](a24_0x33606f(0x202),(0x0,validation_1[a24_0x33606f(0x206)])(validation_1[a24_0x33606f(0x207)]),adminController['updateUser']),router['delete'](a24_0x33606f(0x202),adminController[a24_0x33606f(0x24d)]),router['post'](a24_0x33606f(0x21c),adminController[a24_0x33606f(0x218)]),router[a24_0x33606f(0x226)]('/users/:id/activate',adminController['activateUser']),router[a24_0x33606f(0x256)](a24_0x33606f(0x1e8),(_0x5ea9c2,_0xac21ac)=>{const _0x51ad6a=a24_0x33606f;try{const _0x5598d8=loggerService_1[_0x51ad6a(0x247)]['getLogStats']();_0xac21ac[_0x51ad6a(0x246)]({'success':!![],'result':_0x5598d8});}catch(_0x5bd9db){_0xac21ac['status'](0x1f4)['json']({'success':![],'message':_0x51ad6a(0x1e4)});}}),router[a24_0x33606f(0x226)](a24_0x33606f(0x210),(_0xa5167f,_0x466947)=>{const _0x52090b=a24_0x33606f;try{const {daysToKeep:daysToKeep=0x1e}=_0xa5167f['body'];loggerService_1[_0x52090b(0x247)][_0x52090b(0x252)](daysToKeep),_0x466947['json']({'success':!![],'message':_0x52090b(0x21b)+daysToKeep+_0x52090b(0x1de)});}catch(_0x43127d){_0x466947[_0x52090b(0x20e)](0x1f4)[_0x52090b(0x246)]({'success':![],'message':_0x52090b(0x200)});}}),router[a24_0x33606f(0x226)](a24_0x33606f(0x1e7),async(_0x351ce0,_0x11210d)=>{const _0x592e66=a24_0x33606f;try{const {paymentId:_0x172772}=_0x351ce0['params'];console[_0x592e66(0x24a)]('ðŸ”\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20'+_0x172772),await coinToPayStatusService_1[_0x592e66(0x23c)][_0x592e66(0x232)](_0x172772),_0x11210d[_0x592e66(0x246)]({'success':!![],'message':'CoinToPay\x20payment\x20status\x20checked\x20successfully'});}catch(_0x435078){console[_0x592e66(0x1f9)](_0x592e66(0x224)+_0x351ce0[_0x592e66(0x22b)]['paymentId']+':',_0x435078),_0x11210d[_0x592e66(0x20e)](0x1f4)[_0x592e66(0x246)]({'success':![],'message':_0x435078 instanceof Error?_0x435078['message']:'Failed\x20to\x20check\x20CoinToPay\x20payment\x20status'});}}),router['get'](a24_0x33606f(0x1ee),(_0x5f5397,_0x34540d)=>{const _0x5bc807=a24_0x33606f;try{const _0xdef001=coinToPayStatusService_1['coinToPayStatusService']['getServiceStats']();_0x34540d[_0x5bc807(0x246)]({'success':!![],'result':{..._0xdef001,'description':_0x5bc807(0x249),'statusMapping':{'Paid':_0x5bc807(0x21e),'Awaiting\x20Fiat':_0x5bc807(0x220),'waiting':_0x5bc807(0x220),'expired':_0x5bc807(0x23d),'failed':_0x5bc807(0x1ea)},'autoExpiryNote':'Payments\x20automatically\x20expire\x20after\x20'+_0xdef001[_0x5bc807(0x235)]+_0x5bc807(0x1da),'individualTimersNote':_0x5bc807(0x1e3)}});}catch(_0xb663fb){_0x34540d[_0x5bc807(0x20e)](0x1f4)[_0x5bc807(0x246)]({'success':![],'message':_0x5bc807(0x1f2)});}}),router[a24_0x33606f(0x256)](a24_0x33606f(0x1f5),async(_0x416df8,_0x571d87)=>{const _0x51ea74=a24_0x33606f;try{const {paymentId:_0x4e1d07}=_0x416df8[_0x51ea74(0x22b)],_0x6c51b5=coinToPayStatusService_1[_0x51ea74(0x23c)][_0x51ea74(0x236)](_0x4e1d07),_0x316b60=(await Promise[_0x51ea74(0x213)]()[_0x51ea74(0x22d)](()=>__importStar(require(_0x51ea74(0x217)))))[_0x51ea74(0x1ed)],_0x480b06=await _0x316b60['payment'][_0x51ea74(0x1e1)]({'where':{'id':_0x4e1d07},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x480b06)return _0x571d87[_0x51ea74(0x20e)](0x194)['json']({'success':![],'message':_0x51ea74(0x22c)});_0x571d87['json']({'success':!![],'result':{'payment':{'id':_0x480b06['id'],'gateway':_0x480b06[_0x51ea74(0x22f)],'gatewayPaymentId':_0x480b06[_0x51ea74(0x214)],'status':_0x480b06['status'],'amount':_0x480b06['amount'],'currency':_0x480b06[_0x51ea74(0x1ec)],'createdAt':_0x480b06[_0x51ea74(0x1f4)],'updatedAt':_0x480b06[_0x51ea74(0x211)],'shop':_0x480b06[_0x51ea74(0x1fe)]},'timers':_0x6c51b5,'isCoinToPay':_0x480b06[_0x51ea74(0x22f)]==='cointopay','ageInMinutes':Math[_0x51ea74(0x258)]((Date[_0x51ea74(0x23f)]()-_0x480b06['createdAt'][_0x51ea74(0x1e2)]())/(0x3e8*0x3c))}});}catch(_0x19a7b0){_0x571d87[_0x51ea74(0x20e)](0x1f4)[_0x51ea74(0x246)]({'success':![],'message':_0x19a7b0 instanceof Error?_0x19a7b0[_0x51ea74(0x1e5)]:'Failed\x20to\x20get\x20payment\x20information'});}}),router['get'](a24_0x33606f(0x22a),(_0x279e56,_0x4151a4)=>{const _0x684f57=a24_0x33606f;try{const _0x51d2cb=domainMonitoringService_1[_0x684f57(0x212)][_0x684f57(0x1fc)]();_0x4151a4[_0x684f57(0x246)]({'success':!![],'result':{..._0x51d2cb,'description':'Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','behavior':_0x684f57(0x23a),'encoding':_0x684f57(0x257)}});}catch(_0x14ce08){_0x4151a4['status'](0x1f4)['json']({'success':![],'message':_0x684f57(0x223)});}}),router[a24_0x33606f(0x226)](a24_0x33606f(0x1f1),async(_0x3e6ca4,_0xd8934)=>{const _0x1d1921=a24_0x33606f;try{const _0xc6e5ac=await domainMonitoringService_1[_0x1d1921(0x212)][_0x1d1921(0x244)]();_0xd8934['json']({'success':!![],'result':{'domainAvailable':_0xc6e5ac,'message':_0xc6e5ac?_0x1d1921(0x1dd):_0x1d1921(0x1ef),'timestamp':new Date()['toISOString']()}});}catch(_0x5bda77){_0xd8934['status'](0x1f4)[_0x1d1921(0x246)]({'success':![],'message':_0x5bda77 instanceof Error?_0x5bda77[_0x1d1921(0x1e5)]:_0x1d1921(0x1fa)});}}),exports[a24_0x33606f(0x1ed)]=router;