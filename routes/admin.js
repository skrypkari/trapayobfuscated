'use strict';const a19_0x499a83=a19_0x2022;(function(_0x6c1d7f,_0xe3be9e){const _0x29d4e2=a19_0x2022,_0x2c65f4=_0x6c1d7f();while(!![]){try{const _0xa27fd8=parseInt(_0x29d4e2(0x1ec))/0x1+-parseInt(_0x29d4e2(0x245))/0x2*(parseInt(_0x29d4e2(0x21a))/0x3)+-parseInt(_0x29d4e2(0x1f7))/0x4*(parseInt(_0x29d4e2(0x20f))/0x5)+-parseInt(_0x29d4e2(0x213))/0x6*(-parseInt(_0x29d4e2(0x1d2))/0x7)+parseInt(_0x29d4e2(0x200))/0x8+parseInt(_0x29d4e2(0x1ce))/0x9+parseInt(_0x29d4e2(0x1c8))/0xa*(-parseInt(_0x29d4e2(0x222))/0xb);if(_0xa27fd8===_0xe3be9e)break;else _0x2c65f4['push'](_0x2c65f4['shift']());}catch(_0x393a1c){_0x2c65f4['push'](_0x2c65f4['shift']());}}}(a19_0x71dd,0x6a728));function a19_0x2022(_0x7c9446,_0x338608){const _0x71dd=a19_0x71dd();return a19_0x2022=function(_0x2022f5,_0x4cbadf){_0x2022f5=_0x2022f5-0x1c5;let _0x55ba06=_0x71dd[_0x2022f5];return _0x55ba06;},a19_0x2022(_0x7c9446,_0x338608);}var __createBinding=this&&this[a19_0x499a83(0x210)]||(Object[a19_0x499a83(0x215)]?function(_0x3a0259,_0x31006b,_0x17c670,_0x3e0302){const _0x20eb43=a19_0x499a83;if(_0x3e0302===undefined)_0x3e0302=_0x17c670;var _0x36c7de=Object[_0x20eb43(0x1d8)](_0x31006b,_0x17c670);(!_0x36c7de||(_0x20eb43(0x1ef)in _0x36c7de?!_0x31006b[_0x20eb43(0x1fe)]:_0x36c7de[_0x20eb43(0x20d)]||_0x36c7de[_0x20eb43(0x226)]))&&(_0x36c7de={'enumerable':!![],'get':function(){return _0x31006b[_0x17c670];}}),Object[_0x20eb43(0x203)](_0x3a0259,_0x3e0302,_0x36c7de);}:function(_0x1974a8,_0xfa3067,_0x235af5,_0x21fa08){if(_0x21fa08===undefined)_0x21fa08=_0x235af5;_0x1974a8[_0x21fa08]=_0xfa3067[_0x235af5];}),__setModuleDefault=this&&this[a19_0x499a83(0x1d5)]||(Object[a19_0x499a83(0x215)]?function(_0x18e511,_0x41fc7b){const _0x565b66=a19_0x499a83;Object['defineProperty'](_0x18e511,_0x565b66(0x1d0),{'enumerable':!![],'value':_0x41fc7b});}:function(_0x4cdc12,_0x24a4f1){const _0x4b9953=a19_0x499a83;_0x4cdc12[_0x4b9953(0x1d0)]=_0x24a4f1;}),__importStar=this&&this[a19_0x499a83(0x230)]||(function(){var _0x236e7b=function(_0x14dd5a){const _0x3a0444=a19_0x2022;return _0x236e7b=Object[_0x3a0444(0x225)]||function(_0x25f4c5){const _0x2c386c=_0x3a0444;var _0x261646=[];for(var _0x10d48f in _0x25f4c5)if(Object[_0x2c386c(0x1dc)][_0x2c386c(0x1cb)]['call'](_0x25f4c5,_0x10d48f))_0x261646[_0x261646[_0x2c386c(0x22a)]]=_0x10d48f;return _0x261646;},_0x236e7b(_0x14dd5a);};return function(_0x5306c6){const _0x314e6f=a19_0x2022;if(_0x5306c6&&_0x5306c6['__esModule'])return _0x5306c6;var _0x22ef3d={};if(_0x5306c6!=null){for(var _0x6e5f07=_0x236e7b(_0x5306c6),_0x3783de=0x0;_0x3783de<_0x6e5f07[_0x314e6f(0x22a)];_0x3783de++)if(_0x6e5f07[_0x3783de]!==_0x314e6f(0x1d0))__createBinding(_0x22ef3d,_0x5306c6,_0x6e5f07[_0x3783de]);}return __setModuleDefault(_0x22ef3d,_0x5306c6),_0x22ef3d;};}());Object['defineProperty'](exports,a19_0x499a83(0x1fe),{'value':!![]});const express_1=require(a19_0x499a83(0x21f)),adminController_1=require(a19_0x499a83(0x21d)),validation_1=require(a19_0x499a83(0x232)),auth_1=require('../middleware/auth'),loggerService_1=require('../services/loggerService'),coinToPayStatusService_1=require(a19_0x499a83(0x1df)),domainMonitoringService_1=require('../services/domainMonitoringService'),router=(0x0,express_1['Router'])(),adminController=new adminController_1[(a19_0x499a83(0x1ca))]();router[a19_0x499a83(0x1f5)](auth_1[a19_0x499a83(0x228)],auth_1[a19_0x499a83(0x1e9)]),router[a19_0x499a83(0x1ef)](a19_0x499a83(0x1ea),adminController[a19_0x499a83(0x224)]),router[a19_0x499a83(0x1ef)](a19_0x499a83(0x231),adminController[a19_0x499a83(0x220)]),router[a19_0x499a83(0x1ef)](a19_0x499a83(0x211),adminController[a19_0x499a83(0x23e)]),router[a19_0x499a83(0x1ef)](a19_0x499a83(0x1eb),adminController[a19_0x499a83(0x244)]),router[a19_0x499a83(0x1ef)](a19_0x499a83(0x223),adminController[a19_0x499a83(0x1c6)]),router[a19_0x499a83(0x1ef)](a19_0x499a83(0x23a),adminController['getMerchantsSelection']),router[a19_0x499a83(0x1fc)](a19_0x499a83(0x1d3),(0x0,validation_1[a19_0x499a83(0x1c5)])(validation_1['createPayoutSchema']),adminController[a19_0x499a83(0x1db)]),router[a19_0x499a83(0x1ef)](a19_0x499a83(0x23c),adminController[a19_0x499a83(0x1f3)]),router[a19_0x499a83(0x1ef)]('/payouts/:id',adminController[a19_0x499a83(0x22c)]),router[a19_0x499a83(0x221)](a19_0x499a83(0x218),adminController['deletePayout']),router[a19_0x499a83(0x1ef)](a19_0x499a83(0x236),adminController[a19_0x499a83(0x202)]),router[a19_0x499a83(0x1ef)](a19_0x499a83(0x22f),adminController['getPaymentById']),router[a19_0x499a83(0x1d6)](a19_0x499a83(0x22f),adminController[a19_0x499a83(0x1c7)]),router[a19_0x499a83(0x1d6)](a19_0x499a83(0x238),(0x0,validation_1[a19_0x499a83(0x1c5)])(validation_1[a19_0x499a83(0x216)]),adminController[a19_0x499a83(0x1fb)]),router[a19_0x499a83(0x1ef)]('/users',adminController[a19_0x499a83(0x219)]),router[a19_0x499a83(0x1ef)](a19_0x499a83(0x208),adminController[a19_0x499a83(0x1e0)]),router[a19_0x499a83(0x1fc)](a19_0x499a83(0x227),(0x0,validation_1['validate'])(validation_1[a19_0x499a83(0x1d4)]),adminController['createUser']),router[a19_0x499a83(0x1d6)]('/users/:id',(0x0,validation_1[a19_0x499a83(0x1c5)])(validation_1[a19_0x499a83(0x1cf)]),adminController[a19_0x499a83(0x234)]),router[a19_0x499a83(0x221)](a19_0x499a83(0x208),adminController['deleteUser']),router['post']('/users/:id/suspend',adminController[a19_0x499a83(0x1c9)]),router[a19_0x499a83(0x1fc)](a19_0x499a83(0x1ff),adminController[a19_0x499a83(0x1e7)]),router[a19_0x499a83(0x1ef)](a19_0x499a83(0x1f6),(_0x5d68fd,_0x450126)=>{const _0x6a8b87=a19_0x499a83;try{const _0x120b14=loggerService_1[_0x6a8b87(0x1ee)][_0x6a8b87(0x1e2)]();_0x450126['json']({'success':!![],'result':_0x120b14});}catch(_0x1524ac){_0x450126[_0x6a8b87(0x20a)](0x1f4)[_0x6a8b87(0x1ed)]({'success':![],'message':_0x6a8b87(0x1dd)});}}),router[a19_0x499a83(0x1fc)](a19_0x499a83(0x237),(_0x25582e,_0x389d4a)=>{const _0x373ae6=a19_0x499a83;try{const {daysToKeep:daysToKeep=0x1e}=_0x25582e[_0x373ae6(0x1f9)];loggerService_1[_0x373ae6(0x1ee)]['cleanOldLogs'](daysToKeep),_0x389d4a[_0x373ae6(0x1ed)]({'success':!![],'message':_0x373ae6(0x201)+daysToKeep+_0x373ae6(0x233)});}catch(_0x435e37){_0x389d4a[_0x373ae6(0x20a)](0x1f4)[_0x373ae6(0x1ed)]({'success':![],'message':_0x373ae6(0x1fd)});}}),router['post'](a19_0x499a83(0x1e4),async(_0x8dcee9,_0x1a693f)=>{const _0x20c81d=a19_0x499a83;try{const {paymentId:_0x30b1b9}=_0x8dcee9[_0x20c81d(0x1d1)];console[_0x20c81d(0x217)](_0x20c81d(0x1cc)+_0x30b1b9),await coinToPayStatusService_1[_0x20c81d(0x23f)][_0x20c81d(0x1f8)](_0x30b1b9),_0x1a693f[_0x20c81d(0x1ed)]({'success':!![],'message':_0x20c81d(0x1da)});}catch(_0x35b52b){console[_0x20c81d(0x22b)](_0x20c81d(0x207)+_0x8dcee9[_0x20c81d(0x1d1)][_0x20c81d(0x20e)]+':',_0x35b52b),_0x1a693f['status'](0x1f4)[_0x20c81d(0x1ed)]({'success':![],'message':_0x35b52b instanceof Error?_0x35b52b[_0x20c81d(0x1e1)]:_0x20c81d(0x1e3)});}}),router['get'](a19_0x499a83(0x1de),(_0x1ecc31,_0x17a2d5)=>{const _0x4f84de=a19_0x499a83;try{const _0x4f28f0=coinToPayStatusService_1[_0x4f84de(0x23f)]['getServiceStats']();_0x17a2d5['json']({'success':!![],'result':{..._0x4f28f0,'description':_0x4f84de(0x204),'statusMapping':{'Paid':_0x4f84de(0x1f4),'Awaiting\x20Fiat':_0x4f84de(0x1f1),'waiting':'PENDING','expired':_0x4f84de(0x23b),'failed':_0x4f84de(0x20b)},'autoExpiryNote':'Payments\x20automatically\x20expire\x20after\x20'+_0x4f28f0[_0x4f84de(0x241)]+_0x4f84de(0x1f2),'individualTimersNote':_0x4f84de(0x22e)}});}catch(_0x23f50e){_0x17a2d5[_0x4f84de(0x20a)](0x1f4)[_0x4f84de(0x1ed)]({'success':![],'message':_0x4f84de(0x209)});}}),router[a19_0x499a83(0x1ef)](a19_0x499a83(0x239),async(_0x3dc485,_0x8dafaa)=>{const _0x150034=a19_0x499a83;try{const {paymentId:_0x491316}=_0x3dc485[_0x150034(0x1d1)],_0x2801ec=coinToPayStatusService_1[_0x150034(0x23f)][_0x150034(0x1e5)](_0x491316),_0x331964=(await Promise[_0x150034(0x23d)]()[_0x150034(0x243)](()=>__importStar(require(_0x150034(0x1f0)))))[_0x150034(0x1d0)],_0x7179e1=await _0x331964[_0x150034(0x205)][_0x150034(0x21e)]({'where':{'id':_0x491316},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x7179e1)return _0x8dafaa[_0x150034(0x20a)](0x194)[_0x150034(0x1ed)]({'success':![],'message':'Payment\x20not\x20found'});_0x8dafaa['json']({'success':!![],'result':{'payment':{'id':_0x7179e1['id'],'gateway':_0x7179e1['gateway'],'gatewayPaymentId':_0x7179e1['gatewayPaymentId'],'status':_0x7179e1[_0x150034(0x20a)],'amount':_0x7179e1[_0x150034(0x235)],'currency':_0x7179e1['currency'],'createdAt':_0x7179e1[_0x150034(0x1e6)],'updatedAt':_0x7179e1['updatedAt'],'shop':_0x7179e1['shop']},'timers':_0x2801ec,'isCoinToPay':_0x7179e1[_0x150034(0x206)]===_0x150034(0x1cd),'ageInMinutes':Math[_0x150034(0x20c)]((Date[_0x150034(0x240)]()-_0x7179e1[_0x150034(0x1e6)][_0x150034(0x229)]())/(0x3e8*0x3c))}});}catch(_0x265cdd){_0x8dafaa[_0x150034(0x20a)](0x1f4)['json']({'success':![],'message':_0x265cdd instanceof Error?_0x265cdd['message']:'Failed\x20to\x20get\x20payment\x20information'});}}),router[a19_0x499a83(0x1ef)](a19_0x499a83(0x1fa),(_0xf0d8bc,_0x1d392f)=>{const _0x2c03dd=a19_0x499a83;try{const _0x1046d2=domainMonitoringService_1[_0x2c03dd(0x242)][_0x2c03dd(0x21c)]();_0x1d392f[_0x2c03dd(0x1ed)]({'success':!![],'result':{..._0x1046d2,'description':_0x2c03dd(0x22d),'behavior':'Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','encoding':_0x2c03dd(0x1e8)}});}catch(_0x4f6d07){_0x1d392f[_0x2c03dd(0x20a)](0x1f4)[_0x2c03dd(0x1ed)]({'success':![],'message':'Failed\x20to\x20get\x20domain\x20monitoring\x20statistics'});}}),router[a19_0x499a83(0x1fc)](a19_0x499a83(0x21b),async(_0x2e9315,_0x2ec704)=>{const _0x683fef=a19_0x499a83;try{const _0x294cb2=await domainMonitoringService_1['domainMonitoringService'][_0x683fef(0x214)]();_0x2ec704['json']({'success':!![],'result':{'domainAvailable':_0x294cb2,'message':_0x294cb2?'Domain\x20is\x20responding\x20correctly':_0x683fef(0x1d7),'timestamp':new Date()[_0x683fef(0x1d9)]()}});}catch(_0x3b2748){_0x2ec704[_0x683fef(0x20a)](0x1f4)[_0x683fef(0x1ed)]({'success':![],'message':_0x3b2748 instanceof Error?_0x3b2748['message']:_0x683fef(0x212)});}}),exports[a19_0x499a83(0x1d0)]=router;function a19_0x71dd(){const _0x308d10=['/cointopay/payment/:paymentId','/merchants/selection','EXPIRED','/payouts','resolve','getMerchantStatistics','coinToPayStatusService','now','expiryDays','domainMonitoringService','then','getPayoutStats','1238zqokMb','validate','getMerchantsAwaitingPayout','updatePayment','50NqMovc','suspendUser','AdminController','hasOwnProperty','🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','cointopay','1378233gIeTwL','updateUserSchema','default','params','686zYBXSr','/payout','createUserSchema','__setModuleDefault','put','Domain\x20check\x20failed','getOwnPropertyDescriptor','toISOString','CoinToPay\x20payment\x20status\x20checked\x20successfully','createPayout','prototype','Failed\x20to\x20get\x20log\x20statistics','/cointopay/stats','../services/coinToPayStatusService','getUserById','message','getLogStats','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','/cointopay/check/:paymentId','getPaymentTimerInfo','createdAt','activateUser','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','requireAdmin','/auth','/payout/stats','862525FQeMYX','json','loggerService','get','../config/database','PENDING','\x20days\x20if\x20not\x20paid','getPayouts','PAID','use','/logs/stats','157756BfZalJ','checkPaymentById','body','/domain-monitoring/stats','updateCustomerData','post','Failed\x20to\x20clean\x20old\x20logs','__esModule','/users/:id/activate','5818392VGVBSZ','Old\x20logs\x20cleaned\x20(kept\x20last\x20','getPayments','defineProperty','CoinToPay\x20automatic\x20status\x20checking\x20service','payment','gateway','❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','/users/:id','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','status','FAILED','floor','writable','paymentId','55YJjIlE','__createBinding','/merchant-statistics','Failed\x20to\x20perform\x20manual\x20domain\x20check','46194kXhdUf','manualCheck','create','updateCustomerDataSchema','log','/payouts/:id','getUsers','3957lyFrQa','/domain-monitoring/check','getMonitoringStats','../controllers/adminController','findUnique','express','getStatistics','delete','1784563WDJneg','/payout/merchants','checkAuth','getOwnPropertyNames','configurable','/users','authenticateToken','getTime','length','error','getPayoutById','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','/payments/:id','__importStar','/statistics','../middleware/validation','\x20days)','updateUser','amount','/payments','/logs/clean','/payments/:id/customer'];a19_0x71dd=function(){return _0x308d10;};return a19_0x71dd();}