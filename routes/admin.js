'use strict';const a19_0x305b01=a19_0x5699;(function(_0x2c3585,_0x26b858){const _0x30de95=a19_0x5699,_0x34b167=_0x2c3585();while(!![]){try{const _0x3f056a=parseInt(_0x30de95(0x1ea))/0x1*(parseInt(_0x30de95(0x1d5))/0x2)+parseInt(_0x30de95(0x1a4))/0x3+-parseInt(_0x30de95(0x1b0))/0x4*(parseInt(_0x30de95(0x1c2))/0x5)+parseInt(_0x30de95(0x19f))/0x6*(parseInt(_0x30de95(0x1ab))/0x7)+-parseInt(_0x30de95(0x1a8))/0x8+parseInt(_0x30de95(0x1c9))/0x9+-parseInt(_0x30de95(0x1fb))/0xa;if(_0x3f056a===_0x26b858)break;else _0x34b167['push'](_0x34b167['shift']());}catch(_0x465d13){_0x34b167['push'](_0x34b167['shift']());}}}(a19_0x159a,0x2c3d1));function a19_0x159a(){const _0xb21e30=['Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','\x20days\x20if\x20not\x20paid','/users','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','getOwnPropertyNames','defineProperty','/merchant-statistics','put','/auth','/payouts/:id','gatewayPaymentId','Failed\x20to\x20get\x20payment\x20information','/payments/:id/customer','getPayments','/merchants/selection','prototype','\x20days)','getServiceStats','PENDING','getPayoutById','__setModuleDefault','hasOwnProperty','944250rSJbvQ','Failed\x20to\x20clean\x20old\x20logs','express','createPayout','resolve','78684nQxerV','getOwnPropertyDescriptor','gateway','json','2051840PnRTfU','updateUserSchema','message','14EsgCIQ','manualCheck','validate','Domain\x20check\x20failed','amount','1336844wneSRw','now','params','coinToPayStatusService','CoinToPay\x20automatic\x20status\x20checking\x20service','__createBinding','createUser','/domain-monitoring/stats','../config/database','findUnique','authenticateToken','Old\x20logs\x20cleaned\x20(kept\x20last\x20','domainMonitoringService','checkAuth','getMerchantsAwaitingPayout','/cointopay/stats','../services/domainMonitoringService','payment','5VePeml','getLogStats','getStatistics','Router','updatePayment','createdAt','/logs/clean','2864358NeQgJu','getUsers','../middleware/validation','configurable','call','create','length','../services/loggerService','default','paymentId','loggerService','currency','6JMRKVZ','toISOString','createPayoutSchema','use','Failed\x20to\x20perform\x20manual\x20domain\x20check','log','/payout/merchants','/users/:id/activate','/statistics','get','getUserById','FAILED','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','post','floor','writable','cleanOldLogs','/payout/stats','getPaymentById','__esModule','/cointopay/payment/:paymentId','73716vCmFBd','createUserSchema','getMerchantsSelection','/users/:id','/payments/:id','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','shop','delete','../controllers/adminController','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','suspendUser','expiryDays','getPayouts','EXPIRED','requireAdmin','deletePayout','PAID','1084960Jnhagl','/domain-monitoring/check','status','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','/logs/stats','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','Payment\x20not\x20found','getMonitoringStats','getMerchantStatistics','/payouts','Payments\x20automatically\x20expire\x20after\x20','then','__importStar','CoinToPay\x20payment\x20status\x20checked\x20successfully'];a19_0x159a=function(){return _0xb21e30;};return a19_0x159a();}var __createBinding=this&&this[a19_0x305b01(0x1b5)]||(Object['create']?function(_0x54dd79,_0x39f27f,_0x3530e5,_0x3b9910){const _0x1625f4=a19_0x305b01;if(_0x3b9910===undefined)_0x3b9910=_0x3530e5;var _0x4a3af2=Object[_0x1625f4(0x1a5)](_0x39f27f,_0x3530e5);(!_0x4a3af2||('get'in _0x4a3af2?!_0x39f27f[_0x1625f4(0x1e8)]:_0x4a3af2[_0x1625f4(0x1e4)]||_0x4a3af2[_0x1625f4(0x1cc)]))&&(_0x4a3af2={'enumerable':!![],'get':function(){return _0x39f27f[_0x3530e5];}}),Object[_0x1625f4(0x18e)](_0x54dd79,_0x3b9910,_0x4a3af2);}:function(_0x8cce66,_0x503b94,_0x5445bc,_0x504ad8){if(_0x504ad8===undefined)_0x504ad8=_0x5445bc;_0x8cce66[_0x504ad8]=_0x503b94[_0x5445bc];}),__setModuleDefault=this&&this[a19_0x305b01(0x19d)]||(Object[a19_0x305b01(0x1ce)]?function(_0x24ca66,_0x587895){const _0x3cf3b5=a19_0x305b01;Object[_0x3cf3b5(0x18e)](_0x24ca66,_0x3cf3b5(0x1d1),{'enumerable':!![],'value':_0x587895});}:function(_0x55b945,_0x4e3743){_0x55b945['default']=_0x4e3743;}),__importStar=this&&this[a19_0x305b01(0x187)]||(function(){var _0x185cfb=function(_0x365f64){const _0x790ee7=a19_0x5699;return _0x185cfb=Object[_0x790ee7(0x18d)]||function(_0x461bc2){const _0x3f04e8=_0x790ee7;var _0x592d05=[];for(var _0x45320e in _0x461bc2)if(Object[_0x3f04e8(0x198)][_0x3f04e8(0x19e)][_0x3f04e8(0x1cd)](_0x461bc2,_0x45320e))_0x592d05[_0x592d05[_0x3f04e8(0x1cf)]]=_0x45320e;return _0x592d05;},_0x185cfb(_0x365f64);};return function(_0x5eecb8){const _0x4b8008=a19_0x5699;if(_0x5eecb8&&_0x5eecb8[_0x4b8008(0x1e8)])return _0x5eecb8;var _0x2146f3={};if(_0x5eecb8!=null){for(var _0xfce7bc=_0x185cfb(_0x5eecb8),_0x3570e0=0x0;_0x3570e0<_0xfce7bc[_0x4b8008(0x1cf)];_0x3570e0++)if(_0xfce7bc[_0x3570e0]!==_0x4b8008(0x1d1))__createBinding(_0x2146f3,_0x5eecb8,_0xfce7bc[_0x3570e0]);}return __setModuleDefault(_0x2146f3,_0x5eecb8),_0x2146f3;};}());Object[a19_0x305b01(0x18e)](exports,a19_0x305b01(0x1e8),{'value':!![]});function a19_0x5699(_0x5f266f,_0x4998a6){const _0x159a1d=a19_0x159a();return a19_0x5699=function(_0x569918,_0x14a155){_0x569918=_0x569918-0x180;let _0x518474=_0x159a1d[_0x569918];return _0x518474;},a19_0x5699(_0x5f266f,_0x4998a6);}const express_1=require(a19_0x305b01(0x1a1)),adminController_1=require(a19_0x305b01(0x1f2)),validation_1=require(a19_0x305b01(0x1cb)),auth_1=require('../middleware/auth'),loggerService_1=require(a19_0x305b01(0x1d0)),coinToPayStatusService_1=require('../services/coinToPayStatusService'),domainMonitoringService_1=require(a19_0x305b01(0x1c0)),router=(0x0,express_1[a19_0x305b01(0x1c5)])(),adminController=new adminController_1['AdminController']();router[a19_0x305b01(0x1d8)](auth_1[a19_0x305b01(0x1ba)],auth_1[a19_0x305b01(0x1f8)]),router[a19_0x305b01(0x1de)](a19_0x305b01(0x191),adminController[a19_0x305b01(0x1bd)]),router[a19_0x305b01(0x1de)](a19_0x305b01(0x1dd),adminController[a19_0x305b01(0x1c4)]),router[a19_0x305b01(0x1de)](a19_0x305b01(0x18f),adminController[a19_0x305b01(0x183)]),router[a19_0x305b01(0x1de)](a19_0x305b01(0x1e6),adminController['getPayoutStats']),router[a19_0x305b01(0x1de)](a19_0x305b01(0x1db),adminController[a19_0x305b01(0x1be)]),router[a19_0x305b01(0x1de)](a19_0x305b01(0x197),adminController[a19_0x305b01(0x1ec)]),router['post']('/payout',(0x0,validation_1[a19_0x305b01(0x1ad)])(validation_1[a19_0x305b01(0x1d7)]),adminController[a19_0x305b01(0x1a2)]),router[a19_0x305b01(0x1de)](a19_0x305b01(0x184),adminController[a19_0x305b01(0x1f6)]),router[a19_0x305b01(0x1de)]('/payouts/:id',adminController[a19_0x305b01(0x19c)]),router['delete'](a19_0x305b01(0x192),adminController[a19_0x305b01(0x1f9)]),router[a19_0x305b01(0x1de)]('/payments',adminController[a19_0x305b01(0x196)]),router[a19_0x305b01(0x1de)](a19_0x305b01(0x1ee),adminController[a19_0x305b01(0x1e7)]),router[a19_0x305b01(0x190)](a19_0x305b01(0x1ee),adminController[a19_0x305b01(0x1c6)]),router['put'](a19_0x305b01(0x195),(0x0,validation_1[a19_0x305b01(0x1ad)])(validation_1['updateCustomerDataSchema']),adminController['updateCustomerData']),router[a19_0x305b01(0x1de)](a19_0x305b01(0x18b),adminController[a19_0x305b01(0x1ca)]),router[a19_0x305b01(0x1de)](a19_0x305b01(0x1ed),adminController[a19_0x305b01(0x1df)]),router[a19_0x305b01(0x1e2)](a19_0x305b01(0x18b),(0x0,validation_1['validate'])(validation_1[a19_0x305b01(0x1eb)]),adminController[a19_0x305b01(0x1b6)]),router[a19_0x305b01(0x190)](a19_0x305b01(0x1ed),(0x0,validation_1[a19_0x305b01(0x1ad)])(validation_1[a19_0x305b01(0x1a9)]),adminController['updateUser']),router[a19_0x305b01(0x1f1)](a19_0x305b01(0x1ed),adminController['deleteUser']),router[a19_0x305b01(0x1e2)]('/users/:id/suspend',adminController[a19_0x305b01(0x1f4)]),router[a19_0x305b01(0x1e2)](a19_0x305b01(0x1dc),adminController['activateUser']),router[a19_0x305b01(0x1de)](a19_0x305b01(0x1ff),(_0x56e2f7,_0x1277e1)=>{const _0x3df808=a19_0x305b01;try{const _0x5d2503=loggerService_1['loggerService'][_0x3df808(0x1c3)]();_0x1277e1['json']({'success':!![],'result':_0x5d2503});}catch(_0x3742f7){_0x1277e1[_0x3df808(0x1fd)](0x1f4)[_0x3df808(0x1a7)]({'success':![],'message':'Failed\x20to\x20get\x20log\x20statistics'});}}),router['post'](a19_0x305b01(0x1c8),(_0x287d43,_0xba9edd)=>{const _0x3d1c8e=a19_0x305b01;try{const {daysToKeep:daysToKeep=0x1e}=_0x287d43['body'];loggerService_1[_0x3d1c8e(0x1d3)][_0x3d1c8e(0x1e5)](daysToKeep),_0xba9edd[_0x3d1c8e(0x1a7)]({'success':!![],'message':_0x3d1c8e(0x1bb)+daysToKeep+_0x3d1c8e(0x199)});}catch(_0x487361){_0xba9edd[_0x3d1c8e(0x1fd)](0x1f4)[_0x3d1c8e(0x1a7)]({'success':![],'message':_0x3d1c8e(0x1a0)});}}),router[a19_0x305b01(0x1e2)]('/cointopay/check/:paymentId',async(_0x3ee6f7,_0x175656)=>{const _0x432314=a19_0x305b01;try{const {paymentId:_0x34584e}=_0x3ee6f7[_0x432314(0x1b2)];console[_0x432314(0x1da)]('🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20'+_0x34584e),await coinToPayStatusService_1[_0x432314(0x1b3)]['checkPaymentById'](_0x34584e),_0x175656['json']({'success':!![],'message':_0x432314(0x188)});}catch(_0x526ddd){console['error']('❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20'+_0x3ee6f7['params'][_0x432314(0x1d2)]+':',_0x526ddd),_0x175656[_0x432314(0x1fd)](0x1f4)['json']({'success':![],'message':_0x526ddd instanceof Error?_0x526ddd['message']:_0x432314(0x1e1)});}}),router[a19_0x305b01(0x1de)](a19_0x305b01(0x1bf),(_0x535a2e,_0x3e787b)=>{const _0x57cca9=a19_0x305b01;try{const _0x4920cb=coinToPayStatusService_1['coinToPayStatusService'][_0x57cca9(0x19a)]();_0x3e787b[_0x57cca9(0x1a7)]({'success':!![],'result':{..._0x4920cb,'description':_0x57cca9(0x1b4),'statusMapping':{'Paid':_0x57cca9(0x1fa),'Awaiting\x20Fiat':_0x57cca9(0x19b),'waiting':_0x57cca9(0x19b),'expired':_0x57cca9(0x1f7),'failed':_0x57cca9(0x1e0)},'autoExpiryNote':_0x57cca9(0x185)+_0x4920cb[_0x57cca9(0x1f5)]+_0x57cca9(0x18a),'individualTimersNote':_0x57cca9(0x1fe)}});}catch(_0xe6ab98){_0x3e787b[_0x57cca9(0x1fd)](0x1f4)['json']({'success':![],'message':_0x57cca9(0x180)});}}),router['get'](a19_0x305b01(0x1e9),async(_0x27b33f,_0x40bcc5)=>{const _0x5926f5=a19_0x305b01;try{const {paymentId:_0x3a68c4}=_0x27b33f[_0x5926f5(0x1b2)],_0x509d4e=coinToPayStatusService_1[_0x5926f5(0x1b3)]['getPaymentTimerInfo'](_0x3a68c4),_0xd960ff=(await Promise[_0x5926f5(0x1a3)]()[_0x5926f5(0x186)](()=>__importStar(require(_0x5926f5(0x1b8)))))['default'],_0x152518=await _0xd960ff[_0x5926f5(0x1c1)][_0x5926f5(0x1b9)]({'where':{'id':_0x3a68c4},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x152518)return _0x40bcc5[_0x5926f5(0x1fd)](0x194)[_0x5926f5(0x1a7)]({'success':![],'message':_0x5926f5(0x181)});_0x40bcc5[_0x5926f5(0x1a7)]({'success':!![],'result':{'payment':{'id':_0x152518['id'],'gateway':_0x152518[_0x5926f5(0x1a6)],'gatewayPaymentId':_0x152518[_0x5926f5(0x193)],'status':_0x152518[_0x5926f5(0x1fd)],'amount':_0x152518[_0x5926f5(0x1af)],'currency':_0x152518[_0x5926f5(0x1d4)],'createdAt':_0x152518[_0x5926f5(0x1c7)],'updatedAt':_0x152518['updatedAt'],'shop':_0x152518[_0x5926f5(0x1f0)]},'timers':_0x509d4e,'isCoinToPay':_0x152518['gateway']==='cointopay','ageInMinutes':Math[_0x5926f5(0x1e3)]((Date[_0x5926f5(0x1b1)]()-_0x152518[_0x5926f5(0x1c7)]['getTime']())/(0x3e8*0x3c))}});}catch(_0x533bae){_0x40bcc5[_0x5926f5(0x1fd)](0x1f4)['json']({'success':![],'message':_0x533bae instanceof Error?_0x533bae['message']:_0x5926f5(0x194)});}}),router[a19_0x305b01(0x1de)](a19_0x305b01(0x1b7),(_0x5cf35b,_0xd9dd6e)=>{const _0x5cd8c2=a19_0x305b01;try{const _0x1bf246=domainMonitoringService_1[_0x5cd8c2(0x1bc)][_0x5cd8c2(0x182)]();_0xd9dd6e[_0x5cd8c2(0x1a7)]({'success':!![],'result':{..._0x1bf246,'description':_0x5cd8c2(0x1f3),'behavior':_0x5cd8c2(0x189),'encoding':_0x5cd8c2(0x1ef)}});}catch(_0x51ddd1){_0xd9dd6e[_0x5cd8c2(0x1fd)](0x1f4)[_0x5cd8c2(0x1a7)]({'success':![],'message':_0x5cd8c2(0x18c)});}}),router[a19_0x305b01(0x1e2)](a19_0x305b01(0x1fc),async(_0x36d369,_0x1163cc)=>{const _0x53f82d=a19_0x305b01;try{const _0x2f2b89=await domainMonitoringService_1[_0x53f82d(0x1bc)][_0x53f82d(0x1ac)]();_0x1163cc['json']({'success':!![],'result':{'domainAvailable':_0x2f2b89,'message':_0x2f2b89?'Domain\x20is\x20responding\x20correctly':_0x53f82d(0x1ae),'timestamp':new Date()[_0x53f82d(0x1d6)]()}});}catch(_0x58fe7b){_0x1163cc[_0x53f82d(0x1fd)](0x1f4)[_0x53f82d(0x1a7)]({'success':![],'message':_0x58fe7b instanceof Error?_0x58fe7b[_0x53f82d(0x1aa)]:_0x53f82d(0x1d9)});}}),exports[a19_0x305b01(0x1d1)]=router;