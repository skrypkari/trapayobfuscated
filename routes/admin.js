'use strict';function a19_0x3577(_0x57494c,_0x17611d){const _0x1e1dba=a19_0x1e1d();return a19_0x3577=function(_0x357790,_0x28fe3a){_0x357790=_0x357790-0x1bd;let _0x2d0d4b=_0x1e1dba[_0x357790];return _0x2d0d4b;},a19_0x3577(_0x57494c,_0x17611d);}const a19_0x169d05=a19_0x3577;(function(_0x5b4788,_0x5b0ad0){const _0x51f125=a19_0x3577,_0x478b4f=_0x5b4788();while(!![]){try{const _0x43cfaa=-parseInt(_0x51f125(0x1fa))/0x1*(parseInt(_0x51f125(0x200))/0x2)+-parseInt(_0x51f125(0x1c7))/0x3*(parseInt(_0x51f125(0x1d4))/0x4)+-parseInt(_0x51f125(0x1e6))/0x5*(-parseInt(_0x51f125(0x23c))/0x6)+parseInt(_0x51f125(0x210))/0x7+parseInt(_0x51f125(0x1eb))/0x8*(parseInt(_0x51f125(0x1ff))/0x9)+-parseInt(_0x51f125(0x208))/0xa*(-parseInt(_0x51f125(0x1c0))/0xb)+parseInt(_0x51f125(0x1ea))/0xc*(parseInt(_0x51f125(0x1f7))/0xd);if(_0x43cfaa===_0x5b0ad0)break;else _0x478b4f['push'](_0x478b4f['shift']());}catch(_0x28d3aa){_0x478b4f['push'](_0x478b4f['shift']());}}}(a19_0x1e1d,0x45883));var __createBinding=this&&this[a19_0x169d05(0x1ce)]||(Object[a19_0x169d05(0x218)]?function(_0x3dca43,_0x456d58,_0x53fcb5,_0x5cf0f1){const _0x17822c=a19_0x169d05;if(_0x5cf0f1===undefined)_0x5cf0f1=_0x53fcb5;var _0x3b0f1f=Object[_0x17822c(0x1c1)](_0x456d58,_0x53fcb5);(!_0x3b0f1f||(_0x17822c(0x223)in _0x3b0f1f?!_0x456d58[_0x17822c(0x212)]:_0x3b0f1f[_0x17822c(0x1ef)]||_0x3b0f1f[_0x17822c(0x209)]))&&(_0x3b0f1f={'enumerable':!![],'get':function(){return _0x456d58[_0x53fcb5];}}),Object[_0x17822c(0x230)](_0x3dca43,_0x5cf0f1,_0x3b0f1f);}:function(_0x480815,_0x1b5f0f,_0x192540,_0x1be38d){if(_0x1be38d===undefined)_0x1be38d=_0x192540;_0x480815[_0x1be38d]=_0x1b5f0f[_0x192540];}),__setModuleDefault=this&&this[a19_0x169d05(0x1c3)]||(Object[a19_0x169d05(0x218)]?function(_0xebd5fa,_0x440b42){const _0x4be9e9=a19_0x169d05;Object[_0x4be9e9(0x230)](_0xebd5fa,_0x4be9e9(0x1e0),{'enumerable':!![],'value':_0x440b42});}:function(_0x55f56d,_0x538099){const _0x186655=a19_0x169d05;_0x55f56d[_0x186655(0x1e0)]=_0x538099;}),__importStar=this&&this[a19_0x169d05(0x1e8)]||(function(){var _0x5a68d2=function(_0x4d046d){return _0x5a68d2=Object['getOwnPropertyNames']||function(_0x5554b6){const _0x5389c3=a19_0x3577;var _0x2ff4b9=[];for(var _0x31ad02 in _0x5554b6)if(Object[_0x5389c3(0x1d0)]['hasOwnProperty'][_0x5389c3(0x224)](_0x5554b6,_0x31ad02))_0x2ff4b9[_0x2ff4b9[_0x5389c3(0x1ec)]]=_0x31ad02;return _0x2ff4b9;},_0x5a68d2(_0x4d046d);};return function(_0x5736b1){const _0x5e44b8=a19_0x3577;if(_0x5736b1&&_0x5736b1[_0x5e44b8(0x212)])return _0x5736b1;var _0x454f70={};if(_0x5736b1!=null){for(var _0x102947=_0x5a68d2(_0x5736b1),_0x162443=0x0;_0x162443<_0x102947[_0x5e44b8(0x1ec)];_0x162443++)if(_0x102947[_0x162443]!==_0x5e44b8(0x1e0))__createBinding(_0x454f70,_0x5736b1,_0x102947[_0x162443]);}return __setModuleDefault(_0x454f70,_0x5736b1),_0x454f70;};}());Object['defineProperty'](exports,'__esModule',{'value':!![]});const express_1=require(a19_0x169d05(0x21c)),adminController_1=require(a19_0x169d05(0x1fb)),validation_1=require(a19_0x169d05(0x1e9)),auth_1=require(a19_0x169d05(0x1d5)),loggerService_1=require('../services/loggerService'),coinToPayStatusService_1=require(a19_0x169d05(0x232)),domainMonitoringService_1=require(a19_0x169d05(0x227)),router=(0x0,express_1[a19_0x169d05(0x1d3)])(),adminController=new adminController_1[(a19_0x169d05(0x1fe))]();router['use'](auth_1[a19_0x169d05(0x231)],auth_1[a19_0x169d05(0x1cd)]),router[a19_0x169d05(0x223)](a19_0x169d05(0x213),adminController[a19_0x169d05(0x1f4)]),router[a19_0x169d05(0x223)](a19_0x169d05(0x1c4),adminController['getStatistics']),router[a19_0x169d05(0x223)](a19_0x169d05(0x222),adminController[a19_0x169d05(0x1fd)]),router[a19_0x169d05(0x223)](a19_0x169d05(0x220),adminController[a19_0x169d05(0x23d)]),router[a19_0x169d05(0x223)](a19_0x169d05(0x211),adminController[a19_0x169d05(0x233)]),router[a19_0x169d05(0x223)]('/merchants/selection',adminController[a19_0x169d05(0x1c6)]),router[a19_0x169d05(0x1bd)]('/payout',(0x0,validation_1[a19_0x169d05(0x215)])(validation_1[a19_0x169d05(0x1de)]),adminController['createPayout']),router['get'](a19_0x169d05(0x1f9),adminController[a19_0x169d05(0x234)]),router[a19_0x169d05(0x223)](a19_0x169d05(0x1e2),adminController[a19_0x169d05(0x237)]),router[a19_0x169d05(0x22d)](a19_0x169d05(0x1e2),adminController[a19_0x169d05(0x216)]),router[a19_0x169d05(0x223)](a19_0x169d05(0x1e5),adminController['getPayments']),router[a19_0x169d05(0x223)](a19_0x169d05(0x21b),adminController[a19_0x169d05(0x1f2)]),router[a19_0x169d05(0x23a)]('/payments/:id',adminController[a19_0x169d05(0x226)]),router['put'](a19_0x169d05(0x21a),(0x0,validation_1['validate'])(validation_1[a19_0x169d05(0x229)]),adminController[a19_0x169d05(0x207)]),router[a19_0x169d05(0x223)](a19_0x169d05(0x225),adminController[a19_0x169d05(0x1c9)]),router[a19_0x169d05(0x223)](a19_0x169d05(0x221),adminController[a19_0x169d05(0x1c5)]),router[a19_0x169d05(0x1bd)]('/users',(0x0,validation_1[a19_0x169d05(0x215)])(validation_1[a19_0x169d05(0x239)]),adminController[a19_0x169d05(0x206)]),router[a19_0x169d05(0x23a)](a19_0x169d05(0x221),(0x0,validation_1[a19_0x169d05(0x215)])(validation_1['updateUserSchema']),adminController[a19_0x169d05(0x214)]),router[a19_0x169d05(0x22d)]('/users/:id',adminController[a19_0x169d05(0x1cf)]),router[a19_0x169d05(0x1bd)](a19_0x169d05(0x20e),adminController['suspendUser']),router['post'](a19_0x169d05(0x1e1),adminController['activateUser']),router[a19_0x169d05(0x223)]('/logs/stats',(_0x16bce2,_0x914d01)=>{const _0x2bb100=a19_0x169d05;try{const _0x3d2847=loggerService_1['loggerService']['getLogStats']();_0x914d01['json']({'success':!![],'result':_0x3d2847});}catch(_0x32c9c2){_0x914d01['status'](0x1f4)[_0x2bb100(0x1d7)]({'success':![],'message':'Failed\x20to\x20get\x20log\x20statistics'});}}),router[a19_0x169d05(0x1bd)](a19_0x169d05(0x23b),(_0x2b6351,_0x150cdf)=>{const _0x47fe46=a19_0x169d05;try{const {daysToKeep:daysToKeep=0x1e}=_0x2b6351[_0x47fe46(0x203)];loggerService_1[_0x47fe46(0x1d9)][_0x47fe46(0x219)](daysToKeep),_0x150cdf['json']({'success':!![],'message':_0x47fe46(0x217)+daysToKeep+_0x47fe46(0x1dc)});}catch(_0x1514b7){_0x150cdf[_0x47fe46(0x1e4)](0x1f4)['json']({'success':![],'message':_0x47fe46(0x1f6)});}}),router[a19_0x169d05(0x1bd)](a19_0x169d05(0x205),async(_0x3d4fdb,_0x29bcf9)=>{const _0x77f51e=a19_0x169d05;try{const {paymentId:_0x1711b1}=_0x3d4fdb[_0x77f51e(0x235)];console[_0x77f51e(0x1f3)](_0x77f51e(0x1f5)+_0x1711b1),await coinToPayStatusService_1[_0x77f51e(0x1e3)][_0x77f51e(0x1d1)](_0x1711b1),_0x29bcf9[_0x77f51e(0x1d7)]({'success':!![],'message':'CoinToPay\x20payment\x20status\x20checked\x20successfully'});}catch(_0x5ad855){console[_0x77f51e(0x1be)]('❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20'+_0x3d4fdb['params']['paymentId']+':',_0x5ad855),_0x29bcf9[_0x77f51e(0x1e4)](0x1f4)['json']({'success':![],'message':_0x5ad855 instanceof Error?_0x5ad855[_0x77f51e(0x1c2)]:'Failed\x20to\x20check\x20CoinToPay\x20payment\x20status'});}}),router[a19_0x169d05(0x223)](a19_0x169d05(0x1bf),(_0x277c5c,_0xd683d2)=>{const _0x4f8ea5=a19_0x169d05;try{const _0x2241cf=coinToPayStatusService_1[_0x4f8ea5(0x1e3)][_0x4f8ea5(0x20b)]();_0xd683d2[_0x4f8ea5(0x1d7)]({'success':!![],'result':{..._0x2241cf,'description':_0x4f8ea5(0x238),'statusMapping':{'Paid':_0x4f8ea5(0x1d8),'Awaiting\x20Fiat':_0x4f8ea5(0x228),'waiting':_0x4f8ea5(0x228),'expired':_0x4f8ea5(0x1e7),'failed':_0x4f8ea5(0x20c)},'autoExpiryNote':_0x4f8ea5(0x1f0)+_0x2241cf[_0x4f8ea5(0x1d2)]+_0x4f8ea5(0x21e),'individualTimersNote':_0x4f8ea5(0x1c8)}});}catch(_0x2c5619){_0xd683d2['status'](0x1f4)[_0x4f8ea5(0x1d7)]({'success':![],'message':_0x4f8ea5(0x1ee)});}}),router[a19_0x169d05(0x223)]('/cointopay/payment/:paymentId',async(_0x5d0a61,_0x214702)=>{const _0x2f22ef=a19_0x169d05;try{const {paymentId:_0x196e71}=_0x5d0a61['params'],_0x3080c8=coinToPayStatusService_1[_0x2f22ef(0x1e3)][_0x2f22ef(0x22a)](_0x196e71),_0x3fcd09=(await Promise[_0x2f22ef(0x1cb)]()['then'](()=>__importStar(require(_0x2f22ef(0x1db)))))['default'],_0x23b886=await _0x3fcd09[_0x2f22ef(0x1ca)]['findUnique']({'where':{'id':_0x196e71},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x23b886)return _0x214702[_0x2f22ef(0x1e4)](0x194)['json']({'success':![],'message':'Payment\x20not\x20found'});_0x214702[_0x2f22ef(0x1d7)]({'success':!![],'result':{'payment':{'id':_0x23b886['id'],'gateway':_0x23b886[_0x2f22ef(0x1fc)],'gatewayPaymentId':_0x23b886[_0x2f22ef(0x22f)],'status':_0x23b886[_0x2f22ef(0x1e4)],'amount':_0x23b886[_0x2f22ef(0x236)],'currency':_0x23b886[_0x2f22ef(0x1dd)],'createdAt':_0x23b886['createdAt'],'updatedAt':_0x23b886[_0x2f22ef(0x20a)],'shop':_0x23b886[_0x2f22ef(0x22c)]},'timers':_0x3080c8,'isCoinToPay':_0x23b886['gateway']===_0x2f22ef(0x1f8),'ageInMinutes':Math[_0x2f22ef(0x1da)]((Date[_0x2f22ef(0x201)]()-_0x23b886[_0x2f22ef(0x202)]['getTime']())/(0x3e8*0x3c))}});}catch(_0x32debb){_0x214702[_0x2f22ef(0x1e4)](0x1f4)[_0x2f22ef(0x1d7)]({'success':![],'message':_0x32debb instanceof Error?_0x32debb[_0x2f22ef(0x1c2)]:_0x2f22ef(0x20d)});}}),router['get'](a19_0x169d05(0x20f),(_0x4181a6,_0x455763)=>{const _0x39a194=a19_0x169d05;try{const _0x4e4d90=domainMonitoringService_1[_0x39a194(0x22b)][_0x39a194(0x1cc)]();_0x455763['json']({'success':!![],'result':{..._0x4e4d90,'description':'Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','behavior':_0x39a194(0x1df),'encoding':_0x39a194(0x1ed)}});}catch(_0x595566){_0x455763[_0x39a194(0x1e4)](0x1f4)[_0x39a194(0x1d7)]({'success':![],'message':_0x39a194(0x1d6)});}}),router[a19_0x169d05(0x1bd)](a19_0x169d05(0x22e),async(_0x2c33cf,_0x5384dc)=>{const _0x2f8d16=a19_0x169d05;try{const _0x295a1c=await domainMonitoringService_1[_0x2f8d16(0x22b)][_0x2f8d16(0x204)]();_0x5384dc[_0x2f8d16(0x1d7)]({'success':!![],'result':{'domainAvailable':_0x295a1c,'message':_0x295a1c?_0x2f8d16(0x21f):_0x2f8d16(0x21d),'timestamp':new Date()[_0x2f8d16(0x1f1)]()}});}catch(_0x3cac1c){_0x5384dc['status'](0x1f4)[_0x2f8d16(0x1d7)]({'success':![],'message':_0x3cac1c instanceof Error?_0x3cac1c[_0x2f8d16(0x1c2)]:'Failed\x20to\x20perform\x20manual\x20domain\x20check'});}}),exports['default']=router;function a19_0x1e1d(){const _0x3c0030=['updatePayment','../services/domainMonitoringService','PENDING','updateCustomerDataSchema','getPaymentTimerInfo','domainMonitoringService','shop','delete','/domain-monitoring/check','gatewayPaymentId','defineProperty','authenticateToken','../services/coinToPayStatusService','getMerchantsAwaitingPayout','getPayouts','params','amount','getPayoutById','CoinToPay\x20automatic\x20status\x20checking\x20service','createUserSchema','put','/logs/clean','168cftKuN','getPayoutStats','post','error','/cointopay/stats','182083oNUBtB','getOwnPropertyDescriptor','message','__setModuleDefault','/statistics','getUserById','getMerchantsSelection','496893MGXNtM','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','getUsers','payment','resolve','getMonitoringStats','requireAdmin','__createBinding','deleteUser','prototype','checkPaymentById','expiryDays','Router','8IpTpZn','../middleware/auth','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','json','PAID','loggerService','floor','../config/database','\x20days)','currency','createPayoutSchema','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','default','/users/:id/activate','/payouts/:id','coinToPayStatusService','status','/payments','22945zfKutl','EXPIRED','__importStar','../middleware/validation','12VxUKtT','8eoCSmM','length','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','writable','Payments\x20automatically\x20expire\x20after\x20','toISOString','getPaymentById','log','checkAuth','🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','Failed\x20to\x20clean\x20old\x20logs','3663322uDvAGX','cointopay','/payouts','1wsOeie','../controllers/adminController','gateway','getMerchantStatistics','AdminController','1365669mcBWYq','421398AlzvLw','now','createdAt','body','manualCheck','/cointopay/check/:paymentId','createUser','updateCustomerData','140iQgGzB','configurable','updatedAt','getServiceStats','FAILED','Failed\x20to\x20get\x20payment\x20information','/users/:id/suspend','/domain-monitoring/stats','230965eKFABL','/payout/merchants','__esModule','/auth','updateUser','validate','deletePayout','Old\x20logs\x20cleaned\x20(kept\x20last\x20','create','cleanOldLogs','/payments/:id/customer','/payments/:id','express','Domain\x20check\x20failed','\x20days\x20if\x20not\x20paid','Domain\x20is\x20responding\x20correctly','/payout/stats','/users/:id','/merchant-statistics','get','call','/users'];a19_0x1e1d=function(){return _0x3c0030;};return a19_0x1e1d();}