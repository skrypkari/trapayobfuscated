'use strict';function a19_0x4713(_0x31914e,_0x53ef4c){const _0x36d51c=a19_0x36d5();return a19_0x4713=function(_0x471310,_0x510d11){_0x471310=_0x471310-0xbe;let _0x1f0d0b=_0x36d51c[_0x471310];return _0x1f0d0b;},a19_0x4713(_0x31914e,_0x53ef4c);}function a19_0x36d5(){const _0x3726a0=['domainMonitoringService','createPayoutSchema','loggerService','PAID','/users','Old\x20logs\x20cleaned\x20(kept\x20last\x20','/logs/clean','../services/loggerService','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','gateway','../services/coinToPayStatusService','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','getOwnPropertyDescriptor','/payouts/:id','/domain-monitoring/check','delete','defineProperty','updateUserSchema','floor','amount','validate','cleanOldLogs','default','log','Domain\x20check\x20failed','create','/merchant-statistics','updateCustomerData','getPayoutById','FAILED','then','getUserById','coinToPayStatusService','__esModule','payment','getPayments','Failed\x20to\x20perform\x20manual\x20domain\x20check','deleteUser','message','/users/:id','__setModuleDefault','6277537aUutNp','Payment\x20not\x20found','requireAdmin','getMerchantsAwaitingPayout','/auth','__createBinding','createPayout','params','68830phwSdk','authenticateToken','activateUser','34gWITqQ','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','\x20days\x20if\x20not\x20paid','/logs/stats','checkPaymentById','/payout/stats','AdminController','updatedAt','toISOString','currency','5398920tVqSPY','expiryDays','PENDING','CoinToPay\x20automatic\x20status\x20checking\x20service','/payments/:id/customer','CoinToPay\x20payment\x20status\x20checked\x20successfully','3032504lsKnsE','/cointopay/stats','express','4740042nOWcrn','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','getTime','/payments/:id','/cointopay/check/:paymentId','createUserSchema','cointopay','json','hasOwnProperty','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','Payments\x20automatically\x20expire\x20after\x20','resolve','suspendUser','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','getPayoutStats','writable','manualCheck','../middleware/validation','createdAt','updatePayment','getPaymentById','getPayouts','Failed\x20to\x20get\x20log\x20statistics','Failed\x20to\x20get\x20payment\x20information','/payout/merchants','call','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','/users/:id/suspend','put','body','error','8dzQqjc','length','checkAuth','get','findUnique','/domain-monitoring/stats','post','getUsers','configurable','23575392EHcAEy','/statistics','getOwnPropertyNames','prototype','paymentId','status','__importStar','21486oNXazA','Failed\x20to\x20clean\x20old\x20logs'];a19_0x36d5=function(){return _0x3726a0;};return a19_0x36d5();}const a19_0xad0c18=a19_0x4713;(function(_0x40a108,_0x381f55){const _0x3e6bd9=a19_0x4713,_0x54d1cc=_0x40a108();while(!![]){try{const _0x59c3cd=parseInt(_0x3e6bd9(0x103))/0x1+-parseInt(_0x3e6bd9(0x106))/0x2*(parseInt(_0x3e6bd9(0xd0))/0x3)+parseInt(_0x3e6bd9(0x116))/0x4+-parseInt(_0x3e6bd9(0x110))/0x5+-parseInt(_0x3e6bd9(0x119))/0x6+parseInt(_0x3e6bd9(0xfb))/0x7*(-parseInt(_0x3e6bd9(0xc0))/0x8)+parseInt(_0x3e6bd9(0xc9))/0x9;if(_0x59c3cd===_0x381f55)break;else _0x54d1cc['push'](_0x54d1cc['shift']());}catch(_0x27b571){_0x54d1cc['push'](_0x54d1cc['shift']());}}}(a19_0x36d5,0x8841c));var __createBinding=this&&this[a19_0xad0c18(0x100)]||(Object[a19_0xad0c18(0xeb)]?function(_0x5b8819,_0x3d4da5,_0x24ac79,_0x22091c){const _0x417330=a19_0xad0c18;if(_0x22091c===undefined)_0x22091c=_0x24ac79;var _0x75e819=Object[_0x417330(0xde)](_0x3d4da5,_0x24ac79);(!_0x75e819||('get'in _0x75e819?!_0x3d4da5[_0x417330(0xf3)]:_0x75e819[_0x417330(0x128)]||_0x75e819[_0x417330(0xc8)]))&&(_0x75e819={'enumerable':!![],'get':function(){return _0x3d4da5[_0x24ac79];}}),Object[_0x417330(0xe2)](_0x5b8819,_0x22091c,_0x75e819);}:function(_0x56c44e,_0x5159ba,_0x1105f7,_0x9adcff){if(_0x9adcff===undefined)_0x9adcff=_0x1105f7;_0x56c44e[_0x9adcff]=_0x5159ba[_0x1105f7];}),__setModuleDefault=this&&this[a19_0xad0c18(0xfa)]||(Object['create']?function(_0x2dd334,_0x3861e6){const _0x2915d6=a19_0xad0c18;Object[_0x2915d6(0xe2)](_0x2dd334,_0x2915d6(0xe8),{'enumerable':!![],'value':_0x3861e6});}:function(_0x47e205,_0x19ddb9){const _0x7cba60=a19_0xad0c18;_0x47e205[_0x7cba60(0xe8)]=_0x19ddb9;}),__importStar=this&&this[a19_0xad0c18(0xcf)]||(function(){var _0x5a32c2=function(_0x45656a){const _0x1e185e=a19_0x4713;return _0x5a32c2=Object[_0x1e185e(0xcb)]||function(_0x331524){const _0x49a5af=_0x1e185e;var _0x214eb5=[];for(var _0x65aef0 in _0x331524)if(Object[_0x49a5af(0xcc)][_0x49a5af(0x121)][_0x49a5af(0x132)](_0x331524,_0x65aef0))_0x214eb5[_0x214eb5[_0x49a5af(0xc1)]]=_0x65aef0;return _0x214eb5;},_0x5a32c2(_0x45656a);};return function(_0x1d43c4){const _0x3fce17=a19_0x4713;if(_0x1d43c4&&_0x1d43c4[_0x3fce17(0xf3)])return _0x1d43c4;var _0x4ac7e3={};if(_0x1d43c4!=null){for(var _0x182a83=_0x5a32c2(_0x1d43c4),_0x208887=0x0;_0x208887<_0x182a83[_0x3fce17(0xc1)];_0x208887++)if(_0x182a83[_0x208887]!==_0x3fce17(0xe8))__createBinding(_0x4ac7e3,_0x1d43c4,_0x182a83[_0x208887]);}return __setModuleDefault(_0x4ac7e3,_0x1d43c4),_0x4ac7e3;};}());Object['defineProperty'](exports,a19_0xad0c18(0xf3),{'value':!![]});const express_1=require(a19_0xad0c18(0x118)),adminController_1=require('../controllers/adminController'),validation_1=require(a19_0xad0c18(0x12a)),auth_1=require('../middleware/auth'),loggerService_1=require(a19_0xad0c18(0xd9)),coinToPayStatusService_1=require(a19_0xad0c18(0xdc)),domainMonitoringService_1=require('../services/domainMonitoringService'),router=(0x0,express_1['Router'])(),adminController=new adminController_1[(a19_0xad0c18(0x10c))]();router['use'](auth_1[a19_0xad0c18(0x104)],auth_1[a19_0xad0c18(0xfd)]),router['get'](a19_0xad0c18(0xff),adminController[a19_0xad0c18(0xc2)]),router[a19_0xad0c18(0xc3)](a19_0xad0c18(0xca),adminController['getStatistics']),router[a19_0xad0c18(0xc3)](a19_0xad0c18(0xec),adminController['getMerchantStatistics']),router[a19_0xad0c18(0xc3)](a19_0xad0c18(0x10b),adminController[a19_0xad0c18(0x127)]),router['get'](a19_0xad0c18(0x131),adminController[a19_0xad0c18(0xfe)]),router[a19_0xad0c18(0xc6)]('/payout',(0x0,validation_1[a19_0xad0c18(0xe6)])(validation_1[a19_0xad0c18(0xd3)]),adminController[a19_0xad0c18(0x101)]),router[a19_0xad0c18(0xc3)]('/payouts',adminController[a19_0xad0c18(0x12e)]),router[a19_0xad0c18(0xc3)](a19_0xad0c18(0xdf),adminController[a19_0xad0c18(0xee)]),router[a19_0xad0c18(0xe1)](a19_0xad0c18(0xdf),adminController['deletePayout']),router[a19_0xad0c18(0xc3)]('/payments',adminController[a19_0xad0c18(0xf5)]),router['get'](a19_0xad0c18(0x11c),adminController[a19_0xad0c18(0x12d)]),router[a19_0xad0c18(0x135)](a19_0xad0c18(0x11c),adminController[a19_0xad0c18(0x12c)]),router['put'](a19_0xad0c18(0x114),(0x0,validation_1[a19_0xad0c18(0xe6)])(validation_1['updateCustomerDataSchema']),adminController[a19_0xad0c18(0xed)]),router[a19_0xad0c18(0xc3)](a19_0xad0c18(0xd6),adminController[a19_0xad0c18(0xc7)]),router['get'](a19_0xad0c18(0xf9),adminController[a19_0xad0c18(0xf1)]),router[a19_0xad0c18(0xc6)](a19_0xad0c18(0xd6),(0x0,validation_1[a19_0xad0c18(0xe6)])(validation_1[a19_0xad0c18(0x11e)]),adminController['createUser']),router[a19_0xad0c18(0x135)](a19_0xad0c18(0xf9),(0x0,validation_1[a19_0xad0c18(0xe6)])(validation_1[a19_0xad0c18(0xe3)]),adminController['updateUser']),router[a19_0xad0c18(0xe1)](a19_0xad0c18(0xf9),adminController[a19_0xad0c18(0xf7)]),router[a19_0xad0c18(0xc6)](a19_0xad0c18(0x134),adminController[a19_0xad0c18(0x125)]),router[a19_0xad0c18(0xc6)]('/users/:id/activate',adminController[a19_0xad0c18(0x105)]),router[a19_0xad0c18(0xc3)](a19_0xad0c18(0x109),(_0x30c12d,_0x3b6ef1)=>{const _0x29180e=a19_0xad0c18;try{const _0x2450bf=loggerService_1[_0x29180e(0xd4)]['getLogStats']();_0x3b6ef1[_0x29180e(0x120)]({'success':!![],'result':_0x2450bf});}catch(_0x2982e4){_0x3b6ef1[_0x29180e(0xce)](0x1f4)[_0x29180e(0x120)]({'success':![],'message':_0x29180e(0x12f)});}}),router['post'](a19_0xad0c18(0xd8),(_0x174578,_0xda75c)=>{const _0x3acebd=a19_0xad0c18;try{const {daysToKeep:daysToKeep=0x1e}=_0x174578[_0x3acebd(0xbe)];loggerService_1[_0x3acebd(0xd4)][_0x3acebd(0xe7)](daysToKeep),_0xda75c[_0x3acebd(0x120)]({'success':!![],'message':_0x3acebd(0xd7)+daysToKeep+'\x20days)'});}catch(_0x4573e9){_0xda75c[_0x3acebd(0xce)](0x1f4)[_0x3acebd(0x120)]({'success':![],'message':_0x3acebd(0xd1)});}}),router['post'](a19_0xad0c18(0x11d),async(_0x3736d6,_0x40c82b)=>{const _0x1457ce=a19_0xad0c18;try{const {paymentId:_0x5d31ad}=_0x3736d6[_0x1457ce(0x102)];console[_0x1457ce(0xe9)](_0x1457ce(0x107)+_0x5d31ad),await coinToPayStatusService_1['coinToPayStatusService'][_0x1457ce(0x10a)](_0x5d31ad),_0x40c82b[_0x1457ce(0x120)]({'success':!![],'message':_0x1457ce(0x115)});}catch(_0x22cabc){console[_0x1457ce(0xbf)](_0x1457ce(0x122)+_0x3736d6[_0x1457ce(0x102)][_0x1457ce(0xcd)]+':',_0x22cabc),_0x40c82b[_0x1457ce(0xce)](0x1f4)[_0x1457ce(0x120)]({'success':![],'message':_0x22cabc instanceof Error?_0x22cabc[_0x1457ce(0xf8)]:_0x1457ce(0xda)});}}),router['get'](a19_0xad0c18(0x117),(_0x2810ea,_0x5114fd)=>{const _0x553ddb=a19_0xad0c18;try{const _0x2e6d61=coinToPayStatusService_1['coinToPayStatusService']['getServiceStats']();_0x5114fd[_0x553ddb(0x120)]({'success':!![],'result':{..._0x2e6d61,'description':_0x553ddb(0x113),'statusMapping':{'Paid':_0x553ddb(0xd5),'Awaiting\x20Fiat':_0x553ddb(0x112),'waiting':_0x553ddb(0x112),'expired':'EXPIRED','failed':_0x553ddb(0xef)},'autoExpiryNote':_0x553ddb(0x123)+_0x2e6d61[_0x553ddb(0x111)]+_0x553ddb(0x108),'individualTimersNote':'Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly'}});}catch(_0x1ba59d){_0x5114fd[_0x553ddb(0xce)](0x1f4)['json']({'success':![],'message':_0x553ddb(0x133)});}}),router[a19_0xad0c18(0xc3)]('/cointopay/payment/:paymentId',async(_0x21846f,_0x4cecb4)=>{const _0x56ff29=a19_0xad0c18;try{const {paymentId:_0x3d1002}=_0x21846f[_0x56ff29(0x102)],_0x34b158=coinToPayStatusService_1[_0x56ff29(0xf2)]['getPaymentTimerInfo'](_0x3d1002),_0x3524c9=(await Promise[_0x56ff29(0x124)]()[_0x56ff29(0xf0)](()=>__importStar(require('../config/database'))))['default'],_0x3d0e71=await _0x3524c9[_0x56ff29(0xf4)][_0x56ff29(0xc4)]({'where':{'id':_0x3d1002},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x3d0e71)return _0x4cecb4[_0x56ff29(0xce)](0x194)['json']({'success':![],'message':_0x56ff29(0xfc)});_0x4cecb4['json']({'success':!![],'result':{'payment':{'id':_0x3d0e71['id'],'gateway':_0x3d0e71[_0x56ff29(0xdb)],'gatewayPaymentId':_0x3d0e71['gatewayPaymentId'],'status':_0x3d0e71[_0x56ff29(0xce)],'amount':_0x3d0e71[_0x56ff29(0xe5)],'currency':_0x3d0e71[_0x56ff29(0x10f)],'createdAt':_0x3d0e71[_0x56ff29(0x12b)],'updatedAt':_0x3d0e71[_0x56ff29(0x10d)],'shop':_0x3d0e71['shop']},'timers':_0x34b158,'isCoinToPay':_0x3d0e71['gateway']===_0x56ff29(0x11f),'ageInMinutes':Math[_0x56ff29(0xe4)]((Date['now']()-_0x3d0e71[_0x56ff29(0x12b)][_0x56ff29(0x11b)]())/(0x3e8*0x3c))}});}catch(_0x1a91f8){_0x4cecb4[_0x56ff29(0xce)](0x1f4)['json']({'success':![],'message':_0x1a91f8 instanceof Error?_0x1a91f8['message']:_0x56ff29(0x130)});}}),router[a19_0xad0c18(0xc3)](a19_0xad0c18(0xc5),(_0x290e82,_0x5c8300)=>{const _0x337a20=a19_0xad0c18;try{const _0x29559a=domainMonitoringService_1[_0x337a20(0xd2)]['getMonitoringStats']();_0x5c8300[_0x337a20(0x120)]({'success':!![],'result':{..._0x29559a,'description':'Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','behavior':_0x337a20(0x126),'encoding':_0x337a20(0xdd)}});}catch(_0x511dc9){_0x5c8300[_0x337a20(0xce)](0x1f4)['json']({'success':![],'message':_0x337a20(0x11a)});}}),router[a19_0xad0c18(0xc6)](a19_0xad0c18(0xe0),async(_0xc291f4,_0x45f6ba)=>{const _0x5ccc4a=a19_0xad0c18;try{const _0x4247ca=await domainMonitoringService_1[_0x5ccc4a(0xd2)][_0x5ccc4a(0x129)]();_0x45f6ba[_0x5ccc4a(0x120)]({'success':!![],'result':{'domainAvailable':_0x4247ca,'message':_0x4247ca?'Domain\x20is\x20responding\x20correctly':_0x5ccc4a(0xea),'timestamp':new Date()[_0x5ccc4a(0x10e)]()}});}catch(_0x29959a){_0x45f6ba['status'](0x1f4)[_0x5ccc4a(0x120)]({'success':![],'message':_0x29959a instanceof Error?_0x29959a[_0x5ccc4a(0xf8)]:_0x5ccc4a(0xf6)});}}),exports[a19_0xad0c18(0xe8)]=router;