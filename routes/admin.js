'use strict';const a26_0x1e47e7=a26_0x71b2;function a26_0x71b2(_0x495ba1,_0x481d1d){_0x495ba1=_0x495ba1-0x1b3;const _0x34c969=a26_0x34c9();let _0x71b289=_0x34c969[_0x495ba1];return _0x71b289;}function a26_0x34c9(){const _0x2a4d63=['/cointopay/stats','prototype','updateCustomerData','../services/coinToPayStatusService','1376810WkZlNf','/cointopay/check/:paymentId','CoinToPay\x20payment\x20status\x20checked\x20successfully','../controllers/adminController','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','cleanupStalePendingPayments','16zlQYuj','PENDING','findUnique','__createBinding','getMerchantsSelection','updatePayment','/payments/cleanup-pending','activateUser','/cointopay/payment/:paymentId','9354nOZGCu','use','FAILED','floor','getServiceStats','/logs/stats','get','json','error','/payments/processing-stats','express','getPaymentById','createUser','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','CoinToPay\x20automatic\x20status\x20checking\x20service','/payments/cleanup-with-report','\x20days\x20if\x20not\x20paid','120682bkZLwg','Old\x20logs\x20cleaned\x20(kept\x20last\x20','updateCustomerDataSchema','/payouts/:id','checkPaymentById','status','/users/:id','/shops/:shopId/2fa/setup','disableAdmin2FA','expiryDays','deletePayout','coinToPayStatusService','params','getPayoutReports','/users/:id/activate','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','383845QTxVNc','createdAt','/2fa/settings','../middleware/validation','Failed\x20to\x20get\x20payment\x20information','post','1311040tgleSF','/payments','log','updateUserSchema','requireAdmin','cleanupStalePayments','../services/loggerService','suspendUser','configurable','cleanOldLogs','getPaymentTimerInfo','Failed\x20to\x20get\x20log\x20statistics','/payment-links/expire','1905546GGZgRw','__importStar','1162ZOZJkz','defineProperty','/logs/clean','enable2FA','PAID','/statistics','2818944pWnzDm','enableAdmin2FA','resolve','/payout/:id','get2FASettings','/shops/:shopId/2fa/disable','create','\x20days)','/merchants/selection','4ODtiqW','default','getPayouts','authenticateToken','writable','then','changePasswordSchema','/payout','12ufnZIn','/2fa/enable','Router','getMonitoringStats','getTime','gatewayPaymentId','/payments/:id/customer','/merchant-statistics','/payouts','/payout/stats','Payment\x20not\x20found','length','/payout/merchants','getMerchantsAwaitingPayout','Domain\x20is\x20responding\x20correctly','/2fa/disable','__esModule','loggerService','domainMonitoringService','Failed\x20to\x20perform\x20manual\x20domain\x20check','getLogStats','/users','../middleware/auth','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','cleanupStalePaymentsWithReport','depositBalance','getMerchantStatistics','4fsxEGN','delete','Payments\x20automatically\x20expire\x20after\x20','/shops/:shopId/wallets','/auth','now','amount','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','gateway','message','updatedAt','validate','../services/domainMonitoringService','updateUser','put','getUserById','checkAuth','createPayout','payment','expirePaymentLinks','getStatistics','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','paymentId','createUserSchema','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','/payments/:id','getOwnPropertyDescriptor','setup2FA','disable2FA'];a26_0x34c9=function(){return _0x2a4d63;};return a26_0x34c9();}(function(_0x50d951,_0x5683ed){const _0x4e7fc0=a26_0x71b2,_0x5cb033=_0x50d951();while(!![]){try{const _0x5425af=-parseInt(_0x4e7fc0(0x244))/0x1*(parseInt(_0x4e7fc0(0x203))/0x2)+-parseInt(_0x4e7fc0(0x1cf))/0x3*(-parseInt(_0x4e7fc0(0x1e0))/0x4)+-parseInt(_0x4e7fc0(0x224))/0x5+parseInt(_0x4e7fc0(0x233))/0x6*(-parseInt(_0x4e7fc0(0x1d1))/0x7)+-parseInt(_0x4e7fc0(0x22a))/0x8*(-parseInt(_0x4e7fc0(0x1d7))/0x9)+-parseInt(_0x4e7fc0(0x1c2))/0xa+-parseInt(_0x4e7fc0(0x1bc))/0xb*(-parseInt(_0x4e7fc0(0x1e8))/0xc);if(_0x5425af===_0x5683ed)break;else _0x5cb033['push'](_0x5cb033['shift']());}catch(_0x4f577a){_0x5cb033['push'](_0x5cb033['shift']());}}}(a26_0x34c9,0x5f2fd));var __createBinding=this&&this[a26_0x1e47e7(0x22d)]||(Object[a26_0x1e47e7(0x1dd)]?function(_0x3d92d4,_0x210728,_0x3f5b91,_0x295dfd){const _0x445006=a26_0x1e47e7;if(_0x295dfd===undefined)_0x295dfd=_0x3f5b91;var _0x2e61dc=Object[_0x445006(0x21d)](_0x210728,_0x3f5b91);(!_0x2e61dc||(_0x445006(0x239)in _0x2e61dc?!_0x210728[_0x445006(0x1f8)]:_0x2e61dc[_0x445006(0x1e4)]||_0x2e61dc[_0x445006(0x1ca)]))&&(_0x2e61dc={'enumerable':!![],'get':function(){return _0x210728[_0x3f5b91];}}),Object[_0x445006(0x1d2)](_0x3d92d4,_0x295dfd,_0x2e61dc);}:function(_0xab5867,_0x599099,_0x4fa14f,_0x1aa639){if(_0x1aa639===undefined)_0x1aa639=_0x4fa14f;_0xab5867[_0x1aa639]=_0x599099[_0x4fa14f];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object['create']?function(_0x688659,_0x22a4ec){const _0xc74e77=a26_0x1e47e7;Object[_0xc74e77(0x1d2)](_0x688659,_0xc74e77(0x1e1),{'enumerable':!![],'value':_0x22a4ec});}:function(_0x9bbb3f,_0x387638){const _0x27cb46=a26_0x1e47e7;_0x9bbb3f[_0x27cb46(0x1e1)]=_0x387638;}),__importStar=this&&this[a26_0x1e47e7(0x1d0)]||(function(){var _0x185b46=function(_0x5459dd){return _0x185b46=Object['getOwnPropertyNames']||function(_0x284346){const _0x5ce087=a26_0x71b2;var _0x33d2de=[];for(var _0x4d613a in _0x284346)if(Object[_0x5ce087(0x221)]['hasOwnProperty']['call'](_0x284346,_0x4d613a))_0x33d2de[_0x33d2de['length']]=_0x4d613a;return _0x33d2de;},_0x185b46(_0x5459dd);};return function(_0x38079a){const _0x3cf9ea=a26_0x71b2;if(_0x38079a&&_0x38079a[_0x3cf9ea(0x1f8)])return _0x38079a;var _0x243c39={};if(_0x38079a!=null){for(var _0x4f2616=_0x185b46(_0x38079a),_0x1b2788=0x0;_0x1b2788<_0x4f2616[_0x3cf9ea(0x1f3)];_0x1b2788++)if(_0x4f2616[_0x1b2788]!=='default')__createBinding(_0x243c39,_0x38079a,_0x4f2616[_0x1b2788]);}return __setModuleDefault(_0x243c39,_0x38079a),_0x243c39;};}());Object[a26_0x1e47e7(0x1d2)](exports,a26_0x1e47e7(0x1f8),{'value':!![]});const express_1=require(a26_0x1e47e7(0x23d)),adminController_1=require(a26_0x1e47e7(0x227)),validation_1=require(a26_0x1e47e7(0x1bf)),auth_1=require(a26_0x1e47e7(0x1fe)),loggerService_1=require(a26_0x1e47e7(0x1c8)),coinToPayStatusService_1=require(a26_0x1e47e7(0x223)),domainMonitoringService_1=require(a26_0x1e47e7(0x20f)),router=(0x0,express_1[a26_0x1e47e7(0x1ea)])(),adminController=new adminController_1['AdminController']();router[a26_0x1e47e7(0x234)](auth_1[a26_0x1e47e7(0x1e3)],auth_1[a26_0x1e47e7(0x1c6)]),router[a26_0x1e47e7(0x239)](a26_0x1e47e7(0x207),adminController[a26_0x1e47e7(0x213)]),router[a26_0x1e47e7(0x239)](a26_0x1e47e7(0x1d6),adminController[a26_0x1e47e7(0x217)]),router['get'](a26_0x1e47e7(0x1ef),adminController[a26_0x1e47e7(0x202)]),router['get'](a26_0x1e47e7(0x1f1),adminController['getPayoutStats']),router[a26_0x1e47e7(0x239)](a26_0x1e47e7(0x1f4),adminController[a26_0x1e47e7(0x1f5)]),router[a26_0x1e47e7(0x239)]('/payouts/reports',adminController[a26_0x1e47e7(0x1b9)]),router[a26_0x1e47e7(0x239)](a26_0x1e47e7(0x1df),adminController[a26_0x1e47e7(0x22e)]),router['post'](a26_0x1e47e7(0x1e7),(0x0,validation_1[a26_0x1e47e7(0x20e)])(validation_1['createPayoutSchema']),adminController[a26_0x1e47e7(0x214)]),router[a26_0x1e47e7(0x211)](a26_0x1e47e7(0x1da),(0x0,validation_1[a26_0x1e47e7(0x20e)])(validation_1['updatePayoutSchema']),adminController['updatePayout']),router[a26_0x1e47e7(0x239)](a26_0x1e47e7(0x1f0),adminController[a26_0x1e47e7(0x1e2)]),router['get'](a26_0x1e47e7(0x247),adminController['getPayoutById']),router[a26_0x1e47e7(0x204)]('/payouts/:id',adminController[a26_0x1e47e7(0x1b6)]),router[a26_0x1e47e7(0x239)](a26_0x1e47e7(0x1c3),adminController['getPayments']),router['get'](a26_0x1e47e7(0x21c),adminController[a26_0x1e47e7(0x23e)]),router[a26_0x1e47e7(0x211)](a26_0x1e47e7(0x21c),adminController[a26_0x1e47e7(0x22f)]),router[a26_0x1e47e7(0x211)](a26_0x1e47e7(0x1ee),(0x0,validation_1[a26_0x1e47e7(0x20e)])(validation_1[a26_0x1e47e7(0x246)]),adminController[a26_0x1e47e7(0x222)]),router[a26_0x1e47e7(0x239)](a26_0x1e47e7(0x23c),adminController['getProcessingPaymentsStats']),router[a26_0x1e47e7(0x1c1)]('/payments/cleanup',adminController[a26_0x1e47e7(0x1c7)]),router[a26_0x1e47e7(0x1c1)](a26_0x1e47e7(0x230),adminController[a26_0x1e47e7(0x229)]),router['post'](a26_0x1e47e7(0x242),adminController[a26_0x1e47e7(0x200)]),router['post'](a26_0x1e47e7(0x1ce),adminController[a26_0x1e47e7(0x216)]),router[a26_0x1e47e7(0x239)]('/users',adminController['getUsers']),router['get']('/users/:id',adminController[a26_0x1e47e7(0x212)]),router[a26_0x1e47e7(0x1c1)](a26_0x1e47e7(0x1fd),(0x0,validation_1[a26_0x1e47e7(0x20e)])(validation_1[a26_0x1e47e7(0x21a)]),adminController[a26_0x1e47e7(0x23f)]),router[a26_0x1e47e7(0x211)]('/users/:id',(0x0,validation_1['validate'])(validation_1[a26_0x1e47e7(0x1c5)]),adminController[a26_0x1e47e7(0x210)]),router[a26_0x1e47e7(0x204)](a26_0x1e47e7(0x24a),adminController['deleteUser']),router[a26_0x1e47e7(0x239)](a26_0x1e47e7(0x206),adminController['getShopWallets']),router[a26_0x1e47e7(0x1c1)](a26_0x1e47e7(0x1b3),adminController[a26_0x1e47e7(0x21e)]),router[a26_0x1e47e7(0x1c1)]('/shops/:shopId/2fa/enable',adminController[a26_0x1e47e7(0x1d4)]),router[a26_0x1e47e7(0x1c1)](a26_0x1e47e7(0x1dc),adminController[a26_0x1e47e7(0x21f)]),router[a26_0x1e47e7(0x1c1)]('/password',(0x0,validation_1[a26_0x1e47e7(0x20e)])(validation_1[a26_0x1e47e7(0x1e6)]),adminController['changeAdminPassword']),router[a26_0x1e47e7(0x239)](a26_0x1e47e7(0x1be),adminController[a26_0x1e47e7(0x1db)]),router[a26_0x1e47e7(0x1c1)]('/2fa/setup',adminController['setupAdmin2FA']),router[a26_0x1e47e7(0x1c1)](a26_0x1e47e7(0x1e9),adminController[a26_0x1e47e7(0x1d8)]),router[a26_0x1e47e7(0x1c1)](a26_0x1e47e7(0x1f7),adminController[a26_0x1e47e7(0x1b4)]),router[a26_0x1e47e7(0x1c1)]('/users/:id/suspend',adminController[a26_0x1e47e7(0x1c9)]),router[a26_0x1e47e7(0x1c1)](a26_0x1e47e7(0x1ba),adminController[a26_0x1e47e7(0x231)]),router[a26_0x1e47e7(0x1c1)]('/deposit',adminController[a26_0x1e47e7(0x201)]),router[a26_0x1e47e7(0x239)](a26_0x1e47e7(0x238),(_0x58b05a,_0x5dee2d)=>{const _0x3b9d9d=a26_0x1e47e7;try{const _0x6fcddf=loggerService_1[_0x3b9d9d(0x1f9)][_0x3b9d9d(0x1fc)]();_0x5dee2d[_0x3b9d9d(0x23a)]({'success':!![],'result':_0x6fcddf});}catch(_0x5a436b){_0x5dee2d[_0x3b9d9d(0x249)](0x1f4)[_0x3b9d9d(0x23a)]({'success':![],'message':_0x3b9d9d(0x1cd)});}}),router['post'](a26_0x1e47e7(0x1d3),(_0x480de8,_0x5e1f5c)=>{const _0x36caff=a26_0x1e47e7;try{const {daysToKeep:daysToKeep=0x1e}=_0x480de8['body'];loggerService_1['loggerService'][_0x36caff(0x1cb)](daysToKeep),_0x5e1f5c[_0x36caff(0x23a)]({'success':!![],'message':_0x36caff(0x245)+daysToKeep+_0x36caff(0x1de)});}catch(_0xff6d07){_0x5e1f5c[_0x36caff(0x249)](0x1f4)['json']({'success':![],'message':'Failed\x20to\x20clean\x20old\x20logs'});}}),router[a26_0x1e47e7(0x1c1)](a26_0x1e47e7(0x225),async(_0x484b60,_0x1f72f1)=>{const _0xb6ef87=a26_0x1e47e7;try{const {paymentId:_0x142416}=_0x484b60[_0xb6ef87(0x1b8)];console[_0xb6ef87(0x1c4)]('üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20'+_0x142416),await coinToPayStatusService_1[_0xb6ef87(0x1b7)][_0xb6ef87(0x248)](_0x142416),_0x1f72f1['json']({'success':!![],'message':_0xb6ef87(0x226)});}catch(_0x3269a6){console[_0xb6ef87(0x23b)](_0xb6ef87(0x218)+_0x484b60[_0xb6ef87(0x1b8)][_0xb6ef87(0x219)]+':',_0x3269a6),_0x1f72f1[_0xb6ef87(0x249)](0x1f4)[_0xb6ef87(0x23a)]({'success':![],'message':_0x3269a6 instanceof Error?_0x3269a6['message']:_0xb6ef87(0x21b)});}}),router[a26_0x1e47e7(0x239)](a26_0x1e47e7(0x220),(_0x3e7ef1,_0x4d49c4)=>{const _0x280a1b=a26_0x1e47e7;try{const _0x5b52e6=coinToPayStatusService_1[_0x280a1b(0x1b7)][_0x280a1b(0x237)]();_0x4d49c4[_0x280a1b(0x23a)]({'success':!![],'result':{..._0x5b52e6,'description':_0x280a1b(0x241),'statusMapping':{'Paid':_0x280a1b(0x1d5),'Awaiting\x20Fiat':_0x280a1b(0x22b),'waiting':_0x280a1b(0x22b),'expired':'EXPIRED','failed':_0x280a1b(0x235)},'autoExpiryNote':_0x280a1b(0x205)+_0x5b52e6[_0x280a1b(0x1b5)]+_0x280a1b(0x243),'individualTimersNote':_0x280a1b(0x1bb)}});}catch(_0x54275c){_0x4d49c4[_0x280a1b(0x249)](0x1f4)[_0x280a1b(0x23a)]({'success':![],'message':_0x280a1b(0x20a)});}}),router['get'](a26_0x1e47e7(0x232),async(_0x30bc91,_0x4c4c77)=>{const _0x5c5e6c=a26_0x1e47e7;try{const {paymentId:_0x373bd1}=_0x30bc91[_0x5c5e6c(0x1b8)],_0x192573=coinToPayStatusService_1['coinToPayStatusService'][_0x5c5e6c(0x1cc)](_0x373bd1),_0x46c0ce=(await Promise[_0x5c5e6c(0x1d9)]()[_0x5c5e6c(0x1e5)](()=>__importStar(require('../config/database'))))[_0x5c5e6c(0x1e1)],_0x540e76=await _0x46c0ce[_0x5c5e6c(0x215)][_0x5c5e6c(0x22c)]({'where':{'id':_0x373bd1},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x540e76)return _0x4c4c77[_0x5c5e6c(0x249)](0x194)[_0x5c5e6c(0x23a)]({'success':![],'message':_0x5c5e6c(0x1f2)});_0x4c4c77['json']({'success':!![],'result':{'payment':{'id':_0x540e76['id'],'gateway':_0x540e76[_0x5c5e6c(0x20b)],'gatewayPaymentId':_0x540e76[_0x5c5e6c(0x1ed)],'status':_0x540e76[_0x5c5e6c(0x249)],'amount':_0x540e76[_0x5c5e6c(0x209)],'currency':_0x540e76['currency'],'createdAt':_0x540e76['createdAt'],'updatedAt':_0x540e76[_0x5c5e6c(0x20d)],'shop':_0x540e76['shop']},'timers':_0x192573,'isCoinToPay':_0x540e76[_0x5c5e6c(0x20b)]==='cointopay','ageInMinutes':Math[_0x5c5e6c(0x236)]((Date[_0x5c5e6c(0x208)]()-_0x540e76[_0x5c5e6c(0x1bd)][_0x5c5e6c(0x1ec)]())/(0x3e8*0x3c))}});}catch(_0x55116c){_0x4c4c77['status'](0x1f4)[_0x5c5e6c(0x23a)]({'success':![],'message':_0x55116c instanceof Error?_0x55116c[_0x5c5e6c(0x20c)]:_0x5c5e6c(0x1c0)});}}),router['get']('/domain-monitoring/stats',(_0x21473f,_0x4b6f03)=>{const _0x487394=a26_0x1e47e7;try{const _0x57375d=domainMonitoringService_1[_0x487394(0x1fa)][_0x487394(0x1eb)]();_0x4b6f03['json']({'success':!![],'result':{..._0x57375d,'description':_0x487394(0x1ff),'behavior':'Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','encoding':_0x487394(0x240)}});}catch(_0x3ba369){_0x4b6f03[_0x487394(0x249)](0x1f4)[_0x487394(0x23a)]({'success':![],'message':_0x487394(0x228)});}}),router[a26_0x1e47e7(0x1c1)]('/domain-monitoring/check',async(_0x33b828,_0x26d527)=>{const _0x377f3b=a26_0x1e47e7;try{const _0x527915=await domainMonitoringService_1[_0x377f3b(0x1fa)]['manualCheck']();_0x26d527[_0x377f3b(0x23a)]({'success':!![],'result':{'domainAvailable':_0x527915,'message':_0x527915?_0x377f3b(0x1f6):'Domain\x20check\x20failed','timestamp':new Date()['toISOString']()}});}catch(_0x10a3e5){_0x26d527['status'](0x1f4)['json']({'success':![],'message':_0x10a3e5 instanceof Error?_0x10a3e5[_0x377f3b(0x20c)]:_0x377f3b(0x1fb)});}}),exports[a26_0x1e47e7(0x1e1)]=router;