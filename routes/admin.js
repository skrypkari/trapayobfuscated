'use strict';const a19_0x1e318f=a19_0x4435;function a19_0x2d9d(){const _0x4713a0=['Domain\x20is\x20responding\x20correctly','6vWjwMV','status','../services/coinToPayStatusService','express','json','Payment\x20not\x20found','currency','/logs/clean','../middleware/auth','2873996hdqiiz','2214786hqzwuw','post','suspendUser','Old\x20logs\x20cleaned\x20(kept\x20last\x20','manualCheck','writable','createdAt','deletePayout','/statistics','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','now','getLogStats','getOwnPropertyNames','/users/:id/suspend','/payout','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','__importStar','\x20days\x20if\x20not\x20paid','gatewayPaymentId','payment','create','domainMonitoringService','PAID','AdminController','updateCustomerDataSchema','/users/:id','length','\x20days)','/payments','shop','then','delete','../controllers/adminController','/domain-monitoring/check','params','CoinToPay\x20automatic\x20status\x20checking\x20service','6259885wgnSAS','Payments\x20automatically\x20expire\x20after\x20','activateUser','7037955xVtmab','../middleware/validation','EXPIRED','hasOwnProperty','message','/payouts/:id','gateway','checkAuth','amount','log','/cointopay/check/:paymentId','default','checkPaymentById','getPaymentTimerInfo','createPayout','/users/:id/activate','/logs/stats','getMerchantsAwaitingPayout','getTime','createPayoutSchema','__esModule','__setModuleDefault','getServiceStats','deleteUser','/auth','getPayouts','updateUserSchema','PENDING','Failed\x20to\x20get\x20log\x20statistics','/domain-monitoring/stats','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','toISOString','Failed\x20to\x20get\x20payment\x20information','defineProperty','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','/users','validate','getUserById','/payments/:id/customer','getPayoutById','updatedAt','/payout/stats','paymentId','16EnjByW','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','Router','getPayoutStats','CoinToPay\x20payment\x20status\x20checked\x20successfully','/payout/merchants','updatePayment','1153859XdIwDL','get','updateCustomerData','coinToPayStatusService','cointopay','33280220bDkOJE','loggerService','10EnYLRF','/payouts','resolve','Domain\x20check\x20failed','/payments/:id','/cointopay/stats','230893EgWeQo','cleanOldLogs','Failed\x20to\x20perform\x20manual\x20domain\x20check','put','getMerchantStatistics','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','../services/domainMonitoringService','getUsers'];a19_0x2d9d=function(){return _0x4713a0;};return a19_0x2d9d();}(function(_0x43f89e,_0x51923e){const _0xe40361=a19_0x4435,_0x180ad8=_0x43f89e();while(!![]){try{const _0x177e3e=parseInt(_0xe40361(0x152))/0x1*(parseInt(_0xe40361(0x14c))/0x2)+-parseInt(_0xe40361(0x165))/0x3+-parseInt(_0xe40361(0x164))/0x4+-parseInt(_0xe40361(0x189))/0x5*(parseInt(_0xe40361(0x15b))/0x6)+parseInt(_0xe40361(0x145))/0x7*(-parseInt(_0xe40361(0x13e))/0x8)+-parseInt(_0xe40361(0x18c))/0x9+parseInt(_0xe40361(0x14a))/0xa;if(_0x177e3e===_0x51923e)break;else _0x180ad8['push'](_0x180ad8['shift']());}catch(_0x125ffa){_0x180ad8['push'](_0x180ad8['shift']());}}}(a19_0x2d9d,0xa1a40));function a19_0x4435(_0x4ee612,_0x4c9352){const _0x2d9d33=a19_0x2d9d();return a19_0x4435=function(_0x443523,_0x4911c6){_0x443523=_0x443523-0x121;let _0x59930d=_0x2d9d33[_0x443523];return _0x59930d;},a19_0x4435(_0x4ee612,_0x4c9352);}var __createBinding=this&&this['__createBinding']||(Object[a19_0x1e318f(0x179)]?function(_0xc43824,_0x174e6e,_0x6ba3a5,_0x4ccbcc){const _0x1aaab5=a19_0x1e318f;if(_0x4ccbcc===undefined)_0x4ccbcc=_0x6ba3a5;var _0x273695=Object['getOwnPropertyDescriptor'](_0x174e6e,_0x6ba3a5);(!_0x273695||(_0x1aaab5(0x146)in _0x273695?!_0x174e6e[_0x1aaab5(0x127)]:_0x273695[_0x1aaab5(0x16a)]||_0x273695['configurable']))&&(_0x273695={'enumerable':!![],'get':function(){return _0x174e6e[_0x6ba3a5];}}),Object[_0x1aaab5(0x134)](_0xc43824,_0x4ccbcc,_0x273695);}:function(_0x2a7a62,_0x1af5a9,_0x268745,_0x412a7c){if(_0x412a7c===undefined)_0x412a7c=_0x268745;_0x2a7a62[_0x412a7c]=_0x1af5a9[_0x268745];}),__setModuleDefault=this&&this[a19_0x1e318f(0x128)]||(Object[a19_0x1e318f(0x179)]?function(_0x48b80f,_0x1dd38b){const _0x3852a0=a19_0x1e318f;Object[_0x3852a0(0x134)](_0x48b80f,_0x3852a0(0x197),{'enumerable':!![],'value':_0x1dd38b});}:function(_0x200fe8,_0xb25cd2){const _0x50861a=a19_0x1e318f;_0x200fe8[_0x50861a(0x197)]=_0xb25cd2;}),__importStar=this&&this[a19_0x1e318f(0x175)]||(function(){var _0x4d23db=function(_0x494504){const _0x31ec61=a19_0x4435;return _0x4d23db=Object[_0x31ec61(0x171)]||function(_0x575066){const _0x27f9f5=_0x31ec61;var _0xb582be=[];for(var _0x1f4778 in _0x575066)if(Object['prototype'][_0x27f9f5(0x18f)]['call'](_0x575066,_0x1f4778))_0xb582be[_0xb582be[_0x27f9f5(0x17f)]]=_0x1f4778;return _0xb582be;},_0x4d23db(_0x494504);};return function(_0x4257ad){const _0x8a0230=a19_0x4435;if(_0x4257ad&&_0x4257ad['__esModule'])return _0x4257ad;var _0x1d1e70={};if(_0x4257ad!=null){for(var _0x5a9ab5=_0x4d23db(_0x4257ad),_0x18904d=0x0;_0x18904d<_0x5a9ab5['length'];_0x18904d++)if(_0x5a9ab5[_0x18904d]!==_0x8a0230(0x197))__createBinding(_0x1d1e70,_0x4257ad,_0x5a9ab5[_0x18904d]);}return __setModuleDefault(_0x1d1e70,_0x4257ad),_0x1d1e70;};}());Object['defineProperty'](exports,a19_0x1e318f(0x127),{'value':!![]});const express_1=require(a19_0x1e318f(0x15e)),adminController_1=require(a19_0x1e318f(0x185)),validation_1=require(a19_0x1e318f(0x18d)),auth_1=require(a19_0x1e318f(0x163)),loggerService_1=require('../services/loggerService'),coinToPayStatusService_1=require(a19_0x1e318f(0x15d)),domainMonitoringService_1=require(a19_0x1e318f(0x158)),router=(0x0,express_1[a19_0x1e318f(0x140)])(),adminController=new adminController_1[(a19_0x1e318f(0x17c))]();router['use'](auth_1['authenticateToken'],auth_1['requireAdmin']),router[a19_0x1e318f(0x146)](a19_0x1e318f(0x12b),adminController[a19_0x1e318f(0x193)]),router[a19_0x1e318f(0x146)](a19_0x1e318f(0x16d),adminController['getStatistics']),router[a19_0x1e318f(0x146)]('/merchant-statistics',adminController[a19_0x1e318f(0x156)]),router[a19_0x1e318f(0x146)](a19_0x1e318f(0x13c),adminController[a19_0x1e318f(0x141)]),router[a19_0x1e318f(0x146)](a19_0x1e318f(0x143),adminController[a19_0x1e318f(0x124)]),router[a19_0x1e318f(0x166)](a19_0x1e318f(0x173),(0x0,validation_1['validate'])(validation_1[a19_0x1e318f(0x126)]),adminController[a19_0x1e318f(0x121)]),router[a19_0x1e318f(0x146)](a19_0x1e318f(0x14d),adminController[a19_0x1e318f(0x12c)]),router[a19_0x1e318f(0x146)](a19_0x1e318f(0x191),adminController[a19_0x1e318f(0x13a)]),router[a19_0x1e318f(0x184)]('/payouts/:id',adminController[a19_0x1e318f(0x16c)]),router['get'](a19_0x1e318f(0x181),adminController['getPayments']),router[a19_0x1e318f(0x146)]('/payments/:id',adminController['getPaymentById']),router['put'](a19_0x1e318f(0x150),adminController[a19_0x1e318f(0x144)]),router[a19_0x1e318f(0x155)](a19_0x1e318f(0x139),(0x0,validation_1[a19_0x1e318f(0x137)])(validation_1[a19_0x1e318f(0x17d)]),adminController[a19_0x1e318f(0x147)]),router[a19_0x1e318f(0x146)]('/users',adminController[a19_0x1e318f(0x159)]),router[a19_0x1e318f(0x146)]('/users/:id',adminController[a19_0x1e318f(0x138)]),router[a19_0x1e318f(0x166)](a19_0x1e318f(0x136),(0x0,validation_1[a19_0x1e318f(0x137)])(validation_1['createUserSchema']),adminController['createUser']),router[a19_0x1e318f(0x155)](a19_0x1e318f(0x17e),(0x0,validation_1[a19_0x1e318f(0x137)])(validation_1[a19_0x1e318f(0x12d)]),adminController['updateUser']),router['delete']('/users/:id',adminController[a19_0x1e318f(0x12a)]),router[a19_0x1e318f(0x166)](a19_0x1e318f(0x172),adminController[a19_0x1e318f(0x167)]),router[a19_0x1e318f(0x166)](a19_0x1e318f(0x122),adminController[a19_0x1e318f(0x18b)]),router[a19_0x1e318f(0x146)](a19_0x1e318f(0x123),(_0x360a1a,_0x1939e5)=>{const _0xdb2950=a19_0x1e318f;try{const _0x4cf2b0=loggerService_1[_0xdb2950(0x14b)][_0xdb2950(0x170)]();_0x1939e5[_0xdb2950(0x15f)]({'success':!![],'result':_0x4cf2b0});}catch(_0x22006b){_0x1939e5[_0xdb2950(0x15c)](0x1f4)[_0xdb2950(0x15f)]({'success':![],'message':_0xdb2950(0x12f)});}}),router['post'](a19_0x1e318f(0x162),(_0x27d79e,_0x2e3e7c)=>{const _0x3bb6f5=a19_0x1e318f;try{const {daysToKeep:daysToKeep=0x1e}=_0x27d79e['body'];loggerService_1[_0x3bb6f5(0x14b)][_0x3bb6f5(0x153)](daysToKeep),_0x2e3e7c[_0x3bb6f5(0x15f)]({'success':!![],'message':_0x3bb6f5(0x168)+daysToKeep+_0x3bb6f5(0x180)});}catch(_0x1b24ee){_0x2e3e7c[_0x3bb6f5(0x15c)](0x1f4)[_0x3bb6f5(0x15f)]({'success':![],'message':'Failed\x20to\x20clean\x20old\x20logs'});}}),router[a19_0x1e318f(0x166)](a19_0x1e318f(0x196),async(_0x452cd5,_0x40a149)=>{const _0x3a33e1=a19_0x1e318f;try{const {paymentId:_0x1763c1}=_0x452cd5[_0x3a33e1(0x187)];console[_0x3a33e1(0x195)]('üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20'+_0x1763c1),await coinToPayStatusService_1[_0x3a33e1(0x148)][_0x3a33e1(0x198)](_0x1763c1),_0x40a149['json']({'success':!![],'message':_0x3a33e1(0x142)});}catch(_0x46312c){console['error'](_0x3a33e1(0x157)+_0x452cd5[_0x3a33e1(0x187)][_0x3a33e1(0x13d)]+':',_0x46312c),_0x40a149[_0x3a33e1(0x15c)](0x1f4)['json']({'success':![],'message':_0x46312c instanceof Error?_0x46312c[_0x3a33e1(0x190)]:_0x3a33e1(0x13f)});}}),router[a19_0x1e318f(0x146)](a19_0x1e318f(0x151),(_0x3cd7db,_0x42545a)=>{const _0x2cd8fd=a19_0x1e318f;try{const _0x19620b=coinToPayStatusService_1[_0x2cd8fd(0x148)][_0x2cd8fd(0x129)]();_0x42545a['json']({'success':!![],'result':{..._0x19620b,'description':_0x2cd8fd(0x188),'statusMapping':{'Paid':_0x2cd8fd(0x17b),'Awaiting\x20Fiat':_0x2cd8fd(0x12e),'waiting':_0x2cd8fd(0x12e),'expired':_0x2cd8fd(0x18e),'failed':'FAILED'},'autoExpiryNote':_0x2cd8fd(0x18a)+_0x19620b['expiryDays']+_0x2cd8fd(0x176),'individualTimersNote':_0x2cd8fd(0x16e)}});}catch(_0x36ee9a){_0x42545a[_0x2cd8fd(0x15c)](0x1f4)['json']({'success':![],'message':_0x2cd8fd(0x174)});}}),router[a19_0x1e318f(0x146)]('/cointopay/payment/:paymentId',async(_0x37f623,_0xf967cc)=>{const _0x3a45b4=a19_0x1e318f;try{const {paymentId:_0x450642}=_0x37f623[_0x3a45b4(0x187)],_0x3f2b3a=coinToPayStatusService_1[_0x3a45b4(0x148)][_0x3a45b4(0x199)](_0x450642),_0x346ddd=(await Promise[_0x3a45b4(0x14e)]()[_0x3a45b4(0x183)](()=>__importStar(require('../config/database'))))[_0x3a45b4(0x197)],_0x57255a=await _0x346ddd[_0x3a45b4(0x178)]['findUnique']({'where':{'id':_0x450642},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x57255a)return _0xf967cc[_0x3a45b4(0x15c)](0x194)[_0x3a45b4(0x15f)]({'success':![],'message':_0x3a45b4(0x160)});_0xf967cc[_0x3a45b4(0x15f)]({'success':!![],'result':{'payment':{'id':_0x57255a['id'],'gateway':_0x57255a[_0x3a45b4(0x192)],'gatewayPaymentId':_0x57255a[_0x3a45b4(0x177)],'status':_0x57255a['status'],'amount':_0x57255a[_0x3a45b4(0x194)],'currency':_0x57255a[_0x3a45b4(0x161)],'createdAt':_0x57255a[_0x3a45b4(0x16b)],'updatedAt':_0x57255a[_0x3a45b4(0x13b)],'shop':_0x57255a[_0x3a45b4(0x182)]},'timers':_0x3f2b3a,'isCoinToPay':_0x57255a[_0x3a45b4(0x192)]===_0x3a45b4(0x149),'ageInMinutes':Math['floor']((Date[_0x3a45b4(0x16f)]()-_0x57255a[_0x3a45b4(0x16b)][_0x3a45b4(0x125)]())/(0x3e8*0x3c))}});}catch(_0x40a0b5){_0xf967cc[_0x3a45b4(0x15c)](0x1f4)[_0x3a45b4(0x15f)]({'success':![],'message':_0x40a0b5 instanceof Error?_0x40a0b5[_0x3a45b4(0x190)]:_0x3a45b4(0x133)});}}),router[a19_0x1e318f(0x146)](a19_0x1e318f(0x130),(_0x5ccae6,_0x22637a)=>{const _0x2b1f84=a19_0x1e318f;try{const _0x2e16da=domainMonitoringService_1[_0x2b1f84(0x17a)]['getMonitoringStats']();_0x22637a[_0x2b1f84(0x15f)]({'success':!![],'result':{..._0x2e16da,'description':'Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','behavior':_0x2b1f84(0x131),'encoding':'Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs'}});}catch(_0x44c873){_0x22637a['status'](0x1f4)[_0x2b1f84(0x15f)]({'success':![],'message':_0x2b1f84(0x135)});}}),router[a19_0x1e318f(0x166)](a19_0x1e318f(0x186),async(_0x4b677e,_0x2b5348)=>{const _0x3f4407=a19_0x1e318f;try{const _0x100064=await domainMonitoringService_1[_0x3f4407(0x17a)][_0x3f4407(0x169)]();_0x2b5348[_0x3f4407(0x15f)]({'success':!![],'result':{'domainAvailable':_0x100064,'message':_0x100064?_0x3f4407(0x15a):_0x3f4407(0x14f),'timestamp':new Date()[_0x3f4407(0x132)]()}});}catch(_0x336685){_0x2b5348[_0x3f4407(0x15c)](0x1f4)['json']({'success':![],'message':_0x336685 instanceof Error?_0x336685[_0x3f4407(0x190)]:_0x3f4407(0x154)});}}),exports[a19_0x1e318f(0x197)]=router;