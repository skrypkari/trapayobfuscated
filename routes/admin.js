'use strict';const a19_0x397110=a19_0x5659;(function(_0x4a2007,_0x5324e6){const _0x307d08=a19_0x5659,_0x5957b7=_0x4a2007();while(!![]){try{const _0x2ac4ba=parseInt(_0x307d08(0x96))/0x1+parseInt(_0x307d08(0xc6))/0x2*(-parseInt(_0x307d08(0xa8))/0x3)+-parseInt(_0x307d08(0xe6))/0x4+-parseInt(_0x307d08(0x7e))/0x5+parseInt(_0x307d08(0x9c))/0x6+-parseInt(_0x307d08(0xe4))/0x7+parseInt(_0x307d08(0xe9))/0x8*(parseInt(_0x307d08(0x8a))/0x9);if(_0x2ac4ba===_0x5324e6)break;else _0x5957b7['push'](_0x5957b7['shift']());}catch(_0x254b53){_0x5957b7['push'](_0x5957b7['shift']());}}}(a19_0xe00b,0xe7e46));var __createBinding=this&&this[a19_0x397110(0xc8)]||(Object[a19_0x397110(0x82)]?function(_0x4cfd67,_0x5e65a4,_0x3026e1,_0x42613b){const _0x4f1500=a19_0x397110;if(_0x42613b===undefined)_0x42613b=_0x3026e1;var _0x51bee6=Object[_0x4f1500(0x9f)](_0x5e65a4,_0x3026e1);(!_0x51bee6||(_0x4f1500(0xcd)in _0x51bee6?!_0x5e65a4[_0x4f1500(0x95)]:_0x51bee6[_0x4f1500(0x90)]||_0x51bee6[_0x4f1500(0xda)]))&&(_0x51bee6={'enumerable':!![],'get':function(){return _0x5e65a4[_0x3026e1];}}),Object[_0x4f1500(0xc7)](_0x4cfd67,_0x42613b,_0x51bee6);}:function(_0x5438a3,_0x3f13e6,_0x3e8890,_0x5c6c07){if(_0x5c6c07===undefined)_0x5c6c07=_0x3e8890;_0x5438a3[_0x5c6c07]=_0x3f13e6[_0x3e8890];}),__setModuleDefault=this&&this[a19_0x397110(0xa6)]||(Object['create']?function(_0x25f4da,_0x9a5e42){const _0x39ab56=a19_0x397110;Object[_0x39ab56(0xc7)](_0x25f4da,_0x39ab56(0xdb),{'enumerable':!![],'value':_0x9a5e42});}:function(_0x471be7,_0x1ddcdf){const _0x413532=a19_0x397110;_0x471be7[_0x413532(0xdb)]=_0x1ddcdf;}),__importStar=this&&this[a19_0x397110(0xad)]||(function(){var _0x2e8987=function(_0x32659d){const _0x306f02=a19_0x5659;return _0x2e8987=Object[_0x306f02(0x7f)]||function(_0x4967fd){const _0x444b2e=_0x306f02;var _0x1a710d=[];for(var _0x189e6b in _0x4967fd)if(Object[_0x444b2e(0xe0)]['hasOwnProperty']['call'](_0x4967fd,_0x189e6b))_0x1a710d[_0x1a710d[_0x444b2e(0xb0)]]=_0x189e6b;return _0x1a710d;},_0x2e8987(_0x32659d);};return function(_0x627c71){const _0x4b7c68=a19_0x5659;if(_0x627c71&&_0x627c71[_0x4b7c68(0x95)])return _0x627c71;var _0x43aef9={};if(_0x627c71!=null){for(var _0xcac841=_0x2e8987(_0x627c71),_0x33b7bf=0x0;_0x33b7bf<_0xcac841['length'];_0x33b7bf++)if(_0xcac841[_0x33b7bf]!==_0x4b7c68(0xdb))__createBinding(_0x43aef9,_0x627c71,_0xcac841[_0x33b7bf]);}return __setModuleDefault(_0x43aef9,_0x627c71),_0x43aef9;};}());function a19_0xe00b(){const _0x2d42b9=['/users/:id','../services/coinToPayStatusService','getPayouts','put','getPayoutById','amount','PENDING','findUnique','\x20days)','getMerchantStatistics','configurable','default','/cointopay/stats','getPaymentById','then','cointopay','prototype','Failed\x20to\x20get\x20payment\x20information','message','/users/:id/suspend','11474085mfYqZD','/users/:id/activate','7277252CtURoL','/payments','createUser','552fROWlu','/payments/:id/customer','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','toISOString','/logs/stats','body','/cointopay/payment/:paymentId','updatePayment','gatewayPaymentId','coinToPayStatusService','getTime','FAILED','../config/database','createdAt','../services/loggerService','/auth','post','/merchant-statistics','6746715BduYPT','getOwnPropertyNames','getPayments','/payout/merchants','create','validate','Payment\x20not\x20found','Old\x20logs\x20cleaned\x20(kept\x20last\x20','../middleware/validation','/payout','Failed\x20to\x20get\x20log\x20statistics','updateUserSchema','742491EUAknV','createUserSchema','floor','PAID','/domain-monitoring/check','🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','writable','/merchants/selection','EXPIRED','/payments/:id','CoinToPay\x20payment\x20status\x20checked\x20successfully','__esModule','702170KehlUN','../services/domainMonitoringService','getUserById','updateUser','/cointopay/check/:paymentId','/payout/stats','4019202ZxTxBn','getLogStats','../middleware/auth','getOwnPropertyDescriptor','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','Domain\x20check\x20failed','suspendUser','payment','../controllers/adminController','Failed\x20to\x20perform\x20manual\x20domain\x20check','__setModuleDefault','getMerchantsAwaitingPayout','5007jyDakF','domainMonitoringService','cleanOldLogs','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','/payouts/:id','__importStar','updateCustomerData','currency','length','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','status','activateUser','getPayoutStats','/payouts','createPayoutSchema','checkAuth','paymentId','checkPaymentById','delete','createPayout','/statistics','deletePayout','requireAdmin','params','log','json','now','resolve','authenticateToken','gateway','1566NedKmd','defineProperty','__createBinding','/users','getUsers','/domain-monitoring/stats','express','get','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','Failed\x20to\x20clean\x20old\x20logs'];a19_0xe00b=function(){return _0x2d42b9;};return a19_0xe00b();}function a19_0x5659(_0x24a421,_0x126087){const _0xe00b38=a19_0xe00b();return a19_0x5659=function(_0x565980,_0x30bc1b){_0x565980=_0x565980-0x6f;let _0x43de17=_0xe00b38[_0x565980];return _0x43de17;},a19_0x5659(_0x24a421,_0x126087);}Object['defineProperty'](exports,a19_0x397110(0x95),{'value':!![]});const express_1=require(a19_0x397110(0xcc)),adminController_1=require(a19_0x397110(0xa4)),validation_1=require(a19_0x397110(0x86)),auth_1=require(a19_0x397110(0x9e)),loggerService_1=require(a19_0x397110(0x7a)),coinToPayStatusService_1=require(a19_0x397110(0xd1)),domainMonitoringService_1=require(a19_0x397110(0x97)),router=(0x0,express_1['Router'])(),adminController=new adminController_1['AdminController']();router['use'](auth_1[a19_0x397110(0xc4)],auth_1[a19_0x397110(0xbe)]),router[a19_0x397110(0xcd)](a19_0x397110(0x7b),adminController[a19_0x397110(0xb7)]),router[a19_0x397110(0xcd)](a19_0x397110(0xbc),adminController['getStatistics']),router[a19_0x397110(0xcd)](a19_0x397110(0x7d),adminController[a19_0x397110(0xd9)]),router[a19_0x397110(0xcd)](a19_0x397110(0x9b),adminController[a19_0x397110(0xb4)]),router['get'](a19_0x397110(0x81),adminController[a19_0x397110(0xa7)]),router['get'](a19_0x397110(0x91),adminController['getMerchantsSelection']),router[a19_0x397110(0x7c)](a19_0x397110(0x87),(0x0,validation_1[a19_0x397110(0x83)])(validation_1[a19_0x397110(0xb6)]),adminController[a19_0x397110(0xbb)]),router[a19_0x397110(0xcd)](a19_0x397110(0xb5),adminController[a19_0x397110(0xd2)]),router[a19_0x397110(0xcd)](a19_0x397110(0xac),adminController[a19_0x397110(0xd4)]),router[a19_0x397110(0xba)](a19_0x397110(0xac),adminController[a19_0x397110(0xbd)]),router[a19_0x397110(0xcd)](a19_0x397110(0xe7),adminController[a19_0x397110(0x80)]),router['get']('/payments/:id',adminController[a19_0x397110(0xdd)]),router[a19_0x397110(0xd3)](a19_0x397110(0x93),adminController[a19_0x397110(0x73)]),router['put'](a19_0x397110(0xea),(0x0,validation_1['validate'])(validation_1['updateCustomerDataSchema']),adminController[a19_0x397110(0xae)]),router['get'](a19_0x397110(0xc9),adminController[a19_0x397110(0xca)]),router[a19_0x397110(0xcd)](a19_0x397110(0xd0),adminController[a19_0x397110(0x98)]),router['post'](a19_0x397110(0xc9),(0x0,validation_1['validate'])(validation_1[a19_0x397110(0x8b)]),adminController[a19_0x397110(0xe8)]),router[a19_0x397110(0xd3)]('/users/:id',(0x0,validation_1['validate'])(validation_1[a19_0x397110(0x89)]),adminController[a19_0x397110(0x99)]),router[a19_0x397110(0xba)](a19_0x397110(0xd0),adminController['deleteUser']),router[a19_0x397110(0x7c)](a19_0x397110(0xe3),adminController[a19_0x397110(0xa2)]),router['post'](a19_0x397110(0xe5),adminController[a19_0x397110(0xb3)]),router[a19_0x397110(0xcd)](a19_0x397110(0x70),(_0x12e138,_0x91a663)=>{const _0x5d4793=a19_0x397110;try{const _0xce81e0=loggerService_1['loggerService'][_0x5d4793(0x9d)]();_0x91a663[_0x5d4793(0xc1)]({'success':!![],'result':_0xce81e0});}catch(_0x3710ff){_0x91a663[_0x5d4793(0xb2)](0x1f4)[_0x5d4793(0xc1)]({'success':![],'message':_0x5d4793(0x88)});}}),router[a19_0x397110(0x7c)]('/logs/clean',(_0x14ce87,_0x3ab308)=>{const _0x32af09=a19_0x397110;try{const {daysToKeep:daysToKeep=0x1e}=_0x14ce87[_0x32af09(0x71)];loggerService_1['loggerService'][_0x32af09(0xaa)](daysToKeep),_0x3ab308[_0x32af09(0xc1)]({'success':!![],'message':_0x32af09(0x85)+daysToKeep+_0x32af09(0xd8)});}catch(_0x376eb1){_0x3ab308[_0x32af09(0xb2)](0x1f4)[_0x32af09(0xc1)]({'success':![],'message':_0x32af09(0xcf)});}}),router[a19_0x397110(0x7c)](a19_0x397110(0x9a),async(_0x435aee,_0x6bcf61)=>{const _0x342b30=a19_0x397110;try{const {paymentId:_0x19f220}=_0x435aee[_0x342b30(0xbf)];console[_0x342b30(0xc0)](_0x342b30(0x8f)+_0x19f220),await coinToPayStatusService_1[_0x342b30(0x75)][_0x342b30(0xb9)](_0x19f220),_0x6bcf61[_0x342b30(0xc1)]({'success':!![],'message':_0x342b30(0x94)});}catch(_0x311baa){console['error']('❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20'+_0x435aee['params'][_0x342b30(0xb8)]+':',_0x311baa),_0x6bcf61['status'](0x1f4)[_0x342b30(0xc1)]({'success':![],'message':_0x311baa instanceof Error?_0x311baa[_0x342b30(0xe2)]:'Failed\x20to\x20check\x20CoinToPay\x20payment\x20status'});}}),router[a19_0x397110(0xcd)](a19_0x397110(0xdc),(_0x37af79,_0x70d087)=>{const _0x2fb0e0=a19_0x397110;try{const _0x4e3e84=coinToPayStatusService_1[_0x2fb0e0(0x75)]['getServiceStats']();_0x70d087['json']({'success':!![],'result':{..._0x4e3e84,'description':'CoinToPay\x20automatic\x20status\x20checking\x20service','statusMapping':{'Paid':_0x2fb0e0(0x8d),'Awaiting\x20Fiat':_0x2fb0e0(0xd6),'waiting':_0x2fb0e0(0xd6),'expired':_0x2fb0e0(0x92),'failed':_0x2fb0e0(0x77)},'autoExpiryNote':'Payments\x20automatically\x20expire\x20after\x20'+_0x4e3e84['expiryDays']+'\x20days\x20if\x20not\x20paid','individualTimersNote':_0x2fb0e0(0xb1)}});}catch(_0xde6fe0){_0x70d087[_0x2fb0e0(0xb2)](0x1f4)[_0x2fb0e0(0xc1)]({'success':![],'message':_0x2fb0e0(0xce)});}}),router[a19_0x397110(0xcd)](a19_0x397110(0x72),async(_0x5a06de,_0x4b3d1d)=>{const _0x1e7ea0=a19_0x397110;try{const {paymentId:_0x105bf2}=_0x5a06de[_0x1e7ea0(0xbf)],_0x26feb3=coinToPayStatusService_1[_0x1e7ea0(0x75)]['getPaymentTimerInfo'](_0x105bf2),_0x3e5632=(await Promise[_0x1e7ea0(0xc3)]()[_0x1e7ea0(0xde)](()=>__importStar(require(_0x1e7ea0(0x78)))))[_0x1e7ea0(0xdb)],_0x5e01f4=await _0x3e5632[_0x1e7ea0(0xa3)][_0x1e7ea0(0xd7)]({'where':{'id':_0x105bf2},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x5e01f4)return _0x4b3d1d['status'](0x194)[_0x1e7ea0(0xc1)]({'success':![],'message':_0x1e7ea0(0x84)});_0x4b3d1d['json']({'success':!![],'result':{'payment':{'id':_0x5e01f4['id'],'gateway':_0x5e01f4['gateway'],'gatewayPaymentId':_0x5e01f4[_0x1e7ea0(0x74)],'status':_0x5e01f4['status'],'amount':_0x5e01f4[_0x1e7ea0(0xd5)],'currency':_0x5e01f4[_0x1e7ea0(0xaf)],'createdAt':_0x5e01f4[_0x1e7ea0(0x79)],'updatedAt':_0x5e01f4['updatedAt'],'shop':_0x5e01f4['shop']},'timers':_0x26feb3,'isCoinToPay':_0x5e01f4[_0x1e7ea0(0xc5)]===_0x1e7ea0(0xdf),'ageInMinutes':Math[_0x1e7ea0(0x8c)]((Date[_0x1e7ea0(0xc2)]()-_0x5e01f4['createdAt'][_0x1e7ea0(0x76)]())/(0x3e8*0x3c))}});}catch(_0x5312b9){_0x4b3d1d['status'](0x1f4)[_0x1e7ea0(0xc1)]({'success':![],'message':_0x5312b9 instanceof Error?_0x5312b9[_0x1e7ea0(0xe2)]:_0x1e7ea0(0xe1)});}}),router[a19_0x397110(0xcd)](a19_0x397110(0xcb),(_0x261918,_0x29ee4f)=>{const _0x4f372e=a19_0x397110;try{const _0x1e22e5=domainMonitoringService_1[_0x4f372e(0xa9)]['getMonitoringStats']();_0x29ee4f[_0x4f372e(0xc1)]({'success':!![],'result':{..._0x1e22e5,'description':_0x4f372e(0xeb),'behavior':_0x4f372e(0xab),'encoding':_0x4f372e(0xa0)}});}catch(_0x423e16){_0x29ee4f[_0x4f372e(0xb2)](0x1f4)[_0x4f372e(0xc1)]({'success':![],'message':'Failed\x20to\x20get\x20domain\x20monitoring\x20statistics'});}}),router['post'](a19_0x397110(0x8e),async(_0x1f87d0,_0x32a1e2)=>{const _0x248af3=a19_0x397110;try{const _0x3fe1cb=await domainMonitoringService_1[_0x248af3(0xa9)]['manualCheck']();_0x32a1e2[_0x248af3(0xc1)]({'success':!![],'result':{'domainAvailable':_0x3fe1cb,'message':_0x3fe1cb?'Domain\x20is\x20responding\x20correctly':_0x248af3(0xa1),'timestamp':new Date()[_0x248af3(0x6f)]()}});}catch(_0x15b629){_0x32a1e2['status'](0x1f4)[_0x248af3(0xc1)]({'success':![],'message':_0x15b629 instanceof Error?_0x15b629['message']:_0x248af3(0xa5)});}}),exports[a19_0x397110(0xdb)]=router;