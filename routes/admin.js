'use strict';const a19_0xb4c506=a19_0x429c;function a19_0x429c(_0x1f5656,_0x258e05){const _0x34cd16=a19_0x34cd();return a19_0x429c=function(_0x429cbc,_0x518df7){_0x429cbc=_0x429cbc-0x109;let _0x49fcf6=_0x34cd16[_0x429cbc];return _0x49fcf6;},a19_0x429c(_0x1f5656,_0x258e05);}(function(_0x146420,_0x30960f){const _0x27f5fa=a19_0x429c,_0x2773c8=_0x146420();while(!![]){try{const _0x161dfa=parseInt(_0x27f5fa(0x125))/0x1+-parseInt(_0x27f5fa(0x15e))/0x2+parseInt(_0x27f5fa(0x174))/0x3+parseInt(_0x27f5fa(0x180))/0x4*(parseInt(_0x27f5fa(0x15b))/0x5)+-parseInt(_0x27f5fa(0x116))/0x6+parseInt(_0x27f5fa(0x128))/0x7+parseInt(_0x27f5fa(0x12c))/0x8*(parseInt(_0x27f5fa(0x119))/0x9);if(_0x161dfa===_0x30960f)break;else _0x2773c8['push'](_0x2773c8['shift']());}catch(_0x4e4bbe){_0x2773c8['push'](_0x2773c8['shift']());}}}(a19_0x34cd,0x798cb));function a19_0x34cd(){const _0x172458=['length','getMonitoringStats','then','94052uoudfd','amount','currency','getUsers','/payouts','../services/coinToPayStatusService','updateCustomerData','../services/domainMonitoringService','createPayout','resolve','getServiceStats','/merchants/selection','FAILED','hasOwnProperty','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','../config/database','../middleware/validation','/cointopay/stats','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','payment','configurable','/statistics','validate','EXPIRED','CoinToPay\x20automatic\x20status\x20checking\x20service','4631832unIrYf','prototype','domainMonitoringService','38628FJCbiT','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','createdAt','manualCheck','/domain-monitoring/stats','/merchant-statistics','createUserSchema','Failed\x20to\x20clean\x20old\x20logs','loggerService','/users/:id/activate','/payments/:id','Payments\x20automatically\x20expire\x20after\x20','462533ZswiPP','getPayments','requireAdmin','707791mbQmRj','getTime','activateUser','log','768rvUSoE','PAID','getMerchantsAwaitingPayout','/payments','suspendUser','/logs/clean','defineProperty','get','expiryDays','delete','PENDING','coinToPayStatusService','/payout/merchants','body','updateUser','Failed\x20to\x20get\x20payment\x20information','paymentId','/logs/stats','default','getPayouts','__createBinding','shop','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','cointopay','CoinToPay\x20payment\x20status\x20checked\x20successfully','checkAuth','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','post','getOwnPropertyNames','/users','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','Failed\x20to\x20perform\x20manual\x20domain\x20check','getOwnPropertyDescriptor','getPayoutById','Domain\x20is\x20responding\x20correctly','/payments/:id/customer','AdminController','params','gatewayPaymentId','getMerchantsSelection','getStatistics','gateway','/users/:id/suspend','json','error','/cointopay/payment/:paymentId','/domain-monitoring/check','115EKtYGI','/users/:id','../services/loggerService','1546840UJtdND','authenticateToken','Failed\x20to\x20get\x20log\x20statistics','Old\x20logs\x20cleaned\x20(kept\x20last\x20','/payout/stats','put','__setModuleDefault','getUserById','\x20days\x20if\x20not\x20paid','getPaymentById','message','create','call','cleanOldLogs','/payouts/:id','updatedAt','updateUserSchema','__esModule','/auth','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','../middleware/auth','status','1580346AibzSO','__importStar','express','\x20days)','Payment\x20not\x20found','createPayoutSchema','/payout','updateCustomerDataSchema','/cointopay/check/:paymentId'];a19_0x34cd=function(){return _0x172458;};return a19_0x34cd();}var __createBinding=this&&this[a19_0xb4c506(0x140)]||(Object['create']?function(_0x1e7023,_0x17fb70,_0x5c2cf0,_0x234d5b){const _0x14e9b9=a19_0xb4c506;if(_0x234d5b===undefined)_0x234d5b=_0x5c2cf0;var _0x256805=Object[_0x14e9b9(0x14c)](_0x17fb70,_0x5c2cf0);(!_0x256805||(_0x14e9b9(0x133)in _0x256805?!_0x17fb70[_0x14e9b9(0x16f)]:_0x256805['writable']||_0x256805[_0x14e9b9(0x111)]))&&(_0x256805={'enumerable':!![],'get':function(){return _0x17fb70[_0x5c2cf0];}}),Object[_0x14e9b9(0x132)](_0x1e7023,_0x234d5b,_0x256805);}:function(_0x86867,_0x38c1af,_0x28090a,_0x57d5b0){if(_0x57d5b0===undefined)_0x57d5b0=_0x28090a;_0x86867[_0x57d5b0]=_0x38c1af[_0x28090a];}),__setModuleDefault=this&&this[a19_0xb4c506(0x164)]||(Object[a19_0xb4c506(0x169)]?function(_0x419ac8,_0x2c230d){const _0x54c841=a19_0xb4c506;Object['defineProperty'](_0x419ac8,_0x54c841(0x13e),{'enumerable':!![],'value':_0x2c230d});}:function(_0xf57431,_0x110554){const _0x47fa76=a19_0xb4c506;_0xf57431[_0x47fa76(0x13e)]=_0x110554;}),__importStar=this&&this[a19_0xb4c506(0x175)]||(function(){var _0x45d71a=function(_0x666bc2){const _0x5558a=a19_0x429c;return _0x45d71a=Object[_0x5558a(0x148)]||function(_0x3e8b93){const _0x47802b=_0x5558a;var _0x432ca2=[];for(var _0x386cfb in _0x3e8b93)if(Object[_0x47802b(0x117)][_0x47802b(0x10a)][_0x47802b(0x16a)](_0x3e8b93,_0x386cfb))_0x432ca2[_0x432ca2[_0x47802b(0x17d)]]=_0x386cfb;return _0x432ca2;},_0x45d71a(_0x666bc2);};return function(_0x25957b){const _0x9961b9=a19_0x429c;if(_0x25957b&&_0x25957b[_0x9961b9(0x16f)])return _0x25957b;var _0x504cd1={};if(_0x25957b!=null){for(var _0x467947=_0x45d71a(_0x25957b),_0x323aa4=0x0;_0x323aa4<_0x467947[_0x9961b9(0x17d)];_0x323aa4++)if(_0x467947[_0x323aa4]!==_0x9961b9(0x13e))__createBinding(_0x504cd1,_0x25957b,_0x467947[_0x323aa4]);}return __setModuleDefault(_0x504cd1,_0x25957b),_0x504cd1;};}());Object[a19_0xb4c506(0x132)](exports,a19_0xb4c506(0x16f),{'value':!![]});const express_1=require(a19_0xb4c506(0x176)),adminController_1=require('../controllers/adminController'),validation_1=require(a19_0xb4c506(0x10d)),auth_1=require(a19_0xb4c506(0x172)),loggerService_1=require(a19_0xb4c506(0x15d)),coinToPayStatusService_1=require(a19_0xb4c506(0x185)),domainMonitoringService_1=require(a19_0xb4c506(0x187)),router=(0x0,express_1['Router'])(),adminController=new adminController_1[(a19_0xb4c506(0x150))]();router['use'](auth_1[a19_0xb4c506(0x15f)],auth_1[a19_0xb4c506(0x127)]),router[a19_0xb4c506(0x133)](a19_0xb4c506(0x170),adminController[a19_0xb4c506(0x145)]),router[a19_0xb4c506(0x133)](a19_0xb4c506(0x112),adminController[a19_0xb4c506(0x154)]),router[a19_0xb4c506(0x133)](a19_0xb4c506(0x11e),adminController['getMerchantStatistics']),router['get'](a19_0xb4c506(0x162),adminController['getPayoutStats']),router[a19_0xb4c506(0x133)](a19_0xb4c506(0x138),adminController[a19_0xb4c506(0x12e)]),router[a19_0xb4c506(0x133)](a19_0xb4c506(0x18b),adminController[a19_0xb4c506(0x153)]),router[a19_0xb4c506(0x147)](a19_0xb4c506(0x17a),(0x0,validation_1['validate'])(validation_1[a19_0xb4c506(0x179)]),adminController[a19_0xb4c506(0x188)]),router['get'](a19_0xb4c506(0x184),adminController[a19_0xb4c506(0x13f)]),router[a19_0xb4c506(0x133)](a19_0xb4c506(0x16c),adminController[a19_0xb4c506(0x14d)]),router['delete'](a19_0xb4c506(0x16c),adminController['deletePayout']),router['get'](a19_0xb4c506(0x12f),adminController[a19_0xb4c506(0x126)]),router[a19_0xb4c506(0x133)]('/payments/:id',adminController[a19_0xb4c506(0x167)]),router[a19_0xb4c506(0x163)](a19_0xb4c506(0x123),adminController['updatePayment']),router[a19_0xb4c506(0x163)](a19_0xb4c506(0x14f),(0x0,validation_1[a19_0xb4c506(0x113)])(validation_1[a19_0xb4c506(0x17b)]),adminController[a19_0xb4c506(0x186)]),router['get'](a19_0xb4c506(0x149),adminController[a19_0xb4c506(0x183)]),router[a19_0xb4c506(0x133)](a19_0xb4c506(0x15c),adminController[a19_0xb4c506(0x165)]),router[a19_0xb4c506(0x147)](a19_0xb4c506(0x149),(0x0,validation_1[a19_0xb4c506(0x113)])(validation_1[a19_0xb4c506(0x11f)]),adminController['createUser']),router['put'](a19_0xb4c506(0x15c),(0x0,validation_1['validate'])(validation_1[a19_0xb4c506(0x16e)]),adminController[a19_0xb4c506(0x13a)]),router[a19_0xb4c506(0x135)](a19_0xb4c506(0x15c),adminController['deleteUser']),router[a19_0xb4c506(0x147)](a19_0xb4c506(0x156),adminController[a19_0xb4c506(0x130)]),router[a19_0xb4c506(0x147)](a19_0xb4c506(0x122),adminController[a19_0xb4c506(0x12a)]),router[a19_0xb4c506(0x133)](a19_0xb4c506(0x13d),(_0x34b984,_0x840945)=>{const _0x45071a=a19_0xb4c506;try{const _0x72353=loggerService_1['loggerService']['getLogStats']();_0x840945[_0x45071a(0x157)]({'success':!![],'result':_0x72353});}catch(_0x179755){_0x840945[_0x45071a(0x173)](0x1f4)['json']({'success':![],'message':_0x45071a(0x160)});}}),router[a19_0xb4c506(0x147)](a19_0xb4c506(0x131),(_0x1d7316,_0x1e9a74)=>{const _0x46e88=a19_0xb4c506;try{const {daysToKeep:daysToKeep=0x1e}=_0x1d7316[_0x46e88(0x139)];loggerService_1[_0x46e88(0x121)][_0x46e88(0x16b)](daysToKeep),_0x1e9a74[_0x46e88(0x157)]({'success':!![],'message':_0x46e88(0x161)+daysToKeep+_0x46e88(0x177)});}catch(_0x4e62f2){_0x1e9a74[_0x46e88(0x173)](0x1f4)[_0x46e88(0x157)]({'success':![],'message':_0x46e88(0x120)});}}),router[a19_0xb4c506(0x147)](a19_0xb4c506(0x17c),async(_0x2c40e7,_0x5cb4e1)=>{const _0x19af6d=a19_0xb4c506;try{const {paymentId:_0x3ed8e1}=_0x2c40e7['params'];console[_0x19af6d(0x12b)](_0x19af6d(0x10b)+_0x3ed8e1),await coinToPayStatusService_1[_0x19af6d(0x137)]['checkPaymentById'](_0x3ed8e1),_0x5cb4e1[_0x19af6d(0x157)]({'success':!![],'message':_0x19af6d(0x144)});}catch(_0x2348cc){console[_0x19af6d(0x158)](_0x19af6d(0x146)+_0x2c40e7[_0x19af6d(0x151)][_0x19af6d(0x13c)]+':',_0x2348cc),_0x5cb4e1[_0x19af6d(0x173)](0x1f4)['json']({'success':![],'message':_0x2348cc instanceof Error?_0x2348cc[_0x19af6d(0x168)]:'Failed\x20to\x20check\x20CoinToPay\x20payment\x20status'});}}),router[a19_0xb4c506(0x133)](a19_0xb4c506(0x10e),(_0x3128e7,_0x102741)=>{const _0x3e7759=a19_0xb4c506;try{const _0x1c1a27=coinToPayStatusService_1['coinToPayStatusService'][_0x3e7759(0x18a)]();_0x102741[_0x3e7759(0x157)]({'success':!![],'result':{..._0x1c1a27,'description':_0x3e7759(0x115),'statusMapping':{'Paid':_0x3e7759(0x12d),'Awaiting\x20Fiat':_0x3e7759(0x136),'waiting':_0x3e7759(0x136),'expired':_0x3e7759(0x114),'failed':_0x3e7759(0x109)},'autoExpiryNote':_0x3e7759(0x124)+_0x1c1a27[_0x3e7759(0x134)]+_0x3e7759(0x166),'individualTimersNote':_0x3e7759(0x10f)}});}catch(_0x58c3ff){_0x102741['status'](0x1f4)[_0x3e7759(0x157)]({'success':![],'message':'Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics'});}}),router['get'](a19_0xb4c506(0x159),async(_0xede167,_0x4a5a45)=>{const _0x3044db=a19_0xb4c506;try{const {paymentId:_0x5cc6f6}=_0xede167['params'],_0x593004=coinToPayStatusService_1['coinToPayStatusService']['getPaymentTimerInfo'](_0x5cc6f6),_0x116624=(await Promise[_0x3044db(0x189)]()[_0x3044db(0x17f)](()=>__importStar(require(_0x3044db(0x10c)))))['default'],_0x265613=await _0x116624[_0x3044db(0x110)]['findUnique']({'where':{'id':_0x5cc6f6},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x265613)return _0x4a5a45[_0x3044db(0x173)](0x194)['json']({'success':![],'message':_0x3044db(0x178)});_0x4a5a45[_0x3044db(0x157)]({'success':!![],'result':{'payment':{'id':_0x265613['id'],'gateway':_0x265613[_0x3044db(0x155)],'gatewayPaymentId':_0x265613[_0x3044db(0x152)],'status':_0x265613['status'],'amount':_0x265613[_0x3044db(0x181)],'currency':_0x265613[_0x3044db(0x182)],'createdAt':_0x265613[_0x3044db(0x11b)],'updatedAt':_0x265613[_0x3044db(0x16d)],'shop':_0x265613[_0x3044db(0x141)]},'timers':_0x593004,'isCoinToPay':_0x265613['gateway']===_0x3044db(0x143),'ageInMinutes':Math['floor']((Date['now']()-_0x265613[_0x3044db(0x11b)][_0x3044db(0x129)]())/(0x3e8*0x3c))}});}catch(_0x4872c6){_0x4a5a45[_0x3044db(0x173)](0x1f4)[_0x3044db(0x157)]({'success':![],'message':_0x4872c6 instanceof Error?_0x4872c6['message']:_0x3044db(0x13b)});}}),router[a19_0xb4c506(0x133)](a19_0xb4c506(0x11d),(_0xec20ce,_0x7584de)=>{const _0x98e8af=a19_0xb4c506;try{const _0x49327f=domainMonitoringService_1[_0x98e8af(0x118)][_0x98e8af(0x17e)]();_0x7584de[_0x98e8af(0x157)]({'success':!![],'result':{..._0x49327f,'description':_0x98e8af(0x171),'behavior':_0x98e8af(0x142),'encoding':_0x98e8af(0x11a)}});}catch(_0x19e9e1){_0x7584de[_0x98e8af(0x173)](0x1f4)['json']({'success':![],'message':_0x98e8af(0x14a)});}}),router[a19_0xb4c506(0x147)](a19_0xb4c506(0x15a),async(_0x2963d6,_0x4badbd)=>{const _0xd06359=a19_0xb4c506;try{const _0x5d12f6=await domainMonitoringService_1[_0xd06359(0x118)][_0xd06359(0x11c)]();_0x4badbd[_0xd06359(0x157)]({'success':!![],'result':{'domainAvailable':_0x5d12f6,'message':_0x5d12f6?_0xd06359(0x14e):'Domain\x20check\x20failed','timestamp':new Date()['toISOString']()}});}catch(_0x192353){_0x4badbd['status'](0x1f4)[_0xd06359(0x157)]({'success':![],'message':_0x192353 instanceof Error?_0x192353['message']:_0xd06359(0x14b)});}}),exports[a19_0xb4c506(0x13e)]=router;