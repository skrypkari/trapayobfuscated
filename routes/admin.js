'use strict';const a19_0x49a427=a19_0x1f38;(function(_0x54f2f5,_0x2b6e07){const _0x9b590f=a19_0x1f38,_0x8dec07=_0x54f2f5();while(!![]){try{const _0x13c4cc=-parseInt(_0x9b590f(0x16a))/0x1*(parseInt(_0x9b590f(0x1ce))/0x2)+-parseInt(_0x9b590f(0x18c))/0x3*(parseInt(_0x9b590f(0x189))/0x4)+-parseInt(_0x9b590f(0x165))/0x5+parseInt(_0x9b590f(0x1c0))/0x6*(-parseInt(_0x9b590f(0x1a5))/0x7)+parseInt(_0x9b590f(0x1bf))/0x8+-parseInt(_0x9b590f(0x19d))/0x9*(-parseInt(_0x9b590f(0x15d))/0xa)+-parseInt(_0x9b590f(0x18b))/0xb*(-parseInt(_0x9b590f(0x1d2))/0xc);if(_0x13c4cc===_0x2b6e07)break;else _0x8dec07['push'](_0x8dec07['shift']());}catch(_0x4c1826){_0x8dec07['push'](_0x8dec07['shift']());}}}(a19_0x5699,0x23fad));var __createBinding=this&&this['__createBinding']||(Object[a19_0x49a427(0x1cd)]?function(_0x244cc3,_0x470647,_0x3ddb89,_0x295c42){const _0x2227be=a19_0x49a427;if(_0x295c42===undefined)_0x295c42=_0x3ddb89;var _0x4fc650=Object['getOwnPropertyDescriptor'](_0x470647,_0x3ddb89);(!_0x4fc650||('get'in _0x4fc650?!_0x470647[_0x2227be(0x1ad)]:_0x4fc650[_0x2227be(0x1bd)]||_0x4fc650[_0x2227be(0x1cc)]))&&(_0x4fc650={'enumerable':!![],'get':function(){return _0x470647[_0x3ddb89];}}),Object[_0x2227be(0x1a6)](_0x244cc3,_0x295c42,_0x4fc650);}:function(_0x3922d4,_0x2518d2,_0x26d625,_0xf13b5){if(_0xf13b5===undefined)_0xf13b5=_0x26d625;_0x3922d4[_0xf13b5]=_0x2518d2[_0x26d625];}),__setModuleDefault=this&&this[a19_0x49a427(0x1b8)]||(Object[a19_0x49a427(0x1cd)]?function(_0x523382,_0xfe6e7){const _0x4229d4=a19_0x49a427;Object[_0x4229d4(0x1a6)](_0x523382,_0x4229d4(0x193),{'enumerable':!![],'value':_0xfe6e7});}:function(_0x2c36f5,_0x4f203f){_0x2c36f5['default']=_0x4f203f;}),__importStar=this&&this[a19_0x49a427(0x15c)]||(function(){var _0x59394b=function(_0x58d4cc){const _0x120349=a19_0x1f38;return _0x59394b=Object[_0x120349(0x16c)]||function(_0x45fdc6){const _0x591b0f=_0x120349;var _0xf582c6=[];for(var _0x13e6a2 in _0x45fdc6)if(Object['prototype']['hasOwnProperty'][_0x591b0f(0x1a4)](_0x45fdc6,_0x13e6a2))_0xf582c6[_0xf582c6[_0x591b0f(0x15b)]]=_0x13e6a2;return _0xf582c6;},_0x59394b(_0x58d4cc);};return function(_0xc79c51){const _0x41ab68=a19_0x1f38;if(_0xc79c51&&_0xc79c51[_0x41ab68(0x1ad)])return _0xc79c51;var _0x16a055={};if(_0xc79c51!=null){for(var _0x1ba1e3=_0x59394b(_0xc79c51),_0x5c4d94=0x0;_0x5c4d94<_0x1ba1e3['length'];_0x5c4d94++)if(_0x1ba1e3[_0x5c4d94]!==_0x41ab68(0x193))__createBinding(_0x16a055,_0xc79c51,_0x1ba1e3[_0x5c4d94]);}return __setModuleDefault(_0x16a055,_0xc79c51),_0x16a055;};}());Object[a19_0x49a427(0x1a6)](exports,'__esModule',{'value':!![]});function a19_0x1f38(_0x3a7ab9,_0x165419){const _0x56995a=a19_0x5699();return a19_0x1f38=function(_0x1f3872,_0x4961fd){_0x1f3872=_0x1f3872-0x15b;let _0x27ebcf=_0x56995a[_0x1f3872];return _0x27ebcf;},a19_0x1f38(_0x3a7ab9,_0x165419);}const express_1=require('express'),adminController_1=require(a19_0x49a427(0x19b)),validation_1=require('../middleware/validation'),auth_1=require(a19_0x49a427(0x196)),loggerService_1=require(a19_0x49a427(0x1cf)),coinToPayStatusService_1=require('../services/coinToPayStatusService'),domainMonitoringService_1=require(a19_0x49a427(0x191)),router=(0x0,express_1[a19_0x49a427(0x1c4)])(),adminController=new adminController_1[(a19_0x49a427(0x164))]();router[a19_0x49a427(0x169)](auth_1['authenticateToken'],auth_1[a19_0x49a427(0x1d1)]),router[a19_0x49a427(0x18d)](a19_0x49a427(0x17c),adminController[a19_0x49a427(0x1c1)]),router['get'](a19_0x49a427(0x1d3),adminController[a19_0x49a427(0x1cb)]),router[a19_0x49a427(0x18d)](a19_0x49a427(0x1b5),adminController[a19_0x49a427(0x1c5)]),router[a19_0x49a427(0x18d)](a19_0x49a427(0x1bb),adminController['getPayoutStats']),router[a19_0x49a427(0x18d)](a19_0x49a427(0x1ca),adminController['getMerchantsAwaitingPayout']),router[a19_0x49a427(0x18d)](a19_0x49a427(0x1b9),adminController[a19_0x49a427(0x186)]),router[a19_0x49a427(0x1b7)]('/payout',(0x0,validation_1[a19_0x49a427(0x1c2)])(validation_1[a19_0x49a427(0x1aa)]),adminController[a19_0x49a427(0x199)]),router[a19_0x49a427(0x18d)](a19_0x49a427(0x166),adminController[a19_0x49a427(0x192)]),router[a19_0x49a427(0x18d)](a19_0x49a427(0x182),adminController[a19_0x49a427(0x1c6)]),router[a19_0x49a427(0x1b2)]('/payouts/:id',adminController[a19_0x49a427(0x16b)]),router['get'](a19_0x49a427(0x1b1),adminController[a19_0x49a427(0x172)]),router[a19_0x49a427(0x18d)](a19_0x49a427(0x1a0),adminController['getPaymentById']),router[a19_0x49a427(0x17e)](a19_0x49a427(0x1a0),adminController[a19_0x49a427(0x17b)]),router['put'](a19_0x49a427(0x18a),(0x0,validation_1[a19_0x49a427(0x1c2)])(validation_1['updateCustomerDataSchema']),adminController[a19_0x49a427(0x1be)]),router[a19_0x49a427(0x18d)](a19_0x49a427(0x19e),adminController[a19_0x49a427(0x184)]),router[a19_0x49a427(0x18d)]('/users/:id',adminController['getUserById']),router[a19_0x49a427(0x1b7)](a19_0x49a427(0x19e),(0x0,validation_1[a19_0x49a427(0x1c2)])(validation_1['createUserSchema']),adminController[a19_0x49a427(0x187)]),router['put'](a19_0x49a427(0x1b0),(0x0,validation_1[a19_0x49a427(0x1c2)])(validation_1[a19_0x49a427(0x178)]),adminController[a19_0x49a427(0x18e)]),router[a19_0x49a427(0x1b2)](a19_0x49a427(0x1b0),adminController[a19_0x49a427(0x1c8)]),router['post'](a19_0x49a427(0x1c7),adminController['suspendUser']),router[a19_0x49a427(0x1b7)](a19_0x49a427(0x1a3),adminController['activateUser']),router[a19_0x49a427(0x18d)](a19_0x49a427(0x1b4),(_0x227a8c,_0x523807)=>{const _0x32b394=a19_0x49a427;try{const _0x2af656=loggerService_1[_0x32b394(0x18f)][_0x32b394(0x190)]();_0x523807[_0x32b394(0x16d)]({'success':!![],'result':_0x2af656});}catch(_0x3af756){_0x523807['status'](0x1f4)['json']({'success':![],'message':_0x32b394(0x176)});}}),router[a19_0x49a427(0x1b7)]('/logs/clean',(_0x4112c8,_0x5d47b1)=>{const _0x13d892=a19_0x49a427;try{const {daysToKeep:daysToKeep=0x1e}=_0x4112c8[_0x13d892(0x183)];loggerService_1['loggerService'][_0x13d892(0x16f)](daysToKeep),_0x5d47b1[_0x13d892(0x16d)]({'success':!![],'message':_0x13d892(0x19f)+daysToKeep+_0x13d892(0x171)});}catch(_0x1f3dc6){_0x5d47b1[_0x13d892(0x1b3)](0x1f4)[_0x13d892(0x16d)]({'success':![],'message':_0x13d892(0x1c3)});}}),router['post'](a19_0x49a427(0x17f),async(_0x264115,_0x5ba2ff)=>{const _0x25277f=a19_0x49a427;try{const {paymentId:_0x486486}=_0x264115[_0x25277f(0x19a)];console[_0x25277f(0x1ab)](_0x25277f(0x1a7)+_0x486486),await coinToPayStatusService_1['coinToPayStatusService'][_0x25277f(0x167)](_0x486486),_0x5ba2ff[_0x25277f(0x16d)]({'success':!![],'message':_0x25277f(0x1c9)});}catch(_0x1d2723){console[_0x25277f(0x170)](_0x25277f(0x179)+_0x264115[_0x25277f(0x19a)]['paymentId']+':',_0x1d2723),_0x5ba2ff[_0x25277f(0x1b3)](0x1f4)[_0x25277f(0x16d)]({'success':![],'message':_0x1d2723 instanceof Error?_0x1d2723['message']:_0x25277f(0x1a1)});}}),router[a19_0x49a427(0x18d)](a19_0x49a427(0x1ba),(_0x4fda54,_0x340f6f)=>{const _0x11ad2e=a19_0x49a427;try{const _0x33fc0d=coinToPayStatusService_1[_0x11ad2e(0x163)]['getServiceStats']();_0x340f6f[_0x11ad2e(0x16d)]({'success':!![],'result':{..._0x33fc0d,'description':'CoinToPay\x20automatic\x20status\x20checking\x20service','statusMapping':{'Paid':_0x11ad2e(0x175),'Awaiting\x20Fiat':'PENDING','waiting':_0x11ad2e(0x177),'expired':_0x11ad2e(0x1a2),'failed':_0x11ad2e(0x168)},'autoExpiryNote':'Payments\x20automatically\x20expire\x20after\x20'+_0x33fc0d[_0x11ad2e(0x19c)]+_0x11ad2e(0x16e),'individualTimersNote':_0x11ad2e(0x1ac)}});}catch(_0xb6b8b4){_0x340f6f[_0x11ad2e(0x1b3)](0x1f4)[_0x11ad2e(0x16d)]({'success':![],'message':'Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics'});}}),router[a19_0x49a427(0x18d)]('/cointopay/payment/:paymentId',async(_0x5ed3c5,_0x12d2eb)=>{const _0x36d58d=a19_0x49a427;try{const {paymentId:_0x2b263c}=_0x5ed3c5[_0x36d58d(0x19a)],_0x31cb39=coinToPayStatusService_1[_0x36d58d(0x163)][_0x36d58d(0x1af)](_0x2b263c),_0x2c6aec=(await Promise[_0x36d58d(0x1bc)]()[_0x36d58d(0x160)](()=>__importStar(require(_0x36d58d(0x198)))))[_0x36d58d(0x193)],_0x22576a=await _0x2c6aec['payment'][_0x36d58d(0x1d0)]({'where':{'id':_0x2b263c},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x22576a)return _0x12d2eb['status'](0x194)[_0x36d58d(0x16d)]({'success':![],'message':_0x36d58d(0x17a)});_0x12d2eb[_0x36d58d(0x16d)]({'success':!![],'result':{'payment':{'id':_0x22576a['id'],'gateway':_0x22576a[_0x36d58d(0x185)],'gatewayPaymentId':_0x22576a[_0x36d58d(0x17d)],'status':_0x22576a['status'],'amount':_0x22576a[_0x36d58d(0x195)],'currency':_0x22576a[_0x36d58d(0x1a9)],'createdAt':_0x22576a[_0x36d58d(0x194)],'updatedAt':_0x22576a[_0x36d58d(0x180)],'shop':_0x22576a['shop']},'timers':_0x31cb39,'isCoinToPay':_0x22576a[_0x36d58d(0x185)]===_0x36d58d(0x161),'ageInMinutes':Math[_0x36d58d(0x162)]((Date['now']()-_0x22576a[_0x36d58d(0x194)][_0x36d58d(0x15f)]())/(0x3e8*0x3c))}});}catch(_0x22fbc4){_0x12d2eb[_0x36d58d(0x1b3)](0x1f4)[_0x36d58d(0x16d)]({'success':![],'message':_0x22fbc4 instanceof Error?_0x22fbc4['message']:_0x36d58d(0x15e)});}}),router['get'](a19_0x49a427(0x174),(_0x5f1907,_0x2638ac)=>{const _0x49188e=a19_0x49a427;try{const _0x585726=domainMonitoringService_1[_0x49188e(0x1a8)]['getMonitoringStats']();_0x2638ac[_0x49188e(0x16d)]({'success':!![],'result':{..._0x585726,'description':_0x49188e(0x173),'behavior':'Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','encoding':'Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs'}});}catch(_0x34be05){_0x2638ac[_0x49188e(0x1b3)](0x1f4)['json']({'success':![],'message':'Failed\x20to\x20get\x20domain\x20monitoring\x20statistics'});}}),router[a19_0x49a427(0x1b7)]('/domain-monitoring/check',async(_0x5174e3,_0x22fad5)=>{const _0x33a0b2=a19_0x49a427;try{const _0x2a7648=await domainMonitoringService_1[_0x33a0b2(0x1a8)][_0x33a0b2(0x188)]();_0x22fad5['json']({'success':!![],'result':{'domainAvailable':_0x2a7648,'message':_0x2a7648?_0x33a0b2(0x197):_0x33a0b2(0x1ae),'timestamp':new Date()['toISOString']()}});}catch(_0x5c0498){_0x22fad5[_0x33a0b2(0x1b3)](0x1f4)[_0x33a0b2(0x16d)]({'success':![],'message':_0x5c0498 instanceof Error?_0x5c0498[_0x33a0b2(0x181)]:_0x33a0b2(0x1b6)});}}),exports[a19_0x49a427(0x193)]=router;function a19_0x5699(){const _0x205b74=['getLogStats','../services/domainMonitoringService','getPayouts','default','createdAt','amount','../middleware/auth','Domain\x20is\x20responding\x20correctly','../config/database','createPayout','params','../controllers/adminController','expiryDays','9coFatB','/users','Old\x20logs\x20cleaned\x20(kept\x20last\x20','/payments/:id','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','EXPIRED','/users/:id/activate','call','21svuoZl','defineProperty','🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','domainMonitoringService','currency','createPayoutSchema','log','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','__esModule','Domain\x20check\x20failed','getPaymentTimerInfo','/users/:id','/payments','delete','status','/logs/stats','/merchant-statistics','Failed\x20to\x20perform\x20manual\x20domain\x20check','post','__setModuleDefault','/merchants/selection','/cointopay/stats','/payout/stats','resolve','writable','updateCustomerData','1036280jjWwwc','431190zLwReb','checkAuth','validate','Failed\x20to\x20clean\x20old\x20logs','Router','getMerchantStatistics','getPayoutById','/users/:id/suspend','deleteUser','CoinToPay\x20payment\x20status\x20checked\x20successfully','/payout/merchants','getStatistics','configurable','create','131280ptcMAb','../services/loggerService','findUnique','requireAdmin','674724AkSGUS','/statistics','length','__importStar','2043490ZvewQW','Failed\x20to\x20get\x20payment\x20information','getTime','then','cointopay','floor','coinToPayStatusService','AdminController','1535kpQRId','/payouts','checkPaymentById','FAILED','use','2AtierF','deletePayout','getOwnPropertyNames','json','\x20days\x20if\x20not\x20paid','cleanOldLogs','error','\x20days)','getPayments','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','/domain-monitoring/stats','PAID','Failed\x20to\x20get\x20log\x20statistics','PENDING','updateUserSchema','❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','Payment\x20not\x20found','updatePayment','/auth','gatewayPaymentId','put','/cointopay/check/:paymentId','updatedAt','message','/payouts/:id','body','getUsers','gateway','getMerchantsSelection','createUser','manualCheck','8upEcyx','/payments/:id/customer','33iQtpLb','12015nzxSWd','get','updateUser','loggerService'];a19_0x5699=function(){return _0x205b74;};return a19_0x5699();}