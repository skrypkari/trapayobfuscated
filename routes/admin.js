'use strict';const a24_0x7e952e=a24_0x1a19;(function(_0x485533,_0xcabe33){const _0x1603f1=a24_0x1a19,_0x5d20ed=_0x485533();while(!![]){try{const _0x51d3e4=-parseInt(_0x1603f1(0x17e))/0x1*(-parseInt(_0x1603f1(0x195))/0x2)+-parseInt(_0x1603f1(0x14f))/0x3+parseInt(_0x1603f1(0x1ac))/0x4+-parseInt(_0x1603f1(0x17b))/0x5+-parseInt(_0x1603f1(0x171))/0x6*(parseInt(_0x1603f1(0x17a))/0x7)+-parseInt(_0x1603f1(0x144))/0x8*(-parseInt(_0x1603f1(0x173))/0x9)+-parseInt(_0x1603f1(0x16f))/0xa*(-parseInt(_0x1603f1(0x18c))/0xb);if(_0x51d3e4===_0xcabe33)break;else _0x5d20ed['push'](_0x5d20ed['shift']());}catch(_0x5dc599){_0x5d20ed['push'](_0x5d20ed['shift']());}}}(a24_0x4da9,0xbeea8));function a24_0x4da9(){const _0x3ecc8d=['amount','AdminController','getUserById','/cointopay/payment/:paymentId','getLogStats','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','/payments/cleanup-pending','use','141632evtaPo','loggerService','checkPaymentById','/merchants/selection','Failed\x20to\x20perform\x20manual\x20domain\x20check','domainMonitoringService','getMerchantStatistics','/users/:id/activate','toISOString','getPaymentTimerInfo','manualCheck','1278435WEVYLZ','/users/:id','express','createUserSchema','/cointopay/stats','params','Failed\x20to\x20get\x20log\x20statistics','cleanOldLogs','Failed\x20to\x20clean\x20old\x20logs','getPayoutById','../services/coinToPayStatusService','Failed\x20to\x20get\x20payment\x20information','cleanupStalePendingPayments','updatePayment','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','default','deletePayout','get','/payments/cleanup','length','coinToPayStatusService','/payout','/payments/cleanup-with-report','cleanupStalePaymentsWithReport','getPayouts','delete','cointopay','currency','\x20days\x20if\x20not\x20paid','Payments\x20automatically\x20expire\x20after\x20','../services/loggerService','create','40qXOvTz','hasOwnProperty','1764eUNIYX','PAID','72aoLofc','updateCustomerDataSchema','/users','body','paymentId','defineProperty','__createBinding','35567ZMYWZp','1898605AKPfNm','../middleware/validation','updateUser','389OmddNB','getTime','__setModuleDefault','json','getOwnPropertyNames','__esModule','status','prototype','suspendUser','PENDING','FAILED','/domain-monitoring/check','getMerchantsAwaitingPayout','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','2129831Vwqoft','\x20days)','call','../controllers/adminController','createPayoutSchema','Old\x20logs\x20cleaned\x20(kept\x20last\x20','put','shop','gateway','3630WjDxMN','Domain\x20check\x20failed','/payout/stats','__importStar','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','gatewayPaymentId','getUsers','updateCustomerData','getPayments','Domain\x20is\x20responding\x20correctly','getServiceStats','CoinToPay\x20automatic\x20status\x20checking\x20service','authenticateToken','validate','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','/statistics','/payments','post','createdAt','/payments/:id','message','../services/domainMonitoringService','payment','5838084cISyAs','writable','/merchant-statistics','updatedAt','expiryDays','getMerchantsSelection','getMonitoringStats','requireAdmin','now','/domain-monitoring/stats'];a24_0x4da9=function(){return _0x3ecc8d;};return a24_0x4da9();}function a24_0x1a19(_0x3458e4,_0x33037f){_0x3458e4=_0x3458e4-0x13d;const _0x4da98f=a24_0x4da9();let _0x1a19ec=_0x4da98f[_0x3458e4];return _0x1a19ec;}var __createBinding=this&&this[a24_0x7e952e(0x179)]||(Object['create']?function(_0x17d556,_0x1ae3c0,_0xe025b0,_0x3d0013){const _0x49156f=a24_0x7e952e;if(_0x3d0013===undefined)_0x3d0013=_0xe025b0;var _0xaca1c7=Object['getOwnPropertyDescriptor'](_0x1ae3c0,_0xe025b0);(!_0xaca1c7||('get'in _0xaca1c7?!_0x1ae3c0['__esModule']:_0xaca1c7[_0x49156f(0x1ad)]||_0xaca1c7['configurable']))&&(_0xaca1c7={'enumerable':!![],'get':function(){return _0x1ae3c0[_0xe025b0];}}),Object[_0x49156f(0x178)](_0x17d556,_0x3d0013,_0xaca1c7);}:function(_0x47acb7,_0x5338a6,_0x47ed67,_0x432d11){if(_0x432d11===undefined)_0x432d11=_0x47ed67;_0x47acb7[_0x432d11]=_0x5338a6[_0x47ed67];}),__setModuleDefault=this&&this[a24_0x7e952e(0x180)]||(Object[a24_0x7e952e(0x16e)]?function(_0x3455fd,_0x443705){const _0x1355af=a24_0x7e952e;Object['defineProperty'](_0x3455fd,_0x1355af(0x15e),{'enumerable':!![],'value':_0x443705});}:function(_0x217eb3,_0x3ebeee){const _0x464b4a=a24_0x7e952e;_0x217eb3[_0x464b4a(0x15e)]=_0x3ebeee;}),__importStar=this&&this[a24_0x7e952e(0x198)]||(function(){var _0x4bba0d=function(_0x2f0a0c){const _0x2896ff=a24_0x1a19;return _0x4bba0d=Object[_0x2896ff(0x182)]||function(_0x99bdee){const _0x4a201d=_0x2896ff;var _0x95697a=[];for(var _0x324810 in _0x99bdee)if(Object[_0x4a201d(0x185)][_0x4a201d(0x170)][_0x4a201d(0x18e)](_0x99bdee,_0x324810))_0x95697a[_0x95697a['length']]=_0x324810;return _0x95697a;},_0x4bba0d(_0x2f0a0c);};return function(_0x17d040){const _0x17c646=a24_0x1a19;if(_0x17d040&&_0x17d040[_0x17c646(0x183)])return _0x17d040;var _0x295a7e={};if(_0x17d040!=null){for(var _0x3dc825=_0x4bba0d(_0x17d040),_0x3571b2=0x0;_0x3571b2<_0x3dc825[_0x17c646(0x162)];_0x3571b2++)if(_0x3dc825[_0x3571b2]!==_0x17c646(0x15e))__createBinding(_0x295a7e,_0x17d040,_0x3dc825[_0x3571b2]);}return __setModuleDefault(_0x295a7e,_0x17d040),_0x295a7e;};}());Object[a24_0x7e952e(0x178)](exports,'__esModule',{'value':!![]});const express_1=require(a24_0x7e952e(0x151)),adminController_1=require(a24_0x7e952e(0x18f)),validation_1=require(a24_0x7e952e(0x17c)),auth_1=require('../middleware/auth'),loggerService_1=require(a24_0x7e952e(0x16d)),coinToPayStatusService_1=require(a24_0x7e952e(0x159)),domainMonitoringService_1=require(a24_0x7e952e(0x1aa)),router=(0x0,express_1['Router'])(),adminController=new adminController_1[(a24_0x7e952e(0x13d))]();router[a24_0x7e952e(0x143)](auth_1[a24_0x7e952e(0x1a1)],auth_1[a24_0x7e952e(0x1b3)]),router[a24_0x7e952e(0x160)]('/auth',adminController['checkAuth']),router['get'](a24_0x7e952e(0x1a4),adminController['getStatistics']),router['get'](a24_0x7e952e(0x1ae),adminController[a24_0x7e952e(0x14a)]),router['get'](a24_0x7e952e(0x197),adminController['getPayoutStats']),router['get']('/payout/merchants',adminController[a24_0x7e952e(0x18a)]),router['get'](a24_0x7e952e(0x147),adminController[a24_0x7e952e(0x1b1)]),router[a24_0x7e952e(0x1a6)](a24_0x7e952e(0x164),(0x0,validation_1[a24_0x7e952e(0x1a2)])(validation_1[a24_0x7e952e(0x190)]),adminController['createPayout']),router[a24_0x7e952e(0x160)]('/payouts',adminController[a24_0x7e952e(0x167)]),router['get']('/payouts/:id',adminController[a24_0x7e952e(0x158)]),router[a24_0x7e952e(0x168)]('/payouts/:id',adminController[a24_0x7e952e(0x15f)]),router[a24_0x7e952e(0x160)](a24_0x7e952e(0x1a5),adminController[a24_0x7e952e(0x19d)]),router[a24_0x7e952e(0x160)](a24_0x7e952e(0x1a8),adminController['getPaymentById']),router[a24_0x7e952e(0x192)](a24_0x7e952e(0x1a8),adminController[a24_0x7e952e(0x15c)]),router['put']('/payments/:id/customer',(0x0,validation_1[a24_0x7e952e(0x1a2)])(validation_1[a24_0x7e952e(0x174)]),adminController[a24_0x7e952e(0x19c)]),router['get']('/payments/processing-stats',adminController['getProcessingPaymentsStats']),router['post'](a24_0x7e952e(0x161),adminController['cleanupStalePayments']),router[a24_0x7e952e(0x1a6)](a24_0x7e952e(0x142),adminController[a24_0x7e952e(0x15b)]),router[a24_0x7e952e(0x1a6)](a24_0x7e952e(0x165),adminController[a24_0x7e952e(0x166)]),router[a24_0x7e952e(0x160)](a24_0x7e952e(0x175),adminController[a24_0x7e952e(0x19b)]),router[a24_0x7e952e(0x160)](a24_0x7e952e(0x150),adminController[a24_0x7e952e(0x13e)]),router[a24_0x7e952e(0x1a6)](a24_0x7e952e(0x175),(0x0,validation_1['validate'])(validation_1[a24_0x7e952e(0x152)]),adminController['createUser']),router[a24_0x7e952e(0x192)]('/users/:id',(0x0,validation_1['validate'])(validation_1['updateUserSchema']),adminController[a24_0x7e952e(0x17d)]),router[a24_0x7e952e(0x168)](a24_0x7e952e(0x150),adminController['deleteUser']),router[a24_0x7e952e(0x1a6)]('/users/:id/suspend',adminController[a24_0x7e952e(0x186)]),router[a24_0x7e952e(0x1a6)](a24_0x7e952e(0x14b),adminController['activateUser']),router[a24_0x7e952e(0x160)]('/logs/stats',(_0x5d2c21,_0x3ea01f)=>{const _0x4e4628=a24_0x7e952e;try{const _0x33ec9c=loggerService_1[_0x4e4628(0x145)][_0x4e4628(0x140)]();_0x3ea01f[_0x4e4628(0x181)]({'success':!![],'result':_0x33ec9c});}catch(_0x11e7c3){_0x3ea01f['status'](0x1f4)[_0x4e4628(0x181)]({'success':![],'message':_0x4e4628(0x155)});}}),router[a24_0x7e952e(0x1a6)]('/logs/clean',(_0x4fb474,_0x2f1ef5)=>{const _0x3ee3df=a24_0x7e952e;try{const {daysToKeep:daysToKeep=0x1e}=_0x4fb474[_0x3ee3df(0x176)];loggerService_1['loggerService'][_0x3ee3df(0x156)](daysToKeep),_0x2f1ef5['json']({'success':!![],'message':_0x3ee3df(0x191)+daysToKeep+_0x3ee3df(0x18d)});}catch(_0x5f0540){_0x2f1ef5[_0x3ee3df(0x184)](0x1f4)[_0x3ee3df(0x181)]({'success':![],'message':_0x3ee3df(0x157)});}}),router[a24_0x7e952e(0x1a6)]('/cointopay/check/:paymentId',async(_0x46d7ab,_0x24961f)=>{const _0x51c0a7=a24_0x7e952e;try{const {paymentId:_0x5ac3cd}=_0x46d7ab[_0x51c0a7(0x154)];console['log']('üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20'+_0x5ac3cd),await coinToPayStatusService_1[_0x51c0a7(0x163)][_0x51c0a7(0x146)](_0x5ac3cd),_0x24961f['json']({'success':!![],'message':'CoinToPay\x20payment\x20status\x20checked\x20successfully'});}catch(_0x1cdb39){console['error'](_0x51c0a7(0x15d)+_0x46d7ab[_0x51c0a7(0x154)][_0x51c0a7(0x177)]+':',_0x1cdb39),_0x24961f[_0x51c0a7(0x184)](0x1f4)[_0x51c0a7(0x181)]({'success':![],'message':_0x1cdb39 instanceof Error?_0x1cdb39[_0x51c0a7(0x1a9)]:_0x51c0a7(0x141)});}}),router[a24_0x7e952e(0x160)](a24_0x7e952e(0x153),(_0x1a4183,_0x15bb56)=>{const _0x12441f=a24_0x7e952e;try{const _0x1bc191=coinToPayStatusService_1['coinToPayStatusService'][_0x12441f(0x19f)]();_0x15bb56['json']({'success':!![],'result':{..._0x1bc191,'description':_0x12441f(0x1a0),'statusMapping':{'Paid':_0x12441f(0x172),'Awaiting\x20Fiat':_0x12441f(0x187),'waiting':_0x12441f(0x187),'expired':'EXPIRED','failed':_0x12441f(0x188)},'autoExpiryNote':_0x12441f(0x16c)+_0x1bc191[_0x12441f(0x1b0)]+_0x12441f(0x16b),'individualTimersNote':_0x12441f(0x1a3)}});}catch(_0x57c4f2){_0x15bb56[_0x12441f(0x184)](0x1f4)['json']({'success':![],'message':'Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics'});}}),router[a24_0x7e952e(0x160)](a24_0x7e952e(0x13f),async(_0x2d0363,_0x11be1b)=>{const _0x2371df=a24_0x7e952e;try{const {paymentId:_0x4ee90a}=_0x2d0363[_0x2371df(0x154)],_0x447051=coinToPayStatusService_1[_0x2371df(0x163)][_0x2371df(0x14d)](_0x4ee90a),_0x2b3f0e=(await Promise['resolve']()['then'](()=>__importStar(require('../config/database'))))[_0x2371df(0x15e)],_0x2a1399=await _0x2b3f0e[_0x2371df(0x1ab)]['findUnique']({'where':{'id':_0x4ee90a},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x2a1399)return _0x11be1b[_0x2371df(0x184)](0x194)[_0x2371df(0x181)]({'success':![],'message':'Payment\x20not\x20found'});_0x11be1b[_0x2371df(0x181)]({'success':!![],'result':{'payment':{'id':_0x2a1399['id'],'gateway':_0x2a1399[_0x2371df(0x194)],'gatewayPaymentId':_0x2a1399[_0x2371df(0x19a)],'status':_0x2a1399[_0x2371df(0x184)],'amount':_0x2a1399[_0x2371df(0x1b6)],'currency':_0x2a1399[_0x2371df(0x16a)],'createdAt':_0x2a1399['createdAt'],'updatedAt':_0x2a1399[_0x2371df(0x1af)],'shop':_0x2a1399[_0x2371df(0x193)]},'timers':_0x447051,'isCoinToPay':_0x2a1399[_0x2371df(0x194)]===_0x2371df(0x169),'ageInMinutes':Math['floor']((Date[_0x2371df(0x1b4)]()-_0x2a1399[_0x2371df(0x1a7)][_0x2371df(0x17f)]())/(0x3e8*0x3c))}});}catch(_0x58fd8c){_0x11be1b[_0x2371df(0x184)](0x1f4)[_0x2371df(0x181)]({'success':![],'message':_0x58fd8c instanceof Error?_0x58fd8c[_0x2371df(0x1a9)]:_0x2371df(0x15a)});}}),router['get'](a24_0x7e952e(0x1b5),(_0x4e99ae,_0x278c79)=>{const _0x3bce54=a24_0x7e952e;try{const _0x1d4004=domainMonitoringService_1[_0x3bce54(0x149)][_0x3bce54(0x1b2)]();_0x278c79[_0x3bce54(0x181)]({'success':!![],'result':{..._0x1d4004,'description':'Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','behavior':'Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','encoding':_0x3bce54(0x18b)}});}catch(_0x50dc68){_0x278c79['status'](0x1f4)['json']({'success':![],'message':_0x3bce54(0x199)});}}),router[a24_0x7e952e(0x1a6)](a24_0x7e952e(0x189),async(_0x514b55,_0x164faf)=>{const _0x23ccd1=a24_0x7e952e;try{const _0x34e362=await domainMonitoringService_1[_0x23ccd1(0x149)][_0x23ccd1(0x14e)]();_0x164faf['json']({'success':!![],'result':{'domainAvailable':_0x34e362,'message':_0x34e362?_0x23ccd1(0x19e):_0x23ccd1(0x196),'timestamp':new Date()[_0x23ccd1(0x14c)]()}});}catch(_0x202a48){_0x164faf[_0x23ccd1(0x184)](0x1f4)[_0x23ccd1(0x181)]({'success':![],'message':_0x202a48 instanceof Error?_0x202a48['message']:_0x23ccd1(0x148)});}}),exports[a24_0x7e952e(0x15e)]=router;