'use strict';const a19_0x5f07d8=a19_0xd819;(function(_0x586ced,_0x327402){const _0x45281e=a19_0xd819,_0x3aee8c=_0x586ced();while(!![]){try{const _0x35996e=-parseInt(_0x45281e(0x126))/0x1+parseInt(_0x45281e(0xe8))/0x2*(parseInt(_0x45281e(0x107))/0x3)+parseInt(_0x45281e(0xc4))/0x4+-parseInt(_0x45281e(0x115))/0x5*(-parseInt(_0x45281e(0xda))/0x6)+-parseInt(_0x45281e(0xd5))/0x7+parseInt(_0x45281e(0xc3))/0x8*(-parseInt(_0x45281e(0xc0))/0x9)+parseInt(_0x45281e(0xb5))/0xa;if(_0x35996e===_0x327402)break;else _0x3aee8c['push'](_0x3aee8c['shift']());}catch(_0x9a44fd){_0x3aee8c['push'](_0x3aee8c['shift']());}}}(a19_0x12f0,0xdb2f5));function a19_0xd819(_0xfdf2c9,_0x1fcd05){const _0x12f0c4=a19_0x12f0();return a19_0xd819=function(_0xd819c8,_0x49ffbd){_0xd819c8=_0xd819c8-0xb1;let _0x1570a9=_0x12f0c4[_0xd819c8];return _0x1570a9;},a19_0xd819(_0xfdf2c9,_0x1fcd05);}var __createBinding=this&&this[a19_0x5f07d8(0xbd)]||(Object[a19_0x5f07d8(0xcd)]?function(_0x382163,_0x4705c4,_0x1830db,_0x295a2c){const _0x5a4b01=a19_0x5f07d8;if(_0x295a2c===undefined)_0x295a2c=_0x1830db;var _0x534b2a=Object[_0x5a4b01(0x12b)](_0x4705c4,_0x1830db);(!_0x534b2a||(_0x5a4b01(0x120)in _0x534b2a?!_0x4705c4[_0x5a4b01(0xd2)]:_0x534b2a[_0x5a4b01(0xb7)]||_0x534b2a[_0x5a4b01(0x109)]))&&(_0x534b2a={'enumerable':!![],'get':function(){return _0x4705c4[_0x1830db];}}),Object[_0x5a4b01(0xb4)](_0x382163,_0x295a2c,_0x534b2a);}:function(_0x53883e,_0x1f1556,_0x55f707,_0xe22ef5){if(_0xe22ef5===undefined)_0xe22ef5=_0x55f707;_0x53883e[_0xe22ef5]=_0x1f1556[_0x55f707];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object['create']?function(_0x3a5e84,_0x2feb48){const _0x647026=a19_0x5f07d8;Object[_0x647026(0xb4)](_0x3a5e84,_0x647026(0xf5),{'enumerable':!![],'value':_0x2feb48});}:function(_0x5effda,_0x5ed05a){const _0x42f298=a19_0x5f07d8;_0x5effda[_0x42f298(0xf5)]=_0x5ed05a;}),__importStar=this&&this[a19_0x5f07d8(0xe4)]||(function(){var _0x95ac89=function(_0x127209){const _0x6580d8=a19_0xd819;return _0x95ac89=Object[_0x6580d8(0x10c)]||function(_0x5a776c){const _0x9a04c0=_0x6580d8;var _0xa6795f=[];for(var _0x33c544 in _0x5a776c)if(Object['prototype'][_0x9a04c0(0xc1)][_0x9a04c0(0xbb)](_0x5a776c,_0x33c544))_0xa6795f[_0xa6795f['length']]=_0x33c544;return _0xa6795f;},_0x95ac89(_0x127209);};return function(_0x1a7972){const _0x59579a=a19_0xd819;if(_0x1a7972&&_0x1a7972['__esModule'])return _0x1a7972;var _0x470d3d={};if(_0x1a7972!=null){for(var _0x2bc5ee=_0x95ac89(_0x1a7972),_0xe79868=0x0;_0xe79868<_0x2bc5ee[_0x59579a(0x11a)];_0xe79868++)if(_0x2bc5ee[_0xe79868]!=='default')__createBinding(_0x470d3d,_0x1a7972,_0x2bc5ee[_0xe79868]);}return __setModuleDefault(_0x470d3d,_0x1a7972),_0x470d3d;};}());Object[a19_0x5f07d8(0xb4)](exports,a19_0x5f07d8(0xd2),{'value':!![]});const express_1=require('express'),adminController_1=require(a19_0x5f07d8(0xfa)),validation_1=require('../middleware/validation'),auth_1=require(a19_0x5f07d8(0xc6)),loggerService_1=require(a19_0x5f07d8(0xca)),coinToPayStatusService_1=require(a19_0x5f07d8(0xfd)),domainMonitoringService_1=require('../services/domainMonitoringService'),router=(0x0,express_1['Router'])(),adminController=new adminController_1['AdminController']();function a19_0x12f0(){const _0x178892=['\x20days)','gateway','/payouts','domainMonitoringService','default','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','put','EXPIRED','message','../controllers/adminController','expiryDays','getLogStats','../services/coinToPayStatusService','delete','createUserSchema','getStatistics','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','Old\x20logs\x20cleaned\x20(kept\x20last\x20','deletePayout','deleteUser','/users/:id/suspend','getMerchantsAwaitingPayout','2470245XqDCsb','\x20days\x20if\x20not\x20paid','configurable','/payout','/domain-monitoring/check','getOwnPropertyNames','updateCustomerData','Payment\x20not\x20found','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','updatePayment','updateCustomerDataSchema','PAID','createdAt','manualCheck','8018845YoMOuS','findUnique','getMerchantsSelection','floor','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','length','/payouts/:id','checkPaymentById','getPayouts','use','shop','get','❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','coinToPayStatusService','amount','getPaymentTimerInfo','updatedAt','975087eCfaEV','gatewayPaymentId','/users/:id/activate','params','/users','getOwnPropertyDescriptor','/logs/clean','resolve','/statistics','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','body','defineProperty','9376110DOsGKC','cleanOldLogs','writable','/payments/:id/customer','currency','json','call','Domain\x20check\x20failed','__createBinding','updateUser','/cointopay/payment/:paymentId','1854YpGMiT','hasOwnProperty','FAILED','2240ozLqiz','749500vpUben','requireAdmin','../middleware/auth','/merchant-statistics','getPayoutStats','../config/database','../services/loggerService','updateUserSchema','Failed\x20to\x20get\x20log\x20statistics','create','status','Failed\x20to\x20clean\x20old\x20logs','🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','/payments/:id','__esModule','getMonitoringStats','now','11351354JwurgU','PENDING','Domain\x20is\x20responding\x20correctly','post','error','6VrtmQa','payment','suspendUser','validate','checkAuth','Payments\x20automatically\x20expire\x20after\x20','toISOString','paymentId','/logs/stats','getPayoutById','__importStar','/payout/stats','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','loggerService','2AWTfGw','/users/:id','/domain-monitoring/stats','createPayoutSchema','getMerchantStatistics','activateUser','/payments','CoinToPay\x20payment\x20status\x20checked\x20successfully','createPayout'];a19_0x12f0=function(){return _0x178892;};return a19_0x12f0();}router[a19_0x5f07d8(0x11e)](auth_1['authenticateToken'],auth_1[a19_0x5f07d8(0xc5)]),router[a19_0x5f07d8(0x120)]('/auth',adminController[a19_0x5f07d8(0xde)]),router[a19_0x5f07d8(0x120)](a19_0x5f07d8(0xb1),adminController[a19_0x5f07d8(0x100)]),router['get'](a19_0x5f07d8(0xc7),adminController[a19_0x5f07d8(0xec)]),router[a19_0x5f07d8(0x120)](a19_0x5f07d8(0xe5),adminController[a19_0x5f07d8(0xc8)]),router['get']('/payout/merchants',adminController[a19_0x5f07d8(0x106)]),router['get']('/merchants/selection',adminController[a19_0x5f07d8(0x117)]),router['post'](a19_0x5f07d8(0x10a),(0x0,validation_1[a19_0x5f07d8(0xdd)])(validation_1[a19_0x5f07d8(0xeb)]),adminController[a19_0x5f07d8(0xf0)]),router['get'](a19_0x5f07d8(0xf3),adminController[a19_0x5f07d8(0x11d)]),router['get'](a19_0x5f07d8(0x11b),adminController[a19_0x5f07d8(0xe3)]),router['delete'](a19_0x5f07d8(0x11b),adminController[a19_0x5f07d8(0x103)]),router[a19_0x5f07d8(0x120)](a19_0x5f07d8(0xee),adminController['getPayments']),router[a19_0x5f07d8(0x120)](a19_0x5f07d8(0xd1),adminController['getPaymentById']),router[a19_0x5f07d8(0xf7)]('/payments/:id',adminController[a19_0x5f07d8(0x110)]),router[a19_0x5f07d8(0xf7)](a19_0x5f07d8(0xb8),(0x0,validation_1[a19_0x5f07d8(0xdd)])(validation_1[a19_0x5f07d8(0x111)]),adminController[a19_0x5f07d8(0x10d)]),router[a19_0x5f07d8(0x120)](a19_0x5f07d8(0x12a),adminController['getUsers']),router[a19_0x5f07d8(0x120)](a19_0x5f07d8(0xe9),adminController['getUserById']),router[a19_0x5f07d8(0xd8)](a19_0x5f07d8(0x12a),(0x0,validation_1[a19_0x5f07d8(0xdd)])(validation_1[a19_0x5f07d8(0xff)]),adminController['createUser']),router[a19_0x5f07d8(0xf7)](a19_0x5f07d8(0xe9),(0x0,validation_1[a19_0x5f07d8(0xdd)])(validation_1[a19_0x5f07d8(0xcb)]),adminController[a19_0x5f07d8(0xbe)]),router[a19_0x5f07d8(0xfe)](a19_0x5f07d8(0xe9),adminController[a19_0x5f07d8(0x104)]),router[a19_0x5f07d8(0xd8)](a19_0x5f07d8(0x105),adminController[a19_0x5f07d8(0xdc)]),router[a19_0x5f07d8(0xd8)](a19_0x5f07d8(0x128),adminController[a19_0x5f07d8(0xed)]),router[a19_0x5f07d8(0x120)](a19_0x5f07d8(0xe2),(_0x7d1651,_0x44491d)=>{const _0x49a72e=a19_0x5f07d8;try{const _0x111359=loggerService_1[_0x49a72e(0xe7)][_0x49a72e(0xfc)]();_0x44491d[_0x49a72e(0xba)]({'success':!![],'result':_0x111359});}catch(_0x35d3d2){_0x44491d[_0x49a72e(0xce)](0x1f4)[_0x49a72e(0xba)]({'success':![],'message':_0x49a72e(0xcc)});}}),router['post'](a19_0x5f07d8(0x12c),(_0x19ec12,_0x4f8413)=>{const _0x547320=a19_0x5f07d8;try{const {daysToKeep:daysToKeep=0x1e}=_0x19ec12[_0x547320(0xb3)];loggerService_1[_0x547320(0xe7)][_0x547320(0xb6)](daysToKeep),_0x4f8413['json']({'success':!![],'message':_0x547320(0x102)+daysToKeep+_0x547320(0xf1)});}catch(_0xafe5f7){_0x4f8413['status'](0x1f4)[_0x547320(0xba)]({'success':![],'message':_0x547320(0xcf)});}}),router['post']('/cointopay/check/:paymentId',async(_0x366866,_0x251095)=>{const _0xb8409d=a19_0x5f07d8;try{const {paymentId:_0xdce23d}=_0x366866[_0xb8409d(0x129)];console['log'](_0xb8409d(0xd0)+_0xdce23d),await coinToPayStatusService_1['coinToPayStatusService'][_0xb8409d(0x11c)](_0xdce23d),_0x251095[_0xb8409d(0xba)]({'success':!![],'message':_0xb8409d(0xef)});}catch(_0x314ce2){console[_0xb8409d(0xd9)](_0xb8409d(0x121)+_0x366866[_0xb8409d(0x129)][_0xb8409d(0xe1)]+':',_0x314ce2),_0x251095['status'](0x1f4)[_0xb8409d(0xba)]({'success':![],'message':_0x314ce2 instanceof Error?_0x314ce2[_0xb8409d(0xf9)]:_0xb8409d(0x119)});}}),router[a19_0x5f07d8(0x120)]('/cointopay/stats',(_0x34042b,_0x3a0903)=>{const _0x58c6b1=a19_0x5f07d8;try{const _0x35665b=coinToPayStatusService_1[_0x58c6b1(0x122)]['getServiceStats']();_0x3a0903[_0x58c6b1(0xba)]({'success':!![],'result':{..._0x35665b,'description':'CoinToPay\x20automatic\x20status\x20checking\x20service','statusMapping':{'Paid':_0x58c6b1(0x112),'Awaiting\x20Fiat':'PENDING','waiting':_0x58c6b1(0xd6),'expired':_0x58c6b1(0xf8),'failed':_0x58c6b1(0xc2)},'autoExpiryNote':_0x58c6b1(0xdf)+_0x35665b[_0x58c6b1(0xfb)]+_0x58c6b1(0x108),'individualTimersNote':_0x58c6b1(0x10f)}});}catch(_0x5a2666){_0x3a0903[_0x58c6b1(0xce)](0x1f4)['json']({'success':![],'message':_0x58c6b1(0x101)});}}),router[a19_0x5f07d8(0x120)](a19_0x5f07d8(0xbf),async(_0x5de803,_0x146e2e)=>{const _0x369b56=a19_0x5f07d8;try{const {paymentId:_0x50854a}=_0x5de803[_0x369b56(0x129)],_0x2f5faf=coinToPayStatusService_1[_0x369b56(0x122)][_0x369b56(0x124)](_0x50854a),_0x4d156d=(await Promise[_0x369b56(0x12d)]()['then'](()=>__importStar(require(_0x369b56(0xc9)))))['default'],_0x589645=await _0x4d156d[_0x369b56(0xdb)][_0x369b56(0x116)]({'where':{'id':_0x50854a},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x589645)return _0x146e2e[_0x369b56(0xce)](0x194)['json']({'success':![],'message':_0x369b56(0x10e)});_0x146e2e['json']({'success':!![],'result':{'payment':{'id':_0x589645['id'],'gateway':_0x589645[_0x369b56(0xf2)],'gatewayPaymentId':_0x589645[_0x369b56(0x127)],'status':_0x589645[_0x369b56(0xce)],'amount':_0x589645[_0x369b56(0x123)],'currency':_0x589645[_0x369b56(0xb9)],'createdAt':_0x589645[_0x369b56(0x113)],'updatedAt':_0x589645[_0x369b56(0x125)],'shop':_0x589645[_0x369b56(0x11f)]},'timers':_0x2f5faf,'isCoinToPay':_0x589645[_0x369b56(0xf2)]==='cointopay','ageInMinutes':Math[_0x369b56(0x118)]((Date[_0x369b56(0xd4)]()-_0x589645['createdAt']['getTime']())/(0x3e8*0x3c))}});}catch(_0x4a1fd1){_0x146e2e[_0x369b56(0xce)](0x1f4)[_0x369b56(0xba)]({'success':![],'message':_0x4a1fd1 instanceof Error?_0x4a1fd1[_0x369b56(0xf9)]:'Failed\x20to\x20get\x20payment\x20information'});}}),router['get'](a19_0x5f07d8(0xea),(_0x92997e,_0x4499a4)=>{const _0x34a507=a19_0x5f07d8;try{const _0x4b7ad7=domainMonitoringService_1['domainMonitoringService'][_0x34a507(0xd3)]();_0x4499a4[_0x34a507(0xba)]({'success':!![],'result':{..._0x4b7ad7,'description':_0x34a507(0xb2),'behavior':_0x34a507(0xe6),'encoding':'Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs'}});}catch(_0x1fd1a5){_0x4499a4['status'](0x1f4)['json']({'success':![],'message':_0x34a507(0xf6)});}}),router['post'](a19_0x5f07d8(0x10b),async(_0xdfc58f,_0x41d6ef)=>{const _0x159618=a19_0x5f07d8;try{const _0x4260d1=await domainMonitoringService_1[_0x159618(0xf4)][_0x159618(0x114)]();_0x41d6ef[_0x159618(0xba)]({'success':!![],'result':{'domainAvailable':_0x4260d1,'message':_0x4260d1?_0x159618(0xd7):_0x159618(0xbc),'timestamp':new Date()[_0x159618(0xe0)]()}});}catch(_0x516bd2){_0x41d6ef[_0x159618(0xce)](0x1f4)[_0x159618(0xba)]({'success':![],'message':_0x516bd2 instanceof Error?_0x516bd2[_0x159618(0xf9)]:'Failed\x20to\x20perform\x20manual\x20domain\x20check'});}}),exports[a19_0x5f07d8(0xf5)]=router;