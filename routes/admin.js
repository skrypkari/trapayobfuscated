'use strict';const a19_0x1794af=a19_0x204a;(function(_0x169d81,_0x44b684){const _0x36489e=a19_0x204a,_0x6639f6=_0x169d81();while(!![]){try{const _0x4bfec=-parseInt(_0x36489e(0x240))/0x1+parseInt(_0x36489e(0x1e2))/0x2*(parseInt(_0x36489e(0x233))/0x3)+parseInt(_0x36489e(0x21b))/0x4*(-parseInt(_0x36489e(0x24e))/0x5)+parseInt(_0x36489e(0x253))/0x6+-parseInt(_0x36489e(0x220))/0x7*(parseInt(_0x36489e(0x21e))/0x8)+parseInt(_0x36489e(0x204))/0x9*(-parseInt(_0x36489e(0x258))/0xa)+parseInt(_0x36489e(0x21a))/0xb;if(_0x4bfec===_0x44b684)break;else _0x6639f6['push'](_0x6639f6['shift']());}catch(_0x5b6fa6){_0x6639f6['push'](_0x6639f6['shift']());}}}(a19_0x1df7,0xa2cbb));var __createBinding=this&&this[a19_0x1794af(0x23c)]||(Object[a19_0x1794af(0x24f)]?function(_0x38cbf5,_0x1ad2d1,_0x38455c,_0x38675e){const _0x4cbc74=a19_0x1794af;if(_0x38675e===undefined)_0x38675e=_0x38455c;var _0xb1ad77=Object[_0x4cbc74(0x234)](_0x1ad2d1,_0x38455c);(!_0xb1ad77||(_0x4cbc74(0x222)in _0xb1ad77?!_0x1ad2d1[_0x4cbc74(0x226)]:_0xb1ad77[_0x4cbc74(0x227)]||_0xb1ad77[_0x4cbc74(0x1e6)]))&&(_0xb1ad77={'enumerable':!![],'get':function(){return _0x1ad2d1[_0x38455c];}}),Object[_0x4cbc74(0x1f1)](_0x38cbf5,_0x38675e,_0xb1ad77);}:function(_0x491e09,_0x35ccf4,_0x2637d7,_0x2437d0){if(_0x2437d0===undefined)_0x2437d0=_0x2637d7;_0x491e09[_0x2437d0]=_0x35ccf4[_0x2637d7];}),__setModuleDefault=this&&this[a19_0x1794af(0x1f6)]||(Object[a19_0x1794af(0x24f)]?function(_0x2d4c7a,_0x2028a6){const _0x58e51b=a19_0x1794af;Object[_0x58e51b(0x1f1)](_0x2d4c7a,'default',{'enumerable':!![],'value':_0x2028a6});}:function(_0x3633f7,_0x2faf4b){const _0x44f5d9=a19_0x1794af;_0x3633f7[_0x44f5d9(0x248)]=_0x2faf4b;}),__importStar=this&&this['__importStar']||(function(){var _0x1878da=function(_0x3c9530){const _0xa404a7=a19_0x204a;return _0x1878da=Object[_0xa404a7(0x252)]||function(_0xcb6b75){const _0x44418f=_0xa404a7;var _0x65e5b4=[];for(var _0x29b1e7 in _0xcb6b75)if(Object[_0x44418f(0x1fb)][_0x44418f(0x223)][_0x44418f(0x21f)](_0xcb6b75,_0x29b1e7))_0x65e5b4[_0x65e5b4[_0x44418f(0x215)]]=_0x29b1e7;return _0x65e5b4;},_0x1878da(_0x3c9530);};return function(_0x33a724){const _0x374c8b=a19_0x204a;if(_0x33a724&&_0x33a724['__esModule'])return _0x33a724;var _0x51260a={};if(_0x33a724!=null){for(var _0x474bbc=_0x1878da(_0x33a724),_0x194446=0x0;_0x194446<_0x474bbc[_0x374c8b(0x215)];_0x194446++)if(_0x474bbc[_0x194446]!==_0x374c8b(0x248))__createBinding(_0x51260a,_0x33a724,_0x474bbc[_0x194446]);}return __setModuleDefault(_0x51260a,_0x33a724),_0x51260a;};}());Object['defineProperty'](exports,a19_0x1794af(0x226),{'value':!![]});function a19_0x204a(_0x2a3a2d,_0x57d8bb){const _0x1df779=a19_0x1df7();return a19_0x204a=function(_0x204a0a,_0x4cd970){_0x204a0a=_0x204a0a-0x1e1;let _0x461d92=_0x1df779[_0x204a0a];return _0x461d92;},a19_0x204a(_0x2a3a2d,_0x57d8bb);}function a19_0x1df7(){const _0x537c29=['updatePayment','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','/payout','getTime','shop','getPayoutById','getPayments','/users','cointopay','../services/loggerService','getMerchantsAwaitingPayout','../services/coinToPayStatusService','createPayoutSchema','createUser','/cointopay/stats','length','post','getMerchantStatistics','status','CoinToPay\x20automatic\x20status\x20checking\x20service','12439779AYEXQV','5165256exHJIP','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','error','904kQhvAv','call','34510epCslH','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','get','hasOwnProperty','use','/payouts/:id','__esModule','writable','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','Domain\x20check\x20failed','🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','Failed\x20to\x20get\x20payment\x20information','/domain-monitoring/stats','createUserSchema','createPayout','PENDING','Failed\x20to\x20clean\x20old\x20logs','deleteUser','AdminController','9wPZnnb','getOwnPropertyDescriptor','/users/:id/activate','Domain\x20is\x20responding\x20correctly','/users/:id/suspend','resolve','Payments\x20automatically\x20expire\x20after\x20','requireAdmin','createdAt','__createBinding','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','findUnique','../middleware/auth','429562FkkPLu','message','coinToPayStatusService','gateway','put','/payouts','toISOString','getUserById','default','getPayouts','../middleware/validation','cleanOldLogs','getMonitoringStats','/users/:id','5eyDEIQ','create','/cointopay/check/:paymentId','CoinToPay\x20payment\x20status\x20checked\x20successfully','getOwnPropertyNames','5658930DeoARq','PAID','updateCustomerDataSchema','/payout/stats','express','349130rQjpqf','authenticateToken','then','../config/database','/cointopay/payment/:paymentId','813242PsgETz','updateUser','floor','/payments/:id/customer','configurable','\x20days\x20if\x20not\x20paid','validate','getServiceStats','getUsers','getPayoutStats','amount','paymentId','/merchant-statistics','/statistics','deletePayout','defineProperty','updateUserSchema','currency','loggerService','getLogStats','__setModuleDefault','checkPaymentById','/domain-monitoring/check','params','domainMonitoringService','prototype','getStatistics','log','getPaymentTimerInfo','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','expiryDays','json','body','delete','90iWhRbh','/logs/clean'];a19_0x1df7=function(){return _0x537c29;};return a19_0x1df7();}const express_1=require(a19_0x1794af(0x257)),adminController_1=require('../controllers/adminController'),validation_1=require(a19_0x1794af(0x24a)),auth_1=require(a19_0x1794af(0x23f)),loggerService_1=require(a19_0x1794af(0x20f)),coinToPayStatusService_1=require(a19_0x1794af(0x211)),domainMonitoringService_1=require('../services/domainMonitoringService'),router=(0x0,express_1['Router'])(),adminController=new adminController_1[(a19_0x1794af(0x232))]();router[a19_0x1794af(0x224)](auth_1[a19_0x1794af(0x259)],auth_1[a19_0x1794af(0x23a)]),router[a19_0x1794af(0x222)]('/auth',adminController['checkAuth']),router['get'](a19_0x1794af(0x1ef),adminController[a19_0x1794af(0x1fc)]),router['get'](a19_0x1794af(0x1ee),adminController[a19_0x1794af(0x217)]),router['get'](a19_0x1794af(0x256),adminController[a19_0x1794af(0x1eb)]),router['get']('/payout/merchants',adminController[a19_0x1794af(0x210)]),router[a19_0x1794af(0x216)](a19_0x1794af(0x208),(0x0,validation_1[a19_0x1794af(0x1e8)])(validation_1[a19_0x1794af(0x212)]),adminController[a19_0x1794af(0x22e)]),router[a19_0x1794af(0x222)](a19_0x1794af(0x245),adminController[a19_0x1794af(0x249)]),router[a19_0x1794af(0x222)](a19_0x1794af(0x225),adminController[a19_0x1794af(0x20b)]),router[a19_0x1794af(0x203)]('/payouts/:id',adminController[a19_0x1794af(0x1f0)]),router[a19_0x1794af(0x222)]('/payments',adminController[a19_0x1794af(0x20c)]),router[a19_0x1794af(0x222)]('/payments/:id',adminController['getPaymentById']),router[a19_0x1794af(0x244)]('/payments/:id',adminController[a19_0x1794af(0x206)]),router[a19_0x1794af(0x244)](a19_0x1794af(0x1e5),(0x0,validation_1[a19_0x1794af(0x1e8)])(validation_1[a19_0x1794af(0x255)]),adminController['updateCustomerData']),router[a19_0x1794af(0x222)](a19_0x1794af(0x20d),adminController[a19_0x1794af(0x1ea)]),router[a19_0x1794af(0x222)](a19_0x1794af(0x24d),adminController[a19_0x1794af(0x247)]),router[a19_0x1794af(0x216)](a19_0x1794af(0x20d),(0x0,validation_1[a19_0x1794af(0x1e8)])(validation_1[a19_0x1794af(0x22d)]),adminController[a19_0x1794af(0x213)]),router[a19_0x1794af(0x244)](a19_0x1794af(0x24d),(0x0,validation_1['validate'])(validation_1[a19_0x1794af(0x1f2)]),adminController[a19_0x1794af(0x1e3)]),router[a19_0x1794af(0x203)](a19_0x1794af(0x24d),adminController[a19_0x1794af(0x231)]),router['post'](a19_0x1794af(0x237),adminController['suspendUser']),router[a19_0x1794af(0x216)](a19_0x1794af(0x235),adminController['activateUser']),router[a19_0x1794af(0x222)]('/logs/stats',(_0x2652d7,_0x37ceec)=>{const _0x484cab=a19_0x1794af;try{const _0x59c06d=loggerService_1['loggerService'][_0x484cab(0x1f5)]();_0x37ceec['json']({'success':!![],'result':_0x59c06d});}catch(_0x54f26d){_0x37ceec[_0x484cab(0x218)](0x1f4)[_0x484cab(0x201)]({'success':![],'message':'Failed\x20to\x20get\x20log\x20statistics'});}}),router[a19_0x1794af(0x216)](a19_0x1794af(0x205),(_0x473c94,_0x3aa385)=>{const _0x5e47dc=a19_0x1794af;try{const {daysToKeep:daysToKeep=0x1e}=_0x473c94[_0x5e47dc(0x202)];loggerService_1[_0x5e47dc(0x1f4)][_0x5e47dc(0x24b)](daysToKeep),_0x3aa385[_0x5e47dc(0x201)]({'success':!![],'message':'Old\x20logs\x20cleaned\x20(kept\x20last\x20'+daysToKeep+'\x20days)'});}catch(_0x55a173){_0x3aa385[_0x5e47dc(0x218)](0x1f4)['json']({'success':![],'message':_0x5e47dc(0x230)});}}),router[a19_0x1794af(0x216)](a19_0x1794af(0x250),async(_0x55402f,_0x4d4d84)=>{const _0x23e9cd=a19_0x1794af;try{const {paymentId:_0x551273}=_0x55402f[_0x23e9cd(0x1f9)];console[_0x23e9cd(0x1fd)](_0x23e9cd(0x22a)+_0x551273),await coinToPayStatusService_1[_0x23e9cd(0x242)][_0x23e9cd(0x1f7)](_0x551273),_0x4d4d84[_0x23e9cd(0x201)]({'success':!![],'message':_0x23e9cd(0x251)});}catch(_0x14d952){console[_0x23e9cd(0x21d)]('❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20'+_0x55402f[_0x23e9cd(0x1f9)][_0x23e9cd(0x1ed)]+':',_0x14d952),_0x4d4d84[_0x23e9cd(0x218)](0x1f4)[_0x23e9cd(0x201)]({'success':![],'message':_0x14d952 instanceof Error?_0x14d952[_0x23e9cd(0x241)]:_0x23e9cd(0x221)});}}),router['get'](a19_0x1794af(0x214),(_0x8e166a,_0x3b1e7a)=>{const _0x16fa0a=a19_0x1794af;try{const _0x3e8cd0=coinToPayStatusService_1['coinToPayStatusService'][_0x16fa0a(0x1e9)]();_0x3b1e7a['json']({'success':!![],'result':{..._0x3e8cd0,'description':_0x16fa0a(0x219),'statusMapping':{'Paid':_0x16fa0a(0x254),'Awaiting\x20Fiat':'PENDING','waiting':_0x16fa0a(0x22f),'expired':'EXPIRED','failed':'FAILED'},'autoExpiryNote':_0x16fa0a(0x239)+_0x3e8cd0[_0x16fa0a(0x200)]+_0x16fa0a(0x1e7),'individualTimersNote':_0x16fa0a(0x207)}});}catch(_0xcc7255){_0x3b1e7a[_0x16fa0a(0x218)](0x1f4)[_0x16fa0a(0x201)]({'success':![],'message':_0x16fa0a(0x21c)});}}),router[a19_0x1794af(0x222)](a19_0x1794af(0x1e1),async(_0x54de51,_0x2d8f0d)=>{const _0x5319c6=a19_0x1794af;try{const {paymentId:_0x4cfb1d}=_0x54de51[_0x5319c6(0x1f9)],_0x34ed28=coinToPayStatusService_1['coinToPayStatusService'][_0x5319c6(0x1fe)](_0x4cfb1d),_0x546dd4=(await Promise[_0x5319c6(0x238)]()[_0x5319c6(0x25a)](()=>__importStar(require(_0x5319c6(0x25b)))))['default'],_0xff97a9=await _0x546dd4['payment'][_0x5319c6(0x23e)]({'where':{'id':_0x4cfb1d},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0xff97a9)return _0x2d8f0d[_0x5319c6(0x218)](0x194)['json']({'success':![],'message':'Payment\x20not\x20found'});_0x2d8f0d[_0x5319c6(0x201)]({'success':!![],'result':{'payment':{'id':_0xff97a9['id'],'gateway':_0xff97a9[_0x5319c6(0x243)],'gatewayPaymentId':_0xff97a9['gatewayPaymentId'],'status':_0xff97a9['status'],'amount':_0xff97a9[_0x5319c6(0x1ec)],'currency':_0xff97a9[_0x5319c6(0x1f3)],'createdAt':_0xff97a9[_0x5319c6(0x23b)],'updatedAt':_0xff97a9['updatedAt'],'shop':_0xff97a9[_0x5319c6(0x20a)]},'timers':_0x34ed28,'isCoinToPay':_0xff97a9[_0x5319c6(0x243)]===_0x5319c6(0x20e),'ageInMinutes':Math[_0x5319c6(0x1e4)]((Date['now']()-_0xff97a9['createdAt'][_0x5319c6(0x209)]())/(0x3e8*0x3c))}});}catch(_0x3564c7){_0x2d8f0d[_0x5319c6(0x218)](0x1f4)['json']({'success':![],'message':_0x3564c7 instanceof Error?_0x3564c7[_0x5319c6(0x241)]:_0x5319c6(0x22b)});}}),router['get'](a19_0x1794af(0x22c),(_0x282ee5,_0x42875f)=>{const _0x2ea2d8=a19_0x1794af;try{const _0x41e6a8=domainMonitoringService_1[_0x2ea2d8(0x1fa)][_0x2ea2d8(0x24c)]();_0x42875f[_0x2ea2d8(0x201)]({'success':!![],'result':{..._0x41e6a8,'description':_0x2ea2d8(0x1ff),'behavior':'Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','encoding':_0x2ea2d8(0x23d)}});}catch(_0x1f0065){_0x42875f[_0x2ea2d8(0x218)](0x1f4)[_0x2ea2d8(0x201)]({'success':![],'message':_0x2ea2d8(0x228)});}}),router[a19_0x1794af(0x216)](a19_0x1794af(0x1f8),async(_0x583091,_0x159b1d)=>{const _0x5e20c0=a19_0x1794af;try{const _0x48e5a7=await domainMonitoringService_1[_0x5e20c0(0x1fa)]['manualCheck']();_0x159b1d[_0x5e20c0(0x201)]({'success':!![],'result':{'domainAvailable':_0x48e5a7,'message':_0x48e5a7?_0x5e20c0(0x236):_0x5e20c0(0x229),'timestamp':new Date()[_0x5e20c0(0x246)]()}});}catch(_0x4794e){_0x159b1d[_0x5e20c0(0x218)](0x1f4)[_0x5e20c0(0x201)]({'success':![],'message':_0x4794e instanceof Error?_0x4794e[_0x5e20c0(0x241)]:'Failed\x20to\x20perform\x20manual\x20domain\x20check'});}}),exports[a19_0x1794af(0x248)]=router;