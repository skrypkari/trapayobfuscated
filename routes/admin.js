'use strict';const a21_0x9873ae=a21_0x37f2;(function(_0x2db19b,_0x513df5){const _0x484a72=a21_0x37f2,_0x1e4899=_0x2db19b();while(!![]){try{const _0x388558=-parseInt(_0x484a72(0xf9))/0x1+parseInt(_0x484a72(0x89))/0x2*(parseInt(_0x484a72(0xe9))/0x3)+parseInt(_0x484a72(0xc3))/0x4+-parseInt(_0x484a72(0x84))/0x5*(-parseInt(_0x484a72(0x9e))/0x6)+parseInt(_0x484a72(0xae))/0x7*(-parseInt(_0x484a72(0xa6))/0x8)+-parseInt(_0x484a72(0xa5))/0x9*(parseInt(_0x484a72(0xba))/0xa)+parseInt(_0x484a72(0xc6))/0xb*(-parseInt(_0x484a72(0xc9))/0xc);if(_0x388558===_0x513df5)break;else _0x1e4899['push'](_0x1e4899['shift']());}catch(_0x5219f1){_0x1e4899['push'](_0x1e4899['shift']());}}}(a21_0x3525,0x7914e));function a21_0x3525(){const _0x469b53=['CoinToPay\x20payment\x20status\x20checked\x20successfully','54SvXzOC','1471688BYnXEW','getServiceStats','/logs/stats','/payments/:id','\x20days)','error','floor','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','21qsFvgN','getPaymentTimerInfo','../controllers/adminController','activateUser','gatewayPaymentId','getPayoutById','hasOwnProperty','/merchant-statistics','EXPIRED','call','cleanupStalePayments','shop','257470ruwgdr','getProcessingPaymentsStats','getMerchantStatistics','Failed\x20to\x20clean\x20old\x20logs','PAID','cleanupStalePendingPayments','/users/:id/activate','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','1338056jiHPDT','/payments/:id/customer','createUserSchema','62227upbeGr','getPayoutStats','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','276qKWmEi','/payments/cleanup','Failed\x20to\x20get\x20payment\x20information','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','Payments\x20automatically\x20expire\x20after\x20','/cointopay/stats','prototype','message','get','../middleware/auth','createPayoutSchema','writable','__esModule','loggerService','status','updateUser','coinToPayStatusService','/auth','__setModuleDefault','put','Failed\x20to\x20get\x20log\x20statistics','then','getOwnPropertyNames','getUserById','updateCustomerDataSchema','getTime','/payments/cleanup-with-report','/payouts','Payment\x20not\x20found','createdAt','configurable','updatedAt','5631gGRLjg','currency','manualCheck','now','json','updatePayment','/users/:id/suspend','__importStar','/cointopay/payment/:paymentId','delete','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','../middleware/validation','validate','domainMonitoringService','CoinToPay\x20automatic\x20status\x20checking\x20service','findUnique','139588VMhHAt','create','/users/:id','deletePayout','toISOString','default','length','/payments/cleanup-pending','updateUserSchema','getLogStats','../services/domainMonitoringService','post','FAILED','3985oCBLor','paymentId','deleteUser','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','authenticateToken','542cJvdyb','/domain-monitoring/stats','/payouts/:id','params','../config/database','Domain\x20is\x20responding\x20correctly','gateway','getMerchantsSelection','payment','/domain-monitoring/check','expiryDays','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','resolve','/merchants/selection','/users','getUsers','createPayout','getPayments','getMerchantsAwaitingPayout','/cointopay/check/:paymentId','/payments','4734qWJIiR','getStatistics','../services/loggerService','PENDING','defineProperty','checkPaymentById'];a21_0x3525=function(){return _0x469b53;};return a21_0x3525();}var __createBinding=this&&this['__createBinding']||(Object[a21_0x9873ae(0xfa)]?function(_0xeaf5d5,_0x564cba,_0x1dca26,_0x303c3b){const _0xa1ffd8=a21_0x9873ae;if(_0x303c3b===undefined)_0x303c3b=_0x1dca26;var _0x144426=Object['getOwnPropertyDescriptor'](_0x564cba,_0x1dca26);(!_0x144426||(_0xa1ffd8(0xd1)in _0x144426?!_0x564cba[_0xa1ffd8(0xd5)]:_0x144426[_0xa1ffd8(0xd4)]||_0x144426[_0xa1ffd8(0xe7)]))&&(_0x144426={'enumerable':!![],'get':function(){return _0x564cba[_0x1dca26];}}),Object[_0xa1ffd8(0xa2)](_0xeaf5d5,_0x303c3b,_0x144426);}:function(_0x5907a8,_0x4b286c,_0x134020,_0x16f632){if(_0x16f632===undefined)_0x16f632=_0x134020;_0x5907a8[_0x16f632]=_0x4b286c[_0x134020];}),__setModuleDefault=this&&this[a21_0x9873ae(0xdb)]||(Object[a21_0x9873ae(0xfa)]?function(_0x43a594,_0x3f331c){const _0x37b7e7=a21_0x9873ae;Object[_0x37b7e7(0xa2)](_0x43a594,_0x37b7e7(0x7c),{'enumerable':!![],'value':_0x3f331c});}:function(_0x1233d9,_0x16890c){const _0x3a707a=a21_0x9873ae;_0x1233d9[_0x3a707a(0x7c)]=_0x16890c;}),__importStar=this&&this[a21_0x9873ae(0xf0)]||(function(){var _0x312017=function(_0x56b5ae){const _0x38401a=a21_0x37f2;return _0x312017=Object[_0x38401a(0xdf)]||function(_0x4907bf){const _0x967f43=_0x38401a;var _0x26f45d=[];for(var _0x4b012f in _0x4907bf)if(Object[_0x967f43(0xcf)][_0x967f43(0xb4)][_0x967f43(0xb7)](_0x4907bf,_0x4b012f))_0x26f45d[_0x26f45d['length']]=_0x4b012f;return _0x26f45d;},_0x312017(_0x56b5ae);};return function(_0x223a71){const _0x35da5d=a21_0x37f2;if(_0x223a71&&_0x223a71['__esModule'])return _0x223a71;var _0x2561b1={};if(_0x223a71!=null){for(var _0x22dc19=_0x312017(_0x223a71),_0x5787e8=0x0;_0x5787e8<_0x22dc19[_0x35da5d(0x7d)];_0x5787e8++)if(_0x22dc19[_0x5787e8]!==_0x35da5d(0x7c))__createBinding(_0x2561b1,_0x223a71,_0x22dc19[_0x5787e8]);}return __setModuleDefault(_0x2561b1,_0x223a71),_0x2561b1;};}());Object[a21_0x9873ae(0xa2)](exports,a21_0x9873ae(0xd5),{'value':!![]});function a21_0x37f2(_0x20e0dc,_0x4e4cfd){const _0x352569=a21_0x3525();return a21_0x37f2=function(_0x37f284,_0x3d2e88){_0x37f284=_0x37f284-0x7a;let _0x26b371=_0x352569[_0x37f284];return _0x26b371;},a21_0x37f2(_0x20e0dc,_0x4e4cfd);}const express_1=require('express'),adminController_1=require(a21_0x9873ae(0xb0)),validation_1=require(a21_0x9873ae(0xf4)),auth_1=require(a21_0x9873ae(0xd2)),loggerService_1=require(a21_0x9873ae(0xa0)),coinToPayStatusService_1=require('../services/coinToPayStatusService'),domainMonitoringService_1=require(a21_0x9873ae(0x81)),router=(0x0,express_1['Router'])(),adminController=new adminController_1['AdminController']();router['use'](auth_1[a21_0x9873ae(0x88)],auth_1['requireAdmin']),router[a21_0x9873ae(0xd1)](a21_0x9873ae(0xda),adminController['checkAuth']),router['get']('/statistics',adminController[a21_0x9873ae(0x9f)]),router[a21_0x9873ae(0xd1)](a21_0x9873ae(0xb5),adminController[a21_0x9873ae(0xbc)]),router[a21_0x9873ae(0xd1)]('/payout/stats',adminController[a21_0x9873ae(0xc7)]),router[a21_0x9873ae(0xd1)]('/payout/merchants',adminController[a21_0x9873ae(0x9b)]),router['get'](a21_0x9873ae(0x96),adminController[a21_0x9873ae(0x90)]),router[a21_0x9873ae(0x82)]('/payout',(0x0,validation_1[a21_0x9873ae(0xf5)])(validation_1[a21_0x9873ae(0xd3)]),adminController[a21_0x9873ae(0x99)]),router[a21_0x9873ae(0xd1)](a21_0x9873ae(0xe4),adminController['getPayouts']),router[a21_0x9873ae(0xd1)](a21_0x9873ae(0x8b),adminController[a21_0x9873ae(0xb3)]),router[a21_0x9873ae(0xf2)](a21_0x9873ae(0x8b),adminController[a21_0x9873ae(0x7a)]),router[a21_0x9873ae(0xd1)](a21_0x9873ae(0x9d),adminController[a21_0x9873ae(0x9a)]),router[a21_0x9873ae(0xd1)](a21_0x9873ae(0xa9),adminController['getPaymentById']),router[a21_0x9873ae(0xdc)]('/payments/:id',adminController[a21_0x9873ae(0xee)]),router[a21_0x9873ae(0xdc)](a21_0x9873ae(0xc4),(0x0,validation_1['validate'])(validation_1[a21_0x9873ae(0xe1)]),adminController['updateCustomerData']),router[a21_0x9873ae(0xd1)]('/payments/processing-stats',adminController[a21_0x9873ae(0xbb)]),router[a21_0x9873ae(0x82)](a21_0x9873ae(0xca),adminController[a21_0x9873ae(0xb8)]),router[a21_0x9873ae(0x82)](a21_0x9873ae(0x7e),adminController[a21_0x9873ae(0xbf)]),router[a21_0x9873ae(0x82)](a21_0x9873ae(0xe3),adminController['cleanupStalePaymentsWithReport']),router[a21_0x9873ae(0xd1)](a21_0x9873ae(0x97),adminController[a21_0x9873ae(0x98)]),router[a21_0x9873ae(0xd1)](a21_0x9873ae(0xfb),adminController[a21_0x9873ae(0xe0)]),router['post'](a21_0x9873ae(0x97),(0x0,validation_1[a21_0x9873ae(0xf5)])(validation_1[a21_0x9873ae(0xc5)]),adminController['createUser']),router[a21_0x9873ae(0xdc)](a21_0x9873ae(0xfb),(0x0,validation_1[a21_0x9873ae(0xf5)])(validation_1[a21_0x9873ae(0x7f)]),adminController[a21_0x9873ae(0xd8)]),router[a21_0x9873ae(0xf2)](a21_0x9873ae(0xfb),adminController[a21_0x9873ae(0x86)]),router[a21_0x9873ae(0x82)](a21_0x9873ae(0xef),adminController['suspendUser']),router['post'](a21_0x9873ae(0xc0),adminController[a21_0x9873ae(0xb1)]),router['get'](a21_0x9873ae(0xa8),(_0x5df7e,_0x2a0690)=>{const _0x44b0e4=a21_0x9873ae;try{const _0x4f1722=loggerService_1[_0x44b0e4(0xd6)][_0x44b0e4(0x80)]();_0x2a0690[_0x44b0e4(0xed)]({'success':!![],'result':_0x4f1722});}catch(_0x91afb5){_0x2a0690[_0x44b0e4(0xd7)](0x1f4)[_0x44b0e4(0xed)]({'success':![],'message':_0x44b0e4(0xdd)});}}),router['post']('/logs/clean',(_0x44d347,_0x501c20)=>{const _0x2c5038=a21_0x9873ae;try{const {daysToKeep:daysToKeep=0x1e}=_0x44d347['body'];loggerService_1[_0x2c5038(0xd6)]['cleanOldLogs'](daysToKeep),_0x501c20[_0x2c5038(0xed)]({'success':!![],'message':'Old\x20logs\x20cleaned\x20(kept\x20last\x20'+daysToKeep+_0x2c5038(0xaa)});}catch(_0x5bd160){_0x501c20['status'](0x1f4)['json']({'success':![],'message':_0x2c5038(0xbd)});}}),router[a21_0x9873ae(0x82)](a21_0x9873ae(0x9c),async(_0x4e7ced,_0x460f49)=>{const _0x36ece9=a21_0x9873ae;try{const {paymentId:_0x510cd3}=_0x4e7ced[_0x36ece9(0x8c)];console['log'](_0x36ece9(0xad)+_0x510cd3),await coinToPayStatusService_1[_0x36ece9(0xd9)][_0x36ece9(0xa3)](_0x510cd3),_0x460f49[_0x36ece9(0xed)]({'success':!![],'message':_0x36ece9(0xa4)});}catch(_0xff247){console[_0x36ece9(0xab)](_0x36ece9(0xc2)+_0x4e7ced[_0x36ece9(0x8c)][_0x36ece9(0x85)]+':',_0xff247),_0x460f49['status'](0x1f4)[_0x36ece9(0xed)]({'success':![],'message':_0xff247 instanceof Error?_0xff247[_0x36ece9(0xd0)]:_0x36ece9(0x87)});}}),router[a21_0x9873ae(0xd1)](a21_0x9873ae(0xce),(_0xad6ff5,_0x5711d5)=>{const _0x176219=a21_0x9873ae;try{const _0x40ec93=coinToPayStatusService_1[_0x176219(0xd9)][_0x176219(0xa7)]();_0x5711d5[_0x176219(0xed)]({'success':!![],'result':{..._0x40ec93,'description':_0x176219(0xf7),'statusMapping':{'Paid':_0x176219(0xbe),'Awaiting\x20Fiat':_0x176219(0xa1),'waiting':_0x176219(0xa1),'expired':_0x176219(0xb6),'failed':_0x176219(0x83)},'autoExpiryNote':_0x176219(0xcd)+_0x40ec93[_0x176219(0x93)]+'\x20days\x20if\x20not\x20paid','individualTimersNote':_0x176219(0xcc)}});}catch(_0x6ddeab){_0x5711d5[_0x176219(0xd7)](0x1f4)[_0x176219(0xed)]({'success':![],'message':_0x176219(0xc1)});}}),router['get'](a21_0x9873ae(0xf1),async(_0x3dce1e,_0x541f47)=>{const _0x229733=a21_0x9873ae;try{const {paymentId:_0x14dc22}=_0x3dce1e[_0x229733(0x8c)],_0x287efc=coinToPayStatusService_1['coinToPayStatusService'][_0x229733(0xaf)](_0x14dc22),_0x2afb82=(await Promise[_0x229733(0x95)]()[_0x229733(0xde)](()=>__importStar(require(_0x229733(0x8d)))))[_0x229733(0x7c)],_0x46f049=await _0x2afb82[_0x229733(0x91)][_0x229733(0xf8)]({'where':{'id':_0x14dc22},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x46f049)return _0x541f47[_0x229733(0xd7)](0x194)[_0x229733(0xed)]({'success':![],'message':_0x229733(0xe5)});_0x541f47[_0x229733(0xed)]({'success':!![],'result':{'payment':{'id':_0x46f049['id'],'gateway':_0x46f049[_0x229733(0x8f)],'gatewayPaymentId':_0x46f049[_0x229733(0xb2)],'status':_0x46f049[_0x229733(0xd7)],'amount':_0x46f049['amount'],'currency':_0x46f049[_0x229733(0xea)],'createdAt':_0x46f049['createdAt'],'updatedAt':_0x46f049[_0x229733(0xe8)],'shop':_0x46f049[_0x229733(0xb9)]},'timers':_0x287efc,'isCoinToPay':_0x46f049[_0x229733(0x8f)]==='cointopay','ageInMinutes':Math[_0x229733(0xac)]((Date[_0x229733(0xec)]()-_0x46f049[_0x229733(0xe6)][_0x229733(0xe2)]())/(0x3e8*0x3c))}});}catch(_0x442774){_0x541f47[_0x229733(0xd7)](0x1f4)[_0x229733(0xed)]({'success':![],'message':_0x442774 instanceof Error?_0x442774[_0x229733(0xd0)]:_0x229733(0xcb)});}}),router['get'](a21_0x9873ae(0x8a),(_0x3ce84b,_0xb28d44)=>{const _0x504561=a21_0x9873ae;try{const _0x2dfa7c=domainMonitoringService_1['domainMonitoringService']['getMonitoringStats']();_0xb28d44[_0x504561(0xed)]({'success':!![],'result':{..._0x2dfa7c,'description':'Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','behavior':_0x504561(0x94),'encoding':_0x504561(0xc8)}});}catch(_0x45840c){_0xb28d44[_0x504561(0xd7)](0x1f4)[_0x504561(0xed)]({'success':![],'message':_0x504561(0xf3)});}}),router['post'](a21_0x9873ae(0x92),async(_0x45db75,_0x5322e9)=>{const _0x12dd72=a21_0x9873ae;try{const _0x18c9d8=await domainMonitoringService_1[_0x12dd72(0xf6)][_0x12dd72(0xeb)]();_0x5322e9[_0x12dd72(0xed)]({'success':!![],'result':{'domainAvailable':_0x18c9d8,'message':_0x18c9d8?_0x12dd72(0x8e):'Domain\x20check\x20failed','timestamp':new Date()[_0x12dd72(0x7b)]()}});}catch(_0x5d924f){_0x5322e9[_0x12dd72(0xd7)](0x1f4)[_0x12dd72(0xed)]({'success':![],'message':_0x5d924f instanceof Error?_0x5d924f[_0x12dd72(0xd0)]:'Failed\x20to\x20perform\x20manual\x20domain\x20check'});}}),exports[a21_0x9873ae(0x7c)]=router;