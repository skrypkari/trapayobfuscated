'use strict';const a19_0x50efb2=a19_0x32eb;(function(_0x265dcb,_0x197c10){const _0x2a4e4a=a19_0x32eb,_0x33b5ac=_0x265dcb();while(!![]){try{const _0x2e1a3e=-parseInt(_0x2a4e4a(0x170))/0x1+-parseInt(_0x2a4e4a(0x184))/0x2*(-parseInt(_0x2a4e4a(0x11f))/0x3)+parseInt(_0x2a4e4a(0x132))/0x4*(-parseInt(_0x2a4e4a(0x17e))/0x5)+-parseInt(_0x2a4e4a(0x154))/0x6+parseInt(_0x2a4e4a(0x13e))/0x7*(-parseInt(_0x2a4e4a(0x156))/0x8)+-parseInt(_0x2a4e4a(0x16c))/0x9*(-parseInt(_0x2a4e4a(0x185))/0xa)+parseInt(_0x2a4e4a(0x137))/0xb;if(_0x2e1a3e===_0x197c10)break;else _0x33b5ac['push'](_0x33b5ac['shift']());}catch(_0x19ad6e){_0x33b5ac['push'](_0x33b5ac['shift']());}}}(a19_0x34b4,0xb8eaf));function a19_0x34b4(){const _0x393f12=['/users/:id/suspend','params','suspendUser','5QVZuMO','put','getPaymentById','domainMonitoringService','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','createPayoutSchema','44SRkUXz','40070HIzgBl','__createBinding','message','getMerchantsAwaitingPayout','amount','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','call','/payments','loggerService','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','getPayments','currency','get','getPayoutStats','getPayouts','57786gVqgyq','Old\x20logs\x20cleaned\x20(kept\x20last\x20','paymentId','create','PENDING','/logs/stats','Failed\x20to\x20perform\x20manual\x20domain\x20check','coinToPayStatusService','writable','validate','gateway','createdAt','/users/:id/activate','expiryDays','express','/merchant-statistics','findUnique','length','/payout/stats','5920364GbEHbH','updateCustomerData','deleteUser','shop','__esModule','44707971ioMHdO','/logs/clean','/payments/:id','cleanOldLogs','cointopay','/cointopay/check/:paymentId','configurable','5705ruNfOk','AdminController','/payout','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','updateCustomerDataSchema','post','getOwnPropertyNames','checkPaymentById','defineProperty','default','getMonitoringStats','/users/:id','getStatistics','floor','getPaymentTimerInfo','createUser','../services/loggerService','gatewayPaymentId','json','Domain\x20is\x20responding\x20correctly','/cointopay/stats','CoinToPay\x20payment\x20status\x20checked\x20successfully','8269152ldXnPz','/payouts','8840EmnEpA','createPayout','Payment\x20not\x20found','payment','hasOwnProperty','Router','/payout/merchants','/cointopay/payment/:paymentId','getMerchantStatistics','../middleware/validation','Domain\x20check\x20failed','getPayoutById','/users','../config/database','/statistics','../services/coinToPayStatusService','getMerchantsSelection','status','/payments/:id/customer','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','Failed\x20to\x20get\x20log\x20statistics','manualCheck','1125AgdIXn','__setModuleDefault','getUserById','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','472719XcOael','getOwnPropertyDescriptor','__importStar','/payouts/:id','delete','/domain-monitoring/stats','Failed\x20to\x20get\x20payment\x20information','FAILED','Payments\x20automatically\x20expire\x20after\x20','now','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status'];a19_0x34b4=function(){return _0x393f12;};return a19_0x34b4();}function a19_0x32eb(_0xe597ef,_0x362d75){const _0x34b4a1=a19_0x34b4();return a19_0x32eb=function(_0x32ebed,_0x1e3863){_0x32ebed=_0x32ebed-0x117;let _0x5449b8=_0x34b4a1[_0x32ebed];return _0x5449b8;},a19_0x32eb(_0xe597ef,_0x362d75);}var __createBinding=this&&this[a19_0x50efb2(0x186)]||(Object[a19_0x50efb2(0x122)]?function(_0xd6863d,_0x1a2fdb,_0x422278,_0x507fcb){const _0x2cbf76=a19_0x50efb2;if(_0x507fcb===undefined)_0x507fcb=_0x422278;var _0x4a0369=Object[_0x2cbf76(0x171)](_0x1a2fdb,_0x422278);(!_0x4a0369||(_0x2cbf76(0x11c)in _0x4a0369?!_0x1a2fdb['__esModule']:_0x4a0369[_0x2cbf76(0x127)]||_0x4a0369[_0x2cbf76(0x13d)]))&&(_0x4a0369={'enumerable':!![],'get':function(){return _0x1a2fdb[_0x422278];}}),Object['defineProperty'](_0xd6863d,_0x507fcb,_0x4a0369);}:function(_0x170250,_0x3efdff,_0x4f5f58,_0x100309){if(_0x100309===undefined)_0x100309=_0x4f5f58;_0x170250[_0x100309]=_0x3efdff[_0x4f5f58];}),__setModuleDefault=this&&this[a19_0x50efb2(0x16d)]||(Object['create']?function(_0x6bd40,_0x451df1){const _0xd0cd1b=a19_0x50efb2;Object[_0xd0cd1b(0x146)](_0x6bd40,'default',{'enumerable':!![],'value':_0x451df1});}:function(_0x509de8,_0x1f0011){const _0x19a1c8=a19_0x50efb2;_0x509de8[_0x19a1c8(0x147)]=_0x1f0011;}),__importStar=this&&this[a19_0x50efb2(0x172)]||(function(){var _0x23bd41=function(_0x2a1254){const _0x4cbaa9=a19_0x32eb;return _0x23bd41=Object[_0x4cbaa9(0x144)]||function(_0xba2040){const _0x42dc3a=_0x4cbaa9;var _0x1f4861=[];for(var _0x356d2b in _0xba2040)if(Object['prototype'][_0x42dc3a(0x15a)][_0x42dc3a(0x18b)](_0xba2040,_0x356d2b))_0x1f4861[_0x1f4861[_0x42dc3a(0x130)]]=_0x356d2b;return _0x1f4861;},_0x23bd41(_0x2a1254);};return function(_0x5d5f78){const _0x1a1e5c=a19_0x32eb;if(_0x5d5f78&&_0x5d5f78[_0x1a1e5c(0x136)])return _0x5d5f78;var _0x54b87e={};if(_0x5d5f78!=null){for(var _0x50f494=_0x23bd41(_0x5d5f78),_0x24c74a=0x0;_0x24c74a<_0x50f494['length'];_0x24c74a++)if(_0x50f494[_0x24c74a]!==_0x1a1e5c(0x147))__createBinding(_0x54b87e,_0x5d5f78,_0x50f494[_0x24c74a]);}return __setModuleDefault(_0x54b87e,_0x5d5f78),_0x54b87e;};}());Object['defineProperty'](exports,a19_0x50efb2(0x136),{'value':!![]});const express_1=require(a19_0x50efb2(0x12d)),adminController_1=require('../controllers/adminController'),validation_1=require(a19_0x50efb2(0x15f)),auth_1=require('../middleware/auth'),loggerService_1=require(a19_0x50efb2(0x14e)),coinToPayStatusService_1=require(a19_0x50efb2(0x165)),domainMonitoringService_1=require('../services/domainMonitoringService'),router=(0x0,express_1[a19_0x50efb2(0x15b)])(),adminController=new adminController_1[(a19_0x50efb2(0x13f))]();router['use'](auth_1['authenticateToken'],auth_1['requireAdmin']),router[a19_0x50efb2(0x11c)]('/auth',adminController['checkAuth']),router[a19_0x50efb2(0x11c)](a19_0x50efb2(0x164),adminController[a19_0x50efb2(0x14a)]),router[a19_0x50efb2(0x11c)](a19_0x50efb2(0x12e),adminController[a19_0x50efb2(0x15e)]),router[a19_0x50efb2(0x11c)](a19_0x50efb2(0x131),adminController[a19_0x50efb2(0x11d)]),router['get'](a19_0x50efb2(0x15c),adminController[a19_0x50efb2(0x188)]),router[a19_0x50efb2(0x11c)]('/merchants/selection',adminController[a19_0x50efb2(0x166)]),router['post'](a19_0x50efb2(0x140),(0x0,validation_1[a19_0x50efb2(0x128)])(validation_1[a19_0x50efb2(0x183)]),adminController[a19_0x50efb2(0x157)]),router[a19_0x50efb2(0x11c)](a19_0x50efb2(0x155),adminController[a19_0x50efb2(0x11e)]),router[a19_0x50efb2(0x11c)](a19_0x50efb2(0x173),adminController[a19_0x50efb2(0x161)]),router[a19_0x50efb2(0x174)](a19_0x50efb2(0x173),adminController['deletePayout']),router[a19_0x50efb2(0x11c)](a19_0x50efb2(0x117),adminController[a19_0x50efb2(0x11a)]),router[a19_0x50efb2(0x11c)]('/payments/:id',adminController[a19_0x50efb2(0x180)]),router['put'](a19_0x50efb2(0x139),adminController['updatePayment']),router['put'](a19_0x50efb2(0x168),(0x0,validation_1['validate'])(validation_1[a19_0x50efb2(0x142)]),adminController[a19_0x50efb2(0x133)]),router[a19_0x50efb2(0x11c)](a19_0x50efb2(0x162),adminController['getUsers']),router['get']('/users/:id',adminController[a19_0x50efb2(0x16e)]),router[a19_0x50efb2(0x143)](a19_0x50efb2(0x162),(0x0,validation_1[a19_0x50efb2(0x128)])(validation_1['createUserSchema']),adminController[a19_0x50efb2(0x14d)]),router[a19_0x50efb2(0x17f)](a19_0x50efb2(0x149),(0x0,validation_1['validate'])(validation_1['updateUserSchema']),adminController['updateUser']),router[a19_0x50efb2(0x174)](a19_0x50efb2(0x149),adminController[a19_0x50efb2(0x134)]),router[a19_0x50efb2(0x143)](a19_0x50efb2(0x17b),adminController[a19_0x50efb2(0x17d)]),router[a19_0x50efb2(0x143)](a19_0x50efb2(0x12b),adminController['activateUser']),router[a19_0x50efb2(0x11c)](a19_0x50efb2(0x124),(_0x44025f,_0x59bf2c)=>{const _0x40103d=a19_0x50efb2;try{const _0x2c388d=loggerService_1[_0x40103d(0x118)]['getLogStats']();_0x59bf2c['json']({'success':!![],'result':_0x2c388d});}catch(_0x84ee9c){_0x59bf2c['status'](0x1f4)[_0x40103d(0x150)]({'success':![],'message':_0x40103d(0x16a)});}}),router[a19_0x50efb2(0x143)](a19_0x50efb2(0x138),(_0x1db124,_0x429101)=>{const _0x21102b=a19_0x50efb2;try{const {daysToKeep:daysToKeep=0x1e}=_0x1db124['body'];loggerService_1[_0x21102b(0x118)][_0x21102b(0x13a)](daysToKeep),_0x429101[_0x21102b(0x150)]({'success':!![],'message':_0x21102b(0x120)+daysToKeep+'\x20days)'});}catch(_0x50cfcb){_0x429101[_0x21102b(0x167)](0x1f4)['json']({'success':![],'message':'Failed\x20to\x20clean\x20old\x20logs'});}}),router[a19_0x50efb2(0x143)](a19_0x50efb2(0x13c),async(_0x4e71f1,_0x4ae265)=>{const _0x5ad8f9=a19_0x50efb2;try{const {paymentId:_0x303bf0}=_0x4e71f1[_0x5ad8f9(0x17c)];console['log'](_0x5ad8f9(0x18a)+_0x303bf0),await coinToPayStatusService_1['coinToPayStatusService'][_0x5ad8f9(0x145)](_0x303bf0),_0x4ae265[_0x5ad8f9(0x150)]({'success':!![],'message':_0x5ad8f9(0x153)});}catch(_0x5d7b48){console['error']('‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20'+_0x4e71f1[_0x5ad8f9(0x17c)][_0x5ad8f9(0x121)]+':',_0x5d7b48),_0x4ae265[_0x5ad8f9(0x167)](0x1f4)[_0x5ad8f9(0x150)]({'success':![],'message':_0x5d7b48 instanceof Error?_0x5d7b48[_0x5ad8f9(0x187)]:_0x5ad8f9(0x17a)});}}),router[a19_0x50efb2(0x11c)](a19_0x50efb2(0x152),(_0x1456bc,_0x820778)=>{const _0x3aa2f3=a19_0x50efb2;try{const _0x12e0d2=coinToPayStatusService_1[_0x3aa2f3(0x126)]['getServiceStats']();_0x820778[_0x3aa2f3(0x150)]({'success':!![],'result':{..._0x12e0d2,'description':'CoinToPay\x20automatic\x20status\x20checking\x20service','statusMapping':{'Paid':'PAID','Awaiting\x20Fiat':_0x3aa2f3(0x123),'waiting':'PENDING','expired':'EXPIRED','failed':_0x3aa2f3(0x177)},'autoExpiryNote':_0x3aa2f3(0x178)+_0x12e0d2[_0x3aa2f3(0x12c)]+'\x20days\x20if\x20not\x20paid','individualTimersNote':_0x3aa2f3(0x169)}});}catch(_0x3f27ee){_0x820778[_0x3aa2f3(0x167)](0x1f4)[_0x3aa2f3(0x150)]({'success':![],'message':_0x3aa2f3(0x16f)});}}),router[a19_0x50efb2(0x11c)](a19_0x50efb2(0x15d),async(_0x57bf85,_0x1e5bab)=>{const _0x58d117=a19_0x50efb2;try{const {paymentId:_0x3551f1}=_0x57bf85[_0x58d117(0x17c)],_0x24a526=coinToPayStatusService_1[_0x58d117(0x126)][_0x58d117(0x14c)](_0x3551f1),_0x48aa67=(await Promise['resolve']()['then'](()=>__importStar(require(_0x58d117(0x163)))))[_0x58d117(0x147)],_0x5c5714=await _0x48aa67[_0x58d117(0x159)][_0x58d117(0x12f)]({'where':{'id':_0x3551f1},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x5c5714)return _0x1e5bab[_0x58d117(0x167)](0x194)[_0x58d117(0x150)]({'success':![],'message':_0x58d117(0x158)});_0x1e5bab[_0x58d117(0x150)]({'success':!![],'result':{'payment':{'id':_0x5c5714['id'],'gateway':_0x5c5714[_0x58d117(0x129)],'gatewayPaymentId':_0x5c5714[_0x58d117(0x14f)],'status':_0x5c5714[_0x58d117(0x167)],'amount':_0x5c5714[_0x58d117(0x189)],'currency':_0x5c5714[_0x58d117(0x11b)],'createdAt':_0x5c5714['createdAt'],'updatedAt':_0x5c5714['updatedAt'],'shop':_0x5c5714[_0x58d117(0x135)]},'timers':_0x24a526,'isCoinToPay':_0x5c5714[_0x58d117(0x129)]===_0x58d117(0x13b),'ageInMinutes':Math[_0x58d117(0x14b)]((Date[_0x58d117(0x179)]()-_0x5c5714[_0x58d117(0x12a)]['getTime']())/(0x3e8*0x3c))}});}catch(_0x4371fb){_0x1e5bab['status'](0x1f4)[_0x58d117(0x150)]({'success':![],'message':_0x4371fb instanceof Error?_0x4371fb['message']:_0x58d117(0x176)});}}),router[a19_0x50efb2(0x11c)](a19_0x50efb2(0x175),(_0x175ad9,_0xc001c5)=>{const _0xe7e43b=a19_0x50efb2;try{const _0x1dd476=domainMonitoringService_1[_0xe7e43b(0x181)][_0xe7e43b(0x148)]();_0xc001c5[_0xe7e43b(0x150)]({'success':!![],'result':{..._0x1dd476,'description':'Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','behavior':_0xe7e43b(0x141),'encoding':_0xe7e43b(0x182)}});}catch(_0xa60734){_0xc001c5[_0xe7e43b(0x167)](0x1f4)[_0xe7e43b(0x150)]({'success':![],'message':_0xe7e43b(0x119)});}}),router[a19_0x50efb2(0x143)]('/domain-monitoring/check',async(_0x11cd4a,_0x1465b2)=>{const _0xeb9d7f=a19_0x50efb2;try{const _0x462be4=await domainMonitoringService_1['domainMonitoringService'][_0xeb9d7f(0x16b)]();_0x1465b2[_0xeb9d7f(0x150)]({'success':!![],'result':{'domainAvailable':_0x462be4,'message':_0x462be4?_0xeb9d7f(0x151):_0xeb9d7f(0x160),'timestamp':new Date()['toISOString']()}});}catch(_0x2eea25){_0x1465b2['status'](0x1f4)[_0xeb9d7f(0x150)]({'success':![],'message':_0x2eea25 instanceof Error?_0x2eea25[_0xeb9d7f(0x187)]:_0xeb9d7f(0x125)});}}),exports[a19_0x50efb2(0x147)]=router;