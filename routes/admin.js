'use strict';const a19_0x135ac4=a19_0x5159;(function(_0x7ea571,_0x5950bf){const _0xca438c=a19_0x5159,_0x5bd2bc=_0x7ea571();while(!![]){try{const _0x46d70c=-parseInt(_0xca438c(0xd1))/0x1*(parseInt(_0xca438c(0x7f))/0x2)+parseInt(_0xca438c(0x7a))/0x3*(-parseInt(_0xca438c(0xc0))/0x4)+-parseInt(_0xca438c(0xa4))/0x5+-parseInt(_0xca438c(0xba))/0x6*(parseInt(_0xca438c(0xe1))/0x7)+parseInt(_0xca438c(0xc5))/0x8*(parseInt(_0xca438c(0xde))/0x9)+parseInt(_0xca438c(0xc1))/0xa*(parseInt(_0xca438c(0xb4))/0xb)+parseInt(_0xca438c(0x9b))/0xc*(parseInt(_0xca438c(0xb0))/0xd);if(_0x46d70c===_0x5950bf)break;else _0x5bd2bc['push'](_0x5bd2bc['shift']());}catch(_0x42d641){_0x5bd2bc['push'](_0x5bd2bc['shift']());}}}(a19_0x1b90,0x19baa));function a19_0x5159(_0xa5a639,_0x2bed0f){const _0x1b90a7=a19_0x1b90();return a19_0x5159=function(_0x5159e5,_0x7846e4){_0x5159e5=_0x5159e5-0x7a;let _0xd047d2=_0x1b90a7[_0x5159e5];return _0xd047d2;},a19_0x5159(_0xa5a639,_0x2bed0f);}var __createBinding=this&&this[a19_0x135ac4(0x7e)]||(Object[a19_0x135ac4(0xc7)]?function(_0x51d95c,_0x5327bf,_0x231f23,_0x2b8d1c){const _0x51b668=a19_0x135ac4;if(_0x2b8d1c===undefined)_0x2b8d1c=_0x231f23;var _0x485a0e=Object[_0x51b668(0xa5)](_0x5327bf,_0x231f23);(!_0x485a0e||(_0x51b668(0xcd)in _0x485a0e?!_0x5327bf[_0x51b668(0xb8)]:_0x485a0e[_0x51b668(0x9a)]||_0x485a0e['configurable']))&&(_0x485a0e={'enumerable':!![],'get':function(){return _0x5327bf[_0x231f23];}}),Object['defineProperty'](_0x51d95c,_0x2b8d1c,_0x485a0e);}:function(_0x4c5540,_0x41ce7d,_0x4e482d,_0x45c70a){if(_0x45c70a===undefined)_0x45c70a=_0x4e482d;_0x4c5540[_0x45c70a]=_0x41ce7d[_0x4e482d];}),__setModuleDefault=this&&this[a19_0x135ac4(0xd3)]||(Object[a19_0x135ac4(0xc7)]?function(_0x498a16,_0x21908f){const _0x4534d2=a19_0x135ac4;Object[_0x4534d2(0xc6)](_0x498a16,_0x4534d2(0x92),{'enumerable':!![],'value':_0x21908f});}:function(_0x5ed3d0,_0x3f9ed4){_0x5ed3d0['default']=_0x3f9ed4;}),__importStar=this&&this['__importStar']||(function(){var _0x1e522e=function(_0x10c1b3){const _0x245d4e=a19_0x5159;return _0x1e522e=Object[_0x245d4e(0xb1)]||function(_0x2ced78){const _0x58c1c0=_0x245d4e;var _0xa1f84a=[];for(var _0x47b927 in _0x2ced78)if(Object[_0x58c1c0(0xef)][_0x58c1c0(0xd6)]['call'](_0x2ced78,_0x47b927))_0xa1f84a[_0xa1f84a[_0x58c1c0(0x83)]]=_0x47b927;return _0xa1f84a;},_0x1e522e(_0x10c1b3);};return function(_0x13ace2){const _0x53ef68=a19_0x5159;if(_0x13ace2&&_0x13ace2[_0x53ef68(0xb8)])return _0x13ace2;var _0x431b73={};if(_0x13ace2!=null){for(var _0x129963=_0x1e522e(_0x13ace2),_0x231954=0x0;_0x231954<_0x129963[_0x53ef68(0x83)];_0x231954++)if(_0x129963[_0x231954]!==_0x53ef68(0x92))__createBinding(_0x431b73,_0x13ace2,_0x129963[_0x231954]);}return __setModuleDefault(_0x431b73,_0x13ace2),_0x431b73;};}());function a19_0x1b90(){const _0x386c80=['/payouts','/payout/merchants','14465JCbmCj','shop','loggerService','findUnique','__esModule','🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','290364ukYPLz','getTime','/cointopay/check/:paymentId','then','\x20days)','deletePayout','4860JixNDx','830hhsNgH','paymentId','getPaymentTimerInfo','/domain-monitoring/stats','402552VTnJWx','defineProperty','create','CoinToPay\x20automatic\x20status\x20checking\x20service','Domain\x20check\x20failed','/users','validate','Failed\x20to\x20clean\x20old\x20logs','get','currency','❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','../config/database','9040DwywUT','PAID','__setModuleDefault','coinToPayStatusService','../middleware/validation','hasOwnProperty','/auth','use','EXPIRED','Failed\x20to\x20get\x20log\x20statistics','/payments/:id/customer','body','../middleware/auth','9vXDKPu','Payments\x20automatically\x20expire\x20after\x20','/payout/stats','28ElhTFR','createUserSchema','resolve','Payment\x20not\x20found','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','log','/logs/stats','../services/loggerService','createPayoutSchema','gateway','\x20days\x20if\x20not\x20paid','message','json','put','prototype','/payouts/:id','authenticateToken','updatedAt','354uIUelo','post','/users/:id','getPayouts','__createBinding','12dreSlY','getPayments','status','PENDING','length','../services/coinToPayStatusService','getLogStats','cointopay','payment','/users/:id/suspend','/logs/clean','checkAuth','Old\x20logs\x20cleaned\x20(kept\x20last\x20','now','params','amount','getPayoutStats','getMerchantsSelection','cleanOldLogs','default','toISOString','/cointopay/stats','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','deleteUser','updatePayment','manualCheck','checkPaymentById','writable','3231996MQnpjt','updateCustomerData','createUser','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','createdAt','updateUserSchema','express','floor','AdminController','1007790rxCENt','getOwnPropertyDescriptor','FAILED','updateCustomerDataSchema','suspendUser','delete','domainMonitoringService','CoinToPay\x20payment\x20status\x20checked\x20successfully','/payout','activateUser','expiryDays','error','26hXTLji','getOwnPropertyNames'];a19_0x1b90=function(){return _0x386c80;};return a19_0x1b90();}Object['defineProperty'](exports,a19_0x135ac4(0xb8),{'value':!![]});const express_1=require(a19_0x135ac4(0xa1)),adminController_1=require('../controllers/adminController'),validation_1=require(a19_0x135ac4(0xd5)),auth_1=require(a19_0x135ac4(0xdd)),loggerService_1=require(a19_0x135ac4(0xe8)),coinToPayStatusService_1=require(a19_0x135ac4(0x84)),domainMonitoringService_1=require('../services/domainMonitoringService'),router=(0x0,express_1['Router'])(),adminController=new adminController_1[(a19_0x135ac4(0xa3))]();router[a19_0x135ac4(0xd8)](auth_1[a19_0x135ac4(0xf1)],auth_1['requireAdmin']),router['get'](a19_0x135ac4(0xd7),adminController[a19_0x135ac4(0x8a)]),router[a19_0x135ac4(0xcd)]('/statistics',adminController['getStatistics']),router[a19_0x135ac4(0xcd)]('/merchant-statistics',adminController['getMerchantStatistics']),router[a19_0x135ac4(0xcd)](a19_0x135ac4(0xe0),adminController[a19_0x135ac4(0x8f)]),router[a19_0x135ac4(0xcd)](a19_0x135ac4(0xb3),adminController['getMerchantsAwaitingPayout']),router[a19_0x135ac4(0xcd)]('/merchants/selection',adminController[a19_0x135ac4(0x90)]),router[a19_0x135ac4(0x7b)](a19_0x135ac4(0xac),(0x0,validation_1[a19_0x135ac4(0xcb)])(validation_1[a19_0x135ac4(0xe9)]),adminController['createPayout']),router[a19_0x135ac4(0xcd)](a19_0x135ac4(0xb2),adminController[a19_0x135ac4(0x7d)]),router[a19_0x135ac4(0xcd)](a19_0x135ac4(0xf0),adminController['getPayoutById']),router[a19_0x135ac4(0xa9)](a19_0x135ac4(0xf0),adminController[a19_0x135ac4(0xbf)]),router[a19_0x135ac4(0xcd)]('/payments',adminController[a19_0x135ac4(0x80)]),router['get']('/payments/:id',adminController['getPaymentById']),router[a19_0x135ac4(0xee)]('/payments/:id',adminController[a19_0x135ac4(0x97)]),router['put'](a19_0x135ac4(0xdb),(0x0,validation_1['validate'])(validation_1[a19_0x135ac4(0xa7)]),adminController[a19_0x135ac4(0x9c)]),router[a19_0x135ac4(0xcd)](a19_0x135ac4(0xca),adminController['getUsers']),router[a19_0x135ac4(0xcd)]('/users/:id',adminController['getUserById']),router[a19_0x135ac4(0x7b)]('/users',(0x0,validation_1[a19_0x135ac4(0xcb)])(validation_1[a19_0x135ac4(0xe2)]),adminController[a19_0x135ac4(0x9d)]),router[a19_0x135ac4(0xee)](a19_0x135ac4(0x7c),(0x0,validation_1[a19_0x135ac4(0xcb)])(validation_1[a19_0x135ac4(0xa0)]),adminController['updateUser']),router[a19_0x135ac4(0xa9)]('/users/:id',adminController[a19_0x135ac4(0x96)]),router['post'](a19_0x135ac4(0x88),adminController[a19_0x135ac4(0xa8)]),router[a19_0x135ac4(0x7b)]('/users/:id/activate',adminController[a19_0x135ac4(0xad)]),router[a19_0x135ac4(0xcd)](a19_0x135ac4(0xe7),(_0x3134de,_0x49ea8b)=>{const _0x464088=a19_0x135ac4;try{const _0x1edfed=loggerService_1[_0x464088(0xb6)][_0x464088(0x85)]();_0x49ea8b[_0x464088(0xed)]({'success':!![],'result':_0x1edfed});}catch(_0x4b1e49){_0x49ea8b[_0x464088(0x81)](0x1f4)[_0x464088(0xed)]({'success':![],'message':_0x464088(0xda)});}}),router[a19_0x135ac4(0x7b)](a19_0x135ac4(0x89),(_0x589d73,_0x22a142)=>{const _0x52ad15=a19_0x135ac4;try{const {daysToKeep:daysToKeep=0x1e}=_0x589d73[_0x52ad15(0xdc)];loggerService_1[_0x52ad15(0xb6)][_0x52ad15(0x91)](daysToKeep),_0x22a142[_0x52ad15(0xed)]({'success':!![],'message':_0x52ad15(0x8b)+daysToKeep+_0x52ad15(0xbe)});}catch(_0x4fff5e){_0x22a142[_0x52ad15(0x81)](0x1f4)[_0x52ad15(0xed)]({'success':![],'message':_0x52ad15(0xcc)});}}),router[a19_0x135ac4(0x7b)](a19_0x135ac4(0xbc),async(_0x5aa1ea,_0x27ebe8)=>{const _0x352e35=a19_0x135ac4;try{const {paymentId:_0x46f729}=_0x5aa1ea[_0x352e35(0x8d)];console[_0x352e35(0xe6)](_0x352e35(0xb9)+_0x46f729),await coinToPayStatusService_1['coinToPayStatusService'][_0x352e35(0x99)](_0x46f729),_0x27ebe8['json']({'success':!![],'message':_0x352e35(0xab)});}catch(_0x2dd8d4){console[_0x352e35(0xaf)](_0x352e35(0xcf)+_0x5aa1ea[_0x352e35(0x8d)][_0x352e35(0xc2)]+':',_0x2dd8d4),_0x27ebe8['status'](0x1f4)[_0x352e35(0xed)]({'success':![],'message':_0x2dd8d4 instanceof Error?_0x2dd8d4[_0x352e35(0xec)]:'Failed\x20to\x20check\x20CoinToPay\x20payment\x20status'});}}),router['get'](a19_0x135ac4(0x94),(_0x49727d,_0x256456)=>{const _0x3f462b=a19_0x135ac4;try{const _0xcae07=coinToPayStatusService_1[_0x3f462b(0xd4)]['getServiceStats']();_0x256456['json']({'success':!![],'result':{..._0xcae07,'description':_0x3f462b(0xc8),'statusMapping':{'Paid':_0x3f462b(0xd2),'Awaiting\x20Fiat':_0x3f462b(0x82),'waiting':_0x3f462b(0x82),'expired':_0x3f462b(0xd9),'failed':_0x3f462b(0xa6)},'autoExpiryNote':_0x3f462b(0xdf)+_0xcae07[_0x3f462b(0xae)]+_0x3f462b(0xeb),'individualTimersNote':'Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly'}});}catch(_0x3022e4){_0x256456['status'](0x1f4)[_0x3f462b(0xed)]({'success':![],'message':'Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics'});}}),router['get']('/cointopay/payment/:paymentId',async(_0x1b7040,_0x40ba20)=>{const _0x19bacb=a19_0x135ac4;try{const {paymentId:_0x1456f8}=_0x1b7040[_0x19bacb(0x8d)],_0x240b2d=coinToPayStatusService_1[_0x19bacb(0xd4)][_0x19bacb(0xc3)](_0x1456f8),_0x3ab7cf=(await Promise[_0x19bacb(0xe3)]()[_0x19bacb(0xbd)](()=>__importStar(require(_0x19bacb(0xd0)))))[_0x19bacb(0x92)],_0x59d6f4=await _0x3ab7cf[_0x19bacb(0x87)][_0x19bacb(0xb7)]({'where':{'id':_0x1456f8},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x59d6f4)return _0x40ba20['status'](0x194)['json']({'success':![],'message':_0x19bacb(0xe4)});_0x40ba20[_0x19bacb(0xed)]({'success':!![],'result':{'payment':{'id':_0x59d6f4['id'],'gateway':_0x59d6f4[_0x19bacb(0xea)],'gatewayPaymentId':_0x59d6f4['gatewayPaymentId'],'status':_0x59d6f4[_0x19bacb(0x81)],'amount':_0x59d6f4[_0x19bacb(0x8e)],'currency':_0x59d6f4[_0x19bacb(0xce)],'createdAt':_0x59d6f4['createdAt'],'updatedAt':_0x59d6f4[_0x19bacb(0xf2)],'shop':_0x59d6f4[_0x19bacb(0xb5)]},'timers':_0x240b2d,'isCoinToPay':_0x59d6f4[_0x19bacb(0xea)]===_0x19bacb(0x86),'ageInMinutes':Math[_0x19bacb(0xa2)]((Date[_0x19bacb(0x8c)]()-_0x59d6f4[_0x19bacb(0x9f)][_0x19bacb(0xbb)]())/(0x3e8*0x3c))}});}catch(_0x265b20){_0x40ba20[_0x19bacb(0x81)](0x1f4)[_0x19bacb(0xed)]({'success':![],'message':_0x265b20 instanceof Error?_0x265b20[_0x19bacb(0xec)]:'Failed\x20to\x20get\x20payment\x20information'});}}),router[a19_0x135ac4(0xcd)](a19_0x135ac4(0xc4),(_0x1b861e,_0x316310)=>{const _0x9723b8=a19_0x135ac4;try{const _0x7c44c9=domainMonitoringService_1[_0x9723b8(0xaa)]['getMonitoringStats']();_0x316310[_0x9723b8(0xed)]({'success':!![],'result':{..._0x7c44c9,'description':_0x9723b8(0xe5),'behavior':_0x9723b8(0x9e),'encoding':'Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs'}});}catch(_0x3929cc){_0x316310[_0x9723b8(0x81)](0x1f4)[_0x9723b8(0xed)]({'success':![],'message':_0x9723b8(0x95)});}}),router[a19_0x135ac4(0x7b)]('/domain-monitoring/check',async(_0x10a239,_0x5ba251)=>{const _0x4d5ea7=a19_0x135ac4;try{const _0x429c64=await domainMonitoringService_1[_0x4d5ea7(0xaa)][_0x4d5ea7(0x98)]();_0x5ba251[_0x4d5ea7(0xed)]({'success':!![],'result':{'domainAvailable':_0x429c64,'message':_0x429c64?'Domain\x20is\x20responding\x20correctly':_0x4d5ea7(0xc9),'timestamp':new Date()[_0x4d5ea7(0x93)]()}});}catch(_0x1e3979){_0x5ba251['status'](0x1f4)[_0x4d5ea7(0xed)]({'success':![],'message':_0x1e3979 instanceof Error?_0x1e3979['message']:'Failed\x20to\x20perform\x20manual\x20domain\x20check'});}}),exports[a19_0x135ac4(0x92)]=router;