'use strict';const a19_0x123e8c=a19_0x5a37;(function(_0x5e6828,_0x2600a3){const _0x18c3c8=a19_0x5a37,_0x1bede1=_0x5e6828();while(!![]){try{const _0x95710d=-parseInt(_0x18c3c8(0x111))/0x1+parseInt(_0x18c3c8(0xf1))/0x2+parseInt(_0x18c3c8(0xac))/0x3+parseInt(_0x18c3c8(0x117))/0x4+parseInt(_0x18c3c8(0x10d))/0x5*(-parseInt(_0x18c3c8(0x109))/0x6)+-parseInt(_0x18c3c8(0xff))/0x7*(-parseInt(_0x18c3c8(0xea))/0x8)+-parseInt(_0x18c3c8(0xfe))/0x9;if(_0x95710d===_0x2600a3)break;else _0x1bede1['push'](_0x1bede1['shift']());}catch(_0x272016){_0x1bede1['push'](_0x1bede1['shift']());}}}(a19_0x32af,0x44d84));function a19_0x32af(){const _0x35d562=['requireAdmin','Failed\x20to\x20get\x20payment\x20information','deleteUser','manualCheck','getPaymentById','cointopay','AdminController','get','__createBinding','createdAt','put','create','Failed\x20to\x20clean\x20old\x20logs','resolve','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','CoinToPay\x20automatic\x20status\x20checking\x20service','/logs/clean','/users/:id/suspend','/payments/:id/customer','writable','PAID','status','Domain\x20check\x20failed','../controllers/adminController','1220936JEVZat','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','now','/logs/stats','shop','updateCustomerDataSchema','Router','815432pcAVCj','CoinToPay\x20payment\x20status\x20checked\x20successfully','coinToPayStatusService','amount','getPaymentTimerInfo','../middleware/auth','getUserById','__importStar','PENDING','params','getMerchantsSelection','updatePayment','paymentId','280683sbDbbl','14AcIdDY','/merchants/selection','getMonitoringStats','express','prototype','\x20days)','json','activateUser','/domain-monitoring/stats','getPayouts','6BwcRpY','/users','default','updateUserSchema','2620165OcuBsN','../services/coinToPayStatusService','Payments\x20automatically\x20expire\x20after\x20','FAILED','317893dujkUV','createUserSchema','/domain-monitoring/check','Domain\x20is\x20responding\x20correctly','authenticateToken','updatedAt','1368044kZMoKh','getStatistics','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','getPayments','body','getPayoutById','/cointopay/check/:paymentId','post','currency','../services/domainMonitoringService','createPayoutSchema','defineProperty','/payout/stats','findUnique','then','300420umnWiC','toISOString','../config/database','/payments/:id','getLogStats','Payment\x20not\x20found','gatewayPaymentId','updateCustomerData','getServiceStats','deletePayout','/merchant-statistics','getTime','gateway','length','message','/payouts/:id','createUser','Old\x20logs\x20cleaned\x20(kept\x20last\x20','loggerService','getOwnPropertyNames','domainMonitoringService','checkPaymentById','validate','checkAuth','getMerchantStatistics','../middleware/validation','expiryDays','EXPIRED','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','/cointopay/stats','delete','use','cleanOldLogs','/users/:id','getPayoutStats','/payout/merchants','__esModule'];a19_0x32af=function(){return _0x35d562;};return a19_0x32af();}var __createBinding=this&&this[a19_0x123e8c(0xd9)]||(Object[a19_0x123e8c(0xdc)]?function(_0x8fb237,_0x6734e1,_0x6101b0,_0x2fde6e){const _0x157441=a19_0x123e8c;if(_0x2fde6e===undefined)_0x2fde6e=_0x6101b0;var _0x3b1cb9=Object['getOwnPropertyDescriptor'](_0x6734e1,_0x6101b0);(!_0x3b1cb9||('get'in _0x3b1cb9?!_0x6734e1[_0x157441(0xd0)]:_0x3b1cb9[_0x157441(0xe5)]||_0x3b1cb9['configurable']))&&(_0x3b1cb9={'enumerable':!![],'get':function(){return _0x6734e1[_0x6101b0];}}),Object[_0x157441(0xa8)](_0x8fb237,_0x2fde6e,_0x3b1cb9);}:function(_0x1a9596,_0x4be5bb,_0x4c4fdc,_0x3fbe4e){if(_0x3fbe4e===undefined)_0x3fbe4e=_0x4c4fdc;_0x1a9596[_0x3fbe4e]=_0x4be5bb[_0x4c4fdc];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a19_0x123e8c(0xdc)]?function(_0x37af8a,_0x19bedb){const _0x3c82d5=a19_0x123e8c;Object[_0x3c82d5(0xa8)](_0x37af8a,_0x3c82d5(0x10b),{'enumerable':!![],'value':_0x19bedb});}:function(_0x5be6e0,_0x2cb6eb){_0x5be6e0['default']=_0x2cb6eb;}),__importStar=this&&this[a19_0x123e8c(0xf8)]||(function(){var _0xda67b8=function(_0x17f3ad){const _0xa1c636=a19_0x5a37;return _0xda67b8=Object[_0xa1c636(0xbf)]||function(_0x13f132){const _0x4b00a0=_0xa1c636;var _0x3468e4=[];for(var _0x1171cd in _0x13f132)if(Object[_0x4b00a0(0x103)]['hasOwnProperty']['call'](_0x13f132,_0x1171cd))_0x3468e4[_0x3468e4[_0x4b00a0(0xb9)]]=_0x1171cd;return _0x3468e4;},_0xda67b8(_0x17f3ad);};return function(_0x5cb4c4){const _0xe0417f=a19_0x5a37;if(_0x5cb4c4&&_0x5cb4c4['__esModule'])return _0x5cb4c4;var _0x4a8b85={};if(_0x5cb4c4!=null){for(var _0x4cec53=_0xda67b8(_0x5cb4c4),_0xf62c76=0x0;_0xf62c76<_0x4cec53[_0xe0417f(0xb9)];_0xf62c76++)if(_0x4cec53[_0xf62c76]!=='default')__createBinding(_0x4a8b85,_0x5cb4c4,_0x4cec53[_0xf62c76]);}return __setModuleDefault(_0x4a8b85,_0x5cb4c4),_0x4a8b85;};}());Object[a19_0x123e8c(0xa8)](exports,'__esModule',{'value':!![]});const express_1=require(a19_0x123e8c(0x102)),adminController_1=require(a19_0x123e8c(0xe9)),validation_1=require(a19_0x123e8c(0xc5)),auth_1=require(a19_0x123e8c(0xf6)),loggerService_1=require('../services/loggerService'),coinToPayStatusService_1=require(a19_0x123e8c(0x10e)),domainMonitoringService_1=require(a19_0x123e8c(0xa6)),router=(0x0,express_1[a19_0x123e8c(0xf0)])(),adminController=new adminController_1[(a19_0x123e8c(0xd7))]();function a19_0x5a37(_0x114b92,_0x15688e){const _0x32af5a=a19_0x32af();return a19_0x5a37=function(_0x5a3783,_0x17f980){_0x5a3783=_0x5a3783-0x9e;let _0x2e8134=_0x32af5a[_0x5a3783];return _0x2e8134;},a19_0x5a37(_0x114b92,_0x15688e);}router[a19_0x123e8c(0xcb)](auth_1[a19_0x123e8c(0x115)],auth_1[a19_0x123e8c(0xd1)]),router[a19_0x123e8c(0xd8)]('/auth',adminController[a19_0x123e8c(0xc3)]),router[a19_0x123e8c(0xd8)]('/statistics',adminController[a19_0x123e8c(0x9e)]),router[a19_0x123e8c(0xd8)](a19_0x123e8c(0xb6),adminController[a19_0x123e8c(0xc4)]),router[a19_0x123e8c(0xd8)](a19_0x123e8c(0xa9),adminController[a19_0x123e8c(0xce)]),router[a19_0x123e8c(0xd8)](a19_0x123e8c(0xcf),adminController['getMerchantsAwaitingPayout']),router[a19_0x123e8c(0xd8)](a19_0x123e8c(0x100),adminController[a19_0x123e8c(0xfb)]),router[a19_0x123e8c(0xa4)]('/payout',(0x0,validation_1[a19_0x123e8c(0xc2)])(validation_1[a19_0x123e8c(0xa7)]),adminController['createPayout']),router['get']('/payouts',adminController[a19_0x123e8c(0x108)]),router[a19_0x123e8c(0xd8)]('/payouts/:id',adminController[a19_0x123e8c(0xa2)]),router['delete'](a19_0x123e8c(0xbb),adminController[a19_0x123e8c(0xb5)]),router[a19_0x123e8c(0xd8)]('/payments',adminController[a19_0x123e8c(0xa0)]),router[a19_0x123e8c(0xd8)](a19_0x123e8c(0xaf),adminController[a19_0x123e8c(0xd5)]),router[a19_0x123e8c(0xdb)]('/payments/:id',adminController[a19_0x123e8c(0xfc)]),router['put'](a19_0x123e8c(0xe4),(0x0,validation_1[a19_0x123e8c(0xc2)])(validation_1[a19_0x123e8c(0xef)]),adminController[a19_0x123e8c(0xb3)]),router['get'](a19_0x123e8c(0x10a),adminController['getUsers']),router[a19_0x123e8c(0xd8)](a19_0x123e8c(0xcd),adminController[a19_0x123e8c(0xf7)]),router[a19_0x123e8c(0xa4)](a19_0x123e8c(0x10a),(0x0,validation_1['validate'])(validation_1[a19_0x123e8c(0x112)]),adminController[a19_0x123e8c(0xbc)]),router[a19_0x123e8c(0xdb)](a19_0x123e8c(0xcd),(0x0,validation_1[a19_0x123e8c(0xc2)])(validation_1[a19_0x123e8c(0x10c)]),adminController['updateUser']),router[a19_0x123e8c(0xca)](a19_0x123e8c(0xcd),adminController[a19_0x123e8c(0xd3)]),router[a19_0x123e8c(0xa4)](a19_0x123e8c(0xe3),adminController['suspendUser']),router[a19_0x123e8c(0xa4)]('/users/:id/activate',adminController[a19_0x123e8c(0x106)]),router['get'](a19_0x123e8c(0xed),(_0xaf78e9,_0xa44d50)=>{const _0x5d8722=a19_0x123e8c;try{const _0x1bd506=loggerService_1[_0x5d8722(0xbe)][_0x5d8722(0xb0)]();_0xa44d50[_0x5d8722(0x105)]({'success':!![],'result':_0x1bd506});}catch(_0x106962){_0xa44d50[_0x5d8722(0xe7)](0x1f4)[_0x5d8722(0x105)]({'success':![],'message':'Failed\x20to\x20get\x20log\x20statistics'});}}),router['post'](a19_0x123e8c(0xe2),(_0x45e37b,_0x4f6aae)=>{const _0x20dcc2=a19_0x123e8c;try{const {daysToKeep:daysToKeep=0x1e}=_0x45e37b[_0x20dcc2(0xa1)];loggerService_1[_0x20dcc2(0xbe)][_0x20dcc2(0xcc)](daysToKeep),_0x4f6aae[_0x20dcc2(0x105)]({'success':!![],'message':_0x20dcc2(0xbd)+daysToKeep+_0x20dcc2(0x104)});}catch(_0x22a3d9){_0x4f6aae['status'](0x1f4)[_0x20dcc2(0x105)]({'success':![],'message':_0x20dcc2(0xdd)});}}),router[a19_0x123e8c(0xa4)](a19_0x123e8c(0xa3),async(_0x43ae20,_0x4be8e1)=>{const _0x2ef88a=a19_0x123e8c;try{const {paymentId:_0x2c5406}=_0x43ae20[_0x2ef88a(0xfa)];console['log']('🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20'+_0x2c5406),await coinToPayStatusService_1[_0x2ef88a(0xf3)][_0x2ef88a(0xc1)](_0x2c5406),_0x4be8e1[_0x2ef88a(0x105)]({'success':!![],'message':_0x2ef88a(0xf2)});}catch(_0x5735e5){console['error']('❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20'+_0x43ae20[_0x2ef88a(0xfa)][_0x2ef88a(0xfd)]+':',_0x5735e5),_0x4be8e1[_0x2ef88a(0xe7)](0x1f4)[_0x2ef88a(0x105)]({'success':![],'message':_0x5735e5 instanceof Error?_0x5735e5[_0x2ef88a(0xba)]:'Failed\x20to\x20check\x20CoinToPay\x20payment\x20status'});}}),router[a19_0x123e8c(0xd8)](a19_0x123e8c(0xc9),(_0x10453f,_0x1b5371)=>{const _0x55325f=a19_0x123e8c;try{const _0x12edfb=coinToPayStatusService_1[_0x55325f(0xf3)][_0x55325f(0xb4)]();_0x1b5371[_0x55325f(0x105)]({'success':!![],'result':{..._0x12edfb,'description':_0x55325f(0xe1),'statusMapping':{'Paid':_0x55325f(0xe6),'Awaiting\x20Fiat':_0x55325f(0xf9),'waiting':'PENDING','expired':_0x55325f(0xc7),'failed':_0x55325f(0x110)},'autoExpiryNote':_0x55325f(0x10f)+_0x12edfb[_0x55325f(0xc6)]+'\x20days\x20if\x20not\x20paid','individualTimersNote':_0x55325f(0xe0)}});}catch(_0x50da44){_0x1b5371[_0x55325f(0xe7)](0x1f4)[_0x55325f(0x105)]({'success':![],'message':_0x55325f(0xc8)});}}),router[a19_0x123e8c(0xd8)]('/cointopay/payment/:paymentId',async(_0x12a89f,_0x2671c9)=>{const _0x12ff3d=a19_0x123e8c;try{const {paymentId:_0x4882b8}=_0x12a89f['params'],_0x35b51d=coinToPayStatusService_1['coinToPayStatusService'][_0x12ff3d(0xf5)](_0x4882b8),_0x512245=(await Promise[_0x12ff3d(0xde)]()[_0x12ff3d(0xab)](()=>__importStar(require(_0x12ff3d(0xae)))))[_0x12ff3d(0x10b)],_0x4f227f=await _0x512245['payment'][_0x12ff3d(0xaa)]({'where':{'id':_0x4882b8},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x4f227f)return _0x2671c9['status'](0x194)[_0x12ff3d(0x105)]({'success':![],'message':_0x12ff3d(0xb1)});_0x2671c9[_0x12ff3d(0x105)]({'success':!![],'result':{'payment':{'id':_0x4f227f['id'],'gateway':_0x4f227f[_0x12ff3d(0xb8)],'gatewayPaymentId':_0x4f227f[_0x12ff3d(0xb2)],'status':_0x4f227f[_0x12ff3d(0xe7)],'amount':_0x4f227f[_0x12ff3d(0xf4)],'currency':_0x4f227f[_0x12ff3d(0xa5)],'createdAt':_0x4f227f[_0x12ff3d(0xda)],'updatedAt':_0x4f227f[_0x12ff3d(0x116)],'shop':_0x4f227f[_0x12ff3d(0xee)]},'timers':_0x35b51d,'isCoinToPay':_0x4f227f['gateway']===_0x12ff3d(0xd6),'ageInMinutes':Math['floor']((Date[_0x12ff3d(0xec)]()-_0x4f227f[_0x12ff3d(0xda)][_0x12ff3d(0xb7)]())/(0x3e8*0x3c))}});}catch(_0x21851e){_0x2671c9['status'](0x1f4)[_0x12ff3d(0x105)]({'success':![],'message':_0x21851e instanceof Error?_0x21851e[_0x12ff3d(0xba)]:_0x12ff3d(0xd2)});}}),router[a19_0x123e8c(0xd8)](a19_0x123e8c(0x107),(_0x431825,_0x2d0cfc)=>{const _0x1509c7=a19_0x123e8c;try{const _0x571d06=domainMonitoringService_1[_0x1509c7(0xc0)][_0x1509c7(0x101)]();_0x2d0cfc[_0x1509c7(0x105)]({'success':!![],'result':{..._0x571d06,'description':_0x1509c7(0xdf),'behavior':'Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','encoding':_0x1509c7(0xeb)}});}catch(_0xabbdba){_0x2d0cfc[_0x1509c7(0xe7)](0x1f4)[_0x1509c7(0x105)]({'success':![],'message':_0x1509c7(0x9f)});}}),router['post'](a19_0x123e8c(0x113),async(_0x40f579,_0x45ca95)=>{const _0xcdfd98=a19_0x123e8c;try{const _0x1b9995=await domainMonitoringService_1[_0xcdfd98(0xc0)][_0xcdfd98(0xd4)]();_0x45ca95['json']({'success':!![],'result':{'domainAvailable':_0x1b9995,'message':_0x1b9995?_0xcdfd98(0x114):_0xcdfd98(0xe8),'timestamp':new Date()[_0xcdfd98(0xad)]()}});}catch(_0x1c66bb){_0x45ca95['status'](0x1f4)[_0xcdfd98(0x105)]({'success':![],'message':_0x1c66bb instanceof Error?_0x1c66bb[_0xcdfd98(0xba)]:'Failed\x20to\x20perform\x20manual\x20domain\x20check'});}}),exports[a19_0x123e8c(0x10b)]=router;