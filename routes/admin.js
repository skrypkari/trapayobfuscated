'use strict';const a25_0x51477d=a25_0x2a46;(function(_0x4d099e,_0x3da6f6){const _0x87ea6c=a25_0x2a46,_0xddb167=_0x4d099e();while(!![]){try{const _0x1e6533=-parseInt(_0x87ea6c(0x132))/0x1+parseInt(_0x87ea6c(0x151))/0x2+-parseInt(_0x87ea6c(0x135))/0x3*(-parseInt(_0x87ea6c(0x17b))/0x4)+parseInt(_0x87ea6c(0x16a))/0x5+parseInt(_0x87ea6c(0x168))/0x6*(parseInt(_0x87ea6c(0x153))/0x7)+parseInt(_0x87ea6c(0x133))/0x8*(parseInt(_0x87ea6c(0x183))/0x9)+-parseInt(_0x87ea6c(0x147))/0xa;if(_0x1e6533===_0x3da6f6)break;else _0xddb167['push'](_0xddb167['shift']());}catch(_0x18aec5){_0xddb167['push'](_0xddb167['shift']());}}}(a25_0x2978,0x8c66d));function a25_0x2a46(_0x3dd70b,_0x5f588f){_0x3dd70b=_0x3dd70b-0xff;const _0x2978c9=a25_0x2978();let _0x2a46e0=_0x2978c9[_0x3dd70b];return _0x2a46e0;}function a25_0x2978(){const _0x47d863=['validate','Domain\x20check\x20failed','getLogStats','/payout/merchants','updateCustomerData','express','../controllers/adminController','/domain-monitoring/stats','/payments','createUser','/payout','/payments/cleanup','now','46086czdqmG','body','2149945PcwwNU','params','loggerService','message','enableAdmin2FA','/logs/stats','EXPIRED','toISOString','../middleware/validation','getMerchantsSelection','PENDING','updateCustomerDataSchema','FAILED','gatewayPaymentId','Failed\x20to\x20clean\x20old\x20logs','../middleware/auth','Old\x20logs\x20cleaned\x20(kept\x20last\x20','4qTCtiW','/payouts/reports','delete','\x20days\x20if\x20not\x20paid','/domain-monitoring/check','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','Payment\x20not\x20found','then','2956599vfcNGL','/logs/clean','paymentId','PAID','/payments/cleanup-with-report','get','AdminController','expiryDays','setup2FA','updatePayout','/payout/stats','resolve','status','createdAt','createPayout','/2fa/enable','/payments/:id','getMerchantStatistics','/shops/:shopId/2fa/setup','getPaymentById','Payments\x20automatically\x20expire\x20after\x20','floor','getUserById','disable2FA','createUserSchema','__esModule','getProcessingPaymentsStats','getOwnPropertyDescriptor','../services/domainMonitoringService','/2fa/settings','shop','getPayouts','hasOwnProperty','/users','getStatistics','/shops/:shopId/wallets','cleanOldLogs','__importStar','put','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','/users/:id','/2fa/disable','default','cleanupStalePayments','getServiceStats','checkPaymentById','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','/merchants/selection','updatedAt','checkAuth','getOwnPropertyNames','Failed\x20to\x20perform\x20manual\x20domain\x20check','cleanupStalePendingPayments','json','domainMonitoringService','authenticateToken','changePasswordSchema','getUsers','getMonitoringStats','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','getShopWallets','/cointopay/payment/:paymentId','getPayments','use','../services/loggerService','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','/shops/:shopId/2fa/enable','updatePayoutSchema','get2FASettings','/users/:id/suspend','error','/auth','Domain\x20is\x20responding\x20correctly','1098005EwDPGi','8IHvtbx','/payments/processing-stats','2804649wmTCIG','/payments/cleanup-pending','deleteUser','activateUser','updateUserSchema','/payouts/:id','prototype','Failed\x20to\x20get\x20log\x20statistics','\x20days)','__createBinding','coinToPayStatusService','post','writable','currency','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','/2fa/setup','create','getPayoutStats','11455130gTOfyN','requireAdmin','manualCheck','deletePayout','../services/coinToPayStatusService','call','/users/:id/activate','updatePayment','../config/database','/cointopay/check/:paymentId','115122OlWsxe','/payouts','973ZkySKp','cleanupStalePaymentsWithReport','expirePaymentLinks','suspendUser','findUnique','/statistics','length','defineProperty'];a25_0x2978=function(){return _0x47d863;};return a25_0x2978();}var __createBinding=this&&this[a25_0x51477d(0x13e)]||(Object[a25_0x51477d(0x145)]?function(_0x43fcd7,_0x3e5826,_0x237fff,_0x482c11){const _0x5dcdfe=a25_0x51477d;if(_0x482c11===undefined)_0x482c11=_0x237fff;var _0x47c98e=Object[_0x5dcdfe(0x104)](_0x3e5826,_0x237fff);(!_0x47c98e||(_0x5dcdfe(0x188)in _0x47c98e?!_0x3e5826[_0x5dcdfe(0x102)]:_0x47c98e[_0x5dcdfe(0x141)]||_0x47c98e['configurable']))&&(_0x47c98e={'enumerable':!![],'get':function(){return _0x3e5826[_0x237fff];}}),Object[_0x5dcdfe(0x15a)](_0x43fcd7,_0x482c11,_0x47c98e);}:function(_0x1d73ee,_0x5d4da4,_0x5b0c6b,_0x1423db){if(_0x1423db===undefined)_0x1423db=_0x5b0c6b;_0x1d73ee[_0x1423db]=_0x5d4da4[_0x5b0c6b];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a25_0x51477d(0x145)]?function(_0x3827d2,_0x537d70){const _0x3119a6=a25_0x51477d;Object[_0x3119a6(0x15a)](_0x3827d2,_0x3119a6(0x113),{'enumerable':!![],'value':_0x537d70});}:function(_0x3ea6e2,_0x201d45){const _0x2287dd=a25_0x51477d;_0x3ea6e2[_0x2287dd(0x113)]=_0x201d45;}),__importStar=this&&this[a25_0x51477d(0x10e)]||(function(){var _0x3b323d=function(_0x593d51){const _0x2f59f4=a25_0x2a46;return _0x3b323d=Object[_0x2f59f4(0x11b)]||function(_0x3dec72){const _0x3b335c=_0x2f59f4;var _0x2376e5=[];for(var _0x55639a in _0x3dec72)if(Object[_0x3b335c(0x13b)][_0x3b335c(0x109)][_0x3b335c(0x14c)](_0x3dec72,_0x55639a))_0x2376e5[_0x2376e5['length']]=_0x55639a;return _0x2376e5;},_0x3b323d(_0x593d51);};return function(_0x425cb3){const _0x452cb6=a25_0x2a46;if(_0x425cb3&&_0x425cb3[_0x452cb6(0x102)])return _0x425cb3;var _0x13660a={};if(_0x425cb3!=null){for(var _0x2da972=_0x3b323d(_0x425cb3),_0x5cd188=0x0;_0x5cd188<_0x2da972[_0x452cb6(0x159)];_0x5cd188++)if(_0x2da972[_0x5cd188]!==_0x452cb6(0x113))__createBinding(_0x13660a,_0x425cb3,_0x2da972[_0x5cd188]);}return __setModuleDefault(_0x13660a,_0x425cb3),_0x13660a;};}());Object['defineProperty'](exports,a25_0x51477d(0x102),{'value':!![]});const express_1=require(a25_0x51477d(0x160)),adminController_1=require(a25_0x51477d(0x161)),validation_1=require(a25_0x51477d(0x172)),auth_1=require(a25_0x51477d(0x179)),loggerService_1=require(a25_0x51477d(0x129)),coinToPayStatusService_1=require(a25_0x51477d(0x14b)),domainMonitoringService_1=require(a25_0x51477d(0x105)),router=(0x0,express_1['Router'])(),adminController=new adminController_1[(a25_0x51477d(0x189))]();router[a25_0x51477d(0x128)](auth_1[a25_0x51477d(0x120)],auth_1[a25_0x51477d(0x148)]),router[a25_0x51477d(0x188)](a25_0x51477d(0x130),adminController[a25_0x51477d(0x11a)]),router[a25_0x51477d(0x188)](a25_0x51477d(0x158),adminController[a25_0x51477d(0x10b)]),router[a25_0x51477d(0x188)]('/merchant-statistics',adminController[a25_0x51477d(0x194)]),router['get'](a25_0x51477d(0x18d),adminController[a25_0x51477d(0x146)]),router['get'](a25_0x51477d(0x15e),adminController['getMerchantsAwaitingPayout']),router[a25_0x51477d(0x188)](a25_0x51477d(0x17c),adminController['getPayoutReports']),router[a25_0x51477d(0x188)](a25_0x51477d(0x118),adminController[a25_0x51477d(0x173)]),router['post'](a25_0x51477d(0x165),(0x0,validation_1['validate'])(validation_1['createPayoutSchema']),adminController[a25_0x51477d(0x191)]),router[a25_0x51477d(0x10f)]('/payout/:id',(0x0,validation_1[a25_0x51477d(0x15b)])(validation_1[a25_0x51477d(0x12c)]),adminController[a25_0x51477d(0x18c)]),router[a25_0x51477d(0x188)](a25_0x51477d(0x152),adminController[a25_0x51477d(0x108)]),router[a25_0x51477d(0x188)]('/payouts/:id',adminController['getPayoutById']),router[a25_0x51477d(0x17d)](a25_0x51477d(0x13a),adminController[a25_0x51477d(0x14a)]),router['get'](a25_0x51477d(0x163),adminController[a25_0x51477d(0x127)]),router['get'](a25_0x51477d(0x193),adminController[a25_0x51477d(0x196)]),router['put']('/payments/:id',adminController[a25_0x51477d(0x14e)]),router[a25_0x51477d(0x10f)]('/payments/:id/customer',(0x0,validation_1[a25_0x51477d(0x15b)])(validation_1[a25_0x51477d(0x175)]),adminController[a25_0x51477d(0x15f)]),router[a25_0x51477d(0x188)](a25_0x51477d(0x134),adminController[a25_0x51477d(0x103)]),router[a25_0x51477d(0x140)](a25_0x51477d(0x166),adminController[a25_0x51477d(0x114)]),router[a25_0x51477d(0x140)](a25_0x51477d(0x136),adminController[a25_0x51477d(0x11d)]),router[a25_0x51477d(0x140)](a25_0x51477d(0x187),adminController[a25_0x51477d(0x154)]),router['post']('/payment-links/expire',adminController[a25_0x51477d(0x155)]),router[a25_0x51477d(0x188)]('/users',adminController[a25_0x51477d(0x122)]),router[a25_0x51477d(0x188)](a25_0x51477d(0x111),adminController[a25_0x51477d(0xff)]),router[a25_0x51477d(0x140)](a25_0x51477d(0x10a),(0x0,validation_1[a25_0x51477d(0x15b)])(validation_1[a25_0x51477d(0x101)]),adminController[a25_0x51477d(0x164)]),router[a25_0x51477d(0x10f)](a25_0x51477d(0x111),(0x0,validation_1[a25_0x51477d(0x15b)])(validation_1[a25_0x51477d(0x139)]),adminController['updateUser']),router[a25_0x51477d(0x17d)](a25_0x51477d(0x111),adminController[a25_0x51477d(0x137)]),router[a25_0x51477d(0x188)](a25_0x51477d(0x10c),adminController[a25_0x51477d(0x125)]),router[a25_0x51477d(0x140)](a25_0x51477d(0x195),adminController[a25_0x51477d(0x18b)]),router[a25_0x51477d(0x140)](a25_0x51477d(0x12b),adminController['enable2FA']),router[a25_0x51477d(0x140)]('/shops/:shopId/2fa/disable',adminController[a25_0x51477d(0x100)]),router[a25_0x51477d(0x140)]('/password',(0x0,validation_1[a25_0x51477d(0x15b)])(validation_1[a25_0x51477d(0x121)]),adminController['changeAdminPassword']),router[a25_0x51477d(0x188)](a25_0x51477d(0x106),adminController[a25_0x51477d(0x12d)]),router[a25_0x51477d(0x140)](a25_0x51477d(0x144),adminController['setupAdmin2FA']),router[a25_0x51477d(0x140)](a25_0x51477d(0x192),adminController[a25_0x51477d(0x16e)]),router[a25_0x51477d(0x140)](a25_0x51477d(0x112),adminController['disableAdmin2FA']),router[a25_0x51477d(0x140)](a25_0x51477d(0x12e),adminController[a25_0x51477d(0x156)]),router['post'](a25_0x51477d(0x14d),adminController[a25_0x51477d(0x138)]),router[a25_0x51477d(0x188)](a25_0x51477d(0x16f),(_0x5d86a3,_0x468ea2)=>{const _0x5e4e9d=a25_0x51477d;try{const _0xa940d6=loggerService_1['loggerService'][_0x5e4e9d(0x15d)]();_0x468ea2[_0x5e4e9d(0x11e)]({'success':!![],'result':_0xa940d6});}catch(_0x25156d){_0x468ea2[_0x5e4e9d(0x18f)](0x1f4)[_0x5e4e9d(0x11e)]({'success':![],'message':_0x5e4e9d(0x13c)});}}),router['post'](a25_0x51477d(0x184),(_0x376550,_0x4e1589)=>{const _0x5890c3=a25_0x51477d;try{const {daysToKeep:daysToKeep=0x1e}=_0x376550[_0x5890c3(0x169)];loggerService_1[_0x5890c3(0x16c)][_0x5890c3(0x10d)](daysToKeep),_0x4e1589[_0x5890c3(0x11e)]({'success':!![],'message':_0x5890c3(0x17a)+daysToKeep+_0x5890c3(0x13d)});}catch(_0x3d8e0d){_0x4e1589[_0x5890c3(0x18f)](0x1f4)[_0x5890c3(0x11e)]({'success':![],'message':_0x5890c3(0x178)});}}),router[a25_0x51477d(0x140)](a25_0x51477d(0x150),async(_0xc5836a,_0x48a42d)=>{const _0x5cde8a=a25_0x51477d;try{const {paymentId:_0x5f540a}=_0xc5836a[_0x5cde8a(0x16b)];console['log'](_0x5cde8a(0x143)+_0x5f540a),await coinToPayStatusService_1['coinToPayStatusService'][_0x5cde8a(0x116)](_0x5f540a),_0x48a42d['json']({'success':!![],'message':'CoinToPay\x20payment\x20status\x20checked\x20successfully'});}catch(_0x53effe){console[_0x5cde8a(0x12f)](_0x5cde8a(0x117)+_0xc5836a['params'][_0x5cde8a(0x185)]+':',_0x53effe),_0x48a42d['status'](0x1f4)[_0x5cde8a(0x11e)]({'success':![],'message':_0x53effe instanceof Error?_0x53effe[_0x5cde8a(0x16d)]:'Failed\x20to\x20check\x20CoinToPay\x20payment\x20status'});}}),router['get']('/cointopay/stats',(_0x4003a5,_0xffbc47)=>{const _0x56edce=a25_0x51477d;try{const _0x12a080=coinToPayStatusService_1[_0x56edce(0x13f)][_0x56edce(0x115)]();_0xffbc47[_0x56edce(0x11e)]({'success':!![],'result':{..._0x12a080,'description':'CoinToPay\x20automatic\x20status\x20checking\x20service','statusMapping':{'Paid':_0x56edce(0x186),'Awaiting\x20Fiat':_0x56edce(0x174),'waiting':_0x56edce(0x174),'expired':_0x56edce(0x170),'failed':_0x56edce(0x176)},'autoExpiryNote':_0x56edce(0x197)+_0x12a080[_0x56edce(0x18a)]+_0x56edce(0x17e),'individualTimersNote':'Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly'}});}catch(_0x23caa2){_0xffbc47[_0x56edce(0x18f)](0x1f4)[_0x56edce(0x11e)]({'success':![],'message':_0x56edce(0x110)});}}),router['get'](a25_0x51477d(0x126),async(_0x3fcdc2,_0x1df321)=>{const _0x2293c4=a25_0x51477d;try{const {paymentId:_0x5bd144}=_0x3fcdc2[_0x2293c4(0x16b)],_0x21b94c=coinToPayStatusService_1[_0x2293c4(0x13f)]['getPaymentTimerInfo'](_0x5bd144),_0x2b7ed1=(await Promise[_0x2293c4(0x18e)]()[_0x2293c4(0x182)](()=>__importStar(require(_0x2293c4(0x14f)))))[_0x2293c4(0x113)],_0x53f484=await _0x2b7ed1['payment'][_0x2293c4(0x157)]({'where':{'id':_0x5bd144},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x53f484)return _0x1df321[_0x2293c4(0x18f)](0x194)['json']({'success':![],'message':_0x2293c4(0x181)});_0x1df321[_0x2293c4(0x11e)]({'success':!![],'result':{'payment':{'id':_0x53f484['id'],'gateway':_0x53f484['gateway'],'gatewayPaymentId':_0x53f484[_0x2293c4(0x177)],'status':_0x53f484[_0x2293c4(0x18f)],'amount':_0x53f484['amount'],'currency':_0x53f484[_0x2293c4(0x142)],'createdAt':_0x53f484[_0x2293c4(0x190)],'updatedAt':_0x53f484[_0x2293c4(0x119)],'shop':_0x53f484[_0x2293c4(0x107)]},'timers':_0x21b94c,'isCoinToPay':_0x53f484['gateway']==='cointopay','ageInMinutes':Math[_0x2293c4(0x198)]((Date[_0x2293c4(0x167)]()-_0x53f484[_0x2293c4(0x190)]['getTime']())/(0x3e8*0x3c))}});}catch(_0x4d6138){_0x1df321[_0x2293c4(0x18f)](0x1f4)[_0x2293c4(0x11e)]({'success':![],'message':_0x4d6138 instanceof Error?_0x4d6138[_0x2293c4(0x16d)]:'Failed\x20to\x20get\x20payment\x20information'});}}),router[a25_0x51477d(0x188)](a25_0x51477d(0x162),(_0x240ded,_0x6ee6b)=>{const _0x2920ed=a25_0x51477d;try{const _0x2b7cb4=domainMonitoringService_1[_0x2920ed(0x11f)][_0x2920ed(0x123)]();_0x6ee6b[_0x2920ed(0x11e)]({'success':!![],'result':{..._0x2b7cb4,'description':'Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','behavior':_0x2920ed(0x180),'encoding':_0x2920ed(0x12a)}});}catch(_0x1701e1){_0x6ee6b[_0x2920ed(0x18f)](0x1f4)[_0x2920ed(0x11e)]({'success':![],'message':_0x2920ed(0x124)});}}),router[a25_0x51477d(0x140)](a25_0x51477d(0x17f),async(_0x327e0f,_0x59b6fb)=>{const _0x19c3d3=a25_0x51477d;try{const _0x5ce9f6=await domainMonitoringService_1[_0x19c3d3(0x11f)][_0x19c3d3(0x149)]();_0x59b6fb['json']({'success':!![],'result':{'domainAvailable':_0x5ce9f6,'message':_0x5ce9f6?_0x19c3d3(0x131):_0x19c3d3(0x15c),'timestamp':new Date()[_0x19c3d3(0x171)]()}});}catch(_0xdfbd4a){_0x59b6fb[_0x19c3d3(0x18f)](0x1f4)[_0x19c3d3(0x11e)]({'success':![],'message':_0xdfbd4a instanceof Error?_0xdfbd4a[_0x19c3d3(0x16d)]:_0x19c3d3(0x11c)});}}),exports['default']=router;