'use strict';const a19_0x29ef3c=a19_0x1188;function a19_0x1188(_0x3c90bf,_0x3d564d){const _0x42d787=a19_0x42d7();return a19_0x1188=function(_0x1188be,_0x31835a){_0x1188be=_0x1188be-0x9b;let _0x958dd1=_0x42d787[_0x1188be];return _0x958dd1;},a19_0x1188(_0x3c90bf,_0x3d564d);}(function(_0x33c7a4,_0x1b887f){const _0x24c778=a19_0x1188,_0x450e8c=_0x33c7a4();while(!![]){try{const _0x59ae56=parseInt(_0x24c778(0x116))/0x1*(parseInt(_0x24c778(0xd6))/0x2)+-parseInt(_0x24c778(0xcb))/0x3+parseInt(_0x24c778(0xe1))/0x4+parseInt(_0x24c778(0x102))/0x5+-parseInt(_0x24c778(0x111))/0x6+-parseInt(_0x24c778(0xa0))/0x7+-parseInt(_0x24c778(0xbe))/0x8*(parseInt(_0x24c778(0xb0))/0x9);if(_0x59ae56===_0x1b887f)break;else _0x450e8c['push'](_0x450e8c['shift']());}catch(_0x484848){_0x450e8c['push'](_0x450e8c['shift']());}}}(a19_0x42d7,0x778ea));function a19_0x42d7(){const _0xf48d=['length','1800806rlqAka','getOwnPropertyNames','/domain-monitoring/stats','authenticateToken','post','getOwnPropertyDescriptor','call','put','../middleware/auth','Old\x20logs\x20cleaned\x20(kept\x20last\x20','loggerService','/users/:id/suspend','__importStar','checkPaymentById','/merchants/selection','use','36EnAfEN','floor','findUnique','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','../controllers/adminController','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','Failed\x20to\x20get\x20payment\x20information','getPaymentTimerInfo','activateUser','getUserById','express','Domain\x20is\x20responding\x20correctly','createdAt','/payout','491912MZaSOm','../middleware/validation','cointopay','/logs/stats','/users/:id/activate','updateCustomerData','PENDING','default','payment','FAILED','/users','CoinToPay\x20automatic\x20status\x20checking\x20service','expiryDays','657087HErNPV','getUsers','getPayouts','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','/payouts','getMerchantStatistics','/users/:id','/payouts/:id','Domain\x20check\x20failed','manualCheck','domainMonitoringService','193410QGHXgN','status','__setModuleDefault','requireAdmin','createUserSchema','/auth','log','createPayout','message','/cointopay/check/:paymentId','createPayoutSchema','1779792IoPCoP','resolve','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','/payments/:id','getTime','getLogStats','paymentId','gateway','Failed\x20to\x20perform\x20manual\x20domain\x20check','shop','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','configurable','updateCustomerDataSchema','get','../services/coinToPayStatusService','params','AdminController','/payout/stats','Router','deleteUser','currency','defineProperty','getMonitoringStats','json','cleanOldLogs','updateUserSchema','PAID','body','updateUser','validate','__esModule','Failed\x20to\x20clean\x20old\x20logs','toISOString','4050285LAyIui','getPayoutStats','createUser','/payout/merchants','../services/domainMonitoringService','\x20days\x20if\x20not\x20paid','writable','getMerchantsSelection','updatedAt','getMerchantsAwaitingPayout','prototype','/domain-monitoring/check','/payments/:id/customer','coinToPayStatusService','EXPIRED','5480406QKscKS','../config/database','/payments','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','CoinToPay\x20payment\x20status\x20checked\x20successfully','9bRHbtv','/statistics','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','/merchant-statistics','deletePayout','Payments\x20automatically\x20expire\x20after\x20','now'];a19_0x42d7=function(){return _0xf48d;};return a19_0x42d7();}var __createBinding=this&&this['__createBinding']||(Object['create']?function(_0x57fa7d,_0x40cb0c,_0x1e40e6,_0x74d9f9){const _0x5bef31=a19_0x1188;if(_0x74d9f9===undefined)_0x74d9f9=_0x1e40e6;var _0x45f3bb=Object[_0x5bef31(0xa5)](_0x40cb0c,_0x1e40e6);(!_0x45f3bb||('get'in _0x45f3bb?!_0x40cb0c['__esModule']:_0x45f3bb[_0x5bef31(0x108)]||_0x45f3bb[_0x5bef31(0xec)]))&&(_0x45f3bb={'enumerable':!![],'get':function(){return _0x40cb0c[_0x1e40e6];}}),Object['defineProperty'](_0x57fa7d,_0x74d9f9,_0x45f3bb);}:function(_0x13017f,_0x2bd113,_0x70134e,_0x3dcb78){if(_0x3dcb78===undefined)_0x3dcb78=_0x70134e;_0x13017f[_0x3dcb78]=_0x2bd113[_0x70134e];}),__setModuleDefault=this&&this[a19_0x29ef3c(0xd8)]||(Object['create']?function(_0x455fdc,_0xf1dd87){const _0xf93d7a=a19_0x29ef3c;Object[_0xf93d7a(0xf6)](_0x455fdc,_0xf93d7a(0xc5),{'enumerable':!![],'value':_0xf1dd87});}:function(_0x3d7c91,_0x5e5f80){const _0x501561=a19_0x29ef3c;_0x3d7c91[_0x501561(0xc5)]=_0x5e5f80;}),__importStar=this&&this[a19_0x29ef3c(0xac)]||(function(){var _0x4ed257=function(_0x497c26){const _0x150d93=a19_0x1188;return _0x4ed257=Object[_0x150d93(0xa1)]||function(_0x5aee77){const _0x50c75b=_0x150d93;var _0x28ce36=[];for(var _0x563039 in _0x5aee77)if(Object[_0x50c75b(0x10c)]['hasOwnProperty'][_0x50c75b(0xa6)](_0x5aee77,_0x563039))_0x28ce36[_0x28ce36[_0x50c75b(0x9f)]]=_0x563039;return _0x28ce36;},_0x4ed257(_0x497c26);};return function(_0x2561e8){const _0x1da77d=a19_0x1188;if(_0x2561e8&&_0x2561e8[_0x1da77d(0xff)])return _0x2561e8;var _0x3cb64e={};if(_0x2561e8!=null){for(var _0x22f665=_0x4ed257(_0x2561e8),_0xa5a792=0x0;_0xa5a792<_0x22f665['length'];_0xa5a792++)if(_0x22f665[_0xa5a792]!==_0x1da77d(0xc5))__createBinding(_0x3cb64e,_0x2561e8,_0x22f665[_0xa5a792]);}return __setModuleDefault(_0x3cb64e,_0x2561e8),_0x3cb64e;};}());Object[a19_0x29ef3c(0xf6)](exports,a19_0x29ef3c(0xff),{'value':!![]});const express_1=require(a19_0x29ef3c(0xba)),adminController_1=require(a19_0x29ef3c(0xb4)),validation_1=require(a19_0x29ef3c(0xbf)),auth_1=require(a19_0x29ef3c(0xa8)),loggerService_1=require('../services/loggerService'),coinToPayStatusService_1=require(a19_0x29ef3c(0xef)),domainMonitoringService_1=require(a19_0x29ef3c(0x106)),router=(0x0,express_1[a19_0x29ef3c(0xf3)])(),adminController=new adminController_1[(a19_0x29ef3c(0xf1))]();router[a19_0x29ef3c(0xaf)](auth_1[a19_0x29ef3c(0xa3)],auth_1[a19_0x29ef3c(0xd9)]),router['get'](a19_0x29ef3c(0xdb),adminController['checkAuth']),router[a19_0x29ef3c(0xee)](a19_0x29ef3c(0x117),adminController['getStatistics']),router[a19_0x29ef3c(0xee)](a19_0x29ef3c(0x9b),adminController[a19_0x29ef3c(0xd0)]),router[a19_0x29ef3c(0xee)](a19_0x29ef3c(0xf2),adminController[a19_0x29ef3c(0x103)]),router[a19_0x29ef3c(0xee)](a19_0x29ef3c(0x105),adminController[a19_0x29ef3c(0x10b)]),router[a19_0x29ef3c(0xee)](a19_0x29ef3c(0xae),adminController[a19_0x29ef3c(0x109)]),router[a19_0x29ef3c(0xa4)](a19_0x29ef3c(0xbd),(0x0,validation_1[a19_0x29ef3c(0xfe)])(validation_1[a19_0x29ef3c(0xe0)]),adminController[a19_0x29ef3c(0xdd)]),router[a19_0x29ef3c(0xee)](a19_0x29ef3c(0xcf),adminController[a19_0x29ef3c(0xcd)]),router['get'](a19_0x29ef3c(0xd2),adminController['getPayoutById']),router['delete'](a19_0x29ef3c(0xd2),adminController[a19_0x29ef3c(0x9c)]),router['get'](a19_0x29ef3c(0x113),adminController['getPayments']),router[a19_0x29ef3c(0xee)](a19_0x29ef3c(0xe4),adminController['getPaymentById']),router[a19_0x29ef3c(0xa7)](a19_0x29ef3c(0xe4),adminController['updatePayment']),router[a19_0x29ef3c(0xa7)](a19_0x29ef3c(0x10e),(0x0,validation_1[a19_0x29ef3c(0xfe)])(validation_1[a19_0x29ef3c(0xed)]),adminController[a19_0x29ef3c(0xc3)]),router[a19_0x29ef3c(0xee)](a19_0x29ef3c(0xc8),adminController[a19_0x29ef3c(0xcc)]),router['get']('/users/:id',adminController[a19_0x29ef3c(0xb9)]),router[a19_0x29ef3c(0xa4)]('/users',(0x0,validation_1[a19_0x29ef3c(0xfe)])(validation_1[a19_0x29ef3c(0xda)]),adminController[a19_0x29ef3c(0x104)]),router[a19_0x29ef3c(0xa7)](a19_0x29ef3c(0xd1),(0x0,validation_1[a19_0x29ef3c(0xfe)])(validation_1[a19_0x29ef3c(0xfa)]),adminController[a19_0x29ef3c(0xfd)]),router['delete'](a19_0x29ef3c(0xd1),adminController[a19_0x29ef3c(0xf4)]),router[a19_0x29ef3c(0xa4)](a19_0x29ef3c(0xab),adminController['suspendUser']),router[a19_0x29ef3c(0xa4)](a19_0x29ef3c(0xc2),adminController[a19_0x29ef3c(0xb8)]),router[a19_0x29ef3c(0xee)](a19_0x29ef3c(0xc1),(_0x26215c,_0x509a1e)=>{const _0x5abddc=a19_0x29ef3c;try{const _0x3db59e=loggerService_1[_0x5abddc(0xaa)][_0x5abddc(0xe6)]();_0x509a1e[_0x5abddc(0xf8)]({'success':!![],'result':_0x3db59e});}catch(_0x49d774){_0x509a1e[_0x5abddc(0xd7)](0x1f4)[_0x5abddc(0xf8)]({'success':![],'message':'Failed\x20to\x20get\x20log\x20statistics'});}}),router[a19_0x29ef3c(0xa4)]('/logs/clean',(_0x35132c,_0x4b722a)=>{const _0x2f5085=a19_0x29ef3c;try{const {daysToKeep:daysToKeep=0x1e}=_0x35132c[_0x2f5085(0xfc)];loggerService_1['loggerService'][_0x2f5085(0xf9)](daysToKeep),_0x4b722a[_0x2f5085(0xf8)]({'success':!![],'message':_0x2f5085(0xa9)+daysToKeep+'\x20days)'});}catch(_0x32acec){_0x4b722a['status'](0x1f4)['json']({'success':![],'message':_0x2f5085(0x100)});}}),router['post'](a19_0x29ef3c(0xdf),async(_0x17ac0b,_0x36fbbc)=>{const _0x2aadf2=a19_0x29ef3c;try{const {paymentId:_0x5a1c33}=_0x17ac0b[_0x2aadf2(0xf0)];console[_0x2aadf2(0xdc)](_0x2aadf2(0xce)+_0x5a1c33),await coinToPayStatusService_1['coinToPayStatusService'][_0x2aadf2(0xad)](_0x5a1c33),_0x36fbbc[_0x2aadf2(0xf8)]({'success':!![],'message':_0x2aadf2(0x115)});}catch(_0x366b88){console['error'](_0x2aadf2(0xb3)+_0x17ac0b[_0x2aadf2(0xf0)][_0x2aadf2(0xe7)]+':',_0x366b88),_0x36fbbc[_0x2aadf2(0xd7)](0x1f4)[_0x2aadf2(0xf8)]({'success':![],'message':_0x366b88 instanceof Error?_0x366b88[_0x2aadf2(0xde)]:'Failed\x20to\x20check\x20CoinToPay\x20payment\x20status'});}}),router[a19_0x29ef3c(0xee)]('/cointopay/stats',(_0x1c70f4,_0x28ca91)=>{const _0x2a7c21=a19_0x29ef3c;try{const _0x1426b5=coinToPayStatusService_1[_0x2a7c21(0x10f)]['getServiceStats']();_0x28ca91['json']({'success':!![],'result':{..._0x1426b5,'description':_0x2a7c21(0xc9),'statusMapping':{'Paid':_0x2a7c21(0xfb),'Awaiting\x20Fiat':_0x2a7c21(0xc4),'waiting':'PENDING','expired':_0x2a7c21(0x110),'failed':_0x2a7c21(0xc7)},'autoExpiryNote':_0x2a7c21(0x9d)+_0x1426b5[_0x2a7c21(0xca)]+_0x2a7c21(0x107),'individualTimersNote':_0x2a7c21(0x114)}});}catch(_0x11b831){_0x28ca91[_0x2a7c21(0xd7)](0x1f4)[_0x2a7c21(0xf8)]({'success':![],'message':_0x2a7c21(0x118)});}}),router['get']('/cointopay/payment/:paymentId',async(_0x49362f,_0x152525)=>{const _0x40c3c2=a19_0x29ef3c;try{const {paymentId:_0x466a1c}=_0x49362f['params'],_0x286cd3=coinToPayStatusService_1[_0x40c3c2(0x10f)][_0x40c3c2(0xb7)](_0x466a1c),_0x5bf79e=(await Promise[_0x40c3c2(0xe2)]()['then'](()=>__importStar(require(_0x40c3c2(0x112)))))['default'],_0x50bb6e=await _0x5bf79e[_0x40c3c2(0xc6)][_0x40c3c2(0xb2)]({'where':{'id':_0x466a1c},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x50bb6e)return _0x152525[_0x40c3c2(0xd7)](0x194)[_0x40c3c2(0xf8)]({'success':![],'message':'Payment\x20not\x20found'});_0x152525[_0x40c3c2(0xf8)]({'success':!![],'result':{'payment':{'id':_0x50bb6e['id'],'gateway':_0x50bb6e[_0x40c3c2(0xe8)],'gatewayPaymentId':_0x50bb6e['gatewayPaymentId'],'status':_0x50bb6e[_0x40c3c2(0xd7)],'amount':_0x50bb6e['amount'],'currency':_0x50bb6e[_0x40c3c2(0xf5)],'createdAt':_0x50bb6e[_0x40c3c2(0xbc)],'updatedAt':_0x50bb6e[_0x40c3c2(0x10a)],'shop':_0x50bb6e[_0x40c3c2(0xea)]},'timers':_0x286cd3,'isCoinToPay':_0x50bb6e[_0x40c3c2(0xe8)]===_0x40c3c2(0xc0),'ageInMinutes':Math[_0x40c3c2(0xb1)]((Date[_0x40c3c2(0x9e)]()-_0x50bb6e[_0x40c3c2(0xbc)][_0x40c3c2(0xe5)]())/(0x3e8*0x3c))}});}catch(_0x1b94ad){_0x152525[_0x40c3c2(0xd7)](0x1f4)['json']({'success':![],'message':_0x1b94ad instanceof Error?_0x1b94ad[_0x40c3c2(0xde)]:_0x40c3c2(0xb6)});}}),router[a19_0x29ef3c(0xee)](a19_0x29ef3c(0xa2),(_0x5f5634,_0x516846)=>{const _0x1ba38d=a19_0x29ef3c;try{const _0xa17000=domainMonitoringService_1[_0x1ba38d(0xd5)][_0x1ba38d(0xf7)]();_0x516846['json']({'success':!![],'result':{..._0xa17000,'description':_0x1ba38d(0xe3),'behavior':_0x1ba38d(0xb5),'encoding':_0x1ba38d(0xeb)}});}catch(_0x107f1c){_0x516846[_0x1ba38d(0xd7)](0x1f4)[_0x1ba38d(0xf8)]({'success':![],'message':'Failed\x20to\x20get\x20domain\x20monitoring\x20statistics'});}}),router[a19_0x29ef3c(0xa4)](a19_0x29ef3c(0x10d),async(_0x4f1d00,_0xceb9b0)=>{const _0x228451=a19_0x29ef3c;try{const _0x93cec3=await domainMonitoringService_1['domainMonitoringService'][_0x228451(0xd4)]();_0xceb9b0[_0x228451(0xf8)]({'success':!![],'result':{'domainAvailable':_0x93cec3,'message':_0x93cec3?_0x228451(0xbb):_0x228451(0xd3),'timestamp':new Date()[_0x228451(0x101)]()}});}catch(_0x5bad5b){_0xceb9b0[_0x228451(0xd7)](0x1f4)[_0x228451(0xf8)]({'success':![],'message':_0x5bad5b instanceof Error?_0x5bad5b[_0x228451(0xde)]:_0x228451(0xe9)});}}),exports['default']=router;