'use strict';const a19_0x21c969=a19_0x5efd;function a19_0x558c(){const _0x3a6ad2=['/users','manualCheck','/logs/stats','create','Failed\x20to\x20perform\x20manual\x20domain\x20check','validate','Payment\x20not\x20found','getPaymentTimerInfo','Failed\x20to\x20get\x20log\x20statistics','post','coinToPayStatusService','Domain\x20check\x20failed','updateCustomerDataSchema','put','express','gatewayPaymentId','/cointopay/check/:paymentId','then','getMonitoringStats','checkPaymentById','331233qSklGH','floor','Router','Failed\x20to\x20clean\x20old\x20logs','suspendUser','/users/:id/activate','../middleware/validation','getMerchantsSelection','/cointopay/payment/:paymentId','loggerService','cointopay','get','224ZmflHO','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','log','../services/coinToPayStatusService','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','cleanOldLogs','params','138HxCUbq','Failed\x20to\x20get\x20payment\x20information','gateway','../services/domainMonitoringService','3zByytH','toISOString','/payments/:id','getUsers','../middleware/auth','checkAuth','/users/:id','getPayments','updateUser','/payments','call','/merchants/selection','createUser','__importStar','/payments/:id/customer','../services/loggerService','updatePayment','\x20days\x20if\x20not\x20paid','/logs/clean','now','/payouts/:id','2026456LdXTPV','83727cDKNdJ','getStatistics','findUnique','/payout/merchants','createUserSchema','38436100uevtVh','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','/domain-monitoring/check','/merchant-statistics','domainMonitoringService','/cointopay/stats','/payouts','createdAt','../config/database','updateUserSchema','delete','status','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','FAILED','default','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','getMerchantStatistics','PAID','getPayoutById','Old\x20logs\x20cleaned\x20(kept\x20last\x20','getPayouts','getMerchantsAwaitingPayout','/payout/stats','hasOwnProperty','getPaymentById','/domain-monitoring/stats','/statistics','paymentId','prototype','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','getTime','expiryDays','getOwnPropertyDescriptor','3165025lhqaKA','currency','1884736DDLObt','__setModuleDefault','754101kxMhwa','message','configurable','/payout','json','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','getOwnPropertyNames','createPayout','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','defineProperty','body','amount','__esModule','length','Domain\x20is\x20responding\x20correctly','error'];a19_0x558c=function(){return _0x3a6ad2;};return a19_0x558c();}(function(_0x59d5c0,_0x1c7628){const _0x47a1b6=a19_0x5efd,_0x1bc9f4=_0x59d5c0();while(!![]){try{const _0x19141f=-parseInt(_0x47a1b6(0xb5))/0x1+-parseInt(_0x47a1b6(0xb3))/0x2+-parseInt(_0x47a1b6(0xf0))/0x3*(-parseInt(_0x47a1b6(0x8a))/0x4)+-parseInt(_0x47a1b6(0xb1))/0x5+parseInt(_0x47a1b6(0xec))/0x6*(-parseInt(_0x47a1b6(0xd9))/0x7)+-parseInt(_0x47a1b6(0xe5))/0x8*(parseInt(_0x47a1b6(0x8b))/0x9)+parseInt(_0x47a1b6(0x90))/0xa;if(_0x19141f===_0x1c7628)break;else _0x1bc9f4['push'](_0x1bc9f4['shift']());}catch(_0x41d256){_0x1bc9f4['push'](_0x1bc9f4['shift']());}}}(a19_0x558c,0xa40b9));function a19_0x5efd(_0x4d80c2,_0x4bd34a){const _0x558c60=a19_0x558c();return a19_0x5efd=function(_0x5efdff,_0x575e39){_0x5efdff=_0x5efdff-0x83;let _0x47ab34=_0x558c60[_0x5efdff];return _0x47ab34;},a19_0x5efd(_0x4d80c2,_0x4bd34a);}var __createBinding=this&&this['__createBinding']||(Object[a19_0x21c969(0xc8)]?function(_0x17dd9b,_0x57d0f3,_0x10dd0b,_0x5a6048){const _0x5bca00=a19_0x21c969;if(_0x5a6048===undefined)_0x5a6048=_0x10dd0b;var _0x5df603=Object[_0x5bca00(0xb0)](_0x57d0f3,_0x10dd0b);(!_0x5df603||(_0x5bca00(0xe4)in _0x5df603?!_0x57d0f3[_0x5bca00(0xc1)]:_0x5df603['writable']||_0x5df603[_0x5bca00(0xb7)]))&&(_0x5df603={'enumerable':!![],'get':function(){return _0x57d0f3[_0x10dd0b];}}),Object['defineProperty'](_0x17dd9b,_0x5a6048,_0x5df603);}:function(_0x39f3ee,_0x556387,_0x49dcfc,_0x1aef4c){if(_0x1aef4c===undefined)_0x1aef4c=_0x49dcfc;_0x39f3ee[_0x1aef4c]=_0x556387[_0x49dcfc];}),__setModuleDefault=this&&this[a19_0x21c969(0xb4)]||(Object[a19_0x21c969(0xc8)]?function(_0x4738ea,_0x22d643){const _0x1161d9=a19_0x21c969;Object[_0x1161d9(0xbe)](_0x4738ea,'default',{'enumerable':!![],'value':_0x22d643});}:function(_0x29c6e3,_0xd77341){const _0xd8bd2f=a19_0x21c969;_0x29c6e3[_0xd8bd2f(0x9e)]=_0xd77341;}),__importStar=this&&this[a19_0x21c969(0xfd)]||(function(){var _0x3f3a2c=function(_0x3f35d5){const _0xfd8eaa=a19_0x5efd;return _0x3f3a2c=Object[_0xfd8eaa(0xbb)]||function(_0x3fd4dc){const _0x15ee5a=_0xfd8eaa;var _0x21151a=[];for(var _0x4095ac in _0x3fd4dc)if(Object[_0x15ee5a(0xac)][_0x15ee5a(0xa7)][_0x15ee5a(0xfa)](_0x3fd4dc,_0x4095ac))_0x21151a[_0x21151a[_0x15ee5a(0xc2)]]=_0x4095ac;return _0x21151a;},_0x3f3a2c(_0x3f35d5);};return function(_0x27a46e){const _0x19a50f=a19_0x5efd;if(_0x27a46e&&_0x27a46e['__esModule'])return _0x27a46e;var _0x530afa={};if(_0x27a46e!=null){for(var _0x33b5cb=_0x3f3a2c(_0x27a46e),_0x4a9cd1=0x0;_0x4a9cd1<_0x33b5cb[_0x19a50f(0xc2)];_0x4a9cd1++)if(_0x33b5cb[_0x4a9cd1]!==_0x19a50f(0x9e))__createBinding(_0x530afa,_0x27a46e,_0x33b5cb[_0x4a9cd1]);}return __setModuleDefault(_0x530afa,_0x27a46e),_0x530afa;};}());Object[a19_0x21c969(0xbe)](exports,'__esModule',{'value':!![]});const express_1=require(a19_0x21c969(0xd3)),adminController_1=require('../controllers/adminController'),validation_1=require(a19_0x21c969(0xdf)),auth_1=require(a19_0x21c969(0xf4)),loggerService_1=require(a19_0x21c969(0x84)),coinToPayStatusService_1=require(a19_0x21c969(0xe8)),domainMonitoringService_1=require(a19_0x21c969(0xef)),router=(0x0,express_1[a19_0x21c969(0xdb)])(),adminController=new adminController_1['AdminController']();router['use'](auth_1['authenticateToken'],auth_1['requireAdmin']),router[a19_0x21c969(0xe4)]('/auth',adminController[a19_0x21c969(0xf5)]),router[a19_0x21c969(0xe4)](a19_0x21c969(0xaa),adminController[a19_0x21c969(0x8c)]),router[a19_0x21c969(0xe4)](a19_0x21c969(0x93),adminController[a19_0x21c969(0xa0)]),router[a19_0x21c969(0xe4)](a19_0x21c969(0xa6),adminController['getPayoutStats']),router[a19_0x21c969(0xe4)](a19_0x21c969(0x8e),adminController[a19_0x21c969(0xa5)]),router[a19_0x21c969(0xe4)](a19_0x21c969(0xfb),adminController[a19_0x21c969(0xe0)]),router['post'](a19_0x21c969(0xb8),(0x0,validation_1[a19_0x21c969(0xca)])(validation_1['createPayoutSchema']),adminController[a19_0x21c969(0xbc)]),router[a19_0x21c969(0xe4)](a19_0x21c969(0x96),adminController[a19_0x21c969(0xa4)]),router['get'](a19_0x21c969(0x89),adminController[a19_0x21c969(0xa2)]),router[a19_0x21c969(0x9a)]('/payouts/:id',adminController['deletePayout']),router['get'](a19_0x21c969(0xf9),adminController[a19_0x21c969(0xf7)]),router[a19_0x21c969(0xe4)](a19_0x21c969(0xf2),adminController[a19_0x21c969(0xa8)]),router[a19_0x21c969(0xd2)](a19_0x21c969(0xf2),adminController[a19_0x21c969(0x85)]),router['put'](a19_0x21c969(0x83),(0x0,validation_1[a19_0x21c969(0xca)])(validation_1[a19_0x21c969(0xd1)]),adminController['updateCustomerData']),router[a19_0x21c969(0xe4)]('/users',adminController[a19_0x21c969(0xf3)]),router[a19_0x21c969(0xe4)](a19_0x21c969(0xf6),adminController['getUserById']),router[a19_0x21c969(0xce)](a19_0x21c969(0xc5),(0x0,validation_1[a19_0x21c969(0xca)])(validation_1[a19_0x21c969(0x8f)]),adminController[a19_0x21c969(0xfc)]),router[a19_0x21c969(0xd2)](a19_0x21c969(0xf6),(0x0,validation_1['validate'])(validation_1[a19_0x21c969(0x99)]),adminController[a19_0x21c969(0xf8)]),router['delete'](a19_0x21c969(0xf6),adminController['deleteUser']),router[a19_0x21c969(0xce)]('/users/:id/suspend',adminController[a19_0x21c969(0xdd)]),router[a19_0x21c969(0xce)](a19_0x21c969(0xde),adminController['activateUser']),router[a19_0x21c969(0xe4)](a19_0x21c969(0xc7),(_0x1ac783,_0x303c72)=>{const _0x201d06=a19_0x21c969;try{const _0x7d881a=loggerService_1[_0x201d06(0xe2)]['getLogStats']();_0x303c72['json']({'success':!![],'result':_0x7d881a});}catch(_0x561395){_0x303c72['status'](0x1f4)[_0x201d06(0xb9)]({'success':![],'message':_0x201d06(0xcd)});}}),router['post'](a19_0x21c969(0x87),(_0x123379,_0x26a159)=>{const _0x1cd27a=a19_0x21c969;try{const {daysToKeep:daysToKeep=0x1e}=_0x123379[_0x1cd27a(0xbf)];loggerService_1[_0x1cd27a(0xe2)][_0x1cd27a(0xea)](daysToKeep),_0x26a159[_0x1cd27a(0xb9)]({'success':!![],'message':_0x1cd27a(0xa3)+daysToKeep+'\x20days)'});}catch(_0x203bb1){_0x26a159[_0x1cd27a(0x9b)](0x1f4)[_0x1cd27a(0xb9)]({'success':![],'message':_0x1cd27a(0xdc)});}}),router[a19_0x21c969(0xce)](a19_0x21c969(0xd5),async(_0x50b46f,_0x5ea216)=>{const _0x4e828e=a19_0x21c969;try{const {paymentId:_0x440239}=_0x50b46f[_0x4e828e(0xeb)];console[_0x4e828e(0xe7)](_0x4e828e(0x9c)+_0x440239),await coinToPayStatusService_1[_0x4e828e(0xcf)][_0x4e828e(0xd8)](_0x440239),_0x5ea216[_0x4e828e(0xb9)]({'success':!![],'message':'CoinToPay\x20payment\x20status\x20checked\x20successfully'});}catch(_0x291b22){console[_0x4e828e(0xc4)](_0x4e828e(0xbd)+_0x50b46f[_0x4e828e(0xeb)][_0x4e828e(0xab)]+':',_0x291b22),_0x5ea216[_0x4e828e(0x9b)](0x1f4)[_0x4e828e(0xb9)]({'success':![],'message':_0x291b22 instanceof Error?_0x291b22[_0x4e828e(0xb6)]:_0x4e828e(0x9f)});}}),router[a19_0x21c969(0xe4)](a19_0x21c969(0x95),(_0x4e6b6f,_0x10e2c8)=>{const _0x3d327a=a19_0x21c969;try{const _0x2a7215=coinToPayStatusService_1[_0x3d327a(0xcf)]['getServiceStats']();_0x10e2c8['json']({'success':!![],'result':{..._0x2a7215,'description':'CoinToPay\x20automatic\x20status\x20checking\x20service','statusMapping':{'Paid':_0x3d327a(0xa1),'Awaiting\x20Fiat':'PENDING','waiting':'PENDING','expired':'EXPIRED','failed':_0x3d327a(0x9d)},'autoExpiryNote':'Payments\x20automatically\x20expire\x20after\x20'+_0x2a7215[_0x3d327a(0xaf)]+_0x3d327a(0x86),'individualTimersNote':_0x3d327a(0xba)}});}catch(_0x1074e2){_0x10e2c8[_0x3d327a(0x9b)](0x1f4)['json']({'success':![],'message':'Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics'});}}),router['get'](a19_0x21c969(0xe1),async(_0x56d4da,_0x4b2d7d)=>{const _0x5eb0b7=a19_0x21c969;try{const {paymentId:_0x2ea8c7}=_0x56d4da['params'],_0x25cb86=coinToPayStatusService_1[_0x5eb0b7(0xcf)][_0x5eb0b7(0xcc)](_0x2ea8c7),_0x140efa=(await Promise['resolve']()[_0x5eb0b7(0xd6)](()=>__importStar(require(_0x5eb0b7(0x98)))))['default'],_0x3aadc4=await _0x140efa['payment'][_0x5eb0b7(0x8d)]({'where':{'id':_0x2ea8c7},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x3aadc4)return _0x4b2d7d[_0x5eb0b7(0x9b)](0x194)['json']({'success':![],'message':_0x5eb0b7(0xcb)});_0x4b2d7d[_0x5eb0b7(0xb9)]({'success':!![],'result':{'payment':{'id':_0x3aadc4['id'],'gateway':_0x3aadc4[_0x5eb0b7(0xee)],'gatewayPaymentId':_0x3aadc4[_0x5eb0b7(0xd4)],'status':_0x3aadc4[_0x5eb0b7(0x9b)],'amount':_0x3aadc4[_0x5eb0b7(0xc0)],'currency':_0x3aadc4[_0x5eb0b7(0xb2)],'createdAt':_0x3aadc4[_0x5eb0b7(0x97)],'updatedAt':_0x3aadc4['updatedAt'],'shop':_0x3aadc4['shop']},'timers':_0x25cb86,'isCoinToPay':_0x3aadc4[_0x5eb0b7(0xee)]===_0x5eb0b7(0xe3),'ageInMinutes':Math[_0x5eb0b7(0xda)]((Date[_0x5eb0b7(0x88)]()-_0x3aadc4[_0x5eb0b7(0x97)][_0x5eb0b7(0xae)]())/(0x3e8*0x3c))}});}catch(_0x1f99b1){_0x4b2d7d[_0x5eb0b7(0x9b)](0x1f4)[_0x5eb0b7(0xb9)]({'success':![],'message':_0x1f99b1 instanceof Error?_0x1f99b1[_0x5eb0b7(0xb6)]:_0x5eb0b7(0xed)});}}),router[a19_0x21c969(0xe4)](a19_0x21c969(0xa9),(_0x1dcbd2,_0x3acd67)=>{const _0x58984f=a19_0x21c969;try{const _0x41c2be=domainMonitoringService_1[_0x58984f(0x94)][_0x58984f(0xd7)]();_0x3acd67[_0x58984f(0xb9)]({'success':!![],'result':{..._0x41c2be,'description':_0x58984f(0xad),'behavior':_0x58984f(0x91),'encoding':_0x58984f(0xe9)}});}catch(_0x33bf45){_0x3acd67[_0x58984f(0x9b)](0x1f4)[_0x58984f(0xb9)]({'success':![],'message':_0x58984f(0xe6)});}}),router[a19_0x21c969(0xce)](a19_0x21c969(0x92),async(_0x1296e2,_0x14f410)=>{const _0x4c3234=a19_0x21c969;try{const _0x1a63eb=await domainMonitoringService_1[_0x4c3234(0x94)][_0x4c3234(0xc6)]();_0x14f410['json']({'success':!![],'result':{'domainAvailable':_0x1a63eb,'message':_0x1a63eb?_0x4c3234(0xc3):_0x4c3234(0xd0),'timestamp':new Date()[_0x4c3234(0xf1)]()}});}catch(_0x5a5115){_0x14f410[_0x4c3234(0x9b)](0x1f4)[_0x4c3234(0xb9)]({'success':![],'message':_0x5a5115 instanceof Error?_0x5a5115[_0x4c3234(0xb6)]:_0x4c3234(0xc9)});}}),exports['default']=router;