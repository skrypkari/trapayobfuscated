'use strict';const a19_0x2cbed9=a19_0x3c34;(function(_0x5c8f10,_0x30ceed){const _0x5b4c90=a19_0x3c34,_0x1989a3=_0x5c8f10();while(!![]){try{const _0x1f958a=-parseInt(_0x5b4c90(0x1f7))/0x1*(-parseInt(_0x5b4c90(0x22d))/0x2)+parseInt(_0x5b4c90(0x1ff))/0x3+parseInt(_0x5b4c90(0x1ea))/0x4+-parseInt(_0x5b4c90(0x208))/0x5*(parseInt(_0x5b4c90(0x20e))/0x6)+parseInt(_0x5b4c90(0x212))/0x7+parseInt(_0x5b4c90(0x253))/0x8*(parseInt(_0x5b4c90(0x243))/0x9)+-parseInt(_0x5b4c90(0x23f))/0xa;if(_0x1f958a===_0x30ceed)break;else _0x1989a3['push'](_0x1989a3['shift']());}catch(_0x2885f0){_0x1989a3['push'](_0x1989a3['shift']());}}}(a19_0x2b02,0x5be15));function a19_0x2b02(){const _0x53e939=['prototype','../services/coinToPayStatusService','requireAdmin','floor','280yzPXkz','Domain\x20check\x20failed','/logs/stats','/merchants/selection','CoinToPay\x20automatic\x20status\x20checking\x20service','deletePayout','/cointopay/stats','updateUser','paymentId','__esModule','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','../middleware/validation','FAILED','getMonitoringStats','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','/users','cointopay','call','14418390uRozEV','gateway','delete','updateUserSchema','57762YIMKHn','getUsers','getOwnPropertyNames','createdAt','/merchant-statistics','log','hasOwnProperty','updateCustomerDataSchema','express','__setModuleDefault','/payouts','then','loggerService','updatePayment','getUserById','Domain\x20is\x20responding\x20correctly','392mSLXdE','createPayout','createPayoutSchema','/payout','params','/payments/:id','findUnique','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','AdminController','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','configurable','domainMonitoringService','Failed\x20to\x20get\x20payment\x20information','amount','cleanOldLogs','deleteUser','get','Payments\x20automatically\x20expire\x20after\x20','419932QEWFED','updateCustomerData','EXPIRED','getPaymentTimerInfo','../services/domainMonitoringService','manualCheck','getPayoutStats','/logs/clean','../config/database','default','authenticateToken','Router','CoinToPay\x20payment\x20status\x20checked\x20successfully','3890QqWyiB','PENDING','/auth','getPayoutById','currency','/payouts/:id','length','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','1616424kFQgiq','validate','post','Failed\x20to\x20perform\x20manual\x20domain\x20check','message','/payout/stats','status','Payment\x20not\x20found','/users/:id/suspend','45dUyrSS','now','getPaymentById','getServiceStats','/statistics','/users/:id','74106PAhrIm','createUserSchema','coinToPayStatusService','getMerchantsSelection','2985262SVzZQG','getOwnPropertyDescriptor','checkAuth','toISOString','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','getPayments','/payments','Failed\x20to\x20get\x20log\x20statistics','activateUser','defineProperty','json','/payout/merchants','shop','put','/domain-monitoring/check','\x20days)','suspendUser','writable','getStatistics','../middleware/auth','__importStar','Old\x20logs\x20cleaned\x20(kept\x20last\x20','payment'];a19_0x2b02=function(){return _0x53e939;};return a19_0x2b02();}var __createBinding=this&&this['__createBinding']||(Object['create']?function(_0x405a8f,_0x561007,_0x4af62b,_0x44ce21){const _0x4e250d=a19_0x3c34;if(_0x44ce21===undefined)_0x44ce21=_0x4af62b;var _0x40f795=Object[_0x4e250d(0x213)](_0x561007,_0x4af62b);(!_0x40f795||('get'in _0x40f795?!_0x561007[_0x4e250d(0x236)]:_0x40f795[_0x4e250d(0x223)]||_0x40f795[_0x4e250d(0x25d)]))&&(_0x40f795={'enumerable':!![],'get':function(){return _0x561007[_0x4af62b];}}),Object[_0x4e250d(0x21b)](_0x405a8f,_0x44ce21,_0x40f795);}:function(_0x1159e7,_0xeb1208,_0xfadde6,_0x201257){if(_0x201257===undefined)_0x201257=_0xfadde6;_0x1159e7[_0x201257]=_0xeb1208[_0xfadde6];}),__setModuleDefault=this&&this[a19_0x2cbed9(0x24c)]||(Object['create']?function(_0x17dd00,_0x3f0846){const _0x488680=a19_0x2cbed9;Object[_0x488680(0x21b)](_0x17dd00,_0x488680(0x1f3),{'enumerable':!![],'value':_0x3f0846});}:function(_0x3553d4,_0x476257){const _0x74ee63=a19_0x2cbed9;_0x3553d4[_0x74ee63(0x1f3)]=_0x476257;}),__importStar=this&&this[a19_0x2cbed9(0x226)]||(function(){var _0x4cc843=function(_0x454b01){const _0x400f08=a19_0x3c34;return _0x4cc843=Object[_0x400f08(0x245)]||function(_0x3a48c0){const _0x50036f=_0x400f08;var _0x13f5e7=[];for(var _0x2556ef in _0x3a48c0)if(Object[_0x50036f(0x229)][_0x50036f(0x249)][_0x50036f(0x23e)](_0x3a48c0,_0x2556ef))_0x13f5e7[_0x13f5e7['length']]=_0x2556ef;return _0x13f5e7;},_0x4cc843(_0x454b01);};return function(_0x22acae){const _0x5069d0=a19_0x3c34;if(_0x22acae&&_0x22acae['__esModule'])return _0x22acae;var _0x4cd709={};if(_0x22acae!=null){for(var _0x433a02=_0x4cc843(_0x22acae),_0x4e1819=0x0;_0x4e1819<_0x433a02[_0x5069d0(0x1fd)];_0x4e1819++)if(_0x433a02[_0x4e1819]!==_0x5069d0(0x1f3))__createBinding(_0x4cd709,_0x22acae,_0x433a02[_0x4e1819]);}return __setModuleDefault(_0x4cd709,_0x22acae),_0x4cd709;};}());Object['defineProperty'](exports,a19_0x2cbed9(0x236),{'value':!![]});function a19_0x3c34(_0xf9d064,_0x6babbe){const _0x2b023c=a19_0x2b02();return a19_0x3c34=function(_0x3c3401,_0x2cee65){_0x3c3401=_0x3c3401-0x1e3;let _0x55f4c0=_0x2b023c[_0x3c3401];return _0x55f4c0;},a19_0x3c34(_0xf9d064,_0x6babbe);}const express_1=require(a19_0x2cbed9(0x24b)),adminController_1=require('../controllers/adminController'),validation_1=require(a19_0x2cbed9(0x238)),auth_1=require(a19_0x2cbed9(0x225)),loggerService_1=require('../services/loggerService'),coinToPayStatusService_1=require(a19_0x2cbed9(0x22a)),domainMonitoringService_1=require(a19_0x2cbed9(0x1ee)),router=(0x0,express_1[a19_0x2cbed9(0x1f5)])(),adminController=new adminController_1[(a19_0x2cbed9(0x25b))]();router['use'](auth_1[a19_0x2cbed9(0x1f4)],auth_1[a19_0x2cbed9(0x22b)]),router[a19_0x2cbed9(0x1e8)](a19_0x2cbed9(0x1f9),adminController[a19_0x2cbed9(0x214)]),router[a19_0x2cbed9(0x1e8)](a19_0x2cbed9(0x20c),adminController[a19_0x2cbed9(0x224)]),router['get'](a19_0x2cbed9(0x247),adminController['getMerchantStatistics']),router[a19_0x2cbed9(0x1e8)](a19_0x2cbed9(0x204),adminController[a19_0x2cbed9(0x1f0)]),router[a19_0x2cbed9(0x1e8)](a19_0x2cbed9(0x21d),adminController['getMerchantsAwaitingPayout']),router['get'](a19_0x2cbed9(0x230),adminController[a19_0x2cbed9(0x211)]),router[a19_0x2cbed9(0x201)](a19_0x2cbed9(0x256),(0x0,validation_1['validate'])(validation_1[a19_0x2cbed9(0x255)]),adminController[a19_0x2cbed9(0x254)]),router[a19_0x2cbed9(0x1e8)](a19_0x2cbed9(0x24d),adminController['getPayouts']),router['get']('/payouts/:id',adminController[a19_0x2cbed9(0x1fa)]),router[a19_0x2cbed9(0x241)](a19_0x2cbed9(0x1fc),adminController[a19_0x2cbed9(0x232)]),router[a19_0x2cbed9(0x1e8)](a19_0x2cbed9(0x218),adminController[a19_0x2cbed9(0x217)]),router['get'](a19_0x2cbed9(0x258),adminController[a19_0x2cbed9(0x20a)]),router[a19_0x2cbed9(0x21f)](a19_0x2cbed9(0x258),adminController[a19_0x2cbed9(0x250)]),router[a19_0x2cbed9(0x21f)]('/payments/:id/customer',(0x0,validation_1['validate'])(validation_1[a19_0x2cbed9(0x24a)]),adminController[a19_0x2cbed9(0x1eb)]),router['get'](a19_0x2cbed9(0x23c),adminController[a19_0x2cbed9(0x244)]),router[a19_0x2cbed9(0x1e8)](a19_0x2cbed9(0x20d),adminController[a19_0x2cbed9(0x251)]),router['post'](a19_0x2cbed9(0x23c),(0x0,validation_1['validate'])(validation_1[a19_0x2cbed9(0x20f)]),adminController['createUser']),router[a19_0x2cbed9(0x21f)]('/users/:id',(0x0,validation_1[a19_0x2cbed9(0x200)])(validation_1[a19_0x2cbed9(0x242)]),adminController[a19_0x2cbed9(0x234)]),router['delete'](a19_0x2cbed9(0x20d),adminController[a19_0x2cbed9(0x1e7)]),router[a19_0x2cbed9(0x201)](a19_0x2cbed9(0x207),adminController[a19_0x2cbed9(0x222)]),router[a19_0x2cbed9(0x201)]('/users/:id/activate',adminController[a19_0x2cbed9(0x21a)]),router['get'](a19_0x2cbed9(0x22f),(_0x3ebf20,_0x242bde)=>{const _0x24470f=a19_0x2cbed9;try{const _0x50dee0=loggerService_1[_0x24470f(0x24f)]['getLogStats']();_0x242bde[_0x24470f(0x21c)]({'success':!![],'result':_0x50dee0});}catch(_0xe5e15f){_0x242bde[_0x24470f(0x205)](0x1f4)[_0x24470f(0x21c)]({'success':![],'message':_0x24470f(0x219)});}}),router[a19_0x2cbed9(0x201)](a19_0x2cbed9(0x1f1),(_0x4beea3,_0x38017d)=>{const _0x557d4b=a19_0x2cbed9;try{const {daysToKeep:daysToKeep=0x1e}=_0x4beea3['body'];loggerService_1['loggerService'][_0x557d4b(0x1e6)](daysToKeep),_0x38017d[_0x557d4b(0x21c)]({'success':!![],'message':_0x557d4b(0x227)+daysToKeep+_0x557d4b(0x221)});}catch(_0x599243){_0x38017d[_0x557d4b(0x205)](0x1f4)[_0x557d4b(0x21c)]({'success':![],'message':'Failed\x20to\x20clean\x20old\x20logs'});}}),router[a19_0x2cbed9(0x201)]('/cointopay/check/:paymentId',async(_0xff8fc1,_0x17f83e)=>{const _0x503799=a19_0x2cbed9;try{const {paymentId:_0x32f121}=_0xff8fc1[_0x503799(0x257)];console[_0x503799(0x248)]('üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20'+_0x32f121),await coinToPayStatusService_1['coinToPayStatusService']['checkPaymentById'](_0x32f121),_0x17f83e[_0x503799(0x21c)]({'success':!![],'message':_0x503799(0x1f6)});}catch(_0x420962){console['error'](_0x503799(0x25c)+_0xff8fc1[_0x503799(0x257)][_0x503799(0x235)]+':',_0x420962),_0x17f83e['status'](0x1f4)[_0x503799(0x21c)]({'success':![],'message':_0x420962 instanceof Error?_0x420962[_0x503799(0x203)]:_0x503799(0x25a)});}}),router[a19_0x2cbed9(0x1e8)](a19_0x2cbed9(0x233),(_0x33b4d4,_0x463f5f)=>{const _0x332cba=a19_0x2cbed9;try{const _0x3b12ea=coinToPayStatusService_1[_0x332cba(0x210)][_0x332cba(0x20b)]();_0x463f5f[_0x332cba(0x21c)]({'success':!![],'result':{..._0x3b12ea,'description':_0x332cba(0x231),'statusMapping':{'Paid':'PAID','Awaiting\x20Fiat':_0x332cba(0x1f8),'waiting':_0x332cba(0x1f8),'expired':_0x332cba(0x1ec),'failed':_0x332cba(0x239)},'autoExpiryNote':_0x332cba(0x1e9)+_0x3b12ea['expiryDays']+'\x20days\x20if\x20not\x20paid','individualTimersNote':'Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly'}});}catch(_0x497e39){_0x463f5f['status'](0x1f4)[_0x332cba(0x21c)]({'success':![],'message':_0x332cba(0x23b)});}}),router['get']('/cointopay/payment/:paymentId',async(_0x106fd7,_0x467f8e)=>{const _0x5379cb=a19_0x2cbed9;try{const {paymentId:_0x44112d}=_0x106fd7['params'],_0x314704=coinToPayStatusService_1[_0x5379cb(0x210)][_0x5379cb(0x1ed)](_0x44112d),_0x1b263c=(await Promise['resolve']()[_0x5379cb(0x24e)](()=>__importStar(require(_0x5379cb(0x1f2)))))[_0x5379cb(0x1f3)],_0x40f57b=await _0x1b263c[_0x5379cb(0x228)][_0x5379cb(0x259)]({'where':{'id':_0x44112d},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x40f57b)return _0x467f8e[_0x5379cb(0x205)](0x194)[_0x5379cb(0x21c)]({'success':![],'message':_0x5379cb(0x206)});_0x467f8e[_0x5379cb(0x21c)]({'success':!![],'result':{'payment':{'id':_0x40f57b['id'],'gateway':_0x40f57b[_0x5379cb(0x240)],'gatewayPaymentId':_0x40f57b['gatewayPaymentId'],'status':_0x40f57b['status'],'amount':_0x40f57b[_0x5379cb(0x1e5)],'currency':_0x40f57b[_0x5379cb(0x1fb)],'createdAt':_0x40f57b[_0x5379cb(0x246)],'updatedAt':_0x40f57b['updatedAt'],'shop':_0x40f57b[_0x5379cb(0x21e)]},'timers':_0x314704,'isCoinToPay':_0x40f57b[_0x5379cb(0x240)]===_0x5379cb(0x23d),'ageInMinutes':Math[_0x5379cb(0x22c)]((Date[_0x5379cb(0x209)]()-_0x40f57b[_0x5379cb(0x246)]['getTime']())/(0x3e8*0x3c))}});}catch(_0x56a108){_0x467f8e['status'](0x1f4)[_0x5379cb(0x21c)]({'success':![],'message':_0x56a108 instanceof Error?_0x56a108[_0x5379cb(0x203)]:_0x5379cb(0x1e4)});}}),router[a19_0x2cbed9(0x1e8)]('/domain-monitoring/stats',(_0xf48281,_0x44b936)=>{const _0x27ea12=a19_0x2cbed9;try{const _0x4fe79a=domainMonitoringService_1[_0x27ea12(0x1e3)][_0x27ea12(0x23a)]();_0x44b936[_0x27ea12(0x21c)]({'success':!![],'result':{..._0x4fe79a,'description':'Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','behavior':_0x27ea12(0x237),'encoding':_0x27ea12(0x1fe)}});}catch(_0xa32594){_0x44b936['status'](0x1f4)[_0x27ea12(0x21c)]({'success':![],'message':_0x27ea12(0x216)});}}),router[a19_0x2cbed9(0x201)](a19_0x2cbed9(0x220),async(_0x5f1b58,_0x5f506d)=>{const _0x4ef8ba=a19_0x2cbed9;try{const _0x44f1e1=await domainMonitoringService_1[_0x4ef8ba(0x1e3)][_0x4ef8ba(0x1ef)]();_0x5f506d['json']({'success':!![],'result':{'domainAvailable':_0x44f1e1,'message':_0x44f1e1?_0x4ef8ba(0x252):_0x4ef8ba(0x22e),'timestamp':new Date()[_0x4ef8ba(0x215)]()}});}catch(_0x3da931){_0x5f506d[_0x4ef8ba(0x205)](0x1f4)[_0x4ef8ba(0x21c)]({'success':![],'message':_0x3da931 instanceof Error?_0x3da931[_0x4ef8ba(0x203)]:_0x4ef8ba(0x202)});}}),exports[a19_0x2cbed9(0x1f3)]=router;