'use strict';const a20_0x266fa3=a20_0x1e6e;(function(_0x611fe0,_0x15dcb7){const _0x509ad9=a20_0x1e6e,_0x39a5d2=_0x611fe0();while(!![]){try{const _0x381c91=-parseInt(_0x509ad9(0x109))/0x1+-parseInt(_0x509ad9(0x165))/0x2+-parseInt(_0x509ad9(0x14c))/0x3+parseInt(_0x509ad9(0x15a))/0x4*(-parseInt(_0x509ad9(0x10d))/0x5)+-parseInt(_0x509ad9(0x16f))/0x6*(parseInt(_0x509ad9(0x175))/0x7)+-parseInt(_0x509ad9(0x141))/0x8+parseInt(_0x509ad9(0x11d))/0x9*(parseInt(_0x509ad9(0x106))/0xa);if(_0x381c91===_0x15dcb7)break;else _0x39a5d2['push'](_0x39a5d2['shift']());}catch(_0x1db76a){_0x39a5d2['push'](_0x39a5d2['shift']());}}}(a20_0x3bae,0x2fe70));function a20_0x1e6e(_0x4a9f5f,_0x3530e2){const _0x3baeb9=a20_0x3bae();return a20_0x1e6e=function(_0x1e6e41,_0x1eb314){_0x1e6e41=_0x1e6e41-0xff;let _0x55fcc8=_0x3baeb9[_0x1e6e41];return _0x55fcc8;},a20_0x1e6e(_0x4a9f5f,_0x3530e2);}var __createBinding=this&&this[a20_0x266fa3(0x169)]||(Object[a20_0x266fa3(0x140)]?function(_0x277521,_0x345351,_0x56174f,_0x46d1cf){const _0xfc22f5=a20_0x266fa3;if(_0x46d1cf===undefined)_0x46d1cf=_0x56174f;var _0x3242c0=Object[_0xfc22f5(0x105)](_0x345351,_0x56174f);(!_0x3242c0||('get'in _0x3242c0?!_0x345351[_0xfc22f5(0x122)]:_0x3242c0[_0xfc22f5(0x176)]||_0x3242c0['configurable']))&&(_0x3242c0={'enumerable':!![],'get':function(){return _0x345351[_0x56174f];}}),Object[_0xfc22f5(0x138)](_0x277521,_0x46d1cf,_0x3242c0);}:function(_0x2edbb1,_0x136050,_0x10dadd,_0x33fa27){if(_0x33fa27===undefined)_0x33fa27=_0x10dadd;_0x2edbb1[_0x33fa27]=_0x136050[_0x10dadd];}),__setModuleDefault=this&&this[a20_0x266fa3(0x153)]||(Object['create']?function(_0x18ef54,_0x40b66e){const _0x4b0e74=a20_0x266fa3;Object[_0x4b0e74(0x138)](_0x18ef54,_0x4b0e74(0x135),{'enumerable':!![],'value':_0x40b66e});}:function(_0x15c559,_0x31fd11){const _0x5245b4=a20_0x266fa3;_0x15c559[_0x5245b4(0x135)]=_0x31fd11;}),__importStar=this&&this['__importStar']||(function(){var _0x14f32e=function(_0x19bf12){const _0x5c64b1=a20_0x1e6e;return _0x14f32e=Object[_0x5c64b1(0x104)]||function(_0x333a83){const _0x36520d=_0x5c64b1;var _0x975005=[];for(var _0xe1f579 in _0x333a83)if(Object['prototype'][_0x36520d(0x121)][_0x36520d(0x16c)](_0x333a83,_0xe1f579))_0x975005[_0x975005['length']]=_0xe1f579;return _0x975005;},_0x14f32e(_0x19bf12);};return function(_0x554278){const _0x23bb14=a20_0x1e6e;if(_0x554278&&_0x554278[_0x23bb14(0x122)])return _0x554278;var _0x3c78d6={};if(_0x554278!=null){for(var _0x3b453a=_0x14f32e(_0x554278),_0x5be357=0x0;_0x5be357<_0x3b453a[_0x23bb14(0x161)];_0x5be357++)if(_0x3b453a[_0x5be357]!=='default')__createBinding(_0x3c78d6,_0x554278,_0x3b453a[_0x5be357]);}return __setModuleDefault(_0x3c78d6,_0x554278),_0x3c78d6;};}());Object[a20_0x266fa3(0x138)](exports,a20_0x266fa3(0x122),{'value':!![]});const express_1=require(a20_0x266fa3(0x144)),adminController_1=require(a20_0x266fa3(0x158)),validation_1=require(a20_0x266fa3(0x12b)),auth_1=require(a20_0x266fa3(0x111)),loggerService_1=require(a20_0x266fa3(0x10c)),coinToPayStatusService_1=require('../services/coinToPayStatusService'),domainMonitoringService_1=require(a20_0x266fa3(0x110)),router=(0x0,express_1[a20_0x266fa3(0x179)])(),adminController=new adminController_1['AdminController']();router[a20_0x266fa3(0x173)](auth_1['authenticateToken'],auth_1[a20_0x266fa3(0x127)]),router[a20_0x266fa3(0x155)](a20_0x266fa3(0x12d),adminController[a20_0x266fa3(0x100)]),router[a20_0x266fa3(0x155)](a20_0x266fa3(0x125),adminController['getStatistics']),router[a20_0x266fa3(0x155)](a20_0x266fa3(0x149),adminController[a20_0x266fa3(0x160)]),router[a20_0x266fa3(0x155)](a20_0x266fa3(0x132),adminController[a20_0x266fa3(0x147)]),router[a20_0x266fa3(0x155)](a20_0x266fa3(0x15c),adminController[a20_0x266fa3(0x115)]),router[a20_0x266fa3(0x155)](a20_0x266fa3(0x142),adminController[a20_0x266fa3(0x15f)]),router[a20_0x266fa3(0x14f)](a20_0x266fa3(0x10e),(0x0,validation_1[a20_0x266fa3(0x116)])(validation_1[a20_0x266fa3(0x11a)]),adminController['createPayout']),router[a20_0x266fa3(0x155)](a20_0x266fa3(0x12c),adminController[a20_0x266fa3(0x177)]),router[a20_0x266fa3(0x155)](a20_0x266fa3(0x137),adminController['getPayoutById']),router[a20_0x266fa3(0x13a)](a20_0x266fa3(0x137),adminController[a20_0x266fa3(0x151)]),router[a20_0x266fa3(0x155)](a20_0x266fa3(0x136),adminController[a20_0x266fa3(0x119)]),router[a20_0x266fa3(0x155)]('/payments/:id',adminController['getPaymentById']),router[a20_0x266fa3(0x117)](a20_0x266fa3(0x112),adminController[a20_0x266fa3(0x17d)]),router['put'](a20_0x266fa3(0x134),(0x0,validation_1['validate'])(validation_1['updateCustomerDataSchema']),adminController[a20_0x266fa3(0x164)]),router[a20_0x266fa3(0x155)](a20_0x266fa3(0x168),adminController['getUsers']),router['get'](a20_0x266fa3(0x150),adminController[a20_0x266fa3(0x17a)]),router['post']('/users',(0x0,validation_1[a20_0x266fa3(0x116)])(validation_1['createUserSchema']),adminController[a20_0x266fa3(0x16a)]),router['put']('/users/:id',(0x0,validation_1[a20_0x266fa3(0x116)])(validation_1[a20_0x266fa3(0x124)]),adminController['updateUser']),router[a20_0x266fa3(0x13a)](a20_0x266fa3(0x150),adminController['deleteUser']),router[a20_0x266fa3(0x14f)]('/users/:id/suspend',adminController[a20_0x266fa3(0x12a)]),router['post'](a20_0x266fa3(0x171),adminController[a20_0x266fa3(0x13d)]),router[a20_0x266fa3(0x155)](a20_0x266fa3(0x13f),(_0x4c6bfa,_0x1692b3)=>{const _0x12766c=a20_0x266fa3;try{const _0x5e1c45=loggerService_1[_0x12766c(0x15d)]['getLogStats']();_0x1692b3[_0x12766c(0x152)]({'success':!![],'result':_0x5e1c45});}catch(_0xde96c4){_0x1692b3['status'](0x1f4)[_0x12766c(0x152)]({'success':![],'message':_0x12766c(0x129)});}}),router[a20_0x266fa3(0x14f)](a20_0x266fa3(0x156),(_0x44fdf3,_0x3ffbdf)=>{const _0x1b27d3=a20_0x266fa3;try{const {daysToKeep:daysToKeep=0x1e}=_0x44fdf3[_0x1b27d3(0x11b)];loggerService_1[_0x1b27d3(0x15d)][_0x1b27d3(0x17b)](daysToKeep),_0x3ffbdf[_0x1b27d3(0x152)]({'success':!![],'message':_0x1b27d3(0x13c)+daysToKeep+'\x20days)'});}catch(_0x5703e0){_0x3ffbdf[_0x1b27d3(0x167)](0x1f4)['json']({'success':![],'message':_0x1b27d3(0x14a)});}}),router['post']('/cointopay/check/:paymentId',async(_0xf20242,_0x36d625)=>{const _0x4cae18=a20_0x266fa3;try{const {paymentId:_0x316e3c}=_0xf20242[_0x4cae18(0x12f)];console[_0x4cae18(0x16d)]('🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20'+_0x316e3c),await coinToPayStatusService_1[_0x4cae18(0x10f)][_0x4cae18(0x108)](_0x316e3c),_0x36d625['json']({'success':!![],'message':_0x4cae18(0x103)});}catch(_0x42a146){console[_0x4cae18(0x139)](_0x4cae18(0x157)+_0xf20242[_0x4cae18(0x12f)][_0x4cae18(0x11c)]+':',_0x42a146),_0x36d625[_0x4cae18(0x167)](0x1f4)['json']({'success':![],'message':_0x42a146 instanceof Error?_0x42a146[_0x4cae18(0x12e)]:_0x4cae18(0x154)});}}),router[a20_0x266fa3(0x155)]('/cointopay/stats',(_0x1890a1,_0x1a67be)=>{const _0x434abf=a20_0x266fa3;try{const _0x455bf3=coinToPayStatusService_1[_0x434abf(0x10f)][_0x434abf(0x11f)]();_0x1a67be['json']({'success':!![],'result':{..._0x455bf3,'description':_0x434abf(0x148),'statusMapping':{'Paid':_0x434abf(0x145),'Awaiting\x20Fiat':_0x434abf(0x15e),'waiting':_0x434abf(0x15e),'expired':_0x434abf(0x10b),'failed':_0x434abf(0x163)},'autoExpiryNote':_0x434abf(0x113)+_0x455bf3[_0x434abf(0x143)]+_0x434abf(0x123),'individualTimersNote':_0x434abf(0x13e)}});}catch(_0x54513a){_0x1a67be[_0x434abf(0x167)](0x1f4)[_0x434abf(0x152)]({'success':![],'message':_0x434abf(0x172)});}}),router[a20_0x266fa3(0x155)](a20_0x266fa3(0x107),async(_0x4ddb7d,_0x94d99f)=>{const _0x45dcd4=a20_0x266fa3;try{const {paymentId:_0x2dd2a3}=_0x4ddb7d[_0x45dcd4(0x12f)],_0x5a7b73=coinToPayStatusService_1[_0x45dcd4(0x10f)][_0x45dcd4(0x174)](_0x2dd2a3),_0x1d8d52=(await Promise[_0x45dcd4(0x131)]()[_0x45dcd4(0x14e)](()=>__importStar(require(_0x45dcd4(0x16e)))))['default'],_0x261cbe=await _0x1d8d52[_0x45dcd4(0x17c)][_0x45dcd4(0x128)]({'where':{'id':_0x2dd2a3},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x261cbe)return _0x94d99f[_0x45dcd4(0x167)](0x194)[_0x45dcd4(0x152)]({'success':![],'message':_0x45dcd4(0x146)});_0x94d99f[_0x45dcd4(0x152)]({'success':!![],'result':{'payment':{'id':_0x261cbe['id'],'gateway':_0x261cbe[_0x45dcd4(0x15b)],'gatewayPaymentId':_0x261cbe[_0x45dcd4(0x126)],'status':_0x261cbe['status'],'amount':_0x261cbe[_0x45dcd4(0x10a)],'currency':_0x261cbe[_0x45dcd4(0x114)],'createdAt':_0x261cbe['createdAt'],'updatedAt':_0x261cbe['updatedAt'],'shop':_0x261cbe[_0x45dcd4(0x13b)]},'timers':_0x5a7b73,'isCoinToPay':_0x261cbe[_0x45dcd4(0x15b)]===_0x45dcd4(0x11e),'ageInMinutes':Math['floor']((Date[_0x45dcd4(0x14d)]()-_0x261cbe[_0x45dcd4(0x130)][_0x45dcd4(0x170)]())/(0x3e8*0x3c))}});}catch(_0x535bbe){_0x94d99f[_0x45dcd4(0x167)](0x1f4)[_0x45dcd4(0x152)]({'success':![],'message':_0x535bbe instanceof Error?_0x535bbe[_0x45dcd4(0x12e)]:_0x45dcd4(0x166)});}}),router['get'](a20_0x266fa3(0x133),(_0x32a6bb,_0x4e9c43)=>{const _0x3fd72b=a20_0x266fa3;try{const _0x1901e=domainMonitoringService_1[_0x3fd72b(0x14b)][_0x3fd72b(0x159)]();_0x4e9c43[_0x3fd72b(0x152)]({'success':!![],'result':{..._0x1901e,'description':_0x3fd72b(0x120),'behavior':'Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','encoding':_0x3fd72b(0xff)}});}catch(_0x8e764b){_0x4e9c43['status'](0x1f4)[_0x3fd72b(0x152)]({'success':![],'message':_0x3fd72b(0x102)});}}),router[a20_0x266fa3(0x14f)](a20_0x266fa3(0x178),async(_0x2548dd,_0x19b200)=>{const _0x27f5cb=a20_0x266fa3;try{const _0xbaa6f2=await domainMonitoringService_1[_0x27f5cb(0x14b)][_0x27f5cb(0x162)]();_0x19b200['json']({'success':!![],'result':{'domainAvailable':_0xbaa6f2,'message':_0xbaa6f2?_0x27f5cb(0x101):_0x27f5cb(0x16b),'timestamp':new Date()['toISOString']()}});}catch(_0x45a85c){_0x19b200[_0x27f5cb(0x167)](0x1f4)[_0x27f5cb(0x152)]({'success':![],'message':_0x45a85c instanceof Error?_0x45a85c[_0x27f5cb(0x12e)]:_0x27f5cb(0x118)});}}),exports[a20_0x266fa3(0x135)]=router;function a20_0x3bae(){const _0x49c911=['create','348912vgmvNK','/merchants/selection','expiryDays','express','PAID','Payment\x20not\x20found','getPayoutStats','CoinToPay\x20automatic\x20status\x20checking\x20service','/merchant-statistics','Failed\x20to\x20clean\x20old\x20logs','domainMonitoringService','1176249lnEaxd','now','then','post','/users/:id','deletePayout','json','__setModuleDefault','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','get','/logs/clean','❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','../controllers/adminController','getMonitoringStats','628gCRoIq','gateway','/payout/merchants','loggerService','PENDING','getMerchantsSelection','getMerchantStatistics','length','manualCheck','FAILED','updateCustomerData','534398ZFQNuE','Failed\x20to\x20get\x20payment\x20information','status','/users','__createBinding','createUser','Domain\x20check\x20failed','call','log','../config/database','102ERaaBz','getTime','/users/:id/activate','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','use','getPaymentTimerInfo','103747fhUIAT','writable','getPayouts','/domain-monitoring/check','Router','getUserById','cleanOldLogs','payment','updatePayment','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','checkAuth','Domain\x20is\x20responding\x20correctly','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','CoinToPay\x20payment\x20status\x20checked\x20successfully','getOwnPropertyNames','getOwnPropertyDescriptor','110XEIGym','/cointopay/payment/:paymentId','checkPaymentById','4963WSAmcY','amount','EXPIRED','../services/loggerService','6470OQOSXG','/payout','coinToPayStatusService','../services/domainMonitoringService','../middleware/auth','/payments/:id','Payments\x20automatically\x20expire\x20after\x20','currency','getMerchantsAwaitingPayout','validate','put','Failed\x20to\x20perform\x20manual\x20domain\x20check','getPayments','createPayoutSchema','body','paymentId','1112058LFKDvp','cointopay','getServiceStats','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','hasOwnProperty','__esModule','\x20days\x20if\x20not\x20paid','updateUserSchema','/statistics','gatewayPaymentId','requireAdmin','findUnique','Failed\x20to\x20get\x20log\x20statistics','suspendUser','../middleware/validation','/payouts','/auth','message','params','createdAt','resolve','/payout/stats','/domain-monitoring/stats','/payments/:id/customer','default','/payments','/payouts/:id','defineProperty','error','delete','shop','Old\x20logs\x20cleaned\x20(kept\x20last\x20','activateUser','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','/logs/stats'];a20_0x3bae=function(){return _0x49c911;};return a20_0x3bae();}