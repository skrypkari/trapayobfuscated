'use strict';function a19_0x7028(_0x4f9fef,_0x46e878){const _0x51cbe5=a19_0x51cb();return a19_0x7028=function(_0x702805,_0x3f0b99){_0x702805=_0x702805-0xc1;let _0x20e072=_0x51cbe5[_0x702805];return _0x20e072;},a19_0x7028(_0x4f9fef,_0x46e878);}const a19_0x21a808=a19_0x7028;(function(_0x51a1ba,_0x3b665e){const _0x36a7bc=a19_0x7028,_0xff8173=_0x51a1ba();while(!![]){try{const _0x339c52=parseInt(_0x36a7bc(0x12f))/0x1+parseInt(_0x36a7bc(0x10b))/0x2*(-parseInt(_0x36a7bc(0xd1))/0x3)+-parseInt(_0x36a7bc(0xee))/0x4*(parseInt(_0x36a7bc(0x106))/0x5)+parseInt(_0x36a7bc(0x11d))/0x6*(parseInt(_0x36a7bc(0x132))/0x7)+-parseInt(_0x36a7bc(0x121))/0x8*(-parseInt(_0x36a7bc(0xfc))/0x9)+parseInt(_0x36a7bc(0x123))/0xa+-parseInt(_0x36a7bc(0x11a))/0xb*(parseInt(_0x36a7bc(0x120))/0xc);if(_0x339c52===_0x3b665e)break;else _0xff8173['push'](_0xff8173['shift']());}catch(_0x4a1da9){_0xff8173['push'](_0xff8173['shift']());}}}(a19_0x51cb,0x40849));function a19_0x51cb(){const _0xefb06d=['/domain-monitoring/check','FAILED','json','create','PENDING','Domain\x20check\x20failed','getPayoutStats','/payments/:id','prototype','/cointopay/stats','CoinToPay\x20payment\x20status\x20checked\x20successfully','loggerService','length','Domain\x20is\x20responding\x20correctly','/payout/stats','/domain-monitoring/stats','../middleware/auth','updatePayment','status','params','use','__setModuleDefault','default','cointopay','../controllers/adminController','Router','594027xJmLZt','resolve','/merchants/selection','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','getPaymentById','/cointopay/payment/:paymentId','/statistics','getMerchantsSelection','getPayouts','toISOString','/payout/merchants','/users/:id','/merchant-statistics','/payouts/:id','../services/loggerService','\x20days)','findUnique','Old\x20logs\x20cleaned\x20(kept\x20last\x20','getOwnPropertyNames','cleanOldLogs','updateCustomerDataSchema','manualCheck','/logs/clean','/users/:id/suspend','/payments/:id/customer','gateway','currency','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','592744vrNxja','now','__createBinding','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','message','updatedAt','delete','payment','/payout','defineProperty','/auth','coinToPayStatusService','shop','PAID','1948014cCxHih','getMerchantStatistics','getMerchantsAwaitingPayout','getStatistics','writable','configurable','getOwnPropertyDescriptor','/users','AdminController','getLogStats','5TTEkEk','createPayout','../services/coinToPayStatusService','body','post','2oumvOw','updateCustomerData','paymentId','Payment\x20not\x20found','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','../config/database','gatewayPaymentId','Failed\x20to\x20clean\x20old\x20logs','/users/:id/activate','updateUserSchema','domainMonitoringService','../services/domainMonitoringService','validate','hasOwnProperty','get','421476VDpjeI','getPayments','getMonitoringStats','1004790ZNYxgZ','EXPIRED','activateUser','96GGbpPu','8KWFRsS','__esModule','210390EnWGBy','/payouts','\x20days\x20if\x20not\x20paid','Failed\x20to\x20perform\x20manual\x20domain\x20check','Payments\x20automatically\x20expire\x20after\x20','put','deleteUser','express','Failed\x20to\x20get\x20log\x20statistics','call','createUser','createdAt','344573zBXcqb','floor','CoinToPay\x20automatic\x20status\x20checking\x20service','14Gmomvt','Failed\x20to\x20get\x20payment\x20information'];a19_0x51cb=function(){return _0xefb06d;};return a19_0x51cb();}var __createBinding=this&&this[a19_0x21a808(0xf0)]||(Object[a19_0x21a808(0x137)]?function(_0x567185,_0xa5e86,_0x3f68c8,_0x1a9deb){const _0x4c7c55=a19_0x21a808;if(_0x1a9deb===undefined)_0x1a9deb=_0x3f68c8;var _0x333bfe=Object[_0x4c7c55(0x102)](_0xa5e86,_0x3f68c8);(!_0x333bfe||(_0x4c7c55(0x119)in _0x333bfe?!_0xa5e86[_0x4c7c55(0x122)]:_0x333bfe[_0x4c7c55(0x100)]||_0x333bfe[_0x4c7c55(0x101)]))&&(_0x333bfe={'enumerable':!![],'get':function(){return _0xa5e86[_0x3f68c8];}}),Object[_0x4c7c55(0xf7)](_0x567185,_0x1a9deb,_0x333bfe);}:function(_0x551822,_0x278bb4,_0x550c06,_0x55db15){if(_0x55db15===undefined)_0x55db15=_0x550c06;_0x551822[_0x55db15]=_0x278bb4[_0x550c06];}),__setModuleDefault=this&&this[a19_0x21a808(0xcc)]||(Object[a19_0x21a808(0x137)]?function(_0x379d1a,_0x51457c){const _0x5f34ae=a19_0x21a808;Object[_0x5f34ae(0xf7)](_0x379d1a,_0x5f34ae(0xcd),{'enumerable':!![],'value':_0x51457c});}:function(_0x31d88d,_0x47478a){_0x31d88d['default']=_0x47478a;}),__importStar=this&&this['__importStar']||(function(){var _0xa92ce9=function(_0x21972c){const _0x3921ea=a19_0x7028;return _0xa92ce9=Object[_0x3921ea(0xe4)]||function(_0x21a963){const _0x260462=_0x3921ea;var _0x4b3367=[];for(var _0x420845 in _0x21a963)if(Object[_0x260462(0x13c)][_0x260462(0x118)][_0x260462(0x12c)](_0x21a963,_0x420845))_0x4b3367[_0x4b3367['length']]=_0x420845;return _0x4b3367;},_0xa92ce9(_0x21972c);};return function(_0x1ee22d){const _0x31b837=a19_0x7028;if(_0x1ee22d&&_0x1ee22d[_0x31b837(0x122)])return _0x1ee22d;var _0x52e70e={};if(_0x1ee22d!=null){for(var _0x3d92d4=_0xa92ce9(_0x1ee22d),_0x4c3d53=0x0;_0x4c3d53<_0x3d92d4[_0x31b837(0xc3)];_0x4c3d53++)if(_0x3d92d4[_0x4c3d53]!=='default')__createBinding(_0x52e70e,_0x1ee22d,_0x3d92d4[_0x4c3d53]);}return __setModuleDefault(_0x52e70e,_0x1ee22d),_0x52e70e;};}());Object[a19_0x21a808(0xf7)](exports,a19_0x21a808(0x122),{'value':!![]});const express_1=require(a19_0x21a808(0x12a)),adminController_1=require(a19_0x21a808(0xcf)),validation_1=require('../middleware/validation'),auth_1=require(a19_0x21a808(0xc7)),loggerService_1=require(a19_0x21a808(0xe0)),coinToPayStatusService_1=require(a19_0x21a808(0x108)),domainMonitoringService_1=require(a19_0x21a808(0x116)),router=(0x0,express_1[a19_0x21a808(0xd0)])(),adminController=new adminController_1[(a19_0x21a808(0x104))]();router[a19_0x21a808(0xcb)](auth_1['authenticateToken'],auth_1['requireAdmin']),router[a19_0x21a808(0x119)](a19_0x21a808(0xf8),adminController['checkAuth']),router[a19_0x21a808(0x119)](a19_0x21a808(0xd8),adminController[a19_0x21a808(0xff)]),router[a19_0x21a808(0x119)](a19_0x21a808(0xde),adminController[a19_0x21a808(0xfd)]),router[a19_0x21a808(0x119)](a19_0x21a808(0xc5),adminController[a19_0x21a808(0x13a)]),router[a19_0x21a808(0x119)](a19_0x21a808(0xdc),adminController[a19_0x21a808(0xfe)]),router[a19_0x21a808(0x119)](a19_0x21a808(0xd3),adminController[a19_0x21a808(0xd9)]),router['post'](a19_0x21a808(0xf6),(0x0,validation_1['validate'])(validation_1['createPayoutSchema']),adminController[a19_0x21a808(0x107)]),router[a19_0x21a808(0x119)](a19_0x21a808(0x124),adminController[a19_0x21a808(0xda)]),router['get'](a19_0x21a808(0xdf),adminController['getPayoutById']),router[a19_0x21a808(0xf4)]('/payouts/:id',adminController['deletePayout']),router[a19_0x21a808(0x119)]('/payments',adminController[a19_0x21a808(0x11b)]),router[a19_0x21a808(0x119)]('/payments/:id',adminController[a19_0x21a808(0xd6)]),router[a19_0x21a808(0x128)](a19_0x21a808(0x13b),adminController[a19_0x21a808(0xc8)]),router[a19_0x21a808(0x128)](a19_0x21a808(0xea),(0x0,validation_1[a19_0x21a808(0x117)])(validation_1[a19_0x21a808(0xe6)]),adminController[a19_0x21a808(0x10c)]),router['get'](a19_0x21a808(0x103),adminController['getUsers']),router[a19_0x21a808(0x119)]('/users/:id',adminController['getUserById']),router[a19_0x21a808(0x10a)](a19_0x21a808(0x103),(0x0,validation_1[a19_0x21a808(0x117)])(validation_1['createUserSchema']),adminController[a19_0x21a808(0x12d)]),router[a19_0x21a808(0x128)](a19_0x21a808(0xdd),(0x0,validation_1[a19_0x21a808(0x117)])(validation_1[a19_0x21a808(0x114)]),adminController['updateUser']),router[a19_0x21a808(0xf4)](a19_0x21a808(0xdd),adminController[a19_0x21a808(0x129)]),router[a19_0x21a808(0x10a)](a19_0x21a808(0xe9),adminController['suspendUser']),router[a19_0x21a808(0x10a)](a19_0x21a808(0x113),adminController[a19_0x21a808(0x11f)]),router[a19_0x21a808(0x119)]('/logs/stats',(_0x1ca403,_0x2a86f2)=>{const _0xf9d2ab=a19_0x21a808;try{const _0x4a4bb0=loggerService_1[_0xf9d2ab(0xc2)][_0xf9d2ab(0x105)]();_0x2a86f2[_0xf9d2ab(0x136)]({'success':!![],'result':_0x4a4bb0});}catch(_0x569b2c){_0x2a86f2[_0xf9d2ab(0xc9)](0x1f4)[_0xf9d2ab(0x136)]({'success':![],'message':_0xf9d2ab(0x12b)});}}),router[a19_0x21a808(0x10a)](a19_0x21a808(0xe8),(_0x45e873,_0xf63937)=>{const _0x275b8b=a19_0x21a808;try{const {daysToKeep:daysToKeep=0x1e}=_0x45e873[_0x275b8b(0x109)];loggerService_1['loggerService'][_0x275b8b(0xe5)](daysToKeep),_0xf63937[_0x275b8b(0x136)]({'success':!![],'message':_0x275b8b(0xe3)+daysToKeep+_0x275b8b(0xe1)});}catch(_0x462f71){_0xf63937['status'](0x1f4)['json']({'success':![],'message':_0x275b8b(0x112)});}}),router['post']('/cointopay/check/:paymentId',async(_0x4bbe66,_0x2f94b4)=>{const _0x2a6f32=a19_0x21a808;try{const {paymentId:_0x558232}=_0x4bbe66[_0x2a6f32(0xca)];console['log']('üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20'+_0x558232),await coinToPayStatusService_1[_0x2a6f32(0xf9)]['checkPaymentById'](_0x558232),_0x2f94b4[_0x2a6f32(0x136)]({'success':!![],'message':_0x2a6f32(0xc1)});}catch(_0x59e0c4){console['error'](_0x2a6f32(0xd5)+_0x4bbe66['params'][_0x2a6f32(0x10d)]+':',_0x59e0c4),_0x2f94b4[_0x2a6f32(0xc9)](0x1f4)[_0x2a6f32(0x136)]({'success':![],'message':_0x59e0c4 instanceof Error?_0x59e0c4[_0x2a6f32(0xf2)]:_0x2a6f32(0x10f)});}}),router[a19_0x21a808(0x119)](a19_0x21a808(0x13d),(_0x3c5fef,_0x28afc1)=>{const _0x54d802=a19_0x21a808;try{const _0x3ff531=coinToPayStatusService_1['coinToPayStatusService']['getServiceStats']();_0x28afc1[_0x54d802(0x136)]({'success':!![],'result':{..._0x3ff531,'description':_0x54d802(0x131),'statusMapping':{'Paid':_0x54d802(0xfb),'Awaiting\x20Fiat':_0x54d802(0x138),'waiting':'PENDING','expired':_0x54d802(0x11e),'failed':_0x54d802(0x135)},'autoExpiryNote':_0x54d802(0x127)+_0x3ff531['expiryDays']+_0x54d802(0x125),'individualTimersNote':_0x54d802(0xed)}});}catch(_0x3044d1){_0x28afc1[_0x54d802(0xc9)](0x1f4)['json']({'success':![],'message':_0x54d802(0xf1)});}}),router[a19_0x21a808(0x119)](a19_0x21a808(0xd7),async(_0x638661,_0x7a3815)=>{const _0x345aa8=a19_0x21a808;try{const {paymentId:_0x1f3437}=_0x638661[_0x345aa8(0xca)],_0x54ab8a=coinToPayStatusService_1[_0x345aa8(0xf9)]['getPaymentTimerInfo'](_0x1f3437),_0x2ec647=(await Promise[_0x345aa8(0xd2)]()['then'](()=>__importStar(require(_0x345aa8(0x110)))))[_0x345aa8(0xcd)],_0x1c8adc=await _0x2ec647[_0x345aa8(0xf5)][_0x345aa8(0xe2)]({'where':{'id':_0x1f3437},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x1c8adc)return _0x7a3815[_0x345aa8(0xc9)](0x194)['json']({'success':![],'message':_0x345aa8(0x10e)});_0x7a3815['json']({'success':!![],'result':{'payment':{'id':_0x1c8adc['id'],'gateway':_0x1c8adc[_0x345aa8(0xeb)],'gatewayPaymentId':_0x1c8adc[_0x345aa8(0x111)],'status':_0x1c8adc['status'],'amount':_0x1c8adc['amount'],'currency':_0x1c8adc[_0x345aa8(0xec)],'createdAt':_0x1c8adc['createdAt'],'updatedAt':_0x1c8adc[_0x345aa8(0xf3)],'shop':_0x1c8adc[_0x345aa8(0xfa)]},'timers':_0x54ab8a,'isCoinToPay':_0x1c8adc[_0x345aa8(0xeb)]===_0x345aa8(0xce),'ageInMinutes':Math[_0x345aa8(0x130)]((Date[_0x345aa8(0xef)]()-_0x1c8adc[_0x345aa8(0x12e)]['getTime']())/(0x3e8*0x3c))}});}catch(_0x484651){_0x7a3815[_0x345aa8(0xc9)](0x1f4)['json']({'success':![],'message':_0x484651 instanceof Error?_0x484651[_0x345aa8(0xf2)]:_0x345aa8(0x133)});}}),router[a19_0x21a808(0x119)](a19_0x21a808(0xc6),(_0x4e8e20,_0x178a42)=>{const _0x1ee040=a19_0x21a808;try{const _0xa5e3a8=domainMonitoringService_1[_0x1ee040(0x115)][_0x1ee040(0x11c)]();_0x178a42[_0x1ee040(0x136)]({'success':!![],'result':{..._0xa5e3a8,'description':'Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','behavior':'Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','encoding':'Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs'}});}catch(_0x54fb5e){_0x178a42[_0x1ee040(0xc9)](0x1f4)[_0x1ee040(0x136)]({'success':![],'message':_0x1ee040(0xd4)});}}),router['post'](a19_0x21a808(0x134),async(_0x5c8103,_0x5da5e2)=>{const _0x10b3e2=a19_0x21a808;try{const _0x37d96f=await domainMonitoringService_1[_0x10b3e2(0x115)][_0x10b3e2(0xe7)]();_0x5da5e2[_0x10b3e2(0x136)]({'success':!![],'result':{'domainAvailable':_0x37d96f,'message':_0x37d96f?_0x10b3e2(0xc4):_0x10b3e2(0x139),'timestamp':new Date()[_0x10b3e2(0xdb)]()}});}catch(_0x590fc2){_0x5da5e2[_0x10b3e2(0xc9)](0x1f4)[_0x10b3e2(0x136)]({'success':![],'message':_0x590fc2 instanceof Error?_0x590fc2[_0x10b3e2(0xf2)]:_0x10b3e2(0x126)});}}),exports[a19_0x21a808(0xcd)]=router;