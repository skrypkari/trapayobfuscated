'use strict';function a19_0x2b3d(_0x161c26,_0x3ed9a4){const _0x242031=a19_0x2420();return a19_0x2b3d=function(_0x2b3d3d,_0x196a97){_0x2b3d3d=_0x2b3d3d-0x13a;let _0x159ad9=_0x242031[_0x2b3d3d];return _0x159ad9;},a19_0x2b3d(_0x161c26,_0x3ed9a4);}function a19_0x2420(){const _0x55fc45=['createUserSchema','error','../config/database','createdAt','Failed\x20to\x20clean\x20old\x20logs','CoinToPay\x20payment\x20status\x20checked\x20successfully','validate','/users/:id/suspend','toISOString','create','currency','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','/payments/:id/customer','prototype','getOwnPropertyDescriptor','createPayout','configurable','shop','express','hasOwnProperty','__setModuleDefault','getMerchantStatistics','PENDING','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','Payment\x20not\x20found','getMerchantsSelection','getUsers','../services/domainMonitoringService','post','authenticateToken','2229063HfdCDC','../middleware/auth','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','delete','/payouts/:id','Failed\x20to\x20get\x20log\x20statistics','1985bmhRTe','Failed\x20to\x20get\x20payment\x20information','/payments/:id','message','getPayoutStats','/logs/clean','requireAdmin','put','16176726nZdSJZ','10976189RHMDhC','gatewayPaymentId','cleanOldLogs','Failed\x20to\x20perform\x20manual\x20domain\x20check','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','updateUserSchema','719382bFtzYa','then','/merchant-statistics','CoinToPay\x20automatic\x20status\x20checking\x20service','../services/loggerService','json','../middleware/validation','findUnique','Router','/users/:id/activate','defineProperty','/payout','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','/payments','gateway','getPayments','/cointopay/check/:paymentId','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','deletePayout','getTime','10924rhviak','createPayoutSchema','5334168EfBmTa','body','/users/:id','cointopay','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','use','getPaymentById','loggerService','writable','Domain\x20is\x20responding\x20correctly','updateCustomerDataSchema','payment','coinToPayStatusService','/auth','../services/coinToPayStatusService','../controllers/adminController','__esModule','amount','default','/merchants/selection','\x20days)','checkPaymentById','61604HcpOdu','now','getOwnPropertyNames','14QvYJvJ','/cointopay/stats','length','get','getPayoutById','/users','/domain-monitoring/check','status','call','floor','updatePayment','/statistics','expiryDays','activateUser','/logs/stats','\x20days\x20if\x20not\x20paid','__importStar','params','deleteUser','/payouts','updatedAt','Domain\x20check\x20failed','paymentId'];a19_0x2420=function(){return _0x55fc45;};return a19_0x2420();}const a19_0x4a2119=a19_0x2b3d;(function(_0x1c4c02,_0x3b1401){const _0x1716b2=a19_0x2b3d,_0x5b8c89=_0x1c4c02();while(!![]){try{const _0x4a0213=parseInt(_0x1716b2(0x1ae))/0x1*(parseInt(_0x1716b2(0x1ab))/0x2)+parseInt(_0x1716b2(0x169))/0x3+-parseInt(_0x1716b2(0x193))/0x4*(parseInt(_0x1716b2(0x16f))/0x5)+-parseInt(_0x1716b2(0x17e))/0x6+-parseInt(_0x1716b2(0x178))/0x7+parseInt(_0x1716b2(0x195))/0x8+parseInt(_0x1716b2(0x177))/0x9;if(_0x4a0213===_0x3b1401)break;else _0x5b8c89['push'](_0x5b8c89['shift']());}catch(_0x4ecd1f){_0x5b8c89['push'](_0x5b8c89['shift']());}}}(a19_0x2420,0xd37ff));var __createBinding=this&&this['__createBinding']||(Object['create']?function(_0x58d1e5,_0x333d46,_0x227751,_0x148535){const _0x4fddc3=a19_0x2b3d;if(_0x148535===undefined)_0x148535=_0x227751;var _0x4c71b2=Object[_0x4fddc3(0x159)](_0x333d46,_0x227751);(!_0x4c71b2||(_0x4fddc3(0x1b1)in _0x4c71b2?!_0x333d46['__esModule']:_0x4c71b2[_0x4fddc3(0x19d)]||_0x4c71b2[_0x4fddc3(0x15b)]))&&(_0x4c71b2={'enumerable':!![],'get':function(){return _0x333d46[_0x227751];}}),Object[_0x4fddc3(0x188)](_0x58d1e5,_0x148535,_0x4c71b2);}:function(_0x30d8ed,_0x1f84d5,_0x3f0ca2,_0x5b9345){if(_0x5b9345===undefined)_0x5b9345=_0x3f0ca2;_0x30d8ed[_0x5b9345]=_0x1f84d5[_0x3f0ca2];}),__setModuleDefault=this&&this[a19_0x4a2119(0x15f)]||(Object[a19_0x4a2119(0x154)]?function(_0x476ebc,_0x507566){Object['defineProperty'](_0x476ebc,'default',{'enumerable':!![],'value':_0x507566});}:function(_0x2e7c69,_0x1d682a){_0x2e7c69['default']=_0x1d682a;}),__importStar=this&&this[a19_0x4a2119(0x144)]||(function(){var _0x2c6934=function(_0x50d574){const _0x31d7ba=a19_0x2b3d;return _0x2c6934=Object[_0x31d7ba(0x1ad)]||function(_0x57caed){const _0x20c566=_0x31d7ba;var _0x4b7886=[];for(var _0x35d8a2 in _0x57caed)if(Object[_0x20c566(0x158)][_0x20c566(0x15e)][_0x20c566(0x13c)](_0x57caed,_0x35d8a2))_0x4b7886[_0x4b7886['length']]=_0x35d8a2;return _0x4b7886;},_0x2c6934(_0x50d574);};return function(_0x4821d8){const _0x47a194=a19_0x2b3d;if(_0x4821d8&&_0x4821d8[_0x47a194(0x1a5)])return _0x4821d8;var _0xc1d2a2={};if(_0x4821d8!=null){for(var _0x47ac3d=_0x2c6934(_0x4821d8),_0x1b9949=0x0;_0x1b9949<_0x47ac3d[_0x47a194(0x1b0)];_0x1b9949++)if(_0x47ac3d[_0x1b9949]!==_0x47a194(0x1a7))__createBinding(_0xc1d2a2,_0x4821d8,_0x47ac3d[_0x1b9949]);}return __setModuleDefault(_0xc1d2a2,_0x4821d8),_0xc1d2a2;};}());Object[a19_0x4a2119(0x188)](exports,'__esModule',{'value':!![]});const express_1=require(a19_0x4a2119(0x15d)),adminController_1=require(a19_0x4a2119(0x1a4)),validation_1=require(a19_0x4a2119(0x184)),auth_1=require(a19_0x4a2119(0x16a)),loggerService_1=require(a19_0x4a2119(0x182)),coinToPayStatusService_1=require(a19_0x4a2119(0x1a3)),domainMonitoringService_1=require(a19_0x4a2119(0x166)),router=(0x0,express_1[a19_0x4a2119(0x186)])(),adminController=new adminController_1['AdminController']();router[a19_0x4a2119(0x19a)](auth_1[a19_0x4a2119(0x168)],auth_1[a19_0x4a2119(0x175)]),router['get'](a19_0x4a2119(0x1a2),adminController['checkAuth']),router[a19_0x4a2119(0x1b1)](a19_0x4a2119(0x13f),adminController['getStatistics']),router[a19_0x4a2119(0x1b1)](a19_0x4a2119(0x180),adminController[a19_0x4a2119(0x160)]),router[a19_0x4a2119(0x1b1)]('/payout/stats',adminController[a19_0x4a2119(0x173)]),router['get']('/payout/merchants',adminController['getMerchantsAwaitingPayout']),router['get'](a19_0x4a2119(0x1a8),adminController[a19_0x4a2119(0x164)]),router[a19_0x4a2119(0x167)](a19_0x4a2119(0x189),(0x0,validation_1[a19_0x4a2119(0x151)])(validation_1[a19_0x4a2119(0x194)]),adminController[a19_0x4a2119(0x15a)]),router[a19_0x4a2119(0x1b1)](a19_0x4a2119(0x147),adminController['getPayouts']),router[a19_0x4a2119(0x1b1)](a19_0x4a2119(0x16d),adminController[a19_0x4a2119(0x1b2)]),router[a19_0x4a2119(0x16c)]('/payouts/:id',adminController[a19_0x4a2119(0x191)]),router[a19_0x4a2119(0x1b1)](a19_0x4a2119(0x18b),adminController[a19_0x4a2119(0x18d)]),router[a19_0x4a2119(0x1b1)]('/payments/:id',adminController[a19_0x4a2119(0x19b)]),router[a19_0x4a2119(0x176)](a19_0x4a2119(0x171),adminController[a19_0x4a2119(0x13e)]),router[a19_0x4a2119(0x176)](a19_0x4a2119(0x157),(0x0,validation_1[a19_0x4a2119(0x151)])(validation_1[a19_0x4a2119(0x19f)]),adminController['updateCustomerData']),router[a19_0x4a2119(0x1b1)](a19_0x4a2119(0x1b3),adminController[a19_0x4a2119(0x165)]),router[a19_0x4a2119(0x1b1)](a19_0x4a2119(0x197),adminController['getUserById']),router[a19_0x4a2119(0x167)](a19_0x4a2119(0x1b3),(0x0,validation_1[a19_0x4a2119(0x151)])(validation_1[a19_0x4a2119(0x14b)]),adminController['createUser']),router[a19_0x4a2119(0x176)](a19_0x4a2119(0x197),(0x0,validation_1[a19_0x4a2119(0x151)])(validation_1[a19_0x4a2119(0x17d)]),adminController['updateUser']),router[a19_0x4a2119(0x16c)](a19_0x4a2119(0x197),adminController[a19_0x4a2119(0x146)]),router[a19_0x4a2119(0x167)](a19_0x4a2119(0x152),adminController['suspendUser']),router[a19_0x4a2119(0x167)](a19_0x4a2119(0x187),adminController[a19_0x4a2119(0x141)]),router[a19_0x4a2119(0x1b1)](a19_0x4a2119(0x142),(_0x1b66bf,_0x597ae8)=>{const _0x5993e7=a19_0x4a2119;try{const _0x5639d5=loggerService_1['loggerService']['getLogStats']();_0x597ae8[_0x5993e7(0x183)]({'success':!![],'result':_0x5639d5});}catch(_0x2503c0){_0x597ae8[_0x5993e7(0x13b)](0x1f4)[_0x5993e7(0x183)]({'success':![],'message':_0x5993e7(0x16e)});}}),router[a19_0x4a2119(0x167)](a19_0x4a2119(0x174),(_0x1455ff,_0x3c1a1b)=>{const _0x1e33a9=a19_0x4a2119;try{const {daysToKeep:daysToKeep=0x1e}=_0x1455ff[_0x1e33a9(0x196)];loggerService_1[_0x1e33a9(0x19c)][_0x1e33a9(0x17a)](daysToKeep),_0x3c1a1b[_0x1e33a9(0x183)]({'success':!![],'message':'Old\x20logs\x20cleaned\x20(kept\x20last\x20'+daysToKeep+_0x1e33a9(0x1a9)});}catch(_0x4702eb){_0x3c1a1b['status'](0x1f4)[_0x1e33a9(0x183)]({'success':![],'message':_0x1e33a9(0x14f)});}}),router[a19_0x4a2119(0x167)](a19_0x4a2119(0x18e),async(_0x41fc9c,_0x544e70)=>{const _0x2f5352=a19_0x4a2119;try{const {paymentId:_0x187b9a}=_0x41fc9c[_0x2f5352(0x145)];console['log'](_0x2f5352(0x162)+_0x187b9a),await coinToPayStatusService_1[_0x2f5352(0x1a1)][_0x2f5352(0x1aa)](_0x187b9a),_0x544e70[_0x2f5352(0x183)]({'success':!![],'message':_0x2f5352(0x150)});}catch(_0x33634b){console[_0x2f5352(0x14c)](_0x2f5352(0x156)+_0x41fc9c[_0x2f5352(0x145)][_0x2f5352(0x14a)]+':',_0x33634b),_0x544e70[_0x2f5352(0x13b)](0x1f4)[_0x2f5352(0x183)]({'success':![],'message':_0x33634b instanceof Error?_0x33634b[_0x2f5352(0x172)]:'Failed\x20to\x20check\x20CoinToPay\x20payment\x20status'});}}),router[a19_0x4a2119(0x1b1)](a19_0x4a2119(0x1af),(_0x2a40bf,_0x21a45d)=>{const _0x3c007e=a19_0x4a2119;try{const _0x4165be=coinToPayStatusService_1[_0x3c007e(0x1a1)]['getServiceStats']();_0x21a45d[_0x3c007e(0x183)]({'success':!![],'result':{..._0x4165be,'description':_0x3c007e(0x181),'statusMapping':{'Paid':'PAID','Awaiting\x20Fiat':'PENDING','waiting':_0x3c007e(0x161),'expired':'EXPIRED','failed':'FAILED'},'autoExpiryNote':'Payments\x20automatically\x20expire\x20after\x20'+_0x4165be[_0x3c007e(0x140)]+_0x3c007e(0x143),'individualTimersNote':_0x3c007e(0x16b)}});}catch(_0x4beaad){_0x21a45d[_0x3c007e(0x13b)](0x1f4)[_0x3c007e(0x183)]({'success':![],'message':_0x3c007e(0x18f)});}}),router['get']('/cointopay/payment/:paymentId',async(_0x30a37d,_0x3cf04a)=>{const _0x318241=a19_0x4a2119;try{const {paymentId:_0x154f7c}=_0x30a37d[_0x318241(0x145)],_0x1d1831=coinToPayStatusService_1[_0x318241(0x1a1)]['getPaymentTimerInfo'](_0x154f7c),_0xbe609d=(await Promise['resolve']()[_0x318241(0x17f)](()=>__importStar(require(_0x318241(0x14d)))))[_0x318241(0x1a7)],_0x411c36=await _0xbe609d[_0x318241(0x1a0)][_0x318241(0x185)]({'where':{'id':_0x154f7c},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x411c36)return _0x3cf04a['status'](0x194)[_0x318241(0x183)]({'success':![],'message':_0x318241(0x163)});_0x3cf04a[_0x318241(0x183)]({'success':!![],'result':{'payment':{'id':_0x411c36['id'],'gateway':_0x411c36[_0x318241(0x18c)],'gatewayPaymentId':_0x411c36[_0x318241(0x179)],'status':_0x411c36[_0x318241(0x13b)],'amount':_0x411c36[_0x318241(0x1a6)],'currency':_0x411c36[_0x318241(0x155)],'createdAt':_0x411c36['createdAt'],'updatedAt':_0x411c36[_0x318241(0x148)],'shop':_0x411c36[_0x318241(0x15c)]},'timers':_0x1d1831,'isCoinToPay':_0x411c36[_0x318241(0x18c)]===_0x318241(0x198),'ageInMinutes':Math[_0x318241(0x13d)]((Date[_0x318241(0x1ac)]()-_0x411c36[_0x318241(0x14e)][_0x318241(0x192)]())/(0x3e8*0x3c))}});}catch(_0x41ad7d){_0x3cf04a[_0x318241(0x13b)](0x1f4)[_0x318241(0x183)]({'success':![],'message':_0x41ad7d instanceof Error?_0x41ad7d[_0x318241(0x172)]:_0x318241(0x170)});}}),router['get']('/domain-monitoring/stats',(_0x36e430,_0x44e7e4)=>{const _0xa042ab=a19_0x4a2119;try{const _0x41336f=domainMonitoringService_1['domainMonitoringService']['getMonitoringStats']();_0x44e7e4['json']({'success':!![],'result':{..._0x41336f,'description':_0xa042ab(0x199),'behavior':_0xa042ab(0x18a),'encoding':_0xa042ab(0x17c)}});}catch(_0x1de9a7){_0x44e7e4[_0xa042ab(0x13b)](0x1f4)[_0xa042ab(0x183)]({'success':![],'message':_0xa042ab(0x190)});}}),router[a19_0x4a2119(0x167)](a19_0x4a2119(0x13a),async(_0x4c10d2,_0x5599bf)=>{const _0x2129ee=a19_0x4a2119;try{const _0x1eeda6=await domainMonitoringService_1['domainMonitoringService']['manualCheck']();_0x5599bf[_0x2129ee(0x183)]({'success':!![],'result':{'domainAvailable':_0x1eeda6,'message':_0x1eeda6?_0x2129ee(0x19e):_0x2129ee(0x149),'timestamp':new Date()[_0x2129ee(0x153)]()}});}catch(_0xc4f505){_0x5599bf[_0x2129ee(0x13b)](0x1f4)[_0x2129ee(0x183)]({'success':![],'message':_0xc4f505 instanceof Error?_0xc4f505[_0x2129ee(0x172)]:_0x2129ee(0x17b)});}}),exports[a19_0x4a2119(0x1a7)]=router;