'use strict';function a19_0x93d6(_0x4edd67,_0x5f2afc){const _0xa39931=a19_0xa399();return a19_0x93d6=function(_0x93d6a5,_0x57fa6d){_0x93d6a5=_0x93d6a5-0x89;let _0x5b0e9b=_0xa39931[_0x93d6a5];return _0x5b0e9b;},a19_0x93d6(_0x4edd67,_0x5f2afc);}const a19_0x4124a8=a19_0x93d6;(function(_0x4bff3f,_0x1a6d53){const _0x133ab8=a19_0x93d6,_0xb1c8a8=_0x4bff3f();while(!![]){try{const _0x45fd06=parseInt(_0x133ab8(0x95))/0x1*(parseInt(_0x133ab8(0xaf))/0x2)+parseInt(_0x133ab8(0xc4))/0x3+parseInt(_0x133ab8(0xc7))/0x4+-parseInt(_0x133ab8(0xd3))/0x5*(parseInt(_0x133ab8(0x96))/0x6)+-parseInt(_0x133ab8(0x8a))/0x7*(-parseInt(_0x133ab8(0xcd))/0x8)+parseInt(_0x133ab8(0xe7))/0x9*(parseInt(_0x133ab8(0x9d))/0xa)+-parseInt(_0x133ab8(0xa1))/0xb;if(_0x45fd06===_0x1a6d53)break;else _0xb1c8a8['push'](_0xb1c8a8['shift']());}catch(_0x469120){_0xb1c8a8['push'](_0xb1c8a8['shift']());}}}(a19_0xa399,0xa8a51));function a19_0xa399(){const _0x5984ca=['/merchant-statistics','/users','__esModule','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','cointopay','validate','express','PAID','toISOString','getLogStats','shop','checkAuth','Payments\x20automatically\x20expire\x20after\x20','delete','70euZbjW','getPayouts','params','getMerchantsAwaitingPayout','PENDING','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','authenticateToken','getPayments','updateCustomerDataSchema','writable','expiryDays','74365hnIchI','354oWWPGR','log','getMerchantsSelection','FAILED','floor','Domain\x20check\x20failed','manualCheck','13726220EZqnny','requireAdmin','getOwnPropertyNames','updateCustomerData','34532553bViFzM','createPayoutSchema','loggerService','coinToPayStatusService','get','post','../services/loggerService','updateUserSchema','checkPaymentById','paymentId','/logs/clean','/auth','/payouts/:id','/cointopay/check/:paymentId','34bDNQhm','/payout','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','message','__setModuleDefault','use','getTime','cleanOldLogs','body','defineProperty','Failed\x20to\x20get\x20payment\x20information','resolve','gateway','currency','getPaymentById','deleteUser','/payout/merchants','length','put','CoinToPay\x20automatic\x20status\x20checking\x20service','json','3618543nRhnxM','/payouts','createUserSchema','52600DLgIsW','domainMonitoringService','/merchants/selection','default','Old\x20logs\x20cleaned\x20(kept\x20last\x20','amount','576IElKil','/domain-monitoring/check','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','/statistics','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','createdAt','2270xxWRIL','getPayoutStats','getUserById','__importStar','\x20days)','/payout/stats','\x20days\x20if\x20not\x20paid','/payments','findUnique','create','Failed\x20to\x20perform\x20manual\x20domain\x20check','/domain-monitoring/stats','/users/:id','../config/database','then','getPayoutById','/payments/:id','payment','configurable','deletePayout','9sLwdSq','AdminController','activateUser','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','getPaymentTimerInfo','now','/logs/stats','status','getStatistics','updatePayment','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20'];a19_0xa399=function(){return _0x5984ca;};return a19_0xa399();}var __createBinding=this&&this['__createBinding']||(Object['create']?function(_0x4542bf,_0x14173b,_0x384cf4,_0x5283a5){const _0x4b9f3d=a19_0x93d6;if(_0x5283a5===undefined)_0x5283a5=_0x384cf4;var _0x54b57d=Object['getOwnPropertyDescriptor'](_0x14173b,_0x384cf4);(!_0x54b57d||(_0x4b9f3d(0xa5)in _0x54b57d?!_0x14173b[_0x4b9f3d(0xf4)]:_0x54b57d[_0x4b9f3d(0x93)]||_0x54b57d[_0x4b9f3d(0xe5)]))&&(_0x54b57d={'enumerable':!![],'get':function(){return _0x14173b[_0x384cf4];}}),Object[_0x4b9f3d(0xb8)](_0x4542bf,_0x5283a5,_0x54b57d);}:function(_0x4d0b76,_0x4cea32,_0x2edcdf,_0x283b5c){if(_0x283b5c===undefined)_0x283b5c=_0x2edcdf;_0x4d0b76[_0x283b5c]=_0x4cea32[_0x2edcdf];}),__setModuleDefault=this&&this[a19_0x4124a8(0xb3)]||(Object[a19_0x4124a8(0xdc)]?function(_0x111497,_0x10584d){const _0x338ae4=a19_0x4124a8;Object[_0x338ae4(0xb8)](_0x111497,_0x338ae4(0xca),{'enumerable':!![],'value':_0x10584d});}:function(_0x3b754a,_0x59c74a){const _0x4868c9=a19_0x4124a8;_0x3b754a[_0x4868c9(0xca)]=_0x59c74a;}),__importStar=this&&this[a19_0x4124a8(0xd6)]||(function(){var _0x3bf689=function(_0x239d32){const _0x4fbf9b=a19_0x93d6;return _0x3bf689=Object[_0x4fbf9b(0x9f)]||function(_0x1de5e5){const _0x252801=_0x4fbf9b;var _0xe92ec3=[];for(var _0x93f145 in _0x1de5e5)if(Object['prototype']['hasOwnProperty']['call'](_0x1de5e5,_0x93f145))_0xe92ec3[_0xe92ec3[_0x252801(0xc0)]]=_0x93f145;return _0xe92ec3;},_0x3bf689(_0x239d32);};return function(_0x450e45){const _0x376397=a19_0x93d6;if(_0x450e45&&_0x450e45[_0x376397(0xf4)])return _0x450e45;var _0x138790={};if(_0x450e45!=null){for(var _0x7b1785=_0x3bf689(_0x450e45),_0x195c66=0x0;_0x195c66<_0x7b1785[_0x376397(0xc0)];_0x195c66++)if(_0x7b1785[_0x195c66]!==_0x376397(0xca))__createBinding(_0x138790,_0x450e45,_0x7b1785[_0x195c66]);}return __setModuleDefault(_0x138790,_0x450e45),_0x138790;};}());Object[a19_0x4124a8(0xb8)](exports,a19_0x4124a8(0xf4),{'value':!![]});const express_1=require(a19_0x4124a8(0xf8)),adminController_1=require('../controllers/adminController'),validation_1=require('../middleware/validation'),auth_1=require('../middleware/auth'),loggerService_1=require(a19_0x4124a8(0xa7)),coinToPayStatusService_1=require('../services/coinToPayStatusService'),domainMonitoringService_1=require('../services/domainMonitoringService'),router=(0x0,express_1['Router'])(),adminController=new adminController_1[(a19_0x4124a8(0xe8))]();router[a19_0x4124a8(0xb4)](auth_1[a19_0x4124a8(0x90)],auth_1[a19_0x4124a8(0x9e)]),router['get'](a19_0x4124a8(0xac),adminController[a19_0x4124a8(0xfd)]),router[a19_0x4124a8(0xa5)](a19_0x4124a8(0xd0),adminController[a19_0x4124a8(0xef)]),router[a19_0x4124a8(0xa5)](a19_0x4124a8(0xf2),adminController['getMerchantStatistics']),router[a19_0x4124a8(0xa5)](a19_0x4124a8(0xd8),adminController[a19_0x4124a8(0xd4)]),router[a19_0x4124a8(0xa5)](a19_0x4124a8(0xbf),adminController[a19_0x4124a8(0x8d)]),router[a19_0x4124a8(0xa5)](a19_0x4124a8(0xc9),adminController[a19_0x4124a8(0x98)]),router[a19_0x4124a8(0xa6)](a19_0x4124a8(0xb0),(0x0,validation_1[a19_0x4124a8(0xf7)])(validation_1[a19_0x4124a8(0xa2)]),adminController['createPayout']),router[a19_0x4124a8(0xa5)](a19_0x4124a8(0xc5),adminController[a19_0x4124a8(0x8b)]),router[a19_0x4124a8(0xa5)](a19_0x4124a8(0xad),adminController[a19_0x4124a8(0xe2)]),router['delete'](a19_0x4124a8(0xad),adminController[a19_0x4124a8(0xe6)]),router[a19_0x4124a8(0xa5)](a19_0x4124a8(0xda),adminController[a19_0x4124a8(0x91)]),router[a19_0x4124a8(0xa5)](a19_0x4124a8(0xe3),adminController[a19_0x4124a8(0xbd)]),router['put'](a19_0x4124a8(0xe3),adminController[a19_0x4124a8(0xf0)]),router[a19_0x4124a8(0xc1)]('/payments/:id/customer',(0x0,validation_1[a19_0x4124a8(0xf7)])(validation_1[a19_0x4124a8(0x92)]),adminController[a19_0x4124a8(0xa0)]),router[a19_0x4124a8(0xa5)](a19_0x4124a8(0xf3),adminController['getUsers']),router['get'](a19_0x4124a8(0xdf),adminController[a19_0x4124a8(0xd5)]),router[a19_0x4124a8(0xa6)]('/users',(0x0,validation_1[a19_0x4124a8(0xf7)])(validation_1[a19_0x4124a8(0xc6)]),adminController['createUser']),router[a19_0x4124a8(0xc1)]('/users/:id',(0x0,validation_1[a19_0x4124a8(0xf7)])(validation_1[a19_0x4124a8(0xa8)]),adminController['updateUser']),router[a19_0x4124a8(0x89)](a19_0x4124a8(0xdf),adminController[a19_0x4124a8(0xbe)]),router[a19_0x4124a8(0xa6)]('/users/:id/suspend',adminController['suspendUser']),router[a19_0x4124a8(0xa6)]('/users/:id/activate',adminController[a19_0x4124a8(0xe9)]),router[a19_0x4124a8(0xa5)](a19_0x4124a8(0xed),(_0x3b6114,_0x3adeec)=>{const _0x20c3f4=a19_0x4124a8;try{const _0x5c9b12=loggerService_1[_0x20c3f4(0xa3)][_0x20c3f4(0xfb)]();_0x3adeec['json']({'success':!![],'result':_0x5c9b12});}catch(_0x3c3e03){_0x3adeec['status'](0x1f4)[_0x20c3f4(0xc3)]({'success':![],'message':'Failed\x20to\x20get\x20log\x20statistics'});}}),router[a19_0x4124a8(0xa6)](a19_0x4124a8(0xab),(_0x1f551a,_0x2b8173)=>{const _0x4343c6=a19_0x4124a8;try{const {daysToKeep:daysToKeep=0x1e}=_0x1f551a[_0x4343c6(0xb7)];loggerService_1['loggerService'][_0x4343c6(0xb6)](daysToKeep),_0x2b8173[_0x4343c6(0xc3)]({'success':!![],'message':_0x4343c6(0xcb)+daysToKeep+_0x4343c6(0xd7)});}catch(_0x112d97){_0x2b8173[_0x4343c6(0xee)](0x1f4)[_0x4343c6(0xc3)]({'success':![],'message':'Failed\x20to\x20clean\x20old\x20logs'});}}),router[a19_0x4124a8(0xa6)](a19_0x4124a8(0xae),async(_0x422f91,_0x5a8caf)=>{const _0x2ef21b=a19_0x4124a8;try{const {paymentId:_0x37a346}=_0x422f91[_0x2ef21b(0x8c)];console[_0x2ef21b(0x97)](_0x2ef21b(0xcf)+_0x37a346),await coinToPayStatusService_1[_0x2ef21b(0xa4)][_0x2ef21b(0xa9)](_0x37a346),_0x5a8caf['json']({'success':!![],'message':'CoinToPay\x20payment\x20status\x20checked\x20successfully'});}catch(_0x18b76a){console['error'](_0x2ef21b(0xf1)+_0x422f91[_0x2ef21b(0x8c)][_0x2ef21b(0xaa)]+':',_0x18b76a),_0x5a8caf[_0x2ef21b(0xee)](0x1f4)[_0x2ef21b(0xc3)]({'success':![],'message':_0x18b76a instanceof Error?_0x18b76a['message']:_0x2ef21b(0x8f)});}}),router[a19_0x4124a8(0xa5)]('/cointopay/stats',(_0x1b40ed,_0xec8530)=>{const _0x321de8=a19_0x4124a8;try{const _0x2a089a=coinToPayStatusService_1[_0x321de8(0xa4)]['getServiceStats']();_0xec8530[_0x321de8(0xc3)]({'success':!![],'result':{..._0x2a089a,'description':_0x321de8(0xc2),'statusMapping':{'Paid':_0x321de8(0xf9),'Awaiting\x20Fiat':_0x321de8(0x8e),'waiting':_0x321de8(0x8e),'expired':'EXPIRED','failed':_0x321de8(0x99)},'autoExpiryNote':_0x321de8(0xfe)+_0x2a089a[_0x321de8(0x94)]+_0x321de8(0xd9),'individualTimersNote':_0x321de8(0xd1)}});}catch(_0x2ef7ea){_0xec8530[_0x321de8(0xee)](0x1f4)['json']({'success':![],'message':_0x321de8(0xea)});}}),router['get']('/cointopay/payment/:paymentId',async(_0x116d0b,_0x1982b9)=>{const _0x392808=a19_0x4124a8;try{const {paymentId:_0x5572df}=_0x116d0b['params'],_0x3755d8=coinToPayStatusService_1[_0x392808(0xa4)][_0x392808(0xeb)](_0x5572df),_0x2f8d85=(await Promise[_0x392808(0xba)]()[_0x392808(0xe1)](()=>__importStar(require(_0x392808(0xe0)))))[_0x392808(0xca)],_0x4e7490=await _0x2f8d85[_0x392808(0xe4)][_0x392808(0xdb)]({'where':{'id':_0x5572df},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x4e7490)return _0x1982b9['status'](0x194)[_0x392808(0xc3)]({'success':![],'message':'Payment\x20not\x20found'});_0x1982b9[_0x392808(0xc3)]({'success':!![],'result':{'payment':{'id':_0x4e7490['id'],'gateway':_0x4e7490['gateway'],'gatewayPaymentId':_0x4e7490['gatewayPaymentId'],'status':_0x4e7490[_0x392808(0xee)],'amount':_0x4e7490[_0x392808(0xcc)],'currency':_0x4e7490[_0x392808(0xbc)],'createdAt':_0x4e7490[_0x392808(0xd2)],'updatedAt':_0x4e7490['updatedAt'],'shop':_0x4e7490[_0x392808(0xfc)]},'timers':_0x3755d8,'isCoinToPay':_0x4e7490[_0x392808(0xbb)]===_0x392808(0xf6),'ageInMinutes':Math[_0x392808(0x9a)]((Date[_0x392808(0xec)]()-_0x4e7490[_0x392808(0xd2)][_0x392808(0xb5)]())/(0x3e8*0x3c))}});}catch(_0x51eff6){_0x1982b9[_0x392808(0xee)](0x1f4)['json']({'success':![],'message':_0x51eff6 instanceof Error?_0x51eff6[_0x392808(0xb2)]:_0x392808(0xb9)});}}),router[a19_0x4124a8(0xa5)](a19_0x4124a8(0xde),(_0x340a95,_0x338622)=>{const _0xd6048b=a19_0x4124a8;try{const _0xe8e863=domainMonitoringService_1[_0xd6048b(0xc8)]['getMonitoringStats']();_0x338622[_0xd6048b(0xc3)]({'success':!![],'result':{..._0xe8e863,'description':'Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','behavior':'Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','encoding':_0xd6048b(0xf5)}});}catch(_0x1d9e76){_0x338622[_0xd6048b(0xee)](0x1f4)[_0xd6048b(0xc3)]({'success':![],'message':_0xd6048b(0xb1)});}}),router['post'](a19_0x4124a8(0xce),async(_0x49bff7,_0x46fba6)=>{const _0x16def3=a19_0x4124a8;try{const _0x11f0f0=await domainMonitoringService_1['domainMonitoringService'][_0x16def3(0x9c)]();_0x46fba6[_0x16def3(0xc3)]({'success':!![],'result':{'domainAvailable':_0x11f0f0,'message':_0x11f0f0?'Domain\x20is\x20responding\x20correctly':_0x16def3(0x9b),'timestamp':new Date()[_0x16def3(0xfa)]()}});}catch(_0x1d3026){_0x46fba6[_0x16def3(0xee)](0x1f4)['json']({'success':![],'message':_0x1d3026 instanceof Error?_0x1d3026[_0x16def3(0xb2)]:_0x16def3(0xdd)});}}),exports[a19_0x4124a8(0xca)]=router;