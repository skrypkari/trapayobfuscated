'use strict';function a25_0x688c(_0x2c217f,_0x3cb48b){_0x2c217f=_0x2c217f-0xa7;const _0x37d2a1=a25_0x37d2();let _0x688ca2=_0x37d2a1[_0x2c217f];return _0x688ca2;}const a25_0x4c1dcc=a25_0x688c;(function(_0x310b9e,_0x28885f){const _0x17ef4e=a25_0x688c,_0x245067=_0x310b9e();while(!![]){try{const _0x2b7304=parseInt(_0x17ef4e(0xea))/0x1+-parseInt(_0x17ef4e(0xd1))/0x2*(parseInt(_0x17ef4e(0xda))/0x3)+-parseInt(_0x17ef4e(0xf5))/0x4+-parseInt(_0x17ef4e(0xd2))/0x5*(parseInt(_0x17ef4e(0x131))/0x6)+-parseInt(_0x17ef4e(0x10a))/0x7*(parseInt(_0x17ef4e(0xdf))/0x8)+parseInt(_0x17ef4e(0xcd))/0x9*(-parseInt(_0x17ef4e(0xfa))/0xa)+parseInt(_0x17ef4e(0x11d))/0xb;if(_0x2b7304===_0x28885f)break;else _0x245067['push'](_0x245067['shift']());}catch(_0x437f1a){_0x245067['push'](_0x245067['shift']());}}}(a25_0x37d2,0x96c9d));function a25_0x37d2(){const _0x5c5ff4=['getPaymentById','4185796FWWtDQ','cleanupStalePendingPayments','CoinToPay\x20payment\x20status\x20checked\x20successfully','PAID','__esModule','709910fVjZbP','length','params','/payments/cleanup-with-report','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','/users','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','deleteUser','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','now','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','/merchants/selection','Failed\x20to\x20perform\x20manual\x20domain\x20check','/payments/processing-stats','disable2FA','delete','49TCAWJJ','Failed\x20to\x20get\x20log\x20statistics','gateway','gatewayPaymentId','getMerchantsSelection','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','/payout/merchants','activateUser','createUserSchema','updatePayment','status','../middleware/validation','Failed\x20to\x20get\x20payment\x20information','getServiceStats','CoinToPay\x20automatic\x20status\x20checking\x20service','getShopWallets','defineProperty','/users/:id/activate','cleanupStalePayments','50288964KahFTa','prototype','Domain\x20check\x20failed','put','__importStar','Payment\x20not\x20found','/users/:id/suspend','getMerchantStatistics','expiryDays','__setModuleDefault','floor','call','getPayoutById','message','getMerchantsAwaitingPayout','FAILED','createPayout','getUserById','configurable','/payouts/:id','96XAsrnP','domainMonitoringService','getUsers','../services/domainMonitoringService','checkPaymentById','createPayoutSchema','paymentId','/domain-monitoring/check','updateCustomerDataSchema','use','loggerService','manualCheck','body','requireAdmin','/payment-links/expire','log','json','/statistics','\x20days)','toISOString','get','../services/loggerService','EXPIRED','express','validate','/domain-monitoring/stats','/shops/:shopId/2fa/enable','default','/merchant-statistics','amount','getLogStats','/users/:id','Failed\x20to\x20clean\x20old\x20logs','/auth','__createBinding','create','resolve','writable','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','updateUser','/logs/stats','90DbqhBT','cointopay','error','payment','2588EYDdIT','297020xnYLBt','post','../controllers/adminController','coinToPayStatusService','createdAt','currency','updatedAt','setup2FA','1893eSWtYt','Payments\x20automatically\x20expire\x20after\x20','AdminController','Router','PENDING','1050568jtQOYg','../services/coinToPayStatusService','updateCustomerData','cleanOldLogs','../middleware/auth','/logs/clean','getPaymentTimerInfo','deletePayout','getOwnPropertyDescriptor','/payout','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','488489GTMuGC','/payments/:id/customer','/payouts','/payout/stats','authenticateToken','/payments/cleanup','/shops/:shopId/2fa/disable','shop','/payments/:id','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status'];a25_0x37d2=function(){return _0x5c5ff4;};return a25_0x37d2();}var __createBinding=this&&this[a25_0x4c1dcc(0xc6)]||(Object[a25_0x4c1dcc(0xc7)]?function(_0x3c4db4,_0x2ccbe2,_0x3dc98d,_0x200fbf){const _0xcc6228=a25_0x4c1dcc;if(_0x200fbf===undefined)_0x200fbf=_0x3dc98d;var _0xa1978d=Object[_0xcc6228(0xe7)](_0x2ccbe2,_0x3dc98d);(!_0xa1978d||(_0xcc6228(0xb8)in _0xa1978d?!_0x2ccbe2[_0xcc6228(0xf9)]:_0xa1978d[_0xcc6228(0xc9)]||_0xa1978d[_0xcc6228(0x12f)]))&&(_0xa1978d={'enumerable':!![],'get':function(){return _0x2ccbe2[_0x3dc98d];}}),Object[_0xcc6228(0x11a)](_0x3c4db4,_0x200fbf,_0xa1978d);}:function(_0x5fd137,_0x540e64,_0x2c48cc,_0x2871ca){if(_0x2871ca===undefined)_0x2871ca=_0x2c48cc;_0x5fd137[_0x2871ca]=_0x540e64[_0x2c48cc];}),__setModuleDefault=this&&this[a25_0x4c1dcc(0x126)]||(Object[a25_0x4c1dcc(0xc7)]?function(_0x339124,_0x8b9946){const _0x365e2c=a25_0x4c1dcc;Object[_0x365e2c(0x11a)](_0x339124,'default',{'enumerable':!![],'value':_0x8b9946});}:function(_0x3d56c6,_0x555cc2){const _0x7d3db4=a25_0x4c1dcc;_0x3d56c6[_0x7d3db4(0xbf)]=_0x555cc2;}),__importStar=this&&this[a25_0x4c1dcc(0x121)]||(function(){var _0x489680=function(_0x512b5a){return _0x489680=Object['getOwnPropertyNames']||function(_0x59941d){const _0x362662=a25_0x688c;var _0x107d8e=[];for(var _0x1522b7 in _0x59941d)if(Object[_0x362662(0x11e)]['hasOwnProperty'][_0x362662(0x128)](_0x59941d,_0x1522b7))_0x107d8e[_0x107d8e[_0x362662(0xfb)]]=_0x1522b7;return _0x107d8e;},_0x489680(_0x512b5a);};return function(_0x1c2651){const _0x3fa5fd=a25_0x688c;if(_0x1c2651&&_0x1c2651[_0x3fa5fd(0xf9)])return _0x1c2651;var _0x2d0dcc={};if(_0x1c2651!=null){for(var _0x1fe8a6=_0x489680(_0x1c2651),_0x2c922b=0x0;_0x2c922b<_0x1fe8a6[_0x3fa5fd(0xfb)];_0x2c922b++)if(_0x1fe8a6[_0x2c922b]!==_0x3fa5fd(0xbf))__createBinding(_0x2d0dcc,_0x1c2651,_0x1fe8a6[_0x2c922b]);}return __setModuleDefault(_0x2d0dcc,_0x1c2651),_0x2d0dcc;};}());Object['defineProperty'](exports,a25_0x4c1dcc(0xf9),{'value':!![]});const express_1=require(a25_0x4c1dcc(0xbb)),adminController_1=require(a25_0x4c1dcc(0xd4)),validation_1=require(a25_0x4c1dcc(0x115)),auth_1=require(a25_0x4c1dcc(0xe3)),loggerService_1=require(a25_0x4c1dcc(0xb9)),coinToPayStatusService_1=require(a25_0x4c1dcc(0xe0)),domainMonitoringService_1=require(a25_0x4c1dcc(0xa7)),router=(0x0,express_1[a25_0x4c1dcc(0xdd)])(),adminController=new adminController_1[(a25_0x4c1dcc(0xdc))]();router[a25_0x4c1dcc(0xad)](auth_1[a25_0x4c1dcc(0xee)],auth_1[a25_0x4c1dcc(0xb1)]),router[a25_0x4c1dcc(0xb8)](a25_0x4c1dcc(0xc5),adminController['checkAuth']),router['get'](a25_0x4c1dcc(0xb5),adminController['getStatistics']),router['get'](a25_0x4c1dcc(0xc0),adminController[a25_0x4c1dcc(0x124)]),router[a25_0x4c1dcc(0xb8)](a25_0x4c1dcc(0xed),adminController['getPayoutStats']),router['get'](a25_0x4c1dcc(0x110),adminController[a25_0x4c1dcc(0x12b)]),router['get'](a25_0x4c1dcc(0x105),adminController[a25_0x4c1dcc(0x10e)]),router['post'](a25_0x4c1dcc(0xe8),(0x0,validation_1[a25_0x4c1dcc(0xbc)])(validation_1[a25_0x4c1dcc(0xa9)]),adminController[a25_0x4c1dcc(0x12d)]),router[a25_0x4c1dcc(0x120)]('/payout/:id',(0x0,validation_1['validate'])(validation_1['updatePayoutSchema']),adminController['updatePayout']),router[a25_0x4c1dcc(0xb8)](a25_0x4c1dcc(0xec),adminController['getPayouts']),router[a25_0x4c1dcc(0xb8)]('/payouts/:id',adminController[a25_0x4c1dcc(0x129)]),router[a25_0x4c1dcc(0x109)](a25_0x4c1dcc(0x130),adminController[a25_0x4c1dcc(0xe6)]),router[a25_0x4c1dcc(0xb8)]('/payments',adminController['getPayments']),router[a25_0x4c1dcc(0xb8)](a25_0x4c1dcc(0xf2),adminController[a25_0x4c1dcc(0xf4)]),router[a25_0x4c1dcc(0x120)](a25_0x4c1dcc(0xf2),adminController[a25_0x4c1dcc(0x113)]),router[a25_0x4c1dcc(0x120)](a25_0x4c1dcc(0xeb),(0x0,validation_1[a25_0x4c1dcc(0xbc)])(validation_1[a25_0x4c1dcc(0xac)]),adminController[a25_0x4c1dcc(0xe1)]),router[a25_0x4c1dcc(0xb8)](a25_0x4c1dcc(0x107),adminController['getProcessingPaymentsStats']),router[a25_0x4c1dcc(0xd3)](a25_0x4c1dcc(0xef),adminController[a25_0x4c1dcc(0x11c)]),router[a25_0x4c1dcc(0xd3)]('/payments/cleanup-pending',adminController[a25_0x4c1dcc(0xf6)]),router[a25_0x4c1dcc(0xd3)](a25_0x4c1dcc(0xfd),adminController['cleanupStalePaymentsWithReport']),router[a25_0x4c1dcc(0xd3)](a25_0x4c1dcc(0xb2),adminController['expirePaymentLinks']),router['get'](a25_0x4c1dcc(0xff),adminController[a25_0x4c1dcc(0x133)]),router[a25_0x4c1dcc(0xb8)]('/users/:id',adminController[a25_0x4c1dcc(0x12e)]),router['post'](a25_0x4c1dcc(0xff),(0x0,validation_1[a25_0x4c1dcc(0xbc)])(validation_1[a25_0x4c1dcc(0x112)]),adminController['createUser']),router[a25_0x4c1dcc(0x120)](a25_0x4c1dcc(0xc3),(0x0,validation_1[a25_0x4c1dcc(0xbc)])(validation_1['updateUserSchema']),adminController[a25_0x4c1dcc(0xcb)]),router['delete']('/users/:id',adminController[a25_0x4c1dcc(0x101)]),router[a25_0x4c1dcc(0xb8)]('/shops/:shopId/wallets',adminController[a25_0x4c1dcc(0x119)]),router[a25_0x4c1dcc(0xd3)]('/shops/:shopId/2fa/setup',adminController[a25_0x4c1dcc(0xd9)]),router[a25_0x4c1dcc(0xd3)](a25_0x4c1dcc(0xbe),adminController['enable2FA']),router['post'](a25_0x4c1dcc(0xf0),adminController[a25_0x4c1dcc(0x108)]),router['post'](a25_0x4c1dcc(0x123),adminController['suspendUser']),router[a25_0x4c1dcc(0xd3)](a25_0x4c1dcc(0x11b),adminController[a25_0x4c1dcc(0x111)]),router['get'](a25_0x4c1dcc(0xcc),(_0x5b99db,_0x4fd49a)=>{const _0x14b4f7=a25_0x4c1dcc;try{const _0x105911=loggerService_1[_0x14b4f7(0xae)][_0x14b4f7(0xc2)]();_0x4fd49a[_0x14b4f7(0xb4)]({'success':!![],'result':_0x105911});}catch(_0x33cf5d){_0x4fd49a[_0x14b4f7(0x114)](0x1f4)['json']({'success':![],'message':_0x14b4f7(0x10b)});}}),router[a25_0x4c1dcc(0xd3)](a25_0x4c1dcc(0xe4),(_0x1855e8,_0x505685)=>{const _0x5cceba=a25_0x4c1dcc;try{const {daysToKeep:daysToKeep=0x1e}=_0x1855e8[_0x5cceba(0xb0)];loggerService_1[_0x5cceba(0xae)][_0x5cceba(0xe2)](daysToKeep),_0x505685[_0x5cceba(0xb4)]({'success':!![],'message':'Old\x20logs\x20cleaned\x20(kept\x20last\x20'+daysToKeep+_0x5cceba(0xb6)});}catch(_0x1a4098){_0x505685[_0x5cceba(0x114)](0x1f4)[_0x5cceba(0xb4)]({'success':![],'message':_0x5cceba(0xc4)});}}),router[a25_0x4c1dcc(0xd3)]('/cointopay/check/:paymentId',async(_0x159054,_0x46b03e)=>{const _0x2af7be=a25_0x4c1dcc;try{const {paymentId:_0xb27ca2}=_0x159054[_0x2af7be(0xfc)];console[_0x2af7be(0xb3)]('üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20'+_0xb27ca2),await coinToPayStatusService_1[_0x2af7be(0xd5)][_0x2af7be(0xa8)](_0xb27ca2),_0x46b03e[_0x2af7be(0xb4)]({'success':!![],'message':_0x2af7be(0xf7)});}catch(_0x2f8d45){console[_0x2af7be(0xcf)](_0x2af7be(0xe9)+_0x159054[_0x2af7be(0xfc)][_0x2af7be(0xaa)]+':',_0x2f8d45),_0x46b03e[_0x2af7be(0x114)](0x1f4)[_0x2af7be(0xb4)]({'success':![],'message':_0x2f8d45 instanceof Error?_0x2f8d45[_0x2af7be(0x12a)]:_0x2af7be(0xf3)});}}),router['get']('/cointopay/stats',(_0x585a0d,_0x534918)=>{const _0x15ec83=a25_0x4c1dcc;try{const _0xdaa174=coinToPayStatusService_1[_0x15ec83(0xd5)][_0x15ec83(0x117)]();_0x534918['json']({'success':!![],'result':{..._0xdaa174,'description':_0x15ec83(0x118),'statusMapping':{'Paid':_0x15ec83(0xf8),'Awaiting\x20Fiat':_0x15ec83(0xde),'waiting':_0x15ec83(0xde),'expired':_0x15ec83(0xba),'failed':_0x15ec83(0x12c)},'autoExpiryNote':_0x15ec83(0xdb)+_0xdaa174[_0x15ec83(0x125)]+'\x20days\x20if\x20not\x20paid','individualTimersNote':_0x15ec83(0x10f)}});}catch(_0x5f2503){_0x534918['status'](0x1f4)[_0x15ec83(0xb4)]({'success':![],'message':_0x15ec83(0xfe)});}}),router[a25_0x4c1dcc(0xb8)]('/cointopay/payment/:paymentId',async(_0x19b929,_0x444829)=>{const _0x52b5b0=a25_0x4c1dcc;try{const {paymentId:_0x5e1359}=_0x19b929[_0x52b5b0(0xfc)],_0x50712f=coinToPayStatusService_1['coinToPayStatusService'][_0x52b5b0(0xe5)](_0x5e1359),_0x2373bb=(await Promise[_0x52b5b0(0xc8)]()['then'](()=>__importStar(require('../config/database'))))[_0x52b5b0(0xbf)],_0x5216f5=await _0x2373bb[_0x52b5b0(0xd0)]['findUnique']({'where':{'id':_0x5e1359},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x5216f5)return _0x444829[_0x52b5b0(0x114)](0x194)['json']({'success':![],'message':_0x52b5b0(0x122)});_0x444829[_0x52b5b0(0xb4)]({'success':!![],'result':{'payment':{'id':_0x5216f5['id'],'gateway':_0x5216f5[_0x52b5b0(0x10c)],'gatewayPaymentId':_0x5216f5[_0x52b5b0(0x10d)],'status':_0x5216f5[_0x52b5b0(0x114)],'amount':_0x5216f5[_0x52b5b0(0xc1)],'currency':_0x5216f5[_0x52b5b0(0xd7)],'createdAt':_0x5216f5[_0x52b5b0(0xd6)],'updatedAt':_0x5216f5[_0x52b5b0(0xd8)],'shop':_0x5216f5[_0x52b5b0(0xf1)]},'timers':_0x50712f,'isCoinToPay':_0x5216f5[_0x52b5b0(0x10c)]===_0x52b5b0(0xce),'ageInMinutes':Math[_0x52b5b0(0x127)]((Date[_0x52b5b0(0x103)]()-_0x5216f5['createdAt']['getTime']())/(0x3e8*0x3c))}});}catch(_0x314d64){_0x444829[_0x52b5b0(0x114)](0x1f4)['json']({'success':![],'message':_0x314d64 instanceof Error?_0x314d64[_0x52b5b0(0x12a)]:_0x52b5b0(0x116)});}}),router['get'](a25_0x4c1dcc(0xbd),(_0x2b5c62,_0x53dc1c)=>{const _0x25dc73=a25_0x4c1dcc;try{const _0x41572a=domainMonitoringService_1[_0x25dc73(0x132)]['getMonitoringStats']();_0x53dc1c[_0x25dc73(0xb4)]({'success':!![],'result':{..._0x41572a,'description':_0x25dc73(0x104),'behavior':_0x25dc73(0x100),'encoding':_0x25dc73(0x102)}});}catch(_0x237bd6){_0x53dc1c[_0x25dc73(0x114)](0x1f4)['json']({'success':![],'message':_0x25dc73(0xca)});}}),router['post'](a25_0x4c1dcc(0xab),async(_0x18895b,_0x4a45a9)=>{const _0x4f4f6e=a25_0x4c1dcc;try{const _0x4686c0=await domainMonitoringService_1['domainMonitoringService'][_0x4f4f6e(0xaf)]();_0x4a45a9[_0x4f4f6e(0xb4)]({'success':!![],'result':{'domainAvailable':_0x4686c0,'message':_0x4686c0?'Domain\x20is\x20responding\x20correctly':_0x4f4f6e(0x11f),'timestamp':new Date()[_0x4f4f6e(0xb7)]()}});}catch(_0xa79da3){_0x4a45a9[_0x4f4f6e(0x114)](0x1f4)['json']({'success':![],'message':_0xa79da3 instanceof Error?_0xa79da3[_0x4f4f6e(0x12a)]:_0x4f4f6e(0x106)});}}),exports[a25_0x4c1dcc(0xbf)]=router;