'use strict';const a18_0x4c9c09=a18_0x5b42;function a18_0x12bc(){const _0xdeed30=['post','getPayments','floor','createUser','updateCustomerData','updateUser','gateway','put','9549fDZWuD','writable','2770645yowKTw','Failed\x20to\x20get\x20log\x20statistics','updatePayment','/logs/stats','get','getOwnPropertyDescriptor','updatedAt','CoinToPay\x20automatic\x20status\x20checking\x20service','Failed\x20to\x20perform\x20manual\x20domain\x20check','currency','/users','788850ZquhJn','/merchant-statistics','__createBinding','/payouts/:id','FAILED','getTime','call','\x20days\x20if\x20not\x20paid','CoinToPay\x20payment\x20status\x20checked\x20successfully','509067lcYLNc','Failed\x20to\x20clean\x20old\x20logs','updateCustomerDataSchema','../services/loggerService','amount','configurable','manualCheck','632vMwiTV','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','message','/cointopay/stats','/domain-monitoring/stats','1698431PzlRhn','EXPIRED','cleanOldLogs','domainMonitoringService','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','now','use','/payout/merchants','cointopay','Payment\x20not\x20found','json','paymentId','validate','../middleware/validation','getMerchantStatistics','/users/:id','toISOString','getPaymentTimerInfo','6ZCdWFf','PENDING','AdminController','createPayoutSchema','getPayouts','/payments/:id/customer','defineProperty','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','/payments','/payout/stats','2441836GeBlTr','deletePayout','error','/users/:id/activate','createPayout','Domain\x20is\x20responding\x20correctly','suspendUser','getPayoutStats','getStatistics','createUserSchema','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','2mERNJJ','default','express','/cointopay/check/:paymentId','/statistics','length','create','coinToPayStatusService','Router','createdAt','../middleware/auth','../controllers/adminController','getServiceStats','/logs/clean','/cointopay/payment/:paymentId','../config/database','getUserById','getPayoutById','Old\x20logs\x20cleaned\x20(kept\x20last\x20','status','expiryDays','/payments/:id','PAID','Failed\x20to\x20get\x20payment\x20information','checkPaymentById','delete','hasOwnProperty','loggerService','/users/:id/suspend','params','__esModule','__importStar','Payments\x20automatically\x20expire\x20after\x20','body','updateUserSchema','requireAdmin','deleteUser','9238030ZLGnYn','Domain\x20check\x20failed','getLogStats','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status'];a18_0x12bc=function(){return _0xdeed30;};return a18_0x12bc();}(function(_0x488f7d,_0x4c4225){const _0x25e8e7=a18_0x5b42,_0x4c2a74=_0x488f7d();while(!![]){try{const _0x56a24a=-parseInt(_0x25e8e7(0x1a0))/0x1+parseInt(_0x25e8e7(0x1dc))/0x2*(parseInt(_0x25e8e7(0x1a9))/0x3)+-parseInt(_0x25e8e7(0x1d1))/0x4+parseInt(_0x25e8e7(0x195))/0x5+-parseInt(_0x25e8e7(0x1c7))/0x6*(-parseInt(_0x25e8e7(0x1b5))/0x7)+-parseInt(_0x25e8e7(0x1b0))/0x8*(parseInt(_0x25e8e7(0x20d))/0x9)+parseInt(_0x25e8e7(0x201))/0xa;if(_0x56a24a===_0x4c4225)break;else _0x4c2a74['push'](_0x4c2a74['shift']());}catch(_0x31ad6c){_0x4c2a74['push'](_0x4c2a74['shift']());}}}(a18_0x12bc,0x63656));function a18_0x5b42(_0x44f294,_0x48a108){const _0x12bcc9=a18_0x12bc();return a18_0x5b42=function(_0x5b4256,_0x1df2c3){_0x5b4256=_0x5b4256-0x194;let _0x415799=_0x12bcc9[_0x5b4256];return _0x415799;},a18_0x5b42(_0x44f294,_0x48a108);}var __createBinding=this&&this[a18_0x4c9c09(0x1a2)]||(Object['create']?function(_0x3b2061,_0x349176,_0x20eb01,_0x4b4115){const _0x4e4760=a18_0x4c9c09;if(_0x4b4115===undefined)_0x4b4115=_0x20eb01;var _0x5e208f=Object[_0x4e4760(0x19a)](_0x349176,_0x20eb01);(!_0x5e208f||('get'in _0x5e208f?!_0x349176[_0x4e4760(0x1fa)]:_0x5e208f[_0x4e4760(0x194)]||_0x5e208f[_0x4e4760(0x1ae)]))&&(_0x5e208f={'enumerable':!![],'get':function(){return _0x349176[_0x20eb01];}}),Object[_0x4e4760(0x1cd)](_0x3b2061,_0x4b4115,_0x5e208f);}:function(_0x4da6b8,_0x1accce,_0x56d0ab,_0x593cc9){if(_0x593cc9===undefined)_0x593cc9=_0x56d0ab;_0x4da6b8[_0x593cc9]=_0x1accce[_0x56d0ab];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a18_0x4c9c09(0x1e2)]?function(_0x2e0114,_0x53e457){const _0x9342ba=a18_0x4c9c09;Object['defineProperty'](_0x2e0114,_0x9342ba(0x1dd),{'enumerable':!![],'value':_0x53e457});}:function(_0x4a9cc4,_0xbe17d9){_0x4a9cc4['default']=_0xbe17d9;}),__importStar=this&&this[a18_0x4c9c09(0x1fb)]||(function(){var _0x495c0f=function(_0x135abb){return _0x495c0f=Object['getOwnPropertyNames']||function(_0x8abfb8){const _0x21e88b=a18_0x5b42;var _0x181cd7=[];for(var _0x3889a7 in _0x8abfb8)if(Object['prototype'][_0x21e88b(0x1f6)][_0x21e88b(0x1a6)](_0x8abfb8,_0x3889a7))_0x181cd7[_0x181cd7['length']]=_0x3889a7;return _0x181cd7;},_0x495c0f(_0x135abb);};return function(_0x3c14b2){const _0x62b82b=a18_0x5b42;if(_0x3c14b2&&_0x3c14b2[_0x62b82b(0x1fa)])return _0x3c14b2;var _0x45432a={};if(_0x3c14b2!=null){for(var _0x105150=_0x495c0f(_0x3c14b2),_0x4f82c0=0x0;_0x4f82c0<_0x105150[_0x62b82b(0x1e1)];_0x4f82c0++)if(_0x105150[_0x4f82c0]!==_0x62b82b(0x1dd))__createBinding(_0x45432a,_0x3c14b2,_0x105150[_0x4f82c0]);}return __setModuleDefault(_0x45432a,_0x3c14b2),_0x45432a;};}());Object[a18_0x4c9c09(0x1cd)](exports,a18_0x4c9c09(0x1fa),{'value':!![]});const express_1=require(a18_0x4c9c09(0x1de)),adminController_1=require(a18_0x4c9c09(0x1e7)),validation_1=require(a18_0x4c9c09(0x1c2)),auth_1=require(a18_0x4c9c09(0x1e6)),loggerService_1=require(a18_0x4c9c09(0x1ac)),coinToPayStatusService_1=require('../services/coinToPayStatusService'),domainMonitoringService_1=require('../services/domainMonitoringService'),router=(0x0,express_1[a18_0x4c9c09(0x1e4)])(),adminController=new adminController_1[(a18_0x4c9c09(0x1c9))]();router[a18_0x4c9c09(0x1bb)](auth_1['authenticateToken'],auth_1[a18_0x4c9c09(0x1ff)]),router[a18_0x4c9c09(0x199)]('/auth',adminController['checkAuth']),router[a18_0x4c9c09(0x199)](a18_0x4c9c09(0x1e0),adminController[a18_0x4c9c09(0x1d9)]),router[a18_0x4c9c09(0x199)](a18_0x4c9c09(0x1a1),adminController[a18_0x4c9c09(0x1c3)]),router[a18_0x4c9c09(0x199)](a18_0x4c9c09(0x1d0),adminController[a18_0x4c9c09(0x1d8)]),router['get'](a18_0x4c9c09(0x1bc),adminController['getMerchantsAwaitingPayout']),router[a18_0x4c9c09(0x205)]('/payout',(0x0,validation_1['validate'])(validation_1[a18_0x4c9c09(0x1ca)]),adminController[a18_0x4c9c09(0x1d5)]),router['get']('/payouts',adminController[a18_0x4c9c09(0x1cb)]),router['get'](a18_0x4c9c09(0x1a3),adminController[a18_0x4c9c09(0x1ed)]),router[a18_0x4c9c09(0x1f5)](a18_0x4c9c09(0x1a3),adminController[a18_0x4c9c09(0x1d2)]),router[a18_0x4c9c09(0x199)](a18_0x4c9c09(0x1cf),adminController[a18_0x4c9c09(0x206)]),router[a18_0x4c9c09(0x199)](a18_0x4c9c09(0x1f1),adminController['getPaymentById']),router[a18_0x4c9c09(0x20c)](a18_0x4c9c09(0x1f1),adminController[a18_0x4c9c09(0x197)]),router['put'](a18_0x4c9c09(0x1cc),(0x0,validation_1[a18_0x4c9c09(0x1c1)])(validation_1[a18_0x4c9c09(0x1ab)]),adminController[a18_0x4c9c09(0x209)]),router[a18_0x4c9c09(0x199)](a18_0x4c9c09(0x19f),adminController['getUsers']),router['get']('/users/:id',adminController[a18_0x4c9c09(0x1ec)]),router[a18_0x4c9c09(0x205)]('/users',(0x0,validation_1[a18_0x4c9c09(0x1c1)])(validation_1[a18_0x4c9c09(0x1da)]),adminController[a18_0x4c9c09(0x208)]),router[a18_0x4c9c09(0x20c)](a18_0x4c9c09(0x1c4),(0x0,validation_1[a18_0x4c9c09(0x1c1)])(validation_1[a18_0x4c9c09(0x1fe)]),adminController[a18_0x4c9c09(0x20a)]),router[a18_0x4c9c09(0x1f5)](a18_0x4c9c09(0x1c4),adminController[a18_0x4c9c09(0x200)]),router['post'](a18_0x4c9c09(0x1f8),adminController[a18_0x4c9c09(0x1d7)]),router[a18_0x4c9c09(0x205)](a18_0x4c9c09(0x1d4),adminController['activateUser']),router[a18_0x4c9c09(0x199)](a18_0x4c9c09(0x198),(_0x2733cc,_0x50f58c)=>{const _0x50196b=a18_0x4c9c09;try{const _0x44be9c=loggerService_1['loggerService'][_0x50196b(0x203)]();_0x50f58c['json']({'success':!![],'result':_0x44be9c});}catch(_0x4e5795){_0x50f58c['status'](0x1f4)[_0x50196b(0x1bf)]({'success':![],'message':_0x50196b(0x196)});}}),router['post'](a18_0x4c9c09(0x1e9),(_0x310e5a,_0x3c1fdd)=>{const _0x12082b=a18_0x4c9c09;try{const {daysToKeep:daysToKeep=0x1e}=_0x310e5a[_0x12082b(0x1fd)];loggerService_1[_0x12082b(0x1f7)][_0x12082b(0x1b7)](daysToKeep),_0x3c1fdd[_0x12082b(0x1bf)]({'success':!![],'message':_0x12082b(0x1ee)+daysToKeep+'\x20days)'});}catch(_0xfd30fc){_0x3c1fdd[_0x12082b(0x1ef)](0x1f4)['json']({'success':![],'message':_0x12082b(0x1aa)});}}),router[a18_0x4c9c09(0x205)](a18_0x4c9c09(0x1df),async(_0x5d7ab2,_0x3405f3)=>{const _0x2f89d9=a18_0x4c9c09;try{const {paymentId:_0x35e970}=_0x5d7ab2[_0x2f89d9(0x1f9)];console['log']('üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20'+_0x35e970),await coinToPayStatusService_1[_0x2f89d9(0x1e3)][_0x2f89d9(0x1f4)](_0x35e970),_0x3405f3[_0x2f89d9(0x1bf)]({'success':!![],'message':_0x2f89d9(0x1a8)});}catch(_0x23db2f){console[_0x2f89d9(0x1d3)](_0x2f89d9(0x1db)+_0x5d7ab2[_0x2f89d9(0x1f9)][_0x2f89d9(0x1c0)]+':',_0x23db2f),_0x3405f3[_0x2f89d9(0x1ef)](0x1f4)[_0x2f89d9(0x1bf)]({'success':![],'message':_0x23db2f instanceof Error?_0x23db2f[_0x2f89d9(0x1b2)]:_0x2f89d9(0x204)});}}),router[a18_0x4c9c09(0x199)](a18_0x4c9c09(0x1b3),(_0x33db05,_0x47712b)=>{const _0x4405dc=a18_0x4c9c09;try{const _0x423590=coinToPayStatusService_1[_0x4405dc(0x1e3)][_0x4405dc(0x1e8)]();_0x47712b[_0x4405dc(0x1bf)]({'success':!![],'result':{..._0x423590,'description':_0x4405dc(0x19c),'statusMapping':{'Paid':_0x4405dc(0x1f2),'Awaiting\x20Fiat':_0x4405dc(0x1c8),'waiting':_0x4405dc(0x1c8),'expired':_0x4405dc(0x1b6),'failed':_0x4405dc(0x1a4)},'autoExpiryNote':_0x4405dc(0x1fc)+_0x423590[_0x4405dc(0x1f0)]+_0x4405dc(0x1a7),'individualTimersNote':'Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly'}});}catch(_0x48c7cb){_0x47712b['status'](0x1f4)[_0x4405dc(0x1bf)]({'success':![],'message':'Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics'});}}),router[a18_0x4c9c09(0x199)](a18_0x4c9c09(0x1ea),async(_0x4d80f9,_0xace8ba)=>{const _0x4121c6=a18_0x4c9c09;try{const {paymentId:_0x28bf77}=_0x4d80f9[_0x4121c6(0x1f9)],_0x24305d=coinToPayStatusService_1[_0x4121c6(0x1e3)][_0x4121c6(0x1c6)](_0x28bf77),_0x2c4037=(await Promise['resolve']()['then'](()=>__importStar(require(_0x4121c6(0x1eb)))))[_0x4121c6(0x1dd)],_0x2346ac=await _0x2c4037['payment']['findUnique']({'where':{'id':_0x28bf77},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x2346ac)return _0xace8ba[_0x4121c6(0x1ef)](0x194)[_0x4121c6(0x1bf)]({'success':![],'message':_0x4121c6(0x1be)});_0xace8ba[_0x4121c6(0x1bf)]({'success':!![],'result':{'payment':{'id':_0x2346ac['id'],'gateway':_0x2346ac[_0x4121c6(0x20b)],'gatewayPaymentId':_0x2346ac['gatewayPaymentId'],'status':_0x2346ac[_0x4121c6(0x1ef)],'amount':_0x2346ac[_0x4121c6(0x1ad)],'currency':_0x2346ac[_0x4121c6(0x19e)],'createdAt':_0x2346ac[_0x4121c6(0x1e5)],'updatedAt':_0x2346ac[_0x4121c6(0x19b)],'shop':_0x2346ac['shop']},'timers':_0x24305d,'isCoinToPay':_0x2346ac[_0x4121c6(0x20b)]===_0x4121c6(0x1bd),'ageInMinutes':Math[_0x4121c6(0x207)]((Date[_0x4121c6(0x1ba)]()-_0x2346ac[_0x4121c6(0x1e5)][_0x4121c6(0x1a5)]())/(0x3e8*0x3c))}});}catch(_0x35e94c){_0xace8ba[_0x4121c6(0x1ef)](0x1f4)[_0x4121c6(0x1bf)]({'success':![],'message':_0x35e94c instanceof Error?_0x35e94c[_0x4121c6(0x1b2)]:_0x4121c6(0x1f3)});}}),router[a18_0x4c9c09(0x199)](a18_0x4c9c09(0x1b4),(_0x5782ae,_0x3f0c8b)=>{const _0x429372=a18_0x4c9c09;try{const _0x5dd3d1=domainMonitoringService_1[_0x429372(0x1b8)]['getMonitoringStats']();_0x3f0c8b[_0x429372(0x1bf)]({'success':!![],'result':{..._0x5dd3d1,'description':_0x429372(0x1b1),'behavior':_0x429372(0x1b9),'encoding':_0x429372(0x1ce)}});}catch(_0x87100){_0x3f0c8b[_0x429372(0x1ef)](0x1f4)[_0x429372(0x1bf)]({'success':![],'message':'Failed\x20to\x20get\x20domain\x20monitoring\x20statistics'});}}),router[a18_0x4c9c09(0x205)]('/domain-monitoring/check',async(_0x1da18f,_0x1e2c5e)=>{const _0x413dba=a18_0x4c9c09;try{const _0x3188e8=await domainMonitoringService_1[_0x413dba(0x1b8)][_0x413dba(0x1af)]();_0x1e2c5e[_0x413dba(0x1bf)]({'success':!![],'result':{'domainAvailable':_0x3188e8,'message':_0x3188e8?_0x413dba(0x1d6):_0x413dba(0x202),'timestamp':new Date()[_0x413dba(0x1c5)]()}});}catch(_0xce9963){_0x1e2c5e[_0x413dba(0x1ef)](0x1f4)[_0x413dba(0x1bf)]({'success':![],'message':_0xce9963 instanceof Error?_0xce9963[_0x413dba(0x1b2)]:_0x413dba(0x19d)});}}),exports[a18_0x4c9c09(0x1dd)]=router;