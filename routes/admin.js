'use strict';function a19_0x5cd6(_0x3eb705,_0x17fcca){const _0x27b108=a19_0x27b1();return a19_0x5cd6=function(_0x5cd6ef,_0x7d4845){_0x5cd6ef=_0x5cd6ef-0x1ba;let _0x1a0f2c=_0x27b108[_0x5cd6ef];return _0x1a0f2c;},a19_0x5cd6(_0x3eb705,_0x17fcca);}const a19_0x52d6bf=a19_0x5cd6;(function(_0xd81147,_0x3b3ef3){const _0x2cbbfb=a19_0x5cd6,_0x3769ce=_0xd81147();while(!![]){try{const _0x3b7276=-parseInt(_0x2cbbfb(0x222))/0x1*(parseInt(_0x2cbbfb(0x1ec))/0x2)+-parseInt(_0x2cbbfb(0x1f7))/0x3+-parseInt(_0x2cbbfb(0x213))/0x4+parseInt(_0x2cbbfb(0x1bb))/0x5*(-parseInt(_0x2cbbfb(0x1fe))/0x6)+-parseInt(_0x2cbbfb(0x20e))/0x7+parseInt(_0x2cbbfb(0x21a))/0x8*(parseInt(_0x2cbbfb(0x1e4))/0x9)+parseInt(_0x2cbbfb(0x1d0))/0xa;if(_0x3b7276===_0x3b3ef3)break;else _0x3769ce['push'](_0x3769ce['shift']());}catch(_0xee2265){_0x3769ce['push'](_0x3769ce['shift']());}}}(a19_0x27b1,0x6704b));var __createBinding=this&&this[a19_0x52d6bf(0x1bc)]||(Object[a19_0x52d6bf(0x1ee)]?function(_0xbb12f0,_0x4c0a9c,_0x9a9bef,_0x505e6a){const _0x5d3e4e=a19_0x52d6bf;if(_0x505e6a===undefined)_0x505e6a=_0x9a9bef;var _0x3e1743=Object[_0x5d3e4e(0x230)](_0x4c0a9c,_0x9a9bef);(!_0x3e1743||(_0x5d3e4e(0x21f)in _0x3e1743?!_0x4c0a9c['__esModule']:_0x3e1743['writable']||_0x3e1743[_0x5d3e4e(0x1d8)]))&&(_0x3e1743={'enumerable':!![],'get':function(){return _0x4c0a9c[_0x9a9bef];}}),Object[_0x5d3e4e(0x203)](_0xbb12f0,_0x505e6a,_0x3e1743);}:function(_0x595272,_0x3c75ae,_0x203a1a,_0xa29717){if(_0xa29717===undefined)_0xa29717=_0x203a1a;_0x595272[_0xa29717]=_0x3c75ae[_0x203a1a];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object['create']?function(_0x3a7200,_0x5d06a1){const _0x57d8a4=a19_0x52d6bf;Object[_0x57d8a4(0x203)](_0x3a7200,_0x57d8a4(0x238),{'enumerable':!![],'value':_0x5d06a1});}:function(_0x507eb1,_0x5202dc){_0x507eb1['default']=_0x5202dc;}),__importStar=this&&this[a19_0x52d6bf(0x22e)]||(function(){var _0x53957b=function(_0x10d857){return _0x53957b=Object['getOwnPropertyNames']||function(_0x2317bf){const _0x42a8cc=a19_0x5cd6;var _0x4055c7=[];for(var _0xab22d6 in _0x2317bf)if(Object[_0x42a8cc(0x21b)][_0x42a8cc(0x1e8)][_0x42a8cc(0x1dc)](_0x2317bf,_0xab22d6))_0x4055c7[_0x4055c7[_0x42a8cc(0x215)]]=_0xab22d6;return _0x4055c7;},_0x53957b(_0x10d857);};return function(_0x2686d6){const _0x1cc262=a19_0x5cd6;if(_0x2686d6&&_0x2686d6['__esModule'])return _0x2686d6;var _0x1d1032={};if(_0x2686d6!=null){for(var _0x463db7=_0x53957b(_0x2686d6),_0x3c7116=0x0;_0x3c7116<_0x463db7[_0x1cc262(0x215)];_0x3c7116++)if(_0x463db7[_0x3c7116]!=='default')__createBinding(_0x1d1032,_0x2686d6,_0x463db7[_0x3c7116]);}return __setModuleDefault(_0x1d1032,_0x2686d6),_0x1d1032;};}());Object[a19_0x52d6bf(0x203)](exports,'__esModule',{'value':!![]});const express_1=require(a19_0x52d6bf(0x220)),adminController_1=require(a19_0x52d6bf(0x1f9)),validation_1=require(a19_0x52d6bf(0x207)),auth_1=require(a19_0x52d6bf(0x1c6)),loggerService_1=require('../services/loggerService'),coinToPayStatusService_1=require('../services/coinToPayStatusService'),domainMonitoringService_1=require(a19_0x52d6bf(0x219)),router=(0x0,express_1[a19_0x52d6bf(0x1cd)])(),adminController=new adminController_1[(a19_0x52d6bf(0x22c))]();function a19_0x27b1(){const _0x519649=['/users/:id','json','/payout/stats','deletePayout','checkPaymentById','now','configurable','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','Domain\x20is\x20responding\x20correctly','body','call','Old\x20logs\x20cleaned\x20(kept\x20last\x20','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','getUserById','createUserSchema','resolve','createUser','gateway','235593LUhIhB','delete','/users/:id/activate','updatePayment','hasOwnProperty','/users/:id/suspend','domainMonitoringService','updateUserSchema','75266QBKOOR','createdAt','create','/payments/:id/customer','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','/cointopay/stats','/cointopay/check/:paymentId','updateCustomerData','\x20days\x20if\x20not\x20paid','Payment\x20not\x20found','shop','510336Wcknmj','updateCustomerDataSchema','../controllers/adminController','/payments/:id','amount','cointopay','updatedAt','660pgvuII','updateUser','/domain-monitoring/stats','toISOString','getUsers','defineProperty','validate','/logs/clean','🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','../middleware/validation','params','checkAuth','coinToPayStatusService','status','requireAdmin','/payouts','4977924gNZOMa','\x20days)','Failed\x20to\x20clean\x20old\x20logs','activateUser','floor','453304EdJmOv','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','length','then','post','getServiceStats','../services/domainMonitoringService','240wvArCg','prototype','currency','getStatistics','getPayoutById','get','express','authenticateToken','5zflprM','../config/database','CoinToPay\x20automatic\x20status\x20checking\x20service','suspendUser','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','expiryDays','gatewayPaymentId','CoinToPay\x20payment\x20status\x20checked\x20successfully','/cointopay/payment/:paymentId','/domain-monitoring/check','AdminController','getPayoutStats','__importStar','payment','getOwnPropertyDescriptor','message','getMerchantStatistics','put','getTime','getPayouts','/auth','log','default','/payout/merchants','35545weKpyK','__createBinding','getMerchantsSelection','findUnique','error','FAILED','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','EXPIRED','Failed\x20to\x20perform\x20manual\x20domain\x20check','PAID','/payout','../middleware/auth','createPayout','manualCheck','PENDING','loggerService','cleanOldLogs','/payouts/:id','Router','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','getPayments','16013780xxtKpZ','/merchant-statistics'];a19_0x27b1=function(){return _0x519649;};return a19_0x27b1();}router['use'](auth_1[a19_0x52d6bf(0x221)],auth_1[a19_0x52d6bf(0x20c)]),router[a19_0x52d6bf(0x21f)](a19_0x52d6bf(0x236),adminController[a19_0x52d6bf(0x209)]),router[a19_0x52d6bf(0x21f)]('/statistics',adminController[a19_0x52d6bf(0x21d)]),router[a19_0x52d6bf(0x21f)](a19_0x52d6bf(0x1d1),adminController[a19_0x52d6bf(0x232)]),router[a19_0x52d6bf(0x21f)](a19_0x52d6bf(0x1d4),adminController[a19_0x52d6bf(0x22d)]),router[a19_0x52d6bf(0x21f)](a19_0x52d6bf(0x1ba),adminController['getMerchantsAwaitingPayout']),router['get']('/merchants/selection',adminController[a19_0x52d6bf(0x1bd)]),router[a19_0x52d6bf(0x217)](a19_0x52d6bf(0x1c5),(0x0,validation_1['validate'])(validation_1['createPayoutSchema']),adminController[a19_0x52d6bf(0x1c7)]),router[a19_0x52d6bf(0x21f)](a19_0x52d6bf(0x20d),adminController[a19_0x52d6bf(0x235)]),router['get'](a19_0x52d6bf(0x1cc),adminController[a19_0x52d6bf(0x21e)]),router['delete'](a19_0x52d6bf(0x1cc),adminController[a19_0x52d6bf(0x1d5)]),router['get']('/payments',adminController[a19_0x52d6bf(0x1cf)]),router[a19_0x52d6bf(0x21f)](a19_0x52d6bf(0x1fa),adminController['getPaymentById']),router[a19_0x52d6bf(0x233)](a19_0x52d6bf(0x1fa),adminController[a19_0x52d6bf(0x1e7)]),router['put'](a19_0x52d6bf(0x1ef),(0x0,validation_1[a19_0x52d6bf(0x204)])(validation_1[a19_0x52d6bf(0x1f8)]),adminController[a19_0x52d6bf(0x1f3)]),router[a19_0x52d6bf(0x21f)]('/users',adminController[a19_0x52d6bf(0x202)]),router[a19_0x52d6bf(0x21f)](a19_0x52d6bf(0x1d2),adminController[a19_0x52d6bf(0x1df)]),router[a19_0x52d6bf(0x217)]('/users',(0x0,validation_1[a19_0x52d6bf(0x204)])(validation_1[a19_0x52d6bf(0x1e0)]),adminController[a19_0x52d6bf(0x1e2)]),router[a19_0x52d6bf(0x233)](a19_0x52d6bf(0x1d2),(0x0,validation_1[a19_0x52d6bf(0x204)])(validation_1[a19_0x52d6bf(0x1eb)]),adminController[a19_0x52d6bf(0x1ff)]),router[a19_0x52d6bf(0x1e5)](a19_0x52d6bf(0x1d2),adminController['deleteUser']),router[a19_0x52d6bf(0x217)](a19_0x52d6bf(0x1e9),adminController[a19_0x52d6bf(0x225)]),router[a19_0x52d6bf(0x217)](a19_0x52d6bf(0x1e6),adminController[a19_0x52d6bf(0x211)]),router[a19_0x52d6bf(0x21f)]('/logs/stats',(_0x1f41f3,_0x20eaec)=>{const _0x163e50=a19_0x52d6bf;try{const _0x5af67b=loggerService_1[_0x163e50(0x1ca)]['getLogStats']();_0x20eaec[_0x163e50(0x1d3)]({'success':!![],'result':_0x5af67b});}catch(_0x4aa89e){_0x20eaec[_0x163e50(0x20b)](0x1f4)['json']({'success':![],'message':'Failed\x20to\x20get\x20log\x20statistics'});}}),router[a19_0x52d6bf(0x217)](a19_0x52d6bf(0x205),(_0x361419,_0x318b12)=>{const _0x28166a=a19_0x52d6bf;try{const {daysToKeep:daysToKeep=0x1e}=_0x361419[_0x28166a(0x1db)];loggerService_1[_0x28166a(0x1ca)][_0x28166a(0x1cb)](daysToKeep),_0x318b12[_0x28166a(0x1d3)]({'success':!![],'message':_0x28166a(0x1dd)+daysToKeep+_0x28166a(0x20f)});}catch(_0x9eee3f){_0x318b12[_0x28166a(0x20b)](0x1f4)[_0x28166a(0x1d3)]({'success':![],'message':_0x28166a(0x210)});}}),router[a19_0x52d6bf(0x217)](a19_0x52d6bf(0x1f2),async(_0xe7ddd3,_0x40c093)=>{const _0x50c337=a19_0x52d6bf;try{const {paymentId:_0xb4b5bb}=_0xe7ddd3[_0x50c337(0x208)];console[_0x50c337(0x237)](_0x50c337(0x206)+_0xb4b5bb),await coinToPayStatusService_1['coinToPayStatusService'][_0x50c337(0x1d6)](_0xb4b5bb),_0x40c093[_0x50c337(0x1d3)]({'success':!![],'message':_0x50c337(0x229)});}catch(_0x40d6c4){console[_0x50c337(0x1bf)]('❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20'+_0xe7ddd3[_0x50c337(0x208)]['paymentId']+':',_0x40d6c4),_0x40c093[_0x50c337(0x20b)](0x1f4)[_0x50c337(0x1d3)]({'success':![],'message':_0x40d6c4 instanceof Error?_0x40d6c4[_0x50c337(0x231)]:_0x50c337(0x1de)});}}),router[a19_0x52d6bf(0x21f)](a19_0x52d6bf(0x1f1),(_0xb6bca4,_0x5c5275)=>{const _0x4f3938=a19_0x52d6bf;try{const _0x45c2ea=coinToPayStatusService_1[_0x4f3938(0x20a)][_0x4f3938(0x218)]();_0x5c5275['json']({'success':!![],'result':{..._0x45c2ea,'description':_0x4f3938(0x224),'statusMapping':{'Paid':_0x4f3938(0x1c4),'Awaiting\x20Fiat':'PENDING','waiting':_0x4f3938(0x1c9),'expired':_0x4f3938(0x1c2),'failed':_0x4f3938(0x1c0)},'autoExpiryNote':'Payments\x20automatically\x20expire\x20after\x20'+_0x45c2ea[_0x4f3938(0x227)]+_0x4f3938(0x1f4),'individualTimersNote':_0x4f3938(0x226)}});}catch(_0x163a71){_0x5c5275[_0x4f3938(0x20b)](0x1f4)[_0x4f3938(0x1d3)]({'success':![],'message':_0x4f3938(0x1f0)});}}),router['get'](a19_0x52d6bf(0x22a),async(_0x4846b3,_0x1836a9)=>{const _0x49aea1=a19_0x52d6bf;try{const {paymentId:_0x4683f3}=_0x4846b3[_0x49aea1(0x208)],_0x1316cb=coinToPayStatusService_1[_0x49aea1(0x20a)]['getPaymentTimerInfo'](_0x4683f3),_0x14cc4b=(await Promise[_0x49aea1(0x1e1)]()[_0x49aea1(0x216)](()=>__importStar(require(_0x49aea1(0x223)))))[_0x49aea1(0x238)],_0x45ea2d=await _0x14cc4b[_0x49aea1(0x22f)][_0x49aea1(0x1be)]({'where':{'id':_0x4683f3},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x45ea2d)return _0x1836a9[_0x49aea1(0x20b)](0x194)[_0x49aea1(0x1d3)]({'success':![],'message':_0x49aea1(0x1f5)});_0x1836a9[_0x49aea1(0x1d3)]({'success':!![],'result':{'payment':{'id':_0x45ea2d['id'],'gateway':_0x45ea2d['gateway'],'gatewayPaymentId':_0x45ea2d[_0x49aea1(0x228)],'status':_0x45ea2d[_0x49aea1(0x20b)],'amount':_0x45ea2d[_0x49aea1(0x1fb)],'currency':_0x45ea2d[_0x49aea1(0x21c)],'createdAt':_0x45ea2d[_0x49aea1(0x1ed)],'updatedAt':_0x45ea2d[_0x49aea1(0x1fd)],'shop':_0x45ea2d[_0x49aea1(0x1f6)]},'timers':_0x1316cb,'isCoinToPay':_0x45ea2d[_0x49aea1(0x1e3)]===_0x49aea1(0x1fc),'ageInMinutes':Math[_0x49aea1(0x212)]((Date[_0x49aea1(0x1d7)]()-_0x45ea2d[_0x49aea1(0x1ed)][_0x49aea1(0x234)]())/(0x3e8*0x3c))}});}catch(_0x27eaa2){_0x1836a9[_0x49aea1(0x20b)](0x1f4)[_0x49aea1(0x1d3)]({'success':![],'message':_0x27eaa2 instanceof Error?_0x27eaa2[_0x49aea1(0x231)]:'Failed\x20to\x20get\x20payment\x20information'});}}),router[a19_0x52d6bf(0x21f)](a19_0x52d6bf(0x200),(_0x4e6d2f,_0x3bbd05)=>{const _0xb774=a19_0x52d6bf;try{const _0x3ab747=domainMonitoringService_1[_0xb774(0x1ea)]['getMonitoringStats']();_0x3bbd05[_0xb774(0x1d3)]({'success':!![],'result':{..._0x3ab747,'description':_0xb774(0x214),'behavior':_0xb774(0x1ce),'encoding':_0xb774(0x1c1)}});}catch(_0x44e07a){_0x3bbd05[_0xb774(0x20b)](0x1f4)['json']({'success':![],'message':_0xb774(0x1d9)});}}),router[a19_0x52d6bf(0x217)](a19_0x52d6bf(0x22b),async(_0x2fbeff,_0x480717)=>{const _0x4d15a5=a19_0x52d6bf;try{const _0x59bf3a=await domainMonitoringService_1[_0x4d15a5(0x1ea)][_0x4d15a5(0x1c8)]();_0x480717['json']({'success':!![],'result':{'domainAvailable':_0x59bf3a,'message':_0x59bf3a?_0x4d15a5(0x1da):'Domain\x20check\x20failed','timestamp':new Date()[_0x4d15a5(0x201)]()}});}catch(_0x5b3fd7){_0x480717[_0x4d15a5(0x20b)](0x1f4)['json']({'success':![],'message':_0x5b3fd7 instanceof Error?_0x5b3fd7[_0x4d15a5(0x231)]:_0x4d15a5(0x1c3)});}}),exports[a19_0x52d6bf(0x238)]=router;