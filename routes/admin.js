'use strict';const a19_0x203a5e=a19_0x3bea;(function(_0x5eca9b,_0x4dcdf9){const _0x51dc57=a19_0x3bea,_0x268e7b=_0x5eca9b();while(!![]){try{const _0x1e318d=-parseInt(_0x51dc57(0x211))/0x1+parseInt(_0x51dc57(0x22c))/0x2+parseInt(_0x51dc57(0x1da))/0x3*(parseInt(_0x51dc57(0x21a))/0x4)+-parseInt(_0x51dc57(0x227))/0x5+parseInt(_0x51dc57(0x1e3))/0x6+parseInt(_0x51dc57(0x1f9))/0x7*(parseInt(_0x51dc57(0x1ea))/0x8)+parseInt(_0x51dc57(0x218))/0x9*(parseInt(_0x51dc57(0x1c8))/0xa);if(_0x1e318d===_0x4dcdf9)break;else _0x268e7b['push'](_0x268e7b['shift']());}catch(_0x159f2a){_0x268e7b['push'](_0x268e7b['shift']());}}}(a19_0xb6f6,0x5658b));function a19_0xb6f6(){const _0x1e6515=['üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','getUserById','delete','../config/database','__setModuleDefault','/payouts/:id','Payment\x20not\x20found','getOwnPropertyNames','/payments','cleanOldLogs','default','7YuTPOa','floor','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','Failed\x20to\x20clean\x20old\x20logs','/domain-monitoring/check','deletePayout','PENDING','cointopay','PAID','shop','createPayout','CoinToPay\x20automatic\x20status\x20checking\x20service','/cointopay/check/:paymentId','/users/:id','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','Failed\x20to\x20get\x20log\x20statistics','../middleware/auth','getTime','Domain\x20check\x20failed','/auth','updateUserSchema','getMerchantStatistics','updateUser','getMerchantsSelection','260497QjsPTZ','createdAt','FAILED','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','validate','Old\x20logs\x20cleaned\x20(kept\x20last\x20','gateway','9jFAzTx','getLogStats','204588SllCpq','log','loggerService','params','/payout','coinToPayStatusService','createPayoutSchema','defineProperty','../services/coinToPayStatusService','/payout/stats','deleteUser','/statistics','requireAdmin','2282955uMtPAN','updatedAt','put','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','length','469174AGzIvQ','__esModule','json','getPayouts','getPayoutStats','error','AdminController','getUsers','writable','../controllers/adminController','paymentId','checkPaymentById','/users/:id/suspend','call','findUnique','/domain-monitoring/stats','gatewayPaymentId','updateCustomerDataSchema','\x20days)','updatePayment','getPayoutById','../services/domainMonitoringService','checkAuth','createUser','getPaymentTimerInfo','790570qxNffg','authenticateToken','getMonitoringStats','/cointopay/payment/:paymentId','message','\x20days\x20if\x20not\x20paid','status','/merchant-statistics','EXPIRED','get','getMerchantsAwaitingPayout','payment','activateUser','getPaymentById','currency','then','manualCheck','getStatistics','33RChqVE','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','create','__createBinding','createUserSchema','domainMonitoringService','configurable','post','335994ItgJfU','resolve','CoinToPay\x20payment\x20status\x20checked\x20successfully','../middleware/validation','/payout/merchants','getServiceStats','/payments/:id','1108024WWGYNb','/users','hasOwnProperty','updateCustomerData'];a19_0xb6f6=function(){return _0x1e6515;};return a19_0xb6f6();}function a19_0x3bea(_0x36bce1,_0x4060c4){const _0xb6f65d=a19_0xb6f6();return a19_0x3bea=function(_0x3bea5f,_0xa5a31){_0x3bea5f=_0x3bea5f-0x1b5;let _0x582870=_0xb6f65d[_0x3bea5f];return _0x582870;},a19_0x3bea(_0x36bce1,_0x4060c4);}var __createBinding=this&&this[a19_0x203a5e(0x1de)]||(Object['create']?function(_0x4a40c0,_0x178b96,_0x388326,_0x1de326){const _0x5d3c8a=a19_0x203a5e;if(_0x1de326===undefined)_0x1de326=_0x388326;var _0x3e63f3=Object['getOwnPropertyDescriptor'](_0x178b96,_0x388326);(!_0x3e63f3||(_0x5d3c8a(0x1d1)in _0x3e63f3?!_0x178b96[_0x5d3c8a(0x22d)]:_0x3e63f3[_0x5d3c8a(0x1b7)]||_0x3e63f3[_0x5d3c8a(0x1e1)]))&&(_0x3e63f3={'enumerable':!![],'get':function(){return _0x178b96[_0x388326];}}),Object[_0x5d3c8a(0x221)](_0x4a40c0,_0x1de326,_0x3e63f3);}:function(_0x39d5c0,_0x214edb,_0x1ffadf,_0x2c7455){if(_0x2c7455===undefined)_0x2c7455=_0x1ffadf;_0x39d5c0[_0x2c7455]=_0x214edb[_0x1ffadf];}),__setModuleDefault=this&&this[a19_0x203a5e(0x1f2)]||(Object[a19_0x203a5e(0x1dd)]?function(_0x31ecb9,_0x307859){const _0x16a1b8=a19_0x203a5e;Object[_0x16a1b8(0x221)](_0x31ecb9,'default',{'enumerable':!![],'value':_0x307859});}:function(_0x3df3e6,_0x5db8c7){const _0x340a08=a19_0x203a5e;_0x3df3e6[_0x340a08(0x1f8)]=_0x5db8c7;}),__importStar=this&&this['__importStar']||(function(){var _0x3e12e2=function(_0x5ee123){const _0x5b09b7=a19_0x3bea;return _0x3e12e2=Object[_0x5b09b7(0x1f5)]||function(_0x4b518b){const _0x55d8a4=_0x5b09b7;var _0x592a20=[];for(var _0x2d07ce in _0x4b518b)if(Object['prototype'][_0x55d8a4(0x1ec)][_0x55d8a4(0x1bc)](_0x4b518b,_0x2d07ce))_0x592a20[_0x592a20[_0x55d8a4(0x22b)]]=_0x2d07ce;return _0x592a20;},_0x3e12e2(_0x5ee123);};return function(_0x1a9d6b){const _0x5eaef6=a19_0x3bea;if(_0x1a9d6b&&_0x1a9d6b[_0x5eaef6(0x22d)])return _0x1a9d6b;var _0x393271={};if(_0x1a9d6b!=null){for(var _0x1ec120=_0x3e12e2(_0x1a9d6b),_0x10ebcb=0x0;_0x10ebcb<_0x1ec120[_0x5eaef6(0x22b)];_0x10ebcb++)if(_0x1ec120[_0x10ebcb]!==_0x5eaef6(0x1f8))__createBinding(_0x393271,_0x1a9d6b,_0x1ec120[_0x10ebcb]);}return __setModuleDefault(_0x393271,_0x1a9d6b),_0x393271;};}());Object[a19_0x203a5e(0x221)](exports,a19_0x203a5e(0x22d),{'value':!![]});const express_1=require('express'),adminController_1=require(a19_0x203a5e(0x1b8)),validation_1=require(a19_0x203a5e(0x1e6)),auth_1=require(a19_0x203a5e(0x209)),loggerService_1=require('../services/loggerService'),coinToPayStatusService_1=require(a19_0x203a5e(0x222)),domainMonitoringService_1=require(a19_0x203a5e(0x1c4)),router=(0x0,express_1['Router'])(),adminController=new adminController_1[(a19_0x203a5e(0x1b5))]();router['use'](auth_1[a19_0x203a5e(0x1c9)],auth_1[a19_0x203a5e(0x226)]),router[a19_0x203a5e(0x1d1)](a19_0x203a5e(0x20c),adminController[a19_0x203a5e(0x1c5)]),router[a19_0x203a5e(0x1d1)](a19_0x203a5e(0x225),adminController[a19_0x203a5e(0x1d9)]),router[a19_0x203a5e(0x1d1)](a19_0x203a5e(0x1cf),adminController[a19_0x203a5e(0x20e)]),router[a19_0x203a5e(0x1d1)](a19_0x203a5e(0x223),adminController[a19_0x203a5e(0x230)]),router['get'](a19_0x203a5e(0x1e7),adminController[a19_0x203a5e(0x1d2)]),router[a19_0x203a5e(0x1d1)]('/merchants/selection',adminController[a19_0x203a5e(0x210)]),router['post'](a19_0x203a5e(0x21e),(0x0,validation_1['validate'])(validation_1[a19_0x203a5e(0x220)]),adminController[a19_0x203a5e(0x203)]),router[a19_0x203a5e(0x1d1)]('/payouts',adminController[a19_0x203a5e(0x22f)]),router[a19_0x203a5e(0x1d1)](a19_0x203a5e(0x1f3),adminController[a19_0x203a5e(0x1c3)]),router[a19_0x203a5e(0x1f0)](a19_0x203a5e(0x1f3),adminController[a19_0x203a5e(0x1fe)]),router[a19_0x203a5e(0x1d1)](a19_0x203a5e(0x1f6),adminController['getPayments']),router[a19_0x203a5e(0x1d1)](a19_0x203a5e(0x1e9),adminController[a19_0x203a5e(0x1d5)]),router['put'](a19_0x203a5e(0x1e9),adminController[a19_0x203a5e(0x1c2)]),router[a19_0x203a5e(0x229)]('/payments/:id/customer',(0x0,validation_1[a19_0x203a5e(0x215)])(validation_1[a19_0x203a5e(0x1c0)]),adminController[a19_0x203a5e(0x1ed)]),router[a19_0x203a5e(0x1d1)](a19_0x203a5e(0x1eb),adminController[a19_0x203a5e(0x1b6)]),router[a19_0x203a5e(0x1d1)](a19_0x203a5e(0x206),adminController[a19_0x203a5e(0x1ef)]),router['post'](a19_0x203a5e(0x1eb),(0x0,validation_1[a19_0x203a5e(0x215)])(validation_1[a19_0x203a5e(0x1df)]),adminController[a19_0x203a5e(0x1c6)]),router['put'](a19_0x203a5e(0x206),(0x0,validation_1[a19_0x203a5e(0x215)])(validation_1[a19_0x203a5e(0x20d)]),adminController[a19_0x203a5e(0x20f)]),router[a19_0x203a5e(0x1f0)](a19_0x203a5e(0x206),adminController[a19_0x203a5e(0x224)]),router[a19_0x203a5e(0x1e2)](a19_0x203a5e(0x1bb),adminController['suspendUser']),router[a19_0x203a5e(0x1e2)]('/users/:id/activate',adminController[a19_0x203a5e(0x1d4)]),router[a19_0x203a5e(0x1d1)]('/logs/stats',(_0x25a884,_0x4bff68)=>{const _0x33e2ad=a19_0x203a5e;try{const _0x4f48fb=loggerService_1[_0x33e2ad(0x21c)][_0x33e2ad(0x219)]();_0x4bff68['json']({'success':!![],'result':_0x4f48fb});}catch(_0x21a9e9){_0x4bff68['status'](0x1f4)[_0x33e2ad(0x22e)]({'success':![],'message':_0x33e2ad(0x208)});}}),router[a19_0x203a5e(0x1e2)]('/logs/clean',(_0x4fe355,_0x46c0e1)=>{const _0x2bab8b=a19_0x203a5e;try{const {daysToKeep:daysToKeep=0x1e}=_0x4fe355['body'];loggerService_1['loggerService'][_0x2bab8b(0x1f7)](daysToKeep),_0x46c0e1[_0x2bab8b(0x22e)]({'success':!![],'message':_0x2bab8b(0x216)+daysToKeep+_0x2bab8b(0x1c1)});}catch(_0x22a5c1){_0x46c0e1['status'](0x1f4)[_0x2bab8b(0x22e)]({'success':![],'message':_0x2bab8b(0x1fc)});}}),router[a19_0x203a5e(0x1e2)](a19_0x203a5e(0x205),async(_0x5dda66,_0x27b4ed)=>{const _0x1be13c=a19_0x203a5e;try{const {paymentId:_0xc732ed}=_0x5dda66[_0x1be13c(0x21d)];console[_0x1be13c(0x21b)](_0x1be13c(0x1ee)+_0xc732ed),await coinToPayStatusService_1[_0x1be13c(0x21f)][_0x1be13c(0x1ba)](_0xc732ed),_0x27b4ed[_0x1be13c(0x22e)]({'success':!![],'message':_0x1be13c(0x1e5)});}catch(_0x2934f9){console[_0x1be13c(0x231)](_0x1be13c(0x214)+_0x5dda66[_0x1be13c(0x21d)][_0x1be13c(0x1b9)]+':',_0x2934f9),_0x27b4ed[_0x1be13c(0x1ce)](0x1f4)[_0x1be13c(0x22e)]({'success':![],'message':_0x2934f9 instanceof Error?_0x2934f9[_0x1be13c(0x1cc)]:_0x1be13c(0x1dc)});}}),router['get']('/cointopay/stats',(_0x52ab07,_0x5ec0a3)=>{const _0x551c83=a19_0x203a5e;try{const _0x5a0f46=coinToPayStatusService_1[_0x551c83(0x21f)][_0x551c83(0x1e8)]();_0x5ec0a3[_0x551c83(0x22e)]({'success':!![],'result':{..._0x5a0f46,'description':_0x551c83(0x204),'statusMapping':{'Paid':_0x551c83(0x201),'Awaiting\x20Fiat':_0x551c83(0x1ff),'waiting':_0x551c83(0x1ff),'expired':_0x551c83(0x1d0),'failed':_0x551c83(0x213)},'autoExpiryNote':'Payments\x20automatically\x20expire\x20after\x20'+_0x5a0f46['expiryDays']+_0x551c83(0x1cd),'individualTimersNote':_0x551c83(0x1db)}});}catch(_0x59e4b6){_0x5ec0a3['status'](0x1f4)[_0x551c83(0x22e)]({'success':![],'message':_0x551c83(0x1fb)});}}),router[a19_0x203a5e(0x1d1)](a19_0x203a5e(0x1cb),async(_0x3450ac,_0x13dfa4)=>{const _0x141c56=a19_0x203a5e;try{const {paymentId:_0x375293}=_0x3450ac[_0x141c56(0x21d)],_0x2462ca=coinToPayStatusService_1['coinToPayStatusService'][_0x141c56(0x1c7)](_0x375293),_0x45b1ff=(await Promise[_0x141c56(0x1e4)]()[_0x141c56(0x1d7)](()=>__importStar(require(_0x141c56(0x1f1)))))[_0x141c56(0x1f8)],_0x4f1e4b=await _0x45b1ff[_0x141c56(0x1d3)][_0x141c56(0x1bd)]({'where':{'id':_0x375293},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x4f1e4b)return _0x13dfa4[_0x141c56(0x1ce)](0x194)[_0x141c56(0x22e)]({'success':![],'message':_0x141c56(0x1f4)});_0x13dfa4[_0x141c56(0x22e)]({'success':!![],'result':{'payment':{'id':_0x4f1e4b['id'],'gateway':_0x4f1e4b['gateway'],'gatewayPaymentId':_0x4f1e4b[_0x141c56(0x1bf)],'status':_0x4f1e4b[_0x141c56(0x1ce)],'amount':_0x4f1e4b['amount'],'currency':_0x4f1e4b[_0x141c56(0x1d6)],'createdAt':_0x4f1e4b[_0x141c56(0x212)],'updatedAt':_0x4f1e4b[_0x141c56(0x228)],'shop':_0x4f1e4b[_0x141c56(0x202)]},'timers':_0x2462ca,'isCoinToPay':_0x4f1e4b[_0x141c56(0x217)]===_0x141c56(0x200),'ageInMinutes':Math[_0x141c56(0x1fa)]((Date['now']()-_0x4f1e4b['createdAt'][_0x141c56(0x20a)]())/(0x3e8*0x3c))}});}catch(_0xced696){_0x13dfa4[_0x141c56(0x1ce)](0x1f4)[_0x141c56(0x22e)]({'success':![],'message':_0xced696 instanceof Error?_0xced696[_0x141c56(0x1cc)]:'Failed\x20to\x20get\x20payment\x20information'});}}),router[a19_0x203a5e(0x1d1)](a19_0x203a5e(0x1be),(_0x14b62b,_0x2549d7)=>{const _0x42c895=a19_0x203a5e;try{const _0x2f505e=domainMonitoringService_1['domainMonitoringService'][_0x42c895(0x1ca)]();_0x2549d7[_0x42c895(0x22e)]({'success':!![],'result':{..._0x2f505e,'description':_0x42c895(0x207),'behavior':'Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','encoding':_0x42c895(0x22a)}});}catch(_0x4dbf3d){_0x2549d7[_0x42c895(0x1ce)](0x1f4)[_0x42c895(0x22e)]({'success':![],'message':'Failed\x20to\x20get\x20domain\x20monitoring\x20statistics'});}}),router['post'](a19_0x203a5e(0x1fd),async(_0x45aef0,_0x592cba)=>{const _0x2f0ba6=a19_0x203a5e;try{const _0xec33ae=await domainMonitoringService_1[_0x2f0ba6(0x1e0)][_0x2f0ba6(0x1d8)]();_0x592cba['json']({'success':!![],'result':{'domainAvailable':_0xec33ae,'message':_0xec33ae?'Domain\x20is\x20responding\x20correctly':_0x2f0ba6(0x20b),'timestamp':new Date()['toISOString']()}});}catch(_0x3b33a2){_0x592cba[_0x2f0ba6(0x1ce)](0x1f4)['json']({'success':![],'message':_0x3b33a2 instanceof Error?_0x3b33a2[_0x2f0ba6(0x1cc)]:'Failed\x20to\x20perform\x20manual\x20domain\x20check'});}}),exports[a19_0x203a5e(0x1f8)]=router;