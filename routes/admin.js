'use strict';const a19_0x46631a=a19_0x5e53;(function(_0x1bd004,_0x15a8cc){const _0x391150=a19_0x5e53,_0x4b907e=_0x1bd004();while(!![]){try{const _0xb0ad=parseInt(_0x391150(0x174))/0x1+parseInt(_0x391150(0x15c))/0x2*(-parseInt(_0x391150(0x155))/0x3)+parseInt(_0x391150(0x17f))/0x4+parseInt(_0x391150(0x1bc))/0x5*(parseInt(_0x391150(0x152))/0x6)+-parseInt(_0x391150(0x168))/0x7*(-parseInt(_0x391150(0x18f))/0x8)+parseInt(_0x391150(0x1a4))/0x9*(-parseInt(_0x391150(0x143))/0xa)+-parseInt(_0x391150(0x1be))/0xb;if(_0xb0ad===_0x15a8cc)break;else _0x4b907e['push'](_0x4b907e['shift']());}catch(_0x304bb1){_0x4b907e['push'](_0x4b907e['shift']());}}}(a19_0x2374,0x79156));var __createBinding=this&&this['__createBinding']||(Object[a19_0x46631a(0x156)]?function(_0x4b1b86,_0x392268,_0x2e8f9d,_0x3bc974){const _0x47483b=a19_0x46631a;if(_0x3bc974===undefined)_0x3bc974=_0x2e8f9d;var _0x4409ff=Object[_0x47483b(0x17e)](_0x392268,_0x2e8f9d);(!_0x4409ff||('get'in _0x4409ff?!_0x392268[_0x47483b(0x150)]:_0x4409ff[_0x47483b(0x193)]||_0x4409ff['configurable']))&&(_0x4409ff={'enumerable':!![],'get':function(){return _0x392268[_0x2e8f9d];}}),Object[_0x47483b(0x180)](_0x4b1b86,_0x3bc974,_0x4409ff);}:function(_0x4c4ccc,_0x566ae3,_0x3e56ae,_0x526bdd){if(_0x526bdd===undefined)_0x526bdd=_0x3e56ae;_0x4c4ccc[_0x526bdd]=_0x566ae3[_0x3e56ae];}),__setModuleDefault=this&&this[a19_0x46631a(0x149)]||(Object[a19_0x46631a(0x156)]?function(_0x504479,_0x184ddd){const _0xf5150d=a19_0x46631a;Object['defineProperty'](_0x504479,_0xf5150d(0x1b6),{'enumerable':!![],'value':_0x184ddd});}:function(_0x271b1b,_0x41e789){_0x271b1b['default']=_0x41e789;}),__importStar=this&&this[a19_0x46631a(0x195)]||(function(){var _0x2cd1e2=function(_0x1a899a){const _0x9c6148=a19_0x5e53;return _0x2cd1e2=Object[_0x9c6148(0x1b9)]||function(_0x46ef35){const _0x4ca98c=_0x9c6148;var _0x138b10=[];for(var _0x4f4de4 in _0x46ef35)if(Object[_0x4ca98c(0x1aa)]['hasOwnProperty'][_0x4ca98c(0x18d)](_0x46ef35,_0x4f4de4))_0x138b10[_0x138b10[_0x4ca98c(0x170)]]=_0x4f4de4;return _0x138b10;},_0x2cd1e2(_0x1a899a);};return function(_0x544935){const _0x4f3522=a19_0x5e53;if(_0x544935&&_0x544935['__esModule'])return _0x544935;var _0x57a958={};if(_0x544935!=null){for(var _0x24b068=_0x2cd1e2(_0x544935),_0x62a642=0x0;_0x62a642<_0x24b068['length'];_0x62a642++)if(_0x24b068[_0x62a642]!==_0x4f3522(0x1b6))__createBinding(_0x57a958,_0x544935,_0x24b068[_0x62a642]);}return __setModuleDefault(_0x57a958,_0x544935),_0x57a958;};}());function a19_0x2374(){const _0x5997ac=['getOwnPropertyDescriptor','753144UoTDeR','defineProperty','gatewayPaymentId','getPaymentById','paymentId','Failed\x20to\x20get\x20log\x20statistics','createPayoutSchema','/payments/:id/customer','put','validate','/domain-monitoring/stats','/payout/merchants','/cointopay/stats','/users','call','Payments\x20automatically\x20expire\x20after\x20','40rBhFNT','getUserById','message','/payments/:id','writable','log','__importStar','cleanOldLogs','requireAdmin','/payouts/:id','deleteUser','../services/domainMonitoringService','currency','toISOString','/payout','\x20days)','getPayouts','updateUser','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','getTime','expiryDays','4461516iGvZHw','post','loggerService','\x20days\x20if\x20not\x20paid','then','Domain\x20is\x20responding\x20correctly','prototype','coinToPayStatusService','EXPIRED','getPayoutById','/payouts','getMerchantStatistics','/cointopay/check/:paymentId','getLogStats','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','error','getServiceStats','Failed\x20to\x20perform\x20manual\x20domain\x20check','default','cointopay','get','getOwnPropertyNames','getMerchantsAwaitingPayout','../services/loggerService','1983810UiirnO','PENDING','11486310UnxszT','json','domainMonitoringService','status','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','10OxQuZk','Domain\x20check\x20failed','/logs/clean','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','../services/coinToPayStatusService','/users/:id/suspend','__setModuleDefault','getPayoutStats','CoinToPay\x20payment\x20status\x20checked\x20successfully','../config/database','/payments','/auth','amount','__esModule','/users/:id/activate','12SqlldM','floor','../controllers/adminController','297vwCbtJ','create','AdminController','updateUserSchema','checkPaymentById','updateCustomerDataSchema','Payment\x20not\x20found','1574GSAkqz','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','body','delete','shop','../middleware/validation','PAID','getUsers','updatedAt','now','getPaymentTimerInfo','params','213388NmirSo','gateway','use','updateCustomerData','/users/:id','createdAt','getMonitoringStats','/domain-monitoring/check','length','getPayments','getMerchantsSelection','FAILED','979575YLDzrA','CoinToPay\x20automatic\x20status\x20checking\x20service','/cointopay/payment/:paymentId','/merchants/selection','Old\x20logs\x20cleaned\x20(kept\x20last\x20','Router','createUserSchema','../middleware/auth','suspendUser','/statistics'];a19_0x2374=function(){return _0x5997ac;};return a19_0x2374();}Object['defineProperty'](exports,a19_0x46631a(0x150),{'value':!![]});const express_1=require('express'),adminController_1=require(a19_0x46631a(0x154)),validation_1=require(a19_0x46631a(0x161)),auth_1=require(a19_0x46631a(0x17b)),loggerService_1=require(a19_0x46631a(0x1bb)),coinToPayStatusService_1=require(a19_0x46631a(0x147)),domainMonitoringService_1=require(a19_0x46631a(0x19a)),router=(0x0,express_1[a19_0x46631a(0x179)])(),adminController=new adminController_1[(a19_0x46631a(0x157))]();function a19_0x5e53(_0x5ac4f1,_0x51541f){const _0x23748f=a19_0x2374();return a19_0x5e53=function(_0x5e532b,_0x69bdd2){_0x5e532b=_0x5e532b-0x140;let _0x3f4957=_0x23748f[_0x5e532b];return _0x3f4957;},a19_0x5e53(_0x5ac4f1,_0x51541f);}router[a19_0x46631a(0x16a)](auth_1['authenticateToken'],auth_1[a19_0x46631a(0x197)]),router[a19_0x46631a(0x1b8)](a19_0x46631a(0x14e),adminController['checkAuth']),router[a19_0x46631a(0x1b8)](a19_0x46631a(0x17d),adminController['getStatistics']),router[a19_0x46631a(0x1b8)]('/merchant-statistics',adminController[a19_0x46631a(0x1af)]),router[a19_0x46631a(0x1b8)]('/payout/stats',adminController[a19_0x46631a(0x14a)]),router['get'](a19_0x46631a(0x18a),adminController[a19_0x46631a(0x1ba)]),router[a19_0x46631a(0x1b8)](a19_0x46631a(0x177),adminController[a19_0x46631a(0x172)]),router['post'](a19_0x46631a(0x19d),(0x0,validation_1[a19_0x46631a(0x188)])(validation_1[a19_0x46631a(0x185)]),adminController['createPayout']),router[a19_0x46631a(0x1b8)](a19_0x46631a(0x1ae),adminController[a19_0x46631a(0x19f)]),router[a19_0x46631a(0x1b8)](a19_0x46631a(0x198),adminController[a19_0x46631a(0x1ad)]),router[a19_0x46631a(0x15f)](a19_0x46631a(0x198),adminController['deletePayout']),router[a19_0x46631a(0x1b8)](a19_0x46631a(0x14d),adminController[a19_0x46631a(0x171)]),router[a19_0x46631a(0x1b8)](a19_0x46631a(0x192),adminController[a19_0x46631a(0x182)]),router[a19_0x46631a(0x187)](a19_0x46631a(0x192),adminController['updatePayment']),router[a19_0x46631a(0x187)](a19_0x46631a(0x186),(0x0,validation_1[a19_0x46631a(0x188)])(validation_1[a19_0x46631a(0x15a)]),adminController[a19_0x46631a(0x16b)]),router['get']('/users',adminController[a19_0x46631a(0x163)]),router['get'](a19_0x46631a(0x16c),adminController[a19_0x46631a(0x190)]),router[a19_0x46631a(0x1a5)](a19_0x46631a(0x18c),(0x0,validation_1[a19_0x46631a(0x188)])(validation_1[a19_0x46631a(0x17a)]),adminController['createUser']),router[a19_0x46631a(0x187)](a19_0x46631a(0x16c),(0x0,validation_1[a19_0x46631a(0x188)])(validation_1[a19_0x46631a(0x158)]),adminController[a19_0x46631a(0x1a0)]),router['delete'](a19_0x46631a(0x16c),adminController[a19_0x46631a(0x199)]),router[a19_0x46631a(0x1a5)](a19_0x46631a(0x148),adminController[a19_0x46631a(0x17c)]),router[a19_0x46631a(0x1a5)](a19_0x46631a(0x151),adminController['activateUser']),router['get']('/logs/stats',(_0x2c4b54,_0x126db2)=>{const _0x5aa6cb=a19_0x46631a;try{const _0x279e0d=loggerService_1['loggerService'][_0x5aa6cb(0x1b1)]();_0x126db2[_0x5aa6cb(0x1bf)]({'success':!![],'result':_0x279e0d});}catch(_0xb6cb4b){_0x126db2[_0x5aa6cb(0x141)](0x1f4)[_0x5aa6cb(0x1bf)]({'success':![],'message':_0x5aa6cb(0x184)});}}),router[a19_0x46631a(0x1a5)](a19_0x46631a(0x145),(_0x164dc0,_0x50a721)=>{const _0x1518f8=a19_0x46631a;try{const {daysToKeep:daysToKeep=0x1e}=_0x164dc0[_0x1518f8(0x15e)];loggerService_1[_0x1518f8(0x1a6)][_0x1518f8(0x196)](daysToKeep),_0x50a721[_0x1518f8(0x1bf)]({'success':!![],'message':_0x1518f8(0x178)+daysToKeep+_0x1518f8(0x19e)});}catch(_0x1563b3){_0x50a721[_0x1518f8(0x141)](0x1f4)['json']({'success':![],'message':'Failed\x20to\x20clean\x20old\x20logs'});}}),router['post'](a19_0x46631a(0x1b0),async(_0x46d00b,_0x310460)=>{const _0x43f738=a19_0x46631a;try{const {paymentId:_0x59d21f}=_0x46d00b[_0x43f738(0x167)];console[_0x43f738(0x194)]('🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20'+_0x59d21f),await coinToPayStatusService_1[_0x43f738(0x1ab)][_0x43f738(0x159)](_0x59d21f),_0x310460[_0x43f738(0x1bf)]({'success':!![],'message':_0x43f738(0x14b)});}catch(_0x506bc4){console[_0x43f738(0x1b3)]('❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20'+_0x46d00b[_0x43f738(0x167)][_0x43f738(0x183)]+':',_0x506bc4),_0x310460['status'](0x1f4)[_0x43f738(0x1bf)]({'success':![],'message':_0x506bc4 instanceof Error?_0x506bc4[_0x43f738(0x191)]:_0x43f738(0x146)});}}),router[a19_0x46631a(0x1b8)](a19_0x46631a(0x18b),(_0x30ad6b,_0xe6347d)=>{const _0x312019=a19_0x46631a;try{const _0x5742a8=coinToPayStatusService_1[_0x312019(0x1ab)][_0x312019(0x1b4)]();_0xe6347d[_0x312019(0x1bf)]({'success':!![],'result':{..._0x5742a8,'description':_0x312019(0x175),'statusMapping':{'Paid':_0x312019(0x162),'Awaiting\x20Fiat':_0x312019(0x1bd),'waiting':'PENDING','expired':_0x312019(0x1ac),'failed':_0x312019(0x173)},'autoExpiryNote':_0x312019(0x18e)+_0x5742a8[_0x312019(0x1a3)]+_0x312019(0x1a7),'individualTimersNote':'Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly'}});}catch(_0x4a6691){_0xe6347d['status'](0x1f4)['json']({'success':![],'message':_0x312019(0x142)});}}),router[a19_0x46631a(0x1b8)](a19_0x46631a(0x176),async(_0x4af951,_0x11d12b)=>{const _0x2cef57=a19_0x46631a;try{const {paymentId:_0x88dad6}=_0x4af951[_0x2cef57(0x167)],_0x4ae26f=coinToPayStatusService_1[_0x2cef57(0x1ab)][_0x2cef57(0x166)](_0x88dad6),_0x483dd9=(await Promise['resolve']()[_0x2cef57(0x1a8)](()=>__importStar(require(_0x2cef57(0x14c)))))[_0x2cef57(0x1b6)],_0x9d5acc=await _0x483dd9['payment']['findUnique']({'where':{'id':_0x88dad6},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x9d5acc)return _0x11d12b[_0x2cef57(0x141)](0x194)['json']({'success':![],'message':_0x2cef57(0x15b)});_0x11d12b[_0x2cef57(0x1bf)]({'success':!![],'result':{'payment':{'id':_0x9d5acc['id'],'gateway':_0x9d5acc[_0x2cef57(0x169)],'gatewayPaymentId':_0x9d5acc[_0x2cef57(0x181)],'status':_0x9d5acc[_0x2cef57(0x141)],'amount':_0x9d5acc[_0x2cef57(0x14f)],'currency':_0x9d5acc[_0x2cef57(0x19b)],'createdAt':_0x9d5acc[_0x2cef57(0x16d)],'updatedAt':_0x9d5acc[_0x2cef57(0x164)],'shop':_0x9d5acc[_0x2cef57(0x160)]},'timers':_0x4ae26f,'isCoinToPay':_0x9d5acc[_0x2cef57(0x169)]===_0x2cef57(0x1b7),'ageInMinutes':Math[_0x2cef57(0x153)]((Date[_0x2cef57(0x165)]()-_0x9d5acc[_0x2cef57(0x16d)][_0x2cef57(0x1a2)]())/(0x3e8*0x3c))}});}catch(_0x3d315a){_0x11d12b[_0x2cef57(0x141)](0x1f4)[_0x2cef57(0x1bf)]({'success':![],'message':_0x3d315a instanceof Error?_0x3d315a[_0x2cef57(0x191)]:'Failed\x20to\x20get\x20payment\x20information'});}}),router[a19_0x46631a(0x1b8)](a19_0x46631a(0x189),(_0x591e44,_0x1741e9)=>{const _0x2931ca=a19_0x46631a;try{const _0x84183=domainMonitoringService_1['domainMonitoringService'][_0x2931ca(0x16e)]();_0x1741e9[_0x2931ca(0x1bf)]({'success':!![],'result':{..._0x84183,'description':_0x2931ca(0x1a1),'behavior':_0x2931ca(0x15d),'encoding':_0x2931ca(0x1b2)}});}catch(_0x528166){_0x1741e9['status'](0x1f4)[_0x2931ca(0x1bf)]({'success':![],'message':'Failed\x20to\x20get\x20domain\x20monitoring\x20statistics'});}}),router[a19_0x46631a(0x1a5)](a19_0x46631a(0x16f),async(_0xbac2b9,_0x6c8b)=>{const _0x51acb4=a19_0x46631a;try{const _0x33a7ce=await domainMonitoringService_1[_0x51acb4(0x140)]['manualCheck']();_0x6c8b['json']({'success':!![],'result':{'domainAvailable':_0x33a7ce,'message':_0x33a7ce?_0x51acb4(0x1a9):_0x51acb4(0x144),'timestamp':new Date()[_0x51acb4(0x19c)]()}});}catch(_0x36e726){_0x6c8b[_0x51acb4(0x141)](0x1f4)[_0x51acb4(0x1bf)]({'success':![],'message':_0x36e726 instanceof Error?_0x36e726[_0x51acb4(0x191)]:_0x51acb4(0x1b5)});}}),exports[a19_0x46631a(0x1b6)]=router;