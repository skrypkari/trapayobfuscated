'use strict';function a19_0xfb3d(_0x30159c,_0x59da53){const _0x3d9657=a19_0x3d96();return a19_0xfb3d=function(_0xfb3d71,_0x41741d){_0xfb3d71=_0xfb3d71-0x13f;let _0xc0e365=_0x3d9657[_0xfb3d71];return _0xc0e365;},a19_0xfb3d(_0x30159c,_0x59da53);}const a19_0x1b3cce=a19_0xfb3d;function a19_0x3d96(){const _0x479619=['EXPIRED','use','getTime','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','deleteUser','CoinToPay\x20payment\x20status\x20checked\x20successfully','Domain\x20check\x20failed','paymentId','3021102KwseYp','/payments/:id/customer','updateCustomerData','default','updateUserSchema','updatedAt','params','findUnique','/payments','/statistics','activateUser','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','/users/:id','expiryDays','create','/users','updateCustomerDataSchema','delete','/merchant-statistics','getPayoutStats','/cointopay/stats','6910xneqsm','getPayments','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','11hRGzYr','defineProperty','getLogStats','message','coinToPayStatusService','createPayoutSchema','get','checkAuth','createPayout','post','/users/:id/activate','Domain\x20is\x20responding\x20correctly','17435aVaGaF','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','__esModule','__createBinding','amount','/domain-monitoring/stats','length','Failed\x20to\x20clean\x20old\x20logs','483144XHmPeY','/cointopay/check/:paymentId','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','Payments\x20automatically\x20expire\x20after\x20','../services/loggerService','manualCheck','loggerService','Failed\x20to\x20perform\x20manual\x20domain\x20check','/users/:id/suspend','getMerchantsAwaitingPayout','getPaymentById','/domain-monitoring/check','Payment\x20not\x20found','then','../middleware/validation','domainMonitoringService','getMerchantsSelection','1783575ZQrmYI','/payout/merchants','authenticateToken','904722cofwFv','log','../middleware/auth','3513IXcWZY','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','getOwnPropertyNames','put','checkPaymentById','now','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','getPayoutById','getServiceStats','Old\x20logs\x20cleaned\x20(kept\x20last\x20','8wrkSpm','/payments/:id','/payouts/:id','gateway','/cointopay/payment/:paymentId','/logs/clean','/merchants/selection','resolve','26066vTnFIs','__setModuleDefault','toISOString','PENDING','cointopay','suspendUser','status','FAILED','shop','AdminController','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','844IbbjtQ','CoinToPay\x20automatic\x20status\x20checking\x20service','createdAt','validate','json','getOwnPropertyDescriptor','requireAdmin','cleanOldLogs','getUserById','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','call','writable','/payout','getPayouts','floor','/auth'];a19_0x3d96=function(){return _0x479619;};return a19_0x3d96();}(function(_0x22ea44,_0x4dd40e){const _0x31babd=a19_0xfb3d,_0x1b33db=_0x22ea44();while(!![]){try{const _0x417afc=parseInt(_0x31babd(0x19e))/0x1*(parseInt(_0x31babd(0x163))/0x2)+-parseInt(_0x31babd(0x151))/0x3*(-parseInt(_0x31babd(0x16e))/0x4)+parseInt(_0x31babd(0x14b))/0x5+parseInt(_0x31babd(0x1b2))/0x6+parseInt(_0x31babd(0x14e))/0x7+-parseInt(_0x31babd(0x15b))/0x8*(-parseInt(_0x31babd(0x186))/0x9)+parseInt(_0x31babd(0x19b))/0xa*(-parseInt(_0x31babd(0x1aa))/0xb);if(_0x417afc===_0x4dd40e)break;else _0x1b33db['push'](_0x1b33db['shift']());}catch(_0x2d6895){_0x1b33db['push'](_0x1b33db['shift']());}}}(a19_0x3d96,0x302fc));var __createBinding=this&&this[a19_0x1b3cce(0x1ad)]||(Object[a19_0x1b3cce(0x194)]?function(_0x4f4033,_0x1a874c,_0x30806d,_0x4bb655){const _0xa5eb55=a19_0x1b3cce;if(_0x4bb655===undefined)_0x4bb655=_0x30806d;var _0x298b88=Object[_0xa5eb55(0x173)](_0x1a874c,_0x30806d);(!_0x298b88||(_0xa5eb55(0x1a4)in _0x298b88?!_0x1a874c[_0xa5eb55(0x1ac)]:_0x298b88[_0xa5eb55(0x179)]||_0x298b88['configurable']))&&(_0x298b88={'enumerable':!![],'get':function(){return _0x1a874c[_0x30806d];}}),Object[_0xa5eb55(0x19f)](_0x4f4033,_0x4bb655,_0x298b88);}:function(_0x4469c6,_0x190d82,_0x1dfab7,_0x49043e){if(_0x49043e===undefined)_0x49043e=_0x1dfab7;_0x4469c6[_0x49043e]=_0x190d82[_0x1dfab7];}),__setModuleDefault=this&&this[a19_0x1b3cce(0x164)]||(Object['create']?function(_0x5ea143,_0x5edc8f){const _0x247071=a19_0x1b3cce;Object[_0x247071(0x19f)](_0x5ea143,_0x247071(0x189),{'enumerable':!![],'value':_0x5edc8f});}:function(_0x37f141,_0x5f434f){_0x37f141['default']=_0x5f434f;}),__importStar=this&&this['__importStar']||(function(){var _0x51cf3d=function(_0x97e1d6){const _0xa5c0a9=a19_0xfb3d;return _0x51cf3d=Object[_0xa5c0a9(0x153)]||function(_0x3cb32f){const _0x36e67d=_0xa5c0a9;var _0x4b6ada=[];for(var _0x419792 in _0x3cb32f)if(Object['prototype']['hasOwnProperty'][_0x36e67d(0x178)](_0x3cb32f,_0x419792))_0x4b6ada[_0x4b6ada['length']]=_0x419792;return _0x4b6ada;},_0x51cf3d(_0x97e1d6);};return function(_0x14575e){const _0x4d972f=a19_0xfb3d;if(_0x14575e&&_0x14575e[_0x4d972f(0x1ac)])return _0x14575e;var _0x265afe={};if(_0x14575e!=null){for(var _0x227568=_0x51cf3d(_0x14575e),_0x1f117e=0x0;_0x1f117e<_0x227568[_0x4d972f(0x1b0)];_0x1f117e++)if(_0x227568[_0x1f117e]!==_0x4d972f(0x189))__createBinding(_0x265afe,_0x14575e,_0x227568[_0x1f117e]);}return __setModuleDefault(_0x265afe,_0x14575e),_0x265afe;};}());Object[a19_0x1b3cce(0x19f)](exports,'__esModule',{'value':!![]});const express_1=require('express'),adminController_1=require('../controllers/adminController'),validation_1=require(a19_0x1b3cce(0x148)),auth_1=require(a19_0x1b3cce(0x150)),loggerService_1=require(a19_0x1b3cce(0x1b6)),coinToPayStatusService_1=require('../services/coinToPayStatusService'),domainMonitoringService_1=require('../services/domainMonitoringService'),router=(0x0,express_1['Router'])(),adminController=new adminController_1[(a19_0x1b3cce(0x16c))]();router[a19_0x1b3cce(0x17f)](auth_1[a19_0x1b3cce(0x14d)],auth_1[a19_0x1b3cce(0x174)]),router[a19_0x1b3cce(0x1a4)](a19_0x1b3cce(0x17d),adminController[a19_0x1b3cce(0x1a5)]),router[a19_0x1b3cce(0x1a4)](a19_0x1b3cce(0x18f),adminController['getStatistics']),router['get'](a19_0x1b3cce(0x198),adminController['getMerchantStatistics']),router['get']('/payout/stats',adminController[a19_0x1b3cce(0x199)]),router['get'](a19_0x1b3cce(0x14c),adminController[a19_0x1b3cce(0x143)]),router[a19_0x1b3cce(0x1a4)](a19_0x1b3cce(0x161),adminController[a19_0x1b3cce(0x14a)]),router[a19_0x1b3cce(0x1a7)](a19_0x1b3cce(0x17a),(0x0,validation_1[a19_0x1b3cce(0x171)])(validation_1[a19_0x1b3cce(0x1a3)]),adminController[a19_0x1b3cce(0x1a6)]),router[a19_0x1b3cce(0x1a4)]('/payouts',adminController[a19_0x1b3cce(0x17b)]),router[a19_0x1b3cce(0x1a4)]('/payouts/:id',adminController[a19_0x1b3cce(0x158)]),router[a19_0x1b3cce(0x197)](a19_0x1b3cce(0x15d),adminController['deletePayout']),router[a19_0x1b3cce(0x1a4)](a19_0x1b3cce(0x18e),adminController[a19_0x1b3cce(0x19c)]),router['get']('/payments/:id',adminController[a19_0x1b3cce(0x144)]),router[a19_0x1b3cce(0x154)](a19_0x1b3cce(0x15c),adminController['updatePayment']),router['put'](a19_0x1b3cce(0x187),(0x0,validation_1['validate'])(validation_1[a19_0x1b3cce(0x196)]),adminController[a19_0x1b3cce(0x188)]),router[a19_0x1b3cce(0x1a4)]('/users',adminController['getUsers']),router[a19_0x1b3cce(0x1a4)](a19_0x1b3cce(0x192),adminController[a19_0x1b3cce(0x176)]),router[a19_0x1b3cce(0x1a7)](a19_0x1b3cce(0x195),(0x0,validation_1[a19_0x1b3cce(0x171)])(validation_1['createUserSchema']),adminController['createUser']),router['put'](a19_0x1b3cce(0x192),(0x0,validation_1[a19_0x1b3cce(0x171)])(validation_1[a19_0x1b3cce(0x18a)]),adminController['updateUser']),router['delete'](a19_0x1b3cce(0x192),adminController[a19_0x1b3cce(0x182)]),router['post'](a19_0x1b3cce(0x142),adminController[a19_0x1b3cce(0x168)]),router[a19_0x1b3cce(0x1a7)](a19_0x1b3cce(0x1a8),adminController[a19_0x1b3cce(0x190)]),router[a19_0x1b3cce(0x1a4)]('/logs/stats',(_0x67d05d,_0x1e020c)=>{const _0x3ca755=a19_0x1b3cce;try{const _0x336fa7=loggerService_1['loggerService'][_0x3ca755(0x1a0)]();_0x1e020c['json']({'success':!![],'result':_0x336fa7});}catch(_0x5b3edd){_0x1e020c['status'](0x1f4)['json']({'success':![],'message':'Failed\x20to\x20get\x20log\x20statistics'});}}),router[a19_0x1b3cce(0x1a7)](a19_0x1b3cce(0x160),(_0x19e358,_0x589528)=>{const _0x4c2b77=a19_0x1b3cce;try{const {daysToKeep:daysToKeep=0x1e}=_0x19e358['body'];loggerService_1[_0x4c2b77(0x140)][_0x4c2b77(0x175)](daysToKeep),_0x589528[_0x4c2b77(0x172)]({'success':!![],'message':_0x4c2b77(0x15a)+daysToKeep+'\x20days)'});}catch(_0x1f04d0){_0x589528[_0x4c2b77(0x169)](0x1f4)[_0x4c2b77(0x172)]({'success':![],'message':_0x4c2b77(0x1b1)});}}),router['post'](a19_0x1b3cce(0x1b3),async(_0x3dc23c,_0xa160ec)=>{const _0x22a9ba=a19_0x1b3cce;try{const {paymentId:_0x22432a}=_0x3dc23c[_0x22a9ba(0x18c)];console[_0x22a9ba(0x14f)](_0x22a9ba(0x1b4)+_0x22432a),await coinToPayStatusService_1[_0x22a9ba(0x1a2)][_0x22a9ba(0x155)](_0x22432a),_0xa160ec['json']({'success':!![],'message':_0x22a9ba(0x183)});}catch(_0x419d24){console['error'](_0x22a9ba(0x157)+_0x3dc23c[_0x22a9ba(0x18c)][_0x22a9ba(0x185)]+':',_0x419d24),_0xa160ec['status'](0x1f4)[_0x22a9ba(0x172)]({'success':![],'message':_0x419d24 instanceof Error?_0x419d24[_0x22a9ba(0x1a1)]:_0x22a9ba(0x152)});}}),router[a19_0x1b3cce(0x1a4)](a19_0x1b3cce(0x19a),(_0x138637,_0x2aeedb)=>{const _0x12144d=a19_0x1b3cce;try{const _0x3be9f4=coinToPayStatusService_1[_0x12144d(0x1a2)][_0x12144d(0x159)]();_0x2aeedb['json']({'success':!![],'result':{..._0x3be9f4,'description':_0x12144d(0x16f),'statusMapping':{'Paid':'PAID','Awaiting\x20Fiat':_0x12144d(0x166),'waiting':_0x12144d(0x166),'expired':_0x12144d(0x17e),'failed':_0x12144d(0x16a)},'autoExpiryNote':_0x12144d(0x1b5)+_0x3be9f4[_0x12144d(0x193)]+'\x20days\x20if\x20not\x20paid','individualTimersNote':_0x12144d(0x177)}});}catch(_0xd65fd0){_0x2aeedb[_0x12144d(0x169)](0x1f4)[_0x12144d(0x172)]({'success':![],'message':_0x12144d(0x19d)});}}),router['get'](a19_0x1b3cce(0x15f),async(_0x83736f,_0x44e132)=>{const _0x3a61b5=a19_0x1b3cce;try{const {paymentId:_0x2925e3}=_0x83736f['params'],_0x177eb7=coinToPayStatusService_1[_0x3a61b5(0x1a2)]['getPaymentTimerInfo'](_0x2925e3),_0x2ed337=(await Promise[_0x3a61b5(0x162)]()[_0x3a61b5(0x147)](()=>__importStar(require('../config/database'))))[_0x3a61b5(0x189)],_0x33f91f=await _0x2ed337['payment'][_0x3a61b5(0x18d)]({'where':{'id':_0x2925e3},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x33f91f)return _0x44e132[_0x3a61b5(0x169)](0x194)[_0x3a61b5(0x172)]({'success':![],'message':_0x3a61b5(0x146)});_0x44e132[_0x3a61b5(0x172)]({'success':!![],'result':{'payment':{'id':_0x33f91f['id'],'gateway':_0x33f91f[_0x3a61b5(0x15e)],'gatewayPaymentId':_0x33f91f['gatewayPaymentId'],'status':_0x33f91f[_0x3a61b5(0x169)],'amount':_0x33f91f[_0x3a61b5(0x1ae)],'currency':_0x33f91f['currency'],'createdAt':_0x33f91f['createdAt'],'updatedAt':_0x33f91f[_0x3a61b5(0x18b)],'shop':_0x33f91f[_0x3a61b5(0x16b)]},'timers':_0x177eb7,'isCoinToPay':_0x33f91f['gateway']===_0x3a61b5(0x167),'ageInMinutes':Math[_0x3a61b5(0x17c)]((Date[_0x3a61b5(0x156)]()-_0x33f91f[_0x3a61b5(0x170)][_0x3a61b5(0x180)]())/(0x3e8*0x3c))}});}catch(_0x3e9897){_0x44e132[_0x3a61b5(0x169)](0x1f4)[_0x3a61b5(0x172)]({'success':![],'message':_0x3e9897 instanceof Error?_0x3e9897[_0x3a61b5(0x1a1)]:'Failed\x20to\x20get\x20payment\x20information'});}}),router[a19_0x1b3cce(0x1a4)](a19_0x1b3cce(0x1af),(_0x266099,_0x48248e)=>{const _0x4f000c=a19_0x1b3cce;try{const _0x5ba513=domainMonitoringService_1[_0x4f000c(0x149)]['getMonitoringStats']();_0x48248e[_0x4f000c(0x172)]({'success':!![],'result':{..._0x5ba513,'description':_0x4f000c(0x1ab),'behavior':_0x4f000c(0x191),'encoding':_0x4f000c(0x181)}});}catch(_0x3e5502){_0x48248e[_0x4f000c(0x169)](0x1f4)[_0x4f000c(0x172)]({'success':![],'message':_0x4f000c(0x16d)});}}),router[a19_0x1b3cce(0x1a7)](a19_0x1b3cce(0x145),async(_0x18f0ea,_0x51ff0f)=>{const _0x2d3c5c=a19_0x1b3cce;try{const _0x5177d6=await domainMonitoringService_1[_0x2d3c5c(0x149)][_0x2d3c5c(0x13f)]();_0x51ff0f[_0x2d3c5c(0x172)]({'success':!![],'result':{'domainAvailable':_0x5177d6,'message':_0x5177d6?_0x2d3c5c(0x1a9):_0x2d3c5c(0x184),'timestamp':new Date()[_0x2d3c5c(0x165)]()}});}catch(_0xb8cb62){_0x51ff0f[_0x2d3c5c(0x169)](0x1f4)[_0x2d3c5c(0x172)]({'success':![],'message':_0xb8cb62 instanceof Error?_0xb8cb62[_0x2d3c5c(0x1a1)]:_0x2d3c5c(0x141)});}}),exports[a19_0x1b3cce(0x189)]=router;