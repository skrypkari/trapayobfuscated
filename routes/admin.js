'use strict';const a21_0xea1493=a21_0x5ae4;function a21_0x25b2(){const _0x1f1439=['create','put','authenticateToken','cleanupStalePayments','Failed\x20to\x20get\x20payment\x20information','defineProperty','shop','getUserById','createPayoutSchema','../services/loggerService','9QnYalD','/domain-monitoring/check','CoinToPay\x20payment\x20status\x20checked\x20successfully','getPayoutStats','then','getOwnPropertyDescriptor','/payments/cleanup-with-report','coinToPayStatusService','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','/logs/clean','resolve','Payments\x20automatically\x20expire\x20after\x20','cleanOldLogs','cointopay','gateway','Failed\x20to\x20clean\x20old\x20logs','getPayments','3144400jqZGSn','loggerService','5939432odHfiq','Router','116220adJhyw','activateUser','deleteUser','default','1836819yaxtTl','/payments/cleanup','status','/cointopay/stats','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','getMerchantsAwaitingPayout','__setModuleDefault','../middleware/auth','/users/:id/suspend','../config/database','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','createPayout','/payouts','manualCheck','/payout','/cointopay/payment/:paymentId','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','/payments/:id/customer','Failed\x20to\x20perform\x20manual\x20domain\x20check','getMerchantsSelection','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','__esModule','Failed\x20to\x20get\x20log\x20statistics','../controllers/adminController','getServiceStats','updateUserSchema','getProcessingPaymentsStats','requireAdmin','/payments/cleanup-pending','/domain-monitoring/stats','getMonitoringStats','createUserSchema','now','getPaymentById','/payments/:id','/payments/processing-stats','987672CIrDXA','toISOString','cleanupStalePaymentsWithReport','checkPaymentById','CoinToPay\x20automatic\x20status\x20checking\x20service','/merchants/selection','amount','/payouts/:id','__createBinding','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','get','findUnique','/users/:id','log','getLogStats','/auth','paymentId','/payout/merchants','hasOwnProperty','validate','expiryDays','use','post','writable','params','getOwnPropertyNames','message','createdAt','/users/:id/activate','call','domainMonitoringService','12CcEbGA','Old\x20logs\x20cleaned\x20(kept\x20last\x20','updateUser','../services/domainMonitoringService','express','json','createUser','updateCustomerDataSchema','getPaymentTimerInfo','__importStar','gatewayPaymentId','/merchant-statistics','1846593YPruDS','/payout/stats','getPayouts','updatePayment','Domain\x20check\x20failed','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','deletePayout','../services/coinToPayStatusService','\x20days)','Domain\x20is\x20responding\x20correctly','../middleware/validation','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','1899120InvJWD','length'];a21_0x25b2=function(){return _0x1f1439;};return a21_0x25b2();}(function(_0x4f4f3e,_0x123aea){const _0x2f9deb=a21_0x5ae4,_0x3f0fa5=_0x4f4f3e();while(!![]){try{const _0x120d3a=parseInt(_0x2f9deb(0x1e5))/0x1*(-parseInt(_0x2f9deb(0x22d))/0x2)+parseInt(_0x2f9deb(0x1e9))/0x3+-parseInt(_0x2f9deb(0x20e))/0x4+-parseInt(_0x2f9deb(0x1e1))/0x5+parseInt(_0x2f9deb(0x1c4))/0x6+parseInt(_0x2f9deb(0x239))/0x7+-parseInt(_0x2f9deb(0x1e3))/0x8*(-parseInt(_0x2f9deb(0x1d0))/0x9);if(_0x120d3a===_0x123aea)break;else _0x3f0fa5['push'](_0x3f0fa5['shift']());}catch(_0x4859fb){_0x3f0fa5['push'](_0x3f0fa5['shift']());}}}(a21_0x25b2,0x585af));var __createBinding=this&&this[a21_0xea1493(0x216)]||(Object[a21_0xea1493(0x1c6)]?function(_0x3233ff,_0x3c7ca6,_0x57c463,_0x2f87fd){const _0x52e1f4=a21_0xea1493;if(_0x2f87fd===undefined)_0x2f87fd=_0x57c463;var _0x242775=Object[_0x52e1f4(0x1d5)](_0x3c7ca6,_0x57c463);(!_0x242775||('get'in _0x242775?!_0x3c7ca6[_0x52e1f4(0x1ff)]:_0x242775[_0x52e1f4(0x225)]||_0x242775['configurable']))&&(_0x242775={'enumerable':!![],'get':function(){return _0x3c7ca6[_0x57c463];}}),Object[_0x52e1f4(0x1cb)](_0x3233ff,_0x2f87fd,_0x242775);}:function(_0x503f7c,_0x1b34c0,_0x2a3df1,_0x187e3e){if(_0x187e3e===undefined)_0x187e3e=_0x2a3df1;_0x503f7c[_0x187e3e]=_0x1b34c0[_0x2a3df1];}),__setModuleDefault=this&&this[a21_0xea1493(0x1ef)]||(Object[a21_0xea1493(0x1c6)]?function(_0x45b319,_0x1c51ba){Object['defineProperty'](_0x45b319,'default',{'enumerable':!![],'value':_0x1c51ba});}:function(_0xd3a3fb,_0xbedabd){const _0x4f4882=a21_0xea1493;_0xd3a3fb[_0x4f4882(0x1e8)]=_0xbedabd;}),__importStar=this&&this[a21_0xea1493(0x236)]||(function(){var _0x270d37=function(_0xa98a79){const _0x5bc4e4=a21_0x5ae4;return _0x270d37=Object[_0x5bc4e4(0x227)]||function(_0x3d077a){const _0x504164=_0x5bc4e4;var _0x36d855=[];for(var _0x294fe0 in _0x3d077a)if(Object['prototype'][_0x504164(0x220)][_0x504164(0x22b)](_0x3d077a,_0x294fe0))_0x36d855[_0x36d855[_0x504164(0x1c5)]]=_0x294fe0;return _0x36d855;},_0x270d37(_0xa98a79);};return function(_0x2234eb){const _0x281002=a21_0x5ae4;if(_0x2234eb&&_0x2234eb[_0x281002(0x1ff)])return _0x2234eb;var _0x368219={};if(_0x2234eb!=null){for(var _0x32e684=_0x270d37(_0x2234eb),_0x29d57b=0x0;_0x29d57b<_0x32e684[_0x281002(0x1c5)];_0x29d57b++)if(_0x32e684[_0x29d57b]!=='default')__createBinding(_0x368219,_0x2234eb,_0x32e684[_0x29d57b]);}return __setModuleDefault(_0x368219,_0x2234eb),_0x368219;};}());function a21_0x5ae4(_0x1d5dd2,_0x4e7fe6){const _0x25b2e1=a21_0x25b2();return a21_0x5ae4=function(_0x5ae435,_0x5853bf){_0x5ae435=_0x5ae435-0x1bf;let _0x38c401=_0x25b2e1[_0x5ae435];return _0x38c401;},a21_0x5ae4(_0x1d5dd2,_0x4e7fe6);}Object[a21_0xea1493(0x1cb)](exports,a21_0xea1493(0x1ff),{'value':!![]});const express_1=require(a21_0xea1493(0x231)),adminController_1=require(a21_0xea1493(0x201)),validation_1=require(a21_0xea1493(0x1c2)),auth_1=require(a21_0xea1493(0x1f0)),loggerService_1=require(a21_0xea1493(0x1cf)),coinToPayStatusService_1=require(a21_0xea1493(0x1bf)),domainMonitoringService_1=require(a21_0xea1493(0x230)),router=(0x0,express_1[a21_0xea1493(0x1e4)])(),adminController=new adminController_1['AdminController']();router[a21_0xea1493(0x223)](auth_1[a21_0xea1493(0x1c8)],auth_1[a21_0xea1493(0x205)]),router[a21_0xea1493(0x218)](a21_0xea1493(0x21d),adminController['checkAuth']),router[a21_0xea1493(0x218)]('/statistics',adminController['getStatistics']),router[a21_0xea1493(0x218)](a21_0xea1493(0x238),adminController['getMerchantStatistics']),router[a21_0xea1493(0x218)](a21_0xea1493(0x23a),adminController[a21_0xea1493(0x1d3)]),router[a21_0xea1493(0x218)](a21_0xea1493(0x21f),adminController[a21_0xea1493(0x1ee)]),router[a21_0xea1493(0x218)](a21_0xea1493(0x213),adminController[a21_0xea1493(0x1fd)]),router[a21_0xea1493(0x224)](a21_0xea1493(0x1f8),(0x0,validation_1['validate'])(validation_1[a21_0xea1493(0x1ce)]),adminController[a21_0xea1493(0x1f5)]),router[a21_0xea1493(0x218)](a21_0xea1493(0x1f6),adminController[a21_0xea1493(0x23b)]),router[a21_0xea1493(0x218)](a21_0xea1493(0x215),adminController['getPayoutById']),router['delete'](a21_0xea1493(0x215),adminController[a21_0xea1493(0x23f)]),router[a21_0xea1493(0x218)]('/payments',adminController[a21_0xea1493(0x1e0)]),router[a21_0xea1493(0x218)](a21_0xea1493(0x20c),adminController[a21_0xea1493(0x20b)]),router[a21_0xea1493(0x1c7)](a21_0xea1493(0x20c),adminController[a21_0xea1493(0x23c)]),router[a21_0xea1493(0x1c7)](a21_0xea1493(0x1fb),(0x0,validation_1[a21_0xea1493(0x221)])(validation_1[a21_0xea1493(0x234)]),adminController['updateCustomerData']),router[a21_0xea1493(0x218)](a21_0xea1493(0x20d),adminController[a21_0xea1493(0x204)]),router['post'](a21_0xea1493(0x1ea),adminController[a21_0xea1493(0x1c9)]),router['post'](a21_0xea1493(0x206),adminController['cleanupStalePendingPayments']),router[a21_0xea1493(0x224)](a21_0xea1493(0x1d6),adminController[a21_0xea1493(0x210)]),router[a21_0xea1493(0x218)]('/users',adminController['getUsers']),router[a21_0xea1493(0x218)](a21_0xea1493(0x21a),adminController[a21_0xea1493(0x1cd)]),router[a21_0xea1493(0x224)]('/users',(0x0,validation_1['validate'])(validation_1[a21_0xea1493(0x209)]),adminController[a21_0xea1493(0x233)]),router['put'](a21_0xea1493(0x21a),(0x0,validation_1['validate'])(validation_1[a21_0xea1493(0x203)]),adminController[a21_0xea1493(0x22f)]),router['delete']('/users/:id',adminController[a21_0xea1493(0x1e7)]),router[a21_0xea1493(0x224)](a21_0xea1493(0x1f1),adminController['suspendUser']),router[a21_0xea1493(0x224)](a21_0xea1493(0x22a),adminController[a21_0xea1493(0x1e6)]),router[a21_0xea1493(0x218)]('/logs/stats',(_0x2e0416,_0x302530)=>{const _0x35dbd8=a21_0xea1493;try{const _0x297eb6=loggerService_1[_0x35dbd8(0x1e2)][_0x35dbd8(0x21c)]();_0x302530[_0x35dbd8(0x232)]({'success':!![],'result':_0x297eb6});}catch(_0x5503d7){_0x302530[_0x35dbd8(0x1eb)](0x1f4)[_0x35dbd8(0x232)]({'success':![],'message':_0x35dbd8(0x200)});}}),router['post'](a21_0xea1493(0x1d9),(_0x50dc95,_0x2cb91c)=>{const _0x386e0c=a21_0xea1493;try{const {daysToKeep:daysToKeep=0x1e}=_0x50dc95['body'];loggerService_1[_0x386e0c(0x1e2)][_0x386e0c(0x1dc)](daysToKeep),_0x2cb91c[_0x386e0c(0x232)]({'success':!![],'message':_0x386e0c(0x22e)+daysToKeep+_0x386e0c(0x1c0)});}catch(_0x4d8d9b){_0x2cb91c['status'](0x1f4)['json']({'success':![],'message':_0x386e0c(0x1df)});}}),router[a21_0xea1493(0x224)]('/cointopay/check/:paymentId',async(_0x1ec1fb,_0x27c2c4)=>{const _0x58a41e=a21_0xea1493;try{const {paymentId:_0x17d651}=_0x1ec1fb['params'];console[_0x58a41e(0x21b)](_0x58a41e(0x1c3)+_0x17d651),await coinToPayStatusService_1[_0x58a41e(0x1d7)][_0x58a41e(0x211)](_0x17d651),_0x27c2c4['json']({'success':!![],'message':_0x58a41e(0x1d2)});}catch(_0x2456a0){console['error'](_0x58a41e(0x1ed)+_0x1ec1fb[_0x58a41e(0x226)][_0x58a41e(0x21e)]+':',_0x2456a0),_0x27c2c4[_0x58a41e(0x1eb)](0x1f4)['json']({'success':![],'message':_0x2456a0 instanceof Error?_0x2456a0[_0x58a41e(0x228)]:_0x58a41e(0x1f4)});}}),router[a21_0xea1493(0x218)](a21_0xea1493(0x1ec),(_0x1f1b06,_0x2242e2)=>{const _0x52ad4f=a21_0xea1493;try{const _0xccef23=coinToPayStatusService_1[_0x52ad4f(0x1d7)][_0x52ad4f(0x202)]();_0x2242e2[_0x52ad4f(0x232)]({'success':!![],'result':{..._0xccef23,'description':_0x52ad4f(0x212),'statusMapping':{'Paid':'PAID','Awaiting\x20Fiat':'PENDING','waiting':'PENDING','expired':'EXPIRED','failed':'FAILED'},'autoExpiryNote':_0x52ad4f(0x1db)+_0xccef23[_0x52ad4f(0x222)]+'\x20days\x20if\x20not\x20paid','individualTimersNote':_0x52ad4f(0x217)}});}catch(_0xadb42f){_0x2242e2['status'](0x1f4)[_0x52ad4f(0x232)]({'success':![],'message':_0x52ad4f(0x1fa)});}}),router['get'](a21_0xea1493(0x1f9),async(_0x4386ce,_0x343bb1)=>{const _0x84cc11=a21_0xea1493;try{const {paymentId:_0x539aac}=_0x4386ce[_0x84cc11(0x226)],_0x3d2616=coinToPayStatusService_1['coinToPayStatusService'][_0x84cc11(0x235)](_0x539aac),_0x382139=(await Promise[_0x84cc11(0x1da)]()[_0x84cc11(0x1d4)](()=>__importStar(require(_0x84cc11(0x1f2)))))[_0x84cc11(0x1e8)],_0x5e89ab=await _0x382139['payment'][_0x84cc11(0x219)]({'where':{'id':_0x539aac},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x5e89ab)return _0x343bb1[_0x84cc11(0x1eb)](0x194)[_0x84cc11(0x232)]({'success':![],'message':'Payment\x20not\x20found'});_0x343bb1[_0x84cc11(0x232)]({'success':!![],'result':{'payment':{'id':_0x5e89ab['id'],'gateway':_0x5e89ab[_0x84cc11(0x1de)],'gatewayPaymentId':_0x5e89ab[_0x84cc11(0x237)],'status':_0x5e89ab[_0x84cc11(0x1eb)],'amount':_0x5e89ab[_0x84cc11(0x214)],'currency':_0x5e89ab['currency'],'createdAt':_0x5e89ab[_0x84cc11(0x229)],'updatedAt':_0x5e89ab['updatedAt'],'shop':_0x5e89ab[_0x84cc11(0x1cc)]},'timers':_0x3d2616,'isCoinToPay':_0x5e89ab[_0x84cc11(0x1de)]===_0x84cc11(0x1dd),'ageInMinutes':Math['floor']((Date[_0x84cc11(0x20a)]()-_0x5e89ab[_0x84cc11(0x229)]['getTime']())/(0x3e8*0x3c))}});}catch(_0x5dcf4a){_0x343bb1['status'](0x1f4)[_0x84cc11(0x232)]({'success':![],'message':_0x5dcf4a instanceof Error?_0x5dcf4a['message']:_0x84cc11(0x1ca)});}}),router[a21_0xea1493(0x218)](a21_0xea1493(0x207),(_0x1713a0,_0xb8e6c5)=>{const _0x13cd90=a21_0xea1493;try{const _0x2ac39f=domainMonitoringService_1['domainMonitoringService'][_0x13cd90(0x208)]();_0xb8e6c5['json']({'success':!![],'result':{..._0x2ac39f,'description':_0x13cd90(0x1fe),'behavior':_0x13cd90(0x1d8),'encoding':_0x13cd90(0x1f3)}});}catch(_0x1b54a9){_0xb8e6c5[_0x13cd90(0x1eb)](0x1f4)[_0x13cd90(0x232)]({'success':![],'message':_0x13cd90(0x23e)});}}),router[a21_0xea1493(0x224)](a21_0xea1493(0x1d1),async(_0x1dbd37,_0x579df4)=>{const _0x2ca81d=a21_0xea1493;try{const _0x54dfab=await domainMonitoringService_1[_0x2ca81d(0x22c)][_0x2ca81d(0x1f7)]();_0x579df4['json']({'success':!![],'result':{'domainAvailable':_0x54dfab,'message':_0x54dfab?_0x2ca81d(0x1c1):_0x2ca81d(0x23d),'timestamp':new Date()[_0x2ca81d(0x20f)]()}});}catch(_0x2fdc45){_0x579df4[_0x2ca81d(0x1eb)](0x1f4)['json']({'success':![],'message':_0x2fdc45 instanceof Error?_0x2fdc45[_0x2ca81d(0x228)]:_0x2ca81d(0x1fc)});}}),exports[a21_0xea1493(0x1e8)]=router;