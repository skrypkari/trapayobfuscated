'use strict';const a19_0x301fbc=a19_0x3749;(function(_0x395a93,_0x52d4fa){const _0x4a5a33=a19_0x3749,_0x56b44b=_0x395a93();while(!![]){try{const _0x2a1513=parseInt(_0x4a5a33(0x10e))/0x1+parseInt(_0x4a5a33(0x119))/0x2*(parseInt(_0x4a5a33(0x108))/0x3)+-parseInt(_0x4a5a33(0xfa))/0x4+-parseInt(_0x4a5a33(0x122))/0x5+parseInt(_0x4a5a33(0xe4))/0x6+-parseInt(_0x4a5a33(0xe1))/0x7+-parseInt(_0x4a5a33(0xf2))/0x8*(-parseInt(_0x4a5a33(0xe8))/0x9);if(_0x2a1513===_0x52d4fa)break;else _0x56b44b['push'](_0x56b44b['shift']());}catch(_0x58cdbf){_0x56b44b['push'](_0x56b44b['shift']());}}}(a19_0x1386,0x58373));function a19_0x3749(_0x1ab279,_0x3bb0a0){const _0x1386a4=a19_0x1386();return a19_0x3749=function(_0x374928,_0x2ff8f2){_0x374928=_0x374928-0xdb;let _0x2212fc=_0x1386a4[_0x374928];return _0x2212fc;},a19_0x3749(_0x1ab279,_0x3bb0a0);}var __createBinding=this&&this['__createBinding']||(Object[a19_0x301fbc(0x130)]?function(_0x39f1a0,_0xb37886,_0x1cd855,_0x392646){const _0x37243e=a19_0x301fbc;if(_0x392646===undefined)_0x392646=_0x1cd855;var _0x55218d=Object[_0x37243e(0x116)](_0xb37886,_0x1cd855);(!_0x55218d||(_0x37243e(0x118)in _0x55218d?!_0xb37886[_0x37243e(0xed)]:_0x55218d['writable']||_0x55218d[_0x37243e(0xfb)]))&&(_0x55218d={'enumerable':!![],'get':function(){return _0xb37886[_0x1cd855];}}),Object[_0x37243e(0x123)](_0x39f1a0,_0x392646,_0x55218d);}:function(_0x1d18f3,_0x353e20,_0x378ecb,_0xf64b98){if(_0xf64b98===undefined)_0xf64b98=_0x378ecb;_0x1d18f3[_0xf64b98]=_0x353e20[_0x378ecb];}),__setModuleDefault=this&&this[a19_0x301fbc(0xe3)]||(Object['create']?function(_0x701571,_0x67ad95){Object['defineProperty'](_0x701571,'default',{'enumerable':!![],'value':_0x67ad95});}:function(_0xb24160,_0x5c5b10){const _0x376acc=a19_0x301fbc;_0xb24160[_0x376acc(0x120)]=_0x5c5b10;}),__importStar=this&&this[a19_0x301fbc(0xdb)]||(function(){var _0x38b9cb=function(_0x2fae47){return _0x38b9cb=Object['getOwnPropertyNames']||function(_0x4f9c53){const _0x446a2a=a19_0x3749;var _0x973b65=[];for(var _0x4a73d1 in _0x4f9c53)if(Object[_0x446a2a(0xe9)]['hasOwnProperty']['call'](_0x4f9c53,_0x4a73d1))_0x973b65[_0x973b65['length']]=_0x4a73d1;return _0x973b65;},_0x38b9cb(_0x2fae47);};return function(_0x372d5b){const _0x9ac2f6=a19_0x3749;if(_0x372d5b&&_0x372d5b['__esModule'])return _0x372d5b;var _0x1aae1a={};if(_0x372d5b!=null){for(var _0x35e36f=_0x38b9cb(_0x372d5b),_0xb54b98=0x0;_0xb54b98<_0x35e36f[_0x9ac2f6(0x131)];_0xb54b98++)if(_0x35e36f[_0xb54b98]!==_0x9ac2f6(0x120))__createBinding(_0x1aae1a,_0x372d5b,_0x35e36f[_0xb54b98]);}return __setModuleDefault(_0x1aae1a,_0x372d5b),_0x1aae1a;};}());Object[a19_0x301fbc(0x123)](exports,a19_0x301fbc(0xed),{'value':!![]});const express_1=require(a19_0x301fbc(0x136)),adminController_1=require(a19_0x301fbc(0x124)),validation_1=require(a19_0x301fbc(0x101)),auth_1=require(a19_0x301fbc(0xf6)),loggerService_1=require(a19_0x301fbc(0x104)),coinToPayStatusService_1=require(a19_0x301fbc(0x12d)),domainMonitoringService_1=require(a19_0x301fbc(0xe7)),router=(0x0,express_1[a19_0x301fbc(0xf1)])(),adminController=new adminController_1['AdminController']();router[a19_0x301fbc(0x138)](auth_1['authenticateToken'],auth_1[a19_0x301fbc(0xfc)]),router[a19_0x301fbc(0x118)](a19_0x301fbc(0x10a),adminController[a19_0x301fbc(0xeb)]),router['get'](a19_0x301fbc(0x111),adminController[a19_0x301fbc(0x106)]),router[a19_0x301fbc(0x118)](a19_0x301fbc(0x127),adminController['getMerchantStatistics']),router[a19_0x301fbc(0x118)]('/payout/stats',adminController[a19_0x301fbc(0x12f)]),router[a19_0x301fbc(0x118)](a19_0x301fbc(0x114),adminController['getMerchantsAwaitingPayout']),router['post'](a19_0x301fbc(0x142),(0x0,validation_1[a19_0x301fbc(0x107)])(validation_1[a19_0x301fbc(0xf5)]),adminController[a19_0x301fbc(0x133)]),router[a19_0x301fbc(0x118)](a19_0x301fbc(0x129),adminController['getPayouts']),router['get']('/payouts/:id',adminController['getPayoutById']),router[a19_0x301fbc(0x140)](a19_0x301fbc(0xe5),adminController[a19_0x301fbc(0x10f)]),router['get']('/payments',adminController[a19_0x301fbc(0xec)]),router[a19_0x301fbc(0x118)]('/payments/:id',adminController[a19_0x301fbc(0x102)]),router[a19_0x301fbc(0x11a)](a19_0x301fbc(0x113),adminController[a19_0x301fbc(0x126)]),router[a19_0x301fbc(0x11a)](a19_0x301fbc(0xf4),(0x0,validation_1['validate'])(validation_1['updateCustomerDataSchema']),adminController[a19_0x301fbc(0x11b)]),router[a19_0x301fbc(0x118)](a19_0x301fbc(0x13b),adminController['getUsers']),router[a19_0x301fbc(0x118)](a19_0x301fbc(0xff),adminController['getUserById']),router[a19_0x301fbc(0x109)](a19_0x301fbc(0x13b),(0x0,validation_1['validate'])(validation_1[a19_0x301fbc(0x12b)]),adminController['createUser']),router[a19_0x301fbc(0x11a)]('/users/:id',(0x0,validation_1['validate'])(validation_1[a19_0x301fbc(0x137)]),adminController[a19_0x301fbc(0xfe)]),router[a19_0x301fbc(0x140)](a19_0x301fbc(0xff),adminController[a19_0x301fbc(0x112)]),router[a19_0x301fbc(0x109)](a19_0x301fbc(0x11e),adminController['suspendUser']),router[a19_0x301fbc(0x109)]('/users/:id/activate',adminController['activateUser']),router[a19_0x301fbc(0x118)]('/logs/stats',(_0x2644c1,_0x5dea7e)=>{const _0x5e878f=a19_0x301fbc;try{const _0x4edafb=loggerService_1[_0x5e878f(0xf8)][_0x5e878f(0xdc)]();_0x5dea7e[_0x5e878f(0x128)]({'success':!![],'result':_0x4edafb});}catch(_0x10e7d9){_0x5dea7e[_0x5e878f(0x139)](0x1f4)['json']({'success':![],'message':_0x5e878f(0xdd)});}}),router[a19_0x301fbc(0x109)]('/logs/clean',(_0x409988,_0x2538e5)=>{const _0x28e875=a19_0x301fbc;try{const {daysToKeep:daysToKeep=0x1e}=_0x409988[_0x28e875(0x103)];loggerService_1[_0x28e875(0xf8)][_0x28e875(0x11c)](daysToKeep),_0x2538e5[_0x28e875(0x128)]({'success':!![],'message':_0x28e875(0xfd)+daysToKeep+_0x28e875(0x115)});}catch(_0x14f7b8){_0x2538e5[_0x28e875(0x139)](0x1f4)['json']({'success':![],'message':_0x28e875(0xdf)});}}),router[a19_0x301fbc(0x109)]('/cointopay/check/:paymentId',async(_0x5880b0,_0x520b24)=>{const _0x2f49ed=a19_0x301fbc;try{const {paymentId:_0x33d1f7}=_0x5880b0['params'];console[_0x2f49ed(0xf7)]('🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20'+_0x33d1f7),await coinToPayStatusService_1[_0x2f49ed(0xef)][_0x2f49ed(0x10d)](_0x33d1f7),_0x520b24['json']({'success':!![],'message':'CoinToPay\x20payment\x20status\x20checked\x20successfully'});}catch(_0x2a3c47){console[_0x2f49ed(0xf0)](_0x2f49ed(0x12a)+_0x5880b0[_0x2f49ed(0x117)]['paymentId']+':',_0x2a3c47),_0x520b24['status'](0x1f4)['json']({'success':![],'message':_0x2a3c47 instanceof Error?_0x2a3c47[_0x2f49ed(0x100)]:_0x2f49ed(0x134)});}}),router['get']('/cointopay/stats',(_0x32c21a,_0x34874e)=>{const _0xee34d=a19_0x301fbc;try{const _0x4514bc=coinToPayStatusService_1['coinToPayStatusService'][_0xee34d(0xea)]();_0x34874e[_0xee34d(0x128)]({'success':!![],'result':{..._0x4514bc,'description':_0xee34d(0x11d),'statusMapping':{'Paid':'PAID','Awaiting\x20Fiat':_0xee34d(0xf9),'waiting':'PENDING','expired':_0xee34d(0x141),'failed':_0xee34d(0xee)},'autoExpiryNote':_0xee34d(0xe2)+_0x4514bc[_0xee34d(0xe6)]+'\x20days\x20if\x20not\x20paid','individualTimersNote':'Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly'}});}catch(_0x4cebe8){_0x34874e['status'](0x1f4)[_0xee34d(0x128)]({'success':![],'message':_0xee34d(0x13a)});}}),router[a19_0x301fbc(0x118)](a19_0x301fbc(0x13d),async(_0x1f6d9a,_0x52eb64)=>{const _0x3a116f=a19_0x301fbc;try{const {paymentId:_0x5f43b9}=_0x1f6d9a[_0x3a116f(0x117)],_0x1bfb42=coinToPayStatusService_1[_0x3a116f(0xef)][_0x3a116f(0x135)](_0x5f43b9),_0x26c8ca=(await Promise['resolve']()['then'](()=>__importStar(require('../config/database'))))[_0x3a116f(0x120)],_0x1ad148=await _0x26c8ca['payment']['findUnique']({'where':{'id':_0x5f43b9},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x1ad148)return _0x52eb64[_0x3a116f(0x139)](0x194)[_0x3a116f(0x128)]({'success':![],'message':_0x3a116f(0xde)});_0x52eb64[_0x3a116f(0x128)]({'success':!![],'result':{'payment':{'id':_0x1ad148['id'],'gateway':_0x1ad148[_0x3a116f(0x110)],'gatewayPaymentId':_0x1ad148[_0x3a116f(0x13f)],'status':_0x1ad148[_0x3a116f(0x139)],'amount':_0x1ad148[_0x3a116f(0x121)],'currency':_0x1ad148[_0x3a116f(0xe0)],'createdAt':_0x1ad148['createdAt'],'updatedAt':_0x1ad148[_0x3a116f(0xf3)],'shop':_0x1ad148['shop']},'timers':_0x1bfb42,'isCoinToPay':_0x1ad148['gateway']==='cointopay','ageInMinutes':Math[_0x3a116f(0x132)]((Date[_0x3a116f(0x10b)]()-_0x1ad148['createdAt']['getTime']())/(0x3e8*0x3c))}});}catch(_0x26fa9f){_0x52eb64['status'](0x1f4)['json']({'success':![],'message':_0x26fa9f instanceof Error?_0x26fa9f[_0x3a116f(0x100)]:'Failed\x20to\x20get\x20payment\x20information'});}}),router['get'](a19_0x301fbc(0x12e),(_0x1337c0,_0x3d4385)=>{const _0x38fce9=a19_0x301fbc;try{const _0x17c07d=domainMonitoringService_1[_0x38fce9(0x105)][_0x38fce9(0x10c)]();_0x3d4385['json']({'success':!![],'result':{..._0x17c07d,'description':'Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','behavior':_0x38fce9(0x125),'encoding':'Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs'}});}catch(_0x2d387d){_0x3d4385[_0x38fce9(0x139)](0x1f4)[_0x38fce9(0x128)]({'success':![],'message':_0x38fce9(0x13c)});}}),router[a19_0x301fbc(0x109)](a19_0x301fbc(0x12c),async(_0x5576c2,_0x12e237)=>{const _0x31bb72=a19_0x301fbc;try{const _0x522d60=await domainMonitoringService_1[_0x31bb72(0x105)][_0x31bb72(0x11f)]();_0x12e237[_0x31bb72(0x128)]({'success':!![],'result':{'domainAvailable':_0x522d60,'message':_0x522d60?'Domain\x20is\x20responding\x20correctly':'Domain\x20check\x20failed','timestamp':new Date()[_0x31bb72(0x13e)]()}});}catch(_0x1144b0){_0x12e237['status'](0x1f4)['json']({'success':![],'message':_0x1144b0 instanceof Error?_0x1144b0[_0x31bb72(0x100)]:'Failed\x20to\x20perform\x20manual\x20domain\x20check'});}}),exports[a19_0x301fbc(0x120)]=router;function a19_0x1386(){const _0xf32ab7=['length','floor','createPayout','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','getPaymentTimerInfo','express','updateUserSchema','use','status','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','/users','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','/cointopay/payment/:paymentId','toISOString','gatewayPaymentId','delete','EXPIRED','/payout','__importStar','getLogStats','Failed\x20to\x20get\x20log\x20statistics','Payment\x20not\x20found','Failed\x20to\x20clean\x20old\x20logs','currency','1655745vnRgJv','Payments\x20automatically\x20expire\x20after\x20','__setModuleDefault','317784oFCCHz','/payouts/:id','expiryDays','../services/domainMonitoringService','16506WSbowd','prototype','getServiceStats','checkAuth','getPayments','__esModule','FAILED','coinToPayStatusService','error','Router','3232NlCvwc','updatedAt','/payments/:id/customer','createPayoutSchema','../middleware/auth','log','loggerService','PENDING','1001900BisDyW','configurable','requireAdmin','Old\x20logs\x20cleaned\x20(kept\x20last\x20','updateUser','/users/:id','message','../middleware/validation','getPaymentById','body','../services/loggerService','domainMonitoringService','getStatistics','validate','1427991DtQnye','post','/auth','now','getMonitoringStats','checkPaymentById','96626AgJkZF','deletePayout','gateway','/statistics','deleteUser','/payments/:id','/payout/merchants','\x20days)','getOwnPropertyDescriptor','params','get','2keNgIX','put','updateCustomerData','cleanOldLogs','CoinToPay\x20automatic\x20status\x20checking\x20service','/users/:id/suspend','manualCheck','default','amount','2590910VnPZdB','defineProperty','../controllers/adminController','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','updatePayment','/merchant-statistics','json','/payouts','❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','createUserSchema','/domain-monitoring/check','../services/coinToPayStatusService','/domain-monitoring/stats','getPayoutStats','create'];a19_0x1386=function(){return _0xf32ab7;};return a19_0x1386();}