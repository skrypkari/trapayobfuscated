'use strict';const a19_0x437112=a19_0x2add;(function(_0x1f9f66,_0x2b4131){const _0x25ce4d=a19_0x2add,_0x5e8013=_0x1f9f66();while(!![]){try{const _0x34df79=parseInt(_0x25ce4d(0x1d8))/0x1*(parseInt(_0x25ce4d(0x18d))/0x2)+-parseInt(_0x25ce4d(0x177))/0x3+-parseInt(_0x25ce4d(0x1bf))/0x4+parseInt(_0x25ce4d(0x1e9))/0x5*(parseInt(_0x25ce4d(0x1b0))/0x6)+-parseInt(_0x25ce4d(0x1d9))/0x7*(-parseInt(_0x25ce4d(0x19a))/0x8)+-parseInt(_0x25ce4d(0x187))/0x9*(-parseInt(_0x25ce4d(0x180))/0xa)+-parseInt(_0x25ce4d(0x1dd))/0xb;if(_0x34df79===_0x2b4131)break;else _0x5e8013['push'](_0x5e8013['shift']());}catch(_0x106786){_0x5e8013['push'](_0x5e8013['shift']());}}}(a19_0xd3f8,0x69e6a));var __createBinding=this&&this[a19_0x437112(0x17a)]||(Object[a19_0x437112(0x1b1)]?function(_0x4ce22d,_0x1f88f3,_0x1a2652,_0x5ac514){const _0x31ffac=a19_0x437112;if(_0x5ac514===undefined)_0x5ac514=_0x1a2652;var _0x5309a6=Object['getOwnPropertyDescriptor'](_0x1f88f3,_0x1a2652);(!_0x5309a6||(_0x31ffac(0x1db)in _0x5309a6?!_0x1f88f3[_0x31ffac(0x1ad)]:_0x5309a6[_0x31ffac(0x1d1)]||_0x5309a6[_0x31ffac(0x1bd)]))&&(_0x5309a6={'enumerable':!![],'get':function(){return _0x1f88f3[_0x1a2652];}}),Object['defineProperty'](_0x4ce22d,_0x5ac514,_0x5309a6);}:function(_0x1946c2,_0x1d2412,_0x5d9e81,_0x3b8eff){if(_0x3b8eff===undefined)_0x3b8eff=_0x5d9e81;_0x1946c2[_0x3b8eff]=_0x1d2412[_0x5d9e81];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a19_0x437112(0x1b1)]?function(_0x1f7fad,_0x2cb962){const _0x416ff8=a19_0x437112;Object[_0x416ff8(0x179)](_0x1f7fad,_0x416ff8(0x174),{'enumerable':!![],'value':_0x2cb962});}:function(_0x11aafc,_0x3684c4){const _0xf5249e=a19_0x437112;_0x11aafc[_0xf5249e(0x174)]=_0x3684c4;}),__importStar=this&&this[a19_0x437112(0x1ba)]||(function(){var _0x857c2c=function(_0x53ac9f){const _0x207906=a19_0x2add;return _0x857c2c=Object[_0x207906(0x17b)]||function(_0x38b6ab){const _0x1f9981=_0x207906;var _0x3282e3=[];for(var _0x6b111 in _0x38b6ab)if(Object[_0x1f9981(0x1a1)]['hasOwnProperty'][_0x1f9981(0x1d5)](_0x38b6ab,_0x6b111))_0x3282e3[_0x3282e3[_0x1f9981(0x199)]]=_0x6b111;return _0x3282e3;},_0x857c2c(_0x53ac9f);};return function(_0x2ed1a2){const _0x2907c0=a19_0x2add;if(_0x2ed1a2&&_0x2ed1a2[_0x2907c0(0x1ad)])return _0x2ed1a2;var _0x139c86={};if(_0x2ed1a2!=null){for(var _0xa19200=_0x857c2c(_0x2ed1a2),_0x19695f=0x0;_0x19695f<_0xa19200['length'];_0x19695f++)if(_0xa19200[_0x19695f]!==_0x2907c0(0x174))__createBinding(_0x139c86,_0x2ed1a2,_0xa19200[_0x19695f]);}return __setModuleDefault(_0x139c86,_0x2ed1a2),_0x139c86;};}());Object[a19_0x437112(0x179)](exports,a19_0x437112(0x1ad),{'value':!![]});function a19_0x2add(_0x1576bc,_0x578986){const _0xd3f85=a19_0xd3f8();return a19_0x2add=function(_0x2add06,_0x46f9b9){_0x2add06=_0x2add06-0x170;let _0x2be846=_0xd3f85[_0x2add06];return _0x2be846;},a19_0x2add(_0x1576bc,_0x578986);}function a19_0xd3f8(){const _0x1dc957=['/cointopay/stats','PENDING','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','error','__importStar','express','EXPIRED','configurable','/domain-monitoring/stats','3393912ccamqL','updateUserSchema','Domain\x20check\x20failed','/users/:id/activate','❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','createdAt','Failed\x20to\x20get\x20log\x20statistics','getPayoutStats','Failed\x20to\x20clean\x20old\x20logs','createPayoutSchema','floor','params','post','Old\x20logs\x20cleaned\x20(kept\x20last\x20','domainMonitoringService','/payments/:id/customer','../services/domainMonitoringService','../middleware/auth','writable','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','/payments/:id','getUsers','call','PAID','/domain-monitoring/check','573UxsWdy','35gOwKbR','toISOString','get','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','796983JwcjrW','\x20days\x20if\x20not\x20paid','getPayoutById','🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','updatedAt','use','resolve','CoinToPay\x20automatic\x20status\x20checking\x20service','put','amount','loggerService','message','56775MEXIhT','findUnique','/payout/stats','expiryDays','../services/loggerService','default','authenticateToken','/auth','124968qFiOBe','getMerchantStatistics','defineProperty','__createBinding','getOwnPropertyNames','paymentId','/users/:id','updatePayment','validate','306110vTsByI','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','delete','../middleware/validation','getPaymentById','getMonitoringStats','updateUser','9YKzNGn','getPayouts','Payment\x20not\x20found','AdminController','getStatistics','cointopay','2564RbmIvy','/payments','/statistics','status','payment','log','updateCustomerData','/payouts/:id','getMerchantsAwaitingPayout','/cointopay/check/:paymentId','manualCheck','requireAdmin','length','482984aBNnNK','createPayout','json','coinToPayStatusService','body','/users','now','prototype','shop','Failed\x20to\x20get\x20payment\x20information','currency','/payout','Domain\x20is\x20responding\x20correctly','getPaymentTimerInfo','/logs/stats','/payout/merchants','getPayments','\x20days)','Payments\x20automatically\x20expire\x20after\x20','__esModule','gateway','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','174kczgmn','create','/payouts','checkAuth','/logs/clean','/merchant-statistics'];a19_0xd3f8=function(){return _0x1dc957;};return a19_0xd3f8();}const express_1=require(a19_0x437112(0x1bb)),adminController_1=require('../controllers/adminController'),validation_1=require(a19_0x437112(0x183)),auth_1=require(a19_0x437112(0x1d0)),loggerService_1=require(a19_0x437112(0x173)),coinToPayStatusService_1=require('../services/coinToPayStatusService'),domainMonitoringService_1=require(a19_0x437112(0x1cf)),router=(0x0,express_1['Router'])(),adminController=new adminController_1[(a19_0x437112(0x18a))]();router[a19_0x437112(0x1e2)](auth_1[a19_0x437112(0x175)],auth_1[a19_0x437112(0x198)]),router[a19_0x437112(0x1db)](a19_0x437112(0x176),adminController[a19_0x437112(0x1b3)]),router[a19_0x437112(0x1db)](a19_0x437112(0x18f),adminController[a19_0x437112(0x18b)]),router[a19_0x437112(0x1db)](a19_0x437112(0x1b5),adminController[a19_0x437112(0x178)]),router[a19_0x437112(0x1db)](a19_0x437112(0x171),adminController[a19_0x437112(0x1c6)]),router[a19_0x437112(0x1db)](a19_0x437112(0x1a9),adminController[a19_0x437112(0x195)]),router[a19_0x437112(0x1cb)](a19_0x437112(0x1a5),(0x0,validation_1[a19_0x437112(0x17f)])(validation_1[a19_0x437112(0x1c8)]),adminController[a19_0x437112(0x19b)]),router[a19_0x437112(0x1db)](a19_0x437112(0x1b2),adminController[a19_0x437112(0x188)]),router['get'](a19_0x437112(0x194),adminController[a19_0x437112(0x1df)]),router[a19_0x437112(0x182)]('/payouts/:id',adminController['deletePayout']),router[a19_0x437112(0x1db)](a19_0x437112(0x18e),adminController[a19_0x437112(0x1aa)]),router[a19_0x437112(0x1db)](a19_0x437112(0x1d3),adminController[a19_0x437112(0x184)]),router[a19_0x437112(0x1e5)]('/payments/:id',adminController[a19_0x437112(0x17e)]),router[a19_0x437112(0x1e5)](a19_0x437112(0x1ce),(0x0,validation_1[a19_0x437112(0x17f)])(validation_1['updateCustomerDataSchema']),adminController[a19_0x437112(0x193)]),router[a19_0x437112(0x1db)](a19_0x437112(0x19f),adminController[a19_0x437112(0x1d4)]),router[a19_0x437112(0x1db)](a19_0x437112(0x17d),adminController['getUserById']),router[a19_0x437112(0x1cb)](a19_0x437112(0x19f),(0x0,validation_1[a19_0x437112(0x17f)])(validation_1['createUserSchema']),adminController['createUser']),router[a19_0x437112(0x1e5)](a19_0x437112(0x17d),(0x0,validation_1[a19_0x437112(0x17f)])(validation_1[a19_0x437112(0x1c0)]),adminController[a19_0x437112(0x186)]),router[a19_0x437112(0x182)](a19_0x437112(0x17d),adminController['deleteUser']),router[a19_0x437112(0x1cb)]('/users/:id/suspend',adminController['suspendUser']),router[a19_0x437112(0x1cb)](a19_0x437112(0x1c2),adminController['activateUser']),router[a19_0x437112(0x1db)](a19_0x437112(0x1a8),(_0x499687,_0x4c960a)=>{const _0x122343=a19_0x437112;try{const _0x5065a1=loggerService_1[_0x122343(0x1e7)]['getLogStats']();_0x4c960a['json']({'success':!![],'result':_0x5065a1});}catch(_0x3da560){_0x4c960a[_0x122343(0x190)](0x1f4)['json']({'success':![],'message':_0x122343(0x1c5)});}}),router['post'](a19_0x437112(0x1b4),(_0x4616c2,_0x40d247)=>{const _0x4b5ab4=a19_0x437112;try{const {daysToKeep:daysToKeep=0x1e}=_0x4616c2[_0x4b5ab4(0x19e)];loggerService_1[_0x4b5ab4(0x1e7)]['cleanOldLogs'](daysToKeep),_0x40d247['json']({'success':!![],'message':_0x4b5ab4(0x1cc)+daysToKeep+_0x4b5ab4(0x1ab)});}catch(_0x8e721a){_0x40d247[_0x4b5ab4(0x190)](0x1f4)[_0x4b5ab4(0x19c)]({'success':![],'message':_0x4b5ab4(0x1c7)});}}),router[a19_0x437112(0x1cb)](a19_0x437112(0x196),async(_0x46c3f8,_0x5f297b)=>{const _0x17183f=a19_0x437112;try{const {paymentId:_0x33e429}=_0x46c3f8[_0x17183f(0x1ca)];console[_0x17183f(0x192)](_0x17183f(0x1e0)+_0x33e429),await coinToPayStatusService_1[_0x17183f(0x19d)]['checkPaymentById'](_0x33e429),_0x5f297b['json']({'success':!![],'message':'CoinToPay\x20payment\x20status\x20checked\x20successfully'});}catch(_0x3eb51a){console[_0x17183f(0x1b9)](_0x17183f(0x1c3)+_0x46c3f8[_0x17183f(0x1ca)][_0x17183f(0x17c)]+':',_0x3eb51a),_0x5f297b[_0x17183f(0x190)](0x1f4)[_0x17183f(0x19c)]({'success':![],'message':_0x3eb51a instanceof Error?_0x3eb51a[_0x17183f(0x1e8)]:_0x17183f(0x1d2)});}}),router['get'](a19_0x437112(0x1b6),(_0x1154bd,_0x373672)=>{const _0x3f6d9a=a19_0x437112;try{const _0x4308ea=coinToPayStatusService_1['coinToPayStatusService']['getServiceStats']();_0x373672[_0x3f6d9a(0x19c)]({'success':!![],'result':{..._0x4308ea,'description':_0x3f6d9a(0x1e4),'statusMapping':{'Paid':_0x3f6d9a(0x1d6),'Awaiting\x20Fiat':_0x3f6d9a(0x1b7),'waiting':'PENDING','expired':_0x3f6d9a(0x1bc),'failed':'FAILED'},'autoExpiryNote':_0x3f6d9a(0x1ac)+_0x4308ea[_0x3f6d9a(0x172)]+_0x3f6d9a(0x1de),'individualTimersNote':_0x3f6d9a(0x181)}});}catch(_0x14cdab){_0x373672[_0x3f6d9a(0x190)](0x1f4)[_0x3f6d9a(0x19c)]({'success':![],'message':_0x3f6d9a(0x1af)});}}),router[a19_0x437112(0x1db)]('/cointopay/payment/:paymentId',async(_0x521afb,_0x27f671)=>{const _0x5d5997=a19_0x437112;try{const {paymentId:_0x45fde9}=_0x521afb['params'],_0x2364a4=coinToPayStatusService_1[_0x5d5997(0x19d)][_0x5d5997(0x1a7)](_0x45fde9),_0x35d7a3=(await Promise[_0x5d5997(0x1e3)]()['then'](()=>__importStar(require('../config/database'))))[_0x5d5997(0x174)],_0x59380c=await _0x35d7a3[_0x5d5997(0x191)][_0x5d5997(0x170)]({'where':{'id':_0x45fde9},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x59380c)return _0x27f671[_0x5d5997(0x190)](0x194)[_0x5d5997(0x19c)]({'success':![],'message':_0x5d5997(0x189)});_0x27f671[_0x5d5997(0x19c)]({'success':!![],'result':{'payment':{'id':_0x59380c['id'],'gateway':_0x59380c[_0x5d5997(0x1ae)],'gatewayPaymentId':_0x59380c['gatewayPaymentId'],'status':_0x59380c[_0x5d5997(0x190)],'amount':_0x59380c[_0x5d5997(0x1e6)],'currency':_0x59380c[_0x5d5997(0x1a4)],'createdAt':_0x59380c[_0x5d5997(0x1c4)],'updatedAt':_0x59380c[_0x5d5997(0x1e1)],'shop':_0x59380c[_0x5d5997(0x1a2)]},'timers':_0x2364a4,'isCoinToPay':_0x59380c[_0x5d5997(0x1ae)]===_0x5d5997(0x18c),'ageInMinutes':Math[_0x5d5997(0x1c9)]((Date[_0x5d5997(0x1a0)]()-_0x59380c[_0x5d5997(0x1c4)]['getTime']())/(0x3e8*0x3c))}});}catch(_0x38f49a){_0x27f671[_0x5d5997(0x190)](0x1f4)['json']({'success':![],'message':_0x38f49a instanceof Error?_0x38f49a[_0x5d5997(0x1e8)]:_0x5d5997(0x1a3)});}}),router[a19_0x437112(0x1db)](a19_0x437112(0x1be),(_0x4ba436,_0x1bfb7b)=>{const _0x10499d=a19_0x437112;try{const _0x491118=domainMonitoringService_1[_0x10499d(0x1cd)][_0x10499d(0x185)]();_0x1bfb7b[_0x10499d(0x19c)]({'success':!![],'result':{..._0x491118,'description':_0x10499d(0x1b8),'behavior':_0x10499d(0x1dc),'encoding':'Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs'}});}catch(_0x188ac8){_0x1bfb7b['status'](0x1f4)['json']({'success':![],'message':'Failed\x20to\x20get\x20domain\x20monitoring\x20statistics'});}}),router[a19_0x437112(0x1cb)](a19_0x437112(0x1d7),async(_0x3c378c,_0x4de3da)=>{const _0x57e35b=a19_0x437112;try{const _0x12598d=await domainMonitoringService_1[_0x57e35b(0x1cd)][_0x57e35b(0x197)]();_0x4de3da[_0x57e35b(0x19c)]({'success':!![],'result':{'domainAvailable':_0x12598d,'message':_0x12598d?_0x57e35b(0x1a6):_0x57e35b(0x1c1),'timestamp':new Date()[_0x57e35b(0x1da)]()}});}catch(_0x1c9e53){_0x4de3da[_0x57e35b(0x190)](0x1f4)['json']({'success':![],'message':_0x1c9e53 instanceof Error?_0x1c9e53[_0x57e35b(0x1e8)]:'Failed\x20to\x20perform\x20manual\x20domain\x20check'});}}),exports['default']=router;