'use strict';const a19_0x23598e=a19_0x22cf;(function(_0x5b9cfd,_0x304986){const _0x5da83b=a19_0x22cf,_0x4be081=_0x5b9cfd();while(!![]){try{const _0x22f05f=parseInt(_0x5da83b(0x1ba))/0x1+parseInt(_0x5da83b(0x199))/0x2*(parseInt(_0x5da83b(0x1a2))/0x3)+-parseInt(_0x5da83b(0x17f))/0x4*(-parseInt(_0x5da83b(0x1dc))/0x5)+parseInt(_0x5da83b(0x1bd))/0x6+-parseInt(_0x5da83b(0x17b))/0x7*(parseInt(_0x5da83b(0x18a))/0x8)+-parseInt(_0x5da83b(0x178))/0x9*(parseInt(_0x5da83b(0x1c4))/0xa)+-parseInt(_0x5da83b(0x1ab))/0xb;if(_0x22f05f===_0x304986)break;else _0x4be081['push'](_0x4be081['shift']());}catch(_0x22bf41){_0x4be081['push'](_0x4be081['shift']());}}}(a19_0x1f91,0xeb354));function a19_0x1f91(){const _0x182762=['Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','activateUser','Router','getMerchantsSelection','defineProperty','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','955904wTwECj','/domain-monitoring/check','Failed\x20to\x20get\x20log\x20statistics','10558206IgcGFY','hasOwnProperty','/payments/:id','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','/statistics','message','status','1916990wJVBQz','/payments','checkPaymentById','createPayoutSchema','checkAuth','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','deletePayout','/users','express','manualCheck','coinToPayStatusService','delete','../config/database','create','getPayoutStats','createUser','default','getPaymentTimerInfo','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','updatePayment','CoinToPay\x20automatic\x20status\x20checking\x20service','AdminController','log','loggerService','5HXpsLC','length','getUsers','../services/domainMonitoringService','Failed\x20to\x20clean\x20old\x20logs','getLogStats','findUnique','put','suspendUser','cointopay','cleanOldLogs','updateCustomerDataSchema','error','requireAdmin','/merchants/selection','getMerchantsAwaitingPayout','/payout/stats','/logs/stats','45zYKASi','__createBinding','/payments/:id/customer','49RrEQzR','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','json','updatedAt','2320100vgMKdP','floor','__esModule','getServiceStats','../middleware/auth','updateUser','getPayments','prototype','then','configurable','getUserById','537944imkOPR','createdAt','params','/domain-monitoring/stats','../services/loggerService','/users/:id/activate','authenticateToken','domainMonitoringService','validate','currency','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','shop','../services/coinToPayStatusService','EXPIRED','get','932918SnQmqC','writable','/users/:id','now','__importStar','/payout/merchants','createUserSchema','__setModuleDefault','/auth','9qAdIXf','Old\x20logs\x20cleaned\x20(kept\x20last\x20','use','resolve','/payouts','/logs/clean','getOwnPropertyDescriptor','PAID','getTime','25326389HWjGmv','Failed\x20to\x20get\x20payment\x20information','gateway','payment','/merchant-statistics','post','updateUserSchema','amount','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20'];a19_0x1f91=function(){return _0x182762;};return a19_0x1f91();}var __createBinding=this&&this[a19_0x23598e(0x179)]||(Object[a19_0x23598e(0x1d1)]?function(_0x290f06,_0x1ae4ec,_0x58cd3b,_0x39e3b2){const _0x35f456=a19_0x23598e;if(_0x39e3b2===undefined)_0x39e3b2=_0x58cd3b;var _0x556f17=Object[_0x35f456(0x1a8)](_0x1ae4ec,_0x58cd3b);(!_0x556f17||(_0x35f456(0x198)in _0x556f17?!_0x1ae4ec[_0x35f456(0x181)]:_0x556f17[_0x35f456(0x19a)]||_0x556f17[_0x35f456(0x188)]))&&(_0x556f17={'enumerable':!![],'get':function(){return _0x1ae4ec[_0x58cd3b];}}),Object[_0x35f456(0x1b8)](_0x290f06,_0x39e3b2,_0x556f17);}:function(_0x5b8b55,_0x2588a0,_0x217ff8,_0x331b2b){if(_0x331b2b===undefined)_0x331b2b=_0x217ff8;_0x5b8b55[_0x331b2b]=_0x2588a0[_0x217ff8];}),__setModuleDefault=this&&this[a19_0x23598e(0x1a0)]||(Object[a19_0x23598e(0x1d1)]?function(_0x1d716f,_0x4f048e){const _0x7099e9=a19_0x23598e;Object[_0x7099e9(0x1b8)](_0x1d716f,_0x7099e9(0x1d4),{'enumerable':!![],'value':_0x4f048e});}:function(_0x2a018b,_0x53e3a8){const _0x2ef36d=a19_0x23598e;_0x2a018b[_0x2ef36d(0x1d4)]=_0x53e3a8;}),__importStar=this&&this[a19_0x23598e(0x19d)]||(function(){var _0x16c0ad=function(_0x41494a){return _0x16c0ad=Object['getOwnPropertyNames']||function(_0x2b5e7f){const _0x129450=a19_0x22cf;var _0x4ca546=[];for(var _0x419cbf in _0x2b5e7f)if(Object[_0x129450(0x186)][_0x129450(0x1be)]['call'](_0x2b5e7f,_0x419cbf))_0x4ca546[_0x4ca546[_0x129450(0x167)]]=_0x419cbf;return _0x4ca546;},_0x16c0ad(_0x41494a);};return function(_0x612741){const _0x27a181=a19_0x22cf;if(_0x612741&&_0x612741[_0x27a181(0x181)])return _0x612741;var _0x437f27={};if(_0x612741!=null){for(var _0x398f24=_0x16c0ad(_0x612741),_0x3e3169=0x0;_0x3e3169<_0x398f24[_0x27a181(0x167)];_0x3e3169++)if(_0x398f24[_0x3e3169]!==_0x27a181(0x1d4))__createBinding(_0x437f27,_0x612741,_0x398f24[_0x3e3169]);}return __setModuleDefault(_0x437f27,_0x612741),_0x437f27;};}());function a19_0x22cf(_0x1d2d02,_0x47a491){const _0x1f913f=a19_0x1f91();return a19_0x22cf=function(_0x22cf73,_0x35c236){_0x22cf73=_0x22cf73-0x167;let _0x3a076a=_0x1f913f[_0x22cf73];return _0x3a076a;},a19_0x22cf(_0x1d2d02,_0x47a491);}Object[a19_0x23598e(0x1b8)](exports,a19_0x23598e(0x181),{'value':!![]});const express_1=require(a19_0x23598e(0x1cc)),adminController_1=require('../controllers/adminController'),validation_1=require('../middleware/validation'),auth_1=require(a19_0x23598e(0x183)),loggerService_1=require(a19_0x23598e(0x18e)),coinToPayStatusService_1=require(a19_0x23598e(0x196)),domainMonitoringService_1=require(a19_0x23598e(0x169)),router=(0x0,express_1[a19_0x23598e(0x1b6)])(),adminController=new adminController_1[(a19_0x23598e(0x1d9))]();router[a19_0x23598e(0x1a4)](auth_1[a19_0x23598e(0x190)],auth_1[a19_0x23598e(0x173)]),router['get'](a19_0x23598e(0x1a1),adminController[a19_0x23598e(0x1c8)]),router[a19_0x23598e(0x198)](a19_0x23598e(0x1c1),adminController['getStatistics']),router[a19_0x23598e(0x198)](a19_0x23598e(0x1af),adminController['getMerchantStatistics']),router[a19_0x23598e(0x198)](a19_0x23598e(0x176),adminController[a19_0x23598e(0x1d2)]),router[a19_0x23598e(0x198)](a19_0x23598e(0x19e),adminController[a19_0x23598e(0x175)]),router[a19_0x23598e(0x198)](a19_0x23598e(0x174),adminController[a19_0x23598e(0x1b7)]),router[a19_0x23598e(0x1b0)]('/payout',(0x0,validation_1[a19_0x23598e(0x192)])(validation_1[a19_0x23598e(0x1c7)]),adminController['createPayout']),router[a19_0x23598e(0x198)](a19_0x23598e(0x1a6),adminController['getPayouts']),router[a19_0x23598e(0x198)]('/payouts/:id',adminController['getPayoutById']),router[a19_0x23598e(0x1cf)]('/payouts/:id',adminController[a19_0x23598e(0x1ca)]),router[a19_0x23598e(0x198)](a19_0x23598e(0x1c5),adminController[a19_0x23598e(0x185)]),router['get'](a19_0x23598e(0x1bf),adminController['getPaymentById']),router[a19_0x23598e(0x16d)](a19_0x23598e(0x1bf),adminController[a19_0x23598e(0x1d7)]),router[a19_0x23598e(0x16d)](a19_0x23598e(0x17a),(0x0,validation_1[a19_0x23598e(0x192)])(validation_1[a19_0x23598e(0x171)]),adminController['updateCustomerData']),router[a19_0x23598e(0x198)]('/users',adminController[a19_0x23598e(0x168)]),router[a19_0x23598e(0x198)]('/users/:id',adminController[a19_0x23598e(0x189)]),router[a19_0x23598e(0x1b0)](a19_0x23598e(0x1cb),(0x0,validation_1[a19_0x23598e(0x192)])(validation_1[a19_0x23598e(0x19f)]),adminController[a19_0x23598e(0x1d3)]),router[a19_0x23598e(0x16d)](a19_0x23598e(0x19b),(0x0,validation_1[a19_0x23598e(0x192)])(validation_1[a19_0x23598e(0x1b1)]),adminController[a19_0x23598e(0x184)]),router[a19_0x23598e(0x1cf)](a19_0x23598e(0x19b),adminController['deleteUser']),router[a19_0x23598e(0x1b0)]('/users/:id/suspend',adminController[a19_0x23598e(0x16e)]),router[a19_0x23598e(0x1b0)](a19_0x23598e(0x18f),adminController[a19_0x23598e(0x1b5)]),router['get'](a19_0x23598e(0x177),(_0xa7f00b,_0x2c3553)=>{const _0x139994=a19_0x23598e;try{const _0x3ddaa6=loggerService_1[_0x139994(0x1db)][_0x139994(0x16b)]();_0x2c3553[_0x139994(0x17d)]({'success':!![],'result':_0x3ddaa6});}catch(_0x5d57b8){_0x2c3553[_0x139994(0x1c3)](0x1f4)[_0x139994(0x17d)]({'success':![],'message':_0x139994(0x1bc)});}}),router['post'](a19_0x23598e(0x1a7),(_0x453bcb,_0x41b201)=>{const _0x2f5ef6=a19_0x23598e;try{const {daysToKeep:daysToKeep=0x1e}=_0x453bcb['body'];loggerService_1[_0x2f5ef6(0x1db)][_0x2f5ef6(0x170)](daysToKeep),_0x41b201['json']({'success':!![],'message':_0x2f5ef6(0x1a3)+daysToKeep+'\x20days)'});}catch(_0x196184){_0x41b201['status'](0x1f4)[_0x2f5ef6(0x17d)]({'success':![],'message':_0x2f5ef6(0x16a)});}}),router[a19_0x23598e(0x1b0)]('/cointopay/check/:paymentId',async(_0x397dd0,_0x22cb92)=>{const _0x129393=a19_0x23598e;try{const {paymentId:_0x1d92e4}=_0x397dd0[_0x129393(0x18c)];console[_0x129393(0x1da)](_0x129393(0x1b3)+_0x1d92e4),await coinToPayStatusService_1[_0x129393(0x1ce)][_0x129393(0x1c6)](_0x1d92e4),_0x22cb92[_0x129393(0x17d)]({'success':!![],'message':'CoinToPay\x20payment\x20status\x20checked\x20successfully'});}catch(_0x4452b6){console[_0x129393(0x172)](_0x129393(0x1b9)+_0x397dd0[_0x129393(0x18c)]['paymentId']+':',_0x4452b6),_0x22cb92[_0x129393(0x1c3)](0x1f4)['json']({'success':![],'message':_0x4452b6 instanceof Error?_0x4452b6[_0x129393(0x1c2)]:_0x129393(0x1c9)});}}),router['get']('/cointopay/stats',(_0x1cf337,_0x1bfb4b)=>{const _0x4167f5=a19_0x23598e;try{const _0x544878=coinToPayStatusService_1['coinToPayStatusService'][_0x4167f5(0x182)]();_0x1bfb4b[_0x4167f5(0x17d)]({'success':!![],'result':{..._0x544878,'description':_0x4167f5(0x1d8),'statusMapping':{'Paid':_0x4167f5(0x1a9),'Awaiting\x20Fiat':'PENDING','waiting':'PENDING','expired':_0x4167f5(0x197),'failed':'FAILED'},'autoExpiryNote':'Payments\x20automatically\x20expire\x20after\x20'+_0x544878['expiryDays']+'\x20days\x20if\x20not\x20paid','individualTimersNote':_0x4167f5(0x1d6)}});}catch(_0x410604){_0x1bfb4b[_0x4167f5(0x1c3)](0x1f4)['json']({'success':![],'message':_0x4167f5(0x194)});}}),router[a19_0x23598e(0x198)]('/cointopay/payment/:paymentId',async(_0x15611b,_0x46c802)=>{const _0x3cabc0=a19_0x23598e;try{const {paymentId:_0x36e3f4}=_0x15611b['params'],_0x5a7da5=coinToPayStatusService_1[_0x3cabc0(0x1ce)][_0x3cabc0(0x1d5)](_0x36e3f4),_0x51cf7b=(await Promise[_0x3cabc0(0x1a5)]()[_0x3cabc0(0x187)](()=>__importStar(require(_0x3cabc0(0x1d0)))))[_0x3cabc0(0x1d4)],_0x20c65a=await _0x51cf7b[_0x3cabc0(0x1ae)][_0x3cabc0(0x16c)]({'where':{'id':_0x36e3f4},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x20c65a)return _0x46c802['status'](0x194)[_0x3cabc0(0x17d)]({'success':![],'message':'Payment\x20not\x20found'});_0x46c802['json']({'success':!![],'result':{'payment':{'id':_0x20c65a['id'],'gateway':_0x20c65a[_0x3cabc0(0x1ad)],'gatewayPaymentId':_0x20c65a['gatewayPaymentId'],'status':_0x20c65a['status'],'amount':_0x20c65a[_0x3cabc0(0x1b2)],'currency':_0x20c65a[_0x3cabc0(0x193)],'createdAt':_0x20c65a[_0x3cabc0(0x18b)],'updatedAt':_0x20c65a[_0x3cabc0(0x17e)],'shop':_0x20c65a[_0x3cabc0(0x195)]},'timers':_0x5a7da5,'isCoinToPay':_0x20c65a[_0x3cabc0(0x1ad)]===_0x3cabc0(0x16f),'ageInMinutes':Math[_0x3cabc0(0x180)]((Date[_0x3cabc0(0x19c)]()-_0x20c65a[_0x3cabc0(0x18b)][_0x3cabc0(0x1aa)]())/(0x3e8*0x3c))}});}catch(_0x331a62){_0x46c802[_0x3cabc0(0x1c3)](0x1f4)['json']({'success':![],'message':_0x331a62 instanceof Error?_0x331a62[_0x3cabc0(0x1c2)]:_0x3cabc0(0x1ac)});}}),router[a19_0x23598e(0x198)](a19_0x23598e(0x18d),(_0x6cfb8a,_0x375ebb)=>{const _0x1c99e8=a19_0x23598e;try{const _0xdebca3=domainMonitoringService_1[_0x1c99e8(0x191)]['getMonitoringStats']();_0x375ebb[_0x1c99e8(0x17d)]({'success':!![],'result':{..._0xdebca3,'description':'Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','behavior':_0x1c99e8(0x1b4),'encoding':_0x1c99e8(0x17c)}});}catch(_0x57dcfa){_0x375ebb[_0x1c99e8(0x1c3)](0x1f4)['json']({'success':![],'message':_0x1c99e8(0x1c0)});}}),router[a19_0x23598e(0x1b0)](a19_0x23598e(0x1bb),async(_0x58f1a3,_0x2891ad)=>{const _0x367b96=a19_0x23598e;try{const _0x744be4=await domainMonitoringService_1[_0x367b96(0x191)][_0x367b96(0x1cd)]();_0x2891ad[_0x367b96(0x17d)]({'success':!![],'result':{'domainAvailable':_0x744be4,'message':_0x744be4?'Domain\x20is\x20responding\x20correctly':'Domain\x20check\x20failed','timestamp':new Date()['toISOString']()}});}catch(_0x1eb79f){_0x2891ad['status'](0x1f4)['json']({'success':![],'message':_0x1eb79f instanceof Error?_0x1eb79f['message']:'Failed\x20to\x20perform\x20manual\x20domain\x20check'});}}),exports['default']=router;