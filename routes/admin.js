'use strict';const a19_0x5dee0a=a19_0x248a;(function(_0x1d8024,_0x181853){const _0x225449=a19_0x248a,_0x26e2b0=_0x1d8024();while(!![]){try{const _0xee3cc9=parseInt(_0x225449(0xa7))/0x1+-parseInt(_0x225449(0x113))/0x2+-parseInt(_0x225449(0xcd))/0x3*(-parseInt(_0x225449(0xae))/0x4)+parseInt(_0x225449(0xde))/0x5+-parseInt(_0x225449(0x105))/0x6*(parseInt(_0x225449(0x10b))/0x7)+parseInt(_0x225449(0xab))/0x8+-parseInt(_0x225449(0xa1))/0x9*(-parseInt(_0x225449(0xc1))/0xa);if(_0xee3cc9===_0x181853)break;else _0x26e2b0['push'](_0x26e2b0['shift']());}catch(_0x41131f){_0x26e2b0['push'](_0x26e2b0['shift']());}}}(a19_0x2db8,0x82aff));var __createBinding=this&&this[a19_0x5dee0a(0xaa)]||(Object[a19_0x5dee0a(0xbb)]?function(_0x4ec3d0,_0x8f1468,_0x39c16d,_0x41d625){const _0x10c9c2=a19_0x5dee0a;if(_0x41d625===undefined)_0x41d625=_0x39c16d;var _0x466945=Object[_0x10c9c2(0x10f)](_0x8f1468,_0x39c16d);(!_0x466945||(_0x10c9c2(0xba)in _0x466945?!_0x8f1468[_0x10c9c2(0xbe)]:_0x466945[_0x10c9c2(0x115)]||_0x466945[_0x10c9c2(0xe1)]))&&(_0x466945={'enumerable':!![],'get':function(){return _0x8f1468[_0x39c16d];}}),Object[_0x10c9c2(0xc6)](_0x4ec3d0,_0x41d625,_0x466945);}:function(_0x8a749a,_0x4423aa,_0x128e16,_0x222cad){if(_0x222cad===undefined)_0x222cad=_0x128e16;_0x8a749a[_0x222cad]=_0x4423aa[_0x128e16];}),__setModuleDefault=this&&this[a19_0x5dee0a(0x117)]||(Object[a19_0x5dee0a(0xbb)]?function(_0x4128e0,_0x46861c){const _0x33d5c7=a19_0x5dee0a;Object[_0x33d5c7(0xc6)](_0x4128e0,_0x33d5c7(0x119),{'enumerable':!![],'value':_0x46861c});}:function(_0x32b7b4,_0x441597){const _0x513db1=a19_0x5dee0a;_0x32b7b4[_0x513db1(0x119)]=_0x441597;}),__importStar=this&&this[a19_0x5dee0a(0xf3)]||(function(){var _0x9c04ad=function(_0x297550){return _0x9c04ad=Object['getOwnPropertyNames']||function(_0x7a6bd2){const _0x3f5a66=a19_0x248a;var _0x5e22a6=[];for(var _0x20653f in _0x7a6bd2)if(Object['prototype'][_0x3f5a66(0x111)][_0x3f5a66(0xd2)](_0x7a6bd2,_0x20653f))_0x5e22a6[_0x5e22a6[_0x3f5a66(0xa9)]]=_0x20653f;return _0x5e22a6;},_0x9c04ad(_0x297550);};return function(_0x19c2f8){const _0x2a1588=a19_0x248a;if(_0x19c2f8&&_0x19c2f8[_0x2a1588(0xbe)])return _0x19c2f8;var _0x3f09dc={};if(_0x19c2f8!=null){for(var _0x86f10e=_0x9c04ad(_0x19c2f8),_0x3854fa=0x0;_0x3854fa<_0x86f10e[_0x2a1588(0xa9)];_0x3854fa++)if(_0x86f10e[_0x3854fa]!==_0x2a1588(0x119))__createBinding(_0x3f09dc,_0x19c2f8,_0x86f10e[_0x3854fa]);}return __setModuleDefault(_0x3f09dc,_0x19c2f8),_0x3f09dc;};}());Object[a19_0x5dee0a(0xc6)](exports,'__esModule',{'value':!![]});function a19_0x248a(_0x2200c5,_0x3bc5cd){const _0x2db8ff=a19_0x2db8();return a19_0x248a=function(_0x248a82,_0x5a4173){_0x248a82=_0x248a82-0xa1;let _0x4a8613=_0x2db8ff[_0x248a82];return _0x4a8613;},a19_0x248a(_0x2200c5,_0x3bc5cd);}const express_1=require(a19_0x5dee0a(0x110)),adminController_1=require(a19_0x5dee0a(0x103)),validation_1=require(a19_0x5dee0a(0xe0)),auth_1=require(a19_0x5dee0a(0xff)),loggerService_1=require(a19_0x5dee0a(0xd3)),coinToPayStatusService_1=require(a19_0x5dee0a(0x10d)),domainMonitoringService_1=require(a19_0x5dee0a(0x11c)),router=(0x0,express_1[a19_0x5dee0a(0xa3)])(),adminController=new adminController_1[(a19_0x5dee0a(0xd6))]();function a19_0x2db8(){const _0x31e7e9=['/cointopay/check/:paymentId','CoinToPay\x20payment\x20status\x20checked\x20successfully','gateway','__importStar','getMerchantsAwaitingPayout','/merchants/selection','/payments/:id','put','Failed\x20to\x20clean\x20old\x20logs','❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','toISOString','Failed\x20to\x20get\x20payment\x20information','PENDING','getPayouts','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','../middleware/auth','paymentId','getMerchantsSelection','createUserSchema','../controllers/adminController','getMerchantStatistics','102BgALfI','delete','domainMonitoringService','json','/users','createPayoutSchema','276465MnVutK','getPayments','../services/coinToPayStatusService','post','getOwnPropertyDescriptor','express','hasOwnProperty','message','915834aUXTdh','getUserById','writable','/payouts/:id','__setModuleDefault','activateUser','default','updateCustomerData','log','../services/domainMonitoringService','Failed\x20to\x20perform\x20manual\x20domain\x20check','162uxNGKz','getPaymentTimerInfo','Router','status','updateUserSchema','/statistics','415828suYHkL','/payments','length','__createBinding','470280gQwlaj','updatedAt','cointopay','776lXdWFI','createdAt','/users/:id/activate','requireAdmin','body','/logs/clean','/users/:id','FAILED','updateCustomerDataSchema','createUser','/payouts','CoinToPay\x20automatic\x20status\x20checking\x20service','get','create','error','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','__esModule','loggerService','authenticateToken','119170uZYVJK','amount','🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','Domain\x20is\x20responding\x20correctly','validate','defineProperty','/payout/merchants','getStatistics','Domain\x20check\x20failed','resolve','/payout','getPayoutById','8430SHTxSb','PAID','deletePayout','findUnique','getTime','call','../services/loggerService','expiryDays','updateUser','AdminController','createPayout','payment','use','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','Payment\x20not\x20found','checkPaymentById','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','2151840NPwfzG','/auth','../middleware/validation','configurable','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','\x20days)','/users/:id/suspend','params','getUsers','/payout/stats','\x20days\x20if\x20not\x20paid','getLogStats','/domain-monitoring/stats','Old\x20logs\x20cleaned\x20(kept\x20last\x20','/payments/:id/customer','coinToPayStatusService','shop'];a19_0x2db8=function(){return _0x31e7e9;};return a19_0x2db8();}router[a19_0x5dee0a(0xd9)](auth_1[a19_0x5dee0a(0xc0)],auth_1[a19_0x5dee0a(0xb1)]),router[a19_0x5dee0a(0xba)](a19_0x5dee0a(0xdf),adminController['checkAuth']),router[a19_0x5dee0a(0xba)](a19_0x5dee0a(0xa6),adminController[a19_0x5dee0a(0xc8)]),router[a19_0x5dee0a(0xba)]('/merchant-statistics',adminController[a19_0x5dee0a(0x104)]),router[a19_0x5dee0a(0xba)](a19_0x5dee0a(0xe8),adminController['getPayoutStats']),router[a19_0x5dee0a(0xba)](a19_0x5dee0a(0xc7),adminController[a19_0x5dee0a(0xf4)]),router[a19_0x5dee0a(0xba)](a19_0x5dee0a(0xf5),adminController[a19_0x5dee0a(0x101)]),router[a19_0x5dee0a(0x10e)](a19_0x5dee0a(0xcb),(0x0,validation_1[a19_0x5dee0a(0xc5)])(validation_1[a19_0x5dee0a(0x10a)]),adminController[a19_0x5dee0a(0xd7)]),router[a19_0x5dee0a(0xba)](a19_0x5dee0a(0xb8),adminController[a19_0x5dee0a(0xfd)]),router[a19_0x5dee0a(0xba)](a19_0x5dee0a(0x116),adminController[a19_0x5dee0a(0xcc)]),router['delete'](a19_0x5dee0a(0x116),adminController[a19_0x5dee0a(0xcf)]),router[a19_0x5dee0a(0xba)](a19_0x5dee0a(0xa8),adminController[a19_0x5dee0a(0x10c)]),router[a19_0x5dee0a(0xba)](a19_0x5dee0a(0xf6),adminController['getPaymentById']),router[a19_0x5dee0a(0xf7)](a19_0x5dee0a(0xf6),adminController['updatePayment']),router[a19_0x5dee0a(0xf7)](a19_0x5dee0a(0xed),(0x0,validation_1['validate'])(validation_1[a19_0x5dee0a(0xb6)]),adminController[a19_0x5dee0a(0x11a)]),router['get'](a19_0x5dee0a(0x109),adminController[a19_0x5dee0a(0xe7)]),router[a19_0x5dee0a(0xba)]('/users/:id',adminController[a19_0x5dee0a(0x114)]),router['post'](a19_0x5dee0a(0x109),(0x0,validation_1[a19_0x5dee0a(0xc5)])(validation_1[a19_0x5dee0a(0x102)]),adminController[a19_0x5dee0a(0xb7)]),router['put'](a19_0x5dee0a(0xb4),(0x0,validation_1[a19_0x5dee0a(0xc5)])(validation_1[a19_0x5dee0a(0xa5)]),adminController[a19_0x5dee0a(0xd5)]),router[a19_0x5dee0a(0x106)]('/users/:id',adminController['deleteUser']),router[a19_0x5dee0a(0x10e)](a19_0x5dee0a(0xe5),adminController['suspendUser']),router[a19_0x5dee0a(0x10e)](a19_0x5dee0a(0xb0),adminController[a19_0x5dee0a(0x118)]),router['get']('/logs/stats',(_0x38ef94,_0x17b47a)=>{const _0x28722e=a19_0x5dee0a;try{const _0x5cb63a=loggerService_1[_0x28722e(0xbf)][_0x28722e(0xea)]();_0x17b47a[_0x28722e(0x108)]({'success':!![],'result':_0x5cb63a});}catch(_0x52c077){_0x17b47a[_0x28722e(0xa4)](0x1f4)[_0x28722e(0x108)]({'success':![],'message':'Failed\x20to\x20get\x20log\x20statistics'});}}),router[a19_0x5dee0a(0x10e)](a19_0x5dee0a(0xb3),(_0x9b87e7,_0x43af94)=>{const _0x1689e6=a19_0x5dee0a;try{const {daysToKeep:daysToKeep=0x1e}=_0x9b87e7[_0x1689e6(0xb2)];loggerService_1['loggerService']['cleanOldLogs'](daysToKeep),_0x43af94[_0x1689e6(0x108)]({'success':!![],'message':_0x1689e6(0xec)+daysToKeep+_0x1689e6(0xe4)});}catch(_0x666c5f){_0x43af94[_0x1689e6(0xa4)](0x1f4)[_0x1689e6(0x108)]({'success':![],'message':_0x1689e6(0xf8)});}}),router[a19_0x5dee0a(0x10e)](a19_0x5dee0a(0xf0),async(_0x28d44b,_0x1fd9ac)=>{const _0x2ed547=a19_0x5dee0a;try{const {paymentId:_0x404042}=_0x28d44b[_0x2ed547(0xe6)];console[_0x2ed547(0x11b)](_0x2ed547(0xc3)+_0x404042),await coinToPayStatusService_1['coinToPayStatusService'][_0x2ed547(0xdc)](_0x404042),_0x1fd9ac['json']({'success':!![],'message':_0x2ed547(0xf1)});}catch(_0x6b2dd6){console[_0x2ed547(0xbc)](_0x2ed547(0xf9)+_0x28d44b[_0x2ed547(0xe6)][_0x2ed547(0x100)]+':',_0x6b2dd6),_0x1fd9ac[_0x2ed547(0xa4)](0x1f4)[_0x2ed547(0x108)]({'success':![],'message':_0x6b2dd6 instanceof Error?_0x6b2dd6[_0x2ed547(0x112)]:_0x2ed547(0xfe)});}}),router[a19_0x5dee0a(0xba)]('/cointopay/stats',(_0x39e9d7,_0x244b3e)=>{const _0x537f37=a19_0x5dee0a;try{const _0x3db81c=coinToPayStatusService_1[_0x537f37(0xee)]['getServiceStats']();_0x244b3e[_0x537f37(0x108)]({'success':!![],'result':{..._0x3db81c,'description':_0x537f37(0xb9),'statusMapping':{'Paid':_0x537f37(0xce),'Awaiting\x20Fiat':_0x537f37(0xfc),'waiting':_0x537f37(0xfc),'expired':'EXPIRED','failed':_0x537f37(0xb5)},'autoExpiryNote':'Payments\x20automatically\x20expire\x20after\x20'+_0x3db81c[_0x537f37(0xd4)]+_0x537f37(0xe9),'individualTimersNote':_0x537f37(0xbd)}});}catch(_0x239db1){_0x244b3e[_0x537f37(0xa4)](0x1f4)[_0x537f37(0x108)]({'success':![],'message':'Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics'});}}),router[a19_0x5dee0a(0xba)]('/cointopay/payment/:paymentId',async(_0x4b6f42,_0x1855eb)=>{const _0x2fbe02=a19_0x5dee0a;try{const {paymentId:_0x3aeb31}=_0x4b6f42[_0x2fbe02(0xe6)],_0x51bbd7=coinToPayStatusService_1[_0x2fbe02(0xee)][_0x2fbe02(0xa2)](_0x3aeb31),_0x252e13=(await Promise[_0x2fbe02(0xca)]()['then'](()=>__importStar(require('../config/database'))))[_0x2fbe02(0x119)],_0x405a51=await _0x252e13[_0x2fbe02(0xd8)][_0x2fbe02(0xd0)]({'where':{'id':_0x3aeb31},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x405a51)return _0x1855eb['status'](0x194)[_0x2fbe02(0x108)]({'success':![],'message':_0x2fbe02(0xdb)});_0x1855eb[_0x2fbe02(0x108)]({'success':!![],'result':{'payment':{'id':_0x405a51['id'],'gateway':_0x405a51[_0x2fbe02(0xf2)],'gatewayPaymentId':_0x405a51['gatewayPaymentId'],'status':_0x405a51[_0x2fbe02(0xa4)],'amount':_0x405a51[_0x2fbe02(0xc2)],'currency':_0x405a51['currency'],'createdAt':_0x405a51['createdAt'],'updatedAt':_0x405a51[_0x2fbe02(0xac)],'shop':_0x405a51[_0x2fbe02(0xef)]},'timers':_0x51bbd7,'isCoinToPay':_0x405a51[_0x2fbe02(0xf2)]===_0x2fbe02(0xad),'ageInMinutes':Math['floor']((Date['now']()-_0x405a51[_0x2fbe02(0xaf)][_0x2fbe02(0xd1)]())/(0x3e8*0x3c))}});}catch(_0x1a48bd){_0x1855eb[_0x2fbe02(0xa4)](0x1f4)['json']({'success':![],'message':_0x1a48bd instanceof Error?_0x1a48bd['message']:_0x2fbe02(0xfb)});}}),router[a19_0x5dee0a(0xba)](a19_0x5dee0a(0xeb),(_0x1ddbb5,_0x134167)=>{const _0xe210cb=a19_0x5dee0a;try{const _0x487503=domainMonitoringService_1[_0xe210cb(0x107)]['getMonitoringStats']();_0x134167[_0xe210cb(0x108)]({'success':!![],'result':{..._0x487503,'description':_0xe210cb(0xdd),'behavior':_0xe210cb(0xe2),'encoding':_0xe210cb(0xe3)}});}catch(_0x19b48c){_0x134167[_0xe210cb(0xa4)](0x1f4)[_0xe210cb(0x108)]({'success':![],'message':_0xe210cb(0xda)});}}),router[a19_0x5dee0a(0x10e)]('/domain-monitoring/check',async(_0x5a870d,_0xa92207)=>{const _0x22c627=a19_0x5dee0a;try{const _0x81df4e=await domainMonitoringService_1['domainMonitoringService']['manualCheck']();_0xa92207[_0x22c627(0x108)]({'success':!![],'result':{'domainAvailable':_0x81df4e,'message':_0x81df4e?_0x22c627(0xc4):_0x22c627(0xc9),'timestamp':new Date()[_0x22c627(0xfa)]()}});}catch(_0x34da42){_0xa92207['status'](0x1f4)[_0x22c627(0x108)]({'success':![],'message':_0x34da42 instanceof Error?_0x34da42[_0x22c627(0x112)]:_0x22c627(0x11d)});}}),exports[a19_0x5dee0a(0x119)]=router;