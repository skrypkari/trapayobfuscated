'use strict';function a19_0x14c8(){const _0x4170c9=['Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','/users/:id/suspend','getPayouts','updateCustomerData','../config/database','status','loggerService','configurable','754282vOzWMG','8054244NbEvwI','getStatistics','Failed\x20to\x20perform\x20manual\x20domain\x20check','getMerchantStatistics','getUserById','/payouts/:id','updatePayment','getOwnPropertyNames','/domain-monitoring/check','cleanOldLogs','Router','\x20days\x20if\x20not\x20paid','body','410452oSlEHK','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','/payments/:id/customer','updateCustomerDataSchema','prototype','getMerchantsAwaitingPayout','/logs/stats','post','1561172crNZxk','validate','getPaymentTimerInfo','paymentId','createUser','6375XBxiqQ','Failed\x20to\x20clean\x20old\x20logs','CoinToPay\x20automatic\x20status\x20checking\x20service','shop','2412CPQRCb','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','/cointopay/stats','coinToPayStatusService','/users/:id','28ijyPTj','updatedAt','\x20days)','../middleware/validation','createUserSchema','__setModuleDefault','then','88lBYWmf','/auth','put','Payments\x20automatically\x20expire\x20after\x20','log','message','/payout','error','getMonitoringStats','get','getTime','EXPIRED','writable','createPayout','updateUserSchema','/payments/:id','__esModule','/payout/stats','getMerchantsSelection','checkPaymentById','Domain\x20is\x20responding\x20correctly','Failed\x20to\x20get\x20log\x20statistics','../services/loggerService','requireAdmin','deleteUser','activateUser','params','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','10lSJRSq','../middleware/auth','gateway','getPayoutById','json','delete','findUnique','default','getUsers','hasOwnProperty','../services/coinToPayStatusService','createdAt','getPaymentById','create','manualCheck','express','Payment\x20not\x20found','6691223WdqMFA','/users','/domain-monitoring/stats','/statistics','getOwnPropertyDescriptor','/payments','/payout/merchants','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','/cointopay/check/:paymentId','getPayments','/users/:id/activate','../controllers/adminController','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','length','defineProperty','toISOString','__importStar','271869UbljrB','getPayoutStats','PENDING','authenticateToken','use','PAID'];a19_0x14c8=function(){return _0x4170c9;};return a19_0x14c8();}const a19_0x3e3b87=a19_0x7bff;(function(_0xb7838d,_0x800798){const _0x38f37d=a19_0x7bff,_0x146c26=_0xb7838d();while(!![]){try{const _0x2d20de=parseInt(_0x38f37d(0xaf))/0x1+parseInt(_0x38f37d(0xc5))/0x2+-parseInt(_0x38f37d(0xa1))/0x3*(-parseInt(_0x38f37d(0xd3))/0x4)+parseInt(_0x38f37d(0xca))/0x5*(parseInt(_0x38f37d(0xce))/0x6)+-parseInt(_0x38f37d(0xbd))/0x7*(parseInt(_0x38f37d(0xda))/0x8)+parseInt(_0x38f37d(0xb0))/0x9*(-parseInt(_0x38f37d(0x7f))/0xa)+-parseInt(_0x38f37d(0x90))/0xb;if(_0x2d20de===_0x800798)break;else _0x146c26['push'](_0x146c26['shift']());}catch(_0x4dc916){_0x146c26['push'](_0x146c26['shift']());}}}(a19_0x14c8,0x82446));function a19_0x7bff(_0x3aebd0,_0x21c35d){const _0x14c8bf=a19_0x14c8();return a19_0x7bff=function(_0x7bfff3,_0x34d4c3){_0x7bfff3=_0x7bfff3-0x6a;let _0x4b77d2=_0x14c8bf[_0x7bfff3];return _0x4b77d2;},a19_0x7bff(_0x3aebd0,_0x21c35d);}var __createBinding=this&&this['__createBinding']||(Object['create']?function(_0x348f52,_0x197237,_0x38fbbf,_0x13bbd8){const _0x2486e7=a19_0x7bff;if(_0x13bbd8===undefined)_0x13bbd8=_0x38fbbf;var _0x2ab2a6=Object[_0x2486e7(0x94)](_0x197237,_0x38fbbf);(!_0x2ab2a6||(_0x2486e7(0x6c)in _0x2ab2a6?!_0x197237[_0x2486e7(0x73)]:_0x2ab2a6[_0x2486e7(0x6f)]||_0x2ab2a6[_0x2486e7(0xae)]))&&(_0x2ab2a6={'enumerable':!![],'get':function(){return _0x197237[_0x38fbbf];}}),Object[_0x2486e7(0x9e)](_0x348f52,_0x13bbd8,_0x2ab2a6);}:function(_0x109529,_0x5b4309,_0x3a9847,_0x1aa5e8){if(_0x1aa5e8===undefined)_0x1aa5e8=_0x3a9847;_0x109529[_0x1aa5e8]=_0x5b4309[_0x3a9847];}),__setModuleDefault=this&&this[a19_0x3e3b87(0xd8)]||(Object[a19_0x3e3b87(0x8c)]?function(_0x45dfc6,_0x3f08e7){const _0x3b6bf5=a19_0x3e3b87;Object['defineProperty'](_0x45dfc6,_0x3b6bf5(0x86),{'enumerable':!![],'value':_0x3f08e7});}:function(_0x5ea278,_0x28442c){const _0x907325=a19_0x3e3b87;_0x5ea278[_0x907325(0x86)]=_0x28442c;}),__importStar=this&&this[a19_0x3e3b87(0xa0)]||(function(){var _0x37830a=function(_0x54aa0f){const _0xa1d803=a19_0x7bff;return _0x37830a=Object[_0xa1d803(0xb7)]||function(_0x211e9b){const _0x29410d=_0xa1d803;var _0x556484=[];for(var _0x3b2bd8 in _0x211e9b)if(Object[_0x29410d(0xc1)][_0x29410d(0x88)]['call'](_0x211e9b,_0x3b2bd8))_0x556484[_0x556484[_0x29410d(0x9d)]]=_0x3b2bd8;return _0x556484;},_0x37830a(_0x54aa0f);};return function(_0x8fd65e){const _0x2e3462=a19_0x7bff;if(_0x8fd65e&&_0x8fd65e[_0x2e3462(0x73)])return _0x8fd65e;var _0x469fd7={};if(_0x8fd65e!=null){for(var _0x14c94e=_0x37830a(_0x8fd65e),_0x2fd364=0x0;_0x2fd364<_0x14c94e[_0x2e3462(0x9d)];_0x2fd364++)if(_0x14c94e[_0x2fd364]!==_0x2e3462(0x86))__createBinding(_0x469fd7,_0x8fd65e,_0x14c94e[_0x2fd364]);}return __setModuleDefault(_0x469fd7,_0x8fd65e),_0x469fd7;};}());Object[a19_0x3e3b87(0x9e)](exports,a19_0x3e3b87(0x73),{'value':!![]});const express_1=require(a19_0x3e3b87(0x8e)),adminController_1=require(a19_0x3e3b87(0x9b)),validation_1=require(a19_0x3e3b87(0xd6)),auth_1=require(a19_0x3e3b87(0x80)),loggerService_1=require(a19_0x3e3b87(0x79)),coinToPayStatusService_1=require(a19_0x3e3b87(0x89)),domainMonitoringService_1=require('../services/domainMonitoringService'),router=(0x0,express_1[a19_0x3e3b87(0xba)])(),adminController=new adminController_1['AdminController']();router[a19_0x3e3b87(0xa5)](auth_1[a19_0x3e3b87(0xa4)],auth_1[a19_0x3e3b87(0x7a)]),router['get'](a19_0x3e3b87(0xdb),adminController['checkAuth']),router[a19_0x3e3b87(0x6c)](a19_0x3e3b87(0x93),adminController[a19_0x3e3b87(0xb1)]),router['get']('/merchant-statistics',adminController[a19_0x3e3b87(0xb3)]),router[a19_0x3e3b87(0x6c)](a19_0x3e3b87(0x74),adminController[a19_0x3e3b87(0xa2)]),router['get'](a19_0x3e3b87(0x96),adminController[a19_0x3e3b87(0xc2)]),router[a19_0x3e3b87(0x6c)]('/merchants/selection',adminController[a19_0x3e3b87(0x75)]),router['post'](a19_0x3e3b87(0xe0),(0x0,validation_1[a19_0x3e3b87(0xc6)])(validation_1['createPayoutSchema']),adminController[a19_0x3e3b87(0x70)]),router[a19_0x3e3b87(0x6c)]('/payouts',adminController[a19_0x3e3b87(0xa9)]),router['get']('/payouts/:id',adminController[a19_0x3e3b87(0x82)]),router['delete'](a19_0x3e3b87(0xb5),adminController['deletePayout']),router[a19_0x3e3b87(0x6c)](a19_0x3e3b87(0x95),adminController[a19_0x3e3b87(0x99)]),router[a19_0x3e3b87(0x6c)](a19_0x3e3b87(0x72),adminController[a19_0x3e3b87(0x8b)]),router[a19_0x3e3b87(0xdc)](a19_0x3e3b87(0x72),adminController[a19_0x3e3b87(0xb6)]),router[a19_0x3e3b87(0xdc)](a19_0x3e3b87(0xbf),(0x0,validation_1[a19_0x3e3b87(0xc6)])(validation_1[a19_0x3e3b87(0xc0)]),adminController[a19_0x3e3b87(0xaa)]),router[a19_0x3e3b87(0x6c)](a19_0x3e3b87(0x91),adminController[a19_0x3e3b87(0x87)]),router[a19_0x3e3b87(0x6c)](a19_0x3e3b87(0xd2),adminController[a19_0x3e3b87(0xb4)]),router[a19_0x3e3b87(0xc4)](a19_0x3e3b87(0x91),(0x0,validation_1[a19_0x3e3b87(0xc6)])(validation_1[a19_0x3e3b87(0xd7)]),adminController[a19_0x3e3b87(0xc9)]),router[a19_0x3e3b87(0xdc)]('/users/:id',(0x0,validation_1['validate'])(validation_1[a19_0x3e3b87(0x71)]),adminController['updateUser']),router[a19_0x3e3b87(0x84)](a19_0x3e3b87(0xd2),adminController[a19_0x3e3b87(0x7b)]),router[a19_0x3e3b87(0xc4)](a19_0x3e3b87(0xa8),adminController['suspendUser']),router[a19_0x3e3b87(0xc4)](a19_0x3e3b87(0x9a),adminController[a19_0x3e3b87(0x7c)]),router['get'](a19_0x3e3b87(0xc3),(_0x3be53f,_0x2e5160)=>{const _0x490960=a19_0x3e3b87;try{const _0x23c193=loggerService_1[_0x490960(0xad)]['getLogStats']();_0x2e5160[_0x490960(0x83)]({'success':!![],'result':_0x23c193});}catch(_0x1aada2){_0x2e5160[_0x490960(0xac)](0x1f4)[_0x490960(0x83)]({'success':![],'message':_0x490960(0x78)});}}),router[a19_0x3e3b87(0xc4)]('/logs/clean',(_0x1e4860,_0x19e243)=>{const _0x457c65=a19_0x3e3b87;try{const {daysToKeep:daysToKeep=0x1e}=_0x1e4860[_0x457c65(0xbc)];loggerService_1[_0x457c65(0xad)][_0x457c65(0xb9)](daysToKeep),_0x19e243[_0x457c65(0x83)]({'success':!![],'message':'Old\x20logs\x20cleaned\x20(kept\x20last\x20'+daysToKeep+_0x457c65(0xd5)});}catch(_0x16b8f3){_0x19e243['status'](0x1f4)['json']({'success':![],'message':_0x457c65(0xcb)});}}),router[a19_0x3e3b87(0xc4)](a19_0x3e3b87(0x98),async(_0x13d742,_0x1fac4f)=>{const _0x5eedbd=a19_0x3e3b87;try{const {paymentId:_0x5b3a3b}=_0x13d742[_0x5eedbd(0x7d)];console[_0x5eedbd(0xde)]('🔍\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20'+_0x5b3a3b),await coinToPayStatusService_1[_0x5eedbd(0xd1)][_0x5eedbd(0x76)](_0x5b3a3b),_0x1fac4f['json']({'success':!![],'message':'CoinToPay\x20payment\x20status\x20checked\x20successfully'});}catch(_0x2d5296){console[_0x5eedbd(0x6a)]('❌\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20'+_0x13d742[_0x5eedbd(0x7d)][_0x5eedbd(0xc8)]+':',_0x2d5296),_0x1fac4f[_0x5eedbd(0xac)](0x1f4)['json']({'success':![],'message':_0x2d5296 instanceof Error?_0x2d5296['message']:'Failed\x20to\x20check\x20CoinToPay\x20payment\x20status'});}}),router['get'](a19_0x3e3b87(0xd0),(_0x57f226,_0x15c91d)=>{const _0x4fbddd=a19_0x3e3b87;try{const _0x3837f3=coinToPayStatusService_1[_0x4fbddd(0xd1)]['getServiceStats']();_0x15c91d['json']({'success':!![],'result':{..._0x3837f3,'description':_0x4fbddd(0xcc),'statusMapping':{'Paid':_0x4fbddd(0xa6),'Awaiting\x20Fiat':_0x4fbddd(0xa3),'waiting':_0x4fbddd(0xa3),'expired':_0x4fbddd(0x6e),'failed':'FAILED'},'autoExpiryNote':_0x4fbddd(0xdd)+_0x3837f3['expiryDays']+_0x4fbddd(0xbb),'individualTimersNote':_0x4fbddd(0x7e)}});}catch(_0x553b35){_0x15c91d[_0x4fbddd(0xac)](0x1f4)[_0x4fbddd(0x83)]({'success':![],'message':_0x4fbddd(0x9c)});}}),router[a19_0x3e3b87(0x6c)]('/cointopay/payment/:paymentId',async(_0x496d9c,_0x1fde9f)=>{const _0x28aa42=a19_0x3e3b87;try{const {paymentId:_0x506c62}=_0x496d9c[_0x28aa42(0x7d)],_0x4d0301=coinToPayStatusService_1['coinToPayStatusService'][_0x28aa42(0xc7)](_0x506c62),_0x30cb12=(await Promise['resolve']()[_0x28aa42(0xd9)](()=>__importStar(require(_0x28aa42(0xab)))))[_0x28aa42(0x86)],_0x44e020=await _0x30cb12['payment'][_0x28aa42(0x85)]({'where':{'id':_0x506c62},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x44e020)return _0x1fde9f[_0x28aa42(0xac)](0x194)[_0x28aa42(0x83)]({'success':![],'message':_0x28aa42(0x8f)});_0x1fde9f[_0x28aa42(0x83)]({'success':!![],'result':{'payment':{'id':_0x44e020['id'],'gateway':_0x44e020['gateway'],'gatewayPaymentId':_0x44e020['gatewayPaymentId'],'status':_0x44e020[_0x28aa42(0xac)],'amount':_0x44e020['amount'],'currency':_0x44e020['currency'],'createdAt':_0x44e020[_0x28aa42(0x8a)],'updatedAt':_0x44e020[_0x28aa42(0xd4)],'shop':_0x44e020[_0x28aa42(0xcd)]},'timers':_0x4d0301,'isCoinToPay':_0x44e020[_0x28aa42(0x81)]==='cointopay','ageInMinutes':Math['floor']((Date['now']()-_0x44e020['createdAt'][_0x28aa42(0x6d)]())/(0x3e8*0x3c))}});}catch(_0x50e53c){_0x1fde9f[_0x28aa42(0xac)](0x1f4)[_0x28aa42(0x83)]({'success':![],'message':_0x50e53c instanceof Error?_0x50e53c[_0x28aa42(0xdf)]:'Failed\x20to\x20get\x20payment\x20information'});}}),router['get'](a19_0x3e3b87(0x92),(_0x6ac8f3,_0x2f9c89)=>{const _0x1785fe=a19_0x3e3b87;try{const _0x487926=domainMonitoringService_1['domainMonitoringService'][_0x1785fe(0x6b)]();_0x2f9c89[_0x1785fe(0x83)]({'success':!![],'result':{..._0x487926,'description':_0x1785fe(0xbe),'behavior':_0x1785fe(0xa7),'encoding':_0x1785fe(0x97)}});}catch(_0x148c9b){_0x2f9c89[_0x1785fe(0xac)](0x1f4)[_0x1785fe(0x83)]({'success':![],'message':_0x1785fe(0xcf)});}}),router[a19_0x3e3b87(0xc4)](a19_0x3e3b87(0xb8),async(_0x1ea354,_0x3099bc)=>{const _0x2a8220=a19_0x3e3b87;try{const _0x3b1760=await domainMonitoringService_1['domainMonitoringService'][_0x2a8220(0x8d)]();_0x3099bc[_0x2a8220(0x83)]({'success':!![],'result':{'domainAvailable':_0x3b1760,'message':_0x3b1760?_0x2a8220(0x77):'Domain\x20check\x20failed','timestamp':new Date()[_0x2a8220(0x9f)]()}});}catch(_0x56de87){_0x3099bc[_0x2a8220(0xac)](0x1f4)['json']({'success':![],'message':_0x56de87 instanceof Error?_0x56de87['message']:_0x2a8220(0xb2)});}}),exports[a19_0x3e3b87(0x86)]=router;