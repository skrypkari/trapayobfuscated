'use strict';function a19_0x3956(){const _0x2e2353=['../services/coinToPayStatusService','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','activateUser','shop','/users/:id/suspend','create','authenticateToken','getUsers','/payout/merchants','getMerchantStatistics','put','updateCustomerData','5262CxtsBu','manualCheck','PENDING','log','cleanOldLogs','createUserSchema','getUserById','delete','expiryDays','createPayout','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','writable','toISOString','updateCustomerDataSchema','get','Failed\x20to\x20get\x20payment\x20information','body','CoinToPay\x20payment\x20status\x20checked\x20successfully','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','1834679GtZYcO','/users/:id/activate','params','resolve','prototype','\x20days\x20if\x20not\x20paid','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','getTime','/payments/:id/customer','CoinToPay\x20automatic\x20status\x20checking\x20service','createPayoutSchema','error','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','floor','requireAdmin','AdminController','currency','1255662elctJZ','getServiceStats','use','650236dYWCon','length','../middleware/validation','/payouts/:id','30bxLMuA','domainMonitoringService','updateUser','validate','/domain-monitoring/check','Payment\x20not\x20found','/logs/stats','gatewayPaymentId','loggerService','PAID','now','EXPIRED','post','getPayoutStats','/payments/:id','/domain-monitoring/stats','\x20days)','/cointopay/stats','deleteUser','1308eqErKV','getStatistics','/users/:id','662fntEAF','defineProperty','113714oeVRUP','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','/logs/clean','coinToPayStatusService','getPaymentById','createdAt','updateUserSchema','message','Failed\x20to\x20clean\x20old\x20logs','amount','getOwnPropertyDescriptor','15SikBSi','1484mvWKpy','json','getLogStats','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','../services/domainMonitoringService','getPayoutById','call','express','../services/loggerService','/payments','../config/database','Failed\x20to\x20perform\x20manual\x20domain\x20check','__importStar','/merchants/selection','/cointopay/check/:paymentId','checkPaymentById','/payout','4998312fhWJJg','__createBinding','getMerchantsAwaitingPayout','FAILED','/users','default','createUser','checkAuth','payment','/merchant-statistics','then','getPaymentTimerInfo','status','gateway','../controllers/adminController','/payouts','Router'];a19_0x3956=function(){return _0x2e2353;};return a19_0x3956();}function a19_0x4685(_0x49197b,_0x1b65fc){const _0x39568e=a19_0x3956();return a19_0x4685=function(_0x46855c,_0x329443){_0x46855c=_0x46855c-0x198;let _0x281a34=_0x39568e[_0x46855c];return _0x281a34;},a19_0x4685(_0x49197b,_0x1b65fc);}const a19_0x371343=a19_0x4685;(function(_0x1d3976,_0x12435c){const _0x1b509c=a19_0x4685,_0x46f2d5=_0x1d3976();while(!![]){try{const _0x4525c1=parseInt(_0x1b509c(0x1cd))/0x1+parseInt(_0x1b509c(0x1cb))/0x2*(parseInt(_0x1b509c(0x1c8))/0x3)+-parseInt(_0x1b509c(0x1b1))/0x4*(parseInt(_0x1b509c(0x1d8))/0x5)+-parseInt(_0x1b509c(0x207))/0x6*(-parseInt(_0x1b509c(0x1d9))/0x7)+parseInt(_0x1b509c(0x1ea))/0x8+-parseInt(_0x1b509c(0x1ae))/0x9*(parseInt(_0x1b509c(0x1b5))/0xa)+parseInt(_0x1b509c(0x19d))/0xb;if(_0x4525c1===_0x12435c)break;else _0x46f2d5['push'](_0x46f2d5['shift']());}catch(_0x2985aa){_0x46f2d5['push'](_0x46f2d5['shift']());}}}(a19_0x3956,0x50655));var __createBinding=this&&this[a19_0x371343(0x1eb)]||(Object[a19_0x371343(0x200)]?function(_0x5744b4,_0x19e6a9,_0x2379a3,_0x2f0a53){const _0x48dbdf=a19_0x371343;if(_0x2f0a53===undefined)_0x2f0a53=_0x2379a3;var _0x598176=Object[_0x48dbdf(0x1d7)](_0x19e6a9,_0x2379a3);(!_0x598176||(_0x48dbdf(0x198)in _0x598176?!_0x19e6a9['__esModule']:_0x598176[_0x48dbdf(0x213)]||_0x598176['configurable']))&&(_0x598176={'enumerable':!![],'get':function(){return _0x19e6a9[_0x2379a3];}}),Object[_0x48dbdf(0x1cc)](_0x5744b4,_0x2f0a53,_0x598176);}:function(_0x1d193a,_0x59fa69,_0x34d08f,_0x3bef84){if(_0x3bef84===undefined)_0x3bef84=_0x34d08f;_0x1d193a[_0x3bef84]=_0x59fa69[_0x34d08f];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object['create']?function(_0x4f2692,_0x445588){const _0x30f4b3=a19_0x371343;Object[_0x30f4b3(0x1cc)](_0x4f2692,_0x30f4b3(0x1ef),{'enumerable':!![],'value':_0x445588});}:function(_0x46c7f8,_0x322882){const _0x223e57=a19_0x371343;_0x46c7f8[_0x223e57(0x1ef)]=_0x322882;}),__importStar=this&&this[a19_0x371343(0x1e5)]||(function(){var _0x3cb0e2=function(_0x4d0b32){return _0x3cb0e2=Object['getOwnPropertyNames']||function(_0x19a965){const _0x42e1b1=a19_0x4685;var _0x3deed0=[];for(var _0x553a83 in _0x19a965)if(Object[_0x42e1b1(0x1a1)]['hasOwnProperty'][_0x42e1b1(0x1df)](_0x19a965,_0x553a83))_0x3deed0[_0x3deed0[_0x42e1b1(0x1b2)]]=_0x553a83;return _0x3deed0;},_0x3cb0e2(_0x4d0b32);};return function(_0x1ad55d){if(_0x1ad55d&&_0x1ad55d['__esModule'])return _0x1ad55d;var _0x2ad18a={};if(_0x1ad55d!=null){for(var _0x3820d0=_0x3cb0e2(_0x1ad55d),_0x2fa5a5=0x0;_0x2fa5a5<_0x3820d0['length'];_0x2fa5a5++)if(_0x3820d0[_0x2fa5a5]!=='default')__createBinding(_0x2ad18a,_0x1ad55d,_0x3820d0[_0x2fa5a5]);}return __setModuleDefault(_0x2ad18a,_0x1ad55d),_0x2ad18a;};}());Object[a19_0x371343(0x1cc)](exports,'__esModule',{'value':!![]});const express_1=require(a19_0x371343(0x1e0)),adminController_1=require(a19_0x371343(0x1f8)),validation_1=require(a19_0x371343(0x1b3)),auth_1=require('../middleware/auth'),loggerService_1=require(a19_0x371343(0x1e1)),coinToPayStatusService_1=require(a19_0x371343(0x1fb)),domainMonitoringService_1=require(a19_0x371343(0x1dd)),router=(0x0,express_1[a19_0x371343(0x1fa)])(),adminController=new adminController_1[(a19_0x371343(0x1ac))]();router[a19_0x371343(0x1b0)](auth_1[a19_0x371343(0x201)],auth_1[a19_0x371343(0x1ab)]),router[a19_0x371343(0x198)]('/auth',adminController[a19_0x371343(0x1f1)]),router[a19_0x371343(0x198)]('/statistics',adminController[a19_0x371343(0x1c9)]),router[a19_0x371343(0x198)](a19_0x371343(0x1f3),adminController[a19_0x371343(0x204)]),router[a19_0x371343(0x198)]('/payout/stats',adminController[a19_0x371343(0x1c2)]),router[a19_0x371343(0x198)](a19_0x371343(0x203),adminController[a19_0x371343(0x1ec)]),router[a19_0x371343(0x198)](a19_0x371343(0x1e6),adminController['getMerchantsSelection']),router[a19_0x371343(0x1c1)](a19_0x371343(0x1e9),(0x0,validation_1[a19_0x371343(0x1b8)])(validation_1[a19_0x371343(0x1a7)]),adminController[a19_0x371343(0x210)]),router[a19_0x371343(0x198)](a19_0x371343(0x1f9),adminController['getPayouts']),router[a19_0x371343(0x198)](a19_0x371343(0x1b4),adminController[a19_0x371343(0x1de)]),router[a19_0x371343(0x20e)](a19_0x371343(0x1b4),adminController['deletePayout']),router['get'](a19_0x371343(0x1e2),adminController['getPayments']),router[a19_0x371343(0x198)](a19_0x371343(0x1c3),adminController[a19_0x371343(0x1d1)]),router['put'](a19_0x371343(0x1c3),adminController['updatePayment']),router[a19_0x371343(0x205)](a19_0x371343(0x1a5),(0x0,validation_1['validate'])(validation_1[a19_0x371343(0x215)]),adminController[a19_0x371343(0x206)]),router[a19_0x371343(0x198)](a19_0x371343(0x1ee),adminController[a19_0x371343(0x202)]),router[a19_0x371343(0x198)](a19_0x371343(0x1ca),adminController[a19_0x371343(0x20d)]),router[a19_0x371343(0x1c1)]('/users',(0x0,validation_1['validate'])(validation_1[a19_0x371343(0x20c)]),adminController[a19_0x371343(0x1f0)]),router[a19_0x371343(0x205)](a19_0x371343(0x1ca),(0x0,validation_1[a19_0x371343(0x1b8)])(validation_1[a19_0x371343(0x1d3)]),adminController[a19_0x371343(0x1b7)]),router[a19_0x371343(0x20e)](a19_0x371343(0x1ca),adminController[a19_0x371343(0x1c7)]),router[a19_0x371343(0x1c1)](a19_0x371343(0x1ff),adminController['suspendUser']),router['post'](a19_0x371343(0x19e),adminController[a19_0x371343(0x1fd)]),router['get'](a19_0x371343(0x1bb),(_0x44a638,_0x1729bd)=>{const _0x1578b2=a19_0x371343;try{const _0x2ea8bb=loggerService_1[_0x1578b2(0x1bd)][_0x1578b2(0x1db)]();_0x1729bd['json']({'success':!![],'result':_0x2ea8bb});}catch(_0x6e382a){_0x1729bd[_0x1578b2(0x1f6)](0x1f4)[_0x1578b2(0x1da)]({'success':![],'message':'Failed\x20to\x20get\x20log\x20statistics'});}}),router['post'](a19_0x371343(0x1cf),(_0x7128c8,_0x4fe23c)=>{const _0xd66910=a19_0x371343;try{const {daysToKeep:daysToKeep=0x1e}=_0x7128c8[_0xd66910(0x19a)];loggerService_1['loggerService'][_0xd66910(0x20b)](daysToKeep),_0x4fe23c[_0xd66910(0x1da)]({'success':!![],'message':'Old\x20logs\x20cleaned\x20(kept\x20last\x20'+daysToKeep+_0xd66910(0x1c5)});}catch(_0x59b7ac){_0x4fe23c['status'](0x1f4)[_0xd66910(0x1da)]({'success':![],'message':_0xd66910(0x1d5)});}}),router[a19_0x371343(0x1c1)](a19_0x371343(0x1e7),async(_0x507100,_0x245776)=>{const _0x3ca4f5=a19_0x371343;try{const {paymentId:_0x3414da}=_0x507100[_0x3ca4f5(0x19f)];console[_0x3ca4f5(0x20a)](_0x3ca4f5(0x212)+_0x3414da),await coinToPayStatusService_1[_0x3ca4f5(0x1d0)][_0x3ca4f5(0x1e8)](_0x3414da),_0x245776[_0x3ca4f5(0x1da)]({'success':!![],'message':_0x3ca4f5(0x19b)});}catch(_0x8890df){console[_0x3ca4f5(0x1a8)](_0x3ca4f5(0x1a9)+_0x507100[_0x3ca4f5(0x19f)]['paymentId']+':',_0x8890df),_0x245776[_0x3ca4f5(0x1f6)](0x1f4)[_0x3ca4f5(0x1da)]({'success':![],'message':_0x8890df instanceof Error?_0x8890df['message']:_0x3ca4f5(0x1a3)});}}),router[a19_0x371343(0x198)](a19_0x371343(0x1c6),(_0x5357b7,_0x2ee237)=>{const _0x23e6b8=a19_0x371343;try{const _0x4c04d1=coinToPayStatusService_1[_0x23e6b8(0x1d0)][_0x23e6b8(0x1af)]();_0x2ee237[_0x23e6b8(0x1da)]({'success':!![],'result':{..._0x4c04d1,'description':_0x23e6b8(0x1a6),'statusMapping':{'Paid':_0x23e6b8(0x1be),'Awaiting\x20Fiat':'PENDING','waiting':_0x23e6b8(0x209),'expired':_0x23e6b8(0x1c0),'failed':_0x23e6b8(0x1ed)},'autoExpiryNote':'Payments\x20automatically\x20expire\x20after\x20'+_0x4c04d1[_0x23e6b8(0x20f)]+_0x23e6b8(0x1a2),'individualTimersNote':'Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly'}});}catch(_0x3059c7){_0x2ee237['status'](0x1f4)[_0x23e6b8(0x1da)]({'success':![],'message':_0x23e6b8(0x211)});}}),router['get']('/cointopay/payment/:paymentId',async(_0x551924,_0x3dab26)=>{const _0x402ff0=a19_0x371343;try{const {paymentId:_0x1596da}=_0x551924[_0x402ff0(0x19f)],_0x2ea6aa=coinToPayStatusService_1['coinToPayStatusService'][_0x402ff0(0x1f5)](_0x1596da),_0x3328b2=(await Promise[_0x402ff0(0x1a0)]()[_0x402ff0(0x1f4)](()=>__importStar(require(_0x402ff0(0x1e3)))))[_0x402ff0(0x1ef)],_0x417953=await _0x3328b2[_0x402ff0(0x1f2)]['findUnique']({'where':{'id':_0x1596da},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x417953)return _0x3dab26['status'](0x194)[_0x402ff0(0x1da)]({'success':![],'message':_0x402ff0(0x1ba)});_0x3dab26[_0x402ff0(0x1da)]({'success':!![],'result':{'payment':{'id':_0x417953['id'],'gateway':_0x417953[_0x402ff0(0x1f7)],'gatewayPaymentId':_0x417953[_0x402ff0(0x1bc)],'status':_0x417953[_0x402ff0(0x1f6)],'amount':_0x417953[_0x402ff0(0x1d6)],'currency':_0x417953[_0x402ff0(0x1ad)],'createdAt':_0x417953['createdAt'],'updatedAt':_0x417953['updatedAt'],'shop':_0x417953[_0x402ff0(0x1fe)]},'timers':_0x2ea6aa,'isCoinToPay':_0x417953[_0x402ff0(0x1f7)]==='cointopay','ageInMinutes':Math[_0x402ff0(0x1aa)]((Date[_0x402ff0(0x1bf)]()-_0x417953[_0x402ff0(0x1d2)][_0x402ff0(0x1a4)]())/(0x3e8*0x3c))}});}catch(_0x3c763d){_0x3dab26[_0x402ff0(0x1f6)](0x1f4)['json']({'success':![],'message':_0x3c763d instanceof Error?_0x3c763d[_0x402ff0(0x1d4)]:_0x402ff0(0x199)});}}),router[a19_0x371343(0x198)](a19_0x371343(0x1c4),(_0x98a68a,_0x236185)=>{const _0x9fb3a5=a19_0x371343;try{const _0xb27cb=domainMonitoringService_1[_0x9fb3a5(0x1b6)]['getMonitoringStats']();_0x236185['json']({'success':!![],'result':{..._0xb27cb,'description':_0x9fb3a5(0x19c),'behavior':_0x9fb3a5(0x1dc),'encoding':_0x9fb3a5(0x1ce)}});}catch(_0x1da2a1){_0x236185[_0x9fb3a5(0x1f6)](0x1f4)[_0x9fb3a5(0x1da)]({'success':![],'message':_0x9fb3a5(0x1fc)});}}),router[a19_0x371343(0x1c1)](a19_0x371343(0x1b9),async(_0x129310,_0x109609)=>{const _0x5125c7=a19_0x371343;try{const _0x13daba=await domainMonitoringService_1[_0x5125c7(0x1b6)][_0x5125c7(0x208)]();_0x109609['json']({'success':!![],'result':{'domainAvailable':_0x13daba,'message':_0x13daba?'Domain\x20is\x20responding\x20correctly':'Domain\x20check\x20failed','timestamp':new Date()[_0x5125c7(0x214)]()}});}catch(_0x1028e9){_0x109609[_0x5125c7(0x1f6)](0x1f4)[_0x5125c7(0x1da)]({'success':![],'message':_0x1028e9 instanceof Error?_0x1028e9[_0x5125c7(0x1d4)]:_0x5125c7(0x1e4)});}}),exports[a19_0x371343(0x1ef)]=router;