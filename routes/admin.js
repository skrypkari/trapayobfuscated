'use strict';function a18_0x23a8(_0x225e67,_0x13c448){const _0x314de3=a18_0x314d();return a18_0x23a8=function(_0x23a820,_0x2114d5){_0x23a820=_0x23a820-0x6b;let _0x9e15f6=_0x314de3[_0x23a820];return _0x9e15f6;},a18_0x23a8(_0x225e67,_0x13c448);}const a18_0x2f4ea4=a18_0x23a8;(function(_0x5b1257,_0x7e2a9c){const _0x782711=a18_0x23a8,_0x1d5176=_0x5b1257();while(!![]){try{const _0x356f8c=-parseInt(_0x782711(0x81))/0x1+parseInt(_0x782711(0xc8))/0x2+-parseInt(_0x782711(0xd7))/0x3+parseInt(_0x782711(0xb1))/0x4*(-parseInt(_0x782711(0xc6))/0x5)+parseInt(_0x782711(0x92))/0x6+-parseInt(_0x782711(0xa0))/0x7+parseInt(_0x782711(0xa2))/0x8*(parseInt(_0x782711(0xdf))/0x9);if(_0x356f8c===_0x7e2a9c)break;else _0x1d5176['push'](_0x1d5176['shift']());}catch(_0x495a48){_0x1d5176['push'](_0x1d5176['shift']());}}}(a18_0x314d,0x93329));function a18_0x314d(){const _0x16ecfe=['/cointopay/payment/:paymentId','../services/loggerService','/users/:id/activate','then','../services/coinToPayStatusService','currency','delete','getUserById','getMonitoringStats','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','deletePayout','getStatistics','1744347ARtvGN','paymentId','getOwnPropertyNames','getMerchantsAwaitingPayout','getLogStats','createPayout','log','updatePayment','8487XPBtaB','\x20days\x20if\x20not\x20paid','prototype','/users','message','PENDING','checkAuth','expiryDays','Old\x20logs\x20cleaned\x20(kept\x20last\x20','../config/database','authenticateToken','/users/:id/suspend','hasOwnProperty','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','body','status','get','amount','defineProperty','params','/domain-monitoring/stats','findUnique','CoinToPay\x20automatic\x20status\x20checking\x20service','now','/cointopay/stats','coinToPayStatusService','Failed\x20to\x20get\x20log\x20statistics','gatewayPaymentId','PAID','873799aDnBDE','/cointopay/check/:paymentId','createdAt','../middleware/auth','getPayouts','getPaymentById','Failed\x20to\x20clean\x20old\x20logs','/payout','/auth','post','suspendUser','/logs/clean','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','__importStar','toISOString','/domain-monitoring/check','activateUser','1239930LGlBWe','getServiceStats','getMerchantStatistics','createUserSchema','gateway','Domain\x20is\x20responding\x20correctly','Failed\x20to\x20perform\x20manual\x20domain\x20check','/payouts/:id','configurable','writable','createPayoutSchema','/payout/merchants','updatedAt','cointopay','3210851MqTPIY','getUsers','16880ifluGq','loggerService','put','/payments/:id','__setModuleDefault','default','\x20days)','EXPIRED','/statistics','requireAdmin','updateUserSchema','getPayments','Domain\x20check\x20failed','manualCheck','validate','12092wyIvtc','payment','updateUser','getPayoutStats','cleanOldLogs','/users/:id','getTime','express','getOwnPropertyDescriptor','json','Payments\x20automatically\x20expire\x20after\x20','Failed\x20to\x20get\x20payment\x20information','create','__esModule','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','getPayoutById','../middleware/validation','length','domainMonitoringService','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','75bHrrtA','createUser','731644WhkdqV','/payouts','CoinToPay\x20payment\x20status\x20checked\x20successfully'];a18_0x314d=function(){return _0x16ecfe;};return a18_0x314d();}var __createBinding=this&&this['__createBinding']||(Object[a18_0x2f4ea4(0xbd)]?function(_0x3aebfe,_0x2e9ff2,_0x511901,_0x8da30a){const _0x31db39=a18_0x2f4ea4;if(_0x8da30a===undefined)_0x8da30a=_0x511901;var _0x73a62e=Object[_0x31db39(0xb9)](_0x2e9ff2,_0x511901);(!_0x73a62e||('get'in _0x73a62e?!_0x2e9ff2['__esModule']:_0x73a62e[_0x31db39(0x9b)]||_0x73a62e[_0x31db39(0x9a)]))&&(_0x73a62e={'enumerable':!![],'get':function(){return _0x2e9ff2[_0x511901];}}),Object[_0x31db39(0x76)](_0x3aebfe,_0x8da30a,_0x73a62e);}:function(_0x2b7e6f,_0x542f0f,_0x8860ce,_0x2d905b){if(_0x2d905b===undefined)_0x2d905b=_0x8860ce;_0x2b7e6f[_0x2d905b]=_0x542f0f[_0x8860ce];}),__setModuleDefault=this&&this[a18_0x2f4ea4(0xa6)]||(Object[a18_0x2f4ea4(0xbd)]?function(_0x70e333,_0x10eec7){const _0x1fb42a=a18_0x2f4ea4;Object[_0x1fb42a(0x76)](_0x70e333,_0x1fb42a(0xa7),{'enumerable':!![],'value':_0x10eec7});}:function(_0x3510b3,_0x30c459){const _0x61f304=a18_0x2f4ea4;_0x3510b3[_0x61f304(0xa7)]=_0x30c459;}),__importStar=this&&this[a18_0x2f4ea4(0x8e)]||(function(){var _0x5a682c=function(_0x379eb3){const _0x11e62e=a18_0x23a8;return _0x5a682c=Object[_0x11e62e(0xd9)]||function(_0x10e59c){const _0x3b4d63=_0x11e62e;var _0x22b088=[];for(var _0x535226 in _0x10e59c)if(Object[_0x3b4d63(0xe1)][_0x3b4d63(0x70)]['call'](_0x10e59c,_0x535226))_0x22b088[_0x22b088[_0x3b4d63(0xc2)]]=_0x535226;return _0x22b088;},_0x5a682c(_0x379eb3);};return function(_0x52f96a){const _0x1d90d9=a18_0x23a8;if(_0x52f96a&&_0x52f96a[_0x1d90d9(0xbe)])return _0x52f96a;var _0x418175={};if(_0x52f96a!=null){for(var _0x1b4868=_0x5a682c(_0x52f96a),_0x3fc395=0x0;_0x3fc395<_0x1b4868['length'];_0x3fc395++)if(_0x1b4868[_0x3fc395]!==_0x1d90d9(0xa7))__createBinding(_0x418175,_0x52f96a,_0x1b4868[_0x3fc395]);}return __setModuleDefault(_0x418175,_0x52f96a),_0x418175;};}());Object['defineProperty'](exports,'__esModule',{'value':!![]});const express_1=require(a18_0x2f4ea4(0xb8)),adminController_1=require('../controllers/adminController'),validation_1=require(a18_0x2f4ea4(0xc1)),auth_1=require(a18_0x2f4ea4(0x84)),loggerService_1=require(a18_0x2f4ea4(0xcc)),coinToPayStatusService_1=require(a18_0x2f4ea4(0xcf)),domainMonitoringService_1=require('../services/domainMonitoringService'),router=(0x0,express_1['Router'])(),adminController=new adminController_1['AdminController']();router['use'](auth_1[a18_0x2f4ea4(0x6e)],auth_1[a18_0x2f4ea4(0xab)]),router[a18_0x2f4ea4(0x74)](a18_0x2f4ea4(0x89),adminController[a18_0x2f4ea4(0xe5)]),router['get'](a18_0x2f4ea4(0xaa),adminController[a18_0x2f4ea4(0xd6)]),router[a18_0x2f4ea4(0x74)]('/merchant-statistics',adminController[a18_0x2f4ea4(0x94)]),router['get']('/payout/stats',adminController[a18_0x2f4ea4(0xb4)]),router['get'](a18_0x2f4ea4(0x9d),adminController[a18_0x2f4ea4(0xda)]),router[a18_0x2f4ea4(0x8a)](a18_0x2f4ea4(0x88),(0x0,validation_1[a18_0x2f4ea4(0xb0)])(validation_1[a18_0x2f4ea4(0x9c)]),adminController[a18_0x2f4ea4(0xdc)]),router[a18_0x2f4ea4(0x74)](a18_0x2f4ea4(0xc9),adminController[a18_0x2f4ea4(0x85)]),router['get'](a18_0x2f4ea4(0x99),adminController[a18_0x2f4ea4(0xc0)]),router[a18_0x2f4ea4(0xd1)](a18_0x2f4ea4(0x99),adminController[a18_0x2f4ea4(0xd5)]),router[a18_0x2f4ea4(0x74)]('/payments',adminController[a18_0x2f4ea4(0xad)]),router[a18_0x2f4ea4(0x74)]('/payments/:id',adminController[a18_0x2f4ea4(0x86)]),router[a18_0x2f4ea4(0xa4)](a18_0x2f4ea4(0xa5),adminController[a18_0x2f4ea4(0xde)]),router[a18_0x2f4ea4(0x74)](a18_0x2f4ea4(0xe2),adminController[a18_0x2f4ea4(0xa1)]),router[a18_0x2f4ea4(0x74)]('/users/:id',adminController[a18_0x2f4ea4(0xd2)]),router[a18_0x2f4ea4(0x8a)](a18_0x2f4ea4(0xe2),(0x0,validation_1[a18_0x2f4ea4(0xb0)])(validation_1[a18_0x2f4ea4(0x95)]),adminController[a18_0x2f4ea4(0xc7)]),router['put']('/users/:id',(0x0,validation_1[a18_0x2f4ea4(0xb0)])(validation_1[a18_0x2f4ea4(0xac)]),adminController[a18_0x2f4ea4(0xb3)]),router[a18_0x2f4ea4(0xd1)](a18_0x2f4ea4(0xb6),adminController['deleteUser']),router[a18_0x2f4ea4(0x8a)](a18_0x2f4ea4(0x6f),adminController[a18_0x2f4ea4(0x8b)]),router[a18_0x2f4ea4(0x8a)](a18_0x2f4ea4(0xcd),adminController[a18_0x2f4ea4(0x91)]),router[a18_0x2f4ea4(0x74)]('/logs/stats',(_0x385ce3,_0xdc72ac)=>{const _0x3dbc81=a18_0x2f4ea4;try{const _0x3893de=loggerService_1[_0x3dbc81(0xa3)][_0x3dbc81(0xdb)]();_0xdc72ac[_0x3dbc81(0xba)]({'success':!![],'result':_0x3893de});}catch(_0x132c8a){_0xdc72ac[_0x3dbc81(0x73)](0x1f4)[_0x3dbc81(0xba)]({'success':![],'message':_0x3dbc81(0x7e)});}}),router[a18_0x2f4ea4(0x8a)](a18_0x2f4ea4(0x8c),(_0x594458,_0x3a3ca3)=>{const _0x20c974=a18_0x2f4ea4;try{const {daysToKeep:daysToKeep=0x1e}=_0x594458[_0x20c974(0x72)];loggerService_1['loggerService'][_0x20c974(0xb5)](daysToKeep),_0x3a3ca3[_0x20c974(0xba)]({'success':!![],'message':_0x20c974(0x6c)+daysToKeep+_0x20c974(0xa8)});}catch(_0x2bb613){_0x3a3ca3[_0x20c974(0x73)](0x1f4)[_0x20c974(0xba)]({'success':![],'message':_0x20c974(0x87)});}}),router[a18_0x2f4ea4(0x8a)](a18_0x2f4ea4(0x82),async(_0x19ee9b,_0xb8aebb)=>{const _0x233b4d=a18_0x2f4ea4;try{const {paymentId:_0x59ad19}=_0x19ee9b[_0x233b4d(0x77)];console[_0x233b4d(0xdd)]('üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20'+_0x59ad19),await coinToPayStatusService_1['coinToPayStatusService']['checkPaymentById'](_0x59ad19),_0xb8aebb[_0x233b4d(0xba)]({'success':!![],'message':_0x233b4d(0xca)});}catch(_0x3c609d){console['error'](_0x233b4d(0xd4)+_0x19ee9b[_0x233b4d(0x77)][_0x233b4d(0xd8)]+':',_0x3c609d),_0xb8aebb[_0x233b4d(0x73)](0x1f4)[_0x233b4d(0xba)]({'success':![],'message':_0x3c609d instanceof Error?_0x3c609d['message']:_0x233b4d(0x8d)});}}),router[a18_0x2f4ea4(0x74)](a18_0x2f4ea4(0x7c),(_0x144149,_0x37449e)=>{const _0x4dc2fa=a18_0x2f4ea4;try{const _0x19a2a5=coinToPayStatusService_1[_0x4dc2fa(0x7d)][_0x4dc2fa(0x93)]();_0x37449e[_0x4dc2fa(0xba)]({'success':!![],'result':{..._0x19a2a5,'description':_0x4dc2fa(0x7a),'statusMapping':{'Paid':_0x4dc2fa(0x80),'Awaiting\x20Fiat':_0x4dc2fa(0xe4),'waiting':_0x4dc2fa(0xe4),'expired':_0x4dc2fa(0xa9),'failed':'FAILED'},'autoExpiryNote':_0x4dc2fa(0xbb)+_0x19a2a5[_0x4dc2fa(0x6b)]+_0x4dc2fa(0xe0),'individualTimersNote':'Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly'}});}catch(_0x548300){_0x37449e[_0x4dc2fa(0x73)](0x1f4)['json']({'success':![],'message':_0x4dc2fa(0xc4)});}}),router[a18_0x2f4ea4(0x74)](a18_0x2f4ea4(0xcb),async(_0x3c856b,_0xc5530b)=>{const _0x16037d=a18_0x2f4ea4;try{const {paymentId:_0x2ec419}=_0x3c856b[_0x16037d(0x77)],_0xeac10a=coinToPayStatusService_1[_0x16037d(0x7d)]['getPaymentTimerInfo'](_0x2ec419),_0x2f8a94=(await Promise['resolve']()[_0x16037d(0xce)](()=>__importStar(require(_0x16037d(0x6d)))))[_0x16037d(0xa7)],_0xcb75bb=await _0x2f8a94[_0x16037d(0xb2)][_0x16037d(0x79)]({'where':{'id':_0x2ec419},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0xcb75bb)return _0xc5530b[_0x16037d(0x73)](0x194)[_0x16037d(0xba)]({'success':![],'message':'Payment\x20not\x20found'});_0xc5530b['json']({'success':!![],'result':{'payment':{'id':_0xcb75bb['id'],'gateway':_0xcb75bb[_0x16037d(0x96)],'gatewayPaymentId':_0xcb75bb[_0x16037d(0x7f)],'status':_0xcb75bb['status'],'amount':_0xcb75bb[_0x16037d(0x75)],'currency':_0xcb75bb[_0x16037d(0xd0)],'createdAt':_0xcb75bb[_0x16037d(0x83)],'updatedAt':_0xcb75bb[_0x16037d(0x9e)],'shop':_0xcb75bb['shop']},'timers':_0xeac10a,'isCoinToPay':_0xcb75bb[_0x16037d(0x96)]===_0x16037d(0x9f),'ageInMinutes':Math['floor']((Date[_0x16037d(0x7b)]()-_0xcb75bb[_0x16037d(0x83)][_0x16037d(0xb7)]())/(0x3e8*0x3c))}});}catch(_0x1ec94a){_0xc5530b['status'](0x1f4)[_0x16037d(0xba)]({'success':![],'message':_0x1ec94a instanceof Error?_0x1ec94a[_0x16037d(0xe3)]:_0x16037d(0xbc)});}}),router[a18_0x2f4ea4(0x74)](a18_0x2f4ea4(0x78),(_0x32249c,_0x2ec7f4)=>{const _0x4cbfa6=a18_0x2f4ea4;try{const _0x5f067f=domainMonitoringService_1[_0x4cbfa6(0xc3)][_0x4cbfa6(0xd3)]();_0x2ec7f4[_0x4cbfa6(0xba)]({'success':!![],'result':{..._0x5f067f,'description':'Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','behavior':_0x4cbfa6(0xc5),'encoding':_0x4cbfa6(0xbf)}});}catch(_0x53615e){_0x2ec7f4[_0x4cbfa6(0x73)](0x1f4)[_0x4cbfa6(0xba)]({'success':![],'message':_0x4cbfa6(0x71)});}}),router[a18_0x2f4ea4(0x8a)](a18_0x2f4ea4(0x90),async(_0x4f993c,_0x5cadc5)=>{const _0x4f2c04=a18_0x2f4ea4;try{const _0x442c14=await domainMonitoringService_1[_0x4f2c04(0xc3)][_0x4f2c04(0xaf)]();_0x5cadc5[_0x4f2c04(0xba)]({'success':!![],'result':{'domainAvailable':_0x442c14,'message':_0x442c14?_0x4f2c04(0x97):_0x4f2c04(0xae),'timestamp':new Date()[_0x4f2c04(0x8f)]()}});}catch(_0x472c71){_0x5cadc5[_0x4f2c04(0x73)](0x1f4)[_0x4f2c04(0xba)]({'success':![],'message':_0x472c71 instanceof Error?_0x472c71[_0x4f2c04(0xe3)]:_0x4f2c04(0x98)});}}),exports['default']=router;