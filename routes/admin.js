'use strict';function a19_0x506f(){const _0x36e2be=['Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','deleteUser','manualCheck','updatedAt','/payout/stats','express','domainMonitoringService','loggerService','put','message','/cointopay/stats','Failed\x20to\x20clean\x20old\x20logs','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','getMerchantStatistics','Domain\x20check\x20failed','call','updateCustomerData','gateway','PENDING','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','../config/database','use','/users','/domain-monitoring/check','CoinToPay\x20automatic\x20status\x20checking\x20service','defineProperty','toISOString','authenticateToken','6265007Bminnr','now','../services/coinToPayStatusService','11qUiTvI','createPayoutSchema','json','createPayout','getPayouts','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','/payout/merchants','getStatistics','gatewayPaymentId','findUnique','10905093kHTPXD','722085sHfIDP','__esModule','then','log','/payments/:id/customer','params','../middleware/validation','default','updateCustomerDataSchema','post','getTime','length','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','/payouts/:id','/users/:id','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','hasOwnProperty','error','56228870UDAPBK','cointopay','/statistics','updateUser','/auth','EXPIRED','../services/loggerService','Old\x20logs\x20cleaned\x20(kept\x20last\x20','createdAt','/logs/stats','get','amount','paymentId','/cointopay/payment/:paymentId','validate','cleanOldLogs','../services/domainMonitoringService','2719868HnVYIp','21042tgdWKg','__setModuleDefault','/domain-monitoring/stats','prototype','create','coinToPayStatusService','../middleware/auth','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','getMerchantsAwaitingPayout','8SAhRBB','status','\x20days\x20if\x20not\x20paid','CoinToPay\x20payment\x20status\x20checked\x20successfully','createUser','requireAdmin','Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','/payouts','currency','101820KArtmh','../controllers/adminController','writable','/users/:id/activate','\x20days)','getLogStats','getPayoutById','/cointopay/check/:paymentId','getPaymentTimerInfo','Domain\x20is\x20responding\x20correctly','/payout','checkPaymentById','getPayoutStats','Payments\x20automatically\x20expire\x20after\x20','body','resolve','delete','__importStar','shop','/merchant-statistics','PAID','FAILED','getPaymentById','updateUserSchema','getUsers','getOwnPropertyDescriptor','__createBinding','122HtfdTl','floor','190lHBZzA','Router'];a19_0x506f=function(){return _0x36e2be;};return a19_0x506f();}function a19_0x29c3(_0x461c70,_0xc2be4c){const _0x506fdc=a19_0x506f();return a19_0x29c3=function(_0x29c3ef,_0x345e0c){_0x29c3ef=_0x29c3ef-0x13a;let _0x569892=_0x506fdc[_0x29c3ef];return _0x569892;},a19_0x29c3(_0x461c70,_0xc2be4c);}const a19_0x3f7b25=a19_0x29c3;(function(_0xfb76e2,_0x48d671){const _0x5174cd=a19_0x29c3,_0x8a034=_0xfb76e2();while(!![]){try{const _0x1696b8=parseInt(_0x5174cd(0x17c))/0x1*(-parseInt(_0x5174cd(0x14f))/0x2)+-parseInt(_0x5174cd(0x1aa))/0x3+-parseInt(_0x5174cd(0x14e))/0x4+parseInt(_0x5174cd(0x17e))/0x5*(-parseInt(_0x5174cd(0x161))/0x6)+-parseInt(_0x5174cd(0x19c))/0x7*(parseInt(_0x5174cd(0x158))/0x8)+-parseInt(_0x5174cd(0x1a9))/0x9+-parseInt(_0x5174cd(0x13d))/0xa*(-parseInt(_0x5174cd(0x19f))/0xb);if(_0x1696b8===_0x48d671)break;else _0x8a034['push'](_0x8a034['shift']());}catch(_0x425267){_0x8a034['push'](_0x8a034['shift']());}}}(a19_0x506f,0xa2df5));var __createBinding=this&&this[a19_0x3f7b25(0x17b)]||(Object[a19_0x3f7b25(0x153)]?function(_0x4273ca,_0x516dc8,_0x46af24,_0x3e5163){const _0x5edf66=a19_0x3f7b25;if(_0x3e5163===undefined)_0x3e5163=_0x46af24;var _0x5357e9=Object[_0x5edf66(0x17a)](_0x516dc8,_0x46af24);(!_0x5357e9||(_0x5edf66(0x147)in _0x5357e9?!_0x516dc8['__esModule']:_0x5357e9[_0x5edf66(0x163)]||_0x5357e9['configurable']))&&(_0x5357e9={'enumerable':!![],'get':function(){return _0x516dc8[_0x46af24];}}),Object[_0x5edf66(0x199)](_0x4273ca,_0x3e5163,_0x5357e9);}:function(_0x2133ec,_0xe22f03,_0x20f23c,_0x5bc6e3){if(_0x5bc6e3===undefined)_0x5bc6e3=_0x20f23c;_0x2133ec[_0x5bc6e3]=_0xe22f03[_0x20f23c];}),__setModuleDefault=this&&this[a19_0x3f7b25(0x150)]||(Object[a19_0x3f7b25(0x153)]?function(_0x3826e2,_0x224d35){const _0x1244d2=a19_0x3f7b25;Object[_0x1244d2(0x199)](_0x3826e2,_0x1244d2(0x1b1),{'enumerable':!![],'value':_0x224d35});}:function(_0xa63988,_0x1509ef){_0xa63988['default']=_0x1509ef;}),__importStar=this&&this[a19_0x3f7b25(0x172)]||(function(){var _0x5740d7=function(_0x1d96e8){return _0x5740d7=Object['getOwnPropertyNames']||function(_0x366c78){const _0x1cdd87=a19_0x29c3;var _0x2f81fb=[];for(var _0xb5cb41 in _0x366c78)if(Object[_0x1cdd87(0x152)][_0x1cdd87(0x13b)][_0x1cdd87(0x18f)](_0x366c78,_0xb5cb41))_0x2f81fb[_0x2f81fb['length']]=_0xb5cb41;return _0x2f81fb;},_0x5740d7(_0x1d96e8);};return function(_0x20610e){const _0x4bc7b1=a19_0x29c3;if(_0x20610e&&_0x20610e[_0x4bc7b1(0x1ab)])return _0x20610e;var _0x4802af={};if(_0x20610e!=null){for(var _0x8c5639=_0x5740d7(_0x20610e),_0x265c0d=0x0;_0x265c0d<_0x8c5639[_0x4bc7b1(0x1b5)];_0x265c0d++)if(_0x8c5639[_0x265c0d]!==_0x4bc7b1(0x1b1))__createBinding(_0x4802af,_0x20610e,_0x8c5639[_0x265c0d]);}return __setModuleDefault(_0x4802af,_0x20610e),_0x4802af;};}());Object[a19_0x3f7b25(0x199)](exports,'__esModule',{'value':!![]});const express_1=require(a19_0x3f7b25(0x185)),adminController_1=require(a19_0x3f7b25(0x162)),validation_1=require(a19_0x3f7b25(0x1b0)),auth_1=require(a19_0x3f7b25(0x155)),loggerService_1=require(a19_0x3f7b25(0x143)),coinToPayStatusService_1=require(a19_0x3f7b25(0x19e)),domainMonitoringService_1=require(a19_0x3f7b25(0x14d)),router=(0x0,express_1[a19_0x3f7b25(0x17f)])(),adminController=new adminController_1['AdminController']();router[a19_0x3f7b25(0x195)](auth_1[a19_0x3f7b25(0x19b)],auth_1[a19_0x3f7b25(0x15d)]),router[a19_0x3f7b25(0x147)](a19_0x3f7b25(0x141),adminController['checkAuth']),router['get'](a19_0x3f7b25(0x13f),adminController[a19_0x3f7b25(0x1a6)]),router[a19_0x3f7b25(0x147)](a19_0x3f7b25(0x174),adminController[a19_0x3f7b25(0x18d)]),router['get'](a19_0x3f7b25(0x184),adminController[a19_0x3f7b25(0x16d)]),router[a19_0x3f7b25(0x147)](a19_0x3f7b25(0x1a5),adminController[a19_0x3f7b25(0x157)]),router[a19_0x3f7b25(0x1b3)](a19_0x3f7b25(0x16b),(0x0,validation_1[a19_0x3f7b25(0x14b)])(validation_1[a19_0x3f7b25(0x1a0)]),adminController[a19_0x3f7b25(0x1a2)]),router[a19_0x3f7b25(0x147)](a19_0x3f7b25(0x15f),adminController[a19_0x3f7b25(0x1a3)]),router[a19_0x3f7b25(0x147)]('/payouts/:id',adminController[a19_0x3f7b25(0x167)]),router[a19_0x3f7b25(0x171)](a19_0x3f7b25(0x1b7),adminController['deletePayout']),router[a19_0x3f7b25(0x147)]('/payments',adminController['getPayments']),router[a19_0x3f7b25(0x147)]('/payments/:id',adminController[a19_0x3f7b25(0x177)]),router['put']('/payments/:id',adminController['updatePayment']),router[a19_0x3f7b25(0x188)](a19_0x3f7b25(0x1ae),(0x0,validation_1[a19_0x3f7b25(0x14b)])(validation_1[a19_0x3f7b25(0x1b2)]),adminController[a19_0x3f7b25(0x190)]),router['get']('/users',adminController[a19_0x3f7b25(0x179)]),router[a19_0x3f7b25(0x147)](a19_0x3f7b25(0x1b8),adminController['getUserById']),router['post'](a19_0x3f7b25(0x196),(0x0,validation_1['validate'])(validation_1['createUserSchema']),adminController[a19_0x3f7b25(0x15c)]),router[a19_0x3f7b25(0x188)](a19_0x3f7b25(0x1b8),(0x0,validation_1[a19_0x3f7b25(0x14b)])(validation_1[a19_0x3f7b25(0x178)]),adminController[a19_0x3f7b25(0x140)]),router[a19_0x3f7b25(0x171)](a19_0x3f7b25(0x1b8),adminController[a19_0x3f7b25(0x181)]),router['post']('/users/:id/suspend',adminController['suspendUser']),router[a19_0x3f7b25(0x1b3)](a19_0x3f7b25(0x164),adminController['activateUser']),router['get'](a19_0x3f7b25(0x146),(_0x2ecb3a,_0x5ceeb2)=>{const _0x46d4b6=a19_0x3f7b25;try{const _0x390c34=loggerService_1[_0x46d4b6(0x187)][_0x46d4b6(0x166)]();_0x5ceeb2[_0x46d4b6(0x1a1)]({'success':!![],'result':_0x390c34});}catch(_0x588ae6){_0x5ceeb2[_0x46d4b6(0x159)](0x1f4)[_0x46d4b6(0x1a1)]({'success':![],'message':'Failed\x20to\x20get\x20log\x20statistics'});}}),router[a19_0x3f7b25(0x1b3)]('/logs/clean',(_0x142622,_0x524aea)=>{const _0x331f81=a19_0x3f7b25;try{const {daysToKeep:daysToKeep=0x1e}=_0x142622[_0x331f81(0x16f)];loggerService_1[_0x331f81(0x187)][_0x331f81(0x14c)](daysToKeep),_0x524aea[_0x331f81(0x1a1)]({'success':!![],'message':_0x331f81(0x144)+daysToKeep+_0x331f81(0x165)});}catch(_0x5da773){_0x524aea[_0x331f81(0x159)](0x1f4)[_0x331f81(0x1a1)]({'success':![],'message':_0x331f81(0x18b)});}}),router[a19_0x3f7b25(0x1b3)](a19_0x3f7b25(0x168),async(_0x4b1f49,_0x40e78b)=>{const _0x5e5c72=a19_0x3f7b25;try{const {paymentId:_0x4ff5ed}=_0x4b1f49[_0x5e5c72(0x1af)];console[_0x5e5c72(0x1ad)](_0x5e5c72(0x1a4)+_0x4ff5ed),await coinToPayStatusService_1[_0x5e5c72(0x154)][_0x5e5c72(0x16c)](_0x4ff5ed),_0x40e78b['json']({'success':!![],'message':_0x5e5c72(0x15b)});}catch(_0x237f4a){console[_0x5e5c72(0x13c)](_0x5e5c72(0x156)+_0x4b1f49[_0x5e5c72(0x1af)][_0x5e5c72(0x149)]+':',_0x237f4a),_0x40e78b[_0x5e5c72(0x159)](0x1f4)[_0x5e5c72(0x1a1)]({'success':![],'message':_0x237f4a instanceof Error?_0x237f4a[_0x5e5c72(0x189)]:_0x5e5c72(0x1b6)});}}),router[a19_0x3f7b25(0x147)](a19_0x3f7b25(0x18a),(_0x2898a9,_0x391382)=>{const _0x17132f=a19_0x3f7b25;try{const _0x23a0cb=coinToPayStatusService_1[_0x17132f(0x154)]['getServiceStats']();_0x391382[_0x17132f(0x1a1)]({'success':!![],'result':{..._0x23a0cb,'description':_0x17132f(0x198),'statusMapping':{'Paid':_0x17132f(0x175),'Awaiting\x20Fiat':_0x17132f(0x192),'waiting':_0x17132f(0x192),'expired':_0x17132f(0x142),'failed':_0x17132f(0x176)},'autoExpiryNote':_0x17132f(0x16e)+_0x23a0cb['expiryDays']+_0x17132f(0x15a),'individualTimersNote':_0x17132f(0x13a)}});}catch(_0x42955d){_0x391382[_0x17132f(0x159)](0x1f4)['json']({'success':![],'message':_0x17132f(0x193)});}}),router[a19_0x3f7b25(0x147)](a19_0x3f7b25(0x14a),async(_0x1d49af,_0x2cb73a)=>{const _0x5f021c=a19_0x3f7b25;try{const {paymentId:_0x5df3a6}=_0x1d49af[_0x5f021c(0x1af)],_0x277a33=coinToPayStatusService_1['coinToPayStatusService'][_0x5f021c(0x169)](_0x5df3a6),_0x38c5d3=(await Promise[_0x5f021c(0x170)]()[_0x5f021c(0x1ac)](()=>__importStar(require(_0x5f021c(0x194)))))[_0x5f021c(0x1b1)],_0x3cbd97=await _0x38c5d3['payment'][_0x5f021c(0x1a8)]({'where':{'id':_0x5df3a6},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x3cbd97)return _0x2cb73a[_0x5f021c(0x159)](0x194)[_0x5f021c(0x1a1)]({'success':![],'message':'Payment\x20not\x20found'});_0x2cb73a[_0x5f021c(0x1a1)]({'success':!![],'result':{'payment':{'id':_0x3cbd97['id'],'gateway':_0x3cbd97[_0x5f021c(0x191)],'gatewayPaymentId':_0x3cbd97[_0x5f021c(0x1a7)],'status':_0x3cbd97['status'],'amount':_0x3cbd97[_0x5f021c(0x148)],'currency':_0x3cbd97[_0x5f021c(0x160)],'createdAt':_0x3cbd97['createdAt'],'updatedAt':_0x3cbd97[_0x5f021c(0x183)],'shop':_0x3cbd97[_0x5f021c(0x173)]},'timers':_0x277a33,'isCoinToPay':_0x3cbd97[_0x5f021c(0x191)]===_0x5f021c(0x13e),'ageInMinutes':Math[_0x5f021c(0x17d)]((Date[_0x5f021c(0x19d)]()-_0x3cbd97[_0x5f021c(0x145)][_0x5f021c(0x1b4)]())/(0x3e8*0x3c))}});}catch(_0xb77868){_0x2cb73a[_0x5f021c(0x159)](0x1f4)['json']({'success':![],'message':_0xb77868 instanceof Error?_0xb77868[_0x5f021c(0x189)]:'Failed\x20to\x20get\x20payment\x20information'});}}),router[a19_0x3f7b25(0x147)](a19_0x3f7b25(0x151),(_0x4359fb,_0x2f1468)=>{const _0x304133=a19_0x3f7b25;try{const _0x184317=domainMonitoringService_1[_0x304133(0x186)]['getMonitoringStats']();_0x2f1468[_0x304133(0x1a1)]({'success':!![],'result':{..._0x184317,'description':_0x304133(0x15e),'behavior':_0x304133(0x18c),'encoding':_0x304133(0x180)}});}catch(_0x30d262){_0x2f1468[_0x304133(0x159)](0x1f4)['json']({'success':![],'message':'Failed\x20to\x20get\x20domain\x20monitoring\x20statistics'});}}),router['post'](a19_0x3f7b25(0x197),async(_0x566d41,_0x495e58)=>{const _0x122fa8=a19_0x3f7b25;try{const _0x410875=await domainMonitoringService_1['domainMonitoringService'][_0x122fa8(0x182)]();_0x495e58[_0x122fa8(0x1a1)]({'success':!![],'result':{'domainAvailable':_0x410875,'message':_0x410875?_0x122fa8(0x16a):_0x122fa8(0x18e),'timestamp':new Date()[_0x122fa8(0x19a)]()}});}catch(_0x1d7a79){_0x495e58['status'](0x1f4)['json']({'success':![],'message':_0x1d7a79 instanceof Error?_0x1d7a79[_0x122fa8(0x189)]:'Failed\x20to\x20perform\x20manual\x20domain\x20check'});}}),exports[a19_0x3f7b25(0x1b1)]=router;