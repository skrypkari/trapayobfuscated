'use strict';const a19_0x3520b9=a19_0x467e;(function(_0x1dd182,_0x4b08cf){const _0x4ed8a0=a19_0x467e,_0x4d815b=_0x1dd182();while(!![]){try{const _0x58a57e=-parseInt(_0x4ed8a0(0x201))/0x1*(-parseInt(_0x4ed8a0(0x1f2))/0x2)+parseInt(_0x4ed8a0(0x1df))/0x3*(parseInt(_0x4ed8a0(0x1be))/0x4)+-parseInt(_0x4ed8a0(0x19f))/0x5*(-parseInt(_0x4ed8a0(0x1b6))/0x6)+-parseInt(_0x4ed8a0(0x20a))/0x7*(parseInt(_0x4ed8a0(0x1e7))/0x8)+-parseInt(_0x4ed8a0(0x20d))/0x9+parseInt(_0x4ed8a0(0x19a))/0xa*(parseInt(_0x4ed8a0(0x1a3))/0xb)+parseInt(_0x4ed8a0(0x19d))/0xc*(-parseInt(_0x4ed8a0(0x1dc))/0xd);if(_0x58a57e===_0x4b08cf)break;else _0x4d815b['push'](_0x4d815b['shift']());}catch(_0x86b491){_0x4d815b['push'](_0x4d815b['shift']());}}}(a19_0x4ed9,0x833fe));function a19_0x4ed9(){const _0x39140c=['domainMonitoringService','24yqyKxa','post','15OSLoIO','createdAt','updatePayment','/logs/clean','9720062ySdIHI','Old\x20logs\x20cleaned\x20(kept\x20last\x20','getPayoutStats','createPayoutSchema','getUsers','message','__createBinding','/logs/stats','resolve','create','../controllers/adminController','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','findUnique','getPayments','getLogStats','__esModule','deletePayout','/cointopay/stats','gatewayPaymentId','1150566njcVLr','paymentId','hasOwnProperty','prototype','__setModuleDefault','\x20days\x20if\x20not\x20paid','/statistics','checkAuth','666868jAsxpU','put','/payout/merchants','default','deleteUser','error','payment','getMerchantsAwaitingPayout','activateUser','defineProperty','/merchants/selection','FAILED','Failed\x20to\x20perform\x20manual\x20domain\x20check','/payments/:id','Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics','suspendUser','PAID','getPaymentTimerInfo','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','validate','\x20days)','getUserById','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','getServiceStats','/domain-monitoring/stats','getPayoutById','authenticateToken','Failed\x20to\x20clean\x20old\x20logs','/users/:id','CoinToPay\x20payment\x20status\x20checked\x20successfully','5493748IqQVsS','updateUserSchema','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','9UtqcSo','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','/payouts/:id','log','../services/loggerService','json','get','../services/domainMonitoringService','2248jDVGnq','PENDING','then','floor','use','AdminController','/payout','/payments/:id/customer','configurable','now','createPayout','84134nzfifq','length','/auth','/users/:id/activate','getTime','Domain\x20is\x20responding\x20correctly','/payouts','/merchant-statistics','getMerchantsSelection','express','getOwnPropertyDescriptor','manualCheck','/payments','/users','gateway','3qhXANL','body','Payments\x20automatically\x20expire\x20after\x20','Failed\x20to\x20get\x20payment\x20information','call','toISOString','‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20','../middleware/auth','writable','9002dUytny','loggerService','updateCustomerDataSchema','3070089sQMPsQ','updateUser','requireAdmin','cleanOldLogs','expiryDays','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','coinToPayStatusService','status','currency','../services/coinToPayStatusService','10ZXltfk','params'];a19_0x4ed9=function(){return _0x39140c;};return a19_0x4ed9();}function a19_0x467e(_0x759da5,_0x2f4c2d){const _0x4ed9be=a19_0x4ed9();return a19_0x467e=function(_0x467e9b,_0x55d5c2){_0x467e9b=_0x467e9b-0x194;let _0x3ab198=_0x4ed9be[_0x467e9b];return _0x3ab198;},a19_0x467e(_0x759da5,_0x2f4c2d);}var __createBinding=this&&this[a19_0x3520b9(0x1a9)]||(Object[a19_0x3520b9(0x1ac)]?function(_0x316f5e,_0x586977,_0x2ec25d,_0x23ad1c){const _0x28dc90=a19_0x3520b9;if(_0x23ad1c===undefined)_0x23ad1c=_0x2ec25d;var _0x496ffa=Object[_0x28dc90(0x1fc)](_0x586977,_0x2ec25d);(!_0x496ffa||('get'in _0x496ffa?!_0x586977[_0x28dc90(0x1b2)]:_0x496ffa[_0x28dc90(0x209)]||_0x496ffa[_0x28dc90(0x1ef)]))&&(_0x496ffa={'enumerable':!![],'get':function(){return _0x586977[_0x2ec25d];}}),Object[_0x28dc90(0x1c7)](_0x316f5e,_0x23ad1c,_0x496ffa);}:function(_0x500a7d,_0x168d8f,_0x3a6972,_0x17683d){if(_0x17683d===undefined)_0x17683d=_0x3a6972;_0x500a7d[_0x17683d]=_0x168d8f[_0x3a6972];}),__setModuleDefault=this&&this[a19_0x3520b9(0x1ba)]||(Object[a19_0x3520b9(0x1ac)]?function(_0x219690,_0x2dc275){const _0x12ccfb=a19_0x3520b9;Object['defineProperty'](_0x219690,_0x12ccfb(0x1c1),{'enumerable':!![],'value':_0x2dc275});}:function(_0x4dd05a,_0x2a3542){_0x4dd05a['default']=_0x2a3542;}),__importStar=this&&this['__importStar']||(function(){var _0x38de48=function(_0x56f852){return _0x38de48=Object['getOwnPropertyNames']||function(_0x4f4626){const _0x3d2f30=a19_0x467e;var _0xbb0c08=[];for(var _0x43bed4 in _0x4f4626)if(Object[_0x3d2f30(0x1b9)][_0x3d2f30(0x1b8)][_0x3d2f30(0x205)](_0x4f4626,_0x43bed4))_0xbb0c08[_0xbb0c08['length']]=_0x43bed4;return _0xbb0c08;},_0x38de48(_0x56f852);};return function(_0x16cd7c){const _0x4a46f9=a19_0x467e;if(_0x16cd7c&&_0x16cd7c[_0x4a46f9(0x1b2)])return _0x16cd7c;var _0xb24c10={};if(_0x16cd7c!=null){for(var _0x277c3a=_0x38de48(_0x16cd7c),_0xc41378=0x0;_0xc41378<_0x277c3a[_0x4a46f9(0x1f3)];_0xc41378++)if(_0x277c3a[_0xc41378]!==_0x4a46f9(0x1c1))__createBinding(_0xb24c10,_0x16cd7c,_0x277c3a[_0xc41378]);}return __setModuleDefault(_0xb24c10,_0x16cd7c),_0xb24c10;};}());Object[a19_0x3520b9(0x1c7)](exports,a19_0x3520b9(0x1b2),{'value':!![]});const express_1=require(a19_0x3520b9(0x1fb)),adminController_1=require(a19_0x3520b9(0x1ad)),validation_1=require('../middleware/validation'),auth_1=require(a19_0x3520b9(0x208)),loggerService_1=require(a19_0x3520b9(0x1e3)),coinToPayStatusService_1=require(a19_0x3520b9(0x199)),domainMonitoringService_1=require(a19_0x3520b9(0x1e6)),router=(0x0,express_1['Router'])(),adminController=new adminController_1[(a19_0x3520b9(0x1ec))]();router[a19_0x3520b9(0x1eb)](auth_1[a19_0x3520b9(0x1d8)],auth_1[a19_0x3520b9(0x20f)]),router[a19_0x3520b9(0x1e5)](a19_0x3520b9(0x1f4),adminController[a19_0x3520b9(0x1bd)]),router['get'](a19_0x3520b9(0x1bc),adminController['getStatistics']),router[a19_0x3520b9(0x1e5)](a19_0x3520b9(0x1f9),adminController['getMerchantStatistics']),router['get']('/payout/stats',adminController[a19_0x3520b9(0x1a5)]),router[a19_0x3520b9(0x1e5)](a19_0x3520b9(0x1c0),adminController[a19_0x3520b9(0x1c5)]),router[a19_0x3520b9(0x1e5)](a19_0x3520b9(0x1c8),adminController[a19_0x3520b9(0x1fa)]),router[a19_0x3520b9(0x19e)](a19_0x3520b9(0x1ed),(0x0,validation_1[a19_0x3520b9(0x1d1)])(validation_1[a19_0x3520b9(0x1a6)]),adminController[a19_0x3520b9(0x1f1)]),router[a19_0x3520b9(0x1e5)](a19_0x3520b9(0x1f8),adminController['getPayouts']),router[a19_0x3520b9(0x1e5)]('/payouts/:id',adminController[a19_0x3520b9(0x1d7)]),router['delete'](a19_0x3520b9(0x1e1),adminController[a19_0x3520b9(0x1b3)]),router['get'](a19_0x3520b9(0x1fe),adminController[a19_0x3520b9(0x1b0)]),router[a19_0x3520b9(0x1e5)](a19_0x3520b9(0x1cb),adminController['getPaymentById']),router[a19_0x3520b9(0x1bf)](a19_0x3520b9(0x1cb),adminController[a19_0x3520b9(0x1a1)]),router['put'](a19_0x3520b9(0x1ee),(0x0,validation_1[a19_0x3520b9(0x1d1)])(validation_1[a19_0x3520b9(0x20c)]),adminController['updateCustomerData']),router[a19_0x3520b9(0x1e5)](a19_0x3520b9(0x1ff),adminController[a19_0x3520b9(0x1a7)]),router['get']('/users/:id',adminController[a19_0x3520b9(0x1d3)]),router[a19_0x3520b9(0x19e)](a19_0x3520b9(0x1ff),(0x0,validation_1[a19_0x3520b9(0x1d1)])(validation_1['createUserSchema']),adminController['createUser']),router[a19_0x3520b9(0x1bf)](a19_0x3520b9(0x1da),(0x0,validation_1[a19_0x3520b9(0x1d1)])(validation_1[a19_0x3520b9(0x1dd)]),adminController[a19_0x3520b9(0x20e)]),router['delete'](a19_0x3520b9(0x1da),adminController[a19_0x3520b9(0x1c2)]),router[a19_0x3520b9(0x19e)]('/users/:id/suspend',adminController[a19_0x3520b9(0x1cd)]),router[a19_0x3520b9(0x19e)](a19_0x3520b9(0x1f5),adminController[a19_0x3520b9(0x1c6)]),router['get'](a19_0x3520b9(0x1aa),(_0x4d2c32,_0x53e60b)=>{const _0x4f2d4a=a19_0x3520b9;try{const _0x19bd8d=loggerService_1[_0x4f2d4a(0x20b)][_0x4f2d4a(0x1b1)]();_0x53e60b['json']({'success':!![],'result':_0x19bd8d});}catch(_0xc5ffa0){_0x53e60b[_0x4f2d4a(0x197)](0x1f4)['json']({'success':![],'message':'Failed\x20to\x20get\x20log\x20statistics'});}}),router[a19_0x3520b9(0x19e)](a19_0x3520b9(0x1a2),(_0x55ea70,_0x406d7e)=>{const _0x46582b=a19_0x3520b9;try{const {daysToKeep:daysToKeep=0x1e}=_0x55ea70[_0x46582b(0x202)];loggerService_1[_0x46582b(0x20b)][_0x46582b(0x210)](daysToKeep),_0x406d7e[_0x46582b(0x1e4)]({'success':!![],'message':_0x46582b(0x1a4)+daysToKeep+_0x46582b(0x1d2)});}catch(_0x2349a6){_0x406d7e['status'](0x1f4)[_0x46582b(0x1e4)]({'success':![],'message':_0x46582b(0x1d9)});}}),router[a19_0x3520b9(0x19e)]('/cointopay/check/:paymentId',async(_0x4f82fc,_0x2e7874)=>{const _0x29022e=a19_0x3520b9;try{const {paymentId:_0x5ce3e3}=_0x4f82fc['params'];console[_0x29022e(0x1e2)](_0x29022e(0x1ae)+_0x5ce3e3),await coinToPayStatusService_1['coinToPayStatusService']['checkPaymentById'](_0x5ce3e3),_0x2e7874[_0x29022e(0x1e4)]({'success':!![],'message':_0x29022e(0x1db)});}catch(_0x3ac34e){console[_0x29022e(0x1c3)](_0x29022e(0x207)+_0x4f82fc[_0x29022e(0x19b)][_0x29022e(0x1b7)]+':',_0x3ac34e),_0x2e7874[_0x29022e(0x197)](0x1f4)[_0x29022e(0x1e4)]({'success':![],'message':_0x3ac34e instanceof Error?_0x3ac34e[_0x29022e(0x1a8)]:_0x29022e(0x1d0)});}}),router['get'](a19_0x3520b9(0x1b4),(_0x1db766,_0x57aeaf)=>{const _0xcf84d0=a19_0x3520b9;try{const _0x5e24c3=coinToPayStatusService_1['coinToPayStatusService'][_0xcf84d0(0x1d5)]();_0x57aeaf[_0xcf84d0(0x1e4)]({'success':!![],'result':{..._0x5e24c3,'description':'CoinToPay\x20automatic\x20status\x20checking\x20service','statusMapping':{'Paid':_0xcf84d0(0x1ce),'Awaiting\x20Fiat':'PENDING','waiting':_0xcf84d0(0x1e8),'expired':'EXPIRED','failed':_0xcf84d0(0x1c9)},'autoExpiryNote':_0xcf84d0(0x203)+_0x5e24c3[_0xcf84d0(0x194)]+_0xcf84d0(0x1bb),'individualTimersNote':_0xcf84d0(0x1d4)}});}catch(_0x48e4ee){_0x57aeaf['status'](0x1f4)[_0xcf84d0(0x1e4)]({'success':![],'message':_0xcf84d0(0x1cc)});}}),router[a19_0x3520b9(0x1e5)]('/cointopay/payment/:paymentId',async(_0x369d15,_0x2c2152)=>{const _0x290cc4=a19_0x3520b9;try{const {paymentId:_0x22094d}=_0x369d15['params'],_0x35938f=coinToPayStatusService_1[_0x290cc4(0x196)][_0x290cc4(0x1cf)](_0x22094d),_0x1f8325=(await Promise[_0x290cc4(0x1ab)]()[_0x290cc4(0x1e9)](()=>__importStar(require('../config/database'))))[_0x290cc4(0x1c1)],_0x1bf907=await _0x1f8325[_0x290cc4(0x1c4)][_0x290cc4(0x1af)]({'where':{'id':_0x22094d},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x1bf907)return _0x2c2152['status'](0x194)[_0x290cc4(0x1e4)]({'success':![],'message':'Payment\x20not\x20found'});_0x2c2152['json']({'success':!![],'result':{'payment':{'id':_0x1bf907['id'],'gateway':_0x1bf907['gateway'],'gatewayPaymentId':_0x1bf907[_0x290cc4(0x1b5)],'status':_0x1bf907[_0x290cc4(0x197)],'amount':_0x1bf907['amount'],'currency':_0x1bf907[_0x290cc4(0x198)],'createdAt':_0x1bf907[_0x290cc4(0x1a0)],'updatedAt':_0x1bf907['updatedAt'],'shop':_0x1bf907['shop']},'timers':_0x35938f,'isCoinToPay':_0x1bf907[_0x290cc4(0x200)]==='cointopay','ageInMinutes':Math[_0x290cc4(0x1ea)]((Date[_0x290cc4(0x1f0)]()-_0x1bf907['createdAt'][_0x290cc4(0x1f6)]())/(0x3e8*0x3c))}});}catch(_0x5d17e8){_0x2c2152['status'](0x1f4)[_0x290cc4(0x1e4)]({'success':![],'message':_0x5d17e8 instanceof Error?_0x5d17e8[_0x290cc4(0x1a8)]:_0x290cc4(0x204)});}}),router['get'](a19_0x3520b9(0x1d6),(_0x23e8a0,_0x5c00f4)=>{const _0x45dd7e=a19_0x3520b9;try{const _0x113b86=domainMonitoringService_1[_0x45dd7e(0x19c)]['getMonitoringStats']();_0x5c00f4['json']({'success':!![],'result':{..._0x113b86,'description':'Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','behavior':_0x45dd7e(0x195),'encoding':_0x45dd7e(0x1de)}});}catch(_0x238aaf){_0x5c00f4[_0x45dd7e(0x197)](0x1f4)[_0x45dd7e(0x1e4)]({'success':![],'message':_0x45dd7e(0x1e0)});}}),router[a19_0x3520b9(0x19e)]('/domain-monitoring/check',async(_0x469462,_0x9b47a0)=>{const _0x299329=a19_0x3520b9;try{const _0x1a62ae=await domainMonitoringService_1[_0x299329(0x19c)][_0x299329(0x1fd)]();_0x9b47a0[_0x299329(0x1e4)]({'success':!![],'result':{'domainAvailable':_0x1a62ae,'message':_0x1a62ae?_0x299329(0x1f7):'Domain\x20check\x20failed','timestamp':new Date()[_0x299329(0x206)]()}});}catch(_0x440cd0){_0x9b47a0[_0x299329(0x197)](0x1f4)[_0x299329(0x1e4)]({'success':![],'message':_0x440cd0 instanceof Error?_0x440cd0['message']:_0x299329(0x1ca)});}}),exports['default']=router;