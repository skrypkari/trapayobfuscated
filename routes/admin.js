'use strict';const a19_0xaf3a9a=a19_0x41bf;(function(_0x1e0f30,_0x5703ad){const _0x39ea77=a19_0x41bf,_0x4104a8=_0x1e0f30();while(!![]){try{const _0x28c9fc=-parseInt(_0x39ea77(0xcd))/0x1*(parseInt(_0x39ea77(0xc7))/0x2)+parseInt(_0x39ea77(0x93))/0x3*(-parseInt(_0x39ea77(0xdb))/0x4)+-parseInt(_0x39ea77(0xe4))/0x5+parseInt(_0x39ea77(0xf6))/0x6+parseInt(_0x39ea77(0xf4))/0x7*(parseInt(_0x39ea77(0x90))/0x8)+-parseInt(_0x39ea77(0xb4))/0x9+parseInt(_0x39ea77(0xe7))/0xa*(parseInt(_0x39ea77(0x99))/0xb);if(_0x28c9fc===_0x5703ad)break;else _0x4104a8['push'](_0x4104a8['shift']());}catch(_0x573d9b){_0x4104a8['push'](_0x4104a8['shift']());}}}(a19_0xc964,0xcf381));function a19_0xc964(){const _0x9d9bb2=['gatewayPaymentId','cointopay','Failed\x20to\x20perform\x20manual\x20domain\x20check','status','updatePayment','/cointopay/check/:paymentId','11348743HlKaey','/payments','903768Rgpyig','../services/loggerService','shop','log','coinToPayStatusService','updateCustomerData','../middleware/auth','gateway','CoinToPay\x20automatic\x20status\x20checking\x20service','getTime','/merchants/selection','/users','Failed\x20to\x20get\x20domain\x20monitoring\x20statistics','/payments/:id','requireAdmin','Requests\x20are\x20made\x20with\x20base64\x20encoded\x20URLs','/domain-monitoring/stats','getMerchantsSelection','../config/database','createPayout','8dTHXXX','../services/coinToPayStatusService','getStatistics','54057oszWTo','EXPIRED','delete','error','checkPaymentById','body','16764AIZeCh','getOwnPropertyDescriptor','/payout/stats','authenticateToken','\x20days\x20if\x20not\x20paid','Old\x20logs\x20cleaned\x20(kept\x20last\x20','cleanOldLogs','create','deleteUser','suspendUser','hasOwnProperty','getPaymentById','expiryDays','Failed\x20to\x20check\x20CoinToPay\x20payment\x20status','/users/:id/suspend','/domain-monitoring/check','createUser','getUserById','/payouts/:id','/users/:id','/cointopay/stats','updateUserSchema','payment','getOwnPropertyNames','resolve','defineProperty','Failed\x20to\x20get\x20payment\x20information','15186852HwVWNv','Domain\x20is\x20responding\x20correctly','getPayoutById','message','getServiceStats','post','floor','updateCustomerDataSchema','getMerchantStatistics','üîç\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20requested\x20for\x20payment:\x20','AdminController','/statistics','paymentId','/users/:id/activate','getMonitoringStats','getPayoutStats','checkAuth','__createBinding','PAID','158488gWyUfW','now','length','use','default','currency','1tQZUUb','put','getUsers','configurable','Each\x20new\x20payment\x20gets\x20individual\x20timers:\x201min,\x202min,\x207min,\x2012min,\x20then\x20hourly','/payout/merchants','/payouts','call','updatedAt','__setModuleDefault','json','/payments/:id/customer','params','\x20days)','12uYGgQw','__importStar','deletePayout','loggerService','__esModule','PENDING','findUnique','manualCheck','domainMonitoringService','7841055GwnNCJ','updateUser','validate','16180uBXJAR','writable','Server\x20crashes\x20if\x20domain\x20is\x20not\x20responding\x20after\x20consecutive\x20failures','getMerchantsAwaitingPayout','get','/payout','Payments\x20automatically\x20expire\x20after\x20'];a19_0xc964=function(){return _0x9d9bb2;};return a19_0xc964();}function a19_0x41bf(_0x2a6b2c,_0xba05f7){const _0xc964c=a19_0xc964();return a19_0x41bf=function(_0x41bfd7,_0x47f5cb){_0x41bfd7=_0x41bfd7-0x81;let _0x19f7f2=_0xc964c[_0x41bfd7];return _0x19f7f2;},a19_0x41bf(_0x2a6b2c,_0xba05f7);}var __createBinding=this&&this[a19_0xaf3a9a(0xc5)]||(Object[a19_0xaf3a9a(0xa0)]?function(_0xa9790,_0x43932c,_0x19b8fd,_0x4e6f98){const _0x47b0d5=a19_0xaf3a9a;if(_0x4e6f98===undefined)_0x4e6f98=_0x19b8fd;var _0x134885=Object[_0x47b0d5(0x9a)](_0x43932c,_0x19b8fd);(!_0x134885||(_0x47b0d5(0xeb)in _0x134885?!_0x43932c['__esModule']:_0x134885[_0x47b0d5(0xe8)]||_0x134885[_0x47b0d5(0xd0)]))&&(_0x134885={'enumerable':!![],'get':function(){return _0x43932c[_0x19b8fd];}}),Object[_0x47b0d5(0xb2)](_0xa9790,_0x4e6f98,_0x134885);}:function(_0x542853,_0x1cbd20,_0x4aac4d,_0x518d4d){if(_0x518d4d===undefined)_0x518d4d=_0x4aac4d;_0x542853[_0x518d4d]=_0x1cbd20[_0x4aac4d];}),__setModuleDefault=this&&this[a19_0xaf3a9a(0xd6)]||(Object[a19_0xaf3a9a(0xa0)]?function(_0x45032e,_0x481ddc){const _0x1c9e75=a19_0xaf3a9a;Object[_0x1c9e75(0xb2)](_0x45032e,_0x1c9e75(0xcb),{'enumerable':!![],'value':_0x481ddc});}:function(_0x536ab9,_0x5e8c77){const _0x16d91b=a19_0xaf3a9a;_0x536ab9[_0x16d91b(0xcb)]=_0x5e8c77;}),__importStar=this&&this[a19_0xaf3a9a(0xdc)]||(function(){var _0x5239b6=function(_0xc028cf){const _0x24bfbf=a19_0x41bf;return _0x5239b6=Object[_0x24bfbf(0xb0)]||function(_0x4f4c15){const _0x292602=_0x24bfbf;var _0x5419e6=[];for(var _0x3ffc08 in _0x4f4c15)if(Object['prototype'][_0x292602(0xa3)][_0x292602(0xd4)](_0x4f4c15,_0x3ffc08))_0x5419e6[_0x5419e6[_0x292602(0xc9)]]=_0x3ffc08;return _0x5419e6;},_0x5239b6(_0xc028cf);};return function(_0x146d6b){const _0x2a62fa=a19_0x41bf;if(_0x146d6b&&_0x146d6b[_0x2a62fa(0xdf)])return _0x146d6b;var _0x37bd57={};if(_0x146d6b!=null){for(var _0x3c345d=_0x5239b6(_0x146d6b),_0x172cfe=0x0;_0x172cfe<_0x3c345d[_0x2a62fa(0xc9)];_0x172cfe++)if(_0x3c345d[_0x172cfe]!==_0x2a62fa(0xcb))__createBinding(_0x37bd57,_0x146d6b,_0x3c345d[_0x172cfe]);}return __setModuleDefault(_0x37bd57,_0x146d6b),_0x37bd57;};}());Object['defineProperty'](exports,a19_0xaf3a9a(0xdf),{'value':!![]});const express_1=require('express'),adminController_1=require('../controllers/adminController'),validation_1=require('../middleware/validation'),auth_1=require(a19_0xaf3a9a(0x82)),loggerService_1=require(a19_0xaf3a9a(0xf7)),coinToPayStatusService_1=require(a19_0xaf3a9a(0x91)),domainMonitoringService_1=require('../services/domainMonitoringService'),router=(0x0,express_1['Router'])(),adminController=new adminController_1[(a19_0xaf3a9a(0xbe))]();router[a19_0xaf3a9a(0xca)](auth_1[a19_0xaf3a9a(0x9c)],auth_1[a19_0xaf3a9a(0x8a)]),router[a19_0xaf3a9a(0xeb)]('/auth',adminController[a19_0xaf3a9a(0xc4)]),router[a19_0xaf3a9a(0xeb)](a19_0xaf3a9a(0xbf),adminController[a19_0xaf3a9a(0x92)]),router[a19_0xaf3a9a(0xeb)]('/merchant-statistics',adminController[a19_0xaf3a9a(0xbc)]),router[a19_0xaf3a9a(0xeb)](a19_0xaf3a9a(0x9b),adminController[a19_0xaf3a9a(0xc3)]),router[a19_0xaf3a9a(0xeb)](a19_0xaf3a9a(0xd2),adminController[a19_0xaf3a9a(0xea)]),router['get'](a19_0xaf3a9a(0x86),adminController[a19_0xaf3a9a(0x8d)]),router[a19_0xaf3a9a(0xb9)](a19_0xaf3a9a(0xec),(0x0,validation_1[a19_0xaf3a9a(0xe6)])(validation_1['createPayoutSchema']),adminController[a19_0xaf3a9a(0x8f)]),router[a19_0xaf3a9a(0xeb)](a19_0xaf3a9a(0xd3),adminController['getPayouts']),router['get'](a19_0xaf3a9a(0xab),adminController[a19_0xaf3a9a(0xb6)]),router[a19_0xaf3a9a(0x95)](a19_0xaf3a9a(0xab),adminController[a19_0xaf3a9a(0xdd)]),router[a19_0xaf3a9a(0xeb)](a19_0xaf3a9a(0xf5),adminController['getPayments']),router['get'](a19_0xaf3a9a(0x89),adminController[a19_0xaf3a9a(0xa4)]),router[a19_0xaf3a9a(0xce)](a19_0xaf3a9a(0x89),adminController[a19_0xaf3a9a(0xf2)]),router[a19_0xaf3a9a(0xce)](a19_0xaf3a9a(0xd8),(0x0,validation_1['validate'])(validation_1[a19_0xaf3a9a(0xbb)]),adminController[a19_0xaf3a9a(0x81)]),router[a19_0xaf3a9a(0xeb)](a19_0xaf3a9a(0x87),adminController[a19_0xaf3a9a(0xcf)]),router[a19_0xaf3a9a(0xeb)](a19_0xaf3a9a(0xac),adminController[a19_0xaf3a9a(0xaa)]),router[a19_0xaf3a9a(0xb9)]('/users',(0x0,validation_1['validate'])(validation_1['createUserSchema']),adminController[a19_0xaf3a9a(0xa9)]),router['put']('/users/:id',(0x0,validation_1[a19_0xaf3a9a(0xe6)])(validation_1[a19_0xaf3a9a(0xae)]),adminController[a19_0xaf3a9a(0xe5)]),router[a19_0xaf3a9a(0x95)](a19_0xaf3a9a(0xac),adminController[a19_0xaf3a9a(0xa1)]),router[a19_0xaf3a9a(0xb9)](a19_0xaf3a9a(0xa7),adminController[a19_0xaf3a9a(0xa2)]),router['post'](a19_0xaf3a9a(0xc1),adminController['activateUser']),router['get']('/logs/stats',(_0x59f565,_0x24178f)=>{const _0x428a25=a19_0xaf3a9a;try{const _0xef7d74=loggerService_1['loggerService']['getLogStats']();_0x24178f['json']({'success':!![],'result':_0xef7d74});}catch(_0x51b17b){_0x24178f[_0x428a25(0xf1)](0x1f4)[_0x428a25(0xd7)]({'success':![],'message':'Failed\x20to\x20get\x20log\x20statistics'});}}),router['post']('/logs/clean',(_0x37bcd4,_0x20c2c3)=>{const _0x4de97e=a19_0xaf3a9a;try{const {daysToKeep:daysToKeep=0x1e}=_0x37bcd4[_0x4de97e(0x98)];loggerService_1[_0x4de97e(0xde)][_0x4de97e(0x9f)](daysToKeep),_0x20c2c3[_0x4de97e(0xd7)]({'success':!![],'message':_0x4de97e(0x9e)+daysToKeep+_0x4de97e(0xda)});}catch(_0x467fd4){_0x20c2c3['status'](0x1f4)[_0x4de97e(0xd7)]({'success':![],'message':'Failed\x20to\x20clean\x20old\x20logs'});}}),router[a19_0xaf3a9a(0xb9)](a19_0xaf3a9a(0xf3),async(_0x334b9e,_0x29432c)=>{const _0x2c4471=a19_0xaf3a9a;try{const {paymentId:_0x53d332}=_0x334b9e[_0x2c4471(0xd9)];console[_0x2c4471(0xf9)](_0x2c4471(0xbd)+_0x53d332),await coinToPayStatusService_1[_0x2c4471(0xfa)][_0x2c4471(0x97)](_0x53d332),_0x29432c[_0x2c4471(0xd7)]({'success':!![],'message':'CoinToPay\x20payment\x20status\x20checked\x20successfully'});}catch(_0x327846){console[_0x2c4471(0x96)]('‚ùå\x20[ADMIN]\x20Manual\x20CoinToPay\x20check\x20failed\x20for\x20payment\x20'+_0x334b9e[_0x2c4471(0xd9)][_0x2c4471(0xc0)]+':',_0x327846),_0x29432c[_0x2c4471(0xf1)](0x1f4)['json']({'success':![],'message':_0x327846 instanceof Error?_0x327846['message']:_0x2c4471(0xa6)});}}),router[a19_0xaf3a9a(0xeb)](a19_0xaf3a9a(0xad),(_0x5392d6,_0x13259b)=>{const _0x3d8465=a19_0xaf3a9a;try{const _0xba059d=coinToPayStatusService_1['coinToPayStatusService'][_0x3d8465(0xb8)]();_0x13259b[_0x3d8465(0xd7)]({'success':!![],'result':{..._0xba059d,'description':_0x3d8465(0x84),'statusMapping':{'Paid':_0x3d8465(0xc6),'Awaiting\x20Fiat':_0x3d8465(0xe0),'waiting':_0x3d8465(0xe0),'expired':_0x3d8465(0x94),'failed':'FAILED'},'autoExpiryNote':_0x3d8465(0xed)+_0xba059d[_0x3d8465(0xa5)]+_0x3d8465(0x9d),'individualTimersNote':_0x3d8465(0xd1)}});}catch(_0x5db900){_0x13259b['status'](0x1f4)['json']({'success':![],'message':'Failed\x20to\x20get\x20CoinToPay\x20service\x20statistics'});}}),router[a19_0xaf3a9a(0xeb)]('/cointopay/payment/:paymentId',async(_0x5f5a14,_0x1e954c)=>{const _0x3cbbc2=a19_0xaf3a9a;try{const {paymentId:_0x195c36}=_0x5f5a14[_0x3cbbc2(0xd9)],_0x11f904=coinToPayStatusService_1[_0x3cbbc2(0xfa)]['getPaymentTimerInfo'](_0x195c36),_0x30e92c=(await Promise[_0x3cbbc2(0xb1)]()['then'](()=>__importStar(require(_0x3cbbc2(0x8e)))))[_0x3cbbc2(0xcb)],_0x27516b=await _0x30e92c[_0x3cbbc2(0xaf)][_0x3cbbc2(0xe1)]({'where':{'id':_0x195c36},'select':{'id':!![],'gateway':!![],'gatewayPaymentId':!![],'status':!![],'amount':!![],'currency':!![],'createdAt':!![],'updatedAt':!![],'shopId':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x27516b)return _0x1e954c[_0x3cbbc2(0xf1)](0x194)[_0x3cbbc2(0xd7)]({'success':![],'message':'Payment\x20not\x20found'});_0x1e954c[_0x3cbbc2(0xd7)]({'success':!![],'result':{'payment':{'id':_0x27516b['id'],'gateway':_0x27516b[_0x3cbbc2(0x83)],'gatewayPaymentId':_0x27516b[_0x3cbbc2(0xee)],'status':_0x27516b['status'],'amount':_0x27516b['amount'],'currency':_0x27516b[_0x3cbbc2(0xcc)],'createdAt':_0x27516b['createdAt'],'updatedAt':_0x27516b[_0x3cbbc2(0xd5)],'shop':_0x27516b[_0x3cbbc2(0xf8)]},'timers':_0x11f904,'isCoinToPay':_0x27516b['gateway']===_0x3cbbc2(0xef),'ageInMinutes':Math[_0x3cbbc2(0xba)]((Date[_0x3cbbc2(0xc8)]()-_0x27516b['createdAt'][_0x3cbbc2(0x85)]())/(0x3e8*0x3c))}});}catch(_0x394046){_0x1e954c['status'](0x1f4)[_0x3cbbc2(0xd7)]({'success':![],'message':_0x394046 instanceof Error?_0x394046[_0x3cbbc2(0xb7)]:_0x3cbbc2(0xb3)});}}),router[a19_0xaf3a9a(0xeb)](a19_0xaf3a9a(0x8c),(_0x5e9404,_0x325786)=>{const _0x3fdc72=a19_0xaf3a9a;try{const _0x4d7b28=domainMonitoringService_1[_0x3fdc72(0xe3)][_0x3fdc72(0xc2)]();_0x325786[_0x3fdc72(0xd7)]({'success':!![],'result':{..._0x4d7b28,'description':'Domain\x20monitoring\x20service\x20for\x20amaterasy884.icu','behavior':_0x3fdc72(0xe9),'encoding':_0x3fdc72(0x8b)}});}catch(_0x31e774){_0x325786[_0x3fdc72(0xf1)](0x1f4)['json']({'success':![],'message':_0x3fdc72(0x88)});}}),router[a19_0xaf3a9a(0xb9)](a19_0xaf3a9a(0xa8),async(_0xde6064,_0xd4aa0b)=>{const _0x4e249c=a19_0xaf3a9a;try{const _0x436cb9=await domainMonitoringService_1[_0x4e249c(0xe3)][_0x4e249c(0xe2)]();_0xd4aa0b[_0x4e249c(0xd7)]({'success':!![],'result':{'domainAvailable':_0x436cb9,'message':_0x436cb9?_0x4e249c(0xb5):'Domain\x20check\x20failed','timestamp':new Date()['toISOString']()}});}catch(_0x519747){_0xd4aa0b['status'](0x1f4)[_0x4e249c(0xd7)]({'success':![],'message':_0x519747 instanceof Error?_0x519747[_0x4e249c(0xb7)]:_0x4e249c(0xf0)});}}),exports[a19_0xaf3a9a(0xcb)]=router;