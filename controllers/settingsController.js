'use strict';const a15_0x5d57ad=a15_0x6431;function a15_0x6431(_0x2f6405,_0x4cab53){_0x2f6405=_0x2f6405-0x17d;const _0x352a95=a15_0x352a();let _0x64316e=_0x352a95[_0x2f6405];return _0x64316e;}function a15_0x352a(){const _0x468818=['deleteAccount','changePassword','json','539Ouzhzs','SettingsService','updateNotifications','Telegram\x20bot\x20settings\x20updated\x20successfully','Account\x20deleted\x20successfully','22060ILBQVP','updateTelegramSettings','Webhook\x20settings\x20updated\x20successfully','params','2vqaooz','Password\x20updated\x20successfully','34567752DIPpSx','24wwLkhU','223332nPOnDa','disconnectTelegramSession','__esModule','804735qfXhTE','revokeApiKeys','defineProperty','settingsService','3855615HBqChV','69XZWjnz','SettingsController','93966hCAAII','getSettings','body','getTelegramSessions','147fseWTZ','Unauthorized','../services/settingsService','user','1236253XyaNeI','status','updateWebhookSettings'];a15_0x352a=function(){return _0x468818;};return a15_0x352a();}(function(_0x407a4e,_0x118a9e){const _0xdbb6e1=a15_0x6431,_0x512017=_0x407a4e();while(!![]){try{const _0x4e0768=parseInt(_0xdbb6e1(0x191))/0x1*(-parseInt(_0xdbb6e1(0x1a0))/0x2)+-parseInt(_0xdbb6e1(0x187))/0x3*(parseInt(_0xdbb6e1(0x17f))/0x4)+parseInt(_0xdbb6e1(0x186))/0x5+parseInt(_0xdbb6e1(0x189))/0x6*(-parseInt(_0xdbb6e1(0x18d))/0x7)+-parseInt(_0xdbb6e1(0x17e))/0x8*(parseInt(_0xdbb6e1(0x182))/0x9)+-parseInt(_0xdbb6e1(0x19c))/0xa*(-parseInt(_0xdbb6e1(0x197))/0xb)+parseInt(_0xdbb6e1(0x17d))/0xc;if(_0x4e0768===_0x118a9e)break;else _0x512017['push'](_0x512017['shift']());}catch(_0x42f9eb){_0x512017['push'](_0x512017['shift']());}}}(a15_0x352a,0x9cd15));Object[a15_0x5d57ad(0x184)](exports,a15_0x5d57ad(0x181),{'value':!![]}),exports[a15_0x5d57ad(0x188)]=void 0x0;const settingsService_1=require(a15_0x5d57ad(0x18f));class SettingsController{constructor(){const _0xa1a921=a15_0x5d57ad;this[_0xa1a921(0x18a)]=async(_0x3aefd0,_0x403bc0,_0x3ead6f)=>{const _0xa5dc0a=_0xa1a921;try{const _0x3a56ae=_0x3aefd0[_0xa5dc0a(0x190)]?.['id'];if(!_0x3a56ae)return _0x403bc0[_0xa5dc0a(0x192)](0x191)[_0xa5dc0a(0x196)]({'success':![],'message':'Unauthorized'});const _0x233d64=await this[_0xa5dc0a(0x185)]['getShopSettings'](_0x3a56ae);_0x403bc0[_0xa5dc0a(0x196)]({'success':!![],'message':'Shop\x20settings\x20retrieved\x20successfully','data':_0x233d64});}catch(_0x5696fe){_0x3ead6f(_0x5696fe);}},this['changePassword']=async(_0x4e5ac8,_0x2014f4,_0x2d6be7)=>{const _0x548d26=_0xa1a921;try{const _0xb4d227=_0x4e5ac8['user']?.['id'];if(!_0xb4d227)return _0x2014f4[_0x548d26(0x192)](0x191)[_0x548d26(0x196)]({'success':![],'message':'Unauthorized'});const _0x4c4978=_0x4e5ac8['body'];await this['settingsService'][_0x548d26(0x195)](_0xb4d227,_0x4c4978),_0x2014f4[_0x548d26(0x196)]({'success':!![],'message':_0x548d26(0x1a1)});}catch(_0x75a4f0){_0x2d6be7(_0x75a4f0);}},this['updateNotifications']=async(_0x2dc3d3,_0x419f37,_0x13b13a)=>{const _0x1d22fb=_0xa1a921;try{const _0x11d6c8=_0x2dc3d3[_0x1d22fb(0x190)]?.['id'];if(!_0x11d6c8)return _0x419f37[_0x1d22fb(0x192)](0x191)[_0x1d22fb(0x196)]({'success':![],'message':'Unauthorized'});const _0x34707c=_0x2dc3d3[_0x1d22fb(0x18b)];await this[_0x1d22fb(0x185)][_0x1d22fb(0x199)](_0x11d6c8,_0x34707c),_0x419f37['json']({'success':!![],'message':'Notification\x20preferences\x20updated\x20successfully'});}catch(_0xc77fd3){_0x13b13a(_0xc77fd3);}},this[_0xa1a921(0x19d)]=async(_0x43e74a,_0x502671,_0xa48d20)=>{const _0x4a7da5=_0xa1a921;try{const _0x37ea46=_0x43e74a[_0x4a7da5(0x190)]?.['id'];if(!_0x37ea46)return _0x502671[_0x4a7da5(0x192)](0x191)[_0x4a7da5(0x196)]({'success':![],'message':_0x4a7da5(0x18e)});const _0x1a2540=_0x43e74a[_0x4a7da5(0x18b)];await this[_0x4a7da5(0x185)][_0x4a7da5(0x19d)](_0x37ea46,_0x1a2540),_0x502671['json']({'success':!![],'message':_0x4a7da5(0x19a)});}catch(_0x5673c7){_0xa48d20(_0x5673c7);}},this['updateWebhookSettings']=async(_0x25f481,_0x10c5d4,_0x34b6e3)=>{const _0x48d68a=_0xa1a921;try{const _0xb81387=_0x25f481['user']?.['id'];if(!_0xb81387)return _0x10c5d4[_0x48d68a(0x192)](0x191)[_0x48d68a(0x196)]({'success':![],'message':_0x48d68a(0x18e)});const _0x1c2306=_0x25f481[_0x48d68a(0x18b)];await this[_0x48d68a(0x185)][_0x48d68a(0x193)](_0xb81387,_0x1c2306),_0x10c5d4['json']({'success':!![],'message':_0x48d68a(0x19e)});}catch(_0x40352a){_0x34b6e3(_0x40352a);}},this[_0xa1a921(0x183)]=async(_0x13b833,_0x5b0701,_0x428661)=>{const _0x2d10e2=_0xa1a921;try{const _0x116377=_0x13b833[_0x2d10e2(0x190)]?.['id'];if(!_0x116377)return _0x5b0701[_0x2d10e2(0x192)](0x191)[_0x2d10e2(0x196)]({'success':![],'message':_0x2d10e2(0x18e)});const {twoFactorToken:_0xd70bc3}=_0x13b833[_0x2d10e2(0x18b)];await this[_0x2d10e2(0x185)]['revokeAllApiKeys'](_0x116377,_0xd70bc3),_0x5b0701[_0x2d10e2(0x196)]({'success':!![],'message':'All\x20API\x20keys\x20revoked\x20successfully'});}catch(_0x2b3a72){_0x428661(_0x2b3a72);}},this[_0xa1a921(0x194)]=async(_0x311c17,_0x2b70a3,_0x1eba65)=>{const _0xd861c2=_0xa1a921;try{const _0x41f35b=_0x311c17['user']?.['id'];if(!_0x41f35b)return _0x2b70a3[_0xd861c2(0x192)](0x191)[_0xd861c2(0x196)]({'success':![],'message':_0xd861c2(0x18e)});const _0xfd2aa8=_0x311c17['body'];await this[_0xd861c2(0x185)]['deleteAccount'](_0x41f35b,_0xfd2aa8),_0x2b70a3[_0xd861c2(0x196)]({'success':!![],'message':_0xd861c2(0x19b)});}catch(_0x151ecc){_0x1eba65(_0x151ecc);}},this[_0xa1a921(0x18c)]=async(_0x54cfb3,_0xc893af,_0xf9abba)=>{const _0x31ba69=_0xa1a921;try{const _0x5e3b83=_0x54cfb3[_0x31ba69(0x190)]?.['id'];if(!_0x5e3b83)return _0xc893af[_0x31ba69(0x192)](0x191)[_0x31ba69(0x196)]({'success':![],'message':'Unauthorized'});const _0x18d217=await this['settingsService'][_0x31ba69(0x18c)](_0x5e3b83);_0xc893af[_0x31ba69(0x196)]({'success':!![],'sessions':_0x18d217});}catch(_0xb53ecd){_0xf9abba(_0xb53ecd);}},this[_0xa1a921(0x180)]=async(_0x58a011,_0x5344b7,_0x19d2c2)=>{const _0x5f55d3=_0xa1a921;try{const _0x4e1202=_0x58a011[_0x5f55d3(0x190)]?.['id'];if(!_0x4e1202)return _0x5344b7['status'](0x191)[_0x5f55d3(0x196)]({'success':![],'message':_0x5f55d3(0x18e)});const {telegramUserId:_0x36508f}=_0x58a011[_0x5f55d3(0x19f)];await this[_0x5f55d3(0x185)][_0x5f55d3(0x180)](_0x4e1202,_0x36508f),_0x5344b7[_0x5f55d3(0x196)]({'success':!![],'message':'Telegram\x20session\x20disconnected\x20successfully'});}catch(_0x2bc6da){_0x19d2c2(_0x2bc6da);}},this[_0xa1a921(0x185)]=new settingsService_1[(_0xa1a921(0x198))]();}}exports[a15_0x5d57ad(0x188)]=SettingsController;