'use strict';const a6_0x132e7f=a6_0x554d;function a6_0x22fd(){const _0x168334=['parse','605UbuFRz','681411OPbnAJ','displayName','getActiveGateways','2NeDbyv','isActive','1984AIwhgA','filter','8bmpkLb','name','status','1899490Lqxzaf','includes','findUnique','592461QYJdqz','1747158xkBirx','paymentGateways','AVAILABLE_GATEWAYS','Plisio','__esModule','Unauthorized','json','../config/database','1786211hDcDyu','206823QMzosj','map','__importDefault','error','getAllGateways','GatewayController'];a6_0x22fd=function(){return _0x168334;};return a6_0x22fd();}(function(_0x1ae77f,_0x293435){const _0x3f0b5f=a6_0x554d,_0x51f98a=_0x1ae77f();while(!![]){try{const _0x130676=parseInt(_0x3f0b5f(0x111))/0x1+-parseInt(_0x3f0b5f(0x114))/0x2*(-parseInt(_0x3f0b5f(0x128))/0x3)+parseInt(_0x3f0b5f(0x116))/0x4*(-parseInt(_0x3f0b5f(0x110))/0x5)+-parseInt(_0x3f0b5f(0x11f))/0x6+parseInt(_0x3f0b5f(0x127))/0x7+-parseInt(_0x3f0b5f(0x118))/0x8*(parseInt(_0x3f0b5f(0x11e))/0x9)+-parseInt(_0x3f0b5f(0x11b))/0xa;if(_0x130676===_0x293435)break;else _0x51f98a['push'](_0x51f98a['shift']());}catch(_0x58ac64){_0x51f98a['push'](_0x51f98a['shift']());}}}(a6_0x22fd,0x614ca));var __importDefault=this&&this[a6_0x132e7f(0x12a)]||function(_0x31f8f1){return _0x31f8f1&&_0x31f8f1['__esModule']?_0x31f8f1:{'default':_0x31f8f1};};Object['defineProperty'](exports,a6_0x132e7f(0x123),{'value':!![]}),exports[a6_0x132e7f(0x10e)]=void 0x0;const gateway_1=require('../types/gateway'),database_1=__importDefault(require(a6_0x132e7f(0x126)));class GatewayController{constructor(){const _0x421891=a6_0x132e7f;this['getAvailableGateways']=async(_0x5be4f6,_0x73e6f9,_0x22ed5a)=>{const _0x12c552=a6_0x554d;try{const _0x3dec52=_0x5be4f6['user']?.['id'];if(!_0x3dec52)return _0x73e6f9[_0x12c552(0x11a)](0x191)[_0x12c552(0x125)]({'success':![],'message':_0x12c552(0x124)});const _0x25eac6=await database_1['default']['shop'][_0x12c552(0x11d)]({'where':{'id':_0x3dec52},'select':{'paymentGateways':!![]}});if(!_0x25eac6)return _0x73e6f9[_0x12c552(0x11a)](0x194)[_0x12c552(0x125)]({'success':![],'message':'Shop\x20not\x20found'});let _0x9fc47c=[];if(_0x25eac6['paymentGateways'])try{_0x9fc47c=JSON[_0x12c552(0x10f)](_0x25eac6[_0x12c552(0x120)]);}catch(_0x17526e){console[_0x12c552(0x10c)]('Error\x20parsing\x20payment\x20gateways:',_0x17526e),_0x9fc47c=['Plisio'];}else _0x9fc47c=[_0x12c552(0x122)];const _0x5d8b31=gateway_1[_0x12c552(0x121)][_0x12c552(0x117)](_0x3c2ad0=>_0x3c2ad0[_0x12c552(0x115)]&&_0x9fc47c[_0x12c552(0x11c)](_0x3c2ad0['displayName']));_0x73e6f9[_0x12c552(0x125)]({'success':!![],'gateways':_0x5d8b31['map'](_0x5c52b6=>({'id':_0x5c52b6['id'],'name':_0x5c52b6[_0x12c552(0x119)],'displayName':_0x5c52b6[_0x12c552(0x112)],'isActive':_0x5c52b6[_0x12c552(0x115)]}))});}catch(_0x23eab6){_0x22ed5a(_0x23eab6);}},this[_0x421891(0x10d)]=async(_0x199359,_0xbae7b8,_0x2d62af)=>{const _0xc00bb=_0x421891;try{_0xbae7b8[_0xc00bb(0x125)]({'success':!![],'gateways':gateway_1[_0xc00bb(0x121)][_0xc00bb(0x129)](_0x66b93b=>({'id':_0x66b93b['id'],'name':_0x66b93b['name'],'displayName':_0x66b93b[_0xc00bb(0x112)],'isActive':_0x66b93b[_0xc00bb(0x115)]}))});}catch(_0x285680){_0x2d62af(_0x285680);}},this[_0x421891(0x113)]=async(_0x8c5640,_0x9c1db0,_0x26845b)=>{const _0x10b7a4=_0x421891;try{const _0x2ef00e=(0x0,gateway_1['getActiveGateways'])();_0x9c1db0['json']({'success':!![],'gateways':_0x2ef00e[_0x10b7a4(0x129)](_0x131b12=>({'id':_0x131b12['id'],'name':_0x131b12[_0x10b7a4(0x119)],'displayName':_0x131b12['displayName'],'isActive':_0x131b12[_0x10b7a4(0x115)]}))});}catch(_0x22915e){_0x26845b(_0x22915e);}};}}function a6_0x554d(_0x2f842a,_0x3c78dd){const _0x22fdeb=a6_0x22fd();return a6_0x554d=function(_0x554dd6,_0x2e1734){_0x554dd6=_0x554dd6-0x10c;let _0x58a7c3=_0x22fdeb[_0x554dd6];return _0x58a7c3;},a6_0x554d(_0x2f842a,_0x3c78dd);}exports[a6_0x132e7f(0x10e)]=GatewayController;