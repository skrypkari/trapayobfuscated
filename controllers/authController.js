'use strict';const a4_0x4d5ed8=a4_0x1846;function a4_0x1846(_0x370b1d,_0x520a14){const _0x551d6f=a4_0x551d();return a4_0x1846=function(_0x1846f6,_0x4c2789){_0x1846f6=_0x1846f6-0xc2;let _0x4e8771=_0x551d6f[_0x1846f6];return _0x4e8771;},a4_0x1846(_0x370b1d,_0x520a14);}function a4_0x551d(){const _0xb5ee0c=['shop','../services/authService','then','username','tokenBlacklistService','6SEkYYj','authService','2794vXDrAZ','11652idjiUR','exp','8brUqay','../services/tokenBlacklistService','body','Failed\x20to\x20send\x20failed\x20login\x20notification:','prototype','role','error','blacklistToken','default','../config/database','findUnique','1670OhFNWp','json','sendLoginNotification','getOwnPropertyNames','3900eEtLfQ','1281357SIObOT','user','unknown','connection','getStats','Logged\x20out\x20successfully','51660rLdrAC','get','64RcvhQp','telegramBotService','__esModule','33819UHavOT','length','defineProperty','remoteAddress','120vIkwiN','AuthService','AuthController','logout','323409hUZsXg','resolve','41734muRGud','login','__createBinding','create','token'];a4_0x551d=function(){return _0xb5ee0c;};return a4_0x551d();}(function(_0x70d419,_0x252ddd){const _0x2b8155=a4_0x1846,_0x11cc9b=_0x70d419();while(!![]){try{const _0x492a52=-parseInt(_0x2b8155(0xea))/0x1*(parseInt(_0x2b8155(0xca))/0x2)+-parseInt(_0x2b8155(0xf2))/0x3*(parseInt(_0x2b8155(0xcf))/0x4)+-parseInt(_0x2b8155(0xe5))/0x5*(-parseInt(_0x2b8155(0xee))/0x6)+-parseInt(_0x2b8155(0xf4))/0x7*(-parseInt(_0x2b8155(0xe7))/0x8)+-parseInt(_0x2b8155(0xdf))/0x9+parseInt(_0x2b8155(0xda))/0xa*(parseInt(_0x2b8155(0xcc))/0xb)+parseInt(_0x2b8155(0xcd))/0xc*(parseInt(_0x2b8155(0xde))/0xd);if(_0x492a52===_0x252ddd)break;else _0x11cc9b['push'](_0x11cc9b['shift']());}catch(_0x4bf4aa){_0x11cc9b['push'](_0x11cc9b['shift']());}}}(a4_0x551d,0x1f66a));var __createBinding=this&&this[a4_0x4d5ed8(0xc2)]||(Object[a4_0x4d5ed8(0xc3)]?function(_0x8785a5,_0x33f583,_0x3a0cc4,_0x434d4b){const _0x51dbde=a4_0x4d5ed8;if(_0x434d4b===undefined)_0x434d4b=_0x3a0cc4;var _0x277b54=Object['getOwnPropertyDescriptor'](_0x33f583,_0x3a0cc4);(!_0x277b54||('get'in _0x277b54?!_0x33f583[_0x51dbde(0xe9)]:_0x277b54['writable']||_0x277b54['configurable']))&&(_0x277b54={'enumerable':!![],'get':function(){return _0x33f583[_0x3a0cc4];}}),Object[_0x51dbde(0xec)](_0x8785a5,_0x434d4b,_0x277b54);}:function(_0x4c99cc,_0x1174cf,_0x6534cb,_0x242b9a){if(_0x242b9a===undefined)_0x242b9a=_0x6534cb;_0x4c99cc[_0x242b9a]=_0x1174cf[_0x6534cb];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a4_0x4d5ed8(0xc3)]?function(_0x4104c9,_0x58be5d){Object['defineProperty'](_0x4104c9,'default',{'enumerable':!![],'value':_0x58be5d});}:function(_0x559051,_0x4f0e6c){const _0x383c4d=a4_0x4d5ed8;_0x559051[_0x383c4d(0xd7)]=_0x4f0e6c;}),__importStar=this&&this['__importStar']||(function(){var _0x131c9b=function(_0x25b839){const _0x497143=a4_0x1846;return _0x131c9b=Object[_0x497143(0xdd)]||function(_0x29d1ba){const _0x38ac50=_0x497143;var _0x1dc766=[];for(var _0x4556ed in _0x29d1ba)if(Object[_0x38ac50(0xd3)]['hasOwnProperty']['call'](_0x29d1ba,_0x4556ed))_0x1dc766[_0x1dc766['length']]=_0x4556ed;return _0x1dc766;},_0x131c9b(_0x25b839);};return function(_0x28a673){const _0xd1049d=a4_0x1846;if(_0x28a673&&_0x28a673['__esModule'])return _0x28a673;var _0x5cf8a4={};if(_0x28a673!=null){for(var _0xc097d2=_0x131c9b(_0x28a673),_0x4da554=0x0;_0x4da554<_0xc097d2[_0xd1049d(0xeb)];_0x4da554++)if(_0xc097d2[_0x4da554]!=='default')__createBinding(_0x5cf8a4,_0x28a673,_0xc097d2[_0x4da554]);}return __setModuleDefault(_0x5cf8a4,_0x28a673),_0x5cf8a4;};}());Object[a4_0x4d5ed8(0xec)](exports,a4_0x4d5ed8(0xe9),{'value':!![]}),exports[a4_0x4d5ed8(0xf0)]=void 0x0;const authService_1=require(a4_0x4d5ed8(0xc6)),tokenBlacklistService_1=require(a4_0x4d5ed8(0xd0)),telegramBotService_1=require('../services/telegramBotService');class AuthController{constructor(){const _0x40b388=a4_0x4d5ed8;this[_0x40b388(0xf5)]=async(_0x5f37db,_0x220c99,_0x3ad948)=>{const _0xccdc58=_0x40b388;try{const _0x277d08=_0x5f37db[_0xccdc58(0xd1)],_0x52597c=_0x5f37db['ip']||_0x5f37db[_0xccdc58(0xe2)][_0xccdc58(0xed)]||_0xccdc58(0xe1),_0x2da34e=_0x5f37db[_0xccdc58(0xe6)]('User-Agent')||_0xccdc58(0xe1);let _0x5ca1c0=![],_0x53fbaa=null;try{const _0x32fa54=await this[_0xccdc58(0xcb)][_0xccdc58(0xf5)](_0x277d08);_0x5ca1c0=!![],_0x32fa54[_0xccdc58(0xd4)]===_0xccdc58(0xc5)&&_0x32fa54[_0xccdc58(0xe0)]?.['id']&&(_0x53fbaa=_0x32fa54[_0xccdc58(0xe0)]['id']),_0x53fbaa&&await telegramBotService_1[_0xccdc58(0xe8)][_0xccdc58(0xdc)](_0x53fbaa,{'username':_0x277d08[_0xccdc58(0xc8)],'ipAddress':_0x52597c,'userAgent':_0x2da34e,'timestamp':new Date(),'success':!![]}),_0x220c99[_0xccdc58(0xdb)]({'success':!![],'result':_0x32fa54});}catch(_0x378aa6){try{const _0x57ff48=(await Promise[_0xccdc58(0xf3)]()[_0xccdc58(0xc7)](()=>__importStar(require(_0xccdc58(0xd8)))))[_0xccdc58(0xd7)],_0x3f482c=await _0x57ff48[_0xccdc58(0xc5)][_0xccdc58(0xd9)]({'where':{'username':_0x277d08[_0xccdc58(0xc8)]},'select':{'id':!![]}});_0x3f482c&&await telegramBotService_1[_0xccdc58(0xe8)][_0xccdc58(0xdc)](_0x3f482c['id'],{'username':_0x277d08[_0xccdc58(0xc8)],'ipAddress':_0x52597c,'userAgent':_0x2da34e,'timestamp':new Date(),'success':![]});}catch(_0x3dc9bc){console[_0xccdc58(0xd5)](_0xccdc58(0xd2),_0x3dc9bc);}throw _0x378aa6;}}catch(_0x4fced4){_0x3ad948(_0x4fced4);}},this['me']=async(_0x4ec382,_0xa8d25,_0x15bf90)=>{const _0x3ca604=_0x40b388;try{const _0x249f42=_0x4ec382[_0x3ca604(0xe0)];_0xa8d25[_0x3ca604(0xdb)]({'success':!![],'result':{'id':_0x249f42?.['id'],'username':_0x249f42?.[_0x3ca604(0xc8)],'role':_0x249f42?.['role']}});}catch(_0x4ae667){_0x15bf90(_0x4ae667);}},this[_0x40b388(0xf1)]=async(_0x8a3965,_0x1b91e4,_0x29e835)=>{const _0x44059f=_0x40b388;try{const _0x14f6e8=_0x8a3965[_0x44059f(0xc4)],_0x538850=_0x8a3965[_0x44059f(0xe0)];_0x14f6e8&&_0x538850?.[_0x44059f(0xce)]&&tokenBlacklistService_1[_0x44059f(0xc9)][_0x44059f(0xd6)](_0x14f6e8,_0x538850[_0x44059f(0xce)]),_0x1b91e4[_0x44059f(0xdb)]({'success':!![],'message':_0x44059f(0xe4)});}catch(_0xc3fd2c){_0x29e835(_0xc3fd2c);}},this['getBlacklistStats']=async(_0x52664a,_0x771d48,_0x12c98b)=>{const _0x352d6=_0x40b388;try{const _0x222a54=tokenBlacklistService_1[_0x352d6(0xc9)][_0x352d6(0xe3)]();_0x771d48['json']({'success':!![],'result':_0x222a54});}catch(_0x1f2ad8){_0x12c98b(_0x1f2ad8);}},this['authService']=new authService_1[(_0x40b388(0xef))]();}}exports[a4_0x4d5ed8(0xf0)]=AuthController;