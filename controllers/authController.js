'use strict';const a4_0x4b1de7=a4_0x3598;(function(_0x1f5e4a,_0x190e62){const _0x5b0f79=a4_0x3598,_0x57ce07=_0x1f5e4a();while(!![]){try{const _0x23affb=-parseInt(_0x5b0f79(0xba))/0x1*(parseInt(_0x5b0f79(0xbe))/0x2)+-parseInt(_0x5b0f79(0xcb))/0x3*(parseInt(_0x5b0f79(0xb0))/0x4)+parseInt(_0x5b0f79(0xbf))/0x5*(-parseInt(_0x5b0f79(0xca))/0x6)+-parseInt(_0x5b0f79(0xc6))/0x7+-parseInt(_0x5b0f79(0xc2))/0x8*(-parseInt(_0x5b0f79(0xb7))/0x9)+parseInt(_0x5b0f79(0xc4))/0xa*(-parseInt(_0x5b0f79(0xb5))/0xb)+parseInt(_0x5b0f79(0xae))/0xc;if(_0x23affb===_0x190e62)break;else _0x57ce07['push'](_0x57ce07['shift']());}catch(_0x299e4b){_0x57ce07['push'](_0x57ce07['shift']());}}}(a4_0x3c56,0x2077f));var __createBinding=this&&this[a4_0x4b1de7(0x9d)]||(Object['create']?function(_0x1668cf,_0xf572e5,_0x40960e,_0x587042){const _0x22afbe=a4_0x4b1de7;if(_0x587042===undefined)_0x587042=_0x40960e;var _0x2e862e=Object[_0x22afbe(0xcc)](_0xf572e5,_0x40960e);(!_0x2e862e||(_0x22afbe(0x9c)in _0x2e862e?!_0xf572e5['__esModule']:_0x2e862e[_0x22afbe(0xa0)]||_0x2e862e['configurable']))&&(_0x2e862e={'enumerable':!![],'get':function(){return _0xf572e5[_0x40960e];}}),Object[_0x22afbe(0xc3)](_0x1668cf,_0x587042,_0x2e862e);}:function(_0x20b3be,_0x4ca93c,_0x40e32b,_0x1c3f85){if(_0x1c3f85===undefined)_0x1c3f85=_0x40e32b;_0x20b3be[_0x1c3f85]=_0x4ca93c[_0x40e32b];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object['create']?function(_0x1e56a4,_0x400ea4){const _0x2b80bc=a4_0x4b1de7;Object[_0x2b80bc(0xc3)](_0x1e56a4,_0x2b80bc(0xb2),{'enumerable':!![],'value':_0x400ea4});}:function(_0x33f94d,_0x29eb8e){_0x33f94d['default']=_0x29eb8e;}),__importStar=this&&this[a4_0x4b1de7(0xa2)]||(function(){var _0x1eaef3=function(_0x446070){const _0x26a5e9=a4_0x3598;return _0x1eaef3=Object[_0x26a5e9(0xa1)]||function(_0x3ced0a){const _0x6c14ab=_0x26a5e9;var _0x509fb6=[];for(var _0x394d09 in _0x3ced0a)if(Object[_0x6c14ab(0xc0)]['hasOwnProperty'][_0x6c14ab(0xac)](_0x3ced0a,_0x394d09))_0x509fb6[_0x509fb6['length']]=_0x394d09;return _0x509fb6;},_0x1eaef3(_0x446070);};return function(_0x46787d){const _0x124208=a4_0x3598;if(_0x46787d&&_0x46787d[_0x124208(0xbc)])return _0x46787d;var _0x2f86d2={};if(_0x46787d!=null){for(var _0x1a500c=_0x1eaef3(_0x46787d),_0x3b439a=0x0;_0x3b439a<_0x1a500c[_0x124208(0xb3)];_0x3b439a++)if(_0x1a500c[_0x3b439a]!=='default')__createBinding(_0x2f86d2,_0x46787d,_0x1a500c[_0x3b439a]);}return __setModuleDefault(_0x2f86d2,_0x46787d),_0x2f86d2;};}());function a4_0x3598(_0x135fbd,_0xddf7cd){const _0x3c5629=a4_0x3c56();return a4_0x3598=function(_0x3598ac,_0x881def){_0x3598ac=_0x3598ac-0x9c;let _0x34bf80=_0x3c5629[_0x3598ac];return _0x34bf80;},a4_0x3598(_0x135fbd,_0xddf7cd);}Object[a4_0x4b1de7(0xc3)](exports,a4_0x4b1de7(0xbc),{'value':!![]}),exports[a4_0x4b1de7(0xa5)]=void 0x0;const authService_1=require('../services/authService'),tokenBlacklistService_1=require('../services/tokenBlacklistService'),telegramBotService_1=require(a4_0x4b1de7(0xc5));class AuthController{constructor(){const _0x5b6a2a=a4_0x4b1de7;this[_0x5b6a2a(0xaf)]=async(_0x366532,_0x117b67,_0x36741f)=>{const _0x286fde=_0x5b6a2a;try{const _0x2f80db=_0x366532[_0x286fde(0xb8)],_0x5053aa=_0x366532['ip']||_0x366532['connection'][_0x286fde(0xcd)]||_0x286fde(0xc8),_0x5b96bd=_0x366532[_0x286fde(0x9c)](_0x286fde(0xa7))||_0x286fde(0xc8);let _0x2de83f=![],_0x3177d2=null;try{const _0x80ebe3=await this[_0x286fde(0xbb)][_0x286fde(0xaf)](_0x2f80db);_0x2de83f=!![],_0x80ebe3[_0x286fde(0xb1)]===_0x286fde(0xc9)&&_0x80ebe3['user']?.['id']&&(_0x3177d2=_0x80ebe3[_0x286fde(0xad)]['id']),_0x3177d2&&await telegramBotService_1[_0x286fde(0xab)][_0x286fde(0xa9)](_0x3177d2,{'username':_0x2f80db['username'],'ipAddress':_0x5053aa,'userAgent':_0x5b96bd,'timestamp':new Date(),'success':!![]}),_0x117b67['json']({'success':!![],'result':_0x80ebe3});}catch(_0x928c76){try{const _0x540a90=(await Promise[_0x286fde(0xa3)]()[_0x286fde(0xb4)](()=>__importStar(require(_0x286fde(0x9f)))))['default'],_0x2a887e=await _0x540a90['shop'][_0x286fde(0xa4)]({'where':{'username':_0x2f80db[_0x286fde(0xaa)]},'select':{'id':!![]}});_0x2a887e&&await telegramBotService_1[_0x286fde(0xab)][_0x286fde(0xa9)](_0x2a887e['id'],{'username':_0x2f80db['username'],'ipAddress':_0x5053aa,'userAgent':_0x5b96bd,'timestamp':new Date(),'success':![]});}catch(_0x39fb24){console[_0x286fde(0xa8)](_0x286fde(0xa6),_0x39fb24);}throw _0x928c76;}}catch(_0x43bc78){_0x36741f(_0x43bc78);}},this['me']=async(_0x1778ed,_0x2a8113,_0x2ddb90)=>{const _0x45ae20=_0x5b6a2a;try{const _0x524999=_0x1778ed[_0x45ae20(0xad)];_0x2a8113[_0x45ae20(0xb6)]({'success':!![],'result':{'id':_0x524999?.['id'],'username':_0x524999?.[_0x45ae20(0xaa)],'role':_0x524999?.[_0x45ae20(0xb1)]}});}catch(_0x23f333){_0x2ddb90(_0x23f333);}},this['logout']=async(_0x4e1980,_0x5131a4,_0x2671e1)=>{const _0x4c5944=_0x5b6a2a;try{const _0x268423=_0x4e1980['token'],_0x4965de=_0x4e1980[_0x4c5944(0xad)];_0x268423&&_0x4965de?.['exp']&&tokenBlacklistService_1[_0x4c5944(0xc7)][_0x4c5944(0xbd)](_0x268423,_0x4965de['exp']),_0x5131a4[_0x4c5944(0xb6)]({'success':!![],'message':_0x4c5944(0xce)});}catch(_0x50c5aa){_0x2671e1(_0x50c5aa);}},this[_0x5b6a2a(0xc1)]=async(_0x1ef232,_0x170fcb,_0x472f56)=>{const _0x362287=_0x5b6a2a;try{const _0x4a5a4f=tokenBlacklistService_1[_0x362287(0xc7)][_0x362287(0x9e)]();_0x170fcb[_0x362287(0xb6)]({'success':!![],'result':_0x4a5a4f});}catch(_0x1700d6){_0x472f56(_0x1700d6);}},this['authService']=new authService_1[(_0x5b6a2a(0xb9))]();}}function a4_0x3c56(){const _0x1815b2=['424076ldEiVU','role','default','length','then','55yHtXfV','json','9PZEiLt','body','AuthService','2711sxynpF','authService','__esModule','blacklistToken','10cbeHLo','205hGRaoc','prototype','getBlacklistStats','951176kjSYYt','defineProperty','274690jaKrAQ','../services/telegramBotService','495544miCQYY','tokenBlacklistService','unknown','shop','20640SEKWZA','3nGPcPF','getOwnPropertyDescriptor','remoteAddress','Logged\x20out\x20successfully','get','__createBinding','getStats','../config/database','writable','getOwnPropertyNames','__importStar','resolve','findUnique','AuthController','Failed\x20to\x20send\x20failed\x20login\x20notification:','User-Agent','error','sendLoginNotification','username','telegramBotService','call','user','5794140GyIFeV','login'];a4_0x3c56=function(){return _0x1815b2;};return a4_0x3c56();}exports[a4_0x4b1de7(0xa5)]=AuthController;