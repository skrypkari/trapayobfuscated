'use strict';const a4_0x696f6e=a4_0x1e52;(function(_0xbd885d,_0x5a3350){const _0x33c7bf=a4_0x1e52,_0x28454e=_0xbd885d();while(!![]){try{const _0x408474=parseInt(_0x33c7bf(0x112))/0x1*(-parseInt(_0x33c7bf(0x108))/0x2)+-parseInt(_0x33c7bf(0x11b))/0x3+-parseInt(_0x33c7bf(0x116))/0x4+-parseInt(_0x33c7bf(0x100))/0x5*(parseInt(_0x33c7bf(0x111))/0x6)+-parseInt(_0x33c7bf(0xfb))/0x7+-parseInt(_0x33c7bf(0x102))/0x8+parseInt(_0x33c7bf(0x115))/0x9*(parseInt(_0x33c7bf(0x120))/0xa);if(_0x408474===_0x5a3350)break;else _0x28454e['push'](_0x28454e['shift']());}catch(_0x70d12a){_0x28454e['push'](_0x28454e['shift']());}}}(a4_0x4269,0xa2aa3));var __createBinding=this&&this[a4_0x696f6e(0x11c)]||(Object['create']?function(_0x12aee9,_0x4f4904,_0x2d2b01,_0x16ae35){const _0x4e3c84=a4_0x696f6e;if(_0x16ae35===undefined)_0x16ae35=_0x2d2b01;var _0x557b45=Object[_0x4e3c84(0x107)](_0x4f4904,_0x2d2b01);(!_0x557b45||(_0x4e3c84(0x106)in _0x557b45?!_0x4f4904[_0x4e3c84(0x103)]:_0x557b45[_0x4e3c84(0x11a)]||_0x557b45['configurable']))&&(_0x557b45={'enumerable':!![],'get':function(){return _0x4f4904[_0x2d2b01];}}),Object[_0x4e3c84(0xfe)](_0x12aee9,_0x16ae35,_0x557b45);}:function(_0x5d4fa3,_0x4c354d,_0xa9f7ba,_0x1a54db){if(_0x1a54db===undefined)_0x1a54db=_0xa9f7ba;_0x5d4fa3[_0x1a54db]=_0x4c354d[_0xa9f7ba];}),__setModuleDefault=this&&this[a4_0x696f6e(0x129)]||(Object[a4_0x696f6e(0x104)]?function(_0x2c79d6,_0x50c68f){const _0x80206b=a4_0x696f6e;Object[_0x80206b(0xfe)](_0x2c79d6,_0x80206b(0x121),{'enumerable':!![],'value':_0x50c68f});}:function(_0x2c57f9,_0x5b5026){_0x2c57f9['default']=_0x5b5026;}),__importStar=this&&this[a4_0x696f6e(0x11e)]||(function(){var _0x580f11=function(_0x1878c0){return _0x580f11=Object['getOwnPropertyNames']||function(_0x19b40e){const _0x7e4545=a4_0x1e52;var _0x41edf2=[];for(var _0x3fa4a4 in _0x19b40e)if(Object[_0x7e4545(0x125)][_0x7e4545(0xff)]['call'](_0x19b40e,_0x3fa4a4))_0x41edf2[_0x41edf2['length']]=_0x3fa4a4;return _0x41edf2;},_0x580f11(_0x1878c0);};return function(_0x2e07ab){const _0x4b78c6=a4_0x1e52;if(_0x2e07ab&&_0x2e07ab[_0x4b78c6(0x103)])return _0x2e07ab;var _0x435d37={};if(_0x2e07ab!=null){for(var _0x46792e=_0x580f11(_0x2e07ab),_0x274616=0x0;_0x274616<_0x46792e['length'];_0x274616++)if(_0x46792e[_0x274616]!==_0x4b78c6(0x121))__createBinding(_0x435d37,_0x2e07ab,_0x46792e[_0x274616]);}return __setModuleDefault(_0x435d37,_0x2e07ab),_0x435d37;};}());function a4_0x1e52(_0x10b819,_0xdad35d){const _0x426979=a4_0x4269();return a4_0x1e52=function(_0x1e5225,_0x151084){_0x1e5225=_0x1e5225-0xfa;let _0x292464=_0x426979[_0x1e5225];return _0x292464;},a4_0x1e52(_0x10b819,_0xdad35d);}Object[a4_0x696f6e(0xfe)](exports,'__esModule',{'value':!![]}),exports['AuthController']=void 0x0;const authService_1=require(a4_0x696f6e(0x126)),tokenBlacklistService_1=require(a4_0x696f6e(0x110)),telegramBotService_1=require(a4_0x696f6e(0x11d));function a4_0x4269(){const _0x91e673=['create','Logged\x20out\x20successfully','get','getOwnPropertyDescriptor','82XMlYSN','username','shop','login','remoteAddress','user','error','logout','../services/tokenBlacklistService','516fecAeQ','24783DbSwwb','blacklistToken','AuthService','13665420lPQZlj','2853372asUyeG','tokenBlacklistService','authService','sendLoginNotification','writable','1409118ALszaS','__createBinding','../services/telegramBotService','__importStar','json','30NGacqa','default','role','body','resolve','prototype','../services/authService','token','telegramBotService','__setModuleDefault','Failed\x20to\x20send\x20failed\x20login\x20notification:','1339856zYBJwl','getStats','unknown','defineProperty','hasOwnProperty','31645DWOWsf','then','7632088jnjlXd','__esModule'];a4_0x4269=function(){return _0x91e673;};return a4_0x4269();}class AuthController{constructor(){const _0x5f087b=a4_0x696f6e;this['login']=async(_0x4e3306,_0x5b2ca9,_0x3e0a67)=>{const _0x36d45b=a4_0x1e52;try{const _0x1b26ac=_0x4e3306[_0x36d45b(0x123)],_0x58f7ce=_0x4e3306['ip']||_0x4e3306['connection'][_0x36d45b(0x10c)]||_0x36d45b(0xfd),_0x351b16=_0x4e3306['get']('User-Agent')||'unknown';let _0x4a8df1=![],_0x3fb295=null;try{const _0x19acf2=await this['authService'][_0x36d45b(0x10b)](_0x1b26ac);_0x4a8df1=!![],_0x19acf2[_0x36d45b(0x122)]===_0x36d45b(0x10a)&&_0x19acf2[_0x36d45b(0x10d)]?.['id']&&(_0x3fb295=_0x19acf2[_0x36d45b(0x10d)]['id']),_0x3fb295&&await telegramBotService_1[_0x36d45b(0x128)][_0x36d45b(0x119)](_0x3fb295,{'username':_0x1b26ac[_0x36d45b(0x109)],'ipAddress':_0x58f7ce,'userAgent':_0x351b16,'timestamp':new Date(),'success':!![]}),_0x5b2ca9['json']({'success':!![],'result':_0x19acf2});}catch(_0x2cc496){try{const _0x65f46c=(await Promise[_0x36d45b(0x124)]()[_0x36d45b(0x101)](()=>__importStar(require('../config/database'))))['default'],_0x1f59f3=await _0x65f46c[_0x36d45b(0x10a)]['findUnique']({'where':{'username':_0x1b26ac['username']},'select':{'id':!![]}});_0x1f59f3&&await telegramBotService_1[_0x36d45b(0x128)]['sendLoginNotification'](_0x1f59f3['id'],{'username':_0x1b26ac[_0x36d45b(0x109)],'ipAddress':_0x58f7ce,'userAgent':_0x351b16,'timestamp':new Date(),'success':![]});}catch(_0x51748d){console[_0x36d45b(0x10e)](_0x36d45b(0xfa),_0x51748d);}throw _0x2cc496;}}catch(_0x234f40){_0x3e0a67(_0x234f40);}},this['me']=async(_0x39c1f6,_0x105c87,_0x3d6d7d)=>{const _0x16eb2e=a4_0x1e52;try{const _0x14ad93=_0x39c1f6['user'];_0x105c87[_0x16eb2e(0x11f)]({'success':!![],'result':{'id':_0x14ad93?.['id'],'username':_0x14ad93?.[_0x16eb2e(0x109)],'role':_0x14ad93?.[_0x16eb2e(0x122)]}});}catch(_0x32d4a9){_0x3d6d7d(_0x32d4a9);}},this[_0x5f087b(0x10f)]=async(_0x56df17,_0x4a3911,_0x58af3e)=>{const _0x3f6dd6=_0x5f087b;try{const _0x2c6bbd=_0x56df17[_0x3f6dd6(0x127)],_0x255a86=_0x56df17[_0x3f6dd6(0x10d)];_0x2c6bbd&&_0x255a86?.['exp']&&tokenBlacklistService_1[_0x3f6dd6(0x117)][_0x3f6dd6(0x113)](_0x2c6bbd,_0x255a86['exp']),_0x4a3911['json']({'success':!![],'message':_0x3f6dd6(0x105)});}catch(_0x4c43bf){_0x58af3e(_0x4c43bf);}},this['getBlacklistStats']=async(_0xa15e2f,_0x1d27ae,_0x2d7814)=>{const _0x4d263e=_0x5f087b;try{const _0x35f9a2=tokenBlacklistService_1[_0x4d263e(0x117)][_0x4d263e(0xfc)]();_0x1d27ae[_0x4d263e(0x11f)]({'success':!![],'result':_0x35f9a2});}catch(_0x5f736){_0x2d7814(_0x5f736);}},this[_0x5f087b(0x118)]=new authService_1[(_0x5f087b(0x114))]();}}exports['AuthController']=AuthController;