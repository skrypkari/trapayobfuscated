'use strict';const a4_0x1a2b58=a4_0x907b;(function(_0x25cdbd,_0x4c8c19){const _0x1fb001=a4_0x907b,_0x4430fc=_0x25cdbd();while(!![]){try{const _0x1e4196=-parseInt(_0x1fb001(0x120))/0x1*(parseInt(_0x1fb001(0x126))/0x2)+-parseInt(_0x1fb001(0x129))/0x3*(-parseInt(_0x1fb001(0x107))/0x4)+-parseInt(_0x1fb001(0x109))/0x5*(parseInt(_0x1fb001(0x103))/0x6)+parseInt(_0x1fb001(0x11f))/0x7*(-parseInt(_0x1fb001(0x115))/0x8)+-parseInt(_0x1fb001(0x12e))/0x9+parseInt(_0x1fb001(0x125))/0xa+parseInt(_0x1fb001(0x11c))/0xb;if(_0x1e4196===_0x4c8c19)break;else _0x4430fc['push'](_0x4430fc['shift']());}catch(_0xddd1fa){_0x4430fc['push'](_0x4430fc['shift']());}}}(a4_0x3d54,0x2c7ca));var __createBinding=this&&this[a4_0x1a2b58(0x114)]||(Object[a4_0x1a2b58(0x104)]?function(_0x2097fa,_0x586d60,_0x42dfd4,_0x1d0739){const _0x108aa7=a4_0x1a2b58;if(_0x1d0739===undefined)_0x1d0739=_0x42dfd4;var _0x470fb7=Object[_0x108aa7(0x132)](_0x586d60,_0x42dfd4);(!_0x470fb7||(_0x108aa7(0x118)in _0x470fb7?!_0x586d60[_0x108aa7(0x11b)]:_0x470fb7[_0x108aa7(0x122)]||_0x470fb7[_0x108aa7(0x106)]))&&(_0x470fb7={'enumerable':!![],'get':function(){return _0x586d60[_0x42dfd4];}}),Object[_0x108aa7(0x12f)](_0x2097fa,_0x1d0739,_0x470fb7);}:function(_0x1d2972,_0x5d5b34,_0x3eb9d3,_0x4235b1){if(_0x4235b1===undefined)_0x4235b1=_0x3eb9d3;_0x1d2972[_0x4235b1]=_0x5d5b34[_0x3eb9d3];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a4_0x1a2b58(0x104)]?function(_0x138ed3,_0x28c649){const _0x342813=a4_0x1a2b58;Object[_0x342813(0x12f)](_0x138ed3,'default',{'enumerable':!![],'value':_0x28c649});}:function(_0x55f6e4,_0x304961){_0x55f6e4['default']=_0x304961;}),__importStar=this&&this[a4_0x1a2b58(0x12d)]||(function(){var _0x87f5c7=function(_0x2960dd){const _0x1272b1=a4_0x907b;return _0x87f5c7=Object[_0x1272b1(0x111)]||function(_0x4d191e){const _0x32024b=_0x1272b1;var _0x3a02ba=[];for(var _0x10dff5 in _0x4d191e)if(Object[_0x32024b(0x117)]['hasOwnProperty']['call'](_0x4d191e,_0x10dff5))_0x3a02ba[_0x3a02ba[_0x32024b(0x116)]]=_0x10dff5;return _0x3a02ba;},_0x87f5c7(_0x2960dd);};return function(_0x29678c){const _0x6b3b77=a4_0x907b;if(_0x29678c&&_0x29678c[_0x6b3b77(0x11b)])return _0x29678c;var _0x43f3f5={};if(_0x29678c!=null){for(var _0x10f935=_0x87f5c7(_0x29678c),_0x5ed645=0x0;_0x5ed645<_0x10f935[_0x6b3b77(0x116)];_0x5ed645++)if(_0x10f935[_0x5ed645]!==_0x6b3b77(0x12c))__createBinding(_0x43f3f5,_0x29678c,_0x10f935[_0x5ed645]);}return __setModuleDefault(_0x43f3f5,_0x29678c),_0x43f3f5;};}());function a4_0x907b(_0x27ed8f,_0x33b08b){const _0x3d5416=a4_0x3d54();return a4_0x907b=function(_0x907b28,_0x53e90b){_0x907b28=_0x907b28-0x102;let _0x5c31ce=_0x3d5416[_0x907b28];return _0x5c31ce;},a4_0x907b(_0x27ed8f,_0x33b08b);}Object[a4_0x1a2b58(0x12f)](exports,a4_0x1a2b58(0x11b),{'value':!![]}),exports[a4_0x1a2b58(0x108)]=void 0x0;const authService_1=require('../services/authService'),tokenBlacklistService_1=require('../services/tokenBlacklistService'),telegramBotService_1=require(a4_0x1a2b58(0x124));class AuthController{constructor(){const _0x8e9db7=a4_0x1a2b58;this[_0x8e9db7(0x10c)]=async(_0x495029,_0x81212c,_0x333f4f)=>{const _0x5d327e=_0x8e9db7;try{const _0x40b8a7=_0x495029[_0x5d327e(0x12a)],_0x33a577=_0x495029['ip']||_0x495029[_0x5d327e(0x121)][_0x5d327e(0x10d)]||_0x5d327e(0x102),_0x3a35c8=_0x495029[_0x5d327e(0x118)](_0x5d327e(0x10a))||_0x5d327e(0x102);let _0x46cfc7=![],_0x455fdf=null;try{const _0x3f7dff=await this['authService'][_0x5d327e(0x10c)](_0x40b8a7);_0x46cfc7=!![],_0x3f7dff[_0x5d327e(0x131)]===_0x5d327e(0x12b)&&_0x3f7dff[_0x5d327e(0x119)]?.['id']&&(_0x455fdf=_0x3f7dff['user']['id']),_0x455fdf&&await telegramBotService_1['telegramBotService'][_0x5d327e(0x113)](_0x455fdf,{'username':_0x40b8a7['username'],'ipAddress':_0x33a577,'userAgent':_0x3a35c8,'timestamp':new Date(),'success':!![]}),_0x81212c[_0x5d327e(0x11e)]({'success':!![],'result':_0x3f7dff});}catch(_0x34c767){try{const _0x4b4682=(await Promise[_0x5d327e(0x11d)]()[_0x5d327e(0x127)](()=>__importStar(require(_0x5d327e(0x110)))))[_0x5d327e(0x12c)],_0x5e6097=await _0x4b4682[_0x5d327e(0x12b)]['findUnique']({'where':{'username':_0x40b8a7[_0x5d327e(0x128)]},'select':{'id':!![]}});_0x5e6097&&await telegramBotService_1[_0x5d327e(0x10f)]['sendLoginNotification'](_0x5e6097['id'],{'username':_0x40b8a7['username'],'ipAddress':_0x33a577,'userAgent':_0x3a35c8,'timestamp':new Date(),'success':![]});}catch(_0x4673f8){console[_0x5d327e(0x112)]('Failed\x20to\x20send\x20failed\x20login\x20notification:',_0x4673f8);}throw _0x34c767;}}catch(_0x449e42){_0x333f4f(_0x449e42);}},this['me']=async(_0x465ed2,_0x42cb79,_0x4e0522)=>{const _0x431327=_0x8e9db7;try{const _0x43c287=_0x465ed2['user'];_0x42cb79[_0x431327(0x11e)]({'success':!![],'result':{'id':_0x43c287?.['id'],'username':_0x43c287?.[_0x431327(0x128)],'role':_0x43c287?.[_0x431327(0x131)]}});}catch(_0x881b70){_0x4e0522(_0x881b70);}},this[_0x8e9db7(0x10b)]=async(_0x5561db,_0x344eb5,_0x28a87c)=>{const _0x403c3b=_0x8e9db7;try{const _0x3eb6ea=_0x5561db['token'],_0x240517=_0x5561db['user'];_0x3eb6ea&&_0x240517?.['exp']&&tokenBlacklistService_1['tokenBlacklistService'][_0x403c3b(0x11a)](_0x3eb6ea,_0x240517[_0x403c3b(0x105)]),_0x344eb5[_0x403c3b(0x11e)]({'success':!![],'message':_0x403c3b(0x130)});}catch(_0x4a0136){_0x28a87c(_0x4a0136);}},this['getBlacklistStats']=async(_0x3aef0a,_0xaee2d1,_0x2ae0f1)=>{const _0x5d9f9d=_0x8e9db7;try{const _0x1b3275=tokenBlacklistService_1['tokenBlacklistService'][_0x5d9f9d(0x123)]();_0xaee2d1[_0x5d9f9d(0x11e)]({'success':!![],'result':_0x1b3275});}catch(_0x5606a8){_0x2ae0f1(_0x5606a8);}},this['authService']=new authService_1[(_0x8e9db7(0x10e))]();}}exports[a4_0x1a2b58(0x108)]=AuthController;function a4_0x3d54(){const _0x45483d=['10PTlMKv','User-Agent','logout','login','remoteAddress','AuthService','telegramBotService','../config/database','getOwnPropertyNames','error','sendLoginNotification','__createBinding','1440ececEM','length','prototype','get','user','blacklistToken','__esModule','7979048aMAZDA','resolve','json','12761jOvGHi','348757BknEHa','connection','writable','getStats','../services/telegramBotService','1095800bdpvWZ','2GKtHoR','then','username','1962ZdQooD','body','shop','default','__importStar','272133UnpQTa','defineProperty','Logged\x20out\x20successfully','role','getOwnPropertyDescriptor','unknown','921774AcrORR','create','exp','configurable','2212kWTdQO','AuthController'];a4_0x3d54=function(){return _0x45483d;};return a4_0x3d54();}