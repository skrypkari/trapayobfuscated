'use strict';function a4_0x22ac(_0x508f09,_0x2018c5){const _0x31f2db=a4_0x31f2();return a4_0x22ac=function(_0x22ace5,_0x21eb6f){_0x22ace5=_0x22ace5-0xc4;let _0x665304=_0x31f2db[_0x22ace5];return _0x665304;},a4_0x22ac(_0x508f09,_0x2018c5);}const a4_0xd7cac2=a4_0x22ac;function a4_0x31f2(){const _0x4b87a9=['default','defineProperty','role','sendLoginNotification','../services/authService','54wPtBSg','1315958tjkxMZ','__importStar','getStats','../services/telegramBotService','unknown','resolve','remoteAddress','error','exp','json','25047444pDUbDK','7053070bxDuLs','../config/database','logout','80872YhgmPE','getBlacklistStats','shop','writable','Failed\x20to\x20send\x20failed\x20login\x20notification:','length','Logged\x20out\x20successfully','call','then','50031XHHUJJ','../services/tokenBlacklistService','__esModule','findUnique','AuthService','username','11XHnGwj','get','3gvgLfF','AuthController','telegramBotService','getOwnPropertyNames','1356920hOOcto','tokenBlacklistService','blacklistToken','prototype','login','body','240qdAode','1384exhubr','user','907274VVmYDx'];a4_0x31f2=function(){return _0x4b87a9;};return a4_0x31f2();}(function(_0x386edb,_0x557ae3){const _0x25044d=a4_0x22ac,_0x405b9a=_0x386edb();while(!![]){try{const _0x11d10d=-parseInt(_0x25044d(0xe3))/0x1+parseInt(_0x25044d(0xda))/0x2*(parseInt(_0x25044d(0xd6))/0x3)+-parseInt(_0x25044d(0xc5))/0x4*(-parseInt(_0x25044d(0xe0))/0x5)+-parseInt(_0x25044d(0xe9))/0x6*(parseInt(_0x25044d(0xea))/0x7)+-parseInt(_0x25044d(0xe1))/0x8*(parseInt(_0x25044d(0xce))/0x9)+-parseInt(_0x25044d(0xf5))/0xa*(-parseInt(_0x25044d(0xd4))/0xb)+parseInt(_0x25044d(0xf4))/0xc;if(_0x11d10d===_0x557ae3)break;else _0x405b9a['push'](_0x405b9a['shift']());}catch(_0x57fbe0){_0x405b9a['push'](_0x405b9a['shift']());}}}(a4_0x31f2,0xd6fcf));var __createBinding=this&&this['__createBinding']||(Object['create']?function(_0x3ddfc5,_0x37a1ec,_0x25efc7,_0x96cfae){const _0x30354f=a4_0x22ac;if(_0x96cfae===undefined)_0x96cfae=_0x25efc7;var _0x3f1826=Object['getOwnPropertyDescriptor'](_0x37a1ec,_0x25efc7);(!_0x3f1826||(_0x30354f(0xd5)in _0x3f1826?!_0x37a1ec[_0x30354f(0xd0)]:_0x3f1826[_0x30354f(0xc8)]||_0x3f1826['configurable']))&&(_0x3f1826={'enumerable':!![],'get':function(){return _0x37a1ec[_0x25efc7];}}),Object[_0x30354f(0xe5)](_0x3ddfc5,_0x96cfae,_0x3f1826);}:function(_0x2035b0,_0x350619,_0x530a62,_0x2448a9){if(_0x2448a9===undefined)_0x2448a9=_0x530a62;_0x2035b0[_0x2448a9]=_0x350619[_0x530a62];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object['create']?function(_0x1ba2e8,_0x56122f){const _0x11487e=a4_0x22ac;Object[_0x11487e(0xe5)](_0x1ba2e8,_0x11487e(0xe4),{'enumerable':!![],'value':_0x56122f});}:function(_0xde87b8,_0xeea15b){_0xde87b8['default']=_0xeea15b;}),__importStar=this&&this[a4_0xd7cac2(0xeb)]||(function(){var _0x39113a=function(_0x362386){const _0x40063f=a4_0x22ac;return _0x39113a=Object[_0x40063f(0xd9)]||function(_0x299dbf){const _0x4b45bc=_0x40063f;var _0x541e28=[];for(var _0x453944 in _0x299dbf)if(Object[_0x4b45bc(0xdd)]['hasOwnProperty'][_0x4b45bc(0xcc)](_0x299dbf,_0x453944))_0x541e28[_0x541e28[_0x4b45bc(0xca)]]=_0x453944;return _0x541e28;},_0x39113a(_0x362386);};return function(_0x16c9f1){const _0x1c92c5=a4_0x22ac;if(_0x16c9f1&&_0x16c9f1[_0x1c92c5(0xd0)])return _0x16c9f1;var _0x5a4691={};if(_0x16c9f1!=null){for(var _0x5329f9=_0x39113a(_0x16c9f1),_0x1420d4=0x0;_0x1420d4<_0x5329f9[_0x1c92c5(0xca)];_0x1420d4++)if(_0x5329f9[_0x1420d4]!=='default')__createBinding(_0x5a4691,_0x16c9f1,_0x5329f9[_0x1420d4]);}return __setModuleDefault(_0x5a4691,_0x16c9f1),_0x5a4691;};}());Object[a4_0xd7cac2(0xe5)](exports,a4_0xd7cac2(0xd0),{'value':!![]}),exports['AuthController']=void 0x0;const authService_1=require(a4_0xd7cac2(0xe8)),tokenBlacklistService_1=require(a4_0xd7cac2(0xcf)),telegramBotService_1=require(a4_0xd7cac2(0xed));class AuthController{constructor(){const _0x3f3758=a4_0xd7cac2;this[_0x3f3758(0xde)]=async(_0x16c217,_0x189410,_0x2b972b)=>{const _0x516d59=_0x3f3758;try{const _0x2d3159=_0x16c217[_0x516d59(0xdf)],_0x18eada=_0x16c217['ip']||_0x16c217['connection'][_0x516d59(0xf0)]||'unknown',_0x421af4=_0x16c217[_0x516d59(0xd5)]('User-Agent')||_0x516d59(0xee);let _0x478c8d=![],_0x35eeec=null;try{const _0x2ce8b2=await this['authService'][_0x516d59(0xde)](_0x2d3159);_0x478c8d=!![],_0x2ce8b2[_0x516d59(0xe6)]===_0x516d59(0xc7)&&_0x2ce8b2[_0x516d59(0xe2)]?.['id']&&(_0x35eeec=_0x2ce8b2[_0x516d59(0xe2)]['id']),_0x35eeec&&await telegramBotService_1[_0x516d59(0xd8)][_0x516d59(0xe7)](_0x35eeec,{'username':_0x2d3159['username'],'ipAddress':_0x18eada,'userAgent':_0x421af4,'timestamp':new Date(),'success':!![]}),_0x189410[_0x516d59(0xf3)]({'success':!![],'result':_0x2ce8b2});}catch(_0x395960){try{const _0x227af0=(await Promise[_0x516d59(0xef)]()[_0x516d59(0xcd)](()=>__importStar(require(_0x516d59(0xf6)))))[_0x516d59(0xe4)],_0x39d248=await _0x227af0[_0x516d59(0xc7)][_0x516d59(0xd1)]({'where':{'username':_0x2d3159[_0x516d59(0xd3)]},'select':{'id':!![]}});_0x39d248&&await telegramBotService_1[_0x516d59(0xd8)]['sendLoginNotification'](_0x39d248['id'],{'username':_0x2d3159[_0x516d59(0xd3)],'ipAddress':_0x18eada,'userAgent':_0x421af4,'timestamp':new Date(),'success':![]});}catch(_0xade718){console[_0x516d59(0xf1)](_0x516d59(0xc9),_0xade718);}throw _0x395960;}}catch(_0x259a2b){_0x2b972b(_0x259a2b);}},this['me']=async(_0x323cb3,_0x212177,_0x4bfe08)=>{const _0x52525e=_0x3f3758;try{const _0x2e3137=_0x323cb3[_0x52525e(0xe2)];_0x212177['json']({'success':!![],'result':{'id':_0x2e3137?.['id'],'username':_0x2e3137?.[_0x52525e(0xd3)],'role':_0x2e3137?.[_0x52525e(0xe6)]}});}catch(_0x513184){_0x4bfe08(_0x513184);}},this[_0x3f3758(0xc4)]=async(_0xa60ae4,_0x58dfea,_0x2898f9)=>{const _0x2bb055=_0x3f3758;try{const _0x1c6112=_0xa60ae4['token'],_0x1b7c5e=_0xa60ae4[_0x2bb055(0xe2)];_0x1c6112&&_0x1b7c5e?.[_0x2bb055(0xf2)]&&tokenBlacklistService_1[_0x2bb055(0xdb)][_0x2bb055(0xdc)](_0x1c6112,_0x1b7c5e['exp']),_0x58dfea[_0x2bb055(0xf3)]({'success':!![],'message':_0x2bb055(0xcb)});}catch(_0x4312ab){_0x2898f9(_0x4312ab);}},this[_0x3f3758(0xc6)]=async(_0x11bd74,_0x17acea,_0x171d72)=>{const _0x5c56f6=_0x3f3758;try{const _0x44445c=tokenBlacklistService_1[_0x5c56f6(0xdb)][_0x5c56f6(0xec)]();_0x17acea[_0x5c56f6(0xf3)]({'success':!![],'result':_0x44445c});}catch(_0x22a671){_0x171d72(_0x22a671);}},this['authService']=new authService_1[(_0x3f3758(0xd2))]();}}exports[a4_0xd7cac2(0xd7)]=AuthController;