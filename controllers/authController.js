'use strict';const a4_0x25f9a7=a4_0x416e;function a4_0x5c1c(){const _0x3c8a4c=['__importStar','3130408MpFHdZ','findUnique','hasOwnProperty','getStats','body','user','../services/authService','resolve','defineProperty','AuthService','create','getOwnPropertyDescriptor','getBlacklistStats','41950HKaSMy','connection','186885SBRuHw','telegramBotService','User-Agent','default','length','2943aumEYA','__createBinding','tokenBlacklistService','sendLoginNotification','username','role','48BlKykO','Logged\x20out\x20successfully','get','exp','logout','remoteAddress','getOwnPropertyNames','1447456OfHvYn','10pWBSzx','__esModule','AuthController','token','authService','call','__setModuleDefault','writable','login','shop','946128TIlyuq','then','58147YdnJqS','169414FfUvJw','unknown','json'];a4_0x5c1c=function(){return _0x3c8a4c;};return a4_0x5c1c();}(function(_0x42e69f,_0x497715){const _0xbe97f9=a4_0x416e,_0x40ad3b=_0x42e69f();while(!![]){try{const _0x31a953=-parseInt(_0xbe97f9(0x21f))/0x1*(-parseInt(_0xbe97f9(0x213))/0x2)+-parseInt(_0xbe97f9(0x21d))/0x3+-parseInt(_0xbe97f9(0x212))/0x4+parseInt(_0xbe97f9(0x200))/0x5*(-parseInt(_0xbe97f9(0x20b))/0x6)+-parseInt(_0xbe97f9(0x220))/0x7+-parseInt(_0xbe97f9(0x224))/0x8+parseInt(_0xbe97f9(0x205))/0x9*(parseInt(_0xbe97f9(0x1fe))/0xa);if(_0x31a953===_0x497715)break;else _0x40ad3b['push'](_0x40ad3b['shift']());}catch(_0xd08392){_0x40ad3b['push'](_0x40ad3b['shift']());}}}(a4_0x5c1c,0x42195));var __createBinding=this&&this[a4_0x25f9a7(0x206)]||(Object['create']?function(_0x2bd2bc,_0x49907b,_0x1c5b6f,_0x593d55){const _0x45edb2=a4_0x25f9a7;if(_0x593d55===undefined)_0x593d55=_0x1c5b6f;var _0x32241b=Object[_0x45edb2(0x1fc)](_0x49907b,_0x1c5b6f);(!_0x32241b||(_0x45edb2(0x20d)in _0x32241b?!_0x49907b['__esModule']:_0x32241b[_0x45edb2(0x21a)]||_0x32241b['configurable']))&&(_0x32241b={'enumerable':!![],'get':function(){return _0x49907b[_0x1c5b6f];}}),Object[_0x45edb2(0x1f9)](_0x2bd2bc,_0x593d55,_0x32241b);}:function(_0x4391c9,_0x40baf5,_0x1d36e1,_0x5f06da){if(_0x5f06da===undefined)_0x5f06da=_0x1d36e1;_0x4391c9[_0x5f06da]=_0x40baf5[_0x1d36e1];}),__setModuleDefault=this&&this[a4_0x25f9a7(0x219)]||(Object[a4_0x25f9a7(0x1fb)]?function(_0x1436c9,_0x2d0770){const _0x49df0b=a4_0x25f9a7;Object[_0x49df0b(0x1f9)](_0x1436c9,_0x49df0b(0x203),{'enumerable':!![],'value':_0x2d0770});}:function(_0x243850,_0x3afc0a){const _0x31fa0d=a4_0x25f9a7;_0x243850[_0x31fa0d(0x203)]=_0x3afc0a;}),__importStar=this&&this[a4_0x25f9a7(0x223)]||(function(){var _0x349662=function(_0x527e50){const _0x4f3cb8=a4_0x416e;return _0x349662=Object[_0x4f3cb8(0x211)]||function(_0x25d6c3){const _0x574ed8=_0x4f3cb8;var _0x42eb08=[];for(var _0x548ee5 in _0x25d6c3)if(Object['prototype'][_0x574ed8(0x1f3)][_0x574ed8(0x218)](_0x25d6c3,_0x548ee5))_0x42eb08[_0x42eb08[_0x574ed8(0x204)]]=_0x548ee5;return _0x42eb08;},_0x349662(_0x527e50);};return function(_0x6272ac){const _0x1d43b8=a4_0x416e;if(_0x6272ac&&_0x6272ac[_0x1d43b8(0x214)])return _0x6272ac;var _0x5f2f6d={};if(_0x6272ac!=null){for(var _0x11e6af=_0x349662(_0x6272ac),_0x5c4889=0x0;_0x5c4889<_0x11e6af[_0x1d43b8(0x204)];_0x5c4889++)if(_0x11e6af[_0x5c4889]!==_0x1d43b8(0x203))__createBinding(_0x5f2f6d,_0x6272ac,_0x11e6af[_0x5c4889]);}return __setModuleDefault(_0x5f2f6d,_0x6272ac),_0x5f2f6d;};}());Object[a4_0x25f9a7(0x1f9)](exports,'__esModule',{'value':!![]}),exports[a4_0x25f9a7(0x215)]=void 0x0;const authService_1=require(a4_0x25f9a7(0x1f7)),tokenBlacklistService_1=require('../services/tokenBlacklistService'),telegramBotService_1=require('../services/telegramBotService');function a4_0x416e(_0x52e67a,_0x53b424){const _0x5c1c8b=a4_0x5c1c();return a4_0x416e=function(_0x416ed9,_0xc0851f){_0x416ed9=_0x416ed9-0x1f2;let _0x4b9740=_0x5c1c8b[_0x416ed9];return _0x4b9740;},a4_0x416e(_0x52e67a,_0x53b424);}class AuthController{constructor(){const _0x1b016=a4_0x25f9a7;this[_0x1b016(0x21b)]=async(_0x487d39,_0x3d23e9,_0x7f3042)=>{const _0x27b1ce=_0x1b016;try{const _0x59a223=_0x487d39[_0x27b1ce(0x1f5)],_0x56a5b2=_0x487d39['ip']||_0x487d39[_0x27b1ce(0x1ff)][_0x27b1ce(0x210)]||'unknown',_0x1b05ad=_0x487d39['get'](_0x27b1ce(0x202))||_0x27b1ce(0x221);let _0x52103e=![],_0x4b4f6a=null;try{const _0x34bef2=await this[_0x27b1ce(0x217)][_0x27b1ce(0x21b)](_0x59a223);_0x52103e=!![],_0x34bef2[_0x27b1ce(0x20a)]===_0x27b1ce(0x21c)&&_0x34bef2[_0x27b1ce(0x1f6)]?.['id']&&(_0x4b4f6a=_0x34bef2[_0x27b1ce(0x1f6)]['id']),_0x4b4f6a&&await telegramBotService_1[_0x27b1ce(0x201)][_0x27b1ce(0x208)](_0x4b4f6a,{'username':_0x59a223['username'],'ipAddress':_0x56a5b2,'userAgent':_0x1b05ad,'timestamp':new Date(),'success':!![]}),_0x3d23e9['json']({'success':!![],'result':_0x34bef2});}catch(_0x112d5b){try{const _0x57d192=(await Promise[_0x27b1ce(0x1f8)]()[_0x27b1ce(0x21e)](()=>__importStar(require('../config/database'))))[_0x27b1ce(0x203)],_0x12fecd=await _0x57d192[_0x27b1ce(0x21c)][_0x27b1ce(0x1f2)]({'where':{'username':_0x59a223[_0x27b1ce(0x209)]},'select':{'id':!![]}});_0x12fecd&&await telegramBotService_1[_0x27b1ce(0x201)][_0x27b1ce(0x208)](_0x12fecd['id'],{'username':_0x59a223[_0x27b1ce(0x209)],'ipAddress':_0x56a5b2,'userAgent':_0x1b05ad,'timestamp':new Date(),'success':![]});}catch(_0x345f86){console['error']('Failed\x20to\x20send\x20failed\x20login\x20notification:',_0x345f86);}throw _0x112d5b;}}catch(_0x334497){_0x7f3042(_0x334497);}},this['me']=async(_0x49ff5a,_0x3755ca,_0x47ae1d)=>{const _0x1a2400=_0x1b016;try{const _0x17dd03=_0x49ff5a['user'];_0x3755ca[_0x1a2400(0x222)]({'success':!![],'result':{'id':_0x17dd03?.['id'],'username':_0x17dd03?.[_0x1a2400(0x209)],'role':_0x17dd03?.[_0x1a2400(0x20a)]}});}catch(_0x1b54c9){_0x47ae1d(_0x1b54c9);}},this[_0x1b016(0x20f)]=async(_0x3f8f33,_0x4859f6,_0x225e51)=>{const _0x5227a6=_0x1b016;try{const _0x4f211c=_0x3f8f33[_0x5227a6(0x216)],_0x4b8d68=_0x3f8f33[_0x5227a6(0x1f6)];_0x4f211c&&_0x4b8d68?.[_0x5227a6(0x20e)]&&tokenBlacklistService_1[_0x5227a6(0x207)]['blacklistToken'](_0x4f211c,_0x4b8d68[_0x5227a6(0x20e)]),_0x4859f6[_0x5227a6(0x222)]({'success':!![],'message':_0x5227a6(0x20c)});}catch(_0x544293){_0x225e51(_0x544293);}},this[_0x1b016(0x1fd)]=async(_0x558357,_0x5045fd,_0x5e6e54)=>{const _0x3190ed=_0x1b016;try{const _0x4e0b01=tokenBlacklistService_1[_0x3190ed(0x207)][_0x3190ed(0x1f4)]();_0x5045fd[_0x3190ed(0x222)]({'success':!![],'result':_0x4e0b01});}catch(_0x82bb10){_0x5e6e54(_0x82bb10);}},this[_0x1b016(0x217)]=new authService_1[(_0x1b016(0x1fa))]();}}exports[a4_0x25f9a7(0x215)]=AuthController;