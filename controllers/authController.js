'use strict';function a4_0x53f5(_0x5dc8df,_0x3a4e8f){const _0x12fddd=a4_0x12fd();return a4_0x53f5=function(_0x53f5e4,_0xaea342){_0x53f5e4=_0x53f5e4-0x8a;let _0x4b5c92=_0x12fddd[_0x53f5e4];return _0x4b5c92;},a4_0x53f5(_0x5dc8df,_0x3a4e8f);}const a4_0x53d143=a4_0x53f5;(function(_0x2ee0a6,_0xc1f879){const _0x1f6d87=a4_0x53f5,_0x5bc91c=_0x2ee0a6();while(!![]){try{const _0x49fd21=parseInt(_0x1f6d87(0xa7))/0x1+parseInt(_0x1f6d87(0x9e))/0x2+parseInt(_0x1f6d87(0x9c))/0x3+-parseInt(_0x1f6d87(0x93))/0x4*(-parseInt(_0x1f6d87(0xa6))/0x5)+parseInt(_0x1f6d87(0x9a))/0x6+parseInt(_0x1f6d87(0xb8))/0x7+parseInt(_0x1f6d87(0xae))/0x8*(-parseInt(_0x1f6d87(0x8c))/0x9);if(_0x49fd21===_0xc1f879)break;else _0x5bc91c['push'](_0x5bc91c['shift']());}catch(_0x38e7d4){_0x5bc91c['push'](_0x5bc91c['shift']());}}}(a4_0x12fd,0x37f58));var __createBinding=this&&this[a4_0x53d143(0x8b)]||(Object['create']?function(_0x191835,_0x41759a,_0x4c4fb9,_0x39e6e9){const _0x44c00b=a4_0x53d143;if(_0x39e6e9===undefined)_0x39e6e9=_0x4c4fb9;var _0x124be5=Object[_0x44c00b(0x91)](_0x41759a,_0x4c4fb9);(!_0x124be5||(_0x44c00b(0x9d)in _0x124be5?!_0x41759a[_0x44c00b(0x8d)]:_0x124be5[_0x44c00b(0xb9)]||_0x124be5[_0x44c00b(0xaa)]))&&(_0x124be5={'enumerable':!![],'get':function(){return _0x41759a[_0x4c4fb9];}}),Object[_0x44c00b(0x92)](_0x191835,_0x39e6e9,_0x124be5);}:function(_0xb0fc13,_0xe8ebcb,_0x191c00,_0x25405b){if(_0x25405b===undefined)_0x25405b=_0x191c00;_0xb0fc13[_0x25405b]=_0xe8ebcb[_0x191c00];}),__setModuleDefault=this&&this[a4_0x53d143(0xa3)]||(Object['create']?function(_0x3f1974,_0x4397ad){const _0x17b607=a4_0x53d143;Object[_0x17b607(0x92)](_0x3f1974,_0x17b607(0x97),{'enumerable':!![],'value':_0x4397ad});}:function(_0x481e66,_0xbbfc3e){_0x481e66['default']=_0xbbfc3e;}),__importStar=this&&this['__importStar']||(function(){var _0x5e0eb4=function(_0x174202){const _0x3e41cb=a4_0x53f5;return _0x5e0eb4=Object[_0x3e41cb(0xb2)]||function(_0x8e8131){const _0x170d23=_0x3e41cb;var _0x47bbf2=[];for(var _0x178772 in _0x8e8131)if(Object[_0x170d23(0xb1)][_0x170d23(0xad)]['call'](_0x8e8131,_0x178772))_0x47bbf2[_0x47bbf2['length']]=_0x178772;return _0x47bbf2;},_0x5e0eb4(_0x174202);};return function(_0x3ec5ec){const _0x4ea7f6=a4_0x53f5;if(_0x3ec5ec&&_0x3ec5ec['__esModule'])return _0x3ec5ec;var _0x3186f2={};if(_0x3ec5ec!=null){for(var _0x1aeb9d=_0x5e0eb4(_0x3ec5ec),_0x49aa88=0x0;_0x49aa88<_0x1aeb9d['length'];_0x49aa88++)if(_0x1aeb9d[_0x49aa88]!==_0x4ea7f6(0x97))__createBinding(_0x3186f2,_0x3ec5ec,_0x1aeb9d[_0x49aa88]);}return __setModuleDefault(_0x3186f2,_0x3ec5ec),_0x3186f2;};}());Object['defineProperty'](exports,a4_0x53d143(0x8d),{'value':!![]}),exports[a4_0x53d143(0xa8)]=void 0x0;const authService_1=require(a4_0x53d143(0x90)),tokenBlacklistService_1=require(a4_0x53d143(0x99)),telegramBotService_1=require(a4_0x53d143(0x9b));class AuthController{constructor(){const _0x9a78e5=a4_0x53d143;this[_0x9a78e5(0x8e)]=async(_0x291058,_0x8a8245,_0x32ad9b)=>{const _0x491d0a=_0x9a78e5;try{const _0x464cb5=_0x291058[_0x491d0a(0x98)],_0x4042fc=_0x291058['ip']||_0x291058['connection'][_0x491d0a(0xb3)]||_0x491d0a(0x9f),_0xc33d84=_0x291058[_0x491d0a(0x9d)](_0x491d0a(0xb0))||'unknown';let _0x8878da=![],_0x4a3b9d=null;try{const _0x93276e=await this['authService']['login'](_0x464cb5);_0x8878da=!![],_0x93276e[_0x491d0a(0xa4)]==='shop'&&_0x93276e[_0x491d0a(0xb4)]?.['id']&&(_0x4a3b9d=_0x93276e['user']['id']),_0x4a3b9d&&await telegramBotService_1['telegramBotService'][_0x491d0a(0xaf)](_0x4a3b9d,{'username':_0x464cb5['username'],'ipAddress':_0x4042fc,'userAgent':_0xc33d84,'timestamp':new Date(),'success':!![]}),_0x8a8245[_0x491d0a(0xb7)]({'success':!![],'result':_0x93276e});}catch(_0xa006f9){try{const _0x4c56cd=(await Promise[_0x491d0a(0x8a)]()[_0x491d0a(0xb6)](()=>__importStar(require('../config/database'))))[_0x491d0a(0x97)],_0x203ced=await _0x4c56cd['shop'][_0x491d0a(0x95)]({'where':{'username':_0x464cb5[_0x491d0a(0xba)]},'select':{'id':!![]}});_0x203ced&&await telegramBotService_1[_0x491d0a(0xbb)][_0x491d0a(0xaf)](_0x203ced['id'],{'username':_0x464cb5['username'],'ipAddress':_0x4042fc,'userAgent':_0xc33d84,'timestamp':new Date(),'success':![]});}catch(_0x3c6d3c){console[_0x491d0a(0xac)](_0x491d0a(0xa5),_0x3c6d3c);}throw _0xa006f9;}}catch(_0x23f68b){_0x32ad9b(_0x23f68b);}},this['me']=async(_0x4748f1,_0x2aa62c,_0x371736)=>{const _0x25e737=_0x9a78e5;try{const _0x6ca216=_0x4748f1[_0x25e737(0xb4)];_0x2aa62c[_0x25e737(0xb7)]({'success':!![],'result':{'id':_0x6ca216?.['id'],'username':_0x6ca216?.[_0x25e737(0xba)],'role':_0x6ca216?.[_0x25e737(0xa4)]}});}catch(_0x1e7a2d){_0x371736(_0x1e7a2d);}},this[_0x9a78e5(0xa0)]=async(_0x4f9a90,_0x2995a5,_0x272198)=>{const _0x27372c=_0x9a78e5;try{const _0x5b7b61=_0x4f9a90[_0x27372c(0xa1)],_0x470cfc=_0x4f9a90[_0x27372c(0xb4)];_0x5b7b61&&_0x470cfc?.[_0x27372c(0xab)]&&tokenBlacklistService_1[_0x27372c(0x96)][_0x27372c(0xbc)](_0x5b7b61,_0x470cfc[_0x27372c(0xab)]),_0x2995a5[_0x27372c(0xb7)]({'success':!![],'message':_0x27372c(0xa9)});}catch(_0x49bc37){_0x272198(_0x49bc37);}},this[_0x9a78e5(0xa2)]=async(_0x420422,_0x27f6e6,_0x350ac8)=>{const _0x1d63cd=_0x9a78e5;try{const _0x2873d6=tokenBlacklistService_1[_0x1d63cd(0x96)][_0x1d63cd(0x8f)]();_0x27f6e6[_0x1d63cd(0xb7)]({'success':!![],'result':_0x2873d6});}catch(_0x4adeda){_0x350ac8(_0x4adeda);}},this[_0x9a78e5(0xb5)]=new authService_1[(_0x9a78e5(0x94))]();}}exports[a4_0x53d143(0xa8)]=AuthController;function a4_0x12fd(){const _0x47e61b=['AuthController','Logged\x20out\x20successfully','configurable','exp','error','hasOwnProperty','2216BRPmrN','sendLoginNotification','User-Agent','prototype','getOwnPropertyNames','remoteAddress','user','authService','then','json','1814519RXALtu','writable','username','telegramBotService','blacklistToken','resolve','__createBinding','26766TMUAzx','__esModule','login','getStats','../services/authService','getOwnPropertyDescriptor','defineProperty','43820dlbygR','AuthService','findUnique','tokenBlacklistService','default','body','../services/tokenBlacklistService','1637484iLPaOY','../services/telegramBotService','554949zYuSbe','get','280498IfYQDD','unknown','logout','token','getBlacklistStats','__setModuleDefault','role','Failed\x20to\x20send\x20failed\x20login\x20notification:','70XkOfcG','42273ZeBKFW'];a4_0x12fd=function(){return _0x47e61b;};return a4_0x12fd();}