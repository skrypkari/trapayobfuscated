'use strict';const a4_0x58a38c=a4_0xb6dc;function a4_0xb6dc(_0x231086,_0x185858){const _0x29171d=a4_0x2917();return a4_0xb6dc=function(_0xb6dc70,_0x1a6be1){_0xb6dc70=_0xb6dc70-0x106;let _0x344db9=_0x29171d[_0xb6dc70];return _0x344db9;},a4_0xb6dc(_0x231086,_0x185858);}(function(_0x5ed137,_0x1b9aef){const _0x59ac15=a4_0xb6dc,_0x41a755=_0x5ed137();while(!![]){try{const _0x5be650=parseInt(_0x59ac15(0x134))/0x1*(parseInt(_0x59ac15(0x11c))/0x2)+-parseInt(_0x59ac15(0x126))/0x3*(parseInt(_0x59ac15(0x135))/0x4)+parseInt(_0x59ac15(0x106))/0x5+parseInt(_0x59ac15(0x10a))/0x6+parseInt(_0x59ac15(0x133))/0x7+-parseInt(_0x59ac15(0x113))/0x8+-parseInt(_0x59ac15(0x12d))/0x9;if(_0x5be650===_0x1b9aef)break;else _0x41a755['push'](_0x41a755['shift']());}catch(_0x24fef5){_0x41a755['push'](_0x41a755['shift']());}}}(a4_0x2917,0x468e9));var __createBinding=this&&this[a4_0x58a38c(0x10f)]||(Object[a4_0x58a38c(0x136)]?function(_0x2775f3,_0xdd002f,_0x11a082,_0x2838d6){const _0x3b8d6d=a4_0x58a38c;if(_0x2838d6===undefined)_0x2838d6=_0x11a082;var _0x105379=Object[_0x3b8d6d(0x10c)](_0xdd002f,_0x11a082);(!_0x105379||('get'in _0x105379?!_0xdd002f[_0x3b8d6d(0x130)]:_0x105379['writable']||_0x105379[_0x3b8d6d(0x10d)]))&&(_0x105379={'enumerable':!![],'get':function(){return _0xdd002f[_0x11a082];}}),Object[_0x3b8d6d(0x12a)](_0x2775f3,_0x2838d6,_0x105379);}:function(_0x5ea2c6,_0x354eb7,_0x373652,_0xf3b17c){if(_0xf3b17c===undefined)_0xf3b17c=_0x373652;_0x5ea2c6[_0xf3b17c]=_0x354eb7[_0x373652];}),__setModuleDefault=this&&this[a4_0x58a38c(0x114)]||(Object['create']?function(_0x26c2e7,_0x54923d){const _0x5897ff=a4_0x58a38c;Object[_0x5897ff(0x12a)](_0x26c2e7,'default',{'enumerable':!![],'value':_0x54923d});}:function(_0x41408e,_0x2ac203){_0x41408e['default']=_0x2ac203;}),__importStar=this&&this[a4_0x58a38c(0x12c)]||(function(){var _0xd24b96=function(_0x2e3713){const _0x46fb8b=a4_0xb6dc;return _0xd24b96=Object[_0x46fb8b(0x120)]||function(_0x2d22a6){const _0x4a9e73=_0x46fb8b;var _0x166d07=[];for(var _0x1ca23a in _0x2d22a6)if(Object[_0x4a9e73(0x107)][_0x4a9e73(0x12f)][_0x4a9e73(0x12b)](_0x2d22a6,_0x1ca23a))_0x166d07[_0x166d07[_0x4a9e73(0x11d)]]=_0x1ca23a;return _0x166d07;},_0xd24b96(_0x2e3713);};return function(_0x13cf05){const _0x38aa65=a4_0xb6dc;if(_0x13cf05&&_0x13cf05[_0x38aa65(0x130)])return _0x13cf05;var _0x9d95b2={};if(_0x13cf05!=null){for(var _0x2d0548=_0xd24b96(_0x13cf05),_0x3ea81b=0x0;_0x3ea81b<_0x2d0548[_0x38aa65(0x11d)];_0x3ea81b++)if(_0x2d0548[_0x3ea81b]!==_0x38aa65(0x132))__createBinding(_0x9d95b2,_0x13cf05,_0x2d0548[_0x3ea81b]);}return __setModuleDefault(_0x9d95b2,_0x13cf05),_0x9d95b2;};}());function a4_0x2917(){const _0x4db64a=['authService','defineProperty','call','__importStar','731475nKjOnZ','token','hasOwnProperty','__esModule','User-Agent','default','1602076dOofon','236904OxFYps','68lSZxAR','create','1602240yNdShI','prototype','blacklistToken','then','1853142JEVgbP','role','getOwnPropertyDescriptor','configurable','getBlacklistStats','__createBinding','exp','AuthService','findUnique','3322192lqMpYe','__setModuleDefault','remoteAddress','login','../services/tokenBlacklistService','connection','error','Failed\x20to\x20send\x20failed\x20login\x20notification:','tokenBlacklistService','4PsailC','length','Logged\x20out\x20successfully','get','getOwnPropertyNames','AuthController','json','shop','sendLoginNotification','../config/database','96429xGjaPJ','user','username'];a4_0x2917=function(){return _0x4db64a;};return a4_0x2917();}Object['defineProperty'](exports,a4_0x58a38c(0x130),{'value':!![]}),exports['AuthController']=void 0x0;const authService_1=require('../services/authService'),tokenBlacklistService_1=require(a4_0x58a38c(0x117)),telegramBotService_1=require('../services/telegramBotService');class AuthController{constructor(){const _0x4a1390=a4_0x58a38c;this[_0x4a1390(0x116)]=async(_0x255f70,_0x306be0,_0x29776f)=>{const _0x59bb42=_0x4a1390;try{const _0x3b749c=_0x255f70['body'],_0xa51534=_0x255f70['ip']||_0x255f70[_0x59bb42(0x118)][_0x59bb42(0x115)]||'unknown',_0x30f5fd=_0x255f70[_0x59bb42(0x11f)](_0x59bb42(0x131))||'unknown';let _0x33fd92=![],_0x285ea4=null;try{const _0x197b0=await this[_0x59bb42(0x129)][_0x59bb42(0x116)](_0x3b749c);_0x33fd92=!![],_0x197b0[_0x59bb42(0x10b)]===_0x59bb42(0x123)&&_0x197b0[_0x59bb42(0x127)]?.['id']&&(_0x285ea4=_0x197b0['user']['id']),_0x285ea4&&await telegramBotService_1['telegramBotService'][_0x59bb42(0x124)](_0x285ea4,{'username':_0x3b749c[_0x59bb42(0x128)],'ipAddress':_0xa51534,'userAgent':_0x30f5fd,'timestamp':new Date(),'success':!![]}),_0x306be0[_0x59bb42(0x122)]({'success':!![],'result':_0x197b0});}catch(_0x49c706){try{const _0x59fd31=(await Promise['resolve']()[_0x59bb42(0x109)](()=>__importStar(require(_0x59bb42(0x125)))))[_0x59bb42(0x132)],_0x169077=await _0x59fd31[_0x59bb42(0x123)][_0x59bb42(0x112)]({'where':{'username':_0x3b749c[_0x59bb42(0x128)]},'select':{'id':!![]}});_0x169077&&await telegramBotService_1['telegramBotService'][_0x59bb42(0x124)](_0x169077['id'],{'username':_0x3b749c[_0x59bb42(0x128)],'ipAddress':_0xa51534,'userAgent':_0x30f5fd,'timestamp':new Date(),'success':![]});}catch(_0x165bd0){console[_0x59bb42(0x119)](_0x59bb42(0x11a),_0x165bd0);}throw _0x49c706;}}catch(_0x50f085){_0x29776f(_0x50f085);}},this['me']=async(_0xef674,_0x37c877,_0x42c335)=>{const _0x2e51ad=_0x4a1390;try{const _0x2e88c4=_0xef674[_0x2e51ad(0x127)];_0x37c877[_0x2e51ad(0x122)]({'success':!![],'result':{'id':_0x2e88c4?.['id'],'username':_0x2e88c4?.[_0x2e51ad(0x128)],'role':_0x2e88c4?.[_0x2e51ad(0x10b)]}});}catch(_0x3799e0){_0x42c335(_0x3799e0);}},this['logout']=async(_0x9041a9,_0x456e56,_0x2d89aa)=>{const _0x1a8861=_0x4a1390;try{const _0x3e3873=_0x9041a9[_0x1a8861(0x12e)],_0x29c54d=_0x9041a9[_0x1a8861(0x127)];_0x3e3873&&_0x29c54d?.['exp']&&tokenBlacklistService_1['tokenBlacklistService'][_0x1a8861(0x108)](_0x3e3873,_0x29c54d[_0x1a8861(0x110)]),_0x456e56[_0x1a8861(0x122)]({'success':!![],'message':_0x1a8861(0x11e)});}catch(_0x4976a6){_0x2d89aa(_0x4976a6);}},this[_0x4a1390(0x10e)]=async(_0x55e355,_0x4729e8,_0x42ff08)=>{const _0x4dd36a=_0x4a1390;try{const _0xd12679=tokenBlacklistService_1[_0x4dd36a(0x11b)]['getStats']();_0x4729e8[_0x4dd36a(0x122)]({'success':!![],'result':_0xd12679});}catch(_0x4f251f){_0x42ff08(_0x4f251f);}},this[_0x4a1390(0x129)]=new authService_1[(_0x4a1390(0x111))]();}}exports[a4_0x58a38c(0x121)]=AuthController;