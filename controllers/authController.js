'use strict';const a4_0x417155=a4_0x2c35;(function(_0x2c4297,_0x56688d){const _0x2dd028=a4_0x2c35,_0x3659e6=_0x2c4297();while(!![]){try{const _0x3ae620=parseInt(_0x2dd028(0xb3))/0x1+parseInt(_0x2dd028(0x98))/0x2*(-parseInt(_0x2dd028(0xc6))/0x3)+-parseInt(_0x2dd028(0xae))/0x4+-parseInt(_0x2dd028(0xb9))/0x5*(parseInt(_0x2dd028(0x9c))/0x6)+-parseInt(_0x2dd028(0xc1))/0x7*(-parseInt(_0x2dd028(0xaf))/0x8)+parseInt(_0x2dd028(0x9f))/0x9+-parseInt(_0x2dd028(0xb5))/0xa;if(_0x3ae620===_0x56688d)break;else _0x3659e6['push'](_0x3659e6['shift']());}catch(_0x2a3e89){_0x3659e6['push'](_0x3659e6['shift']());}}}(a4_0x4861,0xb8e4c));var __createBinding=this&&this[a4_0x417155(0xbf)]||(Object['create']?function(_0x2b429b,_0x530301,_0x3d1f82,_0x3b2f53){const _0x5665b1=a4_0x417155;if(_0x3b2f53===undefined)_0x3b2f53=_0x3d1f82;var _0x904d3a=Object[_0x5665b1(0xad)](_0x530301,_0x3d1f82);(!_0x904d3a||('get'in _0x904d3a?!_0x530301[_0x5665b1(0xa8)]:_0x904d3a[_0x5665b1(0xbe)]||_0x904d3a[_0x5665b1(0xc0)]))&&(_0x904d3a={'enumerable':!![],'get':function(){return _0x530301[_0x3d1f82];}}),Object[_0x5665b1(0x9d)](_0x2b429b,_0x3b2f53,_0x904d3a);}:function(_0x40a736,_0x26fee9,_0x35315e,_0x394bf2){if(_0x394bf2===undefined)_0x394bf2=_0x35315e;_0x40a736[_0x394bf2]=_0x26fee9[_0x35315e];}),__setModuleDefault=this&&this[a4_0x417155(0xb4)]||(Object[a4_0x417155(0xa7)]?function(_0x42e3d5,_0x152afe){const _0x55afc4=a4_0x417155;Object[_0x55afc4(0x9d)](_0x42e3d5,_0x55afc4(0xc7),{'enumerable':!![],'value':_0x152afe});}:function(_0x6c3da9,_0x5dd913){const _0x1db35c=a4_0x417155;_0x6c3da9[_0x1db35c(0xc7)]=_0x5dd913;}),__importStar=this&&this[a4_0x417155(0xba)]||(function(){var _0x2f4eef=function(_0x59a518){const _0x54f1c9=a4_0x2c35;return _0x2f4eef=Object[_0x54f1c9(0xb8)]||function(_0x300361){const _0x146b73=_0x54f1c9;var _0x4ff2f3=[];for(var _0x747104 in _0x300361)if(Object['prototype'][_0x146b73(0xa5)]['call'](_0x300361,_0x747104))_0x4ff2f3[_0x4ff2f3[_0x146b73(0x9b)]]=_0x747104;return _0x4ff2f3;},_0x2f4eef(_0x59a518);};return function(_0x3a0f9a){const _0x5d6d39=a4_0x2c35;if(_0x3a0f9a&&_0x3a0f9a[_0x5d6d39(0xa8)])return _0x3a0f9a;var _0x5819f1={};if(_0x3a0f9a!=null){for(var _0x533570=_0x2f4eef(_0x3a0f9a),_0x492bbe=0x0;_0x492bbe<_0x533570[_0x5d6d39(0x9b)];_0x492bbe++)if(_0x533570[_0x492bbe]!==_0x5d6d39(0xc7))__createBinding(_0x5819f1,_0x3a0f9a,_0x533570[_0x492bbe]);}return __setModuleDefault(_0x5819f1,_0x3a0f9a),_0x5819f1;};}());function a4_0x4861(){const _0x110578=['Logged\x20out\x20successfully','remoteAddress','tokenBlacklistService','392478saLmFm','user','error','length','126TxybVK','defineProperty','getBlacklistStats','13207527dSuPnv','AuthService','User-Agent','connection','logout','resolve','hasOwnProperty','shop','create','__esModule','telegramBotService','get','username','../config/database','getOwnPropertyDescriptor','2541520yhsbbY','10692368ZEAPKc','json','sendLoginNotification','Failed\x20to\x20send\x20failed\x20login\x20notification:','1260893tvnKLo','__setModuleDefault','19844310IBjLom','role','unknown','getOwnPropertyNames','117040HbrlGs','__importStar','AuthController','token','../services/tokenBlacklistService','writable','__createBinding','configurable','7gdJKSc','login','../services/telegramBotService','authService','exp','3SlXUHC','default'];a4_0x4861=function(){return _0x110578;};return a4_0x4861();}Object['defineProperty'](exports,a4_0x417155(0xa8),{'value':!![]}),exports['AuthController']=void 0x0;const authService_1=require('../services/authService'),tokenBlacklistService_1=require(a4_0x417155(0xbd)),telegramBotService_1=require(a4_0x417155(0xc3));class AuthController{constructor(){const _0x17d2f3=a4_0x417155;this[_0x17d2f3(0xc2)]=async(_0x187e91,_0x23ddd6,_0x2ad1b3)=>{const _0x2021b5=_0x17d2f3;try{const _0x544135=_0x187e91['body'],_0x15afcd=_0x187e91['ip']||_0x187e91[_0x2021b5(0xa2)][_0x2021b5(0x96)]||_0x2021b5(0xb7),_0x3b7f10=_0x187e91[_0x2021b5(0xaa)](_0x2021b5(0xa1))||'unknown';let _0x86b18d=![],_0x3567eb=null;try{const _0x14aea2=await this[_0x2021b5(0xc4)]['login'](_0x544135);_0x86b18d=!![],_0x14aea2[_0x2021b5(0xb6)]===_0x2021b5(0xa6)&&_0x14aea2[_0x2021b5(0x99)]?.['id']&&(_0x3567eb=_0x14aea2[_0x2021b5(0x99)]['id']),_0x3567eb&&await telegramBotService_1[_0x2021b5(0xa9)][_0x2021b5(0xb1)](_0x3567eb,{'username':_0x544135['username'],'ipAddress':_0x15afcd,'userAgent':_0x3b7f10,'timestamp':new Date(),'success':!![]}),_0x23ddd6[_0x2021b5(0xb0)]({'success':!![],'result':_0x14aea2});}catch(_0x4395a1){try{const _0x175360=(await Promise[_0x2021b5(0xa4)]()['then'](()=>__importStar(require(_0x2021b5(0xac)))))[_0x2021b5(0xc7)],_0x315432=await _0x175360['shop']['findUnique']({'where':{'username':_0x544135[_0x2021b5(0xab)]},'select':{'id':!![]}});_0x315432&&await telegramBotService_1['telegramBotService'][_0x2021b5(0xb1)](_0x315432['id'],{'username':_0x544135[_0x2021b5(0xab)],'ipAddress':_0x15afcd,'userAgent':_0x3b7f10,'timestamp':new Date(),'success':![]});}catch(_0x93f9d4){console[_0x2021b5(0x9a)](_0x2021b5(0xb2),_0x93f9d4);}throw _0x4395a1;}}catch(_0x46a9a9){_0x2ad1b3(_0x46a9a9);}},this['me']=async(_0x522058,_0x33de7a,_0x6ef232)=>{const _0x5d95fc=_0x17d2f3;try{const _0xea89b8=_0x522058[_0x5d95fc(0x99)];_0x33de7a['json']({'success':!![],'result':{'id':_0xea89b8?.['id'],'username':_0xea89b8?.[_0x5d95fc(0xab)],'role':_0xea89b8?.[_0x5d95fc(0xb6)]}});}catch(_0x12579e){_0x6ef232(_0x12579e);}},this[_0x17d2f3(0xa3)]=async(_0x376561,_0x288caa,_0x3d27d2)=>{const _0x640b3a=_0x17d2f3;try{const _0x40ff9a=_0x376561[_0x640b3a(0xbc)],_0x39aa08=_0x376561[_0x640b3a(0x99)];_0x40ff9a&&_0x39aa08?.['exp']&&tokenBlacklistService_1[_0x640b3a(0x97)]['blacklistToken'](_0x40ff9a,_0x39aa08[_0x640b3a(0xc5)]),_0x288caa[_0x640b3a(0xb0)]({'success':!![],'message':_0x640b3a(0xc8)});}catch(_0x4b3299){_0x3d27d2(_0x4b3299);}},this[_0x17d2f3(0x9e)]=async(_0x1c450f,_0x28e5ec,_0x5c7bb6)=>{const _0x5aa390=_0x17d2f3;try{const _0x139c46=tokenBlacklistService_1['tokenBlacklistService']['getStats']();_0x28e5ec[_0x5aa390(0xb0)]({'success':!![],'result':_0x139c46});}catch(_0x49b8fc){_0x5c7bb6(_0x49b8fc);}},this[_0x17d2f3(0xc4)]=new authService_1[(_0x17d2f3(0xa0))]();}}function a4_0x2c35(_0x2fdc80,_0x4803d2){const _0x4861b5=a4_0x4861();return a4_0x2c35=function(_0x2c35b6,_0x4cb773){_0x2c35b6=_0x2c35b6-0x96;let _0x4116cf=_0x4861b5[_0x2c35b6];return _0x4116cf;},a4_0x2c35(_0x2fdc80,_0x4803d2);}exports[a4_0x417155(0xbb)]=AuthController;