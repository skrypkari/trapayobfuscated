'use strict';function a4_0x1632(_0x2c127b,_0x3b7140){const _0x49621f=a4_0x4962();return a4_0x1632=function(_0x1632c8,_0x48ac88){_0x1632c8=_0x1632c8-0x1d5;let _0x178235=_0x49621f[_0x1632c8];return _0x178235;},a4_0x1632(_0x2c127b,_0x3b7140);}const a4_0x2e97cd=a4_0x1632;(function(_0x20f6b7,_0x10ed42){const _0x56a4ea=a4_0x1632,_0x59d36b=_0x20f6b7();while(!![]){try{const _0x30c6d8=parseInt(_0x56a4ea(0x1d6))/0x1+parseInt(_0x56a4ea(0x1f6))/0x2*(parseInt(_0x56a4ea(0x1ff))/0x3)+parseInt(_0x56a4ea(0x1fd))/0x4+-parseInt(_0x56a4ea(0x1d5))/0x5+-parseInt(_0x56a4ea(0x1dc))/0x6*(parseInt(_0x56a4ea(0x1fa))/0x7)+parseInt(_0x56a4ea(0x1eb))/0x8+parseInt(_0x56a4ea(0x1ed))/0x9;if(_0x30c6d8===_0x10ed42)break;else _0x59d36b['push'](_0x59d36b['shift']());}catch(_0x1d3577){_0x59d36b['push'](_0x59d36b['shift']());}}}(a4_0x4962,0xc9117));var __createBinding=this&&this[a4_0x2e97cd(0x1d9)]||(Object[a4_0x2e97cd(0x1f3)]?function(_0x379c46,_0x2fcbc2,_0x1c55a1,_0x526fed){const _0x4f1be2=a4_0x2e97cd;if(_0x526fed===undefined)_0x526fed=_0x1c55a1;var _0x4d53aa=Object[_0x4f1be2(0x200)](_0x2fcbc2,_0x1c55a1);(!_0x4d53aa||(_0x4f1be2(0x1e6)in _0x4d53aa?!_0x2fcbc2['__esModule']:_0x4d53aa[_0x4f1be2(0x1ea)]||_0x4d53aa['configurable']))&&(_0x4d53aa={'enumerable':!![],'get':function(){return _0x2fcbc2[_0x1c55a1];}}),Object[_0x4f1be2(0x1e3)](_0x379c46,_0x526fed,_0x4d53aa);}:function(_0x55d8c8,_0x566eee,_0x19a86e,_0x27c9c6){if(_0x27c9c6===undefined)_0x27c9c6=_0x19a86e;_0x55d8c8[_0x27c9c6]=_0x566eee[_0x19a86e];}),__setModuleDefault=this&&this[a4_0x2e97cd(0x202)]||(Object[a4_0x2e97cd(0x1f3)]?function(_0x31f05b,_0x329be7){const _0x133695=a4_0x2e97cd;Object[_0x133695(0x1e3)](_0x31f05b,_0x133695(0x1db),{'enumerable':!![],'value':_0x329be7});}:function(_0x3148ea,_0x5c8bd7){const _0x1b7338=a4_0x2e97cd;_0x3148ea[_0x1b7338(0x1db)]=_0x5c8bd7;}),__importStar=this&&this[a4_0x2e97cd(0x1e4)]||(function(){var _0x476305=function(_0x41457b){const _0x1198d0=a4_0x1632;return _0x476305=Object[_0x1198d0(0x1d8)]||function(_0x40e3c8){const _0x51d201=_0x1198d0;var _0x4865a4=[];for(var _0x5363f6 in _0x40e3c8)if(Object['prototype'][_0x51d201(0x1de)][_0x51d201(0x1f4)](_0x40e3c8,_0x5363f6))_0x4865a4[_0x4865a4['length']]=_0x5363f6;return _0x4865a4;},_0x476305(_0x41457b);};return function(_0x5a9a7a){const _0x3d3b9b=a4_0x1632;if(_0x5a9a7a&&_0x5a9a7a[_0x3d3b9b(0x1d7)])return _0x5a9a7a;var _0x178c7b={};if(_0x5a9a7a!=null){for(var _0x455a0e=_0x476305(_0x5a9a7a),_0x169999=0x0;_0x169999<_0x455a0e['length'];_0x169999++)if(_0x455a0e[_0x169999]!==_0x3d3b9b(0x1db))__createBinding(_0x178c7b,_0x5a9a7a,_0x455a0e[_0x169999]);}return __setModuleDefault(_0x178c7b,_0x5a9a7a),_0x178c7b;};}());Object[a4_0x2e97cd(0x1e3)](exports,a4_0x2e97cd(0x1d7),{'value':!![]}),exports['AuthController']=void 0x0;const authService_1=require('../services/authService'),tokenBlacklistService_1=require(a4_0x2e97cd(0x1f9)),telegramBotService_1=require(a4_0x2e97cd(0x1fc));class AuthController{constructor(){const _0x591e87=a4_0x2e97cd;this[_0x591e87(0x1e7)]=async(_0x16ef29,_0x41c5cb,_0x17a4fc)=>{const _0x494989=_0x591e87;try{const _0x1e4229=_0x16ef29[_0x494989(0x1ef)],_0xceda48=_0x16ef29['ip']||_0x16ef29['connection'][_0x494989(0x1f2)]||_0x494989(0x1fe),_0xca7d7b=_0x16ef29[_0x494989(0x1e6)](_0x494989(0x1f7))||_0x494989(0x1fe);let _0x42dfa9=![],_0x2517d9=null;try{const _0x39cc92=await this[_0x494989(0x1e1)][_0x494989(0x1e7)](_0x1e4229);_0x42dfa9=!![],_0x39cc92['role']===_0x494989(0x1f5)&&_0x39cc92[_0x494989(0x1e8)]?.['id']&&(_0x2517d9=_0x39cc92[_0x494989(0x1e8)]['id']),_0x2517d9&&await telegramBotService_1[_0x494989(0x1f8)][_0x494989(0x1ec)](_0x2517d9,{'username':_0x1e4229['username'],'ipAddress':_0xceda48,'userAgent':_0xca7d7b,'timestamp':new Date(),'success':!![]}),_0x41c5cb['json']({'success':!![],'result':_0x39cc92});}catch(_0x3d21d1){try{const _0x35a153=(await Promise[_0x494989(0x1dd)]()[_0x494989(0x1f0)](()=>__importStar(require(_0x494989(0x1e5)))))[_0x494989(0x1db)],_0x50d6a9=await _0x35a153[_0x494989(0x1f5)]['findUnique']({'where':{'username':_0x1e4229[_0x494989(0x1da)]},'select':{'id':!![]}});_0x50d6a9&&await telegramBotService_1[_0x494989(0x1f8)][_0x494989(0x1ec)](_0x50d6a9['id'],{'username':_0x1e4229[_0x494989(0x1da)],'ipAddress':_0xceda48,'userAgent':_0xca7d7b,'timestamp':new Date(),'success':![]});}catch(_0x591619){console['error']('Failed\x20to\x20send\x20failed\x20login\x20notification:',_0x591619);}throw _0x3d21d1;}}catch(_0x4c90ee){_0x17a4fc(_0x4c90ee);}},this['me']=async(_0x4e3a3a,_0x366ebd,_0x112bea)=>{const _0x2083aa=_0x591e87;try{const _0x50f9d7=_0x4e3a3a[_0x2083aa(0x1e8)];_0x366ebd['json']({'success':!![],'result':{'id':_0x50f9d7?.['id'],'username':_0x50f9d7?.[_0x2083aa(0x1da)],'role':_0x50f9d7?.[_0x2083aa(0x201)]}});}catch(_0x33f716){_0x112bea(_0x33f716);}},this[_0x591e87(0x1fb)]=async(_0x1f173c,_0x16641f,_0x1bb71b)=>{const _0x398020=_0x591e87;try{const _0x45412e=_0x1f173c['token'],_0x24180a=_0x1f173c[_0x398020(0x1e8)];_0x45412e&&_0x24180a?.['exp']&&tokenBlacklistService_1[_0x398020(0x1df)]['blacklistToken'](_0x45412e,_0x24180a['exp']),_0x16641f[_0x398020(0x1ee)]({'success':!![],'message':_0x398020(0x1e0)});}catch(_0xef24cf){_0x1bb71b(_0xef24cf);}},this[_0x591e87(0x1e9)]=async(_0x39d95e,_0x19cda5,_0x257710)=>{const _0x392cfb=_0x591e87;try{const _0x3be95f=tokenBlacklistService_1[_0x392cfb(0x1df)][_0x392cfb(0x1e2)]();_0x19cda5[_0x392cfb(0x1ee)]({'success':!![],'result':_0x3be95f});}catch(_0x112a47){_0x257710(_0x112a47);}},this[_0x591e87(0x1e1)]=new authService_1[(_0x591e87(0x1f1))]();}}exports['AuthController']=AuthController;function a4_0x4962(){const _0x34b797=['../services/telegramBotService','335752bUNSSa','unknown','74469puoonh','getOwnPropertyDescriptor','role','__setModuleDefault','5545935QZYBrY','392178bQfgRh','__esModule','getOwnPropertyNames','__createBinding','username','default','52926SAjDqV','resolve','hasOwnProperty','tokenBlacklistService','Logged\x20out\x20successfully','authService','getStats','defineProperty','__importStar','../config/database','get','login','user','getBlacklistStats','writable','7072344cXDuyw','sendLoginNotification','9722880kkIfBq','json','body','then','AuthService','remoteAddress','create','call','shop','6cermdg','User-Agent','telegramBotService','../services/tokenBlacklistService','462rEZrhd','logout'];a4_0x4962=function(){return _0x34b797;};return a4_0x4962();}