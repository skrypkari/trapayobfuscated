'use strict';const a4_0x51adf5=a4_0x548b;function a4_0x548b(_0x4c9926,_0x3d2b9a){const _0x2c6bfc=a4_0x2c6b();return a4_0x548b=function(_0x548b60,_0x2ad83e){_0x548b60=_0x548b60-0xd8;let _0x375b60=_0x2c6bfc[_0x548b60];return _0x375b60;},a4_0x548b(_0x4c9926,_0x3d2b9a);}(function(_0x1d6dcb,_0x37dbe7){const _0x1d67e9=a4_0x548b,_0x146d72=_0x1d6dcb();while(!![]){try{const _0x2fd3ae=-parseInt(_0x1d67e9(0x101))/0x1*(-parseInt(_0x1d67e9(0xe8))/0x2)+-parseInt(_0x1d67e9(0xfc))/0x3*(parseInt(_0x1d67e9(0xe1))/0x4)+-parseInt(_0x1d67e9(0x106))/0x5+-parseInt(_0x1d67e9(0x105))/0x6+-parseInt(_0x1d67e9(0xe9))/0x7+-parseInt(_0x1d67e9(0xfb))/0x8*(-parseInt(_0x1d67e9(0xf5))/0x9)+-parseInt(_0x1d67e9(0xf2))/0xa*(-parseInt(_0x1d67e9(0xec))/0xb);if(_0x2fd3ae===_0x37dbe7)break;else _0x146d72['push'](_0x146d72['shift']());}catch(_0x2675da){_0x146d72['push'](_0x146d72['shift']());}}}(a4_0x2c6b,0x38cfa));var __createBinding=this&&this['__createBinding']||(Object[a4_0x51adf5(0x100)]?function(_0xd71eb7,_0x6bd0f8,_0x1650d7,_0x25a1ac){const _0x12fc7d=a4_0x51adf5;if(_0x25a1ac===undefined)_0x25a1ac=_0x1650d7;var _0x581961=Object[_0x12fc7d(0xdf)](_0x6bd0f8,_0x1650d7);(!_0x581961||('get'in _0x581961?!_0x6bd0f8[_0x12fc7d(0x102)]:_0x581961['writable']||_0x581961[_0x12fc7d(0xea)]))&&(_0x581961={'enumerable':!![],'get':function(){return _0x6bd0f8[_0x1650d7];}}),Object['defineProperty'](_0xd71eb7,_0x25a1ac,_0x581961);}:function(_0x55185f,_0x5a8793,_0x3449ce,_0x3f54b8){if(_0x3f54b8===undefined)_0x3f54b8=_0x3449ce;_0x55185f[_0x3f54b8]=_0x5a8793[_0x3449ce];}),__setModuleDefault=this&&this[a4_0x51adf5(0xef)]||(Object['create']?function(_0x4fec21,_0x3e2ff2){const _0x28904f=a4_0x51adf5;Object[_0x28904f(0xf0)](_0x4fec21,_0x28904f(0xf6),{'enumerable':!![],'value':_0x3e2ff2});}:function(_0x5443b3,_0x299370){const _0x320be9=a4_0x51adf5;_0x5443b3[_0x320be9(0xf6)]=_0x299370;}),__importStar=this&&this['__importStar']||(function(){var _0x411d96=function(_0x474718){return _0x411d96=Object['getOwnPropertyNames']||function(_0x583e69){const _0x25730d=a4_0x548b;var _0x159607=[];for(var _0xb53d22 in _0x583e69)if(Object['prototype'][_0x25730d(0xee)][_0x25730d(0x109)](_0x583e69,_0xb53d22))_0x159607[_0x159607[_0x25730d(0x103)]]=_0xb53d22;return _0x159607;},_0x411d96(_0x474718);};return function(_0x2fe7e5){const _0x4146a4=a4_0x548b;if(_0x2fe7e5&&_0x2fe7e5[_0x4146a4(0x102)])return _0x2fe7e5;var _0x57addb={};if(_0x2fe7e5!=null){for(var _0x621a21=_0x411d96(_0x2fe7e5),_0x2f59e4=0x0;_0x2f59e4<_0x621a21['length'];_0x2f59e4++)if(_0x621a21[_0x2f59e4]!==_0x4146a4(0xf6))__createBinding(_0x57addb,_0x2fe7e5,_0x621a21[_0x2f59e4]);}return __setModuleDefault(_0x57addb,_0x2fe7e5),_0x57addb;};}());Object[a4_0x51adf5(0xf0)](exports,a4_0x51adf5(0x102),{'value':!![]}),exports[a4_0x51adf5(0xf3)]=void 0x0;const authService_1=require(a4_0x51adf5(0xe2)),tokenBlacklistService_1=require('../services/tokenBlacklistService'),telegramBotService_1=require(a4_0x51adf5(0xeb));class AuthController{constructor(){const _0x24fdac=a4_0x51adf5;this['login']=async(_0x11247e,_0x336d8c,_0x4d3d50)=>{const _0x573f44=a4_0x548b;try{const _0x2e0322=_0x11247e[_0x573f44(0x104)],_0x4f3e86=_0x11247e['ip']||_0x11247e['connection'][_0x573f44(0xfa)]||_0x573f44(0xf1),_0x14f160=_0x11247e[_0x573f44(0xe6)](_0x573f44(0x107))||'unknown';let _0x1fd1fd=![],_0x47e57c=null;try{const _0x6eaa6b=await this[_0x573f44(0xfe)][_0x573f44(0xda)](_0x2e0322);_0x1fd1fd=!![],_0x6eaa6b[_0x573f44(0xe3)]===_0x573f44(0xf7)&&_0x6eaa6b[_0x573f44(0xf9)]?.['id']&&(_0x47e57c=_0x6eaa6b['user']['id']),_0x47e57c&&await telegramBotService_1[_0x573f44(0xdc)][_0x573f44(0xfd)](_0x47e57c,{'username':_0x2e0322[_0x573f44(0xff)],'ipAddress':_0x4f3e86,'userAgent':_0x14f160,'timestamp':new Date(),'success':!![]}),_0x336d8c[_0x573f44(0xe0)]({'success':!![],'result':_0x6eaa6b});}catch(_0x92985d){try{const _0x788ce8=(await Promise[_0x573f44(0xdd)]()[_0x573f44(0xde)](()=>__importStar(require('../config/database'))))['default'],_0x54c87d=await _0x788ce8[_0x573f44(0xf7)][_0x573f44(0xe7)]({'where':{'username':_0x2e0322[_0x573f44(0xff)]},'select':{'id':!![]}});_0x54c87d&&await telegramBotService_1[_0x573f44(0xdc)][_0x573f44(0xfd)](_0x54c87d['id'],{'username':_0x2e0322[_0x573f44(0xff)],'ipAddress':_0x4f3e86,'userAgent':_0x14f160,'timestamp':new Date(),'success':![]});}catch(_0x5b688b){console['error'](_0x573f44(0xd9),_0x5b688b);}throw _0x92985d;}}catch(_0x4340b9){_0x4d3d50(_0x4340b9);}},this['me']=async(_0x5a532f,_0x59b4d7,_0xc0c0c7)=>{const _0x5a74db=a4_0x548b;try{const _0x32e62c=_0x5a532f[_0x5a74db(0xf9)];_0x59b4d7[_0x5a74db(0xe0)]({'success':!![],'result':{'id':_0x32e62c?.['id'],'username':_0x32e62c?.[_0x5a74db(0xff)],'role':_0x32e62c?.[_0x5a74db(0xe3)]}});}catch(_0x22eaae){_0xc0c0c7(_0x22eaae);}},this[_0x24fdac(0xf8)]=async(_0xc1edd6,_0x2cc9ec,_0x5e0af5)=>{const _0x593928=_0x24fdac;try{const _0x2a9adc=_0xc1edd6[_0x593928(0xdb)],_0x5c2027=_0xc1edd6['user'];_0x2a9adc&&_0x5c2027?.['exp']&&tokenBlacklistService_1[_0x593928(0xe5)]['blacklistToken'](_0x2a9adc,_0x5c2027[_0x593928(0xe4)]),_0x2cc9ec[_0x593928(0xe0)]({'success':!![],'message':_0x593928(0xd8)});}catch(_0x4afd7a){_0x5e0af5(_0x4afd7a);}},this[_0x24fdac(0xed)]=async(_0x4afaec,_0x4e8023,_0x3ef862)=>{const _0x72b4e=_0x24fdac;try{const _0x531316=tokenBlacklistService_1['tokenBlacklistService'][_0x72b4e(0xf4)]();_0x4e8023['json']({'success':!![],'result':_0x531316});}catch(_0x18839b){_0x3ef862(_0x18839b);}},this[_0x24fdac(0xfe)]=new authService_1[(_0x24fdac(0x108))]();}}function a4_0x2c6b(){const _0x4f5c65=['shop','logout','user','remoteAddress','56rgeTDq','171rjcAgK','sendLoginNotification','authService','username','create','89704sDGxXR','__esModule','length','body','1834128PhEITd','1833145oVXHOy','User-Agent','AuthService','call','Logged\x20out\x20successfully','Failed\x20to\x20send\x20failed\x20login\x20notification:','login','token','telegramBotService','resolve','then','getOwnPropertyDescriptor','json','29836QxHnOY','../services/authService','role','exp','tokenBlacklistService','get','findUnique','2cXPJqR','1311660sooAAb','configurable','../services/telegramBotService','13424961piTcab','getBlacklistStats','hasOwnProperty','__setModuleDefault','defineProperty','unknown','10YmELsi','AuthController','getStats','266661wZTnir','default'];a4_0x2c6b=function(){return _0x4f5c65;};return a4_0x2c6b();}exports[a4_0x51adf5(0xf3)]=AuthController;