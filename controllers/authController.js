'use strict';const a4_0x314d11=a4_0x472b;(function(_0x52bc85,_0x15b76d){const _0x26a2a3=a4_0x472b,_0x44ba7b=_0x52bc85();while(!![]){try{const _0x26472a=parseInt(_0x26a2a3(0xbb))/0x1*(-parseInt(_0x26a2a3(0xc6))/0x2)+parseInt(_0x26a2a3(0xb1))/0x3+-parseInt(_0x26a2a3(0xe2))/0x4+-parseInt(_0x26a2a3(0xba))/0x5+parseInt(_0x26a2a3(0xb3))/0x6*(parseInt(_0x26a2a3(0xd1))/0x7)+parseInt(_0x26a2a3(0xc7))/0x8+parseInt(_0x26a2a3(0xce))/0x9;if(_0x26472a===_0x15b76d)break;else _0x44ba7b['push'](_0x44ba7b['shift']());}catch(_0x547def){_0x44ba7b['push'](_0x44ba7b['shift']());}}}(a4_0x46e5,0x55f73));var __createBinding=this&&this[a4_0x314d11(0xe1)]||(Object[a4_0x314d11(0xcc)]?function(_0x36f326,_0x254176,_0xfbb088,_0x169743){const _0x3d6716=a4_0x314d11;if(_0x169743===undefined)_0x169743=_0xfbb088;var _0x296ad0=Object[_0x3d6716(0xca)](_0x254176,_0xfbb088);(!_0x296ad0||(_0x3d6716(0xdd)in _0x296ad0?!_0x254176[_0x3d6716(0xb4)]:_0x296ad0['writable']||_0x296ad0[_0x3d6716(0xbc)]))&&(_0x296ad0={'enumerable':!![],'get':function(){return _0x254176[_0xfbb088];}}),Object[_0x3d6716(0xd4)](_0x36f326,_0x169743,_0x296ad0);}:function(_0x16dc69,_0x58578d,_0x14ae77,_0x125994){if(_0x125994===undefined)_0x125994=_0x14ae77;_0x16dc69[_0x125994]=_0x58578d[_0x14ae77];}),__setModuleDefault=this&&this[a4_0x314d11(0xbf)]||(Object[a4_0x314d11(0xcc)]?function(_0x48c573,_0x1217aa){const _0x59143c=a4_0x314d11;Object[_0x59143c(0xd4)](_0x48c573,'default',{'enumerable':!![],'value':_0x1217aa});}:function(_0x12a583,_0x2d5623){_0x12a583['default']=_0x2d5623;}),__importStar=this&&this[a4_0x314d11(0xc0)]||(function(){var _0x25e220=function(_0x28099){const _0xcf40c=a4_0x472b;return _0x25e220=Object[_0xcf40c(0xdb)]||function(_0xc2c48f){const _0x4d6714=_0xcf40c;var _0x125480=[];for(var _0x37a04e in _0xc2c48f)if(Object[_0x4d6714(0xc4)][_0x4d6714(0xc1)][_0x4d6714(0xcd)](_0xc2c48f,_0x37a04e))_0x125480[_0x125480[_0x4d6714(0xbd)]]=_0x37a04e;return _0x125480;},_0x25e220(_0x28099);};return function(_0x52988f){const _0x3bdae0=a4_0x472b;if(_0x52988f&&_0x52988f['__esModule'])return _0x52988f;var _0x384471={};if(_0x52988f!=null){for(var _0x3d3bef=_0x25e220(_0x52988f),_0x1cab14=0x0;_0x1cab14<_0x3d3bef[_0x3bdae0(0xbd)];_0x1cab14++)if(_0x3d3bef[_0x1cab14]!==_0x3bdae0(0xc9))__createBinding(_0x384471,_0x52988f,_0x3d3bef[_0x1cab14]);}return __setModuleDefault(_0x384471,_0x52988f),_0x384471;};}());Object['defineProperty'](exports,a4_0x314d11(0xb4),{'value':!![]}),exports[a4_0x314d11(0xb8)]=void 0x0;const authService_1=require(a4_0x314d11(0xb2)),tokenBlacklistService_1=require(a4_0x314d11(0xb5)),telegramBotService_1=require(a4_0x314d11(0xe0));function a4_0x472b(_0x13d655,_0x24cde3){const _0x46e596=a4_0x46e5();return a4_0x472b=function(_0x472bbd,_0x490d2a){_0x472bbd=_0x472bbd-0xb0;let _0x181e99=_0x46e596[_0x472bbd];return _0x181e99;},a4_0x472b(_0x13d655,_0x24cde3);}function a4_0x46e5(){const _0x2a4845=['token','username','remoteAddress','getStats','exp','getOwnPropertyNames','connection','get','blacklistToken','error','../services/telegramBotService','__createBinding','1542032MDNvjj','sendLoginNotification','538083mVOGXY','../services/authService','24hFBLeX','__esModule','../services/tokenBlacklistService','findUnique','getBlacklistStats','AuthController','user','2327170Zjgwxi','260417yGPtbz','configurable','length','authService','__setModuleDefault','__importStar','hasOwnProperty','Failed\x20to\x20send\x20failed\x20login\x20notification:','logout','prototype','Logged\x20out\x20successfully','2CJQedV','4369272fMXFrz','telegramBotService','default','getOwnPropertyDescriptor','login','create','call','6064830eMlCvS','User-Agent','tokenBlacklistService','112147pwWpqQ','json','AuthService','defineProperty','unknown'];a4_0x46e5=function(){return _0x2a4845;};return a4_0x46e5();}class AuthController{constructor(){const _0x5a8be6=a4_0x314d11;this[_0x5a8be6(0xcb)]=async(_0x590bdd,_0x6b3728,_0x3bc62b)=>{const _0x49588f=_0x5a8be6;try{const _0x4eb440=_0x590bdd['body'],_0x4217d9=_0x590bdd['ip']||_0x590bdd[_0x49588f(0xdc)][_0x49588f(0xd8)]||_0x49588f(0xd5),_0x2d26ea=_0x590bdd[_0x49588f(0xdd)](_0x49588f(0xcf))||_0x49588f(0xd5);let _0xb74125=![],_0x5386af=null;try{const _0x3f205c=await this['authService']['login'](_0x4eb440);_0xb74125=!![],_0x3f205c['role']==='shop'&&_0x3f205c[_0x49588f(0xb9)]?.['id']&&(_0x5386af=_0x3f205c['user']['id']),_0x5386af&&await telegramBotService_1['telegramBotService'][_0x49588f(0xb0)](_0x5386af,{'username':_0x4eb440[_0x49588f(0xd7)],'ipAddress':_0x4217d9,'userAgent':_0x2d26ea,'timestamp':new Date(),'success':!![]}),_0x6b3728[_0x49588f(0xd2)]({'success':!![],'result':_0x3f205c});}catch(_0x181ee4){try{const _0x59bd6b=(await Promise['resolve']()['then'](()=>__importStar(require('../config/database'))))['default'],_0x3ce338=await _0x59bd6b['shop'][_0x49588f(0xb6)]({'where':{'username':_0x4eb440[_0x49588f(0xd7)]},'select':{'id':!![]}});_0x3ce338&&await telegramBotService_1[_0x49588f(0xc8)][_0x49588f(0xb0)](_0x3ce338['id'],{'username':_0x4eb440[_0x49588f(0xd7)],'ipAddress':_0x4217d9,'userAgent':_0x2d26ea,'timestamp':new Date(),'success':![]});}catch(_0x84e314){console[_0x49588f(0xdf)](_0x49588f(0xc2),_0x84e314);}throw _0x181ee4;}}catch(_0x309103){_0x3bc62b(_0x309103);}},this['me']=async(_0x3b2a7b,_0x4b602b,_0x22cfed)=>{const _0x4a16ff=_0x5a8be6;try{const _0x387788=_0x3b2a7b[_0x4a16ff(0xb9)];_0x4b602b[_0x4a16ff(0xd2)]({'success':!![],'result':{'id':_0x387788?.['id'],'username':_0x387788?.[_0x4a16ff(0xd7)],'role':_0x387788?.['role']}});}catch(_0x28878a){_0x22cfed(_0x28878a);}},this[_0x5a8be6(0xc3)]=async(_0x314a4d,_0x5a6f9b,_0x9f2070)=>{const _0x5909a9=_0x5a8be6;try{const _0x1a03e4=_0x314a4d[_0x5909a9(0xd6)],_0x957b16=_0x314a4d['user'];_0x1a03e4&&_0x957b16?.[_0x5909a9(0xda)]&&tokenBlacklistService_1[_0x5909a9(0xd0)][_0x5909a9(0xde)](_0x1a03e4,_0x957b16[_0x5909a9(0xda)]),_0x5a6f9b[_0x5909a9(0xd2)]({'success':!![],'message':_0x5909a9(0xc5)});}catch(_0x3a9933){_0x9f2070(_0x3a9933);}},this[_0x5a8be6(0xb7)]=async(_0x4a5f82,_0x51d3e4,_0x4f1ed9)=>{const _0xc26966=_0x5a8be6;try{const _0x41bb28=tokenBlacklistService_1['tokenBlacklistService'][_0xc26966(0xd9)]();_0x51d3e4[_0xc26966(0xd2)]({'success':!![],'result':_0x41bb28});}catch(_0x1d7567){_0x4f1ed9(_0x1d7567);}},this[_0x5a8be6(0xbe)]=new authService_1[(_0x5a8be6(0xd3))]();}}exports[a4_0x314d11(0xb8)]=AuthController;