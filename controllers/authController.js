'use strict';const a4_0x3d7b76=a4_0x36bf;(function(_0x5c49b9,_0x4dab76){const _0x326503=a4_0x36bf,_0x174800=_0x5c49b9();while(!![]){try{const _0x2c97ef=parseInt(_0x326503(0x1af))/0x1*(-parseInt(_0x326503(0x191))/0x2)+-parseInt(_0x326503(0x198))/0x3+parseInt(_0x326503(0x19c))/0x4*(parseInt(_0x326503(0x1a7))/0x5)+-parseInt(_0x326503(0x1b0))/0x6+parseInt(_0x326503(0x19d))/0x7+parseInt(_0x326503(0x1a9))/0x8*(-parseInt(_0x326503(0x19a))/0x9)+-parseInt(_0x326503(0x1b8))/0xa*(-parseInt(_0x326503(0x1a8))/0xb);if(_0x2c97ef===_0x4dab76)break;else _0x174800['push'](_0x174800['shift']());}catch(_0x2c39df){_0x174800['push'](_0x174800['shift']());}}}(a4_0x3fd7,0xeba8d));var __createBinding=this&&this[a4_0x3d7b76(0x1ab)]||(Object[a4_0x3d7b76(0x1a2)]?function(_0x3b08c9,_0xe20109,_0x1e2c77,_0x5b12c0){const _0x1453ea=a4_0x3d7b76;if(_0x5b12c0===undefined)_0x5b12c0=_0x1e2c77;var _0x6c2b99=Object[_0x1453ea(0x18d)](_0xe20109,_0x1e2c77);(!_0x6c2b99||(_0x1453ea(0x1a6)in _0x6c2b99?!_0xe20109[_0x1453ea(0x1ad)]:_0x6c2b99[_0x1453ea(0x18c)]||_0x6c2b99[_0x1453ea(0x193)]))&&(_0x6c2b99={'enumerable':!![],'get':function(){return _0xe20109[_0x1e2c77];}}),Object[_0x1453ea(0x1a3)](_0x3b08c9,_0x5b12c0,_0x6c2b99);}:function(_0x50b360,_0xbd92d9,_0xaffc66,_0xe1f116){if(_0xe1f116===undefined)_0xe1f116=_0xaffc66;_0x50b360[_0xe1f116]=_0xbd92d9[_0xaffc66];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a4_0x3d7b76(0x1a2)]?function(_0x4e7bd6,_0x4f0cf8){const _0x3af0df=a4_0x3d7b76;Object[_0x3af0df(0x1a3)](_0x4e7bd6,_0x3af0df(0x192),{'enumerable':!![],'value':_0x4f0cf8});}:function(_0x3ba633,_0x4db8b3){_0x3ba633['default']=_0x4db8b3;}),__importStar=this&&this[a4_0x3d7b76(0x196)]||(function(){var _0x3b6eb4=function(_0x599130){return _0x3b6eb4=Object['getOwnPropertyNames']||function(_0xec1805){const _0x2f716f=a4_0x36bf;var _0x5a3961=[];for(var _0x1e928a in _0xec1805)if(Object[_0x2f716f(0x1aa)][_0x2f716f(0x1a0)][_0x2f716f(0x1b4)](_0xec1805,_0x1e928a))_0x5a3961[_0x5a3961[_0x2f716f(0x1b1)]]=_0x1e928a;return _0x5a3961;},_0x3b6eb4(_0x599130);};return function(_0x551bf5){const _0x252a21=a4_0x36bf;if(_0x551bf5&&_0x551bf5['__esModule'])return _0x551bf5;var _0x4d6f5c={};if(_0x551bf5!=null){for(var _0x32f026=_0x3b6eb4(_0x551bf5),_0x17b333=0x0;_0x17b333<_0x32f026[_0x252a21(0x1b1)];_0x17b333++)if(_0x32f026[_0x17b333]!==_0x252a21(0x192))__createBinding(_0x4d6f5c,_0x551bf5,_0x32f026[_0x17b333]);}return __setModuleDefault(_0x4d6f5c,_0x551bf5),_0x4d6f5c;};}());function a4_0x3fd7(){const _0x1e544d=['3314368ROfsZp','2546432FtOZeq','json','unknown','hasOwnProperty','tokenBlacklistService','create','defineProperty','Failed\x20to\x20send\x20failed\x20login\x20notification:','login','get','5BbnybG','11066693posvUC','11871736kklwPo','prototype','__createBinding','remoteAddress','__esModule','findUnique','8QIrwKb','3092640LKsUer','length','then','../services/tokenBlacklistService','call','connection','shop','body','30OCYnBZ','user','username','authService','AuthService','Logged\x20out\x20successfully','AuthController','writable','getOwnPropertyDescriptor','getBlacklistStats','User-Agent','blacklistToken','72578LIBxWK','default','configurable','exp','role','__importStar','logout','2866731WrHSgM','telegramBotService','9GtDWVe','sendLoginNotification'];a4_0x3fd7=function(){return _0x1e544d;};return a4_0x3fd7();}function a4_0x36bf(_0x108ca3,_0x36fecb){const _0x3fd76c=a4_0x3fd7();return a4_0x36bf=function(_0x36bfa7,_0x3f9636){_0x36bfa7=_0x36bfa7-0x187;let _0x4c13f8=_0x3fd76c[_0x36bfa7];return _0x4c13f8;},a4_0x36bf(_0x108ca3,_0x36fecb);}Object[a4_0x3d7b76(0x1a3)](exports,a4_0x3d7b76(0x1ad),{'value':!![]}),exports[a4_0x3d7b76(0x18b)]=void 0x0;const authService_1=require('../services/authService'),tokenBlacklistService_1=require(a4_0x3d7b76(0x1b3)),telegramBotService_1=require('../services/telegramBotService');class AuthController{constructor(){const _0xa19155=a4_0x3d7b76;this['login']=async(_0x470b2d,_0x48be48,_0x933bf2)=>{const _0x297ceb=a4_0x36bf;try{const _0x1b52a3=_0x470b2d[_0x297ceb(0x1b7)],_0x53845a=_0x470b2d['ip']||_0x470b2d[_0x297ceb(0x1b5)][_0x297ceb(0x1ac)]||'unknown',_0x20a272=_0x470b2d[_0x297ceb(0x1a6)](_0x297ceb(0x18f))||_0x297ceb(0x19f);let _0x427cbe=![],_0x239c03=null;try{const _0x1aca48=await this[_0x297ceb(0x188)][_0x297ceb(0x1a5)](_0x1b52a3);_0x427cbe=!![],_0x1aca48[_0x297ceb(0x195)]===_0x297ceb(0x1b6)&&_0x1aca48[_0x297ceb(0x1b9)]?.['id']&&(_0x239c03=_0x1aca48[_0x297ceb(0x1b9)]['id']),_0x239c03&&await telegramBotService_1[_0x297ceb(0x199)][_0x297ceb(0x19b)](_0x239c03,{'username':_0x1b52a3[_0x297ceb(0x187)],'ipAddress':_0x53845a,'userAgent':_0x20a272,'timestamp':new Date(),'success':!![]}),_0x48be48[_0x297ceb(0x19e)]({'success':!![],'result':_0x1aca48});}catch(_0x503f33){try{const _0x593181=(await Promise['resolve']()[_0x297ceb(0x1b2)](()=>__importStar(require('../config/database'))))[_0x297ceb(0x192)],_0x2f9f81=await _0x593181[_0x297ceb(0x1b6)][_0x297ceb(0x1ae)]({'where':{'username':_0x1b52a3[_0x297ceb(0x187)]},'select':{'id':!![]}});_0x2f9f81&&await telegramBotService_1[_0x297ceb(0x199)]['sendLoginNotification'](_0x2f9f81['id'],{'username':_0x1b52a3[_0x297ceb(0x187)],'ipAddress':_0x53845a,'userAgent':_0x20a272,'timestamp':new Date(),'success':![]});}catch(_0x6e8e95){console['error'](_0x297ceb(0x1a4),_0x6e8e95);}throw _0x503f33;}}catch(_0x5471e7){_0x933bf2(_0x5471e7);}},this['me']=async(_0x145cd8,_0x2a773e,_0x5757f4)=>{const _0x113428=a4_0x36bf;try{const _0x3d5c3c=_0x145cd8[_0x113428(0x1b9)];_0x2a773e[_0x113428(0x19e)]({'success':!![],'result':{'id':_0x3d5c3c?.['id'],'username':_0x3d5c3c?.[_0x113428(0x187)],'role':_0x3d5c3c?.[_0x113428(0x195)]}});}catch(_0x460f3c){_0x5757f4(_0x460f3c);}},this[_0xa19155(0x197)]=async(_0x18c7f3,_0x543c35,_0x24fa10)=>{const _0x277fa5=_0xa19155;try{const _0x235dec=_0x18c7f3['token'],_0x1866ce=_0x18c7f3[_0x277fa5(0x1b9)];_0x235dec&&_0x1866ce?.[_0x277fa5(0x194)]&&tokenBlacklistService_1[_0x277fa5(0x1a1)][_0x277fa5(0x190)](_0x235dec,_0x1866ce['exp']),_0x543c35['json']({'success':!![],'message':_0x277fa5(0x18a)});}catch(_0x591ce2){_0x24fa10(_0x591ce2);}},this[_0xa19155(0x18e)]=async(_0x243e58,_0x27e75d,_0x2eef29)=>{const _0x16c8d9=_0xa19155;try{const _0x33821e=tokenBlacklistService_1[_0x16c8d9(0x1a1)]['getStats']();_0x27e75d[_0x16c8d9(0x19e)]({'success':!![],'result':_0x33821e});}catch(_0x112952){_0x2eef29(_0x112952);}},this['authService']=new authService_1[(_0xa19155(0x189))]();}}exports[a4_0x3d7b76(0x18b)]=AuthController;