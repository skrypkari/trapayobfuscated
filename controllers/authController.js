'use strict';const a4_0x2e824f=a4_0x102e;function a4_0x18bf(){const _0x5e81e4=['getBlacklistStats','1544538QrrYbd','../services/tokenBlacklistService','prototype','shop','490376NTUukS','exp','sendLoginNotification','../services/telegramBotService','blacklistToken','User-Agent','1127490PfDVXT','8LDnVpg','42239yaxmHW','tokenBlacklistService','996aVvpCh','then','body','create','user','1524935XUroSB','login','remoteAddress','error','unknown','length','default','hasOwnProperty','username','__esModule','AuthService','Failed\x20to\x20send\x20failed\x20login\x20notification:','2076kzPtsM','../config/database','AuthController','authService','writable','__createBinding','defineProperty','configurable','json','../services/authService','7RdHZCC','getOwnPropertyNames','call','token','role','260046uiFmSu','get'];a4_0x18bf=function(){return _0x5e81e4;};return a4_0x18bf();}function a4_0x102e(_0xbbec24,_0x24ced0){const _0x18bfc7=a4_0x18bf();return a4_0x102e=function(_0x102e60,_0x2feddb){_0x102e60=_0x102e60-0x18c;let _0x5359e9=_0x18bfc7[_0x102e60];return _0x5359e9;},a4_0x102e(_0xbbec24,_0x24ced0);}(function(_0x3c470f,_0x384783){const _0x4ea683=a4_0x102e,_0x18f7a3=_0x3c470f();while(!![]){try{const _0x20de62=-parseInt(_0x4ea683(0x1ba))/0x1+-parseInt(_0x4ea683(0x1b2))/0x2+-parseInt(_0x4ea683(0x19c))/0x3*(parseInt(_0x4ea683(0x1bc))/0x4)+parseInt(_0x4ea683(0x190))/0x5+-parseInt(_0x4ea683(0x1ae))/0x6*(-parseInt(_0x4ea683(0x1a6))/0x7)+parseInt(_0x4ea683(0x1b9))/0x8*(parseInt(_0x4ea683(0x1ab))/0x9)+parseInt(_0x4ea683(0x1b8))/0xa;if(_0x20de62===_0x384783)break;else _0x18f7a3['push'](_0x18f7a3['shift']());}catch(_0x35fe2e){_0x18f7a3['push'](_0x18f7a3['shift']());}}}(a4_0x18bf,0x3ba5e));var __createBinding=this&&this[a4_0x2e824f(0x1a1)]||(Object[a4_0x2e824f(0x18e)]?function(_0x48d0d3,_0x585482,_0x1f4000,_0x40fd87){const _0x4c2d24=a4_0x2e824f;if(_0x40fd87===undefined)_0x40fd87=_0x1f4000;var _0x4cc447=Object['getOwnPropertyDescriptor'](_0x585482,_0x1f4000);(!_0x4cc447||(_0x4c2d24(0x1ac)in _0x4cc447?!_0x585482[_0x4c2d24(0x199)]:_0x4cc447[_0x4c2d24(0x1a0)]||_0x4cc447[_0x4c2d24(0x1a3)]))&&(_0x4cc447={'enumerable':!![],'get':function(){return _0x585482[_0x1f4000];}}),Object[_0x4c2d24(0x1a2)](_0x48d0d3,_0x40fd87,_0x4cc447);}:function(_0x305f34,_0x101702,_0x40f768,_0x44f21a){if(_0x44f21a===undefined)_0x44f21a=_0x40f768;_0x305f34[_0x44f21a]=_0x101702[_0x40f768];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a4_0x2e824f(0x18e)]?function(_0x395620,_0x1299ae){const _0x326a2=a4_0x2e824f;Object['defineProperty'](_0x395620,_0x326a2(0x196),{'enumerable':!![],'value':_0x1299ae});}:function(_0x1b411a,_0x38e137){const _0x35311b=a4_0x2e824f;_0x1b411a[_0x35311b(0x196)]=_0x38e137;}),__importStar=this&&this['__importStar']||(function(){var _0x465506=function(_0x1eedff){const _0x3c8295=a4_0x102e;return _0x465506=Object[_0x3c8295(0x1a7)]||function(_0x14f78c){const _0x5a55b5=_0x3c8295;var _0x8d00f2=[];for(var _0x394748 in _0x14f78c)if(Object[_0x5a55b5(0x1b0)][_0x5a55b5(0x197)][_0x5a55b5(0x1a8)](_0x14f78c,_0x394748))_0x8d00f2[_0x8d00f2[_0x5a55b5(0x195)]]=_0x394748;return _0x8d00f2;},_0x465506(_0x1eedff);};return function(_0x5de5e9){const _0x1a05f0=a4_0x102e;if(_0x5de5e9&&_0x5de5e9[_0x1a05f0(0x199)])return _0x5de5e9;var _0x4f7891={};if(_0x5de5e9!=null){for(var _0x5de144=_0x465506(_0x5de5e9),_0x454a74=0x0;_0x454a74<_0x5de144[_0x1a05f0(0x195)];_0x454a74++)if(_0x5de144[_0x454a74]!=='default')__createBinding(_0x4f7891,_0x5de5e9,_0x5de144[_0x454a74]);}return __setModuleDefault(_0x4f7891,_0x5de5e9),_0x4f7891;};}());Object[a4_0x2e824f(0x1a2)](exports,a4_0x2e824f(0x199),{'value':!![]}),exports[a4_0x2e824f(0x19e)]=void 0x0;const authService_1=require(a4_0x2e824f(0x1a5)),tokenBlacklistService_1=require(a4_0x2e824f(0x1af)),telegramBotService_1=require(a4_0x2e824f(0x1b5));class AuthController{constructor(){const _0x5aef8b=a4_0x2e824f;this[_0x5aef8b(0x191)]=async(_0x30aed4,_0x4de76b,_0x156e8f)=>{const _0x2c281e=_0x5aef8b;try{const _0x3bbdac=_0x30aed4[_0x2c281e(0x18d)],_0x1b7ba1=_0x30aed4['ip']||_0x30aed4['connection'][_0x2c281e(0x192)]||_0x2c281e(0x194),_0x7c5359=_0x30aed4[_0x2c281e(0x1ac)](_0x2c281e(0x1b7))||'unknown';let _0x3d35ed=![],_0x123de3=null;try{const _0x516990=await this[_0x2c281e(0x19f)][_0x2c281e(0x191)](_0x3bbdac);_0x3d35ed=!![],_0x516990[_0x2c281e(0x1aa)]==='shop'&&_0x516990['user']?.['id']&&(_0x123de3=_0x516990[_0x2c281e(0x18f)]['id']),_0x123de3&&await telegramBotService_1['telegramBotService'][_0x2c281e(0x1b4)](_0x123de3,{'username':_0x3bbdac['username'],'ipAddress':_0x1b7ba1,'userAgent':_0x7c5359,'timestamp':new Date(),'success':!![]}),_0x4de76b[_0x2c281e(0x1a4)]({'success':!![],'result':_0x516990});}catch(_0x2671b5){try{const _0x35a282=(await Promise['resolve']()[_0x2c281e(0x18c)](()=>__importStar(require(_0x2c281e(0x19d)))))['default'],_0x465901=await _0x35a282[_0x2c281e(0x1b1)]['findUnique']({'where':{'username':_0x3bbdac[_0x2c281e(0x198)]},'select':{'id':!![]}});_0x465901&&await telegramBotService_1['telegramBotService'][_0x2c281e(0x1b4)](_0x465901['id'],{'username':_0x3bbdac['username'],'ipAddress':_0x1b7ba1,'userAgent':_0x7c5359,'timestamp':new Date(),'success':![]});}catch(_0x428e36){console[_0x2c281e(0x193)](_0x2c281e(0x19b),_0x428e36);}throw _0x2671b5;}}catch(_0x1fe47c){_0x156e8f(_0x1fe47c);}},this['me']=async(_0x2e21e1,_0x8ee305,_0x22676c)=>{const _0x3871e1=_0x5aef8b;try{const _0x45f035=_0x2e21e1[_0x3871e1(0x18f)];_0x8ee305['json']({'success':!![],'result':{'id':_0x45f035?.['id'],'username':_0x45f035?.[_0x3871e1(0x198)],'role':_0x45f035?.[_0x3871e1(0x1aa)]}});}catch(_0x86ef76){_0x22676c(_0x86ef76);}},this['logout']=async(_0x789771,_0x44a631,_0x17a939)=>{const _0x5a3de3=_0x5aef8b;try{const _0x261714=_0x789771[_0x5a3de3(0x1a9)],_0x1baf36=_0x789771[_0x5a3de3(0x18f)];_0x261714&&_0x1baf36?.[_0x5a3de3(0x1b3)]&&tokenBlacklistService_1[_0x5a3de3(0x1bb)][_0x5a3de3(0x1b6)](_0x261714,_0x1baf36[_0x5a3de3(0x1b3)]),_0x44a631[_0x5a3de3(0x1a4)]({'success':!![],'message':'Logged\x20out\x20successfully'});}catch(_0x25ab33){_0x17a939(_0x25ab33);}},this[_0x5aef8b(0x1ad)]=async(_0x2ceeb2,_0x414759,_0x156cc0)=>{const _0x11efe4=_0x5aef8b;try{const _0x57c294=tokenBlacklistService_1['tokenBlacklistService']['getStats']();_0x414759[_0x11efe4(0x1a4)]({'success':!![],'result':_0x57c294});}catch(_0x52dab5){_0x156cc0(_0x52dab5);}},this[_0x5aef8b(0x19f)]=new authService_1[(_0x5aef8b(0x19a))]();}}exports[a4_0x2e824f(0x19e)]=AuthController;