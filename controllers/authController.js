'use strict';const a4_0x133ca6=a4_0x3349;(function(_0x4fc67e,_0x1866e8){const _0x3fa424=a4_0x3349,_0x4bd32f=_0x4fc67e();while(!![]){try{const _0x356377=-parseInt(_0x3fa424(0x1f9))/0x1*(-parseInt(_0x3fa424(0x206))/0x2)+-parseInt(_0x3fa424(0x1f2))/0x3*(-parseInt(_0x3fa424(0x1d9))/0x4)+parseInt(_0x3fa424(0x20b))/0x5*(parseInt(_0x3fa424(0x1ef))/0x6)+parseInt(_0x3fa424(0x1f5))/0x7*(-parseInt(_0x3fa424(0x209))/0x8)+parseInt(_0x3fa424(0x1df))/0x9*(parseInt(_0x3fa424(0x1e2))/0xa)+parseInt(_0x3fa424(0x20c))/0xb*(-parseInt(_0x3fa424(0x202))/0xc)+-parseInt(_0x3fa424(0x1f6))/0xd*(parseInt(_0x3fa424(0x208))/0xe);if(_0x356377===_0x1866e8)break;else _0x4bd32f['push'](_0x4bd32f['shift']());}catch(_0x10c7e8){_0x4bd32f['push'](_0x4bd32f['shift']());}}}(a4_0x2d03,0x93f7f));function a4_0x3349(_0x3971a2,_0x133bc2){const _0x2d0374=a4_0x2d03();return a4_0x3349=function(_0x3349cc,_0x4afbd3){_0x3349cc=_0x3349cc-0x1d8;let _0x10fc91=_0x2d0374[_0x3349cc];return _0x10fc91;},a4_0x3349(_0x3971a2,_0x133bc2);}function a4_0x2d03(){const _0x509073=['tokenBlacklistService','findUnique','get','defineProperty','token','24LWYmDL','user','__esModule','length','283892WddPuA','shop','116102DGBaHf','8UBCprt','writable','84695nviFDn','2388331Nfbtzt','exp','__setModuleDefault','default','1096868yxuHcz','role','../services/telegramBotService','__createBinding','unknown','connection','9tUKdji','Logged\x20out\x20successfully','AuthController','10001990IdbmcB','telegramBotService','sendLoginNotification','AuthService','prototype','authService','User-Agent','error','getStats','Failed\x20to\x20send\x20failed\x20login\x20notification:','login','../services/authService','create','258bhiXSw','configurable','then','12esXuCx','username','body','2254609idhJWj','3406YKxeHn','logout','resolve','5RMCtzN','json','getOwnPropertyNames','hasOwnProperty'];a4_0x2d03=function(){return _0x509073;};return a4_0x2d03();}var __createBinding=this&&this[a4_0x133ca6(0x1dc)]||(Object[a4_0x133ca6(0x1ee)]?function(_0x270776,_0x3ab8f0,_0x104e8b,_0x3c4f3f){const _0x4a6cb7=a4_0x133ca6;if(_0x3c4f3f===undefined)_0x3c4f3f=_0x104e8b;var _0x3ee6a4=Object['getOwnPropertyDescriptor'](_0x3ab8f0,_0x104e8b);(!_0x3ee6a4||('get'in _0x3ee6a4?!_0x3ab8f0['__esModule']:_0x3ee6a4[_0x4a6cb7(0x20a)]||_0x3ee6a4[_0x4a6cb7(0x1f0)]))&&(_0x3ee6a4={'enumerable':!![],'get':function(){return _0x3ab8f0[_0x104e8b];}}),Object[_0x4a6cb7(0x200)](_0x270776,_0x3c4f3f,_0x3ee6a4);}:function(_0x266c66,_0x622add,_0x3e11b0,_0x2a7e0a){if(_0x2a7e0a===undefined)_0x2a7e0a=_0x3e11b0;_0x266c66[_0x2a7e0a]=_0x622add[_0x3e11b0];}),__setModuleDefault=this&&this[a4_0x133ca6(0x20e)]||(Object[a4_0x133ca6(0x1ee)]?function(_0x39aea6,_0x4cec8e){const _0x39227d=a4_0x133ca6;Object['defineProperty'](_0x39aea6,_0x39227d(0x1d8),{'enumerable':!![],'value':_0x4cec8e});}:function(_0x2bca4d,_0x594313){_0x2bca4d['default']=_0x594313;}),__importStar=this&&this['__importStar']||(function(){var _0x33fa39=function(_0x30c3a1){const _0x1f0cb0=a4_0x3349;return _0x33fa39=Object[_0x1f0cb0(0x1fb)]||function(_0x5ea98d){const _0x56c27f=_0x1f0cb0;var _0x36a274=[];for(var _0x361fa6 in _0x5ea98d)if(Object[_0x56c27f(0x1e6)][_0x56c27f(0x1fc)]['call'](_0x5ea98d,_0x361fa6))_0x36a274[_0x36a274[_0x56c27f(0x205)]]=_0x361fa6;return _0x36a274;},_0x33fa39(_0x30c3a1);};return function(_0x184fd4){const _0x2916a1=a4_0x3349;if(_0x184fd4&&_0x184fd4['__esModule'])return _0x184fd4;var _0xad3deb={};if(_0x184fd4!=null){for(var _0x348f27=_0x33fa39(_0x184fd4),_0x46b6ce=0x0;_0x46b6ce<_0x348f27[_0x2916a1(0x205)];_0x46b6ce++)if(_0x348f27[_0x46b6ce]!=='default')__createBinding(_0xad3deb,_0x184fd4,_0x348f27[_0x46b6ce]);}return __setModuleDefault(_0xad3deb,_0x184fd4),_0xad3deb;};}());Object[a4_0x133ca6(0x200)](exports,a4_0x133ca6(0x204),{'value':!![]}),exports[a4_0x133ca6(0x1e1)]=void 0x0;const authService_1=require(a4_0x133ca6(0x1ed)),tokenBlacklistService_1=require('../services/tokenBlacklistService'),telegramBotService_1=require(a4_0x133ca6(0x1db));class AuthController{constructor(){const _0x20f3f6=a4_0x133ca6;this[_0x20f3f6(0x1ec)]=async(_0x573654,_0x5f3066,_0x36b012)=>{const _0x56ee08=_0x20f3f6;try{const _0x1df099=_0x573654[_0x56ee08(0x1f4)],_0x14632e=_0x573654['ip']||_0x573654[_0x56ee08(0x1de)]['remoteAddress']||_0x56ee08(0x1dd),_0x2b3db2=_0x573654[_0x56ee08(0x1ff)](_0x56ee08(0x1e8))||_0x56ee08(0x1dd);let _0x36388c=![],_0x28d577=null;try{const _0x1b47f2=await this[_0x56ee08(0x1e7)][_0x56ee08(0x1ec)](_0x1df099);_0x36388c=!![],_0x1b47f2[_0x56ee08(0x1da)]===_0x56ee08(0x207)&&_0x1b47f2[_0x56ee08(0x203)]?.['id']&&(_0x28d577=_0x1b47f2[_0x56ee08(0x203)]['id']),_0x28d577&&await telegramBotService_1['telegramBotService'][_0x56ee08(0x1e4)](_0x28d577,{'username':_0x1df099[_0x56ee08(0x1f3)],'ipAddress':_0x14632e,'userAgent':_0x2b3db2,'timestamp':new Date(),'success':!![]}),_0x5f3066[_0x56ee08(0x1fa)]({'success':!![],'result':_0x1b47f2});}catch(_0x4fac16){try{const _0x2f05cb=(await Promise[_0x56ee08(0x1f8)]()[_0x56ee08(0x1f1)](()=>__importStar(require('../config/database'))))[_0x56ee08(0x1d8)],_0x12cb75=await _0x2f05cb[_0x56ee08(0x207)][_0x56ee08(0x1fe)]({'where':{'username':_0x1df099['username']},'select':{'id':!![]}});_0x12cb75&&await telegramBotService_1[_0x56ee08(0x1e3)][_0x56ee08(0x1e4)](_0x12cb75['id'],{'username':_0x1df099['username'],'ipAddress':_0x14632e,'userAgent':_0x2b3db2,'timestamp':new Date(),'success':![]});}catch(_0x40418a){console[_0x56ee08(0x1e9)](_0x56ee08(0x1eb),_0x40418a);}throw _0x4fac16;}}catch(_0x6dff2c){_0x36b012(_0x6dff2c);}},this['me']=async(_0x16b317,_0x49df34,_0x15a92d)=>{const _0x4bd75c=_0x20f3f6;try{const _0x373f3d=_0x16b317[_0x4bd75c(0x203)];_0x49df34[_0x4bd75c(0x1fa)]({'success':!![],'result':{'id':_0x373f3d?.['id'],'username':_0x373f3d?.[_0x4bd75c(0x1f3)],'role':_0x373f3d?.[_0x4bd75c(0x1da)]}});}catch(_0xf0a930){_0x15a92d(_0xf0a930);}},this[_0x20f3f6(0x1f7)]=async(_0x1a5788,_0x4f5f21,_0x4e6fce)=>{const _0x4607b7=_0x20f3f6;try{const _0x489950=_0x1a5788[_0x4607b7(0x201)],_0x3902ad=_0x1a5788[_0x4607b7(0x203)];_0x489950&&_0x3902ad?.['exp']&&tokenBlacklistService_1[_0x4607b7(0x1fd)]['blacklistToken'](_0x489950,_0x3902ad[_0x4607b7(0x20d)]),_0x4f5f21[_0x4607b7(0x1fa)]({'success':!![],'message':_0x4607b7(0x1e0)});}catch(_0x5946c7){_0x4e6fce(_0x5946c7);}},this['getBlacklistStats']=async(_0x494410,_0x1feb03,_0x244694)=>{const _0x46701a=_0x20f3f6;try{const _0x2ba0e7=tokenBlacklistService_1['tokenBlacklistService'][_0x46701a(0x1ea)]();_0x1feb03['json']({'success':!![],'result':_0x2ba0e7});}catch(_0x1dc57d){_0x244694(_0x1dc57d);}},this[_0x20f3f6(0x1e7)]=new authService_1[(_0x20f3f6(0x1e5))]();}}exports[a4_0x133ca6(0x1e1)]=AuthController;