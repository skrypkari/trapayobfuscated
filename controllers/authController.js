'use strict';const a4_0x32e7df=a4_0x91ef;(function(_0x3fd996,_0x391e4a){const _0x56eee9=a4_0x91ef,_0x1f6c6b=_0x3fd996();while(!![]){try{const _0x2e3a29=-parseInt(_0x56eee9(0x1d4))/0x1+-parseInt(_0x56eee9(0x1f3))/0x2*(-parseInt(_0x56eee9(0x1e1))/0x3)+parseInt(_0x56eee9(0x1d8))/0x4+-parseInt(_0x56eee9(0x1de))/0x5+-parseInt(_0x56eee9(0x200))/0x6*(-parseInt(_0x56eee9(0x1ee))/0x7)+-parseInt(_0x56eee9(0x1f7))/0x8*(-parseInt(_0x56eee9(0x1fa))/0x9)+-parseInt(_0x56eee9(0x1f6))/0xa;if(_0x2e3a29===_0x391e4a)break;else _0x1f6c6b['push'](_0x1f6c6b['shift']());}catch(_0x182c08){_0x1f6c6b['push'](_0x1f6c6b['shift']());}}}(a4_0x5594,0x9383f));function a4_0x5594(){const _0x2fd211=['user','get','getOwnPropertyNames','token','resolve','4989070rAOcad','json','prototype','575769ANZioM','__setModuleDefault','Logged\x20out\x20successfully','shop','getBlacklistStats','unknown','role','../services/authService','blacklistToken','authService','exp','AuthService','sendLoginNotification','1467368xoycGK','login','then','body','configurable','12fMtpcP','../services/telegramBotService','__esModule','5369650cdVKsF','8whwQTb','username','call','9250191KdrFCi','tokenBlacklistService','findUnique','telegramBotService','create','__importStar','24aIpwLQ','writable','hasOwnProperty','length','default','941006iWmcdM','AuthController','remoteAddress','getOwnPropertyDescriptor','248700nhviwC'];a4_0x5594=function(){return _0x2fd211;};return a4_0x5594();}var __createBinding=this&&this['__createBinding']||(Object[a4_0x32e7df(0x1fe)]?function(_0x23a27b,_0x134b49,_0x514bb9,_0x376d8d){const _0x66fa11=a4_0x32e7df;if(_0x376d8d===undefined)_0x376d8d=_0x514bb9;var _0x4ec8c7=Object[_0x66fa11(0x1d7)](_0x134b49,_0x514bb9);(!_0x4ec8c7||(_0x66fa11(0x1da)in _0x4ec8c7?!_0x134b49['__esModule']:_0x4ec8c7[_0x66fa11(0x1d0)]||_0x4ec8c7[_0x66fa11(0x1f2)]))&&(_0x4ec8c7={'enumerable':!![],'get':function(){return _0x134b49[_0x514bb9];}}),Object['defineProperty'](_0x23a27b,_0x376d8d,_0x4ec8c7);}:function(_0x26665d,_0x3bfd80,_0x1aa0d3,_0x3db0a9){if(_0x3db0a9===undefined)_0x3db0a9=_0x1aa0d3;_0x26665d[_0x3db0a9]=_0x3bfd80[_0x1aa0d3];}),__setModuleDefault=this&&this[a4_0x32e7df(0x1e2)]||(Object['create']?function(_0x22e17d,_0x5ce98f){const _0x42fa32=a4_0x32e7df;Object['defineProperty'](_0x22e17d,_0x42fa32(0x1d3),{'enumerable':!![],'value':_0x5ce98f});}:function(_0x4283ad,_0x3c0e78){const _0x48eedc=a4_0x32e7df;_0x4283ad[_0x48eedc(0x1d3)]=_0x3c0e78;}),__importStar=this&&this[a4_0x32e7df(0x1ff)]||(function(){var _0x36ae78=function(_0x5ac2eb){const _0xacf2c7=a4_0x91ef;return _0x36ae78=Object[_0xacf2c7(0x1db)]||function(_0x52aa57){const _0x17cd74=_0xacf2c7;var _0x3162df=[];for(var _0x116cd9 in _0x52aa57)if(Object[_0x17cd74(0x1e0)][_0x17cd74(0x1d1)][_0x17cd74(0x1f9)](_0x52aa57,_0x116cd9))_0x3162df[_0x3162df['length']]=_0x116cd9;return _0x3162df;},_0x36ae78(_0x5ac2eb);};return function(_0x111971){const _0x507529=a4_0x91ef;if(_0x111971&&_0x111971['__esModule'])return _0x111971;var _0x4f9919={};if(_0x111971!=null){for(var _0x2d5bb8=_0x36ae78(_0x111971),_0x221f49=0x0;_0x221f49<_0x2d5bb8[_0x507529(0x1d2)];_0x221f49++)if(_0x2d5bb8[_0x221f49]!==_0x507529(0x1d3))__createBinding(_0x4f9919,_0x111971,_0x2d5bb8[_0x221f49]);}return __setModuleDefault(_0x4f9919,_0x111971),_0x4f9919;};}());Object['defineProperty'](exports,a4_0x32e7df(0x1f5),{'value':!![]}),exports[a4_0x32e7df(0x1d5)]=void 0x0;function a4_0x91ef(_0xdf17de,_0x1cc310){const _0x559412=a4_0x5594();return a4_0x91ef=function(_0x91efb4,_0x384c72){_0x91efb4=_0x91efb4-0x1d0;let _0x4e856c=_0x559412[_0x91efb4];return _0x4e856c;},a4_0x91ef(_0xdf17de,_0x1cc310);}const authService_1=require(a4_0x32e7df(0x1e8)),tokenBlacklistService_1=require('../services/tokenBlacklistService'),telegramBotService_1=require(a4_0x32e7df(0x1f4));class AuthController{constructor(){const _0x3ec34d=a4_0x32e7df;this[_0x3ec34d(0x1ef)]=async(_0x4819ce,_0x4b8ce2,_0x57ead8)=>{const _0x39b3b1=_0x3ec34d;try{const _0x19a2b9=_0x4819ce[_0x39b3b1(0x1f1)],_0x1e938d=_0x4819ce['ip']||_0x4819ce['connection'][_0x39b3b1(0x1d6)]||'unknown',_0x3e910f=_0x4819ce[_0x39b3b1(0x1da)]('User-Agent')||_0x39b3b1(0x1e6);let _0x26e722=![],_0x56aeb1=null;try{const _0x1a9e97=await this[_0x39b3b1(0x1ea)][_0x39b3b1(0x1ef)](_0x19a2b9);_0x26e722=!![],_0x1a9e97[_0x39b3b1(0x1e7)]===_0x39b3b1(0x1e4)&&_0x1a9e97[_0x39b3b1(0x1d9)]?.['id']&&(_0x56aeb1=_0x1a9e97[_0x39b3b1(0x1d9)]['id']),_0x56aeb1&&await telegramBotService_1[_0x39b3b1(0x1fd)][_0x39b3b1(0x1ed)](_0x56aeb1,{'username':_0x19a2b9[_0x39b3b1(0x1f8)],'ipAddress':_0x1e938d,'userAgent':_0x3e910f,'timestamp':new Date(),'success':!![]}),_0x4b8ce2['json']({'success':!![],'result':_0x1a9e97});}catch(_0x41beee){try{const _0x51fe11=(await Promise[_0x39b3b1(0x1dd)]()[_0x39b3b1(0x1f0)](()=>__importStar(require('../config/database'))))[_0x39b3b1(0x1d3)],_0x316dc6=await _0x51fe11[_0x39b3b1(0x1e4)][_0x39b3b1(0x1fc)]({'where':{'username':_0x19a2b9[_0x39b3b1(0x1f8)]},'select':{'id':!![]}});_0x316dc6&&await telegramBotService_1['telegramBotService'][_0x39b3b1(0x1ed)](_0x316dc6['id'],{'username':_0x19a2b9[_0x39b3b1(0x1f8)],'ipAddress':_0x1e938d,'userAgent':_0x3e910f,'timestamp':new Date(),'success':![]});}catch(_0x4d1c43){console['error']('Failed\x20to\x20send\x20failed\x20login\x20notification:',_0x4d1c43);}throw _0x41beee;}}catch(_0x2c6e81){_0x57ead8(_0x2c6e81);}},this['me']=async(_0x839551,_0x296bfc,_0x4d45ab)=>{const _0x893750=_0x3ec34d;try{const _0x3c1d5f=_0x839551['user'];_0x296bfc[_0x893750(0x1df)]({'success':!![],'result':{'id':_0x3c1d5f?.['id'],'username':_0x3c1d5f?.['username'],'role':_0x3c1d5f?.['role']}});}catch(_0x5e1a33){_0x4d45ab(_0x5e1a33);}},this['logout']=async(_0x9c16ce,_0x3db95d,_0x13e6c4)=>{const _0x5772f2=_0x3ec34d;try{const _0x12693e=_0x9c16ce[_0x5772f2(0x1dc)],_0x5e39a4=_0x9c16ce[_0x5772f2(0x1d9)];_0x12693e&&_0x5e39a4?.['exp']&&tokenBlacklistService_1[_0x5772f2(0x1fb)][_0x5772f2(0x1e9)](_0x12693e,_0x5e39a4[_0x5772f2(0x1eb)]),_0x3db95d[_0x5772f2(0x1df)]({'success':!![],'message':_0x5772f2(0x1e3)});}catch(_0x3c1662){_0x13e6c4(_0x3c1662);}},this[_0x3ec34d(0x1e5)]=async(_0x149f32,_0x59cbe5,_0x52cf84)=>{const _0x4d7b4d=_0x3ec34d;try{const _0x3767fb=tokenBlacklistService_1[_0x4d7b4d(0x1fb)]['getStats']();_0x59cbe5[_0x4d7b4d(0x1df)]({'success':!![],'result':_0x3767fb});}catch(_0x606919){_0x52cf84(_0x606919);}},this[_0x3ec34d(0x1ea)]=new authService_1[(_0x3ec34d(0x1ec))]();}}exports[a4_0x32e7df(0x1d5)]=AuthController;