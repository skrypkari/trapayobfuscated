'use strict';const a4_0x535f89=a4_0x1a07;function a4_0x1a07(_0x192ef1,_0x5afdb6){const _0x4dc783=a4_0x4dc7();return a4_0x1a07=function(_0x1a0748,_0x2a53d2){_0x1a0748=_0x1a0748-0x8b;let _0x3798e6=_0x4dc783[_0x1a0748];return _0x3798e6;},a4_0x1a07(_0x192ef1,_0x5afdb6);}(function(_0x327788,_0x1c8607){const _0x2d82a0=a4_0x1a07,_0x2dd19e=_0x327788();while(!![]){try{const _0x3898bc=parseInt(_0x2d82a0(0x95))/0x1+parseInt(_0x2d82a0(0x96))/0x2+parseInt(_0x2d82a0(0x8e))/0x3*(-parseInt(_0x2d82a0(0xb0))/0x4)+-parseInt(_0x2d82a0(0xa1))/0x5*(parseInt(_0x2d82a0(0x99))/0x6)+parseInt(_0x2d82a0(0xa0))/0x7*(-parseInt(_0x2d82a0(0xb9))/0x8)+-parseInt(_0x2d82a0(0x8d))/0x9*(parseInt(_0x2d82a0(0x9d))/0xa)+parseInt(_0x2d82a0(0xb5))/0xb;if(_0x3898bc===_0x1c8607)break;else _0x2dd19e['push'](_0x2dd19e['shift']());}catch(_0x3ebae6){_0x2dd19e['push'](_0x2dd19e['shift']());}}}(a4_0x4dc7,0x8e29b));var __createBinding=this&&this['__createBinding']||(Object[a4_0x535f89(0xa6)]?function(_0x327877,_0xc9e0fc,_0x18444a,_0x117bec){const _0x29b777=a4_0x535f89;if(_0x117bec===undefined)_0x117bec=_0x18444a;var _0x4d009a=Object['getOwnPropertyDescriptor'](_0xc9e0fc,_0x18444a);(!_0x4d009a||(_0x29b777(0xb4)in _0x4d009a?!_0xc9e0fc[_0x29b777(0xb8)]:_0x4d009a['writable']||_0x4d009a['configurable']))&&(_0x4d009a={'enumerable':!![],'get':function(){return _0xc9e0fc[_0x18444a];}}),Object[_0x29b777(0xb7)](_0x327877,_0x117bec,_0x4d009a);}:function(_0x198297,_0x394c68,_0x127750,_0x1d7f2e){if(_0x1d7f2e===undefined)_0x1d7f2e=_0x127750;_0x198297[_0x1d7f2e]=_0x394c68[_0x127750];}),__setModuleDefault=this&&this[a4_0x535f89(0x9f)]||(Object[a4_0x535f89(0xa6)]?function(_0x46d06e,_0x135107){const _0x2b7b9a=a4_0x535f89;Object[_0x2b7b9a(0xb7)](_0x46d06e,'default',{'enumerable':!![],'value':_0x135107});}:function(_0x3182e0,_0x2a036f){_0x3182e0['default']=_0x2a036f;}),__importStar=this&&this[a4_0x535f89(0xaf)]||(function(){var _0x5b0a49=function(_0x39c2bf){return _0x5b0a49=Object['getOwnPropertyNames']||function(_0x52f35a){const _0x20bc67=a4_0x1a07;var _0x2ff4ef=[];for(var _0x157307 in _0x52f35a)if(Object[_0x20bc67(0xb6)]['hasOwnProperty'][_0x20bc67(0x8b)](_0x52f35a,_0x157307))_0x2ff4ef[_0x2ff4ef[_0x20bc67(0x91)]]=_0x157307;return _0x2ff4ef;},_0x5b0a49(_0x39c2bf);};return function(_0x33c8f1){const _0x3e3f35=a4_0x1a07;if(_0x33c8f1&&_0x33c8f1[_0x3e3f35(0xb8)])return _0x33c8f1;var _0x59eb3a={};if(_0x33c8f1!=null){for(var _0x34553d=_0x5b0a49(_0x33c8f1),_0x4fdf0f=0x0;_0x4fdf0f<_0x34553d[_0x3e3f35(0x91)];_0x4fdf0f++)if(_0x34553d[_0x4fdf0f]!==_0x3e3f35(0x94))__createBinding(_0x59eb3a,_0x33c8f1,_0x34553d[_0x4fdf0f]);}return __setModuleDefault(_0x59eb3a,_0x33c8f1),_0x59eb3a;};}());function a4_0x4dc7(){const _0x4e82fa=['defineProperty','__esModule','656oLkkTK','blacklistToken','token','call','getStats','99ByyEni','646746MCmWzs','exp','connection','length','AuthController','body','default','239117HxidsT','1940992wpcEEu','telegramBotService','role','10938FYfecy','tokenBlacklistService','username','../services/telegramBotService','202990mfqdnT','shop','__setModuleDefault','83279fmogWq','2860gzuSKL','authService','Logged\x20out\x20successfully','unknown','../services/authService','create','remoteAddress','error','json','../services/tokenBlacklistService','sendLoginNotification','login','User-Agent','resolve','__importStar','4bnvwqP','findUnique','user','logout','get','20128537cUwrwW','prototype'];a4_0x4dc7=function(){return _0x4e82fa;};return a4_0x4dc7();}Object[a4_0x535f89(0xb7)](exports,'__esModule',{'value':!![]}),exports[a4_0x535f89(0x92)]=void 0x0;const authService_1=require(a4_0x535f89(0xa5)),tokenBlacklistService_1=require(a4_0x535f89(0xaa)),telegramBotService_1=require(a4_0x535f89(0x9c));class AuthController{constructor(){const _0x484d26=a4_0x535f89;this[_0x484d26(0xac)]=async(_0x4108f9,_0x5da92b,_0x2948f3)=>{const _0x52233c=_0x484d26;try{const _0x4d568f=_0x4108f9[_0x52233c(0x93)],_0x2d4d6b=_0x4108f9['ip']||_0x4108f9[_0x52233c(0x90)][_0x52233c(0xa7)]||_0x52233c(0xa4),_0x333620=_0x4108f9['get'](_0x52233c(0xad))||_0x52233c(0xa4);let _0x197fe9=![],_0x1767c9=null;try{const _0x4ec11e=await this[_0x52233c(0xa2)]['login'](_0x4d568f);_0x197fe9=!![],_0x4ec11e[_0x52233c(0x98)]===_0x52233c(0x9e)&&_0x4ec11e[_0x52233c(0xb2)]?.['id']&&(_0x1767c9=_0x4ec11e[_0x52233c(0xb2)]['id']),_0x1767c9&&await telegramBotService_1['telegramBotService'][_0x52233c(0xab)](_0x1767c9,{'username':_0x4d568f[_0x52233c(0x9b)],'ipAddress':_0x2d4d6b,'userAgent':_0x333620,'timestamp':new Date(),'success':!![]}),_0x5da92b['json']({'success':!![],'result':_0x4ec11e});}catch(_0x347ef2){try{const _0x5c1ee1=(await Promise[_0x52233c(0xae)]()['then'](()=>__importStar(require('../config/database'))))[_0x52233c(0x94)],_0x3e5fed=await _0x5c1ee1['shop'][_0x52233c(0xb1)]({'where':{'username':_0x4d568f[_0x52233c(0x9b)]},'select':{'id':!![]}});_0x3e5fed&&await telegramBotService_1[_0x52233c(0x97)][_0x52233c(0xab)](_0x3e5fed['id'],{'username':_0x4d568f[_0x52233c(0x9b)],'ipAddress':_0x2d4d6b,'userAgent':_0x333620,'timestamp':new Date(),'success':![]});}catch(_0x4f6253){console[_0x52233c(0xa8)]('Failed\x20to\x20send\x20failed\x20login\x20notification:',_0x4f6253);}throw _0x347ef2;}}catch(_0x20fc45){_0x2948f3(_0x20fc45);}},this['me']=async(_0x3a5fc4,_0xafe507,_0x2045aa)=>{const _0x5d5850=_0x484d26;try{const _0x3c0f70=_0x3a5fc4[_0x5d5850(0xb2)];_0xafe507[_0x5d5850(0xa9)]({'success':!![],'result':{'id':_0x3c0f70?.['id'],'username':_0x3c0f70?.['username'],'role':_0x3c0f70?.['role']}});}catch(_0x4188ba){_0x2045aa(_0x4188ba);}},this[_0x484d26(0xb3)]=async(_0x4cb07b,_0x5a18e5,_0x1c06cc)=>{const _0x168fdf=_0x484d26;try{const _0x2cd68f=_0x4cb07b[_0x168fdf(0xbb)],_0x4198d0=_0x4cb07b[_0x168fdf(0xb2)];_0x2cd68f&&_0x4198d0?.[_0x168fdf(0x8f)]&&tokenBlacklistService_1[_0x168fdf(0x9a)][_0x168fdf(0xba)](_0x2cd68f,_0x4198d0['exp']),_0x5a18e5[_0x168fdf(0xa9)]({'success':!![],'message':_0x168fdf(0xa3)});}catch(_0x3cb76a){_0x1c06cc(_0x3cb76a);}},this['getBlacklistStats']=async(_0x24d992,_0xe5350,_0x469da2)=>{const _0x10bc62=_0x484d26;try{const _0x29ee02=tokenBlacklistService_1[_0x10bc62(0x9a)][_0x10bc62(0x8c)]();_0xe5350[_0x10bc62(0xa9)]({'success':!![],'result':_0x29ee02});}catch(_0x381654){_0x469da2(_0x381654);}},this['authService']=new authService_1['AuthService']();}}exports[a4_0x535f89(0x92)]=AuthController;