'use strict';const a4_0x403c08=a4_0x1a0f;(function(_0x3877e0,_0x925e4c){const _0x141217=a4_0x1a0f,_0x2e2735=_0x3877e0();while(!![]){try{const _0xdeee8b=parseInt(_0x141217(0xcd))/0x1+-parseInt(_0x141217(0xc0))/0x2+parseInt(_0x141217(0xda))/0x3+-parseInt(_0x141217(0xca))/0x4+-parseInt(_0x141217(0xc4))/0x5*(parseInt(_0x141217(0xab))/0x6)+-parseInt(_0x141217(0xae))/0x7+parseInt(_0x141217(0xc2))/0x8;if(_0xdeee8b===_0x925e4c)break;else _0x2e2735['push'](_0x2e2735['shift']());}catch(_0x589022){_0x2e2735['push'](_0x2e2735['shift']());}}}(a4_0x5eda,0x38289));var __createBinding=this&&this[a4_0x403c08(0xbe)]||(Object[a4_0x403c08(0xd4)]?function(_0x45861c,_0x59b4c6,_0x5df344,_0xf67b13){const _0x46bd09=a4_0x403c08;if(_0xf67b13===undefined)_0xf67b13=_0x5df344;var _0x1aadec=Object['getOwnPropertyDescriptor'](_0x59b4c6,_0x5df344);(!_0x1aadec||(_0x46bd09(0xba)in _0x1aadec?!_0x59b4c6[_0x46bd09(0xd6)]:_0x1aadec[_0x46bd09(0xce)]||_0x1aadec[_0x46bd09(0xd5)]))&&(_0x1aadec={'enumerable':!![],'get':function(){return _0x59b4c6[_0x5df344];}}),Object[_0x46bd09(0xb8)](_0x45861c,_0xf67b13,_0x1aadec);}:function(_0x3803d1,_0x4ad7d8,_0x5a0b45,_0x5add55){if(_0x5add55===undefined)_0x5add55=_0x5a0b45;_0x3803d1[_0x5add55]=_0x4ad7d8[_0x5a0b45];}),__setModuleDefault=this&&this[a4_0x403c08(0xc5)]||(Object['create']?function(_0x3bdff5,_0x180f3f){const _0x44a293=a4_0x403c08;Object[_0x44a293(0xb8)](_0x3bdff5,_0x44a293(0xb1),{'enumerable':!![],'value':_0x180f3f});}:function(_0x5eef35,_0x13e7b0){const _0x5db963=a4_0x403c08;_0x5eef35[_0x5db963(0xb1)]=_0x13e7b0;}),__importStar=this&&this[a4_0x403c08(0xdb)]||(function(){var _0x19e919=function(_0x36bb13){return _0x19e919=Object['getOwnPropertyNames']||function(_0x25cca4){const _0x42c54d=a4_0x1a0f;var _0x563495=[];for(var _0x1d83f6 in _0x25cca4)if(Object[_0x42c54d(0xb6)][_0x42c54d(0xad)][_0x42c54d(0xd8)](_0x25cca4,_0x1d83f6))_0x563495[_0x563495[_0x42c54d(0xac)]]=_0x1d83f6;return _0x563495;},_0x19e919(_0x36bb13);};return function(_0x37fd5d){const _0x282133=a4_0x1a0f;if(_0x37fd5d&&_0x37fd5d[_0x282133(0xd6)])return _0x37fd5d;var _0x5b2338={};if(_0x37fd5d!=null){for(var _0x174f20=_0x19e919(_0x37fd5d),_0xd9a2c8=0x0;_0xd9a2c8<_0x174f20[_0x282133(0xac)];_0xd9a2c8++)if(_0x174f20[_0xd9a2c8]!=='default')__createBinding(_0x5b2338,_0x37fd5d,_0x174f20[_0xd9a2c8]);}return __setModuleDefault(_0x5b2338,_0x37fd5d),_0x5b2338;};}());function a4_0x5eda(){const _0x257e2b=['username','role','findUnique','prototype','../config/database','defineProperty','getBlacklistStats','get','../services/tokenBlacklistService','body','User-Agent','__createBinding','json','576856GOEfJh','AuthService','6819192KDhRgr','tokenBlacklistService','255BYbQse','__setModuleDefault','user','authService','unknown','error','1405728ryLgLx','then','sendLoginNotification','100937eMNCRF','writable','logout','resolve','../services/telegramBotService','Logged\x20out\x20successfully','AuthController','create','configurable','__esModule','blacklistToken','call','exp','431808PXiYLJ','__importStar','Failed\x20to\x20send\x20failed\x20login\x20notification:','getStats','login','18420JBJiux','length','hasOwnProperty','495719pwLVGw','shop','token','default','telegramBotService'];a4_0x5eda=function(){return _0x257e2b;};return a4_0x5eda();}Object[a4_0x403c08(0xb8)](exports,a4_0x403c08(0xd6),{'value':!![]}),exports[a4_0x403c08(0xd3)]=void 0x0;const authService_1=require('../services/authService'),tokenBlacklistService_1=require(a4_0x403c08(0xbb)),telegramBotService_1=require(a4_0x403c08(0xd1));class AuthController{constructor(){const _0x59c47f=a4_0x403c08;this[_0x59c47f(0xaa)]=async(_0x507548,_0x451373,_0xf40edb)=>{const _0x2e1b6d=_0x59c47f;try{const _0x409e87=_0x507548[_0x2e1b6d(0xbc)],_0x54b0fb=_0x507548['ip']||_0x507548['connection']['remoteAddress']||_0x2e1b6d(0xc8),_0x361b2d=_0x507548[_0x2e1b6d(0xba)](_0x2e1b6d(0xbd))||'unknown';let _0xf129cc=![],_0x2d494d=null;try{const _0x3883f3=await this[_0x2e1b6d(0xc7)][_0x2e1b6d(0xaa)](_0x409e87);_0xf129cc=!![],_0x3883f3[_0x2e1b6d(0xb4)]===_0x2e1b6d(0xaf)&&_0x3883f3[_0x2e1b6d(0xc6)]?.['id']&&(_0x2d494d=_0x3883f3[_0x2e1b6d(0xc6)]['id']),_0x2d494d&&await telegramBotService_1['telegramBotService']['sendLoginNotification'](_0x2d494d,{'username':_0x409e87['username'],'ipAddress':_0x54b0fb,'userAgent':_0x361b2d,'timestamp':new Date(),'success':!![]}),_0x451373[_0x2e1b6d(0xbf)]({'success':!![],'result':_0x3883f3});}catch(_0x5a0c6b){try{const _0x567d51=(await Promise[_0x2e1b6d(0xd0)]()[_0x2e1b6d(0xcb)](()=>__importStar(require(_0x2e1b6d(0xb7)))))[_0x2e1b6d(0xb1)],_0x11336e=await _0x567d51[_0x2e1b6d(0xaf)][_0x2e1b6d(0xb5)]({'where':{'username':_0x409e87['username']},'select':{'id':!![]}});_0x11336e&&await telegramBotService_1[_0x2e1b6d(0xb2)][_0x2e1b6d(0xcc)](_0x11336e['id'],{'username':_0x409e87['username'],'ipAddress':_0x54b0fb,'userAgent':_0x361b2d,'timestamp':new Date(),'success':![]});}catch(_0x1747dc){console[_0x2e1b6d(0xc9)](_0x2e1b6d(0xdc),_0x1747dc);}throw _0x5a0c6b;}}catch(_0x5e03e1){_0xf40edb(_0x5e03e1);}},this['me']=async(_0x307465,_0x42e7fc,_0x509062)=>{const _0x2d3a6a=_0x59c47f;try{const _0x58e4e2=_0x307465[_0x2d3a6a(0xc6)];_0x42e7fc['json']({'success':!![],'result':{'id':_0x58e4e2?.['id'],'username':_0x58e4e2?.[_0x2d3a6a(0xb3)],'role':_0x58e4e2?.['role']}});}catch(_0x477f15){_0x509062(_0x477f15);}},this[_0x59c47f(0xcf)]=async(_0x276ce6,_0x3eb24d,_0x4b9219)=>{const _0x1d2886=_0x59c47f;try{const _0x381f88=_0x276ce6[_0x1d2886(0xb0)],_0x4d9a4e=_0x276ce6['user'];_0x381f88&&_0x4d9a4e?.[_0x1d2886(0xd9)]&&tokenBlacklistService_1[_0x1d2886(0xc3)][_0x1d2886(0xd7)](_0x381f88,_0x4d9a4e[_0x1d2886(0xd9)]),_0x3eb24d[_0x1d2886(0xbf)]({'success':!![],'message':_0x1d2886(0xd2)});}catch(_0x16bce8){_0x4b9219(_0x16bce8);}},this[_0x59c47f(0xb9)]=async(_0x3df02a,_0x3d2950,_0x4f18ed)=>{const _0x4d9063=_0x59c47f;try{const _0x51ad73=tokenBlacklistService_1[_0x4d9063(0xc3)][_0x4d9063(0xdd)]();_0x3d2950[_0x4d9063(0xbf)]({'success':!![],'result':_0x51ad73});}catch(_0xc4ba74){_0x4f18ed(_0xc4ba74);}},this[_0x59c47f(0xc7)]=new authService_1[(_0x59c47f(0xc1))]();}}function a4_0x1a0f(_0x29fd45,_0x2f2254){const _0x5eda20=a4_0x5eda();return a4_0x1a0f=function(_0x1a0f57,_0xc8271d){_0x1a0f57=_0x1a0f57-0xaa;let _0x395698=_0x5eda20[_0x1a0f57];return _0x395698;},a4_0x1a0f(_0x29fd45,_0x2f2254);}exports[a4_0x403c08(0xd3)]=AuthController;