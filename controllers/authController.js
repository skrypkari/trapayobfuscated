'use strict';function a4_0x40a8(_0x1baf9b,_0x5967e3){const _0x5c7200=a4_0x5c72();return a4_0x40a8=function(_0x40a8c9,_0xa0b28){_0x40a8c9=_0x40a8c9-0x1e6;let _0x1db619=_0x5c7200[_0x40a8c9];return _0x1db619;},a4_0x40a8(_0x1baf9b,_0x5967e3);}function a4_0x5c72(){const _0x28af2b=['unknown','695piFqOR','default','865456GoCcpN','Logged\x20out\x20successfully','__setModuleDefault','prototype','role','3430116iafVXJ','../config/database','defineProperty','getOwnPropertyDescriptor','error','44fbSCGr','shop','telegramBotService','tokenBlacklistService','448187acqyJk','logout','remoteAddress','create','__esModule','exp','5034zsZRWv','then','../services/tokenBlacklistService','user','writable','63dQiGoM','__createBinding','../services/authService','length','call','login','resolve','AuthService','json','17206060CCuUNx','token','authService','getOwnPropertyNames','configurable','626208ozdVSy','137325tnEeuG','sendLoginNotification','get','username','getStats','Failed\x20to\x20send\x20failed\x20login\x20notification:','getBlacklistStats'];a4_0x5c72=function(){return _0x28af2b;};return a4_0x5c72();}const a4_0x2f4897=a4_0x40a8;(function(_0x624179,_0x3bc4ba){const _0x553266=a4_0x40a8,_0x4298ef=_0x624179();while(!![]){try{const _0x3f170d=parseInt(_0x553266(0x1ed))/0x1+parseInt(_0x553266(0x206))/0x2+-parseInt(_0x553266(0x207))/0x3*(parseInt(_0x553266(0x1e9))/0x4)+parseInt(_0x553266(0x20f))/0x5*(-parseInt(_0x553266(0x1f3))/0x6)+-parseInt(_0x553266(0x1f8))/0x7*(parseInt(_0x553266(0x211))/0x8)+-parseInt(_0x553266(0x216))/0x9+parseInt(_0x553266(0x201))/0xa;if(_0x3f170d===_0x3bc4ba)break;else _0x4298ef['push'](_0x4298ef['shift']());}catch(_0x3bec90){_0x4298ef['push'](_0x4298ef['shift']());}}}(a4_0x5c72,0x7bc6d));var __createBinding=this&&this[a4_0x2f4897(0x1f9)]||(Object['create']?function(_0x12e02e,_0x3af881,_0x56d2af,_0x1c4745){const _0x34265c=a4_0x2f4897;if(_0x1c4745===undefined)_0x1c4745=_0x56d2af;var _0x42af84=Object[_0x34265c(0x1e7)](_0x3af881,_0x56d2af);(!_0x42af84||(_0x34265c(0x209)in _0x42af84?!_0x3af881[_0x34265c(0x1f1)]:_0x42af84[_0x34265c(0x1f7)]||_0x42af84[_0x34265c(0x205)]))&&(_0x42af84={'enumerable':!![],'get':function(){return _0x3af881[_0x56d2af];}}),Object[_0x34265c(0x1e6)](_0x12e02e,_0x1c4745,_0x42af84);}:function(_0x10ffa4,_0x2f0d85,_0x1aee19,_0x20524e){if(_0x20524e===undefined)_0x20524e=_0x1aee19;_0x10ffa4[_0x20524e]=_0x2f0d85[_0x1aee19];}),__setModuleDefault=this&&this[a4_0x2f4897(0x213)]||(Object[a4_0x2f4897(0x1f0)]?function(_0x19f40a,_0x17482f){const _0x29a227=a4_0x2f4897;Object[_0x29a227(0x1e6)](_0x19f40a,_0x29a227(0x210),{'enumerable':!![],'value':_0x17482f});}:function(_0x262430,_0x39007a){_0x262430['default']=_0x39007a;}),__importStar=this&&this['__importStar']||(function(){var _0x6dad81=function(_0x4cc4e6){const _0x1875fc=a4_0x40a8;return _0x6dad81=Object[_0x1875fc(0x204)]||function(_0x1848cb){const _0x538458=_0x1875fc;var _0x333ad4=[];for(var _0x14a551 in _0x1848cb)if(Object[_0x538458(0x214)]['hasOwnProperty'][_0x538458(0x1fc)](_0x1848cb,_0x14a551))_0x333ad4[_0x333ad4[_0x538458(0x1fb)]]=_0x14a551;return _0x333ad4;},_0x6dad81(_0x4cc4e6);};return function(_0x5d019a){const _0x38e7a4=a4_0x40a8;if(_0x5d019a&&_0x5d019a[_0x38e7a4(0x1f1)])return _0x5d019a;var _0x230d45={};if(_0x5d019a!=null){for(var _0x156894=_0x6dad81(_0x5d019a),_0x343a8d=0x0;_0x343a8d<_0x156894[_0x38e7a4(0x1fb)];_0x343a8d++)if(_0x156894[_0x343a8d]!==_0x38e7a4(0x210))__createBinding(_0x230d45,_0x5d019a,_0x156894[_0x343a8d]);}return __setModuleDefault(_0x230d45,_0x5d019a),_0x230d45;};}());Object['defineProperty'](exports,a4_0x2f4897(0x1f1),{'value':!![]}),exports['AuthController']=void 0x0;const authService_1=require(a4_0x2f4897(0x1fa)),tokenBlacklistService_1=require(a4_0x2f4897(0x1f5)),telegramBotService_1=require('../services/telegramBotService');class AuthController{constructor(){const _0x46170f=a4_0x2f4897;this['login']=async(_0xa52b22,_0x461379,_0x27e479)=>{const _0x24e804=a4_0x40a8;try{const _0x4fe71c=_0xa52b22['body'],_0x3232b4=_0xa52b22['ip']||_0xa52b22['connection'][_0x24e804(0x1ef)]||_0x24e804(0x20e),_0x2c4a72=_0xa52b22[_0x24e804(0x209)]('User-Agent')||_0x24e804(0x20e);let _0x4aff51=![],_0x3474f2=null;try{const _0x3e6145=await this['authService'][_0x24e804(0x1fd)](_0x4fe71c);_0x4aff51=!![],_0x3e6145[_0x24e804(0x215)]===_0x24e804(0x1ea)&&_0x3e6145[_0x24e804(0x1f6)]?.['id']&&(_0x3474f2=_0x3e6145[_0x24e804(0x1f6)]['id']),_0x3474f2&&await telegramBotService_1[_0x24e804(0x1eb)]['sendLoginNotification'](_0x3474f2,{'username':_0x4fe71c['username'],'ipAddress':_0x3232b4,'userAgent':_0x2c4a72,'timestamp':new Date(),'success':!![]}),_0x461379[_0x24e804(0x200)]({'success':!![],'result':_0x3e6145});}catch(_0x45717d){try{const _0xab737e=(await Promise[_0x24e804(0x1fe)]()[_0x24e804(0x1f4)](()=>__importStar(require(_0x24e804(0x217)))))[_0x24e804(0x210)],_0x39b76d=await _0xab737e[_0x24e804(0x1ea)]['findUnique']({'where':{'username':_0x4fe71c[_0x24e804(0x20a)]},'select':{'id':!![]}});_0x39b76d&&await telegramBotService_1['telegramBotService'][_0x24e804(0x208)](_0x39b76d['id'],{'username':_0x4fe71c['username'],'ipAddress':_0x3232b4,'userAgent':_0x2c4a72,'timestamp':new Date(),'success':![]});}catch(_0xca92b6){console[_0x24e804(0x1e8)](_0x24e804(0x20c),_0xca92b6);}throw _0x45717d;}}catch(_0x9ff752){_0x27e479(_0x9ff752);}},this['me']=async(_0x4f74b9,_0xbf0eaf,_0x3db8b8)=>{const _0x59dee3=a4_0x40a8;try{const _0xef3157=_0x4f74b9[_0x59dee3(0x1f6)];_0xbf0eaf[_0x59dee3(0x200)]({'success':!![],'result':{'id':_0xef3157?.['id'],'username':_0xef3157?.[_0x59dee3(0x20a)],'role':_0xef3157?.[_0x59dee3(0x215)]}});}catch(_0x12b7da){_0x3db8b8(_0x12b7da);}},this[_0x46170f(0x1ee)]=async(_0x4dfd1c,_0x47260d,_0x395a9d)=>{const _0x53513a=_0x46170f;try{const _0x4ae5e5=_0x4dfd1c[_0x53513a(0x202)],_0x38b379=_0x4dfd1c[_0x53513a(0x1f6)];_0x4ae5e5&&_0x38b379?.[_0x53513a(0x1f2)]&&tokenBlacklistService_1[_0x53513a(0x1ec)]['blacklistToken'](_0x4ae5e5,_0x38b379[_0x53513a(0x1f2)]),_0x47260d['json']({'success':!![],'message':_0x53513a(0x212)});}catch(_0x3cc19e){_0x395a9d(_0x3cc19e);}},this[_0x46170f(0x20d)]=async(_0x3f0100,_0xcdaad9,_0x639134)=>{const _0x52d24d=_0x46170f;try{const _0x3d7884=tokenBlacklistService_1['tokenBlacklistService'][_0x52d24d(0x20b)]();_0xcdaad9[_0x52d24d(0x200)]({'success':!![],'result':_0x3d7884});}catch(_0x54c04e){_0x639134(_0x54c04e);}},this[_0x46170f(0x203)]=new authService_1[(_0x46170f(0x1ff))]();}}exports['AuthController']=AuthController;