'use strict';const a4_0x425579=a4_0x3b60;(function(_0xb28c6c,_0x3ea045){const _0x5119e3=a4_0x3b60,_0x2b8386=_0xb28c6c();while(!![]){try{const _0x4c4144=parseInt(_0x5119e3(0x204))/0x1+-parseInt(_0x5119e3(0x1ee))/0x2+parseInt(_0x5119e3(0x202))/0x3*(parseInt(_0x5119e3(0x1fd))/0x4)+-parseInt(_0x5119e3(0x218))/0x5*(parseInt(_0x5119e3(0x20f))/0x6)+parseInt(_0x5119e3(0x215))/0x7+parseInt(_0x5119e3(0x208))/0x8+-parseInt(_0x5119e3(0x1eb))/0x9;if(_0x4c4144===_0x3ea045)break;else _0x2b8386['push'](_0x2b8386['shift']());}catch(_0x473799){_0x2b8386['push'](_0x2b8386['shift']());}}}(a4_0x5e9c,0x4dceb));var __createBinding=this&&this['__createBinding']||(Object[a4_0x425579(0x217)]?function(_0x511d36,_0x21c662,_0x41b957,_0x166a86){const _0x8fd2ce=a4_0x425579;if(_0x166a86===undefined)_0x166a86=_0x41b957;var _0x2b2a92=Object[_0x8fd2ce(0x210)](_0x21c662,_0x41b957);(!_0x2b2a92||(_0x8fd2ce(0x211)in _0x2b2a92?!_0x21c662['__esModule']:_0x2b2a92[_0x8fd2ce(0x1fa)]||_0x2b2a92[_0x8fd2ce(0x207)]))&&(_0x2b2a92={'enumerable':!![],'get':function(){return _0x21c662[_0x41b957];}}),Object[_0x8fd2ce(0x200)](_0x511d36,_0x166a86,_0x2b2a92);}:function(_0x325e6b,_0x5eff23,_0x46ca29,_0x20eb32){if(_0x20eb32===undefined)_0x20eb32=_0x46ca29;_0x325e6b[_0x20eb32]=_0x5eff23[_0x46ca29];}),__setModuleDefault=this&&this[a4_0x425579(0x1fb)]||(Object[a4_0x425579(0x217)]?function(_0x18a0c2,_0x578e0a){const _0xe8124=a4_0x425579;Object[_0xe8124(0x200)](_0x18a0c2,'default',{'enumerable':!![],'value':_0x578e0a});}:function(_0x5cd527,_0x4d7b3b){const _0x41346b=a4_0x425579;_0x5cd527[_0x41346b(0x1f8)]=_0x4d7b3b;}),__importStar=this&&this[a4_0x425579(0x213)]||(function(){var _0x4793f9=function(_0x3d1eab){const _0x69266d=a4_0x3b60;return _0x4793f9=Object[_0x69266d(0x212)]||function(_0x34dc2d){const _0x486f57=_0x69266d;var _0x1a0ce=[];for(var _0x11d9ab in _0x34dc2d)if(Object[_0x486f57(0x1f7)][_0x486f57(0x1e9)][_0x486f57(0x1f3)](_0x34dc2d,_0x11d9ab))_0x1a0ce[_0x1a0ce[_0x486f57(0x205)]]=_0x11d9ab;return _0x1a0ce;},_0x4793f9(_0x3d1eab);};return function(_0x265a99){const _0x3a80f5=a4_0x3b60;if(_0x265a99&&_0x265a99['__esModule'])return _0x265a99;var _0x3652a8={};if(_0x265a99!=null){for(var _0x994959=_0x4793f9(_0x265a99),_0x4cbeb2=0x0;_0x4cbeb2<_0x994959['length'];_0x4cbeb2++)if(_0x994959[_0x4cbeb2]!==_0x3a80f5(0x1f8))__createBinding(_0x3652a8,_0x265a99,_0x994959[_0x4cbeb2]);}return __setModuleDefault(_0x3652a8,_0x265a99),_0x3652a8;};}());Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a4_0x425579(0x20e)]=void 0x0;const authService_1=require('../services/authService'),tokenBlacklistService_1=require(a4_0x425579(0x1f0)),telegramBotService_1=require(a4_0x425579(0x1f2));class AuthController{constructor(){const _0x1ebb2a=a4_0x425579;this[_0x1ebb2a(0x1f5)]=async(_0x381933,_0x2ad982,_0x4be48c)=>{const _0xd94d28=_0x1ebb2a;try{const _0x488907=_0x381933[_0xd94d28(0x209)],_0x4404d0=_0x488907[_0xd94d28(0x1ff)]||_0x381933['ip']||_0x381933[_0xd94d28(0x206)][_0xd94d28(0x1ea)]||_0xd94d28(0x1f1),_0x53b4b5=_0x488907[_0xd94d28(0x20b)]||_0x381933[_0xd94d28(0x211)]('User-Agent')||_0xd94d28(0x1f1),_0x3c7690=_0x488907[_0xd94d28(0x20a)];let _0x1074b9=![],_0x5c4667=null;try{const _0x330204=await this['authService'][_0xd94d28(0x1f5)](_0x488907);_0x1074b9=!![],_0x330204[_0xd94d28(0x203)]===_0xd94d28(0x1f4)&&_0x330204[_0xd94d28(0x219)]?.['id']&&(_0x5c4667=_0x330204[_0xd94d28(0x219)]['id']),_0x5c4667&&await telegramBotService_1['telegramBotService'][_0xd94d28(0x214)](_0x5c4667,{'username':_0x488907[_0xd94d28(0x1fc)],'ipAddress':_0x4404d0,'userAgent':_0x53b4b5,'geo':_0x3c7690,'timestamp':new Date(),'success':!![]}),_0x2ad982['json']({'success':!![],'result':_0x330204});}catch(_0x59658b){try{const _0xde6ad7=(await Promise['resolve']()[_0xd94d28(0x1ed)](()=>__importStar(require(_0xd94d28(0x1ef)))))[_0xd94d28(0x1f8)],_0x51a600=await _0xde6ad7['shop'][_0xd94d28(0x1ec)]({'where':{'username':_0x488907['username']},'select':{'id':!![]}});_0x51a600&&await telegramBotService_1['telegramBotService'][_0xd94d28(0x214)](_0x51a600['id'],{'username':_0x488907[_0xd94d28(0x1fc)],'ipAddress':_0x4404d0,'userAgent':_0x53b4b5,'geo':_0x3c7690,'timestamp':new Date(),'success':![]});}catch(_0x27d468){console[_0xd94d28(0x201)]('Failed\x20to\x20send\x20failed\x20login\x20notification:',_0x27d468);}throw _0x59658b;}}catch(_0x38560b){_0x4be48c(_0x38560b);}},this['me']=async(_0x1c350b,_0x48a2ca,_0x27f7b1)=>{const _0x3c09d9=_0x1ebb2a;try{const _0x1267cf=_0x1c350b[_0x3c09d9(0x219)];_0x48a2ca['json']({'success':!![],'result':{'id':_0x1267cf?.['id'],'username':_0x1267cf?.['username'],'role':_0x1267cf?.[_0x3c09d9(0x203)]}});}catch(_0x17deb9){_0x27f7b1(_0x17deb9);}},this[_0x1ebb2a(0x216)]=async(_0xc8b347,_0x47d826,_0x2df57d)=>{const _0x2b8f3a=_0x1ebb2a;try{const _0x4633d4=_0xc8b347['token'],_0x2561ce=_0xc8b347[_0x2b8f3a(0x219)];_0x4633d4&&_0x2561ce?.['exp']&&tokenBlacklistService_1[_0x2b8f3a(0x1f6)][_0x2b8f3a(0x1fe)](_0x4633d4,_0x2561ce['exp']),_0x47d826[_0x2b8f3a(0x20d)]({'success':!![],'message':'Logged\x20out\x20successfully'});}catch(_0x101e6f){_0x2df57d(_0x101e6f);}},this['getBlacklistStats']=async(_0x2f3d99,_0x1d8f58,_0x5a05f3)=>{const _0x1c8e24=_0x1ebb2a;try{const _0x39f7da=tokenBlacklistService_1[_0x1c8e24(0x1f6)][_0x1c8e24(0x1f9)]();_0x1d8f58[_0x1c8e24(0x20d)]({'success':!![],'result':_0x39f7da});}catch(_0x3cac1e){_0x5a05f3(_0x3cac1e);}},this['authService']=new authService_1[(_0x1ebb2a(0x20c))]();}}function a4_0x5e9c(){const _0x1c846e=['8214948UccfuV','findUnique','then','93480dLlfjX','../config/database','../services/tokenBlacklistService','unknown','../services/telegramBotService','call','shop','login','tokenBlacklistService','prototype','default','getStats','writable','__setModuleDefault','username','9796YtnwhJ','blacklistToken','ipAddress','defineProperty','error','84nnsjpU','role','322440FqMegI','length','connection','configurable','3936776oIxwTj','body','geo','userAgent','AuthService','json','AuthController','15774ShIEXB','getOwnPropertyDescriptor','get','getOwnPropertyNames','__importStar','sendLoginNotification','2784117xwaUSM','logout','create','5TyJExs','user','hasOwnProperty','remoteAddress'];a4_0x5e9c=function(){return _0x1c846e;};return a4_0x5e9c();}function a4_0x3b60(_0x2e8936,_0x34a463){const _0x5e9c1d=a4_0x5e9c();return a4_0x3b60=function(_0x3b6079,_0x4d6adf){_0x3b6079=_0x3b6079-0x1e9;let _0x3c0d8c=_0x5e9c1d[_0x3b6079];return _0x3c0d8c;},a4_0x3b60(_0x2e8936,_0x34a463);}exports[a4_0x425579(0x20e)]=AuthController;