'use strict';const a4_0x32d926=a4_0x44a5;(function(_0x3b300b,_0x184f89){const _0x395261=a4_0x44a5,_0x2d27ff=_0x3b300b();while(!![]){try{const _0x45ba1e=-parseInt(_0x395261(0xf9))/0x1+parseInt(_0x395261(0x11b))/0x2+-parseInt(_0x395261(0x127))/0x3+-parseInt(_0x395261(0x10e))/0x4+parseInt(_0x395261(0x122))/0x5*(parseInt(_0x395261(0x10b))/0x6)+parseInt(_0x395261(0x110))/0x7*(-parseInt(_0x395261(0x118))/0x8)+parseInt(_0x395261(0x10a))/0x9;if(_0x45ba1e===_0x184f89)break;else _0x2d27ff['push'](_0x2d27ff['shift']());}catch(_0xbcb926){_0x2d27ff['push'](_0x2d27ff['shift']());}}}(a4_0x57f3,0x5e2c8));var __createBinding=this&&this[a4_0x32d926(0x106)]||(Object[a4_0x32d926(0x10f)]?function(_0x16a0f6,_0x5edd7f,_0x27af43,_0x3f3215){const _0x12b9f9=a4_0x32d926;if(_0x3f3215===undefined)_0x3f3215=_0x27af43;var _0x5d5656=Object['getOwnPropertyDescriptor'](_0x5edd7f,_0x27af43);(!_0x5d5656||(_0x12b9f9(0x11a)in _0x5d5656?!_0x5edd7f[_0x12b9f9(0xfc)]:_0x5d5656[_0x12b9f9(0x128)]||_0x5d5656['configurable']))&&(_0x5d5656={'enumerable':!![],'get':function(){return _0x5edd7f[_0x27af43];}}),Object[_0x12b9f9(0x113)](_0x16a0f6,_0x3f3215,_0x5d5656);}:function(_0x5d4f37,_0x1ad243,_0x4a14b1,_0x27d382){if(_0x27d382===undefined)_0x27d382=_0x4a14b1;_0x5d4f37[_0x27d382]=_0x1ad243[_0x4a14b1];}),__setModuleDefault=this&&this[a4_0x32d926(0x116)]||(Object[a4_0x32d926(0x10f)]?function(_0x347d0d,_0x2c2f23){const _0x5205f9=a4_0x32d926;Object['defineProperty'](_0x347d0d,_0x5205f9(0x114),{'enumerable':!![],'value':_0x2c2f23});}:function(_0x49765c,_0x3d139a){const _0x846000=a4_0x32d926;_0x49765c[_0x846000(0x114)]=_0x3d139a;}),__importStar=this&&this[a4_0x32d926(0xf8)]||(function(){var _0x10a6c5=function(_0x17aaf3){const _0x1ae1f1=a4_0x44a5;return _0x10a6c5=Object[_0x1ae1f1(0x123)]||function(_0x11a0b7){const _0x36ca6c=_0x1ae1f1;var _0x51d37a=[];for(var _0x4d4d23 in _0x11a0b7)if(Object[_0x36ca6c(0xfa)]['hasOwnProperty']['call'](_0x11a0b7,_0x4d4d23))_0x51d37a[_0x51d37a[_0x36ca6c(0x100)]]=_0x4d4d23;return _0x51d37a;},_0x10a6c5(_0x17aaf3);};return function(_0x1d7664){const _0x4f5d75=a4_0x44a5;if(_0x1d7664&&_0x1d7664[_0x4f5d75(0xfc)])return _0x1d7664;var _0x3c9058={};if(_0x1d7664!=null){for(var _0x419b26=_0x10a6c5(_0x1d7664),_0x41b759=0x0;_0x41b759<_0x419b26['length'];_0x41b759++)if(_0x419b26[_0x41b759]!==_0x4f5d75(0x114))__createBinding(_0x3c9058,_0x1d7664,_0x419b26[_0x41b759]);}return __setModuleDefault(_0x3c9058,_0x1d7664),_0x3c9058;};}());function a4_0x44a5(_0x4766d2,_0x4f9313){const _0x57f336=a4_0x57f3();return a4_0x44a5=function(_0x44a595,_0x445456){_0x44a595=_0x44a595-0xf5;let _0x501452=_0x57f336[_0x44a595];return _0x501452;},a4_0x44a5(_0x4766d2,_0x4f9313);}Object['defineProperty'](exports,a4_0x32d926(0xfc),{'value':!![]}),exports[a4_0x32d926(0x101)]=void 0x0;function a4_0x57f3(){const _0x449df0=['role','connection','178533iuUtNo','writable','resolve','Failed\x20to\x20send\x20failed\x20login\x20notification:','shop','__importStar','631674kDRoVI','prototype','error','__esModule','json','authService','then','length','AuthController','unknown','tokenBlacklistService','User-Agent','blacklistToken','__createBinding','Logged\x20out\x20successfully','getStats','../services/authService','13555224NGaNHm','2052462zhgaqj','getBlacklistStats','logout','2762196THXoVD','create','7PciTKl','AuthService','telegramBotService','defineProperty','default','../services/tokenBlacklistService','__setModuleDefault','remoteAddress','1196296VtGCSa','username','get','137588mVxhDE','sendLoginNotification','findUnique','exp','user','../services/telegramBotService','login','5ElUSuj','getOwnPropertyNames','token'];a4_0x57f3=function(){return _0x449df0;};return a4_0x57f3();}const authService_1=require(a4_0x32d926(0x109)),tokenBlacklistService_1=require(a4_0x32d926(0x115)),telegramBotService_1=require(a4_0x32d926(0x120));class AuthController{constructor(){const _0x543656=a4_0x32d926;this[_0x543656(0x121)]=async(_0x25aff8,_0x2539e6,_0x2f9089)=>{const _0xb19dd3=_0x543656;try{const _0x1fc708=_0x25aff8['body'],_0x3307b5=_0x25aff8['ip']||_0x25aff8[_0xb19dd3(0x126)][_0xb19dd3(0x117)]||_0xb19dd3(0x102),_0x351024=_0x25aff8[_0xb19dd3(0x11a)](_0xb19dd3(0x104))||'unknown';let _0x327ff2=![],_0x181609=null;try{const _0x519cd4=await this[_0xb19dd3(0xfe)][_0xb19dd3(0x121)](_0x1fc708);_0x327ff2=!![],_0x519cd4[_0xb19dd3(0x125)]===_0xb19dd3(0xf7)&&_0x519cd4[_0xb19dd3(0x11f)]?.['id']&&(_0x181609=_0x519cd4[_0xb19dd3(0x11f)]['id']),_0x181609&&await telegramBotService_1[_0xb19dd3(0x112)]['sendLoginNotification'](_0x181609,{'username':_0x1fc708[_0xb19dd3(0x119)],'ipAddress':_0x3307b5,'userAgent':_0x351024,'timestamp':new Date(),'success':!![]}),_0x2539e6['json']({'success':!![],'result':_0x519cd4});}catch(_0x2d9bc3){try{const _0x5a2d7d=(await Promise[_0xb19dd3(0xf5)]()[_0xb19dd3(0xff)](()=>__importStar(require('../config/database'))))[_0xb19dd3(0x114)],_0x1c3a0c=await _0x5a2d7d[_0xb19dd3(0xf7)][_0xb19dd3(0x11d)]({'where':{'username':_0x1fc708[_0xb19dd3(0x119)]},'select':{'id':!![]}});_0x1c3a0c&&await telegramBotService_1[_0xb19dd3(0x112)][_0xb19dd3(0x11c)](_0x1c3a0c['id'],{'username':_0x1fc708[_0xb19dd3(0x119)],'ipAddress':_0x3307b5,'userAgent':_0x351024,'timestamp':new Date(),'success':![]});}catch(_0x3254fa){console[_0xb19dd3(0xfb)](_0xb19dd3(0xf6),_0x3254fa);}throw _0x2d9bc3;}}catch(_0x40019a){_0x2f9089(_0x40019a);}},this['me']=async(_0x3c4b13,_0x508524,_0x3d3722)=>{const _0xc49e5b=_0x543656;try{const _0x222153=_0x3c4b13[_0xc49e5b(0x11f)];_0x508524[_0xc49e5b(0xfd)]({'success':!![],'result':{'id':_0x222153?.['id'],'username':_0x222153?.[_0xc49e5b(0x119)],'role':_0x222153?.['role']}});}catch(_0x80bc5){_0x3d3722(_0x80bc5);}},this[_0x543656(0x10d)]=async(_0xdbb7f9,_0x33d9d3,_0x166580)=>{const _0x5c8975=_0x543656;try{const _0x54c068=_0xdbb7f9[_0x5c8975(0x124)],_0x2178b0=_0xdbb7f9['user'];_0x54c068&&_0x2178b0?.[_0x5c8975(0x11e)]&&tokenBlacklistService_1['tokenBlacklistService'][_0x5c8975(0x105)](_0x54c068,_0x2178b0[_0x5c8975(0x11e)]),_0x33d9d3[_0x5c8975(0xfd)]({'success':!![],'message':_0x5c8975(0x107)});}catch(_0x16da72){_0x166580(_0x16da72);}},this[_0x543656(0x10c)]=async(_0x3a4055,_0x33cce1,_0x394bc4)=>{const _0x331a19=_0x543656;try{const _0x28744a=tokenBlacklistService_1[_0x331a19(0x103)][_0x331a19(0x108)]();_0x33cce1['json']({'success':!![],'result':_0x28744a});}catch(_0x58c084){_0x394bc4(_0x58c084);}},this[_0x543656(0xfe)]=new authService_1[(_0x543656(0x111))]();}}exports[a4_0x32d926(0x101)]=AuthController;