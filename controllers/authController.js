'use strict';const a4_0x381fd7=a4_0x629a;function a4_0x34d5(){const _0x1251f9=['unknown','663707sSEkWL','default','token','defineProperty','prototype','exp','role','tokenBlacklistService','username','2084jWwDHC','4501GkOsJt','__createBinding','body','1260OTXeTk','json','AuthController','getStats','telegramBotService','12xNBPcy','login','error','../services/telegramBotService','153PJmLUt','AuthService','80398NSfVhy','get','__esModule','Failed\x20to\x20send\x20failed\x20login\x20notification:','user','logout','writable','length','findUnique','then','__setModuleDefault','171934VgdrSD','getBlacklistStats','authService','48xgUnER','shop','70210owLtmW','getOwnPropertyDescriptor','configurable','getOwnPropertyNames','create','55eDHLzV','1964160vIxzVE','blacklistToken','__importStar'];a4_0x34d5=function(){return _0x1251f9;};return a4_0x34d5();}(function(_0x343376,_0x5dd01c){const _0x1b6946=a4_0x629a,_0x14d956=_0x343376();while(!![]){try{const _0x30bf18=parseInt(_0x1b6946(0xd5))/0x1+-parseInt(_0x1b6946(0xe0))/0x2*(parseInt(_0x1b6946(0xcf))/0x3)+-parseInt(_0x1b6946(0xf8))/0x4*(parseInt(_0x1b6946(0xea))/0x5)+parseInt(_0x1b6946(0xca))/0x6*(-parseInt(_0x1b6946(0xf9))/0x7)+parseInt(_0x1b6946(0xeb))/0x8+-parseInt(_0x1b6946(0xd3))/0x9*(-parseInt(_0x1b6946(0xe5))/0xa)+parseInt(_0x1b6946(0xef))/0xb*(parseInt(_0x1b6946(0xe3))/0xc);if(_0x30bf18===_0x5dd01c)break;else _0x14d956['push'](_0x14d956['shift']());}catch(_0xbd3b77){_0x14d956['push'](_0x14d956['shift']());}}}(a4_0x34d5,0x3150a));function a4_0x629a(_0x383de7,_0x3b5106){const _0x34d5ab=a4_0x34d5();return a4_0x629a=function(_0x629a87,_0x5aefee){_0x629a87=_0x629a87-0xc8;let _0x719a27=_0x34d5ab[_0x629a87];return _0x719a27;},a4_0x629a(_0x383de7,_0x3b5106);}var __createBinding=this&&this[a4_0x381fd7(0xc8)]||(Object[a4_0x381fd7(0xe9)]?function(_0x399ebb,_0x50e13c,_0x36adb2,_0x421429){const _0x5b0585=a4_0x381fd7;if(_0x421429===undefined)_0x421429=_0x36adb2;var _0x4531c6=Object[_0x5b0585(0xe6)](_0x50e13c,_0x36adb2);(!_0x4531c6||('get'in _0x4531c6?!_0x50e13c[_0x5b0585(0xd7)]:_0x4531c6[_0x5b0585(0xdb)]||_0x4531c6[_0x5b0585(0xe7)]))&&(_0x4531c6={'enumerable':!![],'get':function(){return _0x50e13c[_0x36adb2];}}),Object[_0x5b0585(0xf2)](_0x399ebb,_0x421429,_0x4531c6);}:function(_0x5625df,_0x53dba3,_0x4ebcb9,_0x38762b){if(_0x38762b===undefined)_0x38762b=_0x4ebcb9;_0x5625df[_0x38762b]=_0x53dba3[_0x4ebcb9];}),__setModuleDefault=this&&this[a4_0x381fd7(0xdf)]||(Object[a4_0x381fd7(0xe9)]?function(_0x3198d9,_0xd2d28b){const _0x171515=a4_0x381fd7;Object[_0x171515(0xf2)](_0x3198d9,_0x171515(0xf0),{'enumerable':!![],'value':_0xd2d28b});}:function(_0x5bea6a,_0x21af56){_0x5bea6a['default']=_0x21af56;}),__importStar=this&&this[a4_0x381fd7(0xed)]||(function(){var _0x49bd0a=function(_0x7e5f4d){const _0x168c78=a4_0x629a;return _0x49bd0a=Object[_0x168c78(0xe8)]||function(_0x5d8139){const _0x4ed21d=_0x168c78;var _0x3264a7=[];for(var _0x47aec5 in _0x5d8139)if(Object[_0x4ed21d(0xf3)]['hasOwnProperty']['call'](_0x5d8139,_0x47aec5))_0x3264a7[_0x3264a7[_0x4ed21d(0xdc)]]=_0x47aec5;return _0x3264a7;},_0x49bd0a(_0x7e5f4d);};return function(_0x291a19){const _0xbe5251=a4_0x629a;if(_0x291a19&&_0x291a19[_0xbe5251(0xd7)])return _0x291a19;var _0x31aece={};if(_0x291a19!=null){for(var _0x323ce6=_0x49bd0a(_0x291a19),_0x52f7ea=0x0;_0x52f7ea<_0x323ce6[_0xbe5251(0xdc)];_0x52f7ea++)if(_0x323ce6[_0x52f7ea]!==_0xbe5251(0xf0))__createBinding(_0x31aece,_0x291a19,_0x323ce6[_0x52f7ea]);}return __setModuleDefault(_0x31aece,_0x291a19),_0x31aece;};}());Object[a4_0x381fd7(0xf2)](exports,a4_0x381fd7(0xd7),{'value':!![]}),exports[a4_0x381fd7(0xcc)]=void 0x0;const authService_1=require('../services/authService'),tokenBlacklistService_1=require('../services/tokenBlacklistService'),telegramBotService_1=require(a4_0x381fd7(0xd2));class AuthController{constructor(){const _0x315d85=a4_0x381fd7;this[_0x315d85(0xd0)]=async(_0x5c3fbd,_0x327249,_0x48d91e)=>{const _0x9bcd66=_0x315d85;try{const _0x1b7ad8=_0x5c3fbd[_0x9bcd66(0xc9)],_0x3f24fe=_0x5c3fbd['ip']||_0x5c3fbd['connection']['remoteAddress']||_0x9bcd66(0xee),_0x38dd1f=_0x5c3fbd[_0x9bcd66(0xd6)]('User-Agent')||_0x9bcd66(0xee);let _0x122677=![],_0x4175f7=null;try{const _0x24a578=await this[_0x9bcd66(0xe2)][_0x9bcd66(0xd0)](_0x1b7ad8);_0x122677=!![],_0x24a578[_0x9bcd66(0xf5)]===_0x9bcd66(0xe4)&&_0x24a578[_0x9bcd66(0xd9)]?.['id']&&(_0x4175f7=_0x24a578[_0x9bcd66(0xd9)]['id']),_0x4175f7&&await telegramBotService_1[_0x9bcd66(0xce)]['sendLoginNotification'](_0x4175f7,{'username':_0x1b7ad8[_0x9bcd66(0xf7)],'ipAddress':_0x3f24fe,'userAgent':_0x38dd1f,'timestamp':new Date(),'success':!![]}),_0x327249[_0x9bcd66(0xcb)]({'success':!![],'result':_0x24a578});}catch(_0xf51f4e){try{const _0xc776eb=(await Promise['resolve']()[_0x9bcd66(0xde)](()=>__importStar(require('../config/database'))))['default'],_0x295d16=await _0xc776eb[_0x9bcd66(0xe4)][_0x9bcd66(0xdd)]({'where':{'username':_0x1b7ad8[_0x9bcd66(0xf7)]},'select':{'id':!![]}});_0x295d16&&await telegramBotService_1[_0x9bcd66(0xce)]['sendLoginNotification'](_0x295d16['id'],{'username':_0x1b7ad8[_0x9bcd66(0xf7)],'ipAddress':_0x3f24fe,'userAgent':_0x38dd1f,'timestamp':new Date(),'success':![]});}catch(_0x52b3af){console[_0x9bcd66(0xd1)](_0x9bcd66(0xd8),_0x52b3af);}throw _0xf51f4e;}}catch(_0x3fee14){_0x48d91e(_0x3fee14);}},this['me']=async(_0x401898,_0x2d1e90,_0x30afd5)=>{const _0x1b51f8=_0x315d85;try{const _0x2c5c17=_0x401898['user'];_0x2d1e90['json']({'success':!![],'result':{'id':_0x2c5c17?.['id'],'username':_0x2c5c17?.[_0x1b51f8(0xf7)],'role':_0x2c5c17?.['role']}});}catch(_0x1d1c40){_0x30afd5(_0x1d1c40);}},this[_0x315d85(0xda)]=async(_0x58d9ee,_0x596fe7,_0x28ed5b)=>{const _0x2f7dc5=_0x315d85;try{const _0x280a1a=_0x58d9ee[_0x2f7dc5(0xf1)],_0x7bc36f=_0x58d9ee['user'];_0x280a1a&&_0x7bc36f?.[_0x2f7dc5(0xf4)]&&tokenBlacklistService_1[_0x2f7dc5(0xf6)][_0x2f7dc5(0xec)](_0x280a1a,_0x7bc36f['exp']),_0x596fe7[_0x2f7dc5(0xcb)]({'success':!![],'message':'Logged\x20out\x20successfully'});}catch(_0x48e3b7){_0x28ed5b(_0x48e3b7);}},this[_0x315d85(0xe1)]=async(_0x5510fd,_0x5d4940,_0x4dbd2e)=>{const _0x8889c3=_0x315d85;try{const _0x4dfc6c=tokenBlacklistService_1[_0x8889c3(0xf6)][_0x8889c3(0xcd)]();_0x5d4940['json']({'success':!![],'result':_0x4dfc6c});}catch(_0x4469f8){_0x4dbd2e(_0x4469f8);}},this['authService']=new authService_1[(_0x315d85(0xd4))]();}}exports[a4_0x381fd7(0xcc)]=AuthController;