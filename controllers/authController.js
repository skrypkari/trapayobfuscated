'use strict';const a4_0x2eb466=a4_0x3be2;function a4_0x3be2(_0x303ca8,_0x456ecb){const _0x4cf4ce=a4_0x4cf4();return a4_0x3be2=function(_0x3be263,_0x4660e0){_0x3be263=_0x3be263-0x94;let _0x54328a=_0x4cf4ce[_0x3be263];return _0x54328a;},a4_0x3be2(_0x303ca8,_0x456ecb);}(function(_0x67dc38,_0x4a10cf){const _0x7ac7fd=a4_0x3be2,_0x54945d=_0x67dc38();while(!![]){try{const _0x91b26a=parseInt(_0x7ac7fd(0x98))/0x1+parseInt(_0x7ac7fd(0xb1))/0x2*(parseInt(_0x7ac7fd(0xaf))/0x3)+-parseInt(_0x7ac7fd(0x9d))/0x4+parseInt(_0x7ac7fd(0xc0))/0x5*(-parseInt(_0x7ac7fd(0xba))/0x6)+-parseInt(_0x7ac7fd(0xa3))/0x7+parseInt(_0x7ac7fd(0xa8))/0x8+parseInt(_0x7ac7fd(0x9c))/0x9*(parseInt(_0x7ac7fd(0xb4))/0xa);if(_0x91b26a===_0x4a10cf)break;else _0x54945d['push'](_0x54945d['shift']());}catch(_0x4f3c5e){_0x54945d['push'](_0x54945d['shift']());}}}(a4_0x4cf4,0xf0105));var __createBinding=this&&this[a4_0x2eb466(0xa4)]||(Object[a4_0x2eb466(0xb2)]?function(_0x4673dd,_0x58d687,_0x565b1b,_0x453f54){const _0x13eedd=a4_0x2eb466;if(_0x453f54===undefined)_0x453f54=_0x565b1b;var _0x1a0fd2=Object[_0x13eedd(0xa7)](_0x58d687,_0x565b1b);(!_0x1a0fd2||('get'in _0x1a0fd2?!_0x58d687[_0x13eedd(0xa1)]:_0x1a0fd2[_0x13eedd(0xbf)]||_0x1a0fd2[_0x13eedd(0xbc)]))&&(_0x1a0fd2={'enumerable':!![],'get':function(){return _0x58d687[_0x565b1b];}}),Object[_0x13eedd(0x9b)](_0x4673dd,_0x453f54,_0x1a0fd2);}:function(_0x58f5bc,_0x33cda5,_0x123a04,_0x5101d9){if(_0x5101d9===undefined)_0x5101d9=_0x123a04;_0x58f5bc[_0x5101d9]=_0x33cda5[_0x123a04];}),__setModuleDefault=this&&this[a4_0x2eb466(0xb0)]||(Object['create']?function(_0x55ffac,_0x1e8d34){const _0x4999d5=a4_0x2eb466;Object[_0x4999d5(0x9b)](_0x55ffac,'default',{'enumerable':!![],'value':_0x1e8d34});}:function(_0x5ea9cb,_0x2b1eef){const _0x5da118=a4_0x2eb466;_0x5ea9cb[_0x5da118(0xc1)]=_0x2b1eef;}),__importStar=this&&this[a4_0x2eb466(0x9f)]||(function(){var _0x36d339=function(_0x210ee3){return _0x36d339=Object['getOwnPropertyNames']||function(_0x5b0e77){const _0x13653e=a4_0x3be2;var _0x209bcb=[];for(var _0x5012ec in _0x5b0e77)if(Object[_0x13653e(0xae)]['hasOwnProperty'][_0x13653e(0xc4)](_0x5b0e77,_0x5012ec))_0x209bcb[_0x209bcb[_0x13653e(0xa6)]]=_0x5012ec;return _0x209bcb;},_0x36d339(_0x210ee3);};return function(_0x10b1a7){const _0x653770=a4_0x3be2;if(_0x10b1a7&&_0x10b1a7[_0x653770(0xa1)])return _0x10b1a7;var _0x2137a9={};if(_0x10b1a7!=null){for(var _0x7d3185=_0x36d339(_0x10b1a7),_0x51f810=0x0;_0x51f810<_0x7d3185[_0x653770(0xa6)];_0x51f810++)if(_0x7d3185[_0x51f810]!==_0x653770(0xc1))__createBinding(_0x2137a9,_0x10b1a7,_0x7d3185[_0x51f810]);}return __setModuleDefault(_0x2137a9,_0x10b1a7),_0x2137a9;};}());Object[a4_0x2eb466(0x9b)](exports,a4_0x2eb466(0xa1),{'value':!![]}),exports[a4_0x2eb466(0xb3)]=void 0x0;const authService_1=require(a4_0x2eb466(0xb7)),tokenBlacklistService_1=require('../services/tokenBlacklistService'),telegramBotService_1=require('../services/telegramBotService');function a4_0x4cf4(){const _0x3357b7=['Failed\x20to\x20send\x20failed\x20login\x20notification:','prototype','37929WkXGuN','__setModuleDefault','34SBszSf','create','AuthController','10dHIbBI','unknown','user','../services/authService','exp','User-Agent','18upsKVG','../config/database','configurable','getBlacklistStats','json','writable','982855bcjtsA','default','AuthService','authService','call','Logged\x20out\x20successfully','blacklistToken','telegramBotService','tokenBlacklistService','256712TGEFPA','login','body','defineProperty','13080591CgFJSi','949800uALXKP','role','__importStar','resolve','__esModule','token','6945533ksYVXt','__createBinding','sendLoginNotification','length','getOwnPropertyDescriptor','7021128moqoRq','connection','shop','username','get'];a4_0x4cf4=function(){return _0x3357b7;};return a4_0x4cf4();}class AuthController{constructor(){const _0x4b347a=a4_0x2eb466;this[_0x4b347a(0x99)]=async(_0x3e3c4e,_0x33c284,_0xe9a2da)=>{const _0x519dbc=_0x4b347a;try{const _0x553328=_0x3e3c4e[_0x519dbc(0x9a)],_0x2cbdb8=_0x3e3c4e['ip']||_0x3e3c4e[_0x519dbc(0xa9)]['remoteAddress']||_0x519dbc(0xb5),_0xf67ce1=_0x3e3c4e[_0x519dbc(0xac)](_0x519dbc(0xb9))||_0x519dbc(0xb5);let _0x14a630=![],_0x21e506=null;try{const _0x3beafb=await this[_0x519dbc(0xc3)][_0x519dbc(0x99)](_0x553328);_0x14a630=!![],_0x3beafb['role']===_0x519dbc(0xaa)&&_0x3beafb[_0x519dbc(0xb6)]?.['id']&&(_0x21e506=_0x3beafb[_0x519dbc(0xb6)]['id']),_0x21e506&&await telegramBotService_1[_0x519dbc(0x96)][_0x519dbc(0xa5)](_0x21e506,{'username':_0x553328[_0x519dbc(0xab)],'ipAddress':_0x2cbdb8,'userAgent':_0xf67ce1,'timestamp':new Date(),'success':!![]}),_0x33c284[_0x519dbc(0xbe)]({'success':!![],'result':_0x3beafb});}catch(_0x3aec8d){try{const _0xee1515=(await Promise[_0x519dbc(0xa0)]()['then'](()=>__importStar(require(_0x519dbc(0xbb)))))[_0x519dbc(0xc1)],_0x12d987=await _0xee1515['shop']['findUnique']({'where':{'username':_0x553328[_0x519dbc(0xab)]},'select':{'id':!![]}});_0x12d987&&await telegramBotService_1[_0x519dbc(0x96)][_0x519dbc(0xa5)](_0x12d987['id'],{'username':_0x553328[_0x519dbc(0xab)],'ipAddress':_0x2cbdb8,'userAgent':_0xf67ce1,'timestamp':new Date(),'success':![]});}catch(_0x2ea866){console['error'](_0x519dbc(0xad),_0x2ea866);}throw _0x3aec8d;}}catch(_0x1549e7){_0xe9a2da(_0x1549e7);}},this['me']=async(_0x278e00,_0x122226,_0x2358a1)=>{const _0x5edac3=_0x4b347a;try{const _0x29cf56=_0x278e00['user'];_0x122226[_0x5edac3(0xbe)]({'success':!![],'result':{'id':_0x29cf56?.['id'],'username':_0x29cf56?.[_0x5edac3(0xab)],'role':_0x29cf56?.[_0x5edac3(0x9e)]}});}catch(_0x31a708){_0x2358a1(_0x31a708);}},this['logout']=async(_0x5e2c0a,_0x3f7c7e,_0x386f4a)=>{const _0x38e946=_0x4b347a;try{const _0x427795=_0x5e2c0a[_0x38e946(0xa2)],_0x2f0560=_0x5e2c0a[_0x38e946(0xb6)];_0x427795&&_0x2f0560?.[_0x38e946(0xb8)]&&tokenBlacklistService_1['tokenBlacklistService'][_0x38e946(0x95)](_0x427795,_0x2f0560['exp']),_0x3f7c7e['json']({'success':!![],'message':_0x38e946(0x94)});}catch(_0xf98386){_0x386f4a(_0xf98386);}},this[_0x4b347a(0xbd)]=async(_0x1358c9,_0x33974c,_0x3775b4)=>{const _0x434d72=_0x4b347a;try{const _0x2117b0=tokenBlacklistService_1[_0x434d72(0x97)]['getStats']();_0x33974c['json']({'success':!![],'result':_0x2117b0});}catch(_0x2ae307){_0x3775b4(_0x2ae307);}},this[_0x4b347a(0xc3)]=new authService_1[(_0x4b347a(0xc2))]();}}exports[a4_0x2eb466(0xb3)]=AuthController;