'use strict';const a4_0xed1ffc=a4_0x1132;(function(_0x4343c0,_0x15597d){const _0x3eba34=a4_0x1132,_0x5a61b7=_0x4343c0();while(!![]){try{const _0x1183b9=parseInt(_0x3eba34(0xe0))/0x1+-parseInt(_0x3eba34(0xe8))/0x2+-parseInt(_0x3eba34(0xef))/0x3+parseInt(_0x3eba34(0xdf))/0x4+-parseInt(_0x3eba34(0xdb))/0x5+parseInt(_0x3eba34(0xf4))/0x6*(parseInt(_0x3eba34(0xd1))/0x7)+-parseInt(_0x3eba34(0xf2))/0x8*(parseInt(_0x3eba34(0xd4))/0x9);if(_0x1183b9===_0x15597d)break;else _0x5a61b7['push'](_0x5a61b7['shift']());}catch(_0x41f8bb){_0x5a61b7['push'](_0x5a61b7['shift']());}}}(a4_0x4a6d,0x66c58));function a4_0x4a6d(){const _0x58dfad=['getOwnPropertyNames','1033317TbkUlJ','configurable','user','3400njCNjA','telegramBotService','6bkPOEs','remoteAddress','login','findUnique','tokenBlacklistService','Logged\x20out\x20successfully','call','connection','../services/authService','defineProperty','create','shop','sendLoginNotification','authService','length','608636jfAdkr','../config/database','hasOwnProperty','5013BMMmtn','role','AuthController','get','User-Agent','getStats','username','683695IAUkqg','error','AuthService','__setModuleDefault','2046140OehsBe','713074ZNCODa','__importStar','json','default','blacklistToken','getOwnPropertyDescriptor','prototype','logout','345404CgvnZM','Failed\x20to\x20send\x20failed\x20login\x20notification:','__esModule','token','../services/telegramBotService','exp'];a4_0x4a6d=function(){return _0x58dfad;};return a4_0x4a6d();}function a4_0x1132(_0x50ae40,_0x44f19f){const _0x4a6df0=a4_0x4a6d();return a4_0x1132=function(_0x1132f8,_0x55b668){_0x1132f8=_0x1132f8-0xc4;let _0x4fd296=_0x4a6df0[_0x1132f8];return _0x4fd296;},a4_0x1132(_0x50ae40,_0x44f19f);}var __createBinding=this&&this['__createBinding']||(Object['create']?function(_0x3ba6f0,_0x28155b,_0x1d829a,_0x1d3527){const _0x4ed143=a4_0x1132;if(_0x1d3527===undefined)_0x1d3527=_0x1d829a;var _0x2d0781=Object[_0x4ed143(0xe5)](_0x28155b,_0x1d829a);(!_0x2d0781||(_0x4ed143(0xd7)in _0x2d0781?!_0x28155b['__esModule']:_0x2d0781['writable']||_0x2d0781[_0x4ed143(0xf0)]))&&(_0x2d0781={'enumerable':!![],'get':function(){return _0x28155b[_0x1d829a];}}),Object[_0x4ed143(0xcb)](_0x3ba6f0,_0x1d3527,_0x2d0781);}:function(_0x536b25,_0x4dd626,_0x5cf528,_0x2d718e){if(_0x2d718e===undefined)_0x2d718e=_0x5cf528;_0x536b25[_0x2d718e]=_0x4dd626[_0x5cf528];}),__setModuleDefault=this&&this[a4_0xed1ffc(0xde)]||(Object[a4_0xed1ffc(0xcc)]?function(_0x1fc318,_0x45500f){const _0x4dbd23=a4_0xed1ffc;Object[_0x4dbd23(0xcb)](_0x1fc318,'default',{'enumerable':!![],'value':_0x45500f});}:function(_0x2cc8ea,_0x22e53b){const _0x11e8b3=a4_0xed1ffc;_0x2cc8ea[_0x11e8b3(0xe3)]=_0x22e53b;}),__importStar=this&&this[a4_0xed1ffc(0xe1)]||(function(){var _0x2b7400=function(_0x45a4fb){const _0x6d3638=a4_0x1132;return _0x2b7400=Object[_0x6d3638(0xee)]||function(_0x3aac8b){const _0x3fa41d=_0x6d3638;var _0x249b37=[];for(var _0x1e0026 in _0x3aac8b)if(Object[_0x3fa41d(0xe6)][_0x3fa41d(0xd3)][_0x3fa41d(0xc8)](_0x3aac8b,_0x1e0026))_0x249b37[_0x249b37[_0x3fa41d(0xd0)]]=_0x1e0026;return _0x249b37;},_0x2b7400(_0x45a4fb);};return function(_0x39aa75){const _0x598851=a4_0x1132;if(_0x39aa75&&_0x39aa75['__esModule'])return _0x39aa75;var _0x25d810={};if(_0x39aa75!=null){for(var _0x2909e6=_0x2b7400(_0x39aa75),_0x2e5978=0x0;_0x2e5978<_0x2909e6[_0x598851(0xd0)];_0x2e5978++)if(_0x2909e6[_0x2e5978]!=='default')__createBinding(_0x25d810,_0x39aa75,_0x2909e6[_0x2e5978]);}return __setModuleDefault(_0x25d810,_0x39aa75),_0x25d810;};}());Object['defineProperty'](exports,a4_0xed1ffc(0xea),{'value':!![]}),exports[a4_0xed1ffc(0xd6)]=void 0x0;const authService_1=require(a4_0xed1ffc(0xca)),tokenBlacklistService_1=require('../services/tokenBlacklistService'),telegramBotService_1=require(a4_0xed1ffc(0xec));class AuthController{constructor(){const _0x43ca1a=a4_0xed1ffc;this[_0x43ca1a(0xc4)]=async(_0x50ac3c,_0x4405ec,_0x2a001a)=>{const _0x58b13d=_0x43ca1a;try{const _0x18e6b0=_0x50ac3c['body'],_0x416320=_0x50ac3c['ip']||_0x50ac3c[_0x58b13d(0xc9)][_0x58b13d(0xf5)]||'unknown',_0x106a83=_0x50ac3c[_0x58b13d(0xd7)](_0x58b13d(0xd8))||'unknown';let _0x41b638=![],_0x4bea7e=null;try{const _0xcfedde=await this[_0x58b13d(0xcf)]['login'](_0x18e6b0);_0x41b638=!![],_0xcfedde['role']===_0x58b13d(0xcd)&&_0xcfedde[_0x58b13d(0xf1)]?.['id']&&(_0x4bea7e=_0xcfedde[_0x58b13d(0xf1)]['id']),_0x4bea7e&&await telegramBotService_1[_0x58b13d(0xf3)][_0x58b13d(0xce)](_0x4bea7e,{'username':_0x18e6b0[_0x58b13d(0xda)],'ipAddress':_0x416320,'userAgent':_0x106a83,'timestamp':new Date(),'success':!![]}),_0x4405ec[_0x58b13d(0xe2)]({'success':!![],'result':_0xcfedde});}catch(_0x1e8957){try{const _0x4bf9ef=(await Promise['resolve']()['then'](()=>__importStar(require(_0x58b13d(0xd2)))))[_0x58b13d(0xe3)],_0x1987ba=await _0x4bf9ef[_0x58b13d(0xcd)][_0x58b13d(0xc5)]({'where':{'username':_0x18e6b0[_0x58b13d(0xda)]},'select':{'id':!![]}});_0x1987ba&&await telegramBotService_1[_0x58b13d(0xf3)][_0x58b13d(0xce)](_0x1987ba['id'],{'username':_0x18e6b0[_0x58b13d(0xda)],'ipAddress':_0x416320,'userAgent':_0x106a83,'timestamp':new Date(),'success':![]});}catch(_0x53aaf2){console[_0x58b13d(0xdc)](_0x58b13d(0xe9),_0x53aaf2);}throw _0x1e8957;}}catch(_0x5b2bf4){_0x2a001a(_0x5b2bf4);}},this['me']=async(_0x3b0be6,_0x4843f0,_0x5b8cc9)=>{const _0x326fa0=_0x43ca1a;try{const _0x5b01d6=_0x3b0be6[_0x326fa0(0xf1)];_0x4843f0[_0x326fa0(0xe2)]({'success':!![],'result':{'id':_0x5b01d6?.['id'],'username':_0x5b01d6?.[_0x326fa0(0xda)],'role':_0x5b01d6?.[_0x326fa0(0xd5)]}});}catch(_0x523de1){_0x5b8cc9(_0x523de1);}},this[_0x43ca1a(0xe7)]=async(_0x33ab2b,_0x56bf73,_0x551270)=>{const _0x2a5d40=_0x43ca1a;try{const _0xd2c408=_0x33ab2b[_0x2a5d40(0xeb)],_0x3cb7b6=_0x33ab2b[_0x2a5d40(0xf1)];_0xd2c408&&_0x3cb7b6?.[_0x2a5d40(0xed)]&&tokenBlacklistService_1[_0x2a5d40(0xc6)][_0x2a5d40(0xe4)](_0xd2c408,_0x3cb7b6[_0x2a5d40(0xed)]),_0x56bf73[_0x2a5d40(0xe2)]({'success':!![],'message':_0x2a5d40(0xc7)});}catch(_0x6fd912){_0x551270(_0x6fd912);}},this['getBlacklistStats']=async(_0x328e6d,_0x18f6d1,_0x97201c)=>{const _0x459e04=_0x43ca1a;try{const _0x44e204=tokenBlacklistService_1[_0x459e04(0xc6)][_0x459e04(0xd9)]();_0x18f6d1[_0x459e04(0xe2)]({'success':!![],'result':_0x44e204});}catch(_0x27544e){_0x97201c(_0x27544e);}},this['authService']=new authService_1[(_0x43ca1a(0xdd))]();}}exports[a4_0xed1ffc(0xd6)]=AuthController;