'use strict';const a4_0x332748=a4_0x5423;(function(_0x525c5e,_0x566442){const _0x34060a=a4_0x5423,_0x5b3dd8=_0x525c5e();while(!![]){try{const _0x2583c9=-parseInt(_0x34060a(0x9d))/0x1*(parseInt(_0x34060a(0x90))/0x2)+-parseInt(_0x34060a(0x93))/0x3*(parseInt(_0x34060a(0x91))/0x4)+parseInt(_0x34060a(0xa9))/0x5*(parseInt(_0x34060a(0xb0))/0x6)+-parseInt(_0x34060a(0xbd))/0x7+parseInt(_0x34060a(0xb5))/0x8+-parseInt(_0x34060a(0x92))/0x9*(-parseInt(_0x34060a(0x98))/0xa)+parseInt(_0x34060a(0x9e))/0xb;if(_0x2583c9===_0x566442)break;else _0x5b3dd8['push'](_0x5b3dd8['shift']());}catch(_0x123f29){_0x5b3dd8['push'](_0x5b3dd8['shift']());}}}(a4_0x565e,0xdbd65));function a4_0x565e(){const _0x28205f=['username','connection','json','getBlacklistStats','logout','error','835751JMOHUt','User-Agent','token','../config/database','AuthController','prototype','1054xzPFad','20fsUmON','7475373APkQna','959289ParHHp','authService','shop','blacklistToken','role','20MDUpLp','create','../services/telegramBotService','Failed\x20to\x20send\x20failed\x20login\x20notification:','user','1035YiWiKM','12281940IwRltV','__createBinding','Logged\x20out\x20successfully','default','__setModuleDefault','configurable','call','telegramBotService','AuthService','exp','resolve','18905VifIfa','../services/tokenBlacklistService','sendLoginNotification','defineProperty','getStats','login','getOwnPropertyNames','114jqCUKF','length','get','__esModule','tokenBlacklistService','2516264lNRXyI','unknown'];a4_0x565e=function(){return _0x28205f;};return a4_0x565e();}function a4_0x5423(_0x2373b4,_0x36d4a6){const _0x565e51=a4_0x565e();return a4_0x5423=function(_0x542367,_0x4fe275){_0x542367=_0x542367-0x8c;let _0x43c0a9=_0x565e51[_0x542367];return _0x43c0a9;},a4_0x5423(_0x2373b4,_0x36d4a6);}var __createBinding=this&&this[a4_0x332748(0x9f)]||(Object[a4_0x332748(0x99)]?function(_0x4b0352,_0x45b805,_0x41018e,_0x15a859){const _0x3926a7=a4_0x332748;if(_0x15a859===undefined)_0x15a859=_0x41018e;var _0x584328=Object['getOwnPropertyDescriptor'](_0x45b805,_0x41018e);(!_0x584328||(_0x3926a7(0xb2)in _0x584328?!_0x45b805[_0x3926a7(0xb3)]:_0x584328['writable']||_0x584328[_0x3926a7(0xa3)]))&&(_0x584328={'enumerable':!![],'get':function(){return _0x45b805[_0x41018e];}}),Object[_0x3926a7(0xac)](_0x4b0352,_0x15a859,_0x584328);}:function(_0x5c4e6d,_0x429af9,_0x128dad,_0x48700f){if(_0x48700f===undefined)_0x48700f=_0x128dad;_0x5c4e6d[_0x48700f]=_0x429af9[_0x128dad];}),__setModuleDefault=this&&this[a4_0x332748(0xa2)]||(Object[a4_0x332748(0x99)]?function(_0x2d804c,_0xdfe83d){const _0x4a5da5=a4_0x332748;Object[_0x4a5da5(0xac)](_0x2d804c,_0x4a5da5(0xa1),{'enumerable':!![],'value':_0xdfe83d});}:function(_0x2afa74,_0x7ca892){const _0xea8080=a4_0x332748;_0x2afa74[_0xea8080(0xa1)]=_0x7ca892;}),__importStar=this&&this['__importStar']||(function(){var _0x1e07be=function(_0x5de35b){const _0x42362e=a4_0x5423;return _0x1e07be=Object[_0x42362e(0xaf)]||function(_0xaa7d5c){const _0x2c74da=_0x42362e;var _0xa1fd73=[];for(var _0x27c1bf in _0xaa7d5c)if(Object[_0x2c74da(0x8f)]['hasOwnProperty'][_0x2c74da(0xa4)](_0xaa7d5c,_0x27c1bf))_0xa1fd73[_0xa1fd73['length']]=_0x27c1bf;return _0xa1fd73;},_0x1e07be(_0x5de35b);};return function(_0xa3a333){const _0x406d82=a4_0x5423;if(_0xa3a333&&_0xa3a333[_0x406d82(0xb3)])return _0xa3a333;var _0x1f1b80={};if(_0xa3a333!=null){for(var _0x2c88ad=_0x1e07be(_0xa3a333),_0x4ec8a7=0x0;_0x4ec8a7<_0x2c88ad[_0x406d82(0xb1)];_0x4ec8a7++)if(_0x2c88ad[_0x4ec8a7]!=='default')__createBinding(_0x1f1b80,_0xa3a333,_0x2c88ad[_0x4ec8a7]);}return __setModuleDefault(_0x1f1b80,_0xa3a333),_0x1f1b80;};}());Object[a4_0x332748(0xac)](exports,'__esModule',{'value':!![]}),exports[a4_0x332748(0x8e)]=void 0x0;const authService_1=require('../services/authService'),tokenBlacklistService_1=require(a4_0x332748(0xaa)),telegramBotService_1=require(a4_0x332748(0x9a));class AuthController{constructor(){const _0x477347=a4_0x332748;this[_0x477347(0xae)]=async(_0x5f7814,_0x20195b,_0x5c846d)=>{const _0x54a7af=_0x477347;try{const _0x5bc25b=_0x5f7814['body'],_0x37c342=_0x5f7814['ip']||_0x5f7814[_0x54a7af(0xb8)]['remoteAddress']||_0x54a7af(0xb6),_0x5e9612=_0x5f7814['get'](_0x54a7af(0xbe))||'unknown';let _0x2ea91a=![],_0x872b3=null;try{const _0x1e75ee=await this[_0x54a7af(0x94)][_0x54a7af(0xae)](_0x5bc25b);_0x2ea91a=!![],_0x1e75ee[_0x54a7af(0x97)]==='shop'&&_0x1e75ee[_0x54a7af(0x9c)]?.['id']&&(_0x872b3=_0x1e75ee['user']['id']),_0x872b3&&await telegramBotService_1['telegramBotService'][_0x54a7af(0xab)](_0x872b3,{'username':_0x5bc25b[_0x54a7af(0xb7)],'ipAddress':_0x37c342,'userAgent':_0x5e9612,'timestamp':new Date(),'success':!![]}),_0x20195b['json']({'success':!![],'result':_0x1e75ee});}catch(_0x1be354){try{const _0x58d7c3=(await Promise[_0x54a7af(0xa8)]()['then'](()=>__importStar(require(_0x54a7af(0x8d)))))[_0x54a7af(0xa1)],_0x267af5=await _0x58d7c3[_0x54a7af(0x95)]['findUnique']({'where':{'username':_0x5bc25b['username']},'select':{'id':!![]}});_0x267af5&&await telegramBotService_1[_0x54a7af(0xa5)][_0x54a7af(0xab)](_0x267af5['id'],{'username':_0x5bc25b[_0x54a7af(0xb7)],'ipAddress':_0x37c342,'userAgent':_0x5e9612,'timestamp':new Date(),'success':![]});}catch(_0x50e80c){console[_0x54a7af(0xbc)](_0x54a7af(0x9b),_0x50e80c);}throw _0x1be354;}}catch(_0x482261){_0x5c846d(_0x482261);}},this['me']=async(_0x1a4efd,_0x469a24,_0x30eca9)=>{const _0x3f73e4=_0x477347;try{const _0x558de2=_0x1a4efd[_0x3f73e4(0x9c)];_0x469a24[_0x3f73e4(0xb9)]({'success':!![],'result':{'id':_0x558de2?.['id'],'username':_0x558de2?.[_0x3f73e4(0xb7)],'role':_0x558de2?.[_0x3f73e4(0x97)]}});}catch(_0x1c058d){_0x30eca9(_0x1c058d);}},this[_0x477347(0xbb)]=async(_0x26ddbe,_0x4a2b03,_0x37fb06)=>{const _0xc5e3d3=_0x477347;try{const _0x456257=_0x26ddbe[_0xc5e3d3(0x8c)],_0x5c1ffb=_0x26ddbe[_0xc5e3d3(0x9c)];_0x456257&&_0x5c1ffb?.['exp']&&tokenBlacklistService_1['tokenBlacklistService'][_0xc5e3d3(0x96)](_0x456257,_0x5c1ffb[_0xc5e3d3(0xa7)]),_0x4a2b03[_0xc5e3d3(0xb9)]({'success':!![],'message':_0xc5e3d3(0xa0)});}catch(_0x54977a){_0x37fb06(_0x54977a);}},this[_0x477347(0xba)]=async(_0x172485,_0x14ce9d,_0x27dbd6)=>{const _0x299345=_0x477347;try{const _0x1b1f1d=tokenBlacklistService_1[_0x299345(0xb4)][_0x299345(0xad)]();_0x14ce9d[_0x299345(0xb9)]({'success':!![],'result':_0x1b1f1d});}catch(_0x35b76b){_0x27dbd6(_0x35b76b);}},this[_0x477347(0x94)]=new authService_1[(_0x477347(0xa6))]();}}exports[a4_0x332748(0x8e)]=AuthController;