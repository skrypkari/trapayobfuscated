'use strict';const a4_0x2541e4=a4_0x5ab1;(function(_0x37a5bb,_0x5c9d1e){const _0x2db599=a4_0x5ab1,_0x39d807=_0x37a5bb();while(!![]){try{const _0x548b90=-parseInt(_0x2db599(0x130))/0x1*(parseInt(_0x2db599(0x11c))/0x2)+parseInt(_0x2db599(0x134))/0x3+-parseInt(_0x2db599(0x139))/0x4*(-parseInt(_0x2db599(0x127))/0x5)+parseInt(_0x2db599(0x131))/0x6*(-parseInt(_0x2db599(0x11e))/0x7)+parseInt(_0x2db599(0x12e))/0x8+parseInt(_0x2db599(0x146))/0x9+-parseInt(_0x2db599(0x124))/0xa;if(_0x548b90===_0x5c9d1e)break;else _0x39d807['push'](_0x39d807['shift']());}catch(_0x1401b7){_0x39d807['push'](_0x39d807['shift']());}}}(a4_0x1321,0xeba0d));function a4_0x1321(){const _0x937ae0=['token','defineProperty','remoteAddress','15194552EAUloT','getOwnPropertyDescriptor','1002577qBJhGW','1876146VHwtAM','Logged\x20out\x20successfully','logout','342435eQcyel','../config/database','shop','hasOwnProperty','get','187672wbSQAn','User-Agent','AuthService','unknown','json','__importStar','configurable','default','authService','AuthController','call','length','__createBinding','1860723RGudUz','tokenBlacklistService','getBlacklistStats','create','getStats','../services/tokenBlacklistService','exp','then','__setModuleDefault','2VopOFK','sendLoginNotification','7uJbqJT','__esModule','error','blacklistToken','Failed\x20to\x20send\x20failed\x20login\x20notification:','user','1744000enfUAk','role','../services/authService','25DpMUxK','login','username','prototype'];a4_0x1321=function(){return _0x937ae0;};return a4_0x1321();}function a4_0x5ab1(_0x1ec696,_0x5c0422){const _0x132194=a4_0x1321();return a4_0x5ab1=function(_0x5ab18f,_0x3169b8){_0x5ab18f=_0x5ab18f-0x11c;let _0x43f4a4=_0x132194[_0x5ab18f];return _0x43f4a4;},a4_0x5ab1(_0x1ec696,_0x5c0422);}var __createBinding=this&&this[a4_0x2541e4(0x145)]||(Object[a4_0x2541e4(0x149)]?function(_0x5e1ac0,_0x55d066,_0x14701e,_0x2035a0){const _0x55c1d6=a4_0x2541e4;if(_0x2035a0===undefined)_0x2035a0=_0x14701e;var _0xe783d3=Object[_0x55c1d6(0x12f)](_0x55d066,_0x14701e);(!_0xe783d3||('get'in _0xe783d3?!_0x55d066[_0x55c1d6(0x11f)]:_0xe783d3['writable']||_0xe783d3[_0x55c1d6(0x13f)]))&&(_0xe783d3={'enumerable':!![],'get':function(){return _0x55d066[_0x14701e];}}),Object[_0x55c1d6(0x12c)](_0x5e1ac0,_0x2035a0,_0xe783d3);}:function(_0x800e65,_0x5a08a5,_0x3f72eb,_0x26108f){if(_0x26108f===undefined)_0x26108f=_0x3f72eb;_0x800e65[_0x26108f]=_0x5a08a5[_0x3f72eb];}),__setModuleDefault=this&&this[a4_0x2541e4(0x14e)]||(Object[a4_0x2541e4(0x149)]?function(_0x2af8a1,_0x3c829f){const _0x440f58=a4_0x2541e4;Object[_0x440f58(0x12c)](_0x2af8a1,_0x440f58(0x140),{'enumerable':!![],'value':_0x3c829f});}:function(_0x2c60db,_0x2039fc){_0x2c60db['default']=_0x2039fc;}),__importStar=this&&this[a4_0x2541e4(0x13e)]||(function(){var _0x3f8e97=function(_0x1c2d9d){return _0x3f8e97=Object['getOwnPropertyNames']||function(_0x16de3b){const _0x3e9ad9=a4_0x5ab1;var _0x18fde0=[];for(var _0x2c0fc3 in _0x16de3b)if(Object[_0x3e9ad9(0x12a)][_0x3e9ad9(0x137)][_0x3e9ad9(0x143)](_0x16de3b,_0x2c0fc3))_0x18fde0[_0x18fde0[_0x3e9ad9(0x144)]]=_0x2c0fc3;return _0x18fde0;},_0x3f8e97(_0x1c2d9d);};return function(_0x153c48){const _0x2506d9=a4_0x5ab1;if(_0x153c48&&_0x153c48['__esModule'])return _0x153c48;var _0x3e0658={};if(_0x153c48!=null){for(var _0x4336ac=_0x3f8e97(_0x153c48),_0x19e52e=0x0;_0x19e52e<_0x4336ac[_0x2506d9(0x144)];_0x19e52e++)if(_0x4336ac[_0x19e52e]!==_0x2506d9(0x140))__createBinding(_0x3e0658,_0x153c48,_0x4336ac[_0x19e52e]);}return __setModuleDefault(_0x3e0658,_0x153c48),_0x3e0658;};}());Object[a4_0x2541e4(0x12c)](exports,a4_0x2541e4(0x11f),{'value':!![]}),exports[a4_0x2541e4(0x142)]=void 0x0;const authService_1=require(a4_0x2541e4(0x126)),tokenBlacklistService_1=require(a4_0x2541e4(0x14b)),telegramBotService_1=require('../services/telegramBotService');class AuthController{constructor(){const _0x27644f=a4_0x2541e4;this['login']=async(_0x1b02ef,_0x280a16,_0x58fd21)=>{const _0x10a31f=a4_0x5ab1;try{const _0x10083d=_0x1b02ef['body'],_0x5e0a0e=_0x1b02ef['ip']||_0x1b02ef['connection'][_0x10a31f(0x12d)]||'unknown',_0x3eba83=_0x1b02ef[_0x10a31f(0x138)](_0x10a31f(0x13a))||_0x10a31f(0x13c);let _0x147a98=![],_0x2e3a45=null;try{const _0x4e2954=await this[_0x10a31f(0x141)][_0x10a31f(0x128)](_0x10083d);_0x147a98=!![],_0x4e2954[_0x10a31f(0x125)]===_0x10a31f(0x136)&&_0x4e2954[_0x10a31f(0x123)]?.['id']&&(_0x2e3a45=_0x4e2954['user']['id']),_0x2e3a45&&await telegramBotService_1['telegramBotService'][_0x10a31f(0x11d)](_0x2e3a45,{'username':_0x10083d['username'],'ipAddress':_0x5e0a0e,'userAgent':_0x3eba83,'timestamp':new Date(),'success':!![]}),_0x280a16[_0x10a31f(0x13d)]({'success':!![],'result':_0x4e2954});}catch(_0x3c1bee){try{const _0xfdb85c=(await Promise['resolve']()[_0x10a31f(0x14d)](()=>__importStar(require(_0x10a31f(0x135)))))['default'],_0x4861a7=await _0xfdb85c['shop']['findUnique']({'where':{'username':_0x10083d[_0x10a31f(0x129)]},'select':{'id':!![]}});_0x4861a7&&await telegramBotService_1['telegramBotService'][_0x10a31f(0x11d)](_0x4861a7['id'],{'username':_0x10083d[_0x10a31f(0x129)],'ipAddress':_0x5e0a0e,'userAgent':_0x3eba83,'timestamp':new Date(),'success':![]});}catch(_0x7fe51f){console[_0x10a31f(0x120)](_0x10a31f(0x122),_0x7fe51f);}throw _0x3c1bee;}}catch(_0x4cef2f){_0x58fd21(_0x4cef2f);}},this['me']=async(_0x7390b1,_0x3a0c81,_0x517ee8)=>{const _0x46c2a7=a4_0x5ab1;try{const _0x4aec00=_0x7390b1[_0x46c2a7(0x123)];_0x3a0c81['json']({'success':!![],'result':{'id':_0x4aec00?.['id'],'username':_0x4aec00?.['username'],'role':_0x4aec00?.[_0x46c2a7(0x125)]}});}catch(_0x55d52d){_0x517ee8(_0x55d52d);}},this[_0x27644f(0x133)]=async(_0x2fe944,_0x2923f0,_0x38d03e)=>{const _0x56cee1=_0x27644f;try{const _0x560e03=_0x2fe944[_0x56cee1(0x12b)],_0x46a5f9=_0x2fe944['user'];_0x560e03&&_0x46a5f9?.[_0x56cee1(0x14c)]&&tokenBlacklistService_1[_0x56cee1(0x147)][_0x56cee1(0x121)](_0x560e03,_0x46a5f9[_0x56cee1(0x14c)]),_0x2923f0[_0x56cee1(0x13d)]({'success':!![],'message':_0x56cee1(0x132)});}catch(_0x3e33d9){_0x38d03e(_0x3e33d9);}},this[_0x27644f(0x148)]=async(_0x2638ec,_0x5b93f3,_0x180f1c)=>{const _0x2108e8=_0x27644f;try{const _0x5564b2=tokenBlacklistService_1[_0x2108e8(0x147)][_0x2108e8(0x14a)]();_0x5b93f3[_0x2108e8(0x13d)]({'success':!![],'result':_0x5564b2});}catch(_0x24f958){_0x180f1c(_0x24f958);}},this[_0x27644f(0x141)]=new authService_1[(_0x27644f(0x13b))]();}}exports[a4_0x2541e4(0x142)]=AuthController;