'use strict';function a4_0x2549(_0x317570,_0x5abfaa){const _0x315447=a4_0x3154();return a4_0x2549=function(_0x254904,_0x490a82){_0x254904=_0x254904-0x193;let _0x5e4816=_0x315447[_0x254904];return _0x5e4816;},a4_0x2549(_0x317570,_0x5abfaa);}const a4_0x2354f1=a4_0x2549;(function(_0x5139cc,_0x167d01){const _0x58c98a=a4_0x2549,_0x1d6919=_0x5139cc();while(!![]){try{const _0x1e0f28=parseInt(_0x58c98a(0x1a6))/0x1*(parseInt(_0x58c98a(0x1af))/0x2)+-parseInt(_0x58c98a(0x1c2))/0x3*(-parseInt(_0x58c98a(0x1a2))/0x4)+-parseInt(_0x58c98a(0x1ae))/0x5*(parseInt(_0x58c98a(0x1a5))/0x6)+-parseInt(_0x58c98a(0x1c5))/0x7*(-parseInt(_0x58c98a(0x1b3))/0x8)+parseInt(_0x58c98a(0x1b5))/0x9*(parseInt(_0x58c98a(0x1b6))/0xa)+-parseInt(_0x58c98a(0x1a8))/0xb+-parseInt(_0x58c98a(0x1b9))/0xc;if(_0x1e0f28===_0x167d01)break;else _0x1d6919['push'](_0x1d6919['shift']());}catch(_0x1065b5){_0x1d6919['push'](_0x1d6919['shift']());}}}(a4_0x3154,0xc2a51));var __createBinding=this&&this[a4_0x2354f1(0x19b)]||(Object[a4_0x2354f1(0x1bb)]?function(_0x5e0cd8,_0x5a69e1,_0xcafb13,_0x1e541c){const _0x4f9f2d=a4_0x2354f1;if(_0x1e541c===undefined)_0x1e541c=_0xcafb13;var _0x2d6547=Object[_0x4f9f2d(0x1c1)](_0x5a69e1,_0xcafb13);(!_0x2d6547||(_0x4f9f2d(0x1c7)in _0x2d6547?!_0x5a69e1[_0x4f9f2d(0x1ba)]:_0x2d6547[_0x4f9f2d(0x1a1)]||_0x2d6547[_0x4f9f2d(0x1bc)]))&&(_0x2d6547={'enumerable':!![],'get':function(){return _0x5a69e1[_0xcafb13];}}),Object[_0x4f9f2d(0x196)](_0x5e0cd8,_0x1e541c,_0x2d6547);}:function(_0x3e4caa,_0x2993f7,_0x482a28,_0x525dfd){if(_0x525dfd===undefined)_0x525dfd=_0x482a28;_0x3e4caa[_0x525dfd]=_0x2993f7[_0x482a28];}),__setModuleDefault=this&&this[a4_0x2354f1(0x19c)]||(Object[a4_0x2354f1(0x1bb)]?function(_0x3df030,_0x1b1d92){const _0x238c36=a4_0x2354f1;Object[_0x238c36(0x196)](_0x3df030,_0x238c36(0x1c0),{'enumerable':!![],'value':_0x1b1d92});}:function(_0x40cb0d,_0x2f2286){_0x40cb0d['default']=_0x2f2286;}),__importStar=this&&this[a4_0x2354f1(0x19a)]||(function(){var _0x7ef6c9=function(_0x38749e){const _0x38c97c=a4_0x2549;return _0x7ef6c9=Object[_0x38c97c(0x197)]||function(_0x3055f7){const _0x1bf1e8=_0x38c97c;var _0x32936c=[];for(var _0x54ed53 in _0x3055f7)if(Object[_0x1bf1e8(0x1bf)][_0x1bf1e8(0x1ac)]['call'](_0x3055f7,_0x54ed53))_0x32936c[_0x32936c[_0x1bf1e8(0x195)]]=_0x54ed53;return _0x32936c;},_0x7ef6c9(_0x38749e);};return function(_0x557399){const _0x4bb232=a4_0x2549;if(_0x557399&&_0x557399[_0x4bb232(0x1ba)])return _0x557399;var _0x41e429={};if(_0x557399!=null){for(var _0x17602b=_0x7ef6c9(_0x557399),_0xbb3ffc=0x0;_0xbb3ffc<_0x17602b[_0x4bb232(0x195)];_0xbb3ffc++)if(_0x17602b[_0xbb3ffc]!==_0x4bb232(0x1c0))__createBinding(_0x41e429,_0x557399,_0x17602b[_0xbb3ffc]);}return __setModuleDefault(_0x41e429,_0x557399),_0x41e429;};}());Object['defineProperty'](exports,a4_0x2354f1(0x1ba),{'value':!![]}),exports[a4_0x2354f1(0x1a7)]=void 0x0;const authService_1=require(a4_0x2354f1(0x199)),tokenBlacklistService_1=require(a4_0x2354f1(0x1ab)),telegramBotService_1=require(a4_0x2354f1(0x19d));function a4_0x3154(){const _0x44779e=['Logged\x20out\x20successfully','json','28VOroME','../config/database','get','user','exp','getBlacklistStats','length','defineProperty','getOwnPropertyNames','User-Agent','../services/authService','__importStar','__createBinding','__setModuleDefault','../services/telegramBotService','sendLoginNotification','username','authService','writable','4SdOEAi','unknown','remoteAddress','1781466vFbBRD','213BbBhFR','AuthController','7118364uCdYPn','tokenBlacklistService','shop','../services/tokenBlacklistService','hasOwnProperty','Failed\x20to\x20send\x20failed\x20login\x20notification:','20UzTbfZ','10898iDXzRv','connection','telegramBotService','AuthService','2107288jVVLWN','role','81GJeYVH','193910vaOjfR','findUnique','resolve','5064096vTFWEp','__esModule','create','configurable','getStats','blacklistToken','prototype','default','getOwnPropertyDescriptor','1995723vuVwKL'];a4_0x3154=function(){return _0x44779e;};return a4_0x3154();}class AuthController{constructor(){const _0x5d9548=a4_0x2354f1;this['login']=async(_0x11eeac,_0x39c9a3,_0x1b441e)=>{const _0x231c05=a4_0x2549;try{const _0x41b26d=_0x11eeac['body'],_0x2735f6=_0x11eeac['ip']||_0x11eeac[_0x231c05(0x1b0)][_0x231c05(0x1a4)]||'unknown',_0x5e39e6=_0x11eeac['get'](_0x231c05(0x198))||_0x231c05(0x1a3);let _0x589546=![],_0x5cabe3=null;try{const _0x53e5e8=await this[_0x231c05(0x1a0)]['login'](_0x41b26d);_0x589546=!![],_0x53e5e8[_0x231c05(0x1b4)]===_0x231c05(0x1aa)&&_0x53e5e8[_0x231c05(0x1c8)]?.['id']&&(_0x5cabe3=_0x53e5e8['user']['id']),_0x5cabe3&&await telegramBotService_1[_0x231c05(0x1b1)]['sendLoginNotification'](_0x5cabe3,{'username':_0x41b26d[_0x231c05(0x19f)],'ipAddress':_0x2735f6,'userAgent':_0x5e39e6,'timestamp':new Date(),'success':!![]}),_0x39c9a3[_0x231c05(0x1c4)]({'success':!![],'result':_0x53e5e8});}catch(_0x505d0d){try{const _0x18bd76=(await Promise[_0x231c05(0x1b8)]()['then'](()=>__importStar(require(_0x231c05(0x1c6)))))[_0x231c05(0x1c0)],_0x417b5c=await _0x18bd76[_0x231c05(0x1aa)][_0x231c05(0x1b7)]({'where':{'username':_0x41b26d['username']},'select':{'id':!![]}});_0x417b5c&&await telegramBotService_1[_0x231c05(0x1b1)][_0x231c05(0x19e)](_0x417b5c['id'],{'username':_0x41b26d[_0x231c05(0x19f)],'ipAddress':_0x2735f6,'userAgent':_0x5e39e6,'timestamp':new Date(),'success':![]});}catch(_0x3fd100){console['error'](_0x231c05(0x1ad),_0x3fd100);}throw _0x505d0d;}}catch(_0x5e1c4f){_0x1b441e(_0x5e1c4f);}},this['me']=async(_0x22ba18,_0x3c8692,_0x29f620)=>{const _0x308142=a4_0x2549;try{const _0x291fd5=_0x22ba18[_0x308142(0x1c8)];_0x3c8692[_0x308142(0x1c4)]({'success':!![],'result':{'id':_0x291fd5?.['id'],'username':_0x291fd5?.['username'],'role':_0x291fd5?.[_0x308142(0x1b4)]}});}catch(_0xfeef57){_0x29f620(_0xfeef57);}},this['logout']=async(_0x3dbfcb,_0x187394,_0x4b778f)=>{const _0x285164=a4_0x2549;try{const _0x31a05c=_0x3dbfcb['token'],_0x203262=_0x3dbfcb[_0x285164(0x1c8)];_0x31a05c&&_0x203262?.['exp']&&tokenBlacklistService_1['tokenBlacklistService'][_0x285164(0x1be)](_0x31a05c,_0x203262[_0x285164(0x193)]),_0x187394[_0x285164(0x1c4)]({'success':!![],'message':_0x285164(0x1c3)});}catch(_0x1e7471){_0x4b778f(_0x1e7471);}},this[_0x5d9548(0x194)]=async(_0x520de2,_0x205752,_0x5a0f6b)=>{const _0x16d713=_0x5d9548;try{const _0x5c95d0=tokenBlacklistService_1[_0x16d713(0x1a9)][_0x16d713(0x1bd)]();_0x205752['json']({'success':!![],'result':_0x5c95d0});}catch(_0x48e0cb){_0x5a0f6b(_0x48e0cb);}},this[_0x5d9548(0x1a0)]=new authService_1[(_0x5d9548(0x1b2))]();}}exports[a4_0x2354f1(0x1a7)]=AuthController;