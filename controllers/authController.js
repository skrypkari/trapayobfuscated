'use strict';function a4_0x4735(_0x30a3e6,_0x2a59ba){const _0x5a34ce=a4_0x5a34();return a4_0x4735=function(_0x473503,_0x15f452){_0x473503=_0x473503-0x187;let _0x45d6da=_0x5a34ce[_0x473503];return _0x45d6da;},a4_0x4735(_0x30a3e6,_0x2a59ba);}const a4_0x26f095=a4_0x4735;(function(_0x3233ad,_0x52c7bb){const _0x2029f5=a4_0x4735,_0x45cae0=_0x3233ad();while(!![]){try{const _0x3fef6f=parseInt(_0x2029f5(0x1af))/0x1*(parseInt(_0x2029f5(0x19a))/0x2)+parseInt(_0x2029f5(0x1b5))/0x3+-parseInt(_0x2029f5(0x18e))/0x4*(-parseInt(_0x2029f5(0x18d))/0x5)+-parseInt(_0x2029f5(0x19b))/0x6*(-parseInt(_0x2029f5(0x193))/0x7)+parseInt(_0x2029f5(0x1aa))/0x8+parseInt(_0x2029f5(0x191))/0x9+parseInt(_0x2029f5(0x198))/0xa*(-parseInt(_0x2029f5(0x18c))/0xb);if(_0x3fef6f===_0x52c7bb)break;else _0x45cae0['push'](_0x45cae0['shift']());}catch(_0x43d5d1){_0x45cae0['push'](_0x45cae0['shift']());}}}(a4_0x5a34,0x8ca9c));function a4_0x5a34(){const _0x49a133=['telegramBotService','resolve','login','Logged\x20out\x20successfully','__importStar','username','11PBXGGw','351700zyeEsh','12jgycTl','prototype','get','3168738jdCPoU','token','217133xYwlfR','../services/tokenBlacklistService','Failed\x20to\x20send\x20failed\x20login\x20notification:','hasOwnProperty','AuthController','27819390WCcUwb','__createBinding','616306zuIKHb','132hzcpON','AuthService','create','getBlacklistStats','exp','user','then','defineProperty','getOwnPropertyDescriptor','connection','sendLoginNotification','error','configurable','length','writable','4333840XdamNU','__esModule','json','shop','authService','2DjcRhO','../services/telegramBotService','findUnique','../config/database','tokenBlacklistService','default','2863617ZlxdLC','__setModuleDefault','unknown','role','getOwnPropertyNames','getStats','remoteAddress','call'];a4_0x5a34=function(){return _0x49a133;};return a4_0x5a34();}var __createBinding=this&&this[a4_0x26f095(0x199)]||(Object['create']?function(_0x2491dc,_0x3ccfc2,_0x5180c7,_0x1ac590){const _0x2aa53d=a4_0x26f095;if(_0x1ac590===undefined)_0x1ac590=_0x5180c7;var _0x434d4f=Object[_0x2aa53d(0x1a3)](_0x3ccfc2,_0x5180c7);(!_0x434d4f||(_0x2aa53d(0x190)in _0x434d4f?!_0x3ccfc2[_0x2aa53d(0x1ab)]:_0x434d4f[_0x2aa53d(0x1a9)]||_0x434d4f[_0x2aa53d(0x1a7)]))&&(_0x434d4f={'enumerable':!![],'get':function(){return _0x3ccfc2[_0x5180c7];}}),Object['defineProperty'](_0x2491dc,_0x1ac590,_0x434d4f);}:function(_0x420cd6,_0x6bc3b0,_0x1be910,_0x3be70b){if(_0x3be70b===undefined)_0x3be70b=_0x1be910;_0x420cd6[_0x3be70b]=_0x6bc3b0[_0x1be910];}),__setModuleDefault=this&&this[a4_0x26f095(0x1b6)]||(Object[a4_0x26f095(0x19d)]?function(_0x3ad9e0,_0x13f8cd){const _0x40f720=a4_0x26f095;Object['defineProperty'](_0x3ad9e0,_0x40f720(0x1b4),{'enumerable':!![],'value':_0x13f8cd});}:function(_0x246823,_0x5c1de2){const _0x69819c=a4_0x26f095;_0x246823[_0x69819c(0x1b4)]=_0x5c1de2;}),__importStar=this&&this[a4_0x26f095(0x18a)]||(function(){var _0x582545=function(_0x59c3f3){const _0xe58f1a=a4_0x4735;return _0x582545=Object[_0xe58f1a(0x1b9)]||function(_0x33bf21){const _0x2166a5=_0xe58f1a;var _0x435eb5=[];for(var _0x4b6283 in _0x33bf21)if(Object[_0x2166a5(0x18f)][_0x2166a5(0x196)][_0x2166a5(0x1bc)](_0x33bf21,_0x4b6283))_0x435eb5[_0x435eb5['length']]=_0x4b6283;return _0x435eb5;},_0x582545(_0x59c3f3);};return function(_0x9bc7c4){const _0x537f3c=a4_0x4735;if(_0x9bc7c4&&_0x9bc7c4[_0x537f3c(0x1ab)])return _0x9bc7c4;var _0x30dc1a={};if(_0x9bc7c4!=null){for(var _0x3068ad=_0x582545(_0x9bc7c4),_0x2120d5=0x0;_0x2120d5<_0x3068ad[_0x537f3c(0x1a8)];_0x2120d5++)if(_0x3068ad[_0x2120d5]!==_0x537f3c(0x1b4))__createBinding(_0x30dc1a,_0x9bc7c4,_0x3068ad[_0x2120d5]);}return __setModuleDefault(_0x30dc1a,_0x9bc7c4),_0x30dc1a;};}());Object[a4_0x26f095(0x1a2)](exports,a4_0x26f095(0x1ab),{'value':!![]}),exports['AuthController']=void 0x0;const authService_1=require('../services/authService'),tokenBlacklistService_1=require(a4_0x26f095(0x194)),telegramBotService_1=require(a4_0x26f095(0x1b0));class AuthController{constructor(){const _0x31e911=a4_0x26f095;this[_0x31e911(0x188)]=async(_0x1f7826,_0x137dbe,_0x59abf9)=>{const _0x20e2af=_0x31e911;try{const _0x52c347=_0x1f7826['body'],_0x331132=_0x1f7826['ip']||_0x1f7826[_0x20e2af(0x1a4)][_0x20e2af(0x1bb)]||_0x20e2af(0x1b7),_0x4d675c=_0x1f7826['get']('User-Agent')||_0x20e2af(0x1b7);let _0x5b676b=![],_0x59f4ef=null;try{const _0x255482=await this[_0x20e2af(0x1ae)][_0x20e2af(0x188)](_0x52c347);_0x5b676b=!![],_0x255482[_0x20e2af(0x1b8)]===_0x20e2af(0x1ad)&&_0x255482[_0x20e2af(0x1a0)]?.['id']&&(_0x59f4ef=_0x255482[_0x20e2af(0x1a0)]['id']),_0x59f4ef&&await telegramBotService_1[_0x20e2af(0x1bd)][_0x20e2af(0x1a5)](_0x59f4ef,{'username':_0x52c347[_0x20e2af(0x18b)],'ipAddress':_0x331132,'userAgent':_0x4d675c,'timestamp':new Date(),'success':!![]}),_0x137dbe['json']({'success':!![],'result':_0x255482});}catch(_0x34d9a2){try{const _0x126aef=(await Promise[_0x20e2af(0x187)]()[_0x20e2af(0x1a1)](()=>__importStar(require(_0x20e2af(0x1b2)))))[_0x20e2af(0x1b4)],_0xc43594=await _0x126aef['shop'][_0x20e2af(0x1b1)]({'where':{'username':_0x52c347[_0x20e2af(0x18b)]},'select':{'id':!![]}});_0xc43594&&await telegramBotService_1[_0x20e2af(0x1bd)]['sendLoginNotification'](_0xc43594['id'],{'username':_0x52c347[_0x20e2af(0x18b)],'ipAddress':_0x331132,'userAgent':_0x4d675c,'timestamp':new Date(),'success':![]});}catch(_0x571dde){console[_0x20e2af(0x1a6)](_0x20e2af(0x195),_0x571dde);}throw _0x34d9a2;}}catch(_0x1d7e62){_0x59abf9(_0x1d7e62);}},this['me']=async(_0x3db4ba,_0x40799b,_0x3659da)=>{const _0x1cf54d=_0x31e911;try{const _0x3b48e0=_0x3db4ba[_0x1cf54d(0x1a0)];_0x40799b[_0x1cf54d(0x1ac)]({'success':!![],'result':{'id':_0x3b48e0?.['id'],'username':_0x3b48e0?.[_0x1cf54d(0x18b)],'role':_0x3b48e0?.[_0x1cf54d(0x1b8)]}});}catch(_0x7754f3){_0x3659da(_0x7754f3);}},this['logout']=async(_0x2d7362,_0xdd6a77,_0x18cbc5)=>{const _0x11d3cf=_0x31e911;try{const _0x4b1c1e=_0x2d7362[_0x11d3cf(0x192)],_0xeff93c=_0x2d7362[_0x11d3cf(0x1a0)];_0x4b1c1e&&_0xeff93c?.[_0x11d3cf(0x19f)]&&tokenBlacklistService_1[_0x11d3cf(0x1b3)]['blacklistToken'](_0x4b1c1e,_0xeff93c[_0x11d3cf(0x19f)]),_0xdd6a77['json']({'success':!![],'message':_0x11d3cf(0x189)});}catch(_0x2e12ed){_0x18cbc5(_0x2e12ed);}},this[_0x31e911(0x19e)]=async(_0x28c8ec,_0x5e7ccd,_0x563a66)=>{const _0x1ad50c=_0x31e911;try{const _0x249a29=tokenBlacklistService_1[_0x1ad50c(0x1b3)][_0x1ad50c(0x1ba)]();_0x5e7ccd[_0x1ad50c(0x1ac)]({'success':!![],'result':_0x249a29});}catch(_0x31da37){_0x563a66(_0x31da37);}},this[_0x31e911(0x1ae)]=new authService_1[(_0x31e911(0x19c))]();}}exports[a4_0x26f095(0x197)]=AuthController;