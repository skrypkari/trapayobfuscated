'use strict';function a4_0x1963(_0x449fed,_0x45a151){_0x449fed=_0x449fed-0xdd;const _0x1bbe2b=a4_0x1bbe();let _0x1963f9=_0x1bbe2b[_0x449fed];return _0x1963f9;}function a4_0x1bbe(){const _0x12705f=['getBlacklistStats','authService','11733616pYBeyD','get','../config/database','default','58098600WUmXcQ','../services/tokenBlacklistService','__setModuleDefault','prototype','__createBinding','6321987tieYFf','login','username','user','../services/authService','hasOwnProperty','geo','AuthService','call','1097883fheqmO','findUnique','625ZJNNFe','connection','telegramBotService','error','unknown','sendLoginNotification','AuthController','logout','7785288wktdYM','84498YhpGeL','exp','getOwnPropertyNames','resolve','../services/telegramBotService','configurable','defineProperty','blacklistToken','userAgent','create','Logged\x20out\x20successfully','role','430Rrrbiw','remoteAddress','shop','8026WAOIAM','tokenBlacklistService','json','__esModule'];a4_0x1bbe=function(){return _0x12705f;};return a4_0x1bbe();}const a4_0x2a9914=a4_0x1963;(function(_0xa06d25,_0x4091ce){const _0xa8121b=a4_0x1963,_0x551dce=_0xa06d25();while(!![]){try{const _0x1d9928=-parseInt(_0xa8121b(0xe4))/0x1*(-parseInt(_0xa8121b(0xe1))/0x2)+-parseInt(_0xa8121b(0xfc))/0x3+parseInt(_0xa8121b(0x106))/0x4+-parseInt(_0xa8121b(0xfe))/0x5*(-parseInt(_0xa8121b(0x107))/0x6)+parseInt(_0xa8121b(0xf3))/0x7+parseInt(_0xa8121b(0xea))/0x8+-parseInt(_0xa8121b(0xee))/0x9;if(_0x1d9928===_0x4091ce)break;else _0x551dce['push'](_0x551dce['shift']());}catch(_0x2a36ea){_0x551dce['push'](_0x551dce['shift']());}}}(a4_0x1bbe,0xef721));var __createBinding=this&&this[a4_0x2a9914(0xf2)]||(Object['create']?function(_0x345c9c,_0x783159,_0x11f6d4,_0x2efffc){const _0xddb813=a4_0x2a9914;if(_0x2efffc===undefined)_0x2efffc=_0x11f6d4;var _0x4700d5=Object['getOwnPropertyDescriptor'](_0x783159,_0x11f6d4);(!_0x4700d5||(_0xddb813(0xeb)in _0x4700d5?!_0x783159[_0xddb813(0xe7)]:_0x4700d5['writable']||_0x4700d5[_0xddb813(0x10c)]))&&(_0x4700d5={'enumerable':!![],'get':function(){return _0x783159[_0x11f6d4];}}),Object[_0xddb813(0x10d)](_0x345c9c,_0x2efffc,_0x4700d5);}:function(_0x523e7f,_0x2a7c5b,_0x29d850,_0x44fa4c){if(_0x44fa4c===undefined)_0x44fa4c=_0x29d850;_0x523e7f[_0x44fa4c]=_0x2a7c5b[_0x29d850];}),__setModuleDefault=this&&this[a4_0x2a9914(0xf0)]||(Object[a4_0x2a9914(0xde)]?function(_0xd4b378,_0xc6edf3){const _0x5d76b3=a4_0x2a9914;Object[_0x5d76b3(0x10d)](_0xd4b378,'default',{'enumerable':!![],'value':_0xc6edf3});}:function(_0x28f211,_0x53436e){const _0x2caa75=a4_0x2a9914;_0x28f211[_0x2caa75(0xed)]=_0x53436e;}),__importStar=this&&this['__importStar']||(function(){var _0x8a0307=function(_0xd20c6d){const _0x21d696=a4_0x1963;return _0x8a0307=Object[_0x21d696(0x109)]||function(_0x450489){const _0x232745=_0x21d696;var _0x31044f=[];for(var _0xe08a8b in _0x450489)if(Object[_0x232745(0xf1)][_0x232745(0xf8)][_0x232745(0xfb)](_0x450489,_0xe08a8b))_0x31044f[_0x31044f['length']]=_0xe08a8b;return _0x31044f;},_0x8a0307(_0xd20c6d);};return function(_0x17c675){const _0x5381e4=a4_0x1963;if(_0x17c675&&_0x17c675[_0x5381e4(0xe7)])return _0x17c675;var _0x315749={};if(_0x17c675!=null){for(var _0x5a7a27=_0x8a0307(_0x17c675),_0x5402be=0x0;_0x5402be<_0x5a7a27['length'];_0x5402be++)if(_0x5a7a27[_0x5402be]!==_0x5381e4(0xed))__createBinding(_0x315749,_0x17c675,_0x5a7a27[_0x5402be]);}return __setModuleDefault(_0x315749,_0x17c675),_0x315749;};}());Object['defineProperty'](exports,a4_0x2a9914(0xe7),{'value':!![]}),exports['AuthController']=void 0x0;const authService_1=require(a4_0x2a9914(0xf7)),tokenBlacklistService_1=require(a4_0x2a9914(0xef)),telegramBotService_1=require(a4_0x2a9914(0x10b));class AuthController{constructor(){const _0x496573=a4_0x2a9914;this[_0x496573(0xf4)]=async(_0x5d7490,_0x1d9dfd,_0x1173f7)=>{const _0x55b6aa=_0x496573;try{const _0x1dd261=_0x5d7490['body'],_0x4fac82=_0x1dd261['ipAddress']||_0x5d7490['ip']||_0x5d7490[_0x55b6aa(0xff)][_0x55b6aa(0xe2)]||'unknown',_0x5a4459=_0x1dd261[_0x55b6aa(0xdd)]||_0x5d7490[_0x55b6aa(0xeb)]('User-Agent')||_0x55b6aa(0x102),_0x24b068=_0x1dd261[_0x55b6aa(0xf9)];let _0x4c2c82=![],_0x59049a=null;try{const _0x184899=await this[_0x55b6aa(0xe9)][_0x55b6aa(0xf4)](_0x1dd261);_0x4c2c82=!![],_0x184899[_0x55b6aa(0xe0)]===_0x55b6aa(0xe3)&&_0x184899[_0x55b6aa(0xf6)]?.['id']&&(_0x59049a=_0x184899['user']['id']),_0x59049a&&await telegramBotService_1[_0x55b6aa(0x100)][_0x55b6aa(0x103)](_0x59049a,{'username':_0x1dd261['username'],'ipAddress':_0x4fac82,'userAgent':_0x5a4459,'geo':_0x24b068,'timestamp':new Date(),'success':!![]}),_0x1d9dfd[_0x55b6aa(0xe6)]({'success':!![],'result':_0x184899});}catch(_0x3deaad){try{const _0x12f869=(await Promise[_0x55b6aa(0x10a)]()['then'](()=>__importStar(require(_0x55b6aa(0xec)))))[_0x55b6aa(0xed)],_0x10d108=await _0x12f869[_0x55b6aa(0xe3)][_0x55b6aa(0xfd)]({'where':{'username':_0x1dd261[_0x55b6aa(0xf5)]},'select':{'id':!![]}});_0x10d108&&await telegramBotService_1[_0x55b6aa(0x100)]['sendLoginNotification'](_0x10d108['id'],{'username':_0x1dd261[_0x55b6aa(0xf5)],'ipAddress':_0x4fac82,'userAgent':_0x5a4459,'geo':_0x24b068,'timestamp':new Date(),'success':![]});}catch(_0x36d79b){console[_0x55b6aa(0x101)]('Failed\x20to\x20send\x20failed\x20login\x20notification:',_0x36d79b);}throw _0x3deaad;}}catch(_0x4b19b7){_0x1173f7(_0x4b19b7);}},this['me']=async(_0x2b5924,_0x33c235,_0xce6b1d)=>{const _0x31f78b=_0x496573;try{const _0x4cb2f8=_0x2b5924[_0x31f78b(0xf6)];_0x33c235[_0x31f78b(0xe6)]({'success':!![],'result':{'id':_0x4cb2f8?.['id'],'username':_0x4cb2f8?.[_0x31f78b(0xf5)],'role':_0x4cb2f8?.[_0x31f78b(0xe0)]}});}catch(_0x66a755){_0xce6b1d(_0x66a755);}},this[_0x496573(0x105)]=async(_0x208642,_0x454a02,_0x10d99c)=>{const _0x4de5ab=_0x496573;try{const _0x34ce4e=_0x208642['token'],_0x512835=_0x208642[_0x4de5ab(0xf6)];_0x34ce4e&&_0x512835?.[_0x4de5ab(0x108)]&&tokenBlacklistService_1[_0x4de5ab(0xe5)][_0x4de5ab(0x10e)](_0x34ce4e,_0x512835[_0x4de5ab(0x108)]),_0x454a02['json']({'success':!![],'message':_0x4de5ab(0xdf)});}catch(_0x5c7150){_0x10d99c(_0x5c7150);}},this[_0x496573(0xe8)]=async(_0x3c44ed,_0x506bb0,_0x509afe)=>{const _0x3d76bc=_0x496573;try{const _0x1a94f2=tokenBlacklistService_1[_0x3d76bc(0xe5)]['getStats']();_0x506bb0[_0x3d76bc(0xe6)]({'success':!![],'result':_0x1a94f2});}catch(_0xd827d8){_0x509afe(_0xd827d8);}},this[_0x496573(0xe9)]=new authService_1[(_0x496573(0xfa))]();}}exports[a4_0x2a9914(0x104)]=AuthController;