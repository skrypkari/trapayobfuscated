'use strict';const a4_0x3daf4f=a4_0x4d8b;(function(_0x1597a7,_0x288ccd){const _0x45e797=a4_0x4d8b,_0xc548e4=_0x1597a7();while(!![]){try{const _0x4d6ec9=-parseInt(_0x45e797(0xc0))/0x1+parseInt(_0x45e797(0xc6))/0x2*(parseInt(_0x45e797(0xc1))/0x3)+-parseInt(_0x45e797(0xbb))/0x4*(-parseInt(_0x45e797(0xd0))/0x5)+-parseInt(_0x45e797(0xba))/0x6+-parseInt(_0x45e797(0xd8))/0x7+-parseInt(_0x45e797(0xbe))/0x8+parseInt(_0x45e797(0xd6))/0x9;if(_0x4d6ec9===_0x288ccd)break;else _0xc548e4['push'](_0xc548e4['shift']());}catch(_0x3ad34f){_0xc548e4['push'](_0xc548e4['shift']());}}}(a4_0x47f3,0x38e3a));function a4_0x47f3(){const _0xc0e05c=['body','configurable','sendLoginNotification','../config/database','1860606lLudtH','192772DalfRK','role','length','3114112vROCLn','get','346182TzPYQG','14655hZmUqd','then','authService','__esModule','AuthController','50qgHHwg','blacklistToken','__importStar','user','remoteAddress','findUnique','resolve','create','login','../services/tokenBlacklistService','5XJMszV','prototype','exp','connection','call','AuthService','10625175MWMkGE','__setModuleDefault','506296rYhDfs','defineProperty','../services/telegramBotService','getOwnPropertyNames','json','unknown','tokenBlacklistService','logout','hasOwnProperty','default','shop','writable','../services/authService','username','User-Agent','getBlacklistStats'];a4_0x47f3=function(){return _0xc0e05c;};return a4_0x47f3();}var __createBinding=this&&this['__createBinding']||(Object['create']?function(_0x1d09c3,_0x38daaa,_0x426f2d,_0x11300f){const _0x581041=a4_0x4d8b;if(_0x11300f===undefined)_0x11300f=_0x426f2d;var _0x4254f8=Object['getOwnPropertyDescriptor'](_0x38daaa,_0x426f2d);(!_0x4254f8||('get'in _0x4254f8?!_0x38daaa[_0x581041(0xc4)]:_0x4254f8[_0x581041(0xb1)]||_0x4254f8[_0x581041(0xb7)]))&&(_0x4254f8={'enumerable':!![],'get':function(){return _0x38daaa[_0x426f2d];}}),Object['defineProperty'](_0x1d09c3,_0x11300f,_0x4254f8);}:function(_0x4a51df,_0x5d8057,_0x30c0a5,_0x1bb13b){if(_0x1bb13b===undefined)_0x1bb13b=_0x30c0a5;_0x4a51df[_0x1bb13b]=_0x5d8057[_0x30c0a5];}),__setModuleDefault=this&&this[a4_0x3daf4f(0xd7)]||(Object[a4_0x3daf4f(0xcd)]?function(_0x2dcc6f,_0x393b54){const _0x22c958=a4_0x3daf4f;Object[_0x22c958(0xd9)](_0x2dcc6f,_0x22c958(0xe1),{'enumerable':!![],'value':_0x393b54});}:function(_0x209019,_0xac8b30){const _0x1b7afd=a4_0x3daf4f;_0x209019[_0x1b7afd(0xe1)]=_0xac8b30;}),__importStar=this&&this[a4_0x3daf4f(0xc8)]||(function(){var _0x5836eb=function(_0x56e0a9){const _0x442bde=a4_0x4d8b;return _0x5836eb=Object[_0x442bde(0xdb)]||function(_0x50cfd0){const _0x3ad3bc=_0x442bde;var _0x361658=[];for(var _0xef59a3 in _0x50cfd0)if(Object[_0x3ad3bc(0xd1)][_0x3ad3bc(0xe0)][_0x3ad3bc(0xd4)](_0x50cfd0,_0xef59a3))_0x361658[_0x361658['length']]=_0xef59a3;return _0x361658;},_0x5836eb(_0x56e0a9);};return function(_0x295010){const _0x4fc039=a4_0x4d8b;if(_0x295010&&_0x295010[_0x4fc039(0xc4)])return _0x295010;var _0x5391fc={};if(_0x295010!=null){for(var _0x2ee992=_0x5836eb(_0x295010),_0xd7e054=0x0;_0xd7e054<_0x2ee992[_0x4fc039(0xbd)];_0xd7e054++)if(_0x2ee992[_0xd7e054]!==_0x4fc039(0xe1))__createBinding(_0x5391fc,_0x295010,_0x2ee992[_0xd7e054]);}return __setModuleDefault(_0x5391fc,_0x295010),_0x5391fc;};}());Object[a4_0x3daf4f(0xd9)](exports,a4_0x3daf4f(0xc4),{'value':!![]}),exports[a4_0x3daf4f(0xc5)]=void 0x0;const authService_1=require(a4_0x3daf4f(0xb2)),tokenBlacklistService_1=require(a4_0x3daf4f(0xcf)),telegramBotService_1=require(a4_0x3daf4f(0xda));function a4_0x4d8b(_0x179bc0,_0x3791ef){const _0x47f31d=a4_0x47f3();return a4_0x4d8b=function(_0x4d8b66,_0x5f3782){_0x4d8b66=_0x4d8b66-0xb1;let _0x35470f=_0x47f31d[_0x4d8b66];return _0x35470f;},a4_0x4d8b(_0x179bc0,_0x3791ef);}class AuthController{constructor(){const _0xb2e80c=a4_0x3daf4f;this[_0xb2e80c(0xce)]=async(_0x35ae74,_0x18f437,_0x1ec16f)=>{const _0x200578=_0xb2e80c;try{const _0x44627b=_0x35ae74[_0x200578(0xb6)],_0x48eea8=_0x35ae74['ip']||_0x35ae74[_0x200578(0xd3)][_0x200578(0xca)]||_0x200578(0xdd),_0x3ca608=_0x35ae74[_0x200578(0xbf)](_0x200578(0xb4))||_0x200578(0xdd);let _0x160bba=![],_0x355ac6=null;try{const _0x527203=await this[_0x200578(0xc3)][_0x200578(0xce)](_0x44627b);_0x160bba=!![],_0x527203['role']===_0x200578(0xe2)&&_0x527203[_0x200578(0xc9)]?.['id']&&(_0x355ac6=_0x527203[_0x200578(0xc9)]['id']),_0x355ac6&&await telegramBotService_1['telegramBotService'][_0x200578(0xb8)](_0x355ac6,{'username':_0x44627b[_0x200578(0xb3)],'ipAddress':_0x48eea8,'userAgent':_0x3ca608,'timestamp':new Date(),'success':!![]}),_0x18f437[_0x200578(0xdc)]({'success':!![],'result':_0x527203});}catch(_0x3142ae){try{const _0x1fd2cf=(await Promise[_0x200578(0xcc)]()[_0x200578(0xc2)](()=>__importStar(require(_0x200578(0xb9)))))['default'],_0x581fa4=await _0x1fd2cf[_0x200578(0xe2)][_0x200578(0xcb)]({'where':{'username':_0x44627b['username']},'select':{'id':!![]}});_0x581fa4&&await telegramBotService_1['telegramBotService'][_0x200578(0xb8)](_0x581fa4['id'],{'username':_0x44627b[_0x200578(0xb3)],'ipAddress':_0x48eea8,'userAgent':_0x3ca608,'timestamp':new Date(),'success':![]});}catch(_0x3bcabb){console['error']('Failed\x20to\x20send\x20failed\x20login\x20notification:',_0x3bcabb);}throw _0x3142ae;}}catch(_0x26b9f5){_0x1ec16f(_0x26b9f5);}},this['me']=async(_0x1b731e,_0x98d2a4,_0x34d9eb)=>{const _0x1dba2d=_0xb2e80c;try{const _0x23b6aa=_0x1b731e[_0x1dba2d(0xc9)];_0x98d2a4[_0x1dba2d(0xdc)]({'success':!![],'result':{'id':_0x23b6aa?.['id'],'username':_0x23b6aa?.[_0x1dba2d(0xb3)],'role':_0x23b6aa?.[_0x1dba2d(0xbc)]}});}catch(_0xc1ce4a){_0x34d9eb(_0xc1ce4a);}},this[_0xb2e80c(0xdf)]=async(_0x85a54a,_0x541b85,_0x17da47)=>{const _0x2ff2bf=_0xb2e80c;try{const _0x283fca=_0x85a54a['token'],_0x32644b=_0x85a54a['user'];_0x283fca&&_0x32644b?.['exp']&&tokenBlacklistService_1[_0x2ff2bf(0xde)][_0x2ff2bf(0xc7)](_0x283fca,_0x32644b[_0x2ff2bf(0xd2)]),_0x541b85['json']({'success':!![],'message':'Logged\x20out\x20successfully'});}catch(_0x5745f8){_0x17da47(_0x5745f8);}},this[_0xb2e80c(0xb5)]=async(_0x34839d,_0x499925,_0x498fb6)=>{const _0x5d778a=_0xb2e80c;try{const _0x54e31b=tokenBlacklistService_1[_0x5d778a(0xde)]['getStats']();_0x499925[_0x5d778a(0xdc)]({'success':!![],'result':_0x54e31b});}catch(_0xd3f5f7){_0x498fb6(_0xd3f5f7);}},this[_0xb2e80c(0xc3)]=new authService_1[(_0xb2e80c(0xd5))]();}}exports[a4_0x3daf4f(0xc5)]=AuthController;