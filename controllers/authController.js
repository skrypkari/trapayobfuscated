'use strict';function a4_0x10e1(_0x775ab4,_0x4766ba){const _0x5a5818=a4_0x5a58();return a4_0x10e1=function(_0x10e1fc,_0x624ecf){_0x10e1fc=_0x10e1fc-0x8f;let _0x2df092=_0x5a5818[_0x10e1fc];return _0x2df092;},a4_0x10e1(_0x775ab4,_0x4766ba);}const a4_0x50933f=a4_0x10e1;function a4_0x5a58(){const _0x2cfb3a=['3839OuJzFb','Failed\x20to\x20send\x20failed\x20login\x20notification:','tokenBlacklistService','getOwnPropertyNames','defineProperty','findUnique','default','create','error','json','106497XUMISk','sendLoginNotification','56063kNsAoU','__createBinding','4QxPyTa','1553202ToVlAe','Logged\x20out\x20successfully','telegramBotService','unknown','__setModuleDefault','length','getStats','remoteAddress','1019541LeQNLr','184QlRRTs','AuthController','call','getOwnPropertyDescriptor','resolve','shop','hasOwnProperty','login','getBlacklistStats','ipAddress','440555iBesPK','1747991SRNvqB','authService','user','exp','username','AuthService','configurable','role','../config/database','29550vFamGJ','6zjzwUw','../services/tokenBlacklistService','__importStar','__esModule'];a4_0x5a58=function(){return _0x2cfb3a;};return a4_0x5a58();}(function(_0xb7af1b,_0xb374a9){const _0x26aa71=a4_0x10e1,_0x1f6444=_0xb7af1b();while(!![]){try{const _0x5d47d8=parseInt(_0x26aa71(0x98))/0x1*(-parseInt(_0x26aa71(0xb9))/0x2)+parseInt(_0x26aa71(0xa3))/0x3*(-parseInt(_0x26aa71(0x9a))/0x4)+-parseInt(_0x26aa71(0xae))/0x5+parseInt(_0x26aa71(0x9b))/0x6+-parseInt(_0x26aa71(0xaf))/0x7+parseInt(_0x26aa71(0xa4))/0x8*(-parseInt(_0x26aa71(0x96))/0x9)+-parseInt(_0x26aa71(0xb8))/0xa*(-parseInt(_0x26aa71(0xbd))/0xb);if(_0x5d47d8===_0xb374a9)break;else _0x1f6444['push'](_0x1f6444['shift']());}catch(_0x10ac59){_0x1f6444['push'](_0x1f6444['shift']());}}}(a4_0x5a58,0x2a06f));var __createBinding=this&&this[a4_0x50933f(0x99)]||(Object[a4_0x50933f(0x93)]?function(_0x29f0f0,_0x517caf,_0x1d1796,_0x4fa9e8){const _0x76fc3f=a4_0x50933f;if(_0x4fa9e8===undefined)_0x4fa9e8=_0x1d1796;var _0x591ac9=Object[_0x76fc3f(0xa7)](_0x517caf,_0x1d1796);(!_0x591ac9||('get'in _0x591ac9?!_0x517caf[_0x76fc3f(0xbc)]:_0x591ac9['writable']||_0x591ac9[_0x76fc3f(0xb5)]))&&(_0x591ac9={'enumerable':!![],'get':function(){return _0x517caf[_0x1d1796];}}),Object[_0x76fc3f(0x90)](_0x29f0f0,_0x4fa9e8,_0x591ac9);}:function(_0x414b53,_0x37e6c9,_0x410414,_0x3219df){if(_0x3219df===undefined)_0x3219df=_0x410414;_0x414b53[_0x3219df]=_0x37e6c9[_0x410414];}),__setModuleDefault=this&&this[a4_0x50933f(0x9f)]||(Object[a4_0x50933f(0x93)]?function(_0x20e459,_0x469039){const _0x5c03b4=a4_0x50933f;Object[_0x5c03b4(0x90)](_0x20e459,_0x5c03b4(0x92),{'enumerable':!![],'value':_0x469039});}:function(_0x58981f,_0x58bd90){const _0x214fb2=a4_0x50933f;_0x58981f[_0x214fb2(0x92)]=_0x58bd90;}),__importStar=this&&this[a4_0x50933f(0xbb)]||(function(){var _0x5b5850=function(_0x464c48){const _0x4be7ba=a4_0x10e1;return _0x5b5850=Object[_0x4be7ba(0x8f)]||function(_0x2d02d6){const _0x25f470=_0x4be7ba;var _0x216a41=[];for(var _0x1b5ddf in _0x2d02d6)if(Object['prototype'][_0x25f470(0xaa)][_0x25f470(0xa6)](_0x2d02d6,_0x1b5ddf))_0x216a41[_0x216a41['length']]=_0x1b5ddf;return _0x216a41;},_0x5b5850(_0x464c48);};return function(_0x3588b4){const _0x2cded3=a4_0x10e1;if(_0x3588b4&&_0x3588b4[_0x2cded3(0xbc)])return _0x3588b4;var _0x29b607={};if(_0x3588b4!=null){for(var _0x371679=_0x5b5850(_0x3588b4),_0x7541fd=0x0;_0x7541fd<_0x371679[_0x2cded3(0xa0)];_0x7541fd++)if(_0x371679[_0x7541fd]!==_0x2cded3(0x92))__createBinding(_0x29b607,_0x3588b4,_0x371679[_0x7541fd]);}return __setModuleDefault(_0x29b607,_0x3588b4),_0x29b607;};}());Object[a4_0x50933f(0x90)](exports,a4_0x50933f(0xbc),{'value':!![]}),exports['AuthController']=void 0x0;const authService_1=require('../services/authService'),tokenBlacklistService_1=require(a4_0x50933f(0xba)),telegramBotService_1=require('../services/telegramBotService');class AuthController{constructor(){const _0xe3b29e=a4_0x50933f;this['login']=async(_0x1cd438,_0x56ccde,_0x540d09)=>{const _0x7e95f8=a4_0x10e1;try{const _0x55827c=_0x1cd438['body'],_0x5385e3=_0x55827c[_0x7e95f8(0xad)]||_0x1cd438['ip']||_0x1cd438['connection'][_0x7e95f8(0xa2)]||_0x7e95f8(0x9e),_0x1d33aa=_0x55827c['userAgent']||_0x1cd438['get']('User-Agent')||_0x7e95f8(0x9e),_0x391907=_0x55827c['geo'];let _0x2bb941=![],_0xe2b48f=null;try{const _0x44ecb2=await this[_0x7e95f8(0xb0)][_0x7e95f8(0xab)](_0x55827c);_0x2bb941=!![],_0x44ecb2['role']===_0x7e95f8(0xa9)&&_0x44ecb2['user']?.['id']&&(_0xe2b48f=_0x44ecb2[_0x7e95f8(0xb1)]['id']),_0xe2b48f&&await telegramBotService_1[_0x7e95f8(0x9d)][_0x7e95f8(0x97)](_0xe2b48f,{'username':_0x55827c[_0x7e95f8(0xb3)],'ipAddress':_0x5385e3,'userAgent':_0x1d33aa,'geo':_0x391907,'timestamp':new Date(),'success':!![]}),_0x56ccde['json']({'success':!![],'result':_0x44ecb2});}catch(_0x3c7dc3){try{const _0x1ae4cd=(await Promise[_0x7e95f8(0xa8)]()['then'](()=>__importStar(require(_0x7e95f8(0xb7)))))['default'],_0x513fb2=await _0x1ae4cd[_0x7e95f8(0xa9)][_0x7e95f8(0x91)]({'where':{'username':_0x55827c['username']},'select':{'id':!![]}});_0x513fb2&&await telegramBotService_1[_0x7e95f8(0x9d)]['sendLoginNotification'](_0x513fb2['id'],{'username':_0x55827c[_0x7e95f8(0xb3)],'ipAddress':_0x5385e3,'userAgent':_0x1d33aa,'geo':_0x391907,'timestamp':new Date(),'success':![]});}catch(_0x26b435){console[_0x7e95f8(0x94)](_0x7e95f8(0xbe),_0x26b435);}throw _0x3c7dc3;}}catch(_0x162f5c){_0x540d09(_0x162f5c);}},this['me']=async(_0x362c97,_0x57a9ee,_0x1fa5b3)=>{const _0x4a2b98=a4_0x10e1;try{const _0x1e6df1=_0x362c97['user'];_0x57a9ee[_0x4a2b98(0x95)]({'success':!![],'result':{'id':_0x1e6df1?.['id'],'username':_0x1e6df1?.[_0x4a2b98(0xb3)],'role':_0x1e6df1?.[_0x4a2b98(0xb6)]}});}catch(_0x2b1cc2){_0x1fa5b3(_0x2b1cc2);}},this['logout']=async(_0x277ba5,_0x1c89e3,_0x5ea9d9)=>{const _0x6a2b8f=a4_0x10e1;try{const _0x320e25=_0x277ba5['token'],_0x2f15b8=_0x277ba5[_0x6a2b8f(0xb1)];_0x320e25&&_0x2f15b8?.[_0x6a2b8f(0xb2)]&&tokenBlacklistService_1[_0x6a2b8f(0xbf)]['blacklistToken'](_0x320e25,_0x2f15b8['exp']),_0x1c89e3[_0x6a2b8f(0x95)]({'success':!![],'message':_0x6a2b8f(0x9c)});}catch(_0x32cb32){_0x5ea9d9(_0x32cb32);}},this[_0xe3b29e(0xac)]=async(_0x4a53d5,_0x336a7a,_0x2ae338)=>{const _0x6bd0ae=_0xe3b29e;try{const _0x5b6917=tokenBlacklistService_1[_0x6bd0ae(0xbf)][_0x6bd0ae(0xa1)]();_0x336a7a[_0x6bd0ae(0x95)]({'success':!![],'result':_0x5b6917});}catch(_0x44bc7f){_0x2ae338(_0x44bc7f);}},this['authService']=new authService_1[(_0xe3b29e(0xb4))]();}}exports[a4_0x50933f(0xa5)]=AuthController;