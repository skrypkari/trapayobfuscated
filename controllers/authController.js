'use strict';const a4_0x36ae7b=a4_0x1892;(function(_0x329ad4,_0x27028e){const _0x4f4532=a4_0x1892,_0x12a867=_0x329ad4();while(!![]){try{const _0x57ad9b=parseInt(_0x4f4532(0xa4))/0x1+-parseInt(_0x4f4532(0xae))/0x2+parseInt(_0x4f4532(0xa2))/0x3*(-parseInt(_0x4f4532(0x94))/0x4)+parseInt(_0x4f4532(0x89))/0x5*(parseInt(_0x4f4532(0x97))/0x6)+parseInt(_0x4f4532(0x9f))/0x7+-parseInt(_0x4f4532(0x8c))/0x8+-parseInt(_0x4f4532(0xac))/0x9;if(_0x57ad9b===_0x27028e)break;else _0x12a867['push'](_0x12a867['shift']());}catch(_0x49dfff){_0x12a867['push'](_0x12a867['shift']());}}}(a4_0x5951,0x73f25));var __createBinding=this&&this[a4_0x36ae7b(0x82)]||(Object[a4_0x36ae7b(0x87)]?function(_0x21e543,_0x411c6c,_0x18c999,_0x400fe3){const _0x299017=a4_0x36ae7b;if(_0x400fe3===undefined)_0x400fe3=_0x18c999;var _0x1492ab=Object[_0x299017(0x8e)](_0x411c6c,_0x18c999);(!_0x1492ab||(_0x299017(0x8f)in _0x1492ab?!_0x411c6c['__esModule']:_0x1492ab['writable']||_0x1492ab['configurable']))&&(_0x1492ab={'enumerable':!![],'get':function(){return _0x411c6c[_0x18c999];}}),Object[_0x299017(0x86)](_0x21e543,_0x400fe3,_0x1492ab);}:function(_0xf5d83,_0x387f8c,_0x187d4e,_0xe82dc4){if(_0xe82dc4===undefined)_0xe82dc4=_0x187d4e;_0xf5d83[_0xe82dc4]=_0x387f8c[_0x187d4e];}),__setModuleDefault=this&&this[a4_0x36ae7b(0x85)]||(Object['create']?function(_0x174c8d,_0x15b2b5){const _0x16dbed=a4_0x36ae7b;Object[_0x16dbed(0x86)](_0x174c8d,_0x16dbed(0x83),{'enumerable':!![],'value':_0x15b2b5});}:function(_0x30c83b,_0x5e3846){const _0x232027=a4_0x36ae7b;_0x30c83b[_0x232027(0x83)]=_0x5e3846;}),__importStar=this&&this[a4_0x36ae7b(0x98)]||(function(){var _0x1f1a31=function(_0x249f69){return _0x1f1a31=Object['getOwnPropertyNames']||function(_0x47d87a){const _0x20875f=a4_0x1892;var _0x49ff2c=[];for(var _0x488d87 in _0x47d87a)if(Object[_0x20875f(0xa1)][_0x20875f(0x88)][_0x20875f(0x96)](_0x47d87a,_0x488d87))_0x49ff2c[_0x49ff2c[_0x20875f(0xa3)]]=_0x488d87;return _0x49ff2c;},_0x1f1a31(_0x249f69);};return function(_0x384ee5){const _0x55f6eb=a4_0x1892;if(_0x384ee5&&_0x384ee5[_0x55f6eb(0x9e)])return _0x384ee5;var _0x216a65={};if(_0x384ee5!=null){for(var _0x2ce3f3=_0x1f1a31(_0x384ee5),_0x1bdfda=0x0;_0x1bdfda<_0x2ce3f3[_0x55f6eb(0xa3)];_0x1bdfda++)if(_0x2ce3f3[_0x1bdfda]!==_0x55f6eb(0x83))__createBinding(_0x216a65,_0x384ee5,_0x2ce3f3[_0x1bdfda]);}return __setModuleDefault(_0x216a65,_0x384ee5),_0x216a65;};}());function a4_0x5951(){const _0x2e2550=['defineProperty','create','hasOwnProperty','5tCqXft','findUnique','remoteAddress','1230560iwFrAL','getBlacklistStats','getOwnPropertyDescriptor','get','unknown','connection','sendLoginNotification','AuthController','8FBeMOI','username','call','2986068UGTvPk','__importStar','blacklistToken','role','logout','tokenBlacklistService','token','__esModule','4297510wtIqJJ','authService','prototype','786282Whgums','length','871444ptcMwi','Logged\x20out\x20successfully','../services/tokenBlacklistService','Failed\x20to\x20send\x20failed\x20login\x20notification:','exp','AuthService','json','getStats','4497219LUiFnK','../services/authService','660872mnBFxy','../config/database','telegramBotService','error','shop','User-Agent','__createBinding','default','user','__setModuleDefault'];a4_0x5951=function(){return _0x2e2550;};return a4_0x5951();}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a4_0x36ae7b(0x93)]=void 0x0;const authService_1=require(a4_0x36ae7b(0xad)),tokenBlacklistService_1=require(a4_0x36ae7b(0xa6)),telegramBotService_1=require('../services/telegramBotService');function a4_0x1892(_0x3cac3a,_0x2676a2){const _0x595176=a4_0x5951();return a4_0x1892=function(_0x1892a4,_0xecc20c){_0x1892a4=_0x1892a4-0x7e;let _0x20d98a=_0x595176[_0x1892a4];return _0x20d98a;},a4_0x1892(_0x3cac3a,_0x2676a2);}class AuthController{constructor(){const _0x4349fd=a4_0x36ae7b;this['login']=async(_0x8fcc15,_0x54adde,_0x1fa162)=>{const _0x14d80=a4_0x1892;try{const _0x5dbacc=_0x8fcc15['body'],_0x1afb66=_0x8fcc15['ip']||_0x8fcc15[_0x14d80(0x91)][_0x14d80(0x8b)]||'unknown',_0x44375f=_0x8fcc15['get'](_0x14d80(0x81))||_0x14d80(0x90);let _0x178389=![],_0x12054c=null;try{const _0x43f5e3=await this[_0x14d80(0xa0)]['login'](_0x5dbacc);_0x178389=!![],_0x43f5e3[_0x14d80(0x9a)]===_0x14d80(0x80)&&_0x43f5e3[_0x14d80(0x84)]?.['id']&&(_0x12054c=_0x43f5e3['user']['id']),_0x12054c&&await telegramBotService_1['telegramBotService'][_0x14d80(0x92)](_0x12054c,{'username':_0x5dbacc[_0x14d80(0x95)],'ipAddress':_0x1afb66,'userAgent':_0x44375f,'timestamp':new Date(),'success':!![]}),_0x54adde[_0x14d80(0xaa)]({'success':!![],'result':_0x43f5e3});}catch(_0xb928b9){try{const _0x3e5326=(await Promise['resolve']()['then'](()=>__importStar(require(_0x14d80(0xaf)))))[_0x14d80(0x83)],_0x2b3bf1=await _0x3e5326[_0x14d80(0x80)][_0x14d80(0x8a)]({'where':{'username':_0x5dbacc[_0x14d80(0x95)]},'select':{'id':!![]}});_0x2b3bf1&&await telegramBotService_1[_0x14d80(0x7e)][_0x14d80(0x92)](_0x2b3bf1['id'],{'username':_0x5dbacc['username'],'ipAddress':_0x1afb66,'userAgent':_0x44375f,'timestamp':new Date(),'success':![]});}catch(_0xb456b4){console[_0x14d80(0x7f)](_0x14d80(0xa7),_0xb456b4);}throw _0xb928b9;}}catch(_0x49a665){_0x1fa162(_0x49a665);}},this['me']=async(_0x2f2793,_0x2b1e75,_0x2f17f1)=>{const _0x4cf895=a4_0x1892;try{const _0x5159dd=_0x2f2793[_0x4cf895(0x84)];_0x2b1e75[_0x4cf895(0xaa)]({'success':!![],'result':{'id':_0x5159dd?.['id'],'username':_0x5159dd?.[_0x4cf895(0x95)],'role':_0x5159dd?.[_0x4cf895(0x9a)]}});}catch(_0x40f39a){_0x2f17f1(_0x40f39a);}},this[_0x4349fd(0x9b)]=async(_0x39b4c2,_0x2cba06,_0x55663b)=>{const _0x318d3e=_0x4349fd;try{const _0x205207=_0x39b4c2[_0x318d3e(0x9d)],_0x3cff0f=_0x39b4c2[_0x318d3e(0x84)];_0x205207&&_0x3cff0f?.['exp']&&tokenBlacklistService_1['tokenBlacklistService'][_0x318d3e(0x99)](_0x205207,_0x3cff0f[_0x318d3e(0xa8)]),_0x2cba06[_0x318d3e(0xaa)]({'success':!![],'message':_0x318d3e(0xa5)});}catch(_0x531cec){_0x55663b(_0x531cec);}},this[_0x4349fd(0x8d)]=async(_0x2cff4a,_0x27346b,_0x23ac8d)=>{const _0x7c975d=_0x4349fd;try{const _0x5c4cb4=tokenBlacklistService_1[_0x7c975d(0x9c)][_0x7c975d(0xab)]();_0x27346b[_0x7c975d(0xaa)]({'success':!![],'result':_0x5c4cb4});}catch(_0x3881be){_0x23ac8d(_0x3881be);}},this[_0x4349fd(0xa0)]=new authService_1[(_0x4349fd(0xa9))]();}}exports[a4_0x36ae7b(0x93)]=AuthController;