'use strict';const a4_0x485e7c=a4_0x1e7e;(function(_0xe2698,_0x3c823d){const _0x5cfc38=a4_0x1e7e,_0x53811c=_0xe2698();while(!![]){try{const _0x149cf7=parseInt(_0x5cfc38(0x205))/0x1+-parseInt(_0x5cfc38(0x1f2))/0x2+-parseInt(_0x5cfc38(0x219))/0x3+-parseInt(_0x5cfc38(0x20a))/0x4*(parseInt(_0x5cfc38(0x210))/0x5)+parseInt(_0x5cfc38(0x214))/0x6+parseInt(_0x5cfc38(0x209))/0x7+parseInt(_0x5cfc38(0x1f6))/0x8;if(_0x149cf7===_0x3c823d)break;else _0x53811c['push'](_0x53811c['shift']());}catch(_0x4c0087){_0x53811c['push'](_0x53811c['shift']());}}}(a4_0x3011,0xb76d8));var __createBinding=this&&this[a4_0x485e7c(0x20e)]||(Object[a4_0x485e7c(0x1f7)]?function(_0x1eaf3c,_0x1d38fb,_0x3076f3,_0x566ee1){const _0x1b84a5=a4_0x485e7c;if(_0x566ee1===undefined)_0x566ee1=_0x3076f3;var _0x3c5e93=Object['getOwnPropertyDescriptor'](_0x1d38fb,_0x3076f3);(!_0x3c5e93||(_0x1b84a5(0x20b)in _0x3c5e93?!_0x1d38fb[_0x1b84a5(0x1ff)]:_0x3c5e93[_0x1b84a5(0x21b)]||_0x3c5e93[_0x1b84a5(0x21a)]))&&(_0x3c5e93={'enumerable':!![],'get':function(){return _0x1d38fb[_0x3076f3];}}),Object[_0x1b84a5(0x204)](_0x1eaf3c,_0x566ee1,_0x3c5e93);}:function(_0xd2574,_0x1b425f,_0x5d540d,_0x2750ec){if(_0x2750ec===undefined)_0x2750ec=_0x5d540d;_0xd2574[_0x2750ec]=_0x1b425f[_0x5d540d];}),__setModuleDefault=this&&this[a4_0x485e7c(0x215)]||(Object['create']?function(_0x4fc62f,_0x5ddea0){const _0x47d080=a4_0x485e7c;Object[_0x47d080(0x204)](_0x4fc62f,'default',{'enumerable':!![],'value':_0x5ddea0});}:function(_0x488d7b,_0x37cbdd){const _0x49bcfd=a4_0x485e7c;_0x488d7b[_0x49bcfd(0x1fb)]=_0x37cbdd;}),__importStar=this&&this[a4_0x485e7c(0x1f9)]||(function(){var _0x187ac2=function(_0x260186){return _0x187ac2=Object['getOwnPropertyNames']||function(_0x4b92b5){const _0x25249d=a4_0x1e7e;var _0x5260c6=[];for(var _0x5cab56 in _0x4b92b5)if(Object[_0x25249d(0x1fa)][_0x25249d(0x207)][_0x25249d(0x1f1)](_0x4b92b5,_0x5cab56))_0x5260c6[_0x5260c6[_0x25249d(0x1ef)]]=_0x5cab56;return _0x5260c6;},_0x187ac2(_0x260186);};return function(_0x5b7b1c){const _0x128525=a4_0x1e7e;if(_0x5b7b1c&&_0x5b7b1c[_0x128525(0x1ff)])return _0x5b7b1c;var _0x5e725d={};if(_0x5b7b1c!=null){for(var _0x232f63=_0x187ac2(_0x5b7b1c),_0x1a0e68=0x0;_0x1a0e68<_0x232f63[_0x128525(0x1ef)];_0x1a0e68++)if(_0x232f63[_0x1a0e68]!==_0x128525(0x1fb))__createBinding(_0x5e725d,_0x5b7b1c,_0x232f63[_0x1a0e68]);}return __setModuleDefault(_0x5e725d,_0x5b7b1c),_0x5e725d;};}());function a4_0x3011(){const _0xd71aaf=['blacklistToken','call','1357028gTduBn','findUnique','login','user','697224iQpOLy','create','AuthService','__importStar','prototype','default','authService','username','unknown','__esModule','logout','Failed\x20to\x20send\x20failed\x20login\x20notification:','exp','remoteAddress','defineProperty','1240729PHxcoj','../services/tokenBlacklistService','hasOwnProperty','body','3110415quQVZU','4252252FfWukD','get','AuthController','shop','__createBinding','../config/database','5CMHtYt','role','getBlacklistStats','tokenBlacklistService','9006606OVYMqZ','__setModuleDefault','User-Agent','../services/authService','getStats','2341293OzGPmM','configurable','writable','sendLoginNotification','json','length'];a4_0x3011=function(){return _0xd71aaf;};return a4_0x3011();}Object[a4_0x485e7c(0x204)](exports,a4_0x485e7c(0x1ff),{'value':!![]}),exports['AuthController']=void 0x0;function a4_0x1e7e(_0x114236,_0x47ad7c){const _0x30114a=a4_0x3011();return a4_0x1e7e=function(_0x1e7ec4,_0x530d66){_0x1e7ec4=_0x1e7ec4-0x1ed;let _0x19c72c=_0x30114a[_0x1e7ec4];return _0x19c72c;},a4_0x1e7e(_0x114236,_0x47ad7c);}const authService_1=require(a4_0x485e7c(0x217)),tokenBlacklistService_1=require(a4_0x485e7c(0x206)),telegramBotService_1=require('../services/telegramBotService');class AuthController{constructor(){const _0x3b9372=a4_0x485e7c;this[_0x3b9372(0x1f4)]=async(_0x279f15,_0x1609b2,_0x117dc7)=>{const _0x2f5796=_0x3b9372;try{const _0x239187=_0x279f15[_0x2f5796(0x208)],_0x4896e7=_0x279f15['ip']||_0x279f15['connection'][_0x2f5796(0x203)]||_0x2f5796(0x1fe),_0x541b2f=_0x279f15[_0x2f5796(0x20b)](_0x2f5796(0x216))||_0x2f5796(0x1fe);let _0xefbc4c=![],_0x169508=null;try{const _0x22e0e7=await this[_0x2f5796(0x1fc)]['login'](_0x239187);_0xefbc4c=!![],_0x22e0e7[_0x2f5796(0x211)]===_0x2f5796(0x20d)&&_0x22e0e7[_0x2f5796(0x1f5)]?.['id']&&(_0x169508=_0x22e0e7[_0x2f5796(0x1f5)]['id']),_0x169508&&await telegramBotService_1['telegramBotService'][_0x2f5796(0x1ed)](_0x169508,{'username':_0x239187['username'],'ipAddress':_0x4896e7,'userAgent':_0x541b2f,'timestamp':new Date(),'success':!![]}),_0x1609b2[_0x2f5796(0x1ee)]({'success':!![],'result':_0x22e0e7});}catch(_0x48d557){try{const _0x1e8cdd=(await Promise['resolve']()['then'](()=>__importStar(require(_0x2f5796(0x20f)))))['default'],_0x372076=await _0x1e8cdd[_0x2f5796(0x20d)][_0x2f5796(0x1f3)]({'where':{'username':_0x239187['username']},'select':{'id':!![]}});_0x372076&&await telegramBotService_1['telegramBotService']['sendLoginNotification'](_0x372076['id'],{'username':_0x239187[_0x2f5796(0x1fd)],'ipAddress':_0x4896e7,'userAgent':_0x541b2f,'timestamp':new Date(),'success':![]});}catch(_0x34bb4c){console['error'](_0x2f5796(0x201),_0x34bb4c);}throw _0x48d557;}}catch(_0x561e60){_0x117dc7(_0x561e60);}},this['me']=async(_0x46b81f,_0x433d2c,_0x38f8d4)=>{const _0x162082=_0x3b9372;try{const _0x257169=_0x46b81f['user'];_0x433d2c[_0x162082(0x1ee)]({'success':!![],'result':{'id':_0x257169?.['id'],'username':_0x257169?.[_0x162082(0x1fd)],'role':_0x257169?.['role']}});}catch(_0x59ec7c){_0x38f8d4(_0x59ec7c);}},this[_0x3b9372(0x200)]=async(_0xce71bd,_0x5b56a7,_0x9108dd)=>{const _0x24daa9=_0x3b9372;try{const _0x4dcf0d=_0xce71bd['token'],_0x2f3646=_0xce71bd[_0x24daa9(0x1f5)];_0x4dcf0d&&_0x2f3646?.['exp']&&tokenBlacklistService_1['tokenBlacklistService'][_0x24daa9(0x1f0)](_0x4dcf0d,_0x2f3646[_0x24daa9(0x202)]),_0x5b56a7['json']({'success':!![],'message':'Logged\x20out\x20successfully'});}catch(_0x1fd977){_0x9108dd(_0x1fd977);}},this[_0x3b9372(0x212)]=async(_0x4baca3,_0x402556,_0x2847ae)=>{const _0x20be42=_0x3b9372;try{const _0x1fcc0=tokenBlacklistService_1[_0x20be42(0x213)][_0x20be42(0x218)]();_0x402556[_0x20be42(0x1ee)]({'success':!![],'result':_0x1fcc0});}catch(_0x5bde56){_0x2847ae(_0x5bde56);}},this[_0x3b9372(0x1fc)]=new authService_1[(_0x3b9372(0x1f8))]();}}exports[a4_0x485e7c(0x20c)]=AuthController;