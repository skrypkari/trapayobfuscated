'use strict';const a4_0x3d0a44=a4_0x1910;(function(_0x542afe,_0x5810bc){const _0x3aea94=a4_0x1910,_0x432c17=_0x542afe();while(!![]){try{const _0x4f76f0=-parseInt(_0x3aea94(0x1cc))/0x1+-parseInt(_0x3aea94(0x1bd))/0x2*(-parseInt(_0x3aea94(0x1b7))/0x3)+parseInt(_0x3aea94(0x1b9))/0x4*(parseInt(_0x3aea94(0x1d0))/0x5)+-parseInt(_0x3aea94(0x1dc))/0x6+-parseInt(_0x3aea94(0x1d9))/0x7*(parseInt(_0x3aea94(0x1d6))/0x8)+-parseInt(_0x3aea94(0x1c6))/0x9+parseInt(_0x3aea94(0x1dd))/0xa*(parseInt(_0x3aea94(0x1d3))/0xb);if(_0x4f76f0===_0x5810bc)break;else _0x432c17['push'](_0x432c17['shift']());}catch(_0x89b9b5){_0x432c17['push'](_0x432c17['shift']());}}}(a4_0xdb2c,0xd2e13));var __createBinding=this&&this[a4_0x3d0a44(0x1b6)]||(Object[a4_0x3d0a44(0x1b2)]?function(_0x4fd5e8,_0xd3d43,_0x1f77a4,_0x183aa3){const _0x5869cd=a4_0x3d0a44;if(_0x183aa3===undefined)_0x183aa3=_0x1f77a4;var _0xddb0f2=Object[_0x5869cd(0x1c2)](_0xd3d43,_0x1f77a4);(!_0xddb0f2||(_0x5869cd(0x1b1)in _0xddb0f2?!_0xd3d43[_0x5869cd(0x1c5)]:_0xddb0f2[_0x5869cd(0x1ae)]||_0xddb0f2[_0x5869cd(0x1bf)]))&&(_0xddb0f2={'enumerable':!![],'get':function(){return _0xd3d43[_0x1f77a4];}}),Object[_0x5869cd(0x1b3)](_0x4fd5e8,_0x183aa3,_0xddb0f2);}:function(_0x3bf4f2,_0x13132e,_0x1aa6fe,_0x3c5be5){if(_0x3c5be5===undefined)_0x3c5be5=_0x1aa6fe;_0x3bf4f2[_0x3c5be5]=_0x13132e[_0x1aa6fe];}),__setModuleDefault=this&&this[a4_0x3d0a44(0x1af)]||(Object[a4_0x3d0a44(0x1b2)]?function(_0x523430,_0x3198dc){const _0x31663b=a4_0x3d0a44;Object['defineProperty'](_0x523430,_0x31663b(0x1d4),{'enumerable':!![],'value':_0x3198dc});}:function(_0x49959e,_0x46e102){const _0x31f1e0=a4_0x3d0a44;_0x49959e[_0x31f1e0(0x1d4)]=_0x46e102;}),__importStar=this&&this['__importStar']||(function(){var _0x3fc027=function(_0x581c5a){return _0x3fc027=Object['getOwnPropertyNames']||function(_0x29ec09){const _0x14995e=a4_0x1910;var _0x4f7ad5=[];for(var _0x13028c in _0x29ec09)if(Object['prototype']['hasOwnProperty'][_0x14995e(0x1d1)](_0x29ec09,_0x13028c))_0x4f7ad5[_0x4f7ad5['length']]=_0x13028c;return _0x4f7ad5;},_0x3fc027(_0x581c5a);};return function(_0x402a8f){const _0x548cf4=a4_0x1910;if(_0x402a8f&&_0x402a8f['__esModule'])return _0x402a8f;var _0x31cf80={};if(_0x402a8f!=null){for(var _0x23278f=_0x3fc027(_0x402a8f),_0x124fbe=0x0;_0x124fbe<_0x23278f['length'];_0x124fbe++)if(_0x23278f[_0x124fbe]!==_0x548cf4(0x1d4))__createBinding(_0x31cf80,_0x402a8f,_0x23278f[_0x124fbe]);}return __setModuleDefault(_0x31cf80,_0x402a8f),_0x31cf80;};}());Object[a4_0x3d0a44(0x1b3)](exports,a4_0x3d0a44(0x1c5),{'value':!![]}),exports['AuthController']=void 0x0;const authService_1=require(a4_0x3d0a44(0x1ba)),tokenBlacklistService_1=require(a4_0x3d0a44(0x1c3)),telegramBotService_1=require(a4_0x3d0a44(0x1cb));function a4_0xdb2c(){const _0x29bbcb=['User-Agent','1050028aKnCvJ','../services/authService','blacklistToken','then','682hbcyls','connection','configurable','remoteAddress','logout','getOwnPropertyDescriptor','../services/tokenBlacklistService','user','__esModule','5097834TgiYoH','AuthController','body','role','Logged\x20out\x20successfully','../services/telegramBotService','1499593kYTpgP','username','tokenBlacklistService','telegramBotService','15LkEINU','call','unknown','11wLmBSI','default','findUnique','3016224HFpqFX','AuthService','Failed\x20to\x20send\x20failed\x20login\x20notification:','14NKnEsu','token','shop','6156144IPtRzO','34521020hUkzWQ','login','sendLoginNotification','writable','__setModuleDefault','exp','get','create','defineProperty','error','json','__createBinding','4137bGNWPT'];a4_0xdb2c=function(){return _0x29bbcb;};return a4_0xdb2c();}class AuthController{constructor(){const _0x359ebb=a4_0x3d0a44;this[_0x359ebb(0x1de)]=async(_0x4d173d,_0x13390d,_0xec4e51)=>{const _0x3ecb82=_0x359ebb;try{const _0x15a806=_0x4d173d[_0x3ecb82(0x1c8)],_0x224281=_0x4d173d['ip']||_0x4d173d[_0x3ecb82(0x1be)][_0x3ecb82(0x1c0)]||_0x3ecb82(0x1d2),_0x424081=_0x4d173d[_0x3ecb82(0x1b1)](_0x3ecb82(0x1b8))||_0x3ecb82(0x1d2);let _0x4d2781=![],_0x25583c=null;try{const _0x3f3991=await this['authService'][_0x3ecb82(0x1de)](_0x15a806);_0x4d2781=!![],_0x3f3991[_0x3ecb82(0x1c9)]===_0x3ecb82(0x1db)&&_0x3f3991[_0x3ecb82(0x1c4)]?.['id']&&(_0x25583c=_0x3f3991[_0x3ecb82(0x1c4)]['id']),_0x25583c&&await telegramBotService_1[_0x3ecb82(0x1cf)][_0x3ecb82(0x1ad)](_0x25583c,{'username':_0x15a806[_0x3ecb82(0x1cd)],'ipAddress':_0x224281,'userAgent':_0x424081,'timestamp':new Date(),'success':!![]}),_0x13390d[_0x3ecb82(0x1b5)]({'success':!![],'result':_0x3f3991});}catch(_0x98a38b){try{const _0x46f921=(await Promise['resolve']()[_0x3ecb82(0x1bc)](()=>__importStar(require('../config/database'))))['default'],_0xfc937e=await _0x46f921['shop'][_0x3ecb82(0x1d5)]({'where':{'username':_0x15a806[_0x3ecb82(0x1cd)]},'select':{'id':!![]}});_0xfc937e&&await telegramBotService_1[_0x3ecb82(0x1cf)][_0x3ecb82(0x1ad)](_0xfc937e['id'],{'username':_0x15a806['username'],'ipAddress':_0x224281,'userAgent':_0x424081,'timestamp':new Date(),'success':![]});}catch(_0x24356e){console[_0x3ecb82(0x1b4)](_0x3ecb82(0x1d8),_0x24356e);}throw _0x98a38b;}}catch(_0x543e8a){_0xec4e51(_0x543e8a);}},this['me']=async(_0x25a841,_0x490df4,_0x326a7b)=>{const _0x16e10a=_0x359ebb;try{const _0xb8b2d3=_0x25a841['user'];_0x490df4[_0x16e10a(0x1b5)]({'success':!![],'result':{'id':_0xb8b2d3?.['id'],'username':_0xb8b2d3?.[_0x16e10a(0x1cd)],'role':_0xb8b2d3?.[_0x16e10a(0x1c9)]}});}catch(_0x289e4c){_0x326a7b(_0x289e4c);}},this[_0x359ebb(0x1c1)]=async(_0xc2bf48,_0x101546,_0x49fc5a)=>{const _0x182160=_0x359ebb;try{const _0x169a5a=_0xc2bf48[_0x182160(0x1da)],_0x43de57=_0xc2bf48[_0x182160(0x1c4)];_0x169a5a&&_0x43de57?.['exp']&&tokenBlacklistService_1[_0x182160(0x1ce)][_0x182160(0x1bb)](_0x169a5a,_0x43de57[_0x182160(0x1b0)]),_0x101546[_0x182160(0x1b5)]({'success':!![],'message':_0x182160(0x1ca)});}catch(_0x112286){_0x49fc5a(_0x112286);}},this['getBlacklistStats']=async(_0x556393,_0x45cdc7,_0x13264f)=>{const _0x26ca85=_0x359ebb;try{const _0x33bfb5=tokenBlacklistService_1['tokenBlacklistService']['getStats']();_0x45cdc7[_0x26ca85(0x1b5)]({'success':!![],'result':_0x33bfb5});}catch(_0x5506aa){_0x13264f(_0x5506aa);}},this['authService']=new authService_1[(_0x359ebb(0x1d7))]();}}function a4_0x1910(_0xec3502,_0x42d806){const _0xdb2c80=a4_0xdb2c();return a4_0x1910=function(_0x1910ee,_0xaf96bb){_0x1910ee=_0x1910ee-0x1ad;let _0x195038=_0xdb2c80[_0x1910ee];return _0x195038;},a4_0x1910(_0xec3502,_0x42d806);}exports[a4_0x3d0a44(0x1c7)]=AuthController;