'use strict';const a4_0x19ef90=a4_0x5817;(function(_0x268d73,_0x779133){const _0x7cf624=a4_0x5817,_0x15dc3d=_0x268d73();while(!![]){try{const _0x4c8f15=-parseInt(_0x7cf624(0x1d5))/0x1*(parseInt(_0x7cf624(0x1c0))/0x2)+-parseInt(_0x7cf624(0x1da))/0x3+parseInt(_0x7cf624(0x1c8))/0x4*(-parseInt(_0x7cf624(0x1ce))/0x5)+parseInt(_0x7cf624(0x1d9))/0x6+-parseInt(_0x7cf624(0x1db))/0x7+-parseInt(_0x7cf624(0x1e2))/0x8+-parseInt(_0x7cf624(0x1bf))/0x9*(-parseInt(_0x7cf624(0x1c7))/0xa);if(_0x4c8f15===_0x779133)break;else _0x15dc3d['push'](_0x15dc3d['shift']());}catch(_0xd1e51){_0x15dc3d['push'](_0x15dc3d['shift']());}}}(a4_0x4d05,0x9a1d5));var __createBinding=this&&this[a4_0x19ef90(0x1dd)]||(Object['create']?function(_0x25b50a,_0x5bed39,_0x5c111d,_0x4b710b){const _0x4dbf99=a4_0x19ef90;if(_0x4b710b===undefined)_0x4b710b=_0x5c111d;var _0x2f0682=Object[_0x4dbf99(0x1cb)](_0x5bed39,_0x5c111d);(!_0x2f0682||('get'in _0x2f0682?!_0x5bed39[_0x4dbf99(0x1d1)]:_0x2f0682[_0x4dbf99(0x1d3)]||_0x2f0682[_0x4dbf99(0x1c5)]))&&(_0x2f0682={'enumerable':!![],'get':function(){return _0x5bed39[_0x5c111d];}}),Object[_0x4dbf99(0x1e1)](_0x25b50a,_0x4b710b,_0x2f0682);}:function(_0x200d68,_0x4a5377,_0x1e8bb5,_0x42f678){if(_0x42f678===undefined)_0x42f678=_0x1e8bb5;_0x200d68[_0x42f678]=_0x4a5377[_0x1e8bb5];}),__setModuleDefault=this&&this[a4_0x19ef90(0x1cd)]||(Object['create']?function(_0x3716f9,_0x297011){const _0x4ac403=a4_0x19ef90;Object[_0x4ac403(0x1e1)](_0x3716f9,_0x4ac403(0x1bb),{'enumerable':!![],'value':_0x297011});}:function(_0x461264,_0x1554af){const _0x1c4568=a4_0x19ef90;_0x461264[_0x1c4568(0x1bb)]=_0x1554af;}),__importStar=this&&this['__importStar']||(function(){var _0x503185=function(_0x229848){const _0x25d80a=a4_0x5817;return _0x503185=Object[_0x25d80a(0x1e0)]||function(_0x612592){const _0x20f872=_0x25d80a;var _0x2f2188=[];for(var _0x47e22e in _0x612592)if(Object[_0x20f872(0x1b3)][_0x20f872(0x1d6)][_0x20f872(0x1b6)](_0x612592,_0x47e22e))_0x2f2188[_0x2f2188[_0x20f872(0x1c1)]]=_0x47e22e;return _0x2f2188;},_0x503185(_0x229848);};return function(_0x59cd11){const _0x22b0a4=a4_0x5817;if(_0x59cd11&&_0x59cd11['__esModule'])return _0x59cd11;var _0x17c93f={};if(_0x59cd11!=null){for(var _0x166daa=_0x503185(_0x59cd11),_0x35fa41=0x0;_0x35fa41<_0x166daa['length'];_0x35fa41++)if(_0x166daa[_0x35fa41]!==_0x22b0a4(0x1bb))__createBinding(_0x17c93f,_0x59cd11,_0x166daa[_0x35fa41]);}return __setModuleDefault(_0x17c93f,_0x59cd11),_0x17c93f;};}());Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a4_0x19ef90(0x1e6)]=void 0x0;function a4_0x5817(_0x3313d9,_0x120f31){const _0x4d05ac=a4_0x4d05();return a4_0x5817=function(_0x58173d,_0x52dc23){_0x58173d=_0x58173d-0x1b2;let _0x57c06f=_0x4d05ac[_0x58173d];return _0x57c06f;},a4_0x5817(_0x3313d9,_0x120f31);}const authService_1=require(a4_0x19ef90(0x1d8)),tokenBlacklistService_1=require('../services/tokenBlacklistService'),telegramBotService_1=require(a4_0x19ef90(0x1e4));function a4_0x4d05(){const _0x111eb5=['__createBinding','resolve','getStats','getOwnPropertyNames','defineProperty','3262896mWNPnr','authService','../services/telegramBotService','telegramBotService','AuthController','login','connection','username','prototype','then','tokenBlacklistService','call','shop','get','AuthService','body','default','../config/database','findUnique','json','45tgzQgn','12XAWwXY','length','error','User-Agent','token','configurable','remoteAddress','4498150pDLyJa','25824Jfnppy','role','Failed\x20to\x20send\x20failed\x20login\x20notification:','getOwnPropertyDescriptor','exp','__setModuleDefault','890pSXjmD','unknown','sendLoginNotification','__esModule','user','writable','getBlacklistStats','11147lckTtb','hasOwnProperty','Logged\x20out\x20successfully','../services/authService','5335632ItjqrE','113817QJVJxW','5916701qMorHj','blacklistToken'];a4_0x4d05=function(){return _0x111eb5;};return a4_0x4d05();}class AuthController{constructor(){const _0x35dd04=a4_0x19ef90;this['login']=async(_0x27b826,_0x230f68,_0x236636)=>{const _0x4403e0=a4_0x5817;try{const _0x43dac4=_0x27b826[_0x4403e0(0x1ba)],_0x57e788=_0x27b826['ip']||_0x27b826[_0x4403e0(0x1e8)][_0x4403e0(0x1c6)]||_0x4403e0(0x1cf),_0x50f1e0=_0x27b826[_0x4403e0(0x1b8)](_0x4403e0(0x1c3))||_0x4403e0(0x1cf);let _0x517c8f=![],_0x5ab18d=null;try{const _0x3630e7=await this[_0x4403e0(0x1e3)][_0x4403e0(0x1e7)](_0x43dac4);_0x517c8f=!![],_0x3630e7[_0x4403e0(0x1c9)]===_0x4403e0(0x1b7)&&_0x3630e7[_0x4403e0(0x1d2)]?.['id']&&(_0x5ab18d=_0x3630e7[_0x4403e0(0x1d2)]['id']),_0x5ab18d&&await telegramBotService_1[_0x4403e0(0x1e5)]['sendLoginNotification'](_0x5ab18d,{'username':_0x43dac4[_0x4403e0(0x1b2)],'ipAddress':_0x57e788,'userAgent':_0x50f1e0,'timestamp':new Date(),'success':!![]}),_0x230f68[_0x4403e0(0x1be)]({'success':!![],'result':_0x3630e7});}catch(_0x10fe35){try{const _0x4485fd=(await Promise[_0x4403e0(0x1de)]()[_0x4403e0(0x1b4)](()=>__importStar(require(_0x4403e0(0x1bc)))))['default'],_0x4afb6c=await _0x4485fd[_0x4403e0(0x1b7)][_0x4403e0(0x1bd)]({'where':{'username':_0x43dac4[_0x4403e0(0x1b2)]},'select':{'id':!![]}});_0x4afb6c&&await telegramBotService_1[_0x4403e0(0x1e5)][_0x4403e0(0x1d0)](_0x4afb6c['id'],{'username':_0x43dac4[_0x4403e0(0x1b2)],'ipAddress':_0x57e788,'userAgent':_0x50f1e0,'timestamp':new Date(),'success':![]});}catch(_0x855fec){console[_0x4403e0(0x1c2)](_0x4403e0(0x1ca),_0x855fec);}throw _0x10fe35;}}catch(_0x186b8e){_0x236636(_0x186b8e);}},this['me']=async(_0x44624d,_0x42ad9e,_0xa48cd6)=>{const _0x11c818=a4_0x5817;try{const _0x24889a=_0x44624d[_0x11c818(0x1d2)];_0x42ad9e['json']({'success':!![],'result':{'id':_0x24889a?.['id'],'username':_0x24889a?.[_0x11c818(0x1b2)],'role':_0x24889a?.[_0x11c818(0x1c9)]}});}catch(_0x2a1859){_0xa48cd6(_0x2a1859);}},this['logout']=async(_0x57819d,_0x4a971b,_0x528b00)=>{const _0x1f1204=a4_0x5817;try{const _0x56db52=_0x57819d[_0x1f1204(0x1c4)],_0x88893e=_0x57819d[_0x1f1204(0x1d2)];_0x56db52&&_0x88893e?.[_0x1f1204(0x1cc)]&&tokenBlacklistService_1[_0x1f1204(0x1b5)][_0x1f1204(0x1dc)](_0x56db52,_0x88893e[_0x1f1204(0x1cc)]),_0x4a971b['json']({'success':!![],'message':_0x1f1204(0x1d7)});}catch(_0x594bb8){_0x528b00(_0x594bb8);}},this[_0x35dd04(0x1d4)]=async(_0x2fefab,_0x20eae4,_0x21d42d)=>{const _0x2d275a=_0x35dd04;try{const _0x52ad04=tokenBlacklistService_1['tokenBlacklistService'][_0x2d275a(0x1df)]();_0x20eae4[_0x2d275a(0x1be)]({'success':!![],'result':_0x52ad04});}catch(_0x1af656){_0x21d42d(_0x1af656);}},this[_0x35dd04(0x1e3)]=new authService_1[(_0x35dd04(0x1b9))]();}}exports[a4_0x19ef90(0x1e6)]=AuthController;