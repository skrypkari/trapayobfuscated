'use strict';const a4_0x36c7dd=a4_0x5e5a;(function(_0x1b15e6,_0x1966d5){const _0x3e26e7=a4_0x5e5a,_0x359e59=_0x1b15e6();while(!![]){try{const _0x29eb60=parseInt(_0x3e26e7(0x183))/0x1*(parseInt(_0x3e26e7(0x15d))/0x2)+-parseInt(_0x3e26e7(0x195))/0x3+parseInt(_0x3e26e7(0x191))/0x4*(-parseInt(_0x3e26e7(0x175))/0x5)+-parseInt(_0x3e26e7(0x177))/0x6*(parseInt(_0x3e26e7(0x182))/0x7)+parseInt(_0x3e26e7(0x17d))/0x8*(-parseInt(_0x3e26e7(0x167))/0x9)+parseInt(_0x3e26e7(0x16b))/0xa*(parseInt(_0x3e26e7(0x160))/0xb)+-parseInt(_0x3e26e7(0x170))/0xc*(-parseInt(_0x3e26e7(0x16e))/0xd);if(_0x29eb60===_0x1966d5)break;else _0x359e59['push'](_0x359e59['shift']());}catch(_0x13779d){_0x359e59['push'](_0x359e59['shift']());}}}(a4_0x6499,0xcbe3b));var __createBinding=this&&this[a4_0x36c7dd(0x18e)]||(Object[a4_0x36c7dd(0x17a)]?function(_0x442388,_0x23dfea,_0x16f7f8,_0x462826){const _0xfe9cce=a4_0x36c7dd;if(_0x462826===undefined)_0x462826=_0x16f7f8;var _0x46d1b4=Object[_0xfe9cce(0x171)](_0x23dfea,_0x16f7f8);(!_0x46d1b4||(_0xfe9cce(0x186)in _0x46d1b4?!_0x23dfea['__esModule']:_0x46d1b4[_0xfe9cce(0x189)]||_0x46d1b4[_0xfe9cce(0x192)]))&&(_0x46d1b4={'enumerable':!![],'get':function(){return _0x23dfea[_0x16f7f8];}}),Object[_0xfe9cce(0x197)](_0x442388,_0x462826,_0x46d1b4);}:function(_0x54c483,_0x44250d,_0x38cfa0,_0x421822){if(_0x421822===undefined)_0x421822=_0x38cfa0;_0x54c483[_0x421822]=_0x44250d[_0x38cfa0];}),__setModuleDefault=this&&this[a4_0x36c7dd(0x16d)]||(Object[a4_0x36c7dd(0x17a)]?function(_0x3f6f66,_0x522564){const _0x12e760=a4_0x36c7dd;Object[_0x12e760(0x197)](_0x3f6f66,_0x12e760(0x190),{'enumerable':!![],'value':_0x522564});}:function(_0x39e570,_0x352e70){const _0x51a37a=a4_0x36c7dd;_0x39e570[_0x51a37a(0x190)]=_0x352e70;}),__importStar=this&&this[a4_0x36c7dd(0x188)]||(function(){var _0xa02e78=function(_0x4f6047){const _0x588524=a4_0x5e5a;return _0xa02e78=Object[_0x588524(0x16a)]||function(_0x22372f){const _0x39ed85=_0x588524;var _0x5de931=[];for(var _0x129805 in _0x22372f)if(Object[_0x39ed85(0x181)]['hasOwnProperty'][_0x39ed85(0x164)](_0x22372f,_0x129805))_0x5de931[_0x5de931[_0x39ed85(0x196)]]=_0x129805;return _0x5de931;},_0xa02e78(_0x4f6047);};return function(_0x412502){const _0xa784bd=a4_0x5e5a;if(_0x412502&&_0x412502[_0xa784bd(0x194)])return _0x412502;var _0x1a14ac={};if(_0x412502!=null){for(var _0x16ebcf=_0xa02e78(_0x412502),_0x43e8db=0x0;_0x43e8db<_0x16ebcf['length'];_0x43e8db++)if(_0x16ebcf[_0x43e8db]!==_0xa784bd(0x190))__createBinding(_0x1a14ac,_0x412502,_0x16ebcf[_0x43e8db]);}return __setModuleDefault(_0x1a14ac,_0x412502),_0x1a14ac;};}());function a4_0x5e5a(_0x4b3f1a,_0x27b4ee){_0x4b3f1a=_0x4b3f1a-0x15d;const _0x649910=a4_0x6499();let _0x5e5ab6=_0x649910[_0x4b3f1a];return _0x5e5ab6;}Object[a4_0x36c7dd(0x197)](exports,a4_0x36c7dd(0x194),{'value':!![]}),exports['AuthController']=void 0x0;const authService_1=require(a4_0x36c7dd(0x162)),tokenBlacklistService_1=require(a4_0x36c7dd(0x15f)),telegramBotService_1=require(a4_0x36c7dd(0x15e));class AuthController{constructor(){const _0x328366=a4_0x36c7dd;this['login']=async(_0x5d2120,_0x11e727,_0x511768)=>{const _0xbeae44=a4_0x5e5a;try{const _0x5d88b4=_0x5d2120['body'],_0x4f5a53=_0x5d88b4[_0xbeae44(0x179)]||_0x5d2120['ip']||_0x5d2120[_0xbeae44(0x168)][_0xbeae44(0x169)]||_0xbeae44(0x16c),_0x330fa9=_0x5d88b4[_0xbeae44(0x17f)]||_0x5d2120[_0xbeae44(0x186)](_0xbeae44(0x163))||_0xbeae44(0x16c),_0x3ea87f=_0x5d88b4[_0xbeae44(0x185)];let _0x4d9701=![],_0x2fc481=null;try{const _0x129572=await this[_0xbeae44(0x18b)][_0xbeae44(0x176)](_0x5d88b4);_0x4d9701=!![],_0x129572['role']===_0xbeae44(0x18a)&&_0x129572[_0xbeae44(0x172)]?.['id']&&(_0x2fc481=_0x129572[_0xbeae44(0x172)]['id']),_0x2fc481&&await telegramBotService_1['telegramBotService']['sendLoginNotification'](_0x2fc481,{'username':_0x5d88b4[_0xbeae44(0x18f)],'ipAddress':_0x4f5a53,'userAgent':_0x330fa9,'geo':_0x3ea87f,'timestamp':new Date(),'success':!![]}),_0x11e727[_0xbeae44(0x193)]({'success':!![],'result':_0x129572});}catch(_0x52370c){try{const _0x2c315a=(await Promise['resolve']()[_0xbeae44(0x165)](()=>__importStar(require(_0xbeae44(0x166)))))[_0xbeae44(0x190)],_0x2c1395=await _0x2c315a[_0xbeae44(0x18a)][_0xbeae44(0x17e)]({'where':{'username':_0x5d88b4[_0xbeae44(0x18f)]},'select':{'id':!![]}});_0x2c1395&&await telegramBotService_1['telegramBotService'][_0xbeae44(0x173)](_0x2c1395['id'],{'username':_0x5d88b4[_0xbeae44(0x18f)],'ipAddress':_0x4f5a53,'userAgent':_0x330fa9,'geo':_0x3ea87f,'timestamp':new Date(),'success':![]});}catch(_0x5d104e){console[_0xbeae44(0x187)]('Failed\x20to\x20send\x20failed\x20login\x20notification:',_0x5d104e);}throw _0x52370c;}}catch(_0x59b3d1){_0x511768(_0x59b3d1);}},this['me']=async(_0x436d53,_0x5d6a96,_0xeb1147)=>{const _0x1df5f7=a4_0x5e5a;try{const _0x3a5cc8=_0x436d53[_0x1df5f7(0x172)];_0x5d6a96[_0x1df5f7(0x193)]({'success':!![],'result':{'id':_0x3a5cc8?.['id'],'username':_0x3a5cc8?.[_0x1df5f7(0x18f)],'role':_0x3a5cc8?.['role']}});}catch(_0x1c5d07){_0xeb1147(_0x1c5d07);}},this[_0x328366(0x178)]=async(_0x1d6daa,_0x50c23f,_0x19147f)=>{const _0x1b297b=_0x328366;try{const _0xc02416=_0x1d6daa[_0x1b297b(0x18d)],_0xa5efb=_0x1d6daa['user'];_0xc02416&&_0xa5efb?.['exp']&&tokenBlacklistService_1[_0x1b297b(0x16f)][_0x1b297b(0x17b)](_0xc02416,_0xa5efb[_0x1b297b(0x17c)]),_0x50c23f[_0x1b297b(0x193)]({'success':!![],'message':_0x1b297b(0x174)});}catch(_0x59c8c2){_0x19147f(_0x59c8c2);}},this[_0x328366(0x161)]=async(_0x3a51c5,_0x3086f9,_0x42d96d)=>{const _0x51f7bb=_0x328366;try{const _0x34374b=tokenBlacklistService_1[_0x51f7bb(0x16f)][_0x51f7bb(0x184)]();_0x3086f9[_0x51f7bb(0x193)]({'success':!![],'result':_0x34374b});}catch(_0x21b97e){_0x42d96d(_0x21b97e);}},this[_0x328366(0x18b)]=new authService_1[(_0x328366(0x180))]();}}function a4_0x6499(){const _0x345666=['3095691hNiyIA','length','defineProperty','934pnfWpQ','../services/telegramBotService','../services/tokenBlacklistService','1318141NxElLy','getBlacklistStats','../services/authService','User-Agent','call','then','../config/database','307143Wghdlg','connection','remoteAddress','getOwnPropertyNames','110OAUEfW','unknown','__setModuleDefault','377nZYiWq','tokenBlacklistService','180996uJVOyZ','getOwnPropertyDescriptor','user','sendLoginNotification','Logged\x20out\x20successfully','10ZDKkfd','login','233610vvcukx','logout','ipAddress','create','blacklistToken','exp','64ZKeZqy','findUnique','userAgent','AuthService','prototype','35UQQqoU','2383BgxHwY','getStats','geo','get','error','__importStar','writable','shop','authService','AuthController','token','__createBinding','username','default','1067380jCNUZM','configurable','json','__esModule'];a4_0x6499=function(){return _0x345666;};return a4_0x6499();}exports[a4_0x36c7dd(0x18c)]=AuthController;