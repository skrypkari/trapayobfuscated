'use strict';const a4_0x6dbc1f=a4_0x35c0;(function(_0x53f40a,_0x53e4e1){const _0x589ab3=a4_0x35c0,_0x102c97=_0x53f40a();while(!![]){try{const _0x559ffc=-parseInt(_0x589ab3(0x1c9))/0x1*(parseInt(_0x589ab3(0x1c2))/0x2)+-parseInt(_0x589ab3(0x1bf))/0x3+-parseInt(_0x589ab3(0x1cb))/0x4+-parseInt(_0x589ab3(0x1bb))/0x5*(-parseInt(_0x589ab3(0x1da))/0x6)+parseInt(_0x589ab3(0x1e5))/0x7*(-parseInt(_0x589ab3(0x1dc))/0x8)+parseInt(_0x589ab3(0x1e0))/0x9+parseInt(_0x589ab3(0x1d1))/0xa;if(_0x559ffc===_0x53e4e1)break;else _0x102c97['push'](_0x102c97['shift']());}catch(_0x2cd8d8){_0x102c97['push'](_0x102c97['shift']());}}}(a4_0x258b,0x7f286));var __createBinding=this&&this[a4_0x6dbc1f(0x1d6)]||(Object[a4_0x6dbc1f(0x1c0)]?function(_0xd26caf,_0x4f3c58,_0xdfabaf,_0x3bf2ad){const _0x1f2ae7=a4_0x6dbc1f;if(_0x3bf2ad===undefined)_0x3bf2ad=_0xdfabaf;var _0x48dabb=Object[_0x1f2ae7(0x1e4)](_0x4f3c58,_0xdfabaf);(!_0x48dabb||('get'in _0x48dabb?!_0x4f3c58['__esModule']:_0x48dabb[_0x1f2ae7(0x1d7)]||_0x48dabb[_0x1f2ae7(0x1de)]))&&(_0x48dabb={'enumerable':!![],'get':function(){return _0x4f3c58[_0xdfabaf];}}),Object[_0x1f2ae7(0x1c1)](_0xd26caf,_0x3bf2ad,_0x48dabb);}:function(_0x53f5b9,_0x322c62,_0x384c59,_0x29dca6){if(_0x29dca6===undefined)_0x29dca6=_0x384c59;_0x53f5b9[_0x29dca6]=_0x322c62[_0x384c59];}),__setModuleDefault=this&&this[a4_0x6dbc1f(0x1c7)]||(Object[a4_0x6dbc1f(0x1c0)]?function(_0x3d269d,_0x467b49){const _0x5336a2=a4_0x6dbc1f;Object[_0x5336a2(0x1c1)](_0x3d269d,'default',{'enumerable':!![],'value':_0x467b49});}:function(_0x25cfc2,_0x43c93d){const _0x232ba2=a4_0x6dbc1f;_0x25cfc2[_0x232ba2(0x1d8)]=_0x43c93d;}),__importStar=this&&this[a4_0x6dbc1f(0x1b3)]||(function(){var _0x5f5a5c=function(_0xbac25a){return _0x5f5a5c=Object['getOwnPropertyNames']||function(_0x13f346){const _0x50587a=a4_0x35c0;var _0x4a67ae=[];for(var _0xe591ed in _0x13f346)if(Object[_0x50587a(0x1c5)][_0x50587a(0x1e1)][_0x50587a(0x1bd)](_0x13f346,_0xe591ed))_0x4a67ae[_0x4a67ae[_0x50587a(0x1d0)]]=_0xe591ed;return _0x4a67ae;},_0x5f5a5c(_0xbac25a);};return function(_0x416611){const _0x38f4c5=a4_0x35c0;if(_0x416611&&_0x416611[_0x38f4c5(0x1b5)])return _0x416611;var _0x11bc41={};if(_0x416611!=null){for(var _0x48eca8=_0x5f5a5c(_0x416611),_0x51bc55=0x0;_0x51bc55<_0x48eca8[_0x38f4c5(0x1d0)];_0x51bc55++)if(_0x48eca8[_0x51bc55]!==_0x38f4c5(0x1d8))__createBinding(_0x11bc41,_0x416611,_0x48eca8[_0x51bc55]);}return __setModuleDefault(_0x11bc41,_0x416611),_0x11bc41;};}());function a4_0x35c0(_0x5001ae,_0x21f8a5){const _0x258b08=a4_0x258b();return a4_0x35c0=function(_0x35c0b9,_0x35d316){_0x35c0b9=_0x35c0b9-0x1b3;let _0x64d0fd=_0x258b08[_0x35c0b9];return _0x64d0fd;},a4_0x35c0(_0x5001ae,_0x21f8a5);}Object[a4_0x6dbc1f(0x1c1)](exports,a4_0x6dbc1f(0x1b5),{'value':!![]}),exports[a4_0x6dbc1f(0x1b4)]=void 0x0;const authService_1=require(a4_0x6dbc1f(0x1b8)),tokenBlacklistService_1=require(a4_0x6dbc1f(0x1c6)),telegramBotService_1=require('../services/telegramBotService');class AuthController{constructor(){const _0x5b7f47=a4_0x6dbc1f;this['login']=async(_0x244711,_0x19b129,_0x5a64ad)=>{const _0x2d04b5=a4_0x35c0;try{const _0x340630=_0x244711[_0x2d04b5(0x1ca)],_0x2b863d=_0x244711['ip']||_0x244711[_0x2d04b5(0x1b7)]['remoteAddress']||_0x2d04b5(0x1d9),_0x46e2b4=_0x244711[_0x2d04b5(0x1cf)](_0x2d04b5(0x1c4))||'unknown';let _0x529f76=![],_0x45b7b1=null;try{const _0x4a2818=await this[_0x2d04b5(0x1c8)][_0x2d04b5(0x1d3)](_0x340630);_0x529f76=!![],_0x4a2818[_0x2d04b5(0x1b6)]===_0x2d04b5(0x1e2)&&_0x4a2818[_0x2d04b5(0x1cd)]?.['id']&&(_0x45b7b1=_0x4a2818[_0x2d04b5(0x1cd)]['id']),_0x45b7b1&&await telegramBotService_1[_0x2d04b5(0x1b9)]['sendLoginNotification'](_0x45b7b1,{'username':_0x340630[_0x2d04b5(0x1e3)],'ipAddress':_0x2b863d,'userAgent':_0x46e2b4,'timestamp':new Date(),'success':!![]}),_0x19b129['json']({'success':!![],'result':_0x4a2818});}catch(_0x525638){try{const _0x44941c=(await Promise[_0x2d04b5(0x1d4)]()[_0x2d04b5(0x1db)](()=>__importStar(require('../config/database'))))[_0x2d04b5(0x1d8)],_0x13a667=await _0x44941c[_0x2d04b5(0x1e2)][_0x2d04b5(0x1d2)]({'where':{'username':_0x340630[_0x2d04b5(0x1e3)]},'select':{'id':!![]}});_0x13a667&&await telegramBotService_1[_0x2d04b5(0x1b9)]['sendLoginNotification'](_0x13a667['id'],{'username':_0x340630[_0x2d04b5(0x1e3)],'ipAddress':_0x2b863d,'userAgent':_0x46e2b4,'timestamp':new Date(),'success':![]});}catch(_0x4a92be){console[_0x2d04b5(0x1be)](_0x2d04b5(0x1c3),_0x4a92be);}throw _0x525638;}}catch(_0x1c6b7f){_0x5a64ad(_0x1c6b7f);}},this['me']=async(_0x187bb,_0x2c5806,_0x393d97)=>{const _0x5c2db4=a4_0x35c0;try{const _0x4c8005=_0x187bb[_0x5c2db4(0x1cd)];_0x2c5806['json']({'success':!![],'result':{'id':_0x4c8005?.['id'],'username':_0x4c8005?.[_0x5c2db4(0x1e3)],'role':_0x4c8005?.[_0x5c2db4(0x1b6)]}});}catch(_0x17b54d){_0x393d97(_0x17b54d);}},this['logout']=async(_0xf74caa,_0x85b6b5,_0x2f4214)=>{const _0xb66ebe=a4_0x35c0;try{const _0x47e83d=_0xf74caa['token'],_0x4dd7da=_0xf74caa[_0xb66ebe(0x1cd)];_0x47e83d&&_0x4dd7da?.[_0xb66ebe(0x1cc)]&&tokenBlacklistService_1[_0xb66ebe(0x1df)][_0xb66ebe(0x1dd)](_0x47e83d,_0x4dd7da[_0xb66ebe(0x1cc)]),_0x85b6b5[_0xb66ebe(0x1bc)]({'success':!![],'message':_0xb66ebe(0x1ba)});}catch(_0x18ce85){_0x2f4214(_0x18ce85);}},this['getBlacklistStats']=async(_0x5ca0f6,_0x4c2c38,_0x1001db)=>{const _0xa4d233=a4_0x35c0;try{const _0x55565b=tokenBlacklistService_1[_0xa4d233(0x1df)][_0xa4d233(0x1ce)]();_0x4c2c38[_0xa4d233(0x1bc)]({'success':!![],'result':_0x55565b});}catch(_0x1e85b1){_0x1001db(_0x1e85b1);}},this[_0x5b7f47(0x1c8)]=new authService_1[(_0x5b7f47(0x1d5))]();}}function a4_0x258b(){const _0x4d341f=['prototype','../services/tokenBlacklistService','__setModuleDefault','authService','1MbZXij','body','1153648IZjhDa','exp','user','getStats','get','length','21204820ebvLaS','findUnique','login','resolve','AuthService','__createBinding','writable','default','unknown','179430jjKyRB','then','1216xffZYm','blacklistToken','configurable','tokenBlacklistService','3633516AHsBNo','hasOwnProperty','shop','username','getOwnPropertyDescriptor','47803mCwPjd','__importStar','AuthController','__esModule','role','connection','../services/authService','telegramBotService','Logged\x20out\x20successfully','45JWSrkY','json','call','error','1789686tCFsul','create','defineProperty','699062rsIlef','Failed\x20to\x20send\x20failed\x20login\x20notification:','User-Agent'];a4_0x258b=function(){return _0x4d341f;};return a4_0x258b();}exports[a4_0x6dbc1f(0x1b4)]=AuthController;