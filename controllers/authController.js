'use strict';function a4_0x56c7(){const _0x38c8e2=['role','__setModuleDefault','784650mzOInv','logout','1106574SJcUxY','unknown','AuthController','authService','729650RyggqU','889064CESVBw','json','default','username','316504vKrXad','token','connection','writable','User-Agent','__importStar','shop','getBlacklistStats','findUnique','defineProperty','__createBinding','configurable','then','userAgent','2035812oEikHc','user','Failed\x20to\x20send\x20failed\x20login\x20notification:','../services/tokenBlacklistService','tokenBlacklistService','create','AuthService','hasOwnProperty','../services/authService','get','sendLoginNotification','ipAddress','body','length','error','blacklistToken','getOwnPropertyNames','prototype','getStats','call','../config/database','../services/telegramBotService','__esModule','exp','483423CWsbcY','telegramBotService','login','resolve'];a4_0x56c7=function(){return _0x38c8e2;};return a4_0x56c7();}const a4_0x1be988=a4_0x48cb;(function(_0x50caba,_0x386a85){const _0x3421d6=a4_0x48cb,_0x341e3b=_0x50caba();while(!![]){try{const _0x1406df=parseInt(_0x3421d6(0x150))/0x1+-parseInt(_0x3421d6(0x145))/0x2+parseInt(_0x3421d6(0x13f))/0x3+-parseInt(_0x3421d6(0x14c))/0x4+-parseInt(_0x3421d6(0x14b))/0x5+parseInt(_0x3421d6(0x127))/0x6+parseInt(_0x3421d6(0x147))/0x7;if(_0x1406df===_0x386a85)break;else _0x341e3b['push'](_0x341e3b['shift']());}catch(_0xcb65e5){_0x341e3b['push'](_0x341e3b['shift']());}}}(a4_0x56c7,0x345ec));var __createBinding=this&&this[a4_0x1be988(0x15a)]||(Object[a4_0x1be988(0x12c)]?function(_0x1d3b70,_0x9e1a86,_0x4ec602,_0x20bd3d){const _0x12595f=a4_0x1be988;if(_0x20bd3d===undefined)_0x20bd3d=_0x4ec602;var _0x69cb08=Object['getOwnPropertyDescriptor'](_0x9e1a86,_0x4ec602);(!_0x69cb08||(_0x12595f(0x130)in _0x69cb08?!_0x9e1a86[_0x12595f(0x13d)]:_0x69cb08[_0x12595f(0x153)]||_0x69cb08[_0x12595f(0x15b)]))&&(_0x69cb08={'enumerable':!![],'get':function(){return _0x9e1a86[_0x4ec602];}}),Object[_0x12595f(0x159)](_0x1d3b70,_0x20bd3d,_0x69cb08);}:function(_0x38d562,_0x20982c,_0x53cdee,_0x31bbbb){if(_0x31bbbb===undefined)_0x31bbbb=_0x53cdee;_0x38d562[_0x31bbbb]=_0x20982c[_0x53cdee];}),__setModuleDefault=this&&this[a4_0x1be988(0x144)]||(Object[a4_0x1be988(0x12c)]?function(_0x36d31a,_0x1b8047){const _0x4ed0cc=a4_0x1be988;Object[_0x4ed0cc(0x159)](_0x36d31a,_0x4ed0cc(0x14e),{'enumerable':!![],'value':_0x1b8047});}:function(_0x105c6b,_0x1a8480){const _0x568cc2=a4_0x1be988;_0x105c6b[_0x568cc2(0x14e)]=_0x1a8480;}),__importStar=this&&this[a4_0x1be988(0x155)]||(function(){var _0x461370=function(_0x46e8b8){const _0x25810d=a4_0x48cb;return _0x461370=Object[_0x25810d(0x137)]||function(_0x594465){const _0x4b9b11=_0x25810d;var _0x23ba94=[];for(var _0xa01e9e in _0x594465)if(Object[_0x4b9b11(0x138)][_0x4b9b11(0x12e)][_0x4b9b11(0x13a)](_0x594465,_0xa01e9e))_0x23ba94[_0x23ba94[_0x4b9b11(0x134)]]=_0xa01e9e;return _0x23ba94;},_0x461370(_0x46e8b8);};return function(_0x20e0b0){const _0x1fea70=a4_0x48cb;if(_0x20e0b0&&_0x20e0b0[_0x1fea70(0x13d)])return _0x20e0b0;var _0x51812f={};if(_0x20e0b0!=null){for(var _0x39031c=_0x461370(_0x20e0b0),_0x2abb32=0x0;_0x2abb32<_0x39031c[_0x1fea70(0x134)];_0x2abb32++)if(_0x39031c[_0x2abb32]!=='default')__createBinding(_0x51812f,_0x20e0b0,_0x39031c[_0x2abb32]);}return __setModuleDefault(_0x51812f,_0x20e0b0),_0x51812f;};}());Object[a4_0x1be988(0x159)](exports,a4_0x1be988(0x13d),{'value':!![]}),exports[a4_0x1be988(0x149)]=void 0x0;const authService_1=require(a4_0x1be988(0x12f)),tokenBlacklistService_1=require(a4_0x1be988(0x12a)),telegramBotService_1=require(a4_0x1be988(0x13c));function a4_0x48cb(_0x15775f,_0x25c341){_0x15775f=_0x15775f-0x125;const _0x56c70f=a4_0x56c7();let _0x48cb0d=_0x56c70f[_0x15775f];return _0x48cb0d;}class AuthController{constructor(){const _0x48b8ae=a4_0x1be988;this[_0x48b8ae(0x141)]=async(_0x4d0718,_0x2ab912,_0x1a9452)=>{const _0x21df37=_0x48b8ae;try{const _0x31f104=_0x4d0718[_0x21df37(0x133)],_0x1f6135=_0x31f104[_0x21df37(0x132)]||_0x4d0718['ip']||_0x4d0718[_0x21df37(0x152)]['remoteAddress']||'unknown',_0x2751c1=_0x31f104[_0x21df37(0x126)]||_0x4d0718[_0x21df37(0x130)](_0x21df37(0x154))||_0x21df37(0x148),_0x1df26b=_0x31f104['geo'];let _0x191d2a=![],_0x499e29=null;try{const _0x5a589a=await this[_0x21df37(0x14a)][_0x21df37(0x141)](_0x31f104);_0x191d2a=!![],_0x5a589a[_0x21df37(0x143)]===_0x21df37(0x156)&&_0x5a589a[_0x21df37(0x128)]?.['id']&&(_0x499e29=_0x5a589a['user']['id']),_0x499e29&&await telegramBotService_1[_0x21df37(0x140)]['sendLoginNotification'](_0x499e29,{'username':_0x31f104[_0x21df37(0x14f)],'ipAddress':_0x1f6135,'userAgent':_0x2751c1,'geo':_0x1df26b,'timestamp':new Date(),'success':!![]}),_0x2ab912['json']({'success':!![],'result':_0x5a589a});}catch(_0x16fe6d){try{const _0x384d23=(await Promise[_0x21df37(0x142)]()[_0x21df37(0x125)](()=>__importStar(require(_0x21df37(0x13b)))))[_0x21df37(0x14e)],_0x20d395=await _0x384d23['shop'][_0x21df37(0x158)]({'where':{'username':_0x31f104[_0x21df37(0x14f)]},'select':{'id':!![]}});_0x20d395&&await telegramBotService_1[_0x21df37(0x140)][_0x21df37(0x131)](_0x20d395['id'],{'username':_0x31f104[_0x21df37(0x14f)],'ipAddress':_0x1f6135,'userAgent':_0x2751c1,'geo':_0x1df26b,'timestamp':new Date(),'success':![]});}catch(_0xafb169){console[_0x21df37(0x135)](_0x21df37(0x129),_0xafb169);}throw _0x16fe6d;}}catch(_0x3b5dfb){_0x1a9452(_0x3b5dfb);}},this['me']=async(_0x535bee,_0x24facc,_0x3a2963)=>{const _0x26572f=_0x48b8ae;try{const _0x41c8bd=_0x535bee[_0x26572f(0x128)];_0x24facc[_0x26572f(0x14d)]({'success':!![],'result':{'id':_0x41c8bd?.['id'],'username':_0x41c8bd?.['username'],'role':_0x41c8bd?.[_0x26572f(0x143)]}});}catch(_0x9fca85){_0x3a2963(_0x9fca85);}},this[_0x48b8ae(0x146)]=async(_0x568884,_0x5da85d,_0x7a5b3f)=>{const _0x29e796=_0x48b8ae;try{const _0x1e386d=_0x568884[_0x29e796(0x151)],_0x4c187f=_0x568884[_0x29e796(0x128)];_0x1e386d&&_0x4c187f?.[_0x29e796(0x13e)]&&tokenBlacklistService_1[_0x29e796(0x12b)][_0x29e796(0x136)](_0x1e386d,_0x4c187f[_0x29e796(0x13e)]),_0x5da85d[_0x29e796(0x14d)]({'success':!![],'message':'Logged\x20out\x20successfully'});}catch(_0x563209){_0x7a5b3f(_0x563209);}},this[_0x48b8ae(0x157)]=async(_0x4db941,_0x352293,_0x3f3ea1)=>{const _0x1a0f2b=_0x48b8ae;try{const _0x37bc0e=tokenBlacklistService_1[_0x1a0f2b(0x12b)][_0x1a0f2b(0x139)]();_0x352293[_0x1a0f2b(0x14d)]({'success':!![],'result':_0x37bc0e});}catch(_0x2e04a2){_0x3f3ea1(_0x2e04a2);}},this['authService']=new authService_1[(_0x48b8ae(0x12d))]();}}exports['AuthController']=AuthController;