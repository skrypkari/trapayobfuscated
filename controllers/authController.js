'use strict';const a4_0x4d3439=a4_0x46ff;(function(_0xc9da7d,_0x37da3e){const _0x1b122d=a4_0x46ff,_0x39f28b=_0xc9da7d();while(!![]){try{const _0x5c8cd0=parseInt(_0x1b122d(0x178))/0x1+-parseInt(_0x1b122d(0x159))/0x2*(parseInt(_0x1b122d(0x173))/0x3)+parseInt(_0x1b122d(0x179))/0x4+parseInt(_0x1b122d(0x151))/0x5*(-parseInt(_0x1b122d(0x17b))/0x6)+-parseInt(_0x1b122d(0x155))/0x7*(-parseInt(_0x1b122d(0x168))/0x8)+parseInt(_0x1b122d(0x153))/0x9*(-parseInt(_0x1b122d(0x160))/0xa)+parseInt(_0x1b122d(0x17a))/0xb;if(_0x5c8cd0===_0x37da3e)break;else _0x39f28b['push'](_0x39f28b['shift']());}catch(_0x24ee88){_0x39f28b['push'](_0x39f28b['shift']());}}}(a4_0x401c,0x41325));var __createBinding=this&&this[a4_0x4d3439(0x16c)]||(Object[a4_0x4d3439(0x14d)]?function(_0x4e5724,_0x4f093a,_0xacac91,_0x5d0582){const _0x5bd504=a4_0x4d3439;if(_0x5d0582===undefined)_0x5d0582=_0xacac91;var _0x4907dd=Object[_0x5bd504(0x158)](_0x4f093a,_0xacac91);(!_0x4907dd||(_0x5bd504(0x15d)in _0x4907dd?!_0x4f093a['__esModule']:_0x4907dd['writable']||_0x4907dd['configurable']))&&(_0x4907dd={'enumerable':!![],'get':function(){return _0x4f093a[_0xacac91];}}),Object[_0x5bd504(0x150)](_0x4e5724,_0x5d0582,_0x4907dd);}:function(_0x2e862b,_0x259551,_0x17fbb2,_0x1375f4){if(_0x1375f4===undefined)_0x1375f4=_0x17fbb2;_0x2e862b[_0x1375f4]=_0x259551[_0x17fbb2];}),__setModuleDefault=this&&this[a4_0x4d3439(0x177)]||(Object[a4_0x4d3439(0x14d)]?function(_0x3ee470,_0x231de2){const _0x56494=a4_0x4d3439;Object[_0x56494(0x150)](_0x3ee470,_0x56494(0x17c),{'enumerable':!![],'value':_0x231de2});}:function(_0xc3d631,_0x8aa783){const _0x4b717b=a4_0x4d3439;_0xc3d631[_0x4b717b(0x17c)]=_0x8aa783;}),__importStar=this&&this[a4_0x4d3439(0x169)]||(function(){var _0x3c0493=function(_0x38c051){const _0x4519b1=a4_0x46ff;return _0x3c0493=Object[_0x4519b1(0x172)]||function(_0x50ac6b){const _0x3e7201=_0x4519b1;var _0xc8175b=[];for(var _0x4222d3 in _0x50ac6b)if(Object[_0x3e7201(0x16e)][_0x3e7201(0x165)][_0x3e7201(0x163)](_0x50ac6b,_0x4222d3))_0xc8175b[_0xc8175b[_0x3e7201(0x167)]]=_0x4222d3;return _0xc8175b;},_0x3c0493(_0x38c051);};return function(_0xb3db54){const _0x361e81=a4_0x46ff;if(_0xb3db54&&_0xb3db54[_0x361e81(0x16d)])return _0xb3db54;var _0x39d490={};if(_0xb3db54!=null){for(var _0x926565=_0x3c0493(_0xb3db54),_0x36b01b=0x0;_0x36b01b<_0x926565[_0x361e81(0x167)];_0x36b01b++)if(_0x926565[_0x36b01b]!==_0x361e81(0x17c))__createBinding(_0x39d490,_0xb3db54,_0x926565[_0x36b01b]);}return __setModuleDefault(_0x39d490,_0xb3db54),_0x39d490;};}());Object['defineProperty'](exports,a4_0x4d3439(0x16d),{'value':!![]}),exports[a4_0x4d3439(0x175)]=void 0x0;const authService_1=require('../services/authService'),tokenBlacklistService_1=require(a4_0x4d3439(0x14a)),telegramBotService_1=require(a4_0x4d3439(0x157));function a4_0x401c(){const _0x1fd572=['455tJoUIo','authService','1047339xzqAzV','username','28AemqcC','json','../services/telegramBotService','getOwnPropertyDescriptor','2pdDEoi','resolve','shop','telegramBotService','get','body','then','30tNEkhe','findUnique','../config/database','call','role','hasOwnProperty','logout','length','884824bYimlN','__importStar','sendLoginNotification','Failed\x20to\x20send\x20failed\x20login\x20notification:','__createBinding','__esModule','prototype','user','error','getStats','getOwnPropertyNames','1334391iwhdTS','unknown','AuthController','login','__setModuleDefault','401217oKwVhR','701568yxeBcP','640453DTvfEX','1074IpLDCm','default','../services/tokenBlacklistService','blacklistToken','AuthService','create','exp','Logged\x20out\x20successfully','defineProperty'];a4_0x401c=function(){return _0x1fd572;};return a4_0x401c();}class AuthController{constructor(){const _0x40e487=a4_0x4d3439;this[_0x40e487(0x176)]=async(_0x2556f8,_0x576756,_0x14ab5a)=>{const _0x11de32=_0x40e487;try{const _0x3ca839=_0x2556f8[_0x11de32(0x15e)],_0x2f3a0c=_0x2556f8['ip']||_0x2556f8['connection']['remoteAddress']||_0x11de32(0x174),_0x1adb42=_0x2556f8[_0x11de32(0x15d)]('User-Agent')||_0x11de32(0x174);let _0x39d106=![],_0x314678=null;try{const _0x48e1d9=await this[_0x11de32(0x152)][_0x11de32(0x176)](_0x3ca839);_0x39d106=!![],_0x48e1d9['role']===_0x11de32(0x15b)&&_0x48e1d9[_0x11de32(0x16f)]?.['id']&&(_0x314678=_0x48e1d9[_0x11de32(0x16f)]['id']),_0x314678&&await telegramBotService_1['telegramBotService'][_0x11de32(0x16a)](_0x314678,{'username':_0x3ca839[_0x11de32(0x154)],'ipAddress':_0x2f3a0c,'userAgent':_0x1adb42,'timestamp':new Date(),'success':!![]}),_0x576756[_0x11de32(0x156)]({'success':!![],'result':_0x48e1d9});}catch(_0x342c86){try{const _0x4c6eac=(await Promise[_0x11de32(0x15a)]()[_0x11de32(0x15f)](()=>__importStar(require(_0x11de32(0x162)))))['default'],_0x41a216=await _0x4c6eac[_0x11de32(0x15b)][_0x11de32(0x161)]({'where':{'username':_0x3ca839[_0x11de32(0x154)]},'select':{'id':!![]}});_0x41a216&&await telegramBotService_1[_0x11de32(0x15c)]['sendLoginNotification'](_0x41a216['id'],{'username':_0x3ca839[_0x11de32(0x154)],'ipAddress':_0x2f3a0c,'userAgent':_0x1adb42,'timestamp':new Date(),'success':![]});}catch(_0x5d4ba3){console[_0x11de32(0x170)](_0x11de32(0x16b),_0x5d4ba3);}throw _0x342c86;}}catch(_0x3cbe3d){_0x14ab5a(_0x3cbe3d);}},this['me']=async(_0x415ee1,_0x505fcf,_0x559dfa)=>{const _0x9b9847=_0x40e487;try{const _0x1d951e=_0x415ee1[_0x9b9847(0x16f)];_0x505fcf[_0x9b9847(0x156)]({'success':!![],'result':{'id':_0x1d951e?.['id'],'username':_0x1d951e?.[_0x9b9847(0x154)],'role':_0x1d951e?.[_0x9b9847(0x164)]}});}catch(_0x5b78b3){_0x559dfa(_0x5b78b3);}},this[_0x40e487(0x166)]=async(_0x7494ff,_0x3f71b7,_0x2011fc)=>{const _0x4953f5=_0x40e487;try{const _0x2a1ca2=_0x7494ff['token'],_0x58021f=_0x7494ff[_0x4953f5(0x16f)];_0x2a1ca2&&_0x58021f?.[_0x4953f5(0x14e)]&&tokenBlacklistService_1['tokenBlacklistService'][_0x4953f5(0x14b)](_0x2a1ca2,_0x58021f[_0x4953f5(0x14e)]),_0x3f71b7[_0x4953f5(0x156)]({'success':!![],'message':_0x4953f5(0x14f)});}catch(_0x5b6cc8){_0x2011fc(_0x5b6cc8);}},this['getBlacklistStats']=async(_0x1ab4dd,_0x135657,_0x42a6ff)=>{const _0x595c0b=_0x40e487;try{const _0x6c1281=tokenBlacklistService_1['tokenBlacklistService'][_0x595c0b(0x171)]();_0x135657[_0x595c0b(0x156)]({'success':!![],'result':_0x6c1281});}catch(_0x3080d7){_0x42a6ff(_0x3080d7);}},this[_0x40e487(0x152)]=new authService_1[(_0x40e487(0x14c))]();}}function a4_0x46ff(_0x215030,_0x58093f){const _0x401c38=a4_0x401c();return a4_0x46ff=function(_0x46ff4f,_0x19527a){_0x46ff4f=_0x46ff4f-0x14a;let _0x4da7da=_0x401c38[_0x46ff4f];return _0x4da7da;},a4_0x46ff(_0x215030,_0x58093f);}exports[a4_0x4d3439(0x175)]=AuthController;