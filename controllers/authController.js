'use strict';function a4_0x2ed2(){const _0x848d85=['10bCrBhk','hasOwnProperty','exp','connection','tokenBlacklistService','create','../services/authService','194638wOLWNw','sendLoginNotification','shop','error','prototype','5756718gbITaI','4211448ciUIAi','authService','20UYVrHy','token','getOwnPropertyDescriptor','AuthController','findUnique','then','2408YZmzhG','blacklistToken','defineProperty','Failed\x20to\x20send\x20failed\x20login\x20notification:','login','getStats','default','username','getBlacklistStats','4792464EPqbAB','length','json','getOwnPropertyNames','resolve','user','6215181dCPoUI','8EofxAj','6IPyiDz','../services/tokenBlacklistService','5690855SQhZRI','call','AuthService','role','unknown','../services/telegramBotService','configurable','6222CWXlsQ','__setModuleDefault'];a4_0x2ed2=function(){return _0x848d85;};return a4_0x2ed2();}const a4_0xf1315a=a4_0x441c;function a4_0x441c(_0x4593cc,_0x41d30e){const _0x2ed2c0=a4_0x2ed2();return a4_0x441c=function(_0x441c72,_0x439fce){_0x441c72=_0x441c72-0x8f;let _0x216730=_0x2ed2c0[_0x441c72];return _0x216730;},a4_0x441c(_0x4593cc,_0x41d30e);}(function(_0x18840f,_0x612da9){const _0xef2dad=a4_0x441c,_0x581e97=_0x18840f();while(!![]){try{const _0x46912f=parseInt(_0xef2dad(0x9c))/0x1*(parseInt(_0xef2dad(0x95))/0x2)+-parseInt(_0xef2dad(0x93))/0x3*(-parseInt(_0xef2dad(0xaa))/0x4)+parseInt(_0xef2dad(0xbd))/0x5*(-parseInt(_0xef2dad(0xbb))/0x6)+parseInt(_0xef2dad(0xb9))/0x7*(parseInt(_0xef2dad(0xba))/0x8)+-parseInt(_0xef2dad(0xb3))/0x9+-parseInt(_0xef2dad(0xa4))/0xa*(parseInt(_0xef2dad(0xa1))/0xb)+parseInt(_0xef2dad(0xa2))/0xc;if(_0x46912f===_0x612da9)break;else _0x581e97['push'](_0x581e97['shift']());}catch(_0x2a5314){_0x581e97['push'](_0x581e97['shift']());}}}(a4_0x2ed2,0xb5740));var __createBinding=this&&this['__createBinding']||(Object[a4_0xf1315a(0x9a)]?function(_0x2030a5,_0x5d4632,_0x4342d0,_0x4830bb){const _0x1a95cd=a4_0xf1315a;if(_0x4830bb===undefined)_0x4830bb=_0x4342d0;var _0x359b0e=Object[_0x1a95cd(0xa6)](_0x5d4632,_0x4342d0);(!_0x359b0e||('get'in _0x359b0e?!_0x5d4632['__esModule']:_0x359b0e['writable']||_0x359b0e[_0x1a95cd(0x92)]))&&(_0x359b0e={'enumerable':!![],'get':function(){return _0x5d4632[_0x4342d0];}}),Object[_0x1a95cd(0xac)](_0x2030a5,_0x4830bb,_0x359b0e);}:function(_0x2490fd,_0x437dca,_0xb56cc4,_0x257c7c){if(_0x257c7c===undefined)_0x257c7c=_0xb56cc4;_0x2490fd[_0x257c7c]=_0x437dca[_0xb56cc4];}),__setModuleDefault=this&&this[a4_0xf1315a(0x94)]||(Object[a4_0xf1315a(0x9a)]?function(_0x3c8173,_0xf5556b){const _0x5899d2=a4_0xf1315a;Object[_0x5899d2(0xac)](_0x3c8173,'default',{'enumerable':!![],'value':_0xf5556b});}:function(_0x285813,_0x2a1e36){const _0x4e10a4=a4_0xf1315a;_0x285813[_0x4e10a4(0xb0)]=_0x2a1e36;}),__importStar=this&&this['__importStar']||(function(){var _0x574d0f=function(_0x3a22c5){const _0x2fa12c=a4_0x441c;return _0x574d0f=Object[_0x2fa12c(0xb6)]||function(_0x46228f){const _0x86ddea=_0x2fa12c;var _0x24bf13=[];for(var _0x33c5ee in _0x46228f)if(Object[_0x86ddea(0xa0)][_0x86ddea(0x96)][_0x86ddea(0xbe)](_0x46228f,_0x33c5ee))_0x24bf13[_0x24bf13['length']]=_0x33c5ee;return _0x24bf13;},_0x574d0f(_0x3a22c5);};return function(_0xf344db){const _0x28f10d=a4_0x441c;if(_0xf344db&&_0xf344db['__esModule'])return _0xf344db;var _0xd2e2ad={};if(_0xf344db!=null){for(var _0x2fea62=_0x574d0f(_0xf344db),_0x584ae6=0x0;_0x584ae6<_0x2fea62[_0x28f10d(0xb4)];_0x584ae6++)if(_0x2fea62[_0x584ae6]!==_0x28f10d(0xb0))__createBinding(_0xd2e2ad,_0xf344db,_0x2fea62[_0x584ae6]);}return __setModuleDefault(_0xd2e2ad,_0xf344db),_0xd2e2ad;};}());Object[a4_0xf1315a(0xac)](exports,'__esModule',{'value':!![]}),exports[a4_0xf1315a(0xa7)]=void 0x0;const authService_1=require(a4_0xf1315a(0x9b)),tokenBlacklistService_1=require(a4_0xf1315a(0xbc)),telegramBotService_1=require(a4_0xf1315a(0x91));class AuthController{constructor(){const _0x4e1060=a4_0xf1315a;this[_0x4e1060(0xae)]=async(_0x547125,_0x3411eb,_0x427a11)=>{const _0x24640c=_0x4e1060;try{const _0x564b21=_0x547125['body'],_0x57b690=_0x547125['ip']||_0x547125[_0x24640c(0x98)]['remoteAddress']||_0x24640c(0x90),_0x3a551e=_0x547125['get']('User-Agent')||_0x24640c(0x90);let _0x1a36f1=![],_0xac2faf=null;try{const _0x2f1be5=await this[_0x24640c(0xa3)][_0x24640c(0xae)](_0x564b21);_0x1a36f1=!![],_0x2f1be5[_0x24640c(0x8f)]==='shop'&&_0x2f1be5['user']?.['id']&&(_0xac2faf=_0x2f1be5[_0x24640c(0xb8)]['id']),_0xac2faf&&await telegramBotService_1['telegramBotService'][_0x24640c(0x9d)](_0xac2faf,{'username':_0x564b21[_0x24640c(0xb1)],'ipAddress':_0x57b690,'userAgent':_0x3a551e,'timestamp':new Date(),'success':!![]}),_0x3411eb[_0x24640c(0xb5)]({'success':!![],'result':_0x2f1be5});}catch(_0x508dbf){try{const _0x4768e2=(await Promise[_0x24640c(0xb7)]()[_0x24640c(0xa9)](()=>__importStar(require('../config/database'))))[_0x24640c(0xb0)],_0x2656d0=await _0x4768e2[_0x24640c(0x9e)][_0x24640c(0xa8)]({'where':{'username':_0x564b21[_0x24640c(0xb1)]},'select':{'id':!![]}});_0x2656d0&&await telegramBotService_1['telegramBotService'][_0x24640c(0x9d)](_0x2656d0['id'],{'username':_0x564b21['username'],'ipAddress':_0x57b690,'userAgent':_0x3a551e,'timestamp':new Date(),'success':![]});}catch(_0x278c6b){console[_0x24640c(0x9f)](_0x24640c(0xad),_0x278c6b);}throw _0x508dbf;}}catch(_0x248b46){_0x427a11(_0x248b46);}},this['me']=async(_0xf0e904,_0x4beb59,_0x49ac8e)=>{const _0x2662e6=_0x4e1060;try{const _0x8ddc52=_0xf0e904[_0x2662e6(0xb8)];_0x4beb59[_0x2662e6(0xb5)]({'success':!![],'result':{'id':_0x8ddc52?.['id'],'username':_0x8ddc52?.[_0x2662e6(0xb1)],'role':_0x8ddc52?.[_0x2662e6(0x8f)]}});}catch(_0x45393){_0x49ac8e(_0x45393);}},this['logout']=async(_0x1a884e,_0x55252a,_0x2220cd)=>{const _0x4b75b0=_0x4e1060;try{const _0xc06563=_0x1a884e[_0x4b75b0(0xa5)],_0xfa4437=_0x1a884e[_0x4b75b0(0xb8)];_0xc06563&&_0xfa4437?.[_0x4b75b0(0x97)]&&tokenBlacklistService_1[_0x4b75b0(0x99)][_0x4b75b0(0xab)](_0xc06563,_0xfa4437[_0x4b75b0(0x97)]),_0x55252a[_0x4b75b0(0xb5)]({'success':!![],'message':'Logged\x20out\x20successfully'});}catch(_0x75cd1e){_0x2220cd(_0x75cd1e);}},this[_0x4e1060(0xb2)]=async(_0x1a2268,_0x4b83fe,_0x7c6b70)=>{const _0x2e2892=_0x4e1060;try{const _0x2d3c4d=tokenBlacklistService_1[_0x2e2892(0x99)][_0x2e2892(0xaf)]();_0x4b83fe[_0x2e2892(0xb5)]({'success':!![],'result':_0x2d3c4d});}catch(_0x2d64ab){_0x7c6b70(_0x2d64ab);}},this['authService']=new authService_1[(_0x4e1060(0xbf))]();}}exports[a4_0xf1315a(0xa7)]=AuthController;