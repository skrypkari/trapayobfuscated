'use strict';const a4_0x29b395=a4_0x4c54;(function(_0x20d2de,_0xbb80cd){const _0x3d766f=a4_0x4c54,_0x45aa7f=_0x20d2de();while(!![]){try{const _0x4e9080=-parseInt(_0x3d766f(0xb2))/0x1+parseInt(_0x3d766f(0xcd))/0x2+parseInt(_0x3d766f(0xb3))/0x3+-parseInt(_0x3d766f(0xc3))/0x4+-parseInt(_0x3d766f(0xb5))/0x5*(-parseInt(_0x3d766f(0xcf))/0x6)+-parseInt(_0x3d766f(0xaf))/0x7*(parseInt(_0x3d766f(0xb1))/0x8)+-parseInt(_0x3d766f(0xc4))/0x9;if(_0x4e9080===_0xbb80cd)break;else _0x45aa7f['push'](_0x45aa7f['shift']());}catch(_0x5efdc4){_0x45aa7f['push'](_0x45aa7f['shift']());}}}(a4_0x290e,0x65098));var __createBinding=this&&this[a4_0x29b395(0xb4)]||(Object[a4_0x29b395(0xc8)]?function(_0x395eea,_0x5111e1,_0x25fa4e,_0x3e027f){const _0x54868a=a4_0x29b395;if(_0x3e027f===undefined)_0x3e027f=_0x25fa4e;var _0x1d30ee=Object[_0x54868a(0xa7)](_0x5111e1,_0x25fa4e);(!_0x1d30ee||('get'in _0x1d30ee?!_0x5111e1['__esModule']:_0x1d30ee[_0x54868a(0xb8)]||_0x1d30ee['configurable']))&&(_0x1d30ee={'enumerable':!![],'get':function(){return _0x5111e1[_0x25fa4e];}}),Object[_0x54868a(0xa5)](_0x395eea,_0x3e027f,_0x1d30ee);}:function(_0x48072e,_0x26ef9b,_0x2ed272,_0x5c7903){if(_0x5c7903===undefined)_0x5c7903=_0x2ed272;_0x48072e[_0x5c7903]=_0x26ef9b[_0x2ed272];}),__setModuleDefault=this&&this[a4_0x29b395(0xbc)]||(Object['create']?function(_0x53009a,_0x8ba064){const _0x14edd1=a4_0x29b395;Object[_0x14edd1(0xa5)](_0x53009a,_0x14edd1(0xb0),{'enumerable':!![],'value':_0x8ba064});}:function(_0x1e1fa8,_0x200937){_0x1e1fa8['default']=_0x200937;}),__importStar=this&&this[a4_0x29b395(0xbd)]||(function(){var _0x1744a8=function(_0x44898f){return _0x1744a8=Object['getOwnPropertyNames']||function(_0x30c868){const _0xa72cb1=a4_0x4c54;var _0x24a723=[];for(var _0x297a4c in _0x30c868)if(Object[_0xa72cb1(0xa4)][_0xa72cb1(0xab)][_0xa72cb1(0xba)](_0x30c868,_0x297a4c))_0x24a723[_0x24a723[_0xa72cb1(0xcb)]]=_0x297a4c;return _0x24a723;},_0x1744a8(_0x44898f);};return function(_0x4c24c9){if(_0x4c24c9&&_0x4c24c9['__esModule'])return _0x4c24c9;var _0x4af526={};if(_0x4c24c9!=null){for(var _0x226aa0=_0x1744a8(_0x4c24c9),_0x3c6f3e=0x0;_0x3c6f3e<_0x226aa0['length'];_0x3c6f3e++)if(_0x226aa0[_0x3c6f3e]!=='default')__createBinding(_0x4af526,_0x4c24c9,_0x226aa0[_0x3c6f3e]);}return __setModuleDefault(_0x4af526,_0x4c24c9),_0x4af526;};}());function a4_0x4c54(_0x31dcf9,_0x43f80c){_0x31dcf9=_0x31dcf9-0xa4;const _0x290e7c=a4_0x290e();let _0x4c5408=_0x290e7c[_0x31dcf9];return _0x4c5408;}Object[a4_0x29b395(0xa5)](exports,'__esModule',{'value':!![]}),exports[a4_0x29b395(0xcc)]=void 0x0;const authService_1=require('../services/authService'),tokenBlacklistService_1=require(a4_0x29b395(0xb6)),telegramBotService_1=require(a4_0x29b395(0xae));class AuthController{constructor(){const _0x4fef88=a4_0x29b395;this[_0x4fef88(0xc2)]=async(_0x455b43,_0x2b0487,_0x234415)=>{const _0x26c22c=_0x4fef88;try{const _0xf17810=_0x455b43[_0x26c22c(0xb9)],_0x413b00=_0xf17810['ipAddress']||_0x455b43['ip']||_0x455b43[_0x26c22c(0xd1)]['remoteAddress']||_0x26c22c(0xd0),_0x366c84=_0xf17810[_0x26c22c(0xb7)]||_0x455b43['get'](_0x26c22c(0xad))||_0x26c22c(0xd0),_0x3eff93=_0xf17810['geo'];let _0x256473=![],_0x4e430a=null;try{const _0x705dae=await this['authService'][_0x26c22c(0xc2)](_0xf17810);_0x256473=!![],_0x705dae[_0x26c22c(0xa9)]===_0x26c22c(0xa6)&&_0x705dae[_0x26c22c(0xca)]?.['id']&&(_0x4e430a=_0x705dae[_0x26c22c(0xca)]['id']),_0x4e430a&&await telegramBotService_1['telegramBotService']['sendLoginNotification'](_0x4e430a,{'username':_0xf17810[_0x26c22c(0xa8)],'ipAddress':_0x413b00,'userAgent':_0x366c84,'geo':_0x3eff93,'timestamp':new Date(),'success':!![]}),_0x2b0487['json']({'success':!![],'result':_0x705dae});}catch(_0x53dc21){try{const _0xdb08cb=(await Promise['resolve']()[_0x26c22c(0xbb)](()=>__importStar(require('../config/database'))))['default'],_0x1b777a=await _0xdb08cb['shop'][_0x26c22c(0xce)]({'where':{'username':_0xf17810[_0x26c22c(0xa8)]},'select':{'id':!![]}});_0x1b777a&&await telegramBotService_1[_0x26c22c(0xc7)][_0x26c22c(0xc5)](_0x1b777a['id'],{'username':_0xf17810[_0x26c22c(0xa8)],'ipAddress':_0x413b00,'userAgent':_0x366c84,'geo':_0x3eff93,'timestamp':new Date(),'success':![]});}catch(_0x2ef00c){console[_0x26c22c(0xc6)](_0x26c22c(0xbe),_0x2ef00c);}throw _0x53dc21;}}catch(_0x308d9d){_0x234415(_0x308d9d);}},this['me']=async(_0x57e41b,_0x31172d,_0x50ddac)=>{const _0x528656=_0x4fef88;try{const _0x15452e=_0x57e41b[_0x528656(0xca)];_0x31172d[_0x528656(0xbf)]({'success':!![],'result':{'id':_0x15452e?.['id'],'username':_0x15452e?.['username'],'role':_0x15452e?.['role']}});}catch(_0x4d1006){_0x50ddac(_0x4d1006);}},this[_0x4fef88(0xc0)]=async(_0x316c9e,_0x41ca37,_0x5c8258)=>{const _0x126772=_0x4fef88;try{const _0x3b2768=_0x316c9e['token'],_0xd1ba76=_0x316c9e['user'];_0x3b2768&&_0xd1ba76?.['exp']&&tokenBlacklistService_1['tokenBlacklistService']['blacklistToken'](_0x3b2768,_0xd1ba76[_0x126772(0xac)]),_0x41ca37[_0x126772(0xbf)]({'success':!![],'message':_0x126772(0xc9)});}catch(_0x5da070){_0x5c8258(_0x5da070);}},this[_0x4fef88(0xaa)]=async(_0x4ad68b,_0x54de16,_0x18a3fc)=>{const _0x16d3f7=_0x4fef88;try{const _0x1636de=tokenBlacklistService_1['tokenBlacklistService']['getStats']();_0x54de16[_0x16d3f7(0xbf)]({'success':!![],'result':_0x1636de});}catch(_0x2385fe){_0x18a3fc(_0x2385fe);}},this[_0x4fef88(0xc1)]=new authService_1['AuthService']();}}function a4_0x290e(){const _0x3b24dd=['1194540jZWHdm','6166296JkWexu','sendLoginNotification','error','telegramBotService','create','Logged\x20out\x20successfully','user','length','AuthController','1452498YCiFfD','findUnique','2708850uWbqjE','unknown','connection','prototype','defineProperty','shop','getOwnPropertyDescriptor','username','role','getBlacklistStats','hasOwnProperty','exp','User-Agent','../services/telegramBotService','2401dFqUrc','default','1816rogNVC','185427zfobhQ','1449573QOBndC','__createBinding','5rpFWgI','../services/tokenBlacklistService','userAgent','writable','body','call','then','__setModuleDefault','__importStar','Failed\x20to\x20send\x20failed\x20login\x20notification:','json','logout','authService','login'];a4_0x290e=function(){return _0x3b24dd;};return a4_0x290e();}exports[a4_0x29b395(0xcc)]=AuthController;