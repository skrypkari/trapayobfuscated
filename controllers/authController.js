'use strict';const a4_0xda1617=a4_0xbf79;(function(_0xedcaa1,_0x29aaa0){const _0x5eb34d=a4_0xbf79,_0x14e180=_0xedcaa1();while(!![]){try{const _0x28e95a=-parseInt(_0x5eb34d(0x1df))/0x1+parseInt(_0x5eb34d(0x1e9))/0x2+parseInt(_0x5eb34d(0x1d3))/0x3*(parseInt(_0x5eb34d(0x1d5))/0x4)+parseInt(_0x5eb34d(0x1e8))/0x5+-parseInt(_0x5eb34d(0x1d8))/0x6+-parseInt(_0x5eb34d(0x1da))/0x7*(-parseInt(_0x5eb34d(0x1c2))/0x8)+-parseInt(_0x5eb34d(0x1c0))/0x9;if(_0x28e95a===_0x29aaa0)break;else _0x14e180['push'](_0x14e180['shift']());}catch(_0x2a3fed){_0x14e180['push'](_0x14e180['shift']());}}}(a4_0x17e5,0xe1dc8));function a4_0xbf79(_0x5767af,_0x43e16a){const _0x17e58b=a4_0x17e5();return a4_0xbf79=function(_0xbf7986,_0x53132c){_0xbf7986=_0xbf7986-0x1bf;let _0x150dcd=_0x17e58b[_0xbf7986];return _0x150dcd;},a4_0xbf79(_0x5767af,_0x43e16a);}function a4_0x17e5(){const _0x7f3374=['1089112oXYIkr','getOwnPropertyNames','token','exp','error','then','22115682QBJzLD','body','72EWyZsf','create','sendLoginNotification','blacklistToken','Failed\x20to\x20send\x20failed\x20login\x20notification:','__esModule','__setModuleDefault','getStats','configurable','../services/tokenBlacklistService','authService','logout','../config/database','login','call','Logged\x20out\x20successfully','getOwnPropertyDescriptor','606PGijXI','resolve','31948xXzXBi','unknown','default','2118486bwAUaX','telegramBotService','1115835LBcEjV','length','user','role','tokenBlacklistService','1365939ZvjIRJ','User-Agent','json','shop','getBlacklistStats','AuthController','defineProperty','get','username','7544355CmjWQU'];a4_0x17e5=function(){return _0x7f3374;};return a4_0x17e5();}var __createBinding=this&&this['__createBinding']||(Object[a4_0xda1617(0x1c3)]?function(_0x1cf9d8,_0x1d3df0,_0x27091b,_0x38e355){const _0x472682=a4_0xda1617;if(_0x38e355===undefined)_0x38e355=_0x27091b;var _0x4a0cc6=Object[_0x472682(0x1d2)](_0x1d3df0,_0x27091b);(!_0x4a0cc6||(_0x472682(0x1e6)in _0x4a0cc6?!_0x1d3df0['__esModule']:_0x4a0cc6['writable']||_0x4a0cc6[_0x472682(0x1ca)]))&&(_0x4a0cc6={'enumerable':!![],'get':function(){return _0x1d3df0[_0x27091b];}}),Object['defineProperty'](_0x1cf9d8,_0x38e355,_0x4a0cc6);}:function(_0x1e0de8,_0x4dea19,_0x558b56,_0x5e86c2){if(_0x5e86c2===undefined)_0x5e86c2=_0x558b56;_0x1e0de8[_0x5e86c2]=_0x4dea19[_0x558b56];}),__setModuleDefault=this&&this[a4_0xda1617(0x1c8)]||(Object[a4_0xda1617(0x1c3)]?function(_0x1a17ff,_0x57c9cd){const _0x113ee5=a4_0xda1617;Object[_0x113ee5(0x1e5)](_0x1a17ff,_0x113ee5(0x1d7),{'enumerable':!![],'value':_0x57c9cd});}:function(_0x4a78d7,_0x234d82){_0x4a78d7['default']=_0x234d82;}),__importStar=this&&this['__importStar']||(function(){var _0x5b6a5f=function(_0x13d412){const _0x41205b=a4_0xbf79;return _0x5b6a5f=Object[_0x41205b(0x1ea)]||function(_0x328b44){const _0x596213=_0x41205b;var _0x23b91a=[];for(var _0x486459 in _0x328b44)if(Object['prototype']['hasOwnProperty'][_0x596213(0x1d0)](_0x328b44,_0x486459))_0x23b91a[_0x23b91a[_0x596213(0x1db)]]=_0x486459;return _0x23b91a;},_0x5b6a5f(_0x13d412);};return function(_0x11876a){const _0x318872=a4_0xbf79;if(_0x11876a&&_0x11876a[_0x318872(0x1c7)])return _0x11876a;var _0x41adff={};if(_0x11876a!=null){for(var _0x27f19a=_0x5b6a5f(_0x11876a),_0x3a74ab=0x0;_0x3a74ab<_0x27f19a['length'];_0x3a74ab++)if(_0x27f19a[_0x3a74ab]!==_0x318872(0x1d7))__createBinding(_0x41adff,_0x11876a,_0x27f19a[_0x3a74ab]);}return __setModuleDefault(_0x41adff,_0x11876a),_0x41adff;};}());Object[a4_0xda1617(0x1e5)](exports,a4_0xda1617(0x1c7),{'value':!![]}),exports[a4_0xda1617(0x1e4)]=void 0x0;const authService_1=require('../services/authService'),tokenBlacklistService_1=require(a4_0xda1617(0x1cb)),telegramBotService_1=require('../services/telegramBotService');class AuthController{constructor(){const _0x1f9bc8=a4_0xda1617;this[_0x1f9bc8(0x1cf)]=async(_0x1cc002,_0x90e639,_0xbb986f)=>{const _0x27d96d=_0x1f9bc8;try{const _0xbc39f=_0x1cc002[_0x27d96d(0x1c1)],_0x3571ad=_0x1cc002['ip']||_0x1cc002['connection']['remoteAddress']||_0x27d96d(0x1d6),_0x11df89=_0x1cc002['get'](_0x27d96d(0x1e0))||_0x27d96d(0x1d6);let _0x1e17c0=![],_0x1f9c58=null;try{const _0x231b65=await this[_0x27d96d(0x1cc)]['login'](_0xbc39f);_0x1e17c0=!![],_0x231b65[_0x27d96d(0x1dd)]===_0x27d96d(0x1e2)&&_0x231b65[_0x27d96d(0x1dc)]?.['id']&&(_0x1f9c58=_0x231b65[_0x27d96d(0x1dc)]['id']),_0x1f9c58&&await telegramBotService_1['telegramBotService']['sendLoginNotification'](_0x1f9c58,{'username':_0xbc39f['username'],'ipAddress':_0x3571ad,'userAgent':_0x11df89,'timestamp':new Date(),'success':!![]}),_0x90e639[_0x27d96d(0x1e1)]({'success':!![],'result':_0x231b65});}catch(_0x1996a8){try{const _0x280cf8=(await Promise[_0x27d96d(0x1d4)]()[_0x27d96d(0x1bf)](()=>__importStar(require(_0x27d96d(0x1ce)))))['default'],_0x14b2c7=await _0x280cf8[_0x27d96d(0x1e2)]['findUnique']({'where':{'username':_0xbc39f[_0x27d96d(0x1e7)]},'select':{'id':!![]}});_0x14b2c7&&await telegramBotService_1[_0x27d96d(0x1d9)][_0x27d96d(0x1c4)](_0x14b2c7['id'],{'username':_0xbc39f[_0x27d96d(0x1e7)],'ipAddress':_0x3571ad,'userAgent':_0x11df89,'timestamp':new Date(),'success':![]});}catch(_0x401133){console[_0x27d96d(0x1ed)](_0x27d96d(0x1c6),_0x401133);}throw _0x1996a8;}}catch(_0x4fd44f){_0xbb986f(_0x4fd44f);}},this['me']=async(_0x3419d8,_0x52be02,_0x1fa0ea)=>{const _0x544105=_0x1f9bc8;try{const _0xdeb411=_0x3419d8[_0x544105(0x1dc)];_0x52be02['json']({'success':!![],'result':{'id':_0xdeb411?.['id'],'username':_0xdeb411?.['username'],'role':_0xdeb411?.[_0x544105(0x1dd)]}});}catch(_0xacdbb0){_0x1fa0ea(_0xacdbb0);}},this[_0x1f9bc8(0x1cd)]=async(_0x1c6201,_0x3147fb,_0x3b9192)=>{const _0x842ee8=_0x1f9bc8;try{const _0x529cb6=_0x1c6201[_0x842ee8(0x1eb)],_0x1840b1=_0x1c6201[_0x842ee8(0x1dc)];_0x529cb6&&_0x1840b1?.[_0x842ee8(0x1ec)]&&tokenBlacklistService_1[_0x842ee8(0x1de)][_0x842ee8(0x1c5)](_0x529cb6,_0x1840b1[_0x842ee8(0x1ec)]),_0x3147fb['json']({'success':!![],'message':_0x842ee8(0x1d1)});}catch(_0x27c422){_0x3b9192(_0x27c422);}},this[_0x1f9bc8(0x1e3)]=async(_0x362d48,_0x2d8ec4,_0x5c124)=>{const _0xa9665e=_0x1f9bc8;try{const _0x756f3f=tokenBlacklistService_1[_0xa9665e(0x1de)][_0xa9665e(0x1c9)]();_0x2d8ec4[_0xa9665e(0x1e1)]({'success':!![],'result':_0x756f3f});}catch(_0x36a228){_0x5c124(_0x36a228);}},this['authService']=new authService_1['AuthService']();}}exports[a4_0xda1617(0x1e4)]=AuthController;