'use strict';const a4_0x13d212=a4_0x30c0;function a4_0x318c(){const _0x5d628f=['username','then','1781384XzLonW','../services/authService','Logged\x20out\x20successfully','default','token','15zKrnVw','remoteAddress','AuthService','login','body','../services/tokenBlacklistService','logout','defineProperty','../config/database','getOwnPropertyDescriptor','101925OYWWrL','unknown','ipAddress','create','99340rXmWnq','user','json','authService','geo','__setModuleDefault','sendLoginNotification','getStats','telegramBotService','call','tokenBlacklistService','__importStar','AuthController','__createBinding','hasOwnProperty','17974IiAPfh','exp','configurable','resolve','shop','../services/telegramBotService','length','__esModule','role','prototype','getBlacklistStats','findUnique','getOwnPropertyNames','4486248HYOWPJ','62474EmUjmT','286890fsoctS','7KqCjmn'];a4_0x318c=function(){return _0x5d628f;};return a4_0x318c();}(function(_0x2d0409,_0x54dd27){const _0x31d273=a4_0x30c0,_0xddbc51=_0x2d0409();while(!![]){try{const _0x3c6495=-parseInt(_0x31d273(0x208))/0x1+-parseInt(_0x31d273(0x216))/0x2*(parseInt(_0x31d273(0x220))/0x3)+-parseInt(_0x31d273(0x1f9))/0x4+parseInt(_0x31d273(0x1f5))/0x5+parseInt(_0x31d273(0x217))/0x6*(parseInt(_0x31d273(0x218))/0x7)+-parseInt(_0x31d273(0x21b))/0x8+parseInt(_0x31d273(0x215))/0x9;if(_0x3c6495===_0x54dd27)break;else _0xddbc51['push'](_0xddbc51['shift']());}catch(_0x441676){_0xddbc51['push'](_0xddbc51['shift']());}}}(a4_0x318c,0x2366d));function a4_0x30c0(_0x5e6453,_0x446773){const _0x318cb0=a4_0x318c();return a4_0x30c0=function(_0x30c0b6,_0x2ba139){_0x30c0b6=_0x30c0b6-0x1ed;let _0x32cbe9=_0x318cb0[_0x30c0b6];return _0x32cbe9;},a4_0x30c0(_0x5e6453,_0x446773);}var __createBinding=this&&this[a4_0x13d212(0x206)]||(Object['create']?function(_0x27c8a0,_0x107782,_0x3af684,_0x284336){const _0x5383d4=a4_0x13d212;if(_0x284336===undefined)_0x284336=_0x3af684;var _0x199a8e=Object[_0x5383d4(0x1f4)](_0x107782,_0x3af684);(!_0x199a8e||('get'in _0x199a8e?!_0x107782[_0x5383d4(0x20f)]:_0x199a8e['writable']||_0x199a8e[_0x5383d4(0x20a)]))&&(_0x199a8e={'enumerable':!![],'get':function(){return _0x107782[_0x3af684];}}),Object['defineProperty'](_0x27c8a0,_0x284336,_0x199a8e);}:function(_0x1b4ef1,_0x464d1f,_0x402750,_0x35d501){if(_0x35d501===undefined)_0x35d501=_0x402750;_0x1b4ef1[_0x35d501]=_0x464d1f[_0x402750];}),__setModuleDefault=this&&this[a4_0x13d212(0x1fe)]||(Object[a4_0x13d212(0x1f8)]?function(_0x193825,_0x2139f6){const _0xe0df12=a4_0x13d212;Object[_0xe0df12(0x1f2)](_0x193825,'default',{'enumerable':!![],'value':_0x2139f6});}:function(_0x591509,_0x1ae692){const _0x7c1e0b=a4_0x13d212;_0x591509[_0x7c1e0b(0x21e)]=_0x1ae692;}),__importStar=this&&this[a4_0x13d212(0x204)]||(function(){var _0x16c6fb=function(_0x1a25bd){const _0x4cfbe5=a4_0x30c0;return _0x16c6fb=Object[_0x4cfbe5(0x214)]||function(_0x1aaa25){const _0x4dffc5=_0x4cfbe5;var _0x16213f=[];for(var _0x5429f1 in _0x1aaa25)if(Object[_0x4dffc5(0x211)][_0x4dffc5(0x207)][_0x4dffc5(0x202)](_0x1aaa25,_0x5429f1))_0x16213f[_0x16213f[_0x4dffc5(0x20e)]]=_0x5429f1;return _0x16213f;},_0x16c6fb(_0x1a25bd);};return function(_0x2515ee){const _0x5b6893=a4_0x30c0;if(_0x2515ee&&_0x2515ee[_0x5b6893(0x20f)])return _0x2515ee;var _0xf45a94={};if(_0x2515ee!=null){for(var _0x4e60de=_0x16c6fb(_0x2515ee),_0x1717f3=0x0;_0x1717f3<_0x4e60de[_0x5b6893(0x20e)];_0x1717f3++)if(_0x4e60de[_0x1717f3]!==_0x5b6893(0x21e))__createBinding(_0xf45a94,_0x2515ee,_0x4e60de[_0x1717f3]);}return __setModuleDefault(_0xf45a94,_0x2515ee),_0xf45a94;};}());Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a4_0x13d212(0x205)]=void 0x0;const authService_1=require(a4_0x13d212(0x21c)),tokenBlacklistService_1=require(a4_0x13d212(0x1f0)),telegramBotService_1=require(a4_0x13d212(0x20d));class AuthController{constructor(){const _0xf95c0=a4_0x13d212;this[_0xf95c0(0x1ee)]=async(_0x380319,_0xc953ad,_0x79e443)=>{const _0x3b208e=_0xf95c0;try{const _0x1d4699=_0x380319[_0x3b208e(0x1ef)],_0x3e8bd6=_0x1d4699[_0x3b208e(0x1f7)]||_0x380319['ip']||_0x380319['connection'][_0x3b208e(0x221)]||_0x3b208e(0x1f6),_0x3e22e0=_0x1d4699['userAgent']||_0x380319['get']('User-Agent')||_0x3b208e(0x1f6),_0x28a97c=_0x1d4699[_0x3b208e(0x1fd)];let _0x189ad4=![],_0x1a2db8=null;try{const _0x4490f1=await this[_0x3b208e(0x1fc)][_0x3b208e(0x1ee)](_0x1d4699);_0x189ad4=!![],_0x4490f1[_0x3b208e(0x210)]==='shop'&&_0x4490f1[_0x3b208e(0x1fa)]?.['id']&&(_0x1a2db8=_0x4490f1[_0x3b208e(0x1fa)]['id']),_0x1a2db8&&await telegramBotService_1[_0x3b208e(0x201)][_0x3b208e(0x1ff)](_0x1a2db8,{'username':_0x1d4699[_0x3b208e(0x219)],'ipAddress':_0x3e8bd6,'userAgent':_0x3e22e0,'geo':_0x28a97c,'timestamp':new Date(),'success':!![]}),_0xc953ad[_0x3b208e(0x1fb)]({'success':!![],'result':_0x4490f1});}catch(_0x21f358){try{const _0x4bc356=(await Promise[_0x3b208e(0x20b)]()[_0x3b208e(0x21a)](()=>__importStar(require(_0x3b208e(0x1f3)))))['default'],_0x500245=await _0x4bc356[_0x3b208e(0x20c)][_0x3b208e(0x213)]({'where':{'username':_0x1d4699[_0x3b208e(0x219)]},'select':{'id':!![]}});_0x500245&&await telegramBotService_1[_0x3b208e(0x201)][_0x3b208e(0x1ff)](_0x500245['id'],{'username':_0x1d4699['username'],'ipAddress':_0x3e8bd6,'userAgent':_0x3e22e0,'geo':_0x28a97c,'timestamp':new Date(),'success':![]});}catch(_0x5b71d7){console['error']('Failed\x20to\x20send\x20failed\x20login\x20notification:',_0x5b71d7);}throw _0x21f358;}}catch(_0x4cdea1){_0x79e443(_0x4cdea1);}},this['me']=async(_0x43e2f0,_0x196252,_0xe5ed9f)=>{const _0x502a02=_0xf95c0;try{const _0x5cd779=_0x43e2f0[_0x502a02(0x1fa)];_0x196252[_0x502a02(0x1fb)]({'success':!![],'result':{'id':_0x5cd779?.['id'],'username':_0x5cd779?.['username'],'role':_0x5cd779?.[_0x502a02(0x210)]}});}catch(_0x3ca9df){_0xe5ed9f(_0x3ca9df);}},this[_0xf95c0(0x1f1)]=async(_0x198450,_0xcaf935,_0x24b4da)=>{const _0x55f5c5=_0xf95c0;try{const _0x33f503=_0x198450[_0x55f5c5(0x21f)],_0x29e0e8=_0x198450[_0x55f5c5(0x1fa)];_0x33f503&&_0x29e0e8?.[_0x55f5c5(0x209)]&&tokenBlacklistService_1[_0x55f5c5(0x203)]['blacklistToken'](_0x33f503,_0x29e0e8[_0x55f5c5(0x209)]),_0xcaf935['json']({'success':!![],'message':_0x55f5c5(0x21d)});}catch(_0x46b7b3){_0x24b4da(_0x46b7b3);}},this[_0xf95c0(0x212)]=async(_0x571b03,_0x40d49c,_0x1f0219)=>{const _0x4f1cb5=_0xf95c0;try{const _0x11d270=tokenBlacklistService_1[_0x4f1cb5(0x203)][_0x4f1cb5(0x200)]();_0x40d49c[_0x4f1cb5(0x1fb)]({'success':!![],'result':_0x11d270});}catch(_0x41de77){_0x1f0219(_0x41de77);}},this[_0xf95c0(0x1fc)]=new authService_1[(_0xf95c0(0x1ed))]();}}exports[a4_0x13d212(0x205)]=AuthController;