'use strict';const a4_0x1e79e2=a4_0x5caf;(function(_0x1bf069,_0x22fb2d){const _0x3bc5d2=a4_0x5caf,_0x3e61bc=_0x1bf069();while(!![]){try{const _0x4a7799=parseInt(_0x3bc5d2(0x106))/0x1*(-parseInt(_0x3bc5d2(0x118))/0x2)+parseInt(_0x3bc5d2(0x130))/0x3+-parseInt(_0x3bc5d2(0x102))/0x4*(parseInt(_0x3bc5d2(0x12b))/0x5)+parseInt(_0x3bc5d2(0x113))/0x6*(-parseInt(_0x3bc5d2(0x119))/0x7)+-parseInt(_0x3bc5d2(0x114))/0x8*(parseInt(_0x3bc5d2(0x117))/0x9)+parseInt(_0x3bc5d2(0x131))/0xa*(parseInt(_0x3bc5d2(0x120))/0xb)+-parseInt(_0x3bc5d2(0x10c))/0xc*(-parseInt(_0x3bc5d2(0x10f))/0xd);if(_0x4a7799===_0x22fb2d)break;else _0x3e61bc['push'](_0x3e61bc['shift']());}catch(_0x21e346){_0x3e61bc['push'](_0x3e61bc['shift']());}}}(a4_0x11ed,0xe22ac));function a4_0x5caf(_0x27e240,_0x40c19c){const _0x11edf3=a4_0x11ed();return a4_0x5caf=function(_0x5caf34,_0x5d017b){_0x5caf34=_0x5caf34-0x101;let _0x399134=_0x11edf3[_0x5caf34];return _0x399134;},a4_0x5caf(_0x27e240,_0x40c19c);}function a4_0x11ed(){const _0x3dd2a6=['5100SGoQqU','defineProperty','unknown','../services/tokenBlacklistService','sendLoginNotification','authService','default','findUnique','body','getOwnPropertyNames','52BajTyJ','User-Agent','AuthService','logout','2741hyNbcV','resolve','exp','role','shop','getStats','696VOSQoq','token','__esModule','1008397Qsdmsv','Logged\x20out\x20successfully','json','username','9798pickMV','12888928IrpNTs','__setModuleDefault','remoteAddress','9DkXDxt','1142weofxg','3192dPcxHE','hasOwnProperty','getOwnPropertyDescriptor','prototype','__createBinding','create','getBlacklistStats','39941vrACTR','tokenBlacklistService','AuthController','length','error','writable','then','call','connection','get','blacklistToken','627395ZmgWUW','../services/authService','user','login','../config/database','383010PkjmgB'];a4_0x11ed=function(){return _0x3dd2a6;};return a4_0x11ed();}var __createBinding=this&&this[a4_0x1e79e2(0x11d)]||(Object['create']?function(_0xbdad31,_0x3e8e4c,_0x3dcb1f,_0x525d2f){const _0x96e7af=a4_0x1e79e2;if(_0x525d2f===undefined)_0x525d2f=_0x3dcb1f;var _0x58752c=Object[_0x96e7af(0x11b)](_0x3e8e4c,_0x3dcb1f);(!_0x58752c||('get'in _0x58752c?!_0x3e8e4c[_0x96e7af(0x10e)]:_0x58752c[_0x96e7af(0x125)]||_0x58752c['configurable']))&&(_0x58752c={'enumerable':!![],'get':function(){return _0x3e8e4c[_0x3dcb1f];}}),Object[_0x96e7af(0x132)](_0xbdad31,_0x525d2f,_0x58752c);}:function(_0x4fd424,_0x2a2364,_0x51e252,_0x3a662d){if(_0x3a662d===undefined)_0x3a662d=_0x51e252;_0x4fd424[_0x3a662d]=_0x2a2364[_0x51e252];}),__setModuleDefault=this&&this[a4_0x1e79e2(0x115)]||(Object[a4_0x1e79e2(0x11e)]?function(_0x38c24d,_0x40828a){const _0x1d3558=a4_0x1e79e2;Object[_0x1d3558(0x132)](_0x38c24d,_0x1d3558(0x137),{'enumerable':!![],'value':_0x40828a});}:function(_0x412809,_0x36eec4){const _0x5a47cf=a4_0x1e79e2;_0x412809[_0x5a47cf(0x137)]=_0x36eec4;}),__importStar=this&&this['__importStar']||(function(){var _0x454e73=function(_0x3217b6){const _0x5b1091=a4_0x5caf;return _0x454e73=Object[_0x5b1091(0x101)]||function(_0x3ac27f){const _0x59af21=_0x5b1091;var _0x849924=[];for(var _0x487882 in _0x3ac27f)if(Object[_0x59af21(0x11c)][_0x59af21(0x11a)][_0x59af21(0x127)](_0x3ac27f,_0x487882))_0x849924[_0x849924[_0x59af21(0x123)]]=_0x487882;return _0x849924;},_0x454e73(_0x3217b6);};return function(_0x1a3b01){const _0x5c38ec=a4_0x5caf;if(_0x1a3b01&&_0x1a3b01[_0x5c38ec(0x10e)])return _0x1a3b01;var _0x51e039={};if(_0x1a3b01!=null){for(var _0x7ebef5=_0x454e73(_0x1a3b01),_0x45007f=0x0;_0x45007f<_0x7ebef5[_0x5c38ec(0x123)];_0x45007f++)if(_0x7ebef5[_0x45007f]!==_0x5c38ec(0x137))__createBinding(_0x51e039,_0x1a3b01,_0x7ebef5[_0x45007f]);}return __setModuleDefault(_0x51e039,_0x1a3b01),_0x51e039;};}());Object[a4_0x1e79e2(0x132)](exports,a4_0x1e79e2(0x10e),{'value':!![]}),exports[a4_0x1e79e2(0x122)]=void 0x0;const authService_1=require(a4_0x1e79e2(0x12c)),tokenBlacklistService_1=require(a4_0x1e79e2(0x134)),telegramBotService_1=require('../services/telegramBotService');class AuthController{constructor(){const _0x32eb19=a4_0x1e79e2;this[_0x32eb19(0x12e)]=async(_0x1fe0b1,_0x1bbf65,_0x2e98d0)=>{const _0x23a6ba=_0x32eb19;try{const _0x30a6d0=_0x1fe0b1[_0x23a6ba(0x139)],_0x4a2fdc=_0x1fe0b1['ip']||_0x1fe0b1[_0x23a6ba(0x128)][_0x23a6ba(0x116)]||_0x23a6ba(0x133),_0x57dca5=_0x1fe0b1[_0x23a6ba(0x129)](_0x23a6ba(0x103))||_0x23a6ba(0x133);let _0x17be21=![],_0x5ceb32=null;try{const _0x220ad6=await this['authService'][_0x23a6ba(0x12e)](_0x30a6d0);_0x17be21=!![],_0x220ad6[_0x23a6ba(0x109)]===_0x23a6ba(0x10a)&&_0x220ad6[_0x23a6ba(0x12d)]?.['id']&&(_0x5ceb32=_0x220ad6[_0x23a6ba(0x12d)]['id']),_0x5ceb32&&await telegramBotService_1['telegramBotService'][_0x23a6ba(0x135)](_0x5ceb32,{'username':_0x30a6d0[_0x23a6ba(0x112)],'ipAddress':_0x4a2fdc,'userAgent':_0x57dca5,'timestamp':new Date(),'success':!![]}),_0x1bbf65['json']({'success':!![],'result':_0x220ad6});}catch(_0x8a350a){try{const _0xb504c8=(await Promise[_0x23a6ba(0x107)]()[_0x23a6ba(0x126)](()=>__importStar(require(_0x23a6ba(0x12f)))))[_0x23a6ba(0x137)],_0x31aaa1=await _0xb504c8[_0x23a6ba(0x10a)][_0x23a6ba(0x138)]({'where':{'username':_0x30a6d0[_0x23a6ba(0x112)]},'select':{'id':!![]}});_0x31aaa1&&await telegramBotService_1['telegramBotService'][_0x23a6ba(0x135)](_0x31aaa1['id'],{'username':_0x30a6d0[_0x23a6ba(0x112)],'ipAddress':_0x4a2fdc,'userAgent':_0x57dca5,'timestamp':new Date(),'success':![]});}catch(_0x5dd178){console[_0x23a6ba(0x124)]('Failed\x20to\x20send\x20failed\x20login\x20notification:',_0x5dd178);}throw _0x8a350a;}}catch(_0x1edb59){_0x2e98d0(_0x1edb59);}},this['me']=async(_0x1578ea,_0x48828b,_0x407eed)=>{const _0x1c735d=_0x32eb19;try{const _0x56a11d=_0x1578ea[_0x1c735d(0x12d)];_0x48828b['json']({'success':!![],'result':{'id':_0x56a11d?.['id'],'username':_0x56a11d?.[_0x1c735d(0x112)],'role':_0x56a11d?.[_0x1c735d(0x109)]}});}catch(_0xf51caf){_0x407eed(_0xf51caf);}},this[_0x32eb19(0x105)]=async(_0x431081,_0x1cce5f,_0x325229)=>{const _0x2221bb=_0x32eb19;try{const _0x221f85=_0x431081[_0x2221bb(0x10d)],_0x4a2d69=_0x431081['user'];_0x221f85&&_0x4a2d69?.[_0x2221bb(0x108)]&&tokenBlacklistService_1['tokenBlacklistService'][_0x2221bb(0x12a)](_0x221f85,_0x4a2d69[_0x2221bb(0x108)]),_0x1cce5f['json']({'success':!![],'message':_0x2221bb(0x110)});}catch(_0x110a38){_0x325229(_0x110a38);}},this[_0x32eb19(0x11f)]=async(_0x10359e,_0x293afb,_0x39b402)=>{const _0x5cf225=_0x32eb19;try{const _0x36c7f5=tokenBlacklistService_1[_0x5cf225(0x121)][_0x5cf225(0x10b)]();_0x293afb[_0x5cf225(0x111)]({'success':!![],'result':_0x36c7f5});}catch(_0x124c13){_0x39b402(_0x124c13);}},this[_0x32eb19(0x136)]=new authService_1[(_0x32eb19(0x104))]();}}exports[a4_0x1e79e2(0x122)]=AuthController;