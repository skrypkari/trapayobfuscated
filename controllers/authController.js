'use strict';const a4_0x265eee=a4_0x1d12;(function(_0x2b0643,_0x17a629){const _0x29cbfc=a4_0x1d12,_0x10cbe6=_0x2b0643();while(!![]){try{const _0x403494=-parseInt(_0x29cbfc(0xd3))/0x1+parseInt(_0x29cbfc(0xb7))/0x2+parseInt(_0x29cbfc(0xc4))/0x3+parseInt(_0x29cbfc(0xd0))/0x4+-parseInt(_0x29cbfc(0xe5))/0x5+parseInt(_0x29cbfc(0xba))/0x6+-parseInt(_0x29cbfc(0xbd))/0x7*(parseInt(_0x29cbfc(0xc9))/0x8);if(_0x403494===_0x17a629)break;else _0x10cbe6['push'](_0x10cbe6['shift']());}catch(_0x588a66){_0x10cbe6['push'](_0x10cbe6['shift']());}}}(a4_0x5dcb,0xd660c));var __createBinding=this&&this[a4_0x265eee(0xcd)]||(Object[a4_0x265eee(0xc0)]?function(_0x407ff8,_0x5da2bb,_0x17c3b5,_0x74eb21){const _0x575cde=a4_0x265eee;if(_0x74eb21===undefined)_0x74eb21=_0x17c3b5;var _0x4386ca=Object['getOwnPropertyDescriptor'](_0x5da2bb,_0x17c3b5);(!_0x4386ca||(_0x575cde(0xbc)in _0x4386ca?!_0x5da2bb['__esModule']:_0x4386ca['writable']||_0x4386ca['configurable']))&&(_0x4386ca={'enumerable':!![],'get':function(){return _0x5da2bb[_0x17c3b5];}}),Object['defineProperty'](_0x407ff8,_0x74eb21,_0x4386ca);}:function(_0x53b71b,_0x3ec614,_0x274a82,_0x10f3de){if(_0x10f3de===undefined)_0x10f3de=_0x274a82;_0x53b71b[_0x10f3de]=_0x3ec614[_0x274a82];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a4_0x265eee(0xc0)]?function(_0x5d54ca,_0x353417){const _0x11c5df=a4_0x265eee;Object[_0x11c5df(0xe6)](_0x5d54ca,_0x11c5df(0xc3),{'enumerable':!![],'value':_0x353417});}:function(_0x1b495d,_0x58e743){const _0x5757ab=a4_0x265eee;_0x1b495d[_0x5757ab(0xc3)]=_0x58e743;}),__importStar=this&&this[a4_0x265eee(0xd8)]||(function(){var _0x43297b=function(_0x248002){const _0x3c0aef=a4_0x1d12;return _0x43297b=Object[_0x3c0aef(0xdc)]||function(_0x46c616){const _0x54dc41=_0x3c0aef;var _0x338a21=[];for(var _0x47b0b5 in _0x46c616)if(Object[_0x54dc41(0xde)]['hasOwnProperty']['call'](_0x46c616,_0x47b0b5))_0x338a21[_0x338a21[_0x54dc41(0xd4)]]=_0x47b0b5;return _0x338a21;},_0x43297b(_0x248002);};return function(_0x1123c7){const _0x9d9f1a=a4_0x1d12;if(_0x1123c7&&_0x1123c7['__esModule'])return _0x1123c7;var _0x5dd992={};if(_0x1123c7!=null){for(var _0x1d059e=_0x43297b(_0x1123c7),_0x3e19d2=0x0;_0x3e19d2<_0x1d059e[_0x9d9f1a(0xd4)];_0x3e19d2++)if(_0x1d059e[_0x3e19d2]!=='default')__createBinding(_0x5dd992,_0x1123c7,_0x1d059e[_0x3e19d2]);}return __setModuleDefault(_0x5dd992,_0x1123c7),_0x5dd992;};}());function a4_0x1d12(_0x58d5a2,_0xf8ba56){_0x58d5a2=_0x58d5a2-0xb7;const _0x5dcb9a=a4_0x5dcb();let _0x1d1226=_0x5dcb9a[_0x58d5a2];return _0x1d1226;}Object[a4_0x265eee(0xe6)](exports,a4_0x265eee(0xd6),{'value':!![]}),exports[a4_0x265eee(0xbf)]=void 0x0;const authService_1=require(a4_0x265eee(0xd1)),tokenBlacklistService_1=require('../services/tokenBlacklistService'),telegramBotService_1=require('../services/telegramBotService');function a4_0x5dcb(){const _0x54d0e5=['remoteAddress','logout','exp','getOwnPropertyNames','findUnique','prototype','error','Failed\x20to\x20send\x20failed\x20login\x20notification:','getStats','user','ipAddress','userAgent','1299560wbZLjt','defineProperty','2185928hlwlRb','shop','geo','8758056wSPZzA','Logged\x20out\x20successfully','get','2028691MoFfoQ','token','AuthController','create','login','../config/database','default','441906eGdZIh','telegramBotService','username','sendLoginNotification','body','40oFXvSl','role','authService','User-Agent','__createBinding','then','resolve','3169844PbCklH','../services/authService','blacklistToken','905334LHTSxi','length','unknown','__esModule','json','__importStar'];a4_0x5dcb=function(){return _0x54d0e5;};return a4_0x5dcb();}class AuthController{constructor(){const _0x3e7689=a4_0x265eee;this['login']=async(_0x57955d,_0x147f7a,_0x1d3914)=>{const _0x3d9c88=a4_0x1d12;try{const _0x2c7718=_0x57955d[_0x3d9c88(0xc8)],_0x5f4b4e=_0x2c7718[_0x3d9c88(0xe3)]||_0x57955d['ip']||_0x57955d['connection'][_0x3d9c88(0xd9)]||_0x3d9c88(0xd5),_0x529350=_0x2c7718[_0x3d9c88(0xe4)]||_0x57955d[_0x3d9c88(0xbc)](_0x3d9c88(0xcc))||_0x3d9c88(0xd5),_0x505fd1=_0x2c7718[_0x3d9c88(0xb9)];let _0x49829b=![],_0xfd083f=null;try{const _0x4a6c6e=await this[_0x3d9c88(0xcb)][_0x3d9c88(0xc1)](_0x2c7718);_0x49829b=!![],_0x4a6c6e[_0x3d9c88(0xca)]===_0x3d9c88(0xb8)&&_0x4a6c6e[_0x3d9c88(0xe2)]?.['id']&&(_0xfd083f=_0x4a6c6e[_0x3d9c88(0xe2)]['id']),_0xfd083f&&await telegramBotService_1[_0x3d9c88(0xc5)][_0x3d9c88(0xc7)](_0xfd083f,{'username':_0x2c7718['username'],'ipAddress':_0x5f4b4e,'userAgent':_0x529350,'geo':_0x505fd1,'timestamp':new Date(),'success':!![]}),_0x147f7a[_0x3d9c88(0xd7)]({'success':!![],'result':_0x4a6c6e});}catch(_0x3edbe6){try{const _0x1eef92=(await Promise[_0x3d9c88(0xcf)]()[_0x3d9c88(0xce)](()=>__importStar(require(_0x3d9c88(0xc2)))))[_0x3d9c88(0xc3)],_0x73a255=await _0x1eef92['shop'][_0x3d9c88(0xdd)]({'where':{'username':_0x2c7718[_0x3d9c88(0xc6)]},'select':{'id':!![]}});_0x73a255&&await telegramBotService_1[_0x3d9c88(0xc5)][_0x3d9c88(0xc7)](_0x73a255['id'],{'username':_0x2c7718[_0x3d9c88(0xc6)],'ipAddress':_0x5f4b4e,'userAgent':_0x529350,'geo':_0x505fd1,'timestamp':new Date(),'success':![]});}catch(_0x17ed86){console[_0x3d9c88(0xdf)](_0x3d9c88(0xe0),_0x17ed86);}throw _0x3edbe6;}}catch(_0x368196){_0x1d3914(_0x368196);}},this['me']=async(_0x1a9cf3,_0x2ba80a,_0x2b35cf)=>{const _0x5c6dec=a4_0x1d12;try{const _0x4aabbd=_0x1a9cf3[_0x5c6dec(0xe2)];_0x2ba80a[_0x5c6dec(0xd7)]({'success':!![],'result':{'id':_0x4aabbd?.['id'],'username':_0x4aabbd?.[_0x5c6dec(0xc6)],'role':_0x4aabbd?.[_0x5c6dec(0xca)]}});}catch(_0x16fc51){_0x2b35cf(_0x16fc51);}},this[_0x3e7689(0xda)]=async(_0x49f0b1,_0x1cf53c,_0x4e2288)=>{const _0xdcb4ae=_0x3e7689;try{const _0x454b81=_0x49f0b1[_0xdcb4ae(0xbe)],_0x27442f=_0x49f0b1[_0xdcb4ae(0xe2)];_0x454b81&&_0x27442f?.[_0xdcb4ae(0xdb)]&&tokenBlacklistService_1['tokenBlacklistService'][_0xdcb4ae(0xd2)](_0x454b81,_0x27442f[_0xdcb4ae(0xdb)]),_0x1cf53c[_0xdcb4ae(0xd7)]({'success':!![],'message':_0xdcb4ae(0xbb)});}catch(_0x58d2ad){_0x4e2288(_0x58d2ad);}},this['getBlacklistStats']=async(_0x420b2b,_0x2da8ec,_0x18789c)=>{const _0x1b6b59=_0x3e7689;try{const _0x22c973=tokenBlacklistService_1['tokenBlacklistService'][_0x1b6b59(0xe1)]();_0x2da8ec[_0x1b6b59(0xd7)]({'success':!![],'result':_0x22c973});}catch(_0x73b978){_0x18789c(_0x73b978);}},this[_0x3e7689(0xcb)]=new authService_1['AuthService']();}}exports['AuthController']=AuthController;