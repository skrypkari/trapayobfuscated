'use strict';function a4_0x3abd(){const _0x2a1d02=['blacklistToken','prototype','253760toVQfJ','sendLoginNotification','get','length','json','authService','tokenBlacklistService','getStats','7539354ooROiH','1068aYhNfF','../services/telegramBotService','shop','Failed\x20to\x20send\x20failed\x20login\x20notification:','default','Logged\x20out\x20successfully','5552tsJmwi','__createBinding','username','connection','logout','then','AuthService','getOwnPropertyDescriptor','login','AuthController','hasOwnProperty','findUnique','../services/authService','call','error','role','defineProperty','telegramBotService','__setModuleDefault','6531685rVgOne','user','__importStar','../config/database','exp','1428250zwIsTR','108689qjSbgk','getOwnPropertyNames','279576vAkQNc','configurable','body','remoteAddress','unknown','__esModule','create','144bOfqUb'];a4_0x3abd=function(){return _0x2a1d02;};return a4_0x3abd();}const a4_0x5a7bcd=a4_0x237c;(function(_0x588c10,_0x193b81){const _0x5d57fc=a4_0x237c,_0x3b2a81=_0x588c10();while(!![]){try{const _0x56c344=-parseInt(_0x5d57fc(0xe7))/0x1+-parseInt(_0x5d57fc(0xf4))/0x2+parseInt(_0x5d57fc(0xfd))/0x3*(parseInt(_0x5d57fc(0x103))/0x4)+parseInt(_0x5d57fc(0xe2))/0x5+-parseInt(_0x5d57fc(0xea))/0x6+-parseInt(_0x5d57fc(0xe8))/0x7*(parseInt(_0x5d57fc(0xf1))/0x8)+parseInt(_0x5d57fc(0xfc))/0x9;if(_0x56c344===_0x193b81)break;else _0x3b2a81['push'](_0x3b2a81['shift']());}catch(_0xf179eb){_0x3b2a81['push'](_0x3b2a81['shift']());}}}(a4_0x3abd,0xb8cdf));function a4_0x237c(_0x2bea88,_0x48efec){const _0x3abdc8=a4_0x3abd();return a4_0x237c=function(_0x237c2c,_0x12573d){_0x237c2c=_0x237c2c-0xd3;let _0xa0eaba=_0x3abdc8[_0x237c2c];return _0xa0eaba;},a4_0x237c(_0x2bea88,_0x48efec);}var __createBinding=this&&this[a4_0x5a7bcd(0x104)]||(Object[a4_0x5a7bcd(0xf0)]?function(_0x2a1803,_0x40b6e9,_0x146a0c,_0x412d9c){const _0x5b3325=a4_0x5a7bcd;if(_0x412d9c===undefined)_0x412d9c=_0x146a0c;var _0x271e5c=Object[_0x5b3325(0xd6)](_0x40b6e9,_0x146a0c);(!_0x271e5c||(_0x5b3325(0xf6)in _0x271e5c?!_0x40b6e9['__esModule']:_0x271e5c['writable']||_0x271e5c[_0x5b3325(0xeb)]))&&(_0x271e5c={'enumerable':!![],'get':function(){return _0x40b6e9[_0x146a0c];}}),Object[_0x5b3325(0xdf)](_0x2a1803,_0x412d9c,_0x271e5c);}:function(_0x99e368,_0x474b41,_0x36b30f,_0x12a879){if(_0x12a879===undefined)_0x12a879=_0x36b30f;_0x99e368[_0x12a879]=_0x474b41[_0x36b30f];}),__setModuleDefault=this&&this[a4_0x5a7bcd(0xe1)]||(Object[a4_0x5a7bcd(0xf0)]?function(_0x462253,_0x54785c){const _0x1614d5=a4_0x5a7bcd;Object[_0x1614d5(0xdf)](_0x462253,_0x1614d5(0x101),{'enumerable':!![],'value':_0x54785c});}:function(_0x1fce81,_0x599a20){const _0xcbb375=a4_0x5a7bcd;_0x1fce81[_0xcbb375(0x101)]=_0x599a20;}),__importStar=this&&this[a4_0x5a7bcd(0xe4)]||(function(){var _0x31cde4=function(_0x497c9c){const _0x163973=a4_0x237c;return _0x31cde4=Object[_0x163973(0xe9)]||function(_0x56e719){const _0x1b1c78=_0x163973;var _0x29c49d=[];for(var _0x45cdd1 in _0x56e719)if(Object[_0x1b1c78(0xf3)][_0x1b1c78(0xd9)][_0x1b1c78(0xdc)](_0x56e719,_0x45cdd1))_0x29c49d[_0x29c49d[_0x1b1c78(0xf7)]]=_0x45cdd1;return _0x29c49d;},_0x31cde4(_0x497c9c);};return function(_0x2db86b){const _0x1ca203=a4_0x237c;if(_0x2db86b&&_0x2db86b[_0x1ca203(0xef)])return _0x2db86b;var _0xe0ef50={};if(_0x2db86b!=null){for(var _0x18f70c=_0x31cde4(_0x2db86b),_0x20137f=0x0;_0x20137f<_0x18f70c[_0x1ca203(0xf7)];_0x20137f++)if(_0x18f70c[_0x20137f]!==_0x1ca203(0x101))__createBinding(_0xe0ef50,_0x2db86b,_0x18f70c[_0x20137f]);}return __setModuleDefault(_0xe0ef50,_0x2db86b),_0xe0ef50;};}());Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a4_0x5a7bcd(0xd8)]=void 0x0;const authService_1=require(a4_0x5a7bcd(0xdb)),tokenBlacklistService_1=require('../services/tokenBlacklistService'),telegramBotService_1=require(a4_0x5a7bcd(0xfe));class AuthController{constructor(){const _0x174b8b=a4_0x5a7bcd;this[_0x174b8b(0xd7)]=async(_0x2dac61,_0x35fe34,_0x19f465)=>{const _0x3129c6=_0x174b8b;try{const _0x87614b=_0x2dac61[_0x3129c6(0xec)],_0x4f89d0=_0x2dac61['ip']||_0x2dac61[_0x3129c6(0x106)][_0x3129c6(0xed)]||_0x3129c6(0xee),_0x2ff85f=_0x2dac61['get']('User-Agent')||_0x3129c6(0xee);let _0x23acb7=![],_0x5a4bd8=null;try{const _0x52016d=await this[_0x3129c6(0xf9)][_0x3129c6(0xd7)](_0x87614b);_0x23acb7=!![],_0x52016d[_0x3129c6(0xde)]===_0x3129c6(0xff)&&_0x52016d[_0x3129c6(0xe3)]?.['id']&&(_0x5a4bd8=_0x52016d[_0x3129c6(0xe3)]['id']),_0x5a4bd8&&await telegramBotService_1[_0x3129c6(0xe0)][_0x3129c6(0xf5)](_0x5a4bd8,{'username':_0x87614b[_0x3129c6(0x105)],'ipAddress':_0x4f89d0,'userAgent':_0x2ff85f,'timestamp':new Date(),'success':!![]}),_0x35fe34[_0x3129c6(0xf8)]({'success':!![],'result':_0x52016d});}catch(_0x2b6e6d){try{const _0x4bc2d1=(await Promise['resolve']()[_0x3129c6(0xd4)](()=>__importStar(require(_0x3129c6(0xe5)))))[_0x3129c6(0x101)],_0x14d8e9=await _0x4bc2d1[_0x3129c6(0xff)][_0x3129c6(0xda)]({'where':{'username':_0x87614b[_0x3129c6(0x105)]},'select':{'id':!![]}});_0x14d8e9&&await telegramBotService_1[_0x3129c6(0xe0)][_0x3129c6(0xf5)](_0x14d8e9['id'],{'username':_0x87614b[_0x3129c6(0x105)],'ipAddress':_0x4f89d0,'userAgent':_0x2ff85f,'timestamp':new Date(),'success':![]});}catch(_0x7b451){console[_0x3129c6(0xdd)](_0x3129c6(0x100),_0x7b451);}throw _0x2b6e6d;}}catch(_0x1342a9){_0x19f465(_0x1342a9);}},this['me']=async(_0x1d6698,_0x147280,_0x8ae371)=>{const _0x90264=_0x174b8b;try{const _0xd6d10a=_0x1d6698[_0x90264(0xe3)];_0x147280['json']({'success':!![],'result':{'id':_0xd6d10a?.['id'],'username':_0xd6d10a?.[_0x90264(0x105)],'role':_0xd6d10a?.[_0x90264(0xde)]}});}catch(_0x5751fe){_0x8ae371(_0x5751fe);}},this[_0x174b8b(0xd3)]=async(_0x5a89e4,_0x2625a4,_0x5ecdeb)=>{const _0x3b5a57=_0x174b8b;try{const _0x3178c7=_0x5a89e4['token'],_0x5ae610=_0x5a89e4[_0x3b5a57(0xe3)];_0x3178c7&&_0x5ae610?.['exp']&&tokenBlacklistService_1[_0x3b5a57(0xfa)][_0x3b5a57(0xf2)](_0x3178c7,_0x5ae610[_0x3b5a57(0xe6)]),_0x2625a4[_0x3b5a57(0xf8)]({'success':!![],'message':_0x3b5a57(0x102)});}catch(_0x22c368){_0x5ecdeb(_0x22c368);}},this['getBlacklistStats']=async(_0x486922,_0xaf2dfb,_0x53b74e)=>{const _0x9deecf=_0x174b8b;try{const _0x523a98=tokenBlacklistService_1[_0x9deecf(0xfa)][_0x9deecf(0xfb)]();_0xaf2dfb['json']({'success':!![],'result':_0x523a98});}catch(_0x1519b6){_0x53b74e(_0x1519b6);}},this['authService']=new authService_1[(_0x174b8b(0xd5))]();}}exports[a4_0x5a7bcd(0xd8)]=AuthController;