'use strict';const a4_0x14b706=a4_0x457e;function a4_0x457e(_0x2b0781,_0x963a8c){const _0x558921=a4_0x5589();return a4_0x457e=function(_0x457ed3,_0x1e4349){_0x457ed3=_0x457ed3-0x1ac;let _0x36f9b9=_0x558921[_0x457ed3];return _0x36f9b9;},a4_0x457e(_0x2b0781,_0x963a8c);}(function(_0x4e2d25,_0x9a1699){const _0x3d43c2=a4_0x457e,_0x46f914=_0x4e2d25();while(!![]){try{const _0x28586c=parseInt(_0x3d43c2(0x1b6))/0x1+parseInt(_0x3d43c2(0x1b0))/0x2+parseInt(_0x3d43c2(0x1c6))/0x3+-parseInt(_0x3d43c2(0x1b2))/0x4+-parseInt(_0x3d43c2(0x1cb))/0x5+parseInt(_0x3d43c2(0x1b4))/0x6*(-parseInt(_0x3d43c2(0x1c2))/0x7)+parseInt(_0x3d43c2(0x1d3))/0x8*(-parseInt(_0x3d43c2(0x1c5))/0x9);if(_0x28586c===_0x9a1699)break;else _0x46f914['push'](_0x46f914['shift']());}catch(_0x43ab05){_0x46f914['push'](_0x46f914['shift']());}}}(a4_0x5589,0xbcb9d));var __createBinding=this&&this[a4_0x14b706(0x1c7)]||(Object[a4_0x14b706(0x1af)]?function(_0x342167,_0x5d3295,_0x38d256,_0x4d76c9){const _0x5172a2=a4_0x14b706;if(_0x4d76c9===undefined)_0x4d76c9=_0x38d256;var _0x556322=Object[_0x5172a2(0x1bb)](_0x5d3295,_0x38d256);(!_0x556322||('get'in _0x556322?!_0x5d3295[_0x5172a2(0x1d5)]:_0x556322[_0x5172a2(0x1c3)]||_0x556322[_0x5172a2(0x1d1)]))&&(_0x556322={'enumerable':!![],'get':function(){return _0x5d3295[_0x38d256];}}),Object[_0x5172a2(0x1d6)](_0x342167,_0x4d76c9,_0x556322);}:function(_0x2ee02c,_0x38c9f6,_0x2e7da3,_0x4a522d){if(_0x4a522d===undefined)_0x4a522d=_0x2e7da3;_0x2ee02c[_0x4a522d]=_0x38c9f6[_0x2e7da3];}),__setModuleDefault=this&&this[a4_0x14b706(0x1db)]||(Object[a4_0x14b706(0x1af)]?function(_0x5b0bb7,_0x40e6ef){const _0x2034f2=a4_0x14b706;Object[_0x2034f2(0x1d6)](_0x5b0bb7,_0x2034f2(0x1c1),{'enumerable':!![],'value':_0x40e6ef});}:function(_0x58af5e,_0x2c3318){const _0x9a96f6=a4_0x14b706;_0x58af5e[_0x9a96f6(0x1c1)]=_0x2c3318;}),__importStar=this&&this['__importStar']||(function(){var _0xd13d3e=function(_0x4f3d7a){const _0x10875d=a4_0x457e;return _0xd13d3e=Object[_0x10875d(0x1cc)]||function(_0x4cc3e6){const _0xe8e1ca=_0x10875d;var _0x57ae33=[];for(var _0x1bfbee in _0x4cc3e6)if(Object[_0xe8e1ca(0x1dc)][_0xe8e1ca(0x1ca)][_0xe8e1ca(0x1bc)](_0x4cc3e6,_0x1bfbee))_0x57ae33[_0x57ae33['length']]=_0x1bfbee;return _0x57ae33;},_0xd13d3e(_0x4f3d7a);};return function(_0x4bb1bc){const _0x33c20a=a4_0x457e;if(_0x4bb1bc&&_0x4bb1bc['__esModule'])return _0x4bb1bc;var _0xa889da={};if(_0x4bb1bc!=null){for(var _0x29cfcc=_0xd13d3e(_0x4bb1bc),_0x12ea40=0x0;_0x12ea40<_0x29cfcc[_0x33c20a(0x1bd)];_0x12ea40++)if(_0x29cfcc[_0x12ea40]!==_0x33c20a(0x1c1))__createBinding(_0xa889da,_0x4bb1bc,_0x29cfcc[_0x12ea40]);}return __setModuleDefault(_0xa889da,_0x4bb1bc),_0xa889da;};}());function a4_0x5589(){const _0x37d1d2=['4216aDLKiY','exp','__esModule','defineProperty','../services/authService','get','AuthController','sendLoginNotification','__setModuleDefault','prototype','Failed\x20to\x20send\x20failed\x20login\x20notification:','json','login','create','2144600rUHorQ','logout','863764dVENzL','role','1285566yYKbhp','username','1507797hvxFbE','getBlacklistStats','findUnique','shop','token','getOwnPropertyDescriptor','call','length','body','AuthService','unknown','default','14rBNeBy','writable','user','4941kGcmKU','218472ejeYEW','__createBinding','then','error','hasOwnProperty','4730570jOfJcz','getOwnPropertyNames','../config/database','tokenBlacklistService','authService','telegramBotService','configurable','Logged\x20out\x20successfully'];a4_0x5589=function(){return _0x37d1d2;};return a4_0x5589();}Object[a4_0x14b706(0x1d6)](exports,a4_0x14b706(0x1d5),{'value':!![]}),exports[a4_0x14b706(0x1d9)]=void 0x0;const authService_1=require(a4_0x14b706(0x1d7)),tokenBlacklistService_1=require('../services/tokenBlacklistService'),telegramBotService_1=require('../services/telegramBotService');class AuthController{constructor(){const _0x3be4fd=a4_0x14b706;this[_0x3be4fd(0x1ae)]=async(_0x2c158a,_0x39ae08,_0x5815f6)=>{const _0x44b632=_0x3be4fd;try{const _0x3e6850=_0x2c158a[_0x44b632(0x1be)],_0xd4899e=_0x2c158a['ip']||_0x2c158a['connection']['remoteAddress']||_0x44b632(0x1c0),_0x144ccd=_0x2c158a[_0x44b632(0x1d8)]('User-Agent')||_0x44b632(0x1c0);let _0x39e85f=![],_0x2bd56c=null;try{const _0x6bac99=await this[_0x44b632(0x1cf)][_0x44b632(0x1ae)](_0x3e6850);_0x39e85f=!![],_0x6bac99[_0x44b632(0x1b3)]===_0x44b632(0x1b9)&&_0x6bac99['user']?.['id']&&(_0x2bd56c=_0x6bac99[_0x44b632(0x1c4)]['id']),_0x2bd56c&&await telegramBotService_1[_0x44b632(0x1d0)]['sendLoginNotification'](_0x2bd56c,{'username':_0x3e6850[_0x44b632(0x1b5)],'ipAddress':_0xd4899e,'userAgent':_0x144ccd,'timestamp':new Date(),'success':!![]}),_0x39ae08[_0x44b632(0x1ad)]({'success':!![],'result':_0x6bac99});}catch(_0xdbedc0){try{const _0x14522e=(await Promise['resolve']()[_0x44b632(0x1c8)](()=>__importStar(require(_0x44b632(0x1cd)))))['default'],_0x33fe37=await _0x14522e['shop'][_0x44b632(0x1b8)]({'where':{'username':_0x3e6850[_0x44b632(0x1b5)]},'select':{'id':!![]}});_0x33fe37&&await telegramBotService_1['telegramBotService'][_0x44b632(0x1da)](_0x33fe37['id'],{'username':_0x3e6850[_0x44b632(0x1b5)],'ipAddress':_0xd4899e,'userAgent':_0x144ccd,'timestamp':new Date(),'success':![]});}catch(_0x279e1a){console[_0x44b632(0x1c9)](_0x44b632(0x1ac),_0x279e1a);}throw _0xdbedc0;}}catch(_0x19f2e6){_0x5815f6(_0x19f2e6);}},this['me']=async(_0x54ae70,_0x36c54e,_0x358bd5)=>{const _0x1f7a5f=_0x3be4fd;try{const _0x44978f=_0x54ae70[_0x1f7a5f(0x1c4)];_0x36c54e[_0x1f7a5f(0x1ad)]({'success':!![],'result':{'id':_0x44978f?.['id'],'username':_0x44978f?.[_0x1f7a5f(0x1b5)],'role':_0x44978f?.['role']}});}catch(_0x3f56dd){_0x358bd5(_0x3f56dd);}},this[_0x3be4fd(0x1b1)]=async(_0x439816,_0x20e9ca,_0x38e976)=>{const _0x153d38=_0x3be4fd;try{const _0x5e726a=_0x439816[_0x153d38(0x1ba)],_0x4e1a52=_0x439816[_0x153d38(0x1c4)];_0x5e726a&&_0x4e1a52?.[_0x153d38(0x1d4)]&&tokenBlacklistService_1[_0x153d38(0x1ce)]['blacklistToken'](_0x5e726a,_0x4e1a52[_0x153d38(0x1d4)]),_0x20e9ca['json']({'success':!![],'message':_0x153d38(0x1d2)});}catch(_0x1ee850){_0x38e976(_0x1ee850);}},this[_0x3be4fd(0x1b7)]=async(_0x4ca9b2,_0x4c7332,_0x3417fe)=>{const _0x44064=_0x3be4fd;try{const _0x279c1b=tokenBlacklistService_1[_0x44064(0x1ce)]['getStats']();_0x4c7332[_0x44064(0x1ad)]({'success':!![],'result':_0x279c1b});}catch(_0x3e147d){_0x3417fe(_0x3e147d);}},this[_0x3be4fd(0x1cf)]=new authService_1[(_0x3be4fd(0x1bf))]();}}exports[a4_0x14b706(0x1d9)]=AuthController;