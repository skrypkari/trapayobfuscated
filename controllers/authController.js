'use strict';const a4_0x11f38a=a4_0x2b3d;(function(_0x5447d4,_0xf9964e){const _0x4cfd2a=a4_0x2b3d,_0x2ac628=_0x5447d4();while(!![]){try{const _0x282a57=-parseInt(_0x4cfd2a(0x92))/0x1+-parseInt(_0x4cfd2a(0x7f))/0x2+-parseInt(_0x4cfd2a(0xaf))/0x3*(-parseInt(_0x4cfd2a(0xa7))/0x4)+-parseInt(_0x4cfd2a(0x94))/0x5*(-parseInt(_0x4cfd2a(0x83))/0x6)+-parseInt(_0x4cfd2a(0x88))/0x7+parseInt(_0x4cfd2a(0x80))/0x8*(parseInt(_0x4cfd2a(0x95))/0x9)+parseInt(_0x4cfd2a(0x9a))/0xa;if(_0x282a57===_0xf9964e)break;else _0x2ac628['push'](_0x2ac628['shift']());}catch(_0x589f6f){_0x2ac628['push'](_0x2ac628['shift']());}}}(a4_0x5623,0x97fef));var __createBinding=this&&this[a4_0x11f38a(0x9b)]||(Object[a4_0x11f38a(0x8e)]?function(_0xae4b04,_0x3f2ac7,_0x253e7f,_0x3e645f){const _0x1f6528=a4_0x11f38a;if(_0x3e645f===undefined)_0x3e645f=_0x253e7f;var _0x52096f=Object['getOwnPropertyDescriptor'](_0x3f2ac7,_0x253e7f);(!_0x52096f||(_0x1f6528(0xa4)in _0x52096f?!_0x3f2ac7['__esModule']:_0x52096f[_0x1f6528(0xab)]||_0x52096f[_0x1f6528(0x97)]))&&(_0x52096f={'enumerable':!![],'get':function(){return _0x3f2ac7[_0x253e7f];}}),Object['defineProperty'](_0xae4b04,_0x3e645f,_0x52096f);}:function(_0x8af378,_0x30190d,_0x54d80d,_0x515396){if(_0x515396===undefined)_0x515396=_0x54d80d;_0x8af378[_0x515396]=_0x30190d[_0x54d80d];}),__setModuleDefault=this&&this[a4_0x11f38a(0x81)]||(Object['create']?function(_0x539f64,_0x483965){const _0x2f6919=a4_0x11f38a;Object[_0x2f6919(0x82)](_0x539f64,_0x2f6919(0xa8),{'enumerable':!![],'value':_0x483965});}:function(_0x580e3e,_0x538ca4){const _0x5203f9=a4_0x11f38a;_0x580e3e[_0x5203f9(0xa8)]=_0x538ca4;}),__importStar=this&&this[a4_0x11f38a(0x7e)]||(function(){var _0x35b60f=function(_0x3f44f8){const _0x54735b=a4_0x2b3d;return _0x35b60f=Object[_0x54735b(0x9d)]||function(_0x3c7b4b){const _0x5a07e1=_0x54735b;var _0x2c1ae1=[];for(var _0x314e5e in _0x3c7b4b)if(Object[_0x5a07e1(0x8d)]['hasOwnProperty'][_0x5a07e1(0xa2)](_0x3c7b4b,_0x314e5e))_0x2c1ae1[_0x2c1ae1['length']]=_0x314e5e;return _0x2c1ae1;},_0x35b60f(_0x3f44f8);};return function(_0x5471c5){const _0x5e9319=a4_0x2b3d;if(_0x5471c5&&_0x5471c5['__esModule'])return _0x5471c5;var _0x18b86f={};if(_0x5471c5!=null){for(var _0x1161cb=_0x35b60f(_0x5471c5),_0x2d4979=0x0;_0x2d4979<_0x1161cb['length'];_0x2d4979++)if(_0x1161cb[_0x2d4979]!==_0x5e9319(0xa8))__createBinding(_0x18b86f,_0x5471c5,_0x1161cb[_0x2d4979]);}return __setModuleDefault(_0x18b86f,_0x5471c5),_0x18b86f;};}());Object[a4_0x11f38a(0x82)](exports,'__esModule',{'value':!![]}),exports[a4_0x11f38a(0x84)]=void 0x0;function a4_0x2b3d(_0x24b29d,_0x2dc95c){const _0x5623f2=a4_0x5623();return a4_0x2b3d=function(_0x2b3d63,_0x592e03){_0x2b3d63=_0x2b3d63-0x7d;let _0x28634a=_0x5623f2[_0x2b3d63];return _0x28634a;},a4_0x2b3d(_0x24b29d,_0x2dc95c);}const authService_1=require(a4_0x11f38a(0x8c)),tokenBlacklistService_1=require(a4_0x11f38a(0xad)),telegramBotService_1=require(a4_0x11f38a(0xa9));function a4_0x5623(){const _0x53e29d=['user','username','User-Agent','976097FdoPUs','Logged\x20out\x20successfully','4985ldOjXb','255069guZCXC','error','configurable','body','getBlacklistStats','18193480XYSJXp','__createBinding','getStats','getOwnPropertyNames','shop','logout','unknown','token','call','json','get','login','sendLoginNotification','8fCowqd','default','../services/telegramBotService','resolve','writable','findUnique','../services/tokenBlacklistService','tokenBlacklistService','1233120XGaFEp','remoteAddress','Failed\x20to\x20send\x20failed\x20login\x20notification:','connection','__importStar','2438418yGVdBl','80fEoVTA','__setModuleDefault','defineProperty','4668islCca','AuthController','exp','blacklistToken','role','6178361YwGVRa','authService','../config/database','telegramBotService','../services/authService','prototype','create'];a4_0x5623=function(){return _0x53e29d;};return a4_0x5623();}class AuthController{constructor(){const _0x433ba6=a4_0x11f38a;this[_0x433ba6(0xa5)]=async(_0x1dfb14,_0x2bdd0d,_0x406062)=>{const _0x318922=_0x433ba6;try{const _0x88a19d=_0x1dfb14[_0x318922(0x98)],_0x5b5b55=_0x1dfb14['ip']||_0x1dfb14[_0x318922(0x7d)][_0x318922(0xb0)]||_0x318922(0xa0),_0x18cf2e=_0x1dfb14[_0x318922(0xa4)](_0x318922(0x91))||_0x318922(0xa0);let _0xafdad7=![],_0x4ba76d=null;try{const _0x82ca11=await this[_0x318922(0x89)][_0x318922(0xa5)](_0x88a19d);_0xafdad7=!![],_0x82ca11[_0x318922(0x87)]===_0x318922(0x9e)&&_0x82ca11['user']?.['id']&&(_0x4ba76d=_0x82ca11[_0x318922(0x8f)]['id']),_0x4ba76d&&await telegramBotService_1[_0x318922(0x8b)][_0x318922(0xa6)](_0x4ba76d,{'username':_0x88a19d[_0x318922(0x90)],'ipAddress':_0x5b5b55,'userAgent':_0x18cf2e,'timestamp':new Date(),'success':!![]}),_0x2bdd0d[_0x318922(0xa3)]({'success':!![],'result':_0x82ca11});}catch(_0x20e99a){try{const _0x16d260=(await Promise[_0x318922(0xaa)]()['then'](()=>__importStar(require(_0x318922(0x8a)))))['default'],_0x58a26c=await _0x16d260['shop'][_0x318922(0xac)]({'where':{'username':_0x88a19d[_0x318922(0x90)]},'select':{'id':!![]}});_0x58a26c&&await telegramBotService_1[_0x318922(0x8b)]['sendLoginNotification'](_0x58a26c['id'],{'username':_0x88a19d[_0x318922(0x90)],'ipAddress':_0x5b5b55,'userAgent':_0x18cf2e,'timestamp':new Date(),'success':![]});}catch(_0x5f1ae5){console[_0x318922(0x96)](_0x318922(0xb1),_0x5f1ae5);}throw _0x20e99a;}}catch(_0x12d9ae){_0x406062(_0x12d9ae);}},this['me']=async(_0x29e3f1,_0x5147b4,_0x35c04d)=>{const _0xcb5dc6=_0x433ba6;try{const _0x42e6f8=_0x29e3f1[_0xcb5dc6(0x8f)];_0x5147b4[_0xcb5dc6(0xa3)]({'success':!![],'result':{'id':_0x42e6f8?.['id'],'username':_0x42e6f8?.[_0xcb5dc6(0x90)],'role':_0x42e6f8?.['role']}});}catch(_0x309c8a){_0x35c04d(_0x309c8a);}},this[_0x433ba6(0x9f)]=async(_0x50fe82,_0x5e978e,_0x730bd9)=>{const _0xbf7ec7=_0x433ba6;try{const _0x12205d=_0x50fe82[_0xbf7ec7(0xa1)],_0x334c96=_0x50fe82[_0xbf7ec7(0x8f)];_0x12205d&&_0x334c96?.[_0xbf7ec7(0x85)]&&tokenBlacklistService_1[_0xbf7ec7(0xae)][_0xbf7ec7(0x86)](_0x12205d,_0x334c96['exp']),_0x5e978e[_0xbf7ec7(0xa3)]({'success':!![],'message':_0xbf7ec7(0x93)});}catch(_0x494b9e){_0x730bd9(_0x494b9e);}},this[_0x433ba6(0x99)]=async(_0x2046d0,_0xeec2ae,_0x5c38f3)=>{const _0x3531ab=_0x433ba6;try{const _0x2818d6=tokenBlacklistService_1['tokenBlacklistService'][_0x3531ab(0x9c)]();_0xeec2ae[_0x3531ab(0xa3)]({'success':!![],'result':_0x2818d6});}catch(_0x37e0e3){_0x5c38f3(_0x37e0e3);}},this[_0x433ba6(0x89)]=new authService_1['AuthService']();}}exports[a4_0x11f38a(0x84)]=AuthController;