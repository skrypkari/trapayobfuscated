'use strict';const a4_0x37f15f=a4_0x3159;(function(_0x3519e1,_0x68829e){const _0x2fb2d4=a4_0x3159,_0x3e38cb=_0x3519e1();while(!![]){try{const _0x15a4e7=-parseInt(_0x2fb2d4(0x166))/0x1+parseInt(_0x2fb2d4(0x159))/0x2*(parseInt(_0x2fb2d4(0x169))/0x3)+parseInt(_0x2fb2d4(0x171))/0x4*(parseInt(_0x2fb2d4(0x17a))/0x5)+parseInt(_0x2fb2d4(0x174))/0x6+-parseInt(_0x2fb2d4(0x153))/0x7*(-parseInt(_0x2fb2d4(0x16f))/0x8)+-parseInt(_0x2fb2d4(0x16c))/0x9+-parseInt(_0x2fb2d4(0x175))/0xa;if(_0x15a4e7===_0x68829e)break;else _0x3e38cb['push'](_0x3e38cb['shift']());}catch(_0x4ea6d7){_0x3e38cb['push'](_0x3e38cb['shift']());}}}(a4_0x4c45,0x18a9e));var __createBinding=this&&this[a4_0x37f15f(0x154)]||(Object[a4_0x37f15f(0x165)]?function(_0x2a11e2,_0x19c7f6,_0x442508,_0x100177){const _0x534a0e=a4_0x37f15f;if(_0x100177===undefined)_0x100177=_0x442508;var _0x1feddd=Object[_0x534a0e(0x167)](_0x19c7f6,_0x442508);(!_0x1feddd||(_0x534a0e(0x156)in _0x1feddd?!_0x19c7f6[_0x534a0e(0x155)]:_0x1feddd['writable']||_0x1feddd[_0x534a0e(0x168)]))&&(_0x1feddd={'enumerable':!![],'get':function(){return _0x19c7f6[_0x442508];}}),Object['defineProperty'](_0x2a11e2,_0x100177,_0x1feddd);}:function(_0x54805d,_0x5cd928,_0x5dc635,_0x560a78){if(_0x560a78===undefined)_0x560a78=_0x5dc635;_0x54805d[_0x560a78]=_0x5cd928[_0x5dc635];}),__setModuleDefault=this&&this[a4_0x37f15f(0x15b)]||(Object[a4_0x37f15f(0x165)]?function(_0x48cec3,_0x471bc4){const _0x2cda67=a4_0x37f15f;Object['defineProperty'](_0x48cec3,_0x2cda67(0x15f),{'enumerable':!![],'value':_0x471bc4});}:function(_0x430dbf,_0x4fb2a8){_0x430dbf['default']=_0x4fb2a8;}),__importStar=this&&this['__importStar']||(function(){var _0x82b20a=function(_0x36a050){const _0x13c5bb=a4_0x3159;return _0x82b20a=Object[_0x13c5bb(0x160)]||function(_0x37c131){const _0x2a8e86=_0x13c5bb;var _0x4f1b5b=[];for(var _0x4b0c74 in _0x37c131)if(Object['prototype'][_0x2a8e86(0x164)][_0x2a8e86(0x17b)](_0x37c131,_0x4b0c74))_0x4f1b5b[_0x4f1b5b[_0x2a8e86(0x14f)]]=_0x4b0c74;return _0x4f1b5b;},_0x82b20a(_0x36a050);};return function(_0xf681b0){const _0x367762=a4_0x3159;if(_0xf681b0&&_0xf681b0['__esModule'])return _0xf681b0;var _0x3799a5={};if(_0xf681b0!=null){for(var _0x43e415=_0x82b20a(_0xf681b0),_0x10dfa1=0x0;_0x10dfa1<_0x43e415['length'];_0x10dfa1++)if(_0x43e415[_0x10dfa1]!==_0x367762(0x15f))__createBinding(_0x3799a5,_0xf681b0,_0x43e415[_0x10dfa1]);}return __setModuleDefault(_0x3799a5,_0xf681b0),_0x3799a5;};}());function a4_0x3159(_0x13d455,_0x400af7){const _0x4c457e=a4_0x4c45();return a4_0x3159=function(_0x315950,_0x16c571){_0x315950=_0x315950-0x14c;let _0x26fd51=_0x4c457e[_0x315950];return _0x26fd51;},a4_0x3159(_0x13d455,_0x400af7);}function a4_0x4c45(){const _0x3664ff=['hasOwnProperty','create','164511sqgUod','getOwnPropertyDescriptor','configurable','6usnWZC','unknown','json','880128KqkhOT','remoteAddress','Logged\x20out\x20successfully','8qpLUHm','defineProperty','289160vysdlZ','token','authService','1121490YAPKya','890950nwXwVA','AuthController','then','Failed\x20to\x20send\x20failed\x20login\x20notification:','user','5xIxCzd','call','shop','../services/telegramBotService','blacklistToken','username','length','role','tokenBlacklistService','telegramBotService','251839cqmIkD','__createBinding','__esModule','get','getBlacklistStats','sendLoginNotification','157238UzPdQl','connection','__setModuleDefault','findUnique','User-Agent','../services/authService','default','getOwnPropertyNames','AuthService','login','error'];a4_0x4c45=function(){return _0x3664ff;};return a4_0x4c45();}Object[a4_0x37f15f(0x170)](exports,a4_0x37f15f(0x155),{'value':!![]}),exports[a4_0x37f15f(0x176)]=void 0x0;const authService_1=require(a4_0x37f15f(0x15e)),tokenBlacklistService_1=require('../services/tokenBlacklistService'),telegramBotService_1=require(a4_0x37f15f(0x14c));class AuthController{constructor(){const _0x55a83b=a4_0x37f15f;this[_0x55a83b(0x162)]=async(_0x339bd5,_0x5df6ae,_0x4c5087)=>{const _0x374145=_0x55a83b;try{const _0x498b52=_0x339bd5['body'],_0xb4fa00=_0x339bd5['ip']||_0x339bd5[_0x374145(0x15a)][_0x374145(0x16d)]||'unknown',_0x31fdc4=_0x339bd5[_0x374145(0x156)](_0x374145(0x15d))||_0x374145(0x16a);let _0x569a00=![],_0x19d409=null;try{const _0x197bac=await this[_0x374145(0x173)][_0x374145(0x162)](_0x498b52);_0x569a00=!![],_0x197bac[_0x374145(0x150)]===_0x374145(0x17c)&&_0x197bac['user']?.['id']&&(_0x19d409=_0x197bac[_0x374145(0x179)]['id']),_0x19d409&&await telegramBotService_1[_0x374145(0x152)]['sendLoginNotification'](_0x19d409,{'username':_0x498b52['username'],'ipAddress':_0xb4fa00,'userAgent':_0x31fdc4,'timestamp':new Date(),'success':!![]}),_0x5df6ae[_0x374145(0x16b)]({'success':!![],'result':_0x197bac});}catch(_0x22fa69){try{const _0x372d50=(await Promise['resolve']()[_0x374145(0x177)](()=>__importStar(require('../config/database'))))[_0x374145(0x15f)],_0x2420e4=await _0x372d50[_0x374145(0x17c)][_0x374145(0x15c)]({'where':{'username':_0x498b52[_0x374145(0x14e)]},'select':{'id':!![]}});_0x2420e4&&await telegramBotService_1[_0x374145(0x152)][_0x374145(0x158)](_0x2420e4['id'],{'username':_0x498b52['username'],'ipAddress':_0xb4fa00,'userAgent':_0x31fdc4,'timestamp':new Date(),'success':![]});}catch(_0x539581){console[_0x374145(0x163)](_0x374145(0x178),_0x539581);}throw _0x22fa69;}}catch(_0x1e312d){_0x4c5087(_0x1e312d);}},this['me']=async(_0x1eca06,_0x57a92c,_0x4c486c)=>{const _0x4db286=_0x55a83b;try{const _0x30a26c=_0x1eca06[_0x4db286(0x179)];_0x57a92c[_0x4db286(0x16b)]({'success':!![],'result':{'id':_0x30a26c?.['id'],'username':_0x30a26c?.[_0x4db286(0x14e)],'role':_0x30a26c?.[_0x4db286(0x150)]}});}catch(_0x28ad9c){_0x4c486c(_0x28ad9c);}},this['logout']=async(_0x58e7ec,_0x2aaa73,_0x5cbf9c)=>{const _0x5cd12a=_0x55a83b;try{const _0x3a2a22=_0x58e7ec[_0x5cd12a(0x172)],_0x328e78=_0x58e7ec['user'];_0x3a2a22&&_0x328e78?.['exp']&&tokenBlacklistService_1[_0x5cd12a(0x151)][_0x5cd12a(0x14d)](_0x3a2a22,_0x328e78['exp']),_0x2aaa73[_0x5cd12a(0x16b)]({'success':!![],'message':_0x5cd12a(0x16e)});}catch(_0x435591){_0x5cbf9c(_0x435591);}},this[_0x55a83b(0x157)]=async(_0x202fb1,_0x406036,_0x4a7136)=>{const _0x5d47f3=_0x55a83b;try{const _0x12cc1f=tokenBlacklistService_1[_0x5d47f3(0x151)]['getStats']();_0x406036[_0x5d47f3(0x16b)]({'success':!![],'result':_0x12cc1f});}catch(_0x56cb3e){_0x4a7136(_0x56cb3e);}},this[_0x55a83b(0x173)]=new authService_1[(_0x55a83b(0x161))]();}}exports[a4_0x37f15f(0x176)]=AuthController;