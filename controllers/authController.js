'use strict';function a4_0x1553(_0x41adcb,_0x33c7d9){const _0x13543a=a4_0x1354();return a4_0x1553=function(_0x155352,_0x38898b){_0x155352=_0x155352-0xc9;let _0x3b47c7=_0x13543a[_0x155352];return _0x3b47c7;},a4_0x1553(_0x41adcb,_0x33c7d9);}const a4_0x2029d9=a4_0x1553;(function(_0x15dc82,_0x9d1a8d){const _0x193803=a4_0x1553,_0x491571=_0x15dc82();while(!![]){try{const _0x37ceff=parseInt(_0x193803(0xcf))/0x1+parseInt(_0x193803(0xd3))/0x2*(parseInt(_0x193803(0xd8))/0x3)+parseInt(_0x193803(0xea))/0x4+-parseInt(_0x193803(0xe1))/0x5*(-parseInt(_0x193803(0xfa))/0x6)+-parseInt(_0x193803(0xe0))/0x7+parseInt(_0x193803(0xf8))/0x8*(-parseInt(_0x193803(0xfb))/0x9)+-parseInt(_0x193803(0xdd))/0xa;if(_0x37ceff===_0x9d1a8d)break;else _0x491571['push'](_0x491571['shift']());}catch(_0x253081){_0x491571['push'](_0x491571['shift']());}}}(a4_0x1354,0x7f743));var __createBinding=this&&this['__createBinding']||(Object[a4_0x2029d9(0xef)]?function(_0x1dab44,_0x323729,_0x46469a,_0x37f245){const _0x37afec=a4_0x2029d9;if(_0x37f245===undefined)_0x37f245=_0x46469a;var _0x5b8954=Object['getOwnPropertyDescriptor'](_0x323729,_0x46469a);(!_0x5b8954||(_0x37afec(0xe9)in _0x5b8954?!_0x323729['__esModule']:_0x5b8954[_0x37afec(0xe3)]||_0x5b8954[_0x37afec(0xd2)]))&&(_0x5b8954={'enumerable':!![],'get':function(){return _0x323729[_0x46469a];}}),Object[_0x37afec(0xdc)](_0x1dab44,_0x37f245,_0x5b8954);}:function(_0x340a01,_0x5cb120,_0x21061e,_0x12099d){if(_0x12099d===undefined)_0x12099d=_0x21061e;_0x340a01[_0x12099d]=_0x5cb120[_0x21061e];}),__setModuleDefault=this&&this[a4_0x2029d9(0xde)]||(Object[a4_0x2029d9(0xef)]?function(_0x5040f5,_0x5c8dff){const _0xd87802=a4_0x2029d9;Object[_0xd87802(0xdc)](_0x5040f5,_0xd87802(0xf9),{'enumerable':!![],'value':_0x5c8dff});}:function(_0x1fed13,_0x41465a){const _0x5c496d=a4_0x2029d9;_0x1fed13[_0x5c496d(0xf9)]=_0x41465a;}),__importStar=this&&this['__importStar']||(function(){var _0x1b63d7=function(_0x503cbc){return _0x1b63d7=Object['getOwnPropertyNames']||function(_0x3ad931){const _0x26effd=a4_0x1553;var _0x43e77f=[];for(var _0x3e1d49 in _0x3ad931)if(Object[_0x26effd(0xda)][_0x26effd(0xed)][_0x26effd(0xf6)](_0x3ad931,_0x3e1d49))_0x43e77f[_0x43e77f[_0x26effd(0xcd)]]=_0x3e1d49;return _0x43e77f;},_0x1b63d7(_0x503cbc);};return function(_0x166c00){const _0x407bac=a4_0x1553;if(_0x166c00&&_0x166c00[_0x407bac(0xf5)])return _0x166c00;var _0x551a0e={};if(_0x166c00!=null){for(var _0x250c80=_0x1b63d7(_0x166c00),_0x14b16e=0x0;_0x14b16e<_0x250c80[_0x407bac(0xcd)];_0x14b16e++)if(_0x250c80[_0x14b16e]!==_0x407bac(0xf9))__createBinding(_0x551a0e,_0x166c00,_0x250c80[_0x14b16e]);}return __setModuleDefault(_0x551a0e,_0x166c00),_0x551a0e;};}());Object['defineProperty'](exports,a4_0x2029d9(0xf5),{'value':!![]}),exports['AuthController']=void 0x0;function a4_0x1354(){const _0x4a01c5=['authService','username','unknown','exp','1329XBxJxJ','../services/tokenBlacklistService','prototype','login','defineProperty','2438320ydPSVT','__setModuleDefault','Failed\x20to\x20send\x20failed\x20login\x20notification:','7152159FDWyVY','1238015HObZDk','AuthController','writable','telegramBotService','role','../services/telegramBotService','sendLoginNotification','getBlacklistStats','get','4136908pAGITB','body','user','hasOwnProperty','connection','create','Logged\x20out\x20successfully','../services/authService','tokenBlacklistService','then','getStats','__esModule','call','error','13776OzrJQr','default','6xrrRLa','4203UrCXKR','json','../config/database','blacklistToken','token','length','AuthService','590975uVPeqv','findUnique','shop','configurable','3246PzKnhq'];a4_0x1354=function(){return _0x4a01c5;};return a4_0x1354();}const authService_1=require(a4_0x2029d9(0xf1)),tokenBlacklistService_1=require(a4_0x2029d9(0xd9)),telegramBotService_1=require(a4_0x2029d9(0xe6));class AuthController{constructor(){const _0x4a601b=a4_0x2029d9;this['login']=async(_0x3518d7,_0x78dba8,_0xc627e0)=>{const _0x19b89d=a4_0x1553;try{const _0x46174c=_0x3518d7[_0x19b89d(0xeb)],_0x46aa23=_0x3518d7['ip']||_0x3518d7[_0x19b89d(0xee)]['remoteAddress']||_0x19b89d(0xd6),_0x61115c=_0x3518d7[_0x19b89d(0xe9)]('User-Agent')||_0x19b89d(0xd6);let _0x1e5903=![],_0x223bda=null;try{const _0x1373cd=await this[_0x19b89d(0xd4)][_0x19b89d(0xdb)](_0x46174c);_0x1e5903=!![],_0x1373cd[_0x19b89d(0xe5)]===_0x19b89d(0xd1)&&_0x1373cd[_0x19b89d(0xec)]?.['id']&&(_0x223bda=_0x1373cd[_0x19b89d(0xec)]['id']),_0x223bda&&await telegramBotService_1[_0x19b89d(0xe4)][_0x19b89d(0xe7)](_0x223bda,{'username':_0x46174c['username'],'ipAddress':_0x46aa23,'userAgent':_0x61115c,'timestamp':new Date(),'success':!![]}),_0x78dba8[_0x19b89d(0xc9)]({'success':!![],'result':_0x1373cd});}catch(_0xaec508){try{const _0x4b366d=(await Promise['resolve']()[_0x19b89d(0xf3)](()=>__importStar(require(_0x19b89d(0xca)))))[_0x19b89d(0xf9)],_0x4e05b8=await _0x4b366d[_0x19b89d(0xd1)][_0x19b89d(0xd0)]({'where':{'username':_0x46174c[_0x19b89d(0xd5)]},'select':{'id':!![]}});_0x4e05b8&&await telegramBotService_1[_0x19b89d(0xe4)][_0x19b89d(0xe7)](_0x4e05b8['id'],{'username':_0x46174c[_0x19b89d(0xd5)],'ipAddress':_0x46aa23,'userAgent':_0x61115c,'timestamp':new Date(),'success':![]});}catch(_0x1137bb){console[_0x19b89d(0xf7)](_0x19b89d(0xdf),_0x1137bb);}throw _0xaec508;}}catch(_0x349db1){_0xc627e0(_0x349db1);}},this['me']=async(_0x40fe8d,_0x90dcb,_0x2d5c86)=>{const _0x199b37=a4_0x1553;try{const _0x4142e9=_0x40fe8d['user'];_0x90dcb[_0x199b37(0xc9)]({'success':!![],'result':{'id':_0x4142e9?.['id'],'username':_0x4142e9?.['username'],'role':_0x4142e9?.[_0x199b37(0xe5)]}});}catch(_0x253e37){_0x2d5c86(_0x253e37);}},this['logout']=async(_0x2b2cb7,_0x3dea40,_0x4c14dd)=>{const _0xca0b1d=a4_0x1553;try{const _0x1e712b=_0x2b2cb7[_0xca0b1d(0xcc)],_0x293ee9=_0x2b2cb7[_0xca0b1d(0xec)];_0x1e712b&&_0x293ee9?.[_0xca0b1d(0xd7)]&&tokenBlacklistService_1[_0xca0b1d(0xf2)][_0xca0b1d(0xcb)](_0x1e712b,_0x293ee9[_0xca0b1d(0xd7)]),_0x3dea40[_0xca0b1d(0xc9)]({'success':!![],'message':_0xca0b1d(0xf0)});}catch(_0x4905d4){_0x4c14dd(_0x4905d4);}},this[_0x4a601b(0xe8)]=async(_0x5977cf,_0xe7b75b,_0x2538fe)=>{const _0x37d2b1=_0x4a601b;try{const _0x548908=tokenBlacklistService_1['tokenBlacklistService'][_0x37d2b1(0xf4)]();_0xe7b75b['json']({'success':!![],'result':_0x548908});}catch(_0x53eb78){_0x2538fe(_0x53eb78);}},this[_0x4a601b(0xd4)]=new authService_1[(_0x4a601b(0xce))]();}}exports[a4_0x2029d9(0xe2)]=AuthController;