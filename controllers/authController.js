'use strict';const a4_0x1ad299=a4_0x3c32;(function(_0x4733f8,_0x35d6e5){const _0x5b0a96=a4_0x3c32,_0x484a22=_0x4733f8();while(!![]){try{const _0x524457=parseInt(_0x5b0a96(0x1ec))/0x1*(-parseInt(_0x5b0a96(0x1dc))/0x2)+parseInt(_0x5b0a96(0x202))/0x3+-parseInt(_0x5b0a96(0x1fb))/0x4*(parseInt(_0x5b0a96(0x1d8))/0x5)+parseInt(_0x5b0a96(0x1d7))/0x6*(-parseInt(_0x5b0a96(0x1f1))/0x7)+parseInt(_0x5b0a96(0x1ee))/0x8+parseInt(_0x5b0a96(0x1f0))/0x9*(-parseInt(_0x5b0a96(0x1f9))/0xa)+parseInt(_0x5b0a96(0x1eb))/0xb;if(_0x524457===_0x35d6e5)break;else _0x484a22['push'](_0x484a22['shift']());}catch(_0x181ced){_0x484a22['push'](_0x484a22['shift']());}}}(a4_0x297d,0x26cbd));var __createBinding=this&&this[a4_0x1ad299(0x1e7)]||(Object[a4_0x1ad299(0x1f3)]?function(_0x1f59d2,_0x379431,_0x182642,_0x296011){const _0x314846=a4_0x1ad299;if(_0x296011===undefined)_0x296011=_0x182642;var _0x45340b=Object[_0x314846(0x206)](_0x379431,_0x182642);(!_0x45340b||(_0x314846(0x1e5)in _0x45340b?!_0x379431[_0x314846(0x205)]:_0x45340b[_0x314846(0x1e6)]||_0x45340b['configurable']))&&(_0x45340b={'enumerable':!![],'get':function(){return _0x379431[_0x182642];}}),Object['defineProperty'](_0x1f59d2,_0x296011,_0x45340b);}:function(_0x3547a9,_0x53863b,_0x3a05ec,_0x51695d){if(_0x51695d===undefined)_0x51695d=_0x3a05ec;_0x3547a9[_0x51695d]=_0x53863b[_0x3a05ec];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a4_0x1ad299(0x1f3)]?function(_0x2a535c,_0x499a20){const _0x775092=a4_0x1ad299;Object[_0x775092(0x1dd)](_0x2a535c,_0x775092(0x1f7),{'enumerable':!![],'value':_0x499a20});}:function(_0x28a63d,_0xdac0e8){_0x28a63d['default']=_0xdac0e8;}),__importStar=this&&this[a4_0x1ad299(0x1d5)]||(function(){var _0x14789e=function(_0x26f6ad){const _0x44ce0c=a4_0x3c32;return _0x14789e=Object[_0x44ce0c(0x1fe)]||function(_0x2bd92b){const _0x1da9b4=_0x44ce0c;var _0x10fc11=[];for(var _0x404260 in _0x2bd92b)if(Object['prototype'][_0x1da9b4(0x203)]['call'](_0x2bd92b,_0x404260))_0x10fc11[_0x10fc11[_0x1da9b4(0x1f4)]]=_0x404260;return _0x10fc11;},_0x14789e(_0x26f6ad);};return function(_0x22bf4e){const _0x589f5b=a4_0x3c32;if(_0x22bf4e&&_0x22bf4e[_0x589f5b(0x205)])return _0x22bf4e;var _0x3bc4a4={};if(_0x22bf4e!=null){for(var _0x5a400c=_0x14789e(_0x22bf4e),_0x55676b=0x0;_0x55676b<_0x5a400c[_0x589f5b(0x1f4)];_0x55676b++)if(_0x5a400c[_0x55676b]!==_0x589f5b(0x1f7))__createBinding(_0x3bc4a4,_0x22bf4e,_0x5a400c[_0x55676b]);}return __setModuleDefault(_0x3bc4a4,_0x22bf4e),_0x3bc4a4;};}());function a4_0x297d(){const _0x1437bb=['hasOwnProperty','user','__esModule','getOwnPropertyDescriptor','error','__importStar','../config/database','216702lPuPPy','105KYxaWQ','resolve','getBlacklistStats','remoteAddress','2664kgdKmT','defineProperty','User-Agent','telegramBotService','Logged\x20out\x20successfully','../services/authService','unknown','then','tokenBlacklistService','get','writable','__createBinding','AuthController','json','shop','5214220LPOcKz','236xDhbGu','login','198120qelSsL','AuthService','2853rwstxu','21OQppYw','Failed\x20to\x20send\x20failed\x20login\x20notification:','create','length','sendLoginNotification','getStats','default','authService','390oowXpC','token','11236VrEfYQ','exp','username','getOwnPropertyNames','findUnique','../services/tokenBlacklistService','blacklistToken','462537HvSLJk'];a4_0x297d=function(){return _0x1437bb;};return a4_0x297d();}Object[a4_0x1ad299(0x1dd)](exports,a4_0x1ad299(0x205),{'value':!![]}),exports[a4_0x1ad299(0x1e8)]=void 0x0;function a4_0x3c32(_0x147f9b,_0x5aa463){const _0x297d96=a4_0x297d();return a4_0x3c32=function(_0x3c32a5,_0x20d8e8){_0x3c32a5=_0x3c32a5-0x1d4;let _0x345e82=_0x297d96[_0x3c32a5];return _0x345e82;},a4_0x3c32(_0x147f9b,_0x5aa463);}const authService_1=require(a4_0x1ad299(0x1e1)),tokenBlacklistService_1=require(a4_0x1ad299(0x200)),telegramBotService_1=require('../services/telegramBotService');class AuthController{constructor(){const _0x4f92eb=a4_0x1ad299;this[_0x4f92eb(0x1ed)]=async(_0x502eee,_0x1ecf7f,_0x29074d)=>{const _0x2f7b7c=_0x4f92eb;try{const _0xd21a1c=_0x502eee['body'],_0x5b0735=_0x502eee['ip']||_0x502eee['connection'][_0x2f7b7c(0x1db)]||_0x2f7b7c(0x1e2),_0x482aa0=_0x502eee[_0x2f7b7c(0x1e5)](_0x2f7b7c(0x1de))||_0x2f7b7c(0x1e2);let _0x119dfb=![],_0x11e957=null;try{const _0x24a8f6=await this[_0x2f7b7c(0x1f8)][_0x2f7b7c(0x1ed)](_0xd21a1c);_0x119dfb=!![],_0x24a8f6['role']===_0x2f7b7c(0x1ea)&&_0x24a8f6[_0x2f7b7c(0x204)]?.['id']&&(_0x11e957=_0x24a8f6[_0x2f7b7c(0x204)]['id']),_0x11e957&&await telegramBotService_1[_0x2f7b7c(0x1df)][_0x2f7b7c(0x1f5)](_0x11e957,{'username':_0xd21a1c[_0x2f7b7c(0x1fd)],'ipAddress':_0x5b0735,'userAgent':_0x482aa0,'timestamp':new Date(),'success':!![]}),_0x1ecf7f[_0x2f7b7c(0x1e9)]({'success':!![],'result':_0x24a8f6});}catch(_0x2f14cc){try{const _0x3ab931=(await Promise[_0x2f7b7c(0x1d9)]()[_0x2f7b7c(0x1e3)](()=>__importStar(require(_0x2f7b7c(0x1d6)))))['default'],_0x3c4819=await _0x3ab931[_0x2f7b7c(0x1ea)][_0x2f7b7c(0x1ff)]({'where':{'username':_0xd21a1c[_0x2f7b7c(0x1fd)]},'select':{'id':!![]}});_0x3c4819&&await telegramBotService_1[_0x2f7b7c(0x1df)][_0x2f7b7c(0x1f5)](_0x3c4819['id'],{'username':_0xd21a1c[_0x2f7b7c(0x1fd)],'ipAddress':_0x5b0735,'userAgent':_0x482aa0,'timestamp':new Date(),'success':![]});}catch(_0x38c71f){console[_0x2f7b7c(0x1d4)](_0x2f7b7c(0x1f2),_0x38c71f);}throw _0x2f14cc;}}catch(_0x37aec3){_0x29074d(_0x37aec3);}},this['me']=async(_0x12a0c5,_0x3e556e,_0x1615f7)=>{const _0x582ca6=_0x4f92eb;try{const _0xb7e672=_0x12a0c5[_0x582ca6(0x204)];_0x3e556e[_0x582ca6(0x1e9)]({'success':!![],'result':{'id':_0xb7e672?.['id'],'username':_0xb7e672?.[_0x582ca6(0x1fd)],'role':_0xb7e672?.['role']}});}catch(_0x23d1dd){_0x1615f7(_0x23d1dd);}},this['logout']=async(_0x248d7c,_0x4b4a2d,_0x5376d3)=>{const _0xfc6010=_0x4f92eb;try{const _0x7fdc5c=_0x248d7c[_0xfc6010(0x1fa)],_0x2516af=_0x248d7c['user'];_0x7fdc5c&&_0x2516af?.[_0xfc6010(0x1fc)]&&tokenBlacklistService_1[_0xfc6010(0x1e4)][_0xfc6010(0x201)](_0x7fdc5c,_0x2516af[_0xfc6010(0x1fc)]),_0x4b4a2d[_0xfc6010(0x1e9)]({'success':!![],'message':_0xfc6010(0x1e0)});}catch(_0x35aa68){_0x5376d3(_0x35aa68);}},this[_0x4f92eb(0x1da)]=async(_0x3e7651,_0xd74c17,_0x25f563)=>{const _0x4ac9a9=_0x4f92eb;try{const _0xae1aac=tokenBlacklistService_1[_0x4ac9a9(0x1e4)][_0x4ac9a9(0x1f6)]();_0xd74c17[_0x4ac9a9(0x1e9)]({'success':!![],'result':_0xae1aac});}catch(_0x2bd750){_0x25f563(_0x2bd750);}},this['authService']=new authService_1[(_0x4f92eb(0x1ef))]();}}exports[a4_0x1ad299(0x1e8)]=AuthController;