'use strict';const a4_0x3752b2=a4_0x5aaf;(function(_0x377066,_0x5bf2fe){const _0x2fbe2b=a4_0x5aaf,_0x304609=_0x377066();while(!![]){try{const _0x43f9b3=parseInt(_0x2fbe2b(0xb3))/0x1*(-parseInt(_0x2fbe2b(0x9d))/0x2)+parseInt(_0x2fbe2b(0xb5))/0x3*(parseInt(_0x2fbe2b(0x99))/0x4)+-parseInt(_0x2fbe2b(0xbb))/0x5*(-parseInt(_0x2fbe2b(0xbc))/0x6)+-parseInt(_0x2fbe2b(0xb0))/0x7*(parseInt(_0x2fbe2b(0xb9))/0x8)+parseInt(_0x2fbe2b(0x9e))/0x9+-parseInt(_0x2fbe2b(0xb2))/0xa+-parseInt(_0x2fbe2b(0x97))/0xb;if(_0x43f9b3===_0x5bf2fe)break;else _0x304609['push'](_0x304609['shift']());}catch(_0x563be1){_0x304609['push'](_0x304609['shift']());}}}(a4_0x5151,0xbaf06));function a4_0x5151(){const _0x5b7946=['getOwnPropertyDescriptor','AuthService','Failed\x20to\x20send\x20failed\x20login\x20notification:','2ElaCLx','11942883MZAwmH','getBlacklistStats','blacklistToken','then','tokenBlacklistService','../config/database','defineProperty','body','user','shop','prototype','connection','__setModuleDefault','telegramBotService','../services/telegramBotService','username','__esModule','getStats','2909683fziKMD','Logged\x20out\x20successfully','1574710ybzmIz','759469qtyYsQ','hasOwnProperty','168501zoZJha','error','findUnique','unknown','24zbuvHc','sendLoginNotification','3439340jwhfpv','12szykIW','get','authService','AuthController','role','length','__createBinding','User-Agent','call','create','token','json','logout','default','6771369quRADb','exp','60MnWxHn'];a4_0x5151=function(){return _0x5b7946;};return a4_0x5151();}var __createBinding=this&&this[a4_0x3752b2(0x8f)]||(Object[a4_0x3752b2(0x92)]?function(_0x5d68ff,_0x3006bb,_0x1cc642,_0x897946){const _0x4d83ec=a4_0x3752b2;if(_0x897946===undefined)_0x897946=_0x1cc642;var _0x1e74fd=Object[_0x4d83ec(0x9a)](_0x3006bb,_0x1cc642);(!_0x1e74fd||('get'in _0x1e74fd?!_0x3006bb['__esModule']:_0x1e74fd['writable']||_0x1e74fd['configurable']))&&(_0x1e74fd={'enumerable':!![],'get':function(){return _0x3006bb[_0x1cc642];}}),Object[_0x4d83ec(0xa4)](_0x5d68ff,_0x897946,_0x1e74fd);}:function(_0x3f18a7,_0x2a319a,_0x3c3b6f,_0x20dd49){if(_0x20dd49===undefined)_0x20dd49=_0x3c3b6f;_0x3f18a7[_0x20dd49]=_0x2a319a[_0x3c3b6f];}),__setModuleDefault=this&&this[a4_0x3752b2(0xaa)]||(Object[a4_0x3752b2(0x92)]?function(_0x39930f,_0x3b5ca0){const _0x13378e=a4_0x3752b2;Object[_0x13378e(0xa4)](_0x39930f,_0x13378e(0x96),{'enumerable':!![],'value':_0x3b5ca0});}:function(_0x4fb576,_0x5af1b0){const _0x50bae8=a4_0x3752b2;_0x4fb576[_0x50bae8(0x96)]=_0x5af1b0;}),__importStar=this&&this['__importStar']||(function(){var _0x4157a1=function(_0x3335c3){return _0x4157a1=Object['getOwnPropertyNames']||function(_0x5c031f){const _0x1b19aa=a4_0x5aaf;var _0x4c1520=[];for(var _0x1e1259 in _0x5c031f)if(Object[_0x1b19aa(0xa8)][_0x1b19aa(0xb4)][_0x1b19aa(0x91)](_0x5c031f,_0x1e1259))_0x4c1520[_0x4c1520['length']]=_0x1e1259;return _0x4c1520;},_0x4157a1(_0x3335c3);};return function(_0x4886dc){const _0x645f74=a4_0x5aaf;if(_0x4886dc&&_0x4886dc[_0x645f74(0xae)])return _0x4886dc;var _0x2294a4={};if(_0x4886dc!=null){for(var _0x369b90=_0x4157a1(_0x4886dc),_0x427278=0x0;_0x427278<_0x369b90[_0x645f74(0x8e)];_0x427278++)if(_0x369b90[_0x427278]!==_0x645f74(0x96))__createBinding(_0x2294a4,_0x4886dc,_0x369b90[_0x427278]);}return __setModuleDefault(_0x2294a4,_0x4886dc),_0x2294a4;};}());Object[a4_0x3752b2(0xa4)](exports,'__esModule',{'value':!![]}),exports[a4_0x3752b2(0xbf)]=void 0x0;const authService_1=require('../services/authService'),tokenBlacklistService_1=require('../services/tokenBlacklistService'),telegramBotService_1=require(a4_0x3752b2(0xac));class AuthController{constructor(){const _0x5c83e5=a4_0x3752b2;this['login']=async(_0x46355e,_0x63ab3f,_0x390e0a)=>{const _0x54d076=a4_0x5aaf;try{const _0x515e27=_0x46355e[_0x54d076(0xa5)],_0x11aa51=_0x46355e['ip']||_0x46355e[_0x54d076(0xa9)]['remoteAddress']||_0x54d076(0xb8),_0x284e0a=_0x46355e[_0x54d076(0xbd)](_0x54d076(0x90))||_0x54d076(0xb8);let _0x9ed30c=![],_0x51bc72=null;try{const _0x3fc927=await this[_0x54d076(0xbe)]['login'](_0x515e27);_0x9ed30c=!![],_0x3fc927[_0x54d076(0xc0)]===_0x54d076(0xa7)&&_0x3fc927[_0x54d076(0xa6)]?.['id']&&(_0x51bc72=_0x3fc927[_0x54d076(0xa6)]['id']),_0x51bc72&&await telegramBotService_1[_0x54d076(0xab)][_0x54d076(0xba)](_0x51bc72,{'username':_0x515e27['username'],'ipAddress':_0x11aa51,'userAgent':_0x284e0a,'timestamp':new Date(),'success':!![]}),_0x63ab3f[_0x54d076(0x94)]({'success':!![],'result':_0x3fc927});}catch(_0xd0c7f6){try{const _0x2ae2ff=(await Promise['resolve']()[_0x54d076(0xa1)](()=>__importStar(require(_0x54d076(0xa3)))))[_0x54d076(0x96)],_0x440b7a=await _0x2ae2ff['shop'][_0x54d076(0xb7)]({'where':{'username':_0x515e27['username']},'select':{'id':!![]}});_0x440b7a&&await telegramBotService_1[_0x54d076(0xab)][_0x54d076(0xba)](_0x440b7a['id'],{'username':_0x515e27[_0x54d076(0xad)],'ipAddress':_0x11aa51,'userAgent':_0x284e0a,'timestamp':new Date(),'success':![]});}catch(_0x3a9c2b){console[_0x54d076(0xb6)](_0x54d076(0x9c),_0x3a9c2b);}throw _0xd0c7f6;}}catch(_0x46fd64){_0x390e0a(_0x46fd64);}},this['me']=async(_0x197a4b,_0x1aa1e8,_0x499e7b)=>{const _0x261f2d=a4_0x5aaf;try{const _0x6d6caa=_0x197a4b[_0x261f2d(0xa6)];_0x1aa1e8[_0x261f2d(0x94)]({'success':!![],'result':{'id':_0x6d6caa?.['id'],'username':_0x6d6caa?.[_0x261f2d(0xad)],'role':_0x6d6caa?.[_0x261f2d(0xc0)]}});}catch(_0x4c7897){_0x499e7b(_0x4c7897);}},this[_0x5c83e5(0x95)]=async(_0x2ad226,_0x41eb37,_0x51e47b)=>{const _0x262856=_0x5c83e5;try{const _0x45cbba=_0x2ad226[_0x262856(0x93)],_0x32b76a=_0x2ad226[_0x262856(0xa6)];_0x45cbba&&_0x32b76a?.[_0x262856(0x98)]&&tokenBlacklistService_1[_0x262856(0xa2)][_0x262856(0xa0)](_0x45cbba,_0x32b76a[_0x262856(0x98)]),_0x41eb37[_0x262856(0x94)]({'success':!![],'message':_0x262856(0xb1)});}catch(_0x1b6856){_0x51e47b(_0x1b6856);}},this[_0x5c83e5(0x9f)]=async(_0x35bbdd,_0x3730f9,_0x1809be)=>{const _0x5b56ed=_0x5c83e5;try{const _0x2f5e45=tokenBlacklistService_1[_0x5b56ed(0xa2)][_0x5b56ed(0xaf)]();_0x3730f9[_0x5b56ed(0x94)]({'success':!![],'result':_0x2f5e45});}catch(_0x33212b){_0x1809be(_0x33212b);}},this[_0x5c83e5(0xbe)]=new authService_1[(_0x5c83e5(0x9b))]();}}function a4_0x5aaf(_0x22a414,_0xf6eaa1){const _0x515105=a4_0x5151();return a4_0x5aaf=function(_0x5aaf70,_0x31d8dc){_0x5aaf70=_0x5aaf70-0x8e;let _0x1abeee=_0x515105[_0x5aaf70];return _0x1abeee;},a4_0x5aaf(_0x22a414,_0xf6eaa1);}exports['AuthController']=AuthController;