'use strict';const a4_0x401210=a4_0x1d61;(function(_0x4c760a,_0x1ff09a){const _0x223b6a=a4_0x1d61,_0xbf6fb7=_0x4c760a();while(!![]){try{const _0x5d28e6=parseInt(_0x223b6a(0x79))/0x1+parseInt(_0x223b6a(0x9b))/0x2+parseInt(_0x223b6a(0x92))/0x3*(-parseInt(_0x223b6a(0x8f))/0x4)+parseInt(_0x223b6a(0x71))/0x5*(parseInt(_0x223b6a(0x7c))/0x6)+parseInt(_0x223b6a(0x7e))/0x7*(parseInt(_0x223b6a(0x75))/0x8)+parseInt(_0x223b6a(0x81))/0x9*(-parseInt(_0x223b6a(0x84))/0xa)+-parseInt(_0x223b6a(0x8c))/0xb*(parseInt(_0x223b6a(0x7d))/0xc);if(_0x5d28e6===_0x1ff09a)break;else _0xbf6fb7['push'](_0xbf6fb7['shift']());}catch(_0x402640){_0xbf6fb7['push'](_0xbf6fb7['shift']());}}}(a4_0x50ba,0x34355));var __createBinding=this&&this['__createBinding']||(Object['create']?function(_0x18044c,_0x2eb796,_0x56fa69,_0x2dc4a0){const _0x5eb99a=a4_0x1d61;if(_0x2dc4a0===undefined)_0x2dc4a0=_0x56fa69;var _0x37ec9b=Object[_0x5eb99a(0x85)](_0x2eb796,_0x56fa69);(!_0x37ec9b||(_0x5eb99a(0x78)in _0x37ec9b?!_0x2eb796['__esModule']:_0x37ec9b[_0x5eb99a(0x7a)]||_0x37ec9b[_0x5eb99a(0x86)]))&&(_0x37ec9b={'enumerable':!![],'get':function(){return _0x2eb796[_0x56fa69];}}),Object[_0x5eb99a(0x9d)](_0x18044c,_0x2dc4a0,_0x37ec9b);}:function(_0x3ecc2e,_0xac31fa,_0x54adb2,_0x2f1a24){if(_0x2f1a24===undefined)_0x2f1a24=_0x54adb2;_0x3ecc2e[_0x2f1a24]=_0xac31fa[_0x54adb2];}),__setModuleDefault=this&&this[a4_0x401210(0x95)]||(Object[a4_0x401210(0x94)]?function(_0x5e27b2,_0x4c730f){const _0x5b23dc=a4_0x401210;Object[_0x5b23dc(0x9d)](_0x5e27b2,_0x5b23dc(0x93),{'enumerable':!![],'value':_0x4c730f});}:function(_0x331b25,_0x11e043){const _0xaf409d=a4_0x401210;_0x331b25[_0xaf409d(0x93)]=_0x11e043;}),__importStar=this&&this[a4_0x401210(0x89)]||(function(){var _0x30df94=function(_0x3aeb09){return _0x30df94=Object['getOwnPropertyNames']||function(_0xf5e19e){const _0xb052ce=a4_0x1d61;var _0x535233=[];for(var _0x948aa0 in _0xf5e19e)if(Object[_0xb052ce(0x8b)]['hasOwnProperty'][_0xb052ce(0x97)](_0xf5e19e,_0x948aa0))_0x535233[_0x535233[_0xb052ce(0x74)]]=_0x948aa0;return _0x535233;},_0x30df94(_0x3aeb09);};return function(_0x8de10){const _0xba1405=a4_0x1d61;if(_0x8de10&&_0x8de10[_0xba1405(0x70)])return _0x8de10;var _0x53e4c0={};if(_0x8de10!=null){for(var _0x44ba93=_0x30df94(_0x8de10),_0x10ce7e=0x0;_0x10ce7e<_0x44ba93['length'];_0x10ce7e++)if(_0x44ba93[_0x10ce7e]!==_0xba1405(0x93))__createBinding(_0x53e4c0,_0x8de10,_0x44ba93[_0x10ce7e]);}return __setModuleDefault(_0x53e4c0,_0x8de10),_0x53e4c0;};}());Object[a4_0x401210(0x9d)](exports,'__esModule',{'value':!![]}),exports[a4_0x401210(0x77)]=void 0x0;const authService_1=require('../services/authService'),tokenBlacklistService_1=require(a4_0x401210(0x72)),telegramBotService_1=require(a4_0x401210(0x83));class AuthController{constructor(){const _0xff166f=a4_0x401210;this[_0xff166f(0x90)]=async(_0x3bb174,_0x4e733a,_0x118a93)=>{const _0x4e2468=_0xff166f;try{const _0x1c2971=_0x3bb174[_0x4e2468(0x82)],_0x4668aa=_0x3bb174['ip']||_0x3bb174[_0x4e2468(0x96)][_0x4e2468(0x9f)]||_0x4e2468(0x8e),_0x4cdfae=_0x3bb174[_0x4e2468(0x78)]('User-Agent')||_0x4e2468(0x8e);let _0xd26516=![],_0x84b9f7=null;try{const _0x33b7a1=await this['authService'][_0x4e2468(0x90)](_0x1c2971);_0xd26516=!![],_0x33b7a1[_0x4e2468(0x88)]===_0x4e2468(0xa0)&&_0x33b7a1[_0x4e2468(0x7f)]?.['id']&&(_0x84b9f7=_0x33b7a1[_0x4e2468(0x7f)]['id']),_0x84b9f7&&await telegramBotService_1['telegramBotService']['sendLoginNotification'](_0x84b9f7,{'username':_0x1c2971[_0x4e2468(0x9a)],'ipAddress':_0x4668aa,'userAgent':_0x4cdfae,'timestamp':new Date(),'success':!![]}),_0x4e733a[_0x4e2468(0x91)]({'success':!![],'result':_0x33b7a1});}catch(_0x358b9b){try{const _0xeb8d58=(await Promise[_0x4e2468(0xa2)]()[_0x4e2468(0xa1)](()=>__importStar(require(_0x4e2468(0xa3)))))['default'],_0x3a58b8=await _0xeb8d58[_0x4e2468(0xa0)][_0x4e2468(0x8d)]({'where':{'username':_0x1c2971[_0x4e2468(0x9a)]},'select':{'id':!![]}});_0x3a58b8&&await telegramBotService_1['telegramBotService'][_0x4e2468(0x7b)](_0x3a58b8['id'],{'username':_0x1c2971[_0x4e2468(0x9a)],'ipAddress':_0x4668aa,'userAgent':_0x4cdfae,'timestamp':new Date(),'success':![]});}catch(_0x30833f){console['error'](_0x4e2468(0x87),_0x30833f);}throw _0x358b9b;}}catch(_0x4c17b1){_0x118a93(_0x4c17b1);}},this['me']=async(_0x3134e6,_0x54bac4,_0x29e058)=>{const _0x1f89b1=_0xff166f;try{const _0x5a858b=_0x3134e6[_0x1f89b1(0x7f)];_0x54bac4[_0x1f89b1(0x91)]({'success':!![],'result':{'id':_0x5a858b?.['id'],'username':_0x5a858b?.['username'],'role':_0x5a858b?.['role']}});}catch(_0x449728){_0x29e058(_0x449728);}},this[_0xff166f(0x9c)]=async(_0x2b7227,_0x338e51,_0x187f1b)=>{const _0xec6222=_0xff166f;try{const _0x3468b6=_0x2b7227[_0xec6222(0x80)],_0x51c4c7=_0x2b7227[_0xec6222(0x7f)];_0x3468b6&&_0x51c4c7?.[_0xec6222(0x76)]&&tokenBlacklistService_1[_0xec6222(0x98)]['blacklistToken'](_0x3468b6,_0x51c4c7['exp']),_0x338e51['json']({'success':!![],'message':_0xec6222(0x8a)});}catch(_0x165ee0){_0x187f1b(_0x165ee0);}},this[_0xff166f(0x73)]=async(_0x1a2ca4,_0x114c91,_0x5dc8da)=>{const _0x5a3c13=_0xff166f;try{const _0x28d06f=tokenBlacklistService_1[_0x5a3c13(0x98)]['getStats']();_0x114c91[_0x5a3c13(0x91)]({'success':!![],'result':_0x28d06f});}catch(_0x52527b){_0x5dc8da(_0x52527b);}},this[_0xff166f(0x9e)]=new authService_1[(_0xff166f(0x99))]();}}function a4_0x1d61(_0x5b689f,_0x100e1a){const _0x50ba5c=a4_0x50ba();return a4_0x1d61=function(_0x1d61e5,_0x3c6327){_0x1d61e5=_0x1d61e5-0x70;let _0x1fa21c=_0x50ba5c[_0x1d61e5];return _0x1fa21c;},a4_0x1d61(_0x5b689f,_0x100e1a);}exports[a4_0x401210(0x77)]=AuthController;function a4_0x50ba(){const _0x5572e1=['remoteAddress','shop','then','resolve','../config/database','__esModule','82055ozswRq','../services/tokenBlacklistService','getBlacklistStats','length','23536OkNxYf','exp','AuthController','get','355602zwaOfU','writable','sendLoginNotification','18UlDflp','60lqHGjk','637fstNuo','user','token','342vxHHxF','body','../services/telegramBotService','55720HcfeJv','getOwnPropertyDescriptor','configurable','Failed\x20to\x20send\x20failed\x20login\x20notification:','role','__importStar','Logged\x20out\x20successfully','prototype','469293vmOCVl','findUnique','unknown','8PyAnno','login','json','211197YkJVNN','default','create','__setModuleDefault','connection','call','tokenBlacklistService','AuthService','username','214274JkmWMX','logout','defineProperty','authService'];a4_0x50ba=function(){return _0x5572e1;};return a4_0x50ba();}