'use strict';function a4_0x624c(_0x23309f,_0x32014f){const _0x4e492c=a4_0x4e49();return a4_0x624c=function(_0x624ca2,_0x2b4ef6){_0x624ca2=_0x624ca2-0x13a;let _0x39425c=_0x4e492c[_0x624ca2];return _0x39425c;},a4_0x624c(_0x23309f,_0x32014f);}const a4_0x51449b=a4_0x624c;(function(_0x767316,_0x2ef05f){const _0x32bcfa=a4_0x624c,_0x4740e7=_0x767316();while(!![]){try{const _0x2fe527=parseInt(_0x32bcfa(0x13d))/0x1*(-parseInt(_0x32bcfa(0x149))/0x2)+-parseInt(_0x32bcfa(0x14a))/0x3+parseInt(_0x32bcfa(0x159))/0x4+-parseInt(_0x32bcfa(0x146))/0x5*(-parseInt(_0x32bcfa(0x14c))/0x6)+parseInt(_0x32bcfa(0x13c))/0x7+-parseInt(_0x32bcfa(0x145))/0x8*(-parseInt(_0x32bcfa(0x14f))/0x9)+-parseInt(_0x32bcfa(0x150))/0xa;if(_0x2fe527===_0x2ef05f)break;else _0x4740e7['push'](_0x4740e7['shift']());}catch(_0xb819ac){_0x4740e7['push'](_0x4740e7['shift']());}}}(a4_0x4e49,0x678a9));var __createBinding=this&&this[a4_0x51449b(0x13b)]||(Object[a4_0x51449b(0x164)]?function(_0x2cbeb1,_0x141ba4,_0xb4b3f6,_0x344ef8){const _0x41f2be=a4_0x51449b;if(_0x344ef8===undefined)_0x344ef8=_0xb4b3f6;var _0x47b023=Object[_0x41f2be(0x163)](_0x141ba4,_0xb4b3f6);(!_0x47b023||(_0x41f2be(0x16b)in _0x47b023?!_0x141ba4[_0x41f2be(0x166)]:_0x47b023[_0x41f2be(0x157)]||_0x47b023[_0x41f2be(0x15d)]))&&(_0x47b023={'enumerable':!![],'get':function(){return _0x141ba4[_0xb4b3f6];}}),Object['defineProperty'](_0x2cbeb1,_0x344ef8,_0x47b023);}:function(_0x5ecf5e,_0x3c53f0,_0x456771,_0x1139bb){if(_0x1139bb===undefined)_0x1139bb=_0x456771;_0x5ecf5e[_0x1139bb]=_0x3c53f0[_0x456771];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a4_0x51449b(0x164)]?function(_0x1e7a51,_0x45298c){const _0x1d41ac=a4_0x51449b;Object[_0x1d41ac(0x155)](_0x1e7a51,_0x1d41ac(0x141),{'enumerable':!![],'value':_0x45298c});}:function(_0x41d03a,_0x25b8de){const _0x4e4c88=a4_0x51449b;_0x41d03a[_0x4e4c88(0x141)]=_0x25b8de;}),__importStar=this&&this['__importStar']||(function(){var _0x32e428=function(_0x5e9dea){const _0x11aa39=a4_0x624c;return _0x32e428=Object[_0x11aa39(0x16c)]||function(_0x21ae77){const _0x345eb4=_0x11aa39;var _0x7f3ab=[];for(var _0x35dbf6 in _0x21ae77)if(Object[_0x345eb4(0x148)][_0x345eb4(0x160)][_0x345eb4(0x13a)](_0x21ae77,_0x35dbf6))_0x7f3ab[_0x7f3ab[_0x345eb4(0x161)]]=_0x35dbf6;return _0x7f3ab;},_0x32e428(_0x5e9dea);};return function(_0x2ea0c4){const _0x53c36d=a4_0x624c;if(_0x2ea0c4&&_0x2ea0c4['__esModule'])return _0x2ea0c4;var _0x1a4037={};if(_0x2ea0c4!=null){for(var _0x382cd8=_0x32e428(_0x2ea0c4),_0x31eb6f=0x0;_0x31eb6f<_0x382cd8[_0x53c36d(0x161)];_0x31eb6f++)if(_0x382cd8[_0x31eb6f]!==_0x53c36d(0x141))__createBinding(_0x1a4037,_0x2ea0c4,_0x382cd8[_0x31eb6f]);}return __setModuleDefault(_0x1a4037,_0x2ea0c4),_0x1a4037;};}());Object['defineProperty'](exports,a4_0x51449b(0x166),{'value':!![]}),exports[a4_0x51449b(0x165)]=void 0x0;const authService_1=require('../services/authService'),tokenBlacklistService_1=require('../services/tokenBlacklistService'),telegramBotService_1=require(a4_0x51449b(0x13f));function a4_0x4e49(){const _0x580214=['4616WOzJcJ','5VvmnBk','exp','prototype','6WXUilm','2294493wJxCvM','login','2528922ERQsYt','then','token','846GOVFfp','1704410lTWdor','role','username','User-Agent','logout','defineProperty','AuthService','writable','sendLoginNotification','2361028lJCbWR','resolve','body','Failed\x20to\x20send\x20failed\x20login\x20notification:','configurable','tokenBlacklistService','authService','hasOwnProperty','length','shop','getOwnPropertyDescriptor','create','AuthController','__esModule','Logged\x20out\x20successfully','../config/database','unknown','user','get','getOwnPropertyNames','getStats','call','__createBinding','2412088kCNURC','17063GvqbgQ','json','../services/telegramBotService','telegramBotService','default','blacklistToken','getBlacklistStats','error'];a4_0x4e49=function(){return _0x580214;};return a4_0x4e49();}class AuthController{constructor(){const _0x4e76e2=a4_0x51449b;this[_0x4e76e2(0x14b)]=async(_0x4ab7ea,_0x14a516,_0x27df08)=>{const _0x2a6804=_0x4e76e2;try{const _0x167bbe=_0x4ab7ea[_0x2a6804(0x15b)],_0x2d0828=_0x4ab7ea['ip']||_0x4ab7ea['connection']['remoteAddress']||_0x2a6804(0x169),_0x175504=_0x4ab7ea[_0x2a6804(0x16b)](_0x2a6804(0x153))||'unknown';let _0x186c92=![],_0x5d9ca0=null;try{const _0x454314=await this[_0x2a6804(0x15f)][_0x2a6804(0x14b)](_0x167bbe);_0x186c92=!![],_0x454314[_0x2a6804(0x151)]==='shop'&&_0x454314[_0x2a6804(0x16a)]?.['id']&&(_0x5d9ca0=_0x454314[_0x2a6804(0x16a)]['id']),_0x5d9ca0&&await telegramBotService_1[_0x2a6804(0x140)][_0x2a6804(0x158)](_0x5d9ca0,{'username':_0x167bbe[_0x2a6804(0x152)],'ipAddress':_0x2d0828,'userAgent':_0x175504,'timestamp':new Date(),'success':!![]}),_0x14a516[_0x2a6804(0x13e)]({'success':!![],'result':_0x454314});}catch(_0xa0a201){try{const _0x2d8e4e=(await Promise[_0x2a6804(0x15a)]()[_0x2a6804(0x14d)](()=>__importStar(require(_0x2a6804(0x168)))))[_0x2a6804(0x141)],_0x13462b=await _0x2d8e4e[_0x2a6804(0x162)]['findUnique']({'where':{'username':_0x167bbe[_0x2a6804(0x152)]},'select':{'id':!![]}});_0x13462b&&await telegramBotService_1[_0x2a6804(0x140)][_0x2a6804(0x158)](_0x13462b['id'],{'username':_0x167bbe[_0x2a6804(0x152)],'ipAddress':_0x2d0828,'userAgent':_0x175504,'timestamp':new Date(),'success':![]});}catch(_0xf4033){console[_0x2a6804(0x144)](_0x2a6804(0x15c),_0xf4033);}throw _0xa0a201;}}catch(_0x5b07c8){_0x27df08(_0x5b07c8);}},this['me']=async(_0x6fd170,_0x494be1,_0x3d529e)=>{const _0x4f2e20=_0x4e76e2;try{const _0x248b3d=_0x6fd170[_0x4f2e20(0x16a)];_0x494be1['json']({'success':!![],'result':{'id':_0x248b3d?.['id'],'username':_0x248b3d?.[_0x4f2e20(0x152)],'role':_0x248b3d?.['role']}});}catch(_0x5d62b3){_0x3d529e(_0x5d62b3);}},this[_0x4e76e2(0x154)]=async(_0x163b9a,_0x471460,_0x4e2d05)=>{const _0x17fd39=_0x4e76e2;try{const _0xee9b01=_0x163b9a[_0x17fd39(0x14e)],_0x287ea7=_0x163b9a[_0x17fd39(0x16a)];_0xee9b01&&_0x287ea7?.[_0x17fd39(0x147)]&&tokenBlacklistService_1[_0x17fd39(0x15e)][_0x17fd39(0x142)](_0xee9b01,_0x287ea7[_0x17fd39(0x147)]),_0x471460[_0x17fd39(0x13e)]({'success':!![],'message':_0x17fd39(0x167)});}catch(_0x203156){_0x4e2d05(_0x203156);}},this[_0x4e76e2(0x143)]=async(_0x59ea6c,_0x1a3dee,_0x269565)=>{const _0x9eedfb=_0x4e76e2;try{const _0x159c21=tokenBlacklistService_1[_0x9eedfb(0x15e)][_0x9eedfb(0x16d)]();_0x1a3dee[_0x9eedfb(0x13e)]({'success':!![],'result':_0x159c21});}catch(_0x1fc680){_0x269565(_0x1fc680);}},this[_0x4e76e2(0x15f)]=new authService_1[(_0x4e76e2(0x156))]();}}exports[a4_0x51449b(0x165)]=AuthController;