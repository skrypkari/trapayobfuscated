'use strict';const a4_0x34a4e4=a4_0x1cf7;(function(_0x5b85e4,_0x5380a0){const _0x4bd3eb=a4_0x1cf7,_0x9fdd92=_0x5b85e4();while(!![]){try{const _0x1bf5d6=parseInt(_0x4bd3eb(0x1fa))/0x1+parseInt(_0x4bd3eb(0x1d8))/0x2+parseInt(_0x4bd3eb(0x1ea))/0x3*(parseInt(_0x4bd3eb(0x1f6))/0x4)+parseInt(_0x4bd3eb(0x1f7))/0x5*(-parseInt(_0x4bd3eb(0x1fb))/0x6)+parseInt(_0x4bd3eb(0x1ed))/0x7+-parseInt(_0x4bd3eb(0x1e3))/0x8*(parseInt(_0x4bd3eb(0x1e2))/0x9)+parseInt(_0x4bd3eb(0x1d0))/0xa;if(_0x1bf5d6===_0x5380a0)break;else _0x9fdd92['push'](_0x9fdd92['shift']());}catch(_0xb414cd){_0x9fdd92['push'](_0x9fdd92['shift']());}}}(a4_0x38ea,0x5a1b6));var __createBinding=this&&this[a4_0x34a4e4(0x1d5)]||(Object[a4_0x34a4e4(0x1dd)]?function(_0x5b9588,_0x33a9e9,_0x2e9be4,_0x4e36bd){const _0x4f6aa2=a4_0x34a4e4;if(_0x4e36bd===undefined)_0x4e36bd=_0x2e9be4;var _0x1bd673=Object[_0x4f6aa2(0x1fd)](_0x33a9e9,_0x2e9be4);(!_0x1bd673||(_0x4f6aa2(0x1f5)in _0x1bd673?!_0x33a9e9[_0x4f6aa2(0x1ec)]:_0x1bd673[_0x4f6aa2(0x1e1)]||_0x1bd673[_0x4f6aa2(0x1df)]))&&(_0x1bd673={'enumerable':!![],'get':function(){return _0x33a9e9[_0x2e9be4];}}),Object[_0x4f6aa2(0x1ce)](_0x5b9588,_0x4e36bd,_0x1bd673);}:function(_0x307e16,_0x44eed2,_0x168892,_0x314986){if(_0x314986===undefined)_0x314986=_0x168892;_0x307e16[_0x314986]=_0x44eed2[_0x168892];}),__setModuleDefault=this&&this[a4_0x34a4e4(0x1ef)]||(Object[a4_0x34a4e4(0x1dd)]?function(_0x426c57,_0x3d632a){const _0x40e870=a4_0x34a4e4;Object['defineProperty'](_0x426c57,_0x40e870(0x1e6),{'enumerable':!![],'value':_0x3d632a});}:function(_0x6c9c35,_0x76f674){const _0x193d73=a4_0x34a4e4;_0x6c9c35[_0x193d73(0x1e6)]=_0x76f674;}),__importStar=this&&this[a4_0x34a4e4(0x1f2)]||(function(){var _0x4def7f=function(_0x547980){const _0x4cdd57=a4_0x1cf7;return _0x4def7f=Object[_0x4cdd57(0x1d7)]||function(_0xa5211d){const _0x452ebf=_0x4cdd57;var _0x4f06f3=[];for(var _0xb3a0ff in _0xa5211d)if(Object['prototype'][_0x452ebf(0x1f4)][_0x452ebf(0x1da)](_0xa5211d,_0xb3a0ff))_0x4f06f3[_0x4f06f3[_0x452ebf(0x1eb)]]=_0xb3a0ff;return _0x4f06f3;},_0x4def7f(_0x547980);};return function(_0x544180){const _0x41628b=a4_0x1cf7;if(_0x544180&&_0x544180['__esModule'])return _0x544180;var _0x178d29={};if(_0x544180!=null){for(var _0x35ae5f=_0x4def7f(_0x544180),_0x4021ef=0x0;_0x4021ef<_0x35ae5f[_0x41628b(0x1eb)];_0x4021ef++)if(_0x35ae5f[_0x4021ef]!=='default')__createBinding(_0x178d29,_0x544180,_0x35ae5f[_0x4021ef]);}return __setModuleDefault(_0x178d29,_0x544180),_0x178d29;};}());Object[a4_0x34a4e4(0x1ce)](exports,a4_0x34a4e4(0x1ec),{'value':!![]}),exports['AuthController']=void 0x0;function a4_0x1cf7(_0x4fd58f,_0x48804d){const _0x38ea1a=a4_0x38ea();return a4_0x1cf7=function(_0x1cf755,_0x41e043){_0x1cf755=_0x1cf755-0x1ce;let _0x2ca7de=_0x38ea1a[_0x1cf755];return _0x2ca7de;},a4_0x1cf7(_0x4fd58f,_0x48804d);}function a4_0x38ea(){const _0x27af6b=['role','writable','333864XsEzUp','136faQVWm','exp','getStats','default','error','login','tokenBlacklistService','3CUjYdH','length','__esModule','1001945vduUXm','json','__setModuleDefault','../services/telegramBotService','telegramBotService','__importStar','User-Agent','hasOwnProperty','get','593620uUungB','1539575yxHDzm','then','connection','626887ttKAuJ','6iEmPcN','blacklistToken','getOwnPropertyDescriptor','defineProperty','unknown','2356290kkDZLc','token','authService','getBlacklistStats','shop','__createBinding','../services/tokenBlacklistService','getOwnPropertyNames','307138iXtHij','body','call','username','user','create','findUnique','configurable'];a4_0x38ea=function(){return _0x27af6b;};return a4_0x38ea();}const authService_1=require('../services/authService'),tokenBlacklistService_1=require(a4_0x34a4e4(0x1d6)),telegramBotService_1=require(a4_0x34a4e4(0x1f0));class AuthController{constructor(){const _0xe0c2c=a4_0x34a4e4;this[_0xe0c2c(0x1e8)]=async(_0xaa7378,_0x4e7b21,_0x389119)=>{const _0x5895f0=_0xe0c2c;try{const _0x4a8718=_0xaa7378[_0x5895f0(0x1d9)],_0xa7de65=_0xaa7378['ip']||_0xaa7378[_0x5895f0(0x1f9)]['remoteAddress']||_0x5895f0(0x1cf),_0x490455=_0xaa7378[_0x5895f0(0x1f5)](_0x5895f0(0x1f3))||_0x5895f0(0x1cf);let _0x53bb2c=![],_0x2956fe=null;try{const _0x2da75=await this[_0x5895f0(0x1d2)][_0x5895f0(0x1e8)](_0x4a8718);_0x53bb2c=!![],_0x2da75[_0x5895f0(0x1e0)]===_0x5895f0(0x1d4)&&_0x2da75[_0x5895f0(0x1dc)]?.['id']&&(_0x2956fe=_0x2da75['user']['id']),_0x2956fe&&await telegramBotService_1[_0x5895f0(0x1f1)]['sendLoginNotification'](_0x2956fe,{'username':_0x4a8718[_0x5895f0(0x1db)],'ipAddress':_0xa7de65,'userAgent':_0x490455,'timestamp':new Date(),'success':!![]}),_0x4e7b21[_0x5895f0(0x1ee)]({'success':!![],'result':_0x2da75});}catch(_0x50212b){try{const _0x3f1140=(await Promise['resolve']()[_0x5895f0(0x1f8)](()=>__importStar(require('../config/database'))))['default'],_0x3037b6=await _0x3f1140['shop'][_0x5895f0(0x1de)]({'where':{'username':_0x4a8718['username']},'select':{'id':!![]}});_0x3037b6&&await telegramBotService_1[_0x5895f0(0x1f1)]['sendLoginNotification'](_0x3037b6['id'],{'username':_0x4a8718[_0x5895f0(0x1db)],'ipAddress':_0xa7de65,'userAgent':_0x490455,'timestamp':new Date(),'success':![]});}catch(_0x38b14c){console[_0x5895f0(0x1e7)]('Failed\x20to\x20send\x20failed\x20login\x20notification:',_0x38b14c);}throw _0x50212b;}}catch(_0xc405f4){_0x389119(_0xc405f4);}},this['me']=async(_0x35c9f1,_0x5b3f09,_0x1747e4)=>{const _0x49f38d=_0xe0c2c;try{const _0x4af561=_0x35c9f1[_0x49f38d(0x1dc)];_0x5b3f09[_0x49f38d(0x1ee)]({'success':!![],'result':{'id':_0x4af561?.['id'],'username':_0x4af561?.['username'],'role':_0x4af561?.[_0x49f38d(0x1e0)]}});}catch(_0x26c20c){_0x1747e4(_0x26c20c);}},this['logout']=async(_0x1c1f16,_0x1ad195,_0x5a31a3)=>{const _0x3f32fb=_0xe0c2c;try{const _0x925cea=_0x1c1f16[_0x3f32fb(0x1d1)],_0x6ff434=_0x1c1f16[_0x3f32fb(0x1dc)];_0x925cea&&_0x6ff434?.[_0x3f32fb(0x1e4)]&&tokenBlacklistService_1[_0x3f32fb(0x1e9)][_0x3f32fb(0x1fc)](_0x925cea,_0x6ff434[_0x3f32fb(0x1e4)]),_0x1ad195[_0x3f32fb(0x1ee)]({'success':!![],'message':'Logged\x20out\x20successfully'});}catch(_0x38d9e9){_0x5a31a3(_0x38d9e9);}},this[_0xe0c2c(0x1d3)]=async(_0x16f7e2,_0x1e997c,_0x373b37)=>{const _0x108233=_0xe0c2c;try{const _0x2932ef=tokenBlacklistService_1[_0x108233(0x1e9)][_0x108233(0x1e5)]();_0x1e997c[_0x108233(0x1ee)]({'success':!![],'result':_0x2932ef});}catch(_0x553bd7){_0x373b37(_0x553bd7);}},this[_0xe0c2c(0x1d2)]=new authService_1['AuthService']();}}exports['AuthController']=AuthController;