'use strict';const a4_0x4c4d1b=a4_0x2d88;(function(_0x1a1c61,_0x244b65){const _0x36eadb=a4_0x2d88,_0x217d87=_0x1a1c61();while(!![]){try{const _0x49b423=-parseInt(_0x36eadb(0x18f))/0x1+parseInt(_0x36eadb(0x1b5))/0x2*(parseInt(_0x36eadb(0x1b6))/0x3)+-parseInt(_0x36eadb(0x1b8))/0x4+parseInt(_0x36eadb(0x1b4))/0x5*(-parseInt(_0x36eadb(0x1a1))/0x6)+-parseInt(_0x36eadb(0x1c0))/0x7*(parseInt(_0x36eadb(0x19b))/0x8)+parseInt(_0x36eadb(0x1bb))/0x9+parseInt(_0x36eadb(0x18e))/0xa*(parseInt(_0x36eadb(0x192))/0xb);if(_0x49b423===_0x244b65)break;else _0x217d87['push'](_0x217d87['shift']());}catch(_0x202626){_0x217d87['push'](_0x217d87['shift']());}}}(a4_0x267b,0xa3d86));function a4_0x267b(){const _0x2ba162=['../services/tokenBlacklistService','configurable','resolve','remoteAddress','117696gwcNve','Logged\x20out\x20successfully','username','default','getOwnPropertyNames','call','length','token','unknown','getStats','AuthService','__setModuleDefault','__esModule','getOwnPropertyDescriptor','connection','Failed\x20to\x20send\x20failed\x20login\x20notification:','exp','shop','__createBinding','175WNBIXP','1044748KlgZqZ','3fPVzyC','getBlacklistStats','1901080dhcRAD','defineProperty','../services/authService','5434821fVRqfp','body','../config/database','logout','hasOwnProperty','24647MJWptm','writable','user','login','authService','create','235540hoHOPD','354802OubNEk','role','__importStar','869ahBJVb','telegramBotService','json','findUnique','User-Agent','sendLoginNotification','then','blacklistToken','tokenBlacklistService','1816TToDuE','AuthController'];a4_0x267b=function(){return _0x2ba162;};return a4_0x267b();}var __createBinding=this&&this[a4_0x4c4d1b(0x1b3)]||(Object['create']?function(_0x21b7bd,_0x56dc67,_0x41e96d,_0x1a7b22){const _0x472711=a4_0x4c4d1b;if(_0x1a7b22===undefined)_0x1a7b22=_0x41e96d;var _0x4ebe5e=Object[_0x472711(0x1ae)](_0x56dc67,_0x41e96d);(!_0x4ebe5e||('get'in _0x4ebe5e?!_0x56dc67[_0x472711(0x1ad)]:_0x4ebe5e[_0x472711(0x1c1)]||_0x4ebe5e[_0x472711(0x19e)]))&&(_0x4ebe5e={'enumerable':!![],'get':function(){return _0x56dc67[_0x41e96d];}}),Object[_0x472711(0x1b9)](_0x21b7bd,_0x1a7b22,_0x4ebe5e);}:function(_0x1ffde9,_0x38e402,_0x5e9c1c,_0x43ac26){if(_0x43ac26===undefined)_0x43ac26=_0x5e9c1c;_0x1ffde9[_0x43ac26]=_0x38e402[_0x5e9c1c];}),__setModuleDefault=this&&this[a4_0x4c4d1b(0x1ac)]||(Object[a4_0x4c4d1b(0x18d)]?function(_0x356ef8,_0x1c909e){const _0x5de788=a4_0x4c4d1b;Object[_0x5de788(0x1b9)](_0x356ef8,'default',{'enumerable':!![],'value':_0x1c909e});}:function(_0x3dec8c,_0x5ed638){const _0x1616a8=a4_0x4c4d1b;_0x3dec8c[_0x1616a8(0x1a4)]=_0x5ed638;}),__importStar=this&&this[a4_0x4c4d1b(0x191)]||(function(){var _0x52d289=function(_0x4f50ec){const _0x5142b5=a4_0x2d88;return _0x52d289=Object[_0x5142b5(0x1a5)]||function(_0x1ee8c6){const _0x1bdd7d=_0x5142b5;var _0x244ecb=[];for(var _0x2e6f96 in _0x1ee8c6)if(Object['prototype'][_0x1bdd7d(0x1bf)][_0x1bdd7d(0x1a6)](_0x1ee8c6,_0x2e6f96))_0x244ecb[_0x244ecb[_0x1bdd7d(0x1a7)]]=_0x2e6f96;return _0x244ecb;},_0x52d289(_0x4f50ec);};return function(_0x12969f){const _0x18281f=a4_0x2d88;if(_0x12969f&&_0x12969f[_0x18281f(0x1ad)])return _0x12969f;var _0x417ea3={};if(_0x12969f!=null){for(var _0x26c0e8=_0x52d289(_0x12969f),_0x269b97=0x0;_0x269b97<_0x26c0e8[_0x18281f(0x1a7)];_0x269b97++)if(_0x26c0e8[_0x269b97]!==_0x18281f(0x1a4))__createBinding(_0x417ea3,_0x12969f,_0x26c0e8[_0x269b97]);}return __setModuleDefault(_0x417ea3,_0x12969f),_0x417ea3;};}());Object[a4_0x4c4d1b(0x1b9)](exports,a4_0x4c4d1b(0x1ad),{'value':!![]}),exports[a4_0x4c4d1b(0x19c)]=void 0x0;function a4_0x2d88(_0x2d9075,_0x3d6e97){const _0x267bc8=a4_0x267b();return a4_0x2d88=function(_0x2d886e,_0x1da5e7){_0x2d886e=_0x2d886e-0x18a;let _0x4896d3=_0x267bc8[_0x2d886e];return _0x4896d3;},a4_0x2d88(_0x2d9075,_0x3d6e97);}const authService_1=require(a4_0x4c4d1b(0x1ba)),tokenBlacklistService_1=require(a4_0x4c4d1b(0x19d)),telegramBotService_1=require('../services/telegramBotService');class AuthController{constructor(){const _0x363ff7=a4_0x4c4d1b;this[_0x363ff7(0x18b)]=async(_0x1ca713,_0xfbd8b3,_0x4c1ca0)=>{const _0x3856f4=_0x363ff7;try{const _0x22c01b=_0x1ca713[_0x3856f4(0x1bc)],_0x54e651=_0x1ca713['ip']||_0x1ca713[_0x3856f4(0x1af)][_0x3856f4(0x1a0)]||'unknown',_0x2aacf0=_0x1ca713['get'](_0x3856f4(0x196))||_0x3856f4(0x1a9);let _0x721c6b=![],_0x169911=null;try{const _0x13303f=await this[_0x3856f4(0x18c)][_0x3856f4(0x18b)](_0x22c01b);_0x721c6b=!![],_0x13303f[_0x3856f4(0x190)]===_0x3856f4(0x1b2)&&_0x13303f[_0x3856f4(0x18a)]?.['id']&&(_0x169911=_0x13303f[_0x3856f4(0x18a)]['id']),_0x169911&&await telegramBotService_1[_0x3856f4(0x193)][_0x3856f4(0x197)](_0x169911,{'username':_0x22c01b[_0x3856f4(0x1a3)],'ipAddress':_0x54e651,'userAgent':_0x2aacf0,'timestamp':new Date(),'success':!![]}),_0xfbd8b3[_0x3856f4(0x194)]({'success':!![],'result':_0x13303f});}catch(_0x47d10d){try{const _0x20c3ce=(await Promise[_0x3856f4(0x19f)]()[_0x3856f4(0x198)](()=>__importStar(require(_0x3856f4(0x1bd)))))[_0x3856f4(0x1a4)],_0x36dd4e=await _0x20c3ce[_0x3856f4(0x1b2)][_0x3856f4(0x195)]({'where':{'username':_0x22c01b[_0x3856f4(0x1a3)]},'select':{'id':!![]}});_0x36dd4e&&await telegramBotService_1['telegramBotService'][_0x3856f4(0x197)](_0x36dd4e['id'],{'username':_0x22c01b['username'],'ipAddress':_0x54e651,'userAgent':_0x2aacf0,'timestamp':new Date(),'success':![]});}catch(_0x1a1446){console['error'](_0x3856f4(0x1b0),_0x1a1446);}throw _0x47d10d;}}catch(_0x213bd0){_0x4c1ca0(_0x213bd0);}},this['me']=async(_0x113fd6,_0x46d842,_0x3c1174)=>{const _0x453b44=_0x363ff7;try{const _0x413b54=_0x113fd6['user'];_0x46d842[_0x453b44(0x194)]({'success':!![],'result':{'id':_0x413b54?.['id'],'username':_0x413b54?.[_0x453b44(0x1a3)],'role':_0x413b54?.['role']}});}catch(_0x8cf4b4){_0x3c1174(_0x8cf4b4);}},this[_0x363ff7(0x1be)]=async(_0x199a33,_0x22df85,_0x22ccda)=>{const _0x48032e=_0x363ff7;try{const _0x383742=_0x199a33[_0x48032e(0x1a8)],_0x38f9a8=_0x199a33[_0x48032e(0x18a)];_0x383742&&_0x38f9a8?.[_0x48032e(0x1b1)]&&tokenBlacklistService_1[_0x48032e(0x19a)][_0x48032e(0x199)](_0x383742,_0x38f9a8[_0x48032e(0x1b1)]),_0x22df85[_0x48032e(0x194)]({'success':!![],'message':_0x48032e(0x1a2)});}catch(_0x122339){_0x22ccda(_0x122339);}},this[_0x363ff7(0x1b7)]=async(_0x205950,_0x263355,_0x9045a2)=>{const _0x32dab6=_0x363ff7;try{const _0x3cfe88=tokenBlacklistService_1[_0x32dab6(0x19a)][_0x32dab6(0x1aa)]();_0x263355[_0x32dab6(0x194)]({'success':!![],'result':_0x3cfe88});}catch(_0x507911){_0x9045a2(_0x507911);}},this[_0x363ff7(0x18c)]=new authService_1[(_0x363ff7(0x1ab))]();}}exports[a4_0x4c4d1b(0x19c)]=AuthController;