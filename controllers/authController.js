'use strict';const a4_0x24bbe2=a4_0x1160;(function(_0x257977,_0x546a77){const _0x426435=a4_0x1160,_0x33e72e=_0x257977();while(!![]){try{const _0x5e19ba=-parseInt(_0x426435(0x19d))/0x1*(parseInt(_0x426435(0x1ba))/0x2)+-parseInt(_0x426435(0x1ad))/0x3*(-parseInt(_0x426435(0x1af))/0x4)+-parseInt(_0x426435(0x1a5))/0x5*(parseInt(_0x426435(0x1a2))/0x6)+parseInt(_0x426435(0x1a1))/0x7+-parseInt(_0x426435(0x18d))/0x8+parseInt(_0x426435(0x1a8))/0x9+parseInt(_0x426435(0x1b6))/0xa;if(_0x5e19ba===_0x546a77)break;else _0x33e72e['push'](_0x33e72e['shift']());}catch(_0xb8228a){_0x33e72e['push'](_0x33e72e['shift']());}}}(a4_0x46a4,0xaf437));var __createBinding=this&&this[a4_0x24bbe2(0x1bb)]||(Object['create']?function(_0x333899,_0x40d9dc,_0x26c31d,_0x10dec7){const _0x5a4701=a4_0x24bbe2;if(_0x10dec7===undefined)_0x10dec7=_0x26c31d;var _0x4a2084=Object[_0x5a4701(0x1b4)](_0x40d9dc,_0x26c31d);(!_0x4a2084||('get'in _0x4a2084?!_0x40d9dc[_0x5a4701(0x198)]:_0x4a2084[_0x5a4701(0x196)]||_0x4a2084[_0x5a4701(0x1b1)]))&&(_0x4a2084={'enumerable':!![],'get':function(){return _0x40d9dc[_0x26c31d];}}),Object[_0x5a4701(0x1a0)](_0x333899,_0x10dec7,_0x4a2084);}:function(_0x8aa9c5,_0x4781e7,_0x2dfb50,_0x1daa63){if(_0x1daa63===undefined)_0x1daa63=_0x2dfb50;_0x8aa9c5[_0x1daa63]=_0x4781e7[_0x2dfb50];}),__setModuleDefault=this&&this[a4_0x24bbe2(0x1be)]||(Object['create']?function(_0x3b6053,_0x41ea0b){const _0x5053ed=a4_0x24bbe2;Object['defineProperty'](_0x3b6053,_0x5053ed(0x1b0),{'enumerable':!![],'value':_0x41ea0b});}:function(_0x2334e2,_0x2e68f4){const _0x30a775=a4_0x24bbe2;_0x2334e2[_0x30a775(0x1b0)]=_0x2e68f4;}),__importStar=this&&this[a4_0x24bbe2(0x1b8)]||(function(){var _0xbb2d7=function(_0x295351){const _0x1c4603=a4_0x1160;return _0xbb2d7=Object[_0x1c4603(0x1c1)]||function(_0x4e5e5a){const _0x1bf977=_0x1c4603;var _0x33f312=[];for(var _0x3431f2 in _0x4e5e5a)if(Object[_0x1bf977(0x1a4)][_0x1bf977(0x18f)][_0x1bf977(0x192)](_0x4e5e5a,_0x3431f2))_0x33f312[_0x33f312[_0x1bf977(0x1c0)]]=_0x3431f2;return _0x33f312;},_0xbb2d7(_0x295351);};return function(_0x518fc6){const _0x26d327=a4_0x1160;if(_0x518fc6&&_0x518fc6[_0x26d327(0x198)])return _0x518fc6;var _0xf3422b={};if(_0x518fc6!=null){for(var _0x2fcbbd=_0xbb2d7(_0x518fc6),_0x1aabd7=0x0;_0x1aabd7<_0x2fcbbd[_0x26d327(0x1c0)];_0x1aabd7++)if(_0x2fcbbd[_0x1aabd7]!==_0x26d327(0x1b0))__createBinding(_0xf3422b,_0x518fc6,_0x2fcbbd[_0x1aabd7]);}return __setModuleDefault(_0xf3422b,_0x518fc6),_0xf3422b;};}());Object[a4_0x24bbe2(0x1a0)](exports,a4_0x24bbe2(0x198),{'value':!![]}),exports[a4_0x24bbe2(0x19f)]=void 0x0;const authService_1=require(a4_0x24bbe2(0x1b5)),tokenBlacklistService_1=require(a4_0x24bbe2(0x1bf)),telegramBotService_1=require(a4_0x24bbe2(0x19c));function a4_0x46a4(){const _0x46738e=['role','AuthService','../services/telegramBotService','3149cEYomc','connection','AuthController','defineProperty','5166504zabvEb','6mPNUZX','shop','prototype','4317670USSbvr','json','blacklistToken','8352189KUxUIy','exp','body','user','token','2375481ZbQtDk','authService','4KmzkGi','default','configurable','resolve','User-Agent','getOwnPropertyDescriptor','../services/authService','8967040KoXihL','sendLoginNotification','__importStar','logout','622bGJMCn','__createBinding','tokenBlacklistService','telegramBotService','__setModuleDefault','../services/tokenBlacklistService','length','getOwnPropertyNames','6350976wqqkcc','getStats','hasOwnProperty','error','username','call','get','login','Logged\x20out\x20successfully','writable','getBlacklistStats','__esModule','Failed\x20to\x20send\x20failed\x20login\x20notification:'];a4_0x46a4=function(){return _0x46738e;};return a4_0x46a4();}class AuthController{constructor(){const _0x846d8b=a4_0x24bbe2;this[_0x846d8b(0x194)]=async(_0x10adb6,_0x98ca69,_0x1e035d)=>{const _0x31bf4b=_0x846d8b;try{const _0x502f17=_0x10adb6[_0x31bf4b(0x1aa)],_0x114ced=_0x10adb6['ip']||_0x10adb6[_0x31bf4b(0x19e)]['remoteAddress']||'unknown',_0x3c4581=_0x10adb6[_0x31bf4b(0x193)](_0x31bf4b(0x1b3))||'unknown';let _0x53347d=![],_0x5595dc=null;try{const _0x5752ae=await this[_0x31bf4b(0x1ae)][_0x31bf4b(0x194)](_0x502f17);_0x53347d=!![],_0x5752ae[_0x31bf4b(0x19a)]==='shop'&&_0x5752ae[_0x31bf4b(0x1ab)]?.['id']&&(_0x5595dc=_0x5752ae[_0x31bf4b(0x1ab)]['id']),_0x5595dc&&await telegramBotService_1['telegramBotService'][_0x31bf4b(0x1b7)](_0x5595dc,{'username':_0x502f17['username'],'ipAddress':_0x114ced,'userAgent':_0x3c4581,'timestamp':new Date(),'success':!![]}),_0x98ca69['json']({'success':!![],'result':_0x5752ae});}catch(_0x26460b){try{const _0x503f8b=(await Promise[_0x31bf4b(0x1b2)]()['then'](()=>__importStar(require('../config/database'))))['default'],_0x21dbf1=await _0x503f8b[_0x31bf4b(0x1a3)]['findUnique']({'where':{'username':_0x502f17[_0x31bf4b(0x191)]},'select':{'id':!![]}});_0x21dbf1&&await telegramBotService_1[_0x31bf4b(0x1bd)][_0x31bf4b(0x1b7)](_0x21dbf1['id'],{'username':_0x502f17['username'],'ipAddress':_0x114ced,'userAgent':_0x3c4581,'timestamp':new Date(),'success':![]});}catch(_0x248fe4){console[_0x31bf4b(0x190)](_0x31bf4b(0x199),_0x248fe4);}throw _0x26460b;}}catch(_0x261adf){_0x1e035d(_0x261adf);}},this['me']=async(_0x516276,_0x7db599,_0x3dafc1)=>{const _0x5e0a5f=_0x846d8b;try{const _0x48d449=_0x516276[_0x5e0a5f(0x1ab)];_0x7db599['json']({'success':!![],'result':{'id':_0x48d449?.['id'],'username':_0x48d449?.[_0x5e0a5f(0x191)],'role':_0x48d449?.['role']}});}catch(_0x5d881e){_0x3dafc1(_0x5d881e);}},this[_0x846d8b(0x1b9)]=async(_0x2b0491,_0xd38eb7,_0x3ce647)=>{const _0x208221=_0x846d8b;try{const _0x3c0f97=_0x2b0491[_0x208221(0x1ac)],_0x693312=_0x2b0491['user'];_0x3c0f97&&_0x693312?.[_0x208221(0x1a9)]&&tokenBlacklistService_1['tokenBlacklistService'][_0x208221(0x1a7)](_0x3c0f97,_0x693312['exp']),_0xd38eb7[_0x208221(0x1a6)]({'success':!![],'message':_0x208221(0x195)});}catch(_0x3738f5){_0x3ce647(_0x3738f5);}},this[_0x846d8b(0x197)]=async(_0x5c1965,_0x28fe69,_0x6b5d0a)=>{const _0x1d34b6=_0x846d8b;try{const _0x9744b3=tokenBlacklistService_1[_0x1d34b6(0x1bc)][_0x1d34b6(0x18e)]();_0x28fe69[_0x1d34b6(0x1a6)]({'success':!![],'result':_0x9744b3});}catch(_0x3d255c){_0x6b5d0a(_0x3d255c);}},this['authService']=new authService_1[(_0x846d8b(0x19b))]();}}function a4_0x1160(_0x59a2a4,_0x2e911a){const _0x46a402=a4_0x46a4();return a4_0x1160=function(_0x11602c,_0x5d13ad){_0x11602c=_0x11602c-0x18d;let _0x234aec=_0x46a402[_0x11602c];return _0x234aec;},a4_0x1160(_0x59a2a4,_0x2e911a);}exports['AuthController']=AuthController;