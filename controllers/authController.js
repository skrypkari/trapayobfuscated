'use strict';const a4_0x254389=a4_0x1a9b;(function(_0x2dac5f,_0x236cc7){const _0x54fff2=a4_0x1a9b,_0x46ceac=_0x2dac5f();while(!![]){try{const _0x48fc34=-parseInt(_0x54fff2(0xe0))/0x1+-parseInt(_0x54fff2(0xec))/0x2+-parseInt(_0x54fff2(0xf2))/0x3*(-parseInt(_0x54fff2(0xe9))/0x4)+-parseInt(_0x54fff2(0xf5))/0x5*(parseInt(_0x54fff2(0xf7))/0x6)+parseInt(_0x54fff2(0xd9))/0x7+-parseInt(_0x54fff2(0xe2))/0x8*(-parseInt(_0x54fff2(0xd4))/0x9)+-parseInt(_0x54fff2(0xf6))/0xa*(-parseInt(_0x54fff2(0xc2))/0xb);if(_0x48fc34===_0x236cc7)break;else _0x46ceac['push'](_0x46ceac['shift']());}catch(_0x1aeda6){_0x46ceac['push'](_0x46ceac['shift']());}}}(a4_0x29bb,0x2e241));var __createBinding=this&&this[a4_0x254389(0xdb)]||(Object[a4_0x254389(0xf1)]?function(_0x4f511b,_0xaba6a8,_0xb21005,_0xb76e2b){const _0x329bd8=a4_0x254389;if(_0xb76e2b===undefined)_0xb76e2b=_0xb21005;var _0x294527=Object[_0x329bd8(0xce)](_0xaba6a8,_0xb21005);(!_0x294527||(_0x329bd8(0xcc)in _0x294527?!_0xaba6a8['__esModule']:_0x294527[_0x329bd8(0xe8)]||_0x294527[_0x329bd8(0xf3)]))&&(_0x294527={'enumerable':!![],'get':function(){return _0xaba6a8[_0xb21005];}}),Object[_0x329bd8(0xe3)](_0x4f511b,_0xb76e2b,_0x294527);}:function(_0x4a7c6a,_0x2d3dda,_0x5ea86b,_0x38aff0){if(_0x38aff0===undefined)_0x38aff0=_0x5ea86b;_0x4a7c6a[_0x38aff0]=_0x2d3dda[_0x5ea86b];}),__setModuleDefault=this&&this[a4_0x254389(0xe4)]||(Object[a4_0x254389(0xf1)]?function(_0x5a0866,_0x327714){Object['defineProperty'](_0x5a0866,'default',{'enumerable':!![],'value':_0x327714});}:function(_0x57d82a,_0x54b7fe){_0x57d82a['default']=_0x54b7fe;}),__importStar=this&&this[a4_0x254389(0xdc)]||(function(){var _0xc1142b=function(_0x145d66){const _0x2bee27=a4_0x1a9b;return _0xc1142b=Object[_0x2bee27(0xc4)]||function(_0x32ba7a){const _0x59cc03=_0x2bee27;var _0x1c4eba=[];for(var _0x166cd6 in _0x32ba7a)if(Object[_0x59cc03(0xc5)]['hasOwnProperty'][_0x59cc03(0xca)](_0x32ba7a,_0x166cd6))_0x1c4eba[_0x1c4eba[_0x59cc03(0xdd)]]=_0x166cd6;return _0x1c4eba;},_0xc1142b(_0x145d66);};return function(_0x247e49){const _0x462607=a4_0x1a9b;if(_0x247e49&&_0x247e49[_0x462607(0xe5)])return _0x247e49;var _0x52dddc={};if(_0x247e49!=null){for(var _0x16149d=_0xc1142b(_0x247e49),_0x3a6ceb=0x0;_0x3a6ceb<_0x16149d[_0x462607(0xdd)];_0x3a6ceb++)if(_0x16149d[_0x3a6ceb]!==_0x462607(0xed))__createBinding(_0x52dddc,_0x247e49,_0x16149d[_0x3a6ceb]);}return __setModuleDefault(_0x52dddc,_0x247e49),_0x52dddc;};}());Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['AuthController']=void 0x0;function a4_0x29bb(){const _0x31a118=['defineProperty','__setModuleDefault','__esModule','../services/telegramBotService','logout','writable','2056GzeIxl','findUnique','tokenBlacklistService','119016FQYoBa','default','../services/authService','blacklistToken','shop','create','393RmRnmb','configurable','unknown','547700OfVICl','2740vssqmz','6wdihPr','resolve','error','24112PwxiRK','AuthService','getOwnPropertyNames','prototype','connection','role','json','login','call','user','get','remoteAddress','getOwnPropertyDescriptor','../config/database','Failed\x20to\x20send\x20failed\x20login\x20notification:','then','authService','telegramBotService','9TShadr','AuthController','getBlacklistStats','sendLoginNotification','token','140462sXWkXW','exp','__createBinding','__importStar','length','username','getStats','330530uOtCWJ','body','4504VNzpco'];a4_0x29bb=function(){return _0x31a118;};return a4_0x29bb();}function a4_0x1a9b(_0x42dc72,_0x5e8e29){const _0x29bb39=a4_0x29bb();return a4_0x1a9b=function(_0x1a9b5d,_0x5e19d0){_0x1a9b5d=_0x1a9b5d-0xc1;let _0xdb5ee0=_0x29bb39[_0x1a9b5d];return _0xdb5ee0;},a4_0x1a9b(_0x42dc72,_0x5e8e29);}const authService_1=require(a4_0x254389(0xee)),tokenBlacklistService_1=require('../services/tokenBlacklistService'),telegramBotService_1=require(a4_0x254389(0xe6));class AuthController{constructor(){const _0xd636c4=a4_0x254389;this['login']=async(_0x2fe6a3,_0x369793,_0x228999)=>{const _0x8e39b8=a4_0x1a9b;try{const _0x199584=_0x2fe6a3[_0x8e39b8(0xe1)],_0x122462=_0x2fe6a3['ip']||_0x2fe6a3[_0x8e39b8(0xc6)][_0x8e39b8(0xcd)]||'unknown',_0x190b39=_0x2fe6a3[_0x8e39b8(0xcc)]('User-Agent')||_0x8e39b8(0xf4);let _0x1911ca=![],_0xd93c88=null;try{const _0x308d30=await this[_0x8e39b8(0xd2)][_0x8e39b8(0xc9)](_0x199584);_0x1911ca=!![],_0x308d30[_0x8e39b8(0xc7)]===_0x8e39b8(0xf0)&&_0x308d30[_0x8e39b8(0xcb)]?.['id']&&(_0xd93c88=_0x308d30[_0x8e39b8(0xcb)]['id']),_0xd93c88&&await telegramBotService_1[_0x8e39b8(0xd3)][_0x8e39b8(0xd7)](_0xd93c88,{'username':_0x199584[_0x8e39b8(0xde)],'ipAddress':_0x122462,'userAgent':_0x190b39,'timestamp':new Date(),'success':!![]}),_0x369793['json']({'success':!![],'result':_0x308d30});}catch(_0x5ea2be){try{const _0x56ce12=(await Promise[_0x8e39b8(0xf8)]()[_0x8e39b8(0xd1)](()=>__importStar(require(_0x8e39b8(0xcf)))))[_0x8e39b8(0xed)],_0x59793d=await _0x56ce12[_0x8e39b8(0xf0)][_0x8e39b8(0xea)]({'where':{'username':_0x199584[_0x8e39b8(0xde)]},'select':{'id':!![]}});_0x59793d&&await telegramBotService_1[_0x8e39b8(0xd3)][_0x8e39b8(0xd7)](_0x59793d['id'],{'username':_0x199584[_0x8e39b8(0xde)],'ipAddress':_0x122462,'userAgent':_0x190b39,'timestamp':new Date(),'success':![]});}catch(_0x34e630){console[_0x8e39b8(0xc1)](_0x8e39b8(0xd0),_0x34e630);}throw _0x5ea2be;}}catch(_0x1fe9a5){_0x228999(_0x1fe9a5);}},this['me']=async(_0x5a6ce2,_0x141cbe,_0x425c3a)=>{const _0x101b04=a4_0x1a9b;try{const _0x329fad=_0x5a6ce2[_0x101b04(0xcb)];_0x141cbe[_0x101b04(0xc8)]({'success':!![],'result':{'id':_0x329fad?.['id'],'username':_0x329fad?.[_0x101b04(0xde)],'role':_0x329fad?.[_0x101b04(0xc7)]}});}catch(_0x4d95e8){_0x425c3a(_0x4d95e8);}},this[_0xd636c4(0xe7)]=async(_0x575896,_0x4e1b61,_0x413533)=>{const _0x27845c=_0xd636c4;try{const _0x19a1a2=_0x575896[_0x27845c(0xd8)],_0x56c963=_0x575896['user'];_0x19a1a2&&_0x56c963?.[_0x27845c(0xda)]&&tokenBlacklistService_1[_0x27845c(0xeb)][_0x27845c(0xef)](_0x19a1a2,_0x56c963['exp']),_0x4e1b61['json']({'success':!![],'message':'Logged\x20out\x20successfully'});}catch(_0x2153b1){_0x413533(_0x2153b1);}},this[_0xd636c4(0xd6)]=async(_0x1663ad,_0x5e7e32,_0x4bbc52)=>{const _0x429cb6=_0xd636c4;try{const _0x493fe9=tokenBlacklistService_1['tokenBlacklistService'][_0x429cb6(0xdf)]();_0x5e7e32[_0x429cb6(0xc8)]({'success':!![],'result':_0x493fe9});}catch(_0x5b27ee){_0x4bbc52(_0x5b27ee);}},this[_0xd636c4(0xd2)]=new authService_1[(_0xd636c4(0xc3))]();}}exports[a4_0x254389(0xd5)]=AuthController;