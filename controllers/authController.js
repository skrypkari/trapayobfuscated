'use strict';const a4_0x1b27ce=a4_0x3fd0;(function(_0x374e82,_0x2e5ecd){const _0x56bb4f=a4_0x3fd0,_0x150e84=_0x374e82();while(!![]){try{const _0x32fc78=-parseInt(_0x56bb4f(0x1a8))/0x1+parseInt(_0x56bb4f(0x191))/0x2+-parseInt(_0x56bb4f(0x17b))/0x3+parseInt(_0x56bb4f(0x19d))/0x4*(-parseInt(_0x56bb4f(0x19a))/0x5)+parseInt(_0x56bb4f(0x194))/0x6+parseInt(_0x56bb4f(0x19b))/0x7+-parseInt(_0x56bb4f(0x18c))/0x8*(-parseInt(_0x56bb4f(0x1a0))/0x9);if(_0x32fc78===_0x2e5ecd)break;else _0x150e84['push'](_0x150e84['shift']());}catch(_0x57d0a9){_0x150e84['push'](_0x150e84['shift']());}}}(a4_0xe089,0x5dcf2));function a4_0xe089(){const _0x216e58=['1388575mGAoUJ','4552044cURqih','length','4YDkiiI','shop','../config/database','750186cxgKOq','hasOwnProperty','body','get','sendLoginNotification','json','Failed\x20to\x20send\x20failed\x20login\x20notification:','getStats','703899HWvojo','User-Agent','__importStar','getBlacklistStats','tokenBlacklistService','user','2128275ngBJpa','__setModuleDefault','exp','AuthController','__esModule','authService','create','telegramBotService','connection','username','error','default','getOwnPropertyDescriptor','../services/authService','login','AuthService','role','88uMobdY','unknown','resolve','../services/tokenBlacklistService','configurable','467976bYSlNb','call','then','1644642dlnrLR','__createBinding','writable','getOwnPropertyNames','blacklistToken','defineProperty'];a4_0xe089=function(){return _0x216e58;};return a4_0xe089();}var __createBinding=this&&this[a4_0x1b27ce(0x195)]||(Object[a4_0x1b27ce(0x181)]?function(_0x10d7d6,_0x50593e,_0x44e400,_0x15b9b6){const _0x3dc995=a4_0x1b27ce;if(_0x15b9b6===undefined)_0x15b9b6=_0x44e400;var _0x3f45cc=Object[_0x3dc995(0x187)](_0x50593e,_0x44e400);(!_0x3f45cc||('get'in _0x3f45cc?!_0x50593e['__esModule']:_0x3f45cc[_0x3dc995(0x196)]||_0x3f45cc[_0x3dc995(0x190)]))&&(_0x3f45cc={'enumerable':!![],'get':function(){return _0x50593e[_0x44e400];}}),Object['defineProperty'](_0x10d7d6,_0x15b9b6,_0x3f45cc);}:function(_0x364880,_0x326179,_0x5d0b76,_0xc05e61){if(_0xc05e61===undefined)_0xc05e61=_0x5d0b76;_0x364880[_0xc05e61]=_0x326179[_0x5d0b76];}),__setModuleDefault=this&&this[a4_0x1b27ce(0x17c)]||(Object[a4_0x1b27ce(0x181)]?function(_0x331e78,_0x4dc268){Object['defineProperty'](_0x331e78,'default',{'enumerable':!![],'value':_0x4dc268});}:function(_0x2d6299,_0x387b53){const _0x1b1c4f=a4_0x1b27ce;_0x2d6299[_0x1b1c4f(0x186)]=_0x387b53;}),__importStar=this&&this[a4_0x1b27ce(0x1aa)]||(function(){var _0x513bcf=function(_0x151d23){const _0x5cd115=a4_0x3fd0;return _0x513bcf=Object[_0x5cd115(0x197)]||function(_0x2aa6b4){const _0x287eae=_0x5cd115;var _0x5f22a4=[];for(var _0x55e35a in _0x2aa6b4)if(Object['prototype'][_0x287eae(0x1a1)][_0x287eae(0x192)](_0x2aa6b4,_0x55e35a))_0x5f22a4[_0x5f22a4[_0x287eae(0x19c)]]=_0x55e35a;return _0x5f22a4;},_0x513bcf(_0x151d23);};return function(_0x504bf5){const _0x179490=a4_0x3fd0;if(_0x504bf5&&_0x504bf5[_0x179490(0x17f)])return _0x504bf5;var _0x349fc8={};if(_0x504bf5!=null){for(var _0x24817c=_0x513bcf(_0x504bf5),_0x3e1ab9=0x0;_0x3e1ab9<_0x24817c[_0x179490(0x19c)];_0x3e1ab9++)if(_0x24817c[_0x3e1ab9]!=='default')__createBinding(_0x349fc8,_0x504bf5,_0x24817c[_0x3e1ab9]);}return __setModuleDefault(_0x349fc8,_0x504bf5),_0x349fc8;};}());Object[a4_0x1b27ce(0x199)](exports,a4_0x1b27ce(0x17f),{'value':!![]}),exports[a4_0x1b27ce(0x17e)]=void 0x0;const authService_1=require(a4_0x1b27ce(0x188)),tokenBlacklistService_1=require(a4_0x1b27ce(0x18f)),telegramBotService_1=require('../services/telegramBotService');class AuthController{constructor(){const _0x21dc9=a4_0x1b27ce;this['login']=async(_0x38d616,_0xf4f2a8,_0x1d5a81)=>{const _0x39e186=a4_0x3fd0;try{const _0x2a546d=_0x38d616[_0x39e186(0x1a2)],_0x3e8f15=_0x38d616['ip']||_0x38d616[_0x39e186(0x183)]['remoteAddress']||_0x39e186(0x18d),_0x1c65cd=_0x38d616[_0x39e186(0x1a3)](_0x39e186(0x1a9))||_0x39e186(0x18d);let _0x2158f8=![],_0x497628=null;try{const _0x4cfe63=await this[_0x39e186(0x180)][_0x39e186(0x189)](_0x2a546d);_0x2158f8=!![],_0x4cfe63['role']===_0x39e186(0x19e)&&_0x4cfe63['user']?.['id']&&(_0x497628=_0x4cfe63[_0x39e186(0x17a)]['id']),_0x497628&&await telegramBotService_1[_0x39e186(0x182)][_0x39e186(0x1a4)](_0x497628,{'username':_0x2a546d[_0x39e186(0x184)],'ipAddress':_0x3e8f15,'userAgent':_0x1c65cd,'timestamp':new Date(),'success':!![]}),_0xf4f2a8[_0x39e186(0x1a5)]({'success':!![],'result':_0x4cfe63});}catch(_0x12c46e){try{const _0x31ad31=(await Promise[_0x39e186(0x18e)]()[_0x39e186(0x193)](()=>__importStar(require(_0x39e186(0x19f)))))[_0x39e186(0x186)],_0x17ff81=await _0x31ad31[_0x39e186(0x19e)]['findUnique']({'where':{'username':_0x2a546d[_0x39e186(0x184)]},'select':{'id':!![]}});_0x17ff81&&await telegramBotService_1['telegramBotService'][_0x39e186(0x1a4)](_0x17ff81['id'],{'username':_0x2a546d[_0x39e186(0x184)],'ipAddress':_0x3e8f15,'userAgent':_0x1c65cd,'timestamp':new Date(),'success':![]});}catch(_0x3c0e99){console[_0x39e186(0x185)](_0x39e186(0x1a6),_0x3c0e99);}throw _0x12c46e;}}catch(_0x100d2c){_0x1d5a81(_0x100d2c);}},this['me']=async(_0xdc5092,_0x2d0e73,_0xaea857)=>{const _0x40d58e=a4_0x3fd0;try{const _0x55375c=_0xdc5092[_0x40d58e(0x17a)];_0x2d0e73[_0x40d58e(0x1a5)]({'success':!![],'result':{'id':_0x55375c?.['id'],'username':_0x55375c?.['username'],'role':_0x55375c?.[_0x40d58e(0x18b)]}});}catch(_0x954166){_0xaea857(_0x954166);}},this['logout']=async(_0x410e0c,_0x574be7,_0x290e73)=>{const _0x555583=a4_0x3fd0;try{const _0x7f1e85=_0x410e0c['token'],_0x4d887c=_0x410e0c[_0x555583(0x17a)];_0x7f1e85&&_0x4d887c?.['exp']&&tokenBlacklistService_1[_0x555583(0x1ac)][_0x555583(0x198)](_0x7f1e85,_0x4d887c[_0x555583(0x17d)]),_0x574be7[_0x555583(0x1a5)]({'success':!![],'message':'Logged\x20out\x20successfully'});}catch(_0x50059f){_0x290e73(_0x50059f);}},this[_0x21dc9(0x1ab)]=async(_0x3efe6f,_0x261886,_0x2840bd)=>{const _0x264aba=_0x21dc9;try{const _0x3b813d=tokenBlacklistService_1[_0x264aba(0x1ac)][_0x264aba(0x1a7)]();_0x261886[_0x264aba(0x1a5)]({'success':!![],'result':_0x3b813d});}catch(_0x4d386a){_0x2840bd(_0x4d386a);}},this[_0x21dc9(0x180)]=new authService_1[(_0x21dc9(0x18a))]();}}function a4_0x3fd0(_0x2b9528,_0x3723d2){const _0xe08933=a4_0xe089();return a4_0x3fd0=function(_0x3fd0e3,_0x1977d1){_0x3fd0e3=_0x3fd0e3-0x17a;let _0x59fba4=_0xe08933[_0x3fd0e3];return _0x59fba4;},a4_0x3fd0(_0x2b9528,_0x3723d2);}exports[a4_0x1b27ce(0x17e)]=AuthController;