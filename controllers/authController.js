'use strict';const a4_0xb516aa=a4_0x3ae4;(function(_0x3afe84,_0x12c97c){const _0x4d7548=a4_0x3ae4,_0x18b107=_0x3afe84();while(!![]){try{const _0x5bd134=parseInt(_0x4d7548(0x13b))/0x1+parseInt(_0x4d7548(0x149))/0x2*(parseInt(_0x4d7548(0x145))/0x3)+parseInt(_0x4d7548(0x14a))/0x4*(-parseInt(_0x4d7548(0x151))/0x5)+parseInt(_0x4d7548(0x156))/0x6*(parseInt(_0x4d7548(0x14d))/0x7)+-parseInt(_0x4d7548(0x154))/0x8*(parseInt(_0x4d7548(0x15c))/0x9)+-parseInt(_0x4d7548(0x157))/0xa*(parseInt(_0x4d7548(0x13e))/0xb)+parseInt(_0x4d7548(0x13c))/0xc*(parseInt(_0x4d7548(0x13d))/0xd);if(_0x5bd134===_0x12c97c)break;else _0x18b107['push'](_0x18b107['shift']());}catch(_0x571e02){_0x18b107['push'](_0x18b107['shift']());}}}(a4_0x1241,0xea980));var __createBinding=this&&this[a4_0xb516aa(0x150)]||(Object['create']?function(_0x5b980e,_0x4d2223,_0x304582,_0x29e8cd){const _0x3cd58e=a4_0xb516aa;if(_0x29e8cd===undefined)_0x29e8cd=_0x304582;var _0x1a1aad=Object[_0x3cd58e(0x142)](_0x4d2223,_0x304582);(!_0x1a1aad||(_0x3cd58e(0x14c)in _0x1a1aad?!_0x4d2223['__esModule']:_0x1a1aad[_0x3cd58e(0x161)]||_0x1a1aad[_0x3cd58e(0x132)]))&&(_0x1a1aad={'enumerable':!![],'get':function(){return _0x4d2223[_0x304582];}}),Object[_0x3cd58e(0x14e)](_0x5b980e,_0x29e8cd,_0x1a1aad);}:function(_0x3849a2,_0x5c6458,_0x33df71,_0x343465){if(_0x343465===undefined)_0x343465=_0x33df71;_0x3849a2[_0x343465]=_0x5c6458[_0x33df71];}),__setModuleDefault=this&&this[a4_0xb516aa(0x14b)]||(Object['create']?function(_0x515a7e,_0x3d589d){const _0x5c0a92=a4_0xb516aa;Object[_0x5c0a92(0x14e)](_0x515a7e,_0x5c0a92(0x131),{'enumerable':!![],'value':_0x3d589d});}:function(_0x41842e,_0x5e9a18){const _0x538b99=a4_0xb516aa;_0x41842e[_0x538b99(0x131)]=_0x5e9a18;}),__importStar=this&&this[a4_0xb516aa(0x136)]||(function(){var _0x5c11c0=function(_0x5f3f71){return _0x5c11c0=Object['getOwnPropertyNames']||function(_0x3b74da){const _0xdfe2e0=a4_0x3ae4;var _0x448e42=[];for(var _0x23a36c in _0x3b74da)if(Object['prototype'][_0xdfe2e0(0x160)][_0xdfe2e0(0x147)](_0x3b74da,_0x23a36c))_0x448e42[_0x448e42[_0xdfe2e0(0x144)]]=_0x23a36c;return _0x448e42;},_0x5c11c0(_0x5f3f71);};return function(_0x4126af){const _0x49cb47=a4_0x3ae4;if(_0x4126af&&_0x4126af[_0x49cb47(0x164)])return _0x4126af;var _0x3f1536={};if(_0x4126af!=null){for(var _0x591c37=_0x5c11c0(_0x4126af),_0x220315=0x0;_0x220315<_0x591c37[_0x49cb47(0x144)];_0x220315++)if(_0x591c37[_0x220315]!==_0x49cb47(0x131))__createBinding(_0x3f1536,_0x4126af,_0x591c37[_0x220315]);}return __setModuleDefault(_0x3f1536,_0x4126af),_0x3f1536;};}());Object['defineProperty'](exports,a4_0xb516aa(0x164),{'value':!![]}),exports[a4_0xb516aa(0x15d)]=void 0x0;const authService_1=require('../services/authService'),tokenBlacklistService_1=require(a4_0xb516aa(0x137)),telegramBotService_1=require(a4_0xb516aa(0x162));function a4_0x3ae4(_0x2d0c73,_0x37815b){const _0x1241c8=a4_0x1241();return a4_0x3ae4=function(_0x3ae44b,_0x20ab6b){_0x3ae44b=_0x3ae44b-0x131;let _0x47ae8a=_0x1241c8[_0x3ae44b];return _0x47ae8a;},a4_0x3ae4(_0x2d0c73,_0x37815b);}function a4_0x1241(){const _0x4c9bd2=['sendLoginNotification','call','Logged\x20out\x20successfully','14836vPoCSO','5181516rTyPsE','__setModuleDefault','get','157703krthoP','defineProperty','getBlacklistStats','__createBinding','5MTPLAr','then','findUnique','6952eWfhcd','shop','180lAZKSz','30LJUMic','error','remoteAddress','json','telegramBotService','5697pmqPSv','AuthController','login','Failed\x20to\x20send\x20failed\x20login\x20notification:','hasOwnProperty','writable','../services/telegramBotService','User-Agent','__esModule','unknown','logout','default','configurable','username','tokenBlacklistService','getStats','__importStar','../services/tokenBlacklistService','resolve','user','token','559624kbgKlD','12DFvDDL','1224041dClFeU','324489mdjWyN','exp','role','AuthService','getOwnPropertyDescriptor','blacklistToken','length','633iTfXaU'];a4_0x1241=function(){return _0x4c9bd2;};return a4_0x1241();}class AuthController{constructor(){const _0x1feade=a4_0xb516aa;this[_0x1feade(0x15e)]=async(_0x401105,_0xec5e73,_0x5a2fe2)=>{const _0x49732b=_0x1feade;try{const _0x4eadfa=_0x401105['body'],_0x4dfa1a=_0x401105['ip']||_0x401105['connection'][_0x49732b(0x159)]||_0x49732b(0x165),_0x1552bf=_0x401105['get'](_0x49732b(0x163))||_0x49732b(0x165);let _0x77ad4f=![],_0xfafd14=null;try{const _0x2dec1f=await this['authService'][_0x49732b(0x15e)](_0x4eadfa);_0x77ad4f=!![],_0x2dec1f['role']===_0x49732b(0x155)&&_0x2dec1f['user']?.['id']&&(_0xfafd14=_0x2dec1f[_0x49732b(0x139)]['id']),_0xfafd14&&await telegramBotService_1['telegramBotService'][_0x49732b(0x146)](_0xfafd14,{'username':_0x4eadfa[_0x49732b(0x133)],'ipAddress':_0x4dfa1a,'userAgent':_0x1552bf,'timestamp':new Date(),'success':!![]}),_0xec5e73[_0x49732b(0x15a)]({'success':!![],'result':_0x2dec1f});}catch(_0x4330eb){try{const _0x5aaca6=(await Promise[_0x49732b(0x138)]()[_0x49732b(0x152)](()=>__importStar(require('../config/database'))))[_0x49732b(0x131)],_0x31f0aa=await _0x5aaca6[_0x49732b(0x155)][_0x49732b(0x153)]({'where':{'username':_0x4eadfa[_0x49732b(0x133)]},'select':{'id':!![]}});_0x31f0aa&&await telegramBotService_1[_0x49732b(0x15b)][_0x49732b(0x146)](_0x31f0aa['id'],{'username':_0x4eadfa['username'],'ipAddress':_0x4dfa1a,'userAgent':_0x1552bf,'timestamp':new Date(),'success':![]});}catch(_0x38f4e){console[_0x49732b(0x158)](_0x49732b(0x15f),_0x38f4e);}throw _0x4330eb;}}catch(_0x22ccdd){_0x5a2fe2(_0x22ccdd);}},this['me']=async(_0x538c40,_0x3a2072,_0x4f13b6)=>{const _0x13af85=_0x1feade;try{const _0x18574d=_0x538c40[_0x13af85(0x139)];_0x3a2072['json']({'success':!![],'result':{'id':_0x18574d?.['id'],'username':_0x18574d?.[_0x13af85(0x133)],'role':_0x18574d?.[_0x13af85(0x140)]}});}catch(_0x12f67c){_0x4f13b6(_0x12f67c);}},this[_0x1feade(0x166)]=async(_0x4d7220,_0x5d8def,_0x432e50)=>{const _0x416ce6=_0x1feade;try{const _0x47da14=_0x4d7220[_0x416ce6(0x13a)],_0x444a17=_0x4d7220['user'];_0x47da14&&_0x444a17?.[_0x416ce6(0x13f)]&&tokenBlacklistService_1['tokenBlacklistService'][_0x416ce6(0x143)](_0x47da14,_0x444a17[_0x416ce6(0x13f)]),_0x5d8def['json']({'success':!![],'message':_0x416ce6(0x148)});}catch(_0x55f8d7){_0x432e50(_0x55f8d7);}},this[_0x1feade(0x14f)]=async(_0x9dd171,_0x591781,_0x2cc219)=>{const _0xadba08=_0x1feade;try{const _0x46ec9d=tokenBlacklistService_1[_0xadba08(0x134)][_0xadba08(0x135)]();_0x591781[_0xadba08(0x15a)]({'success':!![],'result':_0x46ec9d});}catch(_0x3e66a1){_0x2cc219(_0x3e66a1);}},this['authService']=new authService_1[(_0x1feade(0x141))]();}}exports['AuthController']=AuthController;