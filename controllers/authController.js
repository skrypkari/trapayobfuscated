'use strict';const a4_0x6c187=a4_0x2d51;(function(_0x27389c,_0x206b3c){const _0x1d9f6a=a4_0x2d51,_0x121b95=_0x27389c();while(!![]){try{const _0x1a28a7=-parseInt(_0x1d9f6a(0x1fb))/0x1+-parseInt(_0x1d9f6a(0x204))/0x2+parseInt(_0x1d9f6a(0x1e1))/0x3*(parseInt(_0x1d9f6a(0x1f6))/0x4)+parseInt(_0x1d9f6a(0x1ec))/0x5+parseInt(_0x1d9f6a(0x1d9))/0x6+-parseInt(_0x1d9f6a(0x1fe))/0x7*(-parseInt(_0x1d9f6a(0x1f5))/0x8)+-parseInt(_0x1d9f6a(0x208))/0x9;if(_0x1a28a7===_0x206b3c)break;else _0x121b95['push'](_0x121b95['shift']());}catch(_0x8c333b){_0x121b95['push'](_0x121b95['shift']());}}}(a4_0x148e,0x6a481));var __createBinding=this&&this[a4_0x6c187(0x1ea)]||(Object[a4_0x6c187(0x1ef)]?function(_0x1f9d8c,_0x304c36,_0xae93b5,_0x540d22){const _0xe6546b=a4_0x6c187;if(_0x540d22===undefined)_0x540d22=_0xae93b5;var _0x1ed1a1=Object[_0xe6546b(0x206)](_0x304c36,_0xae93b5);(!_0x1ed1a1||('get'in _0x1ed1a1?!_0x304c36[_0xe6546b(0x1de)]:_0x1ed1a1[_0xe6546b(0x1e5)]||_0x1ed1a1[_0xe6546b(0x1f0)]))&&(_0x1ed1a1={'enumerable':!![],'get':function(){return _0x304c36[_0xae93b5];}}),Object['defineProperty'](_0x1f9d8c,_0x540d22,_0x1ed1a1);}:function(_0x34e8b6,_0x37d871,_0x579419,_0x56c9ae){if(_0x56c9ae===undefined)_0x56c9ae=_0x579419;_0x34e8b6[_0x56c9ae]=_0x37d871[_0x579419];}),__setModuleDefault=this&&this[a4_0x6c187(0x1f9)]||(Object[a4_0x6c187(0x1ef)]?function(_0x4baa76,_0x17180b){const _0x189cf7=a4_0x6c187;Object[_0x189cf7(0x200)](_0x4baa76,_0x189cf7(0x1f7),{'enumerable':!![],'value':_0x17180b});}:function(_0x49a059,_0x278502){const _0x4591f0=a4_0x6c187;_0x49a059[_0x4591f0(0x1f7)]=_0x278502;}),__importStar=this&&this['__importStar']||(function(){var _0x3ccb03=function(_0x42d7c6){const _0x19944c=a4_0x2d51;return _0x3ccb03=Object[_0x19944c(0x1e4)]||function(_0x121671){const _0x8656d=_0x19944c;var _0x2a7f66=[];for(var _0x425cc9 in _0x121671)if(Object[_0x8656d(0x1fa)]['hasOwnProperty'][_0x8656d(0x1db)](_0x121671,_0x425cc9))_0x2a7f66[_0x2a7f66[_0x8656d(0x1eb)]]=_0x425cc9;return _0x2a7f66;},_0x3ccb03(_0x42d7c6);};return function(_0x570bbd){const _0x42e62d=a4_0x2d51;if(_0x570bbd&&_0x570bbd[_0x42e62d(0x1de)])return _0x570bbd;var _0x1e22ac={};if(_0x570bbd!=null){for(var _0x62de17=_0x3ccb03(_0x570bbd),_0x2a69cd=0x0;_0x2a69cd<_0x62de17[_0x42e62d(0x1eb)];_0x2a69cd++)if(_0x62de17[_0x2a69cd]!=='default')__createBinding(_0x1e22ac,_0x570bbd,_0x62de17[_0x2a69cd]);}return __setModuleDefault(_0x1e22ac,_0x570bbd),_0x1e22ac;};}());Object[a4_0x6c187(0x200)](exports,a4_0x6c187(0x1de),{'value':!![]}),exports[a4_0x6c187(0x1fd)]=void 0x0;const authService_1=require(a4_0x6c187(0x207)),tokenBlacklistService_1=require(a4_0x6c187(0x1d8)),telegramBotService_1=require('../services/telegramBotService');class AuthController{constructor(){const _0xeaff2b=a4_0x6c187;this[_0xeaff2b(0x202)]=async(_0x4728c3,_0x24fa07,_0x239084)=>{const _0x5d8218=_0xeaff2b;try{const _0x3d8bc5=_0x4728c3[_0x5d8218(0x1f4)],_0x3e2e2a=_0x4728c3['ip']||_0x4728c3['connection'][_0x5d8218(0x1ee)]||_0x5d8218(0x203),_0x20978d=_0x4728c3[_0x5d8218(0x1e6)](_0x5d8218(0x1f2))||_0x5d8218(0x203);let _0xcd8bb2=![],_0x47341b=null;try{const _0x44545f=await this[_0x5d8218(0x205)][_0x5d8218(0x202)](_0x3d8bc5);_0xcd8bb2=!![],_0x44545f[_0x5d8218(0x1d7)]==='shop'&&_0x44545f[_0x5d8218(0x1f1)]?.['id']&&(_0x47341b=_0x44545f[_0x5d8218(0x1f1)]['id']),_0x47341b&&await telegramBotService_1[_0x5d8218(0x1dd)][_0x5d8218(0x1da)](_0x47341b,{'username':_0x3d8bc5[_0x5d8218(0x209)],'ipAddress':_0x3e2e2a,'userAgent':_0x20978d,'timestamp':new Date(),'success':!![]}),_0x24fa07[_0x5d8218(0x1df)]({'success':!![],'result':_0x44545f});}catch(_0x1db026){try{const _0x3bf03a=(await Promise[_0x5d8218(0x1f3)]()[_0x5d8218(0x1ff)](()=>__importStar(require(_0x5d8218(0x1d6)))))[_0x5d8218(0x1f7)],_0x303599=await _0x3bf03a[_0x5d8218(0x1e9)][_0x5d8218(0x1e8)]({'where':{'username':_0x3d8bc5['username']},'select':{'id':!![]}});_0x303599&&await telegramBotService_1['telegramBotService'][_0x5d8218(0x1da)](_0x303599['id'],{'username':_0x3d8bc5[_0x5d8218(0x209)],'ipAddress':_0x3e2e2a,'userAgent':_0x20978d,'timestamp':new Date(),'success':![]});}catch(_0x4e466a){console[_0x5d8218(0x1dc)](_0x5d8218(0x1f8),_0x4e466a);}throw _0x1db026;}}catch(_0x140645){_0x239084(_0x140645);}},this['me']=async(_0x56b12e,_0x385b33,_0x57199e)=>{const _0x4d80f4=_0xeaff2b;try{const _0x5bc00d=_0x56b12e[_0x4d80f4(0x1f1)];_0x385b33[_0x4d80f4(0x1df)]({'success':!![],'result':{'id':_0x5bc00d?.['id'],'username':_0x5bc00d?.[_0x4d80f4(0x209)],'role':_0x5bc00d?.[_0x4d80f4(0x1d7)]}});}catch(_0x2b70e4){_0x57199e(_0x2b70e4);}},this[_0xeaff2b(0x1e2)]=async(_0x102b7d,_0x4121d0,_0x4e33f7)=>{const _0x3d0d5f=_0xeaff2b;try{const _0x29306a=_0x102b7d[_0x3d0d5f(0x1e7)],_0x5126c4=_0x102b7d[_0x3d0d5f(0x1f1)];_0x29306a&&_0x5126c4?.[_0x3d0d5f(0x1e3)]&&tokenBlacklistService_1['tokenBlacklistService'][_0x3d0d5f(0x1ed)](_0x29306a,_0x5126c4[_0x3d0d5f(0x1e3)]),_0x4121d0[_0x3d0d5f(0x1df)]({'success':!![],'message':_0x3d0d5f(0x1fc)});}catch(_0x59b066){_0x4e33f7(_0x59b066);}},this['getBlacklistStats']=async(_0x10c74c,_0x2e0ec6,_0x31ee48)=>{const _0x18a59d=_0xeaff2b;try{const _0x55e095=tokenBlacklistService_1['tokenBlacklistService'][_0x18a59d(0x1e0)]();_0x2e0ec6[_0x18a59d(0x1df)]({'success':!![],'result':_0x55e095});}catch(_0x5431c1){_0x31ee48(_0x5431c1);}},this[_0xeaff2b(0x205)]=new authService_1[(_0xeaff2b(0x201))]();}}function a4_0x148e(){const _0x1f071a=['authService','getOwnPropertyDescriptor','../services/authService','10355949VBBdlT','username','../config/database','role','../services/tokenBlacklistService','4913982LkrgKQ','sendLoginNotification','call','error','telegramBotService','__esModule','json','getStats','2382LxtIPg','logout','exp','getOwnPropertyNames','writable','get','token','findUnique','shop','__createBinding','length','801255UmhgdD','blacklistToken','remoteAddress','create','configurable','user','User-Agent','resolve','body','8VlrKHA','3720prgWPp','default','Failed\x20to\x20send\x20failed\x20login\x20notification:','__setModuleDefault','prototype','210321jxGAeA','Logged\x20out\x20successfully','AuthController','3451231xTHjCM','then','defineProperty','AuthService','login','unknown','828780GqPmWx'];a4_0x148e=function(){return _0x1f071a;};return a4_0x148e();}function a4_0x2d51(_0x1dd5e5,_0x35e2b7){const _0x148eb6=a4_0x148e();return a4_0x2d51=function(_0x2d514d,_0xe5f62){_0x2d514d=_0x2d514d-0x1d6;let _0x5dcc6b=_0x148eb6[_0x2d514d];return _0x5dcc6b;},a4_0x2d51(_0x1dd5e5,_0x35e2b7);}exports['AuthController']=AuthController;