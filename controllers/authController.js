'use strict';const a4_0x593426=a4_0x3809;(function(_0x5c4c3a,_0x59d628){const _0x308af3=a4_0x3809,_0x13aea9=_0x5c4c3a();while(!![]){try{const _0x57b86c=parseInt(_0x308af3(0x1ac))/0x1+-parseInt(_0x308af3(0x1c0))/0x2*(parseInt(_0x308af3(0x1bf))/0x3)+-parseInt(_0x308af3(0x1a2))/0x4*(parseInt(_0x308af3(0x1b3))/0x5)+parseInt(_0x308af3(0x1b0))/0x6+parseInt(_0x308af3(0x19e))/0x7*(-parseInt(_0x308af3(0x1bd))/0x8)+-parseInt(_0x308af3(0x1ab))/0x9+-parseInt(_0x308af3(0x1bc))/0xa*(-parseInt(_0x308af3(0x199))/0xb);if(_0x57b86c===_0x59d628)break;else _0x13aea9['push'](_0x13aea9['shift']());}catch(_0x48d11c){_0x13aea9['push'](_0x13aea9['shift']());}}}(a4_0xfa79,0xbaae3));var __createBinding=this&&this[a4_0x593426(0x19b)]||(Object['create']?function(_0x70ac7,_0x1886a6,_0x26a622,_0x477e56){const _0x1b874a=a4_0x593426;if(_0x477e56===undefined)_0x477e56=_0x26a622;var _0xf9a1e0=Object[_0x1b874a(0x195)](_0x1886a6,_0x26a622);(!_0xf9a1e0||(_0x1b874a(0x193)in _0xf9a1e0?!_0x1886a6['__esModule']:_0xf9a1e0[_0x1b874a(0x1aa)]||_0xf9a1e0[_0x1b874a(0x1ba)]))&&(_0xf9a1e0={'enumerable':!![],'get':function(){return _0x1886a6[_0x26a622];}}),Object[_0x1b874a(0x1a0)](_0x70ac7,_0x477e56,_0xf9a1e0);}:function(_0x344f3f,_0x2593da,_0x5592e9,_0x475f11){if(_0x475f11===undefined)_0x475f11=_0x5592e9;_0x344f3f[_0x475f11]=_0x2593da[_0x5592e9];}),__setModuleDefault=this&&this[a4_0x593426(0x1a6)]||(Object[a4_0x593426(0x192)]?function(_0x1ed826,_0x3e29d4){const _0x2497b5=a4_0x593426;Object[_0x2497b5(0x1a0)](_0x1ed826,'default',{'enumerable':!![],'value':_0x3e29d4});}:function(_0x4a70f1,_0xf9fd5e){const _0xc38d4e=a4_0x593426;_0x4a70f1[_0xc38d4e(0x1bb)]=_0xf9fd5e;}),__importStar=this&&this[a4_0x593426(0x1a4)]||(function(){var _0xf82d2b=function(_0x56a105){const _0x29ca91=a4_0x3809;return _0xf82d2b=Object[_0x29ca91(0x196)]||function(_0x2a8bb8){const _0x5e88bb=_0x29ca91;var _0x38688c=[];for(var _0x1400a8 in _0x2a8bb8)if(Object['prototype']['hasOwnProperty'][_0x5e88bb(0x1b1)](_0x2a8bb8,_0x1400a8))_0x38688c[_0x38688c[_0x5e88bb(0x1c7)]]=_0x1400a8;return _0x38688c;},_0xf82d2b(_0x56a105);};return function(_0x23f889){const _0x599dc5=a4_0x3809;if(_0x23f889&&_0x23f889[_0x599dc5(0x1a3)])return _0x23f889;var _0x22fc1e={};if(_0x23f889!=null){for(var _0x2819e5=_0xf82d2b(_0x23f889),_0x2751f5=0x0;_0x2751f5<_0x2819e5[_0x599dc5(0x1c7)];_0x2751f5++)if(_0x2819e5[_0x2751f5]!==_0x599dc5(0x1bb))__createBinding(_0x22fc1e,_0x23f889,_0x2819e5[_0x2751f5]);}return __setModuleDefault(_0x22fc1e,_0x23f889),_0x22fc1e;};}());function a4_0xfa79(){const _0x23da56=['remoteAddress','../services/telegramBotService','322729HrobOm','../services/tokenBlacklistService','__createBinding','token','exp','7jzgtHB','sendLoginNotification','defineProperty','login','72AOFCBb','__esModule','__importStar','user','__setModuleDefault','tokenBlacklistService','../config/database','authService','writable','11735793nyggUw','59917zuuLdB','username','role','unknown','7341870OfKoii','call','Logged\x20out\x20successfully','118475NdIfsc','then','telegramBotService','shop','logout','../services/authService','getBlacklistStats','configurable','default','1090fsiObu','8939264AoZIBD','User-Agent','75YXUoCR','69518jUyZiq','findUnique','json','resolve','AuthController','Failed\x20to\x20send\x20failed\x20login\x20notification:','blacklistToken','length','create','get','body','getOwnPropertyDescriptor','getOwnPropertyNames'];a4_0xfa79=function(){return _0x23da56;};return a4_0xfa79();}function a4_0x3809(_0x19f5d0,_0x44501f){const _0xfa7926=a4_0xfa79();return a4_0x3809=function(_0x38093a,_0x411b20){_0x38093a=_0x38093a-0x192;let _0x371be3=_0xfa7926[_0x38093a];return _0x371be3;},a4_0x3809(_0x19f5d0,_0x44501f);}Object[a4_0x593426(0x1a0)](exports,a4_0x593426(0x1a3),{'value':!![]}),exports[a4_0x593426(0x1c4)]=void 0x0;const authService_1=require(a4_0x593426(0x1b8)),tokenBlacklistService_1=require(a4_0x593426(0x19a)),telegramBotService_1=require(a4_0x593426(0x198));class AuthController{constructor(){const _0x4cfdde=a4_0x593426;this['login']=async(_0x563bfa,_0x3ecf0c,_0x50faf7)=>{const _0x5ded50=a4_0x3809;try{const _0x50fa70=_0x563bfa[_0x5ded50(0x194)],_0x315b47=_0x563bfa['ip']||_0x563bfa['connection'][_0x5ded50(0x197)]||'unknown',_0x55da60=_0x563bfa['get'](_0x5ded50(0x1be))||_0x5ded50(0x1af);let _0x5730c8=![],_0x4a0b0a=null;try{const _0x411b02=await this[_0x5ded50(0x1a9)][_0x5ded50(0x1a1)](_0x50fa70);_0x5730c8=!![],_0x411b02[_0x5ded50(0x1ae)]===_0x5ded50(0x1b6)&&_0x411b02[_0x5ded50(0x1a5)]?.['id']&&(_0x4a0b0a=_0x411b02[_0x5ded50(0x1a5)]['id']),_0x4a0b0a&&await telegramBotService_1[_0x5ded50(0x1b5)]['sendLoginNotification'](_0x4a0b0a,{'username':_0x50fa70[_0x5ded50(0x1ad)],'ipAddress':_0x315b47,'userAgent':_0x55da60,'timestamp':new Date(),'success':!![]}),_0x3ecf0c[_0x5ded50(0x1c2)]({'success':!![],'result':_0x411b02});}catch(_0x2131db){try{const _0x398c6f=(await Promise[_0x5ded50(0x1c3)]()[_0x5ded50(0x1b4)](()=>__importStar(require(_0x5ded50(0x1a8)))))[_0x5ded50(0x1bb)],_0x2e49b6=await _0x398c6f[_0x5ded50(0x1b6)][_0x5ded50(0x1c1)]({'where':{'username':_0x50fa70[_0x5ded50(0x1ad)]},'select':{'id':!![]}});_0x2e49b6&&await telegramBotService_1[_0x5ded50(0x1b5)][_0x5ded50(0x19f)](_0x2e49b6['id'],{'username':_0x50fa70[_0x5ded50(0x1ad)],'ipAddress':_0x315b47,'userAgent':_0x55da60,'timestamp':new Date(),'success':![]});}catch(_0x5d7c8f){console['error'](_0x5ded50(0x1c5),_0x5d7c8f);}throw _0x2131db;}}catch(_0x59032d){_0x50faf7(_0x59032d);}},this['me']=async(_0x2c9c87,_0x52b161,_0x59a407)=>{const _0x519ec9=a4_0x3809;try{const _0x29b44a=_0x2c9c87['user'];_0x52b161[_0x519ec9(0x1c2)]({'success':!![],'result':{'id':_0x29b44a?.['id'],'username':_0x29b44a?.[_0x519ec9(0x1ad)],'role':_0x29b44a?.[_0x519ec9(0x1ae)]}});}catch(_0x31410d){_0x59a407(_0x31410d);}},this[_0x4cfdde(0x1b7)]=async(_0x40270c,_0x546ca9,_0x45728c)=>{const _0x503a72=_0x4cfdde;try{const _0x15993b=_0x40270c[_0x503a72(0x19c)],_0x3b4d00=_0x40270c['user'];_0x15993b&&_0x3b4d00?.[_0x503a72(0x19d)]&&tokenBlacklistService_1[_0x503a72(0x1a7)][_0x503a72(0x1c6)](_0x15993b,_0x3b4d00[_0x503a72(0x19d)]),_0x546ca9[_0x503a72(0x1c2)]({'success':!![],'message':_0x503a72(0x1b2)});}catch(_0x36d9bf){_0x45728c(_0x36d9bf);}},this[_0x4cfdde(0x1b9)]=async(_0x173621,_0x575e84,_0x299486)=>{const _0x16c357=_0x4cfdde;try{const _0xb6e2fa=tokenBlacklistService_1[_0x16c357(0x1a7)]['getStats']();_0x575e84[_0x16c357(0x1c2)]({'success':!![],'result':_0xb6e2fa});}catch(_0x222d30){_0x299486(_0x222d30);}},this[_0x4cfdde(0x1a9)]=new authService_1['AuthService']();}}exports['AuthController']=AuthController;