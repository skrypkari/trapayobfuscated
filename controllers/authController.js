'use strict';function a4_0x21f9(_0x17616c,_0x62b4a7){const _0x56a49f=a4_0x56a4();return a4_0x21f9=function(_0x21f993,_0x3dad83){_0x21f993=_0x21f993-0x118;let _0x856c7d=_0x56a49f[_0x21f993];return _0x856c7d;},a4_0x21f9(_0x17616c,_0x62b4a7);}const a4_0x4086b3=a4_0x21f9;(function(_0x420cf4,_0x4b9b7e){const _0x5b5bfa=a4_0x21f9,_0x308f31=_0x420cf4();while(!![]){try{const _0x137f37=-parseInt(_0x5b5bfa(0x123))/0x1*(parseInt(_0x5b5bfa(0x126))/0x2)+-parseInt(_0x5b5bfa(0x134))/0x3*(parseInt(_0x5b5bfa(0x119))/0x4)+parseInt(_0x5b5bfa(0x13a))/0x5*(parseInt(_0x5b5bfa(0x13d))/0x6)+-parseInt(_0x5b5bfa(0x13e))/0x7+-parseInt(_0x5b5bfa(0x11d))/0x8*(parseInt(_0x5b5bfa(0x11b))/0x9)+parseInt(_0x5b5bfa(0x11e))/0xa+parseInt(_0x5b5bfa(0x143))/0xb;if(_0x137f37===_0x4b9b7e)break;else _0x308f31['push'](_0x308f31['shift']());}catch(_0x473b83){_0x308f31['push'](_0x308f31['shift']());}}}(a4_0x56a4,0x1d270));function a4_0x56a4(){const _0x5f8aeb=['json','2UvnUgv','Failed\x20to\x20send\x20failed\x20login\x20notification:','unknown','defineProperty','__importStar','login','hasOwnProperty','create','../services/telegramBotService','shop','../services/authService','token','length','telegramBotService','57aZAGva','error','role','findUnique','exp','__setModuleDefault','295xsVlZH','getBlacklistStats','authService','3390YhPoeG','1520484ONEaFt','get','call','body','__createBinding','6452314xsWGly','sendLoginNotification','resolve','user','blacklistToken','username','getOwnPropertyDescriptor','then','prototype','19168PIEiAw','tokenBlacklistService','25605RnjdQG','configurable','200HnHUMd','493680mkXqEQ','AuthController','default','AuthService','remoteAddress','170484ZVnMWf','__esModule'];a4_0x56a4=function(){return _0x5f8aeb;};return a4_0x56a4();}var __createBinding=this&&this[a4_0x4086b3(0x142)]||(Object[a4_0x4086b3(0x12d)]?function(_0x2565aa,_0x4d43cd,_0x1c7503,_0x54dd7d){const _0x51cd35=a4_0x4086b3;if(_0x54dd7d===undefined)_0x54dd7d=_0x1c7503;var _0x45abae=Object[_0x51cd35(0x149)](_0x4d43cd,_0x1c7503);(!_0x45abae||('get'in _0x45abae?!_0x4d43cd[_0x51cd35(0x124)]:_0x45abae['writable']||_0x45abae[_0x51cd35(0x11c)]))&&(_0x45abae={'enumerable':!![],'get':function(){return _0x4d43cd[_0x1c7503];}}),Object[_0x51cd35(0x129)](_0x2565aa,_0x54dd7d,_0x45abae);}:function(_0x1a8167,_0x5d5ab3,_0x5c8e5a,_0x59e10b){if(_0x59e10b===undefined)_0x59e10b=_0x5c8e5a;_0x1a8167[_0x59e10b]=_0x5d5ab3[_0x5c8e5a];}),__setModuleDefault=this&&this[a4_0x4086b3(0x139)]||(Object[a4_0x4086b3(0x12d)]?function(_0xd11e50,_0x15d454){const _0x758219=a4_0x4086b3;Object[_0x758219(0x129)](_0xd11e50,_0x758219(0x120),{'enumerable':!![],'value':_0x15d454});}:function(_0x429c8c,_0x3d27fc){const _0x537b1b=a4_0x4086b3;_0x429c8c[_0x537b1b(0x120)]=_0x3d27fc;}),__importStar=this&&this[a4_0x4086b3(0x12a)]||(function(){var _0x17e0ec=function(_0x58782f){return _0x17e0ec=Object['getOwnPropertyNames']||function(_0x4d8e64){const _0x36c6f9=a4_0x21f9;var _0xb79ecc=[];for(var _0x261d12 in _0x4d8e64)if(Object[_0x36c6f9(0x118)][_0x36c6f9(0x12c)][_0x36c6f9(0x140)](_0x4d8e64,_0x261d12))_0xb79ecc[_0xb79ecc[_0x36c6f9(0x132)]]=_0x261d12;return _0xb79ecc;},_0x17e0ec(_0x58782f);};return function(_0x5596c1){const _0x356164=a4_0x21f9;if(_0x5596c1&&_0x5596c1['__esModule'])return _0x5596c1;var _0x4e2338={};if(_0x5596c1!=null){for(var _0x54acc2=_0x17e0ec(_0x5596c1),_0x2aaa2d=0x0;_0x2aaa2d<_0x54acc2['length'];_0x2aaa2d++)if(_0x54acc2[_0x2aaa2d]!==_0x356164(0x120))__createBinding(_0x4e2338,_0x5596c1,_0x54acc2[_0x2aaa2d]);}return __setModuleDefault(_0x4e2338,_0x5596c1),_0x4e2338;};}());Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['AuthController']=void 0x0;const authService_1=require(a4_0x4086b3(0x130)),tokenBlacklistService_1=require('../services/tokenBlacklistService'),telegramBotService_1=require(a4_0x4086b3(0x12e));class AuthController{constructor(){const _0x2e465d=a4_0x4086b3;this[_0x2e465d(0x12b)]=async(_0x41431a,_0x496d70,_0x436f42)=>{const _0x5e4e57=_0x2e465d;try{const _0x2cb8cf=_0x41431a[_0x5e4e57(0x141)],_0x27cdb3=_0x41431a['ip']||_0x41431a['connection'][_0x5e4e57(0x122)]||_0x5e4e57(0x128),_0x24a830=_0x41431a[_0x5e4e57(0x13f)]('User-Agent')||_0x5e4e57(0x128);let _0x369d6d=![],_0x3467dd=null;try{const _0x19c128=await this[_0x5e4e57(0x13c)][_0x5e4e57(0x12b)](_0x2cb8cf);_0x369d6d=!![],_0x19c128[_0x5e4e57(0x136)]==='shop'&&_0x19c128['user']?.['id']&&(_0x3467dd=_0x19c128[_0x5e4e57(0x146)]['id']),_0x3467dd&&await telegramBotService_1[_0x5e4e57(0x133)][_0x5e4e57(0x144)](_0x3467dd,{'username':_0x2cb8cf[_0x5e4e57(0x148)],'ipAddress':_0x27cdb3,'userAgent':_0x24a830,'timestamp':new Date(),'success':!![]}),_0x496d70[_0x5e4e57(0x125)]({'success':!![],'result':_0x19c128});}catch(_0x1dfefd){try{const _0xf8adaf=(await Promise[_0x5e4e57(0x145)]()[_0x5e4e57(0x14a)](()=>__importStar(require('../config/database'))))['default'],_0x283477=await _0xf8adaf[_0x5e4e57(0x12f)][_0x5e4e57(0x137)]({'where':{'username':_0x2cb8cf[_0x5e4e57(0x148)]},'select':{'id':!![]}});_0x283477&&await telegramBotService_1[_0x5e4e57(0x133)][_0x5e4e57(0x144)](_0x283477['id'],{'username':_0x2cb8cf['username'],'ipAddress':_0x27cdb3,'userAgent':_0x24a830,'timestamp':new Date(),'success':![]});}catch(_0x2e4962){console[_0x5e4e57(0x135)](_0x5e4e57(0x127),_0x2e4962);}throw _0x1dfefd;}}catch(_0x477b53){_0x436f42(_0x477b53);}},this['me']=async(_0xc329ab,_0x506cfa,_0x3057a9)=>{const _0x5004b2=_0x2e465d;try{const _0x414bd4=_0xc329ab[_0x5004b2(0x146)];_0x506cfa[_0x5004b2(0x125)]({'success':!![],'result':{'id':_0x414bd4?.['id'],'username':_0x414bd4?.[_0x5004b2(0x148)],'role':_0x414bd4?.['role']}});}catch(_0x1813e5){_0x3057a9(_0x1813e5);}},this['logout']=async(_0xb61445,_0x3482ca,_0x36e26b)=>{const _0x3d8744=_0x2e465d;try{const _0x1e3bd8=_0xb61445[_0x3d8744(0x131)],_0x566749=_0xb61445[_0x3d8744(0x146)];_0x1e3bd8&&_0x566749?.[_0x3d8744(0x138)]&&tokenBlacklistService_1[_0x3d8744(0x11a)][_0x3d8744(0x147)](_0x1e3bd8,_0x566749[_0x3d8744(0x138)]),_0x3482ca[_0x3d8744(0x125)]({'success':!![],'message':'Logged\x20out\x20successfully'});}catch(_0x5cf644){_0x36e26b(_0x5cf644);}},this[_0x2e465d(0x13b)]=async(_0x55507b,_0x321338,_0xddf1e5)=>{const _0x439eb2=_0x2e465d;try{const _0x38dd03=tokenBlacklistService_1['tokenBlacklistService']['getStats']();_0x321338[_0x439eb2(0x125)]({'success':!![],'result':_0x38dd03});}catch(_0x33368e){_0xddf1e5(_0x33368e);}},this[_0x2e465d(0x13c)]=new authService_1[(_0x2e465d(0x121))]();}}exports[a4_0x4086b3(0x11f)]=AuthController;