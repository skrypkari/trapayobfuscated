'use strict';const a4_0x34bebf=a4_0x45d6;(function(_0x4a0b68,_0x5514f6){const _0xe733da=a4_0x45d6,_0x124d0a=_0x4a0b68();while(!![]){try{const _0x52744f=-parseInt(_0xe733da(0x98))/0x1*(parseInt(_0xe733da(0x95))/0x2)+-parseInt(_0xe733da(0x8b))/0x3*(parseInt(_0xe733da(0x93))/0x4)+-parseInt(_0xe733da(0xb7))/0x5+parseInt(_0xe733da(0xad))/0x6+-parseInt(_0xe733da(0x86))/0x7+parseInt(_0xe733da(0xa9))/0x8*(parseInt(_0xe733da(0x8c))/0x9)+parseInt(_0xe733da(0x90))/0xa;if(_0x52744f===_0x5514f6)break;else _0x124d0a['push'](_0x124d0a['shift']());}catch(_0x136554){_0x124d0a['push'](_0x124d0a['shift']());}}}(a4_0x361c,0xbd9d3));var __createBinding=this&&this[a4_0x34bebf(0x84)]||(Object[a4_0x34bebf(0xaf)]?function(_0x284ba9,_0x42bddb,_0x12e798,_0xdf3af4){const _0x4e1f1c=a4_0x34bebf;if(_0xdf3af4===undefined)_0xdf3af4=_0x12e798;var _0x307132=Object[_0x4e1f1c(0xa7)](_0x42bddb,_0x12e798);(!_0x307132||('get'in _0x307132?!_0x42bddb[_0x4e1f1c(0x88)]:_0x307132[_0x4e1f1c(0x87)]||_0x307132[_0x4e1f1c(0x9a)]))&&(_0x307132={'enumerable':!![],'get':function(){return _0x42bddb[_0x12e798];}}),Object[_0x4e1f1c(0x9e)](_0x284ba9,_0xdf3af4,_0x307132);}:function(_0x19d8b4,_0x17d786,_0x57503e,_0x43c817){if(_0x43c817===undefined)_0x43c817=_0x57503e;_0x19d8b4[_0x43c817]=_0x17d786[_0x57503e];}),__setModuleDefault=this&&this[a4_0x34bebf(0x97)]||(Object[a4_0x34bebf(0xaf)]?function(_0x1fef4e,_0x2ce994){const _0x83bb4b=a4_0x34bebf;Object[_0x83bb4b(0x9e)](_0x1fef4e,_0x83bb4b(0x89),{'enumerable':!![],'value':_0x2ce994});}:function(_0x151c40,_0xc7fc3d){const _0x650536=a4_0x34bebf;_0x151c40[_0x650536(0x89)]=_0xc7fc3d;}),__importStar=this&&this['__importStar']||(function(){var _0x1eceeb=function(_0x22eb30){const _0xb43bfe=a4_0x45d6;return _0x1eceeb=Object[_0xb43bfe(0x94)]||function(_0x44a57e){const _0xba8e49=_0xb43bfe;var _0x14d15e=[];for(var _0x12ddc0 in _0x44a57e)if(Object['prototype'][_0xba8e49(0xa4)][_0xba8e49(0x9f)](_0x44a57e,_0x12ddc0))_0x14d15e[_0x14d15e[_0xba8e49(0xab)]]=_0x12ddc0;return _0x14d15e;},_0x1eceeb(_0x22eb30);};return function(_0x50f240){const _0x937f65=a4_0x45d6;if(_0x50f240&&_0x50f240[_0x937f65(0x88)])return _0x50f240;var _0x508e6c={};if(_0x50f240!=null){for(var _0x7fd75e=_0x1eceeb(_0x50f240),_0x28edd0=0x0;_0x28edd0<_0x7fd75e[_0x937f65(0xab)];_0x28edd0++)if(_0x7fd75e[_0x28edd0]!=='default')__createBinding(_0x508e6c,_0x50f240,_0x7fd75e[_0x28edd0]);}return __setModuleDefault(_0x508e6c,_0x50f240),_0x508e6c;};}());function a4_0x45d6(_0x499c0c,_0x24bf7d){const _0x361c63=a4_0x361c();return a4_0x45d6=function(_0x45d6e7,_0x20eba6){_0x45d6e7=_0x45d6e7-0x84;let _0x497351=_0x361c63[_0x45d6e7];return _0x497351;},a4_0x45d6(_0x499c0c,_0x24bf7d);}Object[a4_0x34bebf(0x9e)](exports,a4_0x34bebf(0x88),{'value':!![]}),exports[a4_0x34bebf(0xb8)]=void 0x0;const authService_1=require(a4_0x34bebf(0x8a)),tokenBlacklistService_1=require(a4_0x34bebf(0xa5)),telegramBotService_1=require(a4_0x34bebf(0xa1));class AuthController{constructor(){const _0xbc18b1=a4_0x34bebf;this[_0xbc18b1(0x91)]=async(_0x48e343,_0x49dede,_0x4fe4a7)=>{const _0x13e975=_0xbc18b1;try{const _0x59880c=_0x48e343[_0x13e975(0x8e)],_0x2080e1=_0x48e343['ip']||_0x48e343[_0x13e975(0xaa)][_0x13e975(0xa0)]||_0x13e975(0xb2),_0x3b3704=_0x48e343[_0x13e975(0xb6)](_0x13e975(0x8d))||'unknown';let _0x36416e=![],_0x126311=null;try{const _0x555d7f=await this[_0x13e975(0x92)][_0x13e975(0x91)](_0x59880c);_0x36416e=!![],_0x555d7f[_0x13e975(0xb1)]===_0x13e975(0x9d)&&_0x555d7f[_0x13e975(0x85)]?.['id']&&(_0x126311=_0x555d7f[_0x13e975(0x85)]['id']),_0x126311&&await telegramBotService_1['telegramBotService'][_0x13e975(0xac)](_0x126311,{'username':_0x59880c[_0x13e975(0xb3)],'ipAddress':_0x2080e1,'userAgent':_0x3b3704,'timestamp':new Date(),'success':!![]}),_0x49dede['json']({'success':!![],'result':_0x555d7f});}catch(_0x2bf25e){try{const _0x2d8c41=(await Promise[_0x13e975(0x9b)]()[_0x13e975(0xb0)](()=>__importStar(require(_0x13e975(0xae)))))['default'],_0x81ed12=await _0x2d8c41['shop'][_0x13e975(0xa3)]({'where':{'username':_0x59880c['username']},'select':{'id':!![]}});_0x81ed12&&await telegramBotService_1[_0x13e975(0x99)][_0x13e975(0xac)](_0x81ed12['id'],{'username':_0x59880c[_0x13e975(0xb3)],'ipAddress':_0x2080e1,'userAgent':_0x3b3704,'timestamp':new Date(),'success':![]});}catch(_0x456d16){console[_0x13e975(0xb5)]('Failed\x20to\x20send\x20failed\x20login\x20notification:',_0x456d16);}throw _0x2bf25e;}}catch(_0xe29aff){_0x4fe4a7(_0xe29aff);}},this['me']=async(_0xa490d0,_0x1f36d8,_0xa4f92b)=>{const _0x572aa9=_0xbc18b1;try{const _0x32c03b=_0xa490d0[_0x572aa9(0x85)];_0x1f36d8['json']({'success':!![],'result':{'id':_0x32c03b?.['id'],'username':_0x32c03b?.[_0x572aa9(0xb3)],'role':_0x32c03b?.[_0x572aa9(0xb1)]}});}catch(_0x2380f3){_0xa4f92b(_0x2380f3);}},this['logout']=async(_0x382ad6,_0x433f1e,_0x22311e)=>{const _0x183d5e=_0xbc18b1;try{const _0x445437=_0x382ad6[_0x183d5e(0x96)],_0x50c99b=_0x382ad6[_0x183d5e(0x85)];_0x445437&&_0x50c99b?.[_0x183d5e(0xa6)]&&tokenBlacklistService_1['tokenBlacklistService']['blacklistToken'](_0x445437,_0x50c99b[_0x183d5e(0xa6)]),_0x433f1e[_0x183d5e(0x8f)]({'success':!![],'message':_0x183d5e(0xa8)});}catch(_0x36185b){_0x22311e(_0x36185b);}},this[_0xbc18b1(0xa2)]=async(_0x442e60,_0x4f15b7,_0x360f80)=>{const _0x44bea0=_0xbc18b1;try{const _0x2938aa=tokenBlacklistService_1[_0x44bea0(0xb4)][_0x44bea0(0x9c)]();_0x4f15b7[_0x44bea0(0x8f)]({'success':!![],'result':_0x2938aa});}catch(_0x4ff558){_0x360f80(_0x4ff558);}},this['authService']=new authService_1['AuthService']();}}function a4_0x361c(){const _0x52bdab=['104qdwLNL','connection','length','sendLoginNotification','8803902bqaVzO','../config/database','create','then','role','unknown','username','tokenBlacklistService','error','get','5968595eCGQiu','AuthController','__createBinding','user','7557802nwcNkl','writable','__esModule','default','../services/authService','717zIbwGY','461349PtKbtn','User-Agent','body','json','23071640qQwdcz','login','authService','21332ZqweLO','getOwnPropertyNames','232446TixSnG','token','__setModuleDefault','1PytiOy','telegramBotService','configurable','resolve','getStats','shop','defineProperty','call','remoteAddress','../services/telegramBotService','getBlacklistStats','findUnique','hasOwnProperty','../services/tokenBlacklistService','exp','getOwnPropertyDescriptor','Logged\x20out\x20successfully'];a4_0x361c=function(){return _0x52bdab;};return a4_0x361c();}exports[a4_0x34bebf(0xb8)]=AuthController;