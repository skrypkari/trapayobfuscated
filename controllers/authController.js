'use strict';const a4_0x284032=a4_0x755c;(function(_0x4b832c,_0x26bca2){const _0x3f23b7=a4_0x755c,_0x206f5a=_0x4b832c();while(!![]){try{const _0x1dead5=-parseInt(_0x3f23b7(0x163))/0x1+parseInt(_0x3f23b7(0x141))/0x2*(parseInt(_0x3f23b7(0x15a))/0x3)+-parseInt(_0x3f23b7(0x162))/0x4+parseInt(_0x3f23b7(0x143))/0x5+parseInt(_0x3f23b7(0x140))/0x6*(parseInt(_0x3f23b7(0x166))/0x7)+-parseInt(_0x3f23b7(0x145))/0x8+-parseInt(_0x3f23b7(0x142))/0x9*(parseInt(_0x3f23b7(0x167))/0xa);if(_0x1dead5===_0x26bca2)break;else _0x206f5a['push'](_0x206f5a['shift']());}catch(_0x48156a){_0x206f5a['push'](_0x206f5a['shift']());}}}(a4_0x40b5,0x1a9eb));function a4_0x40b5(){const _0x76b243=['get','__createBinding','userAgent','200072fSupfS','51041zhPJME','findUnique','configurable','173369DIxZEI','10310ZzeuYW','authService','body','writable','__importStar','ipAddress','AuthService','User-Agent','getBlacklistStats','unknown','role','Failed\x20to\x20send\x20failed\x20login\x20notification:','shop','blacklistToken','__setModuleDefault','login','hasOwnProperty','getOwnPropertyDescriptor','42MtCaUG','2ZnTkkl','243EeGRlj','55690UrveZc','../services/telegramBotService','768560gTbJhq','resolve','geo','connection','length','../services/tokenBlacklistService','../config/database','default','user','getOwnPropertyNames','__esModule','then','username','error','logout','json','call','exp','token','Logged\x20out\x20successfully','AuthController','448482ohmwsN','sendLoginNotification','telegramBotService','defineProperty','create'];a4_0x40b5=function(){return _0x76b243;};return a4_0x40b5();}var __createBinding=this&&this[a4_0x284032(0x160)]||(Object[a4_0x284032(0x15e)]?function(_0x3b50ed,_0x18f1aa,_0x2e9b74,_0x4b198d){const _0x38eeaa=a4_0x284032;if(_0x4b198d===undefined)_0x4b198d=_0x2e9b74;var _0xfd1b3=Object[_0x38eeaa(0x13f)](_0x18f1aa,_0x2e9b74);(!_0xfd1b3||(_0x38eeaa(0x15f)in _0xfd1b3?!_0x18f1aa[_0x38eeaa(0x14f)]:_0xfd1b3[_0x38eeaa(0x16a)]||_0xfd1b3[_0x38eeaa(0x165)]))&&(_0xfd1b3={'enumerable':!![],'get':function(){return _0x18f1aa[_0x2e9b74];}}),Object['defineProperty'](_0x3b50ed,_0x4b198d,_0xfd1b3);}:function(_0x4120e7,_0x49d1e6,_0x2e791a,_0x470976){if(_0x470976===undefined)_0x470976=_0x2e791a;_0x4120e7[_0x470976]=_0x49d1e6[_0x2e791a];}),__setModuleDefault=this&&this[a4_0x284032(0x13c)]||(Object['create']?function(_0x4784e8,_0x2e29c6){const _0xeea623=a4_0x284032;Object[_0xeea623(0x15d)](_0x4784e8,_0xeea623(0x14c),{'enumerable':!![],'value':_0x2e29c6});}:function(_0x267185,_0x450535){const _0x937b65=a4_0x284032;_0x267185[_0x937b65(0x14c)]=_0x450535;}),__importStar=this&&this[a4_0x284032(0x16b)]||(function(){var _0x24b5af=function(_0x811e1e){const _0x228230=a4_0x755c;return _0x24b5af=Object[_0x228230(0x14e)]||function(_0x3fdf6c){const _0x27d5b5=_0x228230;var _0x2793d3=[];for(var _0x27d06d in _0x3fdf6c)if(Object['prototype'][_0x27d5b5(0x13e)][_0x27d5b5(0x155)](_0x3fdf6c,_0x27d06d))_0x2793d3[_0x2793d3[_0x27d5b5(0x149)]]=_0x27d06d;return _0x2793d3;},_0x24b5af(_0x811e1e);};return function(_0x2726d6){const _0x6a2cf3=a4_0x755c;if(_0x2726d6&&_0x2726d6[_0x6a2cf3(0x14f)])return _0x2726d6;var _0x51ddd5={};if(_0x2726d6!=null){for(var _0x2b0d76=_0x24b5af(_0x2726d6),_0x4dbf80=0x0;_0x4dbf80<_0x2b0d76[_0x6a2cf3(0x149)];_0x4dbf80++)if(_0x2b0d76[_0x4dbf80]!==_0x6a2cf3(0x14c))__createBinding(_0x51ddd5,_0x2726d6,_0x2b0d76[_0x4dbf80]);}return __setModuleDefault(_0x51ddd5,_0x2726d6),_0x51ddd5;};}());function a4_0x755c(_0x2bb7db,_0x53018b){_0x2bb7db=_0x2bb7db-0x136;const _0x40b544=a4_0x40b5();let _0x755c98=_0x40b544[_0x2bb7db];return _0x755c98;}Object[a4_0x284032(0x15d)](exports,a4_0x284032(0x14f),{'value':!![]}),exports[a4_0x284032(0x159)]=void 0x0;const authService_1=require('../services/authService'),tokenBlacklistService_1=require(a4_0x284032(0x14a)),telegramBotService_1=require(a4_0x284032(0x144));class AuthController{constructor(){const _0x3457de=a4_0x284032;this[_0x3457de(0x13d)]=async(_0x1afc29,_0x2cf03d,_0x1024dd)=>{const _0x29815d=_0x3457de;try{const _0x2c194c=_0x1afc29[_0x29815d(0x169)],_0x57208b=_0x2c194c[_0x29815d(0x16c)]||_0x1afc29['ip']||_0x1afc29[_0x29815d(0x148)]['remoteAddress']||_0x29815d(0x137),_0x5a6636=_0x2c194c[_0x29815d(0x161)]||_0x1afc29[_0x29815d(0x15f)](_0x29815d(0x16e))||_0x29815d(0x137),_0x45a74a=_0x2c194c[_0x29815d(0x147)];let _0x10e58d=![],_0x3e117e=null;try{const _0x356262=await this['authService'][_0x29815d(0x13d)](_0x2c194c);_0x10e58d=!![],_0x356262[_0x29815d(0x138)]===_0x29815d(0x13a)&&_0x356262[_0x29815d(0x14d)]?.['id']&&(_0x3e117e=_0x356262[_0x29815d(0x14d)]['id']),_0x3e117e&&await telegramBotService_1['telegramBotService'][_0x29815d(0x15b)](_0x3e117e,{'username':_0x2c194c['username'],'ipAddress':_0x57208b,'userAgent':_0x5a6636,'geo':_0x45a74a,'timestamp':new Date(),'success':!![]}),_0x2cf03d[_0x29815d(0x154)]({'success':!![],'result':_0x356262});}catch(_0x28a7ae){try{const _0x69fc63=(await Promise[_0x29815d(0x146)]()[_0x29815d(0x150)](()=>__importStar(require(_0x29815d(0x14b)))))[_0x29815d(0x14c)],_0x50e5c0=await _0x69fc63[_0x29815d(0x13a)][_0x29815d(0x164)]({'where':{'username':_0x2c194c[_0x29815d(0x151)]},'select':{'id':!![]}});_0x50e5c0&&await telegramBotService_1[_0x29815d(0x15c)][_0x29815d(0x15b)](_0x50e5c0['id'],{'username':_0x2c194c['username'],'ipAddress':_0x57208b,'userAgent':_0x5a6636,'geo':_0x45a74a,'timestamp':new Date(),'success':![]});}catch(_0xfe50fb){console[_0x29815d(0x152)](_0x29815d(0x139),_0xfe50fb);}throw _0x28a7ae;}}catch(_0x54f5e2){_0x1024dd(_0x54f5e2);}},this['me']=async(_0x891c77,_0x3633b9,_0x41f3f4)=>{const _0x4d6d1a=_0x3457de;try{const _0x32f9d8=_0x891c77['user'];_0x3633b9[_0x4d6d1a(0x154)]({'success':!![],'result':{'id':_0x32f9d8?.['id'],'username':_0x32f9d8?.[_0x4d6d1a(0x151)],'role':_0x32f9d8?.['role']}});}catch(_0x555d5f){_0x41f3f4(_0x555d5f);}},this[_0x3457de(0x153)]=async(_0x12308f,_0x2ead07,_0x1afe86)=>{const _0xa62c70=_0x3457de;try{const _0x10e02a=_0x12308f[_0xa62c70(0x157)],_0x51271e=_0x12308f[_0xa62c70(0x14d)];_0x10e02a&&_0x51271e?.[_0xa62c70(0x156)]&&tokenBlacklistService_1['tokenBlacklistService'][_0xa62c70(0x13b)](_0x10e02a,_0x51271e[_0xa62c70(0x156)]),_0x2ead07['json']({'success':!![],'message':_0xa62c70(0x158)});}catch(_0x3b2b46){_0x1afe86(_0x3b2b46);}},this[_0x3457de(0x136)]=async(_0x128124,_0x327ccd,_0x1a8851)=>{const _0xe7855e=_0x3457de;try{const _0x8830ed=tokenBlacklistService_1['tokenBlacklistService']['getStats']();_0x327ccd[_0xe7855e(0x154)]({'success':!![],'result':_0x8830ed});}catch(_0x512b3d){_0x1a8851(_0x512b3d);}},this[_0x3457de(0x168)]=new authService_1[(_0x3457de(0x16d))]();}}exports[a4_0x284032(0x159)]=AuthController;