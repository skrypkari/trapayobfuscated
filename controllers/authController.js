'use strict';const a4_0x4b020a=a4_0x5a3c;(function(_0x471654,_0x40136c){const _0x194c4a=a4_0x5a3c,_0x1f2756=_0x471654();while(!![]){try{const _0x31db6f=parseInt(_0x194c4a(0x122))/0x1*(parseInt(_0x194c4a(0x119))/0x2)+parseInt(_0x194c4a(0xf7))/0x3+parseInt(_0x194c4a(0x121))/0x4*(parseInt(_0x194c4a(0x10e))/0x5)+parseInt(_0x194c4a(0xfc))/0x6+-parseInt(_0x194c4a(0xf8))/0x7+-parseInt(_0x194c4a(0x113))/0x8+-parseInt(_0x194c4a(0x109))/0x9*(-parseInt(_0x194c4a(0x124))/0xa);if(_0x31db6f===_0x40136c)break;else _0x1f2756['push'](_0x1f2756['shift']());}catch(_0x5191be){_0x1f2756['push'](_0x1f2756['shift']());}}}(a4_0x179b,0x81c4f));function a4_0x5a3c(_0x671203,_0x4b093a){const _0x179b6a=a4_0x179b();return a4_0x5a3c=function(_0x5a3c14,_0x4973bc){_0x5a3c14=_0x5a3c14-0xf1;let _0x1395e5=_0x179b6a[_0x5a3c14];return _0x1395e5;},a4_0x5a3c(_0x671203,_0x4b093a);}var __createBinding=this&&this[a4_0x4b020a(0x106)]||(Object['create']?function(_0x2a229d,_0x28f3aa,_0x4fd0f3,_0x1754bc){const _0x31bcaa=a4_0x4b020a;if(_0x1754bc===undefined)_0x1754bc=_0x4fd0f3;var _0x501705=Object[_0x31bcaa(0x120)](_0x28f3aa,_0x4fd0f3);(!_0x501705||('get'in _0x501705?!_0x28f3aa[_0x31bcaa(0xfb)]:_0x501705[_0x31bcaa(0x118)]||_0x501705[_0x31bcaa(0x11c)]))&&(_0x501705={'enumerable':!![],'get':function(){return _0x28f3aa[_0x4fd0f3];}}),Object['defineProperty'](_0x2a229d,_0x1754bc,_0x501705);}:function(_0x43e2ff,_0x36276c,_0x313a4a,_0x98c8f){if(_0x98c8f===undefined)_0x98c8f=_0x313a4a;_0x43e2ff[_0x98c8f]=_0x36276c[_0x313a4a];}),__setModuleDefault=this&&this[a4_0x4b020a(0x102)]||(Object['create']?function(_0x3e75c3,_0x4979b0){const _0x218e42=a4_0x4b020a;Object[_0x218e42(0xf6)](_0x3e75c3,'default',{'enumerable':!![],'value':_0x4979b0});}:function(_0x2a3c80,_0x5a7eea){const _0x55a4f6=a4_0x4b020a;_0x2a3c80[_0x55a4f6(0x103)]=_0x5a7eea;}),__importStar=this&&this[a4_0x4b020a(0xfd)]||(function(){var _0x5797f9=function(_0x55a5f2){const _0x133303=a4_0x5a3c;return _0x5797f9=Object[_0x133303(0x116)]||function(_0x2398e5){const _0x443063=_0x133303;var _0xf6f694=[];for(var _0x51730e in _0x2398e5)if(Object[_0x443063(0xf9)][_0x443063(0x11f)][_0x443063(0x11e)](_0x2398e5,_0x51730e))_0xf6f694[_0xf6f694[_0x443063(0x100)]]=_0x51730e;return _0xf6f694;},_0x5797f9(_0x55a5f2);};return function(_0x41976b){const _0x3f972e=a4_0x5a3c;if(_0x41976b&&_0x41976b[_0x3f972e(0xfb)])return _0x41976b;var _0x113b4f={};if(_0x41976b!=null){for(var _0x5dfa63=_0x5797f9(_0x41976b),_0x9b7453=0x0;_0x9b7453<_0x5dfa63[_0x3f972e(0x100)];_0x9b7453++)if(_0x5dfa63[_0x9b7453]!==_0x3f972e(0x103))__createBinding(_0x113b4f,_0x41976b,_0x5dfa63[_0x9b7453]);}return __setModuleDefault(_0x113b4f,_0x41976b),_0x113b4f;};}());Object[a4_0x4b020a(0xf6)](exports,a4_0x4b020a(0xfb),{'value':!![]}),exports[a4_0x4b020a(0xff)]=void 0x0;const authService_1=require(a4_0x4b020a(0x101)),tokenBlacklistService_1=require('../services/tokenBlacklistService'),telegramBotService_1=require('../services/telegramBotService');function a4_0x179b(){const _0x5725c0=['4TtjgFt','role','connection','configurable','shop','call','hasOwnProperty','getOwnPropertyDescriptor','612HkIlga','174407MASiOQ','../config/database','45280VAdMIG','then','get','blacklistToken','user','logout','tokenBlacklistService','getBlacklistStats','defineProperty','2053413coIxBc','5795321qZCYYb','prototype','error','__esModule','1313640WHPxiu','__importStar','resolve','AuthController','length','../services/authService','__setModuleDefault','default','Logged\x20out\x20successfully','authService','__createBinding','unknown','exp','549mCwjHP','login','remoteAddress','sendLoginNotification','AuthService','23110gONWjw','telegramBotService','body','username','getStats','7009288KseBCl','token','User-Agent','getOwnPropertyNames','json','writable'];a4_0x179b=function(){return _0x5725c0;};return a4_0x179b();}class AuthController{constructor(){const _0x260df4=a4_0x4b020a;this[_0x260df4(0x10a)]=async(_0x41cdbd,_0xfe0e53,_0x774b07)=>{const _0xa37f4c=_0x260df4;try{const _0x5e0ae4=_0x41cdbd[_0xa37f4c(0x110)],_0x232ed8=_0x41cdbd['ip']||_0x41cdbd[_0xa37f4c(0x11b)][_0xa37f4c(0x10b)]||_0xa37f4c(0x107),_0x58953f=_0x41cdbd[_0xa37f4c(0x126)](_0xa37f4c(0x115))||_0xa37f4c(0x107);let _0x232cdb=![],_0x1845cb=null;try{const _0x5554bb=await this['authService'][_0xa37f4c(0x10a)](_0x5e0ae4);_0x232cdb=!![],_0x5554bb[_0xa37f4c(0x11a)]===_0xa37f4c(0x11d)&&_0x5554bb[_0xa37f4c(0xf2)]?.['id']&&(_0x1845cb=_0x5554bb[_0xa37f4c(0xf2)]['id']),_0x1845cb&&await telegramBotService_1[_0xa37f4c(0x10f)][_0xa37f4c(0x10c)](_0x1845cb,{'username':_0x5e0ae4[_0xa37f4c(0x111)],'ipAddress':_0x232ed8,'userAgent':_0x58953f,'timestamp':new Date(),'success':!![]}),_0xfe0e53[_0xa37f4c(0x117)]({'success':!![],'result':_0x5554bb});}catch(_0xc07f73){try{const _0x1cf811=(await Promise[_0xa37f4c(0xfe)]()[_0xa37f4c(0x125)](()=>__importStar(require(_0xa37f4c(0x123)))))[_0xa37f4c(0x103)],_0x4b4c2f=await _0x1cf811[_0xa37f4c(0x11d)]['findUnique']({'where':{'username':_0x5e0ae4[_0xa37f4c(0x111)]},'select':{'id':!![]}});_0x4b4c2f&&await telegramBotService_1[_0xa37f4c(0x10f)][_0xa37f4c(0x10c)](_0x4b4c2f['id'],{'username':_0x5e0ae4['username'],'ipAddress':_0x232ed8,'userAgent':_0x58953f,'timestamp':new Date(),'success':![]});}catch(_0x5cfbf8){console[_0xa37f4c(0xfa)]('Failed\x20to\x20send\x20failed\x20login\x20notification:',_0x5cfbf8);}throw _0xc07f73;}}catch(_0x1eb1df){_0x774b07(_0x1eb1df);}},this['me']=async(_0x52f3ea,_0x27bedc,_0xf45b6f)=>{const _0x4954fa=_0x260df4;try{const _0x245757=_0x52f3ea[_0x4954fa(0xf2)];_0x27bedc[_0x4954fa(0x117)]({'success':!![],'result':{'id':_0x245757?.['id'],'username':_0x245757?.['username'],'role':_0x245757?.['role']}});}catch(_0x32fd39){_0xf45b6f(_0x32fd39);}},this[_0x260df4(0xf3)]=async(_0x3b6376,_0x3204e9,_0x48db2b)=>{const _0x1bd2e5=_0x260df4;try{const _0x5296e1=_0x3b6376[_0x1bd2e5(0x114)],_0xdde318=_0x3b6376[_0x1bd2e5(0xf2)];_0x5296e1&&_0xdde318?.[_0x1bd2e5(0x108)]&&tokenBlacklistService_1['tokenBlacklistService'][_0x1bd2e5(0xf1)](_0x5296e1,_0xdde318[_0x1bd2e5(0x108)]),_0x3204e9[_0x1bd2e5(0x117)]({'success':!![],'message':_0x1bd2e5(0x104)});}catch(_0x34fbe9){_0x48db2b(_0x34fbe9);}},this[_0x260df4(0xf5)]=async(_0xd6cc37,_0xa99e81,_0x4e7821)=>{const _0x4e1fa7=_0x260df4;try{const _0x2ad82c=tokenBlacklistService_1[_0x4e1fa7(0xf4)][_0x4e1fa7(0x112)]();_0xa99e81['json']({'success':!![],'result':_0x2ad82c});}catch(_0x4c0923){_0x4e7821(_0x4c0923);}},this[_0x260df4(0x105)]=new authService_1[(_0x260df4(0x10d))]();}}exports['AuthController']=AuthController;