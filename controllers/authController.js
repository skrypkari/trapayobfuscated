'use strict';const a4_0x190fd2=a4_0x244e;(function(_0x57c695,_0xe20b09){const _0x239463=a4_0x244e,_0x5e66e7=_0x57c695();while(!![]){try{const _0x274cba=-parseInt(_0x239463(0xf8))/0x1*(-parseInt(_0x239463(0x11a))/0x2)+-parseInt(_0x239463(0x110))/0x3*(parseInt(_0x239463(0x11b))/0x4)+-parseInt(_0x239463(0xfc))/0x5+parseInt(_0x239463(0xfd))/0x6*(parseInt(_0x239463(0xf7))/0x7)+-parseInt(_0x239463(0xf5))/0x8+parseInt(_0x239463(0x109))/0x9*(parseInt(_0x239463(0x113))/0xa)+parseInt(_0x239463(0x101))/0xb;if(_0x274cba===_0xe20b09)break;else _0x5e66e7['push'](_0x5e66e7['shift']());}catch(_0x5573f0){_0x5e66e7['push'](_0x5e66e7['shift']());}}}(a4_0x33f6,0x48ce1));function a4_0x33f6(){const _0x3c35fc=['sendLoginNotification','27580ERUTQe','body','getStats','User-Agent','configurable','getOwnPropertyNames','unknown','119026azaGZG','4DzUqiC','__importStar','shop','defineProperty','then','username','length','2473104GTzJDO','__setModuleDefault','11585kFoWxx','3lmJjMm','role','token','tokenBlacklistService','1511305dByvIK','1302tbOjGE','get','json','blacklistToken','3320075FYomAK','user','create','authService','telegramBotService','error','login','getOwnPropertyDescriptor','549Kwgucj','exp','../services/authService','getBlacklistStats','default','Logged\x20out\x20successfully','connection','294387GRDdzR','AuthService'];a4_0x33f6=function(){return _0x3c35fc;};return a4_0x33f6();}var __createBinding=this&&this['__createBinding']||(Object['create']?function(_0x364ff7,_0x2d260b,_0x369bba,_0x52fa69){const _0x5d6f6f=a4_0x244e;if(_0x52fa69===undefined)_0x52fa69=_0x369bba;var _0x2dea2d=Object[_0x5d6f6f(0x108)](_0x2d260b,_0x369bba);(!_0x2dea2d||(_0x5d6f6f(0xfe)in _0x2dea2d?!_0x2d260b['__esModule']:_0x2dea2d['writable']||_0x2dea2d[_0x5d6f6f(0x117)]))&&(_0x2dea2d={'enumerable':!![],'get':function(){return _0x2d260b[_0x369bba];}}),Object[_0x5d6f6f(0x11e)](_0x364ff7,_0x52fa69,_0x2dea2d);}:function(_0x99d10f,_0x1ed6f3,_0x19ff86,_0x51d1e9){if(_0x51d1e9===undefined)_0x51d1e9=_0x19ff86;_0x99d10f[_0x51d1e9]=_0x1ed6f3[_0x19ff86];}),__setModuleDefault=this&&this[a4_0x190fd2(0xf6)]||(Object[a4_0x190fd2(0x103)]?function(_0x142e0f,_0x30841d){const _0x27f846=a4_0x190fd2;Object[_0x27f846(0x11e)](_0x142e0f,'default',{'enumerable':!![],'value':_0x30841d});}:function(_0x252e40,_0x429aaa){const _0x4b54a1=a4_0x190fd2;_0x252e40[_0x4b54a1(0x10d)]=_0x429aaa;}),__importStar=this&&this[a4_0x190fd2(0x11c)]||(function(){var _0x476efb=function(_0x530fdb){const _0x5da4f2=a4_0x244e;return _0x476efb=Object[_0x5da4f2(0x118)]||function(_0x49ccd4){const _0x28a986=_0x5da4f2;var _0x1003c4=[];for(var _0x28fff0 in _0x49ccd4)if(Object['prototype']['hasOwnProperty']['call'](_0x49ccd4,_0x28fff0))_0x1003c4[_0x1003c4[_0x28a986(0xf4)]]=_0x28fff0;return _0x1003c4;},_0x476efb(_0x530fdb);};return function(_0x346dc6){const _0x411110=a4_0x244e;if(_0x346dc6&&_0x346dc6['__esModule'])return _0x346dc6;var _0x329a6e={};if(_0x346dc6!=null){for(var _0x5344f7=_0x476efb(_0x346dc6),_0x3889a9=0x0;_0x3889a9<_0x5344f7['length'];_0x3889a9++)if(_0x5344f7[_0x3889a9]!==_0x411110(0x10d))__createBinding(_0x329a6e,_0x346dc6,_0x5344f7[_0x3889a9]);}return __setModuleDefault(_0x329a6e,_0x346dc6),_0x329a6e;};}());Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['AuthController']=void 0x0;function a4_0x244e(_0x534d89,_0xb8f83d){const _0x33f689=a4_0x33f6();return a4_0x244e=function(_0x244e4a,_0x5a42ff){_0x244e4a=_0x244e4a-0xf3;let _0x20f8c7=_0x33f689[_0x244e4a];return _0x20f8c7;},a4_0x244e(_0x534d89,_0xb8f83d);}const authService_1=require(a4_0x190fd2(0x10b)),tokenBlacklistService_1=require('../services/tokenBlacklistService'),telegramBotService_1=require('../services/telegramBotService');class AuthController{constructor(){const _0x4b7e0a=a4_0x190fd2;this[_0x4b7e0a(0x107)]=async(_0x252f64,_0x561b0c,_0x79510a)=>{const _0x3e13e5=_0x4b7e0a;try{const _0x46a5de=_0x252f64[_0x3e13e5(0x114)],_0x1d21c9=_0x252f64['ip']||_0x252f64[_0x3e13e5(0x10f)]['remoteAddress']||_0x3e13e5(0x119),_0x552f91=_0x252f64[_0x3e13e5(0xfe)](_0x3e13e5(0x116))||'unknown';let _0x30071e=![],_0x377dd4=null;try{const _0x35cdfc=await this[_0x3e13e5(0x104)][_0x3e13e5(0x107)](_0x46a5de);_0x30071e=!![],_0x35cdfc[_0x3e13e5(0xf9)]==='shop'&&_0x35cdfc[_0x3e13e5(0x102)]?.['id']&&(_0x377dd4=_0x35cdfc[_0x3e13e5(0x102)]['id']),_0x377dd4&&await telegramBotService_1['telegramBotService'][_0x3e13e5(0x112)](_0x377dd4,{'username':_0x46a5de[_0x3e13e5(0xf3)],'ipAddress':_0x1d21c9,'userAgent':_0x552f91,'timestamp':new Date(),'success':!![]}),_0x561b0c[_0x3e13e5(0xff)]({'success':!![],'result':_0x35cdfc});}catch(_0x17f085){try{const _0x5c7fa4=(await Promise['resolve']()[_0x3e13e5(0x11f)](()=>__importStar(require('../config/database'))))['default'],_0x21719d=await _0x5c7fa4[_0x3e13e5(0x11d)]['findUnique']({'where':{'username':_0x46a5de[_0x3e13e5(0xf3)]},'select':{'id':!![]}});_0x21719d&&await telegramBotService_1[_0x3e13e5(0x105)][_0x3e13e5(0x112)](_0x21719d['id'],{'username':_0x46a5de[_0x3e13e5(0xf3)],'ipAddress':_0x1d21c9,'userAgent':_0x552f91,'timestamp':new Date(),'success':![]});}catch(_0x44a7d7){console[_0x3e13e5(0x106)]('Failed\x20to\x20send\x20failed\x20login\x20notification:',_0x44a7d7);}throw _0x17f085;}}catch(_0x47d9ae){_0x79510a(_0x47d9ae);}},this['me']=async(_0x13e53d,_0x4ac326,_0x501a17)=>{const _0x1ccb5c=_0x4b7e0a;try{const _0x5e33a6=_0x13e53d[_0x1ccb5c(0x102)];_0x4ac326[_0x1ccb5c(0xff)]({'success':!![],'result':{'id':_0x5e33a6?.['id'],'username':_0x5e33a6?.['username'],'role':_0x5e33a6?.[_0x1ccb5c(0xf9)]}});}catch(_0x284314){_0x501a17(_0x284314);}},this['logout']=async(_0x338cab,_0xae345b,_0x2328ad)=>{const _0x2d5b34=_0x4b7e0a;try{const _0x138af1=_0x338cab[_0x2d5b34(0xfa)],_0x2a8988=_0x338cab[_0x2d5b34(0x102)];_0x138af1&&_0x2a8988?.[_0x2d5b34(0x10a)]&&tokenBlacklistService_1[_0x2d5b34(0xfb)][_0x2d5b34(0x100)](_0x138af1,_0x2a8988[_0x2d5b34(0x10a)]),_0xae345b[_0x2d5b34(0xff)]({'success':!![],'message':_0x2d5b34(0x10e)});}catch(_0x44000c){_0x2328ad(_0x44000c);}},this[_0x4b7e0a(0x10c)]=async(_0x1de104,_0x528e55,_0xd616f5)=>{const _0x68a722=_0x4b7e0a;try{const _0x44d257=tokenBlacklistService_1[_0x68a722(0xfb)][_0x68a722(0x115)]();_0x528e55['json']({'success':!![],'result':_0x44d257});}catch(_0xb531b1){_0xd616f5(_0xb531b1);}},this[_0x4b7e0a(0x104)]=new authService_1[(_0x4b7e0a(0x111))]();}}exports['AuthController']=AuthController;