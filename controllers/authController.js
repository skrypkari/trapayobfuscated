'use strict';function a4_0x1be5(){const _0x19e44d=['26RJdfgx','unknown','AuthController','role','User-Agent','224aumkZI','default','findUnique','exp','then','username','getStats','10SXMqsi','1263771kkZTsD','token','getBlacklistStats','login','337923ZxOVXf','getOwnPropertyDescriptor','shop','resolve','create','2WPzpQu','user','__createBinding','../services/tokenBlacklistService','768496mVDkXG','error','sendLoginNotification','11KyWHyI','writable','__esModule','json','484776chWXhO','length','6906950bSFGOM','../services/authService','__importStar','prototype','blacklistToken','8110068RcbBHe','64rreTnT','configurable','authService','call','get','Failed\x20to\x20send\x20failed\x20login\x20notification:','../config/database','defineProperty','remoteAddress','../services/telegramBotService','connection','telegramBotService','342KjVrEK','tokenBlacklistService','hasOwnProperty'];a4_0x1be5=function(){return _0x19e44d;};return a4_0x1be5();}const a4_0x17fc60=a4_0x23cf;(function(_0x3a51b1,_0x481e49){const _0x499c44=a4_0x23cf,_0x63710a=_0x3a51b1();while(!![]){try{const _0x370ef0=parseInt(_0x499c44(0x202))/0x1+parseInt(_0x499c44(0x207))/0x2*(-parseInt(_0x499c44(0x1fe))/0x3)+-parseInt(_0x499c44(0x20b))/0x4*(-parseInt(_0x499c44(0x1fd))/0x5)+-parseInt(_0x499c44(0x1ee))/0x6*(-parseInt(_0x499c44(0x1f6))/0x7)+parseInt(_0x499c44(0x21a))/0x8*(-parseInt(_0x499c44(0x212))/0x9)+-parseInt(_0x499c44(0x214))/0xa*(parseInt(_0x499c44(0x20e))/0xb)+parseInt(_0x499c44(0x219))/0xc*(parseInt(_0x499c44(0x1f1))/0xd);if(_0x370ef0===_0x481e49)break;else _0x63710a['push'](_0x63710a['shift']());}catch(_0x3da9b1){_0x63710a['push'](_0x63710a['shift']());}}}(a4_0x1be5,0x82149));var __createBinding=this&&this[a4_0x17fc60(0x209)]||(Object[a4_0x17fc60(0x206)]?function(_0x52da3c,_0x4c62c7,_0x591a29,_0xbfcd98){const _0x4a3a4a=a4_0x17fc60;if(_0xbfcd98===undefined)_0xbfcd98=_0x591a29;var _0x853f8b=Object[_0x4a3a4a(0x203)](_0x4c62c7,_0x591a29);(!_0x853f8b||('get'in _0x853f8b?!_0x4c62c7[_0x4a3a4a(0x210)]:_0x853f8b[_0x4a3a4a(0x20f)]||_0x853f8b[_0x4a3a4a(0x21b)]))&&(_0x853f8b={'enumerable':!![],'get':function(){return _0x4c62c7[_0x591a29];}}),Object[_0x4a3a4a(0x1e9)](_0x52da3c,_0xbfcd98,_0x853f8b);}:function(_0x21cd5e,_0x4dfa13,_0x2ffd07,_0x206e06){if(_0x206e06===undefined)_0x206e06=_0x2ffd07;_0x21cd5e[_0x206e06]=_0x4dfa13[_0x2ffd07];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a4_0x17fc60(0x206)]?function(_0x530451,_0x2d08ed){const _0xee771f=a4_0x17fc60;Object[_0xee771f(0x1e9)](_0x530451,_0xee771f(0x1f7),{'enumerable':!![],'value':_0x2d08ed});}:function(_0x382599,_0x3c3732){_0x382599['default']=_0x3c3732;}),__importStar=this&&this[a4_0x17fc60(0x216)]||(function(){var _0x532f1b=function(_0x4b7e45){return _0x532f1b=Object['getOwnPropertyNames']||function(_0x5a3921){const _0x4461ec=a4_0x23cf;var _0xe4e26e=[];for(var _0x1602ad in _0x5a3921)if(Object[_0x4461ec(0x217)][_0x4461ec(0x1f0)][_0x4461ec(0x21d)](_0x5a3921,_0x1602ad))_0xe4e26e[_0xe4e26e[_0x4461ec(0x213)]]=_0x1602ad;return _0xe4e26e;},_0x532f1b(_0x4b7e45);};return function(_0x41b386){const _0x4c270=a4_0x23cf;if(_0x41b386&&_0x41b386[_0x4c270(0x210)])return _0x41b386;var _0x109c48={};if(_0x41b386!=null){for(var _0xfd7e30=_0x532f1b(_0x41b386),_0x2ced60=0x0;_0x2ced60<_0xfd7e30['length'];_0x2ced60++)if(_0xfd7e30[_0x2ced60]!==_0x4c270(0x1f7))__createBinding(_0x109c48,_0x41b386,_0xfd7e30[_0x2ced60]);}return __setModuleDefault(_0x109c48,_0x41b386),_0x109c48;};}());function a4_0x23cf(_0x5168b1,_0x43a6d8){const _0x1be56c=a4_0x1be5();return a4_0x23cf=function(_0x23cf8e,_0x4cbd23){_0x23cf8e=_0x23cf8e-0x1e9;let _0x5abb3b=_0x1be56c[_0x23cf8e];return _0x5abb3b;},a4_0x23cf(_0x5168b1,_0x43a6d8);}Object[a4_0x17fc60(0x1e9)](exports,a4_0x17fc60(0x210),{'value':!![]}),exports['AuthController']=void 0x0;const authService_1=require(a4_0x17fc60(0x215)),tokenBlacklistService_1=require(a4_0x17fc60(0x20a)),telegramBotService_1=require(a4_0x17fc60(0x1eb));class AuthController{constructor(){const _0x18a18c=a4_0x17fc60;this[_0x18a18c(0x201)]=async(_0x366173,_0x300f65,_0x705df8)=>{const _0x56453b=_0x18a18c;try{const _0x375865=_0x366173['body'],_0x17f32f=_0x366173['ip']||_0x366173[_0x56453b(0x1ec)][_0x56453b(0x1ea)]||'unknown',_0x4ca487=_0x366173[_0x56453b(0x21e)](_0x56453b(0x1f5))||_0x56453b(0x1f2);let _0x58c475=![],_0x3a32f3=null;try{const _0x1b8c9f=await this[_0x56453b(0x21c)]['login'](_0x375865);_0x58c475=!![],_0x1b8c9f[_0x56453b(0x1f4)]==='shop'&&_0x1b8c9f[_0x56453b(0x208)]?.['id']&&(_0x3a32f3=_0x1b8c9f[_0x56453b(0x208)]['id']),_0x3a32f3&&await telegramBotService_1['telegramBotService'][_0x56453b(0x20d)](_0x3a32f3,{'username':_0x375865[_0x56453b(0x1fb)],'ipAddress':_0x17f32f,'userAgent':_0x4ca487,'timestamp':new Date(),'success':!![]}),_0x300f65[_0x56453b(0x211)]({'success':!![],'result':_0x1b8c9f});}catch(_0x58f2d8){try{const _0x362c1f=(await Promise[_0x56453b(0x205)]()[_0x56453b(0x1fa)](()=>__importStar(require(_0x56453b(0x220)))))[_0x56453b(0x1f7)],_0x2f0b3a=await _0x362c1f[_0x56453b(0x204)][_0x56453b(0x1f8)]({'where':{'username':_0x375865[_0x56453b(0x1fb)]},'select':{'id':!![]}});_0x2f0b3a&&await telegramBotService_1[_0x56453b(0x1ed)][_0x56453b(0x20d)](_0x2f0b3a['id'],{'username':_0x375865[_0x56453b(0x1fb)],'ipAddress':_0x17f32f,'userAgent':_0x4ca487,'timestamp':new Date(),'success':![]});}catch(_0x20418a){console[_0x56453b(0x20c)](_0x56453b(0x21f),_0x20418a);}throw _0x58f2d8;}}catch(_0x9e2f59){_0x705df8(_0x9e2f59);}},this['me']=async(_0x5d28a8,_0xab0ac3,_0x473d52)=>{const _0x418049=_0x18a18c;try{const _0x4e788c=_0x5d28a8[_0x418049(0x208)];_0xab0ac3['json']({'success':!![],'result':{'id':_0x4e788c?.['id'],'username':_0x4e788c?.[_0x418049(0x1fb)],'role':_0x4e788c?.[_0x418049(0x1f4)]}});}catch(_0x2a9761){_0x473d52(_0x2a9761);}},this['logout']=async(_0x33298a,_0x5a4190,_0x180c6d)=>{const _0x238a05=_0x18a18c;try{const _0x3ae3a7=_0x33298a[_0x238a05(0x1ff)],_0xd27188=_0x33298a[_0x238a05(0x208)];_0x3ae3a7&&_0xd27188?.[_0x238a05(0x1f9)]&&tokenBlacklistService_1[_0x238a05(0x1ef)][_0x238a05(0x218)](_0x3ae3a7,_0xd27188[_0x238a05(0x1f9)]),_0x5a4190[_0x238a05(0x211)]({'success':!![],'message':'Logged\x20out\x20successfully'});}catch(_0x305abc){_0x180c6d(_0x305abc);}},this[_0x18a18c(0x200)]=async(_0x513d99,_0x5da1cd,_0x2b6264)=>{const _0x56e7c1=_0x18a18c;try{const _0x443764=tokenBlacklistService_1[_0x56e7c1(0x1ef)][_0x56e7c1(0x1fc)]();_0x5da1cd[_0x56e7c1(0x211)]({'success':!![],'result':_0x443764});}catch(_0x37de17){_0x2b6264(_0x37de17);}},this[_0x18a18c(0x21c)]=new authService_1['AuthService']();}}exports[a4_0x17fc60(0x1f3)]=AuthController;