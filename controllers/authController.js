'use strict';const a4_0x3092fb=a4_0x46a8;function a4_0x7d3f(){const _0x1e1b0d=['unknown','AuthController','create','authService','findUnique','json','logout','defineProperty','username','role','1095bKobtJ','sendLoginNotification','11GNLwTv','2086fiZjep','login','116HxhkUj','shop','tokenBlacklistService','3540402HSfSQV','../services/telegramBotService','__createBinding','AuthService','hasOwnProperty','Failed\x20to\x20send\x20failed\x20login\x20notification:','user','1789580mQfxwx','exp','../services/tokenBlacklistService','error','../config/database','prototype','getBlacklistStats','default','__importStar','17896XYIDXW','length','5791tIWCRm','getOwnPropertyDescriptor','get','__esModule','telegramBotService','User-Agent','../services/authService','token','remoteAddress','15328xocxHz','connection','1660902lncxNs','getStats','resolve','__setModuleDefault','614358PNEyAn','Logged\x20out\x20successfully','blacklistToken','body'];a4_0x7d3f=function(){return _0x1e1b0d;};return a4_0x7d3f();}function a4_0x46a8(_0x294e94,_0x2f37f4){const _0x7d3f58=a4_0x7d3f();return a4_0x46a8=function(_0x46a898,_0x3520d0){_0x46a898=_0x46a898-0x1a6;let _0x4da829=_0x7d3f58[_0x46a898];return _0x4da829;},a4_0x46a8(_0x294e94,_0x2f37f4);}(function(_0x35ca39,_0x375ecc){const _0x4166bb=a4_0x46a8,_0x40e791=_0x35ca39();while(!![]){try{const _0x597cc3=parseInt(_0x4166bb(0x1b4))/0x1*(parseInt(_0x4166bb(0x1d6))/0x2)+-parseInt(_0x4166bb(0x1bf))/0x3+-parseInt(_0x4166bb(0x1bd))/0x4*(parseInt(_0x4166bb(0x1d1))/0x5)+parseInt(_0x4166bb(0x1d9))/0x6+-parseInt(_0x4166bb(0x1d4))/0x7*(-parseInt(_0x4166bb(0x1b2))/0x8)+parseInt(_0x4166bb(0x1c3))/0x9+parseInt(_0x4166bb(0x1a9))/0xa*(parseInt(_0x4166bb(0x1d3))/0xb);if(_0x597cc3===_0x375ecc)break;else _0x40e791['push'](_0x40e791['shift']());}catch(_0x561989){_0x40e791['push'](_0x40e791['shift']());}}}(a4_0x7d3f,0x6d1e5));var __createBinding=this&&this[a4_0x3092fb(0x1db)]||(Object[a4_0x3092fb(0x1c9)]?function(_0x3fdd0a,_0xfbccde,_0x271a2c,_0xb819a){const _0x4da678=a4_0x3092fb;if(_0xb819a===undefined)_0xb819a=_0x271a2c;var _0x2a54f1=Object[_0x4da678(0x1b5)](_0xfbccde,_0x271a2c);(!_0x2a54f1||(_0x4da678(0x1b6)in _0x2a54f1?!_0xfbccde[_0x4da678(0x1b7)]:_0x2a54f1['writable']||_0x2a54f1['configurable']))&&(_0x2a54f1={'enumerable':!![],'get':function(){return _0xfbccde[_0x271a2c];}}),Object[_0x4da678(0x1ce)](_0x3fdd0a,_0xb819a,_0x2a54f1);}:function(_0x28f0c5,_0x34daca,_0xbe4379,_0x472959){if(_0x472959===undefined)_0x472959=_0xbe4379;_0x28f0c5[_0x472959]=_0x34daca[_0xbe4379];}),__setModuleDefault=this&&this[a4_0x3092fb(0x1c2)]||(Object[a4_0x3092fb(0x1c9)]?function(_0xec9b82,_0x40edaa){const _0x539632=a4_0x3092fb;Object['defineProperty'](_0xec9b82,_0x539632(0x1b0),{'enumerable':!![],'value':_0x40edaa});}:function(_0x2acc47,_0x296b06){const _0x55ce7e=a4_0x3092fb;_0x2acc47[_0x55ce7e(0x1b0)]=_0x296b06;}),__importStar=this&&this[a4_0x3092fb(0x1b1)]||(function(){var _0x34bbf4=function(_0x5bf4ef){return _0x34bbf4=Object['getOwnPropertyNames']||function(_0x288223){const _0x269918=a4_0x46a8;var _0x5d95d9=[];for(var _0xb17748 in _0x288223)if(Object[_0x269918(0x1ae)][_0x269918(0x1a6)]['call'](_0x288223,_0xb17748))_0x5d95d9[_0x5d95d9[_0x269918(0x1b3)]]=_0xb17748;return _0x5d95d9;},_0x34bbf4(_0x5bf4ef);};return function(_0x579fcc){const _0x4d1b5c=a4_0x46a8;if(_0x579fcc&&_0x579fcc[_0x4d1b5c(0x1b7)])return _0x579fcc;var _0x5bf26d={};if(_0x579fcc!=null){for(var _0x597ec9=_0x34bbf4(_0x579fcc),_0x5bef8c=0x0;_0x5bef8c<_0x597ec9[_0x4d1b5c(0x1b3)];_0x5bef8c++)if(_0x597ec9[_0x5bef8c]!==_0x4d1b5c(0x1b0))__createBinding(_0x5bf26d,_0x579fcc,_0x597ec9[_0x5bef8c]);}return __setModuleDefault(_0x5bf26d,_0x579fcc),_0x5bf26d;};}());Object[a4_0x3092fb(0x1ce)](exports,a4_0x3092fb(0x1b7),{'value':!![]}),exports[a4_0x3092fb(0x1c8)]=void 0x0;const authService_1=require(a4_0x3092fb(0x1ba)),tokenBlacklistService_1=require(a4_0x3092fb(0x1ab)),telegramBotService_1=require(a4_0x3092fb(0x1da));class AuthController{constructor(){const _0x326621=a4_0x3092fb;this[_0x326621(0x1d5)]=async(_0x464b63,_0x5402ba,_0x2eb8e7)=>{const _0x1a7a6b=_0x326621;try{const _0x3f8de5=_0x464b63[_0x1a7a6b(0x1c6)],_0x548bba=_0x464b63['ip']||_0x464b63[_0x1a7a6b(0x1be)][_0x1a7a6b(0x1bc)]||_0x1a7a6b(0x1c7),_0x5b2a23=_0x464b63[_0x1a7a6b(0x1b6)](_0x1a7a6b(0x1b9))||'unknown';let _0x350e5c=![],_0x5bf410=null;try{const _0x4238c8=await this[_0x1a7a6b(0x1ca)][_0x1a7a6b(0x1d5)](_0x3f8de5);_0x350e5c=!![],_0x4238c8[_0x1a7a6b(0x1d0)]===_0x1a7a6b(0x1d7)&&_0x4238c8['user']?.['id']&&(_0x5bf410=_0x4238c8['user']['id']),_0x5bf410&&await telegramBotService_1[_0x1a7a6b(0x1b8)][_0x1a7a6b(0x1d2)](_0x5bf410,{'username':_0x3f8de5[_0x1a7a6b(0x1cf)],'ipAddress':_0x548bba,'userAgent':_0x5b2a23,'timestamp':new Date(),'success':!![]}),_0x5402ba[_0x1a7a6b(0x1cc)]({'success':!![],'result':_0x4238c8});}catch(_0x3bb8e2){try{const _0x359fa6=(await Promise[_0x1a7a6b(0x1c1)]()['then'](()=>__importStar(require(_0x1a7a6b(0x1ad)))))[_0x1a7a6b(0x1b0)],_0x1f74b7=await _0x359fa6[_0x1a7a6b(0x1d7)][_0x1a7a6b(0x1cb)]({'where':{'username':_0x3f8de5[_0x1a7a6b(0x1cf)]},'select':{'id':!![]}});_0x1f74b7&&await telegramBotService_1[_0x1a7a6b(0x1b8)][_0x1a7a6b(0x1d2)](_0x1f74b7['id'],{'username':_0x3f8de5[_0x1a7a6b(0x1cf)],'ipAddress':_0x548bba,'userAgent':_0x5b2a23,'timestamp':new Date(),'success':![]});}catch(_0x435cd4){console[_0x1a7a6b(0x1ac)](_0x1a7a6b(0x1a7),_0x435cd4);}throw _0x3bb8e2;}}catch(_0x31edd5){_0x2eb8e7(_0x31edd5);}},this['me']=async(_0x3bb96d,_0x372e57,_0x3b249d)=>{const _0x1e8fbf=_0x326621;try{const _0x4993b9=_0x3bb96d['user'];_0x372e57[_0x1e8fbf(0x1cc)]({'success':!![],'result':{'id':_0x4993b9?.['id'],'username':_0x4993b9?.['username'],'role':_0x4993b9?.[_0x1e8fbf(0x1d0)]}});}catch(_0x3132f6){_0x3b249d(_0x3132f6);}},this[_0x326621(0x1cd)]=async(_0x2f57b0,_0xbdd020,_0x52a600)=>{const _0x2fa1db=_0x326621;try{const _0x164539=_0x2f57b0[_0x2fa1db(0x1bb)],_0x3fa234=_0x2f57b0[_0x2fa1db(0x1a8)];_0x164539&&_0x3fa234?.['exp']&&tokenBlacklistService_1[_0x2fa1db(0x1d8)][_0x2fa1db(0x1c5)](_0x164539,_0x3fa234[_0x2fa1db(0x1aa)]),_0xbdd020['json']({'success':!![],'message':_0x2fa1db(0x1c4)});}catch(_0x549539){_0x52a600(_0x549539);}},this[_0x326621(0x1af)]=async(_0x36c349,_0x3dbb92,_0x178a81)=>{const _0x3f8fc7=_0x326621;try{const _0x1085ea=tokenBlacklistService_1[_0x3f8fc7(0x1d8)][_0x3f8fc7(0x1c0)]();_0x3dbb92['json']({'success':!![],'result':_0x1085ea});}catch(_0x4aa76b){_0x178a81(_0x4aa76b);}},this[_0x326621(0x1ca)]=new authService_1[(_0x326621(0x1dc))]();}}exports[a4_0x3092fb(0x1c8)]=AuthController;