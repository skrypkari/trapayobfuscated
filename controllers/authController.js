'use strict';const a4_0x139c96=a4_0x6e1d;(function(_0x5d5da1,_0x495388){const _0x283001=a4_0x6e1d,_0x5f0516=_0x5d5da1();while(!![]){try{const _0x4a5a4f=parseInt(_0x283001(0x94))/0x1+-parseInt(_0x283001(0x88))/0x2*(-parseInt(_0x283001(0x97))/0x3)+-parseInt(_0x283001(0x8e))/0x4+parseInt(_0x283001(0x80))/0x5*(-parseInt(_0x283001(0x70))/0x6)+-parseInt(_0x283001(0x77))/0x7+parseInt(_0x283001(0x8f))/0x8*(parseInt(_0x283001(0x71))/0x9)+parseInt(_0x283001(0x85))/0xa;if(_0x4a5a4f===_0x495388)break;else _0x5f0516['push'](_0x5f0516['shift']());}catch(_0x5e3be9){_0x5f0516['push'](_0x5f0516['shift']());}}}(a4_0x1681,0x7d433));var __createBinding=this&&this[a4_0x139c96(0x78)]||(Object[a4_0x139c96(0x8c)]?function(_0x53eb61,_0x2ffadd,_0x26b504,_0x564b9f){const _0x40121f=a4_0x139c96;if(_0x564b9f===undefined)_0x564b9f=_0x26b504;var _0x1249af=Object[_0x40121f(0x6f)](_0x2ffadd,_0x26b504);(!_0x1249af||(_0x40121f(0x7f)in _0x1249af?!_0x2ffadd[_0x40121f(0x92)]:_0x1249af[_0x40121f(0x90)]||_0x1249af[_0x40121f(0x69)]))&&(_0x1249af={'enumerable':!![],'get':function(){return _0x2ffadd[_0x26b504];}}),Object['defineProperty'](_0x53eb61,_0x564b9f,_0x1249af);}:function(_0x578943,_0x64f33,_0x48a3c9,_0x2af1fc){if(_0x2af1fc===undefined)_0x2af1fc=_0x48a3c9;_0x578943[_0x2af1fc]=_0x64f33[_0x48a3c9];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a4_0x139c96(0x8c)]?function(_0x3aec58,_0x2ff1db){const _0x14b907=a4_0x139c96;Object[_0x14b907(0x83)](_0x3aec58,_0x14b907(0x8a),{'enumerable':!![],'value':_0x2ff1db});}:function(_0x2ce048,_0x87446f){const _0x48c8f3=a4_0x139c96;_0x2ce048[_0x48c8f3(0x8a)]=_0x87446f;}),__importStar=this&&this[a4_0x139c96(0x9a)]||(function(){var _0x4b0aa0=function(_0x200a67){return _0x4b0aa0=Object['getOwnPropertyNames']||function(_0x4de2db){const _0x3ef3f2=a4_0x6e1d;var _0x425526=[];for(var _0x58f1fc in _0x4de2db)if(Object[_0x3ef3f2(0x7c)][_0x3ef3f2(0x87)][_0x3ef3f2(0x6d)](_0x4de2db,_0x58f1fc))_0x425526[_0x425526['length']]=_0x58f1fc;return _0x425526;},_0x4b0aa0(_0x200a67);};return function(_0x24b81f){const _0x11c8ee=a4_0x6e1d;if(_0x24b81f&&_0x24b81f['__esModule'])return _0x24b81f;var _0x415bcd={};if(_0x24b81f!=null){for(var _0x2c6fc6=_0x4b0aa0(_0x24b81f),_0x16104b=0x0;_0x16104b<_0x2c6fc6[_0x11c8ee(0x79)];_0x16104b++)if(_0x2c6fc6[_0x16104b]!==_0x11c8ee(0x8a))__createBinding(_0x415bcd,_0x24b81f,_0x2c6fc6[_0x16104b]);}return __setModuleDefault(_0x415bcd,_0x24b81f),_0x415bcd;};}());Object['defineProperty'](exports,a4_0x139c96(0x92),{'value':!![]}),exports[a4_0x139c96(0x76)]=void 0x0;const authService_1=require(a4_0x139c96(0x81)),tokenBlacklistService_1=require(a4_0x139c96(0x95)),telegramBotService_1=require(a4_0x139c96(0x91));class AuthController{constructor(){const _0x41fd59=a4_0x139c96;this['login']=async(_0x409f12,_0x2ccaee,_0x426627)=>{const _0x381939=a4_0x6e1d;try{const _0x2c48cf=_0x409f12[_0x381939(0x98)],_0x41cc49=_0x409f12['ip']||_0x409f12[_0x381939(0x7a)][_0x381939(0x9c)]||_0x381939(0x6e),_0x196eca=_0x409f12[_0x381939(0x7f)]('User-Agent')||_0x381939(0x6e);let _0x1b8c67=![],_0x512a29=null;try{const _0x29333d=await this['authService'][_0x381939(0x99)](_0x2c48cf);_0x1b8c67=!![],_0x29333d[_0x381939(0x6b)]===_0x381939(0x75)&&_0x29333d[_0x381939(0x84)]?.['id']&&(_0x512a29=_0x29333d[_0x381939(0x84)]['id']),_0x512a29&&await telegramBotService_1[_0x381939(0x72)][_0x381939(0x7d)](_0x512a29,{'username':_0x2c48cf['username'],'ipAddress':_0x41cc49,'userAgent':_0x196eca,'timestamp':new Date(),'success':!![]}),_0x2ccaee[_0x381939(0x8b)]({'success':!![],'result':_0x29333d});}catch(_0xcc36c8){try{const _0x206b28=(await Promise[_0x381939(0x6c)]()['then'](()=>__importStar(require('../config/database'))))['default'],_0x1538e0=await _0x206b28['shop'][_0x381939(0x8d)]({'where':{'username':_0x2c48cf['username']},'select':{'id':!![]}});_0x1538e0&&await telegramBotService_1[_0x381939(0x72)][_0x381939(0x7d)](_0x1538e0['id'],{'username':_0x2c48cf[_0x381939(0x86)],'ipAddress':_0x41cc49,'userAgent':_0x196eca,'timestamp':new Date(),'success':![]});}catch(_0x5a646e){console[_0x381939(0x82)](_0x381939(0x6a),_0x5a646e);}throw _0xcc36c8;}}catch(_0x1500fd){_0x426627(_0x1500fd);}},this['me']=async(_0x43ffcb,_0x2709ea,_0x29e558)=>{const _0x492126=a4_0x6e1d;try{const _0x5b50a1=_0x43ffcb[_0x492126(0x84)];_0x2709ea[_0x492126(0x8b)]({'success':!![],'result':{'id':_0x5b50a1?.['id'],'username':_0x5b50a1?.['username'],'role':_0x5b50a1?.[_0x492126(0x6b)]}});}catch(_0x1725bd){_0x29e558(_0x1725bd);}},this[_0x41fd59(0x96)]=async(_0x1544a2,_0xa8b1ac,_0x3fb385)=>{const _0x2f5cdb=_0x41fd59;try{const _0x47e93b=_0x1544a2[_0x2f5cdb(0x74)],_0xab7db9=_0x1544a2[_0x2f5cdb(0x84)];_0x47e93b&&_0xab7db9?.[_0x2f5cdb(0x73)]&&tokenBlacklistService_1[_0x2f5cdb(0x7e)]['blacklistToken'](_0x47e93b,_0xab7db9[_0x2f5cdb(0x73)]),_0xa8b1ac[_0x2f5cdb(0x8b)]({'success':!![],'message':_0x2f5cdb(0x89)});}catch(_0x16b820){_0x3fb385(_0x16b820);}},this[_0x41fd59(0x93)]=async(_0x1fb132,_0x1b14cd,_0x238358)=>{const _0x44114c=_0x41fd59;try{const _0x1ff5bd=tokenBlacklistService_1[_0x44114c(0x7e)][_0x44114c(0x7b)]();_0x1b14cd[_0x44114c(0x8b)]({'success':!![],'result':_0x1ff5bd});}catch(_0x5e4a7a){_0x238358(_0x5e4a7a);}},this[_0x41fd59(0x9b)]=new authService_1['AuthService']();}}function a4_0x6e1d(_0x10136a,_0x2329d2){const _0x1681e6=a4_0x1681();return a4_0x6e1d=function(_0x6e1d12,_0x5d3a46){_0x6e1d12=_0x6e1d12-0x69;let _0x236344=_0x1681e6[_0x6e1d12];return _0x236344;},a4_0x6e1d(_0x10136a,_0x2329d2);}function a4_0x1681(){const _0x4dc27=['Logged\x20out\x20successfully','default','json','create','findUnique','2723236DHTtCm','56RxIfTk','writable','../services/telegramBotService','__esModule','getBlacklistStats','1014815ngirFO','../services/tokenBlacklistService','logout','9IdKWWq','body','login','__importStar','authService','remoteAddress','configurable','Failed\x20to\x20send\x20failed\x20login\x20notification:','role','resolve','call','unknown','getOwnPropertyDescriptor','4507806SuloxA','972882aFkwuA','telegramBotService','exp','token','shop','AuthController','6233745xnYRAP','__createBinding','length','connection','getStats','prototype','sendLoginNotification','tokenBlacklistService','get','5aKQPPU','../services/authService','error','defineProperty','user','4823240vEraFW','username','hasOwnProperty','387930CQlEVG'];a4_0x1681=function(){return _0x4dc27;};return a4_0x1681();}exports[a4_0x139c96(0x76)]=AuthController;