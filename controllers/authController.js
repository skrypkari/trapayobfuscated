'use strict';function a4_0xa83f(_0x79680e,_0x3f0d40){const _0x562c5f=a4_0x562c();return a4_0xa83f=function(_0xa83ffc,_0x288ef8){_0xa83ffc=_0xa83ffc-0x7f;let _0x4bbf0f=_0x562c5f[_0xa83ffc];return _0x4bbf0f;},a4_0xa83f(_0x79680e,_0x3f0d40);}function a4_0x562c(){const _0x43647f=['then','985736gWHVnP','body','login','User-Agent','__esModule','../services/telegramBotService','50UngSZG','hasOwnProperty','shop','get','create','1938357mOiFqQ','blacklistToken','getStats','841315FMCkFd','defineProperty','66lTWSDS','exp','../services/authService','length','unknown','telegramBotService','configurable','683210qjgFTy','sendLoginNotification','default','../config/database','error','connection','__setModuleDefault','role','getOwnPropertyDescriptor','call','336ROpbMp','json','Logged\x20out\x20successfully','6yfjMlC','authService','findUnique','prototype','AuthController','username','41981ScAfRE','__createBinding','token','Failed\x20to\x20send\x20failed\x20login\x20notification:','../services/tokenBlacklistService','1868283hstcgu','remoteAddress','7gRxtBU','user','4713304qvXxTv','getBlacklistStats','writable','AuthService'];a4_0x562c=function(){return _0x43647f;};return a4_0x562c();}const a4_0x47c64b=a4_0xa83f;(function(_0x4cd8b4,_0x28d8c9){const _0x26bd51=a4_0xa83f,_0x22e24d=_0x4cd8b4();while(!![]){try{const _0x5ec977=-parseInt(_0x26bd51(0x96))/0x1*(-parseInt(_0x26bd51(0xb4))/0x2)+parseInt(_0x26bd51(0xaf))/0x3+parseInt(_0x26bd51(0x9f))/0x4+parseInt(_0x26bd51(0xb2))/0x5*(parseInt(_0x26bd51(0x90))/0x6)+parseInt(_0x26bd51(0x9d))/0x7*(parseInt(_0x26bd51(0xa4))/0x8)+parseInt(_0x26bd51(0x9b))/0x9*(-parseInt(_0x26bd51(0xaa))/0xa)+parseInt(_0x26bd51(0x83))/0xb*(-parseInt(_0x26bd51(0x8d))/0xc);if(_0x5ec977===_0x28d8c9)break;else _0x22e24d['push'](_0x22e24d['shift']());}catch(_0x55b76c){_0x22e24d['push'](_0x22e24d['shift']());}}}(a4_0x562c,0xb0d3b));var __createBinding=this&&this[a4_0x47c64b(0x97)]||(Object[a4_0x47c64b(0xae)]?function(_0x2dd576,_0x633d86,_0xff73e5,_0x320821){const _0x50ab5c=a4_0x47c64b;if(_0x320821===undefined)_0x320821=_0xff73e5;var _0x5b885c=Object[_0x50ab5c(0x8b)](_0x633d86,_0xff73e5);(!_0x5b885c||('get'in _0x5b885c?!_0x633d86['__esModule']:_0x5b885c[_0x50ab5c(0xa1)]||_0x5b885c[_0x50ab5c(0x82)]))&&(_0x5b885c={'enumerable':!![],'get':function(){return _0x633d86[_0xff73e5];}}),Object['defineProperty'](_0x2dd576,_0x320821,_0x5b885c);}:function(_0x3df9bf,_0x1124c7,_0x11177d,_0x1805a4){if(_0x1805a4===undefined)_0x1805a4=_0x11177d;_0x3df9bf[_0x1805a4]=_0x1124c7[_0x11177d];}),__setModuleDefault=this&&this[a4_0x47c64b(0x89)]||(Object[a4_0x47c64b(0xae)]?function(_0x11124b,_0x13a7e4){const _0x12dee8=a4_0x47c64b;Object['defineProperty'](_0x11124b,_0x12dee8(0x85),{'enumerable':!![],'value':_0x13a7e4});}:function(_0x366e1b,_0x4aec63){const _0x4a7b5a=a4_0x47c64b;_0x366e1b[_0x4a7b5a(0x85)]=_0x4aec63;}),__importStar=this&&this['__importStar']||(function(){var _0xff43c9=function(_0xb4699a){return _0xff43c9=Object['getOwnPropertyNames']||function(_0xbe8817){const _0x149d05=a4_0xa83f;var _0x25a307=[];for(var _0x287a02 in _0xbe8817)if(Object[_0x149d05(0x93)][_0x149d05(0xab)][_0x149d05(0x8c)](_0xbe8817,_0x287a02))_0x25a307[_0x25a307[_0x149d05(0x7f)]]=_0x287a02;return _0x25a307;},_0xff43c9(_0xb4699a);};return function(_0x2f2bd7){const _0x151d06=a4_0xa83f;if(_0x2f2bd7&&_0x2f2bd7[_0x151d06(0xa8)])return _0x2f2bd7;var _0x280bb5={};if(_0x2f2bd7!=null){for(var _0x547ef1=_0xff43c9(_0x2f2bd7),_0x14292d=0x0;_0x14292d<_0x547ef1[_0x151d06(0x7f)];_0x14292d++)if(_0x547ef1[_0x14292d]!==_0x151d06(0x85))__createBinding(_0x280bb5,_0x2f2bd7,_0x547ef1[_0x14292d]);}return __setModuleDefault(_0x280bb5,_0x2f2bd7),_0x280bb5;};}());Object[a4_0x47c64b(0xb3)](exports,a4_0x47c64b(0xa8),{'value':!![]}),exports[a4_0x47c64b(0x94)]=void 0x0;const authService_1=require(a4_0x47c64b(0xb6)),tokenBlacklistService_1=require(a4_0x47c64b(0x9a)),telegramBotService_1=require(a4_0x47c64b(0xa9));class AuthController{constructor(){const _0x166164=a4_0x47c64b;this[_0x166164(0xa6)]=async(_0x225864,_0x27b382,_0x1f78d1)=>{const _0x52bf19=_0x166164;try{const _0x5d6edc=_0x225864[_0x52bf19(0xa5)],_0x39d200=_0x225864['ip']||_0x225864[_0x52bf19(0x88)][_0x52bf19(0x9c)]||_0x52bf19(0x80),_0x1bd19d=_0x225864[_0x52bf19(0xad)](_0x52bf19(0xa7))||_0x52bf19(0x80);let _0x3a97d1=![],_0xfff39b=null;try{const _0x1c74f1=await this['authService'][_0x52bf19(0xa6)](_0x5d6edc);_0x3a97d1=!![],_0x1c74f1[_0x52bf19(0x8a)]===_0x52bf19(0xac)&&_0x1c74f1[_0x52bf19(0x9e)]?.['id']&&(_0xfff39b=_0x1c74f1[_0x52bf19(0x9e)]['id']),_0xfff39b&&await telegramBotService_1[_0x52bf19(0x81)][_0x52bf19(0x84)](_0xfff39b,{'username':_0x5d6edc[_0x52bf19(0x95)],'ipAddress':_0x39d200,'userAgent':_0x1bd19d,'timestamp':new Date(),'success':!![]}),_0x27b382[_0x52bf19(0x8e)]({'success':!![],'result':_0x1c74f1});}catch(_0x44583c){try{const _0x589151=(await Promise['resolve']()[_0x52bf19(0xa3)](()=>__importStar(require(_0x52bf19(0x86)))))[_0x52bf19(0x85)],_0x1b7aea=await _0x589151['shop'][_0x52bf19(0x92)]({'where':{'username':_0x5d6edc[_0x52bf19(0x95)]},'select':{'id':!![]}});_0x1b7aea&&await telegramBotService_1[_0x52bf19(0x81)][_0x52bf19(0x84)](_0x1b7aea['id'],{'username':_0x5d6edc[_0x52bf19(0x95)],'ipAddress':_0x39d200,'userAgent':_0x1bd19d,'timestamp':new Date(),'success':![]});}catch(_0x46d731){console[_0x52bf19(0x87)](_0x52bf19(0x99),_0x46d731);}throw _0x44583c;}}catch(_0x54e074){_0x1f78d1(_0x54e074);}},this['me']=async(_0x5b611a,_0x188005,_0x1572d7)=>{const _0x41d20f=_0x166164;try{const _0x1f8344=_0x5b611a['user'];_0x188005[_0x41d20f(0x8e)]({'success':!![],'result':{'id':_0x1f8344?.['id'],'username':_0x1f8344?.[_0x41d20f(0x95)],'role':_0x1f8344?.[_0x41d20f(0x8a)]}});}catch(_0x37905d){_0x1572d7(_0x37905d);}},this['logout']=async(_0xfc8b6a,_0x5cb117,_0x5b76e5)=>{const _0x3659c0=_0x166164;try{const _0x574aa9=_0xfc8b6a[_0x3659c0(0x98)],_0x3c2d87=_0xfc8b6a[_0x3659c0(0x9e)];_0x574aa9&&_0x3c2d87?.[_0x3659c0(0xb5)]&&tokenBlacklistService_1['tokenBlacklistService'][_0x3659c0(0xb0)](_0x574aa9,_0x3c2d87[_0x3659c0(0xb5)]),_0x5cb117[_0x3659c0(0x8e)]({'success':!![],'message':_0x3659c0(0x8f)});}catch(_0x5cd251){_0x5b76e5(_0x5cd251);}},this[_0x166164(0xa0)]=async(_0x1cb7b5,_0x3cd26e,_0x37d28a)=>{const _0x5c5dd1=_0x166164;try{const _0x33b980=tokenBlacklistService_1['tokenBlacklistService'][_0x5c5dd1(0xb1)]();_0x3cd26e['json']({'success':!![],'result':_0x33b980});}catch(_0x2ab833){_0x37d28a(_0x2ab833);}},this[_0x166164(0x91)]=new authService_1[(_0x166164(0xa2))]();}}exports[a4_0x47c64b(0x94)]=AuthController;