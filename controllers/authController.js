'use strict';function a4_0x5192(_0x204e5e,_0x4983c3){const _0x82fad4=a4_0x82fa();return a4_0x5192=function(_0x5192af,_0x4afad7){_0x5192af=_0x5192af-0x1d3;let _0x4137d2=_0x82fad4[_0x5192af];return _0x4137d2;},a4_0x5192(_0x204e5e,_0x4983c3);}const a4_0x3489c4=a4_0x5192;(function(_0x10cf68,_0x5e50f4){const _0x25fdc2=a4_0x5192,_0x24a8db=_0x10cf68();while(!![]){try{const _0x38c1c9=-parseInt(_0x25fdc2(0x203))/0x1+-parseInt(_0x25fdc2(0x1f2))/0x2*(parseInt(_0x25fdc2(0x1d5))/0x3)+-parseInt(_0x25fdc2(0x1fd))/0x4*(parseInt(_0x25fdc2(0x1fc))/0x5)+-parseInt(_0x25fdc2(0x1f1))/0x6+-parseInt(_0x25fdc2(0x1fb))/0x7*(parseInt(_0x25fdc2(0x1ea))/0x8)+parseInt(_0x25fdc2(0x1e5))/0x9+parseInt(_0x25fdc2(0x202))/0xa;if(_0x38c1c9===_0x5e50f4)break;else _0x24a8db['push'](_0x24a8db['shift']());}catch(_0x2e04c8){_0x24a8db['push'](_0x24a8db['shift']());}}}(a4_0x82fa,0xcfa2d));var __createBinding=this&&this[a4_0x3489c4(0x1e6)]||(Object['create']?function(_0x38b6a4,_0x1697ae,_0x589073,_0x1297e9){const _0x57cc7a=a4_0x3489c4;if(_0x1297e9===undefined)_0x1297e9=_0x589073;var _0x89308a=Object[_0x57cc7a(0x1db)](_0x1697ae,_0x589073);(!_0x89308a||('get'in _0x89308a?!_0x1697ae['__esModule']:_0x89308a['writable']||_0x89308a['configurable']))&&(_0x89308a={'enumerable':!![],'get':function(){return _0x1697ae[_0x589073];}}),Object['defineProperty'](_0x38b6a4,_0x1297e9,_0x89308a);}:function(_0x519c90,_0x1707c6,_0x4a79cb,_0x570dec){if(_0x570dec===undefined)_0x570dec=_0x4a79cb;_0x519c90[_0x570dec]=_0x1707c6[_0x4a79cb];}),__setModuleDefault=this&&this[a4_0x3489c4(0x1de)]||(Object[a4_0x3489c4(0x1d3)]?function(_0x447d17,_0x4661f6){const _0x15663c=a4_0x3489c4;Object[_0x15663c(0x1ee)](_0x447d17,_0x15663c(0x1f8),{'enumerable':!![],'value':_0x4661f6});}:function(_0x34ba04,_0x4ddd90){const _0x261da1=a4_0x3489c4;_0x34ba04[_0x261da1(0x1f8)]=_0x4ddd90;}),__importStar=this&&this[a4_0x3489c4(0x1f3)]||(function(){var _0x499b23=function(_0x338753){const _0x3775ca=a4_0x5192;return _0x499b23=Object[_0x3775ca(0x1e4)]||function(_0x3b607b){const _0x57ee01=_0x3775ca;var _0x22333b=[];for(var _0x42cfaf in _0x3b607b)if(Object[_0x57ee01(0x1e9)][_0x57ee01(0x1df)]['call'](_0x3b607b,_0x42cfaf))_0x22333b[_0x22333b[_0x57ee01(0x1da)]]=_0x42cfaf;return _0x22333b;},_0x499b23(_0x338753);};return function(_0x4730e2){const _0x187cd8=a4_0x5192;if(_0x4730e2&&_0x4730e2['__esModule'])return _0x4730e2;var _0x5423ab={};if(_0x4730e2!=null){for(var _0x5c918f=_0x499b23(_0x4730e2),_0x8001c3=0x0;_0x8001c3<_0x5c918f[_0x187cd8(0x1da)];_0x8001c3++)if(_0x5c918f[_0x8001c3]!=='default')__createBinding(_0x5423ab,_0x4730e2,_0x5c918f[_0x8001c3]);}return __setModuleDefault(_0x5423ab,_0x4730e2),_0x5423ab;};}());function a4_0x82fa(){const _0x50876a=['getOwnPropertyNames','15172254ACKCKL','__createBinding','exp','../services/tokenBlacklistService','prototype','11731216QtWAzY','resolve','shop','getBlacklistStats','defineProperty','getStats','get','8355144yXUiOH','8YxBHMj','__importStar','error','unknown','Failed\x20to\x20send\x20failed\x20login\x20notification:','user','default','__esModule','authService','7DqtmaE','5CEYnXq','6147272CsAbQH','telegramBotService','login','../services/telegramBotService','findUnique','47597190xhiwmA','835448paDDrN','create','../services/authService','272892kCqXdG','sendLoginNotification','json','Logged\x20out\x20successfully','AuthController','length','getOwnPropertyDescriptor','token','tokenBlacklistService','__setModuleDefault','hasOwnProperty','username','logout','remoteAddress','role'];a4_0x82fa=function(){return _0x50876a;};return a4_0x82fa();}Object[a4_0x3489c4(0x1ee)](exports,a4_0x3489c4(0x1f9),{'value':!![]}),exports[a4_0x3489c4(0x1d9)]=void 0x0;const authService_1=require(a4_0x3489c4(0x1d4)),tokenBlacklistService_1=require(a4_0x3489c4(0x1e8)),telegramBotService_1=require(a4_0x3489c4(0x200));class AuthController{constructor(){const _0x59bab6=a4_0x3489c4;this['login']=async(_0x43593e,_0x113d1e,_0x44cba4)=>{const _0x2902d5=a4_0x5192;try{const _0x41b972=_0x43593e['body'],_0x3ca7e2=_0x43593e['ip']||_0x43593e['connection'][_0x2902d5(0x1e2)]||_0x2902d5(0x1f5),_0x55b486=_0x43593e[_0x2902d5(0x1f0)]('User-Agent')||_0x2902d5(0x1f5);let _0x20a01f=![],_0x31a8b8=null;try{const _0x2e0260=await this['authService'][_0x2902d5(0x1ff)](_0x41b972);_0x20a01f=!![],_0x2e0260[_0x2902d5(0x1e3)]===_0x2902d5(0x1ec)&&_0x2e0260[_0x2902d5(0x1f7)]?.['id']&&(_0x31a8b8=_0x2e0260[_0x2902d5(0x1f7)]['id']),_0x31a8b8&&await telegramBotService_1[_0x2902d5(0x1fe)][_0x2902d5(0x1d6)](_0x31a8b8,{'username':_0x41b972[_0x2902d5(0x1e0)],'ipAddress':_0x3ca7e2,'userAgent':_0x55b486,'timestamp':new Date(),'success':!![]}),_0x113d1e['json']({'success':!![],'result':_0x2e0260});}catch(_0x426ff9){try{const _0x4c30a7=(await Promise[_0x2902d5(0x1eb)]()['then'](()=>__importStar(require('../config/database'))))[_0x2902d5(0x1f8)],_0x3e2df3=await _0x4c30a7[_0x2902d5(0x1ec)][_0x2902d5(0x201)]({'where':{'username':_0x41b972[_0x2902d5(0x1e0)]},'select':{'id':!![]}});_0x3e2df3&&await telegramBotService_1[_0x2902d5(0x1fe)][_0x2902d5(0x1d6)](_0x3e2df3['id'],{'username':_0x41b972[_0x2902d5(0x1e0)],'ipAddress':_0x3ca7e2,'userAgent':_0x55b486,'timestamp':new Date(),'success':![]});}catch(_0xa9fb0f){console[_0x2902d5(0x1f4)](_0x2902d5(0x1f6),_0xa9fb0f);}throw _0x426ff9;}}catch(_0x28b3bb){_0x44cba4(_0x28b3bb);}},this['me']=async(_0x344c34,_0x136fd6,_0x4a608e)=>{const _0x3f8257=a4_0x5192;try{const _0x595789=_0x344c34[_0x3f8257(0x1f7)];_0x136fd6[_0x3f8257(0x1d7)]({'success':!![],'result':{'id':_0x595789?.['id'],'username':_0x595789?.[_0x3f8257(0x1e0)],'role':_0x595789?.[_0x3f8257(0x1e3)]}});}catch(_0x2085e3){_0x4a608e(_0x2085e3);}},this[_0x59bab6(0x1e1)]=async(_0x471fa0,_0x12e54e,_0x19af17)=>{const _0x366758=_0x59bab6;try{const _0xaad301=_0x471fa0[_0x366758(0x1dc)],_0x218653=_0x471fa0[_0x366758(0x1f7)];_0xaad301&&_0x218653?.[_0x366758(0x1e7)]&&tokenBlacklistService_1[_0x366758(0x1dd)]['blacklistToken'](_0xaad301,_0x218653[_0x366758(0x1e7)]),_0x12e54e[_0x366758(0x1d7)]({'success':!![],'message':_0x366758(0x1d8)});}catch(_0x28d458){_0x19af17(_0x28d458);}},this[_0x59bab6(0x1ed)]=async(_0x4bcd2e,_0x2288b5,_0x445c4d)=>{const _0x5a4823=_0x59bab6;try{const _0x58cbce=tokenBlacklistService_1['tokenBlacklistService'][_0x5a4823(0x1ef)]();_0x2288b5['json']({'success':!![],'result':_0x58cbce});}catch(_0x4f34f2){_0x445c4d(_0x4f34f2);}},this[_0x59bab6(0x1fa)]=new authService_1['AuthService']();}}exports[a4_0x3489c4(0x1d9)]=AuthController;