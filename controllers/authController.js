'use strict';const a4_0x108fef=a4_0xa1fa;(function(_0x5a7571,_0x384a69){const _0x23cfa5=a4_0xa1fa,_0x2dacfe=_0x5a7571();while(!![]){try{const _0x3f4ebd=-parseInt(_0x23cfa5(0x15a))/0x1+parseInt(_0x23cfa5(0x184))/0x2+parseInt(_0x23cfa5(0x175))/0x3*(-parseInt(_0x23cfa5(0x17d))/0x4)+-parseInt(_0x23cfa5(0x157))/0x5+-parseInt(_0x23cfa5(0x177))/0x6+parseInt(_0x23cfa5(0x176))/0x7*(parseInt(_0x23cfa5(0x15b))/0x8)+parseInt(_0x23cfa5(0x16b))/0x9*(parseInt(_0x23cfa5(0x15e))/0xa);if(_0x3f4ebd===_0x384a69)break;else _0x2dacfe['push'](_0x2dacfe['shift']());}catch(_0x1beae9){_0x2dacfe['push'](_0x2dacfe['shift']());}}}(a4_0x55fc,0xb33a3));var __createBinding=this&&this[a4_0x108fef(0x16d)]||(Object['create']?function(_0x2d881b,_0x435951,_0x55488e,_0x59f28f){const _0x43075a=a4_0x108fef;if(_0x59f28f===undefined)_0x59f28f=_0x55488e;var _0x21d298=Object['getOwnPropertyDescriptor'](_0x435951,_0x55488e);(!_0x21d298||(_0x43075a(0x179)in _0x21d298?!_0x435951[_0x43075a(0x16a)]:_0x21d298['writable']||_0x21d298[_0x43075a(0x15c)]))&&(_0x21d298={'enumerable':!![],'get':function(){return _0x435951[_0x55488e];}}),Object[_0x43075a(0x166)](_0x2d881b,_0x59f28f,_0x21d298);}:function(_0x5ca81a,_0x50ae3a,_0x3c3c62,_0x4cccbb){if(_0x4cccbb===undefined)_0x4cccbb=_0x3c3c62;_0x5ca81a[_0x4cccbb]=_0x50ae3a[_0x3c3c62];}),__setModuleDefault=this&&this[a4_0x108fef(0x16f)]||(Object[a4_0x108fef(0x168)]?function(_0x4817e5,_0x13d779){const _0x3de993=a4_0x108fef;Object[_0x3de993(0x166)](_0x4817e5,_0x3de993(0x173),{'enumerable':!![],'value':_0x13d779});}:function(_0x2fae65,_0x55c4b8){_0x2fae65['default']=_0x55c4b8;}),__importStar=this&&this['__importStar']||(function(){var _0x1a90d8=function(_0x4e4120){return _0x1a90d8=Object['getOwnPropertyNames']||function(_0x3b5978){const _0x1fd649=a4_0xa1fa;var _0x59d342=[];for(var _0x27b044 in _0x3b5978)if(Object[_0x1fd649(0x15f)]['hasOwnProperty'][_0x1fd649(0x17b)](_0x3b5978,_0x27b044))_0x59d342[_0x59d342[_0x1fd649(0x178)]]=_0x27b044;return _0x59d342;},_0x1a90d8(_0x4e4120);};return function(_0x929cb4){const _0x50600d=a4_0xa1fa;if(_0x929cb4&&_0x929cb4[_0x50600d(0x16a)])return _0x929cb4;var _0x122757={};if(_0x929cb4!=null){for(var _0x22e255=_0x1a90d8(_0x929cb4),_0x403835=0x0;_0x403835<_0x22e255[_0x50600d(0x178)];_0x403835++)if(_0x22e255[_0x403835]!==_0x50600d(0x173))__createBinding(_0x122757,_0x929cb4,_0x22e255[_0x403835]);}return __setModuleDefault(_0x122757,_0x929cb4),_0x122757;};}());Object[a4_0x108fef(0x166)](exports,a4_0x108fef(0x16a),{'value':!![]}),exports[a4_0x108fef(0x16c)]=void 0x0;const authService_1=require('../services/authService'),tokenBlacklistService_1=require('../services/tokenBlacklistService'),telegramBotService_1=require(a4_0x108fef(0x17c));class AuthController{constructor(){const _0x3514c7=a4_0x108fef;this[_0x3514c7(0x183)]=async(_0x469910,_0x205917,_0x15a3ee)=>{const _0x250441=_0x3514c7;try{const _0x67a72b=_0x469910['body'],_0x3424b3=_0x469910['ip']||_0x469910[_0x250441(0x169)][_0x250441(0x17e)]||_0x250441(0x158),_0x52ac6b=_0x469910[_0x250441(0x179)](_0x250441(0x159))||_0x250441(0x158);let _0x4ebbac=![],_0x844cb3=null;try{const _0x1b6c38=await this['authService']['login'](_0x67a72b);_0x4ebbac=!![],_0x1b6c38[_0x250441(0x156)]===_0x250441(0x181)&&_0x1b6c38[_0x250441(0x167)]?.['id']&&(_0x844cb3=_0x1b6c38[_0x250441(0x167)]['id']),_0x844cb3&&await telegramBotService_1[_0x250441(0x15d)]['sendLoginNotification'](_0x844cb3,{'username':_0x67a72b['username'],'ipAddress':_0x3424b3,'userAgent':_0x52ac6b,'timestamp':new Date(),'success':!![]}),_0x205917['json']({'success':!![],'result':_0x1b6c38});}catch(_0x2494c8){try{const _0x165fac=(await Promise['resolve']()[_0x250441(0x171)](()=>__importStar(require('../config/database'))))[_0x250441(0x173)],_0x46a3de=await _0x165fac[_0x250441(0x181)][_0x250441(0x182)]({'where':{'username':_0x67a72b[_0x250441(0x161)]},'select':{'id':!![]}});_0x46a3de&&await telegramBotService_1['telegramBotService'][_0x250441(0x160)](_0x46a3de['id'],{'username':_0x67a72b['username'],'ipAddress':_0x3424b3,'userAgent':_0x52ac6b,'timestamp':new Date(),'success':![]});}catch(_0x4d87d4){console[_0x250441(0x172)](_0x250441(0x174),_0x4d87d4);}throw _0x2494c8;}}catch(_0x40236c){_0x15a3ee(_0x40236c);}},this['me']=async(_0x4ba641,_0xbafb1f,_0x3c38be)=>{const _0x1329e4=_0x3514c7;try{const _0x201a06=_0x4ba641[_0x1329e4(0x167)];_0xbafb1f['json']({'success':!![],'result':{'id':_0x201a06?.['id'],'username':_0x201a06?.[_0x1329e4(0x161)],'role':_0x201a06?.['role']}});}catch(_0x2e6515){_0x3c38be(_0x2e6515);}},this[_0x3514c7(0x163)]=async(_0x223edc,_0x4b2982,_0x31bd15)=>{const _0x12936b=_0x3514c7;try{const _0x4d66bd=_0x223edc[_0x12936b(0x165)],_0x409ed2=_0x223edc[_0x12936b(0x167)];_0x4d66bd&&_0x409ed2?.['exp']&&tokenBlacklistService_1[_0x12936b(0x162)][_0x12936b(0x180)](_0x4d66bd,_0x409ed2[_0x12936b(0x17f)]),_0x4b2982['json']({'success':!![],'message':_0x12936b(0x170)});}catch(_0x58b96b){_0x31bd15(_0x58b96b);}},this[_0x3514c7(0x17a)]=async(_0xa5ef39,_0x5a14de,_0x3acae7)=>{const _0x412f17=_0x3514c7;try{const _0x3d05d9=tokenBlacklistService_1['tokenBlacklistService'][_0x412f17(0x164)]();_0x5a14de[_0x412f17(0x155)]({'success':!![],'result':_0x3d05d9});}catch(_0x45bd2a){_0x3acae7(_0x45bd2a);}},this['authService']=new authService_1[(_0x3514c7(0x16e))]();}}function a4_0x55fc(){const _0x16ea49=['885771hKmyAd','AuthController','__createBinding','AuthService','__setModuleDefault','Logged\x20out\x20successfully','then','error','default','Failed\x20to\x20send\x20failed\x20login\x20notification:','3GZucgU','13930OJuPCQ','8204622wTvybI','length','get','getBlacklistStats','call','../services/telegramBotService','4163936KGZzsC','remoteAddress','exp','blacklistToken','shop','findUnique','login','2137208NTAcvS','json','role','2055580rEgMVm','unknown','User-Agent','952517EYjFcU','3928FYjsDS','configurable','telegramBotService','250Ysztdx','prototype','sendLoginNotification','username','tokenBlacklistService','logout','getStats','token','defineProperty','user','create','connection','__esModule'];a4_0x55fc=function(){return _0x16ea49;};return a4_0x55fc();}function a4_0xa1fa(_0x3550cf,_0x2cbc0c){const _0x55fcad=a4_0x55fc();return a4_0xa1fa=function(_0xa1fa6a,_0x1644c1){_0xa1fa6a=_0xa1fa6a-0x155;let _0x5c922c=_0x55fcad[_0xa1fa6a];return _0x5c922c;},a4_0xa1fa(_0x3550cf,_0x2cbc0c);}exports[a4_0x108fef(0x16c)]=AuthController;