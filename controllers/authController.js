'use strict';const a4_0x937c75=a4_0xc350;(function(_0x360ab1,_0x2f00fe){const _0x1235b2=a4_0xc350,_0x847e11=_0x360ab1();while(!![]){try{const _0x404e43=-parseInt(_0x1235b2(0x14a))/0x1*(parseInt(_0x1235b2(0x147))/0x2)+parseInt(_0x1235b2(0x15d))/0x3*(-parseInt(_0x1235b2(0x151))/0x4)+-parseInt(_0x1235b2(0x15b))/0x5+-parseInt(_0x1235b2(0x150))/0x6+-parseInt(_0x1235b2(0x161))/0x7+-parseInt(_0x1235b2(0x15e))/0x8*(parseInt(_0x1235b2(0x14c))/0x9)+parseInt(_0x1235b2(0x165))/0xa;if(_0x404e43===_0x2f00fe)break;else _0x847e11['push'](_0x847e11['shift']());}catch(_0x67c56c){_0x847e11['push'](_0x847e11['shift']());}}}(a4_0x5862,0x60a25));function a4_0xc350(_0x4add07,_0x1633e9){const _0x58627b=a4_0x5862();return a4_0xc350=function(_0xc3507f,_0x4d6de6){_0xc3507f=_0xc3507f-0x146;let _0x1fe51c=_0x58627b[_0xc3507f];return _0x1fe51c;},a4_0xc350(_0x4add07,_0x1633e9);}var __createBinding=this&&this['__createBinding']||(Object[a4_0x937c75(0x171)]?function(_0xbe76c5,_0xb215b2,_0x5a5009,_0x568f6e){const _0x1b6a2a=a4_0x937c75;if(_0x568f6e===undefined)_0x568f6e=_0x5a5009;var _0x24b709=Object[_0x1b6a2a(0x16e)](_0xb215b2,_0x5a5009);(!_0x24b709||(_0x1b6a2a(0x155)in _0x24b709?!_0xb215b2[_0x1b6a2a(0x167)]:_0x24b709[_0x1b6a2a(0x16b)]||_0x24b709[_0x1b6a2a(0x16d)]))&&(_0x24b709={'enumerable':!![],'get':function(){return _0xb215b2[_0x5a5009];}}),Object[_0x1b6a2a(0x156)](_0xbe76c5,_0x568f6e,_0x24b709);}:function(_0x266347,_0x2d7f92,_0x234198,_0x805d84){if(_0x805d84===undefined)_0x805d84=_0x234198;_0x266347[_0x805d84]=_0x2d7f92[_0x234198];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object['create']?function(_0x32c1f4,_0x48108f){const _0x5dafbd=a4_0x937c75;Object[_0x5dafbd(0x156)](_0x32c1f4,_0x5dafbd(0x16c),{'enumerable':!![],'value':_0x48108f});}:function(_0x5cfd64,_0x50e833){const _0x458c06=a4_0x937c75;_0x5cfd64[_0x458c06(0x16c)]=_0x50e833;}),__importStar=this&&this[a4_0x937c75(0x152)]||(function(){var _0x3e203d=function(_0x4b1834){const _0x324d69=a4_0xc350;return _0x3e203d=Object[_0x324d69(0x160)]||function(_0x2b5e67){const _0x2e8aa6=_0x324d69;var _0x3a32b8=[];for(var _0x2a5fcc in _0x2b5e67)if(Object[_0x2e8aa6(0x163)][_0x2e8aa6(0x174)][_0x2e8aa6(0x149)](_0x2b5e67,_0x2a5fcc))_0x3a32b8[_0x3a32b8[_0x2e8aa6(0x162)]]=_0x2a5fcc;return _0x3a32b8;},_0x3e203d(_0x4b1834);};return function(_0x558b7d){const _0x5d9c4a=a4_0xc350;if(_0x558b7d&&_0x558b7d[_0x5d9c4a(0x167)])return _0x558b7d;var _0x92d98d={};if(_0x558b7d!=null){for(var _0x277fb6=_0x3e203d(_0x558b7d),_0x1960ae=0x0;_0x1960ae<_0x277fb6[_0x5d9c4a(0x162)];_0x1960ae++)if(_0x277fb6[_0x1960ae]!==_0x5d9c4a(0x16c))__createBinding(_0x92d98d,_0x558b7d,_0x277fb6[_0x1960ae]);}return __setModuleDefault(_0x92d98d,_0x558b7d),_0x92d98d;};}());Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a4_0x937c75(0x172)]=void 0x0;function a4_0x5862(){const _0x17f28b=['user','json','telegramBotService','715845EiweCO','findUnique','21IWdMah','128aBSIZW','error','getOwnPropertyNames','4227412ZMTWYp','length','prototype','getBlacklistStats','22367220IxWaRE','unknown','__esModule','tokenBlacklistService','role','login','writable','default','configurable','getOwnPropertyDescriptor','Failed\x20to\x20send\x20failed\x20login\x20notification:','shop','create','AuthController','body','hasOwnProperty','../services/tokenBlacklistService','294394FfwDkX','resolve','call','1ZoeVVs','then','5031wNzpYD','Logged\x20out\x20successfully','sendLoginNotification','authService','1254192zYRsLo','416372jfJNkW','__importStar','connection','username','get','defineProperty','exp'];a4_0x5862=function(){return _0x17f28b;};return a4_0x5862();}const authService_1=require('../services/authService'),tokenBlacklistService_1=require(a4_0x937c75(0x146)),telegramBotService_1=require('../services/telegramBotService');class AuthController{constructor(){const _0x8ce1d4=a4_0x937c75;this[_0x8ce1d4(0x16a)]=async(_0x178f61,_0x29f4fc,_0xbd3a77)=>{const _0x75b48b=_0x8ce1d4;try{const _0x170955=_0x178f61[_0x75b48b(0x173)],_0x1563d7=_0x178f61['ip']||_0x178f61[_0x75b48b(0x153)]['remoteAddress']||_0x75b48b(0x166),_0x2e0e1c=_0x178f61[_0x75b48b(0x155)]('User-Agent')||_0x75b48b(0x166);let _0x5b1b7c=![],_0x4a6e55=null;try{const _0x5b6dbf=await this[_0x75b48b(0x14f)][_0x75b48b(0x16a)](_0x170955);_0x5b1b7c=!![],_0x5b6dbf[_0x75b48b(0x169)]===_0x75b48b(0x170)&&_0x5b6dbf[_0x75b48b(0x158)]?.['id']&&(_0x4a6e55=_0x5b6dbf['user']['id']),_0x4a6e55&&await telegramBotService_1[_0x75b48b(0x15a)][_0x75b48b(0x14e)](_0x4a6e55,{'username':_0x170955[_0x75b48b(0x154)],'ipAddress':_0x1563d7,'userAgent':_0x2e0e1c,'timestamp':new Date(),'success':!![]}),_0x29f4fc[_0x75b48b(0x159)]({'success':!![],'result':_0x5b6dbf});}catch(_0x259725){try{const _0x439d2f=(await Promise[_0x75b48b(0x148)]()[_0x75b48b(0x14b)](()=>__importStar(require('../config/database'))))['default'],_0xdb057e=await _0x439d2f[_0x75b48b(0x170)][_0x75b48b(0x15c)]({'where':{'username':_0x170955[_0x75b48b(0x154)]},'select':{'id':!![]}});_0xdb057e&&await telegramBotService_1[_0x75b48b(0x15a)][_0x75b48b(0x14e)](_0xdb057e['id'],{'username':_0x170955[_0x75b48b(0x154)],'ipAddress':_0x1563d7,'userAgent':_0x2e0e1c,'timestamp':new Date(),'success':![]});}catch(_0x298828){console[_0x75b48b(0x15f)](_0x75b48b(0x16f),_0x298828);}throw _0x259725;}}catch(_0xaa8a4a){_0xbd3a77(_0xaa8a4a);}},this['me']=async(_0x6d3d23,_0xb3e17e,_0x201771)=>{const _0x1ca840=_0x8ce1d4;try{const _0x26331c=_0x6d3d23[_0x1ca840(0x158)];_0xb3e17e[_0x1ca840(0x159)]({'success':!![],'result':{'id':_0x26331c?.['id'],'username':_0x26331c?.['username'],'role':_0x26331c?.[_0x1ca840(0x169)]}});}catch(_0xb8dd82){_0x201771(_0xb8dd82);}},this['logout']=async(_0x275594,_0x730a7c,_0x5ac410)=>{const _0x3dd3f8=_0x8ce1d4;try{const _0x72e965=_0x275594['token'],_0x4de070=_0x275594[_0x3dd3f8(0x158)];_0x72e965&&_0x4de070?.[_0x3dd3f8(0x157)]&&tokenBlacklistService_1[_0x3dd3f8(0x168)]['blacklistToken'](_0x72e965,_0x4de070['exp']),_0x730a7c[_0x3dd3f8(0x159)]({'success':!![],'message':_0x3dd3f8(0x14d)});}catch(_0x44d473){_0x5ac410(_0x44d473);}},this[_0x8ce1d4(0x164)]=async(_0x14111b,_0x5c5ebd,_0x324def)=>{const _0x1b8328=_0x8ce1d4;try{const _0xe824f2=tokenBlacklistService_1[_0x1b8328(0x168)]['getStats']();_0x5c5ebd[_0x1b8328(0x159)]({'success':!![],'result':_0xe824f2});}catch(_0xfd1333){_0x324def(_0xfd1333);}},this[_0x8ce1d4(0x14f)]=new authService_1['AuthService']();}}exports['AuthController']=AuthController;