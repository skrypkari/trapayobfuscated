'use strict';const a4_0x2611f1=a4_0x4f93;(function(_0x3cf900,_0x576eae){const _0x47b343=a4_0x4f93,_0x230110=_0x3cf900();while(!![]){try{const _0x201c4d=-parseInt(_0x47b343(0x95))/0x1+-parseInt(_0x47b343(0x90))/0x2*(-parseInt(_0x47b343(0x8d))/0x3)+parseInt(_0x47b343(0xa2))/0x4*(parseInt(_0x47b343(0xaa))/0x5)+parseInt(_0x47b343(0x97))/0x6+-parseInt(_0x47b343(0x9b))/0x7*(-parseInt(_0x47b343(0xa5))/0x8)+parseInt(_0x47b343(0xa8))/0x9*(parseInt(_0x47b343(0x9d))/0xa)+-parseInt(_0x47b343(0xb2))/0xb;if(_0x201c4d===_0x576eae)break;else _0x230110['push'](_0x230110['shift']());}catch(_0x412a6b){_0x230110['push'](_0x230110['shift']());}}}(a4_0x5c03,0xd3237));var __createBinding=this&&this[a4_0x2611f1(0xa1)]||(Object[a4_0x2611f1(0xae)]?function(_0x588f20,_0x192a1d,_0x2cadc4,_0x2c662e){const _0x2370f2=a4_0x2611f1;if(_0x2c662e===undefined)_0x2c662e=_0x2cadc4;var _0x2f836b=Object[_0x2370f2(0x9a)](_0x192a1d,_0x2cadc4);(!_0x2f836b||(_0x2370f2(0x8b)in _0x2f836b?!_0x192a1d[_0x2370f2(0x93)]:_0x2f836b['writable']||_0x2f836b[_0x2370f2(0x85)]))&&(_0x2f836b={'enumerable':!![],'get':function(){return _0x192a1d[_0x2cadc4];}}),Object[_0x2370f2(0xab)](_0x588f20,_0x2c662e,_0x2f836b);}:function(_0xd6c9e2,_0xf38deb,_0x529086,_0x1f2e0b){if(_0x1f2e0b===undefined)_0x1f2e0b=_0x529086;_0xd6c9e2[_0x1f2e0b]=_0xf38deb[_0x529086];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a4_0x2611f1(0xae)]?function(_0x55590e,_0x46ec05){const _0x2a50ca=a4_0x2611f1;Object[_0x2a50ca(0xab)](_0x55590e,_0x2a50ca(0xa3),{'enumerable':!![],'value':_0x46ec05});}:function(_0x39911c,_0x2afbfc){_0x39911c['default']=_0x2afbfc;}),__importStar=this&&this['__importStar']||(function(){var _0x1c11c2=function(_0x293592){const _0x3e553b=a4_0x4f93;return _0x1c11c2=Object[_0x3e553b(0xb4)]||function(_0x325aee){const _0xe0a9c6=_0x3e553b;var _0x22727b=[];for(var _0x482f21 in _0x325aee)if(Object['prototype'][_0xe0a9c6(0xa9)][_0xe0a9c6(0xb5)](_0x325aee,_0x482f21))_0x22727b[_0x22727b[_0xe0a9c6(0x96)]]=_0x482f21;return _0x22727b;},_0x1c11c2(_0x293592);};return function(_0x47d6c8){const _0x56512c=a4_0x4f93;if(_0x47d6c8&&_0x47d6c8[_0x56512c(0x93)])return _0x47d6c8;var _0xc5299c={};if(_0x47d6c8!=null){for(var _0x53529d=_0x1c11c2(_0x47d6c8),_0x4ab73d=0x0;_0x4ab73d<_0x53529d[_0x56512c(0x96)];_0x4ab73d++)if(_0x53529d[_0x4ab73d]!==_0x56512c(0xa3))__createBinding(_0xc5299c,_0x47d6c8,_0x53529d[_0x4ab73d]);}return __setModuleDefault(_0xc5299c,_0x47d6c8),_0xc5299c;};}());function a4_0x5c03(){const _0x49ef67=['904008Ttcnce','username','token','4451049ggdrWz','hasOwnProperty','5OJtNnT','defineProperty','../config/database','exp','create','../services/tokenBlacklistService','user','role','37500507TjDURq','findUnique','getOwnPropertyNames','call','Failed\x20to\x20send\x20failed\x20login\x20notification:','Logged\x20out\x20successfully','../services/authService','telegramBotService','configurable','shop','body','AuthController','tokenBlacklistService','sendLoginNotification','get','error','891RYKBAR','blacklistToken','AuthService','3346SWJWjX','logout','login','__esModule','resolve','820234YsuHmT','length','9064386JeaAVa','getBlacklistStats','json','getOwnPropertyDescriptor','91KmCnoI','then','20awJMmb','User-Agent','../services/telegramBotService','unknown','__createBinding','2513788IgvrxX','default','authService'];a4_0x5c03=function(){return _0x49ef67;};return a4_0x5c03();}function a4_0x4f93(_0x225319,_0xf0aae9){const _0x5c0394=a4_0x5c03();return a4_0x4f93=function(_0x4f9306,_0x43ba9a){_0x4f9306=_0x4f9306-0x84;let _0x5b8194=_0x5c0394[_0x4f9306];return _0x5b8194;},a4_0x4f93(_0x225319,_0xf0aae9);}Object[a4_0x2611f1(0xab)](exports,a4_0x2611f1(0x93),{'value':!![]}),exports[a4_0x2611f1(0x88)]=void 0x0;const authService_1=require(a4_0x2611f1(0xb8)),tokenBlacklistService_1=require(a4_0x2611f1(0xaf)),telegramBotService_1=require(a4_0x2611f1(0x9f));class AuthController{constructor(){const _0x1c7684=a4_0x2611f1;this['login']=async(_0x5e169f,_0x462fcd,_0x51109e)=>{const _0x3e05f2=a4_0x4f93;try{const _0x14a9d3=_0x5e169f[_0x3e05f2(0x87)],_0x158928=_0x5e169f['ip']||_0x5e169f['connection']['remoteAddress']||'unknown',_0x42ecb6=_0x5e169f[_0x3e05f2(0x8b)](_0x3e05f2(0x9e))||_0x3e05f2(0xa0);let _0x220bc0=![],_0x458cd4=null;try{const _0x226872=await this[_0x3e05f2(0xa4)][_0x3e05f2(0x92)](_0x14a9d3);_0x220bc0=!![],_0x226872[_0x3e05f2(0xb1)]==='shop'&&_0x226872['user']?.['id']&&(_0x458cd4=_0x226872['user']['id']),_0x458cd4&&await telegramBotService_1[_0x3e05f2(0x84)][_0x3e05f2(0x8a)](_0x458cd4,{'username':_0x14a9d3['username'],'ipAddress':_0x158928,'userAgent':_0x42ecb6,'timestamp':new Date(),'success':!![]}),_0x462fcd['json']({'success':!![],'result':_0x226872});}catch(_0x18fb6d){try{const _0x35ace7=(await Promise[_0x3e05f2(0x94)]()[_0x3e05f2(0x9c)](()=>__importStar(require(_0x3e05f2(0xac)))))['default'],_0x309c25=await _0x35ace7[_0x3e05f2(0x86)][_0x3e05f2(0xb3)]({'where':{'username':_0x14a9d3[_0x3e05f2(0xa6)]},'select':{'id':!![]}});_0x309c25&&await telegramBotService_1[_0x3e05f2(0x84)][_0x3e05f2(0x8a)](_0x309c25['id'],{'username':_0x14a9d3['username'],'ipAddress':_0x158928,'userAgent':_0x42ecb6,'timestamp':new Date(),'success':![]});}catch(_0x3ff5e9){console[_0x3e05f2(0x8c)](_0x3e05f2(0xb6),_0x3ff5e9);}throw _0x18fb6d;}}catch(_0x57c59f){_0x51109e(_0x57c59f);}},this['me']=async(_0x58d34f,_0xf81c8,_0x19bf56)=>{const _0x4160bc=a4_0x4f93;try{const _0x502a38=_0x58d34f[_0x4160bc(0xb0)];_0xf81c8[_0x4160bc(0x99)]({'success':!![],'result':{'id':_0x502a38?.['id'],'username':_0x502a38?.[_0x4160bc(0xa6)],'role':_0x502a38?.['role']}});}catch(_0x1ce0ea){_0x19bf56(_0x1ce0ea);}},this[_0x1c7684(0x91)]=async(_0xfb194f,_0x4fefdf,_0x16e5db)=>{const _0x4aecf0=_0x1c7684;try{const _0x3efd33=_0xfb194f[_0x4aecf0(0xa7)],_0x37f7ad=_0xfb194f[_0x4aecf0(0xb0)];_0x3efd33&&_0x37f7ad?.[_0x4aecf0(0xad)]&&tokenBlacklistService_1[_0x4aecf0(0x89)][_0x4aecf0(0x8e)](_0x3efd33,_0x37f7ad[_0x4aecf0(0xad)]),_0x4fefdf[_0x4aecf0(0x99)]({'success':!![],'message':_0x4aecf0(0xb7)});}catch(_0x1a5c73){_0x16e5db(_0x1a5c73);}},this[_0x1c7684(0x98)]=async(_0x61aba5,_0x2b7d7c,_0x1f4dbf)=>{const _0x2b757d=_0x1c7684;try{const _0x3d1cd9=tokenBlacklistService_1[_0x2b757d(0x89)]['getStats']();_0x2b7d7c[_0x2b757d(0x99)]({'success':!![],'result':_0x3d1cd9});}catch(_0x258886){_0x1f4dbf(_0x258886);}},this['authService']=new authService_1[(_0x1c7684(0x8f))]();}}exports[a4_0x2611f1(0x88)]=AuthController;