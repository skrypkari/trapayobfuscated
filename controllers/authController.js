'use strict';function a4_0x1068(){const _0x55a177=['4031888NVrthC','AuthController','__setModuleDefault','role','getBlacklistStats','tokenBlacklistService','get','user','json','findUnique','2nZbryA','2892360slpHUN','call','7631290HrJQZt','__esModule','resolve','unknown','sendLoginNotification','body','9uPNJvF','telegramBotService','1352640NEDbJl','__importStar','error','1129776GSdsdi','getOwnPropertyNames','default','then','Failed\x20to\x20send\x20failed\x20login\x20notification:','../services/authService','../services/tokenBlacklistService','getOwnPropertyDescriptor','prototype','shop','1505684eTkdiv','username','create','token','78835EyozaB','login','defineProperty','authService','exp','remoteAddress','getStats','10gOKBax','length','../config/database','Logged\x20out\x20successfully','../services/telegramBotService','__createBinding'];a4_0x1068=function(){return _0x55a177;};return a4_0x1068();}const a4_0x52a733=a4_0x2fff;(function(_0x3ca5b4,_0x3a7cce){const _0xd5493d=a4_0x2fff,_0x267b47=_0x3ca5b4();while(!![]){try{const _0x56e4b8=-parseInt(_0xd5493d(0x1ba))/0x1*(-parseInt(_0xd5493d(0x1d1))/0x2)+parseInt(_0xd5493d(0x1df))/0x3+-parseInt(_0xd5493d(0x1b6))/0x4*(parseInt(_0xd5493d(0x1c1))/0x5)+-parseInt(_0xd5493d(0x1dc))/0x6+parseInt(_0xd5493d(0x1c7))/0x7+-parseInt(_0xd5493d(0x1d2))/0x8+-parseInt(_0xd5493d(0x1da))/0x9*(-parseInt(_0xd5493d(0x1d4))/0xa);if(_0x56e4b8===_0x3a7cce)break;else _0x267b47['push'](_0x267b47['shift']());}catch(_0x1b39bf){_0x267b47['push'](_0x267b47['shift']());}}}(a4_0x1068,0x6f039));var __createBinding=this&&this[a4_0x52a733(0x1c6)]||(Object['create']?function(_0x48c6f9,_0x37492c,_0xc69752,_0x44a6ca){const _0x391d62=a4_0x52a733;if(_0x44a6ca===undefined)_0x44a6ca=_0xc69752;var _0x2d3a80=Object[_0x391d62(0x1e6)](_0x37492c,_0xc69752);(!_0x2d3a80||('get'in _0x2d3a80?!_0x37492c[_0x391d62(0x1d5)]:_0x2d3a80['writable']||_0x2d3a80['configurable']))&&(_0x2d3a80={'enumerable':!![],'get':function(){return _0x37492c[_0xc69752];}}),Object[_0x391d62(0x1bc)](_0x48c6f9,_0x44a6ca,_0x2d3a80);}:function(_0x35c644,_0x18383f,_0x19b92c,_0x65f816){if(_0x65f816===undefined)_0x65f816=_0x19b92c;_0x35c644[_0x65f816]=_0x18383f[_0x19b92c];}),__setModuleDefault=this&&this[a4_0x52a733(0x1c9)]||(Object[a4_0x52a733(0x1b8)]?function(_0x3e013e,_0x26d02a){const _0x357e3e=a4_0x52a733;Object[_0x357e3e(0x1bc)](_0x3e013e,_0x357e3e(0x1e1),{'enumerable':!![],'value':_0x26d02a});}:function(_0x1f4154,_0x4a4fc9){const _0x3073fc=a4_0x52a733;_0x1f4154[_0x3073fc(0x1e1)]=_0x4a4fc9;}),__importStar=this&&this[a4_0x52a733(0x1dd)]||(function(){var _0x5e8756=function(_0x3ec541){const _0x3cb811=a4_0x2fff;return _0x5e8756=Object[_0x3cb811(0x1e0)]||function(_0x56277b){const _0x27fc21=_0x3cb811;var _0x293b3a=[];for(var _0x446389 in _0x56277b)if(Object[_0x27fc21(0x1e7)]['hasOwnProperty'][_0x27fc21(0x1d3)](_0x56277b,_0x446389))_0x293b3a[_0x293b3a[_0x27fc21(0x1c2)]]=_0x446389;return _0x293b3a;},_0x5e8756(_0x3ec541);};return function(_0x316877){const _0x4e3b01=a4_0x2fff;if(_0x316877&&_0x316877[_0x4e3b01(0x1d5)])return _0x316877;var _0x5998b1={};if(_0x316877!=null){for(var _0x519106=_0x5e8756(_0x316877),_0x507b34=0x0;_0x507b34<_0x519106[_0x4e3b01(0x1c2)];_0x507b34++)if(_0x519106[_0x507b34]!==_0x4e3b01(0x1e1))__createBinding(_0x5998b1,_0x316877,_0x519106[_0x507b34]);}return __setModuleDefault(_0x5998b1,_0x316877),_0x5998b1;};}());Object[a4_0x52a733(0x1bc)](exports,'__esModule',{'value':!![]}),exports[a4_0x52a733(0x1c8)]=void 0x0;const authService_1=require(a4_0x52a733(0x1e4)),tokenBlacklistService_1=require(a4_0x52a733(0x1e5)),telegramBotService_1=require(a4_0x52a733(0x1c5));function a4_0x2fff(_0x4837b2,_0x4a37d7){const _0x106836=a4_0x1068();return a4_0x2fff=function(_0x2fffc7,_0x420e8a){_0x2fffc7=_0x2fffc7-0x1b6;let _0x212c64=_0x106836[_0x2fffc7];return _0x212c64;},a4_0x2fff(_0x4837b2,_0x4a37d7);}class AuthController{constructor(){const _0x30a96d=a4_0x52a733;this[_0x30a96d(0x1bb)]=async(_0x1504a3,_0xe1a57d,_0x355bfb)=>{const _0x3403c2=_0x30a96d;try{const _0x1545e7=_0x1504a3[_0x3403c2(0x1d9)],_0x14abb8=_0x1504a3['ip']||_0x1504a3['connection'][_0x3403c2(0x1bf)]||_0x3403c2(0x1d7),_0x123138=_0x1504a3[_0x3403c2(0x1cd)]('User-Agent')||'unknown';let _0x16b660=![],_0x4b3e7f=null;try{const _0x39d7f1=await this[_0x3403c2(0x1bd)][_0x3403c2(0x1bb)](_0x1545e7);_0x16b660=!![],_0x39d7f1[_0x3403c2(0x1ca)]===_0x3403c2(0x1e8)&&_0x39d7f1[_0x3403c2(0x1ce)]?.['id']&&(_0x4b3e7f=_0x39d7f1['user']['id']),_0x4b3e7f&&await telegramBotService_1['telegramBotService']['sendLoginNotification'](_0x4b3e7f,{'username':_0x1545e7[_0x3403c2(0x1b7)],'ipAddress':_0x14abb8,'userAgent':_0x123138,'timestamp':new Date(),'success':!![]}),_0xe1a57d[_0x3403c2(0x1cf)]({'success':!![],'result':_0x39d7f1});}catch(_0x3d469e){try{const _0x392c3f=(await Promise[_0x3403c2(0x1d6)]()[_0x3403c2(0x1e2)](()=>__importStar(require(_0x3403c2(0x1c3)))))[_0x3403c2(0x1e1)],_0x3fd03c=await _0x392c3f['shop'][_0x3403c2(0x1d0)]({'where':{'username':_0x1545e7[_0x3403c2(0x1b7)]},'select':{'id':!![]}});_0x3fd03c&&await telegramBotService_1[_0x3403c2(0x1db)][_0x3403c2(0x1d8)](_0x3fd03c['id'],{'username':_0x1545e7[_0x3403c2(0x1b7)],'ipAddress':_0x14abb8,'userAgent':_0x123138,'timestamp':new Date(),'success':![]});}catch(_0x549697){console[_0x3403c2(0x1de)](_0x3403c2(0x1e3),_0x549697);}throw _0x3d469e;}}catch(_0x4f27c6){_0x355bfb(_0x4f27c6);}},this['me']=async(_0x2b79f4,_0x1ce9f2,_0x486cdb)=>{const _0x54d0e7=_0x30a96d;try{const _0x38290a=_0x2b79f4[_0x54d0e7(0x1ce)];_0x1ce9f2['json']({'success':!![],'result':{'id':_0x38290a?.['id'],'username':_0x38290a?.[_0x54d0e7(0x1b7)],'role':_0x38290a?.['role']}});}catch(_0xb2cb7a){_0x486cdb(_0xb2cb7a);}},this['logout']=async(_0x267898,_0x4cd01f,_0x1cbe44)=>{const _0x21e554=_0x30a96d;try{const _0x124201=_0x267898[_0x21e554(0x1b9)],_0x3c422f=_0x267898[_0x21e554(0x1ce)];_0x124201&&_0x3c422f?.[_0x21e554(0x1be)]&&tokenBlacklistService_1['tokenBlacklistService']['blacklistToken'](_0x124201,_0x3c422f[_0x21e554(0x1be)]),_0x4cd01f['json']({'success':!![],'message':_0x21e554(0x1c4)});}catch(_0x4df891){_0x1cbe44(_0x4df891);}},this[_0x30a96d(0x1cb)]=async(_0x508481,_0x5faf0a,_0x1ece0c)=>{const _0x208128=_0x30a96d;try{const _0x2d618b=tokenBlacklistService_1[_0x208128(0x1cc)][_0x208128(0x1c0)]();_0x5faf0a[_0x208128(0x1cf)]({'success':!![],'result':_0x2d618b});}catch(_0x2ea5db){_0x1ece0c(_0x2ea5db);}},this['authService']=new authService_1['AuthService']();}}exports[a4_0x52a733(0x1c8)]=AuthController;