'use strict';function a4_0x3831(_0x47b6bf,_0x720249){const _0x19909c=a4_0x1990();return a4_0x3831=function(_0x3831af,_0x1ea6fd){_0x3831af=_0x3831af-0xf1;let _0x28ea97=_0x19909c[_0x3831af];return _0x28ea97;},a4_0x3831(_0x47b6bf,_0x720249);}const a4_0x3e5bf1=a4_0x3831;(function(_0x19f5c5,_0x19b4f7){const _0x3802ec=a4_0x3831,_0x408c48=_0x19f5c5();while(!![]){try{const _0x9e4bd0=parseInt(_0x3802ec(0x101))/0x1*(parseInt(_0x3802ec(0x11c))/0x2)+-parseInt(_0x3802ec(0xf5))/0x3+parseInt(_0x3802ec(0xf8))/0x4*(parseInt(_0x3802ec(0x110))/0x5)+parseInt(_0x3802ec(0x119))/0x6+parseInt(_0x3802ec(0x118))/0x7*(-parseInt(_0x3802ec(0x115))/0x8)+parseInt(_0x3802ec(0x10b))/0x9+-parseInt(_0x3802ec(0x121))/0xa;if(_0x9e4bd0===_0x19b4f7)break;else _0x408c48['push'](_0x408c48['shift']());}catch(_0xdc6ac5){_0x408c48['push'](_0x408c48['shift']());}}}(a4_0x1990,0x3a57e));var __createBinding=this&&this['__createBinding']||(Object[a4_0x3e5bf1(0x10f)]?function(_0x42c614,_0x14c1c3,_0x3e11fa,_0x23ab29){const _0x9efc61=a4_0x3e5bf1;if(_0x23ab29===undefined)_0x23ab29=_0x3e11fa;var _0x5c4d47=Object['getOwnPropertyDescriptor'](_0x14c1c3,_0x3e11fa);(!_0x5c4d47||(_0x9efc61(0x105)in _0x5c4d47?!_0x14c1c3['__esModule']:_0x5c4d47[_0x9efc61(0x100)]||_0x5c4d47[_0x9efc61(0x113)]))&&(_0x5c4d47={'enumerable':!![],'get':function(){return _0x14c1c3[_0x3e11fa];}}),Object[_0x9efc61(0xf7)](_0x42c614,_0x23ab29,_0x5c4d47);}:function(_0xc8ce07,_0x4683e1,_0x4852d7,_0x2f4071){if(_0x2f4071===undefined)_0x2f4071=_0x4852d7;_0xc8ce07[_0x2f4071]=_0x4683e1[_0x4852d7];}),__setModuleDefault=this&&this[a4_0x3e5bf1(0x103)]||(Object[a4_0x3e5bf1(0x10f)]?function(_0x27940d,_0x3ddd3e){const _0x561c4e=a4_0x3e5bf1;Object[_0x561c4e(0xf7)](_0x27940d,_0x561c4e(0xfa),{'enumerable':!![],'value':_0x3ddd3e});}:function(_0xdead08,_0x4cb852){_0xdead08['default']=_0x4cb852;}),__importStar=this&&this[a4_0x3e5bf1(0xfc)]||(function(){var _0x26ae9b=function(_0x416654){return _0x26ae9b=Object['getOwnPropertyNames']||function(_0x38b4b5){const _0x5a750c=a4_0x3831;var _0x481d1f=[];for(var _0x219314 in _0x38b4b5)if(Object[_0x5a750c(0xfe)]['hasOwnProperty'][_0x5a750c(0x11f)](_0x38b4b5,_0x219314))_0x481d1f[_0x481d1f[_0x5a750c(0x102)]]=_0x219314;return _0x481d1f;},_0x26ae9b(_0x416654);};return function(_0x318cbd){const _0x458c6c=a4_0x3831;if(_0x318cbd&&_0x318cbd['__esModule'])return _0x318cbd;var _0x4e0d79={};if(_0x318cbd!=null){for(var _0x3f17d1=_0x26ae9b(_0x318cbd),_0x466c3f=0x0;_0x466c3f<_0x3f17d1[_0x458c6c(0x102)];_0x466c3f++)if(_0x3f17d1[_0x466c3f]!=='default')__createBinding(_0x4e0d79,_0x318cbd,_0x3f17d1[_0x466c3f]);}return __setModuleDefault(_0x4e0d79,_0x318cbd),_0x4e0d79;};}());Object[a4_0x3e5bf1(0xf7)](exports,a4_0x3e5bf1(0x10c),{'value':!![]}),exports[a4_0x3e5bf1(0x11b)]=void 0x0;const authService_1=require(a4_0x3e5bf1(0xfb)),tokenBlacklistService_1=require(a4_0x3e5bf1(0x120)),telegramBotService_1=require(a4_0x3e5bf1(0xfd));function a4_0x1990(){const _0x44fe4e=['getStats','role','AuthService','logout','2337768bGCGMe','__esModule','exp','findUnique','create','158065sqRktx','login','json','configurable','then','56myeSeD','connection','username','24703djOosR','808776ssNJrS','telegramBotService','AuthController','6vTUgFj','Failed\x20to\x20send\x20failed\x20login\x20notification:','body','call','../services/tokenBlacklistService','3360430fdfzMP','shop','tokenBlacklistService','../config/database','user','213597GZjdlU','getBlacklistStats','defineProperty','4WXahKE','sendLoginNotification','default','../services/authService','__importStar','../services/telegramBotService','prototype','unknown','writable','81586dVILCq','length','__setModuleDefault','token','get','authService'];a4_0x1990=function(){return _0x44fe4e;};return a4_0x1990();}class AuthController{constructor(){const _0x4ad339=a4_0x3e5bf1;this[_0x4ad339(0x111)]=async(_0x487eec,_0x501804,_0x434f2f)=>{const _0x51ef45=_0x4ad339;try{const _0x5a4351=_0x487eec[_0x51ef45(0x11e)],_0x537641=_0x487eec['ip']||_0x487eec[_0x51ef45(0x116)]['remoteAddress']||'unknown',_0x520b63=_0x487eec['get']('User-Agent')||_0x51ef45(0xff);let _0x18d707=![],_0x329ca8=null;try{const _0x31b2c3=await this['authService'][_0x51ef45(0x111)](_0x5a4351);_0x18d707=!![],_0x31b2c3[_0x51ef45(0x108)]===_0x51ef45(0xf1)&&_0x31b2c3[_0x51ef45(0xf4)]?.['id']&&(_0x329ca8=_0x31b2c3[_0x51ef45(0xf4)]['id']),_0x329ca8&&await telegramBotService_1[_0x51ef45(0x11a)][_0x51ef45(0xf9)](_0x329ca8,{'username':_0x5a4351[_0x51ef45(0x117)],'ipAddress':_0x537641,'userAgent':_0x520b63,'timestamp':new Date(),'success':!![]}),_0x501804['json']({'success':!![],'result':_0x31b2c3});}catch(_0x52cf61){try{const _0x4ce041=(await Promise['resolve']()[_0x51ef45(0x114)](()=>__importStar(require(_0x51ef45(0xf3)))))[_0x51ef45(0xfa)],_0xdb02be=await _0x4ce041['shop'][_0x51ef45(0x10e)]({'where':{'username':_0x5a4351[_0x51ef45(0x117)]},'select':{'id':!![]}});_0xdb02be&&await telegramBotService_1[_0x51ef45(0x11a)]['sendLoginNotification'](_0xdb02be['id'],{'username':_0x5a4351[_0x51ef45(0x117)],'ipAddress':_0x537641,'userAgent':_0x520b63,'timestamp':new Date(),'success':![]});}catch(_0x59f477){console['error'](_0x51ef45(0x11d),_0x59f477);}throw _0x52cf61;}}catch(_0x2d113b){_0x434f2f(_0x2d113b);}},this['me']=async(_0x132888,_0x1df5b0,_0x395b60)=>{const _0x928b13=_0x4ad339;try{const _0xeceb28=_0x132888[_0x928b13(0xf4)];_0x1df5b0[_0x928b13(0x112)]({'success':!![],'result':{'id':_0xeceb28?.['id'],'username':_0xeceb28?.[_0x928b13(0x117)],'role':_0xeceb28?.[_0x928b13(0x108)]}});}catch(_0x210176){_0x395b60(_0x210176);}},this[_0x4ad339(0x10a)]=async(_0x5be3b8,_0x5812f7,_0x539695)=>{const _0x12e970=_0x4ad339;try{const _0x455b5a=_0x5be3b8[_0x12e970(0x104)],_0x2d51fb=_0x5be3b8[_0x12e970(0xf4)];_0x455b5a&&_0x2d51fb?.['exp']&&tokenBlacklistService_1[_0x12e970(0xf2)]['blacklistToken'](_0x455b5a,_0x2d51fb[_0x12e970(0x10d)]),_0x5812f7[_0x12e970(0x112)]({'success':!![],'message':'Logged\x20out\x20successfully'});}catch(_0x58dec1){_0x539695(_0x58dec1);}},this[_0x4ad339(0xf6)]=async(_0xb813d5,_0x1864d2,_0x15d70a)=>{const _0x21cfa0=_0x4ad339;try{const _0x27a5cf=tokenBlacklistService_1[_0x21cfa0(0xf2)][_0x21cfa0(0x107)]();_0x1864d2[_0x21cfa0(0x112)]({'success':!![],'result':_0x27a5cf});}catch(_0x5b7d77){_0x15d70a(_0x5b7d77);}},this[_0x4ad339(0x106)]=new authService_1[(_0x4ad339(0x109))]();}}exports[a4_0x3e5bf1(0x11b)]=AuthController;