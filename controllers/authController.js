'use strict';const a4_0x53dd78=a4_0x37d1;(function(_0x564925,_0x1f79b5){const _0x31d482=a4_0x37d1,_0x418c55=_0x564925();while(!![]){try{const _0x3094bd=-parseInt(_0x31d482(0x1a3))/0x1*(parseInt(_0x31d482(0x19f))/0x2)+parseInt(_0x31d482(0x1a9))/0x3+parseInt(_0x31d482(0x187))/0x4*(-parseInt(_0x31d482(0x193))/0x5)+parseInt(_0x31d482(0x1ab))/0x6+-parseInt(_0x31d482(0x1a2))/0x7+parseInt(_0x31d482(0x1a7))/0x8*(parseInt(_0x31d482(0x1b0))/0x9)+parseInt(_0x31d482(0x1a5))/0xa;if(_0x3094bd===_0x1f79b5)break;else _0x418c55['push'](_0x418c55['shift']());}catch(_0x477b3a){_0x418c55['push'](_0x418c55['shift']());}}}(a4_0x5410,0x1bda1));function a4_0x37d1(_0x31da71,_0x1f08e6){_0x31da71=_0x31da71-0x17c;const _0x541020=a4_0x5410();let _0x37d1ef=_0x541020[_0x31da71];return _0x37d1ef;}var __createBinding=this&&this['__createBinding']||(Object[a4_0x53dd78(0x18b)]?function(_0x3f1bc7,_0x1321fe,_0x560edb,_0xe141fc){const _0x448fe0=a4_0x53dd78;if(_0xe141fc===undefined)_0xe141fc=_0x560edb;var _0x4846dc=Object[_0x448fe0(0x1a8)](_0x1321fe,_0x560edb);(!_0x4846dc||(_0x448fe0(0x1a0)in _0x4846dc?!_0x1321fe[_0x448fe0(0x1b4)]:_0x4846dc[_0x448fe0(0x182)]||_0x4846dc[_0x448fe0(0x1ac)]))&&(_0x4846dc={'enumerable':!![],'get':function(){return _0x1321fe[_0x560edb];}}),Object[_0x448fe0(0x19d)](_0x3f1bc7,_0xe141fc,_0x4846dc);}:function(_0x43d686,_0x4ce778,_0x46c7f9,_0x363022){if(_0x363022===undefined)_0x363022=_0x46c7f9;_0x43d686[_0x363022]=_0x4ce778[_0x46c7f9];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object['create']?function(_0x3756fb,_0x2eb64b){const _0x40d85a=a4_0x53dd78;Object[_0x40d85a(0x19d)](_0x3756fb,'default',{'enumerable':!![],'value':_0x2eb64b});}:function(_0x2e5b0a,_0x2ab86d){const _0x4a8010=a4_0x53dd78;_0x2e5b0a[_0x4a8010(0x1a1)]=_0x2ab86d;}),__importStar=this&&this['__importStar']||(function(){var _0x511465=function(_0x25b6b4){const _0x13fe29=a4_0x37d1;return _0x511465=Object[_0x13fe29(0x1aa)]||function(_0x418671){const _0x171af8=_0x13fe29;var _0x2d279b=[];for(var _0x51d3ac in _0x418671)if(Object['prototype'][_0x171af8(0x18e)][_0x171af8(0x17f)](_0x418671,_0x51d3ac))_0x2d279b[_0x2d279b['length']]=_0x51d3ac;return _0x2d279b;},_0x511465(_0x25b6b4);};return function(_0x5b5617){const _0x2df620=a4_0x37d1;if(_0x5b5617&&_0x5b5617[_0x2df620(0x1b4)])return _0x5b5617;var _0x2d7a32={};if(_0x5b5617!=null){for(var _0x2f8e10=_0x511465(_0x5b5617),_0x5274a5=0x0;_0x5274a5<_0x2f8e10[_0x2df620(0x1ad)];_0x5274a5++)if(_0x2f8e10[_0x5274a5]!=='default')__createBinding(_0x2d7a32,_0x5b5617,_0x2f8e10[_0x5274a5]);}return __setModuleDefault(_0x2d7a32,_0x5b5617),_0x2d7a32;};}());Object[a4_0x53dd78(0x19d)](exports,a4_0x53dd78(0x1b4),{'value':!![]}),exports[a4_0x53dd78(0x18d)]=void 0x0;const authService_1=require(a4_0x53dd78(0x17d)),tokenBlacklistService_1=require(a4_0x53dd78(0x19c)),telegramBotService_1=require(a4_0x53dd78(0x190));function a4_0x5410(){const _0xeacfde=['1416072yzEpjG','167644qYMDxa','blacklistToken','2226430vEJBYl','then','898792WOOIpk','getOwnPropertyDescriptor','615531bWukqs','getOwnPropertyNames','946662XWMItG','configurable','length','Logged\x20out\x20successfully','username','9mTxYqL','authService','AuthService','ipAddress','__esModule','shop','../services/authService','json','call','login','sendLoginNotification','writable','Failed\x20to\x20send\x20failed\x20login\x20notification:','logout','../config/database','findUnique','860HOnKDV','remoteAddress','token','geo','create','resolve','AuthController','hasOwnProperty','tokenBlacklistService','../services/telegramBotService','error','getStats','4975yThmPg','User-Agent','exp','role','unknown','user','getBlacklistStats','userAgent','telegramBotService','../services/tokenBlacklistService','defineProperty','body','2DxsZAI','get','default'];a4_0x5410=function(){return _0xeacfde;};return a4_0x5410();}class AuthController{constructor(){const _0xe5403=a4_0x53dd78;this[_0xe5403(0x180)]=async(_0x53c4b9,_0x38df08,_0xe0aa78)=>{const _0x4ff194=_0xe5403;try{const _0x211e0c=_0x53c4b9[_0x4ff194(0x19e)],_0x4173c6=_0x211e0c[_0x4ff194(0x1b3)]||_0x53c4b9['ip']||_0x53c4b9['connection'][_0x4ff194(0x188)]||'unknown',_0x42aa23=_0x211e0c[_0x4ff194(0x19a)]||_0x53c4b9[_0x4ff194(0x1a0)](_0x4ff194(0x194))||_0x4ff194(0x197),_0x1c46b0=_0x211e0c[_0x4ff194(0x18a)];let _0x19174b=![],_0x4c8180=null;try{const _0x5f04e5=await this['authService'][_0x4ff194(0x180)](_0x211e0c);_0x19174b=!![],_0x5f04e5['role']===_0x4ff194(0x17c)&&_0x5f04e5[_0x4ff194(0x198)]?.['id']&&(_0x4c8180=_0x5f04e5[_0x4ff194(0x198)]['id']),_0x4c8180&&await telegramBotService_1['telegramBotService'][_0x4ff194(0x181)](_0x4c8180,{'username':_0x211e0c[_0x4ff194(0x1af)],'ipAddress':_0x4173c6,'userAgent':_0x42aa23,'geo':_0x1c46b0,'timestamp':new Date(),'success':!![]}),_0x38df08[_0x4ff194(0x17e)]({'success':!![],'result':_0x5f04e5});}catch(_0xa25b7f){try{const _0x458f4f=(await Promise[_0x4ff194(0x18c)]()[_0x4ff194(0x1a6)](()=>__importStar(require(_0x4ff194(0x185)))))['default'],_0x21d1ca=await _0x458f4f[_0x4ff194(0x17c)][_0x4ff194(0x186)]({'where':{'username':_0x211e0c[_0x4ff194(0x1af)]},'select':{'id':!![]}});_0x21d1ca&&await telegramBotService_1[_0x4ff194(0x19b)][_0x4ff194(0x181)](_0x21d1ca['id'],{'username':_0x211e0c[_0x4ff194(0x1af)],'ipAddress':_0x4173c6,'userAgent':_0x42aa23,'geo':_0x1c46b0,'timestamp':new Date(),'success':![]});}catch(_0x23525e){console[_0x4ff194(0x191)](_0x4ff194(0x183),_0x23525e);}throw _0xa25b7f;}}catch(_0x275591){_0xe0aa78(_0x275591);}},this['me']=async(_0x92b533,_0x5a3172,_0x3005af)=>{const _0x1354db=_0xe5403;try{const _0x54e15e=_0x92b533[_0x1354db(0x198)];_0x5a3172[_0x1354db(0x17e)]({'success':!![],'result':{'id':_0x54e15e?.['id'],'username':_0x54e15e?.[_0x1354db(0x1af)],'role':_0x54e15e?.[_0x1354db(0x196)]}});}catch(_0x15a9a3){_0x3005af(_0x15a9a3);}},this[_0xe5403(0x184)]=async(_0x51e8cc,_0x5932e0,_0xe1fe82)=>{const _0x66b5f0=_0xe5403;try{const _0x3b6a18=_0x51e8cc[_0x66b5f0(0x189)],_0x375235=_0x51e8cc[_0x66b5f0(0x198)];_0x3b6a18&&_0x375235?.['exp']&&tokenBlacklistService_1[_0x66b5f0(0x18f)][_0x66b5f0(0x1a4)](_0x3b6a18,_0x375235[_0x66b5f0(0x195)]),_0x5932e0[_0x66b5f0(0x17e)]({'success':!![],'message':_0x66b5f0(0x1ae)});}catch(_0x59de44){_0xe1fe82(_0x59de44);}},this[_0xe5403(0x199)]=async(_0x19ca75,_0x2b25b1,_0x900f02)=>{const _0x29f884=_0xe5403;try{const _0x21ee7c=tokenBlacklistService_1[_0x29f884(0x18f)][_0x29f884(0x192)]();_0x2b25b1[_0x29f884(0x17e)]({'success':!![],'result':_0x21ee7c});}catch(_0x4be23){_0x900f02(_0x4be23);}},this[_0xe5403(0x1b1)]=new authService_1[(_0xe5403(0x1b2))]();}}exports[a4_0x53dd78(0x18d)]=AuthController;