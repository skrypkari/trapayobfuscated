'use strict';const a4_0x6b2eb4=a4_0x23ba;function a4_0x23ba(_0x92bc5b,_0x2d3f42){const _0x3bc8f1=a4_0x3bc8();return a4_0x23ba=function(_0x23baf0,_0x3b822d){_0x23baf0=_0x23baf0-0x146;let _0x241abb=_0x3bc8f1[_0x23baf0];return _0x241abb;},a4_0x23ba(_0x92bc5b,_0x2d3f42);}(function(_0x23e97b,_0x3d72a7){const _0x162425=a4_0x23ba,_0x23de09=_0x23e97b();while(!![]){try{const _0x224f97=parseInt(_0x162425(0x14b))/0x1+-parseInt(_0x162425(0x146))/0x2*(-parseInt(_0x162425(0x175))/0x3)+-parseInt(_0x162425(0x171))/0x4*(-parseInt(_0x162425(0x16f))/0x5)+parseInt(_0x162425(0x152))/0x6+-parseInt(_0x162425(0x16b))/0x7+-parseInt(_0x162425(0x147))/0x8*(-parseInt(_0x162425(0x14c))/0x9)+parseInt(_0x162425(0x15d))/0xa*(-parseInt(_0x162425(0x15c))/0xb);if(_0x224f97===_0x3d72a7)break;else _0x23de09['push'](_0x23de09['shift']());}catch(_0x56a592){_0x23de09['push'](_0x23de09['shift']());}}}(a4_0x3bc8,0xde0bc));var __createBinding=this&&this[a4_0x6b2eb4(0x169)]||(Object[a4_0x6b2eb4(0x167)]?function(_0x316073,_0x81e556,_0x3cc165,_0x3353b5){const _0x985238=a4_0x6b2eb4;if(_0x3353b5===undefined)_0x3353b5=_0x3cc165;var _0x103107=Object[_0x985238(0x179)](_0x81e556,_0x3cc165);(!_0x103107||(_0x985238(0x14e)in _0x103107?!_0x81e556[_0x985238(0x17a)]:_0x103107[_0x985238(0x157)]||_0x103107[_0x985238(0x16d)]))&&(_0x103107={'enumerable':!![],'get':function(){return _0x81e556[_0x3cc165];}}),Object[_0x985238(0x156)](_0x316073,_0x3353b5,_0x103107);}:function(_0x11743a,_0x5eb3c4,_0x4cc16d,_0x37da85){if(_0x37da85===undefined)_0x37da85=_0x4cc16d;_0x11743a[_0x37da85]=_0x5eb3c4[_0x4cc16d];}),__setModuleDefault=this&&this[a4_0x6b2eb4(0x163)]||(Object[a4_0x6b2eb4(0x167)]?function(_0x203adf,_0x3f6395){Object['defineProperty'](_0x203adf,'default',{'enumerable':!![],'value':_0x3f6395});}:function(_0x3357a7,_0x125bc8){_0x3357a7['default']=_0x125bc8;}),__importStar=this&&this[a4_0x6b2eb4(0x174)]||(function(){var _0x49559b=function(_0xe0b361){const _0x54a760=a4_0x23ba;return _0x49559b=Object[_0x54a760(0x162)]||function(_0x5b1ee8){const _0x487ba5=_0x54a760;var _0x33c7e7=[];for(var _0x53e7fe in _0x5b1ee8)if(Object[_0x487ba5(0x158)]['hasOwnProperty'][_0x487ba5(0x150)](_0x5b1ee8,_0x53e7fe))_0x33c7e7[_0x33c7e7[_0x487ba5(0x173)]]=_0x53e7fe;return _0x33c7e7;},_0x49559b(_0xe0b361);};return function(_0x57ac7f){const _0x28e7c7=a4_0x23ba;if(_0x57ac7f&&_0x57ac7f['__esModule'])return _0x57ac7f;var _0x526aa5={};if(_0x57ac7f!=null){for(var _0x14cf6c=_0x49559b(_0x57ac7f),_0x1bd945=0x0;_0x1bd945<_0x14cf6c[_0x28e7c7(0x173)];_0x1bd945++)if(_0x14cf6c[_0x1bd945]!==_0x28e7c7(0x14d))__createBinding(_0x526aa5,_0x57ac7f,_0x14cf6c[_0x1bd945]);}return __setModuleDefault(_0x526aa5,_0x57ac7f),_0x526aa5;};}());Object[a4_0x6b2eb4(0x156)](exports,'__esModule',{'value':!![]}),exports[a4_0x6b2eb4(0x164)]=void 0x0;const authService_1=require(a4_0x6b2eb4(0x172)),tokenBlacklistService_1=require('../services/tokenBlacklistService'),telegramBotService_1=require('../services/telegramBotService');class AuthController{constructor(){const _0xccc7d7=a4_0x6b2eb4;this[_0xccc7d7(0x170)]=async(_0x53e544,_0x59fca4,_0x4ddc8a)=>{const _0x5c45cc=_0xccc7d7;try{const _0x1b9a0e=_0x53e544[_0x5c45cc(0x168)],_0x2558b1=_0x53e544['ip']||_0x53e544[_0x5c45cc(0x178)][_0x5c45cc(0x15a)]||_0x5c45cc(0x177),_0x2c7042=_0x53e544[_0x5c45cc(0x14e)]('User-Agent')||_0x5c45cc(0x177);let _0x384b4d=![],_0x314cbb=null;try{const _0x11615d=await this['authService'][_0x5c45cc(0x170)](_0x1b9a0e);_0x384b4d=!![],_0x11615d['role']===_0x5c45cc(0x154)&&_0x11615d[_0x5c45cc(0x151)]?.['id']&&(_0x314cbb=_0x11615d[_0x5c45cc(0x151)]['id']),_0x314cbb&&await telegramBotService_1[_0x5c45cc(0x14f)][_0x5c45cc(0x161)](_0x314cbb,{'username':_0x1b9a0e[_0x5c45cc(0x14a)],'ipAddress':_0x2558b1,'userAgent':_0x2c7042,'timestamp':new Date(),'success':!![]}),_0x59fca4[_0x5c45cc(0x165)]({'success':!![],'result':_0x11615d});}catch(_0x440af6){try{const _0x951324=(await Promise[_0x5c45cc(0x16e)]()[_0x5c45cc(0x16c)](()=>__importStar(require(_0x5c45cc(0x15e)))))[_0x5c45cc(0x14d)],_0x3ebd3c=await _0x951324[_0x5c45cc(0x154)][_0x5c45cc(0x159)]({'where':{'username':_0x1b9a0e['username']},'select':{'id':!![]}});_0x3ebd3c&&await telegramBotService_1[_0x5c45cc(0x14f)][_0x5c45cc(0x161)](_0x3ebd3c['id'],{'username':_0x1b9a0e[_0x5c45cc(0x14a)],'ipAddress':_0x2558b1,'userAgent':_0x2c7042,'timestamp':new Date(),'success':![]});}catch(_0x1a66b1){console[_0x5c45cc(0x160)](_0x5c45cc(0x148),_0x1a66b1);}throw _0x440af6;}}catch(_0x1f953d){_0x4ddc8a(_0x1f953d);}},this['me']=async(_0x39ef8c,_0x127a18,_0x1d264d)=>{const _0x5745cf=_0xccc7d7;try{const _0x215d69=_0x39ef8c[_0x5745cf(0x151)];_0x127a18['json']({'success':!![],'result':{'id':_0x215d69?.['id'],'username':_0x215d69?.['username'],'role':_0x215d69?.[_0x5745cf(0x176)]}});}catch(_0x1cdf48){_0x1d264d(_0x1cdf48);}},this[_0xccc7d7(0x16a)]=async(_0x4b871c,_0x1494b8,_0x1c6efc)=>{const _0x20b029=_0xccc7d7;try{const _0x1d2811=_0x4b871c[_0x20b029(0x15b)],_0x5f2edb=_0x4b871c[_0x20b029(0x151)];_0x1d2811&&_0x5f2edb?.['exp']&&tokenBlacklistService_1[_0x20b029(0x15f)][_0x20b029(0x149)](_0x1d2811,_0x5f2edb[_0x20b029(0x166)]),_0x1494b8[_0x20b029(0x165)]({'success':!![],'message':_0x20b029(0x153)});}catch(_0x5ab2db){_0x1c6efc(_0x5ab2db);}},this['getBlacklistStats']=async(_0xd42d3d,_0x47ef40,_0x2cc440)=>{const _0xd22661=_0xccc7d7;try{const _0x5568d1=tokenBlacklistService_1['tokenBlacklistService']['getStats']();_0x47ef40[_0xd22661(0x165)]({'success':!![],'result':_0x5568d1});}catch(_0x39046a){_0x2cc440(_0x39046a);}},this[_0xccc7d7(0x155)]=new authService_1['AuthService']();}}exports[a4_0x6b2eb4(0x164)]=AuthController;function a4_0x3bc8(){const _0x44a94d=['getOwnPropertyNames','__setModuleDefault','AuthController','json','exp','create','body','__createBinding','logout','2840747QEDekk','then','configurable','resolve','4264325qbeFFS','login','4PQdLVW','../services/authService','length','__importStar','313167sygbLY','role','unknown','connection','getOwnPropertyDescriptor','__esModule','26DLSScY','20408ybRNzy','Failed\x20to\x20send\x20failed\x20login\x20notification:','blacklistToken','username','1568891nsPnrb','747ZqavUS','default','get','telegramBotService','call','user','8253636qoeUNL','Logged\x20out\x20successfully','shop','authService','defineProperty','writable','prototype','findUnique','remoteAddress','token','33vMqHLw','13502770ilNcfP','../config/database','tokenBlacklistService','error','sendLoginNotification'];a4_0x3bc8=function(){return _0x44a94d;};return a4_0x3bc8();}