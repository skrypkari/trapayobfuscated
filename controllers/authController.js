'use strict';const a4_0x57f935=a4_0x562a;(function(_0x2fd600,_0x31cbd7){const _0x79d70e=a4_0x562a,_0x395380=_0x2fd600();while(!![]){try{const _0x55f99f=-parseInt(_0x79d70e(0x170))/0x1*(-parseInt(_0x79d70e(0x173))/0x2)+-parseInt(_0x79d70e(0x172))/0x3+parseInt(_0x79d70e(0x16c))/0x4*(parseInt(_0x79d70e(0x15a))/0x5)+parseInt(_0x79d70e(0x16b))/0x6+-parseInt(_0x79d70e(0x178))/0x7+-parseInt(_0x79d70e(0x156))/0x8+-parseInt(_0x79d70e(0x157))/0x9;if(_0x55f99f===_0x31cbd7)break;else _0x395380['push'](_0x395380['shift']());}catch(_0x5c5999){_0x395380['push'](_0x395380['shift']());}}}(a4_0x3ec0,0x61aa3));function a4_0x3ec0(){const _0x535b63=['logout','json','remoteAddress','body','Failed\x20to\x20send\x20failed\x20login\x20notification:','create','connection','login','telegramBotService','shop','getStats','blacklistToken','writable','getOwnPropertyNames','get','sendLoginNotification','2906844XxyObX','2692292RMZQto','../services/tokenBlacklistService','__esModule','__importStar','12kAHUkI','__setModuleDefault','518757yjZHAQ','131946wOkCVo','user','token','exp','tokenBlacklistService','3436006oCmLcQ','getBlacklistStats','then','unknown','getOwnPropertyDescriptor','../config/database','defineProperty','username','__createBinding','length','default','error','authService','prototype','../services/telegramBotService','findUnique','Logged\x20out\x20successfully','role','configurable','AuthService','2646944yUOmYf','4990887AZIVpO','call','resolve','5aZnAUg'];a4_0x3ec0=function(){return _0x535b63;};return a4_0x3ec0();}var __createBinding=this&&this[a4_0x57f935(0x180)]||(Object[a4_0x57f935(0x160)]?function(_0x4f870e,_0x386f52,_0x3edccd,_0x30c03f){const _0x291f15=a4_0x57f935;if(_0x30c03f===undefined)_0x30c03f=_0x3edccd;var _0x317971=Object[_0x291f15(0x17c)](_0x386f52,_0x3edccd);(!_0x317971||(_0x291f15(0x169)in _0x317971?!_0x386f52[_0x291f15(0x16e)]:_0x317971[_0x291f15(0x167)]||_0x317971[_0x291f15(0x154)]))&&(_0x317971={'enumerable':!![],'get':function(){return _0x386f52[_0x3edccd];}}),Object['defineProperty'](_0x4f870e,_0x30c03f,_0x317971);}:function(_0x284c13,_0x3eaf78,_0x4d292e,_0xec303c){if(_0xec303c===undefined)_0xec303c=_0x4d292e;_0x284c13[_0xec303c]=_0x3eaf78[_0x4d292e];}),__setModuleDefault=this&&this[a4_0x57f935(0x171)]||(Object['create']?function(_0x94fd60,_0x4c6087){const _0x2726a8=a4_0x57f935;Object[_0x2726a8(0x17e)](_0x94fd60,'default',{'enumerable':!![],'value':_0x4c6087});}:function(_0x48927b,_0x33be69){const _0x489d8f=a4_0x57f935;_0x48927b[_0x489d8f(0x14c)]=_0x33be69;}),__importStar=this&&this[a4_0x57f935(0x16f)]||(function(){var _0x3ff13b=function(_0x17957b){const _0x4c3a2b=a4_0x562a;return _0x3ff13b=Object[_0x4c3a2b(0x168)]||function(_0x55a8da){const _0x4d50a2=_0x4c3a2b;var _0x3abd1a=[];for(var _0x31081f in _0x55a8da)if(Object[_0x4d50a2(0x14f)]['hasOwnProperty'][_0x4d50a2(0x158)](_0x55a8da,_0x31081f))_0x3abd1a[_0x3abd1a[_0x4d50a2(0x181)]]=_0x31081f;return _0x3abd1a;},_0x3ff13b(_0x17957b);};return function(_0xefb6fb){const _0x31b7eb=a4_0x562a;if(_0xefb6fb&&_0xefb6fb[_0x31b7eb(0x16e)])return _0xefb6fb;var _0x3e31f1={};if(_0xefb6fb!=null){for(var _0x63d85c=_0x3ff13b(_0xefb6fb),_0x9f6a9=0x0;_0x9f6a9<_0x63d85c[_0x31b7eb(0x181)];_0x9f6a9++)if(_0x63d85c[_0x9f6a9]!==_0x31b7eb(0x14c))__createBinding(_0x3e31f1,_0xefb6fb,_0x63d85c[_0x9f6a9]);}return __setModuleDefault(_0x3e31f1,_0xefb6fb),_0x3e31f1;};}());Object[a4_0x57f935(0x17e)](exports,'__esModule',{'value':!![]}),exports['AuthController']=void 0x0;const authService_1=require('../services/authService'),tokenBlacklistService_1=require(a4_0x57f935(0x16d)),telegramBotService_1=require(a4_0x57f935(0x150));class AuthController{constructor(){const _0x33962a=a4_0x57f935;this['login']=async(_0x5ef261,_0x516eaf,_0x58655e)=>{const _0x33536b=a4_0x562a;try{const _0x593bd9=_0x5ef261[_0x33536b(0x15e)],_0x5317c0=_0x5ef261['ip']||_0x5ef261[_0x33536b(0x161)][_0x33536b(0x15d)]||_0x33536b(0x17b),_0x14279e=_0x5ef261[_0x33536b(0x169)]('User-Agent')||'unknown';let _0x51dbe5=![],_0x1b31d1=null;try{const _0x5c46f9=await this['authService'][_0x33536b(0x162)](_0x593bd9);_0x51dbe5=!![],_0x5c46f9[_0x33536b(0x153)]===_0x33536b(0x164)&&_0x5c46f9['user']?.['id']&&(_0x1b31d1=_0x5c46f9[_0x33536b(0x174)]['id']),_0x1b31d1&&await telegramBotService_1[_0x33536b(0x163)]['sendLoginNotification'](_0x1b31d1,{'username':_0x593bd9[_0x33536b(0x17f)],'ipAddress':_0x5317c0,'userAgent':_0x14279e,'timestamp':new Date(),'success':!![]}),_0x516eaf[_0x33536b(0x15c)]({'success':!![],'result':_0x5c46f9});}catch(_0x41dda0){try{const _0x2d7f78=(await Promise[_0x33536b(0x159)]()[_0x33536b(0x17a)](()=>__importStar(require(_0x33536b(0x17d)))))['default'],_0x4d1b55=await _0x2d7f78[_0x33536b(0x164)][_0x33536b(0x151)]({'where':{'username':_0x593bd9[_0x33536b(0x17f)]},'select':{'id':!![]}});_0x4d1b55&&await telegramBotService_1[_0x33536b(0x163)][_0x33536b(0x16a)](_0x4d1b55['id'],{'username':_0x593bd9[_0x33536b(0x17f)],'ipAddress':_0x5317c0,'userAgent':_0x14279e,'timestamp':new Date(),'success':![]});}catch(_0x46521e){console[_0x33536b(0x14d)](_0x33536b(0x15f),_0x46521e);}throw _0x41dda0;}}catch(_0x1df07d){_0x58655e(_0x1df07d);}},this['me']=async(_0xc48d63,_0x1fe563,_0x449269)=>{const _0x2675b5=a4_0x562a;try{const _0x12834d=_0xc48d63[_0x2675b5(0x174)];_0x1fe563['json']({'success':!![],'result':{'id':_0x12834d?.['id'],'username':_0x12834d?.[_0x2675b5(0x17f)],'role':_0x12834d?.[_0x2675b5(0x153)]}});}catch(_0x4c3f02){_0x449269(_0x4c3f02);}},this[_0x33962a(0x15b)]=async(_0x318c6f,_0x524a8a,_0x2c99d5)=>{const _0x2c7877=_0x33962a;try{const _0x49e3c0=_0x318c6f[_0x2c7877(0x175)],_0x3e0470=_0x318c6f[_0x2c7877(0x174)];_0x49e3c0&&_0x3e0470?.[_0x2c7877(0x176)]&&tokenBlacklistService_1[_0x2c7877(0x177)][_0x2c7877(0x166)](_0x49e3c0,_0x3e0470[_0x2c7877(0x176)]),_0x524a8a[_0x2c7877(0x15c)]({'success':!![],'message':_0x2c7877(0x152)});}catch(_0x1cb3cc){_0x2c99d5(_0x1cb3cc);}},this[_0x33962a(0x179)]=async(_0x1f56ca,_0x5911dd,_0x3c65df)=>{const _0x404bed=_0x33962a;try{const _0x3945ea=tokenBlacklistService_1[_0x404bed(0x177)][_0x404bed(0x165)]();_0x5911dd[_0x404bed(0x15c)]({'success':!![],'result':_0x3945ea});}catch(_0xaaf49f){_0x3c65df(_0xaaf49f);}},this[_0x33962a(0x14e)]=new authService_1[(_0x33962a(0x155))]();}}function a4_0x562a(_0xe2766c,_0x580755){const _0x3ec02b=a4_0x3ec0();return a4_0x562a=function(_0x562a0b,_0x37242c){_0x562a0b=_0x562a0b-0x14c;let _0xa9bae2=_0x3ec02b[_0x562a0b];return _0xa9bae2;},a4_0x562a(_0xe2766c,_0x580755);}exports['AuthController']=AuthController;