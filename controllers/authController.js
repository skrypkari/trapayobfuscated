'use strict';function a4_0x44fd(_0x38fecf,_0x2f8365){const _0x4dd714=a4_0x4dd7();return a4_0x44fd=function(_0x44fd0b,_0x35d258){_0x44fd0b=_0x44fd0b-0x71;let _0xfab1f2=_0x4dd714[_0x44fd0b];return _0xfab1f2;},a4_0x44fd(_0x38fecf,_0x2f8365);}const a4_0x3d577d=a4_0x44fd;(function(_0x336303,_0x5e42b8){const _0x1526b8=a4_0x44fd,_0x5acb75=_0x336303();while(!![]){try{const _0x58afe4=-parseInt(_0x1526b8(0x89))/0x1*(-parseInt(_0x1526b8(0xa0))/0x2)+-parseInt(_0x1526b8(0x9e))/0x3*(-parseInt(_0x1526b8(0x72))/0x4)+parseInt(_0x1526b8(0x7f))/0x5+-parseInt(_0x1526b8(0x8e))/0x6*(parseInt(_0x1526b8(0x7a))/0x7)+parseInt(_0x1526b8(0x90))/0x8+-parseInt(_0x1526b8(0x83))/0x9*(-parseInt(_0x1526b8(0x85))/0xa)+-parseInt(_0x1526b8(0x98))/0xb;if(_0x58afe4===_0x5e42b8)break;else _0x5acb75['push'](_0x5acb75['shift']());}catch(_0x89e8f4){_0x5acb75['push'](_0x5acb75['shift']());}}}(a4_0x4dd7,0xa16e8));var __createBinding=this&&this[a4_0x3d577d(0x7b)]||(Object[a4_0x3d577d(0xa3)]?function(_0x1eae17,_0x23f524,_0x40cbaf,_0x4511f6){const _0x55820d=a4_0x3d577d;if(_0x4511f6===undefined)_0x4511f6=_0x40cbaf;var _0x11131d=Object[_0x55820d(0x91)](_0x23f524,_0x40cbaf);(!_0x11131d||(_0x55820d(0x77)in _0x11131d?!_0x23f524[_0x55820d(0x8b)]:_0x11131d[_0x55820d(0x97)]||_0x11131d[_0x55820d(0x74)]))&&(_0x11131d={'enumerable':!![],'get':function(){return _0x23f524[_0x40cbaf];}}),Object['defineProperty'](_0x1eae17,_0x4511f6,_0x11131d);}:function(_0x1fa259,_0x3db2dc,_0x1eb6f1,_0x44ee90){if(_0x44ee90===undefined)_0x44ee90=_0x1eb6f1;_0x1fa259[_0x44ee90]=_0x3db2dc[_0x1eb6f1];}),__setModuleDefault=this&&this[a4_0x3d577d(0x9a)]||(Object[a4_0x3d577d(0xa3)]?function(_0x49ec58,_0x13d36d){const _0x339cf7=a4_0x3d577d;Object[_0x339cf7(0x75)](_0x49ec58,_0x339cf7(0x87),{'enumerable':!![],'value':_0x13d36d});}:function(_0x164a56,_0x3cf96c){_0x164a56['default']=_0x3cf96c;}),__importStar=this&&this[a4_0x3d577d(0x99)]||(function(){var _0x11b91e=function(_0x40da35){const _0x484468=a4_0x44fd;return _0x11b91e=Object[_0x484468(0x81)]||function(_0x28d138){const _0xb09a4c=_0x484468;var _0x5b9b4f=[];for(var _0x1ec9c8 in _0x28d138)if(Object[_0xb09a4c(0xa5)][_0xb09a4c(0x96)]['call'](_0x28d138,_0x1ec9c8))_0x5b9b4f[_0x5b9b4f[_0xb09a4c(0x86)]]=_0x1ec9c8;return _0x5b9b4f;},_0x11b91e(_0x40da35);};return function(_0x5e1fc7){const _0xf09a12=a4_0x44fd;if(_0x5e1fc7&&_0x5e1fc7[_0xf09a12(0x8b)])return _0x5e1fc7;var _0x281e4c={};if(_0x5e1fc7!=null){for(var _0x2d805d=_0x11b91e(_0x5e1fc7),_0x3317b1=0x0;_0x3317b1<_0x2d805d[_0xf09a12(0x86)];_0x3317b1++)if(_0x2d805d[_0x3317b1]!=='default')__createBinding(_0x281e4c,_0x5e1fc7,_0x2d805d[_0x3317b1]);}return __setModuleDefault(_0x281e4c,_0x5e1fc7),_0x281e4c;};}());Object[a4_0x3d577d(0x75)](exports,a4_0x3d577d(0x8b),{'value':!![]}),exports[a4_0x3d577d(0x78)]=void 0x0;function a4_0x4dd7(){const _0x1fc5a5=['remoteAddress','telegramBotService','901770IygLkL','token','getOwnPropertyNames','json','11511qPLbnP','username','4810BARBZl','length','default','../services/tokenBlacklistService','1192395heQDzX','User-Agent','__esModule','then','login','102VtcIxn','../config/database','8394016uzRpCx','getOwnPropertyDescriptor','user','getBlacklistStats','exp','role','hasOwnProperty','writable','31464059UysKTG','__importStar','__setModuleDefault','../services/authService','connection','shop','431673YvNXIP','sendLoginNotification','2FEEfDO','findUnique','unknown','create','authService','prototype','getStats','16aTclix','tokenBlacklistService','configurable','defineProperty','body','get','AuthController','logout','37541LLbSAy','__createBinding','Logged\x20out\x20successfully'];a4_0x4dd7=function(){return _0x1fc5a5;};return a4_0x4dd7();}const authService_1=require(a4_0x3d577d(0x9b)),tokenBlacklistService_1=require(a4_0x3d577d(0x88)),telegramBotService_1=require('../services/telegramBotService');class AuthController{constructor(){const _0x242887=a4_0x3d577d;this[_0x242887(0x8d)]=async(_0x18d3b3,_0x56055c,_0x3a0444)=>{const _0x30ca77=_0x242887;try{const _0x402e56=_0x18d3b3[_0x30ca77(0x76)],_0xe464b4=_0x18d3b3['ip']||_0x18d3b3[_0x30ca77(0x9c)][_0x30ca77(0x7d)]||'unknown',_0x4f1026=_0x18d3b3[_0x30ca77(0x77)](_0x30ca77(0x8a))||_0x30ca77(0xa2);let _0x147f52=![],_0xe8aa95=null;try{const _0xf4f899=await this[_0x30ca77(0xa4)][_0x30ca77(0x8d)](_0x402e56);_0x147f52=!![],_0xf4f899[_0x30ca77(0x95)]===_0x30ca77(0x9d)&&_0xf4f899[_0x30ca77(0x92)]?.['id']&&(_0xe8aa95=_0xf4f899[_0x30ca77(0x92)]['id']),_0xe8aa95&&await telegramBotService_1[_0x30ca77(0x7e)][_0x30ca77(0x9f)](_0xe8aa95,{'username':_0x402e56[_0x30ca77(0x84)],'ipAddress':_0xe464b4,'userAgent':_0x4f1026,'timestamp':new Date(),'success':!![]}),_0x56055c[_0x30ca77(0x82)]({'success':!![],'result':_0xf4f899});}catch(_0x47fa1f){try{const _0xafc7c3=(await Promise['resolve']()[_0x30ca77(0x8c)](()=>__importStar(require(_0x30ca77(0x8f)))))[_0x30ca77(0x87)],_0x4bcce7=await _0xafc7c3[_0x30ca77(0x9d)][_0x30ca77(0xa1)]({'where':{'username':_0x402e56[_0x30ca77(0x84)]},'select':{'id':!![]}});_0x4bcce7&&await telegramBotService_1['telegramBotService'][_0x30ca77(0x9f)](_0x4bcce7['id'],{'username':_0x402e56['username'],'ipAddress':_0xe464b4,'userAgent':_0x4f1026,'timestamp':new Date(),'success':![]});}catch(_0x903c89){console['error']('Failed\x20to\x20send\x20failed\x20login\x20notification:',_0x903c89);}throw _0x47fa1f;}}catch(_0xa7e7e5){_0x3a0444(_0xa7e7e5);}},this['me']=async(_0x43db87,_0x3b77b8,_0x2049d4)=>{const _0x43f1d1=_0x242887;try{const _0x225ed0=_0x43db87[_0x43f1d1(0x92)];_0x3b77b8[_0x43f1d1(0x82)]({'success':!![],'result':{'id':_0x225ed0?.['id'],'username':_0x225ed0?.[_0x43f1d1(0x84)],'role':_0x225ed0?.['role']}});}catch(_0x540f40){_0x2049d4(_0x540f40);}},this[_0x242887(0x79)]=async(_0x4c6d11,_0x444142,_0x18730d)=>{const _0x19256d=_0x242887;try{const _0x4dad55=_0x4c6d11[_0x19256d(0x80)],_0x32d5d0=_0x4c6d11[_0x19256d(0x92)];_0x4dad55&&_0x32d5d0?.['exp']&&tokenBlacklistService_1[_0x19256d(0x73)]['blacklistToken'](_0x4dad55,_0x32d5d0[_0x19256d(0x94)]),_0x444142[_0x19256d(0x82)]({'success':!![],'message':_0x19256d(0x7c)});}catch(_0x58f578){_0x18730d(_0x58f578);}},this[_0x242887(0x93)]=async(_0xbe59ac,_0x6e38aa,_0x2f6189)=>{const _0x3fad9a=_0x242887;try{const _0x55a534=tokenBlacklistService_1['tokenBlacklistService'][_0x3fad9a(0x71)]();_0x6e38aa[_0x3fad9a(0x82)]({'success':!![],'result':_0x55a534});}catch(_0x5997a8){_0x2f6189(_0x5997a8);}},this['authService']=new authService_1['AuthService']();}}exports['AuthController']=AuthController;