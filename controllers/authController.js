'use strict';const a4_0x358416=a4_0x1565;(function(_0x575440,_0x163a7e){const _0x3dd715=a4_0x1565,_0x20fc87=_0x575440();while(!![]){try{const _0x373512=parseInt(_0x3dd715(0xcd))/0x1*(-parseInt(_0x3dd715(0xc2))/0x2)+-parseInt(_0x3dd715(0xca))/0x3*(parseInt(_0x3dd715(0xcc))/0x4)+-parseInt(_0x3dd715(0xc4))/0x5*(parseInt(_0x3dd715(0xbb))/0x6)+-parseInt(_0x3dd715(0xe7))/0x7+parseInt(_0x3dd715(0xde))/0x8*(parseInt(_0x3dd715(0xce))/0x9)+parseInt(_0x3dd715(0xda))/0xa*(-parseInt(_0x3dd715(0xdc))/0xb)+parseInt(_0x3dd715(0xc9))/0xc;if(_0x373512===_0x163a7e)break;else _0x20fc87['push'](_0x20fc87['shift']());}catch(_0x3185bd){_0x20fc87['push'](_0x20fc87['shift']());}}}(a4_0x3372,0x90025));function a4_0x3372(){const _0x194754=['shop','default','user','AuthController','blacklistToken','json','2823170jbRHdr','telegramBotService','role','authService','__setModuleDefault','resolve','prototype','defineProperty','Failed\x20to\x20send\x20failed\x20login\x20notification:','User-Agent','sendLoginNotification','3167838selVZw','__importStar','call','../services/telegramBotService','Logged\x20out\x20successfully','tokenBlacklistService','configurable','42kRnGTl','findUnique','5VzzbGv','logout','__esModule','connection','getOwnPropertyDescriptor','32290368lqIJve','3NRtuau','getStats','1494868QBrNRx','18503AiMlft','99kNqcph','exp','token','get','writable','unknown','username','body','getBlacklistStats','../services/authService','getOwnPropertyNames','create','432740uIpwrQ','login','231ByudIX','length','364592wULexu','../config/database','then'];a4_0x3372=function(){return _0x194754;};return a4_0x3372();}var __createBinding=this&&this['__createBinding']||(Object[a4_0x358416(0xd9)]?function(_0xfe3113,_0x21c9f0,_0x3bad42,_0x563389){const _0x5f0608=a4_0x358416;if(_0x563389===undefined)_0x563389=_0x3bad42;var _0x257996=Object[_0x5f0608(0xc8)](_0x21c9f0,_0x3bad42);(!_0x257996||(_0x5f0608(0xd1)in _0x257996?!_0x21c9f0[_0x5f0608(0xc6)]:_0x257996[_0x5f0608(0xd2)]||_0x257996[_0x5f0608(0xc1)]))&&(_0x257996={'enumerable':!![],'get':function(){return _0x21c9f0[_0x3bad42];}}),Object['defineProperty'](_0xfe3113,_0x563389,_0x257996);}:function(_0x14311e,_0x1810a3,_0x37883c,_0x10e2cb){if(_0x10e2cb===undefined)_0x10e2cb=_0x37883c;_0x14311e[_0x10e2cb]=_0x1810a3[_0x37883c];}),__setModuleDefault=this&&this[a4_0x358416(0xeb)]||(Object[a4_0x358416(0xd9)]?function(_0x33c0f2,_0x226099){const _0x161620=a4_0x358416;Object[_0x161620(0xb7)](_0x33c0f2,_0x161620(0xe2),{'enumerable':!![],'value':_0x226099});}:function(_0x63eed,_0x43056c){const _0x263c7c=a4_0x358416;_0x63eed[_0x263c7c(0xe2)]=_0x43056c;}),__importStar=this&&this[a4_0x358416(0xbc)]||(function(){var _0x11e89a=function(_0x11ac84){const _0x42fa7d=a4_0x1565;return _0x11e89a=Object[_0x42fa7d(0xd8)]||function(_0x19e63a){const _0x57e239=_0x42fa7d;var _0x70d5f4=[];for(var _0x53e573 in _0x19e63a)if(Object[_0x57e239(0xb6)]['hasOwnProperty'][_0x57e239(0xbd)](_0x19e63a,_0x53e573))_0x70d5f4[_0x70d5f4['length']]=_0x53e573;return _0x70d5f4;},_0x11e89a(_0x11ac84);};return function(_0x501d10){const _0x75f69a=a4_0x1565;if(_0x501d10&&_0x501d10['__esModule'])return _0x501d10;var _0x13dbc2={};if(_0x501d10!=null){for(var _0x2e3527=_0x11e89a(_0x501d10),_0x4240b6=0x0;_0x4240b6<_0x2e3527[_0x75f69a(0xdd)];_0x4240b6++)if(_0x2e3527[_0x4240b6]!==_0x75f69a(0xe2))__createBinding(_0x13dbc2,_0x501d10,_0x2e3527[_0x4240b6]);}return __setModuleDefault(_0x13dbc2,_0x501d10),_0x13dbc2;};}());Object[a4_0x358416(0xb7)](exports,'__esModule',{'value':!![]}),exports[a4_0x358416(0xe4)]=void 0x0;const authService_1=require(a4_0x358416(0xd7)),tokenBlacklistService_1=require('../services/tokenBlacklistService'),telegramBotService_1=require(a4_0x358416(0xbe));function a4_0x1565(_0x1e50df,_0x5ae3f0){const _0x3372ec=a4_0x3372();return a4_0x1565=function(_0x1565f3,_0xd925b){_0x1565f3=_0x1565f3-0xb6;let _0x4ab26b=_0x3372ec[_0x1565f3];return _0x4ab26b;},a4_0x1565(_0x1e50df,_0x5ae3f0);}class AuthController{constructor(){const _0x2f6dcd=a4_0x358416;this[_0x2f6dcd(0xdb)]=async(_0x10b63e,_0x9114bb,_0x5752b4)=>{const _0x1574b1=_0x2f6dcd;try{const _0x678316=_0x10b63e[_0x1574b1(0xd5)],_0x286a44=_0x10b63e['ip']||_0x10b63e[_0x1574b1(0xc7)]['remoteAddress']||_0x1574b1(0xd3),_0x1a49ff=_0x10b63e[_0x1574b1(0xd1)](_0x1574b1(0xb9))||_0x1574b1(0xd3);let _0x2c3a78=![],_0x29ca0e=null;try{const _0x3445b7=await this[_0x1574b1(0xea)][_0x1574b1(0xdb)](_0x678316);_0x2c3a78=!![],_0x3445b7['role']===_0x1574b1(0xe1)&&_0x3445b7[_0x1574b1(0xe3)]?.['id']&&(_0x29ca0e=_0x3445b7['user']['id']),_0x29ca0e&&await telegramBotService_1['telegramBotService'][_0x1574b1(0xba)](_0x29ca0e,{'username':_0x678316[_0x1574b1(0xd4)],'ipAddress':_0x286a44,'userAgent':_0x1a49ff,'timestamp':new Date(),'success':!![]}),_0x9114bb[_0x1574b1(0xe6)]({'success':!![],'result':_0x3445b7});}catch(_0x4326d4){try{const _0x412a2e=(await Promise[_0x1574b1(0xec)]()[_0x1574b1(0xe0)](()=>__importStar(require(_0x1574b1(0xdf)))))[_0x1574b1(0xe2)],_0x5ba26e=await _0x412a2e[_0x1574b1(0xe1)][_0x1574b1(0xc3)]({'where':{'username':_0x678316[_0x1574b1(0xd4)]},'select':{'id':!![]}});_0x5ba26e&&await telegramBotService_1[_0x1574b1(0xe8)][_0x1574b1(0xba)](_0x5ba26e['id'],{'username':_0x678316[_0x1574b1(0xd4)],'ipAddress':_0x286a44,'userAgent':_0x1a49ff,'timestamp':new Date(),'success':![]});}catch(_0x255081){console['error'](_0x1574b1(0xb8),_0x255081);}throw _0x4326d4;}}catch(_0x3c5c3b){_0x5752b4(_0x3c5c3b);}},this['me']=async(_0xcad9a1,_0x12a133,_0x253e42)=>{const _0x462fd8=_0x2f6dcd;try{const _0x3cd3a5=_0xcad9a1[_0x462fd8(0xe3)];_0x12a133[_0x462fd8(0xe6)]({'success':!![],'result':{'id':_0x3cd3a5?.['id'],'username':_0x3cd3a5?.['username'],'role':_0x3cd3a5?.[_0x462fd8(0xe9)]}});}catch(_0x2122c){_0x253e42(_0x2122c);}},this[_0x2f6dcd(0xc5)]=async(_0xb73385,_0x263a0c,_0x4c3aa2)=>{const _0x1da1a4=_0x2f6dcd;try{const _0x497f4b=_0xb73385[_0x1da1a4(0xd0)],_0x3f8567=_0xb73385[_0x1da1a4(0xe3)];_0x497f4b&&_0x3f8567?.[_0x1da1a4(0xcf)]&&tokenBlacklistService_1[_0x1da1a4(0xc0)][_0x1da1a4(0xe5)](_0x497f4b,_0x3f8567[_0x1da1a4(0xcf)]),_0x263a0c['json']({'success':!![],'message':_0x1da1a4(0xbf)});}catch(_0x599bc2){_0x4c3aa2(_0x599bc2);}},this[_0x2f6dcd(0xd6)]=async(_0x53c28b,_0x2bf665,_0x49fdd7)=>{const _0x4ad3bb=_0x2f6dcd;try{const _0x56391f=tokenBlacklistService_1[_0x4ad3bb(0xc0)][_0x4ad3bb(0xcb)]();_0x2bf665['json']({'success':!![],'result':_0x56391f});}catch(_0x2d53db){_0x49fdd7(_0x2d53db);}},this[_0x2f6dcd(0xea)]=new authService_1['AuthService']();}}exports[a4_0x358416(0xe4)]=AuthController;