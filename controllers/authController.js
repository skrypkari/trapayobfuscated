'use strict';const a4_0x428be8=a4_0x3c45;(function(_0x1c3b90,_0x40a061){const _0x373ded=a4_0x3c45,_0x3e2fb9=_0x1c3b90();while(!![]){try{const _0x3ed3f5=-parseInt(_0x373ded(0x108))/0x1+-parseInt(_0x373ded(0xee))/0x2+parseInt(_0x373ded(0xf9))/0x3*(-parseInt(_0x373ded(0x111))/0x4)+-parseInt(_0x373ded(0xf7))/0x5+parseInt(_0x373ded(0xf6))/0x6+parseInt(_0x373ded(0xea))/0x7*(-parseInt(_0x373ded(0xfa))/0x8)+parseInt(_0x373ded(0xec))/0x9;if(_0x3ed3f5===_0x40a061)break;else _0x3e2fb9['push'](_0x3e2fb9['shift']());}catch(_0x3e0628){_0x3e2fb9['push'](_0x3e2fb9['shift']());}}}(a4_0xf973,0x331ac));var __createBinding=this&&this['__createBinding']||(Object[a4_0x428be8(0xf5)]?function(_0x45a586,_0x29e103,_0x358dba,_0x5b69fd){const _0x52247e=a4_0x428be8;if(_0x5b69fd===undefined)_0x5b69fd=_0x358dba;var _0x31800a=Object[_0x52247e(0x107)](_0x29e103,_0x358dba);(!_0x31800a||(_0x52247e(0xfb)in _0x31800a?!_0x29e103[_0x52247e(0x10c)]:_0x31800a['writable']||_0x31800a[_0x52247e(0x110)]))&&(_0x31800a={'enumerable':!![],'get':function(){return _0x29e103[_0x358dba];}}),Object[_0x52247e(0x112)](_0x45a586,_0x5b69fd,_0x31800a);}:function(_0x3df32f,_0x5559c1,_0x5dab1a,_0x4daf62){if(_0x4daf62===undefined)_0x4daf62=_0x5dab1a;_0x3df32f[_0x4daf62]=_0x5559c1[_0x5dab1a];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a4_0x428be8(0xf5)]?function(_0x43e087,_0x551810){const _0x2f4d77=a4_0x428be8;Object[_0x2f4d77(0x112)](_0x43e087,'default',{'enumerable':!![],'value':_0x551810});}:function(_0x217531,_0x3b0cbc){const _0x5c46cc=a4_0x428be8;_0x217531[_0x5c46cc(0xf8)]=_0x3b0cbc;}),__importStar=this&&this[a4_0x428be8(0x100)]||(function(){var _0x113271=function(_0x25a547){return _0x113271=Object['getOwnPropertyNames']||function(_0x33f3f9){var _0x35f629=[];for(var _0x7bb1db in _0x33f3f9)if(Object['prototype']['hasOwnProperty']['call'](_0x33f3f9,_0x7bb1db))_0x35f629[_0x35f629['length']]=_0x7bb1db;return _0x35f629;},_0x113271(_0x25a547);};return function(_0x39c964){const _0x283398=a4_0x3c45;if(_0x39c964&&_0x39c964[_0x283398(0x10c)])return _0x39c964;var _0x119ff5={};if(_0x39c964!=null){for(var _0x58766d=_0x113271(_0x39c964),_0x2c5045=0x0;_0x2c5045<_0x58766d[_0x283398(0x102)];_0x2c5045++)if(_0x58766d[_0x2c5045]!==_0x283398(0xf8))__createBinding(_0x119ff5,_0x39c964,_0x58766d[_0x2c5045]);}return __setModuleDefault(_0x119ff5,_0x39c964),_0x119ff5;};}());Object[a4_0x428be8(0x112)](exports,a4_0x428be8(0x10c),{'value':!![]}),exports[a4_0x428be8(0xeb)]=void 0x0;function a4_0x3c45(_0x38dc66,_0x112df5){const _0xf97347=a4_0xf973();return a4_0x3c45=function(_0x3c452e,_0x14293d){_0x3c452e=_0x3c452e-0xea;let _0x2d9e6d=_0xf97347[_0x3c452e];return _0x2d9e6d;},a4_0x3c45(_0x38dc66,_0x112df5);}const authService_1=require('../services/authService'),tokenBlacklistService_1=require(a4_0x428be8(0x10b)),telegramBotService_1=require(a4_0x428be8(0xfe));function a4_0xf973(){const _0x1307f6=['getOwnPropertyDescriptor','309523GleDSc','Failed\x20to\x20send\x20failed\x20login\x20notification:','connection','../services/tokenBlacklistService','__esModule','exp','username','blacklistToken','configurable','72EfcRpg','defineProperty','getStats','sendLoginNotification','body','AuthService','937069FasxAV','AuthController','14085432XTzZBB','getBlacklistStats','603020seMtJX','login','remoteAddress','User-Agent','role','user','error','create','336Qiocfj','592350xXdDFb','default','37446rDMEQz','24xDfBAz','get','json','Logged\x20out\x20successfully','../services/telegramBotService','telegramBotService','__importStar','resolve','length','shop','authService','unknown','tokenBlacklistService'];a4_0xf973=function(){return _0x1307f6;};return a4_0xf973();}class AuthController{constructor(){const _0x34834d=a4_0x428be8;this[_0x34834d(0xef)]=async(_0x56633a,_0x15f4b1,_0x231011)=>{const _0x571087=_0x34834d;try{const _0x114c6f=_0x56633a[_0x571087(0x115)],_0x1b1959=_0x56633a['ip']||_0x56633a[_0x571087(0x10a)][_0x571087(0xf0)]||'unknown',_0x46b5f4=_0x56633a[_0x571087(0xfb)](_0x571087(0xf1))||_0x571087(0x105);let _0x36a617=![],_0x372d63=null;try{const _0x27d0d2=await this[_0x571087(0x104)][_0x571087(0xef)](_0x114c6f);_0x36a617=!![],_0x27d0d2[_0x571087(0xf2)]===_0x571087(0x103)&&_0x27d0d2['user']?.['id']&&(_0x372d63=_0x27d0d2[_0x571087(0xf3)]['id']),_0x372d63&&await telegramBotService_1[_0x571087(0xff)][_0x571087(0x114)](_0x372d63,{'username':_0x114c6f['username'],'ipAddress':_0x1b1959,'userAgent':_0x46b5f4,'timestamp':new Date(),'success':!![]}),_0x15f4b1['json']({'success':!![],'result':_0x27d0d2});}catch(_0xf370e7){try{const _0x1de573=(await Promise[_0x571087(0x101)]()['then'](()=>__importStar(require('../config/database'))))[_0x571087(0xf8)],_0x39004b=await _0x1de573[_0x571087(0x103)]['findUnique']({'where':{'username':_0x114c6f[_0x571087(0x10e)]},'select':{'id':!![]}});_0x39004b&&await telegramBotService_1[_0x571087(0xff)][_0x571087(0x114)](_0x39004b['id'],{'username':_0x114c6f[_0x571087(0x10e)],'ipAddress':_0x1b1959,'userAgent':_0x46b5f4,'timestamp':new Date(),'success':![]});}catch(_0x2d945a){console[_0x571087(0xf4)](_0x571087(0x109),_0x2d945a);}throw _0xf370e7;}}catch(_0x12d5b9){_0x231011(_0x12d5b9);}},this['me']=async(_0x147cd4,_0x53768c,_0x3686f6)=>{const _0x3e35e2=_0x34834d;try{const _0x3d8cf6=_0x147cd4['user'];_0x53768c[_0x3e35e2(0xfc)]({'success':!![],'result':{'id':_0x3d8cf6?.['id'],'username':_0x3d8cf6?.[_0x3e35e2(0x10e)],'role':_0x3d8cf6?.[_0x3e35e2(0xf2)]}});}catch(_0x561ce0){_0x3686f6(_0x561ce0);}},this['logout']=async(_0x14c4d4,_0x53e9bb,_0x5e35f1)=>{const _0x24498a=_0x34834d;try{const _0x596ec1=_0x14c4d4['token'],_0xe903=_0x14c4d4[_0x24498a(0xf3)];_0x596ec1&&_0xe903?.[_0x24498a(0x10d)]&&tokenBlacklistService_1['tokenBlacklistService'][_0x24498a(0x10f)](_0x596ec1,_0xe903[_0x24498a(0x10d)]),_0x53e9bb[_0x24498a(0xfc)]({'success':!![],'message':_0x24498a(0xfd)});}catch(_0x307878){_0x5e35f1(_0x307878);}},this[_0x34834d(0xed)]=async(_0x15f602,_0x2eafdf,_0x14006d)=>{const _0x1f635c=_0x34834d;try{const _0x4775f0=tokenBlacklistService_1[_0x1f635c(0x106)][_0x1f635c(0x113)]();_0x2eafdf['json']({'success':!![],'result':_0x4775f0});}catch(_0x1babe8){_0x14006d(_0x1babe8);}},this[_0x34834d(0x104)]=new authService_1[(_0x34834d(0x116))]();}}exports[a4_0x428be8(0xeb)]=AuthController;