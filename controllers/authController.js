'use strict';const a4_0x9c775b=a4_0x4a58;(function(_0x2f75e1,_0x5dd816){const _0x14845a=a4_0x4a58,_0x574271=_0x2f75e1();while(!![]){try{const _0x5b7a48=parseInt(_0x14845a(0xe8))/0x1+-parseInt(_0x14845a(0xdd))/0x2+-parseInt(_0x14845a(0xf5))/0x3+parseInt(_0x14845a(0xfb))/0x4*(parseInt(_0x14845a(0xe7))/0x5)+-parseInt(_0x14845a(0xd6))/0x6+-parseInt(_0x14845a(0xca))/0x7+parseInt(_0x14845a(0xf7))/0x8;if(_0x5b7a48===_0x5dd816)break;else _0x574271['push'](_0x574271['shift']());}catch(_0x2f3d72){_0x574271['push'](_0x574271['shift']());}}}(a4_0x18b5,0x65c0c));var __createBinding=this&&this[a4_0x9c775b(0xcd)]||(Object[a4_0x9c775b(0xd9)]?function(_0x14946a,_0x5590c,_0x3d5525,_0x21cf67){const _0xc139ef=a4_0x9c775b;if(_0x21cf67===undefined)_0x21cf67=_0x3d5525;var _0x28a9af=Object[_0xc139ef(0xdf)](_0x5590c,_0x3d5525);(!_0x28a9af||(_0xc139ef(0xc5)in _0x28a9af?!_0x5590c['__esModule']:_0x28a9af[_0xc139ef(0xe2)]||_0x28a9af[_0xc139ef(0xcf)]))&&(_0x28a9af={'enumerable':!![],'get':function(){return _0x5590c[_0x3d5525];}}),Object['defineProperty'](_0x14946a,_0x21cf67,_0x28a9af);}:function(_0x42b0d2,_0x4a733e,_0x3cabc7,_0x31ca57){if(_0x31ca57===undefined)_0x31ca57=_0x3cabc7;_0x42b0d2[_0x31ca57]=_0x4a733e[_0x3cabc7];}),__setModuleDefault=this&&this[a4_0x9c775b(0xde)]||(Object['create']?function(_0x4d9eee,_0x1a9363){const _0x3f6535=a4_0x9c775b;Object[_0x3f6535(0xd4)](_0x4d9eee,_0x3f6535(0xe9),{'enumerable':!![],'value':_0x1a9363});}:function(_0x842a3b,_0x520618){const _0x31a9b3=a4_0x9c775b;_0x842a3b[_0x31a9b3(0xe9)]=_0x520618;}),__importStar=this&&this[a4_0x9c775b(0xf8)]||(function(){var _0xecbae=function(_0x25ffcb){const _0x1f3501=a4_0x4a58;return _0xecbae=Object[_0x1f3501(0xd1)]||function(_0x3c9e65){const _0x314142=_0x1f3501;var _0x5e3f05=[];for(var _0x4a7884 in _0x3c9e65)if(Object[_0x314142(0xe3)][_0x314142(0xc9)][_0x314142(0xe4)](_0x3c9e65,_0x4a7884))_0x5e3f05[_0x5e3f05['length']]=_0x4a7884;return _0x5e3f05;},_0xecbae(_0x25ffcb);};return function(_0x7ed937){const _0x1b8593=a4_0x4a58;if(_0x7ed937&&_0x7ed937['__esModule'])return _0x7ed937;var _0x8fdbaf={};if(_0x7ed937!=null){for(var _0xca99f0=_0xecbae(_0x7ed937),_0x2256ad=0x0;_0x2256ad<_0xca99f0[_0x1b8593(0xf9)];_0x2256ad++)if(_0xca99f0[_0x2256ad]!==_0x1b8593(0xe9))__createBinding(_0x8fdbaf,_0x7ed937,_0xca99f0[_0x2256ad]);}return __setModuleDefault(_0x8fdbaf,_0x7ed937),_0x8fdbaf;};}());function a4_0x4a58(_0x5928b1,_0xa4db59){_0x5928b1=_0x5928b1-0xc5;const _0x18b51e=a4_0x18b5();let _0x4a5865=_0x18b51e[_0x5928b1];return _0x4a5865;}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a4_0x9c775b(0xe5)]=void 0x0;const authService_1=require(a4_0x9c775b(0xf2)),tokenBlacklistService_1=require(a4_0x9c775b(0xf6)),telegramBotService_1=require(a4_0x9c775b(0xd2));class AuthController{constructor(){const _0x3678d7=a4_0x9c775b;this[_0x3678d7(0xee)]=async(_0x5770a7,_0xd08025,_0x30e62d)=>{const _0x20cdb5=_0x3678d7;try{const _0x51e6da=_0x5770a7[_0x20cdb5(0xce)],_0x116e88=_0x51e6da[_0x20cdb5(0xef)]||_0x5770a7['ip']||_0x5770a7[_0x20cdb5(0xf1)][_0x20cdb5(0xeb)]||'unknown',_0x509dc3=_0x51e6da[_0x20cdb5(0xd0)]||_0x5770a7['get'](_0x20cdb5(0xc8))||_0x20cdb5(0xd8),_0x4efbfb=_0x51e6da[_0x20cdb5(0xdb)];let _0x3de369=![],_0x3bac01=null;try{const _0x22bb8c=await this[_0x20cdb5(0xf4)]['login'](_0x51e6da);_0x3de369=!![],_0x22bb8c[_0x20cdb5(0xe6)]===_0x20cdb5(0xec)&&_0x22bb8c[_0x20cdb5(0xcc)]?.['id']&&(_0x3bac01=_0x22bb8c[_0x20cdb5(0xcc)]['id']),_0x3bac01&&await telegramBotService_1[_0x20cdb5(0xc7)][_0x20cdb5(0xdc)](_0x3bac01,{'username':_0x51e6da[_0x20cdb5(0xe1)],'ipAddress':_0x116e88,'userAgent':_0x509dc3,'geo':_0x4efbfb,'timestamp':new Date(),'success':!![]}),_0xd08025[_0x20cdb5(0xd5)]({'success':!![],'result':_0x22bb8c});}catch(_0x4e9bc0){try{const _0x11a1f3=(await Promise[_0x20cdb5(0xcb)]()[_0x20cdb5(0xc6)](()=>__importStar(require(_0x20cdb5(0xe0)))))[_0x20cdb5(0xe9)],_0x113559=await _0x11a1f3[_0x20cdb5(0xec)][_0x20cdb5(0xed)]({'where':{'username':_0x51e6da['username']},'select':{'id':!![]}});_0x113559&&await telegramBotService_1[_0x20cdb5(0xc7)][_0x20cdb5(0xdc)](_0x113559['id'],{'username':_0x51e6da[_0x20cdb5(0xe1)],'ipAddress':_0x116e88,'userAgent':_0x509dc3,'geo':_0x4efbfb,'timestamp':new Date(),'success':![]});}catch(_0x565284){console['error'](_0x20cdb5(0xea),_0x565284);}throw _0x4e9bc0;}}catch(_0x378b83){_0x30e62d(_0x378b83);}},this['me']=async(_0xcd2238,_0x3d0778,_0x43a799)=>{const _0x42653d=_0x3678d7;try{const _0x3ecc42=_0xcd2238[_0x42653d(0xcc)];_0x3d0778[_0x42653d(0xd5)]({'success':!![],'result':{'id':_0x3ecc42?.['id'],'username':_0x3ecc42?.[_0x42653d(0xe1)],'role':_0x3ecc42?.['role']}});}catch(_0x58a5b9){_0x43a799(_0x58a5b9);}},this['logout']=async(_0x45f13f,_0x26b712,_0x123237)=>{const _0x225b8d=_0x3678d7;try{const _0x334d14=_0x45f13f[_0x225b8d(0xfa)],_0x5411c4=_0x45f13f[_0x225b8d(0xcc)];_0x334d14&&_0x5411c4?.[_0x225b8d(0xda)]&&tokenBlacklistService_1[_0x225b8d(0xf3)]['blacklistToken'](_0x334d14,_0x5411c4[_0x225b8d(0xda)]),_0x26b712[_0x225b8d(0xd5)]({'success':!![],'message':_0x225b8d(0xd3)});}catch(_0x273026){_0x123237(_0x273026);}},this[_0x3678d7(0xf0)]=async(_0x38df3d,_0x20c819,_0x596271)=>{const _0x5eb50a=_0x3678d7;try{const _0x591fac=tokenBlacklistService_1['tokenBlacklistService'][_0x5eb50a(0xd7)]();_0x20c819['json']({'success':!![],'result':_0x591fac});}catch(_0x4ff24a){_0x596271(_0x4ff24a);}},this[_0x3678d7(0xf4)]=new authService_1['AuthService']();}}function a4_0x18b5(){const _0x2d8899=['5201945NFKAAF','resolve','user','__createBinding','body','configurable','userAgent','getOwnPropertyNames','../services/telegramBotService','Logged\x20out\x20successfully','defineProperty','json','4778970mFSwfR','getStats','unknown','create','exp','geo','sendLoginNotification','975400AYmsVe','__setModuleDefault','getOwnPropertyDescriptor','../config/database','username','writable','prototype','call','AuthController','role','3542255ypvrzE','49553VBiHyi','default','Failed\x20to\x20send\x20failed\x20login\x20notification:','remoteAddress','shop','findUnique','login','ipAddress','getBlacklistStats','connection','../services/authService','tokenBlacklistService','authService','127827DFezbz','../services/tokenBlacklistService','13829720ZibJYA','__importStar','length','token','4EjpilE','get','then','telegramBotService','User-Agent','hasOwnProperty'];a4_0x18b5=function(){return _0x2d8899;};return a4_0x18b5();}exports['AuthController']=AuthController;