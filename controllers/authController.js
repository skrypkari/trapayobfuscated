'use strict';const a4_0x3a0264=a4_0x2962;(function(_0x54d9bc,_0x3848d9){const _0xd947f0=a4_0x2962,_0x160236=_0x54d9bc();while(!![]){try{const _0x445f52=parseInt(_0xd947f0(0x208))/0x1+-parseInt(_0xd947f0(0x1fa))/0x2+parseInt(_0xd947f0(0x1ff))/0x3+-parseInt(_0xd947f0(0x1fe))/0x4+-parseInt(_0xd947f0(0x1e4))/0x5*(parseInt(_0xd947f0(0x1fc))/0x6)+parseInt(_0xd947f0(0x211))/0x7+parseInt(_0xd947f0(0x1ef))/0x8*(parseInt(_0xd947f0(0x1ee))/0x9);if(_0x445f52===_0x3848d9)break;else _0x160236['push'](_0x160236['shift']());}catch(_0x40e6a3){_0x160236['push'](_0x160236['shift']());}}}(a4_0x1854,0xd70e6));var __createBinding=this&&this['__createBinding']||(Object[a4_0x3a0264(0x1e8)]?function(_0x10309f,_0x28a7aa,_0x458986,_0x580464){const _0x6214f9=a4_0x3a0264;if(_0x580464===undefined)_0x580464=_0x458986;var _0x467601=Object['getOwnPropertyDescriptor'](_0x28a7aa,_0x458986);(!_0x467601||('get'in _0x467601?!_0x28a7aa[_0x6214f9(0x20f)]:_0x467601[_0x6214f9(0x203)]||_0x467601[_0x6214f9(0x212)]))&&(_0x467601={'enumerable':!![],'get':function(){return _0x28a7aa[_0x458986];}}),Object[_0x6214f9(0x1f3)](_0x10309f,_0x580464,_0x467601);}:function(_0x41c5ab,_0x54a5ac,_0x1b8e3c,_0x39e4e4){if(_0x39e4e4===undefined)_0x39e4e4=_0x1b8e3c;_0x41c5ab[_0x39e4e4]=_0x54a5ac[_0x1b8e3c];}),__setModuleDefault=this&&this[a4_0x3a0264(0x1ec)]||(Object['create']?function(_0x52060d,_0x5ec287){Object['defineProperty'](_0x52060d,'default',{'enumerable':!![],'value':_0x5ec287});}:function(_0x505cf8,_0x48dbb3){_0x505cf8['default']=_0x48dbb3;}),__importStar=this&&this['__importStar']||(function(){var _0x43f40f=function(_0x1ebf67){const _0x45f893=a4_0x2962;return _0x43f40f=Object[_0x45f893(0x207)]||function(_0x21218d){const _0x491841=_0x45f893;var _0x5b460a=[];for(var _0x1f993f in _0x21218d)if(Object['prototype'][_0x491841(0x1e9)][_0x491841(0x1f2)](_0x21218d,_0x1f993f))_0x5b460a[_0x5b460a[_0x491841(0x210)]]=_0x1f993f;return _0x5b460a;},_0x43f40f(_0x1ebf67);};return function(_0x44b09b){const _0xe5f05e=a4_0x2962;if(_0x44b09b&&_0x44b09b[_0xe5f05e(0x20f)])return _0x44b09b;var _0x29721e={};if(_0x44b09b!=null){for(var _0x12b239=_0x43f40f(_0x44b09b),_0x3b9cfb=0x0;_0x3b9cfb<_0x12b239[_0xe5f05e(0x210)];_0x3b9cfb++)if(_0x12b239[_0x3b9cfb]!==_0xe5f05e(0x202))__createBinding(_0x29721e,_0x44b09b,_0x12b239[_0x3b9cfb]);}return __setModuleDefault(_0x29721e,_0x44b09b),_0x29721e;};}());Object[a4_0x3a0264(0x1f3)](exports,a4_0x3a0264(0x20f),{'value':!![]}),exports['AuthController']=void 0x0;function a4_0x1854(){const _0x144f67=['call','defineProperty','exp','AuthService','json','../services/tokenBlacklistService','connection','login','1336398TfyhMk','authService','6QRACVp','token','2669436DkjBVy','287121XhwpWf','user','getBlacklistStats','default','writable','../config/database','getStats','remoteAddress','getOwnPropertyNames','1258384JVoYEq','User-Agent','then','tokenBlacklistService','sendLoginNotification','shop','findUnique','__esModule','length','4978477gIDpwi','configurable','unknown','Failed\x20to\x20send\x20failed\x20login\x20notification:','2513215VNUOFR','resolve','role','blacklistToken','create','hasOwnProperty','AuthController','username','__setModuleDefault','../services/authService','38457UBFvXy','1224seULYT','telegramBotService','logout'];a4_0x1854=function(){return _0x144f67;};return a4_0x1854();}const authService_1=require(a4_0x3a0264(0x1ed)),tokenBlacklistService_1=require(a4_0x3a0264(0x1f7)),telegramBotService_1=require('../services/telegramBotService');class AuthController{constructor(){const _0x5e4e91=a4_0x3a0264;this['login']=async(_0x2e1325,_0x289ccc,_0x8f7136)=>{const _0x5d2a33=a4_0x2962;try{const _0x1e0433=_0x2e1325['body'],_0x44aec9=_0x2e1325['ip']||_0x2e1325[_0x5d2a33(0x1f8)][_0x5d2a33(0x206)]||_0x5d2a33(0x1e2),_0x5a1f45=_0x2e1325['get'](_0x5d2a33(0x209))||_0x5d2a33(0x1e2);let _0x1b4d4f=![],_0x535214=null;try{const _0x47db22=await this[_0x5d2a33(0x1fb)][_0x5d2a33(0x1f9)](_0x1e0433);_0x1b4d4f=!![],_0x47db22[_0x5d2a33(0x1e6)]===_0x5d2a33(0x20d)&&_0x47db22[_0x5d2a33(0x200)]?.['id']&&(_0x535214=_0x47db22[_0x5d2a33(0x200)]['id']),_0x535214&&await telegramBotService_1['telegramBotService'][_0x5d2a33(0x20c)](_0x535214,{'username':_0x1e0433[_0x5d2a33(0x1eb)],'ipAddress':_0x44aec9,'userAgent':_0x5a1f45,'timestamp':new Date(),'success':!![]}),_0x289ccc['json']({'success':!![],'result':_0x47db22});}catch(_0x2ce567){try{const _0x31536a=(await Promise[_0x5d2a33(0x1e5)]()[_0x5d2a33(0x20a)](()=>__importStar(require(_0x5d2a33(0x204)))))[_0x5d2a33(0x202)],_0x47ad4d=await _0x31536a[_0x5d2a33(0x20d)][_0x5d2a33(0x20e)]({'where':{'username':_0x1e0433['username']},'select':{'id':!![]}});_0x47ad4d&&await telegramBotService_1[_0x5d2a33(0x1f0)][_0x5d2a33(0x20c)](_0x47ad4d['id'],{'username':_0x1e0433[_0x5d2a33(0x1eb)],'ipAddress':_0x44aec9,'userAgent':_0x5a1f45,'timestamp':new Date(),'success':![]});}catch(_0x6a732b){console['error'](_0x5d2a33(0x1e3),_0x6a732b);}throw _0x2ce567;}}catch(_0x1a45f3){_0x8f7136(_0x1a45f3);}},this['me']=async(_0x58f822,_0x430e91,_0x16e446)=>{const _0x59e634=a4_0x2962;try{const _0x2af56f=_0x58f822[_0x59e634(0x200)];_0x430e91[_0x59e634(0x1f6)]({'success':!![],'result':{'id':_0x2af56f?.['id'],'username':_0x2af56f?.[_0x59e634(0x1eb)],'role':_0x2af56f?.[_0x59e634(0x1e6)]}});}catch(_0x5e3b30){_0x16e446(_0x5e3b30);}},this[_0x5e4e91(0x1f1)]=async(_0x35d8d2,_0x4dddbe,_0x4df2d6)=>{const _0x130413=_0x5e4e91;try{const _0x456abc=_0x35d8d2[_0x130413(0x1fd)],_0x3422d3=_0x35d8d2[_0x130413(0x200)];_0x456abc&&_0x3422d3?.[_0x130413(0x1f4)]&&tokenBlacklistService_1[_0x130413(0x20b)][_0x130413(0x1e7)](_0x456abc,_0x3422d3[_0x130413(0x1f4)]),_0x4dddbe[_0x130413(0x1f6)]({'success':!![],'message':'Logged\x20out\x20successfully'});}catch(_0x13d315){_0x4df2d6(_0x13d315);}},this[_0x5e4e91(0x201)]=async(_0x5ac1d5,_0x53c500,_0x4f9b68)=>{const _0x3d23ab=_0x5e4e91;try{const _0x21b1f0=tokenBlacklistService_1[_0x3d23ab(0x20b)][_0x3d23ab(0x205)]();_0x53c500['json']({'success':!![],'result':_0x21b1f0});}catch(_0x57ca39){_0x4f9b68(_0x57ca39);}},this[_0x5e4e91(0x1fb)]=new authService_1[(_0x5e4e91(0x1f5))]();}}function a4_0x2962(_0xfaf0e6,_0x286ec4){const _0x18548a=a4_0x1854();return a4_0x2962=function(_0x29625b,_0x15f967){_0x29625b=_0x29625b-0x1e2;let _0x107809=_0x18548a[_0x29625b];return _0x107809;},a4_0x2962(_0xfaf0e6,_0x286ec4);}exports[a4_0x3a0264(0x1ea)]=AuthController;