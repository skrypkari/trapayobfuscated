'use strict';function a4_0x510f(_0x321bda,_0x5a731e){const _0x169eb3=a4_0x169e();return a4_0x510f=function(_0x510fc4,_0x1ecc4c){_0x510fc4=_0x510fc4-0xe7;let _0x130556=_0x169eb3[_0x510fc4];return _0x130556;},a4_0x510f(_0x321bda,_0x5a731e);}const a4_0x4fa5d7=a4_0x510f;(function(_0x3741f9,_0xa3d6d9){const _0x5e5096=a4_0x510f,_0xe4aec3=_0x3741f9();while(!![]){try{const _0x524945=-parseInt(_0x5e5096(0xf9))/0x1+-parseInt(_0x5e5096(0x105))/0x2+parseInt(_0x5e5096(0x113))/0x3*(parseInt(_0x5e5096(0xf7))/0x4)+-parseInt(_0x5e5096(0x10f))/0x5+parseInt(_0x5e5096(0x115))/0x6+parseInt(_0x5e5096(0xfe))/0x7+-parseInt(_0x5e5096(0xff))/0x8;if(_0x524945===_0xa3d6d9)break;else _0xe4aec3['push'](_0xe4aec3['shift']());}catch(_0x11e063){_0xe4aec3['push'](_0xe4aec3['shift']());}}}(a4_0x169e,0xbbb20));var __createBinding=this&&this[a4_0x4fa5d7(0x109)]||(Object[a4_0x4fa5d7(0x114)]?function(_0x5b9a53,_0xf1be94,_0x5dc383,_0x2d821e){const _0x23d1b1=a4_0x4fa5d7;if(_0x2d821e===undefined)_0x2d821e=_0x5dc383;var _0x58bd0d=Object[_0x23d1b1(0xf4)](_0xf1be94,_0x5dc383);(!_0x58bd0d||(_0x23d1b1(0x106)in _0x58bd0d?!_0xf1be94['__esModule']:_0x58bd0d['writable']||_0x58bd0d[_0x23d1b1(0xef)]))&&(_0x58bd0d={'enumerable':!![],'get':function(){return _0xf1be94[_0x5dc383];}}),Object[_0x23d1b1(0xf3)](_0x5b9a53,_0x2d821e,_0x58bd0d);}:function(_0x5398b9,_0x45f66f,_0x32059d,_0x57baa2){if(_0x57baa2===undefined)_0x57baa2=_0x32059d;_0x5398b9[_0x57baa2]=_0x45f66f[_0x32059d];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object['create']?function(_0x4cd8a7,_0x1cde60){const _0x332e99=a4_0x4fa5d7;Object[_0x332e99(0xf3)](_0x4cd8a7,_0x332e99(0xe7),{'enumerable':!![],'value':_0x1cde60});}:function(_0x113ef7,_0x264dd2){const _0x5cbe61=a4_0x4fa5d7;_0x113ef7[_0x5cbe61(0xe7)]=_0x264dd2;}),__importStar=this&&this[a4_0x4fa5d7(0xed)]||(function(){var _0x3bb151=function(_0x34e357){return _0x3bb151=Object['getOwnPropertyNames']||function(_0xb8f8aa){const _0x47a605=a4_0x510f;var _0x48f924=[];for(var _0x31b1f2 in _0xb8f8aa)if(Object[_0x47a605(0xec)][_0x47a605(0xfa)][_0x47a605(0xf6)](_0xb8f8aa,_0x31b1f2))_0x48f924[_0x48f924[_0x47a605(0x111)]]=_0x31b1f2;return _0x48f924;},_0x3bb151(_0x34e357);};return function(_0x3aec5e){const _0x4aef89=a4_0x510f;if(_0x3aec5e&&_0x3aec5e[_0x4aef89(0x107)])return _0x3aec5e;var _0x4562fb={};if(_0x3aec5e!=null){for(var _0x196dcf=_0x3bb151(_0x3aec5e),_0x4d96d4=0x0;_0x4d96d4<_0x196dcf[_0x4aef89(0x111)];_0x4d96d4++)if(_0x196dcf[_0x4d96d4]!=='default')__createBinding(_0x4562fb,_0x3aec5e,_0x196dcf[_0x4d96d4]);}return __setModuleDefault(_0x4562fb,_0x3aec5e),_0x4562fb;};}());Object[a4_0x4fa5d7(0xf3)](exports,'__esModule',{'value':!![]}),exports[a4_0x4fa5d7(0x119)]=void 0x0;const authService_1=require('../services/authService'),tokenBlacklistService_1=require(a4_0x4fa5d7(0xf2)),telegramBotService_1=require(a4_0x4fa5d7(0xf0));class AuthController{constructor(){const _0x2110a8=a4_0x4fa5d7;this[_0x2110a8(0x10e)]=async(_0x454425,_0x228a5f,_0x3821a1)=>{const _0x5b8fdd=_0x2110a8;try{const _0x27219d=_0x454425[_0x5b8fdd(0x10a)],_0x54f582=_0x454425['ip']||_0x454425[_0x5b8fdd(0x117)][_0x5b8fdd(0xfd)]||_0x5b8fdd(0xf1),_0x375993=_0x454425[_0x5b8fdd(0x106)]('User-Agent')||_0x5b8fdd(0xf1);let _0x54be5d=![],_0x5ce580=null;try{const _0xbb23c1=await this[_0x5b8fdd(0x10d)]['login'](_0x27219d);_0x54be5d=!![],_0xbb23c1[_0x5b8fdd(0x104)]===_0x5b8fdd(0xe8)&&_0xbb23c1[_0x5b8fdd(0xf5)]?.['id']&&(_0x5ce580=_0xbb23c1[_0x5b8fdd(0xf5)]['id']),_0x5ce580&&await telegramBotService_1[_0x5b8fdd(0xfc)][_0x5b8fdd(0xee)](_0x5ce580,{'username':_0x27219d[_0x5b8fdd(0x116)],'ipAddress':_0x54f582,'userAgent':_0x375993,'timestamp':new Date(),'success':!![]}),_0x228a5f[_0x5b8fdd(0xe9)]({'success':!![],'result':_0xbb23c1});}catch(_0x223c16){try{const _0x32172d=(await Promise[_0x5b8fdd(0x103)]()[_0x5b8fdd(0x110)](()=>__importStar(require(_0x5b8fdd(0xf8)))))[_0x5b8fdd(0xe7)],_0x55c7ca=await _0x32172d[_0x5b8fdd(0xe8)][_0x5b8fdd(0x118)]({'where':{'username':_0x27219d['username']},'select':{'id':!![]}});_0x55c7ca&&await telegramBotService_1['telegramBotService'][_0x5b8fdd(0xee)](_0x55c7ca['id'],{'username':_0x27219d[_0x5b8fdd(0x116)],'ipAddress':_0x54f582,'userAgent':_0x375993,'timestamp':new Date(),'success':![]});}catch(_0x54fc21){console[_0x5b8fdd(0x10c)]('Failed\x20to\x20send\x20failed\x20login\x20notification:',_0x54fc21);}throw _0x223c16;}}catch(_0x7bf1ed){_0x3821a1(_0x7bf1ed);}},this['me']=async(_0x31e94,_0x47be99,_0x676ba1)=>{const _0x1ac67f=_0x2110a8;try{const _0x101f3b=_0x31e94[_0x1ac67f(0xf5)];_0x47be99[_0x1ac67f(0xe9)]({'success':!![],'result':{'id':_0x101f3b?.['id'],'username':_0x101f3b?.[_0x1ac67f(0x116)],'role':_0x101f3b?.[_0x1ac67f(0x104)]}});}catch(_0x150641){_0x676ba1(_0x150641);}},this[_0x2110a8(0x102)]=async(_0x11af41,_0x160747,_0x3b6ff7)=>{const _0x5bbd95=_0x2110a8;try{const _0x3156b0=_0x11af41[_0x5bbd95(0x10b)],_0x3ed9d=_0x11af41[_0x5bbd95(0xf5)];_0x3156b0&&_0x3ed9d?.['exp']&&tokenBlacklistService_1[_0x5bbd95(0x100)][_0x5bbd95(0xea)](_0x3156b0,_0x3ed9d[_0x5bbd95(0xeb)]),_0x160747[_0x5bbd95(0xe9)]({'success':!![],'message':_0x5bbd95(0xfb)});}catch(_0x5f02f7){_0x3b6ff7(_0x5f02f7);}},this[_0x2110a8(0x101)]=async(_0x361cfd,_0x280f20,_0x4a3365)=>{const _0x5a1b53=_0x2110a8;try{const _0x15265e=tokenBlacklistService_1[_0x5a1b53(0x100)][_0x5a1b53(0x112)]();_0x280f20[_0x5a1b53(0xe9)]({'success':!![],'result':_0x15265e});}catch(_0x5ae1ea){_0x4a3365(_0x5ae1ea);}},this[_0x2110a8(0x10d)]=new authService_1[(_0x2110a8(0x108))]();}}function a4_0x169e(){const _0x3462b0=['telegramBotService','remoteAddress','10411401zhimNt','6213488RZoRyP','tokenBlacklistService','getBlacklistStats','logout','resolve','role','306168Pmgagm','get','__esModule','AuthService','__createBinding','body','token','error','authService','login','2427735PRcvDp','then','length','getStats','6dkqoRH','create','8467428kYFaBs','username','connection','findUnique','AuthController','default','shop','json','blacklistToken','exp','prototype','__importStar','sendLoginNotification','configurable','../services/telegramBotService','unknown','../services/tokenBlacklistService','defineProperty','getOwnPropertyDescriptor','user','call','1378396qEaBja','../config/database','1403662ynYfmT','hasOwnProperty','Logged\x20out\x20successfully'];a4_0x169e=function(){return _0x3462b0;};return a4_0x169e();}exports[a4_0x4fa5d7(0x119)]=AuthController;