'use strict';const a4_0x268711=a4_0x1d3b;(function(_0x11d269,_0x14644a){const _0x3933c9=a4_0x1d3b,_0x32e6b9=_0x11d269();while(!![]){try{const _0x4f1b6e=parseInt(_0x3933c9(0x192))/0x1*(-parseInt(_0x3933c9(0x17e))/0x2)+-parseInt(_0x3933c9(0x193))/0x3*(-parseInt(_0x3933c9(0x189))/0x4)+-parseInt(_0x3933c9(0x180))/0x5*(-parseInt(_0x3933c9(0x174))/0x6)+parseInt(_0x3933c9(0x16d))/0x7+-parseInt(_0x3933c9(0x191))/0x8*(parseInt(_0x3933c9(0x16f))/0x9)+parseInt(_0x3933c9(0x184))/0xa*(parseInt(_0x3933c9(0x17d))/0xb)+-parseInt(_0x3933c9(0x183))/0xc;if(_0x4f1b6e===_0x14644a)break;else _0x32e6b9['push'](_0x32e6b9['shift']());}catch(_0x58db7d){_0x32e6b9['push'](_0x32e6b9['shift']());}}}(a4_0x5d7f,0x9c8cd));var __createBinding=this&&this[a4_0x268711(0x173)]||(Object['create']?function(_0x1213a4,_0x3656a5,_0x2fe31f,_0xe16533){const _0x3a2abd=a4_0x268711;if(_0xe16533===undefined)_0xe16533=_0x2fe31f;var _0x5af191=Object[_0x3a2abd(0x170)](_0x3656a5,_0x2fe31f);(!_0x5af191||(_0x3a2abd(0x194)in _0x5af191?!_0x3656a5[_0x3a2abd(0x17c)]:_0x5af191[_0x3a2abd(0x190)]||_0x5af191[_0x3a2abd(0x19d)]))&&(_0x5af191={'enumerable':!![],'get':function(){return _0x3656a5[_0x2fe31f];}}),Object[_0x3a2abd(0x179)](_0x1213a4,_0xe16533,_0x5af191);}:function(_0x37c276,_0x3570ec,_0x5db075,_0x27a072){if(_0x27a072===undefined)_0x27a072=_0x5db075;_0x37c276[_0x27a072]=_0x3570ec[_0x5db075];}),__setModuleDefault=this&&this[a4_0x268711(0x18e)]||(Object['create']?function(_0x3eabcf,_0x3f80f3){const _0x4ed9ec=a4_0x268711;Object[_0x4ed9ec(0x179)](_0x3eabcf,'default',{'enumerable':!![],'value':_0x3f80f3});}:function(_0x3ac367,_0x1a36c3){const _0x3f73f3=a4_0x268711;_0x3ac367[_0x3f73f3(0x177)]=_0x1a36c3;}),__importStar=this&&this[a4_0x268711(0x196)]||(function(){var _0x82c9c0=function(_0x396e4f){const _0x193e71=a4_0x1d3b;return _0x82c9c0=Object[_0x193e71(0x18c)]||function(_0x48eac6){const _0x2dc4cf=_0x193e71;var _0xd152d6=[];for(var _0x454153 in _0x48eac6)if(Object[_0x2dc4cf(0x18a)]['hasOwnProperty'][_0x2dc4cf(0x17b)](_0x48eac6,_0x454153))_0xd152d6[_0xd152d6[_0x2dc4cf(0x182)]]=_0x454153;return _0xd152d6;},_0x82c9c0(_0x396e4f);};return function(_0x30ff42){const _0x11ac81=a4_0x1d3b;if(_0x30ff42&&_0x30ff42['__esModule'])return _0x30ff42;var _0x34961f={};if(_0x30ff42!=null){for(var _0x468a53=_0x82c9c0(_0x30ff42),_0x470df6=0x0;_0x470df6<_0x468a53[_0x11ac81(0x182)];_0x470df6++)if(_0x468a53[_0x470df6]!=='default')__createBinding(_0x34961f,_0x30ff42,_0x468a53[_0x470df6]);}return __setModuleDefault(_0x34961f,_0x30ff42),_0x34961f;};}());Object[a4_0x268711(0x179)](exports,a4_0x268711(0x17c),{'value':!![]}),exports[a4_0x268711(0x172)]=void 0x0;const authService_1=require(a4_0x268711(0x195)),tokenBlacklistService_1=require('../services/tokenBlacklistService'),telegramBotService_1=require(a4_0x268711(0x19a));function a4_0x1d3b(_0x288378,_0x564244){_0x288378=_0x288378-0x16c;const _0x5d7fb9=a4_0x5d7f();let _0x1d3b81=_0x5d7fb9[_0x288378];return _0x1d3b81;}class AuthController{constructor(){const _0x352112=a4_0x268711;this[_0x352112(0x19b)]=async(_0x4b1e6b,_0x1e87a4,_0x20e300)=>{const _0x2357bf=_0x352112;try{const _0xd2dc2d=_0x4b1e6b[_0x2357bf(0x1a2)],_0x29e1ce=_0xd2dc2d[_0x2357bf(0x185)]||_0x4b1e6b['ip']||_0x4b1e6b['connection'][_0x2357bf(0x175)]||'unknown',_0x579f7c=_0xd2dc2d['userAgent']||_0x4b1e6b[_0x2357bf(0x194)]('User-Agent')||_0x2357bf(0x187),_0x199cdf=_0xd2dc2d['geo'];let _0x7786de=![],_0x280103=null;try{const _0x3e8fef=await this[_0x2357bf(0x178)][_0x2357bf(0x19b)](_0xd2dc2d);_0x7786de=!![],_0x3e8fef['role']===_0x2357bf(0x1a0)&&_0x3e8fef[_0x2357bf(0x18d)]?.['id']&&(_0x280103=_0x3e8fef['user']['id']),_0x280103&&await telegramBotService_1[_0x2357bf(0x186)][_0x2357bf(0x18f)](_0x280103,{'username':_0xd2dc2d['username'],'ipAddress':_0x29e1ce,'userAgent':_0x579f7c,'geo':_0x199cdf,'timestamp':new Date(),'success':!![]}),_0x1e87a4['json']({'success':!![],'result':_0x3e8fef});}catch(_0x10f83f){try{const _0x2f0a5e=(await Promise[_0x2357bf(0x188)]()[_0x2357bf(0x17f)](()=>__importStar(require(_0x2357bf(0x1a3)))))[_0x2357bf(0x177)],_0x2f0378=await _0x2f0a5e[_0x2357bf(0x1a0)][_0x2357bf(0x19f)]({'where':{'username':_0xd2dc2d['username']},'select':{'id':!![]}});_0x2f0378&&await telegramBotService_1[_0x2357bf(0x186)][_0x2357bf(0x18f)](_0x2f0378['id'],{'username':_0xd2dc2d['username'],'ipAddress':_0x29e1ce,'userAgent':_0x579f7c,'geo':_0x199cdf,'timestamp':new Date(),'success':![]});}catch(_0x8d4997){console[_0x2357bf(0x19c)](_0x2357bf(0x16e),_0x8d4997);}throw _0x10f83f;}}catch(_0x5dfb32){_0x20e300(_0x5dfb32);}},this['me']=async(_0x416eff,_0x48b0d6,_0x375da0)=>{const _0x4fcae6=_0x352112;try{const _0x4c2dd3=_0x416eff[_0x4fcae6(0x18d)];_0x48b0d6[_0x4fcae6(0x197)]({'success':!![],'result':{'id':_0x4c2dd3?.['id'],'username':_0x4c2dd3?.[_0x4fcae6(0x176)],'role':_0x4c2dd3?.[_0x4fcae6(0x18b)]}});}catch(_0x3ac249){_0x375da0(_0x3ac249);}},this[_0x352112(0x181)]=async(_0x3210d8,_0x5da574,_0x241a8e)=>{const _0x584ac7=_0x352112;try{const _0x41a4aa=_0x3210d8[_0x584ac7(0x198)],_0x26f30c=_0x3210d8['user'];_0x41a4aa&&_0x26f30c?.['exp']&&tokenBlacklistService_1['tokenBlacklistService'][_0x584ac7(0x171)](_0x41a4aa,_0x26f30c[_0x584ac7(0x16c)]),_0x5da574[_0x584ac7(0x197)]({'success':!![],'message':'Logged\x20out\x20successfully'});}catch(_0x416d8d){_0x241a8e(_0x416d8d);}},this[_0x352112(0x199)]=async(_0x32773a,_0x1570fb,_0x4909f9)=>{const _0x5b3aea=_0x352112;try{const _0x273a0f=tokenBlacklistService_1[_0x5b3aea(0x17a)][_0x5b3aea(0x19e)]();_0x1570fb[_0x5b3aea(0x197)]({'success':!![],'result':_0x273a0f});}catch(_0x12c636){_0x4909f9(_0x12c636);}},this[_0x352112(0x178)]=new authService_1[(_0x352112(0x1a1))]();}}function a4_0x5d7f(){const _0x133715=['4110lnFHLC','get','../services/authService','__importStar','json','token','getBlacklistStats','../services/telegramBotService','login','error','configurable','getStats','findUnique','shop','AuthService','body','../config/database','exp','8970857UCTfbq','Failed\x20to\x20send\x20failed\x20login\x20notification:','9rPFCDN','getOwnPropertyDescriptor','blacklistToken','AuthController','__createBinding','204648iGzEhO','remoteAddress','username','default','authService','defineProperty','tokenBlacklistService','call','__esModule','13284513utagOM','65222CnGWXq','then','160mmHpNW','logout','length','21452172bevaRo','10mVhNMk','ipAddress','telegramBotService','unknown','resolve','1844NEIVtT','prototype','role','getOwnPropertyNames','user','__setModuleDefault','sendLoginNotification','writable','4092168xxWnoB','39bcUjNw'];a4_0x5d7f=function(){return _0x133715;};return a4_0x5d7f();}exports[a4_0x268711(0x172)]=AuthController;