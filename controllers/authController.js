'use strict';function a4_0x2c13(_0x5e730d,_0x12ae2d){const _0x59bee8=a4_0x59be();return a4_0x2c13=function(_0x2c135a,_0x47c8f3){_0x2c135a=_0x2c135a-0x196;let _0x1fa521=_0x59bee8[_0x2c135a];return _0x1fa521;},a4_0x2c13(_0x5e730d,_0x12ae2d);}const a4_0x192888=a4_0x2c13;(function(_0x536ee2,_0x3d2031){const _0x19976a=a4_0x2c13,_0xf93e4a=_0x536ee2();while(!![]){try{const _0x1fc933=-parseInt(_0x19976a(0x1a0))/0x1+parseInt(_0x19976a(0x1b8))/0x2+-parseInt(_0x19976a(0x1aa))/0x3+parseInt(_0x19976a(0x1b6))/0x4*(parseInt(_0x19976a(0x1c1))/0x5)+parseInt(_0x19976a(0x1bf))/0x6*(-parseInt(_0x19976a(0x19e))/0x7)+parseInt(_0x19976a(0x1c7))/0x8*(-parseInt(_0x19976a(0x19c))/0x9)+parseInt(_0x19976a(0x19a))/0xa;if(_0x1fc933===_0x3d2031)break;else _0xf93e4a['push'](_0xf93e4a['shift']());}catch(_0x565698){_0xf93e4a['push'](_0xf93e4a['shift']());}}}(a4_0x59be,0xde7e3));var __createBinding=this&&this['__createBinding']||(Object['create']?function(_0x15c88c,_0x3cd9ed,_0x2caf8d,_0x3f8940){const _0x2511ee=a4_0x2c13;if(_0x3f8940===undefined)_0x3f8940=_0x2caf8d;var _0x329407=Object[_0x2511ee(0x1a9)](_0x3cd9ed,_0x2caf8d);(!_0x329407||(_0x2511ee(0x19b)in _0x329407?!_0x3cd9ed['__esModule']:_0x329407[_0x2511ee(0x1be)]||_0x329407[_0x2511ee(0x1ab)]))&&(_0x329407={'enumerable':!![],'get':function(){return _0x3cd9ed[_0x2caf8d];}}),Object[_0x2511ee(0x1b4)](_0x15c88c,_0x3f8940,_0x329407);}:function(_0x1b5b6f,_0x133815,_0x226abc,_0x110170){if(_0x110170===undefined)_0x110170=_0x226abc;_0x1b5b6f[_0x110170]=_0x133815[_0x226abc];}),__setModuleDefault=this&&this[a4_0x192888(0x1c6)]||(Object[a4_0x192888(0x1b7)]?function(_0x1dd64e,_0x26b353){const _0x99065b=a4_0x192888;Object[_0x99065b(0x1b4)](_0x1dd64e,_0x99065b(0x1b9),{'enumerable':!![],'value':_0x26b353});}:function(_0x55f79b,_0x140fc6){const _0x4c1ee4=a4_0x192888;_0x55f79b[_0x4c1ee4(0x1b9)]=_0x140fc6;}),__importStar=this&&this['__importStar']||(function(){var _0x136016=function(_0x4bec60){const _0x25f785=a4_0x2c13;return _0x136016=Object[_0x25f785(0x1af)]||function(_0x208ee2){const _0x52608b=_0x25f785;var _0x17fb26=[];for(var _0x4dd702 in _0x208ee2)if(Object[_0x52608b(0x1b1)][_0x52608b(0x1c3)][_0x52608b(0x19d)](_0x208ee2,_0x4dd702))_0x17fb26[_0x17fb26[_0x52608b(0x1c5)]]=_0x4dd702;return _0x17fb26;},_0x136016(_0x4bec60);};return function(_0x479a0e){const _0x420e62=a4_0x2c13;if(_0x479a0e&&_0x479a0e[_0x420e62(0x1c4)])return _0x479a0e;var _0x1f8fdf={};if(_0x479a0e!=null){for(var _0x50fbda=_0x136016(_0x479a0e),_0x3d8e6e=0x0;_0x3d8e6e<_0x50fbda[_0x420e62(0x1c5)];_0x3d8e6e++)if(_0x50fbda[_0x3d8e6e]!==_0x420e62(0x1b9))__createBinding(_0x1f8fdf,_0x479a0e,_0x50fbda[_0x3d8e6e]);}return __setModuleDefault(_0x1f8fdf,_0x479a0e),_0x1f8fdf;};}());Object[a4_0x192888(0x1b4)](exports,'__esModule',{'value':!![]}),exports[a4_0x192888(0x1bb)]=void 0x0;const authService_1=require(a4_0x192888(0x1ad)),tokenBlacklistService_1=require(a4_0x192888(0x1c0)),telegramBotService_1=require(a4_0x192888(0x1b2));class AuthController{constructor(){const _0x54a2a8=a4_0x192888;this[_0x54a2a8(0x1b5)]=async(_0x5f3a43,_0x50a55a,_0x590606)=>{const _0xf50423=_0x54a2a8;try{const _0x21d77b=_0x5f3a43['body'],_0x527e8c=_0x5f3a43['ip']||_0x5f3a43[_0xf50423(0x1a6)][_0xf50423(0x196)]||_0xf50423(0x19f),_0xaafea6=_0x5f3a43[_0xf50423(0x19b)](_0xf50423(0x1a3))||'unknown';let _0x346355=![],_0x5a97cb=null;try{const _0x30e0af=await this[_0xf50423(0x1b3)]['login'](_0x21d77b);_0x346355=!![],_0x30e0af[_0xf50423(0x1a8)]===_0xf50423(0x1a1)&&_0x30e0af[_0xf50423(0x1ac)]?.['id']&&(_0x5a97cb=_0x30e0af[_0xf50423(0x1ac)]['id']),_0x5a97cb&&await telegramBotService_1[_0xf50423(0x1a2)][_0xf50423(0x1c2)](_0x5a97cb,{'username':_0x21d77b[_0xf50423(0x197)],'ipAddress':_0x527e8c,'userAgent':_0xaafea6,'timestamp':new Date(),'success':!![]}),_0x50a55a[_0xf50423(0x1bd)]({'success':!![],'result':_0x30e0af});}catch(_0x162fcb){try{const _0xc817cb=(await Promise['resolve']()[_0xf50423(0x1a5)](()=>__importStar(require('../config/database'))))[_0xf50423(0x1b9)],_0x65c61d=await _0xc817cb[_0xf50423(0x1a1)][_0xf50423(0x1b0)]({'where':{'username':_0x21d77b[_0xf50423(0x197)]},'select':{'id':!![]}});_0x65c61d&&await telegramBotService_1[_0xf50423(0x1a2)]['sendLoginNotification'](_0x65c61d['id'],{'username':_0x21d77b[_0xf50423(0x197)],'ipAddress':_0x527e8c,'userAgent':_0xaafea6,'timestamp':new Date(),'success':![]});}catch(_0x3f938f){console['error'](_0xf50423(0x199),_0x3f938f);}throw _0x162fcb;}}catch(_0x132498){_0x590606(_0x132498);}},this['me']=async(_0x51d187,_0x22b7ab,_0x2ba702)=>{const _0x35921f=_0x54a2a8;try{const _0x315731=_0x51d187[_0x35921f(0x1ac)];_0x22b7ab[_0x35921f(0x1bd)]({'success':!![],'result':{'id':_0x315731?.['id'],'username':_0x315731?.[_0x35921f(0x197)],'role':_0x315731?.[_0x35921f(0x1a8)]}});}catch(_0x43c38b){_0x2ba702(_0x43c38b);}},this[_0x54a2a8(0x1bc)]=async(_0x3e0646,_0x3e6b27,_0xb4cf87)=>{const _0xaa6b2b=_0x54a2a8;try{const _0x19276e=_0x3e0646[_0xaa6b2b(0x198)],_0x9fc37f=_0x3e0646[_0xaa6b2b(0x1ac)];_0x19276e&&_0x9fc37f?.[_0xaa6b2b(0x1ae)]&&tokenBlacklistService_1['tokenBlacklistService']['blacklistToken'](_0x19276e,_0x9fc37f[_0xaa6b2b(0x1ae)]),_0x3e6b27[_0xaa6b2b(0x1bd)]({'success':!![],'message':_0xaa6b2b(0x1a7)});}catch(_0x169557){_0xb4cf87(_0x169557);}},this[_0x54a2a8(0x1c8)]=async(_0x5e5c6f,_0x4eaf1f,_0x1f9140)=>{const _0x15ec93=_0x54a2a8;try{const _0x2573c2=tokenBlacklistService_1[_0x15ec93(0x1ba)]['getStats']();_0x4eaf1f[_0x15ec93(0x1bd)]({'success':!![],'result':_0x2573c2});}catch(_0x58ab5d){_0x1f9140(_0x58ab5d);}},this[_0x54a2a8(0x1b3)]=new authService_1[(_0x54a2a8(0x1a4))]();}}exports[a4_0x192888(0x1bb)]=AuthController;function a4_0x59be(){const _0x1caebd=['__esModule','length','__setModuleDefault','16yzbfFm','getBlacklistStats','remoteAddress','username','token','Failed\x20to\x20send\x20failed\x20login\x20notification:','11698190ffaQhh','get','1802673srTQSR','call','28UKqtub','unknown','1283271PjlFNW','shop','telegramBotService','User-Agent','AuthService','then','connection','Logged\x20out\x20successfully','role','getOwnPropertyDescriptor','2936559oOFLUp','configurable','user','../services/authService','exp','getOwnPropertyNames','findUnique','prototype','../services/telegramBotService','authService','defineProperty','login','56NCgbDz','create','2990112RnqOxD','default','tokenBlacklistService','AuthController','logout','json','writable','215502RvkOPF','../services/tokenBlacklistService','376015pyzInH','sendLoginNotification','hasOwnProperty'];a4_0x59be=function(){return _0x1caebd;};return a4_0x59be();}