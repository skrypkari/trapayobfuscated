'use strict';const a4_0x3b663b=a4_0x581e;(function(_0x397296,_0x35dfc2){const _0x456c62=a4_0x581e,_0xaced54=_0x397296();while(!![]){try{const _0x47c9b9=-parseInt(_0x456c62(0xbe))/0x1+parseInt(_0x456c62(0xbf))/0x2*(-parseInt(_0x456c62(0xb9))/0x3)+-parseInt(_0x456c62(0xaf))/0x4*(parseInt(_0x456c62(0xbc))/0x5)+parseInt(_0x456c62(0xaa))/0x6+parseInt(_0x456c62(0xc2))/0x7*(parseInt(_0x456c62(0x95))/0x8)+-parseInt(_0x456c62(0xac))/0x9*(parseInt(_0x456c62(0xa8))/0xa)+parseInt(_0x456c62(0xb1))/0xb;if(_0x47c9b9===_0x35dfc2)break;else _0xaced54['push'](_0xaced54['shift']());}catch(_0xa3804a){_0xaced54['push'](_0xaced54['shift']());}}}(a4_0x3f77,0x98d3b));var __createBinding=this&&this[a4_0x3b663b(0xa4)]||(Object['create']?function(_0x5d3c2f,_0x549f45,_0x28849b,_0x39a30d){const _0x46797e=a4_0x3b663b;if(_0x39a30d===undefined)_0x39a30d=_0x28849b;var _0x3e6958=Object[_0x46797e(0xc8)](_0x549f45,_0x28849b);(!_0x3e6958||(_0x46797e(0xc0)in _0x3e6958?!_0x549f45[_0x46797e(0x97)]:_0x3e6958[_0x46797e(0xbd)]||_0x3e6958[_0x46797e(0xc4)]))&&(_0x3e6958={'enumerable':!![],'get':function(){return _0x549f45[_0x28849b];}}),Object[_0x46797e(0xb2)](_0x5d3c2f,_0x39a30d,_0x3e6958);}:function(_0x3bc37f,_0x8cd1ac,_0x40afdd,_0x4d2835){if(_0x4d2835===undefined)_0x4d2835=_0x40afdd;_0x3bc37f[_0x4d2835]=_0x8cd1ac[_0x40afdd];}),__setModuleDefault=this&&this[a4_0x3b663b(0x94)]||(Object[a4_0x3b663b(0x9d)]?function(_0x3892a3,_0x313c7a){const _0x390c44=a4_0x3b663b;Object[_0x390c44(0xb2)](_0x3892a3,_0x390c44(0xa7),{'enumerable':!![],'value':_0x313c7a});}:function(_0x2df689,_0x3f8733){_0x2df689['default']=_0x3f8733;}),__importStar=this&&this[a4_0x3b663b(0x99)]||(function(){var _0x4822b0=function(_0xea38){return _0x4822b0=Object['getOwnPropertyNames']||function(_0x38d567){const _0x536255=a4_0x581e;var _0x3fc283=[];for(var _0x3e8eb5 in _0x38d567)if(Object[_0x536255(0xc1)][_0x536255(0xbb)][_0x536255(0xa1)](_0x38d567,_0x3e8eb5))_0x3fc283[_0x3fc283['length']]=_0x3e8eb5;return _0x3fc283;},_0x4822b0(_0xea38);};return function(_0xb1d6aa){const _0x2ebd07=a4_0x581e;if(_0xb1d6aa&&_0xb1d6aa[_0x2ebd07(0x97)])return _0xb1d6aa;var _0x186f0e={};if(_0xb1d6aa!=null){for(var _0x578051=_0x4822b0(_0xb1d6aa),_0x545e0e=0x0;_0x545e0e<_0x578051[_0x2ebd07(0xae)];_0x545e0e++)if(_0x578051[_0x545e0e]!==_0x2ebd07(0xa7))__createBinding(_0x186f0e,_0xb1d6aa,_0x578051[_0x545e0e]);}return __setModuleDefault(_0x186f0e,_0xb1d6aa),_0x186f0e;};}());Object[a4_0x3b663b(0xb2)](exports,a4_0x3b663b(0x97),{'value':!![]}),exports[a4_0x3b663b(0xa3)]=void 0x0;function a4_0x3f77(){const _0x3da0fd=['331244gpPpYX','get','prototype','513191wucDVx','role','configurable','connection','../services/tokenBlacklistService','AuthService','getOwnPropertyDescriptor','body','blacklistToken','user','getBlacklistStats','__setModuleDefault','56VjeBgN','sendLoginNotification','__esModule','Logged\x20out\x20successfully','__importStar','username','resolve','authService','create','User-Agent','then','unknown','call','exp','AuthController','__createBinding','json','tokenBlacklistService','default','2909460ZieRZN','remoteAddress','2552694AMkFwk','logout','9GQFcmO','telegramBotService','length','3896EcMSzp','token','13352350aPHgWd','defineProperty','../services/telegramBotService','../services/authService','shop','login','Failed\x20to\x20send\x20failed\x20login\x20notification:','findUnique','12gkqyYS','../config/database','hasOwnProperty','95TwlEWz','writable','554571RcZslL'];a4_0x3f77=function(){return _0x3da0fd;};return a4_0x3f77();}const authService_1=require(a4_0x3b663b(0xb4)),tokenBlacklistService_1=require(a4_0x3b663b(0xc6)),telegramBotService_1=require(a4_0x3b663b(0xb3));function a4_0x581e(_0x124e44,_0x1189d1){const _0x3f772a=a4_0x3f77();return a4_0x581e=function(_0x581ec8,_0x4b2924){_0x581ec8=_0x581ec8-0x94;let _0x18c949=_0x3f772a[_0x581ec8];return _0x18c949;},a4_0x581e(_0x124e44,_0x1189d1);}class AuthController{constructor(){const _0x420b27=a4_0x3b663b;this['login']=async(_0x15468a,_0x41fe67,_0x5f53ca)=>{const _0x377fa2=a4_0x581e;try{const _0x3a45bb=_0x15468a[_0x377fa2(0xc9)],_0x2197f0=_0x15468a['ip']||_0x15468a[_0x377fa2(0xc5)][_0x377fa2(0xa9)]||'unknown',_0x2d3cd8=_0x15468a['get'](_0x377fa2(0x9e))||_0x377fa2(0xa0);let _0x4fdee5=![],_0x1bcea2=null;try{const _0x31a0a3=await this[_0x377fa2(0x9c)][_0x377fa2(0xb6)](_0x3a45bb);_0x4fdee5=!![],_0x31a0a3[_0x377fa2(0xc3)]===_0x377fa2(0xb5)&&_0x31a0a3[_0x377fa2(0xcb)]?.['id']&&(_0x1bcea2=_0x31a0a3[_0x377fa2(0xcb)]['id']),_0x1bcea2&&await telegramBotService_1[_0x377fa2(0xad)]['sendLoginNotification'](_0x1bcea2,{'username':_0x3a45bb[_0x377fa2(0x9a)],'ipAddress':_0x2197f0,'userAgent':_0x2d3cd8,'timestamp':new Date(),'success':!![]}),_0x41fe67['json']({'success':!![],'result':_0x31a0a3});}catch(_0x3c7c62){try{const _0x3f4d4b=(await Promise[_0x377fa2(0x9b)]()[_0x377fa2(0x9f)](()=>__importStar(require(_0x377fa2(0xba)))))[_0x377fa2(0xa7)],_0x30c050=await _0x3f4d4b[_0x377fa2(0xb5)][_0x377fa2(0xb8)]({'where':{'username':_0x3a45bb[_0x377fa2(0x9a)]},'select':{'id':!![]}});_0x30c050&&await telegramBotService_1[_0x377fa2(0xad)][_0x377fa2(0x96)](_0x30c050['id'],{'username':_0x3a45bb[_0x377fa2(0x9a)],'ipAddress':_0x2197f0,'userAgent':_0x2d3cd8,'timestamp':new Date(),'success':![]});}catch(_0x171acb){console['error'](_0x377fa2(0xb7),_0x171acb);}throw _0x3c7c62;}}catch(_0x59b708){_0x5f53ca(_0x59b708);}},this['me']=async(_0x4b031d,_0xd4ed3a,_0x518b30)=>{const _0x486120=a4_0x581e;try{const _0x356c13=_0x4b031d['user'];_0xd4ed3a[_0x486120(0xa5)]({'success':!![],'result':{'id':_0x356c13?.['id'],'username':_0x356c13?.['username'],'role':_0x356c13?.[_0x486120(0xc3)]}});}catch(_0x1e53ad){_0x518b30(_0x1e53ad);}},this[_0x420b27(0xab)]=async(_0x366264,_0x5303b3,_0x53b2db)=>{const _0x40e64a=_0x420b27;try{const _0x53e520=_0x366264[_0x40e64a(0xb0)],_0x3a087f=_0x366264[_0x40e64a(0xcb)];_0x53e520&&_0x3a087f?.[_0x40e64a(0xa2)]&&tokenBlacklistService_1['tokenBlacklistService'][_0x40e64a(0xca)](_0x53e520,_0x3a087f[_0x40e64a(0xa2)]),_0x5303b3['json']({'success':!![],'message':_0x40e64a(0x98)});}catch(_0x39a117){_0x53b2db(_0x39a117);}},this[_0x420b27(0xcc)]=async(_0x37bffc,_0x4eb494,_0x252eb2)=>{const _0x54332a=_0x420b27;try{const _0x50a118=tokenBlacklistService_1[_0x54332a(0xa6)]['getStats']();_0x4eb494['json']({'success':!![],'result':_0x50a118});}catch(_0x4a27b){_0x252eb2(_0x4a27b);}},this[_0x420b27(0x9c)]=new authService_1[(_0x420b27(0xc7))]();}}exports[a4_0x3b663b(0xa3)]=AuthController;