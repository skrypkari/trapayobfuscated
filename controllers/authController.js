'use strict';const a4_0x45a493=a4_0xd1c3;(function(_0x1d3693,_0x3dffab){const _0x2158a3=a4_0xd1c3,_0x25dcc3=_0x1d3693();while(!![]){try{const _0x108edf=parseInt(_0x2158a3(0x10b))/0x1*(-parseInt(_0x2158a3(0x12c))/0x2)+-parseInt(_0x2158a3(0x115))/0x3*(parseInt(_0x2158a3(0x104))/0x4)+parseInt(_0x2158a3(0x108))/0x5*(parseInt(_0x2158a3(0xfc))/0x6)+parseInt(_0x2158a3(0x12d))/0x7+parseInt(_0x2158a3(0x11b))/0x8*(-parseInt(_0x2158a3(0x110))/0x9)+parseInt(_0x2158a3(0x10d))/0xa*(parseInt(_0x2158a3(0x10e))/0xb)+parseInt(_0x2158a3(0x109))/0xc;if(_0x108edf===_0x3dffab)break;else _0x25dcc3['push'](_0x25dcc3['shift']());}catch(_0x5f2653){_0x25dcc3['push'](_0x25dcc3['shift']());}}}(a4_0x3cb0,0xd61bf));function a4_0xd1c3(_0x400236,_0x326d65){const _0x3cb0dc=a4_0x3cb0();return a4_0xd1c3=function(_0xd1c32e,_0x18c43d){_0xd1c32e=_0xd1c32e-0xfa;let _0x3265dd=_0x3cb0dc[_0xd1c32e];return _0x3265dd;},a4_0xd1c3(_0x400236,_0x326d65);}function a4_0x3cb0(){const _0x5813a4=['3887860ZRLkqr','44NjzcMi','findUnique','27yjsKRE','call','sendLoginNotification','then','exp','13830EAWetS','error','create','Logged\x20out\x20successfully','body','resolve','4285000PCDGCv','length','shop','role','hasOwnProperty','__esModule','token','getOwnPropertyDescriptor','user','__createBinding','login','configurable','../config/database','defineProperty','User-Agent','tokenBlacklistService','authService','2tIcbjh','5295276MBesMq','username','AuthService','default','30XIaCSz','getBlacklistStats','unknown','../services/authService','get','telegramBotService','__importStar','writable','292ksDHWV','AuthController','blacklistToken','../services/tokenBlacklistService','828290eDhxZJ','873324CvIvYV','json','392283fSvyWT','Failed\x20to\x20send\x20failed\x20login\x20notification:'];a4_0x3cb0=function(){return _0x5813a4;};return a4_0x3cb0();}var __createBinding=this&&this[a4_0x45a493(0x124)]||(Object[a4_0x45a493(0x117)]?function(_0xda5f32,_0x534970,_0x515b48,_0x9bc191){const _0x1d8229=a4_0x45a493;if(_0x9bc191===undefined)_0x9bc191=_0x515b48;var _0x4411bc=Object[_0x1d8229(0x122)](_0x534970,_0x515b48);(!_0x4411bc||(_0x1d8229(0x100)in _0x4411bc?!_0x534970[_0x1d8229(0x120)]:_0x4411bc[_0x1d8229(0x103)]||_0x4411bc[_0x1d8229(0x126)]))&&(_0x4411bc={'enumerable':!![],'get':function(){return _0x534970[_0x515b48];}}),Object['defineProperty'](_0xda5f32,_0x9bc191,_0x4411bc);}:function(_0x292a69,_0x5c4181,_0x276442,_0x477be5){if(_0x477be5===undefined)_0x477be5=_0x276442;_0x292a69[_0x477be5]=_0x5c4181[_0x276442];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a4_0x45a493(0x117)]?function(_0xef71b5,_0x32761f){const _0x21c453=a4_0x45a493;Object[_0x21c453(0x128)](_0xef71b5,_0x21c453(0xfb),{'enumerable':!![],'value':_0x32761f});}:function(_0x4be059,_0x56a479){const _0x21a7f2=a4_0x45a493;_0x4be059[_0x21a7f2(0xfb)]=_0x56a479;}),__importStar=this&&this[a4_0x45a493(0x102)]||(function(){var _0xae37b9=function(_0x4ead74){return _0xae37b9=Object['getOwnPropertyNames']||function(_0x75b419){const _0x4f4a8d=a4_0xd1c3;var _0x18d8c9=[];for(var _0xf0852f in _0x75b419)if(Object['prototype'][_0x4f4a8d(0x11f)][_0x4f4a8d(0x111)](_0x75b419,_0xf0852f))_0x18d8c9[_0x18d8c9[_0x4f4a8d(0x11c)]]=_0xf0852f;return _0x18d8c9;},_0xae37b9(_0x4ead74);};return function(_0x498c){if(_0x498c&&_0x498c['__esModule'])return _0x498c;var _0xf55d01={};if(_0x498c!=null){for(var _0x2c2c60=_0xae37b9(_0x498c),_0x178e6d=0x0;_0x178e6d<_0x2c2c60['length'];_0x178e6d++)if(_0x2c2c60[_0x178e6d]!=='default')__createBinding(_0xf55d01,_0x498c,_0x2c2c60[_0x178e6d]);}return __setModuleDefault(_0xf55d01,_0x498c),_0xf55d01;};}());Object['defineProperty'](exports,a4_0x45a493(0x120),{'value':!![]}),exports[a4_0x45a493(0x105)]=void 0x0;const authService_1=require(a4_0x45a493(0xff)),tokenBlacklistService_1=require(a4_0x45a493(0x107)),telegramBotService_1=require('../services/telegramBotService');class AuthController{constructor(){const _0x279de8=a4_0x45a493;this[_0x279de8(0x125)]=async(_0x1d2c81,_0x1e12a4,_0x1771f8)=>{const _0x54670b=_0x279de8;try{const _0x189a48=_0x1d2c81[_0x54670b(0x119)],_0x1c2ab0=_0x1d2c81['ip']||_0x1d2c81['connection']['remoteAddress']||_0x54670b(0xfe),_0x394d78=_0x1d2c81[_0x54670b(0x100)](_0x54670b(0x129))||_0x54670b(0xfe);let _0x13b2fb=![],_0x2ab038=null;try{const _0x2e487d=await this[_0x54670b(0x12b)]['login'](_0x189a48);_0x13b2fb=!![],_0x2e487d['role']===_0x54670b(0x11d)&&_0x2e487d['user']?.['id']&&(_0x2ab038=_0x2e487d[_0x54670b(0x123)]['id']),_0x2ab038&&await telegramBotService_1[_0x54670b(0x101)][_0x54670b(0x112)](_0x2ab038,{'username':_0x189a48[_0x54670b(0x12e)],'ipAddress':_0x1c2ab0,'userAgent':_0x394d78,'timestamp':new Date(),'success':!![]}),_0x1e12a4[_0x54670b(0x10a)]({'success':!![],'result':_0x2e487d});}catch(_0x1b52cd){try{const _0x16b21c=(await Promise[_0x54670b(0x11a)]()[_0x54670b(0x113)](()=>__importStar(require(_0x54670b(0x127)))))['default'],_0x5aa9e2=await _0x16b21c[_0x54670b(0x11d)][_0x54670b(0x10f)]({'where':{'username':_0x189a48['username']},'select':{'id':!![]}});_0x5aa9e2&&await telegramBotService_1['telegramBotService'][_0x54670b(0x112)](_0x5aa9e2['id'],{'username':_0x189a48[_0x54670b(0x12e)],'ipAddress':_0x1c2ab0,'userAgent':_0x394d78,'timestamp':new Date(),'success':![]});}catch(_0x23257e){console[_0x54670b(0x116)](_0x54670b(0x10c),_0x23257e);}throw _0x1b52cd;}}catch(_0x19ff33){_0x1771f8(_0x19ff33);}},this['me']=async(_0x46ad47,_0x47d04b,_0x1c25dc)=>{const _0x1de14b=_0x279de8;try{const _0x2fce29=_0x46ad47[_0x1de14b(0x123)];_0x47d04b['json']({'success':!![],'result':{'id':_0x2fce29?.['id'],'username':_0x2fce29?.[_0x1de14b(0x12e)],'role':_0x2fce29?.[_0x1de14b(0x11e)]}});}catch(_0x428409){_0x1c25dc(_0x428409);}},this['logout']=async(_0x391dcd,_0x205a42,_0x3fedc9)=>{const _0xb7b6da=_0x279de8;try{const _0x23a9f6=_0x391dcd[_0xb7b6da(0x121)],_0x1db7ac=_0x391dcd[_0xb7b6da(0x123)];_0x23a9f6&&_0x1db7ac?.[_0xb7b6da(0x114)]&&tokenBlacklistService_1[_0xb7b6da(0x12a)][_0xb7b6da(0x106)](_0x23a9f6,_0x1db7ac[_0xb7b6da(0x114)]),_0x205a42[_0xb7b6da(0x10a)]({'success':!![],'message':_0xb7b6da(0x118)});}catch(_0x5913b8){_0x3fedc9(_0x5913b8);}},this[_0x279de8(0xfd)]=async(_0x425b0b,_0x526106,_0x389dda)=>{try{const _0x3d7ccc=tokenBlacklistService_1['tokenBlacklistService']['getStats']();_0x526106['json']({'success':!![],'result':_0x3d7ccc});}catch(_0x27b262){_0x389dda(_0x27b262);}},this[_0x279de8(0x12b)]=new authService_1[(_0x279de8(0xfa))]();}}exports['AuthController']=AuthController;