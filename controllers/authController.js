'use strict';const a4_0x5de887=a4_0x4fe7;(function(_0x2c86dc,_0x4f09){const _0x591cb1=a4_0x4fe7,_0x436070=_0x2c86dc();while(!![]){try{const _0x2771ab=-parseInt(_0x591cb1(0x13d))/0x1+-parseInt(_0x591cb1(0x13f))/0x2*(-parseInt(_0x591cb1(0x132))/0x3)+parseInt(_0x591cb1(0x125))/0x4*(parseInt(_0x591cb1(0x12e))/0x5)+parseInt(_0x591cb1(0x142))/0x6+parseInt(_0x591cb1(0x13b))/0x7*(parseInt(_0x591cb1(0x13a))/0x8)+-parseInt(_0x591cb1(0x12d))/0x9*(parseInt(_0x591cb1(0x129))/0xa)+parseInt(_0x591cb1(0x137))/0xb*(-parseInt(_0x591cb1(0x135))/0xc);if(_0x2771ab===_0x4f09)break;else _0x436070['push'](_0x436070['shift']());}catch(_0x5d4c69){_0x436070['push'](_0x436070['shift']());}}}(a4_0x37c4,0xb41cc));var __createBinding=this&&this[a4_0x5de887(0x11f)]||(Object[a4_0x5de887(0x127)]?function(_0x48f98e,_0x207fc8,_0x4313b3,_0x5bdb61){const _0x12376c=a4_0x5de887;if(_0x5bdb61===undefined)_0x5bdb61=_0x4313b3;var _0x1c5086=Object[_0x12376c(0x113)](_0x207fc8,_0x4313b3);(!_0x1c5086||(_0x12376c(0x12c)in _0x1c5086?!_0x207fc8[_0x12376c(0x122)]:_0x1c5086['writable']||_0x1c5086[_0x12376c(0x133)]))&&(_0x1c5086={'enumerable':!![],'get':function(){return _0x207fc8[_0x4313b3];}}),Object[_0x12376c(0x11b)](_0x48f98e,_0x5bdb61,_0x1c5086);}:function(_0x1519aa,_0x3046df,_0x3424df,_0x38f741){if(_0x38f741===undefined)_0x38f741=_0x3424df;_0x1519aa[_0x38f741]=_0x3046df[_0x3424df];}),__setModuleDefault=this&&this[a4_0x5de887(0x11e)]||(Object[a4_0x5de887(0x127)]?function(_0x4e586a,_0x4a0b42){const _0x241030=a4_0x5de887;Object[_0x241030(0x11b)](_0x4e586a,_0x241030(0x11c),{'enumerable':!![],'value':_0x4a0b42});}:function(_0x1b0256,_0x1a661c){const _0x49a322=a4_0x5de887;_0x1b0256[_0x49a322(0x11c)]=_0x1a661c;}),__importStar=this&&this[a4_0x5de887(0x131)]||(function(){var _0x5ec8c7=function(_0x21d334){const _0x40e9c6=a4_0x4fe7;return _0x5ec8c7=Object[_0x40e9c6(0x12b)]||function(_0x49cfb6){const _0xfcacd8=_0x40e9c6;var _0x26d77f=[];for(var _0x1af90e in _0x49cfb6)if(Object['prototype']['hasOwnProperty']['call'](_0x49cfb6,_0x1af90e))_0x26d77f[_0x26d77f[_0xfcacd8(0x120)]]=_0x1af90e;return _0x26d77f;},_0x5ec8c7(_0x21d334);};return function(_0x33c4a5){const _0x333b51=a4_0x4fe7;if(_0x33c4a5&&_0x33c4a5[_0x333b51(0x122)])return _0x33c4a5;var _0x338ef6={};if(_0x33c4a5!=null){for(var _0x1a9e41=_0x5ec8c7(_0x33c4a5),_0xe88f93=0x0;_0xe88f93<_0x1a9e41[_0x333b51(0x120)];_0xe88f93++)if(_0x1a9e41[_0xe88f93]!==_0x333b51(0x11c))__createBinding(_0x338ef6,_0x33c4a5,_0x1a9e41[_0xe88f93]);}return __setModuleDefault(_0x338ef6,_0x33c4a5),_0x338ef6;};}());Object[a4_0x5de887(0x11b)](exports,a4_0x5de887(0x122),{'value':!![]}),exports[a4_0x5de887(0x128)]=void 0x0;const authService_1=require(a4_0x5de887(0x119)),tokenBlacklistService_1=require(a4_0x5de887(0x143)),telegramBotService_1=require('../services/telegramBotService');function a4_0x4fe7(_0x3ea2eb,_0x1f7b82){const _0x37c456=a4_0x37c4();return a4_0x4fe7=function(_0x4fe7a4,_0x3d4302){_0x4fe7a4=_0x4fe7a4-0x113;let _0x4d4e91=_0x37c456[_0x4fe7a4];return _0x4d4e91;},a4_0x4fe7(_0x3ea2eb,_0x1f7b82);}function a4_0x37c4(){const _0x2d811f=['1384kbhuNH','46921jcNRHE','user','516953FNcKVJ','tokenBlacklistService','34EHpJEO','User-Agent','resolve','6322188lENCHh','../services/tokenBlacklistService','getOwnPropertyDescriptor','token','logout','username','Failed\x20to\x20send\x20failed\x20login\x20notification:','json','../services/authService','authService','defineProperty','default','shop','__setModuleDefault','__createBinding','length','findUnique','__esModule','sendLoginNotification','getBlacklistStats','172yZqCXy','../config/database','create','AuthController','37610eIehfv','AuthService','getOwnPropertyNames','get','180aDPJEg','101975SJBPdG','role','remoteAddress','__importStar','64257KdOGqA','configurable','Logged\x20out\x20successfully','48UNWKdi','exp','5842408VAjWAj','error','login'];a4_0x37c4=function(){return _0x2d811f;};return a4_0x37c4();}class AuthController{constructor(){const _0x2d40dc=a4_0x5de887;this[_0x2d40dc(0x139)]=async(_0x27abb7,_0x4a43ac,_0x170294)=>{const _0x1b1836=_0x2d40dc;try{const _0x249d38=_0x27abb7['body'],_0x5c2335=_0x27abb7['ip']||_0x27abb7['connection'][_0x1b1836(0x130)]||'unknown',_0x4785bb=_0x27abb7[_0x1b1836(0x12c)](_0x1b1836(0x140))||'unknown';let _0xa10282=![],_0x1b023c=null;try{const _0x5b7747=await this[_0x1b1836(0x11a)]['login'](_0x249d38);_0xa10282=!![],_0x5b7747[_0x1b1836(0x12f)]==='shop'&&_0x5b7747[_0x1b1836(0x13c)]?.['id']&&(_0x1b023c=_0x5b7747[_0x1b1836(0x13c)]['id']),_0x1b023c&&await telegramBotService_1['telegramBotService'][_0x1b1836(0x123)](_0x1b023c,{'username':_0x249d38[_0x1b1836(0x116)],'ipAddress':_0x5c2335,'userAgent':_0x4785bb,'timestamp':new Date(),'success':!![]}),_0x4a43ac[_0x1b1836(0x118)]({'success':!![],'result':_0x5b7747});}catch(_0x15861c){try{const _0x153716=(await Promise[_0x1b1836(0x141)]()['then'](()=>__importStar(require(_0x1b1836(0x126)))))[_0x1b1836(0x11c)],_0x5bf551=await _0x153716[_0x1b1836(0x11d)][_0x1b1836(0x121)]({'where':{'username':_0x249d38['username']},'select':{'id':!![]}});_0x5bf551&&await telegramBotService_1['telegramBotService'][_0x1b1836(0x123)](_0x5bf551['id'],{'username':_0x249d38[_0x1b1836(0x116)],'ipAddress':_0x5c2335,'userAgent':_0x4785bb,'timestamp':new Date(),'success':![]});}catch(_0x26212e){console[_0x1b1836(0x138)](_0x1b1836(0x117),_0x26212e);}throw _0x15861c;}}catch(_0x44e9f1){_0x170294(_0x44e9f1);}},this['me']=async(_0x3ebb2a,_0x58db68,_0x417647)=>{const _0x411f1d=_0x2d40dc;try{const _0x4385b2=_0x3ebb2a[_0x411f1d(0x13c)];_0x58db68[_0x411f1d(0x118)]({'success':!![],'result':{'id':_0x4385b2?.['id'],'username':_0x4385b2?.[_0x411f1d(0x116)],'role':_0x4385b2?.[_0x411f1d(0x12f)]}});}catch(_0x1f074a){_0x417647(_0x1f074a);}},this[_0x2d40dc(0x115)]=async(_0x19557e,_0x92c387,_0x137bc3)=>{const _0x4d265f=_0x2d40dc;try{const _0x308728=_0x19557e[_0x4d265f(0x114)],_0x481e64=_0x19557e[_0x4d265f(0x13c)];_0x308728&&_0x481e64?.[_0x4d265f(0x136)]&&tokenBlacklistService_1['tokenBlacklistService']['blacklistToken'](_0x308728,_0x481e64['exp']),_0x92c387['json']({'success':!![],'message':_0x4d265f(0x134)});}catch(_0x20652d){_0x137bc3(_0x20652d);}},this[_0x2d40dc(0x124)]=async(_0x307afd,_0xdb2494,_0xea57e5)=>{const _0x442064=_0x2d40dc;try{const _0x3b1d3d=tokenBlacklistService_1[_0x442064(0x13e)]['getStats']();_0xdb2494[_0x442064(0x118)]({'success':!![],'result':_0x3b1d3d});}catch(_0x52e2f4){_0xea57e5(_0x52e2f4);}},this['authService']=new authService_1[(_0x2d40dc(0x12a))]();}}exports['AuthController']=AuthController;