'use strict';const a4_0x454738=a4_0x1602;(function(_0x35c0ad,_0x128249){const _0x224e84=a4_0x1602,_0x41a27e=_0x35c0ad();while(!![]){try{const _0x5c5589=parseInt(_0x224e84(0x1f3))/0x1*(-parseInt(_0x224e84(0x1e7))/0x2)+-parseInt(_0x224e84(0x201))/0x3+-parseInt(_0x224e84(0x1ef))/0x4*(parseInt(_0x224e84(0x207))/0x5)+-parseInt(_0x224e84(0x1fd))/0x6*(-parseInt(_0x224e84(0x21c))/0x7)+parseInt(_0x224e84(0x1fa))/0x8*(-parseInt(_0x224e84(0x1ed))/0x9)+parseInt(_0x224e84(0x1ea))/0xa+parseInt(_0x224e84(0x1ee))/0xb;if(_0x5c5589===_0x128249)break;else _0x41a27e['push'](_0x41a27e['shift']());}catch(_0x51ca2b){_0x41a27e['push'](_0x41a27e['shift']());}}}(a4_0x2775,0xe12fa));function a4_0x2775(){const _0x31dad1=['create','65lcDdCL','resolve','getStats','../services/tokenBlacklistService','writable','getOwnPropertyNames','getOwnPropertyDescriptor','AuthService','ipAddress','getBlacklistStats','connection','defineProperty','json','findUnique','exp','Failed\x20to\x20send\x20failed\x20login\x20notification:','shop','user','then','geo','__importStar','25907HnOINN','get','14UzcPwf','AuthController','unknown','6870390SjHEZn','Logged\x20out\x20successfully','default','6651JqupjM','55778118Chngyt','410996RwEISD','blacklistToken','User-Agent','error','245054qcnkUO','__createBinding','__esModule','remoteAddress','length','__setModuleDefault','sendLoginNotification','8824uQFKUV','role','login','1140rJvxzs','../config/database','hasOwnProperty','telegramBotService','5017119NcWOlJ','logout','authService','username','configurable'];a4_0x2775=function(){return _0x31dad1;};return a4_0x2775();}function a4_0x1602(_0x4f1f56,_0x4e0015){_0x4f1f56=_0x4f1f56-0x1e6;const _0x2775e7=a4_0x2775();let _0x16021e=_0x2775e7[_0x4f1f56];return _0x16021e;}var __createBinding=this&&this[a4_0x454738(0x1f4)]||(Object[a4_0x454738(0x206)]?function(_0x48aece,_0x56e210,_0x15c8c3,_0x3eb521){const _0x1fe00d=a4_0x454738;if(_0x3eb521===undefined)_0x3eb521=_0x15c8c3;var _0x414b11=Object[_0x1fe00d(0x20d)](_0x56e210,_0x15c8c3);(!_0x414b11||(_0x1fe00d(0x1e6)in _0x414b11?!_0x56e210[_0x1fe00d(0x1f5)]:_0x414b11[_0x1fe00d(0x20b)]||_0x414b11[_0x1fe00d(0x205)]))&&(_0x414b11={'enumerable':!![],'get':function(){return _0x56e210[_0x15c8c3];}}),Object[_0x1fe00d(0x212)](_0x48aece,_0x3eb521,_0x414b11);}:function(_0x47f6e9,_0x415db5,_0x46c9cc,_0x16024b){if(_0x16024b===undefined)_0x16024b=_0x46c9cc;_0x47f6e9[_0x16024b]=_0x415db5[_0x46c9cc];}),__setModuleDefault=this&&this[a4_0x454738(0x1f8)]||(Object[a4_0x454738(0x206)]?function(_0xef4148,_0x16cc54){const _0x825fb=a4_0x454738;Object['defineProperty'](_0xef4148,_0x825fb(0x1ec),{'enumerable':!![],'value':_0x16cc54});}:function(_0x5336e4,_0x2e4ede){_0x5336e4['default']=_0x2e4ede;}),__importStar=this&&this[a4_0x454738(0x21b)]||(function(){var _0x59ce55=function(_0x3d1c3a){const _0x266a1f=a4_0x1602;return _0x59ce55=Object[_0x266a1f(0x20c)]||function(_0x5a88b3){const _0x52482c=_0x266a1f;var _0x23ba26=[];for(var _0x11881a in _0x5a88b3)if(Object['prototype'][_0x52482c(0x1ff)]['call'](_0x5a88b3,_0x11881a))_0x23ba26[_0x23ba26[_0x52482c(0x1f7)]]=_0x11881a;return _0x23ba26;},_0x59ce55(_0x3d1c3a);};return function(_0x242594){const _0x4141d3=a4_0x1602;if(_0x242594&&_0x242594['__esModule'])return _0x242594;var _0x13f1f3={};if(_0x242594!=null){for(var _0x5839fd=_0x59ce55(_0x242594),_0x33b650=0x0;_0x33b650<_0x5839fd[_0x4141d3(0x1f7)];_0x33b650++)if(_0x5839fd[_0x33b650]!=='default')__createBinding(_0x13f1f3,_0x242594,_0x5839fd[_0x33b650]);}return __setModuleDefault(_0x13f1f3,_0x242594),_0x13f1f3;};}());Object[a4_0x454738(0x212)](exports,'__esModule',{'value':!![]}),exports[a4_0x454738(0x1e8)]=void 0x0;const authService_1=require('../services/authService'),tokenBlacklistService_1=require(a4_0x454738(0x20a)),telegramBotService_1=require('../services/telegramBotService');class AuthController{constructor(){const _0x50b38f=a4_0x454738;this[_0x50b38f(0x1fc)]=async(_0x21f29d,_0x42d65a,_0x4e89ce)=>{const _0x21c5c8=_0x50b38f;try{const _0x3299ba=_0x21f29d['body'],_0x1d8687=_0x3299ba[_0x21c5c8(0x20f)]||_0x21f29d['ip']||_0x21f29d[_0x21c5c8(0x211)][_0x21c5c8(0x1f6)]||_0x21c5c8(0x1e9),_0xe55cc=_0x3299ba['userAgent']||_0x21f29d[_0x21c5c8(0x1e6)](_0x21c5c8(0x1f1))||_0x21c5c8(0x1e9),_0x5ce2fd=_0x3299ba[_0x21c5c8(0x21a)];let _0x3a8e8f=![],_0x5aaedb=null;try{const _0x35b9ed=await this[_0x21c5c8(0x203)][_0x21c5c8(0x1fc)](_0x3299ba);_0x3a8e8f=!![],_0x35b9ed[_0x21c5c8(0x1fb)]===_0x21c5c8(0x217)&&_0x35b9ed[_0x21c5c8(0x218)]?.['id']&&(_0x5aaedb=_0x35b9ed[_0x21c5c8(0x218)]['id']),_0x5aaedb&&await telegramBotService_1[_0x21c5c8(0x200)][_0x21c5c8(0x1f9)](_0x5aaedb,{'username':_0x3299ba['username'],'ipAddress':_0x1d8687,'userAgent':_0xe55cc,'geo':_0x5ce2fd,'timestamp':new Date(),'success':!![]}),_0x42d65a['json']({'success':!![],'result':_0x35b9ed});}catch(_0x574834){try{const _0x2d57c4=(await Promise[_0x21c5c8(0x208)]()[_0x21c5c8(0x219)](()=>__importStar(require(_0x21c5c8(0x1fe)))))['default'],_0x25b5d2=await _0x2d57c4[_0x21c5c8(0x217)][_0x21c5c8(0x214)]({'where':{'username':_0x3299ba[_0x21c5c8(0x204)]},'select':{'id':!![]}});_0x25b5d2&&await telegramBotService_1[_0x21c5c8(0x200)][_0x21c5c8(0x1f9)](_0x25b5d2['id'],{'username':_0x3299ba[_0x21c5c8(0x204)],'ipAddress':_0x1d8687,'userAgent':_0xe55cc,'geo':_0x5ce2fd,'timestamp':new Date(),'success':![]});}catch(_0x58dbbf){console[_0x21c5c8(0x1f2)](_0x21c5c8(0x216),_0x58dbbf);}throw _0x574834;}}catch(_0x390e2f){_0x4e89ce(_0x390e2f);}},this['me']=async(_0x29757f,_0x5c0a1e,_0x5c931b)=>{const _0x4d7512=_0x50b38f;try{const _0x3153e6=_0x29757f[_0x4d7512(0x218)];_0x5c0a1e[_0x4d7512(0x213)]({'success':!![],'result':{'id':_0x3153e6?.['id'],'username':_0x3153e6?.[_0x4d7512(0x204)],'role':_0x3153e6?.[_0x4d7512(0x1fb)]}});}catch(_0x5d5a64){_0x5c931b(_0x5d5a64);}},this[_0x50b38f(0x202)]=async(_0xd58826,_0x3016ca,_0x4a2f23)=>{const _0x595a1b=_0x50b38f;try{const _0x374ce9=_0xd58826['token'],_0xc6c6cd=_0xd58826[_0x595a1b(0x218)];_0x374ce9&&_0xc6c6cd?.['exp']&&tokenBlacklistService_1['tokenBlacklistService'][_0x595a1b(0x1f0)](_0x374ce9,_0xc6c6cd[_0x595a1b(0x215)]),_0x3016ca[_0x595a1b(0x213)]({'success':!![],'message':_0x595a1b(0x1eb)});}catch(_0xa2bc60){_0x4a2f23(_0xa2bc60);}},this[_0x50b38f(0x210)]=async(_0x3fc27b,_0x3ab74f,_0x36e016)=>{const _0x118cf9=_0x50b38f;try{const _0x6cc89d=tokenBlacklistService_1['tokenBlacklistService'][_0x118cf9(0x209)]();_0x3ab74f[_0x118cf9(0x213)]({'success':!![],'result':_0x6cc89d});}catch(_0x40bad6){_0x36e016(_0x40bad6);}},this['authService']=new authService_1[(_0x50b38f(0x20e))]();}}exports[a4_0x454738(0x1e8)]=AuthController;