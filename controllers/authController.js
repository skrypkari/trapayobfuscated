'use strict';const a4_0x4e470d=a4_0x3dbc;function a4_0x47a1(){const _0x1c5434=['AuthService','__setModuleDefault','../services/authService','user','Failed\x20to\x20send\x20failed\x20login\x20notification:','then','unknown','defineProperty','create','__esModule','9752617MhDcVH','exp','Logged\x20out\x20successfully','blacklistToken','2791652fqHEcw','../services/tokenBlacklistService','9379863GVOxgO','2560122JHPsRe','154EywyQi','8IBEApG','remoteAddress','login','default','204xjWLrE','../services/telegramBotService','body','json','1XzYLCi','authService','telegramBotService','error','tokenBlacklistService','1876396pCUaSU','shop','__importStar','get','writable','findUnique','role','resolve','length','configurable','AuthController','__createBinding','username','121670cPauLa','getOwnPropertyNames','logout','792290ZHIclO','sendLoginNotification','prototype','User-Agent'];a4_0x47a1=function(){return _0x1c5434;};return a4_0x47a1();}(function(_0x2b8035,_0x493444){const _0x73e925=a4_0x3dbc,_0x477e97=_0x2b8035();while(!![]){try{const _0x49a352=parseInt(_0x73e925(0x1bb))/0x1*(parseInt(_0x73e925(0x1c0))/0x2)+-parseInt(_0x73e925(0x1b1))/0x3+parseInt(_0x73e925(0x1ae))/0x4+parseInt(_0x73e925(0x199))/0x5*(parseInt(_0x73e925(0x1b7))/0x6)+parseInt(_0x73e925(0x1aa))/0x7+-parseInt(_0x73e925(0x1b3))/0x8*(parseInt(_0x73e925(0x1b0))/0x9)+-parseInt(_0x73e925(0x19c))/0xa*(parseInt(_0x73e925(0x1b2))/0xb);if(_0x49a352===_0x493444)break;else _0x477e97['push'](_0x477e97['shift']());}catch(_0x2624c6){_0x477e97['push'](_0x477e97['shift']());}}}(a4_0x47a1,0xcffc7));var __createBinding=this&&this[a4_0x4e470d(0x197)]||(Object[a4_0x4e470d(0x1a8)]?function(_0x594a58,_0x27e0b6,_0x25d287,_0x8cc722){const _0x3cd8be=a4_0x4e470d;if(_0x8cc722===undefined)_0x8cc722=_0x25d287;var _0x5599a6=Object['getOwnPropertyDescriptor'](_0x27e0b6,_0x25d287);(!_0x5599a6||('get'in _0x5599a6?!_0x27e0b6[_0x3cd8be(0x1a9)]:_0x5599a6[_0x3cd8be(0x1c4)]||_0x5599a6[_0x3cd8be(0x195)]))&&(_0x5599a6={'enumerable':!![],'get':function(){return _0x27e0b6[_0x25d287];}}),Object[_0x3cd8be(0x1a7)](_0x594a58,_0x8cc722,_0x5599a6);}:function(_0x43e440,_0x2cffff,_0x24a0d7,_0x2674ba){if(_0x2674ba===undefined)_0x2674ba=_0x24a0d7;_0x43e440[_0x2674ba]=_0x2cffff[_0x24a0d7];}),__setModuleDefault=this&&this[a4_0x4e470d(0x1a1)]||(Object[a4_0x4e470d(0x1a8)]?function(_0x224b11,_0x18bbdb){const _0x560d30=a4_0x4e470d;Object[_0x560d30(0x1a7)](_0x224b11,_0x560d30(0x1b6),{'enumerable':!![],'value':_0x18bbdb});}:function(_0x287ed6,_0x34e6ce){_0x287ed6['default']=_0x34e6ce;}),__importStar=this&&this[a4_0x4e470d(0x1c2)]||(function(){var _0x4d7dad=function(_0x266538){const _0x9b670c=a4_0x3dbc;return _0x4d7dad=Object[_0x9b670c(0x19a)]||function(_0x269f15){const _0x2f24cb=_0x9b670c;var _0x3cd2c1=[];for(var _0x4257b6 in _0x269f15)if(Object[_0x2f24cb(0x19e)]['hasOwnProperty']['call'](_0x269f15,_0x4257b6))_0x3cd2c1[_0x3cd2c1[_0x2f24cb(0x194)]]=_0x4257b6;return _0x3cd2c1;},_0x4d7dad(_0x266538);};return function(_0x2a9151){const _0x285de0=a4_0x3dbc;if(_0x2a9151&&_0x2a9151['__esModule'])return _0x2a9151;var _0x51e9c0={};if(_0x2a9151!=null){for(var _0x4c2e43=_0x4d7dad(_0x2a9151),_0x3366a6=0x0;_0x3366a6<_0x4c2e43[_0x285de0(0x194)];_0x3366a6++)if(_0x4c2e43[_0x3366a6]!==_0x285de0(0x1b6))__createBinding(_0x51e9c0,_0x2a9151,_0x4c2e43[_0x3366a6]);}return __setModuleDefault(_0x51e9c0,_0x2a9151),_0x51e9c0;};}());Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a4_0x4e470d(0x196)]=void 0x0;const authService_1=require(a4_0x4e470d(0x1a2)),tokenBlacklistService_1=require(a4_0x4e470d(0x1af)),telegramBotService_1=require(a4_0x4e470d(0x1b8));class AuthController{constructor(){const _0x2e71e9=a4_0x4e470d;this[_0x2e71e9(0x1b5)]=async(_0x3f33a7,_0x5853a9,_0x555897)=>{const _0x22deb2=_0x2e71e9;try{const _0x424259=_0x3f33a7[_0x22deb2(0x1b9)],_0xc27e59=_0x3f33a7['ip']||_0x3f33a7['connection'][_0x22deb2(0x1b4)]||_0x22deb2(0x1a6),_0x20d081=_0x3f33a7[_0x22deb2(0x1c3)](_0x22deb2(0x19f))||_0x22deb2(0x1a6);let _0x197827=![],_0x2a1478=null;try{const _0x2210b2=await this[_0x22deb2(0x1bc)]['login'](_0x424259);_0x197827=!![],_0x2210b2[_0x22deb2(0x192)]===_0x22deb2(0x1c1)&&_0x2210b2[_0x22deb2(0x1a3)]?.['id']&&(_0x2a1478=_0x2210b2[_0x22deb2(0x1a3)]['id']),_0x2a1478&&await telegramBotService_1['telegramBotService'][_0x22deb2(0x19d)](_0x2a1478,{'username':_0x424259['username'],'ipAddress':_0xc27e59,'userAgent':_0x20d081,'timestamp':new Date(),'success':!![]}),_0x5853a9['json']({'success':!![],'result':_0x2210b2});}catch(_0x193bde){try{const _0x4bbb3f=(await Promise[_0x22deb2(0x193)]()[_0x22deb2(0x1a5)](()=>__importStar(require('../config/database'))))['default'],_0x408016=await _0x4bbb3f[_0x22deb2(0x1c1)][_0x22deb2(0x191)]({'where':{'username':_0x424259[_0x22deb2(0x198)]},'select':{'id':!![]}});_0x408016&&await telegramBotService_1[_0x22deb2(0x1bd)]['sendLoginNotification'](_0x408016['id'],{'username':_0x424259['username'],'ipAddress':_0xc27e59,'userAgent':_0x20d081,'timestamp':new Date(),'success':![]});}catch(_0x266e5e){console[_0x22deb2(0x1be)](_0x22deb2(0x1a4),_0x266e5e);}throw _0x193bde;}}catch(_0x52fec7){_0x555897(_0x52fec7);}},this['me']=async(_0x111bed,_0x2110d0,_0x4f8df1)=>{const _0x34f1f8=_0x2e71e9;try{const _0x453359=_0x111bed[_0x34f1f8(0x1a3)];_0x2110d0[_0x34f1f8(0x1ba)]({'success':!![],'result':{'id':_0x453359?.['id'],'username':_0x453359?.[_0x34f1f8(0x198)],'role':_0x453359?.[_0x34f1f8(0x192)]}});}catch(_0x33d87d){_0x4f8df1(_0x33d87d);}},this[_0x2e71e9(0x19b)]=async(_0x40562d,_0x4ff4ef,_0xe53dda)=>{const _0x16192a=_0x2e71e9;try{const _0x497e03=_0x40562d['token'],_0x507709=_0x40562d[_0x16192a(0x1a3)];_0x497e03&&_0x507709?.[_0x16192a(0x1ab)]&&tokenBlacklistService_1[_0x16192a(0x1bf)][_0x16192a(0x1ad)](_0x497e03,_0x507709[_0x16192a(0x1ab)]),_0x4ff4ef[_0x16192a(0x1ba)]({'success':!![],'message':_0x16192a(0x1ac)});}catch(_0x3622a2){_0xe53dda(_0x3622a2);}},this['getBlacklistStats']=async(_0x42289c,_0x542413,_0x16ed23)=>{const _0x3fb670=_0x2e71e9;try{const _0x5b9acc=tokenBlacklistService_1[_0x3fb670(0x1bf)]['getStats']();_0x542413['json']({'success':!![],'result':_0x5b9acc});}catch(_0x19668a){_0x16ed23(_0x19668a);}},this['authService']=new authService_1[(_0x2e71e9(0x1a0))]();}}function a4_0x3dbc(_0x3a3a6e,_0x19d483){const _0x47a1cb=a4_0x47a1();return a4_0x3dbc=function(_0x3dbc02,_0x3f76f0){_0x3dbc02=_0x3dbc02-0x191;let _0x5010be=_0x47a1cb[_0x3dbc02];return _0x5010be;},a4_0x3dbc(_0x3a3a6e,_0x19d483);}exports['AuthController']=AuthController;