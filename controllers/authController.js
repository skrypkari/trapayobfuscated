'use strict';const a4_0x32ac04=a4_0x367e;function a4_0x367e(_0x96d02f,_0x34f7b6){const _0x1f00ba=a4_0x1f00();return a4_0x367e=function(_0x367e0c,_0x44e3aa){_0x367e0c=_0x367e0c-0xa1;let _0x3371ab=_0x1f00ba[_0x367e0c];return _0x3371ab;},a4_0x367e(_0x96d02f,_0x34f7b6);}(function(_0x105688,_0x18021c){const _0x583f5e=a4_0x367e,_0x1751b7=_0x105688();while(!![]){try{const _0x176e54=-parseInt(_0x583f5e(0xc1))/0x1+-parseInt(_0x583f5e(0xc0))/0x2+parseInt(_0x583f5e(0xbb))/0x3+parseInt(_0x583f5e(0xb9))/0x4*(parseInt(_0x583f5e(0xd0))/0x5)+parseInt(_0x583f5e(0xb2))/0x6*(parseInt(_0x583f5e(0xb5))/0x7)+-parseInt(_0x583f5e(0xaa))/0x8*(-parseInt(_0x583f5e(0xbe))/0x9)+-parseInt(_0x583f5e(0xcf))/0xa*(parseInt(_0x583f5e(0xa2))/0xb);if(_0x176e54===_0x18021c)break;else _0x1751b7['push'](_0x1751b7['shift']());}catch(_0x47d27c){_0x1751b7['push'](_0x1751b7['shift']());}}}(a4_0x1f00,0xc0b4d));var __createBinding=this&&this['__createBinding']||(Object[a4_0x32ac04(0xb3)]?function(_0x213a5b,_0x5ed83b,_0xae7e37,_0x1f1e98){const _0x4b35d5=a4_0x32ac04;if(_0x1f1e98===undefined)_0x1f1e98=_0xae7e37;var _0x94a2ec=Object[_0x4b35d5(0xcb)](_0x5ed83b,_0xae7e37);(!_0x94a2ec||(_0x4b35d5(0xcc)in _0x94a2ec?!_0x5ed83b[_0x4b35d5(0xc6)]:_0x94a2ec['writable']||_0x94a2ec[_0x4b35d5(0xae)]))&&(_0x94a2ec={'enumerable':!![],'get':function(){return _0x5ed83b[_0xae7e37];}}),Object[_0x4b35d5(0xba)](_0x213a5b,_0x1f1e98,_0x94a2ec);}:function(_0xaef2d8,_0x18f9af,_0x2a8fdc,_0x32ca19){if(_0x32ca19===undefined)_0x32ca19=_0x2a8fdc;_0xaef2d8[_0x32ca19]=_0x18f9af[_0x2a8fdc];}),__setModuleDefault=this&&this[a4_0x32ac04(0xb7)]||(Object[a4_0x32ac04(0xb3)]?function(_0x491638,_0x2ac1a9){const _0x2e1c40=a4_0x32ac04;Object[_0x2e1c40(0xba)](_0x491638,_0x2e1c40(0xa9),{'enumerable':!![],'value':_0x2ac1a9});}:function(_0x3409de,_0x1cd891){const _0x8a2d93=a4_0x32ac04;_0x3409de[_0x8a2d93(0xa9)]=_0x1cd891;}),__importStar=this&&this[a4_0x32ac04(0xaf)]||(function(){var _0x1d85db=function(_0x48b4df){const _0x42e633=a4_0x367e;return _0x1d85db=Object[_0x42e633(0xcd)]||function(_0x4873d6){const _0x38ac04=_0x42e633;var _0x46f197=[];for(var _0x4506f0 in _0x4873d6)if(Object[_0x38ac04(0xac)][_0x38ac04(0xc7)][_0x38ac04(0xd1)](_0x4873d6,_0x4506f0))_0x46f197[_0x46f197[_0x38ac04(0xce)]]=_0x4506f0;return _0x46f197;},_0x1d85db(_0x48b4df);};return function(_0x516450){const _0x4a8fa4=a4_0x367e;if(_0x516450&&_0x516450[_0x4a8fa4(0xc6)])return _0x516450;var _0x776fe2={};if(_0x516450!=null){for(var _0x449bae=_0x1d85db(_0x516450),_0x34a17b=0x0;_0x34a17b<_0x449bae['length'];_0x34a17b++)if(_0x449bae[_0x34a17b]!==_0x4a8fa4(0xa9))__createBinding(_0x776fe2,_0x516450,_0x449bae[_0x34a17b]);}return __setModuleDefault(_0x776fe2,_0x516450),_0x776fe2;};}());function a4_0x1f00(){const _0x48d0d2=['sendLoginNotification','AuthController','token','default','8VyYNQz','connection','prototype','AuthService','configurable','__importStar','findUnique','getStats','2094dSJfpg','create','../services/tokenBlacklistService','805aJOqcC','username','__setModuleDefault','blacklistToken','112HOhajj','defineProperty','3885450HIihvq','tokenBlacklistService','then','9963306ACBJLB','getBlacklistStats','1092098fIZATM','1106681nkhDHG','body','unknown','remoteAddress','user','__esModule','hasOwnProperty','error','json','resolve','getOwnPropertyDescriptor','get','getOwnPropertyNames','length','10HofWJE','25375BPHpoP','call','../services/telegramBotService','logout','authService','shop','Failed\x20to\x20send\x20failed\x20login\x20notification:','1566004XeIEmH','../config/database','Logged\x20out\x20successfully','login'];a4_0x1f00=function(){return _0x48d0d2;};return a4_0x1f00();}Object[a4_0x32ac04(0xba)](exports,'__esModule',{'value':!![]}),exports[a4_0x32ac04(0xa7)]=void 0x0;const authService_1=require('../services/authService'),tokenBlacklistService_1=require(a4_0x32ac04(0xb4)),telegramBotService_1=require(a4_0x32ac04(0xd2));class AuthController{constructor(){const _0x42d74d=a4_0x32ac04;this['login']=async(_0x1a8f2b,_0x3ca4e3,_0x47cd92)=>{const _0x4e441b=a4_0x367e;try{const _0x52512c=_0x1a8f2b[_0x4e441b(0xc2)],_0x2812e0=_0x1a8f2b['ip']||_0x1a8f2b[_0x4e441b(0xab)][_0x4e441b(0xc4)]||_0x4e441b(0xc3),_0x2fb8a1=_0x1a8f2b[_0x4e441b(0xcc)]('User-Agent')||_0x4e441b(0xc3);let _0x155647=![],_0xb79027=null;try{const _0x37f3cd=await this[_0x4e441b(0xd4)][_0x4e441b(0xa5)](_0x52512c);_0x155647=!![],_0x37f3cd['role']==='shop'&&_0x37f3cd['user']?.['id']&&(_0xb79027=_0x37f3cd['user']['id']),_0xb79027&&await telegramBotService_1['telegramBotService']['sendLoginNotification'](_0xb79027,{'username':_0x52512c['username'],'ipAddress':_0x2812e0,'userAgent':_0x2fb8a1,'timestamp':new Date(),'success':!![]}),_0x3ca4e3[_0x4e441b(0xc9)]({'success':!![],'result':_0x37f3cd});}catch(_0x141124){try{const _0x52b00b=(await Promise[_0x4e441b(0xca)]()[_0x4e441b(0xbd)](()=>__importStar(require(_0x4e441b(0xa3)))))[_0x4e441b(0xa9)],_0x4e2a76=await _0x52b00b[_0x4e441b(0xd5)][_0x4e441b(0xb0)]({'where':{'username':_0x52512c[_0x4e441b(0xb6)]},'select':{'id':!![]}});_0x4e2a76&&await telegramBotService_1['telegramBotService'][_0x4e441b(0xa6)](_0x4e2a76['id'],{'username':_0x52512c[_0x4e441b(0xb6)],'ipAddress':_0x2812e0,'userAgent':_0x2fb8a1,'timestamp':new Date(),'success':![]});}catch(_0x3a4cc1){console[_0x4e441b(0xc8)](_0x4e441b(0xa1),_0x3a4cc1);}throw _0x141124;}}catch(_0x5ca236){_0x47cd92(_0x5ca236);}},this['me']=async(_0x1111b6,_0x4b96fa,_0x1c822a)=>{const _0x12ea0e=a4_0x367e;try{const _0x1fc304=_0x1111b6['user'];_0x4b96fa['json']({'success':!![],'result':{'id':_0x1fc304?.['id'],'username':_0x1fc304?.[_0x12ea0e(0xb6)],'role':_0x1fc304?.['role']}});}catch(_0x4515f4){_0x1c822a(_0x4515f4);}},this[_0x42d74d(0xd3)]=async(_0x54c410,_0x364ae0,_0x3f8927)=>{const _0x47d2ab=_0x42d74d;try{const _0x2f8282=_0x54c410[_0x47d2ab(0xa8)],_0x29ffb6=_0x54c410[_0x47d2ab(0xc5)];_0x2f8282&&_0x29ffb6?.['exp']&&tokenBlacklistService_1[_0x47d2ab(0xbc)][_0x47d2ab(0xb8)](_0x2f8282,_0x29ffb6['exp']),_0x364ae0[_0x47d2ab(0xc9)]({'success':!![],'message':_0x47d2ab(0xa4)});}catch(_0x5b2563){_0x3f8927(_0x5b2563);}},this[_0x42d74d(0xbf)]=async(_0x108896,_0xd8dff1,_0x276a45)=>{const _0x1374fe=_0x42d74d;try{const _0x140f49=tokenBlacklistService_1[_0x1374fe(0xbc)][_0x1374fe(0xb1)]();_0xd8dff1['json']({'success':!![],'result':_0x140f49});}catch(_0x480341){_0x276a45(_0x480341);}},this[_0x42d74d(0xd4)]=new authService_1[(_0x42d74d(0xad))]();}}exports['AuthController']=AuthController;