'use strict';function a4_0x24ef(){const _0x463963=['exp','authService','hasOwnProperty','get','defineProperty','User-Agent','getStats','tokenBlacklistService','role','unknown','__setModuleDefault','1399928jdbSov','9cfUCeX','52690dUOXKu','token','../services/tokenBlacklistService','login','536BdiYBH','user','configurable','20369904XIIhyP','telegramBotService','../services/authService','__esModule','6369356TrAMZe','sendLoginNotification','Logged\x20out\x20successfully','logout','blacklistToken','length','prototype','Failed\x20to\x20send\x20failed\x20login\x20notification:','6oViKjp','__importStar','shop','22377NxqIqF','error','create','112292ERlRyl','../config/database','77CFIRuE','body','../services/telegramBotService','remoteAddress','getBlacklistStats','json','findUnique','getOwnPropertyDescriptor','writable','AuthService','connection','AuthController','8cpHHui','getOwnPropertyNames','3955405bEDWpl','username','default'];a4_0x24ef=function(){return _0x463963;};return a4_0x24ef();}const a4_0x13337f=a4_0x3c0d;(function(_0x573ece,_0x5ad95b){const _0x1a5ba8=a4_0x3c0d,_0x3602e2=_0x573ece();while(!![]){try{const _0x42dce4=-parseInt(_0x1a5ba8(0x10f))/0x1*(parseInt(_0x1a5ba8(0x11d))/0x2)+parseInt(_0x1a5ba8(0x10c))/0x3*(-parseInt(_0x1a5ba8(0xfa))/0x4)+-parseInt(_0x1a5ba8(0x11f))/0x5+-parseInt(_0x1a5ba8(0x109))/0x6*(-parseInt(_0x1a5ba8(0x101))/0x7)+parseInt(_0x1a5ba8(0xf4))/0x8*(parseInt(_0x1a5ba8(0xf5))/0x9)+parseInt(_0x1a5ba8(0xf6))/0xa*(-parseInt(_0x1a5ba8(0x111))/0xb)+parseInt(_0x1a5ba8(0xfd))/0xc;if(_0x42dce4===_0x5ad95b)break;else _0x3602e2['push'](_0x3602e2['shift']());}catch(_0x48ee86){_0x3602e2['push'](_0x3602e2['shift']());}}}(a4_0x24ef,0x7b799));var __createBinding=this&&this['__createBinding']||(Object[a4_0x13337f(0x10e)]?function(_0x4e11e8,_0x8ca228,_0x5914ae,_0x251c83){const _0x33891a=a4_0x13337f;if(_0x251c83===undefined)_0x251c83=_0x5914ae;var _0x10829c=Object[_0x33891a(0x118)](_0x8ca228,_0x5914ae);(!_0x10829c||(_0x33891a(0xec)in _0x10829c?!_0x8ca228[_0x33891a(0x100)]:_0x10829c[_0x33891a(0x119)]||_0x10829c[_0x33891a(0xfc)]))&&(_0x10829c={'enumerable':!![],'get':function(){return _0x8ca228[_0x5914ae];}}),Object[_0x33891a(0xed)](_0x4e11e8,_0x251c83,_0x10829c);}:function(_0x1b5f98,_0x4c9aa6,_0x13b1d6,_0x1be703){if(_0x1be703===undefined)_0x1be703=_0x13b1d6;_0x1b5f98[_0x1be703]=_0x4c9aa6[_0x13b1d6];}),__setModuleDefault=this&&this[a4_0x13337f(0xf3)]||(Object[a4_0x13337f(0x10e)]?function(_0x302782,_0x494fe4){const _0x320e22=a4_0x13337f;Object[_0x320e22(0xed)](_0x302782,_0x320e22(0x121),{'enumerable':!![],'value':_0x494fe4});}:function(_0x3dcef5,_0x229d95){const _0x33ab45=a4_0x13337f;_0x3dcef5[_0x33ab45(0x121)]=_0x229d95;}),__importStar=this&&this[a4_0x13337f(0x10a)]||(function(){var _0x450e2c=function(_0x3686ba){const _0x1a81d=a4_0x3c0d;return _0x450e2c=Object[_0x1a81d(0x11e)]||function(_0x530d1a){const _0x41f5d4=_0x1a81d;var _0x195f1a=[];for(var _0x144291 in _0x530d1a)if(Object[_0x41f5d4(0x107)][_0x41f5d4(0xeb)]['call'](_0x530d1a,_0x144291))_0x195f1a[_0x195f1a['length']]=_0x144291;return _0x195f1a;},_0x450e2c(_0x3686ba);};return function(_0x5cbd54){const _0x5a9f29=a4_0x3c0d;if(_0x5cbd54&&_0x5cbd54[_0x5a9f29(0x100)])return _0x5cbd54;var _0x40204b={};if(_0x5cbd54!=null){for(var _0x1fedc9=_0x450e2c(_0x5cbd54),_0x568589=0x0;_0x568589<_0x1fedc9[_0x5a9f29(0x106)];_0x568589++)if(_0x1fedc9[_0x568589]!=='default')__createBinding(_0x40204b,_0x5cbd54,_0x1fedc9[_0x568589]);}return __setModuleDefault(_0x40204b,_0x5cbd54),_0x40204b;};}());Object[a4_0x13337f(0xed)](exports,a4_0x13337f(0x100),{'value':!![]}),exports['AuthController']=void 0x0;function a4_0x3c0d(_0xfedf63,_0x2ff774){const _0x24ef52=a4_0x24ef();return a4_0x3c0d=function(_0x3c0d6a,_0x134b17){_0x3c0d6a=_0x3c0d6a-0xeb;let _0x367112=_0x24ef52[_0x3c0d6a];return _0x367112;},a4_0x3c0d(_0xfedf63,_0x2ff774);}const authService_1=require(a4_0x13337f(0xff)),tokenBlacklistService_1=require(a4_0x13337f(0xf8)),telegramBotService_1=require(a4_0x13337f(0x113));class AuthController{constructor(){const _0xed539a=a4_0x13337f;this[_0xed539a(0xf9)]=async(_0x113d7e,_0x3ab088,_0xd768c3)=>{const _0x4df616=_0xed539a;try{const _0x190e66=_0x113d7e[_0x4df616(0x112)],_0x5e891e=_0x113d7e['ip']||_0x113d7e[_0x4df616(0x11b)][_0x4df616(0x114)]||_0x4df616(0xf2),_0x214fd7=_0x113d7e['get'](_0x4df616(0xee))||_0x4df616(0xf2);let _0x28264e=![],_0x1a9397=null;try{const _0x200159=await this[_0x4df616(0x123)]['login'](_0x190e66);_0x28264e=!![],_0x200159[_0x4df616(0xf1)]==='shop'&&_0x200159['user']?.['id']&&(_0x1a9397=_0x200159[_0x4df616(0xfb)]['id']),_0x1a9397&&await telegramBotService_1[_0x4df616(0xfe)]['sendLoginNotification'](_0x1a9397,{'username':_0x190e66[_0x4df616(0x120)],'ipAddress':_0x5e891e,'userAgent':_0x214fd7,'timestamp':new Date(),'success':!![]}),_0x3ab088[_0x4df616(0x116)]({'success':!![],'result':_0x200159});}catch(_0x561c10){try{const _0x3f43a3=(await Promise['resolve']()['then'](()=>__importStar(require(_0x4df616(0x110)))))[_0x4df616(0x121)],_0x496ebb=await _0x3f43a3[_0x4df616(0x10b)][_0x4df616(0x117)]({'where':{'username':_0x190e66[_0x4df616(0x120)]},'select':{'id':!![]}});_0x496ebb&&await telegramBotService_1[_0x4df616(0xfe)][_0x4df616(0x102)](_0x496ebb['id'],{'username':_0x190e66[_0x4df616(0x120)],'ipAddress':_0x5e891e,'userAgent':_0x214fd7,'timestamp':new Date(),'success':![]});}catch(_0x3b3850){console[_0x4df616(0x10d)](_0x4df616(0x108),_0x3b3850);}throw _0x561c10;}}catch(_0x50af98){_0xd768c3(_0x50af98);}},this['me']=async(_0x5f00bd,_0x50a7f2,_0x506285)=>{const _0x32657c=_0xed539a;try{const _0x5740f7=_0x5f00bd[_0x32657c(0xfb)];_0x50a7f2['json']({'success':!![],'result':{'id':_0x5740f7?.['id'],'username':_0x5740f7?.[_0x32657c(0x120)],'role':_0x5740f7?.['role']}});}catch(_0xa3cb35){_0x506285(_0xa3cb35);}},this[_0xed539a(0x104)]=async(_0x1350fb,_0x5c335f,_0x591bee)=>{const _0x50a195=_0xed539a;try{const _0x4261ee=_0x1350fb[_0x50a195(0xf7)],_0x1ffb7e=_0x1350fb[_0x50a195(0xfb)];_0x4261ee&&_0x1ffb7e?.[_0x50a195(0x122)]&&tokenBlacklistService_1[_0x50a195(0xf0)][_0x50a195(0x105)](_0x4261ee,_0x1ffb7e[_0x50a195(0x122)]),_0x5c335f[_0x50a195(0x116)]({'success':!![],'message':_0x50a195(0x103)});}catch(_0x3dfbf5){_0x591bee(_0x3dfbf5);}},this[_0xed539a(0x115)]=async(_0x4305b2,_0x5115c5,_0x131610)=>{const _0x38e698=_0xed539a;try{const _0x38d9c6=tokenBlacklistService_1[_0x38e698(0xf0)][_0x38e698(0xef)]();_0x5115c5[_0x38e698(0x116)]({'success':!![],'result':_0x38d9c6});}catch(_0x5bb85b){_0x131610(_0x5bb85b);}},this['authService']=new authService_1[(_0xed539a(0x11a))]();}}exports[a4_0x13337f(0x11c)]=AuthController;