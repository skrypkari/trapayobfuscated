'use strict';const a4_0xe432e=a4_0x289b;(function(_0x424e23,_0x2d547b){const _0x210353=a4_0x289b,_0x392b8e=_0x424e23();while(!![]){try{const _0x2134f9=-parseInt(_0x210353(0x13d))/0x1*(-parseInt(_0x210353(0x14c))/0x2)+parseInt(_0x210353(0x146))/0x3*(parseInt(_0x210353(0x14f))/0x4)+-parseInt(_0x210353(0x124))/0x5+parseInt(_0x210353(0x11e))/0x6+-parseInt(_0x210353(0x11b))/0x7+parseInt(_0x210353(0x136))/0x8*(-parseInt(_0x210353(0x127))/0x9)+parseInt(_0x210353(0x12e))/0xa*(parseInt(_0x210353(0x135))/0xb);if(_0x2134f9===_0x2d547b)break;else _0x392b8e['push'](_0x392b8e['shift']());}catch(_0x56e1af){_0x392b8e['push'](_0x392b8e['shift']());}}}(a4_0x5691,0xe90da));function a4_0x5691(){const _0x5a4cc1=['tokenBlacklistService','getOwnPropertyDescriptor','1328630DKysnd','../services/telegramBotService','username','call','telegramBotService','resolve','getBlacklistStats','132kwjfaJ','31992iElDFb','sendLoginNotification','__esModule','getOwnPropertyNames','length','__setModuleDefault','login','1051369dpGlHv','get','hasOwnProperty','role','__createBinding','findUnique','error','json','logout','396ppsZSJ','AuthService','token','__importStar','default','body','2NwRlyS','writable','../services/authService','13912iIBmQQ','create','12694367xkqTBs','defineProperty','Failed\x20to\x20send\x20failed\x20login\x20notification:','3634938FVGbqL','remoteAddress','exp','authService','shop','AuthController','2353475jdYwNo','blacklistToken','../config/database','1062yjrpsH','connection','getStats','Logged\x20out\x20successfully','user'];a4_0x5691=function(){return _0x5a4cc1;};return a4_0x5691();}var __createBinding=this&&this[a4_0xe432e(0x141)]||(Object[a4_0xe432e(0x150)]?function(_0x159430,_0x1aaf0c,_0x49d580,_0x4c03b8){const _0x3fe47b=a4_0xe432e;if(_0x4c03b8===undefined)_0x4c03b8=_0x49d580;var _0xbf4969=Object[_0x3fe47b(0x12d)](_0x1aaf0c,_0x49d580);(!_0xbf4969||(_0x3fe47b(0x13e)in _0xbf4969?!_0x1aaf0c[_0x3fe47b(0x138)]:_0xbf4969[_0x3fe47b(0x14d)]||_0xbf4969['configurable']))&&(_0xbf4969={'enumerable':!![],'get':function(){return _0x1aaf0c[_0x49d580];}}),Object[_0x3fe47b(0x11c)](_0x159430,_0x4c03b8,_0xbf4969);}:function(_0x22087f,_0x21a435,_0x3316bd,_0x33f2e9){if(_0x33f2e9===undefined)_0x33f2e9=_0x3316bd;_0x22087f[_0x33f2e9]=_0x21a435[_0x3316bd];}),__setModuleDefault=this&&this[a4_0xe432e(0x13b)]||(Object[a4_0xe432e(0x150)]?function(_0x5e7303,_0x4df8ae){const _0x2f6a92=a4_0xe432e;Object[_0x2f6a92(0x11c)](_0x5e7303,_0x2f6a92(0x14a),{'enumerable':!![],'value':_0x4df8ae});}:function(_0x8cbb42,_0x42de19){const _0x46bb03=a4_0xe432e;_0x8cbb42[_0x46bb03(0x14a)]=_0x42de19;}),__importStar=this&&this[a4_0xe432e(0x149)]||(function(){var _0x456585=function(_0x3b6ff5){const _0x3b7199=a4_0x289b;return _0x456585=Object[_0x3b7199(0x139)]||function(_0xe93320){const _0x5ba583=_0x3b7199;var _0x4122de=[];for(var _0x2fc3c9 in _0xe93320)if(Object['prototype'][_0x5ba583(0x13f)][_0x5ba583(0x131)](_0xe93320,_0x2fc3c9))_0x4122de[_0x4122de[_0x5ba583(0x13a)]]=_0x2fc3c9;return _0x4122de;},_0x456585(_0x3b6ff5);};return function(_0x48ddc2){const _0x2beb75=a4_0x289b;if(_0x48ddc2&&_0x48ddc2[_0x2beb75(0x138)])return _0x48ddc2;var _0x1625a0={};if(_0x48ddc2!=null){for(var _0x184f8c=_0x456585(_0x48ddc2),_0x433775=0x0;_0x433775<_0x184f8c[_0x2beb75(0x13a)];_0x433775++)if(_0x184f8c[_0x433775]!==_0x2beb75(0x14a))__createBinding(_0x1625a0,_0x48ddc2,_0x184f8c[_0x433775]);}return __setModuleDefault(_0x1625a0,_0x48ddc2),_0x1625a0;};}());Object[a4_0xe432e(0x11c)](exports,'__esModule',{'value':!![]}),exports[a4_0xe432e(0x123)]=void 0x0;const authService_1=require(a4_0xe432e(0x14e)),tokenBlacklistService_1=require('../services/tokenBlacklistService'),telegramBotService_1=require(a4_0xe432e(0x12f));function a4_0x289b(_0x12c2ea,_0x322041){const _0x5691b9=a4_0x5691();return a4_0x289b=function(_0x289b64,_0x7228f){_0x289b64=_0x289b64-0x11b;let _0x3eed0b=_0x5691b9[_0x289b64];return _0x3eed0b;},a4_0x289b(_0x12c2ea,_0x322041);}class AuthController{constructor(){const _0x35a4f7=a4_0xe432e;this['login']=async(_0x122680,_0x2a140e,_0x127424)=>{const _0x1ab67c=a4_0x289b;try{const _0x10787c=_0x122680[_0x1ab67c(0x14b)],_0x24c553=_0x122680['ip']||_0x122680[_0x1ab67c(0x128)][_0x1ab67c(0x11f)]||'unknown',_0x8de884=_0x122680[_0x1ab67c(0x13e)]('User-Agent')||'unknown';let _0x4f7276=![],_0x16d04c=null;try{const _0x272922=await this[_0x1ab67c(0x121)][_0x1ab67c(0x13c)](_0x10787c);_0x4f7276=!![],_0x272922[_0x1ab67c(0x140)]==='shop'&&_0x272922[_0x1ab67c(0x12b)]?.['id']&&(_0x16d04c=_0x272922[_0x1ab67c(0x12b)]['id']),_0x16d04c&&await telegramBotService_1[_0x1ab67c(0x132)][_0x1ab67c(0x137)](_0x16d04c,{'username':_0x10787c[_0x1ab67c(0x130)],'ipAddress':_0x24c553,'userAgent':_0x8de884,'timestamp':new Date(),'success':!![]}),_0x2a140e[_0x1ab67c(0x144)]({'success':!![],'result':_0x272922});}catch(_0x109afb){try{const _0x409d16=(await Promise[_0x1ab67c(0x133)]()['then'](()=>__importStar(require(_0x1ab67c(0x126)))))[_0x1ab67c(0x14a)],_0x4b11f7=await _0x409d16[_0x1ab67c(0x122)][_0x1ab67c(0x142)]({'where':{'username':_0x10787c[_0x1ab67c(0x130)]},'select':{'id':!![]}});_0x4b11f7&&await telegramBotService_1[_0x1ab67c(0x132)][_0x1ab67c(0x137)](_0x4b11f7['id'],{'username':_0x10787c[_0x1ab67c(0x130)],'ipAddress':_0x24c553,'userAgent':_0x8de884,'timestamp':new Date(),'success':![]});}catch(_0x32b8f4){console[_0x1ab67c(0x143)](_0x1ab67c(0x11d),_0x32b8f4);}throw _0x109afb;}}catch(_0xe5006a){_0x127424(_0xe5006a);}},this['me']=async(_0x583764,_0x103cc3,_0x249e81)=>{const _0x2aa782=a4_0x289b;try{const _0x10d615=_0x583764[_0x2aa782(0x12b)];_0x103cc3[_0x2aa782(0x144)]({'success':!![],'result':{'id':_0x10d615?.['id'],'username':_0x10d615?.[_0x2aa782(0x130)],'role':_0x10d615?.[_0x2aa782(0x140)]}});}catch(_0x394f83){_0x249e81(_0x394f83);}},this[_0x35a4f7(0x145)]=async(_0x3be3f6,_0x416df0,_0x305693)=>{const _0x258244=_0x35a4f7;try{const _0x5b6142=_0x3be3f6[_0x258244(0x148)],_0xd670ed=_0x3be3f6[_0x258244(0x12b)];_0x5b6142&&_0xd670ed?.[_0x258244(0x120)]&&tokenBlacklistService_1[_0x258244(0x12c)][_0x258244(0x125)](_0x5b6142,_0xd670ed[_0x258244(0x120)]),_0x416df0['json']({'success':!![],'message':_0x258244(0x12a)});}catch(_0x3855b2){_0x305693(_0x3855b2);}},this[_0x35a4f7(0x134)]=async(_0x2d1fbf,_0x2cf39a,_0x1c6637)=>{const _0x3355ac=_0x35a4f7;try{const _0x29d8a3=tokenBlacklistService_1[_0x3355ac(0x12c)][_0x3355ac(0x129)]();_0x2cf39a[_0x3355ac(0x144)]({'success':!![],'result':_0x29d8a3});}catch(_0x762587){_0x1c6637(_0x762587);}},this[_0x35a4f7(0x121)]=new authService_1[(_0x35a4f7(0x147))]();}}exports[a4_0xe432e(0x123)]=AuthController;