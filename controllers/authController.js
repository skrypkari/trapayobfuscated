'use strict';function a4_0x2647(_0x3a40fa,_0x516910){const _0x49036e=a4_0x4903();return a4_0x2647=function(_0x264775,_0x1c8135){_0x264775=_0x264775-0x1ea;let _0x4ddff7=_0x49036e[_0x264775];return _0x4ddff7;},a4_0x2647(_0x3a40fa,_0x516910);}const a4_0x8524fb=a4_0x2647;function a4_0x4903(){const _0x9419f1=['default','findUnique','398965UjlQcw','getBlacklistStats','3246396EvdZlq','5077912XQxKNE','AuthController','unknown','resolve','getOwnPropertyNames','__esModule','user','getOwnPropertyDescriptor','3fpvWoj','__setModuleDefault','connection','exp','50tKBygI','528dJCmUi','login','22192LWvbCy','remoteAddress','sendLoginNotification','authService','prototype','blacklistToken','1200294MNfASF','../services/telegramBotService','create','17pcWswK','then','Logged\x20out\x20successfully','179289lAfwaJ','90YxppQG','body','shop','telegramBotService','configurable','token','23245GjBeeU','role','length','error','tokenBlacklistService','writable','defineProperty','logout','username','../services/authService','Failed\x20to\x20send\x20failed\x20login\x20notification:','__createBinding','json','getStats','hasOwnProperty'];a4_0x4903=function(){return _0x9419f1;};return a4_0x4903();}(function(_0x3e7fb8,_0x4f6d86){const _0x290a76=a4_0x2647,_0x1a8092=_0x3e7fb8();while(!![]){try{const _0x4d2d43=parseInt(_0x290a76(0x202))/0x1*(-parseInt(_0x290a76(0x1f9))/0x2)+parseInt(_0x290a76(0x1f2))/0x3*(-parseInt(_0x290a76(0x21f))/0x4)+-parseInt(_0x290a76(0x20c))/0x5+-parseInt(_0x290a76(0x206))/0x6*(-parseInt(_0x290a76(0x21d))/0x7)+parseInt(_0x290a76(0x1ea))/0x8+parseInt(_0x290a76(0x1ff))/0x9*(parseInt(_0x290a76(0x1f6))/0xa)+-parseInt(_0x290a76(0x205))/0xb*(parseInt(_0x290a76(0x1f7))/0xc);if(_0x4d2d43===_0x4f6d86)break;else _0x1a8092['push'](_0x1a8092['shift']());}catch(_0x3a3b88){_0x1a8092['push'](_0x1a8092['shift']());}}}(a4_0x4903,0x6a11a));var __createBinding=this&&this[a4_0x8524fb(0x217)]||(Object[a4_0x8524fb(0x201)]?function(_0x5d66ac,_0x51e484,_0x332d11,_0x3821b8){const _0x50b462=a4_0x8524fb;if(_0x3821b8===undefined)_0x3821b8=_0x332d11;var _0x2ea451=Object[_0x50b462(0x1f1)](_0x51e484,_0x332d11);(!_0x2ea451||('get'in _0x2ea451?!_0x51e484[_0x50b462(0x1ef)]:_0x2ea451[_0x50b462(0x211)]||_0x2ea451[_0x50b462(0x20a)]))&&(_0x2ea451={'enumerable':!![],'get':function(){return _0x51e484[_0x332d11];}}),Object['defineProperty'](_0x5d66ac,_0x3821b8,_0x2ea451);}:function(_0x1bf461,_0x1c9408,_0x19db00,_0x167eb0){if(_0x167eb0===undefined)_0x167eb0=_0x19db00;_0x1bf461[_0x167eb0]=_0x1c9408[_0x19db00];}),__setModuleDefault=this&&this[a4_0x8524fb(0x1f3)]||(Object[a4_0x8524fb(0x201)]?function(_0x72e5ee,_0x5bf0fa){const _0x39ca98=a4_0x8524fb;Object[_0x39ca98(0x212)](_0x72e5ee,_0x39ca98(0x21b),{'enumerable':!![],'value':_0x5bf0fa});}:function(_0x238184,_0x21242a){const _0x484e69=a4_0x8524fb;_0x238184[_0x484e69(0x21b)]=_0x21242a;}),__importStar=this&&this['__importStar']||(function(){var _0x571e73=function(_0xdc3a19){const _0x27fd2b=a4_0x2647;return _0x571e73=Object[_0x27fd2b(0x1ee)]||function(_0x3a77e1){const _0x4960ef=_0x27fd2b;var _0x204056=[];for(var _0x81046 in _0x3a77e1)if(Object[_0x4960ef(0x1fd)][_0x4960ef(0x21a)]['call'](_0x3a77e1,_0x81046))_0x204056[_0x204056[_0x4960ef(0x20e)]]=_0x81046;return _0x204056;},_0x571e73(_0xdc3a19);};return function(_0x1a23d3){const _0x50b287=a4_0x2647;if(_0x1a23d3&&_0x1a23d3[_0x50b287(0x1ef)])return _0x1a23d3;var _0x525261={};if(_0x1a23d3!=null){for(var _0x358ea4=_0x571e73(_0x1a23d3),_0x34536e=0x0;_0x34536e<_0x358ea4['length'];_0x34536e++)if(_0x358ea4[_0x34536e]!==_0x50b287(0x21b))__createBinding(_0x525261,_0x1a23d3,_0x358ea4[_0x34536e]);}return __setModuleDefault(_0x525261,_0x1a23d3),_0x525261;};}());Object[a4_0x8524fb(0x212)](exports,a4_0x8524fb(0x1ef),{'value':!![]}),exports[a4_0x8524fb(0x1eb)]=void 0x0;const authService_1=require(a4_0x8524fb(0x215)),tokenBlacklistService_1=require('../services/tokenBlacklistService'),telegramBotService_1=require(a4_0x8524fb(0x200));class AuthController{constructor(){const _0x18df87=a4_0x8524fb;this[_0x18df87(0x1f8)]=async(_0x52b809,_0x4729f4,_0x3e94ce)=>{const _0x42a968=_0x18df87;try{const _0x5babaf=_0x52b809[_0x42a968(0x207)],_0x6114b0=_0x52b809['ip']||_0x52b809[_0x42a968(0x1f4)][_0x42a968(0x1fa)]||'unknown',_0x4c0689=_0x52b809['get']('User-Agent')||_0x42a968(0x1ec);let _0x2f9528=![],_0x38a038=null;try{const _0x16ee87=await this[_0x42a968(0x1fc)][_0x42a968(0x1f8)](_0x5babaf);_0x2f9528=!![],_0x16ee87[_0x42a968(0x20d)]===_0x42a968(0x208)&&_0x16ee87[_0x42a968(0x1f0)]?.['id']&&(_0x38a038=_0x16ee87['user']['id']),_0x38a038&&await telegramBotService_1[_0x42a968(0x209)]['sendLoginNotification'](_0x38a038,{'username':_0x5babaf['username'],'ipAddress':_0x6114b0,'userAgent':_0x4c0689,'timestamp':new Date(),'success':!![]}),_0x4729f4['json']({'success':!![],'result':_0x16ee87});}catch(_0x40ed20){try{const _0x5455a5=(await Promise[_0x42a968(0x1ed)]()[_0x42a968(0x203)](()=>__importStar(require('../config/database'))))[_0x42a968(0x21b)],_0x27a4b0=await _0x5455a5[_0x42a968(0x208)][_0x42a968(0x21c)]({'where':{'username':_0x5babaf[_0x42a968(0x214)]},'select':{'id':!![]}});_0x27a4b0&&await telegramBotService_1[_0x42a968(0x209)][_0x42a968(0x1fb)](_0x27a4b0['id'],{'username':_0x5babaf['username'],'ipAddress':_0x6114b0,'userAgent':_0x4c0689,'timestamp':new Date(),'success':![]});}catch(_0x3314b4){console[_0x42a968(0x20f)](_0x42a968(0x216),_0x3314b4);}throw _0x40ed20;}}catch(_0x560925){_0x3e94ce(_0x560925);}},this['me']=async(_0x4f58b3,_0x4f42b6,_0x2e78ac)=>{const _0x378338=_0x18df87;try{const _0x3786dc=_0x4f58b3[_0x378338(0x1f0)];_0x4f42b6[_0x378338(0x218)]({'success':!![],'result':{'id':_0x3786dc?.['id'],'username':_0x3786dc?.[_0x378338(0x214)],'role':_0x3786dc?.[_0x378338(0x20d)]}});}catch(_0x27276a){_0x2e78ac(_0x27276a);}},this[_0x18df87(0x213)]=async(_0x51bd8c,_0xd6fcac,_0x59774d)=>{const _0x5e6aee=_0x18df87;try{const _0x332b07=_0x51bd8c[_0x5e6aee(0x20b)],_0x358051=_0x51bd8c['user'];_0x332b07&&_0x358051?.[_0x5e6aee(0x1f5)]&&tokenBlacklistService_1['tokenBlacklistService'][_0x5e6aee(0x1fe)](_0x332b07,_0x358051['exp']),_0xd6fcac[_0x5e6aee(0x218)]({'success':!![],'message':_0x5e6aee(0x204)});}catch(_0x2c9d25){_0x59774d(_0x2c9d25);}},this[_0x18df87(0x21e)]=async(_0x57e720,_0x3d19b2,_0x38ab2a)=>{const _0x3718cb=_0x18df87;try{const _0x477e1e=tokenBlacklistService_1[_0x3718cb(0x210)][_0x3718cb(0x219)]();_0x3d19b2[_0x3718cb(0x218)]({'success':!![],'result':_0x477e1e});}catch(_0x185b5b){_0x38ab2a(_0x185b5b);}},this['authService']=new authService_1['AuthService']();}}exports['AuthController']=AuthController;