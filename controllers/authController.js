'use strict';function a4_0x519c(_0x482c9e,_0x4f2f81){const _0x775b75=a4_0x775b();return a4_0x519c=function(_0x519c0c,_0x1f66d5){_0x519c0c=_0x519c0c-0x1eb;let _0xa3ae4e=_0x775b75[_0x519c0c];return _0xa3ae4e;},a4_0x519c(_0x482c9e,_0x4f2f81);}const a4_0x4fa79a=a4_0x519c;(function(_0x2dec88,_0x5536b4){const _0x4fa796=a4_0x519c,_0x3904a5=_0x2dec88();while(!![]){try{const _0x546db5=parseInt(_0x4fa796(0x1f4))/0x1*(-parseInt(_0x4fa796(0x1fc))/0x2)+-parseInt(_0x4fa796(0x20e))/0x3*(-parseInt(_0x4fa796(0x200))/0x4)+-parseInt(_0x4fa796(0x1f9))/0x5*(parseInt(_0x4fa796(0x1f6))/0x6)+parseInt(_0x4fa796(0x208))/0x7+parseInt(_0x4fa796(0x1ef))/0x8*(parseInt(_0x4fa796(0x218))/0x9)+-parseInt(_0x4fa796(0x206))/0xa*(parseInt(_0x4fa796(0x203))/0xb)+-parseInt(_0x4fa796(0x217))/0xc*(parseInt(_0x4fa796(0x1f7))/0xd);if(_0x546db5===_0x5536b4)break;else _0x3904a5['push'](_0x3904a5['shift']());}catch(_0x536386){_0x3904a5['push'](_0x3904a5['shift']());}}}(a4_0x775b,0x6dee6));var __createBinding=this&&this[a4_0x4fa79a(0x20d)]||(Object[a4_0x4fa79a(0x204)]?function(_0xa56326,_0x32a91c,_0x512238,_0x9ea5b8){const _0x3c990e=a4_0x4fa79a;if(_0x9ea5b8===undefined)_0x9ea5b8=_0x512238;var _0x503fdc=Object['getOwnPropertyDescriptor'](_0x32a91c,_0x512238);(!_0x503fdc||('get'in _0x503fdc?!_0x32a91c[_0x3c990e(0x216)]:_0x503fdc[_0x3c990e(0x207)]||_0x503fdc['configurable']))&&(_0x503fdc={'enumerable':!![],'get':function(){return _0x32a91c[_0x512238];}}),Object[_0x3c990e(0x211)](_0xa56326,_0x9ea5b8,_0x503fdc);}:function(_0x5981a4,_0x479e65,_0x8bf22a,_0x4e9f50){if(_0x4e9f50===undefined)_0x4e9f50=_0x8bf22a;_0x5981a4[_0x4e9f50]=_0x479e65[_0x8bf22a];}),__setModuleDefault=this&&this[a4_0x4fa79a(0x1ec)]||(Object[a4_0x4fa79a(0x204)]?function(_0x481688,_0xbaf433){const _0x108c5c=a4_0x4fa79a;Object[_0x108c5c(0x211)](_0x481688,_0x108c5c(0x219),{'enumerable':!![],'value':_0xbaf433});}:function(_0x246a65,_0x116c79){const _0x57ee49=a4_0x4fa79a;_0x246a65[_0x57ee49(0x219)]=_0x116c79;}),__importStar=this&&this['__importStar']||(function(){var _0x12bd4c=function(_0x2a5013){return _0x12bd4c=Object['getOwnPropertyNames']||function(_0x33037d){const _0x4c98a=a4_0x519c;var _0x38c0e3=[];for(var _0x4eebb1 in _0x33037d)if(Object[_0x4c98a(0x21a)][_0x4c98a(0x212)]['call'](_0x33037d,_0x4eebb1))_0x38c0e3[_0x38c0e3['length']]=_0x4eebb1;return _0x38c0e3;},_0x12bd4c(_0x2a5013);};return function(_0x2373cf){const _0x57b01f=a4_0x519c;if(_0x2373cf&&_0x2373cf[_0x57b01f(0x216)])return _0x2373cf;var _0x578497={};if(_0x2373cf!=null){for(var _0x3050f9=_0x12bd4c(_0x2373cf),_0x584c77=0x0;_0x584c77<_0x3050f9['length'];_0x584c77++)if(_0x3050f9[_0x584c77]!==_0x57b01f(0x219))__createBinding(_0x578497,_0x2373cf,_0x3050f9[_0x584c77]);}return __setModuleDefault(_0x578497,_0x2373cf),_0x578497;};}());function a4_0x775b(){const _0x47b111=['AuthService','4rliAXR','getBlacklistStats','Failed\x20to\x20send\x20failed\x20login\x20notification:','login','628tRRGEF','body','User-Agent','11ICPdgB','create','json','1732570RWSUEX','writable','4365501HxcHuj','sendLoginNotification','remoteAddress','shop','resolve','__createBinding','2094beswxV','AuthController','tokenBlacklistService','defineProperty','hasOwnProperty','connection','../config/database','findUnique','__esModule','48AOOPoQ','108729bVnyPh','default','prototype','unknown','user','username','__setModuleDefault','telegramBotService','token','400qXykAf','role','authService','Logged\x20out\x20successfully','blacklistToken','179978VHAhtV','then','1128sfmVLk','161213lUDzLU','get','8090JKSvek','../services/tokenBlacklistService'];a4_0x775b=function(){return _0x47b111;};return a4_0x775b();}Object[a4_0x4fa79a(0x211)](exports,a4_0x4fa79a(0x216),{'value':!![]}),exports['AuthController']=void 0x0;const authService_1=require('../services/authService'),tokenBlacklistService_1=require(a4_0x4fa79a(0x1fa)),telegramBotService_1=require('../services/telegramBotService');class AuthController{constructor(){const _0x5145d3=a4_0x4fa79a;this[_0x5145d3(0x1ff)]=async(_0x38f153,_0x4730cf,_0x3b7955)=>{const _0x5040b4=_0x5145d3;try{const _0x1f95d9=_0x38f153[_0x5040b4(0x201)],_0x7191ab=_0x38f153['ip']||_0x38f153[_0x5040b4(0x213)][_0x5040b4(0x20a)]||_0x5040b4(0x21b),_0x40d0d5=_0x38f153[_0x5040b4(0x1f8)](_0x5040b4(0x202))||_0x5040b4(0x21b);let _0x51363e=![],_0x130c7c=null;try{const _0x5133bb=await this[_0x5040b4(0x1f1)]['login'](_0x1f95d9);_0x51363e=!![],_0x5133bb[_0x5040b4(0x1f0)]===_0x5040b4(0x20b)&&_0x5133bb[_0x5040b4(0x21c)]?.['id']&&(_0x130c7c=_0x5133bb[_0x5040b4(0x21c)]['id']),_0x130c7c&&await telegramBotService_1[_0x5040b4(0x1ed)][_0x5040b4(0x209)](_0x130c7c,{'username':_0x1f95d9[_0x5040b4(0x1eb)],'ipAddress':_0x7191ab,'userAgent':_0x40d0d5,'timestamp':new Date(),'success':!![]}),_0x4730cf['json']({'success':!![],'result':_0x5133bb});}catch(_0x44c014){try{const _0x30eac3=(await Promise[_0x5040b4(0x20c)]()[_0x5040b4(0x1f5)](()=>__importStar(require(_0x5040b4(0x214)))))['default'],_0x2e5ddc=await _0x30eac3[_0x5040b4(0x20b)][_0x5040b4(0x215)]({'where':{'username':_0x1f95d9[_0x5040b4(0x1eb)]},'select':{'id':!![]}});_0x2e5ddc&&await telegramBotService_1[_0x5040b4(0x1ed)][_0x5040b4(0x209)](_0x2e5ddc['id'],{'username':_0x1f95d9[_0x5040b4(0x1eb)],'ipAddress':_0x7191ab,'userAgent':_0x40d0d5,'timestamp':new Date(),'success':![]});}catch(_0x2eb3b3){console['error'](_0x5040b4(0x1fe),_0x2eb3b3);}throw _0x44c014;}}catch(_0x411d8d){_0x3b7955(_0x411d8d);}},this['me']=async(_0x31db6b,_0x582315,_0xa3e1a0)=>{const _0xfb8445=_0x5145d3;try{const _0x30c5be=_0x31db6b[_0xfb8445(0x21c)];_0x582315['json']({'success':!![],'result':{'id':_0x30c5be?.['id'],'username':_0x30c5be?.[_0xfb8445(0x1eb)],'role':_0x30c5be?.[_0xfb8445(0x1f0)]}});}catch(_0x28521c){_0xa3e1a0(_0x28521c);}},this['logout']=async(_0x1e77d6,_0xd4768f,_0x5bc4bc)=>{const _0x5e62d4=_0x5145d3;try{const _0x1684ad=_0x1e77d6[_0x5e62d4(0x1ee)],_0x3f438f=_0x1e77d6[_0x5e62d4(0x21c)];_0x1684ad&&_0x3f438f?.['exp']&&tokenBlacklistService_1[_0x5e62d4(0x210)][_0x5e62d4(0x1f3)](_0x1684ad,_0x3f438f['exp']),_0xd4768f[_0x5e62d4(0x205)]({'success':!![],'message':_0x5e62d4(0x1f2)});}catch(_0x5c7bfa){_0x5bc4bc(_0x5c7bfa);}},this[_0x5145d3(0x1fd)]=async(_0x2d8f61,_0x3b2e5f,_0x57ff83)=>{const _0x3804c0=_0x5145d3;try{const _0x55d22d=tokenBlacklistService_1[_0x3804c0(0x210)]['getStats']();_0x3b2e5f['json']({'success':!![],'result':_0x55d22d});}catch(_0x1fd713){_0x57ff83(_0x1fd713);}},this[_0x5145d3(0x1f1)]=new authService_1[(_0x5145d3(0x1fb))]();}}exports[a4_0x4fa79a(0x20f)]=AuthController;