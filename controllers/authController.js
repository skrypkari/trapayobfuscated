'use strict';function a4_0x365b(_0x1ece77,_0x442313){const _0x3f0575=a4_0x3f05();return a4_0x365b=function(_0x365b68,_0x4da9a1){_0x365b68=_0x365b68-0x18e;let _0x2d7391=_0x3f0575[_0x365b68];return _0x2d7391;},a4_0x365b(_0x1ece77,_0x442313);}const a4_0x3679be=a4_0x365b;(function(_0x5b04d9,_0x27145c){const _0x5bb327=a4_0x365b,_0x437ae0=_0x5b04d9();while(!![]){try{const _0x3115d4=-parseInt(_0x5bb327(0x1a4))/0x1*(parseInt(_0x5bb327(0x1b8))/0x2)+-parseInt(_0x5bb327(0x191))/0x3*(-parseInt(_0x5bb327(0x1bf))/0x4)+-parseInt(_0x5bb327(0x1c2))/0x5+-parseInt(_0x5bb327(0x1b7))/0x6+parseInt(_0x5bb327(0x1b4))/0x7*(parseInt(_0x5bb327(0x1a7))/0x8)+-parseInt(_0x5bb327(0x193))/0x9+parseInt(_0x5bb327(0x1b6))/0xa*(parseInt(_0x5bb327(0x1b0))/0xb);if(_0x3115d4===_0x27145c)break;else _0x437ae0['push'](_0x437ae0['shift']());}catch(_0x3ab09e){_0x437ae0['push'](_0x437ae0['shift']());}}}(a4_0x3f05,0x6e453));var __createBinding=this&&this[a4_0x3679be(0x1ba)]||(Object[a4_0x3679be(0x1b9)]?function(_0x5c019c,_0x304374,_0x433c32,_0x166698){const _0x2ce31c=a4_0x3679be;if(_0x166698===undefined)_0x166698=_0x433c32;var _0x2e4843=Object[_0x2ce31c(0x19d)](_0x304374,_0x433c32);(!_0x2e4843||(_0x2ce31c(0x19b)in _0x2e4843?!_0x304374[_0x2ce31c(0x1b1)]:_0x2e4843[_0x2ce31c(0x1ab)]||_0x2e4843[_0x2ce31c(0x196)]))&&(_0x2e4843={'enumerable':!![],'get':function(){return _0x304374[_0x433c32];}}),Object['defineProperty'](_0x5c019c,_0x166698,_0x2e4843);}:function(_0x4ec0ae,_0x24a0af,_0x5bfb30,_0x1ae595){if(_0x1ae595===undefined)_0x1ae595=_0x5bfb30;_0x4ec0ae[_0x1ae595]=_0x24a0af[_0x5bfb30];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a4_0x3679be(0x1b9)]?function(_0x18e121,_0x1a04d3){const _0x725998=a4_0x3679be;Object[_0x725998(0x1b2)](_0x18e121,_0x725998(0x190),{'enumerable':!![],'value':_0x1a04d3});}:function(_0x368184,_0x2a03ab){const _0x41480c=a4_0x3679be;_0x368184[_0x41480c(0x190)]=_0x2a03ab;}),__importStar=this&&this[a4_0x3679be(0x1c1)]||(function(){var _0x5705c8=function(_0xa90a57){const _0x348558=a4_0x365b;return _0x5705c8=Object[_0x348558(0x1a6)]||function(_0x282d0e){const _0x562784=_0x348558;var _0x3a68d3=[];for(var _0x5e6951 in _0x282d0e)if(Object[_0x562784(0x1a2)][_0x562784(0x1a9)][_0x562784(0x19c)](_0x282d0e,_0x5e6951))_0x3a68d3[_0x3a68d3[_0x562784(0x1c0)]]=_0x5e6951;return _0x3a68d3;},_0x5705c8(_0xa90a57);};return function(_0x3d4a8a){const _0x344e99=a4_0x365b;if(_0x3d4a8a&&_0x3d4a8a[_0x344e99(0x1b1)])return _0x3d4a8a;var _0x333f72={};if(_0x3d4a8a!=null){for(var _0x31337e=_0x5705c8(_0x3d4a8a),_0x4c8be7=0x0;_0x4c8be7<_0x31337e[_0x344e99(0x1c0)];_0x4c8be7++)if(_0x31337e[_0x4c8be7]!=='default')__createBinding(_0x333f72,_0x3d4a8a,_0x31337e[_0x4c8be7]);}return __setModuleDefault(_0x333f72,_0x3d4a8a),_0x333f72;};}());Object[a4_0x3679be(0x1b2)](exports,a4_0x3679be(0x1b1),{'value':!![]}),exports[a4_0x3679be(0x1ad)]=void 0x0;const authService_1=require(a4_0x3679be(0x195)),tokenBlacklistService_1=require(a4_0x3679be(0x192)),telegramBotService_1=require(a4_0x3679be(0x1bb));class AuthController{constructor(){const _0x1e83b4=a4_0x3679be;this['login']=async(_0x49c349,_0x32d657,_0x24cb70)=>{const _0x2b39a4=a4_0x365b;try{const _0x16bff1=_0x49c349[_0x2b39a4(0x19a)],_0x20b4d3=_0x49c349['ip']||_0x49c349[_0x2b39a4(0x1ae)][_0x2b39a4(0x1a8)]||_0x2b39a4(0x199),_0x4206da=_0x49c349[_0x2b39a4(0x19b)](_0x2b39a4(0x1b3))||'unknown';let _0x53e6be=![],_0x4f2585=null;try{const _0xa0ebb8=await this[_0x2b39a4(0x1a3)]['login'](_0x16bff1);_0x53e6be=!![],_0xa0ebb8['role']===_0x2b39a4(0x18f)&&_0xa0ebb8[_0x2b39a4(0x1a0)]?.['id']&&(_0x4f2585=_0xa0ebb8[_0x2b39a4(0x1a0)]['id']),_0x4f2585&&await telegramBotService_1[_0x2b39a4(0x197)]['sendLoginNotification'](_0x4f2585,{'username':_0x16bff1[_0x2b39a4(0x1a5)],'ipAddress':_0x20b4d3,'userAgent':_0x4206da,'timestamp':new Date(),'success':!![]}),_0x32d657[_0x2b39a4(0x1ac)]({'success':!![],'result':_0xa0ebb8});}catch(_0x202981){try{const _0x4cc583=(await Promise['resolve']()[_0x2b39a4(0x1be)](()=>__importStar(require(_0x2b39a4(0x1aa)))))[_0x2b39a4(0x190)],_0x1e911b=await _0x4cc583[_0x2b39a4(0x18f)][_0x2b39a4(0x19f)]({'where':{'username':_0x16bff1[_0x2b39a4(0x1a5)]},'select':{'id':!![]}});_0x1e911b&&await telegramBotService_1[_0x2b39a4(0x197)]['sendLoginNotification'](_0x1e911b['id'],{'username':_0x16bff1[_0x2b39a4(0x1a5)],'ipAddress':_0x20b4d3,'userAgent':_0x4206da,'timestamp':new Date(),'success':![]});}catch(_0x8936bf){console[_0x2b39a4(0x1b5)]('Failed\x20to\x20send\x20failed\x20login\x20notification:',_0x8936bf);}throw _0x202981;}}catch(_0x11a8de){_0x24cb70(_0x11a8de);}},this['me']=async(_0x347a91,_0x22b485,_0x56c8c8)=>{const _0x2569e0=a4_0x365b;try{const _0x4ae6f9=_0x347a91[_0x2569e0(0x1a0)];_0x22b485[_0x2569e0(0x1ac)]({'success':!![],'result':{'id':_0x4ae6f9?.['id'],'username':_0x4ae6f9?.['username'],'role':_0x4ae6f9?.['role']}});}catch(_0x5cce2f){_0x56c8c8(_0x5cce2f);}},this[_0x1e83b4(0x19e)]=async(_0x40af0b,_0x30f4a7,_0x36124a)=>{const _0x4f8664=_0x1e83b4;try{const _0x2f1293=_0x40af0b[_0x4f8664(0x1a1)],_0x9fce13=_0x40af0b[_0x4f8664(0x1a0)];_0x2f1293&&_0x9fce13?.[_0x4f8664(0x1bc)]&&tokenBlacklistService_1['tokenBlacklistService']['blacklistToken'](_0x2f1293,_0x9fce13['exp']),_0x30f4a7[_0x4f8664(0x1ac)]({'success':!![],'message':_0x4f8664(0x1bd)});}catch(_0x3cc594){_0x36124a(_0x3cc594);}},this[_0x1e83b4(0x198)]=async(_0x16b9a5,_0x4e73a5,_0xd6b599)=>{const _0x59844b=_0x1e83b4;try{const _0x31a39f=tokenBlacklistService_1[_0x59844b(0x194)][_0x59844b(0x1af)]();_0x4e73a5[_0x59844b(0x1ac)]({'success':!![],'result':_0x31a39f});}catch(_0x54e8be){_0xd6b599(_0x54e8be);}},this[_0x1e83b4(0x1a3)]=new authService_1[(_0x1e83b4(0x18e))]();}}exports['AuthController']=AuthController;function a4_0x3f05(){const _0x42d849=['tokenBlacklistService','../services/authService','configurable','telegramBotService','getBlacklistStats','unknown','body','get','call','getOwnPropertyDescriptor','logout','findUnique','user','token','prototype','authService','12Wmvytf','username','getOwnPropertyNames','176psYoyh','remoteAddress','hasOwnProperty','../config/database','writable','json','AuthController','connection','getStats','116567qEetWT','__esModule','defineProperty','User-Agent','271621gEwJtq','error','750UjHVyi','3884058CwjQNG','51842rADVDB','create','__createBinding','../services/telegramBotService','exp','Logged\x20out\x20successfully','then','2119132nKJFtS','length','__importStar','2772570pDoDQS','AuthService','shop','default','3mzZbBO','../services/tokenBlacklistService','1922832NDexVI'];a4_0x3f05=function(){return _0x42d849;};return a4_0x3f05();}