'use strict';const a4_0x367a16=a4_0x3c9c;(function(_0x5849ba,_0x172a8b){const _0x311c02=a4_0x3c9c,_0x2cb081=_0x5849ba();while(!![]){try{const _0x36fd77=parseInt(_0x311c02(0x1e0))/0x1*(parseInt(_0x311c02(0x1cf))/0x2)+parseInt(_0x311c02(0x1f1))/0x3+-parseInt(_0x311c02(0x1d1))/0x4*(parseInt(_0x311c02(0x1f0))/0x5)+-parseInt(_0x311c02(0x1ea))/0x6*(parseInt(_0x311c02(0x1fd))/0x7)+parseInt(_0x311c02(0x1ec))/0x8*(-parseInt(_0x311c02(0x1e4))/0x9)+parseInt(_0x311c02(0x1d0))/0xa+-parseInt(_0x311c02(0x1d6))/0xb*(-parseInt(_0x311c02(0x1da))/0xc);if(_0x36fd77===_0x172a8b)break;else _0x2cb081['push'](_0x2cb081['shift']());}catch(_0x59dc1f){_0x2cb081['push'](_0x2cb081['shift']());}}}(a4_0x2c2b,0x8f382));var __createBinding=this&&this[a4_0x367a16(0x1d7)]||(Object[a4_0x367a16(0x1e3)]?function(_0x27170,_0x14476a,_0x14d135,_0x5238ed){const _0x159bc0=a4_0x367a16;if(_0x5238ed===undefined)_0x5238ed=_0x14d135;var _0x8237a5=Object['getOwnPropertyDescriptor'](_0x14476a,_0x14d135);(!_0x8237a5||(_0x159bc0(0x1e2)in _0x8237a5?!_0x14476a[_0x159bc0(0x1ef)]:_0x8237a5['writable']||_0x8237a5[_0x159bc0(0x1f4)]))&&(_0x8237a5={'enumerable':!![],'get':function(){return _0x14476a[_0x14d135];}}),Object[_0x159bc0(0x1d5)](_0x27170,_0x5238ed,_0x8237a5);}:function(_0x55ff53,_0xf3e10e,_0x2e8380,_0x52bfca){if(_0x52bfca===undefined)_0x52bfca=_0x2e8380;_0x55ff53[_0x52bfca]=_0xf3e10e[_0x2e8380];}),__setModuleDefault=this&&this[a4_0x367a16(0x201)]||(Object[a4_0x367a16(0x1e3)]?function(_0x23aa0a,_0x41166f){const _0x23d109=a4_0x367a16;Object[_0x23d109(0x1d5)](_0x23aa0a,_0x23d109(0x200),{'enumerable':!![],'value':_0x41166f});}:function(_0x3b6ca6,_0x4007dc){const _0x5b9416=a4_0x367a16;_0x3b6ca6[_0x5b9416(0x200)]=_0x4007dc;}),__importStar=this&&this[a4_0x367a16(0x1e1)]||(function(){var _0x249b87=function(_0x51a409){const _0x56d1c3=a4_0x3c9c;return _0x249b87=Object[_0x56d1c3(0x1f9)]||function(_0x1e7649){const _0x3304c2=_0x56d1c3;var _0x3c7cab=[];for(var _0x10b0e0 in _0x1e7649)if(Object[_0x3304c2(0x1d9)]['hasOwnProperty'][_0x3304c2(0x1ee)](_0x1e7649,_0x10b0e0))_0x3c7cab[_0x3c7cab[_0x3304c2(0x1f3)]]=_0x10b0e0;return _0x3c7cab;},_0x249b87(_0x51a409);};return function(_0x3ab71a){const _0x1738c=a4_0x3c9c;if(_0x3ab71a&&_0x3ab71a['__esModule'])return _0x3ab71a;var _0x17cfe6={};if(_0x3ab71a!=null){for(var _0x3db413=_0x249b87(_0x3ab71a),_0x4a7529=0x0;_0x4a7529<_0x3db413[_0x1738c(0x1f3)];_0x4a7529++)if(_0x3db413[_0x4a7529]!==_0x1738c(0x200))__createBinding(_0x17cfe6,_0x3ab71a,_0x3db413[_0x4a7529]);}return __setModuleDefault(_0x17cfe6,_0x3ab71a),_0x17cfe6;};}());Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a4_0x367a16(0x1de)]=void 0x0;const authService_1=require('../services/authService'),tokenBlacklistService_1=require(a4_0x367a16(0x1eb)),telegramBotService_1=require(a4_0x367a16(0x1e5));function a4_0x2c2b(){const _0xda24f8=['5bdNNnU','1042914gbPCyA','telegramBotService','length','configurable','json','role','exp','authService','getOwnPropertyNames','error','user','getStats','575729DkWgCj','tokenBlacklistService','logout','default','__setModuleDefault','2Mrvjkn','5197930SanNlq','3300484rTbYBE','Logged\x20out\x20successfully','shop','getBlacklistStats','defineProperty','976184WXiDco','__createBinding','sendLoginNotification','prototype','252kCbKxE','../config/database','token','connection','AuthController','username','194877Fxkfsr','__importStar','get','create','992655MJugJp','../services/telegramBotService','unknown','AuthService','User-Agent','remoteAddress','30KXVGwG','../services/tokenBlacklistService','80iRDmRs','login','call','__esModule'];a4_0x2c2b=function(){return _0xda24f8;};return a4_0x2c2b();}function a4_0x3c9c(_0x4846d4,_0x2e09b3){const _0x2c2bed=a4_0x2c2b();return a4_0x3c9c=function(_0x3c9c57,_0xa520cb){_0x3c9c57=_0x3c9c57-0x1cf;let _0x414dc1=_0x2c2bed[_0x3c9c57];return _0x414dc1;},a4_0x3c9c(_0x4846d4,_0x2e09b3);}class AuthController{constructor(){const _0x506a3e=a4_0x367a16;this[_0x506a3e(0x1ed)]=async(_0x4cb2f0,_0x5dffe2,_0x281cf6)=>{const _0x2f4c2b=_0x506a3e;try{const _0x5ad7c4=_0x4cb2f0['body'],_0x53eb40=_0x4cb2f0['ip']||_0x4cb2f0[_0x2f4c2b(0x1dd)][_0x2f4c2b(0x1e9)]||_0x2f4c2b(0x1e6),_0x2294b0=_0x4cb2f0['get'](_0x2f4c2b(0x1e8))||_0x2f4c2b(0x1e6);let _0x516d5d=![],_0x1ec482=null;try{const _0x3312d9=await this[_0x2f4c2b(0x1f8)][_0x2f4c2b(0x1ed)](_0x5ad7c4);_0x516d5d=!![],_0x3312d9[_0x2f4c2b(0x1f6)]===_0x2f4c2b(0x1d3)&&_0x3312d9[_0x2f4c2b(0x1fb)]?.['id']&&(_0x1ec482=_0x3312d9['user']['id']),_0x1ec482&&await telegramBotService_1[_0x2f4c2b(0x1f2)][_0x2f4c2b(0x1d8)](_0x1ec482,{'username':_0x5ad7c4[_0x2f4c2b(0x1df)],'ipAddress':_0x53eb40,'userAgent':_0x2294b0,'timestamp':new Date(),'success':!![]}),_0x5dffe2[_0x2f4c2b(0x1f5)]({'success':!![],'result':_0x3312d9});}catch(_0xc35c3c){try{const _0x41867e=(await Promise['resolve']()['then'](()=>__importStar(require(_0x2f4c2b(0x1db)))))['default'],_0x27e307=await _0x41867e['shop']['findUnique']({'where':{'username':_0x5ad7c4[_0x2f4c2b(0x1df)]},'select':{'id':!![]}});_0x27e307&&await telegramBotService_1[_0x2f4c2b(0x1f2)][_0x2f4c2b(0x1d8)](_0x27e307['id'],{'username':_0x5ad7c4[_0x2f4c2b(0x1df)],'ipAddress':_0x53eb40,'userAgent':_0x2294b0,'timestamp':new Date(),'success':![]});}catch(_0x5d7e66){console[_0x2f4c2b(0x1fa)]('Failed\x20to\x20send\x20failed\x20login\x20notification:',_0x5d7e66);}throw _0xc35c3c;}}catch(_0xadf15d){_0x281cf6(_0xadf15d);}},this['me']=async(_0x2ee26c,_0x2a996e,_0x3c7ab3)=>{const _0x361343=_0x506a3e;try{const _0x5adb07=_0x2ee26c[_0x361343(0x1fb)];_0x2a996e['json']({'success':!![],'result':{'id':_0x5adb07?.['id'],'username':_0x5adb07?.[_0x361343(0x1df)],'role':_0x5adb07?.[_0x361343(0x1f6)]}});}catch(_0x2a599b){_0x3c7ab3(_0x2a599b);}},this[_0x506a3e(0x1ff)]=async(_0x45f201,_0x5cf932,_0x293a76)=>{const _0x27fe0d=_0x506a3e;try{const _0x1a508f=_0x45f201[_0x27fe0d(0x1dc)],_0x4ab366=_0x45f201[_0x27fe0d(0x1fb)];_0x1a508f&&_0x4ab366?.[_0x27fe0d(0x1f7)]&&tokenBlacklistService_1[_0x27fe0d(0x1fe)]['blacklistToken'](_0x1a508f,_0x4ab366[_0x27fe0d(0x1f7)]),_0x5cf932[_0x27fe0d(0x1f5)]({'success':!![],'message':_0x27fe0d(0x1d2)});}catch(_0x2903bc){_0x293a76(_0x2903bc);}},this[_0x506a3e(0x1d4)]=async(_0x578cd9,_0x3406ad,_0x3730e2)=>{const _0x4cec15=_0x506a3e;try{const _0x4f04d9=tokenBlacklistService_1['tokenBlacklistService'][_0x4cec15(0x1fc)]();_0x3406ad[_0x4cec15(0x1f5)]({'success':!![],'result':_0x4f04d9});}catch(_0x429636){_0x3730e2(_0x429636);}},this[_0x506a3e(0x1f8)]=new authService_1[(_0x506a3e(0x1e7))]();}}exports['AuthController']=AuthController;