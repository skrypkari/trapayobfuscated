'use strict';function a4_0x4658(_0x3a3e5e,_0xd6fbb2){const _0x2bed71=a4_0x2bed();return a4_0x4658=function(_0x46587f,_0x3bd231){_0x46587f=_0x46587f-0x105;let _0x15142f=_0x2bed71[_0x46587f];return _0x15142f;},a4_0x4658(_0x3a3e5e,_0xd6fbb2);}const a4_0x2e6ed2=a4_0x4658;function a4_0x2bed(){const _0x26b53f=['AuthController','authService','remoteAddress','telegramBotService','hasOwnProperty','call','../services/telegramBotService','sendLoginNotification','../services/tokenBlacklistService','login','AuthService','getOwnPropertyDescriptor','__importStar','2PmKmrr','json','prototype','tokenBlacklistService','24vSRgvU','user','543342auOOhX','then','get','1138403IuQbga','getBlacklistStats','shop','988084eNlMGj','getStats','configurable','__esModule','exp','4426230mHzXFR','Logged\x20out\x20successfully','error','token','9mHtgzO','length','defineProperty','3083464YoOSVj','writable','create','role','__createBinding','getOwnPropertyNames','default','4102740HrDhzD','../config/database','body','resolve','username','21586090wOUriX','unknown'];a4_0x2bed=function(){return _0x26b53f;};return a4_0x2bed();}(function(_0x292511,_0x462383){const _0x2ca4b9=a4_0x4658,_0x4cc0c6=_0x292511();while(!![]){try{const _0x196283=-parseInt(_0x2ca4b9(0x112))/0x1*(-parseInt(_0x2ca4b9(0x11e))/0x2)+parseInt(_0x2ca4b9(0x118))/0x3+-parseInt(_0x2ca4b9(0x12a))/0x4+-parseInt(_0x2ca4b9(0x131))/0x5+-parseInt(_0x2ca4b9(0x123))/0x6+parseInt(_0x2ca4b9(0x11b))/0x7*(-parseInt(_0x2ca4b9(0x116))/0x8)+parseInt(_0x2ca4b9(0x127))/0x9*(parseInt(_0x2ca4b9(0x136))/0xa);if(_0x196283===_0x462383)break;else _0x4cc0c6['push'](_0x4cc0c6['shift']());}catch(_0x495f95){_0x4cc0c6['push'](_0x4cc0c6['shift']());}}}(a4_0x2bed,0x7cb51));var __createBinding=this&&this[a4_0x2e6ed2(0x12e)]||(Object[a4_0x2e6ed2(0x12c)]?function(_0x23cf53,_0x116a6e,_0x5b8fd1,_0x4eaf4b){const _0x703c3f=a4_0x2e6ed2;if(_0x4eaf4b===undefined)_0x4eaf4b=_0x5b8fd1;var _0x5b3355=Object[_0x703c3f(0x110)](_0x116a6e,_0x5b8fd1);(!_0x5b3355||(_0x703c3f(0x11a)in _0x5b3355?!_0x116a6e['__esModule']:_0x5b3355[_0x703c3f(0x12b)]||_0x5b3355[_0x703c3f(0x120)]))&&(_0x5b3355={'enumerable':!![],'get':function(){return _0x116a6e[_0x5b8fd1];}}),Object[_0x703c3f(0x129)](_0x23cf53,_0x4eaf4b,_0x5b3355);}:function(_0x3cad2d,_0x1a5073,_0x32a4c0,_0x34bc32){if(_0x34bc32===undefined)_0x34bc32=_0x32a4c0;_0x3cad2d[_0x34bc32]=_0x1a5073[_0x32a4c0];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a4_0x2e6ed2(0x12c)]?function(_0x3c0edc,_0x23921e){const _0x32cf74=a4_0x2e6ed2;Object[_0x32cf74(0x129)](_0x3c0edc,_0x32cf74(0x130),{'enumerable':!![],'value':_0x23921e});}:function(_0x430f7d,_0x35b27b){const _0x4f1844=a4_0x2e6ed2;_0x430f7d[_0x4f1844(0x130)]=_0x35b27b;}),__importStar=this&&this[a4_0x2e6ed2(0x111)]||(function(){var _0x5415ed=function(_0x3829e1){const _0x2066db=a4_0x4658;return _0x5415ed=Object[_0x2066db(0x12f)]||function(_0x59058c){const _0x3b595a=_0x2066db;var _0x437cab=[];for(var _0x419cd0 in _0x59058c)if(Object[_0x3b595a(0x114)][_0x3b595a(0x109)][_0x3b595a(0x10a)](_0x59058c,_0x419cd0))_0x437cab[_0x437cab[_0x3b595a(0x128)]]=_0x419cd0;return _0x437cab;},_0x5415ed(_0x3829e1);};return function(_0x5b503a){const _0x238209=a4_0x4658;if(_0x5b503a&&_0x5b503a['__esModule'])return _0x5b503a;var _0x1d0d4b={};if(_0x5b503a!=null){for(var _0x243296=_0x5415ed(_0x5b503a),_0x15dc69=0x0;_0x15dc69<_0x243296['length'];_0x15dc69++)if(_0x243296[_0x15dc69]!==_0x238209(0x130))__createBinding(_0x1d0d4b,_0x5b503a,_0x243296[_0x15dc69]);}return __setModuleDefault(_0x1d0d4b,_0x5b503a),_0x1d0d4b;};}());Object['defineProperty'](exports,a4_0x2e6ed2(0x121),{'value':!![]}),exports[a4_0x2e6ed2(0x105)]=void 0x0;const authService_1=require('../services/authService'),tokenBlacklistService_1=require(a4_0x2e6ed2(0x10d)),telegramBotService_1=require(a4_0x2e6ed2(0x10b));class AuthController{constructor(){const _0x15dd1b=a4_0x2e6ed2;this['login']=async(_0x228121,_0x4c300b,_0x2ab59c)=>{const _0xdedb77=a4_0x4658;try{const _0xe16c6=_0x228121[_0xdedb77(0x133)],_0x1f5583=_0x228121['ip']||_0x228121['connection'][_0xdedb77(0x107)]||_0xdedb77(0x137),_0x53ec10=_0x228121['get']('User-Agent')||'unknown';let _0x3417f7=![],_0x42bcc0=null;try{const _0x58820b=await this[_0xdedb77(0x106)][_0xdedb77(0x10e)](_0xe16c6);_0x3417f7=!![],_0x58820b[_0xdedb77(0x12d)]===_0xdedb77(0x11d)&&_0x58820b[_0xdedb77(0x117)]?.['id']&&(_0x42bcc0=_0x58820b[_0xdedb77(0x117)]['id']),_0x42bcc0&&await telegramBotService_1[_0xdedb77(0x108)][_0xdedb77(0x10c)](_0x42bcc0,{'username':_0xe16c6[_0xdedb77(0x135)],'ipAddress':_0x1f5583,'userAgent':_0x53ec10,'timestamp':new Date(),'success':!![]}),_0x4c300b[_0xdedb77(0x113)]({'success':!![],'result':_0x58820b});}catch(_0x2bb7b9){try{const _0x432ab4=(await Promise[_0xdedb77(0x134)]()[_0xdedb77(0x119)](()=>__importStar(require(_0xdedb77(0x132)))))[_0xdedb77(0x130)],_0x10a815=await _0x432ab4[_0xdedb77(0x11d)]['findUnique']({'where':{'username':_0xe16c6[_0xdedb77(0x135)]},'select':{'id':!![]}});_0x10a815&&await telegramBotService_1[_0xdedb77(0x108)][_0xdedb77(0x10c)](_0x10a815['id'],{'username':_0xe16c6['username'],'ipAddress':_0x1f5583,'userAgent':_0x53ec10,'timestamp':new Date(),'success':![]});}catch(_0x41194b){console[_0xdedb77(0x125)]('Failed\x20to\x20send\x20failed\x20login\x20notification:',_0x41194b);}throw _0x2bb7b9;}}catch(_0x55f544){_0x2ab59c(_0x55f544);}},this['me']=async(_0x20c8c4,_0x7cca7d,_0x202aef)=>{const _0x4ebd2c=a4_0x4658;try{const _0x5cd27a=_0x20c8c4[_0x4ebd2c(0x117)];_0x7cca7d[_0x4ebd2c(0x113)]({'success':!![],'result':{'id':_0x5cd27a?.['id'],'username':_0x5cd27a?.[_0x4ebd2c(0x135)],'role':_0x5cd27a?.[_0x4ebd2c(0x12d)]}});}catch(_0xd2d848){_0x202aef(_0xd2d848);}},this['logout']=async(_0x4a681,_0x5cb4f8,_0x2e844f)=>{const _0x752219=a4_0x4658;try{const _0x3d02c4=_0x4a681[_0x752219(0x126)],_0x59a6ca=_0x4a681['user'];_0x3d02c4&&_0x59a6ca?.[_0x752219(0x122)]&&tokenBlacklistService_1[_0x752219(0x115)]['blacklistToken'](_0x3d02c4,_0x59a6ca[_0x752219(0x122)]),_0x5cb4f8[_0x752219(0x113)]({'success':!![],'message':_0x752219(0x124)});}catch(_0x5c1cf7){_0x2e844f(_0x5c1cf7);}},this[_0x15dd1b(0x11c)]=async(_0x2580b4,_0x375cf1,_0x59c0fe)=>{const _0x53531b=_0x15dd1b;try{const _0x2eea0b=tokenBlacklistService_1[_0x53531b(0x115)][_0x53531b(0x11f)]();_0x375cf1[_0x53531b(0x113)]({'success':!![],'result':_0x2eea0b});}catch(_0x4c2379){_0x59c0fe(_0x4c2379);}},this['authService']=new authService_1[(_0x15dd1b(0x10f))]();}}exports[a4_0x2e6ed2(0x105)]=AuthController;