'use strict';const a4_0x36e38c=a4_0x38f5;(function(_0x50c017,_0x5e79e8){const _0x2a6a6c=a4_0x38f5,_0x54bfd8=_0x50c017();while(!![]){try{const _0x58424c=parseInt(_0x2a6a6c(0xf7))/0x1+parseInt(_0x2a6a6c(0xfe))/0x2+-parseInt(_0x2a6a6c(0xf8))/0x3+-parseInt(_0x2a6a6c(0xea))/0x4+-parseInt(_0x2a6a6c(0xf2))/0x5+-parseInt(_0x2a6a6c(0x100))/0x6*(parseInt(_0x2a6a6c(0xfd))/0x7)+parseInt(_0x2a6a6c(0xdd))/0x8;if(_0x58424c===_0x5e79e8)break;else _0x54bfd8['push'](_0x54bfd8['shift']());}catch(_0x1d3e5b){_0x54bfd8['push'](_0x54bfd8['shift']());}}}(a4_0x3bd3,0xd4234));function a4_0x38f5(_0x23e1eb,_0x1e1b5a){const _0x3bd3cd=a4_0x3bd3();return a4_0x38f5=function(_0x38f53a,_0x1e1f78){_0x38f53a=_0x38f53a-0xdc;let _0x2b0f7d=_0x3bd3cd[_0x38f53a];return _0x2b0f7d;},a4_0x38f5(_0x23e1eb,_0x1e1b5a);}var __createBinding=this&&this[a4_0x36e38c(0xfa)]||(Object[a4_0x36e38c(0xeb)]?function(_0x5ac035,_0xa2e1a2,_0x5a2a8a,_0x16e0e3){const _0x37e053=a4_0x36e38c;if(_0x16e0e3===undefined)_0x16e0e3=_0x5a2a8a;var _0x5663ad=Object[_0x37e053(0xf6)](_0xa2e1a2,_0x5a2a8a);(!_0x5663ad||(_0x37e053(0xdc)in _0x5663ad?!_0xa2e1a2['__esModule']:_0x5663ad['writable']||_0x5663ad['configurable']))&&(_0x5663ad={'enumerable':!![],'get':function(){return _0xa2e1a2[_0x5a2a8a];}}),Object[_0x37e053(0xe3)](_0x5ac035,_0x16e0e3,_0x5663ad);}:function(_0x6ba515,_0x2964d3,_0x34eda2,_0xe3a175){if(_0xe3a175===undefined)_0xe3a175=_0x34eda2;_0x6ba515[_0xe3a175]=_0x2964d3[_0x34eda2];}),__setModuleDefault=this&&this[a4_0x36e38c(0xf3)]||(Object[a4_0x36e38c(0xeb)]?function(_0x388a2c,_0x453170){const _0x37a636=a4_0x36e38c;Object['defineProperty'](_0x388a2c,_0x37a636(0xe2),{'enumerable':!![],'value':_0x453170});}:function(_0x2f103a,_0x3200d4){const _0x2253dc=a4_0x36e38c;_0x2f103a[_0x2253dc(0xe2)]=_0x3200d4;}),__importStar=this&&this[a4_0x36e38c(0xe5)]||(function(){var _0x549a10=function(_0x4931c1){return _0x549a10=Object['getOwnPropertyNames']||function(_0x500182){const _0x20ff8f=a4_0x38f5;var _0x18994e=[];for(var _0x13fa55 in _0x500182)if(Object[_0x20ff8f(0xe4)][_0x20ff8f(0xec)][_0x20ff8f(0xde)](_0x500182,_0x13fa55))_0x18994e[_0x18994e[_0x20ff8f(0x104)]]=_0x13fa55;return _0x18994e;},_0x549a10(_0x4931c1);};return function(_0x5d0560){const _0x233bc3=a4_0x38f5;if(_0x5d0560&&_0x5d0560['__esModule'])return _0x5d0560;var _0x2992fe={};if(_0x5d0560!=null){for(var _0x118cc8=_0x549a10(_0x5d0560),_0x377015=0x0;_0x377015<_0x118cc8[_0x233bc3(0x104)];_0x377015++)if(_0x118cc8[_0x377015]!==_0x233bc3(0xe2))__createBinding(_0x2992fe,_0x5d0560,_0x118cc8[_0x377015]);}return __setModuleDefault(_0x2992fe,_0x5d0560),_0x2992fe;};}());function a4_0x3bd3(){const _0x1a58a0=['337030OgGzhw','blacklistToken','6709818bOxxnU','exp','Logged\x20out\x20successfully','AuthService','length','AuthController','findUnique','remoteAddress','Failed\x20to\x20send\x20failed\x20login\x20notification:','unknown','get','22904912XobHSV','call','__esModule','user','username','default','defineProperty','prototype','__importStar','tokenBlacklistService','../services/tokenBlacklistService','telegramBotService','User-Agent','60140XdUQUs','create','hasOwnProperty','body','then','json','connection','../services/telegramBotService','5973765SaWOiZ','__setModuleDefault','getBlacklistStats','login','getOwnPropertyDescriptor','599579vuPEqC','1302603XeGujz','getStats','__createBinding','../services/authService','shop','7fXSBDi'];a4_0x3bd3=function(){return _0x1a58a0;};return a4_0x3bd3();}Object[a4_0x36e38c(0xe3)](exports,a4_0x36e38c(0xdf),{'value':!![]}),exports[a4_0x36e38c(0x105)]=void 0x0;const authService_1=require(a4_0x36e38c(0xfb)),tokenBlacklistService_1=require(a4_0x36e38c(0xe7)),telegramBotService_1=require(a4_0x36e38c(0xf1));class AuthController{constructor(){const _0x1a5f0c=a4_0x36e38c;this[_0x1a5f0c(0xf5)]=async(_0x5aeaa6,_0x3cd8e2,_0x2c0355)=>{const _0xcf0a9e=_0x1a5f0c;try{const _0x4ea0fb=_0x5aeaa6[_0xcf0a9e(0xed)],_0x4f028a=_0x5aeaa6['ip']||_0x5aeaa6[_0xcf0a9e(0xf0)][_0xcf0a9e(0x107)]||'unknown',_0xca384e=_0x5aeaa6[_0xcf0a9e(0xdc)](_0xcf0a9e(0xe9))||_0xcf0a9e(0x109);let _0xca4d0b=![],_0x45d40=null;try{const _0x384c95=await this['authService'][_0xcf0a9e(0xf5)](_0x4ea0fb);_0xca4d0b=!![],_0x384c95['role']===_0xcf0a9e(0xfc)&&_0x384c95[_0xcf0a9e(0xe0)]?.['id']&&(_0x45d40=_0x384c95[_0xcf0a9e(0xe0)]['id']),_0x45d40&&await telegramBotService_1['telegramBotService']['sendLoginNotification'](_0x45d40,{'username':_0x4ea0fb[_0xcf0a9e(0xe1)],'ipAddress':_0x4f028a,'userAgent':_0xca384e,'timestamp':new Date(),'success':!![]}),_0x3cd8e2[_0xcf0a9e(0xef)]({'success':!![],'result':_0x384c95});}catch(_0x1dd99f){try{const _0xca491e=(await Promise['resolve']()[_0xcf0a9e(0xee)](()=>__importStar(require('../config/database'))))[_0xcf0a9e(0xe2)],_0x452073=await _0xca491e[_0xcf0a9e(0xfc)][_0xcf0a9e(0x106)]({'where':{'username':_0x4ea0fb[_0xcf0a9e(0xe1)]},'select':{'id':!![]}});_0x452073&&await telegramBotService_1[_0xcf0a9e(0xe8)]['sendLoginNotification'](_0x452073['id'],{'username':_0x4ea0fb['username'],'ipAddress':_0x4f028a,'userAgent':_0xca384e,'timestamp':new Date(),'success':![]});}catch(_0x55b392){console['error'](_0xcf0a9e(0x108),_0x55b392);}throw _0x1dd99f;}}catch(_0x4a6f2c){_0x2c0355(_0x4a6f2c);}},this['me']=async(_0x49a045,_0x4f7845,_0x19d623)=>{const _0x226946=_0x1a5f0c;try{const _0x459c49=_0x49a045['user'];_0x4f7845[_0x226946(0xef)]({'success':!![],'result':{'id':_0x459c49?.['id'],'username':_0x459c49?.['username'],'role':_0x459c49?.['role']}});}catch(_0x1b992f){_0x19d623(_0x1b992f);}},this['logout']=async(_0x41c889,_0x348dcd,_0x2ea585)=>{const _0x162eb4=_0x1a5f0c;try{const _0x5600b5=_0x41c889['token'],_0x156876=_0x41c889[_0x162eb4(0xe0)];_0x5600b5&&_0x156876?.[_0x162eb4(0x101)]&&tokenBlacklistService_1[_0x162eb4(0xe6)][_0x162eb4(0xff)](_0x5600b5,_0x156876[_0x162eb4(0x101)]),_0x348dcd[_0x162eb4(0xef)]({'success':!![],'message':_0x162eb4(0x102)});}catch(_0x76b28d){_0x2ea585(_0x76b28d);}},this[_0x1a5f0c(0xf4)]=async(_0x42ac46,_0x3ff18c,_0x671808)=>{const _0x549416=_0x1a5f0c;try{const _0x34868b=tokenBlacklistService_1['tokenBlacklistService'][_0x549416(0xf9)]();_0x3ff18c[_0x549416(0xef)]({'success':!![],'result':_0x34868b});}catch(_0x5ecbb6){_0x671808(_0x5ecbb6);}},this['authService']=new authService_1[(_0x1a5f0c(0x103))]();}}exports[a4_0x36e38c(0x105)]=AuthController;