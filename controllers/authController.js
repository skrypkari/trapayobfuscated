'use strict';const a4_0x1bb6a=a4_0x217f;function a4_0x3adc(){const _0x15f9d0=['unknown','error','19pLAiUy','then','48952LtfEzW','hasOwnProperty','configurable','call','../config/database','authService','963XAIqpz','__setModuleDefault','blacklistToken','6432260vOfBZV','user','token','create','defineProperty','4lrjFCs','body','tokenBlacklistService','prototype','default','remoteAddress','json','520590YAHGpR','get','Logged\x20out\x20successfully','shop','712500hZhVqv','getOwnPropertyNames','__createBinding','Failed\x20to\x20send\x20failed\x20login\x20notification:','getBlacklistStats','AuthController','__esModule','1395138fzByKD','length','getStats','role','login','39170BUeuQb','writable','User-Agent','getOwnPropertyDescriptor','22NtHXqC','telegramBotService','sendLoginNotification','4532199kdMsAL','username','__importStar','logout'];a4_0x3adc=function(){return _0x15f9d0;};return a4_0x3adc();}function a4_0x217f(_0x51b522,_0x453153){const _0x3adc2e=a4_0x3adc();return a4_0x217f=function(_0x217f9b,_0x484c27){_0x217f9b=_0x217f9b-0x10d;let _0x41b8bb=_0x3adc2e[_0x217f9b];return _0x41b8bb;},a4_0x217f(_0x51b522,_0x453153);}(function(_0x414db5,_0x5d2cfb){const _0x204411=a4_0x217f,_0x22abcc=_0x414db5();while(!![]){try{const _0x15b82d=-parseInt(_0x204411(0x131))/0x1*(parseInt(_0x204411(0x124))/0x2)+parseInt(_0x204411(0x118))/0x3*(-parseInt(_0x204411(0x10d))/0x4)+-parseInt(_0x204411(0x114))/0x5+-parseInt(_0x204411(0x11f))/0x6+-parseInt(_0x204411(0x12b))/0x7+parseInt(_0x204411(0x133))/0x8*(parseInt(_0x204411(0x139))/0x9)+parseInt(_0x204411(0x13c))/0xa*(parseInt(_0x204411(0x128))/0xb);if(_0x15b82d===_0x5d2cfb)break;else _0x22abcc['push'](_0x22abcc['shift']());}catch(_0x3996c9){_0x22abcc['push'](_0x22abcc['shift']());}}}(a4_0x3adc,0x54d50));var __createBinding=this&&this[a4_0x1bb6a(0x11a)]||(Object['create']?function(_0x2dd1a3,_0x23fc88,_0x5c4646,_0x48a4b0){const _0x26a7cf=a4_0x1bb6a;if(_0x48a4b0===undefined)_0x48a4b0=_0x5c4646;var _0x32b4ff=Object[_0x26a7cf(0x127)](_0x23fc88,_0x5c4646);(!_0x32b4ff||(_0x26a7cf(0x115)in _0x32b4ff?!_0x23fc88[_0x26a7cf(0x11e)]:_0x32b4ff[_0x26a7cf(0x125)]||_0x32b4ff[_0x26a7cf(0x135)]))&&(_0x32b4ff={'enumerable':!![],'get':function(){return _0x23fc88[_0x5c4646];}}),Object[_0x26a7cf(0x140)](_0x2dd1a3,_0x48a4b0,_0x32b4ff);}:function(_0x30089c,_0xde4861,_0x51a317,_0x44fa50){if(_0x44fa50===undefined)_0x44fa50=_0x51a317;_0x30089c[_0x44fa50]=_0xde4861[_0x51a317];}),__setModuleDefault=this&&this[a4_0x1bb6a(0x13a)]||(Object[a4_0x1bb6a(0x13f)]?function(_0x25a51e,_0x1f958b){const _0x3c8dae=a4_0x1bb6a;Object[_0x3c8dae(0x140)](_0x25a51e,_0x3c8dae(0x111),{'enumerable':!![],'value':_0x1f958b});}:function(_0x1a1036,_0x572ad6){_0x1a1036['default']=_0x572ad6;}),__importStar=this&&this[a4_0x1bb6a(0x12d)]||(function(){var _0x3ed9e9=function(_0x209432){const _0x191ceb=a4_0x217f;return _0x3ed9e9=Object[_0x191ceb(0x119)]||function(_0xde851e){const _0x126ca6=_0x191ceb;var _0x4d48c3=[];for(var _0x419c32 in _0xde851e)if(Object[_0x126ca6(0x110)][_0x126ca6(0x134)][_0x126ca6(0x136)](_0xde851e,_0x419c32))_0x4d48c3[_0x4d48c3[_0x126ca6(0x120)]]=_0x419c32;return _0x4d48c3;},_0x3ed9e9(_0x209432);};return function(_0x5d2453){const _0x4842e6=a4_0x217f;if(_0x5d2453&&_0x5d2453[_0x4842e6(0x11e)])return _0x5d2453;var _0x547da6={};if(_0x5d2453!=null){for(var _0x7cff47=_0x3ed9e9(_0x5d2453),_0x222a4d=0x0;_0x222a4d<_0x7cff47[_0x4842e6(0x120)];_0x222a4d++)if(_0x7cff47[_0x222a4d]!=='default')__createBinding(_0x547da6,_0x5d2453,_0x7cff47[_0x222a4d]);}return __setModuleDefault(_0x547da6,_0x5d2453),_0x547da6;};}());Object[a4_0x1bb6a(0x140)](exports,a4_0x1bb6a(0x11e),{'value':!![]}),exports['AuthController']=void 0x0;const authService_1=require('../services/authService'),tokenBlacklistService_1=require('../services/tokenBlacklistService'),telegramBotService_1=require('../services/telegramBotService');class AuthController{constructor(){const _0x23987f=a4_0x1bb6a;this[_0x23987f(0x123)]=async(_0x221f1c,_0x6f76b2,_0x465c18)=>{const _0x2c8c42=_0x23987f;try{const _0x514c40=_0x221f1c[_0x2c8c42(0x10e)],_0xb81067=_0x221f1c['ip']||_0x221f1c['connection'][_0x2c8c42(0x112)]||'unknown',_0x8c7d83=_0x221f1c[_0x2c8c42(0x115)](_0x2c8c42(0x126))||_0x2c8c42(0x12f);let _0x4d6746=![],_0x4f7f22=null;try{const _0x58f429=await this[_0x2c8c42(0x138)][_0x2c8c42(0x123)](_0x514c40);_0x4d6746=!![],_0x58f429[_0x2c8c42(0x122)]==='shop'&&_0x58f429[_0x2c8c42(0x13d)]?.['id']&&(_0x4f7f22=_0x58f429[_0x2c8c42(0x13d)]['id']),_0x4f7f22&&await telegramBotService_1[_0x2c8c42(0x129)][_0x2c8c42(0x12a)](_0x4f7f22,{'username':_0x514c40[_0x2c8c42(0x12c)],'ipAddress':_0xb81067,'userAgent':_0x8c7d83,'timestamp':new Date(),'success':!![]}),_0x6f76b2[_0x2c8c42(0x113)]({'success':!![],'result':_0x58f429});}catch(_0x301129){try{const _0x46ebfc=(await Promise['resolve']()[_0x2c8c42(0x132)](()=>__importStar(require(_0x2c8c42(0x137)))))['default'],_0x564d18=await _0x46ebfc[_0x2c8c42(0x117)]['findUnique']({'where':{'username':_0x514c40[_0x2c8c42(0x12c)]},'select':{'id':!![]}});_0x564d18&&await telegramBotService_1[_0x2c8c42(0x129)][_0x2c8c42(0x12a)](_0x564d18['id'],{'username':_0x514c40[_0x2c8c42(0x12c)],'ipAddress':_0xb81067,'userAgent':_0x8c7d83,'timestamp':new Date(),'success':![]});}catch(_0x4225ad){console[_0x2c8c42(0x130)](_0x2c8c42(0x11b),_0x4225ad);}throw _0x301129;}}catch(_0x4c014a){_0x465c18(_0x4c014a);}},this['me']=async(_0x267aca,_0x3d8660,_0x4defc7)=>{const _0x4ec504=_0x23987f;try{const _0x3585d3=_0x267aca[_0x4ec504(0x13d)];_0x3d8660[_0x4ec504(0x113)]({'success':!![],'result':{'id':_0x3585d3?.['id'],'username':_0x3585d3?.['username'],'role':_0x3585d3?.[_0x4ec504(0x122)]}});}catch(_0x20c3ff){_0x4defc7(_0x20c3ff);}},this[_0x23987f(0x12e)]=async(_0x29764d,_0x14746e,_0x57109d)=>{const _0x27583d=_0x23987f;try{const _0x642ec2=_0x29764d[_0x27583d(0x13e)],_0x52493f=_0x29764d[_0x27583d(0x13d)];_0x642ec2&&_0x52493f?.['exp']&&tokenBlacklistService_1[_0x27583d(0x10f)][_0x27583d(0x13b)](_0x642ec2,_0x52493f['exp']),_0x14746e[_0x27583d(0x113)]({'success':!![],'message':_0x27583d(0x116)});}catch(_0x306782){_0x57109d(_0x306782);}},this[_0x23987f(0x11c)]=async(_0x1cc7c8,_0x532cf0,_0x5be3b2)=>{const _0x1fd085=_0x23987f;try{const _0x5184ec=tokenBlacklistService_1['tokenBlacklistService'][_0x1fd085(0x121)]();_0x532cf0[_0x1fd085(0x113)]({'success':!![],'result':_0x5184ec});}catch(_0x19191b){_0x5be3b2(_0x19191b);}},this['authService']=new authService_1['AuthService']();}}exports[a4_0x1bb6a(0x11d)]=AuthController;