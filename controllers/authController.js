'use strict';function a4_0x1046(_0x79deea,_0x3f0a50){const _0x397997=a4_0x3979();return a4_0x1046=function(_0x10461c,_0x302c15){_0x10461c=_0x10461c-0xf7;let _0x1f01f3=_0x397997[_0x10461c];return _0x1f01f3;},a4_0x1046(_0x79deea,_0x3f0a50);}const a4_0x9d740d=a4_0x1046;(function(_0x477960,_0xc383a2){const _0x1928a0=a4_0x1046,_0x9b271e=_0x477960();while(!![]){try{const _0x265bbf=parseInt(_0x1928a0(0x11d))/0x1*(parseInt(_0x1928a0(0x114))/0x2)+-parseInt(_0x1928a0(0xfc))/0x3*(-parseInt(_0x1928a0(0x10d))/0x4)+-parseInt(_0x1928a0(0xfa))/0x5+parseInt(_0x1928a0(0x11b))/0x6+parseInt(_0x1928a0(0x128))/0x7*(-parseInt(_0x1928a0(0x11c))/0x8)+parseInt(_0x1928a0(0x11e))/0x9*(parseInt(_0x1928a0(0x125))/0xa)+-parseInt(_0x1928a0(0x104))/0xb*(parseInt(_0x1928a0(0x105))/0xc);if(_0x265bbf===_0xc383a2)break;else _0x9b271e['push'](_0x9b271e['shift']());}catch(_0x4079a5){_0x9b271e['push'](_0x9b271e['shift']());}}}(a4_0x3979,0xe3221));var __createBinding=this&&this[a4_0x9d740d(0x129)]||(Object[a4_0x9d740d(0x121)]?function(_0x3e5217,_0x53ac53,_0x28bcbc,_0x1c5527){const _0x338b1a=a4_0x9d740d;if(_0x1c5527===undefined)_0x1c5527=_0x28bcbc;var _0x11854e=Object[_0x338b1a(0x113)](_0x53ac53,_0x28bcbc);(!_0x11854e||(_0x338b1a(0xf9)in _0x11854e?!_0x53ac53[_0x338b1a(0xf7)]:_0x11854e[_0x338b1a(0x11a)]||_0x11854e[_0x338b1a(0x10b)]))&&(_0x11854e={'enumerable':!![],'get':function(){return _0x53ac53[_0x28bcbc];}}),Object['defineProperty'](_0x3e5217,_0x1c5527,_0x11854e);}:function(_0x1c4f81,_0x43b588,_0x505784,_0xe61e29){if(_0xe61e29===undefined)_0xe61e29=_0x505784;_0x1c4f81[_0xe61e29]=_0x43b588[_0x505784];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a4_0x9d740d(0x121)]?function(_0x1228f9,_0x298c3f){const _0x2d166c=a4_0x9d740d;Object[_0x2d166c(0x126)](_0x1228f9,_0x2d166c(0x102),{'enumerable':!![],'value':_0x298c3f});}:function(_0x5a9a89,_0x9fec53){const _0x307a78=a4_0x9d740d;_0x5a9a89[_0x307a78(0x102)]=_0x9fec53;}),__importStar=this&&this['__importStar']||(function(){var _0x21ead8=function(_0x2aa0ca){return _0x21ead8=Object['getOwnPropertyNames']||function(_0x36d09f){const _0x6482e1=a4_0x1046;var _0x783526=[];for(var _0x319696 in _0x36d09f)if(Object[_0x6482e1(0x10a)][_0x6482e1(0x112)][_0x6482e1(0x115)](_0x36d09f,_0x319696))_0x783526[_0x783526[_0x6482e1(0x124)]]=_0x319696;return _0x783526;},_0x21ead8(_0x2aa0ca);};return function(_0x585622){const _0x5ee698=a4_0x1046;if(_0x585622&&_0x585622[_0x5ee698(0xf7)])return _0x585622;var _0x30353b={};if(_0x585622!=null){for(var _0x12fe20=_0x21ead8(_0x585622),_0x442fb3=0x0;_0x442fb3<_0x12fe20['length'];_0x442fb3++)if(_0x12fe20[_0x442fb3]!==_0x5ee698(0x102))__createBinding(_0x30353b,_0x585622,_0x12fe20[_0x442fb3]);}return __setModuleDefault(_0x30353b,_0x585622),_0x30353b;};}());Object[a4_0x9d740d(0x126)](exports,a4_0x9d740d(0xf7),{'value':!![]}),exports[a4_0x9d740d(0xfe)]=void 0x0;const authService_1=require(a4_0x9d740d(0x12a)),tokenBlacklistService_1=require(a4_0x9d740d(0x103)),telegramBotService_1=require(a4_0x9d740d(0x11f));function a4_0x3979(){const _0x2c121c=['body','__esModule','exp','get','2226760eoiUyO','token','126gtPMFi','tokenBlacklistService','AuthController','getBlacklistStats','resolve','username','default','../services/tokenBlacklistService','9449033bNHkLf','24qqZSNo','findUnique','user','unknown','Failed\x20to\x20send\x20failed\x20login\x20notification:','prototype','configurable','remoteAddress','13084OKLxrV','AuthService','blacklistToken','User-Agent','authService','hasOwnProperty','getOwnPropertyDescriptor','925322fyCNgu','call','error','shop','telegramBotService','json','writable','2914338QKHMXc','731992yKPqmr','3FlAlwc','8199WLtonx','../services/telegramBotService','sendLoginNotification','create','getStats','logout','length','17910RSyUOg','defineProperty','login','42xwEAsv','__createBinding','../services/authService','role'];a4_0x3979=function(){return _0x2c121c;};return a4_0x3979();}class AuthController{constructor(){const _0x456693=a4_0x9d740d;this[_0x456693(0x127)]=async(_0x16c6cc,_0x5629c1,_0x252bae)=>{const _0x41709b=_0x456693;try{const _0x4b283b=_0x16c6cc[_0x41709b(0x12c)],_0x421f00=_0x16c6cc['ip']||_0x16c6cc['connection'][_0x41709b(0x10c)]||_0x41709b(0x108),_0x3038aa=_0x16c6cc['get'](_0x41709b(0x110))||'unknown';let _0x5b8c19=![],_0x39165e=null;try{const _0x48bec2=await this[_0x41709b(0x111)][_0x41709b(0x127)](_0x4b283b);_0x5b8c19=!![],_0x48bec2[_0x41709b(0x12b)]===_0x41709b(0x117)&&_0x48bec2[_0x41709b(0x107)]?.['id']&&(_0x39165e=_0x48bec2[_0x41709b(0x107)]['id']),_0x39165e&&await telegramBotService_1[_0x41709b(0x118)][_0x41709b(0x120)](_0x39165e,{'username':_0x4b283b[_0x41709b(0x101)],'ipAddress':_0x421f00,'userAgent':_0x3038aa,'timestamp':new Date(),'success':!![]}),_0x5629c1[_0x41709b(0x119)]({'success':!![],'result':_0x48bec2});}catch(_0x990ddc){try{const _0x645c99=(await Promise[_0x41709b(0x100)]()['then'](()=>__importStar(require('../config/database'))))['default'],_0x4bd61f=await _0x645c99['shop'][_0x41709b(0x106)]({'where':{'username':_0x4b283b[_0x41709b(0x101)]},'select':{'id':!![]}});_0x4bd61f&&await telegramBotService_1[_0x41709b(0x118)][_0x41709b(0x120)](_0x4bd61f['id'],{'username':_0x4b283b[_0x41709b(0x101)],'ipAddress':_0x421f00,'userAgent':_0x3038aa,'timestamp':new Date(),'success':![]});}catch(_0x521ee0){console[_0x41709b(0x116)](_0x41709b(0x109),_0x521ee0);}throw _0x990ddc;}}catch(_0x292cb4){_0x252bae(_0x292cb4);}},this['me']=async(_0x1f5b43,_0x2c32ef,_0x2a900f)=>{const _0x4668dd=_0x456693;try{const _0x442d50=_0x1f5b43[_0x4668dd(0x107)];_0x2c32ef['json']({'success':!![],'result':{'id':_0x442d50?.['id'],'username':_0x442d50?.[_0x4668dd(0x101)],'role':_0x442d50?.[_0x4668dd(0x12b)]}});}catch(_0x4828ab){_0x2a900f(_0x4828ab);}},this[_0x456693(0x123)]=async(_0x34cd25,_0x5ec520,_0x1f6f44)=>{const _0x52c504=_0x456693;try{const _0x205cd8=_0x34cd25[_0x52c504(0xfb)],_0x464456=_0x34cd25[_0x52c504(0x107)];_0x205cd8&&_0x464456?.[_0x52c504(0xf8)]&&tokenBlacklistService_1[_0x52c504(0xfd)][_0x52c504(0x10f)](_0x205cd8,_0x464456['exp']),_0x5ec520[_0x52c504(0x119)]({'success':!![],'message':'Logged\x20out\x20successfully'});}catch(_0x5aca2a){_0x1f6f44(_0x5aca2a);}},this[_0x456693(0xff)]=async(_0x428bcf,_0x1845bf,_0x540816)=>{const _0x961451=_0x456693;try{const _0x362cbb=tokenBlacklistService_1[_0x961451(0xfd)][_0x961451(0x122)]();_0x1845bf['json']({'success':!![],'result':_0x362cbb});}catch(_0x55c0ea){_0x540816(_0x55c0ea);}},this['authService']=new authService_1[(_0x456693(0x10e))]();}}exports[a4_0x9d740d(0xfe)]=AuthController;