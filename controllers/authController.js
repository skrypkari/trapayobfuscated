'use strict';const a4_0x266845=a4_0x415e;(function(_0x2fbe1d,_0x4ef09c){const _0x164dbe=a4_0x415e,_0x4bd105=_0x2fbe1d();while(!![]){try{const _0x482450=-parseInt(_0x164dbe(0xb2))/0x1+-parseInt(_0x164dbe(0xc5))/0x2+parseInt(_0x164dbe(0xcf))/0x3+-parseInt(_0x164dbe(0xc9))/0x4*(parseInt(_0x164dbe(0xb6))/0x5)+-parseInt(_0x164dbe(0xba))/0x6*(-parseInt(_0x164dbe(0xb9))/0x7)+parseInt(_0x164dbe(0xde))/0x8*(-parseInt(_0x164dbe(0xc0))/0x9)+parseInt(_0x164dbe(0xad))/0xa;if(_0x482450===_0x4ef09c)break;else _0x4bd105['push'](_0x4bd105['shift']());}catch(_0x11e8c8){_0x4bd105['push'](_0x4bd105['shift']());}}}(a4_0x139d,0x27ce3));var __createBinding=this&&this['__createBinding']||(Object[a4_0x266845(0xbf)]?function(_0x38d5b6,_0x23a970,_0x74e865,_0x30cb68){const _0x309fd5=a4_0x266845;if(_0x30cb68===undefined)_0x30cb68=_0x74e865;var _0x368c82=Object[_0x309fd5(0xc1)](_0x23a970,_0x74e865);(!_0x368c82||('get'in _0x368c82?!_0x23a970['__esModule']:_0x368c82['writable']||_0x368c82[_0x309fd5(0xb0)]))&&(_0x368c82={'enumerable':!![],'get':function(){return _0x23a970[_0x74e865];}}),Object[_0x309fd5(0xb5)](_0x38d5b6,_0x30cb68,_0x368c82);}:function(_0x41ef36,_0x367fc7,_0x5cfa84,_0x9e2b37){if(_0x9e2b37===undefined)_0x9e2b37=_0x5cfa84;_0x41ef36[_0x9e2b37]=_0x367fc7[_0x5cfa84];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a4_0x266845(0xbf)]?function(_0x3a9056,_0x91eba5){const _0x4dedd4=a4_0x266845;Object[_0x4dedd4(0xb5)](_0x3a9056,_0x4dedd4(0xc3),{'enumerable':!![],'value':_0x91eba5});}:function(_0x2a84e1,_0x592732){const _0x2cc87a=a4_0x266845;_0x2a84e1[_0x2cc87a(0xc3)]=_0x592732;}),__importStar=this&&this[a4_0x266845(0xd4)]||(function(){var _0x503f33=function(_0x308189){const _0x4af406=a4_0x415e;return _0x503f33=Object[_0x4af406(0xbd)]||function(_0x184330){const _0x532bbb=_0x4af406;var _0x48c772=[];for(var _0x49bce0 in _0x184330)if(Object[_0x532bbb(0xc2)][_0x532bbb(0xd6)]['call'](_0x184330,_0x49bce0))_0x48c772[_0x48c772[_0x532bbb(0xae)]]=_0x49bce0;return _0x48c772;},_0x503f33(_0x308189);};return function(_0x25b76d){const _0x521767=a4_0x415e;if(_0x25b76d&&_0x25b76d[_0x521767(0xdc)])return _0x25b76d;var _0x18d5bd={};if(_0x25b76d!=null){for(var _0x344e71=_0x503f33(_0x25b76d),_0x15d59a=0x0;_0x15d59a<_0x344e71[_0x521767(0xae)];_0x15d59a++)if(_0x344e71[_0x15d59a]!==_0x521767(0xc3))__createBinding(_0x18d5bd,_0x25b76d,_0x344e71[_0x15d59a]);}return __setModuleDefault(_0x18d5bd,_0x25b76d),_0x18d5bd;};}());function a4_0x139d(){const _0x37cce0=['findUnique','../services/authService','../services/telegramBotService','token','role','__esModule','resolve','1686112vaCVxg','5608960xdTbMz','length','sendLoginNotification','configurable','username','187050aSjpsi','Logged\x20out\x20successfully','telegramBotService','defineProperty','359705satDAW','json','exp','7hUqyWs','1036902hWWsoz','AuthController','login','getOwnPropertyNames','remoteAddress','create','9OlKONA','getOwnPropertyDescriptor','prototype','default','logout','404966rOGdkd','authService','User-Agent','connection','4vFrGGY','then','Failed\x20to\x20send\x20failed\x20login\x20notification:','getStats','getBlacklistStats','user','304704OPMGwv','tokenBlacklistService','get','AuthService','unknown','__importStar','shop','hasOwnProperty'];a4_0x139d=function(){return _0x37cce0;};return a4_0x139d();}Object[a4_0x266845(0xb5)](exports,'__esModule',{'value':!![]}),exports[a4_0x266845(0xbb)]=void 0x0;const authService_1=require(a4_0x266845(0xd8)),tokenBlacklistService_1=require('../services/tokenBlacklistService'),telegramBotService_1=require(a4_0x266845(0xd9));class AuthController{constructor(){const _0x34f1c5=a4_0x266845;this[_0x34f1c5(0xbc)]=async(_0x3f3c3c,_0x44d9bc,_0x5ec889)=>{const _0x3a0533=_0x34f1c5;try{const _0x2671fe=_0x3f3c3c['body'],_0x4194ac=_0x3f3c3c['ip']||_0x3f3c3c[_0x3a0533(0xc8)][_0x3a0533(0xbe)]||_0x3a0533(0xd3),_0x1ca4e9=_0x3f3c3c[_0x3a0533(0xd1)](_0x3a0533(0xc7))||_0x3a0533(0xd3);let _0x147260=![],_0x1352e9=null;try{const _0x26daf7=await this[_0x3a0533(0xc6)]['login'](_0x2671fe);_0x147260=!![],_0x26daf7[_0x3a0533(0xdb)]===_0x3a0533(0xd5)&&_0x26daf7[_0x3a0533(0xce)]?.['id']&&(_0x1352e9=_0x26daf7[_0x3a0533(0xce)]['id']),_0x1352e9&&await telegramBotService_1['telegramBotService'][_0x3a0533(0xaf)](_0x1352e9,{'username':_0x2671fe[_0x3a0533(0xb1)],'ipAddress':_0x4194ac,'userAgent':_0x1ca4e9,'timestamp':new Date(),'success':!![]}),_0x44d9bc[_0x3a0533(0xb7)]({'success':!![],'result':_0x26daf7});}catch(_0xebcdda){try{const _0x46ae97=(await Promise[_0x3a0533(0xdd)]()[_0x3a0533(0xca)](()=>__importStar(require('../config/database'))))[_0x3a0533(0xc3)],_0xe799c9=await _0x46ae97[_0x3a0533(0xd5)][_0x3a0533(0xd7)]({'where':{'username':_0x2671fe[_0x3a0533(0xb1)]},'select':{'id':!![]}});_0xe799c9&&await telegramBotService_1[_0x3a0533(0xb4)][_0x3a0533(0xaf)](_0xe799c9['id'],{'username':_0x2671fe[_0x3a0533(0xb1)],'ipAddress':_0x4194ac,'userAgent':_0x1ca4e9,'timestamp':new Date(),'success':![]});}catch(_0x1cddc6){console['error'](_0x3a0533(0xcb),_0x1cddc6);}throw _0xebcdda;}}catch(_0x17e12e){_0x5ec889(_0x17e12e);}},this['me']=async(_0x1eec47,_0x182ca4,_0x59478b)=>{const _0x2e658e=_0x34f1c5;try{const _0x114070=_0x1eec47[_0x2e658e(0xce)];_0x182ca4[_0x2e658e(0xb7)]({'success':!![],'result':{'id':_0x114070?.['id'],'username':_0x114070?.[_0x2e658e(0xb1)],'role':_0x114070?.[_0x2e658e(0xdb)]}});}catch(_0x1be2b4){_0x59478b(_0x1be2b4);}},this[_0x34f1c5(0xc4)]=async(_0x34784c,_0x3daefd,_0x117fe4)=>{const _0x1d41c0=_0x34f1c5;try{const _0x4d31bf=_0x34784c[_0x1d41c0(0xda)],_0x309726=_0x34784c[_0x1d41c0(0xce)];_0x4d31bf&&_0x309726?.[_0x1d41c0(0xb8)]&&tokenBlacklistService_1[_0x1d41c0(0xd0)]['blacklistToken'](_0x4d31bf,_0x309726[_0x1d41c0(0xb8)]),_0x3daefd['json']({'success':!![],'message':_0x1d41c0(0xb3)});}catch(_0x4e5629){_0x117fe4(_0x4e5629);}},this[_0x34f1c5(0xcd)]=async(_0x50749a,_0xe23ac1,_0x214f65)=>{const _0x441108=_0x34f1c5;try{const _0x5f52ea=tokenBlacklistService_1[_0x441108(0xd0)][_0x441108(0xcc)]();_0xe23ac1[_0x441108(0xb7)]({'success':!![],'result':_0x5f52ea});}catch(_0x3c1694){_0x214f65(_0x3c1694);}},this[_0x34f1c5(0xc6)]=new authService_1[(_0x34f1c5(0xd2))]();}}function a4_0x415e(_0x46986c,_0x4a6c51){const _0x139d89=a4_0x139d();return a4_0x415e=function(_0x415ee0,_0xb45bdc){_0x415ee0=_0x415ee0-0xad;let _0x2ca0a3=_0x139d89[_0x415ee0];return _0x2ca0a3;},a4_0x415e(_0x46986c,_0x4a6c51);}exports[a4_0x266845(0xbb)]=AuthController;