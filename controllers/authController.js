'use strict';const a4_0x3d404a=a4_0x4d77;(function(_0x2e6ec2,_0x5290e5){const _0x28657=a4_0x4d77,_0x3754f9=_0x2e6ec2();while(!![]){try{const _0xed4677=parseInt(_0x28657(0x113))/0x1+parseInt(_0x28657(0x122))/0x2+parseInt(_0x28657(0xfe))/0x3*(-parseInt(_0x28657(0x10f))/0x4)+-parseInt(_0x28657(0xff))/0x5*(parseInt(_0x28657(0x124))/0x6)+-parseInt(_0x28657(0x126))/0x7+-parseInt(_0x28657(0x111))/0x8*(-parseInt(_0x28657(0x11d))/0x9)+-parseInt(_0x28657(0x11c))/0xa*(-parseInt(_0x28657(0x10b))/0xb);if(_0xed4677===_0x5290e5)break;else _0x3754f9['push'](_0x3754f9['shift']());}catch(_0x501842){_0x3754f9['push'](_0x3754f9['shift']());}}}(a4_0x10ce,0x79ade));function a4_0x10ce(){const _0x1827cf=['username','210OzRUrz','1188jHKRbH','create','remoteAddress','sendLoginNotification','findUnique','1251734cLGzkh','getBlacklistStats','324378ngyoPi','connection','4251933ktmsnP','__esModule','__importStar','then','role','resolve','../services/tokenBlacklistService','getOwnPropertyDescriptor','user','User-Agent','login','defineProperty','24xTaCFi','70tjtkoF','blacklistToken','../config/database','hasOwnProperty','unknown','get','logout','call','shop','getStats','Logged\x20out\x20successfully','default','351483Ivmxxr','error','AuthController','length','15920cSyFXk','__setModuleDefault','22096ZtZGEE','token','233075EZsXyI','exp','tokenBlacklistService','AuthService','telegramBotService','authService','Failed\x20to\x20send\x20failed\x20login\x20notification:','json'];a4_0x10ce=function(){return _0x1827cf;};return a4_0x10ce();}var __createBinding=this&&this['__createBinding']||(Object[a4_0x3d404a(0x11e)]?function(_0x141db7,_0x27f7a2,_0xa76f1e,_0x1bd488){const _0x54bf15=a4_0x3d404a;if(_0x1bd488===undefined)_0x1bd488=_0xa76f1e;var _0x5c22cc=Object[_0x54bf15(0x12d)](_0x27f7a2,_0xa76f1e);(!_0x5c22cc||(_0x54bf15(0x104)in _0x5c22cc?!_0x27f7a2[_0x54bf15(0x127)]:_0x5c22cc['writable']||_0x5c22cc['configurable']))&&(_0x5c22cc={'enumerable':!![],'get':function(){return _0x27f7a2[_0xa76f1e];}}),Object['defineProperty'](_0x141db7,_0x1bd488,_0x5c22cc);}:function(_0xf8460f,_0x22bb8f,_0x1b5c1f,_0x1d8499){if(_0x1d8499===undefined)_0x1d8499=_0x1b5c1f;_0xf8460f[_0x1d8499]=_0x22bb8f[_0x1b5c1f];}),__setModuleDefault=this&&this[a4_0x3d404a(0x110)]||(Object[a4_0x3d404a(0x11e)]?function(_0x4f3271,_0x5495f7){const _0x1d5b5=a4_0x3d404a;Object[_0x1d5b5(0x131)](_0x4f3271,_0x1d5b5(0x10a),{'enumerable':!![],'value':_0x5495f7});}:function(_0x948d2,_0x1ee2bb){const _0x20d574=a4_0x3d404a;_0x948d2[_0x20d574(0x10a)]=_0x1ee2bb;}),__importStar=this&&this[a4_0x3d404a(0x128)]||(function(){var _0x52b4c4=function(_0x310ade){return _0x52b4c4=Object['getOwnPropertyNames']||function(_0x19c001){const _0x23551c=a4_0x4d77;var _0x55a0b9=[];for(var _0x15372b in _0x19c001)if(Object['prototype'][_0x23551c(0x102)][_0x23551c(0x106)](_0x19c001,_0x15372b))_0x55a0b9[_0x55a0b9['length']]=_0x15372b;return _0x55a0b9;},_0x52b4c4(_0x310ade);};return function(_0x38812e){const _0x3128b3=a4_0x4d77;if(_0x38812e&&_0x38812e[_0x3128b3(0x127)])return _0x38812e;var _0x300d85={};if(_0x38812e!=null){for(var _0xa5f397=_0x52b4c4(_0x38812e),_0x1ec27e=0x0;_0x1ec27e<_0xa5f397[_0x3128b3(0x10e)];_0x1ec27e++)if(_0xa5f397[_0x1ec27e]!=='default')__createBinding(_0x300d85,_0x38812e,_0xa5f397[_0x1ec27e]);}return __setModuleDefault(_0x300d85,_0x38812e),_0x300d85;};}());Object[a4_0x3d404a(0x131)](exports,a4_0x3d404a(0x127),{'value':!![]}),exports['AuthController']=void 0x0;const authService_1=require('../services/authService'),tokenBlacklistService_1=require(a4_0x3d404a(0x12c)),telegramBotService_1=require('../services/telegramBotService');class AuthController{constructor(){const _0x30d47c=a4_0x3d404a;this[_0x30d47c(0x130)]=async(_0xd0facd,_0x2a683e,_0x391d4e)=>{const _0xfddd80=_0x30d47c;try{const _0x2779a9=_0xd0facd['body'],_0x5cba63=_0xd0facd['ip']||_0xd0facd[_0xfddd80(0x125)][_0xfddd80(0x11f)]||'unknown',_0x5207cd=_0xd0facd[_0xfddd80(0x104)](_0xfddd80(0x12f))||_0xfddd80(0x103);let _0x3dac71=![],_0x10ae9c=null;try{const _0x52d2d0=await this['authService'][_0xfddd80(0x130)](_0x2779a9);_0x3dac71=!![],_0x52d2d0[_0xfddd80(0x12a)]===_0xfddd80(0x107)&&_0x52d2d0['user']?.['id']&&(_0x10ae9c=_0x52d2d0[_0xfddd80(0x12e)]['id']),_0x10ae9c&&await telegramBotService_1[_0xfddd80(0x117)][_0xfddd80(0x120)](_0x10ae9c,{'username':_0x2779a9[_0xfddd80(0x11b)],'ipAddress':_0x5cba63,'userAgent':_0x5207cd,'timestamp':new Date(),'success':!![]}),_0x2a683e[_0xfddd80(0x11a)]({'success':!![],'result':_0x52d2d0});}catch(_0x345078){try{const _0xac9b19=(await Promise[_0xfddd80(0x12b)]()[_0xfddd80(0x129)](()=>__importStar(require(_0xfddd80(0x101)))))[_0xfddd80(0x10a)],_0x3b4919=await _0xac9b19[_0xfddd80(0x107)][_0xfddd80(0x121)]({'where':{'username':_0x2779a9['username']},'select':{'id':!![]}});_0x3b4919&&await telegramBotService_1[_0xfddd80(0x117)][_0xfddd80(0x120)](_0x3b4919['id'],{'username':_0x2779a9[_0xfddd80(0x11b)],'ipAddress':_0x5cba63,'userAgent':_0x5207cd,'timestamp':new Date(),'success':![]});}catch(_0x13af17){console[_0xfddd80(0x10c)](_0xfddd80(0x119),_0x13af17);}throw _0x345078;}}catch(_0x7b0942){_0x391d4e(_0x7b0942);}},this['me']=async(_0x465886,_0x2d9a30,_0x2ab5f2)=>{const _0x29822e=_0x30d47c;try{const _0x4133c9=_0x465886[_0x29822e(0x12e)];_0x2d9a30['json']({'success':!![],'result':{'id':_0x4133c9?.['id'],'username':_0x4133c9?.[_0x29822e(0x11b)],'role':_0x4133c9?.[_0x29822e(0x12a)]}});}catch(_0xab3ff5){_0x2ab5f2(_0xab3ff5);}},this[_0x30d47c(0x105)]=async(_0xe3e33b,_0x32adce,_0x292fff)=>{const _0x97d197=_0x30d47c;try{const _0x4a150e=_0xe3e33b[_0x97d197(0x112)],_0x20f515=_0xe3e33b[_0x97d197(0x12e)];_0x4a150e&&_0x20f515?.[_0x97d197(0x114)]&&tokenBlacklistService_1['tokenBlacklistService'][_0x97d197(0x100)](_0x4a150e,_0x20f515[_0x97d197(0x114)]),_0x32adce[_0x97d197(0x11a)]({'success':!![],'message':_0x97d197(0x109)});}catch(_0x2b3edb){_0x292fff(_0x2b3edb);}},this[_0x30d47c(0x123)]=async(_0x38dd83,_0x163cae,_0x32bbce)=>{const _0x4e2cd4=_0x30d47c;try{const _0x3544bb=tokenBlacklistService_1[_0x4e2cd4(0x115)][_0x4e2cd4(0x108)]();_0x163cae[_0x4e2cd4(0x11a)]({'success':!![],'result':_0x3544bb});}catch(_0x217370){_0x32bbce(_0x217370);}},this[_0x30d47c(0x118)]=new authService_1[(_0x30d47c(0x116))]();}}function a4_0x4d77(_0x42dad8,_0x54aea0){const _0x10ce0a=a4_0x10ce();return a4_0x4d77=function(_0x4d7744,_0x3cc7d4){_0x4d7744=_0x4d7744-0xfe;let _0xbe38d1=_0x10ce0a[_0x4d7744];return _0xbe38d1;},a4_0x4d77(_0x42dad8,_0x54aea0);}exports[a4_0x3d404a(0x10d)]=AuthController;