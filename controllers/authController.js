'use strict';const a4_0x2dc494=a4_0x4200;function a4_0x5197(){const _0x7f9e73=['get','create','unknown','../services/tokenBlacklistService','username','AuthController','role','4734016xCtgwb','../services/authService','resolve','__esModule','27907DHyISk','token','logout','default','telegramBotService','user','User-Agent','findUnique','connection','tokenBlacklistService','AuthService','getOwnPropertyNames','login','1262188AIyALq','hasOwnProperty','exp','../services/telegramBotService','getStats','__createBinding','configurable','writable','Logged\x20out\x20successfully','Failed\x20to\x20send\x20failed\x20login\x20notification:','then','blacklistToken','__setModuleDefault','4410gVJpsV','remoteAddress','json','defineProperty','../config/database','6820722dZchOf','136866iZwLXn','shop','length','authService','call','12ocSCge','__importStar','1519405nRFmFr','getBlacklistStats','sendLoginNotification','1kHbpPB','3144519npdjHF','prototype','18PxtiRU','body'];a4_0x5197=function(){return _0x7f9e73;};return a4_0x5197();}(function(_0x13045b,_0x22df56){const _0x43f0a2=a4_0x4200,_0x3911b1=_0x13045b();while(!![]){try{const _0x522a59=-parseInt(_0x43f0a2(0x104))/0x1*(-parseInt(_0x43f0a2(0xe7))/0x2)+parseInt(_0x43f0a2(0xfa))/0x3*(-parseInt(_0x43f0a2(0xff))/0x4)+-parseInt(_0x43f0a2(0x101))/0x5*(-parseInt(_0x43f0a2(0x107))/0x6)+parseInt(_0x43f0a2(0x105))/0x7+parseInt(_0x43f0a2(0x110))/0x8+-parseInt(_0x43f0a2(0xf9))/0x9+-parseInt(_0x43f0a2(0xf4))/0xa*(parseInt(_0x43f0a2(0x114))/0xb);if(_0x522a59===_0x22df56)break;else _0x3911b1['push'](_0x3911b1['shift']());}catch(_0x100224){_0x3911b1['push'](_0x3911b1['shift']());}}}(a4_0x5197,0x8b335));function a4_0x4200(_0x155e7e,_0x2155c2){const _0x5197a6=a4_0x5197();return a4_0x4200=function(_0x4200e3,_0x2f4c06){_0x4200e3=_0x4200e3-0xde;let _0xd4b392=_0x5197a6[_0x4200e3];return _0xd4b392;},a4_0x4200(_0x155e7e,_0x2155c2);}var __createBinding=this&&this[a4_0x2dc494(0xec)]||(Object[a4_0x2dc494(0x10a)]?function(_0x295323,_0x928114,_0x3359d1,_0xdd5a43){const _0x270382=a4_0x2dc494;if(_0xdd5a43===undefined)_0xdd5a43=_0x3359d1;var _0x60727f=Object['getOwnPropertyDescriptor'](_0x928114,_0x3359d1);(!_0x60727f||(_0x270382(0x109)in _0x60727f?!_0x928114['__esModule']:_0x60727f[_0x270382(0xee)]||_0x60727f[_0x270382(0xed)]))&&(_0x60727f={'enumerable':!![],'get':function(){return _0x928114[_0x3359d1];}}),Object[_0x270382(0xf7)](_0x295323,_0xdd5a43,_0x60727f);}:function(_0xe0fa9d,_0x195e97,_0x1cefe9,_0x2c8616){if(_0x2c8616===undefined)_0x2c8616=_0x1cefe9;_0xe0fa9d[_0x2c8616]=_0x195e97[_0x1cefe9];}),__setModuleDefault=this&&this[a4_0x2dc494(0xf3)]||(Object[a4_0x2dc494(0x10a)]?function(_0x307589,_0x243e6e){const _0x349706=a4_0x2dc494;Object[_0x349706(0xf7)](_0x307589,_0x349706(0x117),{'enumerable':!![],'value':_0x243e6e});}:function(_0x367ea6,_0xd8a29d){const _0xa111e5=a4_0x2dc494;_0x367ea6[_0xa111e5(0x117)]=_0xd8a29d;}),__importStar=this&&this[a4_0x2dc494(0x100)]||(function(){var _0x1857e6=function(_0x37c1a4){const _0x1b2f99=a4_0x4200;return _0x1857e6=Object[_0x1b2f99(0xe5)]||function(_0x5dce16){const _0x424f26=_0x1b2f99;var _0x5d214d=[];for(var _0x174460 in _0x5dce16)if(Object[_0x424f26(0x106)][_0x424f26(0xe8)][_0x424f26(0xfe)](_0x5dce16,_0x174460))_0x5d214d[_0x5d214d['length']]=_0x174460;return _0x5d214d;},_0x1857e6(_0x37c1a4);};return function(_0x23f88b){const _0x255718=a4_0x4200;if(_0x23f88b&&_0x23f88b[_0x255718(0x113)])return _0x23f88b;var _0x4a7a99={};if(_0x23f88b!=null){for(var _0x346841=_0x1857e6(_0x23f88b),_0x2423ad=0x0;_0x2423ad<_0x346841[_0x255718(0xfc)];_0x2423ad++)if(_0x346841[_0x2423ad]!==_0x255718(0x117))__createBinding(_0x4a7a99,_0x23f88b,_0x346841[_0x2423ad]);}return __setModuleDefault(_0x4a7a99,_0x23f88b),_0x4a7a99;};}());Object[a4_0x2dc494(0xf7)](exports,a4_0x2dc494(0x113),{'value':!![]}),exports[a4_0x2dc494(0x10e)]=void 0x0;const authService_1=require(a4_0x2dc494(0x111)),tokenBlacklistService_1=require(a4_0x2dc494(0x10c)),telegramBotService_1=require(a4_0x2dc494(0xea));class AuthController{constructor(){const _0x35ec31=a4_0x2dc494;this['login']=async(_0x319aee,_0xa385c6,_0x44f5fc)=>{const _0x292632=a4_0x4200;try{const _0x4b6372=_0x319aee[_0x292632(0x108)],_0x2a3b58=_0x319aee['ip']||_0x319aee[_0x292632(0xe2)][_0x292632(0xf5)]||_0x292632(0x10b),_0x53f56a=_0x319aee[_0x292632(0x109)](_0x292632(0xe0))||'unknown';let _0x3a371b=![],_0x2a81e7=null;try{const _0x46f6a5=await this[_0x292632(0xfd)][_0x292632(0xe6)](_0x4b6372);_0x3a371b=!![],_0x46f6a5[_0x292632(0x10f)]===_0x292632(0xfb)&&_0x46f6a5['user']?.['id']&&(_0x2a81e7=_0x46f6a5[_0x292632(0xdf)]['id']),_0x2a81e7&&await telegramBotService_1['telegramBotService'][_0x292632(0x103)](_0x2a81e7,{'username':_0x4b6372[_0x292632(0x10d)],'ipAddress':_0x2a3b58,'userAgent':_0x53f56a,'timestamp':new Date(),'success':!![]}),_0xa385c6[_0x292632(0xf6)]({'success':!![],'result':_0x46f6a5});}catch(_0xa4b66e){try{const _0x5e1e20=(await Promise[_0x292632(0x112)]()[_0x292632(0xf1)](()=>__importStar(require(_0x292632(0xf8)))))[_0x292632(0x117)],_0x215c39=await _0x5e1e20[_0x292632(0xfb)][_0x292632(0xe1)]({'where':{'username':_0x4b6372[_0x292632(0x10d)]},'select':{'id':!![]}});_0x215c39&&await telegramBotService_1[_0x292632(0xde)]['sendLoginNotification'](_0x215c39['id'],{'username':_0x4b6372[_0x292632(0x10d)],'ipAddress':_0x2a3b58,'userAgent':_0x53f56a,'timestamp':new Date(),'success':![]});}catch(_0x2a41a5){console['error'](_0x292632(0xf0),_0x2a41a5);}throw _0xa4b66e;}}catch(_0x1b1b46){_0x44f5fc(_0x1b1b46);}},this['me']=async(_0x3bb7d2,_0x2c51c0,_0x2be413)=>{const _0x2419e1=a4_0x4200;try{const _0xfdb10f=_0x3bb7d2[_0x2419e1(0xdf)];_0x2c51c0[_0x2419e1(0xf6)]({'success':!![],'result':{'id':_0xfdb10f?.['id'],'username':_0xfdb10f?.['username'],'role':_0xfdb10f?.['role']}});}catch(_0x4bf3e4){_0x2be413(_0x4bf3e4);}},this[_0x35ec31(0x116)]=async(_0x4042b7,_0x525ad3,_0x20a6c2)=>{const _0x4fdfcb=_0x35ec31;try{const _0x6b3ceb=_0x4042b7[_0x4fdfcb(0x115)],_0x33e7e9=_0x4042b7['user'];_0x6b3ceb&&_0x33e7e9?.[_0x4fdfcb(0xe9)]&&tokenBlacklistService_1['tokenBlacklistService'][_0x4fdfcb(0xf2)](_0x6b3ceb,_0x33e7e9[_0x4fdfcb(0xe9)]),_0x525ad3[_0x4fdfcb(0xf6)]({'success':!![],'message':_0x4fdfcb(0xef)});}catch(_0x299301){_0x20a6c2(_0x299301);}},this[_0x35ec31(0x102)]=async(_0x1b351e,_0x16fe58,_0x2d05a5)=>{const _0x164082=_0x35ec31;try{const _0x1363a6=tokenBlacklistService_1[_0x164082(0xe3)][_0x164082(0xeb)]();_0x16fe58['json']({'success':!![],'result':_0x1363a6});}catch(_0x549e67){_0x2d05a5(_0x549e67);}},this['authService']=new authService_1[(_0x35ec31(0xe4))]();}}exports['AuthController']=AuthController;