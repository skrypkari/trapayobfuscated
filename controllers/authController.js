'use strict';const a4_0x2d1bee=a4_0xe300;(function(_0x3a10a7,_0x3583d7){const _0x592f71=a4_0xe300,_0x51af59=_0x3a10a7();while(!![]){try{const _0x5ca5f0=parseInt(_0x592f71(0x157))/0x1+parseInt(_0x592f71(0x14c))/0x2*(parseInt(_0x592f71(0x165))/0x3)+-parseInt(_0x592f71(0x167))/0x4+parseInt(_0x592f71(0x14e))/0x5*(-parseInt(_0x592f71(0x139))/0x6)+-parseInt(_0x592f71(0x166))/0x7*(-parseInt(_0x592f71(0x140))/0x8)+parseInt(_0x592f71(0x159))/0x9*(parseInt(_0x592f71(0x143))/0xa)+-parseInt(_0x592f71(0x160))/0xb;if(_0x5ca5f0===_0x3583d7)break;else _0x51af59['push'](_0x51af59['shift']());}catch(_0x267e1f){_0x51af59['push'](_0x51af59['shift']());}}}(a4_0x4c8d,0xc8edd));function a4_0xe300(_0x3d9d4d,_0x33c56f){const _0x4c8df7=a4_0x4c8d();return a4_0xe300=function(_0xe30065,_0x3d51d2){_0xe30065=_0xe30065-0x138;let _0x80c263=_0x4c8df7[_0xe30065];return _0x80c263;},a4_0xe300(_0x3d9d4d,_0x33c56f);}var __createBinding=this&&this[a4_0x2d1bee(0x155)]||(Object[a4_0x2d1bee(0x145)]?function(_0x51a75b,_0x5ce61c,_0x552959,_0x494120){const _0x6e9e80=a4_0x2d1bee;if(_0x494120===undefined)_0x494120=_0x552959;var _0x56cddc=Object[_0x6e9e80(0x13a)](_0x5ce61c,_0x552959);(!_0x56cddc||(_0x6e9e80(0x154)in _0x56cddc?!_0x5ce61c[_0x6e9e80(0x153)]:_0x56cddc[_0x6e9e80(0x14a)]||_0x56cddc['configurable']))&&(_0x56cddc={'enumerable':!![],'get':function(){return _0x5ce61c[_0x552959];}}),Object[_0x6e9e80(0x15a)](_0x51a75b,_0x494120,_0x56cddc);}:function(_0x14ea57,_0xaf326f,_0xdd12d7,_0x38fc3f){if(_0x38fc3f===undefined)_0x38fc3f=_0xdd12d7;_0x14ea57[_0x38fc3f]=_0xaf326f[_0xdd12d7];}),__setModuleDefault=this&&this[a4_0x2d1bee(0x13d)]||(Object[a4_0x2d1bee(0x145)]?function(_0x4c4e3e,_0x10d0fa){const _0x559cd3=a4_0x2d1bee;Object[_0x559cd3(0x15a)](_0x4c4e3e,_0x559cd3(0x162),{'enumerable':!![],'value':_0x10d0fa});}:function(_0x437d46,_0x50764c){const _0x2eb334=a4_0x2d1bee;_0x437d46[_0x2eb334(0x162)]=_0x50764c;}),__importStar=this&&this[a4_0x2d1bee(0x142)]||(function(){var _0x260250=function(_0x3f940d){const _0xbf69ec=a4_0xe300;return _0x260250=Object[_0xbf69ec(0x15d)]||function(_0x5d5fd8){const _0x4f57dc=_0xbf69ec;var _0x5672c9=[];for(var _0xe579e0 in _0x5d5fd8)if(Object[_0x4f57dc(0x15c)][_0x4f57dc(0x163)][_0x4f57dc(0x15f)](_0x5d5fd8,_0xe579e0))_0x5672c9[_0x5672c9['length']]=_0xe579e0;return _0x5672c9;},_0x260250(_0x3f940d);};return function(_0xfdb689){const _0x288b2b=a4_0xe300;if(_0xfdb689&&_0xfdb689['__esModule'])return _0xfdb689;var _0x1ddb47={};if(_0xfdb689!=null){for(var _0x3f5f70=_0x260250(_0xfdb689),_0x4b7610=0x0;_0x4b7610<_0x3f5f70['length'];_0x4b7610++)if(_0x3f5f70[_0x4b7610]!==_0x288b2b(0x162))__createBinding(_0x1ddb47,_0xfdb689,_0x3f5f70[_0x4b7610]);}return __setModuleDefault(_0x1ddb47,_0xfdb689),_0x1ddb47;};}());Object[a4_0x2d1bee(0x15a)](exports,a4_0x2d1bee(0x153),{'value':!![]}),exports['AuthController']=void 0x0;function a4_0x4c8d(){const _0x15fb89=['860560gPwODc','User-Agent','Failed\x20to\x20send\x20failed\x20login\x20notification:','shop','12pyfKZs','getOwnPropertyDescriptor','../config/database','tokenBlacklistService','__setModuleDefault','remoteAddress','error','2676408Ttzrep','logout','__importStar','14991670WVoHNz','unknown','create','resolve','role','username','user','writable','login','120170KwfGnv','sendLoginNotification','573315ISwahD','connection','findUnique','exp','json','__esModule','get','__createBinding','then','365193cVRPHg','body','9GBwgZc','defineProperty','blacklistToken','prototype','getOwnPropertyNames','telegramBotService','call','15533320pkPucN','../services/tokenBlacklistService','default','hasOwnProperty','../services/telegramBotService','24CxmsAl','7VxJgVr'];a4_0x4c8d=function(){return _0x15fb89;};return a4_0x4c8d();}const authService_1=require('../services/authService'),tokenBlacklistService_1=require(a4_0x2d1bee(0x161)),telegramBotService_1=require(a4_0x2d1bee(0x164));class AuthController{constructor(){const _0x6d2e83=a4_0x2d1bee;this[_0x6d2e83(0x14b)]=async(_0x375514,_0x3a183a,_0x533ea2)=>{const _0x4ab7c8=_0x6d2e83;try{const _0x188def=_0x375514[_0x4ab7c8(0x158)],_0x347469=_0x375514['ip']||_0x375514[_0x4ab7c8(0x14f)][_0x4ab7c8(0x13e)]||_0x4ab7c8(0x144),_0x3f5e2f=_0x375514[_0x4ab7c8(0x154)](_0x4ab7c8(0x168))||'unknown';let _0x274515=![],_0x36cee3=null;try{const _0x5a48ed=await this['authService'][_0x4ab7c8(0x14b)](_0x188def);_0x274515=!![],_0x5a48ed[_0x4ab7c8(0x147)]===_0x4ab7c8(0x138)&&_0x5a48ed[_0x4ab7c8(0x149)]?.['id']&&(_0x36cee3=_0x5a48ed[_0x4ab7c8(0x149)]['id']),_0x36cee3&&await telegramBotService_1[_0x4ab7c8(0x15e)][_0x4ab7c8(0x14d)](_0x36cee3,{'username':_0x188def[_0x4ab7c8(0x148)],'ipAddress':_0x347469,'userAgent':_0x3f5e2f,'timestamp':new Date(),'success':!![]}),_0x3a183a[_0x4ab7c8(0x152)]({'success':!![],'result':_0x5a48ed});}catch(_0x1a3ab2){try{const _0x4c2eee=(await Promise[_0x4ab7c8(0x146)]()[_0x4ab7c8(0x156)](()=>__importStar(require(_0x4ab7c8(0x13b)))))[_0x4ab7c8(0x162)],_0x3a92aa=await _0x4c2eee[_0x4ab7c8(0x138)][_0x4ab7c8(0x150)]({'where':{'username':_0x188def[_0x4ab7c8(0x148)]},'select':{'id':!![]}});_0x3a92aa&&await telegramBotService_1[_0x4ab7c8(0x15e)][_0x4ab7c8(0x14d)](_0x3a92aa['id'],{'username':_0x188def[_0x4ab7c8(0x148)],'ipAddress':_0x347469,'userAgent':_0x3f5e2f,'timestamp':new Date(),'success':![]});}catch(_0x50a0cf){console[_0x4ab7c8(0x13f)](_0x4ab7c8(0x169),_0x50a0cf);}throw _0x1a3ab2;}}catch(_0x496949){_0x533ea2(_0x496949);}},this['me']=async(_0xfaa6e5,_0x1628d2,_0x3d3b3e)=>{const _0x54583b=_0x6d2e83;try{const _0x137ccb=_0xfaa6e5[_0x54583b(0x149)];_0x1628d2['json']({'success':!![],'result':{'id':_0x137ccb?.['id'],'username':_0x137ccb?.[_0x54583b(0x148)],'role':_0x137ccb?.['role']}});}catch(_0x10a1ed){_0x3d3b3e(_0x10a1ed);}},this[_0x6d2e83(0x141)]=async(_0x3e4c17,_0x59ea33,_0x216b51)=>{const _0x2cdc3d=_0x6d2e83;try{const _0x48bacd=_0x3e4c17['token'],_0x1d79e0=_0x3e4c17[_0x2cdc3d(0x149)];_0x48bacd&&_0x1d79e0?.['exp']&&tokenBlacklistService_1[_0x2cdc3d(0x13c)][_0x2cdc3d(0x15b)](_0x48bacd,_0x1d79e0[_0x2cdc3d(0x151)]),_0x59ea33[_0x2cdc3d(0x152)]({'success':!![],'message':'Logged\x20out\x20successfully'});}catch(_0x3989f1){_0x216b51(_0x3989f1);}},this['getBlacklistStats']=async(_0x11ec03,_0x4b18f6,_0x14a413)=>{const _0x411cc8=_0x6d2e83;try{const _0x57f399=tokenBlacklistService_1[_0x411cc8(0x13c)]['getStats']();_0x4b18f6[_0x411cc8(0x152)]({'success':!![],'result':_0x57f399});}catch(_0x173911){_0x14a413(_0x173911);}},this['authService']=new authService_1['AuthService']();}}exports['AuthController']=AuthController;