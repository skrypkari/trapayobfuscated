'use strict';function a4_0x307e(){const _0x4239eb=['defineProperty','default','remoteAddress','exp','blacklistToken','getOwnPropertyNames','8KwVQtp','error','84866MFUEAG','2821413qmISFt','then','authService','writable','../services/authService','json','user','Logged\x20out\x20successfully','role','configurable','User-Agent','logout','username','get','../config/database','tokenBlacklistService','144PPvpSj','shop','4661466PhGbTW','AuthController','1305470RAIAVt','4AvHDEG','__importStar','token','../services/tokenBlacklistService','login','__createBinding','__setModuleDefault','getStats','__esModule','sendLoginNotification','findUnique','resolve','length','543904ArBrov','Failed\x20to\x20send\x20failed\x20login\x20notification:','create','telegramBotService','body','unknown','../services/telegramBotService','2026615OzVujH','1417262lhiYzN'];a4_0x307e=function(){return _0x4239eb;};return a4_0x307e();}const a4_0x1eef84=a4_0x40d3;(function(_0x4c8cc4,_0x43182d){const _0x5ddade=a4_0x40d3,_0x1faa0a=_0x4c8cc4();while(!![]){try{const _0x3e9d96=-parseInt(_0x5ddade(0x14c))/0x1*(-parseInt(_0x5ddade(0x14e))/0x2)+-parseInt(_0x5ddade(0x14f))/0x3+parseInt(_0x5ddade(0x164))/0x4*(-parseInt(_0x5ddade(0x144))/0x5)+-parseInt(_0x5ddade(0x161))/0x6+parseInt(_0x5ddade(0x145))/0x7+parseInt(_0x5ddade(0x13d))/0x8+parseInt(_0x5ddade(0x15f))/0x9*(parseInt(_0x5ddade(0x163))/0xa);if(_0x3e9d96===_0x43182d)break;else _0x1faa0a['push'](_0x1faa0a['shift']());}catch(_0x170dc4){_0x1faa0a['push'](_0x1faa0a['shift']());}}}(a4_0x307e,0x8c9dd));function a4_0x40d3(_0x4129d8,_0x3e8513){const _0x307ebf=a4_0x307e();return a4_0x40d3=function(_0x40d375,_0x7984b2){_0x40d375=_0x40d375-0x132;let _0x4a3d20=_0x307ebf[_0x40d375];return _0x4a3d20;},a4_0x40d3(_0x4129d8,_0x3e8513);}var __createBinding=this&&this[a4_0x1eef84(0x135)]||(Object[a4_0x1eef84(0x13f)]?function(_0x15b9d6,_0x3dc405,_0x55c3b1,_0x339cdd){const _0x57d4c5=a4_0x1eef84;if(_0x339cdd===undefined)_0x339cdd=_0x55c3b1;var _0x1acb2e=Object['getOwnPropertyDescriptor'](_0x3dc405,_0x55c3b1);(!_0x1acb2e||(_0x57d4c5(0x15c)in _0x1acb2e?!_0x3dc405[_0x57d4c5(0x138)]:_0x1acb2e[_0x57d4c5(0x152)]||_0x1acb2e[_0x57d4c5(0x158)]))&&(_0x1acb2e={'enumerable':!![],'get':function(){return _0x3dc405[_0x55c3b1];}}),Object[_0x57d4c5(0x146)](_0x15b9d6,_0x339cdd,_0x1acb2e);}:function(_0x1dd2b2,_0x38a060,_0x43ff27,_0x193b0e){if(_0x193b0e===undefined)_0x193b0e=_0x43ff27;_0x1dd2b2[_0x193b0e]=_0x38a060[_0x43ff27];}),__setModuleDefault=this&&this[a4_0x1eef84(0x136)]||(Object[a4_0x1eef84(0x13f)]?function(_0x46ad9a,_0xec39a9){const _0x4e7247=a4_0x1eef84;Object['defineProperty'](_0x46ad9a,_0x4e7247(0x147),{'enumerable':!![],'value':_0xec39a9});}:function(_0x23d466,_0x2d3359){const _0x1bef34=a4_0x1eef84;_0x23d466[_0x1bef34(0x147)]=_0x2d3359;}),__importStar=this&&this[a4_0x1eef84(0x165)]||(function(){var _0x49a15d=function(_0xb92c70){const _0x1a9bda=a4_0x40d3;return _0x49a15d=Object[_0x1a9bda(0x14b)]||function(_0x2aa058){const _0x57ebf8=_0x1a9bda;var _0x42efd7=[];for(var _0x1ac0ed in _0x2aa058)if(Object['prototype']['hasOwnProperty']['call'](_0x2aa058,_0x1ac0ed))_0x42efd7[_0x42efd7[_0x57ebf8(0x13c)]]=_0x1ac0ed;return _0x42efd7;},_0x49a15d(_0xb92c70);};return function(_0xe4bc1){const _0x491961=a4_0x40d3;if(_0xe4bc1&&_0xe4bc1['__esModule'])return _0xe4bc1;var _0x2a9da8={};if(_0xe4bc1!=null){for(var _0x364c87=_0x49a15d(_0xe4bc1),_0x1b6c53=0x0;_0x1b6c53<_0x364c87[_0x491961(0x13c)];_0x1b6c53++)if(_0x364c87[_0x1b6c53]!==_0x491961(0x147))__createBinding(_0x2a9da8,_0xe4bc1,_0x364c87[_0x1b6c53]);}return __setModuleDefault(_0x2a9da8,_0xe4bc1),_0x2a9da8;};}());Object[a4_0x1eef84(0x146)](exports,a4_0x1eef84(0x138),{'value':!![]}),exports[a4_0x1eef84(0x162)]=void 0x0;const authService_1=require(a4_0x1eef84(0x153)),tokenBlacklistService_1=require(a4_0x1eef84(0x133)),telegramBotService_1=require(a4_0x1eef84(0x143));class AuthController{constructor(){const _0x553a52=a4_0x1eef84;this[_0x553a52(0x134)]=async(_0x1c8f45,_0xf219a7,_0x5e85a2)=>{const _0x4af0dc=_0x553a52;try{const _0x237655=_0x1c8f45[_0x4af0dc(0x141)],_0x3bca21=_0x1c8f45['ip']||_0x1c8f45['connection'][_0x4af0dc(0x148)]||_0x4af0dc(0x142),_0x14be49=_0x1c8f45[_0x4af0dc(0x15c)](_0x4af0dc(0x159))||'unknown';let _0x2bf66c=![],_0x5a4346=null;try{const _0x2881e3=await this[_0x4af0dc(0x151)][_0x4af0dc(0x134)](_0x237655);_0x2bf66c=!![],_0x2881e3[_0x4af0dc(0x157)]===_0x4af0dc(0x160)&&_0x2881e3['user']?.['id']&&(_0x5a4346=_0x2881e3[_0x4af0dc(0x155)]['id']),_0x5a4346&&await telegramBotService_1[_0x4af0dc(0x140)][_0x4af0dc(0x139)](_0x5a4346,{'username':_0x237655[_0x4af0dc(0x15b)],'ipAddress':_0x3bca21,'userAgent':_0x14be49,'timestamp':new Date(),'success':!![]}),_0xf219a7[_0x4af0dc(0x154)]({'success':!![],'result':_0x2881e3});}catch(_0xd01d29){try{const _0x5663bb=(await Promise[_0x4af0dc(0x13b)]()[_0x4af0dc(0x150)](()=>__importStar(require(_0x4af0dc(0x15d)))))[_0x4af0dc(0x147)],_0x3dfd75=await _0x5663bb[_0x4af0dc(0x160)][_0x4af0dc(0x13a)]({'where':{'username':_0x237655[_0x4af0dc(0x15b)]},'select':{'id':!![]}});_0x3dfd75&&await telegramBotService_1[_0x4af0dc(0x140)][_0x4af0dc(0x139)](_0x3dfd75['id'],{'username':_0x237655[_0x4af0dc(0x15b)],'ipAddress':_0x3bca21,'userAgent':_0x14be49,'timestamp':new Date(),'success':![]});}catch(_0x5ce743){console[_0x4af0dc(0x14d)](_0x4af0dc(0x13e),_0x5ce743);}throw _0xd01d29;}}catch(_0x2f0110){_0x5e85a2(_0x2f0110);}},this['me']=async(_0x1996fb,_0x30c9ae,_0x5daea2)=>{const _0x3fa7d0=_0x553a52;try{const _0x2a582a=_0x1996fb[_0x3fa7d0(0x155)];_0x30c9ae[_0x3fa7d0(0x154)]({'success':!![],'result':{'id':_0x2a582a?.['id'],'username':_0x2a582a?.[_0x3fa7d0(0x15b)],'role':_0x2a582a?.[_0x3fa7d0(0x157)]}});}catch(_0x148570){_0x5daea2(_0x148570);}},this[_0x553a52(0x15a)]=async(_0x5d1d37,_0x16fb0c,_0x1374d9)=>{const _0x132451=_0x553a52;try{const _0x1a5f1e=_0x5d1d37[_0x132451(0x132)],_0x1ce041=_0x5d1d37['user'];_0x1a5f1e&&_0x1ce041?.[_0x132451(0x149)]&&tokenBlacklistService_1['tokenBlacklistService'][_0x132451(0x14a)](_0x1a5f1e,_0x1ce041['exp']),_0x16fb0c['json']({'success':!![],'message':_0x132451(0x156)});}catch(_0x56bf44){_0x1374d9(_0x56bf44);}},this['getBlacklistStats']=async(_0x787481,_0x3cc064,_0x28c3d7)=>{const _0x2cc40b=_0x553a52;try{const _0x1c483e=tokenBlacklistService_1[_0x2cc40b(0x15e)][_0x2cc40b(0x137)]();_0x3cc064[_0x2cc40b(0x154)]({'success':!![],'result':_0x1c483e});}catch(_0xf90bee){_0x28c3d7(_0xf90bee);}},this['authService']=new authService_1['AuthService']();}}exports[a4_0x1eef84(0x162)]=AuthController;