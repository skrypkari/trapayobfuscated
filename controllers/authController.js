'use strict';const a4_0x18c3da=a4_0x1c0e;(function(_0x354ea9,_0x130334){const _0xbca718=a4_0x1c0e,_0x17307c=_0x354ea9();while(!![]){try{const _0x204ec2=parseInt(_0xbca718(0x211))/0x1*(parseInt(_0xbca718(0x1f6))/0x2)+parseInt(_0xbca718(0x203))/0x3*(-parseInt(_0xbca718(0x217))/0x4)+-parseInt(_0xbca718(0x1fb))/0x5+parseInt(_0xbca718(0x20f))/0x6+parseInt(_0xbca718(0x1f9))/0x7+-parseInt(_0xbca718(0x208))/0x8*(-parseInt(_0xbca718(0x1ff))/0x9)+-parseInt(_0xbca718(0x1f1))/0xa;if(_0x204ec2===_0x130334)break;else _0x17307c['push'](_0x17307c['shift']());}catch(_0x2320da){_0x17307c['push'](_0x17307c['shift']());}}}(a4_0x2111,0x5c84f));var __createBinding=this&&this['__createBinding']||(Object['create']?function(_0x56461b,_0x3291f3,_0x44efd1,_0x3cbe28){const _0x36a4c5=a4_0x1c0e;if(_0x3cbe28===undefined)_0x3cbe28=_0x44efd1;var _0x5c6a4f=Object[_0x36a4c5(0x1ee)](_0x3291f3,_0x44efd1);(!_0x5c6a4f||('get'in _0x5c6a4f?!_0x3291f3[_0x36a4c5(0x1f2)]:_0x5c6a4f[_0x36a4c5(0x202)]||_0x5c6a4f['configurable']))&&(_0x5c6a4f={'enumerable':!![],'get':function(){return _0x3291f3[_0x44efd1];}}),Object['defineProperty'](_0x56461b,_0x3cbe28,_0x5c6a4f);}:function(_0x309631,_0x438a8d,_0x571d58,_0x25735b){if(_0x25735b===undefined)_0x25735b=_0x571d58;_0x309631[_0x25735b]=_0x438a8d[_0x571d58];}),__setModuleDefault=this&&this[a4_0x18c3da(0x1ef)]||(Object[a4_0x18c3da(0x1f5)]?function(_0x52acc6,_0x47e8fd){const _0x4cdc74=a4_0x18c3da;Object[_0x4cdc74(0x212)](_0x52acc6,_0x4cdc74(0x200),{'enumerable':!![],'value':_0x47e8fd});}:function(_0x24a832,_0xc5a0bf){const _0x34965a=a4_0x18c3da;_0x24a832[_0x34965a(0x200)]=_0xc5a0bf;}),__importStar=this&&this['__importStar']||(function(){var _0x17f1f2=function(_0x20a687){const _0x57f151=a4_0x1c0e;return _0x17f1f2=Object[_0x57f151(0x20d)]||function(_0x194c88){const _0x24be58=_0x57f151;var _0x5cd489=[];for(var _0x2c11d6 in _0x194c88)if(Object[_0x24be58(0x1e6)][_0x24be58(0x20e)][_0x24be58(0x218)](_0x194c88,_0x2c11d6))_0x5cd489[_0x5cd489[_0x24be58(0x205)]]=_0x2c11d6;return _0x5cd489;},_0x17f1f2(_0x20a687);};return function(_0xa2ede7){const _0x4bb67f=a4_0x1c0e;if(_0xa2ede7&&_0xa2ede7[_0x4bb67f(0x1f2)])return _0xa2ede7;var _0x1b03dd={};if(_0xa2ede7!=null){for(var _0x12ce2a=_0x17f1f2(_0xa2ede7),_0x461849=0x0;_0x461849<_0x12ce2a[_0x4bb67f(0x205)];_0x461849++)if(_0x12ce2a[_0x461849]!=='default')__createBinding(_0x1b03dd,_0xa2ede7,_0x12ce2a[_0x461849]);}return __setModuleDefault(_0x1b03dd,_0xa2ede7),_0x1b03dd;};}());Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a4_0x18c3da(0x1fa)]=void 0x0;function a4_0x1c0e(_0x544119,_0x120511){const _0x2111a9=a4_0x2111();return a4_0x1c0e=function(_0x1c0e94,_0x5af374){_0x1c0e94=_0x1c0e94-0x1e5;let _0x28685e=_0x2111a9[_0x1c0e94];return _0x28685e;},a4_0x1c0e(_0x544119,_0x120511);}const authService_1=require(a4_0x18c3da(0x20b)),tokenBlacklistService_1=require('../services/tokenBlacklistService'),telegramBotService_1=require(a4_0x18c3da(0x1fe));function a4_0x2111(){const _0x220468=['sendLoginNotification','2603783RWozlf','AuthController','2693810vFRiSd','then','User-Agent','../services/telegramBotService','532908TsXKwO','default','user','writable','132543eYOeTH','Logged\x20out\x20successfully','length','exp','get','96mAlzfV','resolve','AuthService','../services/authService','Failed\x20to\x20send\x20failed\x20login\x20notification:','getOwnPropertyNames','hasOwnProperty','1595490SvLKtj','getBlacklistStats','25094dtiZwO','defineProperty','blacklistToken','remoteAddress','telegramBotService','../config/database','12ujxGnX','call','unknown','prototype','shop','tokenBlacklistService','username','getStats','role','body','token','getOwnPropertyDescriptor','__setModuleDefault','login','3734460ETwbqa','__esModule','findUnique','authService','create','6uAxFXk','json'];a4_0x2111=function(){return _0x220468;};return a4_0x2111();}class AuthController{constructor(){const _0x4c4b11=a4_0x18c3da;this[_0x4c4b11(0x1f0)]=async(_0x437b24,_0x4776f0,_0x3a25e3)=>{const _0x28c130=_0x4c4b11;try{const _0xdc673e=_0x437b24[_0x28c130(0x1ec)],_0x13de66=_0x437b24['ip']||_0x437b24['connection'][_0x28c130(0x214)]||_0x28c130(0x1e5),_0x367058=_0x437b24[_0x28c130(0x207)](_0x28c130(0x1fd))||_0x28c130(0x1e5);let _0x38163b=![],_0x1c9f84=null;try{const _0x84b809=await this[_0x28c130(0x1f4)][_0x28c130(0x1f0)](_0xdc673e);_0x38163b=!![],_0x84b809[_0x28c130(0x1eb)]===_0x28c130(0x1e7)&&_0x84b809[_0x28c130(0x201)]?.['id']&&(_0x1c9f84=_0x84b809[_0x28c130(0x201)]['id']),_0x1c9f84&&await telegramBotService_1[_0x28c130(0x215)][_0x28c130(0x1f8)](_0x1c9f84,{'username':_0xdc673e[_0x28c130(0x1e9)],'ipAddress':_0x13de66,'userAgent':_0x367058,'timestamp':new Date(),'success':!![]}),_0x4776f0[_0x28c130(0x1f7)]({'success':!![],'result':_0x84b809});}catch(_0x1cf838){try{const _0x1f625a=(await Promise[_0x28c130(0x209)]()[_0x28c130(0x1fc)](()=>__importStar(require(_0x28c130(0x216)))))[_0x28c130(0x200)],_0x2a3761=await _0x1f625a[_0x28c130(0x1e7)][_0x28c130(0x1f3)]({'where':{'username':_0xdc673e['username']},'select':{'id':!![]}});_0x2a3761&&await telegramBotService_1[_0x28c130(0x215)][_0x28c130(0x1f8)](_0x2a3761['id'],{'username':_0xdc673e['username'],'ipAddress':_0x13de66,'userAgent':_0x367058,'timestamp':new Date(),'success':![]});}catch(_0x597324){console['error'](_0x28c130(0x20c),_0x597324);}throw _0x1cf838;}}catch(_0x469d59){_0x3a25e3(_0x469d59);}},this['me']=async(_0x17a8e4,_0x4e268d,_0x185441)=>{const _0x4433e0=_0x4c4b11;try{const _0x369ff1=_0x17a8e4[_0x4433e0(0x201)];_0x4e268d[_0x4433e0(0x1f7)]({'success':!![],'result':{'id':_0x369ff1?.['id'],'username':_0x369ff1?.[_0x4433e0(0x1e9)],'role':_0x369ff1?.[_0x4433e0(0x1eb)]}});}catch(_0x581cdf){_0x185441(_0x581cdf);}},this['logout']=async(_0x5194b7,_0xb8b481,_0x24eb3b)=>{const _0x4da77e=_0x4c4b11;try{const _0x38e985=_0x5194b7[_0x4da77e(0x1ed)],_0x19c664=_0x5194b7[_0x4da77e(0x201)];_0x38e985&&_0x19c664?.[_0x4da77e(0x206)]&&tokenBlacklistService_1[_0x4da77e(0x1e8)][_0x4da77e(0x213)](_0x38e985,_0x19c664['exp']),_0xb8b481[_0x4da77e(0x1f7)]({'success':!![],'message':_0x4da77e(0x204)});}catch(_0x4a80d5){_0x24eb3b(_0x4a80d5);}},this[_0x4c4b11(0x210)]=async(_0x530e37,_0x3830f2,_0x5b60c8)=>{const _0x1a430b=_0x4c4b11;try{const _0x13df00=tokenBlacklistService_1[_0x1a430b(0x1e8)][_0x1a430b(0x1ea)]();_0x3830f2[_0x1a430b(0x1f7)]({'success':!![],'result':_0x13df00});}catch(_0x5de2d0){_0x5b60c8(_0x5de2d0);}},this[_0x4c4b11(0x1f4)]=new authService_1[(_0x4c4b11(0x20a))]();}}exports[a4_0x18c3da(0x1fa)]=AuthController;