'use strict';const a4_0x34325b=a4_0x127a;(function(_0x524daa,_0x10a6ff){const _0xb09842=a4_0x127a,_0x1e7545=_0x524daa();while(!![]){try{const _0x413db7=-parseInt(_0xb09842(0x1e8))/0x1+parseInt(_0xb09842(0x205))/0x2*(parseInt(_0xb09842(0x1e6))/0x3)+-parseInt(_0xb09842(0x1e1))/0x4+parseInt(_0xb09842(0x1ff))/0x5*(-parseInt(_0xb09842(0x1fe))/0x6)+parseInt(_0xb09842(0x1ec))/0x7+-parseInt(_0xb09842(0x1e7))/0x8+parseInt(_0xb09842(0x206))/0x9;if(_0x413db7===_0x10a6ff)break;else _0x1e7545['push'](_0x1e7545['shift']());}catch(_0x47b52c){_0x1e7545['push'](_0x1e7545['shift']());}}}(a4_0x1771,0x84127));var __createBinding=this&&this[a4_0x34325b(0x1e5)]||(Object[a4_0x34325b(0x1ee)]?function(_0x3e5f08,_0xca5c20,_0x1a5637,_0x356705){const _0x435094=a4_0x34325b;if(_0x356705===undefined)_0x356705=_0x1a5637;var _0x80062f=Object['getOwnPropertyDescriptor'](_0xca5c20,_0x1a5637);(!_0x80062f||(_0x435094(0x20d)in _0x80062f?!_0xca5c20[_0x435094(0x208)]:_0x80062f[_0x435094(0x1f5)]||_0x80062f[_0x435094(0x1ed)]))&&(_0x80062f={'enumerable':!![],'get':function(){return _0xca5c20[_0x1a5637];}}),Object[_0x435094(0x1f7)](_0x3e5f08,_0x356705,_0x80062f);}:function(_0x421f96,_0x509bb9,_0x53407f,_0x5e87fd){if(_0x5e87fd===undefined)_0x5e87fd=_0x53407f;_0x421f96[_0x5e87fd]=_0x509bb9[_0x53407f];}),__setModuleDefault=this&&this[a4_0x34325b(0x1ef)]||(Object[a4_0x34325b(0x1ee)]?function(_0x3817d3,_0x4bf635){const _0x1025df=a4_0x34325b;Object[_0x1025df(0x1f7)](_0x3817d3,_0x1025df(0x1f0),{'enumerable':!![],'value':_0x4bf635});}:function(_0x240ac6,_0x8fe89b){const _0x229cc8=a4_0x34325b;_0x240ac6[_0x229cc8(0x1f0)]=_0x8fe89b;}),__importStar=this&&this[a4_0x34325b(0x20b)]||(function(){var _0x101aad=function(_0x410059){const _0x5dc048=a4_0x127a;return _0x101aad=Object[_0x5dc048(0x1fc)]||function(_0x299f58){const _0x112c07=_0x5dc048;var _0x16feb8=[];for(var _0x1120d3 in _0x299f58)if(Object[_0x112c07(0x1e3)][_0x112c07(0x1e4)][_0x112c07(0x1e0)](_0x299f58,_0x1120d3))_0x16feb8[_0x16feb8['length']]=_0x1120d3;return _0x16feb8;},_0x101aad(_0x410059);};return function(_0x56467a){const _0x53de62=a4_0x127a;if(_0x56467a&&_0x56467a[_0x53de62(0x208)])return _0x56467a;var _0x6c5047={};if(_0x56467a!=null){for(var _0x1b8cf1=_0x101aad(_0x56467a),_0x59de4c=0x0;_0x59de4c<_0x1b8cf1[_0x53de62(0x1e9)];_0x59de4c++)if(_0x1b8cf1[_0x59de4c]!=='default')__createBinding(_0x6c5047,_0x56467a,_0x1b8cf1[_0x59de4c]);}return __setModuleDefault(_0x6c5047,_0x56467a),_0x6c5047;};}());function a4_0x127a(_0x199ba7,_0x59c3a7){const _0x177114=a4_0x1771();return a4_0x127a=function(_0x127aa4,_0x3d8fd4){_0x127aa4=_0x127aa4-0x1e0;let _0x5a63f6=_0x177114[_0x127aa4];return _0x5a63f6;},a4_0x127a(_0x199ba7,_0x59c3a7);}Object[a4_0x34325b(0x1f7)](exports,'__esModule',{'value':!![]}),exports[a4_0x34325b(0x20f)]=void 0x0;const authService_1=require(a4_0x34325b(0x1f1)),tokenBlacklistService_1=require(a4_0x34325b(0x202)),telegramBotService_1=require(a4_0x34325b(0x1f8));class AuthController{constructor(){const _0x4f95b6=a4_0x34325b;this[_0x4f95b6(0x1f6)]=async(_0x469eec,_0x2d6cb0,_0x4d3310)=>{const _0xbe6eb5=_0x4f95b6;try{const _0x4b6581=_0x469eec['body'],_0xb2c3f4=_0x469eec['ip']||_0x469eec[_0xbe6eb5(0x201)][_0xbe6eb5(0x1f3)]||_0xbe6eb5(0x1f4),_0x3eda40=_0x469eec[_0xbe6eb5(0x20d)]('User-Agent')||_0xbe6eb5(0x1f4);let _0x1f8e73=![],_0x3dcd82=null;try{const _0x331c68=await this[_0xbe6eb5(0x20e)][_0xbe6eb5(0x1f6)](_0x4b6581);_0x1f8e73=!![],_0x331c68['role']===_0xbe6eb5(0x200)&&_0x331c68[_0xbe6eb5(0x1fb)]?.['id']&&(_0x3dcd82=_0x331c68[_0xbe6eb5(0x1fb)]['id']),_0x3dcd82&&await telegramBotService_1[_0xbe6eb5(0x209)][_0xbe6eb5(0x1e2)](_0x3dcd82,{'username':_0x4b6581[_0xbe6eb5(0x1ea)],'ipAddress':_0xb2c3f4,'userAgent':_0x3eda40,'timestamp':new Date(),'success':!![]}),_0x2d6cb0[_0xbe6eb5(0x1f2)]({'success':!![],'result':_0x331c68});}catch(_0xa2f9a9){try{const _0x9dc2dc=(await Promise['resolve']()[_0xbe6eb5(0x210)](()=>__importStar(require('../config/database'))))[_0xbe6eb5(0x1f0)],_0x4ee738=await _0x9dc2dc['shop'][_0xbe6eb5(0x203)]({'where':{'username':_0x4b6581['username']},'select':{'id':!![]}});_0x4ee738&&await telegramBotService_1['telegramBotService']['sendLoginNotification'](_0x4ee738['id'],{'username':_0x4b6581[_0xbe6eb5(0x1ea)],'ipAddress':_0xb2c3f4,'userAgent':_0x3eda40,'timestamp':new Date(),'success':![]});}catch(_0x131bd6){console[_0xbe6eb5(0x1fd)](_0xbe6eb5(0x1eb),_0x131bd6);}throw _0xa2f9a9;}}catch(_0x3f758f){_0x4d3310(_0x3f758f);}},this['me']=async(_0xecd40,_0x332160,_0x3a9c8d)=>{const _0x1c8a10=_0x4f95b6;try{const _0x15a31f=_0xecd40[_0x1c8a10(0x1fb)];_0x332160[_0x1c8a10(0x1f2)]({'success':!![],'result':{'id':_0x15a31f?.['id'],'username':_0x15a31f?.[_0x1c8a10(0x1ea)],'role':_0x15a31f?.[_0x1c8a10(0x20c)]}});}catch(_0x14aac7){_0x3a9c8d(_0x14aac7);}},this[_0x4f95b6(0x20a)]=async(_0x1f296f,_0x281fe9,_0x4b959e)=>{const _0x57dd10=_0x4f95b6;try{const _0x5dda3d=_0x1f296f[_0x57dd10(0x212)],_0x56d6d8=_0x1f296f[_0x57dd10(0x1fb)];_0x5dda3d&&_0x56d6d8?.[_0x57dd10(0x207)]&&tokenBlacklistService_1[_0x57dd10(0x204)][_0x57dd10(0x211)](_0x5dda3d,_0x56d6d8[_0x57dd10(0x207)]),_0x281fe9[_0x57dd10(0x1f2)]({'success':!![],'message':_0x57dd10(0x1f9)});}catch(_0x3ee3d9){_0x4b959e(_0x3ee3d9);}},this['getBlacklistStats']=async(_0xa84cc2,_0xd0fea,_0x1ceeac)=>{const _0x1dc4bd=_0x4f95b6;try{const _0x3ce8af=tokenBlacklistService_1[_0x1dc4bd(0x204)][_0x1dc4bd(0x1fa)]();_0xd0fea[_0x1dc4bd(0x1f2)]({'success':!![],'result':_0x3ce8af});}catch(_0x2c38a0){_0x1ceeac(_0x2c38a0);}},this[_0x4f95b6(0x20e)]=new authService_1['AuthService']();}}exports['AuthController']=AuthController;function a4_0x1771(){const _0x20db83=['6061768Bdgwxa','965503LeUgLe','length','username','Failed\x20to\x20send\x20failed\x20login\x20notification:','4776562smBcCR','configurable','create','__setModuleDefault','default','../services/authService','json','remoteAddress','unknown','writable','login','defineProperty','../services/telegramBotService','Logged\x20out\x20successfully','getStats','user','getOwnPropertyNames','error','1557942HzxMJQ','20XpWunZ','shop','connection','../services/tokenBlacklistService','findUnique','tokenBlacklistService','1778278ueofhw','21915783mtqgyu','exp','__esModule','telegramBotService','logout','__importStar','role','get','authService','AuthController','then','blacklistToken','token','call','2815092AsPqAk','sendLoginNotification','prototype','hasOwnProperty','__createBinding','3xgMncK'];a4_0x1771=function(){return _0x20db83;};return a4_0x1771();}