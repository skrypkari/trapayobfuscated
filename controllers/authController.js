'use strict';function a4_0x4871(_0x18e021,_0x57307a){const _0x1c38d9=a4_0x1c38();return a4_0x4871=function(_0x48717d,_0x1b7bbb){_0x48717d=_0x48717d-0xe5;let _0x3640ae=_0x1c38d9[_0x48717d];return _0x3640ae;},a4_0x4871(_0x18e021,_0x57307a);}const a4_0x4c384e=a4_0x4871;(function(_0x34ef1c,_0x34be03){const _0x426892=a4_0x4871,_0x4473ce=_0x34ef1c();while(!![]){try{const _0x304f97=-parseInt(_0x426892(0xf3))/0x1+-parseInt(_0x426892(0xf8))/0x2+parseInt(_0x426892(0xee))/0x3+parseInt(_0x426892(0x114))/0x4*(-parseInt(_0x426892(0xe8))/0x5)+parseInt(_0x426892(0x100))/0x6+-parseInt(_0x426892(0xfe))/0x7*(parseInt(_0x426892(0xed))/0x8)+parseInt(_0x426892(0xef))/0x9;if(_0x304f97===_0x34be03)break;else _0x4473ce['push'](_0x4473ce['shift']());}catch(_0x493c90){_0x4473ce['push'](_0x4473ce['shift']());}}}(a4_0x1c38,0x63eb3));function a4_0x1c38(){const _0x58b817=['getStats','AuthService','301948VYiwMb','get','Failed\x20to\x20send\x20failed\x20login\x20notification:','writable','defineProperty','../services/authService','2137373yldBGo','length','1963854zYzZOq','findUnique','__esModule','AuthController','call','User-Agent','role','token','__setModuleDefault','../services/telegramBotService','remoteAddress','shop','getBlacklistStats','connection','login','getOwnPropertyDescriptor','getOwnPropertyNames','hasOwnProperty','then','exp','4940zFAGlr','__importStar','authService','create','username','2920QPiJYj','resolve','blacklistToken','sendLoginNotification','telegramBotService','16rHoIgp','2404617mmrwKz','10998360NrSTkY','logout','json','unknown','458729ozPQse','user','default'];a4_0x1c38=function(){return _0x58b817;};return a4_0x1c38();}var __createBinding=this&&this['__createBinding']||(Object[a4_0x4c384e(0xe6)]?function(_0x239879,_0x5bf8e6,_0x4a3b08,_0x6ab1b){const _0x89a56e=a4_0x4c384e;if(_0x6ab1b===undefined)_0x6ab1b=_0x4a3b08;var _0x300ac9=Object[_0x89a56e(0x10f)](_0x5bf8e6,_0x4a3b08);(!_0x300ac9||(_0x89a56e(0xf9)in _0x300ac9?!_0x5bf8e6[_0x89a56e(0x102)]:_0x300ac9[_0x89a56e(0xfb)]||_0x300ac9['configurable']))&&(_0x300ac9={'enumerable':!![],'get':function(){return _0x5bf8e6[_0x4a3b08];}}),Object[_0x89a56e(0xfc)](_0x239879,_0x6ab1b,_0x300ac9);}:function(_0x5ac0da,_0x3b5f66,_0x270ed8,_0x511aa5){if(_0x511aa5===undefined)_0x511aa5=_0x270ed8;_0x5ac0da[_0x511aa5]=_0x3b5f66[_0x270ed8];}),__setModuleDefault=this&&this[a4_0x4c384e(0x108)]||(Object['create']?function(_0xf16b5f,_0x4a6bbe){const _0x2e734e=a4_0x4c384e;Object[_0x2e734e(0xfc)](_0xf16b5f,_0x2e734e(0xf5),{'enumerable':!![],'value':_0x4a6bbe});}:function(_0x5458e6,_0x4075d3){_0x5458e6['default']=_0x4075d3;}),__importStar=this&&this[a4_0x4c384e(0x115)]||(function(){var _0x3a597e=function(_0x3e2e2b){const _0x2767e2=a4_0x4871;return _0x3a597e=Object[_0x2767e2(0x110)]||function(_0x415ba3){const _0x49a1c2=_0x2767e2;var _0x1a0985=[];for(var _0x4d3b21 in _0x415ba3)if(Object['prototype'][_0x49a1c2(0x111)][_0x49a1c2(0x104)](_0x415ba3,_0x4d3b21))_0x1a0985[_0x1a0985[_0x49a1c2(0xff)]]=_0x4d3b21;return _0x1a0985;},_0x3a597e(_0x3e2e2b);};return function(_0x3f3a07){const _0x2c034f=a4_0x4871;if(_0x3f3a07&&_0x3f3a07[_0x2c034f(0x102)])return _0x3f3a07;var _0x20d4fa={};if(_0x3f3a07!=null){for(var _0x224be4=_0x3a597e(_0x3f3a07),_0x1252a0=0x0;_0x1252a0<_0x224be4[_0x2c034f(0xff)];_0x1252a0++)if(_0x224be4[_0x1252a0]!==_0x2c034f(0xf5))__createBinding(_0x20d4fa,_0x3f3a07,_0x224be4[_0x1252a0]);}return __setModuleDefault(_0x20d4fa,_0x3f3a07),_0x20d4fa;};}());Object[a4_0x4c384e(0xfc)](exports,a4_0x4c384e(0x102),{'value':!![]}),exports[a4_0x4c384e(0x103)]=void 0x0;const authService_1=require(a4_0x4c384e(0xfd)),tokenBlacklistService_1=require('../services/tokenBlacklistService'),telegramBotService_1=require(a4_0x4c384e(0x109));class AuthController{constructor(){const _0x2a5316=a4_0x4c384e;this[_0x2a5316(0x10e)]=async(_0x21cc63,_0x5cded2,_0x11da7e)=>{const _0x56d397=_0x2a5316;try{const _0x31cc36=_0x21cc63['body'],_0x396b9b=_0x21cc63['ip']||_0x21cc63[_0x56d397(0x10d)][_0x56d397(0x10a)]||_0x56d397(0xf2),_0x47bea0=_0x21cc63[_0x56d397(0xf9)](_0x56d397(0x105))||_0x56d397(0xf2);let _0x5352f7=![],_0x2f18e6=null;try{const _0x3f9168=await this[_0x56d397(0xe5)][_0x56d397(0x10e)](_0x31cc36);_0x5352f7=!![],_0x3f9168[_0x56d397(0x106)]==='shop'&&_0x3f9168['user']?.['id']&&(_0x2f18e6=_0x3f9168[_0x56d397(0xf4)]['id']),_0x2f18e6&&await telegramBotService_1[_0x56d397(0xec)][_0x56d397(0xeb)](_0x2f18e6,{'username':_0x31cc36[_0x56d397(0xe7)],'ipAddress':_0x396b9b,'userAgent':_0x47bea0,'timestamp':new Date(),'success':!![]}),_0x5cded2[_0x56d397(0xf1)]({'success':!![],'result':_0x3f9168});}catch(_0x5b4216){try{const _0x4d8cd5=(await Promise[_0x56d397(0xe9)]()[_0x56d397(0x112)](()=>__importStar(require('../config/database'))))['default'],_0x321387=await _0x4d8cd5[_0x56d397(0x10b)][_0x56d397(0x101)]({'where':{'username':_0x31cc36[_0x56d397(0xe7)]},'select':{'id':!![]}});_0x321387&&await telegramBotService_1['telegramBotService'][_0x56d397(0xeb)](_0x321387['id'],{'username':_0x31cc36[_0x56d397(0xe7)],'ipAddress':_0x396b9b,'userAgent':_0x47bea0,'timestamp':new Date(),'success':![]});}catch(_0x309354){console['error'](_0x56d397(0xfa),_0x309354);}throw _0x5b4216;}}catch(_0x3104ca){_0x11da7e(_0x3104ca);}},this['me']=async(_0x151db2,_0x59203a,_0x42f496)=>{const _0x2ff909=_0x2a5316;try{const _0x6a7fbf=_0x151db2[_0x2ff909(0xf4)];_0x59203a[_0x2ff909(0xf1)]({'success':!![],'result':{'id':_0x6a7fbf?.['id'],'username':_0x6a7fbf?.['username'],'role':_0x6a7fbf?.[_0x2ff909(0x106)]}});}catch(_0x583633){_0x42f496(_0x583633);}},this[_0x2a5316(0xf0)]=async(_0x4b46cd,_0x104074,_0x5b3aa6)=>{const _0x5e5f3c=_0x2a5316;try{const _0x2e5e29=_0x4b46cd[_0x5e5f3c(0x107)],_0x1d9494=_0x4b46cd[_0x5e5f3c(0xf4)];_0x2e5e29&&_0x1d9494?.[_0x5e5f3c(0x113)]&&tokenBlacklistService_1['tokenBlacklistService'][_0x5e5f3c(0xea)](_0x2e5e29,_0x1d9494[_0x5e5f3c(0x113)]),_0x104074[_0x5e5f3c(0xf1)]({'success':!![],'message':'Logged\x20out\x20successfully'});}catch(_0x27257c){_0x5b3aa6(_0x27257c);}},this[_0x2a5316(0x10c)]=async(_0x230e86,_0x352d1c,_0x5b5864)=>{const _0x3d349d=_0x2a5316;try{const _0x485120=tokenBlacklistService_1['tokenBlacklistService'][_0x3d349d(0xf6)]();_0x352d1c['json']({'success':!![],'result':_0x485120});}catch(_0x45bd3f){_0x5b5864(_0x45bd3f);}},this[_0x2a5316(0xe5)]=new authService_1[(_0x2a5316(0xf7))]();}}exports[a4_0x4c384e(0x103)]=AuthController;