'use strict';function a4_0x13f0(_0x2d1aa7,_0x415842){const _0x2f34f1=a4_0x2f34();return a4_0x13f0=function(_0x13f01f,_0x5909d3){_0x13f01f=_0x13f01f-0xf8;let _0x627d95=_0x2f34f1[_0x13f01f];return _0x627d95;},a4_0x13f0(_0x2d1aa7,_0x415842);}const a4_0xec1935=a4_0x13f0;(function(_0x401e02,_0x3688a4){const _0x2a5e81=a4_0x13f0,_0x27e71d=_0x401e02();while(!![]){try{const _0x4be662=parseInt(_0x2a5e81(0x115))/0x1*(parseInt(_0x2a5e81(0xfa))/0x2)+-parseInt(_0x2a5e81(0x129))/0x3+-parseInt(_0x2a5e81(0x101))/0x4+-parseInt(_0x2a5e81(0x10c))/0x5*(-parseInt(_0x2a5e81(0x12b))/0x6)+-parseInt(_0x2a5e81(0x100))/0x7*(parseInt(_0x2a5e81(0x124))/0x8)+parseInt(_0x2a5e81(0xff))/0x9+parseInt(_0x2a5e81(0x11b))/0xa;if(_0x4be662===_0x3688a4)break;else _0x27e71d['push'](_0x27e71d['shift']());}catch(_0x8f6334){_0x27e71d['push'](_0x27e71d['shift']());}}}(a4_0x2f34,0xc787b));function a4_0x2f34(){const _0x2be89e=['telegramBotService','token','default','logout','2336043vajNRH','User-Agent','1874802xJncFP','user','findUnique','74806JACRcW','__setModuleDefault','exp','body','json','10950480uLcTKa','7644zbyyCm','4388908QEGRpw','__esModule','../services/authService','../services/telegramBotService','length','configurable','getBlacklistStats','defineProperty','then','tokenBlacklistService','role','25rOIGAP','sendLoginNotification','get','prototype','getOwnPropertyNames','AuthController','unknown','Failed\x20to\x20send\x20failed\x20login\x20notification:','resolve','5LBcldC','getOwnPropertyDescriptor','login','blacklistToken','error','AuthService','5384690PoOait','Logged\x20out\x20successfully','getStats','username','writable','shop','authService','call','create','5944TGEvFj'];a4_0x2f34=function(){return _0x2be89e;};return a4_0x2f34();}var __createBinding=this&&this['__createBinding']||(Object[a4_0xec1935(0x123)]?function(_0x24824a,_0x40f82d,_0x49e606,_0x52baa1){const _0x2fc4f3=a4_0xec1935;if(_0x52baa1===undefined)_0x52baa1=_0x49e606;var _0x258679=Object[_0x2fc4f3(0x116)](_0x40f82d,_0x49e606);(!_0x258679||('get'in _0x258679?!_0x40f82d[_0x2fc4f3(0x102)]:_0x258679[_0x2fc4f3(0x11f)]||_0x258679[_0x2fc4f3(0x106)]))&&(_0x258679={'enumerable':!![],'get':function(){return _0x40f82d[_0x49e606];}}),Object[_0x2fc4f3(0x108)](_0x24824a,_0x52baa1,_0x258679);}:function(_0x3b3c9a,_0x489d23,_0x85c816,_0x38ea59){if(_0x38ea59===undefined)_0x38ea59=_0x85c816;_0x3b3c9a[_0x38ea59]=_0x489d23[_0x85c816];}),__setModuleDefault=this&&this[a4_0xec1935(0xfb)]||(Object[a4_0xec1935(0x123)]?function(_0x4bd585,_0x23cfb6){const _0x52c852=a4_0xec1935;Object[_0x52c852(0x108)](_0x4bd585,_0x52c852(0x127),{'enumerable':!![],'value':_0x23cfb6});}:function(_0x524982,_0x31e275){const _0x22ddb1=a4_0xec1935;_0x524982[_0x22ddb1(0x127)]=_0x31e275;}),__importStar=this&&this['__importStar']||(function(){var _0x34fc97=function(_0x216ec2){const _0x17260b=a4_0x13f0;return _0x34fc97=Object[_0x17260b(0x110)]||function(_0x4839a7){const _0x3b5436=_0x17260b;var _0x26fb8e=[];for(var _0x2540de in _0x4839a7)if(Object[_0x3b5436(0x10f)]['hasOwnProperty'][_0x3b5436(0x122)](_0x4839a7,_0x2540de))_0x26fb8e[_0x26fb8e[_0x3b5436(0x105)]]=_0x2540de;return _0x26fb8e;},_0x34fc97(_0x216ec2);};return function(_0xca63f2){const _0x5b6da8=a4_0x13f0;if(_0xca63f2&&_0xca63f2[_0x5b6da8(0x102)])return _0xca63f2;var _0x34621b={};if(_0xca63f2!=null){for(var _0xd393fc=_0x34fc97(_0xca63f2),_0x2d2506=0x0;_0x2d2506<_0xd393fc[_0x5b6da8(0x105)];_0x2d2506++)if(_0xd393fc[_0x2d2506]!==_0x5b6da8(0x127))__createBinding(_0x34621b,_0xca63f2,_0xd393fc[_0x2d2506]);}return __setModuleDefault(_0x34621b,_0xca63f2),_0x34621b;};}());Object['defineProperty'](exports,a4_0xec1935(0x102),{'value':!![]}),exports[a4_0xec1935(0x111)]=void 0x0;const authService_1=require(a4_0xec1935(0x103)),tokenBlacklistService_1=require('../services/tokenBlacklistService'),telegramBotService_1=require(a4_0xec1935(0x104));class AuthController{constructor(){const _0x42f86d=a4_0xec1935;this[_0x42f86d(0x117)]=async(_0x5583ad,_0x2bb65b,_0xec2310)=>{const _0x2a0361=_0x42f86d;try{const _0xef9cb6=_0x5583ad[_0x2a0361(0xfd)],_0x3aa624=_0x5583ad['ip']||_0x5583ad['connection']['remoteAddress']||_0x2a0361(0x112),_0x43321e=_0x5583ad[_0x2a0361(0x10e)](_0x2a0361(0x12a))||'unknown';let _0x4a6436=![],_0x305148=null;try{const _0x36990b=await this[_0x2a0361(0x121)][_0x2a0361(0x117)](_0xef9cb6);_0x4a6436=!![],_0x36990b[_0x2a0361(0x10b)]===_0x2a0361(0x120)&&_0x36990b[_0x2a0361(0xf8)]?.['id']&&(_0x305148=_0x36990b[_0x2a0361(0xf8)]['id']),_0x305148&&await telegramBotService_1['telegramBotService'][_0x2a0361(0x10d)](_0x305148,{'username':_0xef9cb6[_0x2a0361(0x11e)],'ipAddress':_0x3aa624,'userAgent':_0x43321e,'timestamp':new Date(),'success':!![]}),_0x2bb65b['json']({'success':!![],'result':_0x36990b});}catch(_0x4c6d3b){try{const _0x3d79da=(await Promise[_0x2a0361(0x114)]()[_0x2a0361(0x109)](()=>__importStar(require('../config/database'))))[_0x2a0361(0x127)],_0xaaa704=await _0x3d79da['shop'][_0x2a0361(0xf9)]({'where':{'username':_0xef9cb6['username']},'select':{'id':!![]}});_0xaaa704&&await telegramBotService_1[_0x2a0361(0x125)][_0x2a0361(0x10d)](_0xaaa704['id'],{'username':_0xef9cb6[_0x2a0361(0x11e)],'ipAddress':_0x3aa624,'userAgent':_0x43321e,'timestamp':new Date(),'success':![]});}catch(_0xc66db8){console[_0x2a0361(0x119)](_0x2a0361(0x113),_0xc66db8);}throw _0x4c6d3b;}}catch(_0x508baa){_0xec2310(_0x508baa);}},this['me']=async(_0x763d4f,_0x52adf2,_0xb452e2)=>{const _0x1d1526=_0x42f86d;try{const _0x58b087=_0x763d4f['user'];_0x52adf2['json']({'success':!![],'result':{'id':_0x58b087?.['id'],'username':_0x58b087?.[_0x1d1526(0x11e)],'role':_0x58b087?.['role']}});}catch(_0x73975e){_0xb452e2(_0x73975e);}},this[_0x42f86d(0x128)]=async(_0xb94b9a,_0x5d9a92,_0x5a407c)=>{const _0x3da29f=_0x42f86d;try{const _0x6e44d4=_0xb94b9a[_0x3da29f(0x126)],_0x368bb9=_0xb94b9a['user'];_0x6e44d4&&_0x368bb9?.[_0x3da29f(0xfc)]&&tokenBlacklistService_1[_0x3da29f(0x10a)][_0x3da29f(0x118)](_0x6e44d4,_0x368bb9[_0x3da29f(0xfc)]),_0x5d9a92[_0x3da29f(0xfe)]({'success':!![],'message':_0x3da29f(0x11c)});}catch(_0x43c964){_0x5a407c(_0x43c964);}},this[_0x42f86d(0x107)]=async(_0x261ce4,_0xdaf81f,_0x5101af)=>{const _0x5704d9=_0x42f86d;try{const _0x18e954=tokenBlacklistService_1[_0x5704d9(0x10a)][_0x5704d9(0x11d)]();_0xdaf81f[_0x5704d9(0xfe)]({'success':!![],'result':_0x18e954});}catch(_0x2cad3c){_0x5101af(_0x2cad3c);}},this[_0x42f86d(0x121)]=new authService_1[(_0x42f86d(0x11a))]();}}exports[a4_0xec1935(0x111)]=AuthController;