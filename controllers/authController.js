'use strict';const a4_0x1e40f1=a4_0xa439;function a4_0xa439(_0x43b3a4,_0x507548){const _0x5ab2d7=a4_0x5ab2();return a4_0xa439=function(_0xa43983,_0x445ebe){_0xa43983=_0xa43983-0xc5;let _0x2afe24=_0x5ab2d7[_0xa43983];return _0x2afe24;},a4_0xa439(_0x43b3a4,_0x507548);}(function(_0x243f8f,_0x32c5e4){const _0x1eda5d=a4_0xa439,_0x440fce=_0x243f8f();while(!![]){try{const _0x955c9e=parseInt(_0x1eda5d(0xe9))/0x1*(-parseInt(_0x1eda5d(0xf0))/0x2)+parseInt(_0x1eda5d(0xc7))/0x3*(parseInt(_0x1eda5d(0xf6))/0x4)+-parseInt(_0x1eda5d(0xdf))/0x5*(parseInt(_0x1eda5d(0xd8))/0x6)+-parseInt(_0x1eda5d(0xe8))/0x7+-parseInt(_0x1eda5d(0xe6))/0x8*(parseInt(_0x1eda5d(0xf1))/0x9)+parseInt(_0x1eda5d(0xcb))/0xa+parseInt(_0x1eda5d(0xdd))/0xb*(parseInt(_0x1eda5d(0xe3))/0xc);if(_0x955c9e===_0x32c5e4)break;else _0x440fce['push'](_0x440fce['shift']());}catch(_0x850bc9){_0x440fce['push'](_0x440fce['shift']());}}}(a4_0x5ab2,0xafa56));var __createBinding=this&&this[a4_0x1e40f1(0xe2)]||(Object[a4_0x1e40f1(0xe4)]?function(_0x37c252,_0x25b4c6,_0x113366,_0x2ec913){const _0x515031=a4_0x1e40f1;if(_0x2ec913===undefined)_0x2ec913=_0x113366;var _0x5f4842=Object[_0x515031(0xce)](_0x25b4c6,_0x113366);(!_0x5f4842||(_0x515031(0xf9)in _0x5f4842?!_0x25b4c6[_0x515031(0xe5)]:_0x5f4842['writable']||_0x5f4842[_0x515031(0xd0)]))&&(_0x5f4842={'enumerable':!![],'get':function(){return _0x25b4c6[_0x113366];}}),Object['defineProperty'](_0x37c252,_0x2ec913,_0x5f4842);}:function(_0x587b56,_0x350bd1,_0x24a8f5,_0x35e96a){if(_0x35e96a===undefined)_0x35e96a=_0x24a8f5;_0x587b56[_0x35e96a]=_0x350bd1[_0x24a8f5];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a4_0x1e40f1(0xe4)]?function(_0x208911,_0x2e3835){const _0x495193=a4_0x1e40f1;Object[_0x495193(0xd3)](_0x208911,'default',{'enumerable':!![],'value':_0x2e3835});}:function(_0x4a3aac,_0x1060bf){const _0x4a229e=a4_0x1e40f1;_0x4a3aac[_0x4a229e(0xf3)]=_0x1060bf;}),__importStar=this&&this['__importStar']||(function(){var _0x389d27=function(_0x11aeb7){const _0x429dcb=a4_0xa439;return _0x389d27=Object[_0x429dcb(0xde)]||function(_0x26f45b){const _0x199702=_0x429dcb;var _0x2fdb78=[];for(var _0x3d1f7b in _0x26f45b)if(Object[_0x199702(0xfa)]['hasOwnProperty'][_0x199702(0xd4)](_0x26f45b,_0x3d1f7b))_0x2fdb78[_0x2fdb78[_0x199702(0xed)]]=_0x3d1f7b;return _0x2fdb78;},_0x389d27(_0x11aeb7);};return function(_0x284643){const _0x4f7934=a4_0xa439;if(_0x284643&&_0x284643[_0x4f7934(0xe5)])return _0x284643;var _0x4603ff={};if(_0x284643!=null){for(var _0x1b0e57=_0x389d27(_0x284643),_0x218697=0x0;_0x218697<_0x1b0e57['length'];_0x218697++)if(_0x1b0e57[_0x218697]!==_0x4f7934(0xf3))__createBinding(_0x4603ff,_0x284643,_0x1b0e57[_0x218697]);}return __setModuleDefault(_0x4603ff,_0x284643),_0x4603ff;};}());Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a4_0x1e40f1(0xd9)]=void 0x0;const authService_1=require(a4_0x1e40f1(0xe0)),tokenBlacklistService_1=require(a4_0x1e40f1(0xd5)),telegramBotService_1=require(a4_0x1e40f1(0xf7));function a4_0x5ab2(){const _0x2af363=['logout','getOwnPropertyDescriptor','body','configurable','AuthService','shop','defineProperty','call','../services/tokenBlacklistService','json','user','48YccfSN','AuthController','Logged\x20out\x20successfully','blacklistToken','role','2343eyJupk','getOwnPropertyNames','653035fkXVIs','../services/authService','login','__createBinding','146844ICqWcP','create','__esModule','32nZffHJ','telegramBotService','3659607uEMMUa','10fnaocL','token','tokenBlacklistService','exp','length','sendLoginNotification','Failed\x20to\x20send\x20failed\x20login\x20notification:','276578tmmQpI','1855773DvMDWd','getStats','default','unknown','remoteAddress','1896DTgITw','../services/telegramBotService','error','get','prototype','resolve','findUnique','8058djgZbh','authService','connection','then','6151360RAtHfe','username'];a4_0x5ab2=function(){return _0x2af363;};return a4_0x5ab2();}class AuthController{constructor(){const _0x45ece8=a4_0x1e40f1;this[_0x45ece8(0xe1)]=async(_0x3d8365,_0xdfb5bb,_0x5a3d2d)=>{const _0x7881a=_0x45ece8;try{const _0x33e173=_0x3d8365[_0x7881a(0xcf)],_0x5d2b9e=_0x3d8365['ip']||_0x3d8365[_0x7881a(0xc9)][_0x7881a(0xf5)]||_0x7881a(0xf4),_0x3c7fc1=_0x3d8365[_0x7881a(0xf9)]('User-Agent')||_0x7881a(0xf4);let _0x25552d=![],_0x398892=null;try{const _0xe5a60f=await this[_0x7881a(0xc8)][_0x7881a(0xe1)](_0x33e173);_0x25552d=!![],_0xe5a60f[_0x7881a(0xdc)]===_0x7881a(0xd2)&&_0xe5a60f['user']?.['id']&&(_0x398892=_0xe5a60f[_0x7881a(0xd7)]['id']),_0x398892&&await telegramBotService_1[_0x7881a(0xe7)][_0x7881a(0xee)](_0x398892,{'username':_0x33e173[_0x7881a(0xcc)],'ipAddress':_0x5d2b9e,'userAgent':_0x3c7fc1,'timestamp':new Date(),'success':!![]}),_0xdfb5bb['json']({'success':!![],'result':_0xe5a60f});}catch(_0x20d2d1){try{const _0x4eb4e0=(await Promise[_0x7881a(0xc5)]()[_0x7881a(0xca)](()=>__importStar(require('../config/database'))))[_0x7881a(0xf3)],_0x4b930a=await _0x4eb4e0[_0x7881a(0xd2)][_0x7881a(0xc6)]({'where':{'username':_0x33e173[_0x7881a(0xcc)]},'select':{'id':!![]}});_0x4b930a&&await telegramBotService_1['telegramBotService'][_0x7881a(0xee)](_0x4b930a['id'],{'username':_0x33e173[_0x7881a(0xcc)],'ipAddress':_0x5d2b9e,'userAgent':_0x3c7fc1,'timestamp':new Date(),'success':![]});}catch(_0x10e442){console[_0x7881a(0xf8)](_0x7881a(0xef),_0x10e442);}throw _0x20d2d1;}}catch(_0x46b8dc){_0x5a3d2d(_0x46b8dc);}},this['me']=async(_0x432b17,_0x1a0788,_0x36178b)=>{const _0x185f2d=_0x45ece8;try{const _0x2cf665=_0x432b17[_0x185f2d(0xd7)];_0x1a0788[_0x185f2d(0xd6)]({'success':!![],'result':{'id':_0x2cf665?.['id'],'username':_0x2cf665?.[_0x185f2d(0xcc)],'role':_0x2cf665?.['role']}});}catch(_0x1161ac){_0x36178b(_0x1161ac);}},this[_0x45ece8(0xcd)]=async(_0x1cda15,_0x282d90,_0x413a52)=>{const _0x3e1a0a=_0x45ece8;try{const _0x4df45f=_0x1cda15[_0x3e1a0a(0xea)],_0x5cb374=_0x1cda15[_0x3e1a0a(0xd7)];_0x4df45f&&_0x5cb374?.['exp']&&tokenBlacklistService_1[_0x3e1a0a(0xeb)][_0x3e1a0a(0xdb)](_0x4df45f,_0x5cb374[_0x3e1a0a(0xec)]),_0x282d90[_0x3e1a0a(0xd6)]({'success':!![],'message':_0x3e1a0a(0xda)});}catch(_0x281ee1){_0x413a52(_0x281ee1);}},this['getBlacklistStats']=async(_0x14fde7,_0x3ce3b4,_0x1d67ec)=>{const _0x52c894=_0x45ece8;try{const _0x258011=tokenBlacklistService_1[_0x52c894(0xeb)][_0x52c894(0xf2)]();_0x3ce3b4[_0x52c894(0xd6)]({'success':!![],'result':_0x258011});}catch(_0xff193f){_0x1d67ec(_0xff193f);}},this[_0x45ece8(0xc8)]=new authService_1[(_0x45ece8(0xd1))]();}}exports['AuthController']=AuthController;