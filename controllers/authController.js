'use strict';const a4_0x3e0605=a4_0x3447;function a4_0x3447(_0x4705f0,_0x10e3fa){const _0x3496f7=a4_0x3496();return a4_0x3447=function(_0x344707,_0x209124){_0x344707=_0x344707-0x1ab;let _0x3f19=_0x3496f7[_0x344707];return _0x3f19;},a4_0x3447(_0x4705f0,_0x10e3fa);}(function(_0x27996e,_0xd65474){const _0x5a1b3e=a4_0x3447,_0x3cd3c8=_0x27996e();while(!![]){try{const _0x20e84d=parseInt(_0x5a1b3e(0x1ae))/0x1*(-parseInt(_0x5a1b3e(0x1c0))/0x2)+parseInt(_0x5a1b3e(0x1bc))/0x3+parseInt(_0x5a1b3e(0x1d6))/0x4*(parseInt(_0x5a1b3e(0x1d9))/0x5)+-parseInt(_0x5a1b3e(0x1d1))/0x6+-parseInt(_0x5a1b3e(0x1cd))/0x7*(parseInt(_0x5a1b3e(0x1db))/0x8)+-parseInt(_0x5a1b3e(0x1be))/0x9*(-parseInt(_0x5a1b3e(0x1d3))/0xa)+parseInt(_0x5a1b3e(0x1c4))/0xb;if(_0x20e84d===_0xd65474)break;else _0x3cd3c8['push'](_0x3cd3c8['shift']());}catch(_0x9c172d){_0x3cd3c8['push'](_0x3cd3c8['shift']());}}}(a4_0x3496,0x5e1a1));var __createBinding=this&&this[a4_0x3e0605(0x1ab)]||(Object[a4_0x3e0605(0x1d2)]?function(_0xa7e3c3,_0x114344,_0x15ff3a,_0xbcba1f){const _0x23297e=a4_0x3e0605;if(_0xbcba1f===undefined)_0xbcba1f=_0x15ff3a;var _0x15c5f5=Object['getOwnPropertyDescriptor'](_0x114344,_0x15ff3a);(!_0x15c5f5||(_0x23297e(0x1dd)in _0x15c5f5?!_0x114344[_0x23297e(0x1ba)]:_0x15c5f5[_0x23297e(0x1d4)]||_0x15c5f5[_0x23297e(0x1af)]))&&(_0x15c5f5={'enumerable':!![],'get':function(){return _0x114344[_0x15ff3a];}}),Object[_0x23297e(0x1da)](_0xa7e3c3,_0xbcba1f,_0x15c5f5);}:function(_0x23bf64,_0x4420bc,_0x2f5331,_0x591024){if(_0x591024===undefined)_0x591024=_0x2f5331;_0x23bf64[_0x591024]=_0x4420bc[_0x2f5331];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a4_0x3e0605(0x1d2)]?function(_0x4b7ed5,_0x3798a3){const _0x5eb413=a4_0x3e0605;Object[_0x5eb413(0x1da)](_0x4b7ed5,_0x5eb413(0x1c6),{'enumerable':!![],'value':_0x3798a3});}:function(_0x8daad4,_0x24e9ce){const _0x4f5fc8=a4_0x3e0605;_0x8daad4[_0x4f5fc8(0x1c6)]=_0x24e9ce;}),__importStar=this&&this[a4_0x3e0605(0x1b0)]||(function(){var _0x3f9c8f=function(_0x56cb48){const _0x369215=a4_0x3447;return _0x3f9c8f=Object[_0x369215(0x1cf)]||function(_0x4a48c4){const _0x4c231d=_0x369215;var _0x2139bd=[];for(var _0xfb9a52 in _0x4a48c4)if(Object[_0x4c231d(0x1d7)][_0x4c231d(0x1b8)][_0x4c231d(0x1cc)](_0x4a48c4,_0xfb9a52))_0x2139bd[_0x2139bd['length']]=_0xfb9a52;return _0x2139bd;},_0x3f9c8f(_0x56cb48);};return function(_0x110822){const _0x23ce15=a4_0x3447;if(_0x110822&&_0x110822[_0x23ce15(0x1ba)])return _0x110822;var _0x7e24a7={};if(_0x110822!=null){for(var _0x4487c4=_0x3f9c8f(_0x110822),_0x522356=0x0;_0x522356<_0x4487c4['length'];_0x522356++)if(_0x4487c4[_0x522356]!=='default')__createBinding(_0x7e24a7,_0x110822,_0x4487c4[_0x522356]);}return __setModuleDefault(_0x7e24a7,_0x110822),_0x7e24a7;};}());function a4_0x3496(){const _0x3c3ddf=['body','2042QEKqqP','configurable','__importStar','Logged\x20out\x20successfully','blacklistToken','then','remoteAddress','json','../services/telegramBotService','unknown','hasOwnProperty','../services/tokenBlacklistService','__esModule','AuthService','1735851xPXybk','getStats','153PzTETk','shop','192vpXsPC','user','error','login','7222226FpkUCR','../services/authService','default','authService','AuthController','connection','token','User-Agent','call','560GWNkXx','username','getOwnPropertyNames','tokenBlacklistService','3685002nBlnZl','create','125590XIIjWD','writable','role','24UTmGHN','prototype','telegramBotService','68995Deewba','defineProperty','33584gNdGgY','logout','get','getBlacklistStats','sendLoginNotification','__createBinding','../config/database'];a4_0x3496=function(){return _0x3c3ddf;};return a4_0x3496();}Object[a4_0x3e0605(0x1da)](exports,a4_0x3e0605(0x1ba),{'value':!![]}),exports[a4_0x3e0605(0x1c8)]=void 0x0;const authService_1=require(a4_0x3e0605(0x1c5)),tokenBlacklistService_1=require(a4_0x3e0605(0x1b9)),telegramBotService_1=require(a4_0x3e0605(0x1b6));class AuthController{constructor(){const _0x65d9c6=a4_0x3e0605;this[_0x65d9c6(0x1c3)]=async(_0x1e9cfa,_0x42c448,_0x1a9c5f)=>{const _0x5ca81e=_0x65d9c6;try{const _0x42ee70=_0x1e9cfa[_0x5ca81e(0x1ad)],_0x3166e0=_0x1e9cfa['ip']||_0x1e9cfa[_0x5ca81e(0x1c9)][_0x5ca81e(0x1b4)]||'unknown',_0x357404=_0x1e9cfa[_0x5ca81e(0x1dd)](_0x5ca81e(0x1cb))||_0x5ca81e(0x1b7);let _0x55e0e3=![],_0x50983e=null;try{const _0x273ed5=await this[_0x5ca81e(0x1c7)][_0x5ca81e(0x1c3)](_0x42ee70);_0x55e0e3=!![],_0x273ed5[_0x5ca81e(0x1d5)]===_0x5ca81e(0x1bf)&&_0x273ed5[_0x5ca81e(0x1c1)]?.['id']&&(_0x50983e=_0x273ed5[_0x5ca81e(0x1c1)]['id']),_0x50983e&&await telegramBotService_1[_0x5ca81e(0x1d8)][_0x5ca81e(0x1df)](_0x50983e,{'username':_0x42ee70[_0x5ca81e(0x1ce)],'ipAddress':_0x3166e0,'userAgent':_0x357404,'timestamp':new Date(),'success':!![]}),_0x42c448[_0x5ca81e(0x1b5)]({'success':!![],'result':_0x273ed5});}catch(_0x1876ef){try{const _0x2ddd93=(await Promise['resolve']()[_0x5ca81e(0x1b3)](()=>__importStar(require(_0x5ca81e(0x1ac)))))[_0x5ca81e(0x1c6)],_0x2624f9=await _0x2ddd93[_0x5ca81e(0x1bf)]['findUnique']({'where':{'username':_0x42ee70[_0x5ca81e(0x1ce)]},'select':{'id':!![]}});_0x2624f9&&await telegramBotService_1[_0x5ca81e(0x1d8)][_0x5ca81e(0x1df)](_0x2624f9['id'],{'username':_0x42ee70[_0x5ca81e(0x1ce)],'ipAddress':_0x3166e0,'userAgent':_0x357404,'timestamp':new Date(),'success':![]});}catch(_0x1045b7){console[_0x5ca81e(0x1c2)]('Failed\x20to\x20send\x20failed\x20login\x20notification:',_0x1045b7);}throw _0x1876ef;}}catch(_0x126397){_0x1a9c5f(_0x126397);}},this['me']=async(_0x51cfc1,_0x397d05,_0x43f2c6)=>{const _0x329f9f=_0x65d9c6;try{const _0x2729e2=_0x51cfc1['user'];_0x397d05[_0x329f9f(0x1b5)]({'success':!![],'result':{'id':_0x2729e2?.['id'],'username':_0x2729e2?.['username'],'role':_0x2729e2?.['role']}});}catch(_0x1c4975){_0x43f2c6(_0x1c4975);}},this[_0x65d9c6(0x1dc)]=async(_0x345423,_0x25b6f1,_0x3ffcb5)=>{const _0x34128d=_0x65d9c6;try{const _0x408424=_0x345423[_0x34128d(0x1ca)],_0x2461e0=_0x345423['user'];_0x408424&&_0x2461e0?.['exp']&&tokenBlacklistService_1[_0x34128d(0x1d0)][_0x34128d(0x1b2)](_0x408424,_0x2461e0['exp']),_0x25b6f1['json']({'success':!![],'message':_0x34128d(0x1b1)});}catch(_0x191eec){_0x3ffcb5(_0x191eec);}},this[_0x65d9c6(0x1de)]=async(_0x4feb02,_0x34de8c,_0x1dec0c)=>{const _0x32bf15=_0x65d9c6;try{const _0x4b4527=tokenBlacklistService_1[_0x32bf15(0x1d0)][_0x32bf15(0x1bd)]();_0x34de8c['json']({'success':!![],'result':_0x4b4527});}catch(_0xee97a6){_0x1dec0c(_0xee97a6);}},this[_0x65d9c6(0x1c7)]=new authService_1[(_0x65d9c6(0x1bb))]();}}exports[a4_0x3e0605(0x1c8)]=AuthController;