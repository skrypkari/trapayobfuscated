'use strict';function a4_0x5e22(){const _0x47f959=['get','default','blacklistToken','77kwSQPr','42504JOfJmf','telegramBotService','../config/database','login','159355LQiyCF','defineProperty','exp','length','../services/tokenBlacklistService','unknown','177701CThtWU','221511RXUnlG','shop','User-Agent','__setModuleDefault','connection','hasOwnProperty','Logged\x20out\x20successfully','token','../services/authService','username','then','logout','43206yygLpK','create','__esModule','4JbsOZD','error','sendLoginNotification','AuthController','remoteAddress','388330Woczwi','getOwnPropertyNames','user','getStats','2ulOiXe','prototype','9cxTjoV','827128Bhvdrd','role','findUnique','Failed\x20to\x20send\x20failed\x20login\x20notification:','json','55WBfTfS','authService','resolve','writable','../services/telegramBotService','body'];a4_0x5e22=function(){return _0x47f959;};return a4_0x5e22();}const a4_0xe2a276=a4_0x4633;(function(_0x3a594c,_0x41ba4e){const _0x35d14d=a4_0x4633,_0x140c90=_0x3a594c();while(!![]){try{const _0x459294=parseInt(_0x35d14d(0x143))/0x1*(-parseInt(_0x35d14d(0x15c))/0x2)+-parseInt(_0x35d14d(0x144))/0x3*(-parseInt(_0x35d14d(0x153))/0x4)+parseInt(_0x35d14d(0x13d))/0x5+parseInt(_0x35d14d(0x150))/0x6*(parseInt(_0x35d14d(0x138))/0x7)+-parseInt(_0x35d14d(0x15f))/0x8*(parseInt(_0x35d14d(0x15e))/0x9)+parseInt(_0x35d14d(0x158))/0xa*(parseInt(_0x35d14d(0x164))/0xb)+parseInt(_0x35d14d(0x139))/0xc;if(_0x459294===_0x41ba4e)break;else _0x140c90['push'](_0x140c90['shift']());}catch(_0x31959b){_0x140c90['push'](_0x140c90['shift']());}}}(a4_0x5e22,0x18c9e));function a4_0x4633(_0x424a69,_0x5be689){const _0x5e220c=a4_0x5e22();return a4_0x4633=function(_0x463339,_0x58fa3a){_0x463339=_0x463339-0x136;let _0x2b2d9a=_0x5e220c[_0x463339];return _0x2b2d9a;},a4_0x4633(_0x424a69,_0x5be689);}var __createBinding=this&&this['__createBinding']||(Object[a4_0xe2a276(0x151)]?function(_0x637d48,_0x4e1558,_0x1f2fef,_0x58f4c1){const _0x224690=a4_0xe2a276;if(_0x58f4c1===undefined)_0x58f4c1=_0x1f2fef;var _0x4a2644=Object['getOwnPropertyDescriptor'](_0x4e1558,_0x1f2fef);(!_0x4a2644||(_0x224690(0x16a)in _0x4a2644?!_0x4e1558['__esModule']:_0x4a2644[_0x224690(0x167)]||_0x4a2644['configurable']))&&(_0x4a2644={'enumerable':!![],'get':function(){return _0x4e1558[_0x1f2fef];}}),Object[_0x224690(0x13e)](_0x637d48,_0x58f4c1,_0x4a2644);}:function(_0x4b102c,_0xd24923,_0x359833,_0x4f65b0){if(_0x4f65b0===undefined)_0x4f65b0=_0x359833;_0x4b102c[_0x4f65b0]=_0xd24923[_0x359833];}),__setModuleDefault=this&&this[a4_0xe2a276(0x147)]||(Object['create']?function(_0x515eb0,_0x5393d0){const _0x131565=a4_0xe2a276;Object[_0x131565(0x13e)](_0x515eb0,'default',{'enumerable':!![],'value':_0x5393d0});}:function(_0x17d6e5,_0x27d8a7){const _0x4b916f=a4_0xe2a276;_0x17d6e5[_0x4b916f(0x136)]=_0x27d8a7;}),__importStar=this&&this['__importStar']||(function(){var _0xfae0a6=function(_0x5016b2){const _0x257280=a4_0x4633;return _0xfae0a6=Object[_0x257280(0x159)]||function(_0x39f7b3){const _0x105ef4=_0x257280;var _0xe9df17=[];for(var _0x3c7c6b in _0x39f7b3)if(Object[_0x105ef4(0x15d)][_0x105ef4(0x149)]['call'](_0x39f7b3,_0x3c7c6b))_0xe9df17[_0xe9df17[_0x105ef4(0x140)]]=_0x3c7c6b;return _0xe9df17;},_0xfae0a6(_0x5016b2);};return function(_0x46e54a){const _0x377864=a4_0x4633;if(_0x46e54a&&_0x46e54a[_0x377864(0x152)])return _0x46e54a;var _0x5f34bc={};if(_0x46e54a!=null){for(var _0x588ba6=_0xfae0a6(_0x46e54a),_0x282150=0x0;_0x282150<_0x588ba6[_0x377864(0x140)];_0x282150++)if(_0x588ba6[_0x282150]!==_0x377864(0x136))__createBinding(_0x5f34bc,_0x46e54a,_0x588ba6[_0x282150]);}return __setModuleDefault(_0x5f34bc,_0x46e54a),_0x5f34bc;};}());Object[a4_0xe2a276(0x13e)](exports,a4_0xe2a276(0x152),{'value':!![]}),exports[a4_0xe2a276(0x156)]=void 0x0;const authService_1=require(a4_0xe2a276(0x14c)),tokenBlacklistService_1=require(a4_0xe2a276(0x141)),telegramBotService_1=require(a4_0xe2a276(0x168));class AuthController{constructor(){const _0x4a7806=a4_0xe2a276;this[_0x4a7806(0x13c)]=async(_0x209a61,_0x24f612,_0x2eeb1b)=>{const _0x13f33c=_0x4a7806;try{const _0x2a2da4=_0x209a61[_0x13f33c(0x169)],_0x279680=_0x209a61['ip']||_0x209a61[_0x13f33c(0x148)][_0x13f33c(0x157)]||'unknown',_0x8cd790=_0x209a61['get'](_0x13f33c(0x146))||_0x13f33c(0x142);let _0x150e82=![],_0x19812a=null;try{const _0x38a661=await this[_0x13f33c(0x165)][_0x13f33c(0x13c)](_0x2a2da4);_0x150e82=!![],_0x38a661[_0x13f33c(0x160)]===_0x13f33c(0x145)&&_0x38a661['user']?.['id']&&(_0x19812a=_0x38a661['user']['id']),_0x19812a&&await telegramBotService_1[_0x13f33c(0x13a)][_0x13f33c(0x155)](_0x19812a,{'username':_0x2a2da4['username'],'ipAddress':_0x279680,'userAgent':_0x8cd790,'timestamp':new Date(),'success':!![]}),_0x24f612[_0x13f33c(0x163)]({'success':!![],'result':_0x38a661});}catch(_0x177ab0){try{const _0x596f6e=(await Promise[_0x13f33c(0x166)]()[_0x13f33c(0x14e)](()=>__importStar(require(_0x13f33c(0x13b)))))[_0x13f33c(0x136)],_0x5a91de=await _0x596f6e[_0x13f33c(0x145)][_0x13f33c(0x161)]({'where':{'username':_0x2a2da4[_0x13f33c(0x14d)]},'select':{'id':!![]}});_0x5a91de&&await telegramBotService_1[_0x13f33c(0x13a)][_0x13f33c(0x155)](_0x5a91de['id'],{'username':_0x2a2da4['username'],'ipAddress':_0x279680,'userAgent':_0x8cd790,'timestamp':new Date(),'success':![]});}catch(_0x4abb8d){console[_0x13f33c(0x154)](_0x13f33c(0x162),_0x4abb8d);}throw _0x177ab0;}}catch(_0x4f2e70){_0x2eeb1b(_0x4f2e70);}},this['me']=async(_0x4302c1,_0x3f3bfb,_0x4fe0d3)=>{const _0xc556a3=_0x4a7806;try{const _0x198873=_0x4302c1[_0xc556a3(0x15a)];_0x3f3bfb[_0xc556a3(0x163)]({'success':!![],'result':{'id':_0x198873?.['id'],'username':_0x198873?.[_0xc556a3(0x14d)],'role':_0x198873?.[_0xc556a3(0x160)]}});}catch(_0x561f69){_0x4fe0d3(_0x561f69);}},this[_0x4a7806(0x14f)]=async(_0xacfa0e,_0x2288d5,_0x57ec3a)=>{const _0x3090cd=_0x4a7806;try{const _0x1c9280=_0xacfa0e[_0x3090cd(0x14b)],_0x21bec5=_0xacfa0e[_0x3090cd(0x15a)];_0x1c9280&&_0x21bec5?.[_0x3090cd(0x13f)]&&tokenBlacklistService_1['tokenBlacklistService'][_0x3090cd(0x137)](_0x1c9280,_0x21bec5['exp']),_0x2288d5['json']({'success':!![],'message':_0x3090cd(0x14a)});}catch(_0x184270){_0x57ec3a(_0x184270);}},this['getBlacklistStats']=async(_0x2caaa9,_0x2a9e53,_0x37d8a0)=>{const _0x522969=_0x4a7806;try{const _0x2ebdbc=tokenBlacklistService_1['tokenBlacklistService'][_0x522969(0x15b)]();_0x2a9e53[_0x522969(0x163)]({'success':!![],'result':_0x2ebdbc});}catch(_0x6b74cc){_0x37d8a0(_0x6b74cc);}},this['authService']=new authService_1['AuthService']();}}exports[a4_0xe2a276(0x156)]=AuthController;