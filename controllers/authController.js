'use strict';function a4_0x3c4b(_0x1c5f42,_0x12dae0){_0x1c5f42=_0x1c5f42-0x1e5;const _0x3e0033=a4_0x3e00();let _0x3c4b47=_0x3e0033[_0x1c5f42];return _0x3c4b47;}const a4_0x2dbffa=a4_0x3c4b;(function(_0x302a63,_0x3b6ab7){const _0x186030=a4_0x3c4b,_0x10eed1=_0x302a63();while(!![]){try{const _0xe00fc1=-parseInt(_0x186030(0x206))/0x1+-parseInt(_0x186030(0x1e6))/0x2+-parseInt(_0x186030(0x1f1))/0x3+parseInt(_0x186030(0x210))/0x4*(-parseInt(_0x186030(0x216))/0x5)+parseInt(_0x186030(0x20a))/0x6+parseInt(_0x186030(0x219))/0x7*(parseInt(_0x186030(0x1e7))/0x8)+parseInt(_0x186030(0x1fa))/0x9*(parseInt(_0x186030(0x1f4))/0xa);if(_0xe00fc1===_0x3b6ab7)break;else _0x10eed1['push'](_0x10eed1['shift']());}catch(_0x1871e1){_0x10eed1['push'](_0x10eed1['shift']());}}}(a4_0x3e00,0x4794a));var __createBinding=this&&this[a4_0x2dbffa(0x207)]||(Object[a4_0x2dbffa(0x217)]?function(_0x3a1853,_0x57a5e6,_0x149978,_0x4d2d8a){const _0x27476d=a4_0x2dbffa;if(_0x4d2d8a===undefined)_0x4d2d8a=_0x149978;var _0x421a4b=Object[_0x27476d(0x211)](_0x57a5e6,_0x149978);(!_0x421a4b||(_0x27476d(0x1fb)in _0x421a4b?!_0x57a5e6['__esModule']:_0x421a4b[_0x27476d(0x201)]||_0x421a4b['configurable']))&&(_0x421a4b={'enumerable':!![],'get':function(){return _0x57a5e6[_0x149978];}}),Object[_0x27476d(0x1f6)](_0x3a1853,_0x4d2d8a,_0x421a4b);}:function(_0x371a16,_0x3276a3,_0x45c622,_0x589010){if(_0x589010===undefined)_0x589010=_0x45c622;_0x371a16[_0x589010]=_0x3276a3[_0x45c622];}),__setModuleDefault=this&&this[a4_0x2dbffa(0x1f2)]||(Object[a4_0x2dbffa(0x217)]?function(_0x54ac67,_0x31630d){const _0x10f58b=a4_0x2dbffa;Object['defineProperty'](_0x54ac67,_0x10f58b(0x213),{'enumerable':!![],'value':_0x31630d});}:function(_0x4c42e,_0x4eb74e){const _0x4898f1=a4_0x2dbffa;_0x4c42e[_0x4898f1(0x213)]=_0x4eb74e;}),__importStar=this&&this[a4_0x2dbffa(0x1ef)]||(function(){var _0x27a15c=function(_0x1f533d){return _0x27a15c=Object['getOwnPropertyNames']||function(_0x3c61d7){const _0x19c813=a4_0x3c4b;var _0x1cac14=[];for(var _0x2efd97 in _0x3c61d7)if(Object[_0x19c813(0x215)][_0x19c813(0x214)][_0x19c813(0x1eb)](_0x3c61d7,_0x2efd97))_0x1cac14[_0x1cac14[_0x19c813(0x20c)]]=_0x2efd97;return _0x1cac14;},_0x27a15c(_0x1f533d);};return function(_0x19dcff){const _0x358bbd=a4_0x3c4b;if(_0x19dcff&&_0x19dcff[_0x358bbd(0x1ed)])return _0x19dcff;var _0x4e06cb={};if(_0x19dcff!=null){for(var _0x11d4a2=_0x27a15c(_0x19dcff),_0x2cee02=0x0;_0x2cee02<_0x11d4a2['length'];_0x2cee02++)if(_0x11d4a2[_0x2cee02]!=='default')__createBinding(_0x4e06cb,_0x19dcff,_0x11d4a2[_0x2cee02]);}return __setModuleDefault(_0x4e06cb,_0x19dcff),_0x4e06cb;};}());Object[a4_0x2dbffa(0x1f6)](exports,a4_0x2dbffa(0x1ed),{'value':!![]}),exports[a4_0x2dbffa(0x1e9)]=void 0x0;const authService_1=require(a4_0x2dbffa(0x1e5)),tokenBlacklistService_1=require('../services/tokenBlacklistService'),telegramBotService_1=require('../services/telegramBotService');class AuthController{constructor(){const _0x139dbb=a4_0x2dbffa;this[_0x139dbb(0x20e)]=async(_0x5d7993,_0x201018,_0x52372a)=>{const _0x9ff3e9=_0x139dbb;try{const _0x1c34b9=_0x5d7993['body'],_0x3498bc=_0x1c34b9[_0x9ff3e9(0x1f8)]||_0x5d7993['ip']||_0x5d7993['connection'][_0x9ff3e9(0x1f5)]||_0x9ff3e9(0x218),_0x2cef1b=_0x1c34b9[_0x9ff3e9(0x1f7)]||_0x5d7993[_0x9ff3e9(0x1fb)]('User-Agent')||'unknown',_0x944464=_0x1c34b9[_0x9ff3e9(0x1ff)];let _0x46600a=![],_0x5eb103=null;try{const _0xc1d161=await this[_0x9ff3e9(0x20d)]['login'](_0x1c34b9);_0x46600a=!![],_0xc1d161[_0x9ff3e9(0x1fc)]===_0x9ff3e9(0x205)&&_0xc1d161[_0x9ff3e9(0x200)]?.['id']&&(_0x5eb103=_0xc1d161[_0x9ff3e9(0x200)]['id']),_0x5eb103&&await telegramBotService_1[_0x9ff3e9(0x1ee)][_0x9ff3e9(0x1e8)](_0x5eb103,{'username':_0x1c34b9['username'],'ipAddress':_0x3498bc,'userAgent':_0x2cef1b,'geo':_0x944464,'timestamp':new Date(),'success':!![]}),_0x201018[_0x9ff3e9(0x1ea)]({'success':!![],'result':_0xc1d161});}catch(_0x5ab839){try{const _0xc48cbb=(await Promise[_0x9ff3e9(0x203)]()[_0x9ff3e9(0x1f3)](()=>__importStar(require(_0x9ff3e9(0x1ec)))))[_0x9ff3e9(0x213)],_0x5c6298=await _0xc48cbb[_0x9ff3e9(0x205)]['findUnique']({'where':{'username':_0x1c34b9['username']},'select':{'id':!![]}});_0x5c6298&&await telegramBotService_1[_0x9ff3e9(0x1ee)][_0x9ff3e9(0x1e8)](_0x5c6298['id'],{'username':_0x1c34b9[_0x9ff3e9(0x20f)],'ipAddress':_0x3498bc,'userAgent':_0x2cef1b,'geo':_0x944464,'timestamp':new Date(),'success':![]});}catch(_0x9e1f94){console['error'](_0x9ff3e9(0x208),_0x9e1f94);}throw _0x5ab839;}}catch(_0x151c27){_0x52372a(_0x151c27);}},this['me']=async(_0x1a0afb,_0x557705,_0x181487)=>{const _0x36725a=_0x139dbb;try{const _0x594a6a=_0x1a0afb[_0x36725a(0x200)];_0x557705[_0x36725a(0x1ea)]({'success':!![],'result':{'id':_0x594a6a?.['id'],'username':_0x594a6a?.[_0x36725a(0x20f)],'role':_0x594a6a?.['role']}});}catch(_0x46f64a){_0x181487(_0x46f64a);}},this[_0x139dbb(0x20b)]=async(_0x2945c0,_0x55eef9,_0x808268)=>{const _0x4ad241=_0x139dbb;try{const _0x341286=_0x2945c0[_0x4ad241(0x209)],_0x4afa62=_0x2945c0[_0x4ad241(0x200)];_0x341286&&_0x4afa62?.[_0x4ad241(0x212)]&&tokenBlacklistService_1[_0x4ad241(0x1f9)][_0x4ad241(0x202)](_0x341286,_0x4afa62['exp']),_0x55eef9[_0x4ad241(0x1ea)]({'success':!![],'message':_0x4ad241(0x1fd)});}catch(_0x23f59b){_0x808268(_0x23f59b);}},this[_0x139dbb(0x1f0)]=async(_0x25f172,_0x188953,_0x3e4891)=>{const _0x4fc14e=_0x139dbb;try{const _0xdf2c83=tokenBlacklistService_1[_0x4fc14e(0x1f9)][_0x4fc14e(0x204)]();_0x188953[_0x4fc14e(0x1ea)]({'success':!![],'result':_0xdf2c83});}catch(_0x250bb9){_0x3e4891(_0x250bb9);}},this['authService']=new authService_1[(_0x139dbb(0x1fe))]();}}exports[a4_0x2dbffa(0x1e9)]=AuthController;function a4_0x3e00(){const _0x13671a=['tokenBlacklistService','11860389CIMzpr','get','role','Logged\x20out\x20successfully','AuthService','geo','user','writable','blacklistToken','resolve','getStats','shop','189162qmobwF','__createBinding','Failed\x20to\x20send\x20failed\x20login\x20notification:','token','2542542vpEXpm','logout','length','authService','login','username','1745764pWedVA','getOwnPropertyDescriptor','exp','default','hasOwnProperty','prototype','5UmBuqw','create','unknown','35ADrYOI','../services/authService','934340dfkgIW','306368EgbQUN','sendLoginNotification','AuthController','json','call','../config/database','__esModule','telegramBotService','__importStar','getBlacklistStats','1641273VrmHBU','__setModuleDefault','then','10WXCZLK','remoteAddress','defineProperty','userAgent','ipAddress'];a4_0x3e00=function(){return _0x13671a;};return a4_0x3e00();}