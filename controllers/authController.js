'use strict';const a4_0x3b2ae7=a4_0x3daa;(function(_0xcf82dd,_0x1c6af8){const _0x1bd7cb=a4_0x3daa,_0x495b7a=_0xcf82dd();while(!![]){try{const _0x1bd06f=-parseInt(_0x1bd7cb(0x118))/0x1*(-parseInt(_0x1bd7cb(0x10a))/0x2)+parseInt(_0x1bd7cb(0xf0))/0x3*(parseInt(_0x1bd7cb(0xee))/0x4)+parseInt(_0x1bd7cb(0x103))/0x5*(-parseInt(_0x1bd7cb(0x11e))/0x6)+-parseInt(_0x1bd7cb(0xfe))/0x7*(parseInt(_0x1bd7cb(0xec))/0x8)+-parseInt(_0x1bd7cb(0x11f))/0x9+-parseInt(_0x1bd7cb(0xea))/0xa*(parseInt(_0x1bd7cb(0xf6))/0xb)+parseInt(_0x1bd7cb(0xf1))/0xc*(parseInt(_0x1bd7cb(0x100))/0xd);if(_0x1bd06f===_0x1c6af8)break;else _0x495b7a['push'](_0x495b7a['shift']());}catch(_0x48bef8){_0x495b7a['push'](_0x495b7a['shift']());}}}(a4_0x7b98,0x83138));var __createBinding=this&&this[a4_0x3b2ae7(0x105)]||(Object['create']?function(_0x2fb5a0,_0x5e0e12,_0x5159b8,_0x72f8fb){const _0xe170a2=a4_0x3b2ae7;if(_0x72f8fb===undefined)_0x72f8fb=_0x5159b8;var _0x41ca21=Object['getOwnPropertyDescriptor'](_0x5e0e12,_0x5159b8);(!_0x41ca21||(_0xe170a2(0xf7)in _0x41ca21?!_0x5e0e12['__esModule']:_0x41ca21[_0xe170a2(0x102)]||_0x41ca21['configurable']))&&(_0x41ca21={'enumerable':!![],'get':function(){return _0x5e0e12[_0x5159b8];}}),Object[_0xe170a2(0x112)](_0x2fb5a0,_0x72f8fb,_0x41ca21);}:function(_0x26bcc9,_0x5cf22e,_0x467de4,_0x342124){if(_0x342124===undefined)_0x342124=_0x467de4;_0x26bcc9[_0x342124]=_0x5cf22e[_0x467de4];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a4_0x3b2ae7(0x116)]?function(_0x58acd0,_0x5be617){const _0x3c25f0=a4_0x3b2ae7;Object[_0x3c25f0(0x112)](_0x58acd0,_0x3c25f0(0x11a),{'enumerable':!![],'value':_0x5be617});}:function(_0x372aa7,_0x476bb3){const _0x152c58=a4_0x3b2ae7;_0x372aa7[_0x152c58(0x11a)]=_0x476bb3;}),__importStar=this&&this[a4_0x3b2ae7(0xe9)]||(function(){var _0x2c08eb=function(_0xb4dffe){const _0x41b9fa=a4_0x3daa;return _0x2c08eb=Object[_0x41b9fa(0x11d)]||function(_0x197235){const _0x3f4746=_0x41b9fa;var _0x367211=[];for(var _0x5dc2c9 in _0x197235)if(Object[_0x3f4746(0x114)][_0x3f4746(0xf8)][_0x3f4746(0xf4)](_0x197235,_0x5dc2c9))_0x367211[_0x367211['length']]=_0x5dc2c9;return _0x367211;},_0x2c08eb(_0xb4dffe);};return function(_0xce232){const _0x5900f7=a4_0x3daa;if(_0xce232&&_0xce232[_0x5900f7(0xef)])return _0xce232;var _0x2f52fa={};if(_0xce232!=null){for(var _0x3d8d06=_0x2c08eb(_0xce232),_0x242269=0x0;_0x242269<_0x3d8d06[_0x5900f7(0x109)];_0x242269++)if(_0x3d8d06[_0x242269]!==_0x5900f7(0x11a))__createBinding(_0x2f52fa,_0xce232,_0x3d8d06[_0x242269]);}return __setModuleDefault(_0x2f52fa,_0xce232),_0x2f52fa;};}());function a4_0x3daa(_0x509ea9,_0xa40d4b){const _0x7b98f9=a4_0x7b98();return a4_0x3daa=function(_0x3daa1e,_0x343af4){_0x3daa1e=_0x3daa1e-0xe7;let _0x52105e=_0x7b98f9[_0x3daa1e];return _0x52105e;},a4_0x3daa(_0x509ea9,_0xa40d4b);}Object[a4_0x3b2ae7(0x112)](exports,a4_0x3b2ae7(0xef),{'value':!![]}),exports[a4_0x3b2ae7(0xf5)]=void 0x0;const authService_1=require(a4_0x3b2ae7(0x11b)),tokenBlacklistService_1=require(a4_0x3b2ae7(0xf2)),telegramBotService_1=require(a4_0x3b2ae7(0xfc));class AuthController{constructor(){const _0x43affd=a4_0x3b2ae7;this[_0x43affd(0x119)]=async(_0x1d6deb,_0x388c76,_0x4ec608)=>{const _0xf881b9=_0x43affd;try{const _0x5054f5=_0x1d6deb[_0xf881b9(0x101)],_0x482a89=_0x1d6deb['ip']||_0x1d6deb[_0xf881b9(0x106)][_0xf881b9(0x111)]||_0xf881b9(0x115),_0x2ca6ad=_0x1d6deb[_0xf881b9(0xf7)](_0xf881b9(0xe7))||'unknown';let _0x4413f5=![],_0x27e1e8=null;try{const _0x1b71be=await this[_0xf881b9(0xf9)][_0xf881b9(0x119)](_0x5054f5);_0x4413f5=!![],_0x1b71be[_0xf881b9(0xe8)]===_0xf881b9(0x108)&&_0x1b71be[_0xf881b9(0x107)]?.['id']&&(_0x27e1e8=_0x1b71be[_0xf881b9(0x107)]['id']),_0x27e1e8&&await telegramBotService_1[_0xf881b9(0x10e)][_0xf881b9(0xfa)](_0x27e1e8,{'username':_0x5054f5['username'],'ipAddress':_0x482a89,'userAgent':_0x2ca6ad,'timestamp':new Date(),'success':!![]}),_0x388c76[_0xf881b9(0x117)]({'success':!![],'result':_0x1b71be});}catch(_0x9c9a78){try{const _0x278355=(await Promise['resolve']()[_0xf881b9(0x110)](()=>__importStar(require(_0xf881b9(0xfd)))))[_0xf881b9(0x11a)],_0x2c02e8=await _0x278355[_0xf881b9(0x108)][_0xf881b9(0x10d)]({'where':{'username':_0x5054f5['username']},'select':{'id':!![]}});_0x2c02e8&&await telegramBotService_1[_0xf881b9(0x10e)]['sendLoginNotification'](_0x2c02e8['id'],{'username':_0x5054f5[_0xf881b9(0x10c)],'ipAddress':_0x482a89,'userAgent':_0x2ca6ad,'timestamp':new Date(),'success':![]});}catch(_0x1d102d){console[_0xf881b9(0x10f)](_0xf881b9(0x10b),_0x1d102d);}throw _0x9c9a78;}}catch(_0x4c0b5b){_0x4ec608(_0x4c0b5b);}},this['me']=async(_0xcba95c,_0x29f27c,_0x478138)=>{const _0x2bbd3c=_0x43affd;try{const _0x482c51=_0xcba95c[_0x2bbd3c(0x107)];_0x29f27c['json']({'success':!![],'result':{'id':_0x482c51?.['id'],'username':_0x482c51?.[_0x2bbd3c(0x10c)],'role':_0x482c51?.[_0x2bbd3c(0xe8)]}});}catch(_0x59d196){_0x478138(_0x59d196);}},this[_0x43affd(0xff)]=async(_0x530513,_0x3c8e49,_0x4f3129)=>{const _0x1f5881=_0x43affd;try{const _0x511432=_0x530513[_0x1f5881(0x104)],_0x2fabe4=_0x530513[_0x1f5881(0x107)];_0x511432&&_0x2fabe4?.[_0x1f5881(0x113)]&&tokenBlacklistService_1[_0x1f5881(0xf3)][_0x1f5881(0xeb)](_0x511432,_0x2fabe4[_0x1f5881(0x113)]),_0x3c8e49['json']({'success':!![],'message':_0x1f5881(0xfb)});}catch(_0x1e3948){_0x4f3129(_0x1e3948);}},this['getBlacklistStats']=async(_0x5df5a6,_0x2f0da4,_0x1c653a)=>{const _0x26d5c5=_0x43affd;try{const _0x55e148=tokenBlacklistService_1['tokenBlacklistService'][_0x26d5c5(0xed)]();_0x2f0da4[_0x26d5c5(0x117)]({'success':!![],'result':_0x55e148});}catch(_0x512e38){_0x1c653a(_0x512e38);}},this[_0x43affd(0xf9)]=new authService_1[(_0x43affd(0x11c))]();}}function a4_0x7b98(){const _0x408454=['get','hasOwnProperty','authService','sendLoginNotification','Logged\x20out\x20successfully','../services/telegramBotService','../config/database','2684822SSwMRd','logout','6739213rgrWWg','body','writable','5zlwuvz','token','__createBinding','connection','user','shop','length','1265098YfgIrO','Failed\x20to\x20send\x20failed\x20login\x20notification:','username','findUnique','telegramBotService','error','then','remoteAddress','defineProperty','exp','prototype','unknown','create','json','1oZQSxk','login','default','../services/authService','AuthService','getOwnPropertyNames','3787266sgmcfu','1991520rwTlGN','User-Agent','role','__importStar','866230dzfacQ','blacklistToken','8NaAoKt','getStats','212496PSUPlq','__esModule','6DPLVMZ','48vDyzEh','../services/tokenBlacklistService','tokenBlacklistService','call','AuthController','132advVIY'];a4_0x7b98=function(){return _0x408454;};return a4_0x7b98();}exports[a4_0x3b2ae7(0xf5)]=AuthController;