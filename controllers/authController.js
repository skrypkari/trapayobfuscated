'use strict';function a4_0x4328(_0x1d6e31,_0x6dc025){const _0x356961=a4_0x3569();return a4_0x4328=function(_0x43289c,_0x41973d){_0x43289c=_0x43289c-0x113;let _0x4a5e4b=_0x356961[_0x43289c];return _0x4a5e4b;},a4_0x4328(_0x1d6e31,_0x6dc025);}const a4_0x414222=a4_0x4328;(function(_0x5a390b,_0x504330){const _0x146210=a4_0x4328,_0x3b7b80=_0x5a390b();while(!![]){try{const _0x45b753=-parseInt(_0x146210(0x129))/0x1*(parseInt(_0x146210(0x140))/0x2)+-parseInt(_0x146210(0x117))/0x3+parseInt(_0x146210(0x143))/0x4*(-parseInt(_0x146210(0x11e))/0x5)+-parseInt(_0x146210(0x12e))/0x6+-parseInt(_0x146210(0x13c))/0x7+-parseInt(_0x146210(0x124))/0x8*(-parseInt(_0x146210(0x113))/0x9)+-parseInt(_0x146210(0x115))/0xa*(-parseInt(_0x146210(0x128))/0xb);if(_0x45b753===_0x504330)break;else _0x3b7b80['push'](_0x3b7b80['shift']());}catch(_0x466380){_0x3b7b80['push'](_0x3b7b80['shift']());}}}(a4_0x3569,0x71890));var __createBinding=this&&this[a4_0x414222(0x138)]||(Object[a4_0x414222(0x136)]?function(_0x457b7a,_0x2abb32,_0x174bd8,_0x3d0f59){const _0x490427=a4_0x414222;if(_0x3d0f59===undefined)_0x3d0f59=_0x174bd8;var _0x21a2d8=Object[_0x490427(0x130)](_0x2abb32,_0x174bd8);(!_0x21a2d8||(_0x490427(0x146)in _0x21a2d8?!_0x2abb32[_0x490427(0x12c)]:_0x21a2d8[_0x490427(0x126)]||_0x21a2d8[_0x490427(0x127)]))&&(_0x21a2d8={'enumerable':!![],'get':function(){return _0x2abb32[_0x174bd8];}}),Object['defineProperty'](_0x457b7a,_0x3d0f59,_0x21a2d8);}:function(_0x1eee5e,_0x4c3d27,_0x3e8477,_0x19fd82){if(_0x19fd82===undefined)_0x19fd82=_0x3e8477;_0x1eee5e[_0x19fd82]=_0x4c3d27[_0x3e8477];}),__setModuleDefault=this&&this[a4_0x414222(0x13b)]||(Object[a4_0x414222(0x136)]?function(_0x573230,_0x2f3fb8){const _0x444d12=a4_0x414222;Object[_0x444d12(0x11a)](_0x573230,_0x444d12(0x142),{'enumerable':!![],'value':_0x2f3fb8});}:function(_0x2f9a2b,_0x1d5e9e){const _0x366972=a4_0x414222;_0x2f9a2b[_0x366972(0x142)]=_0x1d5e9e;}),__importStar=this&&this[a4_0x414222(0x11c)]||(function(){var _0x1800da=function(_0xb86f98){const _0x58b8b0=a4_0x4328;return _0x1800da=Object[_0x58b8b0(0x11f)]||function(_0x16b45f){const _0x454a2f=_0x58b8b0;var _0x179351=[];for(var _0x3041a7 in _0x16b45f)if(Object[_0x454a2f(0x131)][_0x454a2f(0x119)][_0x454a2f(0x133)](_0x16b45f,_0x3041a7))_0x179351[_0x179351[_0x454a2f(0x141)]]=_0x3041a7;return _0x179351;},_0x1800da(_0xb86f98);};return function(_0x268621){const _0x3a505a=a4_0x4328;if(_0x268621&&_0x268621[_0x3a505a(0x12c)])return _0x268621;var _0xa1eaac={};if(_0x268621!=null){for(var _0x2ea610=_0x1800da(_0x268621),_0x26f2e5=0x0;_0x26f2e5<_0x2ea610['length'];_0x26f2e5++)if(_0x2ea610[_0x26f2e5]!=='default')__createBinding(_0xa1eaac,_0x268621,_0x2ea610[_0x26f2e5]);}return __setModuleDefault(_0xa1eaac,_0x268621),_0xa1eaac;};}());Object['defineProperty'](exports,a4_0x414222(0x12c),{'value':!![]}),exports[a4_0x414222(0x132)]=void 0x0;const authService_1=require(a4_0x414222(0x13a)),tokenBlacklistService_1=require(a4_0x414222(0x13e)),telegramBotService_1=require(a4_0x414222(0x116));function a4_0x3569(){const _0x26abaa=['../services/tokenBlacklistService','../config/database','514HfxIir','length','default','163768yxngNz','token','User-Agent','get','role','json','getStats','549CqPMhs','sendLoginNotification','2616760MJakRu','../services/telegramBotService','1726911YjgWpC','user','hasOwnProperty','defineProperty','Failed\x20to\x20send\x20failed\x20login\x20notification:','__importStar','findUnique','95GmvSls','getOwnPropertyNames','username','remoteAddress','shop','telegramBotService','62056EFZpcY','connection','writable','configurable','154qShAwW','2830mgtyKz','authService','unknown','__esModule','resolve','4418760vkjlOu','logout','getOwnPropertyDescriptor','prototype','AuthController','call','blacklistToken','getBlacklistStats','create','Logged\x20out\x20successfully','__createBinding','exp','../services/authService','__setModuleDefault','5980072UyMEEM','login'];a4_0x3569=function(){return _0x26abaa;};return a4_0x3569();}class AuthController{constructor(){const _0x1370fc=a4_0x414222;this[_0x1370fc(0x13d)]=async(_0xe7dcd2,_0x239d24,_0x572def)=>{const _0x582a60=_0x1370fc;try{const _0x240425=_0xe7dcd2['body'],_0x25a228=_0xe7dcd2['ip']||_0xe7dcd2[_0x582a60(0x125)][_0x582a60(0x121)]||_0x582a60(0x12b),_0x1962e2=_0xe7dcd2[_0x582a60(0x146)](_0x582a60(0x145))||_0x582a60(0x12b);let _0x492db1=![],_0x134de7=null;try{const _0x2d802d=await this[_0x582a60(0x12a)][_0x582a60(0x13d)](_0x240425);_0x492db1=!![],_0x2d802d[_0x582a60(0x147)]===_0x582a60(0x122)&&_0x2d802d[_0x582a60(0x118)]?.['id']&&(_0x134de7=_0x2d802d[_0x582a60(0x118)]['id']),_0x134de7&&await telegramBotService_1[_0x582a60(0x123)][_0x582a60(0x114)](_0x134de7,{'username':_0x240425[_0x582a60(0x120)],'ipAddress':_0x25a228,'userAgent':_0x1962e2,'timestamp':new Date(),'success':!![]}),_0x239d24[_0x582a60(0x148)]({'success':!![],'result':_0x2d802d});}catch(_0x53adeb){try{const _0xe123a0=(await Promise[_0x582a60(0x12d)]()['then'](()=>__importStar(require(_0x582a60(0x13f)))))['default'],_0x2db244=await _0xe123a0[_0x582a60(0x122)][_0x582a60(0x11d)]({'where':{'username':_0x240425[_0x582a60(0x120)]},'select':{'id':!![]}});_0x2db244&&await telegramBotService_1[_0x582a60(0x123)][_0x582a60(0x114)](_0x2db244['id'],{'username':_0x240425[_0x582a60(0x120)],'ipAddress':_0x25a228,'userAgent':_0x1962e2,'timestamp':new Date(),'success':![]});}catch(_0x320840){console['error'](_0x582a60(0x11b),_0x320840);}throw _0x53adeb;}}catch(_0x2fc99e){_0x572def(_0x2fc99e);}},this['me']=async(_0x24215b,_0x4ca021,_0x5aa90a)=>{const _0x896286=_0x1370fc;try{const _0x11b76f=_0x24215b[_0x896286(0x118)];_0x4ca021[_0x896286(0x148)]({'success':!![],'result':{'id':_0x11b76f?.['id'],'username':_0x11b76f?.[_0x896286(0x120)],'role':_0x11b76f?.[_0x896286(0x147)]}});}catch(_0x4a83c1){_0x5aa90a(_0x4a83c1);}},this[_0x1370fc(0x12f)]=async(_0x424e4e,_0x28216b,_0x1a2481)=>{const _0x48eafd=_0x1370fc;try{const _0x123c1b=_0x424e4e[_0x48eafd(0x144)],_0x2bb587=_0x424e4e[_0x48eafd(0x118)];_0x123c1b&&_0x2bb587?.[_0x48eafd(0x139)]&&tokenBlacklistService_1['tokenBlacklistService'][_0x48eafd(0x134)](_0x123c1b,_0x2bb587[_0x48eafd(0x139)]),_0x28216b[_0x48eafd(0x148)]({'success':!![],'message':_0x48eafd(0x137)});}catch(_0x4f8f60){_0x1a2481(_0x4f8f60);}},this[_0x1370fc(0x135)]=async(_0x524192,_0x5bc2e6,_0x482a76)=>{const _0x546b3b=_0x1370fc;try{const _0x24f737=tokenBlacklistService_1['tokenBlacklistService'][_0x546b3b(0x149)]();_0x5bc2e6['json']({'success':!![],'result':_0x24f737});}catch(_0x36268e){_0x482a76(_0x36268e);}},this[_0x1370fc(0x12a)]=new authService_1['AuthService']();}}exports[a4_0x414222(0x132)]=AuthController;