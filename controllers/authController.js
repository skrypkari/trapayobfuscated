'use strict';const a4_0x128e02=a4_0x8a07;(function(_0x3512d8,_0x1651c9){const _0x23bc24=a4_0x8a07,_0x177c1a=_0x3512d8();while(!![]){try{const _0xa8c26e=-parseInt(_0x23bc24(0x176))/0x1+parseInt(_0x23bc24(0x17c))/0x2*(parseInt(_0x23bc24(0x172))/0x3)+-parseInt(_0x23bc24(0x17d))/0x4*(-parseInt(_0x23bc24(0x190))/0x5)+parseInt(_0x23bc24(0x17a))/0x6*(-parseInt(_0x23bc24(0x173))/0x7)+-parseInt(_0x23bc24(0x174))/0x8+-parseInt(_0x23bc24(0x185))/0x9+parseInt(_0x23bc24(0x165))/0xa*(parseInt(_0x23bc24(0x17b))/0xb);if(_0xa8c26e===_0x1651c9)break;else _0x177c1a['push'](_0x177c1a['shift']());}catch(_0x98efc5){_0x177c1a['push'](_0x177c1a['shift']());}}}(a4_0x228e,0x4844d));var __createBinding=this&&this[a4_0x128e02(0x180)]||(Object[a4_0x128e02(0x192)]?function(_0x40cf22,_0x55fce5,_0x59b176,_0x2672af){const _0x5d9565=a4_0x128e02;if(_0x2672af===undefined)_0x2672af=_0x59b176;var _0x39cf25=Object[_0x5d9565(0x18d)](_0x55fce5,_0x59b176);(!_0x39cf25||('get'in _0x39cf25?!_0x55fce5[_0x5d9565(0x16a)]:_0x39cf25['writable']||_0x39cf25['configurable']))&&(_0x39cf25={'enumerable':!![],'get':function(){return _0x55fce5[_0x59b176];}}),Object[_0x5d9565(0x182)](_0x40cf22,_0x2672af,_0x39cf25);}:function(_0x1cfee0,_0x12a74f,_0x3ed343,_0x5d7ea5){if(_0x5d7ea5===undefined)_0x5d7ea5=_0x3ed343;_0x1cfee0[_0x5d7ea5]=_0x12a74f[_0x3ed343];}),__setModuleDefault=this&&this[a4_0x128e02(0x187)]||(Object['create']?function(_0x3f1a2d,_0x4d1124){const _0x4bb5be=a4_0x128e02;Object[_0x4bb5be(0x182)](_0x3f1a2d,_0x4bb5be(0x194),{'enumerable':!![],'value':_0x4d1124});}:function(_0x53f408,_0x36a5a4){_0x53f408['default']=_0x36a5a4;}),__importStar=this&&this['__importStar']||(function(){var _0x3f5ef1=function(_0x359a6a){const _0x3c6580=a4_0x8a07;return _0x3f5ef1=Object[_0x3c6580(0x18e)]||function(_0x528fa2){const _0x5b3bff=_0x3c6580;var _0x4bb475=[];for(var _0x5194b8 in _0x528fa2)if(Object[_0x5b3bff(0x179)][_0x5b3bff(0x167)][_0x5b3bff(0x183)](_0x528fa2,_0x5194b8))_0x4bb475[_0x4bb475['length']]=_0x5194b8;return _0x4bb475;},_0x3f5ef1(_0x359a6a);};return function(_0x36d7da){const _0x113798=a4_0x8a07;if(_0x36d7da&&_0x36d7da[_0x113798(0x16a)])return _0x36d7da;var _0x23bc58={};if(_0x36d7da!=null){for(var _0x52c2c8=_0x3f5ef1(_0x36d7da),_0x10e053=0x0;_0x10e053<_0x52c2c8['length'];_0x10e053++)if(_0x52c2c8[_0x10e053]!==_0x113798(0x194))__createBinding(_0x23bc58,_0x36d7da,_0x52c2c8[_0x10e053]);}return __setModuleDefault(_0x23bc58,_0x36d7da),_0x23bc58;};}());function a4_0x8a07(_0x593f63,_0x14c608){const _0x228e42=a4_0x228e();return a4_0x8a07=function(_0x8a07b,_0x1907ab){_0x8a07b=_0x8a07b-0x164;let _0x259c64=_0x228e42[_0x8a07b];return _0x259c64;},a4_0x8a07(_0x593f63,_0x14c608);}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a4_0x128e02(0x178)]=void 0x0;const authService_1=require('../services/authService'),tokenBlacklistService_1=require(a4_0x128e02(0x18c)),telegramBotService_1=require(a4_0x128e02(0x188));function a4_0x228e(){const _0xc6b1d9=['prototype','111234llnGFh','9156169fhsMZQ','94ObyflF','1124SznGKK','body','shop','__createBinding','tokenBlacklistService','defineProperty','call','User-Agent','2735505opZrFl','json','__setModuleDefault','../services/telegramBotService','blacklistToken','connection','../config/database','../services/tokenBlacklistService','getOwnPropertyDescriptor','getOwnPropertyNames','unknown','1840gJdEyR','user','create','get','default','telegramBotService','Failed\x20to\x20send\x20failed\x20login\x20notification:','10eJotfB','token','hasOwnProperty','authService','login','__esModule','username','getStats','logout','getBlacklistStats','role','then','AuthService','26157RXhLaZ','35mukmIK','1221904kiLtQk','findUnique','500189RpKpju','exp','AuthController'];a4_0x228e=function(){return _0xc6b1d9;};return a4_0x228e();}class AuthController{constructor(){const _0x18c6b4=a4_0x128e02;this['login']=async(_0x5ac1f6,_0x402c95,_0x33a828)=>{const _0x50a94d=a4_0x8a07;try{const _0x5d6e5f=_0x5ac1f6[_0x50a94d(0x17e)],_0x59366d=_0x5ac1f6['ip']||_0x5ac1f6[_0x50a94d(0x18a)]['remoteAddress']||_0x50a94d(0x18f),_0x1124c8=_0x5ac1f6[_0x50a94d(0x193)](_0x50a94d(0x184))||_0x50a94d(0x18f);let _0xa395e9=![],_0x11e48a=null;try{const _0x5dcf73=await this[_0x50a94d(0x168)][_0x50a94d(0x169)](_0x5d6e5f);_0xa395e9=!![],_0x5dcf73[_0x50a94d(0x16f)]===_0x50a94d(0x17f)&&_0x5dcf73[_0x50a94d(0x191)]?.['id']&&(_0x11e48a=_0x5dcf73[_0x50a94d(0x191)]['id']),_0x11e48a&&await telegramBotService_1[_0x50a94d(0x195)]['sendLoginNotification'](_0x11e48a,{'username':_0x5d6e5f[_0x50a94d(0x16b)],'ipAddress':_0x59366d,'userAgent':_0x1124c8,'timestamp':new Date(),'success':!![]}),_0x402c95[_0x50a94d(0x186)]({'success':!![],'result':_0x5dcf73});}catch(_0x220c5c){try{const _0x496a0d=(await Promise['resolve']()[_0x50a94d(0x170)](()=>__importStar(require(_0x50a94d(0x18b)))))['default'],_0x423ee4=await _0x496a0d[_0x50a94d(0x17f)][_0x50a94d(0x175)]({'where':{'username':_0x5d6e5f[_0x50a94d(0x16b)]},'select':{'id':!![]}});_0x423ee4&&await telegramBotService_1[_0x50a94d(0x195)]['sendLoginNotification'](_0x423ee4['id'],{'username':_0x5d6e5f[_0x50a94d(0x16b)],'ipAddress':_0x59366d,'userAgent':_0x1124c8,'timestamp':new Date(),'success':![]});}catch(_0x2ae3c4){console['error'](_0x50a94d(0x164),_0x2ae3c4);}throw _0x220c5c;}}catch(_0x49e89a){_0x33a828(_0x49e89a);}},this['me']=async(_0x17b310,_0x57a791,_0x1adbc9)=>{const _0x1de13b=a4_0x8a07;try{const _0x1888ce=_0x17b310['user'];_0x57a791[_0x1de13b(0x186)]({'success':!![],'result':{'id':_0x1888ce?.['id'],'username':_0x1888ce?.['username'],'role':_0x1888ce?.[_0x1de13b(0x16f)]}});}catch(_0x5e3665){_0x1adbc9(_0x5e3665);}},this[_0x18c6b4(0x16d)]=async(_0x427288,_0x5a23e2,_0x392bbd)=>{const _0x4f5afe=_0x18c6b4;try{const _0x2f1f6c=_0x427288[_0x4f5afe(0x166)],_0x53d084=_0x427288[_0x4f5afe(0x191)];_0x2f1f6c&&_0x53d084?.[_0x4f5afe(0x177)]&&tokenBlacklistService_1[_0x4f5afe(0x181)][_0x4f5afe(0x189)](_0x2f1f6c,_0x53d084[_0x4f5afe(0x177)]),_0x5a23e2[_0x4f5afe(0x186)]({'success':!![],'message':'Logged\x20out\x20successfully'});}catch(_0x3fa264){_0x392bbd(_0x3fa264);}},this[_0x18c6b4(0x16e)]=async(_0x200e13,_0x57b545,_0x2314aa)=>{const _0xce7575=_0x18c6b4;try{const _0xd4c27f=tokenBlacklistService_1[_0xce7575(0x181)][_0xce7575(0x16c)]();_0x57b545[_0xce7575(0x186)]({'success':!![],'result':_0xd4c27f});}catch(_0x53a4cb){_0x2314aa(_0x53a4cb);}},this[_0x18c6b4(0x168)]=new authService_1[(_0x18c6b4(0x171))]();}}exports[a4_0x128e02(0x178)]=AuthController;