'use strict';const a4_0xc7d1f0=a4_0x1a1e;(function(_0xf00fbb,_0xd28b){const _0x321c2f=a4_0x1a1e,_0x3d54e7=_0xf00fbb();while(!![]){try{const _0x56d529=-parseInt(_0x321c2f(0xc7))/0x1+parseInt(_0x321c2f(0xce))/0x2*(-parseInt(_0x321c2f(0xdb))/0x3)+parseInt(_0x321c2f(0xe3))/0x4*(parseInt(_0x321c2f(0xd4))/0x5)+-parseInt(_0x321c2f(0xec))/0x6*(parseInt(_0x321c2f(0xc3))/0x7)+-parseInt(_0x321c2f(0xcc))/0x8+parseInt(_0x321c2f(0xc5))/0x9+parseInt(_0x321c2f(0xe0))/0xa*(parseInt(_0x321c2f(0xc1))/0xb);if(_0x56d529===_0xd28b)break;else _0x3d54e7['push'](_0x3d54e7['shift']());}catch(_0xfdb63f){_0x3d54e7['push'](_0x3d54e7['shift']());}}}(a4_0x4cf6,0x5ca58));var __createBinding=this&&this[a4_0xc7d1f0(0xbc)]||(Object[a4_0xc7d1f0(0xeb)]?function(_0x884ca2,_0x5666c2,_0x62157,_0x4e13fd){const _0x5967f4=a4_0xc7d1f0;if(_0x4e13fd===undefined)_0x4e13fd=_0x62157;var _0x3cedf6=Object[_0x5967f4(0xea)](_0x5666c2,_0x62157);(!_0x3cedf6||('get'in _0x3cedf6?!_0x5666c2[_0x5967f4(0xed)]:_0x3cedf6[_0x5967f4(0xe8)]||_0x3cedf6['configurable']))&&(_0x3cedf6={'enumerable':!![],'get':function(){return _0x5666c2[_0x62157];}}),Object['defineProperty'](_0x884ca2,_0x4e13fd,_0x3cedf6);}:function(_0x1f89fd,_0x15c783,_0x395f28,_0x464854){if(_0x464854===undefined)_0x464854=_0x395f28;_0x1f89fd[_0x464854]=_0x15c783[_0x395f28];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a4_0xc7d1f0(0xeb)]?function(_0x4cadf7,_0x4257e2){const _0x3fb750=a4_0xc7d1f0;Object['defineProperty'](_0x4cadf7,_0x3fb750(0xe2),{'enumerable':!![],'value':_0x4257e2});}:function(_0xed4ef6,_0x2d17d1){_0xed4ef6['default']=_0x2d17d1;}),__importStar=this&&this[a4_0xc7d1f0(0xdd)]||(function(){var _0x35fb26=function(_0x526278){const _0xe938be=a4_0x1a1e;return _0x35fb26=Object[_0xe938be(0xe9)]||function(_0x2e52a3){const _0x9ff954=_0xe938be;var _0x587642=[];for(var _0x406993 in _0x2e52a3)if(Object[_0x9ff954(0xe6)][_0x9ff954(0xdf)][_0x9ff954(0xc8)](_0x2e52a3,_0x406993))_0x587642[_0x587642[_0x9ff954(0xbe)]]=_0x406993;return _0x587642;},_0x35fb26(_0x526278);};return function(_0x92739a){const _0x1c8a05=a4_0x1a1e;if(_0x92739a&&_0x92739a['__esModule'])return _0x92739a;var _0x4ae459={};if(_0x92739a!=null){for(var _0x44d085=_0x35fb26(_0x92739a),_0x2e9161=0x0;_0x2e9161<_0x44d085[_0x1c8a05(0xbe)];_0x2e9161++)if(_0x44d085[_0x2e9161]!==_0x1c8a05(0xe2))__createBinding(_0x4ae459,_0x92739a,_0x44d085[_0x2e9161]);}return __setModuleDefault(_0x4ae459,_0x92739a),_0x4ae459;};}());Object[a4_0xc7d1f0(0xcf)](exports,a4_0xc7d1f0(0xed),{'value':!![]}),exports[a4_0xc7d1f0(0xd1)]=void 0x0;function a4_0x1a1e(_0x5f4495,_0x311114){const _0x4cf648=a4_0x4cf6();return a4_0x1a1e=function(_0x1a1e31,_0x4de435){_0x1a1e31=_0x1a1e31-0xbb;let _0x34a003=_0x4cf648[_0x1a1e31];return _0x34a003;},a4_0x1a1e(_0x5f4495,_0x311114);}const authService_1=require('../services/authService'),tokenBlacklistService_1=require(a4_0xc7d1f0(0xd2)),telegramBotService_1=require(a4_0xc7d1f0(0xc4));function a4_0x4cf6(){const _0x1b3dcb=['username','telegramBotService','error','role','1169841piSOti','body','__importStar','resolve','hasOwnProperty','993710WTQUxd','Failed\x20to\x20send\x20failed\x20login\x20notification:','default','9828oBrbRN','tokenBlacklistService','getBlacklistStats','prototype','json','writable','getOwnPropertyNames','getOwnPropertyDescriptor','create','912TapRRA','__esModule','authService','shop','__createBinding','Logged\x20out\x20successfully','length','login','User-Agent','33KjrqVG','exp','11123YRvwBd','../services/telegramBotService','5471154sVzCQX','../config/database','6053wySoeU','call','unknown','user','remoteAddress','409384svbvQV','blacklistToken','2NSUbjj','defineProperty','getStats','AuthController','../services/tokenBlacklistService','AuthService','330SqNoOY','sendLoginNotification','get'];a4_0x4cf6=function(){return _0x1b3dcb;};return a4_0x4cf6();}class AuthController{constructor(){const _0x538d9e=a4_0xc7d1f0;this[_0x538d9e(0xbf)]=async(_0x16010a,_0x527830,_0x5bffcc)=>{const _0x52fb89=_0x538d9e;try{const _0x5e21d2=_0x16010a[_0x52fb89(0xdc)],_0x4f3487=_0x16010a['ip']||_0x16010a['connection'][_0x52fb89(0xcb)]||_0x52fb89(0xc9),_0x23311d=_0x16010a[_0x52fb89(0xd6)](_0x52fb89(0xc0))||_0x52fb89(0xc9);let _0x10f282=![],_0x11e1cb=null;try{const _0x1d7df0=await this[_0x52fb89(0xee)][_0x52fb89(0xbf)](_0x5e21d2);_0x10f282=!![],_0x1d7df0[_0x52fb89(0xda)]===_0x52fb89(0xbb)&&_0x1d7df0[_0x52fb89(0xca)]?.['id']&&(_0x11e1cb=_0x1d7df0[_0x52fb89(0xca)]['id']),_0x11e1cb&&await telegramBotService_1[_0x52fb89(0xd8)][_0x52fb89(0xd5)](_0x11e1cb,{'username':_0x5e21d2[_0x52fb89(0xd7)],'ipAddress':_0x4f3487,'userAgent':_0x23311d,'timestamp':new Date(),'success':!![]}),_0x527830[_0x52fb89(0xe7)]({'success':!![],'result':_0x1d7df0});}catch(_0x1038d0){try{const _0x5ba922=(await Promise[_0x52fb89(0xde)]()['then'](()=>__importStar(require(_0x52fb89(0xc6)))))[_0x52fb89(0xe2)],_0x533d90=await _0x5ba922[_0x52fb89(0xbb)]['findUnique']({'where':{'username':_0x5e21d2['username']},'select':{'id':!![]}});_0x533d90&&await telegramBotService_1[_0x52fb89(0xd8)]['sendLoginNotification'](_0x533d90['id'],{'username':_0x5e21d2['username'],'ipAddress':_0x4f3487,'userAgent':_0x23311d,'timestamp':new Date(),'success':![]});}catch(_0x180d3f){console[_0x52fb89(0xd9)](_0x52fb89(0xe1),_0x180d3f);}throw _0x1038d0;}}catch(_0x13c92b){_0x5bffcc(_0x13c92b);}},this['me']=async(_0x5781e2,_0x4866cc,_0x4b503f)=>{const _0x122494=_0x538d9e;try{const _0x16bccd=_0x5781e2['user'];_0x4866cc['json']({'success':!![],'result':{'id':_0x16bccd?.['id'],'username':_0x16bccd?.[_0x122494(0xd7)],'role':_0x16bccd?.[_0x122494(0xda)]}});}catch(_0x281ce2){_0x4b503f(_0x281ce2);}},this['logout']=async(_0x45470a,_0x114d7d,_0x2e8593)=>{const _0x1d5b94=_0x538d9e;try{const _0x4ffbfd=_0x45470a['token'],_0x4f3a8d=_0x45470a[_0x1d5b94(0xca)];_0x4ffbfd&&_0x4f3a8d?.[_0x1d5b94(0xc2)]&&tokenBlacklistService_1['tokenBlacklistService'][_0x1d5b94(0xcd)](_0x4ffbfd,_0x4f3a8d['exp']),_0x114d7d[_0x1d5b94(0xe7)]({'success':!![],'message':_0x1d5b94(0xbd)});}catch(_0x592883){_0x2e8593(_0x592883);}},this[_0x538d9e(0xe5)]=async(_0x3f354e,_0x41e188,_0x2470ae)=>{const _0x2c6bb5=_0x538d9e;try{const _0x346102=tokenBlacklistService_1[_0x2c6bb5(0xe4)][_0x2c6bb5(0xd0)]();_0x41e188[_0x2c6bb5(0xe7)]({'success':!![],'result':_0x346102});}catch(_0x4553a8){_0x2470ae(_0x4553a8);}},this[_0x538d9e(0xee)]=new authService_1[(_0x538d9e(0xd3))]();}}exports['AuthController']=AuthController;