'use strict';const a4_0x4baf97=a4_0x579f;(function(_0xa1654c,_0x4be917){const _0x2188bf=a4_0x579f,_0x2627ae=_0xa1654c();while(!![]){try{const _0x144436=-parseInt(_0x2188bf(0x111))/0x1+-parseInt(_0x2188bf(0xe3))/0x2+-parseInt(_0x2188bf(0x112))/0x3+parseInt(_0x2188bf(0xf0))/0x4+parseInt(_0x2188bf(0xf3))/0x5*(-parseInt(_0x2188bf(0x100))/0x6)+parseInt(_0x2188bf(0x106))/0x7*(parseInt(_0x2188bf(0x104))/0x8)+-parseInt(_0x2188bf(0xed))/0x9*(-parseInt(_0x2188bf(0xf5))/0xa);if(_0x144436===_0x4be917)break;else _0x2627ae['push'](_0x2627ae['shift']());}catch(_0x12ee5d){_0x2627ae['push'](_0x2627ae['shift']());}}}(a4_0x26c6,0xe5d05));function a4_0x579f(_0x161adc,_0x4eb4d7){const _0x26c66a=a4_0x26c6();return a4_0x579f=function(_0x579f6d,_0x1366df){_0x579f6d=_0x579f6d-0xe2;let _0x170592=_0x26c66a[_0x579f6d];return _0x170592;},a4_0x579f(_0x161adc,_0x4eb4d7);}function a4_0x26c6(){const _0x148a91=['configurable','exp','token','json','__esModule','prototype','remoteAddress','default','663584tIMhES','2127396DCRwLE','unknown','540372lbwCLa','connection','__setModuleDefault','sendLoginNotification','writable','findUnique','getBlacklistStats','body','error','get','1638gqoulH','shop','hasOwnProperty','1465104vxFkOp','defineProperty','__importStar','5FVKRra','../services/tokenBlacklistService','48710fKELPT','../config/database','getStats','Failed\x20to\x20send\x20failed\x20login\x20notification:','AuthController','role','tokenBlacklistService','then','username','logout','login','3103374MWQArk','blacklistToken','length','call','80gcxYHV','authService','1294055tszMzf','user','create'];a4_0x26c6=function(){return _0x148a91;};return a4_0x26c6();}var __createBinding=this&&this['__createBinding']||(Object[a4_0x4baf97(0x108)]?function(_0x244288,_0x538c13,_0x3141c8,_0x371486){const _0x3e8020=a4_0x4baf97;if(_0x371486===undefined)_0x371486=_0x3141c8;var _0x47a201=Object['getOwnPropertyDescriptor'](_0x538c13,_0x3141c8);(!_0x47a201||(_0x3e8020(0xec)in _0x47a201?!_0x538c13[_0x3e8020(0x10d)]:_0x47a201[_0x3e8020(0xe7)]||_0x47a201[_0x3e8020(0x109)]))&&(_0x47a201={'enumerable':!![],'get':function(){return _0x538c13[_0x3141c8];}}),Object[_0x3e8020(0xf1)](_0x244288,_0x371486,_0x47a201);}:function(_0x2ba95,_0x16938f,_0x42d56b,_0x1d1539){if(_0x1d1539===undefined)_0x1d1539=_0x42d56b;_0x2ba95[_0x1d1539]=_0x16938f[_0x42d56b];}),__setModuleDefault=this&&this[a4_0x4baf97(0xe5)]||(Object['create']?function(_0x171d59,_0x2473c7){Object['defineProperty'](_0x171d59,'default',{'enumerable':!![],'value':_0x2473c7});}:function(_0x2ca625,_0x3d9c40){const _0x3973be=a4_0x4baf97;_0x2ca625[_0x3973be(0x110)]=_0x3d9c40;}),__importStar=this&&this[a4_0x4baf97(0xf2)]||(function(){var _0x2e7433=function(_0x19e5ba){return _0x2e7433=Object['getOwnPropertyNames']||function(_0x284973){const _0x404070=a4_0x579f;var _0x5d8539=[];for(var _0x17e7ab in _0x284973)if(Object[_0x404070(0x10e)][_0x404070(0xef)][_0x404070(0x103)](_0x284973,_0x17e7ab))_0x5d8539[_0x5d8539[_0x404070(0x102)]]=_0x17e7ab;return _0x5d8539;},_0x2e7433(_0x19e5ba);};return function(_0x46e9c2){const _0x5c2763=a4_0x579f;if(_0x46e9c2&&_0x46e9c2[_0x5c2763(0x10d)])return _0x46e9c2;var _0x408020={};if(_0x46e9c2!=null){for(var _0xd2622f=_0x2e7433(_0x46e9c2),_0x9a9cfe=0x0;_0x9a9cfe<_0xd2622f[_0x5c2763(0x102)];_0x9a9cfe++)if(_0xd2622f[_0x9a9cfe]!==_0x5c2763(0x110))__createBinding(_0x408020,_0x46e9c2,_0xd2622f[_0x9a9cfe]);}return __setModuleDefault(_0x408020,_0x46e9c2),_0x408020;};}());Object['defineProperty'](exports,a4_0x4baf97(0x10d),{'value':!![]}),exports['AuthController']=void 0x0;const authService_1=require('../services/authService'),tokenBlacklistService_1=require(a4_0x4baf97(0xf4)),telegramBotService_1=require('../services/telegramBotService');class AuthController{constructor(){const _0x5eca89=a4_0x4baf97;this[_0x5eca89(0xff)]=async(_0x29c7c9,_0x245d9e,_0x7acd86)=>{const _0x16d97c=_0x5eca89;try{const _0x2d25a1=_0x29c7c9[_0x16d97c(0xea)],_0x1bd677=_0x29c7c9['ip']||_0x29c7c9[_0x16d97c(0xe4)][_0x16d97c(0x10f)]||_0x16d97c(0xe2),_0x487033=_0x29c7c9[_0x16d97c(0xec)]('User-Agent')||_0x16d97c(0xe2);let _0x371359=![],_0xc626fa=null;try{const _0x10c6e8=await this[_0x16d97c(0x105)][_0x16d97c(0xff)](_0x2d25a1);_0x371359=!![],_0x10c6e8['role']==='shop'&&_0x10c6e8[_0x16d97c(0x107)]?.['id']&&(_0xc626fa=_0x10c6e8[_0x16d97c(0x107)]['id']),_0xc626fa&&await telegramBotService_1['telegramBotService'][_0x16d97c(0xe6)](_0xc626fa,{'username':_0x2d25a1[_0x16d97c(0xfd)],'ipAddress':_0x1bd677,'userAgent':_0x487033,'timestamp':new Date(),'success':!![]}),_0x245d9e['json']({'success':!![],'result':_0x10c6e8});}catch(_0x26e7a3){try{const _0x56acea=(await Promise['resolve']()[_0x16d97c(0xfc)](()=>__importStar(require(_0x16d97c(0xf6)))))[_0x16d97c(0x110)],_0x4fd14c=await _0x56acea[_0x16d97c(0xee)][_0x16d97c(0xe8)]({'where':{'username':_0x2d25a1[_0x16d97c(0xfd)]},'select':{'id':!![]}});_0x4fd14c&&await telegramBotService_1['telegramBotService'][_0x16d97c(0xe6)](_0x4fd14c['id'],{'username':_0x2d25a1[_0x16d97c(0xfd)],'ipAddress':_0x1bd677,'userAgent':_0x487033,'timestamp':new Date(),'success':![]});}catch(_0x4ce1f4){console[_0x16d97c(0xeb)](_0x16d97c(0xf8),_0x4ce1f4);}throw _0x26e7a3;}}catch(_0x3d0509){_0x7acd86(_0x3d0509);}},this['me']=async(_0x40a153,_0x5ca692,_0x17de38)=>{const _0x2d3501=_0x5eca89;try{const _0x464f3d=_0x40a153[_0x2d3501(0x107)];_0x5ca692[_0x2d3501(0x10c)]({'success':!![],'result':{'id':_0x464f3d?.['id'],'username':_0x464f3d?.['username'],'role':_0x464f3d?.[_0x2d3501(0xfa)]}});}catch(_0x3c141c){_0x17de38(_0x3c141c);}},this[_0x5eca89(0xfe)]=async(_0x175b1b,_0x71e3c6,_0x602fdc)=>{const _0x5c05fd=_0x5eca89;try{const _0x4432e1=_0x175b1b[_0x5c05fd(0x10b)],_0x5bae59=_0x175b1b[_0x5c05fd(0x107)];_0x4432e1&&_0x5bae59?.[_0x5c05fd(0x10a)]&&tokenBlacklistService_1[_0x5c05fd(0xfb)][_0x5c05fd(0x101)](_0x4432e1,_0x5bae59[_0x5c05fd(0x10a)]),_0x71e3c6[_0x5c05fd(0x10c)]({'success':!![],'message':'Logged\x20out\x20successfully'});}catch(_0x19e5dd){_0x602fdc(_0x19e5dd);}},this[_0x5eca89(0xe9)]=async(_0x50c003,_0x2e9c8c,_0x55175b)=>{const _0x3702d2=_0x5eca89;try{const _0x195ef1=tokenBlacklistService_1['tokenBlacklistService'][_0x3702d2(0xf7)]();_0x2e9c8c['json']({'success':!![],'result':_0x195ef1});}catch(_0x59f80f){_0x55175b(_0x59f80f);}},this[_0x5eca89(0x105)]=new authService_1['AuthService']();}}exports[a4_0x4baf97(0xf9)]=AuthController;