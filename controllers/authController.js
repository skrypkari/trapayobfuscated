'use strict';function a4_0xb0df(_0x5e66c9,_0x241b01){_0x5e66c9=_0x5e66c9-0x1dd;const _0x3deb8b=a4_0x3deb();let _0xb0dfec=_0x3deb8b[_0x5e66c9];return _0xb0dfec;}const a4_0x3a8a43=a4_0xb0df;(function(_0x569f44,_0x5dc3e8){const _0x41d01d=a4_0xb0df,_0xf4019c=_0x569f44();while(!![]){try{const _0x135ec6=-parseInt(_0x41d01d(0x1f1))/0x1+parseInt(_0x41d01d(0x1f2))/0x2*(parseInt(_0x41d01d(0x20c))/0x3)+-parseInt(_0x41d01d(0x1ec))/0x4+-parseInt(_0x41d01d(0x1e8))/0x5*(parseInt(_0x41d01d(0x1e9))/0x6)+parseInt(_0x41d01d(0x208))/0x7+-parseInt(_0x41d01d(0x1f8))/0x8*(parseInt(_0x41d01d(0x201))/0x9)+-parseInt(_0x41d01d(0x209))/0xa*(-parseInt(_0x41d01d(0x20b))/0xb);if(_0x135ec6===_0x5dc3e8)break;else _0xf4019c['push'](_0xf4019c['shift']());}catch(_0x3d47ec){_0xf4019c['push'](_0xf4019c['shift']());}}}(a4_0x3deb,0x95b31));var __createBinding=this&&this[a4_0x3a8a43(0x202)]||(Object[a4_0x3a8a43(0x200)]?function(_0x25dd36,_0x51abcc,_0x2f9322,_0x49bebe){const _0x302ca9=a4_0x3a8a43;if(_0x49bebe===undefined)_0x49bebe=_0x2f9322;var _0x1bbabb=Object['getOwnPropertyDescriptor'](_0x51abcc,_0x2f9322);(!_0x1bbabb||(_0x302ca9(0x1e5)in _0x1bbabb?!_0x51abcc[_0x302ca9(0x1f5)]:_0x1bbabb[_0x302ca9(0x1fc)]||_0x1bbabb[_0x302ca9(0x207)]))&&(_0x1bbabb={'enumerable':!![],'get':function(){return _0x51abcc[_0x2f9322];}}),Object['defineProperty'](_0x25dd36,_0x49bebe,_0x1bbabb);}:function(_0xf593ea,_0x4b16ce,_0x402686,_0x4168bb){if(_0x4168bb===undefined)_0x4168bb=_0x402686;_0xf593ea[_0x4168bb]=_0x4b16ce[_0x402686];}),__setModuleDefault=this&&this[a4_0x3a8a43(0x203)]||(Object[a4_0x3a8a43(0x200)]?function(_0x43f3bf,_0x2f7e8f){const _0x565153=a4_0x3a8a43;Object['defineProperty'](_0x43f3bf,_0x565153(0x204),{'enumerable':!![],'value':_0x2f7e8f});}:function(_0x2ea277,_0x13dfb2){_0x2ea277['default']=_0x13dfb2;}),__importStar=this&&this[a4_0x3a8a43(0x1fe)]||(function(){var _0x536fe2=function(_0x13e15b){const _0x119934=a4_0xb0df;return _0x536fe2=Object[_0x119934(0x1f3)]||function(_0x544d00){const _0x41d0ba=_0x119934;var _0x102609=[];for(var _0x2bb677 in _0x544d00)if(Object[_0x41d0ba(0x1e6)][_0x41d0ba(0x1eb)][_0x41d0ba(0x1ea)](_0x544d00,_0x2bb677))_0x102609[_0x102609[_0x41d0ba(0x1ff)]]=_0x2bb677;return _0x102609;},_0x536fe2(_0x13e15b);};return function(_0x2e9228){const _0x53ba07=a4_0xb0df;if(_0x2e9228&&_0x2e9228['__esModule'])return _0x2e9228;var _0x1f34a8={};if(_0x2e9228!=null){for(var _0x3c7800=_0x536fe2(_0x2e9228),_0x5ce20f=0x0;_0x5ce20f<_0x3c7800[_0x53ba07(0x1ff)];_0x5ce20f++)if(_0x3c7800[_0x5ce20f]!=='default')__createBinding(_0x1f34a8,_0x2e9228,_0x3c7800[_0x5ce20f]);}return __setModuleDefault(_0x1f34a8,_0x2e9228),_0x1f34a8;};}());Object[a4_0x3a8a43(0x1fb)](exports,a4_0x3a8a43(0x1f5),{'value':!![]}),exports[a4_0x3a8a43(0x1f9)]=void 0x0;const authService_1=require('../services/authService'),tokenBlacklistService_1=require(a4_0x3a8a43(0x1ef)),telegramBotService_1=require(a4_0x3a8a43(0x1e1));class AuthController{constructor(){const _0x159a67=a4_0x3a8a43;this[_0x159a67(0x206)]=async(_0x130429,_0x2fc088,_0x4f2b5c)=>{const _0x2d113c=_0x159a67;try{const _0x4047f4=_0x130429[_0x2d113c(0x1f6)],_0x39065b=_0x4047f4[_0x2d113c(0x1de)]||_0x130429['ip']||_0x130429['connection']['remoteAddress']||_0x2d113c(0x1ee),_0x2b2c0d=_0x4047f4[_0x2d113c(0x1f0)]||_0x130429[_0x2d113c(0x1e5)]('User-Agent')||_0x2d113c(0x1ee),_0x3bd308=_0x4047f4[_0x2d113c(0x1ed)];let _0x43c036=![],_0x4c7043=null;try{const _0x10f02b=await this[_0x2d113c(0x20a)][_0x2d113c(0x206)](_0x4047f4);_0x43c036=!![],_0x10f02b[_0x2d113c(0x1f7)]===_0x2d113c(0x1e2)&&_0x10f02b[_0x2d113c(0x1fa)]?.['id']&&(_0x4c7043=_0x10f02b['user']['id']),_0x4c7043&&await telegramBotService_1[_0x2d113c(0x20d)]['sendLoginNotification'](_0x4c7043,{'username':_0x4047f4[_0x2d113c(0x1e7)],'ipAddress':_0x39065b,'userAgent':_0x2b2c0d,'geo':_0x3bd308,'timestamp':new Date(),'success':!![]}),_0x2fc088[_0x2d113c(0x1e3)]({'success':!![],'result':_0x10f02b});}catch(_0x3f892a){try{const _0xdf63f7=(await Promise['resolve']()['then'](()=>__importStar(require(_0x2d113c(0x1e0)))))[_0x2d113c(0x204)],_0x5821d9=await _0xdf63f7[_0x2d113c(0x1e2)]['findUnique']({'where':{'username':_0x4047f4[_0x2d113c(0x1e7)]},'select':{'id':!![]}});_0x5821d9&&await telegramBotService_1[_0x2d113c(0x20d)][_0x2d113c(0x1f4)](_0x5821d9['id'],{'username':_0x4047f4['username'],'ipAddress':_0x39065b,'userAgent':_0x2b2c0d,'geo':_0x3bd308,'timestamp':new Date(),'success':![]});}catch(_0x31beef){console['error']('Failed\x20to\x20send\x20failed\x20login\x20notification:',_0x31beef);}throw _0x3f892a;}}catch(_0x38c0b4){_0x4f2b5c(_0x38c0b4);}},this['me']=async(_0x43e75f,_0x3d1561,_0x23ed9b)=>{const _0x1c8841=_0x159a67;try{const _0x1f3016=_0x43e75f['user'];_0x3d1561[_0x1c8841(0x1e3)]({'success':!![],'result':{'id':_0x1f3016?.['id'],'username':_0x1f3016?.[_0x1c8841(0x1e7)],'role':_0x1f3016?.[_0x1c8841(0x1f7)]}});}catch(_0xfb4acb){_0x23ed9b(_0xfb4acb);}},this['logout']=async(_0x1da508,_0x5743ec,_0x2273a1)=>{const _0x2514fb=_0x159a67;try{const _0x56eda6=_0x1da508['token'],_0x447b93=_0x1da508[_0x2514fb(0x1fa)];_0x56eda6&&_0x447b93?.[_0x2514fb(0x205)]&&tokenBlacklistService_1[_0x2514fb(0x1dd)][_0x2514fb(0x1e4)](_0x56eda6,_0x447b93[_0x2514fb(0x205)]),_0x5743ec[_0x2514fb(0x1e3)]({'success':!![],'message':_0x2514fb(0x1df)});}catch(_0x3c4524){_0x2273a1(_0x3c4524);}},this[_0x159a67(0x20e)]=async(_0x23b9de,_0x21c2e6,_0x29ab16)=>{const _0x1c9d73=_0x159a67;try{const _0x103706=tokenBlacklistService_1[_0x1c9d73(0x1dd)]['getStats']();_0x21c2e6[_0x1c9d73(0x1e3)]({'success':!![],'result':_0x103706});}catch(_0x25d724){_0x29ab16(_0x25d724);}},this[_0x159a67(0x20a)]=new authService_1[(_0x159a67(0x1fd))]();}}function a4_0x3deb(){const _0x1a20d3=['authService','33rWzWwv','207144TFpnMV','telegramBotService','getBlacklistStats','tokenBlacklistService','ipAddress','Logged\x20out\x20successfully','../config/database','../services/telegramBotService','shop','json','blacklistToken','get','prototype','username','2924195ASYWIa','12tjAfdt','call','hasOwnProperty','759804mMDkSj','geo','unknown','../services/tokenBlacklistService','userAgent','798945QHlaCT','12yHssLJ','getOwnPropertyNames','sendLoginNotification','__esModule','body','role','8368CzEtwY','AuthController','user','defineProperty','writable','AuthService','__importStar','length','create','6516QZnmsr','__createBinding','__setModuleDefault','default','exp','login','configurable','2786532Kjoijb','9055610lwhBOE'];a4_0x3deb=function(){return _0x1a20d3;};return a4_0x3deb();}exports[a4_0x3a8a43(0x1f9)]=AuthController;