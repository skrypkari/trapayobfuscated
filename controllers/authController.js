'use strict';const a4_0x3adf26=a4_0x4da2;function a4_0x2442(){const _0x356681=['3842600UUdmsK','51717BuLtEA','call','591429Kovgdv','prototype','6220160ZIdMiN','tokenBlacklistService','username','sendLoginNotification','7PHroAQ','create','__esModule','telegramBotService','hasOwnProperty','authService','5169580VoqaZt','json','unknown','33564087rxJmXK','User-Agent','token','AuthController','configurable','findUnique','exp','18dufIxJ','get','getStats','defineProperty','writable','login','role','user','../services/tokenBlacklistService','shop','Failed\x20to\x20send\x20failed\x20login\x20notification:','__createBinding','../services/telegramBotService','getOwnPropertyNames','default','length','body','getOwnPropertyDescriptor','Logged\x20out\x20successfully','7922844KTFgWq'];a4_0x2442=function(){return _0x356681;};return a4_0x2442();}(function(_0x15428e,_0x89264a){const _0x30a915=a4_0x4da2,_0x2d6b77=_0x15428e();while(!![]){try{const _0x9877fc=parseInt(_0x30a915(0x1e4))/0x1+parseInt(_0x30a915(0x1fa))/0x2*(-parseInt(_0x30a915(0x1e2))/0x3)+parseInt(_0x30a915(0x1f0))/0x4+parseInt(_0x30a915(0x1e1))/0x5+-parseInt(_0x30a915(0x1e0))/0x6*(-parseInt(_0x30a915(0x1ea))/0x7)+parseInt(_0x30a915(0x1e6))/0x8+-parseInt(_0x30a915(0x1f3))/0x9;if(_0x9877fc===_0x89264a)break;else _0x2d6b77['push'](_0x2d6b77['shift']());}catch(_0x414c04){_0x2d6b77['push'](_0x2d6b77['shift']());}}}(a4_0x2442,0xd3634));function a4_0x4da2(_0x192b23,_0x546433){const _0x2442f3=a4_0x2442();return a4_0x4da2=function(_0x4da24d,_0x3239ec){_0x4da24d=_0x4da24d-0x1dc;let _0x2959d8=_0x2442f3[_0x4da24d];return _0x2959d8;},a4_0x4da2(_0x192b23,_0x546433);}var __createBinding=this&&this[a4_0x3adf26(0x205)]||(Object[a4_0x3adf26(0x1eb)]?function(_0x4038e5,_0x2da7bc,_0x49fb13,_0x2fef6a){const _0x1a40cd=a4_0x3adf26;if(_0x2fef6a===undefined)_0x2fef6a=_0x49fb13;var _0x4bf1c8=Object[_0x1a40cd(0x1de)](_0x2da7bc,_0x49fb13);(!_0x4bf1c8||(_0x1a40cd(0x1fb)in _0x4bf1c8?!_0x2da7bc[_0x1a40cd(0x1ec)]:_0x4bf1c8[_0x1a40cd(0x1fe)]||_0x4bf1c8[_0x1a40cd(0x1f7)]))&&(_0x4bf1c8={'enumerable':!![],'get':function(){return _0x2da7bc[_0x49fb13];}}),Object['defineProperty'](_0x4038e5,_0x2fef6a,_0x4bf1c8);}:function(_0x263ef0,_0x325f60,_0x189bb0,_0x1c22bc){if(_0x1c22bc===undefined)_0x1c22bc=_0x189bb0;_0x263ef0[_0x1c22bc]=_0x325f60[_0x189bb0];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object['create']?function(_0x542098,_0x3c1fbc){const _0x1ca6fa=a4_0x3adf26;Object[_0x1ca6fa(0x1fd)](_0x542098,_0x1ca6fa(0x208),{'enumerable':!![],'value':_0x3c1fbc});}:function(_0x399568,_0x58ae3d){const _0x57b1b9=a4_0x3adf26;_0x399568[_0x57b1b9(0x208)]=_0x58ae3d;}),__importStar=this&&this['__importStar']||(function(){var _0x16b3c1=function(_0x5961d7){const _0xc49ad6=a4_0x4da2;return _0x16b3c1=Object[_0xc49ad6(0x207)]||function(_0x541c72){const _0x3820a1=_0xc49ad6;var _0x41bab9=[];for(var _0x1f48bd in _0x541c72)if(Object[_0x3820a1(0x1e5)][_0x3820a1(0x1ee)][_0x3820a1(0x1e3)](_0x541c72,_0x1f48bd))_0x41bab9[_0x41bab9[_0x3820a1(0x1dc)]]=_0x1f48bd;return _0x41bab9;},_0x16b3c1(_0x5961d7);};return function(_0x346c42){const _0x3c448b=a4_0x4da2;if(_0x346c42&&_0x346c42[_0x3c448b(0x1ec)])return _0x346c42;var _0x1707d5={};if(_0x346c42!=null){for(var _0x36f4eb=_0x16b3c1(_0x346c42),_0x1efdaf=0x0;_0x1efdaf<_0x36f4eb['length'];_0x1efdaf++)if(_0x36f4eb[_0x1efdaf]!==_0x3c448b(0x208))__createBinding(_0x1707d5,_0x346c42,_0x36f4eb[_0x1efdaf]);}return __setModuleDefault(_0x1707d5,_0x346c42),_0x1707d5;};}());Object[a4_0x3adf26(0x1fd)](exports,a4_0x3adf26(0x1ec),{'value':!![]}),exports['AuthController']=void 0x0;const authService_1=require('../services/authService'),tokenBlacklistService_1=require(a4_0x3adf26(0x202)),telegramBotService_1=require(a4_0x3adf26(0x206));class AuthController{constructor(){const _0x4de84d=a4_0x3adf26;this['login']=async(_0x48e456,_0x21f8ca,_0x5a890c)=>{const _0x202a1d=a4_0x4da2;try{const _0x3f4f5f=_0x48e456[_0x202a1d(0x1dd)],_0x59eae4=_0x48e456['ip']||_0x48e456['connection']['remoteAddress']||_0x202a1d(0x1f2),_0x1e23f0=_0x48e456[_0x202a1d(0x1fb)](_0x202a1d(0x1f4))||_0x202a1d(0x1f2);let _0x5d2e40=![],_0x4fdfc3=null;try{const _0x37e84d=await this[_0x202a1d(0x1ef)][_0x202a1d(0x1ff)](_0x3f4f5f);_0x5d2e40=!![],_0x37e84d[_0x202a1d(0x200)]===_0x202a1d(0x203)&&_0x37e84d[_0x202a1d(0x201)]?.['id']&&(_0x4fdfc3=_0x37e84d['user']['id']),_0x4fdfc3&&await telegramBotService_1[_0x202a1d(0x1ed)]['sendLoginNotification'](_0x4fdfc3,{'username':_0x3f4f5f[_0x202a1d(0x1e8)],'ipAddress':_0x59eae4,'userAgent':_0x1e23f0,'timestamp':new Date(),'success':!![]}),_0x21f8ca[_0x202a1d(0x1f1)]({'success':!![],'result':_0x37e84d});}catch(_0x1fe980){try{const _0x28d993=(await Promise['resolve']()['then'](()=>__importStar(require('../config/database'))))[_0x202a1d(0x208)],_0x186e84=await _0x28d993[_0x202a1d(0x203)][_0x202a1d(0x1f8)]({'where':{'username':_0x3f4f5f[_0x202a1d(0x1e8)]},'select':{'id':!![]}});_0x186e84&&await telegramBotService_1[_0x202a1d(0x1ed)][_0x202a1d(0x1e9)](_0x186e84['id'],{'username':_0x3f4f5f[_0x202a1d(0x1e8)],'ipAddress':_0x59eae4,'userAgent':_0x1e23f0,'timestamp':new Date(),'success':![]});}catch(_0x543264){console['error'](_0x202a1d(0x204),_0x543264);}throw _0x1fe980;}}catch(_0x43dfa6){_0x5a890c(_0x43dfa6);}},this['me']=async(_0xbcc13c,_0x3b9e49,_0xf76a67)=>{const _0x3353c3=a4_0x4da2;try{const _0x357f23=_0xbcc13c[_0x3353c3(0x201)];_0x3b9e49[_0x3353c3(0x1f1)]({'success':!![],'result':{'id':_0x357f23?.['id'],'username':_0x357f23?.['username'],'role':_0x357f23?.[_0x3353c3(0x200)]}});}catch(_0x1d47e5){_0xf76a67(_0x1d47e5);}},this['logout']=async(_0x53b65b,_0x4c2206,_0x27aa71)=>{const _0x31026e=a4_0x4da2;try{const _0x2d52d6=_0x53b65b[_0x31026e(0x1f5)],_0x17fc13=_0x53b65b['user'];_0x2d52d6&&_0x17fc13?.[_0x31026e(0x1f9)]&&tokenBlacklistService_1[_0x31026e(0x1e7)]['blacklistToken'](_0x2d52d6,_0x17fc13[_0x31026e(0x1f9)]),_0x4c2206[_0x31026e(0x1f1)]({'success':!![],'message':_0x31026e(0x1df)});}catch(_0x1c4b40){_0x27aa71(_0x1c4b40);}},this['getBlacklistStats']=async(_0x3bcd96,_0x486482,_0x2ccdf2)=>{const _0x1a8130=a4_0x4da2;try{const _0x2ab8ba=tokenBlacklistService_1[_0x1a8130(0x1e7)][_0x1a8130(0x1fc)]();_0x486482[_0x1a8130(0x1f1)]({'success':!![],'result':_0x2ab8ba});}catch(_0x596b0a){_0x2ccdf2(_0x596b0a);}},this[_0x4de84d(0x1ef)]=new authService_1['AuthService']();}}exports[a4_0x3adf26(0x1f6)]=AuthController;