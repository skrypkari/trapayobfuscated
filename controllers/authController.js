'use strict';const a4_0x50384b=a4_0x626d;(function(_0x5a96df,_0xe2805f){const _0x4aaf79=a4_0x626d,_0x1ee4ff=_0x5a96df();while(!![]){try{const _0xb8c731=-parseInt(_0x4aaf79(0xbd))/0x1+-parseInt(_0x4aaf79(0xc2))/0x2+-parseInt(_0x4aaf79(0xb1))/0x3+parseInt(_0x4aaf79(0xb9))/0x4+-parseInt(_0x4aaf79(0xa7))/0x5*(parseInt(_0x4aaf79(0xaa))/0x6)+-parseInt(_0x4aaf79(0xbb))/0x7+parseInt(_0x4aaf79(0xa5))/0x8;if(_0xb8c731===_0xe2805f)break;else _0x1ee4ff['push'](_0x1ee4ff['shift']());}catch(_0x32b5ea){_0x1ee4ff['push'](_0x1ee4ff['shift']());}}}(a4_0x2fb3,0xbb6f5));function a4_0x2fb3(){const _0x147107=['shop','../services/authService','username','telegramBotService','exp','call','remoteAddress','User-Agent','length','findUnique','default','getOwnPropertyDescriptor','34205480UcGNyP','getBlacklistStats','88515kGchoe','login','defineProperty','462ZJrLiL','body','authService','configurable','__esModule','json','user','512454uOFbgI','role','blacklistToken','logout','get','prototype','__importStar','AuthService','2122252gnbCDY','../config/database','1675912ZysJkJ','__setModuleDefault','1019983cdnjZE','getOwnPropertyNames','resolve','Logged\x20out\x20successfully','unknown','2490334qeOLqt','tokenBlacklistService','sendLoginNotification','error','../services/telegramBotService','create','AuthController','Failed\x20to\x20send\x20failed\x20login\x20notification:'];a4_0x2fb3=function(){return _0x147107;};return a4_0x2fb3();}var __createBinding=this&&this['__createBinding']||(Object['create']?function(_0x2eac5b,_0x195b9e,_0x468e58,_0x241cb1){const _0x2142d7=a4_0x626d;if(_0x241cb1===undefined)_0x241cb1=_0x468e58;var _0x52945e=Object[_0x2142d7(0xa4)](_0x195b9e,_0x468e58);(!_0x52945e||(_0x2142d7(0xb5)in _0x52945e?!_0x195b9e[_0x2142d7(0xae)]:_0x52945e['writable']||_0x52945e[_0x2142d7(0xad)]))&&(_0x52945e={'enumerable':!![],'get':function(){return _0x195b9e[_0x468e58];}}),Object[_0x2142d7(0xa9)](_0x2eac5b,_0x241cb1,_0x52945e);}:function(_0x1668ec,_0x37de65,_0x161f5a,_0x4c0988){if(_0x4c0988===undefined)_0x4c0988=_0x161f5a;_0x1668ec[_0x4c0988]=_0x37de65[_0x161f5a];}),__setModuleDefault=this&&this[a4_0x50384b(0xbc)]||(Object[a4_0x50384b(0xc7)]?function(_0x39056e,_0x1eee42){const _0x18bb9e=a4_0x50384b;Object[_0x18bb9e(0xa9)](_0x39056e,_0x18bb9e(0xa3),{'enumerable':!![],'value':_0x1eee42});}:function(_0x109e27,_0x31f85b){const _0x587b3e=a4_0x50384b;_0x109e27[_0x587b3e(0xa3)]=_0x31f85b;}),__importStar=this&&this[a4_0x50384b(0xb7)]||(function(){var _0x4b423f=function(_0xf091ae){const _0x2608c6=a4_0x626d;return _0x4b423f=Object[_0x2608c6(0xbe)]||function(_0x4d553b){const _0x2835ad=_0x2608c6;var _0x554b17=[];for(var _0x2dfbf4 in _0x4d553b)if(Object[_0x2835ad(0xb6)]['hasOwnProperty'][_0x2835ad(0x9e)](_0x4d553b,_0x2dfbf4))_0x554b17[_0x554b17['length']]=_0x2dfbf4;return _0x554b17;},_0x4b423f(_0xf091ae);};return function(_0x136677){const _0x530eed=a4_0x626d;if(_0x136677&&_0x136677[_0x530eed(0xae)])return _0x136677;var _0x3c418f={};if(_0x136677!=null){for(var _0x46f172=_0x4b423f(_0x136677),_0x594a5c=0x0;_0x594a5c<_0x46f172[_0x530eed(0xa1)];_0x594a5c++)if(_0x46f172[_0x594a5c]!==_0x530eed(0xa3))__createBinding(_0x3c418f,_0x136677,_0x46f172[_0x594a5c]);}return __setModuleDefault(_0x3c418f,_0x136677),_0x3c418f;};}());Object[a4_0x50384b(0xa9)](exports,a4_0x50384b(0xae),{'value':!![]}),exports[a4_0x50384b(0xc8)]=void 0x0;function a4_0x626d(_0xe36c25,_0x347b09){const _0x2fb3b3=a4_0x2fb3();return a4_0x626d=function(_0x626d28,_0x19d3da){_0x626d28=_0x626d28-0x9c;let _0x4c4362=_0x2fb3b3[_0x626d28];return _0x4c4362;},a4_0x626d(_0xe36c25,_0x347b09);}const authService_1=require(a4_0x50384b(0xcb)),tokenBlacklistService_1=require('../services/tokenBlacklistService'),telegramBotService_1=require(a4_0x50384b(0xc6));class AuthController{constructor(){const _0xc37564=a4_0x50384b;this[_0xc37564(0xa8)]=async(_0x5f0c05,_0x58c603,_0x183859)=>{const _0x115301=_0xc37564;try{const _0x17f24d=_0x5f0c05[_0x115301(0xab)],_0xc7ab93=_0x5f0c05['ip']||_0x5f0c05['connection'][_0x115301(0x9f)]||_0x115301(0xc1),_0x2e5c03=_0x5f0c05[_0x115301(0xb5)](_0x115301(0xa0))||_0x115301(0xc1);let _0x410488=![],_0x28dc76=null;try{const _0x1ddb2d=await this[_0x115301(0xac)][_0x115301(0xa8)](_0x17f24d);_0x410488=!![],_0x1ddb2d[_0x115301(0xb2)]===_0x115301(0xca)&&_0x1ddb2d[_0x115301(0xb0)]?.['id']&&(_0x28dc76=_0x1ddb2d[_0x115301(0xb0)]['id']),_0x28dc76&&await telegramBotService_1[_0x115301(0x9c)][_0x115301(0xc4)](_0x28dc76,{'username':_0x17f24d[_0x115301(0xcc)],'ipAddress':_0xc7ab93,'userAgent':_0x2e5c03,'timestamp':new Date(),'success':!![]}),_0x58c603[_0x115301(0xaf)]({'success':!![],'result':_0x1ddb2d});}catch(_0x27b4a7){try{const _0x1238f4=(await Promise[_0x115301(0xbf)]()['then'](()=>__importStar(require(_0x115301(0xba)))))['default'],_0xb97012=await _0x1238f4[_0x115301(0xca)][_0x115301(0xa2)]({'where':{'username':_0x17f24d[_0x115301(0xcc)]},'select':{'id':!![]}});_0xb97012&&await telegramBotService_1[_0x115301(0x9c)][_0x115301(0xc4)](_0xb97012['id'],{'username':_0x17f24d[_0x115301(0xcc)],'ipAddress':_0xc7ab93,'userAgent':_0x2e5c03,'timestamp':new Date(),'success':![]});}catch(_0x4d8eda){console[_0x115301(0xc5)](_0x115301(0xc9),_0x4d8eda);}throw _0x27b4a7;}}catch(_0x3f7234){_0x183859(_0x3f7234);}},this['me']=async(_0x5cf52a,_0x7b9d2b,_0x4ff627)=>{const _0x389510=_0xc37564;try{const _0xc141f5=_0x5cf52a[_0x389510(0xb0)];_0x7b9d2b['json']({'success':!![],'result':{'id':_0xc141f5?.['id'],'username':_0xc141f5?.[_0x389510(0xcc)],'role':_0xc141f5?.['role']}});}catch(_0x4cd9da){_0x4ff627(_0x4cd9da);}},this[_0xc37564(0xb4)]=async(_0x49757a,_0x28b24e,_0x25f8da)=>{const _0xacea3f=_0xc37564;try{const _0x37c6e8=_0x49757a['token'],_0x35aa6a=_0x49757a[_0xacea3f(0xb0)];_0x37c6e8&&_0x35aa6a?.[_0xacea3f(0x9d)]&&tokenBlacklistService_1[_0xacea3f(0xc3)][_0xacea3f(0xb3)](_0x37c6e8,_0x35aa6a['exp']),_0x28b24e[_0xacea3f(0xaf)]({'success':!![],'message':_0xacea3f(0xc0)});}catch(_0x588bb2){_0x25f8da(_0x588bb2);}},this[_0xc37564(0xa6)]=async(_0x1c2890,_0x4ef976,_0x2118bc)=>{const _0x58cad7=_0xc37564;try{const _0x132525=tokenBlacklistService_1[_0x58cad7(0xc3)]['getStats']();_0x4ef976['json']({'success':!![],'result':_0x132525});}catch(_0x2b46da){_0x2118bc(_0x2b46da);}},this[_0xc37564(0xac)]=new authService_1[(_0xc37564(0xb8))]();}}exports[a4_0x50384b(0xc8)]=AuthController;