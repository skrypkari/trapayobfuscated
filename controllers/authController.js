'use strict';const a4_0x3857fa=a4_0x34d3;function a4_0x34d3(_0x4a4c5b,_0x559fa6){const _0x121430=a4_0x1214();return a4_0x34d3=function(_0x34d368,_0x4a615a){_0x34d368=_0x34d368-0x7d;let _0x10ec76=_0x121430[_0x34d368];return _0x10ec76;},a4_0x34d3(_0x4a4c5b,_0x559fa6);}(function(_0x25924b,_0x3ac438){const _0x4cf12d=a4_0x34d3,_0x214df1=_0x25924b();while(!![]){try{const _0x43ad0e=-parseInt(_0x4cf12d(0x86))/0x1+parseInt(_0x4cf12d(0x7f))/0x2*(-parseInt(_0x4cf12d(0xa2))/0x3)+-parseInt(_0x4cf12d(0x85))/0x4*(parseInt(_0x4cf12d(0x8f))/0x5)+-parseInt(_0x4cf12d(0xa3))/0x6*(parseInt(_0x4cf12d(0xa8))/0x7)+parseInt(_0x4cf12d(0x95))/0x8*(-parseInt(_0x4cf12d(0x89))/0x9)+-parseInt(_0x4cf12d(0x8e))/0xa*(parseInt(_0x4cf12d(0xa0))/0xb)+parseInt(_0x4cf12d(0xaf))/0xc*(parseInt(_0x4cf12d(0x96))/0xd);if(_0x43ad0e===_0x3ac438)break;else _0x214df1['push'](_0x214df1['shift']());}catch(_0x5ef4f8){_0x214df1['push'](_0x214df1['shift']());}}}(a4_0x1214,0x40e2a));var __createBinding=this&&this['__createBinding']||(Object[a4_0x3857fa(0x83)]?function(_0x2b7285,_0x5c43c1,_0xe766c0,_0x1b4f7c){const _0x17647f=a4_0x3857fa;if(_0x1b4f7c===undefined)_0x1b4f7c=_0xe766c0;var _0x4ba893=Object[_0x17647f(0x9f)](_0x5c43c1,_0xe766c0);(!_0x4ba893||(_0x17647f(0x88)in _0x4ba893?!_0x5c43c1['__esModule']:_0x4ba893[_0x17647f(0xaa)]||_0x4ba893[_0x17647f(0xa9)]))&&(_0x4ba893={'enumerable':!![],'get':function(){return _0x5c43c1[_0xe766c0];}}),Object['defineProperty'](_0x2b7285,_0x1b4f7c,_0x4ba893);}:function(_0x2cdbbd,_0x578895,_0x450a7e,_0x551860){if(_0x551860===undefined)_0x551860=_0x450a7e;_0x2cdbbd[_0x551860]=_0x578895[_0x450a7e];}),__setModuleDefault=this&&this[a4_0x3857fa(0x7e)]||(Object[a4_0x3857fa(0x83)]?function(_0x374ca7,_0x2357f9){const _0x100d96=a4_0x3857fa;Object[_0x100d96(0xad)](_0x374ca7,_0x100d96(0x91),{'enumerable':!![],'value':_0x2357f9});}:function(_0x2fe231,_0x2521af){const _0x585cd5=a4_0x3857fa;_0x2fe231[_0x585cd5(0x91)]=_0x2521af;}),__importStar=this&&this[a4_0x3857fa(0x98)]||(function(){var _0x22e7a0=function(_0x172478){const _0x4d9593=a4_0x34d3;return _0x22e7a0=Object[_0x4d9593(0x9b)]||function(_0x2fcf13){const _0x47a87e=_0x4d9593;var _0x4145ea=[];for(var _0x3b2cad in _0x2fcf13)if(Object[_0x47a87e(0x90)][_0x47a87e(0x84)][_0x47a87e(0xb2)](_0x2fcf13,_0x3b2cad))_0x4145ea[_0x4145ea[_0x47a87e(0xae)]]=_0x3b2cad;return _0x4145ea;},_0x22e7a0(_0x172478);};return function(_0x4f236e){const _0x4baf1f=a4_0x34d3;if(_0x4f236e&&_0x4f236e['__esModule'])return _0x4f236e;var _0x2dc267={};if(_0x4f236e!=null){for(var _0x307611=_0x22e7a0(_0x4f236e),_0x52846d=0x0;_0x52846d<_0x307611[_0x4baf1f(0xae)];_0x52846d++)if(_0x307611[_0x52846d]!==_0x4baf1f(0x91))__createBinding(_0x2dc267,_0x4f236e,_0x307611[_0x52846d]);}return __setModuleDefault(_0x2dc267,_0x4f236e),_0x2dc267;};}());Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['AuthController']=void 0x0;const authService_1=require('../services/authService'),tokenBlacklistService_1=require(a4_0x3857fa(0x8d)),telegramBotService_1=require('../services/telegramBotService');function a4_0x1214(){const _0x38cbb4=['remoteAddress','exp','username','create','hasOwnProperty','4PuHYLk','357330CFbXEb','getBlacklistStats','get','203157gRrXTF','sendLoginNotification','shop','token','../services/tokenBlacklistService','1628960BdXqjN','312290InXVjw','prototype','default','user','telegramBotService','unknown','176NNrMVs','65MjyniL','blacklistToken','__importStar','User-Agent','findUnique','getOwnPropertyNames','json','connection','Failed\x20to\x20send\x20failed\x20login\x20notification:','getOwnPropertyDescriptor','33rFxZKT','logout','395583ZkfoBa','21072KxLpVE','getStats','authService','tokenBlacklistService','role','322dOOCmc','configurable','writable','AuthController','login','defineProperty','length','4714236bYaToW','../config/database','AuthService','call','body','__setModuleDefault','2CFiBcC'];a4_0x1214=function(){return _0x38cbb4;};return a4_0x1214();}class AuthController{constructor(){const _0x5c0fdf=a4_0x3857fa;this[_0x5c0fdf(0xac)]=async(_0x4b439d,_0x1ffdec,_0x58ff80)=>{const _0x19647a=_0x5c0fdf;try{const _0x42649d=_0x4b439d[_0x19647a(0x7d)],_0x4de40f=_0x4b439d['ip']||_0x4b439d[_0x19647a(0x9d)][_0x19647a(0x80)]||_0x19647a(0x94),_0x420304=_0x4b439d[_0x19647a(0x88)](_0x19647a(0x99))||_0x19647a(0x94);let _0x4b4ed3=![],_0xba820e=null;try{const _0x4704e1=await this['authService']['login'](_0x42649d);_0x4b4ed3=!![],_0x4704e1[_0x19647a(0xa7)]===_0x19647a(0x8b)&&_0x4704e1[_0x19647a(0x92)]?.['id']&&(_0xba820e=_0x4704e1[_0x19647a(0x92)]['id']),_0xba820e&&await telegramBotService_1[_0x19647a(0x93)][_0x19647a(0x8a)](_0xba820e,{'username':_0x42649d['username'],'ipAddress':_0x4de40f,'userAgent':_0x420304,'timestamp':new Date(),'success':!![]}),_0x1ffdec[_0x19647a(0x9c)]({'success':!![],'result':_0x4704e1});}catch(_0x1dd7be){try{const _0x57d4c7=(await Promise['resolve']()['then'](()=>__importStar(require(_0x19647a(0xb0)))))['default'],_0x1c1a82=await _0x57d4c7[_0x19647a(0x8b)][_0x19647a(0x9a)]({'where':{'username':_0x42649d[_0x19647a(0x82)]},'select':{'id':!![]}});_0x1c1a82&&await telegramBotService_1[_0x19647a(0x93)][_0x19647a(0x8a)](_0x1c1a82['id'],{'username':_0x42649d[_0x19647a(0x82)],'ipAddress':_0x4de40f,'userAgent':_0x420304,'timestamp':new Date(),'success':![]});}catch(_0x59a332){console['error'](_0x19647a(0x9e),_0x59a332);}throw _0x1dd7be;}}catch(_0x2fea6a){_0x58ff80(_0x2fea6a);}},this['me']=async(_0x161714,_0x5e4ab3,_0x2450c5)=>{const _0x3a982a=_0x5c0fdf;try{const _0x22e3a0=_0x161714[_0x3a982a(0x92)];_0x5e4ab3[_0x3a982a(0x9c)]({'success':!![],'result':{'id':_0x22e3a0?.['id'],'username':_0x22e3a0?.[_0x3a982a(0x82)],'role':_0x22e3a0?.[_0x3a982a(0xa7)]}});}catch(_0x4aa6e2){_0x2450c5(_0x4aa6e2);}},this[_0x5c0fdf(0xa1)]=async(_0x1072c3,_0x49646f,_0x468083)=>{const _0x1ea1b2=_0x5c0fdf;try{const _0x249de4=_0x1072c3[_0x1ea1b2(0x8c)],_0x588874=_0x1072c3[_0x1ea1b2(0x92)];_0x249de4&&_0x588874?.[_0x1ea1b2(0x81)]&&tokenBlacklistService_1[_0x1ea1b2(0xa6)][_0x1ea1b2(0x97)](_0x249de4,_0x588874['exp']),_0x49646f['json']({'success':!![],'message':'Logged\x20out\x20successfully'});}catch(_0x2df7c0){_0x468083(_0x2df7c0);}},this[_0x5c0fdf(0x87)]=async(_0x594d70,_0x30597b,_0x5e2b6a)=>{const _0x5c6e60=_0x5c0fdf;try{const _0x41fd40=tokenBlacklistService_1[_0x5c6e60(0xa6)][_0x5c6e60(0xa4)]();_0x30597b[_0x5c6e60(0x9c)]({'success':!![],'result':_0x41fd40});}catch(_0x4779ec){_0x5e2b6a(_0x4779ec);}},this[_0x5c0fdf(0xa5)]=new authService_1[(_0x5c0fdf(0xb1))]();}}exports[a4_0x3857fa(0xab)]=AuthController;