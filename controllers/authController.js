'use strict';const a4_0x432f33=a4_0x5ce5;function a4_0x1fcd(){const _0x40fde7=['__setModuleDefault','call','body','__createBinding','get','default','findUnique','configurable','Logged\x20out\x20successfully','__esModule','198981HSbUjr','../config/database','json','user','unknown','42vFYXgm','70tMhoLl','AuthService','defineProperty','../services/tokenBlacklistService','tokenBlacklistService','../services/authService','sendLoginNotification','__importStar','4567442ibrBoQ','19020XJwuFe','hasOwnProperty','length','1825964HxkTmy','then','role','telegramBotService','getStats','6PBSMBX','2YGsGwm','error','shop','create','prototype','1906475qdIhXi','remoteAddress','username','3819064ModxQd','login','getOwnPropertyNames','User-Agent','Failed\x20to\x20send\x20failed\x20login\x20notification:','507128kZDFTe','AuthController','token','authService','connection'];a4_0x1fcd=function(){return _0x40fde7;};return a4_0x1fcd();}(function(_0x10ca3d,_0x5d68e8){const _0x459f2a=a4_0x5ce5,_0x502377=_0x10ca3d();while(!![]){try{const _0x891b53=-parseInt(_0x459f2a(0x1ac))/0x1*(parseInt(_0x459f2a(0x1b9))/0x2)+-parseInt(_0x459f2a(0x199))/0x3*(-parseInt(_0x459f2a(0x1a3))/0x4)+-parseInt(_0x459f2a(0x1b1))/0x5*(-parseInt(_0x459f2a(0x1ab))/0x6)+parseInt(_0x459f2a(0x1a6))/0x7+-parseInt(_0x459f2a(0x1b4))/0x8+-parseInt(_0x459f2a(0x194))/0x9*(-parseInt(_0x459f2a(0x19a))/0xa)+parseInt(_0x459f2a(0x1a2))/0xb;if(_0x891b53===_0x5d68e8)break;else _0x502377['push'](_0x502377['shift']());}catch(_0x24c6d2){_0x502377['push'](_0x502377['shift']());}}}(a4_0x1fcd,0x47d2f));function a4_0x5ce5(_0x1a92a3,_0x346a6e){const _0x1fcd03=a4_0x1fcd();return a4_0x5ce5=function(_0x5ce5e6,_0x38dd5c){_0x5ce5e6=_0x5ce5e6-0x18b;let _0x24c59c=_0x1fcd03[_0x5ce5e6];return _0x24c59c;},a4_0x5ce5(_0x1a92a3,_0x346a6e);}var __createBinding=this&&this[a4_0x432f33(0x18d)]||(Object[a4_0x432f33(0x1af)]?function(_0x903ec1,_0x3907b3,_0xbd9787,_0x48ee40){const _0x577498=a4_0x432f33;if(_0x48ee40===undefined)_0x48ee40=_0xbd9787;var _0x10626a=Object['getOwnPropertyDescriptor'](_0x3907b3,_0xbd9787);(!_0x10626a||(_0x577498(0x18e)in _0x10626a?!_0x3907b3[_0x577498(0x193)]:_0x10626a['writable']||_0x10626a[_0x577498(0x191)]))&&(_0x10626a={'enumerable':!![],'get':function(){return _0x3907b3[_0xbd9787];}}),Object[_0x577498(0x19c)](_0x903ec1,_0x48ee40,_0x10626a);}:function(_0x12a563,_0x2755d0,_0x31ae42,_0x53cf55){if(_0x53cf55===undefined)_0x53cf55=_0x31ae42;_0x12a563[_0x53cf55]=_0x2755d0[_0x31ae42];}),__setModuleDefault=this&&this[a4_0x432f33(0x1be)]||(Object['create']?function(_0x580785,_0x37ed82){const _0x400ce4=a4_0x432f33;Object['defineProperty'](_0x580785,_0x400ce4(0x18f),{'enumerable':!![],'value':_0x37ed82});}:function(_0xfab911,_0x21050e){const _0x29c208=a4_0x432f33;_0xfab911[_0x29c208(0x18f)]=_0x21050e;}),__importStar=this&&this[a4_0x432f33(0x1a1)]||(function(){var _0x2d3cc3=function(_0x445e20){const _0x46af27=a4_0x5ce5;return _0x2d3cc3=Object[_0x46af27(0x1b6)]||function(_0x3a3777){const _0xd4479d=_0x46af27;var _0x1dd59f=[];for(var _0x4e7e0f in _0x3a3777)if(Object[_0xd4479d(0x1b0)][_0xd4479d(0x1a4)][_0xd4479d(0x18b)](_0x3a3777,_0x4e7e0f))_0x1dd59f[_0x1dd59f['length']]=_0x4e7e0f;return _0x1dd59f;},_0x2d3cc3(_0x445e20);};return function(_0x5a7f70){const _0x150e33=a4_0x5ce5;if(_0x5a7f70&&_0x5a7f70[_0x150e33(0x193)])return _0x5a7f70;var _0x273635={};if(_0x5a7f70!=null){for(var _0x2cff80=_0x2d3cc3(_0x5a7f70),_0x5c7e8b=0x0;_0x5c7e8b<_0x2cff80[_0x150e33(0x1a5)];_0x5c7e8b++)if(_0x2cff80[_0x5c7e8b]!==_0x150e33(0x18f))__createBinding(_0x273635,_0x5a7f70,_0x2cff80[_0x5c7e8b]);}return __setModuleDefault(_0x273635,_0x5a7f70),_0x273635;};}());Object[a4_0x432f33(0x19c)](exports,a4_0x432f33(0x193),{'value':!![]}),exports[a4_0x432f33(0x1ba)]=void 0x0;const authService_1=require(a4_0x432f33(0x19f)),tokenBlacklistService_1=require(a4_0x432f33(0x19d)),telegramBotService_1=require('../services/telegramBotService');class AuthController{constructor(){const _0x4f7d18=a4_0x432f33;this[_0x4f7d18(0x1b5)]=async(_0x1ec799,_0x58e7d2,_0x24ec9a)=>{const _0x39462b=_0x4f7d18;try{const _0x5d4d63=_0x1ec799[_0x39462b(0x18c)],_0x216c96=_0x1ec799['ip']||_0x1ec799[_0x39462b(0x1bd)][_0x39462b(0x1b2)]||_0x39462b(0x198),_0x1ac5e8=_0x1ec799[_0x39462b(0x18e)](_0x39462b(0x1b7))||_0x39462b(0x198);let _0x5d551c=![],_0x296930=null;try{const _0xdb3378=await this[_0x39462b(0x1bc)]['login'](_0x5d4d63);_0x5d551c=!![],_0xdb3378[_0x39462b(0x1a8)]==='shop'&&_0xdb3378[_0x39462b(0x197)]?.['id']&&(_0x296930=_0xdb3378[_0x39462b(0x197)]['id']),_0x296930&&await telegramBotService_1[_0x39462b(0x1a9)][_0x39462b(0x1a0)](_0x296930,{'username':_0x5d4d63['username'],'ipAddress':_0x216c96,'userAgent':_0x1ac5e8,'timestamp':new Date(),'success':!![]}),_0x58e7d2[_0x39462b(0x196)]({'success':!![],'result':_0xdb3378});}catch(_0x52bbd7){try{const _0x5f6358=(await Promise['resolve']()[_0x39462b(0x1a7)](()=>__importStar(require(_0x39462b(0x195)))))['default'],_0x766d8c=await _0x5f6358[_0x39462b(0x1ae)][_0x39462b(0x190)]({'where':{'username':_0x5d4d63[_0x39462b(0x1b3)]},'select':{'id':!![]}});_0x766d8c&&await telegramBotService_1[_0x39462b(0x1a9)][_0x39462b(0x1a0)](_0x766d8c['id'],{'username':_0x5d4d63[_0x39462b(0x1b3)],'ipAddress':_0x216c96,'userAgent':_0x1ac5e8,'timestamp':new Date(),'success':![]});}catch(_0x15d704){console[_0x39462b(0x1ad)](_0x39462b(0x1b8),_0x15d704);}throw _0x52bbd7;}}catch(_0x1397e4){_0x24ec9a(_0x1397e4);}},this['me']=async(_0x139c6a,_0xb011b8,_0x54074d)=>{const _0x637e9f=_0x4f7d18;try{const _0x229fbb=_0x139c6a['user'];_0xb011b8[_0x637e9f(0x196)]({'success':!![],'result':{'id':_0x229fbb?.['id'],'username':_0x229fbb?.[_0x637e9f(0x1b3)],'role':_0x229fbb?.[_0x637e9f(0x1a8)]}});}catch(_0x335902){_0x54074d(_0x335902);}},this['logout']=async(_0x5f124b,_0x1e413c,_0x1318b1)=>{const _0x3e90cc=_0x4f7d18;try{const _0x1aa233=_0x5f124b[_0x3e90cc(0x1bb)],_0x1e92ec=_0x5f124b['user'];_0x1aa233&&_0x1e92ec?.['exp']&&tokenBlacklistService_1[_0x3e90cc(0x19e)]['blacklistToken'](_0x1aa233,_0x1e92ec['exp']),_0x1e413c[_0x3e90cc(0x196)]({'success':!![],'message':_0x3e90cc(0x192)});}catch(_0xf767bf){_0x1318b1(_0xf767bf);}},this['getBlacklistStats']=async(_0x52b8ab,_0x253968,_0x5e9cb7)=>{const _0x3a57f2=_0x4f7d18;try{const _0x1e7494=tokenBlacklistService_1[_0x3a57f2(0x19e)][_0x3a57f2(0x1aa)]();_0x253968[_0x3a57f2(0x196)]({'success':!![],'result':_0x1e7494});}catch(_0x6e3091){_0x5e9cb7(_0x6e3091);}},this['authService']=new authService_1[(_0x4f7d18(0x19b))]();}}exports['AuthController']=AuthController;