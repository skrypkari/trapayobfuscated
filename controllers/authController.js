'use strict';const a4_0x33a8d6=a4_0x42ce;(function(_0x39c1b4,_0x389665){const _0x5a9209=a4_0x42ce,_0x2f0170=_0x39c1b4();while(!![]){try{const _0x3b6263=parseInt(_0x5a9209(0x197))/0x1*(-parseInt(_0x5a9209(0x1b9))/0x2)+-parseInt(_0x5a9209(0x1ae))/0x3+parseInt(_0x5a9209(0x1b5))/0x4*(-parseInt(_0x5a9209(0x19d))/0x5)+-parseInt(_0x5a9209(0x1b4))/0x6+-parseInt(_0x5a9209(0x1a7))/0x7+-parseInt(_0x5a9209(0x1ab))/0x8+parseInt(_0x5a9209(0x1c5))/0x9*(parseInt(_0x5a9209(0x1c3))/0xa);if(_0x3b6263===_0x389665)break;else _0x2f0170['push'](_0x2f0170['shift']());}catch(_0x34f740){_0x2f0170['push'](_0x2f0170['shift']());}}}(a4_0x3b5e,0x6efef));var __createBinding=this&&this['__createBinding']||(Object['create']?function(_0x3d5611,_0x4f117b,_0x4c813a,_0x776cd8){const _0x5e3546=a4_0x42ce;if(_0x776cd8===undefined)_0x776cd8=_0x4c813a;var _0xa854fb=Object['getOwnPropertyDescriptor'](_0x4f117b,_0x4c813a);(!_0xa854fb||(_0x5e3546(0x1bc)in _0xa854fb?!_0x4f117b[_0x5e3546(0x19a)]:_0xa854fb[_0x5e3546(0x1b0)]||_0xa854fb['configurable']))&&(_0xa854fb={'enumerable':!![],'get':function(){return _0x4f117b[_0x4c813a];}}),Object[_0x5e3546(0x1a2)](_0x3d5611,_0x776cd8,_0xa854fb);}:function(_0x152633,_0x221b0d,_0x4e31b1,_0x578fb2){if(_0x578fb2===undefined)_0x578fb2=_0x4e31b1;_0x152633[_0x578fb2]=_0x221b0d[_0x4e31b1];}),__setModuleDefault=this&&this[a4_0x33a8d6(0x1aa)]||(Object[a4_0x33a8d6(0x1bb)]?function(_0x23b997,_0x1249d6){const _0x371136=a4_0x33a8d6;Object['defineProperty'](_0x23b997,_0x371136(0x1b2),{'enumerable':!![],'value':_0x1249d6});}:function(_0x29c02c,_0x2b8d8e){_0x29c02c['default']=_0x2b8d8e;}),__importStar=this&&this[a4_0x33a8d6(0x1a9)]||(function(){var _0x56a8e8=function(_0x1c43fd){return _0x56a8e8=Object['getOwnPropertyNames']||function(_0x1b4db2){const _0xb3326f=a4_0x42ce;var _0x378692=[];for(var _0x196076 in _0x1b4db2)if(Object[_0xb3326f(0x1b8)][_0xb3326f(0x1bd)][_0xb3326f(0x1be)](_0x1b4db2,_0x196076))_0x378692[_0x378692[_0xb3326f(0x1a8)]]=_0x196076;return _0x378692;},_0x56a8e8(_0x1c43fd);};return function(_0x198b43){const _0x3ce82f=a4_0x42ce;if(_0x198b43&&_0x198b43[_0x3ce82f(0x19a)])return _0x198b43;var _0x149197={};if(_0x198b43!=null){for(var _0xec7a37=_0x56a8e8(_0x198b43),_0x35d68e=0x0;_0x35d68e<_0xec7a37['length'];_0x35d68e++)if(_0xec7a37[_0x35d68e]!==_0x3ce82f(0x1b2))__createBinding(_0x149197,_0x198b43,_0xec7a37[_0x35d68e]);}return __setModuleDefault(_0x149197,_0x198b43),_0x149197;};}());Object[a4_0x33a8d6(0x1a2)](exports,a4_0x33a8d6(0x19a),{'value':!![]}),exports[a4_0x33a8d6(0x1b3)]=void 0x0;function a4_0x3b5e(){const _0xa58b20=['create','get','hasOwnProperty','call','AuthService','login','exp','then','28410VDhocy','body','11961eetCuf','3EWHkpO','getStats','resolve','__esModule','User-Agent','connection','480iEoQqz','shop','username','remoteAddress','unknown','defineProperty','role','../services/telegramBotService','error','json','5215966EVtgmT','length','__importStar','__setModuleDefault','108576iTAion','../services/authService','user','2712444hoqWZy','findUnique','writable','sendLoginNotification','default','AuthController','2971524SxfyLS','17004knaOXX','telegramBotService','tokenBlacklistService','prototype','503228MnDYZb','authService'];a4_0x3b5e=function(){return _0xa58b20;};return a4_0x3b5e();}const authService_1=require(a4_0x33a8d6(0x1ac)),tokenBlacklistService_1=require('../services/tokenBlacklistService'),telegramBotService_1=require(a4_0x33a8d6(0x1a4));class AuthController{constructor(){const _0x22f9f6=a4_0x33a8d6;this[_0x22f9f6(0x1c0)]=async(_0x1373b2,_0x116d72,_0xd3e99b)=>{const _0x3f2769=_0x22f9f6;try{const _0x56ecb1=_0x1373b2[_0x3f2769(0x1c4)],_0x548a31=_0x1373b2['ip']||_0x1373b2[_0x3f2769(0x19c)][_0x3f2769(0x1a0)]||_0x3f2769(0x1a1),_0x243f9f=_0x1373b2['get'](_0x3f2769(0x19b))||_0x3f2769(0x1a1);let _0x2a1d1b=![],_0x299d58=null;try{const _0x50568e=await this[_0x3f2769(0x1ba)][_0x3f2769(0x1c0)](_0x56ecb1);_0x2a1d1b=!![],_0x50568e[_0x3f2769(0x1a3)]===_0x3f2769(0x19e)&&_0x50568e[_0x3f2769(0x1ad)]?.['id']&&(_0x299d58=_0x50568e['user']['id']),_0x299d58&&await telegramBotService_1[_0x3f2769(0x1b6)]['sendLoginNotification'](_0x299d58,{'username':_0x56ecb1[_0x3f2769(0x19f)],'ipAddress':_0x548a31,'userAgent':_0x243f9f,'timestamp':new Date(),'success':!![]}),_0x116d72[_0x3f2769(0x1a6)]({'success':!![],'result':_0x50568e});}catch(_0x8c241c){try{const _0x22fac6=(await Promise[_0x3f2769(0x199)]()[_0x3f2769(0x1c2)](()=>__importStar(require('../config/database'))))['default'],_0x47a4ac=await _0x22fac6[_0x3f2769(0x19e)][_0x3f2769(0x1af)]({'where':{'username':_0x56ecb1[_0x3f2769(0x19f)]},'select':{'id':!![]}});_0x47a4ac&&await telegramBotService_1['telegramBotService'][_0x3f2769(0x1b1)](_0x47a4ac['id'],{'username':_0x56ecb1[_0x3f2769(0x19f)],'ipAddress':_0x548a31,'userAgent':_0x243f9f,'timestamp':new Date(),'success':![]});}catch(_0x4e6598){console[_0x3f2769(0x1a5)]('Failed\x20to\x20send\x20failed\x20login\x20notification:',_0x4e6598);}throw _0x8c241c;}}catch(_0x327c01){_0xd3e99b(_0x327c01);}},this['me']=async(_0x58855e,_0x3b3110,_0xb07854)=>{const _0x3afd51=_0x22f9f6;try{const _0x56e820=_0x58855e[_0x3afd51(0x1ad)];_0x3b3110[_0x3afd51(0x1a6)]({'success':!![],'result':{'id':_0x56e820?.['id'],'username':_0x56e820?.[_0x3afd51(0x19f)],'role':_0x56e820?.[_0x3afd51(0x1a3)]}});}catch(_0x9fbd53){_0xb07854(_0x9fbd53);}},this['logout']=async(_0x203888,_0x14f05a,_0x24d379)=>{const _0x12d9a9=_0x22f9f6;try{const _0x55ad72=_0x203888['token'],_0x3a1939=_0x203888[_0x12d9a9(0x1ad)];_0x55ad72&&_0x3a1939?.[_0x12d9a9(0x1c1)]&&tokenBlacklistService_1[_0x12d9a9(0x1b7)]['blacklistToken'](_0x55ad72,_0x3a1939[_0x12d9a9(0x1c1)]),_0x14f05a[_0x12d9a9(0x1a6)]({'success':!![],'message':'Logged\x20out\x20successfully'});}catch(_0x341a8d){_0x24d379(_0x341a8d);}},this['getBlacklistStats']=async(_0x58f3d8,_0x4720ce,_0x12bc89)=>{const _0x448e22=_0x22f9f6;try{const _0x17d2de=tokenBlacklistService_1[_0x448e22(0x1b7)][_0x448e22(0x198)]();_0x4720ce[_0x448e22(0x1a6)]({'success':!![],'result':_0x17d2de});}catch(_0x75db87){_0x12bc89(_0x75db87);}},this[_0x22f9f6(0x1ba)]=new authService_1[(_0x22f9f6(0x1bf))]();}}function a4_0x42ce(_0x401dcb,_0x281f2c){const _0x3b5e5b=a4_0x3b5e();return a4_0x42ce=function(_0x42ce15,_0x171208){_0x42ce15=_0x42ce15-0x197;let _0x106d3c=_0x3b5e5b[_0x42ce15];return _0x106d3c;},a4_0x42ce(_0x401dcb,_0x281f2c);}exports[a4_0x33a8d6(0x1b3)]=AuthController;