'use strict';const a17_0x2524d0=a17_0x5662;(function(_0xb3544c,_0xc1fcd2){const _0x4abe26=a17_0x5662,_0x3dca4d=_0xb3544c();while(!![]){try{const _0x3d3f3b=-parseInt(_0x4abe26(0x119))/0x1+parseInt(_0x4abe26(0xf7))/0x2*(parseInt(_0x4abe26(0xdd))/0x3)+parseInt(_0x4abe26(0xe1))/0x4+-parseInt(_0x4abe26(0xff))/0x5*(-parseInt(_0x4abe26(0xe8))/0x6)+-parseInt(_0x4abe26(0xbe))/0x7+-parseInt(_0x4abe26(0xb9))/0x8*(-parseInt(_0x4abe26(0xbb))/0x9)+parseInt(_0x4abe26(0xdb))/0xa*(-parseInt(_0x4abe26(0x113))/0xb);if(_0x3d3f3b===_0xc1fcd2)break;else _0x3dca4d['push'](_0x3dca4d['shift']());}catch(_0x3458e6){_0x3dca4d['push'](_0x3dca4d['shift']());}}}(a17_0xa85e,0x1baff));function a17_0xa85e(){const _0x93b540=['CoinToPay\x20webhook\x20processing\x20failed','json','processCoinToPay2Webhook','===\x20AmPay\x20TRY\x20Webhook\x20Received\x20===','handleAmPayTRYWebhook','217857biyoKu','visa','Body:','logWebhookReceived','Body\x20type:','webhookService','Rapyd\x20webhook\x20processing\x20failed','Received\x20CoinToPay2\x20webhook:','VISA\x20webhook\x20processing\x20failed','Raw\x20body\x20type:','Received\x20VISA\x20webhook:','get','cointopay','keys','amer','processAmPayTRYWebhook','200xVfjkN','error','60849ghTDhH','plisio','rapyd','350840kzkTEv','KLYME\x20webhook\x20processing\x20failed','ampay','Query\x20params:','CoinToPay\x20webhook\x20processing\x20error:','CoinToPay\x20webhook\x20processed\x20successfully','message','Received\x20Noda\x20webhook:','Received\x20Amer\x20webhook:','===\x20PLISIO\x20GATEWAY\x20WEBHOOK\x20RECEIVED\x20===','Body\x20keys:','status','body','processNodaWebhook','WebhookController','AmPay\x20webhook\x20processing\x20error:','Amer\x20webhook\x20processing\x20error:','Noda\x20webhook\x20processed\x20successfully','Rapyd\x20webhook\x20processing\x20error:','===\x20PLISIO\x20WEBHOOK\x20RECEIVED\x20===','processAmerWebhook','handleKlymeWebhook','Amer\x20webhook\x20processing\x20failed','CoinToPay2\x20webhook\x20processed\x20successfully','VISA\x20webhook\x20processed\x20successfully','Gateway\x20webhook\x20processing\x20failed','log','Rapyd\x20webhook\x20processed\x20successfully','Received\x20MasterCard\x20webhook:','8230Qoiptj','KLYME\x20webhook\x20processed\x20successfully','26907qaWXzO','handleRapydWebhook','handleCoinToPayWebhook','Webhook\x20processed\x20successfully','229800euFEGA','Method:','processRapydWebhook','klyme','===\x20AmPay\x20Webhook\x20Received\x20===','VISA\x20webhook\x20processing\x20error:','MyXSpend\x20webhook\x20processed\x20successfully','307974svczno','MyXSpend\x20webhook\x20processing\x20failed','query','AmPay\x20webhook\x20processing\x20failed','Content-Type:','myxspend','cointopay2','loggerService','CoinToPay2\x20webhook\x20processing\x20error:','Received\x20Rapyd\x20webhook:','Noda\x20webhook\x20processing\x20failed','processMyXSpendWebhook','processPlisioGatewayWebhook','noda','mastercard','42luGEkZ','handleNodaWebhook','Gateway\x20webhook\x20processing\x20error:','MyXSpend\x20webhook\x20processing\x20error:','Gateway\x20webhook\x20processed\x20successfully','headers','defineProperty','Received\x20KLYME\x20webhook:','5XNMJfs','processPlisioWebhook','WebhookService','../services/webhookService','AmPay\x20TRY\x20webhook\x20processing\x20failed','ampay_try','AmPay\x20webhook\x20processed\x20successfully','MasterCard\x20webhook\x20processed\x20successfully','Body\x20content:','Headers:','logWebhookError','handlePlisioGatewayWebhook','Content-Type','handleMasterCardWebhook','===\x20MyXSpend\x20Webhook\x20Received\x20===','KLYME\x20webhook\x20processing\x20error:','MasterCard\x20webhook\x20processing\x20failed','processAmPayWebhook','__esModule','handleMyXSpendWebhook','1133rsPgmQ'];a17_0xa85e=function(){return _0x93b540;};return a17_0xa85e();}Object[a17_0x2524d0(0xfd)](exports,a17_0x2524d0(0x111),{'value':!![]}),exports[a17_0x2524d0(0xcc)]=void 0x0;const webhookService_1=require(a17_0x2524d0(0x102)),loggerService_1=require('../services/loggerService');class WebhookController{constructor(){const _0x3fdb48=a17_0x2524d0;this['handlePlisioWebhook']=async(_0x10b1c4,_0x13f85d,_0x17c00d)=>{const _0x3a2ed2=a17_0x5662;try{console['log'](_0x3a2ed2(0xd1)),console[_0x3a2ed2(0xd8)](_0x3a2ed2(0xec),_0x10b1c4[_0x3a2ed2(0x124)]('Content-Type')),console[_0x3a2ed2(0xd8)]('Raw\x20body\x20type:',typeof _0x10b1c4[_0x3a2ed2(0xca)]),console[_0x3a2ed2(0xd8)](_0x3a2ed2(0xc8),Object[_0x3a2ed2(0x126)](_0x10b1c4[_0x3a2ed2(0xca)]||{})),console[_0x3a2ed2(0xd8)]('Body\x20content:',_0x10b1c4['body']),loggerService_1[_0x3a2ed2(0xef)][_0x3a2ed2(0x11c)](_0x3a2ed2(0xbc),_0x10b1c4[_0x3a2ed2(0xca)],_0x10b1c4['headers']);const _0x38a3d5=await this['webhookService'][_0x3a2ed2(0x100)](_0x10b1c4[_0x3a2ed2(0xca)]);_0x13f85d[_0x3a2ed2(0xc9)](0xc8)[_0x3a2ed2(0x115)]({'success':!![],'message':_0x3a2ed2(0xe0)});}catch(_0x338413){console[_0x3a2ed2(0xba)]('Webhook\x20processing\x20error:',_0x338413),loggerService_1[_0x3a2ed2(0xef)][_0x3a2ed2(0x109)](_0x3a2ed2(0xbc),_0x338413,_0x10b1c4[_0x3a2ed2(0xca)]),_0x13f85d[_0x3a2ed2(0xc9)](0xc8)[_0x3a2ed2(0x115)]({'success':![],'message':_0x338413 instanceof Error?_0x338413[_0x3a2ed2(0xc4)]:'Webhook\x20processing\x20failed'});}},this[_0x3fdb48(0x10a)]=async(_0x4e6590,_0x5e721e,_0x53d1c4)=>{const _0x754fed=_0x3fdb48;try{console[_0x754fed(0xd8)](_0x754fed(0xc7)),console['log'](_0x754fed(0xec),_0x4e6590['get'](_0x754fed(0x10b))),console[_0x754fed(0xd8)](_0x754fed(0x122),typeof _0x4e6590['body']),console['log'](_0x754fed(0xc8),Object[_0x754fed(0x126)](_0x4e6590[_0x754fed(0xca)]||{})),console[_0x754fed(0xd8)](_0x754fed(0x107),_0x4e6590['body']),loggerService_1['loggerService'][_0x754fed(0x11c)]('plisio_gateway',_0x4e6590[_0x754fed(0xca)],_0x4e6590[_0x754fed(0xfc)]);const _0x56dd39=await this[_0x754fed(0x11e)][_0x754fed(0xf4)](_0x4e6590[_0x754fed(0xca)]);_0x5e721e['status'](0xc8)[_0x754fed(0x115)]({'success':!![],'message':_0x754fed(0xfb)});}catch(_0x12a3cd){console[_0x754fed(0xba)](_0x754fed(0xf9),_0x12a3cd),loggerService_1[_0x754fed(0xef)][_0x754fed(0x109)]('plisio_gateway',_0x12a3cd,_0x4e6590['body']),_0x5e721e['status'](0xc8)[_0x754fed(0x115)]({'success':![],'message':_0x12a3cd instanceof Error?_0x12a3cd['message']:_0x754fed(0xd7)});}},this[_0x3fdb48(0xde)]=async(_0x32e805,_0x3748a7,_0x2b8772)=>{const _0x2b49db=_0x3fdb48;try{console[_0x2b49db(0xd8)](_0x2b49db(0xf1),_0x32e805['body']),loggerService_1[_0x2b49db(0xef)][_0x2b49db(0x11c)](_0x2b49db(0xbd),_0x32e805[_0x2b49db(0xca)],_0x32e805[_0x2b49db(0xfc)]);const _0x2a9e0c=await this[_0x2b49db(0x11e)][_0x2b49db(0xe3)](_0x32e805[_0x2b49db(0xca)]);_0x3748a7[_0x2b49db(0xc9)](0xc8)['json']({'success':!![],'message':_0x2b49db(0xd9)});}catch(_0x44c8ba){console[_0x2b49db(0xba)](_0x2b49db(0xd0),_0x44c8ba),loggerService_1['loggerService']['logWebhookError'](_0x2b49db(0xbd),_0x44c8ba,_0x32e805[_0x2b49db(0xca)]),_0x3748a7['status'](0xc8)[_0x2b49db(0x115)]({'success':![],'message':_0x44c8ba instanceof Error?_0x44c8ba['message']:_0x2b49db(0x11f)});}},this[_0x3fdb48(0xf8)]=async(_0x4bd210,_0x35bcfd,_0x53f2b1)=>{const _0x3da7ee=_0x3fdb48;try{console[_0x3da7ee(0xd8)](_0x3da7ee(0xc5),_0x4bd210[_0x3da7ee(0xca)]),loggerService_1[_0x3da7ee(0xef)]['logWebhookReceived'](_0x3da7ee(0xf5),_0x4bd210['body'],_0x4bd210[_0x3da7ee(0xfc)]);const _0x4655ab=await this[_0x3da7ee(0x11e)][_0x3da7ee(0xcb)](_0x4bd210[_0x3da7ee(0xca)]);_0x35bcfd['status'](0xc8)[_0x3da7ee(0x115)]({'success':!![],'message':_0x3da7ee(0xcf)});}catch(_0x1d92f4){console[_0x3da7ee(0xba)]('Noda\x20webhook\x20processing\x20error:',_0x1d92f4),loggerService_1[_0x3da7ee(0xef)][_0x3da7ee(0x109)]('noda',_0x1d92f4,_0x4bd210['body']),_0x35bcfd[_0x3da7ee(0xc9)](0xc8)[_0x3da7ee(0x115)]({'success':![],'message':_0x1d92f4 instanceof Error?_0x1d92f4[_0x3da7ee(0xc4)]:_0x3da7ee(0xf2)});}},this[_0x3fdb48(0xdf)]=async(_0x2f2815,_0x4f17a0,_0x745463)=>{const _0x4824b6=_0x3fdb48;try{console['log']('Received\x20CoinToPay\x20webhook:',_0x2f2815[_0x4824b6(0xca)]),loggerService_1[_0x4824b6(0xef)][_0x4824b6(0x11c)](_0x4824b6(0x125),_0x2f2815[_0x4824b6(0xca)],_0x2f2815['headers']);const _0x2bf557=await this['webhookService']['processCoinToPayWebhook'](_0x2f2815[_0x4824b6(0xca)]);_0x4f17a0[_0x4824b6(0xc9)](0xc8)[_0x4824b6(0x115)]({'success':!![],'message':_0x4824b6(0xc3)});}catch(_0x1d4d7d){console[_0x4824b6(0xba)](_0x4824b6(0xc2),_0x1d4d7d),loggerService_1[_0x4824b6(0xef)][_0x4824b6(0x109)]('cointopay',_0x1d4d7d,_0x2f2815[_0x4824b6(0xca)]),_0x4f17a0[_0x4824b6(0xc9)](0xc8)[_0x4824b6(0x115)]({'success':![],'message':_0x1d4d7d instanceof Error?_0x1d4d7d['message']:_0x4824b6(0x114)});}},this['handleCoinToPay2Webhook']=async(_0xcb21b1,_0x739757,_0x395e6a)=>{const _0xc38f7f=_0x3fdb48;try{console[_0xc38f7f(0xd8)](_0xc38f7f(0x120),_0xcb21b1[_0xc38f7f(0xca)]),loggerService_1[_0xc38f7f(0xef)][_0xc38f7f(0x11c)](_0xc38f7f(0xee),_0xcb21b1['body'],_0xcb21b1[_0xc38f7f(0xfc)]);const _0x396c78=await this[_0xc38f7f(0x11e)][_0xc38f7f(0x116)](_0xcb21b1[_0xc38f7f(0xca)]);_0x739757[_0xc38f7f(0xc9)](0xc8)[_0xc38f7f(0x115)]({'success':!![],'message':_0xc38f7f(0xd5)});}catch(_0x18a149){console[_0xc38f7f(0xba)](_0xc38f7f(0xf0),_0x18a149),loggerService_1['loggerService'][_0xc38f7f(0x109)]('cointopay2',_0x18a149,_0xcb21b1[_0xc38f7f(0xca)]),_0x739757['status'](0xc8)['json']({'success':![],'message':_0x18a149 instanceof Error?_0x18a149[_0xc38f7f(0xc4)]:'CoinToPay2\x20webhook\x20processing\x20failed'});}},this[_0x3fdb48(0xd3)]=async(_0x509992,_0x14a4cb,_0x3d6001)=>{const _0x2661ec=_0x3fdb48;try{console['log'](_0x2661ec(0xfe),_0x509992['body']),loggerService_1[_0x2661ec(0xef)][_0x2661ec(0x11c)](_0x2661ec(0xe4),_0x509992[_0x2661ec(0xca)],_0x509992[_0x2661ec(0xfc)]);const _0xb036fd=await this[_0x2661ec(0x11e)]['processKlymeWebhook'](_0x509992[_0x2661ec(0xca)]);_0x14a4cb['status'](0xc8)[_0x2661ec(0x115)]({'success':!![],'message':_0x2661ec(0xdc)});}catch(_0x4d5dfa){console[_0x2661ec(0xba)](_0x2661ec(0x10e),_0x4d5dfa),loggerService_1[_0x2661ec(0xef)]['logWebhookError'](_0x2661ec(0xe4),_0x4d5dfa,_0x509992[_0x2661ec(0xca)]),_0x14a4cb[_0x2661ec(0xc9)](0xc8)[_0x2661ec(0x115)]({'success':![],'message':_0x4d5dfa instanceof Error?_0x4d5dfa['message']:_0x2661ec(0xbf)});}},this['handleVisaWebhook']=async(_0x287812,_0x1d3c20,_0xa31475)=>{const _0x399959=_0x3fdb48;try{console['log'](_0x399959(0x123),_0x287812[_0x399959(0xca)]),loggerService_1['loggerService'][_0x399959(0x11c)](_0x399959(0x11a),_0x287812[_0x399959(0xca)],_0x287812[_0x399959(0xfc)]);const _0x9e4d78=await this[_0x399959(0x11e)]['processVisaWebhook'](_0x287812[_0x399959(0xca)]);_0x1d3c20['status'](0xc8)[_0x399959(0x115)]({'success':!![],'message':_0x399959(0xd6)});}catch(_0x434850){console['error'](_0x399959(0xe6),_0x434850),loggerService_1[_0x399959(0xef)]['logWebhookError']('visa',_0x434850,_0x287812[_0x399959(0xca)]),_0x1d3c20[_0x399959(0xc9)](0xc8)[_0x399959(0x115)]({'success':![],'message':_0x434850 instanceof Error?_0x434850['message']:_0x399959(0x121)});}},this[_0x3fdb48(0x10c)]=async(_0xac35cb,_0x48935f,_0x57603b)=>{const _0x28a515=_0x3fdb48;try{console['log'](_0x28a515(0xda),_0xac35cb[_0x28a515(0xca)]),loggerService_1[_0x28a515(0xef)][_0x28a515(0x11c)]('mastercard',_0xac35cb[_0x28a515(0xca)],_0xac35cb[_0x28a515(0xfc)]);const _0x4f5120=await this[_0x28a515(0x11e)]['processMasterCardWebhook'](_0xac35cb[_0x28a515(0xca)]);_0x48935f[_0x28a515(0xc9)](0xc8)[_0x28a515(0x115)]({'success':!![],'message':_0x28a515(0x106)});}catch(_0x3d3160){console[_0x28a515(0xba)]('MasterCard\x20webhook\x20processing\x20error:',_0x3d3160),loggerService_1[_0x28a515(0xef)][_0x28a515(0x109)](_0x28a515(0xf6),_0x3d3160,_0xac35cb['body']),_0x48935f[_0x28a515(0xc9)](0xc8)[_0x28a515(0x115)]({'success':![],'message':_0x3d3160 instanceof Error?_0x3d3160[_0x28a515(0xc4)]:_0x28a515(0x10f)});}},this['handleAmerWebhook']=async(_0x352476,_0x449e6a,_0x4bc0fb)=>{const _0x4e0eb2=_0x3fdb48;try{console[_0x4e0eb2(0xd8)](_0x4e0eb2(0xc6),_0x352476[_0x4e0eb2(0xca)]),loggerService_1['loggerService']['logWebhookReceived'](_0x4e0eb2(0xb7),_0x352476[_0x4e0eb2(0xca)],_0x352476[_0x4e0eb2(0xfc)]);const _0x4fc07c=await this[_0x4e0eb2(0x11e)][_0x4e0eb2(0xd2)](_0x352476[_0x4e0eb2(0xca)]);_0x449e6a[_0x4e0eb2(0xc9)](0xc8)[_0x4e0eb2(0x115)]({'success':!![],'message':'Amer\x20webhook\x20processed\x20successfully'});}catch(_0x1b360c){console[_0x4e0eb2(0xba)](_0x4e0eb2(0xce),_0x1b360c),loggerService_1[_0x4e0eb2(0xef)][_0x4e0eb2(0x109)](_0x4e0eb2(0xb7),_0x1b360c,_0x352476['body']),_0x449e6a[_0x4e0eb2(0xc9)](0xc8)[_0x4e0eb2(0x115)]({'success':![],'message':_0x1b360c instanceof Error?_0x1b360c[_0x4e0eb2(0xc4)]:_0x4e0eb2(0xd4)});}},this['handleAmPayWebhook']=async(_0x44680f,_0x4c9279,_0x413497)=>{const _0x343a6d=_0x3fdb48;try{console[_0x343a6d(0xd8)](_0x343a6d(0xe5)),console[_0x343a6d(0xd8)]('Headers:',_0x44680f['headers']),console[_0x343a6d(0xd8)]('Body:',_0x44680f['body']),console[_0x343a6d(0xd8)](_0x343a6d(0x11d),typeof _0x44680f[_0x343a6d(0xca)]),console[_0x343a6d(0xd8)]('Body\x20keys:',Object[_0x343a6d(0x126)](_0x44680f[_0x343a6d(0xca)]||{})),loggerService_1['loggerService'][_0x343a6d(0x11c)]('ampay',_0x44680f[_0x343a6d(0xca)],_0x44680f[_0x343a6d(0xfc)]);const _0x448c95=await this[_0x343a6d(0x11e)][_0x343a6d(0x110)](_0x44680f['body']);_0x4c9279[_0x343a6d(0xc9)](0xc8)[_0x343a6d(0x115)]({'success':!![],'message':_0x343a6d(0x105)});}catch(_0x4f0dfd){console[_0x343a6d(0xba)](_0x343a6d(0xcd),_0x4f0dfd),loggerService_1[_0x343a6d(0xef)]['logWebhookError'](_0x343a6d(0xc0),_0x4f0dfd,_0x44680f[_0x343a6d(0xca)]),_0x4c9279[_0x343a6d(0xc9)](0xc8)[_0x343a6d(0x115)]({'success':![],'message':_0x4f0dfd instanceof Error?_0x4f0dfd['message']:_0x343a6d(0xeb)});}},this[_0x3fdb48(0x118)]=async(_0x555fa9,_0x2e6354,_0x412bc5)=>{const _0x47c3d6=_0x3fdb48;try{console[_0x47c3d6(0xd8)](_0x47c3d6(0x117)),console[_0x47c3d6(0xd8)](_0x47c3d6(0x108),_0x555fa9['headers']),console[_0x47c3d6(0xd8)](_0x47c3d6(0x11b),_0x555fa9['body']),console[_0x47c3d6(0xd8)](_0x47c3d6(0x11d),typeof _0x555fa9[_0x47c3d6(0xca)]),console[_0x47c3d6(0xd8)](_0x47c3d6(0xc8),Object[_0x47c3d6(0x126)](_0x555fa9[_0x47c3d6(0xca)]||{})),loggerService_1[_0x47c3d6(0xef)][_0x47c3d6(0x11c)](_0x47c3d6(0x104),_0x555fa9[_0x47c3d6(0xca)],_0x555fa9[_0x47c3d6(0xfc)]);const _0x5eff07=await this['webhookService'][_0x47c3d6(0xb8)](_0x555fa9[_0x47c3d6(0xca)]);_0x2e6354['status'](0xc8)['json']({'success':!![],'message':'AmPay\x20TRY\x20webhook\x20processed\x20successfully'});}catch(_0x4bb82e){console[_0x47c3d6(0xba)]('AmPay\x20TRY\x20webhook\x20processing\x20error:',_0x4bb82e),loggerService_1[_0x47c3d6(0xef)][_0x47c3d6(0x109)](_0x47c3d6(0x104),_0x4bb82e,_0x555fa9[_0x47c3d6(0xca)]),_0x2e6354[_0x47c3d6(0xc9)](0xc8)[_0x47c3d6(0x115)]({'success':![],'message':_0x4bb82e instanceof Error?_0x4bb82e[_0x47c3d6(0xc4)]:_0x47c3d6(0x103)});}},this[_0x3fdb48(0x112)]=async(_0x194680,_0x359214,_0x1ec8dd)=>{const _0x34a904=_0x3fdb48;try{console[_0x34a904(0xd8)](_0x34a904(0x10d)),console[_0x34a904(0xd8)](_0x34a904(0x108),_0x194680[_0x34a904(0xfc)]),console[_0x34a904(0xd8)](_0x34a904(0xc1),_0x194680[_0x34a904(0xea)]),console['log'](_0x34a904(0x11b),_0x194680[_0x34a904(0xca)]),console['log'](_0x34a904(0xe2),_0x194680['method']),loggerService_1[_0x34a904(0xef)][_0x34a904(0x11c)]('myxspend',_0x194680['body']||_0x194680[_0x34a904(0xea)],_0x194680[_0x34a904(0xfc)]);const _0x3b07f1=await this[_0x34a904(0x11e)][_0x34a904(0xf3)](_0x194680[_0x34a904(0xea)],_0x194680['body']);_0x359214[_0x34a904(0xc9)](0xc8)[_0x34a904(0x115)]({'success':!![],'message':_0x34a904(0xe7)});}catch(_0x1c2011){console[_0x34a904(0xba)](_0x34a904(0xfa),_0x1c2011),loggerService_1[_0x34a904(0xef)]['logWebhookError'](_0x34a904(0xed),_0x1c2011,_0x194680[_0x34a904(0xca)]||_0x194680[_0x34a904(0xea)]),_0x359214['status'](0xc8)[_0x34a904(0x115)]({'success':![],'message':_0x1c2011 instanceof Error?_0x1c2011['message']:_0x34a904(0xe9)});}},this[_0x3fdb48(0x11e)]=new webhookService_1[(_0x3fdb48(0x101))]();}}function a17_0x5662(_0x2e5a4f,_0x4082a1){const _0xa85ec8=a17_0xa85e();return a17_0x5662=function(_0x5662ac,_0x1b8f72){_0x5662ac=_0x5662ac-0xb7;let _0x3a360c=_0xa85ec8[_0x5662ac];return _0x3a360c;},a17_0x5662(_0x2e5a4f,_0x4082a1);}exports[a17_0x2524d0(0xcc)]=WebhookController;