'use strict';const a17_0x2d2dbd=a17_0x1578;(function(_0xb719a4,_0x9dcff6){const _0x25d8b3=a17_0x1578,_0x204c27=_0xb719a4();while(!![]){try{const _0x49aefa=parseInt(_0x25d8b3(0x18a))/0x1+parseInt(_0x25d8b3(0x162))/0x2+-parseInt(_0x25d8b3(0x1a4))/0x3*(parseInt(_0x25d8b3(0x1a8))/0x4)+-parseInt(_0x25d8b3(0x19c))/0x5*(-parseInt(_0x25d8b3(0x193))/0x6)+-parseInt(_0x25d8b3(0x17e))/0x7+parseInt(_0x25d8b3(0x19b))/0x8+parseInt(_0x25d8b3(0x13f))/0x9*(parseInt(_0x25d8b3(0x156))/0xa);if(_0x49aefa===_0x9dcff6)break;else _0x204c27['push'](_0x204c27['shift']());}catch(_0x157dd1){_0x204c27['push'](_0x204c27['shift']());}}}(a17_0x3a5c,0xdd7ea));function a17_0x1578(_0x617783,_0x535848){const _0x3a5ceb=a17_0x3a5c();return a17_0x1578=function(_0x1578f8,_0x18ed67){_0x1578f8=_0x1578f8-0x13d;let _0x251cce=_0x3a5ceb[_0x1578f8];return _0x251cce;},a17_0x1578(_0x617783,_0x535848);}function a17_0x3a5c(){const _0x540962=['Received\x20VISA\x20webhook:','MyXSpend\x20webhook\x20processed\x20successfully','processPlisioGatewayWebhook','303920RmXeuL','===\x20AmPay\x20TRY\x20Webhook\x20Received\x20===','json','cointopay','Rapyd\x20webhook\x20processed\x20successfully','Amer\x20webhook\x20processing\x20error:','processAmPayTRYWebhook','loggerService','Noda\x20webhook\x20processing\x20failed','Noda\x20webhook\x20processed\x20successfully','method','Gateway\x20webhook\x20processing\x20error:','171334xAFfxh','handleMasterCardWebhook','get','ampay','Webhook\x20processing\x20error:','Webhook\x20processed\x20successfully','status','ampay_try','amer','AmPay\x20TRY\x20webhook\x20processing\x20error:','handleAmPayTRYWebhook','keys','headers','MasterCard\x20webhook\x20processing\x20error:','log','processNodaWebhook','webhookService','Received\x20MasterCard\x20webhook:','handleMyXSpendWebhook','handleVisaWebhook','body','plisio','CoinToPay2\x20webhook\x20processed\x20successfully','processPlisioWebhook','===\x20AmPay\x20Webhook\x20Received\x20===','processMasterCardWebhook','handleKlymeWebhook','defineProperty','4598041qfInyl','Received\x20Noda\x20webhook:','logWebhookReceived','Received\x20CoinToPay2\x20webhook:','plisio_gateway','handleCoinToPayWebhook','===\x20PLISIO\x20GATEWAY\x20WEBHOOK\x20RECEIVED\x20===','noda','Body\x20type:','Received\x20Amer\x20webhook:','query','message','213242wrjPmJ','error','visa','Body\x20keys:','handleNodaWebhook','CoinToPay\x20webhook\x20processing\x20error:','processRapydWebhook','WebhookService','Headers:','114IQcquw','Amer\x20webhook\x20processing\x20failed','Body\x20content:','rapyd','Amer\x20webhook\x20processed\x20successfully','AmPay\x20webhook\x20processed\x20successfully','Content-Type','Raw\x20body\x20type:','12774832OmlcRc','173295NggmzA','VISA\x20webhook\x20processing\x20failed','__esModule','===\x20PLISIO\x20WEBHOOK\x20RECEIVED\x20===','processVisaWebhook','MasterCard\x20webhook\x20processing\x20failed','logWebhookError','Rapyd\x20webhook\x20processing\x20error:','3791121SrQLRJ','myxspend','Query\x20params:','Gateway\x20webhook\x20processing\x20failed','4AWKmVp','processCoinToPay2Webhook','mastercard','81edKUdR','Body:','Rapyd\x20webhook\x20processing\x20failed','KLYME\x20webhook\x20processed\x20successfully','Received\x20KLYME\x20webhook:','handleRapydWebhook','Webhook\x20processing\x20failed','cointopay2','CoinToPay2\x20webhook\x20processing\x20error:','handleAmPayWebhook','Content-Type:','Method:','AmPay\x20webhook\x20processing\x20failed','processCoinToPayWebhook','MyXSpend\x20webhook\x20processing\x20error:','CoinToPay2\x20webhook\x20processing\x20failed','handleAmerWebhook','klyme','handlePlisioWebhook','handlePlisioGatewayWebhook'];a17_0x3a5c=function(){return _0x540962;};return a17_0x3a5c();}Object[a17_0x2d2dbd(0x17d)](exports,a17_0x2d2dbd(0x19e),{'value':!![]}),exports['WebhookController']=void 0x0;const webhookService_1=require('../services/webhookService'),loggerService_1=require('../services/loggerService');class WebhookController{constructor(){const _0x110399=a17_0x2d2dbd;this[_0x110399(0x151)]=async(_0x188efb,_0x47dd08,_0x6ccd2c)=>{const _0x4eba32=_0x110399;try{console[_0x4eba32(0x170)](_0x4eba32(0x19f)),console[_0x4eba32(0x170)](_0x4eba32(0x149),_0x188efb[_0x4eba32(0x164)]('Content-Type')),console[_0x4eba32(0x170)](_0x4eba32(0x19a),typeof _0x188efb['body']),console[_0x4eba32(0x170)]('Body\x20keys:',Object['keys'](_0x188efb['body']||{})),console[_0x4eba32(0x170)]('Body\x20content:',_0x188efb[_0x4eba32(0x176)]),loggerService_1[_0x4eba32(0x15d)][_0x4eba32(0x180)](_0x4eba32(0x177),_0x188efb[_0x4eba32(0x176)],_0x188efb[_0x4eba32(0x16e)]);const _0x2753f5=await this[_0x4eba32(0x172)][_0x4eba32(0x179)](_0x188efb[_0x4eba32(0x176)]);_0x47dd08[_0x4eba32(0x168)](0xc8)['json']({'success':!![],'message':_0x4eba32(0x167)});}catch(_0x157ddc){console['error'](_0x4eba32(0x166),_0x157ddc),loggerService_1[_0x4eba32(0x15d)][_0x4eba32(0x1a2)](_0x4eba32(0x177),_0x157ddc,_0x188efb[_0x4eba32(0x176)]),_0x47dd08['status'](0xc8)[_0x4eba32(0x158)]({'success':![],'message':_0x157ddc instanceof Error?_0x157ddc[_0x4eba32(0x189)]:_0x4eba32(0x145)});}},this[_0x110399(0x152)]=async(_0x5bb00f,_0x637cbf,_0x3c9bb1)=>{const _0x590696=_0x110399;try{console[_0x590696(0x170)](_0x590696(0x184)),console['log']('Content-Type:',_0x5bb00f[_0x590696(0x164)](_0x590696(0x199))),console[_0x590696(0x170)]('Raw\x20body\x20type:',typeof _0x5bb00f[_0x590696(0x176)]),console[_0x590696(0x170)](_0x590696(0x18d),Object[_0x590696(0x16d)](_0x5bb00f[_0x590696(0x176)]||{})),console[_0x590696(0x170)](_0x590696(0x195),_0x5bb00f[_0x590696(0x176)]),loggerService_1[_0x590696(0x15d)][_0x590696(0x180)]('plisio_gateway',_0x5bb00f[_0x590696(0x176)],_0x5bb00f['headers']);const _0x5e16d8=await this[_0x590696(0x172)][_0x590696(0x155)](_0x5bb00f[_0x590696(0x176)]);_0x637cbf[_0x590696(0x168)](0xc8)[_0x590696(0x158)]({'success':!![],'message':'Gateway\x20webhook\x20processed\x20successfully'});}catch(_0x33710a){console[_0x590696(0x18b)](_0x590696(0x161),_0x33710a),loggerService_1[_0x590696(0x15d)]['logWebhookError'](_0x590696(0x182),_0x33710a,_0x5bb00f[_0x590696(0x176)]),_0x637cbf[_0x590696(0x168)](0xc8)[_0x590696(0x158)]({'success':![],'message':_0x33710a instanceof Error?_0x33710a[_0x590696(0x189)]:_0x590696(0x1a7)});}},this[_0x110399(0x144)]=async(_0x414656,_0x1de08f,_0x13379a)=>{const _0x4e06cd=_0x110399;try{console[_0x4e06cd(0x170)]('Received\x20Rapyd\x20webhook:',_0x414656['body']),loggerService_1[_0x4e06cd(0x15d)]['logWebhookReceived'](_0x4e06cd(0x196),_0x414656[_0x4e06cd(0x176)],_0x414656[_0x4e06cd(0x16e)]);const _0x3e6d9c=await this[_0x4e06cd(0x172)][_0x4e06cd(0x190)](_0x414656[_0x4e06cd(0x176)]);_0x1de08f[_0x4e06cd(0x168)](0xc8)['json']({'success':!![],'message':_0x4e06cd(0x15a)});}catch(_0x1cab3c){console['error'](_0x4e06cd(0x1a3),_0x1cab3c),loggerService_1[_0x4e06cd(0x15d)][_0x4e06cd(0x1a2)](_0x4e06cd(0x196),_0x1cab3c,_0x414656[_0x4e06cd(0x176)]),_0x1de08f[_0x4e06cd(0x168)](0xc8)[_0x4e06cd(0x158)]({'success':![],'message':_0x1cab3c instanceof Error?_0x1cab3c[_0x4e06cd(0x189)]:_0x4e06cd(0x141)});}},this[_0x110399(0x18e)]=async(_0xff10d5,_0x661bb3,_0x340e58)=>{const _0x265cc3=_0x110399;try{console[_0x265cc3(0x170)](_0x265cc3(0x17f),_0xff10d5['body']),loggerService_1[_0x265cc3(0x15d)][_0x265cc3(0x180)](_0x265cc3(0x185),_0xff10d5[_0x265cc3(0x176)],_0xff10d5[_0x265cc3(0x16e)]);const _0x178c22=await this['webhookService'][_0x265cc3(0x171)](_0xff10d5['body']);_0x661bb3[_0x265cc3(0x168)](0xc8)[_0x265cc3(0x158)]({'success':!![],'message':_0x265cc3(0x15f)});}catch(_0x49f837){console[_0x265cc3(0x18b)]('Noda\x20webhook\x20processing\x20error:',_0x49f837),loggerService_1['loggerService'][_0x265cc3(0x1a2)](_0x265cc3(0x185),_0x49f837,_0xff10d5[_0x265cc3(0x176)]),_0x661bb3[_0x265cc3(0x168)](0xc8)[_0x265cc3(0x158)]({'success':![],'message':_0x49f837 instanceof Error?_0x49f837[_0x265cc3(0x189)]:_0x265cc3(0x15e)});}},this[_0x110399(0x183)]=async(_0x3916f7,_0x16e66e,_0x11becb)=>{const _0x4f07f9=_0x110399;try{console['log']('Received\x20CoinToPay\x20webhook:',_0x3916f7[_0x4f07f9(0x176)]),loggerService_1[_0x4f07f9(0x15d)][_0x4f07f9(0x180)](_0x4f07f9(0x159),_0x3916f7['body'],_0x3916f7['headers']);const _0x36618f=await this[_0x4f07f9(0x172)][_0x4f07f9(0x14c)](_0x3916f7['body']);_0x16e66e['status'](0xc8)[_0x4f07f9(0x158)]({'success':!![],'message':'CoinToPay\x20webhook\x20processed\x20successfully'});}catch(_0x46afc3){console[_0x4f07f9(0x18b)](_0x4f07f9(0x18f),_0x46afc3),loggerService_1[_0x4f07f9(0x15d)]['logWebhookError'](_0x4f07f9(0x159),_0x46afc3,_0x3916f7[_0x4f07f9(0x176)]),_0x16e66e[_0x4f07f9(0x168)](0xc8)[_0x4f07f9(0x158)]({'success':![],'message':_0x46afc3 instanceof Error?_0x46afc3[_0x4f07f9(0x189)]:'CoinToPay\x20webhook\x20processing\x20failed'});}},this['handleCoinToPay2Webhook']=async(_0xe74ac9,_0x7f2ce4,_0x22caa4)=>{const _0x34fa37=_0x110399;try{console['log'](_0x34fa37(0x181),_0xe74ac9[_0x34fa37(0x176)]),loggerService_1[_0x34fa37(0x15d)][_0x34fa37(0x180)](_0x34fa37(0x146),_0xe74ac9[_0x34fa37(0x176)],_0xe74ac9[_0x34fa37(0x16e)]);const _0x412ed6=await this[_0x34fa37(0x172)][_0x34fa37(0x13d)](_0xe74ac9[_0x34fa37(0x176)]);_0x7f2ce4[_0x34fa37(0x168)](0xc8)[_0x34fa37(0x158)]({'success':!![],'message':_0x34fa37(0x178)});}catch(_0x208e32){console[_0x34fa37(0x18b)](_0x34fa37(0x147),_0x208e32),loggerService_1[_0x34fa37(0x15d)][_0x34fa37(0x1a2)](_0x34fa37(0x146),_0x208e32,_0xe74ac9[_0x34fa37(0x176)]),_0x7f2ce4[_0x34fa37(0x168)](0xc8)[_0x34fa37(0x158)]({'success':![],'message':_0x208e32 instanceof Error?_0x208e32[_0x34fa37(0x189)]:_0x34fa37(0x14e)});}},this[_0x110399(0x17c)]=async(_0x3a5ca2,_0xbd0989,_0x22bacd)=>{const _0x44d2a4=_0x110399;try{console[_0x44d2a4(0x170)](_0x44d2a4(0x143),_0x3a5ca2[_0x44d2a4(0x176)]),loggerService_1[_0x44d2a4(0x15d)]['logWebhookReceived']('klyme',_0x3a5ca2[_0x44d2a4(0x176)],_0x3a5ca2[_0x44d2a4(0x16e)]);const _0x2e8bfe=await this[_0x44d2a4(0x172)]['processKlymeWebhook'](_0x3a5ca2[_0x44d2a4(0x176)]);_0xbd0989[_0x44d2a4(0x168)](0xc8)[_0x44d2a4(0x158)]({'success':!![],'message':_0x44d2a4(0x142)});}catch(_0x23cda9){console[_0x44d2a4(0x18b)]('KLYME\x20webhook\x20processing\x20error:',_0x23cda9),loggerService_1[_0x44d2a4(0x15d)][_0x44d2a4(0x1a2)](_0x44d2a4(0x150),_0x23cda9,_0x3a5ca2[_0x44d2a4(0x176)]),_0xbd0989[_0x44d2a4(0x168)](0xc8)['json']({'success':![],'message':_0x23cda9 instanceof Error?_0x23cda9[_0x44d2a4(0x189)]:'KLYME\x20webhook\x20processing\x20failed'});}},this[_0x110399(0x175)]=async(_0x5dbdf4,_0x130653,_0x1f8227)=>{const _0x51a4b3=_0x110399;try{console[_0x51a4b3(0x170)](_0x51a4b3(0x153),_0x5dbdf4[_0x51a4b3(0x176)]),loggerService_1[_0x51a4b3(0x15d)]['logWebhookReceived'](_0x51a4b3(0x18c),_0x5dbdf4[_0x51a4b3(0x176)],_0x5dbdf4[_0x51a4b3(0x16e)]);const _0x460d0f=await this[_0x51a4b3(0x172)][_0x51a4b3(0x1a0)](_0x5dbdf4[_0x51a4b3(0x176)]);_0x130653['status'](0xc8)[_0x51a4b3(0x158)]({'success':!![],'message':'VISA\x20webhook\x20processed\x20successfully'});}catch(_0x37c61e){console[_0x51a4b3(0x18b)]('VISA\x20webhook\x20processing\x20error:',_0x37c61e),loggerService_1[_0x51a4b3(0x15d)][_0x51a4b3(0x1a2)](_0x51a4b3(0x18c),_0x37c61e,_0x5dbdf4[_0x51a4b3(0x176)]),_0x130653[_0x51a4b3(0x168)](0xc8)[_0x51a4b3(0x158)]({'success':![],'message':_0x37c61e instanceof Error?_0x37c61e[_0x51a4b3(0x189)]:_0x51a4b3(0x19d)});}},this[_0x110399(0x163)]=async(_0x4af0f2,_0x16c000,_0xb55efd)=>{const _0x533b22=_0x110399;try{console[_0x533b22(0x170)](_0x533b22(0x173),_0x4af0f2[_0x533b22(0x176)]),loggerService_1[_0x533b22(0x15d)][_0x533b22(0x180)]('mastercard',_0x4af0f2['body'],_0x4af0f2[_0x533b22(0x16e)]);const _0x36846a=await this[_0x533b22(0x172)][_0x533b22(0x17b)](_0x4af0f2[_0x533b22(0x176)]);_0x16c000[_0x533b22(0x168)](0xc8)[_0x533b22(0x158)]({'success':!![],'message':'MasterCard\x20webhook\x20processed\x20successfully'});}catch(_0xf1022e){console[_0x533b22(0x18b)](_0x533b22(0x16f),_0xf1022e),loggerService_1[_0x533b22(0x15d)][_0x533b22(0x1a2)](_0x533b22(0x13e),_0xf1022e,_0x4af0f2[_0x533b22(0x176)]),_0x16c000[_0x533b22(0x168)](0xc8)[_0x533b22(0x158)]({'success':![],'message':_0xf1022e instanceof Error?_0xf1022e[_0x533b22(0x189)]:_0x533b22(0x1a1)});}},this[_0x110399(0x14f)]=async(_0x1b7448,_0x58c0e5,_0x125c47)=>{const _0x4845c5=_0x110399;try{console[_0x4845c5(0x170)](_0x4845c5(0x187),_0x1b7448['body']),loggerService_1[_0x4845c5(0x15d)][_0x4845c5(0x180)](_0x4845c5(0x16a),_0x1b7448[_0x4845c5(0x176)],_0x1b7448['headers']);const _0x5acaa1=await this[_0x4845c5(0x172)]['processAmerWebhook'](_0x1b7448[_0x4845c5(0x176)]);_0x58c0e5['status'](0xc8)[_0x4845c5(0x158)]({'success':!![],'message':_0x4845c5(0x197)});}catch(_0xfe5df4){console[_0x4845c5(0x18b)](_0x4845c5(0x15b),_0xfe5df4),loggerService_1['loggerService'][_0x4845c5(0x1a2)](_0x4845c5(0x16a),_0xfe5df4,_0x1b7448[_0x4845c5(0x176)]),_0x58c0e5['status'](0xc8)['json']({'success':![],'message':_0xfe5df4 instanceof Error?_0xfe5df4[_0x4845c5(0x189)]:_0x4845c5(0x194)});}},this[_0x110399(0x148)]=async(_0x4cda9d,_0x10540b,_0x55316b)=>{const _0x1a96c1=_0x110399;try{console['log'](_0x1a96c1(0x17a)),console[_0x1a96c1(0x170)](_0x1a96c1(0x192),_0x4cda9d[_0x1a96c1(0x16e)]),console[_0x1a96c1(0x170)]('Body:',_0x4cda9d['body']),console[_0x1a96c1(0x170)](_0x1a96c1(0x186),typeof _0x4cda9d['body']),console[_0x1a96c1(0x170)](_0x1a96c1(0x18d),Object[_0x1a96c1(0x16d)](_0x4cda9d[_0x1a96c1(0x176)]||{})),loggerService_1['loggerService'][_0x1a96c1(0x180)](_0x1a96c1(0x165),_0x4cda9d[_0x1a96c1(0x176)],_0x4cda9d[_0x1a96c1(0x16e)]);const _0x2528cb=await this['webhookService']['processAmPayWebhook'](_0x4cda9d[_0x1a96c1(0x176)]);_0x10540b[_0x1a96c1(0x168)](0xc8)[_0x1a96c1(0x158)]({'success':!![],'message':_0x1a96c1(0x198)});}catch(_0x2f47da){console[_0x1a96c1(0x18b)]('AmPay\x20webhook\x20processing\x20error:',_0x2f47da),loggerService_1[_0x1a96c1(0x15d)][_0x1a96c1(0x1a2)]('ampay',_0x2f47da,_0x4cda9d[_0x1a96c1(0x176)]),_0x10540b[_0x1a96c1(0x168)](0xc8)[_0x1a96c1(0x158)]({'success':![],'message':_0x2f47da instanceof Error?_0x2f47da[_0x1a96c1(0x189)]:_0x1a96c1(0x14b)});}},this[_0x110399(0x16c)]=async(_0x86abeb,_0x37b68a,_0x1ecc39)=>{const _0x4c4ad9=_0x110399;try{console[_0x4c4ad9(0x170)](_0x4c4ad9(0x157)),console[_0x4c4ad9(0x170)]('Headers:',_0x86abeb[_0x4c4ad9(0x16e)]),console[_0x4c4ad9(0x170)](_0x4c4ad9(0x140),_0x86abeb[_0x4c4ad9(0x176)]),console[_0x4c4ad9(0x170)](_0x4c4ad9(0x186),typeof _0x86abeb[_0x4c4ad9(0x176)]),console[_0x4c4ad9(0x170)](_0x4c4ad9(0x18d),Object[_0x4c4ad9(0x16d)](_0x86abeb['body']||{})),loggerService_1[_0x4c4ad9(0x15d)][_0x4c4ad9(0x180)](_0x4c4ad9(0x169),_0x86abeb['body'],_0x86abeb[_0x4c4ad9(0x16e)]);const _0x21cf17=await this[_0x4c4ad9(0x172)][_0x4c4ad9(0x15c)](_0x86abeb['body']);_0x37b68a[_0x4c4ad9(0x168)](0xc8)[_0x4c4ad9(0x158)]({'success':!![],'message':'AmPay\x20TRY\x20webhook\x20processed\x20successfully'});}catch(_0x3688bc){console[_0x4c4ad9(0x18b)](_0x4c4ad9(0x16b),_0x3688bc),loggerService_1[_0x4c4ad9(0x15d)][_0x4c4ad9(0x1a2)](_0x4c4ad9(0x169),_0x3688bc,_0x86abeb[_0x4c4ad9(0x176)]),_0x37b68a[_0x4c4ad9(0x168)](0xc8)[_0x4c4ad9(0x158)]({'success':![],'message':_0x3688bc instanceof Error?_0x3688bc[_0x4c4ad9(0x189)]:'AmPay\x20TRY\x20webhook\x20processing\x20failed'});}},this[_0x110399(0x174)]=async(_0x4c157d,_0xef342e,_0x164b18)=>{const _0x36d5e0=_0x110399;try{console[_0x36d5e0(0x170)]('===\x20MyXSpend\x20Webhook\x20Received\x20==='),console[_0x36d5e0(0x170)](_0x36d5e0(0x192),_0x4c157d['headers']),console[_0x36d5e0(0x170)](_0x36d5e0(0x1a6),_0x4c157d[_0x36d5e0(0x188)]),console['log'](_0x36d5e0(0x140),_0x4c157d[_0x36d5e0(0x176)]),console[_0x36d5e0(0x170)](_0x36d5e0(0x14a),_0x4c157d[_0x36d5e0(0x160)]),loggerService_1[_0x36d5e0(0x15d)][_0x36d5e0(0x180)](_0x36d5e0(0x1a5),_0x4c157d['body']||_0x4c157d[_0x36d5e0(0x188)],_0x4c157d[_0x36d5e0(0x16e)]);const _0x24de99=await this[_0x36d5e0(0x172)]['processMyXSpendWebhook'](_0x4c157d[_0x36d5e0(0x188)],_0x4c157d[_0x36d5e0(0x176)]);_0xef342e['status'](0xc8)[_0x36d5e0(0x158)]({'success':!![],'message':_0x36d5e0(0x154)});}catch(_0x4f1848){console[_0x36d5e0(0x18b)](_0x36d5e0(0x14d),_0x4f1848),loggerService_1['loggerService']['logWebhookError']('myxspend',_0x4f1848,_0x4c157d[_0x36d5e0(0x176)]||_0x4c157d[_0x36d5e0(0x188)]),_0xef342e['status'](0xc8)[_0x36d5e0(0x158)]({'success':![],'message':_0x4f1848 instanceof Error?_0x4f1848[_0x36d5e0(0x189)]:'MyXSpend\x20webhook\x20processing\x20failed'});}},this[_0x110399(0x172)]=new webhookService_1[(_0x110399(0x191))]();}}exports['WebhookController']=WebhookController;