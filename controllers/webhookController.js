'use strict';const a15_0x51374b=a15_0x4b94;(function(_0x28e3ec,_0x4e3a49){const _0xa219d3=a15_0x4b94,_0xe51eb9=_0x28e3ec();while(!![]){try{const _0x48ca67=parseInt(_0xa219d3(0x105))/0x1*(parseInt(_0xa219d3(0x10a))/0x2)+parseInt(_0xa219d3(0xfc))/0x3*(parseInt(_0xa219d3(0x10d))/0x4)+-parseInt(_0xa219d3(0xec))/0x5*(parseInt(_0xa219d3(0x109))/0x6)+parseInt(_0xa219d3(0x106))/0x7*(-parseInt(_0xa219d3(0x121))/0x8)+-parseInt(_0xa219d3(0xe5))/0x9*(parseInt(_0xa219d3(0x119))/0xa)+-parseInt(_0xa219d3(0xca))/0xb+parseInt(_0xa219d3(0xd6))/0xc;if(_0x48ca67===_0x4e3a49)break;else _0xe51eb9['push'](_0xe51eb9['shift']());}catch(_0x222698){_0xe51eb9['push'](_0xe51eb9['shift']());}}}(a15_0x2da7,0xcf7d3));Object['defineProperty'](exports,a15_0x51374b(0x101),{'value':!![]}),exports[a15_0x51374b(0x115)]=void 0x0;const webhookService_1=require('../services/webhookService'),loggerService_1=require(a15_0x51374b(0xf2));function a15_0x2da7(){const _0x539d45=['__esModule','KLYME\x20webhook\x20processed\x20successfully','handleMasterCardWebhook','Noda\x20webhook\x20processed\x20successfully','430778KPEQOv','11551673EfIaWh','CoinToPay2\x20webhook\x20processed\x20successfully','log','2175366mFTwvt','6gKsCwM','Received\x20VISA\x20webhook:','MasterCard\x20webhook\x20processing\x20error:','4ZsxCXW','processVisaWebhook','Body:','headers','Raw\x20body\x20type:','amer','handleAmerWebhook','Received\x20MasterCard\x20webhook:','WebhookController','plisio_gateway','MasterCard\x20webhook\x20processing\x20failed','status','2967190NyqzhX','processCoinToPayWebhook','Received\x20Amer\x20webhook:','handleAmPayWebhook','Content-Type','handleCoinToPayWebhook','Rapyd\x20webhook\x20processed\x20successfully','VISA\x20webhook\x20processing\x20error:','8dFFvTu','Body\x20content:','get','CoinToPay\x20webhook\x20processed\x20successfully','processPlisioWebhook','CoinToPay\x20webhook\x20processing\x20error:','Content-Type:','processPlisioGatewayWebhook','Rapyd\x20webhook\x20processing\x20error:','CoinToPay2\x20webhook\x20processing\x20error:','MasterCard\x20webhook\x20processed\x20successfully','AmPay\x20webhook\x20processing\x20failed','Noda\x20webhook\x20processing\x20failed','11607618AaZYEZ','handleCoinToPay2Webhook','loggerService','klyme','processNodaWebhook','cointopay2','===\x20PLISIO\x20WEBHOOK\x20RECEIVED\x20===','Gateway\x20webhook\x20processing\x20failed','processMasterCardWebhook','Body\x20type:','error','logWebhookReceived','26189844GswBIQ','Gateway\x20webhook\x20processing\x20error:','Amer\x20webhook\x20processed\x20successfully','handleRapydWebhook','Webhook\x20processing\x20error:','Amer\x20webhook\x20processing\x20error:','processCoinToPay2Webhook','Noda\x20webhook\x20processing\x20error:','rapyd','Received\x20CoinToPay2\x20webhook:','CoinToPay\x20webhook\x20processing\x20failed','VISA\x20webhook\x20processing\x20failed','WebhookService','===\x20PLISIO\x20GATEWAY\x20WEBHOOK\x20RECEIVED\x20===','AmPay\x20webhook\x20processed\x20successfully','9EfypzI','webhookService','Received\x20Rapyd\x20webhook:','logWebhookError','body','keys','cointopay','5BZvVnk','processRapydWebhook','VISA\x20webhook\x20processed\x20successfully','visa','plisio','mastercard','../services/loggerService','AmPay\x20webhook\x20processing\x20error:','handleNodaWebhook','message','Received\x20KLYME\x20webhook:','handlePlisioGatewayWebhook','json','handlePlisioWebhook','ampay','noda','2219433lNGuSG','Webhook\x20processing\x20failed','Received\x20Noda\x20webhook:','Body\x20keys:','Rapyd\x20webhook\x20processing\x20failed'];a15_0x2da7=function(){return _0x539d45;};return a15_0x2da7();}class WebhookController{constructor(){const _0x589c84=a15_0x51374b;this[_0x589c84(0xf9)]=async(_0x124093,_0x581e67,_0xd71db6)=>{const _0x5b6b48=_0x589c84;try{console['log'](_0x5b6b48(0xd0)),console[_0x5b6b48(0x108)](_0x5b6b48(0xc3),_0x124093['get']('Content-Type')),console['log'](_0x5b6b48(0x111),typeof _0x124093['body']),console[_0x5b6b48(0x108)]('Body\x20keys:',Object[_0x5b6b48(0xea)](_0x124093['body']||{})),console['log'](_0x5b6b48(0x122),_0x124093[_0x5b6b48(0xe9)]),loggerService_1[_0x5b6b48(0xcc)][_0x5b6b48(0xd5)](_0x5b6b48(0xf0),_0x124093[_0x5b6b48(0xe9)],_0x124093[_0x5b6b48(0x110)]);const _0x35ff43=await this['webhookService'][_0x5b6b48(0xc1)](_0x124093[_0x5b6b48(0xe9)]);_0x581e67['status'](0xc8)[_0x5b6b48(0xf8)]({'success':!![],'message':'Webhook\x20processed\x20successfully'});}catch(_0x1a888d){console[_0x5b6b48(0xd4)](_0x5b6b48(0xda),_0x1a888d),loggerService_1[_0x5b6b48(0xcc)][_0x5b6b48(0xe8)](_0x5b6b48(0xf0),_0x1a888d,_0x124093[_0x5b6b48(0xe9)]),_0x581e67[_0x5b6b48(0x118)](0xc8)['json']({'success':![],'message':_0x1a888d instanceof Error?_0x1a888d[_0x5b6b48(0xf5)]:_0x5b6b48(0xfd)});}},this[_0x589c84(0xf7)]=async(_0x4af3ed,_0x1df235,_0x40389c)=>{const _0x53eaba=_0x589c84;try{console[_0x53eaba(0x108)](_0x53eaba(0xe3)),console[_0x53eaba(0x108)]('Content-Type:',_0x4af3ed[_0x53eaba(0x123)](_0x53eaba(0x11d))),console[_0x53eaba(0x108)]('Raw\x20body\x20type:',typeof _0x4af3ed[_0x53eaba(0xe9)]),console[_0x53eaba(0x108)](_0x53eaba(0xff),Object['keys'](_0x4af3ed[_0x53eaba(0xe9)]||{})),console[_0x53eaba(0x108)](_0x53eaba(0x122),_0x4af3ed['body']),loggerService_1[_0x53eaba(0xcc)]['logWebhookReceived'](_0x53eaba(0x116),_0x4af3ed[_0x53eaba(0xe9)],_0x4af3ed[_0x53eaba(0x110)]);const _0x2a4ced=await this[_0x53eaba(0xe6)][_0x53eaba(0xc4)](_0x4af3ed[_0x53eaba(0xe9)]);_0x1df235['status'](0xc8)[_0x53eaba(0xf8)]({'success':!![],'message':'Gateway\x20webhook\x20processed\x20successfully'});}catch(_0x5ae720){console[_0x53eaba(0xd4)](_0x53eaba(0xd7),_0x5ae720),loggerService_1[_0x53eaba(0xcc)][_0x53eaba(0xe8)](_0x53eaba(0x116),_0x5ae720,_0x4af3ed[_0x53eaba(0xe9)]),_0x1df235[_0x53eaba(0x118)](0xc8)[_0x53eaba(0xf8)]({'success':![],'message':_0x5ae720 instanceof Error?_0x5ae720[_0x53eaba(0xf5)]:_0x53eaba(0xd1)});}},this[_0x589c84(0xd9)]=async(_0x4211c7,_0x8fa006,_0x19db3f)=>{const _0x5e2aa8=_0x589c84;try{console[_0x5e2aa8(0x108)](_0x5e2aa8(0xe7),_0x4211c7[_0x5e2aa8(0xe9)]),loggerService_1[_0x5e2aa8(0xcc)]['logWebhookReceived']('rapyd',_0x4211c7[_0x5e2aa8(0xe9)],_0x4211c7[_0x5e2aa8(0x110)]);const _0x3dc030=await this[_0x5e2aa8(0xe6)][_0x5e2aa8(0xed)](_0x4211c7[_0x5e2aa8(0xe9)]);_0x8fa006['status'](0xc8)['json']({'success':!![],'message':_0x5e2aa8(0x11f)});}catch(_0x504349){console[_0x5e2aa8(0xd4)](_0x5e2aa8(0xc5),_0x504349),loggerService_1[_0x5e2aa8(0xcc)][_0x5e2aa8(0xe8)](_0x5e2aa8(0xde),_0x504349,_0x4211c7[_0x5e2aa8(0xe9)]),_0x8fa006[_0x5e2aa8(0x118)](0xc8)[_0x5e2aa8(0xf8)]({'success':![],'message':_0x504349 instanceof Error?_0x504349[_0x5e2aa8(0xf5)]:_0x5e2aa8(0x100)});}},this[_0x589c84(0xf4)]=async(_0x10f45c,_0x313aab,_0x2e892f)=>{const _0x3eaee5=_0x589c84;try{console['log'](_0x3eaee5(0xfe),_0x10f45c[_0x3eaee5(0xe9)]),loggerService_1[_0x3eaee5(0xcc)][_0x3eaee5(0xd5)]('noda',_0x10f45c[_0x3eaee5(0xe9)],_0x10f45c[_0x3eaee5(0x110)]);const _0x4d802d=await this[_0x3eaee5(0xe6)][_0x3eaee5(0xce)](_0x10f45c[_0x3eaee5(0xe9)]);_0x313aab['status'](0xc8)[_0x3eaee5(0xf8)]({'success':!![],'message':_0x3eaee5(0x104)});}catch(_0x4699b6){console[_0x3eaee5(0xd4)](_0x3eaee5(0xdd),_0x4699b6),loggerService_1[_0x3eaee5(0xcc)][_0x3eaee5(0xe8)](_0x3eaee5(0xfb),_0x4699b6,_0x10f45c[_0x3eaee5(0xe9)]),_0x313aab[_0x3eaee5(0x118)](0xc8)[_0x3eaee5(0xf8)]({'success':![],'message':_0x4699b6 instanceof Error?_0x4699b6[_0x3eaee5(0xf5)]:_0x3eaee5(0xc9)});}},this[_0x589c84(0x11e)]=async(_0x11ba16,_0x3cfb39,_0x426cb8)=>{const _0x5ef6f7=_0x589c84;try{console['log']('Received\x20CoinToPay\x20webhook:',_0x11ba16[_0x5ef6f7(0xe9)]),loggerService_1['loggerService']['logWebhookReceived'](_0x5ef6f7(0xeb),_0x11ba16[_0x5ef6f7(0xe9)],_0x11ba16[_0x5ef6f7(0x110)]);const _0x5ac548=await this['webhookService'][_0x5ef6f7(0x11a)](_0x11ba16[_0x5ef6f7(0xe9)]);_0x3cfb39['status'](0xc8)[_0x5ef6f7(0xf8)]({'success':!![],'message':_0x5ef6f7(0x124)});}catch(_0x44ff80){console[_0x5ef6f7(0xd4)](_0x5ef6f7(0xc2),_0x44ff80),loggerService_1[_0x5ef6f7(0xcc)][_0x5ef6f7(0xe8)](_0x5ef6f7(0xeb),_0x44ff80,_0x11ba16[_0x5ef6f7(0xe9)]),_0x3cfb39[_0x5ef6f7(0x118)](0xc8)['json']({'success':![],'message':_0x44ff80 instanceof Error?_0x44ff80[_0x5ef6f7(0xf5)]:_0x5ef6f7(0xe0)});}},this[_0x589c84(0xcb)]=async(_0x1cc8f4,_0x3b6f5d,_0x229d09)=>{const _0x4e3551=_0x589c84;try{console[_0x4e3551(0x108)](_0x4e3551(0xdf),_0x1cc8f4[_0x4e3551(0xe9)]),loggerService_1[_0x4e3551(0xcc)]['logWebhookReceived']('cointopay2',_0x1cc8f4[_0x4e3551(0xe9)],_0x1cc8f4[_0x4e3551(0x110)]);const _0x376825=await this[_0x4e3551(0xe6)][_0x4e3551(0xdc)](_0x1cc8f4[_0x4e3551(0xe9)]);_0x3b6f5d['status'](0xc8)[_0x4e3551(0xf8)]({'success':!![],'message':_0x4e3551(0x107)});}catch(_0x490f71){console[_0x4e3551(0xd4)](_0x4e3551(0xc6),_0x490f71),loggerService_1[_0x4e3551(0xcc)][_0x4e3551(0xe8)](_0x4e3551(0xcf),_0x490f71,_0x1cc8f4[_0x4e3551(0xe9)]),_0x3b6f5d[_0x4e3551(0x118)](0xc8)['json']({'success':![],'message':_0x490f71 instanceof Error?_0x490f71[_0x4e3551(0xf5)]:'CoinToPay2\x20webhook\x20processing\x20failed'});}},this['handleKlymeWebhook']=async(_0x3b9979,_0x14d7e4,_0x475f9c)=>{const _0x11ca75=_0x589c84;try{console[_0x11ca75(0x108)](_0x11ca75(0xf6),_0x3b9979['body']),loggerService_1['loggerService'][_0x11ca75(0xd5)]('klyme',_0x3b9979[_0x11ca75(0xe9)],_0x3b9979[_0x11ca75(0x110)]);const _0x40666d=await this[_0x11ca75(0xe6)]['processKlymeWebhook'](_0x3b9979[_0x11ca75(0xe9)]);_0x14d7e4['status'](0xc8)[_0x11ca75(0xf8)]({'success':!![],'message':_0x11ca75(0x102)});}catch(_0x2fdcaf){console[_0x11ca75(0xd4)]('KLYME\x20webhook\x20processing\x20error:',_0x2fdcaf),loggerService_1[_0x11ca75(0xcc)]['logWebhookError'](_0x11ca75(0xcd),_0x2fdcaf,_0x3b9979[_0x11ca75(0xe9)]),_0x14d7e4[_0x11ca75(0x118)](0xc8)['json']({'success':![],'message':_0x2fdcaf instanceof Error?_0x2fdcaf[_0x11ca75(0xf5)]:'KLYME\x20webhook\x20processing\x20failed'});}},this['handleVisaWebhook']=async(_0x1994ca,_0x12d6d8,_0x42ab01)=>{const _0x481ed5=_0x589c84;try{console[_0x481ed5(0x108)](_0x481ed5(0x10b),_0x1994ca[_0x481ed5(0xe9)]),loggerService_1[_0x481ed5(0xcc)][_0x481ed5(0xd5)](_0x481ed5(0xef),_0x1994ca['body'],_0x1994ca[_0x481ed5(0x110)]);const _0xd34be9=await this[_0x481ed5(0xe6)][_0x481ed5(0x10e)](_0x1994ca[_0x481ed5(0xe9)]);_0x12d6d8[_0x481ed5(0x118)](0xc8)[_0x481ed5(0xf8)]({'success':!![],'message':_0x481ed5(0xee)});}catch(_0xabb4d2){console[_0x481ed5(0xd4)](_0x481ed5(0x120),_0xabb4d2),loggerService_1['loggerService'][_0x481ed5(0xe8)](_0x481ed5(0xef),_0xabb4d2,_0x1994ca['body']),_0x12d6d8[_0x481ed5(0x118)](0xc8)[_0x481ed5(0xf8)]({'success':![],'message':_0xabb4d2 instanceof Error?_0xabb4d2[_0x481ed5(0xf5)]:_0x481ed5(0xe1)});}},this[_0x589c84(0x103)]=async(_0x5f5dbe,_0x3406e7,_0x3e7daa)=>{const _0x37d625=_0x589c84;try{console[_0x37d625(0x108)](_0x37d625(0x114),_0x5f5dbe[_0x37d625(0xe9)]),loggerService_1[_0x37d625(0xcc)][_0x37d625(0xd5)]('mastercard',_0x5f5dbe[_0x37d625(0xe9)],_0x5f5dbe['headers']);const _0x153c23=await this[_0x37d625(0xe6)][_0x37d625(0xd2)](_0x5f5dbe[_0x37d625(0xe9)]);_0x3406e7[_0x37d625(0x118)](0xc8)[_0x37d625(0xf8)]({'success':!![],'message':_0x37d625(0xc7)});}catch(_0x44cdca){console[_0x37d625(0xd4)](_0x37d625(0x10c),_0x44cdca),loggerService_1[_0x37d625(0xcc)][_0x37d625(0xe8)](_0x37d625(0xf1),_0x44cdca,_0x5f5dbe[_0x37d625(0xe9)]),_0x3406e7['status'](0xc8)[_0x37d625(0xf8)]({'success':![],'message':_0x44cdca instanceof Error?_0x44cdca[_0x37d625(0xf5)]:_0x37d625(0x117)});}},this[_0x589c84(0x113)]=async(_0x2d4b1e,_0x5dda38,_0x3eb36f)=>{const _0x4a5add=_0x589c84;try{console[_0x4a5add(0x108)](_0x4a5add(0x11b),_0x2d4b1e[_0x4a5add(0xe9)]),loggerService_1[_0x4a5add(0xcc)][_0x4a5add(0xd5)]('amer',_0x2d4b1e[_0x4a5add(0xe9)],_0x2d4b1e['headers']);const _0x1f3c6b=await this[_0x4a5add(0xe6)]['processAmerWebhook'](_0x2d4b1e[_0x4a5add(0xe9)]);_0x5dda38[_0x4a5add(0x118)](0xc8)[_0x4a5add(0xf8)]({'success':!![],'message':_0x4a5add(0xd8)});}catch(_0x5e93af){console['error'](_0x4a5add(0xdb),_0x5e93af),loggerService_1[_0x4a5add(0xcc)][_0x4a5add(0xe8)](_0x4a5add(0x112),_0x5e93af,_0x2d4b1e[_0x4a5add(0xe9)]),_0x5dda38['status'](0xc8)[_0x4a5add(0xf8)]({'success':![],'message':_0x5e93af instanceof Error?_0x5e93af[_0x4a5add(0xf5)]:'Amer\x20webhook\x20processing\x20failed'});}},this[_0x589c84(0x11c)]=async(_0x3ad24b,_0xd518ab,_0xa70c7e)=>{const _0x44db77=_0x589c84;try{console[_0x44db77(0x108)]('===\x20AmPay\x20Webhook\x20Received\x20==='),console[_0x44db77(0x108)]('Headers:',_0x3ad24b[_0x44db77(0x110)]),console[_0x44db77(0x108)](_0x44db77(0x10f),_0x3ad24b[_0x44db77(0xe9)]),console[_0x44db77(0x108)](_0x44db77(0xd3),typeof _0x3ad24b[_0x44db77(0xe9)]),console['log'](_0x44db77(0xff),Object[_0x44db77(0xea)](_0x3ad24b[_0x44db77(0xe9)]||{})),loggerService_1[_0x44db77(0xcc)][_0x44db77(0xd5)](_0x44db77(0xfa),_0x3ad24b[_0x44db77(0xe9)],_0x3ad24b[_0x44db77(0x110)]);const _0x379677=await this['webhookService']['processAmPayWebhook'](_0x3ad24b[_0x44db77(0xe9)]);_0xd518ab[_0x44db77(0x118)](0xc8)[_0x44db77(0xf8)]({'success':!![],'message':_0x44db77(0xe4)});}catch(_0x1a0967){console[_0x44db77(0xd4)](_0x44db77(0xf3),_0x1a0967),loggerService_1['loggerService']['logWebhookError']('ampay',_0x1a0967,_0x3ad24b[_0x44db77(0xe9)]),_0xd518ab['status'](0xc8)['json']({'success':![],'message':_0x1a0967 instanceof Error?_0x1a0967[_0x44db77(0xf5)]:_0x44db77(0xc8)});}},this[_0x589c84(0xe6)]=new webhookService_1[(_0x589c84(0xe2))]();}}function a15_0x4b94(_0x3014bb,_0x527def){const _0x2da7ed=a15_0x2da7();return a15_0x4b94=function(_0x4b94d4,_0x360f2b){_0x4b94d4=_0x4b94d4-0xc1;let _0x1b83f0=_0x2da7ed[_0x4b94d4];return _0x1b83f0;},a15_0x4b94(_0x3014bb,_0x527def);}exports[a15_0x51374b(0x115)]=WebhookController;