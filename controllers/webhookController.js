'use strict';const a15_0x413167=a15_0x5649;function a15_0x2db4(){const _0x44bb4a=['Body\x20keys:','WebhookService','noda','===\x20PLISIO\x20WEBHOOK\x20RECEIVED\x20===','klyme','logWebhookReceived','cointopay','===\x20PLISIO\x20GATEWAY\x20WEBHOOK\x20RECEIVED\x20===','Webhook\x20processed\x20successfully','Rapyd\x20webhook\x20processed\x20successfully','169836dOWSFM','CoinToPay2\x20webhook\x20processing\x20error:','774JHVvgd','Raw\x20body\x20type:','body','670zyWYiJ','Rapyd\x20webhook\x20processing\x20error:','Body\x20content:','2259336OTZXdC','Gateway\x20webhook\x20processed\x20successfully','status','Gateway\x20webhook\x20processing\x20failed','174302jrRJOV','webhookService','Noda\x20webhook\x20processing\x20failed','MasterCard\x20webhook\x20processed\x20successfully','Received\x20CoinToPay\x20webhook:','processKlymeWebhook','12MkKkmN','4016unmjYp','Rapyd\x20webhook\x20processing\x20failed','Received\x20KLYME\x20webhook:','log','Received\x20MasterCard\x20webhook:','Content-Type','Noda\x20webhook\x20processed\x20successfully','KLYME\x20webhook\x20processing\x20failed','rapyd','processRapydWebhook','4zcnYis','message','processPlisioWebhook','defineProperty','1407315AsBurM','processCoinToPayWebhook','headers','42bqVdGN','handleNodaWebhook','CoinToPay2\x20webhook\x20processed\x20successfully','WebhookController','plisio_gateway','plisio','Content-Type:','6822Vlzfwg','get','keys','processPlisioGatewayWebhook','cointopay2','Noda\x20webhook\x20processing\x20error:','mastercard','handleCoinToPay2Webhook','MasterCard\x20webhook\x20processing\x20failed','5876761muqUxe','loggerService','Gateway\x20webhook\x20processing\x20error:','processMasterCardWebhook','Received\x20CoinToPay2\x20webhook:','logWebhookError','processCoinToPay2Webhook','error','Received\x20Noda\x20webhook:','__esModule','handlePlisioGatewayWebhook','json'];a15_0x2db4=function(){return _0x44bb4a;};return a15_0x2db4();}function a15_0x5649(_0x313ed8,_0x5711e9){const _0x2db4b6=a15_0x2db4();return a15_0x5649=function(_0x56499f,_0x38210b){_0x56499f=_0x56499f-0x6c;let _0x1d0eeb=_0x2db4b6[_0x56499f];return _0x1d0eeb;},a15_0x5649(_0x313ed8,_0x5711e9);}(function(_0x5647c1,_0x485529){const _0x2645fc=a15_0x5649,_0x5c339d=_0x5647c1();while(!![]){try{const _0x509ef4=-parseInt(_0x2645fc(0x77))/0x1+parseInt(_0x2645fc(0x7e))/0x2*(-parseInt(_0x2645fc(0x6d))/0x3)+parseInt(_0x2645fc(0x88))/0x4*(parseInt(_0x2645fc(0x8c))/0x5)+parseInt(_0x2645fc(0xb5))/0x6*(-parseInt(_0x2645fc(0x8f))/0x7)+parseInt(_0x2645fc(0x73))/0x8+parseInt(_0x2645fc(0x96))/0x9*(parseInt(_0x2645fc(0x70))/0xa)+parseInt(_0x2645fc(0x9f))/0xb*(parseInt(_0x2645fc(0x7d))/0xc);if(_0x509ef4===_0x485529)break;else _0x5c339d['push'](_0x5c339d['shift']());}catch(_0x392b9c){_0x5c339d['push'](_0x5c339d['shift']());}}}(a15_0x2db4,0x45ffb));Object[a15_0x413167(0x8b)](exports,a15_0x413167(0xa8),{'value':!![]}),exports[a15_0x413167(0x92)]=void 0x0;const webhookService_1=require('../services/webhookService'),loggerService_1=require('../services/loggerService');class WebhookController{constructor(){const _0x4bc9a9=a15_0x413167;this['handlePlisioWebhook']=async(_0x190916,_0x4515a1,_0xde4bee)=>{const _0x203f48=a15_0x5649;try{console[_0x203f48(0x81)](_0x203f48(0xae)),console[_0x203f48(0x81)](_0x203f48(0x95),_0x190916[_0x203f48(0x97)]('Content-Type')),console['log'](_0x203f48(0x6e),typeof _0x190916[_0x203f48(0x6f)]),console[_0x203f48(0x81)](_0x203f48(0xab),Object['keys'](_0x190916[_0x203f48(0x6f)]||{})),console[_0x203f48(0x81)](_0x203f48(0x72),_0x190916['body']),loggerService_1[_0x203f48(0xa0)][_0x203f48(0xb0)]('plisio',_0x190916[_0x203f48(0x6f)],_0x190916[_0x203f48(0x8e)]);const _0x69c8d3=await this[_0x203f48(0x78)][_0x203f48(0x8a)](_0x190916[_0x203f48(0x6f)]);_0x4515a1[_0x203f48(0x75)](0xc8)[_0x203f48(0xaa)]({'success':!![],'message':_0x203f48(0xb3)});}catch(_0x1d38c1){console[_0x203f48(0xa6)]('Webhook\x20processing\x20error:',_0x1d38c1),loggerService_1[_0x203f48(0xa0)]['logWebhookError'](_0x203f48(0x94),_0x1d38c1,_0x190916[_0x203f48(0x6f)]),_0x4515a1['status'](0xc8)[_0x203f48(0xaa)]({'success':![],'message':_0x1d38c1 instanceof Error?_0x1d38c1[_0x203f48(0x89)]:'Webhook\x20processing\x20failed'});}},this[_0x4bc9a9(0xa9)]=async(_0x107b29,_0x50910c,_0xbead9a)=>{const _0xeebe46=_0x4bc9a9;try{console[_0xeebe46(0x81)](_0xeebe46(0xb2)),console[_0xeebe46(0x81)](_0xeebe46(0x95),_0x107b29[_0xeebe46(0x97)](_0xeebe46(0x83))),console[_0xeebe46(0x81)](_0xeebe46(0x6e),typeof _0x107b29[_0xeebe46(0x6f)]),console[_0xeebe46(0x81)]('Body\x20keys:',Object[_0xeebe46(0x98)](_0x107b29['body']||{})),console[_0xeebe46(0x81)](_0xeebe46(0x72),_0x107b29[_0xeebe46(0x6f)]),loggerService_1[_0xeebe46(0xa0)][_0xeebe46(0xb0)](_0xeebe46(0x93),_0x107b29[_0xeebe46(0x6f)],_0x107b29['headers']);const _0x193c7a=await this['webhookService'][_0xeebe46(0x99)](_0x107b29[_0xeebe46(0x6f)]);_0x50910c['status'](0xc8)[_0xeebe46(0xaa)]({'success':!![],'message':_0xeebe46(0x74)});}catch(_0x5ab68c){console['error'](_0xeebe46(0xa1),_0x5ab68c),loggerService_1[_0xeebe46(0xa0)][_0xeebe46(0xa4)]('plisio_gateway',_0x5ab68c,_0x107b29[_0xeebe46(0x6f)]),_0x50910c[_0xeebe46(0x75)](0xc8)[_0xeebe46(0xaa)]({'success':![],'message':_0x5ab68c instanceof Error?_0x5ab68c[_0xeebe46(0x89)]:_0xeebe46(0x76)});}},this['handleRapydWebhook']=async(_0x5152da,_0x2213ca,_0x11a88b)=>{const _0xf17ccb=_0x4bc9a9;try{console[_0xf17ccb(0x81)]('Received\x20Rapyd\x20webhook:',_0x5152da['body']),loggerService_1['loggerService'][_0xf17ccb(0xb0)](_0xf17ccb(0x86),_0x5152da['body'],_0x5152da[_0xf17ccb(0x8e)]);const _0x40b0f8=await this[_0xf17ccb(0x78)][_0xf17ccb(0x87)](_0x5152da[_0xf17ccb(0x6f)]);_0x2213ca[_0xf17ccb(0x75)](0xc8)[_0xf17ccb(0xaa)]({'success':!![],'message':_0xf17ccb(0xb4)});}catch(_0x2a0935){console['error'](_0xf17ccb(0x71),_0x2a0935),loggerService_1[_0xf17ccb(0xa0)]['logWebhookError'](_0xf17ccb(0x86),_0x2a0935,_0x5152da[_0xf17ccb(0x6f)]),_0x2213ca[_0xf17ccb(0x75)](0xc8)['json']({'success':![],'message':_0x2a0935 instanceof Error?_0x2a0935[_0xf17ccb(0x89)]:_0xf17ccb(0x7f)});}},this[_0x4bc9a9(0x90)]=async(_0x195277,_0x2afb2a,_0x3d1eac)=>{const _0x25e86c=_0x4bc9a9;try{console['log'](_0x25e86c(0xa7),_0x195277[_0x25e86c(0x6f)]),loggerService_1[_0x25e86c(0xa0)]['logWebhookReceived'](_0x25e86c(0xad),_0x195277['body'],_0x195277[_0x25e86c(0x8e)]);const _0xf67887=await this[_0x25e86c(0x78)]['processNodaWebhook'](_0x195277[_0x25e86c(0x6f)]);_0x2afb2a[_0x25e86c(0x75)](0xc8)[_0x25e86c(0xaa)]({'success':!![],'message':_0x25e86c(0x84)});}catch(_0x3d747c){console[_0x25e86c(0xa6)](_0x25e86c(0x9b),_0x3d747c),loggerService_1[_0x25e86c(0xa0)][_0x25e86c(0xa4)]('noda',_0x3d747c,_0x195277['body']),_0x2afb2a[_0x25e86c(0x75)](0xc8)[_0x25e86c(0xaa)]({'success':![],'message':_0x3d747c instanceof Error?_0x3d747c[_0x25e86c(0x89)]:_0x25e86c(0x79)});}},this['handleCoinToPayWebhook']=async(_0x115f4e,_0x1a8da1,_0x15bea6)=>{const _0x14acda=_0x4bc9a9;try{console['log'](_0x14acda(0x7b),_0x115f4e[_0x14acda(0x6f)]),loggerService_1[_0x14acda(0xa0)][_0x14acda(0xb0)](_0x14acda(0xb1),_0x115f4e[_0x14acda(0x6f)],_0x115f4e['headers']);const _0x52359f=await this['webhookService'][_0x14acda(0x8d)](_0x115f4e['body']);_0x1a8da1[_0x14acda(0x75)](0xc8)['json']({'success':!![],'message':'CoinToPay\x20webhook\x20processed\x20successfully'});}catch(_0x58588a){console['error']('CoinToPay\x20webhook\x20processing\x20error:',_0x58588a),loggerService_1['loggerService'][_0x14acda(0xa4)](_0x14acda(0xb1),_0x58588a,_0x115f4e[_0x14acda(0x6f)]),_0x1a8da1[_0x14acda(0x75)](0xc8)[_0x14acda(0xaa)]({'success':![],'message':_0x58588a instanceof Error?_0x58588a['message']:'CoinToPay\x20webhook\x20processing\x20failed'});}},this[_0x4bc9a9(0x9d)]=async(_0xd0c66,_0x826b1,_0x7d8649)=>{const _0x5930e0=_0x4bc9a9;try{console['log'](_0x5930e0(0xa3),_0xd0c66[_0x5930e0(0x6f)]),loggerService_1[_0x5930e0(0xa0)][_0x5930e0(0xb0)](_0x5930e0(0x9a),_0xd0c66[_0x5930e0(0x6f)],_0xd0c66['headers']);const _0x469267=await this[_0x5930e0(0x78)][_0x5930e0(0xa5)](_0xd0c66[_0x5930e0(0x6f)]);_0x826b1[_0x5930e0(0x75)](0xc8)['json']({'success':!![],'message':_0x5930e0(0x91)});}catch(_0x19cf65){console[_0x5930e0(0xa6)](_0x5930e0(0x6c),_0x19cf65),loggerService_1['loggerService']['logWebhookError'](_0x5930e0(0x9a),_0x19cf65,_0xd0c66[_0x5930e0(0x6f)]),_0x826b1[_0x5930e0(0x75)](0xc8)[_0x5930e0(0xaa)]({'success':![],'message':_0x19cf65 instanceof Error?_0x19cf65[_0x5930e0(0x89)]:'CoinToPay2\x20webhook\x20processing\x20failed'});}},this['handleKlymeWebhook']=async(_0x17ca81,_0x222954,_0x419a8a)=>{const _0x1b3baa=_0x4bc9a9;try{console[_0x1b3baa(0x81)](_0x1b3baa(0x80),_0x17ca81[_0x1b3baa(0x6f)]),loggerService_1['loggerService'][_0x1b3baa(0xb0)](_0x1b3baa(0xaf),_0x17ca81['body'],_0x17ca81[_0x1b3baa(0x8e)]);const _0x34a081=await this[_0x1b3baa(0x78)][_0x1b3baa(0x7c)](_0x17ca81[_0x1b3baa(0x6f)]);_0x222954['status'](0xc8)['json']({'success':!![],'message':'KLYME\x20webhook\x20processed\x20successfully'});}catch(_0x205be8){console[_0x1b3baa(0xa6)]('KLYME\x20webhook\x20processing\x20error:',_0x205be8),loggerService_1[_0x1b3baa(0xa0)][_0x1b3baa(0xa4)](_0x1b3baa(0xaf),_0x205be8,_0x17ca81[_0x1b3baa(0x6f)]),_0x222954[_0x1b3baa(0x75)](0xc8)[_0x1b3baa(0xaa)]({'success':![],'message':_0x205be8 instanceof Error?_0x205be8[_0x1b3baa(0x89)]:_0x1b3baa(0x85)});}},this['handleMasterCardWebhook']=async(_0xdf35d6,_0x578eb8,_0x16bd87)=>{const _0x62c2dd=_0x4bc9a9;try{console[_0x62c2dd(0x81)](_0x62c2dd(0x82),_0xdf35d6[_0x62c2dd(0x6f)]),loggerService_1[_0x62c2dd(0xa0)]['logWebhookReceived'](_0x62c2dd(0x9c),_0xdf35d6[_0x62c2dd(0x6f)],_0xdf35d6['headers']);const _0x471f64=await this[_0x62c2dd(0x78)][_0x62c2dd(0xa2)](_0xdf35d6[_0x62c2dd(0x6f)]);_0x578eb8[_0x62c2dd(0x75)](0xc8)[_0x62c2dd(0xaa)]({'success':!![],'message':_0x62c2dd(0x7a)});}catch(_0x5c0595){console[_0x62c2dd(0xa6)]('MasterCard\x20webhook\x20processing\x20error:',_0x5c0595),loggerService_1[_0x62c2dd(0xa0)][_0x62c2dd(0xa4)]('mastercard',_0x5c0595,_0xdf35d6['body']),_0x578eb8[_0x62c2dd(0x75)](0xc8)['json']({'success':![],'message':_0x5c0595 instanceof Error?_0x5c0595[_0x62c2dd(0x89)]:_0x62c2dd(0x9e)});}},this[_0x4bc9a9(0x78)]=new webhookService_1[(_0x4bc9a9(0xac))]();}}exports[a15_0x413167(0x92)]=WebhookController;