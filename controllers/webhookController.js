'use strict';const a17_0x595307=a17_0x5d5f;(function(_0x27df97,_0x6401f0){const _0x402b59=a17_0x5d5f,_0x3cab4a=_0x27df97();while(!![]){try{const _0x193030=parseInt(_0x402b59(0x125))/0x1*(parseInt(_0x402b59(0xed))/0x2)+parseInt(_0x402b59(0xee))/0x3+-parseInt(_0x402b59(0x130))/0x4+-parseInt(_0x402b59(0x124))/0x5+-parseInt(_0x402b59(0x115))/0x6+parseInt(_0x402b59(0xda))/0x7*(parseInt(_0x402b59(0x105))/0x8)+parseInt(_0x402b59(0x137))/0x9*(parseInt(_0x402b59(0x11a))/0xa);if(_0x193030===_0x6401f0)break;else _0x3cab4a['push'](_0x3cab4a['shift']());}catch(_0x3e4f39){_0x3cab4a['push'](_0x3cab4a['shift']());}}}(a17_0x1241,0xb832d));Object['defineProperty'](exports,a17_0x595307(0x129),{'value':!![]}),exports[a17_0x595307(0x102)]=void 0x0;const webhookService_1=require(a17_0x595307(0xd7)),loggerService_1=require('../services/loggerService');function a17_0x5d5f(_0x42ebef,_0x30cdeb){const _0x1241ee=a17_0x1241();return a17_0x5d5f=function(_0x5d5f7b,_0x7b479){_0x5d5f7b=_0x5d5f7b-0xd7;let _0xc598d0=_0x1241ee[_0x5d5f7b];return _0xc598d0;},a17_0x5d5f(_0x42ebef,_0x30cdeb);}class WebhookController{constructor(){const _0xf5d1a9=a17_0x595307;this[_0xf5d1a9(0xf6)]=async(_0x4f8fe7,_0x3610fc,_0x11f7fd)=>{const _0x68ac99=_0xf5d1a9;try{console[_0x68ac99(0x107)](_0x68ac99(0xd9)),console[_0x68ac99(0x107)](_0x68ac99(0x13b),_0x4f8fe7[_0x68ac99(0x13f)]('Content-Type')),console['log'](_0x68ac99(0x135),typeof _0x4f8fe7[_0x68ac99(0x142)]),console['log']('Body\x20keys:',Object[_0x68ac99(0x139)](_0x4f8fe7[_0x68ac99(0x142)]||{})),console['log'](_0x68ac99(0xf2),_0x4f8fe7[_0x68ac99(0x142)]),loggerService_1[_0x68ac99(0xfb)]['logWebhookReceived'](_0x68ac99(0xdb),_0x4f8fe7[_0x68ac99(0x142)],_0x4f8fe7['headers']);const _0x49d7fa=await this['webhookService'][_0x68ac99(0x143)](_0x4f8fe7['body']);_0x3610fc[_0x68ac99(0xeb)](0xc8)['json']({'success':!![],'message':_0x68ac99(0xdc)});}catch(_0x212679){console[_0x68ac99(0x138)](_0x68ac99(0xde),_0x212679),loggerService_1[_0x68ac99(0xfb)][_0x68ac99(0xdd)]('plisio',_0x212679,_0x4f8fe7[_0x68ac99(0x142)]),_0x3610fc[_0x68ac99(0xeb)](0xc8)['json']({'success':![],'message':_0x212679 instanceof Error?_0x212679['message']:_0x68ac99(0x13c)});}},this[_0xf5d1a9(0x140)]=async(_0xc13f83,_0x4df361,_0x2954a6)=>{const _0x496a12=_0xf5d1a9;try{console['log'](_0x496a12(0xea)),console[_0x496a12(0x107)](_0x496a12(0x13b),_0xc13f83['get']('Content-Type')),console[_0x496a12(0x107)](_0x496a12(0x135),typeof _0xc13f83[_0x496a12(0x142)]),console[_0x496a12(0x107)]('Body\x20keys:',Object['keys'](_0xc13f83['body']||{})),console[_0x496a12(0x107)]('Body\x20content:',_0xc13f83['body']),loggerService_1[_0x496a12(0xfb)][_0x496a12(0x12f)](_0x496a12(0xf9),_0xc13f83[_0x496a12(0x142)],_0xc13f83[_0x496a12(0x103)]);const _0x2f4410=await this['webhookService'][_0x496a12(0x13e)](_0xc13f83[_0x496a12(0x142)]);_0x4df361[_0x496a12(0xeb)](0xc8)[_0x496a12(0x110)]({'success':!![],'message':_0x496a12(0x12e)});}catch(_0x456c3e){console[_0x496a12(0x138)](_0x496a12(0x128),_0x456c3e),loggerService_1['loggerService'][_0x496a12(0xdd)](_0x496a12(0xf9),_0x456c3e,_0xc13f83[_0x496a12(0x142)]),_0x4df361[_0x496a12(0xeb)](0xc8)[_0x496a12(0x110)]({'success':![],'message':_0x456c3e instanceof Error?_0x456c3e[_0x496a12(0xec)]:_0x496a12(0xfd)});}},this[_0xf5d1a9(0x101)]=async(_0x207206,_0x552828,_0x1dd41a)=>{const _0x366601=_0xf5d1a9;try{console[_0x366601(0x107)]('Received\x20Rapyd\x20webhook:',_0x207206['body']),loggerService_1[_0x366601(0xfb)][_0x366601(0x12f)](_0x366601(0x145),_0x207206[_0x366601(0x142)],_0x207206[_0x366601(0x103)]);const _0x480b07=await this[_0x366601(0x11b)]['processRapydWebhook'](_0x207206[_0x366601(0x142)]);_0x552828[_0x366601(0xeb)](0xc8)[_0x366601(0x110)]({'success':!![],'message':_0x366601(0xf1)});}catch(_0x26fdc3){console[_0x366601(0x138)](_0x366601(0x11d),_0x26fdc3),loggerService_1[_0x366601(0xfb)][_0x366601(0xdd)]('rapyd',_0x26fdc3,_0x207206[_0x366601(0x142)]),_0x552828[_0x366601(0xeb)](0xc8)[_0x366601(0x110)]({'success':![],'message':_0x26fdc3 instanceof Error?_0x26fdc3['message']:'Rapyd\x20webhook\x20processing\x20failed'});}},this[_0xf5d1a9(0x126)]=async(_0x420b5b,_0x43aabd,_0x5b9645)=>{const _0x4320b6=_0xf5d1a9;try{console['log']('Received\x20Noda\x20webhook:',_0x420b5b[_0x4320b6(0x142)]),loggerService_1[_0x4320b6(0xfb)][_0x4320b6(0x12f)](_0x4320b6(0x121),_0x420b5b[_0x4320b6(0x142)],_0x420b5b[_0x4320b6(0x103)]);const _0x430197=await this[_0x4320b6(0x11b)][_0x4320b6(0x12a)](_0x420b5b[_0x4320b6(0x142)]);_0x43aabd[_0x4320b6(0xeb)](0xc8)[_0x4320b6(0x110)]({'success':!![],'message':_0x4320b6(0x134)});}catch(_0x1a96b5){console[_0x4320b6(0x138)]('Noda\x20webhook\x20processing\x20error:',_0x1a96b5),loggerService_1[_0x4320b6(0xfb)]['logWebhookError']('noda',_0x1a96b5,_0x420b5b[_0x4320b6(0x142)]),_0x43aabd[_0x4320b6(0xeb)](0xc8)[_0x4320b6(0x110)]({'success':![],'message':_0x1a96b5 instanceof Error?_0x1a96b5[_0x4320b6(0xec)]:_0x4320b6(0x104)});}},this[_0xf5d1a9(0xf4)]=async(_0x50f3b0,_0x2cf5ed,_0x330913)=>{const _0x17e54c=_0xf5d1a9;try{console[_0x17e54c(0x107)](_0x17e54c(0x132),_0x50f3b0[_0x17e54c(0x142)]),loggerService_1[_0x17e54c(0xfb)][_0x17e54c(0x12f)](_0x17e54c(0xff),_0x50f3b0[_0x17e54c(0x142)],_0x50f3b0[_0x17e54c(0x103)]);const _0x353e03=await this['webhookService'][_0x17e54c(0x13a)](_0x50f3b0['body']);_0x2cf5ed['status'](0xc8)[_0x17e54c(0x110)]({'success':!![],'message':_0x17e54c(0x106)});}catch(_0x20573a){console[_0x17e54c(0x138)](_0x17e54c(0xe2),_0x20573a),loggerService_1[_0x17e54c(0xfb)]['logWebhookError'](_0x17e54c(0xff),_0x20573a,_0x50f3b0['body']),_0x2cf5ed[_0x17e54c(0xeb)](0xc8)['json']({'success':![],'message':_0x20573a instanceof Error?_0x20573a[_0x17e54c(0xec)]:_0x17e54c(0xdf)});}},this['handleCoinToPay2Webhook']=async(_0x16885a,_0x4ab1a1,_0x1ddc17)=>{const _0x27d2d2=_0xf5d1a9;try{console[_0x27d2d2(0x107)](_0x27d2d2(0x144),_0x16885a['body']),loggerService_1[_0x27d2d2(0xfb)][_0x27d2d2(0x12f)](_0x27d2d2(0xef),_0x16885a[_0x27d2d2(0x142)],_0x16885a[_0x27d2d2(0x103)]);const _0x3cebae=await this['webhookService'][_0x27d2d2(0x147)](_0x16885a[_0x27d2d2(0x142)]);_0x4ab1a1['status'](0xc8)[_0x27d2d2(0x110)]({'success':!![],'message':_0x27d2d2(0x10e)});}catch(_0x24c4eb){console['error'](_0x27d2d2(0x10d),_0x24c4eb),loggerService_1[_0x27d2d2(0xfb)][_0x27d2d2(0xdd)](_0x27d2d2(0xef),_0x24c4eb,_0x16885a[_0x27d2d2(0x142)]),_0x4ab1a1['status'](0xc8)[_0x27d2d2(0x110)]({'success':![],'message':_0x24c4eb instanceof Error?_0x24c4eb[_0x27d2d2(0xec)]:_0x27d2d2(0xe5)});}},this[_0xf5d1a9(0xe6)]=async(_0x47e948,_0x10ab14,_0x186b46)=>{const _0x152697=_0xf5d1a9;try{console[_0x152697(0x107)]('Received\x20KLYME\x20webhook:',_0x47e948[_0x152697(0x142)]),loggerService_1[_0x152697(0xfb)][_0x152697(0x12f)]('klyme',_0x47e948[_0x152697(0x142)],_0x47e948[_0x152697(0x103)]);const _0x13e872=await this[_0x152697(0x11b)][_0x152697(0x11c)](_0x47e948[_0x152697(0x142)]);_0x10ab14['status'](0xc8)[_0x152697(0x110)]({'success':!![],'message':_0x152697(0x111)});}catch(_0x2335c1){console[_0x152697(0x138)](_0x152697(0xf3),_0x2335c1),loggerService_1['loggerService'][_0x152697(0xdd)](_0x152697(0x117),_0x2335c1,_0x47e948[_0x152697(0x142)]),_0x10ab14['status'](0xc8)['json']({'success':![],'message':_0x2335c1 instanceof Error?_0x2335c1[_0x152697(0xec)]:_0x152697(0xe4)});}},this[_0xf5d1a9(0x127)]=async(_0x4cf774,_0x1b63c6,_0x2c9cf6)=>{const _0x1a21de=_0xf5d1a9;try{console[_0x1a21de(0x107)](_0x1a21de(0x10c),_0x4cf774['body']),loggerService_1[_0x1a21de(0xfb)][_0x1a21de(0x12f)](_0x1a21de(0xe7),_0x4cf774['body'],_0x4cf774['headers']);const _0x3819ed=await this[_0x1a21de(0x11b)][_0x1a21de(0x10f)](_0x4cf774[_0x1a21de(0x142)]);_0x1b63c6[_0x1a21de(0xeb)](0xc8)['json']({'success':!![],'message':_0x1a21de(0x114)});}catch(_0x1e3c95){console['error'](_0x1a21de(0xfc),_0x1e3c95),loggerService_1['loggerService']['logWebhookError'](_0x1a21de(0xe7),_0x1e3c95,_0x4cf774[_0x1a21de(0x142)]),_0x1b63c6[_0x1a21de(0xeb)](0xc8)[_0x1a21de(0x110)]({'success':![],'message':_0x1e3c95 instanceof Error?_0x1e3c95[_0x1a21de(0xec)]:'VISA\x20webhook\x20processing\x20failed'});}},this[_0xf5d1a9(0xfa)]=async(_0x2ff311,_0x22af50,_0x4fce13)=>{const _0x367db2=_0xf5d1a9;try{console['log'](_0x367db2(0xf7),_0x2ff311[_0x367db2(0x142)]),loggerService_1['loggerService']['logWebhookReceived']('mastercard',_0x2ff311[_0x367db2(0x142)],_0x2ff311[_0x367db2(0x103)]);const _0x4a3b85=await this['webhookService'][_0x367db2(0xfe)](_0x2ff311[_0x367db2(0x142)]);_0x22af50[_0x367db2(0xeb)](0xc8)[_0x367db2(0x110)]({'success':!![],'message':_0x367db2(0x146)});}catch(_0x452cc8){console[_0x367db2(0x138)](_0x367db2(0x12c),_0x452cc8),loggerService_1['loggerService'][_0x367db2(0xdd)](_0x367db2(0x136),_0x452cc8,_0x2ff311[_0x367db2(0x142)]),_0x22af50[_0x367db2(0xeb)](0xc8)[_0x367db2(0x110)]({'success':![],'message':_0x452cc8 instanceof Error?_0x452cc8[_0x367db2(0xec)]:'MasterCard\x20webhook\x20processing\x20failed'});}},this[_0xf5d1a9(0x13d)]=async(_0x32302d,_0x354cba,_0x2aa8ab)=>{const _0xe46b80=_0xf5d1a9;try{console[_0xe46b80(0x107)](_0xe46b80(0xf0),_0x32302d['body']),loggerService_1[_0xe46b80(0xfb)]['logWebhookReceived']('amer',_0x32302d['body'],_0x32302d[_0xe46b80(0x103)]);const _0x2e7cce=await this['webhookService']['processAmerWebhook'](_0x32302d[_0xe46b80(0x142)]);_0x354cba[_0xe46b80(0xeb)](0xc8)[_0xe46b80(0x110)]({'success':!![],'message':_0xe46b80(0x11e)});}catch(_0x475884){console[_0xe46b80(0x138)](_0xe46b80(0x116),_0x475884),loggerService_1[_0xe46b80(0xfb)]['logWebhookError'](_0xe46b80(0xd8),_0x475884,_0x32302d[_0xe46b80(0x142)]),_0x354cba[_0xe46b80(0xeb)](0xc8)['json']({'success':![],'message':_0x475884 instanceof Error?_0x475884[_0xe46b80(0xec)]:'Amer\x20webhook\x20processing\x20failed'});}},this[_0xf5d1a9(0x118)]=async(_0x4b28a3,_0x3bf1a3,_0x155bda)=>{const _0x2c1dda=_0xf5d1a9;try{console['log'](_0x2c1dda(0x109)),console[_0x2c1dda(0x107)]('Headers:',_0x4b28a3[_0x2c1dda(0x103)]),console[_0x2c1dda(0x107)](_0x2c1dda(0x10a),_0x4b28a3[_0x2c1dda(0x142)]),console[_0x2c1dda(0x107)](_0x2c1dda(0x123),typeof _0x4b28a3[_0x2c1dda(0x142)]),console[_0x2c1dda(0x107)](_0x2c1dda(0xe8),Object[_0x2c1dda(0x139)](_0x4b28a3[_0x2c1dda(0x142)]||{})),loggerService_1[_0x2c1dda(0xfb)][_0x2c1dda(0x12f)]('ampay',_0x4b28a3[_0x2c1dda(0x142)],_0x4b28a3['headers']);const _0xd677a9=await this['webhookService'][_0x2c1dda(0x113)](_0x4b28a3['body']);_0x3bf1a3[_0x2c1dda(0xeb)](0xc8)[_0x2c1dda(0x110)]({'success':!![],'message':_0x2c1dda(0x10b)});}catch(_0x2d9974){console[_0x2c1dda(0x138)](_0x2c1dda(0x100),_0x2d9974),loggerService_1['loggerService'][_0x2c1dda(0xdd)](_0x2c1dda(0x112),_0x2d9974,_0x4b28a3[_0x2c1dda(0x142)]),_0x3bf1a3['status'](0xc8)[_0x2c1dda(0x110)]({'success':![],'message':_0x2d9974 instanceof Error?_0x2d9974[_0x2c1dda(0xec)]:_0x2c1dda(0xf5)});}},this[_0xf5d1a9(0x119)]=async(_0x56800f,_0x5aaf24,_0x433525)=>{const _0x260367=_0xf5d1a9;try{console['log'](_0x260367(0xe0)),console[_0x260367(0x107)](_0x260367(0x12b),_0x56800f['headers']),console[_0x260367(0x107)](_0x260367(0x10a),_0x56800f[_0x260367(0x142)]),console[_0x260367(0x107)](_0x260367(0x123),typeof _0x56800f[_0x260367(0x142)]),console[_0x260367(0x107)](_0x260367(0xe8),Object[_0x260367(0x139)](_0x56800f[_0x260367(0x142)]||{})),loggerService_1[_0x260367(0xfb)][_0x260367(0x12f)](_0x260367(0x108),_0x56800f['body'],_0x56800f['headers']);const _0x3123a7=await this[_0x260367(0x11b)][_0x260367(0x12d)](_0x56800f['body']);_0x5aaf24['status'](0xc8)[_0x260367(0x110)]({'success':!![],'message':_0x260367(0x120)});}catch(_0x493a16){console[_0x260367(0x138)](_0x260367(0xe1),_0x493a16),loggerService_1[_0x260367(0xfb)][_0x260367(0xdd)]('ampay_try',_0x493a16,_0x56800f[_0x260367(0x142)]),_0x5aaf24[_0x260367(0xeb)](0xc8)[_0x260367(0x110)]({'success':![],'message':_0x493a16 instanceof Error?_0x493a16[_0x260367(0xec)]:_0x260367(0x122)});}},this['handleMyXSpendWebhook']=async(_0x4dd2dc,_0x4398e7,_0xd7e1c1)=>{const _0x328478=_0xf5d1a9;try{console[_0x328478(0x107)](_0x328478(0xe3)),console['log'](_0x328478(0x12b),_0x4dd2dc[_0x328478(0x103)]),console[_0x328478(0x107)]('Query\x20params:',_0x4dd2dc[_0x328478(0x133)]),console[_0x328478(0x107)](_0x328478(0x10a),_0x4dd2dc[_0x328478(0x142)]),console[_0x328478(0x107)](_0x328478(0x131),_0x4dd2dc['method']),loggerService_1[_0x328478(0xfb)][_0x328478(0x12f)](_0x328478(0xf8),_0x4dd2dc[_0x328478(0x142)]||_0x4dd2dc[_0x328478(0x133)],_0x4dd2dc['headers']);const _0x21a59f=await this[_0x328478(0x11b)][_0x328478(0x11f)](_0x4dd2dc['query'],_0x4dd2dc[_0x328478(0x142)]);_0x4398e7[_0x328478(0xeb)](0xc8)['json']({'success':!![],'message':_0x328478(0x141)});}catch(_0x551136){console[_0x328478(0x138)]('MyXSpend\x20webhook\x20processing\x20error:',_0x551136),loggerService_1[_0x328478(0xfb)][_0x328478(0xdd)]('myxspend',_0x551136,_0x4dd2dc['body']||_0x4dd2dc['query']),_0x4398e7[_0x328478(0xeb)](0xc8)[_0x328478(0x110)]({'success':![],'message':_0x551136 instanceof Error?_0x551136['message']:_0x328478(0xe9)});}},this['webhookService']=new webhookService_1['WebhookService']();}}function a17_0x1241(){const _0x2431bf=['===\x20MyXSpend\x20Webhook\x20Received\x20===','KLYME\x20webhook\x20processing\x20failed','CoinToPay2\x20webhook\x20processing\x20failed','handleKlymeWebhook','visa','Body\x20keys:','MyXSpend\x20webhook\x20processing\x20failed','===\x20PLISIO\x20GATEWAY\x20WEBHOOK\x20RECEIVED\x20===','status','message','585204ADMpnx','2029155veTmRs','cointopay2','Received\x20Amer\x20webhook:','Rapyd\x20webhook\x20processed\x20successfully','Body\x20content:','KLYME\x20webhook\x20processing\x20error:','handleCoinToPayWebhook','AmPay\x20webhook\x20processing\x20failed','handlePlisioWebhook','Received\x20MasterCard\x20webhook:','myxspend','plisio_gateway','handleMasterCardWebhook','loggerService','VISA\x20webhook\x20processing\x20error:','Gateway\x20webhook\x20processing\x20failed','processMasterCardWebhook','cointopay','AmPay\x20webhook\x20processing\x20error:','handleRapydWebhook','WebhookController','headers','Noda\x20webhook\x20processing\x20failed','224lHGuBV','CoinToPay\x20webhook\x20processed\x20successfully','log','ampay_try','===\x20AmPay\x20Webhook\x20Received\x20===','Body:','AmPay\x20webhook\x20processed\x20successfully','Received\x20VISA\x20webhook:','CoinToPay2\x20webhook\x20processing\x20error:','CoinToPay2\x20webhook\x20processed\x20successfully','processVisaWebhook','json','KLYME\x20webhook\x20processed\x20successfully','ampay','processAmPayWebhook','VISA\x20webhook\x20processed\x20successfully','2371116YsaqlE','Amer\x20webhook\x20processing\x20error:','klyme','handleAmPayWebhook','handleAmPayTRYWebhook','17854690mEIpZW','webhookService','processKlymeWebhook','Rapyd\x20webhook\x20processing\x20error:','Amer\x20webhook\x20processed\x20successfully','processMyXSpendWebhook','AmPay\x20TRY\x20webhook\x20processed\x20successfully','noda','AmPay\x20TRY\x20webhook\x20processing\x20failed','Body\x20type:','5424540nYgNet','1lZbISK','handleNodaWebhook','handleVisaWebhook','Gateway\x20webhook\x20processing\x20error:','__esModule','processNodaWebhook','Headers:','MasterCard\x20webhook\x20processing\x20error:','processAmPayTRYWebhook','Gateway\x20webhook\x20processed\x20successfully','logWebhookReceived','3725716nDokqI','Method:','Received\x20CoinToPay\x20webhook:','query','Noda\x20webhook\x20processed\x20successfully','Raw\x20body\x20type:','mastercard','9ZRlcFs','error','keys','processCoinToPayWebhook','Content-Type:','Webhook\x20processing\x20failed','handleAmerWebhook','processPlisioGatewayWebhook','get','handlePlisioGatewayWebhook','MyXSpend\x20webhook\x20processed\x20successfully','body','processPlisioWebhook','Received\x20CoinToPay2\x20webhook:','rapyd','MasterCard\x20webhook\x20processed\x20successfully','processCoinToPay2Webhook','../services/webhookService','amer','===\x20PLISIO\x20WEBHOOK\x20RECEIVED\x20===','102886FPwHLW','plisio','Webhook\x20processed\x20successfully','logWebhookError','Webhook\x20processing\x20error:','CoinToPay\x20webhook\x20processing\x20failed','===\x20AmPay\x20TRY\x20Webhook\x20Received\x20===','AmPay\x20TRY\x20webhook\x20processing\x20error:','CoinToPay\x20webhook\x20processing\x20error:'];a17_0x1241=function(){return _0x2431bf;};return a17_0x1241();}exports[a17_0x595307(0x102)]=WebhookController;