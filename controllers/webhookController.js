'use strict';const a17_0x491bad=a17_0x162c;function a17_0x162c(_0x370152,_0x21e9c0){const _0x1eb6d1=a17_0x1eb6();return a17_0x162c=function(_0x162c7b,_0x38053b){_0x162c7b=_0x162c7b-0xa4;let _0x1ae36f=_0x1eb6d1[_0x162c7b];return _0x1ae36f;},a17_0x162c(_0x370152,_0x21e9c0);}function a17_0x1eb6(){const _0x1785d8=['VISA\x20webhook\x20processed\x20successfully','handleVisaWebhook','Received\x20CoinToPay2\x20webhook:','Received\x20Rapyd\x20webhook:','1890hUyGdZ','status','webhookService','VISA\x20webhook\x20processing\x20failed','cointopay2','handlePlisioGatewayWebhook','Received\x20Amer\x20webhook:','MyXSpend\x20webhook\x20processing\x20failed','3119529TFemZr','AmPay\x20webhook\x20processing\x20error:','loggerService','get','8885590zdrUbY','MasterCard\x20webhook\x20processed\x20successfully','error','logWebhookError','keys','Webhook\x20processing\x20error:','Content-Type','KLYME\x20webhook\x20processing\x20failed','json','Received\x20VISA\x20webhook:','Body\x20content:','===\x20PLISIO\x20GATEWAY\x20WEBHOOK\x20RECEIVED\x20===','===\x20AmPay\x20Webhook\x20Received\x20===','MyXSpend\x20webhook\x20processed\x20successfully','message','klyme','32052kLGetE','mastercard','handleCoinToPayWebhook','VISA\x20webhook\x20processing\x20error:','Body:','Headers:','Noda\x20webhook\x20processing\x20error:','1766800KMGzDt','Received\x20Noda\x20webhook:','Raw\x20body\x20type:','processKlymeWebhook','handleAmPayTRYWebhook','Body\x20keys:','plisio_gateway','MasterCard\x20webhook\x20processing\x20error:','WebhookController','log','Method:','Rapyd\x20webhook\x20processing\x20error:','Gateway\x20webhook\x20processed\x20successfully','processAmerWebhook','AmPay\x20TRY\x20webhook\x20processing\x20failed','MyXSpend\x20webhook\x20processing\x20error:','MasterCard\x20webhook\x20processing\x20failed','noda','handleAmerWebhook','ampay_try','method','processPlisioWebhook','===\x20MyXSpend\x20Webhook\x20Received\x20===','rapyd','===\x20AmPay\x20TRY\x20Webhook\x20Received\x20===','visa','handleMyXSpendWebhook','7496676IEbyEc','query','Webhook\x20processed\x20successfully','handlePlisioWebhook','processPlisioGatewayWebhook','101366PIWJjQ','Received\x20MasterCard\x20webhook:','processCoinToPayWebhook','processRapydWebhook','processNodaWebhook','ampay','cointopay','AmPay\x20TRY\x20webhook\x20processing\x20error:','WebhookService','4nREGAf','body','headers','handleRapydWebhook','Noda\x20webhook\x20processing\x20failed','Amer\x20webhook\x20processing\x20error:','Gateway\x20webhook\x20processing\x20failed','AmPay\x20TRY\x20webhook\x20processed\x20successfully','31hVQYAe','CoinToPay\x20webhook\x20processed\x20successfully','processAmPayWebhook','Query\x20params:','Amer\x20webhook\x20processed\x20successfully','Webhook\x20processing\x20failed','logWebhookReceived','AmPay\x20webhook\x20processing\x20failed','Content-Type:','Rapyd\x20webhook\x20processed\x20successfully','plisio','34192hyVtMc','KLYME\x20webhook\x20processed\x20successfully','Body\x20type:','processMasterCardWebhook','Amer\x20webhook\x20processing\x20failed','1017PqhMDj'];a17_0x1eb6=function(){return _0x1785d8;};return a17_0x1eb6();}(function(_0x13be21,_0x562ac2){const _0x4f986f=a17_0x162c,_0x1ae7b1=_0x13be21();while(!![]){try{const _0x4bb9b5=-parseInt(_0x4f986f(0xe1))/0x1*(parseInt(_0x4f986f(0xd0))/0x2)+parseInt(_0x4f986f(0xfe))/0x3*(parseInt(_0x4f986f(0xd9))/0x4)+-parseInt(_0x4f986f(0xb0))/0x5+-parseInt(_0x4f986f(0xa9))/0x6*(-parseInt(_0x4f986f(0xf6))/0x7)+-parseInt(_0x4f986f(0xec))/0x8*(-parseInt(_0x4f986f(0xf1))/0x9)+-parseInt(_0x4f986f(0x102))/0xa+parseInt(_0x4f986f(0xcb))/0xb;if(_0x4bb9b5===_0x562ac2)break;else _0x1ae7b1['push'](_0x1ae7b1['shift']());}catch(_0xbfa364){_0x1ae7b1['push'](_0x1ae7b1['shift']());}}}(a17_0x1eb6,0xcb821));Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a17_0x491bad(0xb8)]=void 0x0;const webhookService_1=require('../services/webhookService'),loggerService_1=require('../services/loggerService');class WebhookController{constructor(){const _0x538e19=a17_0x491bad;this[_0x538e19(0xce)]=async(_0x30e972,_0x5b62fa,_0x209e53)=>{const _0x5066b1=_0x538e19;try{console['log']('===\x20PLISIO\x20WEBHOOK\x20RECEIVED\x20==='),console[_0x5066b1(0xb9)](_0x5066b1(0xe9),_0x30e972[_0x5066b1(0x101)](_0x5066b1(0x108))),console[_0x5066b1(0xb9)](_0x5066b1(0xb2),typeof _0x30e972[_0x5066b1(0xda)]),console[_0x5066b1(0xb9)](_0x5066b1(0xb5),Object[_0x5066b1(0x106)](_0x30e972[_0x5066b1(0xda)]||{})),console[_0x5066b1(0xb9)]('Body\x20content:',_0x30e972[_0x5066b1(0xda)]),loggerService_1[_0x5066b1(0x100)][_0x5066b1(0xe7)]('plisio',_0x30e972[_0x5066b1(0xda)],_0x30e972[_0x5066b1(0xdb)]);const _0x6322fd=await this[_0x5066b1(0xf8)][_0x5066b1(0xc5)](_0x30e972[_0x5066b1(0xda)]);_0x5b62fa[_0x5066b1(0xf7)](0xc8)[_0x5066b1(0x10a)]({'success':!![],'message':_0x5066b1(0xcd)});}catch(_0x2b5ac8){console[_0x5066b1(0x104)](_0x5066b1(0x107),_0x2b5ac8),loggerService_1['loggerService'][_0x5066b1(0x105)](_0x5066b1(0xeb),_0x2b5ac8,_0x30e972[_0x5066b1(0xda)]),_0x5b62fa[_0x5066b1(0xf7)](0xc8)[_0x5066b1(0x10a)]({'success':![],'message':_0x2b5ac8 instanceof Error?_0x2b5ac8[_0x5066b1(0xa7)]:_0x5066b1(0xe6)});}},this[_0x538e19(0xfb)]=async(_0x5f0df9,_0x2cf502,_0x480665)=>{const _0x2c8196=_0x538e19;try{console[_0x2c8196(0xb9)](_0x2c8196(0xa4)),console[_0x2c8196(0xb9)](_0x2c8196(0xe9),_0x5f0df9['get'](_0x2c8196(0x108))),console[_0x2c8196(0xb9)](_0x2c8196(0xb2),typeof _0x5f0df9[_0x2c8196(0xda)]),console[_0x2c8196(0xb9)](_0x2c8196(0xb5),Object[_0x2c8196(0x106)](_0x5f0df9[_0x2c8196(0xda)]||{})),console['log'](_0x2c8196(0x10c),_0x5f0df9[_0x2c8196(0xda)]),loggerService_1['loggerService'][_0x2c8196(0xe7)]('plisio_gateway',_0x5f0df9[_0x2c8196(0xda)],_0x5f0df9[_0x2c8196(0xdb)]);const _0x54f2c2=await this[_0x2c8196(0xf8)][_0x2c8196(0xcf)](_0x5f0df9[_0x2c8196(0xda)]);_0x2cf502[_0x2c8196(0xf7)](0xc8)[_0x2c8196(0x10a)]({'success':!![],'message':_0x2c8196(0xbc)});}catch(_0x90db5b){console[_0x2c8196(0x104)]('Gateway\x20webhook\x20processing\x20error:',_0x90db5b),loggerService_1[_0x2c8196(0x100)]['logWebhookError'](_0x2c8196(0xb6),_0x90db5b,_0x5f0df9['body']),_0x2cf502[_0x2c8196(0xf7)](0xc8)[_0x2c8196(0x10a)]({'success':![],'message':_0x90db5b instanceof Error?_0x90db5b[_0x2c8196(0xa7)]:_0x2c8196(0xdf)});}},this[_0x538e19(0xdc)]=async(_0x380163,_0x24b6b4,_0x3daaa2)=>{const _0x22a55a=_0x538e19;try{console[_0x22a55a(0xb9)](_0x22a55a(0xf5),_0x380163[_0x22a55a(0xda)]),loggerService_1[_0x22a55a(0x100)][_0x22a55a(0xe7)](_0x22a55a(0xc7),_0x380163['body'],_0x380163[_0x22a55a(0xdb)]);const _0x334b4b=await this[_0x22a55a(0xf8)][_0x22a55a(0xd3)](_0x380163[_0x22a55a(0xda)]);_0x24b6b4['status'](0xc8)[_0x22a55a(0x10a)]({'success':!![],'message':_0x22a55a(0xea)});}catch(_0x39b3c4){console[_0x22a55a(0x104)](_0x22a55a(0xbb),_0x39b3c4),loggerService_1[_0x22a55a(0x100)][_0x22a55a(0x105)](_0x22a55a(0xc7),_0x39b3c4,_0x380163[_0x22a55a(0xda)]),_0x24b6b4['status'](0xc8)[_0x22a55a(0x10a)]({'success':![],'message':_0x39b3c4 instanceof Error?_0x39b3c4[_0x22a55a(0xa7)]:'Rapyd\x20webhook\x20processing\x20failed'});}},this['handleNodaWebhook']=async(_0xa5a76a,_0x17da11,_0x259947)=>{const _0x4e763d=_0x538e19;try{console[_0x4e763d(0xb9)](_0x4e763d(0xb1),_0xa5a76a[_0x4e763d(0xda)]),loggerService_1[_0x4e763d(0x100)][_0x4e763d(0xe7)]('noda',_0xa5a76a[_0x4e763d(0xda)],_0xa5a76a['headers']);const _0x5550e5=await this[_0x4e763d(0xf8)][_0x4e763d(0xd4)](_0xa5a76a[_0x4e763d(0xda)]);_0x17da11[_0x4e763d(0xf7)](0xc8)[_0x4e763d(0x10a)]({'success':!![],'message':'Noda\x20webhook\x20processed\x20successfully'});}catch(_0x586e53){console[_0x4e763d(0x104)](_0x4e763d(0xaf),_0x586e53),loggerService_1[_0x4e763d(0x100)][_0x4e763d(0x105)](_0x4e763d(0xc1),_0x586e53,_0xa5a76a[_0x4e763d(0xda)]),_0x17da11[_0x4e763d(0xf7)](0xc8)[_0x4e763d(0x10a)]({'success':![],'message':_0x586e53 instanceof Error?_0x586e53[_0x4e763d(0xa7)]:_0x4e763d(0xdd)});}},this[_0x538e19(0xab)]=async(_0x4c6ebd,_0x334e77,_0x231c03)=>{const _0x58a3f7=_0x538e19;try{console[_0x58a3f7(0xb9)]('Received\x20CoinToPay\x20webhook:',_0x4c6ebd['body']),loggerService_1['loggerService'][_0x58a3f7(0xe7)]('cointopay',_0x4c6ebd[_0x58a3f7(0xda)],_0x4c6ebd['headers']);const _0x271c90=await this[_0x58a3f7(0xf8)][_0x58a3f7(0xd2)](_0x4c6ebd[_0x58a3f7(0xda)]);_0x334e77['status'](0xc8)[_0x58a3f7(0x10a)]({'success':!![],'message':_0x58a3f7(0xe2)});}catch(_0x513e06){console['error']('CoinToPay\x20webhook\x20processing\x20error:',_0x513e06),loggerService_1['loggerService'][_0x58a3f7(0x105)](_0x58a3f7(0xd6),_0x513e06,_0x4c6ebd[_0x58a3f7(0xda)]),_0x334e77[_0x58a3f7(0xf7)](0xc8)['json']({'success':![],'message':_0x513e06 instanceof Error?_0x513e06[_0x58a3f7(0xa7)]:'CoinToPay\x20webhook\x20processing\x20failed'});}},this['handleCoinToPay2Webhook']=async(_0x5b6b54,_0x39f8ac,_0x7b1cfa)=>{const _0x29173b=_0x538e19;try{console[_0x29173b(0xb9)](_0x29173b(0xf4),_0x5b6b54[_0x29173b(0xda)]),loggerService_1[_0x29173b(0x100)]['logWebhookReceived'](_0x29173b(0xfa),_0x5b6b54[_0x29173b(0xda)],_0x5b6b54['headers']);const _0x27595f=await this['webhookService']['processCoinToPay2Webhook'](_0x5b6b54['body']);_0x39f8ac[_0x29173b(0xf7)](0xc8)[_0x29173b(0x10a)]({'success':!![],'message':'CoinToPay2\x20webhook\x20processed\x20successfully'});}catch(_0x47a28e){console[_0x29173b(0x104)]('CoinToPay2\x20webhook\x20processing\x20error:',_0x47a28e),loggerService_1['loggerService']['logWebhookError'](_0x29173b(0xfa),_0x47a28e,_0x5b6b54[_0x29173b(0xda)]),_0x39f8ac[_0x29173b(0xf7)](0xc8)[_0x29173b(0x10a)]({'success':![],'message':_0x47a28e instanceof Error?_0x47a28e[_0x29173b(0xa7)]:'CoinToPay2\x20webhook\x20processing\x20failed'});}},this['handleKlymeWebhook']=async(_0x176c19,_0x488571,_0x3b29d4)=>{const _0x571580=_0x538e19;try{console[_0x571580(0xb9)]('Received\x20KLYME\x20webhook:',_0x176c19['body']),loggerService_1['loggerService']['logWebhookReceived'](_0x571580(0xa8),_0x176c19[_0x571580(0xda)],_0x176c19[_0x571580(0xdb)]);const _0x3e3e14=await this[_0x571580(0xf8)][_0x571580(0xb3)](_0x176c19[_0x571580(0xda)]);_0x488571[_0x571580(0xf7)](0xc8)['json']({'success':!![],'message':_0x571580(0xed)});}catch(_0x2ebd8e){console['error']('KLYME\x20webhook\x20processing\x20error:',_0x2ebd8e),loggerService_1['loggerService'][_0x571580(0x105)](_0x571580(0xa8),_0x2ebd8e,_0x176c19['body']),_0x488571[_0x571580(0xf7)](0xc8)[_0x571580(0x10a)]({'success':![],'message':_0x2ebd8e instanceof Error?_0x2ebd8e[_0x571580(0xa7)]:_0x571580(0x109)});}},this[_0x538e19(0xf3)]=async(_0x50897e,_0xd5ba6,_0x19be06)=>{const _0x50c352=_0x538e19;try{console[_0x50c352(0xb9)](_0x50c352(0x10b),_0x50897e[_0x50c352(0xda)]),loggerService_1[_0x50c352(0x100)][_0x50c352(0xe7)]('visa',_0x50897e[_0x50c352(0xda)],_0x50897e[_0x50c352(0xdb)]);const _0x502112=await this[_0x50c352(0xf8)]['processVisaWebhook'](_0x50897e[_0x50c352(0xda)]);_0xd5ba6['status'](0xc8)[_0x50c352(0x10a)]({'success':!![],'message':_0x50c352(0xf2)});}catch(_0x57c869){console[_0x50c352(0x104)](_0x50c352(0xac),_0x57c869),loggerService_1[_0x50c352(0x100)][_0x50c352(0x105)](_0x50c352(0xc9),_0x57c869,_0x50897e[_0x50c352(0xda)]),_0xd5ba6[_0x50c352(0xf7)](0xc8)[_0x50c352(0x10a)]({'success':![],'message':_0x57c869 instanceof Error?_0x57c869[_0x50c352(0xa7)]:_0x50c352(0xf9)});}},this['handleMasterCardWebhook']=async(_0x2419af,_0x2b6732,_0xffe466)=>{const _0x1339ed=_0x538e19;try{console[_0x1339ed(0xb9)](_0x1339ed(0xd1),_0x2419af[_0x1339ed(0xda)]),loggerService_1[_0x1339ed(0x100)][_0x1339ed(0xe7)](_0x1339ed(0xaa),_0x2419af['body'],_0x2419af[_0x1339ed(0xdb)]);const _0x3d09b7=await this[_0x1339ed(0xf8)][_0x1339ed(0xef)](_0x2419af[_0x1339ed(0xda)]);_0x2b6732[_0x1339ed(0xf7)](0xc8)['json']({'success':!![],'message':_0x1339ed(0x103)});}catch(_0x404411){console[_0x1339ed(0x104)](_0x1339ed(0xb7),_0x404411),loggerService_1[_0x1339ed(0x100)][_0x1339ed(0x105)](_0x1339ed(0xaa),_0x404411,_0x2419af[_0x1339ed(0xda)]),_0x2b6732[_0x1339ed(0xf7)](0xc8)[_0x1339ed(0x10a)]({'success':![],'message':_0x404411 instanceof Error?_0x404411[_0x1339ed(0xa7)]:_0x1339ed(0xc0)});}},this[_0x538e19(0xc2)]=async(_0x5ef9a6,_0x37b3b7,_0x3ab7fb)=>{const _0x5d75aa=_0x538e19;try{console[_0x5d75aa(0xb9)](_0x5d75aa(0xfc),_0x5ef9a6[_0x5d75aa(0xda)]),loggerService_1[_0x5d75aa(0x100)][_0x5d75aa(0xe7)]('amer',_0x5ef9a6['body'],_0x5ef9a6[_0x5d75aa(0xdb)]);const _0x37f365=await this[_0x5d75aa(0xf8)][_0x5d75aa(0xbd)](_0x5ef9a6[_0x5d75aa(0xda)]);_0x37b3b7[_0x5d75aa(0xf7)](0xc8)[_0x5d75aa(0x10a)]({'success':!![],'message':_0x5d75aa(0xe5)});}catch(_0x5ce397){console[_0x5d75aa(0x104)](_0x5d75aa(0xde),_0x5ce397),loggerService_1['loggerService']['logWebhookError']('amer',_0x5ce397,_0x5ef9a6[_0x5d75aa(0xda)]),_0x37b3b7[_0x5d75aa(0xf7)](0xc8)[_0x5d75aa(0x10a)]({'success':![],'message':_0x5ce397 instanceof Error?_0x5ce397[_0x5d75aa(0xa7)]:_0x5d75aa(0xf0)});}},this['handleAmPayWebhook']=async(_0x1e9458,_0x6ddf43,_0x483be9)=>{const _0x424812=_0x538e19;try{console[_0x424812(0xb9)](_0x424812(0xa5)),console[_0x424812(0xb9)]('Headers:',_0x1e9458[_0x424812(0xdb)]),console[_0x424812(0xb9)](_0x424812(0xad),_0x1e9458[_0x424812(0xda)]),console['log']('Body\x20type:',typeof _0x1e9458['body']),console['log'](_0x424812(0xb5),Object['keys'](_0x1e9458[_0x424812(0xda)]||{})),loggerService_1[_0x424812(0x100)][_0x424812(0xe7)](_0x424812(0xd5),_0x1e9458['body'],_0x1e9458[_0x424812(0xdb)]);const _0x5e6bd4=await this['webhookService'][_0x424812(0xe3)](_0x1e9458[_0x424812(0xda)]);_0x6ddf43[_0x424812(0xf7)](0xc8)[_0x424812(0x10a)]({'success':!![],'message':'AmPay\x20webhook\x20processed\x20successfully'});}catch(_0x1e4636){console['error'](_0x424812(0xff),_0x1e4636),loggerService_1[_0x424812(0x100)]['logWebhookError']('ampay',_0x1e4636,_0x1e9458['body']),_0x6ddf43['status'](0xc8)[_0x424812(0x10a)]({'success':![],'message':_0x1e4636 instanceof Error?_0x1e4636[_0x424812(0xa7)]:_0x424812(0xe8)});}},this[_0x538e19(0xb4)]=async(_0x16d08c,_0x434ad2,_0x562c3e)=>{const _0x28701e=_0x538e19;try{console[_0x28701e(0xb9)](_0x28701e(0xc8)),console['log'](_0x28701e(0xae),_0x16d08c[_0x28701e(0xdb)]),console[_0x28701e(0xb9)]('Body:',_0x16d08c[_0x28701e(0xda)]),console[_0x28701e(0xb9)](_0x28701e(0xee),typeof _0x16d08c[_0x28701e(0xda)]),console['log']('Body\x20keys:',Object[_0x28701e(0x106)](_0x16d08c['body']||{})),loggerService_1[_0x28701e(0x100)][_0x28701e(0xe7)](_0x28701e(0xc3),_0x16d08c[_0x28701e(0xda)],_0x16d08c[_0x28701e(0xdb)]);const _0x2d193b=await this[_0x28701e(0xf8)]['processAmPayTRYWebhook'](_0x16d08c[_0x28701e(0xda)]);_0x434ad2[_0x28701e(0xf7)](0xc8)['json']({'success':!![],'message':_0x28701e(0xe0)});}catch(_0x3342a7){console[_0x28701e(0x104)](_0x28701e(0xd7),_0x3342a7),loggerService_1['loggerService'][_0x28701e(0x105)]('ampay_try',_0x3342a7,_0x16d08c[_0x28701e(0xda)]),_0x434ad2['status'](0xc8)['json']({'success':![],'message':_0x3342a7 instanceof Error?_0x3342a7[_0x28701e(0xa7)]:_0x28701e(0xbe)});}},this[_0x538e19(0xca)]=async(_0x4a0ab5,_0x5aeda6,_0x1cd372)=>{const _0x51ccb3=_0x538e19;try{console[_0x51ccb3(0xb9)](_0x51ccb3(0xc6)),console[_0x51ccb3(0xb9)](_0x51ccb3(0xae),_0x4a0ab5[_0x51ccb3(0xdb)]),console[_0x51ccb3(0xb9)](_0x51ccb3(0xe4),_0x4a0ab5[_0x51ccb3(0xcc)]),console['log'](_0x51ccb3(0xad),_0x4a0ab5[_0x51ccb3(0xda)]),console[_0x51ccb3(0xb9)](_0x51ccb3(0xba),_0x4a0ab5[_0x51ccb3(0xc4)]),loggerService_1[_0x51ccb3(0x100)][_0x51ccb3(0xe7)]('myxspend',_0x4a0ab5[_0x51ccb3(0xda)]||_0x4a0ab5[_0x51ccb3(0xcc)],_0x4a0ab5[_0x51ccb3(0xdb)]);const _0x14b377=await this['webhookService']['processMyXSpendWebhook'](_0x4a0ab5['query'],_0x4a0ab5[_0x51ccb3(0xda)]);_0x5aeda6[_0x51ccb3(0xf7)](0xc8)[_0x51ccb3(0x10a)]({'success':!![],'message':_0x51ccb3(0xa6)});}catch(_0x497e1a){console['error'](_0x51ccb3(0xbf),_0x497e1a),loggerService_1[_0x51ccb3(0x100)]['logWebhookError']('myxspend',_0x497e1a,_0x4a0ab5[_0x51ccb3(0xda)]||_0x4a0ab5['query']),_0x5aeda6[_0x51ccb3(0xf7)](0xc8)['json']({'success':![],'message':_0x497e1a instanceof Error?_0x497e1a[_0x51ccb3(0xa7)]:_0x51ccb3(0xfd)});}},this[_0x538e19(0xf8)]=new webhookService_1[(_0x538e19(0xd8))]();}}exports[a17_0x491bad(0xb8)]=WebhookController;