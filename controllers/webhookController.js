'use strict';const a16_0x27a5a7=a16_0x10d6;(function(_0x248cfa,_0x33adad){const _0x4a29e3=a16_0x10d6,_0xeb1632=_0x248cfa();while(!![]){try{const _0x52205e=-parseInt(_0x4a29e3(0x192))/0x1+-parseInt(_0x4a29e3(0x17a))/0x2+parseInt(_0x4a29e3(0x172))/0x3*(parseInt(_0x4a29e3(0x166))/0x4)+parseInt(_0x4a29e3(0x14f))/0x5+parseInt(_0x4a29e3(0x195))/0x6+-parseInt(_0x4a29e3(0x169))/0x7+parseInt(_0x4a29e3(0x19c))/0x8*(parseInt(_0x4a29e3(0x159))/0x9);if(_0x52205e===_0x33adad)break;else _0xeb1632['push'](_0xeb1632['shift']());}catch(_0x38c9da){_0xeb1632['push'](_0xeb1632['shift']());}}}(a16_0x1d3c,0xd81e7));function a16_0x1d3c(){const _0x24a027=['Received\x20Noda\x20webhook:','webhookService','Webhook\x20processing\x20error:','amer','message','Amer\x20webhook\x20processing\x20error:','Content-Type','CoinToPay\x20webhook\x20processing\x20failed','processAmerWebhook','Rapyd\x20webhook\x20processed\x20successfully','handleMasterCardWebhook','CoinToPay\x20webhook\x20processing\x20error:','Gateway\x20webhook\x20processing\x20failed','4936055QRulbx','handleMyXSpendWebhook','Gateway\x20webhook\x20processed\x20successfully','Received\x20VISA\x20webhook:','get','handlePlisioGatewayWebhook','processMasterCardWebhook','Body:','body','Rapyd\x20webhook\x20processing\x20error:','99QFBrZQ','Received\x20Amer\x20webhook:','MyXSpend\x20webhook\x20processing\x20error:','VISA\x20webhook\x20processed\x20successfully','Noda\x20webhook\x20processing\x20error:','logWebhookError','Body\x20content:','VISA\x20webhook\x20processing\x20failed','MasterCard\x20webhook\x20processing\x20failed','Raw\x20body\x20type:','handleAmerWebhook','visa','processPlisioGatewayWebhook','404LiwzCo','handleRapydWebhook','===\x20PLISIO\x20WEBHOOK\x20RECEIVED\x20===','7183981fMVOXF','noda','Received\x20CoinToPay2\x20webhook:','handleNodaWebhook','log','processNodaWebhook','CoinToPay2\x20webhook\x20processing\x20failed','===\x20PLISIO\x20GATEWAY\x20WEBHOOK\x20RECEIVED\x20===','AmPay\x20webhook\x20processing\x20error:','43827uTHxcg','headers','logWebhookReceived','Headers:','WebhookController','error','AmPay\x20webhook\x20processed\x20successfully','myxspend','1928092dfvdAk','CoinToPay\x20webhook\x20processed\x20successfully','processAmPayWebhook','handleCoinToPay2Webhook','MasterCard\x20webhook\x20processing\x20error:','processCoinToPay2Webhook','Webhook\x20processing\x20failed','ampay','Amer\x20webhook\x20processed\x20successfully','MasterCard\x20webhook\x20processed\x20successfully','rapyd','loggerService','status','MyXSpend\x20webhook\x20processing\x20failed','handleKlymeWebhook','processVisaWebhook','processPlisioWebhook','handleCoinToPayWebhook','CoinToPay2\x20webhook\x20processing\x20error:','handlePlisioWebhook','../services/loggerService','Received\x20CoinToPay\x20webhook:','Content-Type:','plisio','1427454GyPSAx','Body\x20type:','cointopay','10377294gdWWQY','defineProperty','KLYME\x20webhook\x20processing\x20failed','plisio_gateway','mastercard','KLYME\x20webhook\x20processed\x20successfully','json','80536KqpSJE','query','keys','VISA\x20webhook\x20processing\x20error:','Method:','===\x20MyXSpend\x20Webhook\x20Received\x20===','KLYME\x20webhook\x20processing\x20error:','cointopay2','MyXSpend\x20webhook\x20processed\x20successfully','===\x20AmPay\x20Webhook\x20Received\x20===','Body\x20keys:'];a16_0x1d3c=function(){return _0x24a027;};return a16_0x1d3c();}Object[a16_0x27a5a7(0x196)](exports,'__esModule',{'value':!![]}),exports['WebhookController']=void 0x0;const webhookService_1=require('../services/webhookService'),loggerService_1=require(a16_0x27a5a7(0x18e));function a16_0x10d6(_0x292091,_0x2a51d4){const _0x1d3c58=a16_0x1d3c();return a16_0x10d6=function(_0x10d61b,_0x486b15){_0x10d61b=_0x10d61b-0x14f;let _0x2b922e=_0x1d3c58[_0x10d61b];return _0x2b922e;},a16_0x10d6(_0x292091,_0x2a51d4);}class WebhookController{constructor(){const _0x168383=a16_0x27a5a7;this[_0x168383(0x18d)]=async(_0x37e985,_0x5e034c,_0x3c17de)=>{const _0xf656d9=_0x168383;try{console[_0xf656d9(0x16d)](_0xf656d9(0x168)),console[_0xf656d9(0x16d)](_0xf656d9(0x190),_0x37e985['get'](_0xf656d9(0x1ad))),console[_0xf656d9(0x16d)](_0xf656d9(0x162),typeof _0x37e985[_0xf656d9(0x157)]),console[_0xf656d9(0x16d)]('Body\x20keys:',Object[_0xf656d9(0x19e)](_0x37e985[_0xf656d9(0x157)]||{})),console['log']('Body\x20content:',_0x37e985[_0xf656d9(0x157)]),loggerService_1['loggerService'][_0xf656d9(0x174)](_0xf656d9(0x191),_0x37e985['body'],_0x37e985[_0xf656d9(0x173)]);const _0x487d6c=await this[_0xf656d9(0x1a8)][_0xf656d9(0x18a)](_0x37e985[_0xf656d9(0x157)]);_0x5e034c[_0xf656d9(0x186)](0xc8)[_0xf656d9(0x19b)]({'success':!![],'message':'Webhook\x20processed\x20successfully'});}catch(_0x981bbb){console[_0xf656d9(0x177)](_0xf656d9(0x1a9),_0x981bbb),loggerService_1[_0xf656d9(0x185)][_0xf656d9(0x15e)](_0xf656d9(0x191),_0x981bbb,_0x37e985['body']),_0x5e034c[_0xf656d9(0x186)](0xc8)['json']({'success':![],'message':_0x981bbb instanceof Error?_0x981bbb[_0xf656d9(0x1ab)]:_0xf656d9(0x180)});}},this[_0x168383(0x154)]=async(_0x201d66,_0x7ccac6,_0x276b1a)=>{const _0x20a25f=_0x168383;try{console[_0x20a25f(0x16d)](_0x20a25f(0x170)),console[_0x20a25f(0x16d)]('Content-Type:',_0x201d66[_0x20a25f(0x153)](_0x20a25f(0x1ad))),console[_0x20a25f(0x16d)](_0x20a25f(0x162),typeof _0x201d66[_0x20a25f(0x157)]),console[_0x20a25f(0x16d)](_0x20a25f(0x1a6),Object[_0x20a25f(0x19e)](_0x201d66[_0x20a25f(0x157)]||{})),console['log'](_0x20a25f(0x15f),_0x201d66[_0x20a25f(0x157)]),loggerService_1[_0x20a25f(0x185)][_0x20a25f(0x174)](_0x20a25f(0x198),_0x201d66[_0x20a25f(0x157)],_0x201d66['headers']);const _0x314204=await this['webhookService'][_0x20a25f(0x165)](_0x201d66[_0x20a25f(0x157)]);_0x7ccac6[_0x20a25f(0x186)](0xc8)[_0x20a25f(0x19b)]({'success':!![],'message':_0x20a25f(0x151)});}catch(_0x2106af){console[_0x20a25f(0x177)]('Gateway\x20webhook\x20processing\x20error:',_0x2106af),loggerService_1[_0x20a25f(0x185)][_0x20a25f(0x15e)](_0x20a25f(0x198),_0x2106af,_0x201d66[_0x20a25f(0x157)]),_0x7ccac6['status'](0xc8)['json']({'success':![],'message':_0x2106af instanceof Error?_0x2106af['message']:_0x20a25f(0x1b3)});}},this[_0x168383(0x167)]=async(_0x4bae27,_0x5c763b,_0xb74e7b)=>{const _0x3d5035=_0x168383;try{console['log']('Received\x20Rapyd\x20webhook:',_0x4bae27['body']),loggerService_1[_0x3d5035(0x185)]['logWebhookReceived'](_0x3d5035(0x184),_0x4bae27['body'],_0x4bae27[_0x3d5035(0x173)]);const _0x516e9c=await this[_0x3d5035(0x1a8)]['processRapydWebhook'](_0x4bae27[_0x3d5035(0x157)]);_0x5c763b['status'](0xc8)['json']({'success':!![],'message':_0x3d5035(0x1b0)});}catch(_0x4b6d4e){console['error'](_0x3d5035(0x158),_0x4b6d4e),loggerService_1['loggerService'][_0x3d5035(0x15e)](_0x3d5035(0x184),_0x4b6d4e,_0x4bae27[_0x3d5035(0x157)]),_0x5c763b[_0x3d5035(0x186)](0xc8)[_0x3d5035(0x19b)]({'success':![],'message':_0x4b6d4e instanceof Error?_0x4b6d4e[_0x3d5035(0x1ab)]:'Rapyd\x20webhook\x20processing\x20failed'});}},this[_0x168383(0x16c)]=async(_0x1c4cee,_0xd4a48,_0xf62074)=>{const _0x4e0a85=_0x168383;try{console[_0x4e0a85(0x16d)](_0x4e0a85(0x1a7),_0x1c4cee[_0x4e0a85(0x157)]),loggerService_1[_0x4e0a85(0x185)][_0x4e0a85(0x174)](_0x4e0a85(0x16a),_0x1c4cee[_0x4e0a85(0x157)],_0x1c4cee[_0x4e0a85(0x173)]);const _0x247e46=await this[_0x4e0a85(0x1a8)][_0x4e0a85(0x16e)](_0x1c4cee['body']);_0xd4a48[_0x4e0a85(0x186)](0xc8)[_0x4e0a85(0x19b)]({'success':!![],'message':'Noda\x20webhook\x20processed\x20successfully'});}catch(_0x118755){console[_0x4e0a85(0x177)](_0x4e0a85(0x15d),_0x118755),loggerService_1[_0x4e0a85(0x185)][_0x4e0a85(0x15e)]('noda',_0x118755,_0x1c4cee['body']),_0xd4a48[_0x4e0a85(0x186)](0xc8)[_0x4e0a85(0x19b)]({'success':![],'message':_0x118755 instanceof Error?_0x118755[_0x4e0a85(0x1ab)]:'Noda\x20webhook\x20processing\x20failed'});}},this[_0x168383(0x18b)]=async(_0x46f68b,_0x10817a,_0x2f96ca)=>{const _0x4b8e10=_0x168383;try{console[_0x4b8e10(0x16d)](_0x4b8e10(0x18f),_0x46f68b['body']),loggerService_1['loggerService']['logWebhookReceived']('cointopay',_0x46f68b[_0x4b8e10(0x157)],_0x46f68b[_0x4b8e10(0x173)]);const _0x4eae9c=await this[_0x4b8e10(0x1a8)]['processCoinToPayWebhook'](_0x46f68b[_0x4b8e10(0x157)]);_0x10817a[_0x4b8e10(0x186)](0xc8)['json']({'success':!![],'message':_0x4b8e10(0x17b)});}catch(_0xeabe0b){console[_0x4b8e10(0x177)](_0x4b8e10(0x1b2),_0xeabe0b),loggerService_1[_0x4b8e10(0x185)][_0x4b8e10(0x15e)](_0x4b8e10(0x194),_0xeabe0b,_0x46f68b[_0x4b8e10(0x157)]),_0x10817a['status'](0xc8)[_0x4b8e10(0x19b)]({'success':![],'message':_0xeabe0b instanceof Error?_0xeabe0b[_0x4b8e10(0x1ab)]:_0x4b8e10(0x1ae)});}},this[_0x168383(0x17d)]=async(_0x1d8f70,_0x1ce135,_0x324a63)=>{const _0x23cb21=_0x168383;try{console[_0x23cb21(0x16d)](_0x23cb21(0x16b),_0x1d8f70['body']),loggerService_1[_0x23cb21(0x185)][_0x23cb21(0x174)](_0x23cb21(0x1a3),_0x1d8f70['body'],_0x1d8f70['headers']);const _0x22adcf=await this['webhookService'][_0x23cb21(0x17f)](_0x1d8f70[_0x23cb21(0x157)]);_0x1ce135['status'](0xc8)[_0x23cb21(0x19b)]({'success':!![],'message':'CoinToPay2\x20webhook\x20processed\x20successfully'});}catch(_0x1ab3ef){console[_0x23cb21(0x177)](_0x23cb21(0x18c),_0x1ab3ef),loggerService_1[_0x23cb21(0x185)][_0x23cb21(0x15e)](_0x23cb21(0x1a3),_0x1ab3ef,_0x1d8f70['body']),_0x1ce135[_0x23cb21(0x186)](0xc8)[_0x23cb21(0x19b)]({'success':![],'message':_0x1ab3ef instanceof Error?_0x1ab3ef[_0x23cb21(0x1ab)]:_0x23cb21(0x16f)});}},this[_0x168383(0x188)]=async(_0x41c856,_0x2ea6d4,_0x17dd44)=>{const _0x42dc5c=_0x168383;try{console[_0x42dc5c(0x16d)]('Received\x20KLYME\x20webhook:',_0x41c856['body']),loggerService_1[_0x42dc5c(0x185)][_0x42dc5c(0x174)]('klyme',_0x41c856[_0x42dc5c(0x157)],_0x41c856['headers']);const _0x3e92b5=await this[_0x42dc5c(0x1a8)]['processKlymeWebhook'](_0x41c856[_0x42dc5c(0x157)]);_0x2ea6d4[_0x42dc5c(0x186)](0xc8)[_0x42dc5c(0x19b)]({'success':!![],'message':_0x42dc5c(0x19a)});}catch(_0x42969e){console[_0x42dc5c(0x177)](_0x42dc5c(0x1a2),_0x42969e),loggerService_1[_0x42dc5c(0x185)][_0x42dc5c(0x15e)]('klyme',_0x42969e,_0x41c856['body']),_0x2ea6d4[_0x42dc5c(0x186)](0xc8)['json']({'success':![],'message':_0x42969e instanceof Error?_0x42969e[_0x42dc5c(0x1ab)]:_0x42dc5c(0x197)});}},this['handleVisaWebhook']=async(_0x191b43,_0x54bdb6,_0x3c3ebc)=>{const _0x5964ac=_0x168383;try{console[_0x5964ac(0x16d)](_0x5964ac(0x152),_0x191b43[_0x5964ac(0x157)]),loggerService_1[_0x5964ac(0x185)][_0x5964ac(0x174)]('visa',_0x191b43[_0x5964ac(0x157)],_0x191b43[_0x5964ac(0x173)]);const _0x4d7b0f=await this[_0x5964ac(0x1a8)][_0x5964ac(0x189)](_0x191b43['body']);_0x54bdb6['status'](0xc8)[_0x5964ac(0x19b)]({'success':!![],'message':_0x5964ac(0x15c)});}catch(_0x11c3bd){console['error'](_0x5964ac(0x19f),_0x11c3bd),loggerService_1[_0x5964ac(0x185)][_0x5964ac(0x15e)](_0x5964ac(0x164),_0x11c3bd,_0x191b43[_0x5964ac(0x157)]),_0x54bdb6[_0x5964ac(0x186)](0xc8)[_0x5964ac(0x19b)]({'success':![],'message':_0x11c3bd instanceof Error?_0x11c3bd[_0x5964ac(0x1ab)]:_0x5964ac(0x160)});}},this[_0x168383(0x1b1)]=async(_0x241125,_0x233ab0,_0x2e65b3)=>{const _0x20b745=_0x168383;try{console[_0x20b745(0x16d)]('Received\x20MasterCard\x20webhook:',_0x241125['body']),loggerService_1[_0x20b745(0x185)][_0x20b745(0x174)](_0x20b745(0x199),_0x241125[_0x20b745(0x157)],_0x241125['headers']);const _0x189938=await this[_0x20b745(0x1a8)][_0x20b745(0x155)](_0x241125[_0x20b745(0x157)]);_0x233ab0[_0x20b745(0x186)](0xc8)[_0x20b745(0x19b)]({'success':!![],'message':_0x20b745(0x183)});}catch(_0x31974b){console[_0x20b745(0x177)](_0x20b745(0x17e),_0x31974b),loggerService_1[_0x20b745(0x185)][_0x20b745(0x15e)](_0x20b745(0x199),_0x31974b,_0x241125[_0x20b745(0x157)]),_0x233ab0[_0x20b745(0x186)](0xc8)[_0x20b745(0x19b)]({'success':![],'message':_0x31974b instanceof Error?_0x31974b[_0x20b745(0x1ab)]:_0x20b745(0x161)});}},this[_0x168383(0x163)]=async(_0x1369a6,_0x2dc35b,_0x582253)=>{const _0x1ac966=_0x168383;try{console[_0x1ac966(0x16d)](_0x1ac966(0x15a),_0x1369a6['body']),loggerService_1['loggerService'][_0x1ac966(0x174)](_0x1ac966(0x1aa),_0x1369a6[_0x1ac966(0x157)],_0x1369a6[_0x1ac966(0x173)]);const _0x1c9cfa=await this[_0x1ac966(0x1a8)][_0x1ac966(0x1af)](_0x1369a6[_0x1ac966(0x157)]);_0x2dc35b['status'](0xc8)[_0x1ac966(0x19b)]({'success':!![],'message':_0x1ac966(0x182)});}catch(_0xd3bbbe){console[_0x1ac966(0x177)](_0x1ac966(0x1ac),_0xd3bbbe),loggerService_1[_0x1ac966(0x185)]['logWebhookError'](_0x1ac966(0x1aa),_0xd3bbbe,_0x1369a6[_0x1ac966(0x157)]),_0x2dc35b[_0x1ac966(0x186)](0xc8)[_0x1ac966(0x19b)]({'success':![],'message':_0xd3bbbe instanceof Error?_0xd3bbbe[_0x1ac966(0x1ab)]:'Amer\x20webhook\x20processing\x20failed'});}},this['handleAmPayWebhook']=async(_0x27394d,_0xd2cc4,_0x3473a5)=>{const _0x4585e3=_0x168383;try{console[_0x4585e3(0x16d)](_0x4585e3(0x1a5)),console[_0x4585e3(0x16d)](_0x4585e3(0x175),_0x27394d['headers']),console[_0x4585e3(0x16d)](_0x4585e3(0x156),_0x27394d['body']),console[_0x4585e3(0x16d)](_0x4585e3(0x193),typeof _0x27394d[_0x4585e3(0x157)]),console[_0x4585e3(0x16d)](_0x4585e3(0x1a6),Object[_0x4585e3(0x19e)](_0x27394d['body']||{})),loggerService_1[_0x4585e3(0x185)][_0x4585e3(0x174)](_0x4585e3(0x181),_0x27394d['body'],_0x27394d['headers']);const _0x3384d1=await this[_0x4585e3(0x1a8)][_0x4585e3(0x17c)](_0x27394d[_0x4585e3(0x157)]);_0xd2cc4['status'](0xc8)[_0x4585e3(0x19b)]({'success':!![],'message':_0x4585e3(0x178)});}catch(_0x542c4b){console[_0x4585e3(0x177)](_0x4585e3(0x171),_0x542c4b),loggerService_1[_0x4585e3(0x185)][_0x4585e3(0x15e)](_0x4585e3(0x181),_0x542c4b,_0x27394d[_0x4585e3(0x157)]),_0xd2cc4['status'](0xc8)[_0x4585e3(0x19b)]({'success':![],'message':_0x542c4b instanceof Error?_0x542c4b[_0x4585e3(0x1ab)]:'AmPay\x20webhook\x20processing\x20failed'});}},this[_0x168383(0x150)]=async(_0x1aacbb,_0x3b23f9,_0x120f27)=>{const _0x35ca9d=_0x168383;try{console['log'](_0x35ca9d(0x1a1)),console[_0x35ca9d(0x16d)]('Headers:',_0x1aacbb[_0x35ca9d(0x173)]),console[_0x35ca9d(0x16d)]('Query\x20params:',_0x1aacbb[_0x35ca9d(0x19d)]),console['log'](_0x35ca9d(0x156),_0x1aacbb[_0x35ca9d(0x157)]),console[_0x35ca9d(0x16d)](_0x35ca9d(0x1a0),_0x1aacbb['method']),loggerService_1[_0x35ca9d(0x185)][_0x35ca9d(0x174)](_0x35ca9d(0x179),_0x1aacbb[_0x35ca9d(0x157)]||_0x1aacbb[_0x35ca9d(0x19d)],_0x1aacbb[_0x35ca9d(0x173)]);const _0x2d3893=await this[_0x35ca9d(0x1a8)]['processMyXSpendWebhook'](_0x1aacbb[_0x35ca9d(0x19d)],_0x1aacbb[_0x35ca9d(0x157)]);_0x3b23f9[_0x35ca9d(0x186)](0xc8)['json']({'success':!![],'message':_0x35ca9d(0x1a4)});}catch(_0xa78aa9){console['error'](_0x35ca9d(0x15b),_0xa78aa9),loggerService_1[_0x35ca9d(0x185)][_0x35ca9d(0x15e)](_0x35ca9d(0x179),_0xa78aa9,_0x1aacbb[_0x35ca9d(0x157)]||_0x1aacbb[_0x35ca9d(0x19d)]),_0x3b23f9[_0x35ca9d(0x186)](0xc8)[_0x35ca9d(0x19b)]({'success':![],'message':_0xa78aa9 instanceof Error?_0xa78aa9[_0x35ca9d(0x1ab)]:_0x35ca9d(0x187)});}},this['webhookService']=new webhookService_1['WebhookService']();}}exports[a16_0x27a5a7(0x176)]=WebhookController;