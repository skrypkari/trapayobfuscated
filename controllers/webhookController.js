'use strict';const a15_0x43b5c3=a15_0x1fd0;(function(_0x38f711,_0x6de42c){const _0xd4d25d=a15_0x1fd0,_0x39c636=_0x38f711();while(!![]){try{const _0x1c2fdb=-parseInt(_0xd4d25d(0x174))/0x1*(parseInt(_0xd4d25d(0x188))/0x2)+-parseInt(_0xd4d25d(0x19f))/0x3+parseInt(_0xd4d25d(0x173))/0x4+-parseInt(_0xd4d25d(0x198))/0x5*(-parseInt(_0xd4d25d(0x194))/0x6)+-parseInt(_0xd4d25d(0x169))/0x7+-parseInt(_0xd4d25d(0x186))/0x8+parseInt(_0xd4d25d(0x1a8))/0x9;if(_0x1c2fdb===_0x6de42c)break;else _0x39c636['push'](_0x39c636['shift']());}catch(_0x2641d5){_0x39c636['push'](_0x39c636['shift']());}}}(a15_0x2ba1,0x3cc44));Object[a15_0x43b5c3(0x178)](exports,a15_0x43b5c3(0x16d),{'value':!![]}),exports['WebhookController']=void 0x0;const webhookService_1=require('../services/webhookService'),loggerService_1=require(a15_0x43b5c3(0x170));function a15_0x1fd0(_0x41d623,_0x39eef8){const _0x2ba127=a15_0x2ba1();return a15_0x1fd0=function(_0x1fd0a2,_0x3fde35){_0x1fd0a2=_0x1fd0a2-0x164;let _0x4ce577=_0x2ba127[_0x1fd0a2];return _0x4ce577;},a15_0x1fd0(_0x41d623,_0x39eef8);}function a15_0x2ba1(){const _0x3ce8ee=['8525259OwpvSY','Rapyd\x20webhook\x20processing\x20error:','Received\x20CoinToPay\x20webhook:','Gateway\x20webhook\x20processed\x20successfully','Body\x20keys:','KLYME\x20webhook\x20processing\x20error:','Webhook\x20processing\x20error:','handlePlisioWebhook','2618147dFQFiS','Webhook\x20processed\x20successfully','webhookService','CoinToPay2\x20webhook\x20processed\x20successfully','__esModule','plisio','rapyd','../services/loggerService','Content-Type','logWebhookReceived','1679480bZRJxh','48438whFBSw','Rapyd\x20webhook\x20processed\x20successfully','error','processCoinToPay2Webhook','defineProperty','Noda\x20webhook\x20processed\x20successfully','===\x20PLISIO\x20WEBHOOK\x20RECEIVED\x20===','WebhookService','Received\x20MasterCard\x20webhook:','noda','handleCoinToPayWebhook','get','CoinToPay\x20webhook\x20processed\x20successfully','loggerService','Gateway\x20webhook\x20processing\x20error:','MasterCard\x20webhook\x20processing\x20failed','status','processCoinToPayWebhook','2182552gEJfEC','handleNodaWebhook','8bVvujn','processMasterCardWebhook','headers','handleRapydWebhook','===\x20PLISIO\x20GATEWAY\x20WEBHOOK\x20RECEIVED\x20===','Webhook\x20processing\x20failed','klyme','handleMasterCardWebhook','cointopay2','keys','Received\x20CoinToPay2\x20webhook:','Body\x20content:','42joAOeO','processRapydWebhook','log','body','9665lbCofr','KLYME\x20webhook\x20processed\x20successfully','handleCoinToPay2Webhook','mastercard','cointopay','message','json','873480tGKRFx','Raw\x20body\x20type:','Noda\x20webhook\x20processing\x20error:','Content-Type:','Noda\x20webhook\x20processing\x20failed','CoinToPay\x20webhook\x20processing\x20error:','logWebhookError','plisio_gateway','WebhookController'];a15_0x2ba1=function(){return _0x3ce8ee;};return a15_0x2ba1();}class WebhookController{constructor(){const _0x2db184=a15_0x43b5c3;this[_0x2db184(0x168)]=async(_0x501f38,_0x5b4f43,_0x9edd4)=>{const _0x10b124=_0x2db184;try{console['log'](_0x10b124(0x17a)),console[_0x10b124(0x196)](_0x10b124(0x1a2),_0x501f38[_0x10b124(0x17f)](_0x10b124(0x171))),console[_0x10b124(0x196)](_0x10b124(0x1a0),typeof _0x501f38[_0x10b124(0x197)]),console[_0x10b124(0x196)](_0x10b124(0x165),Object['keys'](_0x501f38[_0x10b124(0x197)]||{})),console['log'](_0x10b124(0x193),_0x501f38[_0x10b124(0x197)]),loggerService_1[_0x10b124(0x181)][_0x10b124(0x172)](_0x10b124(0x16e),_0x501f38[_0x10b124(0x197)],_0x501f38[_0x10b124(0x18a)]);const _0x3a85b5=await this[_0x10b124(0x16b)]['processPlisioWebhook'](_0x501f38[_0x10b124(0x197)]);_0x5b4f43[_0x10b124(0x184)](0xc8)[_0x10b124(0x19e)]({'success':!![],'message':_0x10b124(0x16a)});}catch(_0x39151a){console[_0x10b124(0x176)](_0x10b124(0x167),_0x39151a),loggerService_1[_0x10b124(0x181)][_0x10b124(0x1a5)]('plisio',_0x39151a,_0x501f38[_0x10b124(0x197)]),_0x5b4f43[_0x10b124(0x184)](0xc8)[_0x10b124(0x19e)]({'success':![],'message':_0x39151a instanceof Error?_0x39151a[_0x10b124(0x19d)]:_0x10b124(0x18d)});}},this['handlePlisioGatewayWebhook']=async(_0x2a7c1a,_0x4c1e7a,_0x3c97f0)=>{const _0x41ef3d=_0x2db184;try{console[_0x41ef3d(0x196)](_0x41ef3d(0x18c)),console['log'](_0x41ef3d(0x1a2),_0x2a7c1a[_0x41ef3d(0x17f)](_0x41ef3d(0x171))),console[_0x41ef3d(0x196)]('Raw\x20body\x20type:',typeof _0x2a7c1a[_0x41ef3d(0x197)]),console[_0x41ef3d(0x196)](_0x41ef3d(0x165),Object[_0x41ef3d(0x191)](_0x2a7c1a[_0x41ef3d(0x197)]||{})),console['log'](_0x41ef3d(0x193),_0x2a7c1a[_0x41ef3d(0x197)]),loggerService_1[_0x41ef3d(0x181)]['logWebhookReceived'](_0x41ef3d(0x1a6),_0x2a7c1a[_0x41ef3d(0x197)],_0x2a7c1a[_0x41ef3d(0x18a)]);const _0x47ddc8=await this['webhookService']['processPlisioGatewayWebhook'](_0x2a7c1a[_0x41ef3d(0x197)]);_0x4c1e7a[_0x41ef3d(0x184)](0xc8)[_0x41ef3d(0x19e)]({'success':!![],'message':_0x41ef3d(0x164)});}catch(_0x5de20c){console[_0x41ef3d(0x176)](_0x41ef3d(0x182),_0x5de20c),loggerService_1[_0x41ef3d(0x181)][_0x41ef3d(0x1a5)](_0x41ef3d(0x1a6),_0x5de20c,_0x2a7c1a['body']),_0x4c1e7a['status'](0xc8)[_0x41ef3d(0x19e)]({'success':![],'message':_0x5de20c instanceof Error?_0x5de20c[_0x41ef3d(0x19d)]:'Gateway\x20webhook\x20processing\x20failed'});}},this[_0x2db184(0x18b)]=async(_0x2be132,_0x303d34,_0x48d85b)=>{const _0x3e78d6=_0x2db184;try{console[_0x3e78d6(0x196)]('Received\x20Rapyd\x20webhook:',_0x2be132['body']),loggerService_1[_0x3e78d6(0x181)][_0x3e78d6(0x172)](_0x3e78d6(0x16f),_0x2be132[_0x3e78d6(0x197)],_0x2be132['headers']);const _0xb9058a=await this[_0x3e78d6(0x16b)][_0x3e78d6(0x195)](_0x2be132['body']);_0x303d34[_0x3e78d6(0x184)](0xc8)['json']({'success':!![],'message':_0x3e78d6(0x175)});}catch(_0xa71e9f){console[_0x3e78d6(0x176)](_0x3e78d6(0x1a9),_0xa71e9f),loggerService_1[_0x3e78d6(0x181)]['logWebhookError'](_0x3e78d6(0x16f),_0xa71e9f,_0x2be132[_0x3e78d6(0x197)]),_0x303d34['status'](0xc8)[_0x3e78d6(0x19e)]({'success':![],'message':_0xa71e9f instanceof Error?_0xa71e9f['message']:'Rapyd\x20webhook\x20processing\x20failed'});}},this[_0x2db184(0x187)]=async(_0x1212ae,_0x16affe,_0x3ed3d1)=>{const _0x575ba1=_0x2db184;try{console['log']('Received\x20Noda\x20webhook:',_0x1212ae[_0x575ba1(0x197)]),loggerService_1[_0x575ba1(0x181)]['logWebhookReceived'](_0x575ba1(0x17d),_0x1212ae[_0x575ba1(0x197)],_0x1212ae[_0x575ba1(0x18a)]);const _0x4ccf8e=await this[_0x575ba1(0x16b)]['processNodaWebhook'](_0x1212ae[_0x575ba1(0x197)]);_0x16affe['status'](0xc8)['json']({'success':!![],'message':_0x575ba1(0x179)});}catch(_0x129cc2){console[_0x575ba1(0x176)](_0x575ba1(0x1a1),_0x129cc2),loggerService_1[_0x575ba1(0x181)][_0x575ba1(0x1a5)](_0x575ba1(0x17d),_0x129cc2,_0x1212ae[_0x575ba1(0x197)]),_0x16affe[_0x575ba1(0x184)](0xc8)[_0x575ba1(0x19e)]({'success':![],'message':_0x129cc2 instanceof Error?_0x129cc2['message']:_0x575ba1(0x1a3)});}},this[_0x2db184(0x17e)]=async(_0x522edc,_0x20de36,_0x2b28a1)=>{const _0x414da1=_0x2db184;try{console[_0x414da1(0x196)](_0x414da1(0x1aa),_0x522edc['body']),loggerService_1[_0x414da1(0x181)][_0x414da1(0x172)](_0x414da1(0x19c),_0x522edc[_0x414da1(0x197)],_0x522edc[_0x414da1(0x18a)]);const _0x138d12=await this[_0x414da1(0x16b)][_0x414da1(0x185)](_0x522edc['body']);_0x20de36['status'](0xc8)[_0x414da1(0x19e)]({'success':!![],'message':_0x414da1(0x180)});}catch(_0x142757){console[_0x414da1(0x176)](_0x414da1(0x1a4),_0x142757),loggerService_1[_0x414da1(0x181)]['logWebhookError']('cointopay',_0x142757,_0x522edc[_0x414da1(0x197)]),_0x20de36[_0x414da1(0x184)](0xc8)[_0x414da1(0x19e)]({'success':![],'message':_0x142757 instanceof Error?_0x142757[_0x414da1(0x19d)]:'CoinToPay\x20webhook\x20processing\x20failed'});}},this[_0x2db184(0x19a)]=async(_0xc4d85d,_0x209e6d,_0x869807)=>{const _0x2c4d20=_0x2db184;try{console['log'](_0x2c4d20(0x192),_0xc4d85d[_0x2c4d20(0x197)]),loggerService_1[_0x2c4d20(0x181)][_0x2c4d20(0x172)](_0x2c4d20(0x190),_0xc4d85d[_0x2c4d20(0x197)],_0xc4d85d[_0x2c4d20(0x18a)]);const _0x3d524a=await this[_0x2c4d20(0x16b)][_0x2c4d20(0x177)](_0xc4d85d[_0x2c4d20(0x197)]);_0x209e6d[_0x2c4d20(0x184)](0xc8)[_0x2c4d20(0x19e)]({'success':!![],'message':_0x2c4d20(0x16c)});}catch(_0x29c98b){console['error']('CoinToPay2\x20webhook\x20processing\x20error:',_0x29c98b),loggerService_1['loggerService'][_0x2c4d20(0x1a5)](_0x2c4d20(0x190),_0x29c98b,_0xc4d85d[_0x2c4d20(0x197)]),_0x209e6d[_0x2c4d20(0x184)](0xc8)[_0x2c4d20(0x19e)]({'success':![],'message':_0x29c98b instanceof Error?_0x29c98b[_0x2c4d20(0x19d)]:'CoinToPay2\x20webhook\x20processing\x20failed'});}},this['handleKlymeWebhook']=async(_0x4b06ee,_0x227765,_0x20ca65)=>{const _0x465fda=_0x2db184;try{console[_0x465fda(0x196)]('Received\x20KLYME\x20webhook:',_0x4b06ee[_0x465fda(0x197)]),loggerService_1[_0x465fda(0x181)][_0x465fda(0x172)](_0x465fda(0x18e),_0x4b06ee['body'],_0x4b06ee[_0x465fda(0x18a)]);const _0x39a53=await this[_0x465fda(0x16b)]['processKlymeWebhook'](_0x4b06ee['body']);_0x227765[_0x465fda(0x184)](0xc8)[_0x465fda(0x19e)]({'success':!![],'message':_0x465fda(0x199)});}catch(_0x487183){console[_0x465fda(0x176)](_0x465fda(0x166),_0x487183),loggerService_1['loggerService'][_0x465fda(0x1a5)](_0x465fda(0x18e),_0x487183,_0x4b06ee['body']),_0x227765[_0x465fda(0x184)](0xc8)['json']({'success':![],'message':_0x487183 instanceof Error?_0x487183[_0x465fda(0x19d)]:'KLYME\x20webhook\x20processing\x20failed'});}},this[_0x2db184(0x18f)]=async(_0xab96fc,_0x2effe5,_0x407e7c)=>{const _0x140b1a=_0x2db184;try{console[_0x140b1a(0x196)](_0x140b1a(0x17c),_0xab96fc['body']),loggerService_1[_0x140b1a(0x181)][_0x140b1a(0x172)]('mastercard',_0xab96fc[_0x140b1a(0x197)],_0xab96fc[_0x140b1a(0x18a)]);const _0x366dfe=await this[_0x140b1a(0x16b)][_0x140b1a(0x189)](_0xab96fc[_0x140b1a(0x197)]);_0x2effe5[_0x140b1a(0x184)](0xc8)[_0x140b1a(0x19e)]({'success':!![],'message':'MasterCard\x20webhook\x20processed\x20successfully'});}catch(_0x2687f5){console[_0x140b1a(0x176)]('MasterCard\x20webhook\x20processing\x20error:',_0x2687f5),loggerService_1[_0x140b1a(0x181)][_0x140b1a(0x1a5)](_0x140b1a(0x19b),_0x2687f5,_0xab96fc[_0x140b1a(0x197)]),_0x2effe5[_0x140b1a(0x184)](0xc8)[_0x140b1a(0x19e)]({'success':![],'message':_0x2687f5 instanceof Error?_0x2687f5[_0x140b1a(0x19d)]:_0x140b1a(0x183)});}},this[_0x2db184(0x16b)]=new webhookService_1[(_0x2db184(0x17b))]();}}exports[a15_0x43b5c3(0x1a7)]=WebhookController;