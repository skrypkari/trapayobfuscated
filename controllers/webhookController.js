'use strict';function a15_0x4960(_0x354511,_0x65f197){const _0x19df9e=a15_0x19df();return a15_0x4960=function(_0x4960ae,_0x467d34){_0x4960ae=_0x4960ae-0x1e4;let _0x36d9e7=_0x19df9e[_0x4960ae];return _0x36d9e7;},a15_0x4960(_0x354511,_0x65f197);}const a15_0x1c9271=a15_0x4960;(function(_0x3738e4,_0x4f4473){const _0x569eba=a15_0x4960,_0x54ee32=_0x3738e4();while(!![]){try{const _0x363fb8=parseInt(_0x569eba(0x1f6))/0x1*(-parseInt(_0x569eba(0x21c))/0x2)+parseInt(_0x569eba(0x1fe))/0x3*(parseInt(_0x569eba(0x219))/0x4)+parseInt(_0x569eba(0x1fb))/0x5+parseInt(_0x569eba(0x228))/0x6*(-parseInt(_0x569eba(0x204))/0x7)+-parseInt(_0x569eba(0x1ec))/0x8*(parseInt(_0x569eba(0x1e8))/0x9)+-parseInt(_0x569eba(0x213))/0xa*(-parseInt(_0x569eba(0x21b))/0xb)+-parseInt(_0x569eba(0x21e))/0xc*(-parseInt(_0x569eba(0x224))/0xd);if(_0x363fb8===_0x4f4473)break;else _0x54ee32['push'](_0x54ee32['shift']());}catch(_0x4607ff){_0x54ee32['push'](_0x54ee32['shift']());}}}(a15_0x19df,0xbd9ae));function a15_0x19df(){const _0x32083f=['Webhook\x20processed\x20successfully','3HmuYhJ','Received\x20Noda\x20webhook:','===\x20PLISIO\x20GATEWAY\x20WEBHOOK\x20RECEIVED\x20===','Noda\x20webhook\x20processing\x20failed','processKlymeWebhook','keys','1067962TRYZWT','rapyd','__esModule','handleCoinToPayWebhook','loggerService','Gateway\x20webhook\x20processing\x20error:','Rapyd\x20webhook\x20processing\x20failed','plisio_gateway','Noda\x20webhook\x20processed\x20successfully','Rapyd\x20webhook\x20processed\x20successfully','../services/loggerService','json','status','KLYME\x20webhook\x20processed\x20successfully','logWebhookReceived','1510NbQyUk','Webhook\x20processing\x20failed','body','CoinToPay\x20webhook\x20processing\x20failed','handleNodaWebhook','logWebhookError','1965444VwUJEl','Content-Type:','67331zPDqvk','2557288bwaWbI','plisio','385716uekWlU','WebhookService','noda','processRapydWebhook','cointopay','get','325clsKJw','Received\x20MasterCard\x20webhook:','WebhookController','processPlisioWebhook','30bkgRUX','klyme','CoinToPay\x20webhook\x20processed\x20successfully','Body\x20content:','Body\x20keys:','Raw\x20body\x20type:','MasterCard\x20webhook\x20processing\x20error:','handlePlisioGatewayWebhook','CoinToPay\x20webhook\x20processing\x20error:','webhookService','MasterCard\x20webhook\x20processed\x20successfully','3438cbNsAX','Content-Type','error','Received\x20Rapyd\x20webhook:','14920kqVMhQ','Received\x20CoinToPay\x20webhook:','headers','handleMasterCardWebhook','handlePlisioWebhook','Rapyd\x20webhook\x20processing\x20error:','===\x20PLISIO\x20WEBHOOK\x20RECEIVED\x20===','Received\x20KLYME\x20webhook:','MasterCard\x20webhook\x20processing\x20failed','log','1AUurxd','mastercard','processCoinToPayWebhook','Noda\x20webhook\x20processing\x20error:','KLYME\x20webhook\x20processing\x20error:','6556595VopPTP','message'];a15_0x19df=function(){return _0x32083f;};return a15_0x19df();}Object['defineProperty'](exports,a15_0x1c9271(0x206),{'value':!![]}),exports[a15_0x1c9271(0x226)]=void 0x0;const webhookService_1=require('../services/webhookService'),loggerService_1=require(a15_0x1c9271(0x20e));class WebhookController{constructor(){const _0x53f567=a15_0x1c9271;this[_0x53f567(0x1f0)]=async(_0x3cf83c,_0x546690,_0x908607)=>{const _0x121f1c=_0x53f567;try{console[_0x121f1c(0x1f5)](_0x121f1c(0x1f2)),console[_0x121f1c(0x1f5)](_0x121f1c(0x21a),_0x3cf83c['get'](_0x121f1c(0x1e9))),console[_0x121f1c(0x1f5)](_0x121f1c(0x22d),typeof _0x3cf83c[_0x121f1c(0x215)]),console[_0x121f1c(0x1f5)](_0x121f1c(0x22c),Object[_0x121f1c(0x203)](_0x3cf83c[_0x121f1c(0x215)]||{})),console[_0x121f1c(0x1f5)](_0x121f1c(0x22b),_0x3cf83c[_0x121f1c(0x215)]),loggerService_1[_0x121f1c(0x208)]['logWebhookReceived'](_0x121f1c(0x21d),_0x3cf83c[_0x121f1c(0x215)],_0x3cf83c['headers']);const _0x537a4f=await this[_0x121f1c(0x1e6)][_0x121f1c(0x227)](_0x3cf83c[_0x121f1c(0x215)]);_0x546690[_0x121f1c(0x210)](0xc8)[_0x121f1c(0x20f)]({'success':!![],'message':_0x121f1c(0x1fd)});}catch(_0x47c388){console[_0x121f1c(0x1ea)]('Webhook\x20processing\x20error:',_0x47c388),loggerService_1[_0x121f1c(0x208)]['logWebhookError'](_0x121f1c(0x21d),_0x47c388,_0x3cf83c[_0x121f1c(0x215)]),_0x546690['status'](0xc8)[_0x121f1c(0x20f)]({'success':![],'message':_0x47c388 instanceof Error?_0x47c388[_0x121f1c(0x1fc)]:_0x121f1c(0x214)});}},this[_0x53f567(0x1e4)]=async(_0x341f00,_0x939fac,_0x4935b0)=>{const _0x22409b=_0x53f567;try{console['log'](_0x22409b(0x200)),console['log'](_0x22409b(0x21a),_0x341f00[_0x22409b(0x223)](_0x22409b(0x1e9))),console[_0x22409b(0x1f5)](_0x22409b(0x22d),typeof _0x341f00[_0x22409b(0x215)]),console[_0x22409b(0x1f5)](_0x22409b(0x22c),Object[_0x22409b(0x203)](_0x341f00[_0x22409b(0x215)]||{})),console['log'](_0x22409b(0x22b),_0x341f00[_0x22409b(0x215)]),loggerService_1[_0x22409b(0x208)][_0x22409b(0x212)](_0x22409b(0x20b),_0x341f00[_0x22409b(0x215)],_0x341f00['headers']);const _0x1265e4=await this[_0x22409b(0x1e6)]['processPlisioGatewayWebhook'](_0x341f00[_0x22409b(0x215)]);_0x939fac[_0x22409b(0x210)](0xc8)[_0x22409b(0x20f)]({'success':!![],'message':'Gateway\x20webhook\x20processed\x20successfully'});}catch(_0x57efac){console[_0x22409b(0x1ea)](_0x22409b(0x209),_0x57efac),loggerService_1[_0x22409b(0x208)]['logWebhookError']('plisio_gateway',_0x57efac,_0x341f00[_0x22409b(0x215)]),_0x939fac[_0x22409b(0x210)](0xc8)[_0x22409b(0x20f)]({'success':![],'message':_0x57efac instanceof Error?_0x57efac[_0x22409b(0x1fc)]:'Gateway\x20webhook\x20processing\x20failed'});}},this['handleRapydWebhook']=async(_0x187729,_0x5d4373,_0x481942)=>{const _0x369233=_0x53f567;try{console[_0x369233(0x1f5)](_0x369233(0x1eb),_0x187729[_0x369233(0x215)]),loggerService_1['loggerService'][_0x369233(0x212)]('rapyd',_0x187729['body'],_0x187729['headers']);const _0x9794c8=await this['webhookService'][_0x369233(0x221)](_0x187729['body']);_0x5d4373[_0x369233(0x210)](0xc8)[_0x369233(0x20f)]({'success':!![],'message':_0x369233(0x20d)});}catch(_0x4bb299){console['error'](_0x369233(0x1f1),_0x4bb299),loggerService_1[_0x369233(0x208)]['logWebhookError'](_0x369233(0x205),_0x4bb299,_0x187729[_0x369233(0x215)]),_0x5d4373[_0x369233(0x210)](0xc8)[_0x369233(0x20f)]({'success':![],'message':_0x4bb299 instanceof Error?_0x4bb299['message']:_0x369233(0x20a)});}},this[_0x53f567(0x217)]=async(_0x4f5f56,_0x571e28,_0x3434dd)=>{const _0x277915=_0x53f567;try{console[_0x277915(0x1f5)](_0x277915(0x1ff),_0x4f5f56[_0x277915(0x215)]),loggerService_1[_0x277915(0x208)][_0x277915(0x212)](_0x277915(0x220),_0x4f5f56[_0x277915(0x215)],_0x4f5f56[_0x277915(0x1ee)]);const _0x5797a4=await this['webhookService']['processNodaWebhook'](_0x4f5f56[_0x277915(0x215)]);_0x571e28[_0x277915(0x210)](0xc8)[_0x277915(0x20f)]({'success':!![],'message':_0x277915(0x20c)});}catch(_0x421616){console['error'](_0x277915(0x1f9),_0x421616),loggerService_1['loggerService'][_0x277915(0x218)]('noda',_0x421616,_0x4f5f56['body']),_0x571e28[_0x277915(0x210)](0xc8)[_0x277915(0x20f)]({'success':![],'message':_0x421616 instanceof Error?_0x421616[_0x277915(0x1fc)]:_0x277915(0x201)});}},this[_0x53f567(0x207)]=async(_0xf64f3a,_0x19e9a7,_0x3cd72f)=>{const _0x5ffc8e=_0x53f567;try{console['log'](_0x5ffc8e(0x1ed),_0xf64f3a[_0x5ffc8e(0x215)]),loggerService_1[_0x5ffc8e(0x208)][_0x5ffc8e(0x212)]('cointopay',_0xf64f3a[_0x5ffc8e(0x215)],_0xf64f3a[_0x5ffc8e(0x1ee)]);const _0x11cf12=await this[_0x5ffc8e(0x1e6)][_0x5ffc8e(0x1f8)](_0xf64f3a[_0x5ffc8e(0x215)]);_0x19e9a7[_0x5ffc8e(0x210)](0xc8)[_0x5ffc8e(0x20f)]({'success':!![],'message':_0x5ffc8e(0x22a)});}catch(_0x5364d4){console[_0x5ffc8e(0x1ea)](_0x5ffc8e(0x1e5),_0x5364d4),loggerService_1['loggerService'][_0x5ffc8e(0x218)](_0x5ffc8e(0x222),_0x5364d4,_0xf64f3a[_0x5ffc8e(0x215)]),_0x19e9a7[_0x5ffc8e(0x210)](0xc8)[_0x5ffc8e(0x20f)]({'success':![],'message':_0x5364d4 instanceof Error?_0x5364d4['message']:_0x5ffc8e(0x216)});}},this['handleKlymeWebhook']=async(_0x389e2e,_0x34a299,_0xbba7be)=>{const _0x10ca05=_0x53f567;try{console['log'](_0x10ca05(0x1f3),_0x389e2e['body']),loggerService_1[_0x10ca05(0x208)]['logWebhookReceived']('klyme',_0x389e2e[_0x10ca05(0x215)],_0x389e2e[_0x10ca05(0x1ee)]);const _0x13697e=await this[_0x10ca05(0x1e6)][_0x10ca05(0x202)](_0x389e2e[_0x10ca05(0x215)]);_0x34a299[_0x10ca05(0x210)](0xc8)[_0x10ca05(0x20f)]({'success':!![],'message':_0x10ca05(0x211)});}catch(_0x358b67){console[_0x10ca05(0x1ea)](_0x10ca05(0x1fa),_0x358b67),loggerService_1['loggerService'][_0x10ca05(0x218)](_0x10ca05(0x229),_0x358b67,_0x389e2e[_0x10ca05(0x215)]),_0x34a299[_0x10ca05(0x210)](0xc8)[_0x10ca05(0x20f)]({'success':![],'message':_0x358b67 instanceof Error?_0x358b67[_0x10ca05(0x1fc)]:'KLYME\x20webhook\x20processing\x20failed'});}},this[_0x53f567(0x1ef)]=async(_0x24bffd,_0x13db36,_0x268120)=>{const _0x1c1a1e=_0x53f567;try{console[_0x1c1a1e(0x1f5)](_0x1c1a1e(0x225),_0x24bffd[_0x1c1a1e(0x215)]),loggerService_1[_0x1c1a1e(0x208)]['logWebhookReceived']('mastercard',_0x24bffd['body'],_0x24bffd[_0x1c1a1e(0x1ee)]);const _0x4d0f1a=await this[_0x1c1a1e(0x1e6)]['processMasterCardWebhook'](_0x24bffd[_0x1c1a1e(0x215)]);_0x13db36['status'](0xc8)[_0x1c1a1e(0x20f)]({'success':!![],'message':_0x1c1a1e(0x1e7)});}catch(_0x28dea8){console['error'](_0x1c1a1e(0x22e),_0x28dea8),loggerService_1['loggerService'][_0x1c1a1e(0x218)](_0x1c1a1e(0x1f7),_0x28dea8,_0x24bffd[_0x1c1a1e(0x215)]),_0x13db36[_0x1c1a1e(0x210)](0xc8)[_0x1c1a1e(0x20f)]({'success':![],'message':_0x28dea8 instanceof Error?_0x28dea8[_0x1c1a1e(0x1fc)]:_0x1c1a1e(0x1f4)});}},this['webhookService']=new webhookService_1[(_0x53f567(0x21f))]();}}exports[a15_0x1c9271(0x226)]=WebhookController;