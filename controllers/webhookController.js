'use strict';const a17_0x53950e=a17_0x10a1;(function(_0x2a809f,_0x4044c8){const _0x3220c4=a17_0x10a1,_0x4c3bc6=_0x2a809f();while(!![]){try{const _0x52bfb9=parseInt(_0x3220c4(0x103))/0x1+-parseInt(_0x3220c4(0xd7))/0x2+-parseInt(_0x3220c4(0x12b))/0x3+parseInt(_0x3220c4(0xfa))/0x4*(-parseInt(_0x3220c4(0x111))/0x5)+-parseInt(_0x3220c4(0x138))/0x6*(parseInt(_0x3220c4(0x132))/0x7)+parseInt(_0x3220c4(0x136))/0x8+parseInt(_0x3220c4(0xfc))/0x9;if(_0x52bfb9===_0x4044c8)break;else _0x4c3bc6['push'](_0x4c3bc6['shift']());}catch(_0x31fb3f){_0x4c3bc6['push'](_0x4c3bc6['shift']());}}}(a17_0x3b5b,0x3928d));Object[a17_0x53950e(0xec)](exports,'__esModule',{'value':!![]}),exports[a17_0x53950e(0x12f)]=void 0x0;function a17_0x10a1(_0x450d30,_0x3a7aa5){const _0x3b5ba5=a17_0x3b5b();return a17_0x10a1=function(_0x10a1ba,_0x3bee99){_0x10a1ba=_0x10a1ba-0xd2;let _0x609418=_0x3b5ba5[_0x10a1ba];return _0x609418;},a17_0x10a1(_0x450d30,_0x3a7aa5);}function a17_0x3b5b(){const _0x2e7cc6=['Webhook\x20processing\x20error:','Rapyd\x20webhook\x20processing\x20error:','KLYME\x20webhook\x20processing\x20error:','MyXSpend\x20webhook\x20processing\x20error:','handleCoinToPay2Webhook','VISA\x20webhook\x20processing\x20failed','Amer\x20webhook\x20processing\x20error:','ampay_try','Received\x20VISA\x20webhook:','log','AmPay\x20TRY\x20webhook\x20processed\x20successfully','handlePlisioWebhook','CoinToPay\x20webhook\x20processed\x20successfully','../services/webhookService','plisio','CoinToPay2\x20webhook\x20processed\x20successfully','1329027zbNBIf','Webhook\x20processing\x20failed','cointopay2','processNodaWebhook','WebhookController','klyme','headers','959nGZHpK','Headers:','Rapyd\x20webhook\x20processing\x20failed','MasterCard\x20webhook\x20processing\x20failed','2807504rPQxlR','AmPay\x20webhook\x20processed\x20successfully','1128pqorjT','KLYME\x20webhook\x20processed\x20successfully','Body:','processCoinToPay2Webhook','processAmPayWebhook','===\x20PLISIO\x20WEBHOOK\x20RECEIVED\x20===','KLYME\x20webhook\x20processing\x20failed','AmPay\x20TRY\x20webhook\x20processing\x20failed','CoinToPay2\x20webhook\x20processing\x20failed','385240NCNGHP','handleNodaWebhook','method','processPlisioGatewayWebhook','noda','mastercard','Received\x20MasterCard\x20webhook:','status','Received\x20Amer\x20webhook:','handleMyXSpendWebhook','Received\x20KLYME\x20webhook:','rapyd','Noda\x20webhook\x20processing\x20error:','Amer\x20webhook\x20processing\x20failed','logWebhookError','amer','MyXSpend\x20webhook\x20processing\x20failed','handleAmerWebhook','AmPay\x20webhook\x20processing\x20failed','Received\x20CoinToPay\x20webhook:','loggerService','defineProperty','processKlymeWebhook','Body\x20keys:','===\x20AmPay\x20Webhook\x20Received\x20===','Raw\x20body\x20type:','processMasterCardWebhook','query','Content-Type:','processAmerWebhook','ampay','processAmPayTRYWebhook','Body\x20content:','MasterCard\x20webhook\x20processed\x20successfully','logWebhookReceived','740inoWxW','processMyXSpendWebhook','3299328TtEVJU','handleAmPayTRYWebhook','Received\x20Noda\x20webhook:','processCoinToPayWebhook','MasterCard\x20webhook\x20processing\x20error:','===\x20PLISIO\x20GATEWAY\x20WEBHOOK\x20RECEIVED\x20===','body','392210GSGUPH','Received\x20CoinToPay2\x20webhook:','handleVisaWebhook','CoinToPay2\x20webhook\x20processing\x20error:','AmPay\x20webhook\x20processing\x20error:','error','WebhookService','plisio_gateway','cointopay','Content-Type','json','===\x20AmPay\x20TRY\x20Webhook\x20Received\x20===','myxspend','Method:','5790VYVWjg','visa','message','Received\x20Rapyd\x20webhook:','keys','webhookService','Gateway\x20webhook\x20processing\x20error:','Gateway\x20webhook\x20processed\x20successfully','AmPay\x20TRY\x20webhook\x20processing\x20error:','Webhook\x20processed\x20successfully'];a17_0x3b5b=function(){return _0x2e7cc6;};return a17_0x3b5b();}const webhookService_1=require(a17_0x53950e(0x128)),loggerService_1=require('../services/loggerService');class WebhookController{constructor(){const _0x401d6d=a17_0x53950e;this[_0x401d6d(0x126)]=async(_0x5ae71d,_0x3d3d5b,_0x4c454c)=>{const _0x255009=_0x401d6d;try{console[_0x255009(0x124)](_0x255009(0xd3)),console['log'](_0x255009(0xf3),_0x5ae71d['get'](_0x255009(0x10c))),console[_0x255009(0x124)](_0x255009(0xf0),typeof _0x5ae71d['body']),console[_0x255009(0x124)](_0x255009(0xee),Object[_0x255009(0x115)](_0x5ae71d[_0x255009(0x102)]||{})),console['log'](_0x255009(0xf7),_0x5ae71d[_0x255009(0x102)]),loggerService_1['loggerService'][_0x255009(0xf9)](_0x255009(0x129),_0x5ae71d[_0x255009(0x102)],_0x5ae71d[_0x255009(0x131)]);const _0x6cc94b=await this['webhookService']['processPlisioWebhook'](_0x5ae71d[_0x255009(0x102)]);_0x3d3d5b[_0x255009(0xde)](0xc8)[_0x255009(0x10d)]({'success':!![],'message':_0x255009(0x11a)});}catch(_0x73b889){console[_0x255009(0x108)](_0x255009(0x11b),_0x73b889),loggerService_1['loggerService'][_0x255009(0xe5)](_0x255009(0x129),_0x73b889,_0x5ae71d[_0x255009(0x102)]),_0x3d3d5b['status'](0xc8)[_0x255009(0x10d)]({'success':![],'message':_0x73b889 instanceof Error?_0x73b889[_0x255009(0x113)]:_0x255009(0x12c)});}},this['handlePlisioGatewayWebhook']=async(_0x17b5bd,_0xb16675,_0x36468b)=>{const _0x838f9f=_0x401d6d;try{console[_0x838f9f(0x124)](_0x838f9f(0x101)),console[_0x838f9f(0x124)](_0x838f9f(0xf3),_0x17b5bd['get']('Content-Type')),console[_0x838f9f(0x124)]('Raw\x20body\x20type:',typeof _0x17b5bd[_0x838f9f(0x102)]),console['log']('Body\x20keys:',Object[_0x838f9f(0x115)](_0x17b5bd[_0x838f9f(0x102)]||{})),console[_0x838f9f(0x124)]('Body\x20content:',_0x17b5bd[_0x838f9f(0x102)]),loggerService_1[_0x838f9f(0xeb)][_0x838f9f(0xf9)]('plisio_gateway',_0x17b5bd[_0x838f9f(0x102)],_0x17b5bd[_0x838f9f(0x131)]);const _0x49ac62=await this['webhookService'][_0x838f9f(0xda)](_0x17b5bd[_0x838f9f(0x102)]);_0xb16675[_0x838f9f(0xde)](0xc8)[_0x838f9f(0x10d)]({'success':!![],'message':_0x838f9f(0x118)});}catch(_0x1e397b){console[_0x838f9f(0x108)](_0x838f9f(0x117),_0x1e397b),loggerService_1[_0x838f9f(0xeb)][_0x838f9f(0xe5)](_0x838f9f(0x10a),_0x1e397b,_0x17b5bd['body']),_0xb16675['status'](0xc8)[_0x838f9f(0x10d)]({'success':![],'message':_0x1e397b instanceof Error?_0x1e397b['message']:'Gateway\x20webhook\x20processing\x20failed'});}},this['handleRapydWebhook']=async(_0x206be3,_0x55b162,_0x2b295b)=>{const _0x3da906=_0x401d6d;try{console['log'](_0x3da906(0x114),_0x206be3['body']),loggerService_1[_0x3da906(0xeb)][_0x3da906(0xf9)](_0x3da906(0xe2),_0x206be3[_0x3da906(0x102)],_0x206be3[_0x3da906(0x131)]);const _0x3f7e13=await this[_0x3da906(0x116)]['processRapydWebhook'](_0x206be3[_0x3da906(0x102)]);_0x55b162['status'](0xc8)[_0x3da906(0x10d)]({'success':!![],'message':'Rapyd\x20webhook\x20processed\x20successfully'});}catch(_0x27f6f1){console[_0x3da906(0x108)](_0x3da906(0x11c),_0x27f6f1),loggerService_1[_0x3da906(0xeb)][_0x3da906(0xe5)](_0x3da906(0xe2),_0x27f6f1,_0x206be3[_0x3da906(0x102)]),_0x55b162[_0x3da906(0xde)](0xc8)[_0x3da906(0x10d)]({'success':![],'message':_0x27f6f1 instanceof Error?_0x27f6f1[_0x3da906(0x113)]:_0x3da906(0x134)});}},this[_0x401d6d(0xd8)]=async(_0x488d0b,_0xedb1ed,_0xfdb20f)=>{const _0x750d0b=_0x401d6d;try{console[_0x750d0b(0x124)](_0x750d0b(0xfe),_0x488d0b[_0x750d0b(0x102)]),loggerService_1[_0x750d0b(0xeb)][_0x750d0b(0xf9)](_0x750d0b(0xdb),_0x488d0b[_0x750d0b(0x102)],_0x488d0b['headers']);const _0x4d40ea=await this['webhookService'][_0x750d0b(0x12e)](_0x488d0b[_0x750d0b(0x102)]);_0xedb1ed[_0x750d0b(0xde)](0xc8)['json']({'success':!![],'message':'Noda\x20webhook\x20processed\x20successfully'});}catch(_0x86853d){console[_0x750d0b(0x108)](_0x750d0b(0xe3),_0x86853d),loggerService_1['loggerService'][_0x750d0b(0xe5)](_0x750d0b(0xdb),_0x86853d,_0x488d0b[_0x750d0b(0x102)]),_0xedb1ed[_0x750d0b(0xde)](0xc8)[_0x750d0b(0x10d)]({'success':![],'message':_0x86853d instanceof Error?_0x86853d[_0x750d0b(0x113)]:'Noda\x20webhook\x20processing\x20failed'});}},this['handleCoinToPayWebhook']=async(_0x116bbf,_0x28f645,_0x4b860e)=>{const _0x287f0b=_0x401d6d;try{console[_0x287f0b(0x124)](_0x287f0b(0xea),_0x116bbf['body']),loggerService_1[_0x287f0b(0xeb)]['logWebhookReceived']('cointopay',_0x116bbf[_0x287f0b(0x102)],_0x116bbf['headers']);const _0x5907b5=await this[_0x287f0b(0x116)][_0x287f0b(0xff)](_0x116bbf[_0x287f0b(0x102)]);_0x28f645['status'](0xc8)[_0x287f0b(0x10d)]({'success':!![],'message':_0x287f0b(0x127)});}catch(_0x1f9e40){console[_0x287f0b(0x108)]('CoinToPay\x20webhook\x20processing\x20error:',_0x1f9e40),loggerService_1[_0x287f0b(0xeb)][_0x287f0b(0xe5)](_0x287f0b(0x10b),_0x1f9e40,_0x116bbf['body']),_0x28f645['status'](0xc8)[_0x287f0b(0x10d)]({'success':![],'message':_0x1f9e40 instanceof Error?_0x1f9e40[_0x287f0b(0x113)]:'CoinToPay\x20webhook\x20processing\x20failed'});}},this[_0x401d6d(0x11f)]=async(_0x4b0b3c,_0x461819,_0x29a893)=>{const _0x1f8a0a=_0x401d6d;try{console[_0x1f8a0a(0x124)](_0x1f8a0a(0x104),_0x4b0b3c[_0x1f8a0a(0x102)]),loggerService_1[_0x1f8a0a(0xeb)]['logWebhookReceived'](_0x1f8a0a(0x12d),_0x4b0b3c[_0x1f8a0a(0x102)],_0x4b0b3c[_0x1f8a0a(0x131)]);const _0x479fee=await this[_0x1f8a0a(0x116)][_0x1f8a0a(0x13b)](_0x4b0b3c[_0x1f8a0a(0x102)]);_0x461819[_0x1f8a0a(0xde)](0xc8)[_0x1f8a0a(0x10d)]({'success':!![],'message':_0x1f8a0a(0x12a)});}catch(_0x3785c6){console['error'](_0x1f8a0a(0x106),_0x3785c6),loggerService_1[_0x1f8a0a(0xeb)][_0x1f8a0a(0xe5)]('cointopay2',_0x3785c6,_0x4b0b3c[_0x1f8a0a(0x102)]),_0x461819[_0x1f8a0a(0xde)](0xc8)[_0x1f8a0a(0x10d)]({'success':![],'message':_0x3785c6 instanceof Error?_0x3785c6[_0x1f8a0a(0x113)]:_0x1f8a0a(0xd6)});}},this['handleKlymeWebhook']=async(_0x237ddd,_0x5eaeb1,_0x4899aa)=>{const _0x2e9037=_0x401d6d;try{console['log'](_0x2e9037(0xe1),_0x237ddd[_0x2e9037(0x102)]),loggerService_1[_0x2e9037(0xeb)]['logWebhookReceived'](_0x2e9037(0x130),_0x237ddd['body'],_0x237ddd['headers']);const _0x37ee53=await this[_0x2e9037(0x116)][_0x2e9037(0xed)](_0x237ddd[_0x2e9037(0x102)]);_0x5eaeb1[_0x2e9037(0xde)](0xc8)['json']({'success':!![],'message':_0x2e9037(0x139)});}catch(_0x5ded87){console['error'](_0x2e9037(0x11d),_0x5ded87),loggerService_1['loggerService'][_0x2e9037(0xe5)](_0x2e9037(0x130),_0x5ded87,_0x237ddd[_0x2e9037(0x102)]),_0x5eaeb1['status'](0xc8)[_0x2e9037(0x10d)]({'success':![],'message':_0x5ded87 instanceof Error?_0x5ded87[_0x2e9037(0x113)]:_0x2e9037(0xd4)});}},this[_0x401d6d(0x105)]=async(_0x4d62fc,_0x24cca5,_0x4a6462)=>{const _0x513957=_0x401d6d;try{console[_0x513957(0x124)](_0x513957(0x123),_0x4d62fc[_0x513957(0x102)]),loggerService_1['loggerService'][_0x513957(0xf9)](_0x513957(0x112),_0x4d62fc[_0x513957(0x102)],_0x4d62fc['headers']);const _0x145b3e=await this[_0x513957(0x116)]['processVisaWebhook'](_0x4d62fc[_0x513957(0x102)]);_0x24cca5[_0x513957(0xde)](0xc8)['json']({'success':!![],'message':'VISA\x20webhook\x20processed\x20successfully'});}catch(_0x47c9d3){console['error']('VISA\x20webhook\x20processing\x20error:',_0x47c9d3),loggerService_1[_0x513957(0xeb)]['logWebhookError'](_0x513957(0x112),_0x47c9d3,_0x4d62fc[_0x513957(0x102)]),_0x24cca5[_0x513957(0xde)](0xc8)['json']({'success':![],'message':_0x47c9d3 instanceof Error?_0x47c9d3[_0x513957(0x113)]:_0x513957(0x120)});}},this['handleMasterCardWebhook']=async(_0x2c0ec5,_0x146a78,_0x2f94e4)=>{const _0x2d4885=_0x401d6d;try{console[_0x2d4885(0x124)](_0x2d4885(0xdd),_0x2c0ec5[_0x2d4885(0x102)]),loggerService_1['loggerService']['logWebhookReceived']('mastercard',_0x2c0ec5['body'],_0x2c0ec5[_0x2d4885(0x131)]);const _0x541d95=await this[_0x2d4885(0x116)][_0x2d4885(0xf1)](_0x2c0ec5[_0x2d4885(0x102)]);_0x146a78[_0x2d4885(0xde)](0xc8)['json']({'success':!![],'message':_0x2d4885(0xf8)});}catch(_0x41463b){console[_0x2d4885(0x108)](_0x2d4885(0x100),_0x41463b),loggerService_1[_0x2d4885(0xeb)][_0x2d4885(0xe5)](_0x2d4885(0xdc),_0x41463b,_0x2c0ec5[_0x2d4885(0x102)]),_0x146a78[_0x2d4885(0xde)](0xc8)[_0x2d4885(0x10d)]({'success':![],'message':_0x41463b instanceof Error?_0x41463b[_0x2d4885(0x113)]:_0x2d4885(0x135)});}},this[_0x401d6d(0xe8)]=async(_0x1e0fee,_0x12ab07,_0x550698)=>{const _0x365356=_0x401d6d;try{console[_0x365356(0x124)](_0x365356(0xdf),_0x1e0fee[_0x365356(0x102)]),loggerService_1['loggerService'][_0x365356(0xf9)](_0x365356(0xe6),_0x1e0fee[_0x365356(0x102)],_0x1e0fee['headers']);const _0x123be0=await this['webhookService'][_0x365356(0xf4)](_0x1e0fee[_0x365356(0x102)]);_0x12ab07[_0x365356(0xde)](0xc8)[_0x365356(0x10d)]({'success':!![],'message':'Amer\x20webhook\x20processed\x20successfully'});}catch(_0x195409){console[_0x365356(0x108)](_0x365356(0x121),_0x195409),loggerService_1[_0x365356(0xeb)]['logWebhookError']('amer',_0x195409,_0x1e0fee[_0x365356(0x102)]),_0x12ab07[_0x365356(0xde)](0xc8)[_0x365356(0x10d)]({'success':![],'message':_0x195409 instanceof Error?_0x195409[_0x365356(0x113)]:_0x365356(0xe4)});}},this['handleAmPayWebhook']=async(_0x409487,_0x3c097b,_0x36a1d9)=>{const _0x4ccd72=_0x401d6d;try{console['log'](_0x4ccd72(0xef)),console[_0x4ccd72(0x124)](_0x4ccd72(0x133),_0x409487[_0x4ccd72(0x131)]),console[_0x4ccd72(0x124)](_0x4ccd72(0x13a),_0x409487['body']),console[_0x4ccd72(0x124)]('Body\x20type:',typeof _0x409487['body']),console['log'](_0x4ccd72(0xee),Object[_0x4ccd72(0x115)](_0x409487[_0x4ccd72(0x102)]||{})),loggerService_1[_0x4ccd72(0xeb)]['logWebhookReceived'](_0x4ccd72(0xf5),_0x409487[_0x4ccd72(0x102)],_0x409487['headers']);const _0x5bbe8e=await this[_0x4ccd72(0x116)][_0x4ccd72(0xd2)](_0x409487[_0x4ccd72(0x102)]);_0x3c097b[_0x4ccd72(0xde)](0xc8)['json']({'success':!![],'message':_0x4ccd72(0x137)});}catch(_0x52d74a){console[_0x4ccd72(0x108)](_0x4ccd72(0x107),_0x52d74a),loggerService_1['loggerService'][_0x4ccd72(0xe5)]('ampay',_0x52d74a,_0x409487[_0x4ccd72(0x102)]),_0x3c097b['status'](0xc8)[_0x4ccd72(0x10d)]({'success':![],'message':_0x52d74a instanceof Error?_0x52d74a[_0x4ccd72(0x113)]:_0x4ccd72(0xe9)});}},this[_0x401d6d(0xfd)]=async(_0x5f0239,_0x68fa1d,_0x515e72)=>{const _0x35bb97=_0x401d6d;try{console['log'](_0x35bb97(0x10e)),console[_0x35bb97(0x124)](_0x35bb97(0x133),_0x5f0239['headers']),console[_0x35bb97(0x124)](_0x35bb97(0x13a),_0x5f0239['body']),console[_0x35bb97(0x124)]('Body\x20type:',typeof _0x5f0239[_0x35bb97(0x102)]),console['log'](_0x35bb97(0xee),Object['keys'](_0x5f0239[_0x35bb97(0x102)]||{})),loggerService_1[_0x35bb97(0xeb)]['logWebhookReceived'](_0x35bb97(0x122),_0x5f0239[_0x35bb97(0x102)],_0x5f0239[_0x35bb97(0x131)]);const _0x525d7e=await this[_0x35bb97(0x116)][_0x35bb97(0xf6)](_0x5f0239['body']);_0x68fa1d[_0x35bb97(0xde)](0xc8)[_0x35bb97(0x10d)]({'success':!![],'message':_0x35bb97(0x125)});}catch(_0x37d593){console[_0x35bb97(0x108)](_0x35bb97(0x119),_0x37d593),loggerService_1[_0x35bb97(0xeb)][_0x35bb97(0xe5)](_0x35bb97(0x122),_0x37d593,_0x5f0239[_0x35bb97(0x102)]),_0x68fa1d['status'](0xc8)[_0x35bb97(0x10d)]({'success':![],'message':_0x37d593 instanceof Error?_0x37d593[_0x35bb97(0x113)]:_0x35bb97(0xd5)});}},this[_0x401d6d(0xe0)]=async(_0x4b33e0,_0x2c3c2a,_0x521b7e)=>{const _0x331355=_0x401d6d;try{console[_0x331355(0x124)]('===\x20MyXSpend\x20Webhook\x20Received\x20==='),console['log'](_0x331355(0x133),_0x4b33e0[_0x331355(0x131)]),console['log']('Query\x20params:',_0x4b33e0['query']),console[_0x331355(0x124)](_0x331355(0x13a),_0x4b33e0[_0x331355(0x102)]),console[_0x331355(0x124)](_0x331355(0x110),_0x4b33e0[_0x331355(0xd9)]),loggerService_1[_0x331355(0xeb)][_0x331355(0xf9)](_0x331355(0x10f),_0x4b33e0[_0x331355(0x102)]||_0x4b33e0[_0x331355(0xf2)],_0x4b33e0[_0x331355(0x131)]);const _0x4ce83b=await this[_0x331355(0x116)][_0x331355(0xfb)](_0x4b33e0[_0x331355(0xf2)],_0x4b33e0[_0x331355(0x102)]);_0x2c3c2a['status'](0xc8)['json']({'success':!![],'message':'MyXSpend\x20webhook\x20processed\x20successfully'});}catch(_0x33fceb){console[_0x331355(0x108)](_0x331355(0x11e),_0x33fceb),loggerService_1[_0x331355(0xeb)]['logWebhookError'](_0x331355(0x10f),_0x33fceb,_0x4b33e0[_0x331355(0x102)]||_0x4b33e0[_0x331355(0xf2)]),_0x2c3c2a[_0x331355(0xde)](0xc8)[_0x331355(0x10d)]({'success':![],'message':_0x33fceb instanceof Error?_0x33fceb['message']:_0x331355(0xe7)});}},this[_0x401d6d(0x116)]=new webhookService_1[(_0x401d6d(0x109))]();}}exports[a17_0x53950e(0x12f)]=WebhookController;