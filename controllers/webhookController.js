'use strict';const a15_0x37e6b3=a15_0x2dc9;(function(_0x202cc3,_0x13780a){const _0x9864d2=a15_0x2dc9,_0x3b67dd=_0x202cc3();while(!![]){try{const _0xf22571=parseInt(_0x9864d2(0x19b))/0x1+-parseInt(_0x9864d2(0x185))/0x2+-parseInt(_0x9864d2(0x188))/0x3*(-parseInt(_0x9864d2(0x1a4))/0x4)+parseInt(_0x9864d2(0x1a7))/0x5*(-parseInt(_0x9864d2(0x1a6))/0x6)+-parseInt(_0x9864d2(0x1b4))/0x7*(-parseInt(_0x9864d2(0x1a9))/0x8)+-parseInt(_0x9864d2(0x1a8))/0x9*(parseInt(_0x9864d2(0x1ab))/0xa)+parseInt(_0x9864d2(0x1c0))/0xb*(-parseInt(_0x9864d2(0x184))/0xc);if(_0xf22571===_0x13780a)break;else _0x3b67dd['push'](_0x3b67dd['shift']());}catch(_0x147ec8){_0x3b67dd['push'](_0x3b67dd['shift']());}}}(a15_0xda20,0x20361));function a15_0xda20(){const _0x4672d9=['error','processAmerWebhook','12WJmmmA','243284lkxPuJ','Raw\x20body\x20type:','mastercard','349536VhlklP','handlePlisioGatewayWebhook','Webhook\x20processed\x20successfully','Gateway\x20webhook\x20processed\x20successfully','WebhookController','Received\x20Noda\x20webhook:','json','handlePlisioWebhook','Body\x20keys:','log','KLYME\x20webhook\x20processing\x20failed','status','processRapydWebhook','get','noda','handleAmerWebhook','Body:','headers','VISA\x20webhook\x20processing\x20error:','104970LRYXdW','cointopay2','__esModule','Rapyd\x20webhook\x20processed\x20successfully','logWebhookReceived','WebhookService','webhookService','handleKlymeWebhook','body','8WrxjwX','handleMasterCardWebhook','12kOoiIs','402425ReiJdw','21501BaQaxu','808XfNzCt','keys','10otWNNm','Content-Type','Amer\x20webhook\x20processing\x20error:','Webhook\x20processing\x20failed','../services/webhookService','AmPay\x20webhook\x20processing\x20failed','MasterCard\x20webhook\x20processed\x20successfully','handleNodaWebhook','Webhook\x20processing\x20error:','14315NDpRTJ','loggerService','cointopay','rapyd','KLYME\x20webhook\x20processed\x20successfully','Noda\x20webhook\x20processed\x20successfully','handleVisaWebhook','amer','===\x20PLISIO\x20GATEWAY\x20WEBHOOK\x20RECEIVED\x20===','CoinToPay2\x20webhook\x20processing\x20failed','plisio','Received\x20Amer\x20webhook:','1403611Crjkjc','ampay','CoinToPay\x20webhook\x20processing\x20error:','Received\x20KLYME\x20webhook:','logWebhookError','handleCoinToPayWebhook','visa','Content-Type:','processPlisioWebhook','CoinToPay2\x20webhook\x20processing\x20error:','klyme','===\x20AmPay\x20Webhook\x20Received\x20===','Gateway\x20webhook\x20processing\x20error:','Rapyd\x20webhook\x20processing\x20failed','Noda\x20webhook\x20processing\x20failed','AmPay\x20webhook\x20processed\x20successfully','plisio_gateway','CoinToPay2\x20webhook\x20processed\x20successfully','MasterCard\x20webhook\x20processing\x20error:','processCoinToPay2Webhook','message','processMasterCardWebhook','defineProperty','handleRapydWebhook','Gateway\x20webhook\x20processing\x20failed','KLYME\x20webhook\x20processing\x20error:','processAmPayWebhook','VISA\x20webhook\x20processing\x20failed','Received\x20MasterCard\x20webhook:','Amer\x20webhook\x20processing\x20failed','CoinToPay\x20webhook\x20processed\x20successfully','processKlymeWebhook','handleAmPayWebhook','Body\x20content:'];a15_0xda20=function(){return _0x4672d9;};return a15_0xda20();}Object[a15_0x37e6b3(0x1d6)](exports,a15_0x37e6b3(0x19d),{'value':!![]}),exports[a15_0x37e6b3(0x18c)]=void 0x0;const webhookService_1=require(a15_0x37e6b3(0x1af)),loggerService_1=require('../services/loggerService');function a15_0x2dc9(_0x56939d,_0x9ff497){const _0xda2018=a15_0xda20();return a15_0x2dc9=function(_0x2dc9d2,_0x5ec792){_0x2dc9d2=_0x2dc9d2-0x178;let _0x488053=_0xda2018[_0x2dc9d2];return _0x488053;},a15_0x2dc9(_0x56939d,_0x9ff497);}class WebhookController{constructor(){const _0x150277=a15_0x37e6b3;this[_0x150277(0x18f)]=async(_0xe4f216,_0x3154d5,_0x4ca6fb)=>{const _0x152114=_0x150277;try{console[_0x152114(0x191)]('===\x20PLISIO\x20WEBHOOK\x20RECEIVED\x20==='),console['log'](_0x152114(0x1c7),_0xe4f216['get'](_0x152114(0x1ac))),console[_0x152114(0x191)](_0x152114(0x186),typeof _0xe4f216[_0x152114(0x1a3)]),console[_0x152114(0x191)]('Body\x20keys:',Object[_0x152114(0x1aa)](_0xe4f216[_0x152114(0x1a3)]||{})),console[_0x152114(0x191)](_0x152114(0x181),_0xe4f216[_0x152114(0x1a3)]),loggerService_1['loggerService']['logWebhookReceived'](_0x152114(0x1be),_0xe4f216['body'],_0xe4f216[_0x152114(0x199)]);const _0x51c09f=await this['webhookService'][_0x152114(0x1c8)](_0xe4f216[_0x152114(0x1a3)]);_0x3154d5[_0x152114(0x193)](0xc8)['json']({'success':!![],'message':_0x152114(0x18a)});}catch(_0x4e8947){console['error'](_0x152114(0x1b3),_0x4e8947),loggerService_1[_0x152114(0x1b5)][_0x152114(0x1c4)](_0x152114(0x1be),_0x4e8947,_0xe4f216[_0x152114(0x1a3)]),_0x3154d5['status'](0xc8)[_0x152114(0x18e)]({'success':![],'message':_0x4e8947 instanceof Error?_0x4e8947[_0x152114(0x1d4)]:_0x152114(0x1ae)});}},this[_0x150277(0x189)]=async(_0x27b346,_0x41d676,_0x2d184d)=>{const _0x39eb6e=_0x150277;try{console[_0x39eb6e(0x191)](_0x39eb6e(0x1bc)),console[_0x39eb6e(0x191)](_0x39eb6e(0x1c7),_0x27b346[_0x39eb6e(0x195)](_0x39eb6e(0x1ac))),console[_0x39eb6e(0x191)]('Raw\x20body\x20type:',typeof _0x27b346[_0x39eb6e(0x1a3)]),console['log'](_0x39eb6e(0x190),Object[_0x39eb6e(0x1aa)](_0x27b346[_0x39eb6e(0x1a3)]||{})),console['log'](_0x39eb6e(0x181),_0x27b346[_0x39eb6e(0x1a3)]),loggerService_1[_0x39eb6e(0x1b5)]['logWebhookReceived'](_0x39eb6e(0x1d0),_0x27b346['body'],_0x27b346[_0x39eb6e(0x199)]);const _0x16f52d=await this[_0x39eb6e(0x1a1)]['processPlisioGatewayWebhook'](_0x27b346[_0x39eb6e(0x1a3)]);_0x41d676[_0x39eb6e(0x193)](0xc8)['json']({'success':!![],'message':_0x39eb6e(0x18b)});}catch(_0x4bd6d2){console[_0x39eb6e(0x182)](_0x39eb6e(0x1cc),_0x4bd6d2),loggerService_1[_0x39eb6e(0x1b5)][_0x39eb6e(0x1c4)]('plisio_gateway',_0x4bd6d2,_0x27b346[_0x39eb6e(0x1a3)]),_0x41d676[_0x39eb6e(0x193)](0xc8)['json']({'success':![],'message':_0x4bd6d2 instanceof Error?_0x4bd6d2['message']:_0x39eb6e(0x178)});}},this[_0x150277(0x1d7)]=async(_0x58df07,_0x50d98f,_0x5db9db)=>{const _0x1e8903=_0x150277;try{console[_0x1e8903(0x191)]('Received\x20Rapyd\x20webhook:',_0x58df07[_0x1e8903(0x1a3)]),loggerService_1[_0x1e8903(0x1b5)]['logWebhookReceived']('rapyd',_0x58df07[_0x1e8903(0x1a3)],_0x58df07['headers']);const _0x19178f=await this[_0x1e8903(0x1a1)][_0x1e8903(0x194)](_0x58df07[_0x1e8903(0x1a3)]);_0x50d98f[_0x1e8903(0x193)](0xc8)[_0x1e8903(0x18e)]({'success':!![],'message':_0x1e8903(0x19e)});}catch(_0xd85440){console[_0x1e8903(0x182)]('Rapyd\x20webhook\x20processing\x20error:',_0xd85440),loggerService_1['loggerService'][_0x1e8903(0x1c4)](_0x1e8903(0x1b7),_0xd85440,_0x58df07['body']),_0x50d98f[_0x1e8903(0x193)](0xc8)[_0x1e8903(0x18e)]({'success':![],'message':_0xd85440 instanceof Error?_0xd85440[_0x1e8903(0x1d4)]:_0x1e8903(0x1cd)});}},this[_0x150277(0x1b2)]=async(_0x599a5a,_0x5d66cf,_0x9c3aa0)=>{const _0xc01d0d=_0x150277;try{console['log'](_0xc01d0d(0x18d),_0x599a5a['body']),loggerService_1[_0xc01d0d(0x1b5)][_0xc01d0d(0x19f)](_0xc01d0d(0x196),_0x599a5a[_0xc01d0d(0x1a3)],_0x599a5a[_0xc01d0d(0x199)]);const _0x23bb6b=await this['webhookService']['processNodaWebhook'](_0x599a5a[_0xc01d0d(0x1a3)]);_0x5d66cf[_0xc01d0d(0x193)](0xc8)[_0xc01d0d(0x18e)]({'success':!![],'message':_0xc01d0d(0x1b9)});}catch(_0xf1da6c){console[_0xc01d0d(0x182)]('Noda\x20webhook\x20processing\x20error:',_0xf1da6c),loggerService_1['loggerService'][_0xc01d0d(0x1c4)](_0xc01d0d(0x196),_0xf1da6c,_0x599a5a['body']),_0x5d66cf[_0xc01d0d(0x193)](0xc8)['json']({'success':![],'message':_0xf1da6c instanceof Error?_0xf1da6c[_0xc01d0d(0x1d4)]:_0xc01d0d(0x1ce)});}},this[_0x150277(0x1c5)]=async(_0x443e29,_0x1021ef,_0x18836b)=>{const _0xaa34b2=_0x150277;try{console[_0xaa34b2(0x191)]('Received\x20CoinToPay\x20webhook:',_0x443e29['body']),loggerService_1[_0xaa34b2(0x1b5)]['logWebhookReceived'](_0xaa34b2(0x1b6),_0x443e29[_0xaa34b2(0x1a3)],_0x443e29[_0xaa34b2(0x199)]);const _0x290ce6=await this[_0xaa34b2(0x1a1)]['processCoinToPayWebhook'](_0x443e29[_0xaa34b2(0x1a3)]);_0x1021ef['status'](0xc8)['json']({'success':!![],'message':_0xaa34b2(0x17e)});}catch(_0x12500c){console['error'](_0xaa34b2(0x1c2),_0x12500c),loggerService_1[_0xaa34b2(0x1b5)][_0xaa34b2(0x1c4)](_0xaa34b2(0x1b6),_0x12500c,_0x443e29[_0xaa34b2(0x1a3)]),_0x1021ef[_0xaa34b2(0x193)](0xc8)[_0xaa34b2(0x18e)]({'success':![],'message':_0x12500c instanceof Error?_0x12500c[_0xaa34b2(0x1d4)]:'CoinToPay\x20webhook\x20processing\x20failed'});}},this['handleCoinToPay2Webhook']=async(_0x53b563,_0x499a53,_0x386124)=>{const _0x458e00=_0x150277;try{console[_0x458e00(0x191)]('Received\x20CoinToPay2\x20webhook:',_0x53b563['body']),loggerService_1[_0x458e00(0x1b5)][_0x458e00(0x19f)](_0x458e00(0x19c),_0x53b563[_0x458e00(0x1a3)],_0x53b563[_0x458e00(0x199)]);const _0x1a2179=await this[_0x458e00(0x1a1)][_0x458e00(0x1d3)](_0x53b563[_0x458e00(0x1a3)]);_0x499a53[_0x458e00(0x193)](0xc8)[_0x458e00(0x18e)]({'success':!![],'message':_0x458e00(0x1d1)});}catch(_0x413fcb){console[_0x458e00(0x182)](_0x458e00(0x1c9),_0x413fcb),loggerService_1[_0x458e00(0x1b5)][_0x458e00(0x1c4)]('cointopay2',_0x413fcb,_0x53b563[_0x458e00(0x1a3)]),_0x499a53[_0x458e00(0x193)](0xc8)['json']({'success':![],'message':_0x413fcb instanceof Error?_0x413fcb['message']:_0x458e00(0x1bd)});}},this[_0x150277(0x1a2)]=async(_0x97007f,_0x15154e,_0x4c541c)=>{const _0x187f1a=_0x150277;try{console[_0x187f1a(0x191)](_0x187f1a(0x1c3),_0x97007f[_0x187f1a(0x1a3)]),loggerService_1[_0x187f1a(0x1b5)][_0x187f1a(0x19f)](_0x187f1a(0x1ca),_0x97007f[_0x187f1a(0x1a3)],_0x97007f[_0x187f1a(0x199)]);const _0x45834e=await this[_0x187f1a(0x1a1)][_0x187f1a(0x17f)](_0x97007f[_0x187f1a(0x1a3)]);_0x15154e[_0x187f1a(0x193)](0xc8)[_0x187f1a(0x18e)]({'success':!![],'message':_0x187f1a(0x1b8)});}catch(_0x5802e1){console[_0x187f1a(0x182)](_0x187f1a(0x179),_0x5802e1),loggerService_1[_0x187f1a(0x1b5)]['logWebhookError']('klyme',_0x5802e1,_0x97007f[_0x187f1a(0x1a3)]),_0x15154e[_0x187f1a(0x193)](0xc8)[_0x187f1a(0x18e)]({'success':![],'message':_0x5802e1 instanceof Error?_0x5802e1[_0x187f1a(0x1d4)]:_0x187f1a(0x192)});}},this[_0x150277(0x1ba)]=async(_0x3cdc4a,_0x5f8b1,_0x18f7d7)=>{const _0x136a66=_0x150277;try{console['log']('Received\x20VISA\x20webhook:',_0x3cdc4a[_0x136a66(0x1a3)]),loggerService_1[_0x136a66(0x1b5)][_0x136a66(0x19f)](_0x136a66(0x1c6),_0x3cdc4a[_0x136a66(0x1a3)],_0x3cdc4a[_0x136a66(0x199)]);const _0x4edc5a=await this[_0x136a66(0x1a1)]['processVisaWebhook'](_0x3cdc4a['body']);_0x5f8b1[_0x136a66(0x193)](0xc8)[_0x136a66(0x18e)]({'success':!![],'message':'VISA\x20webhook\x20processed\x20successfully'});}catch(_0x46e7ca){console[_0x136a66(0x182)](_0x136a66(0x19a),_0x46e7ca),loggerService_1['loggerService'][_0x136a66(0x1c4)](_0x136a66(0x1c6),_0x46e7ca,_0x3cdc4a[_0x136a66(0x1a3)]),_0x5f8b1[_0x136a66(0x193)](0xc8)[_0x136a66(0x18e)]({'success':![],'message':_0x46e7ca instanceof Error?_0x46e7ca[_0x136a66(0x1d4)]:_0x136a66(0x17b)});}},this[_0x150277(0x1a5)]=async(_0x1daf01,_0x2c467c,_0x225fd0)=>{const _0xc96a6c=_0x150277;try{console[_0xc96a6c(0x191)](_0xc96a6c(0x17c),_0x1daf01[_0xc96a6c(0x1a3)]),loggerService_1[_0xc96a6c(0x1b5)]['logWebhookReceived'](_0xc96a6c(0x187),_0x1daf01[_0xc96a6c(0x1a3)],_0x1daf01[_0xc96a6c(0x199)]);const _0x3b6a62=await this[_0xc96a6c(0x1a1)][_0xc96a6c(0x1d5)](_0x1daf01[_0xc96a6c(0x1a3)]);_0x2c467c[_0xc96a6c(0x193)](0xc8)[_0xc96a6c(0x18e)]({'success':!![],'message':_0xc96a6c(0x1b1)});}catch(_0x5f588a){console[_0xc96a6c(0x182)](_0xc96a6c(0x1d2),_0x5f588a),loggerService_1[_0xc96a6c(0x1b5)]['logWebhookError']('mastercard',_0x5f588a,_0x1daf01['body']),_0x2c467c[_0xc96a6c(0x193)](0xc8)[_0xc96a6c(0x18e)]({'success':![],'message':_0x5f588a instanceof Error?_0x5f588a[_0xc96a6c(0x1d4)]:'MasterCard\x20webhook\x20processing\x20failed'});}},this[_0x150277(0x197)]=async(_0x136da9,_0x3052d9,_0xd33387)=>{const _0x3566d1=_0x150277;try{console['log'](_0x3566d1(0x1bf),_0x136da9['body']),loggerService_1[_0x3566d1(0x1b5)]['logWebhookReceived'](_0x3566d1(0x1bb),_0x136da9['body'],_0x136da9['headers']);const _0x171cf2=await this[_0x3566d1(0x1a1)][_0x3566d1(0x183)](_0x136da9[_0x3566d1(0x1a3)]);_0x3052d9[_0x3566d1(0x193)](0xc8)[_0x3566d1(0x18e)]({'success':!![],'message':'Amer\x20webhook\x20processed\x20successfully'});}catch(_0x556ef0){console[_0x3566d1(0x182)](_0x3566d1(0x1ad),_0x556ef0),loggerService_1[_0x3566d1(0x1b5)][_0x3566d1(0x1c4)](_0x3566d1(0x1bb),_0x556ef0,_0x136da9[_0x3566d1(0x1a3)]),_0x3052d9[_0x3566d1(0x193)](0xc8)[_0x3566d1(0x18e)]({'success':![],'message':_0x556ef0 instanceof Error?_0x556ef0[_0x3566d1(0x1d4)]:_0x3566d1(0x17d)});}},this[_0x150277(0x180)]=async(_0x25579c,_0x465b37,_0x473b84)=>{const _0x3cfeb4=_0x150277;try{console[_0x3cfeb4(0x191)](_0x3cfeb4(0x1cb)),console['log']('Headers:',_0x25579c['headers']),console['log'](_0x3cfeb4(0x198),_0x25579c[_0x3cfeb4(0x1a3)]),console['log']('Body\x20type:',typeof _0x25579c[_0x3cfeb4(0x1a3)]),console[_0x3cfeb4(0x191)](_0x3cfeb4(0x190),Object[_0x3cfeb4(0x1aa)](_0x25579c['body']||{})),loggerService_1[_0x3cfeb4(0x1b5)][_0x3cfeb4(0x19f)](_0x3cfeb4(0x1c1),_0x25579c[_0x3cfeb4(0x1a3)],_0x25579c[_0x3cfeb4(0x199)]);const _0x30fd06=await this[_0x3cfeb4(0x1a1)][_0x3cfeb4(0x17a)](_0x25579c['body']);_0x465b37[_0x3cfeb4(0x193)](0xc8)['json']({'success':!![],'message':_0x3cfeb4(0x1cf)});}catch(_0x4c226b){console[_0x3cfeb4(0x182)]('AmPay\x20webhook\x20processing\x20error:',_0x4c226b),loggerService_1[_0x3cfeb4(0x1b5)]['logWebhookError'](_0x3cfeb4(0x1c1),_0x4c226b,_0x25579c[_0x3cfeb4(0x1a3)]),_0x465b37['status'](0xc8)[_0x3cfeb4(0x18e)]({'success':![],'message':_0x4c226b instanceof Error?_0x4c226b[_0x3cfeb4(0x1d4)]:_0x3cfeb4(0x1b0)});}},this[_0x150277(0x1a1)]=new webhookService_1[(_0x150277(0x1a0))]();}}exports['WebhookController']=WebhookController;