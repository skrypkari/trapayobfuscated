'use strict';const a14_0x41953f=a14_0x2ed6;function a14_0x416c(){const _0x2966bc=['Body\x20content:','rapyd','log','handleKlymeWebhook','===\x20PLISIO\x20GATEWAY\x20WEBHOOK\x20RECEIVED\x20===','processCoinToPayWebhook','handlePlisioWebhook','processPlisioGatewayWebhook','Rapyd\x20webhook\x20processed\x20successfully','1529652pPGRNp','2534320eWDAwH','507480fgbaZm','Content-Type:','logWebhookReceived','Content-Type','191345diLSVc','plisio_gateway','KLYME\x20webhook\x20processing\x20error:','Received\x20CoinToPay\x20webhook:','CoinToPay\x20webhook\x20processed\x20successfully','loggerService','get','WebhookService','handlePlisioGatewayWebhook','processNodaWebhook','WebhookController','Raw\x20body\x20type:','2NNgMNQ','2526384tmzmHX','body','klyme','KLYME\x20webhook\x20processed\x20successfully','Gateway\x20webhook\x20processing\x20failed','error','KLYME\x20webhook\x20processing\x20failed','processRapydWebhook','===\x20PLISIO\x20WEBHOOK\x20RECEIVED\x20===','plisio','handleNodaWebhook','3015708Aruxjq','Received\x20KLYME\x20webhook:','handleRapydWebhook','noda','keys','headers','../services/loggerService','processKlymeWebhook','Webhook\x20processing\x20error:','CoinToPay\x20webhook\x20processing\x20failed','Body\x20keys:','message','status','Noda\x20webhook\x20processing\x20failed','json','Gateway\x20webhook\x20processing\x20error:','logWebhookError','cointopay','Webhook\x20processed\x20successfully','1178060owHWVa','Gateway\x20webhook\x20processed\x20successfully','Received\x20Rapyd\x20webhook:','webhookService'];a14_0x416c=function(){return _0x2966bc;};return a14_0x416c();}function a14_0x2ed6(_0x17be30,_0x48b0b2){const _0x416c1c=a14_0x416c();return a14_0x2ed6=function(_0x2ed687,_0x59762b){_0x2ed687=_0x2ed687-0x8c;let _0x502a0d=_0x416c1c[_0x2ed687];return _0x502a0d;},a14_0x2ed6(_0x17be30,_0x48b0b2);}(function(_0xbbaaef,_0xed56d3){const _0x4e6a44=a14_0x2ed6,_0x4a553f=_0xbbaaef();while(!![]){try{const _0x19b451=-parseInt(_0x4e6a44(0xb8))/0x1*(-parseInt(_0x4e6a44(0xa8))/0x2)+parseInt(_0x4e6a44(0xa6))/0x3+-parseInt(_0x4e6a44(0x99))/0x4+-parseInt(_0x4e6a44(0xa7))/0x5+parseInt(_0x4e6a44(0xc4))/0x6+parseInt(_0x4e6a44(0xac))/0x7+-parseInt(_0x4e6a44(0xb9))/0x8;if(_0x19b451===_0xed56d3)break;else _0x4a553f['push'](_0x4a553f['shift']());}catch(_0x2eea68){_0x4a553f['push'](_0x4a553f['shift']());}}}(a14_0x416c,0x6903c));Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a14_0x41953f(0xb6)]=void 0x0;const webhookService_1=require('../services/webhookService'),loggerService_1=require(a14_0x41953f(0x8c));class WebhookController{constructor(){const _0x477398=a14_0x41953f;this[_0x477398(0xa3)]=async(_0x37d6c8,_0x25ff0c,_0x585bf1)=>{const _0x3a075f=_0x477398;try{console['log'](_0x3a075f(0xc1)),console['log'](_0x3a075f(0xa9),_0x37d6c8[_0x3a075f(0xb2)](_0x3a075f(0xab))),console[_0x3a075f(0x9f)](_0x3a075f(0xb7),typeof _0x37d6c8[_0x3a075f(0xba)]),console[_0x3a075f(0x9f)](_0x3a075f(0x90),Object['keys'](_0x37d6c8['body']||{})),console[_0x3a075f(0x9f)]('Body\x20content:',_0x37d6c8[_0x3a075f(0xba)]),loggerService_1[_0x3a075f(0xb1)][_0x3a075f(0xaa)](_0x3a075f(0xc2),_0x37d6c8['body'],_0x37d6c8[_0x3a075f(0xc9)]);const _0x19bd75=await this['webhookService']['processPlisioWebhook'](_0x37d6c8['body']);_0x25ff0c[_0x3a075f(0x92)](0xc8)[_0x3a075f(0x94)]({'success':!![],'message':_0x3a075f(0x98)});}catch(_0x147244){console['error'](_0x3a075f(0x8e),_0x147244),loggerService_1[_0x3a075f(0xb1)]['logWebhookError'](_0x3a075f(0xc2),_0x147244,_0x37d6c8[_0x3a075f(0xba)]),_0x25ff0c['status'](0xc8)[_0x3a075f(0x94)]({'success':![],'message':_0x147244 instanceof Error?_0x147244[_0x3a075f(0x91)]:'Webhook\x20processing\x20failed'});}},this[_0x477398(0xb4)]=async(_0x15b01c,_0x509209,_0x3626de)=>{const _0x3fa7fd=_0x477398;try{console[_0x3fa7fd(0x9f)](_0x3fa7fd(0xa1)),console[_0x3fa7fd(0x9f)]('Content-Type:',_0x15b01c[_0x3fa7fd(0xb2)](_0x3fa7fd(0xab))),console[_0x3fa7fd(0x9f)]('Raw\x20body\x20type:',typeof _0x15b01c['body']),console[_0x3fa7fd(0x9f)]('Body\x20keys:',Object[_0x3fa7fd(0xc8)](_0x15b01c[_0x3fa7fd(0xba)]||{})),console['log'](_0x3fa7fd(0x9d),_0x15b01c[_0x3fa7fd(0xba)]),loggerService_1['loggerService']['logWebhookReceived'](_0x3fa7fd(0xad),_0x15b01c[_0x3fa7fd(0xba)],_0x15b01c[_0x3fa7fd(0xc9)]);const _0x1ac03d=await this['webhookService'][_0x3fa7fd(0xa4)](_0x15b01c[_0x3fa7fd(0xba)]);_0x509209['status'](0xc8)['json']({'success':!![],'message':_0x3fa7fd(0x9a)});}catch(_0x1cdfdc){console[_0x3fa7fd(0xbe)](_0x3fa7fd(0x95),_0x1cdfdc),loggerService_1[_0x3fa7fd(0xb1)][_0x3fa7fd(0x96)]('plisio_gateway',_0x1cdfdc,_0x15b01c[_0x3fa7fd(0xba)]),_0x509209['status'](0xc8)[_0x3fa7fd(0x94)]({'success':![],'message':_0x1cdfdc instanceof Error?_0x1cdfdc[_0x3fa7fd(0x91)]:_0x3fa7fd(0xbd)});}},this[_0x477398(0xc6)]=async(_0x5859d6,_0x59a2e9,_0x3645d4)=>{const _0x41e4f3=_0x477398;try{console[_0x41e4f3(0x9f)](_0x41e4f3(0x9b),_0x5859d6['body']),loggerService_1[_0x41e4f3(0xb1)][_0x41e4f3(0xaa)](_0x41e4f3(0x9e),_0x5859d6['body'],_0x5859d6[_0x41e4f3(0xc9)]);const _0x39e3d3=await this['webhookService'][_0x41e4f3(0xc0)](_0x5859d6[_0x41e4f3(0xba)]);_0x59a2e9['status'](0xc8)[_0x41e4f3(0x94)]({'success':!![],'message':_0x41e4f3(0xa5)});}catch(_0x3ebc57){console[_0x41e4f3(0xbe)]('Rapyd\x20webhook\x20processing\x20error:',_0x3ebc57),loggerService_1[_0x41e4f3(0xb1)][_0x41e4f3(0x96)](_0x41e4f3(0x9e),_0x3ebc57,_0x5859d6[_0x41e4f3(0xba)]),_0x59a2e9[_0x41e4f3(0x92)](0xc8)[_0x41e4f3(0x94)]({'success':![],'message':_0x3ebc57 instanceof Error?_0x3ebc57[_0x41e4f3(0x91)]:'Rapyd\x20webhook\x20processing\x20failed'});}},this[_0x477398(0xc3)]=async(_0x5ebc2c,_0x480730,_0x492d7d)=>{const _0x215d33=_0x477398;try{console[_0x215d33(0x9f)]('Received\x20Noda\x20webhook:',_0x5ebc2c[_0x215d33(0xba)]),loggerService_1[_0x215d33(0xb1)][_0x215d33(0xaa)](_0x215d33(0xc7),_0x5ebc2c[_0x215d33(0xba)],_0x5ebc2c['headers']);const _0x593734=await this[_0x215d33(0x9c)][_0x215d33(0xb5)](_0x5ebc2c[_0x215d33(0xba)]);_0x480730['status'](0xc8)[_0x215d33(0x94)]({'success':!![],'message':'Noda\x20webhook\x20processed\x20successfully'});}catch(_0x396ce5){console[_0x215d33(0xbe)]('Noda\x20webhook\x20processing\x20error:',_0x396ce5),loggerService_1[_0x215d33(0xb1)][_0x215d33(0x96)](_0x215d33(0xc7),_0x396ce5,_0x5ebc2c[_0x215d33(0xba)]),_0x480730[_0x215d33(0x92)](0xc8)[_0x215d33(0x94)]({'success':![],'message':_0x396ce5 instanceof Error?_0x396ce5[_0x215d33(0x91)]:_0x215d33(0x93)});}},this['handleCoinToPayWebhook']=async(_0x5b5fb7,_0xbec57e,_0x53a6ec)=>{const _0x1c6b86=_0x477398;try{console[_0x1c6b86(0x9f)](_0x1c6b86(0xaf),_0x5b5fb7[_0x1c6b86(0xba)]),loggerService_1[_0x1c6b86(0xb1)]['logWebhookReceived']('cointopay',_0x5b5fb7[_0x1c6b86(0xba)],_0x5b5fb7[_0x1c6b86(0xc9)]);const _0x181325=await this[_0x1c6b86(0x9c)][_0x1c6b86(0xa2)](_0x5b5fb7[_0x1c6b86(0xba)]);_0xbec57e[_0x1c6b86(0x92)](0xc8)['json']({'success':!![],'message':_0x1c6b86(0xb0)});}catch(_0x5a445d){console[_0x1c6b86(0xbe)]('CoinToPay\x20webhook\x20processing\x20error:',_0x5a445d),loggerService_1[_0x1c6b86(0xb1)][_0x1c6b86(0x96)](_0x1c6b86(0x97),_0x5a445d,_0x5b5fb7[_0x1c6b86(0xba)]),_0xbec57e[_0x1c6b86(0x92)](0xc8)[_0x1c6b86(0x94)]({'success':![],'message':_0x5a445d instanceof Error?_0x5a445d[_0x1c6b86(0x91)]:_0x1c6b86(0x8f)});}},this[_0x477398(0xa0)]=async(_0x273e61,_0x15b85d,_0x59abbb)=>{const _0xd6b18=_0x477398;try{console[_0xd6b18(0x9f)](_0xd6b18(0xc5),_0x273e61['body']),loggerService_1[_0xd6b18(0xb1)][_0xd6b18(0xaa)](_0xd6b18(0xbb),_0x273e61[_0xd6b18(0xba)],_0x273e61[_0xd6b18(0xc9)]);const _0x179229=await this['webhookService'][_0xd6b18(0x8d)](_0x273e61[_0xd6b18(0xba)]);_0x15b85d['status'](0xc8)[_0xd6b18(0x94)]({'success':!![],'message':_0xd6b18(0xbc)});}catch(_0x1badfa){console[_0xd6b18(0xbe)](_0xd6b18(0xae),_0x1badfa),loggerService_1['loggerService'][_0xd6b18(0x96)](_0xd6b18(0xbb),_0x1badfa,_0x273e61[_0xd6b18(0xba)]),_0x15b85d['status'](0xc8)['json']({'success':![],'message':_0x1badfa instanceof Error?_0x1badfa['message']:_0xd6b18(0xbf)});}},this['webhookService']=new webhookService_1[(_0x477398(0xb3))]();}}exports[a14_0x41953f(0xb6)]=WebhookController;