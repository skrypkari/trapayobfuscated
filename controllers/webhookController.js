'use strict';const a17_0x46f5fc=a17_0x7c7c;(function(_0x3151fb,_0x4f4d7a){const _0x530864=a17_0x7c7c,_0x405df2=_0x3151fb();while(!![]){try{const _0x55d5b2=-parseInt(_0x530864(0xb0))/0x1*(-parseInt(_0x530864(0xbe))/0x2)+parseInt(_0x530864(0x9d))/0x3*(-parseInt(_0x530864(0xcb))/0x4)+-parseInt(_0x530864(0xac))/0x5*(-parseInt(_0x530864(0xa2))/0x6)+-parseInt(_0x530864(0x98))/0x7*(-parseInt(_0x530864(0xa6))/0x8)+-parseInt(_0x530864(0x85))/0x9*(parseInt(_0x530864(0x99))/0xa)+-parseInt(_0x530864(0xb1))/0xb+parseInt(_0x530864(0xa4))/0xc;if(_0x55d5b2===_0x4f4d7a)break;else _0x405df2['push'](_0x405df2['shift']());}catch(_0x20e2f8){_0x405df2['push'](_0x405df2['shift']());}}}(a17_0x7ba8,0xf3fc0));Object[a17_0x46f5fc(0xab)](exports,a17_0x46f5fc(0x8d),{'value':!![]}),exports[a17_0x46f5fc(0xd3)]=void 0x0;function a17_0x7c7c(_0x3c186d,_0x8b17a8){const _0x7ba820=a17_0x7ba8();return a17_0x7c7c=function(_0x7c7c9d,_0x5ed308){_0x7c7c9d=_0x7c7c9d-0x7e;let _0x32db48=_0x7ba820[_0x7c7c9d];return _0x32db48;},a17_0x7c7c(_0x3c186d,_0x8b17a8);}const webhookService_1=require(a17_0x46f5fc(0x81)),loggerService_1=require('../services/loggerService');function a17_0x7ba8(){const _0x1f2830=['mastercard','klyme','myxspend','__esModule','processAmPayTRYWebhook','MyXSpend\x20webhook\x20processed\x20successfully','AmPay\x20webhook\x20processing\x20error:','error','rapyd','cointopay','body','AmPay\x20webhook\x20processed\x20successfully','Content-Type','CoinToPay\x20webhook\x20processing\x20error:','1245846YFwypu','320690SGORvk','Noda\x20webhook\x20processing\x20error:','===\x20MyXSpend\x20Webhook\x20Received\x20===','CoinToPay\x20webhook\x20processed\x20successfully','24mnBNwJ','Gateway\x20webhook\x20processing\x20error:','handleAmPayWebhook','processCoinToPay2Webhook','handleRapydWebhook','104574FYTXXQ','headers','10829352QWVdRM','loggerService','24TWdqla','KLYME\x20webhook\x20processed\x20successfully','message','Raw\x20body\x20type:','status','defineProperty','465lBNxXb','webhookService','Headers:','noda','2591lmvHXo','15907991AJRhYe','Body\x20keys:','Body\x20type:','amer','Received\x20Rapyd\x20webhook:','json','CoinToPay2\x20webhook\x20processing\x20failed','Gateway\x20webhook\x20processing\x20failed','cointopay2','processMyXSpendWebhook','handleNodaWebhook','AmPay\x20TRY\x20webhook\x20processed\x20successfully','Amer\x20webhook\x20processed\x20successfully','1058uweMqm','logWebhookReceived','processCoinToPayWebhook','Content-Type:','MasterCard\x20webhook\x20processed\x20successfully','processRapydWebhook','processKlymeWebhook','query','Query\x20params:','Webhook\x20processing\x20error:','MyXSpend\x20webhook\x20processing\x20error:','Noda\x20webhook\x20processed\x20successfully','===\x20PLISIO\x20WEBHOOK\x20RECEIVED\x20===','943084oGMVBP','ampay_try','Received\x20CoinToPay2\x20webhook:','VISA\x20webhook\x20processing\x20error:','===\x20AmPay\x20TRY\x20Webhook\x20Received\x20===','AmPay\x20TRY\x20webhook\x20processing\x20error:','Rapyd\x20webhook\x20processing\x20error:','method','WebhookController','Received\x20MasterCard\x20webhook:','Body:','handleAmerWebhook','handleCoinToPayWebhook','Noda\x20webhook\x20processing\x20failed','MyXSpend\x20webhook\x20processing\x20failed','VISA\x20webhook\x20processed\x20successfully','handleMyXSpendWebhook','plisio','processPlisioWebhook','handleCoinToPay2Webhook','Body\x20content:','ampay','AmPay\x20TRY\x20webhook\x20processing\x20failed','Received\x20Amer\x20webhook:','logWebhookError','Amer\x20webhook\x20processing\x20error:','CoinToPay2\x20webhook\x20processed\x20successfully','plisio_gateway','handleKlymeWebhook','CoinToPay2\x20webhook\x20processing\x20error:','Received\x20CoinToPay\x20webhook:','Rapyd\x20webhook\x20processed\x20successfully','Received\x20VISA\x20webhook:','Webhook\x20processed\x20successfully','keys','MasterCard\x20webhook\x20processing\x20error:','visa','processAmPayWebhook','CoinToPay\x20webhook\x20processing\x20failed','../services/webhookService','Received\x20KLYME\x20webhook:','MasterCard\x20webhook\x20processing\x20failed','===\x20AmPay\x20Webhook\x20Received\x20===','27NIJihb','log','handleMasterCardWebhook','processVisaWebhook','handleVisaWebhook'];a17_0x7ba8=function(){return _0x1f2830;};return a17_0x7ba8();}class WebhookController{constructor(){const _0x5f0b88=a17_0x46f5fc;this['handlePlisioWebhook']=async(_0xef90ee,_0x5cf44b,_0xa08e48)=>{const _0x3ae1c9=a17_0x7c7c;try{console[_0x3ae1c9(0x86)](_0x3ae1c9(0xca)),console[_0x3ae1c9(0x86)](_0x3ae1c9(0xc1),_0xef90ee['get'](_0x3ae1c9(0x96))),console[_0x3ae1c9(0x86)](_0x3ae1c9(0xa9),typeof _0xef90ee['body']),console[_0x3ae1c9(0x86)](_0x3ae1c9(0xb2),Object['keys'](_0xef90ee[_0x3ae1c9(0x94)]||{})),console[_0x3ae1c9(0x86)](_0x3ae1c9(0xdf),_0xef90ee[_0x3ae1c9(0x94)]),loggerService_1['loggerService'][_0x3ae1c9(0xbf)](_0x3ae1c9(0xdc),_0xef90ee[_0x3ae1c9(0x94)],_0xef90ee['headers']);const _0x3abc41=await this[_0x3ae1c9(0xad)][_0x3ae1c9(0xdd)](_0xef90ee['body']);_0x5cf44b[_0x3ae1c9(0xaa)](0xc8)[_0x3ae1c9(0xb6)]({'success':!![],'message':_0x3ae1c9(0xec)});}catch(_0x417e33){console[_0x3ae1c9(0x91)](_0x3ae1c9(0xc7),_0x417e33),loggerService_1['loggerService']['logWebhookError'](_0x3ae1c9(0xdc),_0x417e33,_0xef90ee[_0x3ae1c9(0x94)]),_0x5cf44b[_0x3ae1c9(0xaa)](0xc8)[_0x3ae1c9(0xb6)]({'success':![],'message':_0x417e33 instanceof Error?_0x417e33['message']:'Webhook\x20processing\x20failed'});}},this['handlePlisioGatewayWebhook']=async(_0x363aa2,_0x4645c5,_0x51f69c)=>{const _0x50d549=a17_0x7c7c;try{console['log']('===\x20PLISIO\x20GATEWAY\x20WEBHOOK\x20RECEIVED\x20==='),console[_0x50d549(0x86)](_0x50d549(0xc1),_0x363aa2['get'](_0x50d549(0x96))),console[_0x50d549(0x86)](_0x50d549(0xa9),typeof _0x363aa2[_0x50d549(0x94)]),console[_0x50d549(0x86)](_0x50d549(0xb2),Object['keys'](_0x363aa2[_0x50d549(0x94)]||{})),console[_0x50d549(0x86)](_0x50d549(0xdf),_0x363aa2[_0x50d549(0x94)]),loggerService_1['loggerService'][_0x50d549(0xbf)](_0x50d549(0xe6),_0x363aa2[_0x50d549(0x94)],_0x363aa2[_0x50d549(0xa3)]);const _0xab2420=await this['webhookService']['processPlisioGatewayWebhook'](_0x363aa2[_0x50d549(0x94)]);_0x4645c5['status'](0xc8)[_0x50d549(0xb6)]({'success':!![],'message':'Gateway\x20webhook\x20processed\x20successfully'});}catch(_0x5ba00d){console[_0x50d549(0x91)](_0x50d549(0x9e),_0x5ba00d),loggerService_1[_0x50d549(0xa5)]['logWebhookError'](_0x50d549(0xe6),_0x5ba00d,_0x363aa2[_0x50d549(0x94)]),_0x4645c5[_0x50d549(0xaa)](0xc8)['json']({'success':![],'message':_0x5ba00d instanceof Error?_0x5ba00d['message']:_0x50d549(0xb8)});}},this[_0x5f0b88(0xa1)]=async(_0x1c7e19,_0x40b8bf,_0x26ac50)=>{const _0x544277=_0x5f0b88;try{console['log'](_0x544277(0xb5),_0x1c7e19[_0x544277(0x94)]),loggerService_1['loggerService'][_0x544277(0xbf)](_0x544277(0x92),_0x1c7e19[_0x544277(0x94)],_0x1c7e19[_0x544277(0xa3)]);const _0x294b51=await this[_0x544277(0xad)][_0x544277(0xc3)](_0x1c7e19[_0x544277(0x94)]);_0x40b8bf[_0x544277(0xaa)](0xc8)[_0x544277(0xb6)]({'success':!![],'message':_0x544277(0xea)});}catch(_0x12f676){console[_0x544277(0x91)](_0x544277(0xd1),_0x12f676),loggerService_1[_0x544277(0xa5)][_0x544277(0xe3)](_0x544277(0x92),_0x12f676,_0x1c7e19[_0x544277(0x94)]),_0x40b8bf[_0x544277(0xaa)](0xc8)[_0x544277(0xb6)]({'success':![],'message':_0x12f676 instanceof Error?_0x12f676[_0x544277(0xa8)]:'Rapyd\x20webhook\x20processing\x20failed'});}},this[_0x5f0b88(0xbb)]=async(_0x4eadfb,_0x71ee40,_0x4ed401)=>{const _0x501ede=_0x5f0b88;try{console[_0x501ede(0x86)]('Received\x20Noda\x20webhook:',_0x4eadfb[_0x501ede(0x94)]),loggerService_1['loggerService'][_0x501ede(0xbf)](_0x501ede(0xaf),_0x4eadfb[_0x501ede(0x94)],_0x4eadfb[_0x501ede(0xa3)]);const _0x543e73=await this['webhookService']['processNodaWebhook'](_0x4eadfb[_0x501ede(0x94)]);_0x71ee40[_0x501ede(0xaa)](0xc8)[_0x501ede(0xb6)]({'success':!![],'message':_0x501ede(0xc9)});}catch(_0x18e529){console[_0x501ede(0x91)](_0x501ede(0x9a),_0x18e529),loggerService_1[_0x501ede(0xa5)]['logWebhookError'](_0x501ede(0xaf),_0x18e529,_0x4eadfb[_0x501ede(0x94)]),_0x71ee40[_0x501ede(0xaa)](0xc8)['json']({'success':![],'message':_0x18e529 instanceof Error?_0x18e529[_0x501ede(0xa8)]:_0x501ede(0xd8)});}},this[_0x5f0b88(0xd7)]=async(_0x4d180e,_0x29b245,_0x9aea1d)=>{const _0x406f6f=_0x5f0b88;try{console[_0x406f6f(0x86)](_0x406f6f(0xe9),_0x4d180e['body']),loggerService_1[_0x406f6f(0xa5)][_0x406f6f(0xbf)](_0x406f6f(0x93),_0x4d180e['body'],_0x4d180e[_0x406f6f(0xa3)]);const _0x5a5ac7=await this['webhookService'][_0x406f6f(0xc0)](_0x4d180e[_0x406f6f(0x94)]);_0x29b245['status'](0xc8)[_0x406f6f(0xb6)]({'success':!![],'message':_0x406f6f(0x9c)});}catch(_0x2d1937){console[_0x406f6f(0x91)](_0x406f6f(0x97),_0x2d1937),loggerService_1[_0x406f6f(0xa5)][_0x406f6f(0xe3)](_0x406f6f(0x93),_0x2d1937,_0x4d180e[_0x406f6f(0x94)]),_0x29b245[_0x406f6f(0xaa)](0xc8)['json']({'success':![],'message':_0x2d1937 instanceof Error?_0x2d1937[_0x406f6f(0xa8)]:_0x406f6f(0x80)});}},this[_0x5f0b88(0xde)]=async(_0x3954a7,_0x5d8e45,_0x46cae6)=>{const _0x23fbb3=_0x5f0b88;try{console[_0x23fbb3(0x86)](_0x23fbb3(0xcd),_0x3954a7[_0x23fbb3(0x94)]),loggerService_1[_0x23fbb3(0xa5)][_0x23fbb3(0xbf)](_0x23fbb3(0xb9),_0x3954a7['body'],_0x3954a7[_0x23fbb3(0xa3)]);const _0xb4a3e1=await this[_0x23fbb3(0xad)][_0x23fbb3(0xa0)](_0x3954a7[_0x23fbb3(0x94)]);_0x5d8e45[_0x23fbb3(0xaa)](0xc8)[_0x23fbb3(0xb6)]({'success':!![],'message':_0x23fbb3(0xe5)});}catch(_0x391b8e){console[_0x23fbb3(0x91)](_0x23fbb3(0xe8),_0x391b8e),loggerService_1[_0x23fbb3(0xa5)][_0x23fbb3(0xe3)](_0x23fbb3(0xb9),_0x391b8e,_0x3954a7[_0x23fbb3(0x94)]),_0x5d8e45['status'](0xc8)[_0x23fbb3(0xb6)]({'success':![],'message':_0x391b8e instanceof Error?_0x391b8e['message']:_0x23fbb3(0xb7)});}},this[_0x5f0b88(0xe7)]=async(_0x464b0e,_0x49f592,_0x2ef6f3)=>{const _0x2fca7d=_0x5f0b88;try{console[_0x2fca7d(0x86)](_0x2fca7d(0x82),_0x464b0e[_0x2fca7d(0x94)]),loggerService_1['loggerService'][_0x2fca7d(0xbf)](_0x2fca7d(0x8b),_0x464b0e[_0x2fca7d(0x94)],_0x464b0e[_0x2fca7d(0xa3)]);const _0xa9807c=await this[_0x2fca7d(0xad)][_0x2fca7d(0xc4)](_0x464b0e[_0x2fca7d(0x94)]);_0x49f592[_0x2fca7d(0xaa)](0xc8)[_0x2fca7d(0xb6)]({'success':!![],'message':_0x2fca7d(0xa7)});}catch(_0x364592){console['error']('KLYME\x20webhook\x20processing\x20error:',_0x364592),loggerService_1['loggerService'][_0x2fca7d(0xe3)](_0x2fca7d(0x8b),_0x364592,_0x464b0e[_0x2fca7d(0x94)]),_0x49f592[_0x2fca7d(0xaa)](0xc8)[_0x2fca7d(0xb6)]({'success':![],'message':_0x364592 instanceof Error?_0x364592[_0x2fca7d(0xa8)]:'KLYME\x20webhook\x20processing\x20failed'});}},this[_0x5f0b88(0x89)]=async(_0x3246a6,_0x2850c6,_0x123c46)=>{const _0x19e5a1=_0x5f0b88;try{console['log'](_0x19e5a1(0xeb),_0x3246a6[_0x19e5a1(0x94)]),loggerService_1[_0x19e5a1(0xa5)]['logWebhookReceived'](_0x19e5a1(0x7e),_0x3246a6[_0x19e5a1(0x94)],_0x3246a6['headers']);const _0x58ce41=await this[_0x19e5a1(0xad)][_0x19e5a1(0x88)](_0x3246a6[_0x19e5a1(0x94)]);_0x2850c6[_0x19e5a1(0xaa)](0xc8)[_0x19e5a1(0xb6)]({'success':!![],'message':_0x19e5a1(0xda)});}catch(_0xec8a98){console['error'](_0x19e5a1(0xce),_0xec8a98),loggerService_1[_0x19e5a1(0xa5)]['logWebhookError'](_0x19e5a1(0x7e),_0xec8a98,_0x3246a6[_0x19e5a1(0x94)]),_0x2850c6[_0x19e5a1(0xaa)](0xc8)['json']({'success':![],'message':_0xec8a98 instanceof Error?_0xec8a98[_0x19e5a1(0xa8)]:'VISA\x20webhook\x20processing\x20failed'});}},this[_0x5f0b88(0x87)]=async(_0x4648be,_0xd909b9,_0x307684)=>{const _0x14bcac=_0x5f0b88;try{console[_0x14bcac(0x86)](_0x14bcac(0xd4),_0x4648be[_0x14bcac(0x94)]),loggerService_1[_0x14bcac(0xa5)][_0x14bcac(0xbf)](_0x14bcac(0x8a),_0x4648be[_0x14bcac(0x94)],_0x4648be[_0x14bcac(0xa3)]);const _0x32b738=await this[_0x14bcac(0xad)]['processMasterCardWebhook'](_0x4648be[_0x14bcac(0x94)]);_0xd909b9[_0x14bcac(0xaa)](0xc8)[_0x14bcac(0xb6)]({'success':!![],'message':_0x14bcac(0xc2)});}catch(_0x4965de){console[_0x14bcac(0x91)](_0x14bcac(0xee),_0x4965de),loggerService_1[_0x14bcac(0xa5)][_0x14bcac(0xe3)](_0x14bcac(0x8a),_0x4965de,_0x4648be['body']),_0xd909b9[_0x14bcac(0xaa)](0xc8)[_0x14bcac(0xb6)]({'success':![],'message':_0x4965de instanceof Error?_0x4965de[_0x14bcac(0xa8)]:_0x14bcac(0x83)});}},this[_0x5f0b88(0xd6)]=async(_0x586abb,_0x217e8,_0x1484b6)=>{const _0x561d38=_0x5f0b88;try{console[_0x561d38(0x86)](_0x561d38(0xe2),_0x586abb[_0x561d38(0x94)]),loggerService_1['loggerService'][_0x561d38(0xbf)](_0x561d38(0xb4),_0x586abb[_0x561d38(0x94)],_0x586abb[_0x561d38(0xa3)]);const _0x1b79a4=await this[_0x561d38(0xad)]['processAmerWebhook'](_0x586abb[_0x561d38(0x94)]);_0x217e8['status'](0xc8)[_0x561d38(0xb6)]({'success':!![],'message':_0x561d38(0xbd)});}catch(_0x4d6962){console[_0x561d38(0x91)](_0x561d38(0xe4),_0x4d6962),loggerService_1['loggerService'][_0x561d38(0xe3)](_0x561d38(0xb4),_0x4d6962,_0x586abb[_0x561d38(0x94)]),_0x217e8[_0x561d38(0xaa)](0xc8)[_0x561d38(0xb6)]({'success':![],'message':_0x4d6962 instanceof Error?_0x4d6962['message']:'Amer\x20webhook\x20processing\x20failed'});}},this[_0x5f0b88(0x9f)]=async(_0x354905,_0x5c585f,_0x514c89)=>{const _0x14d5ba=_0x5f0b88;try{console[_0x14d5ba(0x86)](_0x14d5ba(0x84)),console['log'](_0x14d5ba(0xae),_0x354905[_0x14d5ba(0xa3)]),console[_0x14d5ba(0x86)](_0x14d5ba(0xd5),_0x354905[_0x14d5ba(0x94)]),console[_0x14d5ba(0x86)]('Body\x20type:',typeof _0x354905['body']),console[_0x14d5ba(0x86)](_0x14d5ba(0xb2),Object[_0x14d5ba(0xed)](_0x354905[_0x14d5ba(0x94)]||{})),loggerService_1[_0x14d5ba(0xa5)][_0x14d5ba(0xbf)](_0x14d5ba(0xe0),_0x354905['body'],_0x354905[_0x14d5ba(0xa3)]);const _0x35b339=await this[_0x14d5ba(0xad)][_0x14d5ba(0x7f)](_0x354905[_0x14d5ba(0x94)]);_0x5c585f[_0x14d5ba(0xaa)](0xc8)[_0x14d5ba(0xb6)]({'success':!![],'message':_0x14d5ba(0x95)});}catch(_0x507043){console[_0x14d5ba(0x91)](_0x14d5ba(0x90),_0x507043),loggerService_1[_0x14d5ba(0xa5)][_0x14d5ba(0xe3)](_0x14d5ba(0xe0),_0x507043,_0x354905[_0x14d5ba(0x94)]),_0x5c585f['status'](0xc8)[_0x14d5ba(0xb6)]({'success':![],'message':_0x507043 instanceof Error?_0x507043[_0x14d5ba(0xa8)]:'AmPay\x20webhook\x20processing\x20failed'});}},this['handleAmPayTRYWebhook']=async(_0x135429,_0x4af54f,_0x1034b1)=>{const _0x32e788=_0x5f0b88;try{console[_0x32e788(0x86)](_0x32e788(0xcf)),console[_0x32e788(0x86)]('Headers:',_0x135429['headers']),console[_0x32e788(0x86)](_0x32e788(0xd5),_0x135429[_0x32e788(0x94)]),console[_0x32e788(0x86)](_0x32e788(0xb3),typeof _0x135429[_0x32e788(0x94)]),console[_0x32e788(0x86)](_0x32e788(0xb2),Object['keys'](_0x135429[_0x32e788(0x94)]||{})),loggerService_1['loggerService']['logWebhookReceived']('ampay_try',_0x135429[_0x32e788(0x94)],_0x135429[_0x32e788(0xa3)]);const _0x23d32=await this['webhookService'][_0x32e788(0x8e)](_0x135429[_0x32e788(0x94)]);_0x4af54f['status'](0xc8)[_0x32e788(0xb6)]({'success':!![],'message':_0x32e788(0xbc)});}catch(_0x30b292){console[_0x32e788(0x91)](_0x32e788(0xd0),_0x30b292),loggerService_1['loggerService'][_0x32e788(0xe3)](_0x32e788(0xcc),_0x30b292,_0x135429[_0x32e788(0x94)]),_0x4af54f[_0x32e788(0xaa)](0xc8)[_0x32e788(0xb6)]({'success':![],'message':_0x30b292 instanceof Error?_0x30b292[_0x32e788(0xa8)]:_0x32e788(0xe1)});}},this[_0x5f0b88(0xdb)]=async(_0x574a7e,_0x3302a8,_0x1ba7f5)=>{const _0x11143d=_0x5f0b88;try{console['log'](_0x11143d(0x9b)),console[_0x11143d(0x86)](_0x11143d(0xae),_0x574a7e[_0x11143d(0xa3)]),console['log'](_0x11143d(0xc6),_0x574a7e[_0x11143d(0xc5)]),console['log'](_0x11143d(0xd5),_0x574a7e[_0x11143d(0x94)]),console['log']('Method:',_0x574a7e[_0x11143d(0xd2)]),loggerService_1['loggerService']['logWebhookReceived'](_0x11143d(0x8c),_0x574a7e[_0x11143d(0x94)]||_0x574a7e[_0x11143d(0xc5)],_0x574a7e[_0x11143d(0xa3)]);const _0x5d5c5f=await this[_0x11143d(0xad)][_0x11143d(0xba)](_0x574a7e['query'],_0x574a7e[_0x11143d(0x94)]);_0x3302a8[_0x11143d(0xaa)](0xc8)[_0x11143d(0xb6)]({'success':!![],'message':_0x11143d(0x8f)});}catch(_0x1268f6){console['error'](_0x11143d(0xc8),_0x1268f6),loggerService_1[_0x11143d(0xa5)]['logWebhookError']('myxspend',_0x1268f6,_0x574a7e['body']||_0x574a7e[_0x11143d(0xc5)]),_0x3302a8[_0x11143d(0xaa)](0xc8)[_0x11143d(0xb6)]({'success':![],'message':_0x1268f6 instanceof Error?_0x1268f6[_0x11143d(0xa8)]:_0x11143d(0xd9)});}},this[_0x5f0b88(0xad)]=new webhookService_1['WebhookService']();}}exports[a17_0x46f5fc(0xd3)]=WebhookController;