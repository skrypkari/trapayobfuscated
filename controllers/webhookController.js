'use strict';const a15_0x3f5e67=a15_0x4e12;function a15_0x4e12(_0x1ca5b2,_0xe25e4d){const _0x34595f=a15_0x3459();return a15_0x4e12=function(_0x4e12c4,_0x52a432){_0x4e12c4=_0x4e12c4-0x138;let _0x45ca94=_0x34595f[_0x4e12c4];return _0x45ca94;},a15_0x4e12(_0x1ca5b2,_0xe25e4d);}function a15_0x3459(){const _0xa0804b=['Received\x20CoinToPay\x20webhook:','Received\x20Noda\x20webhook:','CoinToPay\x20webhook\x20processing\x20failed','mastercard','json','message','webhookService','keys','logWebhookError','WebhookController','1554348tAyJlN','CoinToPay\x20webhook\x20processed\x20successfully','Gateway\x20webhook\x20processing\x20error:','plisio','Received\x20CoinToPay2\x20webhook:','handlePlisioGatewayWebhook','processCoinToPayWebhook','6571285NSnvKX','Noda\x20webhook\x20processing\x20error:','===\x20PLISIO\x20GATEWAY\x20WEBHOOK\x20RECEIVED\x20===','Raw\x20body\x20type:','CoinToPay2\x20webhook\x20processing\x20error:','processKlymeWebhook','Noda\x20webhook\x20processed\x20successfully','cointopay','processRapydWebhook','7552935QkCuBd','processPlisioWebhook','1iqpcCq','body','Gateway\x20webhook\x20processed\x20successfully','loggerService','KLYME\x20webhook\x20processing\x20error:','cointopay2','handleNodaWebhook','MasterCard\x20webhook\x20processed\x20successfully','Webhook\x20processing\x20failed','Body\x20content:','log','CoinToPay2\x20webhook\x20processed\x20successfully','WebhookService','MasterCard\x20webhook\x20processing\x20error:','noda','CoinToPay\x20webhook\x20processing\x20error:','processMasterCardWebhook','117mEfDcB','177KSqWYN','Body\x20keys:','MasterCard\x20webhook\x20processing\x20failed','klyme','Rapyd\x20webhook\x20processing\x20error:','logWebhookReceived','status','handleCoinToPayWebhook','Rapyd\x20webhook\x20processed\x20successfully','Received\x20KLYME\x20webhook:','818192sSGXDz','Content-Type:','10VBvTyg','rapyd','Content-Type','error','__esModule','handleMasterCardWebhook','Gateway\x20webhook\x20processing\x20failed','2102278EDKmty','processPlisioGatewayWebhook','handlePlisioWebhook','23408693slpzsY','36508wGSnJn','get','KLYME\x20webhook\x20processed\x20successfully','../services/webhookService','Rapyd\x20webhook\x20processing\x20failed','headers'];a15_0x3459=function(){return _0xa0804b;};return a15_0x3459();}(function(_0x304fad,_0xea66a5){const _0x3d9cdb=a15_0x4e12,_0x2ce447=_0x304fad();while(!![]){try{const _0x5dc007=parseInt(_0x3d9cdb(0x176))/0x1*(-parseInt(_0x3d9cdb(0x150))/0x2)+-parseInt(_0x3d9cdb(0x13d))/0x3*(-parseInt(_0x3d9cdb(0x154))/0x4)+parseInt(_0x3d9cdb(0x174))/0x5+-parseInt(_0x3d9cdb(0x164))/0x6+parseInt(_0x3d9cdb(0x16b))/0x7+-parseInt(_0x3d9cdb(0x147))/0x8*(-parseInt(_0x3d9cdb(0x13c))/0x9)+parseInt(_0x3d9cdb(0x149))/0xa*(-parseInt(_0x3d9cdb(0x153))/0xb);if(_0x5dc007===_0xea66a5)break;else _0x2ce447['push'](_0x2ce447['shift']());}catch(_0x77193b){_0x2ce447['push'](_0x2ce447['shift']());}}}(a15_0x3459,0xd6a21));Object['defineProperty'](exports,a15_0x3f5e67(0x14d),{'value':!![]}),exports[a15_0x3f5e67(0x163)]=void 0x0;const webhookService_1=require(a15_0x3f5e67(0x157)),loggerService_1=require('../services/loggerService');class WebhookController{constructor(){const _0x118850=a15_0x3f5e67;this[_0x118850(0x152)]=async(_0x450eb5,_0x4ac0be,_0x31f0f0)=>{const _0x78d55f=_0x118850;try{console['log']('===\x20PLISIO\x20WEBHOOK\x20RECEIVED\x20==='),console[_0x78d55f(0x180)](_0x78d55f(0x148),_0x450eb5[_0x78d55f(0x155)]('Content-Type')),console[_0x78d55f(0x180)]('Raw\x20body\x20type:',typeof _0x450eb5[_0x78d55f(0x177)]),console['log'](_0x78d55f(0x13e),Object['keys'](_0x450eb5[_0x78d55f(0x177)]||{})),console[_0x78d55f(0x180)](_0x78d55f(0x17f),_0x450eb5['body']),loggerService_1[_0x78d55f(0x179)][_0x78d55f(0x142)]('plisio',_0x450eb5[_0x78d55f(0x177)],_0x450eb5[_0x78d55f(0x159)]);const _0x2eeb18=await this['webhookService'][_0x78d55f(0x175)](_0x450eb5[_0x78d55f(0x177)]);_0x4ac0be[_0x78d55f(0x143)](0xc8)['json']({'success':!![],'message':'Webhook\x20processed\x20successfully'});}catch(_0x3d3c3e){console[_0x78d55f(0x14c)]('Webhook\x20processing\x20error:',_0x3d3c3e),loggerService_1[_0x78d55f(0x179)][_0x78d55f(0x162)](_0x78d55f(0x167),_0x3d3c3e,_0x450eb5[_0x78d55f(0x177)]),_0x4ac0be[_0x78d55f(0x143)](0xc8)[_0x78d55f(0x15e)]({'success':![],'message':_0x3d3c3e instanceof Error?_0x3d3c3e[_0x78d55f(0x15f)]:_0x78d55f(0x17e)});}},this[_0x118850(0x169)]=async(_0x1e218a,_0x3b131e,_0x5d35eb)=>{const _0x1bdbb8=_0x118850;try{console['log'](_0x1bdbb8(0x16d)),console[_0x1bdbb8(0x180)](_0x1bdbb8(0x148),_0x1e218a[_0x1bdbb8(0x155)](_0x1bdbb8(0x14b))),console[_0x1bdbb8(0x180)](_0x1bdbb8(0x16e),typeof _0x1e218a[_0x1bdbb8(0x177)]),console[_0x1bdbb8(0x180)](_0x1bdbb8(0x13e),Object[_0x1bdbb8(0x161)](_0x1e218a[_0x1bdbb8(0x177)]||{})),console[_0x1bdbb8(0x180)](_0x1bdbb8(0x17f),_0x1e218a[_0x1bdbb8(0x177)]),loggerService_1[_0x1bdbb8(0x179)][_0x1bdbb8(0x142)]('plisio_gateway',_0x1e218a['body'],_0x1e218a[_0x1bdbb8(0x159)]);const _0x57f070=await this[_0x1bdbb8(0x160)][_0x1bdbb8(0x151)](_0x1e218a[_0x1bdbb8(0x177)]);_0x3b131e[_0x1bdbb8(0x143)](0xc8)['json']({'success':!![],'message':_0x1bdbb8(0x178)});}catch(_0x3686ca){console[_0x1bdbb8(0x14c)](_0x1bdbb8(0x166),_0x3686ca),loggerService_1[_0x1bdbb8(0x179)][_0x1bdbb8(0x162)]('plisio_gateway',_0x3686ca,_0x1e218a[_0x1bdbb8(0x177)]),_0x3b131e[_0x1bdbb8(0x143)](0xc8)['json']({'success':![],'message':_0x3686ca instanceof Error?_0x3686ca[_0x1bdbb8(0x15f)]:_0x1bdbb8(0x14f)});}},this['handleRapydWebhook']=async(_0x2ca5c0,_0x138d59,_0x1a1a08)=>{const _0x2ad8ed=_0x118850;try{console[_0x2ad8ed(0x180)]('Received\x20Rapyd\x20webhook:',_0x2ca5c0['body']),loggerService_1['loggerService'][_0x2ad8ed(0x142)](_0x2ad8ed(0x14a),_0x2ca5c0[_0x2ad8ed(0x177)],_0x2ca5c0[_0x2ad8ed(0x159)]);const _0x3afa8c=await this[_0x2ad8ed(0x160)][_0x2ad8ed(0x173)](_0x2ca5c0['body']);_0x138d59['status'](0xc8)[_0x2ad8ed(0x15e)]({'success':!![],'message':_0x2ad8ed(0x145)});}catch(_0x4582e0){console[_0x2ad8ed(0x14c)](_0x2ad8ed(0x141),_0x4582e0),loggerService_1[_0x2ad8ed(0x179)][_0x2ad8ed(0x162)](_0x2ad8ed(0x14a),_0x4582e0,_0x2ca5c0[_0x2ad8ed(0x177)]),_0x138d59[_0x2ad8ed(0x143)](0xc8)['json']({'success':![],'message':_0x4582e0 instanceof Error?_0x4582e0[_0x2ad8ed(0x15f)]:_0x2ad8ed(0x158)});}},this[_0x118850(0x17c)]=async(_0x13334c,_0x235ab2,_0x485669)=>{const _0x498a9a=_0x118850;try{console[_0x498a9a(0x180)](_0x498a9a(0x15b),_0x13334c[_0x498a9a(0x177)]),loggerService_1[_0x498a9a(0x179)][_0x498a9a(0x142)](_0x498a9a(0x139),_0x13334c['body'],_0x13334c[_0x498a9a(0x159)]);const _0x2679c2=await this['webhookService']['processNodaWebhook'](_0x13334c[_0x498a9a(0x177)]);_0x235ab2[_0x498a9a(0x143)](0xc8)[_0x498a9a(0x15e)]({'success':!![],'message':_0x498a9a(0x171)});}catch(_0x181f19){console[_0x498a9a(0x14c)](_0x498a9a(0x16c),_0x181f19),loggerService_1['loggerService'][_0x498a9a(0x162)](_0x498a9a(0x139),_0x181f19,_0x13334c[_0x498a9a(0x177)]),_0x235ab2[_0x498a9a(0x143)](0xc8)[_0x498a9a(0x15e)]({'success':![],'message':_0x181f19 instanceof Error?_0x181f19[_0x498a9a(0x15f)]:'Noda\x20webhook\x20processing\x20failed'});}},this[_0x118850(0x144)]=async(_0xa4c308,_0x3ffb59,_0x2f7f72)=>{const _0x488211=_0x118850;try{console['log'](_0x488211(0x15a),_0xa4c308[_0x488211(0x177)]),loggerService_1[_0x488211(0x179)][_0x488211(0x142)](_0x488211(0x172),_0xa4c308[_0x488211(0x177)],_0xa4c308[_0x488211(0x159)]);const _0x42f65f=await this[_0x488211(0x160)][_0x488211(0x16a)](_0xa4c308['body']);_0x3ffb59['status'](0xc8)[_0x488211(0x15e)]({'success':!![],'message':_0x488211(0x165)});}catch(_0x126db9){console[_0x488211(0x14c)](_0x488211(0x13a),_0x126db9),loggerService_1['loggerService'][_0x488211(0x162)](_0x488211(0x172),_0x126db9,_0xa4c308[_0x488211(0x177)]),_0x3ffb59[_0x488211(0x143)](0xc8)[_0x488211(0x15e)]({'success':![],'message':_0x126db9 instanceof Error?_0x126db9[_0x488211(0x15f)]:_0x488211(0x15c)});}},this['handleCoinToPay2Webhook']=async(_0x3bfbcf,_0x1f9790,_0x58c942)=>{const _0x20e124=_0x118850;try{console['log'](_0x20e124(0x168),_0x3bfbcf[_0x20e124(0x177)]),loggerService_1['loggerService']['logWebhookReceived'](_0x20e124(0x17b),_0x3bfbcf[_0x20e124(0x177)],_0x3bfbcf[_0x20e124(0x159)]);const _0x31236a=await this[_0x20e124(0x160)]['processCoinToPay2Webhook'](_0x3bfbcf['body']);_0x1f9790[_0x20e124(0x143)](0xc8)[_0x20e124(0x15e)]({'success':!![],'message':_0x20e124(0x181)});}catch(_0x371c3b){console['error'](_0x20e124(0x16f),_0x371c3b),loggerService_1[_0x20e124(0x179)][_0x20e124(0x162)](_0x20e124(0x17b),_0x371c3b,_0x3bfbcf['body']),_0x1f9790['status'](0xc8)[_0x20e124(0x15e)]({'success':![],'message':_0x371c3b instanceof Error?_0x371c3b['message']:'CoinToPay2\x20webhook\x20processing\x20failed'});}},this['handleKlymeWebhook']=async(_0x141651,_0x230aaa,_0x1ec761)=>{const _0x3a6543=_0x118850;try{console['log'](_0x3a6543(0x146),_0x141651['body']),loggerService_1['loggerService']['logWebhookReceived']('klyme',_0x141651[_0x3a6543(0x177)],_0x141651[_0x3a6543(0x159)]);const _0xd07c43=await this[_0x3a6543(0x160)][_0x3a6543(0x170)](_0x141651['body']);_0x230aaa['status'](0xc8)[_0x3a6543(0x15e)]({'success':!![],'message':_0x3a6543(0x156)});}catch(_0x285519){console[_0x3a6543(0x14c)](_0x3a6543(0x17a),_0x285519),loggerService_1[_0x3a6543(0x179)][_0x3a6543(0x162)](_0x3a6543(0x140),_0x285519,_0x141651[_0x3a6543(0x177)]),_0x230aaa['status'](0xc8)[_0x3a6543(0x15e)]({'success':![],'message':_0x285519 instanceof Error?_0x285519[_0x3a6543(0x15f)]:'KLYME\x20webhook\x20processing\x20failed'});}},this[_0x118850(0x14e)]=async(_0x197944,_0x59825b,_0x384603)=>{const _0x59803b=_0x118850;try{console[_0x59803b(0x180)]('Received\x20MasterCard\x20webhook:',_0x197944[_0x59803b(0x177)]),loggerService_1['loggerService'][_0x59803b(0x142)]('mastercard',_0x197944['body'],_0x197944[_0x59803b(0x159)]);const _0x29fbb3=await this['webhookService'][_0x59803b(0x13b)](_0x197944[_0x59803b(0x177)]);_0x59825b['status'](0xc8)[_0x59803b(0x15e)]({'success':!![],'message':_0x59803b(0x17d)});}catch(_0x88b3d4){console['error'](_0x59803b(0x138),_0x88b3d4),loggerService_1[_0x59803b(0x179)]['logWebhookError'](_0x59803b(0x15d),_0x88b3d4,_0x197944['body']),_0x59825b[_0x59803b(0x143)](0xc8)['json']({'success':![],'message':_0x88b3d4 instanceof Error?_0x88b3d4[_0x59803b(0x15f)]:_0x59803b(0x13f)});}},this[_0x118850(0x160)]=new webhookService_1[(_0x118850(0x182))]();}}exports[a15_0x3f5e67(0x163)]=WebhookController;