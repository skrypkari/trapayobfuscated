'use strict';function a15_0x11af(_0x1de9ca,_0x5eb278){const _0x58f9bb=a15_0x58f9();return a15_0x11af=function(_0x11af63,_0x246603){_0x11af63=_0x11af63-0x14f;let _0x5220de=_0x58f9bb[_0x11af63];return _0x5220de;},a15_0x11af(_0x1de9ca,_0x5eb278);}const a15_0x2e71f1=a15_0x11af;(function(_0x7a9c2e,_0x4781ac){const _0x1e1e64=a15_0x11af,_0x35be33=_0x7a9c2e();while(!![]){try{const _0x25a755=-parseInt(_0x1e1e64(0x159))/0x1+parseInt(_0x1e1e64(0x17c))/0x2+parseInt(_0x1e1e64(0x18d))/0x3*(-parseInt(_0x1e1e64(0x15c))/0x4)+-parseInt(_0x1e1e64(0x173))/0x5+-parseInt(_0x1e1e64(0x175))/0x6+-parseInt(_0x1e1e64(0x154))/0x7*(-parseInt(_0x1e1e64(0x188))/0x8)+parseInt(_0x1e1e64(0x152))/0x9;if(_0x25a755===_0x4781ac)break;else _0x35be33['push'](_0x35be33['shift']());}catch(_0x4f054){_0x35be33['push'](_0x35be33['shift']());}}}(a15_0x58f9,0x97ba6));function a15_0x58f9(){const _0x229e5d=['processPlisioGatewayWebhook','mastercard','139143yrJzgy','WebhookController','MasterCard\x20webhook\x20processing\x20failed','KLYME\x20webhook\x20processing\x20failed','Received\x20Noda\x20webhook:','loggerService','log','Content-Type','26727102QXfEQY','KLYME\x20webhook\x20processing\x20error:','13020DvtMSw','Raw\x20body\x20type:','rapyd','logWebhookReceived','===\x20PLISIO\x20WEBHOOK\x20RECEIVED\x20===','892176NSWSXz','KLYME\x20webhook\x20processed\x20successfully','error','28xxyLBJ','handleRapydWebhook','status','processMasterCardWebhook','Content-Type:','Body\x20content:','Webhook\x20processing\x20error:','body','Body\x20keys:','CoinToPay\x20webhook\x20processing\x20failed','Received\x20KLYME\x20webhook:','../services/loggerService','Rapyd\x20webhook\x20processing\x20error:','plisio','WebhookService','handleKlymeWebhook','headers','message','handleCoinToPayWebhook','Gateway\x20webhook\x20processed\x20successfully','../services/webhookService','Rapyd\x20webhook\x20processing\x20failed','keys','4066555rDqpal','Received\x20CoinToPay\x20webhook:','4112508CLLgBT','logWebhookError','handlePlisioWebhook','Rapyd\x20webhook\x20processed\x20successfully','webhookService','handlePlisioGatewayWebhook','plisio_gateway','269744olbUbH','defineProperty','handleMasterCardWebhook','get','klyme','CoinToPay\x20webhook\x20processing\x20error:','===\x20PLISIO\x20GATEWAY\x20WEBHOOK\x20RECEIVED\x20===','json','Noda\x20webhook\x20processing\x20error:','Webhook\x20processed\x20successfully','processCoinToPayWebhook','cointopay','1000UKsyWK','MasterCard\x20webhook\x20processed\x20successfully','processPlisioWebhook'];a15_0x58f9=function(){return _0x229e5d;};return a15_0x58f9();}Object[a15_0x2e71f1(0x17d)](exports,'__esModule',{'value':!![]}),exports[a15_0x2e71f1(0x18e)]=void 0x0;const webhookService_1=require(a15_0x2e71f1(0x170)),loggerService_1=require(a15_0x2e71f1(0x167));class WebhookController{constructor(){const _0xb293d=a15_0x2e71f1;this[_0xb293d(0x177)]=async(_0x16267a,_0xfa8cf6,_0x4af614)=>{const _0x2d937d=_0xb293d;try{console[_0x2d937d(0x150)](_0x2d937d(0x158)),console[_0x2d937d(0x150)](_0x2d937d(0x160),_0x16267a[_0x2d937d(0x17f)]('Content-Type')),console[_0x2d937d(0x150)]('Raw\x20body\x20type:',typeof _0x16267a[_0x2d937d(0x163)]),console['log'](_0x2d937d(0x164),Object['keys'](_0x16267a[_0x2d937d(0x163)]||{})),console['log']('Body\x20content:',_0x16267a['body']),loggerService_1[_0x2d937d(0x14f)]['logWebhookReceived'](_0x2d937d(0x169),_0x16267a[_0x2d937d(0x163)],_0x16267a['headers']);const _0x21218a=await this[_0x2d937d(0x179)][_0x2d937d(0x18a)](_0x16267a['body']);_0xfa8cf6[_0x2d937d(0x15e)](0xc8)[_0x2d937d(0x183)]({'success':!![],'message':_0x2d937d(0x185)});}catch(_0x203db6){console[_0x2d937d(0x15b)](_0x2d937d(0x162),_0x203db6),loggerService_1['loggerService'][_0x2d937d(0x176)]('plisio',_0x203db6,_0x16267a['body']),_0xfa8cf6[_0x2d937d(0x15e)](0xc8)['json']({'success':![],'message':_0x203db6 instanceof Error?_0x203db6[_0x2d937d(0x16d)]:'Webhook\x20processing\x20failed'});}},this[_0xb293d(0x17a)]=async(_0x1ef03e,_0x5c288a,_0x4902f9)=>{const _0x3ad203=_0xb293d;try{console[_0x3ad203(0x150)](_0x3ad203(0x182)),console[_0x3ad203(0x150)](_0x3ad203(0x160),_0x1ef03e[_0x3ad203(0x17f)](_0x3ad203(0x151))),console[_0x3ad203(0x150)](_0x3ad203(0x155),typeof _0x1ef03e[_0x3ad203(0x163)]),console['log'](_0x3ad203(0x164),Object[_0x3ad203(0x172)](_0x1ef03e['body']||{})),console['log'](_0x3ad203(0x161),_0x1ef03e[_0x3ad203(0x163)]),loggerService_1[_0x3ad203(0x14f)]['logWebhookReceived'](_0x3ad203(0x17b),_0x1ef03e['body'],_0x1ef03e[_0x3ad203(0x16c)]);const _0x3cbfab=await this['webhookService'][_0x3ad203(0x18b)](_0x1ef03e[_0x3ad203(0x163)]);_0x5c288a['status'](0xc8)[_0x3ad203(0x183)]({'success':!![],'message':_0x3ad203(0x16f)});}catch(_0x211d08){console['error']('Gateway\x20webhook\x20processing\x20error:',_0x211d08),loggerService_1[_0x3ad203(0x14f)][_0x3ad203(0x176)](_0x3ad203(0x17b),_0x211d08,_0x1ef03e['body']),_0x5c288a['status'](0xc8)['json']({'success':![],'message':_0x211d08 instanceof Error?_0x211d08[_0x3ad203(0x16d)]:'Gateway\x20webhook\x20processing\x20failed'});}},this[_0xb293d(0x15d)]=async(_0x488c53,_0x563357,_0x1696fa)=>{const _0x15c3f5=_0xb293d;try{console[_0x15c3f5(0x150)]('Received\x20Rapyd\x20webhook:',_0x488c53['body']),loggerService_1[_0x15c3f5(0x14f)][_0x15c3f5(0x157)]('rapyd',_0x488c53[_0x15c3f5(0x163)],_0x488c53[_0x15c3f5(0x16c)]);const _0x48d34e=await this[_0x15c3f5(0x179)]['processRapydWebhook'](_0x488c53[_0x15c3f5(0x163)]);_0x563357[_0x15c3f5(0x15e)](0xc8)[_0x15c3f5(0x183)]({'success':!![],'message':_0x15c3f5(0x178)});}catch(_0x3a0091){console['error'](_0x15c3f5(0x168),_0x3a0091),loggerService_1[_0x15c3f5(0x14f)][_0x15c3f5(0x176)](_0x15c3f5(0x156),_0x3a0091,_0x488c53[_0x15c3f5(0x163)]),_0x563357[_0x15c3f5(0x15e)](0xc8)['json']({'success':![],'message':_0x3a0091 instanceof Error?_0x3a0091[_0x15c3f5(0x16d)]:_0x15c3f5(0x171)});}},this['handleNodaWebhook']=async(_0x39c574,_0xed0b44,_0x5406c0)=>{const _0x1fcb52=_0xb293d;try{console['log'](_0x1fcb52(0x191),_0x39c574[_0x1fcb52(0x163)]),loggerService_1[_0x1fcb52(0x14f)][_0x1fcb52(0x157)]('noda',_0x39c574[_0x1fcb52(0x163)],_0x39c574[_0x1fcb52(0x16c)]);const _0x40d383=await this[_0x1fcb52(0x179)]['processNodaWebhook'](_0x39c574['body']);_0xed0b44['status'](0xc8)['json']({'success':!![],'message':'Noda\x20webhook\x20processed\x20successfully'});}catch(_0x4001ad){console[_0x1fcb52(0x15b)](_0x1fcb52(0x184),_0x4001ad),loggerService_1[_0x1fcb52(0x14f)]['logWebhookError']('noda',_0x4001ad,_0x39c574[_0x1fcb52(0x163)]),_0xed0b44['status'](0xc8)[_0x1fcb52(0x183)]({'success':![],'message':_0x4001ad instanceof Error?_0x4001ad[_0x1fcb52(0x16d)]:'Noda\x20webhook\x20processing\x20failed'});}},this[_0xb293d(0x16e)]=async(_0xe468ef,_0x16afd4,_0x146b45)=>{const _0x1a51fa=_0xb293d;try{console[_0x1a51fa(0x150)](_0x1a51fa(0x174),_0xe468ef[_0x1a51fa(0x163)]),loggerService_1[_0x1a51fa(0x14f)]['logWebhookReceived']('cointopay',_0xe468ef[_0x1a51fa(0x163)],_0xe468ef[_0x1a51fa(0x16c)]);const _0x4eec3a=await this[_0x1a51fa(0x179)][_0x1a51fa(0x186)](_0xe468ef['body']);_0x16afd4[_0x1a51fa(0x15e)](0xc8)[_0x1a51fa(0x183)]({'success':!![],'message':'CoinToPay\x20webhook\x20processed\x20successfully'});}catch(_0x164ddb){console[_0x1a51fa(0x15b)](_0x1a51fa(0x181),_0x164ddb),loggerService_1[_0x1a51fa(0x14f)]['logWebhookError'](_0x1a51fa(0x187),_0x164ddb,_0xe468ef[_0x1a51fa(0x163)]),_0x16afd4[_0x1a51fa(0x15e)](0xc8)['json']({'success':![],'message':_0x164ddb instanceof Error?_0x164ddb[_0x1a51fa(0x16d)]:_0x1a51fa(0x165)});}},this[_0xb293d(0x16b)]=async(_0x59d55b,_0x39c055,_0x305920)=>{const _0x516750=_0xb293d;try{console['log'](_0x516750(0x166),_0x59d55b[_0x516750(0x163)]),loggerService_1[_0x516750(0x14f)][_0x516750(0x157)](_0x516750(0x180),_0x59d55b[_0x516750(0x163)],_0x59d55b[_0x516750(0x16c)]);const _0x3693f3=await this[_0x516750(0x179)]['processKlymeWebhook'](_0x59d55b[_0x516750(0x163)]);_0x39c055[_0x516750(0x15e)](0xc8)[_0x516750(0x183)]({'success':!![],'message':_0x516750(0x15a)});}catch(_0x11459d){console[_0x516750(0x15b)](_0x516750(0x153),_0x11459d),loggerService_1[_0x516750(0x14f)][_0x516750(0x176)](_0x516750(0x180),_0x11459d,_0x59d55b['body']),_0x39c055[_0x516750(0x15e)](0xc8)['json']({'success':![],'message':_0x11459d instanceof Error?_0x11459d[_0x516750(0x16d)]:_0x516750(0x190)});}},this[_0xb293d(0x17e)]=async(_0x2f4aeb,_0x35d404,_0x3e6993)=>{const _0x4724f6=_0xb293d;try{console[_0x4724f6(0x150)]('Received\x20MasterCard\x20webhook:',_0x2f4aeb[_0x4724f6(0x163)]),loggerService_1[_0x4724f6(0x14f)][_0x4724f6(0x157)](_0x4724f6(0x18c),_0x2f4aeb['body'],_0x2f4aeb[_0x4724f6(0x16c)]);const _0x5f328e=await this[_0x4724f6(0x179)][_0x4724f6(0x15f)](_0x2f4aeb[_0x4724f6(0x163)]);_0x35d404['status'](0xc8)[_0x4724f6(0x183)]({'success':!![],'message':_0x4724f6(0x189)});}catch(_0x3bf8d6){console['error']('MasterCard\x20webhook\x20processing\x20error:',_0x3bf8d6),loggerService_1[_0x4724f6(0x14f)][_0x4724f6(0x176)](_0x4724f6(0x18c),_0x3bf8d6,_0x2f4aeb[_0x4724f6(0x163)]),_0x35d404[_0x4724f6(0x15e)](0xc8)['json']({'success':![],'message':_0x3bf8d6 instanceof Error?_0x3bf8d6[_0x4724f6(0x16d)]:_0x4724f6(0x18f)});}},this[_0xb293d(0x179)]=new webhookService_1[(_0xb293d(0x16a))]();}}exports[a15_0x2e71f1(0x18e)]=WebhookController;