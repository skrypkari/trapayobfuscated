'use strict';const a16_0x411d1e=a16_0x2a01;function a16_0x2a01(_0x29b759,_0x58311e){const _0x42067d=a16_0x4206();return a16_0x2a01=function(_0x2a013f,_0x4d5e83){_0x2a013f=_0x2a013f-0x82;let _0xef1574=_0x42067d[_0x2a013f];return _0xef1574;},a16_0x2a01(_0x29b759,_0x58311e);}(function(_0x1a6d4a,_0x365b97){const _0x95849d=a16_0x2a01,_0x66f595=_0x1a6d4a();while(!![]){try{const _0x21253b=parseInt(_0x95849d(0xea))/0x1*(-parseInt(_0x95849d(0x95))/0x2)+-parseInt(_0x95849d(0xc6))/0x3*(parseInt(_0x95849d(0xe7))/0x4)+parseInt(_0x95849d(0x96))/0x5*(parseInt(_0x95849d(0x9d))/0x6)+parseInt(_0x95849d(0xc1))/0x7+-parseInt(_0x95849d(0xe9))/0x8+-parseInt(_0x95849d(0xde))/0x9+parseInt(_0x95849d(0x9a))/0xa;if(_0x21253b===_0x365b97)break;else _0x66f595['push'](_0x66f595['shift']());}catch(_0x4ccd39){_0x66f595['push'](_0x66f595['shift']());}}}(a16_0x4206,0xe3a71));Object['defineProperty'](exports,a16_0x411d1e(0xab),{'value':!![]}),exports[a16_0x411d1e(0xca)]=void 0x0;const webhookService_1=require('../services/webhookService'),loggerService_1=require(a16_0x411d1e(0xdd));function a16_0x4206(){const _0x9ccc97=['===\x20AmPay\x20Webhook\x20Received\x20===','handleAmerWebhook','cointopay','json','handleRapydWebhook','CoinToPay2\x20webhook\x20processed\x20successfully','processPlisioWebhook','KLYME\x20webhook\x20processing\x20error:','Amer\x20webhook\x20processed\x20successfully','Method:','MasterCard\x20webhook\x20processing\x20failed','loggerService','===\x20PLISIO\x20GATEWAY\x20WEBHOOK\x20RECEIVED\x20===','handleNodaWebhook','processAmPayTRYWebhook','../services/loggerService','5294727CWrUsZ','Rapyd\x20webhook\x20processing\x20failed','logWebhookReceived','error','processAmPayWebhook','Gateway\x20webhook\x20processing\x20failed','CoinToPay2\x20webhook\x20processing\x20failed','Body\x20type:','processNodaWebhook','72hcChwe','klyme','12766128nutFAF','4078ZhKrGZ','MyXSpend\x20webhook\x20processing\x20error:','===\x20MyXSpend\x20Webhook\x20Received\x20===','Body\x20content:','Raw\x20body\x20type:','Rapyd\x20webhook\x20processing\x20error:','WebhookService','===\x20AmPay\x20TRY\x20Webhook\x20Received\x20===','processCoinToPayWebhook','processAmerWebhook','Gateway\x20webhook\x20processing\x20error:','Content-Type','handleCoinToPayWebhook','message','processVisaWebhook','KLYME\x20webhook\x20processing\x20failed','handleAmPayTRYWebhook','Amer\x20webhook\x20processing\x20failed','handlePlisioWebhook','Received\x20Amer\x20webhook:','amer','processMasterCardWebhook','794eDOtrY','55CTqjFH','Gateway\x20webhook\x20processed\x20successfully','Rapyd\x20webhook\x20processed\x20successfully','myxspend','31636010NJrZGA','query','processKlymeWebhook','411546XkTcSB','AmPay\x20webhook\x20processed\x20successfully','Noda\x20webhook\x20processing\x20error:','Noda\x20webhook\x20processing\x20failed','CoinToPay\x20webhook\x20processing\x20error:','Received\x20CoinToPay\x20webhook:','method','status','ampay_try','get','Received\x20CoinToPay2\x20webhook:','AmPay\x20TRY\x20webhook\x20processed\x20successfully','MyXSpend\x20webhook\x20processing\x20failed','cointopay2','__esModule','handleVisaWebhook','Webhook\x20processing\x20error:','logWebhookError','handlePlisioGatewayWebhook','mastercard','webhookService','Received\x20KLYME\x20webhook:','MyXSpend\x20webhook\x20processed\x20successfully','Amer\x20webhook\x20processing\x20error:','MasterCard\x20webhook\x20processed\x20successfully','handleAmPayWebhook','handleKlymeWebhook','plisio_gateway','Headers:','Noda\x20webhook\x20processed\x20successfully','log','Body:','processMyXSpendWebhook','CoinToPay\x20webhook\x20processed\x20successfully','headers','rapyd','7245756bvpKWA','VISA\x20webhook\x20processed\x20successfully','processPlisioGatewayWebhook','Content-Type:','Received\x20MasterCard\x20webhook:','36285NDtKqS','handleMasterCardWebhook','processRapydWebhook','body','WebhookController','keys','Webhook\x20processing\x20failed','Body\x20keys:'];a16_0x4206=function(){return _0x9ccc97;};return a16_0x4206();}class WebhookController{constructor(){const _0x1b1a64=a16_0x411d1e;this[_0x1b1a64(0x91)]=async(_0x4833af,_0x4f4ae6,_0x456f0c)=>{const _0x576e4c=_0x1b1a64;try{console[_0x576e4c(0xbb)]('===\x20PLISIO\x20WEBHOOK\x20RECEIVED\x20==='),console['log'](_0x576e4c(0xc4),_0x4833af['get'](_0x576e4c(0x8a))),console[_0x576e4c(0xbb)](_0x576e4c(0x83),typeof _0x4833af[_0x576e4c(0xc9)]),console['log'](_0x576e4c(0xcd),Object[_0x576e4c(0xcb)](_0x4833af[_0x576e4c(0xc9)]||{})),console[_0x576e4c(0xbb)](_0x576e4c(0x82),_0x4833af['body']),loggerService_1['loggerService'][_0x576e4c(0xe0)]('plisio',_0x4833af[_0x576e4c(0xc9)],_0x4833af[_0x576e4c(0xbf)]);const _0x1539dd=await this[_0x576e4c(0xb1)][_0x576e4c(0xd4)](_0x4833af[_0x576e4c(0xc9)]);_0x4f4ae6[_0x576e4c(0xa4)](0xc8)[_0x576e4c(0xd1)]({'success':!![],'message':'Webhook\x20processed\x20successfully'});}catch(_0xf215b1){console[_0x576e4c(0xe1)](_0x576e4c(0xad),_0xf215b1),loggerService_1['loggerService'][_0x576e4c(0xae)]('plisio',_0xf215b1,_0x4833af[_0x576e4c(0xc9)]),_0x4f4ae6[_0x576e4c(0xa4)](0xc8)[_0x576e4c(0xd1)]({'success':![],'message':_0xf215b1 instanceof Error?_0xf215b1[_0x576e4c(0x8c)]:_0x576e4c(0xcc)});}},this[_0x1b1a64(0xaf)]=async(_0x4f6f3d,_0x2f0275,_0x1df73d)=>{const _0x247749=_0x1b1a64;try{console['log'](_0x247749(0xda)),console[_0x247749(0xbb)]('Content-Type:',_0x4f6f3d[_0x247749(0xa6)](_0x247749(0x8a))),console[_0x247749(0xbb)](_0x247749(0x83),typeof _0x4f6f3d['body']),console[_0x247749(0xbb)]('Body\x20keys:',Object[_0x247749(0xcb)](_0x4f6f3d[_0x247749(0xc9)]||{})),console[_0x247749(0xbb)]('Body\x20content:',_0x4f6f3d[_0x247749(0xc9)]),loggerService_1[_0x247749(0xd9)][_0x247749(0xe0)](_0x247749(0xb8),_0x4f6f3d[_0x247749(0xc9)],_0x4f6f3d[_0x247749(0xbf)]);const _0x864f2a=await this[_0x247749(0xb1)][_0x247749(0xc3)](_0x4f6f3d[_0x247749(0xc9)]);_0x2f0275[_0x247749(0xa4)](0xc8)['json']({'success':!![],'message':_0x247749(0x97)});}catch(_0x1277c5){console[_0x247749(0xe1)](_0x247749(0x89),_0x1277c5),loggerService_1[_0x247749(0xd9)]['logWebhookError'](_0x247749(0xb8),_0x1277c5,_0x4f6f3d[_0x247749(0xc9)]),_0x2f0275['status'](0xc8)[_0x247749(0xd1)]({'success':![],'message':_0x1277c5 instanceof Error?_0x1277c5[_0x247749(0x8c)]:_0x247749(0xe3)});}},this[_0x1b1a64(0xd2)]=async(_0x2b532c,_0x337671,_0x597fd7)=>{const _0x17d648=_0x1b1a64;try{console[_0x17d648(0xbb)]('Received\x20Rapyd\x20webhook:',_0x2b532c[_0x17d648(0xc9)]),loggerService_1[_0x17d648(0xd9)][_0x17d648(0xe0)](_0x17d648(0xc0),_0x2b532c[_0x17d648(0xc9)],_0x2b532c[_0x17d648(0xbf)]);const _0xccabbf=await this[_0x17d648(0xb1)][_0x17d648(0xc8)](_0x2b532c[_0x17d648(0xc9)]);_0x337671['status'](0xc8)[_0x17d648(0xd1)]({'success':!![],'message':_0x17d648(0x98)});}catch(_0x158802){console['error'](_0x17d648(0x84),_0x158802),loggerService_1[_0x17d648(0xd9)][_0x17d648(0xae)](_0x17d648(0xc0),_0x158802,_0x2b532c[_0x17d648(0xc9)]),_0x337671[_0x17d648(0xa4)](0xc8)[_0x17d648(0xd1)]({'success':![],'message':_0x158802 instanceof Error?_0x158802[_0x17d648(0x8c)]:_0x17d648(0xdf)});}},this[_0x1b1a64(0xdb)]=async(_0x4583a0,_0x5b5b7a,_0x2462d6)=>{const _0x58dcca=_0x1b1a64;try{console['log']('Received\x20Noda\x20webhook:',_0x4583a0[_0x58dcca(0xc9)]),loggerService_1[_0x58dcca(0xd9)][_0x58dcca(0xe0)]('noda',_0x4583a0[_0x58dcca(0xc9)],_0x4583a0['headers']);const _0x19cddc=await this[_0x58dcca(0xb1)][_0x58dcca(0xe6)](_0x4583a0['body']);_0x5b5b7a[_0x58dcca(0xa4)](0xc8)['json']({'success':!![],'message':_0x58dcca(0xba)});}catch(_0x3a8ea4){console['error'](_0x58dcca(0x9f),_0x3a8ea4),loggerService_1[_0x58dcca(0xd9)][_0x58dcca(0xae)]('noda',_0x3a8ea4,_0x4583a0[_0x58dcca(0xc9)]),_0x5b5b7a[_0x58dcca(0xa4)](0xc8)[_0x58dcca(0xd1)]({'success':![],'message':_0x3a8ea4 instanceof Error?_0x3a8ea4[_0x58dcca(0x8c)]:_0x58dcca(0xa0)});}},this[_0x1b1a64(0x8b)]=async(_0x4647f1,_0x314322,_0x38559f)=>{const _0x3e841d=_0x1b1a64;try{console[_0x3e841d(0xbb)](_0x3e841d(0xa2),_0x4647f1[_0x3e841d(0xc9)]),loggerService_1[_0x3e841d(0xd9)][_0x3e841d(0xe0)](_0x3e841d(0xd0),_0x4647f1['body'],_0x4647f1['headers']);const _0x4e2649=await this['webhookService'][_0x3e841d(0x87)](_0x4647f1[_0x3e841d(0xc9)]);_0x314322[_0x3e841d(0xa4)](0xc8)['json']({'success':!![],'message':_0x3e841d(0xbe)});}catch(_0x1ada75){console[_0x3e841d(0xe1)](_0x3e841d(0xa1),_0x1ada75),loggerService_1[_0x3e841d(0xd9)][_0x3e841d(0xae)]('cointopay',_0x1ada75,_0x4647f1[_0x3e841d(0xc9)]),_0x314322[_0x3e841d(0xa4)](0xc8)[_0x3e841d(0xd1)]({'success':![],'message':_0x1ada75 instanceof Error?_0x1ada75['message']:'CoinToPay\x20webhook\x20processing\x20failed'});}},this['handleCoinToPay2Webhook']=async(_0x3361a3,_0x1119d7,_0x4d749e)=>{const _0x13c167=_0x1b1a64;try{console[_0x13c167(0xbb)](_0x13c167(0xa7),_0x3361a3[_0x13c167(0xc9)]),loggerService_1[_0x13c167(0xd9)][_0x13c167(0xe0)](_0x13c167(0xaa),_0x3361a3[_0x13c167(0xc9)],_0x3361a3[_0x13c167(0xbf)]);const _0x380298=await this[_0x13c167(0xb1)]['processCoinToPay2Webhook'](_0x3361a3[_0x13c167(0xc9)]);_0x1119d7['status'](0xc8)[_0x13c167(0xd1)]({'success':!![],'message':_0x13c167(0xd3)});}catch(_0x142ae1){console[_0x13c167(0xe1)]('CoinToPay2\x20webhook\x20processing\x20error:',_0x142ae1),loggerService_1[_0x13c167(0xd9)][_0x13c167(0xae)](_0x13c167(0xaa),_0x142ae1,_0x3361a3['body']),_0x1119d7[_0x13c167(0xa4)](0xc8)[_0x13c167(0xd1)]({'success':![],'message':_0x142ae1 instanceof Error?_0x142ae1[_0x13c167(0x8c)]:_0x13c167(0xe4)});}},this[_0x1b1a64(0xb7)]=async(_0x18eac2,_0x45210f,_0x347001)=>{const _0xc5cd63=_0x1b1a64;try{console[_0xc5cd63(0xbb)](_0xc5cd63(0xb2),_0x18eac2[_0xc5cd63(0xc9)]),loggerService_1[_0xc5cd63(0xd9)][_0xc5cd63(0xe0)](_0xc5cd63(0xe8),_0x18eac2['body'],_0x18eac2[_0xc5cd63(0xbf)]);const _0x915541=await this[_0xc5cd63(0xb1)][_0xc5cd63(0x9c)](_0x18eac2[_0xc5cd63(0xc9)]);_0x45210f[_0xc5cd63(0xa4)](0xc8)['json']({'success':!![],'message':'KLYME\x20webhook\x20processed\x20successfully'});}catch(_0x1d9ae4){console['error'](_0xc5cd63(0xd5),_0x1d9ae4),loggerService_1[_0xc5cd63(0xd9)]['logWebhookError'](_0xc5cd63(0xe8),_0x1d9ae4,_0x18eac2[_0xc5cd63(0xc9)]),_0x45210f[_0xc5cd63(0xa4)](0xc8)['json']({'success':![],'message':_0x1d9ae4 instanceof Error?_0x1d9ae4[_0xc5cd63(0x8c)]:_0xc5cd63(0x8e)});}},this[_0x1b1a64(0xac)]=async(_0x44fdeb,_0x2efcc8,_0x47ddcf)=>{const _0xd7971f=_0x1b1a64;try{console['log']('Received\x20VISA\x20webhook:',_0x44fdeb['body']),loggerService_1['loggerService'][_0xd7971f(0xe0)]('visa',_0x44fdeb[_0xd7971f(0xc9)],_0x44fdeb[_0xd7971f(0xbf)]);const _0x1461ed=await this[_0xd7971f(0xb1)][_0xd7971f(0x8d)](_0x44fdeb[_0xd7971f(0xc9)]);_0x2efcc8[_0xd7971f(0xa4)](0xc8)['json']({'success':!![],'message':_0xd7971f(0xc2)});}catch(_0x270ba3){console['error']('VISA\x20webhook\x20processing\x20error:',_0x270ba3),loggerService_1['loggerService'][_0xd7971f(0xae)]('visa',_0x270ba3,_0x44fdeb['body']),_0x2efcc8[_0xd7971f(0xa4)](0xc8)[_0xd7971f(0xd1)]({'success':![],'message':_0x270ba3 instanceof Error?_0x270ba3[_0xd7971f(0x8c)]:'VISA\x20webhook\x20processing\x20failed'});}},this[_0x1b1a64(0xc7)]=async(_0x1523ef,_0x12ce0f,_0x48d094)=>{const _0x4886ae=_0x1b1a64;try{console[_0x4886ae(0xbb)](_0x4886ae(0xc5),_0x1523ef[_0x4886ae(0xc9)]),loggerService_1['loggerService'][_0x4886ae(0xe0)](_0x4886ae(0xb0),_0x1523ef[_0x4886ae(0xc9)],_0x1523ef['headers']);const _0x49fa72=await this[_0x4886ae(0xb1)][_0x4886ae(0x94)](_0x1523ef[_0x4886ae(0xc9)]);_0x12ce0f['status'](0xc8)[_0x4886ae(0xd1)]({'success':!![],'message':_0x4886ae(0xb5)});}catch(_0x2a2c25){console[_0x4886ae(0xe1)]('MasterCard\x20webhook\x20processing\x20error:',_0x2a2c25),loggerService_1[_0x4886ae(0xd9)][_0x4886ae(0xae)]('mastercard',_0x2a2c25,_0x1523ef['body']),_0x12ce0f['status'](0xc8)['json']({'success':![],'message':_0x2a2c25 instanceof Error?_0x2a2c25[_0x4886ae(0x8c)]:_0x4886ae(0xd8)});}},this[_0x1b1a64(0xcf)]=async(_0x4b55fb,_0x261a26,_0x2982d3)=>{const _0x38e0bc=_0x1b1a64;try{console[_0x38e0bc(0xbb)](_0x38e0bc(0x92),_0x4b55fb[_0x38e0bc(0xc9)]),loggerService_1[_0x38e0bc(0xd9)][_0x38e0bc(0xe0)](_0x38e0bc(0x93),_0x4b55fb['body'],_0x4b55fb[_0x38e0bc(0xbf)]);const _0x3e70fe=await this[_0x38e0bc(0xb1)][_0x38e0bc(0x88)](_0x4b55fb[_0x38e0bc(0xc9)]);_0x261a26[_0x38e0bc(0xa4)](0xc8)[_0x38e0bc(0xd1)]({'success':!![],'message':_0x38e0bc(0xd6)});}catch(_0x449d8b){console[_0x38e0bc(0xe1)](_0x38e0bc(0xb4),_0x449d8b),loggerService_1[_0x38e0bc(0xd9)][_0x38e0bc(0xae)](_0x38e0bc(0x93),_0x449d8b,_0x4b55fb[_0x38e0bc(0xc9)]),_0x261a26[_0x38e0bc(0xa4)](0xc8)['json']({'success':![],'message':_0x449d8b instanceof Error?_0x449d8b[_0x38e0bc(0x8c)]:_0x38e0bc(0x90)});}},this[_0x1b1a64(0xb6)]=async(_0x3c4f9d,_0x410298,_0x58d98b)=>{const _0x7d8f27=_0x1b1a64;try{console[_0x7d8f27(0xbb)](_0x7d8f27(0xce)),console[_0x7d8f27(0xbb)](_0x7d8f27(0xb9),_0x3c4f9d[_0x7d8f27(0xbf)]),console[_0x7d8f27(0xbb)](_0x7d8f27(0xbc),_0x3c4f9d[_0x7d8f27(0xc9)]),console[_0x7d8f27(0xbb)](_0x7d8f27(0xe5),typeof _0x3c4f9d[_0x7d8f27(0xc9)]),console['log']('Body\x20keys:',Object[_0x7d8f27(0xcb)](_0x3c4f9d[_0x7d8f27(0xc9)]||{})),loggerService_1[_0x7d8f27(0xd9)][_0x7d8f27(0xe0)]('ampay',_0x3c4f9d[_0x7d8f27(0xc9)],_0x3c4f9d[_0x7d8f27(0xbf)]);const _0x1f0da7=await this[_0x7d8f27(0xb1)][_0x7d8f27(0xe2)](_0x3c4f9d[_0x7d8f27(0xc9)]);_0x410298['status'](0xc8)['json']({'success':!![],'message':_0x7d8f27(0x9e)});}catch(_0x47de6f){console[_0x7d8f27(0xe1)]('AmPay\x20webhook\x20processing\x20error:',_0x47de6f),loggerService_1[_0x7d8f27(0xd9)][_0x7d8f27(0xae)]('ampay',_0x47de6f,_0x3c4f9d[_0x7d8f27(0xc9)]),_0x410298[_0x7d8f27(0xa4)](0xc8)[_0x7d8f27(0xd1)]({'success':![],'message':_0x47de6f instanceof Error?_0x47de6f[_0x7d8f27(0x8c)]:'AmPay\x20webhook\x20processing\x20failed'});}},this[_0x1b1a64(0x8f)]=async(_0x37b59b,_0x46443f,_0x51d85a)=>{const _0x24cb76=_0x1b1a64;try{console[_0x24cb76(0xbb)](_0x24cb76(0x86)),console['log']('Headers:',_0x37b59b[_0x24cb76(0xbf)]),console[_0x24cb76(0xbb)](_0x24cb76(0xbc),_0x37b59b['body']),console[_0x24cb76(0xbb)](_0x24cb76(0xe5),typeof _0x37b59b[_0x24cb76(0xc9)]),console[_0x24cb76(0xbb)](_0x24cb76(0xcd),Object[_0x24cb76(0xcb)](_0x37b59b[_0x24cb76(0xc9)]||{})),loggerService_1[_0x24cb76(0xd9)]['logWebhookReceived']('ampay_try',_0x37b59b[_0x24cb76(0xc9)],_0x37b59b['headers']);const _0x7e56dd=await this[_0x24cb76(0xb1)][_0x24cb76(0xdc)](_0x37b59b['body']);_0x46443f[_0x24cb76(0xa4)](0xc8)[_0x24cb76(0xd1)]({'success':!![],'message':_0x24cb76(0xa8)});}catch(_0x334104){console['error']('AmPay\x20TRY\x20webhook\x20processing\x20error:',_0x334104),loggerService_1['loggerService'][_0x24cb76(0xae)](_0x24cb76(0xa5),_0x334104,_0x37b59b[_0x24cb76(0xc9)]),_0x46443f[_0x24cb76(0xa4)](0xc8)['json']({'success':![],'message':_0x334104 instanceof Error?_0x334104['message']:'AmPay\x20TRY\x20webhook\x20processing\x20failed'});}},this['handleMyXSpendWebhook']=async(_0x59c28d,_0x4b840a,_0x1d2699)=>{const _0x24f1f3=_0x1b1a64;try{console[_0x24f1f3(0xbb)](_0x24f1f3(0xec)),console[_0x24f1f3(0xbb)](_0x24f1f3(0xb9),_0x59c28d[_0x24f1f3(0xbf)]),console[_0x24f1f3(0xbb)]('Query\x20params:',_0x59c28d[_0x24f1f3(0x9b)]),console[_0x24f1f3(0xbb)](_0x24f1f3(0xbc),_0x59c28d[_0x24f1f3(0xc9)]),console[_0x24f1f3(0xbb)](_0x24f1f3(0xd7),_0x59c28d[_0x24f1f3(0xa3)]),loggerService_1[_0x24f1f3(0xd9)][_0x24f1f3(0xe0)](_0x24f1f3(0x99),_0x59c28d['body']||_0x59c28d[_0x24f1f3(0x9b)],_0x59c28d[_0x24f1f3(0xbf)]);const _0x201b25=await this[_0x24f1f3(0xb1)][_0x24f1f3(0xbd)](_0x59c28d[_0x24f1f3(0x9b)],_0x59c28d['body']);_0x4b840a['status'](0xc8)[_0x24f1f3(0xd1)]({'success':!![],'message':_0x24f1f3(0xb3)});}catch(_0x10f451){console[_0x24f1f3(0xe1)](_0x24f1f3(0xeb),_0x10f451),loggerService_1[_0x24f1f3(0xd9)][_0x24f1f3(0xae)]('myxspend',_0x10f451,_0x59c28d[_0x24f1f3(0xc9)]||_0x59c28d['query']),_0x4b840a['status'](0xc8)[_0x24f1f3(0xd1)]({'success':![],'message':_0x10f451 instanceof Error?_0x10f451[_0x24f1f3(0x8c)]:_0x24f1f3(0xa9)});}},this[_0x1b1a64(0xb1)]=new webhookService_1[(_0x1b1a64(0x85))]();}}exports[a16_0x411d1e(0xca)]=WebhookController;