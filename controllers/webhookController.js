'use strict';const a14_0x1ecfee=a14_0xd6eb;function a14_0x575b(){const _0x13f4c6=['logWebhookError','Received\x20CoinToPay\x20webhook:','plisio','KLYME\x20webhook\x20processing\x20error:','WebhookController','Received\x20Noda\x20webhook:','cointopay','615286yMktCf','loggerService','processPlisioGatewayWebhook','Webhook\x20processed\x20successfully','Content-Type','Noda\x20webhook\x20processing\x20failed','handleRapydWebhook','handleKlymeWebhook','Webhook\x20processing\x20failed','21886180okmyME','rapyd','../services/loggerService','12yOXjIb','handlePlisioGatewayWebhook','get','247gidvXA','Received\x20KLYME\x20webhook:','Rapyd\x20webhook\x20processed\x20successfully','handleCoinToPayWebhook','10rYZrPF','Raw\x20body\x20type:','6161392DJtsYb','CoinToPay\x20webhook\x20processed\x20successfully','9yzbFJN','error','klyme','headers','message','WebhookService','===\x20PLISIO\x20GATEWAY\x20WEBHOOK\x20RECEIVED\x20===','Received\x20Rapyd\x20webhook:','processRapydWebhook','plisio_gateway','log','Rapyd\x20webhook\x20processing\x20failed','processPlisioWebhook','4714796jKUAYO','json','Noda\x20webhook\x20processing\x20error:','Rapyd\x20webhook\x20processing\x20error:','CoinToPay\x20webhook\x20processing\x20failed','KLYME\x20webhook\x20processing\x20failed','processNodaWebhook','keys','Body\x20content:','noda','__esModule','821815GgWPsN','Gateway\x20webhook\x20processing\x20failed','processKlymeWebhook','webhookService','logWebhookReceived','4406313AcXcmg','handlePlisioWebhook','body','status'];a14_0x575b=function(){return _0x13f4c6;};return a14_0x575b();}(function(_0x322e0d,_0x5125a6){const _0x3f76fa=a14_0xd6eb,_0x57b307=_0x322e0d();while(!![]){try{const _0x1dcf59=parseInt(_0x3f76fa(0xc5))/0x1*(parseInt(_0x3f76fa(0xc9))/0x2)+-parseInt(_0x3f76fa(0xea))/0x3+parseInt(_0x3f76fa(0xda))/0x4+parseInt(_0x3f76fa(0xe5))/0x5*(-parseInt(_0x3f76fa(0x101))/0x6)+parseInt(_0x3f76fa(0xf5))/0x7+parseInt(_0x3f76fa(0xcb))/0x8*(-parseInt(_0x3f76fa(0xcd))/0x9)+parseInt(_0x3f76fa(0xfe))/0xa;if(_0x1dcf59===_0x5125a6)break;else _0x57b307['push'](_0x57b307['shift']());}catch(_0x29f3f2){_0x57b307['push'](_0x57b307['shift']());}}}(a14_0x575b,0xd8fcb));Object['defineProperty'](exports,a14_0x1ecfee(0xe4),{'value':!![]}),exports['WebhookController']=void 0x0;const webhookService_1=require('../services/webhookService'),loggerService_1=require(a14_0x1ecfee(0x100));function a14_0xd6eb(_0x5cdc8e,_0x7cf36){const _0x575b7b=a14_0x575b();return a14_0xd6eb=function(_0xd6eba6,_0x50a7d9){_0xd6eba6=_0xd6eba6-0xc3;let _0x59cb49=_0x575b7b[_0xd6eba6];return _0x59cb49;},a14_0xd6eb(_0x5cdc8e,_0x7cf36);}class WebhookController{constructor(){const _0x531db8=a14_0x1ecfee;this[_0x531db8(0xeb)]=async(_0x1209f0,_0x3d7860,_0x550644)=>{const _0x942e51=_0x531db8;try{console['log']('===\x20PLISIO\x20WEBHOOK\x20RECEIVED\x20==='),console['log']('Content-Type:',_0x1209f0['get'](_0x942e51(0xf9))),console[_0x942e51(0xd7)]('Raw\x20body\x20type:',typeof _0x1209f0[_0x942e51(0xec)]),console[_0x942e51(0xd7)]('Body\x20keys:',Object[_0x942e51(0xe1)](_0x1209f0[_0x942e51(0xec)]||{})),console['log'](_0x942e51(0xe2),_0x1209f0[_0x942e51(0xec)]),loggerService_1['loggerService'][_0x942e51(0xe9)](_0x942e51(0xf0),_0x1209f0[_0x942e51(0xec)],_0x1209f0[_0x942e51(0xd0)]);const _0x1ea255=await this['webhookService'][_0x942e51(0xd9)](_0x1209f0[_0x942e51(0xec)]);_0x3d7860[_0x942e51(0xed)](0xc8)['json']({'success':!![],'message':_0x942e51(0xf8)});}catch(_0x229e15){console[_0x942e51(0xce)]('Webhook\x20processing\x20error:',_0x229e15),loggerService_1['loggerService'][_0x942e51(0xee)]('plisio',_0x229e15,_0x1209f0[_0x942e51(0xec)]),_0x3d7860[_0x942e51(0xed)](0xc8)['json']({'success':![],'message':_0x229e15 instanceof Error?_0x229e15['message']:_0x942e51(0xfd)});}},this[_0x531db8(0xc3)]=async(_0x9552fe,_0x2b1b5d,_0x38b4c4)=>{const _0x2c147a=_0x531db8;try{console['log'](_0x2c147a(0xd3)),console[_0x2c147a(0xd7)]('Content-Type:',_0x9552fe[_0x2c147a(0xc4)]('Content-Type')),console['log'](_0x2c147a(0xca),typeof _0x9552fe[_0x2c147a(0xec)]),console[_0x2c147a(0xd7)]('Body\x20keys:',Object['keys'](_0x9552fe['body']||{})),console[_0x2c147a(0xd7)]('Body\x20content:',_0x9552fe[_0x2c147a(0xec)]),loggerService_1[_0x2c147a(0xf6)][_0x2c147a(0xe9)](_0x2c147a(0xd6),_0x9552fe[_0x2c147a(0xec)],_0x9552fe[_0x2c147a(0xd0)]);const _0x2c3ab3=await this[_0x2c147a(0xe8)][_0x2c147a(0xf7)](_0x9552fe['body']);_0x2b1b5d[_0x2c147a(0xed)](0xc8)['json']({'success':!![],'message':'Gateway\x20webhook\x20processed\x20successfully'});}catch(_0x4a1989){console[_0x2c147a(0xce)]('Gateway\x20webhook\x20processing\x20error:',_0x4a1989),loggerService_1[_0x2c147a(0xf6)]['logWebhookError'](_0x2c147a(0xd6),_0x4a1989,_0x9552fe['body']),_0x2b1b5d['status'](0xc8)[_0x2c147a(0xdb)]({'success':![],'message':_0x4a1989 instanceof Error?_0x4a1989[_0x2c147a(0xd1)]:_0x2c147a(0xe6)});}},this[_0x531db8(0xfb)]=async(_0x1de7cb,_0x2d769d,_0x295843)=>{const _0x8417ce=_0x531db8;try{console[_0x8417ce(0xd7)](_0x8417ce(0xd4),_0x1de7cb['body']),loggerService_1['loggerService']['logWebhookReceived'](_0x8417ce(0xff),_0x1de7cb[_0x8417ce(0xec)],_0x1de7cb[_0x8417ce(0xd0)]);const _0x115a32=await this[_0x8417ce(0xe8)][_0x8417ce(0xd5)](_0x1de7cb['body']);_0x2d769d[_0x8417ce(0xed)](0xc8)['json']({'success':!![],'message':_0x8417ce(0xc7)});}catch(_0xab63dc){console['error'](_0x8417ce(0xdd),_0xab63dc),loggerService_1[_0x8417ce(0xf6)][_0x8417ce(0xee)](_0x8417ce(0xff),_0xab63dc,_0x1de7cb[_0x8417ce(0xec)]),_0x2d769d['status'](0xc8)[_0x8417ce(0xdb)]({'success':![],'message':_0xab63dc instanceof Error?_0xab63dc['message']:_0x8417ce(0xd8)});}},this['handleNodaWebhook']=async(_0x2afebd,_0x23934f,_0x209aa6)=>{const _0x3e2b49=_0x531db8;try{console[_0x3e2b49(0xd7)](_0x3e2b49(0xf3),_0x2afebd[_0x3e2b49(0xec)]),loggerService_1['loggerService'][_0x3e2b49(0xe9)]('noda',_0x2afebd[_0x3e2b49(0xec)],_0x2afebd[_0x3e2b49(0xd0)]);const _0x2832e8=await this[_0x3e2b49(0xe8)][_0x3e2b49(0xe0)](_0x2afebd['body']);_0x23934f['status'](0xc8)[_0x3e2b49(0xdb)]({'success':!![],'message':'Noda\x20webhook\x20processed\x20successfully'});}catch(_0x11146d){console['error'](_0x3e2b49(0xdc),_0x11146d),loggerService_1[_0x3e2b49(0xf6)]['logWebhookError'](_0x3e2b49(0xe3),_0x11146d,_0x2afebd[_0x3e2b49(0xec)]),_0x23934f[_0x3e2b49(0xed)](0xc8)['json']({'success':![],'message':_0x11146d instanceof Error?_0x11146d[_0x3e2b49(0xd1)]:_0x3e2b49(0xfa)});}},this[_0x531db8(0xc8)]=async(_0x478ce3,_0x4baa1e,_0x1ff043)=>{const _0x47b3ad=_0x531db8;try{console[_0x47b3ad(0xd7)](_0x47b3ad(0xef),_0x478ce3['body']),loggerService_1[_0x47b3ad(0xf6)][_0x47b3ad(0xe9)](_0x47b3ad(0xf4),_0x478ce3[_0x47b3ad(0xec)],_0x478ce3['headers']);const _0x52b49f=await this['webhookService']['processCoinToPayWebhook'](_0x478ce3[_0x47b3ad(0xec)]);_0x4baa1e[_0x47b3ad(0xed)](0xc8)['json']({'success':!![],'message':_0x47b3ad(0xcc)});}catch(_0x6c095e){console[_0x47b3ad(0xce)]('CoinToPay\x20webhook\x20processing\x20error:',_0x6c095e),loggerService_1['loggerService'][_0x47b3ad(0xee)](_0x47b3ad(0xf4),_0x6c095e,_0x478ce3[_0x47b3ad(0xec)]),_0x4baa1e['status'](0xc8)[_0x47b3ad(0xdb)]({'success':![],'message':_0x6c095e instanceof Error?_0x6c095e['message']:_0x47b3ad(0xde)});}},this[_0x531db8(0xfc)]=async(_0x4a2aca,_0x317d88,_0x4c246c)=>{const _0x1238a2=_0x531db8;try{console[_0x1238a2(0xd7)](_0x1238a2(0xc6),_0x4a2aca[_0x1238a2(0xec)]),loggerService_1[_0x1238a2(0xf6)][_0x1238a2(0xe9)](_0x1238a2(0xcf),_0x4a2aca[_0x1238a2(0xec)],_0x4a2aca[_0x1238a2(0xd0)]);const _0x54da0d=await this[_0x1238a2(0xe8)][_0x1238a2(0xe7)](_0x4a2aca[_0x1238a2(0xec)]);_0x317d88[_0x1238a2(0xed)](0xc8)[_0x1238a2(0xdb)]({'success':!![],'message':'KLYME\x20webhook\x20processed\x20successfully'});}catch(_0x558907){console['error'](_0x1238a2(0xf1),_0x558907),loggerService_1[_0x1238a2(0xf6)][_0x1238a2(0xee)](_0x1238a2(0xcf),_0x558907,_0x4a2aca[_0x1238a2(0xec)]),_0x317d88[_0x1238a2(0xed)](0xc8)[_0x1238a2(0xdb)]({'success':![],'message':_0x558907 instanceof Error?_0x558907[_0x1238a2(0xd1)]:_0x1238a2(0xdf)});}},this[_0x531db8(0xe8)]=new webhookService_1[(_0x531db8(0xd2))]();}}exports[a14_0x1ecfee(0xf2)]=WebhookController;