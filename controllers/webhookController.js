'use strict';const a15_0x33c7b3=a15_0x2224;(function(_0x1a5191,_0x47fb40){const _0x3e72f2=a15_0x2224,_0x8dc4cf=_0x1a5191();while(!![]){try{const _0x26a26c=-parseInt(_0x3e72f2(0x1d1))/0x1*(-parseInt(_0x3e72f2(0x1ca))/0x2)+parseInt(_0x3e72f2(0x1af))/0x3*(parseInt(_0x3e72f2(0x1c3))/0x4)+-parseInt(_0x3e72f2(0x19d))/0x5*(-parseInt(_0x3e72f2(0x1b0))/0x6)+parseInt(_0x3e72f2(0x1c0))/0x7*(parseInt(_0x3e72f2(0x1b3))/0x8)+-parseInt(_0x3e72f2(0x1d4))/0x9*(-parseInt(_0x3e72f2(0x1a9))/0xa)+parseInt(_0x3e72f2(0x196))/0xb+-parseInt(_0x3e72f2(0x1b9))/0xc;if(_0x26a26c===_0x47fb40)break;else _0x8dc4cf['push'](_0x8dc4cf['shift']());}catch(_0x2b31df){_0x8dc4cf['push'](_0x8dc4cf['shift']());}}}(a15_0x9d35,0x26422));Object[a15_0x33c7b3(0x1c4)](exports,a15_0x33c7b3(0x19e),{'value':!![]}),exports[a15_0x33c7b3(0x1c6)]=void 0x0;function a15_0x9d35(){const _0x5b59fb=['headers','Received\x20CoinToPay2\x20webhook:','MasterCard\x20webhook\x20processing\x20error:','Received\x20Noda\x20webhook:','90avpnuW','Received\x20CoinToPay\x20webhook:','status','CoinToPay2\x20webhook\x20processing\x20failed','get','logWebhookError','3vhnppK','90rpbLlE','cointopay2','Rapyd\x20webhook\x20processed\x20successfully','64SLpFIX','Webhook\x20processing\x20error:','Received\x20KLYME\x20webhook:','processRapydWebhook','logWebhookReceived','CoinToPay\x20webhook\x20processing\x20failed','10658544ZLyALJ','Noda\x20webhook\x20processing\x20error:','Noda\x20webhook\x20processed\x20successfully','MasterCard\x20webhook\x20processed\x20successfully','Body\x20keys:','handleRapydWebhook','handleCoinToPay2Webhook','149905cuzUyi','KLYME\x20webhook\x20processing\x20error:','===\x20PLISIO\x20WEBHOOK\x20RECEIVED\x20===','678244cZgzZU','defineProperty','CoinToPay2\x20webhook\x20processing\x20error:','WebhookController','WebhookService','rapyd','handleKlymeWebhook','413324ISNgqH','CoinToPay\x20webhook\x20processing\x20error:','processNodaWebhook','KLYME\x20webhook\x20processed\x20successfully','../services/webhookService','cointopay','plisio','1fhOXEO','Raw\x20body\x20type:','processCoinToPayWebhook','96381EFBpbs','loggerService','webhookService','Gateway\x20webhook\x20processing\x20failed','plisio_gateway','Webhook\x20processed\x20successfully','handleNodaWebhook','Noda\x20webhook\x20processing\x20failed','CoinToPay\x20webhook\x20processed\x20successfully','body','handleMasterCardWebhook','Content-Type','1521949ivVHHV','message','Content-Type:','klyme','handlePlisioGatewayWebhook','noda','KLYME\x20webhook\x20processing\x20failed','87545gqSBmY','__esModule','processMasterCardWebhook','json','error','Body\x20content:','MasterCard\x20webhook\x20processing\x20failed','log'];a15_0x9d35=function(){return _0x5b59fb;};return a15_0x9d35();}const webhookService_1=require(a15_0x33c7b3(0x1ce)),loggerService_1=require('../services/loggerService');function a15_0x2224(_0x3d6082,_0x126314){const _0x9d35f5=a15_0x9d35();return a15_0x2224=function(_0x22247d,_0x5e776c){_0x22247d=_0x22247d-0x191;let _0x2641ca=_0x9d35f5[_0x22247d];return _0x2641ca;},a15_0x2224(_0x3d6082,_0x126314);}class WebhookController{constructor(){const _0x5c3efe=a15_0x33c7b3;this['handlePlisioWebhook']=async(_0xb336cc,_0x237b41,_0x54247a)=>{const _0x38ad6a=a15_0x2224;try{console[_0x38ad6a(0x1a4)](_0x38ad6a(0x1c2)),console['log']('Content-Type:',_0xb336cc['get']('Content-Type')),console['log'](_0x38ad6a(0x1d2),typeof _0xb336cc[_0x38ad6a(0x193)]),console['log']('Body\x20keys:',Object['keys'](_0xb336cc[_0x38ad6a(0x193)]||{})),console['log'](_0x38ad6a(0x1a2),_0xb336cc[_0x38ad6a(0x193)]),loggerService_1[_0x38ad6a(0x1d5)][_0x38ad6a(0x1b7)](_0x38ad6a(0x1d0),_0xb336cc['body'],_0xb336cc[_0x38ad6a(0x1a5)]);const _0x380a1c=await this['webhookService']['processPlisioWebhook'](_0xb336cc['body']);_0x237b41[_0x38ad6a(0x1ab)](0xc8)['json']({'success':!![],'message':_0x38ad6a(0x1d9)});}catch(_0x2fe2ec){console[_0x38ad6a(0x1a1)](_0x38ad6a(0x1b4),_0x2fe2ec),loggerService_1[_0x38ad6a(0x1d5)]['logWebhookError'](_0x38ad6a(0x1d0),_0x2fe2ec,_0xb336cc[_0x38ad6a(0x193)]),_0x237b41[_0x38ad6a(0x1ab)](0xc8)[_0x38ad6a(0x1a0)]({'success':![],'message':_0x2fe2ec instanceof Error?_0x2fe2ec[_0x38ad6a(0x197)]:'Webhook\x20processing\x20failed'});}},this[_0x5c3efe(0x19a)]=async(_0x1f58bc,_0x2fbf95,_0x32e95b)=>{const _0x14338b=_0x5c3efe;try{console[_0x14338b(0x1a4)]('===\x20PLISIO\x20GATEWAY\x20WEBHOOK\x20RECEIVED\x20==='),console[_0x14338b(0x1a4)](_0x14338b(0x198),_0x1f58bc[_0x14338b(0x1ad)](_0x14338b(0x195))),console['log'](_0x14338b(0x1d2),typeof _0x1f58bc[_0x14338b(0x193)]),console[_0x14338b(0x1a4)](_0x14338b(0x1bd),Object['keys'](_0x1f58bc['body']||{})),console[_0x14338b(0x1a4)](_0x14338b(0x1a2),_0x1f58bc['body']),loggerService_1[_0x14338b(0x1d5)]['logWebhookReceived'](_0x14338b(0x1d8),_0x1f58bc[_0x14338b(0x193)],_0x1f58bc[_0x14338b(0x1a5)]);const _0x4f61aa=await this[_0x14338b(0x1d6)]['processPlisioGatewayWebhook'](_0x1f58bc[_0x14338b(0x193)]);_0x2fbf95[_0x14338b(0x1ab)](0xc8)['json']({'success':!![],'message':'Gateway\x20webhook\x20processed\x20successfully'});}catch(_0x244505){console[_0x14338b(0x1a1)]('Gateway\x20webhook\x20processing\x20error:',_0x244505),loggerService_1[_0x14338b(0x1d5)][_0x14338b(0x1ae)](_0x14338b(0x1d8),_0x244505,_0x1f58bc[_0x14338b(0x193)]),_0x2fbf95[_0x14338b(0x1ab)](0xc8)[_0x14338b(0x1a0)]({'success':![],'message':_0x244505 instanceof Error?_0x244505[_0x14338b(0x197)]:_0x14338b(0x1d7)});}},this[_0x5c3efe(0x1be)]=async(_0x6f4c5d,_0x3f6c14,_0x4ee2e2)=>{const _0x1a93e0=_0x5c3efe;try{console[_0x1a93e0(0x1a4)]('Received\x20Rapyd\x20webhook:',_0x6f4c5d[_0x1a93e0(0x193)]),loggerService_1[_0x1a93e0(0x1d5)][_0x1a93e0(0x1b7)](_0x1a93e0(0x1c8),_0x6f4c5d['body'],_0x6f4c5d['headers']);const _0x25bed8=await this['webhookService'][_0x1a93e0(0x1b6)](_0x6f4c5d[_0x1a93e0(0x193)]);_0x3f6c14[_0x1a93e0(0x1ab)](0xc8)[_0x1a93e0(0x1a0)]({'success':!![],'message':_0x1a93e0(0x1b2)});}catch(_0x3b74bf){console[_0x1a93e0(0x1a1)]('Rapyd\x20webhook\x20processing\x20error:',_0x3b74bf),loggerService_1[_0x1a93e0(0x1d5)][_0x1a93e0(0x1ae)]('rapyd',_0x3b74bf,_0x6f4c5d[_0x1a93e0(0x193)]),_0x3f6c14['status'](0xc8)[_0x1a93e0(0x1a0)]({'success':![],'message':_0x3b74bf instanceof Error?_0x3b74bf[_0x1a93e0(0x197)]:'Rapyd\x20webhook\x20processing\x20failed'});}},this[_0x5c3efe(0x1da)]=async(_0x432480,_0x5c1730,_0x19d2a0)=>{const _0xd08749=_0x5c3efe;try{console[_0xd08749(0x1a4)](_0xd08749(0x1a8),_0x432480['body']),loggerService_1[_0xd08749(0x1d5)]['logWebhookReceived'](_0xd08749(0x19b),_0x432480[_0xd08749(0x193)],_0x432480[_0xd08749(0x1a5)]);const _0x5b49ed=await this[_0xd08749(0x1d6)][_0xd08749(0x1cc)](_0x432480[_0xd08749(0x193)]);_0x5c1730[_0xd08749(0x1ab)](0xc8)[_0xd08749(0x1a0)]({'success':!![],'message':_0xd08749(0x1bb)});}catch(_0x463e3d){console[_0xd08749(0x1a1)](_0xd08749(0x1ba),_0x463e3d),loggerService_1[_0xd08749(0x1d5)][_0xd08749(0x1ae)](_0xd08749(0x19b),_0x463e3d,_0x432480['body']),_0x5c1730['status'](0xc8)[_0xd08749(0x1a0)]({'success':![],'message':_0x463e3d instanceof Error?_0x463e3d['message']:_0xd08749(0x191)});}},this['handleCoinToPayWebhook']=async(_0x1ad7ab,_0x898152,_0x3d3592)=>{const _0x1cd638=_0x5c3efe;try{console[_0x1cd638(0x1a4)](_0x1cd638(0x1aa),_0x1ad7ab[_0x1cd638(0x193)]),loggerService_1['loggerService']['logWebhookReceived'](_0x1cd638(0x1cf),_0x1ad7ab['body'],_0x1ad7ab['headers']);const _0x4fcba5=await this[_0x1cd638(0x1d6)][_0x1cd638(0x1d3)](_0x1ad7ab['body']);_0x898152[_0x1cd638(0x1ab)](0xc8)[_0x1cd638(0x1a0)]({'success':!![],'message':_0x1cd638(0x192)});}catch(_0x2a725b){console['error'](_0x1cd638(0x1cb),_0x2a725b),loggerService_1['loggerService'][_0x1cd638(0x1ae)](_0x1cd638(0x1cf),_0x2a725b,_0x1ad7ab[_0x1cd638(0x193)]),_0x898152[_0x1cd638(0x1ab)](0xc8)[_0x1cd638(0x1a0)]({'success':![],'message':_0x2a725b instanceof Error?_0x2a725b[_0x1cd638(0x197)]:_0x1cd638(0x1b8)});}},this[_0x5c3efe(0x1bf)]=async(_0x26ca5c,_0xbfa361,_0x497042)=>{const _0x18f066=_0x5c3efe;try{console[_0x18f066(0x1a4)](_0x18f066(0x1a6),_0x26ca5c[_0x18f066(0x193)]),loggerService_1[_0x18f066(0x1d5)][_0x18f066(0x1b7)](_0x18f066(0x1b1),_0x26ca5c[_0x18f066(0x193)],_0x26ca5c[_0x18f066(0x1a5)]);const _0x2e101b=await this[_0x18f066(0x1d6)]['processCoinToPay2Webhook'](_0x26ca5c[_0x18f066(0x193)]);_0xbfa361[_0x18f066(0x1ab)](0xc8)[_0x18f066(0x1a0)]({'success':!![],'message':'CoinToPay2\x20webhook\x20processed\x20successfully'});}catch(_0x3d98be){console[_0x18f066(0x1a1)](_0x18f066(0x1c5),_0x3d98be),loggerService_1['loggerService'][_0x18f066(0x1ae)](_0x18f066(0x1b1),_0x3d98be,_0x26ca5c[_0x18f066(0x193)]),_0xbfa361[_0x18f066(0x1ab)](0xc8)[_0x18f066(0x1a0)]({'success':![],'message':_0x3d98be instanceof Error?_0x3d98be['message']:_0x18f066(0x1ac)});}},this[_0x5c3efe(0x1c9)]=async(_0x444a1e,_0x4cb41a,_0x52814f)=>{const _0x3f1d29=_0x5c3efe;try{console['log'](_0x3f1d29(0x1b5),_0x444a1e[_0x3f1d29(0x193)]),loggerService_1[_0x3f1d29(0x1d5)]['logWebhookReceived'](_0x3f1d29(0x199),_0x444a1e[_0x3f1d29(0x193)],_0x444a1e[_0x3f1d29(0x1a5)]);const _0x106349=await this[_0x3f1d29(0x1d6)]['processKlymeWebhook'](_0x444a1e[_0x3f1d29(0x193)]);_0x4cb41a[_0x3f1d29(0x1ab)](0xc8)['json']({'success':!![],'message':_0x3f1d29(0x1cd)});}catch(_0x33a328){console[_0x3f1d29(0x1a1)](_0x3f1d29(0x1c1),_0x33a328),loggerService_1[_0x3f1d29(0x1d5)][_0x3f1d29(0x1ae)](_0x3f1d29(0x199),_0x33a328,_0x444a1e[_0x3f1d29(0x193)]),_0x4cb41a[_0x3f1d29(0x1ab)](0xc8)[_0x3f1d29(0x1a0)]({'success':![],'message':_0x33a328 instanceof Error?_0x33a328['message']:_0x3f1d29(0x19c)});}},this[_0x5c3efe(0x194)]=async(_0x5e8b82,_0x1ecf8a,_0x1f6bac)=>{const _0x833abc=_0x5c3efe;try{console['log']('Received\x20MasterCard\x20webhook:',_0x5e8b82['body']),loggerService_1[_0x833abc(0x1d5)][_0x833abc(0x1b7)]('mastercard',_0x5e8b82['body'],_0x5e8b82[_0x833abc(0x1a5)]);const _0x298712=await this[_0x833abc(0x1d6)][_0x833abc(0x19f)](_0x5e8b82[_0x833abc(0x193)]);_0x1ecf8a['status'](0xc8)['json']({'success':!![],'message':_0x833abc(0x1bc)});}catch(_0x4fad5f){console[_0x833abc(0x1a1)](_0x833abc(0x1a7),_0x4fad5f),loggerService_1[_0x833abc(0x1d5)][_0x833abc(0x1ae)]('mastercard',_0x4fad5f,_0x5e8b82[_0x833abc(0x193)]),_0x1ecf8a[_0x833abc(0x1ab)](0xc8)['json']({'success':![],'message':_0x4fad5f instanceof Error?_0x4fad5f[_0x833abc(0x197)]:_0x833abc(0x1a3)});}},this['webhookService']=new webhookService_1[(_0x5c3efe(0x1c7))]();}}exports[a15_0x33c7b3(0x1c6)]=WebhookController;