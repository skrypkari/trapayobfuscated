'use strict';const a15_0x1596d8=a15_0xfd3e;function a15_0x2a46(){const _0x2c3d0a=['Amer\x20webhook\x20processed\x20successfully','Raw\x20body\x20type:','loggerService','processPlisioGatewayWebhook','CoinToPay\x20webhook\x20processing\x20failed','5593264mMNbSh','Rapyd\x20webhook\x20processed\x20successfully','keys','CoinToPay2\x20webhook\x20processing\x20failed','logWebhookReceived','3176927QJrNXH','Webhook\x20processing\x20error:','WebhookController','7iOKdJb','status','Content-Type:','Body\x20content:','get','defineProperty','Received\x20Amer\x20webhook:','processKlymeWebhook','===\x20PLISIO\x20WEBHOOK\x20RECEIVED\x20===','Received\x20CoinToPay\x20webhook:','===\x20PLISIO\x20GATEWAY\x20WEBHOOK\x20RECEIVED\x20===','processAmerWebhook','Gateway\x20webhook\x20processed\x20successfully','amer','MasterCard\x20webhook\x20processed\x20successfully','processCoinToPay2Webhook','Received\x20CoinToPay2\x20webhook:','klyme','Received\x20Rapyd\x20webhook:','1hjsoWE','cointopay2','processNodaWebhook','error','processRapydWebhook','CoinToPay\x20webhook\x20processed\x20successfully','196RBHSEd','5nYbnFn','Received\x20KLYME\x20webhook:','Noda\x20webhook\x20processing\x20error:','2221244tzUdoq','KLYME\x20webhook\x20processed\x20successfully','log','Webhook\x20processing\x20failed','handleAmerWebhook','handlePlisioWebhook','Body\x20keys:','webhookService','message','Content-Type','MasterCard\x20webhook\x20processing\x20failed','mastercard','plisio_gateway','CoinToPay\x20webhook\x20processing\x20error:','noda','rapyd','11qNGhWI','plisio','MasterCard\x20webhook\x20processing\x20error:','CoinToPay2\x20webhook\x20processing\x20error:','processCoinToPayWebhook','handleCoinToPay2Webhook','3392334dbycZK','Rapyd\x20webhook\x20processing\x20failed','__esModule','logWebhookError','30ExGecd','12909852oZAyAX','KLYME\x20webhook\x20processing\x20error:','54711hoFAZn','cointopay','json','headers','208oFFJHt','Gateway\x20webhook\x20processing\x20failed','body','WebhookService','Gateway\x20webhook\x20processing\x20error:','Webhook\x20processed\x20successfully','3271974MsObCD'];a15_0x2a46=function(){return _0x2c3d0a;};return a15_0x2a46();}function a15_0xfd3e(_0x1e9b33,_0x44275a){const _0x2a4681=a15_0x2a46();return a15_0xfd3e=function(_0xfd3e6c,_0x4ca97f){_0xfd3e6c=_0xfd3e6c-0xd1;let _0x11bc36=_0x2a4681[_0xfd3e6c];return _0x11bc36;},a15_0xfd3e(_0x1e9b33,_0x44275a);}(function(_0x4ea91c,_0x2ea3c6){const _0x10df79=a15_0xfd3e,_0x4d275a=_0x4ea91c();while(!![]){try{const _0x321b19=-parseInt(_0x10df79(0xf8))/0x1*(-parseInt(_0x10df79(0x102))/0x2)+-parseInt(_0x10df79(0x11f))/0x3*(-parseInt(_0x10df79(0xd1))/0x4)+parseInt(_0x10df79(0xff))/0x5*(-parseInt(_0x10df79(0xd7))/0x6)+-parseInt(_0x10df79(0xe5))/0x7*(-parseInt(_0x10df79(0xdd))/0x8)+parseInt(_0x10df79(0x118))/0x9*(parseInt(_0x10df79(0x11c))/0xa)+-parseInt(_0x10df79(0x112))/0xb*(-parseInt(_0x10df79(0x11d))/0xc)+-parseInt(_0x10df79(0xe2))/0xd*(parseInt(_0x10df79(0xfe))/0xe);if(_0x321b19===_0x2ea3c6)break;else _0x4d275a['push'](_0x4d275a['shift']());}catch(_0x14a0b0){_0x4d275a['push'](_0x4d275a['shift']());}}}(a15_0x2a46,0xf3ab4));Object[a15_0x1596d8(0xea)](exports,a15_0x1596d8(0x11a),{'value':!![]}),exports[a15_0x1596d8(0xe4)]=void 0x0;const webhookService_1=require('../services/webhookService'),loggerService_1=require('../services/loggerService');class WebhookController{constructor(){const _0x45f4d2=a15_0x1596d8;this[_0x45f4d2(0x107)]=async(_0x2a82ef,_0x2935df,_0x252365)=>{const _0x163ea0=_0x45f4d2;try{console[_0x163ea0(0x104)](_0x163ea0(0xed)),console['log'](_0x163ea0(0xe7),_0x2a82ef['get']('Content-Type')),console[_0x163ea0(0x104)](_0x163ea0(0xd9),typeof _0x2a82ef['body']),console[_0x163ea0(0x104)](_0x163ea0(0x108),Object[_0x163ea0(0xdf)](_0x2a82ef[_0x163ea0(0xd3)]||{})),console[_0x163ea0(0x104)](_0x163ea0(0xe8),_0x2a82ef[_0x163ea0(0xd3)]),loggerService_1[_0x163ea0(0xda)]['logWebhookReceived'](_0x163ea0(0x113),_0x2a82ef[_0x163ea0(0xd3)],_0x2a82ef['headers']);const _0x38f1b4=await this[_0x163ea0(0x109)]['processPlisioWebhook'](_0x2a82ef[_0x163ea0(0xd3)]);_0x2935df[_0x163ea0(0xe6)](0xc8)['json']({'success':!![],'message':_0x163ea0(0xd6)});}catch(_0x44f1d7){console[_0x163ea0(0xfb)](_0x163ea0(0xe3),_0x44f1d7),loggerService_1[_0x163ea0(0xda)][_0x163ea0(0x11b)](_0x163ea0(0x113),_0x44f1d7,_0x2a82ef['body']),_0x2935df['status'](0xc8)[_0x163ea0(0x121)]({'success':![],'message':_0x44f1d7 instanceof Error?_0x44f1d7['message']:_0x163ea0(0x105)});}},this['handlePlisioGatewayWebhook']=async(_0x3092c3,_0x13defb,_0x3d5874)=>{const _0x40b00c=_0x45f4d2;try{console['log'](_0x40b00c(0xef)),console[_0x40b00c(0x104)]('Content-Type:',_0x3092c3[_0x40b00c(0xe9)](_0x40b00c(0x10b))),console[_0x40b00c(0x104)](_0x40b00c(0xd9),typeof _0x3092c3[_0x40b00c(0xd3)]),console['log'](_0x40b00c(0x108),Object[_0x40b00c(0xdf)](_0x3092c3[_0x40b00c(0xd3)]||{})),console[_0x40b00c(0x104)]('Body\x20content:',_0x3092c3[_0x40b00c(0xd3)]),loggerService_1['loggerService'][_0x40b00c(0xe1)](_0x40b00c(0x10e),_0x3092c3[_0x40b00c(0xd3)],_0x3092c3[_0x40b00c(0x122)]);const _0x2cd8ff=await this[_0x40b00c(0x109)][_0x40b00c(0xdb)](_0x3092c3[_0x40b00c(0xd3)]);_0x13defb['status'](0xc8)['json']({'success':!![],'message':_0x40b00c(0xf1)});}catch(_0x29324e){console[_0x40b00c(0xfb)](_0x40b00c(0xd5),_0x29324e),loggerService_1[_0x40b00c(0xda)]['logWebhookError'](_0x40b00c(0x10e),_0x29324e,_0x3092c3[_0x40b00c(0xd3)]),_0x13defb[_0x40b00c(0xe6)](0xc8)['json']({'success':![],'message':_0x29324e instanceof Error?_0x29324e[_0x40b00c(0x10a)]:_0x40b00c(0xd2)});}},this['handleRapydWebhook']=async(_0x528164,_0xf3883a,_0x5208f3)=>{const _0x41af5c=_0x45f4d2;try{console[_0x41af5c(0x104)](_0x41af5c(0xf7),_0x528164[_0x41af5c(0xd3)]),loggerService_1['loggerService']['logWebhookReceived']('rapyd',_0x528164[_0x41af5c(0xd3)],_0x528164[_0x41af5c(0x122)]);const _0x23deec=await this[_0x41af5c(0x109)][_0x41af5c(0xfc)](_0x528164[_0x41af5c(0xd3)]);_0xf3883a['status'](0xc8)['json']({'success':!![],'message':_0x41af5c(0xde)});}catch(_0x52dc70){console[_0x41af5c(0xfb)]('Rapyd\x20webhook\x20processing\x20error:',_0x52dc70),loggerService_1[_0x41af5c(0xda)]['logWebhookError'](_0x41af5c(0x111),_0x52dc70,_0x528164[_0x41af5c(0xd3)]),_0xf3883a[_0x41af5c(0xe6)](0xc8)[_0x41af5c(0x121)]({'success':![],'message':_0x52dc70 instanceof Error?_0x52dc70[_0x41af5c(0x10a)]:_0x41af5c(0x119)});}},this['handleNodaWebhook']=async(_0x1d9bd7,_0x1b4129,_0x2c737c)=>{const _0x114ef2=_0x45f4d2;try{console['log']('Received\x20Noda\x20webhook:',_0x1d9bd7[_0x114ef2(0xd3)]),loggerService_1[_0x114ef2(0xda)][_0x114ef2(0xe1)](_0x114ef2(0x110),_0x1d9bd7[_0x114ef2(0xd3)],_0x1d9bd7['headers']);const _0xa3863c=await this[_0x114ef2(0x109)][_0x114ef2(0xfa)](_0x1d9bd7['body']);_0x1b4129[_0x114ef2(0xe6)](0xc8)[_0x114ef2(0x121)]({'success':!![],'message':'Noda\x20webhook\x20processed\x20successfully'});}catch(_0x21a544){console['error'](_0x114ef2(0x101),_0x21a544),loggerService_1[_0x114ef2(0xda)][_0x114ef2(0x11b)](_0x114ef2(0x110),_0x21a544,_0x1d9bd7['body']),_0x1b4129['status'](0xc8)[_0x114ef2(0x121)]({'success':![],'message':_0x21a544 instanceof Error?_0x21a544['message']:'Noda\x20webhook\x20processing\x20failed'});}},this['handleCoinToPayWebhook']=async(_0x13729d,_0x475170,_0x33fb01)=>{const _0x1f0fa3=_0x45f4d2;try{console[_0x1f0fa3(0x104)](_0x1f0fa3(0xee),_0x13729d[_0x1f0fa3(0xd3)]),loggerService_1['loggerService']['logWebhookReceived'](_0x1f0fa3(0x120),_0x13729d[_0x1f0fa3(0xd3)],_0x13729d[_0x1f0fa3(0x122)]);const _0x4a53aa=await this[_0x1f0fa3(0x109)][_0x1f0fa3(0x116)](_0x13729d[_0x1f0fa3(0xd3)]);_0x475170[_0x1f0fa3(0xe6)](0xc8)['json']({'success':!![],'message':_0x1f0fa3(0xfd)});}catch(_0x3d87c6){console[_0x1f0fa3(0xfb)](_0x1f0fa3(0x10f),_0x3d87c6),loggerService_1['loggerService'][_0x1f0fa3(0x11b)](_0x1f0fa3(0x120),_0x3d87c6,_0x13729d[_0x1f0fa3(0xd3)]),_0x475170[_0x1f0fa3(0xe6)](0xc8)[_0x1f0fa3(0x121)]({'success':![],'message':_0x3d87c6 instanceof Error?_0x3d87c6[_0x1f0fa3(0x10a)]:_0x1f0fa3(0xdc)});}},this[_0x45f4d2(0x117)]=async(_0x32155c,_0x2e4b49,_0x5b5e39)=>{const _0x2f9540=_0x45f4d2;try{console[_0x2f9540(0x104)](_0x2f9540(0xf5),_0x32155c[_0x2f9540(0xd3)]),loggerService_1[_0x2f9540(0xda)][_0x2f9540(0xe1)](_0x2f9540(0xf9),_0x32155c[_0x2f9540(0xd3)],_0x32155c[_0x2f9540(0x122)]);const _0x36e6c6=await this[_0x2f9540(0x109)][_0x2f9540(0xf4)](_0x32155c[_0x2f9540(0xd3)]);_0x2e4b49[_0x2f9540(0xe6)](0xc8)[_0x2f9540(0x121)]({'success':!![],'message':'CoinToPay2\x20webhook\x20processed\x20successfully'});}catch(_0x57c556){console['error'](_0x2f9540(0x115),_0x57c556),loggerService_1[_0x2f9540(0xda)][_0x2f9540(0x11b)]('cointopay2',_0x57c556,_0x32155c['body']),_0x2e4b49['status'](0xc8)[_0x2f9540(0x121)]({'success':![],'message':_0x57c556 instanceof Error?_0x57c556[_0x2f9540(0x10a)]:_0x2f9540(0xe0)});}},this['handleKlymeWebhook']=async(_0x5d6042,_0x3d527a,_0x1557f2)=>{const _0x3a14ee=_0x45f4d2;try{console[_0x3a14ee(0x104)](_0x3a14ee(0x100),_0x5d6042[_0x3a14ee(0xd3)]),loggerService_1[_0x3a14ee(0xda)][_0x3a14ee(0xe1)](_0x3a14ee(0xf6),_0x5d6042['body'],_0x5d6042[_0x3a14ee(0x122)]);const _0x78a2b6=await this['webhookService'][_0x3a14ee(0xec)](_0x5d6042[_0x3a14ee(0xd3)]);_0x3d527a[_0x3a14ee(0xe6)](0xc8)[_0x3a14ee(0x121)]({'success':!![],'message':_0x3a14ee(0x103)});}catch(_0x10de40){console[_0x3a14ee(0xfb)](_0x3a14ee(0x11e),_0x10de40),loggerService_1[_0x3a14ee(0xda)][_0x3a14ee(0x11b)](_0x3a14ee(0xf6),_0x10de40,_0x5d6042[_0x3a14ee(0xd3)]),_0x3d527a[_0x3a14ee(0xe6)](0xc8)['json']({'success':![],'message':_0x10de40 instanceof Error?_0x10de40[_0x3a14ee(0x10a)]:'KLYME\x20webhook\x20processing\x20failed'});}},this['handleMasterCardWebhook']=async(_0xe53bef,_0x53996c,_0x56e6d6)=>{const _0x4dba5c=_0x45f4d2;try{console[_0x4dba5c(0x104)]('Received\x20MasterCard\x20webhook:',_0xe53bef[_0x4dba5c(0xd3)]),loggerService_1[_0x4dba5c(0xda)]['logWebhookReceived'](_0x4dba5c(0x10d),_0xe53bef['body'],_0xe53bef[_0x4dba5c(0x122)]);const _0x4c9a8b=await this[_0x4dba5c(0x109)]['processMasterCardWebhook'](_0xe53bef['body']);_0x53996c[_0x4dba5c(0xe6)](0xc8)[_0x4dba5c(0x121)]({'success':!![],'message':_0x4dba5c(0xf3)});}catch(_0x26b02c){console[_0x4dba5c(0xfb)](_0x4dba5c(0x114),_0x26b02c),loggerService_1[_0x4dba5c(0xda)]['logWebhookError']('mastercard',_0x26b02c,_0xe53bef[_0x4dba5c(0xd3)]),_0x53996c[_0x4dba5c(0xe6)](0xc8)[_0x4dba5c(0x121)]({'success':![],'message':_0x26b02c instanceof Error?_0x26b02c[_0x4dba5c(0x10a)]:_0x4dba5c(0x10c)});}},this[_0x45f4d2(0x106)]=async(_0x201652,_0x36312b,_0xef9510)=>{const _0x6ed386=_0x45f4d2;try{console[_0x6ed386(0x104)](_0x6ed386(0xeb),_0x201652[_0x6ed386(0xd3)]),loggerService_1['loggerService'][_0x6ed386(0xe1)](_0x6ed386(0xf2),_0x201652[_0x6ed386(0xd3)],_0x201652[_0x6ed386(0x122)]);const _0x228bd7=await this[_0x6ed386(0x109)][_0x6ed386(0xf0)](_0x201652[_0x6ed386(0xd3)]);_0x36312b[_0x6ed386(0xe6)](0xc8)[_0x6ed386(0x121)]({'success':!![],'message':_0x6ed386(0xd8)});}catch(_0xfd943b){console[_0x6ed386(0xfb)]('Amer\x20webhook\x20processing\x20error:',_0xfd943b),loggerService_1['loggerService']['logWebhookError'](_0x6ed386(0xf2),_0xfd943b,_0x201652['body']),_0x36312b[_0x6ed386(0xe6)](0xc8)[_0x6ed386(0x121)]({'success':![],'message':_0xfd943b instanceof Error?_0xfd943b[_0x6ed386(0x10a)]:'Amer\x20webhook\x20processing\x20failed'});}},this[_0x45f4d2(0x109)]=new webhookService_1[(_0x45f4d2(0xd4))]();}}exports[a15_0x1596d8(0xe4)]=WebhookController;