'use strict';const a17_0x3d5ac7=a17_0x51a5;function a17_0x3013(){const _0x4e2810=['status','KLYME\x20webhook\x20processing\x20failed','headers','log','query','AmPay\x20webhook\x20processing\x20failed','CoinToPay2\x20webhook\x20processing\x20error:','1718280rTvkQx','processCoinToPay2Webhook','handleMyXSpendWebhook','MasterCard\x20webhook\x20processed\x20successfully','VISA\x20webhook\x20processing\x20failed','handleAmPayWebhook','MyXSpend\x20webhook\x20processing\x20failed','Noda\x20webhook\x20processed\x20successfully','plisio','Gateway\x20webhook\x20processing\x20failed','WebhookController','mastercard','Content-Type','plisio_gateway','Received\x20Noda\x20webhook:','Query\x20params:','processCoinToPayWebhook','Received\x20Rapyd\x20webhook:','klyme','logWebhookError','CoinToPay2\x20webhook\x20processed\x20successfully','body','1856WEOsrv','__esModule','defineProperty','Rapyd\x20webhook\x20processing\x20failed','MyXSpend\x20webhook\x20processing\x20error:','processNodaWebhook','AmPay\x20TRY\x20webhook\x20processing\x20error:','===\x20PLISIO\x20WEBHOOK\x20RECEIVED\x20===','handleNodaWebhook','processMasterCardWebhook','Body\x20type:','Content-Type:','handlePlisioWebhook','cointopay2','ampay','cointopay','Noda\x20webhook\x20processing\x20failed','1387176DesfLp','loggerService','processPlisioGatewayWebhook','Webhook\x20processing\x20error:','AmPay\x20TRY\x20webhook\x20processing\x20failed','CoinToPay\x20webhook\x20processing\x20error:','Webhook\x20processing\x20failed','noda','error','handleCoinToPay2Webhook','Raw\x20body\x20type:','processAmPayTRYWebhook','Noda\x20webhook\x20processing\x20error:','Body\x20content:','365351ZczEqw','../services/loggerService','visa','processVisaWebhook','ampay_try','handleKlymeWebhook','Body:','Received\x20VISA\x20webhook:','1303351PjPkoS','Received\x20KLYME\x20webhook:','handleCoinToPayWebhook','KLYME\x20webhook\x20processed\x20successfully','WebhookService','Amer\x20webhook\x20processing\x20failed','get','VISA\x20webhook\x20processing\x20error:','handleVisaWebhook','processPlisioWebhook','===\x20PLISIO\x20GATEWAY\x20WEBHOOK\x20RECEIVED\x20===','rapyd','VISA\x20webhook\x20processed\x20successfully','processMyXSpendWebhook','Rapyd\x20webhook\x20processing\x20error:','keys','message','myxspend','1975285dHhBlk','amer','===\x20AmPay\x20Webhook\x20Received\x20===','Amer\x20webhook\x20processing\x20error:','method','Body\x20keys:','handleAmPayTRYWebhook','logWebhookReceived','1381960nAoHzG','Received\x20CoinToPay2\x20webhook:','Method:','AmPay\x20webhook\x20processed\x20successfully','handleRapydWebhook','webhookService','27pZygkr','MyXSpend\x20webhook\x20processed\x20successfully','json','===\x20AmPay\x20TRY\x20Webhook\x20Received\x20===','AmPay\x20TRY\x20webhook\x20processed\x20successfully','Headers:','CoinToPay\x20webhook\x20processing\x20failed'];a17_0x3013=function(){return _0x4e2810;};return a17_0x3013();}(function(_0x481444,_0x4de7d6){const _0x121bc5=a17_0x51a5,_0x37ef7f=_0x481444();while(!![]){try{const _0x48619e=-parseInt(_0x121bc5(0x154))/0x1+-parseInt(_0x121bc5(0x135))/0x2*(-parseInt(_0x121bc5(0x17c))/0x3)+parseInt(_0x121bc5(0x176))/0x4+parseInt(_0x121bc5(0x16e))/0x5+parseInt(_0x121bc5(0x146))/0x6+-parseInt(_0x121bc5(0x15c))/0x7+-parseInt(_0x121bc5(0x18a))/0x8;if(_0x48619e===_0x4de7d6)break;else _0x37ef7f['push'](_0x37ef7f['shift']());}catch(_0x58044c){_0x37ef7f['push'](_0x37ef7f['shift']());}}}(a17_0x3013,0x34306));Object[a17_0x3d5ac7(0x137)](exports,a17_0x3d5ac7(0x136),{'value':!![]}),exports[a17_0x3d5ac7(0x129)]=void 0x0;const webhookService_1=require('../services/webhookService'),loggerService_1=require(a17_0x3d5ac7(0x155));function a17_0x51a5(_0x19696d,_0x385f76){const _0x3013d8=a17_0x3013();return a17_0x51a5=function(_0x51a5e6,_0x444471){_0x51a5e6=_0x51a5e6-0x121;let _0x1c98a1=_0x3013d8[_0x51a5e6];return _0x1c98a1;},a17_0x51a5(_0x19696d,_0x385f76);}class WebhookController{constructor(){const _0x4fed5c=a17_0x3d5ac7;this[_0x4fed5c(0x141)]=async(_0xf20191,_0x53f340,_0x21e3f2)=>{const _0x199ae5=_0x4fed5c;try{console[_0x199ae5(0x186)](_0x199ae5(0x13c)),console['log'](_0x199ae5(0x140),_0xf20191[_0x199ae5(0x162)]('Content-Type')),console['log'](_0x199ae5(0x150),typeof _0xf20191['body']),console[_0x199ae5(0x186)](_0x199ae5(0x173),Object[_0x199ae5(0x16b)](_0xf20191[_0x199ae5(0x134)]||{})),console[_0x199ae5(0x186)](_0x199ae5(0x153),_0xf20191[_0x199ae5(0x134)]),loggerService_1['loggerService'][_0x199ae5(0x175)](_0x199ae5(0x127),_0xf20191[_0x199ae5(0x134)],_0xf20191[_0x199ae5(0x185)]);const _0x5ee7d0=await this[_0x199ae5(0x17b)][_0x199ae5(0x165)](_0xf20191['body']);_0x53f340['status'](0xc8)[_0x199ae5(0x17e)]({'success':!![],'message':'Webhook\x20processed\x20successfully'});}catch(_0x492a1d){console[_0x199ae5(0x14e)](_0x199ae5(0x149),_0x492a1d),loggerService_1[_0x199ae5(0x147)][_0x199ae5(0x132)](_0x199ae5(0x127),_0x492a1d,_0xf20191[_0x199ae5(0x134)]),_0x53f340['status'](0xc8)['json']({'success':![],'message':_0x492a1d instanceof Error?_0x492a1d['message']:_0x199ae5(0x14c)});}},this['handlePlisioGatewayWebhook']=async(_0x44b123,_0x16d83a,_0x56ccba)=>{const _0x5d58a1=_0x4fed5c;try{console[_0x5d58a1(0x186)](_0x5d58a1(0x166)),console[_0x5d58a1(0x186)](_0x5d58a1(0x140),_0x44b123[_0x5d58a1(0x162)](_0x5d58a1(0x12b))),console[_0x5d58a1(0x186)](_0x5d58a1(0x150),typeof _0x44b123[_0x5d58a1(0x134)]),console['log'](_0x5d58a1(0x173),Object['keys'](_0x44b123[_0x5d58a1(0x134)]||{})),console[_0x5d58a1(0x186)](_0x5d58a1(0x153),_0x44b123[_0x5d58a1(0x134)]),loggerService_1[_0x5d58a1(0x147)][_0x5d58a1(0x175)](_0x5d58a1(0x12c),_0x44b123['body'],_0x44b123['headers']);const _0x544460=await this[_0x5d58a1(0x17b)][_0x5d58a1(0x148)](_0x44b123[_0x5d58a1(0x134)]);_0x16d83a[_0x5d58a1(0x183)](0xc8)[_0x5d58a1(0x17e)]({'success':!![],'message':'Gateway\x20webhook\x20processed\x20successfully'});}catch(_0x51b878){console[_0x5d58a1(0x14e)]('Gateway\x20webhook\x20processing\x20error:',_0x51b878),loggerService_1[_0x5d58a1(0x147)]['logWebhookError'](_0x5d58a1(0x12c),_0x51b878,_0x44b123['body']),_0x16d83a[_0x5d58a1(0x183)](0xc8)['json']({'success':![],'message':_0x51b878 instanceof Error?_0x51b878[_0x5d58a1(0x16c)]:_0x5d58a1(0x128)});}},this[_0x4fed5c(0x17a)]=async(_0x9492db,_0x17c9c7,_0x484372)=>{const _0x241d2e=_0x4fed5c;try{console['log'](_0x241d2e(0x130),_0x9492db[_0x241d2e(0x134)]),loggerService_1[_0x241d2e(0x147)]['logWebhookReceived'](_0x241d2e(0x167),_0x9492db[_0x241d2e(0x134)],_0x9492db[_0x241d2e(0x185)]);const _0x2d5090=await this[_0x241d2e(0x17b)]['processRapydWebhook'](_0x9492db[_0x241d2e(0x134)]);_0x17c9c7[_0x241d2e(0x183)](0xc8)[_0x241d2e(0x17e)]({'success':!![],'message':'Rapyd\x20webhook\x20processed\x20successfully'});}catch(_0x2d4172){console[_0x241d2e(0x14e)](_0x241d2e(0x16a),_0x2d4172),loggerService_1['loggerService'][_0x241d2e(0x132)](_0x241d2e(0x167),_0x2d4172,_0x9492db[_0x241d2e(0x134)]),_0x17c9c7['status'](0xc8)[_0x241d2e(0x17e)]({'success':![],'message':_0x2d4172 instanceof Error?_0x2d4172[_0x241d2e(0x16c)]:_0x241d2e(0x138)});}},this[_0x4fed5c(0x13d)]=async(_0xcaead5,_0x1d8d24,_0x3b2f66)=>{const _0x32285b=_0x4fed5c;try{console['log'](_0x32285b(0x12d),_0xcaead5[_0x32285b(0x134)]),loggerService_1[_0x32285b(0x147)][_0x32285b(0x175)](_0x32285b(0x14d),_0xcaead5[_0x32285b(0x134)],_0xcaead5[_0x32285b(0x185)]);const _0x5e6d02=await this[_0x32285b(0x17b)][_0x32285b(0x13a)](_0xcaead5[_0x32285b(0x134)]);_0x1d8d24[_0x32285b(0x183)](0xc8)[_0x32285b(0x17e)]({'success':!![],'message':_0x32285b(0x126)});}catch(_0x10d1a6){console[_0x32285b(0x14e)](_0x32285b(0x152),_0x10d1a6),loggerService_1['loggerService'][_0x32285b(0x132)]('noda',_0x10d1a6,_0xcaead5[_0x32285b(0x134)]),_0x1d8d24[_0x32285b(0x183)](0xc8)[_0x32285b(0x17e)]({'success':![],'message':_0x10d1a6 instanceof Error?_0x10d1a6['message']:_0x32285b(0x145)});}},this[_0x4fed5c(0x15e)]=async(_0x47faae,_0x10bd71,_0x4b64d6)=>{const _0x5ef607=_0x4fed5c;try{console[_0x5ef607(0x186)]('Received\x20CoinToPay\x20webhook:',_0x47faae[_0x5ef607(0x134)]),loggerService_1['loggerService'][_0x5ef607(0x175)](_0x5ef607(0x144),_0x47faae['body'],_0x47faae[_0x5ef607(0x185)]);const _0x385500=await this['webhookService'][_0x5ef607(0x12f)](_0x47faae['body']);_0x10bd71[_0x5ef607(0x183)](0xc8)['json']({'success':!![],'message':'CoinToPay\x20webhook\x20processed\x20successfully'});}catch(_0x30b141){console[_0x5ef607(0x14e)](_0x5ef607(0x14b),_0x30b141),loggerService_1['loggerService'][_0x5ef607(0x132)](_0x5ef607(0x144),_0x30b141,_0x47faae['body']),_0x10bd71[_0x5ef607(0x183)](0xc8)['json']({'success':![],'message':_0x30b141 instanceof Error?_0x30b141['message']:_0x5ef607(0x182)});}},this[_0x4fed5c(0x14f)]=async(_0x1c11dd,_0x42b606,_0x4e2b34)=>{const _0x107e97=_0x4fed5c;try{console[_0x107e97(0x186)](_0x107e97(0x177),_0x1c11dd[_0x107e97(0x134)]),loggerService_1[_0x107e97(0x147)][_0x107e97(0x175)](_0x107e97(0x142),_0x1c11dd[_0x107e97(0x134)],_0x1c11dd[_0x107e97(0x185)]);const _0x538a29=await this['webhookService'][_0x107e97(0x18b)](_0x1c11dd[_0x107e97(0x134)]);_0x42b606[_0x107e97(0x183)](0xc8)[_0x107e97(0x17e)]({'success':!![],'message':_0x107e97(0x133)});}catch(_0x13aee0){console['error'](_0x107e97(0x189),_0x13aee0),loggerService_1[_0x107e97(0x147)][_0x107e97(0x132)](_0x107e97(0x142),_0x13aee0,_0x1c11dd['body']),_0x42b606['status'](0xc8)['json']({'success':![],'message':_0x13aee0 instanceof Error?_0x13aee0[_0x107e97(0x16c)]:'CoinToPay2\x20webhook\x20processing\x20failed'});}},this[_0x4fed5c(0x159)]=async(_0x434baa,_0x5c305a,_0x19b4e4)=>{const _0x5a0407=_0x4fed5c;try{console[_0x5a0407(0x186)](_0x5a0407(0x15d),_0x434baa['body']),loggerService_1[_0x5a0407(0x147)][_0x5a0407(0x175)](_0x5a0407(0x131),_0x434baa['body'],_0x434baa['headers']);const _0xb6a95e=await this['webhookService']['processKlymeWebhook'](_0x434baa['body']);_0x5c305a['status'](0xc8)[_0x5a0407(0x17e)]({'success':!![],'message':_0x5a0407(0x15f)});}catch(_0x2dc7ac){console['error']('KLYME\x20webhook\x20processing\x20error:',_0x2dc7ac),loggerService_1[_0x5a0407(0x147)][_0x5a0407(0x132)]('klyme',_0x2dc7ac,_0x434baa[_0x5a0407(0x134)]),_0x5c305a[_0x5a0407(0x183)](0xc8)['json']({'success':![],'message':_0x2dc7ac instanceof Error?_0x2dc7ac[_0x5a0407(0x16c)]:_0x5a0407(0x184)});}},this[_0x4fed5c(0x164)]=async(_0x53545e,_0x3e4f1d,_0x141310)=>{const _0x19770e=_0x4fed5c;try{console[_0x19770e(0x186)](_0x19770e(0x15b),_0x53545e[_0x19770e(0x134)]),loggerService_1[_0x19770e(0x147)][_0x19770e(0x175)]('visa',_0x53545e[_0x19770e(0x134)],_0x53545e[_0x19770e(0x185)]);const _0x2e1a29=await this[_0x19770e(0x17b)][_0x19770e(0x157)](_0x53545e[_0x19770e(0x134)]);_0x3e4f1d[_0x19770e(0x183)](0xc8)[_0x19770e(0x17e)]({'success':!![],'message':_0x19770e(0x168)});}catch(_0x582e9a){console[_0x19770e(0x14e)](_0x19770e(0x163),_0x582e9a),loggerService_1[_0x19770e(0x147)]['logWebhookError'](_0x19770e(0x156),_0x582e9a,_0x53545e[_0x19770e(0x134)]),_0x3e4f1d[_0x19770e(0x183)](0xc8)[_0x19770e(0x17e)]({'success':![],'message':_0x582e9a instanceof Error?_0x582e9a[_0x19770e(0x16c)]:_0x19770e(0x123)});}},this['handleMasterCardWebhook']=async(_0x550a5e,_0x25d875,_0x439687)=>{const _0x421b95=_0x4fed5c;try{console['log']('Received\x20MasterCard\x20webhook:',_0x550a5e[_0x421b95(0x134)]),loggerService_1[_0x421b95(0x147)]['logWebhookReceived'](_0x421b95(0x12a),_0x550a5e[_0x421b95(0x134)],_0x550a5e[_0x421b95(0x185)]);const _0x34bdbb=await this[_0x421b95(0x17b)][_0x421b95(0x13e)](_0x550a5e[_0x421b95(0x134)]);_0x25d875[_0x421b95(0x183)](0xc8)[_0x421b95(0x17e)]({'success':!![],'message':_0x421b95(0x122)});}catch(_0x490b21){console[_0x421b95(0x14e)]('MasterCard\x20webhook\x20processing\x20error:',_0x490b21),loggerService_1[_0x421b95(0x147)]['logWebhookError'](_0x421b95(0x12a),_0x490b21,_0x550a5e[_0x421b95(0x134)]),_0x25d875['status'](0xc8)[_0x421b95(0x17e)]({'success':![],'message':_0x490b21 instanceof Error?_0x490b21[_0x421b95(0x16c)]:'MasterCard\x20webhook\x20processing\x20failed'});}},this['handleAmerWebhook']=async(_0x526fe1,_0x4e96b5,_0x17ae82)=>{const _0x6aab0=_0x4fed5c;try{console[_0x6aab0(0x186)]('Received\x20Amer\x20webhook:',_0x526fe1[_0x6aab0(0x134)]),loggerService_1[_0x6aab0(0x147)][_0x6aab0(0x175)](_0x6aab0(0x16f),_0x526fe1['body'],_0x526fe1[_0x6aab0(0x185)]);const _0x5bcc54=await this['webhookService']['processAmerWebhook'](_0x526fe1['body']);_0x4e96b5[_0x6aab0(0x183)](0xc8)[_0x6aab0(0x17e)]({'success':!![],'message':'Amer\x20webhook\x20processed\x20successfully'});}catch(_0x4f48d8){console[_0x6aab0(0x14e)](_0x6aab0(0x171),_0x4f48d8),loggerService_1[_0x6aab0(0x147)][_0x6aab0(0x132)](_0x6aab0(0x16f),_0x4f48d8,_0x526fe1[_0x6aab0(0x134)]),_0x4e96b5[_0x6aab0(0x183)](0xc8)[_0x6aab0(0x17e)]({'success':![],'message':_0x4f48d8 instanceof Error?_0x4f48d8['message']:_0x6aab0(0x161)});}},this[_0x4fed5c(0x124)]=async(_0x362070,_0x182e4e,_0x4eb7d7)=>{const _0x4e535a=_0x4fed5c;try{console[_0x4e535a(0x186)](_0x4e535a(0x170)),console['log'](_0x4e535a(0x181),_0x362070[_0x4e535a(0x185)]),console[_0x4e535a(0x186)](_0x4e535a(0x15a),_0x362070[_0x4e535a(0x134)]),console[_0x4e535a(0x186)](_0x4e535a(0x13f),typeof _0x362070[_0x4e535a(0x134)]),console[_0x4e535a(0x186)](_0x4e535a(0x173),Object[_0x4e535a(0x16b)](_0x362070[_0x4e535a(0x134)]||{})),loggerService_1[_0x4e535a(0x147)][_0x4e535a(0x175)](_0x4e535a(0x143),_0x362070[_0x4e535a(0x134)],_0x362070['headers']);const _0x7370a2=await this[_0x4e535a(0x17b)]['processAmPayWebhook'](_0x362070[_0x4e535a(0x134)]);_0x182e4e[_0x4e535a(0x183)](0xc8)['json']({'success':!![],'message':_0x4e535a(0x179)});}catch(_0x504f1f){console['error']('AmPay\x20webhook\x20processing\x20error:',_0x504f1f),loggerService_1[_0x4e535a(0x147)]['logWebhookError']('ampay',_0x504f1f,_0x362070['body']),_0x182e4e[_0x4e535a(0x183)](0xc8)[_0x4e535a(0x17e)]({'success':![],'message':_0x504f1f instanceof Error?_0x504f1f[_0x4e535a(0x16c)]:_0x4e535a(0x188)});}},this[_0x4fed5c(0x174)]=async(_0x20ec8c,_0x52a46e,_0x3d7ad6)=>{const _0x459c9f=_0x4fed5c;try{console['log'](_0x459c9f(0x17f)),console[_0x459c9f(0x186)]('Headers:',_0x20ec8c[_0x459c9f(0x185)]),console['log'](_0x459c9f(0x15a),_0x20ec8c[_0x459c9f(0x134)]),console[_0x459c9f(0x186)](_0x459c9f(0x13f),typeof _0x20ec8c[_0x459c9f(0x134)]),console[_0x459c9f(0x186)](_0x459c9f(0x173),Object[_0x459c9f(0x16b)](_0x20ec8c[_0x459c9f(0x134)]||{})),loggerService_1[_0x459c9f(0x147)]['logWebhookReceived'](_0x459c9f(0x158),_0x20ec8c[_0x459c9f(0x134)],_0x20ec8c[_0x459c9f(0x185)]);const _0x196ae5=await this[_0x459c9f(0x17b)][_0x459c9f(0x151)](_0x20ec8c['body']);_0x52a46e[_0x459c9f(0x183)](0xc8)['json']({'success':!![],'message':_0x459c9f(0x180)});}catch(_0x280563){console[_0x459c9f(0x14e)](_0x459c9f(0x13b),_0x280563),loggerService_1[_0x459c9f(0x147)][_0x459c9f(0x132)]('ampay_try',_0x280563,_0x20ec8c[_0x459c9f(0x134)]),_0x52a46e[_0x459c9f(0x183)](0xc8)['json']({'success':![],'message':_0x280563 instanceof Error?_0x280563[_0x459c9f(0x16c)]:_0x459c9f(0x14a)});}},this[_0x4fed5c(0x121)]=async(_0x581579,_0x38bdb1,_0x17df3a)=>{const _0x27fee4=_0x4fed5c;try{console[_0x27fee4(0x186)]('===\x20MyXSpend\x20Webhook\x20Received\x20==='),console[_0x27fee4(0x186)](_0x27fee4(0x181),_0x581579['headers']),console[_0x27fee4(0x186)](_0x27fee4(0x12e),_0x581579[_0x27fee4(0x187)]),console[_0x27fee4(0x186)](_0x27fee4(0x15a),_0x581579[_0x27fee4(0x134)]),console[_0x27fee4(0x186)](_0x27fee4(0x178),_0x581579[_0x27fee4(0x172)]),loggerService_1['loggerService'][_0x27fee4(0x175)](_0x27fee4(0x16d),_0x581579[_0x27fee4(0x134)]||_0x581579[_0x27fee4(0x187)],_0x581579['headers']);const _0x4f8dad=await this[_0x27fee4(0x17b)][_0x27fee4(0x169)](_0x581579['query'],_0x581579['body']);_0x38bdb1[_0x27fee4(0x183)](0xc8)['json']({'success':!![],'message':_0x27fee4(0x17d)});}catch(_0x746364){console[_0x27fee4(0x14e)](_0x27fee4(0x139),_0x746364),loggerService_1['loggerService'][_0x27fee4(0x132)]('myxspend',_0x746364,_0x581579['body']||_0x581579[_0x27fee4(0x187)]),_0x38bdb1['status'](0xc8)[_0x27fee4(0x17e)]({'success':![],'message':_0x746364 instanceof Error?_0x746364[_0x27fee4(0x16c)]:_0x27fee4(0x125)});}},this[_0x4fed5c(0x17b)]=new webhookService_1[(_0x4fed5c(0x160))]();}}exports[a17_0x3d5ac7(0x129)]=WebhookController;