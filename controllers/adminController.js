'use strict';const a3_0x50d40e=a3_0x5337;(function(_0x4c6750,_0x50e76d){const _0x1562e5=a3_0x5337,_0x26aab8=_0x4c6750();while(!![]){try{const _0x3f7e4f=parseInt(_0x1562e5(0x94))/0x1*(parseInt(_0x1562e5(0xc0))/0x2)+-parseInt(_0x1562e5(0xc1))/0x3*(parseInt(_0x1562e5(0x96))/0x4)+-parseInt(_0x1562e5(0xb8))/0x5*(-parseInt(_0x1562e5(0x9c))/0x6)+parseInt(_0x1562e5(0x83))/0x7+-parseInt(_0x1562e5(0x88))/0x8+-parseInt(_0x1562e5(0x85))/0x9*(parseInt(_0x1562e5(0xce))/0xa)+parseInt(_0x1562e5(0xbd))/0xb*(parseInt(_0x1562e5(0x84))/0xc);if(_0x3f7e4f===_0x50e76d)break;else _0x26aab8['push'](_0x26aab8['shift']());}catch(_0xb0b3c6){_0x26aab8['push'](_0x26aab8['shift']());}}}(a3_0x5801,0x91c67));Object['defineProperty'](exports,a3_0x50d40e(0xa6),{'value':!![]}),exports[a3_0x50d40e(0xc7)]=void 0x0;const adminService_1=require('../services/adminService'),telegramBotService_1=require('../services/telegramBotService');function a3_0x5801(){const _0x1eda7b=['FAILED','EXPIRED','User\x20suspended\x20successfully','username','2453mPDZgG','query','body','12dIWvEj','33INRBpE','getPaymentById','Payment\x20not\x20found','getPayoutById','updateUser','✅\x20Telegram\x20notification\x20sent\x20for\x20admin\x20status\x20change:\x20','AdminController','User\x20updated\x20successfully','getUsers','User\x20created\x20successfully','failed','User\x20not\x20found','Payout\x20not\x20found','1500uXYdZP','User\x20deleted\x20successfully','Payment\x20updated\x20successfully','chargeback','8188012DofFtp','45264KzJbcB','8667hOaVnV','updatePayment','role','8919392yQxIQG',',\x20sending\x20Telegram\x20notification','adminService','getStatistics','getUserById','payments','getAllPayments','deleteUser','summary','createUser','getSystemStatistics','Payout\x20created\x20successfully','120136UmUuqz','activateUser','420508KgjkNq','Admin\x20access\x20confirmed','📱\x20Skipping\x20Telegram\x20notification\x20for\x20admin\x20status\x20change\x20to:\x20','json','REFUND','updatePaymentStatus','31242OLtNlp','paid','30d','Payout\x20deleted\x20successfully','Статус\x20изменен\x20администратором\x20на\x20','expired','getMerchantsAwaitingPayout','sendPaymentNotification','toUpperCase','📱\x20Admin\x20changed\x20payment\x20','__esModule','getPayments','suspendUser','\x20->\x20','params','shopId','refund','users','deletePayout','log','error','status','checkAuth','createPayout','PAID','\x20to\x20','getPayoutStats','pagination','270ACccnt'];a3_0x5801=function(){return _0x1eda7b;};return a3_0x5801();}function a3_0x5337(_0x550f69,_0x11596a){const _0x580169=a3_0x5801();return a3_0x5337=function(_0x5337b7,_0xbdabfb){_0x5337b7=_0x5337b7-0x82;let _0x107177=_0x580169[_0x5337b7];return _0x107177;},a3_0x5337(_0x550f69,_0x11596a);}class AdminController{constructor(){const _0x1769ef=a3_0x50d40e;this[_0x1769ef(0xb2)]=async(_0x38474a,_0x2565d1,_0x37c03a)=>{const _0x1f578d=_0x1769ef;try{const _0x5c3c37=_0x38474a['user'];_0x2565d1['json']({'success':!![],'message':_0x1f578d(0x97),'user':{'id':_0x5c3c37?.['id'],'username':_0x5c3c37?.[_0x1f578d(0xbc)],'role':_0x5c3c37?.[_0x1f578d(0x87)]}});}catch(_0x2aa785){_0x37c03a(_0x2aa785);}},this[_0x1769ef(0x8b)]=async(_0x427a2b,_0x2e5e5c,_0x20a94a)=>{const _0x41cde9=_0x1769ef;try{const {period:period=_0x41cde9(0x9e)}=_0x427a2b[_0x41cde9(0xbe)],_0x390553=await this['adminService'][_0x41cde9(0x92)](period);_0x2e5e5c['json']({'success':!![],'result':_0x390553});}catch(_0x4a5c23){_0x20a94a(_0x4a5c23);}},this['getPayoutStats']=async(_0x171056,_0x5c5afe,_0x5c1a01)=>{const _0x18f9f5=_0x1769ef;try{const _0x5edaf2=await this[_0x18f9f5(0x8a)][_0x18f9f5(0xb6)]();_0x5c5afe[_0x18f9f5(0x99)]({'success':!![],'result':_0x5edaf2});}catch(_0x17c0a2){_0x5c1a01(_0x17c0a2);}},this['getMerchantsAwaitingPayout']=async(_0x28bf03,_0x1d02d3,_0x17819e)=>{const _0x37cda2=_0x1769ef;try{const {page:page=0x1,limit:limit=0x14,minAmount:_0xe67c88,search:_0x307f60}=_0x28bf03['query'],_0x25543e={'page':Number(page),'limit':Number(limit),'minAmount':_0xe67c88?Number(_0xe67c88):undefined,'search':_0x307f60},_0x5b5cf3=await this['adminService'][_0x37cda2(0xa2)](_0x25543e);_0x1d02d3[_0x37cda2(0x99)]({'success':!![],'merchants':_0x5b5cf3['merchants'],'pagination':_0x5b5cf3[_0x37cda2(0xb7)],'summary':_0x5b5cf3[_0x37cda2(0x90)]});}catch(_0x110c57){_0x17819e(_0x110c57);}},this['createPayout']=async(_0x3fb042,_0x5de831,_0x1bcf0c)=>{const _0x1c52e3=_0x1769ef;try{const _0x42ff69=_0x3fb042[_0x1c52e3(0xbf)],_0x95e391=await this[_0x1c52e3(0x8a)][_0x1c52e3(0xb3)](_0x42ff69);_0x5de831[_0x1c52e3(0xb1)](0xc9)['json']({'success':!![],'message':_0x1c52e3(0x93),'result':_0x95e391});}catch(_0x5058eb){_0x1bcf0c(_0x5058eb);}},this['getPayouts']=async(_0x20c47d,_0x581ebe,_0x13f3a1)=>{const _0x46f0e7=_0x1769ef;try{const {page:page=0x1,limit:limit=0x14,shopId:_0x2d56af,network:_0x2b9142,dateFrom:_0xc3d45f,dateTo:_0x12745a,search:_0x4b94f9}=_0x20c47d['query'],_0x12165e={'page':Number(page),'limit':Number(limit),'shopId':_0x2d56af,'network':_0x2b9142,'dateFrom':_0xc3d45f,'dateTo':_0x12745a,'search':_0x4b94f9},_0xe37e39=await this['adminService']['getAllPayouts'](_0x12165e);_0x581ebe['json']({'success':!![],'payouts':_0xe37e39['payouts'],'pagination':_0xe37e39[_0x46f0e7(0xb7)]});}catch(_0x2245b1){_0x13f3a1(_0x2245b1);}},this[_0x1769ef(0xc4)]=async(_0x168e15,_0x437f85,_0x1e591e)=>{const _0x3f7b60=_0x1769ef;try{const {id:_0x2edd46}=_0x168e15[_0x3f7b60(0xaa)],_0x3c7860=await this[_0x3f7b60(0x8a)][_0x3f7b60(0xc4)](_0x2edd46);if(!_0x3c7860)return _0x437f85['status'](0x194)[_0x3f7b60(0x99)]({'success':![],'message':_0x3f7b60(0xcd)});_0x437f85['json']({'success':!![],'result':_0x3c7860});}catch(_0x5303c0){_0x1e591e(_0x5303c0);}},this[_0x1769ef(0xae)]=async(_0x2969ad,_0x1c3568,_0x4f9f17)=>{const _0x20bdcd=_0x1769ef;try{const {id:_0x43cb00}=_0x2969ad['params'];await this[_0x20bdcd(0x8a)][_0x20bdcd(0xae)](_0x43cb00),_0x1c3568['json']({'success':!![],'message':_0x20bdcd(0x9f)});}catch(_0x4b214e){_0x4f9f17(_0x4b214e);}},this[_0x1769ef(0xa7)]=async(_0x121098,_0x38d5fe,_0x132296)=>{const _0x97abef=_0x1769ef;try{const {page:page=0x1,limit:limit=0x14,status:_0x309ee0,gateway:_0x27527c,shopId:_0x4ad14c,dateFrom:_0x10c3e3,dateTo:_0x22b23b,search:_0x333f1e}=_0x121098[_0x97abef(0xbe)],_0x5e8e07={'page':Number(page),'limit':Number(limit),'status':_0x309ee0,'gateway':_0x27527c,'shopId':_0x4ad14c,'dateFrom':_0x10c3e3,'dateTo':_0x22b23b,'search':_0x333f1e},_0xd8e8de=await this[_0x97abef(0x8a)][_0x97abef(0x8e)](_0x5e8e07);_0x38d5fe[_0x97abef(0x99)]({'success':!![],'payments':_0xd8e8de[_0x97abef(0x8d)],'pagination':_0xd8e8de['pagination']});}catch(_0xd1740){_0x132296(_0xd1740);}},this[_0x1769ef(0xc2)]=async(_0x505c71,_0x59f09d,_0x281ed3)=>{const _0x31261e=_0x1769ef;try{const {id:_0x3160b9}=_0x505c71[_0x31261e(0xaa)],_0x13a51e=await this[_0x31261e(0x8a)]['getPaymentById'](_0x3160b9);if(!_0x13a51e)return _0x59f09d[_0x31261e(0xb1)](0x194)['json']({'success':![],'message':_0x31261e(0xc3)});_0x59f09d[_0x31261e(0x99)]({'success':!![],'result':_0x13a51e});}catch(_0x245df9){_0x281ed3(_0x245df9);}},this[_0x1769ef(0x86)]=async(_0x44c727,_0x2f8462,_0x396ddd)=>{const _0x489be1=_0x1769ef;try{const {id:_0x2a465f}=_0x44c727[_0x489be1(0xaa)],{status:_0x1cc945,notes:_0x4ec6a5,chargebackAmount:_0x118f4b}=_0x44c727[_0x489be1(0xbf)],_0xb05e7e=await this[_0x489be1(0x8a)][_0x489be1(0xc2)](_0x2a465f);if(!_0xb05e7e)return _0x2f8462['status'](0x194)[_0x489be1(0x99)]({'success':![],'message':_0x489be1(0xc3)});const _0x13c518=await this[_0x489be1(0x8a)][_0x489be1(0x9b)](_0x2a465f,_0x1cc945,_0x4ec6a5,_0x118f4b);if(_0xb05e7e[_0x489be1(0xb1)]!==_0x1cc945){console[_0x489be1(0xaf)](_0x489be1(0xa5)+_0x2a465f+'\x20status\x20from\x20'+_0xb05e7e[_0x489be1(0xb1)]+_0x489be1(0xb5)+_0x1cc945+_0x489be1(0x89));try{let _0x9a9470;switch(_0x1cc945[_0x489be1(0xa4)]()){case _0x489be1(0xb4):_0x9a9470=_0x489be1(0x9d);break;case _0x489be1(0xb9):_0x9a9470=_0x489be1(0xcb);break;case _0x489be1(0xba):_0x9a9470=_0x489be1(0xa1);break;case _0x489be1(0x9a):_0x9a9470=_0x489be1(0xac);break;case'CHARGEBACK':_0x9a9470=_0x489be1(0x82);break;default:console[_0x489be1(0xaf)](_0x489be1(0x98)+_0x1cc945);break;}if(_0x9a9470){const _0x577837={..._0x13c518,'shopId':_0xb05e7e[_0x489be1(0xab)],'gateway':_0xb05e7e['gateway'],'createdAt':_0xb05e7e['createdAt'],'adminNotes':_0x4ec6a5||_0x489be1(0xa0)+_0x1cc945,'chargebackAmount':_0x118f4b};await telegramBotService_1['telegramBotService'][_0x489be1(0xa3)](_0xb05e7e['shopId'],_0x577837,_0x9a9470),console[_0x489be1(0xaf)](_0x489be1(0xc6)+_0xb05e7e[_0x489be1(0xb1)]+_0x489be1(0xa9)+_0x1cc945);}}catch(_0x6f1e7e){console[_0x489be1(0xb0)]('Failed\x20to\x20send\x20Telegram\x20notification\x20for\x20admin\x20status\x20change:',_0x6f1e7e);}}_0x2f8462[_0x489be1(0x99)]({'success':!![],'message':_0x489be1(0xd0),'result':_0x13c518});}catch(_0xf7ac5c){_0x396ddd(_0xf7ac5c);}},this['updateUser']=async(_0x5806af,_0x3a484e,_0x311353)=>{const _0x26dc94=_0x1769ef;try{const {id:_0x1b8ece}=_0x5806af[_0x26dc94(0xaa)],_0x3a8ff4=_0x5806af['body'],_0x305f81=await this[_0x26dc94(0x8a)][_0x26dc94(0xc5)](_0x1b8ece,_0x3a8ff4);_0x3a484e[_0x26dc94(0x99)]({'success':!![],'message':_0x26dc94(0xc8),'result':_0x305f81});}catch(_0x1268b1){_0x311353(_0x1268b1);}},this['suspendUser']=async(_0x2f2c5c,_0x2a98df,_0xb94d66)=>{const _0x43359e=_0x1769ef;try{const {id:_0x1b6718}=_0x2f2c5c[_0x43359e(0xaa)],_0x2a5e6d=await this['adminService'][_0x43359e(0xa8)](_0x1b6718);_0x2a98df[_0x43359e(0x99)]({'success':!![],'message':_0x43359e(0xbb),'result':_0x2a5e6d});}catch(_0x5e2c8b){_0xb94d66(_0x5e2c8b);}},this[_0x1769ef(0x95)]=async(_0x4b70c3,_0x39a60a,_0x3f1ae2)=>{const _0x4cff34=_0x1769ef;try{const {id:_0x302da8}=_0x4b70c3[_0x4cff34(0xaa)],_0x571cf8=await this[_0x4cff34(0x8a)]['activateUser'](_0x302da8);_0x39a60a[_0x4cff34(0x99)]({'success':!![],'message':'User\x20activated\x20successfully','result':_0x571cf8});}catch(_0x1c8353){_0x3f1ae2(_0x1c8353);}},this[_0x1769ef(0xc9)]=async(_0x3f1f99,_0x328b3,_0x42009a)=>{const _0x5959eb=_0x1769ef;try{const {page:page=0x1,limit:limit=0x14,status:_0x20cf68}=_0x3f1f99[_0x5959eb(0xbe)],_0x50b078={'page':Number(page),'limit':Number(limit),'status':_0x20cf68},_0x24b54c=await this[_0x5959eb(0x8a)]['getAllUsers'](_0x50b078);_0x328b3[_0x5959eb(0x99)]({'success':!![],'users':_0x24b54c[_0x5959eb(0xad)],'pagination':_0x24b54c[_0x5959eb(0xb7)]});}catch(_0x438847){_0x42009a(_0x438847);}},this[_0x1769ef(0x8c)]=async(_0x32e6e3,_0x42ef90,_0x139b8d)=>{const _0x50bbf5=_0x1769ef;try{const {id:_0x37855e}=_0x32e6e3[_0x50bbf5(0xaa)],_0x356945=await this[_0x50bbf5(0x8a)]['getUserById'](_0x37855e);if(!_0x356945)return _0x42ef90[_0x50bbf5(0xb1)](0x194)['json']({'success':![],'message':_0x50bbf5(0xcc)});_0x42ef90[_0x50bbf5(0x99)]({'success':!![],'result':_0x356945});}catch(_0x5a187e){_0x139b8d(_0x5a187e);}},this['createUser']=async(_0x336726,_0x525924,_0x136112)=>{const _0x5b5d13=_0x1769ef;try{const _0x1534ae=_0x336726[_0x5b5d13(0xbf)],_0x43e5c9=await this[_0x5b5d13(0x8a)][_0x5b5d13(0x91)](_0x1534ae);_0x525924[_0x5b5d13(0xb1)](0xc9)[_0x5b5d13(0x99)]({'success':!![],'message':_0x5b5d13(0xca),'result':_0x43e5c9});}catch(_0xa91abb){_0x136112(_0xa91abb);}},this[_0x1769ef(0x8f)]=async(_0x38318c,_0x5aa87a,_0x3d140e)=>{const _0x30da5e=_0x1769ef;try{const {id:_0x1ed383}=_0x38318c[_0x30da5e(0xaa)];await this[_0x30da5e(0x8a)]['deleteUser'](_0x1ed383),_0x5aa87a[_0x30da5e(0x99)]({'success':!![],'message':_0x30da5e(0xcf)});}catch(_0x57c046){_0x3d140e(_0x57c046);}},this[_0x1769ef(0x8a)]=new adminService_1['AdminService']();}}exports[a3_0x50d40e(0xc7)]=AdminController;