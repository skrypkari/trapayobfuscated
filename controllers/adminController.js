'use strict';const a3_0x16f044=a3_0x38ce;function a3_0x38ce(_0x39ae2c,_0x7f23a4){const _0x5284f0=a3_0x5284();return a3_0x38ce=function(_0x38ce64,_0x52bcab){_0x38ce64=_0x38ce64-0x73;let _0x3b5b0=_0x5284f0[_0x38ce64];return _0x3b5b0;},a3_0x38ce(_0x39ae2c,_0x7f23a4);}(function(_0x397a59,_0x750e0a){const _0x267688=a3_0x38ce,_0x53eca1=_0x397a59();while(!![]){try{const _0x1a30b6=parseInt(_0x267688(0x8b))/0x1*(parseInt(_0x267688(0x9a))/0x2)+-parseInt(_0x267688(0xb0))/0x3+parseInt(_0x267688(0xc8))/0x4+parseInt(_0x267688(0x89))/0x5*(parseInt(_0x267688(0xb4))/0x6)+-parseInt(_0x267688(0x96))/0x7*(parseInt(_0x267688(0x98))/0x8)+-parseInt(_0x267688(0x78))/0x9+parseInt(_0x267688(0x79))/0xa*(parseInt(_0x267688(0xbd))/0xb);if(_0x1a30b6===_0x750e0a)break;else _0x53eca1['push'](_0x53eca1['shift']());}catch(_0x39a303){_0x53eca1['push'](_0x53eca1['shift']());}}}(a3_0x5284,0x26ced));function a3_0x5284(){const _0x1497aa=['Customer\x20data\x20updated\x20successfully','refund','AdminController','getUserById','Failed\x20to\x20send\x20Telegram\x20notification\x20for\x20status\x20change:','body','toUpperCase','971972yqKyuR','getPayouts','merchants','getUsers','AdminService','EXPIRED','updateCustomerData','../services/telegramBotService','processing','getPayoutById','handleSuccessfulPayment','getAllPayouts','REFUND','Payment\x20updated\x20successfully','createPayout',',\x20sending\x20Telegram\x20notification','1413864gwjvRS','10sSYGrD','User\x20updated\x20successfully','error','âœ…\x20Telegram\x20notification\x20sent\x20for\x20status\x20change:\x20','PaymentLinkService','query','summary','updatePaymentStatus','telegramBotService','FAILED','getSystemStatistics','checkAuth','shopId','\x20->\x20','Payment\x20not\x20found','chargeback','35nERQGe','updateUser','36mhvVOh','json','paymentLinkService','Admin\x20access\x20confirmed','User\x20deleted\x20successfully','status','Payout\x20created\x20successfully','failed','suspendUser','ðŸ“Š\x20Admin\x20requesting\x20merchant\x20statistics\x20with\x20filters:','\x20to\x20PAID,\x20updating\x20payment\x20link\x20counter','189RPgAYN','log','85656MPtZzR','params','15044PnDvEQ','payouts','adminService','activateUser','30d','getStatistics','ðŸ“±\x20Payment\x20','role','getMerchantStatistics','createUser','pagination','gateway','getPayments','payments','PROCESSING','deleteUser','user','getPaymentById','Failed\x20to\x20update\x20payment\x20link\x20counter:','User\x20suspended\x20successfully','ðŸ”„\x20Admin\x20updating\x20customer\x20data\x20for\x20payment\x20','User\x20not\x20found','724686wVPpzc','User\x20created\x20successfully','deletePayout','createdAt','45174QVZeUM','getMerchantsSelection','PAID','ðŸ“ˆ\x20Admin\x20changed\x20payment\x20','updatePayment','\x20to\x20','getMerchantsAwaitingPayout','../services/adminService','getAllUsers','3082376gfyFmg','\x20status\x20changed\x20from\x20','paid','sendPaymentNotification'];a3_0x5284=function(){return _0x1497aa;};return a3_0x5284();}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a3_0x16f044(0xc3)]=void 0x0;const adminService_1=require(a3_0x16f044(0xbb)),paymentLinkService_1=require('../services/paymentLinkService'),telegramBotService_1=require(a3_0x16f044(0xcf));class AdminController{constructor(){const _0x1059a5=a3_0x16f044;this[_0x1059a5(0x84)]=async(_0x392af,_0x3bae5f,_0x3f0bc0)=>{const _0x5acfbb=_0x1059a5;try{const _0x1090b2=_0x392af[_0x5acfbb(0xaa)];_0x3bae5f['json']({'success':!![],'message':_0x5acfbb(0x8e),'user':{'id':_0x1090b2?.['id'],'username':_0x1090b2?.['username'],'role':_0x1090b2?.[_0x5acfbb(0xa1)]}});}catch(_0x490a08){_0x3f0bc0(_0x490a08);}},this[_0x1059a5(0x9f)]=async(_0x3fa114,_0xa88b6e,_0x4d997a)=>{const _0x1c52d9=_0x1059a5;try{const {period:period=_0x1c52d9(0x9e)}=_0x3fa114[_0x1c52d9(0x7e)],_0x41e65c=await this[_0x1c52d9(0x9c)][_0x1c52d9(0x83)](period);_0xa88b6e['json']({'success':!![],'result':_0x41e65c});}catch(_0x1f9806){_0x4d997a(_0x1f9806);}},this['getMerchantStatistics']=async(_0x2516d,_0x585881,_0x1fe0eb)=>{const _0x3db213=_0x1059a5;try{const {shopId:_0x5529bc,period:period='month',dateFrom:_0x266ee4,dateTo:_0x3f40f6}=_0x2516d[_0x3db213(0x7e)],_0x3a99ba={'shopId':_0x5529bc,'period':period,'dateFrom':_0x266ee4,'dateTo':_0x3f40f6};console['log'](_0x3db213(0x94),_0x3a99ba);const _0x578a6b=await this[_0x3db213(0x9c)][_0x3db213(0xa2)](_0x3a99ba);_0x585881['json']({'success':!![],'result':_0x578a6b});}catch(_0x1933fd){_0x1fe0eb(_0x1933fd);}},this['getPayoutStats']=async(_0x47f6ec,_0x1de36a,_0x21ffe8)=>{try{const _0x36fdb5=await this['adminService']['getPayoutStats']();_0x1de36a['json']({'success':!![],'result':_0x36fdb5});}catch(_0x10d108){_0x21ffe8(_0x10d108);}},this[_0x1059a5(0xba)]=async(_0x32fa62,_0x1eac9e,_0xd7db9b)=>{const _0x32e392=_0x1059a5;try{const {page:page=0x1,limit:limit=0x14,minAmount:_0x1d8f90,search:_0x44f3bd}=_0x32fa62[_0x32e392(0x7e)],_0xa88a8e={'page':Number(page),'limit':Number(limit),'minAmount':_0x1d8f90?Number(_0x1d8f90):undefined,'search':_0x44f3bd},_0x2b4976=await this[_0x32e392(0x9c)]['getMerchantsAwaitingPayout'](_0xa88a8e);_0x1eac9e[_0x32e392(0x8c)]({'success':!![],'merchants':_0x2b4976[_0x32e392(0xca)],'pagination':_0x2b4976[_0x32e392(0xa4)],'summary':_0x2b4976[_0x32e392(0x7f)]});}catch(_0x1a1d88){_0xd7db9b(_0x1a1d88);}},this[_0x1059a5(0xb5)]=async(_0x4ed894,_0x123f72,_0x4cdf5a)=>{const _0x100acf=_0x1059a5;try{const _0x4f168d=await this[_0x100acf(0x9c)][_0x100acf(0xb5)]();_0x123f72['json']({'success':!![],'result':_0x4f168d});}catch(_0x145b76){_0x4cdf5a(_0x145b76);}},this[_0x1059a5(0x76)]=async(_0xbfa5ea,_0x37488f,_0x4a0d5c)=>{const _0x1d4a58=_0x1059a5;try{const _0x473f44=_0xbfa5ea['body'],_0x9d9a33=await this[_0x1d4a58(0x9c)][_0x1d4a58(0x76)](_0x473f44);_0x37488f[_0x1d4a58(0x90)](0xc9)['json']({'success':!![],'message':_0x1d4a58(0x91),'result':_0x9d9a33});}catch(_0x1559d7){_0x4a0d5c(_0x1559d7);}},this[_0x1059a5(0xc9)]=async(_0x3603b2,_0x2236d1,_0x1dfd8c)=>{const _0x1a49a1=_0x1059a5;try{const {page:page=0x1,limit:limit=0x14,shopId:_0x6b5534,network:_0x4a403c,dateFrom:_0x427b1f,dateTo:_0x38582f,search:_0x8babb8}=_0x3603b2[_0x1a49a1(0x7e)],_0x212c8d={'page':Number(page),'limit':Number(limit),'shopId':_0x6b5534,'network':_0x4a403c,'dateFrom':_0x427b1f,'dateTo':_0x38582f,'search':_0x8babb8},_0x1f7218=await this['adminService'][_0x1a49a1(0x73)](_0x212c8d);_0x2236d1[_0x1a49a1(0x8c)]({'success':!![],'payouts':_0x1f7218[_0x1a49a1(0x9b)],'pagination':_0x1f7218[_0x1a49a1(0xa4)]});}catch(_0x47c6c9){_0x1dfd8c(_0x47c6c9);}},this['getPayoutById']=async(_0x21c233,_0x2ef257,_0x225e08)=>{const _0x203616=_0x1059a5;try{const {id:_0x1c237a}=_0x21c233[_0x203616(0x99)],_0x221307=await this['adminService'][_0x203616(0xd1)](_0x1c237a);if(!_0x221307)return _0x2ef257['status'](0x194)[_0x203616(0x8c)]({'success':![],'message':'Payout\x20not\x20found'});_0x2ef257[_0x203616(0x8c)]({'success':!![],'result':_0x221307});}catch(_0x38ea3c){_0x225e08(_0x38ea3c);}},this[_0x1059a5(0xb2)]=async(_0x56f07c,_0x556b37,_0x5224a3)=>{const _0x21a4c8=_0x1059a5;try{const {id:_0x26c834}=_0x56f07c[_0x21a4c8(0x99)];await this[_0x21a4c8(0x9c)][_0x21a4c8(0xb2)](_0x26c834),_0x556b37['json']({'success':!![],'message':'Payout\x20deleted\x20successfully'});}catch(_0x31773b){_0x5224a3(_0x31773b);}},this[_0x1059a5(0xa6)]=async(_0x349ca4,_0x52fcfa,_0x593c53)=>{const _0x16ff14=_0x1059a5;try{const {page:page=0x1,limit:limit=0x14,status:_0x4b0ebd,gateway:_0x3ffc48,shopId:_0x4feeaa,dateFrom:_0x193d6a,dateTo:_0x1ffdbd,search:_0x3df07d,currency:_0x3054cd,sortBy:_0xe166a0,sortOrder:_0x3270e4}=_0x349ca4[_0x16ff14(0x7e)],_0x1220f6={'page':Number(page),'limit':Number(limit),'status':_0x4b0ebd,'gateway':_0x3ffc48,'shopId':_0x4feeaa,'dateFrom':_0x193d6a,'dateTo':_0x1ffdbd,'search':_0x3df07d,'currency':_0x3054cd,'sortBy':_0xe166a0,'sortOrder':_0x3270e4},_0x14306a=await this[_0x16ff14(0x9c)]['getAllPayments'](_0x1220f6);_0x52fcfa[_0x16ff14(0x8c)]({'success':!![],'payments':_0x14306a[_0x16ff14(0xa7)],'pagination':_0x14306a[_0x16ff14(0xa4)]});}catch(_0x2906a5){_0x593c53(_0x2906a5);}},this[_0x1059a5(0xab)]=async(_0x55902b,_0xc4e4a4,_0x4c55a4)=>{const _0x3cf11e=_0x1059a5;try{const {id:_0x4e3f70}=_0x55902b[_0x3cf11e(0x99)],_0x500a60=await this[_0x3cf11e(0x9c)][_0x3cf11e(0xab)](_0x4e3f70);if(!_0x500a60)return _0xc4e4a4[_0x3cf11e(0x90)](0x194)['json']({'success':![],'message':_0x3cf11e(0x87)});_0xc4e4a4[_0x3cf11e(0x8c)]({'success':!![],'result':_0x500a60});}catch(_0x5ce33c){_0x4c55a4(_0x5ce33c);}},this[_0x1059a5(0xb8)]=async(_0x416c66,_0x363235,_0x126f0f)=>{const _0x498fb6=_0x1059a5;try{const {id:_0x41f6a7}=_0x416c66[_0x498fb6(0x99)],{status:_0x1b3120,notes:_0xb1b39f,chargebackAmount:_0x7ddca6}=_0x416c66['body'],_0x31981c=await this[_0x498fb6(0x9c)]['getPaymentById'](_0x41f6a7);if(!_0x31981c)return _0x363235[_0x498fb6(0x90)](0x194)[_0x498fb6(0x8c)]({'success':![],'message':_0x498fb6(0x87)});const _0x352692=await this[_0x498fb6(0x9c)][_0x498fb6(0x80)](_0x41f6a7,_0x1b3120,_0xb1b39f,_0x7ddca6);if(_0x31981c['status']!==_0x1b3120&&_0x1b3120[_0x498fb6(0xc7)]()===_0x498fb6(0xb6)){console[_0x498fb6(0x97)](_0x498fb6(0xb7)+_0x41f6a7+_0x498fb6(0x95));try{await this[_0x498fb6(0x8d)][_0x498fb6(0xd2)](_0x41f6a7),console[_0x498fb6(0x97)]('âœ…\x20Payment\x20link\x20counter\x20updated\x20for\x20payment\x20'+_0x41f6a7);}catch(_0x4c94a5){console[_0x498fb6(0x7b)](_0x498fb6(0xac),_0x4c94a5);}}if(_0x31981c[_0x498fb6(0x90)]!==_0x1b3120){console[_0x498fb6(0x97)](_0x498fb6(0xa0)+_0x41f6a7+_0x498fb6(0xbe)+_0x31981c[_0x498fb6(0x90)]+_0x498fb6(0xb9)+_0x1b3120+_0x498fb6(0x77));try{let _0x586aa5;switch(_0x1b3120[_0x498fb6(0xc7)]()){case _0x498fb6(0xb6):_0x586aa5=_0x498fb6(0xbf);break;case _0x498fb6(0xa8):_0x586aa5=_0x498fb6(0xd0);break;case _0x498fb6(0x82):_0x586aa5=_0x498fb6(0x92);break;case _0x498fb6(0xcd):_0x586aa5='expired';break;case _0x498fb6(0x74):_0x586aa5=_0x498fb6(0xc2);break;case'CHARGEBACK':_0x586aa5=_0x498fb6(0x88);break;default:console['log']('ðŸ“±\x20Skipping\x20Telegram\x20notification\x20for\x20status\x20change\x20to:\x20'+_0x1b3120);break;}if(_0x586aa5){const _0x22c5d5={..._0x352692,'shopId':_0x31981c[_0x498fb6(0x85)],'gateway':_0x31981c[_0x498fb6(0xa5)],'createdAt':_0x31981c[_0x498fb6(0xb3)],'chargebackAmount':_0x7ddca6};await telegramBotService_1[_0x498fb6(0x81)][_0x498fb6(0xc0)](_0x31981c['shopId'],_0x22c5d5,_0x586aa5),console['log'](_0x498fb6(0x7c)+_0x31981c['status']+_0x498fb6(0x86)+_0x1b3120);}}catch(_0x474700){console['error'](_0x498fb6(0xc5),_0x474700);}}_0x363235[_0x498fb6(0x8c)]({'success':!![],'message':_0x498fb6(0x75),'result':_0x352692});}catch(_0x11a686){_0x126f0f(_0x11a686);}},this[_0x1059a5(0xce)]=async(_0x4b8e49,_0x5b8b04,_0x1af2f6)=>{const _0x482f5b=_0x1059a5;try{const {id:_0x4965cc}=_0x4b8e49[_0x482f5b(0x99)],_0x120b5e=_0x4b8e49[_0x482f5b(0xc6)];console[_0x482f5b(0x97)](_0x482f5b(0xae)+_0x4965cc+':',_0x120b5e);const _0x36f412=await this['adminService'][_0x482f5b(0xce)](_0x4965cc,_0x120b5e);_0x5b8b04[_0x482f5b(0x8c)]({'success':!![],'message':_0x482f5b(0xc1),'result':_0x36f412});}catch(_0xd4bc33){_0x1af2f6(_0xd4bc33);}},this[_0x1059a5(0x8a)]=async(_0x2ca687,_0x99c497,_0x1a0343)=>{const _0x2716e5=_0x1059a5;try{const {id:_0x572f35}=_0x2ca687[_0x2716e5(0x99)],_0x17808c=_0x2ca687[_0x2716e5(0xc6)],_0x4e5373=await this[_0x2716e5(0x9c)][_0x2716e5(0x8a)](_0x572f35,_0x17808c);_0x99c497['json']({'success':!![],'message':_0x2716e5(0x7a),'result':_0x4e5373});}catch(_0x319e67){_0x1a0343(_0x319e67);}},this[_0x1059a5(0x93)]=async(_0x28ef0f,_0x2a2263,_0x118d92)=>{const _0xeefa7f=_0x1059a5;try{const {id:_0x4e6cc8}=_0x28ef0f['params'],_0x5b8587=await this[_0xeefa7f(0x9c)][_0xeefa7f(0x93)](_0x4e6cc8);_0x2a2263['json']({'success':!![],'message':_0xeefa7f(0xad),'result':_0x5b8587});}catch(_0x3a2a30){_0x118d92(_0x3a2a30);}},this[_0x1059a5(0x9d)]=async(_0x243a96,_0x4e9a8d,_0x32cd52)=>{const _0x2fb672=_0x1059a5;try{const {id:_0xba068d}=_0x243a96['params'],_0x56bc98=await this[_0x2fb672(0x9c)][_0x2fb672(0x9d)](_0xba068d);_0x4e9a8d['json']({'success':!![],'message':'User\x20activated\x20successfully','result':_0x56bc98});}catch(_0x25c827){_0x32cd52(_0x25c827);}},this[_0x1059a5(0xcb)]=async(_0x27ae49,_0x25cd42,_0x16e4cb)=>{const _0x2d9996=_0x1059a5;try{const {page:page=0x1,limit:limit=0x14,status:_0x1182ef}=_0x27ae49[_0x2d9996(0x7e)],_0x5a5cef={'page':Number(page),'limit':Number(limit),'status':_0x1182ef},_0x5b4c80=await this['adminService'][_0x2d9996(0xbc)](_0x5a5cef);_0x25cd42['json']({'success':!![],'users':_0x5b4c80['users'],'pagination':_0x5b4c80[_0x2d9996(0xa4)]});}catch(_0x351b86){_0x16e4cb(_0x351b86);}},this[_0x1059a5(0xc4)]=async(_0x1c79b5,_0x4d60a9,_0xf90e44)=>{const _0x408573=_0x1059a5;try{const {id:_0x63664f}=_0x1c79b5[_0x408573(0x99)],_0x2ca2c6=await this[_0x408573(0x9c)]['getUserById'](_0x63664f);if(!_0x2ca2c6)return _0x4d60a9['status'](0x194)[_0x408573(0x8c)]({'success':![],'message':_0x408573(0xaf)});_0x4d60a9[_0x408573(0x8c)]({'success':!![],'result':_0x2ca2c6});}catch(_0x115530){_0xf90e44(_0x115530);}},this[_0x1059a5(0xa3)]=async(_0x14f643,_0x10169a,_0x3d8b3b)=>{const _0x3ed801=_0x1059a5;try{const _0x32c367=_0x14f643[_0x3ed801(0xc6)],_0x13221a=await this['adminService']['createUser'](_0x32c367);_0x10169a['status'](0xc9)['json']({'success':!![],'message':_0x3ed801(0xb1),'result':_0x13221a});}catch(_0x2eeedd){_0x3d8b3b(_0x2eeedd);}},this[_0x1059a5(0xa9)]=async(_0x1ae693,_0x5b4940,_0x5f3d9e)=>{const _0x2069e8=_0x1059a5;try{const {id:_0x1e17f3}=_0x1ae693[_0x2069e8(0x99)];await this[_0x2069e8(0x9c)][_0x2069e8(0xa9)](_0x1e17f3),_0x5b4940[_0x2069e8(0x8c)]({'success':!![],'message':_0x2069e8(0x8f)});}catch(_0x4768b2){_0x5f3d9e(_0x4768b2);}},this[_0x1059a5(0x9c)]=new adminService_1[(_0x1059a5(0xcc))](),this[_0x1059a5(0x8d)]=new paymentLinkService_1[(_0x1059a5(0x7d))]();}}exports['AdminController']=AdminController;