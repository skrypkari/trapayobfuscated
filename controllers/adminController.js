'use strict';function a3_0x20a5(_0x5c004e,_0x13d25b){const _0x275af4=a3_0x275a();return a3_0x20a5=function(_0x20a520,_0x16bb34){_0x20a520=_0x20a520-0x1ee;let _0x3c7715=_0x275af4[_0x20a520];return _0x3c7715;},a3_0x20a5(_0x5c004e,_0x13d25b);}const a3_0x2348f5=a3_0x20a5;(function(_0x3d46f2,_0x52f64f){const _0x851a83=a3_0x20a5,_0x3e6de1=_0x3d46f2();while(!![]){try{const _0x22baca=parseInt(_0x851a83(0x1fd))/0x1+-parseInt(_0x851a83(0x214))/0x2+-parseInt(_0x851a83(0x21c))/0x3*(-parseInt(_0x851a83(0x1f3))/0x4)+parseInt(_0x851a83(0x1fc))/0x5*(parseInt(_0x851a83(0x23d))/0x6)+-parseInt(_0x851a83(0x249))/0x7*(parseInt(_0x851a83(0x1f5))/0x8)+parseInt(_0x851a83(0x245))/0x9*(-parseInt(_0x851a83(0x218))/0xa)+-parseInt(_0x851a83(0x238))/0xb*(-parseInt(_0x851a83(0x220))/0xc);if(_0x22baca===_0x52f64f)break;else _0x3e6de1['push'](_0x3e6de1['shift']());}catch(_0x4a7fcf){_0x3e6de1['push'](_0x3e6de1['shift']());}}}(a3_0x275a,0x7ff31));function a3_0x275a(){const _0x47d13b=['toUpperCase','CHARGEBACK','summary','REFUND','143HNJsJY','EXPIRED','Failed\x20to\x20send\x20Telegram\x20notification\x20for\x20status\x20change:','refund','month','12QAlZiW','Failed\x20to\x20update\x20payment\x20link\x20counter:','defineProperty','sendPaymentNotification','User\x20updated\x20successfully','getStatistics','__esModule','updatePaymentStatus','63tfKIKU','shopId','deletePayout','query','654374etmLcC','createUser','getPayoutStats','getPayouts','activateUser','createPayout','\x20to\x20PAID,\x20updating\x20payment\x20link\x20counter','436reURhS','Customer\x20data\x20updated\x20successfully','64EWIYaY','updateCustomerData','gateway','handleSuccessfulPayment','getMerchantsSelection','username','Payout\x20not\x20found','1951930EgbfnP','527946IfiqZi','Admin\x20access\x20confirmed','ðŸ“Š\x20Admin\x20requesting\x20merchant\x20statistics\x20with\x20filters:',',\x20sending\x20Telegram\x20notification','log','AdminController','pagination','User\x20not\x20found','error','30d','paymentLinkService','Payout\x20deleted\x20successfully','paid','getPayoutById','suspendUser','params','processing','getUserById','updateUser','deleteUser','getPaymentById','Payment\x20not\x20found','User\x20activated\x20successfully','859412aKnZBQ','âœ…\x20Payment\x20link\x20counter\x20updated\x20for\x20payment\x20','failed','role','1303660mmIvAV','getAllPayouts','telegramBotService','adminService','9969uoMcHa','getAllPayments','User\x20created\x20successfully','user','870720FDpWcR','getMerchantStatistics','Payout\x20created\x20successfully','PaymentLinkService','status','getMerchantsAwaitingPayout','json','Payment\x20updated\x20successfully','ðŸ”„\x20Admin\x20updating\x20customer\x20data\x20for\x20payment\x20','body','users','ðŸ“±\x20Payment\x20','FAILED','PAID','payouts','\x20to\x20','../services/adminService','getUsers','getAllUsers','getSystemStatistics'];a3_0x275a=function(){return _0x47d13b;};return a3_0x275a();}Object[a3_0x2348f5(0x23f)](exports,a3_0x2348f5(0x243),{'value':!![]}),exports[a3_0x2348f5(0x202)]=void 0x0;const adminService_1=require(a3_0x2348f5(0x230)),paymentLinkService_1=require('../services/paymentLinkService'),telegramBotService_1=require('../services/telegramBotService');class AdminController{constructor(){const _0x1c708a=a3_0x2348f5;this['checkAuth']=async(_0x38218b,_0x225129,_0x2ed661)=>{const _0x2aec63=a3_0x20a5;try{const _0x5c1218=_0x38218b[_0x2aec63(0x21f)];_0x225129[_0x2aec63(0x226)]({'success':!![],'message':_0x2aec63(0x1fe),'user':{'id':_0x5c1218?.['id'],'username':_0x5c1218?.[_0x2aec63(0x1fa)],'role':_0x5c1218?.[_0x2aec63(0x217)]}});}catch(_0x5552e9){_0x2ed661(_0x5552e9);}},this[_0x1c708a(0x242)]=async(_0x41fb5f,_0xb99fff,_0x8b702c)=>{const _0x59293c=_0x1c708a;try{const {period:period=_0x59293c(0x206)}=_0x41fb5f[_0x59293c(0x248)],_0x29499d=await this[_0x59293c(0x21b)][_0x59293c(0x233)](period);_0xb99fff[_0x59293c(0x226)]({'success':!![],'result':_0x29499d});}catch(_0x19ac48){_0x8b702c(_0x19ac48);}},this[_0x1c708a(0x221)]=async(_0x484658,_0x1dd4d8,_0x3c79a3)=>{const _0x208f76=_0x1c708a;try{const {shopId:_0x25526,period:period=_0x208f76(0x23c),dateFrom:_0x11a3b9,dateTo:_0x1fad83}=_0x484658[_0x208f76(0x248)],_0x52e8ba={'shopId':_0x25526,'period':period,'dateFrom':_0x11a3b9,'dateTo':_0x1fad83};console[_0x208f76(0x201)](_0x208f76(0x1ff),_0x52e8ba);const _0x38fd71=await this['adminService'][_0x208f76(0x221)](_0x52e8ba);_0x1dd4d8[_0x208f76(0x226)]({'success':!![],'result':_0x38fd71});}catch(_0x499b8a){_0x3c79a3(_0x499b8a);}},this[_0x1c708a(0x1ee)]=async(_0x25a1d2,_0x865b39,_0x1c627d)=>{const _0x46dcd6=_0x1c708a;try{const _0x4bec8f=await this['adminService'][_0x46dcd6(0x1ee)]();_0x865b39['json']({'success':!![],'result':_0x4bec8f});}catch(_0x4ae892){_0x1c627d(_0x4ae892);}},this[_0x1c708a(0x225)]=async(_0x2c489e,_0x36da84,_0x2a0e80)=>{const _0x94404e=_0x1c708a;try{const {page:page=0x1,limit:limit=0x14,minAmount:_0x566668,search:_0x32e4ac}=_0x2c489e[_0x94404e(0x248)],_0x1ed17e={'page':Number(page),'limit':Number(limit),'minAmount':_0x566668?Number(_0x566668):undefined,'search':_0x32e4ac},_0x8c4a08=await this[_0x94404e(0x21b)][_0x94404e(0x225)](_0x1ed17e);_0x36da84['json']({'success':!![],'merchants':_0x8c4a08['merchants'],'pagination':_0x8c4a08[_0x94404e(0x203)],'summary':_0x8c4a08[_0x94404e(0x236)]});}catch(_0x34891a){_0x2a0e80(_0x34891a);}},this[_0x1c708a(0x1f9)]=async(_0x5b3a6e,_0x1af30d,_0x237fef)=>{const _0x1c7b4f=_0x1c708a;try{const _0x1dbc19=await this[_0x1c7b4f(0x21b)][_0x1c7b4f(0x1f9)]();_0x1af30d[_0x1c7b4f(0x226)]({'success':!![],'result':_0x1dbc19});}catch(_0x293fe6){_0x237fef(_0x293fe6);}},this[_0x1c708a(0x1f1)]=async(_0x8795fc,_0x2a579d,_0x5082f1)=>{const _0x2c3151=_0x1c708a;try{const _0x229836=_0x8795fc[_0x2c3151(0x229)],_0x32bd1e=await this[_0x2c3151(0x21b)][_0x2c3151(0x1f1)](_0x229836);_0x2a579d['status'](0xc9)[_0x2c3151(0x226)]({'success':!![],'message':_0x2c3151(0x222),'result':_0x32bd1e});}catch(_0x5e5bf7){_0x5082f1(_0x5e5bf7);}},this[_0x1c708a(0x1ef)]=async(_0x2d5c2b,_0x88b1d5,_0x97792b)=>{const _0x2c72a9=_0x1c708a;try{const {page:page=0x1,limit:limit=0x14,shopId:_0x4ea25c,network:_0x3c65b6,dateFrom:_0x3935a1,dateTo:_0x438f6c,search:_0x158075}=_0x2d5c2b[_0x2c72a9(0x248)],_0xe652ce={'page':Number(page),'limit':Number(limit),'shopId':_0x4ea25c,'network':_0x3c65b6,'dateFrom':_0x3935a1,'dateTo':_0x438f6c,'search':_0x158075},_0x4bc496=await this[_0x2c72a9(0x21b)][_0x2c72a9(0x219)](_0xe652ce);_0x88b1d5[_0x2c72a9(0x226)]({'success':!![],'payouts':_0x4bc496[_0x2c72a9(0x22e)],'pagination':_0x4bc496[_0x2c72a9(0x203)]});}catch(_0x4cf6e7){_0x97792b(_0x4cf6e7);}},this[_0x1c708a(0x20a)]=async(_0x2cf257,_0x59fb76,_0x276eab)=>{const _0x26a103=_0x1c708a;try{const {id:_0x2a1910}=_0x2cf257['params'],_0x528199=await this[_0x26a103(0x21b)][_0x26a103(0x20a)](_0x2a1910);if(!_0x528199)return _0x59fb76[_0x26a103(0x224)](0x194)['json']({'success':![],'message':_0x26a103(0x1fb)});_0x59fb76['json']({'success':!![],'result':_0x528199});}catch(_0x4d5908){_0x276eab(_0x4d5908);}},this[_0x1c708a(0x247)]=async(_0x416112,_0x373eb7,_0x1ec027)=>{const _0x4e12bb=_0x1c708a;try{const {id:_0x4c3e70}=_0x416112[_0x4e12bb(0x20c)];await this[_0x4e12bb(0x21b)]['deletePayout'](_0x4c3e70),_0x373eb7[_0x4e12bb(0x226)]({'success':!![],'message':_0x4e12bb(0x208)});}catch(_0x2584de){_0x1ec027(_0x2584de);}},this['getPayments']=async(_0x183b79,_0x2aa9a5,_0xa85abb)=>{const _0x34fe16=_0x1c708a;try{const {page:page=0x1,limit:limit=0x14,status:_0x5491e4,gateway:_0x4f9147,shopId:_0x103589,dateFrom:_0x20d717,dateTo:_0x3725ac,search:_0xcdca8b,currency:_0x3eeb2a,sortBy:_0x4b0dd2,sortOrder:_0x586d4d}=_0x183b79[_0x34fe16(0x248)],_0x1c198c={'page':Number(page),'limit':Number(limit),'status':_0x5491e4,'gateway':_0x4f9147,'shopId':_0x103589,'dateFrom':_0x20d717,'dateTo':_0x3725ac,'search':_0xcdca8b,'currency':_0x3eeb2a,'sortBy':_0x4b0dd2,'sortOrder':_0x586d4d},_0xc036b9=await this['adminService'][_0x34fe16(0x21d)](_0x1c198c);_0x2aa9a5['json']({'success':!![],'payments':_0xc036b9['payments'],'pagination':_0xc036b9['pagination']});}catch(_0x2f1302){_0xa85abb(_0x2f1302);}},this[_0x1c708a(0x211)]=async(_0x322943,_0x182c20,_0x45129a)=>{const _0x1d235b=_0x1c708a;try{const {id:_0x357058}=_0x322943[_0x1d235b(0x20c)],_0x89963a=await this[_0x1d235b(0x21b)][_0x1d235b(0x211)](_0x357058);if(!_0x89963a)return _0x182c20[_0x1d235b(0x224)](0x194)['json']({'success':![],'message':_0x1d235b(0x212)});_0x182c20[_0x1d235b(0x226)]({'success':!![],'result':_0x89963a});}catch(_0x889ea4){_0x45129a(_0x889ea4);}},this['updatePayment']=async(_0x3bdecd,_0x226ea3,_0x5d5e3b)=>{const _0xb3d91c=_0x1c708a;try{const {id:_0x391dca}=_0x3bdecd[_0xb3d91c(0x20c)],{status:_0x1bcece,notes:_0x45befe,chargebackAmount:_0x54ccd6}=_0x3bdecd[_0xb3d91c(0x229)],_0x3b553d=await this[_0xb3d91c(0x21b)]['getPaymentById'](_0x391dca);if(!_0x3b553d)return _0x226ea3['status'](0x194)[_0xb3d91c(0x226)]({'success':![],'message':'Payment\x20not\x20found'});const _0x563382=await this[_0xb3d91c(0x21b)][_0xb3d91c(0x244)](_0x391dca,_0x1bcece,_0x45befe,_0x54ccd6);if(_0x3b553d[_0xb3d91c(0x224)]!==_0x1bcece&&_0x1bcece['toUpperCase']()===_0xb3d91c(0x22d)){console[_0xb3d91c(0x201)]('ðŸ“ˆ\x20Admin\x20changed\x20payment\x20'+_0x391dca+_0xb3d91c(0x1f2));try{await this['paymentLinkService'][_0xb3d91c(0x1f8)](_0x391dca),console[_0xb3d91c(0x201)](_0xb3d91c(0x215)+_0x391dca);}catch(_0x32a561){console[_0xb3d91c(0x205)](_0xb3d91c(0x23e),_0x32a561);}}if(_0x3b553d[_0xb3d91c(0x224)]!==_0x1bcece){console[_0xb3d91c(0x201)](_0xb3d91c(0x22b)+_0x391dca+'\x20status\x20changed\x20from\x20'+_0x3b553d[_0xb3d91c(0x224)]+_0xb3d91c(0x22f)+_0x1bcece+_0xb3d91c(0x200));try{let _0x25cee1;switch(_0x1bcece[_0xb3d91c(0x234)]()){case _0xb3d91c(0x22d):_0x25cee1=_0xb3d91c(0x209);break;case'PROCESSING':_0x25cee1=_0xb3d91c(0x20d);break;case _0xb3d91c(0x22c):_0x25cee1=_0xb3d91c(0x216);break;case _0xb3d91c(0x239):_0x25cee1='expired';break;case _0xb3d91c(0x237):_0x25cee1=_0xb3d91c(0x23b);break;case _0xb3d91c(0x235):_0x25cee1='chargeback';break;default:console[_0xb3d91c(0x201)]('ðŸ“±\x20Skipping\x20Telegram\x20notification\x20for\x20status\x20change\x20to:\x20'+_0x1bcece);break;}if(_0x25cee1){const _0xbff8a4={..._0x563382,'shopId':_0x3b553d[_0xb3d91c(0x246)],'gateway':_0x3b553d[_0xb3d91c(0x1f7)],'createdAt':_0x3b553d['createdAt'],'chargebackAmount':_0x54ccd6};await telegramBotService_1[_0xb3d91c(0x21a)][_0xb3d91c(0x240)](_0x3b553d[_0xb3d91c(0x246)],_0xbff8a4,_0x25cee1),console[_0xb3d91c(0x201)]('âœ…\x20Telegram\x20notification\x20sent\x20for\x20status\x20change:\x20'+_0x3b553d[_0xb3d91c(0x224)]+'\x20->\x20'+_0x1bcece);}}catch(_0x1b90d1){console[_0xb3d91c(0x205)](_0xb3d91c(0x23a),_0x1b90d1);}}_0x226ea3[_0xb3d91c(0x226)]({'success':!![],'message':_0xb3d91c(0x227),'result':_0x563382});}catch(_0x5d8654){_0x5d5e3b(_0x5d8654);}},this[_0x1c708a(0x1f6)]=async(_0x24fc38,_0x3a1c29,_0x97e8e8)=>{const _0x58047a=_0x1c708a;try{const {id:_0x18111f}=_0x24fc38['params'],_0x5a1e25=_0x24fc38[_0x58047a(0x229)];console[_0x58047a(0x201)](_0x58047a(0x228)+_0x18111f+':',_0x5a1e25);const _0x2de0d7=await this[_0x58047a(0x21b)][_0x58047a(0x1f6)](_0x18111f,_0x5a1e25);_0x3a1c29['json']({'success':!![],'message':_0x58047a(0x1f4),'result':_0x2de0d7});}catch(_0x1eeac8){_0x97e8e8(_0x1eeac8);}},this['updateUser']=async(_0x2d9a47,_0x12ddfe,_0x2de408)=>{const _0x5f5b1b=_0x1c708a;try{const {id:_0x3078e8}=_0x2d9a47['params'],_0x3b62dd=_0x2d9a47[_0x5f5b1b(0x229)],_0x2ba306=await this[_0x5f5b1b(0x21b)][_0x5f5b1b(0x20f)](_0x3078e8,_0x3b62dd);_0x12ddfe[_0x5f5b1b(0x226)]({'success':!![],'message':_0x5f5b1b(0x241),'result':_0x2ba306});}catch(_0x139a80){_0x2de408(_0x139a80);}},this['suspendUser']=async(_0x510f47,_0x4975c8,_0x5db066)=>{const _0x2179cd=_0x1c708a;try{const {id:_0x2843c2}=_0x510f47[_0x2179cd(0x20c)],_0x33a979=await this[_0x2179cd(0x21b)][_0x2179cd(0x20b)](_0x2843c2);_0x4975c8[_0x2179cd(0x226)]({'success':!![],'message':'User\x20suspended\x20successfully','result':_0x33a979});}catch(_0x2c7185){_0x5db066(_0x2c7185);}},this[_0x1c708a(0x1f0)]=async(_0x3e3395,_0x2e83ee,_0xfe0b)=>{const _0x83fd7e=_0x1c708a;try{const {id:_0x4df2dd}=_0x3e3395[_0x83fd7e(0x20c)],_0x3f4950=await this[_0x83fd7e(0x21b)][_0x83fd7e(0x1f0)](_0x4df2dd);_0x2e83ee[_0x83fd7e(0x226)]({'success':!![],'message':_0x83fd7e(0x213),'result':_0x3f4950});}catch(_0x3f382c){_0xfe0b(_0x3f382c);}},this[_0x1c708a(0x231)]=async(_0xc6fe54,_0x3237af,_0x53c2ee)=>{const _0x2ce15b=_0x1c708a;try{const {page:page=0x1,limit:limit=0x14,status:_0x409d69}=_0xc6fe54['query'],_0x224e92={'page':Number(page),'limit':Number(limit),'status':_0x409d69},_0x39350e=await this[_0x2ce15b(0x21b)][_0x2ce15b(0x232)](_0x224e92);_0x3237af[_0x2ce15b(0x226)]({'success':!![],'users':_0x39350e[_0x2ce15b(0x22a)],'pagination':_0x39350e[_0x2ce15b(0x203)]});}catch(_0x3875ff){_0x53c2ee(_0x3875ff);}},this[_0x1c708a(0x20e)]=async(_0x254f15,_0x356cd6,_0x435282)=>{const _0x3a808b=_0x1c708a;try{const {id:_0x25eb1e}=_0x254f15[_0x3a808b(0x20c)],_0x364618=await this[_0x3a808b(0x21b)]['getUserById'](_0x25eb1e);if(!_0x364618)return _0x356cd6[_0x3a808b(0x224)](0x194)[_0x3a808b(0x226)]({'success':![],'message':_0x3a808b(0x204)});_0x356cd6['json']({'success':!![],'result':_0x364618});}catch(_0x30345c){_0x435282(_0x30345c);}},this[_0x1c708a(0x24a)]=async(_0x4e3bb5,_0x33e7dc,_0x115882)=>{const _0x1d79af=_0x1c708a;try{const _0x5644f3=_0x4e3bb5[_0x1d79af(0x229)],_0x1f416a=await this['adminService'][_0x1d79af(0x24a)](_0x5644f3);_0x33e7dc['status'](0xc9)[_0x1d79af(0x226)]({'success':!![],'message':_0x1d79af(0x21e),'result':_0x1f416a});}catch(_0x19aafd){_0x115882(_0x19aafd);}},this[_0x1c708a(0x210)]=async(_0x208cdb,_0x1d359e,_0x25bed8)=>{const _0x246aee=_0x1c708a;try{const {id:_0x558cd6}=_0x208cdb['params'];await this[_0x246aee(0x21b)]['deleteUser'](_0x558cd6),_0x1d359e[_0x246aee(0x226)]({'success':!![],'message':'User\x20deleted\x20successfully'});}catch(_0xc57207){_0x25bed8(_0xc57207);}},this['adminService']=new adminService_1['AdminService'](),this[_0x1c708a(0x207)]=new paymentLinkService_1[(_0x1c708a(0x223))]();}}exports[a3_0x2348f5(0x202)]=AdminController;