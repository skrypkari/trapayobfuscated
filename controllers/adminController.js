'use strict';function a3_0x5272(_0x28817f,_0x520ee9){const _0x1ab6d3=a3_0x1ab6();return a3_0x5272=function(_0x52727b,_0x19ebab){_0x52727b=_0x52727b-0x1ce;let _0x498277=_0x1ab6d3[_0x52727b];return _0x498277;},a3_0x5272(_0x28817f,_0x520ee9);}const a3_0x38f69d=a3_0x5272;(function(_0x912d85,_0x4cf5e1){const _0x3392c3=a3_0x5272,_0x44da3d=_0x912d85();while(!![]){try{const _0xaf08df=parseInt(_0x3392c3(0x1fd))/0x1+parseInt(_0x3392c3(0x1fe))/0x2*(parseInt(_0x3392c3(0x1ee))/0x3)+-parseInt(_0x3392c3(0x1cf))/0x4*(-parseInt(_0x3392c3(0x1fb))/0x5)+-parseInt(_0x3392c3(0x204))/0x6*(parseInt(_0x3392c3(0x1d8))/0x7)+-parseInt(_0x3392c3(0x205))/0x8*(parseInt(_0x3392c3(0x208))/0x9)+-parseInt(_0x3392c3(0x1dc))/0xa*(parseInt(_0x3392c3(0x214))/0xb)+parseInt(_0x3392c3(0x216))/0xc*(parseInt(_0x3392c3(0x20c))/0xd);if(_0xaf08df===_0x4cf5e1)break;else _0x44da3d['push'](_0x44da3d['shift']());}catch(_0x3f29f8){_0x44da3d['push'](_0x44da3d['shift']());}}}(a3_0x1ab6,0xd30b8));Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a3_0x38f69d(0x1d3)]=void 0x0;function a3_0x1ab6(){const _0xdc80b9=['Payout\x20created\x20successfully','✅\x20Telegram\x20notification\x20sent\x20for\x20admin\x20status\x20change:\x20','1876AmNyvY','User\x20updated\x20successfully','\x20->\x20','updateUser','AdminController','paid','shopId','payouts','merchants','9648002UBdciO','CHARGEBACK','failed','User\x20activated\x20successfully','2570sFRPPr','EXPIRED','FAILED','getPayoutById','User\x20created\x20successfully','User\x20not\x20found','error','getPayoutStats','getMerchantsAwaitingPayout','updatePaymentStatus','createdAt','adminService','getAllUsers','pagination','../services/telegramBotService','activateUser','Payment\x20updated\x20successfully','getAllPayments','15jqcLvb','Admin\x20access\x20confirmed','status','getPaymentById','telegramBotService','getUserById','users','Статус\x20изменен\x20администратором\x20на\x20','getSystemStatistics','updatePayment','Payment\x20not\x20found','📱\x20Admin\x20changed\x20payment\x20','Failed\x20to\x20send\x20Telegram\x20notification\x20for\x20admin\x20status\x20change:','7385deKTzr','deleteUser','131352fDoIgQ','556986BBjLLj','sendPaymentNotification','getPayments','payments','PAID','body','6IlrFnD','624aqRTnl','deletePayout','query','153639nmsaJn','\x20to\x20','getAllPayouts','suspendUser','1300247Oigyuc','role','\x20status\x20from\x20','log','Payout\x20deleted\x20successfully','json','createUser','params','61754hPIDzj','AdminService','336hcVcCR','📱\x20Skipping\x20Telegram\x20notification\x20for\x20admin\x20status\x20change\x20to:\x20','createPayout'];a3_0x1ab6=function(){return _0xdc80b9;};return a3_0x1ab6();}const adminService_1=require('../services/adminService'),telegramBotService_1=require(a3_0x38f69d(0x1ea));class AdminController{constructor(){const _0x1cf533=a3_0x38f69d;this['checkAuth']=async(_0x5a2b48,_0x1049c9,_0x4ad4f6)=>{const _0x1f9beb=a3_0x5272;try{const _0x2d32ba=_0x5a2b48['user'];_0x1049c9[_0x1f9beb(0x211)]({'success':!![],'message':_0x1f9beb(0x1ef),'user':{'id':_0x2d32ba?.['id'],'username':_0x2d32ba?.['username'],'role':_0x2d32ba?.[_0x1f9beb(0x20d)]}});}catch(_0x242b00){_0x4ad4f6(_0x242b00);}},this['getStatistics']=async(_0x52b3c0,_0x32b360,_0x30a715)=>{const _0x15045a=a3_0x5272;try{const {period:period='30d'}=_0x52b3c0[_0x15045a(0x207)],_0xf60ae1=await this['adminService'][_0x15045a(0x1f6)](period);_0x32b360['json']({'success':!![],'result':_0xf60ae1});}catch(_0x5b7536){_0x30a715(_0x5b7536);}},this[_0x1cf533(0x1e3)]=async(_0x33ee7b,_0x58dc8d,_0x4f4765)=>{const _0x4ed880=_0x1cf533;try{const _0x2200be=await this[_0x4ed880(0x1e7)][_0x4ed880(0x1e3)]();_0x58dc8d[_0x4ed880(0x211)]({'success':!![],'result':_0x2200be});}catch(_0x4b1737){_0x4f4765(_0x4b1737);}},this[_0x1cf533(0x1e4)]=async(_0x3d7ed5,_0x5ca684,_0x48b05e)=>{const _0x1be5de=_0x1cf533;try{const {page:page=0x1,limit:limit=0x14,minAmount:_0x144519,search:_0x1d27a6}=_0x3d7ed5[_0x1be5de(0x207)],_0x6e587e={'page':Number(page),'limit':Number(limit),'minAmount':_0x144519?Number(_0x144519):undefined,'search':_0x1d27a6},_0x26e156=await this[_0x1be5de(0x1e7)][_0x1be5de(0x1e4)](_0x6e587e);_0x5ca684[_0x1be5de(0x211)]({'success':!![],'merchants':_0x26e156[_0x1be5de(0x1d7)],'pagination':_0x26e156[_0x1be5de(0x1e9)],'summary':_0x26e156['summary']});}catch(_0x52af6f){_0x48b05e(_0x52af6f);}},this[_0x1cf533(0x218)]=async(_0x466832,_0x1f2580,_0x755877)=>{const _0x54974c=_0x1cf533;try{const _0x3c17f1=_0x466832[_0x54974c(0x203)],_0x5d7499=await this['adminService'][_0x54974c(0x218)](_0x3c17f1);_0x1f2580[_0x54974c(0x1f0)](0xc9)[_0x54974c(0x211)]({'success':!![],'message':_0x54974c(0x219),'result':_0x5d7499});}catch(_0x32e247){_0x755877(_0x32e247);}},this['getPayouts']=async(_0x3e263d,_0x8f0ad7,_0x1df7ae)=>{const _0x2aaf7e=_0x1cf533;try{const {page:page=0x1,limit:limit=0x14,shopId:_0x24a3d5,network:_0x4d7998,dateFrom:_0x3c92c3,dateTo:_0x1285da,search:_0x2fb48a}=_0x3e263d[_0x2aaf7e(0x207)],_0x4f87a9={'page':Number(page),'limit':Number(limit),'shopId':_0x24a3d5,'network':_0x4d7998,'dateFrom':_0x3c92c3,'dateTo':_0x1285da,'search':_0x2fb48a},_0x41480f=await this[_0x2aaf7e(0x1e7)][_0x2aaf7e(0x20a)](_0x4f87a9);_0x8f0ad7[_0x2aaf7e(0x211)]({'success':!![],'payouts':_0x41480f[_0x2aaf7e(0x1d6)],'pagination':_0x41480f[_0x2aaf7e(0x1e9)]});}catch(_0x3d9ed8){_0x1df7ae(_0x3d9ed8);}},this[_0x1cf533(0x1df)]=async(_0x1ef1aa,_0x52d2d0,_0x4001d0)=>{const _0xf6be87=_0x1cf533;try{const {id:_0x3e8e98}=_0x1ef1aa['params'],_0x349ae1=await this[_0xf6be87(0x1e7)][_0xf6be87(0x1df)](_0x3e8e98);if(!_0x349ae1)return _0x52d2d0[_0xf6be87(0x1f0)](0x194)[_0xf6be87(0x211)]({'success':![],'message':'Payout\x20not\x20found'});_0x52d2d0['json']({'success':!![],'result':_0x349ae1});}catch(_0x3663fa){_0x4001d0(_0x3663fa);}},this[_0x1cf533(0x206)]=async(_0x306a29,_0x2afd0c,_0x518ed6)=>{const _0x2e07de=_0x1cf533;try{const {id:_0x7c4292}=_0x306a29['params'];await this[_0x2e07de(0x1e7)][_0x2e07de(0x206)](_0x7c4292),_0x2afd0c[_0x2e07de(0x211)]({'success':!![],'message':_0x2e07de(0x210)});}catch(_0x5c48e1){_0x518ed6(_0x5c48e1);}},this[_0x1cf533(0x200)]=async(_0x5625da,_0x4692e3,_0x3aeb5b)=>{const _0x723f7c=_0x1cf533;try{const {page:page=0x1,limit:limit=0x14,status:_0x42d7ce,gateway:_0x2de7d0,shopId:_0x34abe3,dateFrom:_0xf1e01c,dateTo:_0x211ffe,search:_0x153eb0}=_0x5625da[_0x723f7c(0x207)],_0x46b306={'page':Number(page),'limit':Number(limit),'status':_0x42d7ce,'gateway':_0x2de7d0,'shopId':_0x34abe3,'dateFrom':_0xf1e01c,'dateTo':_0x211ffe,'search':_0x153eb0},_0x3b251b=await this[_0x723f7c(0x1e7)][_0x723f7c(0x1ed)](_0x46b306);_0x4692e3[_0x723f7c(0x211)]({'success':!![],'payments':_0x3b251b[_0x723f7c(0x201)],'pagination':_0x3b251b[_0x723f7c(0x1e9)]});}catch(_0x32c793){_0x3aeb5b(_0x32c793);}},this[_0x1cf533(0x1f1)]=async(_0x33c1aa,_0x27e149,_0x1266d1)=>{const _0x483a17=_0x1cf533;try{const {id:_0x1940e1}=_0x33c1aa[_0x483a17(0x213)],_0x385f87=await this[_0x483a17(0x1e7)][_0x483a17(0x1f1)](_0x1940e1);if(!_0x385f87)return _0x27e149[_0x483a17(0x1f0)](0x194)['json']({'success':![],'message':_0x483a17(0x1f8)});_0x27e149[_0x483a17(0x211)]({'success':!![],'result':_0x385f87});}catch(_0x3dee2e){_0x1266d1(_0x3dee2e);}},this[_0x1cf533(0x1f7)]=async(_0x5420b0,_0x35cb7c,_0x3313f2)=>{const _0x25fd66=_0x1cf533;try{const {id:_0x3597c0}=_0x5420b0[_0x25fd66(0x213)],{status:_0xe64fed,notes:_0x12c6d1,chargebackAmount:_0x499203}=_0x5420b0[_0x25fd66(0x203)],_0x222ec6=await this[_0x25fd66(0x1e7)][_0x25fd66(0x1f1)](_0x3597c0);if(!_0x222ec6)return _0x35cb7c[_0x25fd66(0x1f0)](0x194)[_0x25fd66(0x211)]({'success':![],'message':_0x25fd66(0x1f8)});const _0x233b4c=await this[_0x25fd66(0x1e7)][_0x25fd66(0x1e5)](_0x3597c0,_0xe64fed,_0x12c6d1,_0x499203);if(_0x222ec6[_0x25fd66(0x1f0)]!==_0xe64fed){console['log'](_0x25fd66(0x1f9)+_0x3597c0+_0x25fd66(0x20e)+_0x222ec6[_0x25fd66(0x1f0)]+_0x25fd66(0x209)+_0xe64fed+',\x20sending\x20Telegram\x20notification');try{let _0x35bf57;switch(_0xe64fed['toUpperCase']()){case _0x25fd66(0x202):_0x35bf57=_0x25fd66(0x1d4);break;case _0x25fd66(0x1de):_0x35bf57=_0x25fd66(0x1da);break;case _0x25fd66(0x1dd):_0x35bf57='expired';break;case'REFUND':_0x35bf57='refund';break;case _0x25fd66(0x1d9):_0x35bf57='chargeback';break;default:console[_0x25fd66(0x20f)](_0x25fd66(0x217)+_0xe64fed);break;}if(_0x35bf57){const _0x331424={..._0x233b4c,'shopId':_0x222ec6[_0x25fd66(0x1d5)],'gateway':_0x222ec6['gateway'],'createdAt':_0x222ec6[_0x25fd66(0x1e6)],'adminNotes':_0x12c6d1||_0x25fd66(0x1f5)+_0xe64fed,'chargebackAmount':_0x499203};await telegramBotService_1[_0x25fd66(0x1f2)][_0x25fd66(0x1ff)](_0x222ec6[_0x25fd66(0x1d5)],_0x331424,_0x35bf57),console['log'](_0x25fd66(0x1ce)+_0x222ec6['status']+_0x25fd66(0x1d1)+_0xe64fed);}}catch(_0xe2b492){console[_0x25fd66(0x1e2)](_0x25fd66(0x1fa),_0xe2b492);}}_0x35cb7c['json']({'success':!![],'message':_0x25fd66(0x1ec),'result':_0x233b4c});}catch(_0xf21dd4){_0x3313f2(_0xf21dd4);}},this[_0x1cf533(0x1d2)]=async(_0x42c448,_0x215167,_0x52100d)=>{const _0x546fde=_0x1cf533;try{const {id:_0x3b3d89}=_0x42c448[_0x546fde(0x213)],_0x21d7de=_0x42c448['body'],_0xaed6ae=await this[_0x546fde(0x1e7)][_0x546fde(0x1d2)](_0x3b3d89,_0x21d7de);_0x215167[_0x546fde(0x211)]({'success':!![],'message':_0x546fde(0x1d0),'result':_0xaed6ae});}catch(_0x4bacb8){_0x52100d(_0x4bacb8);}},this[_0x1cf533(0x20b)]=async(_0x20f610,_0x1a3611,_0x3b9ea5)=>{const _0x4387a7=_0x1cf533;try{const {id:_0x1a21d7}=_0x20f610['params'],_0x421abb=await this[_0x4387a7(0x1e7)][_0x4387a7(0x20b)](_0x1a21d7);_0x1a3611[_0x4387a7(0x211)]({'success':!![],'message':'User\x20suspended\x20successfully','result':_0x421abb});}catch(_0x4add2e){_0x3b9ea5(_0x4add2e);}},this[_0x1cf533(0x1eb)]=async(_0x1a8b3a,_0x4308e7,_0x5aa008)=>{const _0x57a947=_0x1cf533;try{const {id:_0x110d75}=_0x1a8b3a[_0x57a947(0x213)],_0x24652a=await this[_0x57a947(0x1e7)][_0x57a947(0x1eb)](_0x110d75);_0x4308e7[_0x57a947(0x211)]({'success':!![],'message':_0x57a947(0x1db),'result':_0x24652a});}catch(_0x47857a){_0x5aa008(_0x47857a);}},this['getUsers']=async(_0x3e7184,_0xe9f349,_0x1fd565)=>{const _0x2068ec=_0x1cf533;try{const {page:page=0x1,limit:limit=0x14,status:_0x3e2a96}=_0x3e7184[_0x2068ec(0x207)],_0x42801f={'page':Number(page),'limit':Number(limit),'status':_0x3e2a96},_0x5c21ca=await this['adminService'][_0x2068ec(0x1e8)](_0x42801f);_0xe9f349[_0x2068ec(0x211)]({'success':!![],'users':_0x5c21ca[_0x2068ec(0x1f4)],'pagination':_0x5c21ca[_0x2068ec(0x1e9)]});}catch(_0x42f6bb){_0x1fd565(_0x42f6bb);}},this['getUserById']=async(_0x5d6311,_0x4f3934,_0x32e6cb)=>{const _0x2a9b08=_0x1cf533;try{const {id:_0x4466aa}=_0x5d6311[_0x2a9b08(0x213)],_0x5cc305=await this[_0x2a9b08(0x1e7)][_0x2a9b08(0x1f3)](_0x4466aa);if(!_0x5cc305)return _0x4f3934[_0x2a9b08(0x1f0)](0x194)[_0x2a9b08(0x211)]({'success':![],'message':_0x2a9b08(0x1e1)});_0x4f3934['json']({'success':!![],'result':_0x5cc305});}catch(_0x3f6633){_0x32e6cb(_0x3f6633);}},this[_0x1cf533(0x212)]=async(_0x141454,_0x39f491,_0x503baa)=>{const _0xacd279=_0x1cf533;try{const _0x59573e=_0x141454[_0xacd279(0x203)],_0xf21bde=await this[_0xacd279(0x1e7)]['createUser'](_0x59573e);_0x39f491[_0xacd279(0x1f0)](0xc9)[_0xacd279(0x211)]({'success':!![],'message':_0xacd279(0x1e0),'result':_0xf21bde});}catch(_0x38b3d8){_0x503baa(_0x38b3d8);}},this[_0x1cf533(0x1fc)]=async(_0x21cf0a,_0xdba650,_0x3c64c4)=>{const _0x239518=_0x1cf533;try{const {id:_0x4a7c90}=_0x21cf0a[_0x239518(0x213)];await this[_0x239518(0x1e7)][_0x239518(0x1fc)](_0x4a7c90),_0xdba650[_0x239518(0x211)]({'success':!![],'message':'User\x20deleted\x20successfully'});}catch(_0x500fb2){_0x3c64c4(_0x500fb2);}},this[_0x1cf533(0x1e7)]=new adminService_1[(_0x1cf533(0x215))]();}}exports[a3_0x38f69d(0x1d3)]=AdminController;