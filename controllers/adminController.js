'use strict';const a3_0x4a29e0=a3_0x40e6;(function(_0x2117bf,_0x5d07dc){const _0x46a0f4=a3_0x40e6,_0x124a89=_0x2117bf();while(!![]){try{const _0x15ed96=parseInt(_0x46a0f4(0xb9))/0x1+parseInt(_0x46a0f4(0xbe))/0x2*(parseInt(_0x46a0f4(0xe5))/0x3)+parseInt(_0x46a0f4(0xe2))/0x4+parseInt(_0x46a0f4(0xcd))/0x5+parseInt(_0x46a0f4(0xe6))/0x6+-parseInt(_0x46a0f4(0xe8))/0x7+-parseInt(_0x46a0f4(0xb2))/0x8;if(_0x15ed96===_0x5d07dc)break;else _0x124a89['push'](_0x124a89['shift']());}catch(_0xe48823){_0x124a89['push'](_0x124a89['shift']());}}}(a3_0x16c2,0x4f74a));Object[a3_0x4a29e0(0xf4)](exports,a3_0x4a29e0(0xe4),{'value':!![]}),exports['AdminController']=void 0x0;function a3_0x16c2(){const _0x839b74=['createPayout','gateway','users','User\x20deleted\x20successfully','FAILED','Payout\x20deleted\x20successfully','merchants','adminService','Payment\x20not\x20found','defineProperty','getUserById','getAllPayments','refund','getPayoutStats','error','payments','Payout\x20not\x20found','getUsers','Payout\x20created\x20successfully',',\x20sending\x20Telegram\x20notification','2000264PgJpqI','json','getPayouts','deleteUser','paid','getAllUsers','query','194432eInHhy','User\x20created\x20successfully','PAID','ðŸ“±\x20Skipping\x20Telegram\x20notification\x20for\x20admin\x20status\x20change\x20to:\x20','getMerchantsAwaitingPayout','2XOwisb','User\x20suspended\x20successfully','ðŸ“±\x20Admin\x20changed\x20payment\x20','pagination','suspendUser','30d','getPaymentById','User\x20updated\x20successfully','getPayoutById','getAllPayouts','Admin\x20access\x20confirmed','getSystemStatistics','EXPIRED','status','\x20to\x20','463085dOCkwb','User\x20not\x20found','updatePayment','activateUser','updatePaymentStatus','REFUND','failed','log','sendPaymentNotification','shopId','../services/adminService','user','expired','User\x20activated\x20successfully','getPayments','getStatistics','payouts','Payment\x20updated\x20successfully','AdminController','createUser','deletePayout','860340qlpUgW','body','__esModule','446280krAfrb','341634jyzrGY','updateUser','926450UkTrGk','params','CHARGEBACK'];a3_0x16c2=function(){return _0x839b74;};return a3_0x16c2();}function a3_0x40e6(_0x4648c6,_0x187f4e){const _0x16c2d2=a3_0x16c2();return a3_0x40e6=function(_0x40e6b1,_0x4e5d52){_0x40e6b1=_0x40e6b1-0xaa;let _0x5d67e2=_0x16c2d2[_0x40e6b1];return _0x5d67e2;},a3_0x40e6(_0x4648c6,_0x187f4e);}const adminService_1=require(a3_0x4a29e0(0xd7)),telegramBotService_1=require('../services/telegramBotService');class AdminController{constructor(){const _0x1c7ac2=a3_0x4a29e0;this['checkAuth']=async(_0x268533,_0x5150e8,_0x394454)=>{const _0x36781b=a3_0x40e6;try{const _0x3c2853=_0x268533[_0x36781b(0xd8)];_0x5150e8[_0x36781b(0xb3)]({'success':!![],'message':_0x36781b(0xc8),'user':{'id':_0x3c2853?.['id'],'username':_0x3c2853?.['username'],'role':_0x3c2853?.['role']}});}catch(_0x2746b7){_0x394454(_0x2746b7);}},this[_0x1c7ac2(0xdc)]=async(_0x354d4f,_0x4a412d,_0x54c890)=>{const _0x52827a=_0x1c7ac2;try{const {period:period=_0x52827a(0xc3)}=_0x354d4f[_0x52827a(0xb8)],_0x40419c=await this[_0x52827a(0xf2)][_0x52827a(0xc9)](period);_0x4a412d[_0x52827a(0xb3)]({'success':!![],'result':_0x40419c});}catch(_0x26d76c){_0x54c890(_0x26d76c);}},this[_0x1c7ac2(0xab)]=async(_0x1bdedb,_0x220117,_0x355c00)=>{const _0x702e0b=_0x1c7ac2;try{const _0x1f6ca9=await this['adminService'][_0x702e0b(0xab)]();_0x220117['json']({'success':!![],'result':_0x1f6ca9});}catch(_0x46fc70){_0x355c00(_0x46fc70);}},this[_0x1c7ac2(0xbd)]=async(_0x4bf1fe,_0x21d87b,_0x563804)=>{const _0x166f7c=_0x1c7ac2;try{const {page:page=0x1,limit:limit=0x14,minAmount:_0x2f2d49,search:_0x3c3295}=_0x4bf1fe[_0x166f7c(0xb8)],_0x553216={'page':Number(page),'limit':Number(limit),'minAmount':_0x2f2d49?Number(_0x2f2d49):undefined,'search':_0x3c3295},_0x245d67=await this[_0x166f7c(0xf2)][_0x166f7c(0xbd)](_0x553216);_0x21d87b[_0x166f7c(0xb3)]({'success':!![],'merchants':_0x245d67[_0x166f7c(0xf1)],'pagination':_0x245d67['pagination'],'summary':_0x245d67['summary']});}catch(_0x575d93){_0x563804(_0x575d93);}},this['createPayout']=async(_0x5886d2,_0x1be341,_0x1428b9)=>{const _0x337ea9=_0x1c7ac2;try{const _0x2b4c49=_0x5886d2['body'],_0x153895=await this[_0x337ea9(0xf2)][_0x337ea9(0xeb)](_0x2b4c49);_0x1be341[_0x337ea9(0xcb)](0xc9)[_0x337ea9(0xb3)]({'success':!![],'message':_0x337ea9(0xb0),'result':_0x153895});}catch(_0x16dc5d){_0x1428b9(_0x16dc5d);}},this[_0x1c7ac2(0xb4)]=async(_0x162b54,_0x3e154c,_0x52fb64)=>{const _0x4203f0=_0x1c7ac2;try{const {page:page=0x1,limit:limit=0x14,shopId:_0x1060ba,network:_0x4048fc,dateFrom:_0x54476c,dateTo:_0x2599ee,search:_0x4ccabf}=_0x162b54['query'],_0x28ca48={'page':Number(page),'limit':Number(limit),'shopId':_0x1060ba,'network':_0x4048fc,'dateFrom':_0x54476c,'dateTo':_0x2599ee,'search':_0x4ccabf},_0x2d6485=await this[_0x4203f0(0xf2)][_0x4203f0(0xc7)](_0x28ca48);_0x3e154c[_0x4203f0(0xb3)]({'success':!![],'payouts':_0x2d6485[_0x4203f0(0xdd)],'pagination':_0x2d6485[_0x4203f0(0xc1)]});}catch(_0x10108f){_0x52fb64(_0x10108f);}},this['getPayoutById']=async(_0x52d68b,_0x2dc0ff,_0x3624ea)=>{const _0x30e2aa=_0x1c7ac2;try{const {id:_0x160c5d}=_0x52d68b[_0x30e2aa(0xe9)],_0x335662=await this[_0x30e2aa(0xf2)][_0x30e2aa(0xc6)](_0x160c5d);if(!_0x335662)return _0x2dc0ff[_0x30e2aa(0xcb)](0x194)['json']({'success':![],'message':_0x30e2aa(0xae)});_0x2dc0ff[_0x30e2aa(0xb3)]({'success':!![],'result':_0x335662});}catch(_0x48ff48){_0x3624ea(_0x48ff48);}},this[_0x1c7ac2(0xe1)]=async(_0x59332b,_0x38751c,_0x2f56c6)=>{const _0x37c5e4=_0x1c7ac2;try{const {id:_0x199f5d}=_0x59332b['params'];await this[_0x37c5e4(0xf2)][_0x37c5e4(0xe1)](_0x199f5d),_0x38751c[_0x37c5e4(0xb3)]({'success':!![],'message':_0x37c5e4(0xf0)});}catch(_0x19a5b4){_0x2f56c6(_0x19a5b4);}},this[_0x1c7ac2(0xdb)]=async(_0x16bc4b,_0x11eca1,_0x2b0849)=>{const _0x1e0a3d=_0x1c7ac2;try{const {page:page=0x1,limit:limit=0x14,status:_0x1f050e,gateway:_0x1c0446,shopId:_0x380581,dateFrom:_0x175419,dateTo:_0x31f168,search:_0x5c3684}=_0x16bc4b[_0x1e0a3d(0xb8)],_0x457708={'page':Number(page),'limit':Number(limit),'status':_0x1f050e,'gateway':_0x1c0446,'shopId':_0x380581,'dateFrom':_0x175419,'dateTo':_0x31f168,'search':_0x5c3684},_0x3fb647=await this[_0x1e0a3d(0xf2)][_0x1e0a3d(0xf6)](_0x457708);_0x11eca1[_0x1e0a3d(0xb3)]({'success':!![],'payments':_0x3fb647[_0x1e0a3d(0xad)],'pagination':_0x3fb647[_0x1e0a3d(0xc1)]});}catch(_0xe47769){_0x2b0849(_0xe47769);}},this[_0x1c7ac2(0xc4)]=async(_0x40683d,_0x1b8a1f,_0x59d175)=>{const _0x32b43c=_0x1c7ac2;try{const {id:_0x4cd3b2}=_0x40683d[_0x32b43c(0xe9)],_0x2b339a=await this['adminService']['getPaymentById'](_0x4cd3b2);if(!_0x2b339a)return _0x1b8a1f[_0x32b43c(0xcb)](0x194)[_0x32b43c(0xb3)]({'success':![],'message':_0x32b43c(0xf3)});_0x1b8a1f['json']({'success':!![],'result':_0x2b339a});}catch(_0x353fc0){_0x59d175(_0x353fc0);}},this[_0x1c7ac2(0xcf)]=async(_0x25dcbf,_0x129f87,_0x532d7e)=>{const _0x12ccff=_0x1c7ac2;try{const {id:_0x4630d8}=_0x25dcbf['params'],{status:_0x443d44,notes:_0x230709,chargebackAmount:_0x3f4478}=_0x25dcbf[_0x12ccff(0xe3)],_0x5171f3=await this[_0x12ccff(0xf2)]['getPaymentById'](_0x4630d8);if(!_0x5171f3)return _0x129f87[_0x12ccff(0xcb)](0x194)[_0x12ccff(0xb3)]({'success':![],'message':'Payment\x20not\x20found'});const _0x5f66cd=await this[_0x12ccff(0xf2)][_0x12ccff(0xd1)](_0x4630d8,_0x443d44,_0x230709,_0x3f4478);if(_0x5171f3[_0x12ccff(0xcb)]!==_0x443d44){console[_0x12ccff(0xd4)](_0x12ccff(0xc0)+_0x4630d8+'\x20status\x20from\x20'+_0x5171f3[_0x12ccff(0xcb)]+_0x12ccff(0xcc)+_0x443d44+_0x12ccff(0xb1));try{let _0x4a8cc0;switch(_0x443d44['toUpperCase']()){case _0x12ccff(0xbb):_0x4a8cc0=_0x12ccff(0xb6);break;case _0x12ccff(0xef):_0x4a8cc0=_0x12ccff(0xd3);break;case _0x12ccff(0xca):_0x4a8cc0=_0x12ccff(0xd9);break;case _0x12ccff(0xd2):_0x4a8cc0=_0x12ccff(0xaa);break;case _0x12ccff(0xea):_0x4a8cc0='chargeback';break;default:console[_0x12ccff(0xd4)](_0x12ccff(0xbc)+_0x443d44);break;}if(_0x4a8cc0){const _0x4892ca={..._0x5f66cd,'shopId':_0x5171f3['shopId'],'gateway':_0x5171f3[_0x12ccff(0xec)],'createdAt':_0x5171f3['createdAt'],'adminNotes':_0x230709||'Ð¡Ñ‚Ð°Ñ‚ÑƒÑ\x20Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½\x20Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð¾Ð¼\x20Ð½Ð°\x20'+_0x443d44,'chargebackAmount':_0x3f4478};await telegramBotService_1['telegramBotService'][_0x12ccff(0xd5)](_0x5171f3[_0x12ccff(0xd6)],_0x4892ca,_0x4a8cc0),console[_0x12ccff(0xd4)]('âœ…\x20Telegram\x20notification\x20sent\x20for\x20admin\x20status\x20change:\x20'+_0x5171f3[_0x12ccff(0xcb)]+'\x20->\x20'+_0x443d44);}}catch(_0x5a773d){console[_0x12ccff(0xac)]('Failed\x20to\x20send\x20Telegram\x20notification\x20for\x20admin\x20status\x20change:',_0x5a773d);}}_0x129f87['json']({'success':!![],'message':_0x12ccff(0xde),'result':_0x5f66cd});}catch(_0x27c829){_0x532d7e(_0x27c829);}},this[_0x1c7ac2(0xe7)]=async(_0x11f88b,_0x2f5063,_0x192a60)=>{const _0x5e46ba=_0x1c7ac2;try{const {id:_0x403a63}=_0x11f88b['params'],_0x3cd4ea=_0x11f88b['body'],_0x5845e3=await this[_0x5e46ba(0xf2)]['updateUser'](_0x403a63,_0x3cd4ea);_0x2f5063[_0x5e46ba(0xb3)]({'success':!![],'message':_0x5e46ba(0xc5),'result':_0x5845e3});}catch(_0x5b745d){_0x192a60(_0x5b745d);}},this[_0x1c7ac2(0xc2)]=async(_0xa28cd1,_0x412e62,_0x36bf76)=>{const _0x26d354=_0x1c7ac2;try{const {id:_0x4a1595}=_0xa28cd1['params'],_0x3e4033=await this[_0x26d354(0xf2)]['suspendUser'](_0x4a1595);_0x412e62[_0x26d354(0xb3)]({'success':!![],'message':_0x26d354(0xbf),'result':_0x3e4033});}catch(_0xcf4c0e){_0x36bf76(_0xcf4c0e);}},this[_0x1c7ac2(0xd0)]=async(_0x4de385,_0xd7b62d,_0x5992b1)=>{const _0x4e8c23=_0x1c7ac2;try{const {id:_0x233e0e}=_0x4de385[_0x4e8c23(0xe9)],_0x468d27=await this[_0x4e8c23(0xf2)][_0x4e8c23(0xd0)](_0x233e0e);_0xd7b62d['json']({'success':!![],'message':_0x4e8c23(0xda),'result':_0x468d27});}catch(_0x45dcca){_0x5992b1(_0x45dcca);}},this[_0x1c7ac2(0xaf)]=async(_0x2e950c,_0x4edc41,_0x1d8c27)=>{const _0x3e86d6=_0x1c7ac2;try{const {page:page=0x1,limit:limit=0x14,status:_0xa79709}=_0x2e950c[_0x3e86d6(0xb8)],_0x3fe1fe={'page':Number(page),'limit':Number(limit),'status':_0xa79709},_0x1420e3=await this[_0x3e86d6(0xf2)][_0x3e86d6(0xb7)](_0x3fe1fe);_0x4edc41[_0x3e86d6(0xb3)]({'success':!![],'users':_0x1420e3[_0x3e86d6(0xed)],'pagination':_0x1420e3[_0x3e86d6(0xc1)]});}catch(_0x1f7100){_0x1d8c27(_0x1f7100);}},this[_0x1c7ac2(0xf5)]=async(_0x33b61a,_0x3efe82,_0x28d8c1)=>{const _0x3ea7b6=_0x1c7ac2;try{const {id:_0x509d50}=_0x33b61a[_0x3ea7b6(0xe9)],_0x4bf860=await this[_0x3ea7b6(0xf2)][_0x3ea7b6(0xf5)](_0x509d50);if(!_0x4bf860)return _0x3efe82[_0x3ea7b6(0xcb)](0x194)[_0x3ea7b6(0xb3)]({'success':![],'message':_0x3ea7b6(0xce)});_0x3efe82[_0x3ea7b6(0xb3)]({'success':!![],'result':_0x4bf860});}catch(_0x581cfe){_0x28d8c1(_0x581cfe);}},this[_0x1c7ac2(0xe0)]=async(_0x10ac68,_0x2b2d8a,_0x5537b3)=>{const _0x5935d7=_0x1c7ac2;try{const _0x3a1ce3=_0x10ac68[_0x5935d7(0xe3)],_0x21cd8a=await this['adminService'][_0x5935d7(0xe0)](_0x3a1ce3);_0x2b2d8a[_0x5935d7(0xcb)](0xc9)[_0x5935d7(0xb3)]({'success':!![],'message':_0x5935d7(0xba),'result':_0x21cd8a});}catch(_0x128c55){_0x5537b3(_0x128c55);}},this['deleteUser']=async(_0x597f95,_0x7c35eb,_0x1e33f3)=>{const _0x23600a=_0x1c7ac2;try{const {id:_0x5771ae}=_0x597f95['params'];await this[_0x23600a(0xf2)][_0x23600a(0xb5)](_0x5771ae),_0x7c35eb[_0x23600a(0xb3)]({'success':!![],'message':_0x23600a(0xee)});}catch(_0x3145d1){_0x1e33f3(_0x3145d1);}},this['adminService']=new adminService_1['AdminService']();}}exports[a3_0x4a29e0(0xdf)]=AdminController;