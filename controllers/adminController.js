'use strict';const a3_0x7652e2=a3_0x12b1;(function(_0x48e8d0,_0x1719d4){const _0x46a16e=a3_0x12b1,_0x558574=_0x48e8d0();while(!![]){try{const _0x22e054=-parseInt(_0x46a16e(0x169))/0x1*(-parseInt(_0x46a16e(0xf8))/0x2)+parseInt(_0x46a16e(0x104))/0x3+parseInt(_0x46a16e(0x123))/0x4+-parseInt(_0x46a16e(0x145))/0x5*(parseInt(_0x46a16e(0x11b))/0x6)+parseInt(_0x46a16e(0x15c))/0x7*(-parseInt(_0x46a16e(0x108))/0x8)+-parseInt(_0x46a16e(0x128))/0x9+parseInt(_0x46a16e(0xfa))/0xa;if(_0x22e054===_0x1719d4)break;else _0x558574['push'](_0x558574['shift']());}catch(_0xdbe989){_0x558574['push'](_0x558574['shift']());}}}(a3_0x2c12,0xe32d0));Object[a3_0x7652e2(0x138)](exports,a3_0x7652e2(0x10d),{'value':!![]}),exports['AdminController']=void 0x0;const adminService_1=require(a3_0x7652e2(0x140)),paymentLinkService_1=require(a3_0x7652e2(0x120)),paymentCleanupService_1=require(a3_0x7652e2(0xeb)),telegramBotService_1=require('../services/telegramBotService');function a3_0x2c12(){const _0x253e01=['username','total','User\x20updated\x20successfully','Customer\x20data\x20updated\x20successfully','getProcessingPaymentsStats','disableAdmin2FA','\x20->\x20','getAllUsers','ðŸ“Š\x20Manual\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)\x20with\x20report\x20initiated\x20by\x20admin:\x20','getSystemStatistics','createdAt','createUser','getPayoutStats','getUsers','âœ…\x20Payment\x20link\x20counter\x20updated\x20for\x20payment\x20','getPayoutById','paid','51849CvRvOh','query','Payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)\x20with\x20report\x20completed\x20successfully','error','month','ðŸŽ¯\x20[CONTROLLER]\x20Updating\x20payout\x20','EXPIRED','payments','ðŸ“±\x20Skipping\x20Telegram\x20notification\x20for\x20status\x20change\x20to:\x20','getAllPayouts','summary','getUserById','changeAdminPassword','601375hiuAxS','pagination','setupAdmin2FA','â°\x20Manual\x20PENDING\x20payment\x20cleanup\x20initiated\x20by\x20admin:\x20','../services/paymentCleanupService','activateUser','paymentCleanupService','30d','refund','\x20status\x20changed\x20from\x20','getShopWallets','cleanupStalePendingPayments','processed','enableAdmin2FA','toUpperCase','status','\x20to\x20','2IWamek','getStatistics','22595120IpxfyW','PENDING\x20payment\x20cleanup\x20completed\x20successfully','expirePaymentLinks','cleanupStaleProcessingPayments','cleanupStalePayments','log','payouts','suspendUser','ðŸŽ¯\x20[CONTROLLER]\x20Creating\x20payout\x20with\x20data:','updatePaymentStatus','2608446HWnaIA','getPayouts','User\x20deleted\x20successfully','Admin\x202FA\x20disabled\x20successfully','1688Vefofp','deleteUser','2FA\x20enabled\x20successfully','Failed\x20to\x20update\x20payment\x20link\x20counter:','createPayout','__esModule','ðŸ“Š\x20Admin\x20requesting\x20payout\x20reports:','Payout\x20not\x20found','body','updateUser','AdminController','processing','sendPaymentNotification','User\x20created\x20successfully','CHARGEBACK','Failed\x20to\x20send\x20Telegram\x20notification\x20for\x20status\x20change:','Payout\x20deleted\x20successfully','ðŸ”„\x20Admin\x20updating\x20customer\x20data\x20for\x20payment\x20','telegramBotService','18ZqNvpw','getMerchantsSelection','2FA\x20disabled\x20successfully','REFUND','params','../services/paymentLinkService','user','role','766980fZORxX','gateway','paymentLinkService','hasPayoutHistory','getPayoutReports','3209940EfyyrP','ðŸ“ˆ\x20Admin\x20changed\x20payment\x20','PROCESSING\x20payment\x20cleanup\x20completed\x20successfully','expired','failed','checkAuth','json','PAID','PaymentLinkService','updatePayout','shopId','\x20with\x20data:','getAllPayments','User\x20activated\x20successfully','cleanupStalePaymentsWithReport','adminService','defineProperty','statistics','updateCustomerData','Payout\x20created\x20successfully','get2FASettings','enable2FA','User\x20not\x20found','disable2FA','../services/adminService','merchants','AdminService','deletePayout','Payment\x20not\x20found','1786775sgZtqx','updatePayment',',\x20sending\x20Telegram\x20notification','errors','getMerchantStatistics','setup2FA'];a3_0x2c12=function(){return _0x253e01;};return a3_0x2c12();}class AdminController{constructor(){const _0x2fe8ee=a3_0x7652e2;this[_0x2fe8ee(0x12d)]=async(_0x53e44e,_0x225617,_0x335083)=>{const _0x1d4b7b=_0x2fe8ee;try{const _0xdb8792=_0x53e44e[_0x1d4b7b(0x121)];_0x225617['json']({'success':!![],'message':'Admin\x20access\x20confirmed','user':{'id':_0xdb8792?.['id'],'username':_0xdb8792?.[_0x1d4b7b(0x14b)],'role':_0xdb8792?.[_0x1d4b7b(0x122)]}});}catch(_0x14fe6d){_0x335083(_0x14fe6d);}},this[_0x2fe8ee(0xf9)]=async(_0x3a60c9,_0x57db44,_0x51f9d4)=>{const _0x41b51e=_0x2fe8ee;try{const {period:period=_0x41b51e(0xee),currentDate:_0x37f928}=_0x3a60c9['query'],_0x2ae721=await this[_0x41b51e(0x137)][_0x41b51e(0x154)](period,_0x37f928);_0x57db44[_0x41b51e(0x12e)]({'success':!![],'result':_0x2ae721});}catch(_0x4ea8e6){_0x51f9d4(_0x4ea8e6);}},this[_0x2fe8ee(0x149)]=async(_0x325a22,_0x2c4465,_0x1fa303)=>{const _0x299102=_0x2fe8ee;try{const {shopId:_0x4157cc,period:period=_0x299102(0x160),dateFrom:_0x5979cf,dateTo:_0x5017d1}=_0x325a22[_0x299102(0x15d)],_0xb1faee={'shopId':_0x4157cc,'period':period,'dateFrom':_0x5979cf,'dateTo':_0x5017d1};console[_0x299102(0xff)]('ðŸ“Š\x20Admin\x20requesting\x20merchant\x20statistics\x20with\x20filters:',_0xb1faee);const _0x1b5a8a=await this['adminService']['getMerchantStatistics'](_0xb1faee);_0x2c4465[_0x299102(0x12e)]({'success':!![],'result':_0x1b5a8a});}catch(_0x4b7d8f){_0x1fa303(_0x4b7d8f);}},this[_0x2fe8ee(0x127)]=async(_0x281162,_0x3d1bf6,_0x3facc8)=>{const _0x360bc1=_0x2fe8ee;try{const {periodFrom:_0x56ed31,periodTo:_0x547df4,gateway:_0x1116d2}=_0x281162[_0x360bc1(0x15d)];if(!_0x56ed31||!_0x547df4||!_0x1116d2)return _0x3d1bf6[_0x360bc1(0xf6)](0x190)['json']({'success':![],'message':'periodFrom,\x20periodTo,\x20and\x20gateway\x20are\x20required'});console['log'](_0x360bc1(0x10e),{'periodFrom':_0x56ed31,'periodTo':_0x547df4,'gateway':_0x1116d2});const _0x157bc7=await this[_0x360bc1(0x137)][_0x360bc1(0x127)]({'periodFrom':_0x56ed31,'periodTo':_0x547df4,'gateway':_0x1116d2});_0x3d1bf6[_0x360bc1(0x12e)]({'success':!![],'reports':_0x157bc7});}catch(_0x177266){_0x3facc8(_0x177266);}},this[_0x2fe8ee(0x157)]=async(_0x2f1711,_0x49afcd,_0x2acd74)=>{const _0x421a8c=_0x2fe8ee;try{const _0x4c4728=await this['adminService'][_0x421a8c(0x157)]();_0x49afcd[_0x421a8c(0x12e)]({'success':!![],'result':_0x4c4728});}catch(_0xf5b314){_0x2acd74(_0xf5b314);}},this['getMerchantsAwaitingPayout']=async(_0x47eada,_0x419a5,_0xe2a4a6)=>{const _0x21d6cc=_0x2fe8ee;try{const {page:page=0x1,limit:limit=0x14,minAmount:_0x2cbf53,search:_0x5316b4}=_0x47eada[_0x21d6cc(0x15d)],_0x101307={'page':Number(page),'limit':Number(limit),'minAmount':_0x2cbf53?Number(_0x2cbf53):undefined,'search':_0x5316b4},_0x1f7cb4=await this[_0x21d6cc(0x137)]['getMerchantsAwaitingPayout'](_0x101307);_0x419a5[_0x21d6cc(0x12e)]({'success':!![],'merchants':_0x1f7cb4[_0x21d6cc(0x141)],'pagination':_0x1f7cb4['pagination'],'summary':_0x1f7cb4[_0x21d6cc(0x166)]});}catch(_0x4e75f3){_0xe2a4a6(_0x4e75f3);}},this[_0x2fe8ee(0x11c)]=async(_0x4403f5,_0x38bdb4,_0x357541)=>{const _0x7d4dca=_0x2fe8ee;try{const _0x23e5b0=_0x4403f5['query'][_0x7d4dca(0x126)]==='true',_0xbed57a=await this[_0x7d4dca(0x137)][_0x7d4dca(0x11c)](_0x23e5b0);_0x38bdb4['json']({'success':!![],'result':_0xbed57a});}catch(_0x14ffce){_0x357541(_0x14ffce);}},this[_0x2fe8ee(0x10c)]=async(_0x558744,_0x39aed6,_0xd1e902)=>{const _0x49a3cf=_0x2fe8ee;try{const _0x5ddfd2=_0x558744['body'];console['log'](_0x49a3cf(0x102),_0x5ddfd2);const _0x3de956=await this[_0x49a3cf(0x137)][_0x49a3cf(0x10c)](_0x5ddfd2);_0x39aed6[_0x49a3cf(0xf6)](0xc9)[_0x49a3cf(0x12e)]({'success':!![],'message':_0x49a3cf(0x13b),'result':_0x3de956});}catch(_0x403e8e){_0xd1e902(_0x403e8e);}},this[_0x2fe8ee(0x131)]=async(_0x1ea1ec,_0x4d7f92,_0x5e4f70)=>{const _0x569f50=_0x2fe8ee;try{const {id:_0x10cb51}=_0x1ea1ec[_0x569f50(0x11f)],_0x2ecf44=_0x1ea1ec[_0x569f50(0x110)];console['log'](_0x569f50(0x161)+_0x10cb51+_0x569f50(0x133),_0x2ecf44);const _0x52be18=await this['adminService'][_0x569f50(0x131)](_0x10cb51,_0x2ecf44);_0x4d7f92[_0x569f50(0x12e)]({'success':!![],'message':'Payout\x20updated\x20successfully','result':_0x52be18});}catch(_0x16b920){_0x5e4f70(_0x16b920);}},this[_0x2fe8ee(0x105)]=async(_0x2b72e8,_0x3b9f79,_0x94d213)=>{const _0x3e89b7=_0x2fe8ee;try{const {page:page=0x1,limit:limit=0x14,shopId:_0x38ef77,network:_0x1439c0,dateFrom:_0x325db9,dateTo:_0xca128f,search:_0x4eb796}=_0x2b72e8['query'],_0x249908={'page':Number(page),'limit':Number(limit),'shopId':_0x38ef77,'network':_0x1439c0,'dateFrom':_0x325db9,'dateTo':_0xca128f,'search':_0x4eb796},_0x5c7877=await this[_0x3e89b7(0x137)][_0x3e89b7(0x165)](_0x249908);_0x3b9f79[_0x3e89b7(0x12e)]({'success':!![],'payouts':_0x5c7877[_0x3e89b7(0x100)],'pagination':_0x5c7877['pagination']});}catch(_0x48aef6){_0x94d213(_0x48aef6);}},this[_0x2fe8ee(0x15a)]=async(_0x24c00a,_0x38327c,_0x5e5fa0)=>{const _0x30a36e=_0x2fe8ee;try{const {id:_0x2045c7}=_0x24c00a[_0x30a36e(0x11f)],_0x50a9f0=await this['adminService'][_0x30a36e(0x15a)](_0x2045c7);if(!_0x50a9f0)return _0x38327c[_0x30a36e(0xf6)](0x194)[_0x30a36e(0x12e)]({'success':![],'message':_0x30a36e(0x10f)});_0x38327c[_0x30a36e(0x12e)]({'success':!![],'result':_0x50a9f0});}catch(_0x4fef22){_0x5e5fa0(_0x4fef22);}},this[_0x2fe8ee(0x143)]=async(_0x50aa60,_0x3cc3a8,_0x2d4b97)=>{const _0x5c4f2c=_0x2fe8ee;try{const {id:_0x33b629}=_0x50aa60['params'];await this[_0x5c4f2c(0x137)]['deletePayout'](_0x33b629),_0x3cc3a8[_0x5c4f2c(0x12e)]({'success':!![],'message':_0x5c4f2c(0x118)});}catch(_0x180405){_0x2d4b97(_0x180405);}},this['getPayments']=async(_0x183347,_0x5b7969,_0x2c61a6)=>{const _0x37ed29=_0x2fe8ee;try{const {page:page=0x1,limit:limit=0x14,status:_0x4e0bd0,gateway:_0xb443d3,shopId:_0x1e6139,dateFrom:_0xfad492,dateTo:_0x42e3e3,search:_0x54cffd,currency:_0x1987c4,sortBy:_0x2e34be,sortOrder:_0x40db99}=_0x183347[_0x37ed29(0x15d)],_0x5405d4={'page':Number(page),'limit':Number(limit),'status':_0x4e0bd0,'gateway':_0xb443d3,'shopId':_0x1e6139,'dateFrom':_0xfad492,'dateTo':_0x42e3e3,'search':_0x54cffd,'currency':_0x1987c4,'sortBy':_0x2e34be,'sortOrder':_0x40db99},_0x51f330=await this[_0x37ed29(0x137)][_0x37ed29(0x134)](_0x5405d4);_0x5b7969[_0x37ed29(0x12e)]({'success':!![],'payments':_0x51f330[_0x37ed29(0x163)],'pagination':_0x51f330[_0x37ed29(0x16a)],'statistics':_0x51f330[_0x37ed29(0x139)]});}catch(_0x323393){_0x2c61a6(_0x323393);}},this['getPaymentById']=async(_0x2797f9,_0x43262c,_0x2236d7)=>{const _0x2088db=_0x2fe8ee;try{const {id:_0x552324}=_0x2797f9[_0x2088db(0x11f)],_0x5c95af=await this['adminService']['getPaymentById'](_0x552324);if(!_0x5c95af)return _0x43262c[_0x2088db(0xf6)](0x194)[_0x2088db(0x12e)]({'success':![],'message':'Payment\x20not\x20found'});_0x43262c[_0x2088db(0x12e)]({'success':!![],'result':_0x5c95af});}catch(_0x2e4935){_0x2236d7(_0x2e4935);}},this[_0x2fe8ee(0x146)]=async(_0x375158,_0x497cb8,_0x5c052b)=>{const _0x6a3b80=_0x2fe8ee;try{const {id:_0x45b693}=_0x375158[_0x6a3b80(0x11f)],{status:_0x132496,notes:_0x899440,chargebackAmount:_0x20193a}=_0x375158[_0x6a3b80(0x110)],_0x5e0cb2=await this['adminService']['getPaymentById'](_0x45b693);if(!_0x5e0cb2)return _0x497cb8[_0x6a3b80(0xf6)](0x194)[_0x6a3b80(0x12e)]({'success':![],'message':_0x6a3b80(0x144)});const _0x5f04b6=await this[_0x6a3b80(0x137)][_0x6a3b80(0x103)](_0x45b693,_0x132496,_0x899440,_0x20193a);if(_0x5e0cb2[_0x6a3b80(0xf6)]!==_0x132496&&_0x132496[_0x6a3b80(0xf5)]()===_0x6a3b80(0x12f)){console[_0x6a3b80(0xff)](_0x6a3b80(0x129)+_0x45b693+'\x20to\x20PAID,\x20updating\x20payment\x20link\x20counter');try{await this['paymentLinkService']['handleSuccessfulPayment'](_0x45b693),console[_0x6a3b80(0xff)](_0x6a3b80(0x159)+_0x45b693);}catch(_0x516ba4){console[_0x6a3b80(0x15f)](_0x6a3b80(0x10b),_0x516ba4);}}if(_0x5e0cb2['status']!==_0x132496){console[_0x6a3b80(0xff)]('ðŸ“±\x20Payment\x20'+_0x45b693+_0x6a3b80(0xf0)+_0x5e0cb2[_0x6a3b80(0xf6)]+_0x6a3b80(0xf7)+_0x132496+_0x6a3b80(0x147));try{let _0x1eee63;switch(_0x132496[_0x6a3b80(0xf5)]()){case _0x6a3b80(0x12f):_0x1eee63=_0x6a3b80(0x15b);break;case'PROCESSING':_0x1eee63=_0x6a3b80(0x113);break;case'FAILED':_0x1eee63='failed';break;case _0x6a3b80(0x162):_0x1eee63=_0x6a3b80(0x12b);break;case _0x6a3b80(0x11e):_0x1eee63=_0x6a3b80(0xef);break;case _0x6a3b80(0x116):_0x1eee63='chargeback';break;default:console[_0x6a3b80(0xff)](_0x6a3b80(0x164)+_0x132496);break;}if(_0x1eee63){const _0x2377b2={..._0x5f04b6,'shopId':_0x5e0cb2['shopId'],'gateway':_0x5e0cb2[_0x6a3b80(0x124)],'createdAt':_0x5e0cb2[_0x6a3b80(0x155)],'chargebackAmount':_0x20193a};await telegramBotService_1[_0x6a3b80(0x11a)][_0x6a3b80(0x114)](_0x5e0cb2[_0x6a3b80(0x132)],_0x2377b2,_0x1eee63),console[_0x6a3b80(0xff)]('âœ…\x20Telegram\x20notification\x20sent\x20for\x20status\x20change:\x20'+_0x5e0cb2[_0x6a3b80(0xf6)]+_0x6a3b80(0x151)+_0x132496);}}catch(_0x1fbf7c){console['error'](_0x6a3b80(0x117),_0x1fbf7c);}}_0x497cb8[_0x6a3b80(0x12e)]({'success':!![],'message':'Payment\x20updated\x20successfully','result':_0x5f04b6});}catch(_0x9deed0){_0x5c052b(_0x9deed0);}},this[_0x2fe8ee(0x13a)]=async(_0x4c83c4,_0x4be87e,_0x13f2ad)=>{const _0x4849c9=_0x2fe8ee;try{const {id:_0x1eb529}=_0x4c83c4['params'],_0x35fa66=_0x4c83c4[_0x4849c9(0x110)];console[_0x4849c9(0xff)](_0x4849c9(0x119)+_0x1eb529+':',_0x35fa66);const _0x3f109b=await this[_0x4849c9(0x137)][_0x4849c9(0x13a)](_0x1eb529,_0x35fa66);_0x4be87e['json']({'success':!![],'message':_0x4849c9(0x14e),'result':_0x3f109b});}catch(_0x157633){_0x13f2ad(_0x157633);}},this[_0x2fe8ee(0x111)]=async(_0x887c7,_0x532445,_0x95dd34)=>{const _0x5fec67=_0x2fe8ee;try{const {id:_0x2c0461}=_0x887c7['params'],_0x23bd34=_0x887c7[_0x5fec67(0x110)],_0x338175=await this['adminService'][_0x5fec67(0x111)](_0x2c0461,_0x23bd34);_0x532445[_0x5fec67(0x12e)]({'success':!![],'message':_0x5fec67(0x14d),'result':_0x338175});}catch(_0x1eb8ab){_0x95dd34(_0x1eb8ab);}},this[_0x2fe8ee(0x101)]=async(_0x45bd05,_0xc4dc36,_0x1b8f83)=>{const _0x29e454=_0x2fe8ee;try{const {id:_0x1afb5a}=_0x45bd05[_0x29e454(0x11f)],_0x3057ca=await this[_0x29e454(0x137)][_0x29e454(0x101)](_0x1afb5a);_0xc4dc36[_0x29e454(0x12e)]({'success':!![],'message':'User\x20suspended\x20successfully','result':_0x3057ca});}catch(_0x47ea28){_0x1b8f83(_0x47ea28);}},this[_0x2fe8ee(0xec)]=async(_0x263247,_0x22e95c,_0x2d1f18)=>{const _0x926bea=_0x2fe8ee;try{const {id:_0x207612}=_0x263247['params'],_0x2378ab=await this[_0x926bea(0x137)]['activateUser'](_0x207612);_0x22e95c[_0x926bea(0x12e)]({'success':!![],'message':_0x926bea(0x135),'result':_0x2378ab});}catch(_0x1716cc){_0x2d1f18(_0x1716cc);}},this[_0x2fe8ee(0x158)]=async(_0x3f8503,_0x2d88f6,_0x3be914)=>{const _0x591e75=_0x2fe8ee;try{const {page:page=0x1,limit:limit=0x14,status:_0xa78b93,search:_0x2a6014}=_0x3f8503[_0x591e75(0x15d)],_0x4c92f7={'page':Number(page),'limit':Number(limit),'status':_0xa78b93,'search':_0x2a6014},_0x89893e=await this['adminService'][_0x591e75(0x152)](_0x4c92f7);_0x2d88f6[_0x591e75(0x12e)]({'success':!![],'users':_0x89893e['users'],'pagination':_0x89893e['pagination']});}catch(_0x2df99d){_0x3be914(_0x2df99d);}},this[_0x2fe8ee(0x167)]=async(_0xb4d64e,_0x36f889,_0x2cb300)=>{const _0x20a105=_0x2fe8ee;try{const {id:_0x5cf091}=_0xb4d64e[_0x20a105(0x11f)],_0x4bf730=await this[_0x20a105(0x137)]['getUserById'](_0x5cf091);if(!_0x4bf730)return _0x36f889[_0x20a105(0xf6)](0x194)['json']({'success':![],'message':_0x20a105(0x13e)});_0x36f889['json']({'success':!![],'result':_0x4bf730});}catch(_0x3c97e8){_0x2cb300(_0x3c97e8);}},this[_0x2fe8ee(0x156)]=async(_0x3e1139,_0x7871d0,_0x56e01a)=>{const _0x252dfe=_0x2fe8ee;try{const _0x4feefa=_0x3e1139[_0x252dfe(0x110)],_0x4c9403=await this['adminService']['createUser'](_0x4feefa);_0x7871d0[_0x252dfe(0xf6)](0xc9)[_0x252dfe(0x12e)]({'success':!![],'message':_0x252dfe(0x115),'result':_0x4c9403});}catch(_0x222eff){_0x56e01a(_0x222eff);}},this['deleteUser']=async(_0x3aca9c,_0x3dd7bb,_0xc6c766)=>{const _0x3c6218=_0x2fe8ee;try{const {id:_0x1f1168}=_0x3aca9c['params'],{twoFactorToken:_0x32d3c7}=_0x3aca9c[_0x3c6218(0x110)];await this['adminService'][_0x3c6218(0x109)](_0x1f1168,_0x32d3c7),_0x3dd7bb[_0x3c6218(0x12e)]({'success':!![],'message':_0x3c6218(0x106)});}catch(_0x398de3){_0xc6c766(_0x398de3);}},this[_0x2fe8ee(0xf1)]=async(_0x4ce0ce,_0x13df61,_0x39346f)=>{const _0x9948ac=_0x2fe8ee;try{const {shopId:_0x39b439}=_0x4ce0ce[_0x9948ac(0x11f)],_0x31cc70=await this[_0x9948ac(0x137)][_0x9948ac(0xf1)](_0x39b439);_0x13df61[_0x9948ac(0x12e)]({'success':!![],'wallets':_0x31cc70});}catch(_0x21c6ef){_0x39346f(_0x21c6ef);}},this[_0x2fe8ee(0x14a)]=async(_0x4aeb9e,_0x1e96dd,_0x2667c3)=>{const _0x23d85b=_0x2fe8ee;try{const {shopId:_0xb888de}=_0x4aeb9e[_0x23d85b(0x11f)],_0x488ee4=await this[_0x23d85b(0x137)]['setup2FA'](_0xb888de);_0x1e96dd[_0x23d85b(0x12e)]({'success':!![],'result':_0x488ee4});}catch(_0x1817f0){_0x2667c3(_0x1817f0);}},this[_0x2fe8ee(0x13d)]=async(_0x48dc69,_0x2b4ad1,_0x23fd9f)=>{const _0x1f1199=_0x2fe8ee;try{const {shopId:_0x56c318}=_0x48dc69[_0x1f1199(0x11f)],{token:_0x3c04e9}=_0x48dc69[_0x1f1199(0x110)];if(!_0x3c04e9)return _0x2b4ad1[_0x1f1199(0xf6)](0x190)[_0x1f1199(0x12e)]({'success':![],'message':'Token\x20is\x20required'});const _0x16f88a=await this[_0x1f1199(0x137)][_0x1f1199(0x13d)](_0x56c318,_0x3c04e9);_0x2b4ad1['json']({'success':!![],'message':_0x1f1199(0x10a),'result':_0x16f88a});}catch(_0x1b4a6a){_0x23fd9f(_0x1b4a6a);}},this[_0x2fe8ee(0x13f)]=async(_0x191562,_0x55bf58,_0x50d0ec)=>{const _0x52231d=_0x2fe8ee;try{const {shopId:_0x44cab7}=_0x191562[_0x52231d(0x11f)];await this['adminService'][_0x52231d(0x13f)](_0x44cab7),_0x55bf58[_0x52231d(0x12e)]({'success':!![],'message':_0x52231d(0x11d)});}catch(_0x298bc8){_0x50d0ec(_0x298bc8);}},this['getProcessingPaymentsStats']=async(_0x906149,_0x2b7207,_0x47d6da)=>{const _0x4f0d4b=_0x2fe8ee;try{const _0x9f349=await paymentCleanupService_1[_0x4f0d4b(0xed)][_0x4f0d4b(0x14f)]();_0x2b7207[_0x4f0d4b(0x12e)]({'success':!![],'result':_0x9f349});}catch(_0xe086c3){_0x47d6da(_0xe086c3);}},this[_0x2fe8ee(0xfe)]=async(_0x36eebf,_0xd56dfc,_0xb40e3)=>{const _0x75ecf9=_0x2fe8ee;try{console['log']('ðŸ§¹\x20Manual\x20PROCESSING\x20payment\x20cleanup\x20initiated\x20by\x20admin:\x20'+_0x36eebf[_0x75ecf9(0x121)]?.['username']+'\x20('+_0x36eebf['user']?.['id']+')');const _0x5d7b45=await paymentCleanupService_1[_0x75ecf9(0xed)][_0x75ecf9(0xfd)]();_0xd56dfc['json']({'success':!![],'message':_0x75ecf9(0x12a),'result':{'processed':_0x5d7b45[_0x75ecf9(0xf3)],'failed':_0x5d7b45['failed'],'errors':_0x5d7b45[_0x75ecf9(0x148)]}});}catch(_0x36f94c){_0xb40e3(_0x36f94c);}},this[_0x2fe8ee(0xf2)]=async(_0x17a82a,_0x52be98,_0x482a7e)=>{const _0x2d6003=_0x2fe8ee;try{console[_0x2d6003(0xff)](_0x2d6003(0xea)+_0x17a82a[_0x2d6003(0x121)]?.[_0x2d6003(0x14b)]+'\x20('+_0x17a82a[_0x2d6003(0x121)]?.['id']+')');const _0xeaed04=await paymentCleanupService_1[_0x2d6003(0xed)][_0x2d6003(0xf2)]();_0x52be98[_0x2d6003(0x12e)]({'success':!![],'message':_0x2d6003(0xfb),'result':{'processed':_0xeaed04[_0x2d6003(0xf3)],'failed':_0xeaed04['failed'],'errors':_0xeaed04[_0x2d6003(0x148)]}});}catch(_0x525e28){_0x482a7e(_0x525e28);}},this[_0x2fe8ee(0x136)]=async(_0x4b289e,_0x265088,_0x24cebe)=>{const _0x124dcf=_0x2fe8ee;try{console['log'](_0x124dcf(0x153)+_0x4b289e[_0x124dcf(0x121)]?.[_0x124dcf(0x14b)]+'\x20('+_0x4b289e[_0x124dcf(0x121)]?.['id']+')');const _0x303611=await paymentCleanupService_1[_0x124dcf(0xed)][_0x124dcf(0x14f)](),_0x115899=await paymentCleanupService_1['paymentCleanupService']['cleanupStaleProcessingPayments'](),_0x490620=await paymentCleanupService_1[_0x124dcf(0xed)][_0x124dcf(0xf2)](),_0x48b81d=await paymentCleanupService_1['paymentCleanupService'][_0x124dcf(0x14f)]();_0x265088[_0x124dcf(0x12e)]({'success':!![],'message':_0x124dcf(0x15e),'result':{'cleanup':{'processing':{'processed':_0x115899[_0x124dcf(0xf3)],'failed':_0x115899[_0x124dcf(0x12c)],'errors':_0x115899[_0x124dcf(0x148)]},'pending':{'processed':_0x490620[_0x124dcf(0xf3)],'failed':_0x490620['failed'],'errors':_0x490620[_0x124dcf(0x148)]},'total':{'processed':_0x115899[_0x124dcf(0xf3)]+_0x490620[_0x124dcf(0xf3)],'failed':_0x115899[_0x124dcf(0x12c)]+_0x490620['failed'],'errors':[..._0x115899[_0x124dcf(0x148)],..._0x490620['errors']]}},'statistics':{'before':_0x303611,'after':_0x48b81d,'reduced':_0x303611[_0x124dcf(0x14c)]-_0x48b81d[_0x124dcf(0x14c)]}}});}catch(_0x3a9fd7){_0x24cebe(_0x3a9fd7);}},this[_0x2fe8ee(0xfc)]=async(_0x4eed7a,_0x5e768b,_0x4c9529)=>{const _0x5ead03=_0x2fe8ee;try{const _0x28c49b=await paymentCleanupService_1['paymentCleanupService']['expireSinglePaymentLinks']();_0x5e768b[_0x5ead03(0x12e)]({'success':!![],'message':'Payment\x20link\x20expiration\x20check\x20completed\x20successfully','result':{'expired':_0x28c49b['expired'],'errors':_0x28c49b['errors']}});}catch(_0x18172c){_0x4c9529(_0x18172c);}},this[_0x2fe8ee(0x168)]=async(_0xce1c6f,_0x556d74,_0x20e20b)=>{const _0x376ad0=_0x2fe8ee;try{const {currentPassword:_0x9db28d,newPassword:_0xf5a373,confirmNewPassword:_0x1da9ed,twoFactorToken:_0x4e4d36}=_0xce1c6f[_0x376ad0(0x110)];await this[_0x376ad0(0x137)]['changeAdminPassword'](_0x9db28d,_0xf5a373,_0x1da9ed,_0x4e4d36),_0x556d74[_0x376ad0(0x12e)]({'success':!![],'message':'Admin\x20password\x20changed\x20successfully'});}catch(_0x1b87fd){_0x20e20b(_0x1b87fd);}},this[_0x2fe8ee(0x13c)]=async(_0x8149fe,_0x192c18,_0x8f4fe9)=>{const _0x20b11a=_0x2fe8ee;try{const _0x2aed5c=await this[_0x20b11a(0x137)]['get2FASettings']();_0x192c18[_0x20b11a(0x12e)]({'success':!![],'result':_0x2aed5c});}catch(_0x65b442){_0x8f4fe9(_0x65b442);}},this[_0x2fe8ee(0x16b)]=async(_0x5f1106,_0x51eb71,_0x419753)=>{const _0x5ee5b1=_0x2fe8ee;try{const _0x3e234f=await this[_0x5ee5b1(0x137)][_0x5ee5b1(0x16b)]();_0x51eb71['json']({'success':!![],'result':_0x3e234f});}catch(_0x51ab90){_0x419753(_0x51ab90);}},this['enableAdmin2FA']=async(_0x300dc7,_0x5c1e8c,_0x4655ee)=>{const _0x32299d=_0x2fe8ee;try{const {token:_0x42a9ad}=_0x300dc7[_0x32299d(0x110)],_0x170fd6=await this[_0x32299d(0x137)][_0x32299d(0xf4)](_0x42a9ad);_0x5c1e8c[_0x32299d(0x12e)]({'success':!![],'result':_0x170fd6});}catch(_0xae32e6){_0x4655ee(_0xae32e6);}},this[_0x2fe8ee(0x150)]=async(_0x23dd5f,_0x10b955,_0xa2c652)=>{const _0x207502=_0x2fe8ee;try{await this['adminService']['disableAdmin2FA'](),_0x10b955[_0x207502(0x12e)]({'success':!![],'message':_0x207502(0x107)});}catch(_0x35caf1){_0xa2c652(_0x35caf1);}},this[_0x2fe8ee(0x137)]=new adminService_1[(_0x2fe8ee(0x142))](),this[_0x2fe8ee(0x125)]=new paymentLinkService_1[(_0x2fe8ee(0x130))]();}}function a3_0x12b1(_0x3c85e4,_0x2333fd){_0x3c85e4=_0x3c85e4-0xea;const _0x2c12be=a3_0x2c12();let _0x12b1ab=_0x2c12be[_0x3c85e4];return _0x12b1ab;}exports[a3_0x7652e2(0x112)]=AdminController;