'use strict';const a3_0x48213d=a3_0x2e46;(function(_0x12d46d,_0x2e48b4){const _0x2d69d5=a3_0x2e46,_0x387b48=_0x12d46d();while(!![]){try{const _0x56bbeb=-parseInt(_0x2d69d5(0x8d))/0x1+parseInt(_0x2d69d5(0x9d))/0x2+parseInt(_0x2d69d5(0xe4))/0x3+parseInt(_0x2d69d5(0x92))/0x4*(-parseInt(_0x2d69d5(0x93))/0x5)+parseInt(_0x2d69d5(0xdc))/0x6*(-parseInt(_0x2d69d5(0xd0))/0x7)+-parseInt(_0x2d69d5(0x83))/0x8*(-parseInt(_0x2d69d5(0xea))/0x9)+parseInt(_0x2d69d5(0x90))/0xa*(parseInt(_0x2d69d5(0x74))/0xb);if(_0x56bbeb===_0x2e48b4)break;else _0x387b48['push'](_0x387b48['shift']());}catch(_0x1ee8f3){_0x387b48['push'](_0x387b48['shift']());}}}(a3_0x105a,0x3d960));Object[a3_0x48213d(0x6a)](exports,'__esModule',{'value':!![]}),exports['AdminController']=void 0x0;const adminService_1=require(a3_0x48213d(0xd5)),paymentLinkService_1=require('../services/paymentLinkService'),paymentCleanupService_1=require(a3_0x48213d(0xab)),telegramBotService_1=require('../services/telegramBotService');function a3_0x2e46(_0xdfece0,_0x34814e){_0xdfece0=_0xdfece0-0x69;const _0x105ac6=a3_0x105a();let _0x2e4699=_0x105ac6[_0xdfece0];return _0x2e4699;}class AdminController{constructor(){const _0x4dd309=a3_0x48213d;this[_0x4dd309(0x76)]=async(_0x7c9c29,_0x2f86bc,_0xbf9c4d)=>{const _0x6739d6=_0x4dd309;try{const _0x5d7144=_0x7c9c29[_0x6739d6(0xb7)];_0x2f86bc[_0x6739d6(0xae)]({'success':!![],'message':_0x6739d6(0xce),'user':{'id':_0x5d7144?.['id'],'username':_0x5d7144?.['username'],'role':_0x5d7144?.[_0x6739d6(0x80)]}});}catch(_0x50183d){_0xbf9c4d(_0x50183d);}},this[_0x4dd309(0xb8)]=async(_0x31639c,_0x352941,_0x49f981)=>{const _0x7fbaf0=_0x4dd309;try{const {period:period=_0x7fbaf0(0xc7),currentDate:_0x45cf5e}=_0x31639c[_0x7fbaf0(0x96)],_0x5b01a7=await this[_0x7fbaf0(0x7f)]['getSystemStatistics'](period,_0x45cf5e);_0x352941['json']({'success':!![],'result':_0x5b01a7});}catch(_0x51edf1){_0x49f981(_0x51edf1);}},this[_0x4dd309(0xdb)]=async(_0x40244c,_0x283acd,_0x77427f)=>{const _0x49d2d7=_0x4dd309;try{const {shopId:_0x5189db,period:period='month',dateFrom:_0x343f6d,dateTo:_0x43a58a}=_0x40244c['query'],_0x22f0fb={'shopId':_0x5189db,'period':period,'dateFrom':_0x343f6d,'dateTo':_0x43a58a};console[_0x49d2d7(0xc8)](_0x49d2d7(0x9b),_0x22f0fb);const _0x25e914=await this['adminService']['getMerchantStatistics'](_0x22f0fb);_0x283acd[_0x49d2d7(0xae)]({'success':!![],'result':_0x25e914});}catch(_0x3821c5){_0x77427f(_0x3821c5);}},this[_0x4dd309(0xbd)]=async(_0x4809bd,_0xe14696,_0x3b8209)=>{const _0xb972d8=_0x4dd309;try{const {periodFrom:_0x31d541,periodTo:_0x1c43ae,gateway:_0x104031}=_0x4809bd[_0xb972d8(0x96)];if(!_0x31d541||!_0x1c43ae||!_0x104031)return _0xe14696[_0xb972d8(0xb5)](0x190)[_0xb972d8(0xae)]({'success':![],'message':'periodFrom,\x20periodTo,\x20and\x20gateway\x20are\x20required'});console['log'](_0xb972d8(0x8b),{'periodFrom':_0x31d541,'periodTo':_0x1c43ae,'gateway':_0x104031});const _0xb979c=await this[_0xb972d8(0x7f)][_0xb972d8(0xbd)]({'periodFrom':_0x31d541,'periodTo':_0x1c43ae,'gateway':_0x104031});_0xe14696[_0xb972d8(0xae)]({'success':!![],'reports':_0xb979c});}catch(_0x53f21b){_0x3b8209(_0x53f21b);}},this['getPayoutStats']=async(_0x346f3a,_0x3bbfbe,_0x2932c2)=>{const _0x45b18b=_0x4dd309;try{const _0x37b3ea=await this['adminService'][_0x45b18b(0xa4)]();_0x3bbfbe['json']({'success':!![],'result':_0x37b3ea});}catch(_0x405872){_0x2932c2(_0x405872);}},this[_0x4dd309(0xc5)]=async(_0x42ae03,_0x2b5e9f,_0x2e302c)=>{const _0xf8a288=_0x4dd309;try{const {page:page=0x1,limit:limit=0x14,minAmount:_0x4f37b4,search:_0x2c7a80}=_0x42ae03[_0xf8a288(0x96)],_0xe6fde5={'page':Number(page),'limit':Number(limit),'minAmount':_0x4f37b4?Number(_0x4f37b4):undefined,'search':_0x2c7a80},_0x163718=await this[_0xf8a288(0x7f)][_0xf8a288(0xc5)](_0xe6fde5);_0x2b5e9f['json']({'success':!![],'merchants':_0x163718[_0xf8a288(0xd8)],'pagination':_0x163718[_0xf8a288(0x8e)],'summary':_0x163718[_0xf8a288(0xbb)]});}catch(_0x2ca3e1){_0x2e302c(_0x2ca3e1);}},this['getMerchantsSelection']=async(_0x24ac48,_0x3c938a,_0xde1918)=>{const _0x376d40=_0x4dd309;try{const _0x598951=_0x24ac48[_0x376d40(0x96)][_0x376d40(0x7a)]===_0x376d40(0x87),_0x356dc8=await this[_0x376d40(0x7f)][_0x376d40(0xb9)](_0x598951);_0x3c938a['json']({'success':!![],'result':_0x356dc8});}catch(_0x220c01){_0xde1918(_0x220c01);}},this['createPayout']=async(_0x46900c,_0x215c90,_0x5df30a)=>{const _0x7a53b5=_0x4dd309;try{const _0x428211=_0x46900c[_0x7a53b5(0xa9)];console['log'](_0x7a53b5(0xe7),_0x428211);const _0x5c9695=await this[_0x7a53b5(0x7f)][_0x7a53b5(0xdd)](_0x428211);_0x215c90[_0x7a53b5(0xb5)](0xc9)['json']({'success':!![],'message':_0x7a53b5(0xcb),'result':_0x5c9695});}catch(_0x4d362a){_0x5df30a(_0x4d362a);}},this['updatePayout']=async(_0x57843d,_0x5ee279,_0x43a0de)=>{const _0x511cbf=_0x4dd309;try{const {id:_0x5d9510}=_0x57843d[_0x511cbf(0xa3)],_0x439e17=_0x57843d['body'];console[_0x511cbf(0xc8)]('ðŸŽ¯\x20[CONTROLLER]\x20Updating\x20payout\x20'+_0x5d9510+_0x511cbf(0xcf),_0x439e17);const _0x188de0=await this['adminService'][_0x511cbf(0xa8)](_0x5d9510,_0x439e17);_0x5ee279[_0x511cbf(0xae)]({'success':!![],'message':_0x511cbf(0xc4),'result':_0x188de0});}catch(_0x2e2cdf){_0x43a0de(_0x2e2cdf);}},this[_0x4dd309(0x9e)]=async(_0x34e115,_0x54abcb,_0xc02d02)=>{const _0x14ac58=_0x4dd309;try{const {page:page=0x1,limit:limit=0x14,shopId:_0x410598,network:_0x1d5414,dateFrom:_0x3cb726,dateTo:_0x5630a2,search:_0x41243a}=_0x34e115['query'],_0x31170b={'page':Number(page),'limit':Number(limit),'shopId':_0x410598,'network':_0x1d5414,'dateFrom':_0x3cb726,'dateTo':_0x5630a2,'search':_0x41243a},_0x1af1e8=await this[_0x14ac58(0x7f)][_0x14ac58(0x6e)](_0x31170b);_0x54abcb['json']({'success':!![],'payouts':_0x1af1e8[_0x14ac58(0xd6)],'pagination':_0x1af1e8['pagination']});}catch(_0x464a25){_0xc02d02(_0x464a25);}},this['getPayoutById']=async(_0x1efaa0,_0x5b9624,_0x1d9e4d)=>{const _0x184b13=_0x4dd309;try{const {id:_0x1b4e7d}=_0x1efaa0[_0x184b13(0xa3)],_0x3bcb8d=await this[_0x184b13(0x7f)]['getPayoutById'](_0x1b4e7d);if(!_0x3bcb8d)return _0x5b9624[_0x184b13(0xb5)](0x194)['json']({'success':![],'message':'Payout\x20not\x20found'});_0x5b9624['json']({'success':!![],'result':_0x3bcb8d});}catch(_0x2a676d){_0x1d9e4d(_0x2a676d);}},this['deletePayout']=async(_0x585796,_0x57d110,_0x3f0da3)=>{const _0x283d2f=_0x4dd309;try{const {id:_0x4af483}=_0x585796[_0x283d2f(0xa3)];await this['adminService'][_0x283d2f(0x91)](_0x4af483),_0x57d110['json']({'success':!![],'message':_0x283d2f(0xad)});}catch(_0x5d5b23){_0x3f0da3(_0x5d5b23);}},this[_0x4dd309(0x8f)]=async(_0x322481,_0x14990a,_0x257162)=>{const _0x2fb0c6=_0x4dd309;try{const {page:page=0x1,limit:limit=0x14,status:_0x461dd7,gateway:_0x44b099,shopId:_0x15984e,dateFrom:_0x5b1345,dateTo:_0x44d252,search:_0x2923d7,currency:_0x29d473,sortBy:_0x1b8a13,sortOrder:_0x5a5daa}=_0x322481['query'],_0x147448={'page':Number(page),'limit':Number(limit),'status':_0x461dd7,'gateway':_0x44b099,'shopId':_0x15984e,'dateFrom':_0x5b1345,'dateTo':_0x44d252,'search':_0x2923d7,'currency':_0x29d473,'sortBy':_0x1b8a13,'sortOrder':_0x5a5daa},_0x20b441=await this['adminService']['getAllPayments'](_0x147448);_0x14990a[_0x2fb0c6(0xae)]({'success':!![],'payments':_0x20b441['payments'],'pagination':_0x20b441[_0x2fb0c6(0x8e)],'statistics':_0x20b441[_0x2fb0c6(0xbf)]});}catch(_0x47e75a){_0x257162(_0x47e75a);}},this[_0x4dd309(0xd2)]=async(_0x55eb05,_0x351dde,_0x34a636)=>{const _0xbcd68a=_0x4dd309;try{const {id:_0x1b8dcc}=_0x55eb05['params'],_0x52a169=await this['adminService']['getPaymentById'](_0x1b8dcc);if(!_0x52a169)return _0x351dde['status'](0x194)[_0xbcd68a(0xae)]({'success':![],'message':_0xbcd68a(0xb2)});_0x351dde[_0xbcd68a(0xae)]({'success':!![],'result':_0x52a169});}catch(_0x2532b3){_0x34a636(_0x2532b3);}},this[_0x4dd309(0x98)]=async(_0x58789f,_0x585be1,_0x3d7a1b)=>{const _0x5d3cc8=_0x4dd309;try{const {id:_0x439171}=_0x58789f['params'],{status:_0x245042,notes:_0x11b09c,chargebackAmount:_0x5f5976}=_0x58789f[_0x5d3cc8(0xa9)],_0x408020=await this[_0x5d3cc8(0x7f)][_0x5d3cc8(0xd2)](_0x439171);if(!_0x408020)return _0x585be1[_0x5d3cc8(0xb5)](0x194)[_0x5d3cc8(0xae)]({'success':![],'message':'Payment\x20not\x20found'});const _0x1fa13f=await this['adminService']['updatePaymentStatus'](_0x439171,_0x245042,_0x11b09c,_0x5f5976);if(_0x408020[_0x5d3cc8(0xb5)]!==_0x245042&&_0x245042[_0x5d3cc8(0xe1)]()===_0x5d3cc8(0x88)){console[_0x5d3cc8(0xc8)]('ðŸ“ˆ\x20Admin\x20changed\x20payment\x20'+_0x439171+_0x5d3cc8(0xe6));try{await this['paymentLinkService'][_0x5d3cc8(0xd4)](_0x439171),console[_0x5d3cc8(0xc8)](_0x5d3cc8(0x6f)+_0x439171);}catch(_0x22a7fb){console[_0x5d3cc8(0x9c)](_0x5d3cc8(0x7e),_0x22a7fb);}}if(_0x408020['status']!==_0x245042){console['log'](_0x5d3cc8(0x95)+_0x439171+_0x5d3cc8(0xaf)+_0x408020[_0x5d3cc8(0xb5)]+_0x5d3cc8(0xcc)+_0x245042+_0x5d3cc8(0xb1));try{let _0x524c8d;switch(_0x245042[_0x5d3cc8(0xe1)]()){case'PAID':_0x524c8d=_0x5d3cc8(0x94);break;case'PROCESSING':_0x524c8d=_0x5d3cc8(0x84);break;case _0x5d3cc8(0x7d):_0x524c8d=_0x5d3cc8(0xb6);break;case'EXPIRED':_0x524c8d='expired';break;case _0x5d3cc8(0xa0):_0x524c8d='refund';break;case _0x5d3cc8(0xa7):_0x524c8d=_0x5d3cc8(0xec);break;default:console[_0x5d3cc8(0xc8)](_0x5d3cc8(0x9f)+_0x245042);break;}if(_0x524c8d){const _0x61d6b7={..._0x1fa13f,'shopId':_0x408020[_0x5d3cc8(0xeb)],'gateway':_0x408020['gateway'],'createdAt':_0x408020['createdAt'],'chargebackAmount':_0x5f5976};await telegramBotService_1['telegramBotService'][_0x5d3cc8(0x79)](_0x408020[_0x5d3cc8(0xeb)],_0x61d6b7,_0x524c8d),console[_0x5d3cc8(0xc8)](_0x5d3cc8(0x82)+_0x408020[_0x5d3cc8(0xb5)]+'\x20->\x20'+_0x245042);}}catch(_0xff42ed){console['error'](_0x5d3cc8(0xa2),_0xff42ed);}}_0x585be1[_0x5d3cc8(0xae)]({'success':!![],'message':'Payment\x20updated\x20successfully','result':_0x1fa13f});}catch(_0x141ad9){_0x3d7a1b(_0x141ad9);}},this[_0x4dd309(0xe5)]=async(_0x1d8941,_0x5d0dbc,_0x29a111)=>{const _0x2297df=_0x4dd309;try{const {id:_0x28e006}=_0x1d8941[_0x2297df(0xa3)],_0x2a6e94=_0x1d8941['body'];console[_0x2297df(0xc8)](_0x2297df(0xc1)+_0x28e006+':',_0x2a6e94);const _0x1ca665=await this[_0x2297df(0x7f)]['updateCustomerData'](_0x28e006,_0x2a6e94);_0x5d0dbc[_0x2297df(0xae)]({'success':!![],'message':_0x2297df(0xe0),'result':_0x1ca665});}catch(_0xe66cb1){_0x29a111(_0xe66cb1);}},this[_0x4dd309(0x73)]=async(_0xc736c2,_0x44bddb,_0x2cdf8c)=>{const _0x597318=_0x4dd309;try{const {id:_0xde73d0}=_0xc736c2[_0x597318(0xa3)],_0x5ee8fb=_0xc736c2[_0x597318(0xa9)],_0x244231=await this['adminService']['updateUser'](_0xde73d0,_0x5ee8fb);_0x44bddb[_0x597318(0xae)]({'success':!![],'message':_0x597318(0x6d),'result':_0x244231});}catch(_0x29314c){_0x2cdf8c(_0x29314c);}},this['suspendUser']=async(_0x370949,_0x424ce4,_0x29f9b5)=>{const _0x58fd9c=_0x4dd309;try{const {id:_0x5606c5}=_0x370949[_0x58fd9c(0xa3)],_0x2872be=await this['adminService']['suspendUser'](_0x5606c5);_0x424ce4[_0x58fd9c(0xae)]({'success':!![],'message':_0x58fd9c(0x9a),'result':_0x2872be});}catch(_0x62de38){_0x29f9b5(_0x62de38);}},this[_0x4dd309(0x6b)]=async(_0x475c9f,_0x3361ed,_0x3c3427)=>{const _0x5ea749=_0x4dd309;try{const {id:_0x3e12e3}=_0x475c9f[_0x5ea749(0xa3)],_0x888885=await this[_0x5ea749(0x7f)]['activateUser'](_0x3e12e3);_0x3361ed[_0x5ea749(0xae)]({'success':!![],'message':_0x5ea749(0x89),'result':_0x888885});}catch(_0x4466bf){_0x3c3427(_0x4466bf);}},this[_0x4dd309(0xaa)]=async(_0x143237,_0x3f7f27,_0x3bac9d)=>{const _0x5c784c=_0x4dd309;try{const {page:page=0x1,limit:limit=0x14,status:_0x29626e,search:_0x58963b}=_0x143237[_0x5c784c(0x96)],_0x43c7fa={'page':Number(page),'limit':Number(limit),'status':_0x29626e,'search':_0x58963b},_0x2c68ba=await this['adminService'][_0x5c784c(0x6c)](_0x43c7fa);_0x3f7f27['json']({'success':!![],'users':_0x2c68ba[_0x5c784c(0x86)],'pagination':_0x2c68ba['pagination']});}catch(_0x2566d2){_0x3bac9d(_0x2566d2);}},this[_0x4dd309(0xe9)]=async(_0xacc64d,_0x4c1349,_0x81751a)=>{const _0x47c42=_0x4dd309;try{const {id:_0x51175b}=_0xacc64d['params'],_0xd2025a=await this[_0x47c42(0x7f)][_0x47c42(0xe9)](_0x51175b);if(!_0xd2025a)return _0x4c1349[_0x47c42(0xb5)](0x194)['json']({'success':![],'message':_0x47c42(0xa5)});_0x4c1349['json']({'success':!![],'result':_0xd2025a});}catch(_0x5c38fb){_0x81751a(_0x5c38fb);}},this[_0x4dd309(0xbc)]=async(_0x453033,_0x550df9,_0x3054fa)=>{const _0x17534d=_0x4dd309;try{const _0x896734=_0x453033['body'],_0x20cdf7=await this[_0x17534d(0x7f)][_0x17534d(0xbc)](_0x896734);_0x550df9[_0x17534d(0xb5)](0xc9)[_0x17534d(0xae)]({'success':!![],'message':_0x17534d(0xca),'result':_0x20cdf7});}catch(_0x41be83){_0x3054fa(_0x41be83);}},this['deleteUser']=async(_0x2b30e1,_0x5f10df,_0x2e38b5)=>{const _0x390cda=_0x4dd309;try{const {id:_0x1347c9}=_0x2b30e1[_0x390cda(0xa3)],{twoFactorToken:_0x78cee4}=_0x2b30e1[_0x390cda(0xa9)];await this[_0x390cda(0x7f)][_0x390cda(0x7b)](_0x1347c9,_0x78cee4),_0x5f10df['json']({'success':!![],'message':_0x390cda(0xb0)});}catch(_0x500e76){_0x2e38b5(_0x500e76);}},this[_0x4dd309(0xda)]=async(_0x3301a0,_0x29a44f,_0x4e739e)=>{const _0xc3cd64=_0x4dd309;try{const {shopId:_0x2a602b}=_0x3301a0[_0xc3cd64(0xa3)],_0x4387af=await this[_0xc3cd64(0x7f)][_0xc3cd64(0xda)](_0x2a602b);_0x29a44f[_0xc3cd64(0xae)]({'success':!![],'wallets':_0x4387af});}catch(_0x4aa5e7){_0x4e739e(_0x4aa5e7);}},this[_0x4dd309(0xd9)]=async(_0x232b3f,_0x828136,_0x94e7dd)=>{const _0x48fc97=_0x4dd309;try{const {shopId:_0x25648d}=_0x232b3f[_0x48fc97(0xa3)],_0x495c8e=await this[_0x48fc97(0x7f)][_0x48fc97(0xd9)](_0x25648d);_0x828136[_0x48fc97(0xae)]({'success':!![],'result':_0x495c8e});}catch(_0x5a1b42){_0x94e7dd(_0x5a1b42);}},this[_0x4dd309(0xe2)]=async(_0x4a09f2,_0xf9785b,_0x58f74c)=>{const _0x28f16d=_0x4dd309;try{const {shopId:_0x1e42ed}=_0x4a09f2['params'],{token:_0x5d94e6}=_0x4a09f2[_0x28f16d(0xa9)];if(!_0x5d94e6)return _0xf9785b[_0x28f16d(0xb5)](0x190)[_0x28f16d(0xae)]({'success':![],'message':_0x28f16d(0xbe)});const _0x483d98=await this[_0x28f16d(0x7f)]['enable2FA'](_0x1e42ed,_0x5d94e6);_0xf9785b['json']({'success':!![],'message':_0x28f16d(0xcd),'result':_0x483d98});}catch(_0x1992a3){_0x58f74c(_0x1992a3);}},this[_0x4dd309(0x7c)]=async(_0x2bacb0,_0x2acc65,_0x54647b)=>{const _0x27fd2e=_0x4dd309;try{const {shopId:_0x3df558}=_0x2bacb0[_0x27fd2e(0xa3)];await this[_0x27fd2e(0x7f)][_0x27fd2e(0x7c)](_0x3df558),_0x2acc65[_0x27fd2e(0xae)]({'success':!![],'message':_0x27fd2e(0xa6)});}catch(_0x348e55){_0x54647b(_0x348e55);}},this[_0x4dd309(0xc6)]=async(_0x468715,_0x5f5a77,_0x382479)=>{const _0x22cc7c=_0x4dd309;try{const _0x578a33=await paymentCleanupService_1[_0x22cc7c(0x99)][_0x22cc7c(0xc6)]();_0x5f5a77[_0x22cc7c(0xae)]({'success':!![],'result':_0x578a33});}catch(_0x50c33d){_0x382479(_0x50c33d);}},this['cleanupStalePayments']=async(_0x1721e4,_0x536bf2,_0x37c02a)=>{const _0x26b28f=_0x4dd309;try{console[_0x26b28f(0xc8)](_0x26b28f(0xd3)+_0x1721e4[_0x26b28f(0xb7)]?.[_0x26b28f(0x77)]+'\x20('+_0x1721e4[_0x26b28f(0xb7)]?.['id']+')');const _0x4165da=await paymentCleanupService_1[_0x26b28f(0x99)][_0x26b28f(0x85)]();_0x536bf2[_0x26b28f(0xae)]({'success':!![],'message':'PROCESSING\x20payment\x20cleanup\x20completed\x20successfully','result':{'processed':_0x4165da[_0x26b28f(0xc2)],'failed':_0x4165da[_0x26b28f(0xb6)],'errors':_0x4165da[_0x26b28f(0xe3)]}});}catch(_0x252b7f){_0x37c02a(_0x252b7f);}},this[_0x4dd309(0x69)]=async(_0x345dd5,_0x1ee261,_0x305769)=>{const _0x42657e=_0x4dd309;try{console[_0x42657e(0xc8)](_0x42657e(0xe8)+_0x345dd5['user']?.['username']+'\x20('+_0x345dd5['user']?.['id']+')');const _0x311fb6=await paymentCleanupService_1[_0x42657e(0x99)][_0x42657e(0x69)]();_0x1ee261['json']({'success':!![],'message':_0x42657e(0x75),'result':{'processed':_0x311fb6[_0x42657e(0xc2)],'failed':_0x311fb6['failed'],'errors':_0x311fb6[_0x42657e(0xe3)]}});}catch(_0x5be597){_0x305769(_0x5be597);}},this[_0x4dd309(0x72)]=async(_0x4c2bdd,_0xa14f91,_0x4894a3)=>{const _0x5cdd44=_0x4dd309;try{console[_0x5cdd44(0xc8)]('ðŸ“Š\x20Manual\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)\x20with\x20report\x20initiated\x20by\x20admin:\x20'+_0x4c2bdd[_0x5cdd44(0xb7)]?.[_0x5cdd44(0x77)]+'\x20('+_0x4c2bdd[_0x5cdd44(0xb7)]?.['id']+')');const _0x34faab=await paymentCleanupService_1[_0x5cdd44(0x99)][_0x5cdd44(0xc6)](),_0x41430e=await paymentCleanupService_1[_0x5cdd44(0x99)]['cleanupStaleProcessingPayments'](),_0x2f71a9=await paymentCleanupService_1[_0x5cdd44(0x99)][_0x5cdd44(0x69)](),_0x4ece8e=await paymentCleanupService_1['paymentCleanupService'][_0x5cdd44(0xc6)]();_0xa14f91[_0x5cdd44(0xae)]({'success':!![],'message':_0x5cdd44(0xc3),'result':{'cleanup':{'processing':{'processed':_0x41430e['processed'],'failed':_0x41430e['failed'],'errors':_0x41430e[_0x5cdd44(0xe3)]},'pending':{'processed':_0x2f71a9['processed'],'failed':_0x2f71a9['failed'],'errors':_0x2f71a9[_0x5cdd44(0xe3)]},'total':{'processed':_0x41430e['processed']+_0x2f71a9[_0x5cdd44(0xc2)],'failed':_0x41430e[_0x5cdd44(0xb6)]+_0x2f71a9['failed'],'errors':[..._0x41430e[_0x5cdd44(0xe3)],..._0x2f71a9[_0x5cdd44(0xe3)]]}},'statistics':{'before':_0x34faab,'after':_0x4ece8e,'reduced':_0x34faab['total']-_0x4ece8e[_0x5cdd44(0xac)]}}});}catch(_0x39f403){_0x4894a3(_0x39f403);}},this[_0x4dd309(0xc0)]=async(_0x50b6cf,_0x2730ad,_0x559b43)=>{const _0xd23594=_0x4dd309;try{const _0x1db758=await paymentCleanupService_1[_0xd23594(0x99)][_0xd23594(0xdf)]();_0x2730ad['json']({'success':!![],'message':_0xd23594(0x71),'result':{'expired':_0x1db758['expired'],'errors':_0x1db758[_0xd23594(0xe3)]}});}catch(_0x562a2c){_0x559b43(_0x562a2c);}},this[_0x4dd309(0xb4)]=async(_0x3f3e84,_0x1ecda5,_0x2ca5c5)=>{const _0x313712=_0x4dd309;try{const {currentPassword:_0x29b0ac,newPassword:_0x2a79fe,confirmNewPassword:_0x58bfe9,twoFactorToken:_0x3858c7}=_0x3f3e84['body'];await this[_0x313712(0x7f)][_0x313712(0xb4)](_0x29b0ac,_0x2a79fe,_0x58bfe9,_0x3858c7),_0x1ecda5[_0x313712(0xae)]({'success':!![],'message':_0x313712(0x78)});}catch(_0x5b8afd){_0x2ca5c5(_0x5b8afd);}},this[_0x4dd309(0x8c)]=async(_0x1121d9,_0x2bab2f,_0x20a97d)=>{const _0xc4647b=_0x4dd309;try{const _0x30a6d6=await this[_0xc4647b(0x7f)]['get2FASettings']();_0x2bab2f[_0xc4647b(0xae)]({'success':!![],'result':_0x30a6d6});}catch(_0x3a23cd){_0x20a97d(_0x3a23cd);}},this['setupAdmin2FA']=async(_0x2fdde0,_0x531e15,_0x5c8539)=>{const _0x21b63b=_0x4dd309;try{const _0x30c42d=await this[_0x21b63b(0x7f)][_0x21b63b(0xde)]();_0x531e15[_0x21b63b(0xae)]({'success':!![],'result':_0x30c42d});}catch(_0x44c9bc){_0x5c8539(_0x44c9bc);}},this[_0x4dd309(0xc9)]=async(_0x2b1c57,_0x43fdbc,_0x227904)=>{const _0x4ab6ca=_0x4dd309;try{const {token:_0xdd5dfa}=_0x2b1c57['body'],_0x2c1948=await this[_0x4ab6ca(0x7f)][_0x4ab6ca(0xc9)](_0xdd5dfa);_0x43fdbc['json']({'success':!![],'result':_0x2c1948});}catch(_0x1b996a){_0x227904(_0x1b996a);}},this['disableAdmin2FA']=async(_0x37b703,_0x29aa1e,_0x469375)=>{const _0x378d45=_0x4dd309;try{await this[_0x378d45(0x7f)][_0x378d45(0xba)](),_0x29aa1e[_0x378d45(0xae)]({'success':!![],'message':_0x378d45(0xd7)});}catch(_0x13b4ef){_0x469375(_0x13b4ef);}},this[_0x4dd309(0x81)]=async(_0x50f653,_0x4a68e1,_0x3cb461)=>{const _0x4000b0=_0x4dd309;try{const {shopId:_0x1611f1,amount:_0x5c90ea,notes:_0x41ac1e}=_0x50f653[_0x4000b0(0xa9)];if(!_0x1611f1||!_0x5c90ea)return _0x4a68e1[_0x4000b0(0xb5)](0x190)['json']({'success':![],'message':_0x4000b0(0x8a)});if(_0x5c90ea<=0x0)return _0x4a68e1[_0x4000b0(0xb5)](0x190)[_0x4000b0(0xae)]({'success':![],'message':_0x4000b0(0xb3)});await this[_0x4000b0(0x7f)]['depositBalance'](_0x1611f1,_0x5c90ea,_0x41ac1e),_0x4a68e1[_0x4000b0(0xae)]({'success':!![],'message':_0x4000b0(0x70)});}catch(_0x34ea6f){_0x3cb461(_0x34ea6f);}},this[_0x4dd309(0x7f)]=new adminService_1[(_0x4dd309(0xd1))](),this[_0x4dd309(0xa1)]=new paymentLinkService_1['PaymentLinkService']();}}function a3_0x105a(){const _0x216e81=['ðŸŽ¯\x20[CONTROLLER]\x20Creating\x20payout\x20with\x20data:','â°\x20Manual\x20PENDING\x20payment\x20cleanup\x20initiated\x20by\x20admin:\x20','getUserById','9XvCerk','shopId','chargeback','cleanupStalePendingPayments','defineProperty','activateUser','getAllUsers','User\x20updated\x20successfully','getAllPayouts','âœ…\x20Payment\x20link\x20counter\x20updated\x20for\x20payment\x20','Balance\x20deposited\x20successfully','Payment\x20link\x20expiration\x20check\x20completed\x20successfully','cleanupStalePaymentsWithReport','updateUser','8534966GbzuVL','PENDING\x20payment\x20cleanup\x20completed\x20successfully','checkAuth','username','Admin\x20password\x20changed\x20successfully','sendPaymentNotification','hasPayoutHistory','deleteUser','disable2FA','FAILED','Failed\x20to\x20update\x20payment\x20link\x20counter:','adminService','role','depositBalance','âœ…\x20Telegram\x20notification\x20sent\x20for\x20status\x20change:\x20','1180136sBULED','processing','cleanupStaleProcessingPayments','users','true','PAID','User\x20activated\x20successfully','shopId\x20and\x20amount\x20are\x20required','ðŸ“Š\x20Admin\x20requesting\x20payout\x20reports:','get2FASettings','461558dERgAO','pagination','getPayments','10lKNtqI','deletePayout','1068wobarp','4240hHudMn','paid','ðŸ“±\x20Payment\x20','query','AdminController','updatePayment','paymentCleanupService','User\x20suspended\x20successfully','ðŸ“Š\x20Admin\x20requesting\x20merchant\x20statistics\x20with\x20filters:','error','614218ziQjzR','getPayouts','ðŸ“±\x20Skipping\x20Telegram\x20notification\x20for\x20status\x20change\x20to:\x20','REFUND','paymentLinkService','Failed\x20to\x20send\x20Telegram\x20notification\x20for\x20status\x20change:','params','getPayoutStats','User\x20not\x20found','2FA\x20disabled\x20successfully','CHARGEBACK','updatePayout','body','getUsers','../services/paymentCleanupService','total','Payout\x20deleted\x20successfully','json','\x20status\x20changed\x20from\x20','User\x20deleted\x20successfully',',\x20sending\x20Telegram\x20notification','Payment\x20not\x20found','Amount\x20must\x20be\x20greater\x20than\x200','changeAdminPassword','status','failed','user','getStatistics','getMerchantsSelection','disableAdmin2FA','summary','createUser','getPayoutReports','Token\x20is\x20required','statistics','expirePaymentLinks','ðŸ”„\x20Admin\x20updating\x20customer\x20data\x20for\x20payment\x20','processed','Payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)\x20with\x20report\x20completed\x20successfully','Payout\x20updated\x20successfully','getMerchantsAwaitingPayout','getProcessingPaymentsStats','30d','log','enableAdmin2FA','User\x20created\x20successfully','Payout\x20created\x20successfully','\x20to\x20','2FA\x20enabled\x20successfully','Admin\x20access\x20confirmed','\x20with\x20data:','7blsUkt','AdminService','getPaymentById','ðŸ§¹\x20Manual\x20PROCESSING\x20payment\x20cleanup\x20initiated\x20by\x20admin:\x20','handleSuccessfulPayment','../services/adminService','payouts','Admin\x202FA\x20disabled\x20successfully','merchants','setup2FA','getShopWallets','getMerchantStatistics','2613234obNars','createPayout','setupAdmin2FA','expireSinglePaymentLinks','Customer\x20data\x20updated\x20successfully','toUpperCase','enable2FA','errors','435711VzKcUv','updateCustomerData','\x20to\x20PAID,\x20updating\x20payment\x20link\x20counter'];a3_0x105a=function(){return _0x216e81;};return a3_0x105a();}exports[a3_0x48213d(0x97)]=AdminController;