'use strict';const a3_0x327906=a3_0x3a41;function a3_0x3a41(_0x211ea5,_0x1067b5){_0x211ea5=_0x211ea5-0x1ad;const _0x1cd411=a3_0x1cd4();let _0x3a41fa=_0x1cd411[_0x211ea5];return _0x3a41fa;}function a3_0x1cd4(){const _0x490c26=['487785yiwCSj','log','AdminService','errors','Payout\x20created\x20successfully','getPayoutById','users','Failed\x20to\x20send\x20Telegram\x20notification\x20for\x20status\x20change:','User\x20activated\x20successfully','error','20SdgIch','paymentLinkService','paymentCleanupService','FAILED','getAllUsers','REFUND','hasPayoutHistory','month','getAllPayments','getMerchantsSelection','username','2FA\x20enabled\x20successfully','payments','json','getUserById','âœ…\x20Payment\x20link\x20counter\x20updated\x20for\x20payment\x20','role','ðŸ“±\x20Payment\x20','Admin\x20access\x20confirmed','createPayout','ðŸ“ˆ\x20Admin\x20changed\x20payment\x20','updatePaymentStatus','getUsers','Payout\x20updated\x20successfully','1065394JBwNPN','\x20to\x20PAID,\x20updating\x20payment\x20link\x20counter','suspendUser','\x20status\x20changed\x20from\x20','setup2FA','defineProperty','status','updatePayment','2694375MaSdPm','User\x20not\x20found','PROCESSING','user','PaymentLinkService','3639052YfQFhK','gateway','getPayoutStats','createUser','ðŸŽ¯\x20[CONTROLLER]\x20Creating\x20payout\x20with\x20data:','2FA\x20disabled\x20successfully','cleanupStalePayments','Payment\x20not\x20found','PAID','CHARGEBACK','payouts','handleSuccessfulPayment','User\x20updated\x20successfully','Payout\x20not\x20found','ðŸ§¹\x20Manual\x20PROCESSING\x20payment\x20cleanup\x20initiated\x20by\x20admin:\x20','processed','User\x20deleted\x20successfully','getAllPayouts','getPaymentById','params','enable2FA','paid','deleteUser','disable2FA','cleanupStalePendingPayments','12uffgZW','Customer\x20data\x20updated\x20successfully','expired','getMerchantsAwaitingPayout','720865AuEkvI','139587DxHcRw','getSystemStatistics','ðŸ“Š\x20Manual\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)\x20with\x20report\x20initiated\x20by\x20admin:\x20','30d','\x20with\x20data:','updateUser','344bEptUD','pagination','activateUser','ðŸŽ¯\x20[CONTROLLER]\x20Updating\x20payout\x20','PROCESSING\x20payment\x20cleanup\x20completed\x20successfully','updateCustomerData','getPayouts','updatePayout','User\x20created\x20successfully','AdminController','â°\x20Manual\x20PENDING\x20payment\x20cleanup\x20initiated\x20by\x20admin:\x20','createdAt','statistics','getMerchantStatistics',',\x20sending\x20Telegram\x20notification','getShopWallets','PENDING\x20payment\x20cleanup\x20completed\x20successfully','telegramBotService','total','expireSinglePaymentLinks','shopId','ðŸ“Š\x20Admin\x20requesting\x20merchant\x20statistics\x20with\x20filters:','deletePayout','User\x20suspended\x20successfully','getProcessingPaymentsStats','607269cFxQLD','summary','adminService','EXPIRED','failed','cleanupStaleProcessingPayments','body','Payment\x20link\x20expiration\x20check\x20completed\x20successfully','expirePaymentLinks','2hRrUyS','ðŸ”„\x20Admin\x20updating\x20customer\x20data\x20for\x20payment\x20','\x20to\x20','query','\x20->\x20'];a3_0x1cd4=function(){return _0x490c26;};return a3_0x1cd4();}(function(_0x46724e,_0x3181ff){const _0x3dc6e6=a3_0x3a41,_0x2ca666=_0x46724e();while(!![]){try{const _0x1c909f=parseInt(_0x3dc6e6(0x200))/0x1*(parseInt(_0x3dc6e6(0x209))/0x2)+parseInt(_0x3dc6e6(0x20e))/0x3+-parseInt(_0x3dc6e6(0x1c3))/0x4+-parseInt(_0x3dc6e6(0x1e0))/0x5*(parseInt(_0x3dc6e6(0x1dc))/0x6)+-parseInt(_0x3dc6e6(0x1e1))/0x7*(-parseInt(_0x3dc6e6(0x1e7))/0x8)+parseInt(_0x3dc6e6(0x1be))/0x9+-parseInt(_0x3dc6e6(0x218))/0xa*(parseInt(_0x3dc6e6(0x1b6))/0xb);if(_0x1c909f===_0x3181ff)break;else _0x2ca666['push'](_0x2ca666['shift']());}catch(_0x21457b){_0x2ca666['push'](_0x2ca666['shift']());}}}(a3_0x1cd4,0x82965));Object[a3_0x327906(0x1bb)](exports,'__esModule',{'value':!![]}),exports[a3_0x327906(0x1f0)]=void 0x0;const adminService_1=require('../services/adminService'),paymentLinkService_1=require('../services/paymentLinkService'),paymentCleanupService_1=require('../services/paymentCleanupService'),telegramBotService_1=require('../services/telegramBotService');class AdminController{constructor(){const _0x166c9a=a3_0x327906;this['checkAuth']=async(_0x3d356a,_0x2a9e1e,_0x9d5e30)=>{const _0x3e884a=a3_0x3a41;try{const _0x5c8522=_0x3d356a['user'];_0x2a9e1e[_0x3e884a(0x225)]({'success':!![],'message':_0x3e884a(0x1b0),'user':{'id':_0x5c8522?.['id'],'username':_0x5c8522?.[_0x3e884a(0x222)],'role':_0x5c8522?.[_0x3e884a(0x1ae)]}});}catch(_0x260948){_0x9d5e30(_0x260948);}},this['getStatistics']=async(_0x23ca97,_0x52238f,_0x3595ac)=>{const _0x4d1a33=a3_0x3a41;try{const {period:period=_0x4d1a33(0x1e4),currentDate:_0x4eace7}=_0x23ca97[_0x4d1a33(0x20c)],_0x74db3a=await this[_0x4d1a33(0x202)][_0x4d1a33(0x1e2)](period,_0x4eace7);_0x52238f['json']({'success':!![],'result':_0x74db3a});}catch(_0x462016){_0x3595ac(_0x462016);}},this['getMerchantStatistics']=async(_0x21f1ad,_0x539587,_0x229800)=>{const _0xc1fbf3=a3_0x3a41;try{const {shopId:_0x244f18,period:period=_0xc1fbf3(0x21f),dateFrom:_0x2dc6a2,dateTo:_0x2b4563}=_0x21f1ad['query'],_0x5c68a2={'shopId':_0x244f18,'period':period,'dateFrom':_0x2dc6a2,'dateTo':_0x2b4563};console['log'](_0xc1fbf3(0x1fc),_0x5c68a2);const _0x3e37cf=await this[_0xc1fbf3(0x202)][_0xc1fbf3(0x1f4)](_0x5c68a2);_0x539587[_0xc1fbf3(0x225)]({'success':!![],'result':_0x3e37cf});}catch(_0x177775){_0x229800(_0x177775);}},this[_0x166c9a(0x1c5)]=async(_0x5b8b37,_0x24b305,_0x5d7169)=>{const _0x209ab7=_0x166c9a;try{const _0xb7cf43=await this[_0x209ab7(0x202)][_0x209ab7(0x1c5)]();_0x24b305[_0x209ab7(0x225)]({'success':!![],'result':_0xb7cf43});}catch(_0x57d092){_0x5d7169(_0x57d092);}},this[_0x166c9a(0x1df)]=async(_0x22174c,_0x4af46c,_0x1d07ea)=>{const _0x3efb94=_0x166c9a;try{const {page:page=0x1,limit:limit=0x14,minAmount:_0x229c5d,search:_0x1e10dc}=_0x22174c[_0x3efb94(0x20c)],_0x3038c7={'page':Number(page),'limit':Number(limit),'minAmount':_0x229c5d?Number(_0x229c5d):undefined,'search':_0x1e10dc},_0x320c0a=await this['adminService']['getMerchantsAwaitingPayout'](_0x3038c7);_0x4af46c['json']({'success':!![],'merchants':_0x320c0a['merchants'],'pagination':_0x320c0a[_0x3efb94(0x1e8)],'summary':_0x320c0a[_0x3efb94(0x201)]});}catch(_0x5a1ecf){_0x1d07ea(_0x5a1ecf);}},this[_0x166c9a(0x221)]=async(_0x1e528b,_0x5ecd57,_0xbbf61f)=>{const _0x1c3fba=_0x166c9a;try{const _0x31c3a2=_0x1e528b[_0x1c3fba(0x20c)][_0x1c3fba(0x21e)]==='true',_0x13ec61=await this['adminService']['getMerchantsSelection'](_0x31c3a2);_0x5ecd57['json']({'success':!![],'result':_0x13ec61});}catch(_0x4eb9e1){_0xbbf61f(_0x4eb9e1);}},this[_0x166c9a(0x1b1)]=async(_0x3d5004,_0x4a4ebf,_0x35e6bf)=>{const _0x5d38d2=_0x166c9a;try{const _0x40c05f=_0x3d5004[_0x5d38d2(0x206)];console[_0x5d38d2(0x20f)](_0x5d38d2(0x1c7),_0x40c05f);const _0x285ed5=await this['adminService'][_0x5d38d2(0x1b1)](_0x40c05f);_0x4a4ebf[_0x5d38d2(0x1bc)](0xc9)[_0x5d38d2(0x225)]({'success':!![],'message':_0x5d38d2(0x212),'result':_0x285ed5});}catch(_0x83b187){_0x35e6bf(_0x83b187);}},this['updatePayout']=async(_0x4e1a63,_0x44d8d3,_0x44f57f)=>{const _0x65f30a=_0x166c9a;try{const {id:_0x5637c3}=_0x4e1a63['params'],_0x24c1ba=_0x4e1a63[_0x65f30a(0x206)];console[_0x65f30a(0x20f)](_0x65f30a(0x1ea)+_0x5637c3+_0x65f30a(0x1e5),_0x24c1ba);const _0x24f561=await this['adminService'][_0x65f30a(0x1ee)](_0x5637c3,_0x24c1ba);_0x44d8d3[_0x65f30a(0x225)]({'success':!![],'message':_0x65f30a(0x1b5),'result':_0x24f561});}catch(_0x44a6dc){_0x44f57f(_0x44a6dc);}},this[_0x166c9a(0x1ed)]=async(_0x3d791a,_0x4adb58,_0x5cc4f9)=>{const _0x59661d=_0x166c9a;try{const {page:page=0x1,limit:limit=0x14,shopId:_0x4311b5,network:_0x21d9d5,dateFrom:_0x2b54c5,dateTo:_0x3725d7,search:_0x333114}=_0x3d791a[_0x59661d(0x20c)],_0x48a2b3={'page':Number(page),'limit':Number(limit),'shopId':_0x4311b5,'network':_0x21d9d5,'dateFrom':_0x2b54c5,'dateTo':_0x3725d7,'search':_0x333114},_0x453fef=await this[_0x59661d(0x202)][_0x59661d(0x1d4)](_0x48a2b3);_0x4adb58[_0x59661d(0x225)]({'success':!![],'payouts':_0x453fef[_0x59661d(0x1cd)],'pagination':_0x453fef[_0x59661d(0x1e8)]});}catch(_0x31ac6d){_0x5cc4f9(_0x31ac6d);}},this[_0x166c9a(0x213)]=async(_0x221452,_0x2ebf43,_0x559c4e)=>{const _0x126980=_0x166c9a;try{const {id:_0xe3ea5}=_0x221452[_0x126980(0x1d6)],_0x10f737=await this[_0x126980(0x202)][_0x126980(0x213)](_0xe3ea5);if(!_0x10f737)return _0x2ebf43[_0x126980(0x1bc)](0x194)[_0x126980(0x225)]({'success':![],'message':_0x126980(0x1d0)});_0x2ebf43[_0x126980(0x225)]({'success':!![],'result':_0x10f737});}catch(_0x57095e){_0x559c4e(_0x57095e);}},this[_0x166c9a(0x1fd)]=async(_0x10b67b,_0x397a6a,_0x5312f2)=>{const _0x39edff=_0x166c9a;try{const {id:_0x48c96d}=_0x10b67b[_0x39edff(0x1d6)];await this[_0x39edff(0x202)][_0x39edff(0x1fd)](_0x48c96d),_0x397a6a[_0x39edff(0x225)]({'success':!![],'message':'Payout\x20deleted\x20successfully'});}catch(_0x218dee){_0x5312f2(_0x218dee);}},this['getPayments']=async(_0x5e4468,_0x12cd15,_0x164751)=>{const _0x5709b1=_0x166c9a;try{const {page:page=0x1,limit:limit=0x14,status:_0x3a2ebd,gateway:_0x152d81,shopId:_0x588a66,dateFrom:_0x4bc1d0,dateTo:_0x645fc5,search:_0x35c63c,currency:_0x4f692b,sortBy:_0x4e75a3,sortOrder:_0x19ad17}=_0x5e4468[_0x5709b1(0x20c)],_0x57bc54={'page':Number(page),'limit':Number(limit),'status':_0x3a2ebd,'gateway':_0x152d81,'shopId':_0x588a66,'dateFrom':_0x4bc1d0,'dateTo':_0x645fc5,'search':_0x35c63c,'currency':_0x4f692b,'sortBy':_0x4e75a3,'sortOrder':_0x19ad17},_0x542a11=await this[_0x5709b1(0x202)][_0x5709b1(0x220)](_0x57bc54);_0x12cd15['json']({'success':!![],'payments':_0x542a11[_0x5709b1(0x224)],'pagination':_0x542a11['pagination'],'statistics':_0x542a11[_0x5709b1(0x1f3)]});}catch(_0x5116a6){_0x164751(_0x5116a6);}},this[_0x166c9a(0x1d5)]=async(_0x1f490f,_0x380470,_0x4ad749)=>{const _0x34a158=_0x166c9a;try{const {id:_0x3654af}=_0x1f490f[_0x34a158(0x1d6)],_0x2cf3fc=await this[_0x34a158(0x202)]['getPaymentById'](_0x3654af);if(!_0x2cf3fc)return _0x380470['status'](0x194)['json']({'success':![],'message':_0x34a158(0x1ca)});_0x380470[_0x34a158(0x225)]({'success':!![],'result':_0x2cf3fc});}catch(_0x2bb3d8){_0x4ad749(_0x2bb3d8);}},this[_0x166c9a(0x1bd)]=async(_0x451436,_0x5a7984,_0xbc4521)=>{const _0x179226=_0x166c9a;try{const {id:_0x511e1e}=_0x451436[_0x179226(0x1d6)],{status:_0x5b7535,notes:_0xea74a7,chargebackAmount:_0x206c43}=_0x451436['body'],_0x5cee5b=await this[_0x179226(0x202)][_0x179226(0x1d5)](_0x511e1e);if(!_0x5cee5b)return _0x5a7984[_0x179226(0x1bc)](0x194)[_0x179226(0x225)]({'success':![],'message':'Payment\x20not\x20found'});const _0x39c7db=await this[_0x179226(0x202)][_0x179226(0x1b3)](_0x511e1e,_0x5b7535,_0xea74a7,_0x206c43);if(_0x5cee5b[_0x179226(0x1bc)]!==_0x5b7535&&_0x5b7535['toUpperCase']()===_0x179226(0x1cb)){console[_0x179226(0x20f)](_0x179226(0x1b2)+_0x511e1e+_0x179226(0x1b7));try{await this[_0x179226(0x219)][_0x179226(0x1ce)](_0x511e1e),console[_0x179226(0x20f)](_0x179226(0x1ad)+_0x511e1e);}catch(_0x480b99){console['error']('Failed\x20to\x20update\x20payment\x20link\x20counter:',_0x480b99);}}if(_0x5cee5b[_0x179226(0x1bc)]!==_0x5b7535){console['log'](_0x179226(0x1af)+_0x511e1e+_0x179226(0x1b9)+_0x5cee5b[_0x179226(0x1bc)]+_0x179226(0x20b)+_0x5b7535+_0x179226(0x1f5));try{let _0x225bc9;switch(_0x5b7535['toUpperCase']()){case'PAID':_0x225bc9=_0x179226(0x1d8);break;case _0x179226(0x1c0):_0x225bc9='processing';break;case _0x179226(0x21b):_0x225bc9=_0x179226(0x204);break;case _0x179226(0x203):_0x225bc9=_0x179226(0x1de);break;case _0x179226(0x21d):_0x225bc9='refund';break;case _0x179226(0x1cc):_0x225bc9='chargeback';break;default:console[_0x179226(0x20f)]('ðŸ“±\x20Skipping\x20Telegram\x20notification\x20for\x20status\x20change\x20to:\x20'+_0x5b7535);break;}if(_0x225bc9){const _0x49a821={..._0x39c7db,'shopId':_0x5cee5b[_0x179226(0x1fb)],'gateway':_0x5cee5b[_0x179226(0x1c4)],'createdAt':_0x5cee5b[_0x179226(0x1f2)],'chargebackAmount':_0x206c43};await telegramBotService_1[_0x179226(0x1f8)]['sendPaymentNotification'](_0x5cee5b[_0x179226(0x1fb)],_0x49a821,_0x225bc9),console[_0x179226(0x20f)]('âœ…\x20Telegram\x20notification\x20sent\x20for\x20status\x20change:\x20'+_0x5cee5b[_0x179226(0x1bc)]+_0x179226(0x20d)+_0x5b7535);}}catch(_0x1fa0c2){console[_0x179226(0x217)](_0x179226(0x215),_0x1fa0c2);}}_0x5a7984[_0x179226(0x225)]({'success':!![],'message':'Payment\x20updated\x20successfully','result':_0x39c7db});}catch(_0x2edbe3){_0xbc4521(_0x2edbe3);}},this['updateCustomerData']=async(_0x1084fd,_0x47322b,_0x4619c2)=>{const _0x31c75d=_0x166c9a;try{const {id:_0x1b1f25}=_0x1084fd[_0x31c75d(0x1d6)],_0x7a2484=_0x1084fd[_0x31c75d(0x206)];console[_0x31c75d(0x20f)](_0x31c75d(0x20a)+_0x1b1f25+':',_0x7a2484);const _0x57936a=await this[_0x31c75d(0x202)][_0x31c75d(0x1ec)](_0x1b1f25,_0x7a2484);_0x47322b[_0x31c75d(0x225)]({'success':!![],'message':_0x31c75d(0x1dd),'result':_0x57936a});}catch(_0x1342a6){_0x4619c2(_0x1342a6);}},this[_0x166c9a(0x1e6)]=async(_0x50c9fb,_0x11e2b6,_0x526ecb)=>{const _0x3ed08e=_0x166c9a;try{const {id:_0x55367d}=_0x50c9fb[_0x3ed08e(0x1d6)],_0x570028=_0x50c9fb[_0x3ed08e(0x206)],_0x1ac883=await this[_0x3ed08e(0x202)]['updateUser'](_0x55367d,_0x570028);_0x11e2b6[_0x3ed08e(0x225)]({'success':!![],'message':_0x3ed08e(0x1cf),'result':_0x1ac883});}catch(_0x1d61fa){_0x526ecb(_0x1d61fa);}},this[_0x166c9a(0x1b8)]=async(_0x410733,_0x5f5922,_0x5b0484)=>{const _0x4c75e7=_0x166c9a;try{const {id:_0x2ff52e}=_0x410733[_0x4c75e7(0x1d6)],_0x534d3a=await this['adminService'][_0x4c75e7(0x1b8)](_0x2ff52e);_0x5f5922[_0x4c75e7(0x225)]({'success':!![],'message':_0x4c75e7(0x1fe),'result':_0x534d3a});}catch(_0x312ca0){_0x5b0484(_0x312ca0);}},this[_0x166c9a(0x1e9)]=async(_0x13da12,_0x8ac0b3,_0x5659f6)=>{const _0x58552c=_0x166c9a;try{const {id:_0x55cc3c}=_0x13da12[_0x58552c(0x1d6)],_0x3cce6f=await this['adminService'][_0x58552c(0x1e9)](_0x55cc3c);_0x8ac0b3[_0x58552c(0x225)]({'success':!![],'message':_0x58552c(0x216),'result':_0x3cce6f});}catch(_0x4abf52){_0x5659f6(_0x4abf52);}},this[_0x166c9a(0x1b4)]=async(_0x44b965,_0x37b5f1,_0x417114)=>{const _0x20e27a=_0x166c9a;try{const {page:page=0x1,limit:limit=0x14,status:_0x42ecd1}=_0x44b965[_0x20e27a(0x20c)],_0x301706={'page':Number(page),'limit':Number(limit),'status':_0x42ecd1},_0x5f58e1=await this['adminService'][_0x20e27a(0x21c)](_0x301706);_0x37b5f1[_0x20e27a(0x225)]({'success':!![],'users':_0x5f58e1[_0x20e27a(0x214)],'pagination':_0x5f58e1[_0x20e27a(0x1e8)]});}catch(_0x32da32){_0x417114(_0x32da32);}},this[_0x166c9a(0x226)]=async(_0x3e02d0,_0x400372,_0x305c72)=>{const _0x34968c=_0x166c9a;try{const {id:_0x59f706}=_0x3e02d0[_0x34968c(0x1d6)],_0xc6266b=await this[_0x34968c(0x202)]['getUserById'](_0x59f706);if(!_0xc6266b)return _0x400372[_0x34968c(0x1bc)](0x194)['json']({'success':![],'message':_0x34968c(0x1bf)});_0x400372[_0x34968c(0x225)]({'success':!![],'result':_0xc6266b});}catch(_0x8cc072){_0x305c72(_0x8cc072);}},this[_0x166c9a(0x1c6)]=async(_0x5bb47e,_0x2c01cb,_0x50e985)=>{const _0x2849a7=_0x166c9a;try{const _0x5bfc8e=_0x5bb47e[_0x2849a7(0x206)],_0x5bc364=await this[_0x2849a7(0x202)]['createUser'](_0x5bfc8e);_0x2c01cb[_0x2849a7(0x1bc)](0xc9)[_0x2849a7(0x225)]({'success':!![],'message':_0x2849a7(0x1ef),'result':_0x5bc364});}catch(_0x3596e7){_0x50e985(_0x3596e7);}},this[_0x166c9a(0x1d9)]=async(_0xed1c34,_0x4829af,_0x4454cc)=>{const _0x23d2a4=_0x166c9a;try{const {id:_0x5f3d86}=_0xed1c34[_0x23d2a4(0x1d6)];await this[_0x23d2a4(0x202)][_0x23d2a4(0x1d9)](_0x5f3d86),_0x4829af[_0x23d2a4(0x225)]({'success':!![],'message':_0x23d2a4(0x1d3)});}catch(_0x6eb509){_0x4454cc(_0x6eb509);}},this[_0x166c9a(0x1f6)]=async(_0x4b78d9,_0x151f5a,_0x4c9733)=>{const _0x150eb3=_0x166c9a;try{const {shopId:_0x195a5f}=_0x4b78d9[_0x150eb3(0x1d6)],_0x5d0378=await this[_0x150eb3(0x202)][_0x150eb3(0x1f6)](_0x195a5f);_0x151f5a[_0x150eb3(0x225)]({'success':!![],'wallets':_0x5d0378});}catch(_0x3be003){_0x4c9733(_0x3be003);}},this[_0x166c9a(0x1ba)]=async(_0x5aa1e6,_0x30d97a,_0x1ad020)=>{const _0x33bd14=_0x166c9a;try{const {shopId:_0x3fae75}=_0x5aa1e6[_0x33bd14(0x1d6)],_0x2c680a=await this['adminService'][_0x33bd14(0x1ba)](_0x3fae75);_0x30d97a[_0x33bd14(0x225)]({'success':!![],'result':_0x2c680a});}catch(_0x3d31a0){_0x1ad020(_0x3d31a0);}},this[_0x166c9a(0x1d7)]=async(_0x31ace6,_0x172ec8,_0x4d01dc)=>{const _0x3e2e75=_0x166c9a;try{const {shopId:_0x5cbe4d}=_0x31ace6[_0x3e2e75(0x1d6)],{token:_0x1a33ba}=_0x31ace6[_0x3e2e75(0x206)];if(!_0x1a33ba)return _0x172ec8[_0x3e2e75(0x1bc)](0x190)[_0x3e2e75(0x225)]({'success':![],'message':'Token\x20is\x20required'});const _0x205ad7=await this[_0x3e2e75(0x202)][_0x3e2e75(0x1d7)](_0x5cbe4d,_0x1a33ba);_0x172ec8[_0x3e2e75(0x225)]({'success':!![],'message':_0x3e2e75(0x223),'result':_0x205ad7});}catch(_0x50ff82){_0x4d01dc(_0x50ff82);}},this[_0x166c9a(0x1da)]=async(_0x51fb31,_0x27198a,_0x16967c)=>{const _0x14f97d=_0x166c9a;try{const {shopId:_0x11bf18}=_0x51fb31[_0x14f97d(0x1d6)];await this[_0x14f97d(0x202)][_0x14f97d(0x1da)](_0x11bf18),_0x27198a[_0x14f97d(0x225)]({'success':!![],'message':_0x14f97d(0x1c8)});}catch(_0x25a4c1){_0x16967c(_0x25a4c1);}},this[_0x166c9a(0x1ff)]=async(_0xb5627d,_0x444af6,_0x2f0198)=>{const _0x18295a=_0x166c9a;try{const _0x5c6a46=await paymentCleanupService_1[_0x18295a(0x21a)]['getProcessingPaymentsStats']();_0x444af6[_0x18295a(0x225)]({'success':!![],'result':_0x5c6a46});}catch(_0x41440f){_0x2f0198(_0x41440f);}},this[_0x166c9a(0x1c9)]=async(_0x5517fb,_0x5c8295,_0x411933)=>{const _0x54fa74=_0x166c9a;try{console[_0x54fa74(0x20f)](_0x54fa74(0x1d1)+_0x5517fb[_0x54fa74(0x1c1)]?.['username']+'\x20('+_0x5517fb[_0x54fa74(0x1c1)]?.['id']+')');const _0x35efa8=await paymentCleanupService_1[_0x54fa74(0x21a)]['cleanupStaleProcessingPayments']();_0x5c8295[_0x54fa74(0x225)]({'success':!![],'message':_0x54fa74(0x1eb),'result':{'processed':_0x35efa8[_0x54fa74(0x1d2)],'failed':_0x35efa8['failed'],'errors':_0x35efa8['errors']}});}catch(_0x3a64d8){_0x411933(_0x3a64d8);}},this[_0x166c9a(0x1db)]=async(_0x2d6cd5,_0x339876,_0x23f814)=>{const _0x4e6b98=_0x166c9a;try{console['log'](_0x4e6b98(0x1f1)+_0x2d6cd5[_0x4e6b98(0x1c1)]?.[_0x4e6b98(0x222)]+'\x20('+_0x2d6cd5['user']?.['id']+')');const _0x599a5d=await paymentCleanupService_1[_0x4e6b98(0x21a)]['cleanupStalePendingPayments']();_0x339876[_0x4e6b98(0x225)]({'success':!![],'message':_0x4e6b98(0x1f7),'result':{'processed':_0x599a5d['processed'],'failed':_0x599a5d[_0x4e6b98(0x204)],'errors':_0x599a5d[_0x4e6b98(0x211)]}});}catch(_0x5614d6){_0x23f814(_0x5614d6);}},this['cleanupStalePaymentsWithReport']=async(_0x2beac4,_0x3437a1,_0x2f1f5e)=>{const _0xf3bdf2=_0x166c9a;try{console[_0xf3bdf2(0x20f)](_0xf3bdf2(0x1e3)+_0x2beac4[_0xf3bdf2(0x1c1)]?.[_0xf3bdf2(0x222)]+'\x20('+_0x2beac4[_0xf3bdf2(0x1c1)]?.['id']+')');const _0x2bf91d=await paymentCleanupService_1[_0xf3bdf2(0x21a)]['getProcessingPaymentsStats'](),_0x233118=await paymentCleanupService_1['paymentCleanupService'][_0xf3bdf2(0x205)](),_0x3e33fa=await paymentCleanupService_1['paymentCleanupService'][_0xf3bdf2(0x1db)](),_0x5afa6c=await paymentCleanupService_1[_0xf3bdf2(0x21a)][_0xf3bdf2(0x1ff)]();_0x3437a1['json']({'success':!![],'message':'Payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)\x20with\x20report\x20completed\x20successfully','result':{'cleanup':{'processing':{'processed':_0x233118[_0xf3bdf2(0x1d2)],'failed':_0x233118[_0xf3bdf2(0x204)],'errors':_0x233118['errors']},'pending':{'processed':_0x3e33fa[_0xf3bdf2(0x1d2)],'failed':_0x3e33fa[_0xf3bdf2(0x204)],'errors':_0x3e33fa[_0xf3bdf2(0x211)]},'total':{'processed':_0x233118[_0xf3bdf2(0x1d2)]+_0x3e33fa[_0xf3bdf2(0x1d2)],'failed':_0x233118[_0xf3bdf2(0x204)]+_0x3e33fa[_0xf3bdf2(0x204)],'errors':[..._0x233118['errors'],..._0x3e33fa[_0xf3bdf2(0x211)]]}},'statistics':{'before':_0x2bf91d,'after':_0x5afa6c,'reduced':_0x2bf91d[_0xf3bdf2(0x1f9)]-_0x5afa6c[_0xf3bdf2(0x1f9)]}}});}catch(_0x8a9892){_0x2f1f5e(_0x8a9892);}},this[_0x166c9a(0x208)]=async(_0x9b01c6,_0x5cf93d,_0x17ddae)=>{const _0x51032b=_0x166c9a;try{const _0x1e1989=await paymentCleanupService_1[_0x51032b(0x21a)][_0x51032b(0x1fa)]();_0x5cf93d[_0x51032b(0x225)]({'success':!![],'message':_0x51032b(0x207),'result':{'expired':_0x1e1989[_0x51032b(0x1de)],'errors':_0x1e1989[_0x51032b(0x211)]}});}catch(_0x280d01){_0x17ddae(_0x280d01);}},this['adminService']=new adminService_1[(_0x166c9a(0x210))](),this[_0x166c9a(0x219)]=new paymentLinkService_1[(_0x166c9a(0x1c2))]();}}exports['AdminController']=AdminController;