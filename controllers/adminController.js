'use strict';const a3_0x58ec7d=a3_0x2f12;(function(_0x4adfbd,_0x586e36){const _0x10473a=a3_0x2f12,_0x117a62=_0x4adfbd();while(!![]){try{const _0xefd5ae=parseInt(_0x10473a(0x1d2))/0x1*(-parseInt(_0x10473a(0x1bf))/0x2)+-parseInt(_0x10473a(0x1c2))/0x3*(-parseInt(_0x10473a(0x1cc))/0x4)+-parseInt(_0x10473a(0x1e9))/0x5+parseInt(_0x10473a(0x1e2))/0x6+parseInt(_0x10473a(0x1c9))/0x7+-parseInt(_0x10473a(0x1c6))/0x8+parseInt(_0x10473a(0x1b6))/0x9;if(_0xefd5ae===_0x586e36)break;else _0x117a62['push'](_0x117a62['shift']());}catch(_0xb6b4c2){_0x117a62['push'](_0x117a62['shift']());}}}(a3_0x2366,0x4a410));Object[a3_0x58ec7d(0x1b0)](exports,a3_0x58ec7d(0x207),{'value':!![]}),exports[a3_0x58ec7d(0x198)]=void 0x0;function a3_0x2f12(_0x16baf0,_0x18425c){_0x16baf0=_0x16baf0-0x18a;const _0x2366c7=a3_0x2366();let _0x2f123b=_0x2366c7[_0x16baf0];return _0x2f123b;}function a3_0x2366(){const _0x4b2748=['payments','toUpperCase','REFUND','statistics','User\x20not\x20found','âœ…\x20Telegram\x20notification\x20sent\x20for\x20status\x20change:\x20','role','AdminController','FAILED','total','query','deletePayout','EXPIRED','disable2FA',',\x20sending\x20Telegram\x20notification','PROCESSING','ðŸ“±\x20Payment\x20','activateUser','month','params','body','createdAt','createUser','get2FASettings','enable2FA','ðŸ“Š\x20Admin\x20requesting\x20merchant\x20statistics\x20with\x20filters:','PaymentLinkService','../services/paymentCleanupService','disableAdmin2FA','Payment\x20updated\x20successfully','refund','defineProperty','ðŸŽ¯\x20[CONTROLLER]\x20Updating\x20payout\x20','Payout\x20updated\x20successfully','Payout\x20deleted\x20successfully','ðŸ”„\x20Admin\x20updating\x20customer\x20data\x20for\x20payment\x20','User\x20suspended\x20successfully','8878032LSwtRL','payouts','shopId','deleteUser','adminService','âœ…\x20Payment\x20link\x20counter\x20updated\x20for\x20payment\x20','2FA\x20enabled\x20successfully','getPayoutById','getAllPayouts','26FRAtRw','\x20status\x20changed\x20from\x20','true','272589NtdKgN','getMerchantStatistics','expired','2FA\x20disabled\x20successfully','4063536dvwVsZ','\x20with\x20data:','getUsers','2101204qyONDg','getPaymentById','errors','4oiroOL','Admin\x20password\x20changed\x20successfully','setupAdmin2FA','getAllPayments','error','cleanupStaleProcessingPayments','36745KMcytw','\x20to\x20','getPayouts','ðŸ§¹\x20Manual\x20PROCESSING\x20payment\x20cleanup\x20initiated\x20by\x20admin:\x20','updatePayout','getAllUsers','Payout\x20not\x20found','Admin\x20access\x20confirmed','log','updateUser','Payout\x20created\x20successfully','cleanupStalePaymentsWithReport','getStatistics','paymentLinkService','ðŸŽ¯\x20[CONTROLLER]\x20Creating\x20payout\x20with\x20data:','User\x20deleted\x20successfully','2843658pKxTTV','paid','checkAuth','enableAdmin2FA','ðŸ“Š\x20Manual\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)\x20with\x20report\x20initiated\x20by\x20admin:\x20','Admin\x202FA\x20disabled\x20successfully','../services/paymentLinkService','2808275EbhHOy','suspendUser','User\x20activated\x20successfully','pagination','changeAdminPassword','PROCESSING\x20payment\x20cleanup\x20completed\x20successfully','username','expireSinglePaymentLinks','setup2FA','ðŸ“±\x20Skipping\x20Telegram\x20notification\x20for\x20status\x20change\x20to:\x20','createPayout','processing','expirePaymentLinks','users','processed','getMerchantsAwaitingPayout','status','updateCustomerData','getSystemStatistics','../services/adminService','json','getPayoutStats','getMerchantsSelection','failed','cleanupStalePayments','â°\x20Manual\x20PENDING\x20payment\x20cleanup\x20initiated\x20by\x20admin:\x20','cleanupStalePendingPayments','\x20to\x20PAID,\x20updating\x20payment\x20link\x20counter','user','User\x20created\x20successfully','__esModule','telegramBotService','getProcessingPaymentsStats','chargeback','Payment\x20not\x20found','User\x20updated\x20successfully','updatePayment','paymentCleanupService','CHARGEBACK','getShopWallets','Token\x20is\x20required'];a3_0x2366=function(){return _0x4b2748;};return a3_0x2366();}const adminService_1=require(a3_0x58ec7d(0x1fc)),paymentLinkService_1=require(a3_0x58ec7d(0x1e8)),paymentCleanupService_1=require(a3_0x58ec7d(0x1ac)),telegramBotService_1=require('../services/telegramBotService');class AdminController{constructor(){const _0x296318=a3_0x58ec7d;this[_0x296318(0x1e4)]=async(_0x4da09f,_0x4c4767,_0x61daa8)=>{const _0xec00b8=_0x296318;try{const _0xcac4be=_0x4da09f['user'];_0x4c4767['json']({'success':!![],'message':_0xec00b8(0x1d9),'user':{'id':_0xcac4be?.['id'],'username':_0xcac4be?.[_0xec00b8(0x1ef)],'role':_0xcac4be?.[_0xec00b8(0x197)]}});}catch(_0x1fd259){_0x61daa8(_0x1fd259);}},this[_0x296318(0x1de)]=async(_0x3723c0,_0x5817c7,_0x5c2515)=>{const _0x3cf54d=_0x296318;try{const {period:period='30d',currentDate:_0xa1883b}=_0x3723c0[_0x3cf54d(0x19b)],_0x1006e7=await this['adminService'][_0x3cf54d(0x1fb)](period,_0xa1883b);_0x5817c7[_0x3cf54d(0x1fd)]({'success':!![],'result':_0x1006e7});}catch(_0x1e2414){_0x5c2515(_0x1e2414);}},this[_0x296318(0x1c3)]=async(_0x874fa4,_0x317b18,_0x16de97)=>{const _0xfe7acf=_0x296318;try{const {shopId:_0x46643c,period:period=_0xfe7acf(0x1a3),dateFrom:_0x51843b,dateTo:_0x5d0099}=_0x874fa4['query'],_0x48c036={'shopId':_0x46643c,'period':period,'dateFrom':_0x51843b,'dateTo':_0x5d0099};console['log'](_0xfe7acf(0x1aa),_0x48c036);const _0x7e8c57=await this[_0xfe7acf(0x1ba)][_0xfe7acf(0x1c3)](_0x48c036);_0x317b18['json']({'success':!![],'result':_0x7e8c57});}catch(_0xa7b74e){_0x16de97(_0xa7b74e);}},this[_0x296318(0x1fe)]=async(_0x23df7f,_0x271486,_0x17ad47)=>{const _0x2bae3c=_0x296318;try{const _0x1212ee=await this['adminService'][_0x2bae3c(0x1fe)]();_0x271486['json']({'success':!![],'result':_0x1212ee});}catch(_0xc8b7ff){_0x17ad47(_0xc8b7ff);}},this[_0x296318(0x1f8)]=async(_0x401135,_0x4f20c6,_0x19e5ec)=>{const _0x10804f=_0x296318;try{const {page:page=0x1,limit:limit=0x14,minAmount:_0x4f1b6e,search:_0x56a89b}=_0x401135[_0x10804f(0x19b)],_0x584f90={'page':Number(page),'limit':Number(limit),'minAmount':_0x4f1b6e?Number(_0x4f1b6e):undefined,'search':_0x56a89b},_0x41ebb6=await this[_0x10804f(0x1ba)][_0x10804f(0x1f8)](_0x584f90);_0x4f20c6['json']({'success':!![],'merchants':_0x41ebb6['merchants'],'pagination':_0x41ebb6[_0x10804f(0x1ec)],'summary':_0x41ebb6['summary']});}catch(_0x3bc923){_0x19e5ec(_0x3bc923);}},this['getMerchantsSelection']=async(_0x43fa95,_0x430aae,_0x18370b)=>{const _0x44ebf8=_0x296318;try{const _0x545eea=_0x43fa95[_0x44ebf8(0x19b)]['hasPayoutHistory']===_0x44ebf8(0x1c1),_0x3f97a0=await this['adminService'][_0x44ebf8(0x1ff)](_0x545eea);_0x430aae[_0x44ebf8(0x1fd)]({'success':!![],'result':_0x3f97a0});}catch(_0x1d8b22){_0x18370b(_0x1d8b22);}},this[_0x296318(0x1f3)]=async(_0x1b0d3a,_0x4a369c,_0xf22050)=>{const _0x404c2c=_0x296318;try{const _0x2193d8=_0x1b0d3a[_0x404c2c(0x1a5)];console[_0x404c2c(0x1da)](_0x404c2c(0x1e0),_0x2193d8);const _0x56b708=await this[_0x404c2c(0x1ba)][_0x404c2c(0x1f3)](_0x2193d8);_0x4a369c[_0x404c2c(0x1f9)](0xc9)[_0x404c2c(0x1fd)]({'success':!![],'message':_0x404c2c(0x1dc),'result':_0x56b708});}catch(_0x319b04){_0xf22050(_0x319b04);}},this[_0x296318(0x1d6)]=async(_0x1f42be,_0xcfa1e,_0x582024)=>{const _0x53ee6=_0x296318;try{const {id:_0x3b0ba0}=_0x1f42be[_0x53ee6(0x1a4)],_0x39cb4c=_0x1f42be[_0x53ee6(0x1a5)];console['log'](_0x53ee6(0x1b1)+_0x3b0ba0+_0x53ee6(0x1c7),_0x39cb4c);const _0x33b110=await this[_0x53ee6(0x1ba)][_0x53ee6(0x1d6)](_0x3b0ba0,_0x39cb4c);_0xcfa1e['json']({'success':!![],'message':_0x53ee6(0x1b2),'result':_0x33b110});}catch(_0x13279a){_0x582024(_0x13279a);}},this[_0x296318(0x1d4)]=async(_0x30cf12,_0x440b71,_0x514323)=>{const _0x1be318=_0x296318;try{const {page:page=0x1,limit:limit=0x14,shopId:_0x14e76a,network:_0x51be9e,dateFrom:_0x2867eb,dateTo:_0x3a087f,search:_0x49b42c}=_0x30cf12[_0x1be318(0x19b)],_0x1529f4={'page':Number(page),'limit':Number(limit),'shopId':_0x14e76a,'network':_0x51be9e,'dateFrom':_0x2867eb,'dateTo':_0x3a087f,'search':_0x49b42c},_0x3e1a5b=await this[_0x1be318(0x1ba)][_0x1be318(0x1be)](_0x1529f4);_0x440b71[_0x1be318(0x1fd)]({'success':!![],'payouts':_0x3e1a5b[_0x1be318(0x1b7)],'pagination':_0x3e1a5b[_0x1be318(0x1ec)]});}catch(_0x4c9c9a){_0x514323(_0x4c9c9a);}},this[_0x296318(0x1bd)]=async(_0x56977a,_0x49de7c,_0xf2c782)=>{const _0x14ee58=_0x296318;try{const {id:_0x21e296}=_0x56977a[_0x14ee58(0x1a4)],_0x2c68ea=await this[_0x14ee58(0x1ba)]['getPayoutById'](_0x21e296);if(!_0x2c68ea)return _0x49de7c[_0x14ee58(0x1f9)](0x194)[_0x14ee58(0x1fd)]({'success':![],'message':_0x14ee58(0x1d8)});_0x49de7c[_0x14ee58(0x1fd)]({'success':!![],'result':_0x2c68ea});}catch(_0x44e353){_0xf2c782(_0x44e353);}},this['deletePayout']=async(_0x597917,_0x31871e,_0x58627c)=>{const _0x56ddfd=_0x296318;try{const {id:_0x5ac747}=_0x597917[_0x56ddfd(0x1a4)];await this[_0x56ddfd(0x1ba)][_0x56ddfd(0x19c)](_0x5ac747),_0x31871e['json']({'success':!![],'message':_0x56ddfd(0x1b3)});}catch(_0x24b66f){_0x58627c(_0x24b66f);}},this['getPayments']=async(_0x2b1518,_0x2ac168,_0x381c41)=>{const _0xae769c=_0x296318;try{const {page:page=0x1,limit:limit=0x14,status:_0x1ea047,gateway:_0x5b1227,shopId:_0x191150,dateFrom:_0x39a570,dateTo:_0x535093,search:_0x91aae4,currency:_0x6933a0,sortBy:_0x481ed6,sortOrder:_0x4fee9d}=_0x2b1518[_0xae769c(0x19b)],_0x15ff06={'page':Number(page),'limit':Number(limit),'status':_0x1ea047,'gateway':_0x5b1227,'shopId':_0x191150,'dateFrom':_0x39a570,'dateTo':_0x535093,'search':_0x91aae4,'currency':_0x6933a0,'sortBy':_0x481ed6,'sortOrder':_0x4fee9d},_0xe56de0=await this[_0xae769c(0x1ba)][_0xae769c(0x1cf)](_0x15ff06);_0x2ac168[_0xae769c(0x1fd)]({'success':!![],'payments':_0xe56de0[_0xae769c(0x191)],'pagination':_0xe56de0[_0xae769c(0x1ec)],'statistics':_0xe56de0[_0xae769c(0x194)]});}catch(_0x32e389){_0x381c41(_0x32e389);}},this[_0x296318(0x1ca)]=async(_0x193286,_0xa9b5c,_0x505bd9)=>{const _0x154fe5=_0x296318;try{const {id:_0x56d75d}=_0x193286['params'],_0x4ca2a9=await this[_0x154fe5(0x1ba)]['getPaymentById'](_0x56d75d);if(!_0x4ca2a9)return _0xa9b5c['status'](0x194)[_0x154fe5(0x1fd)]({'success':![],'message':_0x154fe5(0x18a)});_0xa9b5c[_0x154fe5(0x1fd)]({'success':!![],'result':_0x4ca2a9});}catch(_0x499287){_0x505bd9(_0x499287);}},this[_0x296318(0x18c)]=async(_0x3f8479,_0x252943,_0x24a560)=>{const _0x28cd85=_0x296318;try{const {id:_0x1bcf80}=_0x3f8479[_0x28cd85(0x1a4)],{status:_0x1c6d38,notes:_0x20b71d,chargebackAmount:_0xc6f0d8}=_0x3f8479[_0x28cd85(0x1a5)],_0x2ecebd=await this[_0x28cd85(0x1ba)][_0x28cd85(0x1ca)](_0x1bcf80);if(!_0x2ecebd)return _0x252943[_0x28cd85(0x1f9)](0x194)[_0x28cd85(0x1fd)]({'success':![],'message':_0x28cd85(0x18a)});const _0x372b42=await this[_0x28cd85(0x1ba)]['updatePaymentStatus'](_0x1bcf80,_0x1c6d38,_0x20b71d,_0xc6f0d8);if(_0x2ecebd[_0x28cd85(0x1f9)]!==_0x1c6d38&&_0x1c6d38[_0x28cd85(0x192)]()==='PAID'){console[_0x28cd85(0x1da)]('ðŸ“ˆ\x20Admin\x20changed\x20payment\x20'+_0x1bcf80+_0x28cd85(0x204));try{await this['paymentLinkService']['handleSuccessfulPayment'](_0x1bcf80),console[_0x28cd85(0x1da)](_0x28cd85(0x1bb)+_0x1bcf80);}catch(_0x1b4eb4){console[_0x28cd85(0x1d0)]('Failed\x20to\x20update\x20payment\x20link\x20counter:',_0x1b4eb4);}}if(_0x2ecebd['status']!==_0x1c6d38){console['log'](_0x28cd85(0x1a1)+_0x1bcf80+_0x28cd85(0x1c0)+_0x2ecebd['status']+_0x28cd85(0x1d3)+_0x1c6d38+_0x28cd85(0x19f));try{let _0x53b00b;switch(_0x1c6d38[_0x28cd85(0x192)]()){case'PAID':_0x53b00b=_0x28cd85(0x1e3);break;case _0x28cd85(0x1a0):_0x53b00b=_0x28cd85(0x1f4);break;case _0x28cd85(0x199):_0x53b00b=_0x28cd85(0x200);break;case _0x28cd85(0x19d):_0x53b00b='expired';break;case _0x28cd85(0x193):_0x53b00b=_0x28cd85(0x1af);break;case _0x28cd85(0x18e):_0x53b00b=_0x28cd85(0x20a);break;default:console[_0x28cd85(0x1da)](_0x28cd85(0x1f2)+_0x1c6d38);break;}if(_0x53b00b){const _0x59744b={..._0x372b42,'shopId':_0x2ecebd[_0x28cd85(0x1b8)],'gateway':_0x2ecebd['gateway'],'createdAt':_0x2ecebd[_0x28cd85(0x1a6)],'chargebackAmount':_0xc6f0d8};await telegramBotService_1[_0x28cd85(0x208)]['sendPaymentNotification'](_0x2ecebd[_0x28cd85(0x1b8)],_0x59744b,_0x53b00b),console['log'](_0x28cd85(0x196)+_0x2ecebd['status']+'\x20->\x20'+_0x1c6d38);}}catch(_0x20242a){console[_0x28cd85(0x1d0)]('Failed\x20to\x20send\x20Telegram\x20notification\x20for\x20status\x20change:',_0x20242a);}}_0x252943[_0x28cd85(0x1fd)]({'success':!![],'message':_0x28cd85(0x1ae),'result':_0x372b42});}catch(_0xc4f81c){_0x24a560(_0xc4f81c);}},this[_0x296318(0x1fa)]=async(_0x1bb767,_0x5ee9da,_0x35b8bb)=>{const _0x85611c=_0x296318;try{const {id:_0x3f1a79}=_0x1bb767[_0x85611c(0x1a4)],_0x2aa87e=_0x1bb767[_0x85611c(0x1a5)];console[_0x85611c(0x1da)](_0x85611c(0x1b4)+_0x3f1a79+':',_0x2aa87e);const _0x490728=await this['adminService'][_0x85611c(0x1fa)](_0x3f1a79,_0x2aa87e);_0x5ee9da[_0x85611c(0x1fd)]({'success':!![],'message':'Customer\x20data\x20updated\x20successfully','result':_0x490728});}catch(_0x433c2c){_0x35b8bb(_0x433c2c);}},this[_0x296318(0x1db)]=async(_0x9fd281,_0x4dcf4f,_0x234fb6)=>{const _0x57cf82=_0x296318;try{const {id:_0x1935a5}=_0x9fd281[_0x57cf82(0x1a4)],_0x2f6d14=_0x9fd281[_0x57cf82(0x1a5)],_0x14eb24=await this[_0x57cf82(0x1ba)][_0x57cf82(0x1db)](_0x1935a5,_0x2f6d14);_0x4dcf4f[_0x57cf82(0x1fd)]({'success':!![],'message':_0x57cf82(0x18b),'result':_0x14eb24});}catch(_0x2eead0){_0x234fb6(_0x2eead0);}},this[_0x296318(0x1ea)]=async(_0x4d7091,_0x4da8c4,_0x3e436e)=>{const _0x458e42=_0x296318;try{const {id:_0x45b93f}=_0x4d7091[_0x458e42(0x1a4)],_0x5c8634=await this[_0x458e42(0x1ba)][_0x458e42(0x1ea)](_0x45b93f);_0x4da8c4[_0x458e42(0x1fd)]({'success':!![],'message':_0x458e42(0x1b5),'result':_0x5c8634});}catch(_0x3bf671){_0x3e436e(_0x3bf671);}},this[_0x296318(0x1a2)]=async(_0x39b8d2,_0x52c6a0,_0x11c9dc)=>{const _0x1f3085=_0x296318;try{const {id:_0x23521b}=_0x39b8d2['params'],_0xd27911=await this[_0x1f3085(0x1ba)][_0x1f3085(0x1a2)](_0x23521b);_0x52c6a0['json']({'success':!![],'message':_0x1f3085(0x1eb),'result':_0xd27911});}catch(_0x23723a){_0x11c9dc(_0x23723a);}},this[_0x296318(0x1c8)]=async(_0x296eb3,_0x33ddbc,_0x836bac)=>{const _0x1f562f=_0x296318;try{const {page:page=0x1,limit:limit=0x14,status:_0xd28634,search:_0x54902c}=_0x296eb3['query'],_0x145973={'page':Number(page),'limit':Number(limit),'status':_0xd28634,'search':_0x54902c},_0x2e6ddf=await this[_0x1f562f(0x1ba)][_0x1f562f(0x1d7)](_0x145973);_0x33ddbc[_0x1f562f(0x1fd)]({'success':!![],'users':_0x2e6ddf[_0x1f562f(0x1f6)],'pagination':_0x2e6ddf['pagination']});}catch(_0x620347){_0x836bac(_0x620347);}},this['getUserById']=async(_0x58921c,_0x21cb72,_0x40760d)=>{const _0x1909e2=_0x296318;try{const {id:_0x1d0ba9}=_0x58921c['params'],_0x3bbaf0=await this[_0x1909e2(0x1ba)]['getUserById'](_0x1d0ba9);if(!_0x3bbaf0)return _0x21cb72['status'](0x194)[_0x1909e2(0x1fd)]({'success':![],'message':_0x1909e2(0x195)});_0x21cb72[_0x1909e2(0x1fd)]({'success':!![],'result':_0x3bbaf0});}catch(_0x504a8b){_0x40760d(_0x504a8b);}},this[_0x296318(0x1a7)]=async(_0x5ad3fa,_0x592a14,_0x178a1b)=>{const _0x22fd4c=_0x296318;try{const _0x2fd579=_0x5ad3fa['body'],_0x1b5801=await this['adminService'][_0x22fd4c(0x1a7)](_0x2fd579);_0x592a14['status'](0xc9)[_0x22fd4c(0x1fd)]({'success':!![],'message':_0x22fd4c(0x206),'result':_0x1b5801});}catch(_0x3e3813){_0x178a1b(_0x3e3813);}},this[_0x296318(0x1b9)]=async(_0x7336f9,_0x17bd7d,_0x1bd7e0)=>{const _0x254949=_0x296318;try{const {id:_0x2824fe}=_0x7336f9[_0x254949(0x1a4)],{twoFactorToken:_0x91064d}=_0x7336f9[_0x254949(0x1a5)];await this[_0x254949(0x1ba)]['deleteUser'](_0x2824fe,_0x91064d),_0x17bd7d['json']({'success':!![],'message':_0x254949(0x1e1)});}catch(_0x362cbe){_0x1bd7e0(_0x362cbe);}},this['getShopWallets']=async(_0xd1c048,_0x398956,_0x313f1d)=>{const _0x379408=_0x296318;try{const {shopId:_0x307917}=_0xd1c048[_0x379408(0x1a4)],_0x3af1de=await this[_0x379408(0x1ba)][_0x379408(0x18f)](_0x307917);_0x398956['json']({'success':!![],'wallets':_0x3af1de});}catch(_0x2ba0c0){_0x313f1d(_0x2ba0c0);}},this[_0x296318(0x1f1)]=async(_0x32fa68,_0x458808,_0x40abfe)=>{const _0x550a93=_0x296318;try{const {shopId:_0x2f19f5}=_0x32fa68[_0x550a93(0x1a4)],_0x2b5354=await this[_0x550a93(0x1ba)]['setup2FA'](_0x2f19f5);_0x458808['json']({'success':!![],'result':_0x2b5354});}catch(_0x244f38){_0x40abfe(_0x244f38);}},this['enable2FA']=async(_0x3445c9,_0x40495c,_0x3fbf4c)=>{const _0x163cd3=_0x296318;try{const {shopId:_0x34ea39}=_0x3445c9[_0x163cd3(0x1a4)],{token:_0x4aa155}=_0x3445c9[_0x163cd3(0x1a5)];if(!_0x4aa155)return _0x40495c[_0x163cd3(0x1f9)](0x190)['json']({'success':![],'message':_0x163cd3(0x190)});const _0x899a62=await this['adminService'][_0x163cd3(0x1a9)](_0x34ea39,_0x4aa155);_0x40495c['json']({'success':!![],'message':_0x163cd3(0x1bc),'result':_0x899a62});}catch(_0x16d38c){_0x3fbf4c(_0x16d38c);}},this[_0x296318(0x19e)]=async(_0x27a198,_0x21782e,_0x2a3448)=>{const _0x4f5140=_0x296318;try{const {shopId:_0x59425b}=_0x27a198['params'];await this[_0x4f5140(0x1ba)][_0x4f5140(0x19e)](_0x59425b),_0x21782e['json']({'success':!![],'message':_0x4f5140(0x1c5)});}catch(_0x2d9c54){_0x2a3448(_0x2d9c54);}},this[_0x296318(0x209)]=async(_0x3903ce,_0x2d3b93,_0x42146e)=>{const _0xeb7e53=_0x296318;try{const _0x16dbb9=await paymentCleanupService_1['paymentCleanupService'][_0xeb7e53(0x209)]();_0x2d3b93[_0xeb7e53(0x1fd)]({'success':!![],'result':_0x16dbb9});}catch(_0x3398d5){_0x42146e(_0x3398d5);}},this[_0x296318(0x201)]=async(_0x4ae858,_0x344914,_0x34c7c7)=>{const _0x1bc5e6=_0x296318;try{console[_0x1bc5e6(0x1da)](_0x1bc5e6(0x1d5)+_0x4ae858[_0x1bc5e6(0x205)]?.['username']+'\x20('+_0x4ae858['user']?.['id']+')');const _0x805afa=await paymentCleanupService_1[_0x1bc5e6(0x18d)][_0x1bc5e6(0x1d1)]();_0x344914[_0x1bc5e6(0x1fd)]({'success':!![],'message':_0x1bc5e6(0x1ee),'result':{'processed':_0x805afa[_0x1bc5e6(0x1f7)],'failed':_0x805afa[_0x1bc5e6(0x200)],'errors':_0x805afa[_0x1bc5e6(0x1cb)]}});}catch(_0x2410ee){_0x34c7c7(_0x2410ee);}},this[_0x296318(0x203)]=async(_0x587a49,_0x42f137,_0x47e1bb)=>{const _0xd13d26=_0x296318;try{console[_0xd13d26(0x1da)](_0xd13d26(0x202)+_0x587a49[_0xd13d26(0x205)]?.[_0xd13d26(0x1ef)]+'\x20('+_0x587a49[_0xd13d26(0x205)]?.['id']+')');const _0x36cf18=await paymentCleanupService_1[_0xd13d26(0x18d)][_0xd13d26(0x203)]();_0x42f137[_0xd13d26(0x1fd)]({'success':!![],'message':'PENDING\x20payment\x20cleanup\x20completed\x20successfully','result':{'processed':_0x36cf18[_0xd13d26(0x1f7)],'failed':_0x36cf18[_0xd13d26(0x200)],'errors':_0x36cf18['errors']}});}catch(_0x630d1d){_0x47e1bb(_0x630d1d);}},this[_0x296318(0x1dd)]=async(_0x57c0b2,_0x30f47d,_0x57a93a)=>{const _0x17b618=_0x296318;try{console[_0x17b618(0x1da)](_0x17b618(0x1e6)+_0x57c0b2[_0x17b618(0x205)]?.[_0x17b618(0x1ef)]+'\x20('+_0x57c0b2[_0x17b618(0x205)]?.['id']+')');const _0x2b9396=await paymentCleanupService_1['paymentCleanupService']['getProcessingPaymentsStats'](),_0x2c1823=await paymentCleanupService_1[_0x17b618(0x18d)]['cleanupStaleProcessingPayments'](),_0x254cc4=await paymentCleanupService_1[_0x17b618(0x18d)]['cleanupStalePendingPayments'](),_0xbb13f2=await paymentCleanupService_1[_0x17b618(0x18d)][_0x17b618(0x209)]();_0x30f47d[_0x17b618(0x1fd)]({'success':!![],'message':'Payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)\x20with\x20report\x20completed\x20successfully','result':{'cleanup':{'processing':{'processed':_0x2c1823['processed'],'failed':_0x2c1823[_0x17b618(0x200)],'errors':_0x2c1823[_0x17b618(0x1cb)]},'pending':{'processed':_0x254cc4[_0x17b618(0x1f7)],'failed':_0x254cc4[_0x17b618(0x200)],'errors':_0x254cc4[_0x17b618(0x1cb)]},'total':{'processed':_0x2c1823[_0x17b618(0x1f7)]+_0x254cc4[_0x17b618(0x1f7)],'failed':_0x2c1823[_0x17b618(0x200)]+_0x254cc4[_0x17b618(0x200)],'errors':[..._0x2c1823['errors'],..._0x254cc4[_0x17b618(0x1cb)]]}},'statistics':{'before':_0x2b9396,'after':_0xbb13f2,'reduced':_0x2b9396[_0x17b618(0x19a)]-_0xbb13f2['total']}}});}catch(_0x3ebbff){_0x57a93a(_0x3ebbff);}},this[_0x296318(0x1f5)]=async(_0x1308f3,_0x56e041,_0x1b5d81)=>{const _0x46e687=_0x296318;try{const _0x5a0569=await paymentCleanupService_1[_0x46e687(0x18d)][_0x46e687(0x1f0)]();_0x56e041[_0x46e687(0x1fd)]({'success':!![],'message':'Payment\x20link\x20expiration\x20check\x20completed\x20successfully','result':{'expired':_0x5a0569[_0x46e687(0x1c4)],'errors':_0x5a0569['errors']}});}catch(_0x393efb){_0x1b5d81(_0x393efb);}},this[_0x296318(0x1ed)]=async(_0x472dc0,_0x38cec2,_0x1d092b)=>{const _0x1fe15b=_0x296318;try{const {currentPassword:_0x3d90e1,newPassword:_0x2bd19b,confirmNewPassword:_0x5f27b6,twoFactorToken:_0x5d77c7}=_0x472dc0[_0x1fe15b(0x1a5)];await this[_0x1fe15b(0x1ba)][_0x1fe15b(0x1ed)](_0x3d90e1,_0x2bd19b,_0x5f27b6,_0x5d77c7),_0x38cec2['json']({'success':!![],'message':_0x1fe15b(0x1cd)});}catch(_0x1f011f){_0x1d092b(_0x1f011f);}},this[_0x296318(0x1a8)]=async(_0x101a59,_0x57a983,_0x531d1c)=>{const _0x167774=_0x296318;try{const _0x964801=await this[_0x167774(0x1ba)][_0x167774(0x1a8)]();_0x57a983[_0x167774(0x1fd)]({'success':!![],'result':_0x964801});}catch(_0x18c7ed){_0x531d1c(_0x18c7ed);}},this[_0x296318(0x1ce)]=async(_0xb70e46,_0x40235c,_0x2f70b2)=>{const _0x10e6d9=_0x296318;try{const _0x53c115=await this[_0x10e6d9(0x1ba)][_0x10e6d9(0x1ce)]();_0x40235c['json']({'success':!![],'result':_0x53c115});}catch(_0x533d9d){_0x2f70b2(_0x533d9d);}},this[_0x296318(0x1e5)]=async(_0x454428,_0x4f4979,_0xd118ef)=>{const _0x3e48e2=_0x296318;try{const {token:_0x596a3a}=_0x454428['body'],_0x154cee=await this[_0x3e48e2(0x1ba)]['enableAdmin2FA'](_0x596a3a);_0x4f4979[_0x3e48e2(0x1fd)]({'success':!![],'result':_0x154cee});}catch(_0x4d4762){_0xd118ef(_0x4d4762);}},this[_0x296318(0x1ad)]=async(_0x5e3f8d,_0x16cabb,_0x467aa8)=>{const _0x337048=_0x296318;try{await this[_0x337048(0x1ba)][_0x337048(0x1ad)](),_0x16cabb[_0x337048(0x1fd)]({'success':!![],'message':_0x337048(0x1e7)});}catch(_0x2054ee){_0x467aa8(_0x2054ee);}},this[_0x296318(0x1ba)]=new adminService_1['AdminService'](),this[_0x296318(0x1df)]=new paymentLinkService_1[(_0x296318(0x1ab))]();}}exports[a3_0x58ec7d(0x198)]=AdminController;