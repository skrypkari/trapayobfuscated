'use strict';function a3_0x1e95(_0x5357e1,_0x206164){_0x5357e1=_0x5357e1-0x167;const _0x16bdbd=a3_0x16bd();let _0x1e957a=_0x16bdbd[_0x5357e1];return _0x1e957a;}const a3_0x2a79fb=a3_0x1e95;(function(_0xa8507,_0x36d118){const _0x4e5479=a3_0x1e95,_0x375fa3=_0xa8507();while(!![]){try{const _0x51e31b=parseInt(_0x4e5479(0x1bc))/0x1*(-parseInt(_0x4e5479(0x185))/0x2)+-parseInt(_0x4e5479(0x1b3))/0x3*(parseInt(_0x4e5479(0x1e1))/0x4)+-parseInt(_0x4e5479(0x1ab))/0x5+parseInt(_0x4e5479(0x19b))/0x6+-parseInt(_0x4e5479(0x199))/0x7+parseInt(_0x4e5479(0x1bf))/0x8*(-parseInt(_0x4e5479(0x1ea))/0x9)+parseInt(_0x4e5479(0x1e6))/0xa;if(_0x51e31b===_0x36d118)break;else _0x375fa3['push'](_0x375fa3['shift']());}catch(_0xfa9c82){_0x375fa3['push'](_0x375fa3['shift']());}}}(a3_0x16bd,0x2137c));function a3_0x16bd(){const _0x16a5a5=['ðŸ“±\x20Payment\x20','getPayoutReports','8zUviTW','username','../services/paymentLinkService','\x20with\x20data:','PROCESSING','expirePaymentLinks','Admin\x202FA\x20disabled\x20successfully','updateUser','error','Payout\x20created\x20successfully','Admin\x20access\x20confirmed','shopId','getPayoutById','__esModule','log','Payment\x20updated\x20successfully','User\x20created\x20successfully','User\x20deleted\x20successfully','Payout\x20not\x20found','../services/telegramBotService','User\x20activated\x20successfully','paymentLinkService','periodFrom,\x20periodTo,\x20and\x20gateway\x20are\x20required','ðŸŽ¯\x20[CONTROLLER]\x20Creating\x20payout\x20with\x20data:','Payment\x20not\x20found','deleteUser','suspendUser','toUpperCase','total','getUserById','summary','json','getAllPayments','paymentCleanupService','41732iUkfcE','cleanupStaleProcessingPayments','adminService','users','2FA\x20disabled\x20successfully','6735070ducRfY','month','ðŸ“ˆ\x20Admin\x20changed\x20payment\x20','disableAdmin2FA','359811TVjqkj','setupAdmin2FA','FAILED','getShopWallets','ðŸ“±\x20Skipping\x20Telegram\x20notification\x20for\x20status\x20change\x20to:\x20','getUsers','âœ…\x20Telegram\x20notification\x20sent\x20for\x20status\x20change:\x20','getPayoutStats','body','updatePayout','Payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)\x20with\x20report\x20completed\x20successfully','getMerchantsAwaitingPayout','enableAdmin2FA','getPayouts','REFUND','getProcessingPaymentsStats','User\x20suspended\x20successfully','checkAuth','cleanupStalePayments','updatePaymentStatus','query','processed','PAID','getPayments','User\x20not\x20found','ðŸ“Š\x20Admin\x20requesting\x20payout\x20reports:','../services/adminService','Failed\x20to\x20send\x20Telegram\x20notification\x20for\x20status\x20change:','Failed\x20to\x20update\x20payment\x20link\x20counter:','getPaymentById','AdminController','82xRiFtA','processing','updateCustomerData','getAllUsers','PENDING\x20payment\x20cleanup\x20completed\x20successfully','cleanupStalePendingPayments','EXPIRED','updatePayment','ðŸ§¹\x20Manual\x20PROCESSING\x20payment\x20cleanup\x20initiated\x20by\x20admin:\x20','get2FASettings','getMerchantStatistics','status','âœ…\x20Payment\x20link\x20counter\x20updated\x20for\x20payment\x20','getSystemStatistics','payouts','createdAt','refund','Payout\x20updated\x20successfully','user','getMerchantsSelection','636468xnqzwE','CHARGEBACK','1086894gidXjH','activateUser','errors','params','setup2FA','\x20->\x20','statistics','cleanupStalePaymentsWithReport','getAllPayouts','enable2FA','ðŸ“Š\x20Manual\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)\x20with\x20report\x20initiated\x20by\x20admin:\x20','Payout\x20deleted\x20successfully','createPayout','createUser',',\x20sending\x20Telegram\x20notification','expired','1310425kDZYsh','../services/paymentCleanupService','failed','deletePayout','hasPayoutHistory','getStatistics','Customer\x20data\x20updated\x20successfully','\x20to\x20PAID,\x20updating\x20payment\x20link\x20counter','69Qxaljw','2FA\x20enabled\x20successfully','User\x20updated\x20successfully','AdminService','PROCESSING\x20payment\x20cleanup\x20completed\x20successfully','pagination','disable2FA','\x20to\x20','ðŸ“Š\x20Admin\x20requesting\x20merchant\x20statistics\x20with\x20filters:','2089TKALOZ'];a3_0x16bd=function(){return _0x16a5a5;};return a3_0x16bd();}Object['defineProperty'](exports,a3_0x2a79fb(0x1cc),{'value':!![]}),exports['AdminController']=void 0x0;const adminService_1=require(a3_0x2a79fb(0x180)),paymentLinkService_1=require(a3_0x2a79fb(0x1c1)),paymentCleanupService_1=require(a3_0x2a79fb(0x1ac)),telegramBotService_1=require(a3_0x2a79fb(0x1d2));class AdminController{constructor(){const _0x3d2224=a3_0x2a79fb;this[_0x3d2224(0x177)]=async(_0x3cabcc,_0x2df5b1,_0x1bc2e2)=>{const _0x25ae74=_0x3d2224;try{const _0x196673=_0x3cabcc[_0x25ae74(0x197)];_0x2df5b1[_0x25ae74(0x1de)]({'success':!![],'message':_0x25ae74(0x1c9),'user':{'id':_0x196673?.['id'],'username':_0x196673?.[_0x25ae74(0x1c0)],'role':_0x196673?.['role']}});}catch(_0x4a3eac){_0x1bc2e2(_0x4a3eac);}},this[_0x3d2224(0x1b0)]=async(_0x363ada,_0x965df0,_0x217abe)=>{const _0x10b9e0=_0x3d2224;try{const {period:period='30d',currentDate:_0x141146}=_0x363ada[_0x10b9e0(0x17a)],_0x380cbe=await this[_0x10b9e0(0x1e3)][_0x10b9e0(0x192)](period,_0x141146);_0x965df0[_0x10b9e0(0x1de)]({'success':!![],'result':_0x380cbe});}catch(_0x2b96df){_0x217abe(_0x2b96df);}},this[_0x3d2224(0x18f)]=async(_0x1a10cb,_0x243159,_0x58ce38)=>{const _0x26ea11=_0x3d2224;try{const {shopId:_0x3bae73,period:period=_0x26ea11(0x1e7),dateFrom:_0x4b6944,dateTo:_0x526973}=_0x1a10cb[_0x26ea11(0x17a)],_0x292ed7={'shopId':_0x3bae73,'period':period,'dateFrom':_0x4b6944,'dateTo':_0x526973};console[_0x26ea11(0x1cd)](_0x26ea11(0x1bb),_0x292ed7);const _0x3d7676=await this[_0x26ea11(0x1e3)][_0x26ea11(0x18f)](_0x292ed7);_0x243159[_0x26ea11(0x1de)]({'success':!![],'result':_0x3d7676});}catch(_0x4a4ffc){_0x58ce38(_0x4a4ffc);}},this[_0x3d2224(0x1be)]=async(_0x7114cf,_0x1edb03,_0x56e07b)=>{const _0x186140=_0x3d2224;try{const {periodFrom:_0x240a79,periodTo:_0xe2b39d,gateway:_0x3f1ab5}=_0x7114cf[_0x186140(0x17a)];if(!_0x240a79||!_0xe2b39d||!_0x3f1ab5)return _0x1edb03[_0x186140(0x190)](0x190)[_0x186140(0x1de)]({'success':![],'message':_0x186140(0x1d5)});console[_0x186140(0x1cd)](_0x186140(0x17f),{'periodFrom':_0x240a79,'periodTo':_0xe2b39d,'gateway':_0x3f1ab5});const _0x42b253=await this[_0x186140(0x1e3)][_0x186140(0x1be)]({'periodFrom':_0x240a79,'periodTo':_0xe2b39d,'gateway':_0x3f1ab5});_0x1edb03['json']({'success':!![],'reports':_0x42b253});}catch(_0x9e309a){_0x56e07b(_0x9e309a);}},this[_0x3d2224(0x16d)]=async(_0x58fd2a,_0x4f7d18,_0x5d0a4b)=>{const _0x19818e=_0x3d2224;try{const _0x525dc8=await this[_0x19818e(0x1e3)]['getPayoutStats']();_0x4f7d18[_0x19818e(0x1de)]({'success':!![],'result':_0x525dc8});}catch(_0x47f929){_0x5d0a4b(_0x47f929);}},this[_0x3d2224(0x171)]=async(_0x589228,_0xa9b806,_0x16bfae)=>{const _0x37f13f=_0x3d2224;try{const {page:page=0x1,limit:limit=0x14,minAmount:_0x5db071,search:_0x559417}=_0x589228[_0x37f13f(0x17a)],_0x5c2360={'page':Number(page),'limit':Number(limit),'minAmount':_0x5db071?Number(_0x5db071):undefined,'search':_0x559417},_0x1d14ca=await this[_0x37f13f(0x1e3)][_0x37f13f(0x171)](_0x5c2360);_0xa9b806[_0x37f13f(0x1de)]({'success':!![],'merchants':_0x1d14ca['merchants'],'pagination':_0x1d14ca[_0x37f13f(0x1b8)],'summary':_0x1d14ca[_0x37f13f(0x1dd)]});}catch(_0x3d125d){_0x16bfae(_0x3d125d);}},this[_0x3d2224(0x198)]=async(_0x201b01,_0x258a5c,_0x423128)=>{const _0x3f2e16=_0x3d2224;try{const _0x172b40=_0x201b01[_0x3f2e16(0x17a)][_0x3f2e16(0x1af)]==='true',_0x54f3d5=await this[_0x3f2e16(0x1e3)][_0x3f2e16(0x198)](_0x172b40);_0x258a5c[_0x3f2e16(0x1de)]({'success':!![],'result':_0x54f3d5});}catch(_0x301b10){_0x423128(_0x301b10);}},this[_0x3d2224(0x1a7)]=async(_0x21cf65,_0x46ed17,_0x2ea844)=>{const _0xa66640=_0x3d2224;try{const _0x57f68e=_0x21cf65[_0xa66640(0x16e)];console[_0xa66640(0x1cd)](_0xa66640(0x1d6),_0x57f68e);const _0x185a53=await this[_0xa66640(0x1e3)][_0xa66640(0x1a7)](_0x57f68e);_0x46ed17[_0xa66640(0x190)](0xc9)[_0xa66640(0x1de)]({'success':!![],'message':_0xa66640(0x1c8),'result':_0x185a53});}catch(_0x2ce19a){_0x2ea844(_0x2ce19a);}},this['updatePayout']=async(_0x34f4de,_0x541828,_0x52183b)=>{const _0x65d32f=_0x3d2224;try{const {id:_0x5a8320}=_0x34f4de[_0x65d32f(0x19e)],_0x29bb0b=_0x34f4de[_0x65d32f(0x16e)];console['log']('ðŸŽ¯\x20[CONTROLLER]\x20Updating\x20payout\x20'+_0x5a8320+_0x65d32f(0x1c2),_0x29bb0b);const _0x1660ad=await this['adminService'][_0x65d32f(0x16f)](_0x5a8320,_0x29bb0b);_0x541828[_0x65d32f(0x1de)]({'success':!![],'message':_0x65d32f(0x196),'result':_0x1660ad});}catch(_0x5c3b6a){_0x52183b(_0x5c3b6a);}},this[_0x3d2224(0x173)]=async(_0x3c4805,_0x59d809,_0x859284)=>{const _0x1ff3d6=_0x3d2224;try{const {page:page=0x1,limit:limit=0x14,shopId:_0x5a5684,network:_0x174955,dateFrom:_0x46ca30,dateTo:_0x425eec,search:_0x33adab}=_0x3c4805[_0x1ff3d6(0x17a)],_0x47666e={'page':Number(page),'limit':Number(limit),'shopId':_0x5a5684,'network':_0x174955,'dateFrom':_0x46ca30,'dateTo':_0x425eec,'search':_0x33adab},_0x67a017=await this[_0x1ff3d6(0x1e3)][_0x1ff3d6(0x1a3)](_0x47666e);_0x59d809[_0x1ff3d6(0x1de)]({'success':!![],'payouts':_0x67a017[_0x1ff3d6(0x193)],'pagination':_0x67a017[_0x1ff3d6(0x1b8)]});}catch(_0xd32d3f){_0x859284(_0xd32d3f);}},this[_0x3d2224(0x1cb)]=async(_0x374b1c,_0x323799,_0x682842)=>{const _0x307d02=_0x3d2224;try{const {id:_0x244fe1}=_0x374b1c[_0x307d02(0x19e)],_0x1768af=await this[_0x307d02(0x1e3)]['getPayoutById'](_0x244fe1);if(!_0x1768af)return _0x323799['status'](0x194)[_0x307d02(0x1de)]({'success':![],'message':_0x307d02(0x1d1)});_0x323799[_0x307d02(0x1de)]({'success':!![],'result':_0x1768af});}catch(_0x24164d){_0x682842(_0x24164d);}},this[_0x3d2224(0x1ae)]=async(_0x51811e,_0x5a26ca,_0x51a58e)=>{const _0x5bef9a=_0x3d2224;try{const {id:_0x17a0cd}=_0x51811e[_0x5bef9a(0x19e)];await this['adminService'][_0x5bef9a(0x1ae)](_0x17a0cd),_0x5a26ca['json']({'success':!![],'message':_0x5bef9a(0x1a6)});}catch(_0x398223){_0x51a58e(_0x398223);}},this[_0x3d2224(0x17d)]=async(_0x711204,_0x5006d9,_0x210a9e)=>{const _0x555e88=_0x3d2224;try{const {page:page=0x1,limit:limit=0x14,status:_0x2ef13d,gateway:_0x45d7e9,shopId:_0x2f9c31,dateFrom:_0x328844,dateTo:_0x4427d8,search:_0x1f29a0,currency:_0x7f6dfb,sortBy:_0x1d1ebe,sortOrder:_0x16ceb0}=_0x711204[_0x555e88(0x17a)],_0x4b9ebc={'page':Number(page),'limit':Number(limit),'status':_0x2ef13d,'gateway':_0x45d7e9,'shopId':_0x2f9c31,'dateFrom':_0x328844,'dateTo':_0x4427d8,'search':_0x1f29a0,'currency':_0x7f6dfb,'sortBy':_0x1d1ebe,'sortOrder':_0x16ceb0},_0x1572a7=await this['adminService'][_0x555e88(0x1df)](_0x4b9ebc);_0x5006d9[_0x555e88(0x1de)]({'success':!![],'payments':_0x1572a7['payments'],'pagination':_0x1572a7[_0x555e88(0x1b8)],'statistics':_0x1572a7[_0x555e88(0x1a1)]});}catch(_0x50caaa){_0x210a9e(_0x50caaa);}},this[_0x3d2224(0x183)]=async(_0x15f34d,_0x2175b7,_0x494b7e)=>{const _0x2cb2ed=_0x3d2224;try{const {id:_0x281955}=_0x15f34d['params'],_0x17cae3=await this[_0x2cb2ed(0x1e3)][_0x2cb2ed(0x183)](_0x281955);if(!_0x17cae3)return _0x2175b7[_0x2cb2ed(0x190)](0x194)['json']({'success':![],'message':_0x2cb2ed(0x1d7)});_0x2175b7[_0x2cb2ed(0x1de)]({'success':!![],'result':_0x17cae3});}catch(_0x42f1c0){_0x494b7e(_0x42f1c0);}},this[_0x3d2224(0x18c)]=async(_0x23c125,_0x4bf10b,_0x21de05)=>{const _0x188cd9=_0x3d2224;try{const {id:_0x4e0947}=_0x23c125['params'],{status:_0x27cd40,notes:_0x2b75c5,chargebackAmount:_0x3bfdf7}=_0x23c125[_0x188cd9(0x16e)],_0x5b18bd=await this[_0x188cd9(0x1e3)][_0x188cd9(0x183)](_0x4e0947);if(!_0x5b18bd)return _0x4bf10b['status'](0x194)[_0x188cd9(0x1de)]({'success':![],'message':_0x188cd9(0x1d7)});const _0x293dbf=await this[_0x188cd9(0x1e3)][_0x188cd9(0x179)](_0x4e0947,_0x27cd40,_0x2b75c5,_0x3bfdf7);if(_0x5b18bd[_0x188cd9(0x190)]!==_0x27cd40&&_0x27cd40[_0x188cd9(0x1da)]()===_0x188cd9(0x17c)){console[_0x188cd9(0x1cd)](_0x188cd9(0x1e8)+_0x4e0947+_0x188cd9(0x1b2));try{await this[_0x188cd9(0x1d4)]['handleSuccessfulPayment'](_0x4e0947),console[_0x188cd9(0x1cd)](_0x188cd9(0x191)+_0x4e0947);}catch(_0x42d9ab){console[_0x188cd9(0x1c7)](_0x188cd9(0x182),_0x42d9ab);}}if(_0x5b18bd['status']!==_0x27cd40){console['log'](_0x188cd9(0x1bd)+_0x4e0947+'\x20status\x20changed\x20from\x20'+_0x5b18bd[_0x188cd9(0x190)]+_0x188cd9(0x1ba)+_0x27cd40+_0x188cd9(0x1a9));try{let _0xb2cbdd;switch(_0x27cd40['toUpperCase']()){case _0x188cd9(0x17c):_0xb2cbdd='paid';break;case _0x188cd9(0x1c3):_0xb2cbdd=_0x188cd9(0x186);break;case _0x188cd9(0x168):_0xb2cbdd=_0x188cd9(0x1ad);break;case _0x188cd9(0x18b):_0xb2cbdd=_0x188cd9(0x1aa);break;case _0x188cd9(0x174):_0xb2cbdd=_0x188cd9(0x195);break;case _0x188cd9(0x19a):_0xb2cbdd='chargeback';break;default:console[_0x188cd9(0x1cd)](_0x188cd9(0x16a)+_0x27cd40);break;}if(_0xb2cbdd){const _0xc96c32={..._0x293dbf,'shopId':_0x5b18bd['shopId'],'gateway':_0x5b18bd['gateway'],'createdAt':_0x5b18bd[_0x188cd9(0x194)],'chargebackAmount':_0x3bfdf7};await telegramBotService_1['telegramBotService']['sendPaymentNotification'](_0x5b18bd[_0x188cd9(0x1ca)],_0xc96c32,_0xb2cbdd),console[_0x188cd9(0x1cd)](_0x188cd9(0x16c)+_0x5b18bd[_0x188cd9(0x190)]+_0x188cd9(0x1a0)+_0x27cd40);}}catch(_0x577374){console[_0x188cd9(0x1c7)](_0x188cd9(0x181),_0x577374);}}_0x4bf10b[_0x188cd9(0x1de)]({'success':!![],'message':_0x188cd9(0x1ce),'result':_0x293dbf});}catch(_0x415f3b){_0x21de05(_0x415f3b);}},this[_0x3d2224(0x187)]=async(_0x3ca1e5,_0x14accb,_0x3b3737)=>{const _0x494730=_0x3d2224;try{const {id:_0x3be2ef}=_0x3ca1e5[_0x494730(0x19e)],_0x189075=_0x3ca1e5['body'];console[_0x494730(0x1cd)]('ðŸ”„\x20Admin\x20updating\x20customer\x20data\x20for\x20payment\x20'+_0x3be2ef+':',_0x189075);const _0x98b895=await this[_0x494730(0x1e3)]['updateCustomerData'](_0x3be2ef,_0x189075);_0x14accb['json']({'success':!![],'message':_0x494730(0x1b1),'result':_0x98b895});}catch(_0x6ce5b8){_0x3b3737(_0x6ce5b8);}},this[_0x3d2224(0x1c6)]=async(_0x88b1f8,_0x22f550,_0x54e3ea)=>{const _0x55a825=_0x3d2224;try{const {id:_0x2c80ba}=_0x88b1f8['params'],_0x93869=_0x88b1f8['body'],_0x150887=await this['adminService'][_0x55a825(0x1c6)](_0x2c80ba,_0x93869);_0x22f550[_0x55a825(0x1de)]({'success':!![],'message':_0x55a825(0x1b5),'result':_0x150887});}catch(_0x3282bb){_0x54e3ea(_0x3282bb);}},this['suspendUser']=async(_0x1311f6,_0x58f004,_0xa52338)=>{const _0x4aabc6=_0x3d2224;try{const {id:_0x10fe54}=_0x1311f6[_0x4aabc6(0x19e)],_0xa8f6b4=await this[_0x4aabc6(0x1e3)][_0x4aabc6(0x1d9)](_0x10fe54);_0x58f004['json']({'success':!![],'message':_0x4aabc6(0x176),'result':_0xa8f6b4});}catch(_0x5da24d){_0xa52338(_0x5da24d);}},this['activateUser']=async(_0x1ec9d7,_0x1483f5,_0x39a5fd)=>{const _0x19ab1e=_0x3d2224;try{const {id:_0x400a83}=_0x1ec9d7[_0x19ab1e(0x19e)],_0x4e6210=await this[_0x19ab1e(0x1e3)][_0x19ab1e(0x19c)](_0x400a83);_0x1483f5[_0x19ab1e(0x1de)]({'success':!![],'message':_0x19ab1e(0x1d3),'result':_0x4e6210});}catch(_0x537db3){_0x39a5fd(_0x537db3);}},this[_0x3d2224(0x16b)]=async(_0x4b3e75,_0x3972e6,_0x4e6503)=>{const _0x22671a=_0x3d2224;try{const {page:page=0x1,limit:limit=0x14,status:_0x43b711,search:_0x221b1f}=_0x4b3e75[_0x22671a(0x17a)],_0x1dd74e={'page':Number(page),'limit':Number(limit),'status':_0x43b711,'search':_0x221b1f},_0x49015a=await this[_0x22671a(0x1e3)][_0x22671a(0x188)](_0x1dd74e);_0x3972e6[_0x22671a(0x1de)]({'success':!![],'users':_0x49015a[_0x22671a(0x1e4)],'pagination':_0x49015a[_0x22671a(0x1b8)]});}catch(_0x339057){_0x4e6503(_0x339057);}},this['getUserById']=async(_0x2652be,_0x1c4bc7,_0x40af6f)=>{const _0x2da6ee=_0x3d2224;try{const {id:_0x13012b}=_0x2652be[_0x2da6ee(0x19e)],_0x3ed582=await this['adminService'][_0x2da6ee(0x1dc)](_0x13012b);if(!_0x3ed582)return _0x1c4bc7[_0x2da6ee(0x190)](0x194)[_0x2da6ee(0x1de)]({'success':![],'message':_0x2da6ee(0x17e)});_0x1c4bc7[_0x2da6ee(0x1de)]({'success':!![],'result':_0x3ed582});}catch(_0x405acc){_0x40af6f(_0x405acc);}},this[_0x3d2224(0x1a8)]=async(_0x46daaa,_0x4ada25,_0x7b87bd)=>{const _0x4590fe=_0x3d2224;try{const _0x51613f=_0x46daaa[_0x4590fe(0x16e)],_0x34669a=await this[_0x4590fe(0x1e3)][_0x4590fe(0x1a8)](_0x51613f);_0x4ada25[_0x4590fe(0x190)](0xc9)[_0x4590fe(0x1de)]({'success':!![],'message':_0x4590fe(0x1cf),'result':_0x34669a});}catch(_0x2039a2){_0x7b87bd(_0x2039a2);}},this['deleteUser']=async(_0x1a13d8,_0x34acd8,_0x2d4ef8)=>{const _0x4a5e6b=_0x3d2224;try{const {id:_0x5ea129}=_0x1a13d8[_0x4a5e6b(0x19e)],{twoFactorToken:_0x8eec06}=_0x1a13d8[_0x4a5e6b(0x16e)];await this[_0x4a5e6b(0x1e3)][_0x4a5e6b(0x1d8)](_0x5ea129,_0x8eec06),_0x34acd8[_0x4a5e6b(0x1de)]({'success':!![],'message':_0x4a5e6b(0x1d0)});}catch(_0x3b4fc6){_0x2d4ef8(_0x3b4fc6);}},this[_0x3d2224(0x169)]=async(_0x44dd7b,_0x929f62,_0x5a132c)=>{const _0x2b5734=_0x3d2224;try{const {shopId:_0x1430d0}=_0x44dd7b[_0x2b5734(0x19e)],_0x3c78d3=await this[_0x2b5734(0x1e3)]['getShopWallets'](_0x1430d0);_0x929f62['json']({'success':!![],'wallets':_0x3c78d3});}catch(_0x1574b5){_0x5a132c(_0x1574b5);}},this[_0x3d2224(0x19f)]=async(_0x56077c,_0x5703e5,_0x5a386f)=>{const _0x496490=_0x3d2224;try{const {shopId:_0x5d4de8}=_0x56077c[_0x496490(0x19e)],_0x22a486=await this['adminService'][_0x496490(0x19f)](_0x5d4de8);_0x5703e5['json']({'success':!![],'result':_0x22a486});}catch(_0x20395e){_0x5a386f(_0x20395e);}},this[_0x3d2224(0x1a4)]=async(_0x5e7faf,_0x5662df,_0x54a66f)=>{const _0x4e8968=_0x3d2224;try{const {shopId:_0x41da3f}=_0x5e7faf[_0x4e8968(0x19e)],{token:_0x3b676a}=_0x5e7faf['body'];if(!_0x3b676a)return _0x5662df[_0x4e8968(0x190)](0x190)[_0x4e8968(0x1de)]({'success':![],'message':'Token\x20is\x20required'});const _0x6f650f=await this[_0x4e8968(0x1e3)][_0x4e8968(0x1a4)](_0x41da3f,_0x3b676a);_0x5662df[_0x4e8968(0x1de)]({'success':!![],'message':_0x4e8968(0x1b4),'result':_0x6f650f});}catch(_0x501f0d){_0x54a66f(_0x501f0d);}},this[_0x3d2224(0x1b9)]=async(_0x20788f,_0x142995,_0x1ca6e5)=>{const _0x3b74d0=_0x3d2224;try{const {shopId:_0x394920}=_0x20788f[_0x3b74d0(0x19e)];await this['adminService'][_0x3b74d0(0x1b9)](_0x394920),_0x142995['json']({'success':!![],'message':_0x3b74d0(0x1e5)});}catch(_0x56700d){_0x1ca6e5(_0x56700d);}},this[_0x3d2224(0x175)]=async(_0x1b00cc,_0x463abb,_0x3f8eca)=>{const _0x24dadc=_0x3d2224;try{const _0x1df1e3=await paymentCleanupService_1[_0x24dadc(0x1e0)][_0x24dadc(0x175)]();_0x463abb['json']({'success':!![],'result':_0x1df1e3});}catch(_0x129206){_0x3f8eca(_0x129206);}},this[_0x3d2224(0x178)]=async(_0xff17f,_0x7bde30,_0x14c365)=>{const _0xc89db7=_0x3d2224;try{console[_0xc89db7(0x1cd)](_0xc89db7(0x18d)+_0xff17f[_0xc89db7(0x197)]?.[_0xc89db7(0x1c0)]+'\x20('+_0xff17f[_0xc89db7(0x197)]?.['id']+')');const _0x4a773a=await paymentCleanupService_1[_0xc89db7(0x1e0)][_0xc89db7(0x1e2)]();_0x7bde30['json']({'success':!![],'message':_0xc89db7(0x1b7),'result':{'processed':_0x4a773a[_0xc89db7(0x17b)],'failed':_0x4a773a[_0xc89db7(0x1ad)],'errors':_0x4a773a['errors']}});}catch(_0x4e2b71){_0x14c365(_0x4e2b71);}},this[_0x3d2224(0x18a)]=async(_0x547d8b,_0xf597c0,_0x450579)=>{const _0x350668=_0x3d2224;try{console[_0x350668(0x1cd)]('â°\x20Manual\x20PENDING\x20payment\x20cleanup\x20initiated\x20by\x20admin:\x20'+_0x547d8b[_0x350668(0x197)]?.[_0x350668(0x1c0)]+'\x20('+_0x547d8b[_0x350668(0x197)]?.['id']+')');const _0xcbb691=await paymentCleanupService_1['paymentCleanupService'][_0x350668(0x18a)]();_0xf597c0[_0x350668(0x1de)]({'success':!![],'message':_0x350668(0x189),'result':{'processed':_0xcbb691[_0x350668(0x17b)],'failed':_0xcbb691[_0x350668(0x1ad)],'errors':_0xcbb691['errors']}});}catch(_0x3564f2){_0x450579(_0x3564f2);}},this[_0x3d2224(0x1a2)]=async(_0x5d1176,_0x2e03a5,_0x30fb2a)=>{const _0x1e1de2=_0x3d2224;try{console[_0x1e1de2(0x1cd)](_0x1e1de2(0x1a5)+_0x5d1176[_0x1e1de2(0x197)]?.[_0x1e1de2(0x1c0)]+'\x20('+_0x5d1176['user']?.['id']+')');const _0x31a9bf=await paymentCleanupService_1[_0x1e1de2(0x1e0)]['getProcessingPaymentsStats'](),_0x5c7088=await paymentCleanupService_1['paymentCleanupService'][_0x1e1de2(0x1e2)](),_0x16779e=await paymentCleanupService_1[_0x1e1de2(0x1e0)][_0x1e1de2(0x18a)](),_0x15d903=await paymentCleanupService_1[_0x1e1de2(0x1e0)]['getProcessingPaymentsStats']();_0x2e03a5[_0x1e1de2(0x1de)]({'success':!![],'message':_0x1e1de2(0x170),'result':{'cleanup':{'processing':{'processed':_0x5c7088[_0x1e1de2(0x17b)],'failed':_0x5c7088[_0x1e1de2(0x1ad)],'errors':_0x5c7088['errors']},'pending':{'processed':_0x16779e[_0x1e1de2(0x17b)],'failed':_0x16779e['failed'],'errors':_0x16779e[_0x1e1de2(0x19d)]},'total':{'processed':_0x5c7088[_0x1e1de2(0x17b)]+_0x16779e[_0x1e1de2(0x17b)],'failed':_0x5c7088[_0x1e1de2(0x1ad)]+_0x16779e['failed'],'errors':[..._0x5c7088[_0x1e1de2(0x19d)],..._0x16779e[_0x1e1de2(0x19d)]]}},'statistics':{'before':_0x31a9bf,'after':_0x15d903,'reduced':_0x31a9bf['total']-_0x15d903[_0x1e1de2(0x1db)]}}});}catch(_0x38b14e){_0x30fb2a(_0x38b14e);}},this[_0x3d2224(0x1c4)]=async(_0x58458f,_0x1dc58c,_0x3bac6)=>{const _0x47dea8=_0x3d2224;try{const _0x569556=await paymentCleanupService_1[_0x47dea8(0x1e0)]['expireSinglePaymentLinks']();_0x1dc58c['json']({'success':!![],'message':'Payment\x20link\x20expiration\x20check\x20completed\x20successfully','result':{'expired':_0x569556[_0x47dea8(0x1aa)],'errors':_0x569556[_0x47dea8(0x19d)]}});}catch(_0x498143){_0x3bac6(_0x498143);}},this['changeAdminPassword']=async(_0xf84bbd,_0x51bca5,_0x3f6c7b)=>{const _0x502a38=_0x3d2224;try{const {currentPassword:_0x5a2ae3,newPassword:_0x3682f3,confirmNewPassword:_0xbe6c2b,twoFactorToken:_0x2d3c8c}=_0xf84bbd[_0x502a38(0x16e)];await this[_0x502a38(0x1e3)]['changeAdminPassword'](_0x5a2ae3,_0x3682f3,_0xbe6c2b,_0x2d3c8c),_0x51bca5[_0x502a38(0x1de)]({'success':!![],'message':'Admin\x20password\x20changed\x20successfully'});}catch(_0x5dfa9a){_0x3f6c7b(_0x5dfa9a);}},this[_0x3d2224(0x18e)]=async(_0x4fa0f8,_0x57f32f,_0x5ae18e)=>{const _0x408e30=_0x3d2224;try{const _0x4a7428=await this[_0x408e30(0x1e3)][_0x408e30(0x18e)]();_0x57f32f[_0x408e30(0x1de)]({'success':!![],'result':_0x4a7428});}catch(_0x265387){_0x5ae18e(_0x265387);}},this[_0x3d2224(0x167)]=async(_0x27e4e0,_0x42f53d,_0x1c7b5e)=>{const _0xd03476=_0x3d2224;try{const _0x164d26=await this[_0xd03476(0x1e3)][_0xd03476(0x167)]();_0x42f53d['json']({'success':!![],'result':_0x164d26});}catch(_0x31cab8){_0x1c7b5e(_0x31cab8);}},this['enableAdmin2FA']=async(_0x15cdd2,_0x390f8,_0x29d620)=>{const _0x506aa6=_0x3d2224;try{const {token:_0x4d58e4}=_0x15cdd2[_0x506aa6(0x16e)],_0x31dc8c=await this[_0x506aa6(0x1e3)][_0x506aa6(0x172)](_0x4d58e4);_0x390f8[_0x506aa6(0x1de)]({'success':!![],'result':_0x31dc8c});}catch(_0xb344c7){_0x29d620(_0xb344c7);}},this[_0x3d2224(0x1e9)]=async(_0x28eabd,_0xdcd849,_0x3467a0)=>{const _0x476cc7=_0x3d2224;try{await this[_0x476cc7(0x1e3)]['disableAdmin2FA'](),_0xdcd849[_0x476cc7(0x1de)]({'success':!![],'message':_0x476cc7(0x1c5)});}catch(_0x148cc0){_0x3467a0(_0x148cc0);}},this[_0x3d2224(0x1e3)]=new adminService_1[(_0x3d2224(0x1b6))](),this[_0x3d2224(0x1d4)]=new paymentLinkService_1['PaymentLinkService']();}}exports[a3_0x2a79fb(0x184)]=AdminController;