'use strict';const a3_0x1ee828=a3_0x5c2f;(function(_0x36f88b,_0x36248c){const _0x30db0f=a3_0x5c2f,_0x2ef232=_0x36f88b();while(!![]){try{const _0x240104=parseInt(_0x30db0f(0x242))/0x1+parseInt(_0x30db0f(0x243))/0x2*(-parseInt(_0x30db0f(0x21d))/0x3)+parseInt(_0x30db0f(0x20d))/0x4+-parseInt(_0x30db0f(0x201))/0x5+-parseInt(_0x30db0f(0x23e))/0x6*(-parseInt(_0x30db0f(0x1fe))/0x7)+parseInt(_0x30db0f(0x21a))/0x8*(parseInt(_0x30db0f(0x1f3))/0x9)+-parseInt(_0x30db0f(0x22f))/0xa;if(_0x240104===_0x36248c)break;else _0x2ef232['push'](_0x2ef232['shift']());}catch(_0x1248a4){_0x2ef232['push'](_0x2ef232['shift']());}}}(a3_0x3794,0xdf6ed));function a3_0x5c2f(_0xa670aa,_0x5df181){_0xa670aa=_0xa670aa-0x1d4;const _0x3794f1=a3_0x3794();let _0x5c2f90=_0x3794f1[_0xa670aa];return _0x5c2f90;}function a3_0x3794(){const _0x2ecf4e=['changeAdminPassword','updateCustomerData','disable2FA','User\x20not\x20found','getPayoutStats','params','activateUser','periodFrom,\x20periodTo,\x20and\x20gateway\x20are\x20required','cleanupStaleProcessingPayments','getAllUsers','â°\x20Manual\x20PENDING\x20payment\x20cleanup\x20initiated\x20by\x20admin:\x20','month','shopId\x20and\x20amount\x20are\x20required','12078050QArmNm','CHARGEBACK','cleanupStalePaymentsWithReport','REFUND','Balance\x20deposited\x20successfully','Failed\x20to\x20update\x20payment\x20link\x20counter:','error','setup2FA','getPayoutById','getUsers','sendPaymentNotification','body','AdminService','Payout\x20updated\x20successfully','getPaymentById','540234CledKE','telegramBotService','createUser','PROCESSING\x20payment\x20cleanup\x20completed\x20successfully','1435003ObSfag','878VenHrc','errors','EXPIRED','gateway','../services/paymentCleanupService','ðŸ§¹\x20Manual\x20PROCESSING\x20payment\x20cleanup\x20initiated\x20by\x20admin:\x20','disableAdmin2FA','getPayments','../services/paymentLinkService','processing','getPayoutReports','paymentLinkService','defineProperty','Customer\x20data\x20updated\x20successfully','PaymentLinkService','ðŸŽ¯\x20[CONTROLLER]\x20Creating\x20payout\x20with\x20data:','AdminController','Payout\x20deleted\x20successfully','payouts','../services/telegramBotService','updateUser','getUserById','summary','Payout\x20created\x20successfully','expired','ðŸ“Š\x20Manual\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)\x20with\x20report\x20initiated\x20by\x20admin:\x20','processed','enableAdmin2FA','enable2FA','Admin\x20access\x20confirmed','toUpperCase','\x20to\x20','suspendUser','Token\x20is\x20required','pagination','paid','createdAt','statistics','PAID','getProcessingPaymentsStats','Amount\x20must\x20be\x20greater\x20than\x200','query','username','json','user','__esModule','adminService','expirePaymentLinks','true','shopId','getAllPayouts','User\x20activated\x20successfully','ðŸ“±\x20Payment\x20','expireSinglePaymentLinks','cleanupStalePendingPayments','294930Jwgejy','getMerchantsAwaitingPayout','ðŸ“±\x20Skipping\x20Telegram\x20notification\x20for\x20status\x20change\x20to:\x20','getMerchantStatistics','updatePayout','total','failed','paymentCleanupService','Failed\x20to\x20send\x20Telegram\x20notification\x20for\x20status\x20change:','ðŸ“Š\x20Admin\x20requesting\x20merchant\x20statistics\x20with\x20filters:','deleteUser','126cruiJE','get2FASettings','Payout\x20not\x20found','6810130OprqyP','setupAdmin2FA','status','refund','\x20to\x20PAID,\x20updating\x20payment\x20link\x20counter','User\x20deleted\x20successfully','createPayout','updatePaymentStatus','ðŸ“Š\x20Admin\x20requesting\x20payout\x20reports:','\x20status\x20changed\x20from\x20','payments','FAILED','2876808JZwIiC','Payment\x20link\x20expiration\x20check\x20completed\x20successfully','../services/adminService','âœ…\x20Payment\x20link\x20counter\x20updated\x20for\x20payment\x20','getMerchantsSelection','Payment\x20not\x20found','getAllPayments','getShopWallets','getPayouts','User\x20created\x20successfully','role','Payment\x20updated\x20successfully','ðŸŽ¯\x20[CONTROLLER]\x20Updating\x20payout\x20','8uzNzuN','chargeback','log','2205IlOQJj','deletePayout','User\x20suspended\x20successfully','updatePayment','depositBalance'];a3_0x3794=function(){return _0x2ecf4e;};return a3_0x3794();}Object[a3_0x1ee828(0x24f)](exports,a3_0x1ee828(0x1e9),{'value':!![]}),exports[a3_0x1ee828(0x253)]=void 0x0;const adminService_1=require(a3_0x1ee828(0x20f)),paymentLinkService_1=require(a3_0x1ee828(0x24b)),paymentCleanupService_1=require(a3_0x1ee828(0x247)),telegramBotService_1=require(a3_0x1ee828(0x256));class AdminController{constructor(){const _0x199289=a3_0x1ee828;this['checkAuth']=async(_0x5a32ef,_0x1f0544,_0x539b4e)=>{const _0x3c6005=a3_0x5c2f;try{const _0x307347=_0x5a32ef[_0x3c6005(0x1e8)];_0x1f0544[_0x3c6005(0x1e7)]({'success':!![],'message':_0x3c6005(0x1d9),'user':{'id':_0x307347?.['id'],'username':_0x307347?.[_0x3c6005(0x1e6)],'role':_0x307347?.[_0x3c6005(0x217)]}});}catch(_0x49448e){_0x539b4e(_0x49448e);}},this['getStatistics']=async(_0x34bd77,_0x1c0736,_0x573710)=>{const _0x44e877=a3_0x5c2f;try{const {period:period='30d',currentDate:_0x335fb5}=_0x34bd77[_0x44e877(0x1e5)],_0x73610c=await this[_0x44e877(0x1ea)]['getSystemStatistics'](period,_0x335fb5);_0x1c0736[_0x44e877(0x1e7)]({'success':!![],'result':_0x73610c});}catch(_0x674a08){_0x573710(_0x674a08);}},this['getMerchantStatistics']=async(_0x32042a,_0x1fa6f0,_0x5c53ad)=>{const _0x321d8a=a3_0x5c2f;try{const {shopId:_0x2422fc,period:period=_0x321d8a(0x22d),dateFrom:_0x557a98,dateTo:_0x4ac6c6}=_0x32042a[_0x321d8a(0x1e5)],_0x41ff04={'shopId':_0x2422fc,'period':period,'dateFrom':_0x557a98,'dateTo':_0x4ac6c6};console[_0x321d8a(0x21c)](_0x321d8a(0x1fc),_0x41ff04);const _0x3b14a6=await this[_0x321d8a(0x1ea)][_0x321d8a(0x1f6)](_0x41ff04);_0x1fa6f0[_0x321d8a(0x1e7)]({'success':!![],'result':_0x3b14a6});}catch(_0x3afe3c){_0x5c53ad(_0x3afe3c);}},this[_0x199289(0x24d)]=async(_0x398e91,_0x4cbedd,_0x373261)=>{const _0x2e43a1=_0x199289;try{const {periodFrom:_0x4b8872,periodTo:_0x4fb5d9,gateway:_0x184156}=_0x398e91['query'];if(!_0x4b8872||!_0x4fb5d9||!_0x184156)return _0x4cbedd[_0x2e43a1(0x203)](0x190)[_0x2e43a1(0x1e7)]({'success':![],'message':_0x2e43a1(0x229)});console['log'](_0x2e43a1(0x209),{'periodFrom':_0x4b8872,'periodTo':_0x4fb5d9,'gateway':_0x184156});const _0x482398=await this['adminService'][_0x2e43a1(0x24d)]({'periodFrom':_0x4b8872,'periodTo':_0x4fb5d9,'gateway':_0x184156});_0x4cbedd[_0x2e43a1(0x1e7)]({'success':!![],'reports':_0x482398});}catch(_0x490b59){_0x373261(_0x490b59);}},this[_0x199289(0x226)]=async(_0x45d4b1,_0x247980,_0x53f7e5)=>{const _0x4506a3=_0x199289;try{const _0x7f9a09=await this[_0x4506a3(0x1ea)]['getPayoutStats']();_0x247980[_0x4506a3(0x1e7)]({'success':!![],'result':_0x7f9a09});}catch(_0x45a18b){_0x53f7e5(_0x45a18b);}},this[_0x199289(0x1f4)]=async(_0x63c898,_0x90829a,_0x509bd2)=>{const _0xfc6a39=_0x199289;try{const {page:page=0x1,limit:limit=0x14,minAmount:_0x3df646,search:_0x285bc2}=_0x63c898[_0xfc6a39(0x1e5)],_0x554d38={'page':Number(page),'limit':Number(limit),'minAmount':_0x3df646?Number(_0x3df646):undefined,'search':_0x285bc2},_0x280ff7=await this[_0xfc6a39(0x1ea)]['getMerchantsAwaitingPayout'](_0x554d38);_0x90829a[_0xfc6a39(0x1e7)]({'success':!![],'merchants':_0x280ff7['merchants'],'pagination':_0x280ff7[_0xfc6a39(0x1de)],'summary':_0x280ff7[_0xfc6a39(0x259)]});}catch(_0x262952){_0x509bd2(_0x262952);}},this[_0x199289(0x211)]=async(_0x566f5c,_0x2cbb7b,_0x261e60)=>{const _0x55e728=_0x199289;try{const _0x126f81=_0x566f5c[_0x55e728(0x1e5)]['hasPayoutHistory']===_0x55e728(0x1ec),_0x4e87a3=await this[_0x55e728(0x1ea)][_0x55e728(0x211)](_0x126f81);_0x2cbb7b[_0x55e728(0x1e7)]({'success':!![],'result':_0x4e87a3});}catch(_0x264198){_0x261e60(_0x264198);}},this[_0x199289(0x207)]=async(_0x2eb768,_0x1c077b,_0x4894e0)=>{const _0x35e799=_0x199289;try{const _0x151455=_0x2eb768[_0x35e799(0x23a)];console[_0x35e799(0x21c)](_0x35e799(0x252),_0x151455);const _0x8c6e47=await this[_0x35e799(0x1ea)][_0x35e799(0x207)](_0x151455);_0x1c077b[_0x35e799(0x203)](0xc9)[_0x35e799(0x1e7)]({'success':!![],'message':_0x35e799(0x25a),'result':_0x8c6e47});}catch(_0x8ee243){_0x4894e0(_0x8ee243);}},this[_0x199289(0x1f7)]=async(_0x1c3bc2,_0x30c98a,_0x379c60)=>{const _0x44596b=_0x199289;try{const {id:_0x4f964e}=_0x1c3bc2['params'],_0x28b4a0=_0x1c3bc2['body'];console[_0x44596b(0x21c)](_0x44596b(0x219)+_0x4f964e+'\x20with\x20data:',_0x28b4a0);const _0x2aefe2=await this[_0x44596b(0x1ea)][_0x44596b(0x1f7)](_0x4f964e,_0x28b4a0);_0x30c98a[_0x44596b(0x1e7)]({'success':!![],'message':_0x44596b(0x23c),'result':_0x2aefe2});}catch(_0x314536){_0x379c60(_0x314536);}},this[_0x199289(0x215)]=async(_0x59d18d,_0x595b19,_0x258fad)=>{const _0x1c3e07=_0x199289;try{const {page:page=0x1,limit:limit=0x14,shopId:_0x3d010c,network:_0x4930a8,dateFrom:_0x3f3726,dateTo:_0x4fe9c7,search:_0x401eac}=_0x59d18d['query'],_0x112476={'page':Number(page),'limit':Number(limit),'shopId':_0x3d010c,'network':_0x4930a8,'dateFrom':_0x3f3726,'dateTo':_0x4fe9c7,'search':_0x401eac},_0x12713a=await this[_0x1c3e07(0x1ea)][_0x1c3e07(0x1ee)](_0x112476);_0x595b19[_0x1c3e07(0x1e7)]({'success':!![],'payouts':_0x12713a[_0x1c3e07(0x255)],'pagination':_0x12713a[_0x1c3e07(0x1de)]});}catch(_0x2a5271){_0x258fad(_0x2a5271);}},this[_0x199289(0x237)]=async(_0x1081f9,_0x285b52,_0x74af3)=>{const _0x65562c=_0x199289;try{const {id:_0xe86bf8}=_0x1081f9[_0x65562c(0x227)],_0x4c2777=await this[_0x65562c(0x1ea)][_0x65562c(0x237)](_0xe86bf8);if(!_0x4c2777)return _0x285b52[_0x65562c(0x203)](0x194)['json']({'success':![],'message':_0x65562c(0x200)});_0x285b52[_0x65562c(0x1e7)]({'success':!![],'result':_0x4c2777});}catch(_0x13b103){_0x74af3(_0x13b103);}},this[_0x199289(0x21e)]=async(_0x3c8d2a,_0x57f6b6,_0x27a6db)=>{const _0x1fb10a=_0x199289;try{const {id:_0xb5e510}=_0x3c8d2a[_0x1fb10a(0x227)];await this[_0x1fb10a(0x1ea)][_0x1fb10a(0x21e)](_0xb5e510),_0x57f6b6[_0x1fb10a(0x1e7)]({'success':!![],'message':_0x1fb10a(0x254)});}catch(_0x50ff1b){_0x27a6db(_0x50ff1b);}},this[_0x199289(0x24a)]=async(_0x2a4531,_0x2f7fd7,_0x2d9dd0)=>{const _0x5e2516=_0x199289;try{const {page:page=0x1,limit:limit=0x14,status:_0x2594fe,gateway:_0x289b2,shopId:_0x144829,dateFrom:_0x4a6d2b,dateTo:_0x51c6ac,search:_0x4112a7,currency:_0x5ccc0f,sortBy:_0x58e27e,sortOrder:_0x88f866}=_0x2a4531[_0x5e2516(0x1e5)],_0x1c536f={'page':Number(page),'limit':Number(limit),'status':_0x2594fe,'gateway':_0x289b2,'shopId':_0x144829,'dateFrom':_0x4a6d2b,'dateTo':_0x51c6ac,'search':_0x4112a7,'currency':_0x5ccc0f,'sortBy':_0x58e27e,'sortOrder':_0x88f866},_0x11fd93=await this['adminService'][_0x5e2516(0x213)](_0x1c536f);_0x2f7fd7[_0x5e2516(0x1e7)]({'success':!![],'payments':_0x11fd93[_0x5e2516(0x20b)],'pagination':_0x11fd93[_0x5e2516(0x1de)],'statistics':_0x11fd93[_0x5e2516(0x1e1)]});}catch(_0xa305fa){_0x2d9dd0(_0xa305fa);}},this['getPaymentById']=async(_0x1a8187,_0x478ee9,_0x17765e)=>{const _0x1120b9=_0x199289;try{const {id:_0x41d335}=_0x1a8187[_0x1120b9(0x227)],_0x33683d=await this[_0x1120b9(0x1ea)]['getPaymentById'](_0x41d335);if(!_0x33683d)return _0x478ee9[_0x1120b9(0x203)](0x194)[_0x1120b9(0x1e7)]({'success':![],'message':_0x1120b9(0x212)});_0x478ee9[_0x1120b9(0x1e7)]({'success':!![],'result':_0x33683d});}catch(_0x547554){_0x17765e(_0x547554);}},this[_0x199289(0x220)]=async(_0x32b382,_0x373b8a,_0x13d475)=>{const _0x2ef0ce=_0x199289;try{const {id:_0x4bbdf3}=_0x32b382[_0x2ef0ce(0x227)],{status:_0x22b81a,notes:_0x437255,chargebackAmount:_0x54d931}=_0x32b382[_0x2ef0ce(0x23a)],_0x5f175d=await this[_0x2ef0ce(0x1ea)][_0x2ef0ce(0x23d)](_0x4bbdf3);if(!_0x5f175d)return _0x373b8a[_0x2ef0ce(0x203)](0x194)[_0x2ef0ce(0x1e7)]({'success':![],'message':_0x2ef0ce(0x212)});const _0x2fbbae=await this['adminService'][_0x2ef0ce(0x208)](_0x4bbdf3,_0x22b81a,_0x437255,_0x54d931);if(_0x5f175d[_0x2ef0ce(0x203)]!==_0x22b81a&&_0x22b81a[_0x2ef0ce(0x1da)]()===_0x2ef0ce(0x1e2)){console['log']('ðŸ“ˆ\x20Admin\x20changed\x20payment\x20'+_0x4bbdf3+_0x2ef0ce(0x205));try{await this[_0x2ef0ce(0x24e)]['handleSuccessfulPayment'](_0x4bbdf3),console[_0x2ef0ce(0x21c)](_0x2ef0ce(0x210)+_0x4bbdf3);}catch(_0x2f957c){console['error'](_0x2ef0ce(0x234),_0x2f957c);}}if(_0x5f175d[_0x2ef0ce(0x203)]!==_0x22b81a){console[_0x2ef0ce(0x21c)](_0x2ef0ce(0x1f0)+_0x4bbdf3+_0x2ef0ce(0x20a)+_0x5f175d['status']+_0x2ef0ce(0x1db)+_0x22b81a+',\x20sending\x20Telegram\x20notification');try{let _0x32cf1d;switch(_0x22b81a[_0x2ef0ce(0x1da)]()){case _0x2ef0ce(0x1e2):_0x32cf1d=_0x2ef0ce(0x1df);break;case'PROCESSING':_0x32cf1d=_0x2ef0ce(0x24c);break;case _0x2ef0ce(0x20c):_0x32cf1d='failed';break;case _0x2ef0ce(0x245):_0x32cf1d=_0x2ef0ce(0x1d4);break;case _0x2ef0ce(0x232):_0x32cf1d=_0x2ef0ce(0x204);break;case _0x2ef0ce(0x230):_0x32cf1d=_0x2ef0ce(0x21b);break;default:console[_0x2ef0ce(0x21c)](_0x2ef0ce(0x1f5)+_0x22b81a);break;}if(_0x32cf1d){const _0x51993f={..._0x2fbbae,'shopId':_0x5f175d['shopId'],'gateway':_0x5f175d[_0x2ef0ce(0x246)],'createdAt':_0x5f175d[_0x2ef0ce(0x1e0)],'chargebackAmount':_0x54d931};await telegramBotService_1[_0x2ef0ce(0x23f)][_0x2ef0ce(0x239)](_0x5f175d[_0x2ef0ce(0x1ed)],_0x51993f,_0x32cf1d),console[_0x2ef0ce(0x21c)]('âœ…\x20Telegram\x20notification\x20sent\x20for\x20status\x20change:\x20'+_0x5f175d[_0x2ef0ce(0x203)]+'\x20->\x20'+_0x22b81a);}}catch(_0x490526){console[_0x2ef0ce(0x235)](_0x2ef0ce(0x1fb),_0x490526);}}_0x373b8a[_0x2ef0ce(0x1e7)]({'success':!![],'message':_0x2ef0ce(0x218),'result':_0x2fbbae});}catch(_0x2e608c){_0x13d475(_0x2e608c);}},this[_0x199289(0x223)]=async(_0x34a5e1,_0x489124,_0x541e6b)=>{const _0x4f3e45=_0x199289;try{const {id:_0x590f13}=_0x34a5e1[_0x4f3e45(0x227)],_0xf415d3=_0x34a5e1[_0x4f3e45(0x23a)];console[_0x4f3e45(0x21c)]('ðŸ”„\x20Admin\x20updating\x20customer\x20data\x20for\x20payment\x20'+_0x590f13+':',_0xf415d3);const _0x472517=await this[_0x4f3e45(0x1ea)][_0x4f3e45(0x223)](_0x590f13,_0xf415d3);_0x489124[_0x4f3e45(0x1e7)]({'success':!![],'message':_0x4f3e45(0x250),'result':_0x472517});}catch(_0x208c7b){_0x541e6b(_0x208c7b);}},this[_0x199289(0x257)]=async(_0x30d42d,_0x5bcfc0,_0x8fc6dc)=>{const _0x23fd9b=_0x199289;try{const {id:_0x36548e}=_0x30d42d['params'],_0x1bc10e=_0x30d42d[_0x23fd9b(0x23a)],_0x542a25=await this[_0x23fd9b(0x1ea)][_0x23fd9b(0x257)](_0x36548e,_0x1bc10e);_0x5bcfc0[_0x23fd9b(0x1e7)]({'success':!![],'message':'User\x20updated\x20successfully','result':_0x542a25});}catch(_0x9e94c){_0x8fc6dc(_0x9e94c);}},this['suspendUser']=async(_0x3dd667,_0x33fdbd,_0x54157f)=>{const _0x406c40=_0x199289;try{const {id:_0x3a1dea}=_0x3dd667[_0x406c40(0x227)],_0x3aa59e=await this['adminService'][_0x406c40(0x1dc)](_0x3a1dea);_0x33fdbd['json']({'success':!![],'message':_0x406c40(0x21f),'result':_0x3aa59e});}catch(_0x469e16){_0x54157f(_0x469e16);}},this[_0x199289(0x228)]=async(_0x411928,_0x4664cb,_0x2e5a5e)=>{const _0x38cac4=_0x199289;try{const {id:_0x2e36b8}=_0x411928[_0x38cac4(0x227)],_0x13fdd9=await this[_0x38cac4(0x1ea)][_0x38cac4(0x228)](_0x2e36b8);_0x4664cb[_0x38cac4(0x1e7)]({'success':!![],'message':_0x38cac4(0x1ef),'result':_0x13fdd9});}catch(_0x45c9e8){_0x2e5a5e(_0x45c9e8);}},this[_0x199289(0x238)]=async(_0x398e3e,_0x1e76fb,_0x57a35c)=>{const _0x22bac0=_0x199289;try{const {page:page=0x1,limit:limit=0x14,status:_0x55a05d,search:_0x508e6c}=_0x398e3e['query'],_0x380b4b={'page':Number(page),'limit':Number(limit),'status':_0x55a05d,'search':_0x508e6c},_0x17e3e5=await this[_0x22bac0(0x1ea)][_0x22bac0(0x22b)](_0x380b4b);_0x1e76fb[_0x22bac0(0x1e7)]({'success':!![],'users':_0x17e3e5['users'],'pagination':_0x17e3e5[_0x22bac0(0x1de)]});}catch(_0x2e1015){_0x57a35c(_0x2e1015);}},this[_0x199289(0x258)]=async(_0xd8c1b9,_0x43aa30,_0x5824c2)=>{const _0x2790bc=_0x199289;try{const {id:_0x158ae5}=_0xd8c1b9['params'],_0x5eaa6a=await this[_0x2790bc(0x1ea)][_0x2790bc(0x258)](_0x158ae5);if(!_0x5eaa6a)return _0x43aa30[_0x2790bc(0x203)](0x194)['json']({'success':![],'message':_0x2790bc(0x225)});_0x43aa30['json']({'success':!![],'result':_0x5eaa6a});}catch(_0x4971e0){_0x5824c2(_0x4971e0);}},this[_0x199289(0x240)]=async(_0x1cfe84,_0x1c813d,_0x2dac12)=>{const _0x50b583=_0x199289;try{const _0x442348=_0x1cfe84[_0x50b583(0x23a)],_0x20f08e=await this[_0x50b583(0x1ea)]['createUser'](_0x442348);_0x1c813d[_0x50b583(0x203)](0xc9)[_0x50b583(0x1e7)]({'success':!![],'message':_0x50b583(0x216),'result':_0x20f08e});}catch(_0x87e87){_0x2dac12(_0x87e87);}},this[_0x199289(0x1fd)]=async(_0x32bc7b,_0x5612c4,_0x4be2f1)=>{const _0x314637=_0x199289;try{const {id:_0x48c4a9}=_0x32bc7b[_0x314637(0x227)],{twoFactorToken:_0x3a559e}=_0x32bc7b[_0x314637(0x23a)];await this[_0x314637(0x1ea)][_0x314637(0x1fd)](_0x48c4a9,_0x3a559e),_0x5612c4[_0x314637(0x1e7)]({'success':!![],'message':_0x314637(0x206)});}catch(_0x2920f6){_0x4be2f1(_0x2920f6);}},this[_0x199289(0x214)]=async(_0x3aba77,_0x2a5320,_0x28c342)=>{const _0x4ac801=_0x199289;try{const {shopId:_0x4c86f0}=_0x3aba77[_0x4ac801(0x227)],_0x33e4c2=await this[_0x4ac801(0x1ea)][_0x4ac801(0x214)](_0x4c86f0);_0x2a5320['json']({'success':!![],'wallets':_0x33e4c2});}catch(_0x50feb8){_0x28c342(_0x50feb8);}},this['setup2FA']=async(_0x12d7fc,_0x195104,_0x1d5f99)=>{const _0x2d8652=_0x199289;try{const {shopId:_0x2d9b79}=_0x12d7fc[_0x2d8652(0x227)],_0x57dbc7=await this[_0x2d8652(0x1ea)][_0x2d8652(0x236)](_0x2d9b79);_0x195104[_0x2d8652(0x1e7)]({'success':!![],'result':_0x57dbc7});}catch(_0x192c4f){_0x1d5f99(_0x192c4f);}},this['enable2FA']=async(_0x1e9c92,_0x101e9a,_0x2eb199)=>{const _0x1490f2=_0x199289;try{const {shopId:_0x4006a8}=_0x1e9c92[_0x1490f2(0x227)],{token:_0x22cd48}=_0x1e9c92['body'];if(!_0x22cd48)return _0x101e9a[_0x1490f2(0x203)](0x190)[_0x1490f2(0x1e7)]({'success':![],'message':_0x1490f2(0x1dd)});const _0x26fdfc=await this['adminService'][_0x1490f2(0x1d8)](_0x4006a8,_0x22cd48);_0x101e9a[_0x1490f2(0x1e7)]({'success':!![],'message':'2FA\x20enabled\x20successfully','result':_0x26fdfc});}catch(_0x526d25){_0x2eb199(_0x526d25);}},this[_0x199289(0x224)]=async(_0x925dac,_0x2a3648,_0x291b14)=>{const _0x42bba8=_0x199289;try{const {shopId:_0x358f08}=_0x925dac[_0x42bba8(0x227)];await this[_0x42bba8(0x1ea)][_0x42bba8(0x224)](_0x358f08),_0x2a3648['json']({'success':!![],'message':'2FA\x20disabled\x20successfully'});}catch(_0x7fa11a){_0x291b14(_0x7fa11a);}},this[_0x199289(0x1e3)]=async(_0x387e63,_0x54590c,_0x2c863f)=>{const _0x4f8eb1=_0x199289;try{const _0x170ee4=await paymentCleanupService_1['paymentCleanupService']['getProcessingPaymentsStats']();_0x54590c[_0x4f8eb1(0x1e7)]({'success':!![],'result':_0x170ee4});}catch(_0x24909a){_0x2c863f(_0x24909a);}},this['cleanupStalePayments']=async(_0xb998bc,_0x16744a,_0x343ad2)=>{const _0x4a91ee=_0x199289;try{console[_0x4a91ee(0x21c)](_0x4a91ee(0x248)+_0xb998bc[_0x4a91ee(0x1e8)]?.['username']+'\x20('+_0xb998bc[_0x4a91ee(0x1e8)]?.['id']+')');const _0x205c10=await paymentCleanupService_1[_0x4a91ee(0x1fa)][_0x4a91ee(0x22a)]();_0x16744a['json']({'success':!![],'message':_0x4a91ee(0x241),'result':{'processed':_0x205c10[_0x4a91ee(0x1d6)],'failed':_0x205c10[_0x4a91ee(0x1f9)],'errors':_0x205c10['errors']}});}catch(_0x11bd16){_0x343ad2(_0x11bd16);}},this['cleanupStalePendingPayments']=async(_0xc70d55,_0xab9e96,_0x24b186)=>{const _0x5c5eef=_0x199289;try{console[_0x5c5eef(0x21c)](_0x5c5eef(0x22c)+_0xc70d55['user']?.[_0x5c5eef(0x1e6)]+'\x20('+_0xc70d55[_0x5c5eef(0x1e8)]?.['id']+')');const _0x3383e7=await paymentCleanupService_1['paymentCleanupService'][_0x5c5eef(0x1f2)]();_0xab9e96[_0x5c5eef(0x1e7)]({'success':!![],'message':'PENDING\x20payment\x20cleanup\x20completed\x20successfully','result':{'processed':_0x3383e7[_0x5c5eef(0x1d6)],'failed':_0x3383e7[_0x5c5eef(0x1f9)],'errors':_0x3383e7['errors']}});}catch(_0x1c6100){_0x24b186(_0x1c6100);}},this[_0x199289(0x231)]=async(_0x14ca6e,_0x21a2d4,_0xa40cf5)=>{const _0x12bd01=_0x199289;try{console['log'](_0x12bd01(0x1d5)+_0x14ca6e['user']?.['username']+'\x20('+_0x14ca6e[_0x12bd01(0x1e8)]?.['id']+')');const _0x3d4357=await paymentCleanupService_1[_0x12bd01(0x1fa)][_0x12bd01(0x1e3)](),_0x37cd6e=await paymentCleanupService_1[_0x12bd01(0x1fa)][_0x12bd01(0x22a)](),_0x38efb3=await paymentCleanupService_1[_0x12bd01(0x1fa)]['cleanupStalePendingPayments'](),_0x3bbc8e=await paymentCleanupService_1[_0x12bd01(0x1fa)][_0x12bd01(0x1e3)]();_0x21a2d4[_0x12bd01(0x1e7)]({'success':!![],'message':'Payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)\x20with\x20report\x20completed\x20successfully','result':{'cleanup':{'processing':{'processed':_0x37cd6e['processed'],'failed':_0x37cd6e['failed'],'errors':_0x37cd6e[_0x12bd01(0x244)]},'pending':{'processed':_0x38efb3[_0x12bd01(0x1d6)],'failed':_0x38efb3[_0x12bd01(0x1f9)],'errors':_0x38efb3[_0x12bd01(0x244)]},'total':{'processed':_0x37cd6e['processed']+_0x38efb3[_0x12bd01(0x1d6)],'failed':_0x37cd6e['failed']+_0x38efb3[_0x12bd01(0x1f9)],'errors':[..._0x37cd6e['errors'],..._0x38efb3[_0x12bd01(0x244)]]}},'statistics':{'before':_0x3d4357,'after':_0x3bbc8e,'reduced':_0x3d4357[_0x12bd01(0x1f8)]-_0x3bbc8e[_0x12bd01(0x1f8)]}}});}catch(_0x5f08bb){_0xa40cf5(_0x5f08bb);}},this[_0x199289(0x1eb)]=async(_0x3ad59e,_0x3f23ff,_0x200472)=>{const _0x3a3bd1=_0x199289;try{const _0x2ec18f=await paymentCleanupService_1[_0x3a3bd1(0x1fa)][_0x3a3bd1(0x1f1)]();_0x3f23ff[_0x3a3bd1(0x1e7)]({'success':!![],'message':_0x3a3bd1(0x20e),'result':{'expired':_0x2ec18f[_0x3a3bd1(0x1d4)],'errors':_0x2ec18f['errors']}});}catch(_0x2158e4){_0x200472(_0x2158e4);}},this[_0x199289(0x222)]=async(_0x2dc5ce,_0x1f75f6,_0x36f96e)=>{const _0x4fd3ef=_0x199289;try{const {currentPassword:_0x13f380,newPassword:_0x59fa17,confirmNewPassword:_0x18d0e9,twoFactorToken:_0x5a2f39}=_0x2dc5ce[_0x4fd3ef(0x23a)];await this['adminService'][_0x4fd3ef(0x222)](_0x13f380,_0x59fa17,_0x18d0e9,_0x5a2f39),_0x1f75f6[_0x4fd3ef(0x1e7)]({'success':!![],'message':'Admin\x20password\x20changed\x20successfully'});}catch(_0x509234){_0x36f96e(_0x509234);}},this[_0x199289(0x1ff)]=async(_0x3c5251,_0x1b37a4,_0x499343)=>{const _0x467701=_0x199289;try{const _0x1fd767=await this[_0x467701(0x1ea)][_0x467701(0x1ff)]();_0x1b37a4[_0x467701(0x1e7)]({'success':!![],'result':_0x1fd767});}catch(_0x3d91c8){_0x499343(_0x3d91c8);}},this[_0x199289(0x202)]=async(_0x13c70c,_0x9816fd,_0x590e07)=>{const _0x467a33=_0x199289;try{const _0x22ba76=await this[_0x467a33(0x1ea)]['setupAdmin2FA']();_0x9816fd[_0x467a33(0x1e7)]({'success':!![],'result':_0x22ba76});}catch(_0xa3e333){_0x590e07(_0xa3e333);}},this[_0x199289(0x1d7)]=async(_0x2a2ede,_0x3d0ee5,_0xa8974)=>{const _0x3ed236=_0x199289;try{const {token:_0x5c2a5c}=_0x2a2ede['body'],_0x1c4038=await this[_0x3ed236(0x1ea)][_0x3ed236(0x1d7)](_0x5c2a5c);_0x3d0ee5[_0x3ed236(0x1e7)]({'success':!![],'result':_0x1c4038});}catch(_0x412dfe){_0xa8974(_0x412dfe);}},this[_0x199289(0x249)]=async(_0x1b5a3e,_0x5616be,_0x45473f)=>{const _0xfbfcad=_0x199289;try{await this[_0xfbfcad(0x1ea)][_0xfbfcad(0x249)](),_0x5616be[_0xfbfcad(0x1e7)]({'success':!![],'message':'Admin\x202FA\x20disabled\x20successfully'});}catch(_0x31e0af){_0x45473f(_0x31e0af);}},this['depositBalance']=async(_0x3253d2,_0x47d14d,_0x563295)=>{const _0x13f0d4=_0x199289;try{const {shopId:_0x13c5bf,amount:_0x328e41,notes:_0x1e5148}=_0x3253d2['body'];if(!_0x13c5bf||!_0x328e41)return _0x47d14d['status'](0x190)[_0x13f0d4(0x1e7)]({'success':![],'message':_0x13f0d4(0x22e)});if(_0x328e41<=0x0)return _0x47d14d[_0x13f0d4(0x203)](0x190)['json']({'success':![],'message':_0x13f0d4(0x1e4)});await this[_0x13f0d4(0x1ea)][_0x13f0d4(0x221)](_0x13c5bf,_0x328e41,_0x1e5148),_0x47d14d['json']({'success':!![],'message':_0x13f0d4(0x233)});}catch(_0x13ddbb){_0x563295(_0x13ddbb);}},this[_0x199289(0x1ea)]=new adminService_1[(_0x199289(0x23b))](),this[_0x199289(0x24e)]=new paymentLinkService_1[(_0x199289(0x251))]();}}exports[a3_0x1ee828(0x253)]=AdminController;