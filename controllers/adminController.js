'use strict';const a3_0x10d4e3=a3_0x46fd;(function(_0x3c85e4,_0x21e399){const _0x263d99=a3_0x46fd,_0x22dde5=_0x3c85e4();while(!![]){try{const _0x358ee9=parseInt(_0x263d99(0x14b))/0x1*(parseInt(_0x263d99(0x156))/0x2)+parseInt(_0x263d99(0x13f))/0x3*(-parseInt(_0x263d99(0x124))/0x4)+parseInt(_0x263d99(0x132))/0x5+-parseInt(_0x263d99(0x153))/0x6+-parseInt(_0x263d99(0x12f))/0x7*(-parseInt(_0x263d99(0x13b))/0x8)+parseInt(_0x263d99(0x13c))/0x9*(parseInt(_0x263d99(0x11c))/0xa)+-parseInt(_0x263d99(0x12c))/0xb;if(_0x358ee9===_0x21e399)break;else _0x22dde5['push'](_0x22dde5['shift']());}catch(_0x515bab){_0x22dde5['push'](_0x22dde5['shift']());}}}(a3_0x24d3,0xce97b));function a3_0x46fd(_0xc1a17a,_0x2b2f4d){const _0x24d3c7=a3_0x24d3();return a3_0x46fd=function(_0x46fdf6,_0x14ed1c){_0x46fdf6=_0x46fdf6-0x115;let _0x1e0697=_0x24d3c7[_0x46fdf6];return _0x1e0697;},a3_0x46fd(_0xc1a17a,_0x2b2f4d);}Object[a3_0x10d4e3(0x13e)](exports,'__esModule',{'value':!![]}),exports[a3_0x10d4e3(0x154)]=void 0x0;const adminService_1=require(a3_0x10d4e3(0x143)),telegramBotService_1=require(a3_0x10d4e3(0x14f));class AdminController{constructor(){const _0x18aaf0=a3_0x10d4e3;this[_0x18aaf0(0x149)]=async(_0x3333be,_0x3d55ca,_0xa748df)=>{const _0x4d9455=_0x18aaf0;try{const _0x389f7f=_0x3333be[_0x4d9455(0x138)];_0x3d55ca['json']({'success':!![],'message':_0x4d9455(0x128),'user':{'id':_0x389f7f?.['id'],'username':_0x389f7f?.[_0x4d9455(0x118)],'role':_0x389f7f?.['role']}});}catch(_0xfc9e28){_0xa748df(_0xfc9e28);}},this[_0x18aaf0(0x144)]=async(_0x57892e,_0x1efe57,_0x114f92)=>{const _0x4b5bf9=_0x18aaf0;try{const {period:period=_0x4b5bf9(0x14a)}=_0x57892e['query'],_0x23861a=await this[_0x4b5bf9(0x13d)][_0x4b5bf9(0x115)](period);_0x1efe57[_0x4b5bf9(0x155)]({'success':!![],'result':_0x23861a});}catch(_0x595bc7){_0x114f92(_0x595bc7);}},this[_0x18aaf0(0x145)]=async(_0x4b5a21,_0x57b067,_0x2187f6)=>{const _0x1cfbd5=_0x18aaf0;try{const _0xbce27e=await this[_0x1cfbd5(0x13d)][_0x1cfbd5(0x145)]();_0x57b067[_0x1cfbd5(0x155)]({'success':!![],'result':_0xbce27e});}catch(_0x3f192f){_0x2187f6(_0x3f192f);}},this[_0x18aaf0(0x148)]=async(_0x170273,_0x4e646b,_0x4fb147)=>{const _0x5530c1=_0x18aaf0;try{const {page:page=0x1,limit:limit=0x14,minAmount:_0x2ee69b,search:_0x18940e}=_0x170273[_0x5530c1(0x119)],_0x401995={'page':Number(page),'limit':Number(limit),'minAmount':_0x2ee69b?Number(_0x2ee69b):undefined,'search':_0x18940e},_0x4c20c1=await this[_0x5530c1(0x13d)][_0x5530c1(0x148)](_0x401995);_0x4e646b[_0x5530c1(0x155)]({'success':!![],'merchants':_0x4c20c1[_0x5530c1(0x150)],'pagination':_0x4c20c1[_0x5530c1(0x142)],'summary':_0x4c20c1[_0x5530c1(0x11b)]});}catch(_0x34445b){_0x4fb147(_0x34445b);}},this[_0x18aaf0(0x122)]=async(_0x4c96a1,_0x582bb7,_0x5c903a)=>{const _0x14b9db=_0x18aaf0;try{const _0x424859=_0x4c96a1['body'],_0x2f2e5d=await this['adminService'][_0x14b9db(0x122)](_0x424859);_0x582bb7[_0x14b9db(0x11f)](0xc9)['json']({'success':!![],'message':_0x14b9db(0x121),'result':_0x2f2e5d});}catch(_0x4acef5){_0x5c903a(_0x4acef5);}},this['getPayouts']=async(_0x5d282f,_0x240b5b,_0x1cc8c7)=>{const _0x38d909=_0x18aaf0;try{const {page:page=0x1,limit:limit=0x14,shopId:_0x5c4a5e,network:_0x2cef60,dateFrom:_0x857d2b,dateTo:_0x561c83,search:_0x57ada3}=_0x5d282f[_0x38d909(0x119)],_0x2eb022={'page':Number(page),'limit':Number(limit),'shopId':_0x5c4a5e,'network':_0x2cef60,'dateFrom':_0x857d2b,'dateTo':_0x561c83,'search':_0x57ada3},_0x55a60a=await this[_0x38d909(0x13d)][_0x38d909(0x158)](_0x2eb022);_0x240b5b[_0x38d909(0x155)]({'success':!![],'payouts':_0x55a60a['payouts'],'pagination':_0x55a60a[_0x38d909(0x142)]});}catch(_0x45083b){_0x1cc8c7(_0x45083b);}},this[_0x18aaf0(0x141)]=async(_0x150e48,_0x20f225,_0x5742c9)=>{const _0x36fe67=_0x18aaf0;try{const {id:_0x8e3a01}=_0x150e48[_0x36fe67(0x11d)],_0x4effe8=await this[_0x36fe67(0x13d)][_0x36fe67(0x141)](_0x8e3a01);if(!_0x4effe8)return _0x20f225[_0x36fe67(0x11f)](0x194)[_0x36fe67(0x155)]({'success':![],'message':_0x36fe67(0x147)});_0x20f225[_0x36fe67(0x155)]({'success':!![],'result':_0x4effe8});}catch(_0x260d92){_0x5742c9(_0x260d92);}},this['deletePayout']=async(_0x50debc,_0x52b0cb,_0x37cd6d)=>{const _0x306da7=_0x18aaf0;try{const {id:_0xe96477}=_0x50debc['params'];await this[_0x306da7(0x13d)][_0x306da7(0x126)](_0xe96477),_0x52b0cb[_0x306da7(0x155)]({'success':!![],'message':_0x306da7(0x15f)});}catch(_0x2f7a21){_0x37cd6d(_0x2f7a21);}},this['getPayments']=async(_0x95eb4a,_0x5658b5,_0x2626e5)=>{const _0x14c44e=_0x18aaf0;try{const {page:page=0x1,limit:limit=0x14,status:_0x5c359b,gateway:_0x451120,shopId:_0xe0f3b5,dateFrom:_0x41d995,dateTo:_0x515ab9,search:_0x2b24f5}=_0x95eb4a[_0x14c44e(0x119)],_0x43f32a={'page':Number(page),'limit':Number(limit),'status':_0x5c359b,'gateway':_0x451120,'shopId':_0xe0f3b5,'dateFrom':_0x41d995,'dateTo':_0x515ab9,'search':_0x2b24f5},_0x1ed80d=await this[_0x14c44e(0x13d)][_0x14c44e(0x131)](_0x43f32a);_0x5658b5['json']({'success':!![],'payments':_0x1ed80d[_0x14c44e(0x137)],'pagination':_0x1ed80d[_0x14c44e(0x142)]});}catch(_0x4774ca){_0x2626e5(_0x4774ca);}},this[_0x18aaf0(0x15d)]=async(_0x1e6504,_0x1d960b,_0x6c7dd2)=>{const _0x7081af=_0x18aaf0;try{const {id:_0x114aef}=_0x1e6504[_0x7081af(0x11d)],_0x12d9e7=await this[_0x7081af(0x13d)][_0x7081af(0x15d)](_0x114aef);if(!_0x12d9e7)return _0x1d960b[_0x7081af(0x11f)](0x194)[_0x7081af(0x155)]({'success':![],'message':'Payment\x20not\x20found'});_0x1d960b['json']({'success':!![],'result':_0x12d9e7});}catch(_0x4e2abf){_0x6c7dd2(_0x4e2abf);}},this['updatePayment']=async(_0x51afed,_0x5ba160,_0x5a564d)=>{const _0x3caa48=_0x18aaf0;try{const {id:_0x222af5}=_0x51afed[_0x3caa48(0x11d)],{status:_0x13541c,notes:_0x46a71d,chargebackAmount:_0x1c8e46}=_0x51afed[_0x3caa48(0x13a)],_0x2c4eba=await this[_0x3caa48(0x13d)][_0x3caa48(0x15d)](_0x222af5);if(!_0x2c4eba)return _0x5ba160[_0x3caa48(0x11f)](0x194)['json']({'success':![],'message':_0x3caa48(0x15a)});const _0x359f96=await this[_0x3caa48(0x13d)][_0x3caa48(0x134)](_0x222af5,_0x13541c,_0x46a71d,_0x1c8e46);if(_0x2c4eba[_0x3caa48(0x11f)]!==_0x13541c){console[_0x3caa48(0x12d)](_0x3caa48(0x14e)+_0x222af5+_0x3caa48(0x130)+_0x2c4eba[_0x3caa48(0x11f)]+_0x3caa48(0x12a)+_0x13541c+',\x20sending\x20Telegram\x20notification');try{let _0x5c8b71;switch(_0x13541c[_0x3caa48(0x139)]()){case _0x3caa48(0x159):_0x5c8b71=_0x3caa48(0x127);break;case _0x3caa48(0x11a):_0x5c8b71=_0x3caa48(0x116);break;case'EXPIRED':_0x5c8b71='expired';break;case _0x3caa48(0x135):_0x5c8b71=_0x3caa48(0x146);break;case'CHARGEBACK':_0x5c8b71=_0x3caa48(0x12b);break;default:console['log'](_0x3caa48(0x120)+_0x13541c);break;}if(_0x5c8b71){const _0xde57eb={..._0x359f96,'shopId':_0x2c4eba[_0x3caa48(0x151)],'gateway':_0x2c4eba['gateway'],'createdAt':_0x2c4eba['createdAt'],'adminNotes':_0x46a71d||_0x3caa48(0x123)+_0x13541c,'chargebackAmount':_0x1c8e46};await telegramBotService_1['telegramBotService'][_0x3caa48(0x140)](_0x2c4eba[_0x3caa48(0x151)],_0xde57eb,_0x5c8b71),console[_0x3caa48(0x12d)](_0x3caa48(0x129)+_0x2c4eba[_0x3caa48(0x11f)]+_0x3caa48(0x152)+_0x13541c);}}catch(_0x2419dd){console['error'](_0x3caa48(0x125),_0x2419dd);}}_0x5ba160[_0x3caa48(0x155)]({'success':!![],'message':_0x3caa48(0x15c),'result':_0x359f96});}catch(_0x50d8b0){_0x5a564d(_0x50d8b0);}},this[_0x18aaf0(0x15b)]=async(_0xb14b56,_0x50e088,_0x2ea855)=>{const _0x1df0ca=_0x18aaf0;try{const {id:_0x915745}=_0xb14b56[_0x1df0ca(0x11d)],_0x5622d4=_0xb14b56[_0x1df0ca(0x13a)],_0x575857=await this[_0x1df0ca(0x13d)][_0x1df0ca(0x15b)](_0x915745,_0x5622d4);_0x50e088['json']({'success':!![],'message':'User\x20updated\x20successfully','result':_0x575857});}catch(_0x2023a2){_0x2ea855(_0x2023a2);}},this[_0x18aaf0(0x136)]=async(_0xa68b06,_0x42093f,_0xeb9cb5)=>{const _0x494a92=_0x18aaf0;try{const {id:_0x484cb7}=_0xa68b06[_0x494a92(0x11d)],_0x627d96=await this[_0x494a92(0x13d)]['suspendUser'](_0x484cb7);_0x42093f[_0x494a92(0x155)]({'success':!![],'message':_0x494a92(0x11e),'result':_0x627d96});}catch(_0x352e4f){_0xeb9cb5(_0x352e4f);}},this['activateUser']=async(_0x3b22a3,_0x5c018d,_0x388640)=>{const _0x4d8201=_0x18aaf0;try{const {id:_0x15e558}=_0x3b22a3[_0x4d8201(0x11d)],_0x417e1a=await this[_0x4d8201(0x13d)]['activateUser'](_0x15e558);_0x5c018d['json']({'success':!![],'message':'User\x20activated\x20successfully','result':_0x417e1a});}catch(_0x53b6d0){_0x388640(_0x53b6d0);}},this[_0x18aaf0(0x14d)]=async(_0x18987e,_0x309f01,_0x3157b0)=>{const _0xf44079=_0x18aaf0;try{const {page:page=0x1,limit:limit=0x14,status:_0x3b5ac3}=_0x18987e[_0xf44079(0x119)],_0x87d515={'page':Number(page),'limit':Number(limit),'status':_0x3b5ac3},_0x161be6=await this[_0xf44079(0x13d)][_0xf44079(0x133)](_0x87d515);_0x309f01[_0xf44079(0x155)]({'success':!![],'users':_0x161be6['users'],'pagination':_0x161be6[_0xf44079(0x142)]});}catch(_0x198bbe){_0x3157b0(_0x198bbe);}},this['getUserById']=async(_0x35a2cb,_0x18a527,_0x2a1b49)=>{const _0x311105=_0x18aaf0;try{const {id:_0x2f6094}=_0x35a2cb[_0x311105(0x11d)],_0x1763fc=await this[_0x311105(0x13d)][_0x311105(0x14c)](_0x2f6094);if(!_0x1763fc)return _0x18a527[_0x311105(0x11f)](0x194)[_0x311105(0x155)]({'success':![],'message':_0x311105(0x117)});_0x18a527['json']({'success':!![],'result':_0x1763fc});}catch(_0x5d47fa){_0x2a1b49(_0x5d47fa);}},this[_0x18aaf0(0x15e)]=async(_0x12dd3b,_0x22f4b4,_0x215a14)=>{const _0x4d406a=_0x18aaf0;try{const _0x4499ec=_0x12dd3b['body'],_0x2259d3=await this[_0x4d406a(0x13d)][_0x4d406a(0x15e)](_0x4499ec);_0x22f4b4['status'](0xc9)['json']({'success':!![],'message':_0x4d406a(0x157),'result':_0x2259d3});}catch(_0xf4ab69){_0x215a14(_0xf4ab69);}},this[_0x18aaf0(0x12e)]=async(_0x5a5505,_0x4d3612,_0x17d0c5)=>{const _0x56bc80=_0x18aaf0;try{const {id:_0x168ccf}=_0x5a5505[_0x56bc80(0x11d)];await this['adminService'][_0x56bc80(0x12e)](_0x168ccf),_0x4d3612['json']({'success':!![],'message':'User\x20deleted\x20successfully'});}catch(_0x302d80){_0x17d0c5(_0x302d80);}},this[_0x18aaf0(0x13d)]=new adminService_1['AdminService']();}}exports[a3_0x10d4e3(0x154)]=AdminController;function a3_0x24d3(){const _0x1f0603=['toUpperCase','body','56aayVxq','62397WDALYC','adminService','defineProperty','3fypqVF','sendPaymentNotification','getPayoutById','pagination','../services/adminService','getStatistics','getPayoutStats','refund','Payout\x20not\x20found','getMerchantsAwaitingPayout','checkAuth','30d','1074622nINgMa','getUserById','getUsers','📱\x20Admin\x20changed\x20payment\x20','../services/telegramBotService','merchants','shopId','\x20->\x20','980124ehrFiG','AdminController','json','2sUyZDI','User\x20created\x20successfully','getAllPayouts','PAID','Payment\x20not\x20found','updateUser','Payment\x20updated\x20successfully','getPaymentById','createUser','Payout\x20deleted\x20successfully','getSystemStatistics','failed','User\x20not\x20found','username','query','FAILED','summary','1270slFsGN','params','User\x20suspended\x20successfully','status','📱\x20Skipping\x20Telegram\x20notification\x20for\x20admin\x20status\x20change\x20to:\x20','Payout\x20created\x20successfully','createPayout','Статус\x20изменен\x20администратором\x20на\x20','4613116RtMelm','Failed\x20to\x20send\x20Telegram\x20notification\x20for\x20admin\x20status\x20change:','deletePayout','paid','Admin\x20access\x20confirmed','✅\x20Telegram\x20notification\x20sent\x20for\x20admin\x20status\x20change:\x20','\x20to\x20','chargeback','3076634zuGOPj','log','deleteUser','301021uBYcGu','\x20status\x20from\x20','getAllPayments','931980lwBIIu','getAllUsers','updatePaymentStatus','REFUND','suspendUser','payments','user'];a3_0x24d3=function(){return _0x1f0603;};return a3_0x24d3();}