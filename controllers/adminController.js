'use strict';function a3_0x1b87(){const _0x29af5a=['getAllPayments','true','enableAdmin2FA','../services/adminService','getPayoutById','updatePaymentStatus','payments','setupAdmin2FA','cleanupStalePendingPayments','../services/paymentLinkService','getMerchantsSelection','ðŸŽ¯\x20[CONTROLLER]\x20Updating\x20payout\x20','body','Payout\x20updated\x20successfully','updateCustomerData','expireSinglePaymentLinks','user','getProcessingPaymentsStats','setup2FA','475ifTAxJ','processed','updatePayment','Failed\x20to\x20send\x20Telegram\x20notification\x20for\x20status\x20change:','Token\x20is\x20required','pagination','error','Admin\x20password\x20changed\x20successfully','1590795FWzkSn','createdAt','getUserById','updateUser','3236390xofCbP','summary','suspendUser','shopId','REFUND','paymentLinkService','sendPaymentNotification','gateway','Payment\x20updated\x20successfully','User\x20updated\x20successfully','cleanupStalePaymentsWithReport','toUpperCase','failed','deleteUser','getPayoutStats','\x20to\x20','Failed\x20to\x20update\x20payment\x20link\x20counter:','FAILED','4RRVvKE','PROCESSING\x20payment\x20cleanup\x20completed\x20successfully','5394158ZLunpi','Customer\x20data\x20updated\x20successfully','chargeback','getAllPayouts','Payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)\x20with\x20report\x20completed\x20successfully','role','cleanupStaleProcessingPayments','handleSuccessfulPayment','â°\x20Manual\x20PENDING\x20payment\x20cleanup\x20initiated\x20by\x20admin:\x20','282CpKsXQ','cleanupStalePayments','statistics','getStatistics','3996088keaEWd','getPayouts','ðŸ“±\x20Skipping\x20Telegram\x20notification\x20for\x20status\x20change\x20to:\x20','Payout\x20not\x20found','params','users','log','paymentCleanupService','Payment\x20not\x20found','2FA\x20enabled\x20successfully','\x20status\x20changed\x20from\x20','disable2FA','get2FASettings','24RdxISC','getSystemStatistics','updatePayout','adminService','User\x20not\x20found','PROCESSING','PaymentLinkService','activateUser','query','âœ…\x20Telegram\x20notification\x20sent\x20for\x20status\x20change:\x20','errors','ðŸ“Š\x20Manual\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)\x20with\x20report\x20initiated\x20by\x20admin:\x20','enable2FA','month','merchants','paid','changeAdminPassword','getPaymentById','getMerchantStatistics','User\x20suspended\x20successfully','ðŸ“±\x20Payment\x20','expired','json','Admin\x20access\x20confirmed','hasPayoutHistory','1978JnurTw','__esModule','PAID','../services/paymentCleanupService','getPayments','processing','username','createPayout','status','49462UlJmSE','Payment\x20link\x20expiration\x20check\x20completed\x20successfully','Admin\x202FA\x20disabled\x20successfully','ðŸŽ¯\x20[CONTROLLER]\x20Creating\x20payout\x20with\x20data:','getShopWallets','9jcKaKg','Payout\x20created\x20successfully',',\x20sending\x20Telegram\x20notification','telegramBotService','getUsers','2935675kvbhjz','getAllUsers','total','deletePayout','âœ…\x20Payment\x20link\x20counter\x20updated\x20for\x20payment\x20','getMerchantsAwaitingPayout','../services/telegramBotService','30d','disableAdmin2FA'];a3_0x1b87=function(){return _0x29af5a;};return a3_0x1b87();}const a3_0x4cb95c=a3_0x4731;(function(_0x35b65a,_0x33b3b6){const _0x57d388=a3_0x4731,_0x20bed3=_0x35b65a();while(!![]){try{const _0x5902c9=-parseInt(_0x57d388(0x162))/0x1*(parseInt(_0x57d388(0x1b5))/0x2)+-parseInt(_0x57d388(0x16a))/0x3*(-parseInt(_0x57d388(0x180))/0x4)+-parseInt(_0x57d388(0x1c8))/0x5+parseInt(_0x57d388(0x18b))/0x6*(-parseInt(_0x57d388(0x1be))/0x7)+parseInt(_0x57d388(0x18f))/0x8*(parseInt(_0x57d388(0x1c3))/0x9)+-parseInt(_0x57d388(0x16e))/0xa+parseInt(_0x57d388(0x182))/0xb*(parseInt(_0x57d388(0x19c))/0xc);if(_0x5902c9===_0x33b3b6)break;else _0x20bed3['push'](_0x20bed3['shift']());}catch(_0x18e4f4){_0x20bed3['push'](_0x20bed3['shift']());}}}(a3_0x1b87,0x48b99));Object['defineProperty'](exports,a3_0x4cb95c(0x1b6),{'value':!![]}),exports['AdminController']=void 0x0;function a3_0x4731(_0x530325,_0x2ec9ac){_0x530325=_0x530325-0x148;const _0x1b874c=a3_0x1b87();let _0x47316d=_0x1b874c[_0x530325];return _0x47316d;}const adminService_1=require(a3_0x4cb95c(0x152)),paymentLinkService_1=require(a3_0x4cb95c(0x158)),paymentCleanupService_1=require(a3_0x4cb95c(0x1b8)),telegramBotService_1=require(a3_0x4cb95c(0x14c));class AdminController{constructor(){const _0x5f0511=a3_0x4cb95c;this['checkAuth']=async(_0x5006be,_0x3962ba,_0x1e6ed1)=>{const _0x5c0e6f=a3_0x4731;try{const _0x5d86ad=_0x5006be[_0x5c0e6f(0x15f)];_0x3962ba[_0x5c0e6f(0x1b2)]({'success':!![],'message':_0x5c0e6f(0x1b3),'user':{'id':_0x5d86ad?.['id'],'username':_0x5d86ad?.[_0x5c0e6f(0x1bb)],'role':_0x5d86ad?.[_0x5c0e6f(0x187)]}});}catch(_0x52a613){_0x1e6ed1(_0x52a613);}},this[_0x5f0511(0x18e)]=async(_0x380d4e,_0x5234b0,_0x50f957)=>{const _0x371b6f=_0x5f0511;try{const {period:period=_0x371b6f(0x14d),currentDate:_0x1f11d5}=_0x380d4e[_0x371b6f(0x1a4)],_0x428314=await this[_0x371b6f(0x19f)][_0x371b6f(0x19d)](period,_0x1f11d5);_0x5234b0[_0x371b6f(0x1b2)]({'success':!![],'result':_0x428314});}catch(_0x59a0be){_0x50f957(_0x59a0be);}},this[_0x5f0511(0x1ae)]=async(_0x5046e5,_0x36516a,_0x11ae94)=>{const _0x4a5143=_0x5f0511;try{const {shopId:_0x338069,period:period=_0x4a5143(0x1a9),dateFrom:_0x22b331,dateTo:_0x2bb5bc}=_0x5046e5[_0x4a5143(0x1a4)],_0x331d10={'shopId':_0x338069,'period':period,'dateFrom':_0x22b331,'dateTo':_0x2bb5bc};console[_0x4a5143(0x195)]('ðŸ“Š\x20Admin\x20requesting\x20merchant\x20statistics\x20with\x20filters:',_0x331d10);const _0x3e7a82=await this[_0x4a5143(0x19f)]['getMerchantStatistics'](_0x331d10);_0x36516a[_0x4a5143(0x1b2)]({'success':!![],'result':_0x3e7a82});}catch(_0x48cff0){_0x11ae94(_0x48cff0);}},this[_0x5f0511(0x17c)]=async(_0x60f717,_0x337d75,_0x23cf60)=>{const _0x36fb5c=_0x5f0511;try{const _0x20a1ef=await this[_0x36fb5c(0x19f)][_0x36fb5c(0x17c)]();_0x337d75[_0x36fb5c(0x1b2)]({'success':!![],'result':_0x20a1ef});}catch(_0x2c5f23){_0x23cf60(_0x2c5f23);}},this[_0x5f0511(0x14b)]=async(_0x4e77ba,_0x4174cd,_0x5cd767)=>{const _0x3f8ea2=_0x5f0511;try{const {page:page=0x1,limit:limit=0x14,minAmount:_0x152131,search:_0x29b8f2}=_0x4e77ba['query'],_0xb5df8e={'page':Number(page),'limit':Number(limit),'minAmount':_0x152131?Number(_0x152131):undefined,'search':_0x29b8f2},_0x160868=await this[_0x3f8ea2(0x19f)][_0x3f8ea2(0x14b)](_0xb5df8e);_0x4174cd[_0x3f8ea2(0x1b2)]({'success':!![],'merchants':_0x160868[_0x3f8ea2(0x1aa)],'pagination':_0x160868['pagination'],'summary':_0x160868[_0x3f8ea2(0x16f)]});}catch(_0x3dada2){_0x5cd767(_0x3dada2);}},this[_0x5f0511(0x159)]=async(_0x18a252,_0x59dc8b,_0x1acc25)=>{const _0x26f5c1=_0x5f0511;try{const _0x1b1c34=_0x18a252[_0x26f5c1(0x1a4)][_0x26f5c1(0x1b4)]===_0x26f5c1(0x150),_0x2f5f74=await this['adminService'][_0x26f5c1(0x159)](_0x1b1c34);_0x59dc8b['json']({'success':!![],'result':_0x2f5f74});}catch(_0x1f2eab){_0x1acc25(_0x1f2eab);}},this[_0x5f0511(0x1bc)]=async(_0x4a9442,_0x26dd4d,_0x1dea02)=>{const _0x4444d2=_0x5f0511;try{const _0x21f210=_0x4a9442['body'];console[_0x4444d2(0x195)](_0x4444d2(0x1c1),_0x21f210);const _0x49a911=await this[_0x4444d2(0x19f)][_0x4444d2(0x1bc)](_0x21f210);_0x26dd4d[_0x4444d2(0x1bd)](0xc9)[_0x4444d2(0x1b2)]({'success':!![],'message':_0x4444d2(0x1c4),'result':_0x49a911});}catch(_0x1ec0de){_0x1dea02(_0x1ec0de);}},this[_0x5f0511(0x19e)]=async(_0x56e660,_0x277d76,_0x5a9f5b)=>{const _0x4b93d3=_0x5f0511;try{const {id:_0xd6d888}=_0x56e660[_0x4b93d3(0x193)],_0x2f508b=_0x56e660[_0x4b93d3(0x15b)];console[_0x4b93d3(0x195)](_0x4b93d3(0x15a)+_0xd6d888+'\x20with\x20data:',_0x2f508b);const _0x9623e2=await this['adminService'][_0x4b93d3(0x19e)](_0xd6d888,_0x2f508b);_0x277d76['json']({'success':!![],'message':_0x4b93d3(0x15c),'result':_0x9623e2});}catch(_0xdc9799){_0x5a9f5b(_0xdc9799);}},this[_0x5f0511(0x190)]=async(_0x5c8c4d,_0x11a966,_0x6ad2b)=>{const _0x2cf85a=_0x5f0511;try{const {page:page=0x1,limit:limit=0x14,shopId:_0x240889,network:_0x80af70,dateFrom:_0xdb9371,dateTo:_0x4487f6,search:_0x125c5f}=_0x5c8c4d['query'],_0x4ce38f={'page':Number(page),'limit':Number(limit),'shopId':_0x240889,'network':_0x80af70,'dateFrom':_0xdb9371,'dateTo':_0x4487f6,'search':_0x125c5f},_0x144a3f=await this[_0x2cf85a(0x19f)][_0x2cf85a(0x185)](_0x4ce38f);_0x11a966[_0x2cf85a(0x1b2)]({'success':!![],'payouts':_0x144a3f['payouts'],'pagination':_0x144a3f[_0x2cf85a(0x167)]});}catch(_0x8ea8fa){_0x6ad2b(_0x8ea8fa);}},this['getPayoutById']=async(_0x304bf3,_0x46bdc0,_0xa9efdb)=>{const _0x4f6a36=_0x5f0511;try{const {id:_0x5992ed}=_0x304bf3['params'],_0x12b93f=await this[_0x4f6a36(0x19f)][_0x4f6a36(0x153)](_0x5992ed);if(!_0x12b93f)return _0x46bdc0[_0x4f6a36(0x1bd)](0x194)[_0x4f6a36(0x1b2)]({'success':![],'message':_0x4f6a36(0x192)});_0x46bdc0[_0x4f6a36(0x1b2)]({'success':!![],'result':_0x12b93f});}catch(_0x59a6e7){_0xa9efdb(_0x59a6e7);}},this[_0x5f0511(0x149)]=async(_0xdd6de2,_0x1d7397,_0x43479b)=>{const _0xab58ea=_0x5f0511;try{const {id:_0x14cafb}=_0xdd6de2[_0xab58ea(0x193)];await this[_0xab58ea(0x19f)][_0xab58ea(0x149)](_0x14cafb),_0x1d7397[_0xab58ea(0x1b2)]({'success':!![],'message':'Payout\x20deleted\x20successfully'});}catch(_0x285d90){_0x43479b(_0x285d90);}},this[_0x5f0511(0x1b9)]=async(_0x3e4b2b,_0x5488cf,_0x38cc1b)=>{const _0x464007=_0x5f0511;try{const {page:page=0x1,limit:limit=0x14,status:_0x3bfc3b,gateway:_0x58b858,shopId:_0x50fd9c,dateFrom:_0x8e4627,dateTo:_0x140ed0,search:_0x4940a9,currency:_0xb7768,sortBy:_0x435ccc,sortOrder:_0x166b23}=_0x3e4b2b[_0x464007(0x1a4)],_0x519c00={'page':Number(page),'limit':Number(limit),'status':_0x3bfc3b,'gateway':_0x58b858,'shopId':_0x50fd9c,'dateFrom':_0x8e4627,'dateTo':_0x140ed0,'search':_0x4940a9,'currency':_0xb7768,'sortBy':_0x435ccc,'sortOrder':_0x166b23},_0x26a69f=await this[_0x464007(0x19f)][_0x464007(0x14f)](_0x519c00);_0x5488cf[_0x464007(0x1b2)]({'success':!![],'payments':_0x26a69f[_0x464007(0x155)],'pagination':_0x26a69f[_0x464007(0x167)],'statistics':_0x26a69f[_0x464007(0x18d)]});}catch(_0x15d2dc){_0x38cc1b(_0x15d2dc);}},this[_0x5f0511(0x1ad)]=async(_0x41e6f3,_0xd7514c,_0x15ec1d)=>{const _0x1367e1=_0x5f0511;try{const {id:_0x2409c7}=_0x41e6f3['params'],_0x535384=await this[_0x1367e1(0x19f)][_0x1367e1(0x1ad)](_0x2409c7);if(!_0x535384)return _0xd7514c[_0x1367e1(0x1bd)](0x194)['json']({'success':![],'message':'Payment\x20not\x20found'});_0xd7514c[_0x1367e1(0x1b2)]({'success':!![],'result':_0x535384});}catch(_0x8e46ab){_0x15ec1d(_0x8e46ab);}},this[_0x5f0511(0x164)]=async(_0x33d736,_0x1bc426,_0x53ecaa)=>{const _0x4d68dd=_0x5f0511;try{const {id:_0x5e811c}=_0x33d736[_0x4d68dd(0x193)],{status:_0x629195,notes:_0x48ca91,chargebackAmount:_0x4dc0fd}=_0x33d736[_0x4d68dd(0x15b)],_0x4ba07e=await this[_0x4d68dd(0x19f)][_0x4d68dd(0x1ad)](_0x5e811c);if(!_0x4ba07e)return _0x1bc426[_0x4d68dd(0x1bd)](0x194)[_0x4d68dd(0x1b2)]({'success':![],'message':_0x4d68dd(0x197)});const _0x7be9f7=await this[_0x4d68dd(0x19f)][_0x4d68dd(0x154)](_0x5e811c,_0x629195,_0x48ca91,_0x4dc0fd);if(_0x4ba07e[_0x4d68dd(0x1bd)]!==_0x629195&&_0x629195[_0x4d68dd(0x179)]()===_0x4d68dd(0x1b7)){console[_0x4d68dd(0x195)]('ðŸ“ˆ\x20Admin\x20changed\x20payment\x20'+_0x5e811c+'\x20to\x20PAID,\x20updating\x20payment\x20link\x20counter');try{await this[_0x4d68dd(0x173)][_0x4d68dd(0x189)](_0x5e811c),console[_0x4d68dd(0x195)](_0x4d68dd(0x14a)+_0x5e811c);}catch(_0x379c3b){console[_0x4d68dd(0x168)](_0x4d68dd(0x17e),_0x379c3b);}}if(_0x4ba07e[_0x4d68dd(0x1bd)]!==_0x629195){console['log'](_0x4d68dd(0x1b0)+_0x5e811c+_0x4d68dd(0x199)+_0x4ba07e[_0x4d68dd(0x1bd)]+_0x4d68dd(0x17d)+_0x629195+_0x4d68dd(0x1c5));try{let _0x44db00;switch(_0x629195[_0x4d68dd(0x179)]()){case _0x4d68dd(0x1b7):_0x44db00=_0x4d68dd(0x1ab);break;case _0x4d68dd(0x1a1):_0x44db00=_0x4d68dd(0x1ba);break;case _0x4d68dd(0x17f):_0x44db00=_0x4d68dd(0x17a);break;case'EXPIRED':_0x44db00=_0x4d68dd(0x1b1);break;case _0x4d68dd(0x172):_0x44db00='refund';break;case'CHARGEBACK':_0x44db00=_0x4d68dd(0x184);break;default:console[_0x4d68dd(0x195)](_0x4d68dd(0x191)+_0x629195);break;}if(_0x44db00){const _0x22ff87={..._0x7be9f7,'shopId':_0x4ba07e[_0x4d68dd(0x171)],'gateway':_0x4ba07e[_0x4d68dd(0x175)],'createdAt':_0x4ba07e[_0x4d68dd(0x16b)],'chargebackAmount':_0x4dc0fd};await telegramBotService_1[_0x4d68dd(0x1c6)][_0x4d68dd(0x174)](_0x4ba07e[_0x4d68dd(0x171)],_0x22ff87,_0x44db00),console['log'](_0x4d68dd(0x1a5)+_0x4ba07e[_0x4d68dd(0x1bd)]+'\x20->\x20'+_0x629195);}}catch(_0x45f451){console['error'](_0x4d68dd(0x165),_0x45f451);}}_0x1bc426[_0x4d68dd(0x1b2)]({'success':!![],'message':_0x4d68dd(0x176),'result':_0x7be9f7});}catch(_0x4f529a){_0x53ecaa(_0x4f529a);}},this[_0x5f0511(0x15d)]=async(_0x1f70d6,_0x15c692,_0x3b17e3)=>{const _0x1ac65e=_0x5f0511;try{const {id:_0x12b48c}=_0x1f70d6[_0x1ac65e(0x193)],_0x268d04=_0x1f70d6[_0x1ac65e(0x15b)];console[_0x1ac65e(0x195)]('ðŸ”„\x20Admin\x20updating\x20customer\x20data\x20for\x20payment\x20'+_0x12b48c+':',_0x268d04);const _0x142341=await this[_0x1ac65e(0x19f)][_0x1ac65e(0x15d)](_0x12b48c,_0x268d04);_0x15c692[_0x1ac65e(0x1b2)]({'success':!![],'message':_0x1ac65e(0x183),'result':_0x142341});}catch(_0x3464a8){_0x3b17e3(_0x3464a8);}},this[_0x5f0511(0x16d)]=async(_0x154dbe,_0x3e5154,_0x6decbb)=>{const _0xb4b8f9=_0x5f0511;try{const {id:_0x3a8b43}=_0x154dbe['params'],_0x482133=_0x154dbe[_0xb4b8f9(0x15b)],_0x8f4ad=await this[_0xb4b8f9(0x19f)]['updateUser'](_0x3a8b43,_0x482133);_0x3e5154[_0xb4b8f9(0x1b2)]({'success':!![],'message':_0xb4b8f9(0x177),'result':_0x8f4ad});}catch(_0xb40168){_0x6decbb(_0xb40168);}},this[_0x5f0511(0x170)]=async(_0x5ca723,_0x27e7bf,_0x340d39)=>{const _0x1ff14b=_0x5f0511;try{const {id:_0x4aea39}=_0x5ca723[_0x1ff14b(0x193)],_0x3fd53f=await this[_0x1ff14b(0x19f)][_0x1ff14b(0x170)](_0x4aea39);_0x27e7bf[_0x1ff14b(0x1b2)]({'success':!![],'message':_0x1ff14b(0x1af),'result':_0x3fd53f});}catch(_0x3089be){_0x340d39(_0x3089be);}},this[_0x5f0511(0x1a3)]=async(_0x1d3bc2,_0x4d3de9,_0x4cdcf9)=>{const _0x1307f3=_0x5f0511;try{const {id:_0x1558b7}=_0x1d3bc2[_0x1307f3(0x193)],_0x3463ef=await this['adminService'][_0x1307f3(0x1a3)](_0x1558b7);_0x4d3de9[_0x1307f3(0x1b2)]({'success':!![],'message':'User\x20activated\x20successfully','result':_0x3463ef});}catch(_0x49b3b7){_0x4cdcf9(_0x49b3b7);}},this[_0x5f0511(0x1c7)]=async(_0x5e0c81,_0x386e79,_0x4615e8)=>{const _0x320339=_0x5f0511;try{const {page:page=0x1,limit:limit=0x14,status:_0x1a70e6,search:_0x33815a}=_0x5e0c81[_0x320339(0x1a4)],_0x4f9b4c={'page':Number(page),'limit':Number(limit),'status':_0x1a70e6,'search':_0x33815a},_0x466182=await this[_0x320339(0x19f)][_0x320339(0x1c9)](_0x4f9b4c);_0x386e79[_0x320339(0x1b2)]({'success':!![],'users':_0x466182[_0x320339(0x194)],'pagination':_0x466182[_0x320339(0x167)]});}catch(_0x354b47){_0x4615e8(_0x354b47);}},this[_0x5f0511(0x16c)]=async(_0x70b23d,_0x2baf4f,_0x3cfa0f)=>{const _0x225ad5=_0x5f0511;try{const {id:_0x12c3d5}=_0x70b23d[_0x225ad5(0x193)],_0x4423c3=await this[_0x225ad5(0x19f)][_0x225ad5(0x16c)](_0x12c3d5);if(!_0x4423c3)return _0x2baf4f['status'](0x194)[_0x225ad5(0x1b2)]({'success':![],'message':_0x225ad5(0x1a0)});_0x2baf4f[_0x225ad5(0x1b2)]({'success':!![],'result':_0x4423c3});}catch(_0x3d05a6){_0x3cfa0f(_0x3d05a6);}},this['createUser']=async(_0x5f73a6,_0x5dc1e5,_0xe4cc81)=>{try{const _0x42b9bc=_0x5f73a6['body'],_0x386a7f=await this['adminService']['createUser'](_0x42b9bc);_0x5dc1e5['status'](0xc9)['json']({'success':!![],'message':'User\x20created\x20successfully','result':_0x386a7f});}catch(_0x261554){_0xe4cc81(_0x261554);}},this[_0x5f0511(0x17b)]=async(_0x1bf9e1,_0x20393d,_0x2f9b76)=>{const _0x2d07ba=_0x5f0511;try{const {id:_0x519699}=_0x1bf9e1[_0x2d07ba(0x193)],{twoFactorToken:_0xa5e637}=_0x1bf9e1[_0x2d07ba(0x15b)];await this[_0x2d07ba(0x19f)][_0x2d07ba(0x17b)](_0x519699,_0xa5e637),_0x20393d['json']({'success':!![],'message':'User\x20deleted\x20successfully'});}catch(_0x1eaa91){_0x2f9b76(_0x1eaa91);}},this[_0x5f0511(0x1c2)]=async(_0x32f840,_0xb76bba,_0x27252)=>{const _0x538c69=_0x5f0511;try{const {shopId:_0x44abea}=_0x32f840[_0x538c69(0x193)],_0x43c7eb=await this[_0x538c69(0x19f)][_0x538c69(0x1c2)](_0x44abea);_0xb76bba[_0x538c69(0x1b2)]({'success':!![],'wallets':_0x43c7eb});}catch(_0x2634b3){_0x27252(_0x2634b3);}},this[_0x5f0511(0x161)]=async(_0x59394d,_0x2232b3,_0x4feb82)=>{const _0x906539=_0x5f0511;try{const {shopId:_0x4f5144}=_0x59394d[_0x906539(0x193)],_0x59b8d4=await this[_0x906539(0x19f)][_0x906539(0x161)](_0x4f5144);_0x2232b3[_0x906539(0x1b2)]({'success':!![],'result':_0x59b8d4});}catch(_0x29b45c){_0x4feb82(_0x29b45c);}},this[_0x5f0511(0x1a8)]=async(_0x506508,_0x232231,_0x2c614f)=>{const _0x4a5dca=_0x5f0511;try{const {shopId:_0x2227f2}=_0x506508['params'],{token:_0x1055e2}=_0x506508[_0x4a5dca(0x15b)];if(!_0x1055e2)return _0x232231[_0x4a5dca(0x1bd)](0x190)[_0x4a5dca(0x1b2)]({'success':![],'message':_0x4a5dca(0x166)});const _0x12c7a6=await this[_0x4a5dca(0x19f)][_0x4a5dca(0x1a8)](_0x2227f2,_0x1055e2);_0x232231[_0x4a5dca(0x1b2)]({'success':!![],'message':_0x4a5dca(0x198),'result':_0x12c7a6});}catch(_0x2ce200){_0x2c614f(_0x2ce200);}},this[_0x5f0511(0x19a)]=async(_0x30fbae,_0x1a6411,_0x2ae635)=>{const _0x1c0e41=_0x5f0511;try{const {shopId:_0x1c9f16}=_0x30fbae[_0x1c0e41(0x193)];await this['adminService'][_0x1c0e41(0x19a)](_0x1c9f16),_0x1a6411[_0x1c0e41(0x1b2)]({'success':!![],'message':'2FA\x20disabled\x20successfully'});}catch(_0x4bcd35){_0x2ae635(_0x4bcd35);}},this['getProcessingPaymentsStats']=async(_0x45e0c2,_0x1da64a,_0x161149)=>{const _0x17c1f3=_0x5f0511;try{const _0xba4a7f=await paymentCleanupService_1[_0x17c1f3(0x196)][_0x17c1f3(0x160)]();_0x1da64a[_0x17c1f3(0x1b2)]({'success':!![],'result':_0xba4a7f});}catch(_0xb4c074){_0x161149(_0xb4c074);}},this[_0x5f0511(0x18c)]=async(_0x3f1ab3,_0x8f7fe1,_0x113659)=>{const _0x1714dd=_0x5f0511;try{console[_0x1714dd(0x195)]('ðŸ§¹\x20Manual\x20PROCESSING\x20payment\x20cleanup\x20initiated\x20by\x20admin:\x20'+_0x3f1ab3[_0x1714dd(0x15f)]?.[_0x1714dd(0x1bb)]+'\x20('+_0x3f1ab3['user']?.['id']+')');const _0x5ed7b1=await paymentCleanupService_1[_0x1714dd(0x196)][_0x1714dd(0x188)]();_0x8f7fe1[_0x1714dd(0x1b2)]({'success':!![],'message':_0x1714dd(0x181),'result':{'processed':_0x5ed7b1[_0x1714dd(0x163)],'failed':_0x5ed7b1[_0x1714dd(0x17a)],'errors':_0x5ed7b1['errors']}});}catch(_0x19e839){_0x113659(_0x19e839);}},this[_0x5f0511(0x157)]=async(_0x3c16d3,_0x52aef8,_0x46cb27)=>{const _0x65701f=_0x5f0511;try{console[_0x65701f(0x195)](_0x65701f(0x18a)+_0x3c16d3['user']?.[_0x65701f(0x1bb)]+'\x20('+_0x3c16d3[_0x65701f(0x15f)]?.['id']+')');const _0x1a1f4e=await paymentCleanupService_1[_0x65701f(0x196)][_0x65701f(0x157)]();_0x52aef8[_0x65701f(0x1b2)]({'success':!![],'message':'PENDING\x20payment\x20cleanup\x20completed\x20successfully','result':{'processed':_0x1a1f4e[_0x65701f(0x163)],'failed':_0x1a1f4e['failed'],'errors':_0x1a1f4e['errors']}});}catch(_0xd8caec){_0x46cb27(_0xd8caec);}},this[_0x5f0511(0x178)]=async(_0x4bfa31,_0x111aaf,_0x139cfb)=>{const _0x5adef6=_0x5f0511;try{console[_0x5adef6(0x195)](_0x5adef6(0x1a7)+_0x4bfa31[_0x5adef6(0x15f)]?.[_0x5adef6(0x1bb)]+'\x20('+_0x4bfa31[_0x5adef6(0x15f)]?.['id']+')');const _0x35062c=await paymentCleanupService_1[_0x5adef6(0x196)][_0x5adef6(0x160)](),_0x34a377=await paymentCleanupService_1[_0x5adef6(0x196)][_0x5adef6(0x188)](),_0xcaac70=await paymentCleanupService_1[_0x5adef6(0x196)]['cleanupStalePendingPayments'](),_0x50e332=await paymentCleanupService_1[_0x5adef6(0x196)][_0x5adef6(0x160)]();_0x111aaf[_0x5adef6(0x1b2)]({'success':!![],'message':_0x5adef6(0x186),'result':{'cleanup':{'processing':{'processed':_0x34a377[_0x5adef6(0x163)],'failed':_0x34a377[_0x5adef6(0x17a)],'errors':_0x34a377[_0x5adef6(0x1a6)]},'pending':{'processed':_0xcaac70[_0x5adef6(0x163)],'failed':_0xcaac70['failed'],'errors':_0xcaac70[_0x5adef6(0x1a6)]},'total':{'processed':_0x34a377[_0x5adef6(0x163)]+_0xcaac70[_0x5adef6(0x163)],'failed':_0x34a377[_0x5adef6(0x17a)]+_0xcaac70[_0x5adef6(0x17a)],'errors':[..._0x34a377['errors'],..._0xcaac70[_0x5adef6(0x1a6)]]}},'statistics':{'before':_0x35062c,'after':_0x50e332,'reduced':_0x35062c[_0x5adef6(0x148)]-_0x50e332['total']}}});}catch(_0x18d9e2){_0x139cfb(_0x18d9e2);}},this['expirePaymentLinks']=async(_0x56fbee,_0x370020,_0xb1f01f)=>{const _0x21ebe5=_0x5f0511;try{const _0x1d4a87=await paymentCleanupService_1[_0x21ebe5(0x196)][_0x21ebe5(0x15e)]();_0x370020[_0x21ebe5(0x1b2)]({'success':!![],'message':_0x21ebe5(0x1bf),'result':{'expired':_0x1d4a87['expired'],'errors':_0x1d4a87[_0x21ebe5(0x1a6)]}});}catch(_0x162e5a){_0xb1f01f(_0x162e5a);}},this['changeAdminPassword']=async(_0x3c5a9f,_0x35303a,_0x5a2854)=>{const _0x5bc67c=_0x5f0511;try{const {currentPassword:_0x4df29c,newPassword:_0xf6e240,confirmNewPassword:_0x20ec5d,twoFactorToken:_0x12bbdc}=_0x3c5a9f[_0x5bc67c(0x15b)];await this[_0x5bc67c(0x19f)][_0x5bc67c(0x1ac)](_0x4df29c,_0xf6e240,_0x20ec5d,_0x12bbdc),_0x35303a[_0x5bc67c(0x1b2)]({'success':!![],'message':_0x5bc67c(0x169)});}catch(_0xac06f0){_0x5a2854(_0xac06f0);}},this[_0x5f0511(0x19b)]=async(_0x2336cd,_0x54c851,_0x599bd7)=>{const _0x4c281c=_0x5f0511;try{const _0x211af3=await this[_0x4c281c(0x19f)][_0x4c281c(0x19b)]();_0x54c851[_0x4c281c(0x1b2)]({'success':!![],'result':_0x211af3});}catch(_0x516ea7){_0x599bd7(_0x516ea7);}},this[_0x5f0511(0x156)]=async(_0x22bbbb,_0x3bd872,_0x1c0acd)=>{const _0x170c06=_0x5f0511;try{const _0x36330c=await this[_0x170c06(0x19f)][_0x170c06(0x156)]();_0x3bd872[_0x170c06(0x1b2)]({'success':!![],'result':_0x36330c});}catch(_0x5b3c39){_0x1c0acd(_0x5b3c39);}},this[_0x5f0511(0x151)]=async(_0x4a4859,_0xcbefd1,_0x509058)=>{const _0x45b736=_0x5f0511;try{const {token:_0x14e928}=_0x4a4859['body'],_0xf37b19=await this['adminService'][_0x45b736(0x151)](_0x14e928);_0xcbefd1['json']({'success':!![],'result':_0xf37b19});}catch(_0x45d296){_0x509058(_0x45d296);}},this['disableAdmin2FA']=async(_0x255caf,_0x1b6d63,_0x139e60)=>{const _0x564973=_0x5f0511;try{await this['adminService'][_0x564973(0x14e)](),_0x1b6d63[_0x564973(0x1b2)]({'success':!![],'message':_0x564973(0x1c0)});}catch(_0x49a0be){_0x139e60(_0x49a0be);}},this[_0x5f0511(0x19f)]=new adminService_1['AdminService'](),this[_0x5f0511(0x173)]=new paymentLinkService_1[(_0x5f0511(0x1a2))]();}}exports['AdminController']=AdminController;