'use strict';const a3_0x3c9d58=a3_0xaff1;(function(_0x327789,_0x1a1ff4){const _0x59b7cb=a3_0xaff1,_0x1fb8cb=_0x327789();while(!![]){try{const _0x113d89=parseInt(_0x59b7cb(0xe7))/0x1+-parseInt(_0x59b7cb(0xc1))/0x2*(parseInt(_0x59b7cb(0xe9))/0x3)+parseInt(_0x59b7cb(0xdb))/0x4+-parseInt(_0x59b7cb(0xd3))/0x5+-parseInt(_0x59b7cb(0xf2))/0x6*(-parseInt(_0x59b7cb(0xc0))/0x7)+-parseInt(_0x59b7cb(0xb6))/0x8+-parseInt(_0x59b7cb(0xe6))/0x9*(-parseInt(_0x59b7cb(0xba))/0xa);if(_0x113d89===_0x1a1ff4)break;else _0x1fb8cb['push'](_0x1fb8cb['shift']());}catch(_0x2125b9){_0x1fb8cb['push'](_0x1fb8cb['shift']());}}}(a3_0x5b79,0x40ee7));function a3_0xaff1(_0x2ffaad,_0x1979c4){_0x2ffaad=_0x2ffaad-0xb4;const _0x5b799=a3_0x5b79();let _0xaff180=_0x5b799[_0x2ffaad];return _0xaff180;}var __createBinding=this&&this[a3_0x3c9d58(0xf6)]||(Object[a3_0x3c9d58(0xec)]?function(_0xc6d8c6,_0x3e0798,_0x2b69df,_0x388808){const _0x33808a=a3_0x3c9d58;if(_0x388808===undefined)_0x388808=_0x2b69df;var _0x2e6f9c=Object['getOwnPropertyDescriptor'](_0x3e0798,_0x2b69df);(!_0x2e6f9c||(_0x33808a(0xb8)in _0x2e6f9c?!_0x3e0798[_0x33808a(0xed)]:_0x2e6f9c[_0x33808a(0xdf)]||_0x2e6f9c[_0x33808a(0xb7)]))&&(_0x2e6f9c={'enumerable':!![],'get':function(){return _0x3e0798[_0x2b69df];}}),Object['defineProperty'](_0xc6d8c6,_0x388808,_0x2e6f9c);}:function(_0x52f29a,_0x30c823,_0x4d619b,_0x5d6a10){if(_0x5d6a10===undefined)_0x5d6a10=_0x4d619b;_0x52f29a[_0x5d6a10]=_0x30c823[_0x4d619b];}),__setModuleDefault=this&&this[a3_0x3c9d58(0xd0)]||(Object[a3_0x3c9d58(0xec)]?function(_0x2b26f0,_0x4c8e52){const _0x14a156=a3_0x3c9d58;Object[_0x14a156(0xee)](_0x2b26f0,_0x14a156(0xdd),{'enumerable':!![],'value':_0x4c8e52});}:function(_0x2699a5,_0x6b7a06){const _0x4e3af3=a3_0x3c9d58;_0x2699a5[_0x4e3af3(0xdd)]=_0x6b7a06;}),__importStar=this&&this[a3_0x3c9d58(0xbb)]||(function(){var _0x7587dd=function(_0x34540c){const _0x1e928c=a3_0xaff1;return _0x7587dd=Object[_0x1e928c(0xd1)]||function(_0x577b4a){const _0x3535c4=_0x1e928c;var _0x17201e=[];for(var _0x30edf4 in _0x577b4a)if(Object[_0x3535c4(0xe0)]['hasOwnProperty'][_0x3535c4(0xcf)](_0x577b4a,_0x30edf4))_0x17201e[_0x17201e['length']]=_0x30edf4;return _0x17201e;},_0x7587dd(_0x34540c);};return function(_0x1dc013){const _0x3c3cdb=a3_0xaff1;if(_0x1dc013&&_0x1dc013[_0x3c3cdb(0xed)])return _0x1dc013;var _0x5a95b1={};if(_0x1dc013!=null){for(var _0x5a7304=_0x7587dd(_0x1dc013),_0x42e28e=0x0;_0x42e28e<_0x5a7304[_0x3c3cdb(0xe1)];_0x42e28e++)if(_0x5a7304[_0x42e28e]!=='default')__createBinding(_0x5a95b1,_0x1dc013,_0x5a7304[_0x42e28e]);}return __setModuleDefault(_0x5a95b1,_0x1dc013),_0x5a95b1;};}()),__importDefault=this&&this[a3_0x3c9d58(0xc8)]||function(_0x3f2d58){const _0x2fc373=a3_0x3c9d58;return _0x3f2d58&&_0x3f2d58[_0x2fc373(0xed)]?_0x3f2d58:{'default':_0x3f2d58};};Object[a3_0x3c9d58(0xee)](exports,'__esModule',{'value':!![]}),exports[a3_0x3c9d58(0xc2)]=exports['updateAdminBotSettings']=void 0x0;const adminBotService_1=require(a3_0x3c9d58(0xd9)),speakeasy_1=__importDefault(require('speakeasy')),bcryptjs_1=__importDefault(require('bcryptjs')),config_1=require('../config/config'),updateAdminBotSettings=async(_0x38d845,_0x34b7f8)=>{const _0x459788=a3_0x3c9d58;try{const {telegramId1:_0x560573,telegramId2:_0x2e19ac,twoFactorToken:_0x1dd3fe}=_0x38d845['body'],_0x5933da=_0x38d845[_0x459788(0xf5)]?.['id'];if(!_0x5933da)return _0x34b7f8[_0x459788(0xcd)](0x191)[_0x459788(0xd2)]({'success':![],'message':'Unauthorized'});if(config_1[_0x459788(0xf1)]['admin'][_0x459788(0xe2)]){if(!_0x1dd3fe)return _0x34b7f8[_0x459788(0xcd)](0x190)[_0x459788(0xd2)]({'success':![],'message':_0x459788(0xd6)});const _0xccef46=speakeasy_1['default'][_0x459788(0xd5)][_0x459788(0xc7)]({'secret':config_1[_0x459788(0xf1)][_0x459788(0xef)][_0x459788(0xcb)],'encoding':_0x459788(0xf3),'token':_0x1dd3fe,'window':0x2});if(!_0xccef46){let _0x593841=![];if(config_1['config'][_0x459788(0xef)][_0x459788(0xbe)]){const _0x2a5bfd=JSON[_0x459788(0xc9)](config_1[_0x459788(0xf1)][_0x459788(0xef)][_0x459788(0xbe)]);for(let _0x3dc117=0x0;_0x3dc117<_0x2a5bfd['length'];_0x3dc117++){const _0x3ae237=await bcryptjs_1['default'][_0x459788(0xd7)](_0x1dd3fe,_0x2a5bfd[_0x3dc117]);if(_0x3ae237){_0x593841=!![],_0x2a5bfd[_0x459788(0xf0)](_0x3dc117,0x1);const _0xe0787e=await Promise[_0x459788(0xc6)]()[_0x459788(0xc3)](()=>__importStar(require('fs'))),_0x58a294=await Promise[_0x459788(0xc6)]()['then'](()=>__importStar(require('path'))),_0x222d79=_0x58a294[_0x459788(0xdc)](process[_0x459788(0xb5)](),'.env');if(_0xe0787e[_0x459788(0xce)](_0x222d79)){let _0x57fd2e=_0xe0787e[_0x459788(0xeb)](_0x222d79,'utf8');const _0x4b8214=_0x57fd2e['split']('\x0a');for(let _0x2c1f82=0x0;_0x2c1f82<_0x4b8214['length'];_0x2c1f82++){if(_0x4b8214[_0x2c1f82][_0x459788(0xda)](_0x459788(0xe3))){_0x4b8214[_0x2c1f82]='ADMIN_BACKUP_CODES='+JSON[_0x459788(0xc5)](_0x2a5bfd);break;}}_0xe0787e[_0x459788(0xbd)](_0x222d79,_0x4b8214[_0x459788(0xdc)]('\x0a'),_0x459788(0xca));}break;}}}if(!_0x593841)return _0x34b7f8['status'](0x190)['json']({'success':![],'message':'Invalid\x202FA\x20token\x20or\x20backup\x20code'});}}const _0x139ef1=[];_0x560573&&_0x560573[_0x459788(0xf4)]()&&_0x139ef1[_0x459788(0xea)](_0x560573[_0x459788(0xf4)]()),_0x2e19ac&&_0x2e19ac['trim']()&&_0x139ef1[_0x459788(0xea)](_0x2e19ac['trim']()),adminBotService_1[_0x459788(0xe4)][_0x459788(0xe5)](_0x139ef1),_0x34b7f8[_0x459788(0xd2)]({'success':!![],'message':_0x459788(0xd4),'result':{'adminIds':_0x139ef1,'botActive':adminBotService_1[_0x459788(0xe4)][_0x459788(0xb9)]()[_0x459788(0xbc)]}});}catch(_0xdb64b){console['error'](_0x459788(0xc4),_0xdb64b),_0x34b7f8['status'](0x1f4)['json']({'success':![],'message':_0x459788(0xcc)});}};exports[a3_0x3c9d58(0xde)]=updateAdminBotSettings;function a3_0x5b79(){const _0x4aac34=['Error\x20updating\x20admin\x20bot\x20settings:','stringify','resolve','verify','__importDefault','parse','utf8','twoFactorSecret','Failed\x20to\x20update\x20admin\x20bot\x20settings','status','existsSync','call','__setModuleDefault','getOwnPropertyNames','json','2523410VlVQMS','Admin\x20bot\x20settings\x20updated\x20successfully','totp','2FA\x20token\x20is\x20required','compare','Failed\x20to\x20get\x20admin\x20bot\x20settings','../services/adminBotService','startsWith','2117632OfCWRw','join','default','updateAdminBotSettings','writable','prototype','length','twoFactorEnabled','ADMIN_BACKUP_CODES=','adminBotService','updateAdminIds','464769SVtSRk','4643GANvUF','error','132525NBEpIL','push','readFileSync','create','__esModule','defineProperty','admin','splice','config','12EbXGEW','base32','trim','user','__createBinding','getAdminIds','cwd','2570592RCtSVZ','configurable','get','getBotInfo','70RtDCJD','__importStar','isActive','writeFileSync','backupCodes','Error\x20getting\x20admin\x20bot\x20settings:','1769782SeBUgL','14FRfcRD','getAdminBotSettings','then'];a3_0x5b79=function(){return _0x4aac34;};return a3_0x5b79();}const getAdminBotSettings=async(_0x242b13,_0x5fcb61)=>{const _0x390417=a3_0x3c9d58;try{const _0x42304a=adminBotService_1[_0x390417(0xe4)][_0x390417(0xb4)](),_0x457d5d=adminBotService_1['adminBotService'][_0x390417(0xb9)]();_0x5fcb61[_0x390417(0xd2)]({'success':!![],'result':{'telegramId1':_0x42304a[0x0]||'','telegramId2':_0x42304a[0x1]||'',..._0x457d5d}});}catch(_0x29fb01){console[_0x390417(0xe8)](_0x390417(0xbf),_0x29fb01),_0x5fcb61['status'](0x1f4)[_0x390417(0xd2)]({'success':![],'message':_0x390417(0xd8)});}};exports['getAdminBotSettings']=getAdminBotSettings;