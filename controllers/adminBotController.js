'use strict';const a3_0x22f74a=a3_0x3078;(function(_0x9c6a02,_0x59f11e){const _0x5e6fac=a3_0x3078,_0x472e5c=_0x9c6a02();while(!![]){try{const _0x28e47a=parseInt(_0x5e6fac(0xff))/0x1*(-parseInt(_0x5e6fac(0x10a))/0x2)+parseInt(_0x5e6fac(0xdc))/0x3+-parseInt(_0x5e6fac(0x100))/0x4+parseInt(_0x5e6fac(0xf9))/0x5*(-parseInt(_0x5e6fac(0xe8))/0x6)+parseInt(_0x5e6fac(0xee))/0x7+parseInt(_0x5e6fac(0x116))/0x8+parseInt(_0x5e6fac(0xe4))/0x9;if(_0x28e47a===_0x59f11e)break;else _0x472e5c['push'](_0x472e5c['shift']());}catch(_0xc59a47){_0x472e5c['push'](_0x472e5c['shift']());}}}(a3_0x5938,0xd1b1f));function a3_0x3078(_0x4f3ead,_0x4505b5){_0x4f3ead=_0x4f3ead-0xd7;const _0x593874=a3_0x5938();let _0x307851=_0x593874[_0x4f3ead];return _0x307851;}var __createBinding=this&&this[a3_0x22f74a(0xde)]||(Object[a3_0x22f74a(0xe3)]?function(_0x4033e1,_0x3cbd75,_0x5e4e12,_0x45b2c7){const _0x3164e0=a3_0x22f74a;if(_0x45b2c7===undefined)_0x45b2c7=_0x5e4e12;var _0x3e9200=Object['getOwnPropertyDescriptor'](_0x3cbd75,_0x5e4e12);(!_0x3e9200||(_0x3164e0(0x113)in _0x3e9200?!_0x3cbd75[_0x3164e0(0x10d)]:_0x3e9200[_0x3164e0(0xe0)]||_0x3e9200[_0x3164e0(0xdb)]))&&(_0x3e9200={'enumerable':!![],'get':function(){return _0x3cbd75[_0x5e4e12];}}),Object[_0x3164e0(0xf8)](_0x4033e1,_0x45b2c7,_0x3e9200);}:function(_0x320fad,_0x4d0d6b,_0x208b2f,_0x1285bd){if(_0x1285bd===undefined)_0x1285bd=_0x208b2f;_0x320fad[_0x1285bd]=_0x4d0d6b[_0x208b2f];}),__setModuleDefault=this&&this[a3_0x22f74a(0xd9)]||(Object[a3_0x22f74a(0xe3)]?function(_0x22e10b,_0x47eba6){const _0x289dcb=a3_0x22f74a;Object[_0x289dcb(0xf8)](_0x22e10b,_0x289dcb(0xe5),{'enumerable':!![],'value':_0x47eba6});}:function(_0x101fd2,_0x38e40d){const _0x23878b=a3_0x22f74a;_0x101fd2[_0x23878b(0xe5)]=_0x38e40d;}),__importStar=this&&this['__importStar']||(function(){var _0x31f57b=function(_0x56b365){const _0x260571=a3_0x3078;return _0x31f57b=Object[_0x260571(0x114)]||function(_0x37dfdf){const _0x299703=_0x260571;var _0x3c396c=[];for(var _0x3f8e85 in _0x37dfdf)if(Object['prototype'][_0x299703(0xf5)][_0x299703(0x106)](_0x37dfdf,_0x3f8e85))_0x3c396c[_0x3c396c[_0x299703(0xeb)]]=_0x3f8e85;return _0x3c396c;},_0x31f57b(_0x56b365);};return function(_0x70f2ac){const _0x31829f=a3_0x3078;if(_0x70f2ac&&_0x70f2ac[_0x31829f(0x10d)])return _0x70f2ac;var _0x26d29f={};if(_0x70f2ac!=null){for(var _0x64c641=_0x31f57b(_0x70f2ac),_0x14c984=0x0;_0x14c984<_0x64c641[_0x31829f(0xeb)];_0x14c984++)if(_0x64c641[_0x14c984]!=='default')__createBinding(_0x26d29f,_0x70f2ac,_0x64c641[_0x14c984]);}return __setModuleDefault(_0x26d29f,_0x70f2ac),_0x26d29f;};}()),__importDefault=this&&this[a3_0x22f74a(0xf6)]||function(_0x4e2aa8){const _0x21c98e=a3_0x22f74a;return _0x4e2aa8&&_0x4e2aa8[_0x21c98e(0x10d)]?_0x4e2aa8:{'default':_0x4e2aa8};};Object[a3_0x22f74a(0xf8)](exports,a3_0x22f74a(0x10d),{'value':!![]}),exports[a3_0x22f74a(0x101)]=exports['updateAdminBotSettings']=void 0x0;const adminBotService_1=require(a3_0x22f74a(0x10f)),speakeasy_1=__importDefault(require(a3_0x22f74a(0xe6))),bcryptjs_1=__importDefault(require(a3_0x22f74a(0x10b))),config_1=require(a3_0x22f74a(0xea)),updateAdminBotSettings=async(_0x3f41bd,_0x5ad8e4)=>{const _0x470401=a3_0x22f74a;try{const {telegramId1:_0x2c4a6b,telegramId2:_0x427390,twoFactorToken:_0x196fce}=_0x3f41bd[_0x470401(0xfd)],_0x2bec41=_0x3f41bd[_0x470401(0x105)]?.['id'];if(!_0x2bec41)return _0x5ad8e4[_0x470401(0x115)](0x191)['json']({'success':![],'message':_0x470401(0xe1)});if(config_1[_0x470401(0xe9)][_0x470401(0x118)][_0x470401(0x104)]){if(!_0x196fce)return _0x5ad8e4['status'](0x190)[_0x470401(0x110)]({'success':![],'message':'2FA\x20token\x20is\x20required'});const _0x1b2a66=speakeasy_1[_0x470401(0xe5)][_0x470401(0xd8)][_0x470401(0x102)]({'secret':config_1[_0x470401(0xe9)]['admin'][_0x470401(0x107)],'encoding':_0x470401(0x108),'token':_0x196fce,'window':0x2});if(!_0x1b2a66){let _0x3334aa=![];if(config_1[_0x470401(0xe9)][_0x470401(0x118)][_0x470401(0xe2)]){const _0x2328ce=JSON['parse'](config_1['config'][_0x470401(0x118)][_0x470401(0xe2)]);for(let _0x11381d=0x0;_0x11381d<_0x2328ce[_0x470401(0xeb)];_0x11381d++){const _0x4e0c0e=await bcryptjs_1[_0x470401(0xe5)]['compare'](_0x196fce,_0x2328ce[_0x11381d]);if(_0x4e0c0e){_0x3334aa=!![],_0x2328ce[_0x470401(0xfb)](_0x11381d,0x1);const _0x18624b=await Promise[_0x470401(0xed)]()[_0x470401(0xfa)](()=>__importStar(require('fs'))),_0x445cef=await Promise[_0x470401(0xed)]()['then'](()=>__importStar(require('path'))),_0x19e874=_0x445cef[_0x470401(0x103)](process[_0x470401(0x109)](),'.env');if(_0x18624b[_0x470401(0xdf)](_0x19e874)){let _0x83f140=_0x18624b[_0x470401(0x10c)](_0x19e874,_0x470401(0xf7));const _0x5b2b6a=_0x83f140[_0x470401(0x112)]('\x0a');for(let _0x49cdf8=0x0;_0x49cdf8<_0x5b2b6a[_0x470401(0xeb)];_0x49cdf8++){if(_0x5b2b6a[_0x49cdf8][_0x470401(0xf1)](_0x470401(0xfe))){_0x5b2b6a[_0x49cdf8]=_0x470401(0xfe)+JSON['stringify'](_0x2328ce);break;}}_0x18624b[_0x470401(0xef)](_0x19e874,_0x5b2b6a[_0x470401(0x103)]('\x0a'),_0x470401(0xf7));}break;}}}if(!_0x3334aa)return _0x5ad8e4[_0x470401(0x115)](0x190)[_0x470401(0x110)]({'success':![],'message':_0x470401(0x111)});}}const _0x8fb60f=[];_0x2c4a6b&&_0x2c4a6b['trim']()&&_0x8fb60f[_0x470401(0xf2)](_0x2c4a6b[_0x470401(0xf3)]()),_0x427390&&_0x427390[_0x470401(0xf3)]()&&_0x8fb60f[_0x470401(0xf2)](_0x427390[_0x470401(0xf3)]()),adminBotService_1[_0x470401(0xda)][_0x470401(0xfc)](_0x8fb60f),_0x5ad8e4[_0x470401(0x110)]({'success':!![],'message':_0x470401(0x117),'result':{'adminIds':_0x8fb60f,'botActive':adminBotService_1[_0x470401(0xda)][_0x470401(0xec)]()[_0x470401(0xe7)]}});}catch(_0x2fbdbc){console[_0x470401(0xdd)](_0x470401(0xf4),_0x2fbdbc),_0x5ad8e4[_0x470401(0x115)](0x1f4)[_0x470401(0x110)]({'success':![],'message':'Failed\x20to\x20update\x20admin\x20bot\x20settings'});}};function a3_0x5938(){const _0x4e0079=['join','twoFactorEnabled','user','call','twoFactorSecret','base32','cwd','299444BpGNwe','bcryptjs','readFileSync','__esModule','getAdminIds','../services/adminBotService','json','Invalid\x202FA\x20token\x20or\x20backup\x20code','split','get','getOwnPropertyNames','status','6842280RXNTtu','Admin\x20bot\x20settings\x20updated\x20successfully','admin','updateAdminBotSettings','totp','__setModuleDefault','adminBotService','configurable','3057792SnRVxT','error','__createBinding','existsSync','writable','Unauthorized','backupCodes','create','136080OGKSaz','default','speakeasy','isActive','18hFPhYm','config','../config/config','length','getBotInfo','resolve','8854195ofBmdS','writeFileSync','Failed\x20to\x20get\x20admin\x20bot\x20settings','startsWith','push','trim','Error\x20updating\x20admin\x20bot\x20settings:','hasOwnProperty','__importDefault','utf8','defineProperty','556345qGZkKh','then','splice','updateAdminIds','body','ADMIN_BACKUP_CODES=','4jvRhGW','5451792OSddWm','getAdminBotSettings','verify'];a3_0x5938=function(){return _0x4e0079;};return a3_0x5938();}exports[a3_0x22f74a(0xd7)]=updateAdminBotSettings;const getAdminBotSettings=async(_0x59aba4,_0xa06110)=>{const _0x9f1fe2=a3_0x22f74a;try{const _0x54dff2=adminBotService_1[_0x9f1fe2(0xda)][_0x9f1fe2(0x10e)](),_0x10ea35=adminBotService_1[_0x9f1fe2(0xda)][_0x9f1fe2(0xec)]();_0xa06110[_0x9f1fe2(0x110)]({'success':!![],'result':{'telegramId1':_0x54dff2[0x0]||'','telegramId2':_0x54dff2[0x1]||'',..._0x10ea35}});}catch(_0x2ce432){console['error']('Error\x20getting\x20admin\x20bot\x20settings:',_0x2ce432),_0xa06110[_0x9f1fe2(0x115)](0x1f4)[_0x9f1fe2(0x110)]({'success':![],'message':_0x9f1fe2(0xf0)});}};exports[a3_0x22f74a(0x101)]=getAdminBotSettings;