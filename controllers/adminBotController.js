'use strict';const a3_0x4e2a52=a3_0x1273;(function(_0x316f9f,_0x193d44){const _0x14b19b=a3_0x1273,_0x48d241=_0x316f9f();while(!![]){try{const _0x529d43=-parseInt(_0x14b19b(0x1ed))/0x1+parseInt(_0x14b19b(0x1ea))/0x2*(-parseInt(_0x14b19b(0x1f5))/0x3)+parseInt(_0x14b19b(0x1d6))/0x4+parseInt(_0x14b19b(0x203))/0x5+-parseInt(_0x14b19b(0x1c5))/0x6*(-parseInt(_0x14b19b(0x1df))/0x7)+parseInt(_0x14b19b(0x1dc))/0x8+-parseInt(_0x14b19b(0x1c4))/0x9;if(_0x529d43===_0x193d44)break;else _0x48d241['push'](_0x48d241['shift']());}catch(_0x387113){_0x48d241['push'](_0x48d241['shift']());}}}(a3_0x5138,0xac6d1));function a3_0x1273(_0x5ab7ed,_0x385de9){_0x5ab7ed=_0x5ab7ed-0x1c4;const _0x5138d6=a3_0x5138();let _0x1273fd=_0x5138d6[_0x5ab7ed];return _0x1273fd;}var __createBinding=this&&this[a3_0x4e2a52(0x1d8)]||(Object[a3_0x4e2a52(0x1d1)]?function(_0x36cafd,_0x158b5d,_0xb79f94,_0x4c6508){const _0x2d6976=a3_0x4e2a52;if(_0x4c6508===undefined)_0x4c6508=_0xb79f94;var _0xf9769d=Object[_0x2d6976(0x1f0)](_0x158b5d,_0xb79f94);(!_0xf9769d||(_0x2d6976(0x1d2)in _0xf9769d?!_0x158b5d[_0x2d6976(0x1ee)]:_0xf9769d[_0x2d6976(0x205)]||_0xf9769d[_0x2d6976(0x1de)]))&&(_0xf9769d={'enumerable':!![],'get':function(){return _0x158b5d[_0xb79f94];}}),Object[_0x2d6976(0x1da)](_0x36cafd,_0x4c6508,_0xf9769d);}:function(_0x18eeb1,_0x2184f2,_0x1d4a1f,_0x295987){if(_0x295987===undefined)_0x295987=_0x1d4a1f;_0x18eeb1[_0x295987]=_0x2184f2[_0x1d4a1f];}),__setModuleDefault=this&&this[a3_0x4e2a52(0x1e4)]||(Object[a3_0x4e2a52(0x1d1)]?function(_0x241d13,_0x1b2d26){Object['defineProperty'](_0x241d13,'default',{'enumerable':!![],'value':_0x1b2d26});}:function(_0x44f22a,_0x4db810){const _0x2a6cc5=a3_0x4e2a52;_0x44f22a[_0x2a6cc5(0x202)]=_0x4db810;}),__importStar=this&&this[a3_0x4e2a52(0x1e9)]||(function(){var _0x17bebf=function(_0x7bc0d3){const _0x20cc53=a3_0x1273;return _0x17bebf=Object[_0x20cc53(0x1fa)]||function(_0x23695b){const _0x4daa00=_0x20cc53;var _0x50bf60=[];for(var _0x374e09 in _0x23695b)if(Object[_0x4daa00(0x1eb)][_0x4daa00(0x1c8)][_0x4daa00(0x1db)](_0x23695b,_0x374e09))_0x50bf60[_0x50bf60[_0x4daa00(0x1e3)]]=_0x374e09;return _0x50bf60;},_0x17bebf(_0x7bc0d3);};return function(_0x56aa4a){const _0x11eb82=a3_0x1273;if(_0x56aa4a&&_0x56aa4a[_0x11eb82(0x1ee)])return _0x56aa4a;var _0x46b8fc={};if(_0x56aa4a!=null){for(var _0xf8b89=_0x17bebf(_0x56aa4a),_0x2813b4=0x0;_0x2813b4<_0xf8b89[_0x11eb82(0x1e3)];_0x2813b4++)if(_0xf8b89[_0x2813b4]!==_0x11eb82(0x202))__createBinding(_0x46b8fc,_0x56aa4a,_0xf8b89[_0x2813b4]);}return __setModuleDefault(_0x46b8fc,_0x56aa4a),_0x46b8fc;};}()),__importDefault=this&&this[a3_0x4e2a52(0x1cc)]||function(_0x404331){const _0x295bec=a3_0x4e2a52;return _0x404331&&_0x404331[_0x295bec(0x1ee)]?_0x404331:{'default':_0x404331};};function a3_0x5138(){const _0x4a2553=['defineProperty','call','9304400UCfwYf','json','configurable','2798271RAfGOf','config','speakeasy','stringify','length','__setModuleDefault','Unauthorized','Admin\x20bot\x20settings\x20updated\x20successfully','Error\x20updating\x20admin\x20bot\x20settings:','isActive','__importStar','62RlkWmz','prototype','trim','1295846dIsCKy','__esModule','join','getOwnPropertyDescriptor','writeFileSync','bcryptjs','getAdminBotSettings','updateAdminIds','26697AyAIHe','totp','base32','ADMIN_BACKUP_CODES=','updateAdminBotSettings','getOwnPropertyNames','path','2FA\x20token\x20is\x20required','compare','status','splice','then','parse','default','6010275qhxVlk','error','writable','22031298ulzjyX','18ovlNVS','resolve','twoFactorSecret','hasOwnProperty','adminBotService','.env','Failed\x20to\x20get\x20admin\x20bot\x20settings','__importDefault','../config/config','../services/adminBotService','split','user','create','get','existsSync','Error\x20getting\x20admin\x20bot\x20settings:','admin','4646120ahotNp','readFileSync','__createBinding','utf8'];a3_0x5138=function(){return _0x4a2553;};return a3_0x5138();}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a3_0x4e2a52(0x1f3)]=exports[a3_0x4e2a52(0x1f9)]=void 0x0;const adminBotService_1=require(a3_0x4e2a52(0x1ce)),speakeasy_1=__importDefault(require(a3_0x4e2a52(0x1e1))),bcryptjs_1=__importDefault(require(a3_0x4e2a52(0x1f2))),config_1=require(a3_0x4e2a52(0x1cd)),updateAdminBotSettings=async(_0x42987c,_0x9b27c)=>{const _0x81c773=a3_0x4e2a52;try{const {telegramId1:_0x5e723f,telegramId2:_0x2f7bf8,twoFactorToken:_0x1f4b0e}=_0x42987c['body'],_0x39cb48=_0x42987c[_0x81c773(0x1d0)]?.['id'];if(!_0x39cb48)return _0x9b27c[_0x81c773(0x1fe)](0x191)['json']({'success':![],'message':_0x81c773(0x1e5)});if(config_1['config'][_0x81c773(0x1d5)]['twoFactorEnabled']){if(!_0x1f4b0e)return _0x9b27c[_0x81c773(0x1fe)](0x190)['json']({'success':![],'message':_0x81c773(0x1fc)});const _0x184f66=speakeasy_1[_0x81c773(0x202)][_0x81c773(0x1f6)]['verify']({'secret':config_1[_0x81c773(0x1e0)][_0x81c773(0x1d5)][_0x81c773(0x1c7)],'encoding':_0x81c773(0x1f7),'token':_0x1f4b0e,'window':0x2});if(!_0x184f66){let _0xd80053=![];if(config_1[_0x81c773(0x1e0)]['admin']['backupCodes']){const _0x5ea903=JSON[_0x81c773(0x201)](config_1[_0x81c773(0x1e0)][_0x81c773(0x1d5)]['backupCodes']);for(let _0x2f01c7=0x0;_0x2f01c7<_0x5ea903[_0x81c773(0x1e3)];_0x2f01c7++){const _0x38ddfa=await bcryptjs_1['default'][_0x81c773(0x1fd)](_0x1f4b0e,_0x5ea903[_0x2f01c7]);if(_0x38ddfa){_0xd80053=!![],_0x5ea903[_0x81c773(0x1ff)](_0x2f01c7,0x1);const _0xf7d6aa=await Promise[_0x81c773(0x1c6)]()['then'](()=>__importStar(require('fs'))),_0x3e8f09=await Promise[_0x81c773(0x1c6)]()[_0x81c773(0x200)](()=>__importStar(require(_0x81c773(0x1fb)))),_0x3e3358=_0x3e8f09[_0x81c773(0x1ef)](process['cwd'](),_0x81c773(0x1ca));if(_0xf7d6aa[_0x81c773(0x1d3)](_0x3e3358)){let _0xb08277=_0xf7d6aa[_0x81c773(0x1d7)](_0x3e3358,_0x81c773(0x1d9));const _0x5da05c=_0xb08277[_0x81c773(0x1cf)]('\x0a');for(let _0x482639=0x0;_0x482639<_0x5da05c[_0x81c773(0x1e3)];_0x482639++){if(_0x5da05c[_0x482639]['startsWith']('ADMIN_BACKUP_CODES=')){_0x5da05c[_0x482639]=_0x81c773(0x1f8)+JSON[_0x81c773(0x1e2)](_0x5ea903);break;}}_0xf7d6aa[_0x81c773(0x1f1)](_0x3e3358,_0x5da05c[_0x81c773(0x1ef)]('\x0a'),_0x81c773(0x1d9));}break;}}}if(!_0xd80053)return _0x9b27c[_0x81c773(0x1fe)](0x190)[_0x81c773(0x1dd)]({'success':![],'message':'Invalid\x202FA\x20token\x20or\x20backup\x20code'});}}const _0xb9102f=[];_0x5e723f&&_0x5e723f[_0x81c773(0x1ec)]()&&_0xb9102f['push'](_0x5e723f[_0x81c773(0x1ec)]()),_0x2f7bf8&&_0x2f7bf8['trim']()&&_0xb9102f['push'](_0x2f7bf8[_0x81c773(0x1ec)]()),adminBotService_1[_0x81c773(0x1c9)][_0x81c773(0x1f4)](_0xb9102f),_0x9b27c['json']({'success':!![],'message':_0x81c773(0x1e6),'result':{'adminIds':_0xb9102f,'botActive':adminBotService_1['adminBotService']['getBotInfo']()[_0x81c773(0x1e8)]}});}catch(_0x1f6da7){console[_0x81c773(0x204)](_0x81c773(0x1e7),_0x1f6da7),_0x9b27c['status'](0x1f4)['json']({'success':![],'message':'Failed\x20to\x20update\x20admin\x20bot\x20settings'});}};exports[a3_0x4e2a52(0x1f9)]=updateAdminBotSettings;const getAdminBotSettings=async(_0x21dca1,_0xe423aa)=>{const _0x21089d=a3_0x4e2a52;try{const _0x17c274=adminBotService_1[_0x21089d(0x1c9)]['getAdminIds'](),_0x310c76=adminBotService_1[_0x21089d(0x1c9)]['getBotInfo']();_0xe423aa[_0x21089d(0x1dd)]({'success':!![],'result':{'telegramId1':_0x17c274[0x0]||'','telegramId2':_0x17c274[0x1]||'',..._0x310c76}});}catch(_0x2de367){console[_0x21089d(0x204)](_0x21089d(0x1d4),_0x2de367),_0xe423aa[_0x21089d(0x1fe)](0x1f4)[_0x21089d(0x1dd)]({'success':![],'message':_0x21089d(0x1cb)});}};exports[a3_0x4e2a52(0x1f3)]=getAdminBotSettings;