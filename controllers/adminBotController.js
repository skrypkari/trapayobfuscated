'use strict';const a3_0x4294dd=a3_0x2e69;(function(_0x161e7f,_0x2ddd83){const _0x35a6b3=a3_0x2e69,_0x3d079e=_0x161e7f();while(!![]){try{const _0x436785=parseInt(_0x35a6b3(0xfa))/0x1+-parseInt(_0x35a6b3(0x104))/0x2+-parseInt(_0x35a6b3(0x102))/0x3*(-parseInt(_0x35a6b3(0xe5))/0x4)+parseInt(_0x35a6b3(0xe7))/0x5+parseInt(_0x35a6b3(0x113))/0x6*(parseInt(_0x35a6b3(0x111))/0x7)+parseInt(_0x35a6b3(0x103))/0x8*(parseInt(_0x35a6b3(0x107))/0x9)+-parseInt(_0x35a6b3(0xf3))/0xa;if(_0x436785===_0x2ddd83)break;else _0x3d079e['push'](_0x3d079e['shift']());}catch(_0x2814e9){_0x3d079e['push'](_0x3d079e['shift']());}}}(a3_0x3ab4,0xd12bb));var __createBinding=this&&this[a3_0x4294dd(0x114)]||(Object['create']?function(_0x14b136,_0x2fae55,_0x13c44b,_0x2eb9e1){const _0x4a13e4=a3_0x4294dd;if(_0x2eb9e1===undefined)_0x2eb9e1=_0x13c44b;var _0x5f07f8=Object['getOwnPropertyDescriptor'](_0x2fae55,_0x13c44b);(!_0x5f07f8||(_0x4a13e4(0x119)in _0x5f07f8?!_0x2fae55[_0x4a13e4(0xe8)]:_0x5f07f8[_0x4a13e4(0x101)]||_0x5f07f8[_0x4a13e4(0xec)]))&&(_0x5f07f8={'enumerable':!![],'get':function(){return _0x2fae55[_0x13c44b];}}),Object[_0x4a13e4(0x110)](_0x14b136,_0x2eb9e1,_0x5f07f8);}:function(_0x14866e,_0xa54a50,_0x2dd7bf,_0x3153e4){if(_0x3153e4===undefined)_0x3153e4=_0x2dd7bf;_0x14866e[_0x3153e4]=_0xa54a50[_0x2dd7bf];}),__setModuleDefault=this&&this[a3_0x4294dd(0x10f)]||(Object[a3_0x4294dd(0xfc)]?function(_0x3df30e,_0x13e4d6){const _0x828c53=a3_0x4294dd;Object[_0x828c53(0x110)](_0x3df30e,_0x828c53(0xf0),{'enumerable':!![],'value':_0x13e4d6});}:function(_0x5d174c,_0x383aaa){const _0xe262e6=a3_0x4294dd;_0x5d174c[_0xe262e6(0xf0)]=_0x383aaa;}),__importStar=this&&this[a3_0x4294dd(0xfd)]||(function(){var _0x2e81cc=function(_0x594179){const _0x408300=a3_0x2e69;return _0x2e81cc=Object[_0x408300(0x106)]||function(_0x2a91e9){const _0x21af96=_0x408300;var _0x65d533=[];for(var _0x3ecbf9 in _0x2a91e9)if(Object[_0x21af96(0xf9)][_0x21af96(0xe0)][_0x21af96(0x105)](_0x2a91e9,_0x3ecbf9))_0x65d533[_0x65d533['length']]=_0x3ecbf9;return _0x65d533;},_0x2e81cc(_0x594179);};return function(_0x31e490){const _0x17511d=a3_0x2e69;if(_0x31e490&&_0x31e490['__esModule'])return _0x31e490;var _0x1c674d={};if(_0x31e490!=null){for(var _0x251f8d=_0x2e81cc(_0x31e490),_0x32d154=0x0;_0x32d154<_0x251f8d[_0x17511d(0xfe)];_0x32d154++)if(_0x251f8d[_0x32d154]!==_0x17511d(0xf0))__createBinding(_0x1c674d,_0x31e490,_0x251f8d[_0x32d154]);}return __setModuleDefault(_0x1c674d,_0x31e490),_0x1c674d;};}()),__importDefault=this&&this['__importDefault']||function(_0x1a05a0){return _0x1a05a0&&_0x1a05a0['__esModule']?_0x1a05a0:{'default':_0x1a05a0};};Object[a3_0x4294dd(0x110)](exports,a3_0x4294dd(0xe8),{'value':!![]}),exports['getAdminBotSettings']=exports[a3_0x4294dd(0xf1)]=void 0x0;const adminBotService_1=require(a3_0x4294dd(0xe4)),speakeasy_1=__importDefault(require(a3_0x4294dd(0xe3))),bcryptjs_1=__importDefault(require(a3_0x4294dd(0xff))),config_1=require(a3_0x4294dd(0xf4)),updateAdminBotSettings=async(_0x997ee9,_0x26e17e)=>{const _0x5d0daf=a3_0x4294dd;try{const {telegramId1:_0x2ebc56,telegramId2:_0x1fb9af,twoFactorToken:_0x5d05de}=_0x997ee9['body'],_0x3c282c=_0x997ee9[_0x5d0daf(0xdf)]?.['id'];if(!_0x3c282c)return _0x26e17e[_0x5d0daf(0xfb)](0x191)['json']({'success':![],'message':'Unauthorized'});if(config_1[_0x5d0daf(0xdd)]['admin'][_0x5d0daf(0x108)]){if(!_0x5d05de)return _0x26e17e['status'](0x190)[_0x5d0daf(0x116)]({'success':![],'message':'2FA\x20token\x20is\x20required'});const _0x1b7ca8=speakeasy_1[_0x5d0daf(0xf0)]['totp'][_0x5d0daf(0xe6)]({'secret':config_1[_0x5d0daf(0xdd)][_0x5d0daf(0x118)][_0x5d0daf(0x109)],'encoding':_0x5d0daf(0xee),'token':_0x5d05de,'window':0x2});if(!_0x1b7ca8){let _0x1c63e2=![];if(config_1['config'][_0x5d0daf(0x118)][_0x5d0daf(0x112)]){const _0x1ca3ce=JSON[_0x5d0daf(0xf8)](config_1['config']['admin'][_0x5d0daf(0x112)]);for(let _0x56e643=0x0;_0x56e643<_0x1ca3ce[_0x5d0daf(0xfe)];_0x56e643++){const _0x1017a5=await bcryptjs_1[_0x5d0daf(0xf0)][_0x5d0daf(0x10b)](_0x5d05de,_0x1ca3ce[_0x56e643]);if(_0x1017a5){_0x1c63e2=!![],_0x1ca3ce['splice'](_0x56e643,0x1);const _0x12de63=await Promise[_0x5d0daf(0xf6)]()[_0x5d0daf(0xeb)](()=>__importStar(require('fs'))),_0x108d92=await Promise[_0x5d0daf(0xf6)]()['then'](()=>__importStar(require('path'))),_0x1170e1=_0x108d92[_0x5d0daf(0x10e)](process[_0x5d0daf(0xf5)](),'.env');if(_0x12de63['existsSync'](_0x1170e1)){let _0x1233a3=_0x12de63[_0x5d0daf(0xe1)](_0x1170e1,_0x5d0daf(0xf2));const _0x2e25e4=_0x1233a3[_0x5d0daf(0x117)]('\x0a');for(let _0x2971c9=0x0;_0x2971c9<_0x2e25e4[_0x5d0daf(0xfe)];_0x2971c9++){if(_0x2e25e4[_0x2971c9]['startsWith'](_0x5d0daf(0xe9))){_0x2e25e4[_0x2971c9]='ADMIN_BACKUP_CODES='+JSON[_0x5d0daf(0x115)](_0x1ca3ce);break;}}_0x12de63[_0x5d0daf(0xe2)](_0x1170e1,_0x2e25e4[_0x5d0daf(0x10e)]('\x0a'),'utf8');}break;}}}if(!_0x1c63e2)return _0x26e17e[_0x5d0daf(0xfb)](0x190)[_0x5d0daf(0x116)]({'success':![],'message':_0x5d0daf(0x10a)});}}const _0x438542=[];_0x2ebc56&&_0x2ebc56[_0x5d0daf(0xf7)]()&&_0x438542['push'](_0x2ebc56[_0x5d0daf(0xf7)]()),_0x1fb9af&&_0x1fb9af[_0x5d0daf(0xf7)]()&&_0x438542[_0x5d0daf(0xed)](_0x1fb9af[_0x5d0daf(0xf7)]()),adminBotService_1[_0x5d0daf(0x100)][_0x5d0daf(0xea)](_0x438542),_0x26e17e[_0x5d0daf(0x116)]({'success':!![],'message':'Admin\x20bot\x20settings\x20updated\x20successfully','result':{'adminIds':_0x438542,'botActive':adminBotService_1[_0x5d0daf(0x100)]['getBotInfo']()['isActive']}});}catch(_0x3a1205){console[_0x5d0daf(0xef)]('Error\x20updating\x20admin\x20bot\x20settings:',_0x3a1205),_0x26e17e[_0x5d0daf(0xfb)](0x1f4)[_0x5d0daf(0x116)]({'success':![],'message':_0x5d0daf(0x10c)});}};exports['updateAdminBotSettings']=updateAdminBotSettings;const getAdminBotSettings=async(_0x303381,_0x58f77a)=>{const _0x3f226b=a3_0x4294dd;try{const _0x5ee1fb=adminBotService_1[_0x3f226b(0x100)]['getAdminIds'](),_0x1937a3=adminBotService_1[_0x3f226b(0x100)][_0x3f226b(0xdb)]();_0x58f77a['json']({'success':!![],'result':{'telegramId1':_0x5ee1fb[0x0]||'','telegramId2':_0x5ee1fb[0x1]||'',..._0x1937a3}});}catch(_0x39fdb4){console[_0x3f226b(0xef)](_0x3f226b(0xde),_0x39fdb4),_0x58f77a['status'](0x1f4)[_0x3f226b(0x116)]({'success':![],'message':_0x3f226b(0xdc)});}};function a3_0x3ab4(){const _0x3b4334=['config','Error\x20getting\x20admin\x20bot\x20settings:','user','hasOwnProperty','readFileSync','writeFileSync','speakeasy','../services/adminBotService','62452ugqgaG','verify','4316930CWnKvL','__esModule','ADMIN_BACKUP_CODES=','updateAdminIds','then','configurable','push','base32','error','default','updateAdminBotSettings','utf8','20760800YZGQhc','../config/config','cwd','resolve','trim','parse','prototype','728071GBHWhm','status','create','__importStar','length','bcryptjs','adminBotService','writable','12vzWPbz','415688cigREF','1834346urNXAr','call','getOwnPropertyNames','99rvmWAd','twoFactorEnabled','twoFactorSecret','Invalid\x202FA\x20token\x20or\x20backup\x20code','compare','Failed\x20to\x20update\x20admin\x20bot\x20settings','getAdminBotSettings','join','__setModuleDefault','defineProperty','1421469msqoRi','backupCodes','48SdRyin','__createBinding','stringify','json','split','admin','get','getBotInfo','Failed\x20to\x20get\x20admin\x20bot\x20settings'];a3_0x3ab4=function(){return _0x3b4334;};return a3_0x3ab4();}function a3_0x2e69(_0x2c425a,_0x942518){_0x2c425a=_0x2c425a-0xdb;const _0x3ab49d=a3_0x3ab4();let _0x2e69ca=_0x3ab49d[_0x2c425a];return _0x2e69ca;}exports[a3_0x4294dd(0x10d)]=getAdminBotSettings;