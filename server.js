'use strict';const a45_0x5432d8=a45_0x46d4;function a45_0x46d4(_0x3aa639,_0x4578a5){_0x3aa639=_0x3aa639-0x10a;const _0x513f0d=a45_0x513f();let _0x46d4cc=_0x513f0d[_0x3aa639];return _0x46d4cc;}(function(_0x198c97,_0x5235f4){const _0xe26eac=a45_0x46d4,_0x127e98=_0x198c97();while(!![]){try{const _0x2fec94=parseInt(_0xe26eac(0x12c))/0x1+parseInt(_0xe26eac(0x148))/0x2*(parseInt(_0xe26eac(0x114))/0x3)+parseInt(_0xe26eac(0x10b))/0x4+-parseInt(_0xe26eac(0x113))/0x5+-parseInt(_0xe26eac(0x145))/0x6+-parseInt(_0xe26eac(0x134))/0x7+-parseInt(_0xe26eac(0x12d))/0x8*(-parseInt(_0xe26eac(0x119))/0x9);if(_0x2fec94===_0x5235f4)break;else _0x127e98['push'](_0x127e98['shift']());}catch(_0x1fbf5d){_0x127e98['push'](_0x127e98['shift']());}}}(a45_0x513f,0x73ab8));var __importDefault=this&&this[a45_0x5432d8(0x112)]||function(_0x1c86ed){const _0x34ca14=a45_0x5432d8;return _0x1c86ed&&_0x1c86ed[_0x34ca14(0x118)]?_0x1c86ed:{'default':_0x1c86ed};};function a45_0x513f(){const _0x5d0f32=['ðŸª™\x20Initializing\x20CoinToPay\x20status\x20checking\x20service...','./app','\x0aðŸ”„\x20Gracefully\x20shutting\x20down...','./services/coinToPayStatusService','1232448ctXRQc','âŒ\x20Initial\x20cleanup\x20failed:','defineProperty','runCleanupWithReport','stopMonitoring','coinToPayStatusService','âœ…\x20Initial\x20cleanup\x20completed\x20successfully','/api/health','$connect','domainMonitoringService','âŒ\x20Scheduled\x20cleanup\x20failed:','stopPeriodicStatusCheck','./config/database','ðŸ•\x20Payment\x20cleanup\x20scheduled\x20to\x20run\x20every\x20','default','âœ…\x20Scheduled\x20cleanup\x20completed\x20successfully','./services/telegramBotService','1546866MEpOhf','paymentCleanupService','SIGTERM','246dvcquc','nodeEnv','./services/paymentCleanupService','1678756eASJDB','ðŸ§¹\x20Initializing\x20payment\x20cleanup\x20service...','âœ…\x20Database\x20connected\x20successfully','ðŸ”\x20Initializing\x20domain\x20monitoring\x20service...','ðŸ§¹\x20Running\x20initial\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','stopPeriodicUpdates','telegramBotService','__importDefault','3626835HIZSwi','2253oTMloj','port','ðŸ§¹\x20Running\x20scheduled\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','./services/currencyService','__esModule','837XuyilX','log','production','config','âš ï¸\x20Telegram\x20bot\x20is\x20not\x20configured','$disconnect','stopBot','currencyService','username','listen','ðŸ›‘\x20Payment\x20cleanup\x20scheduler\x20stopped','ðŸŒ\x20Environment:\x20','./config/config','error','exit','SIGINT','\x20is\x20active','ðŸš€\x20Server\x20running\x20on\x20port\x20','startPeriodicStatusCheck','474707LzVqfa','55592ssgCNA','getBotInfo','isActive'];a45_0x513f=function(){return _0x5d0f32;};return a45_0x513f();}Object[a45_0x5432d8(0x136)](exports,a45_0x5432d8(0x118),{'value':!![]});const app_1=__importDefault(require(a45_0x5432d8(0x131))),config_1=require(a45_0x5432d8(0x125)),database_1=__importDefault(require(a45_0x5432d8(0x140))),telegramBotService_1=require(a45_0x5432d8(0x144)),currencyService_1=require(a45_0x5432d8(0x117)),coinToPayStatusService_1=require(a45_0x5432d8(0x133)),domainMonitoringService_1=require('./services/domainMonitoringService'),paymentCleanupService_1=require(a45_0x5432d8(0x10a));let paymentCleanupInterval=null;function startPaymentCleanupScheduler(){const _0x341787=a45_0x5432d8,_0x599dc3=0x18,_0x368e10=_0x599dc3*0x3c*0x3c*0x3e8;console['log'](_0x341787(0x141)+_0x599dc3+'\x20hours'),setTimeout(async()=>{const _0x2d1ab6=_0x341787;console[_0x2d1ab6(0x11a)](_0x2d1ab6(0x10f));try{await paymentCleanupService_1[_0x2d1ab6(0x146)][_0x2d1ab6(0x137)](),console[_0x2d1ab6(0x11a)](_0x2d1ab6(0x13a));}catch(_0x342e6a){console[_0x2d1ab6(0x126)](_0x2d1ab6(0x135),_0x342e6a);}},0x5*0x3c*0x3e8),paymentCleanupInterval=setInterval(async()=>{const _0x30947f=_0x341787;console[_0x30947f(0x11a)](_0x30947f(0x116));try{await paymentCleanupService_1[_0x30947f(0x146)]['runCleanupWithReport'](),console[_0x30947f(0x11a)](_0x30947f(0x143));}catch(_0x2afdb9){console[_0x30947f(0x126)](_0x30947f(0x13e),_0x2afdb9);}},_0x368e10);}function stopPaymentCleanupScheduler(){const _0x2ab75e=a45_0x5432d8;paymentCleanupInterval&&(clearInterval(paymentCleanupInterval),paymentCleanupInterval=null,console[_0x2ab75e(0x11a)](_0x2ab75e(0x123)));}async function startServer(){const _0x3b424b=a45_0x5432d8;try{await database_1[_0x3b424b(0x142)][_0x3b424b(0x13c)](),console[_0x3b424b(0x11a)](_0x3b424b(0x10d));const _0x4f9f47=telegramBotService_1[_0x3b424b(0x111)][_0x3b424b(0x12e)]();_0x4f9f47[_0x3b424b(0x12f)]?console[_0x3b424b(0x11a)]('âœ…\x20Telegram\x20bot\x20@'+_0x4f9f47[_0x3b424b(0x121)]+_0x3b424b(0x129)):console[_0x3b424b(0x11a)](_0x3b424b(0x11d));console[_0x3b424b(0x11a)]('ðŸ”„\x20Initializing\x20currency\x20rates\x20service...'),console['log'](_0x3b424b(0x130)),coinToPayStatusService_1[_0x3b424b(0x139)][_0x3b424b(0x12b)](),console[_0x3b424b(0x11a)](_0x3b424b(0x10e)),domainMonitoringService_1['domainMonitoringService']['startMonitoring'](),console['log'](_0x3b424b(0x10c)),startPaymentCleanupScheduler();config_1[_0x3b424b(0x11c)][_0x3b424b(0x149)]===_0x3b424b(0x11b)?app_1[_0x3b424b(0x142)][_0x3b424b(0x122)](config_1[_0x3b424b(0x11c)][_0x3b424b(0x115)],()=>{const _0x37354e=_0x3b424b;console[_0x37354e(0x11a)](_0x37354e(0x12a)+config_1[_0x37354e(0x11c)][_0x37354e(0x115)]),console[_0x37354e(0x11a)](_0x37354e(0x124)+config_1['config'][_0x37354e(0x149)]);}):app_1[_0x3b424b(0x142)][_0x3b424b(0x122)](config_1[_0x3b424b(0x11c)][_0x3b424b(0x115)],'127.1.1.159',()=>{const _0x1e71b7=_0x3b424b;console[_0x1e71b7(0x11a)](_0x1e71b7(0x12a)+config_1[_0x1e71b7(0x11c)][_0x1e71b7(0x115)]),console[_0x1e71b7(0x11a)]('ðŸŒ\x20Environment:\x20'+config_1['config'][_0x1e71b7(0x149)]),console[_0x1e71b7(0x11a)]('ðŸ“Š\x20Health\x20check:\x20http://localhost:'+config_1[_0x1e71b7(0x11c)][_0x1e71b7(0x115)]+_0x1e71b7(0x13b));});;}catch(_0x531fef){console[_0x3b424b(0x126)]('âŒ\x20Failed\x20to\x20start\x20server:',_0x531fef),process[_0x3b424b(0x127)](0x1);}}process['on'](a45_0x5432d8(0x128),async()=>{const _0xe993cb=a45_0x5432d8;console['log'](_0xe993cb(0x132)),stopPaymentCleanupScheduler(),currencyService_1['currencyService'][_0xe993cb(0x110)](),coinToPayStatusService_1[_0xe993cb(0x139)][_0xe993cb(0x13f)](),domainMonitoringService_1[_0xe993cb(0x13d)][_0xe993cb(0x138)](),telegramBotService_1[_0xe993cb(0x111)][_0xe993cb(0x11f)](),await database_1[_0xe993cb(0x142)][_0xe993cb(0x11e)](),process[_0xe993cb(0x127)](0x0);}),process['on'](a45_0x5432d8(0x147),async()=>{const _0x3ad4c3=a45_0x5432d8;console[_0x3ad4c3(0x11a)](_0x3ad4c3(0x132)),stopPaymentCleanupScheduler(),currencyService_1[_0x3ad4c3(0x120)]['stopPeriodicUpdates'](),coinToPayStatusService_1[_0x3ad4c3(0x139)][_0x3ad4c3(0x13f)](),domainMonitoringService_1[_0x3ad4c3(0x13d)][_0x3ad4c3(0x138)](),telegramBotService_1[_0x3ad4c3(0x111)][_0x3ad4c3(0x11f)](),await database_1['default'][_0x3ad4c3(0x11e)](),process[_0x3ad4c3(0x127)](0x0);}),startServer();