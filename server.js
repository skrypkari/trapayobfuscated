'use strict';const a51_0x186d15=a51_0x163e;(function(_0x69fa98,_0x30cc47){const _0x1172d1=a51_0x163e,_0x558dda=_0x69fa98();while(!![]){try{const _0x1e2cff=-parseInt(_0x1172d1(0x1db))/0x1+parseInt(_0x1172d1(0x1d5))/0x2*(parseInt(_0x1172d1(0x1dc))/0x3)+-parseInt(_0x1172d1(0x1c6))/0x4+parseInt(_0x1172d1(0x1de))/0x5*(parseInt(_0x1172d1(0x1c5))/0x6)+-parseInt(_0x1172d1(0x1e6))/0x7+-parseInt(_0x1172d1(0x1b5))/0x8*(-parseInt(_0x1172d1(0x1c8))/0x9)+parseInt(_0x1172d1(0x1e4))/0xa;if(_0x1e2cff===_0x30cc47)break;else _0x558dda['push'](_0x558dda['shift']());}catch(_0x4d1d68){_0x558dda['push'](_0x558dda['shift']());}}}(a51_0x3509,0xb26dc));var __importDefault=this&&this[a51_0x186d15(0x1d4)]||function(_0x49c7d1){const _0xcfd5ba=a51_0x186d15;return _0x49c7d1&&_0x49c7d1[_0xcfd5ba(0x1c1)]?_0x49c7d1:{'default':_0x49c7d1};};Object[a51_0x186d15(0x1ba)](exports,a51_0x186d15(0x1c1),{'value':!![]});function a51_0x163e(_0x5e3c82,_0x3a3c68){_0x5e3c82=_0x5e3c82-0x1b2;const _0x350904=a51_0x3509();let _0x163ef1=_0x350904[_0x5e3c82];return _0x163ef1;}function a51_0x3509(){const _0x37f318=['telegramBotService','./services/coinToPayStatusService','ðŸ”\x20Initializing\x20domain\x20monitoring\x20service...','exit','âœ…\x20Database\x20connected\x20successfully','./services/domainMonitoringService','114728ULZHjq','ðŸŒ\x20Environment:\x20','config','port','./services/paymentCleanupService','defineProperty','âœ…\x20Initial\x20cleanup\x20completed\x20successfully','coinToPayStatusService','domainMonitoringService','./config/database','default','startPeriodicStatusCheck','__esModule','âŒ\x20Failed\x20to\x20start\x20server:','production','ðŸª™\x20Initializing\x20CoinToPay\x20status\x20checking\x20service...','6486ziaVoz','3702136kIqcYw','âŒ\x20Initial\x20cleanup\x20failed:','432GuAVvD','\x0aðŸ”„\x20Gracefully\x20shutting\x20down...','ðŸ§¹\x20Running\x20initial\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','ðŸš€\x20Server\x20running\x20on\x20port\x20','\x20is\x20active','127.1.1.159','nodeEnv','ðŸ§¹\x20Running\x20scheduled\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','log','listen','currencyService','âœ…\x20Scheduled\x20cleanup\x20completed\x20successfully','__importDefault','2415220jWOUOw','runCleanupWithReport','stopPeriodicStatusCheck','stopMonitoring','$disconnect','username','826865IFrkZQ','3dnDBtM','./services/telegramBotService','285lnCCEi','error','$connect','stopPeriodicUpdates','SIGINT','paymentCleanupService','14467400aqsPCX','stopBot','6447644TcfyKw','ðŸ”„\x20Initializing\x20currency\x20rates\x20service...','âš ï¸\x20Telegram\x20bot\x20is\x20not\x20configured','âŒ\x20Scheduled\x20cleanup\x20failed:','/api/health'];a51_0x3509=function(){return _0x37f318;};return a51_0x3509();}const app_1=__importDefault(require('./app')),config_1=require('./config/config'),database_1=__importDefault(require(a51_0x186d15(0x1be))),telegramBotService_1=require(a51_0x186d15(0x1dd)),currencyService_1=require('./services/currencyService'),coinToPayStatusService_1=require(a51_0x186d15(0x1ec)),domainMonitoringService_1=require(a51_0x186d15(0x1b4)),paymentCleanupService_1=require(a51_0x186d15(0x1b9));let paymentCleanupInterval=null;function startPaymentCleanupScheduler(){const _0x5e44bb=a51_0x186d15,_0x503082=0x18,_0x561cf2=_0x503082*0x3c*0x3c*0x3e8;console[_0x5e44bb(0x1d0)]('ðŸ•\x20Payment\x20cleanup\x20scheduled\x20to\x20run\x20every\x20'+_0x503082+'\x20hours'),setTimeout(async()=>{const _0x4c95d1=_0x5e44bb;console[_0x4c95d1(0x1d0)](_0x4c95d1(0x1ca));try{await paymentCleanupService_1[_0x4c95d1(0x1e3)][_0x4c95d1(0x1d6)](),console['log'](_0x4c95d1(0x1bb));}catch(_0x592281){console['error'](_0x4c95d1(0x1c7),_0x592281);}},0x5*0x3c*0x3e8),paymentCleanupInterval=setInterval(async()=>{const _0x595312=_0x5e44bb;console[_0x595312(0x1d0)](_0x595312(0x1cf));try{await paymentCleanupService_1[_0x595312(0x1e3)][_0x595312(0x1d6)](),console[_0x595312(0x1d0)](_0x595312(0x1d3));}catch(_0x5ce3c3){console[_0x595312(0x1df)](_0x595312(0x1e9),_0x5ce3c3);}},_0x561cf2);}function stopPaymentCleanupScheduler(){paymentCleanupInterval&&(clearInterval(paymentCleanupInterval),paymentCleanupInterval=null,console['log']('ðŸ›‘\x20Payment\x20cleanup\x20scheduler\x20stopped'));}async function startServer(){const _0x1d87f3=a51_0x186d15;try{await database_1['default'][_0x1d87f3(0x1e0)](),console[_0x1d87f3(0x1d0)](_0x1d87f3(0x1b3));const _0x2db31f=telegramBotService_1[_0x1d87f3(0x1eb)]['getBotInfo']();_0x2db31f['isActive']?console[_0x1d87f3(0x1d0)]('âœ…\x20Telegram\x20bot\x20@'+_0x2db31f[_0x1d87f3(0x1da)]+_0x1d87f3(0x1cc)):console[_0x1d87f3(0x1d0)](_0x1d87f3(0x1e8));console[_0x1d87f3(0x1d0)](_0x1d87f3(0x1e7)),console[_0x1d87f3(0x1d0)](_0x1d87f3(0x1c4)),coinToPayStatusService_1['coinToPayStatusService'][_0x1d87f3(0x1c0)](),console[_0x1d87f3(0x1d0)](_0x1d87f3(0x1ed)),domainMonitoringService_1['domainMonitoringService']['startMonitoring'](),console[_0x1d87f3(0x1d0)]('ðŸ§¹\x20Initializing\x20payment\x20cleanup\x20service...'),startPaymentCleanupScheduler();config_1[_0x1d87f3(0x1b7)][_0x1d87f3(0x1ce)]===_0x1d87f3(0x1c3)?app_1[_0x1d87f3(0x1bf)]['listen'](config_1['config'][_0x1d87f3(0x1b8)],()=>{const _0x545e61=_0x1d87f3;console['log']('ðŸš€\x20Server\x20running\x20on\x20port\x20'+config_1[_0x545e61(0x1b7)][_0x545e61(0x1b8)]),console[_0x545e61(0x1d0)](_0x545e61(0x1b6)+config_1[_0x545e61(0x1b7)][_0x545e61(0x1ce)]);}):app_1[_0x1d87f3(0x1bf)][_0x1d87f3(0x1d1)](config_1[_0x1d87f3(0x1b7)][_0x1d87f3(0x1b8)],_0x1d87f3(0x1cd),()=>{const _0x45a713=_0x1d87f3;console[_0x45a713(0x1d0)](_0x45a713(0x1cb)+config_1['config'][_0x45a713(0x1b8)]),console['log'](_0x45a713(0x1b6)+config_1[_0x45a713(0x1b7)][_0x45a713(0x1ce)]),console['log']('ðŸ“Š\x20Health\x20check:\x20http://localhost:'+config_1['config'][_0x45a713(0x1b8)]+_0x45a713(0x1ea));});;}catch(_0x18e8f3){console[_0x1d87f3(0x1df)](_0x1d87f3(0x1c2),_0x18e8f3),process[_0x1d87f3(0x1b2)](0x1);}}process['on'](a51_0x186d15(0x1e2),async()=>{const _0x314c59=a51_0x186d15;console[_0x314c59(0x1d0)](_0x314c59(0x1c9)),stopPaymentCleanupScheduler(),currencyService_1[_0x314c59(0x1d2)][_0x314c59(0x1e1)](),coinToPayStatusService_1[_0x314c59(0x1bc)]['stopPeriodicStatusCheck'](),domainMonitoringService_1[_0x314c59(0x1bd)][_0x314c59(0x1d8)](),telegramBotService_1['telegramBotService'][_0x314c59(0x1e5)](),await database_1[_0x314c59(0x1bf)][_0x314c59(0x1d9)](),process[_0x314c59(0x1b2)](0x0);}),process['on']('SIGTERM',async()=>{const _0x312d21=a51_0x186d15;console[_0x312d21(0x1d0)](_0x312d21(0x1c9)),stopPaymentCleanupScheduler(),currencyService_1[_0x312d21(0x1d2)][_0x312d21(0x1e1)](),coinToPayStatusService_1[_0x312d21(0x1bc)][_0x312d21(0x1d7)](),domainMonitoringService_1[_0x312d21(0x1bd)][_0x312d21(0x1d8)](),telegramBotService_1[_0x312d21(0x1eb)][_0x312d21(0x1e5)](),await database_1[_0x312d21(0x1bf)]['$disconnect'](),process[_0x312d21(0x1b2)](0x0);}),startServer();