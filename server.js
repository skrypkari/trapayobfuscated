'use strict';const a39_0x1bf412=a39_0x26ae;(function(_0x1fc18e,_0x17438f){const _0x218506=a39_0x26ae,_0x32b6d0=_0x1fc18e();while(!![]){try{const _0x5e396d=-parseInt(_0x218506(0xb5))/0x1+-parseInt(_0x218506(0x97))/0x2+-parseInt(_0x218506(0xad))/0x3*(-parseInt(_0x218506(0xa7))/0x4)+-parseInt(_0x218506(0x92))/0x5+parseInt(_0x218506(0xb4))/0x6+parseInt(_0x218506(0xb1))/0x7+parseInt(_0x218506(0xa5))/0x8;if(_0x5e396d===_0x17438f)break;else _0x32b6d0['push'](_0x32b6d0['shift']());}catch(_0x5e7419){_0x32b6d0['push'](_0x32b6d0['shift']());}}}(a39_0x13e4,0xa9355));var __importDefault=this&&this['__importDefault']||function(_0x42afb9){const _0x25d364=a39_0x26ae;return _0x42afb9&&_0x42afb9[_0x25d364(0xbd)]?_0x42afb9:{'default':_0x42afb9};};Object['defineProperty'](exports,a39_0x1bf412(0xbd),{'value':!![]});const app_1=__importDefault(require('./app')),config_1=require(a39_0x1bf412(0xb8)),database_1=__importDefault(require('./config/database')),telegramBotService_1=require('./services/telegramBotService'),currencyService_1=require(a39_0x1bf412(0xc4)),coinToPayStatusService_1=require(a39_0x1bf412(0xa2)),domainMonitoringService_1=require('./services/domainMonitoringService'),paymentCleanupService_1=require(a39_0x1bf412(0x9c));function a39_0x26ae(_0x421c7a,_0x17d332){const _0x13e436=a39_0x13e4();return a39_0x26ae=function(_0x26ae73,_0x46972e){_0x26ae73=_0x26ae73-0x91;let _0x5a89d1=_0x13e436[_0x26ae73];return _0x5a89d1;},a39_0x26ae(_0x421c7a,_0x17d332);}function a39_0x13e4(){const _0x15c020=['\x20hours','127.1.1.159','3302525IyhEvM','/api/health','error','telegramBotService','paymentCleanupService','2143562SPMxSW','startMonitoring','startPeriodicStatusCheck','\x0a🔄\x20Gracefully\x20shutting\x20down...','nodeEnv','./services/paymentCleanupService','port','runCleanupWithReport','🧹\x20Running\x20initial\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','stopBot','✅\x20Scheduled\x20cleanup\x20completed\x20successfully','./services/coinToPayStatusService','stopPeriodicStatusCheck','\x20is\x20active','12065488BAurcs','🔄\x20Initializing\x20currency\x20rates\x20service...','20Pmxhkm','listen','config','🛑\x20Payment\x20cleanup\x20scheduler\x20stopped','🧹\x20Initializing\x20payment\x20cleanup\x20service...','❌\x20Scheduled\x20cleanup\x20failed:','60675rfnchj','✅\x20Telegram\x20bot\x20@','🕐\x20Payment\x20cleanup\x20scheduled\x20to\x20run\x20every\x20','domainMonitoringService','1915515zdnRiS','✅\x20Initial\x20cleanup\x20completed\x20successfully','🧹\x20Running\x20scheduled\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','8247042Knxxsf','832100ooJZgn','default','SIGTERM','./config/config','coinToPayStatusService','🪙\x20Initializing\x20CoinToPay\x20status\x20checking\x20service...','🔍\x20Initializing\x20domain\x20monitoring\x20service...','$disconnect','__esModule','log','$connect','stopMonitoring','❌\x20Failed\x20to\x20start\x20server:','currencyService','exit','./services/currencyService','isActive'];a39_0x13e4=function(){return _0x15c020;};return a39_0x13e4();}let paymentCleanupInterval=null;function startPaymentCleanupScheduler(){const _0x48dc38=a39_0x1bf412,_0x150708=0x18,_0x4c55c1=_0x150708*0x3c*0x3c*0x3e8;console[_0x48dc38(0xbe)](_0x48dc38(0xaf)+_0x150708+_0x48dc38(0xc6)),setTimeout(async()=>{const _0x50e694=_0x48dc38;console[_0x50e694(0xbe)](_0x50e694(0x9f));try{await paymentCleanupService_1[_0x50e694(0x96)][_0x50e694(0x9e)](),console[_0x50e694(0xbe)](_0x50e694(0xb2));}catch(_0x4244b6){console[_0x50e694(0x94)]('❌\x20Initial\x20cleanup\x20failed:',_0x4244b6);}},0x5*0x3c*0x3e8),paymentCleanupInterval=setInterval(async()=>{const _0x314317=_0x48dc38;console[_0x314317(0xbe)](_0x314317(0xb3));try{await paymentCleanupService_1[_0x314317(0x96)][_0x314317(0x9e)](),console[_0x314317(0xbe)](_0x314317(0xa1));}catch(_0x19b7f9){console['error'](_0x314317(0xac),_0x19b7f9);}},_0x4c55c1);}function stopPaymentCleanupScheduler(){const _0x9c968f=a39_0x1bf412;paymentCleanupInterval&&(clearInterval(paymentCleanupInterval),paymentCleanupInterval=null,console['log'](_0x9c968f(0xaa)));}async function startServer(){const _0x2ae311=a39_0x1bf412;try{await database_1['default'][_0x2ae311(0xbf)](),console[_0x2ae311(0xbe)]('✅\x20Database\x20connected\x20successfully');const _0x56d430=telegramBotService_1[_0x2ae311(0x95)]['getBotInfo']();_0x56d430[_0x2ae311(0xc5)]?console[_0x2ae311(0xbe)](_0x2ae311(0xae)+_0x56d430['username']+_0x2ae311(0xa4)):console[_0x2ae311(0xbe)]('⚠️\x20Telegram\x20bot\x20is\x20not\x20configured'),console[_0x2ae311(0xbe)](_0x2ae311(0xa6)),console['log'](_0x2ae311(0xba)),coinToPayStatusService_1[_0x2ae311(0xb9)][_0x2ae311(0x99)](),console[_0x2ae311(0xbe)](_0x2ae311(0xbb)),domainMonitoringService_1[_0x2ae311(0xb0)][_0x2ae311(0x98)](),console[_0x2ae311(0xbe)](_0x2ae311(0xab)),startPaymentCleanupScheduler(),app_1['default'][_0x2ae311(0xa8)](config_1[_0x2ae311(0xa9)][_0x2ae311(0x9d)],_0x2ae311(0x91),()=>{const _0x1fba00=_0x2ae311;console['log']('🚀\x20Server\x20running\x20on\x20port\x20'+config_1[_0x1fba00(0xa9)][_0x1fba00(0x9d)]),console[_0x1fba00(0xbe)]('🌍\x20Environment:\x20'+config_1[_0x1fba00(0xa9)][_0x1fba00(0x9b)]),console[_0x1fba00(0xbe)]('📊\x20Health\x20check:\x20http://localhost:'+config_1[_0x1fba00(0xa9)]['port']+_0x1fba00(0x93));});}catch(_0x3178f9){console['error'](_0x2ae311(0xc1),_0x3178f9),process[_0x2ae311(0xc3)](0x1);}}process['on']('SIGINT',async()=>{const _0x413963=a39_0x1bf412;console['log']('\x0a🔄\x20Gracefully\x20shutting\x20down...'),stopPaymentCleanupScheduler(),currencyService_1[_0x413963(0xc2)]['stopPeriodicUpdates'](),coinToPayStatusService_1[_0x413963(0xb9)]['stopPeriodicStatusCheck'](),domainMonitoringService_1['domainMonitoringService'][_0x413963(0xc0)](),telegramBotService_1[_0x413963(0x95)][_0x413963(0xa0)](),await database_1[_0x413963(0xb6)]['$disconnect'](),process[_0x413963(0xc3)](0x0);}),process['on'](a39_0x1bf412(0xb7),async()=>{const _0x20d696=a39_0x1bf412;console[_0x20d696(0xbe)](_0x20d696(0x9a)),stopPaymentCleanupScheduler(),currencyService_1['currencyService']['stopPeriodicUpdates'](),coinToPayStatusService_1[_0x20d696(0xb9)][_0x20d696(0xa3)](),domainMonitoringService_1[_0x20d696(0xb0)]['stopMonitoring'](),telegramBotService_1['telegramBotService'][_0x20d696(0xa0)](),await database_1[_0x20d696(0xb6)][_0x20d696(0xbc)](),process[_0x20d696(0xc3)](0x0);}),startServer();