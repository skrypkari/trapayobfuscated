'use strict';const a51_0x384bab=a51_0x1cd7;function a51_0x500d(){const _0x3bd699=['stopBot','runCleanupWithReport','391237podSrY','__importDefault','âš ï¸\x20Telegram\x20bot\x20is\x20not\x20configured','log','currencyService','production','port','78TdgfLI','\x0aðŸ”„\x20Gracefully\x20shutting\x20down...','ðŸ›‘\x20Payment\x20cleanup\x20scheduler\x20stopped','paymentCleanupService','ðŸ“Š\x20Health\x20check:\x20http://localhost:','./services/currencyService','__esModule','10YpfXbX','telegramBotService','./services/coinToPayStatusService','\x20hours','./config/config','config','ðŸ•\x20Payment\x20cleanup\x20scheduled\x20to\x20run\x20every\x20','defineProperty','6420552yJDPxe','ðŸ”\x20Initializing\x20domain\x20monitoring\x20service...','âŒ\x20Initial\x20cleanup\x20failed:','domainMonitoringService','ðŸ§¹\x20Running\x20scheduled\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','getBotInfo','âŒ\x20Scheduled\x20cleanup\x20failed:','./app','username','ðŸ§¹\x20Running\x20initial\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','2hElgFX','âœ…\x20Database\x20connected\x20successfully','442805WCNgOC','nodeEnv','5571650zeNDBx','default','coinToPayStatusService','stopPeriodicUpdates','ðŸ§¹\x20Initializing\x20payment\x20cleanup\x20service...','ðŸ”„\x20Initializing\x20currency\x20rates\x20service...','stopPeriodicStatusCheck','ðŸš€\x20Server\x20running\x20on\x20port\x20','error','stopMonitoring','./config/database','$disconnect','exit','./services/domainMonitoringService','17661033EnNhvn','3931836NjMhXq','âœ…\x20Scheduled\x20cleanup\x20completed\x20successfully','ðŸŒ\x20Environment:\x20','4090341xGModH','127.1.1.159','SIGINT'];a51_0x500d=function(){return _0x3bd699;};return a51_0x500d();}function a51_0x1cd7(_0x571ca7,_0x4eab3b){_0x571ca7=_0x571ca7-0x97;const _0x500dd9=a51_0x500d();let _0x1cd7ea=_0x500dd9[_0x571ca7];return _0x1cd7ea;}(function(_0x6253c7,_0x229b65){const _0x3d90fe=a51_0x1cd7,_0x5730b7=_0x6253c7();while(!![]){try{const _0x5af68b=parseInt(_0x3d90fe(0xbd))/0x1+parseInt(_0x3d90fe(0xa2))/0x2*(-parseInt(_0x3d90fe(0xb8))/0x3)+parseInt(_0x3d90fe(0xb5))/0x4+parseInt(_0x3d90fe(0xa4))/0x5*(parseInt(_0x3d90fe(0xc4))/0x6)+parseInt(_0x3d90fe(0xa6))/0x7+parseInt(_0x3d90fe(0x98))/0x8+parseInt(_0x3d90fe(0xb4))/0x9*(-parseInt(_0x3d90fe(0xcb))/0xa);if(_0x5af68b===_0x229b65)break;else _0x5730b7['push'](_0x5730b7['shift']());}catch(_0x3d2683){_0x5730b7['push'](_0x5730b7['shift']());}}}(a51_0x500d,0xc2e10));var __importDefault=this&&this[a51_0x384bab(0xbe)]||function(_0x203537){return _0x203537&&_0x203537['__esModule']?_0x203537:{'default':_0x203537};};Object[a51_0x384bab(0x97)](exports,a51_0x384bab(0xca),{'value':!![]});const app_1=__importDefault(require(a51_0x384bab(0x9f))),config_1=require(a51_0x384bab(0xcf)),database_1=__importDefault(require(a51_0x384bab(0xb0))),telegramBotService_1=require('./services/telegramBotService'),currencyService_1=require(a51_0x384bab(0xc9)),coinToPayStatusService_1=require(a51_0x384bab(0xcd)),domainMonitoringService_1=require(a51_0x384bab(0xb3)),paymentCleanupService_1=require('./services/paymentCleanupService');let paymentCleanupInterval=null;function startPaymentCleanupScheduler(){const _0x21f66a=a51_0x384bab,_0x3f26b9=0x18,_0x58eb83=_0x3f26b9*0x3c*0x3c*0x3e8;console[_0x21f66a(0xc0)](_0x21f66a(0xd1)+_0x3f26b9+_0x21f66a(0xce)),setTimeout(async()=>{const _0x12067b=_0x21f66a;console[_0x12067b(0xc0)](_0x12067b(0xa1));try{await paymentCleanupService_1[_0x12067b(0xc7)][_0x12067b(0xbc)](),console[_0x12067b(0xc0)]('âœ…\x20Initial\x20cleanup\x20completed\x20successfully');}catch(_0x4191c5){console[_0x12067b(0xae)](_0x12067b(0x9a),_0x4191c5);}},0x5*0x3c*0x3e8),paymentCleanupInterval=setInterval(async()=>{const _0x30f23e=_0x21f66a;console['log'](_0x30f23e(0x9c));try{await paymentCleanupService_1['paymentCleanupService'][_0x30f23e(0xbc)](),console[_0x30f23e(0xc0)](_0x30f23e(0xb6));}catch(_0x513ff5){console['error'](_0x30f23e(0x9e),_0x513ff5);}},_0x58eb83);}function stopPaymentCleanupScheduler(){const _0x4457db=a51_0x384bab;paymentCleanupInterval&&(clearInterval(paymentCleanupInterval),paymentCleanupInterval=null,console['log'](_0x4457db(0xc6)));}async function startServer(){const _0x23074c=a51_0x384bab;try{await database_1[_0x23074c(0xa7)]['$connect'](),console[_0x23074c(0xc0)](_0x23074c(0xa3));const _0x14a3f4=telegramBotService_1[_0x23074c(0xcc)][_0x23074c(0x9d)]();_0x14a3f4['isActive']?console[_0x23074c(0xc0)]('âœ…\x20Telegram\x20bot\x20@'+_0x14a3f4[_0x23074c(0xa0)]+'\x20is\x20active'):console[_0x23074c(0xc0)](_0x23074c(0xbf));console['log'](_0x23074c(0xab)),console[_0x23074c(0xc0)]('ðŸª™\x20Initializing\x20CoinToPay\x20status\x20checking\x20service...'),coinToPayStatusService_1['coinToPayStatusService']['startPeriodicStatusCheck'](),console[_0x23074c(0xc0)](_0x23074c(0x99)),domainMonitoringService_1[_0x23074c(0x9b)]['startMonitoring'](),console[_0x23074c(0xc0)](_0x23074c(0xaa)),startPaymentCleanupScheduler();config_1['config'][_0x23074c(0xa5)]===_0x23074c(0xc2)?app_1['default']['listen'](config_1['config'][_0x23074c(0xc3)],()=>{const _0x1cb655=_0x23074c;console['log'](_0x1cb655(0xad)+config_1['config'][_0x1cb655(0xc3)]),console[_0x1cb655(0xc0)](_0x1cb655(0xb7)+config_1['config'][_0x1cb655(0xa5)]);}):app_1[_0x23074c(0xa7)]['listen'](config_1[_0x23074c(0xd0)][_0x23074c(0xc3)],_0x23074c(0xb9),()=>{const _0x4091cb=_0x23074c;console[_0x4091cb(0xc0)](_0x4091cb(0xad)+config_1[_0x4091cb(0xd0)][_0x4091cb(0xc3)]),console['log'](_0x4091cb(0xb7)+config_1[_0x4091cb(0xd0)][_0x4091cb(0xa5)]),console[_0x4091cb(0xc0)](_0x4091cb(0xc8)+config_1['config'][_0x4091cb(0xc3)]+'/api/health');});;}catch(_0x3a4e35){console[_0x23074c(0xae)]('âŒ\x20Failed\x20to\x20start\x20server:',_0x3a4e35),process[_0x23074c(0xb2)](0x1);}}process['on'](a51_0x384bab(0xba),async()=>{const _0x15f2b8=a51_0x384bab;console[_0x15f2b8(0xc0)]('\x0aðŸ”„\x20Gracefully\x20shutting\x20down...'),stopPaymentCleanupScheduler(),currencyService_1[_0x15f2b8(0xc1)][_0x15f2b8(0xa9)](),coinToPayStatusService_1[_0x15f2b8(0xa8)]['stopPeriodicStatusCheck'](),domainMonitoringService_1[_0x15f2b8(0x9b)][_0x15f2b8(0xaf)](),telegramBotService_1[_0x15f2b8(0xcc)]['stopBot'](),await database_1[_0x15f2b8(0xa7)]['$disconnect'](),process[_0x15f2b8(0xb2)](0x0);}),process['on']('SIGTERM',async()=>{const _0x372210=a51_0x384bab;console[_0x372210(0xc0)](_0x372210(0xc5)),stopPaymentCleanupScheduler(),currencyService_1['currencyService'][_0x372210(0xa9)](),coinToPayStatusService_1[_0x372210(0xa8)][_0x372210(0xac)](),domainMonitoringService_1[_0x372210(0x9b)]['stopMonitoring'](),telegramBotService_1[_0x372210(0xcc)][_0x372210(0xbb)](),await database_1[_0x372210(0xa7)][_0x372210(0xb1)](),process[_0x372210(0xb2)](0x0);}),startServer();