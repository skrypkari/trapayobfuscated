'use strict';const a47_0x2951e3=a47_0x3416;(function(_0x11fe2d,_0x4f7c9f){const _0x4453d9=a47_0x3416,_0x4c4ae2=_0x11fe2d();while(!![]){try{const _0x3cc3ba=parseInt(_0x4453d9(0x1f2))/0x1+parseInt(_0x4453d9(0x1ca))/0x2+-parseInt(_0x4453d9(0x1fc))/0x3*(parseInt(_0x4453d9(0x1d7))/0x4)+-parseInt(_0x4453d9(0x1d9))/0x5+-parseInt(_0x4453d9(0x1e2))/0x6*(-parseInt(_0x4453d9(0x1cc))/0x7)+-parseInt(_0x4453d9(0x1e3))/0x8*(parseInt(_0x4453d9(0x1f6))/0x9)+-parseInt(_0x4453d9(0x1e1))/0xa*(-parseInt(_0x4453d9(0x1c9))/0xb);if(_0x3cc3ba===_0x4f7c9f)break;else _0x4c4ae2['push'](_0x4c4ae2['shift']());}catch(_0x3086fe){_0x4c4ae2['push'](_0x4c4ae2['shift']());}}}(a47_0xa359,0x73920));var __importDefault=this&&this['__importDefault']||function(_0x437c7c){const _0x5e9572=a47_0x3416;return _0x437c7c&&_0x437c7c[_0x5e9572(0x1fe)]?_0x437c7c:{'default':_0x437c7c};};Object[a47_0x2951e3(0x1f0)](exports,'__esModule',{'value':!![]});const app_1=__importDefault(require(a47_0x2951e3(0x1e4))),config_1=require(a47_0x2951e3(0x1e5)),database_1=__importDefault(require('./config/database')),telegramBotService_1=require('./services/telegramBotService'),currencyService_1=require(a47_0x2951e3(0x1da)),coinToPayStatusService_1=require('./services/coinToPayStatusService'),domainMonitoringService_1=require('./services/domainMonitoringService'),paymentCleanupService_1=require(a47_0x2951e3(0x1dd));let paymentCleanupInterval=null;function a47_0x3416(_0x13f078,_0x415450){_0x13f078=_0x13f078-0x1c3;const _0xa359f5=a47_0xa359();let _0x34169e=_0xa359f5[_0x13f078];return _0x34169e;}function startPaymentCleanupScheduler(){const _0x283f58=a47_0x2951e3,_0x488c0b=0x18,_0x3d121e=_0x488c0b*0x3c*0x3c*0x3e8;console[_0x283f58(0x1c7)](_0x283f58(0x1c6)+_0x488c0b+'\x20hours'),setTimeout(async()=>{const _0x517f07=_0x283f58;console[_0x517f07(0x1c7)](_0x517f07(0x1d8));try{await paymentCleanupService_1[_0x517f07(0x1f8)]['runCleanupWithReport'](),console['log'](_0x517f07(0x1df));}catch(_0x43ef93){console[_0x517f07(0x1f7)](_0x517f07(0x1ea),_0x43ef93);}},0x5*0x3c*0x3e8),paymentCleanupInterval=setInterval(async()=>{const _0x3f8eb8=_0x283f58;console[_0x3f8eb8(0x1c7)](_0x3f8eb8(0x1de));try{await paymentCleanupService_1[_0x3f8eb8(0x1f8)][_0x3f8eb8(0x1cf)](),console[_0x3f8eb8(0x1c7)](_0x3f8eb8(0x1eb));}catch(_0x5134fa){console[_0x3f8eb8(0x1f7)](_0x3f8eb8(0x1f5),_0x5134fa);}},_0x3d121e);}function stopPaymentCleanupScheduler(){const _0x257c78=a47_0x2951e3;paymentCleanupInterval&&(clearInterval(paymentCleanupInterval),paymentCleanupInterval=null,console[_0x257c78(0x1c7)](_0x257c78(0x1d5)));}function a47_0xa359(){const _0x386eaa=['username','456SBoQoS','telegramBotService','__esModule','startPeriodicStatusCheck','\x0aðŸ”„\x20Gracefully\x20shutting\x20down...','127.1.1.159','ðŸ•\x20Payment\x20cleanup\x20scheduled\x20to\x20run\x20every\x20','log','ðŸ”\x20Initializing\x20domain\x20monitoring\x20service...','255695cfdTUz','767430VcxHoy','ðŸ§¹\x20Initializing\x20payment\x20cleanup\x20service...','9205ClDGeQ','$connect','stopPeriodicUpdates','runCleanupWithReport','coinToPayStatusService','currencyService','ðŸ“Š\x20Health\x20check:\x20http://localhost:','stopMonitoring','âš ï¸\x20Telegram\x20bot\x20is\x20not\x20configured','ðŸ›‘\x20Payment\x20cleanup\x20scheduler\x20stopped','listen','13172iQMpPY','ðŸ§¹\x20Running\x20initial\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','3210930hSEQDD','./services/currencyService','/api/health','ðŸŒ\x20Environment:\x20','./services/paymentCleanupService','ðŸ§¹\x20Running\x20scheduled\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','âœ…\x20Initial\x20cleanup\x20completed\x20successfully','config','370UsROXJ','1818Hguyme','1416yhHVWc','./app','./config/config','domainMonitoringService','isActive','port','exit','âŒ\x20Initial\x20cleanup\x20failed:','âœ…\x20Scheduled\x20cleanup\x20completed\x20successfully','ðŸš€\x20Server\x20running\x20on\x20port\x20','stopPeriodicStatusCheck','nodeEnv','$disconnect','defineProperty','SIGINT','104322ZcVXRC','default','\x20is\x20active','âŒ\x20Scheduled\x20cleanup\x20failed:','6633lglPbZ','error','paymentCleanupService','stopBot','startMonitoring'];a47_0xa359=function(){return _0x386eaa;};return a47_0xa359();}async function startServer(){const _0x28d82d=a47_0x2951e3;try{await database_1['default'][_0x28d82d(0x1cd)](),console[_0x28d82d(0x1c7)]('âœ…\x20Database\x20connected\x20successfully');const _0x3de876=telegramBotService_1[_0x28d82d(0x1fd)]['getBotInfo']();_0x3de876[_0x28d82d(0x1e7)]?console['log']('âœ…\x20Telegram\x20bot\x20@'+_0x3de876[_0x28d82d(0x1fb)]+_0x28d82d(0x1f4)):console[_0x28d82d(0x1c7)](_0x28d82d(0x1d4));console[_0x28d82d(0x1c7)]('ðŸ”„\x20Initializing\x20currency\x20rates\x20service...'),console[_0x28d82d(0x1c7)]('ðŸª™\x20Initializing\x20CoinToPay\x20status\x20checking\x20service...'),coinToPayStatusService_1[_0x28d82d(0x1d0)][_0x28d82d(0x1c3)](),console[_0x28d82d(0x1c7)](_0x28d82d(0x1c8)),domainMonitoringService_1[_0x28d82d(0x1e6)][_0x28d82d(0x1fa)](),console[_0x28d82d(0x1c7)](_0x28d82d(0x1cb)),startPaymentCleanupScheduler();config_1[_0x28d82d(0x1e0)][_0x28d82d(0x1ee)]==='production'?app_1[_0x28d82d(0x1f3)]['listen'](config_1[_0x28d82d(0x1e0)]['port'],()=>{const _0x34b8f9=_0x28d82d;console[_0x34b8f9(0x1c7)](_0x34b8f9(0x1ec)+config_1[_0x34b8f9(0x1e0)][_0x34b8f9(0x1e8)]),console[_0x34b8f9(0x1c7)](_0x34b8f9(0x1dc)+config_1[_0x34b8f9(0x1e0)]['nodeEnv']);}):app_1['default'][_0x28d82d(0x1d6)](config_1[_0x28d82d(0x1e0)][_0x28d82d(0x1e8)],_0x28d82d(0x1c5),()=>{const _0x5bb896=_0x28d82d;console['log'](_0x5bb896(0x1ec)+config_1[_0x5bb896(0x1e0)][_0x5bb896(0x1e8)]),console['log']('ðŸŒ\x20Environment:\x20'+config_1[_0x5bb896(0x1e0)]['nodeEnv']),console[_0x5bb896(0x1c7)](_0x5bb896(0x1d2)+config_1['config'][_0x5bb896(0x1e8)]+_0x5bb896(0x1db));});;}catch(_0x538969){console['error']('âŒ\x20Failed\x20to\x20start\x20server:',_0x538969),process[_0x28d82d(0x1e9)](0x1);}}process['on'](a47_0x2951e3(0x1f1),async()=>{const _0x49cb66=a47_0x2951e3;console[_0x49cb66(0x1c7)](_0x49cb66(0x1c4)),stopPaymentCleanupScheduler(),currencyService_1[_0x49cb66(0x1d1)][_0x49cb66(0x1ce)](),coinToPayStatusService_1[_0x49cb66(0x1d0)][_0x49cb66(0x1ed)](),domainMonitoringService_1[_0x49cb66(0x1e6)]['stopMonitoring'](),telegramBotService_1[_0x49cb66(0x1fd)][_0x49cb66(0x1f9)](),await database_1[_0x49cb66(0x1f3)][_0x49cb66(0x1ef)](),process[_0x49cb66(0x1e9)](0x0);}),process['on']('SIGTERM',async()=>{const _0x3f80bf=a47_0x2951e3;console[_0x3f80bf(0x1c7)](_0x3f80bf(0x1c4)),stopPaymentCleanupScheduler(),currencyService_1[_0x3f80bf(0x1d1)][_0x3f80bf(0x1ce)](),coinToPayStatusService_1['coinToPayStatusService']['stopPeriodicStatusCheck'](),domainMonitoringService_1[_0x3f80bf(0x1e6)][_0x3f80bf(0x1d3)](),telegramBotService_1[_0x3f80bf(0x1fd)]['stopBot'](),await database_1[_0x3f80bf(0x1f3)][_0x3f80bf(0x1ef)](),process[_0x3f80bf(0x1e9)](0x0);}),startServer();