'use strict';const a39_0x8d3bf3=a39_0x3c73;function a39_0x3c73(_0x5efe30,_0x134711){const _0x1e2f05=a39_0x1e2f();return a39_0x3c73=function(_0x3c73f7,_0x2454ed){_0x3c73f7=_0x3c73f7-0x15a;let _0x50d2ef=_0x1e2f05[_0x3c73f7];return _0x50d2ef;},a39_0x3c73(_0x5efe30,_0x134711);}(function(_0x47c26b,_0x3fd5c2){const _0x291b8b=a39_0x3c73,_0x780a37=_0x47c26b();while(!![]){try{const _0x506bd4=parseInt(_0x291b8b(0x170))/0x1+-parseInt(_0x291b8b(0x18d))/0x2+parseInt(_0x291b8b(0x194))/0x3*(parseInt(_0x291b8b(0x17a))/0x4)+-parseInt(_0x291b8b(0x16b))/0x5*(-parseInt(_0x291b8b(0x161))/0x6)+-parseInt(_0x291b8b(0x175))/0x7*(-parseInt(_0x291b8b(0x167))/0x8)+-parseInt(_0x291b8b(0x177))/0x9*(parseInt(_0x291b8b(0x15a))/0xa)+-parseInt(_0x291b8b(0x179))/0xb*(parseInt(_0x291b8b(0x18e))/0xc);if(_0x506bd4===_0x3fd5c2)break;else _0x780a37['push'](_0x780a37['shift']());}catch(_0x4c7d32){_0x780a37['push'](_0x780a37['shift']());}}}(a39_0x1e2f,0x2b223));var __importDefault=this&&this[a39_0x8d3bf3(0x17e)]||function(_0x4cce63){const _0x442f9e=a39_0x8d3bf3;return _0x4cce63&&_0x4cce63[_0x442f9e(0x17c)]?_0x4cce63:{'default':_0x4cce63};};Object[a39_0x8d3bf3(0x181)](exports,a39_0x8d3bf3(0x17c),{'value':!![]});const app_1=__importDefault(require(a39_0x8d3bf3(0x165))),config_1=require('./config/config'),database_1=__importDefault(require('./config/database')),telegramBotService_1=require(a39_0x8d3bf3(0x16f)),currencyService_1=require(a39_0x8d3bf3(0x17b)),coinToPayStatusService_1=require(a39_0x8d3bf3(0x190)),domainMonitoringService_1=require(a39_0x8d3bf3(0x195)),paymentCleanupService_1=require('./services/paymentCleanupService');let paymentCleanupInterval=null;function startPaymentCleanupScheduler(){const _0x182866=a39_0x8d3bf3,_0x4002b3=0x18,_0x5d7891=_0x4002b3*0x3c*0x3c*0x3e8;console[_0x182866(0x168)](_0x182866(0x196)+_0x4002b3+_0x182866(0x184)),setTimeout(async()=>{const _0x4f873c=_0x182866;console[_0x4f873c(0x168)](_0x4f873c(0x198));try{await paymentCleanupService_1['paymentCleanupService'][_0x4f873c(0x192)](),console[_0x4f873c(0x168)]('✅\x20Initial\x20cleanup\x20completed\x20successfully');}catch(_0x2d4d23){console[_0x4f873c(0x15d)](_0x4f873c(0x166),_0x2d4d23);}},0x5*0x3c*0x3e8),paymentCleanupInterval=setInterval(async()=>{const _0x3ac29e=_0x182866;console[_0x3ac29e(0x168)](_0x3ac29e(0x17f));try{await paymentCleanupService_1['paymentCleanupService'][_0x3ac29e(0x192)](),console[_0x3ac29e(0x168)](_0x3ac29e(0x197));}catch(_0x52dabd){console[_0x3ac29e(0x15d)](_0x3ac29e(0x16c),_0x52dabd);}},_0x5d7891);}function stopPaymentCleanupScheduler(){const _0x512878=a39_0x8d3bf3;paymentCleanupInterval&&(clearInterval(paymentCleanupInterval),paymentCleanupInterval=null,console[_0x512878(0x168)](_0x512878(0x182)));}async function startServer(){const _0x8888bf=a39_0x8d3bf3;try{await database_1[_0x8888bf(0x193)][_0x8888bf(0x15b)](),console[_0x8888bf(0x168)](_0x8888bf(0x172));const _0x1a3b6e=telegramBotService_1[_0x8888bf(0x180)][_0x8888bf(0x18c)]();_0x1a3b6e[_0x8888bf(0x183)]?console['log'](_0x8888bf(0x162)+_0x1a3b6e[_0x8888bf(0x171)]+_0x8888bf(0x169)):console[_0x8888bf(0x168)](_0x8888bf(0x186)),console['log']('🔄\x20Initializing\x20currency\x20rates\x20service...'),console[_0x8888bf(0x168)](_0x8888bf(0x18b)),coinToPayStatusService_1[_0x8888bf(0x16d)][_0x8888bf(0x191)](),console['log'](_0x8888bf(0x199)),domainMonitoringService_1[_0x8888bf(0x163)][_0x8888bf(0x187)](),console['log'](_0x8888bf(0x18f)),startPaymentCleanupScheduler(),app_1[_0x8888bf(0x193)][_0x8888bf(0x15f)](config_1[_0x8888bf(0x174)][_0x8888bf(0x18a)],_0x8888bf(0x185),()=>{const _0x37af72=_0x8888bf;console[_0x37af72(0x168)](_0x37af72(0x16a)+config_1[_0x37af72(0x174)][_0x37af72(0x18a)]),console[_0x37af72(0x168)]('🌍\x20Environment:\x20'+config_1[_0x37af72(0x174)][_0x37af72(0x16e)]),console[_0x37af72(0x168)](_0x37af72(0x189)+config_1[_0x37af72(0x174)]['port']+'/api/health');});}catch(_0x2a376c){console[_0x8888bf(0x15d)]('❌\x20Failed\x20to\x20start\x20server:',_0x2a376c),process[_0x8888bf(0x173)](0x1);}}function a39_0x1e2f(){const _0x4bff3e=['10341seSbtY','stopMonitoring','2499519eJbmIM','15940gHQMJn','./services/currencyService','__esModule','currencyService','__importDefault','🧹\x20Running\x20scheduled\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','telegramBotService','defineProperty','🛑\x20Payment\x20cleanup\x20scheduler\x20stopped','isActive','\x20hours','127.1.1.159','⚠️\x20Telegram\x20bot\x20is\x20not\x20configured','startMonitoring','stopPeriodicStatusCheck','📊\x20Health\x20check:\x20http://localhost:','port','🪙\x20Initializing\x20CoinToPay\x20status\x20checking\x20service...','getBotInfo','50426wGvWDx','12csgDdu','🧹\x20Initializing\x20payment\x20cleanup\x20service...','./services/coinToPayStatusService','startPeriodicStatusCheck','runCleanupWithReport','default','39ykbvDe','./services/domainMonitoringService','🕐\x20Payment\x20cleanup\x20scheduled\x20to\x20run\x20every\x20','✅\x20Scheduled\x20cleanup\x20completed\x20successfully','🧹\x20Running\x20initial\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','🔍\x20Initializing\x20domain\x20monitoring\x20service...','980YigAoj','$connect','stopPeriodicUpdates','error','stopBot','listen','\x0a🔄\x20Gracefully\x20shutting\x20down...','1410bRLflS','✅\x20Telegram\x20bot\x20@','domainMonitoringService','SIGTERM','./app','❌\x20Initial\x20cleanup\x20failed:','8WbyOpB','log','\x20is\x20active','🚀\x20Server\x20running\x20on\x20port\x20','4415KPriqw','❌\x20Scheduled\x20cleanup\x20failed:','coinToPayStatusService','nodeEnv','./services/telegramBotService','230442lPKMuy','username','✅\x20Database\x20connected\x20successfully','exit','config','363769VunQXS','$disconnect'];a39_0x1e2f=function(){return _0x4bff3e;};return a39_0x1e2f();}process['on']('SIGINT',async()=>{const _0x5beb7e=a39_0x8d3bf3;console[_0x5beb7e(0x168)](_0x5beb7e(0x160)),stopPaymentCleanupScheduler(),currencyService_1[_0x5beb7e(0x17d)][_0x5beb7e(0x15c)](),coinToPayStatusService_1[_0x5beb7e(0x16d)][_0x5beb7e(0x188)](),domainMonitoringService_1[_0x5beb7e(0x163)][_0x5beb7e(0x178)](),telegramBotService_1[_0x5beb7e(0x180)]['stopBot'](),await database_1[_0x5beb7e(0x193)][_0x5beb7e(0x176)](),process[_0x5beb7e(0x173)](0x0);}),process['on'](a39_0x8d3bf3(0x164),async()=>{const _0x1a7e96=a39_0x8d3bf3;console[_0x1a7e96(0x168)](_0x1a7e96(0x160)),stopPaymentCleanupScheduler(),currencyService_1[_0x1a7e96(0x17d)][_0x1a7e96(0x15c)](),coinToPayStatusService_1[_0x1a7e96(0x16d)][_0x1a7e96(0x188)](),domainMonitoringService_1[_0x1a7e96(0x163)]['stopMonitoring'](),telegramBotService_1['telegramBotService'][_0x1a7e96(0x15e)](),await database_1['default'][_0x1a7e96(0x176)](),process[_0x1a7e96(0x173)](0x0);}),startServer();