'use strict';const a51_0x5cf316=a51_0x10dc;(function(_0x368e5a,_0x57d1f2){const _0x33765a=a51_0x10dc,_0x5ad6ee=_0x368e5a();while(!![]){try{const _0x17eda5=-parseInt(_0x33765a(0xb8))/0x1+-parseInt(_0x33765a(0xcb))/0x2+parseInt(_0x33765a(0xe0))/0x3*(-parseInt(_0x33765a(0xa9))/0x4)+parseInt(_0x33765a(0xbb))/0x5*(parseInt(_0x33765a(0xb1))/0x6)+parseInt(_0x33765a(0xc0))/0x7*(parseInt(_0x33765a(0xaa))/0x8)+-parseInt(_0x33765a(0xad))/0x9*(-parseInt(_0x33765a(0xe3))/0xa)+parseInt(_0x33765a(0xe4))/0xb;if(_0x17eda5===_0x57d1f2)break;else _0x5ad6ee['push'](_0x5ad6ee['shift']());}catch(_0x44d065){_0x5ad6ee['push'](_0x5ad6ee['shift']());}}}(a51_0x39fb,0x9cf64));function a51_0x10dc(_0x23f78a,_0x23440e){_0x23f78a=_0x23f78a-0xa6;const _0x39fbbc=a51_0x39fb();let _0x10dc6c=_0x39fbbc[_0x23f78a];return _0x10dc6c;}var __importDefault=this&&this[a51_0x5cf316(0xc1)]||function(_0x225c77){const _0x221a22=a51_0x5cf316;return _0x225c77&&_0x225c77[_0x221a22(0xb2)]?_0x225c77:{'default':_0x225c77};};Object[a51_0x5cf316(0xb4)](exports,a51_0x5cf316(0xb2),{'value':!![]});const app_1=__importDefault(require(a51_0x5cf316(0xb7))),config_1=require(a51_0x5cf316(0xd5)),database_1=__importDefault(require(a51_0x5cf316(0xc3))),telegramBotService_1=require('./services/telegramBotService'),currencyService_1=require(a51_0x5cf316(0xd0)),coinToPayStatusService_1=require('./services/coinToPayStatusService'),domainMonitoringService_1=require(a51_0x5cf316(0xc2)),paymentCleanupService_1=require(a51_0x5cf316(0xcc));let paymentCleanupInterval=null;function startPaymentCleanupScheduler(){const _0x5136ea=a51_0x5cf316,_0x582d44=0x18,_0xfe06dc=_0x582d44*0x3c*0x3c*0x3e8;console[_0x5136ea(0xaf)](_0x5136ea(0xbe)+_0x582d44+_0x5136ea(0xe1)),setTimeout(async()=>{const _0x230920=_0x5136ea;console[_0x230920(0xaf)](_0x230920(0xd2));try{await paymentCleanupService_1['paymentCleanupService'][_0x230920(0xa6)](),console[_0x230920(0xaf)]('âœ…\x20Initial\x20cleanup\x20completed\x20successfully');}catch(_0x3f8c9a){console[_0x230920(0xa7)](_0x230920(0xbc),_0x3f8c9a);}},0x5*0x3c*0x3e8),paymentCleanupInterval=setInterval(async()=>{const _0x340fc7=_0x5136ea;console[_0x340fc7(0xaf)]('ðŸ§¹\x20Running\x20scheduled\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...');try{await paymentCleanupService_1[_0x340fc7(0xab)][_0x340fc7(0xa6)](),console[_0x340fc7(0xaf)](_0x340fc7(0xd8));}catch(_0x42717b){console['error'](_0x340fc7(0xbf),_0x42717b);}},_0xfe06dc);}function stopPaymentCleanupScheduler(){const _0x327bc0=a51_0x5cf316;paymentCleanupInterval&&(clearInterval(paymentCleanupInterval),paymentCleanupInterval=null,console[_0x327bc0(0xaf)](_0x327bc0(0xc8)));}async function startServer(){const _0x3147bb=a51_0x5cf316;try{await database_1['default']['$connect'](),console[_0x3147bb(0xaf)](_0x3147bb(0xe5));const _0x1edeb7=telegramBotService_1[_0x3147bb(0xd9)][_0x3147bb(0xc6)]();_0x1edeb7['isActive']?console['log'](_0x3147bb(0xc4)+_0x1edeb7[_0x3147bb(0xe2)]+_0x3147bb(0xe6)):console[_0x3147bb(0xaf)](_0x3147bb(0xae));console[_0x3147bb(0xaf)](_0x3147bb(0xba)),console[_0x3147bb(0xaf)](_0x3147bb(0xc9)),coinToPayStatusService_1[_0x3147bb(0xac)]['startPeriodicStatusCheck'](),console[_0x3147bb(0xaf)](_0x3147bb(0xb3)),domainMonitoringService_1[_0x3147bb(0xdc)][_0x3147bb(0xb5)](),console[_0x3147bb(0xaf)](_0x3147bb(0xcd)),startPaymentCleanupScheduler();config_1['config'][_0x3147bb(0xdf)]==='production'?app_1[_0x3147bb(0xd7)][_0x3147bb(0xa8)](config_1[_0x3147bb(0xde)][_0x3147bb(0xd4)],()=>{const _0x2b5797=_0x3147bb;console[_0x2b5797(0xaf)](_0x2b5797(0xd1)+config_1[_0x2b5797(0xde)][_0x2b5797(0xd4)]),console[_0x2b5797(0xaf)](_0x2b5797(0xca)+config_1['config']['nodeEnv']);}):app_1[_0x3147bb(0xd7)][_0x3147bb(0xa8)](config_1[_0x3147bb(0xde)][_0x3147bb(0xd4)],_0x3147bb(0xd3),()=>{const _0x405525=_0x3147bb;console['log'](_0x405525(0xd1)+config_1[_0x405525(0xde)][_0x405525(0xd4)]),console['log'](_0x405525(0xca)+config_1[_0x405525(0xde)][_0x405525(0xdf)]),console['log'](_0x405525(0xb9)+config_1['config'][_0x405525(0xd4)]+_0x405525(0xcf));});;}catch(_0x38f5c7){console['error'](_0x3147bb(0xdd),_0x38f5c7),process['exit'](0x1);}}function a51_0x39fb(){const _0x1df575=['552yvrdXy','70600OKTAky','paymentCleanupService','coinToPayStatusService','5571CxVnzQ','âš ï¸\x20Telegram\x20bot\x20is\x20not\x20configured','log','stopPeriodicUpdates','126UUSwjG','__esModule','ðŸ”\x20Initializing\x20domain\x20monitoring\x20service...','defineProperty','startMonitoring','SIGTERM','./app','385341CFQNpT','ðŸ“Š\x20Health\x20check:\x20http://localhost:','ðŸ”„\x20Initializing\x20currency\x20rates\x20service...','26545PeAuLY','âŒ\x20Initial\x20cleanup\x20failed:','\x0aðŸ”„\x20Gracefully\x20shutting\x20down...','ðŸ•\x20Payment\x20cleanup\x20scheduled\x20to\x20run\x20every\x20','âŒ\x20Scheduled\x20cleanup\x20failed:','658veMdJW','__importDefault','./services/domainMonitoringService','./config/database','âœ…\x20Telegram\x20bot\x20@','currencyService','getBotInfo','$disconnect','ðŸ›‘\x20Payment\x20cleanup\x20scheduler\x20stopped','ðŸª™\x20Initializing\x20CoinToPay\x20status\x20checking\x20service...','ðŸŒ\x20Environment:\x20','1180254qKVNrM','./services/paymentCleanupService','ðŸ§¹\x20Initializing\x20payment\x20cleanup\x20service...','stopBot','/api/health','./services/currencyService','ðŸš€\x20Server\x20running\x20on\x20port\x20','ðŸ§¹\x20Running\x20initial\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','127.1.1.159','port','./config/config','stopMonitoring','default','âœ…\x20Scheduled\x20cleanup\x20completed\x20successfully','telegramBotService','SIGINT','stopPeriodicStatusCheck','domainMonitoringService','âŒ\x20Failed\x20to\x20start\x20server:','config','nodeEnv','16227moIrmD','\x20hours','username','8080wxKtvU','10159985lpnCvr','âœ…\x20Database\x20connected\x20successfully','\x20is\x20active','runCleanupWithReport','error','listen'];a51_0x39fb=function(){return _0x1df575;};return a51_0x39fb();}process['on'](a51_0x5cf316(0xda),async()=>{const _0x848ab6=a51_0x5cf316;console[_0x848ab6(0xaf)](_0x848ab6(0xbd)),stopPaymentCleanupScheduler(),currencyService_1[_0x848ab6(0xc5)][_0x848ab6(0xb0)](),coinToPayStatusService_1['coinToPayStatusService'][_0x848ab6(0xdb)](),domainMonitoringService_1[_0x848ab6(0xdc)][_0x848ab6(0xd6)](),telegramBotService_1[_0x848ab6(0xd9)][_0x848ab6(0xce)](),await database_1[_0x848ab6(0xd7)][_0x848ab6(0xc7)](),process['exit'](0x0);}),process['on'](a51_0x5cf316(0xb6),async()=>{const _0x2f4f2f=a51_0x5cf316;console[_0x2f4f2f(0xaf)]('\x0aðŸ”„\x20Gracefully\x20shutting\x20down...'),stopPaymentCleanupScheduler(),currencyService_1[_0x2f4f2f(0xc5)][_0x2f4f2f(0xb0)](),coinToPayStatusService_1[_0x2f4f2f(0xac)][_0x2f4f2f(0xdb)](),domainMonitoringService_1[_0x2f4f2f(0xdc)][_0x2f4f2f(0xd6)](),telegramBotService_1['telegramBotService']['stopBot'](),await database_1[_0x2f4f2f(0xd7)][_0x2f4f2f(0xc7)](),process['exit'](0x0);}),startServer();