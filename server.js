'use strict';const a39_0x3111a5=a39_0x4b40;(function(_0x5415e0,_0xab6ac2){const _0xc2a5e7=a39_0x4b40,_0x34d960=_0x5415e0();while(!![]){try{const _0xe90be=-parseInt(_0xc2a5e7(0x141))/0x1*(-parseInt(_0xc2a5e7(0x126))/0x2)+parseInt(_0xc2a5e7(0x144))/0x3*(-parseInt(_0xc2a5e7(0x11a))/0x4)+-parseInt(_0xc2a5e7(0x127))/0x5+parseInt(_0xc2a5e7(0x148))/0x6+parseInt(_0xc2a5e7(0x12b))/0x7+parseInt(_0xc2a5e7(0x128))/0x8*(-parseInt(_0xc2a5e7(0x122))/0x9)+-parseInt(_0xc2a5e7(0x116))/0xa;if(_0xe90be===_0xab6ac2)break;else _0x34d960['push'](_0x34d960['shift']());}catch(_0x599cc2){_0x34d960['push'](_0x34d960['shift']());}}}(a39_0x20f4,0xc9024));var __importDefault=this&&this['__importDefault']||function(_0x102720){const _0x58fea1=a39_0x4b40;return _0x102720&&_0x102720[_0x58fea1(0x13b)]?_0x102720:{'default':_0x102720};};Object[a39_0x3111a5(0x124)](exports,a39_0x3111a5(0x13b),{'value':!![]});const app_1=__importDefault(require(a39_0x3111a5(0x137))),config_1=require(a39_0x3111a5(0x131)),database_1=__importDefault(require(a39_0x3111a5(0x136))),telegramBotService_1=require(a39_0x3111a5(0x12e)),currencyService_1=require(a39_0x3111a5(0x14e)),coinToPayStatusService_1=require('./services/coinToPayStatusService'),domainMonitoringService_1=require(a39_0x3111a5(0x11f)),paymentCleanupService_1=require('./services/paymentCleanupService');let paymentCleanupInterval=null;function startPaymentCleanupScheduler(){const _0x52d570=a39_0x3111a5,_0x15225a=0x18,_0x304bfe=_0x15225a*0x3c*0x3c*0x3e8;console[_0x52d570(0x14c)]('🕐\x20Payment\x20cleanup\x20scheduled\x20to\x20run\x20every\x20'+_0x15225a+_0x52d570(0x149)),setTimeout(async()=>{const _0x4628ef=_0x52d570;console['log']('🧹\x20Running\x20initial\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...');try{await paymentCleanupService_1[_0x4628ef(0x13e)][_0x4628ef(0x145)](),console[_0x4628ef(0x14c)](_0x4628ef(0x11e));}catch(_0x10854c){console[_0x4628ef(0x14f)](_0x4628ef(0x14d),_0x10854c);}},0x5*0x3c*0x3e8),paymentCleanupInterval=setInterval(async()=>{const _0x448d32=_0x52d570;console[_0x448d32(0x14c)](_0x448d32(0x12a));try{await paymentCleanupService_1[_0x448d32(0x13e)][_0x448d32(0x145)](),console[_0x448d32(0x14c)](_0x448d32(0x13a));}catch(_0x4cc973){console['error'](_0x448d32(0x146),_0x4cc973);}},_0x304bfe);}function stopPaymentCleanupScheduler(){const _0x2a269b=a39_0x3111a5;paymentCleanupInterval&&(clearInterval(paymentCleanupInterval),paymentCleanupInterval=null,console['log'](_0x2a269b(0x14a)));}async function startServer(){const _0x2de3da=a39_0x3111a5;try{await database_1['default'][_0x2de3da(0x12f)](),console[_0x2de3da(0x14c)](_0x2de3da(0x150));const _0x47151a=telegramBotService_1['telegramBotService'][_0x2de3da(0x119)]();_0x47151a[_0x2de3da(0x132)]?console['log']('✅\x20Telegram\x20bot\x20@'+_0x47151a[_0x2de3da(0x117)]+_0x2de3da(0x130)):console['log'](_0x2de3da(0x118)),console['log'](_0x2de3da(0x152)),console[_0x2de3da(0x14c)](_0x2de3da(0x142)),coinToPayStatusService_1['coinToPayStatusService']['startPeriodicStatusCheck'](),console[_0x2de3da(0x14c)](_0x2de3da(0x13f)),domainMonitoringService_1[_0x2de3da(0x14b)][_0x2de3da(0x129)](),console[_0x2de3da(0x14c)]('🧹\x20Initializing\x20payment\x20cleanup\x20service...'),startPaymentCleanupScheduler(),app_1['default'][_0x2de3da(0x11c)](config_1[_0x2de3da(0x140)]['port'],_0x2de3da(0x120),()=>{const _0x187762=_0x2de3da;console['log'](_0x187762(0x147)+config_1[_0x187762(0x140)][_0x187762(0x153)]),console[_0x187762(0x14c)]('🌍\x20Environment:\x20'+config_1[_0x187762(0x140)][_0x187762(0x135)]),console[_0x187762(0x14c)]('📊\x20Health\x20check:\x20http://localhost:'+config_1['config'][_0x187762(0x153)]+_0x187762(0x12c));});}catch(_0x318bcd){console[_0x2de3da(0x14f)](_0x2de3da(0x11b),_0x318bcd),process[_0x2de3da(0x125)](0x1);}}function a39_0x4b40(_0x258ffb,_0x578d4d){const _0x20f473=a39_0x20f4();return a39_0x4b40=function(_0x4b4096,_0x206a70){_0x4b4096=_0x4b4096-0x116;let _0x104e1c=_0x20f473[_0x4b4096];return _0x104e1c;},a39_0x4b40(_0x258ffb,_0x578d4d);}function a39_0x20f4(){const _0x23eb53=['36447veJiEd','runCleanupWithReport','❌\x20Scheduled\x20cleanup\x20failed:','🚀\x20Server\x20running\x20on\x20port\x20','6824196eQdUwd','\x20hours','🛑\x20Payment\x20cleanup\x20scheduler\x20stopped','domainMonitoringService','log','❌\x20Initial\x20cleanup\x20failed:','./services/currencyService','error','✅\x20Database\x20connected\x20successfully','$disconnect','🔄\x20Initializing\x20currency\x20rates\x20service...','port','10768980USGTWj','username','⚠️\x20Telegram\x20bot\x20is\x20not\x20configured','getBotInfo','388rKfMbR','❌\x20Failed\x20to\x20start\x20server:','listen','currencyService','✅\x20Initial\x20cleanup\x20completed\x20successfully','./services/domainMonitoringService','127.1.1.159','coinToPayStatusService','2209257rphnRm','stopBot','defineProperty','exit','18jpacJE','339915JIJAGA','8ZbQfli','startMonitoring','🧹\x20Running\x20scheduled\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','4866708xftNXG','/api/health','telegramBotService','./services/telegramBotService','$connect','\x20is\x20active','./config/config','isActive','SIGTERM','stopPeriodicStatusCheck','nodeEnv','./config/database','./app','stopPeriodicUpdates','stopMonitoring','✅\x20Scheduled\x20cleanup\x20completed\x20successfully','__esModule','default','\x0a🔄\x20Gracefully\x20shutting\x20down...','paymentCleanupService','🔍\x20Initializing\x20domain\x20monitoring\x20service...','config','173281VJvJbO','🪙\x20Initializing\x20CoinToPay\x20status\x20checking\x20service...','SIGINT'];a39_0x20f4=function(){return _0x23eb53;};return a39_0x20f4();}process['on'](a39_0x3111a5(0x143),async()=>{const _0x3bef2f=a39_0x3111a5;console[_0x3bef2f(0x14c)]('\x0a🔄\x20Gracefully\x20shutting\x20down...'),stopPaymentCleanupScheduler(),currencyService_1['currencyService'][_0x3bef2f(0x138)](),coinToPayStatusService_1[_0x3bef2f(0x121)][_0x3bef2f(0x134)](),domainMonitoringService_1[_0x3bef2f(0x14b)]['stopMonitoring'](),telegramBotService_1['telegramBotService'][_0x3bef2f(0x123)](),await database_1[_0x3bef2f(0x13c)][_0x3bef2f(0x151)](),process[_0x3bef2f(0x125)](0x0);}),process['on'](a39_0x3111a5(0x133),async()=>{const _0x31b581=a39_0x3111a5;console[_0x31b581(0x14c)](_0x31b581(0x13d)),stopPaymentCleanupScheduler(),currencyService_1[_0x31b581(0x11d)][_0x31b581(0x138)](),coinToPayStatusService_1['coinToPayStatusService'][_0x31b581(0x134)](),domainMonitoringService_1['domainMonitoringService'][_0x31b581(0x139)](),telegramBotService_1[_0x31b581(0x12d)][_0x31b581(0x123)](),await database_1[_0x31b581(0x13c)]['$disconnect'](),process[_0x31b581(0x125)](0x0);}),startServer();