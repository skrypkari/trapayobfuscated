'use strict';const a45_0x4268bf=a45_0x4556;(function(_0x452b28,_0x21736c){const _0x4d5638=a45_0x4556,_0x283cb6=_0x452b28();while(!![]){try{const _0x3f9f96=-parseInt(_0x4d5638(0x181))/0x1+-parseInt(_0x4d5638(0x198))/0x2*(parseInt(_0x4d5638(0x19b))/0x3)+parseInt(_0x4d5638(0x19e))/0x4*(-parseInt(_0x4d5638(0x193))/0x5)+parseInt(_0x4d5638(0x1b0))/0x6+-parseInt(_0x4d5638(0x1a8))/0x7*(parseInt(_0x4d5638(0x1a2))/0x8)+parseInt(_0x4d5638(0x1ad))/0x9+parseInt(_0x4d5638(0x17c))/0xa*(parseInt(_0x4d5638(0x185))/0xb);if(_0x3f9f96===_0x21736c)break;else _0x283cb6['push'](_0x283cb6['shift']());}catch(_0x566021){_0x283cb6['push'](_0x283cb6['shift']());}}}(a45_0x426b,0x9a0be));var __importDefault=this&&this['__importDefault']||function(_0x2da3f3){const _0x2d5ac2=a45_0x4556;return _0x2da3f3&&_0x2da3f3[_0x2d5ac2(0x178)]?_0x2da3f3:{'default':_0x2da3f3};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const app_1=__importDefault(require(a45_0x4268bf(0x17d))),config_1=require('./config/config'),database_1=__importDefault(require(a45_0x4268bf(0x1aa))),telegramBotService_1=require(a45_0x4268bf(0x194)),currencyService_1=require('./services/currencyService'),coinToPayStatusService_1=require(a45_0x4268bf(0x19f)),domainMonitoringService_1=require('./services/domainMonitoringService'),paymentCleanupService_1=require(a45_0x4268bf(0x18f));let paymentCleanupInterval=null;function startPaymentCleanupScheduler(){const _0xe26300=a45_0x4268bf,_0x43a1c6=0x18,_0x10f8f8=_0x43a1c6*0x3c*0x3c*0x3e8;console[_0xe26300(0x195)](_0xe26300(0x1ae)+_0x43a1c6+_0xe26300(0x18c)),setTimeout(async()=>{const _0x5cab36=_0xe26300;console[_0x5cab36(0x195)](_0x5cab36(0x1a6));try{await paymentCleanupService_1['paymentCleanupService'][_0x5cab36(0x1a0)](),console[_0x5cab36(0x195)](_0x5cab36(0x1a5));}catch(_0x238e4f){console[_0x5cab36(0x187)]('âŒ\x20Initial\x20cleanup\x20failed:',_0x238e4f);}},0x5*0x3c*0x3e8),paymentCleanupInterval=setInterval(async()=>{const _0x10a4e9=_0xe26300;console['log']('ðŸ§¹\x20Running\x20scheduled\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...');try{await paymentCleanupService_1[_0x10a4e9(0x190)][_0x10a4e9(0x1a0)](),console[_0x10a4e9(0x195)](_0x10a4e9(0x19a));}catch(_0x543661){console[_0x10a4e9(0x187)](_0x10a4e9(0x17b),_0x543661);}},_0x10f8f8);}function a45_0x426b(){const _0x483032=['6548670JHUyYG','ðŸ•\x20Payment\x20cleanup\x20scheduled\x20to\x20run\x20every\x20','coinToPayStatusService','1659246DbTSvz','listen','__esModule','ðŸš€\x20Server\x20running\x20on\x20port\x20','âŒ\x20Failed\x20to\x20start\x20server:','âŒ\x20Scheduled\x20cleanup\x20failed:','4120jPIVnj','./app','ðŸ“Š\x20Health\x20check:\x20http://localhost:','currencyService','config','711318mePcXK','startMonitoring','stopPeriodicUpdates','default','56969zIpqdU','127.1.1.159','error','$disconnect','stopMonitoring','\x20is\x20active','nodeEnv','\x20hours','telegramBotService','exit','./services/paymentCleanupService','paymentCleanupService','$connect','stopBot','5mYEvpV','./services/telegramBotService','log','domainMonitoringService','stopPeriodicStatusCheck','874WUkPZo','ðŸ›‘\x20Payment\x20cleanup\x20scheduler\x20stopped','âœ…\x20Scheduled\x20cleanup\x20completed\x20successfully','1443OSsxQf','isActive','ðŸŒ\x20Environment:\x20','1365244FeqQsX','./services/coinToPayStatusService','runCleanupWithReport','\x0aðŸ”„\x20Gracefully\x20shutting\x20down...','9952952YusfsQ','ðŸ”\x20Initializing\x20domain\x20monitoring\x20service...','ðŸ”„\x20Initializing\x20currency\x20rates\x20service...','âœ…\x20Initial\x20cleanup\x20completed\x20successfully','ðŸ§¹\x20Running\x20initial\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','port','7hMRfEO','ðŸª™\x20Initializing\x20CoinToPay\x20status\x20checking\x20service...','./config/database','startPeriodicStatusCheck','username'];a45_0x426b=function(){return _0x483032;};return a45_0x426b();}function stopPaymentCleanupScheduler(){const _0x5d2f75=a45_0x4268bf;paymentCleanupInterval&&(clearInterval(paymentCleanupInterval),paymentCleanupInterval=null,console[_0x5d2f75(0x195)](_0x5d2f75(0x199)));}async function startServer(){const _0x39ead2=a45_0x4268bf;try{await database_1[_0x39ead2(0x184)][_0x39ead2(0x191)](),console[_0x39ead2(0x195)]('âœ…\x20Database\x20connected\x20successfully');const _0x12897d=telegramBotService_1[_0x39ead2(0x18d)]['getBotInfo']();_0x12897d[_0x39ead2(0x19c)]?console['log']('âœ…\x20Telegram\x20bot\x20@'+_0x12897d[_0x39ead2(0x1ac)]+_0x39ead2(0x18a)):console[_0x39ead2(0x195)]('âš ï¸\x20Telegram\x20bot\x20is\x20not\x20configured'),console[_0x39ead2(0x195)](_0x39ead2(0x1a4)),console[_0x39ead2(0x195)](_0x39ead2(0x1a9)),coinToPayStatusService_1[_0x39ead2(0x1af)][_0x39ead2(0x1ab)](),console[_0x39ead2(0x195)](_0x39ead2(0x1a3)),domainMonitoringService_1[_0x39ead2(0x196)][_0x39ead2(0x182)](),console[_0x39ead2(0x195)]('ðŸ§¹\x20Initializing\x20payment\x20cleanup\x20service...'),startPaymentCleanupScheduler(),app_1[_0x39ead2(0x184)][_0x39ead2(0x1b1)](config_1['config']['port'],_0x39ead2(0x186),()=>{const _0x2927c3=_0x39ead2;console[_0x2927c3(0x195)](_0x2927c3(0x179)+config_1['config'][_0x2927c3(0x1a7)]),console[_0x2927c3(0x195)](_0x2927c3(0x19d)+config_1[_0x2927c3(0x180)][_0x2927c3(0x18b)]),console[_0x2927c3(0x195)](_0x2927c3(0x17e)+config_1['config']['port']+'/api/health');});}catch(_0xb53a21){console[_0x39ead2(0x187)](_0x39ead2(0x17a),_0xb53a21),process['exit'](0x1);}}function a45_0x4556(_0x197aa8,_0x500bf5){_0x197aa8=_0x197aa8-0x178;const _0x426b6f=a45_0x426b();let _0x4556c9=_0x426b6f[_0x197aa8];return _0x4556c9;}process['on']('SIGINT',async()=>{const _0x1d78fa=a45_0x4268bf;console[_0x1d78fa(0x195)]('\x0aðŸ”„\x20Gracefully\x20shutting\x20down...'),stopPaymentCleanupScheduler(),currencyService_1[_0x1d78fa(0x17f)][_0x1d78fa(0x183)](),coinToPayStatusService_1['coinToPayStatusService'][_0x1d78fa(0x197)](),domainMonitoringService_1[_0x1d78fa(0x196)][_0x1d78fa(0x189)](),telegramBotService_1['telegramBotService'][_0x1d78fa(0x192)](),await database_1[_0x1d78fa(0x184)][_0x1d78fa(0x188)](),process[_0x1d78fa(0x18e)](0x0);}),process['on']('SIGTERM',async()=>{const _0x4af9fd=a45_0x4268bf;console['log'](_0x4af9fd(0x1a1)),stopPaymentCleanupScheduler(),currencyService_1[_0x4af9fd(0x17f)][_0x4af9fd(0x183)](),coinToPayStatusService_1[_0x4af9fd(0x1af)][_0x4af9fd(0x197)](),domainMonitoringService_1[_0x4af9fd(0x196)]['stopMonitoring'](),telegramBotService_1[_0x4af9fd(0x18d)]['stopBot'](),await database_1[_0x4af9fd(0x184)]['$disconnect'](),process['exit'](0x0);}),startServer();