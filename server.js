'use strict';const a51_0x5736ee=a51_0x4b85;(function(_0x202e08,_0x269f6b){const _0x2dc13b=a51_0x4b85,_0x20cbe4=_0x202e08();while(!![]){try{const _0x13e1c2=parseInt(_0x2dc13b(0xad))/0x1+-parseInt(_0x2dc13b(0xaf))/0x2+-parseInt(_0x2dc13b(0x90))/0x3*(-parseInt(_0x2dc13b(0xb9))/0x4)+parseInt(_0x2dc13b(0x91))/0x5*(parseInt(_0x2dc13b(0xa7))/0x6)+parseInt(_0x2dc13b(0x9d))/0x7*(parseInt(_0x2dc13b(0x9f))/0x8)+-parseInt(_0x2dc13b(0xaa))/0x9+parseInt(_0x2dc13b(0x8b))/0xa;if(_0x13e1c2===_0x269f6b)break;else _0x20cbe4['push'](_0x20cbe4['shift']());}catch(_0x40df76){_0x20cbe4['push'](_0x20cbe4['shift']());}}}(a51_0x2e64,0x820e1));var __importDefault=this&&this['__importDefault']||function(_0x198e6a){const _0x30a699=a51_0x4b85;return _0x198e6a&&_0x198e6a[_0x30a699(0x94)]?_0x198e6a:{'default':_0x198e6a};};Object['defineProperty'](exports,a51_0x5736ee(0x94),{'value':!![]});const app_1=__importDefault(require('./app')),config_1=require(a51_0x5736ee(0xb3)),database_1=__importDefault(require(a51_0x5736ee(0x80))),telegramBotService_1=require('./services/telegramBotService'),currencyService_1=require(a51_0x5736ee(0xa9)),coinToPayStatusService_1=require(a51_0x5736ee(0x89)),domainMonitoringService_1=require('./services/domainMonitoringService'),paymentCleanupService_1=require(a51_0x5736ee(0x8f));let paymentCleanupInterval=null;function startPaymentCleanupScheduler(){const _0x1deeb8=a51_0x5736ee,_0x35da77=0x18,_0x1e5ea6=_0x35da77*0x3c*0x3c*0x3e8;console['log'](_0x1deeb8(0x8c)+_0x35da77+_0x1deeb8(0xb5)),setTimeout(async()=>{const _0x8ec90b=_0x1deeb8;console[_0x8ec90b(0x93)](_0x8ec90b(0x98));try{await paymentCleanupService_1[_0x8ec90b(0x81)][_0x8ec90b(0xb4)](),console['log'](_0x8ec90b(0x92));}catch(_0x1a40a2){console['error'](_0x8ec90b(0x8a),_0x1a40a2);}},0x5*0x3c*0x3e8),paymentCleanupInterval=setInterval(async()=>{const _0x13b9a6=_0x1deeb8;console[_0x13b9a6(0x93)](_0x13b9a6(0xa1));try{await paymentCleanupService_1[_0x13b9a6(0x81)]['runCleanupWithReport'](),console[_0x13b9a6(0x93)]('âœ…\x20Scheduled\x20cleanup\x20completed\x20successfully');}catch(_0x119118){console[_0x13b9a6(0x99)](_0x13b9a6(0x95),_0x119118);}},_0x1e5ea6);}function stopPaymentCleanupScheduler(){const _0x40d48b=a51_0x5736ee;paymentCleanupInterval&&(clearInterval(paymentCleanupInterval),paymentCleanupInterval=null,console[_0x40d48b(0x93)](_0x40d48b(0xac)));}function a51_0x2e64(){const _0x1df0f3=['__esModule','âŒ\x20Scheduled\x20cleanup\x20failed:','ðŸŒ\x20Environment:\x20','âŒ\x20Failed\x20to\x20start\x20server:','ðŸ§¹\x20Running\x20initial\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','error','\x0aðŸ”„\x20Gracefully\x20shutting\x20down...','ðŸ”„\x20Initializing\x20currency\x20rates\x20service...','coinToPayStatusService','287ugOEer','telegramBotService','168456vJDRQi','âœ…\x20Telegram\x20bot\x20@','ðŸ§¹\x20Running\x20scheduled\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','domainMonitoringService','startPeriodicStatusCheck','stopBot','stopPeriodicStatusCheck','\x20is\x20active','556236pyldOb','âœ…\x20Database\x20connected\x20successfully','./services/currencyService','6826689bggkDy','SIGTERM','ðŸ›‘\x20Payment\x20cleanup\x20scheduler\x20stopped','851751wXDMqg','startMonitoring','2067672jGpeCl','listen','username','nodeEnv','./config/config','runCleanupWithReport','\x20hours','stopPeriodicUpdates','exit','currencyService','2049020RoQylm','ðŸ“Š\x20Health\x20check:\x20http://localhost:','stopMonitoring','./config/database','paymentCleanupService','ðŸš€\x20Server\x20running\x20on\x20port\x20','config','ðŸ§¹\x20Initializing\x20payment\x20cleanup\x20service...','/api/health','production','127.1.1.159','default','./services/coinToPayStatusService','âŒ\x20Initial\x20cleanup\x20failed:','50130YpvxpZ','ðŸ•\x20Payment\x20cleanup\x20scheduled\x20to\x20run\x20every\x20','$disconnect','port','./services/paymentCleanupService','3aYznSJ','5RuBjfz','âœ…\x20Initial\x20cleanup\x20completed\x20successfully','log'];a51_0x2e64=function(){return _0x1df0f3;};return a51_0x2e64();}function a51_0x4b85(_0x5024f5,_0x33c7ef){_0x5024f5=_0x5024f5-0x7f;const _0x2e6455=a51_0x2e64();let _0x4b851b=_0x2e6455[_0x5024f5];return _0x4b851b;}async function startServer(){const _0x142bfe=a51_0x5736ee;try{await database_1[_0x142bfe(0x88)]['$connect'](),console[_0x142bfe(0x93)](_0x142bfe(0xa8));const _0x2dbe48=telegramBotService_1[_0x142bfe(0x9e)]['getBotInfo']();_0x2dbe48['isActive']?console['log'](_0x142bfe(0xa0)+_0x2dbe48[_0x142bfe(0xb1)]+_0x142bfe(0xa6)):console[_0x142bfe(0x93)]('âš ï¸\x20Telegram\x20bot\x20is\x20not\x20configured');console[_0x142bfe(0x93)](_0x142bfe(0x9b)),console[_0x142bfe(0x93)]('ðŸª™\x20Initializing\x20CoinToPay\x20status\x20checking\x20service...'),coinToPayStatusService_1['coinToPayStatusService'][_0x142bfe(0xa3)](),console['log']('ðŸ”\x20Initializing\x20domain\x20monitoring\x20service...'),domainMonitoringService_1['domainMonitoringService'][_0x142bfe(0xae)](),console[_0x142bfe(0x93)](_0x142bfe(0x84)),startPaymentCleanupScheduler();config_1[_0x142bfe(0x83)][_0x142bfe(0xb2)]===_0x142bfe(0x86)?app_1['default'][_0x142bfe(0xb0)](config_1[_0x142bfe(0x83)][_0x142bfe(0x8e)],()=>{const _0x332a44=_0x142bfe;console['log']('ðŸš€\x20Server\x20running\x20on\x20port\x20'+config_1[_0x332a44(0x83)][_0x332a44(0x8e)]),console[_0x332a44(0x93)](_0x332a44(0x96)+config_1[_0x332a44(0x83)]['nodeEnv']);}):app_1[_0x142bfe(0x88)][_0x142bfe(0xb0)](config_1[_0x142bfe(0x83)][_0x142bfe(0x8e)],_0x142bfe(0x87),()=>{const _0x1430a0=_0x142bfe;console['log'](_0x1430a0(0x82)+config_1[_0x1430a0(0x83)][_0x1430a0(0x8e)]),console[_0x1430a0(0x93)](_0x1430a0(0x96)+config_1[_0x1430a0(0x83)][_0x1430a0(0xb2)]),console[_0x1430a0(0x93)](_0x1430a0(0xba)+config_1[_0x1430a0(0x83)]['port']+_0x1430a0(0x85));});;}catch(_0x174993){console[_0x142bfe(0x99)](_0x142bfe(0x97),_0x174993),process[_0x142bfe(0xb7)](0x1);}}process['on']('SIGINT',async()=>{const _0x5f5a50=a51_0x5736ee;console[_0x5f5a50(0x93)](_0x5f5a50(0x9a)),stopPaymentCleanupScheduler(),currencyService_1[_0x5f5a50(0xb8)][_0x5f5a50(0xb6)](),coinToPayStatusService_1[_0x5f5a50(0x9c)][_0x5f5a50(0xa5)](),domainMonitoringService_1['domainMonitoringService'][_0x5f5a50(0x7f)](),telegramBotService_1[_0x5f5a50(0x9e)]['stopBot'](),await database_1[_0x5f5a50(0x88)][_0x5f5a50(0x8d)](),process['exit'](0x0);}),process['on'](a51_0x5736ee(0xab),async()=>{const _0x54fdcb=a51_0x5736ee;console[_0x54fdcb(0x93)](_0x54fdcb(0x9a)),stopPaymentCleanupScheduler(),currencyService_1[_0x54fdcb(0xb8)][_0x54fdcb(0xb6)](),coinToPayStatusService_1['coinToPayStatusService'][_0x54fdcb(0xa5)](),domainMonitoringService_1[_0x54fdcb(0xa2)][_0x54fdcb(0x7f)](),telegramBotService_1[_0x54fdcb(0x9e)][_0x54fdcb(0xa4)](),await database_1[_0x54fdcb(0x88)][_0x54fdcb(0x8d)](),process[_0x54fdcb(0xb7)](0x0);}),startServer();