'use strict';const a45_0x2160de=a45_0x55dc;(function(_0x15099d,_0x37913b){const _0xcdfd1f=a45_0x55dc,_0x49686b=_0x15099d();while(!![]){try{const _0x57d683=parseInt(_0xcdfd1f(0xa4))/0x1+-parseInt(_0xcdfd1f(0x91))/0x2+parseInt(_0xcdfd1f(0x90))/0x3+parseInt(_0xcdfd1f(0xa7))/0x4+-parseInt(_0xcdfd1f(0x7c))/0x5+parseInt(_0xcdfd1f(0xa6))/0x6+-parseInt(_0xcdfd1f(0x94))/0x7*(parseInt(_0xcdfd1f(0x9f))/0x8);if(_0x57d683===_0x37913b)break;else _0x49686b['push'](_0x49686b['shift']());}catch(_0x3aea4e){_0x49686b['push'](_0x49686b['shift']());}}}(a45_0x3918,0x78240));var __importDefault=this&&this['__importDefault']||function(_0x40b038){return _0x40b038&&_0x40b038['__esModule']?_0x40b038:{'default':_0x40b038};};Object[a45_0x2160de(0x9c)](exports,'__esModule',{'value':!![]});function a45_0x55dc(_0x2f467a,_0xe22fc1){_0x2f467a=_0x2f467a-0x72;const _0x391885=a45_0x3918();let _0x55dc22=_0x391885[_0x2f467a];return _0x55dc22;}function a45_0x3918(){const _0x523407=['/api/health','./services/paymentCleanupService','./services/telegramBotService','\x0aðŸ”„\x20Gracefully\x20shutting\x20down...','ðŸ”\x20Initializing\x20domain\x20monitoring\x20service...','\x20hours','defineProperty','exit','ðŸª™\x20Initializing\x20CoinToPay\x20status\x20checking\x20service...','6505168ubZBgn','ðŸ§¹\x20Running\x20scheduled\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','stopMonitoring','âš ï¸\x20Telegram\x20bot\x20is\x20not\x20configured','currencyService','775609JybxJI','./services/domainMonitoringService','1948392WvwyNZ','2973204eVvXzN','ðŸ›‘\x20Payment\x20cleanup\x20scheduler\x20stopped','stopPeriodicStatusCheck','getBotInfo','SIGINT','ðŸ§¹\x20Initializing\x20payment\x20cleanup\x20service...','log','username','error','ðŸ§¹\x20Running\x20initial\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','paymentCleanupService','$disconnect','âŒ\x20Initial\x20cleanup\x20failed:','./services/coinToPayStatusService','listen','\x20is\x20active','4179625QLnynj','default','./config/database','âŒ\x20Failed\x20to\x20start\x20server:','stopPeriodicUpdates','âœ…\x20Scheduled\x20cleanup\x20completed\x20successfully','config','port','startPeriodicStatusCheck','stopBot','coinToPayStatusService','âœ…\x20Database\x20connected\x20successfully','SIGTERM','âœ…\x20Telegram\x20bot\x20@','./app','ðŸ•\x20Payment\x20cleanup\x20scheduled\x20to\x20run\x20every\x20','runCleanupWithReport','ðŸ”„\x20Initializing\x20currency\x20rates\x20service...','./services/currencyService','ðŸŒ\x20Environment:\x20','2413827qvwRnn','1014168hSiUFp','domainMonitoringService','nodeEnv','7vrsaZw','âœ…\x20Initial\x20cleanup\x20completed\x20successfully'];a45_0x3918=function(){return _0x523407;};return a45_0x3918();}const app_1=__importDefault(require(a45_0x2160de(0x8a))),config_1=require('./config/config'),database_1=__importDefault(require(a45_0x2160de(0x7e))),telegramBotService_1=require(a45_0x2160de(0x98)),currencyService_1=require(a45_0x2160de(0x8e)),coinToPayStatusService_1=require(a45_0x2160de(0x79)),domainMonitoringService_1=require(a45_0x2160de(0xa5)),paymentCleanupService_1=require(a45_0x2160de(0x97));let paymentCleanupInterval=null;function startPaymentCleanupScheduler(){const _0xeb6e1d=a45_0x2160de,_0x4074c9=0x18,_0xed9ca2=_0x4074c9*0x3c*0x3c*0x3e8;console[_0xeb6e1d(0x72)](_0xeb6e1d(0x8b)+_0x4074c9+_0xeb6e1d(0x9b)),setTimeout(async()=>{const _0x25dfc3=_0xeb6e1d;console[_0x25dfc3(0x72)](_0x25dfc3(0x75));try{await paymentCleanupService_1[_0x25dfc3(0x76)][_0x25dfc3(0x8c)](),console[_0x25dfc3(0x72)](_0x25dfc3(0x95));}catch(_0x48f227){console[_0x25dfc3(0x74)](_0x25dfc3(0x78),_0x48f227);}},0x5*0x3c*0x3e8),paymentCleanupInterval=setInterval(async()=>{const _0x230255=_0xeb6e1d;console[_0x230255(0x72)](_0x230255(0xa0));try{await paymentCleanupService_1[_0x230255(0x76)][_0x230255(0x8c)](),console[_0x230255(0x72)](_0x230255(0x81));}catch(_0x2f5d14){console[_0x230255(0x74)]('âŒ\x20Scheduled\x20cleanup\x20failed:',_0x2f5d14);}},_0xed9ca2);}function stopPaymentCleanupScheduler(){const _0x482433=a45_0x2160de;paymentCleanupInterval&&(clearInterval(paymentCleanupInterval),paymentCleanupInterval=null,console['log'](_0x482433(0xa8)));}async function startServer(){const _0x88dd32=a45_0x2160de;try{await database_1[_0x88dd32(0x7d)]['$connect'](),console[_0x88dd32(0x72)](_0x88dd32(0x87));const _0x43d4c2=telegramBotService_1['telegramBotService'][_0x88dd32(0xaa)]();_0x43d4c2['isActive']?console['log'](_0x88dd32(0x89)+_0x43d4c2[_0x88dd32(0x73)]+_0x88dd32(0x7b)):console[_0x88dd32(0x72)](_0x88dd32(0xa2)),console['log'](_0x88dd32(0x8d)),console[_0x88dd32(0x72)](_0x88dd32(0x9e)),coinToPayStatusService_1[_0x88dd32(0x86)][_0x88dd32(0x84)](),console['log'](_0x88dd32(0x9a)),domainMonitoringService_1[_0x88dd32(0x92)]['startMonitoring'](),console[_0x88dd32(0x72)](_0x88dd32(0xac)),startPaymentCleanupScheduler(),app_1[_0x88dd32(0x7d)][_0x88dd32(0x7a)](config_1['config'][_0x88dd32(0x83)],'127.1.1.159',()=>{const _0x22649a=_0x88dd32;console[_0x22649a(0x72)]('ðŸš€\x20Server\x20running\x20on\x20port\x20'+config_1['config']['port']),console[_0x22649a(0x72)](_0x22649a(0x8f)+config_1[_0x22649a(0x82)][_0x22649a(0x93)]),console['log']('ðŸ“Š\x20Health\x20check:\x20http://localhost:'+config_1[_0x22649a(0x82)][_0x22649a(0x83)]+_0x22649a(0x96));});}catch(_0x32d7fc){console[_0x88dd32(0x74)](_0x88dd32(0x7f),_0x32d7fc),process[_0x88dd32(0x9d)](0x1);}}process['on'](a45_0x2160de(0xab),async()=>{const _0x50d788=a45_0x2160de;console['log'](_0x50d788(0x99)),stopPaymentCleanupScheduler(),currencyService_1[_0x50d788(0xa3)]['stopPeriodicUpdates'](),coinToPayStatusService_1[_0x50d788(0x86)][_0x50d788(0xa9)](),domainMonitoringService_1['domainMonitoringService'][_0x50d788(0xa1)](),telegramBotService_1['telegramBotService'][_0x50d788(0x85)](),await database_1[_0x50d788(0x7d)]['$disconnect'](),process[_0x50d788(0x9d)](0x0);}),process['on'](a45_0x2160de(0x88),async()=>{const _0x1d8f64=a45_0x2160de;console[_0x1d8f64(0x72)]('\x0aðŸ”„\x20Gracefully\x20shutting\x20down...'),stopPaymentCleanupScheduler(),currencyService_1[_0x1d8f64(0xa3)][_0x1d8f64(0x80)](),coinToPayStatusService_1[_0x1d8f64(0x86)][_0x1d8f64(0xa9)](),domainMonitoringService_1[_0x1d8f64(0x92)][_0x1d8f64(0xa1)](),telegramBotService_1['telegramBotService']['stopBot'](),await database_1[_0x1d8f64(0x7d)][_0x1d8f64(0x77)](),process[_0x1d8f64(0x9d)](0x0);}),startServer();