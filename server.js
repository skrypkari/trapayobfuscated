'use strict';const a45_0x17a4b8=a45_0x526f;(function(_0x37422d,_0x162268){const _0x235f53=a45_0x526f,_0x40c44a=_0x37422d();while(!![]){try{const _0x4789e7=-parseInt(_0x235f53(0xbb))/0x1*(parseInt(_0x235f53(0xa2))/0x2)+-parseInt(_0x235f53(0x86))/0x3+-parseInt(_0x235f53(0x9b))/0x4+parseInt(_0x235f53(0xbc))/0x5*(-parseInt(_0x235f53(0xa1))/0x6)+-parseInt(_0x235f53(0x9c))/0x7+parseInt(_0x235f53(0xa8))/0x8*(-parseInt(_0x235f53(0x8d))/0x9)+parseInt(_0x235f53(0xb2))/0xa;if(_0x4789e7===_0x162268)break;else _0x40c44a['push'](_0x40c44a['shift']());}catch(_0x164a5d){_0x40c44a['push'](_0x40c44a['shift']());}}}(a45_0x5334,0xaafad));var __importDefault=this&&this[a45_0x17a4b8(0xaf)]||function(_0x1e2162){const _0x3ceb0f=a45_0x17a4b8;return _0x1e2162&&_0x1e2162[_0x3ceb0f(0xb6)]?_0x1e2162:{'default':_0x1e2162};};Object[a45_0x17a4b8(0x82)](exports,a45_0x17a4b8(0xb6),{'value':!![]});const app_1=__importDefault(require('./app')),config_1=require('./config/config'),database_1=__importDefault(require(a45_0x17a4b8(0x9d))),telegramBotService_1=require(a45_0x17a4b8(0xb8)),currencyService_1=require('./services/currencyService'),coinToPayStatusService_1=require(a45_0x17a4b8(0x9f)),domainMonitoringService_1=require(a45_0x17a4b8(0xb4)),paymentCleanupService_1=require('./services/paymentCleanupService');let paymentCleanupInterval=null;function startPaymentCleanupScheduler(){const _0x292e9d=a45_0x17a4b8,_0x3e30e0=0x18,_0x47e866=_0x3e30e0*0x3c*0x3c*0x3e8;console[_0x292e9d(0xa6)](_0x292e9d(0xa0)+_0x3e30e0+_0x292e9d(0xb0)),setTimeout(async()=>{const _0x41f4a0=_0x292e9d;console[_0x41f4a0(0xa6)](_0x41f4a0(0xbd));try{await paymentCleanupService_1[_0x41f4a0(0xaa)][_0x41f4a0(0x8b)](),console[_0x41f4a0(0xa6)](_0x41f4a0(0xa9));}catch(_0x117862){console[_0x41f4a0(0xb7)](_0x41f4a0(0x90),_0x117862);}},0x5*0x3c*0x3e8),paymentCleanupInterval=setInterval(async()=>{const _0x1179e0=_0x292e9d;console[_0x1179e0(0xa6)](_0x1179e0(0x85));try{await paymentCleanupService_1[_0x1179e0(0xaa)][_0x1179e0(0x8b)](),console['log'](_0x1179e0(0xac));}catch(_0x59e083){console['error'](_0x1179e0(0x80),_0x59e083);}},_0x47e866);}function stopPaymentCleanupScheduler(){const _0x481004=a45_0x17a4b8;paymentCleanupInterval&&(clearInterval(paymentCleanupInterval),paymentCleanupInterval=null,console[_0x481004(0xa6)](_0x481004(0x8e)));}function a45_0x526f(_0x24d7a4,_0x442ad4){_0x24d7a4=_0x24d7a4-0x80;const _0x53348e=a45_0x5334();let _0x526f24=_0x53348e[_0x24d7a4];return _0x526f24;}async function startServer(){const _0xaaebc0=a45_0x17a4b8;try{await database_1[_0xaaebc0(0xa4)][_0xaaebc0(0xb3)](),console[_0xaaebc0(0xa6)](_0xaaebc0(0x89));const _0x557848=telegramBotService_1[_0xaaebc0(0x8c)][_0xaaebc0(0x95)]();_0x557848[_0xaaebc0(0x88)]?console[_0xaaebc0(0xa6)](_0xaaebc0(0x8a)+_0x557848[_0xaaebc0(0xb5)]+_0xaaebc0(0x91)):console[_0xaaebc0(0xa6)](_0xaaebc0(0x84)),console[_0xaaebc0(0xa6)](_0xaaebc0(0xa5)),console[_0xaaebc0(0xa6)](_0xaaebc0(0x9a)),coinToPayStatusService_1[_0xaaebc0(0x93)][_0xaaebc0(0xba)](),console[_0xaaebc0(0xa6)](_0xaaebc0(0x81)),domainMonitoringService_1[_0xaaebc0(0x83)]['startMonitoring'](),console[_0xaaebc0(0xa6)](_0xaaebc0(0x8f)),startPaymentCleanupScheduler(),app_1[_0xaaebc0(0xa4)][_0xaaebc0(0xae)](config_1[_0xaaebc0(0x97)][_0xaaebc0(0xb1)],_0xaaebc0(0xa3),()=>{const _0x58ec01=_0xaaebc0;console[_0x58ec01(0xa6)]('ðŸš€\x20Server\x20running\x20on\x20port\x20'+config_1[_0x58ec01(0x97)][_0x58ec01(0xb1)]),console[_0x58ec01(0xa6)]('ðŸŒ\x20Environment:\x20'+config_1[_0x58ec01(0x97)][_0x58ec01(0x9e)]),console[_0x58ec01(0xa6)](_0x58ec01(0xa7)+config_1[_0x58ec01(0x97)]['port']+_0x58ec01(0xad));});}catch(_0x1a9f82){console[_0xaaebc0(0xb7)]('âŒ\x20Failed\x20to\x20start\x20server:',_0x1a9f82),process['exit'](0x1);}}function a45_0x5334(){const _0xa29abe=['ðŸ§¹\x20Running\x20initial\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','\x0aðŸ”„\x20Gracefully\x20shutting\x20down...','âŒ\x20Scheduled\x20cleanup\x20failed:','ðŸ”\x20Initializing\x20domain\x20monitoring\x20service...','defineProperty','domainMonitoringService','âš ï¸\x20Telegram\x20bot\x20is\x20not\x20configured','ðŸ§¹\x20Running\x20scheduled\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','3368193vdxXzh','stopPeriodicUpdates','isActive','âœ…\x20Database\x20connected\x20successfully','âœ…\x20Telegram\x20bot\x20@','runCleanupWithReport','telegramBotService','81vsvctB','ðŸ›‘\x20Payment\x20cleanup\x20scheduler\x20stopped','ðŸ§¹\x20Initializing\x20payment\x20cleanup\x20service...','âŒ\x20Initial\x20cleanup\x20failed:','\x20is\x20active','stopPeriodicStatusCheck','coinToPayStatusService','currencyService','getBotInfo','stopBot','config','SIGINT','stopMonitoring','ðŸª™\x20Initializing\x20CoinToPay\x20status\x20checking\x20service...','297772VlQRWh','3447325QCWQPN','./config/database','nodeEnv','./services/coinToPayStatusService','ðŸ•\x20Payment\x20cleanup\x20scheduled\x20to\x20run\x20every\x20','1164012ZYWhpY','26ZJmfeh','127.1.1.159','default','ðŸ”„\x20Initializing\x20currency\x20rates\x20service...','log','ðŸ“Š\x20Health\x20check:\x20http://localhost:','968584pCHCgR','âœ…\x20Initial\x20cleanup\x20completed\x20successfully','paymentCleanupService','exit','âœ…\x20Scheduled\x20cleanup\x20completed\x20successfully','/api/health','listen','__importDefault','\x20hours','port','41553820wkNvIw','$connect','./services/domainMonitoringService','username','__esModule','error','./services/telegramBotService','$disconnect','startPeriodicStatusCheck','37057qOiZiE','5VHOiEL'];a45_0x5334=function(){return _0xa29abe;};return a45_0x5334();}process['on'](a45_0x17a4b8(0x98),async()=>{const _0x1d9065=a45_0x17a4b8;console[_0x1d9065(0xa6)](_0x1d9065(0xbe)),stopPaymentCleanupScheduler(),currencyService_1['currencyService'][_0x1d9065(0x87)](),coinToPayStatusService_1['coinToPayStatusService']['stopPeriodicStatusCheck'](),domainMonitoringService_1['domainMonitoringService'][_0x1d9065(0x99)](),telegramBotService_1[_0x1d9065(0x8c)][_0x1d9065(0x96)](),await database_1[_0x1d9065(0xa4)][_0x1d9065(0xb9)](),process[_0x1d9065(0xab)](0x0);}),process['on']('SIGTERM',async()=>{const _0x11e9b5=a45_0x17a4b8;console[_0x11e9b5(0xa6)](_0x11e9b5(0xbe)),stopPaymentCleanupScheduler(),currencyService_1[_0x11e9b5(0x94)][_0x11e9b5(0x87)](),coinToPayStatusService_1[_0x11e9b5(0x93)][_0x11e9b5(0x92)](),domainMonitoringService_1[_0x11e9b5(0x83)][_0x11e9b5(0x99)](),telegramBotService_1[_0x11e9b5(0x8c)]['stopBot'](),await database_1['default'][_0x11e9b5(0xb9)](),process[_0x11e9b5(0xab)](0x0);}),startServer();