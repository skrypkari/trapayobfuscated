'use strict';function a37_0x28eb(){const _0x43f48b=['./services/paymentCleanupService','paymentCleanupService','\x20processed,\x20','telegramBotService','log','stopPeriodicUpdates','processed','./config/config','🕐\x20Payment\x20cleanup\x20scheduled\x20to\x20run\x20every\x20','2591974nfOcLZ','✅\x20Telegram\x20bot\x20@','🪙\x20Initializing\x20CoinToPay\x20status\x20checking\x20service...','currencyService','$connect','155805JkAXTI','⚠️\x20Telegram\x20bot\x20is\x20not\x20configured','🛑\x20Payment\x20cleanup\x20scheduler\x20stopped','exit','🌍\x20Environment:\x20','📊\x20Health\x20check:\x20http://localhost:','domainMonitoringService','port','7191820zUxYVV','./config/database','__importDefault','3127491gOgUEc','stopBot','stopMonitoring','48zDpOSJ','1180383DoBTFF','✅\x20Scheduled\x20cleanup\x20completed:\x20','isActive','coinToPayStatusService','error','🧹\x20Initializing\x20payment\x20cleanup\x20service...','nodeEnv','failed','\x20failed','stopPeriodicStatusCheck','\x20is\x20active','409644CDobtt','8iLOAFD','❌\x20Failed\x20to\x20start\x20server:','config','./services/domainMonitoringService','97615TvDZxY','SIGINT','getBotInfo','./services/telegramBotService','\x20hours','2dUMWMH','startPeriodicStatusCheck','🧹\x20Running\x20scheduled\x20payment\x20cleanup...','/api/health','default','\x0a🔄\x20Gracefully\x20shutting\x20down...','__esModule','./services/currencyService','./services/coinToPayStatusService','startMonitoring','listen','defineProperty','❌\x20Initial\x20cleanup\x20failed:','cleanupStaleProcessingPayments','./app','$disconnect'];a37_0x28eb=function(){return _0x43f48b;};return a37_0x28eb();}const a37_0x574e0e=a37_0x5c0d;(function(_0x4e47ef,_0x2bf261){const _0x19ca0e=a37_0x5c0d,_0x3c21db=_0x4e47ef();while(!![]){try{const _0x1c78ef=parseInt(_0x19ca0e(0xfb))/0x1+-parseInt(_0x19ca0e(0xdd))/0x2*(parseInt(_0x19ca0e(0x10a))/0x3)+parseInt(_0x19ca0e(0x109))/0x4*(-parseInt(_0x19ca0e(0x11a))/0x5)+parseInt(_0x19ca0e(0x115))/0x6+parseInt(_0x19ca0e(0xf6))/0x7*(parseInt(_0x19ca0e(0x116))/0x8)+-parseInt(_0x19ca0e(0x106))/0x9+parseInt(_0x19ca0e(0x103))/0xa;if(_0x1c78ef===_0x2bf261)break;else _0x3c21db['push'](_0x3c21db['shift']());}catch(_0x4a5611){_0x3c21db['push'](_0x3c21db['shift']());}}}(a37_0x28eb,0x52983));var __importDefault=this&&this[a37_0x574e0e(0x105)]||function(_0x9e2695){return _0x9e2695&&_0x9e2695['__esModule']?_0x9e2695:{'default':_0x9e2695};};Object[a37_0x574e0e(0xe8)](exports,a37_0x574e0e(0xe3),{'value':!![]});const app_1=__importDefault(require(a37_0x574e0e(0xeb))),config_1=require(a37_0x574e0e(0xf4)),database_1=__importDefault(require(a37_0x574e0e(0x104))),telegramBotService_1=require(a37_0x574e0e(0x11d)),currencyService_1=require(a37_0x574e0e(0xe4)),coinToPayStatusService_1=require(a37_0x574e0e(0xe5)),domainMonitoringService_1=require(a37_0x574e0e(0x119)),paymentCleanupService_1=require(a37_0x574e0e(0xed));let paymentCleanupInterval=null;function a37_0x5c0d(_0x4e82fe,_0x11b553){const _0x28eb65=a37_0x28eb();return a37_0x5c0d=function(_0x5c0de5,_0x15d611){_0x5c0de5=_0x5c0de5-0xdd;let _0x25ecdc=_0x28eb65[_0x5c0de5];return _0x25ecdc;},a37_0x5c0d(_0x4e82fe,_0x11b553);}function startPaymentCleanupScheduler(){const _0x518043=a37_0x574e0e,_0x2c69f7=0x18,_0x3c71ef=_0x2c69f7*0x3c*0x3c*0x3e8;console[_0x518043(0xf1)](_0x518043(0xf5)+_0x2c69f7+_0x518043(0x11e)),setTimeout(async()=>{const _0x4eec29=_0x518043;console[_0x4eec29(0xf1)]('🧹\x20Running\x20initial\x20payment\x20cleanup...');try{const _0x5955c0=await paymentCleanupService_1[_0x4eec29(0xee)]['cleanupStaleProcessingPayments']();console['log']('✅\x20Initial\x20cleanup\x20completed:\x20'+_0x5955c0[_0x4eec29(0xf3)]+_0x4eec29(0xef)+_0x5955c0[_0x4eec29(0x111)]+_0x4eec29(0x112));}catch(_0x33a82c){console[_0x4eec29(0x10e)](_0x4eec29(0xe9),_0x33a82c);}},0x5*0x3c*0x3e8),paymentCleanupInterval=setInterval(async()=>{const _0x329600=_0x518043;console[_0x329600(0xf1)](_0x329600(0xdf));try{const _0x95edad=await paymentCleanupService_1[_0x329600(0xee)][_0x329600(0xea)]();console['log'](_0x329600(0x10b)+_0x95edad[_0x329600(0xf3)]+'\x20processed,\x20'+_0x95edad['failed']+_0x329600(0x112));}catch(_0x421c07){console[_0x329600(0x10e)]('❌\x20Scheduled\x20cleanup\x20failed:',_0x421c07);}},_0x3c71ef);}function stopPaymentCleanupScheduler(){const _0x2c095b=a37_0x574e0e;paymentCleanupInterval&&(clearInterval(paymentCleanupInterval),paymentCleanupInterval=null,console[_0x2c095b(0xf1)](_0x2c095b(0xfd)));}async function startServer(){const _0x57d307=a37_0x574e0e;try{await database_1['default'][_0x57d307(0xfa)](),console[_0x57d307(0xf1)]('✅\x20Database\x20connected\x20successfully');const _0x4734d2=telegramBotService_1[_0x57d307(0xf0)][_0x57d307(0x11c)]();_0x4734d2[_0x57d307(0x10c)]?console[_0x57d307(0xf1)](_0x57d307(0xf7)+_0x4734d2['username']+_0x57d307(0x114)):console[_0x57d307(0xf1)](_0x57d307(0xfc)),console[_0x57d307(0xf1)]('🔄\x20Initializing\x20currency\x20rates\x20service...'),console['log'](_0x57d307(0xf8)),coinToPayStatusService_1[_0x57d307(0x10d)][_0x57d307(0xde)](),console[_0x57d307(0xf1)]('🔍\x20Initializing\x20domain\x20monitoring\x20service...'),domainMonitoringService_1['domainMonitoringService'][_0x57d307(0xe6)](),console[_0x57d307(0xf1)](_0x57d307(0x10f)),startPaymentCleanupScheduler(),app_1[_0x57d307(0xe1)][_0x57d307(0xe7)](config_1[_0x57d307(0x118)]['port'],'127.1.1.159',()=>{const _0x1646ce=_0x57d307;console[_0x1646ce(0xf1)]('🚀\x20Server\x20running\x20on\x20port\x20'+config_1[_0x1646ce(0x118)][_0x1646ce(0x102)]),console[_0x1646ce(0xf1)](_0x1646ce(0xff)+config_1['config'][_0x1646ce(0x110)]),console[_0x1646ce(0xf1)](_0x1646ce(0x100)+config_1[_0x1646ce(0x118)]['port']+_0x1646ce(0xe0));});}catch(_0x38ec8c){console[_0x57d307(0x10e)](_0x57d307(0x117),_0x38ec8c),process[_0x57d307(0xfe)](0x1);}}process['on'](a37_0x574e0e(0x11b),async()=>{const _0x2bf551=a37_0x574e0e;console[_0x2bf551(0xf1)](_0x2bf551(0xe2)),stopPaymentCleanupScheduler(),currencyService_1[_0x2bf551(0xf9)][_0x2bf551(0xf2)](),coinToPayStatusService_1[_0x2bf551(0x10d)][_0x2bf551(0x113)](),domainMonitoringService_1[_0x2bf551(0x101)]['stopMonitoring'](),telegramBotService_1[_0x2bf551(0xf0)][_0x2bf551(0x107)](),await database_1['default'][_0x2bf551(0xec)](),process[_0x2bf551(0xfe)](0x0);}),process['on']('SIGTERM',async()=>{const _0x2cce2d=a37_0x574e0e;console[_0x2cce2d(0xf1)](_0x2cce2d(0xe2)),stopPaymentCleanupScheduler(),currencyService_1[_0x2cce2d(0xf9)][_0x2cce2d(0xf2)](),coinToPayStatusService_1[_0x2cce2d(0x10d)]['stopPeriodicStatusCheck'](),domainMonitoringService_1[_0x2cce2d(0x101)][_0x2cce2d(0x108)](),telegramBotService_1[_0x2cce2d(0xf0)]['stopBot'](),await database_1[_0x2cce2d(0xe1)]['$disconnect'](),process[_0x2cce2d(0xfe)](0x0);}),startServer();