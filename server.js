'use strict';const a39_0x1fe056=a39_0x2b74;(function(_0x37aadb,_0x257399){const _0x5dd748=a39_0x2b74,_0x119947=_0x37aadb();while(!![]){try{const _0x11bdae=-parseInt(_0x5dd748(0xcb))/0x1+parseInt(_0x5dd748(0xb2))/0x2+-parseInt(_0x5dd748(0xb6))/0x3+-parseInt(_0x5dd748(0xaf))/0x4*(-parseInt(_0x5dd748(0x9f))/0x5)+-parseInt(_0x5dd748(0xc6))/0x6*(-parseInt(_0x5dd748(0xb9))/0x7)+parseInt(_0x5dd748(0xc8))/0x8+-parseInt(_0x5dd748(0xa8))/0x9;if(_0x11bdae===_0x257399)break;else _0x119947['push'](_0x119947['shift']());}catch(_0xd19e36){_0x119947['push'](_0x119947['shift']());}}}(a39_0xaf5a,0xd852b));var __importDefault=this&&this[a39_0x1fe056(0xbc)]||function(_0x542052){const _0x504ab4=a39_0x1fe056;return _0x542052&&_0x542052[_0x504ab4(0xa0)]?_0x542052:{'default':_0x542052};};Object['defineProperty'](exports,'__esModule',{'value':!![]});function a39_0xaf5a(){const _0x572a3d=['stopPeriodicUpdates','./app','🌍\x20Environment:\x20','error','2004twpFRz','✅\x20Initial\x20cleanup\x20completed\x20successfully','SIGINT','2674056QKZgDD','❌\x20Scheduled\x20cleanup\x20failed:','./services/currencyService','./services/domainMonitoringService','580764gwldTp','🚀\x20Server\x20running\x20on\x20port\x20','stopBot','303422GpOadB','startMonitoring','✅\x20Telegram\x20bot\x20@','__importDefault','/api/health','\x0a🔄\x20Gracefully\x20shutting\x20down...','./services/paymentCleanupService','❌\x20Initial\x20cleanup\x20failed:','exit','isActive','domainMonitoringService','./config/database','paymentCleanupService','102aRLQbB','port','4514000LqDbgu','default','startPeriodicStatusCheck','1080779MSgYqX','🧹\x20Running\x20scheduled\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','stopMonitoring','./services/coinToPayStatusService','telegramBotService','runCleanupWithReport','\x20is\x20active','$connect','log','username','stopPeriodicStatusCheck','15465JhjgKA','__esModule','nodeEnv','config','$disconnect','coinToPayStatusService','❌\x20Failed\x20to\x20start\x20server:','🔄\x20Initializing\x20currency\x20rates\x20service...','currencyService','18245943RNtAhV','SIGTERM','✅\x20Database\x20connected\x20successfully'];a39_0xaf5a=function(){return _0x572a3d;};return a39_0xaf5a();}const app_1=__importDefault(require(a39_0x1fe056(0xac))),config_1=require('./config/config'),database_1=__importDefault(require(a39_0x1fe056(0xc4))),telegramBotService_1=require('./services/telegramBotService'),currencyService_1=require(a39_0x1fe056(0xb4)),coinToPayStatusService_1=require(a39_0x1fe056(0xce)),domainMonitoringService_1=require(a39_0x1fe056(0xb5)),paymentCleanupService_1=require(a39_0x1fe056(0xbf));let paymentCleanupInterval=null;function startPaymentCleanupScheduler(){const _0x33f42a=0x18,_0x338a38=_0x33f42a*0x3c*0x3c*0x3e8;console['log']('🕐\x20Payment\x20cleanup\x20scheduled\x20to\x20run\x20every\x20'+_0x33f42a+'\x20hours'),setTimeout(async()=>{const _0x558ebc=a39_0x2b74;console['log']('🧹\x20Running\x20initial\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...');try{await paymentCleanupService_1['paymentCleanupService'][_0x558ebc(0xd0)](),console[_0x558ebc(0xd3)](_0x558ebc(0xb0));}catch(_0x57acc1){console[_0x558ebc(0xae)](_0x558ebc(0xc0),_0x57acc1);}},0x5*0x3c*0x3e8),paymentCleanupInterval=setInterval(async()=>{const _0x1f22f0=a39_0x2b74;console[_0x1f22f0(0xd3)](_0x1f22f0(0xcc));try{await paymentCleanupService_1[_0x1f22f0(0xc5)][_0x1f22f0(0xd0)](),console[_0x1f22f0(0xd3)]('✅\x20Scheduled\x20cleanup\x20completed\x20successfully');}catch(_0x2c8ec8){console['error'](_0x1f22f0(0xb3),_0x2c8ec8);}},_0x338a38);}function a39_0x2b74(_0x4e1ce8,_0x2ed715){const _0xaf5a70=a39_0xaf5a();return a39_0x2b74=function(_0x2b740b,_0x26e42c){_0x2b740b=_0x2b740b-0x9e;let _0x2603a2=_0xaf5a70[_0x2b740b];return _0x2603a2;},a39_0x2b74(_0x4e1ce8,_0x2ed715);}function stopPaymentCleanupScheduler(){const _0x4af372=a39_0x1fe056;paymentCleanupInterval&&(clearInterval(paymentCleanupInterval),paymentCleanupInterval=null,console[_0x4af372(0xd3)]('🛑\x20Payment\x20cleanup\x20scheduler\x20stopped'));}async function startServer(){const _0xd4b47b=a39_0x1fe056;try{await database_1[_0xd4b47b(0xc9)][_0xd4b47b(0xd2)](),console[_0xd4b47b(0xd3)](_0xd4b47b(0xaa));const _0x552366=telegramBotService_1[_0xd4b47b(0xcf)]['getBotInfo']();_0x552366[_0xd4b47b(0xc2)]?console[_0xd4b47b(0xd3)](_0xd4b47b(0xbb)+_0x552366[_0xd4b47b(0xd4)]+_0xd4b47b(0xd1)):console['log']('⚠️\x20Telegram\x20bot\x20is\x20not\x20configured'),console[_0xd4b47b(0xd3)](_0xd4b47b(0xa6)),console[_0xd4b47b(0xd3)]('🪙\x20Initializing\x20CoinToPay\x20status\x20checking\x20service...'),coinToPayStatusService_1['coinToPayStatusService'][_0xd4b47b(0xca)](),console[_0xd4b47b(0xd3)]('🔍\x20Initializing\x20domain\x20monitoring\x20service...'),domainMonitoringService_1[_0xd4b47b(0xc3)][_0xd4b47b(0xba)](),console[_0xd4b47b(0xd3)]('🧹\x20Initializing\x20payment\x20cleanup\x20service...'),startPaymentCleanupScheduler(),app_1['default']['listen'](config_1[_0xd4b47b(0xa2)][_0xd4b47b(0xc7)],'127.1.1.159',()=>{const _0x391bb2=_0xd4b47b;console[_0x391bb2(0xd3)](_0x391bb2(0xb7)+config_1['config']['port']),console['log'](_0x391bb2(0xad)+config_1[_0x391bb2(0xa2)][_0x391bb2(0xa1)]),console['log']('📊\x20Health\x20check:\x20http://localhost:'+config_1[_0x391bb2(0xa2)]['port']+_0x391bb2(0xbd));});}catch(_0x50b9ab){console[_0xd4b47b(0xae)](_0xd4b47b(0xa5),_0x50b9ab),process[_0xd4b47b(0xc1)](0x1);}}process['on'](a39_0x1fe056(0xb1),async()=>{const _0x1f155b=a39_0x1fe056;console[_0x1f155b(0xd3)]('\x0a🔄\x20Gracefully\x20shutting\x20down...'),stopPaymentCleanupScheduler(),currencyService_1[_0x1f155b(0xa7)][_0x1f155b(0xab)](),coinToPayStatusService_1['coinToPayStatusService'][_0x1f155b(0x9e)](),domainMonitoringService_1['domainMonitoringService'][_0x1f155b(0xcd)](),telegramBotService_1[_0x1f155b(0xcf)][_0x1f155b(0xb8)](),await database_1[_0x1f155b(0xc9)][_0x1f155b(0xa3)](),process[_0x1f155b(0xc1)](0x0);}),process['on'](a39_0x1fe056(0xa9),async()=>{const _0x2f8a09=a39_0x1fe056;console[_0x2f8a09(0xd3)](_0x2f8a09(0xbe)),stopPaymentCleanupScheduler(),currencyService_1[_0x2f8a09(0xa7)][_0x2f8a09(0xab)](),coinToPayStatusService_1[_0x2f8a09(0xa4)][_0x2f8a09(0x9e)](),domainMonitoringService_1[_0x2f8a09(0xc3)][_0x2f8a09(0xcd)](),telegramBotService_1['telegramBotService'][_0x2f8a09(0xb8)](),await database_1['default'][_0x2f8a09(0xa3)](),process[_0x2f8a09(0xc1)](0x0);}),startServer();