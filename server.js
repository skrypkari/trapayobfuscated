'use strict';const a47_0x52d421=a47_0x49aa;(function(_0x42d3a1,_0x59d59e){const _0x11f87d=a47_0x49aa,_0x4fe437=_0x42d3a1();while(!![]){try{const _0x4c95d8=parseInt(_0x11f87d(0x178))/0x1+-parseInt(_0x11f87d(0x1a8))/0x2*(parseInt(_0x11f87d(0x180))/0x3)+parseInt(_0x11f87d(0x17f))/0x4*(parseInt(_0x11f87d(0x188))/0x5)+-parseInt(_0x11f87d(0x17d))/0x6+-parseInt(_0x11f87d(0x1aa))/0x7*(parseInt(_0x11f87d(0x187))/0x8)+-parseInt(_0x11f87d(0x18c))/0x9+parseInt(_0x11f87d(0x197))/0xa;if(_0x4c95d8===_0x59d59e)break;else _0x4fe437['push'](_0x4fe437['shift']());}catch(_0xcfdc93){_0x4fe437['push'](_0x4fe437['shift']());}}}(a47_0x3891,0xcd1b2));var __importDefault=this&&this[a47_0x52d421(0x182)]||function(_0x2fc858){const _0x540528=a47_0x52d421;return _0x2fc858&&_0x2fc858[_0x540528(0x184)]?_0x2fc858:{'default':_0x2fc858};};Object[a47_0x52d421(0x189)](exports,a47_0x52d421(0x184),{'value':!![]});const app_1=__importDefault(require(a47_0x52d421(0x1a4))),config_1=require(a47_0x52d421(0x183)),database_1=__importDefault(require(a47_0x52d421(0x19d))),telegramBotService_1=require('./services/telegramBotService'),currencyService_1=require('./services/currencyService'),coinToPayStatusService_1=require('./services/coinToPayStatusService'),domainMonitoringService_1=require(a47_0x52d421(0x1a2)),paymentCleanupService_1=require(a47_0x52d421(0x18a));let paymentCleanupInterval=null;function a47_0x49aa(_0x22d03b,_0x258beb){_0x22d03b=_0x22d03b-0x171;const _0x389170=a47_0x3891();let _0x49aa1e=_0x389170[_0x22d03b];return _0x49aa1e;}function startPaymentCleanupScheduler(){const _0x5b62a8=a47_0x52d421,_0x1047b5=0x18,_0x3f8dc8=_0x1047b5*0x3c*0x3c*0x3e8;console[_0x5b62a8(0x17e)]('ðŸ•\x20Payment\x20cleanup\x20scheduled\x20to\x20run\x20every\x20'+_0x1047b5+'\x20hours'),setTimeout(async()=>{const _0x2a7782=_0x5b62a8;console[_0x2a7782(0x17e)](_0x2a7782(0x190));try{await paymentCleanupService_1['paymentCleanupService'][_0x2a7782(0x199)](),console[_0x2a7782(0x17e)](_0x2a7782(0x185));}catch(_0x2f149d){console['error'](_0x2a7782(0x181),_0x2f149d);}},0x5*0x3c*0x3e8),paymentCleanupInterval=setInterval(async()=>{const _0x476f6e=_0x5b62a8;console[_0x476f6e(0x17e)](_0x476f6e(0x194));try{await paymentCleanupService_1['paymentCleanupService']['runCleanupWithReport'](),console['log'](_0x476f6e(0x17b));}catch(_0x451150){console[_0x476f6e(0x19e)]('âŒ\x20Scheduled\x20cleanup\x20failed:',_0x451150);}},_0x3f8dc8);}function a47_0x3891(){const _0x1d39f7=['SIGINT','stopPeriodicUpdates','3092380lPaaUT','stopBot','runCleanupWithReport','startMonitoring','ðŸš€\x20Server\x20running\x20on\x20port\x20','SIGTERM','./config/database','error','startPeriodicStatusCheck','listen','username','./services/domainMonitoringService','config','./app','nodeEnv','stopPeriodicStatusCheck','ðŸ§¹\x20Initializing\x20payment\x20cleanup\x20service...','30AahBWb','domainMonitoringService','7rdkqkL','coinToPayStatusService','stopMonitoring','default','\x20is\x20active','telegramBotService','$disconnect','127.1.1.159','510901ZMFCYd','$connect','ðŸ”„\x20Initializing\x20currency\x20rates\x20service...','âœ…\x20Scheduled\x20cleanup\x20completed\x20successfully','currencyService','2086770uQgwGb','log','92fYxfjD','15843pudlZK','âŒ\x20Initial\x20cleanup\x20failed:','__importDefault','./config/config','__esModule','âœ…\x20Initial\x20cleanup\x20completed\x20successfully','ðŸ›‘\x20Payment\x20cleanup\x20scheduler\x20stopped','1097200jmxSes','198890ogNrea','defineProperty','./services/paymentCleanupService','âœ…\x20Database\x20connected\x20successfully','2976831sdHABk','/api/health','exit','\x0aðŸ”„\x20Gracefully\x20shutting\x20down...','ðŸ§¹\x20Running\x20initial\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','port','ðŸ“Š\x20Health\x20check:\x20http://localhost:','ðŸŒ\x20Environment:\x20','ðŸ§¹\x20Running\x20scheduled\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...'];a47_0x3891=function(){return _0x1d39f7;};return a47_0x3891();}function stopPaymentCleanupScheduler(){const _0x2684eb=a47_0x52d421;paymentCleanupInterval&&(clearInterval(paymentCleanupInterval),paymentCleanupInterval=null,console['log'](_0x2684eb(0x186)));}async function startServer(){const _0x23c6fa=a47_0x52d421;try{await database_1[_0x23c6fa(0x173)][_0x23c6fa(0x179)](),console[_0x23c6fa(0x17e)](_0x23c6fa(0x18b));const _0x306b27=telegramBotService_1[_0x23c6fa(0x175)]['getBotInfo']();_0x306b27['isActive']?console[_0x23c6fa(0x17e)]('âœ…\x20Telegram\x20bot\x20@'+_0x306b27[_0x23c6fa(0x1a1)]+_0x23c6fa(0x174)):console[_0x23c6fa(0x17e)]('âš ï¸\x20Telegram\x20bot\x20is\x20not\x20configured');console[_0x23c6fa(0x17e)](_0x23c6fa(0x17a)),console[_0x23c6fa(0x17e)]('ðŸª™\x20Initializing\x20CoinToPay\x20status\x20checking\x20service...'),coinToPayStatusService_1['coinToPayStatusService'][_0x23c6fa(0x19f)](),console['log']('ðŸ”\x20Initializing\x20domain\x20monitoring\x20service...'),domainMonitoringService_1[_0x23c6fa(0x1a9)][_0x23c6fa(0x19a)](),console['log'](_0x23c6fa(0x1a7)),startPaymentCleanupScheduler();config_1[_0x23c6fa(0x1a3)][_0x23c6fa(0x1a5)]==='production'?app_1[_0x23c6fa(0x173)][_0x23c6fa(0x1a0)](config_1[_0x23c6fa(0x1a3)][_0x23c6fa(0x191)],()=>{const _0x5c17c0=_0x23c6fa;console[_0x5c17c0(0x17e)](_0x5c17c0(0x19b)+config_1['config'][_0x5c17c0(0x191)]),console[_0x5c17c0(0x17e)](_0x5c17c0(0x193)+config_1['config']['nodeEnv']);}):app_1[_0x23c6fa(0x173)]['listen'](config_1[_0x23c6fa(0x1a3)][_0x23c6fa(0x191)],_0x23c6fa(0x177),()=>{const _0x55fb1a=_0x23c6fa;console['log'](_0x55fb1a(0x19b)+config_1[_0x55fb1a(0x1a3)][_0x55fb1a(0x191)]),console[_0x55fb1a(0x17e)](_0x55fb1a(0x193)+config_1[_0x55fb1a(0x1a3)][_0x55fb1a(0x1a5)]),console[_0x55fb1a(0x17e)](_0x55fb1a(0x192)+config_1['config'][_0x55fb1a(0x191)]+_0x55fb1a(0x18d));});;}catch(_0x2bcda0){console[_0x23c6fa(0x19e)]('âŒ\x20Failed\x20to\x20start\x20server:',_0x2bcda0),process[_0x23c6fa(0x18e)](0x1);}}process['on'](a47_0x52d421(0x195),async()=>{const _0x43fa70=a47_0x52d421;console['log'](_0x43fa70(0x18f)),stopPaymentCleanupScheduler(),currencyService_1[_0x43fa70(0x17c)]['stopPeriodicUpdates'](),coinToPayStatusService_1['coinToPayStatusService'][_0x43fa70(0x1a6)](),domainMonitoringService_1['domainMonitoringService']['stopMonitoring'](),telegramBotService_1[_0x43fa70(0x175)][_0x43fa70(0x198)](),await database_1[_0x43fa70(0x173)][_0x43fa70(0x176)](),process['exit'](0x0);}),process['on'](a47_0x52d421(0x19c),async()=>{const _0x4c8209=a47_0x52d421;console[_0x4c8209(0x17e)](_0x4c8209(0x18f)),stopPaymentCleanupScheduler(),currencyService_1[_0x4c8209(0x17c)][_0x4c8209(0x196)](),coinToPayStatusService_1[_0x4c8209(0x171)]['stopPeriodicStatusCheck'](),domainMonitoringService_1['domainMonitoringService'][_0x4c8209(0x172)](),telegramBotService_1[_0x4c8209(0x175)][_0x4c8209(0x198)](),await database_1[_0x4c8209(0x173)][_0x4c8209(0x176)](),process[_0x4c8209(0x18e)](0x0);}),startServer();