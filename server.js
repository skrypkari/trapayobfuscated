'use strict';const a39_0x19240f=a39_0x546e;(function(_0x4177ae,_0x1b8a7f){const _0x16ac9f=a39_0x546e,_0x85b4fe=_0x4177ae();while(!![]){try{const _0x26ccd7=-parseInt(_0x16ac9f(0x94))/0x1+parseInt(_0x16ac9f(0xaf))/0x2*(parseInt(_0x16ac9f(0xa9))/0x3)+parseInt(_0x16ac9f(0xab))/0x4+parseInt(_0x16ac9f(0xba))/0x5+parseInt(_0x16ac9f(0xc2))/0x6+parseInt(_0x16ac9f(0xc0))/0x7*(-parseInt(_0x16ac9f(0x99))/0x8)+-parseInt(_0x16ac9f(0xa1))/0x9;if(_0x26ccd7===_0x1b8a7f)break;else _0x85b4fe['push'](_0x85b4fe['shift']());}catch(_0x19fb76){_0x85b4fe['push'](_0x85b4fe['shift']());}}}(a39_0x308d,0xbef9f));var __importDefault=this&&this[a39_0x19240f(0xc3)]||function(_0x1f1e72){const _0x250644=a39_0x19240f;return _0x1f1e72&&_0x1f1e72[_0x250644(0xa3)]?_0x1f1e72:{'default':_0x1f1e72};};Object[a39_0x19240f(0xc6)](exports,a39_0x19240f(0xa3),{'value':!![]});const app_1=__importDefault(require(a39_0x19240f(0xb0))),config_1=require('./config/config'),database_1=__importDefault(require('./config/database')),telegramBotService_1=require(a39_0x19240f(0x95)),currencyService_1=require(a39_0x19240f(0x9d)),coinToPayStatusService_1=require(a39_0x19240f(0xa4)),domainMonitoringService_1=require(a39_0x19240f(0xb7)),paymentCleanupService_1=require('./services/paymentCleanupService');function a39_0x546e(_0x30e39e,_0x4781c1){const _0x308dbc=a39_0x308d();return a39_0x546e=function(_0x546ecd,_0x579b8f){_0x546ecd=_0x546ecd-0x93;let _0x1df239=_0x308dbc[_0x546ecd];return _0x1df239;},a39_0x546e(_0x30e39e,_0x4781c1);}let paymentCleanupInterval=null;function startPaymentCleanupScheduler(){const _0x2e0994=a39_0x19240f,_0x150741=0x18,_0xf51c22=_0x150741*0x3c*0x3c*0x3e8;console[_0x2e0994(0x9b)](_0x2e0994(0xbd)+_0x150741+'\x20hours'),setTimeout(async()=>{const _0x1acdb2=_0x2e0994;console[_0x1acdb2(0x9b)](_0x1acdb2(0xc8));try{await paymentCleanupService_1['paymentCleanupService']['runCleanupWithReport'](),console[_0x1acdb2(0x9b)](_0x1acdb2(0xb9));}catch(_0xdc534){console[_0x1acdb2(0xc7)]('❌\x20Initial\x20cleanup\x20failed:',_0xdc534);}},0x5*0x3c*0x3e8),paymentCleanupInterval=setInterval(async()=>{const _0x6ffab9=_0x2e0994;console[_0x6ffab9(0x9b)]('🧹\x20Running\x20scheduled\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...');try{await paymentCleanupService_1[_0x6ffab9(0xad)]['runCleanupWithReport'](),console[_0x6ffab9(0x9b)](_0x6ffab9(0xa7));}catch(_0x574234){console[_0x6ffab9(0xc7)](_0x6ffab9(0x97),_0x574234);}},_0xf51c22);}function stopPaymentCleanupScheduler(){const _0x19716e=a39_0x19240f;paymentCleanupInterval&&(clearInterval(paymentCleanupInterval),paymentCleanupInterval=null,console['log'](_0x19716e(0xbe)));}async function startServer(){const _0x438783=a39_0x19240f;try{await database_1['default']['$connect'](),console[_0x438783(0x9b)](_0x438783(0xb5));const _0xda0bdd=telegramBotService_1[_0x438783(0xaa)]['getBotInfo']();_0xda0bdd[_0x438783(0xa2)]?console[_0x438783(0x9b)](_0x438783(0x9e)+_0xda0bdd['username']+_0x438783(0x9a)):console['log'](_0x438783(0xb4)),console[_0x438783(0x9b)]('🔄\x20Initializing\x20currency\x20rates\x20service...'),console[_0x438783(0x9b)]('🪙\x20Initializing\x20CoinToPay\x20status\x20checking\x20service...'),coinToPayStatusService_1[_0x438783(0xb2)][_0x438783(0xa6)](),console[_0x438783(0x9b)](_0x438783(0xbb)),domainMonitoringService_1[_0x438783(0xbc)]['startMonitoring'](),console[_0x438783(0x9b)](_0x438783(0xae)),startPaymentCleanupScheduler(),app_1[_0x438783(0xb3)]['listen'](config_1[_0x438783(0xa5)][_0x438783(0xb1)],'127.1.1.159',()=>{const _0x316237=_0x438783;console['log'](_0x316237(0xc5)+config_1[_0x316237(0xa5)][_0x316237(0xb1)]),console[_0x316237(0x9b)](_0x316237(0xc4)+config_1[_0x316237(0xa5)][_0x316237(0xb6)]),console['log']('📊\x20Health\x20check:\x20http://localhost:'+config_1[_0x316237(0xa5)][_0x316237(0xb1)]+_0x316237(0xc1));});}catch(_0x54b804){console[_0x438783(0xc7)](_0x438783(0x9c),_0x54b804),process[_0x438783(0x96)](0x1);}}function a39_0x308d(){const _0x28e775=['610685ClYMoW','🔍\x20Initializing\x20domain\x20monitoring\x20service...','domainMonitoringService','🕐\x20Payment\x20cleanup\x20scheduled\x20to\x20run\x20every\x20','🛑\x20Payment\x20cleanup\x20scheduler\x20stopped','SIGINT','1320697xuOsuj','/api/health','5892762qXDKXm','__importDefault','🌍\x20Environment:\x20','🚀\x20Server\x20running\x20on\x20port\x20','defineProperty','error','🧹\x20Running\x20initial\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','stopMonitoring','795094rzVHjh','./services/telegramBotService','exit','❌\x20Scheduled\x20cleanup\x20failed:','stopBot','16XrgiVX','\x20is\x20active','log','❌\x20Failed\x20to\x20start\x20server:','./services/currencyService','✅\x20Telegram\x20bot\x20@','currencyService','SIGTERM','6852366RyvbpX','isActive','__esModule','./services/coinToPayStatusService','config','startPeriodicStatusCheck','✅\x20Scheduled\x20cleanup\x20completed\x20successfully','\x0a🔄\x20Gracefully\x20shutting\x20down...','990588bISmMg','telegramBotService','5126356nIVCfh','stopPeriodicUpdates','paymentCleanupService','🧹\x20Initializing\x20payment\x20cleanup\x20service...','2IVIOlL','./app','port','coinToPayStatusService','default','⚠️\x20Telegram\x20bot\x20is\x20not\x20configured','✅\x20Database\x20connected\x20successfully','nodeEnv','./services/domainMonitoringService','stopPeriodicStatusCheck','✅\x20Initial\x20cleanup\x20completed\x20successfully'];a39_0x308d=function(){return _0x28e775;};return a39_0x308d();}process['on'](a39_0x19240f(0xbf),async()=>{const _0x12cb9d=a39_0x19240f;console[_0x12cb9d(0x9b)](_0x12cb9d(0xa8)),stopPaymentCleanupScheduler(),currencyService_1['currencyService'][_0x12cb9d(0xac)](),coinToPayStatusService_1[_0x12cb9d(0xb2)][_0x12cb9d(0xb8)](),domainMonitoringService_1[_0x12cb9d(0xbc)]['stopMonitoring'](),telegramBotService_1[_0x12cb9d(0xaa)][_0x12cb9d(0x98)](),await database_1['default']['$disconnect'](),process[_0x12cb9d(0x96)](0x0);}),process['on'](a39_0x19240f(0xa0),async()=>{const _0x1c67d1=a39_0x19240f;console[_0x1c67d1(0x9b)](_0x1c67d1(0xa8)),stopPaymentCleanupScheduler(),currencyService_1[_0x1c67d1(0x9f)][_0x1c67d1(0xac)](),coinToPayStatusService_1[_0x1c67d1(0xb2)][_0x1c67d1(0xb8)](),domainMonitoringService_1['domainMonitoringService'][_0x1c67d1(0x93)](),telegramBotService_1[_0x1c67d1(0xaa)][_0x1c67d1(0x98)](),await database_1['default']['$disconnect'](),process[_0x1c67d1(0x96)](0x0);}),startServer();