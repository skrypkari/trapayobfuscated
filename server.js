'use strict';const a47_0x384de8=a47_0x2990;(function(_0x2d450d,_0x2f04a0){const _0x1e1c2f=a47_0x2990,_0x3c112b=_0x2d450d();while(!![]){try{const _0x2b51e2=-parseInt(_0x1e1c2f(0x1b7))/0x1*(parseInt(_0x1e1c2f(0x1e1))/0x2)+-parseInt(_0x1e1c2f(0x1de))/0x3+parseInt(_0x1e1c2f(0x1b0))/0x4*(parseInt(_0x1e1c2f(0x1e8))/0x5)+-parseInt(_0x1e1c2f(0x1ee))/0x6*(parseInt(_0x1e1c2f(0x1ca))/0x7)+-parseInt(_0x1e1c2f(0x1db))/0x8+-parseInt(_0x1e1c2f(0x1d2))/0x9+parseInt(_0x1e1c2f(0x1be))/0xa;if(_0x2b51e2===_0x2f04a0)break;else _0x3c112b['push'](_0x3c112b['shift']());}catch(_0x42933c){_0x3c112b['push'](_0x3c112b['shift']());}}}(a47_0xf23b,0xf3725));var __importDefault=this&&this[a47_0x384de8(0x1c1)]||function(_0x14f561){return _0x14f561&&_0x14f561['__esModule']?_0x14f561:{'default':_0x14f561};};Object[a47_0x384de8(0x1d3)](exports,a47_0x384de8(0x1b2),{'value':!![]});const app_1=__importDefault(require('./app')),config_1=require('./config/config'),database_1=__importDefault(require(a47_0x384de8(0x1ec))),telegramBotService_1=require(a47_0x384de8(0x1b5)),currencyService_1=require('./services/currencyService'),coinToPayStatusService_1=require('./services/coinToPayStatusService'),domainMonitoringService_1=require(a47_0x384de8(0x1ba)),paymentCleanupService_1=require('./services/paymentCleanupService');function a47_0x2990(_0x37ed8a,_0x1fa48a){_0x37ed8a=_0x37ed8a-0x1ae;const _0xf23bc3=a47_0xf23b();let _0x2990ff=_0xf23bc3[_0x37ed8a];return _0x2990ff;}let paymentCleanupInterval=null;function startPaymentCleanupScheduler(){const _0x5b46f1=a47_0x384de8,_0x45b7b1=0x18,_0x372674=_0x45b7b1*0x3c*0x3c*0x3e8;console[_0x5b46f1(0x1e6)](_0x5b46f1(0x1d4)+_0x45b7b1+'\x20hours'),setTimeout(async()=>{const _0x101c0f=_0x5b46f1;console[_0x101c0f(0x1e6)](_0x101c0f(0x1d5));try{await paymentCleanupService_1[_0x101c0f(0x1d9)][_0x101c0f(0x1eb)](),console['log'](_0x101c0f(0x1da));}catch(_0x2ff269){console[_0x101c0f(0x1bc)](_0x101c0f(0x1e4),_0x2ff269);}},0x5*0x3c*0x3e8),paymentCleanupInterval=setInterval(async()=>{const _0x252573=_0x5b46f1;console[_0x252573(0x1e6)](_0x252573(0x1bb));try{await paymentCleanupService_1[_0x252573(0x1d9)][_0x252573(0x1eb)](),console['log'](_0x252573(0x1d6));}catch(_0x326fdf){console[_0x252573(0x1bc)](_0x252573(0x1cc),_0x326fdf);}},_0x372674),setTimeout(async()=>{const _0x187834=_0x5b46f1;console['log']('â°\x20Running\x20initial\x20payment\x20link\x20expiration\x20check...');try{await paymentCleanupService_1[_0x187834(0x1d9)][_0x187834(0x1b9)](),console[_0x187834(0x1e6)](_0x187834(0x1d7));}catch(_0x1b2180){console[_0x187834(0x1bc)](_0x187834(0x1dd),_0x1b2180);}},0x2*0x3c*0x3e8),setInterval(async()=>{const _0x2b975a=_0x5b46f1;console[_0x2b975a(0x1e6)](_0x2b975a(0x1ce));try{await paymentCleanupService_1['paymentCleanupService'][_0x2b975a(0x1b9)](),console[_0x2b975a(0x1e6)]('âœ…\x20Scheduled\x20link\x20expiration\x20check\x20completed');}catch(_0x51ea17){console[_0x2b975a(0x1bc)](_0x2b975a(0x1af),_0x51ea17);}},0x5*0x3c*0x3e8);}function stopPaymentCleanupScheduler(){const _0x31cf72=a47_0x384de8;paymentCleanupInterval&&(clearInterval(paymentCleanupInterval),paymentCleanupInterval=null,console[_0x31cf72(0x1e6)](_0x31cf72(0x1cf)));}async function startServer(){const _0x3d1b72=a47_0x384de8;try{await database_1[_0x3d1b72(0x1c5)]['$connect'](),console[_0x3d1b72(0x1e6)](_0x3d1b72(0x1b1));const _0x3b2d26=telegramBotService_1[_0x3d1b72(0x1c0)][_0x3d1b72(0x1cb)]();_0x3b2d26[_0x3d1b72(0x1e2)]?console[_0x3d1b72(0x1e6)]('âœ…\x20Telegram\x20bot\x20@'+_0x3b2d26[_0x3d1b72(0x1ae)]+_0x3d1b72(0x1e3)):console['log'](_0x3d1b72(0x1df));console[_0x3d1b72(0x1e6)](_0x3d1b72(0x1e5)),console[_0x3d1b72(0x1e6)](_0x3d1b72(0x1ef)),coinToPayStatusService_1[_0x3d1b72(0x1c6)][_0x3d1b72(0x1c3)](),console[_0x3d1b72(0x1e6)](_0x3d1b72(0x1d8)),domainMonitoringService_1[_0x3d1b72(0x1bf)][_0x3d1b72(0x1b6)](),console[_0x3d1b72(0x1e6)]('ðŸ§¹\x20Initializing\x20payment\x20cleanup\x20service...'),startPaymentCleanupScheduler();config_1['config']['nodeEnv']===_0x3d1b72(0x1d0)?app_1[_0x3d1b72(0x1c5)][_0x3d1b72(0x1ed)](config_1[_0x3d1b72(0x1f0)][_0x3d1b72(0x1e7)],()=>{const _0xda418=_0x3d1b72;console[_0xda418(0x1e6)](_0xda418(0x1ea)+config_1[_0xda418(0x1f0)][_0xda418(0x1e7)]),console['log'](_0xda418(0x1b3)+config_1[_0xda418(0x1f0)]['nodeEnv']);}):app_1['default'][_0x3d1b72(0x1ed)](config_1['config'][_0x3d1b72(0x1e7)],_0x3d1b72(0x1c7),()=>{const _0x5bd965=_0x3d1b72;console[_0x5bd965(0x1e6)](_0x5bd965(0x1ea)+config_1['config'][_0x5bd965(0x1e7)]),console['log'](_0x5bd965(0x1b3)+config_1[_0x5bd965(0x1f0)][_0x5bd965(0x1c4)]),console[_0x5bd965(0x1e6)]('ðŸ“Š\x20Health\x20check:\x20http://localhost:'+config_1[_0x5bd965(0x1f0)][_0x5bd965(0x1e7)]+_0x5bd965(0x1e9));});;}catch(_0x282232){console[_0x3d1b72(0x1bc)](_0x3d1b72(0x1dc),_0x282232),process[_0x3d1b72(0x1bd)](0x1);}}function a47_0xf23b(){const _0x1348aa=['exit','38362800XYJgom','domainMonitoringService','telegramBotService','__importDefault','stopBot','startPeriodicStatusCheck','nodeEnv','default','coinToPayStatusService','127.1.1.159','currencyService','stopPeriodicStatusCheck','586390xglTwH','getBotInfo','âŒ\x20Scheduled\x20cleanup\x20failed:','$disconnect','â°\x20Running\x20scheduled\x20payment\x20link\x20expiration\x20check...','ðŸ›‘\x20Payment\x20cleanup\x20scheduler\x20stopped','production','stopMonitoring','10437480UEKYAO','defineProperty','ðŸ•\x20Payment\x20cleanup\x20scheduled\x20to\x20run\x20every\x20','ðŸ§¹\x20Running\x20initial\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','âœ…\x20Scheduled\x20cleanup\x20completed\x20successfully','âœ…\x20Initial\x20link\x20expiration\x20check\x20completed','ðŸ”\x20Initializing\x20domain\x20monitoring\x20service...','paymentCleanupService','âœ…\x20Initial\x20cleanup\x20completed\x20successfully','6344464CsbVLa','âŒ\x20Failed\x20to\x20start\x20server:','âŒ\x20Initial\x20link\x20expiration\x20check\x20failed:','3787218FdBFFG','âš ï¸\x20Telegram\x20bot\x20is\x20not\x20configured','SIGINT','1495294sqvAuE','isActive','\x20is\x20active','âŒ\x20Initial\x20cleanup\x20failed:','ðŸ”„\x20Initializing\x20currency\x20rates\x20service...','log','port','5WDFBYk','/api/health','ðŸš€\x20Server\x20running\x20on\x20port\x20','runCleanupWithReport','./config/database','listen','18lDvmTL','ðŸª™\x20Initializing\x20CoinToPay\x20status\x20checking\x20service...','config','username','âŒ\x20Scheduled\x20link\x20expiration\x20check\x20failed:','5500072iljycg','âœ…\x20Database\x20connected\x20successfully','__esModule','ðŸŒ\x20Environment:\x20','\x0aðŸ”„\x20Gracefully\x20shutting\x20down...','./services/telegramBotService','startMonitoring','1WUQWuS','stopPeriodicUpdates','expireSinglePaymentLinks','./services/domainMonitoringService','ðŸ§¹\x20Running\x20scheduled\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','error'];a47_0xf23b=function(){return _0x1348aa;};return a47_0xf23b();}process['on'](a47_0x384de8(0x1e0),async()=>{const _0x2b2e7d=a47_0x384de8;console['log'](_0x2b2e7d(0x1b4)),stopPaymentCleanupScheduler(),currencyService_1[_0x2b2e7d(0x1c8)][_0x2b2e7d(0x1b8)](),coinToPayStatusService_1[_0x2b2e7d(0x1c6)][_0x2b2e7d(0x1c9)](),domainMonitoringService_1['domainMonitoringService'][_0x2b2e7d(0x1d1)](),telegramBotService_1[_0x2b2e7d(0x1c0)][_0x2b2e7d(0x1c2)](),await database_1[_0x2b2e7d(0x1c5)][_0x2b2e7d(0x1cd)](),process['exit'](0x0);}),process['on']('SIGTERM',async()=>{const _0x320608=a47_0x384de8;console[_0x320608(0x1e6)](_0x320608(0x1b4)),stopPaymentCleanupScheduler(),currencyService_1['currencyService'][_0x320608(0x1b8)](),coinToPayStatusService_1[_0x320608(0x1c6)]['stopPeriodicStatusCheck'](),domainMonitoringService_1[_0x320608(0x1bf)][_0x320608(0x1d1)](),telegramBotService_1['telegramBotService'][_0x320608(0x1c2)](),await database_1[_0x320608(0x1c5)][_0x320608(0x1cd)](),process[_0x320608(0x1bd)](0x0);}),startServer();