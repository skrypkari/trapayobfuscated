'use strict';const a39_0x1b5c6d=a39_0x54c2;(function(_0x5cedc0,_0x3f0cae){const _0x1a329f=a39_0x54c2,_0x3c5580=_0x5cedc0();while(!![]){try{const _0x195a45=-parseInt(_0x1a329f(0x1bf))/0x1*(-parseInt(_0x1a329f(0x1e8))/0x2)+-parseInt(_0x1a329f(0x1b9))/0x3+-parseInt(_0x1a329f(0x1d9))/0x4+parseInt(_0x1a329f(0x1d2))/0x5*(-parseInt(_0x1a329f(0x1e3))/0x6)+parseInt(_0x1a329f(0x1bc))/0x7+-parseInt(_0x1a329f(0x1d0))/0x8+parseInt(_0x1a329f(0x1d8))/0x9;if(_0x195a45===_0x3f0cae)break;else _0x3c5580['push'](_0x3c5580['shift']());}catch(_0x3d3d1e){_0x3c5580['push'](_0x3c5580['shift']());}}}(a39_0x3982,0x64546));function a39_0x3982(){const _0x218de6=['stopPeriodicUpdates','log','getBotInfo','stopMonitoring','runCleanupWithReport','746776NwMxeq','🧹\x20Running\x20initial\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','14165kMJuhJ','startPeriodicStatusCheck','default','📊\x20Health\x20check:\x20http://localhost:','\x20hours','✅\x20Telegram\x20bot\x20@','7778358rUQipm','1288476vCyvNH','❌\x20Initial\x20cleanup\x20failed:','./services/domainMonitoringService','$connect','__esModule','./services/coinToPayStatusService','🌍\x20Environment:\x20','🔄\x20Initializing\x20currency\x20rates\x20service...','currencyService','./app','1140MVwkVj','startMonitoring','defineProperty','exit','🪙\x20Initializing\x20CoinToPay\x20status\x20checking\x20service...','2798bNuskp','stopPeriodicStatusCheck','username','telegramBotService','./config/config','paymentCleanupService','config','✅\x20Scheduled\x20cleanup\x20completed\x20successfully','error','isActive','stopBot','✅\x20Initial\x20cleanup\x20completed\x20successfully','❌\x20Scheduled\x20cleanup\x20failed:','461205RZhnqC','🚀\x20Server\x20running\x20on\x20port\x20','./services/telegramBotService','4304909duqorV','coinToPayStatusService','\x0a🔄\x20Gracefully\x20shutting\x20down...','28jJrCvm','./services/currencyService','❌\x20Failed\x20to\x20start\x20server:','./services/paymentCleanupService','$disconnect','nodeEnv','🛑\x20Payment\x20cleanup\x20scheduler\x20stopped','SIGINT','port','\x20is\x20active','domainMonitoringService','🕐\x20Payment\x20cleanup\x20scheduled\x20to\x20run\x20every\x20'];a39_0x3982=function(){return _0x218de6;};return a39_0x3982();}var __importDefault=this&&this['__importDefault']||function(_0x21b5aa){const _0x1fb63c=a39_0x54c2;return _0x21b5aa&&_0x21b5aa[_0x1fb63c(0x1dd)]?_0x21b5aa:{'default':_0x21b5aa};};Object[a39_0x1b5c6d(0x1e5)](exports,a39_0x1b5c6d(0x1dd),{'value':!![]});const app_1=__importDefault(require(a39_0x1b5c6d(0x1e2))),config_1=require(a39_0x1b5c6d(0x1b0)),database_1=__importDefault(require('./config/database')),telegramBotService_1=require(a39_0x1b5c6d(0x1bb)),currencyService_1=require(a39_0x1b5c6d(0x1c0)),coinToPayStatusService_1=require(a39_0x1b5c6d(0x1de)),domainMonitoringService_1=require(a39_0x1b5c6d(0x1db)),paymentCleanupService_1=require(a39_0x1b5c6d(0x1c2));function a39_0x54c2(_0x3e1af6,_0x20e788){const _0x3982d2=a39_0x3982();return a39_0x54c2=function(_0x54c2a9,_0x4d32fc){_0x54c2a9=_0x54c2a9-0x1af;let _0x47f889=_0x3982d2[_0x54c2a9];return _0x47f889;},a39_0x54c2(_0x3e1af6,_0x20e788);}let paymentCleanupInterval=null;function startPaymentCleanupScheduler(){const _0x361647=a39_0x1b5c6d,_0x5f2763=0x18,_0xd6bbcd=_0x5f2763*0x3c*0x3c*0x3e8;console[_0x361647(0x1cc)](_0x361647(0x1ca)+_0x5f2763+_0x361647(0x1d6)),setTimeout(async()=>{const _0x30f22b=_0x361647;console[_0x30f22b(0x1cc)](_0x30f22b(0x1d1));try{await paymentCleanupService_1[_0x30f22b(0x1b1)]['runCleanupWithReport'](),console[_0x30f22b(0x1cc)](_0x30f22b(0x1b7));}catch(_0x1aa725){console[_0x30f22b(0x1b4)](_0x30f22b(0x1da),_0x1aa725);}},0x5*0x3c*0x3e8),paymentCleanupInterval=setInterval(async()=>{const _0x2ed39a=_0x361647;console[_0x2ed39a(0x1cc)]('🧹\x20Running\x20scheduled\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...');try{await paymentCleanupService_1[_0x2ed39a(0x1b1)][_0x2ed39a(0x1cf)](),console[_0x2ed39a(0x1cc)](_0x2ed39a(0x1b3));}catch(_0x1d582a){console['error'](_0x2ed39a(0x1b8),_0x1d582a);}},_0xd6bbcd);}function stopPaymentCleanupScheduler(){const _0x2336b5=a39_0x1b5c6d;paymentCleanupInterval&&(clearInterval(paymentCleanupInterval),paymentCleanupInterval=null,console[_0x2336b5(0x1cc)](_0x2336b5(0x1c5)));}async function startServer(){const _0x5dd183=a39_0x1b5c6d;try{await database_1[_0x5dd183(0x1d4)][_0x5dd183(0x1dc)](),console[_0x5dd183(0x1cc)]('✅\x20Database\x20connected\x20successfully');const _0x5c5102=telegramBotService_1[_0x5dd183(0x1af)][_0x5dd183(0x1cd)]();_0x5c5102[_0x5dd183(0x1b5)]?console[_0x5dd183(0x1cc)](_0x5dd183(0x1d7)+_0x5c5102[_0x5dd183(0x1ea)]+_0x5dd183(0x1c8)):console[_0x5dd183(0x1cc)]('⚠️\x20Telegram\x20bot\x20is\x20not\x20configured'),console['log'](_0x5dd183(0x1e0)),console['log'](_0x5dd183(0x1e7)),coinToPayStatusService_1[_0x5dd183(0x1bd)][_0x5dd183(0x1d3)](),console[_0x5dd183(0x1cc)]('🔍\x20Initializing\x20domain\x20monitoring\x20service...'),domainMonitoringService_1['domainMonitoringService'][_0x5dd183(0x1e4)](),console[_0x5dd183(0x1cc)]('🧹\x20Initializing\x20payment\x20cleanup\x20service...'),startPaymentCleanupScheduler(),app_1[_0x5dd183(0x1d4)]['listen'](config_1[_0x5dd183(0x1b2)][_0x5dd183(0x1c7)],'127.1.1.159',()=>{const _0x279c4a=_0x5dd183;console[_0x279c4a(0x1cc)](_0x279c4a(0x1ba)+config_1[_0x279c4a(0x1b2)][_0x279c4a(0x1c7)]),console['log'](_0x279c4a(0x1df)+config_1[_0x279c4a(0x1b2)][_0x279c4a(0x1c4)]),console[_0x279c4a(0x1cc)](_0x279c4a(0x1d5)+config_1[_0x279c4a(0x1b2)][_0x279c4a(0x1c7)]+'/api/health');});}catch(_0x58b764){console[_0x5dd183(0x1b4)](_0x5dd183(0x1c1),_0x58b764),process[_0x5dd183(0x1e6)](0x1);}}process['on'](a39_0x1b5c6d(0x1c6),async()=>{const _0x20aedd=a39_0x1b5c6d;console['log'](_0x20aedd(0x1be)),stopPaymentCleanupScheduler(),currencyService_1[_0x20aedd(0x1e1)][_0x20aedd(0x1cb)](),coinToPayStatusService_1[_0x20aedd(0x1bd)]['stopPeriodicStatusCheck'](),domainMonitoringService_1[_0x20aedd(0x1c9)]['stopMonitoring'](),telegramBotService_1['telegramBotService'][_0x20aedd(0x1b6)](),await database_1[_0x20aedd(0x1d4)][_0x20aedd(0x1c3)](),process[_0x20aedd(0x1e6)](0x0);}),process['on']('SIGTERM',async()=>{const _0x5823ce=a39_0x1b5c6d;console['log']('\x0a🔄\x20Gracefully\x20shutting\x20down...'),stopPaymentCleanupScheduler(),currencyService_1[_0x5823ce(0x1e1)][_0x5823ce(0x1cb)](),coinToPayStatusService_1[_0x5823ce(0x1bd)][_0x5823ce(0x1e9)](),domainMonitoringService_1[_0x5823ce(0x1c9)][_0x5823ce(0x1ce)](),telegramBotService_1[_0x5823ce(0x1af)][_0x5823ce(0x1b6)](),await database_1['default'][_0x5823ce(0x1c3)](),process[_0x5823ce(0x1e6)](0x0);}),startServer();