'use strict';const a37_0x185adf=a37_0x2f04;(function(_0x114471,_0x277b12){const _0x5178b8=a37_0x2f04,_0xc480d4=_0x114471();while(!![]){try{const _0x5bd079=parseInt(_0x5178b8(0x1bc))/0x1*(-parseInt(_0x5178b8(0x1dc))/0x2)+-parseInt(_0x5178b8(0x1e0))/0x3+-parseInt(_0x5178b8(0x1c4))/0x4*(-parseInt(_0x5178b8(0x1d4))/0x5)+parseInt(_0x5178b8(0x1e3))/0x6+parseInt(_0x5178b8(0x1cd))/0x7+-parseInt(_0x5178b8(0x1b0))/0x8*(parseInt(_0x5178b8(0x1bf))/0x9)+-parseInt(_0x5178b8(0x1e2))/0xa*(-parseInt(_0x5178b8(0x1d2))/0xb);if(_0x5bd079===_0x277b12)break;else _0xc480d4['push'](_0xc480d4['shift']());}catch(_0x458edb){_0xc480d4['push'](_0xc480d4['shift']());}}}(a37_0x3734,0xb2cfd));var __importDefault=this&&this[a37_0x185adf(0x1d0)]||function(_0x587e66){const _0x3b6484=a37_0x185adf;return _0x587e66&&_0x587e66[_0x3b6484(0x1cb)]?_0x587e66:{'default':_0x587e66};};Object['defineProperty'](exports,'__esModule',{'value':!![]});function a37_0x3734(){const _0x53e6b5=['39163MCwAPG','$disconnect','isActive','49590OqTuLo','domainMonitoringService','❌\x20Failed\x20to\x20start\x20server:','default','🧹\x20Initializing\x20payment\x20cleanup\x20service...','1492HGHIsX','127.1.1.159','error','🪙\x20Initializing\x20CoinToPay\x20status\x20checking\x20service...','config','./services/coinToPayStatusService','🛑\x20Payment\x20cleanup\x20scheduler\x20stopped','__esModule','getBotInfo','5204465VDbjbr','❌\x20Scheduled\x20cleanup\x20failed:','✅\x20Database\x20connected\x20successfully','__importDefault','stopBot','17149PcsdCA','username','6195zTTvEM','🚀\x20Server\x20running\x20on\x20port\x20','🔄\x20Initializing\x20currency\x20rates\x20service...','failed','🧹\x20Running\x20initial\x20payment\x20cleanup...','stopPeriodicUpdates','SIGINT','\x20hours','18SuOHzx','./config/database','./services/currencyService','coinToPayStatusService','3872676Zimslg','exit','12490lXOEzz','4032414dlSfKf','\x0a🔄\x20Gracefully\x20shutting\x20down...','🕐\x20Payment\x20cleanup\x20scheduled\x20to\x20run\x20every\x20','listen','✅\x20Initial\x20cleanup\x20completed:\x20','processed','❌\x20Initial\x20cleanup\x20failed:','🌍\x20Environment:\x20','./services/telegramBotService','startMonitoring','startPeriodicStatusCheck','telegramBotService','2104FwOzKz','✅\x20Scheduled\x20cleanup\x20completed:\x20','cleanupStaleProcessingPayments','\x20is\x20active','stopMonitoring','stopPeriodicStatusCheck','\x20failed','paymentCleanupService','./services/paymentCleanupService','log','port','currencyService'];a37_0x3734=function(){return _0x53e6b5;};return a37_0x3734();}const app_1=__importDefault(require('./app')),config_1=require('./config/config'),database_1=__importDefault(require(a37_0x185adf(0x1dd))),telegramBotService_1=require(a37_0x185adf(0x1eb)),currencyService_1=require(a37_0x185adf(0x1de)),coinToPayStatusService_1=require(a37_0x185adf(0x1c9)),domainMonitoringService_1=require('./services/domainMonitoringService'),paymentCleanupService_1=require(a37_0x185adf(0x1b8));let paymentCleanupInterval=null;function startPaymentCleanupScheduler(){const _0x7910af=a37_0x185adf,_0x25519e=0x18,_0x3798a2=_0x25519e*0x3c*0x3c*0x3e8;console[_0x7910af(0x1b9)](_0x7910af(0x1e5)+_0x25519e+_0x7910af(0x1db)),setTimeout(async()=>{const _0x2dbc2a=_0x7910af;console['log'](_0x2dbc2a(0x1d8));try{const _0x13780a=await paymentCleanupService_1[_0x2dbc2a(0x1b7)][_0x2dbc2a(0x1b2)]();console[_0x2dbc2a(0x1b9)](_0x2dbc2a(0x1e7)+_0x13780a[_0x2dbc2a(0x1e8)]+'\x20processed,\x20'+_0x13780a['failed']+_0x2dbc2a(0x1b6));}catch(_0x358383){console[_0x2dbc2a(0x1c6)](_0x2dbc2a(0x1e9),_0x358383);}},0x5*0x3c*0x3e8),paymentCleanupInterval=setInterval(async()=>{const _0x23fe35=_0x7910af;console[_0x23fe35(0x1b9)]('🧹\x20Running\x20scheduled\x20payment\x20cleanup...');try{const _0xb7985e=await paymentCleanupService_1[_0x23fe35(0x1b7)][_0x23fe35(0x1b2)]();console[_0x23fe35(0x1b9)](_0x23fe35(0x1b1)+_0xb7985e[_0x23fe35(0x1e8)]+'\x20processed,\x20'+_0xb7985e[_0x23fe35(0x1d7)]+'\x20failed');}catch(_0x71f697){console[_0x23fe35(0x1c6)](_0x23fe35(0x1ce),_0x71f697);}},_0x3798a2);}function stopPaymentCleanupScheduler(){const _0x1ba3a=a37_0x185adf;paymentCleanupInterval&&(clearInterval(paymentCleanupInterval),paymentCleanupInterval=null,console[_0x1ba3a(0x1b9)](_0x1ba3a(0x1ca)));}async function startServer(){const _0x251fea=a37_0x185adf;try{await database_1[_0x251fea(0x1c2)]['$connect'](),console[_0x251fea(0x1b9)](_0x251fea(0x1cf));const _0x5489f3=telegramBotService_1[_0x251fea(0x1ee)][_0x251fea(0x1cc)]();_0x5489f3[_0x251fea(0x1be)]?console[_0x251fea(0x1b9)]('✅\x20Telegram\x20bot\x20@'+_0x5489f3[_0x251fea(0x1d3)]+_0x251fea(0x1b3)):console[_0x251fea(0x1b9)]('⚠️\x20Telegram\x20bot\x20is\x20not\x20configured'),console[_0x251fea(0x1b9)](_0x251fea(0x1d6)),console[_0x251fea(0x1b9)](_0x251fea(0x1c7)),coinToPayStatusService_1[_0x251fea(0x1df)][_0x251fea(0x1ed)](),console[_0x251fea(0x1b9)]('🔍\x20Initializing\x20domain\x20monitoring\x20service...'),domainMonitoringService_1[_0x251fea(0x1c0)][_0x251fea(0x1ec)](),console[_0x251fea(0x1b9)](_0x251fea(0x1c3)),startPaymentCleanupScheduler(),app_1[_0x251fea(0x1c2)][_0x251fea(0x1e6)](config_1[_0x251fea(0x1c8)][_0x251fea(0x1ba)],_0x251fea(0x1c5),()=>{const _0x5e7647=_0x251fea;console['log'](_0x5e7647(0x1d5)+config_1[_0x5e7647(0x1c8)]['port']),console[_0x5e7647(0x1b9)](_0x5e7647(0x1ea)+config_1[_0x5e7647(0x1c8)]['nodeEnv']),console[_0x5e7647(0x1b9)]('📊\x20Health\x20check:\x20http://localhost:'+config_1[_0x5e7647(0x1c8)][_0x5e7647(0x1ba)]+'/api/health');});}catch(_0x1e6e2e){console[_0x251fea(0x1c6)](_0x251fea(0x1c1),_0x1e6e2e),process['exit'](0x1);}}function a37_0x2f04(_0x111a79,_0x2443e2){const _0x37346c=a37_0x3734();return a37_0x2f04=function(_0x2f0419,_0x1c64e8){_0x2f0419=_0x2f0419-0x1b0;let _0xf64df3=_0x37346c[_0x2f0419];return _0xf64df3;},a37_0x2f04(_0x111a79,_0x2443e2);}process['on'](a37_0x185adf(0x1da),async()=>{const _0x4c6ec6=a37_0x185adf;console['log'](_0x4c6ec6(0x1e4)),stopPaymentCleanupScheduler(),currencyService_1['currencyService'][_0x4c6ec6(0x1d9)](),coinToPayStatusService_1[_0x4c6ec6(0x1df)]['stopPeriodicStatusCheck'](),domainMonitoringService_1[_0x4c6ec6(0x1c0)][_0x4c6ec6(0x1b4)](),telegramBotService_1[_0x4c6ec6(0x1ee)][_0x4c6ec6(0x1d1)](),await database_1['default'][_0x4c6ec6(0x1bd)](),process[_0x4c6ec6(0x1e1)](0x0);}),process['on']('SIGTERM',async()=>{const _0x36c78c=a37_0x185adf;console['log'](_0x36c78c(0x1e4)),stopPaymentCleanupScheduler(),currencyService_1[_0x36c78c(0x1bb)][_0x36c78c(0x1d9)](),coinToPayStatusService_1[_0x36c78c(0x1df)][_0x36c78c(0x1b5)](),domainMonitoringService_1[_0x36c78c(0x1c0)][_0x36c78c(0x1b4)](),telegramBotService_1[_0x36c78c(0x1ee)]['stopBot'](),await database_1[_0x36c78c(0x1c2)]['$disconnect'](),process[_0x36c78c(0x1e1)](0x0);}),startServer();