'use strict';const a47_0x898295=a47_0xb0e6;(function(_0x3a41b8,_0x59e867){const _0x2a25d7=a47_0xb0e6,_0x5c3353=_0x3a41b8();while(!![]){try{const _0x122f55=parseInt(_0x2a25d7(0xa1))/0x1+-parseInt(_0x2a25d7(0xac))/0x2*(-parseInt(_0x2a25d7(0xad))/0x3)+parseInt(_0x2a25d7(0x95))/0x4+-parseInt(_0x2a25d7(0x80))/0x5*(-parseInt(_0x2a25d7(0x83))/0x6)+parseInt(_0x2a25d7(0x91))/0x7+parseInt(_0x2a25d7(0x7a))/0x8+-parseInt(_0x2a25d7(0x96))/0x9*(parseInt(_0x2a25d7(0x79))/0xa);if(_0x122f55===_0x59e867)break;else _0x5c3353['push'](_0x5c3353['shift']());}catch(_0x86e48d){_0x5c3353['push'](_0x5c3353['shift']());}}}(a47_0x3103,0x47982));function a47_0xb0e6(_0x56f47c,_0x49ae28){_0x56f47c=_0x56f47c-0x79;const _0x3103ec=a47_0x3103();let _0xb0e6ec=_0x3103ec[_0x56f47c];return _0xb0e6ec;}var __importDefault=this&&this[a47_0x898295(0xaa)]||function(_0x15c05a){const _0x230b20=a47_0x898295;return _0x15c05a&&_0x15c05a[_0x230b20(0x9e)]?_0x15c05a:{'default':_0x15c05a};};Object[a47_0x898295(0x7e)](exports,a47_0x898295(0x9e),{'value':!![]});const app_1=__importDefault(require('./app')),config_1=require('./config/config'),database_1=__importDefault(require('./config/database')),telegramBotService_1=require('./services/telegramBotService'),currencyService_1=require(a47_0x898295(0xb3)),coinToPayStatusService_1=require('./services/coinToPayStatusService'),domainMonitoringService_1=require(a47_0x898295(0x98)),paymentCleanupService_1=require(a47_0x898295(0xaf));let paymentCleanupInterval=null;function a47_0x3103(){const _0x494071=['âš ï¸\x20Telegram\x20bot\x20is\x20not\x20configured','stopBot','ðŸ”\x20Initializing\x20domain\x20monitoring\x20service...','startMonitoring','3745511jscjpa','SIGINT','âœ…\x20Scheduled\x20cleanup\x20completed\x20successfully','runCleanupWithReport','1287288miuyts','342SPFVVE','stopMonitoring','./services/domainMonitoringService','currencyService','paymentCleanupService','ðŸ›‘\x20Payment\x20cleanup\x20scheduler\x20stopped','âœ…\x20Initial\x20cleanup\x20completed\x20successfully','coinToPayStatusService','__esModule','SIGTERM','âœ…\x20Telegram\x20bot\x20@','551496YWHsOf','\x20is\x20active','ðŸ•\x20Payment\x20cleanup\x20scheduled\x20to\x20run\x20every\x20','/api/health','config','port','error','âŒ\x20Initial\x20cleanup\x20failed:','ðŸš€\x20Server\x20running\x20on\x20port\x20','__importDefault','ðŸ§¹\x20Running\x20initial\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','2UMJEUw','572178MlDNCd','default','./services/paymentCleanupService','stopPeriodicUpdates','domainMonitoringService','getBotInfo','./services/currencyService','ðŸ§¹\x20Running\x20scheduled\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','listen','541180CoWxUj','1323248GTtRym','âŒ\x20Scheduled\x20cleanup\x20failed:','telegramBotService','$connect','defineProperty','ðŸ”„\x20Initializing\x20currency\x20rates\x20service...','266005kqblFP','nodeEnv','log','66LSzBzW','$disconnect','ðŸŒ\x20Environment:\x20','stopPeriodicStatusCheck','exit','ðŸ“Š\x20Health\x20check:\x20http://localhost:','ðŸ§¹\x20Initializing\x20payment\x20cleanup\x20service...','production','âŒ\x20Failed\x20to\x20start\x20server:','âœ…\x20Database\x20connected\x20successfully'];a47_0x3103=function(){return _0x494071;};return a47_0x3103();}function startPaymentCleanupScheduler(){const _0x2d55fd=a47_0x898295,_0x4a9c2a=0x18,_0x2d8928=_0x4a9c2a*0x3c*0x3c*0x3e8;console['log'](_0x2d55fd(0xa3)+_0x4a9c2a+'\x20hours'),setTimeout(async()=>{const _0x82b6ca=_0x2d55fd;console[_0x82b6ca(0x82)](_0x82b6ca(0xab));try{await paymentCleanupService_1[_0x82b6ca(0x9a)][_0x82b6ca(0x94)](),console[_0x82b6ca(0x82)](_0x82b6ca(0x9c));}catch(_0x3587e1){console[_0x82b6ca(0xa7)](_0x82b6ca(0xa8),_0x3587e1);}},0x5*0x3c*0x3e8),paymentCleanupInterval=setInterval(async()=>{const _0x232ecc=_0x2d55fd;console[_0x232ecc(0x82)](_0x232ecc(0xb4));try{await paymentCleanupService_1['paymentCleanupService'][_0x232ecc(0x94)](),console[_0x232ecc(0x82)](_0x232ecc(0x93));}catch(_0x5bf547){console[_0x232ecc(0xa7)](_0x232ecc(0x7b),_0x5bf547);}},_0x2d8928);}function stopPaymentCleanupScheduler(){const _0xd63ee1=a47_0x898295;paymentCleanupInterval&&(clearInterval(paymentCleanupInterval),paymentCleanupInterval=null,console[_0xd63ee1(0x82)](_0xd63ee1(0x9b)));}async function startServer(){const _0x3b723c=a47_0x898295;try{await database_1['default'][_0x3b723c(0x7d)](),console['log'](_0x3b723c(0x8c));const _0x49df2e=telegramBotService_1[_0x3b723c(0x7c)][_0x3b723c(0xb2)]();_0x49df2e['isActive']?console[_0x3b723c(0x82)](_0x3b723c(0xa0)+_0x49df2e['username']+_0x3b723c(0xa2)):console[_0x3b723c(0x82)](_0x3b723c(0x8d));console[_0x3b723c(0x82)](_0x3b723c(0x7f)),console[_0x3b723c(0x82)]('ðŸª™\x20Initializing\x20CoinToPay\x20status\x20checking\x20service...'),coinToPayStatusService_1['coinToPayStatusService']['startPeriodicStatusCheck'](),console[_0x3b723c(0x82)](_0x3b723c(0x8f)),domainMonitoringService_1[_0x3b723c(0xb1)][_0x3b723c(0x90)](),console['log'](_0x3b723c(0x89)),startPaymentCleanupScheduler();config_1['config'][_0x3b723c(0x81)]===_0x3b723c(0x8a)?app_1[_0x3b723c(0xae)][_0x3b723c(0xb5)](config_1[_0x3b723c(0xa5)]['port'],()=>{const _0x5a987b=_0x3b723c;console[_0x5a987b(0x82)](_0x5a987b(0xa9)+config_1[_0x5a987b(0xa5)][_0x5a987b(0xa6)]),console['log'](_0x5a987b(0x85)+config_1[_0x5a987b(0xa5)][_0x5a987b(0x81)]);}):app_1[_0x3b723c(0xae)][_0x3b723c(0xb5)](config_1[_0x3b723c(0xa5)][_0x3b723c(0xa6)],'127.1.1.159',()=>{const _0x4375d0=_0x3b723c;console[_0x4375d0(0x82)]('ðŸš€\x20Server\x20running\x20on\x20port\x20'+config_1[_0x4375d0(0xa5)][_0x4375d0(0xa6)]),console[_0x4375d0(0x82)]('ðŸŒ\x20Environment:\x20'+config_1[_0x4375d0(0xa5)][_0x4375d0(0x81)]),console[_0x4375d0(0x82)](_0x4375d0(0x88)+config_1['config']['port']+_0x4375d0(0xa4));});;}catch(_0x20efc7){console['error'](_0x3b723c(0x8b),_0x20efc7),process[_0x3b723c(0x87)](0x1);}}process['on'](a47_0x898295(0x92),async()=>{const _0x50b314=a47_0x898295;console[_0x50b314(0x82)]('\x0aðŸ”„\x20Gracefully\x20shutting\x20down...'),stopPaymentCleanupScheduler(),currencyService_1['currencyService'][_0x50b314(0xb0)](),coinToPayStatusService_1['coinToPayStatusService'][_0x50b314(0x86)](),domainMonitoringService_1[_0x50b314(0xb1)][_0x50b314(0x97)](),telegramBotService_1[_0x50b314(0x7c)][_0x50b314(0x8e)](),await database_1[_0x50b314(0xae)][_0x50b314(0x84)](),process[_0x50b314(0x87)](0x0);}),process['on'](a47_0x898295(0x9f),async()=>{const _0x300fe6=a47_0x898295;console[_0x300fe6(0x82)]('\x0aðŸ”„\x20Gracefully\x20shutting\x20down...'),stopPaymentCleanupScheduler(),currencyService_1[_0x300fe6(0x99)][_0x300fe6(0xb0)](),coinToPayStatusService_1[_0x300fe6(0x9d)][_0x300fe6(0x86)](),domainMonitoringService_1['domainMonitoringService'][_0x300fe6(0x97)](),telegramBotService_1['telegramBotService']['stopBot'](),await database_1['default'][_0x300fe6(0x84)](),process[_0x300fe6(0x87)](0x0);}),startServer();