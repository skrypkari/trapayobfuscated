'use strict';const a51_0x4e3b9d=a51_0x5b61;function a51_0x1610(){const _0x6a836c=['6esuxwR','âŒ\x20Failed\x20to\x20start\x20server:','./config/config','config','5014016jwbyih','ðŸ§¹\x20Running\x20scheduled\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','exit','telegramBotService','stopMonitoring','ðŸª™\x20Initializing\x20CoinToPay\x20status\x20checking\x20service...','âœ…\x20Initial\x20cleanup\x20completed\x20successfully','ðŸ§¹\x20Initializing\x20payment\x20cleanup\x20service...','ðŸ“Š\x20Health\x20check:\x20http://localhost:','ðŸ•\x20Payment\x20cleanup\x20scheduled\x20to\x20run\x20every\x20','22UuhBPK','isActive','startMonitoring','ðŸ›‘\x20Payment\x20cleanup\x20scheduler\x20stopped','username','stopBot','\x0aðŸ”„\x20Gracefully\x20shutting\x20down...','listen','1630531IKSVnZ','SIGINT','default','38312QQnRaY','872425vurTGG','âš ï¸\x20Telegram\x20bot\x20is\x20not\x20configured','nodeEnv','stopPeriodicStatusCheck','defineProperty','__esModule','$disconnect','port','./services/domainMonitoringService','stopPeriodicUpdates','âœ…\x20Scheduled\x20cleanup\x20completed\x20successfully','127.1.1.159','1971qoTaNX','$connect','11922550tDIaHV','error','ðŸŒ\x20Environment:\x20','24YtPImB','domainMonitoringService','runCleanupWithReport','coinToPayStatusService','448161QfpbqX','âŒ\x20Initial\x20cleanup\x20failed:','production','./services/paymentCleanupService','ðŸ”\x20Initializing\x20domain\x20monitoring\x20service...','__importDefault','./services/coinToPayStatusService','ðŸ”„\x20Initializing\x20currency\x20rates\x20service...','\x20hours','721503CmTlOT','currencyService','/api/health','âœ…\x20Database\x20connected\x20successfully','./services/telegramBotService','startPeriodicStatusCheck','ðŸš€\x20Server\x20running\x20on\x20port\x20','ðŸ§¹\x20Running\x20initial\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','paymentCleanupService','log','\x20is\x20active','./config/database'];a51_0x1610=function(){return _0x6a836c;};return a51_0x1610();}(function(_0x175f60,_0x366370){const _0x30d169=a51_0x5b61,_0x3d53ff=_0x175f60();while(!![]){try{const _0x3a9161=parseInt(_0x30d169(0x1aa))/0x1+parseInt(_0x30d169(0x194))/0x2*(-parseInt(_0x30d169(0x188))/0x3)+parseInt(_0x30d169(0x198))/0x4+-parseInt(_0x30d169(0x1ae))/0x5+-parseInt(_0x30d169(0x17b))/0x6*(-parseInt(_0x30d169(0x17f))/0x7)+parseInt(_0x30d169(0x1ad))/0x8*(parseInt(_0x30d169(0x1ba))/0x9)+-parseInt(_0x30d169(0x178))/0xa*(parseInt(_0x30d169(0x1a2))/0xb);if(_0x3a9161===_0x366370)break;else _0x3d53ff['push'](_0x3d53ff['shift']());}catch(_0x2e495a){_0x3d53ff['push'](_0x3d53ff['shift']());}}}(a51_0x1610,0xddc84));var __importDefault=this&&this[a51_0x4e3b9d(0x184)]||function(_0x437254){const _0x4fff8c=a51_0x4e3b9d;return _0x437254&&_0x437254[_0x4fff8c(0x1b3)]?_0x437254:{'default':_0x437254};};Object[a51_0x4e3b9d(0x1b2)](exports,'__esModule',{'value':!![]});function a51_0x5b61(_0x39d099,_0x1e6dec){_0x39d099=_0x39d099-0x177;const _0x161033=a51_0x1610();let _0x5b610a=_0x161033[_0x39d099];return _0x5b610a;}const app_1=__importDefault(require('./app')),config_1=require(a51_0x4e3b9d(0x196)),database_1=__importDefault(require(a51_0x4e3b9d(0x193))),telegramBotService_1=require(a51_0x4e3b9d(0x18c)),currencyService_1=require('./services/currencyService'),coinToPayStatusService_1=require(a51_0x4e3b9d(0x185)),domainMonitoringService_1=require(a51_0x4e3b9d(0x1b6)),paymentCleanupService_1=require(a51_0x4e3b9d(0x182));let paymentCleanupInterval=null;function startPaymentCleanupScheduler(){const _0x55c639=a51_0x4e3b9d,_0x5cd15f=0x18,_0x3184fc=_0x5cd15f*0x3c*0x3c*0x3e8;console[_0x55c639(0x191)](_0x55c639(0x1a1)+_0x5cd15f+_0x55c639(0x187)),setTimeout(async()=>{const _0x4c90bd=_0x55c639;console[_0x4c90bd(0x191)](_0x4c90bd(0x18f));try{await paymentCleanupService_1[_0x4c90bd(0x190)][_0x4c90bd(0x17d)](),console[_0x4c90bd(0x191)](_0x4c90bd(0x19e));}catch(_0x14f798){console[_0x4c90bd(0x179)](_0x4c90bd(0x180),_0x14f798);}},0x5*0x3c*0x3e8),paymentCleanupInterval=setInterval(async()=>{const _0x6bad75=_0x55c639;console['log'](_0x6bad75(0x199));try{await paymentCleanupService_1[_0x6bad75(0x190)][_0x6bad75(0x17d)](),console[_0x6bad75(0x191)](_0x6bad75(0x1b8));}catch(_0x2d3d5b){console[_0x6bad75(0x179)]('âŒ\x20Scheduled\x20cleanup\x20failed:',_0x2d3d5b);}},_0x3184fc);}function stopPaymentCleanupScheduler(){const _0x31a058=a51_0x4e3b9d;paymentCleanupInterval&&(clearInterval(paymentCleanupInterval),paymentCleanupInterval=null,console['log'](_0x31a058(0x1a5)));}async function startServer(){const _0x4092dc=a51_0x4e3b9d;try{await database_1['default'][_0x4092dc(0x177)](),console['log'](_0x4092dc(0x18b));const _0x510059=telegramBotService_1[_0x4092dc(0x19b)]['getBotInfo']();_0x510059[_0x4092dc(0x1a3)]?console[_0x4092dc(0x191)]('âœ…\x20Telegram\x20bot\x20@'+_0x510059[_0x4092dc(0x1a6)]+_0x4092dc(0x192)):console[_0x4092dc(0x191)](_0x4092dc(0x1af));console[_0x4092dc(0x191)](_0x4092dc(0x186)),console[_0x4092dc(0x191)](_0x4092dc(0x19d)),coinToPayStatusService_1[_0x4092dc(0x17e)][_0x4092dc(0x18d)](),console['log'](_0x4092dc(0x183)),domainMonitoringService_1[_0x4092dc(0x17c)][_0x4092dc(0x1a4)](),console[_0x4092dc(0x191)](_0x4092dc(0x19f)),startPaymentCleanupScheduler();config_1[_0x4092dc(0x197)][_0x4092dc(0x1b0)]===_0x4092dc(0x181)?app_1['default']['listen'](config_1['config']['port'],()=>{const _0x7fb5bf=_0x4092dc;console['log']('ðŸš€\x20Server\x20running\x20on\x20port\x20'+config_1[_0x7fb5bf(0x197)][_0x7fb5bf(0x1b5)]),console[_0x7fb5bf(0x191)](_0x7fb5bf(0x17a)+config_1['config'][_0x7fb5bf(0x1b0)]);}):app_1['default'][_0x4092dc(0x1a9)](config_1[_0x4092dc(0x197)]['port'],_0x4092dc(0x1b9),()=>{const _0x1858bd=_0x4092dc;console[_0x1858bd(0x191)](_0x1858bd(0x18e)+config_1['config']['port']),console[_0x1858bd(0x191)](_0x1858bd(0x17a)+config_1['config'][_0x1858bd(0x1b0)]),console[_0x1858bd(0x191)](_0x1858bd(0x1a0)+config_1['config']['port']+_0x1858bd(0x18a));});;}catch(_0x57b86d){console[_0x4092dc(0x179)](_0x4092dc(0x195),_0x57b86d),process[_0x4092dc(0x19a)](0x1);}}process['on'](a51_0x4e3b9d(0x1ab),async()=>{const _0x12c899=a51_0x4e3b9d;console[_0x12c899(0x191)]('\x0aðŸ”„\x20Gracefully\x20shutting\x20down...'),stopPaymentCleanupScheduler(),currencyService_1['currencyService'][_0x12c899(0x1b7)](),coinToPayStatusService_1[_0x12c899(0x17e)][_0x12c899(0x1b1)](),domainMonitoringService_1[_0x12c899(0x17c)][_0x12c899(0x19c)](),telegramBotService_1['telegramBotService'][_0x12c899(0x1a7)](),await database_1['default'][_0x12c899(0x1b4)](),process[_0x12c899(0x19a)](0x0);}),process['on']('SIGTERM',async()=>{const _0x19bf86=a51_0x4e3b9d;console[_0x19bf86(0x191)](_0x19bf86(0x1a8)),stopPaymentCleanupScheduler(),currencyService_1[_0x19bf86(0x189)]['stopPeriodicUpdates'](),coinToPayStatusService_1['coinToPayStatusService']['stopPeriodicStatusCheck'](),domainMonitoringService_1['domainMonitoringService'][_0x19bf86(0x19c)](),telegramBotService_1[_0x19bf86(0x19b)]['stopBot'](),await database_1[_0x19bf86(0x1ac)][_0x19bf86(0x1b4)](),process[_0x19bf86(0x19a)](0x0);}),startServer();