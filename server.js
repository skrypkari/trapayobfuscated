'use strict';const a51_0x1adcd9=a51_0x2394;function a51_0x1d85(){const _0x2aa99b=['SIGTERM','6382733BTvanA','defineProperty','ðŸ”„\x20Initializing\x20currency\x20rates\x20service...','./config/database','âœ…\x20Telegram\x20bot\x20@','âŒ\x20Failed\x20to\x20start\x20server:','stopPeriodicStatusCheck','$connect','12gzaKKr','log','stopPeriodicUpdates','default','$disconnect','396qkXZrq','production','ðŸª™\x20Initializing\x20CoinToPay\x20status\x20checking\x20service...','ðŸŒ\x20Environment:\x20','isActive','username','./app','36YCpiNn','getBotInfo','ðŸ§¹\x20Initializing\x20payment\x20cleanup\x20service...','ðŸ”\x20Initializing\x20domain\x20monitoring\x20service...','4511811fDLGWD','127.1.1.159','startPeriodicStatusCheck','âœ…\x20Scheduled\x20cleanup\x20completed\x20successfully','__importDefault','./config/config','ðŸš€\x20Server\x20running\x20on\x20port\x20','paymentCleanupService','port','âœ…\x20Initial\x20cleanup\x20completed\x20successfully','SIGINT','runCleanupWithReport','error','currencyService','\x20hours','ðŸ“Š\x20Health\x20check:\x20http://localhost:','telegramBotService','./services/paymentCleanupService','coinToPayStatusService','listen','nodeEnv','__esModule','82596ehjcGX','ðŸ§¹\x20Running\x20initial\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','exit','domainMonitoringService','54195180dIdcia','./services/domainMonitoringService','stopBot','\x0aðŸ”„\x20Gracefully\x20shutting\x20down...','stopMonitoring','startMonitoring','ðŸ›‘\x20Payment\x20cleanup\x20scheduler\x20stopped','config','288216VuJjHw','8597358EYiJHI','ðŸ§¹\x20Running\x20scheduled\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','âœ…\x20Database\x20connected\x20successfully','2201195AGOYHk'];a51_0x1d85=function(){return _0x2aa99b;};return a51_0x1d85();}(function(_0x4cf2cb,_0x2642b2){const _0x2bdefb=a51_0x2394,_0x21caf0=_0x4cf2cb();while(!![]){try{const _0x62e673=-parseInt(_0x2bdefb(0x217))/0x1*(-parseInt(_0x2bdefb(0x1fd))/0x2)+parseInt(_0x2bdefb(0x201))/0x3+parseInt(_0x2bdefb(0x1f1))/0x4*(parseInt(_0x2bdefb(0x1e7))/0x5)+parseInt(_0x2bdefb(0x1e4))/0x6+-parseInt(_0x2bdefb(0x1e9))/0x7+-parseInt(_0x2bdefb(0x1e3))/0x8*(-parseInt(_0x2bdefb(0x1f6))/0x9)+-parseInt(_0x2bdefb(0x1db))/0xa;if(_0x62e673===_0x2642b2)break;else _0x21caf0['push'](_0x21caf0['shift']());}catch(_0x28d11c){_0x21caf0['push'](_0x21caf0['shift']());}}}(a51_0x1d85,0xf3aee));var __importDefault=this&&this[a51_0x1adcd9(0x205)]||function(_0x27bcf5){const _0x325eff=a51_0x1adcd9;return _0x27bcf5&&_0x27bcf5[_0x325eff(0x216)]?_0x27bcf5:{'default':_0x27bcf5};};Object[a51_0x1adcd9(0x1ea)](exports,a51_0x1adcd9(0x216),{'value':!![]});const app_1=__importDefault(require(a51_0x1adcd9(0x1fc))),config_1=require(a51_0x1adcd9(0x206)),database_1=__importDefault(require(a51_0x1adcd9(0x1ec))),telegramBotService_1=require('./services/telegramBotService'),currencyService_1=require('./services/currencyService'),coinToPayStatusService_1=require('./services/coinToPayStatusService'),domainMonitoringService_1=require(a51_0x1adcd9(0x1dc)),paymentCleanupService_1=require(a51_0x1adcd9(0x212));let paymentCleanupInterval=null;function startPaymentCleanupScheduler(){const _0x106453=a51_0x1adcd9,_0x497148=0x18,_0xb51c87=_0x497148*0x3c*0x3c*0x3e8;console[_0x106453(0x1f2)]('ðŸ•\x20Payment\x20cleanup\x20scheduled\x20to\x20run\x20every\x20'+_0x497148+_0x106453(0x20f)),setTimeout(async()=>{const _0x43820a=_0x106453;console[_0x43820a(0x1f2)](_0x43820a(0x218));try{await paymentCleanupService_1[_0x43820a(0x208)]['runCleanupWithReport'](),console['log'](_0x43820a(0x20a));}catch(_0x328302){console[_0x43820a(0x20d)]('âŒ\x20Initial\x20cleanup\x20failed:',_0x328302);}},0x5*0x3c*0x3e8),paymentCleanupInterval=setInterval(async()=>{const _0x3fcf6a=_0x106453;console[_0x3fcf6a(0x1f2)](_0x3fcf6a(0x1e5));try{await paymentCleanupService_1[_0x3fcf6a(0x208)][_0x3fcf6a(0x20c)](),console[_0x3fcf6a(0x1f2)](_0x3fcf6a(0x204));}catch(_0x1acd75){console['error']('âŒ\x20Scheduled\x20cleanup\x20failed:',_0x1acd75);}},_0xb51c87);}function stopPaymentCleanupScheduler(){const _0x1a6c53=a51_0x1adcd9;paymentCleanupInterval&&(clearInterval(paymentCleanupInterval),paymentCleanupInterval=null,console[_0x1a6c53(0x1f2)](_0x1a6c53(0x1e1)));}async function startServer(){const _0x53eb84=a51_0x1adcd9;try{await database_1[_0x53eb84(0x1f4)][_0x53eb84(0x1f0)](),console[_0x53eb84(0x1f2)](_0x53eb84(0x1e6));const _0x2f907e=telegramBotService_1['telegramBotService'][_0x53eb84(0x1fe)]();_0x2f907e[_0x53eb84(0x1fa)]?console[_0x53eb84(0x1f2)](_0x53eb84(0x1ed)+_0x2f907e[_0x53eb84(0x1fb)]+'\x20is\x20active'):console[_0x53eb84(0x1f2)]('âš ï¸\x20Telegram\x20bot\x20is\x20not\x20configured');console[_0x53eb84(0x1f2)](_0x53eb84(0x1eb)),console[_0x53eb84(0x1f2)](_0x53eb84(0x1f8)),coinToPayStatusService_1[_0x53eb84(0x213)][_0x53eb84(0x203)](),console[_0x53eb84(0x1f2)](_0x53eb84(0x200)),domainMonitoringService_1[_0x53eb84(0x1da)][_0x53eb84(0x1e0)](),console[_0x53eb84(0x1f2)](_0x53eb84(0x1ff)),startPaymentCleanupScheduler();config_1[_0x53eb84(0x1e2)][_0x53eb84(0x215)]===_0x53eb84(0x1f7)?app_1['default'][_0x53eb84(0x214)](config_1[_0x53eb84(0x1e2)]['port'],()=>{const _0x146b48=_0x53eb84;console[_0x146b48(0x1f2)](_0x146b48(0x207)+config_1[_0x146b48(0x1e2)][_0x146b48(0x209)]),console['log'](_0x146b48(0x1f9)+config_1[_0x146b48(0x1e2)]['nodeEnv']);}):app_1['default']['listen'](config_1[_0x53eb84(0x1e2)][_0x53eb84(0x209)],_0x53eb84(0x202),()=>{const _0x141d05=_0x53eb84;console[_0x141d05(0x1f2)](_0x141d05(0x207)+config_1[_0x141d05(0x1e2)]['port']),console[_0x141d05(0x1f2)](_0x141d05(0x1f9)+config_1[_0x141d05(0x1e2)][_0x141d05(0x215)]),console['log'](_0x141d05(0x210)+config_1[_0x141d05(0x1e2)][_0x141d05(0x209)]+'/api/health');});;}catch(_0x4dba06){console[_0x53eb84(0x20d)](_0x53eb84(0x1ee),_0x4dba06),process[_0x53eb84(0x219)](0x1);}}function a51_0x2394(_0x5d79ab,_0x3c0b1f){_0x5d79ab=_0x5d79ab-0x1da;const _0x1d850f=a51_0x1d85();let _0x2394e2=_0x1d850f[_0x5d79ab];return _0x2394e2;}process['on'](a51_0x1adcd9(0x20b),async()=>{const _0x38681e=a51_0x1adcd9;console[_0x38681e(0x1f2)]('\x0aðŸ”„\x20Gracefully\x20shutting\x20down...'),stopPaymentCleanupScheduler(),currencyService_1[_0x38681e(0x20e)][_0x38681e(0x1f3)](),coinToPayStatusService_1[_0x38681e(0x213)]['stopPeriodicStatusCheck'](),domainMonitoringService_1['domainMonitoringService'][_0x38681e(0x1df)](),telegramBotService_1[_0x38681e(0x211)][_0x38681e(0x1dd)](),await database_1[_0x38681e(0x1f4)]['$disconnect'](),process[_0x38681e(0x219)](0x0);}),process['on'](a51_0x1adcd9(0x1e8),async()=>{const _0x314237=a51_0x1adcd9;console[_0x314237(0x1f2)](_0x314237(0x1de)),stopPaymentCleanupScheduler(),currencyService_1[_0x314237(0x20e)]['stopPeriodicUpdates'](),coinToPayStatusService_1['coinToPayStatusService'][_0x314237(0x1ef)](),domainMonitoringService_1['domainMonitoringService'][_0x314237(0x1df)](),telegramBotService_1['telegramBotService']['stopBot'](),await database_1[_0x314237(0x1f4)][_0x314237(0x1f5)](),process['exit'](0x0);}),startServer();