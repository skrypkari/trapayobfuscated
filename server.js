'use strict';const a51_0x5f159f=a51_0x2ae7;(function(_0x571f92,_0x1e39a5){const _0x10e9e8=a51_0x2ae7,_0x37dff8=_0x571f92();while(!![]){try{const _0x14c498=parseInt(_0x10e9e8(0x100))/0x1+-parseInt(_0x10e9e8(0x114))/0x2*(parseInt(_0x10e9e8(0x101))/0x3)+parseInt(_0x10e9e8(0xf6))/0x4+-parseInt(_0x10e9e8(0xf8))/0x5+parseInt(_0x10e9e8(0x121))/0x6+-parseInt(_0x10e9e8(0x10c))/0x7+parseInt(_0x10e9e8(0xef))/0x8;if(_0x14c498===_0x1e39a5)break;else _0x37dff8['push'](_0x37dff8['shift']());}catch(_0xe0199d){_0x37dff8['push'](_0x37dff8['shift']());}}}(a51_0x4745,0x92ff3));function a51_0x4745(){const _0x460b32=['port','listen','\x20is\x20active','1901118HwMNye','ðŸª™\x20Initializing\x20CoinToPay\x20status\x20checking\x20service...','__importDefault','telegramBotService','7100744bvAkQo','ðŸ§¹\x20Running\x20scheduled\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','âœ…\x20Telegram\x20bot\x20@','ðŸš€\x20Server\x20running\x20on\x20port\x20','runCleanupWithReport','currencyService','config','756992YOfNKM','./services/domainMonitoringService','370115EJqdQc','\x20hours','$connect','SIGTERM','ðŸ”„\x20Initializing\x20currency\x20rates\x20service...','production','./app','âŒ\x20Initial\x20cleanup\x20failed:','827282PaBmoI','3WQqKkM','ðŸŒ\x20Environment:\x20','âš ï¸\x20Telegram\x20bot\x20is\x20not\x20configured','âœ…\x20Initial\x20cleanup\x20completed\x20successfully','__esModule','log','ðŸ§¹\x20Running\x20initial\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','\x0aðŸ”„\x20Gracefully\x20shutting\x20down...','paymentCleanupService','domainMonitoringService','exit','3771859ZxEtAl','stopMonitoring','/api/health','username','startPeriodicStatusCheck','stopPeriodicUpdates','default','stopBot','2012034mSknNr','$disconnect','ðŸ“Š\x20Health\x20check:\x20http://localhost:','startMonitoring','isActive','stopPeriodicStatusCheck','./services/coinToPayStatusService','âŒ\x20Failed\x20to\x20start\x20server:','nodeEnv','coinToPayStatusService'];a51_0x4745=function(){return _0x460b32;};return a51_0x4745();}var __importDefault=this&&this[a51_0x5f159f(0x123)]||function(_0xd13d02){const _0x49b58d=a51_0x5f159f;return _0xd13d02&&_0xd13d02[_0x49b58d(0x105)]?_0xd13d02:{'default':_0xd13d02};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const app_1=__importDefault(require(a51_0x5f159f(0xfe))),config_1=require('./config/config'),database_1=__importDefault(require('./config/database')),telegramBotService_1=require('./services/telegramBotService'),currencyService_1=require('./services/currencyService'),coinToPayStatusService_1=require(a51_0x5f159f(0x11a)),domainMonitoringService_1=require(a51_0x5f159f(0xf7)),paymentCleanupService_1=require('./services/paymentCleanupService');let paymentCleanupInterval=null;function startPaymentCleanupScheduler(){const _0x3c54b5=a51_0x5f159f,_0x39679a=0x18,_0x17ed6b=_0x39679a*0x3c*0x3c*0x3e8;console[_0x3c54b5(0x106)]('ðŸ•\x20Payment\x20cleanup\x20scheduled\x20to\x20run\x20every\x20'+_0x39679a+_0x3c54b5(0xf9)),setTimeout(async()=>{const _0x119554=_0x3c54b5;console[_0x119554(0x106)](_0x119554(0x107));try{await paymentCleanupService_1[_0x119554(0x109)]['runCleanupWithReport'](),console['log'](_0x119554(0x104));}catch(_0x1bc2da){console['error'](_0x119554(0xff),_0x1bc2da);}},0x5*0x3c*0x3e8),paymentCleanupInterval=setInterval(async()=>{const _0x2076e1=_0x3c54b5;console[_0x2076e1(0x106)](_0x2076e1(0xf0));try{await paymentCleanupService_1['paymentCleanupService'][_0x2076e1(0xf3)](),console[_0x2076e1(0x106)]('âœ…\x20Scheduled\x20cleanup\x20completed\x20successfully');}catch(_0x23caa2){console['error']('âŒ\x20Scheduled\x20cleanup\x20failed:',_0x23caa2);}},_0x17ed6b);}function a51_0x2ae7(_0x3cc665,_0x3476c8){_0x3cc665=_0x3cc665-0xee;const _0x4745b2=a51_0x4745();let _0x2ae75f=_0x4745b2[_0x3cc665];return _0x2ae75f;}function stopPaymentCleanupScheduler(){const _0xbd72c4=a51_0x5f159f;paymentCleanupInterval&&(clearInterval(paymentCleanupInterval),paymentCleanupInterval=null,console[_0xbd72c4(0x106)]('ðŸ›‘\x20Payment\x20cleanup\x20scheduler\x20stopped'));}async function startServer(){const _0x16f2f4=a51_0x5f159f;try{await database_1[_0x16f2f4(0x112)][_0x16f2f4(0xfa)](),console['log']('âœ…\x20Database\x20connected\x20successfully');const _0x37abde=telegramBotService_1[_0x16f2f4(0xee)]['getBotInfo']();_0x37abde[_0x16f2f4(0x118)]?console[_0x16f2f4(0x106)](_0x16f2f4(0xf1)+_0x37abde[_0x16f2f4(0x10f)]+_0x16f2f4(0x120)):console[_0x16f2f4(0x106)](_0x16f2f4(0x103));console[_0x16f2f4(0x106)](_0x16f2f4(0xfc)),console['log'](_0x16f2f4(0x122)),coinToPayStatusService_1['coinToPayStatusService'][_0x16f2f4(0x110)](),console[_0x16f2f4(0x106)]('ðŸ”\x20Initializing\x20domain\x20monitoring\x20service...'),domainMonitoringService_1[_0x16f2f4(0x10a)][_0x16f2f4(0x117)](),console[_0x16f2f4(0x106)]('ðŸ§¹\x20Initializing\x20payment\x20cleanup\x20service...'),startPaymentCleanupScheduler();config_1[_0x16f2f4(0xf5)]['nodeEnv']===_0x16f2f4(0xfd)?app_1[_0x16f2f4(0x112)][_0x16f2f4(0x11f)](config_1['config'][_0x16f2f4(0x11e)],()=>{const _0x150f5c=_0x16f2f4;console[_0x150f5c(0x106)](_0x150f5c(0xf2)+config_1[_0x150f5c(0xf5)][_0x150f5c(0x11e)]),console['log'](_0x150f5c(0x102)+config_1['config'][_0x150f5c(0x11c)]);}):app_1[_0x16f2f4(0x112)]['listen'](config_1[_0x16f2f4(0xf5)][_0x16f2f4(0x11e)],'127.1.1.159',()=>{const _0x35950c=_0x16f2f4;console[_0x35950c(0x106)](_0x35950c(0xf2)+config_1[_0x35950c(0xf5)][_0x35950c(0x11e)]),console[_0x35950c(0x106)]('ðŸŒ\x20Environment:\x20'+config_1['config'][_0x35950c(0x11c)]),console[_0x35950c(0x106)](_0x35950c(0x116)+config_1[_0x35950c(0xf5)][_0x35950c(0x11e)]+_0x35950c(0x10e));});;}catch(_0x48c428){console['error'](_0x16f2f4(0x11b),_0x48c428),process[_0x16f2f4(0x10b)](0x1);}}process['on']('SIGINT',async()=>{const _0x126da3=a51_0x5f159f;console[_0x126da3(0x106)](_0x126da3(0x108)),stopPaymentCleanupScheduler(),currencyService_1[_0x126da3(0xf4)][_0x126da3(0x111)](),coinToPayStatusService_1[_0x126da3(0x11d)][_0x126da3(0x119)](),domainMonitoringService_1[_0x126da3(0x10a)][_0x126da3(0x10d)](),telegramBotService_1[_0x126da3(0xee)][_0x126da3(0x113)](),await database_1[_0x126da3(0x112)][_0x126da3(0x115)](),process['exit'](0x0);}),process['on'](a51_0x5f159f(0xfb),async()=>{const _0x23393a=a51_0x5f159f;console[_0x23393a(0x106)](_0x23393a(0x108)),stopPaymentCleanupScheduler(),currencyService_1['currencyService']['stopPeriodicUpdates'](),coinToPayStatusService_1[_0x23393a(0x11d)][_0x23393a(0x119)](),domainMonitoringService_1[_0x23393a(0x10a)]['stopMonitoring'](),telegramBotService_1[_0x23393a(0xee)][_0x23393a(0x113)](),await database_1['default'][_0x23393a(0x115)](),process[_0x23393a(0x10b)](0x0);}),startServer();