'use strict';function a39_0x5af3(){const _0x4f1431=['coinToPayStatusService','🛑\x20Payment\x20cleanup\x20scheduler\x20stopped','⚠️\x20Telegram\x20bot\x20is\x20not\x20configured','runCleanupWithReport','stopPeriodicStatusCheck','4060928lsxZnB','🔍\x20Initializing\x20domain\x20monitoring\x20service...','✅\x20Telegram\x20bot\x20@','default','2632998ZQVDHg','port','127.1.1.159','config','stopMonitoring','domainMonitoringService','❌\x20Scheduled\x20cleanup\x20failed:','stopPeriodicUpdates','🧹\x20Running\x20scheduled\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','$disconnect','log','\x20hours','✅\x20Database\x20connected\x20successfully','isActive','🕐\x20Payment\x20cleanup\x20scheduled\x20to\x20run\x20every\x20','paymentCleanupService','./services/paymentCleanupService','./config/database','🚀\x20Server\x20running\x20on\x20port\x20','\x0a🔄\x20Gracefully\x20shutting\x20down...','SIGINT','nodeEnv','68095MxiOkM','316MHHhYz','🔄\x20Initializing\x20currency\x20rates\x20service...','./config/config','__esModule','✅\x20Scheduled\x20cleanup\x20completed\x20successfully','error','49669810qYKPfI','./services/domainMonitoringService','6mHvVyo','./app','listen','startMonitoring','1732115TKHrmS','stopBot','2001286BvYhQy','telegramBotService','9dfuKwR','startPeriodicStatusCheck','710343GhQFUH','__importDefault','exit','🌍\x20Environment:\x20'];a39_0x5af3=function(){return _0x4f1431;};return a39_0x5af3();}const a39_0x22b480=a39_0x4cdd;(function(_0x37d903,_0x132069){const _0x4a8321=a39_0x4cdd,_0x2e6e52=_0x37d903();while(!![]){try{const _0x475cc8=-parseInt(_0x4a8321(0x1c5))/0x1+-parseInt(_0x4a8321(0x1c1))/0x2+-parseInt(_0x4a8321(0x19c))/0x3+-parseInt(_0x4a8321(0x1b3))/0x4*(parseInt(_0x4a8321(0x1b2))/0x5)+-parseInt(_0x4a8321(0x1bb))/0x6*(parseInt(_0x4a8321(0x1bf))/0x7)+-parseInt(_0x4a8321(0x1ce))/0x8+parseInt(_0x4a8321(0x1c3))/0x9*(parseInt(_0x4a8321(0x1b9))/0xa);if(_0x475cc8===_0x132069)break;else _0x2e6e52['push'](_0x2e6e52['shift']());}catch(_0x388ffa){_0x2e6e52['push'](_0x2e6e52['shift']());}}}(a39_0x5af3,0x85a27));var __importDefault=this&&this[a39_0x22b480(0x1c6)]||function(_0x4108e6){return _0x4108e6&&_0x4108e6['__esModule']?_0x4108e6:{'default':_0x4108e6};};Object['defineProperty'](exports,a39_0x22b480(0x1b6),{'value':!![]});const app_1=__importDefault(require(a39_0x22b480(0x1bc))),config_1=require(a39_0x22b480(0x1b5)),database_1=__importDefault(require(a39_0x22b480(0x1ad))),telegramBotService_1=require('./services/telegramBotService'),currencyService_1=require('./services/currencyService'),coinToPayStatusService_1=require('./services/coinToPayStatusService'),domainMonitoringService_1=require(a39_0x22b480(0x1ba)),paymentCleanupService_1=require(a39_0x22b480(0x1ac));let paymentCleanupInterval=null;function startPaymentCleanupScheduler(){const _0x46848c=a39_0x22b480,_0x1681e9=0x18,_0x3a4c36=_0x1681e9*0x3c*0x3c*0x3e8;console[_0x46848c(0x1a6)](_0x46848c(0x1aa)+_0x1681e9+_0x46848c(0x1a7)),setTimeout(async()=>{const _0x3566ca=_0x46848c;console[_0x3566ca(0x1a6)]('🧹\x20Running\x20initial\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...');try{await paymentCleanupService_1[_0x3566ca(0x1ab)]['runCleanupWithReport'](),console[_0x3566ca(0x1a6)]('✅\x20Initial\x20cleanup\x20completed\x20successfully');}catch(_0xe611bb){console[_0x3566ca(0x1b8)]('❌\x20Initial\x20cleanup\x20failed:',_0xe611bb);}},0x5*0x3c*0x3e8),paymentCleanupInterval=setInterval(async()=>{const _0x569afa=_0x46848c;console[_0x569afa(0x1a6)](_0x569afa(0x1a4));try{await paymentCleanupService_1[_0x569afa(0x1ab)][_0x569afa(0x1cc)](),console[_0x569afa(0x1a6)](_0x569afa(0x1b7));}catch(_0x35a7e4){console[_0x569afa(0x1b8)](_0x569afa(0x1a2),_0x35a7e4);}},_0x3a4c36);}function stopPaymentCleanupScheduler(){const _0x46b6c6=a39_0x22b480;paymentCleanupInterval&&(clearInterval(paymentCleanupInterval),paymentCleanupInterval=null,console[_0x46b6c6(0x1a6)](_0x46b6c6(0x1ca)));}function a39_0x4cdd(_0x16bea2,_0x7ade38){const _0x5af328=a39_0x5af3();return a39_0x4cdd=function(_0x4cdd40,_0x3ca5d4){_0x4cdd40=_0x4cdd40-0x199;let _0x50df37=_0x5af328[_0x4cdd40];return _0x50df37;},a39_0x4cdd(_0x16bea2,_0x7ade38);}async function startServer(){const _0x75715d=a39_0x22b480;try{await database_1[_0x75715d(0x19b)]['$connect'](),console[_0x75715d(0x1a6)](_0x75715d(0x1a8));const _0x2d35c4=telegramBotService_1[_0x75715d(0x1c2)]['getBotInfo']();_0x2d35c4[_0x75715d(0x1a9)]?console['log'](_0x75715d(0x19a)+_0x2d35c4['username']+'\x20is\x20active'):console[_0x75715d(0x1a6)](_0x75715d(0x1cb)),console[_0x75715d(0x1a6)](_0x75715d(0x1b4)),console[_0x75715d(0x1a6)]('🪙\x20Initializing\x20CoinToPay\x20status\x20checking\x20service...'),coinToPayStatusService_1[_0x75715d(0x1c9)][_0x75715d(0x1c4)](),console[_0x75715d(0x1a6)](_0x75715d(0x199)),domainMonitoringService_1[_0x75715d(0x1a1)][_0x75715d(0x1be)](),console['log']('🧹\x20Initializing\x20payment\x20cleanup\x20service...'),startPaymentCleanupScheduler(),app_1[_0x75715d(0x19b)][_0x75715d(0x1bd)](config_1[_0x75715d(0x19f)][_0x75715d(0x19d)],_0x75715d(0x19e),()=>{const _0x1160a5=_0x75715d;console[_0x1160a5(0x1a6)](_0x1160a5(0x1ae)+config_1[_0x1160a5(0x19f)][_0x1160a5(0x19d)]),console[_0x1160a5(0x1a6)](_0x1160a5(0x1c8)+config_1['config'][_0x1160a5(0x1b1)]),console[_0x1160a5(0x1a6)]('📊\x20Health\x20check:\x20http://localhost:'+config_1['config'][_0x1160a5(0x19d)]+'/api/health');});}catch(_0x184e17){console[_0x75715d(0x1b8)]('❌\x20Failed\x20to\x20start\x20server:',_0x184e17),process[_0x75715d(0x1c7)](0x1);}}process['on'](a39_0x22b480(0x1b0),async()=>{const _0x559e9f=a39_0x22b480;console[_0x559e9f(0x1a6)](_0x559e9f(0x1af)),stopPaymentCleanupScheduler(),currencyService_1['currencyService'][_0x559e9f(0x1a3)](),coinToPayStatusService_1[_0x559e9f(0x1c9)]['stopPeriodicStatusCheck'](),domainMonitoringService_1['domainMonitoringService'][_0x559e9f(0x1a0)](),telegramBotService_1[_0x559e9f(0x1c2)][_0x559e9f(0x1c0)](),await database_1[_0x559e9f(0x19b)][_0x559e9f(0x1a5)](),process[_0x559e9f(0x1c7)](0x0);}),process['on']('SIGTERM',async()=>{const _0x2f95e1=a39_0x22b480;console[_0x2f95e1(0x1a6)](_0x2f95e1(0x1af)),stopPaymentCleanupScheduler(),currencyService_1['currencyService']['stopPeriodicUpdates'](),coinToPayStatusService_1['coinToPayStatusService'][_0x2f95e1(0x1cd)](),domainMonitoringService_1[_0x2f95e1(0x1a1)][_0x2f95e1(0x1a0)](),telegramBotService_1[_0x2f95e1(0x1c2)]['stopBot'](),await database_1['default']['$disconnect'](),process[_0x2f95e1(0x1c7)](0x0);}),startServer();