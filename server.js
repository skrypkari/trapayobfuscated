'use strict';function a39_0x1811(_0x4018d0,_0x120763){const _0x481790=a39_0x4817();return a39_0x1811=function(_0x1811da,_0x3501f5){_0x1811da=_0x1811da-0x1dc;let _0x3789bc=_0x481790[_0x1811da];return _0x3789bc;},a39_0x1811(_0x4018d0,_0x120763);}const a39_0x3059c3=a39_0x1811;(function(_0xb892cc,_0x5d2742){const _0x49593d=a39_0x1811,_0x1611ec=_0xb892cc();while(!![]){try{const _0x65bb94=parseInt(_0x49593d(0x205))/0x1*(parseInt(_0x49593d(0x1fa))/0x2)+-parseInt(_0x49593d(0x207))/0x3*(-parseInt(_0x49593d(0x1e4))/0x4)+parseInt(_0x49593d(0x208))/0x5+-parseInt(_0x49593d(0x1e2))/0x6+-parseInt(_0x49593d(0x1ec))/0x7+-parseInt(_0x49593d(0x1df))/0x8*(parseInt(_0x49593d(0x1f4))/0x9)+parseInt(_0x49593d(0x1dd))/0xa;if(_0x65bb94===_0x5d2742)break;else _0x1611ec['push'](_0x1611ec['shift']());}catch(_0x55d42e){_0x1611ec['push'](_0x1611ec['shift']());}}}(a39_0x4817,0x50130));var __importDefault=this&&this['__importDefault']||function(_0x50b683){const _0x1e76aa=a39_0x1811;return _0x50b683&&_0x50b683[_0x1e76aa(0x1eb)]?_0x50b683:{'default':_0x50b683};};Object[a39_0x3059c3(0x1f3)](exports,a39_0x3059c3(0x1eb),{'value':!![]});const app_1=__importDefault(require(a39_0x3059c3(0x20a))),config_1=require(a39_0x3059c3(0x1f6)),database_1=__importDefault(require(a39_0x3059c3(0x1fd))),telegramBotService_1=require('./services/telegramBotService'),currencyService_1=require(a39_0x3059c3(0x203)),coinToPayStatusService_1=require('./services/coinToPayStatusService'),domainMonitoringService_1=require(a39_0x3059c3(0x20e)),paymentCleanupService_1=require(a39_0x3059c3(0x20f));let paymentCleanupInterval=null;function a39_0x4817(){const _0x2c3f5a=['paymentCleanupService','\x0a🔄\x20Gracefully\x20shutting\x20down...','2zuJcln','stopPeriodicStatusCheck','getBotInfo','./config/database','\x20is\x20active','error','🔄\x20Initializing\x20currency\x20rates\x20service...','⚠️\x20Telegram\x20bot\x20is\x20not\x20configured','$disconnect','./services/currencyService','🧹\x20Running\x20scheduled\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','258052myNMsD','nodeEnv','861QVlfkb','2394565FTeIiY','coinToPayStatusService','./app','listen','telegramBotService','currencyService','./services/domainMonitoringService','./services/paymentCleanupService','default','config','❌\x20Failed\x20to\x20start\x20server:','stopMonitoring','🧹\x20Running\x20initial\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','exit','🚀\x20Server\x20running\x20on\x20port\x20','949740iyvtJI','❌\x20Initial\x20cleanup\x20failed:','449224tjYPww','stopBot','domainMonitoringService','1649670jHylls','\x20hours','2504xDLBRV','🛑\x20Payment\x20cleanup\x20scheduler\x20stopped','log','runCleanupWithReport','🧹\x20Initializing\x20payment\x20cleanup\x20service...','✅\x20Initial\x20cleanup\x20completed\x20successfully','🪙\x20Initializing\x20CoinToPay\x20status\x20checking\x20service...','__esModule','109207kmbqbM','❌\x20Scheduled\x20cleanup\x20failed:','✅\x20Telegram\x20bot\x20@','startPeriodicStatusCheck','SIGTERM','port','/api/health','defineProperty','63ffPcFJ','$connect','./config/config','stopPeriodicUpdates'];a39_0x4817=function(){return _0x2c3f5a;};return a39_0x4817();}function startPaymentCleanupScheduler(){const _0x191e89=a39_0x3059c3,_0x52d16a=0x18,_0xcc4c8d=_0x52d16a*0x3c*0x3c*0x3e8;console[_0x191e89(0x1e6)]('🕐\x20Payment\x20cleanup\x20scheduled\x20to\x20run\x20every\x20'+_0x52d16a+_0x191e89(0x1e3)),setTimeout(async()=>{const _0x323c0a=_0x191e89;console[_0x323c0a(0x1e6)](_0x323c0a(0x214));try{await paymentCleanupService_1[_0x323c0a(0x1f8)][_0x323c0a(0x1e7)](),console[_0x323c0a(0x1e6)](_0x323c0a(0x1e9));}catch(_0x5d580d){console[_0x323c0a(0x1ff)](_0x323c0a(0x1de),_0x5d580d);}},0x5*0x3c*0x3e8),paymentCleanupInterval=setInterval(async()=>{const _0x2fef2e=_0x191e89;console[_0x2fef2e(0x1e6)](_0x2fef2e(0x204));try{await paymentCleanupService_1[_0x2fef2e(0x1f8)][_0x2fef2e(0x1e7)](),console[_0x2fef2e(0x1e6)]('✅\x20Scheduled\x20cleanup\x20completed\x20successfully');}catch(_0x4ac9bd){console[_0x2fef2e(0x1ff)](_0x2fef2e(0x1ed),_0x4ac9bd);}},_0xcc4c8d);}function stopPaymentCleanupScheduler(){const _0x115888=a39_0x3059c3;paymentCleanupInterval&&(clearInterval(paymentCleanupInterval),paymentCleanupInterval=null,console['log'](_0x115888(0x1e5)));}async function startServer(){const _0x30c025=a39_0x3059c3;try{await database_1[_0x30c025(0x210)][_0x30c025(0x1f5)](),console[_0x30c025(0x1e6)]('✅\x20Database\x20connected\x20successfully');const _0x1eb135=telegramBotService_1[_0x30c025(0x20c)][_0x30c025(0x1fc)]();_0x1eb135['isActive']?console['log'](_0x30c025(0x1ee)+_0x1eb135['username']+_0x30c025(0x1fe)):console[_0x30c025(0x1e6)](_0x30c025(0x201)),console['log'](_0x30c025(0x200)),console[_0x30c025(0x1e6)](_0x30c025(0x1ea)),coinToPayStatusService_1[_0x30c025(0x209)][_0x30c025(0x1ef)](),console[_0x30c025(0x1e6)]('🔍\x20Initializing\x20domain\x20monitoring\x20service...'),domainMonitoringService_1[_0x30c025(0x1e1)]['startMonitoring'](),console['log'](_0x30c025(0x1e8)),startPaymentCleanupScheduler(),app_1[_0x30c025(0x210)][_0x30c025(0x20b)](config_1[_0x30c025(0x211)]['port'],'127.1.1.159',()=>{const _0x49954f=_0x30c025;console[_0x49954f(0x1e6)](_0x49954f(0x1dc)+config_1['config'][_0x49954f(0x1f1)]),console[_0x49954f(0x1e6)]('🌍\x20Environment:\x20'+config_1[_0x49954f(0x211)][_0x49954f(0x206)]),console['log']('📊\x20Health\x20check:\x20http://localhost:'+config_1['config']['port']+_0x49954f(0x1f2));});}catch(_0x59f51a){console[_0x30c025(0x1ff)](_0x30c025(0x212),_0x59f51a),process[_0x30c025(0x215)](0x1);}}process['on']('SIGINT',async()=>{const _0x33afce=a39_0x3059c3;console[_0x33afce(0x1e6)](_0x33afce(0x1f9)),stopPaymentCleanupScheduler(),currencyService_1[_0x33afce(0x20d)][_0x33afce(0x1f7)](),coinToPayStatusService_1[_0x33afce(0x209)][_0x33afce(0x1fb)](),domainMonitoringService_1[_0x33afce(0x1e1)][_0x33afce(0x213)](),telegramBotService_1[_0x33afce(0x20c)][_0x33afce(0x1e0)](),await database_1[_0x33afce(0x210)][_0x33afce(0x202)](),process[_0x33afce(0x215)](0x0);}),process['on'](a39_0x3059c3(0x1f0),async()=>{const _0x3931cb=a39_0x3059c3;console['log'](_0x3931cb(0x1f9)),stopPaymentCleanupScheduler(),currencyService_1[_0x3931cb(0x20d)][_0x3931cb(0x1f7)](),coinToPayStatusService_1['coinToPayStatusService']['stopPeriodicStatusCheck'](),domainMonitoringService_1[_0x3931cb(0x1e1)]['stopMonitoring'](),telegramBotService_1[_0x3931cb(0x20c)][_0x3931cb(0x1e0)](),await database_1[_0x3931cb(0x210)]['$disconnect'](),process[_0x3931cb(0x215)](0x0);}),startServer();