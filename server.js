'use strict';const a39_0x109000=a39_0x2e20;(function(_0x280318,_0x4ab6a1){const _0x147b8=a39_0x2e20,_0xfc51d8=_0x280318();while(!![]){try{const _0x69c6ff=-parseInt(_0x147b8(0x1e9))/0x1*(parseInt(_0x147b8(0x1ff))/0x2)+parseInt(_0x147b8(0x205))/0x3+parseInt(_0x147b8(0x21a))/0x4*(-parseInt(_0x147b8(0x1e3))/0x5)+parseInt(_0x147b8(0x1f8))/0x6*(-parseInt(_0x147b8(0x1f7))/0x7)+parseInt(_0x147b8(0x200))/0x8*(-parseInt(_0x147b8(0x210))/0x9)+-parseInt(_0x147b8(0x209))/0xa+parseInt(_0x147b8(0x1fe))/0xb*(parseInt(_0x147b8(0x1ed))/0xc);if(_0x69c6ff===_0x4ab6a1)break;else _0xfc51d8['push'](_0xfc51d8['shift']());}catch(_0x47afb0){_0xfc51d8['push'](_0xfc51d8['shift']());}}}(a39_0x48c4,0xdee43));function a39_0x2e20(_0x3e063d,_0x68126e){const _0x48c400=a39_0x48c4();return a39_0x2e20=function(_0x2e2086,_0x398ae8){_0x2e2086=_0x2e2086-0x1dd;let _0x16772e=_0x48c400[_0x2e2086];return _0x16772e;},a39_0x2e20(_0x3e063d,_0x68126e);}function a39_0x48c4(){const _0x2e4471=['/api/health','stopPeriodicStatusCheck','🧹\x20Running\x20initial\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','stopMonitoring','7438356yXEOir','isActive','SIGTERM','stopPeriodicUpdates','listen','✅\x20Initial\x20cleanup\x20completed\x20successfully','❌\x20Failed\x20to\x20start\x20server:','username','config','telegramBotService','4YyAjbK','✅\x20Telegram\x20bot\x20@','\x20hours','currencyService','runCleanupWithReport','startMonitoring','🧹\x20Running\x20scheduled\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','2803775HSqiQD','🔄\x20Initializing\x20currency\x20rates\x20service...','exit','./services/currencyService','🚀\x20Server\x20running\x20on\x20port\x20','__importDefault','6FFlkKk','paymentCleanupService','$connect','SIGINT','3575736FMeJUx','⚠️\x20Telegram\x20bot\x20is\x20not\x20configured','__esModule','default','nodeEnv','domainMonitoringService','log','startPeriodicStatusCheck','stopBot','defineProperty','953169ZQcUOs','54PgvYtA','❌\x20Initial\x20cleanup\x20failed:','coinToPayStatusService','./config/config','./services/coinToPayStatusService','🪙\x20Initializing\x20CoinToPay\x20status\x20checking\x20service...','176YUNHOb','449846hInehe','8QsYWSU','🛑\x20Payment\x20cleanup\x20scheduler\x20stopped','error','❌\x20Scheduled\x20cleanup\x20failed:','📊\x20Health\x20check:\x20http://localhost:','2517954rqiGIv','./services/telegramBotService','127.1.1.159','$disconnect','7317230itqFRI','\x0a🔄\x20Gracefully\x20shutting\x20down...','port'];a39_0x48c4=function(){return _0x2e4471;};return a39_0x48c4();}var __importDefault=this&&this[a39_0x109000(0x1e8)]||function(_0x202236){const _0x153732=a39_0x109000;return _0x202236&&_0x202236[_0x153732(0x1ef)]?_0x202236:{'default':_0x202236};};Object[a39_0x109000(0x1f6)](exports,a39_0x109000(0x1ef),{'value':!![]});const app_1=__importDefault(require('./app')),config_1=require(a39_0x109000(0x1fb)),database_1=__importDefault(require('./config/database')),telegramBotService_1=require(a39_0x109000(0x206)),currencyService_1=require(a39_0x109000(0x1e6)),coinToPayStatusService_1=require(a39_0x109000(0x1fc)),domainMonitoringService_1=require('./services/domainMonitoringService'),paymentCleanupService_1=require('./services/paymentCleanupService');let paymentCleanupInterval=null;function startPaymentCleanupScheduler(){const _0x28f7be=a39_0x109000,_0x181da8=0x18,_0x7ba549=_0x181da8*0x3c*0x3c*0x3e8;console[_0x28f7be(0x1f3)]('🕐\x20Payment\x20cleanup\x20scheduled\x20to\x20run\x20every\x20'+_0x181da8+_0x28f7be(0x1de)),setTimeout(async()=>{const _0x2a5e77=_0x28f7be;console['log'](_0x2a5e77(0x20e));try{await paymentCleanupService_1['paymentCleanupService']['runCleanupWithReport'](),console[_0x2a5e77(0x1f3)](_0x2a5e77(0x215));}catch(_0x3c2cba){console[_0x2a5e77(0x202)](_0x2a5e77(0x1f9),_0x3c2cba);}},0x5*0x3c*0x3e8),paymentCleanupInterval=setInterval(async()=>{const _0x456111=_0x28f7be;console[_0x456111(0x1f3)](_0x456111(0x1e2));try{await paymentCleanupService_1[_0x456111(0x1ea)][_0x456111(0x1e0)](),console['log']('✅\x20Scheduled\x20cleanup\x20completed\x20successfully');}catch(_0x2c874b){console[_0x456111(0x202)](_0x456111(0x203),_0x2c874b);}},_0x7ba549);}function stopPaymentCleanupScheduler(){const _0x271781=a39_0x109000;paymentCleanupInterval&&(clearInterval(paymentCleanupInterval),paymentCleanupInterval=null,console[_0x271781(0x1f3)](_0x271781(0x201)));}async function startServer(){const _0x1de1a1=a39_0x109000;try{await database_1[_0x1de1a1(0x1f0)][_0x1de1a1(0x1eb)](),console[_0x1de1a1(0x1f3)]('✅\x20Database\x20connected\x20successfully');const _0x34e5bd=telegramBotService_1['telegramBotService']['getBotInfo']();_0x34e5bd[_0x1de1a1(0x211)]?console[_0x1de1a1(0x1f3)](_0x1de1a1(0x1dd)+_0x34e5bd[_0x1de1a1(0x217)]+'\x20is\x20active'):console[_0x1de1a1(0x1f3)](_0x1de1a1(0x1ee)),console[_0x1de1a1(0x1f3)](_0x1de1a1(0x1e4)),console[_0x1de1a1(0x1f3)](_0x1de1a1(0x1fd)),coinToPayStatusService_1[_0x1de1a1(0x1fa)][_0x1de1a1(0x1f4)](),console[_0x1de1a1(0x1f3)]('🔍\x20Initializing\x20domain\x20monitoring\x20service...'),domainMonitoringService_1[_0x1de1a1(0x1f2)][_0x1de1a1(0x1e1)](),console[_0x1de1a1(0x1f3)]('🧹\x20Initializing\x20payment\x20cleanup\x20service...'),startPaymentCleanupScheduler(),app_1[_0x1de1a1(0x1f0)][_0x1de1a1(0x214)](config_1['config'][_0x1de1a1(0x20b)],_0x1de1a1(0x207),()=>{const _0xfd0cae=_0x1de1a1;console[_0xfd0cae(0x1f3)](_0xfd0cae(0x1e7)+config_1[_0xfd0cae(0x218)]['port']),console['log']('🌍\x20Environment:\x20'+config_1[_0xfd0cae(0x218)][_0xfd0cae(0x1f1)]),console['log'](_0xfd0cae(0x204)+config_1[_0xfd0cae(0x218)][_0xfd0cae(0x20b)]+_0xfd0cae(0x20c));});}catch(_0x5073be){console[_0x1de1a1(0x202)](_0x1de1a1(0x216),_0x5073be),process['exit'](0x1);}}process['on'](a39_0x109000(0x1ec),async()=>{const _0x4e55cd=a39_0x109000;console[_0x4e55cd(0x1f3)](_0x4e55cd(0x20a)),stopPaymentCleanupScheduler(),currencyService_1[_0x4e55cd(0x1df)][_0x4e55cd(0x213)](),coinToPayStatusService_1[_0x4e55cd(0x1fa)][_0x4e55cd(0x20d)](),domainMonitoringService_1[_0x4e55cd(0x1f2)]['stopMonitoring'](),telegramBotService_1['telegramBotService'][_0x4e55cd(0x1f5)](),await database_1[_0x4e55cd(0x1f0)][_0x4e55cd(0x208)](),process[_0x4e55cd(0x1e5)](0x0);}),process['on'](a39_0x109000(0x212),async()=>{const _0x2711e0=a39_0x109000;console['log']('\x0a🔄\x20Gracefully\x20shutting\x20down...'),stopPaymentCleanupScheduler(),currencyService_1[_0x2711e0(0x1df)]['stopPeriodicUpdates'](),coinToPayStatusService_1[_0x2711e0(0x1fa)][_0x2711e0(0x20d)](),domainMonitoringService_1['domainMonitoringService'][_0x2711e0(0x20f)](),telegramBotService_1[_0x2711e0(0x219)][_0x2711e0(0x1f5)](),await database_1['default'][_0x2711e0(0x208)](),process[_0x2711e0(0x1e5)](0x0);}),startServer();