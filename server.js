'use strict';const a51_0x4a8d00=a51_0x40ac;(function(_0x4d0127,_0x5b839f){const _0x38ac02=a51_0x40ac,_0x45a5c4=_0x4d0127();while(!![]){try{const _0x17cead=parseInt(_0x38ac02(0x1a7))/0x1+parseInt(_0x38ac02(0x1d3))/0x2+-parseInt(_0x38ac02(0x1e1))/0x3*(parseInt(_0x38ac02(0x1ce))/0x4)+-parseInt(_0x38ac02(0x1d2))/0x5+parseInt(_0x38ac02(0x1ae))/0x6+parseInt(_0x38ac02(0x1ab))/0x7*(-parseInt(_0x38ac02(0x1de))/0x8)+-parseInt(_0x38ac02(0x1b1))/0x9*(-parseInt(_0x38ac02(0x1dd))/0xa);if(_0x17cead===_0x5b839f)break;else _0x45a5c4['push'](_0x45a5c4['shift']());}catch(_0x5a3d08){_0x45a5c4['push'](_0x45a5c4['shift']());}}}(a51_0x12fd,0x7baf6));var __importDefault=this&&this[a51_0x4a8d00(0x1be)]||function(_0x141d97){const _0x27f1db=a51_0x4a8d00;return _0x141d97&&_0x141d97[_0x27f1db(0x1d6)]?_0x141d97:{'default':_0x141d97};};Object[a51_0x4a8d00(0x1d1)](exports,a51_0x4a8d00(0x1d6),{'value':!![]});const app_1=__importDefault(require('./app')),config_1=require(a51_0x4a8d00(0x1d0)),database_1=__importDefault(require(a51_0x4a8d00(0x1d7))),telegramBotService_1=require('./services/telegramBotService'),currencyService_1=require('./services/currencyService'),coinToPayStatusService_1=require(a51_0x4a8d00(0x1a6)),domainMonitoringService_1=require('./services/domainMonitoringService'),paymentCleanupService_1=require('./services/paymentCleanupService');let paymentCleanupInterval=null;function startPaymentCleanupScheduler(){const _0xf6ef3=a51_0x4a8d00,_0x5727c1=0x18,_0xf43a38=_0x5727c1*0x3c*0x3c*0x3e8;console[_0xf6ef3(0x1c9)]('ðŸ•\x20Payment\x20cleanup\x20scheduled\x20to\x20run\x20every\x20'+_0x5727c1+_0xf6ef3(0x1d4)),setTimeout(async()=>{const _0x506456=_0xf6ef3;console[_0x506456(0x1c9)](_0x506456(0x1b7));try{await paymentCleanupService_1[_0x506456(0x1c0)][_0x506456(0x1aa)](),console[_0x506456(0x1c9)](_0x506456(0x1c3));}catch(_0x5bc060){console['error'](_0x506456(0x1bd),_0x5bc060);}},0x5*0x3c*0x3e8),paymentCleanupInterval=setInterval(async()=>{const _0x1c9851=_0xf6ef3;console['log'](_0x1c9851(0x1cc));try{await paymentCleanupService_1[_0x1c9851(0x1c0)][_0x1c9851(0x1aa)](),console[_0x1c9851(0x1c9)]('âœ…\x20Scheduled\x20cleanup\x20completed\x20successfully');}catch(_0x14ca1b){console['error'](_0x1c9851(0x1c7),_0x14ca1b);}},_0xf43a38);}function a51_0x40ac(_0x142b86,_0x3846cd){_0x142b86=_0x142b86-0x1a5;const _0x12fd62=a51_0x12fd();let _0x40ac6c=_0x12fd62[_0x142b86];return _0x40ac6c;}function a51_0x12fd(){const _0x41f5aa=['stopBot','isActive','âœ…\x20Initial\x20cleanup\x20completed\x20successfully','âš ï¸\x20Telegram\x20bot\x20is\x20not\x20configured','stopPeriodicStatusCheck','port','âŒ\x20Scheduled\x20cleanup\x20failed:','SIGINT','log','currencyService','coinToPayStatusService','ðŸ§¹\x20Running\x20scheduled\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','ðŸ”„\x20Initializing\x20currency\x20rates\x20service...','44852zFKeaI','âŒ\x20Failed\x20to\x20start\x20server:','./config/config','defineProperty','2607875XOIGSw','1184822jVgUvP','\x20hours','ðŸ›‘\x20Payment\x20cleanup\x20scheduler\x20stopped','__esModule','./config/database','\x20is\x20active','username','exit','stopPeriodicUpdates','ðŸª™\x20Initializing\x20CoinToPay\x20status\x20checking\x20service...','94230AlXStg','511352KigbRD','telegramBotService','$disconnect','228fsKmfm','/api/health','./services/coinToPayStatusService','242777VaXYPs','ðŸ”\x20Initializing\x20domain\x20monitoring\x20service...','ðŸ§¹\x20Initializing\x20payment\x20cleanup\x20service...','runCleanupWithReport','28UVVMsB','listen','ðŸŒ\x20Environment:\x20','5995974FPXqVo','$connect','error','288SxpVZD','ðŸš€\x20Server\x20running\x20on\x20port\x20','config','\x0aðŸ”„\x20Gracefully\x20shutting\x20down...','startMonitoring','SIGTERM','ðŸ§¹\x20Running\x20initial\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','stopMonitoring','default','nodeEnv','domainMonitoringService','getBotInfo','âŒ\x20Initial\x20cleanup\x20failed:','__importDefault','ðŸ“Š\x20Health\x20check:\x20http://localhost:','paymentCleanupService'];a51_0x12fd=function(){return _0x41f5aa;};return a51_0x12fd();}function stopPaymentCleanupScheduler(){const _0x373804=a51_0x4a8d00;paymentCleanupInterval&&(clearInterval(paymentCleanupInterval),paymentCleanupInterval=null,console[_0x373804(0x1c9)](_0x373804(0x1d5)));}async function startServer(){const _0x22ea8e=a51_0x4a8d00;try{await database_1[_0x22ea8e(0x1b9)][_0x22ea8e(0x1af)](),console[_0x22ea8e(0x1c9)]('âœ…\x20Database\x20connected\x20successfully');const _0x55e3be=telegramBotService_1['telegramBotService'][_0x22ea8e(0x1bc)]();_0x55e3be[_0x22ea8e(0x1c2)]?console['log']('âœ…\x20Telegram\x20bot\x20@'+_0x55e3be[_0x22ea8e(0x1d9)]+_0x22ea8e(0x1d8)):console[_0x22ea8e(0x1c9)](_0x22ea8e(0x1c4));console[_0x22ea8e(0x1c9)](_0x22ea8e(0x1cd)),console[_0x22ea8e(0x1c9)](_0x22ea8e(0x1dc)),coinToPayStatusService_1[_0x22ea8e(0x1cb)]['startPeriodicStatusCheck'](),console['log'](_0x22ea8e(0x1a8)),domainMonitoringService_1[_0x22ea8e(0x1bb)][_0x22ea8e(0x1b5)](),console['log'](_0x22ea8e(0x1a9)),startPaymentCleanupScheduler();config_1[_0x22ea8e(0x1b3)][_0x22ea8e(0x1ba)]==='production'?app_1[_0x22ea8e(0x1b9)][_0x22ea8e(0x1ac)](config_1[_0x22ea8e(0x1b3)][_0x22ea8e(0x1c6)],()=>{const _0x47f098=_0x22ea8e;console[_0x47f098(0x1c9)](_0x47f098(0x1b2)+config_1[_0x47f098(0x1b3)]['port']),console[_0x47f098(0x1c9)](_0x47f098(0x1ad)+config_1[_0x47f098(0x1b3)][_0x47f098(0x1ba)]);}):app_1['default']['listen'](config_1[_0x22ea8e(0x1b3)][_0x22ea8e(0x1c6)],'127.1.1.159',()=>{const _0x2455c4=_0x22ea8e;console[_0x2455c4(0x1c9)](_0x2455c4(0x1b2)+config_1[_0x2455c4(0x1b3)]['port']),console['log'](_0x2455c4(0x1ad)+config_1[_0x2455c4(0x1b3)][_0x2455c4(0x1ba)]),console[_0x2455c4(0x1c9)](_0x2455c4(0x1bf)+config_1[_0x2455c4(0x1b3)][_0x2455c4(0x1c6)]+_0x2455c4(0x1a5));});;}catch(_0x50c19a){console[_0x22ea8e(0x1b0)](_0x22ea8e(0x1cf),_0x50c19a),process['exit'](0x1);}}process['on'](a51_0x4a8d00(0x1c8),async()=>{const _0x5368c3=a51_0x4a8d00;console['log'](_0x5368c3(0x1b4)),stopPaymentCleanupScheduler(),currencyService_1[_0x5368c3(0x1ca)][_0x5368c3(0x1db)](),coinToPayStatusService_1[_0x5368c3(0x1cb)][_0x5368c3(0x1c5)](),domainMonitoringService_1[_0x5368c3(0x1bb)][_0x5368c3(0x1b8)](),telegramBotService_1[_0x5368c3(0x1df)][_0x5368c3(0x1c1)](),await database_1['default']['$disconnect'](),process[_0x5368c3(0x1da)](0x0);}),process['on'](a51_0x4a8d00(0x1b6),async()=>{const _0x4a6f1d=a51_0x4a8d00;console[_0x4a6f1d(0x1c9)]('\x0aðŸ”„\x20Gracefully\x20shutting\x20down...'),stopPaymentCleanupScheduler(),currencyService_1['currencyService'][_0x4a6f1d(0x1db)](),coinToPayStatusService_1[_0x4a6f1d(0x1cb)][_0x4a6f1d(0x1c5)](),domainMonitoringService_1['domainMonitoringService']['stopMonitoring'](),telegramBotService_1[_0x4a6f1d(0x1df)][_0x4a6f1d(0x1c1)](),await database_1[_0x4a6f1d(0x1b9)][_0x4a6f1d(0x1e0)](),process['exit'](0x0);}),startServer();