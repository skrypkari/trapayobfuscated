'use strict';const a45_0x4e5ec5=a45_0x2a92;(function(_0x49c853,_0x26914e){const _0x4b2beb=a45_0x2a92,_0x97266f=_0x49c853();while(!![]){try{const _0x4830ff=parseInt(_0x4b2beb(0x172))/0x1*(-parseInt(_0x4b2beb(0x152))/0x2)+parseInt(_0x4b2beb(0x169))/0x3*(parseInt(_0x4b2beb(0x15c))/0x4)+parseInt(_0x4b2beb(0x179))/0x5+-parseInt(_0x4b2beb(0x146))/0x6+parseInt(_0x4b2beb(0x14d))/0x7*(-parseInt(_0x4b2beb(0x177))/0x8)+parseInt(_0x4b2beb(0x14b))/0x9+-parseInt(_0x4b2beb(0x167))/0xa*(-parseInt(_0x4b2beb(0x161))/0xb);if(_0x4830ff===_0x26914e)break;else _0x97266f['push'](_0x97266f['shift']());}catch(_0x209ece){_0x97266f['push'](_0x97266f['shift']());}}}(a45_0x1ca2,0x2ef5c));function a45_0x1ca2(){const _0x274ed0=['listen','ðŸª™\x20Initializing\x20CoinToPay\x20status\x20checking\x20service...','stopPeriodicStatusCheck','ðŸ§¹\x20Running\x20initial\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','coinToPayStatusService','8zniQrl','âœ…\x20Initial\x20cleanup\x20completed\x20successfully','log','./services/paymentCleanupService','âš ï¸\x20Telegram\x20bot\x20is\x20not\x20configured','22KIWvKv','$disconnect','./config/config','./services/currencyService','âœ…\x20Database\x20connected\x20successfully','nodeEnv','1205020TpxuEn','port','234021MBXxFo','\x20hours','ðŸ”„\x20Initializing\x20currency\x20rates\x20service...','stopPeriodicUpdates','runCleanupWithReport','isActive','getBotInfo','startPeriodicStatusCheck','$connect','214817MdydgS','âœ…\x20Scheduled\x20cleanup\x20completed\x20successfully','domainMonitoringService','./services/coinToPayStatusService','SIGTERM','64oonDEp','SIGINT','1576070tjYLiA','exit','stopBot','startMonitoring','ðŸ•\x20Payment\x20cleanup\x20scheduled\x20to\x20run\x20every\x20','./app','./config/database','currencyService','paymentCleanupService','username','\x0aðŸ”„\x20Gracefully\x20shutting\x20down...','1236036quzTMY','/api/health','âŒ\x20Initial\x20cleanup\x20failed:','error','ðŸ”\x20Initializing\x20domain\x20monitoring\x20service...','169011ztQqhj','defineProperty','103110WQcJBY','\x20is\x20active','__esModule','config','âŒ\x20Failed\x20to\x20start\x20server:','2Uxdfwk','__importDefault','telegramBotService','ðŸŒ\x20Environment:\x20','default'];a45_0x1ca2=function(){return _0x274ed0;};return a45_0x1ca2();}var __importDefault=this&&this[a45_0x4e5ec5(0x153)]||function(_0x4ee637){const _0x2af38f=a45_0x4e5ec5;return _0x4ee637&&_0x4ee637[_0x2af38f(0x14f)]?_0x4ee637:{'default':_0x4ee637};};Object[a45_0x4e5ec5(0x14c)](exports,'__esModule',{'value':!![]});const app_1=__importDefault(require(a45_0x4e5ec5(0x17e))),config_1=require(a45_0x4e5ec5(0x163)),database_1=__importDefault(require(a45_0x4e5ec5(0x17f))),telegramBotService_1=require('./services/telegramBotService'),currencyService_1=require(a45_0x4e5ec5(0x164)),coinToPayStatusService_1=require(a45_0x4e5ec5(0x175)),domainMonitoringService_1=require('./services/domainMonitoringService'),paymentCleanupService_1=require(a45_0x4e5ec5(0x15f));let paymentCleanupInterval=null;function startPaymentCleanupScheduler(){const _0x3cef74=a45_0x4e5ec5,_0x2365be=0x18,_0x12b9d5=_0x2365be*0x3c*0x3c*0x3e8;console[_0x3cef74(0x15e)](_0x3cef74(0x17d)+_0x2365be+_0x3cef74(0x16a)),setTimeout(async()=>{const _0x43b409=_0x3cef74;console[_0x43b409(0x15e)](_0x43b409(0x15a));try{await paymentCleanupService_1[_0x43b409(0x181)][_0x43b409(0x16d)](),console[_0x43b409(0x15e)](_0x43b409(0x15d));}catch(_0x27f1d0){console['error'](_0x43b409(0x148),_0x27f1d0);}},0x5*0x3c*0x3e8),paymentCleanupInterval=setInterval(async()=>{const _0x1a5fb9=_0x3cef74;console[_0x1a5fb9(0x15e)]('ðŸ§¹\x20Running\x20scheduled\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...');try{await paymentCleanupService_1[_0x1a5fb9(0x181)][_0x1a5fb9(0x16d)](),console[_0x1a5fb9(0x15e)](_0x1a5fb9(0x173));}catch(_0x2f9ea3){console[_0x1a5fb9(0x149)]('âŒ\x20Scheduled\x20cleanup\x20failed:',_0x2f9ea3);}},_0x12b9d5);}function stopPaymentCleanupScheduler(){paymentCleanupInterval&&(clearInterval(paymentCleanupInterval),paymentCleanupInterval=null,console['log']('ðŸ›‘\x20Payment\x20cleanup\x20scheduler\x20stopped'));}function a45_0x2a92(_0x1350d7,_0x317816){_0x1350d7=_0x1350d7-0x146;const _0x1ca236=a45_0x1ca2();let _0x2a9281=_0x1ca236[_0x1350d7];return _0x2a9281;}async function startServer(){const _0x3c7320=a45_0x4e5ec5;try{await database_1[_0x3c7320(0x156)][_0x3c7320(0x171)](),console[_0x3c7320(0x15e)](_0x3c7320(0x165));const _0x1acbdb=telegramBotService_1[_0x3c7320(0x154)][_0x3c7320(0x16f)]();_0x1acbdb[_0x3c7320(0x16e)]?console['log']('âœ…\x20Telegram\x20bot\x20@'+_0x1acbdb[_0x3c7320(0x182)]+_0x3c7320(0x14e)):console[_0x3c7320(0x15e)](_0x3c7320(0x160)),console[_0x3c7320(0x15e)](_0x3c7320(0x16b)),console['log'](_0x3c7320(0x158)),coinToPayStatusService_1[_0x3c7320(0x15b)][_0x3c7320(0x170)](),console[_0x3c7320(0x15e)](_0x3c7320(0x14a)),domainMonitoringService_1[_0x3c7320(0x174)][_0x3c7320(0x17c)](),console[_0x3c7320(0x15e)]('ðŸ§¹\x20Initializing\x20payment\x20cleanup\x20service...'),startPaymentCleanupScheduler(),app_1[_0x3c7320(0x156)][_0x3c7320(0x157)](config_1[_0x3c7320(0x150)][_0x3c7320(0x168)],'127.1.1.159',()=>{const _0x1bc713=_0x3c7320;console['log']('ðŸš€\x20Server\x20running\x20on\x20port\x20'+config_1['config'][_0x1bc713(0x168)]),console[_0x1bc713(0x15e)](_0x1bc713(0x155)+config_1[_0x1bc713(0x150)][_0x1bc713(0x166)]),console['log']('ðŸ“Š\x20Health\x20check:\x20http://localhost:'+config_1['config'][_0x1bc713(0x168)]+_0x1bc713(0x147));});}catch(_0x51c1e0){console[_0x3c7320(0x149)](_0x3c7320(0x151),_0x51c1e0),process[_0x3c7320(0x17a)](0x1);}}process['on'](a45_0x4e5ec5(0x178),async()=>{const _0x14c328=a45_0x4e5ec5;console[_0x14c328(0x15e)](_0x14c328(0x183)),stopPaymentCleanupScheduler(),currencyService_1[_0x14c328(0x180)]['stopPeriodicUpdates'](),coinToPayStatusService_1[_0x14c328(0x15b)][_0x14c328(0x159)](),domainMonitoringService_1[_0x14c328(0x174)]['stopMonitoring'](),telegramBotService_1[_0x14c328(0x154)][_0x14c328(0x17b)](),await database_1[_0x14c328(0x156)][_0x14c328(0x162)](),process[_0x14c328(0x17a)](0x0);}),process['on'](a45_0x4e5ec5(0x176),async()=>{const _0x202b6d=a45_0x4e5ec5;console['log'](_0x202b6d(0x183)),stopPaymentCleanupScheduler(),currencyService_1['currencyService'][_0x202b6d(0x16c)](),coinToPayStatusService_1[_0x202b6d(0x15b)]['stopPeriodicStatusCheck'](),domainMonitoringService_1[_0x202b6d(0x174)]['stopMonitoring'](),telegramBotService_1[_0x202b6d(0x154)][_0x202b6d(0x17b)](),await database_1[_0x202b6d(0x156)][_0x202b6d(0x162)](),process['exit'](0x0);}),startServer();