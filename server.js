'use strict';const a51_0x3290ed=a51_0x218a;(function(_0x28281a,_0x4d0469){const _0x2d7576=a51_0x218a,_0x42af86=_0x28281a();while(!![]){try{const _0x3d8665=-parseInt(_0x2d7576(0x153))/0x1*(parseInt(_0x2d7576(0x128))/0x2)+-parseInt(_0x2d7576(0x11c))/0x3*(parseInt(_0x2d7576(0x14c))/0x4)+-parseInt(_0x2d7576(0x138))/0x5*(-parseInt(_0x2d7576(0x150))/0x6)+parseInt(_0x2d7576(0x129))/0x7+-parseInt(_0x2d7576(0x118))/0x8*(-parseInt(_0x2d7576(0x132))/0x9)+parseInt(_0x2d7576(0x127))/0xa*(-parseInt(_0x2d7576(0x13d))/0xb)+-parseInt(_0x2d7576(0x121))/0xc*(parseInt(_0x2d7576(0x158))/0xd);if(_0x3d8665===_0x4d0469)break;else _0x42af86['push'](_0x42af86['shift']());}catch(_0x34d260){_0x42af86['push'](_0x42af86['shift']());}}}(a51_0x406f,0x7c078));var __importDefault=this&&this['__importDefault']||function(_0x469683){return _0x469683&&_0x469683['__esModule']?_0x469683:{'default':_0x469683};};function a51_0x218a(_0x4f140b,_0x3bac8d){_0x4f140b=_0x4f140b-0x117;const _0x406f16=a51_0x406f();let _0x218a09=_0x406f16[_0x4f140b];return _0x218a09;}Object[a51_0x3290ed(0x14d)](exports,a51_0x3290ed(0x14f),{'value':!![]});const app_1=__importDefault(require(a51_0x3290ed(0x142))),config_1=require('./config/config'),database_1=__importDefault(require(a51_0x3290ed(0x149))),telegramBotService_1=require(a51_0x3290ed(0x11a)),currencyService_1=require(a51_0x3290ed(0x14b)),coinToPayStatusService_1=require(a51_0x3290ed(0x131)),domainMonitoringService_1=require(a51_0x3290ed(0x143)),paymentCleanupService_1=require(a51_0x3290ed(0x13c));let paymentCleanupInterval=null;function startPaymentCleanupScheduler(){const _0x49583a=a51_0x3290ed,_0x5b823e=0x18,_0x18330e=_0x5b823e*0x3c*0x3c*0x3e8;console[_0x49583a(0x151)](_0x49583a(0x13b)+_0x5b823e+_0x49583a(0x15b)),setTimeout(async()=>{const _0x5678bf=_0x49583a;console['log'](_0x5678bf(0x124));try{await paymentCleanupService_1[_0x5678bf(0x152)][_0x5678bf(0x14e)](),console[_0x5678bf(0x151)](_0x5678bf(0x155));}catch(_0x579320){console['error'](_0x5678bf(0x14a),_0x579320);}},0x5*0x3c*0x3e8),paymentCleanupInterval=setInterval(async()=>{const _0x5213a1=_0x49583a;console['log'](_0x5213a1(0x15a));try{await paymentCleanupService_1[_0x5213a1(0x152)][_0x5213a1(0x14e)](),console[_0x5213a1(0x151)](_0x5213a1(0x119));}catch(_0x40e6dc){console[_0x5213a1(0x137)]('âŒ\x20Scheduled\x20cleanup\x20failed:',_0x40e6dc);}},_0x18330e);}function a51_0x406f(){const _0xcebcc1=['âœ…\x20Telegram\x20bot\x20@','ðŸŒ\x20Environment:\x20','error','5VaBrxi','port','startPeriodicStatusCheck','ðŸ•\x20Payment\x20cleanup\x20scheduled\x20to\x20run\x20every\x20','./services/paymentCleanupService','1936374HFJzfB','stopBot','currencyService','$disconnect','coinToPayStatusService','./app','./services/domainMonitoringService','domainMonitoringService','stopPeriodicStatusCheck','startMonitoring','getBotInfo','SIGTERM','./config/database','âŒ\x20Initial\x20cleanup\x20failed:','./services/currencyService','291340YqZujG','defineProperty','runCleanupWithReport','__esModule','5314002PdVsAe','log','paymentCleanupService','83649COLgDi','âœ…\x20Database\x20connected\x20successfully','âœ…\x20Initial\x20cleanup\x20completed\x20successfully','âš ï¸\x20Telegram\x20bot\x20is\x20not\x20configured','production','13169tuiLzC','default','ðŸ§¹\x20Running\x20scheduled\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','\x20hours','exit','2447768EqfXur','âœ…\x20Scheduled\x20cleanup\x20completed\x20successfully','./services/telegramBotService','ðŸ§¹\x20Initializing\x20payment\x20cleanup\x20service...','6McetMV','ðŸ›‘\x20Payment\x20cleanup\x20scheduler\x20stopped','nodeEnv','\x0aðŸ”„\x20Gracefully\x20shutting\x20down...','isActive','9708oilIRn','listen','telegramBotService','ðŸ§¹\x20Running\x20initial\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','stopPeriodicUpdates','127.1.1.159','10SVgRId','14LLNano','3018456XlMVwn','config','$connect','stopMonitoring','ðŸª™\x20Initializing\x20CoinToPay\x20status\x20checking\x20service...','âŒ\x20Failed\x20to\x20start\x20server:','username','SIGINT','./services/coinToPayStatusService','27kLfwLS','ðŸ”„\x20Initializing\x20currency\x20rates\x20service...','/api/health'];a51_0x406f=function(){return _0xcebcc1;};return a51_0x406f();}function stopPaymentCleanupScheduler(){const _0x489339=a51_0x3290ed;paymentCleanupInterval&&(clearInterval(paymentCleanupInterval),paymentCleanupInterval=null,console[_0x489339(0x151)](_0x489339(0x11d)));}async function startServer(){const _0x19c5c4=a51_0x3290ed;try{await database_1['default'][_0x19c5c4(0x12b)](),console['log'](_0x19c5c4(0x154));const _0x263bb1=telegramBotService_1['telegramBotService'][_0x19c5c4(0x147)]();_0x263bb1[_0x19c5c4(0x120)]?console[_0x19c5c4(0x151)](_0x19c5c4(0x135)+_0x263bb1[_0x19c5c4(0x12f)]+'\x20is\x20active'):console[_0x19c5c4(0x151)](_0x19c5c4(0x156));console[_0x19c5c4(0x151)](_0x19c5c4(0x133)),console[_0x19c5c4(0x151)](_0x19c5c4(0x12d)),coinToPayStatusService_1[_0x19c5c4(0x141)][_0x19c5c4(0x13a)](),console[_0x19c5c4(0x151)]('ðŸ”\x20Initializing\x20domain\x20monitoring\x20service...'),domainMonitoringService_1[_0x19c5c4(0x144)][_0x19c5c4(0x146)](),console[_0x19c5c4(0x151)](_0x19c5c4(0x11b)),startPaymentCleanupScheduler();config_1[_0x19c5c4(0x12a)][_0x19c5c4(0x11e)]===_0x19c5c4(0x157)?app_1['default']['listen'](config_1['config'][_0x19c5c4(0x139)],()=>{const _0x15bc70=_0x19c5c4;console[_0x15bc70(0x151)]('ðŸš€\x20Server\x20running\x20on\x20port\x20'+config_1[_0x15bc70(0x12a)][_0x15bc70(0x139)]),console['log'](_0x15bc70(0x136)+config_1[_0x15bc70(0x12a)][_0x15bc70(0x11e)]);}):app_1[_0x19c5c4(0x159)][_0x19c5c4(0x122)](config_1[_0x19c5c4(0x12a)][_0x19c5c4(0x139)],_0x19c5c4(0x126),()=>{const _0x33ed2e=_0x19c5c4;console[_0x33ed2e(0x151)]('ðŸš€\x20Server\x20running\x20on\x20port\x20'+config_1[_0x33ed2e(0x12a)][_0x33ed2e(0x139)]),console[_0x33ed2e(0x151)](_0x33ed2e(0x136)+config_1[_0x33ed2e(0x12a)][_0x33ed2e(0x11e)]),console[_0x33ed2e(0x151)]('ðŸ“Š\x20Health\x20check:\x20http://localhost:'+config_1['config'][_0x33ed2e(0x139)]+_0x33ed2e(0x134));});;}catch(_0x36bf82){console[_0x19c5c4(0x137)](_0x19c5c4(0x12e),_0x36bf82),process[_0x19c5c4(0x117)](0x1);}}process['on'](a51_0x3290ed(0x130),async()=>{const _0x226b88=a51_0x3290ed;console[_0x226b88(0x151)]('\x0aðŸ”„\x20Gracefully\x20shutting\x20down...'),stopPaymentCleanupScheduler(),currencyService_1[_0x226b88(0x13f)]['stopPeriodicUpdates'](),coinToPayStatusService_1['coinToPayStatusService']['stopPeriodicStatusCheck'](),domainMonitoringService_1[_0x226b88(0x144)][_0x226b88(0x12c)](),telegramBotService_1['telegramBotService'][_0x226b88(0x13e)](),await database_1[_0x226b88(0x159)][_0x226b88(0x140)](),process[_0x226b88(0x117)](0x0);}),process['on'](a51_0x3290ed(0x148),async()=>{const _0xcf40d9=a51_0x3290ed;console['log'](_0xcf40d9(0x11f)),stopPaymentCleanupScheduler(),currencyService_1[_0xcf40d9(0x13f)][_0xcf40d9(0x125)](),coinToPayStatusService_1[_0xcf40d9(0x141)][_0xcf40d9(0x145)](),domainMonitoringService_1[_0xcf40d9(0x144)][_0xcf40d9(0x12c)](),telegramBotService_1[_0xcf40d9(0x123)][_0xcf40d9(0x13e)](),await database_1['default']['$disconnect'](),process[_0xcf40d9(0x117)](0x0);}),startServer();