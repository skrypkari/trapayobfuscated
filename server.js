'use strict';function a47_0x3c6f(){const _0x51503e=['./services/currencyService','ðŸŒ\x20Environment:\x20','stopBot','422241NifvnH','âŒ\x20Scheduled\x20cleanup\x20failed:','40sDrZRO','./services/paymentCleanupService','getBotInfo','516579ZVWffK','startPeriodicStatusCheck','./config/database','ðŸš€\x20Server\x20running\x20on\x20port\x20','__esModule','listen','\x20is\x20active','./services/telegramBotService','error','nodeEnv','ðŸ§¹\x20Running\x20initial\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','SIGTERM','telegramBotService','currencyService','ðŸª™\x20Initializing\x20CoinToPay\x20status\x20checking\x20service...','$disconnect','startMonitoring','runCleanupWithReport','2836ovekfC','stopMonitoring','stopPeriodicUpdates','ðŸ§¹\x20Running\x20scheduled\x20payment\x20cleanup\x20(PROCESSING\x20+\x20PENDING)...','\x20hours','âœ…\x20Database\x20connected\x20successfully','7761825AYQzqb','\x0aðŸ”„\x20Gracefully\x20shutting\x20down...','./app','exit','default','coinToPayStatusService','ðŸ”„\x20Initializing\x20currency\x20rates\x20service...','ðŸ›‘\x20Payment\x20cleanup\x20scheduler\x20stopped','âŒ\x20Failed\x20to\x20start\x20server:','2142158Luxmvm','production','ðŸ•\x20Payment\x20cleanup\x20scheduled\x20to\x20run\x20every\x20','defineProperty','866985NkAkyr','5765NpZCwu','./config/config','SIGINT','ðŸ§¹\x20Initializing\x20payment\x20cleanup\x20service...','config','port','stopPeriodicStatusCheck','/api/health','log','1955838uClseS','domainMonitoringService'];a47_0x3c6f=function(){return _0x51503e;};return a47_0x3c6f();}const a47_0x3f958a=a47_0x3a63;(function(_0xf1aa09,_0x1e841d){const _0x1ce9e0=a47_0x3a63,_0xfa4708=_0xf1aa09();while(!![]){try{const _0x48a65d=parseInt(_0x1ce9e0(0x1ce))/0x1+parseInt(_0x1ce9e0(0x1f4))/0x2+-parseInt(_0x1ce9e0(0x1d3))/0x3+-parseInt(_0x1ce9e0(0x1e5))/0x4*(parseInt(_0x1ce9e0(0x1f9))/0x5)+parseInt(_0x1ce9e0(0x202))/0x6+-parseInt(_0x1ce9e0(0x1f8))/0x7*(-parseInt(_0x1ce9e0(0x1d0))/0x8)+-parseInt(_0x1ce9e0(0x1eb))/0x9;if(_0x48a65d===_0x1e841d)break;else _0xfa4708['push'](_0xfa4708['shift']());}catch(_0x2187c8){_0xfa4708['push'](_0xfa4708['shift']());}}}(a47_0x3c6f,0x8f2e9));var __importDefault=this&&this['__importDefault']||function(_0x9357c3){return _0x9357c3&&_0x9357c3['__esModule']?_0x9357c3:{'default':_0x9357c3};};Object[a47_0x3f958a(0x1f7)](exports,a47_0x3f958a(0x1d7),{'value':!![]});const app_1=__importDefault(require(a47_0x3f958a(0x1ed))),config_1=require(a47_0x3f958a(0x1fa)),database_1=__importDefault(require(a47_0x3f958a(0x1d5))),telegramBotService_1=require(a47_0x3f958a(0x1da)),currencyService_1=require(a47_0x3f958a(0x204)),coinToPayStatusService_1=require('./services/coinToPayStatusService'),domainMonitoringService_1=require('./services/domainMonitoringService'),paymentCleanupService_1=require(a47_0x3f958a(0x1d1));let paymentCleanupInterval=null;function startPaymentCleanupScheduler(){const _0x7fc50c=a47_0x3f958a,_0x51158b=0x18,_0x424176=_0x51158b*0x3c*0x3c*0x3e8;console[_0x7fc50c(0x201)](_0x7fc50c(0x1f6)+_0x51158b+_0x7fc50c(0x1e9)),setTimeout(async()=>{const _0x6ff799=_0x7fc50c;console['log'](_0x6ff799(0x1dd));try{await paymentCleanupService_1['paymentCleanupService']['runCleanupWithReport'](),console[_0x6ff799(0x201)]('âœ…\x20Initial\x20cleanup\x20completed\x20successfully');}catch(_0x85e429){console['error']('âŒ\x20Initial\x20cleanup\x20failed:',_0x85e429);}},0x5*0x3c*0x3e8),paymentCleanupInterval=setInterval(async()=>{const _0x35e85c=_0x7fc50c;console[_0x35e85c(0x201)](_0x35e85c(0x1e8));try{await paymentCleanupService_1['paymentCleanupService'][_0x35e85c(0x1e4)](),console[_0x35e85c(0x201)]('âœ…\x20Scheduled\x20cleanup\x20completed\x20successfully');}catch(_0x4baae7){console[_0x35e85c(0x1db)](_0x35e85c(0x1cf),_0x4baae7);}},_0x424176);}function a47_0x3a63(_0x4d29e3,_0xe4c200){_0x4d29e3=_0x4d29e3-0x1cc;const _0x3c6f96=a47_0x3c6f();let _0x3a6344=_0x3c6f96[_0x4d29e3];return _0x3a6344;}function stopPaymentCleanupScheduler(){const _0x1f6306=a47_0x3f958a;paymentCleanupInterval&&(clearInterval(paymentCleanupInterval),paymentCleanupInterval=null,console[_0x1f6306(0x201)](_0x1f6306(0x1f2)));}async function startServer(){const _0x106a50=a47_0x3f958a;try{await database_1[_0x106a50(0x1ef)]['$connect'](),console[_0x106a50(0x201)](_0x106a50(0x1ea));const _0x12361a=telegramBotService_1[_0x106a50(0x1df)][_0x106a50(0x1d2)]();_0x12361a['isActive']?console[_0x106a50(0x201)]('âœ…\x20Telegram\x20bot\x20@'+_0x12361a['username']+_0x106a50(0x1d9)):console[_0x106a50(0x201)]('âš ï¸\x20Telegram\x20bot\x20is\x20not\x20configured');console[_0x106a50(0x201)](_0x106a50(0x1f1)),console['log'](_0x106a50(0x1e1)),coinToPayStatusService_1['coinToPayStatusService'][_0x106a50(0x1d4)](),console[_0x106a50(0x201)]('ðŸ”\x20Initializing\x20domain\x20monitoring\x20service...'),domainMonitoringService_1[_0x106a50(0x203)][_0x106a50(0x1e3)](),console['log'](_0x106a50(0x1fc)),startPaymentCleanupScheduler();config_1[_0x106a50(0x1fd)][_0x106a50(0x1dc)]===_0x106a50(0x1f5)?app_1[_0x106a50(0x1ef)][_0x106a50(0x1d8)](config_1[_0x106a50(0x1fd)][_0x106a50(0x1fe)],()=>{const _0x5f2903=_0x106a50;console['log'](_0x5f2903(0x1d6)+config_1[_0x5f2903(0x1fd)][_0x5f2903(0x1fe)]),console[_0x5f2903(0x201)](_0x5f2903(0x1cc)+config_1[_0x5f2903(0x1fd)][_0x5f2903(0x1dc)]);}):app_1['default'][_0x106a50(0x1d8)](config_1[_0x106a50(0x1fd)][_0x106a50(0x1fe)],'127.1.1.159',()=>{const _0xd5577e=_0x106a50;console[_0xd5577e(0x201)](_0xd5577e(0x1d6)+config_1[_0xd5577e(0x1fd)][_0xd5577e(0x1fe)]),console[_0xd5577e(0x201)](_0xd5577e(0x1cc)+config_1['config'][_0xd5577e(0x1dc)]),console[_0xd5577e(0x201)]('ðŸ“Š\x20Health\x20check:\x20http://localhost:'+config_1['config'][_0xd5577e(0x1fe)]+_0xd5577e(0x200));});;}catch(_0x34efb7){console[_0x106a50(0x1db)](_0x106a50(0x1f3),_0x34efb7),process[_0x106a50(0x1ee)](0x1);}}process['on'](a47_0x3f958a(0x1fb),async()=>{const _0x19eaa1=a47_0x3f958a;console[_0x19eaa1(0x201)](_0x19eaa1(0x1ec)),stopPaymentCleanupScheduler(),currencyService_1[_0x19eaa1(0x1e0)][_0x19eaa1(0x1e7)](),coinToPayStatusService_1[_0x19eaa1(0x1f0)][_0x19eaa1(0x1ff)](),domainMonitoringService_1[_0x19eaa1(0x203)][_0x19eaa1(0x1e6)](),telegramBotService_1['telegramBotService'][_0x19eaa1(0x1cd)](),await database_1[_0x19eaa1(0x1ef)][_0x19eaa1(0x1e2)](),process['exit'](0x0);}),process['on'](a47_0x3f958a(0x1de),async()=>{const _0x3005dc=a47_0x3f958a;console[_0x3005dc(0x201)](_0x3005dc(0x1ec)),stopPaymentCleanupScheduler(),currencyService_1[_0x3005dc(0x1e0)][_0x3005dc(0x1e7)](),coinToPayStatusService_1[_0x3005dc(0x1f0)]['stopPeriodicStatusCheck'](),domainMonitoringService_1[_0x3005dc(0x203)][_0x3005dc(0x1e6)](),telegramBotService_1[_0x3005dc(0x1df)]['stopBot'](),await database_1[_0x3005dc(0x1ef)]['$disconnect'](),process[_0x3005dc(0x1ee)](0x0);}),startServer();