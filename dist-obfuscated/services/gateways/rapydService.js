'use strict';const a42_0x1ed198=a42_0x3e7b;(function(_0x526e94,_0x4f18ba){const _0x462aab=a42_0x3e7b,_0x1ba752=_0x526e94();while(!![]){try{const _0x2c4d22=-parseInt(_0x462aab(0x1be))/0x1+parseInt(_0x462aab(0x1a5))/0x2*(parseInt(_0x462aab(0x1cd))/0x3)+-parseInt(_0x462aab(0x1c4))/0x4+parseInt(_0x462aab(0x1d6))/0x5+-parseInt(_0x462aab(0x1d9))/0x6*(parseInt(_0x462aab(0x1d1))/0x7)+-parseInt(_0x462aab(0x1c8))/0x8*(parseInt(_0x462aab(0x182))/0x9)+-parseInt(_0x462aab(0x1c2))/0xa*(-parseInt(_0x462aab(0x181))/0xb);if(_0x2c4d22===_0x4f18ba)break;else _0x1ba752['push'](_0x1ba752['shift']());}catch(_0x1f9dc6){_0x1ba752['push'](_0x1ba752['shift']());}}}(a42_0x1f4d,0xa374b));Object[a42_0x1ed198(0x1bb)](exports,a42_0x1ed198(0x1b2),{'value':!![]}),exports['RapydService']=void 0x0;function a42_0x3e7b(_0x1e136d,_0x18c830){const _0x1f4dd5=a42_0x1f4d();return a42_0x3e7b=function(_0x3e7b6e,_0x1727da){_0x3e7b6e=_0x3e7b6e-0x17a;let _0x4b1aeb=_0x1f4dd5[_0x3e7b6e];return _0x4b1aeb;},a42_0x3e7b(_0x1e136d,_0x18c830);}function a42_0x1f4d(){const _0x2cdc4b=['PAYMENT_CANCELED','Error\x20stack:','Status\x20Text:','logWhiteDomainRequest','CAN','message','HTTP\x20error!\x20status:\x20','/v1/hosted/payment_links','log','FAILED','gb_mastercard_card','sell','now',',\x20body:\x20','logWhiteDomainResponse','Redirect\x20URL:','Parsed\x20Result:','üí≥\x20Payment\x20Methods:\x20gb_visa_card,\x20gb_mastercard_card','Payment\x20Link\x20ID:','NEW','Invalid\x20response\x20from\x20Rapyd\x20API:\x20missing\x20id\x20or\x20redirect_url','Error\x20Message:','Full\x20Error\x20Data:','Processing\x20Rapyd\x20webhook:','apiUrl','HTTP\x20Status:','logWhiteDomainError','Response\x20Time:','===\x20RAPYD\x20API\x20INCOMPLETE\x20RESPONSE\x20===','===\x20RAPYD\x20SERVICE\x20ERROR\x20===','üá¨üáß\x20Using\x20GB\x20(Britain)\x20as\x20country\x20for\x20Rapyd\x20payment\x20link','PAYMENT_EXPIRED','Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20Unknown\x20error','949028LGlMYT','https://tesoft.uk/gateway/rapyd/','Unknown\x20error','POST','stack','Request\x20Body\x20(Updated\x20Format):','../loggerService','loggerService','entries','===\x20RAPYD\x20API\x20REQUEST\x20(White\x20Domain\x20-\x20Updated\x20Format)\x20===','PAID','text','Error\x20Code:','__esModule','Rapyd\x20API\x20error:\x20','ERR','amount','Incomplete\x20response:\x20missing\x20id\x20or\x20redirect_url','\x20(always\x20GB\x20for\x20Rapyd)','processWebhook','error_code','type','defineProperty','Unknown\x20error\x20from\x20Rapyd\x20API','HTTP\x20','1018812kEOvbI','===\x20RAPYD\x20SUCCESS\x20===','redirect_url','stringify','3193760GEbgiq','Response\x20data:','2742976cZVRCn','===\x20RAPYD\x20API\x20RESPONSE\x20(White\x20Domain)\x20===','fromEntries','https://tesoft.uk/gateway/success.php?id=','24GzdoYl','toUpperCase','EXP','merchant_reference_id','application/json','3nyhctQ','PAYMENT_COMPLETED','paid','requested_currency','7UgjcWR','URL:','rapyd','error','https://tesoft.uk/gateway/fail.php?id=','1051265nQtjjS','CLO','/v1/hosted/payment_links/','4803906OstGEj','Failed\x20to\x20verify\x20Rapyd\x20payment:\x20','SUCCESS','GET','JSON\x20Parse\x20Error:\x20','Raw\x20Response\x20Body:','status','Response\x20Body:','):\x20','Missing\x20id\x20or\x20redirect_url\x20in\x20response','createPaymentLink','PAYMENT_FAILED','parse','üá¨üáß\x20Country:\x20','Status:','data','verifyPayment','EXPIRED','currency','UNKNOWN','PENDING','Failed\x20to\x20parse\x20JSON\x20response:','99ueVXCY','1153287INoGCG','Business\x20Error\x20('];a42_0x1f4d=function(){return _0x2cdc4b;};return a42_0x1f4d();}const loggerService_1=require(a42_0x1ed198(0x1ab));class RapydService{constructor(){const _0x54c008=a42_0x1ed198;this[_0x54c008(0x19c)]=_0x54c008(0x1a6),console[_0x54c008(0x18c)]('üåê\x20Rapyd\x20service\x20initialized\x20with\x20white\x20domain\x20proxy');}async[a42_0x1ed198(0x1e3)](_0x1ef962){const _0x406a64=a42_0x1ed198,{orderId:_0x498feb,orderName:_0x2989eb,amount:_0xc421a1,currency:_0x3891ad,usage:_0x3fa1fc,maxPayments:_0x39ccd4,successUrl:_0x28aa8f,failUrl:_0x1a8e5b}=_0x1ef962,_0x2f6288=_0x3891ad[_0x406a64(0x1c9)](),_0x7e65bf='GB';console[_0x406a64(0x18c)](_0x406a64(0x1a2));const _0x3dc1bf=_0x406a64(0x1c7)+_0x498feb,_0x27c733=_0x406a64(0x1d5)+_0x498feb,_0x529cf4={'amount':_0xc421a1,'currency':_0x2f6288,'cancel_checkout_url':_0x27c733,'complete_checkout_url':_0x3dc1bf,'complete_payment_url':_0x3dc1bf,'merchant_reference_id':_0x498feb,'description':'ORDER:\x20'+_0x498feb,'country':'GB','payment_method_types_include':['gb_visa_card',_0x406a64(0x18e)],'custom_elements':{'display_description':!![]}};_0x2f6288!=='EUR'&&(_0x529cf4[_0x406a64(0x1d0)]=_0x2f6288,_0x529cf4['fixed_side']=_0x406a64(0x18f));const _0x3d97c2=Date[_0x406a64(0x190)]();try{console[_0x406a64(0x18c)](_0x406a64(0x1ae)),console[_0x406a64(0x18c)](_0x406a64(0x1d2),this[_0x406a64(0x19c)]),console[_0x406a64(0x18c)](_0x406a64(0x1aa),JSON[_0x406a64(0x1c1)](_0x529cf4,null,0x2)),console[_0x406a64(0x18c)](_0x406a64(0x1e6)+_0x7e65bf+_0x406a64(0x1b7)),console[_0x406a64(0x18c)](_0x406a64(0x195)),loggerService_1[_0x406a64(0x1ac)][_0x406a64(0x187)](_0x406a64(0x1d3),_0x406a64(0x18b),_0x406a64(0x1a8),_0x529cf4);const _0x4bd413=await fetch(this[_0x406a64(0x19c)],{'method':_0x406a64(0x1a8),'headers':{'Content-Type':_0x406a64(0x1cc),'User-Agent':'TesSoft\x20Payment\x20System/1.0'},'body':JSON[_0x406a64(0x1c1)](_0x529cf4)}),_0x192ccb=Date[_0x406a64(0x190)]()-_0x3d97c2;console['log'](_0x406a64(0x1c5)),console[_0x406a64(0x18c)](_0x406a64(0x1e7),_0x4bd413[_0x406a64(0x1df)]),console[_0x406a64(0x18c)](_0x406a64(0x186),_0x4bd413['statusText']),console[_0x406a64(0x18c)]('Headers:',Object[_0x406a64(0x1c6)](_0x4bd413['headers'][_0x406a64(0x1ad)]())),console[_0x406a64(0x18c)](_0x406a64(0x19f),_0x192ccb+'ms');const _0x3bbb22=await _0x4bd413[_0x406a64(0x1b0)]();console['log'](_0x406a64(0x1de),_0x3bbb22);if(!_0x4bd413['ok']){console[_0x406a64(0x1d4)]('===\x20RAPYD\x20API\x20ERROR\x20==='),console[_0x406a64(0x1d4)](_0x406a64(0x19d),_0x4bd413[_0x406a64(0x1df)]),console[_0x406a64(0x1d4)](_0x406a64(0x1e0),_0x3bbb22),loggerService_1['loggerService'][_0x406a64(0x192)](_0x406a64(0x1d3),'/v1/hosted/payment_links',_0x4bd413[_0x406a64(0x1df)],_0x3bbb22,_0x192ccb),loggerService_1[_0x406a64(0x1ac)][_0x406a64(0x19e)](_0x406a64(0x1d3),_0x406a64(0x18b),_0x406a64(0x1bd)+_0x4bd413[_0x406a64(0x1df)]+':\x20'+_0x3bbb22);throw new Error(_0x406a64(0x18a)+_0x4bd413['status']+_0x406a64(0x191)+_0x3bbb22);}let _0x1e8fb8;try{_0x1e8fb8=JSON[_0x406a64(0x1e5)](_0x3bbb22);}catch(_0x5f7b15){console[_0x406a64(0x1d4)](_0x406a64(0x180),_0x5f7b15),loggerService_1[_0x406a64(0x1ac)][_0x406a64(0x19e)](_0x406a64(0x1d3),_0x406a64(0x18b),_0x406a64(0x1dd)+_0x5f7b15);throw new Error('Invalid\x20JSON\x20response\x20from\x20Rapyd\x20API:\x20'+_0x3bbb22);}console[_0x406a64(0x18c)]('===\x20PARSED\x20RAPYD\x20RESPONSE\x20==='),console['log'](_0x406a64(0x194),JSON[_0x406a64(0x1c1)](_0x1e8fb8,null,0x2)),loggerService_1[_0x406a64(0x1ac)][_0x406a64(0x192)](_0x406a64(0x1d3),'/v1/hosted/payment_links',_0x4bd413[_0x406a64(0x1df)],_0x1e8fb8,_0x192ccb);if(_0x1e8fb8['status']?.[_0x406a64(0x1df)]!=='SUCCESS'){const _0x3cc949=_0x1e8fb8[_0x406a64(0x1df)]?.[_0x406a64(0x189)]||_0x406a64(0x1bc),_0x425f6d=_0x1e8fb8['status']?.[_0x406a64(0x1b9)]||_0x406a64(0x17e);console[_0x406a64(0x1d4)]('===\x20RAPYD\x20API\x20BUSINESS\x20ERROR\x20==='),console[_0x406a64(0x1d4)](_0x406a64(0x1b1),_0x425f6d),console[_0x406a64(0x1d4)](_0x406a64(0x199),_0x3cc949),console[_0x406a64(0x1d4)](_0x406a64(0x19a),_0x1e8fb8[_0x406a64(0x1df)]),loggerService_1[_0x406a64(0x1ac)][_0x406a64(0x19e)]('rapyd',_0x406a64(0x18b),_0x406a64(0x183)+_0x425f6d+'):\x20'+_0x3cc949);throw new Error('Rapyd\x20API\x20error\x20('+_0x425f6d+_0x406a64(0x1e1)+_0x3cc949);}if(!_0x1e8fb8[_0x406a64(0x17a)]?.['id']||!_0x1e8fb8['data']?.['redirect_url']){console[_0x406a64(0x1d4)](_0x406a64(0x1a0)),console[_0x406a64(0x1d4)](_0x406a64(0x1e2)),console[_0x406a64(0x1d4)](_0x406a64(0x1c3),_0x1e8fb8['data']),loggerService_1['loggerService'][_0x406a64(0x19e)](_0x406a64(0x1d3),'/v1/hosted/payment_links',_0x406a64(0x1b6));throw new Error(_0x406a64(0x198));}return console[_0x406a64(0x18c)](_0x406a64(0x1bf)),console[_0x406a64(0x18c)](_0x406a64(0x196),_0x1e8fb8[_0x406a64(0x17a)]['id']),console[_0x406a64(0x18c)](_0x406a64(0x193),_0x1e8fb8['data'][_0x406a64(0x1c0)]),console[_0x406a64(0x18c)]('üá¨üáß\x20Country\x20used:\x20'+_0x7e65bf+'\x20(GB\x20-\x20Britain)'),console['log'](_0x406a64(0x195)),{'gateway_payment_id':_0x1e8fb8[_0x406a64(0x17a)]['id'],'payment_url':_0x1e8fb8['data'][_0x406a64(0x1c0)]};}catch(_0x37fd55){console['error'](_0x406a64(0x1a1)),console[_0x406a64(0x1d4)]('Error\x20details:',_0x37fd55),loggerService_1[_0x406a64(0x1ac)][_0x406a64(0x19e)](_0x406a64(0x1d3),_0x406a64(0x18b),_0x37fd55);if(_0x37fd55 instanceof Error){console['error']('Error\x20message:',_0x37fd55[_0x406a64(0x189)]),console['error'](_0x406a64(0x185),_0x37fd55[_0x406a64(0x1a9)]);throw new Error('Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20'+_0x37fd55['message']);}throw new Error(_0x406a64(0x1a4));}}async[a42_0x1ed198(0x17b)](_0x878233){const _0x61cbf2=a42_0x1ed198,_0x4459b9=Date[_0x61cbf2(0x190)]();try{loggerService_1[_0x61cbf2(0x1ac)]['logWhiteDomainRequest'](_0x61cbf2(0x1d3),_0x61cbf2(0x1d8)+_0x878233,'GET',{});const _0xa8dcf8=await fetch(this[_0x61cbf2(0x19c)]+'/'+_0x878233,{'method':_0x61cbf2(0x1dc),'headers':{'Content-Type':_0x61cbf2(0x1cc),'User-Agent':'TesSoft\x20Payment\x20System/1.0'}}),_0x5835ac=Date['now']()-_0x4459b9;if(!_0xa8dcf8['ok']){const _0x44b1a1=await _0xa8dcf8['text']();loggerService_1[_0x61cbf2(0x1ac)][_0x61cbf2(0x192)](_0x61cbf2(0x1d3),_0x61cbf2(0x1d8)+_0x878233,_0xa8dcf8['status'],_0x44b1a1,_0x5835ac);throw new Error(_0x61cbf2(0x18a)+_0xa8dcf8['status']);}const _0x150acc=await _0xa8dcf8['json']();loggerService_1['loggerService']['logWhiteDomainResponse']('rapyd',_0x61cbf2(0x1d8)+_0x878233,_0xa8dcf8[_0x61cbf2(0x1df)],_0x150acc,_0x5835ac);if(_0x150acc[_0x61cbf2(0x1df)]?.['status']!==_0x61cbf2(0x1db)){loggerService_1[_0x61cbf2(0x1ac)]['logWhiteDomainError'](_0x61cbf2(0x1d3),'/v1/hosted/payment_links/'+_0x878233,_0x61cbf2(0x1b3)+(_0x150acc[_0x61cbf2(0x1df)]?.[_0x61cbf2(0x189)]||_0x61cbf2(0x1a7)));throw new Error(_0x61cbf2(0x1b3)+(_0x150acc['status']?.[_0x61cbf2(0x189)]||_0x61cbf2(0x1a7)));}let _0x3ac8c0=_0x61cbf2(0x17f);if(_0x150acc[_0x61cbf2(0x17a)]?.[_0x61cbf2(0x1df)])switch(_0x150acc[_0x61cbf2(0x17a)][_0x61cbf2(0x1df)][_0x61cbf2(0x1c9)]()){case _0x61cbf2(0x1d7):_0x3ac8c0='PAID';break;case _0x61cbf2(0x188):_0x3ac8c0=_0x61cbf2(0x18d);break;case _0x61cbf2(0x1ca):_0x3ac8c0='EXPIRED';break;case _0x61cbf2(0x1b4):_0x3ac8c0=_0x61cbf2(0x18d);break;case _0x61cbf2(0x197):case'ACT':default:_0x3ac8c0=_0x61cbf2(0x17f);break;}return{'status':_0x3ac8c0,'amount':_0x150acc[_0x61cbf2(0x17a)]?.[_0x61cbf2(0x1b5)],'currency':_0x150acc[_0x61cbf2(0x17a)]?.[_0x61cbf2(0x17d)]};}catch(_0x506e65){console[_0x61cbf2(0x1d4)]('Rapyd\x20payment\x20verification\x20error:',_0x506e65),loggerService_1['loggerService'][_0x61cbf2(0x19e)](_0x61cbf2(0x1d3),_0x61cbf2(0x1d8)+_0x878233,_0x506e65);throw new Error(_0x61cbf2(0x1da)+(_0x506e65 instanceof Error?_0x506e65[_0x61cbf2(0x189)]:_0x61cbf2(0x1a7)));}}async[a42_0x1ed198(0x1b8)](_0x1b08c1){const _0x180811=a42_0x1ed198;console['log'](_0x180811(0x19b),_0x1b08c1);let _0x5c568b=_0x180811(0x17f);switch(_0x1b08c1[_0x180811(0x1ba)]?.[_0x180811(0x1c9)]()){case _0x180811(0x1ce):_0x1b08c1[_0x180811(0x17a)]?.['paid']===!![]&&_0x1b08c1[_0x180811(0x17a)]?.[_0x180811(0x1df)]===_0x180811(0x1d7)?_0x5c568b=_0x180811(0x1af):_0x5c568b=_0x180811(0x17f);break;case _0x180811(0x184):_0x5c568b=_0x180811(0x18d);break;case _0x180811(0x1a3):_0x5c568b=_0x180811(0x17c);break;case _0x180811(0x1e4):_0x5c568b=_0x180811(0x18d);break;default:switch(_0x1b08c1[_0x180811(0x17a)]?.['status']?.['toUpperCase']()){case'CLO':_0x1b08c1[_0x180811(0x17a)]?.[_0x180811(0x1cf)]===!![]?_0x5c568b=_0x180811(0x1af):_0x5c568b='FAILED';break;case'CAN':_0x5c568b=_0x180811(0x18d);break;case _0x180811(0x1ca):_0x5c568b=_0x180811(0x17c);break;case _0x180811(0x1b4):_0x5c568b=_0x180811(0x18d);break;case'NEW':case'ACT':default:_0x5c568b='PENDING';break;}break;}return{'paymentId':_0x1b08c1[_0x180811(0x17a)]?.[_0x180811(0x1cb)]||'','status':_0x5c568b,'amount':_0x1b08c1[_0x180811(0x17a)]?.[_0x180811(0x1b5)],'currency':_0x1b08c1[_0x180811(0x17a)]?.[_0x180811(0x17d)]};}}exports['RapydService']=RapydService;