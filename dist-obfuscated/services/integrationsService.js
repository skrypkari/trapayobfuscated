'use strict';const a43_0x45c530=a43_0x529c;(function(_0x16341c,_0x6cd31e){const _0x893f1a=a43_0x529c,_0x1a78f7=_0x16341c();while(!![]){try{const _0x426702=parseInt(_0x893f1a(0x1bd))/0x1+-parseInt(_0x893f1a(0x1b8))/0x2+parseInt(_0x893f1a(0x1ad))/0x3*(-parseInt(_0x893f1a(0x1c6))/0x4)+parseInt(_0x893f1a(0x1ba))/0x5*(-parseInt(_0x893f1a(0x1ae))/0x6)+parseInt(_0x893f1a(0x1a8))/0x7*(parseInt(_0x893f1a(0x1c1))/0x8)+parseInt(_0x893f1a(0x1b6))/0x9*(-parseInt(_0x893f1a(0x1b9))/0xa)+parseInt(_0x893f1a(0x1c3))/0xb*(parseInt(_0x893f1a(0x1c0))/0xc);if(_0x426702===_0x6cd31e)break;else _0x1a78f7['push'](_0x1a78f7['shift']());}catch(_0x37708d){_0x1a78f7['push'](_0x1a78f7['shift']());}}}(a43_0x3943,0x33446));function a43_0x3943(){const _0x1d2780=['shopSettings','3xXsqLQ','86682eIAPFN','Shop\x20settings\x20not\x20found','defineProperty','__esModule','parseWebhookEvents','updateWebhookSettings','__importDefault','ensureSettingsExist','120915RLMcMN','default','92210GyIjkr','50kfkvJB','35PCxKmU','create','update','223391BUZWsb','isArray','getIntegrations','4544184kDSQrv','3904fUDTKX','webhookUrl','11BeMYnD','findUnique','parse','1087432vbKCbb','string','1351QVcPDD','../config/database','IntegrationsService','webhookEvents'];a43_0x3943=function(){return _0x1d2780;};return a43_0x3943();}function a43_0x529c(_0x20e239,_0x370ae6){const _0x394304=a43_0x3943();return a43_0x529c=function(_0x529c14,_0x102397){_0x529c14=_0x529c14-0x1a7;let _0x59051f=_0x394304[_0x529c14];return _0x59051f;},a43_0x529c(_0x20e239,_0x370ae6);}var __importDefault=this&&this[a43_0x45c530(0x1b4)]||function(_0x40517b){const _0x5b4487=a43_0x45c530;return _0x40517b&&_0x40517b[_0x5b4487(0x1b1)]?_0x40517b:{'default':_0x40517b};};Object[a43_0x45c530(0x1b0)](exports,a43_0x45c530(0x1b1),{'value':!![]}),exports[a43_0x45c530(0x1aa)]=void 0x0;const database_1=__importDefault(require(a43_0x45c530(0x1a9)));class IntegrationsService{[a43_0x45c530(0x1b2)](_0x58dd10){const _0x391f5a=a43_0x45c530;if(!_0x58dd10)return[];if(Array['isArray'](_0x58dd10))return _0x58dd10;if(typeof _0x58dd10===_0x391f5a(0x1a7))try{const _0x35b9c8=JSON[_0x391f5a(0x1c5)](_0x58dd10);return Array[_0x391f5a(0x1be)](_0x35b9c8)?_0x35b9c8:[];}catch{return[];}return[];}async[a43_0x45c530(0x1bf)](_0x344dc2){const _0x393325=a43_0x45c530;await this[_0x393325(0x1b5)](_0x344dc2);const _0x118cca=await database_1['default'][_0x393325(0x1ac)][_0x393325(0x1c4)]({'where':{'shopId':_0x344dc2},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x118cca)throw new Error(_0x393325(0x1af));return{'webhook':{'url':_0x118cca[_0x393325(0x1c2)],'events':this['parseWebhookEvents'](_0x118cca[_0x393325(0x1ab)])}};}async[a43_0x45c530(0x1b3)](_0x3bc0fb,_0x1ec241){const _0x5045bc=a43_0x45c530;await this[_0x5045bc(0x1b5)](_0x3bc0fb);const _0x17763b={};_0x1ec241[_0x5045bc(0x1c2)]!==undefined&&(_0x17763b[_0x5045bc(0x1c2)]=_0x1ec241[_0x5045bc(0x1c2)]||null),_0x1ec241[_0x5045bc(0x1ab)]!==undefined&&(_0x17763b['webhookEvents']=_0x1ec241[_0x5045bc(0x1ab)]||[]),await database_1['default'][_0x5045bc(0x1ac)][_0x5045bc(0x1bc)]({'where':{'shopId':_0x3bc0fb},'data':_0x17763b});}async[a43_0x45c530(0x1b5)](_0x4ad292){const _0x174862=a43_0x45c530,_0x558cd7=await database_1[_0x174862(0x1b7)][_0x174862(0x1ac)][_0x174862(0x1c4)]({'where':{'shopId':_0x4ad292}});!_0x558cd7&&await database_1[_0x174862(0x1b7)][_0x174862(0x1ac)][_0x174862(0x1bb)]({'data':{'shopId':_0x4ad292}});}}exports[a43_0x45c530(0x1aa)]=IntegrationsService;