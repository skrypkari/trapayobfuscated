'use strict';const a16_0x4d4c89=a16_0x2bcf;(function(_0x2c711c,_0x98995f){const _0x4cf41f=a16_0x2bcf,_0x297870=_0x2c711c();while(!![]){try{const _0xda2e3a=-parseInt(_0x4cf41f(0x99))/0x1+parseInt(_0x4cf41f(0x95))/0x2*(parseInt(_0x4cf41f(0x9c))/0x3)+parseInt(_0x4cf41f(0x79))/0x4*(-parseInt(_0x4cf41f(0x84))/0x5)+-parseInt(_0x4cf41f(0x7b))/0x6*(-parseInt(_0x4cf41f(0x8b))/0x7)+-parseInt(_0x4cf41f(0x9b))/0x8*(parseInt(_0x4cf41f(0x92))/0x9)+-parseInt(_0x4cf41f(0x90))/0xa*(parseInt(_0x4cf41f(0x9a))/0xb)+parseInt(_0x4cf41f(0x83))/0xc;if(_0xda2e3a===_0x98995f)break;else _0x297870['push'](_0x297870['shift']());}catch(_0x511a63){_0x297870['push'](_0x297870['shift']());}}}(a16_0x535f,0xb0596));var __importDefault=this&&this[a16_0x4d4c89(0x87)]||function(_0x4c4847){return _0x4c4847&&_0x4c4847['__esModule']?_0x4c4847:{'default':_0x4c4847};};Object[a16_0x4d4c89(0x80)](exports,a16_0x4d4c89(0x7a),{'value':!![]}),exports[a16_0x4d4c89(0x7e)]=exports['requireShop']=exports[a16_0x4d4c89(0x8c)]=exports[a16_0x4d4c89(0x98)]=void 0x0;const jsonwebtoken_1=__importDefault(require('jsonwebtoken')),config_1=require(a16_0x4d4c89(0x93)),tokenBlacklistService_1=require(a16_0x4d4c89(0x88)),authenticateToken=(_0x45ad78,_0x4f5ee0,_0x4dd069)=>{const _0x4c681c=a16_0x4d4c89,_0x46e68f=_0x45ad78['headers']['authorization'],_0x5c44dc=_0x46e68f&&_0x46e68f[_0x4c681c(0x86)]('\x20')[0x1];if(!_0x5c44dc)return _0x4f5ee0[_0x4c681c(0x85)](0x191)[_0x4c681c(0x97)]({'success':![],'message':_0x4c681c(0x89)});if(tokenBlacklistService_1[_0x4c681c(0x7d)]['isTokenBlacklisted'](_0x5c44dc))return _0x4f5ee0['status'](0x191)['json']({'success':![],'message':_0x4c681c(0x8e)});jsonwebtoken_1[_0x4c681c(0x8d)]['verify'](_0x5c44dc,config_1['config'][_0x4c681c(0x78)]['secret'],(_0x5ad42e,_0x525628)=>{const _0x271297=_0x4c681c;if(_0x5ad42e)return _0x4f5ee0[_0x271297(0x85)](0x193)[_0x271297(0x97)]({'success':![],'message':_0x271297(0x81)});_0x45ad78['user']=_0x525628,_0x45ad78[_0x271297(0x77)]=_0x5c44dc,_0x4dd069();});};exports[a16_0x4d4c89(0x98)]=authenticateToken;const requireAdmin=(_0x13da1c,_0x479ca4,_0xa30f2)=>{const _0x3b61a7=a16_0x4d4c89;if(!_0x13da1c[_0x3b61a7(0x8f)]||_0x13da1c[_0x3b61a7(0x8f)][_0x3b61a7(0x8a)]!==_0x3b61a7(0x94))return _0x479ca4[_0x3b61a7(0x85)](0x193)['json']({'success':![],'message':_0x3b61a7(0x7c)});_0xa30f2();};exports[a16_0x4d4c89(0x8c)]=requireAdmin;const requireShop=(_0x89b83,_0x504bc5,_0x43486a)=>{const _0x32f3ed=a16_0x4d4c89;if(!_0x89b83[_0x32f3ed(0x8f)]||_0x89b83[_0x32f3ed(0x8f)]['role']!=='shop')return _0x504bc5[_0x32f3ed(0x85)](0x193)[_0x32f3ed(0x97)]({'success':![],'message':'Shop\x20access\x20required'});_0x43486a();};exports[a16_0x4d4c89(0x82)]=requireShop;const requireActiveShop=async(_0x44348d,_0x49521b,_0xe8274d)=>{const _0x454156=a16_0x4d4c89;if(!_0x44348d[_0x454156(0x8f)]||_0x44348d['user'][_0x454156(0x8a)]!==_0x454156(0x74))return _0x49521b[_0x454156(0x85)](0x193)[_0x454156(0x97)]({'success':![],'message':'Shop\x20access\x20required'});try{const _0x51f3af=require(_0x454156(0x76))[_0x454156(0x8d)],_0xe53464=await _0x51f3af[_0x454156(0x74)]['findUnique']({'where':{'id':_0x44348d[_0x454156(0x8f)]['id']},'select':{'status':!![]}});if(!_0xe53464||_0xe53464[_0x454156(0x85)]!==_0x454156(0x7f))return _0x49521b[_0x454156(0x85)](0x193)[_0x454156(0x97)]({'success':![],'message':_0x454156(0x91),'suspended':_0xe53464?.[_0x454156(0x85)]==='SUSPENDED'});_0xe8274d();}catch(_0x3581d1){return console[_0x454156(0x96)]('Error\x20checking\x20account\x20status:',_0x3581d1),_0x49521b[_0x454156(0x85)](0x1f4)[_0x454156(0x97)]({'success':![],'message':_0x454156(0x75)});}};function a16_0x2bcf(_0x2ad367,_0xac40f7){const _0x535f4b=a16_0x535f();return a16_0x2bcf=function(_0x2bcfe5,_0x2f9cd4){_0x2bcfe5=_0x2bcfe5-0x74;let _0x53e435=_0x535f4b[_0x2bcfe5];return _0x53e435;},a16_0x2bcf(_0x2ad367,_0xac40f7);}function a16_0x535f(){const _0xc8888f=['4093625aeRUVN','status','split','__importDefault','../services/tokenBlacklistService','Access\x20token\x20required','role','881860ofeYtH','requireAdmin','default','Token\x20has\x20been\x20revoked','user','12658720TMHMIC','Account\x20is\x20suspended\x20or\x20inactive.\x20Contact\x20administrator\x20to\x20activate\x20your\x20account.','4381542wvbcbD','../config/config','admin','4nxyRcW','error','json','authenticateToken','1112525Snbqza','11qoFTww','16boMvCX','159681wsKDUn','shop','Error\x20checking\x20account\x20status','../config/database','token','jwt','4ESltjr','__esModule','12hDIQub','Admin\x20access\x20required','tokenBlacklistService','requireActiveShop','ACTIVE','defineProperty','Invalid\x20or\x20expired\x20token','requireShop','54416520MdGktD'];a16_0x535f=function(){return _0xc8888f;};return a16_0x535f();}exports[a16_0x4d4c89(0x7e)]=requireActiveShop;