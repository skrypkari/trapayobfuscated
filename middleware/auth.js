'use strict';const a16_0x351463=a16_0x1c12;(function(_0x419181,_0x55ee6c){const _0x12373b=a16_0x1c12,_0x10a9eb=_0x419181();while(!![]){try{const _0x34f362=-parseInt(_0x12373b(0x13b))/0x1+parseInt(_0x12373b(0x14d))/0x2*(parseInt(_0x12373b(0x142))/0x3)+-parseInt(_0x12373b(0x15b))/0x4*(parseInt(_0x12373b(0x141))/0x5)+parseInt(_0x12373b(0x144))/0x6+parseInt(_0x12373b(0x139))/0x7+-parseInt(_0x12373b(0x155))/0x8*(-parseInt(_0x12373b(0x158))/0x9)+-parseInt(_0x12373b(0x149))/0xa;if(_0x34f362===_0x55ee6c)break;else _0x10a9eb['push'](_0x10a9eb['shift']());}catch(_0x8c4089){_0x10a9eb['push'](_0x10a9eb['shift']());}}}(a16_0x55bb,0xe8b09));var __importDefault=this&&this[a16_0x351463(0x148)]||function(_0x3d4a40){return _0x3d4a40&&_0x3d4a40['__esModule']?_0x3d4a40:{'default':_0x3d4a40};};Object[a16_0x351463(0x138)](exports,'__esModule',{'value':!![]}),exports[a16_0x351463(0x140)]=exports[a16_0x351463(0x14e)]=exports[a16_0x351463(0x156)]=exports[a16_0x351463(0x152)]=void 0x0;const jsonwebtoken_1=__importDefault(require('jsonwebtoken')),config_1=require(a16_0x351463(0x15c)),tokenBlacklistService_1=require(a16_0x351463(0x136)),authenticateToken=(_0x533e9a,_0x5c5b6c,_0x1a5400)=>{const _0x2bb5b0=a16_0x351463,_0x23c40d=_0x533e9a[_0x2bb5b0(0x154)][_0x2bb5b0(0x14b)],_0x504446=_0x23c40d&&_0x23c40d['split']('\x20')[0x1];if(!_0x504446)return _0x5c5b6c[_0x2bb5b0(0x15d)](0x191)[_0x2bb5b0(0x135)]({'success':![],'message':'Access\x20token\x20required'});if(tokenBlacklistService_1[_0x2bb5b0(0x157)][_0x2bb5b0(0x159)](_0x504446))return _0x5c5b6c[_0x2bb5b0(0x15d)](0x191)[_0x2bb5b0(0x135)]({'success':![],'message':_0x2bb5b0(0x13a)});jsonwebtoken_1[_0x2bb5b0(0x151)]['verify'](_0x504446,config_1['config'][_0x2bb5b0(0x13d)][_0x2bb5b0(0x14c)],(_0x24b4ea,_0x549d63)=>{const _0x426832=_0x2bb5b0;if(_0x24b4ea)return _0x5c5b6c[_0x426832(0x15d)](0x193)['json']({'success':![],'message':_0x426832(0x13e)});_0x533e9a[_0x426832(0x150)]=_0x549d63,_0x533e9a['token']=_0x504446,_0x1a5400();});};function a16_0x55bb(){const _0x1ff1b7=['tokenBlacklistService','2087271LcCmhc','isTokenBlacklisted','Error\x20checking\x20account\x20status','20eocveB','../config/config','status','json','../services/tokenBlacklistService','error','defineProperty','7401702EJFcDW','Token\x20has\x20been\x20revoked','371368BNzrEA','admin','jwt','Invalid\x20or\x20expired\x20token','SUSPENDED','requireActiveShop','99815dgrTwM','4710783koArYB','shop','5767506tweJPS','role','../config/database','Error\x20checking\x20account\x20status:','__importDefault','26284560qSKYFn','Admin\x20access\x20required','authorization','secret','2KiZzeo','requireShop','Shop\x20access\x20required','user','default','authenticateToken','findUnique','headers','16WYhLak','requireAdmin'];a16_0x55bb=function(){return _0x1ff1b7;};return a16_0x55bb();}exports[a16_0x351463(0x152)]=authenticateToken;const requireAdmin=(_0x238335,_0x47ebc9,_0x5dc680)=>{const _0x584879=a16_0x351463;if(!_0x238335[_0x584879(0x150)]||_0x238335[_0x584879(0x150)][_0x584879(0x145)]!==_0x584879(0x13c))return _0x47ebc9[_0x584879(0x15d)](0x193)[_0x584879(0x135)]({'success':![],'message':_0x584879(0x14a)});_0x5dc680();};exports[a16_0x351463(0x156)]=requireAdmin;function a16_0x1c12(_0x32904f,_0x43db8e){const _0x55bb1d=a16_0x55bb();return a16_0x1c12=function(_0x1c1266,_0x406ac6){_0x1c1266=_0x1c1266-0x135;let _0x1e620d=_0x55bb1d[_0x1c1266];return _0x1e620d;},a16_0x1c12(_0x32904f,_0x43db8e);}const requireShop=(_0x1c8aef,_0x34edbf,_0x494896)=>{const _0x38747a=a16_0x351463;if(!_0x1c8aef[_0x38747a(0x150)]||_0x1c8aef[_0x38747a(0x150)][_0x38747a(0x145)]!==_0x38747a(0x143))return _0x34edbf[_0x38747a(0x15d)](0x193)[_0x38747a(0x135)]({'success':![],'message':_0x38747a(0x14f)});_0x494896();};exports[a16_0x351463(0x14e)]=requireShop;const requireActiveShop=async(_0x47fa59,_0x51688e,_0x34f8ef)=>{const _0x3b65ce=a16_0x351463;if(!_0x47fa59[_0x3b65ce(0x150)]||_0x47fa59[_0x3b65ce(0x150)][_0x3b65ce(0x145)]!==_0x3b65ce(0x143))return _0x51688e[_0x3b65ce(0x15d)](0x193)['json']({'success':![],'message':_0x3b65ce(0x14f)});try{const _0x882e81=require(_0x3b65ce(0x146))[_0x3b65ce(0x151)],_0x14b49d=await _0x882e81[_0x3b65ce(0x143)][_0x3b65ce(0x153)]({'where':{'id':_0x47fa59['user']['id']},'select':{'status':!![]}});if(!_0x14b49d||_0x14b49d[_0x3b65ce(0x15d)]!=='ACTIVE')return _0x51688e[_0x3b65ce(0x15d)](0x193)[_0x3b65ce(0x135)]({'success':![],'message':'Account\x20is\x20suspended\x20or\x20inactive.\x20Contact\x20administrator\x20to\x20activate\x20your\x20account.','suspended':_0x14b49d?.[_0x3b65ce(0x15d)]===_0x3b65ce(0x13f)});_0x34f8ef();}catch(_0x49bf73){return console[_0x3b65ce(0x137)](_0x3b65ce(0x147),_0x49bf73),_0x51688e['status'](0x1f4)[_0x3b65ce(0x135)]({'success':![],'message':_0x3b65ce(0x15a)});}};exports['requireActiveShop']=requireActiveShop;