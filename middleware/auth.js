'use strict';const a22_0x1c88b9=a22_0x2484;function a22_0x2484(_0x18a478,_0x3ea569){_0x18a478=_0x18a478-0x170;const _0x5524a6=a22_0x5524();let _0x248485=_0x5524a6[_0x18a478];return _0x248485;}(function(_0x2a70aa,_0x42a1c9){const _0x262d30=a22_0x2484,_0x12eefa=_0x2a70aa();while(!![]){try{const _0x42bfb7=parseInt(_0x262d30(0x18f))/0x1*(-parseInt(_0x262d30(0x18a))/0x2)+parseInt(_0x262d30(0x182))/0x3*(parseInt(_0x262d30(0x191))/0x4)+-parseInt(_0x262d30(0x178))/0x5*(parseInt(_0x262d30(0x199))/0x6)+parseInt(_0x262d30(0x19a))/0x7*(parseInt(_0x262d30(0x174))/0x8)+-parseInt(_0x262d30(0x17a))/0x9*(-parseInt(_0x262d30(0x187))/0xa)+parseInt(_0x262d30(0x19b))/0xb+-parseInt(_0x262d30(0x184))/0xc*(parseInt(_0x262d30(0x189))/0xd);if(_0x42bfb7===_0x42a1c9)break;else _0x12eefa['push'](_0x12eefa['shift']());}catch(_0x26e72f){_0x12eefa['push'](_0x12eefa['shift']());}}}(a22_0x5524,0xd6217));function a22_0x5524(){const _0x3fcacd=['Account\x20is\x20suspended\x20or\x20inactive.\x20Contact\x20administrator\x20to\x20activate\x20your\x20account.','4996927WbHXKE','9868sdqGNX','ACTIVE','user','../services/tokenBlacklistService','__esModule','274Nydzuu','error','60HDjkTR','jwt','token','config','json','headers','requireActiveShop','Error\x20checking\x20account\x20status:','1654146GLOxvi','7xoZgeX','14664562NiLCgY','role','findUnique','requireAdmin','Admin\x20access\x20required','Token\x20has\x20been\x20revoked','admin','Invalid\x20or\x20expired\x20token','8026104IjvGJa','shop','default','__importDefault','30gIWopZ','isTokenBlacklisted','9QROPYE','../config/config','requireShop','authenticateToken','authorization','../config/database','jsonwebtoken','status','273114czrBVU','SUSPENDED','12JZeBbg','Error\x20checking\x20account\x20status','defineProperty','5655450XYzfMW'];a22_0x5524=function(){return _0x3fcacd;};return a22_0x5524();}var __importDefault=this&&this[a22_0x1c88b9(0x177)]||function(_0x2c243e){const _0x46257a=a22_0x1c88b9;return _0x2c243e&&_0x2c243e[_0x46257a(0x18e)]?_0x2c243e:{'default':_0x2c243e};};Object[a22_0x1c88b9(0x186)](exports,'__esModule',{'value':!![]}),exports[a22_0x1c88b9(0x197)]=exports['requireShop']=exports[a22_0x1c88b9(0x19e)]=exports[a22_0x1c88b9(0x17d)]=void 0x0;const jsonwebtoken_1=__importDefault(require(a22_0x1c88b9(0x180))),config_1=require(a22_0x1c88b9(0x17b)),tokenBlacklistService_1=require(a22_0x1c88b9(0x18d)),authenticateToken=(_0x75956f,_0x541126,_0x2d49c1)=>{const _0x537f5a=a22_0x1c88b9,_0x12924e=_0x75956f[_0x537f5a(0x196)][_0x537f5a(0x17e)],_0x49a31e=_0x12924e&&_0x12924e['split']('\x20')[0x1];if(!_0x49a31e)return _0x541126[_0x537f5a(0x181)](0x191)[_0x537f5a(0x195)]({'success':![],'message':'Access\x20token\x20required'});if(tokenBlacklistService_1['tokenBlacklistService'][_0x537f5a(0x179)](_0x49a31e))return _0x541126['status'](0x191)[_0x537f5a(0x195)]({'success':![],'message':_0x537f5a(0x171)});jsonwebtoken_1[_0x537f5a(0x176)]['verify'](_0x49a31e,config_1[_0x537f5a(0x194)][_0x537f5a(0x192)]['secret'],(_0x4bfbf4,_0x3a3b76)=>{const _0x4fd0d4=_0x537f5a;if(_0x4bfbf4)return _0x541126[_0x4fd0d4(0x181)](0x193)[_0x4fd0d4(0x195)]({'success':![],'message':_0x4fd0d4(0x173)});_0x75956f[_0x4fd0d4(0x18c)]=_0x3a3b76,_0x75956f[_0x4fd0d4(0x193)]=_0x49a31e,_0x2d49c1();});};exports[a22_0x1c88b9(0x17d)]=authenticateToken;const requireAdmin=(_0x52d360,_0x41852d,_0x500bee)=>{const _0x568532=a22_0x1c88b9;if(!_0x52d360[_0x568532(0x18c)]||_0x52d360[_0x568532(0x18c)]['role']!==_0x568532(0x172))return _0x41852d[_0x568532(0x181)](0x193)[_0x568532(0x195)]({'success':![],'message':_0x568532(0x170)});_0x500bee();};exports[a22_0x1c88b9(0x19e)]=requireAdmin;const requireShop=(_0x148853,_0x170f7e,_0x17d256)=>{const _0x323899=a22_0x1c88b9;if(!_0x148853['user']||_0x148853[_0x323899(0x18c)][_0x323899(0x19c)]!=='shop')return _0x170f7e['status'](0x193)[_0x323899(0x195)]({'success':![],'message':'Shop\x20access\x20required'});_0x17d256();};exports[a22_0x1c88b9(0x17c)]=requireShop;const requireActiveShop=async(_0x1112fc,_0x1a32fd,_0x489034)=>{const _0x3bda90=a22_0x1c88b9;if(!_0x1112fc[_0x3bda90(0x18c)]||_0x1112fc[_0x3bda90(0x18c)]['role']!==_0x3bda90(0x175))return _0x1a32fd[_0x3bda90(0x181)](0x193)['json']({'success':![],'message':'Shop\x20access\x20required'});try{const _0x148ae9=require(_0x3bda90(0x17f))[_0x3bda90(0x176)],_0xc09df4=await _0x148ae9[_0x3bda90(0x175)][_0x3bda90(0x19d)]({'where':{'id':_0x1112fc[_0x3bda90(0x18c)]['id']},'select':{'status':!![]}});if(!_0xc09df4||_0xc09df4[_0x3bda90(0x181)]!==_0x3bda90(0x18b))return _0x1a32fd[_0x3bda90(0x181)](0x193)[_0x3bda90(0x195)]({'success':![],'message':_0x3bda90(0x188),'suspended':_0xc09df4?.[_0x3bda90(0x181)]===_0x3bda90(0x183)});_0x489034();}catch(_0x2d5275){return console[_0x3bda90(0x190)](_0x3bda90(0x198),_0x2d5275),_0x1a32fd['status'](0x1f4)[_0x3bda90(0x195)]({'success':![],'message':_0x3bda90(0x185)});}};exports['requireActiveShop']=requireActiveShop;