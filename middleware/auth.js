'use strict';function a16_0x6900(){const _0x4ea5cf=['requireShop','__importDefault','error','tokenBlacklistService','../config/config','135zRRBng','../config/database','Shop\x20access\x20required','../services/tokenBlacklistService','authenticateToken','67776meoQaR','Token\x20has\x20been\x20revoked','split','113330Bbqrsn','ACTIVE','requireActiveShop','833WdWnVF','config','authorization','status','isTokenBlacklisted','findUnique','jwt','shop','1295937QoRFqI','410936ICCnRc','default','2082716yzVCEI','__esModule','25UpVVwS','json','admin','headers','3177756uloQnZ','281324iBVOeb','Admin\x20access\x20required','Error\x20checking\x20account\x20status','Account\x20is\x20suspended\x20or\x20inactive.\x20Contact\x20administrator\x20to\x20activate\x20your\x20account.','Error\x20checking\x20account\x20status:','jsonwebtoken','user','token','requireAdmin','role'];a16_0x6900=function(){return _0x4ea5cf;};return a16_0x6900();}const a16_0x342dc2=a16_0x3bb8;function a16_0x3bb8(_0x50a1a9,_0x47f80d){const _0x69006c=a16_0x6900();return a16_0x3bb8=function(_0x3bb829,_0x20823d){_0x3bb829=_0x3bb829-0x151;let _0x537637=_0x69006c[_0x3bb829];return _0x537637;},a16_0x3bb8(_0x50a1a9,_0x47f80d);}(function(_0x5f0a8b,_0xb89a49){const _0x2bab38=a16_0x3bb8,_0x4f5fda=_0x5f0a8b();while(!![]){try{const _0x4aee3e=parseInt(_0x2bab38(0x15b))/0x1+-parseInt(_0x2bab38(0x154))/0x2+parseInt(_0x2bab38(0x151))/0x3+parseInt(_0x2bab38(0x152))/0x4*(-parseInt(_0x2bab38(0x156))/0x5)+parseInt(_0x2bab38(0x15a))/0x6+-parseInt(_0x2bab38(0x175))/0x7*(-parseInt(_0x2bab38(0x16f))/0x8)+parseInt(_0x2bab38(0x16a))/0x9*(-parseInt(_0x2bab38(0x172))/0xa);if(_0x4aee3e===_0xb89a49)break;else _0x4f5fda['push'](_0x4f5fda['shift']());}catch(_0xe97128){_0x4f5fda['push'](_0x4f5fda['shift']());}}}(a16_0x6900,0x806fa));var __importDefault=this&&this[a16_0x342dc2(0x166)]||function(_0x2fbd2a){const _0x10a65b=a16_0x342dc2;return _0x2fbd2a&&_0x2fbd2a[_0x10a65b(0x155)]?_0x2fbd2a:{'default':_0x2fbd2a};};Object['defineProperty'](exports,a16_0x342dc2(0x155),{'value':!![]}),exports['requireActiveShop']=exports[a16_0x342dc2(0x165)]=exports[a16_0x342dc2(0x163)]=exports['authenticateToken']=void 0x0;const jsonwebtoken_1=__importDefault(require(a16_0x342dc2(0x160))),config_1=require(a16_0x342dc2(0x169)),tokenBlacklistService_1=require(a16_0x342dc2(0x16d)),authenticateToken=(_0x5a99a7,_0x535744,_0x55c387)=>{const _0x38f068=a16_0x342dc2,_0x1ca4bd=_0x5a99a7[_0x38f068(0x159)][_0x38f068(0x177)],_0x421868=_0x1ca4bd&&_0x1ca4bd[_0x38f068(0x171)]('\x20')[0x1];if(!_0x421868)return _0x535744[_0x38f068(0x178)](0x191)[_0x38f068(0x157)]({'success':![],'message':'Access\x20token\x20required'});if(tokenBlacklistService_1[_0x38f068(0x168)][_0x38f068(0x179)](_0x421868))return _0x535744[_0x38f068(0x178)](0x191)[_0x38f068(0x157)]({'success':![],'message':_0x38f068(0x170)});jsonwebtoken_1[_0x38f068(0x153)]['verify'](_0x421868,config_1[_0x38f068(0x176)][_0x38f068(0x17b)]['secret'],(_0x3d507a,_0x182ebd)=>{const _0x122a9e=_0x38f068;if(_0x3d507a)return _0x535744[_0x122a9e(0x178)](0x193)[_0x122a9e(0x157)]({'success':![],'message':'Invalid\x20or\x20expired\x20token'});_0x5a99a7['user']=_0x182ebd,_0x5a99a7[_0x122a9e(0x162)]=_0x421868,_0x55c387();});};exports[a16_0x342dc2(0x16e)]=authenticateToken;const requireAdmin=(_0x2ea1df,_0x5ccad,_0x625b01)=>{const _0xe053bc=a16_0x342dc2;if(!_0x2ea1df[_0xe053bc(0x161)]||_0x2ea1df['user'][_0xe053bc(0x164)]!==_0xe053bc(0x158))return _0x5ccad[_0xe053bc(0x178)](0x193)[_0xe053bc(0x157)]({'success':![],'message':_0xe053bc(0x15c)});_0x625b01();};exports[a16_0x342dc2(0x163)]=requireAdmin;const requireShop=(_0x44996a,_0x113f63,_0x3c3923)=>{const _0x484949=a16_0x342dc2;if(!_0x44996a[_0x484949(0x161)]||_0x44996a[_0x484949(0x161)][_0x484949(0x164)]!==_0x484949(0x17c))return _0x113f63[_0x484949(0x178)](0x193)[_0x484949(0x157)]({'success':![],'message':_0x484949(0x16c)});_0x3c3923();};exports[a16_0x342dc2(0x165)]=requireShop;const requireActiveShop=async(_0x34c17f,_0x1a4b83,_0x3ac26e)=>{const _0x57fc79=a16_0x342dc2;if(!_0x34c17f[_0x57fc79(0x161)]||_0x34c17f[_0x57fc79(0x161)][_0x57fc79(0x164)]!==_0x57fc79(0x17c))return _0x1a4b83[_0x57fc79(0x178)](0x193)['json']({'success':![],'message':_0x57fc79(0x16c)});try{const _0x3faea6=require(_0x57fc79(0x16b))[_0x57fc79(0x153)],_0xec606e=await _0x3faea6[_0x57fc79(0x17c)][_0x57fc79(0x17a)]({'where':{'id':_0x34c17f['user']['id']},'select':{'status':!![]}});if(!_0xec606e||_0xec606e[_0x57fc79(0x178)]!==_0x57fc79(0x173))return _0x1a4b83['status'](0x193)[_0x57fc79(0x157)]({'success':![],'message':_0x57fc79(0x15e),'suspended':_0xec606e?.[_0x57fc79(0x178)]==='SUSPENDED'});_0x3ac26e();}catch(_0xe7d28b){return console[_0x57fc79(0x167)](_0x57fc79(0x15f),_0xe7d28b),_0x1a4b83[_0x57fc79(0x178)](0x1f4)[_0x57fc79(0x157)]({'success':![],'message':_0x57fc79(0x15d)});}};exports[a16_0x342dc2(0x174)]=requireActiveShop;