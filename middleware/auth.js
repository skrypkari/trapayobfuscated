'use strict';const a18_0x385124=a18_0x6b19;(function(_0x403c5e,_0x2e5187){const _0x592282=a18_0x6b19,_0x1740c3=_0x403c5e();while(!![]){try{const _0x149edd=parseInt(_0x592282(0x13a))/0x1+-parseInt(_0x592282(0x150))/0x2+parseInt(_0x592282(0x144))/0x3*(parseInt(_0x592282(0x157))/0x4)+parseInt(_0x592282(0x158))/0x5+-parseInt(_0x592282(0x13d))/0x6+parseInt(_0x592282(0x140))/0x7+-parseInt(_0x592282(0x15f))/0x8;if(_0x149edd===_0x2e5187)break;else _0x1740c3['push'](_0x1740c3['shift']());}catch(_0x4ef7f6){_0x1740c3['push'](_0x1740c3['shift']());}}}(a18_0x4366,0x876e9));var __importDefault=this&&this[a18_0x385124(0x15b)]||function(_0x36ba5d){const _0x173906=a18_0x385124;return _0x36ba5d&&_0x36ba5d[_0x173906(0x156)]?_0x36ba5d:{'default':_0x36ba5d};};Object[a18_0x385124(0x14e)](exports,a18_0x385124(0x156),{'value':!![]}),exports['requireActiveShop']=exports[a18_0x385124(0x141)]=exports[a18_0x385124(0x15d)]=exports[a18_0x385124(0x13b)]=void 0x0;const jsonwebtoken_1=__importDefault(require(a18_0x385124(0x153))),config_1=require(a18_0x385124(0x152)),tokenBlacklistService_1=require('../services/tokenBlacklistService'),authenticateToken=(_0x31c561,_0x32df2b,_0x27adff)=>{const _0x16fdbc=a18_0x385124,_0x483281=_0x31c561[_0x16fdbc(0x14c)][_0x16fdbc(0x15a)],_0x51a899=_0x483281&&_0x483281['split']('\x20')[0x1];if(!_0x51a899)return _0x32df2b[_0x16fdbc(0x15c)](0x191)[_0x16fdbc(0x14a)]({'success':![],'message':_0x16fdbc(0x13f)});if(tokenBlacklistService_1[_0x16fdbc(0x14f)]['isTokenBlacklisted'](_0x51a899))return _0x32df2b[_0x16fdbc(0x15c)](0x191)[_0x16fdbc(0x14a)]({'success':![],'message':'Token\x20has\x20been\x20revoked'});jsonwebtoken_1[_0x16fdbc(0x148)][_0x16fdbc(0x155)](_0x51a899,config_1['config'][_0x16fdbc(0x151)][_0x16fdbc(0x145)],(_0x3f6909,_0x57ebad)=>{const _0xa947=_0x16fdbc;if(_0x3f6909)return _0x32df2b[_0xa947(0x15c)](0x193)[_0xa947(0x14a)]({'success':![],'message':_0xa947(0x149)});_0x31c561[_0xa947(0x154)]=_0x57ebad,_0x31c561[_0xa947(0x160)]=_0x51a899,_0x27adff();});};exports['authenticateToken']=authenticateToken;function a18_0x4366(){const _0x17da68=['1725100hHBKOE','Error\x20checking\x20account\x20status:','authorization','__importDefault','status','requireAdmin','shop','6574432ldRXnQ','token','326750NorNFi','authenticateToken','ACTIVE','2177496mGcaHn','findUnique','Access\x20token\x20required','4461877jcyrsA','requireShop','Error\x20checking\x20account\x20status','admin','255akvkpJ','secret','role','Account\x20is\x20suspended\x20or\x20inactive.\x20Contact\x20administrator\x20to\x20activate\x20your\x20account.','default','Invalid\x20or\x20expired\x20token','json','Shop\x20access\x20required','headers','Admin\x20access\x20required','defineProperty','tokenBlacklistService','396274QgxNCk','jwt','../config/config','jsonwebtoken','user','verify','__esModule','29572XvhfRh'];a18_0x4366=function(){return _0x17da68;};return a18_0x4366();}const requireAdmin=(_0x2fb500,_0x3b012d,_0x2d7606)=>{const _0x108e3a=a18_0x385124;if(!_0x2fb500['user']||_0x2fb500['user'][_0x108e3a(0x146)]!==_0x108e3a(0x143))return _0x3b012d[_0x108e3a(0x15c)](0x193)[_0x108e3a(0x14a)]({'success':![],'message':_0x108e3a(0x14d)});_0x2d7606();};function a18_0x6b19(_0x3626bf,_0x5a257a){const _0x43667a=a18_0x4366();return a18_0x6b19=function(_0x6b1914,_0x553d6f){_0x6b1914=_0x6b1914-0x13a;let _0x5b5828=_0x43667a[_0x6b1914];return _0x5b5828;},a18_0x6b19(_0x3626bf,_0x5a257a);}exports[a18_0x385124(0x15d)]=requireAdmin;const requireShop=(_0x1e8111,_0x4b89d4,_0x4959cc)=>{const _0x24d344=a18_0x385124;if(!_0x1e8111[_0x24d344(0x154)]||_0x1e8111['user'][_0x24d344(0x146)]!==_0x24d344(0x15e))return _0x4b89d4[_0x24d344(0x15c)](0x193)[_0x24d344(0x14a)]({'success':![],'message':_0x24d344(0x14b)});_0x4959cc();};exports['requireShop']=requireShop;const requireActiveShop=async(_0x3d3dfb,_0xd61a65,_0xae405f)=>{const _0x25c91e=a18_0x385124;if(!_0x3d3dfb[_0x25c91e(0x154)]||_0x3d3dfb[_0x25c91e(0x154)][_0x25c91e(0x146)]!==_0x25c91e(0x15e))return _0xd61a65[_0x25c91e(0x15c)](0x193)[_0x25c91e(0x14a)]({'success':![],'message':_0x25c91e(0x14b)});try{const _0x152f35=require('../config/database')[_0x25c91e(0x148)],_0x2aee40=await _0x152f35[_0x25c91e(0x15e)][_0x25c91e(0x13e)]({'where':{'id':_0x3d3dfb[_0x25c91e(0x154)]['id']},'select':{'status':!![]}});if(!_0x2aee40||_0x2aee40[_0x25c91e(0x15c)]!==_0x25c91e(0x13c))return _0xd61a65[_0x25c91e(0x15c)](0x193)[_0x25c91e(0x14a)]({'success':![],'message':_0x25c91e(0x147),'suspended':_0x2aee40?.[_0x25c91e(0x15c)]==='SUSPENDED'});_0xae405f();}catch(_0x34918b){return console['error'](_0x25c91e(0x159),_0x34918b),_0xd61a65['status'](0x1f4)['json']({'success':![],'message':_0x25c91e(0x142)});}};exports['requireActiveShop']=requireActiveShop;