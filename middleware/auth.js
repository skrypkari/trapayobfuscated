'use strict';const a16_0x14b618=a16_0x5c9e;(function(_0x5c0a94,_0x31cfea){const _0x30fba9=a16_0x5c9e,_0x1519d5=_0x5c0a94();while(!![]){try{const _0x1f9e2f=-parseInt(_0x30fba9(0x1f1))/0x1*(parseInt(_0x30fba9(0x200))/0x2)+-parseInt(_0x30fba9(0x1d9))/0x3*(parseInt(_0x30fba9(0x1f2))/0x4)+parseInt(_0x30fba9(0x1fe))/0x5+parseInt(_0x30fba9(0x1e4))/0x6+parseInt(_0x30fba9(0x1ec))/0x7*(parseInt(_0x30fba9(0x1fc))/0x8)+parseInt(_0x30fba9(0x1f5))/0x9+-parseInt(_0x30fba9(0x1e1))/0xa;if(_0x1f9e2f===_0x31cfea)break;else _0x1519d5['push'](_0x1519d5['shift']());}catch(_0x479271){_0x1519d5['push'](_0x1519d5['shift']());}}}(a16_0x5909,0x8c0cc));var __importDefault=this&&this[a16_0x14b618(0x1f8)]||function(_0x58a94c){const _0x42d8a1=a16_0x14b618;return _0x58a94c&&_0x58a94c[_0x42d8a1(0x1e7)]?_0x58a94c:{'default':_0x58a94c};};Object[a16_0x14b618(0x1e3)](exports,a16_0x14b618(0x1e7),{'value':!![]}),exports[a16_0x14b618(0x1eb)]=exports['requireShop']=exports[a16_0x14b618(0x1e0)]=exports[a16_0x14b618(0x1ff)]=void 0x0;function a16_0x5909(){const _0x3bc1bb=['83649xMDNzG','requireShop','Account\x20is\x20suspended\x20or\x20inactive.\x20Contact\x20administrator\x20to\x20activate\x20your\x20account.','tokenBlacklistService','../config/database','verify','role','requireAdmin','11179630VkQVdP','isTokenBlacklisted','defineProperty','604218PlPaEU','admin','shop','__esModule','../services/tokenBlacklistService','ACTIVE','split','requireActiveShop','598619TmgrYV','jwt','SUSPENDED','../config/config','json','417cHWEaC','4wzPajL','status','user','7870203INEGet','token','Token\x20has\x20been\x20revoked','__importDefault','authorization','Shop\x20access\x20required','Error\x20checking\x20account\x20status:','72aOcxVP','default','520JUTuTm','authenticateToken','122cvVsuM'];a16_0x5909=function(){return _0x3bc1bb;};return a16_0x5909();}const jsonwebtoken_1=__importDefault(require('jsonwebtoken')),config_1=require(a16_0x14b618(0x1ef)),tokenBlacklistService_1=require(a16_0x14b618(0x1e8)),authenticateToken=(_0xd0fc56,_0x1e74b6,_0x2b3053)=>{const _0xc9fb68=a16_0x14b618,_0x35b4ce=_0xd0fc56['headers'][_0xc9fb68(0x1f9)],_0x142396=_0x35b4ce&&_0x35b4ce[_0xc9fb68(0x1ea)]('\x20')[0x1];if(!_0x142396)return _0x1e74b6['status'](0x191)[_0xc9fb68(0x1f0)]({'success':![],'message':'Access\x20token\x20required'});if(tokenBlacklistService_1[_0xc9fb68(0x1dc)][_0xc9fb68(0x1e2)](_0x142396))return _0x1e74b6[_0xc9fb68(0x1f3)](0x191)[_0xc9fb68(0x1f0)]({'success':![],'message':_0xc9fb68(0x1f7)});jsonwebtoken_1[_0xc9fb68(0x1fd)][_0xc9fb68(0x1de)](_0x142396,config_1['config'][_0xc9fb68(0x1ed)]['secret'],(_0x2f9d6c,_0x550956)=>{const _0x53b38b=_0xc9fb68;if(_0x2f9d6c)return _0x1e74b6['status'](0x193)[_0x53b38b(0x1f0)]({'success':![],'message':'Invalid\x20or\x20expired\x20token'});_0xd0fc56[_0x53b38b(0x1f4)]=_0x550956,_0xd0fc56[_0x53b38b(0x1f6)]=_0x142396,_0x2b3053();});};exports[a16_0x14b618(0x1ff)]=authenticateToken;const requireAdmin=(_0x37310,_0x32c8ae,_0x1af382)=>{const _0x3ae5ca=a16_0x14b618;if(!_0x37310[_0x3ae5ca(0x1f4)]||_0x37310[_0x3ae5ca(0x1f4)][_0x3ae5ca(0x1df)]!==_0x3ae5ca(0x1e5))return _0x32c8ae['status'](0x193)['json']({'success':![],'message':'Admin\x20access\x20required'});_0x1af382();};exports[a16_0x14b618(0x1e0)]=requireAdmin;const requireShop=(_0x5ca174,_0x706a7a,_0x3fb647)=>{const _0x5cae42=a16_0x14b618;if(!_0x5ca174[_0x5cae42(0x1f4)]||_0x5ca174['user']['role']!==_0x5cae42(0x1e6))return _0x706a7a[_0x5cae42(0x1f3)](0x193)[_0x5cae42(0x1f0)]({'success':![],'message':_0x5cae42(0x1fa)});_0x3fb647();};function a16_0x5c9e(_0x321357,_0x4ee9c9){const _0x590995=a16_0x5909();return a16_0x5c9e=function(_0x5c9eb2,_0x2e965b){_0x5c9eb2=_0x5c9eb2-0x1d9;let _0x4bdad6=_0x590995[_0x5c9eb2];return _0x4bdad6;},a16_0x5c9e(_0x321357,_0x4ee9c9);}exports[a16_0x14b618(0x1da)]=requireShop;const requireActiveShop=async(_0x6527ce,_0xd5dc4b,_0xc9c32f)=>{const _0x40d75a=a16_0x14b618;if(!_0x6527ce[_0x40d75a(0x1f4)]||_0x6527ce['user']['role']!==_0x40d75a(0x1e6))return _0xd5dc4b[_0x40d75a(0x1f3)](0x193)[_0x40d75a(0x1f0)]({'success':![],'message':_0x40d75a(0x1fa)});try{const _0x411727=require(_0x40d75a(0x1dd))['default'],_0x5f351f=await _0x411727['shop']['findUnique']({'where':{'id':_0x6527ce[_0x40d75a(0x1f4)]['id']},'select':{'status':!![]}});if(!_0x5f351f||_0x5f351f[_0x40d75a(0x1f3)]!==_0x40d75a(0x1e9))return _0xd5dc4b[_0x40d75a(0x1f3)](0x193)['json']({'success':![],'message':_0x40d75a(0x1db),'suspended':_0x5f351f?.['status']===_0x40d75a(0x1ee)});_0xc9c32f();}catch(_0x16b7df){return console['error'](_0x40d75a(0x1fb),_0x16b7df),_0xd5dc4b[_0x40d75a(0x1f3)](0x1f4)[_0x40d75a(0x1f0)]({'success':![],'message':'Error\x20checking\x20account\x20status'});}};exports[a16_0x14b618(0x1eb)]=requireActiveShop;