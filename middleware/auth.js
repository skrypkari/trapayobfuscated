'use strict';const a24_0x11acc6=a24_0x11d2;(function(_0x160159,_0x2348ea){const _0x36d306=a24_0x11d2,_0x2fed27=_0x160159();while(!![]){try{const _0x573cad=parseInt(_0x36d306(0x169))/0x1*(-parseInt(_0x36d306(0x189))/0x2)+-parseInt(_0x36d306(0x173))/0x3*(-parseInt(_0x36d306(0x18c))/0x4)+-parseInt(_0x36d306(0x171))/0x5+parseInt(_0x36d306(0x182))/0x6+-parseInt(_0x36d306(0x188))/0x7+parseInt(_0x36d306(0x186))/0x8+parseInt(_0x36d306(0x185))/0x9;if(_0x573cad===_0x2348ea)break;else _0x2fed27['push'](_0x2fed27['shift']());}catch(_0x52c46d){_0x2fed27['push'](_0x2fed27['shift']());}}}(a24_0x37d3,0x3e534));var __importDefault=this&&this[a24_0x11acc6(0x17d)]||function(_0x4c7841){const _0x562640=a24_0x11acc6;return _0x4c7841&&_0x4c7841[_0x562640(0x16e)]?_0x4c7841:{'default':_0x4c7841};};Object['defineProperty'](exports,a24_0x11acc6(0x16e),{'value':!![]}),exports[a24_0x11acc6(0x174)]=exports['requireShop']=exports['requireAdmin']=exports[a24_0x11acc6(0x18a)]=void 0x0;const jsonwebtoken_1=__importDefault(require('jsonwebtoken')),config_1=require(a24_0x11acc6(0x16f)),tokenBlacklistService_1=require('../services/tokenBlacklistService'),authenticateToken=(_0x146291,_0x38727b,_0x3b6f90)=>{const _0xee174=a24_0x11acc6,_0x2796ff=_0x146291[_0xee174(0x164)][_0xee174(0x16c)],_0x56cd3f=_0x2796ff&&_0x2796ff['split']('\x20')[0x1];if(!_0x56cd3f)return _0x38727b[_0xee174(0x17b)](0x191)[_0xee174(0x176)]({'success':![],'message':_0xee174(0x18b)});if(tokenBlacklistService_1[_0xee174(0x165)][_0xee174(0x183)](_0x56cd3f))return _0x38727b['status'](0x191)[_0xee174(0x176)]({'success':![],'message':_0xee174(0x181)});jsonwebtoken_1[_0xee174(0x167)][_0xee174(0x170)](_0x56cd3f,config_1['config'][_0xee174(0x178)][_0xee174(0x184)],(_0x20f9bb,_0x1133e9)=>{const _0x4de8de=_0xee174;if(_0x20f9bb)return _0x38727b[_0x4de8de(0x17b)](0x193)[_0x4de8de(0x176)]({'success':![],'message':_0x4de8de(0x166)});_0x146291[_0x4de8de(0x16a)]=_0x1133e9,_0x146291[_0x4de8de(0x16d)]=_0x56cd3f,_0x3b6f90();});};function a24_0x11d2(_0x1ebfd4,_0x24ee97){_0x1ebfd4=_0x1ebfd4-0x164;const _0x37d3e1=a24_0x37d3();let _0x11d2e2=_0x37d3e1[_0x1ebfd4];return _0x11d2e2;}exports['authenticateToken']=authenticateToken;const requireAdmin=(_0x54e7af,_0x3ce99d,_0x368882)=>{const _0x1836ee=a24_0x11acc6;if(!_0x54e7af[_0x1836ee(0x16a)]||_0x54e7af['user'][_0x1836ee(0x18d)]!==_0x1836ee(0x17f))return _0x3ce99d[_0x1836ee(0x17b)](0x193)[_0x1836ee(0x176)]({'success':![],'message':_0x1836ee(0x17e)});_0x368882();};function a24_0x37d3(){const _0x52083d=['../config/database','Token\x20has\x20been\x20revoked','1898034bWDMYq','isTokenBlacklisted','secret','4635315wVFNbm','252864DLAtUR','requireAdmin','2954245xcjjEJ','2frrKpV','authenticateToken','Access\x20token\x20required','4OiaIYF','role','headers','tokenBlacklistService','Invalid\x20or\x20expired\x20token','default','requireShop','352237okjEHu','user','SUSPENDED','authorization','token','__esModule','../config/config','verify','469845mPoCpG','shop','781629lGWhNt','requireActiveShop','findUnique','json','Account\x20is\x20suspended\x20or\x20inactive.\x20Contact\x20administrator\x20to\x20activate\x20your\x20account.','jwt','Error\x20checking\x20account\x20status','Error\x20checking\x20account\x20status:','status','Shop\x20access\x20required','__importDefault','Admin\x20access\x20required','admin'];a24_0x37d3=function(){return _0x52083d;};return a24_0x37d3();}exports[a24_0x11acc6(0x187)]=requireAdmin;const requireShop=(_0x31f99b,_0x330431,_0x542f0e)=>{const _0x5d493b=a24_0x11acc6;if(!_0x31f99b['user']||_0x31f99b[_0x5d493b(0x16a)]['role']!==_0x5d493b(0x172))return _0x330431[_0x5d493b(0x17b)](0x193)[_0x5d493b(0x176)]({'success':![],'message':_0x5d493b(0x17c)});_0x542f0e();};exports[a24_0x11acc6(0x168)]=requireShop;const requireActiveShop=async(_0x12329c,_0x2d5631,_0x561705)=>{const _0x359b17=a24_0x11acc6;if(!_0x12329c[_0x359b17(0x16a)]||_0x12329c[_0x359b17(0x16a)][_0x359b17(0x18d)]!==_0x359b17(0x172))return _0x2d5631[_0x359b17(0x17b)](0x193)[_0x359b17(0x176)]({'success':![],'message':_0x359b17(0x17c)});try{const _0x3adbaa=require(_0x359b17(0x180))[_0x359b17(0x167)],_0x362c74=await _0x3adbaa['shop'][_0x359b17(0x175)]({'where':{'id':_0x12329c['user']['id']},'select':{'status':!![]}});if(!_0x362c74||_0x362c74['status']!=='ACTIVE')return _0x2d5631[_0x359b17(0x17b)](0x193)[_0x359b17(0x176)]({'success':![],'message':_0x359b17(0x177),'suspended':_0x362c74?.['status']===_0x359b17(0x16b)});_0x561705();}catch(_0x79fc87){return console['error'](_0x359b17(0x17a),_0x79fc87),_0x2d5631[_0x359b17(0x17b)](0x1f4)[_0x359b17(0x176)]({'success':![],'message':_0x359b17(0x179)});}};exports[a24_0x11acc6(0x174)]=requireActiveShop;