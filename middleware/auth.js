'use strict';const a16_0x1bbb89=a16_0x1a3b;(function(_0x4fffd2,_0x3e9422){const _0xa607f7=a16_0x1a3b,_0x35a538=_0x4fffd2();while(!![]){try{const _0x54e77a=-parseInt(_0xa607f7(0x132))/0x1+-parseInt(_0xa607f7(0x12f))/0x2*(parseInt(_0xa607f7(0x130))/0x3)+parseInt(_0xa607f7(0x11c))/0x4+parseInt(_0xa607f7(0x123))/0x5+-parseInt(_0xa607f7(0x138))/0x6*(parseInt(_0xa607f7(0x11a))/0x7)+parseInt(_0xa607f7(0x126))/0x8+-parseInt(_0xa607f7(0x13a))/0x9*(-parseInt(_0xa607f7(0x121))/0xa);if(_0x54e77a===_0x3e9422)break;else _0x35a538['push'](_0x35a538['shift']());}catch(_0x3c9fb6){_0x35a538['push'](_0x35a538['shift']());}}}(a16_0x1c2f,0x97bcc));var __importDefault=this&&this[a16_0x1bbb89(0x136)]||function(_0xc324d5){const _0x1bbcd4=a16_0x1bbb89;return _0xc324d5&&_0xc324d5[_0x1bbcd4(0x133)]?_0xc324d5:{'default':_0xc324d5};};Object[a16_0x1bbb89(0x125)](exports,a16_0x1bbb89(0x133),{'value':!![]}),exports[a16_0x1bbb89(0x120)]=exports[a16_0x1bbb89(0x11d)]=exports['requireAdmin']=exports[a16_0x1bbb89(0x134)]=void 0x0;const jsonwebtoken_1=__importDefault(require('jsonwebtoken')),config_1=require('../config/config'),tokenBlacklistService_1=require(a16_0x1bbb89(0x129)),authenticateToken=(_0x5ef22b,_0x57f6c8,_0x1d7281)=>{const _0x54af01=a16_0x1bbb89,_0x25863d=_0x5ef22b[_0x54af01(0x11f)][_0x54af01(0x12e)],_0x688184=_0x25863d&&_0x25863d['split']('\x20')[0x1];if(!_0x688184)return _0x57f6c8[_0x54af01(0x13e)](0x191)[_0x54af01(0x127)]({'success':![],'message':_0x54af01(0x13c)});if(tokenBlacklistService_1[_0x54af01(0x11b)][_0x54af01(0x140)](_0x688184))return _0x57f6c8['status'](0x191)[_0x54af01(0x127)]({'success':![],'message':'Token\x20has\x20been\x20revoked'});jsonwebtoken_1[_0x54af01(0x143)][_0x54af01(0x131)](_0x688184,config_1[_0x54af01(0x142)][_0x54af01(0x11e)][_0x54af01(0x122)],(_0x34e543,_0x325d7)=>{const _0x471825=_0x54af01;if(_0x34e543)return _0x57f6c8['status'](0x193)[_0x471825(0x127)]({'success':![],'message':_0x471825(0x13d)});_0x5ef22b['user']=_0x325d7,_0x5ef22b[_0x471825(0x128)]=_0x688184,_0x1d7281();});};exports['authenticateToken']=authenticateToken;function a16_0x1c2f(){const _0x42e8b7=['error','Shop\x20access\x20required','authorization','266702rOqPuH','3QYpmHJ','verify','759219gFaClz','__esModule','authenticateToken','Error\x20checking\x20account\x20status:','__importDefault','admin','4416924QuvQWX','user','21465MEavkq','../config/database','Access\x20token\x20required','Invalid\x20or\x20expired\x20token','status','Account\x20is\x20suspended\x20or\x20inactive.\x20Contact\x20administrator\x20to\x20activate\x20your\x20account.','isTokenBlacklisted','shop','config','default','role','ACTIVE','7OlDnFI','tokenBlacklistService','4293892vLMixq','requireShop','jwt','headers','requireActiveShop','1390PoPHhY','secret','1113285TaSZoT','Admin\x20access\x20required','defineProperty','4980760FKDnog','json','token','../services/tokenBlacklistService','Error\x20checking\x20account\x20status','SUSPENDED'];a16_0x1c2f=function(){return _0x42e8b7;};return a16_0x1c2f();}const requireAdmin=(_0x52f3fa,_0x18664a,_0x58c5dd)=>{const _0x44272c=a16_0x1bbb89;if(!_0x52f3fa[_0x44272c(0x139)]||_0x52f3fa[_0x44272c(0x139)][_0x44272c(0x144)]!==_0x44272c(0x137))return _0x18664a['status'](0x193)[_0x44272c(0x127)]({'success':![],'message':_0x44272c(0x124)});_0x58c5dd();};exports['requireAdmin']=requireAdmin;const requireShop=(_0x328c18,_0x4a81e8,_0x42f87b)=>{const _0x570ff6=a16_0x1bbb89;if(!_0x328c18[_0x570ff6(0x139)]||_0x328c18['user']['role']!==_0x570ff6(0x141))return _0x4a81e8[_0x570ff6(0x13e)](0x193)[_0x570ff6(0x127)]({'success':![],'message':_0x570ff6(0x12d)});_0x42f87b();};exports[a16_0x1bbb89(0x11d)]=requireShop;const requireActiveShop=async(_0x2ce2aa,_0xab82a3,_0x10f8e6)=>{const _0x4f6ecb=a16_0x1bbb89;if(!_0x2ce2aa[_0x4f6ecb(0x139)]||_0x2ce2aa[_0x4f6ecb(0x139)][_0x4f6ecb(0x144)]!==_0x4f6ecb(0x141))return _0xab82a3[_0x4f6ecb(0x13e)](0x193)[_0x4f6ecb(0x127)]({'success':![],'message':_0x4f6ecb(0x12d)});try{const _0x1926ad=require(_0x4f6ecb(0x13b))[_0x4f6ecb(0x143)],_0xf6c177=await _0x1926ad['shop']['findUnique']({'where':{'id':_0x2ce2aa[_0x4f6ecb(0x139)]['id']},'select':{'status':!![]}});if(!_0xf6c177||_0xf6c177['status']!==_0x4f6ecb(0x119))return _0xab82a3[_0x4f6ecb(0x13e)](0x193)[_0x4f6ecb(0x127)]({'success':![],'message':_0x4f6ecb(0x13f),'suspended':_0xf6c177?.['status']===_0x4f6ecb(0x12b)});_0x10f8e6();}catch(_0x2008c6){return console[_0x4f6ecb(0x12c)](_0x4f6ecb(0x135),_0x2008c6),_0xab82a3['status'](0x1f4)[_0x4f6ecb(0x127)]({'success':![],'message':_0x4f6ecb(0x12a)});}};function a16_0x1a3b(_0x2df1ea,_0x1cc98c){const _0x1c2fab=a16_0x1c2f();return a16_0x1a3b=function(_0x1a3b56,_0x225a4c){_0x1a3b56=_0x1a3b56-0x119;let _0x2696bf=_0x1c2fab[_0x1a3b56];return _0x2696bf;},a16_0x1a3b(_0x2df1ea,_0x1cc98c);}exports[a16_0x1bbb89(0x120)]=requireActiveShop;