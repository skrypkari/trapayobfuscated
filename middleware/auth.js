'use strict';const a16_0x1afbcf=a16_0xb1b4;(function(_0x34c2c9,_0x35010f){const _0x46b1a1=a16_0xb1b4,_0xb7bf1=_0x34c2c9();while(!![]){try{const _0x36f730=-parseInt(_0x46b1a1(0x106))/0x1+parseInt(_0x46b1a1(0x113))/0x2+parseInt(_0x46b1a1(0xfe))/0x3*(parseInt(_0x46b1a1(0x10d))/0x4)+parseInt(_0x46b1a1(0x126))/0x5+-parseInt(_0x46b1a1(0x114))/0x6+parseInt(_0x46b1a1(0xfd))/0x7*(-parseInt(_0x46b1a1(0x100))/0x8)+-parseInt(_0x46b1a1(0x109))/0x9*(-parseInt(_0x46b1a1(0x110))/0xa);if(_0x36f730===_0x35010f)break;else _0xb7bf1['push'](_0xb7bf1['shift']());}catch(_0x4499cd){_0xb7bf1['push'](_0xb7bf1['shift']());}}}(a16_0x28a8,0x33ded));var __importDefault=this&&this[a16_0x1afbcf(0x10f)]||function(_0x35c99b){const _0xf8450e=a16_0x1afbcf;return _0x35c99b&&_0x35c99b[_0xf8450e(0x104)]?_0x35c99b:{'default':_0x35c99b};};Object[a16_0x1afbcf(0x124)](exports,a16_0x1afbcf(0x104),{'value':!![]}),exports[a16_0x1afbcf(0x116)]=exports[a16_0x1afbcf(0x112)]=exports['requireAdmin']=exports[a16_0x1afbcf(0x119)]=void 0x0;const jsonwebtoken_1=__importDefault(require(a16_0x1afbcf(0x10e))),config_1=require(a16_0x1afbcf(0x125)),tokenBlacklistService_1=require(a16_0x1afbcf(0x11e)),authenticateToken=(_0x3a8fb9,_0x489224,_0x3aa7b9)=>{const _0x279f04=a16_0x1afbcf,_0x5ebdf5=_0x3a8fb9['headers'][_0x279f04(0x120)],_0x467acd=_0x5ebdf5&&_0x5ebdf5[_0x279f04(0x11c)]('\x20')[0x1];if(!_0x467acd)return _0x489224[_0x279f04(0x10c)](0x191)[_0x279f04(0x11f)]({'success':![],'message':_0x279f04(0x102)});if(tokenBlacklistService_1[_0x279f04(0x117)][_0x279f04(0x10b)](_0x467acd))return _0x489224['status'](0x191)[_0x279f04(0x11f)]({'success':![],'message':_0x279f04(0x111)});jsonwebtoken_1['default'][_0x279f04(0x103)](_0x467acd,config_1[_0x279f04(0x123)]['jwt'][_0x279f04(0x10a)],(_0x1c4c0e,_0x3164c5)=>{const _0x18f8cf=_0x279f04;if(_0x1c4c0e)return _0x489224['status'](0x193)[_0x18f8cf(0x11f)]({'success':![],'message':_0x18f8cf(0x115)});_0x3a8fb9['user']=_0x3164c5,_0x3a8fb9[_0x18f8cf(0xff)]=_0x467acd,_0x3aa7b9();});};exports['authenticateToken']=authenticateToken;const requireAdmin=(_0x919e1,_0x26e05a,_0x59aa61)=>{const _0x44485e=a16_0x1afbcf;if(!_0x919e1[_0x44485e(0x121)]||_0x919e1[_0x44485e(0x121)][_0x44485e(0x108)]!==_0x44485e(0x122))return _0x26e05a[_0x44485e(0x10c)](0x193)[_0x44485e(0x11f)]({'success':![],'message':_0x44485e(0x107)});_0x59aa61();};exports['requireAdmin']=requireAdmin;const requireShop=(_0x5c63b3,_0xdf88c5,_0x2c76f0)=>{const _0x1cafcd=a16_0x1afbcf;if(!_0x5c63b3[_0x1cafcd(0x121)]||_0x5c63b3[_0x1cafcd(0x121)][_0x1cafcd(0x108)]!==_0x1cafcd(0x101))return _0xdf88c5[_0x1cafcd(0x10c)](0x193)[_0x1cafcd(0x11f)]({'success':![],'message':_0x1cafcd(0x118)});_0x2c76f0();};function a16_0x28a8(){const _0x3d495e=['shop','Access\x20token\x20required','verify','__esModule','Account\x20is\x20suspended\x20or\x20inactive.\x20Contact\x20administrator\x20to\x20activate\x20your\x20account.','227082VsgCAG','Admin\x20access\x20required','role','7920009dpVSHQ','secret','isTokenBlacklisted','status','276MmBpYA','jsonwebtoken','__importDefault','10WZezXB','Token\x20has\x20been\x20revoked','requireShop','76848jmbUxw','2303934umiqcj','Invalid\x20or\x20expired\x20token','requireActiveShop','tokenBlacklistService','Shop\x20access\x20required','authenticateToken','$disconnect','Error\x20checking\x20account\x20status','split','findUnique','../services/tokenBlacklistService','json','authorization','user','admin','config','defineProperty','../config/config','135210UyERYx','931091jgJhzK','12048cUHnMH','token','24ApYBhQ'];a16_0x28a8=function(){return _0x3d495e;};return a16_0x28a8();}exports['requireShop']=requireShop;function a16_0xb1b4(_0x565e1f,_0x5b7e49){const _0x28a8c9=a16_0x28a8();return a16_0xb1b4=function(_0xb1b4be,_0x3b7fcc){_0xb1b4be=_0xb1b4be-0xfd;let _0x80b365=_0x28a8c9[_0xb1b4be];return _0x80b365;},a16_0xb1b4(_0x565e1f,_0x5b7e49);}const requireActiveShop=async(_0x2b76b0,_0x1ba055,_0x15c96a)=>{const _0x17953c=a16_0x1afbcf;if(!_0x2b76b0['user']||_0x2b76b0[_0x17953c(0x121)]['role']!=='shop')return _0x1ba055[_0x17953c(0x10c)](0x193)[_0x17953c(0x11f)]({'success':![],'message':_0x17953c(0x118)});try{const {PrismaClient:_0x1b6690}=require('@prisma/client'),_0x59ab03=new _0x1b6690(),_0x55973e=await _0x59ab03['shop'][_0x17953c(0x11d)]({'where':{'id':_0x2b76b0[_0x17953c(0x121)]['id']},'select':{'status':!![]}});if(!_0x55973e||_0x55973e['status']!=='ACTIVE')return _0x1ba055[_0x17953c(0x10c)](0x193)['json']({'success':![],'message':_0x17953c(0x105),'suspended':_0x55973e?.[_0x17953c(0x10c)]==='SUSPENDED'});await _0x59ab03[_0x17953c(0x11a)](),_0x15c96a();}catch(_0x24a955){return _0x1ba055['status'](0x1f4)[_0x17953c(0x11f)]({'success':![],'message':_0x17953c(0x11b)});}};exports[a16_0x1afbcf(0x116)]=requireActiveShop;