'use strict';const a16_0x1738a9=a16_0x3535;(function(_0x56719d,_0x2b6352){const _0x15312b=a16_0x3535,_0x3f83f6=_0x56719d();while(!![]){try{const _0x3a125a=parseInt(_0x15312b(0xa6))/0x1*(parseInt(_0x15312b(0x95))/0x2)+-parseInt(_0x15312b(0xb5))/0x3+parseInt(_0x15312b(0xa3))/0x4*(parseInt(_0x15312b(0xbd))/0x5)+-parseInt(_0x15312b(0xb1))/0x6+parseInt(_0x15312b(0xc0))/0x7+parseInt(_0x15312b(0xb9))/0x8*(-parseInt(_0x15312b(0xaa))/0x9)+parseInt(_0x15312b(0xab))/0xa*(-parseInt(_0x15312b(0xa1))/0xb);if(_0x3a125a===_0x2b6352)break;else _0x3f83f6['push'](_0x3f83f6['shift']());}catch(_0x4278e8){_0x3f83f6['push'](_0x3f83f6['shift']());}}}(a16_0x5417,0x7b4f3));var __importDefault=this&&this[a16_0x1738a9(0xa4)]||function(_0x331cbd){const _0x4821cd=a16_0x1738a9;return _0x331cbd&&_0x331cbd[_0x4821cd(0xac)]?_0x331cbd:{'default':_0x331cbd};};Object[a16_0x1738a9(0xbb)](exports,a16_0x1738a9(0xac),{'value':!![]}),exports[a16_0x1738a9(0xa8)]=exports[a16_0x1738a9(0xb3)]=exports[a16_0x1738a9(0xaf)]=exports['authenticateToken']=void 0x0;const jsonwebtoken_1=__importDefault(require(a16_0x1738a9(0xae))),config_1=require(a16_0x1738a9(0xbe)),tokenBlacklistService_1=require(a16_0x1738a9(0x9c)),authenticateToken=(_0x274409,_0x694929,_0x48bda3)=>{const _0x470ca4=a16_0x1738a9,_0x19a430=_0x274409['headers'][_0x470ca4(0x9a)],_0xcc2845=_0x19a430&&_0x19a430[_0x470ca4(0x9d)]('\x20')[0x1];if(!_0xcc2845)return _0x694929[_0x470ca4(0xc2)](0x191)[_0x470ca4(0x9f)]({'success':![],'message':_0x470ca4(0x98)});if(tokenBlacklistService_1[_0x470ca4(0xbf)][_0x470ca4(0x99)](_0xcc2845))return _0x694929[_0x470ca4(0xc2)](0x191)[_0x470ca4(0x9f)]({'success':![],'message':_0x470ca4(0xc1)});jsonwebtoken_1[_0x470ca4(0xb7)][_0x470ca4(0xba)](_0xcc2845,config_1[_0x470ca4(0xad)][_0x470ca4(0xb6)][_0x470ca4(0xa0)],(_0x4c23a1,_0x18ccb3)=>{const _0x490bac=_0x470ca4;if(_0x4c23a1)return _0x694929[_0x490bac(0xc2)](0x193)['json']({'success':![],'message':_0x490bac(0xc3)});_0x274409[_0x490bac(0xa7)]=_0x18ccb3,_0x274409[_0x490bac(0xb2)]=_0xcc2845,_0x48bda3();});};exports['authenticateToken']=authenticateToken;const requireAdmin=(_0x3d7380,_0x23179a,_0xa424a2)=>{const _0x31ffc1=a16_0x1738a9;if(!_0x3d7380[_0x31ffc1(0xa7)]||_0x3d7380[_0x31ffc1(0xa7)][_0x31ffc1(0xb8)]!==_0x31ffc1(0x96))return _0x23179a[_0x31ffc1(0xc2)](0x193)['json']({'success':![],'message':_0x31ffc1(0x9e)});_0xa424a2();};exports[a16_0x1738a9(0xaf)]=requireAdmin;const requireShop=(_0x3b1a1f,_0x14b04a,_0x1f7689)=>{const _0x4b2ee7=a16_0x1738a9;if(!_0x3b1a1f[_0x4b2ee7(0xa7)]||_0x3b1a1f[_0x4b2ee7(0xa7)]['role']!==_0x4b2ee7(0xbc))return _0x14b04a['status'](0x193)['json']({'success':![],'message':_0x4b2ee7(0x9b)});_0x1f7689();};function a16_0x3535(_0x4050c4,_0x1d8df9){const _0x541761=a16_0x5417();return a16_0x3535=function(_0x35354b,_0x5610d0){_0x35354b=_0x35354b-0x95;let _0x14e380=_0x541761[_0x35354b];return _0x14e380;},a16_0x3535(_0x4050c4,_0x1d8df9);}exports['requireShop']=requireShop;function a16_0x5417(){const _0x5862a3=['3258796MnRAkv','__importDefault','SUSPENDED','211izaPnB','user','requireActiveShop','Error\x20checking\x20account\x20status:','1670103wOgPGY','460NzmTqg','__esModule','config','jsonwebtoken','requireAdmin','ACTIVE','3762054sBjDKD','token','requireShop','findUnique','1714773ILbEYH','jwt','default','role','16jGTYHp','verify','defineProperty','shop','5yQBzJU','../config/config','tokenBlacklistService','6470569raVSii','Token\x20has\x20been\x20revoked','status','Invalid\x20or\x20expired\x20token','6814muDKoU','admin','Error\x20checking\x20account\x20status','Access\x20token\x20required','isTokenBlacklisted','authorization','Shop\x20access\x20required','../services/tokenBlacklistService','split','Admin\x20access\x20required','json','secret','91619kXZWKs','../config/database'];a16_0x5417=function(){return _0x5862a3;};return a16_0x5417();}const requireActiveShop=async(_0xad6cc2,_0x399c83,_0x45eb5c)=>{const _0x5a0725=a16_0x1738a9;if(!_0xad6cc2[_0x5a0725(0xa7)]||_0xad6cc2[_0x5a0725(0xa7)]['role']!=='shop')return _0x399c83['status'](0x193)[_0x5a0725(0x9f)]({'success':![],'message':_0x5a0725(0x9b)});try{const _0x43353b=require(_0x5a0725(0xa2))[_0x5a0725(0xb7)],_0x115ff8=await _0x43353b[_0x5a0725(0xbc)][_0x5a0725(0xb4)]({'where':{'id':_0xad6cc2[_0x5a0725(0xa7)]['id']},'select':{'status':!![]}});if(!_0x115ff8||_0x115ff8['status']!==_0x5a0725(0xb0))return _0x399c83[_0x5a0725(0xc2)](0x193)[_0x5a0725(0x9f)]({'success':![],'message':'Account\x20is\x20suspended\x20or\x20inactive.\x20Contact\x20administrator\x20to\x20activate\x20your\x20account.','suspended':_0x115ff8?.[_0x5a0725(0xc2)]===_0x5a0725(0xa5)});_0x45eb5c();}catch(_0x31b75e){return console['error'](_0x5a0725(0xa9),_0x31b75e),_0x399c83[_0x5a0725(0xc2)](0x1f4)['json']({'success':![],'message':_0x5a0725(0x97)});}};exports['requireActiveShop']=requireActiveShop;