'use strict';const a16_0x424eed=a16_0x2a67;(function(_0x3646df,_0x565689){const _0x39ec59=a16_0x2a67,_0x179b60=_0x3646df();while(!![]){try{const _0x2b6e9a=-parseInt(_0x39ec59(0x106))/0x1+-parseInt(_0x39ec59(0x10b))/0x2+-parseInt(_0x39ec59(0x10f))/0x3*(parseInt(_0x39ec59(0x107))/0x4)+-parseInt(_0x39ec59(0x101))/0x5*(-parseInt(_0x39ec59(0x11b))/0x6)+parseInt(_0x39ec59(0x115))/0x7*(-parseInt(_0x39ec59(0x109))/0x8)+parseInt(_0x39ec59(0x100))/0x9*(parseInt(_0x39ec59(0x104))/0xa)+parseInt(_0x39ec59(0x118))/0xb*(parseInt(_0x39ec59(0x121))/0xc);if(_0x2b6e9a===_0x565689)break;else _0x179b60['push'](_0x179b60['shift']());}catch(_0x28a039){_0x179b60['push'](_0x179b60['shift']());}}}(a16_0x2b3b,0x66514));var __importDefault=this&&this[a16_0x424eed(0x10c)]||function(_0x559b70){const _0x303cd0=a16_0x424eed;return _0x559b70&&_0x559b70[_0x303cd0(0x105)]?_0x559b70:{'default':_0x559b70};};Object[a16_0x424eed(0x11a)](exports,'__esModule',{'value':!![]}),exports[a16_0x424eed(0x128)]=exports[a16_0x424eed(0x113)]=exports['requireAdmin']=exports['authenticateToken']=void 0x0;const jsonwebtoken_1=__importDefault(require(a16_0x424eed(0x108))),config_1=require(a16_0x424eed(0x117)),tokenBlacklistService_1=require(a16_0x424eed(0x102)),authenticateToken=(_0x355154,_0x445bf8,_0x235092)=>{const _0x26ba07=a16_0x424eed,_0x56d0b7=_0x355154['headers'][_0x26ba07(0x125)],_0x391771=_0x56d0b7&&_0x56d0b7[_0x26ba07(0xff)]('\x20')[0x1];if(!_0x391771)return _0x445bf8['status'](0x191)[_0x26ba07(0x116)]({'success':![],'message':_0x26ba07(0x129)});if(tokenBlacklistService_1[_0x26ba07(0xfd)][_0x26ba07(0x111)](_0x391771))return _0x445bf8['status'](0x191)['json']({'success':![],'message':_0x26ba07(0x127)});jsonwebtoken_1[_0x26ba07(0x114)][_0x26ba07(0x11e)](_0x391771,config_1[_0x26ba07(0x11f)][_0x26ba07(0xfe)][_0x26ba07(0x11d)],(_0x154677,_0x24cd54)=>{const _0x23b962=_0x26ba07;if(_0x154677)return _0x445bf8[_0x23b962(0x110)](0x193)['json']({'success':![],'message':_0x23b962(0x123)});_0x355154['user']=_0x24cd54,_0x355154['token']=_0x391771,_0x235092();});};function a16_0x2a67(_0x3abebd,_0x15b0ae){const _0x2b3b18=a16_0x2b3b();return a16_0x2a67=function(_0x2a67be,_0x28730f){_0x2a67be=_0x2a67be-0xfc;let _0x40e97d=_0x2b3b18[_0x2a67be];return _0x40e97d;},a16_0x2a67(_0x3abebd,_0x15b0ae);}exports[a16_0x424eed(0x124)]=authenticateToken;const requireAdmin=(_0x30b1c0,_0xa7184e,_0x7ead2b)=>{const _0x59cea5=a16_0x424eed;if(!_0x30b1c0['user']||_0x30b1c0[_0x59cea5(0x119)][_0x59cea5(0x112)]!==_0x59cea5(0x120))return _0xa7184e[_0x59cea5(0x110)](0x193)[_0x59cea5(0x116)]({'success':![],'message':_0x59cea5(0x103)});_0x7ead2b();};function a16_0x2b3b(){const _0x2bb20d=['3wraaEl','status','isTokenBlacklisted','role','requireShop','default','6349KSCJxz','json','../config/config','869KnLuYs','user','defineProperty','678LpwxYH','Error\x20checking\x20account\x20status:','secret','verify','config','admin','100908EnUmkd','SUSPENDED','Invalid\x20or\x20expired\x20token','authenticateToken','authorization','Account\x20is\x20suspended\x20or\x20inactive.\x20Contact\x20administrator\x20to\x20activate\x20your\x20account.','Token\x20has\x20been\x20revoked','requireActiveShop','Access\x20token\x20required','findUnique','ACTIVE','requireAdmin','tokenBlacklistService','jwt','split','18612YoeCMw','25565DxFboI','../services/tokenBlacklistService','Admin\x20access\x20required','4050WHVRKX','__esModule','70397oUvUZc','3125140wsepGw','jsonwebtoken','4304kZaaxG','Error\x20checking\x20account\x20status','641760HnJFyu','__importDefault','shop','Shop\x20access\x20required'];a16_0x2b3b=function(){return _0x2bb20d;};return a16_0x2b3b();}exports[a16_0x424eed(0xfc)]=requireAdmin;const requireShop=(_0x5d6f04,_0xe8d28b,_0x526b6f)=>{const _0x55064d=a16_0x424eed;if(!_0x5d6f04[_0x55064d(0x119)]||_0x5d6f04[_0x55064d(0x119)][_0x55064d(0x112)]!=='shop')return _0xe8d28b[_0x55064d(0x110)](0x193)['json']({'success':![],'message':_0x55064d(0x10e)});_0x526b6f();};exports[a16_0x424eed(0x113)]=requireShop;const requireActiveShop=async(_0xec3cbb,_0x52e926,_0x2a22b6)=>{const _0x4c1107=a16_0x424eed;if(!_0xec3cbb[_0x4c1107(0x119)]||_0xec3cbb[_0x4c1107(0x119)][_0x4c1107(0x112)]!==_0x4c1107(0x10d))return _0x52e926[_0x4c1107(0x110)](0x193)['json']({'success':![],'message':_0x4c1107(0x10e)});try{const _0x9b30ce=require('../config/database')[_0x4c1107(0x114)],_0xa5b1a6=await _0x9b30ce['shop'][_0x4c1107(0x12a)]({'where':{'id':_0xec3cbb[_0x4c1107(0x119)]['id']},'select':{'status':!![]}});if(!_0xa5b1a6||_0xa5b1a6[_0x4c1107(0x110)]!==_0x4c1107(0x12b))return _0x52e926[_0x4c1107(0x110)](0x193)['json']({'success':![],'message':_0x4c1107(0x126),'suspended':_0xa5b1a6?.[_0x4c1107(0x110)]===_0x4c1107(0x122)});_0x2a22b6();}catch(_0x275d80){return console['error'](_0x4c1107(0x11c),_0x275d80),_0x52e926[_0x4c1107(0x110)](0x1f4)[_0x4c1107(0x116)]({'success':![],'message':_0x4c1107(0x10a)});}};exports[a16_0x424eed(0x128)]=requireActiveShop;