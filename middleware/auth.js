'use strict';const a22_0x5e8595=a22_0x24a8;(function(_0x55e91f,_0x378c8d){const _0x1dbf1d=a22_0x24a8,_0x2e24fe=_0x55e91f();while(!![]){try{const _0x7848e2=parseInt(_0x1dbf1d(0x78))/0x1+-parseInt(_0x1dbf1d(0x9c))/0x2*(-parseInt(_0x1dbf1d(0x7a))/0x3)+parseInt(_0x1dbf1d(0x99))/0x4*(-parseInt(_0x1dbf1d(0x8c))/0x5)+parseInt(_0x1dbf1d(0x97))/0x6+parseInt(_0x1dbf1d(0x86))/0x7+-parseInt(_0x1dbf1d(0x74))/0x8+-parseInt(_0x1dbf1d(0x95))/0x9;if(_0x7848e2===_0x378c8d)break;else _0x2e24fe['push'](_0x2e24fe['shift']());}catch(_0x3118d3){_0x2e24fe['push'](_0x2e24fe['shift']());}}}(a22_0x3e93,0x79b2a));var __importDefault=this&&this[a22_0x5e8595(0x81)]||function(_0x58e02e){const _0x2ae67b=a22_0x5e8595;return _0x58e02e&&_0x58e02e[_0x2ae67b(0x7b)]?_0x58e02e:{'default':_0x58e02e};};Object[a22_0x5e8595(0x79)](exports,a22_0x5e8595(0x7b),{'value':!![]}),exports['requireActiveShop']=exports[a22_0x5e8595(0x91)]=exports[a22_0x5e8595(0x8b)]=exports['authenticateToken']=void 0x0;function a22_0x3e93(){const _0x2e3349=['9747009jjewdA','isTokenBlacklisted','2202978cKTVtN','status','4orJZxw','split','Shop\x20access\x20required','2kwwJpb','jwt','519856tUhXKs','Token\x20has\x20been\x20revoked','verify','requireActiveShop','936358fiPwKN','defineProperty','1344663rkQhFj','__esModule','role','../config/config','shop','authorization','tokenBlacklistService','__importDefault','../services/tokenBlacklistService','error','json','default','5394368DjQlbi','Invalid\x20or\x20expired\x20token','SUSPENDED','user','jsonwebtoken','requireAdmin','4379545HjUazA','secret','authenticateToken','Admin\x20access\x20required','../config/database','requireShop','admin','headers','Error\x20checking\x20account\x20status:'];a22_0x3e93=function(){return _0x2e3349;};return a22_0x3e93();}const jsonwebtoken_1=__importDefault(require(a22_0x5e8595(0x8a))),config_1=require(a22_0x5e8595(0x7d)),tokenBlacklistService_1=require(a22_0x5e8595(0x82)),authenticateToken=(_0x29eaae,_0x1beffd,_0x2f59f9)=>{const _0x1c3a86=a22_0x5e8595,_0x878a86=_0x29eaae[_0x1c3a86(0x93)][_0x1c3a86(0x7f)],_0x26a3c0=_0x878a86&&_0x878a86[_0x1c3a86(0x9a)]('\x20')[0x1];if(!_0x26a3c0)return _0x1beffd[_0x1c3a86(0x98)](0x191)[_0x1c3a86(0x84)]({'success':![],'message':'Access\x20token\x20required'});if(tokenBlacklistService_1[_0x1c3a86(0x80)][_0x1c3a86(0x96)](_0x26a3c0))return _0x1beffd[_0x1c3a86(0x98)](0x191)[_0x1c3a86(0x84)]({'success':![],'message':_0x1c3a86(0x75)});jsonwebtoken_1[_0x1c3a86(0x85)][_0x1c3a86(0x76)](_0x26a3c0,config_1['config'][_0x1c3a86(0x73)][_0x1c3a86(0x8d)],(_0x1702d8,_0x461d09)=>{const _0x2978a8=_0x1c3a86;if(_0x1702d8)return _0x1beffd['status'](0x193)[_0x2978a8(0x84)]({'success':![],'message':_0x2978a8(0x87)});_0x29eaae['user']=_0x461d09,_0x29eaae['token']=_0x26a3c0,_0x2f59f9();});};exports[a22_0x5e8595(0x8e)]=authenticateToken;const requireAdmin=(_0x273fc4,_0x47caa,_0x5e07e2)=>{const _0x1588c3=a22_0x5e8595;if(!_0x273fc4['user']||_0x273fc4[_0x1588c3(0x89)][_0x1588c3(0x7c)]!==_0x1588c3(0x92))return _0x47caa[_0x1588c3(0x98)](0x193)[_0x1588c3(0x84)]({'success':![],'message':_0x1588c3(0x8f)});_0x5e07e2();};function a22_0x24a8(_0x3b0dd9,_0x12f7de){_0x3b0dd9=_0x3b0dd9-0x73;const _0x3e93da=a22_0x3e93();let _0x24a83a=_0x3e93da[_0x3b0dd9];return _0x24a83a;}exports['requireAdmin']=requireAdmin;const requireShop=(_0x1bfd9f,_0x2ae550,_0xab45c2)=>{const _0xa81cdd=a22_0x5e8595;if(!_0x1bfd9f[_0xa81cdd(0x89)]||_0x1bfd9f[_0xa81cdd(0x89)][_0xa81cdd(0x7c)]!==_0xa81cdd(0x7e))return _0x2ae550[_0xa81cdd(0x98)](0x193)['json']({'success':![],'message':_0xa81cdd(0x9b)});_0xab45c2();};exports[a22_0x5e8595(0x91)]=requireShop;const requireActiveShop=async(_0x20f821,_0xf254f4,_0x2e5c06)=>{const _0x1a7531=a22_0x5e8595;if(!_0x20f821[_0x1a7531(0x89)]||_0x20f821['user'][_0x1a7531(0x7c)]!==_0x1a7531(0x7e))return _0xf254f4['status'](0x193)['json']({'success':![],'message':'Shop\x20access\x20required'});try{const _0x23bb7d=require(_0x1a7531(0x90))[_0x1a7531(0x85)],_0x582f74=await _0x23bb7d[_0x1a7531(0x7e)]['findUnique']({'where':{'id':_0x20f821[_0x1a7531(0x89)]['id']},'select':{'status':!![]}});if(!_0x582f74||_0x582f74[_0x1a7531(0x98)]!=='ACTIVE')return _0xf254f4['status'](0x193)[_0x1a7531(0x84)]({'success':![],'message':'Account\x20is\x20suspended\x20or\x20inactive.\x20Contact\x20administrator\x20to\x20activate\x20your\x20account.','suspended':_0x582f74?.[_0x1a7531(0x98)]===_0x1a7531(0x88)});_0x2e5c06();}catch(_0x2f1ce2){return console[_0x1a7531(0x83)](_0x1a7531(0x94),_0x2f1ce2),_0xf254f4[_0x1a7531(0x98)](0x1f4)[_0x1a7531(0x84)]({'success':![],'message':'Error\x20checking\x20account\x20status'});}};exports[a22_0x5e8595(0x77)]=requireActiveShop;