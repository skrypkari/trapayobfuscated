'use strict';const a16_0x36b29d=a16_0x73a1;(function(_0x525379,_0x572079){const _0x28f1a3=a16_0x73a1,_0x41d02a=_0x525379();while(!![]){try{const _0x47d9cc=parseInt(_0x28f1a3(0x15a))/0x1*(parseInt(_0x28f1a3(0x153))/0x2)+parseInt(_0x28f1a3(0x155))/0x3+-parseInt(_0x28f1a3(0x148))/0x4*(parseInt(_0x28f1a3(0x15b))/0x5)+-parseInt(_0x28f1a3(0x147))/0x6*(-parseInt(_0x28f1a3(0x13c))/0x7)+parseInt(_0x28f1a3(0x15f))/0x8+parseInt(_0x28f1a3(0x157))/0x9*(parseInt(_0x28f1a3(0x15e))/0xa)+-parseInt(_0x28f1a3(0x139))/0xb*(parseInt(_0x28f1a3(0x14a))/0xc);if(_0x47d9cc===_0x572079)break;else _0x41d02a['push'](_0x41d02a['shift']());}catch(_0x583761){_0x41d02a['push'](_0x41d02a['shift']());}}}(a16_0x1c41,0x84290));function a16_0x73a1(_0xbc3d9e,_0xdaa9e7){const _0x1c41ce=a16_0x1c41();return a16_0x73a1=function(_0x73a198,_0x2cb788){_0x73a198=_0x73a198-0x136;let _0x39a125=_0x1c41ce[_0x73a198];return _0x39a125;},a16_0x73a1(_0xbc3d9e,_0xdaa9e7);}function a16_0x1c41(){const _0x5e9875=['SUSPENDED','default','../services/tokenBlacklistService','requireShop','Access\x20token\x20required','json','status','findUnique','693394ymmCFm','__importDefault','474792OWymMJ','Shop\x20access\x20required','3771XTYBuG','defineProperty','shop','2YVBQkw','15595xguYbN','headers','authenticateToken','380dRaEKm','1402768MdXVXB','__esModule','Error\x20checking\x20account\x20status:','Account\x20is\x20suspended\x20or\x20inactive.\x20Contact\x20administrator\x20to\x20activate\x20your\x20account.','jwt','jsonwebtoken','token','Admin\x20access\x20required','55fyTEOD','config','requireActiveShop','675794lyspOO','admin','verify','tokenBlacklistService','split','user','role','secret','authorization','Invalid\x20or\x20expired\x20token','Token\x20has\x20been\x20revoked','24PsybPY','276SroWsY','requireAdmin','1614132aRemLW'];a16_0x1c41=function(){return _0x5e9875;};return a16_0x1c41();}var __importDefault=this&&this[a16_0x36b29d(0x154)]||function(_0x3cab09){return _0x3cab09&&_0x3cab09['__esModule']?_0x3cab09:{'default':_0x3cab09};};Object[a16_0x36b29d(0x158)](exports,a16_0x36b29d(0x160),{'value':!![]}),exports[a16_0x36b29d(0x13b)]=exports[a16_0x36b29d(0x14e)]=exports[a16_0x36b29d(0x149)]=exports[a16_0x36b29d(0x15d)]=void 0x0;const jsonwebtoken_1=__importDefault(require(a16_0x36b29d(0x136))),config_1=require('../config/config'),tokenBlacklistService_1=require(a16_0x36b29d(0x14d)),authenticateToken=(_0x5da724,_0x3b8b7f,_0x35911f)=>{const _0x2b303f=a16_0x36b29d,_0x41d990=_0x5da724[_0x2b303f(0x15c)][_0x2b303f(0x144)],_0x458b1f=_0x41d990&&_0x41d990[_0x2b303f(0x140)]('\x20')[0x1];if(!_0x458b1f)return _0x3b8b7f[_0x2b303f(0x151)](0x191)[_0x2b303f(0x150)]({'success':![],'message':_0x2b303f(0x14f)});if(tokenBlacklistService_1[_0x2b303f(0x13f)]['isTokenBlacklisted'](_0x458b1f))return _0x3b8b7f['status'](0x191)[_0x2b303f(0x150)]({'success':![],'message':_0x2b303f(0x146)});jsonwebtoken_1[_0x2b303f(0x14c)][_0x2b303f(0x13e)](_0x458b1f,config_1[_0x2b303f(0x13a)][_0x2b303f(0x163)][_0x2b303f(0x143)],(_0x2fe2fe,_0x439142)=>{const _0xbaff8a=_0x2b303f;if(_0x2fe2fe)return _0x3b8b7f[_0xbaff8a(0x151)](0x193)[_0xbaff8a(0x150)]({'success':![],'message':_0xbaff8a(0x145)});_0x5da724['user']=_0x439142,_0x5da724[_0xbaff8a(0x137)]=_0x458b1f,_0x35911f();});};exports[a16_0x36b29d(0x15d)]=authenticateToken;const requireAdmin=(_0x631d21,_0x285273,_0x29ac76)=>{const _0x2fce28=a16_0x36b29d;if(!_0x631d21[_0x2fce28(0x141)]||_0x631d21[_0x2fce28(0x141)][_0x2fce28(0x142)]!==_0x2fce28(0x13d))return _0x285273[_0x2fce28(0x151)](0x193)[_0x2fce28(0x150)]({'success':![],'message':_0x2fce28(0x138)});_0x29ac76();};exports[a16_0x36b29d(0x149)]=requireAdmin;const requireShop=(_0x9eba16,_0x426281,_0x1a1aa1)=>{const _0x7b3627=a16_0x36b29d;if(!_0x9eba16[_0x7b3627(0x141)]||_0x9eba16[_0x7b3627(0x141)]['role']!==_0x7b3627(0x159))return _0x426281[_0x7b3627(0x151)](0x193)[_0x7b3627(0x150)]({'success':![],'message':_0x7b3627(0x156)});_0x1a1aa1();};exports['requireShop']=requireShop;const requireActiveShop=async(_0x343f34,_0x3af269,_0x30d1bd)=>{const _0x2bbf1e=a16_0x36b29d;if(!_0x343f34[_0x2bbf1e(0x141)]||_0x343f34[_0x2bbf1e(0x141)][_0x2bbf1e(0x142)]!==_0x2bbf1e(0x159))return _0x3af269[_0x2bbf1e(0x151)](0x193)[_0x2bbf1e(0x150)]({'success':![],'message':_0x2bbf1e(0x156)});try{const _0x3983c4=require('../config/database')[_0x2bbf1e(0x14c)],_0x5ec0df=await _0x3983c4[_0x2bbf1e(0x159)][_0x2bbf1e(0x152)]({'where':{'id':_0x343f34[_0x2bbf1e(0x141)]['id']},'select':{'status':!![]}});if(!_0x5ec0df||_0x5ec0df['status']!=='ACTIVE')return _0x3af269[_0x2bbf1e(0x151)](0x193)[_0x2bbf1e(0x150)]({'success':![],'message':_0x2bbf1e(0x162),'suspended':_0x5ec0df?.[_0x2bbf1e(0x151)]===_0x2bbf1e(0x14b)});_0x30d1bd();}catch(_0x10db26){return console['error'](_0x2bbf1e(0x161),_0x10db26),_0x3af269[_0x2bbf1e(0x151)](0x1f4)[_0x2bbf1e(0x150)]({'success':![],'message':'Error\x20checking\x20account\x20status'});}};exports[a16_0x36b29d(0x13b)]=requireActiveShop;