'use strict';const a16_0x1b60ec=a16_0x5874;(function(_0x576d24,_0x1c6e23){const _0x315d38=a16_0x5874,_0x1daa65=_0x576d24();while(!![]){try{const _0x12e4f0=-parseInt(_0x315d38(0x1e6))/0x1+-parseInt(_0x315d38(0x1d6))/0x2*(parseInt(_0x315d38(0x1c6))/0x3)+-parseInt(_0x315d38(0x1d7))/0x4+parseInt(_0x315d38(0x1e5))/0x5+parseInt(_0x315d38(0x1c4))/0x6+-parseInt(_0x315d38(0x1e1))/0x7*(-parseInt(_0x315d38(0x1d9))/0x8)+parseInt(_0x315d38(0x1d3))/0x9;if(_0x12e4f0===_0x1c6e23)break;else _0x1daa65['push'](_0x1daa65['shift']());}catch(_0x8a74d7){_0x1daa65['push'](_0x1daa65['shift']());}}}(a16_0x4fbc,0x979ef));var __importDefault=this&&this['__importDefault']||function(_0x4159fe){return _0x4159fe&&_0x4159fe['__esModule']?_0x4159fe:{'default':_0x4159fe};};Object[a16_0x1b60ec(0x1c9)](exports,a16_0x1b60ec(0x1d2),{'value':!![]}),exports[a16_0x1b60ec(0x1c3)]=exports[a16_0x1b60ec(0x1cf)]=exports[a16_0x1b60ec(0x1d4)]=exports[a16_0x1b60ec(0x1e2)]=void 0x0;const jsonwebtoken_1=__importDefault(require('jsonwebtoken')),config_1=require(a16_0x1b60ec(0x1d1)),tokenBlacklistService_1=require(a16_0x1b60ec(0x1c7)),authenticateToken=(_0x25721f,_0x566153,_0x8b373f)=>{const _0x33721a=a16_0x1b60ec,_0x1075c3=_0x25721f[_0x33721a(0x1cc)][_0x33721a(0x1e3)],_0x4d2bb9=_0x1075c3&&_0x1075c3[_0x33721a(0x1ca)]('\x20')[0x1];if(!_0x4d2bb9)return _0x566153[_0x33721a(0x1ce)](0x191)[_0x33721a(0x1d8)]({'success':![],'message':_0x33721a(0x1dc)});if(tokenBlacklistService_1[_0x33721a(0x1d0)][_0x33721a(0x1de)](_0x4d2bb9))return _0x566153[_0x33721a(0x1ce)](0x191)['json']({'success':![],'message':_0x33721a(0x1cd)});jsonwebtoken_1[_0x33721a(0x1e4)]['verify'](_0x4d2bb9,config_1[_0x33721a(0x1db)]['jwt']['secret'],(_0x5a4a28,_0x36e3ca)=>{const _0x3a7ab4=_0x33721a;if(_0x5a4a28)return _0x566153['status'](0x193)[_0x3a7ab4(0x1d8)]({'success':![],'message':_0x3a7ab4(0x1be)});_0x25721f[_0x3a7ab4(0x1c5)]=_0x36e3ca,_0x25721f[_0x3a7ab4(0x1e0)]=_0x4d2bb9,_0x8b373f();});};exports['authenticateToken']=authenticateToken;const requireAdmin=(_0x17629e,_0x4b790d,_0x22903f)=>{const _0x5a95c4=a16_0x1b60ec;if(!_0x17629e[_0x5a95c4(0x1c5)]||_0x17629e[_0x5a95c4(0x1c5)][_0x5a95c4(0x1bf)]!==_0x5a95c4(0x1dd))return _0x4b790d['status'](0x193)['json']({'success':![],'message':'Admin\x20access\x20required'});_0x22903f();};exports[a16_0x1b60ec(0x1d4)]=requireAdmin;const requireShop=(_0x3901bd,_0x449f33,_0x16cfcc)=>{const _0x24344d=a16_0x1b60ec;if(!_0x3901bd[_0x24344d(0x1c5)]||_0x3901bd[_0x24344d(0x1c5)][_0x24344d(0x1bf)]!==_0x24344d(0x1c8))return _0x449f33[_0x24344d(0x1ce)](0x193)['json']({'success':![],'message':_0x24344d(0x1bd)});_0x16cfcc();};exports[a16_0x1b60ec(0x1cf)]=requireShop;function a16_0x5874(_0x510e27,_0x33721d){const _0x4fbcdd=a16_0x4fbc();return a16_0x5874=function(_0x587457,_0xb34980){_0x587457=_0x587457-0x1bd;let _0x58d40d=_0x4fbcdd[_0x587457];return _0x58d40d;},a16_0x5874(_0x510e27,_0x33721d);}function a16_0x4fbc(){const _0x475bbc=['authenticateToken','authorization','default','2323650numwxh','136489uGgckQ','Shop\x20access\x20required','Invalid\x20or\x20expired\x20token','role','Account\x20is\x20suspended\x20or\x20inactive.\x20Contact\x20administrator\x20to\x20activate\x20your\x20account.','Error\x20checking\x20account\x20status:','findUnique','requireActiveShop','634284dszbRV','user','15rSbPlF','../services/tokenBlacklistService','shop','defineProperty','split','SUSPENDED','headers','Token\x20has\x20been\x20revoked','status','requireShop','tokenBlacklistService','../config/config','__esModule','20413737DMjRBJ','requireAdmin','error','426518DbdwrA','4350620BWQGzt','json','8qNikOx','Error\x20checking\x20account\x20status','config','Access\x20token\x20required','admin','isTokenBlacklisted','ACTIVE','token','509887ZIphvx'];a16_0x4fbc=function(){return _0x475bbc;};return a16_0x4fbc();}const requireActiveShop=async(_0x4531c1,_0x91087a,_0x48f4c2)=>{const _0x3ec641=a16_0x1b60ec;if(!_0x4531c1['user']||_0x4531c1[_0x3ec641(0x1c5)][_0x3ec641(0x1bf)]!==_0x3ec641(0x1c8))return _0x91087a[_0x3ec641(0x1ce)](0x193)[_0x3ec641(0x1d8)]({'success':![],'message':'Shop\x20access\x20required'});try{const _0x2e8375=require('../config/database')[_0x3ec641(0x1e4)],_0x1a6938=await _0x2e8375[_0x3ec641(0x1c8)][_0x3ec641(0x1c2)]({'where':{'id':_0x4531c1[_0x3ec641(0x1c5)]['id']},'select':{'status':!![]}});if(!_0x1a6938||_0x1a6938[_0x3ec641(0x1ce)]!==_0x3ec641(0x1df))return _0x91087a[_0x3ec641(0x1ce)](0x193)[_0x3ec641(0x1d8)]({'success':![],'message':_0x3ec641(0x1c0),'suspended':_0x1a6938?.[_0x3ec641(0x1ce)]===_0x3ec641(0x1cb)});_0x48f4c2();}catch(_0x2e62b3){return console[_0x3ec641(0x1d5)](_0x3ec641(0x1c1),_0x2e62b3),_0x91087a['status'](0x1f4)[_0x3ec641(0x1d8)]({'success':![],'message':_0x3ec641(0x1da)});}};exports[a16_0x1b60ec(0x1c3)]=requireActiveShop;