'use strict';const a21_0xa72d7e=a21_0x51db;(function(_0x2615b6,_0x4275eb){const _0x14b84b=a21_0x51db,_0x219683=_0x2615b6();while(!![]){try{const _0x4e12b4=-parseInt(_0x14b84b(0x20f))/0x1+-parseInt(_0x14b84b(0x213))/0x2+-parseInt(_0x14b84b(0x1ee))/0x3*(-parseInt(_0x14b84b(0x1f4))/0x4)+-parseInt(_0x14b84b(0x20c))/0x5*(parseInt(_0x14b84b(0x20b))/0x6)+-parseInt(_0x14b84b(0x1f9))/0x7*(parseInt(_0x14b84b(0x1fe))/0x8)+-parseInt(_0x14b84b(0x1e5))/0x9*(parseInt(_0x14b84b(0x20e))/0xa)+parseInt(_0x14b84b(0x214))/0xb;if(_0x4e12b4===_0x4275eb)break;else _0x219683['push'](_0x219683['shift']());}catch(_0x818066){_0x219683['push'](_0x219683['shift']());}}}(a21_0x58f0,0x876a5));var __importDefault=this&&this['__importDefault']||function(_0x1437ed){return _0x1437ed&&_0x1437ed['__esModule']?_0x1437ed:{'default':_0x1437ed};};Object[a21_0xa72d7e(0x1f0)](exports,a21_0xa72d7e(0x1f2),{'value':!![]}),exports[a21_0xa72d7e(0x202)]=exports[a21_0xa72d7e(0x203)]=exports[a21_0xa72d7e(0x1ef)]=exports['authenticateToken']=void 0x0;const jsonwebtoken_1=__importDefault(require(a21_0xa72d7e(0x1e7))),config_1=require(a21_0xa72d7e(0x20a)),tokenBlacklistService_1=require(a21_0xa72d7e(0x212)),authenticateToken=(_0x4d3101,_0x37abc2,_0x946983)=>{const _0x1b705c=a21_0xa72d7e,_0x49c07c=_0x4d3101[_0x1b705c(0x1f7)][_0x1b705c(0x201)],_0x2a7c10=_0x49c07c&&_0x49c07c[_0x1b705c(0x1f8)]('\x20')[0x1];if(!_0x2a7c10)return _0x37abc2[_0x1b705c(0x1fb)](0x191)[_0x1b705c(0x1fc)]({'success':![],'message':_0x1b705c(0x1ed)});if(tokenBlacklistService_1[_0x1b705c(0x1f6)][_0x1b705c(0x1fd)](_0x2a7c10))return _0x37abc2['status'](0x191)[_0x1b705c(0x1fc)]({'success':![],'message':_0x1b705c(0x200)});jsonwebtoken_1[_0x1b705c(0x204)][_0x1b705c(0x1f3)](_0x2a7c10,config_1[_0x1b705c(0x1e8)][_0x1b705c(0x1e9)]['secret'],(_0x4693ba,_0x450d17)=>{const _0x28edba=_0x1b705c;if(_0x4693ba)return _0x37abc2[_0x28edba(0x1fb)](0x193)[_0x28edba(0x1fc)]({'success':![],'message':_0x28edba(0x1e6)});_0x4d3101[_0x28edba(0x1f1)]=_0x450d17,_0x4d3101[_0x28edba(0x1ea)]=_0x2a7c10,_0x946983();});};exports[a21_0xa72d7e(0x1ff)]=authenticateToken;function a21_0x51db(_0x2f69c5,_0x3f9704){_0x2f69c5=_0x2f69c5-0x1e5;const _0x58f0a8=a21_0x58f0();let _0x51dbf8=_0x58f0a8[_0x2f69c5];return _0x51dbf8;}const requireAdmin=(_0x473a72,_0x503273,_0x316009)=>{const _0x5d5112=a21_0xa72d7e;if(!_0x473a72[_0x5d5112(0x1f1)]||_0x473a72[_0x5d5112(0x1f1)][_0x5d5112(0x208)]!==_0x5d5112(0x205))return _0x503273[_0x5d5112(0x1fb)](0x193)[_0x5d5112(0x1fc)]({'success':![],'message':_0x5d5112(0x1fa)});_0x316009();};exports[a21_0xa72d7e(0x1ef)]=requireAdmin;const requireShop=(_0x55d837,_0x27870b,_0x4c55cc)=>{const _0x4ea02b=a21_0xa72d7e;if(!_0x55d837[_0x4ea02b(0x1f1)]||_0x55d837[_0x4ea02b(0x1f1)][_0x4ea02b(0x208)]!=='shop')return _0x27870b['status'](0x193)['json']({'success':![],'message':_0x4ea02b(0x207)});_0x4c55cc();};exports['requireShop']=requireShop;const requireActiveShop=async(_0x295ffe,_0x98985a,_0x36d409)=>{const _0x5c7d1c=a21_0xa72d7e;if(!_0x295ffe[_0x5c7d1c(0x1f1)]||_0x295ffe[_0x5c7d1c(0x1f1)][_0x5c7d1c(0x208)]!=='shop')return _0x98985a[_0x5c7d1c(0x1fb)](0x193)[_0x5c7d1c(0x1fc)]({'success':![],'message':_0x5c7d1c(0x207)});try{const _0x5ecf1a=require(_0x5c7d1c(0x211))[_0x5c7d1c(0x204)],_0xffda6c=await _0x5ecf1a[_0x5c7d1c(0x20d)]['findUnique']({'where':{'id':_0x295ffe[_0x5c7d1c(0x1f1)]['id']},'select':{'status':!![]}});if(!_0xffda6c||_0xffda6c[_0x5c7d1c(0x1fb)]!==_0x5c7d1c(0x210))return _0x98985a[_0x5c7d1c(0x1fb)](0x193)[_0x5c7d1c(0x1fc)]({'success':![],'message':_0x5c7d1c(0x1f5),'suspended':_0xffda6c?.[_0x5c7d1c(0x1fb)]===_0x5c7d1c(0x206)});_0x36d409();}catch(_0x4254dd){return console[_0x5c7d1c(0x1eb)](_0x5c7d1c(0x1ec),_0x4254dd),_0x98985a['status'](0x1f4)['json']({'success':![],'message':_0x5c7d1c(0x209)});}};function a21_0x58f0(){const _0x5c76e7=['16lszQwz','authenticateToken','Token\x20has\x20been\x20revoked','authorization','requireActiveShop','requireShop','default','admin','SUSPENDED','Shop\x20access\x20required','role','Error\x20checking\x20account\x20status','../config/config','6IsZLXD','412145VfLweQ','shop','250iksBRS','591368JzAWHX','ACTIVE','../config/database','../services/tokenBlacklistService','1678536ymAwDs','34230680UbLNzg','173358JowtIC','Invalid\x20or\x20expired\x20token','jsonwebtoken','config','jwt','token','error','Error\x20checking\x20account\x20status:','Access\x20token\x20required','27dtPiQI','requireAdmin','defineProperty','user','__esModule','verify','40296ssiFZG','Account\x20is\x20suspended\x20or\x20inactive.\x20Contact\x20administrator\x20to\x20activate\x20your\x20account.','tokenBlacklistService','headers','split','2286445qHvKRF','Admin\x20access\x20required','status','json','isTokenBlacklisted'];a21_0x58f0=function(){return _0x5c76e7;};return a21_0x58f0();}exports[a21_0xa72d7e(0x202)]=requireActiveShop;