'use strict';const a16_0x18995f=a16_0x4f45;(function(_0xb712a7,_0x169dc7){const _0x1ad7c4=a16_0x4f45,_0x4e17e6=_0xb712a7();while(!![]){try{const _0x15fe59=parseInt(_0x1ad7c4(0x10c))/0x1+-parseInt(_0x1ad7c4(0xf2))/0x2+-parseInt(_0x1ad7c4(0x105))/0x3*(-parseInt(_0x1ad7c4(0xe5))/0x4)+parseInt(_0x1ad7c4(0x10a))/0x5+parseInt(_0x1ad7c4(0xf3))/0x6*(parseInt(_0x1ad7c4(0xf0))/0x7)+-parseInt(_0x1ad7c4(0x101))/0x8+-parseInt(_0x1ad7c4(0xf6))/0x9;if(_0x15fe59===_0x169dc7)break;else _0x4e17e6['push'](_0x4e17e6['shift']());}catch(_0x1f83d9){_0x4e17e6['push'](_0x4e17e6['shift']());}}}(a16_0x271c,0x53b77));var __importDefault=this&&this[a16_0x18995f(0xe7)]||function(_0x5c0c2f){return _0x5c0c2f&&_0x5c0c2f['__esModule']?_0x5c0c2f:{'default':_0x5c0c2f};};Object['defineProperty'](exports,a16_0x18995f(0xfb),{'value':!![]}),exports[a16_0x18995f(0xf8)]=exports[a16_0x18995f(0xe8)]=exports[a16_0x18995f(0xeb)]=exports[a16_0x18995f(0x108)]=void 0x0;const jsonwebtoken_1=__importDefault(require('jsonwebtoken')),config_1=require(a16_0x18995f(0xe6)),tokenBlacklistService_1=require(a16_0x18995f(0xea)),authenticateToken=(_0x2d7c9c,_0x5682e4,_0x1fbaf7)=>{const _0x21bb72=a16_0x18995f,_0x553a2e=_0x2d7c9c['headers'][_0x21bb72(0xfd)],_0x1cd916=_0x553a2e&&_0x553a2e[_0x21bb72(0xee)]('\x20')[0x1];if(!_0x1cd916)return _0x5682e4[_0x21bb72(0xf5)](0x191)[_0x21bb72(0xed)]({'success':![],'message':_0x21bb72(0x102)});if(tokenBlacklistService_1['tokenBlacklistService'][_0x21bb72(0xf1)](_0x1cd916))return _0x5682e4[_0x21bb72(0xf5)](0x191)[_0x21bb72(0xed)]({'success':![],'message':_0x21bb72(0x103)});jsonwebtoken_1[_0x21bb72(0x100)][_0x21bb72(0xfc)](_0x1cd916,config_1['config'][_0x21bb72(0x107)][_0x21bb72(0x109)],(_0x4bd5e5,_0x23996d)=>{const _0x2f958f=_0x21bb72;if(_0x4bd5e5)return _0x5682e4['status'](0x193)[_0x2f958f(0xed)]({'success':![],'message':_0x2f958f(0x10d)});_0x2d7c9c['user']=_0x23996d,_0x2d7c9c[_0x2f958f(0xf4)]=_0x1cd916,_0x1fbaf7();});};exports['authenticateToken']=authenticateToken;const requireAdmin=(_0x2af6f4,_0x590a64,_0x3067eb)=>{const _0xd8dbb0=a16_0x18995f;if(!_0x2af6f4['user']||_0x2af6f4[_0xd8dbb0(0xec)]['role']!=='admin')return _0x590a64[_0xd8dbb0(0xf5)](0x193)[_0xd8dbb0(0xed)]({'success':![],'message':_0xd8dbb0(0x106)});_0x3067eb();};exports[a16_0x18995f(0xeb)]=requireAdmin;function a16_0x271c(){const _0x2b5ea2=['requireAdmin','user','json','split','ACTIVE','4681124VIHHHP','isTokenBlacklisted','305006IbabcQ','6UcjlLS','token','status','14626881FVZAuA','Account\x20is\x20suspended\x20or\x20inactive.\x20Contact\x20administrator\x20to\x20activate\x20your\x20account.','requireActiveShop','Shop\x20access\x20required','SUSPENDED','__esModule','verify','authorization','Error\x20checking\x20account\x20status','findUnique','default','1187776XZxbfN','Access\x20token\x20required','Token\x20has\x20been\x20revoked','shop','142293LnTvVI','Admin\x20access\x20required','jwt','authenticateToken','secret','2904240lqaosB','$disconnect','450335DexIZm','Invalid\x20or\x20expired\x20token','48QtXPbz','../config/config','__importDefault','requireShop','role','../services/tokenBlacklistService'];a16_0x271c=function(){return _0x2b5ea2;};return a16_0x271c();}const requireShop=(_0x873e71,_0x29f261,_0x49e837)=>{const _0x356909=a16_0x18995f;if(!_0x873e71[_0x356909(0xec)]||_0x873e71[_0x356909(0xec)][_0x356909(0xe9)]!=='shop')return _0x29f261[_0x356909(0xf5)](0x193)['json']({'success':![],'message':_0x356909(0xf9)});_0x49e837();};function a16_0x4f45(_0x521ff4,_0x1b4643){const _0x271cf4=a16_0x271c();return a16_0x4f45=function(_0x4f45a0,_0x59a46c){_0x4f45a0=_0x4f45a0-0xe5;let _0x519f8d=_0x271cf4[_0x4f45a0];return _0x519f8d;},a16_0x4f45(_0x521ff4,_0x1b4643);}exports[a16_0x18995f(0xe8)]=requireShop;const requireActiveShop=async(_0x561581,_0x2e653a,_0x457392)=>{const _0x5ee3db=a16_0x18995f;if(!_0x561581[_0x5ee3db(0xec)]||_0x561581[_0x5ee3db(0xec)][_0x5ee3db(0xe9)]!==_0x5ee3db(0x104))return _0x2e653a[_0x5ee3db(0xf5)](0x193)[_0x5ee3db(0xed)]({'success':![],'message':_0x5ee3db(0xf9)});try{const {PrismaClient:_0x2da4fc}=require('@prisma/client'),_0x58dfd3=new _0x2da4fc(),_0x15ff9e=await _0x58dfd3[_0x5ee3db(0x104)][_0x5ee3db(0xff)]({'where':{'id':_0x561581[_0x5ee3db(0xec)]['id']},'select':{'status':!![]}});if(!_0x15ff9e||_0x15ff9e[_0x5ee3db(0xf5)]!==_0x5ee3db(0xef))return _0x2e653a[_0x5ee3db(0xf5)](0x193)['json']({'success':![],'message':_0x5ee3db(0xf7),'suspended':_0x15ff9e?.[_0x5ee3db(0xf5)]===_0x5ee3db(0xfa)});await _0x58dfd3[_0x5ee3db(0x10b)](),_0x457392();}catch(_0x47af74){return _0x2e653a[_0x5ee3db(0xf5)](0x1f4)[_0x5ee3db(0xed)]({'success':![],'message':_0x5ee3db(0xfe)});}};exports[a16_0x18995f(0xf8)]=requireActiveShop;