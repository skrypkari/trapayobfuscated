'use strict';function a16_0x12a1(_0x2427d9,_0x3f27db){const _0x3e251c=a16_0x3e25();return a16_0x12a1=function(_0x12a13a,_0x50493b){_0x12a13a=_0x12a13a-0x197;let _0x5978c5=_0x3e251c[_0x12a13a];return _0x5978c5;},a16_0x12a1(_0x2427d9,_0x3f27db);}const a16_0x3c7482=a16_0x12a1;(function(_0x2380f9,_0x3a04c3){const _0xbad26=a16_0x12a1,_0x42f5fa=_0x2380f9();while(!![]){try{const _0x4dc82d=-parseInt(_0xbad26(0x19d))/0x1+-parseInt(_0xbad26(0x1ba))/0x2*(-parseInt(_0xbad26(0x19a))/0x3)+-parseInt(_0xbad26(0x1a3))/0x4*(-parseInt(_0xbad26(0x1b0))/0x5)+-parseInt(_0xbad26(0x1bb))/0x6+parseInt(_0xbad26(0x1aa))/0x7+-parseInt(_0xbad26(0x197))/0x8+parseInt(_0xbad26(0x1b3))/0x9;if(_0x4dc82d===_0x3a04c3)break;else _0x42f5fa['push'](_0x42f5fa['shift']());}catch(_0x3b86b9){_0x42f5fa['push'](_0x42f5fa['shift']());}}}(a16_0x3e25,0x64b6b));function a16_0x3e25(){const _0x320fcc=['2Yhwlkf','2110134gwGrML','../config/config','Error\x20checking\x20account\x20status','isTokenBlacklisted','admin','Access\x20token\x20required','error','Error\x20checking\x20account\x20status:','Admin\x20access\x20required','tokenBlacklistService','4253104iMfSFS','config','headers','2263467vMkGYx','requireShop','__importDefault','524091deswFg','shop','Account\x20is\x20suspended\x20or\x20inactive.\x20Contact\x20administrator\x20to\x20activate\x20your\x20account.','../services/tokenBlacklistService','__esModule','requireAdmin','4JFfDwo','ACTIVE','json','status','Invalid\x20or\x20expired\x20token','role','authenticateToken','1421847bVtKHi','Shop\x20access\x20required','jsonwebtoken','findUnique','SUSPENDED','authorization','2417555idcTfm','Token\x20has\x20been\x20revoked','../config/database','3409380CKeKFJ','requireActiveShop','split','default','user','defineProperty','secret'];a16_0x3e25=function(){return _0x320fcc;};return a16_0x3e25();}var __importDefault=this&&this[a16_0x3c7482(0x19c)]||function(_0x27ccf7){const _0x3b9195=a16_0x3c7482;return _0x27ccf7&&_0x27ccf7[_0x3b9195(0x1a1)]?_0x27ccf7:{'default':_0x27ccf7};};Object[a16_0x3c7482(0x1b8)](exports,a16_0x3c7482(0x1a1),{'value':!![]}),exports[a16_0x3c7482(0x1b4)]=exports[a16_0x3c7482(0x19b)]=exports[a16_0x3c7482(0x1a2)]=exports['authenticateToken']=void 0x0;const jsonwebtoken_1=__importDefault(require(a16_0x3c7482(0x1ac))),config_1=require(a16_0x3c7482(0x1bc)),tokenBlacklistService_1=require(a16_0x3c7482(0x1a0)),authenticateToken=(_0xe5bc86,_0x30912c,_0x4f714e)=>{const _0x5e8cc6=a16_0x3c7482,_0x484ec9=_0xe5bc86[_0x5e8cc6(0x199)][_0x5e8cc6(0x1af)],_0x51993d=_0x484ec9&&_0x484ec9[_0x5e8cc6(0x1b5)]('\x20')[0x1];if(!_0x51993d)return _0x30912c[_0x5e8cc6(0x1a6)](0x191)[_0x5e8cc6(0x1a5)]({'success':![],'message':_0x5e8cc6(0x1c0)});if(tokenBlacklistService_1[_0x5e8cc6(0x1c4)][_0x5e8cc6(0x1be)](_0x51993d))return _0x30912c[_0x5e8cc6(0x1a6)](0x191)[_0x5e8cc6(0x1a5)]({'success':![],'message':_0x5e8cc6(0x1b1)});jsonwebtoken_1[_0x5e8cc6(0x1b6)]['verify'](_0x51993d,config_1[_0x5e8cc6(0x198)]['jwt'][_0x5e8cc6(0x1b9)],(_0x5ac361,_0x2ba491)=>{const _0x3f6d4c=_0x5e8cc6;if(_0x5ac361)return _0x30912c[_0x3f6d4c(0x1a6)](0x193)[_0x3f6d4c(0x1a5)]({'success':![],'message':_0x3f6d4c(0x1a7)});_0xe5bc86['user']=_0x2ba491,_0xe5bc86['token']=_0x51993d,_0x4f714e();});};exports[a16_0x3c7482(0x1a9)]=authenticateToken;const requireAdmin=(_0x127576,_0x582801,_0x33b06d)=>{const _0x42c39b=a16_0x3c7482;if(!_0x127576[_0x42c39b(0x1b7)]||_0x127576[_0x42c39b(0x1b7)][_0x42c39b(0x1a8)]!==_0x42c39b(0x1bf))return _0x582801[_0x42c39b(0x1a6)](0x193)['json']({'success':![],'message':_0x42c39b(0x1c3)});_0x33b06d();};exports[a16_0x3c7482(0x1a2)]=requireAdmin;const requireShop=(_0x3a33dd,_0x456a6f,_0x4e188e)=>{const _0x44d90f=a16_0x3c7482;if(!_0x3a33dd[_0x44d90f(0x1b7)]||_0x3a33dd['user']['role']!==_0x44d90f(0x19e))return _0x456a6f[_0x44d90f(0x1a6)](0x193)[_0x44d90f(0x1a5)]({'success':![],'message':_0x44d90f(0x1ab)});_0x4e188e();};exports[a16_0x3c7482(0x19b)]=requireShop;const requireActiveShop=async(_0x4439ec,_0x56d10a,_0x5126ba)=>{const _0x5b79c2=a16_0x3c7482;if(!_0x4439ec[_0x5b79c2(0x1b7)]||_0x4439ec[_0x5b79c2(0x1b7)][_0x5b79c2(0x1a8)]!==_0x5b79c2(0x19e))return _0x56d10a[_0x5b79c2(0x1a6)](0x193)[_0x5b79c2(0x1a5)]({'success':![],'message':_0x5b79c2(0x1ab)});try{const _0x599a28=require(_0x5b79c2(0x1b2))[_0x5b79c2(0x1b6)],_0x5b5d2a=await _0x599a28[_0x5b79c2(0x19e)][_0x5b79c2(0x1ad)]({'where':{'id':_0x4439ec[_0x5b79c2(0x1b7)]['id']},'select':{'status':!![]}});if(!_0x5b5d2a||_0x5b5d2a[_0x5b79c2(0x1a6)]!==_0x5b79c2(0x1a4))return _0x56d10a[_0x5b79c2(0x1a6)](0x193)[_0x5b79c2(0x1a5)]({'success':![],'message':_0x5b79c2(0x19f),'suspended':_0x5b5d2a?.[_0x5b79c2(0x1a6)]===_0x5b79c2(0x1ae)});_0x5126ba();}catch(_0x1554dc){return console[_0x5b79c2(0x1c1)](_0x5b79c2(0x1c2),_0x1554dc),_0x56d10a[_0x5b79c2(0x1a6)](0x1f4)[_0x5b79c2(0x1a5)]({'success':![],'message':_0x5b79c2(0x1bd)});}};exports[a16_0x3c7482(0x1b4)]=requireActiveShop;