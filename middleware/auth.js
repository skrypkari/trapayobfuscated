'use strict';const a16_0x424529=a16_0x540d;(function(_0x4d8f2e,_0x20838d){const _0x18ec10=a16_0x540d,_0x5b92f2=_0x4d8f2e();while(!![]){try{const _0x110137=-parseInt(_0x18ec10(0x179))/0x1+parseInt(_0x18ec10(0x190))/0x2+-parseInt(_0x18ec10(0x17b))/0x3+parseInt(_0x18ec10(0x175))/0x4*(parseInt(_0x18ec10(0x196))/0x5)+-parseInt(_0x18ec10(0x174))/0x6+parseInt(_0x18ec10(0x17f))/0x7+parseInt(_0x18ec10(0x180))/0x8*(parseInt(_0x18ec10(0x192))/0x9);if(_0x110137===_0x20838d)break;else _0x5b92f2['push'](_0x5b92f2['shift']());}catch(_0x4371c1){_0x5b92f2['push'](_0x5b92f2['shift']());}}}(a16_0x2e9c,0x49136));var __importDefault=this&&this['__importDefault']||function(_0x5481b7){const _0xd438c0=a16_0x540d;return _0x5481b7&&_0x5481b7[_0xd438c0(0x18d)]?_0x5481b7:{'default':_0x5481b7};};Object['defineProperty'](exports,a16_0x424529(0x18d),{'value':!![]}),exports[a16_0x424529(0x186)]=exports[a16_0x424529(0x181)]=exports[a16_0x424529(0x17c)]=exports[a16_0x424529(0x18f)]=void 0x0;const jsonwebtoken_1=__importDefault(require(a16_0x424529(0x195))),config_1=require(a16_0x424529(0x188)),tokenBlacklistService_1=require(a16_0x424529(0x18c)),authenticateToken=(_0x28a96b,_0x156464,_0x2d6127)=>{const _0x2735be=a16_0x424529,_0x601f7b=_0x28a96b[_0x2735be(0x17a)][_0x2735be(0x18b)],_0x88b2f5=_0x601f7b&&_0x601f7b[_0x2735be(0x184)]('\x20')[0x1];if(!_0x88b2f5)return _0x156464[_0x2735be(0x17e)](0x191)[_0x2735be(0x197)]({'success':![],'message':_0x2735be(0x182)});if(tokenBlacklistService_1[_0x2735be(0x193)][_0x2735be(0x199)](_0x88b2f5))return _0x156464[_0x2735be(0x17e)](0x191)['json']({'success':![],'message':_0x2735be(0x191)});jsonwebtoken_1['default'][_0x2735be(0x176)](_0x88b2f5,config_1[_0x2735be(0x19c)][_0x2735be(0x19a)]['secret'],(_0x4fe7cc,_0x40ec5d)=>{const _0x111c09=_0x2735be;if(_0x4fe7cc)return _0x156464['status'](0x193)[_0x111c09(0x197)]({'success':![],'message':_0x111c09(0x19e)});_0x28a96b[_0x111c09(0x177)]=_0x40ec5d,_0x28a96b[_0x111c09(0x19b)]=_0x88b2f5,_0x2d6127();});};exports[a16_0x424529(0x18f)]=authenticateToken;function a16_0x2e9c(){const _0x3e1cf5=['Token\x20has\x20been\x20revoked','31896FpHzWC','tokenBlacklistService','role','jsonwebtoken','1040005tPBxuL','json','admin','isTokenBlacklisted','jwt','token','config','shop','Invalid\x20or\x20expired\x20token','../config/database','3323610FynPSE','4SDUnkI','verify','user','Error\x20checking\x20account\x20status','517953cWWheP','headers','175473seoQgv','requireAdmin','default','status','2860606Psdrne','1192arhyDQ','requireShop','Access\x20token\x20required','Account\x20is\x20suspended\x20or\x20inactive.\x20Contact\x20administrator\x20to\x20activate\x20your\x20account.','split','error','requireActiveShop','SUSPENDED','../config/config','Shop\x20access\x20required','Admin\x20access\x20required','authorization','../services/tokenBlacklistService','__esModule','findUnique','authenticateToken','569964XJRvMk'];a16_0x2e9c=function(){return _0x3e1cf5;};return a16_0x2e9c();}const requireAdmin=(_0xdbdc40,_0x15ba2f,_0x4c085d)=>{const _0x134968=a16_0x424529;if(!_0xdbdc40[_0x134968(0x177)]||_0xdbdc40[_0x134968(0x177)][_0x134968(0x194)]!==_0x134968(0x198))return _0x15ba2f[_0x134968(0x17e)](0x193)[_0x134968(0x197)]({'success':![],'message':_0x134968(0x18a)});_0x4c085d();};exports[a16_0x424529(0x17c)]=requireAdmin;const requireShop=(_0xb49fbf,_0x31b072,_0x3a0d61)=>{const _0x5f290e=a16_0x424529;if(!_0xb49fbf['user']||_0xb49fbf['user'][_0x5f290e(0x194)]!=='shop')return _0x31b072[_0x5f290e(0x17e)](0x193)[_0x5f290e(0x197)]({'success':![],'message':_0x5f290e(0x189)});_0x3a0d61();};exports[a16_0x424529(0x181)]=requireShop;const requireActiveShop=async(_0x50d981,_0x1044ff,_0xe37ddb)=>{const _0x41f496=a16_0x424529;if(!_0x50d981['user']||_0x50d981[_0x41f496(0x177)][_0x41f496(0x194)]!==_0x41f496(0x19d))return _0x1044ff[_0x41f496(0x17e)](0x193)['json']({'success':![],'message':_0x41f496(0x189)});try{const _0x3b0334=require(_0x41f496(0x173))[_0x41f496(0x17d)],_0x319f89=await _0x3b0334[_0x41f496(0x19d)][_0x41f496(0x18e)]({'where':{'id':_0x50d981['user']['id']},'select':{'status':!![]}});if(!_0x319f89||_0x319f89['status']!=='ACTIVE')return _0x1044ff[_0x41f496(0x17e)](0x193)[_0x41f496(0x197)]({'success':![],'message':_0x41f496(0x183),'suspended':_0x319f89?.[_0x41f496(0x17e)]===_0x41f496(0x187)});_0xe37ddb();}catch(_0xd59793){return console[_0x41f496(0x185)]('Error\x20checking\x20account\x20status:',_0xd59793),_0x1044ff[_0x41f496(0x17e)](0x1f4)[_0x41f496(0x197)]({'success':![],'message':_0x41f496(0x178)});}};function a16_0x540d(_0x105fb5,_0x16391c){const _0x2e9c69=a16_0x2e9c();return a16_0x540d=function(_0x540d34,_0xf21525){_0x540d34=_0x540d34-0x173;let _0xc99d97=_0x2e9c69[_0x540d34];return _0xc99d97;},a16_0x540d(_0x105fb5,_0x16391c);}exports[a16_0x424529(0x186)]=requireActiveShop;