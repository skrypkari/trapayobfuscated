'use strict';const a16_0x386f7f=a16_0x5435;(function(_0x6263ea,_0x3eee36){const _0x1091aa=a16_0x5435,_0x4381fd=_0x6263ea();while(!![]){try{const _0x469ffa=parseInt(_0x1091aa(0x100))/0x1*(parseInt(_0x1091aa(0xe0))/0x2)+-parseInt(_0x1091aa(0xd6))/0x3+parseInt(_0x1091aa(0xfb))/0x4*(-parseInt(_0x1091aa(0xec))/0x5)+-parseInt(_0x1091aa(0xe4))/0x6*(parseInt(_0x1091aa(0xf0))/0x7)+-parseInt(_0x1091aa(0xdd))/0x8*(parseInt(_0x1091aa(0xf9))/0x9)+parseInt(_0x1091aa(0xe6))/0xa+parseInt(_0x1091aa(0xe9))/0xb*(parseInt(_0x1091aa(0xfd))/0xc);if(_0x469ffa===_0x3eee36)break;else _0x4381fd['push'](_0x4381fd['shift']());}catch(_0x3a58a1){_0x4381fd['push'](_0x4381fd['shift']());}}}(a16_0x252a,0xa21ef));var __importDefault=this&&this['__importDefault']||function(_0x8183e3){const _0x32ea9a=a16_0x5435;return _0x8183e3&&_0x8183e3[_0x32ea9a(0xed)]?_0x8183e3:{'default':_0x8183e3};};Object[a16_0x386f7f(0xf8)](exports,a16_0x386f7f(0xed),{'value':!![]}),exports[a16_0x386f7f(0xf3)]=exports[a16_0x386f7f(0xde)]=exports[a16_0x386f7f(0xe8)]=exports[a16_0x386f7f(0xfe)]=void 0x0;function a16_0x252a(){const _0x4046d3=['Admin\x20access\x20required','verify','tokenBlacklistService','../config/database','16VLyGcl','requireShop','status','1844464xRHsaP','Account\x20is\x20suspended\x20or\x20inactive.\x20Contact\x20administrator\x20to\x20activate\x20your\x20account.','jwt','Access\x20token\x20required','633672ZVcdfs','Error\x20checking\x20account\x20status:','4255550LKZQUm','ACTIVE','requireAdmin','539990UDMFiL','role','secret','399135qCcvuL','__esModule','../config/config','Error\x20checking\x20account\x20status','35TgLYsy','json','admin','requireActiveShop','Invalid\x20or\x20expired\x20token','isTokenBlacklisted','jsonwebtoken','config','defineProperty','2869767fgAPfT','shop','56ZVJZKB','user','696Ztbwxl','authenticateToken','split','1RlPNBV','SUSPENDED','../services/tokenBlacklistService','default','3742788huozcF','error','Shop\x20access\x20required'];a16_0x252a=function(){return _0x4046d3;};return a16_0x252a();}const jsonwebtoken_1=__importDefault(require(a16_0x386f7f(0xf6))),config_1=require(a16_0x386f7f(0xee)),tokenBlacklistService_1=require(a16_0x386f7f(0x102)),authenticateToken=(_0x13854b,_0x51c306,_0x531cf8)=>{const _0x50b829=a16_0x386f7f,_0x1ec5ce=_0x13854b['headers']['authorization'],_0x4ca708=_0x1ec5ce&&_0x1ec5ce[_0x50b829(0xff)]('\x20')[0x1];if(!_0x4ca708)return _0x51c306['status'](0x191)[_0x50b829(0xf1)]({'success':![],'message':_0x50b829(0xe3)});if(tokenBlacklistService_1[_0x50b829(0xdb)][_0x50b829(0xf5)](_0x4ca708))return _0x51c306[_0x50b829(0xdf)](0x191)[_0x50b829(0xf1)]({'success':![],'message':'Token\x20has\x20been\x20revoked'});jsonwebtoken_1['default'][_0x50b829(0xda)](_0x4ca708,config_1[_0x50b829(0xf7)][_0x50b829(0xe2)][_0x50b829(0xeb)],(_0x1d8b9d,_0x1ef755)=>{const _0x114c78=_0x50b829;if(_0x1d8b9d)return _0x51c306[_0x114c78(0xdf)](0x193)[_0x114c78(0xf1)]({'success':![],'message':_0x114c78(0xf4)});_0x13854b[_0x114c78(0xfc)]=_0x1ef755,_0x13854b['token']=_0x4ca708,_0x531cf8();});};exports[a16_0x386f7f(0xfe)]=authenticateToken;const requireAdmin=(_0x415cef,_0x277d9a,_0x357df9)=>{const _0x30e963=a16_0x386f7f;if(!_0x415cef['user']||_0x415cef[_0x30e963(0xfc)][_0x30e963(0xea)]!==_0x30e963(0xf2))return _0x277d9a['status'](0x193)[_0x30e963(0xf1)]({'success':![],'message':_0x30e963(0xd9)});_0x357df9();};exports['requireAdmin']=requireAdmin;const requireShop=(_0x2948b4,_0x27d4a3,_0x5a64c6)=>{const _0x40af4e=a16_0x386f7f;if(!_0x2948b4[_0x40af4e(0xfc)]||_0x2948b4[_0x40af4e(0xfc)]['role']!==_0x40af4e(0xfa))return _0x27d4a3[_0x40af4e(0xdf)](0x193)[_0x40af4e(0xf1)]({'success':![],'message':_0x40af4e(0xd8)});_0x5a64c6();};exports[a16_0x386f7f(0xde)]=requireShop;function a16_0x5435(_0x4a7749,_0x101c88){const _0x252ab5=a16_0x252a();return a16_0x5435=function(_0x5435a8,_0x100e92){_0x5435a8=_0x5435a8-0xd6;let _0x2d7a83=_0x252ab5[_0x5435a8];return _0x2d7a83;},a16_0x5435(_0x4a7749,_0x101c88);}const requireActiveShop=async(_0x24dd54,_0x5596d2,_0x3d5adf)=>{const _0x53c3c5=a16_0x386f7f;if(!_0x24dd54[_0x53c3c5(0xfc)]||_0x24dd54['user'][_0x53c3c5(0xea)]!==_0x53c3c5(0xfa))return _0x5596d2[_0x53c3c5(0xdf)](0x193)[_0x53c3c5(0xf1)]({'success':![],'message':_0x53c3c5(0xd8)});try{const _0x5aac08=require(_0x53c3c5(0xdc))[_0x53c3c5(0x103)],_0x47f690=await _0x5aac08[_0x53c3c5(0xfa)]['findUnique']({'where':{'id':_0x24dd54[_0x53c3c5(0xfc)]['id']},'select':{'status':!![]}});if(!_0x47f690||_0x47f690[_0x53c3c5(0xdf)]!==_0x53c3c5(0xe7))return _0x5596d2['status'](0x193)['json']({'success':![],'message':_0x53c3c5(0xe1),'suspended':_0x47f690?.[_0x53c3c5(0xdf)]===_0x53c3c5(0x101)});_0x3d5adf();}catch(_0x31e332){return console[_0x53c3c5(0xd7)](_0x53c3c5(0xe5),_0x31e332),_0x5596d2[_0x53c3c5(0xdf)](0x1f4)[_0x53c3c5(0xf1)]({'success':![],'message':_0x53c3c5(0xef)});}};exports[a16_0x386f7f(0xf3)]=requireActiveShop;