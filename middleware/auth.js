'use strict';const a16_0x4ee948=a16_0x1b40;function a16_0x5b94(){const _0x340266=['isTokenBlacklisted','276iMUOxw','Admin\x20access\x20required','requireActiveShop','24036CundMt','requireAdmin','../config/config','../services/tokenBlacklistService','status','role','config','2HTOFGi','Account\x20is\x20suspended\x20or\x20inactive.\x20Contact\x20administrator\x20to\x20activate\x20your\x20account.','Access\x20token\x20required','Invalid\x20or\x20expired\x20token','secret','verify','default','../config/database','79405pOzIgr','Error\x20checking\x20account\x20status:','headers','1284970lvENVP','Shop\x20access\x20required','json','216294bfZoZX','requireShop','__importDefault','Token\x20has\x20been\x20revoked','error','tokenBlacklistService','5650641KhLqrO','shop','351239UOulVj','2105577SRaHXL','jsonwebtoken','54rKdKfx','authenticateToken','defineProperty','user','token','authorization','6908vUylpc','__esModule','admin','16mMpUjW'];a16_0x5b94=function(){return _0x340266;};return a16_0x5b94();}function a16_0x1b40(_0x3348ba,_0x4cff63){const _0x5b946d=a16_0x5b94();return a16_0x1b40=function(_0x1b4082,_0x15d31a){_0x1b4082=_0x1b4082-0x1ea;let _0x461a3e=_0x5b946d[_0x1b4082];return _0x461a3e;},a16_0x1b40(_0x3348ba,_0x4cff63);}(function(_0x210136,_0x4d0f9e){const _0x93456f=a16_0x1b40,_0x4384bf=_0x210136();while(!![]){try{const _0x30d6c7=parseInt(_0x93456f(0x20c))/0x1+-parseInt(_0x93456f(0x1fe))/0x2*(parseInt(_0x93456f(0x215))/0x3)+-parseInt(_0x93456f(0x1f4))/0x4*(-parseInt(_0x93456f(0x206))/0x5)+-parseInt(_0x93456f(0x217))/0x6*(-parseInt(_0x93456f(0x214))/0x7)+parseInt(_0x93456f(0x1f2))/0x8*(parseInt(_0x93456f(0x212))/0x9)+-parseInt(_0x93456f(0x209))/0xa+-parseInt(_0x93456f(0x1ef))/0xb*(parseInt(_0x93456f(0x1f7))/0xc);if(_0x30d6c7===_0x4d0f9e)break;else _0x4384bf['push'](_0x4384bf['shift']());}catch(_0x1c6aa1){_0x4384bf['push'](_0x4384bf['shift']());}}}(a16_0x5b94,0xe353e));var __importDefault=this&&this[a16_0x4ee948(0x20e)]||function(_0x4462a8){return _0x4462a8&&_0x4462a8['__esModule']?_0x4462a8:{'default':_0x4462a8};};Object[a16_0x4ee948(0x1eb)](exports,a16_0x4ee948(0x1f0),{'value':!![]}),exports[a16_0x4ee948(0x1f6)]=exports['requireShop']=exports[a16_0x4ee948(0x1f8)]=exports[a16_0x4ee948(0x1ea)]=void 0x0;const jsonwebtoken_1=__importDefault(require(a16_0x4ee948(0x216))),config_1=require(a16_0x4ee948(0x1f9)),tokenBlacklistService_1=require(a16_0x4ee948(0x1fa)),authenticateToken=(_0x367631,_0x2ac3ec,_0x3bb539)=>{const _0x2cf5c8=a16_0x4ee948,_0x3673b9=_0x367631[_0x2cf5c8(0x208)][_0x2cf5c8(0x1ee)],_0x39c5bf=_0x3673b9&&_0x3673b9['split']('\x20')[0x1];if(!_0x39c5bf)return _0x2ac3ec[_0x2cf5c8(0x1fb)](0x191)[_0x2cf5c8(0x20b)]({'success':![],'message':_0x2cf5c8(0x200)});if(tokenBlacklistService_1[_0x2cf5c8(0x211)][_0x2cf5c8(0x1f3)](_0x39c5bf))return _0x2ac3ec['status'](0x191)[_0x2cf5c8(0x20b)]({'success':![],'message':_0x2cf5c8(0x20f)});jsonwebtoken_1[_0x2cf5c8(0x204)][_0x2cf5c8(0x203)](_0x39c5bf,config_1[_0x2cf5c8(0x1fd)]['jwt'][_0x2cf5c8(0x202)],(_0x46e134,_0x7c88f4)=>{const _0x2f5c5c=_0x2cf5c8;if(_0x46e134)return _0x2ac3ec[_0x2f5c5c(0x1fb)](0x193)[_0x2f5c5c(0x20b)]({'success':![],'message':_0x2f5c5c(0x201)});_0x367631[_0x2f5c5c(0x1ec)]=_0x7c88f4,_0x367631[_0x2f5c5c(0x1ed)]=_0x39c5bf,_0x3bb539();});};exports[a16_0x4ee948(0x1ea)]=authenticateToken;const requireAdmin=(_0x397e1,_0xf8c4ed,_0x4d1e67)=>{const _0x515063=a16_0x4ee948;if(!_0x397e1[_0x515063(0x1ec)]||_0x397e1[_0x515063(0x1ec)][_0x515063(0x1fc)]!==_0x515063(0x1f1))return _0xf8c4ed[_0x515063(0x1fb)](0x193)[_0x515063(0x20b)]({'success':![],'message':_0x515063(0x1f5)});_0x4d1e67();};exports[a16_0x4ee948(0x1f8)]=requireAdmin;const requireShop=(_0x4322dd,_0x4ba9c3,_0x367a0e)=>{const _0x3ea290=a16_0x4ee948;if(!_0x4322dd['user']||_0x4322dd[_0x3ea290(0x1ec)][_0x3ea290(0x1fc)]!==_0x3ea290(0x213))return _0x4ba9c3[_0x3ea290(0x1fb)](0x193)['json']({'success':![],'message':_0x3ea290(0x20a)});_0x367a0e();};exports[a16_0x4ee948(0x20d)]=requireShop;const requireActiveShop=async(_0x50853c,_0x2f54ae,_0x55c572)=>{const _0x2aca40=a16_0x4ee948;if(!_0x50853c[_0x2aca40(0x1ec)]||_0x50853c[_0x2aca40(0x1ec)][_0x2aca40(0x1fc)]!=='shop')return _0x2f54ae[_0x2aca40(0x1fb)](0x193)[_0x2aca40(0x20b)]({'success':![],'message':_0x2aca40(0x20a)});try{const _0x3f3552=require(_0x2aca40(0x205))['default'],_0x137dbf=await _0x3f3552['shop']['findUnique']({'where':{'id':_0x50853c[_0x2aca40(0x1ec)]['id']},'select':{'status':!![]}});if(!_0x137dbf||_0x137dbf['status']!=='ACTIVE')return _0x2f54ae[_0x2aca40(0x1fb)](0x193)[_0x2aca40(0x20b)]({'success':![],'message':_0x2aca40(0x1ff),'suspended':_0x137dbf?.[_0x2aca40(0x1fb)]==='SUSPENDED'});_0x55c572();}catch(_0xa4bd9b){return console[_0x2aca40(0x210)](_0x2aca40(0x207),_0xa4bd9b),_0x2f54ae[_0x2aca40(0x1fb)](0x1f4)[_0x2aca40(0x20b)]({'success':![],'message':'Error\x20checking\x20account\x20status'});}};exports['requireActiveShop']=requireActiveShop;