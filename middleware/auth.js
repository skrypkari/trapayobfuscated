'use strict';function a16_0x3403(_0x503b10,_0x2d2c02){const _0x510d97=a16_0x510d();return a16_0x3403=function(_0x340307,_0x3407cd){_0x340307=_0x340307-0xf9;let _0xc30d0=_0x510d97[_0x340307];return _0xc30d0;},a16_0x3403(_0x503b10,_0x2d2c02);}const a16_0x482159=a16_0x3403;(function(_0x2df281,_0x3365c2){const _0x2478b0=a16_0x3403,_0x41dbb8=_0x2df281();while(!![]){try{const _0x2fbd59=parseInt(_0x2478b0(0x113))/0x1*(-parseInt(_0x2478b0(0x102))/0x2)+-parseInt(_0x2478b0(0x11f))/0x3*(parseInt(_0x2478b0(0x123))/0x4)+-parseInt(_0x2478b0(0x109))/0x5+-parseInt(_0x2478b0(0xfb))/0x6+parseInt(_0x2478b0(0x124))/0x7*(-parseInt(_0x2478b0(0x10b))/0x8)+-parseInt(_0x2478b0(0x114))/0x9*(parseInt(_0x2478b0(0x100))/0xa)+parseInt(_0x2478b0(0x104))/0xb;if(_0x2fbd59===_0x3365c2)break;else _0x41dbb8['push'](_0x41dbb8['shift']());}catch(_0x4e2a23){_0x41dbb8['push'](_0x41dbb8['shift']());}}}(a16_0x510d,0x86885));function a16_0x510d(){const _0x161fb3=['__importDefault','__esModule','requireActiveShop','2vskyRo','791784LXaPSB','Error\x20checking\x20account\x20status:','ACTIVE','token','role','SUSPENDED','../config/database','isTokenBlacklisted','headers','verify','defineProperty','358239gQBeOs','authenticateToken','admin','Invalid\x20or\x20expired\x20token','12AkwoaZ','7HxhwDi','jsonwebtoken','requireShop','Account\x20is\x20suspended\x20or\x20inactive.\x20Contact\x20administrator\x20to\x20activate\x20your\x20account.','3480336odWhgU','Access\x20token\x20required','shop','tokenBlacklistService','jwt','50GZiAGI','json','768070rbpQQa','status','41287895NEUIAT','user','config','Admin\x20access\x20required','../config/config','1107205HbrPoM','split','6677712iATpyA','../services/tokenBlacklistService','authorization','requireAdmin','secret'];a16_0x510d=function(){return _0x161fb3;};return a16_0x510d();}var __importDefault=this&&this[a16_0x482159(0x110)]||function(_0xaede40){const _0x4c74a2=a16_0x482159;return _0xaede40&&_0xaede40[_0x4c74a2(0x111)]?_0xaede40:{'default':_0xaede40};};Object[a16_0x482159(0x11e)](exports,a16_0x482159(0x111),{'value':!![]}),exports['requireActiveShop']=exports[a16_0x482159(0xf9)]=exports['requireAdmin']=exports[a16_0x482159(0x120)]=void 0x0;const jsonwebtoken_1=__importDefault(require(a16_0x482159(0x125))),config_1=require(a16_0x482159(0x108)),tokenBlacklistService_1=require(a16_0x482159(0x10c)),authenticateToken=(_0x1ce64c,_0x2b6d74,_0xdfdab7)=>{const _0x1f7831=a16_0x482159,_0x30aa5f=_0x1ce64c[_0x1f7831(0x11c)][_0x1f7831(0x10d)],_0x4adc4a=_0x30aa5f&&_0x30aa5f[_0x1f7831(0x10a)]('\x20')[0x1];if(!_0x4adc4a)return _0x2b6d74['status'](0x191)[_0x1f7831(0x101)]({'success':![],'message':_0x1f7831(0xfc)});if(tokenBlacklistService_1[_0x1f7831(0xfe)][_0x1f7831(0x11b)](_0x4adc4a))return _0x2b6d74[_0x1f7831(0x103)](0x191)['json']({'success':![],'message':'Token\x20has\x20been\x20revoked'});jsonwebtoken_1['default'][_0x1f7831(0x11d)](_0x4adc4a,config_1[_0x1f7831(0x106)][_0x1f7831(0xff)][_0x1f7831(0x10f)],(_0x1399b8,_0x53f580)=>{const _0x3434c3=_0x1f7831;if(_0x1399b8)return _0x2b6d74[_0x3434c3(0x103)](0x193)[_0x3434c3(0x101)]({'success':![],'message':_0x3434c3(0x122)});_0x1ce64c[_0x3434c3(0x105)]=_0x53f580,_0x1ce64c[_0x3434c3(0x117)]=_0x4adc4a,_0xdfdab7();});};exports[a16_0x482159(0x120)]=authenticateToken;const requireAdmin=(_0x5e7dc1,_0x158554,_0x20e08a)=>{const _0x524f8e=a16_0x482159;if(!_0x5e7dc1[_0x524f8e(0x105)]||_0x5e7dc1[_0x524f8e(0x105)]['role']!==_0x524f8e(0x121))return _0x158554[_0x524f8e(0x103)](0x193)['json']({'success':![],'message':_0x524f8e(0x107)});_0x20e08a();};exports[a16_0x482159(0x10e)]=requireAdmin;const requireShop=(_0xbfbec5,_0x2eac50,_0x249150)=>{const _0x5463c4=a16_0x482159;if(!_0xbfbec5[_0x5463c4(0x105)]||_0xbfbec5['user'][_0x5463c4(0x118)]!==_0x5463c4(0xfd))return _0x2eac50[_0x5463c4(0x103)](0x193)[_0x5463c4(0x101)]({'success':![],'message':'Shop\x20access\x20required'});_0x249150();};exports[a16_0x482159(0xf9)]=requireShop;const requireActiveShop=async(_0x2282dc,_0x2db372,_0x10c4fd)=>{const _0x1df83b=a16_0x482159;if(!_0x2282dc[_0x1df83b(0x105)]||_0x2282dc[_0x1df83b(0x105)][_0x1df83b(0x118)]!==_0x1df83b(0xfd))return _0x2db372[_0x1df83b(0x103)](0x193)[_0x1df83b(0x101)]({'success':![],'message':'Shop\x20access\x20required'});try{const _0x3dea22=require(_0x1df83b(0x11a))['default'],_0x3c6ddb=await _0x3dea22[_0x1df83b(0xfd)]['findUnique']({'where':{'id':_0x2282dc[_0x1df83b(0x105)]['id']},'select':{'status':!![]}});if(!_0x3c6ddb||_0x3c6ddb[_0x1df83b(0x103)]!==_0x1df83b(0x116))return _0x2db372[_0x1df83b(0x103)](0x193)[_0x1df83b(0x101)]({'success':![],'message':_0x1df83b(0xfa),'suspended':_0x3c6ddb?.[_0x1df83b(0x103)]===_0x1df83b(0x119)});_0x10c4fd();}catch(_0x344066){return console['error'](_0x1df83b(0x115),_0x344066),_0x2db372['status'](0x1f4)[_0x1df83b(0x101)]({'success':![],'message':'Error\x20checking\x20account\x20status'});}};exports[a16_0x482159(0x112)]=requireActiveShop;