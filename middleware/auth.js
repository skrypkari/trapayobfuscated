'use strict';function a16_0x2545(){const _0x3e8da8=['4671340ylgWpR','Shop\x20access\x20required','4323cBVtjd','default','205083smtXnf','verify','admin','authenticateToken','requireActiveShop','tokenBlacklistService','config','../config/config','../config/database','requireAdmin','authorization','findUnique','secret','isTokenBlacklisted','2AJnGTG','json','Token\x20has\x20been\x20revoked','ACTIVE','15133503xazmIj','24mpNaDZ','status','412875yYluQV','Error\x20checking\x20account\x20status:','user','token','../services/tokenBlacklistService','476LMEfIn','714550NWVGJQ','Access\x20token\x20required','6qhihjF','shop','Admin\x20access\x20required','137781kdBGLT','Error\x20checking\x20account\x20status','__esModule','role','defineProperty'];a16_0x2545=function(){return _0x3e8da8;};return a16_0x2545();}const a16_0x176982=a16_0x40f5;(function(_0xc32fa4,_0x14f354){const _0xa8c4c7=a16_0x40f5,_0x5e1945=_0xc32fa4();while(!![]){try{const _0x575a3c=parseInt(_0xa8c4c7(0x1f3))/0x1*(-parseInt(_0xa8c4c7(0x1d7))/0x2)+-parseInt(_0xa8c4c7(0x1e3))/0x3*(-parseInt(_0xa8c4c7(0x1d6))/0x4)+parseInt(_0xa8c4c7(0x1d1))/0x5+parseInt(_0xa8c4c7(0x1d9))/0x6*(-parseInt(_0xa8c4c7(0x1dc))/0x7)+parseInt(_0xa8c4c7(0x1cf))/0x8*(-parseInt(_0xa8c4c7(0x1e5))/0x9)+-parseInt(_0xa8c4c7(0x1e1))/0xa+parseInt(_0xa8c4c7(0x1ce))/0xb;if(_0x575a3c===_0x14f354)break;else _0x5e1945['push'](_0x5e1945['shift']());}catch(_0x1582b5){_0x5e1945['push'](_0x5e1945['shift']());}}}(a16_0x2545,0x57ea3));var __importDefault=this&&this['__importDefault']||function(_0x4ef95b){const _0x274ea5=a16_0x40f5;return _0x4ef95b&&_0x4ef95b[_0x274ea5(0x1de)]?_0x4ef95b:{'default':_0x4ef95b};};Object[a16_0x176982(0x1e0)](exports,a16_0x176982(0x1de),{'value':!![]}),exports['requireActiveShop']=exports['requireShop']=exports[a16_0x176982(0x1ee)]=exports[a16_0x176982(0x1e8)]=void 0x0;const jsonwebtoken_1=__importDefault(require('jsonwebtoken')),config_1=require(a16_0x176982(0x1ec)),tokenBlacklistService_1=require(a16_0x176982(0x1d5)),authenticateToken=(_0x1f2376,_0x4c286b,_0x1d84dc)=>{const _0x510bf2=a16_0x176982,_0x4f7b69=_0x1f2376['headers'][_0x510bf2(0x1ef)],_0x5bd232=_0x4f7b69&&_0x4f7b69['split']('\x20')[0x1];if(!_0x5bd232)return _0x4c286b[_0x510bf2(0x1d0)](0x191)[_0x510bf2(0x1f4)]({'success':![],'message':_0x510bf2(0x1d8)});if(tokenBlacklistService_1[_0x510bf2(0x1ea)][_0x510bf2(0x1f2)](_0x5bd232))return _0x4c286b[_0x510bf2(0x1d0)](0x191)['json']({'success':![],'message':_0x510bf2(0x1cc)});jsonwebtoken_1[_0x510bf2(0x1e4)][_0x510bf2(0x1e6)](_0x5bd232,config_1[_0x510bf2(0x1eb)]['jwt'][_0x510bf2(0x1f1)],(_0x4f79b6,_0x44774c)=>{const _0x1f9125=_0x510bf2;if(_0x4f79b6)return _0x4c286b[_0x1f9125(0x1d0)](0x193)[_0x1f9125(0x1f4)]({'success':![],'message':'Invalid\x20or\x20expired\x20token'});_0x1f2376[_0x1f9125(0x1d3)]=_0x44774c,_0x1f2376[_0x1f9125(0x1d4)]=_0x5bd232,_0x1d84dc();});};exports[a16_0x176982(0x1e8)]=authenticateToken;const requireAdmin=(_0x45f591,_0x5254a4,_0x35b960)=>{const _0x5728ca=a16_0x176982;if(!_0x45f591['user']||_0x45f591[_0x5728ca(0x1d3)][_0x5728ca(0x1df)]!==_0x5728ca(0x1e7))return _0x5254a4[_0x5728ca(0x1d0)](0x193)['json']({'success':![],'message':_0x5728ca(0x1db)});_0x35b960();};exports[a16_0x176982(0x1ee)]=requireAdmin;const requireShop=(_0x432c1d,_0x15fe48,_0x1697d5)=>{const _0x1ec9c=a16_0x176982;if(!_0x432c1d[_0x1ec9c(0x1d3)]||_0x432c1d[_0x1ec9c(0x1d3)][_0x1ec9c(0x1df)]!=='shop')return _0x15fe48[_0x1ec9c(0x1d0)](0x193)[_0x1ec9c(0x1f4)]({'success':![],'message':_0x1ec9c(0x1e2)});_0x1697d5();};exports['requireShop']=requireShop;function a16_0x40f5(_0x525984,_0x50f028){const _0x25454c=a16_0x2545();return a16_0x40f5=function(_0x40f505,_0x2099ad){_0x40f505=_0x40f505-0x1cc;let _0x2114ae=_0x25454c[_0x40f505];return _0x2114ae;},a16_0x40f5(_0x525984,_0x50f028);}const requireActiveShop=async(_0x5a4223,_0x4567b4,_0x2190d9)=>{const _0x515c15=a16_0x176982;if(!_0x5a4223['user']||_0x5a4223[_0x515c15(0x1d3)]['role']!==_0x515c15(0x1da))return _0x4567b4['status'](0x193)[_0x515c15(0x1f4)]({'success':![],'message':_0x515c15(0x1e2)});try{const _0x385444=require(_0x515c15(0x1ed))['default'],_0xd822e4=await _0x385444['shop'][_0x515c15(0x1f0)]({'where':{'id':_0x5a4223[_0x515c15(0x1d3)]['id']},'select':{'status':!![]}});if(!_0xd822e4||_0xd822e4[_0x515c15(0x1d0)]!==_0x515c15(0x1cd))return _0x4567b4[_0x515c15(0x1d0)](0x193)[_0x515c15(0x1f4)]({'success':![],'message':'Account\x20is\x20suspended\x20or\x20inactive.\x20Contact\x20administrator\x20to\x20activate\x20your\x20account.','suspended':_0xd822e4?.['status']==='SUSPENDED'});_0x2190d9();}catch(_0x16bb2a){return console['error'](_0x515c15(0x1d2),_0x16bb2a),_0x4567b4[_0x515c15(0x1d0)](0x1f4)[_0x515c15(0x1f4)]({'success':![],'message':_0x515c15(0x1dd)});}};exports[a16_0x176982(0x1e9)]=requireActiveShop;