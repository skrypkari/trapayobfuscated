'use strict';const a18_0x5c1ad9=a18_0x80fe;(function(_0x15851d,_0x44fdbb){const _0x23eb3a=a18_0x80fe,_0x1c8ec2=_0x15851d();while(!![]){try{const _0x36c779=parseInt(_0x23eb3a(0x1ee))/0x1+-parseInt(_0x23eb3a(0x1fa))/0x2*(parseInt(_0x23eb3a(0x1fc))/0x3)+parseInt(_0x23eb3a(0x1fd))/0x4+parseInt(_0x23eb3a(0x203))/0x5+-parseInt(_0x23eb3a(0x1f2))/0x6*(-parseInt(_0x23eb3a(0x1ed))/0x7)+-parseInt(_0x23eb3a(0x1ea))/0x8+parseInt(_0x23eb3a(0x1f4))/0x9*(parseInt(_0x23eb3a(0x1f9))/0xa);if(_0x36c779===_0x44fdbb)break;else _0x1c8ec2['push'](_0x1c8ec2['shift']());}catch(_0x258378){_0x1c8ec2['push'](_0x1c8ec2['shift']());}}}(a18_0x15ad,0x9961b));function a18_0x15ad(){const _0x44c89d=['authorization','../config/config','Invalid\x20or\x20expired\x20token','default','30710YoPiXw','role','../config/database','__esModule','../services/tokenBlacklistService','verify','Shop\x20access\x20required','user','token','findUnique','Error\x20checking\x20account\x20status','jsonwebtoken','split','status','Account\x20is\x20suspended\x20or\x20inactive.\x20Contact\x20administrator\x20to\x20activate\x20your\x20account.','Token\x20has\x20been\x20revoked','__importDefault','requireShop','4507960LpRdpY','error','requireAdmin','3854949hHEWeV','527509aWOEkE','json','secret','tokenBlacklistService','6mhTpMD','shop','3305223uDLJwO','defineProperty','Admin\x20access\x20required','jwt','headers','30XLetmK','18ipGOmQ','authenticateToken','383253uCsZrF','621624pElftm','requireActiveShop'];a18_0x15ad=function(){return _0x44c89d;};return a18_0x15ad();}var __importDefault=this&&this[a18_0x5c1ad9(0x1e8)]||function(_0xaf79ed){const _0x35fdcd=a18_0x5c1ad9;return _0xaf79ed&&_0xaf79ed[_0x35fdcd(0x206)]?_0xaf79ed:{'default':_0xaf79ed};};Object[a18_0x5c1ad9(0x1f5)](exports,a18_0x5c1ad9(0x206),{'value':!![]}),exports[a18_0x5c1ad9(0x1fe)]=exports[a18_0x5c1ad9(0x1e9)]=exports[a18_0x5c1ad9(0x1ec)]=exports[a18_0x5c1ad9(0x1fb)]=void 0x0;const jsonwebtoken_1=__importDefault(require(a18_0x5c1ad9(0x1e3))),config_1=require(a18_0x5c1ad9(0x200)),tokenBlacklistService_1=require(a18_0x5c1ad9(0x207)),authenticateToken=(_0x10769b,_0x1ce122,_0x20744b)=>{const _0x2a4668=a18_0x5c1ad9,_0x3c7efd=_0x10769b[_0x2a4668(0x1f8)][_0x2a4668(0x1ff)],_0x2e72ce=_0x3c7efd&&_0x3c7efd[_0x2a4668(0x1e4)]('\x20')[0x1];if(!_0x2e72ce)return _0x1ce122[_0x2a4668(0x1e5)](0x191)[_0x2a4668(0x1ef)]({'success':![],'message':'Access\x20token\x20required'});if(tokenBlacklistService_1[_0x2a4668(0x1f1)]['isTokenBlacklisted'](_0x2e72ce))return _0x1ce122[_0x2a4668(0x1e5)](0x191)[_0x2a4668(0x1ef)]({'success':![],'message':_0x2a4668(0x1e7)});jsonwebtoken_1[_0x2a4668(0x202)][_0x2a4668(0x208)](_0x2e72ce,config_1['config'][_0x2a4668(0x1f7)][_0x2a4668(0x1f0)],(_0x827592,_0x475c22)=>{const _0x289621=_0x2a4668;if(_0x827592)return _0x1ce122['status'](0x193)[_0x289621(0x1ef)]({'success':![],'message':_0x289621(0x201)});_0x10769b['user']=_0x475c22,_0x10769b[_0x289621(0x1e0)]=_0x2e72ce,_0x20744b();});};exports[a18_0x5c1ad9(0x1fb)]=authenticateToken;function a18_0x80fe(_0x39af76,_0x3d4618){const _0x15ad96=a18_0x15ad();return a18_0x80fe=function(_0x80fe18,_0x31bca9){_0x80fe18=_0x80fe18-0x1e0;let _0x4712ea=_0x15ad96[_0x80fe18];return _0x4712ea;},a18_0x80fe(_0x39af76,_0x3d4618);}const requireAdmin=(_0x2b9bd3,_0xf659bd,_0x3f16f3)=>{const _0x3fa92c=a18_0x5c1ad9;if(!_0x2b9bd3['user']||_0x2b9bd3[_0x3fa92c(0x20a)][_0x3fa92c(0x204)]!=='admin')return _0xf659bd[_0x3fa92c(0x1e5)](0x193)[_0x3fa92c(0x1ef)]({'success':![],'message':_0x3fa92c(0x1f6)});_0x3f16f3();};exports[a18_0x5c1ad9(0x1ec)]=requireAdmin;const requireShop=(_0xa126fd,_0x26095b,_0x209163)=>{const _0x2ea1a0=a18_0x5c1ad9;if(!_0xa126fd['user']||_0xa126fd[_0x2ea1a0(0x20a)][_0x2ea1a0(0x204)]!==_0x2ea1a0(0x1f3))return _0x26095b[_0x2ea1a0(0x1e5)](0x193)[_0x2ea1a0(0x1ef)]({'success':![],'message':_0x2ea1a0(0x209)});_0x209163();};exports[a18_0x5c1ad9(0x1e9)]=requireShop;const requireActiveShop=async(_0x3bdd67,_0x2e0f10,_0x39b6c5)=>{const _0x81808c=a18_0x5c1ad9;if(!_0x3bdd67['user']||_0x3bdd67[_0x81808c(0x20a)][_0x81808c(0x204)]!==_0x81808c(0x1f3))return _0x2e0f10[_0x81808c(0x1e5)](0x193)[_0x81808c(0x1ef)]({'success':![],'message':_0x81808c(0x209)});try{const _0x1379a2=require(_0x81808c(0x205))[_0x81808c(0x202)],_0x1de9cc=await _0x1379a2[_0x81808c(0x1f3)][_0x81808c(0x1e1)]({'where':{'id':_0x3bdd67[_0x81808c(0x20a)]['id']},'select':{'status':!![]}});if(!_0x1de9cc||_0x1de9cc[_0x81808c(0x1e5)]!=='ACTIVE')return _0x2e0f10[_0x81808c(0x1e5)](0x193)[_0x81808c(0x1ef)]({'success':![],'message':_0x81808c(0x1e6),'suspended':_0x1de9cc?.[_0x81808c(0x1e5)]==='SUSPENDED'});_0x39b6c5();}catch(_0x1955b6){return console[_0x81808c(0x1eb)]('Error\x20checking\x20account\x20status:',_0x1955b6),_0x2e0f10[_0x81808c(0x1e5)](0x1f4)[_0x81808c(0x1ef)]({'success':![],'message':_0x81808c(0x1e2)});}};exports['requireActiveShop']=requireActiveShop;