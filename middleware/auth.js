'use strict';function a16_0x46f6(){const _0x51eec3=['ACTIVE','813207BvAxHW','2557408YfAunJ','4142904DnAZwF','shop','tokenBlacklistService','findUnique','user','isTokenBlacklisted','json','requireAdmin','Error\x20checking\x20account\x20status','Token\x20has\x20been\x20revoked','jwt','verify','headers','7116800lXHDjt','authenticateToken','token','5296740HIXUxM','defineProperty','40897584zsQdWO','8HLXcMz','118IiwmPw','../config/database','authorization','__esModule','requireActiveShop','../config/config','Admin\x20access\x20required','status','requireShop','jsonwebtoken','Access\x20token\x20required','842ojYEic','Account\x20is\x20suspended\x20or\x20inactive.\x20Contact\x20administrator\x20to\x20activate\x20your\x20account.','default','role','error','Invalid\x20or\x20expired\x20token','Shop\x20access\x20required','config','secret','split'];a16_0x46f6=function(){return _0x51eec3;};return a16_0x46f6();}const a16_0x2b9024=a16_0x9536;(function(_0x57ef8e,_0x1f1774){const _0x3839f5=a16_0x9536,_0x8c37d6=_0x57ef8e();while(!![]){try{const _0x38b2af=-parseInt(_0x3839f5(0x19d))/0x1*(parseInt(_0x3839f5(0x192))/0x2)+parseInt(_0x3839f5(0x1a8))/0x3*(-parseInt(_0x3839f5(0x191))/0x4)+-parseInt(_0x3839f5(0x18b))/0x5+-parseInt(_0x3839f5(0x18e))/0x6+-parseInt(_0x3839f5(0x17d))/0x7+-parseInt(_0x3839f5(0x17e))/0x8+parseInt(_0x3839f5(0x190))/0x9;if(_0x38b2af===_0x1f1774)break;else _0x8c37d6['push'](_0x8c37d6['shift']());}catch(_0x5ad4b7){_0x8c37d6['push'](_0x8c37d6['shift']());}}}(a16_0x46f6,0xba47b));var __importDefault=this&&this['__importDefault']||function(_0x4b4155){const _0x5b9de3=a16_0x9536;return _0x4b4155&&_0x4b4155[_0x5b9de3(0x195)]?_0x4b4155:{'default':_0x4b4155};};Object[a16_0x2b9024(0x18f)](exports,'__esModule',{'value':!![]}),exports[a16_0x2b9024(0x196)]=exports[a16_0x2b9024(0x19a)]=exports[a16_0x2b9024(0x185)]=exports[a16_0x2b9024(0x18c)]=void 0x0;const jsonwebtoken_1=__importDefault(require(a16_0x2b9024(0x19b))),config_1=require(a16_0x2b9024(0x197)),tokenBlacklistService_1=require('../services/tokenBlacklistService'),authenticateToken=(_0x56b6ef,_0x281d7c,_0xc65a2a)=>{const _0xa48078=a16_0x2b9024,_0x5bea77=_0x56b6ef[_0xa48078(0x18a)][_0xa48078(0x194)],_0x3555c4=_0x5bea77&&_0x5bea77[_0xa48078(0x1a6)]('\x20')[0x1];if(!_0x3555c4)return _0x281d7c[_0xa48078(0x199)](0x191)['json']({'success':![],'message':_0xa48078(0x19c)});if(tokenBlacklistService_1[_0xa48078(0x180)][_0xa48078(0x183)](_0x3555c4))return _0x281d7c[_0xa48078(0x199)](0x191)['json']({'success':![],'message':_0xa48078(0x187)});jsonwebtoken_1[_0xa48078(0x19f)][_0xa48078(0x189)](_0x3555c4,config_1[_0xa48078(0x1a4)][_0xa48078(0x188)][_0xa48078(0x1a5)],(_0x1b29b9,_0x180b89)=>{const _0x30449d=_0xa48078;if(_0x1b29b9)return _0x281d7c[_0x30449d(0x199)](0x193)[_0x30449d(0x184)]({'success':![],'message':_0x30449d(0x1a2)});_0x56b6ef[_0x30449d(0x182)]=_0x180b89,_0x56b6ef[_0x30449d(0x18d)]=_0x3555c4,_0xc65a2a();});};exports[a16_0x2b9024(0x18c)]=authenticateToken;const requireAdmin=(_0x28dbba,_0x4a9bd1,_0x5086a2)=>{const _0x3a788a=a16_0x2b9024;if(!_0x28dbba['user']||_0x28dbba[_0x3a788a(0x182)][_0x3a788a(0x1a0)]!=='admin')return _0x4a9bd1['status'](0x193)[_0x3a788a(0x184)]({'success':![],'message':_0x3a788a(0x198)});_0x5086a2();};exports[a16_0x2b9024(0x185)]=requireAdmin;const requireShop=(_0x324a07,_0xd4f45,_0x3b8305)=>{const _0x277e0f=a16_0x2b9024;if(!_0x324a07[_0x277e0f(0x182)]||_0x324a07[_0x277e0f(0x182)][_0x277e0f(0x1a0)]!=='shop')return _0xd4f45[_0x277e0f(0x199)](0x193)[_0x277e0f(0x184)]({'success':![],'message':_0x277e0f(0x1a3)});_0x3b8305();};function a16_0x9536(_0x3852bd,_0x2190ad){const _0x46f6f9=a16_0x46f6();return a16_0x9536=function(_0x953632,_0x30e39f){_0x953632=_0x953632-0x17d;let _0x32675e=_0x46f6f9[_0x953632];return _0x32675e;},a16_0x9536(_0x3852bd,_0x2190ad);}exports[a16_0x2b9024(0x19a)]=requireShop;const requireActiveShop=async(_0x4e571d,_0x466b1c,_0x4e08e6)=>{const _0x57e4a8=a16_0x2b9024;if(!_0x4e571d[_0x57e4a8(0x182)]||_0x4e571d[_0x57e4a8(0x182)][_0x57e4a8(0x1a0)]!==_0x57e4a8(0x17f))return _0x466b1c[_0x57e4a8(0x199)](0x193)['json']({'success':![],'message':_0x57e4a8(0x1a3)});try{const _0x1bd6cf=require(_0x57e4a8(0x193))[_0x57e4a8(0x19f)],_0x3eb7f1=await _0x1bd6cf[_0x57e4a8(0x17f)][_0x57e4a8(0x181)]({'where':{'id':_0x4e571d[_0x57e4a8(0x182)]['id']},'select':{'status':!![]}});if(!_0x3eb7f1||_0x3eb7f1['status']!==_0x57e4a8(0x1a7))return _0x466b1c['status'](0x193)[_0x57e4a8(0x184)]({'success':![],'message':_0x57e4a8(0x19e),'suspended':_0x3eb7f1?.[_0x57e4a8(0x199)]==='SUSPENDED'});_0x4e08e6();}catch(_0x374320){return console[_0x57e4a8(0x1a1)]('Error\x20checking\x20account\x20status:',_0x374320),_0x466b1c[_0x57e4a8(0x199)](0x1f4)['json']({'success':![],'message':_0x57e4a8(0x186)});}};exports[a16_0x2b9024(0x196)]=requireActiveShop;