'use strict';const a16_0x3cd2d4=a16_0x457d;(function(_0x2d87ee,_0x10a7d4){const _0x39357d=a16_0x457d,_0xaffd2c=_0x2d87ee();while(!![]){try{const _0x68e9df=-parseInt(_0x39357d(0x124))/0x1*(-parseInt(_0x39357d(0x128))/0x2)+parseInt(_0x39357d(0x104))/0x3*(-parseInt(_0x39357d(0x122))/0x4)+-parseInt(_0x39357d(0x101))/0x5+parseInt(_0x39357d(0x12c))/0x6+parseInt(_0x39357d(0x115))/0x7+parseInt(_0x39357d(0x12d))/0x8+parseInt(_0x39357d(0x10f))/0x9;if(_0x68e9df===_0x10a7d4)break;else _0xaffd2c['push'](_0xaffd2c['shift']());}catch(_0x3768f5){_0xaffd2c['push'](_0xaffd2c['shift']());}}}(a16_0x4859,0xd8959));var __importDefault=this&&this[a16_0x3cd2d4(0x125)]||function(_0x21cdd0){const _0x518ce4=a16_0x3cd2d4;return _0x21cdd0&&_0x21cdd0[_0x518ce4(0x10a)]?_0x21cdd0:{'default':_0x21cdd0};};function a16_0x4859(){const _0x5d92b0=['status','token','secret','ACTIVE','2243430glCnhF','role','error','defineProperty','isTokenBlacklisted','Invalid\x20or\x20expired\x20token','requireActiveShop','requireAdmin','user','Error\x20checking\x20account\x20status:','../config/config','tokenBlacklistService','findUnique','4bQdULR','authorization','759131xuBnqj','__importDefault','Admin\x20access\x20required','requireShop','4Gviywd','Token\x20has\x20been\x20revoked','../config/database','shop','4245282xSviVX','165488pLkeHF','default','2856760SIaHTn','Shop\x20access\x20required','admin','4021719EOTFRU','../services/tokenBlacklistService','config','headers','authenticateToken','Access\x20token\x20required','__esModule','verify','split','SUSPENDED','json','2088621FeGiBM','jwt'];a16_0x4859=function(){return _0x5d92b0;};return a16_0x4859();}Object[a16_0x3cd2d4(0x118)](exports,a16_0x3cd2d4(0x10a),{'value':!![]}),exports[a16_0x3cd2d4(0x11b)]=exports[a16_0x3cd2d4(0x127)]=exports['requireAdmin']=exports[a16_0x3cd2d4(0x108)]=void 0x0;const jsonwebtoken_1=__importDefault(require('jsonwebtoken')),config_1=require(a16_0x3cd2d4(0x11f)),tokenBlacklistService_1=require(a16_0x3cd2d4(0x105)),authenticateToken=(_0x426b21,_0x3a1336,_0x16ef33)=>{const _0x369dce=a16_0x3cd2d4,_0x6aa992=_0x426b21[_0x369dce(0x107)][_0x369dce(0x123)],_0x2d5620=_0x6aa992&&_0x6aa992[_0x369dce(0x10c)]('\x20')[0x1];if(!_0x2d5620)return _0x3a1336[_0x369dce(0x111)](0x191)[_0x369dce(0x10e)]({'success':![],'message':_0x369dce(0x109)});if(tokenBlacklistService_1[_0x369dce(0x120)][_0x369dce(0x119)](_0x2d5620))return _0x3a1336[_0x369dce(0x111)](0x191)[_0x369dce(0x10e)]({'success':![],'message':_0x369dce(0x129)});jsonwebtoken_1[_0x369dce(0x100)][_0x369dce(0x10b)](_0x2d5620,config_1[_0x369dce(0x106)][_0x369dce(0x110)][_0x369dce(0x113)],(_0x4b9eae,_0x132e12)=>{const _0x3d760c=_0x369dce;if(_0x4b9eae)return _0x3a1336[_0x3d760c(0x111)](0x193)[_0x3d760c(0x10e)]({'success':![],'message':_0x3d760c(0x11a)});_0x426b21[_0x3d760c(0x11d)]=_0x132e12,_0x426b21[_0x3d760c(0x112)]=_0x2d5620,_0x16ef33();});};exports[a16_0x3cd2d4(0x108)]=authenticateToken;const requireAdmin=(_0x270bff,_0x46a84a,_0x13eb80)=>{const _0x52f818=a16_0x3cd2d4;if(!_0x270bff[_0x52f818(0x11d)]||_0x270bff[_0x52f818(0x11d)][_0x52f818(0x116)]!==_0x52f818(0x103))return _0x46a84a[_0x52f818(0x111)](0x193)['json']({'success':![],'message':_0x52f818(0x126)});_0x13eb80();};exports[a16_0x3cd2d4(0x11c)]=requireAdmin;const requireShop=(_0x3b4bba,_0x4d281b,_0x44b65b)=>{const _0xa42038=a16_0x3cd2d4;if(!_0x3b4bba[_0xa42038(0x11d)]||_0x3b4bba[_0xa42038(0x11d)][_0xa42038(0x116)]!=='shop')return _0x4d281b[_0xa42038(0x111)](0x193)[_0xa42038(0x10e)]({'success':![],'message':_0xa42038(0x102)});_0x44b65b();};exports[a16_0x3cd2d4(0x127)]=requireShop;const requireActiveShop=async(_0x21b9e1,_0x530ad8,_0x98d21c)=>{const _0x4ef33c=a16_0x3cd2d4;if(!_0x21b9e1[_0x4ef33c(0x11d)]||_0x21b9e1[_0x4ef33c(0x11d)][_0x4ef33c(0x116)]!==_0x4ef33c(0x12b))return _0x530ad8['status'](0x193)[_0x4ef33c(0x10e)]({'success':![],'message':_0x4ef33c(0x102)});try{const _0x5c8559=require(_0x4ef33c(0x12a))[_0x4ef33c(0x100)],_0x29f772=await _0x5c8559[_0x4ef33c(0x12b)][_0x4ef33c(0x121)]({'where':{'id':_0x21b9e1['user']['id']},'select':{'status':!![]}});if(!_0x29f772||_0x29f772[_0x4ef33c(0x111)]!==_0x4ef33c(0x114))return _0x530ad8['status'](0x193)['json']({'success':![],'message':'Account\x20is\x20suspended\x20or\x20inactive.\x20Contact\x20administrator\x20to\x20activate\x20your\x20account.','suspended':_0x29f772?.[_0x4ef33c(0x111)]===_0x4ef33c(0x10d)});_0x98d21c();}catch(_0x515980){return console[_0x4ef33c(0x117)](_0x4ef33c(0x11e),_0x515980),_0x530ad8[_0x4ef33c(0x111)](0x1f4)[_0x4ef33c(0x10e)]({'success':![],'message':'Error\x20checking\x20account\x20status'});}};function a16_0x457d(_0x3dd5db,_0x249353){const _0x485991=a16_0x4859();return a16_0x457d=function(_0x457d7e,_0x57190c){_0x457d7e=_0x457d7e-0x100;let _0x24b278=_0x485991[_0x457d7e];return _0x24b278;},a16_0x457d(_0x3dd5db,_0x249353);}exports[a16_0x3cd2d4(0x11b)]=requireActiveShop;