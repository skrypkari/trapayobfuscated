'use strict';const a16_0xd3bb06=a16_0x2130;(function(_0x5cfeaa,_0x4489e6){const _0x418102=a16_0x2130,_0x3d604e=_0x5cfeaa();while(!![]){try{const _0x10d031=-parseInt(_0x418102(0x9c))/0x1+-parseInt(_0x418102(0xa4))/0x2*(-parseInt(_0x418102(0xb1))/0x3)+-parseInt(_0x418102(0xa1))/0x4+parseInt(_0x418102(0x9b))/0x5+parseInt(_0x418102(0x97))/0x6*(parseInt(_0x418102(0xb0))/0x7)+-parseInt(_0x418102(0x90))/0x8*(-parseInt(_0x418102(0x92))/0x9)+parseInt(_0x418102(0xaf))/0xa;if(_0x10d031===_0x4489e6)break;else _0x3d604e['push'](_0x3d604e['shift']());}catch(_0x1a01f9){_0x3d604e['push'](_0x3d604e['shift']());}}}(a16_0x547d,0x35b7d));var __importDefault=this&&this[a16_0xd3bb06(0x96)]||function(_0x4f9690){const _0x385687=a16_0xd3bb06;return _0x4f9690&&_0x4f9690[_0x385687(0xad)]?_0x4f9690:{'default':_0x4f9690};};Object['defineProperty'](exports,a16_0xd3bb06(0xad),{'value':!![]}),exports[a16_0xd3bb06(0xa9)]=exports[a16_0xd3bb06(0xa7)]=exports[a16_0xd3bb06(0x8b)]=exports[a16_0xd3bb06(0xae)]=void 0x0;const jsonwebtoken_1=__importDefault(require(a16_0xd3bb06(0xb7))),config_1=require(a16_0xd3bb06(0x8f)),tokenBlacklistService_1=require(a16_0xd3bb06(0x94)),authenticateToken=(_0x1c79bf,_0x59d838,_0x3f8f95)=>{const _0x4d9bc8=a16_0xd3bb06,_0x16271c=_0x1c79bf[_0x4d9bc8(0x91)][_0x4d9bc8(0xa5)],_0x166507=_0x16271c&&_0x16271c[_0x4d9bc8(0xa3)]('\x20')[0x1];if(!_0x166507)return _0x59d838[_0x4d9bc8(0x8e)](0x191)['json']({'success':![],'message':_0x4d9bc8(0x93)});if(tokenBlacklistService_1[_0x4d9bc8(0x99)][_0x4d9bc8(0x8d)](_0x166507))return _0x59d838[_0x4d9bc8(0x8e)](0x191)[_0x4d9bc8(0xb3)]({'success':![],'message':_0x4d9bc8(0x9a)});jsonwebtoken_1[_0x4d9bc8(0xb4)][_0x4d9bc8(0xa6)](_0x166507,config_1[_0x4d9bc8(0x95)][_0x4d9bc8(0x9f)][_0x4d9bc8(0x98)],(_0x356a41,_0x38a275)=>{const _0x3868b8=_0x4d9bc8;if(_0x356a41)return _0x59d838['status'](0x193)[_0x3868b8(0xb3)]({'success':![],'message':_0x3868b8(0xa8)});_0x1c79bf[_0x3868b8(0xb6)]=_0x38a275,_0x1c79bf[_0x3868b8(0xa2)]=_0x166507,_0x3f8f95();});};exports[a16_0xd3bb06(0xae)]=authenticateToken;function a16_0x547d(){const _0x18df02=['default','Shop\x20access\x20required','user','jsonwebtoken','requireAdmin','Account\x20is\x20suspended\x20or\x20inactive.\x20Contact\x20administrator\x20to\x20activate\x20your\x20account.','isTokenBlacklisted','status','../config/config','1368uqZsNC','headers','1908nOowPv','Access\x20token\x20required','../services/tokenBlacklistService','config','__importDefault','42ZHRTgF','secret','tokenBlacklistService','Token\x20has\x20been\x20revoked','1200755SPypFU','213950mnwwWb','Admin\x20access\x20required','ACTIVE','jwt','SUSPENDED','1290524YadBqz','token','split','17938chIyEb','authorization','verify','requireShop','Invalid\x20or\x20expired\x20token','requireActiveShop','../config/database','role','findUnique','__esModule','authenticateToken','410940euXSJy','394268fsbctE','15pdagvl','Error\x20checking\x20account\x20status','json'];a16_0x547d=function(){return _0x18df02;};return a16_0x547d();}function a16_0x2130(_0x2b6d97,_0x56db70){const _0x547dc4=a16_0x547d();return a16_0x2130=function(_0x21300c,_0x1764c9){_0x21300c=_0x21300c-0x8b;let _0x3b1482=_0x547dc4[_0x21300c];return _0x3b1482;},a16_0x2130(_0x2b6d97,_0x56db70);}const requireAdmin=(_0x5420c9,_0x153d4d,_0x123327)=>{const _0x255e71=a16_0xd3bb06;if(!_0x5420c9[_0x255e71(0xb6)]||_0x5420c9[_0x255e71(0xb6)]['role']!=='admin')return _0x153d4d[_0x255e71(0x8e)](0x193)[_0x255e71(0xb3)]({'success':![],'message':_0x255e71(0x9d)});_0x123327();};exports[a16_0xd3bb06(0x8b)]=requireAdmin;const requireShop=(_0x5b6779,_0x4ad53e,_0x562e24)=>{const _0x5d651c=a16_0xd3bb06;if(!_0x5b6779[_0x5d651c(0xb6)]||_0x5b6779[_0x5d651c(0xb6)]['role']!=='shop')return _0x4ad53e[_0x5d651c(0x8e)](0x193)[_0x5d651c(0xb3)]({'success':![],'message':_0x5d651c(0xb5)});_0x562e24();};exports['requireShop']=requireShop;const requireActiveShop=async(_0xacdea1,_0xceaafd,_0x2d4c1f)=>{const _0xa9cda0=a16_0xd3bb06;if(!_0xacdea1[_0xa9cda0(0xb6)]||_0xacdea1['user'][_0xa9cda0(0xab)]!=='shop')return _0xceaafd[_0xa9cda0(0x8e)](0x193)[_0xa9cda0(0xb3)]({'success':![],'message':_0xa9cda0(0xb5)});try{const _0x37de1d=require(_0xa9cda0(0xaa))[_0xa9cda0(0xb4)],_0x2b25ad=await _0x37de1d['shop'][_0xa9cda0(0xac)]({'where':{'id':_0xacdea1['user']['id']},'select':{'status':!![]}});if(!_0x2b25ad||_0x2b25ad[_0xa9cda0(0x8e)]!==_0xa9cda0(0x9e))return _0xceaafd[_0xa9cda0(0x8e)](0x193)[_0xa9cda0(0xb3)]({'success':![],'message':_0xa9cda0(0x8c),'suspended':_0x2b25ad?.[_0xa9cda0(0x8e)]===_0xa9cda0(0xa0)});_0x2d4c1f();}catch(_0x102275){return console['error']('Error\x20checking\x20account\x20status:',_0x102275),_0xceaafd[_0xa9cda0(0x8e)](0x1f4)[_0xa9cda0(0xb3)]({'success':![],'message':_0xa9cda0(0xb2)});}};exports[a16_0xd3bb06(0xa9)]=requireActiveShop;