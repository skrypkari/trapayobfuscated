'use strict';const a16_0xfad255=a16_0x3333;(function(_0x4d6368,_0x4012bb){const _0x161507=a16_0x3333,_0x2b3f6c=_0x4d6368();while(!![]){try{const _0x5ba258=parseInt(_0x161507(0x140))/0x1+parseInt(_0x161507(0x14f))/0x2*(-parseInt(_0x161507(0x152))/0x3)+parseInt(_0x161507(0x14d))/0x4*(parseInt(_0x161507(0x130))/0x5)+parseInt(_0x161507(0x129))/0x6*(-parseInt(_0x161507(0x136))/0x7)+-parseInt(_0x161507(0x141))/0x8+-parseInt(_0x161507(0x144))/0x9*(-parseInt(_0x161507(0x135))/0xa)+parseInt(_0x161507(0x139))/0xb;if(_0x5ba258===_0x4012bb)break;else _0x2b3f6c['push'](_0x2b3f6c['shift']());}catch(_0x1844dd){_0x2b3f6c['push'](_0x2b3f6c['shift']());}}}(a16_0x227e,0x5321a));function a16_0x227e(){const _0x427dfe=['json','ACTIVE','57ElTCUI','jsonwebtoken','authorization','Error\x20checking\x20account\x20status','1590Cwqcvr','../services/tokenBlacklistService','tokenBlacklistService','../config/config','isTokenBlacklisted','Shop\x20access\x20required','Token\x20has\x20been\x20revoked','581415MMBwLo','user','role','Invalid\x20or\x20expired\x20token','../config/database','20rTnsgD','3626bAHLuM','error','default','4986850YxESLN','findUnique','Account\x20is\x20suspended\x20or\x20inactive.\x20Contact\x20administrator\x20to\x20activate\x20your\x20account.','authenticateToken','requireShop','requireAdmin','secret','405905ZwSHsg','5026728WebCMZ','Access\x20token\x20required','SUSPENDED','1186308KqnJnr','token','admin','headers','status','jwt','split','verify','__esModule','20ecvJJd','shop','62966aQwkEn'];a16_0x227e=function(){return _0x427dfe;};return a16_0x227e();}var __importDefault=this&&this['__importDefault']||function(_0x267e55){const _0x90c912=a16_0x3333;return _0x267e55&&_0x267e55[_0x90c912(0x14c)]?_0x267e55:{'default':_0x267e55};};Object['defineProperty'](exports,a16_0xfad255(0x14c),{'value':!![]}),exports['requireActiveShop']=exports[a16_0xfad255(0x13d)]=exports[a16_0xfad255(0x13e)]=exports[a16_0xfad255(0x13c)]=void 0x0;const jsonwebtoken_1=__importDefault(require(a16_0xfad255(0x126))),config_1=require(a16_0xfad255(0x12c)),tokenBlacklistService_1=require(a16_0xfad255(0x12a)),authenticateToken=(_0x15eee0,_0x465c9b,_0x5e35d1)=>{const _0x5d56b5=a16_0xfad255,_0x30eab9=_0x15eee0[_0x5d56b5(0x147)][_0x5d56b5(0x127)],_0x5a8b56=_0x30eab9&&_0x30eab9[_0x5d56b5(0x14a)]('\x20')[0x1];if(!_0x5a8b56)return _0x465c9b[_0x5d56b5(0x148)](0x191)[_0x5d56b5(0x150)]({'success':![],'message':_0x5d56b5(0x142)});if(tokenBlacklistService_1[_0x5d56b5(0x12b)][_0x5d56b5(0x12d)](_0x5a8b56))return _0x465c9b['status'](0x191)[_0x5d56b5(0x150)]({'success':![],'message':_0x5d56b5(0x12f)});jsonwebtoken_1['default'][_0x5d56b5(0x14b)](_0x5a8b56,config_1['config'][_0x5d56b5(0x149)][_0x5d56b5(0x13f)],(_0x222d74,_0x249bfc)=>{const _0x225e6e=_0x5d56b5;if(_0x222d74)return _0x465c9b[_0x225e6e(0x148)](0x193)[_0x225e6e(0x150)]({'success':![],'message':_0x225e6e(0x133)});_0x15eee0[_0x225e6e(0x131)]=_0x249bfc,_0x15eee0[_0x225e6e(0x145)]=_0x5a8b56,_0x5e35d1();});};exports[a16_0xfad255(0x13c)]=authenticateToken;const requireAdmin=(_0xfc70c3,_0x50669d,_0x1c4c1c)=>{const _0x2f3316=a16_0xfad255;if(!_0xfc70c3[_0x2f3316(0x131)]||_0xfc70c3[_0x2f3316(0x131)][_0x2f3316(0x132)]!==_0x2f3316(0x146))return _0x50669d[_0x2f3316(0x148)](0x193)['json']({'success':![],'message':'Admin\x20access\x20required'});_0x1c4c1c();};exports['requireAdmin']=requireAdmin;const requireShop=(_0x44ed6f,_0x40a854,_0x325e25)=>{const _0x4f4261=a16_0xfad255;if(!_0x44ed6f[_0x4f4261(0x131)]||_0x44ed6f[_0x4f4261(0x131)]['role']!=='shop')return _0x40a854[_0x4f4261(0x148)](0x193)[_0x4f4261(0x150)]({'success':![],'message':_0x4f4261(0x12e)});_0x325e25();};exports[a16_0xfad255(0x13d)]=requireShop;function a16_0x3333(_0x380a53,_0x1f837f){const _0x227e8c=a16_0x227e();return a16_0x3333=function(_0x333324,_0x1e0f90){_0x333324=_0x333324-0x126;let _0x4cf849=_0x227e8c[_0x333324];return _0x4cf849;},a16_0x3333(_0x380a53,_0x1f837f);}const requireActiveShop=async(_0xf03866,_0x341f90,_0x495cb0)=>{const _0x24306c=a16_0xfad255;if(!_0xf03866['user']||_0xf03866[_0x24306c(0x131)][_0x24306c(0x132)]!==_0x24306c(0x14e))return _0x341f90[_0x24306c(0x148)](0x193)[_0x24306c(0x150)]({'success':![],'message':'Shop\x20access\x20required'});try{const _0x273e39=require(_0x24306c(0x134))[_0x24306c(0x138)],_0x3f9c99=await _0x273e39['shop'][_0x24306c(0x13a)]({'where':{'id':_0xf03866[_0x24306c(0x131)]['id']},'select':{'status':!![]}});if(!_0x3f9c99||_0x3f9c99[_0x24306c(0x148)]!==_0x24306c(0x151))return _0x341f90['status'](0x193)[_0x24306c(0x150)]({'success':![],'message':_0x24306c(0x13b),'suspended':_0x3f9c99?.[_0x24306c(0x148)]===_0x24306c(0x143)});_0x495cb0();}catch(_0x9a217d){return console[_0x24306c(0x137)]('Error\x20checking\x20account\x20status:',_0x9a217d),_0x341f90[_0x24306c(0x148)](0x1f4)[_0x24306c(0x150)]({'success':![],'message':_0x24306c(0x128)});}};exports['requireActiveShop']=requireActiveShop;