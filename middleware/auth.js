'use strict';const a24_0x1d94b6=a24_0x439c;(function(_0xaa9591,_0x1c0a8d){const _0x22c1f5=a24_0x439c,_0x4fa0e8=_0xaa9591();while(!![]){try{const _0x447342=-parseInt(_0x22c1f5(0x130))/0x1*(-parseInt(_0x22c1f5(0x12b))/0x2)+-parseInt(_0x22c1f5(0x13a))/0x3*(parseInt(_0x22c1f5(0x142))/0x4)+-parseInt(_0x22c1f5(0x156))/0x5*(parseInt(_0x22c1f5(0x144))/0x6)+-parseInt(_0x22c1f5(0x12c))/0x7*(-parseInt(_0x22c1f5(0x12e))/0x8)+-parseInt(_0x22c1f5(0x136))/0x9+parseInt(_0x22c1f5(0x12f))/0xa+parseInt(_0x22c1f5(0x137))/0xb*(parseInt(_0x22c1f5(0x13c))/0xc);if(_0x447342===_0x1c0a8d)break;else _0x4fa0e8['push'](_0x4fa0e8['shift']());}catch(_0x4394ee){_0x4fa0e8['push'](_0x4fa0e8['shift']());}}}(a24_0x3203,0xb88a8));function a24_0x3203(){const _0x1c6eeb=['token','default','verify','status','Invalid\x20or\x20expired\x20token','requireAdmin','jwt','split','requireActiveShop','Token\x20has\x20been\x20revoked','Access\x20token\x20required','config','requireShop','../config/database','headers','Admin\x20access\x20required','15ERluxE','../config/config','user','Account\x20is\x20suspended\x20or\x20inactive.\x20Contact\x20administrator\x20to\x20activate\x20your\x20account.','911110CQmYHg','478184cvsfhe','role','72AHUimL','1375450mTBWXY','1bhUXHg','Shop\x20access\x20required','jsonwebtoken','ACTIVE','__importDefault','../services/tokenBlacklistService','7019451pTKngi','74305ZgAsUZ','shop','authorization','6192vsOLcp','secret','4332eMepQi','Error\x20checking\x20account\x20status','tokenBlacklistService','json','__esModule','admin','2748JuintU','authenticateToken','1385352NtMuBI','findUnique'];a24_0x3203=function(){return _0x1c6eeb;};return a24_0x3203();}var __importDefault=this&&this[a24_0x1d94b6(0x134)]||function(_0x53ac80){const _0x4b09b6=a24_0x1d94b6;return _0x53ac80&&_0x53ac80[_0x4b09b6(0x140)]?_0x53ac80:{'default':_0x53ac80};};Object['defineProperty'](exports,a24_0x1d94b6(0x140),{'value':!![]}),exports[a24_0x1d94b6(0x14e)]=exports['requireShop']=exports[a24_0x1d94b6(0x14b)]=exports[a24_0x1d94b6(0x143)]=void 0x0;const jsonwebtoken_1=__importDefault(require(a24_0x1d94b6(0x132))),config_1=require(a24_0x1d94b6(0x157)),tokenBlacklistService_1=require(a24_0x1d94b6(0x135)),authenticateToken=(_0x20e6c7,_0x5408c1,_0x269dae)=>{const _0x2bf232=a24_0x1d94b6,_0x5f285f=_0x20e6c7[_0x2bf232(0x154)][_0x2bf232(0x139)],_0x144a1b=_0x5f285f&&_0x5f285f[_0x2bf232(0x14d)]('\x20')[0x1];if(!_0x144a1b)return _0x5408c1[_0x2bf232(0x149)](0x191)[_0x2bf232(0x13f)]({'success':![],'message':_0x2bf232(0x150)});if(tokenBlacklistService_1[_0x2bf232(0x13e)]['isTokenBlacklisted'](_0x144a1b))return _0x5408c1[_0x2bf232(0x149)](0x191)[_0x2bf232(0x13f)]({'success':![],'message':_0x2bf232(0x14f)});jsonwebtoken_1[_0x2bf232(0x147)][_0x2bf232(0x148)](_0x144a1b,config_1[_0x2bf232(0x151)][_0x2bf232(0x14c)][_0x2bf232(0x13b)],(_0x489406,_0xec94f1)=>{const _0xf1acc6=_0x2bf232;if(_0x489406)return _0x5408c1['status'](0x193)['json']({'success':![],'message':_0xf1acc6(0x14a)});_0x20e6c7[_0xf1acc6(0x129)]=_0xec94f1,_0x20e6c7[_0xf1acc6(0x146)]=_0x144a1b,_0x269dae();});};exports['authenticateToken']=authenticateToken;const requireAdmin=(_0x4269ff,_0x587cb3,_0x13fae1)=>{const _0x3c0a56=a24_0x1d94b6;if(!_0x4269ff[_0x3c0a56(0x129)]||_0x4269ff[_0x3c0a56(0x129)][_0x3c0a56(0x12d)]!==_0x3c0a56(0x141))return _0x587cb3[_0x3c0a56(0x149)](0x193)[_0x3c0a56(0x13f)]({'success':![],'message':_0x3c0a56(0x155)});_0x13fae1();};function a24_0x439c(_0x2d2a14,_0x5d369c){_0x2d2a14=_0x2d2a14-0x129;const _0x3203a8=a24_0x3203();let _0x439cbc=_0x3203a8[_0x2d2a14];return _0x439cbc;}exports[a24_0x1d94b6(0x14b)]=requireAdmin;const requireShop=(_0x3a5c45,_0x2b5a5d,_0x2acab5)=>{const _0x50ab4f=a24_0x1d94b6;if(!_0x3a5c45['user']||_0x3a5c45[_0x50ab4f(0x129)][_0x50ab4f(0x12d)]!==_0x50ab4f(0x138))return _0x2b5a5d[_0x50ab4f(0x149)](0x193)[_0x50ab4f(0x13f)]({'success':![],'message':_0x50ab4f(0x131)});_0x2acab5();};exports[a24_0x1d94b6(0x152)]=requireShop;const requireActiveShop=async(_0x14e50d,_0x3b9570,_0x131be4)=>{const _0x217d43=a24_0x1d94b6;if(!_0x14e50d[_0x217d43(0x129)]||_0x14e50d[_0x217d43(0x129)]['role']!==_0x217d43(0x138))return _0x3b9570[_0x217d43(0x149)](0x193)[_0x217d43(0x13f)]({'success':![],'message':_0x217d43(0x131)});try{const _0x213da2=require(_0x217d43(0x153))[_0x217d43(0x147)],_0x387bdf=await _0x213da2[_0x217d43(0x138)][_0x217d43(0x145)]({'where':{'id':_0x14e50d[_0x217d43(0x129)]['id']},'select':{'status':!![]}});if(!_0x387bdf||_0x387bdf['status']!==_0x217d43(0x133))return _0x3b9570[_0x217d43(0x149)](0x193)['json']({'success':![],'message':_0x217d43(0x12a),'suspended':_0x387bdf?.[_0x217d43(0x149)]==='SUSPENDED'});_0x131be4();}catch(_0x12e427){return console['error']('Error\x20checking\x20account\x20status:',_0x12e427),_0x3b9570[_0x217d43(0x149)](0x1f4)[_0x217d43(0x13f)]({'success':![],'message':_0x217d43(0x13d)});}};exports[a24_0x1d94b6(0x14e)]=requireActiveShop;