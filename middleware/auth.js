'use strict';const a16_0x228d85=a16_0x21f7;function a16_0x21f7(_0xe40bc1,_0xb258e2){const _0x2a34b4=a16_0x2a34();return a16_0x21f7=function(_0x21f7b8,_0x556717){_0x21f7b8=_0x21f7b8-0x1b1;let _0x3119c7=_0x2a34b4[_0x21f7b8];return _0x3119c7;},a16_0x21f7(_0xe40bc1,_0xb258e2);}function a16_0x2a34(){const _0x3e6203=['Account\x20is\x20suspended\x20or\x20inactive.\x20Contact\x20administrator\x20to\x20activate\x20your\x20account.','tokenBlacklistService','Error\x20checking\x20account\x20status','SUSPENDED','requireAdmin','defineProperty','role','3858006ZJYjBH','15074656tBqcgV','__importDefault','8UbDWIL','headers','authenticateToken','../services/tokenBlacklistService','__esModule','Access\x20token\x20required','verify','isTokenBlacklisted','json','admin','status','../config/config','Error\x20checking\x20account\x20status:','4044859NstPZe','requireActiveShop','error','351867soxFdG','default','user','shop','secret','1634735jHqgsK','config','115205iJDMZX','Token\x20has\x20been\x20revoked','691248bIKslX','Shop\x20access\x20required','Invalid\x20or\x20expired\x20token','jsonwebtoken','split','findUnique','../config/database'];a16_0x2a34=function(){return _0x3e6203;};return a16_0x2a34();}(function(_0x1200b8,_0x1b596a){const _0x9664f1=a16_0x21f7,_0x31c592=_0x1200b8();while(!![]){try{const _0x2120c0=-parseInt(_0x9664f1(0x1b5))/0x1+-parseInt(_0x9664f1(0x1b7))/0x2+parseInt(_0x9664f1(0x1d8))/0x3+-parseInt(_0x9664f1(0x1c8))/0x4*(-parseInt(_0x9664f1(0x1b3))/0x5)+-parseInt(_0x9664f1(0x1c5))/0x6+-parseInt(_0x9664f1(0x1d5))/0x7+parseInt(_0x9664f1(0x1c6))/0x8;if(_0x2120c0===_0x1b596a)break;else _0x31c592['push'](_0x31c592['shift']());}catch(_0x391f8e){_0x31c592['push'](_0x31c592['shift']());}}}(a16_0x2a34,0xedc18));var __importDefault=this&&this[a16_0x228d85(0x1c7)]||function(_0x234446){const _0x5358ae=a16_0x228d85;return _0x234446&&_0x234446[_0x5358ae(0x1cc)]?_0x234446:{'default':_0x234446};};Object[a16_0x228d85(0x1c3)](exports,a16_0x228d85(0x1cc),{'value':!![]}),exports['requireActiveShop']=exports['requireShop']=exports['requireAdmin']=exports[a16_0x228d85(0x1ca)]=void 0x0;const jsonwebtoken_1=__importDefault(require(a16_0x228d85(0x1ba))),config_1=require(a16_0x228d85(0x1d3)),tokenBlacklistService_1=require(a16_0x228d85(0x1cb)),authenticateToken=(_0x2b5e59,_0x36f8a8,_0x5c6477)=>{const _0x8f018e=a16_0x228d85,_0x241665=_0x2b5e59[_0x8f018e(0x1c9)]['authorization'],_0x581655=_0x241665&&_0x241665[_0x8f018e(0x1bb)]('\x20')[0x1];if(!_0x581655)return _0x36f8a8[_0x8f018e(0x1d2)](0x191)[_0x8f018e(0x1d0)]({'success':![],'message':_0x8f018e(0x1cd)});if(tokenBlacklistService_1[_0x8f018e(0x1bf)][_0x8f018e(0x1cf)](_0x581655))return _0x36f8a8['status'](0x191)[_0x8f018e(0x1d0)]({'success':![],'message':_0x8f018e(0x1b6)});jsonwebtoken_1['default'][_0x8f018e(0x1ce)](_0x581655,config_1[_0x8f018e(0x1b4)]['jwt'][_0x8f018e(0x1b2)],(_0x176ccb,_0x42cfaa)=>{const _0x538ef1=_0x8f018e;if(_0x176ccb)return _0x36f8a8[_0x538ef1(0x1d2)](0x193)[_0x538ef1(0x1d0)]({'success':![],'message':_0x538ef1(0x1b9)});_0x2b5e59[_0x538ef1(0x1da)]=_0x42cfaa,_0x2b5e59['token']=_0x581655,_0x5c6477();});};exports[a16_0x228d85(0x1ca)]=authenticateToken;const requireAdmin=(_0x3c88e6,_0x571f0d,_0xad4024)=>{const _0x3c737c=a16_0x228d85;if(!_0x3c88e6['user']||_0x3c88e6[_0x3c737c(0x1da)][_0x3c737c(0x1c4)]!==_0x3c737c(0x1d1))return _0x571f0d[_0x3c737c(0x1d2)](0x193)[_0x3c737c(0x1d0)]({'success':![],'message':'Admin\x20access\x20required'});_0xad4024();};exports[a16_0x228d85(0x1c2)]=requireAdmin;const requireShop=(_0x4ffe4c,_0x355c11,_0x400fda)=>{const _0x3545d6=a16_0x228d85;if(!_0x4ffe4c[_0x3545d6(0x1da)]||_0x4ffe4c[_0x3545d6(0x1da)][_0x3545d6(0x1c4)]!=='shop')return _0x355c11[_0x3545d6(0x1d2)](0x193)[_0x3545d6(0x1d0)]({'success':![],'message':_0x3545d6(0x1b8)});_0x400fda();};exports['requireShop']=requireShop;const requireActiveShop=async(_0x35b3ad,_0x3269cb,_0x3ddbb8)=>{const _0x1f59f4=a16_0x228d85;if(!_0x35b3ad[_0x1f59f4(0x1da)]||_0x35b3ad[_0x1f59f4(0x1da)]['role']!==_0x1f59f4(0x1b1))return _0x3269cb['status'](0x193)['json']({'success':![],'message':_0x1f59f4(0x1b8)});try{const _0x2ad0bc=require(_0x1f59f4(0x1bd))[_0x1f59f4(0x1d9)],_0x3fff44=await _0x2ad0bc[_0x1f59f4(0x1b1)][_0x1f59f4(0x1bc)]({'where':{'id':_0x35b3ad[_0x1f59f4(0x1da)]['id']},'select':{'status':!![]}});if(!_0x3fff44||_0x3fff44[_0x1f59f4(0x1d2)]!=='ACTIVE')return _0x3269cb[_0x1f59f4(0x1d2)](0x193)[_0x1f59f4(0x1d0)]({'success':![],'message':_0x1f59f4(0x1be),'suspended':_0x3fff44?.['status']===_0x1f59f4(0x1c1)});_0x3ddbb8();}catch(_0x4f863e){return console[_0x1f59f4(0x1d7)](_0x1f59f4(0x1d4),_0x4f863e),_0x3269cb['status'](0x1f4)[_0x1f59f4(0x1d0)]({'success':![],'message':_0x1f59f4(0x1c0)});}};exports[a16_0x228d85(0x1d6)]=requireActiveShop;