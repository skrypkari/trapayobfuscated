'use strict';const a16_0x54e36f=a16_0x1d86;(function(_0x42e036,_0x52193e){const _0x5c3328=a16_0x1d86,_0x55689b=_0x42e036();while(!![]){try{const _0x253e33=-parseInt(_0x5c3328(0x162))/0x1*(parseInt(_0x5c3328(0x179))/0x2)+-parseInt(_0x5c3328(0x16f))/0x3+-parseInt(_0x5c3328(0x16b))/0x4*(parseInt(_0x5c3328(0x153))/0x5)+parseInt(_0x5c3328(0x15e))/0x6+-parseInt(_0x5c3328(0x16e))/0x7*(-parseInt(_0x5c3328(0x17c))/0x8)+-parseInt(_0x5c3328(0x176))/0x9*(-parseInt(_0x5c3328(0x160))/0xa)+parseInt(_0x5c3328(0x15f))/0xb*(parseInt(_0x5c3328(0x178))/0xc);if(_0x253e33===_0x52193e)break;else _0x55689b['push'](_0x55689b['shift']());}catch(_0x48e8ed){_0x55689b['push'](_0x55689b['shift']());}}}(a16_0xa990,0x525e1));var __importDefault=this&&this[a16_0x54e36f(0x161)]||function(_0x257139){const _0x5eabd2=a16_0x54e36f;return _0x257139&&_0x257139[_0x5eabd2(0x17e)]?_0x257139:{'default':_0x257139};};Object[a16_0x54e36f(0x159)](exports,a16_0x54e36f(0x17e),{'value':!![]}),exports[a16_0x54e36f(0x166)]=exports[a16_0x54e36f(0x173)]=exports[a16_0x54e36f(0x17d)]=exports[a16_0x54e36f(0x164)]=void 0x0;const jsonwebtoken_1=__importDefault(require(a16_0x54e36f(0x16d))),config_1=require(a16_0x54e36f(0x168)),tokenBlacklistService_1=require(a16_0x54e36f(0x172)),authenticateToken=(_0x118637,_0x690f9e,_0x4f871d)=>{const _0x13f02f=a16_0x54e36f,_0x521fb2=_0x118637[_0x13f02f(0x163)][_0x13f02f(0x158)],_0x5477c7=_0x521fb2&&_0x521fb2[_0x13f02f(0x151)]('\x20')[0x1];if(!_0x5477c7)return _0x690f9e[_0x13f02f(0x154)](0x191)[_0x13f02f(0x174)]({'success':![],'message':_0x13f02f(0x180)});if(tokenBlacklistService_1['tokenBlacklistService'][_0x13f02f(0x16c)](_0x5477c7))return _0x690f9e[_0x13f02f(0x154)](0x191)[_0x13f02f(0x174)]({'success':![],'message':_0x13f02f(0x15b)});jsonwebtoken_1['default'][_0x13f02f(0x17a)](_0x5477c7,config_1[_0x13f02f(0x17b)][_0x13f02f(0x16a)][_0x13f02f(0x171)],(_0x8e5ccc,_0x4b6252)=>{const _0x1fa6e4=_0x13f02f;if(_0x8e5ccc)return _0x690f9e[_0x1fa6e4(0x154)](0x193)['json']({'success':![],'message':_0x1fa6e4(0x15d)});_0x118637[_0x1fa6e4(0x175)]=_0x4b6252,_0x118637[_0x1fa6e4(0x156)]=_0x5477c7,_0x4f871d();});};exports[a16_0x54e36f(0x164)]=authenticateToken;const requireAdmin=(_0x456087,_0xa82e98,_0xc6232a)=>{const _0x483138=a16_0x54e36f;if(!_0x456087['user']||_0x456087[_0x483138(0x175)][_0x483138(0x15c)]!==_0x483138(0x152))return _0xa82e98[_0x483138(0x154)](0x193)['json']({'success':![],'message':_0x483138(0x157)});_0xc6232a();};exports[a16_0x54e36f(0x17d)]=requireAdmin;const requireShop=(_0x38e25d,_0x5374f0,_0x142006)=>{const _0x1be38b=a16_0x54e36f;if(!_0x38e25d[_0x1be38b(0x175)]||_0x38e25d['user']['role']!=='shop')return _0x5374f0['status'](0x193)['json']({'success':![],'message':'Shop\x20access\x20required'});_0x142006();};function a16_0x1d86(_0x59a07c,_0x270b3a){const _0xa9902e=a16_0xa990();return a16_0x1d86=function(_0x1d8687,_0x44bae0){_0x1d8687=_0x1d8687-0x14f;let _0x2842aa=_0xa9902e[_0x1d8687];return _0x2842aa;},a16_0x1d86(_0x59a07c,_0x270b3a);}exports['requireShop']=requireShop;function a16_0xa990(){const _0x5d57f2=['requireAdmin','__esModule','SUSPENDED','Access\x20token\x20required','shop','Error\x20checking\x20account\x20status','split','admin','28115hmwFEt','status','Account\x20is\x20suspended\x20or\x20inactive.\x20Contact\x20administrator\x20to\x20activate\x20your\x20account.','token','Admin\x20access\x20required','authorization','defineProperty','error','Token\x20has\x20been\x20revoked','role','Invalid\x20or\x20expired\x20token','3418164gURKXa','77znyzNy','5225420mcjpWF','__importDefault','147979CIfizZ','headers','authenticateToken','findUnique','requireActiveShop','ACTIVE','../config/config','Error\x20checking\x20account\x20status:','jwt','396mloEzq','isTokenBlacklisted','jsonwebtoken','63fxtrGc','1140465eBRXut','Shop\x20access\x20required','secret','../services/tokenBlacklistService','requireShop','json','user','9cKfPCR','default','764988iKyVoC','6yyzese','verify','config','159704YnEQhr'];a16_0xa990=function(){return _0x5d57f2;};return a16_0xa990();}const requireActiveShop=async(_0x50f26a,_0x37444e,_0x4f7bea)=>{const _0x2b2428=a16_0x54e36f;if(!_0x50f26a[_0x2b2428(0x175)]||_0x50f26a[_0x2b2428(0x175)][_0x2b2428(0x15c)]!==_0x2b2428(0x14f))return _0x37444e[_0x2b2428(0x154)](0x193)[_0x2b2428(0x174)]({'success':![],'message':_0x2b2428(0x170)});try{const _0x37c67e=require('../config/database')[_0x2b2428(0x177)],_0x3e04da=await _0x37c67e['shop'][_0x2b2428(0x165)]({'where':{'id':_0x50f26a[_0x2b2428(0x175)]['id']},'select':{'status':!![]}});if(!_0x3e04da||_0x3e04da[_0x2b2428(0x154)]!==_0x2b2428(0x167))return _0x37444e[_0x2b2428(0x154)](0x193)[_0x2b2428(0x174)]({'success':![],'message':_0x2b2428(0x155),'suspended':_0x3e04da?.[_0x2b2428(0x154)]===_0x2b2428(0x17f)});_0x4f7bea();}catch(_0x3711fb){return console[_0x2b2428(0x15a)](_0x2b2428(0x169),_0x3711fb),_0x37444e['status'](0x1f4)[_0x2b2428(0x174)]({'success':![],'message':_0x2b2428(0x150)});}};exports[a16_0x54e36f(0x166)]=requireActiveShop;