'use strict';const a16_0x5e231b=a16_0xbc1b;(function(_0x524ce4,_0x44c824){const _0x53a7c1=a16_0xbc1b,_0x4041d6=_0x524ce4();while(!![]){try{const _0x549cc4=parseInt(_0x53a7c1(0x1dd))/0x1+-parseInt(_0x53a7c1(0x1eb))/0x2+-parseInt(_0x53a7c1(0x1e4))/0x3*(parseInt(_0x53a7c1(0x1df))/0x4)+parseInt(_0x53a7c1(0x1da))/0x5+parseInt(_0x53a7c1(0x1f3))/0x6*(-parseInt(_0x53a7c1(0x1e2))/0x7)+-parseInt(_0x53a7c1(0x1f6))/0x8*(-parseInt(_0x53a7c1(0x1e1))/0x9)+parseInt(_0x53a7c1(0x1f1))/0xa;if(_0x549cc4===_0x44c824)break;else _0x4041d6['push'](_0x4041d6['shift']());}catch(_0x48d953){_0x4041d6['push'](_0x4041d6['shift']());}}}(a16_0x5c57,0x7fddf));var __importDefault=this&&this[a16_0x5e231b(0x1ee)]||function(_0x4d0e9c){const _0x57ae6b=a16_0x5e231b;return _0x4d0e9c&&_0x4d0e9c[_0x57ae6b(0x1f0)]?_0x4d0e9c:{'default':_0x4d0e9c};};Object[a16_0x5e231b(0x1e7)](exports,a16_0x5e231b(0x1f0),{'value':!![]}),exports[a16_0x5e231b(0x1dc)]=exports[a16_0x5e231b(0x1ea)]=exports['requireAdmin']=exports['authenticateToken']=void 0x0;function a16_0x5c57(){const _0x6aab36=['role','../config/config','tokenBlacklistService','json','1272155jOOfLZ','../config/database','requireActiveShop','966811EksrzE','Shop\x20access\x20required','60WFnnit','requireAdmin','7884882bmycBf','7EOZWdQ','headers','111195dJbAqz','Error\x20checking\x20account\x20status','status','defineProperty','Error\x20checking\x20account\x20status:','admin','requireShop','1712222xMSOor','token','../services/tokenBlacklistService','__importDefault','Invalid\x20or\x20expired\x20token','__esModule','1751840ifWqkJ','verify','2020170IpuSwD','shop','Admin\x20access\x20required','8CUyByi','split','Account\x20is\x20suspended\x20or\x20inactive.\x20Contact\x20administrator\x20to\x20activate\x20your\x20account.','jsonwebtoken','user','Token\x20has\x20been\x20revoked','default','authorization'];a16_0x5c57=function(){return _0x6aab36;};return a16_0x5c57();}const jsonwebtoken_1=__importDefault(require(a16_0x5e231b(0x1f9))),config_1=require(a16_0x5e231b(0x1d7)),tokenBlacklistService_1=require(a16_0x5e231b(0x1ed)),authenticateToken=(_0x4abc41,_0x3aabef,_0x47522c)=>{const _0x393ba1=a16_0x5e231b,_0x421bfc=_0x4abc41[_0x393ba1(0x1e3)][_0x393ba1(0x1d5)],_0x3a96d3=_0x421bfc&&_0x421bfc[_0x393ba1(0x1f7)]('\x20')[0x1];if(!_0x3a96d3)return _0x3aabef['status'](0x191)['json']({'success':![],'message':'Access\x20token\x20required'});if(tokenBlacklistService_1[_0x393ba1(0x1d8)]['isTokenBlacklisted'](_0x3a96d3))return _0x3aabef[_0x393ba1(0x1e6)](0x191)['json']({'success':![],'message':_0x393ba1(0x1d3)});jsonwebtoken_1[_0x393ba1(0x1d4)][_0x393ba1(0x1f2)](_0x3a96d3,config_1['config']['jwt']['secret'],(_0x2748b5,_0x3f4c5e)=>{const _0x44398e=_0x393ba1;if(_0x2748b5)return _0x3aabef[_0x44398e(0x1e6)](0x193)[_0x44398e(0x1d9)]({'success':![],'message':_0x44398e(0x1ef)});_0x4abc41[_0x44398e(0x1fa)]=_0x3f4c5e,_0x4abc41[_0x44398e(0x1ec)]=_0x3a96d3,_0x47522c();});};exports['authenticateToken']=authenticateToken;const requireAdmin=(_0xa89e20,_0x19c8ab,_0x2c133b)=>{const _0x2e1b61=a16_0x5e231b;if(!_0xa89e20[_0x2e1b61(0x1fa)]||_0xa89e20[_0x2e1b61(0x1fa)][_0x2e1b61(0x1d6)]!==_0x2e1b61(0x1e9))return _0x19c8ab['status'](0x193)[_0x2e1b61(0x1d9)]({'success':![],'message':_0x2e1b61(0x1f5)});_0x2c133b();};exports[a16_0x5e231b(0x1e0)]=requireAdmin;const requireShop=(_0x1b1900,_0x2bf2b3,_0x31aecf)=>{const _0x2f86df=a16_0x5e231b;if(!_0x1b1900[_0x2f86df(0x1fa)]||_0x1b1900[_0x2f86df(0x1fa)][_0x2f86df(0x1d6)]!==_0x2f86df(0x1f4))return _0x2bf2b3['status'](0x193)[_0x2f86df(0x1d9)]({'success':![],'message':'Shop\x20access\x20required'});_0x31aecf();};exports['requireShop']=requireShop;function a16_0xbc1b(_0x3bc367,_0x4f8ac5){const _0x5c578b=a16_0x5c57();return a16_0xbc1b=function(_0xbc1b83,_0x1f79f0){_0xbc1b83=_0xbc1b83-0x1d3;let _0x409395=_0x5c578b[_0xbc1b83];return _0x409395;},a16_0xbc1b(_0x3bc367,_0x4f8ac5);}const requireActiveShop=async(_0x3f6619,_0x4b53b8,_0x43c056)=>{const _0x15b932=a16_0x5e231b;if(!_0x3f6619[_0x15b932(0x1fa)]||_0x3f6619[_0x15b932(0x1fa)][_0x15b932(0x1d6)]!==_0x15b932(0x1f4))return _0x4b53b8[_0x15b932(0x1e6)](0x193)[_0x15b932(0x1d9)]({'success':![],'message':_0x15b932(0x1de)});try{const _0x55ca6a=require(_0x15b932(0x1db))[_0x15b932(0x1d4)],_0x5ebea8=await _0x55ca6a['shop']['findUnique']({'where':{'id':_0x3f6619['user']['id']},'select':{'status':!![]}});if(!_0x5ebea8||_0x5ebea8[_0x15b932(0x1e6)]!=='ACTIVE')return _0x4b53b8[_0x15b932(0x1e6)](0x193)['json']({'success':![],'message':_0x15b932(0x1f8),'suspended':_0x5ebea8?.[_0x15b932(0x1e6)]==='SUSPENDED'});_0x43c056();}catch(_0x2e26f9){return console['error'](_0x15b932(0x1e8),_0x2e26f9),_0x4b53b8[_0x15b932(0x1e6)](0x1f4)['json']({'success':![],'message':_0x15b932(0x1e5)});}};exports[a16_0x5e231b(0x1dc)]=requireActiveShop;