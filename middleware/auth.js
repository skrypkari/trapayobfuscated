'use strict';const a16_0x5815ea=a16_0x5902;(function(_0x5e5bfd,_0x28ba49){const _0x3c0630=a16_0x5902,_0x24fad0=_0x5e5bfd();while(!![]){try{const _0x494716=-parseInt(_0x3c0630(0xff))/0x1*(-parseInt(_0x3c0630(0x109))/0x2)+-parseInt(_0x3c0630(0xf1))/0x3*(parseInt(_0x3c0630(0x105))/0x4)+-parseInt(_0x3c0630(0x10c))/0x5*(-parseInt(_0x3c0630(0xf2))/0x6)+-parseInt(_0x3c0630(0xeb))/0x7+-parseInt(_0x3c0630(0xf8))/0x8*(parseInt(_0x3c0630(0xee))/0x9)+parseInt(_0x3c0630(0x114))/0xa+-parseInt(_0x3c0630(0xf4))/0xb;if(_0x494716===_0x28ba49)break;else _0x24fad0['push'](_0x24fad0['shift']());}catch(_0x28d3a8){_0x24fad0['push'](_0x24fad0['shift']());}}}(a16_0x8c60,0x80a89));var __importDefault=this&&this['__importDefault']||function(_0x706a51){return _0x706a51&&_0x706a51['__esModule']?_0x706a51:{'default':_0x706a51};};Object['defineProperty'](exports,a16_0x5815ea(0xfa),{'value':!![]}),exports['requireActiveShop']=exports[a16_0x5815ea(0xfd)]=exports[a16_0x5815ea(0xf3)]=exports[a16_0x5815ea(0xec)]=void 0x0;const jsonwebtoken_1=__importDefault(require(a16_0x5815ea(0x10f))),config_1=require(a16_0x5815ea(0xf5)),tokenBlacklistService_1=require(a16_0x5815ea(0x10a)),authenticateToken=(_0x65a3e9,_0x514d57,_0x1b06fd)=>{const _0xa56bca=a16_0x5815ea,_0x46dbd2=_0x65a3e9[_0xa56bca(0x10e)][_0xa56bca(0x108)],_0x1369af=_0x46dbd2&&_0x46dbd2[_0xa56bca(0x103)]('\x20')[0x1];if(!_0x1369af)return _0x514d57[_0xa56bca(0xed)](0x191)[_0xa56bca(0xf0)]({'success':![],'message':'Access\x20token\x20required'});if(tokenBlacklistService_1['tokenBlacklistService'][_0xa56bca(0xfc)](_0x1369af))return _0x514d57[_0xa56bca(0xed)](0x191)[_0xa56bca(0xf0)]({'success':![],'message':_0xa56bca(0x102)});jsonwebtoken_1['default'][_0xa56bca(0x107)](_0x1369af,config_1[_0xa56bca(0x112)][_0xa56bca(0x100)][_0xa56bca(0xfb)],(_0xde581c,_0x322ff6)=>{const _0xa3479b=_0xa56bca;if(_0xde581c)return _0x514d57['status'](0x193)[_0xa3479b(0xf0)]({'success':![],'message':_0xa3479b(0xea)});_0x65a3e9[_0xa3479b(0x113)]=_0x322ff6,_0x65a3e9['token']=_0x1369af,_0x1b06fd();});};exports['authenticateToken']=authenticateToken;const requireAdmin=(_0x100cd3,_0x4b9da0,_0x1cf2cc)=>{const _0x2f8e75=a16_0x5815ea;if(!_0x100cd3[_0x2f8e75(0x113)]||_0x100cd3[_0x2f8e75(0x113)][_0x2f8e75(0x10b)]!==_0x2f8e75(0x111))return _0x4b9da0[_0x2f8e75(0xed)](0x193)[_0x2f8e75(0xf0)]({'success':![],'message':_0x2f8e75(0x10d)});_0x1cf2cc();};exports[a16_0x5815ea(0xf3)]=requireAdmin;function a16_0x5902(_0x3da71b,_0x194373){const _0x8c6037=a16_0x8c60();return a16_0x5902=function(_0x590252,_0x2b1175){_0x590252=_0x590252-0xe9;let _0x19e846=_0x8c6037[_0x590252];return _0x19e846;},a16_0x5902(_0x3da71b,_0x194373);}const requireShop=(_0x9a06b5,_0x3ef13e,_0x439e0f)=>{const _0x1f384d=a16_0x5815ea;if(!_0x9a06b5[_0x1f384d(0x113)]||_0x9a06b5['user']['role']!==_0x1f384d(0xe9))return _0x3ef13e[_0x1f384d(0xed)](0x193)[_0x1f384d(0xf0)]({'success':![],'message':'Shop\x20access\x20required'});_0x439e0f();};function a16_0x8c60(){const _0x22c108=['683946NJLJcw','6DpdSMK','requireAdmin','9158160nFDzhE','../config/config','Shop\x20access\x20required','default','75128bdmHSc','SUSPENDED','__esModule','secret','isTokenBlacklisted','requireShop','Error\x20checking\x20account\x20status:','81211gzXgby','jwt','Error\x20checking\x20account\x20status','Token\x20has\x20been\x20revoked','split','../config/database','8MAlakE','Account\x20is\x20suspended\x20or\x20inactive.\x20Contact\x20administrator\x20to\x20activate\x20your\x20account.','verify','authorization','22NWZnPT','../services/tokenBlacklistService','role','3009115VKQsMV','Admin\x20access\x20required','headers','jsonwebtoken','error','admin','config','user','10182910LpiDLl','shop','Invalid\x20or\x20expired\x20token','3636479eAmcta','authenticateToken','status','171jkjLgA','findUnique','json'];a16_0x8c60=function(){return _0x22c108;};return a16_0x8c60();}exports['requireShop']=requireShop;const requireActiveShop=async(_0x5695b2,_0x3feae4,_0x8d1cf1)=>{const _0x2ebc7a=a16_0x5815ea;if(!_0x5695b2[_0x2ebc7a(0x113)]||_0x5695b2[_0x2ebc7a(0x113)][_0x2ebc7a(0x10b)]!==_0x2ebc7a(0xe9))return _0x3feae4[_0x2ebc7a(0xed)](0x193)[_0x2ebc7a(0xf0)]({'success':![],'message':_0x2ebc7a(0xf6)});try{const _0x4cc083=require(_0x2ebc7a(0x104))[_0x2ebc7a(0xf7)],_0x977a55=await _0x4cc083[_0x2ebc7a(0xe9)][_0x2ebc7a(0xef)]({'where':{'id':_0x5695b2[_0x2ebc7a(0x113)]['id']},'select':{'status':!![]}});if(!_0x977a55||_0x977a55[_0x2ebc7a(0xed)]!=='ACTIVE')return _0x3feae4[_0x2ebc7a(0xed)](0x193)[_0x2ebc7a(0xf0)]({'success':![],'message':_0x2ebc7a(0x106),'suspended':_0x977a55?.['status']===_0x2ebc7a(0xf9)});_0x8d1cf1();}catch(_0xcabcd7){return console[_0x2ebc7a(0x110)](_0x2ebc7a(0xfe),_0xcabcd7),_0x3feae4[_0x2ebc7a(0xed)](0x1f4)['json']({'success':![],'message':_0x2ebc7a(0x101)});}};exports['requireActiveShop']=requireActiveShop;