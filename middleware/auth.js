'use strict';const a22_0x151abe=a22_0xd911;(function(_0x25a9d1,_0x3f9951){const _0x16b93d=a22_0xd911,_0x182475=_0x25a9d1();while(!![]){try{const _0x41b7b0=parseInt(_0x16b93d(0x181))/0x1+parseInt(_0x16b93d(0x16a))/0x2+parseInt(_0x16b93d(0x191))/0x3*(-parseInt(_0x16b93d(0x193))/0x4)+-parseInt(_0x16b93d(0x199))/0x5+parseInt(_0x16b93d(0x169))/0x6*(parseInt(_0x16b93d(0x17c))/0x7)+parseInt(_0x16b93d(0x18b))/0x8*(parseInt(_0x16b93d(0x17d))/0x9)+-parseInt(_0x16b93d(0x170))/0xa*(parseInt(_0x16b93d(0x178))/0xb);if(_0x41b7b0===_0x3f9951)break;else _0x182475['push'](_0x182475['shift']());}catch(_0x5a98cb){_0x182475['push'](_0x182475['shift']());}}}(a22_0x1c73,0x967ac));var __importDefault=this&&this[a22_0x151abe(0x18f)]||function(_0x13135e){const _0x43a35a=a22_0x151abe;return _0x13135e&&_0x13135e[_0x43a35a(0x195)]?_0x13135e:{'default':_0x13135e};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a22_0x151abe(0x176)]=exports[a22_0x151abe(0x196)]=exports[a22_0x151abe(0x183)]=exports[a22_0x151abe(0x174)]=void 0x0;function a22_0x1c73(){const _0x1c10ec=['requireAdmin','ACTIVE','role','Token\x20has\x20been\x20revoked','Access\x20token\x20required','SUSPENDED','verify','../services/tokenBlacklistService','3130088mzkSeV','tokenBlacklistService','shop','secret','__importDefault','jwt','975jKgpYJ','default','3684sXmhxt','jsonwebtoken','__esModule','requireShop','token','isTokenBlacklisted','5854390DrxthS','1147404arPyXv','1546302dMRcey','Shop\x20access\x20required','status','Invalid\x20or\x20expired\x20token','Error\x20checking\x20account\x20status','headers','1390oUbTFt','../config/database','user','authorization','authenticateToken','Admin\x20access\x20required','requireActiveShop','json','78661uzbhuk','error','admin','findUnique','21amhohD','18XyVkcD','Account\x20is\x20suspended\x20or\x20inactive.\x20Contact\x20administrator\x20to\x20activate\x20your\x20account.','split','../config/config','951181FhqstW','Error\x20checking\x20account\x20status:'];a22_0x1c73=function(){return _0x1c10ec;};return a22_0x1c73();}const jsonwebtoken_1=__importDefault(require(a22_0x151abe(0x194))),config_1=require(a22_0x151abe(0x180)),tokenBlacklistService_1=require(a22_0x151abe(0x18a)),authenticateToken=(_0x1d5598,_0x50f336,_0x553f7f)=>{const _0x189695=a22_0x151abe,_0x21d8c0=_0x1d5598[_0x189695(0x16f)][_0x189695(0x173)],_0x8d62ed=_0x21d8c0&&_0x21d8c0[_0x189695(0x17f)]('\x20')[0x1];if(!_0x8d62ed)return _0x50f336[_0x189695(0x16c)](0x191)[_0x189695(0x177)]({'success':![],'message':_0x189695(0x187)});if(tokenBlacklistService_1[_0x189695(0x18c)][_0x189695(0x198)](_0x8d62ed))return _0x50f336[_0x189695(0x16c)](0x191)[_0x189695(0x177)]({'success':![],'message':_0x189695(0x186)});jsonwebtoken_1[_0x189695(0x192)][_0x189695(0x189)](_0x8d62ed,config_1['config'][_0x189695(0x190)][_0x189695(0x18e)],(_0x27d751,_0x2f8591)=>{const _0x462159=_0x189695;if(_0x27d751)return _0x50f336[_0x462159(0x16c)](0x193)[_0x462159(0x177)]({'success':![],'message':_0x462159(0x16d)});_0x1d5598[_0x462159(0x172)]=_0x2f8591,_0x1d5598[_0x462159(0x197)]=_0x8d62ed,_0x553f7f();});};exports['authenticateToken']=authenticateToken;const requireAdmin=(_0x503c72,_0x412629,_0x589d25)=>{const _0x2d240b=a22_0x151abe;if(!_0x503c72[_0x2d240b(0x172)]||_0x503c72[_0x2d240b(0x172)][_0x2d240b(0x185)]!==_0x2d240b(0x17a))return _0x412629[_0x2d240b(0x16c)](0x193)[_0x2d240b(0x177)]({'success':![],'message':_0x2d240b(0x175)});_0x589d25();};exports['requireAdmin']=requireAdmin;const requireShop=(_0x595f9b,_0x1c32c1,_0x7ebcfc)=>{const _0x5c6d9f=a22_0x151abe;if(!_0x595f9b[_0x5c6d9f(0x172)]||_0x595f9b[_0x5c6d9f(0x172)][_0x5c6d9f(0x185)]!=='shop')return _0x1c32c1[_0x5c6d9f(0x16c)](0x193)[_0x5c6d9f(0x177)]({'success':![],'message':'Shop\x20access\x20required'});_0x7ebcfc();};exports[a22_0x151abe(0x196)]=requireShop;function a22_0xd911(_0x408998,_0x19dbe3){_0x408998=_0x408998-0x169;const _0x1c730a=a22_0x1c73();let _0xd911fe=_0x1c730a[_0x408998];return _0xd911fe;}const requireActiveShop=async(_0x132120,_0x22d977,_0x174791)=>{const _0x25d124=a22_0x151abe;if(!_0x132120[_0x25d124(0x172)]||_0x132120[_0x25d124(0x172)][_0x25d124(0x185)]!==_0x25d124(0x18d))return _0x22d977[_0x25d124(0x16c)](0x193)['json']({'success':![],'message':_0x25d124(0x16b)});try{const _0x197012=require(_0x25d124(0x171))[_0x25d124(0x192)],_0x506e0b=await _0x197012[_0x25d124(0x18d)][_0x25d124(0x17b)]({'where':{'id':_0x132120[_0x25d124(0x172)]['id']},'select':{'status':!![]}});if(!_0x506e0b||_0x506e0b[_0x25d124(0x16c)]!==_0x25d124(0x184))return _0x22d977[_0x25d124(0x16c)](0x193)['json']({'success':![],'message':_0x25d124(0x17e),'suspended':_0x506e0b?.[_0x25d124(0x16c)]===_0x25d124(0x188)});_0x174791();}catch(_0x607a07){return console[_0x25d124(0x179)](_0x25d124(0x182),_0x607a07),_0x22d977[_0x25d124(0x16c)](0x1f4)[_0x25d124(0x177)]({'success':![],'message':_0x25d124(0x16e)});}};exports[a22_0x151abe(0x176)]=requireActiveShop;