'use strict';const a16_0x1d5746=a16_0xdfee;(function(_0xbe6497,_0x57b4ce){const _0x50a87b=a16_0xdfee,_0x3c44bf=_0xbe6497();while(!![]){try{const _0x54afc0=-parseInt(_0x50a87b(0x1cf))/0x1*(parseInt(_0x50a87b(0x1cb))/0x2)+parseInt(_0x50a87b(0x1c8))/0x3*(-parseInt(_0x50a87b(0x1c5))/0x4)+parseInt(_0x50a87b(0x1ce))/0x5+parseInt(_0x50a87b(0x1d6))/0x6+parseInt(_0x50a87b(0x1cc))/0x7+-parseInt(_0x50a87b(0x1bf))/0x8+parseInt(_0x50a87b(0x1c2))/0x9;if(_0x54afc0===_0x57b4ce)break;else _0x3c44bf['push'](_0x3c44bf['shift']());}catch(_0x3249ac){_0x3c44bf['push'](_0x3c44bf['shift']());}}}(a16_0x5d01,0x8ff80));var __importDefault=this&&this['__importDefault']||function(_0xa11c30){const _0x533a23=a16_0xdfee;return _0xa11c30&&_0xa11c30[_0x533a23(0x1dd)]?_0xa11c30:{'default':_0xa11c30};};Object[a16_0x1d5746(0x1c9)](exports,a16_0x1d5746(0x1dd),{'value':!![]}),exports['requireActiveShop']=exports[a16_0x1d5746(0x1b6)]=exports['requireAdmin']=exports[a16_0x1d5746(0x1b9)]=void 0x0;function a16_0xdfee(_0x2e8a9e,_0x5dd969){const _0x5d0178=a16_0x5d01();return a16_0xdfee=function(_0xdfeebb,_0x3abe8f){_0xdfeebb=_0xdfeebb-0x1b6;let _0x4c046b=_0x5d0178[_0xdfeebb];return _0x4c046b;},a16_0xdfee(_0x2e8a9e,_0x5dd969);}const jsonwebtoken_1=__importDefault(require(a16_0x1d5746(0x1c0))),config_1=require(a16_0x1d5746(0x1d5)),tokenBlacklistService_1=require(a16_0x1d5746(0x1b8)),authenticateToken=(_0x838f11,_0x81fdc3,_0x1e125d)=>{const _0x452219=a16_0x1d5746,_0x2fa7cf=_0x838f11[_0x452219(0x1d1)][_0x452219(0x1d3)],_0x16dde5=_0x2fa7cf&&_0x2fa7cf[_0x452219(0x1c3)]('\x20')[0x1];if(!_0x16dde5)return _0x81fdc3[_0x452219(0x1d7)](0x191)[_0x452219(0x1df)]({'success':![],'message':_0x452219(0x1c7)});if(tokenBlacklistService_1[_0x452219(0x1c6)]['isTokenBlacklisted'](_0x16dde5))return _0x81fdc3['status'](0x191)[_0x452219(0x1df)]({'success':![],'message':'Token\x20has\x20been\x20revoked'});jsonwebtoken_1[_0x452219(0x1d0)][_0x452219(0x1b7)](_0x16dde5,config_1[_0x452219(0x1ca)][_0x452219(0x1d9)][_0x452219(0x1be)],(_0x23aa75,_0x340333)=>{const _0x9fd8ac=_0x452219;if(_0x23aa75)return _0x81fdc3['status'](0x193)[_0x9fd8ac(0x1df)]({'success':![],'message':'Invalid\x20or\x20expired\x20token'});_0x838f11['user']=_0x340333,_0x838f11[_0x9fd8ac(0x1de)]=_0x16dde5,_0x1e125d();});};exports[a16_0x1d5746(0x1b9)]=authenticateToken;const requireAdmin=(_0xf3f6bc,_0x508752,_0x3e3561)=>{const _0x4d091a=a16_0x1d5746;if(!_0xf3f6bc['user']||_0xf3f6bc[_0x4d091a(0x1bd)][_0x4d091a(0x1e0)]!=='admin')return _0x508752[_0x4d091a(0x1d7)](0x193)[_0x4d091a(0x1df)]({'success':![],'message':_0x4d091a(0x1d4)});_0x3e3561();};exports[a16_0x1d5746(0x1bb)]=requireAdmin;const requireShop=(_0x46e15b,_0x250a2f,_0x241467)=>{const _0x2b6d14=a16_0x1d5746;if(!_0x46e15b[_0x2b6d14(0x1bd)]||_0x46e15b['user'][_0x2b6d14(0x1e0)]!==_0x2b6d14(0x1bc))return _0x250a2f[_0x2b6d14(0x1d7)](0x193)[_0x2b6d14(0x1df)]({'success':![],'message':_0x2b6d14(0x1dc)});_0x241467();};exports[a16_0x1d5746(0x1b6)]=requireShop;function a16_0x5d01(){const _0x1409a6=['token','json','role','requireShop','verify','../services/tokenBlacklistService','authenticateToken','Account\x20is\x20suspended\x20or\x20inactive.\x20Contact\x20administrator\x20to\x20activate\x20your\x20account.','requireAdmin','shop','user','secret','2650944nNoGMt','jsonwebtoken','Error\x20checking\x20account\x20status','241407obJTCJ','split','ACTIVE','19588DjQrCT','tokenBlacklistService','Access\x20token\x20required','3WOAVJq','defineProperty','config','26830uwamaW','1119741AwXcUc','SUSPENDED','1372115NfiigQ','36eksXES','default','headers','../config/database','authorization','Admin\x20access\x20required','../config/config','5686152DagkPj','status','requireActiveShop','jwt','findUnique','error','Shop\x20access\x20required','__esModule'];a16_0x5d01=function(){return _0x1409a6;};return a16_0x5d01();}const requireActiveShop=async(_0x4667e3,_0xd60e3b,_0x3d0736)=>{const _0x4c038f=a16_0x1d5746;if(!_0x4667e3[_0x4c038f(0x1bd)]||_0x4667e3[_0x4c038f(0x1bd)]['role']!==_0x4c038f(0x1bc))return _0xd60e3b['status'](0x193)[_0x4c038f(0x1df)]({'success':![],'message':_0x4c038f(0x1dc)});try{const _0x2af6e0=require(_0x4c038f(0x1d2))[_0x4c038f(0x1d0)],_0x2092bf=await _0x2af6e0[_0x4c038f(0x1bc)][_0x4c038f(0x1da)]({'where':{'id':_0x4667e3[_0x4c038f(0x1bd)]['id']},'select':{'status':!![]}});if(!_0x2092bf||_0x2092bf[_0x4c038f(0x1d7)]!==_0x4c038f(0x1c4))return _0xd60e3b[_0x4c038f(0x1d7)](0x193)[_0x4c038f(0x1df)]({'success':![],'message':_0x4c038f(0x1ba),'suspended':_0x2092bf?.[_0x4c038f(0x1d7)]===_0x4c038f(0x1cd)});_0x3d0736();}catch(_0x112787){return console[_0x4c038f(0x1db)]('Error\x20checking\x20account\x20status:',_0x112787),_0xd60e3b[_0x4c038f(0x1d7)](0x1f4)[_0x4c038f(0x1df)]({'success':![],'message':_0x4c038f(0x1c1)});}};exports[a16_0x1d5746(0x1d8)]=requireActiveShop;