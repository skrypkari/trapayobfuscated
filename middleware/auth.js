'use strict';const a16_0x47403c=a16_0x2973;(function(_0x5d192b,_0x535732){const _0x5ed46a=a16_0x2973,_0x457d63=_0x5d192b();while(!![]){try{const _0x1f51ef=parseInt(_0x5ed46a(0x16d))/0x1+-parseInt(_0x5ed46a(0x15b))/0x2*(parseInt(_0x5ed46a(0x14f))/0x3)+-parseInt(_0x5ed46a(0x16c))/0x4*(-parseInt(_0x5ed46a(0x160))/0x5)+-parseInt(_0x5ed46a(0x173))/0x6+-parseInt(_0x5ed46a(0x164))/0x7*(parseInt(_0x5ed46a(0x16b))/0x8)+parseInt(_0x5ed46a(0x153))/0x9+parseInt(_0x5ed46a(0x15e))/0xa;if(_0x1f51ef===_0x535732)break;else _0x457d63['push'](_0x457d63['shift']());}catch(_0x4737a6){_0x457d63['push'](_0x457d63['shift']());}}}(a16_0x323e,0xeb616));var __importDefault=this&&this[a16_0x47403c(0x172)]||function(_0x42c569){return _0x42c569&&_0x42c569['__esModule']?_0x42c569:{'default':_0x42c569};};function a16_0x2973(_0x21c9bc,_0x11d341){const _0x323edf=a16_0x323e();return a16_0x2973=function(_0x2973a8,_0x2f66d6){_0x2973a8=_0x2973a8-0x14b;let _0xffe55a=_0x323edf[_0x2973a8];return _0xffe55a;},a16_0x2973(_0x21c9bc,_0x11d341);}Object[a16_0x47403c(0x166)](exports,a16_0x47403c(0x159),{'value':!![]}),exports[a16_0x47403c(0x16a)]=exports['requireShop']=exports[a16_0x47403c(0x174)]=exports[a16_0x47403c(0x15a)]=void 0x0;const jsonwebtoken_1=__importDefault(require('jsonwebtoken')),config_1=require(a16_0x47403c(0x162)),tokenBlacklistService_1=require(a16_0x47403c(0x15c)),authenticateToken=(_0x3f2499,_0x450e7a,_0x4c5450)=>{const _0x51d587=a16_0x47403c,_0x4db760=_0x3f2499[_0x51d587(0x165)]['authorization'],_0x5650cc=_0x4db760&&_0x4db760[_0x51d587(0x155)]('\x20')[0x1];if(!_0x5650cc)return _0x450e7a['status'](0x191)[_0x51d587(0x175)]({'success':![],'message':_0x51d587(0x150)});if(tokenBlacklistService_1[_0x51d587(0x171)][_0x51d587(0x167)](_0x5650cc))return _0x450e7a['status'](0x191)[_0x51d587(0x175)]({'success':![],'message':_0x51d587(0x170)});jsonwebtoken_1[_0x51d587(0x158)]['verify'](_0x5650cc,config_1['config'][_0x51d587(0x15f)]['secret'],(_0x15ff5,_0x45e80e)=>{const _0x51aed3=_0x51d587;if(_0x15ff5)return _0x450e7a['status'](0x193)[_0x51aed3(0x175)]({'success':![],'message':_0x51aed3(0x14c)});_0x3f2499[_0x51aed3(0x14d)]=_0x45e80e,_0x3f2499[_0x51aed3(0x152)]=_0x5650cc,_0x4c5450();});};exports[a16_0x47403c(0x15a)]=authenticateToken;const requireAdmin=(_0x840d08,_0x1ed81f,_0x12617a)=>{const _0x10fd40=a16_0x47403c;if(!_0x840d08[_0x10fd40(0x14d)]||_0x840d08[_0x10fd40(0x14d)][_0x10fd40(0x157)]!=='admin')return _0x1ed81f[_0x10fd40(0x169)](0x193)[_0x10fd40(0x175)]({'success':![],'message':_0x10fd40(0x14e)});_0x12617a();};exports[a16_0x47403c(0x174)]=requireAdmin;const requireShop=(_0x52d42c,_0x4a7fe4,_0x2d884b)=>{const _0x175390=a16_0x47403c;if(!_0x52d42c['user']||_0x52d42c[_0x175390(0x14d)][_0x175390(0x157)]!==_0x175390(0x16f))return _0x4a7fe4['status'](0x193)[_0x175390(0x175)]({'success':![],'message':_0x175390(0x163)});_0x2d884b();};function a16_0x323e(){const _0x490891=['40038820egzrFO','jwt','25690SsFlud','findUnique','../config/config','Shop\x20access\x20required','7gsoBpW','headers','defineProperty','isTokenBlacklisted','ACTIVE','status','requireActiveShop','11915224ugQkqC','776OZZLXS','210916iOUcdA','Account\x20is\x20suspended\x20or\x20inactive.\x20Contact\x20administrator\x20to\x20activate\x20your\x20account.','shop','Token\x20has\x20been\x20revoked','tokenBlacklistService','__importDefault','8286642wFJctg','requireAdmin','json','requireShop','Invalid\x20or\x20expired\x20token','user','Admin\x20access\x20required','150453QzXlLF','Access\x20token\x20required','SUSPENDED','token','3405087ZAAsGT','$disconnect','split','Error\x20checking\x20account\x20status','role','default','__esModule','authenticateToken','70Obsizl','../services/tokenBlacklistService','@prisma/client'];a16_0x323e=function(){return _0x490891;};return a16_0x323e();}exports[a16_0x47403c(0x14b)]=requireShop;const requireActiveShop=async(_0x4f57b1,_0x4c0949,_0x320f55)=>{const _0x3e1f64=a16_0x47403c;if(!_0x4f57b1[_0x3e1f64(0x14d)]||_0x4f57b1['user'][_0x3e1f64(0x157)]!==_0x3e1f64(0x16f))return _0x4c0949[_0x3e1f64(0x169)](0x193)['json']({'success':![],'message':'Shop\x20access\x20required'});try{const {PrismaClient:_0x500953}=require(_0x3e1f64(0x15d)),_0x3d0c3a=new _0x500953(),_0x2cdc20=await _0x3d0c3a[_0x3e1f64(0x16f)][_0x3e1f64(0x161)]({'where':{'id':_0x4f57b1[_0x3e1f64(0x14d)]['id']},'select':{'status':!![]}});if(!_0x2cdc20||_0x2cdc20[_0x3e1f64(0x169)]!==_0x3e1f64(0x168))return _0x4c0949[_0x3e1f64(0x169)](0x193)['json']({'success':![],'message':_0x3e1f64(0x16e),'suspended':_0x2cdc20?.['status']===_0x3e1f64(0x151)});await _0x3d0c3a[_0x3e1f64(0x154)](),_0x320f55();}catch(_0x497b18){return _0x4c0949['status'](0x1f4)[_0x3e1f64(0x175)]({'success':![],'message':_0x3e1f64(0x156)});}};exports[a16_0x47403c(0x16a)]=requireActiveShop;