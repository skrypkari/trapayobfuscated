'use strict';const a16_0x106d84=a16_0xe9d4;(function(_0x2e9900,_0x58da67){const _0x1c9bb2=a16_0xe9d4,_0x43711c=_0x2e9900();while(!![]){try{const _0x2a626a=-parseInt(_0x1c9bb2(0x183))/0x1+-parseInt(_0x1c9bb2(0x180))/0x2+-parseInt(_0x1c9bb2(0x19b))/0x3*(parseInt(_0x1c9bb2(0x19c))/0x4)+-parseInt(_0x1c9bb2(0x194))/0x5*(parseInt(_0x1c9bb2(0x18f))/0x6)+parseInt(_0x1c9bb2(0x1a1))/0x7+-parseInt(_0x1c9bb2(0x189))/0x8*(parseInt(_0x1c9bb2(0x192))/0x9)+parseInt(_0x1c9bb2(0x19a))/0xa*(parseInt(_0x1c9bb2(0x19e))/0xb);if(_0x2a626a===_0x58da67)break;else _0x43711c['push'](_0x43711c['shift']());}catch(_0x184ed7){_0x43711c['push'](_0x43711c['shift']());}}}(a16_0x1473,0x6b92c));var __importDefault=this&&this[a16_0x106d84(0x1a6)]||function(_0x3acfef){const _0x3f71aa=a16_0x106d84;return _0x3acfef&&_0x3acfef[_0x3f71aa(0x191)]?_0x3acfef:{'default':_0x3acfef};};Object[a16_0x106d84(0x1a3)](exports,a16_0x106d84(0x191),{'value':!![]}),exports[a16_0x106d84(0x1ac)]=exports[a16_0x106d84(0x193)]=exports['requireAdmin']=exports[a16_0x106d84(0x1a5)]=void 0x0;function a16_0x1473(){const _0x4b4ead=['Shop\x20access\x20required','config','221224VTSVBc','jwt','Admin\x20access\x20required','isTokenBlacklisted','../services/tokenBlacklistService','tokenBlacklistService','344538xyRIyr','jsonwebtoken','__esModule','162oGEkWX','requireShop','55eDyToi','status','requireAdmin','Error\x20checking\x20account\x20status','Account\x20is\x20suspended\x20or\x20inactive.\x20Contact\x20administrator\x20to\x20activate\x20your\x20account.','user','38980GPxLVn','3KKNmkn','2542836DwudLy','../config/database','6754TzioIC','json','authorization','5607399KVzXhn','token','defineProperty','secret','authenticateToken','__importDefault','ACTIVE','admin','SUSPENDED','Access\x20token\x20required','role','requireActiveShop','915948wybvvu','../config/config','shop','530719UlwUjn','headers','split','default'];a16_0x1473=function(){return _0x4b4ead;};return a16_0x1473();}const jsonwebtoken_1=__importDefault(require(a16_0x106d84(0x190))),config_1=require(a16_0x106d84(0x181)),tokenBlacklistService_1=require(a16_0x106d84(0x18d)),authenticateToken=(_0x2ef1bd,_0x537ead,_0x45a983)=>{const _0x106d7c=a16_0x106d84,_0x16265a=_0x2ef1bd[_0x106d7c(0x184)][_0x106d7c(0x1a0)],_0x5900cc=_0x16265a&&_0x16265a[_0x106d7c(0x185)]('\x20')[0x1];if(!_0x5900cc)return _0x537ead[_0x106d7c(0x195)](0x191)['json']({'success':![],'message':_0x106d7c(0x1aa)});if(tokenBlacklistService_1[_0x106d7c(0x18e)][_0x106d7c(0x18c)](_0x5900cc))return _0x537ead[_0x106d7c(0x195)](0x191)[_0x106d7c(0x19f)]({'success':![],'message':'Token\x20has\x20been\x20revoked'});jsonwebtoken_1[_0x106d7c(0x186)]['verify'](_0x5900cc,config_1[_0x106d7c(0x188)][_0x106d7c(0x18a)][_0x106d7c(0x1a4)],(_0x3cc45a,_0x24c75b)=>{const _0x28c13d=_0x106d7c;if(_0x3cc45a)return _0x537ead[_0x28c13d(0x195)](0x193)[_0x28c13d(0x19f)]({'success':![],'message':'Invalid\x20or\x20expired\x20token'});_0x2ef1bd['user']=_0x24c75b,_0x2ef1bd[_0x28c13d(0x1a2)]=_0x5900cc,_0x45a983();});};exports[a16_0x106d84(0x1a5)]=authenticateToken;const requireAdmin=(_0x4d06ba,_0x1a8f49,_0x1bd9b4)=>{const _0x30084d=a16_0x106d84;if(!_0x4d06ba[_0x30084d(0x199)]||_0x4d06ba[_0x30084d(0x199)][_0x30084d(0x1ab)]!==_0x30084d(0x1a8))return _0x1a8f49['status'](0x193)['json']({'success':![],'message':_0x30084d(0x18b)});_0x1bd9b4();};exports[a16_0x106d84(0x196)]=requireAdmin;const requireShop=(_0x552532,_0x44bf7e,_0x5b5eb2)=>{const _0x1dc9ff=a16_0x106d84;if(!_0x552532[_0x1dc9ff(0x199)]||_0x552532[_0x1dc9ff(0x199)]['role']!==_0x1dc9ff(0x182))return _0x44bf7e['status'](0x193)['json']({'success':![],'message':_0x1dc9ff(0x187)});_0x5b5eb2();};exports[a16_0x106d84(0x193)]=requireShop;function a16_0xe9d4(_0x555b5c,_0x18fcdb){const _0x147319=a16_0x1473();return a16_0xe9d4=function(_0xe9d4c5,_0x4f011f){_0xe9d4c5=_0xe9d4c5-0x180;let _0x34599e=_0x147319[_0xe9d4c5];return _0x34599e;},a16_0xe9d4(_0x555b5c,_0x18fcdb);}const requireActiveShop=async(_0x3b11be,_0x2c32d1,_0x5c6472)=>{const _0x5e961f=a16_0x106d84;if(!_0x3b11be[_0x5e961f(0x199)]||_0x3b11be[_0x5e961f(0x199)][_0x5e961f(0x1ab)]!==_0x5e961f(0x182))return _0x2c32d1[_0x5e961f(0x195)](0x193)[_0x5e961f(0x19f)]({'success':![],'message':'Shop\x20access\x20required'});try{const _0x56dff5=require(_0x5e961f(0x19d))[_0x5e961f(0x186)],_0x5de8bc=await _0x56dff5['shop']['findUnique']({'where':{'id':_0x3b11be[_0x5e961f(0x199)]['id']},'select':{'status':!![]}});if(!_0x5de8bc||_0x5de8bc[_0x5e961f(0x195)]!==_0x5e961f(0x1a7))return _0x2c32d1['status'](0x193)['json']({'success':![],'message':_0x5e961f(0x198),'suspended':_0x5de8bc?.['status']===_0x5e961f(0x1a9)});_0x5c6472();}catch(_0x35b361){return console['error']('Error\x20checking\x20account\x20status:',_0x35b361),_0x2c32d1['status'](0x1f4)['json']({'success':![],'message':_0x5e961f(0x197)});}};exports[a16_0x106d84(0x1ac)]=requireActiveShop;