'use strict';const a16_0x4eaba6=a16_0x54fa;(function(_0x478a43,_0x227533){const _0x51fcad=a16_0x54fa,_0x2d36b5=_0x478a43();while(!![]){try{const _0x59c453=-parseInt(_0x51fcad(0xd2))/0x1+parseInt(_0x51fcad(0xc0))/0x2+parseInt(_0x51fcad(0xd8))/0x3+parseInt(_0x51fcad(0xc1))/0x4*(parseInt(_0x51fcad(0xd5))/0x5)+parseInt(_0x51fcad(0xc8))/0x6+-parseInt(_0x51fcad(0xcd))/0x7+-parseInt(_0x51fcad(0xca))/0x8*(-parseInt(_0x51fcad(0xcf))/0x9);if(_0x59c453===_0x227533)break;else _0x2d36b5['push'](_0x2d36b5['shift']());}catch(_0x282366){_0x2d36b5['push'](_0x2d36b5['shift']());}}}(a16_0xb5a1,0xf03dd));var __importDefault=this&&this[a16_0x4eaba6(0xb1)]||function(_0x42085c){return _0x42085c&&_0x42085c['__esModule']?_0x42085c:{'default':_0x42085c};};Object[a16_0x4eaba6(0xcb)](exports,a16_0x4eaba6(0xb3),{'value':!![]}),exports[a16_0x4eaba6(0xc9)]=exports['requireShop']=exports[a16_0x4eaba6(0xd7)]=exports[a16_0x4eaba6(0xd4)]=void 0x0;function a16_0xb5a1(){const _0x41ddf4=['isTokenBlacklisted','split','../services/tokenBlacklistService','status','authorization','findUnique','Access\x20token\x20required','shop','error','jsonwebtoken','verify','Invalid\x20or\x20expired\x20token','1362998mucNNF','4751892WSverW','role','requireShop','Token\x20has\x20been\x20revoked','json','Error\x20checking\x20account\x20status:','tokenBlacklistService','5070270IGWHiN','requireActiveShop','8ADrieC','defineProperty','../config/config','13527682QfHsXv','secret','11409687RKvFUR','headers','Admin\x20access\x20required','1196059ohgkkA','Shop\x20access\x20required','authenticateToken','5VFtTQC','Account\x20is\x20suspended\x20or\x20inactive.\x20Contact\x20administrator\x20to\x20activate\x20your\x20account.','requireAdmin','391062uIrBJd','default','token','user','config','__importDefault','admin','__esModule'];a16_0xb5a1=function(){return _0x41ddf4;};return a16_0xb5a1();}const jsonwebtoken_1=__importDefault(require(a16_0x4eaba6(0xbd))),config_1=require(a16_0x4eaba6(0xcc)),tokenBlacklistService_1=require(a16_0x4eaba6(0xb6)),authenticateToken=(_0x1f82d8,_0x265e6e,_0x23c41a)=>{const _0x32030e=a16_0x4eaba6,_0x4c4d74=_0x1f82d8[_0x32030e(0xd0)][_0x32030e(0xb8)],_0x19420d=_0x4c4d74&&_0x4c4d74[_0x32030e(0xb5)]('\x20')[0x1];if(!_0x19420d)return _0x265e6e[_0x32030e(0xb7)](0x191)[_0x32030e(0xc5)]({'success':![],'message':_0x32030e(0xba)});if(tokenBlacklistService_1[_0x32030e(0xc7)][_0x32030e(0xb4)](_0x19420d))return _0x265e6e[_0x32030e(0xb7)](0x191)[_0x32030e(0xc5)]({'success':![],'message':_0x32030e(0xc4)});jsonwebtoken_1[_0x32030e(0xd9)][_0x32030e(0xbe)](_0x19420d,config_1[_0x32030e(0xdc)]['jwt'][_0x32030e(0xce)],(_0x1e9e64,_0x501934)=>{const _0x28a9d2=_0x32030e;if(_0x1e9e64)return _0x265e6e[_0x28a9d2(0xb7)](0x193)['json']({'success':![],'message':_0x28a9d2(0xbf)});_0x1f82d8[_0x28a9d2(0xdb)]=_0x501934,_0x1f82d8[_0x28a9d2(0xda)]=_0x19420d,_0x23c41a();});};exports[a16_0x4eaba6(0xd4)]=authenticateToken;const requireAdmin=(_0x1786c0,_0x2048d7,_0x3de33a)=>{const _0x150e62=a16_0x4eaba6;if(!_0x1786c0['user']||_0x1786c0[_0x150e62(0xdb)][_0x150e62(0xc2)]!==_0x150e62(0xb2))return _0x2048d7['status'](0x193)[_0x150e62(0xc5)]({'success':![],'message':_0x150e62(0xd1)});_0x3de33a();};exports['requireAdmin']=requireAdmin;const requireShop=(_0x38db6f,_0x2efcc6,_0x47b429)=>{const _0x4a3bc0=a16_0x4eaba6;if(!_0x38db6f[_0x4a3bc0(0xdb)]||_0x38db6f[_0x4a3bc0(0xdb)][_0x4a3bc0(0xc2)]!=='shop')return _0x2efcc6[_0x4a3bc0(0xb7)](0x193)[_0x4a3bc0(0xc5)]({'success':![],'message':_0x4a3bc0(0xd3)});_0x47b429();};exports[a16_0x4eaba6(0xc3)]=requireShop;const requireActiveShop=async(_0x516e09,_0x5bde1a,_0x5347ab)=>{const _0x5e3d1b=a16_0x4eaba6;if(!_0x516e09[_0x5e3d1b(0xdb)]||_0x516e09['user'][_0x5e3d1b(0xc2)]!==_0x5e3d1b(0xbb))return _0x5bde1a['status'](0x193)['json']({'success':![],'message':_0x5e3d1b(0xd3)});try{const _0x17751b=require('../config/database')[_0x5e3d1b(0xd9)],_0x154676=await _0x17751b[_0x5e3d1b(0xbb)][_0x5e3d1b(0xb9)]({'where':{'id':_0x516e09['user']['id']},'select':{'status':!![]}});if(!_0x154676||_0x154676[_0x5e3d1b(0xb7)]!=='ACTIVE')return _0x5bde1a[_0x5e3d1b(0xb7)](0x193)[_0x5e3d1b(0xc5)]({'success':![],'message':_0x5e3d1b(0xd6),'suspended':_0x154676?.[_0x5e3d1b(0xb7)]==='SUSPENDED'});_0x5347ab();}catch(_0x511954){return console[_0x5e3d1b(0xbc)](_0x5e3d1b(0xc6),_0x511954),_0x5bde1a[_0x5e3d1b(0xb7)](0x1f4)[_0x5e3d1b(0xc5)]({'success':![],'message':'Error\x20checking\x20account\x20status'});}};function a16_0x54fa(_0x3839c3,_0x3c6de1){const _0xb5a161=a16_0xb5a1();return a16_0x54fa=function(_0x54faca,_0x383b0b){_0x54faca=_0x54faca-0xb1;let _0x1f39f6=_0xb5a161[_0x54faca];return _0x1f39f6;},a16_0x54fa(_0x3839c3,_0x3c6de1);}exports[a16_0x4eaba6(0xc9)]=requireActiveShop;