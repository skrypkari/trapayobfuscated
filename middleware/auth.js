'use strict';const a24_0x1739d8=a24_0x44d1;(function(_0x579a85,_0x794338){const _0x237c43=a24_0x44d1,_0x3b2d05=_0x579a85();while(!![]){try{const _0x2edc8e=-parseInt(_0x237c43(0x1c7))/0x1+-parseInt(_0x237c43(0x1c6))/0x2*(parseInt(_0x237c43(0x1cb))/0x3)+parseInt(_0x237c43(0x1d0))/0x4*(parseInt(_0x237c43(0x1bd))/0x5)+-parseInt(_0x237c43(0x1b4))/0x6+parseInt(_0x237c43(0x1ba))/0x7*(-parseInt(_0x237c43(0x1ac))/0x8)+parseInt(_0x237c43(0x1b3))/0x9*(-parseInt(_0x237c43(0x1b7))/0xa)+parseInt(_0x237c43(0x1bb))/0xb;if(_0x2edc8e===_0x794338)break;else _0x3b2d05['push'](_0x3b2d05['shift']());}catch(_0x38a1e2){_0x3b2d05['push'](_0x3b2d05['shift']());}}}(a24_0x1f59,0x7d939));var __importDefault=this&&this[a24_0x1739d8(0x1b5)]||function(_0x561eae){const _0x318183=a24_0x1739d8;return _0x561eae&&_0x561eae[_0x318183(0x1ca)]?_0x561eae:{'default':_0x561eae};};Object[a24_0x1739d8(0x1c3)](exports,a24_0x1739d8(0x1ca),{'value':!![]}),exports[a24_0x1739d8(0x1b9)]=exports[a24_0x1739d8(0x1b0)]=exports['requireAdmin']=exports[a24_0x1739d8(0x1aa)]=void 0x0;const jsonwebtoken_1=__importDefault(require('jsonwebtoken')),config_1=require(a24_0x1739d8(0x1cf)),tokenBlacklistService_1=require(a24_0x1739d8(0x1a9)),authenticateToken=(_0x32f2cf,_0x1eef64,_0xb24cea)=>{const _0x849a8d=a24_0x1739d8,_0x32ffd9=_0x32f2cf[_0x849a8d(0x1c1)]['authorization'],_0x106f4d=_0x32ffd9&&_0x32ffd9['split']('\x20')[0x1];if(!_0x106f4d)return _0x1eef64['status'](0x191)[_0x849a8d(0x1c4)]({'success':![],'message':_0x849a8d(0x1a8)});if(tokenBlacklistService_1[_0x849a8d(0x1b2)][_0x849a8d(0x1ad)](_0x106f4d))return _0x1eef64['status'](0x191)[_0x849a8d(0x1c4)]({'success':![],'message':_0x849a8d(0x1af)});jsonwebtoken_1[_0x849a8d(0x1c0)][_0x849a8d(0x1d1)](_0x106f4d,config_1[_0x849a8d(0x1b8)][_0x849a8d(0x1cd)]['secret'],(_0x19c57d,_0x3e1db6)=>{const _0x54a849=_0x849a8d;if(_0x19c57d)return _0x1eef64[_0x54a849(0x1bc)](0x193)['json']({'success':![],'message':_0x54a849(0x1c5)});_0x32f2cf['user']=_0x3e1db6,_0x32f2cf['token']=_0x106f4d,_0xb24cea();});};exports[a24_0x1739d8(0x1aa)]=authenticateToken;const requireAdmin=(_0x4163f3,_0xf8075a,_0x509b19)=>{const _0xbb851a=a24_0x1739d8;if(!_0x4163f3[_0xbb851a(0x1cc)]||_0x4163f3[_0xbb851a(0x1cc)][_0xbb851a(0x1d3)]!==_0xbb851a(0x1ab))return _0xf8075a[_0xbb851a(0x1bc)](0x193)[_0xbb851a(0x1c4)]({'success':![],'message':_0xbb851a(0x1d2)});_0x509b19();};exports[a24_0x1739d8(0x1be)]=requireAdmin;function a24_0x1f59(){const _0x1d2762=['requireShop','Account\x20is\x20suspended\x20or\x20inactive.\x20Contact\x20administrator\x20to\x20activate\x20your\x20account.','tokenBlacklistService','72ACyDpO','3555888GoRopd','__importDefault','Error\x20checking\x20account\x20status','889220lsJsuI','config','requireActiveShop','35UkYgga','28424220FfzhgY','status','1669075agRwHt','requireAdmin','ACTIVE','default','headers','Shop\x20access\x20required','defineProperty','json','Invalid\x20or\x20expired\x20token','22322mUlMpk','608577wTSXMb','../config/database','Error\x20checking\x20account\x20status:','__esModule','69ZNPFgx','user','jwt','shop','../config/config','4DfnsID','verify','Admin\x20access\x20required','role','Access\x20token\x20required','../services/tokenBlacklistService','authenticateToken','admin','374672EbtvFr','isTokenBlacklisted','error','Token\x20has\x20been\x20revoked'];a24_0x1f59=function(){return _0x1d2762;};return a24_0x1f59();}const requireShop=(_0x3475b8,_0x1c7af1,_0x3a3288)=>{const _0x32686a=a24_0x1739d8;if(!_0x3475b8[_0x32686a(0x1cc)]||_0x3475b8['user'][_0x32686a(0x1d3)]!==_0x32686a(0x1ce))return _0x1c7af1[_0x32686a(0x1bc)](0x193)[_0x32686a(0x1c4)]({'success':![],'message':_0x32686a(0x1c2)});_0x3a3288();};exports[a24_0x1739d8(0x1b0)]=requireShop;function a24_0x44d1(_0x527a3f,_0x2a73d9){_0x527a3f=_0x527a3f-0x1a8;const _0x1f59cd=a24_0x1f59();let _0x44d144=_0x1f59cd[_0x527a3f];return _0x44d144;}const requireActiveShop=async(_0x5e3b24,_0xcc0f43,_0x31b45b)=>{const _0x182340=a24_0x1739d8;if(!_0x5e3b24['user']||_0x5e3b24[_0x182340(0x1cc)][_0x182340(0x1d3)]!=='shop')return _0xcc0f43[_0x182340(0x1bc)](0x193)[_0x182340(0x1c4)]({'success':![],'message':_0x182340(0x1c2)});try{const _0x6ea54d=require(_0x182340(0x1c8))[_0x182340(0x1c0)],_0x3c2671=await _0x6ea54d[_0x182340(0x1ce)]['findUnique']({'where':{'id':_0x5e3b24[_0x182340(0x1cc)]['id']},'select':{'status':!![]}});if(!_0x3c2671||_0x3c2671[_0x182340(0x1bc)]!==_0x182340(0x1bf))return _0xcc0f43[_0x182340(0x1bc)](0x193)['json']({'success':![],'message':_0x182340(0x1b1),'suspended':_0x3c2671?.[_0x182340(0x1bc)]==='SUSPENDED'});_0x31b45b();}catch(_0x2bfd55){return console[_0x182340(0x1ae)](_0x182340(0x1c9),_0x2bfd55),_0xcc0f43['status'](0x1f4)['json']({'success':![],'message':_0x182340(0x1b6)});}};exports[a24_0x1739d8(0x1b9)]=requireActiveShop;