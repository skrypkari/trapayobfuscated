'use strict';const a22_0x2bae04=a22_0x2415;(function(_0x50dd9b,_0x166aa8){const _0x2db114=a22_0x2415,_0x5975ed=_0x50dd9b();while(!![]){try{const _0x590153=parseInt(_0x2db114(0xc4))/0x1+-parseInt(_0x2db114(0xa7))/0x2*(parseInt(_0x2db114(0xb1))/0x3)+-parseInt(_0x2db114(0xca))/0x4*(-parseInt(_0x2db114(0xb7))/0x5)+parseInt(_0x2db114(0xbd))/0x6+parseInt(_0x2db114(0xb0))/0x7+parseInt(_0x2db114(0xc3))/0x8+-parseInt(_0x2db114(0xab))/0x9*(parseInt(_0x2db114(0xcb))/0xa);if(_0x590153===_0x166aa8)break;else _0x5975ed['push'](_0x5975ed['shift']());}catch(_0xfb33b3){_0x5975ed['push'](_0x5975ed['shift']());}}}(a22_0x33cb,0x5f231));var __importDefault=this&&this[a22_0x2bae04(0xc7)]||function(_0x7b741){return _0x7b741&&_0x7b741['__esModule']?_0x7b741:{'default':_0x7b741};};Object[a22_0x2bae04(0xa3)](exports,'__esModule',{'value':!![]}),exports[a22_0x2bae04(0xba)]=exports['requireShop']=exports[a22_0x2bae04(0xc8)]=exports['authenticateToken']=void 0x0;const jsonwebtoken_1=__importDefault(require(a22_0x2bae04(0xc5))),config_1=require(a22_0x2bae04(0xa1)),tokenBlacklistService_1=require(a22_0x2bae04(0xaf)),authenticateToken=(_0x558db7,_0x14441b,_0x3f1ba0)=>{const _0x652b22=a22_0x2bae04,_0x42c089=_0x558db7['headers']['authorization'],_0x3270f5=_0x42c089&&_0x42c089[_0x652b22(0xb8)]('\x20')[0x1];if(!_0x3270f5)return _0x14441b['status'](0x191)[_0x652b22(0xb4)]({'success':![],'message':_0x652b22(0xaa)});if(tokenBlacklistService_1[_0x652b22(0xae)]['isTokenBlacklisted'](_0x3270f5))return _0x14441b[_0x652b22(0xac)](0x191)[_0x652b22(0xb4)]({'success':![],'message':_0x652b22(0xbe)});jsonwebtoken_1['default'][_0x652b22(0xc1)](_0x3270f5,config_1[_0x652b22(0xa2)]['jwt'][_0x652b22(0xb6)],(_0x3ab644,_0x1dfc3a)=>{const _0x45ab39=_0x652b22;if(_0x3ab644)return _0x14441b[_0x45ab39(0xac)](0x193)['json']({'success':![],'message':_0x45ab39(0xbf)});_0x558db7[_0x45ab39(0xa8)]=_0x1dfc3a,_0x558db7[_0x45ab39(0xb3)]=_0x3270f5,_0x3f1ba0();});};exports[a22_0x2bae04(0xc9)]=authenticateToken;const requireAdmin=(_0x19d45e,_0x12ae29,_0x4aac2b)=>{const _0x31700c=a22_0x2bae04;if(!_0x19d45e[_0x31700c(0xa8)]||_0x19d45e['user'][_0x31700c(0xa6)]!==_0x31700c(0xa4))return _0x12ae29[_0x31700c(0xac)](0x193)[_0x31700c(0xb4)]({'success':![],'message':_0x31700c(0xc2)});_0x4aac2b();};exports[a22_0x2bae04(0xc8)]=requireAdmin;const requireShop=(_0x23fffd,_0x1fa247,_0x43f320)=>{const _0xff18e6=a22_0x2bae04;if(!_0x23fffd['user']||_0x23fffd[_0xff18e6(0xa8)][_0xff18e6(0xa6)]!==_0xff18e6(0xb5))return _0x1fa247['status'](0x193)[_0xff18e6(0xb4)]({'success':![],'message':_0xff18e6(0xa5)});_0x43f320();};exports[a22_0x2bae04(0xad)]=requireShop;function a22_0x33cb(){const _0x16eb05=['config','defineProperty','admin','Shop\x20access\x20required','role','2cpgrOL','user','default','Access\x20token\x20required','998703ZfQjLS','status','requireShop','tokenBlacklistService','../services/tokenBlacklistService','2631888VlZiIt','475695SqiWDh','error','token','json','shop','secret','1985HwWnTS','split','../config/database','requireActiveShop','Error\x20checking\x20account\x20status:','ACTIVE','2291928xCDbBa','Token\x20has\x20been\x20revoked','Invalid\x20or\x20expired\x20token','Error\x20checking\x20account\x20status','verify','Admin\x20access\x20required','5945920dDClnr','714340GzckIW','jsonwebtoken','Account\x20is\x20suspended\x20or\x20inactive.\x20Contact\x20administrator\x20to\x20activate\x20your\x20account.','__importDefault','requireAdmin','authenticateToken','4444OaQlXM','190xyQiwm','../config/config'];a22_0x33cb=function(){return _0x16eb05;};return a22_0x33cb();}const requireActiveShop=async(_0x2d9720,_0x505162,_0x19022a)=>{const _0x31206b=a22_0x2bae04;if(!_0x2d9720[_0x31206b(0xa8)]||_0x2d9720[_0x31206b(0xa8)][_0x31206b(0xa6)]!==_0x31206b(0xb5))return _0x505162['status'](0x193)[_0x31206b(0xb4)]({'success':![],'message':_0x31206b(0xa5)});try{const _0x5c0498=require(_0x31206b(0xb9))[_0x31206b(0xa9)],_0x295029=await _0x5c0498[_0x31206b(0xb5)]['findUnique']({'where':{'id':_0x2d9720[_0x31206b(0xa8)]['id']},'select':{'status':!![]}});if(!_0x295029||_0x295029[_0x31206b(0xac)]!==_0x31206b(0xbc))return _0x505162['status'](0x193)[_0x31206b(0xb4)]({'success':![],'message':_0x31206b(0xc6),'suspended':_0x295029?.[_0x31206b(0xac)]==='SUSPENDED'});_0x19022a();}catch(_0x3c2958){return console[_0x31206b(0xb2)](_0x31206b(0xbb),_0x3c2958),_0x505162[_0x31206b(0xac)](0x1f4)['json']({'success':![],'message':_0x31206b(0xc0)});}};function a22_0x2415(_0x2a1e92,_0xd1dd6d){_0x2a1e92=_0x2a1e92-0xa1;const _0x33cb60=a22_0x33cb();let _0x24156c=_0x33cb60[_0x2a1e92];return _0x24156c;}exports[a22_0x2bae04(0xba)]=requireActiveShop;