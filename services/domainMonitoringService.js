'use strict';const a39_0xfb9c3d=a39_0xdc4f;(function(_0x24dcb4,_0x2a6d26){const _0x58843b=a39_0xdc4f,_0x464c60=_0x24dcb4();while(!![]){try{const _0x37c330=parseInt(_0x58843b(0x116))/0x1+parseInt(_0x58843b(0x14b))/0x2+parseInt(_0x58843b(0x151))/0x3+parseInt(_0x58843b(0x12c))/0x4*(-parseInt(_0x58843b(0x150))/0x5)+parseInt(_0x58843b(0x109))/0x6+parseInt(_0x58843b(0xfc))/0x7+parseInt(_0x58843b(0x129))/0x8*(-parseInt(_0x58843b(0x10b))/0x9);if(_0x37c330===_0x2a6d26)break;else _0x464c60['push'](_0x464c60['shift']());}catch(_0x45ad97){_0x464c60['push'](_0x464c60['shift']());}}}(a39_0x2ecf,0xc5109));var __importDefault=this&&this['__importDefault']||function(_0x28c22d){const _0x379792=a39_0xdc4f;return _0x28c22d&&_0x28c22d[_0x379792(0x111)]?_0x28c22d:{'default':_0x28c22d};};Object[a39_0xfb9c3d(0x136)](exports,'__esModule',{'value':!![]}),exports[a39_0xfb9c3d(0x13c)]=exports[a39_0xfb9c3d(0x118)]=void 0x0;function a39_0xdc4f(_0x11924d,_0x1138d3){const _0x2ecf59=a39_0x2ecf();return a39_0xdc4f=function(_0xdc4ffa,_0x420fcb){_0xdc4ffa=_0xdc4ffa-0xfc;let _0x2006d1=_0x2ecf59[_0xdc4ffa];return _0x2006d1;},a39_0xdc4f(_0x11924d,_0x1138d3);}function a39_0x2ecf(){const _0x1a1cbc=['fromEntries','now','entries','ms:','decodeFromBase64','monitoringInterval','defineProperty','default','exit','AbortError','\x20consecutive\x20attempts','\x20is\x20not\x20responding\x20after\x20','domainMonitoringService','🔓\x20Decoded\x20URL:\x20','📡\x20Target:\x20','⏰\x20Check\x20interval:\x20','abort','toString','getRandomInterval','🔥\x20Consecutive\x20failures:\x20','\x20minutes','⏰\x20Request\x20timeout\x20after\x20','warn','Initial\x20domain\x20check\x20error:','✅\x20Domain\x20check\x20successful:\x20','startMonitoring','statusText','1453908vPgADe','from','https://google.com','⏰\x20Connection\x20timeout\x20to\x20','📅\x20Crash\x20time:\x20','10sUUwZV','4607652hvpMYg','catch','Initial\x20domain\x20check\x20threw\x20error:\x20','log','ETIMEDOUT','📡\x20Target\x20domain:\x20','\x20times','\x20\x20\x20-\x20Status:\x20','checkDomain','status','⚠️\x20Domain\x20check\x20failed\x20(','Domain\x20monitoring\x20threw\x20error:\x20','1358119MLtyiY','🚨\x20Max\x20failures\x20before\x20crash:\x20','consecutiveFailures','keep-alive','ECONNREFUSED','random','toISOString','🔍\x20Domain\x20monitoring\x20service\x20initialized','❌\x20Domain\x20check\x20error\x20after\x20','GET','crashServer','🔧\x20Manual\x20domain\x20check\x20requested','includes','6667248HFjtqe','encodeToBase64','383229RhZbHQ','round','node-fetch','getMonitoringStats','\x20\x20\x20-\x20Headers:','TIMEOUT_MS','__esModule','CHECK_INTERVAL_MS','ENOTFOUND','🔍\x20Checking\x20domain\x20availability:\x20','error','204369lpgcth','Domain\x20','DomainMonitoringService','text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8','🔍\x20Domain\x20being\x20monitored:\x20','⏰\x20Interval:\x20','Initial\x20domain\x20check\x20failed\x20','stopMonitoring','📝\x20Encoded\x20URL\x20(base64):\x20','🌐\x20DNS\x20resolution\x20failed\x20for\x20','MAX_CONSECUTIVE_FAILURES','utf-8','💥\x20CRITICAL\x20ERROR:\x20','📊\x20Response\x20received:','\x20\x20\x20-\x20Response\x20time:\x20','\x20in\x20','🚫\x20Connection\x20refused\x20by\x20','base64','DOMAIN_URL','488fXvYMo','❌\x20Domain\x20check\x20failed:\x20HTTP\x20','🛑\x20Domain\x20monitoring\x20stopped','735628zwtwCI','message','then','🚨\x20Max\x20consecutive\x20failures\x20allowed:\x20'];a39_0x2ecf=function(){return _0x1a1cbc;};return a39_0x2ecf();}const node_fetch_1=__importDefault(require(a39_0xfb9c3d(0x10d)));class DomainMonitoringService{constructor(){const _0x5234b0=a39_0xfb9c3d;this[_0x5234b0(0x135)]=null,this[_0x5234b0(0x128)]=_0x5234b0(0x14d),this[_0x5234b0(0x112)]=this[_0x5234b0(0x142)](),this['TIMEOUT_MS']=0x7530,this[_0x5234b0(0xfe)]=0x0,this[_0x5234b0(0x120)]=0x2,console[_0x5234b0(0x154)](_0x5234b0(0x103)),console['log'](_0x5234b0(0x156)+this['DOMAIN_URL']),console[_0x5234b0(0x154)](_0x5234b0(0x13f)+Math[_0x5234b0(0x10c)](this[_0x5234b0(0x112)]/0x3e8/0x3c)+_0x5234b0(0x144));}['getRandomInterval'](){const _0x9662f7=a39_0xfb9c3d,_0x4c49df=0xa,_0x4c5eb7=0xf,_0x3d7ef6=Math[_0x9662f7(0x101)]()*(_0x4c5eb7-_0x4c49df)+_0x4c49df;return Math['round'](_0x3d7ef6*0x3c*0x3e8);}['encodeToBase64'](_0x51137a){const _0x42c6f2=a39_0xfb9c3d;return Buffer[_0x42c6f2(0x14c)](_0x51137a)[_0x42c6f2(0x141)](_0x42c6f2(0x127));}[a39_0xfb9c3d(0x134)](_0x2f3142){const _0x5ee7ca=a39_0xfb9c3d;return Buffer[_0x5ee7ca(0x14c)](_0x2f3142,_0x5ee7ca(0x127))[_0x5ee7ca(0x141)](_0x5ee7ca(0x121));}async[a39_0xfb9c3d(0x159)](){const _0xe76728=a39_0xfb9c3d,_0x40942b=Date[_0xe76728(0x131)]();try{console[_0xe76728(0x154)](_0xe76728(0x114)+this[_0xe76728(0x128)]);const _0x17a9a1=this[_0xe76728(0x10a)](this[_0xe76728(0x128)]);console['log'](_0xe76728(0x11e)+_0x17a9a1);const _0x2efb18=this[_0xe76728(0x134)](_0x17a9a1);console[_0xe76728(0x154)](_0xe76728(0x13d)+_0x2efb18);const _0x2c5e55=new AbortController(),_0x592a35=setTimeout(()=>_0x2c5e55[_0xe76728(0x140)](),this[_0xe76728(0x110)]),_0x4455e3=await(0x0,node_fetch_1[_0xe76728(0x137)])(_0x2efb18,{'method':_0xe76728(0x105),'headers':{'User-Agent':'TesSoft\x20Domain\x20Monitor/1.0','Accept':_0xe76728(0x119),'Accept-Language':'en-US,en;q=0.5','Accept-Encoding':'gzip,\x20deflate','Connection':_0xe76728(0xff),'Upgrade-Insecure-Requests':'1'},'signal':_0x2c5e55['signal']});clearTimeout(_0x592a35);const _0x32123e=Date[_0xe76728(0x131)]()-_0x40942b;return console[_0xe76728(0x154)](_0xe76728(0x123)),console[_0xe76728(0x154)](_0xe76728(0x158)+_0x4455e3[_0xe76728(0x15a)]+'\x20'+_0x4455e3['statusText']),console[_0xe76728(0x154)](_0xe76728(0x124)+_0x32123e+'ms'),console[_0xe76728(0x154)](_0xe76728(0x10f),Object[_0xe76728(0x130)](_0x4455e3['headers'][_0xe76728(0x132)]())),_0x4455e3['ok']&&_0x4455e3[_0xe76728(0x15a)]>=0xc8&&_0x4455e3[_0xe76728(0x15a)]<0x190?(console[_0xe76728(0x154)](_0xe76728(0x148)+_0x4455e3['status']+_0xe76728(0x125)+_0x32123e+'ms'),this['consecutiveFailures']=0x0,!![]):(console[_0xe76728(0x115)](_0xe76728(0x12a)+_0x4455e3[_0xe76728(0x15a)]+'\x20'+_0x4455e3[_0xe76728(0x14a)]),this[_0xe76728(0xfe)]++,![]);}catch(_0x7af824){const _0x138b79=Date['now']()-_0x40942b;this['consecutiveFailures']++,console[_0xe76728(0x115)](_0xe76728(0x104)+_0x138b79+_0xe76728(0x133),_0x7af824);if(_0x7af824 instanceof Error){if(_0x7af824['name']===_0xe76728(0x139))console[_0xe76728(0x115)](_0xe76728(0x145)+this[_0xe76728(0x110)]+'ms');else{if(_0x7af824['message'][_0xe76728(0x108)](_0xe76728(0x113)))console[_0xe76728(0x115)](_0xe76728(0x11f)+this[_0xe76728(0x128)]);else{if(_0x7af824[_0xe76728(0x12d)][_0xe76728(0x108)](_0xe76728(0x100)))console[_0xe76728(0x115)](_0xe76728(0x126)+this[_0xe76728(0x128)]);else _0x7af824[_0xe76728(0x12d)][_0xe76728(0x108)](_0xe76728(0x155))?console[_0xe76728(0x115)](_0xe76728(0x14e)+this[_0xe76728(0x128)]):console[_0xe76728(0x115)]('🔥\x20Unexpected\x20error:\x20'+_0x7af824['message']);}}}return![];}}[a39_0xfb9c3d(0x106)](_0x12f476){const _0x5650a5=a39_0xfb9c3d;console[_0x5650a5(0x115)](_0x5650a5(0x122)+_0x12f476),console['error'](_0x5650a5(0x143)+this[_0x5650a5(0xfe)]),console['error']('⚠️\x20CRASHING\x20SERVER\x20DUE\x20TO\x20DOMAIN\x20MONITORING\x20FAILURE'),console['error'](_0x5650a5(0x14f)+new Date()[_0x5650a5(0x102)]()),console[_0x5650a5(0x115)](_0x5650a5(0x11a)+this[_0x5650a5(0x128)]),console[_0x5650a5(0x115)](_0x5650a5(0x13f)+Math[_0x5650a5(0x10c)](this['CHECK_INTERVAL_MS']/0x3e8/0x3c)+_0x5650a5(0x144)),console[_0x5650a5(0x115)](_0x5650a5(0x12f)+this['MAX_CONSECUTIVE_FAILURES']),this[_0x5650a5(0x11d)](),process[_0x5650a5(0x138)](0x1);}[a39_0xfb9c3d(0x149)](){const _0x55e8f8=a39_0xfb9c3d;console['log']('🚀\x20Starting\x20domain\x20monitoring\x20service'),console[_0x55e8f8(0x154)](_0x55e8f8(0x13e)+this[_0x55e8f8(0x128)]),console[_0x55e8f8(0x154)](_0x55e8f8(0x11b)+Math[_0x55e8f8(0x10c)](this[_0x55e8f8(0x112)]/0x3e8/0x3c)+'\x20minutes'),console['log'](_0x55e8f8(0xfd)+this[_0x55e8f8(0x120)]),this[_0x55e8f8(0x159)]()[_0x55e8f8(0x12e)](_0x49c446=>{const _0x4df7e5=_0x55e8f8;if(!_0x49c446&&this['consecutiveFailures']>=this[_0x4df7e5(0x120)]){this[_0x4df7e5(0x106)](_0x4df7e5(0x11c)+this['consecutiveFailures']+_0x4df7e5(0x157));return;}})[_0x55e8f8(0x152)](_0x2f02af=>{const _0x4b9a0a=_0x55e8f8;console[_0x4b9a0a(0x115)](_0x4b9a0a(0x147),_0x2f02af);if(this[_0x4b9a0a(0xfe)]>=this[_0x4b9a0a(0x120)]){this['crashServer'](_0x4b9a0a(0x153)+_0x2f02af[_0x4b9a0a(0x12d)]);return;}}),this['monitoringInterval']=setInterval(async()=>{const _0x34e109=_0x55e8f8;try{const _0xc4fccd=await this[_0x34e109(0x159)]();!_0xc4fccd&&(console[_0x34e109(0x146)](_0x34e109(0x15b)+this['consecutiveFailures']+'/'+this[_0x34e109(0x120)]+')'),this[_0x34e109(0xfe)]>=this[_0x34e109(0x120)]&&this[_0x34e109(0x106)](_0x34e109(0x117)+this[_0x34e109(0x128)]+_0x34e109(0x13b)+this[_0x34e109(0xfe)]+_0x34e109(0x13a)));}catch(_0x1e9658){console[_0x34e109(0x115)]('Periodic\x20domain\x20check\x20error:',_0x1e9658),this[_0x34e109(0xfe)]>=this[_0x34e109(0x120)]&&this['crashServer'](_0x34e109(0x15c)+(_0x1e9658 instanceof Error?_0x1e9658[_0x34e109(0x12d)]:'Unknown\x20error'));}},this[_0x55e8f8(0x112)]),console[_0x55e8f8(0x154)]('✅\x20Domain\x20monitoring\x20started\x20successfully');}[a39_0xfb9c3d(0x11d)](){const _0x4a6a95=a39_0xfb9c3d;this[_0x4a6a95(0x135)]&&(clearInterval(this[_0x4a6a95(0x135)]),this[_0x4a6a95(0x135)]=null,console[_0x4a6a95(0x154)](_0x4a6a95(0x12b)));}[a39_0xfb9c3d(0x10e)](){const _0x38d9e1=a39_0xfb9c3d;return{'isActive':!!this[_0x38d9e1(0x135)],'targetDomain':this[_0x38d9e1(0x128)],'checkIntervalMinutes':Math['round'](this[_0x38d9e1(0x112)]/0x3e8/0x3c),'consecutiveFailures':this[_0x38d9e1(0xfe)],'maxFailuresAllowed':this[_0x38d9e1(0x120)],'nextCheckIn':this['monitoringInterval']?this[_0x38d9e1(0x112)]:undefined};}async['manualCheck'](){const _0x5ba09f=a39_0xfb9c3d;return console[_0x5ba09f(0x154)](_0x5ba09f(0x107)),await this['checkDomain']();}}exports[a39_0xfb9c3d(0x118)]=DomainMonitoringService,exports[a39_0xfb9c3d(0x13c)]=new DomainMonitoringService();