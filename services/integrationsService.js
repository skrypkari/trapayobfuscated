'use strict';const a47_0x5a9dfc=a47_0x2e19;(function(_0x556fae,_0x91ffe4){const _0x2ecc3e=a47_0x2e19,_0x3d1ea6=_0x556fae();while(!![]){try{const _0x596312=-parseInt(_0x2ecc3e(0x180))/0x1+-parseInt(_0x2ecc3e(0x181))/0x2*(-parseInt(_0x2ecc3e(0x185))/0x3)+parseInt(_0x2ecc3e(0x17e))/0x4*(parseInt(_0x2ecc3e(0x184))/0x5)+-parseInt(_0x2ecc3e(0x188))/0x6*(-parseInt(_0x2ecc3e(0x186))/0x7)+-parseInt(_0x2ecc3e(0x190))/0x8+-parseInt(_0x2ecc3e(0x18e))/0x9+parseInt(_0x2ecc3e(0x189))/0xa*(parseInt(_0x2ecc3e(0x177))/0xb);if(_0x596312===_0x91ffe4)break;else _0x3d1ea6['push'](_0x3d1ea6['shift']());}catch(_0x30b3da){_0x3d1ea6['push'](_0x3d1ea6['shift']());}}}(a47_0x1647,0xa5155));function a47_0x2e19(_0x194cbd,_0x1379b6){const _0x16474b=a47_0x1647();return a47_0x2e19=function(_0x2e19c0,_0x201b04){_0x2e19c0=_0x2e19c0-0x177;let _0x11fbc3=_0x16474b[_0x2e19c0];return _0x11fbc3;},a47_0x2e19(_0x194cbd,_0x1379b6);}var __importDefault=this&&this[a47_0x5a9dfc(0x18b)]||function(_0x61735e){const _0x1a8cd7=a47_0x5a9dfc;return _0x61735e&&_0x61735e[_0x1a8cd7(0x18a)]?_0x61735e:{'default':_0x61735e};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a47_0x5a9dfc(0x187)]=void 0x0;const database_1=__importDefault(require(a47_0x5a9dfc(0x183)));class IntegrationsService{[a47_0x5a9dfc(0x17d)](_0x1cb534){const _0xceb1aa=a47_0x5a9dfc;if(!_0x1cb534)return[];if(Array['isArray'](_0x1cb534))return _0x1cb534;if(typeof _0x1cb534===_0xceb1aa(0x18c))try{const _0x394024=JSON[_0xceb1aa(0x17c)](_0x1cb534);return Array['isArray'](_0x394024)?_0x394024:[];}catch{return[];}return[];}async[a47_0x5a9dfc(0x182)](_0x2a16eb){const _0x198f0d=a47_0x5a9dfc;await this[_0x198f0d(0x179)](_0x2a16eb);const _0x1b0cbb=await database_1['default'][_0x198f0d(0x17b)][_0x198f0d(0x178)]({'where':{'shopId':_0x2a16eb},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x1b0cbb)throw new Error(_0x198f0d(0x17a));return{'webhook':{'url':_0x1b0cbb['webhookUrl'],'events':this[_0x198f0d(0x17d)](_0x1b0cbb[_0x198f0d(0x18d)])}};}async['updateWebhookSettings'](_0x2a77c1,_0x29e964){const _0x2b3f20=a47_0x5a9dfc;await this[_0x2b3f20(0x179)](_0x2a77c1);const _0x5a90a9={};_0x29e964[_0x2b3f20(0x17f)]!==undefined&&(_0x5a90a9[_0x2b3f20(0x17f)]=_0x29e964[_0x2b3f20(0x17f)]||null),_0x29e964[_0x2b3f20(0x18d)]!==undefined&&(_0x5a90a9['webhookEvents']=_0x29e964[_0x2b3f20(0x18d)]||[]),await database_1[_0x2b3f20(0x191)][_0x2b3f20(0x17b)]['update']({'where':{'shopId':_0x2a77c1},'data':_0x5a90a9});}async[a47_0x5a9dfc(0x179)](_0x2083e2){const _0x12efbd=a47_0x5a9dfc,_0x3ad1b8=await database_1[_0x12efbd(0x191)][_0x12efbd(0x17b)][_0x12efbd(0x178)]({'where':{'shopId':_0x2083e2}});!_0x3ad1b8&&await database_1['default']['shopSettings'][_0x12efbd(0x18f)]({'data':{'shopId':_0x2083e2}});}}function a47_0x1647(){const _0x16048c=['webhookUrl','1056063FzUnOK','6RAtzCN','getIntegrations','../config/database','218945yKACGC','625473eLZJbn','4941587vGqddM','IntegrationsService','6oxflvs','13166150CUWnnz','__esModule','__importDefault','string','webhookEvents','7836318YEbyTd','create','2812848inMYNs','default','11OMvQgT','findUnique','ensureSettingsExist','Shop\x20settings\x20not\x20found','shopSettings','parse','parseWebhookEvents','28RcwhDA'];a47_0x1647=function(){return _0x16048c;};return a47_0x1647();}exports[a47_0x5a9dfc(0x187)]=IntegrationsService;