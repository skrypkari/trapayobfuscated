'use strict';const a55_0x2ce218=a55_0x5b3e;(function(_0x3065c2,_0x7bda06){const _0x597cbf=a55_0x5b3e,_0x5e3426=_0x3065c2();while(!![]){try{const _0x292ef7=-parseInt(_0x597cbf(0x191))/0x1+-parseInt(_0x597cbf(0x18e))/0x2+-parseInt(_0x597cbf(0x197))/0x3+parseInt(_0x597cbf(0x192))/0x4+-parseInt(_0x597cbf(0x1a0))/0x5*(parseInt(_0x597cbf(0x18f))/0x6)+-parseInt(_0x597cbf(0x198))/0x7*(-parseInt(_0x597cbf(0x19c))/0x8)+parseInt(_0x597cbf(0x190))/0x9*(parseInt(_0x597cbf(0x19a))/0xa);if(_0x292ef7===_0x7bda06)break;else _0x5e3426['push'](_0x5e3426['shift']());}catch(_0x4ead5b){_0x5e3426['push'](_0x5e3426['shift']());}}}(a55_0x3c0b,0x88ebd));function a55_0x5b3e(_0x4ddab7,_0x5d0385){const _0x3c0bd9=a55_0x3c0b();return a55_0x5b3e=function(_0x5b3ee3,_0x425067){_0x5b3ee3=_0x5b3ee3-0x18d;let _0x8a85dd=_0x3c0bd9[_0x5b3ee3];return _0x8a85dd;},a55_0x5b3e(_0x4ddab7,_0x5d0385);}var __importDefault=this&&this[a55_0x2ce218(0x196)]||function(_0x7da9e7){const _0xd40dc6=a55_0x2ce218;return _0x7da9e7&&_0x7da9e7[_0xd40dc6(0x19f)]?_0x7da9e7:{'default':_0x7da9e7};};Object[a55_0x2ce218(0x1a3)](exports,a55_0x2ce218(0x19f),{'value':!![]}),exports[a55_0x2ce218(0x19d)]=void 0x0;const database_1=__importDefault(require(a55_0x2ce218(0x1a4)));class IntegrationsService{['parseWebhookEvents'](_0x2d451f){const _0x49b415=a55_0x2ce218;if(!_0x2d451f)return[];if(Array[_0x49b415(0x1a8)](_0x2d451f))return _0x2d451f;if(typeof _0x2d451f===_0x49b415(0x1a9))try{const _0x2c13f3=JSON[_0x49b415(0x1a7)](_0x2d451f);return Array[_0x49b415(0x1a8)](_0x2c13f3)?_0x2c13f3:[];}catch{return[];}return[];}async[a55_0x2ce218(0x18d)](_0x1e2dd9){const _0x4f252b=a55_0x2ce218;await this[_0x4f252b(0x19e)](_0x1e2dd9);const _0x2e0a6a=await database_1[_0x4f252b(0x193)][_0x4f252b(0x199)][_0x4f252b(0x195)]({'where':{'shopId':_0x1e2dd9},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x2e0a6a)throw new Error('Shop\x20settings\x20not\x20found');return{'webhook':{'url':_0x2e0a6a[_0x4f252b(0x1a5)],'events':this[_0x4f252b(0x194)](_0x2e0a6a[_0x4f252b(0x1a2)])}};}async[a55_0x2ce218(0x19b)](_0xea0cff,_0xa0aef2){const _0x211605=a55_0x2ce218;await this[_0x211605(0x19e)](_0xea0cff);const _0x2096e5={};_0xa0aef2[_0x211605(0x1a5)]!==undefined&&(_0x2096e5[_0x211605(0x1a5)]=_0xa0aef2[_0x211605(0x1a5)]||null),_0xa0aef2[_0x211605(0x1a2)]!==undefined&&(_0x2096e5[_0x211605(0x1a2)]=_0xa0aef2[_0x211605(0x1a2)]||[]),await database_1[_0x211605(0x193)]['shopSettings'][_0x211605(0x1a6)]({'where':{'shopId':_0xea0cff},'data':_0x2096e5});}async[a55_0x2ce218(0x19e)](_0x18b7c9){const _0x28f298=a55_0x2ce218,_0x448ef7=await database_1[_0x28f298(0x193)][_0x28f298(0x199)][_0x28f298(0x195)]({'where':{'shopId':_0x18b7c9}});!_0x448ef7&&await database_1['default'][_0x28f298(0x199)][_0x28f298(0x1a1)]({'data':{'shopId':_0x18b7c9}});}}function a55_0x3c0b(){const _0x4100e9=['IntegrationsService','ensureSettingsExist','__esModule','195YhKGpF','create','webhookEvents','defineProperty','../config/database','webhookUrl','update','parse','isArray','string','getIntegrations','1203072xNgnda','2664PugUYH','28719dUPEQE','253017HAIlaI','1544208qFbfgr','default','parseWebhookEvents','findUnique','__importDefault','3234741kdRbgm','273nuwxnt','shopSettings','5770hPZEpC','updateWebhookSettings','58192gKcMcn'];a55_0x3c0b=function(){return _0x4100e9;};return a55_0x3c0b();}exports[a55_0x2ce218(0x19d)]=IntegrationsService;