'use strict';const a43_0x1a15e2=a43_0x12f4;(function(_0x14e041,_0x332951){const _0x3ef5a6=a43_0x12f4,_0x1d965c=_0x14e041();while(!![]){try{const _0x429096=-parseInt(_0x3ef5a6(0x1bd))/0x1*(-parseInt(_0x3ef5a6(0x1ab))/0x2)+parseInt(_0x3ef5a6(0x1c1))/0x3*(-parseInt(_0x3ef5a6(0x1b7))/0x4)+-parseInt(_0x3ef5a6(0x1a5))/0x5+parseInt(_0x3ef5a6(0x1ba))/0x6*(-parseInt(_0x3ef5a6(0x1bc))/0x7)+-parseInt(_0x3ef5a6(0x1aa))/0x8*(parseInt(_0x3ef5a6(0x1ad))/0x9)+parseInt(_0x3ef5a6(0x1c0))/0xa*(-parseInt(_0x3ef5a6(0x1ae))/0xb)+parseInt(_0x3ef5a6(0x1b9))/0xc;if(_0x429096===_0x332951)break;else _0x1d965c['push'](_0x1d965c['shift']());}catch(_0x21e529){_0x1d965c['push'](_0x1d965c['shift']());}}}(a43_0x20c3,0x71922));var __importDefault=this&&this[a43_0x1a15e2(0x1b8)]||function(_0x261285){return _0x261285&&_0x261285['__esModule']?_0x261285:{'default':_0x261285};};Object[a43_0x1a15e2(0x1b4)](exports,a43_0x1a15e2(0x1b2),{'value':!![]}),exports[a43_0x1a15e2(0x1a6)]=void 0x0;const database_1=__importDefault(require(a43_0x1a15e2(0x1a7)));function a43_0x12f4(_0x585546,_0x493b22){const _0x20c3af=a43_0x20c3();return a43_0x12f4=function(_0x12f489,_0x36b91f){_0x12f489=_0x12f489-0x1a5;let _0x41b4f5=_0x20c3af[_0x12f489];return _0x41b4f5;},a43_0x12f4(_0x585546,_0x493b22);}class IntegrationsService{['parseWebhookEvents'](_0x19555d){const _0x5a7695=a43_0x1a15e2;if(!_0x19555d)return[];if(Array[_0x5a7695(0x1b1)](_0x19555d))return _0x19555d;if(typeof _0x19555d===_0x5a7695(0x1bf))try{const _0xb035fd=JSON[_0x5a7695(0x1bb)](_0x19555d);return Array['isArray'](_0xb035fd)?_0xb035fd:[];}catch{return[];}return[];}async['getIntegrations'](_0x2ae128){const _0x5aaeed=a43_0x1a15e2;await this[_0x5aaeed(0x1ac)](_0x2ae128);const _0x9321c6=await database_1[_0x5aaeed(0x1c2)][_0x5aaeed(0x1a8)]['findUnique']({'where':{'shopId':_0x2ae128},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x9321c6)throw new Error(_0x5aaeed(0x1af));return{'webhook':{'url':_0x9321c6[_0x5aaeed(0x1b5)],'events':this[_0x5aaeed(0x1be)](_0x9321c6['webhookEvents'])}};}async[a43_0x1a15e2(0x1b6)](_0x38f8df,_0x42943d){const _0x36c637=a43_0x1a15e2;await this['ensureSettingsExist'](_0x38f8df);const _0x3b456c={};_0x42943d[_0x36c637(0x1b5)]!==undefined&&(_0x3b456c[_0x36c637(0x1b5)]=_0x42943d['webhookUrl']||null),_0x42943d[_0x36c637(0x1b3)]!==undefined&&(_0x3b456c['webhookEvents']=_0x42943d[_0x36c637(0x1b3)]||[]),await database_1[_0x36c637(0x1c2)][_0x36c637(0x1a8)][_0x36c637(0x1a9)]({'where':{'shopId':_0x38f8df},'data':_0x3b456c});}async[a43_0x1a15e2(0x1ac)](_0x41f28a){const _0x5c7ad1=a43_0x1a15e2,_0xf8ffc5=await database_1[_0x5c7ad1(0x1c2)][_0x5c7ad1(0x1a8)][_0x5c7ad1(0x1b0)]({'where':{'shopId':_0x41f28a}});!_0xf8ffc5&&await database_1['default'][_0x5c7ad1(0x1a8)][_0x5c7ad1(0x1c3)]({'data':{'shopId':_0x41f28a}});}}function a43_0x20c3(){const _0x31a4fd=['108osvjtn','11aEnNAL','Shop\x20settings\x20not\x20found','findUnique','isArray','__esModule','webhookEvents','defineProperty','webhookUrl','updateWebhookSettings','4GophwV','__importDefault','31580916iOqwxZ','12YjvQuY','parse','2689197KtuCOB','539490MzzYMX','parseWebhookEvents','string','2657530syOdgK','116043LXFXBW','default','create','4021135LdPXMo','IntegrationsService','../config/database','shopSettings','update','552696PxiBRi','2RsvoXO','ensureSettingsExist'];a43_0x20c3=function(){return _0x31a4fd;};return a43_0x20c3();}exports['IntegrationsService']=IntegrationsService;