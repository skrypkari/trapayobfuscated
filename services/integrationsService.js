'use strict';const a47_0x2a7c6d=a47_0x5a93;(function(_0x35dd05,_0x74dcd2){const _0x1a6fda=a47_0x5a93,_0x4125bd=_0x35dd05();while(!![]){try{const _0x471a0a=parseInt(_0x1a6fda(0x164))/0x1*(parseInt(_0x1a6fda(0x166))/0x2)+parseInt(_0x1a6fda(0x16a))/0x3+-parseInt(_0x1a6fda(0x167))/0x4+parseInt(_0x1a6fda(0x16c))/0x5+parseInt(_0x1a6fda(0x15b))/0x6+parseInt(_0x1a6fda(0x15c))/0x7*(-parseInt(_0x1a6fda(0x173))/0x8)+-parseInt(_0x1a6fda(0x168))/0x9;if(_0x471a0a===_0x74dcd2)break;else _0x4125bd['push'](_0x4125bd['shift']());}catch(_0x267b02){_0x4125bd['push'](_0x4125bd['shift']());}}}(a47_0x5ef7,0x3d41d));var __importDefault=this&&this[a47_0x2a7c6d(0x172)]||function(_0x2d0d8a){const _0x325776=a47_0x2a7c6d;return _0x2d0d8a&&_0x2d0d8a[_0x325776(0x170)]?_0x2d0d8a:{'default':_0x2d0d8a};};function a47_0x5a93(_0x5d1bd2,_0x543625){const _0x5ef7c0=a47_0x5ef7();return a47_0x5a93=function(_0x5a9367,_0x4af206){_0x5a9367=_0x5a9367-0x15a;let _0x1255a9=_0x5ef7c0[_0x5a9367];return _0x1255a9;},a47_0x5a93(_0x5d1bd2,_0x543625);}Object[a47_0x2a7c6d(0x15f)](exports,a47_0x2a7c6d(0x170),{'value':!![]}),exports[a47_0x2a7c6d(0x15e)]=void 0x0;const database_1=__importDefault(require(a47_0x2a7c6d(0x16b)));class IntegrationsService{[a47_0x2a7c6d(0x15a)](_0x553bb8){const _0x4d366c=a47_0x2a7c6d;if(!_0x553bb8)return[];if(Array[_0x4d366c(0x15d)](_0x553bb8))return _0x553bb8;if(typeof _0x553bb8==='string')try{const _0x327593=JSON[_0x4d366c(0x162)](_0x553bb8);return Array['isArray'](_0x327593)?_0x327593:[];}catch{return[];}return[];}async[a47_0x2a7c6d(0x161)](_0x411871){const _0x368df=a47_0x2a7c6d;await this[_0x368df(0x160)](_0x411871);const _0x493cd0=await database_1[_0x368df(0x165)][_0x368df(0x169)]['findUnique']({'where':{'shopId':_0x411871},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x493cd0)throw new Error('Shop\x20settings\x20not\x20found');return{'webhook':{'url':_0x493cd0['webhookUrl'],'events':this[_0x368df(0x15a)](_0x493cd0[_0x368df(0x16e)])}};}async[a47_0x2a7c6d(0x171)](_0xe182f7,_0x1c0dc3){const _0x22f23c=a47_0x2a7c6d;await this[_0x22f23c(0x160)](_0xe182f7);const _0x31d7cc={};_0x1c0dc3['webhookUrl']!==undefined&&(_0x31d7cc['webhookUrl']=_0x1c0dc3[_0x22f23c(0x163)]||null),_0x1c0dc3[_0x22f23c(0x16e)]!==undefined&&(_0x31d7cc['webhookEvents']=_0x1c0dc3[_0x22f23c(0x16e)]||[]),await database_1[_0x22f23c(0x165)]['shopSettings']['update']({'where':{'shopId':_0xe182f7},'data':_0x31d7cc});}async['ensureSettingsExist'](_0x1c465b){const _0x295530=a47_0x2a7c6d,_0x1e0868=await database_1[_0x295530(0x165)][_0x295530(0x169)][_0x295530(0x16d)]({'where':{'shopId':_0x1c465b}});!_0x1e0868&&await database_1[_0x295530(0x165)][_0x295530(0x169)][_0x295530(0x16f)]({'data':{'shopId':_0x1c465b}});}}function a47_0x5ef7(){const _0x44c7d1=['getIntegrations','parse','webhookUrl','45488omVZAF','default','10HciWNX','32168wlewtT','3896568oCpmLb','shopSettings','376248RkfXts','../config/database','185315VizKEt','findUnique','webhookEvents','create','__esModule','updateWebhookSettings','__importDefault','328XtNJMS','parseWebhookEvents','2284470kGfkPf','13447jfiFqx','isArray','IntegrationsService','defineProperty','ensureSettingsExist'];a47_0x5ef7=function(){return _0x44c7d1;};return a47_0x5ef7();}exports[a47_0x2a7c6d(0x15e)]=IntegrationsService;