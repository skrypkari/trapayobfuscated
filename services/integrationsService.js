'use strict';function a48_0x40cb(){const _0xcd1d6b=['shopSettings','create','webhookUrl','ensureSettingsExist','../config/database','17631383hpkiZM','defineProperty','default','18KbZtqt','parseWebhookEvents','isArray','updateWebhookSettings','367ztJnZG','Shop\x20settings\x20not\x20found','1057ZPEcjf','6902470MSpSmi','findUnique','36GGNqOv','3704152pTRyea','40998dWibOL','__importDefault','1675920rfuGFV','update','__esModule','718RtxZpb','614235WQPFnT','webhookEvents','IntegrationsService','parse'];a48_0x40cb=function(){return _0xcd1d6b;};return a48_0x40cb();}const a48_0x2faf5f=a48_0x3b05;(function(_0x56af55,_0xf5bd26){const _0xf7bfb4=a48_0x3b05,_0x22d92c=_0x56af55();while(!![]){try{const _0x293515=parseInt(_0xf7bfb4(0x113))/0x1*(-parseInt(_0xf7bfb4(0x102))/0x2)+parseInt(_0xf7bfb4(0xff))/0x3+parseInt(_0xf7bfb4(0x118))/0x4*(parseInt(_0xf7bfb4(0x103))/0x5)+-parseInt(_0xf7bfb4(0xfd))/0x6*(-parseInt(_0xf7bfb4(0x115))/0x7)+-parseInt(_0xf7bfb4(0x119))/0x8*(parseInt(_0xf7bfb4(0x10f))/0x9)+parseInt(_0xf7bfb4(0x116))/0xa+-parseInt(_0xf7bfb4(0x10c))/0xb;if(_0x293515===_0xf5bd26)break;else _0x22d92c['push'](_0x22d92c['shift']());}catch(_0x48167d){_0x22d92c['push'](_0x22d92c['shift']());}}}(a48_0x40cb,0xb1291));function a48_0x3b05(_0x5d033b,_0x347351){const _0x40cb5f=a48_0x40cb();return a48_0x3b05=function(_0x3b05ff,_0x2e5799){_0x3b05ff=_0x3b05ff-0xfd;let _0x28612f=_0x40cb5f[_0x3b05ff];return _0x28612f;},a48_0x3b05(_0x5d033b,_0x347351);}var __importDefault=this&&this[a48_0x2faf5f(0xfe)]||function(_0x33d9df){const _0x2edd3a=a48_0x2faf5f;return _0x33d9df&&_0x33d9df[_0x2edd3a(0x101)]?_0x33d9df:{'default':_0x33d9df};};Object[a48_0x2faf5f(0x10d)](exports,a48_0x2faf5f(0x101),{'value':!![]}),exports[a48_0x2faf5f(0x105)]=void 0x0;const database_1=__importDefault(require(a48_0x2faf5f(0x10b)));class IntegrationsService{[a48_0x2faf5f(0x110)](_0x15e821){const _0x21cecd=a48_0x2faf5f;if(!_0x15e821)return[];if(Array[_0x21cecd(0x111)](_0x15e821))return _0x15e821;if(typeof _0x15e821==='string')try{const _0x240c4b=JSON[_0x21cecd(0x106)](_0x15e821);return Array[_0x21cecd(0x111)](_0x240c4b)?_0x240c4b:[];}catch{return[];}return[];}async['getIntegrations'](_0x3b7637){const _0x34fe31=a48_0x2faf5f;await this[_0x34fe31(0x10a)](_0x3b7637);const _0xeccbfb=await database_1['default'][_0x34fe31(0x107)][_0x34fe31(0x117)]({'where':{'shopId':_0x3b7637},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0xeccbfb)throw new Error(_0x34fe31(0x114));return{'webhook':{'url':_0xeccbfb['webhookUrl'],'events':this['parseWebhookEvents'](_0xeccbfb['webhookEvents'])}};}async[a48_0x2faf5f(0x112)](_0x5edcd4,_0x342e88){const _0x2e088d=a48_0x2faf5f;await this[_0x2e088d(0x10a)](_0x5edcd4);const _0x399725={};_0x342e88[_0x2e088d(0x109)]!==undefined&&(_0x399725[_0x2e088d(0x109)]=_0x342e88[_0x2e088d(0x109)]||null),_0x342e88[_0x2e088d(0x104)]!==undefined&&(_0x399725[_0x2e088d(0x104)]=_0x342e88[_0x2e088d(0x104)]||[]),await database_1[_0x2e088d(0x10e)][_0x2e088d(0x107)][_0x2e088d(0x100)]({'where':{'shopId':_0x5edcd4},'data':_0x399725});}async['ensureSettingsExist'](_0x534a98){const _0x247242=a48_0x2faf5f,_0x30ae78=await database_1[_0x247242(0x10e)][_0x247242(0x107)][_0x247242(0x117)]({'where':{'shopId':_0x534a98}});!_0x30ae78&&await database_1[_0x247242(0x10e)]['shopSettings'][_0x247242(0x108)]({'data':{'shopId':_0x534a98}});}}exports[a48_0x2faf5f(0x105)]=IntegrationsService;