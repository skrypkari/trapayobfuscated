'use strict';function a50_0x3ffc(){const _0xe3e23e=['__importDefault','632uacGoY','parseWebhookEvents','2903196DPSRaE','2733200dgYeSI','default','shopSettings','11493qHhAbP','Shop\x20settings\x20not\x20found','string','../config/database','getIntegrations','isArray','IntegrationsService','findUnique','12025560eeUiKu','452481bZdjUN','14yPbEPb','webhookUrl','8cwKuCk','update','1130898rtcpkv','210782pZQBUu','webhookEvents','__esModule','parse','updateWebhookSettings','defineProperty','ensureSettingsExist'];a50_0x3ffc=function(){return _0xe3e23e;};return a50_0x3ffc();}const a50_0x4bf361=a50_0x1c01;(function(_0x3b9d77,_0x41d02d){const _0x3db357=a50_0x1c01,_0x32934e=_0x3b9d77();while(!![]){try{const _0x3c2c9e=-parseInt(_0x3db357(0xe9))/0x1*(-parseInt(_0x3db357(0xec))/0x2)+parseInt(_0x3db357(0xe6))/0x3+-parseInt(_0x3db357(0xd9))/0x4+-parseInt(_0x3db357(0xda))/0x5+-parseInt(_0x3db357(0xeb))/0x6*(parseInt(_0x3db357(0xe7))/0x7)+parseInt(_0x3db357(0xd7))/0x8*(-parseInt(_0x3db357(0xdd))/0x9)+parseInt(_0x3db357(0xe5))/0xa;if(_0x3c2c9e===_0x41d02d)break;else _0x32934e['push'](_0x32934e['shift']());}catch(_0x5cf388){_0x32934e['push'](_0x32934e['shift']());}}}(a50_0x3ffc,0x6cf0f));function a50_0x1c01(_0x7f41bd,_0x285a90){const _0x3ffc7d=a50_0x3ffc();return a50_0x1c01=function(_0x1c016a,_0x50e28e){_0x1c016a=_0x1c016a-0xd4;let _0x36f854=_0x3ffc7d[_0x1c016a];return _0x36f854;},a50_0x1c01(_0x7f41bd,_0x285a90);}var __importDefault=this&&this[a50_0x4bf361(0xd6)]||function(_0x3c08e4){const _0x4f2077=a50_0x4bf361;return _0x3c08e4&&_0x3c08e4[_0x4f2077(0xee)]?_0x3c08e4:{'default':_0x3c08e4};};Object[a50_0x4bf361(0xd4)](exports,a50_0x4bf361(0xee),{'value':!![]}),exports['IntegrationsService']=void 0x0;const database_1=__importDefault(require(a50_0x4bf361(0xe0)));class IntegrationsService{[a50_0x4bf361(0xd8)](_0x328319){const _0x67e440=a50_0x4bf361;if(!_0x328319)return[];if(Array[_0x67e440(0xe2)](_0x328319))return _0x328319;if(typeof _0x328319===_0x67e440(0xdf))try{const _0x24681c=JSON[_0x67e440(0xef)](_0x328319);return Array[_0x67e440(0xe2)](_0x24681c)?_0x24681c:[];}catch{return[];}return[];}async[a50_0x4bf361(0xe1)](_0x1c5796){const _0x43b248=a50_0x4bf361;await this[_0x43b248(0xd5)](_0x1c5796);const _0x4d7b9e=await database_1[_0x43b248(0xdb)][_0x43b248(0xdc)]['findUnique']({'where':{'shopId':_0x1c5796},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x4d7b9e)throw new Error(_0x43b248(0xde));return{'webhook':{'url':_0x4d7b9e[_0x43b248(0xe8)],'events':this[_0x43b248(0xd8)](_0x4d7b9e[_0x43b248(0xed)])}};}async[a50_0x4bf361(0xf0)](_0x4009fe,_0x4bec98){const _0x24ed0c=a50_0x4bf361;await this[_0x24ed0c(0xd5)](_0x4009fe);const _0x1f8600={};_0x4bec98[_0x24ed0c(0xe8)]!==undefined&&(_0x1f8600[_0x24ed0c(0xe8)]=_0x4bec98[_0x24ed0c(0xe8)]||null),_0x4bec98[_0x24ed0c(0xed)]!==undefined&&(_0x1f8600['webhookEvents']=_0x4bec98[_0x24ed0c(0xed)]||[]),await database_1[_0x24ed0c(0xdb)]['shopSettings'][_0x24ed0c(0xea)]({'where':{'shopId':_0x4009fe},'data':_0x1f8600});}async[a50_0x4bf361(0xd5)](_0x3a2f4f){const _0x305279=a50_0x4bf361,_0x1a5d0a=await database_1[_0x305279(0xdb)]['shopSettings'][_0x305279(0xe4)]({'where':{'shopId':_0x3a2f4f}});!_0x1a5d0a&&await database_1['default'][_0x305279(0xdc)]['create']({'data':{'shopId':_0x3a2f4f}});}}exports[a50_0x4bf361(0xe3)]=IntegrationsService;