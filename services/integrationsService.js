'use strict';const a46_0x3a8aad=a46_0x4f08;(function(_0x4fc298,_0x2bf760){const _0x285b14=a46_0x4f08,_0x2e3499=_0x4fc298();while(!![]){try{const _0x5ca32d=-parseInt(_0x285b14(0xfc))/0x1+-parseInt(_0x285b14(0xf7))/0x2*(-parseInt(_0x285b14(0xf8))/0x3)+-parseInt(_0x285b14(0xf2))/0x4*(-parseInt(_0x285b14(0xee))/0x5)+-parseInt(_0x285b14(0xf5))/0x6+parseInt(_0x285b14(0x104))/0x7*(parseInt(_0x285b14(0xfa))/0x8)+-parseInt(_0x285b14(0xed))/0x9+parseInt(_0x285b14(0xec))/0xa;if(_0x5ca32d===_0x2bf760)break;else _0x2e3499['push'](_0x2e3499['shift']());}catch(_0x15efe8){_0x2e3499['push'](_0x2e3499['shift']());}}}(a46_0x24a7,0x743c5));function a46_0x4f08(_0x35e32e,_0x5a8fa4){const _0x24a7c3=a46_0x24a7();return a46_0x4f08=function(_0x4f08d7,_0x23720a){_0x4f08d7=_0x4f08d7-0xeb;let _0x3e12eb=_0x24a7c3[_0x4f08d7];return _0x3e12eb;},a46_0x4f08(_0x35e32e,_0x5a8fa4);}var __importDefault=this&&this[a46_0x3a8aad(0xef)]||function(_0x5f5635){const _0x5ed709=a46_0x3a8aad;return _0x5f5635&&_0x5f5635[_0x5ed709(0x102)]?_0x5f5635:{'default':_0x5f5635};};Object[a46_0x3a8aad(0xf4)](exports,a46_0x3a8aad(0x102),{'value':!![]}),exports[a46_0x3a8aad(0xf3)]=void 0x0;const database_1=__importDefault(require(a46_0x3a8aad(0x103)));class IntegrationsService{['parseWebhookEvents'](_0x1eb68f){const _0x4430a5=a46_0x3a8aad;if(!_0x1eb68f)return[];if(Array[_0x4430a5(0xf9)](_0x1eb68f))return _0x1eb68f;if(typeof _0x1eb68f===_0x4430a5(0xff))try{const _0x5bf879=JSON[_0x4430a5(0xfb)](_0x1eb68f);return Array[_0x4430a5(0xf9)](_0x5bf879)?_0x5bf879:[];}catch{return[];}return[];}async[a46_0x3a8aad(0xeb)](_0x1c36e4){const _0x3a504d=a46_0x3a8aad;await this[_0x3a504d(0xf0)](_0x1c36e4);const _0x12fefe=await database_1['default'][_0x3a504d(0xf6)][_0x3a504d(0x105)]({'where':{'shopId':_0x1c36e4},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x12fefe)throw new Error(_0x3a504d(0x107));return{'webhook':{'url':_0x12fefe[_0x3a504d(0xfe)],'events':this[_0x3a504d(0xf1)](_0x12fefe['webhookEvents'])}};}async[a46_0x3a8aad(0x101)](_0x3fc3c1,_0x10408f){const _0x54541d=a46_0x3a8aad;await this[_0x54541d(0xf0)](_0x3fc3c1);const _0x1c9801={};_0x10408f['webhookUrl']!==undefined&&(_0x1c9801[_0x54541d(0xfe)]=_0x10408f['webhookUrl']||null),_0x10408f[_0x54541d(0xfd)]!==undefined&&(_0x1c9801['webhookEvents']=_0x10408f[_0x54541d(0xfd)]||[]),await database_1[_0x54541d(0x106)][_0x54541d(0xf6)]['update']({'where':{'shopId':_0x3fc3c1},'data':_0x1c9801});}async[a46_0x3a8aad(0xf0)](_0x374c28){const _0x92a979=a46_0x3a8aad,_0x54d13d=await database_1['default'][_0x92a979(0xf6)][_0x92a979(0x105)]({'where':{'shopId':_0x374c28}});!_0x54d13d&&await database_1[_0x92a979(0x106)][_0x92a979(0xf6)][_0x92a979(0x100)]({'data':{'shopId':_0x374c28}});}}function a46_0x24a7(){const _0x1bae1f=['1859760lapVsu','shopSettings','1105234ieKSrF','3tGLyTK','isArray','257080QDVgkW','parse','765443sXUOcm','webhookEvents','webhookUrl','string','create','updateWebhookSettings','__esModule','../config/database','112pHPoOY','findUnique','default','Shop\x20settings\x20not\x20found','getIntegrations','7711540xyqoeu','2814435ZCnfcP','2480bQtdZX','__importDefault','ensureSettingsExist','parseWebhookEvents','212yeJiyS','IntegrationsService','defineProperty'];a46_0x24a7=function(){return _0x1bae1f;};return a46_0x24a7();}exports[a46_0x3a8aad(0xf3)]=IntegrationsService;