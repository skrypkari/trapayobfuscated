'use strict';const a43_0x39196a=a43_0x2ab2;(function(_0x43864f,_0xfcae90){const _0x1b0057=a43_0x2ab2,_0x257365=_0x43864f();while(!![]){try{const _0x287ac1=-parseInt(_0x1b0057(0x12a))/0x1*(parseInt(_0x1b0057(0x13d))/0x2)+-parseInt(_0x1b0057(0x125))/0x3+parseInt(_0x1b0057(0x138))/0x4+parseInt(_0x1b0057(0x129))/0x5+-parseInt(_0x1b0057(0x134))/0x6+parseInt(_0x1b0057(0x12b))/0x7*(-parseInt(_0x1b0057(0x13b))/0x8)+parseInt(_0x1b0057(0x12d))/0x9;if(_0x287ac1===_0xfcae90)break;else _0x257365['push'](_0x257365['shift']());}catch(_0x397fc7){_0x257365['push'](_0x257365['shift']());}}}(a43_0x986b,0x93882));function a43_0x986b(){const _0x2c822c=['getIntegrations','1288tsoDVL','ensureSettingsExist','2462460HYlNGl','parseWebhookEvents','parse','Shop\x20settings\x20not\x20found','2264135wONOCi','65NWygdK','1463203mXMHmU','IntegrationsService','18453879IvDAKs','default','webhookEvents','defineProperty','__esModule','__importDefault','findUnique','2802504lYrotg','webhookUrl','../config/database','shopSettings','1903764pkbmhU','string','create','40tyuGyP'];a43_0x986b=function(){return _0x2c822c;};return a43_0x986b();}function a43_0x2ab2(_0x1a8dd3,_0x2eee33){const _0x986b82=a43_0x986b();return a43_0x2ab2=function(_0x2ab212,_0x287ace){_0x2ab212=_0x2ab212-0x125;let _0x995609=_0x986b82[_0x2ab212];return _0x995609;},a43_0x2ab2(_0x1a8dd3,_0x2eee33);}var __importDefault=this&&this[a43_0x39196a(0x132)]||function(_0x54d502){const _0x106e9e=a43_0x39196a;return _0x54d502&&_0x54d502[_0x106e9e(0x131)]?_0x54d502:{'default':_0x54d502};};Object[a43_0x39196a(0x130)](exports,a43_0x39196a(0x131),{'value':!![]}),exports[a43_0x39196a(0x12c)]=void 0x0;const database_1=__importDefault(require(a43_0x39196a(0x136)));class IntegrationsService{[a43_0x39196a(0x126)](_0x4b64b9){const _0x46c056=a43_0x39196a;if(!_0x4b64b9)return[];if(Array['isArray'](_0x4b64b9))return _0x4b64b9;if(typeof _0x4b64b9===_0x46c056(0x139))try{const _0x9479a3=JSON[_0x46c056(0x127)](_0x4b64b9);return Array['isArray'](_0x9479a3)?_0x9479a3:[];}catch{return[];}return[];}async[a43_0x39196a(0x13c)](_0xf9c240){const _0x34819f=a43_0x39196a;await this['ensureSettingsExist'](_0xf9c240);const _0x321185=await database_1[_0x34819f(0x12e)]['shopSettings'][_0x34819f(0x133)]({'where':{'shopId':_0xf9c240},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x321185)throw new Error(_0x34819f(0x128));return{'webhook':{'url':_0x321185[_0x34819f(0x135)],'events':this[_0x34819f(0x126)](_0x321185[_0x34819f(0x12f)])}};}async['updateWebhookSettings'](_0x5be53f,_0x284b8b){const _0x42279c=a43_0x39196a;await this[_0x42279c(0x13e)](_0x5be53f);const _0x1c0320={};_0x284b8b[_0x42279c(0x135)]!==undefined&&(_0x1c0320[_0x42279c(0x135)]=_0x284b8b[_0x42279c(0x135)]||null),_0x284b8b[_0x42279c(0x12f)]!==undefined&&(_0x1c0320[_0x42279c(0x12f)]=_0x284b8b[_0x42279c(0x12f)]||[]),await database_1[_0x42279c(0x12e)][_0x42279c(0x137)]['update']({'where':{'shopId':_0x5be53f},'data':_0x1c0320});}async[a43_0x39196a(0x13e)](_0x5a32e5){const _0x5af81f=a43_0x39196a,_0x569723=await database_1[_0x5af81f(0x12e)]['shopSettings']['findUnique']({'where':{'shopId':_0x5a32e5}});!_0x569723&&await database_1[_0x5af81f(0x12e)][_0x5af81f(0x137)][_0x5af81f(0x13a)]({'data':{'shopId':_0x5a32e5}});}}exports['IntegrationsService']=IntegrationsService;