'use strict';const a48_0x3c0c2e=a48_0x20ba;(function(_0x16fa4c,_0x127984){const _0x4b0184=a48_0x20ba,_0x21b6a2=_0x16fa4c();while(!![]){try{const _0x3f1a58=parseInt(_0x4b0184(0x1ab))/0x1+-parseInt(_0x4b0184(0x192))/0x2+parseInt(_0x4b0184(0x195))/0x3+-parseInt(_0x4b0184(0x196))/0x4*(-parseInt(_0x4b0184(0x198))/0x5)+parseInt(_0x4b0184(0x1a2))/0x6*(-parseInt(_0x4b0184(0x1aa))/0x7)+-parseInt(_0x4b0184(0x199))/0x8+-parseInt(_0x4b0184(0x197))/0x9*(-parseInt(_0x4b0184(0x1a4))/0xa);if(_0x3f1a58===_0x127984)break;else _0x21b6a2['push'](_0x21b6a2['shift']());}catch(_0x137c96){_0x21b6a2['push'](_0x21b6a2['shift']());}}}(a48_0xef42,0xad056));var __importDefault=this&&this[a48_0x3c0c2e(0x1a6)]||function(_0x4cdcd4){const _0x2f24f4=a48_0x3c0c2e;return _0x4cdcd4&&_0x4cdcd4[_0x2f24f4(0x1a0)]?_0x4cdcd4:{'default':_0x4cdcd4};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a48_0x3c0c2e(0x19a)]=void 0x0;const database_1=__importDefault(require(a48_0x3c0c2e(0x19e)));function a48_0xef42(){const _0x3cdb8e=['findUnique','default','2471157awJgoS','262820AUJnLH','306TthcUc','5VzAdIN','10893600aakQQY','IntegrationsService','isArray','string','updateWebhookSettings','../config/database','ensureSettingsExist','__esModule','getIntegrations','20982mjrKmo','parse','256010gMBmMT','Shop\x20settings\x20not\x20found','__importDefault','shopSettings','parseWebhookEvents','create','679sjsMBE','988131imZkoB','webhookEvents','676772gDjQFb'];a48_0xef42=function(){return _0x3cdb8e;};return a48_0xef42();}function a48_0x20ba(_0x8c8529,_0x5a3ffc){const _0xef42c0=a48_0xef42();return a48_0x20ba=function(_0x20ba03,_0xd6044a){_0x20ba03=_0x20ba03-0x191;let _0x3147dd=_0xef42c0[_0x20ba03];return _0x3147dd;},a48_0x20ba(_0x8c8529,_0x5a3ffc);}class IntegrationsService{[a48_0x3c0c2e(0x1a8)](_0x25c42b){const _0x14200f=a48_0x3c0c2e;if(!_0x25c42b)return[];if(Array[_0x14200f(0x19b)](_0x25c42b))return _0x25c42b;if(typeof _0x25c42b===_0x14200f(0x19c))try{const _0x166d67=JSON[_0x14200f(0x1a3)](_0x25c42b);return Array[_0x14200f(0x19b)](_0x166d67)?_0x166d67:[];}catch{return[];}return[];}async[a48_0x3c0c2e(0x1a1)](_0x36b2a6){const _0x46298c=a48_0x3c0c2e;await this[_0x46298c(0x19f)](_0x36b2a6);const _0x35dbd3=await database_1[_0x46298c(0x194)][_0x46298c(0x1a7)][_0x46298c(0x193)]({'where':{'shopId':_0x36b2a6},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x35dbd3)throw new Error(_0x46298c(0x1a5));return{'webhook':{'url':_0x35dbd3['webhookUrl'],'events':this[_0x46298c(0x1a8)](_0x35dbd3['webhookEvents'])}};}async[a48_0x3c0c2e(0x19d)](_0x7eb6f2,_0x1f0505){const _0x461242=a48_0x3c0c2e;await this[_0x461242(0x19f)](_0x7eb6f2);const _0x3dedac={};_0x1f0505['webhookUrl']!==undefined&&(_0x3dedac['webhookUrl']=_0x1f0505['webhookUrl']||null),_0x1f0505['webhookEvents']!==undefined&&(_0x3dedac[_0x461242(0x191)]=_0x1f0505[_0x461242(0x191)]||[]),await database_1['default'][_0x461242(0x1a7)]['update']({'where':{'shopId':_0x7eb6f2},'data':_0x3dedac});}async[a48_0x3c0c2e(0x19f)](_0x5c88b6){const _0x9c0a5d=a48_0x3c0c2e,_0x38f2d6=await database_1[_0x9c0a5d(0x194)][_0x9c0a5d(0x1a7)][_0x9c0a5d(0x193)]({'where':{'shopId':_0x5c88b6}});!_0x38f2d6&&await database_1[_0x9c0a5d(0x194)][_0x9c0a5d(0x1a7)][_0x9c0a5d(0x1a9)]({'data':{'shopId':_0x5c88b6}});}}exports[a48_0x3c0c2e(0x19a)]=IntegrationsService;