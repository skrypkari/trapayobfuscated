'use strict';const a54_0x529a00=a54_0x5dc2;(function(_0x9cd9d6,_0x461dbd){const _0x44599a=a54_0x5dc2,_0x36f222=_0x9cd9d6();while(!![]){try{const _0x304d20=parseInt(_0x44599a(0xf1))/0x1+parseInt(_0x44599a(0xfb))/0x2+parseInt(_0x44599a(0xf4))/0x3*(parseInt(_0x44599a(0xfe))/0x4)+parseInt(_0x44599a(0xf8))/0x5*(-parseInt(_0x44599a(0xe3))/0x6)+-parseInt(_0x44599a(0xf6))/0x7+parseInt(_0x44599a(0xe4))/0x8+-parseInt(_0x44599a(0xee))/0x9*(-parseInt(_0x44599a(0xfd))/0xa);if(_0x304d20===_0x461dbd)break;else _0x36f222['push'](_0x36f222['shift']());}catch(_0x5db9d1){_0x36f222['push'](_0x36f222['shift']());}}}(a54_0x42aa,0x4a156));var __importDefault=this&&this[a54_0x529a00(0xf5)]||function(_0x1634b6){const _0x259337=a54_0x529a00;return _0x1634b6&&_0x1634b6[_0x259337(0xf2)]?_0x1634b6:{'default':_0x1634b6};};function a54_0x5dc2(_0x28edea,_0x569cb4){const _0x42aad1=a54_0x42aa();return a54_0x5dc2=function(_0x5dc2d2,_0x2a7fd1){_0x5dc2d2=_0x5dc2d2-0xe2;let _0x34e4be=_0x42aad1[_0x5dc2d2];return _0x34e4be;},a54_0x5dc2(_0x28edea,_0x569cb4);}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a54_0x529a00(0xe6)]=void 0x0;const database_1=__importDefault(require(a54_0x529a00(0xf3)));function a54_0x42aa(){const _0x424318=['parse','ensureSettingsExist','create','getIntegrations','string','isArray','update','6921tVaKME','parseWebhookEvents','shopSettings','39634ZqQBXo','__esModule','../config/database','3nkGsSK','__importDefault','1928402tZcPRZ','webhookUrl','8555obDSZq','webhookEvents','default','944906SxSRrI','Shop\x20settings\x20not\x20found','3690vLflkn','466540nvdCgQ','updateWebhookSettings','1716rKESvG','1246360flCbqx','findUnique','IntegrationsService'];a54_0x42aa=function(){return _0x424318;};return a54_0x42aa();}class IntegrationsService{[a54_0x529a00(0xef)](_0x35c7b1){const _0x3dc59b=a54_0x529a00;if(!_0x35c7b1)return[];if(Array[_0x3dc59b(0xec)](_0x35c7b1))return _0x35c7b1;if(typeof _0x35c7b1===_0x3dc59b(0xeb))try{const _0x323f6e=JSON[_0x3dc59b(0xe7)](_0x35c7b1);return Array['isArray'](_0x323f6e)?_0x323f6e:[];}catch{return[];}return[];}async[a54_0x529a00(0xea)](_0x478f5f){const _0x1fd635=a54_0x529a00;await this[_0x1fd635(0xe8)](_0x478f5f);const _0x559cba=await database_1[_0x1fd635(0xfa)][_0x1fd635(0xf0)]['findUnique']({'where':{'shopId':_0x478f5f},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x559cba)throw new Error(_0x1fd635(0xfc));return{'webhook':{'url':_0x559cba[_0x1fd635(0xf7)],'events':this['parseWebhookEvents'](_0x559cba['webhookEvents'])}};}async[a54_0x529a00(0xe2)](_0x2928ab,_0x247fc3){const _0x1a3972=a54_0x529a00;await this[_0x1a3972(0xe8)](_0x2928ab);const _0x1f9a7c={};_0x247fc3['webhookUrl']!==undefined&&(_0x1f9a7c[_0x1a3972(0xf7)]=_0x247fc3[_0x1a3972(0xf7)]||null),_0x247fc3[_0x1a3972(0xf9)]!==undefined&&(_0x1f9a7c[_0x1a3972(0xf9)]=_0x247fc3[_0x1a3972(0xf9)]||[]),await database_1['default'][_0x1a3972(0xf0)][_0x1a3972(0xed)]({'where':{'shopId':_0x2928ab},'data':_0x1f9a7c});}async[a54_0x529a00(0xe8)](_0xfc782b){const _0x1a7779=a54_0x529a00,_0x147b11=await database_1[_0x1a7779(0xfa)][_0x1a7779(0xf0)][_0x1a7779(0xe5)]({'where':{'shopId':_0xfc782b}});!_0x147b11&&await database_1[_0x1a7779(0xfa)][_0x1a7779(0xf0)][_0x1a7779(0xe9)]({'data':{'shopId':_0xfc782b}});}}exports['IntegrationsService']=IntegrationsService;