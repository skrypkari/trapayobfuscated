'use strict';const a50_0x5f057b=a50_0x1869;(function(_0x148785,_0x27ab4f){const _0x151983=a50_0x1869,_0x79e610=_0x148785();while(!![]){try{const _0x2594c4=-parseInt(_0x151983(0xd1))/0x1+-parseInt(_0x151983(0xd2))/0x2*(parseInt(_0x151983(0xc0))/0x3)+-parseInt(_0x151983(0xcb))/0x4*(-parseInt(_0x151983(0xbe))/0x5)+-parseInt(_0x151983(0xd0))/0x6+-parseInt(_0x151983(0xce))/0x7+-parseInt(_0x151983(0xc4))/0x8*(-parseInt(_0x151983(0xc3))/0x9)+-parseInt(_0x151983(0xc2))/0xa*(-parseInt(_0x151983(0xbd))/0xb);if(_0x2594c4===_0x27ab4f)break;else _0x79e610['push'](_0x79e610['shift']());}catch(_0x155a7c){_0x79e610['push'](_0x79e610['shift']());}}}(a50_0x22af,0xdb0b8));function a50_0x1869(_0x36fa11,_0x29a60c){const _0x22afbf=a50_0x22af();return a50_0x1869=function(_0x186974,_0x1b0d59){_0x186974=_0x186974-0xba;let _0xacbce5=_0x22afbf[_0x186974];return _0xacbce5;},a50_0x1869(_0x36fa11,_0x29a60c);}var __importDefault=this&&this['__importDefault']||function(_0x2f6117){const _0x1f5fa1=a50_0x1869;return _0x2f6117&&_0x2f6117[_0x1f5fa1(0xc7)]?_0x2f6117:{'default':_0x2f6117};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a50_0x5f057b(0xcd)]=void 0x0;const database_1=__importDefault(require(a50_0x5f057b(0xc6)));class IntegrationsService{[a50_0x5f057b(0xc9)](_0x5732c6){const _0x3a66f0=a50_0x5f057b;if(!_0x5732c6)return[];if(Array[_0x3a66f0(0xc8)](_0x5732c6))return _0x5732c6;if(typeof _0x5732c6==='string')try{const _0x29d5eb=JSON[_0x3a66f0(0xbb)](_0x5732c6);return Array['isArray'](_0x29d5eb)?_0x29d5eb:[];}catch{return[];}return[];}async[a50_0x5f057b(0xbc)](_0x417b08){const _0x3988f4=a50_0x5f057b;await this[_0x3988f4(0xcf)](_0x417b08);const _0xaa0f1a=await database_1[_0x3988f4(0xba)]['shopSettings']['findUnique']({'where':{'shopId':_0x417b08},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0xaa0f1a)throw new Error('Shop\x20settings\x20not\x20found');return{'webhook':{'url':_0xaa0f1a['webhookUrl'],'events':this[_0x3988f4(0xc9)](_0xaa0f1a[_0x3988f4(0xca)])}};}async[a50_0x5f057b(0xcc)](_0x4c3615,_0x2eda35){const _0x224097=a50_0x5f057b;await this[_0x224097(0xcf)](_0x4c3615);const _0x1c8220={};_0x2eda35[_0x224097(0xc1)]!==undefined&&(_0x1c8220['webhookUrl']=_0x2eda35[_0x224097(0xc1)]||null),_0x2eda35[_0x224097(0xca)]!==undefined&&(_0x1c8220[_0x224097(0xca)]=_0x2eda35[_0x224097(0xca)]||[]),await database_1[_0x224097(0xba)][_0x224097(0xbf)][_0x224097(0xc5)]({'where':{'shopId':_0x4c3615},'data':_0x1c8220});}async[a50_0x5f057b(0xcf)](_0x4eb433){const _0x4ed00f=a50_0x5f057b,_0x1b9ae8=await database_1['default'][_0x4ed00f(0xbf)]['findUnique']({'where':{'shopId':_0x4eb433}});!_0x1b9ae8&&await database_1[_0x4ed00f(0xba)][_0x4ed00f(0xbf)]['create']({'data':{'shopId':_0x4eb433}});}}function a50_0x22af(){const _0x54bd63=['472829wUMNZL','ensureSettingsExist','10319358RKNmFP','765979txhFqE','2DVUoRw','default','parse','getIntegrations','121110tfDiBh','6725fCspFd','shopSettings','1783563TolRaH','webhookUrl','1580OAgfrm','4581nhrYtD','9136tWBpmB','update','../config/database','__esModule','isArray','parseWebhookEvents','webhookEvents','5128mVXVFt','updateWebhookSettings','IntegrationsService'];a50_0x22af=function(){return _0x54bd63;};return a50_0x22af();}exports[a50_0x5f057b(0xcd)]=IntegrationsService;