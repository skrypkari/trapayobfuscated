'use strict';const a42_0x2d1584=a42_0x2891;(function(_0x335fb3,_0x228627){const _0x3cc65f=a42_0x2891,_0x48dc75=_0x335fb3();while(!![]){try{const _0x338beb=-parseInt(_0x3cc65f(0x71))/0x1*(-parseInt(_0x3cc65f(0x65))/0x2)+parseInt(_0x3cc65f(0x6d))/0x3*(parseInt(_0x3cc65f(0x6c))/0x4)+parseInt(_0x3cc65f(0x7a))/0x5*(-parseInt(_0x3cc65f(0x75))/0x6)+parseInt(_0x3cc65f(0x79))/0x7*(parseInt(_0x3cc65f(0x73))/0x8)+-parseInt(_0x3cc65f(0x76))/0x9*(-parseInt(_0x3cc65f(0x7c))/0xa)+-parseInt(_0x3cc65f(0x81))/0xb*(-parseInt(_0x3cc65f(0x7e))/0xc)+parseInt(_0x3cc65f(0x80))/0xd*(-parseInt(_0x3cc65f(0x83))/0xe);if(_0x338beb===_0x228627)break;else _0x48dc75['push'](_0x48dc75['shift']());}catch(_0xd184b8){_0x48dc75['push'](_0x48dc75['shift']());}}}(a42_0x40ff,0xc5904));function a42_0x2891(_0x3ccad7,_0x3bd4ae){const _0x40ff0a=a42_0x40ff();return a42_0x2891=function(_0x2891cc,_0x57222d){_0x2891cc=_0x2891cc-0x65;let _0x4392b6=_0x40ff0a[_0x2891cc];return _0x4392b6;},a42_0x2891(_0x3ccad7,_0x3bd4ae);}function a42_0x40ff(){const _0x4bab74=['webhookUrl','8DywSQa','findUnique','906SefCSC','122553BmdOqt','shopSettings','defineProperty','6560155BcKeAd','47975LEwuKy','string','930GSxBZg','isArray','24UePiJi','__esModule','39eVEjcA','6729206ZVCJbA','Shop\x20settings\x20not\x20found','12839358xIvGsn','2YKtRhb','webhookEvents','default','IntegrationsService','parseWebhookEvents','../config/database','update','8dxZdbN','1589070gZQneg','updateWebhookSettings','ensureSettingsExist','__importDefault','522938FtWBVK'];a42_0x40ff=function(){return _0x4bab74;};return a42_0x40ff();}var __importDefault=this&&this[a42_0x2d1584(0x70)]||function(_0xa9a2ef){const _0x49f219=a42_0x2d1584;return _0xa9a2ef&&_0xa9a2ef[_0x49f219(0x7f)]?_0xa9a2ef:{'default':_0xa9a2ef};};Object[a42_0x2d1584(0x78)](exports,a42_0x2d1584(0x7f),{'value':!![]}),exports[a42_0x2d1584(0x68)]=void 0x0;const database_1=__importDefault(require(a42_0x2d1584(0x6a)));class IntegrationsService{[a42_0x2d1584(0x69)](_0x4df4c8){const _0x3039c9=a42_0x2d1584;if(!_0x4df4c8)return[];if(Array[_0x3039c9(0x7d)](_0x4df4c8))return _0x4df4c8;if(typeof _0x4df4c8===_0x3039c9(0x7b))try{const _0x17a358=JSON['parse'](_0x4df4c8);return Array['isArray'](_0x17a358)?_0x17a358:[];}catch{return[];}return[];}async['getIntegrations'](_0x36c451){const _0x33b432=a42_0x2d1584;await this[_0x33b432(0x6f)](_0x36c451);const _0x1e8674=await database_1[_0x33b432(0x67)][_0x33b432(0x77)][_0x33b432(0x74)]({'where':{'shopId':_0x36c451},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x1e8674)throw new Error(_0x33b432(0x82));return{'webhook':{'url':_0x1e8674[_0x33b432(0x72)],'events':this[_0x33b432(0x69)](_0x1e8674['webhookEvents'])}};}async[a42_0x2d1584(0x6e)](_0x2ad5cd,_0x25338a){const _0x2ad6fc=a42_0x2d1584;await this[_0x2ad6fc(0x6f)](_0x2ad5cd);const _0x3973da={};_0x25338a[_0x2ad6fc(0x72)]!==undefined&&(_0x3973da[_0x2ad6fc(0x72)]=_0x25338a[_0x2ad6fc(0x72)]||null),_0x25338a[_0x2ad6fc(0x66)]!==undefined&&(_0x3973da[_0x2ad6fc(0x66)]=_0x25338a['webhookEvents']||[]),await database_1['default'][_0x2ad6fc(0x77)][_0x2ad6fc(0x6b)]({'where':{'shopId':_0x2ad5cd},'data':_0x3973da});}async[a42_0x2d1584(0x6f)](_0x4b5938){const _0x1a54bb=a42_0x2d1584,_0x279c10=await database_1[_0x1a54bb(0x67)][_0x1a54bb(0x77)][_0x1a54bb(0x74)]({'where':{'shopId':_0x4b5938}});!_0x279c10&&await database_1[_0x1a54bb(0x67)][_0x1a54bb(0x77)]['create']({'data':{'shopId':_0x4b5938}});}}exports[a42_0x2d1584(0x68)]=IntegrationsService;