'use strict';const a48_0x33cfd8=a48_0x4eab;(function(_0x51562,_0x4b0529){const _0xc68c85=a48_0x4eab,_0x99e1ef=_0x51562();while(!![]){try{const _0x452ecf=parseInt(_0xc68c85(0xfe))/0x1+parseInt(_0xc68c85(0xf6))/0x2*(parseInt(_0xc68c85(0x100))/0x3)+-parseInt(_0xc68c85(0xf7))/0x4*(-parseInt(_0xc68c85(0x106))/0x5)+-parseInt(_0xc68c85(0x10d))/0x6*(-parseInt(_0xc68c85(0x110))/0x7)+-parseInt(_0xc68c85(0xf4))/0x8*(-parseInt(_0xc68c85(0x108))/0x9)+parseInt(_0xc68c85(0x10b))/0xa*(-parseInt(_0xc68c85(0xfb))/0xb)+-parseInt(_0xc68c85(0x102))/0xc;if(_0x452ecf===_0x4b0529)break;else _0x99e1ef['push'](_0x99e1ef['shift']());}catch(_0x4c0965){_0x99e1ef['push'](_0x99e1ef['shift']());}}}(a48_0x3aba,0xe1250));var __importDefault=this&&this[a48_0x33cfd8(0xfd)]||function(_0x411b06){return _0x411b06&&_0x411b06['__esModule']?_0x411b06:{'default':_0x411b06};};Object['defineProperty'](exports,a48_0x33cfd8(0x107),{'value':!![]}),exports[a48_0x33cfd8(0xfa)]=void 0x0;function a48_0x3aba(){const _0x2b1ced=['parse','11406fYjtKN','update','webhookEvents','3087BpPffV','24iqoFjQ','webhookUrl','93284FfGZTe','6837404trfReG','getIntegrations','parseWebhookEvents','IntegrationsService','11pbjObQ','isArray','__importDefault','1548971tceRns','string','39PYypbR','shopSettings','49965336HjxNJe','Shop\x20settings\x20not\x20found','ensureSettingsExist','default','5NrDhEi','__esModule','2483802XAyXrZ','findUnique','../config/database','4449730eHHJAZ'];a48_0x3aba=function(){return _0x2b1ced;};return a48_0x3aba();}function a48_0x4eab(_0x120574,_0x3f8d87){const _0x3aba81=a48_0x3aba();return a48_0x4eab=function(_0x4eab47,_0xcd0c6f){_0x4eab47=_0x4eab47-0xf4;let _0x2e3604=_0x3aba81[_0x4eab47];return _0x2e3604;},a48_0x4eab(_0x120574,_0x3f8d87);}const database_1=__importDefault(require(a48_0x33cfd8(0x10a)));class IntegrationsService{[a48_0x33cfd8(0xf9)](_0x3e11f5){const _0x4619a2=a48_0x33cfd8;if(!_0x3e11f5)return[];if(Array['isArray'](_0x3e11f5))return _0x3e11f5;if(typeof _0x3e11f5===_0x4619a2(0xff))try{const _0x54a9e1=JSON[_0x4619a2(0x10c)](_0x3e11f5);return Array[_0x4619a2(0xfc)](_0x54a9e1)?_0x54a9e1:[];}catch{return[];}return[];}async[a48_0x33cfd8(0xf8)](_0x4f2d6d){const _0x2c1eba=a48_0x33cfd8;await this['ensureSettingsExist'](_0x4f2d6d);const _0x55be70=await database_1[_0x2c1eba(0x105)][_0x2c1eba(0x101)][_0x2c1eba(0x109)]({'where':{'shopId':_0x4f2d6d},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x55be70)throw new Error(_0x2c1eba(0x103));return{'webhook':{'url':_0x55be70[_0x2c1eba(0xf5)],'events':this['parseWebhookEvents'](_0x55be70['webhookEvents'])}};}async['updateWebhookSettings'](_0x215a1a,_0x52c782){const _0x4d09ec=a48_0x33cfd8;await this[_0x4d09ec(0x104)](_0x215a1a);const _0x3e0287={};_0x52c782[_0x4d09ec(0xf5)]!==undefined&&(_0x3e0287['webhookUrl']=_0x52c782[_0x4d09ec(0xf5)]||null),_0x52c782[_0x4d09ec(0x10f)]!==undefined&&(_0x3e0287[_0x4d09ec(0x10f)]=_0x52c782[_0x4d09ec(0x10f)]||[]),await database_1['default'][_0x4d09ec(0x101)][_0x4d09ec(0x10e)]({'where':{'shopId':_0x215a1a},'data':_0x3e0287});}async['ensureSettingsExist'](_0x27eea1){const _0x1da0f6=a48_0x33cfd8,_0x3edc33=await database_1[_0x1da0f6(0x105)][_0x1da0f6(0x101)][_0x1da0f6(0x109)]({'where':{'shopId':_0x27eea1}});!_0x3edc33&&await database_1[_0x1da0f6(0x105)][_0x1da0f6(0x101)]['create']({'data':{'shopId':_0x27eea1}});}}exports['IntegrationsService']=IntegrationsService;