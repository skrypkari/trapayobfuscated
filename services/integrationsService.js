'use strict';const a48_0x340263=a48_0x8411;(function(_0x3c4a95,_0x5e22b3){const _0x244aae=a48_0x8411,_0xb1e76d=_0x3c4a95();while(!![]){try{const _0x50a0d8=parseInt(_0x244aae(0x1eb))/0x1*(parseInt(_0x244aae(0x1f7))/0x2)+parseInt(_0x244aae(0x1fb))/0x3+-parseInt(_0x244aae(0x1f8))/0x4+-parseInt(_0x244aae(0x1f1))/0x5*(-parseInt(_0x244aae(0x1ea))/0x6)+-parseInt(_0x244aae(0x1fe))/0x7+parseInt(_0x244aae(0x1ec))/0x8*(parseInt(_0x244aae(0x1f2))/0x9)+-parseInt(_0x244aae(0x1fa))/0xa;if(_0x50a0d8===_0x5e22b3)break;else _0xb1e76d['push'](_0xb1e76d['shift']());}catch(_0x4434bf){_0xb1e76d['push'](_0xb1e76d['shift']());}}}(a48_0x2efe,0xa0382));function a48_0x8411(_0x18bad8,_0x29d446){const _0x2efec0=a48_0x2efe();return a48_0x8411=function(_0x8411ca,_0x5bd9f9){_0x8411ca=_0x8411ca-0x1e9;let _0x462c10=_0x2efec0[_0x8411ca];return _0x462c10;},a48_0x8411(_0x18bad8,_0x29d446);}function a48_0x2efe(){const _0x7f2c29=['__importDefault','update','webhookEvents','default','2004394AzzNYi','1955884YAqaBn','updateWebhookSettings','16109200XPcRQw','368928zzMGMZ','IntegrationsService','isArray','3587584HvntFI','../config/database','Shop\x20settings\x20not\x20found','shopSettings','__esModule','defineProperty','parseWebhookEvents','parse','1404egdAsq','1RGppAA','3176912HLpQNX','string','getIntegrations','ensureSettingsExist','webhookUrl','20345gnrJFX','27zxrMnq'];a48_0x2efe=function(){return _0x7f2c29;};return a48_0x2efe();}var __importDefault=this&&this[a48_0x340263(0x1f3)]||function(_0x1fed1d){const _0x5e7e65=a48_0x340263;return _0x1fed1d&&_0x1fed1d[_0x5e7e65(0x202)]?_0x1fed1d:{'default':_0x1fed1d};};Object[a48_0x340263(0x203)](exports,a48_0x340263(0x202),{'value':!![]}),exports[a48_0x340263(0x1fc)]=void 0x0;const database_1=__importDefault(require(a48_0x340263(0x1ff)));class IntegrationsService{[a48_0x340263(0x204)](_0x9396dc){const _0x32e028=a48_0x340263;if(!_0x9396dc)return[];if(Array[_0x32e028(0x1fd)](_0x9396dc))return _0x9396dc;if(typeof _0x9396dc===_0x32e028(0x1ed))try{const _0xf9f5d2=JSON[_0x32e028(0x1e9)](_0x9396dc);return Array[_0x32e028(0x1fd)](_0xf9f5d2)?_0xf9f5d2:[];}catch{return[];}return[];}async[a48_0x340263(0x1ee)](_0x3562ff){const _0x471378=a48_0x340263;await this['ensureSettingsExist'](_0x3562ff);const _0xa40486=await database_1['default']['shopSettings']['findUnique']({'where':{'shopId':_0x3562ff},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0xa40486)throw new Error(_0x471378(0x200));return{'webhook':{'url':_0xa40486[_0x471378(0x1f0)],'events':this[_0x471378(0x204)](_0xa40486[_0x471378(0x1f5)])}};}async[a48_0x340263(0x1f9)](_0x2bfae3,_0x1be46b){const _0x2ec896=a48_0x340263;await this[_0x2ec896(0x1ef)](_0x2bfae3);const _0x94f9f3={};_0x1be46b[_0x2ec896(0x1f0)]!==undefined&&(_0x94f9f3[_0x2ec896(0x1f0)]=_0x1be46b[_0x2ec896(0x1f0)]||null),_0x1be46b[_0x2ec896(0x1f5)]!==undefined&&(_0x94f9f3['webhookEvents']=_0x1be46b[_0x2ec896(0x1f5)]||[]),await database_1['default'][_0x2ec896(0x201)][_0x2ec896(0x1f4)]({'where':{'shopId':_0x2bfae3},'data':_0x94f9f3});}async[a48_0x340263(0x1ef)](_0x1349c2){const _0x59feeb=a48_0x340263,_0x145fa4=await database_1[_0x59feeb(0x1f6)]['shopSettings']['findUnique']({'where':{'shopId':_0x1349c2}});!_0x145fa4&&await database_1['default']['shopSettings']['create']({'data':{'shopId':_0x1349c2}});}}exports[a48_0x340263(0x1fc)]=IntegrationsService;