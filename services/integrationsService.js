'use strict';const a72_0x2cdd0f=a72_0xb1ce;(function(_0x24849c,_0x11594d){const _0x1dcc39=a72_0xb1ce,_0x1e2973=_0x24849c();while(!![]){try{const _0x4a266c=-parseInt(_0x1dcc39(0x8e))/0x1*(-parseInt(_0x1dcc39(0x93))/0x2)+-parseInt(_0x1dcc39(0x88))/0x3*(parseInt(_0x1dcc39(0x81))/0x4)+parseInt(_0x1dcc39(0x92))/0x5*(parseInt(_0x1dcc39(0x82))/0x6)+parseInt(_0x1dcc39(0x85))/0x7+parseInt(_0x1dcc39(0x7c))/0x8*(parseInt(_0x1dcc39(0x86))/0x9)+parseInt(_0x1dcc39(0x8c))/0xa*(parseInt(_0x1dcc39(0x97))/0xb)+parseInt(_0x1dcc39(0x7e))/0xc*(-parseInt(_0x1dcc39(0x96))/0xd);if(_0x4a266c===_0x11594d)break;else _0x1e2973['push'](_0x1e2973['shift']());}catch(_0x37855a){_0x1e2973['push'](_0x1e2973['shift']());}}}(a72_0x2cd9,0xab912));function a72_0x2cd9(){const _0x8df9ed=['updateWebhookSettings','webhookUrl','../config/database','2509700LKwosF','Shop\x20settings\x20not\x20found','13nrfUNN','findUnique','shopSettings','update','113825RIzvCv','213290BczYIa','parse','string','4800211AlIIIZ','11TGiBsU','create','__esModule','ensureSettingsExist','2052576uJaqQI','webhookEvents','36oSwfyj','__importDefault','IntegrationsService','1864484HpKrrN','174tpjlIA','isArray','parseWebhookEvents','2787106IsSlBO','18TIoNXI','default','9fKsHGs'];a72_0x2cd9=function(){return _0x8df9ed;};return a72_0x2cd9();}function a72_0xb1ce(_0x2b24d8,_0x4a8a28){_0x2b24d8=_0x2b24d8-0x7c;const _0x2cd953=a72_0x2cd9();let _0xb1ce27=_0x2cd953[_0x2b24d8];return _0xb1ce27;}var __importDefault=this&&this[a72_0x2cdd0f(0x7f)]||function(_0x285c3f){const _0x18a258=a72_0x2cdd0f;return _0x285c3f&&_0x285c3f[_0x18a258(0x99)]?_0x285c3f:{'default':_0x285c3f};};Object['defineProperty'](exports,a72_0x2cdd0f(0x99),{'value':!![]}),exports[a72_0x2cdd0f(0x80)]=void 0x0;const database_1=__importDefault(require(a72_0x2cdd0f(0x8b)));class IntegrationsService{[a72_0x2cdd0f(0x84)](_0x3491ec){const _0x444bdd=a72_0x2cdd0f;if(!_0x3491ec)return[];if(Array[_0x444bdd(0x83)](_0x3491ec))return _0x3491ec;if(typeof _0x3491ec===_0x444bdd(0x95))try{const _0x4aa990=JSON[_0x444bdd(0x94)](_0x3491ec);return Array[_0x444bdd(0x83)](_0x4aa990)?_0x4aa990:[];}catch{return[];}return[];}async['getIntegrations'](_0x151a59){const _0xafad7a=a72_0x2cdd0f;await this[_0xafad7a(0x9a)](_0x151a59);const _0x5b66b6=await database_1[_0xafad7a(0x87)][_0xafad7a(0x90)][_0xafad7a(0x8f)]({'where':{'shopId':_0x151a59},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x5b66b6)throw new Error(_0xafad7a(0x8d));return{'webhook':{'url':_0x5b66b6[_0xafad7a(0x8a)],'events':this['parseWebhookEvents'](_0x5b66b6[_0xafad7a(0x7d)])}};}async[a72_0x2cdd0f(0x89)](_0x5e05e4,_0xd26a05){const _0x2aa9f8=a72_0x2cdd0f;await this[_0x2aa9f8(0x9a)](_0x5e05e4);const _0x165eda={};_0xd26a05[_0x2aa9f8(0x8a)]!==undefined&&(_0x165eda[_0x2aa9f8(0x8a)]=_0xd26a05['webhookUrl']||null),_0xd26a05['webhookEvents']!==undefined&&(_0x165eda[_0x2aa9f8(0x7d)]=_0xd26a05[_0x2aa9f8(0x7d)]||[]),await database_1[_0x2aa9f8(0x87)][_0x2aa9f8(0x90)][_0x2aa9f8(0x91)]({'where':{'shopId':_0x5e05e4},'data':_0x165eda});}async[a72_0x2cdd0f(0x9a)](_0x258011){const _0x1ed62c=a72_0x2cdd0f,_0x2b581c=await database_1[_0x1ed62c(0x87)][_0x1ed62c(0x90)][_0x1ed62c(0x8f)]({'where':{'shopId':_0x258011}});!_0x2b581c&&await database_1[_0x1ed62c(0x87)]['shopSettings'][_0x1ed62c(0x98)]({'data':{'shopId':_0x258011}});}}exports['IntegrationsService']=IntegrationsService;