'use strict';const a43_0x2c96f9=a43_0x3a8e;function a43_0x3a8e(_0x25ba4b,_0x188f9e){const _0xd33e65=a43_0xd33e();return a43_0x3a8e=function(_0x3a8e91,_0x1742c2){_0x3a8e91=_0x3a8e91-0x167;let _0x1323ef=_0xd33e65[_0x3a8e91];return _0x1323ef;},a43_0x3a8e(_0x25ba4b,_0x188f9e);}function a43_0xd33e(){const _0x4aaafb=['ensureSettingsExist','string','findUnique','updateWebhookSettings','../config/database','42jjWIgz','1396lbupbm','webhookEvents','parse','565UDqbph','5610200qUwLZJ','131999lSIZCx','65268kHzrTt','create','webhookUrl','default','48872tvVYNS','70115NqJucr','__esModule','210pNpMXs','shopSettings','Shop\x20settings\x20not\x20found','IntegrationsService','9HivLpe','__importDefault','13598695VdSxYf','parseWebhookEvents','defineProperty'];a43_0xd33e=function(){return _0x4aaafb;};return a43_0xd33e();}(function(_0x1a6d86,_0x22af07){const _0x5ea69b=a43_0x3a8e,_0x5c42d3=_0x1a6d86();while(!![]){try{const _0x1dff57=-parseInt(_0x5ea69b(0x16d))/0x1+parseInt(_0x5ea69b(0x17d))/0x2*(parseInt(_0x5ea69b(0x168))/0x3)+-parseInt(_0x5ea69b(0x17e))/0x4*(parseInt(_0x5ea69b(0x181))/0x5)+-parseInt(_0x5ea69b(0x16f))/0x6*(parseInt(_0x5ea69b(0x167))/0x7)+-parseInt(_0x5ea69b(0x16c))/0x8*(parseInt(_0x5ea69b(0x173))/0x9)+-parseInt(_0x5ea69b(0x182))/0xa+parseInt(_0x5ea69b(0x175))/0xb;if(_0x1dff57===_0x22af07)break;else _0x5c42d3['push'](_0x5c42d3['shift']());}catch(_0x964cb9){_0x5c42d3['push'](_0x5c42d3['shift']());}}}(a43_0xd33e,0x5705d));var __importDefault=this&&this[a43_0x2c96f9(0x174)]||function(_0x129147){const _0xc54de2=a43_0x2c96f9;return _0x129147&&_0x129147[_0xc54de2(0x16e)]?_0x129147:{'default':_0x129147};};Object[a43_0x2c96f9(0x177)](exports,a43_0x2c96f9(0x16e),{'value':!![]}),exports[a43_0x2c96f9(0x172)]=void 0x0;const database_1=__importDefault(require(a43_0x2c96f9(0x17c)));class IntegrationsService{[a43_0x2c96f9(0x176)](_0x281865){const _0x3f015b=a43_0x2c96f9;if(!_0x281865)return[];if(Array['isArray'](_0x281865))return _0x281865;if(typeof _0x281865===_0x3f015b(0x179))try{const _0x207df5=JSON[_0x3f015b(0x180)](_0x281865);return Array['isArray'](_0x207df5)?_0x207df5:[];}catch{return[];}return[];}async['getIntegrations'](_0x2fe27d){const _0x203faa=a43_0x2c96f9;await this[_0x203faa(0x178)](_0x2fe27d);const _0x41663e=await database_1[_0x203faa(0x16b)][_0x203faa(0x170)][_0x203faa(0x17a)]({'where':{'shopId':_0x2fe27d},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x41663e)throw new Error(_0x203faa(0x171));return{'webhook':{'url':_0x41663e[_0x203faa(0x16a)],'events':this['parseWebhookEvents'](_0x41663e['webhookEvents'])}};}async[a43_0x2c96f9(0x17b)](_0x578466,_0xf1e223){const _0x424c99=a43_0x2c96f9;await this[_0x424c99(0x178)](_0x578466);const _0x3ac9e6={};_0xf1e223[_0x424c99(0x16a)]!==undefined&&(_0x3ac9e6['webhookUrl']=_0xf1e223['webhookUrl']||null),_0xf1e223[_0x424c99(0x17f)]!==undefined&&(_0x3ac9e6[_0x424c99(0x17f)]=_0xf1e223['webhookEvents']||[]),await database_1[_0x424c99(0x16b)][_0x424c99(0x170)]['update']({'where':{'shopId':_0x578466},'data':_0x3ac9e6});}async[a43_0x2c96f9(0x178)](_0x5e2b19){const _0x37a313=a43_0x2c96f9,_0x25b527=await database_1[_0x37a313(0x16b)]['shopSettings'][_0x37a313(0x17a)]({'where':{'shopId':_0x5e2b19}});!_0x25b527&&await database_1[_0x37a313(0x16b)]['shopSettings'][_0x37a313(0x169)]({'data':{'shopId':_0x5e2b19}});}}exports[a43_0x2c96f9(0x172)]=IntegrationsService;