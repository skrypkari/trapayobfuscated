'use strict';const a43_0x5d624e=a43_0x3a3c;(function(_0x5268e6,_0x2a03af){const _0x203cd3=a43_0x3a3c,_0xfbe4f4=_0x5268e6();while(!![]){try{const _0x2384c7=-parseInt(_0x203cd3(0x1e0))/0x1+-parseInt(_0x203cd3(0x1dc))/0x2+-parseInt(_0x203cd3(0x1e7))/0x3*(parseInt(_0x203cd3(0x1db))/0x4)+parseInt(_0x203cd3(0x1e4))/0x5+parseInt(_0x203cd3(0x1e3))/0x6+parseInt(_0x203cd3(0x1df))/0x7+parseInt(_0x203cd3(0x1d4))/0x8*(parseInt(_0x203cd3(0x1e9))/0x9);if(_0x2384c7===_0x2a03af)break;else _0xfbe4f4['push'](_0xfbe4f4['shift']());}catch(_0x5cca75){_0xfbe4f4['push'](_0xfbe4f4['shift']());}}}(a43_0x4208,0x692e8));var __importDefault=this&&this[a43_0x5d624e(0x1d5)]||function(_0x27acbe){return _0x27acbe&&_0x27acbe['__esModule']?_0x27acbe:{'default':_0x27acbe};};Object['defineProperty'](exports,a43_0x5d624e(0x1d3),{'value':!![]}),exports['IntegrationsService']=void 0x0;const database_1=__importDefault(require('../config/database'));class IntegrationsService{[a43_0x5d624e(0x1d1)](_0x553692){const _0x484b5a=a43_0x5d624e;if(!_0x553692)return[];if(Array['isArray'](_0x553692))return _0x553692;if(typeof _0x553692===_0x484b5a(0x1d8))try{const _0x1faee8=JSON['parse'](_0x553692);return Array[_0x484b5a(0x1e8)](_0x1faee8)?_0x1faee8:[];}catch{return[];}return[];}async[a43_0x5d624e(0x1da)](_0x376d9d){const _0x5490ff=a43_0x5d624e;await this[_0x5490ff(0x1d7)](_0x376d9d);const _0x134831=await database_1[_0x5490ff(0x1e6)]['shopSettings'][_0x5490ff(0x1d9)]({'where':{'shopId':_0x376d9d},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x134831)throw new Error(_0x5490ff(0x1e2));return{'webhook':{'url':_0x134831[_0x5490ff(0x1de)],'events':this[_0x5490ff(0x1d1)](_0x134831[_0x5490ff(0x1d6)])}};}async['updateWebhookSettings'](_0x2859ed,_0x36a90d){const _0x978fd9=a43_0x5d624e;await this[_0x978fd9(0x1d7)](_0x2859ed);const _0x579a33={};_0x36a90d[_0x978fd9(0x1de)]!==undefined&&(_0x579a33[_0x978fd9(0x1de)]=_0x36a90d[_0x978fd9(0x1de)]||null),_0x36a90d[_0x978fd9(0x1d6)]!==undefined&&(_0x579a33[_0x978fd9(0x1d6)]=_0x36a90d[_0x978fd9(0x1d6)]||[]),await database_1['default'][_0x978fd9(0x1e1)][_0x978fd9(0x1dd)]({'where':{'shopId':_0x2859ed},'data':_0x579a33});}async[a43_0x5d624e(0x1d7)](_0xe3163b){const _0x20c2b1=a43_0x5d624e,_0x22fbcd=await database_1[_0x20c2b1(0x1e6)]['shopSettings'][_0x20c2b1(0x1d9)]({'where':{'shopId':_0xe3163b}});!_0x22fbcd&&await database_1[_0x20c2b1(0x1e6)]['shopSettings'][_0x20c2b1(0x1d2)]({'data':{'shopId':_0xe3163b}});}}function a43_0x3a3c(_0x3f854a,_0x1f554a){const _0x42084c=a43_0x4208();return a43_0x3a3c=function(_0x3a3ce8,_0xbc7f88){_0x3a3ce8=_0x3a3ce8-0x1d1;let _0x42150a=_0x42084c[_0x3a3ce8];return _0x42150a;},a43_0x3a3c(_0x3f854a,_0x1f554a);}exports[a43_0x5d624e(0x1e5)]=IntegrationsService;function a43_0x4208(){const _0x12ee20=['findUnique','getIntegrations','1796jlArtI','1409554MLBcJG','update','webhookUrl','2657900uvxYpH','733007eRqvtA','shopSettings','Shop\x20settings\x20not\x20found','4159620pgsEKa','3580530upoaGv','IntegrationsService','default','3717LJvIBz','isArray','440199yXWTyj','parseWebhookEvents','create','__esModule','104HKiHKJ','__importDefault','webhookEvents','ensureSettingsExist','string'];a43_0x4208=function(){return _0x12ee20;};return a43_0x4208();}