'use strict';function a47_0x2335(_0x24ac27,_0x27488b){const _0x17fab6=a47_0x17fa();return a47_0x2335=function(_0x23352f,_0x3060fc){_0x23352f=_0x23352f-0x8a;let _0xc5892a=_0x17fab6[_0x23352f];return _0xc5892a;},a47_0x2335(_0x24ac27,_0x27488b);}const a47_0x2b815b=a47_0x2335;(function(_0x47724a,_0x3d418f){const _0x169efd=a47_0x2335,_0x1b4e95=_0x47724a();while(!![]){try{const _0x5110b1=-parseInt(_0x169efd(0x99))/0x1*(-parseInt(_0x169efd(0x9b))/0x2)+-parseInt(_0x169efd(0x93))/0x3*(parseInt(_0x169efd(0x9e))/0x4)+-parseInt(_0x169efd(0xa2))/0x5+-parseInt(_0x169efd(0x94))/0x6*(parseInt(_0x169efd(0xa4))/0x7)+-parseInt(_0x169efd(0x8d))/0x8+-parseInt(_0x169efd(0x8f))/0x9*(-parseInt(_0x169efd(0x9f))/0xa)+-parseInt(_0x169efd(0x8e))/0xb*(-parseInt(_0x169efd(0x9a))/0xc);if(_0x5110b1===_0x3d418f)break;else _0x1b4e95['push'](_0x1b4e95['shift']());}catch(_0x23ff66){_0x1b4e95['push'](_0x1b4e95['shift']());}}}(a47_0x17fa,0x1e1ec));var __importDefault=this&&this[a47_0x2b815b(0x95)]||function(_0x126c2a){const _0x487f5b=a47_0x2b815b;return _0x126c2a&&_0x126c2a[_0x487f5b(0x8a)]?_0x126c2a:{'default':_0x126c2a};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a47_0x2b815b(0x9d)]=void 0x0;const database_1=__importDefault(require(a47_0x2b815b(0xa5)));class IntegrationsService{[a47_0x2b815b(0x90)](_0x4e5610){const _0x4250f1=a47_0x2b815b;if(!_0x4e5610)return[];if(Array[_0x4250f1(0xa6)](_0x4e5610))return _0x4e5610;if(typeof _0x4e5610===_0x4250f1(0x97))try{const _0x744cd1=JSON['parse'](_0x4e5610);return Array['isArray'](_0x744cd1)?_0x744cd1:[];}catch{return[];}return[];}async[a47_0x2b815b(0x9c)](_0x29ca78){const _0x374afc=a47_0x2b815b;await this[_0x374afc(0xa3)](_0x29ca78);const _0x319bc9=await database_1[_0x374afc(0x8c)]['shopSettings']['findUnique']({'where':{'shopId':_0x29ca78},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x319bc9)throw new Error(_0x374afc(0x96));return{'webhook':{'url':_0x319bc9[_0x374afc(0x98)],'events':this[_0x374afc(0x90)](_0x319bc9['webhookEvents'])}};}async[a47_0x2b815b(0xa1)](_0xac4e8a,_0x2c70d0){const _0x2df7c9=a47_0x2b815b;await this[_0x2df7c9(0xa3)](_0xac4e8a);const _0x4e7670={};_0x2c70d0[_0x2df7c9(0x98)]!==undefined&&(_0x4e7670[_0x2df7c9(0x98)]=_0x2c70d0['webhookUrl']||null),_0x2c70d0[_0x2df7c9(0xa0)]!==undefined&&(_0x4e7670[_0x2df7c9(0xa0)]=_0x2c70d0[_0x2df7c9(0xa0)]||[]),await database_1[_0x2df7c9(0x8c)][_0x2df7c9(0x8b)][_0x2df7c9(0x91)]({'where':{'shopId':_0xac4e8a},'data':_0x4e7670});}async['ensureSettingsExist'](_0x40ba61){const _0x4ecad3=a47_0x2b815b,_0x27ad77=await database_1[_0x4ecad3(0x8c)]['shopSettings'][_0x4ecad3(0xa7)]({'where':{'shopId':_0x40ba61}});!_0x27ad77&&await database_1[_0x4ecad3(0x8c)]['shopSettings'][_0x4ecad3(0x92)]({'data':{'shopId':_0x40ba61}});}}function a47_0x17fa(){const _0x219858=['201834anzIsD','parseWebhookEvents','update','create','237273qbUQKn','6aKMgLi','__importDefault','Shop\x20settings\x20not\x20found','string','webhookUrl','50207nnelqa','12fTuejT','2zeWbXd','getIntegrations','IntegrationsService','4PLhqeB','10nZomoD','webhookEvents','updateWebhookSettings','701580YPSWJd','ensureSettingsExist','575589HoWOlo','../config/database','isArray','findUnique','__esModule','shopSettings','default','1705360icRrlr','6220973APHBRl'];a47_0x17fa=function(){return _0x219858;};return a47_0x17fa();}exports['IntegrationsService']=IntegrationsService;