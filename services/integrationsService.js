'use strict';const a48_0x1cecc0=a48_0x3a11;(function(_0x12762b,_0x23f499){const _0x55fb77=a48_0x3a11,_0x52d9fc=_0x12762b();while(!![]){try{const _0x554608=-parseInt(_0x55fb77(0x1c5))/0x1+parseInt(_0x55fb77(0x1cb))/0x2+parseInt(_0x55fb77(0x1c4))/0x3*(parseInt(_0x55fb77(0x1d4))/0x4)+parseInt(_0x55fb77(0x1d3))/0x5+-parseInt(_0x55fb77(0x1d5))/0x6+-parseInt(_0x55fb77(0x1c3))/0x7*(-parseInt(_0x55fb77(0x1d0))/0x8)+-parseInt(_0x55fb77(0x1c9))/0x9;if(_0x554608===_0x23f499)break;else _0x52d9fc['push'](_0x52d9fc['shift']());}catch(_0x3d1740){_0x52d9fc['push'](_0x52d9fc['shift']());}}}(a48_0x1d6d,0x90c56));function a48_0x3a11(_0x442a94,_0x6c2921){const _0x1d6d19=a48_0x1d6d();return a48_0x3a11=function(_0x3a1164,_0x4f07fc){_0x3a1164=_0x3a1164-0x1be;let _0x534466=_0x1d6d19[_0x3a1164];return _0x534466;},a48_0x3a11(_0x442a94,_0x6c2921);}var __importDefault=this&&this[a48_0x1cecc0(0x1c6)]||function(_0x464fa7){const _0x458839=a48_0x1cecc0;return _0x464fa7&&_0x464fa7[_0x458839(0x1be)]?_0x464fa7:{'default':_0x464fa7};};Object['defineProperty'](exports,a48_0x1cecc0(0x1be),{'value':!![]}),exports['IntegrationsService']=void 0x0;const database_1=__importDefault(require(a48_0x1cecc0(0x1cd)));class IntegrationsService{['parseWebhookEvents'](_0x2008a7){const _0xae8172=a48_0x1cecc0;if(!_0x2008a7)return[];if(Array[_0xae8172(0x1c7)](_0x2008a7))return _0x2008a7;if(typeof _0x2008a7===_0xae8172(0x1cf))try{const _0x4c0282=JSON['parse'](_0x2008a7);return Array['isArray'](_0x4c0282)?_0x4c0282:[];}catch{return[];}return[];}async[a48_0x1cecc0(0x1d2)](_0x371bda){const _0x33d37b=a48_0x1cecc0;await this[_0x33d37b(0x1c2)](_0x371bda);const _0x5ab28d=await database_1[_0x33d37b(0x1c0)][_0x33d37b(0x1d6)][_0x33d37b(0x1ce)]({'where':{'shopId':_0x371bda},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x5ab28d)throw new Error(_0x33d37b(0x1cc));return{'webhook':{'url':_0x5ab28d[_0x33d37b(0x1ca)],'events':this[_0x33d37b(0x1d1)](_0x5ab28d[_0x33d37b(0x1c8)])}};}async['updateWebhookSettings'](_0x3b9a76,_0x32a162){const _0x25baf8=a48_0x1cecc0;await this['ensureSettingsExist'](_0x3b9a76);const _0x4f0cd7={};_0x32a162[_0x25baf8(0x1ca)]!==undefined&&(_0x4f0cd7['webhookUrl']=_0x32a162[_0x25baf8(0x1ca)]||null),_0x32a162[_0x25baf8(0x1c8)]!==undefined&&(_0x4f0cd7[_0x25baf8(0x1c8)]=_0x32a162[_0x25baf8(0x1c8)]||[]),await database_1[_0x25baf8(0x1c0)]['shopSettings']['update']({'where':{'shopId':_0x3b9a76},'data':_0x4f0cd7});}async[a48_0x1cecc0(0x1c2)](_0x21d2da){const _0x376c23=a48_0x1cecc0,_0x331a40=await database_1['default'][_0x376c23(0x1d6)]['findUnique']({'where':{'shopId':_0x21d2da}});!_0x331a40&&await database_1[_0x376c23(0x1c0)][_0x376c23(0x1d6)][_0x376c23(0x1c1)]({'data':{'shopId':_0x21d2da}});}}exports[a48_0x1cecc0(0x1bf)]=IntegrationsService;function a48_0x1d6d(){const _0x159775=['69152Yskekf','Shop\x20settings\x20not\x20found','../config/database','findUnique','string','336GSUSTk','parseWebhookEvents','getIntegrations','2175340DIXTAs','484upKCQF','2728740ncbfGH','shopSettings','__esModule','IntegrationsService','default','create','ensureSettingsExist','169225GNPyyc','15801QtpEXM','687232XOMIcg','__importDefault','isArray','webhookEvents','3485673deFQsW','webhookUrl'];a48_0x1d6d=function(){return _0x159775;};return a48_0x1d6d();}