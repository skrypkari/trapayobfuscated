'use strict';const a66_0x2d3f87=a66_0x2de6;(function(_0x27e8b6,_0x3129a1){const _0x4814f8=a66_0x2de6,_0x11abcc=_0x27e8b6();while(!![]){try{const _0x55f577=-parseInt(_0x4814f8(0x14a))/0x1*(-parseInt(_0x4814f8(0x162))/0x2)+-parseInt(_0x4814f8(0x153))/0x3*(-parseInt(_0x4814f8(0x156))/0x4)+parseInt(_0x4814f8(0x159))/0x5*(-parseInt(_0x4814f8(0x157))/0x6)+-parseInt(_0x4814f8(0x15e))/0x7+-parseInt(_0x4814f8(0x15f))/0x8+-parseInt(_0x4814f8(0x151))/0x9+parseInt(_0x4814f8(0x14e))/0xa;if(_0x55f577===_0x3129a1)break;else _0x11abcc['push'](_0x11abcc['shift']());}catch(_0x1eb4ef){_0x11abcc['push'](_0x11abcc['shift']());}}}(a66_0x14ad,0xafbd3));function a66_0x2de6(_0xc223e4,_0x5b9276){_0xc223e4=_0xc223e4-0x14a;const _0x14ad2e=a66_0x14ad();let _0x2de630=_0x14ad2e[_0xc223e4];return _0x2de630;}var __importDefault=this&&this[a66_0x2d3f87(0x14c)]||function(_0x42877a){return _0x42877a&&_0x42877a['__esModule']?_0x42877a:{'default':_0x42877a};};Object['defineProperty'](exports,a66_0x2d3f87(0x15a),{'value':!![]}),exports['IntegrationsService']=void 0x0;const database_1=__importDefault(require(a66_0x2d3f87(0x15d)));class IntegrationsService{['parseWebhookEvents'](_0x37d347){const _0x375104=a66_0x2d3f87;if(!_0x37d347)return[];if(Array[_0x375104(0x14b)](_0x37d347))return _0x37d347;if(typeof _0x37d347===_0x375104(0x14d))try{const _0x3b7b82=JSON['parse'](_0x37d347);return Array['isArray'](_0x3b7b82)?_0x3b7b82:[];}catch{return[];}return[];}async[a66_0x2d3f87(0x15b)](_0x160e97){const _0x123f3f=a66_0x2d3f87;await this[_0x123f3f(0x155)](_0x160e97);const _0x50db79=await database_1[_0x123f3f(0x160)][_0x123f3f(0x161)][_0x123f3f(0x152)]({'where':{'shopId':_0x160e97},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x50db79)throw new Error(_0x123f3f(0x154));return{'webhook':{'url':_0x50db79['webhookUrl'],'events':this[_0x123f3f(0x14f)](_0x50db79[_0x123f3f(0x150)])}};}async['updateWebhookSettings'](_0x4e0325,_0xc77495){const _0x259822=a66_0x2d3f87;await this[_0x259822(0x155)](_0x4e0325);const _0x41c87a={};_0xc77495['webhookUrl']!==undefined&&(_0x41c87a['webhookUrl']=_0xc77495['webhookUrl']||null),_0xc77495[_0x259822(0x150)]!==undefined&&(_0x41c87a[_0x259822(0x150)]=_0xc77495[_0x259822(0x150)]||[]),await database_1[_0x259822(0x160)][_0x259822(0x161)]['update']({'where':{'shopId':_0x4e0325},'data':_0x41c87a});}async['ensureSettingsExist'](_0x511c51){const _0x498dce=a66_0x2d3f87,_0x105a03=await database_1[_0x498dce(0x160)][_0x498dce(0x161)][_0x498dce(0x152)]({'where':{'shopId':_0x511c51}});!_0x105a03&&await database_1[_0x498dce(0x160)][_0x498dce(0x161)][_0x498dce(0x15c)]({'data':{'shopId':_0x511c51}});}}exports[a66_0x2d3f87(0x158)]=IntegrationsService;function a66_0x14ad(){const _0x1fac17=['4516epsouS','353ZGtajX','isArray','__importDefault','string','18517510cKqmWG','parseWebhookEvents','webhookEvents','533448JUGhYh','findUnique','25293tzaMnk','Shop\x20settings\x20not\x20found','ensureSettingsExist','368jXvsat','2454GlaFzS','IntegrationsService','17075BTcAVO','__esModule','getIntegrations','create','../config/database','7170863xAzQuM','1793872cORAuJ','default','shopSettings'];a66_0x14ad=function(){return _0x1fac17;};return a66_0x14ad();}