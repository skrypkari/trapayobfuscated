'use strict';function a52_0xb2d2(_0xf63aee,_0x2b0f85){const _0x453c0f=a52_0x453c();return a52_0xb2d2=function(_0xb2d25,_0xbf9090){_0xb2d25=_0xb2d25-0x1d7;let _0x52cb2a=_0x453c0f[_0xb2d25];return _0x52cb2a;},a52_0xb2d2(_0xf63aee,_0x2b0f85);}const a52_0x16a06e=a52_0xb2d2;(function(_0x1eeb52,_0xe1749d){const _0x519652=a52_0xb2d2,_0x92b064=_0x1eeb52();while(!![]){try{const _0x3cb84c=-parseInt(_0x519652(0x1e1))/0x1*(-parseInt(_0x519652(0x1da))/0x2)+parseInt(_0x519652(0x1e2))/0x3*(-parseInt(_0x519652(0x1df))/0x4)+-parseInt(_0x519652(0x1ed))/0x5+parseInt(_0x519652(0x1e4))/0x6*(-parseInt(_0x519652(0x1e7))/0x7)+parseInt(_0x519652(0x1de))/0x8+parseInt(_0x519652(0x1e5))/0x9+parseInt(_0x519652(0x1ea))/0xa;if(_0x3cb84c===_0xe1749d)break;else _0x92b064['push'](_0x92b064['shift']());}catch(_0x5bcdfb){_0x92b064['push'](_0x92b064['shift']());}}}(a52_0x453c,0xca7fc));var __importDefault=this&&this[a52_0x16a06e(0x1ee)]||function(_0x411b22){return _0x411b22&&_0x411b22['__esModule']?_0x411b22:{'default':_0x411b22};};Object[a52_0x16a06e(0x1d9)](exports,a52_0x16a06e(0x1d7),{'value':!![]}),exports[a52_0x16a06e(0x1f2)]=void 0x0;function a52_0x453c(){const _0x5990e5=['__esModule','default','defineProperty','2tjmVhk','create','webhookEvents','ensureSettingsExist','8417576ehSLBS','12xQcAlz','update','277157PkplbN','1613841QoQqJh','string','186sijfZi','5582205ElQhWB','webhookUrl','160139QDdpZw','Shop\x20settings\x20not\x20found','shopSettings','24382390CWKNsd','../config/database','isArray','6176870dOjXIF','__importDefault','getIntegrations','parse','parseWebhookEvents','IntegrationsService','findUnique'];a52_0x453c=function(){return _0x5990e5;};return a52_0x453c();}const database_1=__importDefault(require(a52_0x16a06e(0x1eb)));class IntegrationsService{[a52_0x16a06e(0x1f1)](_0x44e917){const _0x38cd0d=a52_0x16a06e;if(!_0x44e917)return[];if(Array[_0x38cd0d(0x1ec)](_0x44e917))return _0x44e917;if(typeof _0x44e917===_0x38cd0d(0x1e3))try{const _0x311e24=JSON[_0x38cd0d(0x1f0)](_0x44e917);return Array[_0x38cd0d(0x1ec)](_0x311e24)?_0x311e24:[];}catch{return[];}return[];}async[a52_0x16a06e(0x1ef)](_0x3f1175){const _0x34ccff=a52_0x16a06e;await this[_0x34ccff(0x1dd)](_0x3f1175);const _0x1c6b14=await database_1[_0x34ccff(0x1d8)][_0x34ccff(0x1e9)]['findUnique']({'where':{'shopId':_0x3f1175},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x1c6b14)throw new Error(_0x34ccff(0x1e8));return{'webhook':{'url':_0x1c6b14['webhookUrl'],'events':this[_0x34ccff(0x1f1)](_0x1c6b14[_0x34ccff(0x1dc)])}};}async['updateWebhookSettings'](_0x4ad2d2,_0x59fe83){const _0x3eb910=a52_0x16a06e;await this[_0x3eb910(0x1dd)](_0x4ad2d2);const _0x46f8f6={};_0x59fe83[_0x3eb910(0x1e6)]!==undefined&&(_0x46f8f6[_0x3eb910(0x1e6)]=_0x59fe83[_0x3eb910(0x1e6)]||null),_0x59fe83[_0x3eb910(0x1dc)]!==undefined&&(_0x46f8f6['webhookEvents']=_0x59fe83[_0x3eb910(0x1dc)]||[]),await database_1['default'][_0x3eb910(0x1e9)][_0x3eb910(0x1e0)]({'where':{'shopId':_0x4ad2d2},'data':_0x46f8f6});}async[a52_0x16a06e(0x1dd)](_0x50789c){const _0x39492b=a52_0x16a06e,_0x399171=await database_1['default'][_0x39492b(0x1e9)][_0x39492b(0x1f3)]({'where':{'shopId':_0x50789c}});!_0x399171&&await database_1[_0x39492b(0x1d8)][_0x39492b(0x1e9)][_0x39492b(0x1db)]({'data':{'shopId':_0x50789c}});}}exports[a52_0x16a06e(0x1f2)]=IntegrationsService;