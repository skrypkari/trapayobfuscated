'use strict';const a55_0x1be4a7=a55_0x21a7;(function(_0x32b777,_0x5066a6){const _0x162c11=a55_0x21a7,_0x2acf15=_0x32b777();while(!![]){try{const _0x36ad94=-parseInt(_0x162c11(0x103))/0x1*(-parseInt(_0x162c11(0x104))/0x2)+parseInt(_0x162c11(0x10f))/0x3+-parseInt(_0x162c11(0x10b))/0x4*(parseInt(_0x162c11(0x10e))/0x5)+parseInt(_0x162c11(0x100))/0x6*(parseInt(_0x162c11(0x101))/0x7)+parseInt(_0x162c11(0x118))/0x8*(-parseInt(_0x162c11(0x107))/0x9)+-parseInt(_0x162c11(0xff))/0xa*(-parseInt(_0x162c11(0x10d))/0xb)+-parseInt(_0x162c11(0x117))/0xc*(parseInt(_0x162c11(0xfd))/0xd);if(_0x36ad94===_0x5066a6)break;else _0x2acf15['push'](_0x2acf15['shift']());}catch(_0x5ed9a1){_0x2acf15['push'](_0x2acf15['shift']());}}}(a55_0x1670,0x4cea2));var __importDefault=this&&this['__importDefault']||function(_0x39d35a){return _0x39d35a&&_0x39d35a['__esModule']?_0x39d35a:{'default':_0x39d35a};};Object['defineProperty'](exports,a55_0x1be4a7(0x113),{'value':!![]}),exports[a55_0x1be4a7(0x114)]=void 0x0;const database_1=__importDefault(require(a55_0x1be4a7(0xfe)));function a55_0x21a7(_0x4f5e82,_0x59c8c8){const _0x167060=a55_0x1670();return a55_0x21a7=function(_0x21a7c8,_0x208a46){_0x21a7c8=_0x21a7c8-0xfd;let _0x2e98ee=_0x167060[_0x21a7c8];return _0x2e98ee;},a55_0x21a7(_0x4f5e82,_0x59c8c8);}class IntegrationsService{['parseWebhookEvents'](_0x439c6d){const _0x3bc8a7=a55_0x1be4a7;if(!_0x439c6d)return[];if(Array[_0x3bc8a7(0x110)](_0x439c6d))return _0x439c6d;if(typeof _0x439c6d===_0x3bc8a7(0x102))try{const _0x2a8b6d=JSON[_0x3bc8a7(0x112)](_0x439c6d);return Array[_0x3bc8a7(0x110)](_0x2a8b6d)?_0x2a8b6d:[];}catch{return[];}return[];}async[a55_0x1be4a7(0x116)](_0xe0547c){const _0x3986b9=a55_0x1be4a7;await this[_0x3986b9(0x115)](_0xe0547c);const _0x12d721=await database_1['default'][_0x3986b9(0x105)][_0x3986b9(0x108)]({'where':{'shopId':_0xe0547c},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x12d721)throw new Error(_0x3986b9(0x10c));return{'webhook':{'url':_0x12d721['webhookUrl'],'events':this[_0x3986b9(0x10a)](_0x12d721['webhookEvents'])}};}async[a55_0x1be4a7(0x111)](_0x34333b,_0x5db427){const _0x2bc18f=a55_0x1be4a7;await this['ensureSettingsExist'](_0x34333b);const _0x1fc4dd={};_0x5db427[_0x2bc18f(0x106)]!==undefined&&(_0x1fc4dd['webhookUrl']=_0x5db427[_0x2bc18f(0x106)]||null),_0x5db427[_0x2bc18f(0x11a)]!==undefined&&(_0x1fc4dd[_0x2bc18f(0x11a)]=_0x5db427[_0x2bc18f(0x11a)]||[]),await database_1[_0x2bc18f(0x109)][_0x2bc18f(0x105)][_0x2bc18f(0x119)]({'where':{'shopId':_0x34333b},'data':_0x1fc4dd});}async[a55_0x1be4a7(0x115)](_0x2b2480){const _0x57d268=a55_0x1be4a7,_0x4dbf28=await database_1['default'][_0x57d268(0x105)][_0x57d268(0x108)]({'where':{'shopId':_0x2b2480}});!_0x4dbf28&&await database_1[_0x57d268(0x109)][_0x57d268(0x105)]['create']({'data':{'shopId':_0x2b2480}});}}exports[a55_0x1be4a7(0x114)]=IntegrationsService;function a55_0x1670(){const _0x54062f=['46216FGtJlf','14rRXZUp','shopSettings','webhookUrl','36WMNOAl','findUnique','default','parseWebhookEvents','228964XTIfJE','Shop\x20settings\x20not\x20found','3938GjVgeI','55hnmMId','430989XUYNgL','isArray','updateWebhookSettings','parse','__esModule','IntegrationsService','ensureSettingsExist','getIntegrations','5196piCnPQ','1091320JgVZuj','update','webhookEvents','702JEcZXf','../config/database','14300pXKcpy','3207720sNxtVd','7YawzQQ','string'];a55_0x1670=function(){return _0x54062f;};return a55_0x1670();}