'use strict';const a47_0x4c5e9c=a47_0x5035;(function(_0xd8220d,_0x3def3b){const _0x4b2b15=a47_0x5035,_0x3d78bc=_0xd8220d();while(!![]){try{const _0x5479c1=-parseInt(_0x4b2b15(0x157))/0x1+parseInt(_0x4b2b15(0x170))/0x2+parseInt(_0x4b2b15(0x163))/0x3+-parseInt(_0x4b2b15(0x15b))/0x4+-parseInt(_0x4b2b15(0x15a))/0x5*(parseInt(_0x4b2b15(0x172))/0x6)+parseInt(_0x4b2b15(0x15f))/0x7*(parseInt(_0x4b2b15(0x15c))/0x8)+-parseInt(_0x4b2b15(0x171))/0x9;if(_0x5479c1===_0x3def3b)break;else _0x3d78bc['push'](_0x3d78bc['shift']());}catch(_0x281e9c){_0x3d78bc['push'](_0x3d78bc['shift']());}}}(a47_0x2a09,0x2b132));function a47_0x5035(_0x3bf6ec,_0x4ca00e){const _0x2a09b4=a47_0x2a09();return a47_0x5035=function(_0x5035b1,_0x29d840){_0x5035b1=_0x5035b1-0x157;let _0x20da23=_0x2a09b4[_0x5035b1];return _0x20da23;},a47_0x5035(_0x3bf6ec,_0x4ca00e);}var __importDefault=this&&this[a47_0x4c5e9c(0x165)]||function(_0xc2cdc1){const _0x56bdb1=a47_0x4c5e9c;return _0xc2cdc1&&_0xc2cdc1[_0x56bdb1(0x158)]?_0xc2cdc1:{'default':_0xc2cdc1};};Object[a47_0x4c5e9c(0x159)](exports,a47_0x4c5e9c(0x158),{'value':!![]}),exports[a47_0x4c5e9c(0x168)]=void 0x0;const database_1=__importDefault(require(a47_0x4c5e9c(0x169)));class IntegrationsService{['parseWebhookEvents'](_0xb6ab00){const _0x4dd47d=a47_0x4c5e9c;if(!_0xb6ab00)return[];if(Array[_0x4dd47d(0x16d)](_0xb6ab00))return _0xb6ab00;if(typeof _0xb6ab00===_0x4dd47d(0x166))try{const _0x4ab898=JSON[_0x4dd47d(0x16e)](_0xb6ab00);return Array['isArray'](_0x4ab898)?_0x4ab898:[];}catch{return[];}return[];}async[a47_0x4c5e9c(0x15e)](_0x309c73){const _0x31aa67=a47_0x4c5e9c;await this[_0x31aa67(0x162)](_0x309c73);const _0x18fc6c=await database_1[_0x31aa67(0x16a)]['shopSettings'][_0x31aa67(0x15d)]({'where':{'shopId':_0x309c73},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x18fc6c)throw new Error(_0x31aa67(0x16b));return{'webhook':{'url':_0x18fc6c[_0x31aa67(0x164)],'events':this['parseWebhookEvents'](_0x18fc6c[_0x31aa67(0x16f)])}};}async[a47_0x4c5e9c(0x160)](_0x2fdea5,_0x19c76b){const _0x484317=a47_0x4c5e9c;await this[_0x484317(0x162)](_0x2fdea5);const _0x5e6eff={};_0x19c76b['webhookUrl']!==undefined&&(_0x5e6eff[_0x484317(0x164)]=_0x19c76b[_0x484317(0x164)]||null),_0x19c76b['webhookEvents']!==undefined&&(_0x5e6eff[_0x484317(0x16f)]=_0x19c76b[_0x484317(0x16f)]||[]),await database_1[_0x484317(0x16a)][_0x484317(0x161)][_0x484317(0x167)]({'where':{'shopId':_0x2fdea5},'data':_0x5e6eff});}async[a47_0x4c5e9c(0x162)](_0x2356fa){const _0xd00eed=a47_0x4c5e9c,_0x4f9191=await database_1[_0xd00eed(0x16a)][_0xd00eed(0x161)][_0xd00eed(0x15d)]({'where':{'shopId':_0x2356fa}});!_0x4f9191&&await database_1[_0xd00eed(0x16a)][_0xd00eed(0x161)][_0xd00eed(0x16c)]({'data':{'shopId':_0x2356fa}});}}exports['IntegrationsService']=IntegrationsService;function a47_0x2a09(){const _0x42367d=['1741266hbDQze','175645RVIGIa','__esModule','defineProperty','5XscfEK','66528jGRDnV','400gnDrow','findUnique','getIntegrations','19362EvcHZn','updateWebhookSettings','shopSettings','ensureSettingsExist','1008546EeHWEi','webhookUrl','__importDefault','string','update','IntegrationsService','../config/database','default','Shop\x20settings\x20not\x20found','create','isArray','parse','webhookEvents','506330mjCYFK','618525NkVcPx'];a47_0x2a09=function(){return _0x42367d;};return a47_0x2a09();}