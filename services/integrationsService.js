'use strict';function a43_0x5084(_0xd904b6,_0xab0cdb){const _0x83c0a0=a43_0x83c0();return a43_0x5084=function(_0x5084d8,_0x109d7f){_0x5084d8=_0x5084d8-0x73;let _0x49bc0b=_0x83c0a0[_0x5084d8];return _0x49bc0b;},a43_0x5084(_0xd904b6,_0xab0cdb);}const a43_0x52ae0c=a43_0x5084;(function(_0x21f187,_0x53c08c){const _0xea81e6=a43_0x5084,_0x2dba77=_0x21f187();while(!![]){try{const _0x5b4983=-parseInt(_0xea81e6(0x77))/0x1+parseInt(_0xea81e6(0x7b))/0x2+parseInt(_0xea81e6(0x76))/0x3+-parseInt(_0xea81e6(0x74))/0x4+-parseInt(_0xea81e6(0x89))/0x5*(parseInt(_0xea81e6(0x79))/0x6)+parseInt(_0xea81e6(0x83))/0x7+parseInt(_0xea81e6(0x7d))/0x8*(parseInt(_0xea81e6(0x80))/0x9);if(_0x5b4983===_0x53c08c)break;else _0x2dba77['push'](_0x2dba77['shift']());}catch(_0x5b486f){_0x2dba77['push'](_0x2dba77['shift']());}}}(a43_0x83c0,0x21d61));var __importDefault=this&&this['__importDefault']||function(_0x9e694f){const _0x4b1685=a43_0x5084;return _0x9e694f&&_0x9e694f[_0x4b1685(0x87)]?_0x9e694f:{'default':_0x9e694f};};Object['defineProperty'](exports,a43_0x52ae0c(0x87),{'value':!![]}),exports[a43_0x52ae0c(0x8c)]=void 0x0;const database_1=__importDefault(require(a43_0x52ae0c(0x85)));class IntegrationsService{[a43_0x52ae0c(0x8b)](_0x48b53b){const _0x55c9f2=a43_0x52ae0c;if(!_0x48b53b)return[];if(Array[_0x55c9f2(0x88)](_0x48b53b))return _0x48b53b;if(typeof _0x48b53b===_0x55c9f2(0x7a))try{const _0x5349f1=JSON[_0x55c9f2(0x78)](_0x48b53b);return Array[_0x55c9f2(0x88)](_0x5349f1)?_0x5349f1:[];}catch{return[];}return[];}async[a43_0x52ae0c(0x86)](_0x5ee2c5){const _0x3b523f=a43_0x52ae0c;await this[_0x3b523f(0x7f)](_0x5ee2c5);const _0x4a4f83=await database_1['default'][_0x3b523f(0x75)]['findUnique']({'where':{'shopId':_0x5ee2c5},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x4a4f83)throw new Error(_0x3b523f(0x8a));return{'webhook':{'url':_0x4a4f83[_0x3b523f(0x84)],'events':this[_0x3b523f(0x8b)](_0x4a4f83[_0x3b523f(0x81)])}};}async[a43_0x52ae0c(0x7c)](_0x344056,_0x30eb8d){const _0x3ee185=a43_0x52ae0c;await this[_0x3ee185(0x7f)](_0x344056);const _0x22bc3d={};_0x30eb8d[_0x3ee185(0x84)]!==undefined&&(_0x22bc3d['webhookUrl']=_0x30eb8d[_0x3ee185(0x84)]||null),_0x30eb8d[_0x3ee185(0x81)]!==undefined&&(_0x22bc3d[_0x3ee185(0x81)]=_0x30eb8d[_0x3ee185(0x81)]||[]),await database_1[_0x3ee185(0x82)][_0x3ee185(0x75)][_0x3ee185(0x7e)]({'where':{'shopId':_0x344056},'data':_0x22bc3d});}async[a43_0x52ae0c(0x7f)](_0x18939e){const _0xa9fb95=a43_0x52ae0c,_0x4896e3=await database_1[_0xa9fb95(0x82)][_0xa9fb95(0x75)][_0xa9fb95(0x73)]({'where':{'shopId':_0x18939e}});!_0x4896e3&&await database_1[_0xa9fb95(0x82)][_0xa9fb95(0x75)]['create']({'data':{'shopId':_0x18939e}});}}function a43_0x83c0(){const _0x1f1bf2=['isArray','120FlFLzS','Shop\x20settings\x20not\x20found','parseWebhookEvents','IntegrationsService','findUnique','515300xcjcVE','shopSettings','295569hDWKjr','71428kiXqBx','parse','66666ibhymB','string','188594NeBatC','updateWebhookSettings','32GLcdWs','update','ensureSettingsExist','831843nVZivn','webhookEvents','default','300874IDjjqK','webhookUrl','../config/database','getIntegrations','__esModule'];a43_0x83c0=function(){return _0x1f1bf2;};return a43_0x83c0();}exports[a43_0x52ae0c(0x8c)]=IntegrationsService;