'use strict';const a70_0x496340=a70_0x54f8;(function(_0x1a6abd,_0x4d83c9){const _0x395b43=a70_0x54f8,_0x33f732=_0x1a6abd();while(!![]){try{const _0x1dc5f0=-parseInt(_0x395b43(0x1c2))/0x1*(parseInt(_0x395b43(0x1c1))/0x2)+-parseInt(_0x395b43(0x1ca))/0x3+parseInt(_0x395b43(0x1c4))/0x4*(parseInt(_0x395b43(0x1d6))/0x5)+parseInt(_0x395b43(0x1bd))/0x6+parseInt(_0x395b43(0x1d7))/0x7+-parseInt(_0x395b43(0x1d1))/0x8*(-parseInt(_0x395b43(0x1c6))/0x9)+parseInt(_0x395b43(0x1d3))/0xa*(-parseInt(_0x395b43(0x1c7))/0xb);if(_0x1dc5f0===_0x4d83c9)break;else _0x33f732['push'](_0x33f732['shift']());}catch(_0x55f74d){_0x33f732['push'](_0x33f732['shift']());}}}(a70_0x28dc,0xa0315));var __importDefault=this&&this[a70_0x496340(0x1c8)]||function(_0x251d86){return _0x251d86&&_0x251d86['__esModule']?_0x251d86:{'default':_0x251d86};};Object[a70_0x496340(0x1d2)](exports,a70_0x496340(0x1ce),{'value':!![]}),exports[a70_0x496340(0x1d0)]=void 0x0;function a70_0x28dc(){const _0x17318f=['findUnique','1044VojBuK','22LRFZNQ','__importDefault','ensureSettingsExist','772200OJzgQw','webhookEvents','../config/database','default','__esModule','parseWebhookEvents','IntegrationsService','45536ydPUKU','defineProperty','4454450CVBeyg','isArray','shopSettings','247295dlTWOf','3903200HvKJWZ','webhookUrl','create','6170826gtpCeI','updateWebhookSettings','string','getIntegrations','13462BMVxVK','73mHBoKt','Shop\x20settings\x20not\x20found','4LYsnwu'];a70_0x28dc=function(){return _0x17318f;};return a70_0x28dc();}const database_1=__importDefault(require(a70_0x496340(0x1cc)));class IntegrationsService{[a70_0x496340(0x1cf)](_0x1c8b33){const _0x6f7eba=a70_0x496340;if(!_0x1c8b33)return[];if(Array[_0x6f7eba(0x1d4)](_0x1c8b33))return _0x1c8b33;if(typeof _0x1c8b33===_0x6f7eba(0x1bf))try{const _0xa5d6b=JSON['parse'](_0x1c8b33);return Array[_0x6f7eba(0x1d4)](_0xa5d6b)?_0xa5d6b:[];}catch{return[];}return[];}async[a70_0x496340(0x1c0)](_0x338cfc){const _0x4872df=a70_0x496340;await this['ensureSettingsExist'](_0x338cfc);const _0x8d4738=await database_1[_0x4872df(0x1cd)][_0x4872df(0x1d5)][_0x4872df(0x1c5)]({'where':{'shopId':_0x338cfc},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x8d4738)throw new Error(_0x4872df(0x1c3));return{'webhook':{'url':_0x8d4738['webhookUrl'],'events':this['parseWebhookEvents'](_0x8d4738[_0x4872df(0x1cb)])}};}async[a70_0x496340(0x1be)](_0x716358,_0x50f9a1){const _0x4efca3=a70_0x496340;await this[_0x4efca3(0x1c9)](_0x716358);const _0x5b6949={};_0x50f9a1[_0x4efca3(0x1bb)]!==undefined&&(_0x5b6949[_0x4efca3(0x1bb)]=_0x50f9a1[_0x4efca3(0x1bb)]||null),_0x50f9a1[_0x4efca3(0x1cb)]!==undefined&&(_0x5b6949[_0x4efca3(0x1cb)]=_0x50f9a1[_0x4efca3(0x1cb)]||[]),await database_1['default']['shopSettings']['update']({'where':{'shopId':_0x716358},'data':_0x5b6949});}async[a70_0x496340(0x1c9)](_0x432aec){const _0x312dba=a70_0x496340,_0x5133c4=await database_1[_0x312dba(0x1cd)][_0x312dba(0x1d5)][_0x312dba(0x1c5)]({'where':{'shopId':_0x432aec}});!_0x5133c4&&await database_1[_0x312dba(0x1cd)][_0x312dba(0x1d5)][_0x312dba(0x1bc)]({'data':{'shopId':_0x432aec}});}}function a70_0x54f8(_0x129165,_0x1a0849){_0x129165=_0x129165-0x1bb;const _0x28dcc3=a70_0x28dc();let _0x54f86b=_0x28dcc3[_0x129165];return _0x54f86b;}exports['IntegrationsService']=IntegrationsService;