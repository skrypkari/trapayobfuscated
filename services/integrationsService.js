'use strict';function a43_0x1947(){const _0x30f800=['1864071AWXBMD','shopSettings','default','699378ahxLWk','findUnique','341vzJpWo','1822575XRhPPk','Shop\x20settings\x20not\x20found','getIntegrations','__importDefault','ensureSettingsExist','webhookEvents','parse','126tOVsXp','63170oNeRsg','webhookUrl','updateWebhookSettings','34942ILfbGs','__esModule','parseWebhookEvents','4181827dVZbOp','340856cDjLxV','48mYuTji','defineProperty','4JqbgTl','21wYsNMV','38FByaMI','string','create'];a43_0x1947=function(){return _0x30f800;};return a43_0x1947();}const a43_0x496d7e=a43_0x41a9;(function(_0x2135e9,_0xd7868c){const _0x140738=a43_0x41a9,_0x46b2e6=_0x2135e9();while(!![]){try{const _0x2413c1=parseInt(_0x140738(0x1bd))/0x1*(parseInt(_0x140738(0x1b4))/0x2)+parseInt(_0x140738(0x1a3))/0x3+parseInt(_0x140738(0x1bb))/0x4*(-parseInt(_0x140738(0x1a9))/0x5)+parseInt(_0x140738(0x1a6))/0x6*(parseInt(_0x140738(0x1bc))/0x7)+parseInt(_0x140738(0x1b8))/0x8*(parseInt(_0x140738(0x1b0))/0x9)+parseInt(_0x140738(0x1b1))/0xa*(-parseInt(_0x140738(0x1a8))/0xb)+parseInt(_0x140738(0x1b9))/0xc*(-parseInt(_0x140738(0x1b7))/0xd);if(_0x2413c1===_0xd7868c)break;else _0x46b2e6['push'](_0x46b2e6['shift']());}catch(_0x3fa998){_0x46b2e6['push'](_0x46b2e6['shift']());}}}(a43_0x1947,0x5dd80));var __importDefault=this&&this[a43_0x496d7e(0x1ac)]||function(_0x2d8e84){const _0x246e86=a43_0x496d7e;return _0x2d8e84&&_0x2d8e84[_0x246e86(0x1b5)]?_0x2d8e84:{'default':_0x2d8e84};};Object[a43_0x496d7e(0x1ba)](exports,'__esModule',{'value':!![]}),exports['IntegrationsService']=void 0x0;const database_1=__importDefault(require('../config/database'));function a43_0x41a9(_0x16238c,_0x46bf92){const _0x1947c6=a43_0x1947();return a43_0x41a9=function(_0x41a9a9,_0x2da3b1){_0x41a9a9=_0x41a9a9-0x1a2;let _0x5a0e9b=_0x1947c6[_0x41a9a9];return _0x5a0e9b;},a43_0x41a9(_0x16238c,_0x46bf92);}class IntegrationsService{[a43_0x496d7e(0x1b6)](_0x1ef265){const _0x25d16a=a43_0x496d7e;if(!_0x1ef265)return[];if(Array['isArray'](_0x1ef265))return _0x1ef265;if(typeof _0x1ef265===_0x25d16a(0x1be))try{const _0x30949f=JSON[_0x25d16a(0x1af)](_0x1ef265);return Array['isArray'](_0x30949f)?_0x30949f:[];}catch{return[];}return[];}async[a43_0x496d7e(0x1ab)](_0x5b60b2){const _0x234a7e=a43_0x496d7e;await this[_0x234a7e(0x1ad)](_0x5b60b2);const _0x39f865=await database_1[_0x234a7e(0x1a5)][_0x234a7e(0x1a4)]['findUnique']({'where':{'shopId':_0x5b60b2},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x39f865)throw new Error(_0x234a7e(0x1aa));return{'webhook':{'url':_0x39f865[_0x234a7e(0x1b2)],'events':this['parseWebhookEvents'](_0x39f865[_0x234a7e(0x1ae)])}};}async[a43_0x496d7e(0x1b3)](_0x426382,_0x11dc95){const _0x2fd79d=a43_0x496d7e;await this[_0x2fd79d(0x1ad)](_0x426382);const _0x333114={};_0x11dc95[_0x2fd79d(0x1b2)]!==undefined&&(_0x333114[_0x2fd79d(0x1b2)]=_0x11dc95[_0x2fd79d(0x1b2)]||null),_0x11dc95[_0x2fd79d(0x1ae)]!==undefined&&(_0x333114[_0x2fd79d(0x1ae)]=_0x11dc95[_0x2fd79d(0x1ae)]||[]),await database_1[_0x2fd79d(0x1a5)][_0x2fd79d(0x1a4)]['update']({'where':{'shopId':_0x426382},'data':_0x333114});}async[a43_0x496d7e(0x1ad)](_0x277fbd){const _0x4b5644=a43_0x496d7e,_0x3da061=await database_1['default'][_0x4b5644(0x1a4)][_0x4b5644(0x1a7)]({'where':{'shopId':_0x277fbd}});!_0x3da061&&await database_1[_0x4b5644(0x1a5)]['shopSettings'][_0x4b5644(0x1a2)]({'data':{'shopId':_0x277fbd}});}}exports['IntegrationsService']=IntegrationsService;