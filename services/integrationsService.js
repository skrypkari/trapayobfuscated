'use strict';const a50_0x2151d1=a50_0x1951;(function(_0xdf5eb4,_0x3d20d6){const _0x1dcd08=a50_0x1951,_0x15c296=_0xdf5eb4();while(!![]){try{const _0x160850=-parseInt(_0x1dcd08(0x1cf))/0x1+parseInt(_0x1dcd08(0x1c6))/0x2+parseInt(_0x1dcd08(0x1c0))/0x3*(parseInt(_0x1dcd08(0x1c3))/0x4)+-parseInt(_0x1dcd08(0x1be))/0x5+-parseInt(_0x1dcd08(0x1b6))/0x6*(-parseInt(_0x1dcd08(0x1ce))/0x7)+-parseInt(_0x1dcd08(0x1bb))/0x8+parseInt(_0x1dcd08(0x1b7))/0x9;if(_0x160850===_0x3d20d6)break;else _0x15c296['push'](_0x15c296['shift']());}catch(_0x4a1bab){_0x15c296['push'](_0x15c296['shift']());}}}(a50_0x2efe,0xa1e31));function a50_0x1951(_0x2a3d93,_0x37c4ca){const _0x2efe06=a50_0x2efe();return a50_0x1951=function(_0x19516f,_0x3bb376){_0x19516f=_0x19516f-0x1b5;let _0x8c526b=_0x2efe06[_0x19516f];return _0x8c526b;},a50_0x1951(_0x2a3d93,_0x37c4ca);}function a50_0x2efe(){const _0x35a68a=['webhookUrl','6338900KjtCLj','string','3FHyEAq','__esModule','parse','5250044rLfEhz','default','updateWebhookSettings','1914882ZxfGiY','create','ensureSettingsExist','webhookEvents','getIntegrations','findUnique','defineProperty','IntegrationsService','91KqsepY','774161SZcHbG','isArray','../config/database','292038cwlQoa','9284706eBmMUS','Shop\x20settings\x20not\x20found','__importDefault','shopSettings','9834440UbTMDp','parseWebhookEvents'];a50_0x2efe=function(){return _0x35a68a;};return a50_0x2efe();}var __importDefault=this&&this[a50_0x2151d1(0x1b9)]||function(_0x5ec6a3){const _0x428282=a50_0x2151d1;return _0x5ec6a3&&_0x5ec6a3[_0x428282(0x1c1)]?_0x5ec6a3:{'default':_0x5ec6a3};};Object[a50_0x2151d1(0x1cc)](exports,a50_0x2151d1(0x1c1),{'value':!![]}),exports[a50_0x2151d1(0x1cd)]=void 0x0;const database_1=__importDefault(require(a50_0x2151d1(0x1b5)));class IntegrationsService{[a50_0x2151d1(0x1bc)](_0x344fa0){const _0x533d62=a50_0x2151d1;if(!_0x344fa0)return[];if(Array[_0x533d62(0x1d0)](_0x344fa0))return _0x344fa0;if(typeof _0x344fa0===_0x533d62(0x1bf))try{const _0x140100=JSON[_0x533d62(0x1c2)](_0x344fa0);return Array[_0x533d62(0x1d0)](_0x140100)?_0x140100:[];}catch{return[];}return[];}async[a50_0x2151d1(0x1ca)](_0x2a65cf){const _0x351963=a50_0x2151d1;await this[_0x351963(0x1c8)](_0x2a65cf);const _0x5941bd=await database_1[_0x351963(0x1c4)][_0x351963(0x1ba)][_0x351963(0x1cb)]({'where':{'shopId':_0x2a65cf},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x5941bd)throw new Error(_0x351963(0x1b8));return{'webhook':{'url':_0x5941bd[_0x351963(0x1bd)],'events':this[_0x351963(0x1bc)](_0x5941bd[_0x351963(0x1c9)])}};}async[a50_0x2151d1(0x1c5)](_0x4bc061,_0xe6957f){const _0x1fc8f0=a50_0x2151d1;await this[_0x1fc8f0(0x1c8)](_0x4bc061);const _0x218b78={};_0xe6957f[_0x1fc8f0(0x1bd)]!==undefined&&(_0x218b78[_0x1fc8f0(0x1bd)]=_0xe6957f[_0x1fc8f0(0x1bd)]||null),_0xe6957f['webhookEvents']!==undefined&&(_0x218b78[_0x1fc8f0(0x1c9)]=_0xe6957f[_0x1fc8f0(0x1c9)]||[]),await database_1['default'][_0x1fc8f0(0x1ba)]['update']({'where':{'shopId':_0x4bc061},'data':_0x218b78});}async[a50_0x2151d1(0x1c8)](_0x59d6f8){const _0x1326cb=a50_0x2151d1,_0xb05aed=await database_1[_0x1326cb(0x1c4)][_0x1326cb(0x1ba)][_0x1326cb(0x1cb)]({'where':{'shopId':_0x59d6f8}});!_0xb05aed&&await database_1[_0x1326cb(0x1c4)][_0x1326cb(0x1ba)][_0x1326cb(0x1c7)]({'data':{'shopId':_0x59d6f8}});}}exports[a50_0x2151d1(0x1cd)]=IntegrationsService;