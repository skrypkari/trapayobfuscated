'use strict';const a43_0xa6fb38=a43_0x157a;function a43_0x157a(_0x509cbd,_0x4480d7){const _0xd57419=a43_0xd574();return a43_0x157a=function(_0x157aff,_0x2c3d58){_0x157aff=_0x157aff-0x9a;let _0x54be88=_0xd57419[_0x157aff];return _0x54be88;},a43_0x157a(_0x509cbd,_0x4480d7);}(function(_0x4b4fc4,_0x43c720){const _0x33cbca=a43_0x157a,_0x44ae68=_0x4b4fc4();while(!![]){try{const _0x4862e3=-parseInt(_0x33cbca(0xa3))/0x1+-parseInt(_0x33cbca(0xa5))/0x2*(parseInt(_0x33cbca(0xb4))/0x3)+parseInt(_0x33cbca(0xa2))/0x4*(parseInt(_0x33cbca(0xb1))/0x5)+parseInt(_0x33cbca(0xb0))/0x6+-parseInt(_0x33cbca(0xad))/0x7*(parseInt(_0x33cbca(0xae))/0x8)+-parseInt(_0x33cbca(0x9b))/0x9*(-parseInt(_0x33cbca(0xa0))/0xa)+-parseInt(_0x33cbca(0xab))/0xb;if(_0x4862e3===_0x43c720)break;else _0x44ae68['push'](_0x44ae68['shift']());}catch(_0x40daba){_0x44ae68['push'](_0x44ae68['shift']());}}}(a43_0xd574,0x52df9));var __importDefault=this&&this['__importDefault']||function(_0x2d4688){const _0x1c45d1=a43_0x157a;return _0x2d4688&&_0x2d4688[_0x1c45d1(0xb2)]?_0x2d4688:{'default':_0x2d4688};};Object[a43_0xa6fb38(0xac)](exports,a43_0xa6fb38(0xb2),{'value':!![]}),exports[a43_0xa6fb38(0xa4)]=void 0x0;const database_1=__importDefault(require(a43_0xa6fb38(0x9e)));class IntegrationsService{[a43_0xa6fb38(0xb6)](_0x3834fc){const _0x43bbb6=a43_0xa6fb38;if(!_0x3834fc)return[];if(Array[_0x43bbb6(0xaa)](_0x3834fc))return _0x3834fc;if(typeof _0x3834fc===_0x43bbb6(0xa8))try{const _0x2adab1=JSON[_0x43bbb6(0xa9)](_0x3834fc);return Array[_0x43bbb6(0xaa)](_0x2adab1)?_0x2adab1:[];}catch{return[];}return[];}async[a43_0xa6fb38(0x9c)](_0x5cd0a0){const _0x42eb11=a43_0xa6fb38;await this[_0x42eb11(0xa6)](_0x5cd0a0);const _0x42edf0=await database_1[_0x42eb11(0xb5)][_0x42eb11(0xaf)]['findUnique']({'where':{'shopId':_0x5cd0a0},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x42edf0)throw new Error(_0x42eb11(0xb3));return{'webhook':{'url':_0x42edf0[_0x42eb11(0x9f)],'events':this[_0x42eb11(0xb6)](_0x42edf0[_0x42eb11(0x9d)])}};}async[a43_0xa6fb38(0x9a)](_0x307058,_0x1e5ac5){const _0x499139=a43_0xa6fb38;await this['ensureSettingsExist'](_0x307058);const _0x489bf0={};_0x1e5ac5[_0x499139(0x9f)]!==undefined&&(_0x489bf0[_0x499139(0x9f)]=_0x1e5ac5[_0x499139(0x9f)]||null),_0x1e5ac5[_0x499139(0x9d)]!==undefined&&(_0x489bf0[_0x499139(0x9d)]=_0x1e5ac5[_0x499139(0x9d)]||[]),await database_1[_0x499139(0xb5)][_0x499139(0xaf)][_0x499139(0xa1)]({'where':{'shopId':_0x307058},'data':_0x489bf0});}async['ensureSettingsExist'](_0x1a0a73){const _0x1f01e3=a43_0xa6fb38,_0x225a18=await database_1['default']['shopSettings']['findUnique']({'where':{'shopId':_0x1a0a73}});!_0x225a18&&await database_1[_0x1f01e3(0xb5)][_0x1f01e3(0xaf)][_0x1f01e3(0xa7)]({'data':{'shopId':_0x1a0a73}});}}exports['IntegrationsService']=IntegrationsService;function a43_0xd574(){const _0x192f28=['6163780kpEHOb','update','1192xEMjhV','83255kNteOI','IntegrationsService','6EwSfSN','ensureSettingsExist','create','string','parse','isArray','3089273WmIYIy','defineProperty','1204BlfKXr','9736qlrMbi','shopSettings','2591952kBdbza','2575PpfHlv','__esModule','Shop\x20settings\x20not\x20found','288969qjohqd','default','parseWebhookEvents','updateWebhookSettings','9iglCAy','getIntegrations','webhookEvents','../config/database','webhookUrl'];a43_0xd574=function(){return _0x192f28;};return a43_0xd574();}