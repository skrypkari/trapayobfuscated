'use strict';const a50_0x24a7f8=a50_0x5b37;(function(_0x5e9b72,_0x15d275){const _0x4ec893=a50_0x5b37,_0x32f768=_0x5e9b72();while(!![]){try{const _0x1b10e7=parseInt(_0x4ec893(0x1ce))/0x1*(parseInt(_0x4ec893(0x1c4))/0x2)+parseInt(_0x4ec893(0x1c6))/0x3*(parseInt(_0x4ec893(0x1bf))/0x4)+-parseInt(_0x4ec893(0x1d7))/0x5*(-parseInt(_0x4ec893(0x1c5))/0x6)+-parseInt(_0x4ec893(0x1d4))/0x7+-parseInt(_0x4ec893(0x1c7))/0x8*(parseInt(_0x4ec893(0x1bd))/0x9)+-parseInt(_0x4ec893(0x1c9))/0xa+-parseInt(_0x4ec893(0x1ca))/0xb*(-parseInt(_0x4ec893(0x1c0))/0xc);if(_0x1b10e7===_0x15d275)break;else _0x32f768['push'](_0x32f768['shift']());}catch(_0x5bad45){_0x32f768['push'](_0x32f768['shift']());}}}(a50_0x3c61,0x6200a));function a50_0x5b37(_0xc0bf1,_0x4cb007){const _0x3c6156=a50_0x3c61();return a50_0x5b37=function(_0x5b37a9,_0x498e8a){_0x5b37a9=_0x5b37a9-0x1bc;let _0x1aa785=_0x3c6156[_0x5b37a9];return _0x1aa785;},a50_0x5b37(_0xc0bf1,_0x4cb007);}var __importDefault=this&&this['__importDefault']||function(_0x4cdfe9){const _0xf5f877=a50_0x5b37;return _0x4cdfe9&&_0x4cdfe9[_0xf5f877(0x1d0)]?_0x4cdfe9:{'default':_0x4cdfe9};};Object['defineProperty'](exports,a50_0x24a7f8(0x1d0),{'value':!![]}),exports[a50_0x24a7f8(0x1cb)]=void 0x0;const database_1=__importDefault(require(a50_0x24a7f8(0x1c3)));class IntegrationsService{['parseWebhookEvents'](_0x613824){const _0xbe50c0=a50_0x24a7f8;if(!_0x613824)return[];if(Array[_0xbe50c0(0x1d8)](_0x613824))return _0x613824;if(typeof _0x613824===_0xbe50c0(0x1c8))try{const _0x51fe43=JSON[_0xbe50c0(0x1cd)](_0x613824);return Array[_0xbe50c0(0x1d8)](_0x51fe43)?_0x51fe43:[];}catch{return[];}return[];}async[a50_0x24a7f8(0x1c1)](_0x491ce9){const _0x4fc9f4=a50_0x24a7f8;await this[_0x4fc9f4(0x1cc)](_0x491ce9);const _0x3b6d01=await database_1['default'][_0x4fc9f4(0x1d6)][_0x4fc9f4(0x1d1)]({'where':{'shopId':_0x491ce9},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x3b6d01)throw new Error(_0x4fc9f4(0x1d3));return{'webhook':{'url':_0x3b6d01[_0x4fc9f4(0x1d5)],'events':this[_0x4fc9f4(0x1d2)](_0x3b6d01[_0x4fc9f4(0x1c2)])}};}async['updateWebhookSettings'](_0x3a9a96,_0x165f81){const _0x14a312=a50_0x24a7f8;await this[_0x14a312(0x1cc)](_0x3a9a96);const _0x218a40={};_0x165f81[_0x14a312(0x1d5)]!==undefined&&(_0x218a40[_0x14a312(0x1d5)]=_0x165f81['webhookUrl']||null),_0x165f81['webhookEvents']!==undefined&&(_0x218a40['webhookEvents']=_0x165f81[_0x14a312(0x1c2)]||[]),await database_1[_0x14a312(0x1cf)][_0x14a312(0x1d6)][_0x14a312(0x1bc)]({'where':{'shopId':_0x3a9a96},'data':_0x218a40});}async[a50_0x24a7f8(0x1cc)](_0x473cd6){const _0x7f0e31=a50_0x24a7f8,_0x4c68dc=await database_1['default']['shopSettings'][_0x7f0e31(0x1d1)]({'where':{'shopId':_0x473cd6}});!_0x4c68dc&&await database_1[_0x7f0e31(0x1cf)][_0x7f0e31(0x1d6)][_0x7f0e31(0x1be)]({'data':{'shopId':_0x473cd6}});}}exports[a50_0x24a7f8(0x1cb)]=IntegrationsService;function a50_0x3c61(){const _0x56225a=['1319340UpFdCK','getIntegrations','webhookEvents','../config/database','18uZIDgu','18kAZAAF','1637478dcgYEV','4159976MiYwZC','string','4095360CiPOCi','44vufuRw','IntegrationsService','ensureSettingsExist','parse','65912mIpcWB','default','__esModule','findUnique','parseWebhookEvents','Shop\x20settings\x20not\x20found','4455528mLWtsP','webhookUrl','shopSettings','647735fkcJps','isArray','update','9LGjhPE','create','4QUcJVQ'];a50_0x3c61=function(){return _0x56225a;};return a50_0x3c61();}