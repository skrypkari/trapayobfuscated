'use strict';const a43_0x55f7d2=a43_0x4034;(function(_0x153bad,_0x2c47af){const _0x5c7363=a43_0x4034,_0x21c742=_0x153bad();while(!![]){try{const _0x37606d=parseInt(_0x5c7363(0x160))/0x1*(parseInt(_0x5c7363(0x163))/0x2)+parseInt(_0x5c7363(0x162))/0x3*(parseInt(_0x5c7363(0x164))/0x4)+-parseInt(_0x5c7363(0x178))/0x5*(parseInt(_0x5c7363(0x16d))/0x6)+parseInt(_0x5c7363(0x173))/0x7+-parseInt(_0x5c7363(0x174))/0x8+parseInt(_0x5c7363(0x172))/0x9+-parseInt(_0x5c7363(0x161))/0xa;if(_0x37606d===_0x2c47af)break;else _0x21c742['push'](_0x21c742['shift']());}catch(_0x356774){_0x21c742['push'](_0x21c742['shift']());}}}(a43_0x3701,0x89008));function a43_0x3701(){const _0x53b7e9=['296qxrvAW','8YeHVCI','getIntegrations','__importDefault','default','isArray','findUnique','webhookEvents','../config/database','__esModule','757362FLydNn','ensureSettingsExist','update','webhookUrl','IntegrationsService','1526778gdzDez','6310073hjkBgb','5405216gtrFNZ','Shop\x20settings\x20not\x20found','shopSettings','updateWebhookSettings','25gQEjbG','parseWebhookEvents','defineProperty','create','4687BZRhSQ','8856620vKeDfW','1483278kWndIj'];a43_0x3701=function(){return _0x53b7e9;};return a43_0x3701();}var __importDefault=this&&this[a43_0x55f7d2(0x166)]||function(_0x1c528d){const _0xd0dccf=a43_0x55f7d2;return _0x1c528d&&_0x1c528d[_0xd0dccf(0x16c)]?_0x1c528d:{'default':_0x1c528d};};function a43_0x4034(_0x3e5a28,_0x40e124){const _0x3701c5=a43_0x3701();return a43_0x4034=function(_0x4034b4,_0x1641dd){_0x4034b4=_0x4034b4-0x160;let _0x5706e3=_0x3701c5[_0x4034b4];return _0x5706e3;},a43_0x4034(_0x3e5a28,_0x40e124);}Object[a43_0x55f7d2(0x17a)](exports,a43_0x55f7d2(0x16c),{'value':!![]}),exports[a43_0x55f7d2(0x171)]=void 0x0;const database_1=__importDefault(require(a43_0x55f7d2(0x16b)));class IntegrationsService{[a43_0x55f7d2(0x179)](_0x3b83a8){const _0x59a83d=a43_0x55f7d2;if(!_0x3b83a8)return[];if(Array['isArray'](_0x3b83a8))return _0x3b83a8;if(typeof _0x3b83a8==='string')try{const _0x250756=JSON['parse'](_0x3b83a8);return Array[_0x59a83d(0x168)](_0x250756)?_0x250756:[];}catch{return[];}return[];}async[a43_0x55f7d2(0x165)](_0x13eacc){const _0x4e57c2=a43_0x55f7d2;await this[_0x4e57c2(0x16e)](_0x13eacc);const _0x6efb49=await database_1['default']['shopSettings'][_0x4e57c2(0x169)]({'where':{'shopId':_0x13eacc},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x6efb49)throw new Error(_0x4e57c2(0x175));return{'webhook':{'url':_0x6efb49[_0x4e57c2(0x170)],'events':this[_0x4e57c2(0x179)](_0x6efb49[_0x4e57c2(0x16a)])}};}async[a43_0x55f7d2(0x177)](_0xaba6b9,_0x33bb76){const _0x43a341=a43_0x55f7d2;await this[_0x43a341(0x16e)](_0xaba6b9);const _0x1d211a={};_0x33bb76[_0x43a341(0x170)]!==undefined&&(_0x1d211a[_0x43a341(0x170)]=_0x33bb76['webhookUrl']||null),_0x33bb76[_0x43a341(0x16a)]!==undefined&&(_0x1d211a[_0x43a341(0x16a)]=_0x33bb76[_0x43a341(0x16a)]||[]),await database_1[_0x43a341(0x167)]['shopSettings'][_0x43a341(0x16f)]({'where':{'shopId':_0xaba6b9},'data':_0x1d211a});}async[a43_0x55f7d2(0x16e)](_0x57099f){const _0x18afac=a43_0x55f7d2,_0x1a2ff8=await database_1[_0x18afac(0x167)][_0x18afac(0x176)][_0x18afac(0x169)]({'where':{'shopId':_0x57099f}});!_0x1a2ff8&&await database_1[_0x18afac(0x167)][_0x18afac(0x176)][_0x18afac(0x17b)]({'data':{'shopId':_0x57099f}});}}exports['IntegrationsService']=IntegrationsService;