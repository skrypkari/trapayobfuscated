'use strict';function a48_0x6ddd(_0xdd3bd3,_0x17ccb2){const _0x2a90eb=a48_0x2a90();return a48_0x6ddd=function(_0x6ddd12,_0x5acc54){_0x6ddd12=_0x6ddd12-0x76;let _0x10c2f5=_0x2a90eb[_0x6ddd12];return _0x10c2f5;},a48_0x6ddd(_0xdd3bd3,_0x17ccb2);}function a48_0x2a90(){const _0x3617a8=['1234936ARVrrj','7UZLQua','296PsfAyg','updateWebhookSettings','create','194590dCrcaP','parseWebhookEvents','parse','1970nkVfvZ','691965UPGAet','webhookUrl','ensureSettingsExist','isArray','__esModule','Shop\x20settings\x20not\x20found','__importDefault','80997BHBpLK','427032oBjUSf','297veUipC','2073042CPyuHc','shopSettings','update','webhookEvents','findUnique','default','IntegrationsService'];a48_0x2a90=function(){return _0x3617a8;};return a48_0x2a90();}const a48_0x1dec14=a48_0x6ddd;(function(_0x2163f5,_0x5d2326){const _0x3c1ebf=a48_0x6ddd,_0x428867=_0x2163f5();while(!![]){try{const _0x4553ff=parseInt(_0x3c1ebf(0x7f))/0x1+-parseInt(_0x3c1ebf(0x80))/0x2+parseInt(_0x3c1ebf(0x78))/0x3+parseInt(_0x3c1ebf(0x8b))/0x4*(-parseInt(_0x3c1ebf(0x77))/0x5)+-parseInt(_0x3c1ebf(0x82))/0x6+-parseInt(_0x3c1ebf(0x8a))/0x7*(parseInt(_0x3c1ebf(0x89))/0x8)+-parseInt(_0x3c1ebf(0x81))/0x9*(-parseInt(_0x3c1ebf(0x8e))/0xa);if(_0x4553ff===_0x5d2326)break;else _0x428867['push'](_0x428867['shift']());}catch(_0x5f5187){_0x428867['push'](_0x428867['shift']());}}}(a48_0x2a90,0x33935));var __importDefault=this&&this[a48_0x1dec14(0x7e)]||function(_0x4c7461){const _0xff5702=a48_0x1dec14;return _0x4c7461&&_0x4c7461[_0xff5702(0x7c)]?_0x4c7461:{'default':_0x4c7461};};Object['defineProperty'](exports,a48_0x1dec14(0x7c),{'value':!![]}),exports[a48_0x1dec14(0x88)]=void 0x0;const database_1=__importDefault(require('../config/database'));class IntegrationsService{[a48_0x1dec14(0x8f)](_0x1bda0a){const _0x338a35=a48_0x1dec14;if(!_0x1bda0a)return[];if(Array[_0x338a35(0x7b)](_0x1bda0a))return _0x1bda0a;if(typeof _0x1bda0a==='string')try{const _0x39a32f=JSON[_0x338a35(0x76)](_0x1bda0a);return Array[_0x338a35(0x7b)](_0x39a32f)?_0x39a32f:[];}catch{return[];}return[];}async['getIntegrations'](_0x87c784){const _0x54569a=a48_0x1dec14;await this['ensureSettingsExist'](_0x87c784);const _0x2b2b58=await database_1[_0x54569a(0x87)]['shopSettings'][_0x54569a(0x86)]({'where':{'shopId':_0x87c784},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x2b2b58)throw new Error(_0x54569a(0x7d));return{'webhook':{'url':_0x2b2b58[_0x54569a(0x79)],'events':this[_0x54569a(0x8f)](_0x2b2b58[_0x54569a(0x85)])}};}async[a48_0x1dec14(0x8c)](_0x415903,_0x5bda47){const _0x4f96d6=a48_0x1dec14;await this[_0x4f96d6(0x7a)](_0x415903);const _0x4b1d8b={};_0x5bda47[_0x4f96d6(0x79)]!==undefined&&(_0x4b1d8b[_0x4f96d6(0x79)]=_0x5bda47[_0x4f96d6(0x79)]||null),_0x5bda47[_0x4f96d6(0x85)]!==undefined&&(_0x4b1d8b[_0x4f96d6(0x85)]=_0x5bda47[_0x4f96d6(0x85)]||[]),await database_1[_0x4f96d6(0x87)][_0x4f96d6(0x83)][_0x4f96d6(0x84)]({'where':{'shopId':_0x415903},'data':_0x4b1d8b});}async[a48_0x1dec14(0x7a)](_0x483b9c){const _0x269fe9=a48_0x1dec14,_0x459150=await database_1[_0x269fe9(0x87)]['shopSettings'][_0x269fe9(0x86)]({'where':{'shopId':_0x483b9c}});!_0x459150&&await database_1[_0x269fe9(0x87)][_0x269fe9(0x83)][_0x269fe9(0x8d)]({'data':{'shopId':_0x483b9c}});}}exports[a48_0x1dec14(0x88)]=IntegrationsService;