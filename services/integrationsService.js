'use strict';const a54_0x12c8a5=a54_0x165a;(function(_0x39d42a,_0x256dfe){const _0x1ea228=a54_0x165a,_0x4dc018=_0x39d42a();while(!![]){try{const _0x46f7e5=-parseInt(_0x1ea228(0x190))/0x1+-parseInt(_0x1ea228(0x188))/0x2+parseInt(_0x1ea228(0x199))/0x3*(parseInt(_0x1ea228(0x18a))/0x4)+-parseInt(_0x1ea228(0x19c))/0x5*(-parseInt(_0x1ea228(0x18e))/0x6)+parseInt(_0x1ea228(0x193))/0x7+parseInt(_0x1ea228(0x18b))/0x8+parseInt(_0x1ea228(0x194))/0x9*(-parseInt(_0x1ea228(0x196))/0xa);if(_0x46f7e5===_0x256dfe)break;else _0x4dc018['push'](_0x4dc018['shift']());}catch(_0x16b7ad){_0x4dc018['push'](_0x4dc018['shift']());}}}(a54_0x3542,0xc6fc4));function a54_0x165a(_0x19e854,_0x38cf70){const _0x35422f=a54_0x3542();return a54_0x165a=function(_0x165aa0,_0x4eb958){_0x165aa0=_0x165aa0-0x184;let _0xd17c8c=_0x35422f[_0x165aa0];return _0xd17c8c;},a54_0x165a(_0x19e854,_0x38cf70);}var __importDefault=this&&this[a54_0x12c8a5(0x19e)]||function(_0x244f82){return _0x244f82&&_0x244f82['__esModule']?_0x244f82:{'default':_0x244f82};};Object[a54_0x12c8a5(0x19a)](exports,a54_0x12c8a5(0x189),{'value':!![]}),exports[a54_0x12c8a5(0x18c)]=void 0x0;function a54_0x3542(){const _0x13f97e=['42KnSSMU','default','884021toSGAg','parse','getIntegrations','2788205htOGJj','47979XpFFoW','parseWebhookEvents','2670JYnwbl','update','../config/database','2428212LNwNCU','defineProperty','shopSettings','507935JBanPJ','updateWebhookSettings','__importDefault','webhookUrl','isArray','webhookEvents','string','ensureSettingsExist','298694eslqKO','__esModule','4ztqXfE','10823688wUdoXV','IntegrationsService','create'];a54_0x3542=function(){return _0x13f97e;};return a54_0x3542();}const database_1=__importDefault(require(a54_0x12c8a5(0x198)));class IntegrationsService{['parseWebhookEvents'](_0x542b70){const _0x8ff837=a54_0x12c8a5;if(!_0x542b70)return[];if(Array['isArray'](_0x542b70))return _0x542b70;if(typeof _0x542b70===_0x8ff837(0x186))try{const _0x51d8f9=JSON[_0x8ff837(0x191)](_0x542b70);return Array[_0x8ff837(0x184)](_0x51d8f9)?_0x51d8f9:[];}catch{return[];}return[];}async[a54_0x12c8a5(0x192)](_0x592a44){const _0x29b184=a54_0x12c8a5;await this['ensureSettingsExist'](_0x592a44);const _0x2a980a=await database_1['default']['shopSettings']['findUnique']({'where':{'shopId':_0x592a44},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x2a980a)throw new Error('Shop\x20settings\x20not\x20found');return{'webhook':{'url':_0x2a980a[_0x29b184(0x19f)],'events':this[_0x29b184(0x195)](_0x2a980a[_0x29b184(0x185)])}};}async[a54_0x12c8a5(0x19d)](_0x556524,_0x8a5c19){const _0x1c6a22=a54_0x12c8a5;await this[_0x1c6a22(0x187)](_0x556524);const _0x244786={};_0x8a5c19[_0x1c6a22(0x19f)]!==undefined&&(_0x244786[_0x1c6a22(0x19f)]=_0x8a5c19[_0x1c6a22(0x19f)]||null),_0x8a5c19[_0x1c6a22(0x185)]!==undefined&&(_0x244786['webhookEvents']=_0x8a5c19[_0x1c6a22(0x185)]||[]),await database_1[_0x1c6a22(0x18f)][_0x1c6a22(0x19b)][_0x1c6a22(0x197)]({'where':{'shopId':_0x556524},'data':_0x244786});}async[a54_0x12c8a5(0x187)](_0x204b11){const _0x5940a1=a54_0x12c8a5,_0x47de66=await database_1[_0x5940a1(0x18f)]['shopSettings']['findUnique']({'where':{'shopId':_0x204b11}});!_0x47de66&&await database_1['default'][_0x5940a1(0x19b)][_0x5940a1(0x18d)]({'data':{'shopId':_0x204b11}});}}exports[a54_0x12c8a5(0x18c)]=IntegrationsService;