'use strict';const a48_0x434a40=a48_0x2599;(function(_0x52ae30,_0x420a7e){const _0x550b5e=a48_0x2599,_0x173f9c=_0x52ae30();while(!![]){try{const _0x269d06=parseInt(_0x550b5e(0x203))/0x1+-parseInt(_0x550b5e(0x1fe))/0x2*(parseInt(_0x550b5e(0x208))/0x3)+-parseInt(_0x550b5e(0x200))/0x4*(-parseInt(_0x550b5e(0x204))/0x5)+-parseInt(_0x550b5e(0x209))/0x6*(-parseInt(_0x550b5e(0x20b))/0x7)+-parseInt(_0x550b5e(0x1f1))/0x8*(parseInt(_0x550b5e(0x1fc))/0x9)+-parseInt(_0x550b5e(0x1f3))/0xa+parseInt(_0x550b5e(0x1fb))/0xb;if(_0x269d06===_0x420a7e)break;else _0x173f9c['push'](_0x173f9c['shift']());}catch(_0x3f7ed9){_0x173f9c['push'](_0x173f9c['shift']());}}}(a48_0x30bc,0xec3e6));var __importDefault=this&&this[a48_0x434a40(0x1ef)]||function(_0x2e7a18){const _0x15e6e1=a48_0x434a40;return _0x2e7a18&&_0x2e7a18[_0x15e6e1(0x1ff)]?_0x2e7a18:{'default':_0x2e7a18};};function a48_0x2599(_0x17e640,_0x199972){const _0x30bc24=a48_0x30bc();return a48_0x2599=function(_0x259954,_0x2cedb4){_0x259954=_0x259954-0x1ef;let _0x2c6912=_0x30bc24[_0x259954];return _0x2c6912;},a48_0x2599(_0x17e640,_0x199972);}Object[a48_0x434a40(0x202)](exports,'__esModule',{'value':!![]}),exports[a48_0x434a40(0x206)]=void 0x0;const database_1=__importDefault(require(a48_0x434a40(0x1f9)));class IntegrationsService{[a48_0x434a40(0x1fa)](_0x1d205c){const _0x2be0eb=a48_0x434a40;if(!_0x1d205c)return[];if(Array[_0x2be0eb(0x20a)](_0x1d205c))return _0x1d205c;if(typeof _0x1d205c===_0x2be0eb(0x1f0))try{const _0x5bd8ab=JSON[_0x2be0eb(0x1f2)](_0x1d205c);return Array[_0x2be0eb(0x20a)](_0x5bd8ab)?_0x5bd8ab:[];}catch{return[];}return[];}async[a48_0x434a40(0x1f8)](_0x4ca0c5){const _0xf59460=a48_0x434a40;await this[_0xf59460(0x1fd)](_0x4ca0c5);const _0x4f80fe=await database_1['default'][_0xf59460(0x207)][_0xf59460(0x1f4)]({'where':{'shopId':_0x4ca0c5},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x4f80fe)throw new Error(_0xf59460(0x1f5));return{'webhook':{'url':_0x4f80fe[_0xf59460(0x1f6)],'events':this['parseWebhookEvents'](_0x4f80fe['webhookEvents'])}};}async['updateWebhookSettings'](_0x1d7758,_0x2d36b8){const _0xe429d3=a48_0x434a40;await this[_0xe429d3(0x1fd)](_0x1d7758);const _0x2718fc={};_0x2d36b8['webhookUrl']!==undefined&&(_0x2718fc[_0xe429d3(0x1f6)]=_0x2d36b8[_0xe429d3(0x1f6)]||null),_0x2d36b8[_0xe429d3(0x205)]!==undefined&&(_0x2718fc[_0xe429d3(0x205)]=_0x2d36b8[_0xe429d3(0x205)]||[]),await database_1['default'][_0xe429d3(0x207)][_0xe429d3(0x201)]({'where':{'shopId':_0x1d7758},'data':_0x2718fc});}async[a48_0x434a40(0x1fd)](_0x1a6991){const _0x333998=a48_0x434a40,_0x274d6e=await database_1['default']['shopSettings'][_0x333998(0x1f4)]({'where':{'shopId':_0x1a6991}});!_0x274d6e&&await database_1['default'][_0x333998(0x207)][_0x333998(0x1f7)]({'data':{'shopId':_0x1a6991}});}}function a48_0x30bc(){const _0xbf2f97=['430020LvQcuH','findUnique','Shop\x20settings\x20not\x20found','webhookUrl','create','getIntegrations','../config/database','parseWebhookEvents','19792443DRJUOc','27Zsskum','ensureSettingsExist','76ilUoUi','__esModule','35732GfpUJn','update','defineProperty','389202JMavpD','750lXnoHl','webhookEvents','IntegrationsService','shopSettings','118932JWDmBP','78114OmKwyc','isArray','196mRHxLZ','__importDefault','string','3668984MCGtRA','parse'];a48_0x30bc=function(){return _0xbf2f97;};return a48_0x30bc();}exports[a48_0x434a40(0x206)]=IntegrationsService;