'use strict';const a43_0x652efb=a43_0x2fb0;(function(_0x5d79ff,_0x2cb27f){const _0x2810c8=a43_0x2fb0,_0x68c1d9=_0x5d79ff();while(!![]){try{const _0x450df7=parseInt(_0x2810c8(0x18b))/0x1*(-parseInt(_0x2810c8(0x1a0))/0x2)+parseInt(_0x2810c8(0x190))/0x3*(-parseInt(_0x2810c8(0x1a7))/0x4)+-parseInt(_0x2810c8(0x1a5))/0x5+-parseInt(_0x2810c8(0x191))/0x6*(-parseInt(_0x2810c8(0x19a))/0x7)+-parseInt(_0x2810c8(0x1a4))/0x8+parseInt(_0x2810c8(0x18e))/0x9*(parseInt(_0x2810c8(0x19d))/0xa)+parseInt(_0x2810c8(0x196))/0xb;if(_0x450df7===_0x2cb27f)break;else _0x68c1d9['push'](_0x68c1d9['shift']());}catch(_0x41826){_0x68c1d9['push'](_0x68c1d9['shift']());}}}(a43_0x3aed,0xd3dc4));var __importDefault=this&&this[a43_0x652efb(0x19f)]||function(_0x14ff80){const _0x5a5ac1=a43_0x652efb;return _0x14ff80&&_0x14ff80[_0x5a5ac1(0x1a6)]?_0x14ff80:{'default':_0x14ff80};};function a43_0x2fb0(_0x559adb,_0x4309ec){const _0x3aed82=a43_0x3aed();return a43_0x2fb0=function(_0x2fb08d,_0x2caf73){_0x2fb08d=_0x2fb08d-0x18b;let _0x27dd8e=_0x3aed82[_0x2fb08d];return _0x27dd8e;},a43_0x2fb0(_0x559adb,_0x4309ec);}Object[a43_0x652efb(0x194)](exports,a43_0x652efb(0x1a6),{'value':!![]}),exports[a43_0x652efb(0x1a3)]=void 0x0;function a43_0x3aed(){const _0x38ee14=['36jUGQXb','webhookUrl','597asFSoZ','366HDxCvN','findUnique','parseWebhookEvents','defineProperty','isArray','47335310SLrJxK','parse','getIntegrations','webhookEvents','44842IyujWA','create','ensureSettingsExist','105610jRUEFo','Shop\x20settings\x20not\x20found','__importDefault','2LknKzp','default','update','IntegrationsService','41016VsAOIN','4465225zmihWz','__esModule','30764bRaJkG','shopSettings','1439759mhZqgW','updateWebhookSettings','string'];a43_0x3aed=function(){return _0x38ee14;};return a43_0x3aed();}const database_1=__importDefault(require('../config/database'));class IntegrationsService{[a43_0x652efb(0x193)](_0x88f777){const _0x6dc44d=a43_0x652efb;if(!_0x88f777)return[];if(Array['isArray'](_0x88f777))return _0x88f777;if(typeof _0x88f777===_0x6dc44d(0x18d))try{const _0x4c5c61=JSON[_0x6dc44d(0x197)](_0x88f777);return Array[_0x6dc44d(0x195)](_0x4c5c61)?_0x4c5c61:[];}catch{return[];}return[];}async[a43_0x652efb(0x198)](_0x4565c9){const _0x15a64f=a43_0x652efb;await this[_0x15a64f(0x19c)](_0x4565c9);const _0x36456c=await database_1[_0x15a64f(0x1a1)]['shopSettings'][_0x15a64f(0x192)]({'where':{'shopId':_0x4565c9},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x36456c)throw new Error(_0x15a64f(0x19e));return{'webhook':{'url':_0x36456c['webhookUrl'],'events':this['parseWebhookEvents'](_0x36456c[_0x15a64f(0x199)])}};}async[a43_0x652efb(0x18c)](_0x4b2236,_0x321894){const _0x359365=a43_0x652efb;await this[_0x359365(0x19c)](_0x4b2236);const _0x478421={};_0x321894[_0x359365(0x18f)]!==undefined&&(_0x478421[_0x359365(0x18f)]=_0x321894[_0x359365(0x18f)]||null),_0x321894[_0x359365(0x199)]!==undefined&&(_0x478421[_0x359365(0x199)]=_0x321894[_0x359365(0x199)]||[]),await database_1[_0x359365(0x1a1)][_0x359365(0x1a8)][_0x359365(0x1a2)]({'where':{'shopId':_0x4b2236},'data':_0x478421});}async[a43_0x652efb(0x19c)](_0x246176){const _0x32f090=a43_0x652efb,_0x458e5f=await database_1[_0x32f090(0x1a1)][_0x32f090(0x1a8)][_0x32f090(0x192)]({'where':{'shopId':_0x246176}});!_0x458e5f&&await database_1[_0x32f090(0x1a1)][_0x32f090(0x1a8)][_0x32f090(0x19b)]({'data':{'shopId':_0x246176}});}}exports[a43_0x652efb(0x1a3)]=IntegrationsService;