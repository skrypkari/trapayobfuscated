'use strict';function a52_0x3027(_0x170e9a,_0x17693b){const _0x3ba4bf=a52_0x3ba4();return a52_0x3027=function(_0x302794,_0x488a08){_0x302794=_0x302794-0x79;let _0x53dd2a=_0x3ba4bf[_0x302794];return _0x53dd2a;},a52_0x3027(_0x170e9a,_0x17693b);}const a52_0x1c4a98=a52_0x3027;(function(_0x5c727f,_0x55114f){const _0x59c7aa=a52_0x3027,_0x353acf=_0x5c727f();while(!![]){try{const _0x17027e=-parseInt(_0x59c7aa(0x91))/0x1+-parseInt(_0x59c7aa(0x8e))/0x2*(-parseInt(_0x59c7aa(0x7a))/0x3)+parseInt(_0x59c7aa(0x8c))/0x4+parseInt(_0x59c7aa(0x83))/0x5*(-parseInt(_0x59c7aa(0x86))/0x6)+parseInt(_0x59c7aa(0x87))/0x7+parseInt(_0x59c7aa(0x81))/0x8+parseInt(_0x59c7aa(0x80))/0x9;if(_0x17027e===_0x55114f)break;else _0x353acf['push'](_0x353acf['shift']());}catch(_0x9e6f06){_0x353acf['push'](_0x353acf['shift']());}}}(a52_0x3ba4,0xb6a08));var __importDefault=this&&this[a52_0x1c4a98(0x79)]||function(_0x1c168f){const _0x3465f8=a52_0x1c4a98;return _0x1c168f&&_0x1c168f[_0x3465f8(0x7b)]?_0x1c168f:{'default':_0x1c168f};};Object[a52_0x1c4a98(0x94)](exports,'__esModule',{'value':!![]}),exports['IntegrationsService']=void 0x0;const database_1=__importDefault(require('../config/database'));class IntegrationsService{[a52_0x1c4a98(0x90)](_0x4af1cd){const _0x3dd9f9=a52_0x1c4a98;if(!_0x4af1cd)return[];if(Array[_0x3dd9f9(0x93)](_0x4af1cd))return _0x4af1cd;if(typeof _0x4af1cd===_0x3dd9f9(0x7e))try{const _0x577139=JSON[_0x3dd9f9(0x85)](_0x4af1cd);return Array['isArray'](_0x577139)?_0x577139:[];}catch{return[];}return[];}async[a52_0x1c4a98(0x8f)](_0x1378b3){const _0x726e69=a52_0x1c4a98;await this[_0x726e69(0x8d)](_0x1378b3);const _0x9aeb55=await database_1['default'][_0x726e69(0x92)][_0x726e69(0x7d)]({'where':{'shopId':_0x1378b3},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x9aeb55)throw new Error(_0x726e69(0x82));return{'webhook':{'url':_0x9aeb55['webhookUrl'],'events':this[_0x726e69(0x90)](_0x9aeb55[_0x726e69(0x8a)])}};}async[a52_0x1c4a98(0x84)](_0x57be9c,_0x158b8c){const _0x13e8ea=a52_0x1c4a98;await this[_0x13e8ea(0x8d)](_0x57be9c);const _0x469402={};_0x158b8c['webhookUrl']!==undefined&&(_0x469402[_0x13e8ea(0x7f)]=_0x158b8c[_0x13e8ea(0x7f)]||null),_0x158b8c[_0x13e8ea(0x8a)]!==undefined&&(_0x469402[_0x13e8ea(0x8a)]=_0x158b8c[_0x13e8ea(0x8a)]||[]),await database_1[_0x13e8ea(0x88)][_0x13e8ea(0x92)][_0x13e8ea(0x7c)]({'where':{'shopId':_0x57be9c},'data':_0x469402});}async[a52_0x1c4a98(0x8d)](_0x2748fd){const _0x33652f=a52_0x1c4a98,_0x4d858f=await database_1['default'][_0x33652f(0x92)][_0x33652f(0x7d)]({'where':{'shopId':_0x2748fd}});!_0x4d858f&&await database_1[_0x33652f(0x88)][_0x33652f(0x92)][_0x33652f(0x8b)]({'data':{'shopId':_0x2748fd}});}}function a52_0x3ba4(){const _0x49f886=['1200864nvVLZk','default','IntegrationsService','webhookEvents','create','886996BTqftH','ensureSettingsExist','990538QxGSFD','getIntegrations','parseWebhookEvents','682609mvNYte','shopSettings','isArray','defineProperty','__importDefault','6VwIkTI','__esModule','update','findUnique','string','webhookUrl','4861512efpptE','1188808oCFweG','Shop\x20settings\x20not\x20found','3209795wPeBZM','updateWebhookSettings','parse','6ERKAqp'];a52_0x3ba4=function(){return _0x49f886;};return a52_0x3ba4();}exports[a52_0x1c4a98(0x89)]=IntegrationsService;