'use strict';const a78_0x28b8bb=a78_0x1a9e;(function(_0x46efc2,_0x3fd484){const _0x233929=a78_0x1a9e,_0x46c6dc=_0x46efc2();while(!![]){try{const _0x5eee13=parseInt(_0x233929(0x1d5))/0x1+parseInt(_0x233929(0x1c9))/0x2+-parseInt(_0x233929(0x1ce))/0x3*(-parseInt(_0x233929(0x1d8))/0x4)+parseInt(_0x233929(0x1c0))/0x5*(parseInt(_0x233929(0x1cf))/0x6)+-parseInt(_0x233929(0x1d3))/0x7*(-parseInt(_0x233929(0x1bd))/0x8)+parseInt(_0x233929(0x1d0))/0x9*(-parseInt(_0x233929(0x1d9))/0xa)+-parseInt(_0x233929(0x1be))/0xb*(parseInt(_0x233929(0x1c5))/0xc);if(_0x5eee13===_0x3fd484)break;else _0x46c6dc['push'](_0x46c6dc['shift']());}catch(_0x3f1f15){_0x46c6dc['push'](_0x46c6dc['shift']());}}}(a78_0x2e07,0x3e04d));var __importDefault=this&&this[a78_0x28b8bb(0x1cd)]||function(_0x2ecf04){const _0x5b0a51=a78_0x28b8bb;return _0x2ecf04&&_0x2ecf04[_0x5b0a51(0x1c1)]?_0x2ecf04:{'default':_0x2ecf04};};Object[a78_0x28b8bb(0x1d2)](exports,a78_0x28b8bb(0x1c1),{'value':!![]}),exports[a78_0x28b8bb(0x1d6)]=void 0x0;const database_1=__importDefault(require(a78_0x28b8bb(0x1d1)));class IntegrationsService{['parseWebhookEvents'](_0x24c47e){const _0x519e53=a78_0x28b8bb;if(!_0x24c47e)return[];if(Array[_0x519e53(0x1c6)](_0x24c47e))return _0x24c47e;if(typeof _0x24c47e==='string')try{const _0x30a8a3=JSON[_0x519e53(0x1c8)](_0x24c47e);return Array[_0x519e53(0x1c6)](_0x30a8a3)?_0x30a8a3:[];}catch{return[];}return[];}async[a78_0x28b8bb(0x1d7)](_0x4a22b6){const _0x24d73b=a78_0x28b8bb;await this['ensureSettingsExist'](_0x4a22b6);const _0x4d48a5=await database_1[_0x24d73b(0x1c2)][_0x24d73b(0x1bf)][_0x24d73b(0x1ca)]({'where':{'shopId':_0x4a22b6},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x4d48a5)throw new Error(_0x24d73b(0x1cb));return{'webhook':{'url':_0x4d48a5[_0x24d73b(0x1cc)],'events':this[_0x24d73b(0x1d4)](_0x4d48a5[_0x24d73b(0x1c7)])}};}async['updateWebhookSettings'](_0xd0e0c8,_0x111ac9){const _0x5f5290=a78_0x28b8bb;await this[_0x5f5290(0x1bc)](_0xd0e0c8);const _0x1822f1={};_0x111ac9[_0x5f5290(0x1cc)]!==undefined&&(_0x1822f1[_0x5f5290(0x1cc)]=_0x111ac9['webhookUrl']||null),_0x111ac9[_0x5f5290(0x1c7)]!==undefined&&(_0x1822f1[_0x5f5290(0x1c7)]=_0x111ac9[_0x5f5290(0x1c7)]||[]),await database_1[_0x5f5290(0x1c2)][_0x5f5290(0x1bf)][_0x5f5290(0x1c3)]({'where':{'shopId':_0xd0e0c8},'data':_0x1822f1});}async[a78_0x28b8bb(0x1bc)](_0x4bbcd6){const _0x4caa6a=a78_0x28b8bb,_0x442ef8=await database_1[_0x4caa6a(0x1c2)]['shopSettings'][_0x4caa6a(0x1ca)]({'where':{'shopId':_0x4bbcd6}});!_0x442ef8&&await database_1[_0x4caa6a(0x1c2)][_0x4caa6a(0x1bf)][_0x4caa6a(0x1c4)]({'data':{'shopId':_0x4bbcd6}});}}function a78_0x1a9e(_0x29f87d,_0xa25841){_0x29f87d=_0x29f87d-0x1bc;const _0x2e0737=a78_0x2e07();let _0x1a9ea1=_0x2e0737[_0x29f87d];return _0x1a9ea1;}exports['IntegrationsService']=IntegrationsService;function a78_0x2e07(){const _0x2b402c=['IntegrationsService','getIntegrations','404FCzeVP','10vvgBIm','ensureSettingsExist','14520fMnXgG','22YQxECJ','shopSettings','5knXlMA','__esModule','default','update','create','2095380secnsh','isArray','webhookEvents','parse','702868cKBIwJ','findUnique','Shop\x20settings\x20not\x20found','webhookUrl','__importDefault','1101jLSAxu','872034GpFthW','3016503kfmlVS','../config/database','defineProperty','903lVyAOT','parseWebhookEvents','170451yVgQMI'];a78_0x2e07=function(){return _0x2b402c;};return a78_0x2e07();}