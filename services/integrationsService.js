'use strict';const a55_0x53b93a=a55_0x4a40;(function(_0x57d892,_0x3652f8){const _0x32da4c=a55_0x4a40,_0x476d4f=_0x57d892();while(!![]){try{const _0x17dea4=parseInt(_0x32da4c(0xef))/0x1*(parseInt(_0x32da4c(0xf4))/0x2)+parseInt(_0x32da4c(0xe9))/0x3*(-parseInt(_0x32da4c(0xfa))/0x4)+-parseInt(_0x32da4c(0xee))/0x5*(-parseInt(_0x32da4c(0xe7))/0x6)+-parseInt(_0x32da4c(0x100))/0x7*(parseInt(_0x32da4c(0xf1))/0x8)+parseInt(_0x32da4c(0xe8))/0x9+parseInt(_0x32da4c(0xf0))/0xa*(-parseInt(_0x32da4c(0xf5))/0xb)+parseInt(_0x32da4c(0x105))/0xc;if(_0x17dea4===_0x3652f8)break;else _0x476d4f['push'](_0x476d4f['shift']());}catch(_0x5cc30a){_0x476d4f['push'](_0x476d4f['shift']());}}}(a55_0x4683,0x341f3));function a55_0x4a40(_0x43a23c,_0x301bdd){const _0x4683d4=a55_0x4683();return a55_0x4a40=function(_0x4a4034,_0x735c17){_0x4a4034=_0x4a4034-0xe6;let _0x304802=_0x4683d4[_0x4a4034];return _0x304802;},a55_0x4a40(_0x43a23c,_0x301bdd);}var __importDefault=this&&this[a55_0x53b93a(0xf3)]||function(_0x3ac2a2){const _0xc88545=a55_0x53b93a;return _0x3ac2a2&&_0x3ac2a2[_0xc88545(0x101)]?_0x3ac2a2:{'default':_0x3ac2a2};};Object[a55_0x53b93a(0x102)](exports,'__esModule',{'value':!![]}),exports['IntegrationsService']=void 0x0;const database_1=__importDefault(require(a55_0x53b93a(0xe6)));function a55_0x4683(){const _0x361dc6=['3995321NiPSmU','update','ensureSettingsExist','create','IntegrationsService','37552eiezSx','default','parseWebhookEvents','string','isArray','webhookUrl','406XeKjbD','__esModule','defineProperty','shopSettings','findUnique','4825320kYAkSv','../config/database','6wxOTKr','3389931PPXMsr','96LXSPqm','Shop\x20settings\x20not\x20found','webhookEvents','parse','updateWebhookSettings','259430YKzVGg','1VflhtF','10EuRAEb','616FTDzps','getIntegrations','__importDefault','101858CdweqK'];a55_0x4683=function(){return _0x361dc6;};return a55_0x4683();}class IntegrationsService{[a55_0x53b93a(0xfc)](_0x161f1e){const _0x4e412b=a55_0x53b93a;if(!_0x161f1e)return[];if(Array[_0x4e412b(0xfe)](_0x161f1e))return _0x161f1e;if(typeof _0x161f1e===_0x4e412b(0xfd))try{const _0x449bfa=JSON[_0x4e412b(0xec)](_0x161f1e);return Array[_0x4e412b(0xfe)](_0x449bfa)?_0x449bfa:[];}catch{return[];}return[];}async[a55_0x53b93a(0xf2)](_0xa6a221){const _0x57a408=a55_0x53b93a;await this[_0x57a408(0xf7)](_0xa6a221);const _0x42a270=await database_1[_0x57a408(0xfb)][_0x57a408(0x103)][_0x57a408(0x104)]({'where':{'shopId':_0xa6a221},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x42a270)throw new Error(_0x57a408(0xea));return{'webhook':{'url':_0x42a270[_0x57a408(0xff)],'events':this['parseWebhookEvents'](_0x42a270[_0x57a408(0xeb)])}};}async[a55_0x53b93a(0xed)](_0x4db3f1,_0x3afe00){const _0x5dc0fb=a55_0x53b93a;await this[_0x5dc0fb(0xf7)](_0x4db3f1);const _0x5f34a6={};_0x3afe00[_0x5dc0fb(0xff)]!==undefined&&(_0x5f34a6[_0x5dc0fb(0xff)]=_0x3afe00['webhookUrl']||null),_0x3afe00[_0x5dc0fb(0xeb)]!==undefined&&(_0x5f34a6[_0x5dc0fb(0xeb)]=_0x3afe00[_0x5dc0fb(0xeb)]||[]),await database_1[_0x5dc0fb(0xfb)][_0x5dc0fb(0x103)][_0x5dc0fb(0xf6)]({'where':{'shopId':_0x4db3f1},'data':_0x5f34a6});}async[a55_0x53b93a(0xf7)](_0x4646b5){const _0x1ffe38=a55_0x53b93a,_0x81e5d1=await database_1[_0x1ffe38(0xfb)][_0x1ffe38(0x103)][_0x1ffe38(0x104)]({'where':{'shopId':_0x4646b5}});!_0x81e5d1&&await database_1[_0x1ffe38(0xfb)][_0x1ffe38(0x103)][_0x1ffe38(0xf8)]({'data':{'shopId':_0x4646b5}});}}exports[a55_0x53b93a(0xf9)]=IntegrationsService;