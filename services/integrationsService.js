'use strict';function a54_0x5cb5(_0x467f99,_0x2e6f93){const _0x4066ac=a54_0x4066();return a54_0x5cb5=function(_0x5cb599,_0x466261){_0x5cb599=_0x5cb599-0x1e4;let _0xc42615=_0x4066ac[_0x5cb599];return _0xc42615;},a54_0x5cb5(_0x467f99,_0x2e6f93);}const a54_0x14bfb7=a54_0x5cb5;(function(_0x30d897,_0x1c0194){const _0x22ba19=a54_0x5cb5,_0x55a5c9=_0x30d897();while(!![]){try{const _0x4a1ca2=parseInt(_0x22ba19(0x1f0))/0x1*(-parseInt(_0x22ba19(0x1f5))/0x2)+parseInt(_0x22ba19(0x1fa))/0x3+-parseInt(_0x22ba19(0x1f2))/0x4+-parseInt(_0x22ba19(0x1fd))/0x5+-parseInt(_0x22ba19(0x1ef))/0x6+parseInt(_0x22ba19(0x1f6))/0x7+parseInt(_0x22ba19(0x1e9))/0x8;if(_0x4a1ca2===_0x1c0194)break;else _0x55a5c9['push'](_0x55a5c9['shift']());}catch(_0x43ce18){_0x55a5c9['push'](_0x55a5c9['shift']());}}}(a54_0x4066,0x2cae7));var __importDefault=this&&this['__importDefault']||function(_0x46ecd6){const _0x1862f1=a54_0x5cb5;return _0x46ecd6&&_0x46ecd6[_0x1862f1(0x1f3)]?_0x46ecd6:{'default':_0x46ecd6};};Object[a54_0x14bfb7(0x1ea)](exports,a54_0x14bfb7(0x1f3),{'value':!![]}),exports[a54_0x14bfb7(0x1ee)]=void 0x0;const database_1=__importDefault(require('../config/database'));function a54_0x4066(){const _0x5abcf4=['46Sncspi','1941751gDlGvD','updateWebhookSettings','getIntegrations','findUnique','446214fgIaEo','webhookUrl','Shop\x20settings\x20not\x20found','399740MRhmZe','string','update','parseWebhookEvents','default','isArray','1621496lLAbIq','defineProperty','create','parse','shopSettings','IntegrationsService','69462vNamPl','239CLusPF','webhookEvents','1395124GKErZU','__esModule','ensureSettingsExist'];a54_0x4066=function(){return _0x5abcf4;};return a54_0x4066();}class IntegrationsService{[a54_0x14bfb7(0x1e6)](_0x213adb){const _0x5ce678=a54_0x14bfb7;if(!_0x213adb)return[];if(Array[_0x5ce678(0x1e8)](_0x213adb))return _0x213adb;if(typeof _0x213adb===_0x5ce678(0x1e4))try{const _0x13bc4b=JSON[_0x5ce678(0x1ec)](_0x213adb);return Array['isArray'](_0x13bc4b)?_0x13bc4b:[];}catch{return[];}return[];}async[a54_0x14bfb7(0x1f8)](_0x218b53){const _0x1d8f64=a54_0x14bfb7;await this[_0x1d8f64(0x1f4)](_0x218b53);const _0x29440c=await database_1[_0x1d8f64(0x1e7)][_0x1d8f64(0x1ed)]['findUnique']({'where':{'shopId':_0x218b53},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x29440c)throw new Error(_0x1d8f64(0x1fc));return{'webhook':{'url':_0x29440c[_0x1d8f64(0x1fb)],'events':this[_0x1d8f64(0x1e6)](_0x29440c[_0x1d8f64(0x1f1)])}};}async[a54_0x14bfb7(0x1f7)](_0x22c7a5,_0x2aa138){const _0x117d00=a54_0x14bfb7;await this['ensureSettingsExist'](_0x22c7a5);const _0x58fc19={};_0x2aa138[_0x117d00(0x1fb)]!==undefined&&(_0x58fc19['webhookUrl']=_0x2aa138[_0x117d00(0x1fb)]||null),_0x2aa138[_0x117d00(0x1f1)]!==undefined&&(_0x58fc19['webhookEvents']=_0x2aa138[_0x117d00(0x1f1)]||[]),await database_1[_0x117d00(0x1e7)][_0x117d00(0x1ed)][_0x117d00(0x1e5)]({'where':{'shopId':_0x22c7a5},'data':_0x58fc19});}async[a54_0x14bfb7(0x1f4)](_0x300f43){const _0x5eba64=a54_0x14bfb7,_0x29896b=await database_1['default']['shopSettings'][_0x5eba64(0x1f9)]({'where':{'shopId':_0x300f43}});!_0x29896b&&await database_1[_0x5eba64(0x1e7)][_0x5eba64(0x1ed)][_0x5eba64(0x1eb)]({'data':{'shopId':_0x300f43}});}}exports['IntegrationsService']=IntegrationsService;