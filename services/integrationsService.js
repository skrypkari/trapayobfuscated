'use strict';const a47_0x382937=a47_0x1672;(function(_0x2cde44,_0x5a3472){const _0x377340=a47_0x1672,_0x28d10a=_0x2cde44();while(!![]){try{const _0xe7ede4=-parseInt(_0x377340(0x112))/0x1+-parseInt(_0x377340(0x106))/0x2+parseInt(_0x377340(0xff))/0x3+parseInt(_0x377340(0x105))/0x4*(-parseInt(_0x377340(0x116))/0x5)+-parseInt(_0x377340(0x10c))/0x6*(-parseInt(_0x377340(0x108))/0x7)+-parseInt(_0x377340(0x10d))/0x8*(-parseInt(_0x377340(0x100))/0x9)+parseInt(_0x377340(0x113))/0xa;if(_0xe7ede4===_0x5a3472)break;else _0x28d10a['push'](_0x28d10a['shift']());}catch(_0x12b00c){_0x28d10a['push'](_0x28d10a['shift']());}}}(a47_0x3b42,0xed1df));var __importDefault=this&&this[a47_0x382937(0x114)]||function(_0x4529b6){const _0xbccb17=a47_0x382937;return _0x4529b6&&_0x4529b6[_0xbccb17(0x101)]?_0x4529b6:{'default':_0x4529b6};};Object['defineProperty'](exports,a47_0x382937(0x101),{'value':!![]}),exports['IntegrationsService']=void 0x0;const database_1=__importDefault(require(a47_0x382937(0x104)));class IntegrationsService{[a47_0x382937(0x10e)](_0x252470){const _0x305a48=a47_0x382937;if(!_0x252470)return[];if(Array[_0x305a48(0x10a)](_0x252470))return _0x252470;if(typeof _0x252470===_0x305a48(0x109))try{const _0x2792ba=JSON[_0x305a48(0x118)](_0x252470);return Array[_0x305a48(0x10a)](_0x2792ba)?_0x2792ba:[];}catch{return[];}return[];}async['getIntegrations'](_0x283720){const _0x33357f=a47_0x382937;await this[_0x33357f(0xfe)](_0x283720);const _0x125485=await database_1[_0x33357f(0x103)]['shopSettings'][_0x33357f(0x107)]({'where':{'shopId':_0x283720},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x125485)throw new Error('Shop\x20settings\x20not\x20found');return{'webhook':{'url':_0x125485[_0x33357f(0x117)],'events':this[_0x33357f(0x10e)](_0x125485[_0x33357f(0x111)])}};}async[a47_0x382937(0x10b)](_0x57b0dd,_0x4a0e71){const _0x15ee26=a47_0x382937;await this[_0x15ee26(0xfe)](_0x57b0dd);const _0x800ff7={};_0x4a0e71[_0x15ee26(0x117)]!==undefined&&(_0x800ff7[_0x15ee26(0x117)]=_0x4a0e71['webhookUrl']||null),_0x4a0e71[_0x15ee26(0x111)]!==undefined&&(_0x800ff7['webhookEvents']=_0x4a0e71['webhookEvents']||[]),await database_1[_0x15ee26(0x103)][_0x15ee26(0x10f)][_0x15ee26(0x115)]({'where':{'shopId':_0x57b0dd},'data':_0x800ff7});}async[a47_0x382937(0xfe)](_0x1e7f02){const _0x2cdb4a=a47_0x382937,_0x2a932d=await database_1[_0x2cdb4a(0x103)][_0x2cdb4a(0x10f)][_0x2cdb4a(0x107)]({'where':{'shopId':_0x1e7f02}});!_0x2a932d&&await database_1[_0x2cdb4a(0x103)][_0x2cdb4a(0x10f)][_0x2cdb4a(0x102)]({'data':{'shopId':_0x1e7f02}});}}exports[a47_0x382937(0x110)]=IntegrationsService;function a47_0x1672(_0x583070,_0x1421c2){const _0x3b421b=a47_0x3b42();return a47_0x1672=function(_0x167206,_0x2f709b){_0x167206=_0x167206-0xfe;let _0x1f466c=_0x3b421b[_0x167206];return _0x1f466c;},a47_0x1672(_0x583070,_0x1421c2);}function a47_0x3b42(){const _0x4ae97c=['create','default','../config/database','4THsnTB','2292910DhzVTv','findUnique','76265NirtAD','string','isArray','updateWebhookSettings','642PlLnfM','8CnQHJz','parseWebhookEvents','shopSettings','IntegrationsService','webhookEvents','1184829qMUUEz','6566520zEWyNC','__importDefault','update','4123640sWvxZY','webhookUrl','parse','ensureSettingsExist','1250244zCFvfx','16992702eZPufN','__esModule'];a47_0x3b42=function(){return _0x4ae97c;};return a47_0x3b42();}