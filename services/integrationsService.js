'use strict';const a58_0x1f565b=a58_0x47c7;(function(_0x369bc7,_0x644ec5){const _0x362b3a=a58_0x47c7,_0x512532=_0x369bc7();while(!![]){try{const _0x36049f=parseInt(_0x362b3a(0x1b1))/0x1*(parseInt(_0x362b3a(0x1ad))/0x2)+-parseInt(_0x362b3a(0x1bc))/0x3*(-parseInt(_0x362b3a(0x1c1))/0x4)+-parseInt(_0x362b3a(0x1b0))/0x5*(parseInt(_0x362b3a(0x1bf))/0x6)+-parseInt(_0x362b3a(0x1c3))/0x7*(-parseInt(_0x362b3a(0x1ba))/0x8)+parseInt(_0x362b3a(0x1b8))/0x9*(-parseInt(_0x362b3a(0x1bb))/0xa)+parseInt(_0x362b3a(0x1a4))/0xb*(-parseInt(_0x362b3a(0x1b2))/0xc)+parseInt(_0x362b3a(0x1a5))/0xd;if(_0x36049f===_0x644ec5)break;else _0x512532['push'](_0x512532['shift']());}catch(_0x234363){_0x512532['push'](_0x512532['shift']());}}}(a58_0x181d,0x2f813));function a58_0x181d(){const _0x180c9e=['19966HsDjWW','../config/database','parse','1614635IwjeGG','19WajVUw','408vOmbKN','getIntegrations','__esModule','default','defineProperty','parseWebhookEvents','51615qdhZIT','__importDefault','3280AOGBJq','140PHvWzL','115059MRLdGl','Shop\x20settings\x20not\x20found','findUnique','6DozGoc','update','4BVRsvT','webhookUrl','5299EUBbep','46717znzRug','2649322GBZgqn','shopSettings','ensureSettingsExist','webhookEvents','isArray','IntegrationsService','string','updateWebhookSettings'];a58_0x181d=function(){return _0x180c9e;};return a58_0x181d();}var __importDefault=this&&this[a58_0x1f565b(0x1b9)]||function(_0x5ca813){const _0x42fde3=a58_0x1f565b;return _0x5ca813&&_0x5ca813[_0x42fde3(0x1b4)]?_0x5ca813:{'default':_0x5ca813};};Object[a58_0x1f565b(0x1b6)](exports,a58_0x1f565b(0x1b4),{'value':!![]}),exports[a58_0x1f565b(0x1aa)]=void 0x0;function a58_0x47c7(_0x451617,_0x52ca04){const _0x181d1f=a58_0x181d();return a58_0x47c7=function(_0x47c763,_0x8b163a){_0x47c763=_0x47c763-0x1a4;let _0x40ff3c=_0x181d1f[_0x47c763];return _0x40ff3c;},a58_0x47c7(_0x451617,_0x52ca04);}const database_1=__importDefault(require(a58_0x1f565b(0x1ae)));class IntegrationsService{[a58_0x1f565b(0x1b7)](_0x38bb37){const _0x8d9324=a58_0x1f565b;if(!_0x38bb37)return[];if(Array[_0x8d9324(0x1a9)](_0x38bb37))return _0x38bb37;if(typeof _0x38bb37===_0x8d9324(0x1ab))try{const _0x9b8571=JSON[_0x8d9324(0x1af)](_0x38bb37);return Array[_0x8d9324(0x1a9)](_0x9b8571)?_0x9b8571:[];}catch{return[];}return[];}async[a58_0x1f565b(0x1b3)](_0x230dc4){const _0x4ca79d=a58_0x1f565b;await this['ensureSettingsExist'](_0x230dc4);const _0x5e3431=await database_1[_0x4ca79d(0x1b5)][_0x4ca79d(0x1a6)][_0x4ca79d(0x1be)]({'where':{'shopId':_0x230dc4},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x5e3431)throw new Error(_0x4ca79d(0x1bd));return{'webhook':{'url':_0x5e3431[_0x4ca79d(0x1c2)],'events':this[_0x4ca79d(0x1b7)](_0x5e3431[_0x4ca79d(0x1a8)])}};}async[a58_0x1f565b(0x1ac)](_0xf53c1,_0x1da5d8){const _0xa3bdae=a58_0x1f565b;await this[_0xa3bdae(0x1a7)](_0xf53c1);const _0x6cd7b5={};_0x1da5d8[_0xa3bdae(0x1c2)]!==undefined&&(_0x6cd7b5[_0xa3bdae(0x1c2)]=_0x1da5d8[_0xa3bdae(0x1c2)]||null),_0x1da5d8[_0xa3bdae(0x1a8)]!==undefined&&(_0x6cd7b5[_0xa3bdae(0x1a8)]=_0x1da5d8[_0xa3bdae(0x1a8)]||[]),await database_1[_0xa3bdae(0x1b5)][_0xa3bdae(0x1a6)][_0xa3bdae(0x1c0)]({'where':{'shopId':_0xf53c1},'data':_0x6cd7b5});}async[a58_0x1f565b(0x1a7)](_0x33d369){const _0x5123fd=a58_0x1f565b,_0x5604a6=await database_1[_0x5123fd(0x1b5)][_0x5123fd(0x1a6)][_0x5123fd(0x1be)]({'where':{'shopId':_0x33d369}});!_0x5604a6&&await database_1[_0x5123fd(0x1b5)]['shopSettings']['create']({'data':{'shopId':_0x33d369}});}}exports[a58_0x1f565b(0x1aa)]=IntegrationsService;