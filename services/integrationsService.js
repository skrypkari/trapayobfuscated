'use strict';const a52_0x3325f4=a52_0x22b8;(function(_0x1bb342,_0x1a65f2){const _0x4d2608=a52_0x22b8,_0x20aa5c=_0x1bb342();while(!![]){try{const _0xc1442a=-parseInt(_0x4d2608(0x1a9))/0x1*(parseInt(_0x4d2608(0x1a5))/0x2)+parseInt(_0x4d2608(0x1ac))/0x3*(parseInt(_0x4d2608(0x1a4))/0x4)+parseInt(_0x4d2608(0x19b))/0x5*(parseInt(_0x4d2608(0x1a7))/0x6)+parseInt(_0x4d2608(0x1ad))/0x7*(-parseInt(_0x4d2608(0x1aa))/0x8)+-parseInt(_0x4d2608(0x1b7))/0x9*(-parseInt(_0x4d2608(0x19c))/0xa)+-parseInt(_0x4d2608(0x1a3))/0xb+-parseInt(_0x4d2608(0x1ae))/0xc;if(_0xc1442a===_0x1a65f2)break;else _0x20aa5c['push'](_0x20aa5c['shift']());}catch(_0x131452){_0x20aa5c['push'](_0x20aa5c['shift']());}}}(a52_0x2c47,0x4c734));var __importDefault=this&&this[a52_0x3325f4(0x19f)]||function(_0x58b284){const _0x139760=a52_0x3325f4;return _0x58b284&&_0x58b284[_0x139760(0x1a1)]?_0x58b284:{'default':_0x58b284};};Object[a52_0x3325f4(0x19e)](exports,a52_0x3325f4(0x1a1),{'value':!![]}),exports[a52_0x3325f4(0x1b0)]=void 0x0;function a52_0x2c47(){const _0x3b6c69=['../config/database','findUnique','update','isArray','string','webhookEvents','386055jLgvap','Shop\x20settings\x20not\x20found','17265NvlwVt','130ItMNZT','shopSettings','defineProperty','__importDefault','parseWebhookEvents','__esModule','create','4124835iHgwme','12lJMMrD','21986jhrlzq','webhookUrl','438qhGWLy','default','7TOXhCX','16pucDSq','ensureSettingsExist','68202oEYOMK','280861iJyCVh','391008JRJUqK','updateWebhookSettings','IntegrationsService'];a52_0x2c47=function(){return _0x3b6c69;};return a52_0x2c47();}function a52_0x22b8(_0x22054b,_0x4a603d){const _0x2c4794=a52_0x2c47();return a52_0x22b8=function(_0x22b823,_0x52193b){_0x22b823=_0x22b823-0x19b;let _0x21f7aa=_0x2c4794[_0x22b823];return _0x21f7aa;},a52_0x22b8(_0x22054b,_0x4a603d);}const database_1=__importDefault(require(a52_0x3325f4(0x1b1)));class IntegrationsService{['parseWebhookEvents'](_0xee8a35){const _0x591c8b=a52_0x3325f4;if(!_0xee8a35)return[];if(Array[_0x591c8b(0x1b4)](_0xee8a35))return _0xee8a35;if(typeof _0xee8a35===_0x591c8b(0x1b5))try{const _0x175d9c=JSON['parse'](_0xee8a35);return Array['isArray'](_0x175d9c)?_0x175d9c:[];}catch{return[];}return[];}async['getIntegrations'](_0x5566c5){const _0x146b8c=a52_0x3325f4;await this['ensureSettingsExist'](_0x5566c5);const _0xb48a2e=await database_1[_0x146b8c(0x1a8)][_0x146b8c(0x19d)][_0x146b8c(0x1b2)]({'where':{'shopId':_0x5566c5},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0xb48a2e)throw new Error(_0x146b8c(0x1b8));return{'webhook':{'url':_0xb48a2e[_0x146b8c(0x1a6)],'events':this[_0x146b8c(0x1a0)](_0xb48a2e['webhookEvents'])}};}async[a52_0x3325f4(0x1af)](_0x11cda0,_0x338546){const _0x4371bd=a52_0x3325f4;await this[_0x4371bd(0x1ab)](_0x11cda0);const _0x392e5f={};_0x338546[_0x4371bd(0x1a6)]!==undefined&&(_0x392e5f[_0x4371bd(0x1a6)]=_0x338546['webhookUrl']||null),_0x338546[_0x4371bd(0x1b6)]!==undefined&&(_0x392e5f[_0x4371bd(0x1b6)]=_0x338546[_0x4371bd(0x1b6)]||[]),await database_1[_0x4371bd(0x1a8)]['shopSettings'][_0x4371bd(0x1b3)]({'where':{'shopId':_0x11cda0},'data':_0x392e5f});}async[a52_0x3325f4(0x1ab)](_0x3978dc){const _0x40edf1=a52_0x3325f4,_0x5d64ea=await database_1['default'][_0x40edf1(0x19d)][_0x40edf1(0x1b2)]({'where':{'shopId':_0x3978dc}});!_0x5d64ea&&await database_1[_0x40edf1(0x1a8)][_0x40edf1(0x19d)][_0x40edf1(0x1a2)]({'data':{'shopId':_0x3978dc}});}}exports['IntegrationsService']=IntegrationsService;