'use strict';const a47_0x5dbf98=a47_0x4d2d;(function(_0x34afef,_0x528b59){const _0x4585be=a47_0x4d2d,_0x4c1acd=_0x34afef();while(!![]){try{const _0x3939d1=-parseInt(_0x4585be(0x199))/0x1*(-parseInt(_0x4585be(0x18c))/0x2)+parseInt(_0x4585be(0x190))/0x3*(-parseInt(_0x4585be(0x198))/0x4)+parseInt(_0x4585be(0x1a2))/0x5+-parseInt(_0x4585be(0x19c))/0x6+-parseInt(_0x4585be(0x191))/0x7*(-parseInt(_0x4585be(0x194))/0x8)+-parseInt(_0x4585be(0x192))/0x9*(-parseInt(_0x4585be(0x18a))/0xa)+parseInt(_0x4585be(0x1a5))/0xb*(-parseInt(_0x4585be(0x18d))/0xc);if(_0x3939d1===_0x528b59)break;else _0x4c1acd['push'](_0x4c1acd['shift']());}catch(_0x26d145){_0x4c1acd['push'](_0x4c1acd['shift']());}}}(a47_0x4164,0x91956));var __importDefault=this&&this[a47_0x5dbf98(0x18e)]||function(_0x5d8a7b){const _0xd2f1bf=a47_0x5dbf98;return _0x5d8a7b&&_0x5d8a7b[_0xd2f1bf(0x1a3)]?_0x5d8a7b:{'default':_0x5d8a7b};};Object['defineProperty'](exports,a47_0x5dbf98(0x1a3),{'value':!![]}),exports[a47_0x5dbf98(0x195)]=void 0x0;const database_1=__importDefault(require(a47_0x5dbf98(0x19f)));class IntegrationsService{['parseWebhookEvents'](_0x4f7460){const _0x29d4b9=a47_0x5dbf98;if(!_0x4f7460)return[];if(Array['isArray'](_0x4f7460))return _0x4f7460;if(typeof _0x4f7460===_0x29d4b9(0x193))try{const _0x5b67e9=JSON[_0x29d4b9(0x1a4)](_0x4f7460);return Array['isArray'](_0x5b67e9)?_0x5b67e9:[];}catch{return[];}return[];}async['getIntegrations'](_0x321a32){const _0x1d098d=a47_0x5dbf98;await this[_0x1d098d(0x19a)](_0x321a32);const _0x7ae93d=await database_1[_0x1d098d(0x19d)][_0x1d098d(0x19b)][_0x1d098d(0x189)]({'where':{'shopId':_0x321a32},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x7ae93d)throw new Error(_0x1d098d(0x18b));return{'webhook':{'url':_0x7ae93d['webhookUrl'],'events':this[_0x1d098d(0x196)](_0x7ae93d[_0x1d098d(0x1a1)])}};}async[a47_0x5dbf98(0x197)](_0xf5717a,_0x50072c){const _0x505ff9=a47_0x5dbf98;await this['ensureSettingsExist'](_0xf5717a);const _0x4351d6={};_0x50072c[_0x505ff9(0x1a0)]!==undefined&&(_0x4351d6[_0x505ff9(0x1a0)]=_0x50072c[_0x505ff9(0x1a0)]||null),_0x50072c['webhookEvents']!==undefined&&(_0x4351d6[_0x505ff9(0x1a1)]=_0x50072c[_0x505ff9(0x1a1)]||[]),await database_1['default'][_0x505ff9(0x19b)][_0x505ff9(0x18f)]({'where':{'shopId':_0xf5717a},'data':_0x4351d6});}async[a47_0x5dbf98(0x19a)](_0x13d697){const _0x2b7a6a=a47_0x5dbf98,_0x11be62=await database_1['default'][_0x2b7a6a(0x19b)][_0x2b7a6a(0x189)]({'where':{'shopId':_0x13d697}});!_0x11be62&&await database_1[_0x2b7a6a(0x19d)][_0x2b7a6a(0x19b)][_0x2b7a6a(0x19e)]({'data':{'shopId':_0x13d697}});}}exports[a47_0x5dbf98(0x195)]=IntegrationsService;function a47_0x4d2d(_0x594d9c,_0x22837a){const _0x4164d1=a47_0x4164();return a47_0x4d2d=function(_0x4d2d11,_0x5783c8){_0x4d2d11=_0x4d2d11-0x189;let _0x38d208=_0x4164d1[_0x4d2d11];return _0x38d208;},a47_0x4d2d(_0x594d9c,_0x22837a);}function a47_0x4164(){const _0x46d6af=['parse','3520AovbdP','findUnique','10NqASmQ','Shop\x20settings\x20not\x20found','1528514nlGjDa','50772WRagqW','__importDefault','update','3uRnKTQ','5259107oanyBj','5043294WWipQq','string','8OmbaVR','IntegrationsService','parseWebhookEvents','updateWebhookSettings','3326072xGrbtP','1vsRCKP','ensureSettingsExist','shopSettings','2894772LwdCbJ','default','create','../config/database','webhookUrl','webhookEvents','5941430tfyqAj','__esModule'];a47_0x4164=function(){return _0x46d6af;};return a47_0x4164();}