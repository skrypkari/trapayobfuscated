'use strict';function a74_0xf7a9(_0x1d976b,_0xbffe03){_0x1d976b=_0x1d976b-0xe5;const _0x38a325=a74_0x38a3();let _0xf7a995=_0x38a325[_0x1d976b];return _0xf7a995;}const a74_0x4ac0f8=a74_0xf7a9;(function(_0x3dd422,_0x2f86f3){const _0xe85b9b=a74_0xf7a9,_0x2191ad=_0x3dd422();while(!![]){try{const _0x29eb9a=parseInt(_0xe85b9b(0xf4))/0x1*(parseInt(_0xe85b9b(0xf7))/0x2)+-parseInt(_0xe85b9b(0xe5))/0x3*(-parseInt(_0xe85b9b(0xfa))/0x4)+-parseInt(_0xe85b9b(0xee))/0x5*(parseInt(_0xe85b9b(0xea))/0x6)+-parseInt(_0xe85b9b(0xfb))/0x7*(parseInt(_0xe85b9b(0xff))/0x8)+-parseInt(_0xe85b9b(0xe7))/0x9+parseInt(_0xe85b9b(0xf8))/0xa+parseInt(_0xe85b9b(0xf3))/0xb;if(_0x29eb9a===_0x2f86f3)break;else _0x2191ad['push'](_0x2191ad['shift']());}catch(_0x183bf8){_0x2191ad['push'](_0x2191ad['shift']());}}}(a74_0x38a3,0xc5289));var __importDefault=this&&this['__importDefault']||function(_0xe7d264){const _0x31c7ba=a74_0xf7a9;return _0xe7d264&&_0xe7d264[_0x31c7ba(0xfd)]?_0xe7d264:{'default':_0xe7d264};};Object[a74_0x4ac0f8(0xe6)](exports,'__esModule',{'value':!![]}),exports['IntegrationsService']=void 0x0;const database_1=__importDefault(require('../config/database'));class IntegrationsService{[a74_0x4ac0f8(0xf5)](_0x2f7a11){const _0x4e8ac5=a74_0x4ac0f8;if(!_0x2f7a11)return[];if(Array['isArray'](_0x2f7a11))return _0x2f7a11;if(typeof _0x2f7a11===_0x4e8ac5(0xe9))try{const _0x5b7b48=JSON[_0x4e8ac5(0xf1)](_0x2f7a11);return Array['isArray'](_0x5b7b48)?_0x5b7b48:[];}catch{return[];}return[];}async[a74_0x4ac0f8(0xed)](_0x3d17d0){const _0x427e1b=a74_0x4ac0f8;await this[_0x427e1b(0xf0)](_0x3d17d0);const _0x5026b7=await database_1[_0x427e1b(0xf6)]['shopSettings']['findUnique']({'where':{'shopId':_0x3d17d0},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x5026b7)throw new Error(_0x427e1b(0xfc));return{'webhook':{'url':_0x5026b7[_0x427e1b(0xef)],'events':this[_0x427e1b(0xf5)](_0x5026b7['webhookEvents'])}};}async[a74_0x4ac0f8(0xec)](_0x599cc9,_0xa473df){const _0x2e91e6=a74_0x4ac0f8;await this['ensureSettingsExist'](_0x599cc9);const _0x3c2ee7={};_0xa473df[_0x2e91e6(0xef)]!==undefined&&(_0x3c2ee7[_0x2e91e6(0xef)]=_0xa473df[_0x2e91e6(0xef)]||null),_0xa473df['webhookEvents']!==undefined&&(_0x3c2ee7['webhookEvents']=_0xa473df[_0x2e91e6(0xf9)]||[]),await database_1[_0x2e91e6(0xf6)][_0x2e91e6(0xfe)]['update']({'where':{'shopId':_0x599cc9},'data':_0x3c2ee7});}async[a74_0x4ac0f8(0xf0)](_0x53ee69){const _0xdfb517=a74_0x4ac0f8,_0x1dde49=await database_1['default'][_0xdfb517(0xfe)][_0xdfb517(0xe8)]({'where':{'shopId':_0x53ee69}});!_0x1dde49&&await database_1['default']['shopSettings'][_0xdfb517(0xeb)]({'data':{'shopId':_0x53ee69}});}}function a74_0x38a3(){const _0x43479d=['findUnique','string','7659102fKFidh','create','updateWebhookSettings','getIntegrations','5JAzOOL','webhookUrl','ensureSettingsExist','parse','IntegrationsService','27883823lSlqOI','52369XcdOeJ','parseWebhookEvents','default','2JKBuNb','4040930IWlvGz','webhookEvents','14920LOBLMQ','7ToNCDA','Shop\x20settings\x20not\x20found','__esModule','shopSettings','4750952xQRxdH','717uuWcGh','defineProperty','10843902hOjuFZ'];a74_0x38a3=function(){return _0x43479d;};return a74_0x38a3();}exports[a74_0x4ac0f8(0xf2)]=IntegrationsService;