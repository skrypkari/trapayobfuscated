'use strict';function a47_0x11af(_0x4263b8,_0x57606f){const _0x56e44f=a47_0x56e4();return a47_0x11af=function(_0x11af5c,_0x91319e){_0x11af5c=_0x11af5c-0x1bc;let _0x69ade5=_0x56e44f[_0x11af5c];return _0x69ade5;},a47_0x11af(_0x4263b8,_0x57606f);}const a47_0x124d0b=a47_0x11af;function a47_0x56e4(){const _0x2b59b1=['726820clvXaZ','create','parseWebhookEvents','__esModule','1165KvlCYv','webhookEvents','77HLXpUd','1200vBOvID','Shop\x20settings\x20not\x20found','5502069lxEYay','isArray','string','435688SHwvLl','30LESTtw','ensureSettingsExist','651240lanmuH','1154anewKK','149765WxojwA','updateWebhookSettings','9XiVAhF','defineProperty','974672qUFejy','update','webhookUrl','default','findUnique','shopSettings','../config/database','IntegrationsService','parse','__importDefault'];a47_0x56e4=function(){return _0x2b59b1;};return a47_0x56e4();}(function(_0x2142c4,_0x288713){const _0x2e2450=a47_0x11af,_0x23329f=_0x2142c4();while(!![]){try{const _0x848bb4=-parseInt(_0x2e2450(0x1d8))/0x1*(parseInt(_0x2e2450(0x1c5))/0x2)+parseInt(_0x2e2450(0x1c8))/0x3*(parseInt(_0x2e2450(0x1ca))/0x4)+parseInt(_0x2e2450(0x1d4))/0x5*(-parseInt(_0x2e2450(0x1c2))/0x6)+-parseInt(_0x2e2450(0x1da))/0x7*(-parseInt(_0x2e2450(0x1c1))/0x8)+-parseInt(_0x2e2450(0x1be))/0x9+-parseInt(_0x2e2450(0x1c4))/0xa+parseInt(_0x2e2450(0x1c6))/0xb*(parseInt(_0x2e2450(0x1bc))/0xc);if(_0x848bb4===_0x288713)break;else _0x23329f['push'](_0x23329f['shift']());}catch(_0x265af0){_0x23329f['push'](_0x23329f['shift']());}}}(a47_0x56e4,0x96695));var __importDefault=this&&this[a47_0x124d0b(0x1d3)]||function(_0x23b6ac){return _0x23b6ac&&_0x23b6ac['__esModule']?_0x23b6ac:{'default':_0x23b6ac};};Object[a47_0x124d0b(0x1c9)](exports,a47_0x124d0b(0x1d7),{'value':!![]}),exports[a47_0x124d0b(0x1d1)]=void 0x0;const database_1=__importDefault(require(a47_0x124d0b(0x1d0)));class IntegrationsService{[a47_0x124d0b(0x1d6)](_0x4340db){const _0x5e4cef=a47_0x124d0b;if(!_0x4340db)return[];if(Array[_0x5e4cef(0x1bf)](_0x4340db))return _0x4340db;if(typeof _0x4340db===_0x5e4cef(0x1c0))try{const _0x2f9f9c=JSON[_0x5e4cef(0x1d2)](_0x4340db);return Array['isArray'](_0x2f9f9c)?_0x2f9f9c:[];}catch{return[];}return[];}async['getIntegrations'](_0x2e61d6){const _0x5b0b34=a47_0x124d0b;await this[_0x5b0b34(0x1c3)](_0x2e61d6);const _0x41e98e=await database_1[_0x5b0b34(0x1cd)]['shopSettings'][_0x5b0b34(0x1ce)]({'where':{'shopId':_0x2e61d6},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x41e98e)throw new Error(_0x5b0b34(0x1bd));return{'webhook':{'url':_0x41e98e['webhookUrl'],'events':this[_0x5b0b34(0x1d6)](_0x41e98e['webhookEvents'])}};}async[a47_0x124d0b(0x1c7)](_0x5afd8b,_0x37c616){const _0x4f001e=a47_0x124d0b;await this[_0x4f001e(0x1c3)](_0x5afd8b);const _0x24e0fe={};_0x37c616[_0x4f001e(0x1cc)]!==undefined&&(_0x24e0fe[_0x4f001e(0x1cc)]=_0x37c616[_0x4f001e(0x1cc)]||null),_0x37c616[_0x4f001e(0x1d9)]!==undefined&&(_0x24e0fe[_0x4f001e(0x1d9)]=_0x37c616[_0x4f001e(0x1d9)]||[]),await database_1[_0x4f001e(0x1cd)]['shopSettings'][_0x4f001e(0x1cb)]({'where':{'shopId':_0x5afd8b},'data':_0x24e0fe});}async[a47_0x124d0b(0x1c3)](_0x3762ef){const _0x3428d3=a47_0x124d0b,_0x193eff=await database_1['default'][_0x3428d3(0x1cf)][_0x3428d3(0x1ce)]({'where':{'shopId':_0x3762ef}});!_0x193eff&&await database_1[_0x3428d3(0x1cd)]['shopSettings'][_0x3428d3(0x1d5)]({'data':{'shopId':_0x3762ef}});}}exports[a47_0x124d0b(0x1d1)]=IntegrationsService;