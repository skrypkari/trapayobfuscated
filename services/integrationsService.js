'use strict';const a50_0x401f70=a50_0x41c2;(function(_0x2981da,_0x2d8ed7){const _0x1c745c=a50_0x41c2,_0x39c595=_0x2981da();while(!![]){try{const _0x594a79=-parseInt(_0x1c745c(0xdd))/0x1+parseInt(_0x1c745c(0xd4))/0x2*(parseInt(_0x1c745c(0xcf))/0x3)+parseInt(_0x1c745c(0xd8))/0x4+-parseInt(_0x1c745c(0xda))/0x5+-parseInt(_0x1c745c(0xd0))/0x6+parseInt(_0x1c745c(0xc8))/0x7+parseInt(_0x1c745c(0xd6))/0x8;if(_0x594a79===_0x2d8ed7)break;else _0x39c595['push'](_0x39c595['shift']());}catch(_0x1270de){_0x39c595['push'](_0x39c595['shift']());}}}(a50_0x4e7d,0x24635));var __importDefault=this&&this[a50_0x401f70(0xd2)]||function(_0x451a6a){return _0x451a6a&&_0x451a6a['__esModule']?_0x451a6a:{'default':_0x451a6a};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a50_0x401f70(0xcc)]=void 0x0;const database_1=__importDefault(require(a50_0x401f70(0xc9)));class IntegrationsService{[a50_0x401f70(0xd5)](_0x1f0e06){const _0x1a4868=a50_0x401f70;if(!_0x1f0e06)return[];if(Array['isArray'](_0x1f0e06))return _0x1f0e06;if(typeof _0x1f0e06===_0x1a4868(0xdb))try{const _0x4447b5=JSON[_0x1a4868(0xd3)](_0x1f0e06);return Array[_0x1a4868(0xce)](_0x4447b5)?_0x4447b5:[];}catch{return[];}return[];}async['getIntegrations'](_0x4bc148){const _0x4d869d=a50_0x401f70;await this[_0x4d869d(0xcb)](_0x4bc148);const _0x3f403f=await database_1[_0x4d869d(0xcd)][_0x4d869d(0xca)][_0x4d869d(0xd1)]({'where':{'shopId':_0x4bc148},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x3f403f)throw new Error('Shop\x20settings\x20not\x20found');return{'webhook':{'url':_0x3f403f[_0x4d869d(0xdc)],'events':this[_0x4d869d(0xd5)](_0x3f403f[_0x4d869d(0xd9)])}};}async[a50_0x401f70(0xd7)](_0x122ff1,_0x594529){const _0x435c1e=a50_0x401f70;await this[_0x435c1e(0xcb)](_0x122ff1);const _0xdcb2a7={};_0x594529[_0x435c1e(0xdc)]!==undefined&&(_0xdcb2a7[_0x435c1e(0xdc)]=_0x594529[_0x435c1e(0xdc)]||null),_0x594529[_0x435c1e(0xd9)]!==undefined&&(_0xdcb2a7[_0x435c1e(0xd9)]=_0x594529[_0x435c1e(0xd9)]||[]),await database_1[_0x435c1e(0xcd)][_0x435c1e(0xca)]['update']({'where':{'shopId':_0x122ff1},'data':_0xdcb2a7});}async[a50_0x401f70(0xcb)](_0x3062e4){const _0x33e1f9=a50_0x401f70,_0x43637e=await database_1[_0x33e1f9(0xcd)][_0x33e1f9(0xca)]['findUnique']({'where':{'shopId':_0x3062e4}});!_0x43637e&&await database_1[_0x33e1f9(0xcd)][_0x33e1f9(0xca)]['create']({'data':{'shopId':_0x3062e4}});}}exports[a50_0x401f70(0xcc)]=IntegrationsService;function a50_0x41c2(_0xc34d35,_0x92bb81){const _0x4e7d4a=a50_0x4e7d();return a50_0x41c2=function(_0x41c2c5,_0x1a1753){_0x41c2c5=_0x41c2c5-0xc8;let _0x5ef33f=_0x4e7d4a[_0x41c2c5];return _0x5ef33f;},a50_0x41c2(_0xc34d35,_0x92bb81);}function a50_0x4e7d(){const _0x1275e9=['../config/database','shopSettings','ensureSettingsExist','IntegrationsService','default','isArray','633iVdoiO','613878DZCYnj','findUnique','__importDefault','parse','40iJWpET','parseWebhookEvents','84392VvbnGZ','updateWebhookSettings','875184NTMnpw','webhookEvents','629585dqgxBX','string','webhookUrl','80655TMGzBC','1570555JkmYgh'];a50_0x4e7d=function(){return _0x1275e9;};return a50_0x4e7d();}