'use strict';const a48_0x198a2e=a48_0x2c7d;(function(_0x569f1c,_0x1b6cf4){const _0x164619=a48_0x2c7d,_0x4ca672=_0x569f1c();while(!![]){try{const _0x2e9407=-parseInt(_0x164619(0x16c))/0x1+-parseInt(_0x164619(0x16a))/0x2*(parseInt(_0x164619(0x176))/0x3)+parseInt(_0x164619(0x166))/0x4+-parseInt(_0x164619(0x17a))/0x5*(-parseInt(_0x164619(0x16e))/0x6)+parseInt(_0x164619(0x168))/0x7+-parseInt(_0x164619(0x16d))/0x8*(-parseInt(_0x164619(0x178))/0x9)+parseInt(_0x164619(0x167))/0xa*(-parseInt(_0x164619(0x17b))/0xb);if(_0x2e9407===_0x1b6cf4)break;else _0x4ca672['push'](_0x4ca672['shift']());}catch(_0x103cf4){_0x4ca672['push'](_0x4ca672['shift']());}}}(a48_0x46be,0x84fbd));var __importDefault=this&&this[a48_0x198a2e(0x16f)]||function(_0x4530c9){const _0x49c91a=a48_0x198a2e;return _0x4530c9&&_0x4530c9[_0x49c91a(0x177)]?_0x4530c9:{'default':_0x4530c9};};function a48_0x46be(){const _0x2c3975=['__importDefault','ensureSettingsExist','updateWebhookSettings','Shop\x20settings\x20not\x20found','../config/database','shopSettings','isArray','72UsZtPM','__esModule','2817405xYyTtO','findUnique','3320NQpXTM','4147gcxgLE','webhookEvents','default','update','webhookUrl','getIntegrations','571336SBXnzJ','17910WDoKnb','7121394RpWBtY','defineProperty','40336zTLzMJ','parseWebhookEvents','568737LqcaHP','8jQNzCP','7224nplcIr'];a48_0x46be=function(){return _0x2c3975;};return a48_0x46be();}Object[a48_0x198a2e(0x169)](exports,a48_0x198a2e(0x177),{'value':!![]}),exports['IntegrationsService']=void 0x0;const database_1=__importDefault(require(a48_0x198a2e(0x173)));function a48_0x2c7d(_0x5a435b,_0x3024e3){const _0x46bea1=a48_0x46be();return a48_0x2c7d=function(_0x2c7d31,_0x155e49){_0x2c7d31=_0x2c7d31-0x163;let _0x3bde03=_0x46bea1[_0x2c7d31];return _0x3bde03;},a48_0x2c7d(_0x5a435b,_0x3024e3);}class IntegrationsService{[a48_0x198a2e(0x16b)](_0x505712){const _0x264570=a48_0x198a2e;if(!_0x505712)return[];if(Array[_0x264570(0x175)](_0x505712))return _0x505712;if(typeof _0x505712==='string')try{const _0x238257=JSON['parse'](_0x505712);return Array[_0x264570(0x175)](_0x238257)?_0x238257:[];}catch{return[];}return[];}async[a48_0x198a2e(0x165)](_0x34b8b7){const _0x18bd00=a48_0x198a2e;await this['ensureSettingsExist'](_0x34b8b7);const _0xbcff1e=await database_1[_0x18bd00(0x17d)][_0x18bd00(0x174)][_0x18bd00(0x179)]({'where':{'shopId':_0x34b8b7},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0xbcff1e)throw new Error(_0x18bd00(0x172));return{'webhook':{'url':_0xbcff1e[_0x18bd00(0x164)],'events':this[_0x18bd00(0x16b)](_0xbcff1e[_0x18bd00(0x17c)])}};}async[a48_0x198a2e(0x171)](_0x441e3b,_0x5e083b){const _0x23913e=a48_0x198a2e;await this['ensureSettingsExist'](_0x441e3b);const _0xffd783={};_0x5e083b[_0x23913e(0x164)]!==undefined&&(_0xffd783['webhookUrl']=_0x5e083b[_0x23913e(0x164)]||null),_0x5e083b[_0x23913e(0x17c)]!==undefined&&(_0xffd783[_0x23913e(0x17c)]=_0x5e083b[_0x23913e(0x17c)]||[]),await database_1[_0x23913e(0x17d)]['shopSettings'][_0x23913e(0x163)]({'where':{'shopId':_0x441e3b},'data':_0xffd783});}async[a48_0x198a2e(0x170)](_0x41cfeb){const _0x1f9939=a48_0x198a2e,_0x417da6=await database_1[_0x1f9939(0x17d)][_0x1f9939(0x174)][_0x1f9939(0x179)]({'where':{'shopId':_0x41cfeb}});!_0x417da6&&await database_1[_0x1f9939(0x17d)]['shopSettings']['create']({'data':{'shopId':_0x41cfeb}});}}exports['IntegrationsService']=IntegrationsService;