'use strict';const a47_0x23d958=a47_0x5bf0;(function(_0x150a3d,_0x5be28a){const _0x32caaf=a47_0x5bf0,_0x237b1b=_0x150a3d();while(!![]){try{const _0x3500a2=parseInt(_0x32caaf(0xc2))/0x1+-parseInt(_0x32caaf(0xcb))/0x2+parseInt(_0x32caaf(0xd4))/0x3*(parseInt(_0x32caaf(0xc8))/0x4)+-parseInt(_0x32caaf(0xc5))/0x5*(parseInt(_0x32caaf(0xc9))/0x6)+parseInt(_0x32caaf(0xcd))/0x7+parseInt(_0x32caaf(0xd9))/0x8+parseInt(_0x32caaf(0xd5))/0x9*(-parseInt(_0x32caaf(0xc7))/0xa);if(_0x3500a2===_0x5be28a)break;else _0x237b1b['push'](_0x237b1b['shift']());}catch(_0x16914d){_0x237b1b['push'](_0x237b1b['shift']());}}}(a47_0x5e1e,0xe8358));var __importDefault=this&&this[a47_0x23d958(0xd8)]||function(_0x1ddd4b){return _0x1ddd4b&&_0x1ddd4b['__esModule']?_0x1ddd4b:{'default':_0x1ddd4b};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a47_0x23d958(0xd3)]=void 0x0;function a47_0x5bf0(_0x16227c,_0x595b59){const _0x5e1e1b=a47_0x5e1e();return a47_0x5bf0=function(_0x5bf02a,_0x4930df){_0x5bf02a=_0x5bf02a-0xc2;let _0x5db973=_0x5e1e1b[_0x5bf02a];return _0x5db973;},a47_0x5bf0(_0x16227c,_0x595b59);}const database_1=__importDefault(require(a47_0x23d958(0xda)));class IntegrationsService{[a47_0x23d958(0xd1)](_0x455aca){const _0x16c523=a47_0x23d958;if(!_0x455aca)return[];if(Array[_0x16c523(0xd7)](_0x455aca))return _0x455aca;if(typeof _0x455aca===_0x16c523(0xc3))try{const _0x580217=JSON[_0x16c523(0xcf)](_0x455aca);return Array[_0x16c523(0xd7)](_0x580217)?_0x580217:[];}catch{return[];}return[];}async['getIntegrations'](_0x1729dc){const _0x299546=a47_0x23d958;await this['ensureSettingsExist'](_0x1729dc);const _0x1d3ea9=await database_1[_0x299546(0xce)][_0x299546(0xc4)][_0x299546(0xca)]({'where':{'shopId':_0x1729dc},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x1d3ea9)throw new Error(_0x299546(0xc6));return{'webhook':{'url':_0x1d3ea9['webhookUrl'],'events':this[_0x299546(0xd1)](_0x1d3ea9[_0x299546(0xd2)])}};}async['updateWebhookSettings'](_0x2b8ecf,_0x14d27f){const _0x4b724b=a47_0x23d958;await this[_0x4b724b(0xd0)](_0x2b8ecf);const _0x49e9f8={};_0x14d27f[_0x4b724b(0xcc)]!==undefined&&(_0x49e9f8[_0x4b724b(0xcc)]=_0x14d27f[_0x4b724b(0xcc)]||null),_0x14d27f[_0x4b724b(0xd2)]!==undefined&&(_0x49e9f8[_0x4b724b(0xd2)]=_0x14d27f[_0x4b724b(0xd2)]||[]),await database_1['default'][_0x4b724b(0xc4)]['update']({'where':{'shopId':_0x2b8ecf},'data':_0x49e9f8});}async[a47_0x23d958(0xd0)](_0x48233b){const _0x553905=a47_0x23d958,_0x4a3ff6=await database_1['default'][_0x553905(0xc4)][_0x553905(0xca)]({'where':{'shopId':_0x48233b}});!_0x4a3ff6&&await database_1['default'][_0x553905(0xc4)][_0x553905(0xd6)]({'data':{'shopId':_0x48233b}});}}function a47_0x5e1e(){const _0x48cdba=['parse','ensureSettingsExist','parseWebhookEvents','webhookEvents','IntegrationsService','33bFCSht','88947PGtjQF','create','isArray','__importDefault','8476280kdYMal','../config/database','1750396ddkgtY','string','shopSettings','445VYnuXD','Shop\x20settings\x20not\x20found','3070duRvhu','649916XuZuec','59964NxloDL','findUnique','275378cbpbwd','webhookUrl','2906148ZDPFWr','default'];a47_0x5e1e=function(){return _0x48cdba;};return a47_0x5e1e();}exports[a47_0x23d958(0xd3)]=IntegrationsService;