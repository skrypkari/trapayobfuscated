'use strict';const a48_0x1fdaae=a48_0x3c25;(function(_0x52b499,_0x2ad917){const _0x795f18=a48_0x3c25,_0x5a2c63=_0x52b499();while(!![]){try{const _0x578e62=parseInt(_0x795f18(0x104))/0x1*(-parseInt(_0x795f18(0xee))/0x2)+-parseInt(_0x795f18(0x103))/0x3*(parseInt(_0x795f18(0xf9))/0x4)+parseInt(_0x795f18(0xec))/0x5+-parseInt(_0x795f18(0x102))/0x6+parseInt(_0x795f18(0xf3))/0x7*(-parseInt(_0x795f18(0xea))/0x8)+-parseInt(_0x795f18(0xe9))/0x9*(-parseInt(_0x795f18(0xfd))/0xa)+parseInt(_0x795f18(0xf1))/0xb;if(_0x578e62===_0x2ad917)break;else _0x5a2c63['push'](_0x5a2c63['shift']());}catch(_0x5a9954){_0x5a2c63['push'](_0x5a2c63['shift']());}}}(a48_0x9fee,0x6d065));function a48_0x9fee(){const _0x2106d3=['8760870EAXaxt','isArray','../config/database','__esModule','findUnique','13116PaUXKc','11406cQjNHl','3YGEXEN','defineProperty','parse','9QJlnXc','4178920RogxAL','IntegrationsService','2071335yqbjKe','update','311224FosVBk','shopSettings','Shop\x20settings\x20not\x20found','11326282EYZKfN','default','7TOELNq','string','updateWebhookSettings','ensureSettingsExist','webhookEvents','create','928nzLmTZ','webhookUrl','__importDefault','parseWebhookEvents'];a48_0x9fee=function(){return _0x2106d3;};return a48_0x9fee();}var __importDefault=this&&this[a48_0x1fdaae(0xfb)]||function(_0x57f202){const _0x55f71d=a48_0x1fdaae;return _0x57f202&&_0x57f202[_0x55f71d(0x100)]?_0x57f202:{'default':_0x57f202};};Object[a48_0x1fdaae(0xe7)](exports,a48_0x1fdaae(0x100),{'value':!![]}),exports[a48_0x1fdaae(0xeb)]=void 0x0;const database_1=__importDefault(require(a48_0x1fdaae(0xff)));function a48_0x3c25(_0x508b90,_0x2de0cc){const _0x9fee63=a48_0x9fee();return a48_0x3c25=function(_0x3c2588,_0x47870d){_0x3c2588=_0x3c2588-0xe7;let _0x56af15=_0x9fee63[_0x3c2588];return _0x56af15;},a48_0x3c25(_0x508b90,_0x2de0cc);}class IntegrationsService{[a48_0x1fdaae(0xfc)](_0x380931){const _0x1553d2=a48_0x1fdaae;if(!_0x380931)return[];if(Array[_0x1553d2(0xfe)](_0x380931))return _0x380931;if(typeof _0x380931===_0x1553d2(0xf4))try{const _0x1f0fba=JSON[_0x1553d2(0xe8)](_0x380931);return Array[_0x1553d2(0xfe)](_0x1f0fba)?_0x1f0fba:[];}catch{return[];}return[];}async['getIntegrations'](_0x45198c){const _0x3024c2=a48_0x1fdaae;await this[_0x3024c2(0xf6)](_0x45198c);const _0x52579c=await database_1[_0x3024c2(0xf2)][_0x3024c2(0xef)][_0x3024c2(0x101)]({'where':{'shopId':_0x45198c},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x52579c)throw new Error(_0x3024c2(0xf0));return{'webhook':{'url':_0x52579c[_0x3024c2(0xfa)],'events':this[_0x3024c2(0xfc)](_0x52579c[_0x3024c2(0xf7)])}};}async[a48_0x1fdaae(0xf5)](_0x48b26c,_0x186535){const _0x2d69c2=a48_0x1fdaae;await this['ensureSettingsExist'](_0x48b26c);const _0x5da0a7={};_0x186535[_0x2d69c2(0xfa)]!==undefined&&(_0x5da0a7['webhookUrl']=_0x186535[_0x2d69c2(0xfa)]||null),_0x186535[_0x2d69c2(0xf7)]!==undefined&&(_0x5da0a7['webhookEvents']=_0x186535[_0x2d69c2(0xf7)]||[]),await database_1[_0x2d69c2(0xf2)][_0x2d69c2(0xef)][_0x2d69c2(0xed)]({'where':{'shopId':_0x48b26c},'data':_0x5da0a7});}async[a48_0x1fdaae(0xf6)](_0xe381e1){const _0xce08fb=a48_0x1fdaae,_0x8e2517=await database_1['default'][_0xce08fb(0xef)][_0xce08fb(0x101)]({'where':{'shopId':_0xe381e1}});!_0x8e2517&&await database_1[_0xce08fb(0xf2)]['shopSettings'][_0xce08fb(0xf8)]({'data':{'shopId':_0xe381e1}});}}exports[a48_0x1fdaae(0xeb)]=IntegrationsService;