'use strict';const a78_0x540e76=a78_0x332e;function a78_0x332e(_0x552114,_0xf01152){_0x552114=_0x552114-0x197;const _0x4b8a4e=a78_0x4b8a();let _0x332e08=_0x4b8a4e[_0x552114];return _0x332e08;}(function(_0x1a242a,_0x43c46b){const _0x582263=a78_0x332e,_0x3b7250=_0x1a242a();while(!![]){try{const _0x67a9b5=parseInt(_0x582263(0x1a9))/0x1+parseInt(_0x582263(0x19c))/0x2+parseInt(_0x582263(0x1b0))/0x3+-parseInt(_0x582263(0x1a8))/0x4*(-parseInt(_0x582263(0x197))/0x5)+parseInt(_0x582263(0x1a1))/0x6*(-parseInt(_0x582263(0x19d))/0x7)+-parseInt(_0x582263(0x1a3))/0x8+parseInt(_0x582263(0x1af))/0x9*(-parseInt(_0x582263(0x1a0))/0xa);if(_0x67a9b5===_0x43c46b)break;else _0x3b7250['push'](_0x3b7250['shift']());}catch(_0x76dde5){_0x3b7250['push'](_0x3b7250['shift']());}}}(a78_0x4b8a,0xaf0fa));var __importDefault=this&&this[a78_0x540e76(0x1ab)]||function(_0x328cf1){const _0x15041e=a78_0x540e76;return _0x328cf1&&_0x328cf1[_0x15041e(0x1ae)]?_0x328cf1:{'default':_0x328cf1};};Object[a78_0x540e76(0x1ac)](exports,a78_0x540e76(0x1ae),{'value':!![]}),exports[a78_0x540e76(0x1a7)]=void 0x0;const database_1=__importDefault(require('../config/database'));class IntegrationsService{[a78_0x540e76(0x1a6)](_0x559dbb){const _0xeee02a=a78_0x540e76;if(!_0x559dbb)return[];if(Array[_0xeee02a(0x1ad)](_0x559dbb))return _0x559dbb;if(typeof _0x559dbb==='string')try{const _0x3b5636=JSON[_0xeee02a(0x1aa)](_0x559dbb);return Array['isArray'](_0x3b5636)?_0x3b5636:[];}catch{return[];}return[];}async[a78_0x540e76(0x1a5)](_0x220390){const _0x3f91f8=a78_0x540e76;await this[_0x3f91f8(0x1a4)](_0x220390);const _0x5577c9=await database_1[_0x3f91f8(0x19e)][_0x3f91f8(0x198)][_0x3f91f8(0x19b)]({'where':{'shopId':_0x220390},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x5577c9)throw new Error('Shop\x20settings\x20not\x20found');return{'webhook':{'url':_0x5577c9[_0x3f91f8(0x19f)],'events':this[_0x3f91f8(0x1a6)](_0x5577c9[_0x3f91f8(0x199)])}};}async[a78_0x540e76(0x1a2)](_0x198b61,_0x3db828){const _0x17e3ec=a78_0x540e76;await this[_0x17e3ec(0x1a4)](_0x198b61);const _0x4eecca={};_0x3db828[_0x17e3ec(0x19f)]!==undefined&&(_0x4eecca[_0x17e3ec(0x19f)]=_0x3db828[_0x17e3ec(0x19f)]||null),_0x3db828[_0x17e3ec(0x199)]!==undefined&&(_0x4eecca['webhookEvents']=_0x3db828[_0x17e3ec(0x199)]||[]),await database_1['default'][_0x17e3ec(0x198)][_0x17e3ec(0x19a)]({'where':{'shopId':_0x198b61},'data':_0x4eecca});}async[a78_0x540e76(0x1a4)](_0x1bd831){const _0x261053=a78_0x540e76,_0xe04e38=await database_1['default'][_0x261053(0x198)]['findUnique']({'where':{'shopId':_0x1bd831}});!_0xe04e38&&await database_1[_0x261053(0x19e)][_0x261053(0x198)]['create']({'data':{'shopId':_0x1bd831}});}}exports[a78_0x540e76(0x1a7)]=IntegrationsService;function a78_0x4b8a(){const _0x4056ac=['ensureSettingsExist','getIntegrations','parseWebhookEvents','IntegrationsService','92gfAAcR','929541TekOdr','parse','__importDefault','defineProperty','isArray','__esModule','135IQrQcQ','2881518XZsiBl','259005FVMAqk','shopSettings','webhookEvents','update','findUnique','142892vhbCMY','7kqyROr','default','webhookUrl','1154610FgYZEH','1035906ChEjBi','updateWebhookSettings','4250400EXwalk'];a78_0x4b8a=function(){return _0x4056ac;};return a78_0x4b8a();}