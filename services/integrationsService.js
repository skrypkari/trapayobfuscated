'use strict';const a52_0x327a2f=a52_0x5d36;(function(_0x3b79c0,_0x479ad5){const _0x2ae566=a52_0x5d36,_0xc84bbc=_0x3b79c0();while(!![]){try{const _0x226ff6=parseInt(_0x2ae566(0x10e))/0x1+-parseInt(_0x2ae566(0x111))/0x2*(-parseInt(_0x2ae566(0x109))/0x3)+-parseInt(_0x2ae566(0x120))/0x4+parseInt(_0x2ae566(0x10a))/0x5*(-parseInt(_0x2ae566(0x110))/0x6)+parseInt(_0x2ae566(0x11a))/0x7+-parseInt(_0x2ae566(0x114))/0x8+parseInt(_0x2ae566(0x11d))/0x9;if(_0x226ff6===_0x479ad5)break;else _0xc84bbc['push'](_0xc84bbc['shift']());}catch(_0x297a1f){_0xc84bbc['push'](_0xc84bbc['shift']());}}}(a52_0x5227,0x8cd9a));function a52_0x5d36(_0x1249ff,_0x2cbb0e){const _0x52279f=a52_0x5227();return a52_0x5d36=function(_0x5d36e9,_0x52719a){_0x5d36e9=_0x5d36e9-0x109;let _0x2da275=_0x52279f[_0x5d36e9];return _0x2da275;},a52_0x5d36(_0x1249ff,_0x2cbb0e);}function a52_0x5227(){const _0x25d69c=['updateWebhookSettings','11721fRcLSn','1267495DoaeWS','IntegrationsService','../config/database','defineProperty','488939cpuNQU','Shop\x20settings\x20not\x20found','6YXxDqg','346BZftzL','webhookUrl','__esModule','1647992GmOLcM','ensureSettingsExist','create','webhookEvents','default','__importDefault','785694SrxerV','shopSettings','parseWebhookEvents','620289rICjKW','getIntegrations','findUnique','1238372ikDTDu','string'];a52_0x5227=function(){return _0x25d69c;};return a52_0x5227();}var __importDefault=this&&this[a52_0x327a2f(0x119)]||function(_0x2404e1){const _0x5cb0cb=a52_0x327a2f;return _0x2404e1&&_0x2404e1[_0x5cb0cb(0x113)]?_0x2404e1:{'default':_0x2404e1};};Object[a52_0x327a2f(0x10d)](exports,a52_0x327a2f(0x113),{'value':!![]}),exports[a52_0x327a2f(0x10b)]=void 0x0;const database_1=__importDefault(require(a52_0x327a2f(0x10c)));class IntegrationsService{[a52_0x327a2f(0x11c)](_0x1f70a7){const _0x926c8d=a52_0x327a2f;if(!_0x1f70a7)return[];if(Array['isArray'](_0x1f70a7))return _0x1f70a7;if(typeof _0x1f70a7===_0x926c8d(0x121))try{const _0x27413f=JSON['parse'](_0x1f70a7);return Array['isArray'](_0x27413f)?_0x27413f:[];}catch{return[];}return[];}async[a52_0x327a2f(0x11e)](_0x2f6620){const _0x496c0a=a52_0x327a2f;await this['ensureSettingsExist'](_0x2f6620);const _0xca69f7=await database_1[_0x496c0a(0x118)][_0x496c0a(0x11b)][_0x496c0a(0x11f)]({'where':{'shopId':_0x2f6620},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0xca69f7)throw new Error(_0x496c0a(0x10f));return{'webhook':{'url':_0xca69f7[_0x496c0a(0x112)],'events':this[_0x496c0a(0x11c)](_0xca69f7['webhookEvents'])}};}async[a52_0x327a2f(0x122)](_0x3bd030,_0x1dc892){const _0x316455=a52_0x327a2f;await this[_0x316455(0x115)](_0x3bd030);const _0xa58c0c={};_0x1dc892[_0x316455(0x112)]!==undefined&&(_0xa58c0c['webhookUrl']=_0x1dc892[_0x316455(0x112)]||null),_0x1dc892['webhookEvents']!==undefined&&(_0xa58c0c[_0x316455(0x117)]=_0x1dc892[_0x316455(0x117)]||[]),await database_1['default'][_0x316455(0x11b)]['update']({'where':{'shopId':_0x3bd030},'data':_0xa58c0c});}async[a52_0x327a2f(0x115)](_0xab03f8){const _0x47072b=a52_0x327a2f,_0x22035d=await database_1['default'][_0x47072b(0x11b)][_0x47072b(0x11f)]({'where':{'shopId':_0xab03f8}});!_0x22035d&&await database_1[_0x47072b(0x118)][_0x47072b(0x11b)][_0x47072b(0x116)]({'data':{'shopId':_0xab03f8}});}}exports[a52_0x327a2f(0x10b)]=IntegrationsService;