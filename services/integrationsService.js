'use strict';const a47_0xc02cc1=a47_0x16bf;(function(_0xb4d8e8,_0x254ed0){const _0x30e3ec=a47_0x16bf,_0x28893b=_0xb4d8e8();while(!![]){try{const _0x4b4477=parseInt(_0x30e3ec(0x94))/0x1*(-parseInt(_0x30e3ec(0xa7))/0x2)+-parseInt(_0x30e3ec(0x9c))/0x3*(-parseInt(_0x30e3ec(0xa9))/0x4)+parseInt(_0x30e3ec(0x9f))/0x5+-parseInt(_0x30e3ec(0x9e))/0x6+parseInt(_0x30e3ec(0xa5))/0x7*(parseInt(_0x30e3ec(0x9d))/0x8)+-parseInt(_0x30e3ec(0xa6))/0x9*(parseInt(_0x30e3ec(0xa3))/0xa)+parseInt(_0x30e3ec(0xa1))/0xb;if(_0x4b4477===_0x254ed0)break;else _0x28893b['push'](_0x28893b['shift']());}catch(_0x535ed3){_0x28893b['push'](_0x28893b['shift']());}}}(a47_0x310b,0x9cae4));var __importDefault=this&&this[a47_0xc02cc1(0x9a)]||function(_0x25d5e1){const _0x2c3e64=a47_0xc02cc1;return _0x25d5e1&&_0x25d5e1[_0x2c3e64(0x93)]?_0x25d5e1:{'default':_0x25d5e1};};Object[a47_0xc02cc1(0xa0)](exports,a47_0xc02cc1(0x93),{'value':!![]}),exports[a47_0xc02cc1(0x96)]=void 0x0;const database_1=__importDefault(require(a47_0xc02cc1(0xaa)));function a47_0x16bf(_0x47219f,_0x2e5015){const _0x310b78=a47_0x310b();return a47_0x16bf=function(_0x16bf3a,_0x482791){_0x16bf3a=_0x16bf3a-0x8f;let _0x467c95=_0x310b78[_0x16bf3a];return _0x467c95;},a47_0x16bf(_0x47219f,_0x2e5015);}class IntegrationsService{['parseWebhookEvents'](_0x5b602c){const _0x17331c=a47_0xc02cc1;if(!_0x5b602c)return[];if(Array[_0x17331c(0x9b)](_0x5b602c))return _0x5b602c;if(typeof _0x5b602c===_0x17331c(0x90))try{const _0x93c317=JSON['parse'](_0x5b602c);return Array['isArray'](_0x93c317)?_0x93c317:[];}catch{return[];}return[];}async[a47_0xc02cc1(0xa2)](_0x417da5){const _0x199d9b=a47_0xc02cc1;await this[_0x199d9b(0x99)](_0x417da5);const _0x3adb7a=await database_1[_0x199d9b(0x8f)][_0x199d9b(0xab)]['findUnique']({'where':{'shopId':_0x417da5},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x3adb7a)throw new Error('Shop\x20settings\x20not\x20found');return{'webhook':{'url':_0x3adb7a[_0x199d9b(0x97)],'events':this[_0x199d9b(0x95)](_0x3adb7a['webhookEvents'])}};}async[a47_0xc02cc1(0xa8)](_0x36d159,_0x47c2ea){const _0x517b9c=a47_0xc02cc1;await this['ensureSettingsExist'](_0x36d159);const _0x106c6b={};_0x47c2ea[_0x517b9c(0x97)]!==undefined&&(_0x106c6b[_0x517b9c(0x97)]=_0x47c2ea[_0x517b9c(0x97)]||null),_0x47c2ea[_0x517b9c(0x92)]!==undefined&&(_0x106c6b[_0x517b9c(0x92)]=_0x47c2ea['webhookEvents']||[]),await database_1[_0x517b9c(0x8f)][_0x517b9c(0xab)][_0x517b9c(0x98)]({'where':{'shopId':_0x36d159},'data':_0x106c6b});}async[a47_0xc02cc1(0x99)](_0xa9b590){const _0x5b60be=a47_0xc02cc1,_0x243bf0=await database_1[_0x5b60be(0x8f)][_0x5b60be(0xab)][_0x5b60be(0xa4)]({'where':{'shopId':_0xa9b590}});!_0x243bf0&&await database_1['default'][_0x5b60be(0xab)][_0x5b60be(0x91)]({'data':{'shopId':_0xa9b590}});}}function a47_0x310b(){const _0x2835d5=['getIntegrations','9661010jIsNXI','findUnique','728sDBLTR','9RIVSbl','2tzxEoU','updateWebhookSettings','1134284EzjRiy','../config/database','shopSettings','default','string','create','webhookEvents','__esModule','920399xHxZuz','parseWebhookEvents','IntegrationsService','webhookUrl','update','ensureSettingsExist','__importDefault','isArray','9rVoFZT','10600gHeBKN','3209538utbOXw','1447155DJhOaj','defineProperty','19637673oihxyS'];a47_0x310b=function(){return _0x2835d5;};return a47_0x310b();}exports[a47_0xc02cc1(0x96)]=IntegrationsService;