'use strict';function a58_0xc1ee(){const _0x592173=['3GILzme','Shop\x20settings\x20not\x20found','getIntegrations','6204144KTZWxP','default','../config/database','24wANphX','webhookEvents','isArray','updateWebhookSettings','webhookUrl','shopSettings','parseWebhookEvents','852545CccMRH','2568340ncEbpe','__esModule','IntegrationsService','findUnique','string','13795856DyXbkg','update','ensureSettingsExist','287308sBlXMH','parse','62421912oxilSH','4199818cOcUds','create'];a58_0xc1ee=function(){return _0x592173;};return a58_0xc1ee();}const a58_0x266610=a58_0x2b7a;(function(_0x141234,_0x546f16){const _0xa3d239=a58_0x2b7a,_0x1aec92=_0x141234();while(!![]){try{const _0x408933=-parseInt(_0xa3d239(0x1a5))/0x1+parseInt(_0xa3d239(0x19d))/0x2*(-parseInt(_0xa3d239(0x1aa))/0x3)+parseInt(_0xa3d239(0x1b0))/0x4*(-parseInt(_0xa3d239(0x19c))/0x5)+-parseInt(_0xa3d239(0x1ad))/0x6+-parseInt(_0xa3d239(0x1a8))/0x7+-parseInt(_0xa3d239(0x1a2))/0x8+parseInt(_0xa3d239(0x1a7))/0x9;if(_0x408933===_0x546f16)break;else _0x1aec92['push'](_0x1aec92['shift']());}catch(_0x353660){_0x1aec92['push'](_0x1aec92['shift']());}}}(a58_0xc1ee,0xefee4));var __importDefault=this&&this['__importDefault']||function(_0xb7152e){const _0x324c34=a58_0x2b7a;return _0xb7152e&&_0xb7152e[_0x324c34(0x19e)]?_0xb7152e:{'default':_0xb7152e};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a58_0x266610(0x19f)]=void 0x0;function a58_0x2b7a(_0x1e1016,_0x485f83){const _0xc1eefd=a58_0xc1ee();return a58_0x2b7a=function(_0x2b7a80,_0x59ab08){_0x2b7a80=_0x2b7a80-0x199;let _0x1df2ce=_0xc1eefd[_0x2b7a80];return _0x1df2ce;},a58_0x2b7a(_0x1e1016,_0x485f83);}const database_1=__importDefault(require(a58_0x266610(0x1af)));class IntegrationsService{[a58_0x266610(0x19b)](_0x42855d){const _0x3c7fce=a58_0x266610;if(!_0x42855d)return[];if(Array[_0x3c7fce(0x1b2)](_0x42855d))return _0x42855d;if(typeof _0x42855d===_0x3c7fce(0x1a1))try{const _0x551060=JSON[_0x3c7fce(0x1a6)](_0x42855d);return Array[_0x3c7fce(0x1b2)](_0x551060)?_0x551060:[];}catch{return[];}return[];}async[a58_0x266610(0x1ac)](_0x53cea2){const _0x358a85=a58_0x266610;await this[_0x358a85(0x1a4)](_0x53cea2);const _0xf1dfae=await database_1[_0x358a85(0x1ae)][_0x358a85(0x19a)][_0x358a85(0x1a0)]({'where':{'shopId':_0x53cea2},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0xf1dfae)throw new Error(_0x358a85(0x1ab));return{'webhook':{'url':_0xf1dfae[_0x358a85(0x199)],'events':this['parseWebhookEvents'](_0xf1dfae['webhookEvents'])}};}async[a58_0x266610(0x1b3)](_0x24c564,_0x22cf3b){const _0x2475ad=a58_0x266610;await this[_0x2475ad(0x1a4)](_0x24c564);const _0x16f1e0={};_0x22cf3b[_0x2475ad(0x199)]!==undefined&&(_0x16f1e0[_0x2475ad(0x199)]=_0x22cf3b['webhookUrl']||null),_0x22cf3b[_0x2475ad(0x1b1)]!==undefined&&(_0x16f1e0['webhookEvents']=_0x22cf3b[_0x2475ad(0x1b1)]||[]),await database_1[_0x2475ad(0x1ae)][_0x2475ad(0x19a)][_0x2475ad(0x1a3)]({'where':{'shopId':_0x24c564},'data':_0x16f1e0});}async[a58_0x266610(0x1a4)](_0x527c16){const _0x4cf142=a58_0x266610,_0x281485=await database_1[_0x4cf142(0x1ae)][_0x4cf142(0x19a)][_0x4cf142(0x1a0)]({'where':{'shopId':_0x527c16}});!_0x281485&&await database_1[_0x4cf142(0x1ae)][_0x4cf142(0x19a)][_0x4cf142(0x1a9)]({'data':{'shopId':_0x527c16}});}}exports[a58_0x266610(0x19f)]=IntegrationsService;