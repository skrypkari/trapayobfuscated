'use strict';const a48_0x7db536=a48_0x268a;function a48_0x2c85(){const _0x5c528a=['updateWebhookSettings','string','911480LHoCkQ','webhookUrl','4461654AvjcKG','710716JkRjeZ','../config/database','12kcjZov','getIntegrations','426824dzOZSQ','defineProperty','134744sbkrau','webhookEvents','2638785lpLmki','11738232IWBGUS','default','shopSettings','isArray','IntegrationsService','update','7PzRYrr','6MaXzBX','Shop\x20settings\x20not\x20found','ensureSettingsExist','findUnique','parse','parseWebhookEvents','__esModule','63gLWvhm'];a48_0x2c85=function(){return _0x5c528a;};return a48_0x2c85();}(function(_0x44d8fd,_0x862f11){const _0x14d5fc=a48_0x268a,_0x322dbd=_0x44d8fd();while(!![]){try{const _0x4604e6=parseInt(_0x14d5fc(0x17e))/0x1*(parseInt(_0x14d5fc(0x174))/0x2)+parseInt(_0x14d5fc(0x170))/0x3*(parseInt(_0x14d5fc(0x18b))/0x4)+-parseInt(_0x14d5fc(0x176))/0x5+-parseInt(_0x14d5fc(0x18a))/0x6*(parseInt(_0x14d5fc(0x17d))/0x7)+parseInt(_0x14d5fc(0x172))/0x8*(-parseInt(_0x14d5fc(0x185))/0x9)+-parseInt(_0x14d5fc(0x188))/0xa+parseInt(_0x14d5fc(0x177))/0xb;if(_0x4604e6===_0x862f11)break;else _0x322dbd['push'](_0x322dbd['shift']());}catch(_0x1c5158){_0x322dbd['push'](_0x322dbd['shift']());}}}(a48_0x2c85,0x6ce7b));function a48_0x268a(_0x39e905,_0x4e692e){const _0x2c850b=a48_0x2c85();return a48_0x268a=function(_0x268afc,_0x279f67){_0x268afc=_0x268afc-0x16f;let _0x32bc60=_0x2c850b[_0x268afc];return _0x32bc60;},a48_0x268a(_0x39e905,_0x4e692e);}var __importDefault=this&&this['__importDefault']||function(_0x2f4f54){const _0x3146be=a48_0x268a;return _0x2f4f54&&_0x2f4f54[_0x3146be(0x184)]?_0x2f4f54:{'default':_0x2f4f54};};Object[a48_0x7db536(0x173)](exports,'__esModule',{'value':!![]}),exports[a48_0x7db536(0x17b)]=void 0x0;const database_1=__importDefault(require(a48_0x7db536(0x16f)));class IntegrationsService{[a48_0x7db536(0x183)](_0x5a2c10){const _0x46dbfd=a48_0x7db536;if(!_0x5a2c10)return[];if(Array[_0x46dbfd(0x17a)](_0x5a2c10))return _0x5a2c10;if(typeof _0x5a2c10===_0x46dbfd(0x187))try{const _0x3683c5=JSON[_0x46dbfd(0x182)](_0x5a2c10);return Array['isArray'](_0x3683c5)?_0x3683c5:[];}catch{return[];}return[];}async[a48_0x7db536(0x171)](_0x5411ac){const _0x1f13f9=a48_0x7db536;await this[_0x1f13f9(0x180)](_0x5411ac);const _0x469678=await database_1[_0x1f13f9(0x178)][_0x1f13f9(0x179)]['findUnique']({'where':{'shopId':_0x5411ac},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x469678)throw new Error(_0x1f13f9(0x17f));return{'webhook':{'url':_0x469678[_0x1f13f9(0x189)],'events':this['parseWebhookEvents'](_0x469678[_0x1f13f9(0x175)])}};}async[a48_0x7db536(0x186)](_0x449e64,_0x1ff8ee){const _0x22280b=a48_0x7db536;await this[_0x22280b(0x180)](_0x449e64);const _0x4b6b5b={};_0x1ff8ee['webhookUrl']!==undefined&&(_0x4b6b5b['webhookUrl']=_0x1ff8ee[_0x22280b(0x189)]||null),_0x1ff8ee[_0x22280b(0x175)]!==undefined&&(_0x4b6b5b[_0x22280b(0x175)]=_0x1ff8ee[_0x22280b(0x175)]||[]),await database_1[_0x22280b(0x178)]['shopSettings'][_0x22280b(0x17c)]({'where':{'shopId':_0x449e64},'data':_0x4b6b5b});}async[a48_0x7db536(0x180)](_0x444ec1){const _0x37483d=a48_0x7db536,_0xaef1bf=await database_1[_0x37483d(0x178)]['shopSettings'][_0x37483d(0x181)]({'where':{'shopId':_0x444ec1}});!_0xaef1bf&&await database_1['default'][_0x37483d(0x179)]['create']({'data':{'shopId':_0x444ec1}});}}exports[a48_0x7db536(0x17b)]=IntegrationsService;