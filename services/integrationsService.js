'use strict';const a43_0x7a5f11=a43_0x5d21;(function(_0x4f1141,_0x55e284){const _0x6088ac=a43_0x5d21,_0x384efc=_0x4f1141();while(!![]){try{const _0x1f350c=-parseInt(_0x6088ac(0x1d9))/0x1*(parseInt(_0x6088ac(0x1d8))/0x2)+parseInt(_0x6088ac(0x1ef))/0x3+-parseInt(_0x6088ac(0x1e4))/0x4*(-parseInt(_0x6088ac(0x1de))/0x5)+parseInt(_0x6088ac(0x1eb))/0x6*(parseInt(_0x6088ac(0x1db))/0x7)+-parseInt(_0x6088ac(0x1ed))/0x8*(-parseInt(_0x6088ac(0x1e1))/0x9)+-parseInt(_0x6088ac(0x1d6))/0xa+parseInt(_0x6088ac(0x1ee))/0xb;if(_0x1f350c===_0x55e284)break;else _0x384efc['push'](_0x384efc['shift']());}catch(_0x11b872){_0x384efc['push'](_0x384efc['shift']());}}}(a43_0x3779,0xb78ec));var __importDefault=this&&this[a43_0x7a5f11(0x1dd)]||function(_0x479378){return _0x479378&&_0x479378['__esModule']?_0x479378:{'default':_0x479378};};function a43_0x5d21(_0x262af0,_0x2acd4f){const _0x37797f=a43_0x3779();return a43_0x5d21=function(_0x5d213c,_0x1edbd3){_0x5d213c=_0x5d213c-0x1d6;let _0x48bb4d=_0x37797f[_0x5d213c];return _0x48bb4d;},a43_0x5d21(_0x262af0,_0x2acd4f);}Object['defineProperty'](exports,a43_0x7a5f11(0x1d7),{'value':!![]}),exports['IntegrationsService']=void 0x0;const database_1=__importDefault(require(a43_0x7a5f11(0x1ea)));class IntegrationsService{['parseWebhookEvents'](_0x3b6919){const _0xa1c13c=a43_0x7a5f11;if(!_0x3b6919)return[];if(Array['isArray'](_0x3b6919))return _0x3b6919;if(typeof _0x3b6919===_0xa1c13c(0x1dc))try{const _0x5d6930=JSON[_0xa1c13c(0x1e7)](_0x3b6919);return Array['isArray'](_0x5d6930)?_0x5d6930:[];}catch{return[];}return[];}async[a43_0x7a5f11(0x1df)](_0x161fe0){const _0x69adcf=a43_0x7a5f11;await this[_0x69adcf(0x1e9)](_0x161fe0);const _0x41979b=await database_1['default'][_0x69adcf(0x1e6)][_0x69adcf(0x1e3)]({'where':{'shopId':_0x161fe0},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x41979b)throw new Error(_0x69adcf(0x1f0));return{'webhook':{'url':_0x41979b[_0x69adcf(0x1e8)],'events':this[_0x69adcf(0x1f1)](_0x41979b[_0x69adcf(0x1e2)])}};}async['updateWebhookSettings'](_0x2ab5e2,_0x7120ca){const _0x2dd5d0=a43_0x7a5f11;await this[_0x2dd5d0(0x1e9)](_0x2ab5e2);const _0x542db2={};_0x7120ca['webhookUrl']!==undefined&&(_0x542db2[_0x2dd5d0(0x1e8)]=_0x7120ca[_0x2dd5d0(0x1e8)]||null),_0x7120ca['webhookEvents']!==undefined&&(_0x542db2[_0x2dd5d0(0x1e2)]=_0x7120ca['webhookEvents']||[]),await database_1[_0x2dd5d0(0x1ec)][_0x2dd5d0(0x1e6)][_0x2dd5d0(0x1da)]({'where':{'shopId':_0x2ab5e2},'data':_0x542db2});}async['ensureSettingsExist'](_0x18f0e4){const _0x1e330e=a43_0x7a5f11,_0x33602d=await database_1[_0x1e330e(0x1ec)][_0x1e330e(0x1e6)]['findUnique']({'where':{'shopId':_0x18f0e4}});!_0x33602d&&await database_1[_0x1e330e(0x1ec)][_0x1e330e(0x1e6)][_0x1e330e(0x1e0)]({'data':{'shopId':_0x18f0e4}});}}function a43_0x3779(){const _0x50b161=['176470LybHBZ','9ttPxoV','update','18767cfNDmw','string','__importDefault','1820LuTGRw','getIntegrations','create','13941lKACWo','webhookEvents','findUnique','5044BGjiUm','IntegrationsService','shopSettings','parse','webhookUrl','ensureSettingsExist','../config/database','258JyVjSs','default','856DksWRr','9506871kdZnao','2307777mVkmwf','Shop\x20settings\x20not\x20found','parseWebhookEvents','8275830bPDjDS','__esModule'];a43_0x3779=function(){return _0x50b161;};return a43_0x3779();}exports[a43_0x7a5f11(0x1e5)]=IntegrationsService;