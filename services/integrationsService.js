'use strict';const a69_0x5d3ba6=a69_0x4832;function a69_0x4832(_0x5d5d25,_0xf53e50){_0x5d5d25=_0x5d5d25-0x73;const _0xf21906=a69_0xf219();let _0x483268=_0xf21906[_0x5d5d25];return _0x483268;}(function(_0x427de7,_0x18af43){const _0x45a1ab=a69_0x4832,_0x2f40be=_0x427de7();while(!![]){try{const _0x4b6ee6=-parseInt(_0x45a1ab(0x7f))/0x1+-parseInt(_0x45a1ab(0x84))/0x2+parseInt(_0x45a1ab(0x87))/0x3*(-parseInt(_0x45a1ab(0x80))/0x4)+-parseInt(_0x45a1ab(0x76))/0x5*(-parseInt(_0x45a1ab(0x7c))/0x6)+-parseInt(_0x45a1ab(0x8a))/0x7+-parseInt(_0x45a1ab(0x82))/0x8+parseInt(_0x45a1ab(0x81))/0x9*(parseInt(_0x45a1ab(0x8b))/0xa);if(_0x4b6ee6===_0x18af43)break;else _0x2f40be['push'](_0x2f40be['shift']());}catch(_0x369512){_0x2f40be['push'](_0x2f40be['shift']());}}}(a69_0xf219,0x2be29));var __importDefault=this&&this[a69_0x5d3ba6(0x73)]||function(_0x1c714a){const _0x40abfe=a69_0x5d3ba6;return _0x1c714a&&_0x1c714a[_0x40abfe(0x7d)]?_0x1c714a:{'default':_0x1c714a};};Object['defineProperty'](exports,a69_0x5d3ba6(0x7d),{'value':!![]}),exports['IntegrationsService']=void 0x0;const database_1=__importDefault(require('../config/database'));function a69_0xf219(){const _0x2839ec=['parseWebhookEvents','89943GhLhhL','68isauRX','9GsinFh','1918688dcPnOL','parse','555132iVWdRX','webhookUrl','create','3585YhABvr','isArray','string','444801RuJBJN','8370490DPcFxV','findUnique','__importDefault','ensureSettingsExist','update','4135BVKJKf','default','shopSettings','updateWebhookSettings','webhookEvents','Shop\x20settings\x20not\x20found','246JrnJDJ','__esModule'];a69_0xf219=function(){return _0x2839ec;};return a69_0xf219();}class IntegrationsService{['parseWebhookEvents'](_0xd5d71b){const _0x5adcb9=a69_0x5d3ba6;if(!_0xd5d71b)return[];if(Array[_0x5adcb9(0x88)](_0xd5d71b))return _0xd5d71b;if(typeof _0xd5d71b===_0x5adcb9(0x89))try{const _0x4e96ad=JSON[_0x5adcb9(0x83)](_0xd5d71b);return Array[_0x5adcb9(0x88)](_0x4e96ad)?_0x4e96ad:[];}catch{return[];}return[];}async['getIntegrations'](_0xe6cd7b){const _0x22b347=a69_0x5d3ba6;await this['ensureSettingsExist'](_0xe6cd7b);const _0xe9f8fa=await database_1[_0x22b347(0x77)][_0x22b347(0x78)][_0x22b347(0x8c)]({'where':{'shopId':_0xe6cd7b},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0xe9f8fa)throw new Error(_0x22b347(0x7b));return{'webhook':{'url':_0xe9f8fa['webhookUrl'],'events':this[_0x22b347(0x7e)](_0xe9f8fa['webhookEvents'])}};}async[a69_0x5d3ba6(0x79)](_0x4ad5a2,_0x38fa92){const _0x280f33=a69_0x5d3ba6;await this[_0x280f33(0x74)](_0x4ad5a2);const _0x6e64b6={};_0x38fa92[_0x280f33(0x85)]!==undefined&&(_0x6e64b6[_0x280f33(0x85)]=_0x38fa92[_0x280f33(0x85)]||null),_0x38fa92[_0x280f33(0x7a)]!==undefined&&(_0x6e64b6[_0x280f33(0x7a)]=_0x38fa92[_0x280f33(0x7a)]||[]),await database_1[_0x280f33(0x77)][_0x280f33(0x78)][_0x280f33(0x75)]({'where':{'shopId':_0x4ad5a2},'data':_0x6e64b6});}async[a69_0x5d3ba6(0x74)](_0x223ae0){const _0xa30570=a69_0x5d3ba6,_0x1f3fde=await database_1[_0xa30570(0x77)][_0xa30570(0x78)]['findUnique']({'where':{'shopId':_0x223ae0}});!_0x1f3fde&&await database_1[_0xa30570(0x77)][_0xa30570(0x78)][_0xa30570(0x86)]({'data':{'shopId':_0x223ae0}});}}exports['IntegrationsService']=IntegrationsService;