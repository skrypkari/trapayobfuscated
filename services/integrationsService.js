'use strict';function a50_0x2461(_0x5b77de,_0x49c12e){const _0x49d5dd=a50_0x49d5();return a50_0x2461=function(_0x246103,_0xdfca43){_0x246103=_0x246103-0x139;let _0x1fffac=_0x49d5dd[_0x246103];return _0x1fffac;},a50_0x2461(_0x5b77de,_0x49c12e);}const a50_0x17f54e=a50_0x2461;(function(_0x4c4ec3,_0x2bbb2e){const _0x38f7fe=a50_0x2461,_0x222fd6=_0x4c4ec3();while(!![]){try{const _0x139933=parseInt(_0x38f7fe(0x141))/0x1*(parseInt(_0x38f7fe(0x152))/0x2)+parseInt(_0x38f7fe(0x13b))/0x3*(parseInt(_0x38f7fe(0x14b))/0x4)+parseInt(_0x38f7fe(0x147))/0x5*(parseInt(_0x38f7fe(0x13e))/0x6)+-parseInt(_0x38f7fe(0x146))/0x7+-parseInt(_0x38f7fe(0x14f))/0x8+-parseInt(_0x38f7fe(0x154))/0x9*(parseInt(_0x38f7fe(0x13d))/0xa)+parseInt(_0x38f7fe(0x14e))/0xb;if(_0x139933===_0x2bbb2e)break;else _0x222fd6['push'](_0x222fd6['shift']());}catch(_0x2a4517){_0x222fd6['push'](_0x222fd6['shift']());}}}(a50_0x49d5,0xe0625));function a50_0x49d5(){const _0x3d21a7=['33951BNsTWt','string','10lfuOcr','2532OyejUy','parseWebhookEvents','../config/database','800463fSzXVd','parse','update','isArray','findUnique','11188989lRElcg','16055vMPYTQ','shopSettings','__esModule','webhookEvents','176gXgtJo','Shop\x20settings\x20not\x20found','IntegrationsService','22880528PEfncu','11433552lNyMZx','updateWebhookSettings','default','4nizbDO','create','14285394RWhvTl','ensureSettingsExist','webhookUrl'];a50_0x49d5=function(){return _0x3d21a7;};return a50_0x49d5();}var __importDefault=this&&this['__importDefault']||function(_0x23db68){const _0x2a1416=a50_0x2461;return _0x23db68&&_0x23db68[_0x2a1416(0x149)]?_0x23db68:{'default':_0x23db68};};Object['defineProperty'](exports,a50_0x17f54e(0x149),{'value':!![]}),exports[a50_0x17f54e(0x14d)]=void 0x0;const database_1=__importDefault(require(a50_0x17f54e(0x140)));class IntegrationsService{[a50_0x17f54e(0x13f)](_0xca2834){const _0x4fb290=a50_0x17f54e;if(!_0xca2834)return[];if(Array['isArray'](_0xca2834))return _0xca2834;if(typeof _0xca2834===_0x4fb290(0x13c))try{const _0x588fc5=JSON[_0x4fb290(0x142)](_0xca2834);return Array[_0x4fb290(0x144)](_0x588fc5)?_0x588fc5:[];}catch{return[];}return[];}async['getIntegrations'](_0x5a0fc4){const _0x56f658=a50_0x17f54e;await this[_0x56f658(0x139)](_0x5a0fc4);const _0x2dd5cc=await database_1[_0x56f658(0x151)][_0x56f658(0x148)][_0x56f658(0x145)]({'where':{'shopId':_0x5a0fc4},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x2dd5cc)throw new Error(_0x56f658(0x14c));return{'webhook':{'url':_0x2dd5cc[_0x56f658(0x13a)],'events':this['parseWebhookEvents'](_0x2dd5cc[_0x56f658(0x14a)])}};}async[a50_0x17f54e(0x150)](_0x226f65,_0x4853ae){const _0x18baf3=a50_0x17f54e;await this[_0x18baf3(0x139)](_0x226f65);const _0x555374={};_0x4853ae[_0x18baf3(0x13a)]!==undefined&&(_0x555374[_0x18baf3(0x13a)]=_0x4853ae[_0x18baf3(0x13a)]||null),_0x4853ae['webhookEvents']!==undefined&&(_0x555374[_0x18baf3(0x14a)]=_0x4853ae[_0x18baf3(0x14a)]||[]),await database_1[_0x18baf3(0x151)][_0x18baf3(0x148)][_0x18baf3(0x143)]({'where':{'shopId':_0x226f65},'data':_0x555374});}async['ensureSettingsExist'](_0x499055){const _0x49a71a=a50_0x17f54e,_0x362bc4=await database_1['default'][_0x49a71a(0x148)]['findUnique']({'where':{'shopId':_0x499055}});!_0x362bc4&&await database_1['default'][_0x49a71a(0x148)][_0x49a71a(0x153)]({'data':{'shopId':_0x499055}});}}exports[a50_0x17f54e(0x14d)]=IntegrationsService;