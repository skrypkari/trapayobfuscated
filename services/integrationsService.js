'use strict';const a70_0x32867a=a70_0x5995;(function(_0x1104ca,_0x1b0709){const _0xa2280e=a70_0x5995,_0xe8ce1d=_0x1104ca();while(!![]){try{const _0x3437c0=parseInt(_0xa2280e(0xee))/0x1*(-parseInt(_0xa2280e(0xea))/0x2)+-parseInt(_0xa2280e(0xfb))/0x3*(parseInt(_0xa2280e(0x105))/0x4)+parseInt(_0xa2280e(0x100))/0x5*(-parseInt(_0xa2280e(0x103))/0x6)+-parseInt(_0xa2280e(0xf6))/0x7+parseInt(_0xa2280e(0xfc))/0x8+parseInt(_0xa2280e(0xec))/0x9*(-parseInt(_0xa2280e(0xeb))/0xa)+parseInt(_0xa2280e(0xff))/0xb*(parseInt(_0xa2280e(0xf2))/0xc);if(_0x3437c0===_0x1b0709)break;else _0xe8ce1d['push'](_0xe8ce1d['shift']());}catch(_0x29555d){_0xe8ce1d['push'](_0xe8ce1d['shift']());}}}(a70_0x1a36,0x5a76b));function a70_0x5995(_0x4b16d2,_0x2b3f3e){_0x4b16d2=_0x4b16d2-0xe9;const _0x1a3675=a70_0x1a36();let _0x59956c=_0x1a3675[_0x4b16d2];return _0x59956c;}var __importDefault=this&&this[a70_0x32867a(0xfa)]||function(_0x44b399){return _0x44b399&&_0x44b399['__esModule']?_0x44b399:{'default':_0x44b399};};Object[a70_0x32867a(0xf1)](exports,'__esModule',{'value':!![]}),exports['IntegrationsService']=void 0x0;const database_1=__importDefault(require(a70_0x32867a(0xed)));class IntegrationsService{['parseWebhookEvents'](_0x42e20a){const _0x37b916=a70_0x32867a;if(!_0x42e20a)return[];if(Array[_0x37b916(0xf4)](_0x42e20a))return _0x42e20a;if(typeof _0x42e20a===_0x37b916(0x104))try{const _0x3698c0=JSON[_0x37b916(0xe9)](_0x42e20a);return Array[_0x37b916(0xf4)](_0x3698c0)?_0x3698c0:[];}catch{return[];}return[];}async['getIntegrations'](_0x12fc4e){const _0x490213=a70_0x32867a;await this[_0x490213(0x102)](_0x12fc4e);const _0x57989c=await database_1[_0x490213(0xf7)]['shopSettings'][_0x490213(0xfd)]({'where':{'shopId':_0x12fc4e},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x57989c)throw new Error('Shop\x20settings\x20not\x20found');return{'webhook':{'url':_0x57989c[_0x490213(0xf9)],'events':this[_0x490213(0xf3)](_0x57989c[_0x490213(0xf8)])}};}async[a70_0x32867a(0xfe)](_0x15323f,_0x4995ae){const _0x46a4c0=a70_0x32867a;await this[_0x46a4c0(0x102)](_0x15323f);const _0x82723f={};_0x4995ae['webhookUrl']!==undefined&&(_0x82723f[_0x46a4c0(0xf9)]=_0x4995ae['webhookUrl']||null),_0x4995ae[_0x46a4c0(0xf8)]!==undefined&&(_0x82723f[_0x46a4c0(0xf8)]=_0x4995ae['webhookEvents']||[]),await database_1['default'][_0x46a4c0(0x101)][_0x46a4c0(0xf5)]({'where':{'shopId':_0x15323f},'data':_0x82723f});}async[a70_0x32867a(0x102)](_0x5a5a34){const _0x33d6e7=a70_0x32867a,_0x352f1e=await database_1[_0x33d6e7(0xf7)][_0x33d6e7(0x101)][_0x33d6e7(0xfd)]({'where':{'shopId':_0x5a5a34}});!_0x352f1e&&await database_1[_0x33d6e7(0xf7)][_0x33d6e7(0x101)][_0x33d6e7(0xf0)]({'data':{'shopId':_0x5a5a34}});}}exports[a70_0x32867a(0xef)]=IntegrationsService;function a70_0x1a36(){const _0x5219f9=['updateWebhookSettings','3443nzuQcf','1125GhBXDX','shopSettings','ensureSettingsExist','3414iMVouB','string','4xQgmim','parse','613764nsTKwW','8690BYFtQj','4716vZwhSC','../config/database','1ayOmhE','IntegrationsService','create','defineProperty','82488Kbcvou','parseWebhookEvents','isArray','update','1730743VRrzxo','default','webhookEvents','webhookUrl','__importDefault','2156379ydmlcm','602256kwWnhF','findUnique'];a70_0x1a36=function(){return _0x5219f9;};return a70_0x1a36();}