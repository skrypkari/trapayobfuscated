'use strict';const a47_0x241055=a47_0x549d;(function(_0x14f705,_0x5a68c9){const _0x45f63e=a47_0x549d,_0x2a11b0=_0x14f705();while(!![]){try{const _0xdde187=parseInt(_0x45f63e(0x13f))/0x1+parseInt(_0x45f63e(0x130))/0x2*(parseInt(_0x45f63e(0x12f))/0x3)+-parseInt(_0x45f63e(0x12b))/0x4*(-parseInt(_0x45f63e(0x133))/0x5)+-parseInt(_0x45f63e(0x129))/0x6+parseInt(_0x45f63e(0x139))/0x7+-parseInt(_0x45f63e(0x13b))/0x8+-parseInt(_0x45f63e(0x142))/0x9;if(_0xdde187===_0x5a68c9)break;else _0x2a11b0['push'](_0x2a11b0['shift']());}catch(_0x11af88){_0x2a11b0['push'](_0x2a11b0['shift']());}}}(a47_0x329f,0x4ee9a));function a47_0x549d(_0x1df6b6,_0x2ae812){const _0x329f73=a47_0x329f();return a47_0x549d=function(_0x549d4e,_0x4d6d4f){_0x549d4e=_0x549d4e-0x129;let _0x27099a=_0x329f73[_0x549d4e];return _0x27099a;},a47_0x549d(_0x1df6b6,_0x2ae812);}var __importDefault=this&&this['__importDefault']||function(_0x1b9df1){return _0x1b9df1&&_0x1b9df1['__esModule']?_0x1b9df1:{'default':_0x1b9df1};};Object['defineProperty'](exports,a47_0x241055(0x13e),{'value':!![]}),exports['IntegrationsService']=void 0x0;const database_1=__importDefault(require(a47_0x241055(0x138)));class IntegrationsService{[a47_0x241055(0x13d)](_0x46fb8d){const _0x2f90a0=a47_0x241055;if(!_0x46fb8d)return[];if(Array[_0x2f90a0(0x12e)](_0x46fb8d))return _0x46fb8d;if(typeof _0x46fb8d==='string')try{const _0x1f6fd3=JSON[_0x2f90a0(0x141)](_0x46fb8d);return Array['isArray'](_0x1f6fd3)?_0x1f6fd3:[];}catch{return[];}return[];}async[a47_0x241055(0x13a)](_0x2fc624){const _0x339e83=a47_0x241055;await this[_0x339e83(0x135)](_0x2fc624);const _0x60ca20=await database_1[_0x339e83(0x12d)][_0x339e83(0x136)][_0x339e83(0x12c)]({'where':{'shopId':_0x2fc624},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x60ca20)throw new Error(_0x339e83(0x131));return{'webhook':{'url':_0x60ca20[_0x339e83(0x12a)],'events':this[_0x339e83(0x13d)](_0x60ca20[_0x339e83(0x134)])}};}async[a47_0x241055(0x137)](_0x1fdc22,_0x1ec111){const _0x46b4ad=a47_0x241055;await this[_0x46b4ad(0x135)](_0x1fdc22);const _0x2cb86f={};_0x1ec111[_0x46b4ad(0x12a)]!==undefined&&(_0x2cb86f['webhookUrl']=_0x1ec111[_0x46b4ad(0x12a)]||null),_0x1ec111['webhookEvents']!==undefined&&(_0x2cb86f[_0x46b4ad(0x134)]=_0x1ec111[_0x46b4ad(0x134)]||[]),await database_1['default'][_0x46b4ad(0x136)][_0x46b4ad(0x140)]({'where':{'shopId':_0x1fdc22},'data':_0x2cb86f});}async[a47_0x241055(0x135)](_0x3241f8){const _0x526063=a47_0x241055,_0xe9d056=await database_1['default'][_0x526063(0x136)][_0x526063(0x12c)]({'where':{'shopId':_0x3241f8}});!_0xe9d056&&await database_1[_0x526063(0x12d)][_0x526063(0x136)][_0x526063(0x13c)]({'data':{'shopId':_0x3241f8}});}}exports[a47_0x241055(0x132)]=IntegrationsService;function a47_0x329f(){const _0x2ecb8d=['shopSettings','updateWebhookSettings','../config/database','2894871yBqspJ','getIntegrations','3186272gqpBKf','create','parseWebhookEvents','__esModule','170840iAcOkg','update','parse','270936azjnss','1719846AMjjJR','webhookUrl','4tfAsKW','findUnique','default','isArray','505392ANGzqB','2KMUrkK','Shop\x20settings\x20not\x20found','IntegrationsService','1426990rGkViW','webhookEvents','ensureSettingsExist'];a47_0x329f=function(){return _0x2ecb8d;};return a47_0x329f();}