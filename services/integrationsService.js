'use strict';const a58_0x5a9d88=a58_0x624e;(function(_0x1aac07,_0x5279ab){const _0x30f585=a58_0x624e,_0x57702e=_0x1aac07();while(!![]){try{const _0xa98086=-parseInt(_0x30f585(0x16a))/0x1*(parseInt(_0x30f585(0x170))/0x2)+parseInt(_0x30f585(0x173))/0x3+parseInt(_0x30f585(0x15f))/0x4+-parseInt(_0x30f585(0x179))/0x5+-parseInt(_0x30f585(0x16d))/0x6*(parseInt(_0x30f585(0x16e))/0x7)+-parseInt(_0x30f585(0x171))/0x8+-parseInt(_0x30f585(0x168))/0x9*(-parseInt(_0x30f585(0x16c))/0xa);if(_0xa98086===_0x5279ab)break;else _0x57702e['push'](_0x57702e['shift']());}catch(_0x151bdc){_0x57702e['push'](_0x57702e['shift']());}}}(a58_0x2f4d,0x812ca));function a58_0x624e(_0x8b8635,_0x2104cb){const _0x2f4d84=a58_0x2f4d();return a58_0x624e=function(_0x624e8d,_0x206a29){_0x624e8d=_0x624e8d-0x15f;let _0x221d10=_0x2f4d84[_0x624e8d];return _0x221d10;},a58_0x624e(_0x8b8635,_0x2104cb);}function a58_0x2f4d(){const _0x5c6e1f=['453HMRRVg','webhookEvents','246930dSUUwJ','42pFULbN','315007HFiHul','Shop\x20settings\x20not\x20found','310rvThnn','1490968XaWLen','updateWebhookSettings','550299EabgmC','isArray','default','ensureSettingsExist','webhookUrl','__esModule','4590935gKIxlJ','328968JtDBZC','../config/database','create','getIntegrations','parseWebhookEvents','__importDefault','shopSettings','IntegrationsService','findUnique','639vUBTFF','parse'];a58_0x2f4d=function(){return _0x5c6e1f;};return a58_0x2f4d();}var __importDefault=this&&this[a58_0x5a9d88(0x164)]||function(_0x1cf58a){return _0x1cf58a&&_0x1cf58a['__esModule']?_0x1cf58a:{'default':_0x1cf58a};};Object['defineProperty'](exports,a58_0x5a9d88(0x178),{'value':!![]}),exports[a58_0x5a9d88(0x166)]=void 0x0;const database_1=__importDefault(require(a58_0x5a9d88(0x160)));class IntegrationsService{[a58_0x5a9d88(0x163)](_0x506784){const _0x1abf28=a58_0x5a9d88;if(!_0x506784)return[];if(Array[_0x1abf28(0x174)](_0x506784))return _0x506784;if(typeof _0x506784==='string')try{const _0x15b458=JSON[_0x1abf28(0x169)](_0x506784);return Array[_0x1abf28(0x174)](_0x15b458)?_0x15b458:[];}catch{return[];}return[];}async[a58_0x5a9d88(0x162)](_0xdde4b5){const _0x24140a=a58_0x5a9d88;await this[_0x24140a(0x176)](_0xdde4b5);const _0x2073ab=await database_1[_0x24140a(0x175)][_0x24140a(0x165)][_0x24140a(0x167)]({'where':{'shopId':_0xdde4b5},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x2073ab)throw new Error(_0x24140a(0x16f));return{'webhook':{'url':_0x2073ab[_0x24140a(0x177)],'events':this[_0x24140a(0x163)](_0x2073ab[_0x24140a(0x16b)])}};}async[a58_0x5a9d88(0x172)](_0x52371b,_0x180bd4){const _0x464bc2=a58_0x5a9d88;await this[_0x464bc2(0x176)](_0x52371b);const _0x35da33={};_0x180bd4[_0x464bc2(0x177)]!==undefined&&(_0x35da33[_0x464bc2(0x177)]=_0x180bd4[_0x464bc2(0x177)]||null),_0x180bd4[_0x464bc2(0x16b)]!==undefined&&(_0x35da33[_0x464bc2(0x16b)]=_0x180bd4[_0x464bc2(0x16b)]||[]),await database_1['default'][_0x464bc2(0x165)]['update']({'where':{'shopId':_0x52371b},'data':_0x35da33});}async[a58_0x5a9d88(0x176)](_0x2b8acd){const _0x2c12a8=a58_0x5a9d88,_0x450303=await database_1[_0x2c12a8(0x175)][_0x2c12a8(0x165)]['findUnique']({'where':{'shopId':_0x2b8acd}});!_0x450303&&await database_1[_0x2c12a8(0x175)][_0x2c12a8(0x165)][_0x2c12a8(0x161)]({'data':{'shopId':_0x2b8acd}});}}exports[a58_0x5a9d88(0x166)]=IntegrationsService;