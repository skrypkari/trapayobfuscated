'use strict';const a52_0x48c704=a52_0x12e3;function a52_0x31a0(){const _0x1eee75=['678764fLzBCs','2148840NSfmoJ','webhookEvents','isArray','839361ejdHft','parseWebhookEvents','string','20sHJEvs','1422TQPxmB','parse','52066eXrRWz','ensureSettingsExist','20711385vYHUpX','../config/database','webhookUrl','shopSettings','IntegrationsService','getIntegrations','__esModule','2841820OxROUp','update','__importDefault','default','defineProperty','Shop\x20settings\x20not\x20found','1510065QCkhtI','create'];a52_0x31a0=function(){return _0x1eee75;};return a52_0x31a0();}(function(_0x53b9f4,_0x4c4ebf){const _0x2ad1f1=a52_0x12e3,_0x10dde3=_0x53b9f4();while(!![]){try{const _0x308b58=-parseInt(_0x2ad1f1(0x127))/0x1+-parseInt(_0x2ad1f1(0x136))/0x2+-parseInt(_0x2ad1f1(0x121))/0x3+-parseInt(_0x2ad1f1(0x123))/0x4*(parseInt(_0x2ad1f1(0x12a))/0x5)+-parseInt(_0x2ad1f1(0x12b))/0x6*(-parseInt(_0x2ad1f1(0x12d))/0x7)+parseInt(_0x2ad1f1(0x124))/0x8+parseInt(_0x2ad1f1(0x12f))/0x9;if(_0x308b58===_0x4c4ebf)break;else _0x10dde3['push'](_0x10dde3['shift']());}catch(_0x57c4cd){_0x10dde3['push'](_0x10dde3['shift']());}}}(a52_0x31a0,0xd95ae));function a52_0x12e3(_0x3ea626,_0x1dc7aa){const _0x31a042=a52_0x31a0();return a52_0x12e3=function(_0x12e33b,_0xd5f66d){_0x12e33b=_0x12e33b-0x120;let _0x594154=_0x31a042[_0x12e33b];return _0x594154;},a52_0x12e3(_0x3ea626,_0x1dc7aa);}var __importDefault=this&&this[a52_0x48c704(0x138)]||function(_0x13f97c){const _0x200860=a52_0x48c704;return _0x13f97c&&_0x13f97c[_0x200860(0x135)]?_0x13f97c:{'default':_0x13f97c};};Object[a52_0x48c704(0x13a)](exports,a52_0x48c704(0x135),{'value':!![]}),exports[a52_0x48c704(0x133)]=void 0x0;const database_1=__importDefault(require(a52_0x48c704(0x130)));class IntegrationsService{[a52_0x48c704(0x128)](_0x608f4a){const _0x5c4be9=a52_0x48c704;if(!_0x608f4a)return[];if(Array[_0x5c4be9(0x126)](_0x608f4a))return _0x608f4a;if(typeof _0x608f4a===_0x5c4be9(0x129))try{const _0x1d3fd9=JSON[_0x5c4be9(0x12c)](_0x608f4a);return Array[_0x5c4be9(0x126)](_0x1d3fd9)?_0x1d3fd9:[];}catch{return[];}return[];}async[a52_0x48c704(0x134)](_0xf105c8){const _0x222ba2=a52_0x48c704;await this[_0x222ba2(0x12e)](_0xf105c8);const _0x6a5a4b=await database_1['default'][_0x222ba2(0x132)]['findUnique']({'where':{'shopId':_0xf105c8},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x6a5a4b)throw new Error(_0x222ba2(0x120));return{'webhook':{'url':_0x6a5a4b[_0x222ba2(0x131)],'events':this['parseWebhookEvents'](_0x6a5a4b[_0x222ba2(0x125)])}};}async['updateWebhookSettings'](_0x44fe1b,_0x10bda3){const _0x4f2b18=a52_0x48c704;await this['ensureSettingsExist'](_0x44fe1b);const _0xdfa92d={};_0x10bda3['webhookUrl']!==undefined&&(_0xdfa92d[_0x4f2b18(0x131)]=_0x10bda3[_0x4f2b18(0x131)]||null),_0x10bda3['webhookEvents']!==undefined&&(_0xdfa92d[_0x4f2b18(0x125)]=_0x10bda3[_0x4f2b18(0x125)]||[]),await database_1[_0x4f2b18(0x139)][_0x4f2b18(0x132)][_0x4f2b18(0x137)]({'where':{'shopId':_0x44fe1b},'data':_0xdfa92d});}async[a52_0x48c704(0x12e)](_0x5421cd){const _0x11c1bd=a52_0x48c704,_0xd7c679=await database_1[_0x11c1bd(0x139)][_0x11c1bd(0x132)]['findUnique']({'where':{'shopId':_0x5421cd}});!_0xd7c679&&await database_1[_0x11c1bd(0x139)]['shopSettings'][_0x11c1bd(0x122)]({'data':{'shopId':_0x5421cd}});}}exports[a52_0x48c704(0x133)]=IntegrationsService;