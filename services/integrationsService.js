'use strict';const a43_0x5574c6=a43_0xce89;(function(_0x572152,_0x504c29){const _0x55022c=a43_0xce89,_0x3b0687=_0x572152();while(!![]){try{const _0x4352c7=parseInt(_0x55022c(0x1cf))/0x1*(parseInt(_0x55022c(0x1ce))/0x2)+parseInt(_0x55022c(0x1c1))/0x3+parseInt(_0x55022c(0x1c4))/0x4+parseInt(_0x55022c(0x1c7))/0x5+parseInt(_0x55022c(0x1bb))/0x6*(-parseInt(_0x55022c(0x1c5))/0x7)+-parseInt(_0x55022c(0x1d5))/0x8*(-parseInt(_0x55022c(0x1d4))/0x9)+-parseInt(_0x55022c(0x1c6))/0xa*(parseInt(_0x55022c(0x1bf))/0xb);if(_0x4352c7===_0x504c29)break;else _0x3b0687['push'](_0x3b0687['shift']());}catch(_0x26db0a){_0x3b0687['push'](_0x3b0687['shift']());}}}(a43_0x19b6,0x8747f));var __importDefault=this&&this[a43_0x5574c6(0x1bc)]||function(_0x185457){const _0x246244=a43_0x5574c6;return _0x185457&&_0x185457[_0x246244(0x1be)]?_0x185457:{'default':_0x185457};};Object[a43_0x5574c6(0x1d0)](exports,'__esModule',{'value':!![]}),exports['IntegrationsService']=void 0x0;const database_1=__importDefault(require('../config/database'));function a43_0xce89(_0x1ec09d,_0x497efb){const _0x19b681=a43_0x19b6();return a43_0xce89=function(_0xce89bb,_0x153be8){_0xce89bb=_0xce89bb-0x1bb;let _0x400d89=_0x19b681[_0xce89bb];return _0x400d89;},a43_0xce89(_0x1ec09d,_0x497efb);}function a43_0x19b6(){const _0xb3edc=['create','default','2607656vRcRTT','7uDhEHM','3828670PdWJZN','5154850WKciaX','isArray','shopSettings','parseWebhookEvents','Shop\x20settings\x20not\x20found','findUnique','parse','477130jnbPEA','2nyvaSw','defineProperty','string','ensureSettingsExist','webhookUrl','9ROXrRb','3722536xgXsKc','updateWebhookSettings','update','3283056XQHrcH','__importDefault','getIntegrations','__esModule','55kKsury','webhookEvents','1170873gAflaV'];a43_0x19b6=function(){return _0xb3edc;};return a43_0x19b6();}class IntegrationsService{[a43_0x5574c6(0x1ca)](_0x2a73d0){const _0x44ee7c=a43_0x5574c6;if(!_0x2a73d0)return[];if(Array['isArray'](_0x2a73d0))return _0x2a73d0;if(typeof _0x2a73d0===_0x44ee7c(0x1d1))try{const _0x327737=JSON[_0x44ee7c(0x1cd)](_0x2a73d0);return Array[_0x44ee7c(0x1c8)](_0x327737)?_0x327737:[];}catch{return[];}return[];}async[a43_0x5574c6(0x1bd)](_0x1a748f){const _0x37244d=a43_0x5574c6;await this[_0x37244d(0x1d2)](_0x1a748f);const _0x55b023=await database_1[_0x37244d(0x1c3)]['shopSettings'][_0x37244d(0x1cc)]({'where':{'shopId':_0x1a748f},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x55b023)throw new Error(_0x37244d(0x1cb));return{'webhook':{'url':_0x55b023['webhookUrl'],'events':this[_0x37244d(0x1ca)](_0x55b023[_0x37244d(0x1c0)])}};}async[a43_0x5574c6(0x1d6)](_0x25437e,_0x4b7511){const _0x3f1c1e=a43_0x5574c6;await this[_0x3f1c1e(0x1d2)](_0x25437e);const _0x3303db={};_0x4b7511[_0x3f1c1e(0x1d3)]!==undefined&&(_0x3303db[_0x3f1c1e(0x1d3)]=_0x4b7511[_0x3f1c1e(0x1d3)]||null),_0x4b7511['webhookEvents']!==undefined&&(_0x3303db[_0x3f1c1e(0x1c0)]=_0x4b7511['webhookEvents']||[]),await database_1[_0x3f1c1e(0x1c3)]['shopSettings'][_0x3f1c1e(0x1d7)]({'where':{'shopId':_0x25437e},'data':_0x3303db});}async[a43_0x5574c6(0x1d2)](_0x4934fb){const _0x5bd8bc=a43_0x5574c6,_0x5284ec=await database_1[_0x5bd8bc(0x1c3)][_0x5bd8bc(0x1c9)][_0x5bd8bc(0x1cc)]({'where':{'shopId':_0x4934fb}});!_0x5284ec&&await database_1[_0x5bd8bc(0x1c3)][_0x5bd8bc(0x1c9)][_0x5bd8bc(0x1c2)]({'data':{'shopId':_0x4934fb}});}}exports['IntegrationsService']=IntegrationsService;