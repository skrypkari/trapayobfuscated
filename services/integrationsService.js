'use strict';const a72_0x3f27f4=a72_0x3c49;(function(_0x47b6ba,_0x2fb757){const _0x1a2b6e=a72_0x3c49,_0x3b08d3=_0x47b6ba();while(!![]){try{const _0x1afe07=-parseInt(_0x1a2b6e(0x1b3))/0x1*(parseInt(_0x1a2b6e(0x1bc))/0x2)+parseInt(_0x1a2b6e(0x1b6))/0x3+parseInt(_0x1a2b6e(0x1ad))/0x4+parseInt(_0x1a2b6e(0x1b7))/0x5+parseInt(_0x1a2b6e(0x1ac))/0x6+parseInt(_0x1a2b6e(0x1c1))/0x7+-parseInt(_0x1a2b6e(0x1b4))/0x8;if(_0x1afe07===_0x2fb757)break;else _0x3b08d3['push'](_0x3b08d3['shift']());}catch(_0x520926){_0x3b08d3['push'](_0x3b08d3['shift']());}}}(a72_0x3d35,0xe3d2f));var __importDefault=this&&this[a72_0x3f27f4(0x1aa)]||function(_0x1ac84a){const _0x36e5f3=a72_0x3f27f4;return _0x1ac84a&&_0x1ac84a[_0x36e5f3(0x1ba)]?_0x1ac84a:{'default':_0x1ac84a};};Object[a72_0x3f27f4(0x1c2)](exports,'__esModule',{'value':!![]}),exports[a72_0x3f27f4(0x1b5)]=void 0x0;const database_1=__importDefault(require(a72_0x3f27f4(0x1c0)));function a72_0x3c49(_0xfcc6f9,_0x5d56e7){_0xfcc6f9=_0xfcc6f9-0x1a9;const _0x3d350b=a72_0x3d35();let _0x3c498b=_0x3d350b[_0xfcc6f9];return _0x3c498b;}class IntegrationsService{[a72_0x3f27f4(0x1ae)](_0x7af18a){const _0x4a6f03=a72_0x3f27f4;if(!_0x7af18a)return[];if(Array[_0x4a6f03(0x1b0)](_0x7af18a))return _0x7af18a;if(typeof _0x7af18a===_0x4a6f03(0x1bb))try{const _0x2579c7=JSON[_0x4a6f03(0x1a9)](_0x7af18a);return Array[_0x4a6f03(0x1b0)](_0x2579c7)?_0x2579c7:[];}catch{return[];}return[];}async[a72_0x3f27f4(0x1b8)](_0x277eb7){const _0x3794ff=a72_0x3f27f4;await this[_0x3794ff(0x1b2)](_0x277eb7);const _0x3928f3=await database_1[_0x3794ff(0x1c3)][_0x3794ff(0x1af)][_0x3794ff(0x1b1)]({'where':{'shopId':_0x277eb7},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x3928f3)throw new Error(_0x3794ff(0x1bf));return{'webhook':{'url':_0x3928f3[_0x3794ff(0x1bd)],'events':this[_0x3794ff(0x1ae)](_0x3928f3['webhookEvents'])}};}async['updateWebhookSettings'](_0x980a68,_0x41d6e3){const _0x370486=a72_0x3f27f4;await this['ensureSettingsExist'](_0x980a68);const _0x16ec8b={};_0x41d6e3[_0x370486(0x1bd)]!==undefined&&(_0x16ec8b[_0x370486(0x1bd)]=_0x41d6e3['webhookUrl']||null),_0x41d6e3[_0x370486(0x1b9)]!==undefined&&(_0x16ec8b[_0x370486(0x1b9)]=_0x41d6e3[_0x370486(0x1b9)]||[]),await database_1[_0x370486(0x1c3)][_0x370486(0x1af)][_0x370486(0x1ab)]({'where':{'shopId':_0x980a68},'data':_0x16ec8b});}async[a72_0x3f27f4(0x1b2)](_0x1053c7){const _0x173c40=a72_0x3f27f4,_0xba5b0e=await database_1['default'][_0x173c40(0x1af)][_0x173c40(0x1b1)]({'where':{'shopId':_0x1053c7}});!_0xba5b0e&&await database_1[_0x173c40(0x1c3)]['shopSettings'][_0x173c40(0x1be)]({'data':{'shopId':_0x1053c7}});}}function a72_0x3d35(){const _0x3affeb=['26694WhisDW','webhookUrl','create','Shop\x20settings\x20not\x20found','../config/database','3096275pXNJoz','defineProperty','default','parse','__importDefault','update','10610808nVgYqM','5863728HfhtCg','parseWebhookEvents','shopSettings','isArray','findUnique','ensureSettingsExist','33PSgHgU','33144848bEkPRi','IntegrationsService','1426785PmRXAJ','6822020toxppK','getIntegrations','webhookEvents','__esModule','string'];a72_0x3d35=function(){return _0x3affeb;};return a72_0x3d35();}exports['IntegrationsService']=IntegrationsService;