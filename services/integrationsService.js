'use strict';const a70_0x456c60=a70_0x5475;(function(_0x45b6cb,_0x433513){const _0x2fc843=a70_0x5475,_0x433799=_0x45b6cb();while(!![]){try{const _0x439564=-parseInt(_0x2fc843(0x19e))/0x1*(-parseInt(_0x2fc843(0x1ad))/0x2)+parseInt(_0x2fc843(0x1a1))/0x3*(parseInt(_0x2fc843(0x1ac))/0x4)+-parseInt(_0x2fc843(0x1af))/0x5+parseInt(_0x2fc843(0x199))/0x6+-parseInt(_0x2fc843(0x1a5))/0x7+parseInt(_0x2fc843(0x1a3))/0x8+parseInt(_0x2fc843(0x1a6))/0x9;if(_0x439564===_0x433513)break;else _0x433799['push'](_0x433799['shift']());}catch(_0xeddf13){_0x433799['push'](_0x433799['shift']());}}}(a70_0x5027,0xd25a5));function a70_0x5475(_0x3eac5e,_0x5c14c7){_0x3eac5e=_0x3eac5e-0x199;const _0x50278a=a70_0x5027();let _0x5475a3=_0x50278a[_0x3eac5e];return _0x5475a3;}var __importDefault=this&&this['__importDefault']||function(_0x4a854c){const _0x46e9b4=a70_0x5475;return _0x4a854c&&_0x4a854c[_0x46e9b4(0x1b1)]?_0x4a854c:{'default':_0x4a854c};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['IntegrationsService']=void 0x0;function a70_0x5027(){const _0x1d1ee2=['5277ededDp','webhookUrl','4030936eGotPP','Shop\x20settings\x20not\x20found','7076839lqEjNm','721224XZcMcI','create','parseWebhookEvents','getIntegrations','isArray','string','816MbVmiq','1014350sZLgAj','ensureSettingsExist','3114010wOsCro','webhookEvents','__esModule','findUnique','186120rqXjzi','shopSettings','updateWebhookSettings','default','IntegrationsService','3zIwqcC','update','../config/database'];a70_0x5027=function(){return _0x1d1ee2;};return a70_0x5027();}const database_1=__importDefault(require(a70_0x456c60(0x1a0)));class IntegrationsService{['parseWebhookEvents'](_0x44e62a){const _0x21e024=a70_0x456c60;if(!_0x44e62a)return[];if(Array[_0x21e024(0x1aa)](_0x44e62a))return _0x44e62a;if(typeof _0x44e62a===_0x21e024(0x1ab))try{const _0x15b0be=JSON['parse'](_0x44e62a);return Array[_0x21e024(0x1aa)](_0x15b0be)?_0x15b0be:[];}catch{return[];}return[];}async[a70_0x456c60(0x1a9)](_0x3a940f){const _0x400918=a70_0x456c60;await this[_0x400918(0x1ae)](_0x3a940f);const _0xfc9ba2=await database_1['default'][_0x400918(0x19a)]['findUnique']({'where':{'shopId':_0x3a940f},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0xfc9ba2)throw new Error(_0x400918(0x1a4));return{'webhook':{'url':_0xfc9ba2[_0x400918(0x1a2)],'events':this[_0x400918(0x1a8)](_0xfc9ba2[_0x400918(0x1b0)])}};}async[a70_0x456c60(0x19b)](_0x3b53b3,_0x16cc01){const _0xa0f3ec=a70_0x456c60;await this['ensureSettingsExist'](_0x3b53b3);const _0x409033={};_0x16cc01[_0xa0f3ec(0x1a2)]!==undefined&&(_0x409033['webhookUrl']=_0x16cc01[_0xa0f3ec(0x1a2)]||null),_0x16cc01[_0xa0f3ec(0x1b0)]!==undefined&&(_0x409033['webhookEvents']=_0x16cc01['webhookEvents']||[]),await database_1[_0xa0f3ec(0x19c)][_0xa0f3ec(0x19a)][_0xa0f3ec(0x19f)]({'where':{'shopId':_0x3b53b3},'data':_0x409033});}async[a70_0x456c60(0x1ae)](_0x4a347a){const _0x1b51a=a70_0x456c60,_0x38bec4=await database_1['default'][_0x1b51a(0x19a)][_0x1b51a(0x1b2)]({'where':{'shopId':_0x4a347a}});!_0x38bec4&&await database_1[_0x1b51a(0x19c)][_0x1b51a(0x19a)][_0x1b51a(0x1a7)]({'data':{'shopId':_0x4a347a}});}}exports[a70_0x456c60(0x19d)]=IntegrationsService;