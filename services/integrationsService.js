'use strict';const a66_0x5dc7d0=a66_0x31c1;(function(_0x15262e,_0x35af53){const _0x5d8422=a66_0x31c1,_0xbf2cdb=_0x15262e();while(!![]){try{const _0xc9ff5e=parseInt(_0x5d8422(0x203))/0x1+-parseInt(_0x5d8422(0x202))/0x2+-parseInt(_0x5d8422(0x1f3))/0x3*(parseInt(_0x5d8422(0x1f9))/0x4)+parseInt(_0x5d8422(0x20a))/0x5+parseInt(_0x5d8422(0x1f6))/0x6*(-parseInt(_0x5d8422(0x1f5))/0x7)+-parseInt(_0x5d8422(0x1f7))/0x8*(parseInt(_0x5d8422(0x205))/0x9)+parseInt(_0x5d8422(0x1fb))/0xa;if(_0xc9ff5e===_0x35af53)break;else _0xbf2cdb['push'](_0xbf2cdb['shift']());}catch(_0x115df3){_0xbf2cdb['push'](_0xbf2cdb['shift']());}}}(a66_0xfd95,0xc68ad));var __importDefault=this&&this['__importDefault']||function(_0xd90b){const _0xd21c97=a66_0x31c1;return _0xd90b&&_0xd90b[_0xd21c97(0x1f2)]?_0xd90b:{'default':_0xd90b};};Object[a66_0x5dc7d0(0x1f8)](exports,a66_0x5dc7d0(0x1f2),{'value':!![]}),exports[a66_0x5dc7d0(0x1fe)]=void 0x0;const database_1=__importDefault(require('../config/database'));function a66_0x31c1(_0xd04ac7,_0x6aaf4a){_0xd04ac7=_0xd04ac7-0x1f1;const _0xfd9542=a66_0xfd95();let _0x31c183=_0xfd9542[_0xd04ac7];return _0x31c183;}class IntegrationsService{['parseWebhookEvents'](_0x4c3b52){const _0x565229=a66_0x5dc7d0;if(!_0x4c3b52)return[];if(Array[_0x565229(0x200)](_0x4c3b52))return _0x4c3b52;if(typeof _0x4c3b52===_0x565229(0x208))try{const _0x2e3ba4=JSON[_0x565229(0x206)](_0x4c3b52);return Array[_0x565229(0x200)](_0x2e3ba4)?_0x2e3ba4:[];}catch{return[];}return[];}async[a66_0x5dc7d0(0x1f4)](_0x8e3825){const _0x28257e=a66_0x5dc7d0;await this[_0x28257e(0x20b)](_0x8e3825);const _0x272c38=await database_1[_0x28257e(0x201)][_0x28257e(0x207)]['findUnique']({'where':{'shopId':_0x8e3825},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x272c38)throw new Error(_0x28257e(0x1f1));return{'webhook':{'url':_0x272c38['webhookUrl'],'events':this[_0x28257e(0x209)](_0x272c38[_0x28257e(0x204)])}};}async[a66_0x5dc7d0(0x1fc)](_0x25af6d,_0x2894a5){const _0x2e9c41=a66_0x5dc7d0;await this[_0x2e9c41(0x20b)](_0x25af6d);const _0x3d8cf1={};_0x2894a5[_0x2e9c41(0x1fa)]!==undefined&&(_0x3d8cf1[_0x2e9c41(0x1fa)]=_0x2894a5[_0x2e9c41(0x1fa)]||null),_0x2894a5['webhookEvents']!==undefined&&(_0x3d8cf1[_0x2e9c41(0x204)]=_0x2894a5[_0x2e9c41(0x204)]||[]),await database_1[_0x2e9c41(0x201)][_0x2e9c41(0x207)][_0x2e9c41(0x1ff)]({'where':{'shopId':_0x25af6d},'data':_0x3d8cf1});}async[a66_0x5dc7d0(0x20b)](_0x478122){const _0x4ff154=a66_0x5dc7d0,_0x3eb4b5=await database_1[_0x4ff154(0x201)][_0x4ff154(0x207)][_0x4ff154(0x1fd)]({'where':{'shopId':_0x478122}});!_0x3eb4b5&&await database_1[_0x4ff154(0x201)]['shopSettings']['create']({'data':{'shopId':_0x478122}});}}function a66_0xfd95(){const _0x98bdb3=['__esModule','56439gNLpdp','getIntegrations','5949545mupnHO','6VegPsx','136NZNjEo','defineProperty','124fcHbhC','webhookUrl','30713500zbPHQB','updateWebhookSettings','findUnique','IntegrationsService','update','isArray','default','2528990KPsJew','447784BUZHdT','webhookEvents','773271XfUral','parse','shopSettings','string','parseWebhookEvents','7261755gzqaKd','ensureSettingsExist','Shop\x20settings\x20not\x20found'];a66_0xfd95=function(){return _0x98bdb3;};return a66_0xfd95();}exports[a66_0x5dc7d0(0x1fe)]=IntegrationsService;