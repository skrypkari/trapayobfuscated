'use strict';function a43_0x3e0c(_0x58efab,_0x204945){const _0x1a0109=a43_0x1a01();return a43_0x3e0c=function(_0x3e0cc7,_0x478192){_0x3e0cc7=_0x3e0cc7-0xbc;let _0x467471=_0x1a0109[_0x3e0cc7];return _0x467471;},a43_0x3e0c(_0x58efab,_0x204945);}const a43_0x2da292=a43_0x3e0c;(function(_0x561e8c,_0x385953){const _0xa63ada=a43_0x3e0c,_0xa3cc2b=_0x561e8c();while(!![]){try{const _0x4e8687=parseInt(_0xa63ada(0xc0))/0x1*(parseInt(_0xa63ada(0xc5))/0x2)+-parseInt(_0xa63ada(0xcf))/0x3*(-parseInt(_0xa63ada(0xc8))/0x4)+-parseInt(_0xa63ada(0xc6))/0x5*(parseInt(_0xa63ada(0xd3))/0x6)+parseInt(_0xa63ada(0xc2))/0x7+-parseInt(_0xa63ada(0xd0))/0x8*(parseInt(_0xa63ada(0xcd))/0x9)+parseInt(_0xa63ada(0xcc))/0xa+-parseInt(_0xa63ada(0xc3))/0xb;if(_0x4e8687===_0x385953)break;else _0xa3cc2b['push'](_0xa3cc2b['shift']());}catch(_0x5559f4){_0xa3cc2b['push'](_0xa3cc2b['shift']());}}}(a43_0x1a01,0xb6142));function a43_0x1a01(){const _0x276d5c=['ensureSettingsExist','5569986cdRsjC','updateWebhookSettings','update','../config/database','default','findUnique','string','webhookUrl','84054HrSNxq','Shop\x20settings\x20not\x20found','9285570NPqbQN','18870511DUHaGd','IntegrationsService','26xovdih','5hUAjPb','defineProperty','850316rlLtis','parseWebhookEvents','webhookEvents','getIntegrations','14415350ZSNOxX','9ecIdpY','__esModule','6DzdwxZ','7170232UsOzFu','__importDefault'];a43_0x1a01=function(){return _0x276d5c;};return a43_0x1a01();}var __importDefault=this&&this[a43_0x2da292(0xd1)]||function(_0x11df88){const _0x35743e=a43_0x2da292;return _0x11df88&&_0x11df88[_0x35743e(0xce)]?_0x11df88:{'default':_0x11df88};};Object[a43_0x2da292(0xc7)](exports,'__esModule',{'value':!![]}),exports[a43_0x2da292(0xc4)]=void 0x0;const database_1=__importDefault(require(a43_0x2da292(0xd6)));class IntegrationsService{[a43_0x2da292(0xc9)](_0x258b74){const _0xc80a43=a43_0x2da292;if(!_0x258b74)return[];if(Array['isArray'](_0x258b74))return _0x258b74;if(typeof _0x258b74===_0xc80a43(0xbe))try{const _0x19c225=JSON['parse'](_0x258b74);return Array['isArray'](_0x19c225)?_0x19c225:[];}catch{return[];}return[];}async[a43_0x2da292(0xcb)](_0x2fef7c){const _0x141719=a43_0x2da292;await this['ensureSettingsExist'](_0x2fef7c);const _0x4f5015=await database_1[_0x141719(0xbc)]['shopSettings']['findUnique']({'where':{'shopId':_0x2fef7c},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x4f5015)throw new Error(_0x141719(0xc1));return{'webhook':{'url':_0x4f5015[_0x141719(0xbf)],'events':this['parseWebhookEvents'](_0x4f5015['webhookEvents'])}};}async[a43_0x2da292(0xd4)](_0x21f01a,_0x227834){const _0x2791f8=a43_0x2da292;await this[_0x2791f8(0xd2)](_0x21f01a);const _0x9e1b6f={};_0x227834['webhookUrl']!==undefined&&(_0x9e1b6f[_0x2791f8(0xbf)]=_0x227834['webhookUrl']||null),_0x227834[_0x2791f8(0xca)]!==undefined&&(_0x9e1b6f[_0x2791f8(0xca)]=_0x227834[_0x2791f8(0xca)]||[]),await database_1[_0x2791f8(0xbc)]['shopSettings'][_0x2791f8(0xd5)]({'where':{'shopId':_0x21f01a},'data':_0x9e1b6f});}async[a43_0x2da292(0xd2)](_0x127e1b){const _0x12e49a=a43_0x2da292,_0x37d2fa=await database_1[_0x12e49a(0xbc)]['shopSettings'][_0x12e49a(0xbd)]({'where':{'shopId':_0x127e1b}});!_0x37d2fa&&await database_1[_0x12e49a(0xbc)]['shopSettings']['create']({'data':{'shopId':_0x127e1b}});}}exports[a43_0x2da292(0xc4)]=IntegrationsService;