'use strict';function a58_0x7d10(){const _0x3d2631=['22ENCDfQ','Shop\x20settings\x20not\x20found','700sPHVkR','webhookUrl','update','310854ApROPZ','5bEJebw','shopSettings','create','default','11mtgNPb','../config/database','3RHKZtV','updateWebhookSettings','ensureSettingsExist','10mUvLhz','__esModule','2494953gesDEf','parseWebhookEvents','19683339jKorPh','findUnique','IntegrationsService','3989156WwgDVq','2608920urolLt','isArray','5960PljoDg','97595NXVFXm','defineProperty','webhookEvents','__importDefault'];a58_0x7d10=function(){return _0x3d2631;};return a58_0x7d10();}const a58_0x20a407=a58_0xa305;(function(_0x34d542,_0x2330d7){const _0x107aca=a58_0xa305,_0x557152=_0x34d542();while(!![]){try{const _0x4dc17e=parseInt(_0x107aca(0x1b1))/0x1*(parseInt(_0x107aca(0x1b5))/0x2)+parseInt(_0x107aca(0x1c1))/0x3*(parseInt(_0x107aca(0x1cb))/0x4)+parseInt(_0x107aca(0x1bb))/0x5*(parseInt(_0x107aca(0x1ba))/0x6)+parseInt(_0x107aca(0x1b7))/0x7*(parseInt(_0x107aca(0x1b0))/0x8)+parseInt(_0x107aca(0x1c6))/0x9*(-parseInt(_0x107aca(0x1c4))/0xa)+parseInt(_0x107aca(0x1bf))/0xb*(parseInt(_0x107aca(0x1cc))/0xc)+-parseInt(_0x107aca(0x1c8))/0xd;if(_0x4dc17e===_0x2330d7)break;else _0x557152['push'](_0x557152['shift']());}catch(_0x5bf0e1){_0x557152['push'](_0x557152['shift']());}}}(a58_0x7d10,0x98281));function a58_0xa305(_0x30102c,_0x3f5ef1){const _0x7d1054=a58_0x7d10();return a58_0xa305=function(_0xa30509,_0x11723c){_0xa30509=_0xa30509-0x1b0;let _0x1268ec=_0x7d1054[_0xa30509];return _0x1268ec;},a58_0xa305(_0x30102c,_0x3f5ef1);}var __importDefault=this&&this[a58_0x20a407(0x1b4)]||function(_0x475b04){const _0x5819c4=a58_0x20a407;return _0x475b04&&_0x475b04[_0x5819c4(0x1c5)]?_0x475b04:{'default':_0x475b04};};Object[a58_0x20a407(0x1b2)](exports,'__esModule',{'value':!![]}),exports[a58_0x20a407(0x1ca)]=void 0x0;const database_1=__importDefault(require(a58_0x20a407(0x1c0)));class IntegrationsService{[a58_0x20a407(0x1c7)](_0x415200){const _0x2f1033=a58_0x20a407;if(!_0x415200)return[];if(Array['isArray'](_0x415200))return _0x415200;if(typeof _0x415200==='string')try{const _0xbc0994=JSON['parse'](_0x415200);return Array[_0x2f1033(0x1cd)](_0xbc0994)?_0xbc0994:[];}catch{return[];}return[];}async['getIntegrations'](_0x33ffa4){const _0xcc73ad=a58_0x20a407;await this[_0xcc73ad(0x1c3)](_0x33ffa4);const _0x7d4dac=await database_1[_0xcc73ad(0x1be)][_0xcc73ad(0x1bc)][_0xcc73ad(0x1c9)]({'where':{'shopId':_0x33ffa4},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x7d4dac)throw new Error(_0xcc73ad(0x1b6));return{'webhook':{'url':_0x7d4dac['webhookUrl'],'events':this[_0xcc73ad(0x1c7)](_0x7d4dac[_0xcc73ad(0x1b3)])}};}async[a58_0x20a407(0x1c2)](_0x268c81,_0x1209f9){const _0x4a1e91=a58_0x20a407;await this['ensureSettingsExist'](_0x268c81);const _0x5311a4={};_0x1209f9[_0x4a1e91(0x1b8)]!==undefined&&(_0x5311a4[_0x4a1e91(0x1b8)]=_0x1209f9[_0x4a1e91(0x1b8)]||null),_0x1209f9[_0x4a1e91(0x1b3)]!==undefined&&(_0x5311a4['webhookEvents']=_0x1209f9[_0x4a1e91(0x1b3)]||[]),await database_1[_0x4a1e91(0x1be)]['shopSettings'][_0x4a1e91(0x1b9)]({'where':{'shopId':_0x268c81},'data':_0x5311a4});}async[a58_0x20a407(0x1c3)](_0x334426){const _0x10e660=a58_0x20a407,_0x40f316=await database_1[_0x10e660(0x1be)]['shopSettings'][_0x10e660(0x1c9)]({'where':{'shopId':_0x334426}});!_0x40f316&&await database_1[_0x10e660(0x1be)][_0x10e660(0x1bc)][_0x10e660(0x1bd)]({'data':{'shopId':_0x334426}});}}exports['IntegrationsService']=IntegrationsService;