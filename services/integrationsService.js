'use strict';const a48_0x1cf9f0=a48_0x1588;(function(_0x8f2c16,_0x43402a){const _0x4cf002=a48_0x1588,_0x56463e=_0x8f2c16();while(!![]){try{const _0x16c9e1=parseInt(_0x4cf002(0x10d))/0x1*(parseInt(_0x4cf002(0x114))/0x2)+-parseInt(_0x4cf002(0x10c))/0x3*(parseInt(_0x4cf002(0x110))/0x4)+-parseInt(_0x4cf002(0x115))/0x5*(-parseInt(_0x4cf002(0x10a))/0x6)+-parseInt(_0x4cf002(0x103))/0x7*(parseInt(_0x4cf002(0x112))/0x8)+parseInt(_0x4cf002(0x108))/0x9+-parseInt(_0x4cf002(0x101))/0xa+-parseInt(_0x4cf002(0xff))/0xb*(parseInt(_0x4cf002(0x100))/0xc);if(_0x16c9e1===_0x43402a)break;else _0x56463e['push'](_0x56463e['shift']());}catch(_0x3a5137){_0x56463e['push'](_0x56463e['shift']());}}}(a48_0x37b7,0x7067f));var __importDefault=this&&this['__importDefault']||function(_0x84d472){const _0xd4f5ed=a48_0x1588;return _0x84d472&&_0x84d472[_0xd4f5ed(0x105)]?_0x84d472:{'default':_0x84d472};};function a48_0x37b7(){const _0x30ae5d=['23567UjPWbA','updateWebhookSettings','defineProperty','4fuoOEf','string','490640OzURIk','shopSettings','46FPpIlV','980KfYefl','Shop\x20settings\x20not\x20found','ensureSettingsExist','create','getIntegrations','parse','webhookEvents','27346Fkgpap','348NOxgQR','6642760QGMvno','../config/database','7fOAOqQ','default','__esModule','findUnique','IntegrationsService','8182251KgMlpW','webhookUrl','822OnJprQ','parseWebhookEvents','659751FewmiN'];a48_0x37b7=function(){return _0x30ae5d;};return a48_0x37b7();}Object[a48_0x1cf9f0(0x10f)](exports,'__esModule',{'value':!![]}),exports[a48_0x1cf9f0(0x107)]=void 0x0;const database_1=__importDefault(require(a48_0x1cf9f0(0x102)));function a48_0x1588(_0x1a08a3,_0x4c1516){const _0x37b72d=a48_0x37b7();return a48_0x1588=function(_0x1588fb,_0x59f787){_0x1588fb=_0x1588fb-0xfa;let _0x212211=_0x37b72d[_0x1588fb];return _0x212211;},a48_0x1588(_0x1a08a3,_0x4c1516);}class IntegrationsService{[a48_0x1cf9f0(0x10b)](_0x4c73c3){const _0x33827a=a48_0x1cf9f0;if(!_0x4c73c3)return[];if(Array['isArray'](_0x4c73c3))return _0x4c73c3;if(typeof _0x4c73c3===_0x33827a(0x111))try{const _0x3f084d=JSON[_0x33827a(0xfd)](_0x4c73c3);return Array['isArray'](_0x3f084d)?_0x3f084d:[];}catch{return[];}return[];}async[a48_0x1cf9f0(0xfc)](_0x4fa8ba){const _0x3e4284=a48_0x1cf9f0;await this[_0x3e4284(0xfa)](_0x4fa8ba);const _0x57d7ec=await database_1[_0x3e4284(0x104)]['shopSettings'][_0x3e4284(0x106)]({'where':{'shopId':_0x4fa8ba},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x57d7ec)throw new Error(_0x3e4284(0x116));return{'webhook':{'url':_0x57d7ec[_0x3e4284(0x109)],'events':this['parseWebhookEvents'](_0x57d7ec['webhookEvents'])}};}async[a48_0x1cf9f0(0x10e)](_0x1dbf06,_0x18e306){const _0x1ca1a8=a48_0x1cf9f0;await this[_0x1ca1a8(0xfa)](_0x1dbf06);const _0x262f40={};_0x18e306[_0x1ca1a8(0x109)]!==undefined&&(_0x262f40[_0x1ca1a8(0x109)]=_0x18e306[_0x1ca1a8(0x109)]||null),_0x18e306['webhookEvents']!==undefined&&(_0x262f40[_0x1ca1a8(0xfe)]=_0x18e306[_0x1ca1a8(0xfe)]||[]),await database_1[_0x1ca1a8(0x104)][_0x1ca1a8(0x113)]['update']({'where':{'shopId':_0x1dbf06},'data':_0x262f40});}async[a48_0x1cf9f0(0xfa)](_0xe69645){const _0x2bf0ac=a48_0x1cf9f0,_0x577194=await database_1['default']['shopSettings'][_0x2bf0ac(0x106)]({'where':{'shopId':_0xe69645}});!_0x577194&&await database_1[_0x2bf0ac(0x104)]['shopSettings'][_0x2bf0ac(0xfb)]({'data':{'shopId':_0xe69645}});}}exports[a48_0x1cf9f0(0x107)]=IntegrationsService;