'use strict';const a48_0x136a9a=a48_0x1fc4;function a48_0xfc0c(){const _0x3357fe=['updateWebhookSettings','__esModule','default','Shop\x20settings\x20not\x20found','8246619hGSjbM','webhookUrl','defineProperty','ensureSettingsExist','update','isArray','3076374fspZIz','create','206701wzXKoo','4264491lJUnUB','parse','getIntegrations','5gWAKLL','IntegrationsService','4815642PUcCZX','webhookEvents','parseWebhookEvents','8dtlEBd','shopSettings','506674KTUNyk','../config/database','__importDefault','findUnique','1863084LmjnHr'];a48_0xfc0c=function(){return _0x3357fe;};return a48_0xfc0c();}(function(_0x4a43e8,_0x28f830){const _0x19a5da=a48_0x1fc4,_0x58f984=_0x4a43e8();while(!![]){try{const _0x3df3c7=-parseInt(_0x19a5da(0x122))/0x1+-parseInt(_0x19a5da(0x111))/0x2+parseInt(_0x19a5da(0x120))/0x3+parseInt(_0x19a5da(0x115))/0x4+parseInt(_0x19a5da(0x126))/0x5*(-parseInt(_0x19a5da(0x10c))/0x6)+-parseInt(_0x19a5da(0x123))/0x7+parseInt(_0x19a5da(0x10f))/0x8*(parseInt(_0x19a5da(0x11a))/0x9);if(_0x3df3c7===_0x28f830)break;else _0x58f984['push'](_0x58f984['shift']());}catch(_0x5ccdb1){_0x58f984['push'](_0x58f984['shift']());}}}(a48_0xfc0c,0x82c6e));var __importDefault=this&&this[a48_0x136a9a(0x113)]||function(_0x3316f1){const _0x3416bf=a48_0x136a9a;return _0x3316f1&&_0x3316f1[_0x3416bf(0x117)]?_0x3316f1:{'default':_0x3316f1};};Object[a48_0x136a9a(0x11c)](exports,a48_0x136a9a(0x117),{'value':!![]}),exports[a48_0x136a9a(0x127)]=void 0x0;const database_1=__importDefault(require(a48_0x136a9a(0x112)));class IntegrationsService{[a48_0x136a9a(0x10e)](_0x1ccf58){const _0x2f3c25=a48_0x136a9a;if(!_0x1ccf58)return[];if(Array[_0x2f3c25(0x11f)](_0x1ccf58))return _0x1ccf58;if(typeof _0x1ccf58==='string')try{const _0x43c26c=JSON[_0x2f3c25(0x124)](_0x1ccf58);return Array[_0x2f3c25(0x11f)](_0x43c26c)?_0x43c26c:[];}catch{return[];}return[];}async[a48_0x136a9a(0x125)](_0x33ef5b){const _0x130001=a48_0x136a9a;await this['ensureSettingsExist'](_0x33ef5b);const _0x4a364c=await database_1[_0x130001(0x118)]['shopSettings'][_0x130001(0x114)]({'where':{'shopId':_0x33ef5b},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x4a364c)throw new Error(_0x130001(0x119));return{'webhook':{'url':_0x4a364c[_0x130001(0x11b)],'events':this[_0x130001(0x10e)](_0x4a364c[_0x130001(0x10d)])}};}async[a48_0x136a9a(0x116)](_0x4bccb,_0x416d36){const _0x585da6=a48_0x136a9a;await this[_0x585da6(0x11d)](_0x4bccb);const _0x412cdd={};_0x416d36[_0x585da6(0x11b)]!==undefined&&(_0x412cdd[_0x585da6(0x11b)]=_0x416d36['webhookUrl']||null),_0x416d36[_0x585da6(0x10d)]!==undefined&&(_0x412cdd[_0x585da6(0x10d)]=_0x416d36[_0x585da6(0x10d)]||[]),await database_1[_0x585da6(0x118)]['shopSettings'][_0x585da6(0x11e)]({'where':{'shopId':_0x4bccb},'data':_0x412cdd});}async[a48_0x136a9a(0x11d)](_0x4f38e5){const _0x5db2c7=a48_0x136a9a,_0x50a49d=await database_1[_0x5db2c7(0x118)][_0x5db2c7(0x110)][_0x5db2c7(0x114)]({'where':{'shopId':_0x4f38e5}});!_0x50a49d&&await database_1[_0x5db2c7(0x118)][_0x5db2c7(0x110)][_0x5db2c7(0x121)]({'data':{'shopId':_0x4f38e5}});}}function a48_0x1fc4(_0x2e6ee4,_0x140cb2){const _0xfc0ce3=a48_0xfc0c();return a48_0x1fc4=function(_0x1fc4a2,_0x9da637){_0x1fc4a2=_0x1fc4a2-0x10c;let _0x4b69d6=_0xfc0ce3[_0x1fc4a2];return _0x4b69d6;},a48_0x1fc4(_0x2e6ee4,_0x140cb2);}exports[a48_0x136a9a(0x127)]=IntegrationsService;