'use strict';const a78_0x696191=a78_0x1f4a;(function(_0x2f6ef5,_0x24e963){const _0x33284d=a78_0x1f4a,_0x4180d4=_0x2f6ef5();while(!![]){try{const _0x510cae=-parseInt(_0x33284d(0x85))/0x1+-parseInt(_0x33284d(0x82))/0x2*(-parseInt(_0x33284d(0x71))/0x3)+parseInt(_0x33284d(0x79))/0x4+-parseInt(_0x33284d(0x84))/0x5*(-parseInt(_0x33284d(0x74))/0x6)+parseInt(_0x33284d(0x86))/0x7*(parseInt(_0x33284d(0x7c))/0x8)+parseInt(_0x33284d(0x6e))/0x9*(parseInt(_0x33284d(0x76))/0xa)+-parseInt(_0x33284d(0x89))/0xb*(parseInt(_0x33284d(0x78))/0xc);if(_0x510cae===_0x24e963)break;else _0x4180d4['push'](_0x4180d4['shift']());}catch(_0x2709c7){_0x4180d4['push'](_0x4180d4['shift']());}}}(a78_0x2cd2,0x1e8d1));var __importDefault=this&&this[a78_0x696191(0x83)]||function(_0xe756e8){const _0xbde5a1=a78_0x696191;return _0xe756e8&&_0xe756e8[_0xbde5a1(0x88)]?_0xe756e8:{'default':_0xe756e8};};function a78_0x1f4a(_0x13bf91,_0x5f1932){_0x13bf91=_0x13bf91-0x6d;const _0x2cd217=a78_0x2cd2();let _0x1f4a27=_0x2cd217[_0x13bf91];return _0x1f4a27;}Object[a78_0x696191(0x8a)](exports,a78_0x696191(0x88),{'value':!![]}),exports[a78_0x696191(0x6f)]=void 0x0;const database_1=__importDefault(require(a78_0x696191(0x73)));class IntegrationsService{[a78_0x696191(0x81)](_0x4533f7){const _0xef4267=a78_0x696191;if(!_0x4533f7)return[];if(Array[_0xef4267(0x7e)](_0x4533f7))return _0x4533f7;if(typeof _0x4533f7===_0xef4267(0x7d))try{const _0x5ac18a=JSON[_0xef4267(0x70)](_0x4533f7);return Array[_0xef4267(0x7e)](_0x5ac18a)?_0x5ac18a:[];}catch{return[];}return[];}async[a78_0x696191(0x87)](_0x3a596c){const _0x51d86f=a78_0x696191;await this[_0x51d86f(0x7a)](_0x3a596c);const _0x270036=await database_1[_0x51d86f(0x72)][_0x51d86f(0x7b)]['findUnique']({'where':{'shopId':_0x3a596c},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x270036)throw new Error(_0x51d86f(0x80));return{'webhook':{'url':_0x270036[_0x51d86f(0x77)],'events':this[_0x51d86f(0x81)](_0x270036[_0x51d86f(0x75)])}};}async[a78_0x696191(0x8c)](_0x289f1b,_0x5427b1){const _0x4273ae=a78_0x696191;await this[_0x4273ae(0x7a)](_0x289f1b);const _0xc453f0={};_0x5427b1[_0x4273ae(0x77)]!==undefined&&(_0xc453f0['webhookUrl']=_0x5427b1[_0x4273ae(0x77)]||null),_0x5427b1['webhookEvents']!==undefined&&(_0xc453f0[_0x4273ae(0x75)]=_0x5427b1['webhookEvents']||[]),await database_1[_0x4273ae(0x72)]['shopSettings'][_0x4273ae(0x8b)]({'where':{'shopId':_0x289f1b},'data':_0xc453f0});}async['ensureSettingsExist'](_0x8756d6){const _0x2a754d=a78_0x696191,_0x2fdd50=await database_1[_0x2a754d(0x72)][_0x2a754d(0x7b)][_0x2a754d(0x6d)]({'where':{'shopId':_0x8756d6}});!_0x2fdd50&&await database_1['default'][_0x2a754d(0x7b)][_0x2a754d(0x7f)]({'data':{'shopId':_0x8756d6}});}}exports[a78_0x696191(0x6f)]=IntegrationsService;function a78_0x2cd2(){const _0x3d853c=['update','updateWebhookSettings','findUnique','95481ZFCAlk','IntegrationsService','parse','1842qlNnEJ','default','../config/database','96xTBpFd','webhookEvents','140AfzPFh','webhookUrl','1043724OtUKPN','962292kLaTCr','ensureSettingsExist','shopSettings','669056KearXF','string','isArray','create','Shop\x20settings\x20not\x20found','parseWebhookEvents','220UMIPyo','__importDefault','66590CUXSUM','106360MberrY','7LsNjwy','getIntegrations','__esModule','66Qmzayd','defineProperty'];a78_0x2cd2=function(){return _0x3d853c;};return a78_0x2cd2();}