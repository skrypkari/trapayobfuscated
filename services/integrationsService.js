'use strict';const a78_0x551f8e=a78_0x5e16;function a78_0x1df1(){const _0x2e4818=['parse','webhookUrl','../config/database','ensureSettingsExist','findUnique','IntegrationsService','10LvywMe','4cAEdrE','6EBqDXY','5014445NeClBJ','webhookEvents','94567EFmRrG','1455896nGkhSD','984clFSYA','isArray','__esModule','parseWebhookEvents','shopSettings','12864rMCPbK','defineProperty','941420wmTdMW','703899FZVgLI','updateWebhookSettings','422559mGnBUw','2uXhYtB','__importDefault','string','default','721wGKGJM','Shop\x20settings\x20not\x20found','getIntegrations'];a78_0x1df1=function(){return _0x2e4818;};return a78_0x1df1();}function a78_0x5e16(_0x278ee4,_0x2cfdda){_0x278ee4=_0x278ee4-0x1db;const _0x1df16c=a78_0x1df1();let _0x5e162d=_0x1df16c[_0x278ee4];return _0x5e162d;}(function(_0xfa4a8d,_0x5a75d7){const _0x57fb2f=a78_0x5e16,_0x4e9665=_0xfa4a8d();while(!![]){try{const _0x2cb8a7=-parseInt(_0x57fb2f(0x1f9))/0x1*(parseInt(_0x57fb2f(0x1f5))/0x2)+parseInt(_0x57fb2f(0x1f6))/0x3*(-parseInt(_0x57fb2f(0x1e8))/0x4)+parseInt(_0x57fb2f(0x1ea))/0x5*(parseInt(_0x57fb2f(0x1e9))/0x6)+-parseInt(_0x57fb2f(0x1de))/0x7*(-parseInt(_0x57fb2f(0x1f3))/0x8)+-parseInt(_0x57fb2f(0x1f8))/0x9*(-parseInt(_0x57fb2f(0x1e7))/0xa)+-parseInt(_0x57fb2f(0x1ec))/0xb*(-parseInt(_0x57fb2f(0x1ee))/0xc)+-parseInt(_0x57fb2f(0x1ed))/0xd;if(_0x2cb8a7===_0x5a75d7)break;else _0x4e9665['push'](_0x4e9665['shift']());}catch(_0x259823){_0x4e9665['push'](_0x4e9665['shift']());}}}(a78_0x1df1,0x9a635));var __importDefault=this&&this[a78_0x551f8e(0x1db)]||function(_0x1e8697){const _0x2471e1=a78_0x551f8e;return _0x1e8697&&_0x1e8697[_0x2471e1(0x1f0)]?_0x1e8697:{'default':_0x1e8697};};Object[a78_0x551f8e(0x1f4)](exports,'__esModule',{'value':!![]}),exports[a78_0x551f8e(0x1e6)]=void 0x0;const database_1=__importDefault(require(a78_0x551f8e(0x1e3)));class IntegrationsService{[a78_0x551f8e(0x1f1)](_0x440a4d){const _0x6bd99b=a78_0x551f8e;if(!_0x440a4d)return[];if(Array[_0x6bd99b(0x1ef)](_0x440a4d))return _0x440a4d;if(typeof _0x440a4d===_0x6bd99b(0x1dc))try{const _0x28408a=JSON[_0x6bd99b(0x1e1)](_0x440a4d);return Array[_0x6bd99b(0x1ef)](_0x28408a)?_0x28408a:[];}catch{return[];}return[];}async[a78_0x551f8e(0x1e0)](_0x4cb02e){const _0x4e2b92=a78_0x551f8e;await this[_0x4e2b92(0x1e4)](_0x4cb02e);const _0x47d92d=await database_1[_0x4e2b92(0x1dd)]['shopSettings'][_0x4e2b92(0x1e5)]({'where':{'shopId':_0x4cb02e},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x47d92d)throw new Error(_0x4e2b92(0x1df));return{'webhook':{'url':_0x47d92d[_0x4e2b92(0x1e2)],'events':this[_0x4e2b92(0x1f1)](_0x47d92d['webhookEvents'])}};}async[a78_0x551f8e(0x1f7)](_0x4e9a70,_0x1fd46e){const _0xe95595=a78_0x551f8e;await this[_0xe95595(0x1e4)](_0x4e9a70);const _0x802fb7={};_0x1fd46e['webhookUrl']!==undefined&&(_0x802fb7['webhookUrl']=_0x1fd46e[_0xe95595(0x1e2)]||null),_0x1fd46e[_0xe95595(0x1eb)]!==undefined&&(_0x802fb7[_0xe95595(0x1eb)]=_0x1fd46e[_0xe95595(0x1eb)]||[]),await database_1[_0xe95595(0x1dd)][_0xe95595(0x1f2)]['update']({'where':{'shopId':_0x4e9a70},'data':_0x802fb7});}async[a78_0x551f8e(0x1e4)](_0x3fe644){const _0xdef6e1=a78_0x551f8e,_0x21bb9b=await database_1['default'][_0xdef6e1(0x1f2)][_0xdef6e1(0x1e5)]({'where':{'shopId':_0x3fe644}});!_0x21bb9b&&await database_1[_0xdef6e1(0x1dd)][_0xdef6e1(0x1f2)]['create']({'data':{'shopId':_0x3fe644}});}}exports[a78_0x551f8e(0x1e6)]=IntegrationsService;