'use strict';const a50_0xd8644d=a50_0x4906;(function(_0x46d916,_0x398448){const _0x15dda7=a50_0x4906,_0x318dd4=_0x46d916();while(!![]){try{const _0x30297e=-parseInt(_0x15dda7(0xeb))/0x1+parseInt(_0x15dda7(0xf1))/0x2*(-parseInt(_0x15dda7(0xe5))/0x3)+-parseInt(_0x15dda7(0xee))/0x4+-parseInt(_0x15dda7(0xe4))/0x5+parseInt(_0x15dda7(0xec))/0x6+parseInt(_0x15dda7(0xef))/0x7*(parseInt(_0x15dda7(0xdb))/0x8)+-parseInt(_0x15dda7(0xda))/0x9*(-parseInt(_0x15dda7(0xe6))/0xa);if(_0x30297e===_0x398448)break;else _0x318dd4['push'](_0x318dd4['shift']());}catch(_0x3acaf6){_0x318dd4['push'](_0x318dd4['shift']());}}}(a50_0x42f9,0x9e56c));var __importDefault=this&&this[a50_0xd8644d(0xe1)]||function(_0x42ab23){return _0x42ab23&&_0x42ab23['__esModule']?_0x42ab23:{'default':_0x42ab23};};Object[a50_0xd8644d(0xdc)](exports,a50_0xd8644d(0xdd),{'value':!![]}),exports[a50_0xd8644d(0xed)]=void 0x0;const database_1=__importDefault(require('../config/database'));function a50_0x4906(_0x19da9d,_0x525670){const _0x42f9c4=a50_0x42f9();return a50_0x4906=function(_0x490653,_0x5f4ad5){_0x490653=_0x490653-0xda;let _0x375322=_0x42f9c4[_0x490653];return _0x375322;},a50_0x4906(_0x19da9d,_0x525670);}function a50_0x42f9(){const _0x26b45c=['868251Cijxrq','1206636byCBNl','IntegrationsService','1922468JOWWGA','683151yZhsej','findUnique','2wpdExE','updateWebhookSettings','shopSettings','string','create','12172491ENLNtY','104mdLFlG','defineProperty','__esModule','webhookUrl','update','isArray','__importDefault','parseWebhookEvents','ensureSettingsExist','5135395cipQyn','3450930mxAJep','20JbYDIF','getIntegrations','Shop\x20settings\x20not\x20found','default','webhookEvents'];a50_0x42f9=function(){return _0x26b45c;};return a50_0x42f9();}class IntegrationsService{[a50_0xd8644d(0xe2)](_0x55fb3d){const _0x2c90f4=a50_0xd8644d;if(!_0x55fb3d)return[];if(Array[_0x2c90f4(0xe0)](_0x55fb3d))return _0x55fb3d;if(typeof _0x55fb3d===_0x2c90f4(0xf4))try{const _0x532cef=JSON['parse'](_0x55fb3d);return Array[_0x2c90f4(0xe0)](_0x532cef)?_0x532cef:[];}catch{return[];}return[];}async[a50_0xd8644d(0xe7)](_0x43a48f){const _0xb1b6f6=a50_0xd8644d;await this['ensureSettingsExist'](_0x43a48f);const _0x176036=await database_1[_0xb1b6f6(0xe9)][_0xb1b6f6(0xf3)]['findUnique']({'where':{'shopId':_0x43a48f},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x176036)throw new Error(_0xb1b6f6(0xe8));return{'webhook':{'url':_0x176036['webhookUrl'],'events':this['parseWebhookEvents'](_0x176036['webhookEvents'])}};}async[a50_0xd8644d(0xf2)](_0x541b85,_0x57ab4d){const _0x3529e9=a50_0xd8644d;await this['ensureSettingsExist'](_0x541b85);const _0x2712b5={};_0x57ab4d[_0x3529e9(0xde)]!==undefined&&(_0x2712b5[_0x3529e9(0xde)]=_0x57ab4d[_0x3529e9(0xde)]||null),_0x57ab4d[_0x3529e9(0xea)]!==undefined&&(_0x2712b5['webhookEvents']=_0x57ab4d[_0x3529e9(0xea)]||[]),await database_1[_0x3529e9(0xe9)][_0x3529e9(0xf3)][_0x3529e9(0xdf)]({'where':{'shopId':_0x541b85},'data':_0x2712b5});}async[a50_0xd8644d(0xe3)](_0x3fa8af){const _0x468121=a50_0xd8644d,_0x2402fb=await database_1[_0x468121(0xe9)][_0x468121(0xf3)][_0x468121(0xf0)]({'where':{'shopId':_0x3fa8af}});!_0x2402fb&&await database_1[_0x468121(0xe9)][_0x468121(0xf3)][_0x468121(0xf5)]({'data':{'shopId':_0x3fa8af}});}}exports[a50_0xd8644d(0xed)]=IntegrationsService;