'use strict';function a48_0x45bd(_0x587b18,_0x579ac0){const _0x8ba4e7=a48_0x8ba4();return a48_0x45bd=function(_0x45bda8,_0xf90fbb){_0x45bda8=_0x45bda8-0xbd;let _0x523865=_0x8ba4e7[_0x45bda8];return _0x523865;},a48_0x45bd(_0x587b18,_0x579ac0);}const a48_0x8a68e8=a48_0x45bd;(function(_0x3e8aac,_0x2b2bde){const _0x213697=a48_0x45bd,_0x28c4df=_0x3e8aac();while(!![]){try{const _0x4f41bb=parseInt(_0x213697(0xc2))/0x1+parseInt(_0x213697(0xca))/0x2+-parseInt(_0x213697(0xcb))/0x3*(-parseInt(_0x213697(0xd2))/0x4)+-parseInt(_0x213697(0xbd))/0x5+parseInt(_0x213697(0xcf))/0x6*(-parseInt(_0x213697(0xc7))/0x7)+-parseInt(_0x213697(0xd0))/0x8+-parseInt(_0x213697(0xd8))/0x9*(-parseInt(_0x213697(0xc9))/0xa);if(_0x4f41bb===_0x2b2bde)break;else _0x28c4df['push'](_0x28c4df['shift']());}catch(_0x389d59){_0x28c4df['push'](_0x28c4df['shift']());}}}(a48_0x8ba4,0xa09f9));var __importDefault=this&&this[a48_0x8a68e8(0xd4)]||function(_0x53842e){return _0x53842e&&_0x53842e['__esModule']?_0x53842e:{'default':_0x53842e};};Object[a48_0x8a68e8(0xd5)](exports,a48_0x8a68e8(0xd1),{'value':!![]}),exports[a48_0x8a68e8(0xd6)]=void 0x0;function a48_0x8ba4(){const _0xfd805e=['getIntegrations','isArray','193676WKFRKL','default','shopSettings','ensureSettingsExist','Shop\x20settings\x20not\x20found','217crOeJT','update','11130HrRJrc','2287748wFYKCf','27cZSHaK','parseWebhookEvents','findUnique','updateWebhookSettings','249708BqelsD','5447440WgNKDa','__esModule','402564TFtHtz','webhookEvents','__importDefault','defineProperty','IntegrationsService','webhookUrl','8082scFksN','3068960ynvFtg','string','parse'];a48_0x8ba4=function(){return _0xfd805e;};return a48_0x8ba4();}const database_1=__importDefault(require('../config/database'));class IntegrationsService{[a48_0x8a68e8(0xcc)](_0x5b99e8){const _0x3baad4=a48_0x8a68e8;if(!_0x5b99e8)return[];if(Array[_0x3baad4(0xc1)](_0x5b99e8))return _0x5b99e8;if(typeof _0x5b99e8===_0x3baad4(0xbe))try{const _0x3cb462=JSON[_0x3baad4(0xbf)](_0x5b99e8);return Array[_0x3baad4(0xc1)](_0x3cb462)?_0x3cb462:[];}catch{return[];}return[];}async[a48_0x8a68e8(0xc0)](_0x247c13){const _0x4c853d=a48_0x8a68e8;await this[_0x4c853d(0xc5)](_0x247c13);const _0x2bc088=await database_1[_0x4c853d(0xc3)][_0x4c853d(0xc4)][_0x4c853d(0xcd)]({'where':{'shopId':_0x247c13},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x2bc088)throw new Error(_0x4c853d(0xc6));return{'webhook':{'url':_0x2bc088['webhookUrl'],'events':this[_0x4c853d(0xcc)](_0x2bc088[_0x4c853d(0xd3)])}};}async[a48_0x8a68e8(0xce)](_0x472a15,_0x2263f5){const _0x5d1871=a48_0x8a68e8;await this[_0x5d1871(0xc5)](_0x472a15);const _0x2b3298={};_0x2263f5[_0x5d1871(0xd7)]!==undefined&&(_0x2b3298[_0x5d1871(0xd7)]=_0x2263f5[_0x5d1871(0xd7)]||null),_0x2263f5[_0x5d1871(0xd3)]!==undefined&&(_0x2b3298[_0x5d1871(0xd3)]=_0x2263f5[_0x5d1871(0xd3)]||[]),await database_1['default'][_0x5d1871(0xc4)][_0x5d1871(0xc8)]({'where':{'shopId':_0x472a15},'data':_0x2b3298});}async['ensureSettingsExist'](_0x2ff79f){const _0x34269a=a48_0x8a68e8,_0x4e7c44=await database_1[_0x34269a(0xc3)][_0x34269a(0xc4)][_0x34269a(0xcd)]({'where':{'shopId':_0x2ff79f}});!_0x4e7c44&&await database_1[_0x34269a(0xc3)][_0x34269a(0xc4)]['create']({'data':{'shopId':_0x2ff79f}});}}exports['IntegrationsService']=IntegrationsService;