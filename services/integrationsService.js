'use strict';const a58_0x195852=a58_0x3611;(function(_0x4900c2,_0x3c597f){const _0x50b7eb=a58_0x3611,_0x30b923=_0x4900c2();while(!![]){try{const _0x5f3dbf=-parseInt(_0x50b7eb(0xa7))/0x1*(parseInt(_0x50b7eb(0xa9))/0x2)+parseInt(_0x50b7eb(0xa5))/0x3+-parseInt(_0x50b7eb(0xbd))/0x4+-parseInt(_0x50b7eb(0xbc))/0x5*(parseInt(_0x50b7eb(0xb2))/0x6)+-parseInt(_0x50b7eb(0xb9))/0x7*(-parseInt(_0x50b7eb(0xbe))/0x8)+parseInt(_0x50b7eb(0xa6))/0x9*(parseInt(_0x50b7eb(0xb6))/0xa)+-parseInt(_0x50b7eb(0xb0))/0xb*(parseInt(_0x50b7eb(0xbf))/0xc);if(_0x5f3dbf===_0x3c597f)break;else _0x30b923['push'](_0x30b923['shift']());}catch(_0x542e71){_0x30b923['push'](_0x30b923['shift']());}}}(a58_0x108a,0xeb06a));var __importDefault=this&&this[a58_0x195852(0xab)]||function(_0xf347f8){const _0x479c4a=a58_0x195852;return _0xf347f8&&_0xf347f8[_0x479c4a(0xba)]?_0xf347f8:{'default':_0xf347f8};};function a58_0x3611(_0x3785a6,_0x5c0edd){const _0x108adf=a58_0x108a();return a58_0x3611=function(_0x361198,_0x23eef6){_0x361198=_0x361198-0xa4;let _0x33a1e6=_0x108adf[_0x361198];return _0x33a1e6;},a58_0x3611(_0x3785a6,_0x5c0edd);}Object[a58_0x195852(0xaa)](exports,a58_0x195852(0xba),{'value':!![]}),exports[a58_0x195852(0xb7)]=void 0x0;const database_1=__importDefault(require(a58_0x195852(0xad)));class IntegrationsService{[a58_0x195852(0xa8)](_0x2a5c4c){const _0xc75ea6=a58_0x195852;if(!_0x2a5c4c)return[];if(Array[_0xc75ea6(0xb8)](_0x2a5c4c))return _0x2a5c4c;if(typeof _0x2a5c4c===_0xc75ea6(0xac))try{const _0x3ee325=JSON['parse'](_0x2a5c4c);return Array[_0xc75ea6(0xb8)](_0x3ee325)?_0x3ee325:[];}catch{return[];}return[];}async['getIntegrations'](_0x37b91c){const _0x13b569=a58_0x195852;await this[_0x13b569(0xa4)](_0x37b91c);const _0x39b59b=await database_1[_0x13b569(0xb4)][_0x13b569(0xaf)][_0x13b569(0xae)]({'where':{'shopId':_0x37b91c},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x39b59b)throw new Error(_0x13b569(0xb1));return{'webhook':{'url':_0x39b59b[_0x13b569(0xb3)],'events':this[_0x13b569(0xa8)](_0x39b59b[_0x13b569(0xc0)])}};}async[a58_0x195852(0xbb)](_0x26d074,_0x48dcda){const _0x1a0bf6=a58_0x195852;await this[_0x1a0bf6(0xa4)](_0x26d074);const _0x3262b0={};_0x48dcda[_0x1a0bf6(0xb3)]!==undefined&&(_0x3262b0[_0x1a0bf6(0xb3)]=_0x48dcda[_0x1a0bf6(0xb3)]||null),_0x48dcda[_0x1a0bf6(0xc0)]!==undefined&&(_0x3262b0['webhookEvents']=_0x48dcda[_0x1a0bf6(0xc0)]||[]),await database_1[_0x1a0bf6(0xb4)][_0x1a0bf6(0xaf)][_0x1a0bf6(0xb5)]({'where':{'shopId':_0x26d074},'data':_0x3262b0});}async['ensureSettingsExist'](_0x4d0604){const _0x224d11=a58_0x195852,_0x58b0f5=await database_1[_0x224d11(0xb4)][_0x224d11(0xaf)]['findUnique']({'where':{'shopId':_0x4d0604}});!_0x58b0f5&&await database_1[_0x224d11(0xb4)][_0x224d11(0xaf)][_0x224d11(0xc1)]({'data':{'shopId':_0x4d0604}});}}exports[a58_0x195852(0xb7)]=IntegrationsService;function a58_0x108a(){const _0xe678a3=['115762esgmFR','defineProperty','__importDefault','string','../config/database','findUnique','shopSettings','180147cLtoLq','Shop\x20settings\x20not\x20found','6kTEiiB','webhookUrl','default','update','12280uVZUiG','IntegrationsService','isArray','97993noawtz','__esModule','updateWebhookSettings','7817220LQjuXm','1737324nICySB','280LrRnOz','168PkxRMi','webhookEvents','create','ensureSettingsExist','5200011RSCIlp','13446GREUGR','15IVrxEU','parseWebhookEvents'];a58_0x108a=function(){return _0xe678a3;};return a58_0x108a();}