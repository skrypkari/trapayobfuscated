'use strict';const a52_0x594f50=a52_0x1013;(function(_0x1ed7b1,_0x4e4a61){const _0xf81579=a52_0x1013,_0x3858cc=_0x1ed7b1();while(!![]){try{const _0x53d8bb=-parseInt(_0xf81579(0x202))/0x1+-parseInt(_0xf81579(0x1f7))/0x2+parseInt(_0xf81579(0x1fb))/0x3+parseInt(_0xf81579(0x1fe))/0x4+parseInt(_0xf81579(0x200))/0x5+-parseInt(_0xf81579(0x1ee))/0x6*(parseInt(_0xf81579(0x1fd))/0x7)+parseInt(_0xf81579(0x207))/0x8*(parseInt(_0xf81579(0x1f3))/0x9);if(_0x53d8bb===_0x4e4a61)break;else _0x3858cc['push'](_0x3858cc['shift']());}catch(_0xce0a6c){_0x3858cc['push'](_0x3858cc['shift']());}}}(a52_0x4eb5,0x6c64e));function a52_0x4eb5(){const _0x27393c=['1845687YKbaPE','webhookUrl','175chEhwv','1407688vTzjOR','defineProperty','3056375OyjcZb','Shop\x20settings\x20not\x20found','424943XfYSWX','findUnique','update','parse','default','5609024pvKEIo','../config/database','IntegrationsService','206532BBxcIA','shopSettings','string','create','__importDefault','9RCPVDc','parseWebhookEvents','ensureSettingsExist','updateWebhookSettings','1100158ViWxzD','webhookEvents','isArray','__esModule'];a52_0x4eb5=function(){return _0x27393c;};return a52_0x4eb5();}function a52_0x1013(_0xd76c91,_0x508a01){const _0x4eb5b9=a52_0x4eb5();return a52_0x1013=function(_0x1013f1,_0x53c16c){_0x1013f1=_0x1013f1-0x1ee;let _0x43837a=_0x4eb5b9[_0x1013f1];return _0x43837a;},a52_0x1013(_0xd76c91,_0x508a01);}var __importDefault=this&&this[a52_0x594f50(0x1f2)]||function(_0x1695af){return _0x1695af&&_0x1695af['__esModule']?_0x1695af:{'default':_0x1695af};};Object[a52_0x594f50(0x1ff)](exports,a52_0x594f50(0x1fa),{'value':!![]}),exports['IntegrationsService']=void 0x0;const database_1=__importDefault(require(a52_0x594f50(0x208)));class IntegrationsService{['parseWebhookEvents'](_0x2e41b4){const _0x383c69=a52_0x594f50;if(!_0x2e41b4)return[];if(Array[_0x383c69(0x1f9)](_0x2e41b4))return _0x2e41b4;if(typeof _0x2e41b4===_0x383c69(0x1f0))try{const _0xc8b352=JSON[_0x383c69(0x205)](_0x2e41b4);return Array[_0x383c69(0x1f9)](_0xc8b352)?_0xc8b352:[];}catch{return[];}return[];}async['getIntegrations'](_0xf147ed){const _0x1dd046=a52_0x594f50;await this[_0x1dd046(0x1f5)](_0xf147ed);const _0x4580fc=await database_1[_0x1dd046(0x206)]['shopSettings']['findUnique']({'where':{'shopId':_0xf147ed},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x4580fc)throw new Error(_0x1dd046(0x201));return{'webhook':{'url':_0x4580fc[_0x1dd046(0x1fc)],'events':this[_0x1dd046(0x1f4)](_0x4580fc[_0x1dd046(0x1f8)])}};}async[a52_0x594f50(0x1f6)](_0x2a95f9,_0x10cd76){const _0xc36c23=a52_0x594f50;await this['ensureSettingsExist'](_0x2a95f9);const _0x5e6670={};_0x10cd76[_0xc36c23(0x1fc)]!==undefined&&(_0x5e6670[_0xc36c23(0x1fc)]=_0x10cd76[_0xc36c23(0x1fc)]||null),_0x10cd76[_0xc36c23(0x1f8)]!==undefined&&(_0x5e6670[_0xc36c23(0x1f8)]=_0x10cd76[_0xc36c23(0x1f8)]||[]),await database_1[_0xc36c23(0x206)]['shopSettings'][_0xc36c23(0x204)]({'where':{'shopId':_0x2a95f9},'data':_0x5e6670});}async['ensureSettingsExist'](_0x1790c1){const _0x25210f=a52_0x594f50,_0x307be3=await database_1[_0x25210f(0x206)][_0x25210f(0x1ef)][_0x25210f(0x203)]({'where':{'shopId':_0x1790c1}});!_0x307be3&&await database_1[_0x25210f(0x206)][_0x25210f(0x1ef)][_0x25210f(0x1f1)]({'data':{'shopId':_0x1790c1}});}}exports[a52_0x594f50(0x209)]=IntegrationsService;