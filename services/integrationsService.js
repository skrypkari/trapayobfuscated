'use strict';const a43_0x37588e=a43_0x5bab;function a43_0x5bab(_0x6fc5bb,_0xe0672b){const _0x5577c1=a43_0x5577();return a43_0x5bab=function(_0x5babd0,_0x56a09e){_0x5babd0=_0x5babd0-0x18f;let _0x52554e=_0x5577c1[_0x5babd0];return _0x52554e;},a43_0x5bab(_0x6fc5bb,_0xe0672b);}function a43_0x5577(){const _0x4af47e=['parseWebhookEvents','__esModule','86HJbGEu','Shop\x20settings\x20not\x20found','getIntegrations','838749oAQsLP','3413MFbele','parse','3724992lTbexp','webhookEvents','webhookUrl','24410LkYlRQ','1926mfzKXG','updateWebhookSettings','create','IntegrationsService','1757DlgwHK','isArray','update','444160BXKuiK','ensureSettingsExist','88NqWLzc','../config/database','__importDefault','defineProperty','shopSettings','20DgIeNU','default','17008REMNVO','findUnique','264732rXnTev'];a43_0x5577=function(){return _0x4af47e;};return a43_0x5577();}(function(_0x274a9d,_0x4e8eb9){const _0x57ffe8=a43_0x5bab,_0x480cc2=_0x274a9d();while(!![]){try{const _0x338b53=parseInt(_0x57ffe8(0x1ac))/0x1*(-parseInt(_0x57ffe8(0x1a8))/0x2)+-parseInt(_0x57ffe8(0x1ab))/0x3*(-parseInt(_0x57ffe8(0x1a1))/0x4)+parseInt(_0x57ffe8(0x19a))/0x5+-parseInt(_0x57ffe8(0x18f))/0x6+parseInt(_0x57ffe8(0x197))/0x7*(-parseInt(_0x57ffe8(0x1a3))/0x8)+parseInt(_0x57ffe8(0x193))/0x9*(parseInt(_0x57ffe8(0x192))/0xa)+-parseInt(_0x57ffe8(0x19c))/0xb*(-parseInt(_0x57ffe8(0x1a5))/0xc);if(_0x338b53===_0x4e8eb9)break;else _0x480cc2['push'](_0x480cc2['shift']());}catch(_0x3c332e){_0x480cc2['push'](_0x480cc2['shift']());}}}(a43_0x5577,0xd7ea8));var __importDefault=this&&this[a43_0x37588e(0x19e)]||function(_0x32f319){const _0x17f5d2=a43_0x37588e;return _0x32f319&&_0x32f319[_0x17f5d2(0x1a7)]?_0x32f319:{'default':_0x32f319};};Object[a43_0x37588e(0x19f)](exports,'__esModule',{'value':!![]}),exports['IntegrationsService']=void 0x0;const database_1=__importDefault(require(a43_0x37588e(0x19d)));class IntegrationsService{[a43_0x37588e(0x1a6)](_0x5c2d20){const _0x456af1=a43_0x37588e;if(!_0x5c2d20)return[];if(Array[_0x456af1(0x198)](_0x5c2d20))return _0x5c2d20;if(typeof _0x5c2d20==='string')try{const _0x554cc3=JSON[_0x456af1(0x1ad)](_0x5c2d20);return Array[_0x456af1(0x198)](_0x554cc3)?_0x554cc3:[];}catch{return[];}return[];}async[a43_0x37588e(0x1aa)](_0x1187c4){const _0x13a1ba=a43_0x37588e;await this[_0x13a1ba(0x19b)](_0x1187c4);const _0x8b2c29=await database_1['default'][_0x13a1ba(0x1a0)][_0x13a1ba(0x1a4)]({'where':{'shopId':_0x1187c4},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x8b2c29)throw new Error(_0x13a1ba(0x1a9));return{'webhook':{'url':_0x8b2c29['webhookUrl'],'events':this[_0x13a1ba(0x1a6)](_0x8b2c29[_0x13a1ba(0x190)])}};}async[a43_0x37588e(0x194)](_0x51138a,_0x1e1a7e){const _0x23acc6=a43_0x37588e;await this[_0x23acc6(0x19b)](_0x51138a);const _0x2f3f9={};_0x1e1a7e[_0x23acc6(0x191)]!==undefined&&(_0x2f3f9[_0x23acc6(0x191)]=_0x1e1a7e['webhookUrl']||null),_0x1e1a7e[_0x23acc6(0x190)]!==undefined&&(_0x2f3f9['webhookEvents']=_0x1e1a7e[_0x23acc6(0x190)]||[]),await database_1[_0x23acc6(0x1a2)][_0x23acc6(0x1a0)][_0x23acc6(0x199)]({'where':{'shopId':_0x51138a},'data':_0x2f3f9});}async[a43_0x37588e(0x19b)](_0x1ac686){const _0x4d5f91=a43_0x37588e,_0x6f9fd2=await database_1[_0x4d5f91(0x1a2)][_0x4d5f91(0x1a0)]['findUnique']({'where':{'shopId':_0x1ac686}});!_0x6f9fd2&&await database_1[_0x4d5f91(0x1a2)][_0x4d5f91(0x1a0)][_0x4d5f91(0x195)]({'data':{'shopId':_0x1ac686}});}}exports[a43_0x37588e(0x196)]=IntegrationsService;