'use strict';const a47_0x4c7353=a47_0x14d1;(function(_0x381053,_0x55f62e){const _0x54c7ce=a47_0x14d1,_0x467fda=_0x381053();while(!![]){try{const _0x28cebf=parseInt(_0x54c7ce(0x1e0))/0x1*(-parseInt(_0x54c7ce(0x1dd))/0x2)+parseInt(_0x54c7ce(0x1e1))/0x3*(-parseInt(_0x54c7ce(0x1f8))/0x4)+-parseInt(_0x54c7ce(0x1f0))/0x5*(-parseInt(_0x54c7ce(0x1e2))/0x6)+parseInt(_0x54c7ce(0x1ea))/0x7+-parseInt(_0x54c7ce(0x1e3))/0x8+-parseInt(_0x54c7ce(0x1f6))/0x9+-parseInt(_0x54c7ce(0x1e8))/0xa*(-parseInt(_0x54c7ce(0x1f4))/0xb);if(_0x28cebf===_0x55f62e)break;else _0x467fda['push'](_0x467fda['shift']());}catch(_0xd67e5c){_0x467fda['push'](_0x467fda['shift']());}}}(a47_0x2933,0x8a733));var __importDefault=this&&this[a47_0x4c7353(0x1ec)]||function(_0x17462d){const _0x51fa90=a47_0x4c7353;return _0x17462d&&_0x17462d[_0x51fa90(0x1e5)]?_0x17462d:{'default':_0x17462d};};Object[a47_0x4c7353(0x1f9)](exports,a47_0x4c7353(0x1e5),{'value':!![]}),exports[a47_0x4c7353(0x1e6)]=void 0x0;function a47_0x14d1(_0x1035e0,_0x4b87a0){const _0x293318=a47_0x2933();return a47_0x14d1=function(_0x14d11d,_0x5373a4){_0x14d11d=_0x14d11d-0x1dd;let _0x3ecac8=_0x293318[_0x14d11d];return _0x3ecac8;},a47_0x14d1(_0x1035e0,_0x4b87a0);}const database_1=__importDefault(require(a47_0x4c7353(0x1f5)));class IntegrationsService{[a47_0x4c7353(0x1df)](_0x4c88ce){const _0x5ae8ec=a47_0x4c7353;if(!_0x4c88ce)return[];if(Array[_0x5ae8ec(0x1f3)](_0x4c88ce))return _0x4c88ce;if(typeof _0x4c88ce==='string')try{const _0x1e389a=JSON[_0x5ae8ec(0x1ed)](_0x4c88ce);return Array['isArray'](_0x1e389a)?_0x1e389a:[];}catch{return[];}return[];}async[a47_0x4c7353(0x1e7)](_0x29b2a7){const _0x30fe9d=a47_0x4c7353;await this['ensureSettingsExist'](_0x29b2a7);const _0x436058=await database_1[_0x30fe9d(0x1f2)][_0x30fe9d(0x1f7)][_0x30fe9d(0x1de)]({'where':{'shopId':_0x29b2a7},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x436058)throw new Error(_0x30fe9d(0x1ef));return{'webhook':{'url':_0x436058[_0x30fe9d(0x1eb)],'events':this[_0x30fe9d(0x1df)](_0x436058[_0x30fe9d(0x1f1)])}};}async['updateWebhookSettings'](_0x5434dc,_0x42ff48){const _0x1d0901=a47_0x4c7353;await this[_0x1d0901(0x1e9)](_0x5434dc);const _0x44ec7a={};_0x42ff48[_0x1d0901(0x1eb)]!==undefined&&(_0x44ec7a[_0x1d0901(0x1eb)]=_0x42ff48[_0x1d0901(0x1eb)]||null),_0x42ff48[_0x1d0901(0x1f1)]!==undefined&&(_0x44ec7a[_0x1d0901(0x1f1)]=_0x42ff48[_0x1d0901(0x1f1)]||[]),await database_1['default']['shopSettings'][_0x1d0901(0x1e4)]({'where':{'shopId':_0x5434dc},'data':_0x44ec7a});}async[a47_0x4c7353(0x1e9)](_0x1559c5){const _0x1ddba3=a47_0x4c7353,_0x414504=await database_1[_0x1ddba3(0x1f2)][_0x1ddba3(0x1f7)][_0x1ddba3(0x1de)]({'where':{'shopId':_0x1559c5}});!_0x414504&&await database_1[_0x1ddba3(0x1f2)][_0x1ddba3(0x1f7)][_0x1ddba3(0x1ee)]({'data':{'shopId':_0x1559c5}});}}exports['IntegrationsService']=IntegrationsService;function a47_0x2933(){const _0x327cee=['3624669cUvwwL','shopSettings','4EYbIuE','defineProperty','107768noOaNL','findUnique','parseWebhookEvents','14MjQYtv','256017OUfuxk','12udmpeG','6255752uxwvgO','update','__esModule','IntegrationsService','getIntegrations','250iwntwa','ensureSettingsExist','4146310iOvLdC','webhookUrl','__importDefault','parse','create','Shop\x20settings\x20not\x20found','2568215gAPxpX','webhookEvents','default','isArray','427636JenYLD','../config/database'];a47_0x2933=function(){return _0x327cee;};return a47_0x2933();}