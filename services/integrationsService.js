'use strict';const a43_0x43b9d3=a43_0x43c3;(function(_0x22f8dc,_0x268a7c){const _0x483c45=a43_0x43c3,_0x8facc2=_0x22f8dc();while(!![]){try{const _0x5ed3f3=-parseInt(_0x483c45(0x1d2))/0x1*(-parseInt(_0x483c45(0x1cf))/0x2)+-parseInt(_0x483c45(0x1db))/0x3*(parseInt(_0x483c45(0x1e6))/0x4)+-parseInt(_0x483c45(0x1d5))/0x5*(parseInt(_0x483c45(0x1d8))/0x6)+-parseInt(_0x483c45(0x1e0))/0x7+parseInt(_0x483c45(0x1d3))/0x8*(parseInt(_0x483c45(0x1e2))/0x9)+parseInt(_0x483c45(0x1d9))/0xa*(parseInt(_0x483c45(0x1e1))/0xb)+parseInt(_0x483c45(0x1e4))/0xc;if(_0x5ed3f3===_0x268a7c)break;else _0x8facc2['push'](_0x8facc2['shift']());}catch(_0x114dc7){_0x8facc2['push'](_0x8facc2['shift']());}}}(a43_0x9955,0xd4bf1));function a43_0x9955(){const _0x1bd284=['shopSettings','43264176cWUjGT','findUnique','2844084NLBsss','parseWebhookEvents','webhookEvents','isArray','263214tQIGJL','update','updateWebhookSettings','1YIjiRa','8qjqaCp','__importDefault','1160355zhbgAT','parse','webhookUrl','30BsvTal','20xOOTCL','IntegrationsService','3cIdEmS','string','default','__esModule','ensureSettingsExist','11040421dgqonx','2390498yiPnut','1335573gXjRkN'];a43_0x9955=function(){return _0x1bd284;};return a43_0x9955();}function a43_0x43c3(_0x4da392,_0x4ec825){const _0x99559e=a43_0x9955();return a43_0x43c3=function(_0x43c37f,_0x36af8d){_0x43c37f=_0x43c37f-0x1cd;let _0x36694c=_0x99559e[_0x43c37f];return _0x36694c;},a43_0x43c3(_0x4da392,_0x4ec825);}var __importDefault=this&&this[a43_0x43b9d3(0x1d4)]||function(_0x59f087){const _0x3418c6=a43_0x43b9d3;return _0x59f087&&_0x59f087[_0x3418c6(0x1de)]?_0x59f087:{'default':_0x59f087};};Object['defineProperty'](exports,a43_0x43b9d3(0x1de),{'value':!![]}),exports[a43_0x43b9d3(0x1da)]=void 0x0;const database_1=__importDefault(require('../config/database'));class IntegrationsService{[a43_0x43b9d3(0x1e7)](_0x254927){const _0x5248db=a43_0x43b9d3;if(!_0x254927)return[];if(Array['isArray'](_0x254927))return _0x254927;if(typeof _0x254927===_0x5248db(0x1dc))try{const _0x14c63d=JSON[_0x5248db(0x1d6)](_0x254927);return Array[_0x5248db(0x1ce)](_0x14c63d)?_0x14c63d:[];}catch{return[];}return[];}async['getIntegrations'](_0x1f9a6d){const _0x566ab3=a43_0x43b9d3;await this[_0x566ab3(0x1df)](_0x1f9a6d);const _0x3336e4=await database_1[_0x566ab3(0x1dd)][_0x566ab3(0x1e3)]['findUnique']({'where':{'shopId':_0x1f9a6d},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x3336e4)throw new Error('Shop\x20settings\x20not\x20found');return{'webhook':{'url':_0x3336e4['webhookUrl'],'events':this[_0x566ab3(0x1e7)](_0x3336e4[_0x566ab3(0x1cd)])}};}async[a43_0x43b9d3(0x1d1)](_0x19ec9c,_0x3b16f2){const _0x22171b=a43_0x43b9d3;await this[_0x22171b(0x1df)](_0x19ec9c);const _0x3f70ff={};_0x3b16f2[_0x22171b(0x1d7)]!==undefined&&(_0x3f70ff[_0x22171b(0x1d7)]=_0x3b16f2[_0x22171b(0x1d7)]||null),_0x3b16f2[_0x22171b(0x1cd)]!==undefined&&(_0x3f70ff[_0x22171b(0x1cd)]=_0x3b16f2[_0x22171b(0x1cd)]||[]),await database_1['default'][_0x22171b(0x1e3)][_0x22171b(0x1d0)]({'where':{'shopId':_0x19ec9c},'data':_0x3f70ff});}async['ensureSettingsExist'](_0x1f731b){const _0x4b938f=a43_0x43b9d3,_0x4224c8=await database_1[_0x4b938f(0x1dd)][_0x4b938f(0x1e3)][_0x4b938f(0x1e5)]({'where':{'shopId':_0x1f731b}});!_0x4224c8&&await database_1[_0x4b938f(0x1dd)]['shopSettings']['create']({'data':{'shopId':_0x1f731b}});}}exports['IntegrationsService']=IntegrationsService;