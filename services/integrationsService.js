'use strict';const a50_0x322eff=a50_0x2f7f;(function(_0x107b60,_0x35b300){const _0x4b3ad7=a50_0x2f7f,_0x227221=_0x107b60();while(!![]){try{const _0x552d2b=-parseInt(_0x4b3ad7(0x89))/0x1+-parseInt(_0x4b3ad7(0x91))/0x2*(-parseInt(_0x4b3ad7(0x8d))/0x3)+-parseInt(_0x4b3ad7(0x99))/0x4+-parseInt(_0x4b3ad7(0x92))/0x5*(parseInt(_0x4b3ad7(0x9e))/0x6)+-parseInt(_0x4b3ad7(0x95))/0x7*(-parseInt(_0x4b3ad7(0x84))/0x8)+parseInt(_0x4b3ad7(0x85))/0x9*(-parseInt(_0x4b3ad7(0x98))/0xa)+parseInt(_0x4b3ad7(0x8b))/0xb;if(_0x552d2b===_0x35b300)break;else _0x227221['push'](_0x227221['shift']());}catch(_0x248630){_0x227221['push'](_0x227221['shift']());}}}(a50_0x23e8,0x2a538));var __importDefault=this&&this[a50_0x322eff(0x8a)]||function(_0x3efe36){const _0x304011=a50_0x322eff;return _0x3efe36&&_0x3efe36[_0x304011(0x8f)]?_0x3efe36:{'default':_0x3efe36};};Object[a50_0x322eff(0x8e)](exports,'__esModule',{'value':!![]}),exports[a50_0x322eff(0x83)]=void 0x0;const database_1=__importDefault(require(a50_0x322eff(0x9d)));function a50_0x2f7f(_0x811763,_0x1773f2){const _0x23e8b8=a50_0x23e8();return a50_0x2f7f=function(_0x2f7fe8,_0x1ac457){_0x2f7fe8=_0x2f7fe8-0x83;let _0x404be7=_0x23e8b8[_0x2f7fe8];return _0x404be7;},a50_0x2f7f(_0x811763,_0x1773f2);}class IntegrationsService{[a50_0x322eff(0x88)](_0x4fa709){const _0xb39fa5=a50_0x322eff;if(!_0x4fa709)return[];if(Array[_0xb39fa5(0x87)](_0x4fa709))return _0x4fa709;if(typeof _0x4fa709===_0xb39fa5(0x9c))try{const _0x5757f8=JSON[_0xb39fa5(0x96)](_0x4fa709);return Array[_0xb39fa5(0x87)](_0x5757f8)?_0x5757f8:[];}catch{return[];}return[];}async[a50_0x322eff(0x97)](_0x2a5aac){const _0x1bc827=a50_0x322eff;await this['ensureSettingsExist'](_0x2a5aac);const _0x1e77b9=await database_1[_0x1bc827(0x9f)][_0x1bc827(0x9b)][_0x1bc827(0x94)]({'where':{'shopId':_0x2a5aac},'select':{'webhookUrl':!![],'webhookEvents':!![]}});if(!_0x1e77b9)throw new Error('Shop\x20settings\x20not\x20found');return{'webhook':{'url':_0x1e77b9[_0x1bc827(0x86)],'events':this[_0x1bc827(0x88)](_0x1e77b9['webhookEvents'])}};}async[a50_0x322eff(0x90)](_0x45738a,_0x29d6d9){const _0x26b101=a50_0x322eff;await this[_0x26b101(0x9a)](_0x45738a);const _0x230966={};_0x29d6d9[_0x26b101(0x86)]!==undefined&&(_0x230966[_0x26b101(0x86)]=_0x29d6d9['webhookUrl']||null),_0x29d6d9[_0x26b101(0x8c)]!==undefined&&(_0x230966[_0x26b101(0x8c)]=_0x29d6d9[_0x26b101(0x8c)]||[]),await database_1[_0x26b101(0x9f)]['shopSettings'][_0x26b101(0x93)]({'where':{'shopId':_0x45738a},'data':_0x230966});}async['ensureSettingsExist'](_0x24f78a){const _0x2bec6a=a50_0x322eff,_0x479fb7=await database_1[_0x2bec6a(0x9f)][_0x2bec6a(0x9b)][_0x2bec6a(0x94)]({'where':{'shopId':_0x24f78a}});!_0x479fb7&&await database_1[_0x2bec6a(0x9f)]['shopSettings'][_0x2bec6a(0xa0)]({'data':{'shopId':_0x24f78a}});}}function a50_0x23e8(){const _0x462bf1=['../config/database','768ZoXDqi','default','create','IntegrationsService','2488uytXsA','8901fIssQV','webhookUrl','isArray','parseWebhookEvents','245839iCHcbk','__importDefault','5098203HtafDg','webhookEvents','238422CXAeiI','defineProperty','__esModule','updateWebhookSettings','6ksMQdN','8285RENeBK','update','findUnique','5138TRnDLV','parse','getIntegrations','1770hvteDY','495252YfCIpG','ensureSettingsExist','shopSettings','string'];a50_0x23e8=function(){return _0x462bf1;};return a50_0x23e8();}exports[a50_0x322eff(0x83)]=IntegrationsService;