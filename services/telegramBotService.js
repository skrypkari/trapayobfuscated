'use strict';function a49_0x2caf(){const _0x163246=['–ü–æ–∂–∞–ª—É–π—Å—Ç–∞,\x20–æ—Ç–ø—Ä–∞–≤—å—Ç–µ:\x0a','‚ùå\x20–°–Ω–∞—á–∞–ª–∞\x20–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ\x20–∫–æ–º–∞–Ω–¥—É\x20/start','\x0aüí°\x20–ü—Ä–æ–≤–µ—Ä—å—Ç–µ\x20–ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å\x20–∑–∞–ø—Ä–æ—Å–∞\x20–∏–ª–∏\x20–æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å\x20–≤\x20–ø–æ–¥–¥–µ—Ä–∂–∫—É.','substring','\x20USD*\x0a','toString','update','üîÑ\x20Processing\x20multiline\x20verification\x20for\x20user\x20','üè¶\x20–ú–µ—Ç–æ–¥:\x20`','2689326snDuSd','*\x0a\x0a','–û–±—Ä–∞—Ç–∏—Ç–µ—Å—å\x20–∫\x20–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É.','–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π','7VZBLcE','isVerified','setupBotHandlers','1Ô∏è‚É£\x20–û—Ç–ø—Ä–∞–≤—å—Ç–µ\x20–≤–∞—à\x20*username*\x20(–ª–æ–≥–∏–Ω\x20–æ—Ç\x20–ø–∞–Ω–µ–ª–∏)\x0a','‚ùå\x20–ù–µ–≤–µ—Ä–Ω—ã–π\x20—Ñ–æ—Ä–º–∞—Ç\x20–¥–∞–Ω–Ω—ã—Ö.\x0a\x0a','2Ô∏è‚É£\x20–ó–∞—Ç–µ–º\x20–æ—Ç–ø—Ä–∞–≤—å—Ç–µ\x20–≤–∞—à\x20*API\x20–∫–ª—é—á*\x0a\x0a','‚Ä¢\x20`','publicKey','üîî\x20–¢–µ–ø–µ—Ä—å\x20–≤—ã\x20–±—É–¥–µ—Ç–µ\x20–ø–æ–ª—É—á–∞—Ç—å\x20—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è\x20–æ:\x0a','chargebackAmount','createdAt','default','/status\x20-\x20–ø—Ä–æ–≤–µ—Ä–∏—Ç—å\x20—Å—Ç–∞—Ç—É—Å\x20–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è\x0a','üí∏\x20–°—É–º–º–∞:\x20*','shop','–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ\x20/start\x20–¥–ª—è\x20–Ω–∞—á–∞–ª–∞\x20—Ä–∞–±–æ—Ç—ã.','‚úÖ\x20Login\x20notification\x20sent\x20for\x20shop\x20','321tuRxHD','shopSettings','üîÑ\x20Processing\x20username\x20verification\x20for\x20user\x20','*.\x0a\x0a','telegramUser','sendApiErrorNotification','‚ùå\x20–ü—Ä–æ–∏–∑–æ—à–ª–∞\x20–æ—à–∏–±–∫–∞\x20–ø—Ä–∏\x20–ø—Ä–æ–≤–µ—Ä–∫–µ\x20–¥–∞–Ω–Ω—ã—Ö.','trapay_bot','6577992lxMyXh','üì±\x20–ú–∞–≥–∞–∑–∏–Ω:\x20*','Error\x20handling\x20/debug\x20command:','polling_error','Error\x20handling\x20/status\x20command:','username','2Ô∏è‚É£\x20API\x20–∫–ª—é—á','–£—Å–ø–µ—à–Ω—ã–π\x20–≤—Ö–æ–¥\x20–≤\x20—Å–∏—Å—Ç–µ–º—É','findFirst','–ß–∞—Ä–¥–∂–±—ç–∫\x20–ø–æ\x20–ø–ª–∞—Ç–µ–∂—É','\x0a–ü—Ä–æ–≤–µ—Ä—å—Ç–µ\x20–ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å\x20–Ω–∞–ø–∏—Å–∞–Ω–∏—è\x20–∏\x20–ø–æ–ø—Ä–æ–±—É–π—Ç–µ\x20—Å–Ω–æ–≤–∞.','üÜî\x20Request\x20ID:\x20`','‚úÖ\x20–í—ã\x20—É—Å–ø–µ—à–Ω–æ\x20–ø–æ–¥–∫–ª—é—á–µ–Ω—ã\x20–∫\x20—Å–∏—Å—Ç–µ–º–µ\x20—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π!\x0a\x0a','`\x20–Ω–µ–∞–∫—Ç–∏–≤–µ–Ω.\x0a\x0a','updatedAt','error','../config/database','‚ùå\x20–ú–∞–≥–∞–∑–∏–Ω\x20`','user\x20is\x20deactivated','\x22,\x20apiKey=\x22','90ildKuv','–î–ª—è\x20–ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ\x20–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è\x20–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ\x20–∫–æ–º–∞–Ω–¥—É\x20/start','‚ùå\x20–ù–µ–≤–µ—Ä–Ω—ã–π\x20—Ñ–æ—Ä–º–∞—Ç\x20username:\x20`','telegramId','startsWith',',\x20reset\x20shop\x20association','Failed\x20to\x20send\x20API\x20error\x20notification:','üë§\x20Username:\x20`','‚úÖ\x20Telegram\x20user\x20','notificationApiError','\x20marked\x20as\x20unverified\x20due\x20to\x20delivery\x20failure','gateway','Error\x20handling\x20/start\x20command:','TELEGRAM_BOT_USERNAME','Username:\x20`','–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π\x20–º–∞–≥–∞–∑–∏–Ω','–í—ã–ø–ª–∞—Ç–∞\x20–∑–∞–≤–µ—Ä—à–µ–Ω–∞','ru-RU','text','notificationLogin','toUpperCase','‚ùå\x20–ü—Ä–æ–∏–∑–æ—à–ª–∞\x20–æ—à–∏–±–∫–∞\x20–ø—Ä–∏\x20–ø—Ä–æ–≤–µ—Ä–∫–µ\x20API\x20–∫–ª—é—á–∞.','üí∏\x20–°—É–º–º–∞\x20—à—Ç—Ä–∞—Ñ–∞:\x20*','log','message','/disconnect\x20-\x20–æ—Ç–∫–ª—é—á–∏—Ç—å—Å—è\x20–æ—Ç\x20—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π','includes','shopId','name','sk_','chat\x20not\x20found','statusCode','‚Ä¢\x20–ù–æ–≤—ã—Ö\x20–ø–ª–∞—Ç–µ–∂–∞—Ö\x0a','TELEGRAM_BOT_TOKEN\x20not\x20found\x20in\x20environment\x20variables','üîó\x20Endpoint:\x20`','‚ùóÔ∏è\x20–£–±–µ–¥–∏—Ç–µ—Å—å,\x20—á—Ç–æ\x20–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç–µ\x20–¥–∞–Ω–Ω—ã–µ\x20–≤\x20–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º\x20–ø–æ—Ä—è–¥–∫–µ!','ipAddress','–î–æ—Å—Ç—É–ø–Ω—ã–µ\x20username:\x0a','\x20\x20\x20Status:\x20','‚Ä¢\x20–í—ã–ø–ª–∞—Ç–∞—Ö\x0a','first_name','`.\x0a\x0a','sendMessage','‚úÖ\x20–î–æ–±—Ä–æ\x20–ø–æ–∂–∞–ª–æ–≤–∞—Ç—å\x20–æ–±—Ä–∞—Ç–Ω–æ!\x0a\x0a','550636LnFNpy','üíª\x20–ë—Ä–∞—É–∑–µ—Ä:\x20`','toLocaleString','sendPaymentNotification','chat','findUnique','1Ô∏è‚É£\x20–°–Ω–∞—á–∞–ª–∞\x20–≤–∞—à\x20username\x20(—Ç–æ–ª—å–∫–æ\x20–±—É–∫–≤—ã,\x20—Ü–∏—Ñ—Ä—ã\x20–∏\x20–ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ)\x0a','sendLoginNotification','Failed\x20to\x20send\x20login\x20notification:','–ü–ª–∞—Ç–µ–∂\x20–æ—Ç–∫–ª–æ–Ω–µ–Ω','adminNotes','–ü—Ä–∏–º–µ—Ä:\x0a','warn','from','üìÖ\x20–í—Ä–µ–º—è:\x20','requestId','Error\x20in\x20handleApiKeyVerification:','`\x20–Ω–µ\x20–Ω–∞–π–¥–µ–Ω.\x0a\x0a','–í—ã–ø–ª–∞—Ç–∞\x20–æ—Ç–∫–ª–æ–Ω–µ–Ω–∞','\x20disconnected\x20from\x20shop\x20','699053lvhill','`pk_aa6450d3f57afbefbb0f3f5be5ce6cca13037536afc5ccf14c81a6cbc7a07de5`','botUsername','`\x20(','TelegramBotService','‚úÖ\x20–ü–æ–¥–∫–ª—é—á–µ–Ω\x20–∫\x20–º–∞–≥–∞–∑–∏–Ω—É:\x20*','findMany','\x20initialized\x20successfully','`\x20–Ω–∞–π–¥–µ–Ω!\x0a\x0a','‚úÖ\x20–í—ã\x20—É–∂–µ\x20–ø–æ–¥–∫–ª—é—á–µ–Ω—ã\x20–∫\x20–º–∞–≥–∞–∑–∏–Ω—É\x20*','entries','–û–∂–∏–¥–∞–µ–º—ã–π\x20—Ñ–æ—Ä–º–∞—Ç\x20–∫–ª—é—á–∞:\x20`pk_...`\x20–∏–ª–∏\x20`sk_...`','method','filter','botToken','4510384jRaQxD','üéâ\x20*–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!*\x0a\x0a','API\x20–∫–ª—é—á\x20–¥–æ–ª–∂–µ–Ω\x20–Ω–∞—á–∏–Ω–∞—Ç—å—Å—è\x20—Å\x20`pk\x5c_`\x20–∏–ª–∏\x20`sk\x5c_`.','üì±\x20–í–∞—à\x20Telegram\x20ID:\x20`','20XOyaXF','map','Error\x20handling\x20message:','ü§ñ\x20–î–æ–±—Ä–æ\x20–ø–æ–∂–∞–ª–æ–≤–∞—Ç—å\x20–≤\x20—Å–∏—Å—Ç–µ–º—É\x20—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π\x20TesSoft\x20Payment!\x0a\x0a','–í—ã\x20–º–æ–∂–µ—Ç–µ\x20–æ—Ç–ø—Ä–∞–≤–∏—Ç—å\x20–∏—Ö\x20–≤\x20–æ–¥–Ω–æ–º\x20—Å–æ–æ–±—â–µ–Ω–∏–∏\x20—á–µ—Ä–µ–∑\x20–ø–µ—Ä–µ–Ω–æ—Å\x20—Å—Ç—Ä–æ–∫–∏:\x0a','...`\x0a\x0a','currency','–í—ã\x20—É–∂–µ\x20–ø–æ–¥–∫–ª—é—á–µ–Ω—ã\x20–∫\x20–º–∞–≥–∞–∑–∏–Ω—É:\x20*','success','–¢–µ–ø–µ—Ä—å\x20–æ—Ç–ø—Ä–∞–≤—å—Ç–µ\x20–≤–∞—à\x20*API\x20–∫–ª—é—á*\x20(–ø—É–±–ª–∏—á–Ω—ã–π\x20–∏–ª–∏\x20—Å–µ–∫—Ä–µ—Ç–Ω—ã–π\x20–∫–ª—é—á,\x20–Ω–∞—á–∏–Ω–∞—é—â–∏–π—Å—è\x20—Å\x20`pk\x5c_`\x20–∏–ª–∏\x20`sk\x5c_`)','test','üîî\x20*','bot','Markdown','handleUsernameVerification','...\x22','timestamp','handleMultilineVerification','TELEGRAM_BOT_TOKEN','chargeback','ACTIVE','\x20\x20\x20Public\x20Key:\x20`','last_name','toLocaleDateString','Error\x20handling\x20/disconnect\x20command:','–ù–µ—É–¥–∞—á–Ω–∞—è\x20–ø–æ–ø—ã—Ç–∫–∞\x20–≤—Ö–æ–¥–∞','handleApiKeyVerification','‚ùå\x20–ú–∞–≥–∞–∑–∏–Ω\x20—Å\x20username\x20`','2380466ExNMqy','endpoint','‚ùå\x20–ü—Ä–æ–∏–∑–æ—à–ª–∞\x20–æ—à–∏–±–∫–∞.\x20–ü–æ–ø—Ä–æ–±—É–π—Ç–µ\x20–ø–æ–∑–∂–µ.','`\x20—É–∂–µ\x20–ø–æ–¥–∫–ª—é—á–µ–Ω\x20–¥—Ä—É–≥–æ–π\x20Telegram\x20–∞–∫–∫–∞—É–Ω—Ç.\x0a\x0a','‚ùå\x20–í—ã\x20–Ω–µ\x20–ø–æ–¥–∫–ª—é—á–µ–Ω—ã\x20–∫\x20–º–∞–≥–∞–∑–∏–Ω—É.\x0a\x0a','\x20with\x20shop\x20','__esModule','txid','userAgent','stopBot','‚úÖ\x20Telegram\x20bot\x20@','1Ô∏è‚É£\x20Username\x0a','‚úÖ\x20–í—ã\x20—É—Å–ø–µ—à–Ω–æ\x20–æ—Ç–∫–ª—é—á–µ–Ω—ã\x20–æ—Ç\x20–º–∞–≥–∞–∑–∏–Ω–∞\x20*','\x20(@','–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ\x20/status\x20–¥–ª—è\x20–ø—Ä–æ–≤–µ—Ä–∫–∏\x20—Å—Ç–∞—Ç—É—Å–∞.','length','–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ\x20/start\x20–¥–ª—è\x20–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.','onText','amount','\x20via\x20multiline\x20input','`\x0a\x0a','üîî\x20–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è\x20–∞–∫—Ç–∏–≤–Ω—ã\x0a\x0a','–ü–æ—Ä—è–¥–æ–∫:\x0a','üè™\x20–®–ª—é–∑:\x20`','–°–æ–∑–¥–∞–Ω–∞\x20–Ω–æ–≤–∞—è\x20–≤—ã–ø–ª–∞—Ç–∞','‚úÖ\x20API\x20error\x20notification\x20sent\x20for\x20shop\x20','11748PEGUAk','–°–æ–∑–¥–∞–Ω\x20–Ω–æ–≤—ã–π\x20–ø–ª–∞—Ç–µ–∂','\x20verified\x20for\x20shop\x20','–ö–æ–º–∞–Ω–¥—ã:\x0a','üì±\x20Login\x20notifications\x20disabled\x20for\x20shop\x20','defineProperty','‚Ä¢\x20–í–∞–∂–Ω—ã—Ö\x20—Å–æ–±—ã—Ç–∏—è—Ö\x0a\x0a','üåê\x20IP\x20–∞–¥—Ä–µ—Å:\x20`','`pk_aa6450d3f57afbefbb0f3f5be5ce6cca13037536afc5ccf14c81a6cbc7a07de5`\x0a\x0a','‚úÖ\x20Notification\x20sent\x20to\x20Telegram\x20user\x20','Telegram\x20bot\x20not\x20initialized,\x20cannot\x20send\x20notification','‚ùå\x20Failed\x20to\x20send\x20notification\x20to\x20Telegram\x20user\x20','\x0a‚ö†Ô∏è\x20–ï—Å–ª–∏\x20—ç—Ç–æ\x20–Ω–µ\x20–≤—ã,\x20–Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ\x20—Å–º–µ–Ω–∏—Ç–µ\x20–ø–∞—Ä–æ–ª—å!','failed','üì±\x20Created\x20new\x20Telegram\x20user:\x20','stopPolling','üÜî\x20ID\x20–ø–ª–∞—Ç–µ–∂–∞:\x20`','User\x20','`appple`\x0a','–ü—Ä–æ–≤–µ—Ä—å—Ç–µ\x20–ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å\x20–∫–ª—é—á–∞\x20–∏–ª–∏\x20–Ω–∞—á–Ω–∏—Ç–µ\x20–∑–∞–Ω–æ–≤–æ\x20—Å\x20–∫–æ–º–∞–Ω–¥—ã\x20/start\x0a\x0a','üìù\x20Temporary\x20shop\x20association\x20created\x20for\x20user\x20','sendShopNotification','üìä\x20–ö–æ–¥\x20–æ—à–∏–±–∫–∏:\x20`','\x20\x20\x20Username:\x20`','Error\x20in\x20handleUsernameVerification:','errorMessage','üîå\x20User\x20','forEach','üìÖ\x20–î–∞—Ç–∞:\x20','‚ùå\x20Failed\x20to\x20initialize\x20Telegram\x20bot:','env','initializeBot','split','‚ùå\x20Invalid\x20API\x20key\x20for\x20user\x20','–ü—Ä–æ–≤–µ—Ä—å—Ç–µ\x20–ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å\x20–Ω–∞–ø–∏—Å–∞–Ω–∏—è\x20–∏\x20–ø–æ–ø—Ä–æ–±—É–π—Ç–µ\x20—Å–Ω–æ–≤–∞.','‚Ä¢\x20–ò–∑–º–µ–Ω–µ–Ω–∏–∏\x20—Å—Ç–∞—Ç—É—Å–∞\x20–ø–ª–∞—Ç–µ–∂–µ–π\x0a','üîó\x20TXID:\x20`','‚ùå\x20–ö\x20–º–∞–≥–∞–∑–∏–Ω—É\x20`','üö®\x20*–û—à–∏–±–∫–∞\x20API*\x0a\x0a','status','–ü–ª–∞—Ç–µ–∂\x20–∏—Å—Ç–µ–∫'];a49_0x2caf=function(){return _0x163246;};return a49_0x2caf();}const a49_0x50e73d=a49_0x1c15;(function(_0x126d22,_0x27315f){const _0x2124cb=a49_0x1c15,_0x4856cd=_0x126d22();while(!![]){try{const _0x30badc=parseInt(_0x2124cb(0x17b))/0x1+-parseInt(_0x2124cb(0x1c4))/0x2*(parseInt(_0x2124cb(0x11f))/0x3)+-parseInt(_0x2124cb(0x167))/0x4*(-parseInt(_0x2124cb(0x18e))/0x5)+parseInt(_0x2124cb(0x10a))/0x6*(parseInt(_0x2124cb(0x10e))/0x7)+parseInt(_0x2124cb(0x18a))/0x8+parseInt(_0x2124cb(0x127))/0x9+parseInt(_0x2124cb(0x13b))/0xa*(-parseInt(_0x2124cb(0x1aa))/0xb);if(_0x30badc===_0x27315f)break;else _0x4856cd['push'](_0x4856cd['shift']());}catch(_0xe499b0){_0x4856cd['push'](_0x4856cd['shift']());}}}(a49_0x2caf,0x65aa8));var __importDefault=this&&this['__importDefault']||function(_0x1f7d91){const _0x3508ab=a49_0x1c15;return _0x1f7d91&&_0x1f7d91[_0x3508ab(0x1b0)]?_0x1f7d91:{'default':_0x1f7d91};};Object[a49_0x50e73d(0xdd)](exports,a49_0x50e73d(0x1b0),{'value':!![]}),exports['telegramBotService']=exports[a49_0x50e73d(0x17f)]=void 0x0;const node_telegram_bot_api_1=__importDefault(require('node-telegram-bot-api')),database_1=__importDefault(require(a49_0x50e73d(0x137)));class TelegramBotService{constructor(){const _0x1b178f=a49_0x50e73d;this[_0x1b178f(0x19a)]=null,this[_0x1b178f(0x189)]=process[_0x1b178f(0xf6)][_0x1b178f(0x1a0)]||'',this['botUsername']=process[_0x1b178f(0xf6)][_0x1b178f(0x148)]||_0x1b178f(0x126),this[_0x1b178f(0x189)]?this[_0x1b178f(0xf7)]():console['warn'](_0x1b178f(0x15c));}[a49_0x50e73d(0xf7)](){const _0x5f35d6=a49_0x50e73d;try{this['bot']=new node_telegram_bot_api_1['default'](this['botToken'],{'polling':!![]}),this['setupBotHandlers'](),console['log'](_0x5f35d6(0x1b4)+this[_0x5f35d6(0x17d)]+_0x5f35d6(0x182));}catch(_0x543fce){console['error'](_0x5f35d6(0xf5),_0x543fce);}}[a49_0x50e73d(0x110)](){const _0xe7831b=a49_0x50e73d;if(!this[_0xe7831b(0x19a)])return;this[_0xe7831b(0x19a)][_0xe7831b(0x1bb)](/\/start/,async _0x506897=>{const _0x5cefe0=_0xe7831b,_0x34000d=_0x506897[_0x5cefe0(0x16b)]['id'],_0x52bcf3=_0x506897[_0x5cefe0(0x174)]?.['id'][_0x5cefe0(0x106)](),_0x44ac53=_0x506897[_0x5cefe0(0x174)]?.['username'],_0x4dfa11=_0x506897[_0x5cefe0(0x174)]?.[_0x5cefe0(0x163)],_0x2d2d27=_0x506897[_0x5cefe0(0x174)]?.[_0x5cefe0(0x1a4)];if(!_0x52bcf3)return;try{let _0x1441f2=await database_1[_0x5cefe0(0x119)][_0x5cefe0(0x123)][_0x5cefe0(0x16c)]({'where':{'telegramId':_0x52bcf3},'include':{'shop':!![]}});!_0x1441f2?(_0x1441f2=await database_1[_0x5cefe0(0x119)]['telegramUser']['create']({'data':{'telegramId':_0x52bcf3,'username':_0x44ac53,'firstName':_0x4dfa11,'lastName':_0x2d2d27,'isVerified':![],'shopId':null},'include':{'shop':!![]}}),console[_0x5cefe0(0x152)](_0x5cefe0(0xe6)+_0x52bcf3+_0x5cefe0(0x1b7)+_0x44ac53+')')):_0x1441f2=await database_1[_0x5cefe0(0x119)]['telegramUser'][_0x5cefe0(0x107)]({'where':{'telegramId':_0x52bcf3},'data':{'username':_0x44ac53,'firstName':_0x4dfa11,'lastName':_0x2d2d27},'include':{'shop':!![]}}),_0x1441f2[_0x5cefe0(0x10f)]&&_0x1441f2[_0x5cefe0(0x156)]&&_0x1441f2[_0x5cefe0(0x11c)]?await this[_0x5cefe0(0x19a)]?.[_0x5cefe0(0x165)](_0x34000d,_0x5cefe0(0x166)+(_0x5cefe0(0x195)+_0x1441f2[_0x5cefe0(0x11c)][_0x5cefe0(0x157)]+'*\x0a')+(_0x5cefe0(0x149)+_0x1441f2[_0x5cefe0(0x11c)][_0x5cefe0(0x12c)]+_0x5cefe0(0x1be))+'üîî\x20–í—ã\x20–ø–æ–ª—É—á–∞–µ—Ç–µ\x20—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è\x20–æ:\x0a'+_0x5cefe0(0x15b)+'‚Ä¢\x20–ò–∑–º–µ–Ω–µ–Ω–∏–∏\x20—Å—Ç–∞—Ç—É—Å–∞\x20–ø–ª–∞—Ç–µ–∂–µ–π\x0a'+'‚Ä¢\x20–í—ã–ø–ª–∞—Ç–∞—Ö\x0a\x0a'+_0x5cefe0(0xdb)+'/status\x20-\x20–ø—Ä–æ–≤–µ—Ä–∏—Ç—å\x20—Å—Ç–∞—Ç—É—Å\x20–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è\x0a'+'/disconnect\x20-\x20–æ—Ç–∫–ª—é—á–∏—Ç—å—Å—è\x20–æ—Ç\x20—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π',{'parse_mode':_0x5cefe0(0x19b)}):(_0x1441f2['shopId']&&!_0x1441f2[_0x5cefe0(0x10f)]&&(await database_1[_0x5cefe0(0x119)][_0x5cefe0(0x123)]['update']({'where':{'telegramId':_0x52bcf3},'data':{'shopId':null,'isVerified':![]}}),console[_0x5cefe0(0x152)]('üîÑ\x20Reset\x20incomplete\x20verification\x20for\x20user\x20'+_0x52bcf3)),await this[_0x5cefe0(0x19a)]?.[_0x5cefe0(0x165)](_0x34000d,_0x5cefe0(0x191)+'–î–ª—è\x20–ø–æ–ª—É—á–µ–Ω–∏—è\x20—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π\x20–æ\x20–ø–ª–∞—Ç–µ–∂–∞—Ö,\x20–ø–æ–∂–∞–ª—É–π—Å—Ç–∞:\x0a\x0a'+_0x5cefe0(0x111)+_0x5cefe0(0x113)+'–í—ã\x20–º–æ–∂–µ—Ç–µ\x20–æ—Ç–ø—Ä–∞–≤–∏—Ç—å\x20–∏—Ö\x20–≤\x20–æ–¥–Ω–æ–º\x20—Å–æ–æ–±—â–µ–Ω–∏–∏\x20—á–µ—Ä–µ–∑\x20–ø–µ—Ä–µ–Ω–æ—Å\x20—Å—Ç—Ä–æ–∫–∏\x20–∏–ª–∏\x20–æ—Ç–¥–µ–ª—å–Ω—ã–º–∏\x20—Å–æ–æ–±—â–µ–Ω–∏—è–º–∏:\x0a\x0a'+_0x5cefe0(0x172)+'`appple`\x0a'+_0x5cefe0(0xe0)+_0x5cefe0(0x15e),{'parse_mode':_0x5cefe0(0x19b)}));}catch(_0x27f50b){console[_0x5cefe0(0x136)](_0x5cefe0(0x147),_0x27f50b),await this[_0x5cefe0(0x19a)]?.[_0x5cefe0(0x165)](_0x34000d,_0x5cefe0(0x1ac));}}),this[_0xe7831b(0x19a)][_0xe7831b(0x1bb)](/\/disconnect/,async _0x566ade=>{const _0x2ff199=_0xe7831b,_0x2b658b=_0x566ade[_0x2ff199(0x16b)]['id'],_0x187a9f=_0x566ade[_0x2ff199(0x174)]?.['id'][_0x2ff199(0x106)]();if(!_0x187a9f)return;try{const _0x24b8c8=await database_1['default'][_0x2ff199(0x123)][_0x2ff199(0x16c)]({'where':{'telegramId':_0x187a9f},'include':{'shop':!![]}});if(!_0x24b8c8||!_0x24b8c8[_0x2ff199(0x10f)]||!_0x24b8c8[_0x2ff199(0x156)]){await this[_0x2ff199(0x19a)]?.[_0x2ff199(0x165)](_0x2b658b,'‚ùå\x20–í—ã\x20–Ω–µ\x20–ø–æ–¥–∫–ª—é—á–µ–Ω—ã\x20–∫\x20—Å–∏—Å—Ç–µ–º–µ\x20—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.');return;}const _0x8e2bf4=_0x24b8c8[_0x2ff199(0x11c)]?.[_0x2ff199(0x157)]||_0x2ff199(0x14a);await database_1[_0x2ff199(0x119)][_0x2ff199(0x123)][_0x2ff199(0x107)]({'where':{'telegramId':_0x187a9f},'data':{'shopId':null,'isVerified':![]}}),console[_0x2ff199(0x152)](_0x2ff199(0xf2)+_0x187a9f+_0x2ff199(0x17a)+_0x24b8c8[_0x2ff199(0x156)]),await this[_0x2ff199(0x19a)]?.[_0x2ff199(0x165)](_0x2b658b,_0x2ff199(0x1b6)+_0x8e2bf4+_0x2ff199(0x122)+_0x2ff199(0x13c),{'parse_mode':_0x2ff199(0x19b)});}catch(_0x3e30bf){console[_0x2ff199(0x136)](_0x2ff199(0x1a6),_0x3e30bf),await this[_0x2ff199(0x19a)]?.['sendMessage'](_0x2b658b,_0x2ff199(0x1ac));}}),this[_0xe7831b(0x19a)][_0xe7831b(0x1bb)](/\/status/,async _0x14d536=>{const _0x317506=_0xe7831b,_0x126163=_0x14d536['chat']['id'],_0x295898=_0x14d536['from']?.['id'][_0x317506(0x106)]();if(!_0x295898)return;try{const _0x42ef44=await database_1[_0x317506(0x119)][_0x317506(0x123)]['findUnique']({'where':{'telegramId':_0x295898},'include':{'shop':!![]}});if(!_0x42ef44){await this[_0x317506(0x19a)]?.[_0x317506(0x165)](_0x126163,'‚ùå\x20–í—ã\x20–Ω–µ\x20–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã\x20–≤\x20—Å–∏—Å—Ç–µ–º–µ.\x0a\x0a'+_0x317506(0x11d));return;}if(!_0x42ef44['isVerified']||!_0x42ef44[_0x317506(0x156)]||!_0x42ef44['shop']){await this['bot']?.['sendMessage'](_0x126163,_0x317506(0x1ae)+_0x317506(0x1ba));return;}await this['bot']?.[_0x317506(0x165)](_0x126163,'üìä\x20*–°—Ç–∞—Ç—É—Å\x20–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è*\x0a\x0a'+(_0x317506(0x180)+_0x42ef44[_0x317506(0x11c)][_0x317506(0x157)]+'*\x0a')+(_0x317506(0x142)+_0x42ef44[_0x317506(0x11c)]['username']+'`\x0a')+('üìÖ\x20–î–∞—Ç–∞\x20–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:\x20'+_0x42ef44[_0x317506(0x135)][_0x317506(0x1a5)](_0x317506(0x14c))+'\x0a\x0a')+_0x317506(0x1bf)+'–ö–æ–º–∞–Ω–¥—ã:\x0a'+_0x317506(0x154),{'parse_mode':_0x317506(0x19b)});}catch(_0x5a4b59){console[_0x317506(0x136)](_0x317506(0x12b),_0x5a4b59),await this[_0x317506(0x19a)]?.[_0x317506(0x165)](_0x126163,_0x317506(0x1ac));}}),this[_0xe7831b(0x19a)][_0xe7831b(0x1bb)](/\/debug/,async _0x1c0983=>{const _0x302569=_0xe7831b,_0x23762c=_0x1c0983['chat']['id'],_0x4d71b1=_0x1c0983[_0x302569(0x174)]?.['id'][_0x302569(0x106)]();if(!_0x4d71b1)return;try{const _0x1eafb6=await database_1[_0x302569(0x119)][_0x302569(0x11c)][_0x302569(0x181)]({'select':{'id':!![],'name':!![],'username':!![],'status':!![],'publicKey':!![]},'take':0xa});let _0x20f428='üîç\x20*–û—Ç–ª–∞–¥–æ—á–Ω–∞—è\x20–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è*\x0a\x0a';_0x20f428+=_0x302569(0x18d)+_0x4d71b1+_0x302569(0x1be),_0x20f428+='üè™\x20–î–æ—Å—Ç—É–ø–Ω—ã–µ\x20–º–∞–≥–∞–∑–∏–Ω—ã\x20–≤\x20—Å–∏—Å—Ç–µ–º–µ:\x0a',_0x1eafb6[_0x302569(0xf3)]((_0x5ec53a,_0x9cf262)=>{const _0x51950b=_0x302569;_0x20f428+=_0x9cf262+0x1+'.\x20*'+_0x5ec53a['name']+'*\x0a',_0x20f428+=_0x51950b(0xef)+_0x5ec53a[_0x51950b(0x12c)]+'`\x0a',_0x20f428+=_0x51950b(0x161)+_0x5ec53a[_0x51950b(0xff)]+'\x0a',_0x20f428+=_0x51950b(0x1a3)+_0x5ec53a['publicKey'][_0x51950b(0x104)](0x0,0xf)+_0x51950b(0x193);}),await this['bot']?.[_0x302569(0x165)](_0x23762c,_0x20f428,{'parse_mode':_0x302569(0x19b)});}catch(_0x1086aa){console[_0x302569(0x136)](_0x302569(0x129),_0x1086aa),await this[_0x302569(0x19a)]?.[_0x302569(0x165)](_0x23762c,'‚ùå\x20–ü—Ä–æ–∏–∑–æ—à–ª–∞\x20–æ—à–∏–±–∫–∞\x20–ø—Ä–∏\x20–ø–æ–ª—É—á–µ–Ω–∏–∏\x20–æ—Ç–ª–∞–¥–æ—á–Ω–æ–π\x20–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.');}}),this[_0xe7831b(0x19a)]['on'](_0xe7831b(0x153),async _0x2e83ef=>{const _0x149e01=_0xe7831b;if(_0x2e83ef[_0x149e01(0x14d)]?.[_0x149e01(0x13f)]('/'))return;const _0x434e3f=_0x2e83ef['chat']['id'],_0x1ee05b=_0x2e83ef['from']?.['id'][_0x149e01(0x106)](),_0x1645fe=_0x2e83ef[_0x149e01(0x14d)]?.['trim']();if(!_0x1ee05b||!_0x1645fe)return;try{const _0x35c4a2=await database_1[_0x149e01(0x119)][_0x149e01(0x123)][_0x149e01(0x16c)]({'where':{'telegramId':_0x1ee05b},'include':{'shop':!![]}});if(!_0x35c4a2){await this['bot']?.['sendMessage'](_0x434e3f,_0x149e01(0x102));return;}if(_0x35c4a2['isVerified']&&_0x35c4a2[_0x149e01(0x156)]&&_0x35c4a2[_0x149e01(0x11c)]){await this[_0x149e01(0x19a)]?.[_0x149e01(0x165)](_0x434e3f,_0x149e01(0x184)+_0x35c4a2['shop'][_0x149e01(0x157)]+_0x149e01(0x122)+'–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ\x20/status\x20–¥–ª—è\x20–ø—Ä–æ–≤–µ—Ä–∫–∏\x20—Å—Ç–∞—Ç—É—Å–∞\x20–∏–ª–∏\x20/disconnect\x20–¥–ª—è\x20–æ—Ç–∫–ª—é—á–µ–Ω–∏—è.',{'parse_mode':_0x149e01(0x19b)});return;}const _0x2d6a63=_0x1645fe[_0x149e01(0xf8)]('\x0a')[_0x149e01(0x18f)](_0x180302=>_0x180302['trim']())[_0x149e01(0x188)](_0x58a558=>_0x58a558[_0x149e01(0x1b9)]>0x0);if(_0x2d6a63[_0x149e01(0x1b9)]===0x2){const [_0x44c443,_0x5b5c42]=_0x2d6a63;await this['handleMultilineVerification'](_0x434e3f,_0x1ee05b,_0x44c443,_0x5b5c42);}else{if(_0x2d6a63[_0x149e01(0x1b9)]===0x1){const _0x318dd8=_0x2d6a63[0x0];if(_0x318dd8[_0x149e01(0x1b9)]>=0x3&&_0x318dd8['length']<=0x32&&/^[a-zA-Z0-9_]+$/['test'](_0x318dd8))await this[_0x149e01(0x19c)](_0x434e3f,_0x1ee05b,_0x318dd8);else _0x318dd8['startsWith']('pk_')||_0x318dd8[_0x149e01(0x13f)]('sk_')?await this[_0x149e01(0x1a8)](_0x434e3f,_0x1ee05b,_0x318dd8):await this[_0x149e01(0x19a)]?.[_0x149e01(0x165)](_0x434e3f,_0x149e01(0x112)+_0x149e01(0x101)+_0x149e01(0x16d)+'2Ô∏è‚É£\x20–ó–∞—Ç–µ–º\x20–≤–∞—à\x20API\x20–∫–ª—é—á\x20(–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è\x20—Å\x20pk\x5c_\x20–∏–ª–∏\x20sk\x5c_)\x0a\x0a'+_0x149e01(0x192)+_0x149e01(0xea)+_0x149e01(0x17c),{'parse_mode':'Markdown'});}else await this[_0x149e01(0x19a)]?.[_0x149e01(0x165)](_0x434e3f,'‚ùå\x20–ù–µ–≤–µ—Ä–Ω—ã–π\x20—Ñ–æ—Ä–º–∞—Ç\x20–¥–∞–Ω–Ω—ã—Ö.\x0a\x0a'+'–û—Ç–ø—Ä–∞–≤—å—Ç–µ\x20username\x20–∏\x20API\x20–∫–ª—é—á\x20–≤\x20–æ–¥–Ω–æ–º\x20—Å–æ–æ–±—â–µ–Ω–∏–∏\x20—á–µ—Ä–µ–∑\x20–ø–µ—Ä–µ–Ω–æ—Å\x20—Å—Ç—Ä–æ–∫–∏\x20–∏–ª–∏\x20–æ—Ç–¥–µ–ª—å–Ω—ã–º–∏\x20—Å–æ–æ–±—â–µ–Ω–∏—è–º–∏.\x0a\x0a'+'–ü—Ä–∏–º–µ—Ä:\x0a'+_0x149e01(0xea)+_0x149e01(0x17c),{'parse_mode':_0x149e01(0x19b)});}}catch(_0xa3f6eb){console[_0x149e01(0x136)](_0x149e01(0x190),_0xa3f6eb),await this[_0x149e01(0x19a)]?.['sendMessage'](_0x434e3f,_0x149e01(0x1ac));}}),this[_0xe7831b(0x19a)]['on'](_0xe7831b(0x136),_0x5f4d5f=>{const _0x5852ff=_0xe7831b;console[_0x5852ff(0x136)]('Telegram\x20bot\x20error:',_0x5f4d5f);}),this[_0xe7831b(0x19a)]['on'](_0xe7831b(0x12a),_0x591f34=>{const _0x18fd05=_0xe7831b;console[_0x18fd05(0x136)]('Telegram\x20bot\x20polling\x20error:',_0x591f34);});}async[a49_0x50e73d(0x19f)](_0x2fc53d,_0x256bc6,_0x2dbe75,_0x570d05){const _0x41e8f2=a49_0x50e73d;try{console['log'](_0x41e8f2(0x108)+_0x256bc6+':\x20username=\x22'+_0x2dbe75+_0x41e8f2(0x13a)+_0x570d05[_0x41e8f2(0x104)](0x0,0xa)+_0x41e8f2(0x19d));if(!_0x2dbe75||_0x2dbe75[_0x41e8f2(0x1b9)]<0x3||_0x2dbe75['length']>0x32||!/^[a-zA-Z0-9_]+$/[_0x41e8f2(0x198)](_0x2dbe75)){await this[_0x41e8f2(0x19a)]?.[_0x41e8f2(0x165)](_0x2fc53d,_0x41e8f2(0x13d)+_0x2dbe75+_0x41e8f2(0x1be)+'Username\x20–¥–æ–ª–∂–µ–Ω\x20—Å–æ–¥–µ—Ä–∂–∞—Ç—å\x20—Ç–æ–ª—å–∫–æ\x20–±—É–∫–≤—ã,\x20—Ü–∏—Ñ—Ä—ã\x20–∏\x20–ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ\x20(3-50\x20—Å–∏–º–≤–æ–ª–æ–≤).',{'parse_mode':'Markdown'});return;}if(!_0x570d05||!_0x570d05[_0x41e8f2(0x13f)]('pk_')&&!_0x570d05[_0x41e8f2(0x13f)](_0x41e8f2(0x158))){await this[_0x41e8f2(0x19a)]?.[_0x41e8f2(0x165)](_0x2fc53d,'‚ùå\x20–ù–µ–≤–µ—Ä–Ω—ã–π\x20—Ñ–æ—Ä–º–∞—Ç\x20API\x20–∫–ª—é—á–∞.\x0a\x0a'+_0x41e8f2(0x18c),{'parse_mode':_0x41e8f2(0x19b)});return;}const _0x2809cf=await database_1[_0x41e8f2(0x119)][_0x41e8f2(0x11c)][_0x41e8f2(0x16c)]({'where':{'username':_0x2dbe75},'select':{'id':!![],'name':!![],'username':!![],'status':!![],'publicKey':!![],'secretKey':!![]}});if(!_0x2809cf){const _0x1e2de6=await database_1[_0x41e8f2(0x119)][_0x41e8f2(0x11c)][_0x41e8f2(0x181)]({'select':{'username':!![],'name':!![]},'take':0x5});let _0x53eddb=_0x41e8f2(0x1a9)+_0x2dbe75+_0x41e8f2(0x178);_0x1e2de6[_0x41e8f2(0x1b9)]>0x0?(_0x53eddb+=_0x41e8f2(0x160),_0x1e2de6[_0x41e8f2(0xf3)](_0x44ec76=>{const _0x26754f=_0x41e8f2;_0x53eddb+='‚Ä¢\x20`'+_0x44ec76[_0x26754f(0x12c)]+_0x26754f(0x17e)+_0x44ec76[_0x26754f(0x157)]+')\x0a';}),_0x53eddb+=_0x41e8f2(0x131)):_0x53eddb+=_0x41e8f2(0xfa);await this[_0x41e8f2(0x19a)]?.[_0x41e8f2(0x165)](_0x2fc53d,_0x53eddb,{'parse_mode':_0x41e8f2(0x19b)});return;}if(_0x2809cf[_0x41e8f2(0xff)]!==_0x41e8f2(0x1a2)){await this[_0x41e8f2(0x19a)]?.[_0x41e8f2(0x165)](_0x2fc53d,_0x41e8f2(0x138)+_0x2dbe75+'`\x20–Ω–µ–∞–∫—Ç–∏–≤–µ–Ω.\x0a\x0a'+_0x41e8f2(0x10c),{'parse_mode':_0x41e8f2(0x19b)});return;}if(_0x2809cf[_0x41e8f2(0x115)]!==_0x570d05&&_0x2809cf['secretKey']!==_0x570d05){await this[_0x41e8f2(0x19a)]?.[_0x41e8f2(0x165)](_0x2fc53d,'‚ùå\x20API\x20–∫–ª—é—á\x20–Ω–µ\x20—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç\x20–º–∞–≥–∞–∑–∏–Ω—É\x20`'+_0x2dbe75+_0x41e8f2(0x164)+'–ü—Ä–æ–≤–µ—Ä—å—Ç–µ\x20–ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å\x20–∫–ª—é—á–∞\x20–∏\x20–ø–æ–ø—Ä–æ–±—É–π—Ç–µ\x20—Å–Ω–æ–≤–∞.\x0a\x0a'+_0x41e8f2(0x186),{'parse_mode':_0x41e8f2(0x19b)});return;}const _0x53b24b=await database_1[_0x41e8f2(0x119)][_0x41e8f2(0x123)][_0x41e8f2(0x12f)]({'where':{'shopId':_0x2809cf['id'],'isVerified':!![],'telegramId':{'not':_0x256bc6}}});if(_0x53b24b){await this[_0x41e8f2(0x19a)]?.['sendMessage'](_0x2fc53d,_0x41e8f2(0xfd)+_0x2dbe75+'`\x20—É–∂–µ\x20–ø–æ–¥–∫–ª—é—á–µ–Ω\x20–¥—Ä—É–≥–æ–π\x20Telegram\x20–∞–∫–∫–∞—É–Ω—Ç.\x0a\x0a'+'–°–Ω–∞—á–∞–ª–∞\x20–æ—Ç–∫–ª—é—á–∏—Ç–µ\x20–ø—Ä–µ–¥—ã–¥—É—â–∏–π\x20–∞–∫–∫–∞—É–Ω—Ç\x20–∏–ª–∏\x20–æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å\x20–∫\x20–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É.',{'parse_mode':_0x41e8f2(0x19b)});return;}await database_1[_0x41e8f2(0x119)][_0x41e8f2(0x123)][_0x41e8f2(0x107)]({'where':{'telegramId':_0x256bc6},'data':{'shopId':_0x2809cf['id'],'isVerified':!![]}}),await this[_0x41e8f2(0x19a)]?.[_0x41e8f2(0x165)](_0x2fc53d,_0x41e8f2(0x18b)+_0x41e8f2(0x133)+(_0x41e8f2(0x128)+_0x2809cf[_0x41e8f2(0x157)]+'*\x0a')+(_0x41e8f2(0x142)+_0x2809cf['username']+'`\x0a\x0a')+_0x41e8f2(0x116)+_0x41e8f2(0x15b)+_0x41e8f2(0xfb)+_0x41e8f2(0x162)+_0x41e8f2(0xde)+'–ö–æ–º–∞–Ω–¥—ã:\x0a'+'/status\x20-\x20–ø—Ä–æ–≤–µ—Ä–∏—Ç—å\x20—Å—Ç–∞—Ç—É—Å\x20–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è\x0a'+_0x41e8f2(0x154),{'parse_mode':_0x41e8f2(0x19b)}),console[_0x41e8f2(0x152)](_0x41e8f2(0x143)+_0x256bc6+_0x41e8f2(0x1c6)+_0x2809cf[_0x41e8f2(0x12c)]+_0x41e8f2(0x1bd));}catch(_0x5a1b9e){console[_0x41e8f2(0x136)]('Error\x20in\x20handleMultilineVerification:',_0x5a1b9e),await this['bot']?.[_0x41e8f2(0x165)](_0x2fc53d,_0x41e8f2(0x125));}}async[a49_0x50e73d(0x19c)](_0x2a61e3,_0x58294e,_0x4eba50){const _0x3d309d=a49_0x50e73d;try{console[_0x3d309d(0x152)](_0x3d309d(0x121)+_0x58294e+':\x20username=\x22'+_0x4eba50+'\x22');const _0x1aa578=await database_1[_0x3d309d(0x119)][_0x3d309d(0x11c)][_0x3d309d(0x16c)]({'where':{'username':_0x4eba50},'select':{'id':!![],'name':!![],'username':!![],'status':!![]}});if(!_0x1aa578){const _0x563aa7=await database_1[_0x3d309d(0x119)][_0x3d309d(0x11c)][_0x3d309d(0x181)]({'select':{'username':!![],'name':!![]},'take':0x5});let _0x6b88da=_0x3d309d(0x1a9)+_0x4eba50+_0x3d309d(0x178);_0x563aa7[_0x3d309d(0x1b9)]>0x0?(_0x6b88da+=_0x3d309d(0x160),_0x563aa7[_0x3d309d(0xf3)](_0x1d28c1=>{const _0x443f04=_0x3d309d;_0x6b88da+=_0x443f04(0x114)+_0x1d28c1[_0x443f04(0x12c)]+_0x443f04(0x17e)+_0x1d28c1['name']+')\x0a';}),_0x6b88da+=_0x3d309d(0x131)):_0x6b88da+=_0x3d309d(0xfa);await this['bot']?.[_0x3d309d(0x165)](_0x2a61e3,_0x6b88da,{'parse_mode':'Markdown'});return;}if(_0x1aa578[_0x3d309d(0xff)]!==_0x3d309d(0x1a2)){await this[_0x3d309d(0x19a)]?.[_0x3d309d(0x165)](_0x2a61e3,'‚ùå\x20–ú–∞–≥–∞–∑–∏–Ω\x20`'+_0x4eba50+_0x3d309d(0x134)+_0x3d309d(0x10c),{'parse_mode':_0x3d309d(0x19b)});return;}await database_1[_0x3d309d(0x119)]['telegramUser']['update']({'where':{'telegramId':_0x58294e},'data':{'shopId':_0x1aa578['id'],'isVerified':![]}}),await this[_0x3d309d(0x19a)]?.[_0x3d309d(0x165)](_0x2a61e3,'‚úÖ\x20Username\x20`'+_0x4eba50+_0x3d309d(0x183)+('–ú–∞–≥–∞–∑–∏–Ω:\x20*'+_0x1aa578[_0x3d309d(0x157)]+_0x3d309d(0x10b))+_0x3d309d(0x197),{'parse_mode':'Markdown'}),console[_0x3d309d(0x152)](_0x3d309d(0xec)+_0x58294e+_0x3d309d(0x1af)+_0x1aa578[_0x3d309d(0x12c)]);}catch(_0x1ee5fc){console['error'](_0x3d309d(0xf0),_0x1ee5fc),await this[_0x3d309d(0x19a)]?.['sendMessage'](_0x2a61e3,'‚ùå\x20–ü—Ä–æ–∏–∑–æ—à–ª–∞\x20–æ—à–∏–±–∫–∞\x20–ø—Ä–∏\x20–ø—Ä–æ–≤–µ—Ä–∫–µ\x20username.');}}async['handleApiKeyVerification'](_0x2c58d7,_0x1060d0,_0x2f1f66){const _0x117793=a49_0x50e73d;try{console[_0x117793(0x152)]('üîÑ\x20Processing\x20API\x20key\x20verification\x20for\x20user\x20'+_0x1060d0+':\x20apiKey=\x22'+_0x2f1f66[_0x117793(0x104)](0x0,0xa)+_0x117793(0x19d));const _0x1f76cb=await database_1[_0x117793(0x119)][_0x117793(0x123)][_0x117793(0x16c)]({'where':{'telegramId':_0x1060d0},'include':{'shop':!![]}});if(!_0x1f76cb?.[_0x117793(0x156)]){await this[_0x117793(0x19a)]?.[_0x117793(0x165)](_0x2c58d7,'‚ùå\x20–°–Ω–∞—á–∞–ª–∞\x20–æ—Ç–ø—Ä–∞–≤—å—Ç–µ\x20–≤–∞—à\x20username.\x0a\x0a'+_0x117793(0x1c0)+_0x117793(0x1b5)+_0x117793(0x12d));return;}if(_0x1f76cb[_0x117793(0x10f)]){await this[_0x117793(0x19a)]?.[_0x117793(0x165)](_0x2c58d7,'‚úÖ\x20–í—ã\x20—É–∂–µ\x20–ø–æ–¥–∫–ª—é—á–µ–Ω—ã\x20–∫\x20–º–∞–≥–∞–∑–∏–Ω—É\x20*'+(_0x1f76cb[_0x117793(0x11c)]?.['name']||_0x117793(0x10d))+'*.\x0a\x0a'+_0x117793(0x1b8),{'parse_mode':_0x117793(0x19b)});return;}const _0x4c32f4=await database_1[_0x117793(0x119)][_0x117793(0x11c)]['findFirst']({'where':{'id':_0x1f76cb[_0x117793(0x156)],'OR':[{'publicKey':_0x2f1f66},{'secretKey':_0x2f1f66}]}});if(!_0x4c32f4){await this[_0x117793(0x19a)]?.['sendMessage'](_0x2c58d7,'‚ùå\x20API\x20–∫–ª—é—á\x20–Ω–µ\x20—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç\x20–º–∞–≥–∞–∑–∏–Ω—É.\x0a\x0a'+_0x117793(0xeb)+_0x117793(0x186),{'parse_mode':'Markdown'}),await database_1[_0x117793(0x119)][_0x117793(0x123)][_0x117793(0x107)]({'where':{'telegramId':_0x1060d0},'data':{'shopId':null,'isVerified':![]}}),console[_0x117793(0x152)](_0x117793(0xf9)+_0x1060d0+_0x117793(0x140));return;}const _0x16deed=await database_1[_0x117793(0x119)]['telegramUser'][_0x117793(0x12f)]({'where':{'shopId':_0x4c32f4['id'],'isVerified':!![],'telegramId':{'not':_0x1060d0}}});if(_0x16deed){await this[_0x117793(0x19a)]?.[_0x117793(0x165)](_0x2c58d7,_0x117793(0xfd)+_0x4c32f4[_0x117793(0x12c)]+_0x117793(0x1ad)+'–°–Ω–∞—á–∞–ª–∞\x20–æ—Ç–∫–ª—é—á–∏—Ç–µ\x20–ø—Ä–µ–¥—ã–¥—É—â–∏–π\x20–∞–∫–∫–∞—É–Ω—Ç\x20–∏–ª–∏\x20–æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å\x20–∫\x20–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É.',{'parse_mode':_0x117793(0x19b)}),await database_1[_0x117793(0x119)][_0x117793(0x123)][_0x117793(0x107)]({'where':{'telegramId':_0x1060d0},'data':{'shopId':null,'isVerified':![]}});return;}await database_1[_0x117793(0x119)]['telegramUser'][_0x117793(0x107)]({'where':{'telegramId':_0x1060d0},'data':{'isVerified':!![]}}),await this['bot']?.[_0x117793(0x165)](_0x2c58d7,'üéâ\x20*–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!*\x0a\x0a'+_0x117793(0x133)+(_0x117793(0x128)+_0x4c32f4[_0x117793(0x157)]+'*\x0a')+(_0x117793(0x142)+_0x4c32f4[_0x117793(0x12c)]+'`\x0a\x0a')+_0x117793(0x116)+'‚Ä¢\x20–ù–æ–≤—ã—Ö\x20–ø–ª–∞—Ç–µ–∂–∞—Ö\x0a'+_0x117793(0xfb)+_0x117793(0x162)+_0x117793(0xde)+_0x117793(0xdb)+_0x117793(0x11a)+_0x117793(0x154),{'parse_mode':_0x117793(0x19b)}),console[_0x117793(0x152)](_0x117793(0x143)+_0x1060d0+_0x117793(0x1c6)+_0x4c32f4[_0x117793(0x12c)]);}catch(_0x59bb63){console[_0x117793(0x136)](_0x117793(0x177),_0x59bb63),await this[_0x117793(0x19a)]?.[_0x117793(0x165)](_0x2c58d7,_0x117793(0x150));}}async[a49_0x50e73d(0xed)](_0x1eea63,_0x197c5d,_0x280436){const _0x74eb2b=a49_0x50e73d;if(!this[_0x74eb2b(0x19a)]){console[_0x74eb2b(0x173)](_0x74eb2b(0xe2));return;}try{const _0x4d5b51=await database_1[_0x74eb2b(0x119)][_0x74eb2b(0x123)][_0x74eb2b(0x181)]({'where':{'shopId':_0x1eea63,'isVerified':!![]}});if(_0x4d5b51[_0x74eb2b(0x1b9)]===0x0){console['log']('No\x20verified\x20Telegram\x20users\x20found\x20for\x20shop\x20'+_0x1eea63);return;}const _0x396295=_0x4d5b51['map'](async _0x1e2dad=>{const _0x5c2f9f=_0x74eb2b;try{await this[_0x5c2f9f(0x19a)]?.[_0x5c2f9f(0x165)](_0x1e2dad[_0x5c2f9f(0x13e)],_0x197c5d,_0x280436),console[_0x5c2f9f(0x152)](_0x5c2f9f(0xe1)+_0x1e2dad[_0x5c2f9f(0x13e)]);}catch(_0x2e7291){console[_0x5c2f9f(0x136)](_0x5c2f9f(0xe3)+_0x1e2dad[_0x5c2f9f(0x13e)]+':',_0x2e7291),_0x2e7291 instanceof Error&&(_0x2e7291[_0x5c2f9f(0x153)][_0x5c2f9f(0x155)]('blocked')||_0x2e7291['message'][_0x5c2f9f(0x155)](_0x5c2f9f(0x159))||_0x2e7291['message'][_0x5c2f9f(0x155)](_0x5c2f9f(0x139)))&&(await database_1[_0x5c2f9f(0x119)][_0x5c2f9f(0x123)][_0x5c2f9f(0x107)]({'where':{'id':_0x1e2dad['id']},'data':{'isVerified':![]}}),console[_0x5c2f9f(0x152)](_0x5c2f9f(0xe9)+_0x1e2dad[_0x5c2f9f(0x13e)]+_0x5c2f9f(0x145)));}});await Promise['allSettled'](_0x396295);}catch(_0x47df51){console[_0x74eb2b(0x136)]('Error\x20sending\x20shop\x20notification:',_0x47df51);}}async[a49_0x50e73d(0x16a)](_0x3fd1e1,_0x444937,_0x419a26){const _0x5d5b56=a49_0x50e73d,_0x496ecf={'created':'üÜï','paid':'‚úÖ','failed':'‚ùå','expired':'‚è∞','refund':'üîÑ','chargeback':'‚ö†Ô∏è'},_0x14e0cb={'created':_0x5d5b56(0x1c5),'paid':'–ü–ª–∞—Ç–µ–∂\x20—É—Å–ø–µ—à–Ω–æ\x20–æ–ø–ª–∞—á–µ–Ω','failed':_0x5d5b56(0x170),'expired':_0x5d5b56(0x100),'refund':'–í–æ–∑–≤—Ä–∞—Ç\x20–ø–ª–∞—Ç–µ–∂–∞','chargeback':_0x5d5b56(0x130)},_0x50df64=_0x496ecf[_0x419a26],_0x56379b=_0x14e0cb[_0x419a26];let _0x300dc0=_0x50df64+'\x20*'+_0x56379b+'*\x0a\x0a'+('üí∞\x20–°—É–º–º–∞:\x20*'+_0x444937[_0x5d5b56(0x1bc)]+'\x20'+_0x444937[_0x5d5b56(0x194)]+'*\x0a')+('üìù\x20Order\x20ID:\x20`'+(_0x444937['orderId']||_0x444937['id'])+'`\x0a')+(_0x5d5b56(0xe8)+_0x444937['id']+'`\x0a')+(_0x5d5b56(0x1c1)+_0x444937[_0x5d5b56(0x146)][_0x5d5b56(0x14f)]()+'`\x0a')+(_0x5d5b56(0xf4)+new Date(_0x444937[_0x5d5b56(0x118)])[_0x5d5b56(0x169)](_0x5d5b56(0x14c))+'\x0a');_0x419a26===_0x5d5b56(0x1a1)&&_0x444937['chargebackAmount']&&(_0x300dc0+=_0x5d5b56(0x151)+_0x444937[_0x5d5b56(0x117)]+'\x20USDT*\x0a'),_0x444937[_0x5d5b56(0x171)]&&(_0x300dc0+='üìù\x20–ó–∞–º–µ—Ç–∫–∏:\x20'+_0x444937[_0x5d5b56(0x171)]+'\x0a'),await this[_0x5d5b56(0xed)](_0x3fd1e1,_0x300dc0,{'parse_mode':_0x5d5b56(0x19b)});}async['sendPayoutNotification'](_0x1edec2,_0x55fcad,_0x4c968a){const _0xfac986=a49_0x50e73d,_0x2b7e78={'created':'üì§','completed':'‚úÖ','rejected':'‚ùå'},_0x4ca5ea={'created':_0xfac986(0x1c2),'completed':_0xfac986(0x14b),'rejected':_0xfac986(0x179)},_0x4ea39c=_0x2b7e78[_0x4c968a],_0x1a1a88=_0x4ca5ea[_0x4c968a],_0x2dc1e7=_0x4ea39c+'\x20*'+_0x1a1a88+_0xfac986(0x10b)+(_0xfac986(0x11b)+_0x55fcad['amount']+_0xfac986(0x105))+(_0xfac986(0x109)+_0x55fcad[_0xfac986(0x187)]+'`\x0a')+('üÜî\x20ID\x20–≤—ã–ø–ª–∞—Ç—ã:\x20`'+_0x55fcad['id']+'`\x0a')+(_0xfac986(0xf4)+new Date(_0x55fcad[_0xfac986(0x118)])[_0xfac986(0x169)](_0xfac986(0x14c))+'\x0a')+(_0x55fcad['txid']?_0xfac986(0xfc)+_0x55fcad[_0xfac986(0x1b1)]+'`':'');await this['sendShopNotification'](_0x1edec2,_0x2dc1e7,{'parse_mode':_0xfac986(0x19b)});}async[a49_0x50e73d(0x16e)](_0x24152c,_0x5cc812){const _0x44cbaf=a49_0x50e73d;try{const _0x26e276=await database_1[_0x44cbaf(0x119)]['shopSettings'][_0x44cbaf(0x16c)]({'where':{'shopId':_0x24152c},'select':{'notificationLogin':!![]}});if(!_0x26e276?.[_0x44cbaf(0x14e)]){console[_0x44cbaf(0x152)](_0x44cbaf(0xdc)+_0x24152c);return;}const _0x2ea50b=_0x5cc812['success']?'üîê':'üö®',_0x2c4c8c=_0x5cc812['success']?_0x44cbaf(0x12e):_0x44cbaf(0x1a7);let _0x24bb51=_0x2ea50b+'\x20*'+_0x2c4c8c+'*\x0a\x0a'+(_0x44cbaf(0x142)+_0x5cc812[_0x44cbaf(0x12c)]+'`\x0a')+(_0x44cbaf(0x175)+_0x5cc812['timestamp'][_0x44cbaf(0x169)](_0x44cbaf(0x14c))+'\x0a');_0x5cc812[_0x44cbaf(0x15f)]&&(_0x24bb51+=_0x44cbaf(0xdf)+_0x5cc812['ipAddress']+'`\x0a');if(_0x5cc812[_0x44cbaf(0x1b2)]){const _0x4a4172=_0x5cc812[_0x44cbaf(0x1b2)][_0x44cbaf(0x1b9)]>0x32?_0x5cc812[_0x44cbaf(0x1b2)]['substring'](0x0,0x32)+'...':_0x5cc812[_0x44cbaf(0x1b2)];_0x24bb51+=_0x44cbaf(0x168)+_0x4a4172+'`\x0a';}!_0x5cc812[_0x44cbaf(0x196)]&&(_0x24bb51+=_0x44cbaf(0xe4)),await this['sendShopNotification'](_0x24152c,_0x24bb51,{'parse_mode':_0x44cbaf(0x19b)}),console[_0x44cbaf(0x152)](_0x44cbaf(0x11e)+_0x24152c+':\x20'+(_0x5cc812[_0x44cbaf(0x196)]?_0x44cbaf(0x196):_0x44cbaf(0xe5)));}catch(_0x238787){console[_0x44cbaf(0x136)](_0x44cbaf(0x16f),_0x238787);}}async[a49_0x50e73d(0x124)](_0x1c897a,_0x537b94){const _0x4e75f2=a49_0x50e73d;try{const _0x2f098f=await database_1[_0x4e75f2(0x119)][_0x4e75f2(0x120)][_0x4e75f2(0x16c)]({'where':{'shopId':_0x1c897a},'select':{'notificationApiError':!![]}});if(!_0x2f098f?.[_0x4e75f2(0x144)]){console[_0x4e75f2(0x152)]('üì±\x20API\x20error\x20notifications\x20disabled\x20for\x20shop\x20'+_0x1c897a);return;}let _0xcb88e2=_0x4e75f2(0xfe)+(_0x4e75f2(0x15d)+_0x537b94[_0x4e75f2(0x187)]+'\x20'+_0x537b94[_0x4e75f2(0x1ab)]+'`\x0a')+('üìÖ\x20–í—Ä–µ–º—è:\x20'+_0x537b94[_0x4e75f2(0x19e)][_0x4e75f2(0x169)]('ru-RU')+'\x0a');_0x537b94[_0x4e75f2(0x15a)]&&(_0xcb88e2+=_0x4e75f2(0xee)+_0x537b94[_0x4e75f2(0x15a)]+'`\x0a'),_0xcb88e2+='‚ùå\x20–û—à–∏–±–∫–∞:\x20`'+_0x537b94[_0x4e75f2(0xf1)]+'`\x0a',_0x537b94['requestId']&&(_0xcb88e2+=_0x4e75f2(0x132)+_0x537b94[_0x4e75f2(0x176)]+'`\x0a'),_0xcb88e2+=_0x4e75f2(0x103),await this['sendShopNotification'](_0x1c897a,_0xcb88e2,{'parse_mode':_0x4e75f2(0x19b)}),console['log'](_0x4e75f2(0x1c3)+_0x1c897a+':\x20'+_0x537b94[_0x4e75f2(0x1ab)]);}catch(_0x48d9f0){console[_0x4e75f2(0x136)](_0x4e75f2(0x141),_0x48d9f0);}}async['sendCustomNotification'](_0x19caf0,_0xa8b83f,_0x53949c){const _0x39feaa=a49_0x50e73d;let _0x272376=_0x39feaa(0x199)+_0xa8b83f+_0x39feaa(0x10b);for(const [_0x4e3a0e,_0xab3cf3]of Object[_0x39feaa(0x185)](_0x53949c)){_0xab3cf3!==null&&_0xab3cf3!==undefined&&(_0x272376+=_0x4e3a0e+':\x20`'+_0xab3cf3+'`\x0a');}await this[_0x39feaa(0xed)](_0x19caf0,_0x272376,{'parse_mode':_0x39feaa(0x19b)});}['getBotInfo'](){const _0x2dc154=a49_0x50e73d;return{'isActive':!!this[_0x2dc154(0x19a)],'username':this['botUsername']};}[a49_0x50e73d(0x1b3)](){const _0x5c3f50=a49_0x50e73d;this[_0x5c3f50(0x19a)]&&(this['bot'][_0x5c3f50(0xe7)](),this[_0x5c3f50(0x19a)]=null,console['log']('üõë\x20Telegram\x20bot\x20stopped'));}}function a49_0x1c15(_0xf3b9cd,_0x3ba3b6){const _0x2caf63=a49_0x2caf();return a49_0x1c15=function(_0x1c15e1,_0x8e47e4){_0x1c15e1=_0x1c15e1-0xdb;let _0x1612a7=_0x2caf63[_0x1c15e1];return _0x1612a7;},a49_0x1c15(_0xf3b9cd,_0x3ba3b6);}exports[a49_0x50e73d(0x17f)]=TelegramBotService,exports['telegramBotService']=new TelegramBotService();