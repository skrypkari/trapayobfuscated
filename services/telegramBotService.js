'use strict';const a87_0x18a5e4=a87_0x5b6f;function a87_0x43ea(){const _0x8105ea=['getGatewayCurrencies','‚ùå\x20Invalid\x20format.\x20Please\x20send\x20exactly\x202\x20parts\x20separated\x20by\x20space:\x0a\x0a','üì±\x20Your\x20Telegram\x20ID:\x20`','isVerified','cmd_contacts','THB','Error\x20handling\x20message:','üìà\x20Conversion\x20\x5c-\x20','userAgent','‚ö†Ô∏è\x20Chargebacks\x20\x5c-\x20','from','882903monyAr','‚úÖ\x20Paid\x20out:\x20','üè™\x20Gateway:\x20`','handleMerchantStatistics','HUF','statusCode','GHS','‚ùå\x20Shop\x20not\x20found.\x20Please\x20start\x20over\x20with\x20/start','cmd_disconnect','__importDefault','totalPaidOut','PHP','CNY','üåê\x20Website','...\x22','shopId','`\x20not\x20found.\x0a\x0a','üá∞üá™','All\x20Time','RUB','üîó\x20Endpoint:\x20`','TelegramBotService','AMD','‚ùå\x20Failed\x20to\x20send\x20notification\x20to\x20Telegram\x20user\x20','../config/database','gateway','üìÖ\x20Yesterday','üîó\x20*Transaction\x20Link:*\x20`','success','findMany','error','No\x20verified\x20Telegram\x20users\x20found\x20for\x20shop\x20','\x20users','message','EXPIRED','üá¶üá±','‚úÖ\x20Welcome\x20back!\x0a\x0a','üì±\x20Notification\x20sent\x20to\x20','Make\x20sure\x20you\x20have\x20the\x20correct\x20username\x20from\x20your\x20account.','Step\x202/4:\x20Select\x20link\x20type','‚úÖ\x20File\x20sent\x20to\x20chat\x20','MNT','MDL','bot','sendDirectFile','‚Ä¢\x20Active\x20payment\x20links\x0a','BHD','8iYInJa','‚Ä¢\x20Amount\x20and\x20network\x0a','üáµüá¨','Check\x20the\x20key\x20and\x20try\x20again.\x0a\x0a','\x20disconnected\x20from\x20shop\x20','üìù\x20Order\x20ID:\x20`','getCurrencyFlag','NPR','‚Ä¢\x20New\x20payments\x0a','\x20users\x20of\x20shop\x20','startsWith','toUpperCase','\x20\x20\x20[LINK](','Gateway\x20-\x20','update','üìä\x20Error\x20code:\x20`','paymentLinkSessions','status','\x0a‚ö†Ô∏è\x20If\x20this\x20wasn\x27t\x20you,\x20change\x20your\x20password\x20immediately!','pl_curr_page_','filter','entries','Expected\x20key\x20format:\x20`pk_...`\x20or\x20`sk_...`','sk_','KHR','cmd_payment_links','allSettled','‚ùå\x20An\x20error\x20occurred\x20while\x20loading\x20payment\x20links.','Please\x20send\x20the\x20amount\x20in\x20','en-US','GATEWAY_ID_MAP','üá∞üá∑','üìù\x20Notes:\x20','sendApiErrorNotification','üîÑ\x20Processing\x20single-line\x20verification\x20for\x20user\x20','üáπüá≠','toLocaleDateString','remitterIban','üîó\x20Payment\x20Links','PGK','pl_cancel','üá∂üá¶','`\x20is\x20inactive.\x0a\x0a','üá¶üá™','pl_gw_','Successful\x20login','üìÖ\x20*Payout\x20Date:*\x20','cmd_status','‚úÖ\x20You\x20have\x20been\x20successfully\x20disconnected\x20from\x20shop\x20*','pl_type_single','üí∞\x20*Amount:*\x20','Error\x20handling\x20/contacts\x20command:','shopSettings','‚ùå\x20An\x20error\x20occurred.\x20Please\x20try\x20again\x20later.','‚úÖ\x20API\x20error\x20notification\x20sent\x20for\x20shop\x20','Error\x20in\x20payment\x20link\x20flow:','üá±üáß','QAR','https://t.me/trapay_sales','N/A','initializeBot','RSD','network','Telegram\x20bot\x20not\x20initialized,\x20cannot\x20send\x20notification','üá∏üáß','‚ùå\x20You\x20are\x20not\x20connected\x20to\x20any\x20shop.\x0a\x0a','‚Ä¢\x20Payment\x20status\x20changes\x0a','Error\x20handling\x20/status\x20command:','‚úÖ\x20Notification\x20sent\x20to\x20Telegram\x20user\x20','ACTIVE','üì±\x20Login\x20notifications\x20disabled\x20for\x20shop\x20','customerName','‚ùå\x20Shop\x20with\x20username\x20`','515ZPgRBV','‚ùå\x20Failed\x20to\x20send\x20notification\x20to\x20all\x20users:','‚ùå\x20An\x20error\x20occurred.\x20Please\x20try\x20again.','CHARGEBACK','üá∞üáº','API\x20key\x20must\x20start\x20with\x20`pk\x5c_`\x20or\x20`sk\x5c_`.','BYN','‚ôæÔ∏è\x20Multi\x20Use','sendCustomNotification','‚úÖ\x20File\x20sent\x20to\x20','desc','join','map','GBP','‚ùå\x20Failed\x20to\x20send\x20message\x20to\x20user\x20','üá≥üá¨','RON','üáºüá∏','Error\x20getting\x20merchant\x20statistics:','\x0aüí°\x20Check\x20your\x20request\x20or\x20contact\x20support.','üáØüáµ','‚ùå\x20Error\x20sending\x20file\x20to\x20shop:','‚ùå\x20You\x20are\x20not\x20connected\x20to\x20the\x20notification\x20system.','üá¥üá≤','üá≥üá¥','üìß\x20Email:\x20`','callback_query','üáßüá≠','üí¨\x20Support','üáÆüá∂','JPY','amountUSDT','NGN','get','stats_this_month','MMK','üí∞\x20Amount:\x20*','editMessageText','VND','PKR','üáµüá∞','HKD','AZN','sendPaymentNotification','‚è±Ô∏è\x20*Period:*\x20','push','*\x0a\x0a','\x20-\x20','handlePaymentLinkFlow','pl_curr_','toLocaleString','üîç\x20*Debug\x20Information*\x0a\x0a','üáπüá≥','CZK','https://app.trapay.uk/login','üíª\x20Browser:\x20`','Markdown','.pdf','name','‚ûï\x20Create\x20New\x20Link','üá®üá≠','MXN','üá®üáø','\x20(e.g.,\x20100)','LAK','‚¨ÖÔ∏è\x20Back','üí∏\x20Payouts','polling_error','chargeback','/payouts\x20-\x20view\x20recent\x20payouts\x0a','üìõ\x20Name:\x20`','üìä\x20*Statistics*\x0a\x0aSelect\x20period:','‚úÖ\x20You\x20are\x20already\x20connected\x20to\x20shop\x20*','üá∫üá¶','üáÆüá∑','BGN','üá®üá¶','üÜî\x20Request\x20ID:\x20`','üáÆüá©','üí∏\x20Penalty\x20amount:\x20*','üè™\x20Your\x20connected\x20shop:\x0a','üîî\x20Notifications\x20are\x20active\x0a\x0a','payment','getGatewayDisplayNameForTelegram','getGatewayNameById','notificationLogin','Telegram\x20bot\x20polling\x20error:','https://trapay.uk/','toString','defineProperty',':\x20username=\x22','üáØüá¥','pl_type_multi','‚ùå\x20Error\x20sending\x20file\x20to\x20user\x20','Step\x203/4:\x20Select\x20currency\x0a','log','EGP','Unknown','wallet','USD','TND','forEach','üìä\x20*Statistics:\x20','Payment\x20is\x20being\x20processed','ALL','image/png','INR','pl_','üá¨üáß','paymentLink','‚úÖ\x20Connected\x20to\x20shop:\x20*','‚ùå\x20Please\x20use\x20/start\x20command\x20first','üá±üá∞','üåê\x20IP\x20address:\x20`','üáªüá∫','botToken','telegramBotService','Payment\x20chargeback','MarkdownV2','To\x20receive\x20payment\x20notifications,\x20send\x20your\x20credentials\x20in\x20one\x20line:\x0a\x0a','Example:\x0a','setupBotHandlers','stats_yesterday','‚ùå\x20Invalid\x20amount.\x20Please\x20enter\x20a\x20valid\x20number\x20greater\x20than\x200.','paymentGateways','HRK','SGD','isValidGatewayId','type','\x20\x20\x20Gateway:\x20','‚ùå\x20You\x20are\x20not\x20connected\x20to\x20a\x20shop.\x0a\x0a','getBotInfo','FJD','‚ùå\x20Error\x20getting\x20debug\x20information.','KES','sendMessage','adminNotes','\x20parts:\x20','BTN','üîå\x20Disconnect','image/jpeg','üîó\x20*Transaction\x20Link:*\x20Pending','/payment\x5c_links\x20-\x20manage\x20payment\x20links\x0a','üí∏\x20*New\x20Payout*\x0a\x0a','test','üí≥\x20*Wallet:*\x20`',')\x0a\x0a','üîó\x20*Payment\x20Links*\x0a\x0a','REFUND','BDT','timestamp','üåê\x20*Network:*\x20','\x20\x20\x20Username:\x20`','\x22\x20->\x20display\x20\x22','üá≤üáª','pl_create_new','You\x20are\x20already\x20connected\x20to\x20shop:\x20*','SAR','üá±üá¶','‚úÖ\x20Login\x20notification\x20sent\x20for\x20shop\x20','sendPayoutNotification','Username:\x20`','errorMessage','Payment\x20refund','üè¶\x20Gateway:\x20','24owzesI','AFN','Telegram\x20bot\x20error:','UYU','keys','stats_all_time','IQD','üá¨üá™','TJS','numeric','BAM','publicKey','LBP',':\x20`','üìã\x20View\x20Payment\x20Links','3522855OqTcDr','üáµüá≠','Coming\x20soon...\x0a\x0a','üá¶üá´','üîó\x20*Create\x20Payment\x20Link*\x0a\x0aStep\x201/4:\x20Select\x20gateway','üìä\x20Statistics','üá∫üáø','stats_last_month','EUR','üÜî\x20Payment\x20ID:\x20`','botUsername','BRL','‚Ä¢\x20Dates\x20and\x20TX\x20IDs','getUTCDate','Failed\x20to\x20send\x20login\x20notification:','‚ùå\x20Shop\x20not\x20found.','üìã\x20*Payment\x20Links*\x20\x5c(Page\x20','224388CIrvXD','PEN','/link/','Error\x20handling\x20/payouts\x20command:','‚è≥\x20The\x20payment\x20is\x20currently\x20being\x20processed\x20by\x20the\x20gateway.\x0a','split','\x20USD\x0a','*.\x0a\x0a','showCurrencyPage','‚úÖ\x20Direct\x20message\x20sent\x20to\x20chat\x20','üá≤üá∞','stopBot','stats_today','username','\x20(@','33108Hcdjsk','üá∏üá™','delete','üì¢\x20Telegram\x20channel','OMR','üá≤üáΩ','üáπüáØ','/statistics\x20-\x20view\x20your\x20statistics\x0a','`\x0a\x0a','Error\x20handling\x20/statistics\x20command:','üá∞üá≠','SEK','`.\x0a\x0a','LKR','üáßüá©','Use\x20/start\x20to\x20connect.','MKD','üá≤üá≤','IDR','telegramId','\x20USDC','‚ùå\x20No\x20active\x20gateways\x20found.\x20Please\x20enable\x20at\x20least\x20one\x20gateway\x20in\x20the\x20admin\x20panel.','‚ùå\x20Error\x20sending\x20direct\x20message:','CHF','üìÖ\x20Date:\x20','createdAt','toFixed','üîÑ\x20Refunds\x20\x5c-\x20','cmd_payouts','‚úÖ\x20Successful\x20Payments\x20\x5c-\x20','üîÑ\x20Reset\x20incomplete\x20verification\x20for\x20user\x20','üáßüá¶','üìÖ\x20Last\x20Month','payout','\x20verified\x20for\x20shop\x20','getUTCFullYear','üìù\x20Format:\x20`username\x20api_key`\x0a\x0a','.jpeg','üáπüá¥','node-telegram-bot-api','üáÆüá±','\x22,\x20apiKey=\x22','`appple\x20pk_aa6450d3f57afbefbb0f3f5be5ce6cca13037536afc5ccf14c81a6cbc7a07de5`\x0a\x0a','notificationApiError','step','‚úÖ\x20Telegram\x20bot\x20@','cmd_statistics','üìä\x20*Connection\x20Status*\x0a\x0a','‚ùå\x20Unknown\x20command','../types/gateway','‚ùå\x20You\x20are\x20not\x20connected\x20to\x20a\x20shop.\x0a\x0aUse\x20/start\x20to\x20connect.','ARS','Username\x20must\x20contain\x20only\x20letters,\x20numbers\x20and\x20underscore\x20(3-50\x20characters).','processing','/disconnect\x20-\x20disconnect\x20from\x20notifications','COP','stopPolling','...','üáßüá¨','customerUa','‚ùå\x20Error:\x20`','Error\x20handling\x20/debug\x20command:','ü§ñ\x20Welcome\x20to\x20TRAPAY\x20notification\x20system!\x0a\x0a','https://app.trapay.uk','chat','üáµüá±','currency','amount','‚ùå\x20An\x20error\x20occurred\x20while\x20verifying\x20data.','VUV','default','üîó\x20Link:\x20','.jpg','customerEmail','üáµüá™','‚ùå\x20API\x20key\x20does\x20not\x20match\x20shop\x20`','getUTCMonth','üíµ\x20Earned\x20\x5c-\x20','üí∏\x20*Recent\x20Payouts*\x0a\x0a','\x20\x20\x20Status:\x20','Use\x20/status\x20to\x20check\x20status\x20or\x20/disconnect\x20to\x20disconnect.','sendDocument','üìû\x20Contacts','\x20USDT\x0a','üì±\x20API\x20error\x20notifications\x20disabled\x20for\x20shop\x20','‚ùóÔ∏è\x20Make\x20sure\x20to\x20separate\x20username\x20and\x20API\x20key\x20with\x20a\x20space!','üö®\x20*API\x20Error*\x0a\x0a','This\x20feature\x20will\x20show:\x0a','length','https://t.me/trapay_news','Not\x20specified','telegramUser','pl_page_','updatedAt','onText','490910TOsJhi','üá≥üáµ','üè¶\x20IBAN:\x20`','text','ILS','‚ùå\x20Cancel','Next\x20‚û°Ô∏è','üá™üá¨','sendShopFile','üìä\x20Status','set','findUnique','Page\x20','üáßüáπ','endpoint','UAH','sendShopNotification','üá®üá¥','showPaymentLinksList','üì±\x20Created\x20new\x20Telegram\x20user:\x20','‚ùå\x20You\x20are\x20not\x20registered\x20in\x20the\x20system.\x0a\x0a','ipAddress','‚ùå\x20Telegram\x20bot\x20not\x20initialized','currencyPage','‚ùå\x20Cancelled.','üìû\x20*Contacts*','‚Ä¢\x20Usage\x20statistics\x0a','üá∑üá∏','You\x20sent\x20','Error\x20handling\x20callback\x20query:','IRR','578172jAykAU','orderId','üá∞üáø','UZS','KRW','\x5c)\x0a\x0a','/contacts\x20-\x20support\x20contacts\x0a','0.0','KWD','‚úÖ\x20*Payment\x20Link\x20Created\x20Successfully\x5c!*\x0a\x0a','‚ùå\x20Maximum\x20number\x20of\x20connected\x20accounts\x20(5)\x20reached\x20for\x20shop\x20`','first_name','\x20USDT*\x0a','üá¨üá≠','last_name','JOD','\x0aüë§\x20*Customer\x20Information:*\x0a','sendDirectMessage','PENDING','üá∏üá¨','PLN','üá≠üá∑','message_id','‚Ä¢\x20Payouts','back_to_stats_menu','MYR','NOK','BND','UTC','üë§\x20Username:\x20`','ZAR','AED','KGS','sendNotificationToAll','endsWith','üí∞\x20Turnover\x20\x5c-\x20','warn','\x5c.\x20','handleSingleLineVerification','shop','DKK','all','user\x20is\x20deactivated','User\x20','MVR','üìã\x20*Payment\x20Links*\x0a\x0aNo\x20payment\x20links\x20found\x5c.\x0a\x0aCreate\x20your\x20first\x20payment\x20link\x5c!','Disconnect\x20one\x20of\x20the\x20existing\x20accounts\x20first.','‚ùå\x20No\x20gateways\x20configured.\x20Please\x20configure\x20gateways\x20in\x20the\x20admin\x20panel\x20first.','cmd_back_to_menu','\x20marked\x20as\x20unverified\x20due\x20to\x20delivery\x20failure','üîî\x20Notifications\x20are\x20active','üí∏\x20*Payouts*\x0a\x0a','üìÖ\x20Today','üîî\x20You\x20will\x20now\x20receive\x20notifications\x20about:\x0a','‚Ä¢\x20Share\x20link\x20directly','application/pdf','substring','üá´üáØ','üì±\x20Shop:\x20*','CAD','‚¨ÖÔ∏è\x20Previous','üá≤üá≥','‚Ä¢\x20Transaction\x20status\x0a','TRY','üìÖ\x20All\x20Time','üá∑üá¥','\x20USDC\x0a','NZD','SBD','üì±\x20Telegram\x20notification:\x20gateway\x20\x22','reduce','slice','trim','AUD','trapay_bot','Error\x20handling\x20/start\x20command:','pk_','includes','TELEGRAM_BOT_TOKEN\x20not\x20found\x20in\x20environment\x20variables','find','replace','method','2-digit','Step\x204/4:\x20Enter\x20amount\x0a\x0a','amountAfterGatewayCommissionUSDT','customerIp','üìÖ\x20Time:\x20','count','üá®üá≥','chargebackAmount','\x20\x5c|\x20Type:\x20','period','7391178Vcwwpt','Error\x20handling\x20/payment_links\x20command:','padStart','ceil','You\x20are\x20connected\x20to\x20shop:\x20*','üá∞üá¨','üõë\x20Telegram\x20bot\x20stopped','üîó\x20*Create\x20Payment\x20Link*\x0a\x0a','üá™üá∫','‚ùå\x20No\x20verified\x20Telegram\x20users\x20found\x20for\x20shop\x20ID:\x20','üìÖ\x20This\x20Month','__esModule','CLP','TWD','pl_view_list'];a87_0x43ea=function(){return _0x8105ea;};return a87_0x43ea();}function a87_0x5b6f(_0x18e197,_0x571f37){_0x18e197=_0x18e197-0x179;const _0x43ea7d=a87_0x43ea();let _0x5b6f31=_0x43ea7d[_0x18e197];return _0x5b6f31;}(function(_0x2e20cb,_0x379eab){const _0x33143c=a87_0x5b6f,_0x375a1c=_0x2e20cb();while(!![]){try{const _0x201557=-parseInt(_0x33143c(0x1e1))/0x1+-parseInt(_0x33143c(0x286))/0x2*(parseInt(_0x33143c(0x257))/0x3)+parseInt(_0x33143c(0x3a3))/0x4*(parseInt(_0x33143c(0x2cf))/0x5)+parseInt(_0x33143c(0x23d))/0x6+parseInt(_0x33143c(0x383))/0x7+parseInt(_0x33143c(0x374))/0x8*(-parseInt(_0x33143c(0x394))/0x9)+-parseInt(_0x33143c(0x1c2))/0xa;if(_0x201557===_0x379eab)break;else _0x375a1c['push'](_0x375a1c['shift']());}catch(_0xf28572){_0x375a1c['push'](_0x375a1c['shift']());}}}(a87_0x43ea,0xacf2c));var __importDefault=this&&this[a87_0x18a5e4(0x260)]||function(_0x13e06f){const _0x1e67a4=a87_0x18a5e4;return _0x13e06f&&_0x13e06f[_0x1e67a4(0x248)]?_0x13e06f:{'default':_0x13e06f};};Object[a87_0x18a5e4(0x328)](exports,a87_0x18a5e4(0x248),{'value':!![]}),exports[a87_0x18a5e4(0x343)]=exports[a87_0x18a5e4(0x26c)]=void 0x0;const node_telegram_bot_api_1=__importDefault(require(a87_0x18a5e4(0x18a))),database_1=__importDefault(require(a87_0x18a5e4(0x26f))),gateway_1=require(a87_0x18a5e4(0x194));class TelegramBotService{constructor(){const _0x30f597=a87_0x18a5e4;this[_0x30f597(0x282)]=null,this[_0x30f597(0x296)]=new Map(),this[_0x30f597(0x342)]=process.env.TELEGRAM_BOT_TOKEN||'',this[_0x30f597(0x38d)]=process.env.TELEGRAM_BOT_USERNAME||_0x30f597(0x22b),this['botToken']?this[_0x30f597(0x2c2)]():console[_0x30f597(0x205)](_0x30f597(0x22f));}[a87_0x18a5e4(0x2c2)](){const _0x5a37f3=a87_0x18a5e4;try{this['bot']=new node_telegram_bot_api_1[(_0x5a37f3(0x1a9))](this[_0x5a37f3(0x342)],{'polling':!![]}),this[_0x5a37f3(0x348)](),console['log'](_0x5a37f3(0x190)+this[_0x5a37f3(0x38d)]+'\x20initialized\x20successfully');}catch(_0x4ce767){console[_0x5a37f3(0x275)]('‚ùå\x20Failed\x20to\x20initialize\x20Telegram\x20bot:',_0x4ce767);}}['setupBotHandlers'](){const _0x352b63=a87_0x18a5e4;if(!this[_0x352b63(0x282)])return;this[_0x352b63(0x282)][_0x352b63(0x1c1)](/\/start/,async _0x3653e7=>{const _0x4ecabe=_0x352b63,_0x1c135c=_0x3653e7[_0x4ecabe(0x1a3)]['id'],_0x5bbfbc=_0x3653e7[_0x4ecabe(0x256)]?.['id'][_0x4ecabe(0x327)](),_0x3dcce0=_0x3653e7[_0x4ecabe(0x256)]?.['username'],_0x4e6d64=_0x3653e7[_0x4ecabe(0x256)]?.[_0x4ecabe(0x1ec)],_0x5bf990=_0x3653e7[_0x4ecabe(0x256)]?.[_0x4ecabe(0x1ef)];if(!_0x5bbfbc)return;try{let _0x405b0a=await database_1[_0x4ecabe(0x1a9)]['telegramUser'][_0x4ecabe(0x1cd)]({'where':{'telegramId':_0x5bbfbc},'include':{'shop':!![]}});!_0x405b0a?(_0x405b0a=await database_1[_0x4ecabe(0x1a9)][_0x4ecabe(0x1be)]['create']({'data':{'telegramId':_0x5bbfbc,'username':_0x3dcce0,'firstName':_0x4e6d64,'lastName':_0x5bf990,'isVerified':![],'shopId':null},'include':{'shop':!![]}}),console[_0x4ecabe(0x32e)](_0x4ecabe(0x1d5)+_0x5bbfbc+_0x4ecabe(0x3a2)+_0x3dcce0+')')):_0x405b0a=await database_1['default']['telegramUser'][_0x4ecabe(0x294)]({'where':{'telegramId':_0x5bbfbc},'data':{'username':_0x3dcce0,'firstName':_0x4e6d64,'lastName':_0x5bf990},'include':{'shop':!![]}}),_0x405b0a[_0x4ecabe(0x24f)]&&_0x405b0a[_0x4ecabe(0x266)]&&_0x405b0a['shop']?await this[_0x4ecabe(0x282)]?.['sendMessage'](_0x1c135c,_0x4ecabe(0x27b)+(_0x4ecabe(0x36b)+_0x405b0a[_0x4ecabe(0x208)][_0x4ecabe(0x309)]+'*\x0a')+(_0x4ecabe(0x370)+_0x405b0a[_0x4ecabe(0x208)][_0x4ecabe(0x3a1)]+_0x4ecabe(0x3ab))+'üîî\x20You\x20receive\x20notifications\x20about:\x0a'+_0x4ecabe(0x28e)+_0x4ecabe(0x2c8)+_0x4ecabe(0x1f8),{'parse_mode':_0x4ecabe(0x307),'reply_markup':{'inline_keyboard':[[{'text':'üìä\x20Statistics','callback_data':'cmd_statistics'},{'text':'üí∏\x20Payouts','callback_data':_0x4ecabe(0x17f)}],[{'text':'üîó\x20Payment\x20Links','callback_data':_0x4ecabe(0x29f)},{'text':_0x4ecabe(0x1cb),'callback_data':_0x4ecabe(0x2b5)}],[{'text':_0x4ecabe(0x1b5),'callback_data':_0x4ecabe(0x250)},{'text':'üîå\x20Disconnect','callback_data':'cmd_disconnect'}]]}}):(_0x405b0a[_0x4ecabe(0x266)]&&!_0x405b0a[_0x4ecabe(0x24f)]&&(await database_1['default']['telegramUser'][_0x4ecabe(0x294)]({'where':{'telegramId':_0x5bbfbc},'data':{'shopId':null,'isVerified':![]}}),console[_0x4ecabe(0x32e)](_0x4ecabe(0x181)+_0x5bbfbc)),await this['bot']?.[_0x4ecabe(0x356)](_0x1c135c,_0x4ecabe(0x1a1)+_0x4ecabe(0x346)+_0x4ecabe(0x187)+_0x4ecabe(0x347)+_0x4ecabe(0x18d)+_0x4ecabe(0x1b8),{'parse_mode':_0x4ecabe(0x307)}));}catch(_0xfd000e){console[_0x4ecabe(0x275)](_0x4ecabe(0x22c),_0xfd000e),await this[_0x4ecabe(0x282)]?.[_0x4ecabe(0x356)](_0x1c135c,_0x4ecabe(0x2bb));}}),this[_0x352b63(0x282)][_0x352b63(0x1c1)](/\/disconnect/,async _0x31fe91=>{const _0xb054d8=_0x352b63,_0x43d4d9=_0x31fe91[_0xb054d8(0x1a3)]['id'],_0x3a2f68=_0x31fe91[_0xb054d8(0x256)]?.['id'][_0xb054d8(0x327)]();if(!_0x3a2f68)return;try{const _0x3287ae=await database_1[_0xb054d8(0x1a9)][_0xb054d8(0x1be)][_0xb054d8(0x1cd)]({'where':{'telegramId':_0x3a2f68},'include':{'shop':!![]}});if(!_0x3287ae||!_0x3287ae[_0xb054d8(0x24f)]||!_0x3287ae[_0xb054d8(0x266)]){await this[_0xb054d8(0x282)]?.[_0xb054d8(0x356)](_0x43d4d9,_0xb054d8(0x2e5));return;}const _0x19de1e=_0x3287ae['shop']?.[_0xb054d8(0x309)]||'unknown\x20shop';await database_1[_0xb054d8(0x1a9)][_0xb054d8(0x1be)][_0xb054d8(0x294)]({'where':{'telegramId':_0x3a2f68},'data':{'shopId':null,'isVerified':![]}}),console[_0xb054d8(0x32e)]('üîå\x20User\x20'+_0x3a2f68+_0xb054d8(0x28a)+_0x3287ae[_0xb054d8(0x266)]),await this[_0xb054d8(0x282)]?.[_0xb054d8(0x356)](_0x43d4d9,_0xb054d8(0x2b6)+_0x19de1e+_0xb054d8(0x39b)+'To\x20reconnect,\x20use\x20the\x20/start\x20command',{'parse_mode':'Markdown'});}catch(_0x4eab18){console['error']('Error\x20handling\x20/disconnect\x20command:',_0x4eab18),await this['bot']?.[_0xb054d8(0x356)](_0x43d4d9,'‚ùå\x20An\x20error\x20occurred.\x20Please\x20try\x20again\x20later.');}}),this[_0x352b63(0x282)][_0x352b63(0x1c1)](/\/status/,async _0x1e0c4f=>{const _0x1d6542=_0x352b63,_0x1c8f33=_0x1e0c4f[_0x1d6542(0x1a3)]['id'],_0x29f0ea=_0x1e0c4f[_0x1d6542(0x256)]?.['id'][_0x1d6542(0x327)]();if(!_0x29f0ea)return;try{const _0x5b5bd2=await database_1[_0x1d6542(0x1a9)][_0x1d6542(0x1be)][_0x1d6542(0x1cd)]({'where':{'telegramId':_0x29f0ea},'include':{'shop':!![]}});if(!_0x5b5bd2){await this[_0x1d6542(0x282)]?.[_0x1d6542(0x356)](_0x1c8f33,_0x1d6542(0x1d6)+'Use\x20/start\x20to\x20begin.');return;}if(!_0x5b5bd2[_0x1d6542(0x24f)]||!_0x5b5bd2['shopId']||!_0x5b5bd2['shop']){await this[_0x1d6542(0x282)]?.[_0x1d6542(0x356)](_0x1c8f33,_0x1d6542(0x351)+_0x1d6542(0x3b2));return;}await this[_0x1d6542(0x282)]?.[_0x1d6542(0x356)](_0x1c8f33,_0x1d6542(0x192)+(_0x1d6542(0x33d)+_0x5b5bd2[_0x1d6542(0x208)][_0x1d6542(0x309)]+'*\x0a')+('üë§\x20Username:\x20`'+_0x5b5bd2['shop']['username']+'`\x0a')+('üìÖ\x20Connection\x20date:\x20'+_0x5b5bd2['updatedAt'][_0x1d6542(0x2aa)](_0x1d6542(0x2a3))+'\x0a\x0a')+_0x1d6542(0x320)+'üì±\x20Available\x20Commands:\x0a'+_0x1d6542(0x3aa)+_0x1d6542(0x314)+_0x1d6542(0x35d)+_0x1d6542(0x1e7)+_0x1d6542(0x199),{'parse_mode':'Markdown'});}catch(_0x5a3ff2){console[_0x1d6542(0x275)](_0x1d6542(0x2c9),_0x5a3ff2),await this['bot']?.[_0x1d6542(0x356)](_0x1c8f33,_0x1d6542(0x2bb));}}),this[_0x352b63(0x282)][_0x352b63(0x1c1)](/\/statistics/,async _0x2e2e20=>{const _0x1b12e0=_0x352b63,_0xca00c4=_0x2e2e20['chat']['id'],_0x198066=_0x2e2e20['from']?.['id'][_0x1b12e0(0x327)]();if(!_0x198066)return;try{const _0x3ded11=await database_1['default'][_0x1b12e0(0x1be)][_0x1b12e0(0x1cd)]({'where':{'telegramId':_0x198066},'include':{'shop':!![]}});if(!_0x3ded11?.[_0x1b12e0(0x24f)]||!_0x3ded11[_0x1b12e0(0x266)]){await this[_0x1b12e0(0x282)]?.[_0x1b12e0(0x356)](_0xca00c4,_0x1b12e0(0x351)+_0x1b12e0(0x3b2));return;}const _0xa28b8c={'inline_keyboard':[[{'text':'üìÖ\x20Today','callback_data':_0x1b12e0(0x3a0)}],[{'text':_0x1b12e0(0x271),'callback_data':'stats_yesterday'}],[{'text':_0x1b12e0(0x247),'callback_data':'stats_this_month'}],[{'text':_0x1b12e0(0x183),'callback_data':_0x1b12e0(0x38a)}],[{'text':'üìÖ\x20All\x20Time','callback_data':_0x1b12e0(0x379)}],[{'text':_0x1b12e0(0x310),'callback_data':_0x1b12e0(0x211)}]]};await this['bot']?.['sendMessage'](_0xca00c4,'üìä\x20*Statistics*\x0a\x0aSelect\x20period:',{'parse_mode':_0x1b12e0(0x307),'reply_markup':_0xa28b8c});}catch(_0x2c6372){console[_0x1b12e0(0x275)](_0x1b12e0(0x3ac),_0x2c6372),await this[_0x1b12e0(0x282)]?.['sendMessage'](_0xca00c4,'‚ùå\x20An\x20error\x20occurred.\x20Please\x20try\x20again\x20later.');}}),this[_0x352b63(0x282)][_0x352b63(0x1c1)](/\/payouts/,async _0x3d7dda=>{const _0x2c2eb5=_0x352b63,_0x478527=_0x3d7dda['chat']['id'],_0x48ea07=_0x3d7dda[_0x2c2eb5(0x256)]?.['id'][_0x2c2eb5(0x327)]();if(!_0x48ea07)return;try{const _0x469167=await database_1[_0x2c2eb5(0x1a9)][_0x2c2eb5(0x1be)]['findUnique']({'where':{'telegramId':_0x48ea07},'include':{'shop':!![]}});if(!_0x469167?.[_0x2c2eb5(0x24f)]||!_0x469167['shopId']){await this[_0x2c2eb5(0x282)]?.[_0x2c2eb5(0x356)](_0x478527,_0x2c2eb5(0x351)+'Use\x20/start\x20to\x20connect.');return;}await this[_0x2c2eb5(0x282)]?.['sendMessage'](_0x478527,_0x2c2eb5(0x1b1)+_0x2c2eb5(0x385)+_0x2c2eb5(0x1ba)+'‚Ä¢\x20Last\x205\x20payouts\x0a'+_0x2c2eb5(0x287)+_0x2c2eb5(0x21f)+_0x2c2eb5(0x38f),{'parse_mode':_0x2c2eb5(0x307)});}catch(_0x7448c5){console[_0x2c2eb5(0x275)](_0x2c2eb5(0x397),_0x7448c5),await this[_0x2c2eb5(0x282)]?.['sendMessage'](_0x478527,'‚ùå\x20An\x20error\x20occurred.\x20Please\x20try\x20again\x20later.');}}),this[_0x352b63(0x282)][_0x352b63(0x1c1)](/\/payment_links/,async _0x5cc45c=>{const _0x3e8aaa=_0x352b63,_0x260690=_0x5cc45c[_0x3e8aaa(0x1a3)]['id'],_0x1abf56=_0x5cc45c[_0x3e8aaa(0x256)]?.['id'][_0x3e8aaa(0x327)]();if(!_0x1abf56)return;try{const _0x40cf07=await database_1['default'][_0x3e8aaa(0x1be)][_0x3e8aaa(0x1cd)]({'where':{'telegramId':_0x1abf56},'include':{'shop':!![]}});if(!_0x40cf07?.[_0x3e8aaa(0x24f)]||!_0x40cf07['shopId']){await this['bot']?.['sendMessage'](_0x260690,_0x3e8aaa(0x351)+_0x3e8aaa(0x3b2));return;}await this[_0x3e8aaa(0x282)]?.[_0x3e8aaa(0x356)](_0x260690,_0x3e8aaa(0x362)+_0x3e8aaa(0x385)+'This\x20feature\x20will\x20show:\x0a'+_0x3e8aaa(0x284)+_0x3e8aaa(0x1dc)+'‚Ä¢\x20Quick\x20create\x20new\x20link\x0a'+_0x3e8aaa(0x217),{'parse_mode':_0x3e8aaa(0x307)});}catch(_0xf26e6c){console[_0x3e8aaa(0x275)](_0x3e8aaa(0x23e),_0xf26e6c),await this['bot']?.[_0x3e8aaa(0x356)](_0x260690,_0x3e8aaa(0x2bb));}}),this[_0x352b63(0x282)][_0x352b63(0x1c1)](/\/contacts/,async _0x1780f9=>{const _0x4fcb63=_0x352b63,_0x56ecab=_0x1780f9['chat']['id'];try{await this[_0x4fcb63(0x282)]?.['sendMessage'](_0x56ecab,'üìû\x20*Contacts*',{'parse_mode':_0x4fcb63(0x307),'reply_markup':{'inline_keyboard':[[{'text':_0x4fcb63(0x264),'url':'https://trapay.uk/'}],[{'text':'üë§\x20Account','url':_0x4fcb63(0x305)}],[{'text':_0x4fcb63(0x3a6),'url':_0x4fcb63(0x1bc)}],[{'text':_0x4fcb63(0x2eb),'url':'https://t.me/trapay_sales'}]]}});}catch(_0x274b5b){console[_0x4fcb63(0x275)](_0x4fcb63(0x2b9),_0x274b5b),await this[_0x4fcb63(0x282)]?.[_0x4fcb63(0x356)](_0x56ecab,_0x4fcb63(0x2bb));}}),this['bot']['on'](_0x352b63(0x2e9),async _0x41f159=>{const _0x5b508d=_0x352b63,_0x46295a=_0x41f159[_0x5b508d(0x278)],_0x197ffc=_0x46295a?.['chat']['id'],_0x14b7fa=_0x41f159['from']['id'][_0x5b508d(0x327)](),_0x3d8daf=_0x41f159['data'];if(!_0x197ffc||!_0x3d8daf)return;try{await this[_0x5b508d(0x282)]?.['answerCallbackQuery'](_0x41f159['id']);const _0x3281a4=await database_1[_0x5b508d(0x1a9)][_0x5b508d(0x1be)][_0x5b508d(0x1cd)]({'where':{'telegramId':_0x14b7fa},'include':{'shop':!![]}});if(!_0x3281a4?.[_0x5b508d(0x24f)]||!_0x3281a4[_0x5b508d(0x266)]){await this['bot']?.[_0x5b508d(0x356)](_0x197ffc,_0x5b508d(0x195));return;}switch(_0x3d8daf){case _0x5b508d(0x191):const _0x86cf1={'inline_keyboard':[[{'text':_0x5b508d(0x215),'callback_data':'stats_today'}],[{'text':_0x5b508d(0x271),'callback_data':_0x5b508d(0x349)}],[{'text':_0x5b508d(0x247),'callback_data':'stats_this_month'}],[{'text':_0x5b508d(0x183),'callback_data':_0x5b508d(0x38a)}],[{'text':'üìÖ\x20All\x20Time','callback_data':'stats_all_time'}],[{'text':_0x5b508d(0x310),'callback_data':_0x5b508d(0x211)}]]};await this[_0x5b508d(0x282)]?.['sendMessage'](_0x197ffc,_0x5b508d(0x316),{'parse_mode':_0x5b508d(0x307),'reply_markup':_0x86cf1});break;case'stats_today':case _0x5b508d(0x349):case _0x5b508d(0x2f1):case _0x5b508d(0x38a):case'stats_all_time':await this[_0x5b508d(0x25a)](_0x197ffc,_0x3281a4[_0x5b508d(0x266)],_0x3d8daf,_0x46295a?.[_0x5b508d(0x1f7)]);break;case _0x5b508d(0x1f9):const _0x56eb5f={'inline_keyboard':[[{'text':_0x5b508d(0x215),'callback_data':_0x5b508d(0x3a0)}],[{'text':_0x5b508d(0x271),'callback_data':_0x5b508d(0x349)}],[{'text':'üìÖ\x20This\x20Month','callback_data':_0x5b508d(0x2f1)}],[{'text':'üìÖ\x20Last\x20Month','callback_data':_0x5b508d(0x38a)}],[{'text':_0x5b508d(0x221),'callback_data':_0x5b508d(0x379)}],[{'text':'‚¨ÖÔ∏è\x20Back','callback_data':'cmd_back_to_menu'}]]};_0x46295a?.[_0x5b508d(0x1f7)]?await this['bot']?.[_0x5b508d(0x2f4)]('üìä\x20*Statistics*\x0a\x0aSelect\x20period:',{'chat_id':_0x197ffc,'message_id':_0x46295a[_0x5b508d(0x1f7)],'parse_mode':'Markdown','reply_markup':_0x56eb5f}):await this[_0x5b508d(0x282)]?.['sendMessage'](_0x197ffc,_0x5b508d(0x316),{'parse_mode':_0x5b508d(0x307),'reply_markup':_0x56eb5f});break;case _0x5b508d(0x17f):const _0x5c69c1=await database_1[_0x5b508d(0x1a9)][_0x5b508d(0x184)]['findMany']({'where':{'shopId':_0x3281a4[_0x5b508d(0x266)]},'orderBy':{'createdAt':_0x5b508d(0x2d9)}}),_0x47d5a9=_0x5c69c1[_0x5b508d(0x29a)](_0x4096c5=>_0x4096c5[_0x5b508d(0x297)]===_0x5b508d(0x1f3))[_0x5b508d(0x227)]((_0x352638,_0x428404)=>_0x352638+_0x428404['amount'],0x0),_0xa605b8=_0x5c69c1[_0x5b508d(0x29a)](_0x7b6dd6=>_0x7b6dd6[_0x5b508d(0x297)]==='COMPLETED')[_0x5b508d(0x227)]((_0x38a653,_0x2fc871)=>_0x38a653+_0x2fc871[_0x5b508d(0x1a6)],0x0),_0x280f93=(_0x3281a4[_0x5b508d(0x208)]?.['balance']||0x0)+(_0x3281a4[_0x5b508d(0x208)]?.[_0x5b508d(0x261)]||0x0);await this[_0x5b508d(0x282)]?.['sendMessage'](_0x197ffc,_0x5b508d(0x214)+('‚è≥\x20Pending\x20payouts:\x20'+_0x47d5a9[_0x5b508d(0x17d)](0x2)+_0x5b508d(0x223))+(_0x5b508d(0x258)+_0xa605b8[_0x5b508d(0x17d)](0x2)+_0x5b508d(0x223))+('üí∞\x20Total\x20earned:\x20'+_0x280f93[_0x5b508d(0x17d)](0x2)+_0x5b508d(0x3b7)),{'parse_mode':_0x5b508d(0x307),'reply_markup':{'inline_keyboard':[[{'text':_0x5b508d(0x310),'callback_data':'cmd_back_to_menu'}]]}});break;case _0x5b508d(0x29f):await this[_0x5b508d(0x282)]?.[_0x5b508d(0x356)](_0x197ffc,'üîó\x20*Payment\x20Links*\x0a\x0aChoose\x20an\x20action:',{'parse_mode':'Markdown','reply_markup':{'inline_keyboard':[[{'text':_0x5b508d(0x382),'callback_data':_0x5b508d(0x24b)}],[{'text':_0x5b508d(0x30a),'callback_data':_0x5b508d(0x36a)}],[{'text':_0x5b508d(0x310),'callback_data':'cmd_back_to_menu'}]]}});break;case _0x5b508d(0x2b5):await this[_0x5b508d(0x282)]?.[_0x5b508d(0x356)](_0x197ffc,_0x5b508d(0x192)+('‚úÖ\x20Connected\x20to\x20shop:\x20*'+(_0x3281a4['shop']?.['name']||_0x5b508d(0x330))+'*\x0a')+(_0x5b508d(0x1fe)+(_0x3281a4[_0x5b508d(0x208)]?.[_0x5b508d(0x3a1)]||_0x5b508d(0x330))+'`\x0a')+('üìÖ\x20Connection\x20date:\x20'+_0x3281a4[_0x5b508d(0x1c0)][_0x5b508d(0x2aa)]('en-US')+'\x0a\x0a')+_0x5b508d(0x213),{'parse_mode':_0x5b508d(0x307),'reply_markup':{'inline_keyboard':[[{'text':_0x5b508d(0x310),'callback_data':_0x5b508d(0x211)}]]}});break;case _0x5b508d(0x250):await this[_0x5b508d(0x282)]?.[_0x5b508d(0x356)](_0x197ffc,_0x5b508d(0x1db),{'parse_mode':'Markdown','reply_markup':{'inline_keyboard':[[{'text':_0x5b508d(0x264),'url':_0x5b508d(0x326)}],[{'text':'üë§\x20Account','url':_0x5b508d(0x305)}],[{'text':_0x5b508d(0x3a6),'url':_0x5b508d(0x1bc)}],[{'text':_0x5b508d(0x2eb),'url':_0x5b508d(0x2c0)}],[{'text':_0x5b508d(0x310),'callback_data':_0x5b508d(0x211)}]]}});break;case _0x5b508d(0x211):await this[_0x5b508d(0x282)]?.[_0x5b508d(0x356)](_0x197ffc,_0x5b508d(0x27b)+(_0x5b508d(0x241)+(_0x3281a4[_0x5b508d(0x208)]?.[_0x5b508d(0x309)]||_0x5b508d(0x330))+'*\x0a')+(_0x5b508d(0x370)+(_0x3281a4[_0x5b508d(0x208)]?.[_0x5b508d(0x3a1)]||_0x5b508d(0x330))+_0x5b508d(0x3ab))+'üîî\x20You\x20receive\x20notifications\x20about:\x0a'+_0x5b508d(0x28e)+_0x5b508d(0x2c8)+'‚Ä¢\x20Payouts',{'parse_mode':'Markdown','reply_markup':{'inline_keyboard':[[{'text':_0x5b508d(0x388),'callback_data':_0x5b508d(0x191)},{'text':'üí∏\x20Payouts','callback_data':_0x5b508d(0x17f)}],[{'text':_0x5b508d(0x2ac),'callback_data':'cmd_payment_links'},{'text':'üìä\x20Status','callback_data':_0x5b508d(0x2b5)}],[{'text':_0x5b508d(0x1b5),'callback_data':_0x5b508d(0x250)},{'text':'üîå\x20Disconnect','callback_data':_0x5b508d(0x25f)}]]}});break;case _0x5b508d(0x25f):await database_1[_0x5b508d(0x1a9)][_0x5b508d(0x1be)][_0x5b508d(0x294)]({'where':{'telegramId':_0x14b7fa},'data':{'shopId':null,'isVerified':![]}}),await this[_0x5b508d(0x282)]?.[_0x5b508d(0x356)](_0x197ffc,'‚úÖ\x20You\x20have\x20been\x20successfully\x20disconnected\x20from\x20shop\x20*'+(_0x3281a4[_0x5b508d(0x208)]?.[_0x5b508d(0x309)]||_0x5b508d(0x330))+_0x5b508d(0x39b)+'To\x20reconnect,\x20use\x20the\x20/start\x20command',{'parse_mode':_0x5b508d(0x307)});break;default:_0x3d8daf[_0x5b508d(0x290)](_0x5b508d(0x33a))?await this[_0x5b508d(0x2ff)](_0x197ffc,_0x14b7fa,_0x3d8daf,_0x41f159[_0x5b508d(0x278)]?.['message_id']):await this[_0x5b508d(0x282)]?.[_0x5b508d(0x356)](_0x197ffc,_0x5b508d(0x193));}}catch(_0x3d415e){console['error'](_0x5b508d(0x1df),_0x3d415e),await this[_0x5b508d(0x282)]?.[_0x5b508d(0x356)](_0x197ffc,'‚ùå\x20An\x20error\x20occurred.\x20Please\x20try\x20again\x20later.');}}),this[_0x352b63(0x282)]['onText'](/\/debug/,async _0xc47452=>{const _0x908757=_0x352b63,_0x2f5287=_0xc47452[_0x908757(0x1a3)]['id'],_0x1282e9=_0xc47452[_0x908757(0x256)]?.['id'][_0x908757(0x327)]();if(!_0x1282e9)return;try{const _0x36b88b=await database_1['default'][_0x908757(0x1be)][_0x908757(0x1cd)]({'where':{'telegramId':_0x1282e9},'include':{'shop':!![]}});let _0xd3d763=_0x908757(0x302);_0xd3d763+=_0x908757(0x24e)+_0x1282e9+_0x908757(0x3ab),_0x36b88b?.[_0x908757(0x24f)]&&_0x36b88b[_0x908757(0x208)]?(_0xd3d763+=_0x908757(0x31f),_0xd3d763+='\x20\x20\x20Name:\x20*'+_0x36b88b[_0x908757(0x208)]['name']+'*\x0a',_0xd3d763+=_0x908757(0x367)+_0x36b88b[_0x908757(0x208)]['username']+'`\x0a',_0xd3d763+=_0x908757(0x1b2)+_0x36b88b[_0x908757(0x208)]['status']+'\x0a\x0a'):_0xd3d763+=_0x908757(0x2c7),_0xd3d763+='Use\x20/start\x20to\x20connect\x20to\x20a\x20shop.',await this[_0x908757(0x282)]?.['sendMessage'](_0x2f5287,_0xd3d763,{'parse_mode':_0x908757(0x307)});}catch(_0x20b32f){console[_0x908757(0x275)](_0x908757(0x1a0),_0x20b32f),await this[_0x908757(0x282)]?.['sendMessage'](_0x2f5287,_0x908757(0x354));}}),this[_0x352b63(0x282)]['on']('message',async _0x398c40=>{const _0xe22449=_0x352b63;if(_0x398c40['text']?.['startsWith']('/'))return;const _0x276614=_0x398c40[_0xe22449(0x1a3)]['id'],_0x111bdb=_0x398c40['from']?.['id']['toString'](),_0xdf23f4=_0x398c40[_0xe22449(0x1c5)]?.[_0xe22449(0x229)]();if(!_0x111bdb||!_0xdf23f4)return;try{const _0x34f470=this[_0xe22449(0x296)][_0xe22449(0x2f0)](_0x111bdb);if(_0x34f470&&_0x34f470[_0xe22449(0x18f)]===_0xe22449(0x1a6)){const _0x2bdb0e=parseFloat(_0xdf23f4);if(isNaN(_0x2bdb0e)||_0x2bdb0e<=0x0){await this[_0xe22449(0x282)]?.[_0xe22449(0x356)](_0x276614,_0xe22449(0x34a));return;}const _0xb8bc6a=await database_1[_0xe22449(0x1a9)][_0xe22449(0x1be)]['findUnique']({'where':{'telegramId':_0x111bdb},'include':{'shop':!![]}});if(!_0xb8bc6a?.[_0xe22449(0x266)]){await this['bot']?.[_0xe22449(0x356)](_0x276614,_0xe22449(0x25e)),this['paymentLinkSessions']['delete'](_0x111bdb);return;}const _0x538881=(0x0,gateway_1[_0xe22449(0x34e)])(_0x34f470[_0xe22449(0x270)])?(0x0,gateway_1[_0xe22449(0x323)])(_0x34f470['gateway']):_0x34f470[_0xe22449(0x270)],_0x5f0b4b={'shopId':_0xb8bc6a['shopId'],'gateway':_0x538881,'amount':_0x2bdb0e,'currency':_0x34f470[_0xe22449(0x1a5)],'type':_0x34f470[_0xe22449(0x34f)],'status':_0xe22449(0x2cb)},_0x5e2182=await database_1['default']['paymentLink']['create']({'data':_0x5f0b4b});this[_0xe22449(0x296)][_0xe22449(0x3a5)](_0x111bdb);const _0x451ecb=(process.env.FRONTEND_URL||_0xe22449(0x1a2))+_0xe22449(0x396)+_0x5e2182['id'],_0x4f7e03=_0x451ecb[_0xe22449(0x231)](/\./g,'\x5c.')[_0xe22449(0x231)](/-/g,'\x5c-')['replace'](/\//g,'\x5c/');await this['bot']?.[_0xe22449(0x356)](_0x276614,_0xe22449(0x1ea)+(_0xe22449(0x1aa)+_0x4f7e03+'\x0a')+('üí∞\x20Amount:\x20'+_0x2bdb0e+'\x20'+_0x34f470[_0xe22449(0x1a5)]+'\x0a')+(_0xe22449(0x373)+_0x34f470[_0xe22449(0x270)]+'\x0a')+('üîÑ\x20Type:\x20'+(_0x34f470[_0xe22449(0x34f)]==='SINGLE'?'Single\x20Use':'Multi\x20Use')+'\x0a\x0a')+'Copy\x20and\x20share\x20this\x20link\x20with\x20your\x20customers\x5c!',{'parse_mode':_0xe22449(0x345)});return;}const _0x53e3d5=await database_1[_0xe22449(0x1a9)][_0xe22449(0x1be)]['findUnique']({'where':{'telegramId':_0x111bdb},'include':{'shop':!![]}});if(!_0x53e3d5){await this['bot']?.['sendMessage'](_0x276614,_0xe22449(0x33e));return;}if(_0x53e3d5[_0xe22449(0x24f)]&&_0x53e3d5[_0xe22449(0x266)]&&_0x53e3d5[_0xe22449(0x208)]){await this[_0xe22449(0x282)]?.[_0xe22449(0x356)](_0x276614,_0xe22449(0x317)+_0x53e3d5[_0xe22449(0x208)][_0xe22449(0x309)]+_0xe22449(0x39b)+_0xe22449(0x1b3),{'parse_mode':'Markdown'});return;}const _0x8a05f4=_0xdf23f4['split'](/\s+/);if(_0x8a05f4[_0xe22449(0x1bb)]!==0x2){await this['bot']?.[_0xe22449(0x356)](_0x276614,_0xe22449(0x24d)+_0xe22449(0x187)+_0xe22449(0x347)+_0xe22449(0x18d)+(_0xe22449(0x1de)+_0x8a05f4['length']+_0xe22449(0x358)+_0x8a05f4[_0xe22449(0x2db)](_0x520e9e=>'`'+_0x520e9e+'`')[_0xe22449(0x2da)](',\x20')),{'parse_mode':_0xe22449(0x307)});return;}const [_0xa87066,_0x546690]=_0x8a05f4;console[_0xe22449(0x32e)](_0xe22449(0x2a8)+_0x111bdb+':\x20username=\x22'+_0xa87066+_0xe22449(0x18c)+_0x546690[_0xe22449(0x219)](0x0,0xa)+_0xe22449(0x265)),await this[_0xe22449(0x207)](_0x276614,_0x111bdb,_0xa87066,_0x546690);}catch(_0x5442b4){console[_0xe22449(0x275)](_0xe22449(0x252),_0x5442b4),await this['bot']?.[_0xe22449(0x356)](_0x276614,_0xe22449(0x2bb));}}),this[_0x352b63(0x282)]['on'](_0x352b63(0x275),_0xbeac99=>{const _0x240b1e=_0x352b63;console['error'](_0x240b1e(0x376),_0xbeac99);}),this[_0x352b63(0x282)]['on'](_0x352b63(0x312),_0x162903=>{const _0x19f342=_0x352b63;console[_0x19f342(0x275)](_0x19f342(0x325),_0x162903);});}async['handleSingleLineVerification'](_0xc12d4a,_0x93c24e,_0x5be7ce,_0x87f783){const _0xf54490=a87_0x18a5e4;try{console['log'](_0xf54490(0x2a8)+_0x93c24e+_0xf54490(0x329)+_0x5be7ce+_0xf54490(0x18c)+_0x87f783['substring'](0x0,0xa)+_0xf54490(0x265));if(!_0x5be7ce||_0x5be7ce[_0xf54490(0x1bb)]<0x3||_0x5be7ce[_0xf54490(0x1bb)]>0x32||!/^[a-zA-Z0-9_]+$/[_0xf54490(0x35f)](_0x5be7ce)){await this['bot']?.['sendMessage'](_0xc12d4a,'‚ùå\x20Invalid\x20username\x20format:\x20`'+_0x5be7ce+_0xf54490(0x3ab)+_0xf54490(0x197),{'parse_mode':_0xf54490(0x307)});return;}if(!_0x87f783||!_0x87f783[_0xf54490(0x290)](_0xf54490(0x22d))&&!_0x87f783[_0xf54490(0x290)](_0xf54490(0x29d))){await this[_0xf54490(0x282)]?.[_0xf54490(0x356)](_0xc12d4a,'‚ùå\x20Invalid\x20API\x20key\x20format.\x0a\x0a'+_0xf54490(0x2d4),{'parse_mode':_0xf54490(0x307)});return;}const _0x425785=await database_1[_0xf54490(0x1a9)][_0xf54490(0x208)][_0xf54490(0x1cd)]({'where':{'username':_0x5be7ce},'select':{'id':!![],'name':!![],'username':!![],'status':!![],'publicKey':!![],'secretKey':!![]}});if(!_0x425785){const _0x18e2fb=_0xf54490(0x2ce)+_0x5be7ce+_0xf54490(0x267)+'Please\x20check\x20the\x20spelling\x20and\x20try\x20again.\x0a\x0a'+_0xf54490(0x27d);await this['bot']?.[_0xf54490(0x356)](_0xc12d4a,_0x18e2fb,{'parse_mode':_0xf54490(0x307)});return;}if(_0x425785[_0xf54490(0x297)]!==_0xf54490(0x2cb)){await this[_0xf54490(0x282)]?.[_0xf54490(0x356)](_0xc12d4a,'‚ùå\x20Shop\x20`'+_0x5be7ce+_0xf54490(0x2b0)+'Contact\x20administrator.',{'parse_mode':_0xf54490(0x307)});return;}if(_0x425785[_0xf54490(0x37f)]!==_0x87f783&&_0x425785['secretKey']!==_0x87f783){await this[_0xf54490(0x282)]?.[_0xf54490(0x356)](_0xc12d4a,_0xf54490(0x1ae)+_0x5be7ce+_0xf54490(0x3af)+_0xf54490(0x289)+_0xf54490(0x29c),{'parse_mode':'Markdown'});return;}const _0x3c802f=await database_1[_0xf54490(0x1a9)][_0xf54490(0x1be)][_0xf54490(0x238)]({'where':{'shopId':_0x425785['id'],'isVerified':!![]}});if(_0x3c802f>=0x5){await this[_0xf54490(0x282)]?.['sendMessage'](_0xc12d4a,_0xf54490(0x1eb)+_0x5be7ce+'`.\x0a\x0a'+_0xf54490(0x20f),{'parse_mode':'Markdown'});return;}await database_1[_0xf54490(0x1a9)][_0xf54490(0x1be)][_0xf54490(0x294)]({'where':{'telegramId':_0x93c24e},'data':{'shopId':_0x425785['id'],'isVerified':!![]}}),await this['bot']?.['sendMessage'](_0xc12d4a,'üéâ\x20*Congratulations!*\x0a\x0a'+'‚úÖ\x20You\x20have\x20been\x20successfully\x20connected\x20to\x20the\x20notification\x20system!\x0a\x0a'+(_0xf54490(0x21b)+_0x425785[_0xf54490(0x309)]+'*\x0a')+(_0xf54490(0x1fe)+_0x425785['username']+'`\x0a\x0a')+_0xf54490(0x216)+_0xf54490(0x28e)+'‚Ä¢\x20Payment\x20status\x20changes\x0a'+'‚Ä¢\x20Payouts\x0a'+'‚Ä¢\x20Important\x20events',{'parse_mode':_0xf54490(0x307),'reply_markup':{'inline_keyboard':[[{'text':_0xf54490(0x388),'callback_data':'cmd_statistics'},{'text':_0xf54490(0x311),'callback_data':_0xf54490(0x17f)}],[{'text':_0xf54490(0x2ac),'callback_data':_0xf54490(0x29f)},{'text':_0xf54490(0x1cb),'callback_data':_0xf54490(0x2b5)}],[{'text':_0xf54490(0x1b5),'callback_data':_0xf54490(0x250)},{'text':_0xf54490(0x35a),'callback_data':_0xf54490(0x25f)}]]}}),console[_0xf54490(0x32e)]('‚úÖ\x20Telegram\x20user\x20'+_0x93c24e+_0xf54490(0x185)+_0x425785['username']+'\x20via\x20single-line\x20input');}catch(_0x7b7be1){console['error']('Error\x20in\x20handleSingleLineVerification:',_0x7b7be1),await this['bot']?.[_0xf54490(0x356)](_0xc12d4a,_0xf54490(0x1a7));}}async['sendShopNotification'](_0x41f6fd,_0x82c340,_0x1ce588){const _0x1d0d5a=a87_0x18a5e4;if(!this[_0x1d0d5a(0x282)]){console[_0x1d0d5a(0x205)](_0x1d0d5a(0x2c5));return;}try{const _0x480e2d=await database_1[_0x1d0d5a(0x1a9)][_0x1d0d5a(0x1be)][_0x1d0d5a(0x274)]({'where':{'shopId':_0x41f6fd,'isVerified':!![]}});if(_0x480e2d[_0x1d0d5a(0x1bb)]===0x0){console[_0x1d0d5a(0x32e)](_0x1d0d5a(0x276)+_0x41f6fd);return;}const _0x52ae60=_0x480e2d[_0x1d0d5a(0x2db)](async _0x2661aa=>{const _0x3a82cd=_0x1d0d5a;try{await this[_0x3a82cd(0x282)]?.['sendMessage'](_0x2661aa[_0x3a82cd(0x3b6)],_0x82c340,_0x1ce588),console[_0x3a82cd(0x32e)](_0x3a82cd(0x2ca)+_0x2661aa[_0x3a82cd(0x3b6)]);}catch(_0x20272d){console['error'](_0x3a82cd(0x26e)+_0x2661aa['telegramId']+':',_0x20272d),_0x20272d instanceof Error&&(_0x20272d['message'][_0x3a82cd(0x22e)]('blocked')||_0x20272d[_0x3a82cd(0x278)][_0x3a82cd(0x22e)]('chat\x20not\x20found')||_0x20272d[_0x3a82cd(0x278)]['includes'](_0x3a82cd(0x20b)))&&(await database_1[_0x3a82cd(0x1a9)][_0x3a82cd(0x1be)][_0x3a82cd(0x294)]({'where':{'id':_0x2661aa['id']},'data':{'isVerified':![]}}),console['log'](_0x3a82cd(0x20c)+_0x2661aa[_0x3a82cd(0x3b6)]+_0x3a82cd(0x212)));}});await Promise[_0x1d0d5a(0x2a0)](_0x52ae60);}catch(_0x32fcbe){console[_0x1d0d5a(0x275)]('Error\x20sending\x20shop\x20notification:',_0x32fcbe);}}async[a87_0x18a5e4(0x2fa)](_0x47784b,_0xc3486d,_0x21e099){const _0x56391f=a87_0x18a5e4,_0x3263c0={'created':'üÜï','paid':'‚úÖ','failed':'‚ùå','expired':'‚è∞','refund':'üîÑ','chargeback':'‚ö†Ô∏è','processing':'‚öôÔ∏è'},_0x186f89={'created':'New\x20payment\x20created','paid':'Payment\x20successfully\x20paid','failed':'Payment\x20failed','expired':'Payment\x20expired','refund':_0x56391f(0x372),'chargeback':_0x56391f(0x344),'processing':_0x56391f(0x336)},_0x548f0c=_0x3263c0[_0x21e099],_0x524ec3=_0x186f89[_0x21e099],_0x679f0f=(0x0,gateway_1[_0x56391f(0x322)])(_0xc3486d[_0x56391f(0x270)]);console[_0x56391f(0x32e)](_0x56391f(0x226)+_0xc3486d[_0x56391f(0x270)]+_0x56391f(0x368)+_0x679f0f+'\x22');let _0x2dba79=_0x548f0c+'\x20*'+_0x524ec3+_0x56391f(0x2fd)+(_0x56391f(0x2f3)+_0xc3486d[_0x56391f(0x1a6)]+'\x20'+_0xc3486d[_0x56391f(0x1a5)]+'*\x0a')+(_0x56391f(0x28b)+(_0xc3486d[_0x56391f(0x1e2)]||_0xc3486d['id'])+'`\x0a')+(_0x56391f(0x38c)+_0xc3486d['id']+'`\x0a')+(_0x56391f(0x259)+_0x679f0f+'`\x0a')+(_0x56391f(0x17b)+new Date(_0xc3486d[_0x56391f(0x17c)])[_0x56391f(0x301)](_0x56391f(0x2a3))+'\x0a');if(_0xc3486d['customerName']||_0xc3486d[_0x56391f(0x1ac)]||_0xc3486d['remitterIban']||_0xc3486d['customerIp']||_0xc3486d[_0x56391f(0x19e)]){_0x2dba79+=_0x56391f(0x1f1);_0xc3486d[_0x56391f(0x2cd)]&&(_0x2dba79+=_0x56391f(0x315)+_0xc3486d[_0x56391f(0x2cd)]+'`\x0a');_0xc3486d[_0x56391f(0x1ac)]&&(_0x2dba79+=_0x56391f(0x2e8)+_0xc3486d[_0x56391f(0x1ac)]+'`\x0a');_0xc3486d[_0x56391f(0x2ab)]&&(_0x2dba79+=_0x56391f(0x1c4)+_0xc3486d[_0x56391f(0x2ab)]+'`\x0a');_0xc3486d[_0x56391f(0x236)]&&(_0x2dba79+='üåê\x20IP:\x20`'+_0xc3486d[_0x56391f(0x236)]+'`\x0a');if(_0xc3486d[_0x56391f(0x19e)]){const _0x325d5f=_0xc3486d[_0x56391f(0x19e)][_0x56391f(0x1bb)]>0x32?_0xc3486d[_0x56391f(0x19e)][_0x56391f(0x219)](0x0,0x32)+'...':_0xc3486d[_0x56391f(0x19e)];_0x2dba79+=_0x56391f(0x306)+_0x325d5f+'`\x0a';}}_0x21e099===_0x56391f(0x313)&&_0xc3486d[_0x56391f(0x23a)]&&(_0x2dba79+=_0x56391f(0x31e)+_0xc3486d[_0x56391f(0x23a)]+_0x56391f(0x1ed)),_0x21e099===_0x56391f(0x198)&&(_0x2dba79+=_0x56391f(0x398)),_0xc3486d[_0x56391f(0x357)]&&(_0x2dba79+=_0x56391f(0x2a6)+_0xc3486d[_0x56391f(0x357)]+'\x0a'),await this[_0x56391f(0x1d2)](_0x47784b,_0x2dba79,{'parse_mode':_0x56391f(0x307)});}async[a87_0x18a5e4(0x36f)](_0x51e8fc,_0x223041){const _0x4931d5=a87_0x18a5e4,_0x57a34e=new Date(_0x223041['createdAt'])[_0x4931d5(0x301)](_0x4931d5(0x2a3),{'year':_0x4931d5(0x37d),'month':'2-digit','day':_0x4931d5(0x233),'hour':_0x4931d5(0x233),'minute':'2-digit','second':_0x4931d5(0x233)}),_0x403aad=_0x4931d5(0x35e)+(_0x4931d5(0x2b4)+_0x57a34e+'\x0a')+(_0x4931d5(0x2b8)+_0x223041[_0x4931d5(0x1a6)]+_0x4931d5(0x39a))+(_0x4931d5(0x2fb)+(_0x223041[_0x4931d5(0x23c)]||_0x4931d5(0x1bd))+'\x0a')+(_0x4931d5(0x366)+(_0x223041[_0x4931d5(0x2c4)]||'Not\x20specified')+'\x0a')+(_0x4931d5(0x360)+(_0x223041[_0x4931d5(0x331)]||_0x4931d5(0x1bd))+'`\x0a')+(_0x223041['txid']?_0x4931d5(0x272)+_0x223041['txid']+'`':_0x4931d5(0x35c));await this[_0x4931d5(0x1d2)](_0x51e8fc,_0x403aad,{'parse_mode':_0x4931d5(0x307)});}async['sendLoginNotification'](_0x119daa,_0x2a9fa3){const _0x4e9087=a87_0x18a5e4;try{const _0x54b190=await database_1['default'][_0x4e9087(0x2ba)]['findUnique']({'where':{'shopId':_0x119daa},'select':{'notificationLogin':!![]}});if(!_0x54b190?.[_0x4e9087(0x324)]){console[_0x4e9087(0x32e)](_0x4e9087(0x2cc)+_0x119daa);return;}const _0x4aac4a=_0x2a9fa3[_0x4e9087(0x273)]?'üîê':'üö®',_0x2adf78=_0x2a9fa3['success']?_0x4e9087(0x2b3):'Failed\x20login\x20attempt';let _0xde44d4=_0x4aac4a+'\x20*'+_0x2adf78+_0x4e9087(0x2fd)+(_0x4e9087(0x1fe)+_0x2a9fa3[_0x4e9087(0x3a1)]+'`\x0a')+(_0x4e9087(0x237)+_0x2a9fa3[_0x4e9087(0x365)]['toLocaleString'](_0x4e9087(0x2a3))+'\x0a');_0x2a9fa3[_0x4e9087(0x1d7)]&&(_0xde44d4+=_0x4e9087(0x340)+_0x2a9fa3[_0x4e9087(0x1d7)]+'`\x0a');_0x2a9fa3['geo']&&(_0xde44d4+='üåç\x20Country:\x20'+_0x2a9fa3['geo']+'\x0a');if(_0x2a9fa3[_0x4e9087(0x254)]){const _0xc53f19=_0x2a9fa3[_0x4e9087(0x254)][_0x4e9087(0x1bb)]>0x32?_0x2a9fa3['userAgent']['substring'](0x0,0x32)+_0x4e9087(0x19c):_0x2a9fa3[_0x4e9087(0x254)];_0xde44d4+=_0x4e9087(0x306)+_0xc53f19+'`\x0a';}!_0x2a9fa3[_0x4e9087(0x273)]&&(_0xde44d4+=_0x4e9087(0x298)),await this['sendShopNotification'](_0x119daa,_0xde44d4,{'parse_mode':_0x4e9087(0x307)}),console['log'](_0x4e9087(0x36e)+_0x119daa+':\x20'+(_0x2a9fa3['success']?_0x4e9087(0x273):'failed'));}catch(_0x4eb36b){console[_0x4e9087(0x275)](_0x4e9087(0x391),_0x4eb36b);}}async[a87_0x18a5e4(0x2a7)](_0x4587d0,_0x904c2c){const _0x554e1a=a87_0x18a5e4;try{const _0x347803=await database_1['default'][_0x554e1a(0x2ba)][_0x554e1a(0x1cd)]({'where':{'shopId':_0x4587d0},'select':{'notificationApiError':!![]}});if(!_0x347803?.[_0x554e1a(0x18e)]){console['log'](_0x554e1a(0x1b7)+_0x4587d0);return;}let _0x17abed=_0x554e1a(0x1b9)+(_0x554e1a(0x26b)+_0x904c2c[_0x554e1a(0x232)]+'\x20'+_0x904c2c[_0x554e1a(0x1d0)]+'`\x0a')+(_0x554e1a(0x237)+_0x904c2c['timestamp'][_0x554e1a(0x301)]('en-US')+'\x0a');_0x904c2c[_0x554e1a(0x25c)]&&(_0x17abed+=_0x554e1a(0x295)+_0x904c2c[_0x554e1a(0x25c)]+'`\x0a'),_0x17abed+=_0x554e1a(0x19f)+_0x904c2c[_0x554e1a(0x371)]+'`\x0a',_0x904c2c['requestId']&&(_0x17abed+=_0x554e1a(0x31c)+_0x904c2c['requestId']+'`\x0a'),_0x17abed+=_0x554e1a(0x2e2),await this[_0x554e1a(0x1d2)](_0x4587d0,_0x17abed,{'parse_mode':_0x554e1a(0x307)}),console[_0x554e1a(0x32e)](_0x554e1a(0x2bc)+_0x4587d0+':\x20'+_0x904c2c[_0x554e1a(0x1d0)]);}catch(_0x11c211){console[_0x554e1a(0x275)]('Failed\x20to\x20send\x20API\x20error\x20notification:',_0x11c211);}}async[a87_0x18a5e4(0x2d7)](_0xe9d7ad,_0x717ffc,_0x376293){const _0x40ff69=a87_0x18a5e4;let _0x18a0f2='üîî\x20*'+_0x717ffc+_0x40ff69(0x2fd);for(const [_0x363a75,_0x4565a4]of Object[_0x40ff69(0x29b)](_0x376293)){_0x4565a4!==null&&_0x4565a4!==undefined&&(_0x18a0f2+=_0x363a75+_0x40ff69(0x381)+_0x4565a4+'`\x0a');}await this[_0x40ff69(0x1d2)](_0xe9d7ad,_0x18a0f2,{'parse_mode':_0x40ff69(0x307)});}async[a87_0x18a5e4(0x202)](_0x5d8519){const _0x29eba8=a87_0x18a5e4;try{console[_0x29eba8(0x32e)]('üì±\x20Sending\x20notification\x20to\x20all\x20connected\x20users:\x20'+_0x5d8519['substring'](0x0,0x32)+_0x29eba8(0x19c));const _0x1ad824=await database_1['default']['telegramUser'][_0x29eba8(0x274)]({'select':{'telegramId':!![]}});if(_0x1ad824['length']===0x0){console[_0x29eba8(0x32e)]('üì±\x20No\x20active\x20Telegram\x20users\x20found');return;}for(const _0x236805 of _0x1ad824){try{await this['bot']?.[_0x29eba8(0x356)](_0x236805[_0x29eba8(0x3b6)],_0x5d8519,{'parse_mode':_0x29eba8(0x307)});}catch(_0x325905){console[_0x29eba8(0x275)](_0x29eba8(0x2dd)+_0x236805[_0x29eba8(0x3b6)]+':',_0x325905);}}console[_0x29eba8(0x32e)](_0x29eba8(0x27c)+_0x1ad824[_0x29eba8(0x1bb)]+_0x29eba8(0x277));}catch(_0x198717){console[_0x29eba8(0x275)](_0x29eba8(0x2d0),_0x198717);}}[a87_0x18a5e4(0x352)](){const _0x1bcbba=a87_0x18a5e4;return{'isActive':!!this[_0x1bcbba(0x282)],'username':this['botUsername']};}async[a87_0x18a5e4(0x1ca)](_0x330489,_0x903c44,_0xfcdd8b,_0x5941ec){const _0x4d40a5=a87_0x18a5e4;try{if(!this[_0x4d40a5(0x282)])return console[_0x4d40a5(0x275)](_0x4d40a5(0x1d8)),![];const _0x27822e=await database_1[_0x4d40a5(0x1a9)][_0x4d40a5(0x1be)][_0x4d40a5(0x274)]({'where':{'shopId':_0x330489,'isVerified':!![]},'select':{'telegramId':!![]}});if(_0x27822e[_0x4d40a5(0x1bb)]===0x0)return console['error'](_0x4d40a5(0x246)+_0x330489),![];let _0x4cefa9=0x0;for(const _0x1e3f35 of _0x27822e){try{await this[_0x4d40a5(0x282)]['sendDocument'](_0x1e3f35['telegramId'],_0x903c44,{},{'filename':_0xfcdd8b,'contentType':_0xfcdd8b[_0x4d40a5(0x203)]('.png')?_0x4d40a5(0x338):_0xfcdd8b[_0x4d40a5(0x203)](_0x4d40a5(0x1ab))||_0xfcdd8b['endsWith'](_0x4d40a5(0x188))?_0x4d40a5(0x35b):_0xfcdd8b[_0x4d40a5(0x203)](_0x4d40a5(0x308))?_0x4d40a5(0x218):'application/octet-stream'}),_0x5941ec&&await this[_0x4d40a5(0x282)][_0x4d40a5(0x356)](_0x1e3f35[_0x4d40a5(0x3b6)],_0x5941ec),_0x4cefa9++;}catch(_0x1518ed){console[_0x4d40a5(0x275)](_0x4d40a5(0x32c)+_0x1e3f35[_0x4d40a5(0x3b6)]+':',_0x1518ed);}}return console['log'](_0x4d40a5(0x2d8)+_0x4cefa9+'/'+_0x27822e[_0x4d40a5(0x1bb)]+_0x4d40a5(0x28f)+_0x330489+':\x20'+_0xfcdd8b),_0x4cefa9>0x0;}catch(_0x2a4707){return console['error'](_0x4d40a5(0x2e4),_0x2a4707),![];}}async[a87_0x18a5e4(0x1f2)](_0x5d1459,_0x31a99e){const _0x50c93a=a87_0x18a5e4;try{if(!this[_0x50c93a(0x282)])return console[_0x50c93a(0x275)]('‚ùå\x20Telegram\x20bot\x20not\x20initialized'),![];return await this[_0x50c93a(0x282)][_0x50c93a(0x356)](_0x5d1459,_0x31a99e),console[_0x50c93a(0x32e)](_0x50c93a(0x39d)+_0x5d1459),!![];}catch(_0x169a93){return console[_0x50c93a(0x275)](_0x50c93a(0x179),_0x169a93),![];}}async[a87_0x18a5e4(0x283)](_0x59ae34,_0x19ce20,_0x56b8eb,_0x22fa44){const _0x528685=a87_0x18a5e4;try{if(!this['bot'])return console[_0x528685(0x275)]('‚ùå\x20Telegram\x20bot\x20not\x20initialized'),![];return await this[_0x528685(0x282)][_0x528685(0x1b4)](_0x59ae34,_0x19ce20,{},{'filename':_0x56b8eb,'contentType':_0x56b8eb[_0x528685(0x203)]('.png')?_0x528685(0x338):_0x56b8eb[_0x528685(0x203)]('.jpg')||_0x56b8eb['endsWith']('.jpeg')?_0x528685(0x35b):_0x56b8eb[_0x528685(0x203)](_0x528685(0x308))?_0x528685(0x218):'application/octet-stream'}),_0x22fa44&&await this[_0x528685(0x282)]['sendMessage'](_0x59ae34,_0x22fa44),console['log'](_0x528685(0x27f)+_0x59ae34+':\x20'+_0x56b8eb),!![];}catch(_0x3913eb){return console[_0x528685(0x275)]('‚ùå\x20Error\x20sending\x20file\x20to\x20chat:',_0x3913eb),![];}}async[a87_0x18a5e4(0x2ff)](_0x5398ab,_0x3a9f35,_0x122390,_0x5a950c){const _0x58e456=a87_0x18a5e4,_0x416227=this['paymentLinkSessions'][_0x58e456(0x2f0)](_0x3a9f35)||{};try{if(_0x122390===_0x58e456(0x2ae)){this['paymentLinkSessions'][_0x58e456(0x3a5)](_0x3a9f35),await this[_0x58e456(0x282)]?.['editMessageText'](_0x58e456(0x1da),{'chat_id':_0x5398ab,'message_id':_0x5a950c});return;}if(_0x122390===_0x58e456(0x24b)){await this[_0x58e456(0x1d4)](_0x5398ab,_0x3a9f35,_0x5a950c,0x1);return;}if(_0x122390[_0x58e456(0x290)]('pl_page_')){const _0x48fd09=parseInt(_0x122390['replace'](_0x58e456(0x1bf),''));await this[_0x58e456(0x1d4)](_0x5398ab,_0x3a9f35,_0x5a950c,_0x48fd09);return;}if(_0x122390==='pl_create_new'){const _0x34eed5=await database_1[_0x58e456(0x1a9)][_0x58e456(0x1be)]['findUnique']({'where':{'telegramId':_0x3a9f35},'include':{'shop':!![]}});if(!_0x34eed5?.[_0x58e456(0x208)]?.[_0x58e456(0x34b)]){await this['bot']?.[_0x58e456(0x2f4)](_0x58e456(0x210),{'chat_id':_0x5398ab,'message_id':_0x5a950c});return;}let _0x4bfb30;try{_0x4bfb30=JSON['parse'](_0x34eed5[_0x58e456(0x208)]['paymentGateways']);}catch{_0x4bfb30=_0x34eed5['shop'][_0x58e456(0x34b)][_0x58e456(0x399)](',')[_0x58e456(0x29a)](_0x52061c=>_0x52061c[_0x58e456(0x229)]());}if(_0x4bfb30['length']===0x0){await this[_0x58e456(0x282)]?.[_0x58e456(0x2f4)](_0x58e456(0x3b8),{'chat_id':_0x5398ab,'message_id':_0x5a950c});return;}this[_0x58e456(0x296)][_0x58e456(0x1cc)](_0x3a9f35,{'step':_0x58e456(0x270)});const _0x34b6d7=_0x4bfb30[_0x58e456(0x2db)](_0x32fcb2=>{const _0x4fb7e0=_0x58e456,_0x55a161=Object[_0x4fb7e0(0x378)](gateway_1['GATEWAY_ID_MAP'])[_0x4fb7e0(0x230)](_0xd1dfca=>gateway_1[_0x4fb7e0(0x2a4)][_0xd1dfca]===_0x32fcb2)||_0x32fcb2;return[{'text':_0x4fb7e0(0x293)+_0x55a161,'callback_data':_0x4fb7e0(0x2b2)+_0x55a161}];});await this[_0x58e456(0x282)]?.['editMessageText'](_0x58e456(0x387),{'chat_id':_0x5398ab,'message_id':_0x5a950c,'parse_mode':_0x58e456(0x307),'reply_markup':{'inline_keyboard':[..._0x34b6d7,[{'text':_0x58e456(0x1c7),'callback_data':_0x58e456(0x2ae)}]]}});return;}if(_0x122390[_0x58e456(0x290)](_0x58e456(0x2b2))){const _0x21964c=_0x122390['replace'](_0x58e456(0x2b2),'');_0x416227[_0x58e456(0x270)]=_0x21964c,_0x416227[_0x58e456(0x18f)]='type',this[_0x58e456(0x296)][_0x58e456(0x1cc)](_0x3a9f35,_0x416227),await this['bot']?.[_0x58e456(0x2f4)]('üîó\x20*Create\x20Payment\x20Link*\x0a\x0a'+_0x58e456(0x27e),{'chat_id':_0x5398ab,'message_id':_0x5a950c,'parse_mode':'Markdown','reply_markup':{'inline_keyboard':[[{'text':'üîÇ\x20Single\x20Use','callback_data':_0x58e456(0x2b7)}],[{'text':_0x58e456(0x2d6),'callback_data':_0x58e456(0x32b)}],[{'text':_0x58e456(0x1c7),'callback_data':_0x58e456(0x2ae)}]]}});return;}if(_0x122390[_0x58e456(0x290)]('pl_type_')){const _0x3240de=_0x122390[_0x58e456(0x231)]('pl_type_','')[_0x58e456(0x291)]();_0x416227['type']=_0x3240de,_0x416227['step']='currency',_0x416227[_0x58e456(0x1d9)]=0x0,this[_0x58e456(0x296)][_0x58e456(0x1cc)](_0x3a9f35,_0x416227),await this[_0x58e456(0x39c)](_0x5398ab,_0x5a950c,_0x416227,0x0);return;}if(_0x122390[_0x58e456(0x290)](_0x58e456(0x299))){const _0x35b5e3=parseInt(_0x122390[_0x58e456(0x231)](_0x58e456(0x299),''));await this[_0x58e456(0x39c)](_0x5398ab,_0x5a950c,_0x416227,_0x35b5e3);return;}if(_0x122390[_0x58e456(0x290)](_0x58e456(0x300))){const _0xf2a6e0=_0x122390[_0x58e456(0x231)](_0x58e456(0x300),'');_0x416227['currency']=_0xf2a6e0,_0x416227[_0x58e456(0x18f)]=_0x58e456(0x1a6),this[_0x58e456(0x296)]['set'](_0x3a9f35,_0x416227),await this['bot']?.['editMessageText'](_0x58e456(0x244)+_0x58e456(0x234)+(_0x58e456(0x2a2)+_0xf2a6e0+_0x58e456(0x30e)),{'chat_id':_0x5398ab,'message_id':_0x5a950c,'parse_mode':_0x58e456(0x307)});return;}}catch(_0x4d9530){console[_0x58e456(0x275)](_0x58e456(0x2bd),_0x4d9530),await this[_0x58e456(0x282)]?.['sendMessage'](_0x5398ab,_0x58e456(0x2d1)),this[_0x58e456(0x296)][_0x58e456(0x3a5)](_0x3a9f35);}}async[a87_0x18a5e4(0x1d4)](_0x5dcec5,_0x4503e9,_0x4863d0,_0x135ced=0x1){const _0x19ab1d=a87_0x18a5e4;try{const _0x58c354=await database_1['default'][_0x19ab1d(0x1be)]['findUnique']({'where':{'telegramId':_0x4503e9},'include':{'shop':!![]}});if(!_0x58c354?.[_0x19ab1d(0x266)]){await this[_0x19ab1d(0x282)]?.[_0x19ab1d(0x356)](_0x5dcec5,_0x19ab1d(0x392));return;}const _0xb78c61=0x5,_0x24e618=(_0x135ced-0x1)*_0xb78c61,[_0xc7252c,_0xcfdb46]=await Promise[_0x19ab1d(0x20a)]([database_1[_0x19ab1d(0x1a9)][_0x19ab1d(0x33c)][_0x19ab1d(0x274)]({'where':{'shopId':_0x58c354[_0x19ab1d(0x266)]},'orderBy':{'createdAt':_0x19ab1d(0x2d9)},'take':_0xb78c61,'skip':_0x24e618}),database_1[_0x19ab1d(0x1a9)][_0x19ab1d(0x33c)]['count']({'where':{'shopId':_0x58c354['shopId']}})]),_0x5148ce=Math[_0x19ab1d(0x240)](_0xcfdb46/_0xb78c61);if(_0xc7252c[_0x19ab1d(0x1bb)]===0x0){const _0x2d9e99=_0x19ab1d(0x20e);_0x4863d0?await this[_0x19ab1d(0x282)]?.[_0x19ab1d(0x2f4)](_0x2d9e99,{'chat_id':_0x5dcec5,'message_id':_0x4863d0,'parse_mode':_0x19ab1d(0x345),'reply_markup':{'inline_keyboard':[[{'text':_0x19ab1d(0x30a),'callback_data':_0x19ab1d(0x36a)}]]}}):await this[_0x19ab1d(0x282)]?.['sendMessage'](_0x5dcec5,_0x2d9e99,{'parse_mode':_0x19ab1d(0x345),'reply_markup':{'inline_keyboard':[[{'text':'‚ûï\x20Create\x20New\x20Link','callback_data':_0x19ab1d(0x36a)}]]}});return;}let _0x8c48b3=_0x19ab1d(0x393)+_0x135ced+'/'+_0x5148ce+_0x19ab1d(0x1e6);_0xc7252c[_0x19ab1d(0x334)]((_0x388280,_0x15ded0)=>{const _0x421770=_0x19ab1d,_0x11c978=_0x24e618+_0x15ded0+0x1,_0x3b20c4=_0x388280[_0x421770(0x1a6)]?_0x388280[_0x421770(0x1a6)]+'\x20'+_0x388280[_0x421770(0x1a5)]:_0x421770(0x2c1),_0x373c15=_0x388280[_0x421770(0x297)]===_0x421770(0x2cb)?'‚úÖ':'‚ùå',_0x199adb=(process.env.FRONTEND_URL||_0x421770(0x1a2))+'/link/'+_0x388280['id'],_0x6fde49=_0x199adb['replace'](/\./g,'\x5c.')[_0x421770(0x231)](/-/g,'\x5c-')[_0x421770(0x231)](/\//g,'\x5c/');_0x8c48b3+=_0x11c978+_0x421770(0x206)+_0x373c15+'\x20*'+_0x3b20c4+'*\x0a',_0x8c48b3+=_0x421770(0x350)+_0x388280[_0x421770(0x270)]+_0x421770(0x23b)+_0x388280[_0x421770(0x34f)]+'\x0a',_0x8c48b3+=_0x421770(0x292)+_0x6fde49+_0x421770(0x361);});const _0x5e4e8b=[];_0x135ced>0x1&&_0x5e4e8b[_0x19ab1d(0x2fc)]({'text':_0x19ab1d(0x21d),'callback_data':_0x19ab1d(0x1bf)+(_0x135ced-0x1)});_0x135ced<_0x5148ce&&_0x5e4e8b[_0x19ab1d(0x2fc)]({'text':_0x19ab1d(0x1c8),'callback_data':_0x19ab1d(0x1bf)+(_0x135ced+0x1)});const _0x480bc3=[];_0x5e4e8b[_0x19ab1d(0x1bb)]>0x0&&_0x480bc3[_0x19ab1d(0x2fc)](_0x5e4e8b),_0x480bc3[_0x19ab1d(0x2fc)]([{'text':_0x19ab1d(0x30a),'callback_data':_0x19ab1d(0x36a)}]),_0x480bc3[_0x19ab1d(0x2fc)]([{'text':'‚ùå\x20Close','callback_data':'pl_cancel'}]),_0x4863d0?await this[_0x19ab1d(0x282)]?.['editMessageText'](_0x8c48b3,{'chat_id':_0x5dcec5,'message_id':_0x4863d0,'parse_mode':_0x19ab1d(0x345),'reply_markup':{'inline_keyboard':_0x480bc3}}):await this[_0x19ab1d(0x282)]?.[_0x19ab1d(0x356)](_0x5dcec5,_0x8c48b3,{'parse_mode':_0x19ab1d(0x345),'reply_markup':{'inline_keyboard':_0x480bc3}});}catch(_0x38355d){console[_0x19ab1d(0x275)]('Error\x20showing\x20payment\x20links\x20list:',_0x38355d),await this[_0x19ab1d(0x282)]?.[_0x19ab1d(0x356)](_0x5dcec5,_0x19ab1d(0x2a1));}}async['showCurrencyPage'](_0x3c1683,_0x51ba60,_0x5309d7,_0x53bd00){const _0x438fb8=a87_0x18a5e4,_0x2e2456=this[_0x438fb8(0x24c)](_0x5309d7[_0x438fb8(0x270)]),_0x375552=0xf,_0x591b4c=Math[_0x438fb8(0x240)](_0x2e2456[_0x438fb8(0x1bb)]/_0x375552),_0x17ff35=_0x53bd00*_0x375552,_0x3d340f=_0x17ff35+_0x375552,_0x1f4cc3=_0x2e2456[_0x438fb8(0x228)](_0x17ff35,_0x3d340f),_0x4c38ce=[];for(let _0x3257a2=0x0;_0x3257a2<_0x1f4cc3[_0x438fb8(0x1bb)];_0x3257a2+=0x3){const _0x2e70ae=_0x1f4cc3[_0x438fb8(0x228)](_0x3257a2,_0x3257a2+0x3)[_0x438fb8(0x2db)](_0x471159=>({'text':this['getCurrencyFlag'](_0x471159)+'\x20'+_0x471159,'callback_data':_0x438fb8(0x300)+_0x471159}));_0x4c38ce['push'](_0x2e70ae);}const _0x21318a=[];_0x53bd00>0x0&&_0x21318a[_0x438fb8(0x2fc)]({'text':_0x438fb8(0x21d),'callback_data':_0x438fb8(0x299)+(_0x53bd00-0x1)});_0x53bd00<_0x591b4c-0x1&&_0x21318a[_0x438fb8(0x2fc)]({'text':_0x438fb8(0x1c8),'callback_data':_0x438fb8(0x299)+(_0x53bd00+0x1)});const _0x2826f1=[..._0x4c38ce,..._0x21318a[_0x438fb8(0x1bb)]>0x0?[_0x21318a]:[],[{'text':_0x438fb8(0x1c7),'callback_data':_0x438fb8(0x2ae)}]];await this[_0x438fb8(0x282)]?.[_0x438fb8(0x2f4)](_0x438fb8(0x244)+_0x438fb8(0x32d)+(_0x438fb8(0x1ce)+(_0x53bd00+0x1)+'/'+_0x591b4c),{'chat_id':_0x3c1683,'message_id':_0x51ba60,'parse_mode':_0x438fb8(0x307),'reply_markup':{'inline_keyboard':_0x2826f1}});}['getGatewayCurrencies'](_0x5dddc6){const _0x5c3d76=a87_0x18a5e4,_0x23fb8d={'1000':[_0x5c3d76(0x38b),_0x5c3d76(0x2dc),_0x5c3d76(0x31a),_0x5c3d76(0x38e),_0x5c3d76(0x21c),'JPY',_0x5c3d76(0x263),_0x5c3d76(0x3ae),_0x5c3d76(0x1fb),_0x5c3d76(0x209),_0x5c3d76(0x1f5),'CZK',_0x5c3d76(0x25b),_0x5c3d76(0x2df),_0x5c3d76(0x34c),'TRY','MXN',_0x5c3d76(0x196),'CLP',_0x5c3d76(0x19a),_0x5c3d76(0x395),_0x5c3d76(0x377),_0x5c3d76(0x1ff),_0x5c3d76(0x32f),'MAD',_0x5c3d76(0x333),_0x5c3d76(0x355),_0x5c3d76(0x2ef),_0x5c3d76(0x25d),_0x5c3d76(0x339),'PKR','BDT',_0x5c3d76(0x3b0),_0x5c3d76(0x28d),_0x5c3d76(0x251),_0x5c3d76(0x2f5),'IDR',_0x5c3d76(0x1fa),_0x5c3d76(0x262),_0x5c3d76(0x34d),'HKD',_0x5c3d76(0x24a),'KRW',_0x5c3d76(0x224)],'0001':[_0x5c3d76(0x332),'EUR','GBP',_0x5c3d76(0x21c),_0x5c3d76(0x22a),_0x5c3d76(0x17a),_0x5c3d76(0x2ed),_0x5c3d76(0x263),_0x5c3d76(0x26a),'SEK',_0x5c3d76(0x1fb),_0x5c3d76(0x209),_0x5c3d76(0x1f5),_0x5c3d76(0x304),_0x5c3d76(0x25b),'BGN','RON',_0x5c3d76(0x34c),_0x5c3d76(0x220),_0x5c3d76(0x1d1),_0x5c3d76(0x38e),_0x5c3d76(0x30c),'ARS','INR','KRW',_0x5c3d76(0x34d),_0x5c3d76(0x2f8),'THB',_0x5c3d76(0x1fa),_0x5c3d76(0x262),_0x5c3d76(0x3b5),_0x5c3d76(0x2f5),_0x5c3d76(0x1ff),_0x5c3d76(0x32f),_0x5c3d76(0x200),_0x5c3d76(0x36c),_0x5c3d76(0x2bf),_0x5c3d76(0x1e9),_0x5c3d76(0x285),_0x5c3d76(0x3a7),_0x5c3d76(0x1f0),_0x5c3d76(0x380),_0x5c3d76(0x1c6),_0x5c3d76(0x1e0),_0x5c3d76(0x37a),_0x5c3d76(0x375),_0x5c3d76(0x2f6),_0x5c3d76(0x364),_0x5c3d76(0x3b0),_0x5c3d76(0x28d),_0x5c3d76(0x359),_0x5c3d76(0x20d),'KZT',_0x5c3d76(0x1e4),_0x5c3d76(0x201),_0x5c3d76(0x37c),'TMT',_0x5c3d76(0x2f9),'GEL',_0x5c3d76(0x26d),_0x5c3d76(0x2d5),_0x5c3d76(0x281),_0x5c3d76(0x337),_0x5c3d76(0x3b3),_0x5c3d76(0x2c3),_0x5c3d76(0x37e),_0x5c3d76(0x280),_0x5c3d76(0x29e),_0x5c3d76(0x30f),_0x5c3d76(0x2f2),_0x5c3d76(0x1fc),_0x5c3d76(0x353),_0x5c3d76(0x2ad),_0x5c3d76(0x1a8),'WST','TOP',_0x5c3d76(0x225),_0x5c3d76(0x224)],'0010':[_0x5c3d76(0x332),_0x5c3d76(0x38b),_0x5c3d76(0x2dc),_0x5c3d76(0x21c),'AUD',_0x5c3d76(0x17a),_0x5c3d76(0x2ed),'CNY',_0x5c3d76(0x3ae),_0x5c3d76(0x1fb),'DKK','PLN',_0x5c3d76(0x304),'HUF',_0x5c3d76(0x31a),_0x5c3d76(0x2df),_0x5c3d76(0x34c),_0x5c3d76(0x220),_0x5c3d76(0x38e),'MXN',_0x5c3d76(0x196),_0x5c3d76(0x249),_0x5c3d76(0x19a),_0x5c3d76(0x395),'UYU','ZAR','EGP','MAD',_0x5c3d76(0x333),_0x5c3d76(0x355),_0x5c3d76(0x2ef),'GHS',_0x5c3d76(0x339),_0x5c3d76(0x2f6),_0x5c3d76(0x364),_0x5c3d76(0x3b0),_0x5c3d76(0x28d),_0x5c3d76(0x251),_0x5c3d76(0x2f5),_0x5c3d76(0x3b5),_0x5c3d76(0x1fa),_0x5c3d76(0x262),_0x5c3d76(0x34d),_0x5c3d76(0x2f8),_0x5c3d76(0x24a),_0x5c3d76(0x1e5),'NZD'],'0100':[_0x5c3d76(0x38b)],'0101':[_0x5c3d76(0x38b)],'1001':[_0x5c3d76(0x38b)],'1010':['GBP'],'1100':[_0x5c3d76(0x38b),_0x5c3d76(0x332),_0x5c3d76(0x22a),'CAD',_0x5c3d76(0x2dc),_0x5c3d76(0x1fb),_0x5c3d76(0x2ed)],'1111':[_0x5c3d76(0x38b)],'0000':[_0x5c3d76(0x38b),_0x5c3d76(0x332),_0x5c3d76(0x22a),_0x5c3d76(0x21c),_0x5c3d76(0x2dc),_0x5c3d76(0x1fb),_0x5c3d76(0x2ed)],'1110':['EUR',_0x5c3d76(0x332),'GBP'],'2000':[_0x5c3d76(0x38b)],'2001':[_0x5c3d76(0x38b)],'2010':[_0x5c3d76(0x38b)],'2011':['CAD'],'2002':[_0x5c3d76(0x220)],'3000':['TRY',_0x5c3d76(0x200),_0x5c3d76(0x38b),_0x5c3d76(0x332),'AUD',_0x5c3d76(0x1f5),'NZD',_0x5c3d76(0x21c),_0x5c3d76(0x2dc),_0x5c3d76(0x196),_0x5c3d76(0x339)],'3001':['USD','EUR'],'3002':['TRY'],'3003':[_0x5c3d76(0x38b),_0x5c3d76(0x332),_0x5c3d76(0x2dc),_0x5c3d76(0x22a),_0x5c3d76(0x21c),_0x5c3d76(0x17a),'BRL',_0x5c3d76(0x3ae),_0x5c3d76(0x1fb),_0x5c3d76(0x209),_0x5c3d76(0x1f5),_0x5c3d76(0x304),'HUF',_0x5c3d76(0x2df),_0x5c3d76(0x34c)],'3004':[_0x5c3d76(0x332),_0x5c3d76(0x38b),_0x5c3d76(0x2dc),_0x5c3d76(0x21c),_0x5c3d76(0x22a)]};return _0x23fb8d[_0x5dddc6]||[_0x5c3d76(0x332)];}[a87_0x18a5e4(0x28c)](_0x6d5995){const _0x1808fc=a87_0x18a5e4,_0x1238e2={'USD':'üá∫üá∏','EUR':_0x1808fc(0x245),'GBP':_0x1808fc(0x33b),'JPY':_0x1808fc(0x2e3),'CNY':_0x1808fc(0x239),'AUD':'üá¶üá∫','CAD':_0x1808fc(0x31b),'CHF':_0x1808fc(0x30b),'SEK':_0x1808fc(0x3a4),'NOK':_0x1808fc(0x2e7),'DKK':'üá©üá∞','PLN':_0x1808fc(0x1a4),'CZK':_0x1808fc(0x30d),'HUF':'üá≠üá∫','BGN':_0x1808fc(0x19d),'RON':_0x1808fc(0x222),'HRK':_0x1808fc(0x1f6),'TRY':'üáπüá∑','RUB':'üá∑üá∫','UAH':_0x1808fc(0x318),'BRL':'üáßüá∑','MXN':_0x1808fc(0x3a8),'ARS':'üá¶üá∑','CLP':'üá®üá±','COP':_0x1808fc(0x1d3),'PEN':_0x1808fc(0x1ad),'UYU':'üá∫üáæ','ZAR':'üáøüá¶','EGP':_0x1808fc(0x1c9),'MAD':'üá≤üá¶','TND':_0x1808fc(0x303),'KES':_0x1808fc(0x268),'NGN':_0x1808fc(0x2de),'GHS':_0x1808fc(0x1ee),'INR':'üáÆüá≥','PKR':_0x1808fc(0x2f7),'BDT':_0x1808fc(0x3b1),'LKR':_0x1808fc(0x33f),'NPR':_0x1808fc(0x1c3),'THB':_0x1808fc(0x2a9),'VND':'üáªüá≥','IDR':_0x1808fc(0x31d),'MYR':'üá≤üáæ','PHP':_0x1808fc(0x384),'SGD':_0x1808fc(0x1f4),'HKD':'üá≠üá∞','TWD':'üáπüáº','KRW':_0x1808fc(0x2a5),'NZD':'üá≥üáø','AED':_0x1808fc(0x2b1),'SAR':'üá∏üá¶','QAR':_0x1808fc(0x2af),'KWD':_0x1808fc(0x2d3),'BHD':_0x1808fc(0x2ea),'OMR':_0x1808fc(0x2e6),'JOD':_0x1808fc(0x32a),'LBP':_0x1808fc(0x2be),'ILS':_0x1808fc(0x18b),'IRR':_0x1808fc(0x319),'IQD':_0x1808fc(0x2ec),'AFN':_0x1808fc(0x386),'BTN':_0x1808fc(0x1cf),'MVR':_0x1808fc(0x369),'KZT':_0x1808fc(0x1e3),'UZS':_0x1808fc(0x389),'KGS':_0x1808fc(0x242),'TJS':_0x1808fc(0x3a9),'TMT':'üáπüá≤','AZN':'üá¶üáø','GEL':_0x1808fc(0x37b),'AMD':'üá¶üá≤','BYN':'üáßüáæ','MDL':'üá≤üá©','ALL':_0x1808fc(0x27a),'MKD':_0x1808fc(0x39e),'RSD':_0x1808fc(0x1dd),'BAM':_0x1808fc(0x182),'MNT':_0x1808fc(0x21e),'KHR':_0x1808fc(0x3ad),'LAK':_0x1808fc(0x36d),'MMK':_0x1808fc(0x3b4),'BND':'üáßüá≥','FJD':_0x1808fc(0x21a),'PGK':_0x1808fc(0x288),'VUV':_0x1808fc(0x341),'WST':_0x1808fc(0x2e0),'TOP':_0x1808fc(0x189),'SBD':_0x1808fc(0x2c6)};return _0x1238e2[_0x6d5995]||'üí±';}async[a87_0x18a5e4(0x25a)](_0x9e6558,_0x508574,_0x5e7343,_0x26458f){const _0x524808=a87_0x18a5e4;try{const _0x379abd=new Date();let _0x2c6c31,_0x39b982,_0x524e95;switch(_0x5e7343){case'stats_today':{const _0x3a58c0=new Date(Date['UTC'](_0x379abd[_0x524808(0x186)](),_0x379abd[_0x524808(0x1af)](),_0x379abd[_0x524808(0x390)]()));_0x2c6c31=_0x3a58c0,_0x39b982=new Date(Date[_0x524808(0x1fd)](_0x379abd['getUTCFullYear'](),_0x379abd['getUTCMonth'](),_0x379abd[_0x524808(0x390)](),0x17,0x3b,0x3b,0x3e7)),_0x524e95=_0x3a58c0[_0x524808(0x390)]()[_0x524808(0x327)]()['padStart'](0x2,'0')+'.'+(_0x3a58c0[_0x524808(0x1af)]()+0x1)['toString']()[_0x524808(0x23f)](0x2,'0')+'.'+_0x3a58c0[_0x524808(0x186)]();break;}case _0x524808(0x349):{const _0x5913ae=new Date(Date['UTC'](_0x379abd[_0x524808(0x186)](),_0x379abd[_0x524808(0x1af)](),_0x379abd[_0x524808(0x390)]()-0x1));_0x2c6c31=_0x5913ae,_0x39b982=new Date(Date['UTC'](_0x379abd[_0x524808(0x186)](),_0x379abd['getUTCMonth'](),_0x379abd[_0x524808(0x390)]()-0x1,0x17,0x3b,0x3b,0x3e7)),_0x524e95=_0x5913ae['getUTCDate']()[_0x524808(0x327)]()[_0x524808(0x23f)](0x2,'0')+'.'+(_0x5913ae[_0x524808(0x1af)]()+0x1)[_0x524808(0x327)]()[_0x524808(0x23f)](0x2,'0')+'.'+_0x5913ae[_0x524808(0x186)]();break;}case _0x524808(0x2f1):{const _0x1b6932=new Date(Date['UTC'](_0x379abd[_0x524808(0x186)](),_0x379abd[_0x524808(0x1af)](),0x1));_0x2c6c31=_0x1b6932,_0x39b982=new Date(Date[_0x524808(0x1fd)](_0x379abd[_0x524808(0x186)](),_0x379abd[_0x524808(0x1af)]()+0x1,0x0,0x17,0x3b,0x3b,0x3e7));const _0x549993=new Date(Date[_0x524808(0x1fd)](_0x379abd[_0x524808(0x186)](),_0x379abd[_0x524808(0x1af)]()+0x1,0x0));_0x524e95=_0x1b6932[_0x524808(0x390)]()[_0x524808(0x327)]()[_0x524808(0x23f)](0x2,'0')+'.'+(_0x1b6932['getUTCMonth']()+0x1)[_0x524808(0x327)]()['padStart'](0x2,'0')+'.'+_0x1b6932[_0x524808(0x186)]()+_0x524808(0x2fe)+_0x549993[_0x524808(0x390)]()['toString']()[_0x524808(0x23f)](0x2,'0')+'.'+(_0x549993[_0x524808(0x1af)]()+0x1)[_0x524808(0x327)]()[_0x524808(0x23f)](0x2,'0')+'.'+_0x549993[_0x524808(0x186)]();break;}case'stats_last_month':{const _0x23a0db=new Date(Date[_0x524808(0x1fd)](_0x379abd['getUTCFullYear'](),_0x379abd[_0x524808(0x1af)]()-0x1,0x1));_0x2c6c31=_0x23a0db,_0x39b982=new Date(Date['UTC'](_0x379abd[_0x524808(0x186)](),_0x379abd[_0x524808(0x1af)](),0x0,0x17,0x3b,0x3b,0x3e7));const _0x4e99aa=new Date(Date[_0x524808(0x1fd)](_0x379abd[_0x524808(0x186)](),_0x379abd['getUTCMonth'](),0x0));_0x524e95=_0x23a0db[_0x524808(0x390)]()[_0x524808(0x327)]()[_0x524808(0x23f)](0x2,'0')+'.'+(_0x23a0db[_0x524808(0x1af)]()+0x1)['toString']()[_0x524808(0x23f)](0x2,'0')+'.'+_0x23a0db[_0x524808(0x186)]()+_0x524808(0x2fe)+_0x4e99aa['getUTCDate']()['toString']()[_0x524808(0x23f)](0x2,'0')+'.'+(_0x4e99aa['getUTCMonth']()+0x1)[_0x524808(0x327)]()[_0x524808(0x23f)](0x2,'0')+'.'+_0x4e99aa[_0x524808(0x186)]();break;}case'stats_all_time':{_0x2c6c31=new Date(0x0),_0x39b982=_0x379abd,_0x524e95=_0x524808(0x269);break;}default:return;}const _0x2e45b7=await database_1['default'][_0x524808(0x321)][_0x524808(0x274)]({'where':{'shopId':_0x508574,'createdAt':{'gte':_0x2c6c31,'lte':_0x39b982}},'select':{'status':!![],'amountUSDT':!![],'amountAfterGatewayCommissionUSDT':!![]}});let _0x518491=0x0,_0x1f9cb6=0x0,_0x42ed0d=0x0,_0x469fde=0x0,_0x15e1c9=0x0,_0x1613d6=0x0;_0x2e45b7[_0x524808(0x334)](_0x5ce4f0=>{const _0x450a8b=_0x524808,_0x16cc3f=_0x5ce4f0[_0x450a8b(0x2ee)]||0x0,_0x391056=_0x5ce4f0[_0x450a8b(0x235)]||0x0;if(_0x5ce4f0[_0x450a8b(0x297)]==='PAID')_0x518491+=_0x16cc3f,_0x1f9cb6+=_0x16cc3f-_0x391056,_0x42ed0d++;else{if(_0x5ce4f0[_0x450a8b(0x297)]==='FAILED'||_0x5ce4f0[_0x450a8b(0x297)]===_0x450a8b(0x279))_0x469fde++;else{if(_0x5ce4f0[_0x450a8b(0x297)]===_0x450a8b(0x2d2))_0x15e1c9++,_0x518491+=_0x16cc3f;else _0x5ce4f0[_0x450a8b(0x297)]===_0x450a8b(0x363)&&(_0x1613d6++,_0x518491+=_0x16cc3f);}}});const _0x5429cb=_0x42ed0d+_0x469fde,_0x27a28d=_0x5429cb>0x0?(_0x42ed0d/_0x5429cb*0x64)[_0x524808(0x17d)](0x1):_0x524808(0x1e8),_0x593a75=_0x524e95['replace'](/\./g,'\x5c.')[_0x524808(0x231)](/\-/g,'\x5c-'),_0x17d01b=_0x518491[_0x524808(0x17d)](0x2)[_0x524808(0x231)](/\./g,'\x5c.'),_0x37b27a=_0x1f9cb6['toFixed'](0x2)[_0x524808(0x231)](/\./g,'\x5c.'),_0x4d892f=_0x27a28d[_0x524808(0x231)](/\./g,'\x5c.'),_0x38bc76=_0x524808(0x335)+_0x593a75+'*\x0a\x0a'+(_0x524808(0x204)+_0x17d01b+'\x20USDT\x0a')+(_0x524808(0x1b0)+_0x37b27a+_0x524808(0x1b6))+(_0x524808(0x180)+_0x42ed0d+'\x0a')+('‚ùå\x20Failed\x20Payments\x20\x5c-\x20'+_0x469fde+'\x0a')+(_0x524808(0x253)+_0x4d892f+'%\x0a')+(_0x524808(0x255)+_0x15e1c9+'\x0a')+(_0x524808(0x17e)+_0x1613d6),_0x37ac87={'inline_keyboard':[[{'text':_0x524808(0x310),'callback_data':_0x524808(0x1f9)}]]};_0x26458f?await this[_0x524808(0x282)]?.[_0x524808(0x2f4)](_0x38bc76,{'chat_id':_0x9e6558,'message_id':_0x26458f,'parse_mode':_0x524808(0x345),'reply_markup':_0x37ac87}):await this[_0x524808(0x282)]?.['sendMessage'](_0x9e6558,_0x38bc76,{'parse_mode':_0x524808(0x345),'reply_markup':_0x37ac87});}catch(_0x5e3aba){console[_0x524808(0x275)](_0x524808(0x2e1),_0x5e3aba),await this[_0x524808(0x282)]?.[_0x524808(0x356)](_0x9e6558,'‚ùå\x20Error\x20getting\x20statistics');}}[a87_0x18a5e4(0x39f)](){const _0x2b2651=a87_0x18a5e4;this[_0x2b2651(0x282)]&&(this[_0x2b2651(0x282)][_0x2b2651(0x19b)](),this[_0x2b2651(0x282)]=null,console[_0x2b2651(0x32e)](_0x2b2651(0x243)));}}exports[a87_0x18a5e4(0x26c)]=TelegramBotService,exports[a87_0x18a5e4(0x343)]=new TelegramBotService();