'use strict';const a87_0x59b84c=a87_0x33bf;function a87_0x2fcd(){const _0x18b566=['üá∞üáø','üÜî\x20Payment\x20ID:\x20`','\x20initialized\x20successfully','üè¶\x20IBAN:\x20`','üá¨üá™','To\x20reconnect,\x20use\x20the\x20/start\x20command','üìä\x20*Connection\x20Status*\x0a\x0a','pl_cancel','sendDocument','üìÖ\x20Last\x20Month','‚ùå\x20Failed\x20Payments\x20\x5c-\x20','network','split','3891485cDXhmG','‚ùå\x20Error:\x20`','‚ùå\x20Cancelled.','‚ûï\x20Create\x20New\x20Link','cmd_back_to_menu','*.\x0a\x0a','‚ùå\x20You\x20are\x20not\x20connected\x20to\x20a\x20shop.\x0a\x0a','NPR','find','delete','KES','üìÖ\x20Date:\x20','‚ùå\x20Failed\x20to\x20send\x20notification\x20to\x20all\x20users:','üîó\x20Endpoint:\x20`','`\x20is\x20inactive.\x0a\x0a','__esModule','Error\x20handling\x20/start\x20command:','create','cmd_disconnect','polling_error','‚Ä¢\x20New\x20payments\x0a','üáπüá≤','pl_type_single','CZK',')\x0a\x0a','isVerified','bot','‚Ä¢\x20Share\x20link\x20directly','TND','Unknown','‚úÖ\x20You\x20are\x20already\x20connected\x20to\x20shop\x20*','üè™\x20Your\x20connected\x20shop:\x0a','GHS','üá∞üá≠','SGD','üá®üá¶','update','\x20\x20\x20Status:\x20','Markdown','BTN','üáπüáØ','MAD','‚ùå\x20Invalid\x20username\x20format:\x20`','üìÖ\x20Time:\x20','üîó\x20*Create\x20Payment\x20Link*\x0a\x0a','sendShopNotification','‚úÖ\x20Welcome\x20back!\x0a\x0a','`\x0a\x0a','CNY','üë§\x20Username:\x20`','üá≤üá∞','GBP','ceil','üîî\x20Notifications\x20are\x20active\x0a\x0a','stats_this_month','PENDING','user\x20is\x20deactivated','üåç\x20Country:\x20','üá∑üá∏','üìã\x20View\x20Payment\x20Links','0.0','üá≤üá≤','7216448XVwuqN','.jpg','üìä\x20Error\x20code:\x20`','/statistics\x20-\x20view\x20your\x20statistics\x0a','includes','image/png','This\x20feature\x20will\x20show:\x0a','sendCustomNotification','`appple\x20pk_aa6450d3f57afbefbb0f3f5be5ce6cca13037536afc5ccf14c81a6cbc7a07de5`\x0a\x0a','stopPolling','SEK','Multi\x20Use','COP','1431ADkmau','üáßüá¨','TMT','join','Error\x20getting\x20merchant\x20statistics:','https://trapay.uk/','cmd_contacts','all','üíª\x20Browser:\x20`','Error\x20handling\x20message:','currency','Telegram\x20bot\x20polling\x20error:','\x20\x5c|\x20Type:\x20','UTC','\x20\x20\x20Gateway:\x20','üáµüá™','üáπüá∑','ipAddress','chat\x20not\x20found','method','Use\x20/status\x20to\x20check\x20status\x20or\x20/disconnect\x20to\x20disconnect.','paymentGateways','\x0aüë§\x20*Customer\x20Information:*\x0a','‚úÖ\x20File\x20sent\x20to\x20chat\x20','editMessageText','cmd_status','stats_today','üìà\x20Conversion\x20\x5c-\x20','Please\x20check\x20the\x20spelling\x20and\x20try\x20again.\x0a\x0a','pk_','Error\x20handling\x20/payouts\x20command:','üí∏\x20*New\x20Payout*\x0a\x0a','‚Ä¢\x20Last\x205\x20payouts\x0a','\x22\x20->\x20display\x20\x22','üá±üá¶','üáßüá©','üá¶üá™','4291444MdkhbQ','üá∫üá¶','Error\x20handling\x20/payment_links\x20command:','push','Telegram\x20bot\x20error:','üìÖ\x20All\x20Time','ARS','publicKey','üìù\x20Notes:\x20','desc','TelegramBotService','‚Ä¢\x20Amount\x20and\x20network\x0a','botToken','ACTIVE','\x20\x20\x20Name:\x20*','Error\x20showing\x20payment\x20links\x20list:','timestamp','üîó\x20Payment\x20Links','üáßüáπ','\x20USDC\x0a','3LEdsct','üìû\x20Contacts','BHD','üáºüá∏','üì±\x20Created\x20new\x20Telegram\x20user:\x20','üí∏\x20*Payouts*\x0a\x0a','Payment\x20chargeback','stats_all_time','https://t.me/trapay_sales','TWD','endsWith','pl_view_list','pl_','‚úÖ\x20Login\x20notification\x20sent\x20for\x20shop\x20','Error\x20handling\x20/statistics\x20command:','‚ùå\x20An\x20error\x20occurred\x20while\x20verifying\x20data.','HRK','period','\x22,\x20apiKey=\x22','KHR','\x20(@','\x20users','New\x20payment\x20created','‚ùå\x20Cancel','AMD','errorMessage','trim','6YhgQpq','IDR','üáØüá¥','‚ùå\x20Invalid\x20format.\x20Please\x20send\x20exactly\x202\x20parts\x20separated\x20by\x20space:\x0a\x0a','Use\x20/start\x20to\x20connect.','NGN','üìÖ\x20Yesterday','...','üá∑üá¥','üá¶üá´','8882dKVhCB','createdAt','AUD','Username:\x20`','/payouts\x20-\x20view\x20recent\x20payouts\x0a','ZAR','toLocaleDateString','üí≥\x20*Wallet:*\x20`','üáØüáµ','remitterIban',':\x20username=\x22','Error\x20sending\x20shop\x20notification:','customerIp','PKR','PGK','Error\x20handling\x20/disconnect\x20command:','üîó\x20*Transaction\x20Link:*\x20Pending','üá∫üáø','üá≤üáª','OMR','sk_','paymentLink','üìõ\x20Name:\x20`','../config/database','telegramBotService','filter','üìÖ\x20This\x20Month','‚ùå\x20You\x20are\x20not\x20connected\x20to\x20a\x20shop.\x0a\x0aUse\x20/start\x20to\x20connect.','Failed\x20to\x20send\x20API\x20error\x20notification:','getBotInfo','‚Ä¢\x20Payouts\x0a','üí¨\x20Support','isValidGatewayId','toUpperCase','back_to_stats_menu','https://app.trapay.uk/login','telegramId','onText','‚úÖ\x20Notification\x20sent\x20to\x20Telegram\x20user\x20','toString','LBP','üá∞üáº','stopBot','geo','‚ôæÔ∏è\x20Multi\x20Use','Step\x203/4:\x20Select\x20currency\x0a','getGatewayDisplayNameForTelegram','LAK','‚úÖ\x20Paid\x20out:\x20','üîÑ\x20Processing\x20single-line\x20verification\x20for\x20user\x20','JOD','CLP','processing','Failed\x20login\x20attempt','‚ùå\x20Failed\x20to\x20initialize\x20Telegram\x20bot:','No\x20verified\x20Telegram\x20users\x20found\x20for\x20shop\x20','HUF','‚ùå\x20No\x20active\x20gateways\x20found.\x20Please\x20enable\x20at\x20least\x20one\x20gateway\x20in\x20the\x20admin\x20panel.','üá∞üá∑','üì±\x20Sending\x20notification\x20to\x20all\x20connected\x20users:\x20','üí∞\x20*Amount:*\x20','‚ùå\x20Shop\x20not\x20found.','pl_type_','You\x20are\x20connected\x20to\x20shop:\x20*','KGS','reduce','‚Ä¢\x20Important\x20events','‚Ä¢\x20Active\x20payment\x20links\x0a','numeric','IRR','gateway','Expected\x20key\x20format:\x20`pk_...`\x20or\x20`sk_...`','üá∞üá¨','All\x20Time','üá∏üá¨','MYR','Payment\x20successfully\x20paid','../types/gateway','LKR','MXN','customerEmail','üá≤üá¶','üîå\x20User\x20','/payment\x5c_links\x20-\x20manage\x20payment\x20links\x0a','shopId','üáßüá∑','üá¨üáß','adminNotes','üìä\x20*Statistics*\x0a\x0aSelect\x20period:','‚ùå\x20Shop\x20`','‚ùå\x20An\x20error\x20occurred.\x20Please\x20try\x20again.','üîå\x20Disconnect','2-digit','TJS','‚ùå\x20Unknown\x20command','üá¶üáø','secretKey','PAID','üîÑ\x20Type:\x20','üì±\x20No\x20active\x20Telegram\x20users\x20found','Payment\x20failed','IQD','botUsername','\x20USDT*\x0a','handlePaymentLinkFlow','allSettled','üìß\x20Email:\x20`','default','‚ùå\x20An\x20error\x20occurred.\x20Please\x20try\x20again\x20later.','‚úÖ\x20You\x20have\x20been\x20successfully\x20connected\x20to\x20the\x20notification\x20system!\x0a\x0a','success','üîî\x20Notifications\x20are\x20active','NOK','GATEWAY_ID_MAP','forEach','‚ùå\x20Shop\x20with\x20username\x20`','trapay_bot','message_id','answerCallbackQuery','üáµüá¨','AED','26418315xABEJa','pl_curr_page_','üìÖ\x20Connection\x20date:\x20','pl_curr_','Error\x20in\x20handleSingleLineVerification:','Not\x20specified','\x0a‚ö†Ô∏è\x20If\x20this\x20wasn\x27t\x20you,\x20change\x20your\x20password\x20immediately!','set','üìù\x20Format:\x20`username\x20api_key`\x0a\x0a','üáπüá¥','currencyPage','7275086ypkAeV','üáøüá¶','KWD','Payment\x20is\x20being\x20processed','üá∏üá™','SINGLE','üìä\x20Statistics','Step\x202/4:\x20Select\x20link\x20type','data','shop','‚úÖ\x20Telegram\x20bot\x20@','UZS','‚ùå\x20No\x20verified\x20Telegram\x20users\x20found\x20for\x20shop\x20ID:\x20','CHF','‚úÖ\x20You\x20have\x20been\x20successfully\x20disconnected\x20from\x20shop\x20*','MNT','application/octet-stream','API\x20key\x20must\x20start\x20with\x20`pk\x5c_`\x20or\x20`sk\x5c_`.','KRW','`.\x0a\x0a','defineProperty','Page\x20','requestId','getCurrencyFlag','stats_yesterday','Disconnect\x20one\x20of\x20the\x20existing\x20accounts\x20first.','sendShopFile','Payment\x20expired','CAD','‚ùå\x20An\x20error\x20occurred\x20while\x20loading\x20payment\x20links.','\x20users\x20of\x20shop\x20','‚ùå\x20Failed\x20to\x20send\x20message\x20to\x20user\x20','üá∫üáæ','SAR','map','slice','üåê\x20IP:\x20`','node-telegram-bot-api','üáÆüá∑','getUTCDate','üáπüá≥','/disconnect\x20-\x20disconnect\x20from\x20notifications','startsWith','üá¥üá≤','handleSingleLineVerification','‚ùå\x20Invalid\x20amount.\x20Please\x20enter\x20a\x20valid\x20number\x20greater\x20than\x200.','shopSettings','‚¨ÖÔ∏è\x20Previous','.pdf','üá¶üá≤','‚úÖ\x20File\x20sent\x20to\x20','sendPayoutNotification','getUTCFullYear','pl_page_','entries','You\x20are\x20already\x20connected\x20to\x20shop:\x20*','üîÑ\x20Reset\x20incomplete\x20verification\x20for\x20user\x20','üìÖ\x20Today','üè¶\x20Gateway:\x20','cmd_payouts','EGP','üìû\x20*Contacts*','Single\x20Use','‚ùå\x20Close','sendDirectFile','text','Error\x20handling\x20/contacts\x20command:','keys','üá∏üáß','sendMessage','‚ùå\x20You\x20are\x20not\x20connected\x20to\x20the\x20notification\x20system.','status','length','‚úÖ\x20*Payment\x20Link\x20Created\x20Successfully\x5c!*\x0a\x0a','getGatewayCurrencies','N/A','‚ùå\x20Failed\x20to\x20send\x20notification\x20to\x20Telegram\x20user\x20','\x20via\x20single-line\x20input','üí∞\x20Amount:\x20*','pl_type_multi','Step\x204/4:\x20Enter\x20amount\x0a\x0a','updatedAt','‚úÖ\x20API\x20error\x20notification\x20sent\x20for\x20shop\x20','pl_create_new','pl_gw_','/link/','__importDefault','üá∫üá∏','HKD','‚ùóÔ∏è\x20Make\x20sure\x20to\x20separate\x20username\x20and\x20API\x20key\x20with\x20a\x20space!','üá≤üá≥','EUR','üá≥üá¨','‚ùå\x20Invalid\x20API\x20key\x20format.\x0a\x0a','üîó\x20*Create\x20Payment\x20Link*\x0a\x0aStep\x201/4:\x20Select\x20gateway','https://app.trapay.uk','üÜî\x20Request\x20ID:\x20`','failed','\x5c)\x0a\x0a','‚Ä¢\x20Dates\x20and\x20TX\x20IDs','customerName','RON','PLN','FJD','initializeBot','findMany','.jpeg','sendNotificationToAll','username','üá™üá∫','\x20verified\x20for\x20shop\x20','.png','‚ùå\x20Error\x20getting\x20statistics','‚ùå\x20You\x20are\x20not\x20connected\x20to\x20any\x20shop.\x0a\x0a','‚ùå\x20Error\x20sending\x20file\x20to\x20chat:','‚Ä¢\x20Transaction\x20status\x0a','stats_last_month','238dFfjAc','paymentLinkSessions','image/jpeg','NZD','üáßüáæ','substring','PHP','telegramUser','üì±\x20Available\x20Commands:\x0a','‚ùå\x20You\x20are\x20not\x20registered\x20in\x20the\x20system.\x0a\x0a','TRY','en-US','üí∏\x20Payouts','üá©üá∞','üí∏\x20Penalty\x20amount:\x20*','Contact\x20administrator.','getUTCMonth','chargebackAmount','üì±\x20API\x20error\x20notifications\x20disabled\x20for\x20shop\x20','log','*\x0a\x0a','Gateway\x20-\x20','message','36870YVtant','EXPIRED','üîó\x20*Payment\x20Links*\x0a\x0a','üá®üá¥','payout','USD','üá≤üá©','DKK','statusCode','sendApiErrorNotification','txid','last_name','üîÇ\x20Single\x20Use','üë§\x20Account','JPY','Username\x20must\x20contain\x20only\x20letters,\x20numbers\x20and\x20underscore\x20(3-50\x20characters).',':\x20`','getGatewayNameById','MarkdownV2','üá±üáß','BDT','cmd_payment_links','count','Copy\x20and\x20share\x20this\x20link\x20with\x20your\x20customers\x5c!','Error\x20handling\x20/debug\x20command:','üì±\x20Login\x20notifications\x20disabled\x20for\x20shop\x20','THB','üì±\x20Telegram\x20notification:\x20gateway\x20\x22','üí∞\x20Turnover\x20\x5c-\x20','‚Ä¢\x20Quick\x20create\x20new\x20link\x0a','KZT','‚ùå\x20Telegram\x20bot\x20not\x20initialized','üá≤üáæ','üáßüá≠','MMK','üá¶üá±','error','amount','MVR','toFixed','üáÆüá±','üá≥üáø','https://t.me/trapay_news','INR','...\x22','step','BGN','‚ùå\x20Error\x20getting\x20debug\x20information.','FAILED','type','\x20parts:\x20','üîç\x20*Debug\x20Information*\x0a\x0a','üè™\x20Gateway:\x20`','userAgent','VND','PEN','üá¨üá≠','‚Ä¢\x20Payouts','üìä\x20Status','üáªüá∫','findUnique','test','endpoint','padStart','chat','üö®\x20*API\x20Error*\x0a\x0a','CHARGEBACK','toLocaleString','application/pdf','BYN','üì±\x20Notification\x20sent\x20to\x20','Please\x20send\x20the\x20amount\x20in\x20','Next\x20‚û°Ô∏è','warn','üá´üáØ','UYU','from','setupBotHandlers','sendLoginNotification','AZN','AFN','üì¢\x20Telegram\x20channel','customerUa','showPaymentLinksList','VUV','‚Ä¢\x20Payment\x20status\x20changes\x0a','\x20(e.g.,\x20100)','\x0aüí°\x20Check\x20your\x20request\x20or\x20contact\x20support.','üá≠üá∑','cmd_statistics','‚ùå\x20Shop\x20not\x20found.\x20Please\x20start\x20over\x20with\x20/start','‚ö†Ô∏è\x20Chargebacks\x20\x5c-\x20','üîî\x20You\x20receive\x20notifications\x20about:\x0a','REFUND','‚¨ÖÔ∏è\x20Back','üí∏\x20*Recent\x20Payouts*\x0a\x0a','WST','replace','‚ùå\x20Maximum\x20number\x20of\x20connected\x20accounts\x20(5)\x20reached\x20for\x20shop\x20`','ü§ñ\x20Welcome\x20to\x20TRAPAY\x20notification\x20system!\x0a\x0a','üá®üá±','Example:\x0a','sendPaymentNotification','unknown\x20shop','name','\x20USDT\x0a','amountAfterGatewayCommissionUSDT','\x20-\x20','üá±üá∞','üáßüá≥','‚ùå\x20API\x20key\x20does\x20not\x20match\x20shop\x20`','callback_query','üáµüá±','BRL','üéâ\x20*Congratulations!*\x0a\x0a','\x5c.\x20','üáÆüá≥','üáπüáº','COMPLETED','‚úÖ\x20Connected\x20to\x20shop:\x20*','parse','handleMerchantStatistics','üá∂üá¶'];a87_0x2fcd=function(){return _0x18b566;};return a87_0x2fcd();}(function(_0x5d5991,_0xd5ed7e){const _0x42667a=a87_0x33bf,_0x424301=_0x5d5991();while(!![]){try{const _0x10391e=-parseInt(_0x42667a(0x39d))/0x1*(parseInt(_0x42667a(0x255))/0x2)+-parseInt(_0x42667a(0x378))/0x3*(parseInt(_0x42667a(0x364))/0x4)+parseInt(_0x42667a(0x2f4))/0x5+parseInt(_0x42667a(0x393))/0x6*(parseInt(_0x42667a(0x1e0))/0x7)+-parseInt(_0x42667a(0x332))/0x8+parseInt(_0x42667a(0x33f))/0x9*(-parseInt(_0x42667a(0x26c))/0xa)+parseInt(_0x42667a(0x1d5))/0xb;if(_0x10391e===_0xd5ed7e)break;else _0x424301['push'](_0x424301['shift']());}catch(_0x5671a7){_0x424301['push'](_0x424301['shift']());}}}(a87_0x2fcd,0x92c40));var __importDefault=this&&this[a87_0x59b84c(0x236)]||function(_0x2fad06){const _0x39ee40=a87_0x59b84c;return _0x2fad06&&_0x2fad06[_0x39ee40(0x303)]?_0x2fad06:{'default':_0x2fad06};};Object[a87_0x59b84c(0x1f4)](exports,a87_0x59b84c(0x303),{'value':!![]}),exports[a87_0x59b84c(0x3b5)]=exports[a87_0x59b84c(0x36e)]=void 0x0;const node_telegram_bot_api_1=__importDefault(require(a87_0x59b84c(0x205))),database_1=__importDefault(require(a87_0x59b84c(0x3b4))),gateway_1=require(a87_0x59b84c(0x1a9));function a87_0x33bf(_0x31ee0d,_0x375d0b){_0x31ee0d=_0x31ee0d-0x18a;const _0x2fcdd5=a87_0x2fcd();let _0x33bf24=_0x2fcdd5[_0x31ee0d];return _0x33bf24;}class TelegramBotService{constructor(){const _0x20f632=a87_0x59b84c;this[_0x20f632(0x30e)]=null,this[_0x20f632(0x256)]=new Map(),this[_0x20f632(0x370)]=process.env.TELEGRAM_BOT_TOKEN||'',this[_0x20f632(0x1c2)]=process.env.TELEGRAM_BOT_USERNAME||_0x20f632(0x1d0),this[_0x20f632(0x370)]?this[_0x20f632(0x248)]():console[_0x20f632(0x2b5)]('TELEGRAM_BOT_TOKEN\x20not\x20found\x20in\x20environment\x20variables');}[a87_0x59b84c(0x248)](){const _0x63efcd=a87_0x59b84c;try{this[_0x63efcd(0x30e)]=new node_telegram_bot_api_1[(_0x63efcd(0x1c7))](this[_0x63efcd(0x370)],{'polling':!![]}),this[_0x63efcd(0x2b9)](),console[_0x63efcd(0x268)](_0x63efcd(0x1ea)+this[_0x63efcd(0x1c2)]+_0x63efcd(0x2e9));}catch(_0x1ce931){console['error'](_0x63efcd(0x192),_0x1ce931);}}[a87_0x59b84c(0x2b9)](){const _0x451fcf=a87_0x59b84c;if(!this['bot'])return;this[_0x451fcf(0x30e)]['onText'](/\/start/,async _0x190d02=>{const _0x2e6ff9=_0x451fcf,_0x2a0ed7=_0x190d02[_0x2e6ff9(0x2ac)]['id'],_0x271452=_0x190d02['from']?.['id'][_0x2e6ff9(0x3c4)](),_0x2ad4d3=_0x190d02[_0x2e6ff9(0x2b8)]?.[_0x2e6ff9(0x24c)],_0x45ec62=_0x190d02[_0x2e6ff9(0x2b8)]?.['first_name'],_0x50e8ca=_0x190d02[_0x2e6ff9(0x2b8)]?.[_0x2e6ff9(0x277)];if(!_0x271452)return;try{let _0x5e0657=await database_1[_0x2e6ff9(0x1c7)][_0x2e6ff9(0x25c)][_0x2e6ff9(0x2a8)]({'where':{'telegramId':_0x271452},'include':{'shop':!![]}});!_0x5e0657?(_0x5e0657=await database_1['default'][_0x2e6ff9(0x25c)][_0x2e6ff9(0x305)]({'data':{'telegramId':_0x271452,'username':_0x2ad4d3,'firstName':_0x45ec62,'lastName':_0x50e8ca,'isVerified':![],'shopId':null},'include':{'shop':!![]}}),console[_0x2e6ff9(0x268)](_0x2e6ff9(0x37c)+_0x271452+_0x2e6ff9(0x38c)+_0x2ad4d3+')')):_0x5e0657=await database_1[_0x2e6ff9(0x1c7)][_0x2e6ff9(0x25c)][_0x2e6ff9(0x318)]({'where':{'telegramId':_0x271452},'data':{'username':_0x2ad4d3,'firstName':_0x45ec62,'lastName':_0x50e8ca},'include':{'shop':!![]}}),_0x5e0657[_0x2e6ff9(0x30d)]&&_0x5e0657['shopId']&&_0x5e0657[_0x2e6ff9(0x1e9)]?await this[_0x2e6ff9(0x30e)]?.['sendMessage'](_0x2a0ed7,'‚úÖ\x20Welcome\x20back!\x0a\x0a'+(_0x2e6ff9(0x217)+_0x5e0657['shop'][_0x2e6ff9(0x2d4)]+'*\x0a')+(_0x2e6ff9(0x3a0)+_0x5e0657[_0x2e6ff9(0x1e9)][_0x2e6ff9(0x24c)]+_0x2e6ff9(0x323))+'üîî\x20You\x20receive\x20notifications\x20about:\x0a'+_0x2e6ff9(0x308)+'‚Ä¢\x20Payment\x20status\x20changes\x0a'+_0x2e6ff9(0x2a5),{'parse_mode':_0x2e6ff9(0x31a),'reply_markup':{'inline_keyboard':[[{'text':'üìä\x20Statistics','callback_data':_0x2e6ff9(0x2c5)},{'text':_0x2e6ff9(0x261),'callback_data':_0x2e6ff9(0x21b)}],[{'text':_0x2e6ff9(0x375),'callback_data':_0x2e6ff9(0x281)},{'text':'üìä\x20Status','callback_data':'cmd_status'}],[{'text':_0x2e6ff9(0x379),'callback_data':'cmd_contacts'},{'text':_0x2e6ff9(0x1b7),'callback_data':'cmd_disconnect'}]]}}):(_0x5e0657['shopId']&&!_0x5e0657['isVerified']&&(await database_1[_0x2e6ff9(0x1c7)][_0x2e6ff9(0x25c)][_0x2e6ff9(0x318)]({'where':{'telegramId':_0x271452},'data':{'shopId':null,'isVerified':![]}}),console['log'](_0x2e6ff9(0x218)+_0x271452)),await this[_0x2e6ff9(0x30e)]?.[_0x2e6ff9(0x225)](_0x2a0ed7,_0x2e6ff9(0x2cf)+'To\x20receive\x20payment\x20notifications,\x20send\x20your\x20credentials\x20in\x20one\x20line:\x0a\x0a'+_0x2e6ff9(0x1dd)+_0x2e6ff9(0x2d1)+_0x2e6ff9(0x33a)+_0x2e6ff9(0x239),{'parse_mode':'Markdown'}));}catch(_0x25875f){console[_0x2e6ff9(0x290)](_0x2e6ff9(0x304),_0x25875f),await this[_0x2e6ff9(0x30e)]?.[_0x2e6ff9(0x225)](_0x2a0ed7,_0x2e6ff9(0x1c8));}}),this['bot'][_0x451fcf(0x3c2)](/\/disconnect/,async _0x2b64a8=>{const _0x3ca724=_0x451fcf,_0x1ab728=_0x2b64a8[_0x3ca724(0x2ac)]['id'],_0x1a8e34=_0x2b64a8[_0x3ca724(0x2b8)]?.['id'][_0x3ca724(0x3c4)]();if(!_0x1a8e34)return;try{const _0x456961=await database_1[_0x3ca724(0x1c7)]['telegramUser'][_0x3ca724(0x2a8)]({'where':{'telegramId':_0x1a8e34},'include':{'shop':!![]}});if(!_0x456961||!_0x456961[_0x3ca724(0x30d)]||!_0x456961['shopId']){await this[_0x3ca724(0x30e)]?.['sendMessage'](_0x1ab728,_0x3ca724(0x226));return;}const _0x5dde3f=_0x456961['shop']?.[_0x3ca724(0x2d4)]||_0x3ca724(0x2d3);await database_1[_0x3ca724(0x1c7)][_0x3ca724(0x25c)][_0x3ca724(0x318)]({'where':{'telegramId':_0x1a8e34},'data':{'shopId':null,'isVerified':![]}}),console[_0x3ca724(0x268)](_0x3ca724(0x1ae)+_0x1a8e34+'\x20disconnected\x20from\x20shop\x20'+_0x456961[_0x3ca724(0x1b0)]),await this['bot']?.['sendMessage'](_0x1ab728,'‚úÖ\x20You\x20have\x20been\x20successfully\x20disconnected\x20from\x20shop\x20*'+_0x5dde3f+_0x3ca724(0x2f9)+_0x3ca724(0x2ec),{'parse_mode':_0x3ca724(0x31a)});}catch(_0x2d2df5){console[_0x3ca724(0x290)](_0x3ca724(0x3ac),_0x2d2df5),await this[_0x3ca724(0x30e)]?.['sendMessage'](_0x1ab728,_0x3ca724(0x1c8));}}),this['bot']['onText'](/\/status/,async _0x170505=>{const _0x5f3086=_0x451fcf,_0x3188f5=_0x170505['chat']['id'],_0x22c4d9=_0x170505[_0x5f3086(0x2b8)]?.['id'][_0x5f3086(0x3c4)]();if(!_0x22c4d9)return;try{const _0x53a2d8=await database_1['default'][_0x5f3086(0x25c)][_0x5f3086(0x2a8)]({'where':{'telegramId':_0x22c4d9},'include':{'shop':!![]}});if(!_0x53a2d8){await this[_0x5f3086(0x30e)]?.[_0x5f3086(0x225)](_0x3188f5,_0x5f3086(0x25e)+'Use\x20/start\x20to\x20begin.');return;}if(!_0x53a2d8['isVerified']||!_0x53a2d8[_0x5f3086(0x1b0)]||!_0x53a2d8[_0x5f3086(0x1e9)]){await this[_0x5f3086(0x30e)]?.[_0x5f3086(0x225)](_0x3188f5,'‚ùå\x20You\x20are\x20not\x20connected\x20to\x20a\x20shop.\x0a\x0a'+_0x5f3086(0x397));return;}await this['bot']?.['sendMessage'](_0x3188f5,_0x5f3086(0x2ed)+(_0x5f3086(0x2e3)+_0x53a2d8[_0x5f3086(0x1e9)][_0x5f3086(0x2d4)]+'*\x0a')+(_0x5f3086(0x325)+_0x53a2d8[_0x5f3086(0x1e9)][_0x5f3086(0x24c)]+'`\x0a')+(_0x5f3086(0x1d7)+_0x53a2d8[_0x5f3086(0x231)][_0x5f3086(0x3a3)](_0x5f3086(0x260))+'\x0a\x0a')+_0x5f3086(0x329)+_0x5f3086(0x25d)+_0x5f3086(0x335)+_0x5f3086(0x3a1)+_0x5f3086(0x1af)+'/contacts\x20-\x20support\x20contacts\x0a'+_0x5f3086(0x209),{'parse_mode':_0x5f3086(0x31a)});}catch(_0x599af2){console[_0x5f3086(0x290)]('Error\x20handling\x20/status\x20command:',_0x599af2),await this[_0x5f3086(0x30e)]?.[_0x5f3086(0x225)](_0x3188f5,_0x5f3086(0x1c8));}}),this[_0x451fcf(0x30e)][_0x451fcf(0x3c2)](/\/statistics/,async _0x56f2c5=>{const _0x48612e=_0x451fcf,_0xf6ccaa=_0x56f2c5[_0x48612e(0x2ac)]['id'],_0x3c8a9d=_0x56f2c5[_0x48612e(0x2b8)]?.['id'][_0x48612e(0x3c4)]();if(!_0x3c8a9d)return;try{const _0x2e3d7a=await database_1[_0x48612e(0x1c7)][_0x48612e(0x25c)]['findUnique']({'where':{'telegramId':_0x3c8a9d},'include':{'shop':!![]}});if(!_0x2e3d7a?.[_0x48612e(0x30d)]||!_0x2e3d7a[_0x48612e(0x1b0)]){await this[_0x48612e(0x30e)]?.[_0x48612e(0x225)](_0xf6ccaa,_0x48612e(0x2fa)+'Use\x20/start\x20to\x20connect.');return;}const _0x14aafb={'inline_keyboard':[[{'text':_0x48612e(0x219),'callback_data':_0x48612e(0x359)}],[{'text':_0x48612e(0x399),'callback_data':'stats_yesterday'}],[{'text':'üìÖ\x20This\x20Month','callback_data':_0x48612e(0x32a)}],[{'text':_0x48612e(0x2f0),'callback_data':_0x48612e(0x254)}],[{'text':_0x48612e(0x369),'callback_data':_0x48612e(0x37f)}],[{'text':_0x48612e(0x2ca),'callback_data':_0x48612e(0x2f8)}]]};await this['bot']?.[_0x48612e(0x225)](_0xf6ccaa,_0x48612e(0x1b4),{'parse_mode':'Markdown','reply_markup':_0x14aafb});}catch(_0x1b7b7d){console[_0x48612e(0x290)](_0x48612e(0x386),_0x1b7b7d),await this[_0x48612e(0x30e)]?.['sendMessage'](_0xf6ccaa,_0x48612e(0x1c8));}}),this['bot']['onText'](/\/payouts/,async _0xa485e8=>{const _0x1b5af5=_0x451fcf,_0x29d118=_0xa485e8[_0x1b5af5(0x2ac)]['id'],_0x257e3b=_0xa485e8[_0x1b5af5(0x2b8)]?.['id'][_0x1b5af5(0x3c4)]();if(!_0x257e3b)return;try{const _0x3216b8=await database_1[_0x1b5af5(0x1c7)][_0x1b5af5(0x25c)][_0x1b5af5(0x2a8)]({'where':{'telegramId':_0x257e3b},'include':{'shop':!![]}});if(!_0x3216b8?.['isVerified']||!_0x3216b8['shopId']){await this[_0x1b5af5(0x30e)]?.['sendMessage'](_0x29d118,_0x1b5af5(0x2fa)+_0x1b5af5(0x397));return;}await this[_0x1b5af5(0x30e)]?.['sendMessage'](_0x29d118,_0x1b5af5(0x2cb)+'Coming\x20soon...\x0a\x0a'+_0x1b5af5(0x338)+_0x1b5af5(0x35f)+_0x1b5af5(0x36f)+_0x1b5af5(0x253)+_0x1b5af5(0x243),{'parse_mode':'Markdown'});}catch(_0x2da6f9){console[_0x1b5af5(0x290)](_0x1b5af5(0x35d),_0x2da6f9),await this[_0x1b5af5(0x30e)]?.[_0x1b5af5(0x225)](_0x29d118,_0x1b5af5(0x1c8));}}),this['bot']['onText'](/\/payment_links/,async _0x234e51=>{const _0x47656d=_0x451fcf,_0x361f5f=_0x234e51[_0x47656d(0x2ac)]['id'],_0x81fba6=_0x234e51[_0x47656d(0x2b8)]?.['id'][_0x47656d(0x3c4)]();if(!_0x81fba6)return;try{const _0x2fba51=await database_1[_0x47656d(0x1c7)][_0x47656d(0x25c)][_0x47656d(0x2a8)]({'where':{'telegramId':_0x81fba6},'include':{'shop':!![]}});if(!_0x2fba51?.['isVerified']||!_0x2fba51['shopId']){await this[_0x47656d(0x30e)]?.[_0x47656d(0x225)](_0x361f5f,'‚ùå\x20You\x20are\x20not\x20connected\x20to\x20a\x20shop.\x0a\x0a'+_0x47656d(0x397));return;}await this['bot']?.[_0x47656d(0x225)](_0x361f5f,_0x47656d(0x26e)+'Coming\x20soon...\x0a\x0a'+'This\x20feature\x20will\x20show:\x0a'+_0x47656d(0x19f)+'‚Ä¢\x20Usage\x20statistics\x0a'+_0x47656d(0x289)+_0x47656d(0x30f),{'parse_mode':_0x47656d(0x31a)});}catch(_0x445108){console[_0x47656d(0x290)](_0x47656d(0x366),_0x445108),await this['bot']?.[_0x47656d(0x225)](_0x361f5f,_0x47656d(0x1c8));}}),this[_0x451fcf(0x30e)][_0x451fcf(0x3c2)](/\/contacts/,async _0x4f8ab6=>{const _0x98c88c=_0x451fcf,_0x344b55=_0x4f8ab6[_0x98c88c(0x2ac)]['id'];try{await this[_0x98c88c(0x30e)]?.[_0x98c88c(0x225)](_0x344b55,_0x98c88c(0x21d),{'parse_mode':_0x98c88c(0x31a),'reply_markup':{'inline_keyboard':[[{'text':'üåê\x20Website','url':_0x98c88c(0x344)}],[{'text':_0x98c88c(0x279),'url':'https://app.trapay.uk/login'}],[{'text':_0x98c88c(0x2bd),'url':'https://t.me/trapay_news'}],[{'text':_0x98c88c(0x3bc),'url':_0x98c88c(0x380)}]]}});}catch(_0x276d24){console[_0x98c88c(0x290)](_0x98c88c(0x222),_0x276d24),await this[_0x98c88c(0x30e)]?.[_0x98c88c(0x225)](_0x344b55,_0x98c88c(0x1c8));}}),this['bot']['on'](_0x451fcf(0x2db),async _0x5df5f5=>{const _0x24a4a8=_0x451fcf,_0x3bcd83=_0x5df5f5[_0x24a4a8(0x26b)],_0x3409d0=_0x3bcd83?.[_0x24a4a8(0x2ac)]['id'],_0xaaa487=_0x5df5f5[_0x24a4a8(0x2b8)]['id'][_0x24a4a8(0x3c4)](),_0xc5fd97=_0x5df5f5[_0x24a4a8(0x1e8)];if(!_0x3409d0||!_0xc5fd97)return;try{await this[_0x24a4a8(0x30e)]?.[_0x24a4a8(0x1d2)](_0x5df5f5['id']);const _0x210284=await database_1[_0x24a4a8(0x1c7)][_0x24a4a8(0x25c)][_0x24a4a8(0x2a8)]({'where':{'telegramId':_0xaaa487},'include':{'shop':!![]}});if(!_0x210284?.[_0x24a4a8(0x30d)]||!_0x210284[_0x24a4a8(0x1b0)]){await this['bot']?.[_0x24a4a8(0x225)](_0x3409d0,_0x24a4a8(0x3b8));return;}switch(_0xc5fd97){case _0x24a4a8(0x2c5):const _0xa0e829={'inline_keyboard':[[{'text':_0x24a4a8(0x219),'callback_data':'stats_today'}],[{'text':_0x24a4a8(0x399),'callback_data':_0x24a4a8(0x1f8)}],[{'text':_0x24a4a8(0x3b7),'callback_data':_0x24a4a8(0x32a)}],[{'text':_0x24a4a8(0x2f0),'callback_data':_0x24a4a8(0x254)}],[{'text':_0x24a4a8(0x369),'callback_data':'stats_all_time'}],[{'text':_0x24a4a8(0x2ca),'callback_data':_0x24a4a8(0x2f8)}]]};await this[_0x24a4a8(0x30e)]?.[_0x24a4a8(0x225)](_0x3409d0,_0x24a4a8(0x1b4),{'parse_mode':_0x24a4a8(0x31a),'reply_markup':_0xa0e829});break;case'stats_today':case _0x24a4a8(0x1f8):case _0x24a4a8(0x32a):case _0x24a4a8(0x254):case _0x24a4a8(0x37f):await this[_0x24a4a8(0x2e5)](_0x3409d0,_0x210284[_0x24a4a8(0x1b0)],_0xc5fd97,_0x3bcd83?.[_0x24a4a8(0x1d1)]);break;case _0x24a4a8(0x3bf):const _0x1f24ea={'inline_keyboard':[[{'text':_0x24a4a8(0x219),'callback_data':_0x24a4a8(0x359)}],[{'text':'üìÖ\x20Yesterday','callback_data':_0x24a4a8(0x1f8)}],[{'text':_0x24a4a8(0x3b7),'callback_data':_0x24a4a8(0x32a)}],[{'text':_0x24a4a8(0x2f0),'callback_data':'stats_last_month'}],[{'text':_0x24a4a8(0x369),'callback_data':_0x24a4a8(0x37f)}],[{'text':'‚¨ÖÔ∏è\x20Back','callback_data':'cmd_back_to_menu'}]]};_0x3bcd83?.[_0x24a4a8(0x1d1)]?await this[_0x24a4a8(0x30e)]?.['editMessageText'](_0x24a4a8(0x1b4),{'chat_id':_0x3409d0,'message_id':_0x3bcd83[_0x24a4a8(0x1d1)],'parse_mode':'Markdown','reply_markup':_0x1f24ea}):await this[_0x24a4a8(0x30e)]?.[_0x24a4a8(0x225)](_0x3409d0,_0x24a4a8(0x1b4),{'parse_mode':_0x24a4a8(0x31a),'reply_markup':_0x1f24ea});break;case _0x24a4a8(0x21b):const _0x20fb4a=await database_1[_0x24a4a8(0x1c7)][_0x24a4a8(0x270)][_0x24a4a8(0x249)]({'where':{'shopId':_0x210284[_0x24a4a8(0x1b0)]},'orderBy':{'createdAt':_0x24a4a8(0x36d)}}),_0x53c3eb=_0x20fb4a[_0x24a4a8(0x3b6)](_0x450010=>_0x450010[_0x24a4a8(0x227)]===_0x24a4a8(0x32b))[_0x24a4a8(0x19d)]((_0x14e0a4,_0xded46c)=>_0x14e0a4+_0xded46c[_0x24a4a8(0x291)],0x0),_0x31a974=_0x20fb4a[_0x24a4a8(0x3b6)](_0x589bb0=>_0x589bb0[_0x24a4a8(0x227)]===_0x24a4a8(0x2e2))[_0x24a4a8(0x19d)]((_0x29a16a,_0x2faee7)=>_0x29a16a+_0x2faee7[_0x24a4a8(0x291)],0x0),_0x370707=(_0x210284[_0x24a4a8(0x1e9)]?.['balance']||0x0)+(_0x210284[_0x24a4a8(0x1e9)]?.['totalPaidOut']||0x0);await this[_0x24a4a8(0x30e)]?.[_0x24a4a8(0x225)](_0x3409d0,_0x24a4a8(0x37d)+('‚è≥\x20Pending\x20payouts:\x20'+_0x53c3eb[_0x24a4a8(0x293)](0x2)+_0x24a4a8(0x377))+(_0x24a4a8(0x18c)+_0x31a974[_0x24a4a8(0x293)](0x2)+_0x24a4a8(0x377))+('üí∞\x20Total\x20earned:\x20'+_0x370707[_0x24a4a8(0x293)](0x2)+'\x20USDC'),{'parse_mode':_0x24a4a8(0x31a),'reply_markup':{'inline_keyboard':[[{'text':_0x24a4a8(0x2ca),'callback_data':_0x24a4a8(0x2f8)}]]}});break;case _0x24a4a8(0x281):await this['bot']?.[_0x24a4a8(0x225)](_0x3409d0,'üîó\x20*Payment\x20Links*\x0a\x0aChoose\x20an\x20action:',{'parse_mode':'Markdown','reply_markup':{'inline_keyboard':[[{'text':_0x24a4a8(0x32f),'callback_data':_0x24a4a8(0x383)}],[{'text':'‚ûï\x20Create\x20New\x20Link','callback_data':'pl_create_new'}],[{'text':_0x24a4a8(0x2ca),'callback_data':_0x24a4a8(0x2f8)}]]}});break;case'cmd_status':await this[_0x24a4a8(0x30e)]?.[_0x24a4a8(0x225)](_0x3409d0,'üìä\x20*Connection\x20Status*\x0a\x0a'+(_0x24a4a8(0x2e3)+(_0x210284[_0x24a4a8(0x1e9)]?.[_0x24a4a8(0x2d4)]||_0x24a4a8(0x311))+'*\x0a')+(_0x24a4a8(0x325)+(_0x210284['shop']?.[_0x24a4a8(0x24c)]||'Unknown')+'`\x0a')+(_0x24a4a8(0x1d7)+_0x210284['updatedAt'][_0x24a4a8(0x3a3)](_0x24a4a8(0x260))+'\x0a\x0a')+_0x24a4a8(0x1cb),{'parse_mode':'Markdown','reply_markup':{'inline_keyboard':[[{'text':_0x24a4a8(0x2ca),'callback_data':'cmd_back_to_menu'}]]}});break;case _0x24a4a8(0x345):await this['bot']?.[_0x24a4a8(0x225)](_0x3409d0,_0x24a4a8(0x21d),{'parse_mode':_0x24a4a8(0x31a),'reply_markup':{'inline_keyboard':[[{'text':'üåê\x20Website','url':_0x24a4a8(0x344)}],[{'text':'üë§\x20Account','url':_0x24a4a8(0x3c0)}],[{'text':_0x24a4a8(0x2bd),'url':_0x24a4a8(0x296)}],[{'text':_0x24a4a8(0x3bc),'url':_0x24a4a8(0x380)}],[{'text':_0x24a4a8(0x2ca),'callback_data':_0x24a4a8(0x2f8)}]]}});break;case'cmd_back_to_menu':await this['bot']?.[_0x24a4a8(0x225)](_0x3409d0,_0x24a4a8(0x322)+(_0x24a4a8(0x19b)+(_0x210284[_0x24a4a8(0x1e9)]?.[_0x24a4a8(0x2d4)]||_0x24a4a8(0x311))+'*\x0a')+(_0x24a4a8(0x3a0)+(_0x210284[_0x24a4a8(0x1e9)]?.[_0x24a4a8(0x24c)]||'Unknown')+_0x24a4a8(0x323))+_0x24a4a8(0x2c8)+_0x24a4a8(0x308)+_0x24a4a8(0x2c1)+_0x24a4a8(0x2a5),{'parse_mode':'Markdown','reply_markup':{'inline_keyboard':[[{'text':'üìä\x20Statistics','callback_data':_0x24a4a8(0x2c5)},{'text':_0x24a4a8(0x261),'callback_data':_0x24a4a8(0x21b)}],[{'text':_0x24a4a8(0x375),'callback_data':_0x24a4a8(0x281)},{'text':'üìä\x20Status','callback_data':'cmd_status'}],[{'text':'üìû\x20Contacts','callback_data':'cmd_contacts'},{'text':_0x24a4a8(0x1b7),'callback_data':_0x24a4a8(0x306)}]]}});break;case _0x24a4a8(0x306):await database_1[_0x24a4a8(0x1c7)][_0x24a4a8(0x25c)][_0x24a4a8(0x318)]({'where':{'telegramId':_0xaaa487},'data':{'shopId':null,'isVerified':![]}}),await this[_0x24a4a8(0x30e)]?.[_0x24a4a8(0x225)](_0x3409d0,_0x24a4a8(0x1ee)+(_0x210284[_0x24a4a8(0x1e9)]?.[_0x24a4a8(0x2d4)]||_0x24a4a8(0x311))+_0x24a4a8(0x2f9)+'To\x20reconnect,\x20use\x20the\x20/start\x20command',{'parse_mode':_0x24a4a8(0x31a)});break;default:_0xc5fd97[_0x24a4a8(0x20a)](_0x24a4a8(0x384))?await this[_0x24a4a8(0x1c4)](_0x3409d0,_0xaaa487,_0xc5fd97,_0x5df5f5[_0x24a4a8(0x26b)]?.[_0x24a4a8(0x1d1)]):await this[_0x24a4a8(0x30e)]?.['sendMessage'](_0x3409d0,_0x24a4a8(0x1ba));}}catch(_0x1dd3e8){console[_0x24a4a8(0x290)]('Error\x20handling\x20callback\x20query:',_0x1dd3e8),await this[_0x24a4a8(0x30e)]?.[_0x24a4a8(0x225)](_0x3409d0,_0x24a4a8(0x1c8));}}),this['bot'][_0x451fcf(0x3c2)](/\/debug/,async _0x29cf5e=>{const _0x46fb03=_0x451fcf,_0x3f90f3=_0x29cf5e[_0x46fb03(0x2ac)]['id'],_0x295917=_0x29cf5e[_0x46fb03(0x2b8)]?.['id'][_0x46fb03(0x3c4)]();if(!_0x295917)return;try{const _0x144b13=await database_1[_0x46fb03(0x1c7)][_0x46fb03(0x25c)]['findUnique']({'where':{'telegramId':_0x295917},'include':{'shop':!![]}});let _0x25bc6f=_0x46fb03(0x29f);_0x25bc6f+='üì±\x20Your\x20Telegram\x20ID:\x20`'+_0x295917+'`\x0a\x0a',_0x144b13?.[_0x46fb03(0x30d)]&&_0x144b13[_0x46fb03(0x1e9)]?(_0x25bc6f+=_0x46fb03(0x313),_0x25bc6f+=_0x46fb03(0x372)+_0x144b13[_0x46fb03(0x1e9)][_0x46fb03(0x2d4)]+'*\x0a',_0x25bc6f+='\x20\x20\x20Username:\x20`'+_0x144b13[_0x46fb03(0x1e9)][_0x46fb03(0x24c)]+'`\x0a',_0x25bc6f+=_0x46fb03(0x319)+_0x144b13[_0x46fb03(0x1e9)]['status']+'\x0a\x0a'):_0x25bc6f+=_0x46fb03(0x251),_0x25bc6f+='Use\x20/start\x20to\x20connect\x20to\x20a\x20shop.',await this[_0x46fb03(0x30e)]?.[_0x46fb03(0x225)](_0x3f90f3,_0x25bc6f,{'parse_mode':'Markdown'});}catch(_0x3745e9){console['error'](_0x46fb03(0x284),_0x3745e9),await this[_0x46fb03(0x30e)]?.[_0x46fb03(0x225)](_0x3f90f3,_0x46fb03(0x29b));}}),this[_0x451fcf(0x30e)]['on'](_0x451fcf(0x26b),async _0x2f96bf=>{const _0x33680d=_0x451fcf;if(_0x2f96bf[_0x33680d(0x221)]?.[_0x33680d(0x20a)]('/'))return;const _0x3523f9=_0x2f96bf[_0x33680d(0x2ac)]['id'],_0x443c8e=_0x2f96bf[_0x33680d(0x2b8)]?.['id'][_0x33680d(0x3c4)](),_0x2b8466=_0x2f96bf[_0x33680d(0x221)]?.[_0x33680d(0x392)]();if(!_0x443c8e||!_0x2b8466)return;try{const _0x1615c8=this['paymentLinkSessions']['get'](_0x443c8e);if(_0x1615c8&&_0x1615c8[_0x33680d(0x299)]===_0x33680d(0x291)){const _0x39ecdf=parseFloat(_0x2b8466);if(isNaN(_0x39ecdf)||_0x39ecdf<=0x0){await this['bot']?.['sendMessage'](_0x3523f9,_0x33680d(0x20d));return;}const _0x360292=await database_1['default'][_0x33680d(0x25c)][_0x33680d(0x2a8)]({'where':{'telegramId':_0x443c8e},'include':{'shop':!![]}});if(!_0x360292?.[_0x33680d(0x1b0)]){await this[_0x33680d(0x30e)]?.['sendMessage'](_0x3523f9,_0x33680d(0x2c6)),this[_0x33680d(0x256)]['delete'](_0x443c8e);return;}const _0x13eeca=(0x0,gateway_1[_0x33680d(0x3bd)])(_0x1615c8['gateway'])?(0x0,gateway_1[_0x33680d(0x27d)])(_0x1615c8[_0x33680d(0x1a2)]):_0x1615c8[_0x33680d(0x1a2)],_0x37467a={'shopId':_0x360292[_0x33680d(0x1b0)],'gateway':_0x13eeca,'amount':_0x39ecdf,'currency':_0x1615c8[_0x33680d(0x349)],'type':_0x1615c8[_0x33680d(0x29d)],'status':_0x33680d(0x371)},_0x10e36b=await database_1['default']['paymentLink'][_0x33680d(0x305)]({'data':_0x37467a});this[_0x33680d(0x256)][_0x33680d(0x2fd)](_0x443c8e);const _0x20a056=(process.env.FRONTEND_URL||_0x33680d(0x23f))+_0x33680d(0x235)+_0x10e36b['id'],_0x2c5788=_0x20a056[_0x33680d(0x2cd)](/\./g,'\x5c.')[_0x33680d(0x2cd)](/-/g,'\x5c-')[_0x33680d(0x2cd)](/\//g,'\x5c/');await this['bot']?.[_0x33680d(0x225)](_0x3523f9,_0x33680d(0x229)+('üîó\x20Link:\x20'+_0x2c5788+'\x0a')+('üí∞\x20Amount:\x20'+_0x39ecdf+'\x20'+_0x1615c8[_0x33680d(0x349)]+'\x0a')+(_0x33680d(0x21a)+_0x1615c8[_0x33680d(0x1a2)]+'\x0a')+(_0x33680d(0x1be)+(_0x1615c8[_0x33680d(0x29d)]===_0x33680d(0x1e5)?_0x33680d(0x21e):_0x33680d(0x33d))+'\x0a\x0a')+_0x33680d(0x283),{'parse_mode':_0x33680d(0x27e)});return;}const _0x109ec2=await database_1[_0x33680d(0x1c7)][_0x33680d(0x25c)]['findUnique']({'where':{'telegramId':_0x443c8e},'include':{'shop':!![]}});if(!_0x109ec2){await this[_0x33680d(0x30e)]?.[_0x33680d(0x225)](_0x3523f9,'‚ùå\x20Please\x20use\x20/start\x20command\x20first');return;}if(_0x109ec2[_0x33680d(0x30d)]&&_0x109ec2[_0x33680d(0x1b0)]&&_0x109ec2[_0x33680d(0x1e9)]){await this[_0x33680d(0x30e)]?.[_0x33680d(0x225)](_0x3523f9,_0x33680d(0x312)+_0x109ec2[_0x33680d(0x1e9)][_0x33680d(0x2d4)]+_0x33680d(0x2f9)+_0x33680d(0x353),{'parse_mode':_0x33680d(0x31a)});return;}const _0x2d5b50=_0x2b8466[_0x33680d(0x2f3)](/\s+/);if(_0x2d5b50[_0x33680d(0x228)]!==0x2){await this['bot']?.[_0x33680d(0x225)](_0x3523f9,_0x33680d(0x396)+'üìù\x20Format:\x20`username\x20api_key`\x0a\x0a'+_0x33680d(0x2d1)+_0x33680d(0x33a)+('You\x20sent\x20'+_0x2d5b50['length']+_0x33680d(0x29e)+_0x2d5b50['map'](_0x4ee272=>'`'+_0x4ee272+'`')[_0x33680d(0x342)](',\x20')),{'parse_mode':_0x33680d(0x31a)});return;}const [_0x2ecb8f,_0x1382bb]=_0x2d5b50;console[_0x33680d(0x268)](_0x33680d(0x18d)+_0x443c8e+':\x20username=\x22'+_0x2ecb8f+_0x33680d(0x38a)+_0x1382bb[_0x33680d(0x25a)](0x0,0xa)+_0x33680d(0x298)),await this[_0x33680d(0x20c)](_0x3523f9,_0x443c8e,_0x2ecb8f,_0x1382bb);}catch(_0x141deb){console['error'](_0x33680d(0x348),_0x141deb),await this[_0x33680d(0x30e)]?.[_0x33680d(0x225)](_0x3523f9,_0x33680d(0x1c8));}}),this['bot']['on'](_0x451fcf(0x290),_0x50ca59=>{const _0x4d6d03=_0x451fcf;console[_0x4d6d03(0x290)](_0x4d6d03(0x368),_0x50ca59);}),this[_0x451fcf(0x30e)]['on'](_0x451fcf(0x307),_0x285afe=>{const _0x5b8e32=_0x451fcf;console['error'](_0x5b8e32(0x34a),_0x285afe);});}async[a87_0x59b84c(0x20c)](_0x47f1fb,_0x2e99ca,_0x464642,_0x5869ee){const _0x1a7107=a87_0x59b84c;try{console['log'](_0x1a7107(0x18d)+_0x2e99ca+_0x1a7107(0x3a7)+_0x464642+_0x1a7107(0x38a)+_0x5869ee[_0x1a7107(0x25a)](0x0,0xa)+_0x1a7107(0x298));if(!_0x464642||_0x464642[_0x1a7107(0x228)]<0x3||_0x464642[_0x1a7107(0x228)]>0x32||!/^[a-zA-Z0-9_]+$/[_0x1a7107(0x2a9)](_0x464642)){await this['bot']?.[_0x1a7107(0x225)](_0x47f1fb,_0x1a7107(0x31e)+_0x464642+_0x1a7107(0x323)+_0x1a7107(0x27b),{'parse_mode':_0x1a7107(0x31a)});return;}if(!_0x5869ee||!_0x5869ee[_0x1a7107(0x20a)](_0x1a7107(0x35c))&&!_0x5869ee['startsWith'](_0x1a7107(0x3b1))){await this['bot']?.[_0x1a7107(0x225)](_0x47f1fb,_0x1a7107(0x23d)+_0x1a7107(0x1f1),{'parse_mode':_0x1a7107(0x31a)});return;}const _0x4208fb=await database_1[_0x1a7107(0x1c7)]['shop']['findUnique']({'where':{'username':_0x464642},'select':{'id':!![],'name':!![],'username':!![],'status':!![],'publicKey':!![],'secretKey':!![]}});if(!_0x4208fb){const _0x2a36c1=_0x1a7107(0x1cf)+_0x464642+'`\x20not\x20found.\x0a\x0a'+_0x1a7107(0x35b)+'Make\x20sure\x20you\x20have\x20the\x20correct\x20username\x20from\x20your\x20account.';await this['bot']?.[_0x1a7107(0x225)](_0x47f1fb,_0x2a36c1,{'parse_mode':_0x1a7107(0x31a)});return;}if(_0x4208fb[_0x1a7107(0x227)]!==_0x1a7107(0x371)){await this[_0x1a7107(0x30e)]?.[_0x1a7107(0x225)](_0x47f1fb,_0x1a7107(0x1b5)+_0x464642+_0x1a7107(0x302)+_0x1a7107(0x264),{'parse_mode':_0x1a7107(0x31a)});return;}if(_0x4208fb[_0x1a7107(0x36b)]!==_0x5869ee&&_0x4208fb[_0x1a7107(0x1bc)]!==_0x5869ee){await this[_0x1a7107(0x30e)]?.[_0x1a7107(0x225)](_0x47f1fb,_0x1a7107(0x2da)+_0x464642+_0x1a7107(0x1f3)+'Check\x20the\x20key\x20and\x20try\x20again.\x0a\x0a'+_0x1a7107(0x1a3),{'parse_mode':_0x1a7107(0x31a)});return;}const _0x2b0e25=await database_1[_0x1a7107(0x1c7)][_0x1a7107(0x25c)][_0x1a7107(0x282)]({'where':{'shopId':_0x4208fb['id'],'isVerified':!![]}});if(_0x2b0e25>=0x5){await this[_0x1a7107(0x30e)]?.['sendMessage'](_0x47f1fb,_0x1a7107(0x2ce)+_0x464642+_0x1a7107(0x1f3)+_0x1a7107(0x1f9),{'parse_mode':_0x1a7107(0x31a)});return;}await database_1[_0x1a7107(0x1c7)][_0x1a7107(0x25c)][_0x1a7107(0x318)]({'where':{'telegramId':_0x2e99ca},'data':{'shopId':_0x4208fb['id'],'isVerified':!![]}}),await this[_0x1a7107(0x30e)]?.['sendMessage'](_0x47f1fb,_0x1a7107(0x2de)+_0x1a7107(0x1c9)+('üì±\x20Shop:\x20*'+_0x4208fb[_0x1a7107(0x2d4)]+'*\x0a')+('üë§\x20Username:\x20`'+_0x4208fb[_0x1a7107(0x24c)]+_0x1a7107(0x323))+'üîî\x20You\x20will\x20now\x20receive\x20notifications\x20about:\x0a'+_0x1a7107(0x308)+_0x1a7107(0x2c1)+_0x1a7107(0x3bb)+_0x1a7107(0x19e),{'parse_mode':_0x1a7107(0x31a),'reply_markup':{'inline_keyboard':[[{'text':_0x1a7107(0x1e6),'callback_data':_0x1a7107(0x2c5)},{'text':_0x1a7107(0x261),'callback_data':_0x1a7107(0x21b)}],[{'text':_0x1a7107(0x375),'callback_data':_0x1a7107(0x281)},{'text':_0x1a7107(0x2a6),'callback_data':_0x1a7107(0x358)}],[{'text':_0x1a7107(0x379),'callback_data':'cmd_contacts'},{'text':_0x1a7107(0x1b7),'callback_data':_0x1a7107(0x306)}]]}}),console['log']('‚úÖ\x20Telegram\x20user\x20'+_0x2e99ca+_0x1a7107(0x24e)+_0x4208fb['username']+_0x1a7107(0x22d));}catch(_0x39c60e){console[_0x1a7107(0x290)](_0x1a7107(0x1d9),_0x39c60e),await this[_0x1a7107(0x30e)]?.[_0x1a7107(0x225)](_0x47f1fb,_0x1a7107(0x387));}}async[a87_0x59b84c(0x321)](_0x476fcb,_0x4a629a,_0x11c1f9){const _0x5a7fa3=a87_0x59b84c;if(!this[_0x5a7fa3(0x30e)]){console[_0x5a7fa3(0x2b5)]('Telegram\x20bot\x20not\x20initialized,\x20cannot\x20send\x20notification');return;}try{const _0xa91da7=await database_1['default'][_0x5a7fa3(0x25c)]['findMany']({'where':{'shopId':_0x476fcb,'isVerified':!![]}});if(_0xa91da7[_0x5a7fa3(0x228)]===0x0){console[_0x5a7fa3(0x268)](_0x5a7fa3(0x193)+_0x476fcb);return;}const _0x533e5a=_0xa91da7[_0x5a7fa3(0x202)](async _0x5a9227=>{const _0x183d94=_0x5a7fa3;try{await this[_0x183d94(0x30e)]?.[_0x183d94(0x225)](_0x5a9227[_0x183d94(0x3c1)],_0x4a629a,_0x11c1f9),console[_0x183d94(0x268)](_0x183d94(0x3c3)+_0x5a9227['telegramId']);}catch(_0x5f2de0){console[_0x183d94(0x290)](_0x183d94(0x22c)+_0x5a9227['telegramId']+':',_0x5f2de0),_0x5f2de0 instanceof Error&&(_0x5f2de0['message'][_0x183d94(0x336)]('blocked')||_0x5f2de0[_0x183d94(0x26b)][_0x183d94(0x336)](_0x183d94(0x351))||_0x5f2de0[_0x183d94(0x26b)][_0x183d94(0x336)](_0x183d94(0x32c)))&&(await database_1['default']['telegramUser']['update']({'where':{'id':_0x5a9227['id']},'data':{'isVerified':![]}}),console[_0x183d94(0x268)]('User\x20'+_0x5a9227['telegramId']+'\x20marked\x20as\x20unverified\x20due\x20to\x20delivery\x20failure'));}});await Promise[_0x5a7fa3(0x1c5)](_0x533e5a);}catch(_0x229c37){console['error'](_0x5a7fa3(0x3a8),_0x229c37);}}async[a87_0x59b84c(0x2d2)](_0x3ce2b1,_0x448966,_0x17c083){const _0x3a513f=a87_0x59b84c,_0x55bddc={'created':'üÜï','paid':'‚úÖ','failed':'‚ùå','expired':'‚è∞','refund':'üîÑ','chargeback':'‚ö†Ô∏è','processing':'‚öôÔ∏è'},_0xbe2969={'created':_0x3a513f(0x38e),'paid':_0x3a513f(0x1a8),'failed':_0x3a513f(0x1c0),'expired':_0x3a513f(0x1fb),'refund':'Payment\x20refund','chargeback':_0x3a513f(0x37e),'processing':_0x3a513f(0x1e3)},_0x56db3e=_0x55bddc[_0x17c083],_0x174f85=_0xbe2969[_0x17c083],_0x4be6c1=(0x0,gateway_1[_0x3a513f(0x18a)])(_0x448966['gateway']);console['log'](_0x3a513f(0x287)+_0x448966[_0x3a513f(0x1a2)]+_0x3a513f(0x360)+_0x4be6c1+'\x22');let _0x4a71cd=_0x56db3e+'\x20*'+_0x174f85+_0x3a513f(0x269)+(_0x3a513f(0x22e)+_0x448966['amount']+'\x20'+_0x448966['currency']+'*\x0a')+('üìù\x20Order\x20ID:\x20`'+(_0x448966['orderId']||_0x448966['id'])+'`\x0a')+(_0x3a513f(0x2e8)+_0x448966['id']+'`\x0a')+(_0x3a513f(0x2a0)+_0x4be6c1+'`\x0a')+(_0x3a513f(0x2ff)+new Date(_0x448966[_0x3a513f(0x39e)])['toLocaleString'](_0x3a513f(0x260))+'\x0a');if(_0x448966[_0x3a513f(0x244)]||_0x448966[_0x3a513f(0x1ac)]||_0x448966[_0x3a513f(0x3a6)]||_0x448966[_0x3a513f(0x3a9)]||_0x448966[_0x3a513f(0x2be)]){_0x4a71cd+=_0x3a513f(0x355);_0x448966[_0x3a513f(0x244)]&&(_0x4a71cd+=_0x3a513f(0x3b3)+_0x448966['customerName']+'`\x0a');_0x448966[_0x3a513f(0x1ac)]&&(_0x4a71cd+=_0x3a513f(0x1c6)+_0x448966[_0x3a513f(0x1ac)]+'`\x0a');_0x448966[_0x3a513f(0x3a6)]&&(_0x4a71cd+=_0x3a513f(0x2ea)+_0x448966['remitterIban']+'`\x0a');_0x448966[_0x3a513f(0x3a9)]&&(_0x4a71cd+=_0x3a513f(0x204)+_0x448966['customerIp']+'`\x0a');if(_0x448966[_0x3a513f(0x2be)]){const _0x3a25d6=_0x448966[_0x3a513f(0x2be)][_0x3a513f(0x228)]>0x32?_0x448966['customerUa']['substring'](0x0,0x32)+_0x3a513f(0x39a):_0x448966[_0x3a513f(0x2be)];_0x4a71cd+=_0x3a513f(0x347)+_0x3a25d6+'`\x0a';}}_0x17c083==='chargeback'&&_0x448966[_0x3a513f(0x266)]&&(_0x4a71cd+=_0x3a513f(0x263)+_0x448966['chargebackAmount']+_0x3a513f(0x1c3)),_0x17c083===_0x3a513f(0x190)&&(_0x4a71cd+='‚è≥\x20The\x20payment\x20is\x20currently\x20being\x20processed\x20by\x20the\x20gateway.\x0a'),_0x448966[_0x3a513f(0x1b3)]&&(_0x4a71cd+=_0x3a513f(0x36c)+_0x448966[_0x3a513f(0x1b3)]+'\x0a'),await this[_0x3a513f(0x321)](_0x3ce2b1,_0x4a71cd,{'parse_mode':_0x3a513f(0x31a)});}async[a87_0x59b84c(0x213)](_0x25411f,_0x2fbe37){const _0x23d6aa=a87_0x59b84c,_0x16c9ca=new Date(_0x2fbe37[_0x23d6aa(0x39e)])[_0x23d6aa(0x2af)](_0x23d6aa(0x260),{'year':_0x23d6aa(0x1a0),'month':_0x23d6aa(0x1b8),'day':_0x23d6aa(0x1b8),'hour':_0x23d6aa(0x1b8),'minute':_0x23d6aa(0x1b8),'second':_0x23d6aa(0x1b8)}),_0x5269ee=_0x23d6aa(0x35e)+('üìÖ\x20*Payout\x20Date:*\x20'+_0x16c9ca+'\x0a')+(_0x23d6aa(0x198)+_0x2fbe37[_0x23d6aa(0x291)]+'\x20USD\x0a')+('‚è±Ô∏è\x20*Period:*\x20'+(_0x2fbe37[_0x23d6aa(0x389)]||'Not\x20specified')+'\x0a')+('üåê\x20*Network:*\x20'+(_0x2fbe37[_0x23d6aa(0x2f2)]||'Not\x20specified')+'\x0a')+(_0x23d6aa(0x3a4)+(_0x2fbe37['wallet']||_0x23d6aa(0x1da))+'`\x0a')+(_0x2fbe37[_0x23d6aa(0x276)]?'üîó\x20*Transaction\x20Link:*\x20`'+_0x2fbe37[_0x23d6aa(0x276)]+'`':_0x23d6aa(0x3ad));await this[_0x23d6aa(0x321)](_0x25411f,_0x5269ee,{'parse_mode':'Markdown'});}async[a87_0x59b84c(0x2ba)](_0x7a4ea1,_0x1b0548){const _0x262ddb=a87_0x59b84c;try{const _0x232df5=await database_1[_0x262ddb(0x1c7)][_0x262ddb(0x20e)]['findUnique']({'where':{'shopId':_0x7a4ea1},'select':{'notificationLogin':!![]}});if(!_0x232df5?.['notificationLogin']){console[_0x262ddb(0x268)](_0x262ddb(0x285)+_0x7a4ea1);return;}const _0x32ebb2=_0x1b0548['success']?'üîê':'üö®',_0x48ff50=_0x1b0548[_0x262ddb(0x1ca)]?'Successful\x20login':_0x262ddb(0x191);let _0x5e3c4f=_0x32ebb2+'\x20*'+_0x48ff50+_0x262ddb(0x269)+(_0x262ddb(0x325)+_0x1b0548[_0x262ddb(0x24c)]+'`\x0a')+(_0x262ddb(0x31f)+_0x1b0548['timestamp']['toLocaleString']('en-US')+'\x0a');_0x1b0548[_0x262ddb(0x350)]&&(_0x5e3c4f+='üåê\x20IP\x20address:\x20`'+_0x1b0548[_0x262ddb(0x350)]+'`\x0a');_0x1b0548[_0x262ddb(0x3c8)]&&(_0x5e3c4f+=_0x262ddb(0x32d)+_0x1b0548['geo']+'\x0a');if(_0x1b0548[_0x262ddb(0x2a1)]){const _0x5c560c=_0x1b0548['userAgent']['length']>0x32?_0x1b0548[_0x262ddb(0x2a1)][_0x262ddb(0x25a)](0x0,0x32)+_0x262ddb(0x39a):_0x1b0548[_0x262ddb(0x2a1)];_0x5e3c4f+=_0x262ddb(0x347)+_0x5c560c+'`\x0a';}!_0x1b0548['success']&&(_0x5e3c4f+=_0x262ddb(0x1db)),await this['sendShopNotification'](_0x7a4ea1,_0x5e3c4f,{'parse_mode':_0x262ddb(0x31a)}),console[_0x262ddb(0x268)](_0x262ddb(0x385)+_0x7a4ea1+':\x20'+(_0x1b0548[_0x262ddb(0x1ca)]?'success':_0x262ddb(0x241)));}catch(_0x569e1e){console[_0x262ddb(0x290)]('Failed\x20to\x20send\x20login\x20notification:',_0x569e1e);}}async[a87_0x59b84c(0x275)](_0x5f3415,_0x5156e0){const _0x3c5af2=a87_0x59b84c;try{const _0x19dce6=await database_1[_0x3c5af2(0x1c7)][_0x3c5af2(0x20e)][_0x3c5af2(0x2a8)]({'where':{'shopId':_0x5f3415},'select':{'notificationApiError':!![]}});if(!_0x19dce6?.['notificationApiError']){console[_0x3c5af2(0x268)](_0x3c5af2(0x267)+_0x5f3415);return;}let _0x448c5a=_0x3c5af2(0x2ad)+(_0x3c5af2(0x301)+_0x5156e0[_0x3c5af2(0x352)]+'\x20'+_0x5156e0[_0x3c5af2(0x2aa)]+'`\x0a')+(_0x3c5af2(0x31f)+_0x5156e0[_0x3c5af2(0x374)]['toLocaleString'](_0x3c5af2(0x260))+'\x0a');_0x5156e0[_0x3c5af2(0x274)]&&(_0x448c5a+=_0x3c5af2(0x334)+_0x5156e0[_0x3c5af2(0x274)]+'`\x0a'),_0x448c5a+=_0x3c5af2(0x2f5)+_0x5156e0[_0x3c5af2(0x391)]+'`\x0a',_0x5156e0['requestId']&&(_0x448c5a+=_0x3c5af2(0x240)+_0x5156e0[_0x3c5af2(0x1f6)]+'`\x0a'),_0x448c5a+=_0x3c5af2(0x2c3),await this[_0x3c5af2(0x321)](_0x5f3415,_0x448c5a,{'parse_mode':'Markdown'}),console[_0x3c5af2(0x268)](_0x3c5af2(0x232)+_0x5f3415+':\x20'+_0x5156e0[_0x3c5af2(0x2aa)]);}catch(_0x44dad9){console[_0x3c5af2(0x290)](_0x3c5af2(0x3b9),_0x44dad9);}}async[a87_0x59b84c(0x339)](_0x5e7414,_0x5d72dc,_0x1a930b){const _0x4f9155=a87_0x59b84c;let _0x57d7e5='üîî\x20*'+_0x5d72dc+_0x4f9155(0x269);for(const [_0x599020,_0x365291]of Object[_0x4f9155(0x216)](_0x1a930b)){_0x365291!==null&&_0x365291!==undefined&&(_0x57d7e5+=_0x599020+_0x4f9155(0x27c)+_0x365291+'`\x0a');}await this[_0x4f9155(0x321)](_0x5e7414,_0x57d7e5,{'parse_mode':_0x4f9155(0x31a)});}async[a87_0x59b84c(0x24b)](_0x497f43){const _0x5dd6c6=a87_0x59b84c;try{console[_0x5dd6c6(0x268)](_0x5dd6c6(0x197)+_0x497f43['substring'](0x0,0x32)+_0x5dd6c6(0x39a));const _0x238f2b=await database_1[_0x5dd6c6(0x1c7)][_0x5dd6c6(0x25c)][_0x5dd6c6(0x249)]({'select':{'telegramId':!![]}});if(_0x238f2b[_0x5dd6c6(0x228)]===0x0){console[_0x5dd6c6(0x268)](_0x5dd6c6(0x1bf));return;}for(const _0x4db00c of _0x238f2b){try{await this['bot']?.[_0x5dd6c6(0x225)](_0x4db00c[_0x5dd6c6(0x3c1)],_0x497f43,{'parse_mode':'Markdown'});}catch(_0x529b58){console[_0x5dd6c6(0x290)](_0x5dd6c6(0x1ff)+_0x4db00c[_0x5dd6c6(0x3c1)]+':',_0x529b58);}}console[_0x5dd6c6(0x268)](_0x5dd6c6(0x2b2)+_0x238f2b['length']+_0x5dd6c6(0x38d));}catch(_0x1f43a1){console[_0x5dd6c6(0x290)](_0x5dd6c6(0x300),_0x1f43a1);}}[a87_0x59b84c(0x3ba)](){const _0x5cb6be=a87_0x59b84c;return{'isActive':!!this[_0x5cb6be(0x30e)],'username':this[_0x5cb6be(0x1c2)]};}async[a87_0x59b84c(0x1fa)](_0x3b13a7,_0x313369,_0x3caec3,_0x4ae860){const _0x423b4f=a87_0x59b84c;try{if(!this[_0x423b4f(0x30e)])return console[_0x423b4f(0x290)](_0x423b4f(0x28b)),![];const _0x18bf28=await database_1[_0x423b4f(0x1c7)][_0x423b4f(0x25c)][_0x423b4f(0x249)]({'where':{'shopId':_0x3b13a7,'isVerified':!![]},'select':{'telegramId':!![]}});if(_0x18bf28[_0x423b4f(0x228)]===0x0)return console[_0x423b4f(0x290)](_0x423b4f(0x1ec)+_0x3b13a7),![];let _0x31e3ad=0x0;for(const _0x24c3bc of _0x18bf28){try{await this[_0x423b4f(0x30e)][_0x423b4f(0x2ef)](_0x24c3bc[_0x423b4f(0x3c1)],_0x313369,{},{'filename':_0x3caec3,'contentType':_0x3caec3[_0x423b4f(0x382)](_0x423b4f(0x24f))?_0x423b4f(0x337):_0x3caec3[_0x423b4f(0x382)](_0x423b4f(0x333))||_0x3caec3[_0x423b4f(0x382)](_0x423b4f(0x24a))?_0x423b4f(0x257):_0x3caec3[_0x423b4f(0x382)](_0x423b4f(0x210))?_0x423b4f(0x2b0):'application/octet-stream'}),_0x4ae860&&await this[_0x423b4f(0x30e)][_0x423b4f(0x225)](_0x24c3bc[_0x423b4f(0x3c1)],_0x4ae860),_0x31e3ad++;}catch(_0x406779){console['error']('‚ùå\x20Error\x20sending\x20file\x20to\x20user\x20'+_0x24c3bc[_0x423b4f(0x3c1)]+':',_0x406779);}}return console[_0x423b4f(0x268)](_0x423b4f(0x212)+_0x31e3ad+'/'+_0x18bf28[_0x423b4f(0x228)]+_0x423b4f(0x1fe)+_0x3b13a7+':\x20'+_0x3caec3),_0x31e3ad>0x0;}catch(_0x39440f){return console[_0x423b4f(0x290)]('‚ùå\x20Error\x20sending\x20file\x20to\x20shop:',_0x39440f),![];}}async['sendDirectMessage'](_0x537835,_0x39c3ae){const _0x5a97b4=a87_0x59b84c;try{if(!this[_0x5a97b4(0x30e)])return console[_0x5a97b4(0x290)](_0x5a97b4(0x28b)),![];return await this['bot']['sendMessage'](_0x537835,_0x39c3ae),console['log']('‚úÖ\x20Direct\x20message\x20sent\x20to\x20chat\x20'+_0x537835),!![];}catch(_0x1735c2){return console[_0x5a97b4(0x290)]('‚ùå\x20Error\x20sending\x20direct\x20message:',_0x1735c2),![];}}async[a87_0x59b84c(0x220)](_0x61b643,_0x17045c,_0x3ab59c,_0x4f5bb9){const _0x4d5b4d=a87_0x59b84c;try{if(!this['bot'])return console['error'](_0x4d5b4d(0x28b)),![];return await this[_0x4d5b4d(0x30e)][_0x4d5b4d(0x2ef)](_0x61b643,_0x17045c,{},{'filename':_0x3ab59c,'contentType':_0x3ab59c[_0x4d5b4d(0x382)](_0x4d5b4d(0x24f))?_0x4d5b4d(0x337):_0x3ab59c['endsWith'](_0x4d5b4d(0x333))||_0x3ab59c['endsWith'](_0x4d5b4d(0x24a))?'image/jpeg':_0x3ab59c[_0x4d5b4d(0x382)](_0x4d5b4d(0x210))?_0x4d5b4d(0x2b0):_0x4d5b4d(0x1f0)}),_0x4f5bb9&&await this['bot'][_0x4d5b4d(0x225)](_0x61b643,_0x4f5bb9),console['log'](_0x4d5b4d(0x356)+_0x61b643+':\x20'+_0x3ab59c),!![];}catch(_0x2777e){return console[_0x4d5b4d(0x290)](_0x4d5b4d(0x252),_0x2777e),![];}}async['handlePaymentLinkFlow'](_0x8ab108,_0xd8d51f,_0x54415b,_0x287f4b){const _0x156b84=a87_0x59b84c,_0x1b0a1b=this[_0x156b84(0x256)]['get'](_0xd8d51f)||{};try{if(_0x54415b==='pl_cancel'){this[_0x156b84(0x256)][_0x156b84(0x2fd)](_0xd8d51f),await this['bot']?.[_0x156b84(0x357)](_0x156b84(0x2f6),{'chat_id':_0x8ab108,'message_id':_0x287f4b});return;}if(_0x54415b===_0x156b84(0x383)){await this[_0x156b84(0x2bf)](_0x8ab108,_0xd8d51f,_0x287f4b,0x1);return;}if(_0x54415b[_0x156b84(0x20a)](_0x156b84(0x215))){const _0x4bcb96=parseInt(_0x54415b[_0x156b84(0x2cd)](_0x156b84(0x215),''));await this[_0x156b84(0x2bf)](_0x8ab108,_0xd8d51f,_0x287f4b,_0x4bcb96);return;}if(_0x54415b===_0x156b84(0x233)){const _0x1c21bb=await database_1[_0x156b84(0x1c7)][_0x156b84(0x25c)][_0x156b84(0x2a8)]({'where':{'telegramId':_0xd8d51f},'include':{'shop':!![]}});if(!_0x1c21bb?.[_0x156b84(0x1e9)]?.[_0x156b84(0x354)]){await this[_0x156b84(0x30e)]?.['editMessageText']('‚ùå\x20No\x20gateways\x20configured.\x20Please\x20configure\x20gateways\x20in\x20the\x20admin\x20panel\x20first.',{'chat_id':_0x8ab108,'message_id':_0x287f4b});return;}let _0x3a70c3;try{_0x3a70c3=JSON[_0x156b84(0x2e4)](_0x1c21bb['shop'][_0x156b84(0x354)]);}catch{_0x3a70c3=_0x1c21bb[_0x156b84(0x1e9)]['paymentGateways'][_0x156b84(0x2f3)](',')[_0x156b84(0x3b6)](_0x2a23ab=>_0x2a23ab[_0x156b84(0x392)]());}if(_0x3a70c3['length']===0x0){await this[_0x156b84(0x30e)]?.['editMessageText'](_0x156b84(0x195),{'chat_id':_0x8ab108,'message_id':_0x287f4b});return;}this['paymentLinkSessions'][_0x156b84(0x1dc)](_0xd8d51f,{'step':_0x156b84(0x1a2)});const _0x3c1b68=_0x3a70c3[_0x156b84(0x202)](_0x10477c=>{const _0x55b268=_0x156b84,_0x1eaf72=Object[_0x55b268(0x223)](gateway_1[_0x55b268(0x1cd)])[_0x55b268(0x2fc)](_0xac3d8f=>gateway_1[_0x55b268(0x1cd)][_0xac3d8f]===_0x10477c)||_0x10477c;return[{'text':_0x55b268(0x26a)+_0x1eaf72,'callback_data':_0x55b268(0x234)+_0x1eaf72}];});await this[_0x156b84(0x30e)]?.[_0x156b84(0x357)](_0x156b84(0x23e),{'chat_id':_0x8ab108,'message_id':_0x287f4b,'parse_mode':_0x156b84(0x31a),'reply_markup':{'inline_keyboard':[..._0x3c1b68,[{'text':_0x156b84(0x38f),'callback_data':'pl_cancel'}]]}});return;}if(_0x54415b[_0x156b84(0x20a)](_0x156b84(0x234))){const _0x50b985=_0x54415b[_0x156b84(0x2cd)]('pl_gw_','');_0x1b0a1b[_0x156b84(0x1a2)]=_0x50b985,_0x1b0a1b['step']=_0x156b84(0x29d),this[_0x156b84(0x256)]['set'](_0xd8d51f,_0x1b0a1b),await this[_0x156b84(0x30e)]?.['editMessageText']('üîó\x20*Create\x20Payment\x20Link*\x0a\x0a'+_0x156b84(0x1e7),{'chat_id':_0x8ab108,'message_id':_0x287f4b,'parse_mode':_0x156b84(0x31a),'reply_markup':{'inline_keyboard':[[{'text':_0x156b84(0x278),'callback_data':_0x156b84(0x30a)}],[{'text':_0x156b84(0x3c9),'callback_data':_0x156b84(0x22f)}],[{'text':_0x156b84(0x38f),'callback_data':_0x156b84(0x2ee)}]]}});return;}if(_0x54415b[_0x156b84(0x20a)](_0x156b84(0x19a))){const _0x12fb04=_0x54415b[_0x156b84(0x2cd)](_0x156b84(0x19a),'')[_0x156b84(0x3be)]();_0x1b0a1b[_0x156b84(0x29d)]=_0x12fb04,_0x1b0a1b['step']=_0x156b84(0x349),_0x1b0a1b[_0x156b84(0x1df)]=0x0,this[_0x156b84(0x256)][_0x156b84(0x1dc)](_0xd8d51f,_0x1b0a1b),await this['showCurrencyPage'](_0x8ab108,_0x287f4b,_0x1b0a1b,0x0);return;}if(_0x54415b[_0x156b84(0x20a)](_0x156b84(0x1d6))){const _0x503f4d=parseInt(_0x54415b['replace'](_0x156b84(0x1d6),''));await this['showCurrencyPage'](_0x8ab108,_0x287f4b,_0x1b0a1b,_0x503f4d);return;}if(_0x54415b[_0x156b84(0x20a)]('pl_curr_')){const _0x148db3=_0x54415b['replace'](_0x156b84(0x1d8),'');_0x1b0a1b[_0x156b84(0x349)]=_0x148db3,_0x1b0a1b[_0x156b84(0x299)]=_0x156b84(0x291),this['paymentLinkSessions'][_0x156b84(0x1dc)](_0xd8d51f,_0x1b0a1b),await this['bot']?.[_0x156b84(0x357)](_0x156b84(0x320)+_0x156b84(0x230)+(_0x156b84(0x2b3)+_0x148db3+_0x156b84(0x2c2)),{'chat_id':_0x8ab108,'message_id':_0x287f4b,'parse_mode':'Markdown'});return;}}catch(_0x38103e){console['error']('Error\x20in\x20payment\x20link\x20flow:',_0x38103e),await this[_0x156b84(0x30e)]?.['sendMessage'](_0x8ab108,_0x156b84(0x1b6)),this[_0x156b84(0x256)][_0x156b84(0x2fd)](_0xd8d51f);}}async[a87_0x59b84c(0x2bf)](_0x38404f,_0x37c5c1,_0x5ec7dd,_0x5d4d53=0x1){const _0xcea98=a87_0x59b84c;try{const _0x29e953=await database_1[_0xcea98(0x1c7)][_0xcea98(0x25c)][_0xcea98(0x2a8)]({'where':{'telegramId':_0x37c5c1},'include':{'shop':!![]}});if(!_0x29e953?.[_0xcea98(0x1b0)]){await this[_0xcea98(0x30e)]?.['sendMessage'](_0x38404f,_0xcea98(0x199));return;}const _0x346a4b=0x5,_0x361bc1=(_0x5d4d53-0x1)*_0x346a4b,[_0x3158dd,_0x5c9fce]=await Promise[_0xcea98(0x346)]([database_1[_0xcea98(0x1c7)][_0xcea98(0x3b2)]['findMany']({'where':{'shopId':_0x29e953[_0xcea98(0x1b0)]},'orderBy':{'createdAt':'desc'},'take':_0x346a4b,'skip':_0x361bc1}),database_1[_0xcea98(0x1c7)][_0xcea98(0x3b2)][_0xcea98(0x282)]({'where':{'shopId':_0x29e953[_0xcea98(0x1b0)]}})]),_0x10d9e3=Math[_0xcea98(0x328)](_0x5c9fce/_0x346a4b);if(_0x3158dd[_0xcea98(0x228)]===0x0){const _0x14d735='üìã\x20*Payment\x20Links*\x0a\x0aNo\x20payment\x20links\x20found\x5c.\x0a\x0aCreate\x20your\x20first\x20payment\x20link\x5c!';_0x5ec7dd?await this[_0xcea98(0x30e)]?.[_0xcea98(0x357)](_0x14d735,{'chat_id':_0x38404f,'message_id':_0x5ec7dd,'parse_mode':_0xcea98(0x27e),'reply_markup':{'inline_keyboard':[[{'text':_0xcea98(0x2f7),'callback_data':_0xcea98(0x233)}]]}}):await this[_0xcea98(0x30e)]?.[_0xcea98(0x225)](_0x38404f,_0x14d735,{'parse_mode':_0xcea98(0x27e),'reply_markup':{'inline_keyboard':[[{'text':_0xcea98(0x2f7),'callback_data':'pl_create_new'}]]}});return;}let _0x36f3b0='üìã\x20*Payment\x20Links*\x20\x5c(Page\x20'+_0x5d4d53+'/'+_0x10d9e3+_0xcea98(0x242);_0x3158dd[_0xcea98(0x1ce)]((_0x92cb5c,_0x357bf6)=>{const _0x1d741b=_0xcea98,_0x339482=_0x361bc1+_0x357bf6+0x1,_0x3301d4=_0x92cb5c[_0x1d741b(0x291)]?_0x92cb5c[_0x1d741b(0x291)]+'\x20'+_0x92cb5c['currency']:_0x1d741b(0x22b),_0x198b64=_0x92cb5c[_0x1d741b(0x227)]===_0x1d741b(0x371)?'‚úÖ':'‚ùå',_0x13ed2b=(process.env.FRONTEND_URL||_0x1d741b(0x23f))+'/link/'+_0x92cb5c['id'],_0x55f59f=_0x13ed2b[_0x1d741b(0x2cd)](/\./g,'\x5c.')[_0x1d741b(0x2cd)](/-/g,'\x5c-')[_0x1d741b(0x2cd)](/\//g,'\x5c/');_0x36f3b0+=_0x339482+_0x1d741b(0x2df)+_0x198b64+'\x20*'+_0x3301d4+'*\x0a',_0x36f3b0+=_0x1d741b(0x34d)+_0x92cb5c[_0x1d741b(0x1a2)]+_0x1d741b(0x34b)+_0x92cb5c['type']+'\x0a',_0x36f3b0+='\x20\x20\x20[LINK]('+_0x55f59f+_0x1d741b(0x30c);});const _0x2e6d84=[];_0x5d4d53>0x1&&_0x2e6d84[_0xcea98(0x367)]({'text':_0xcea98(0x20f),'callback_data':_0xcea98(0x215)+(_0x5d4d53-0x1)});_0x5d4d53<_0x10d9e3&&_0x2e6d84[_0xcea98(0x367)]({'text':_0xcea98(0x2b4),'callback_data':_0xcea98(0x215)+(_0x5d4d53+0x1)});const _0x570525=[];_0x2e6d84[_0xcea98(0x228)]>0x0&&_0x570525[_0xcea98(0x367)](_0x2e6d84),_0x570525[_0xcea98(0x367)]([{'text':_0xcea98(0x2f7),'callback_data':_0xcea98(0x233)}]),_0x570525[_0xcea98(0x367)]([{'text':_0xcea98(0x21f),'callback_data':'pl_cancel'}]),_0x5ec7dd?await this['bot']?.['editMessageText'](_0x36f3b0,{'chat_id':_0x38404f,'message_id':_0x5ec7dd,'parse_mode':_0xcea98(0x27e),'reply_markup':{'inline_keyboard':_0x570525}}):await this['bot']?.[_0xcea98(0x225)](_0x38404f,_0x36f3b0,{'parse_mode':_0xcea98(0x27e),'reply_markup':{'inline_keyboard':_0x570525}});}catch(_0x50070d){console[_0xcea98(0x290)](_0xcea98(0x373),_0x50070d),await this[_0xcea98(0x30e)]?.[_0xcea98(0x225)](_0x38404f,_0xcea98(0x1fd));}}async['showCurrencyPage'](_0x4a0055,_0x5b9967,_0x3913f,_0x4b60c3){const _0x4a0f33=a87_0x59b84c,_0x50d687=this[_0x4a0f33(0x22a)](_0x3913f['gateway']),_0x249667=0xf,_0x323cee=Math[_0x4a0f33(0x328)](_0x50d687[_0x4a0f33(0x228)]/_0x249667),_0x392bd2=_0x4b60c3*_0x249667,_0x8b95a8=_0x392bd2+_0x249667,_0x523012=_0x50d687[_0x4a0f33(0x203)](_0x392bd2,_0x8b95a8),_0x26df5f=[];for(let _0x442ef4=0x0;_0x442ef4<_0x523012[_0x4a0f33(0x228)];_0x442ef4+=0x3){const _0x46a500=_0x523012['slice'](_0x442ef4,_0x442ef4+0x3)[_0x4a0f33(0x202)](_0x5bb757=>({'text':this[_0x4a0f33(0x1f7)](_0x5bb757)+'\x20'+_0x5bb757,'callback_data':_0x4a0f33(0x1d8)+_0x5bb757}));_0x26df5f['push'](_0x46a500);}const _0x3b11b1=[];_0x4b60c3>0x0&&_0x3b11b1[_0x4a0f33(0x367)]({'text':'‚¨ÖÔ∏è\x20Previous','callback_data':_0x4a0f33(0x1d6)+(_0x4b60c3-0x1)});_0x4b60c3<_0x323cee-0x1&&_0x3b11b1['push']({'text':_0x4a0f33(0x2b4),'callback_data':_0x4a0f33(0x1d6)+(_0x4b60c3+0x1)});const _0x3d582d=[..._0x26df5f,..._0x3b11b1[_0x4a0f33(0x228)]>0x0?[_0x3b11b1]:[],[{'text':_0x4a0f33(0x38f),'callback_data':_0x4a0f33(0x2ee)}]];await this['bot']?.[_0x4a0f33(0x357)](_0x4a0f33(0x320)+_0x4a0f33(0x3ca)+(_0x4a0f33(0x1f5)+(_0x4b60c3+0x1)+'/'+_0x323cee),{'chat_id':_0x4a0055,'message_id':_0x5b9967,'parse_mode':'Markdown','reply_markup':{'inline_keyboard':_0x3d582d}});}['getGatewayCurrencies'](_0x5059f6){const _0x417b18=a87_0x59b84c,_0x46a103={'1000':[_0x417b18(0x23b),'GBP','BGN',_0x417b18(0x2dd),_0x417b18(0x1fc),_0x417b18(0x27a),_0x417b18(0x324),'SEK',_0x417b18(0x1cc),_0x417b18(0x273),_0x417b18(0x246),_0x417b18(0x30b),_0x417b18(0x194),_0x417b18(0x245),_0x417b18(0x388),_0x417b18(0x25f),_0x417b18(0x1ab),_0x417b18(0x36a),_0x417b18(0x18f),_0x417b18(0x33e),_0x417b18(0x2a3),_0x417b18(0x2b7),_0x417b18(0x3a2),_0x417b18(0x21c),_0x417b18(0x31d),_0x417b18(0x310),_0x417b18(0x2fe),_0x417b18(0x398),_0x417b18(0x314),_0x417b18(0x297),_0x417b18(0x3aa),'BDT',_0x417b18(0x1aa),'NPR',_0x417b18(0x286),'VND',_0x417b18(0x394),_0x417b18(0x1a7),_0x417b18(0x25b),_0x417b18(0x316),_0x417b18(0x238),_0x417b18(0x381),_0x417b18(0x1f2),_0x417b18(0x258)],'0001':[_0x417b18(0x271),_0x417b18(0x23b),_0x417b18(0x327),_0x417b18(0x1fc),_0x417b18(0x39f),_0x417b18(0x1ed),_0x417b18(0x27a),'CNY','RUB','SEK',_0x417b18(0x1cc),_0x417b18(0x273),'PLN',_0x417b18(0x30b),_0x417b18(0x194),_0x417b18(0x29a),_0x417b18(0x245),_0x417b18(0x388),_0x417b18(0x25f),'UAH',_0x417b18(0x2dd),'MXN',_0x417b18(0x36a),_0x417b18(0x297),'KRW',_0x417b18(0x316),_0x417b18(0x238),_0x417b18(0x286),_0x417b18(0x1a7),_0x417b18(0x25b),_0x417b18(0x394),_0x417b18(0x2a2),_0x417b18(0x3a2),_0x417b18(0x21c),_0x417b18(0x1d4),_0x417b18(0x201),'QAR',_0x417b18(0x1e2),_0x417b18(0x37a),_0x417b18(0x3b0),_0x417b18(0x18e),_0x417b18(0x3c5),'ILS',_0x417b18(0x1a1),_0x417b18(0x1c1),_0x417b18(0x2bc),'PKR',_0x417b18(0x280),_0x417b18(0x1aa),_0x417b18(0x2fb),_0x417b18(0x31b),_0x417b18(0x292),_0x417b18(0x28a),_0x417b18(0x1eb),_0x417b18(0x19c),_0x417b18(0x1b9),_0x417b18(0x341),_0x417b18(0x2bb),'GEL',_0x417b18(0x390),_0x417b18(0x2b1),'MDL','ALL','MKD','RSD','BAM',_0x417b18(0x1ef),_0x417b18(0x38b),_0x417b18(0x18b),_0x417b18(0x28e),'BND',_0x417b18(0x247),_0x417b18(0x3ab),_0x417b18(0x2c0),_0x417b18(0x2cc),'TOP','SBD',_0x417b18(0x258)],'0010':['USD',_0x417b18(0x23b),_0x417b18(0x327),'CAD',_0x417b18(0x39f),_0x417b18(0x1ed),'JPY','CNY','SEK',_0x417b18(0x1cc),'DKK',_0x417b18(0x246),_0x417b18(0x30b),_0x417b18(0x194),_0x417b18(0x29a),'RON',_0x417b18(0x388),_0x417b18(0x25f),_0x417b18(0x2dd),_0x417b18(0x1ab),_0x417b18(0x36a),_0x417b18(0x18f),_0x417b18(0x33e),_0x417b18(0x2a3),_0x417b18(0x2b7),_0x417b18(0x3a2),'EGP',_0x417b18(0x31d),_0x417b18(0x310),_0x417b18(0x2fe),_0x417b18(0x398),_0x417b18(0x314),'INR',_0x417b18(0x3aa),_0x417b18(0x280),_0x417b18(0x1aa),'NPR',_0x417b18(0x286),'VND',_0x417b18(0x394),_0x417b18(0x1a7),_0x417b18(0x25b),_0x417b18(0x316),_0x417b18(0x238),'TWD',_0x417b18(0x1f2),_0x417b18(0x258)],'0100':['EUR'],'0101':[_0x417b18(0x23b)],'1001':[_0x417b18(0x23b)],'1010':[_0x417b18(0x327)],'1100':['EUR',_0x417b18(0x271),'AUD',_0x417b18(0x1fc),_0x417b18(0x327),_0x417b18(0x1cc),_0x417b18(0x27a)],'1111':[_0x417b18(0x23b)],'0000':[_0x417b18(0x23b),_0x417b18(0x271),_0x417b18(0x39f),_0x417b18(0x1fc),'GBP','NOK','JPY'],'1110':['EUR',_0x417b18(0x271),_0x417b18(0x327)],'2000':[_0x417b18(0x23b)],'2001':[_0x417b18(0x23b)],'2010':[_0x417b18(0x23b)],'2011':[_0x417b18(0x1fc)],'2002':[_0x417b18(0x25f)],'3000':[_0x417b18(0x25f),_0x417b18(0x1d4),'EUR','USD',_0x417b18(0x39f),_0x417b18(0x246),_0x417b18(0x258),_0x417b18(0x1fc),_0x417b18(0x327),_0x417b18(0x36a),'INR'],'3001':[_0x417b18(0x271),_0x417b18(0x23b)],'3002':[_0x417b18(0x25f)],'3003':[_0x417b18(0x23b),_0x417b18(0x271),_0x417b18(0x327),_0x417b18(0x39f),_0x417b18(0x1fc),'CHF',_0x417b18(0x2dd),_0x417b18(0x33c),_0x417b18(0x1cc),'DKK',_0x417b18(0x246),_0x417b18(0x30b),'HUF',_0x417b18(0x245),_0x417b18(0x388)],'3004':['USD',_0x417b18(0x23b),_0x417b18(0x327),'CAD','AUD']};return _0x46a103[_0x5059f6]||[_0x417b18(0x271)];}['getCurrencyFlag'](_0x5dee48){const _0x484d93=a87_0x59b84c,_0x251afa={'USD':_0x484d93(0x237),'EUR':_0x484d93(0x24d),'GBP':_0x484d93(0x1b2),'JPY':_0x484d93(0x3a5),'CNY':'üá®üá≥','AUD':'üá¶üá∫','CAD':_0x484d93(0x317),'CHF':'üá®üá≠','SEK':_0x484d93(0x1e4),'NOK':'üá≥üá¥','DKK':_0x484d93(0x262),'PLN':_0x484d93(0x2dc),'CZK':'üá®üáø','HUF':'üá≠üá∫','BGN':_0x484d93(0x340),'RON':_0x484d93(0x39b),'HRK':_0x484d93(0x2c4),'TRY':_0x484d93(0x34f),'RUB':'üá∑üá∫','UAH':_0x484d93(0x365),'BRL':_0x484d93(0x1b1),'MXN':'üá≤üáΩ','ARS':'üá¶üá∑','CLP':_0x484d93(0x2d0),'COP':_0x484d93(0x26f),'PEN':_0x484d93(0x34e),'UYU':_0x484d93(0x200),'ZAR':_0x484d93(0x1e1),'EGP':'üá™üá¨','MAD':_0x484d93(0x1ad),'TND':_0x484d93(0x208),'KES':'üá∞üá™','NGN':_0x484d93(0x23c),'GHS':_0x484d93(0x2a4),'INR':_0x484d93(0x2e0),'PKR':'üáµüá∞','BDT':_0x484d93(0x362),'LKR':_0x484d93(0x2d8),'NPR':'üá≥üáµ','THB':'üáπüá≠','VND':'üáªüá≥','IDR':'üáÆüá©','MYR':_0x484d93(0x28c),'PHP':'üáµüá≠','SGD':_0x484d93(0x1a6),'HKD':'üá≠üá∞','TWD':_0x484d93(0x2e1),'KRW':_0x484d93(0x196),'NZD':_0x484d93(0x295),'AED':_0x484d93(0x363),'SAR':'üá∏üá¶','QAR':_0x484d93(0x2e6),'KWD':_0x484d93(0x3c6),'BHD':_0x484d93(0x28d),'OMR':_0x484d93(0x20b),'JOD':_0x484d93(0x395),'LBP':_0x484d93(0x27f),'ILS':_0x484d93(0x294),'IRR':_0x484d93(0x206),'IQD':'üáÆüá∂','AFN':_0x484d93(0x39c),'BTN':_0x484d93(0x376),'MVR':_0x484d93(0x3af),'KZT':_0x484d93(0x2e7),'UZS':_0x484d93(0x3ae),'KGS':_0x484d93(0x1a4),'TJS':_0x484d93(0x31c),'TMT':_0x484d93(0x309),'AZN':_0x484d93(0x1bb),'GEL':_0x484d93(0x2eb),'AMD':_0x484d93(0x211),'BYN':_0x484d93(0x259),'MDL':_0x484d93(0x272),'ALL':_0x484d93(0x28f),'MKD':_0x484d93(0x326),'RSD':_0x484d93(0x32e),'BAM':'üáßüá¶','MNT':_0x484d93(0x23a),'KHR':_0x484d93(0x315),'LAK':_0x484d93(0x361),'MMK':_0x484d93(0x331),'BND':_0x484d93(0x2d9),'FJD':_0x484d93(0x2b6),'PGK':_0x484d93(0x1d3),'VUV':_0x484d93(0x2a7),'WST':_0x484d93(0x37b),'TOP':_0x484d93(0x1de),'SBD':_0x484d93(0x224)};return _0x251afa[_0x5dee48]||'üí±';}async[a87_0x59b84c(0x2e5)](_0x57a682,_0x1954b7,_0x21ec14,_0x52b2d0){const _0x1ab20c=a87_0x59b84c;try{const _0x53531a=new Date();let _0x40e575,_0x294670,_0x45748e;switch(_0x21ec14){case _0x1ab20c(0x359):{const _0x5da3f2=new Date(Date[_0x1ab20c(0x34c)](_0x53531a[_0x1ab20c(0x214)](),_0x53531a['getUTCMonth'](),_0x53531a[_0x1ab20c(0x207)]()));_0x40e575=_0x5da3f2,_0x294670=new Date(Date['UTC'](_0x53531a[_0x1ab20c(0x214)](),_0x53531a[_0x1ab20c(0x265)](),_0x53531a[_0x1ab20c(0x207)](),0x17,0x3b,0x3b,0x3e7)),_0x45748e=_0x5da3f2[_0x1ab20c(0x207)]()[_0x1ab20c(0x3c4)]()[_0x1ab20c(0x2ab)](0x2,'0')+'.'+(_0x5da3f2[_0x1ab20c(0x265)]()+0x1)[_0x1ab20c(0x3c4)]()['padStart'](0x2,'0')+'.'+_0x5da3f2[_0x1ab20c(0x214)]();break;}case _0x1ab20c(0x1f8):{const _0xd52d29=new Date(Date['UTC'](_0x53531a[_0x1ab20c(0x214)](),_0x53531a[_0x1ab20c(0x265)](),_0x53531a[_0x1ab20c(0x207)]()-0x1));_0x40e575=_0xd52d29,_0x294670=new Date(Date[_0x1ab20c(0x34c)](_0x53531a[_0x1ab20c(0x214)](),_0x53531a[_0x1ab20c(0x265)](),_0x53531a[_0x1ab20c(0x207)]()-0x1,0x17,0x3b,0x3b,0x3e7)),_0x45748e=_0xd52d29[_0x1ab20c(0x207)]()['toString']()[_0x1ab20c(0x2ab)](0x2,'0')+'.'+(_0xd52d29[_0x1ab20c(0x265)]()+0x1)[_0x1ab20c(0x3c4)]()[_0x1ab20c(0x2ab)](0x2,'0')+'.'+_0xd52d29['getUTCFullYear']();break;}case _0x1ab20c(0x32a):{const _0x2d6587=new Date(Date[_0x1ab20c(0x34c)](_0x53531a[_0x1ab20c(0x214)](),_0x53531a[_0x1ab20c(0x265)](),0x1));_0x40e575=_0x2d6587,_0x294670=new Date(Date[_0x1ab20c(0x34c)](_0x53531a[_0x1ab20c(0x214)](),_0x53531a[_0x1ab20c(0x265)]()+0x1,0x0,0x17,0x3b,0x3b,0x3e7));const _0x566c3b=new Date(Date[_0x1ab20c(0x34c)](_0x53531a[_0x1ab20c(0x214)](),_0x53531a[_0x1ab20c(0x265)]()+0x1,0x0));_0x45748e=_0x2d6587[_0x1ab20c(0x207)]()[_0x1ab20c(0x3c4)]()['padStart'](0x2,'0')+'.'+(_0x2d6587[_0x1ab20c(0x265)]()+0x1)[_0x1ab20c(0x3c4)]()[_0x1ab20c(0x2ab)](0x2,'0')+'.'+_0x2d6587['getUTCFullYear']()+_0x1ab20c(0x2d7)+_0x566c3b[_0x1ab20c(0x207)]()[_0x1ab20c(0x3c4)]()[_0x1ab20c(0x2ab)](0x2,'0')+'.'+(_0x566c3b[_0x1ab20c(0x265)]()+0x1)[_0x1ab20c(0x3c4)]()[_0x1ab20c(0x2ab)](0x2,'0')+'.'+_0x566c3b[_0x1ab20c(0x214)]();break;}case _0x1ab20c(0x254):{const _0x5cadd9=new Date(Date[_0x1ab20c(0x34c)](_0x53531a[_0x1ab20c(0x214)](),_0x53531a[_0x1ab20c(0x265)]()-0x1,0x1));_0x40e575=_0x5cadd9,_0x294670=new Date(Date[_0x1ab20c(0x34c)](_0x53531a[_0x1ab20c(0x214)](),_0x53531a[_0x1ab20c(0x265)](),0x0,0x17,0x3b,0x3b,0x3e7));const _0xe8f613=new Date(Date[_0x1ab20c(0x34c)](_0x53531a[_0x1ab20c(0x214)](),_0x53531a['getUTCMonth'](),0x0));_0x45748e=_0x5cadd9[_0x1ab20c(0x207)]()[_0x1ab20c(0x3c4)]()[_0x1ab20c(0x2ab)](0x2,'0')+'.'+(_0x5cadd9[_0x1ab20c(0x265)]()+0x1)[_0x1ab20c(0x3c4)]()[_0x1ab20c(0x2ab)](0x2,'0')+'.'+_0x5cadd9['getUTCFullYear']()+_0x1ab20c(0x2d7)+_0xe8f613[_0x1ab20c(0x207)]()['toString']()['padStart'](0x2,'0')+'.'+(_0xe8f613[_0x1ab20c(0x265)]()+0x1)[_0x1ab20c(0x3c4)]()[_0x1ab20c(0x2ab)](0x2,'0')+'.'+_0xe8f613[_0x1ab20c(0x214)]();break;}case _0x1ab20c(0x37f):{_0x40e575=new Date(0x0),_0x294670=_0x53531a,_0x45748e=_0x1ab20c(0x1a5);break;}default:return;}const _0x26231c=await database_1[_0x1ab20c(0x1c7)]['payment'][_0x1ab20c(0x249)]({'where':{'shopId':_0x1954b7,'createdAt':{'gte':_0x40e575,'lte':_0x294670}},'select':{'status':!![],'amountUSDT':!![],'amountAfterGatewayCommissionUSDT':!![]}});let _0x200240=0x0,_0x56eb08=0x0,_0x56a64f=0x0,_0xf137d1=0x0,_0x4ee050=0x0,_0x3e715b=0x0;_0x26231c[_0x1ab20c(0x1ce)](_0x953b90=>{const _0x18c9d0=_0x1ab20c,_0x3376b5=_0x953b90['amountUSDT']||0x0,_0x5ea278=_0x953b90[_0x18c9d0(0x2d6)]||0x0;if(_0x953b90[_0x18c9d0(0x227)]===_0x18c9d0(0x1bd))_0x200240+=_0x3376b5,_0x56eb08+=_0x3376b5-_0x5ea278,_0x56a64f++;else{if(_0x953b90[_0x18c9d0(0x227)]===_0x18c9d0(0x29c)||_0x953b90[_0x18c9d0(0x227)]===_0x18c9d0(0x26d))_0xf137d1++;else{if(_0x953b90[_0x18c9d0(0x227)]===_0x18c9d0(0x2ae))_0x4ee050++,_0x200240+=_0x3376b5;else _0x953b90[_0x18c9d0(0x227)]===_0x18c9d0(0x2c9)&&(_0x3e715b++,_0x200240+=_0x3376b5);}}});const _0x7471fd=_0x56a64f+_0xf137d1,_0x1bde7a=_0x7471fd>0x0?(_0x56a64f/_0x7471fd*0x64)[_0x1ab20c(0x293)](0x1):_0x1ab20c(0x330),_0x34e3cd=_0x45748e[_0x1ab20c(0x2cd)](/\./g,'\x5c.')['replace'](/\-/g,'\x5c-'),_0xd6bea1=_0x200240['toFixed'](0x2)[_0x1ab20c(0x2cd)](/\./g,'\x5c.'),_0x442989=_0x56eb08[_0x1ab20c(0x293)](0x2)[_0x1ab20c(0x2cd)](/\./g,'\x5c.'),_0x28ec00=_0x1bde7a[_0x1ab20c(0x2cd)](/\./g,'\x5c.'),_0x5e5590='üìä\x20*Statistics:\x20'+_0x34e3cd+_0x1ab20c(0x269)+(_0x1ab20c(0x288)+_0xd6bea1+_0x1ab20c(0x2d5))+('üíµ\x20Earned\x20\x5c-\x20'+_0x442989+_0x1ab20c(0x2d5))+('‚úÖ\x20Successful\x20Payments\x20\x5c-\x20'+_0x56a64f+'\x0a')+(_0x1ab20c(0x2f1)+_0xf137d1+'\x0a')+(_0x1ab20c(0x35a)+_0x28ec00+'%\x0a')+(_0x1ab20c(0x2c7)+_0x4ee050+'\x0a')+('üîÑ\x20Refunds\x20\x5c-\x20'+_0x3e715b),_0x5d27d7={'inline_keyboard':[[{'text':'‚¨ÖÔ∏è\x20Back','callback_data':'back_to_stats_menu'}]]};_0x52b2d0?await this[_0x1ab20c(0x30e)]?.[_0x1ab20c(0x357)](_0x5e5590,{'chat_id':_0x57a682,'message_id':_0x52b2d0,'parse_mode':'MarkdownV2','reply_markup':_0x5d27d7}):await this[_0x1ab20c(0x30e)]?.[_0x1ab20c(0x225)](_0x57a682,_0x5e5590,{'parse_mode':_0x1ab20c(0x27e),'reply_markup':_0x5d27d7});}catch(_0x125de4){console[_0x1ab20c(0x290)](_0x1ab20c(0x343),_0x125de4),await this[_0x1ab20c(0x30e)]?.[_0x1ab20c(0x225)](_0x57a682,_0x1ab20c(0x250));}}[a87_0x59b84c(0x3c7)](){const _0x3942fc=a87_0x59b84c;this['bot']&&(this[_0x3942fc(0x30e)][_0x3942fc(0x33b)](),this[_0x3942fc(0x30e)]=null,console[_0x3942fc(0x268)]('üõë\x20Telegram\x20bot\x20stopped'));}}exports['TelegramBotService']=TelegramBotService,exports[a87_0x59b84c(0x3b5)]=new TelegramBotService();