'use strict';const a49_0x53842a=a49_0x2ddf;(function(_0x510b4f,_0x4460d7){const _0x34a33d=a49_0x2ddf,_0x4fa3b9=_0x510b4f();while(!![]){try{const _0x59d90d=-parseInt(_0x34a33d(0x19b))/0x1+-parseInt(_0x34a33d(0x1fd))/0x2+parseInt(_0x34a33d(0x227))/0x3*(-parseInt(_0x34a33d(0x1bf))/0x4)+parseInt(_0x34a33d(0x220))/0x5*(parseInt(_0x34a33d(0x200))/0x6)+parseInt(_0x34a33d(0x201))/0x7+parseInt(_0x34a33d(0x1f8))/0x8+-parseInt(_0x34a33d(0x1d0))/0x9*(-parseInt(_0x34a33d(0x1cb))/0xa);if(_0x59d90d===_0x4460d7)break;else _0x4fa3b9['push'](_0x4fa3b9['shift']());}catch(_0x3fb17a){_0x4fa3b9['push'](_0x4fa3b9['shift']());}}}(a49_0x7d44,0x3157f));var __importDefault=this&&this['__importDefault']||function(_0x209302){return _0x209302&&_0x209302['__esModule']?_0x209302:{'default':_0x209302};};Object[a49_0x53842a(0x1f2)](exports,a49_0x53842a(0x1a5),{'value':!![]}),exports[a49_0x53842a(0x25b)]=exports[a49_0x53842a(0x254)]=void 0x0;const node_telegram_bot_api_1=__importDefault(require(a49_0x53842a(0x257))),database_1=__importDefault(require(a49_0x53842a(0x1f1)));function a49_0x2ddf(_0x2d3ad2,_0xe1b663){const _0x7d4436=a49_0x7d44();return a49_0x2ddf=function(_0x2ddf89,_0xfc3b9c){_0x2ddf89=_0x2ddf89-0x17d;let _0x1a4e3e=_0x7d4436[_0x2ddf89];return _0x1a4e3e;},a49_0x2ddf(_0x2d3ad2,_0xe1b663);}class TelegramBotService{constructor(){const _0x1234c8=a49_0x53842a;this[_0x1234c8(0x1fa)]=null,this[_0x1234c8(0x1d2)]=process[_0x1234c8(0x1c7)][_0x1234c8(0x225)]||'',this[_0x1234c8(0x1b3)]=process[_0x1234c8(0x1c7)][_0x1234c8(0x1b5)]||'trapay_bot',this[_0x1234c8(0x1d2)]?this[_0x1234c8(0x1aa)]():console[_0x1234c8(0x249)](_0x1234c8(0x1a9));}[a49_0x53842a(0x1aa)](){const _0x2cce61=a49_0x53842a;try{this[_0x2cce61(0x1fa)]=new node_telegram_bot_api_1[(_0x2cce61(0x1da))](this[_0x2cce61(0x1d2)],{'polling':!![]}),this[_0x2cce61(0x1a7)](),console[_0x2cce61(0x1e7)](_0x2cce61(0x1ef)+this[_0x2cce61(0x1b3)]+_0x2cce61(0x265));}catch(_0x523a20){console[_0x2cce61(0x217)]('❌\x20Failed\x20to\x20initialize\x20Telegram\x20bot:',_0x523a20);}}['setupBotHandlers'](){const _0x231def=a49_0x53842a;if(!this['bot'])return;this[_0x231def(0x1fa)]['onText'](/\/start/,async _0x480f21=>{const _0x2a4058=_0x231def,_0x18f157=_0x480f21[_0x2a4058(0x1e4)]['id'],_0x1ccf48=_0x480f21[_0x2a4058(0x221)]?.['id'][_0x2a4058(0x1bd)](),_0x3664b2=_0x480f21['from']?.[_0x2a4058(0x182)],_0x47060a=_0x480f21['from']?.[_0x2a4058(0x213)],_0x573a99=_0x480f21['from']?.[_0x2a4058(0x235)];if(!_0x1ccf48)return;try{let _0x50e92e=await database_1['default'][_0x2a4058(0x26a)][_0x2a4058(0x1e0)]({'where':{'telegramId':_0x1ccf48},'include':{'shop':!![]}});!_0x50e92e?(_0x50e92e=await database_1[_0x2a4058(0x1da)][_0x2a4058(0x26a)][_0x2a4058(0x22d)]({'data':{'telegramId':_0x1ccf48,'username':_0x3664b2,'firstName':_0x47060a,'lastName':_0x573a99,'isVerified':![],'shopId':null},'include':{'shop':!![]}}),console[_0x2a4058(0x1e7)]('📱\x20Created\x20new\x20Telegram\x20user:\x20'+_0x1ccf48+_0x2a4058(0x21a)+_0x3664b2+')')):_0x50e92e=await database_1['default']['telegramUser'][_0x2a4058(0x1bb)]({'where':{'telegramId':_0x1ccf48},'data':{'username':_0x3664b2,'firstName':_0x47060a,'lastName':_0x573a99},'include':{'shop':!![]}}),_0x50e92e['isVerified']&&_0x50e92e[_0x2a4058(0x1b1)]&&_0x50e92e[_0x2a4058(0x216)]?await this[_0x2a4058(0x1fa)]?.[_0x2a4058(0x1b9)](_0x18f157,_0x2a4058(0x1a0)+(_0x2a4058(0x18c)+_0x50e92e['shop']['name']+'*\x0a')+(_0x2a4058(0x180)+_0x50e92e[_0x2a4058(0x216)]['username']+_0x2a4058(0x19c))+_0x2a4058(0x1dd)+'•\x20Новых\x20платежах\x0a'+_0x2a4058(0x1d1)+_0x2a4058(0x1cc)+'Команды:\x0a'+'/status\x20-\x20проверить\x20статус\x20подключения\x0a'+_0x2a4058(0x1ca),{'parse_mode':'Markdown'}):(_0x50e92e['shopId']&&!_0x50e92e['isVerified']&&(await database_1[_0x2a4058(0x1da)]['telegramUser'][_0x2a4058(0x1bb)]({'where':{'telegramId':_0x1ccf48},'data':{'shopId':null,'isVerified':![]}}),console[_0x2a4058(0x1e7)](_0x2a4058(0x17f)+_0x1ccf48)),await this['bot']?.[_0x2a4058(0x1b9)](_0x18f157,_0x2a4058(0x195)+'Для\x20получения\x20уведомлений\x20о\x20платежах,\x20пожалуйста:\x0a\x0a'+_0x2a4058(0x256)+'2️⃣\x20Затем\x20отправьте\x20ваш\x20*API\x20ключ*\x0a\x0a'+_0x2a4058(0x1b0)+_0x2a4058(0x266)+_0x2a4058(0x1d7)+_0x2a4058(0x253)+_0x2a4058(0x240),{'parse_mode':'Markdown'}));}catch(_0x20083e){console[_0x2a4058(0x217)](_0x2a4058(0x17e),_0x20083e),await this[_0x2a4058(0x1fa)]?.[_0x2a4058(0x1b9)](_0x18f157,'❌\x20Произошла\x20ошибка.\x20Попробуйте\x20позже.');}}),this[_0x231def(0x1fa)][_0x231def(0x245)](/\/disconnect/,async _0x33071e=>{const _0x56416b=_0x231def,_0x45a23f=_0x33071e[_0x56416b(0x1e4)]['id'],_0x587453=_0x33071e[_0x56416b(0x221)]?.['id'][_0x56416b(0x1bd)]();if(!_0x587453)return;try{const _0x579b04=await database_1[_0x56416b(0x1da)]['telegramUser'][_0x56416b(0x1e0)]({'where':{'telegramId':_0x587453},'include':{'shop':!![]}});if(!_0x579b04||!_0x579b04[_0x56416b(0x24b)]||!_0x579b04[_0x56416b(0x1b1)]){await this['bot']?.['sendMessage'](_0x45a23f,'❌\x20Вы\x20не\x20подключены\x20к\x20системе\x20уведомлений.');return;}const _0x2c6f6c=_0x579b04[_0x56416b(0x216)]?.[_0x56416b(0x1f0)]||_0x56416b(0x19a);await database_1[_0x56416b(0x1da)][_0x56416b(0x26a)]['update']({'where':{'telegramId':_0x587453},'data':{'shopId':null,'isVerified':![]}}),console['log']('🔌\x20User\x20'+_0x587453+_0x56416b(0x250)+_0x579b04[_0x56416b(0x1b1)]),await this[_0x56416b(0x1fa)]?.[_0x56416b(0x1b9)](_0x45a23f,_0x56416b(0x1e3)+_0x2c6f6c+_0x56416b(0x1f3)+_0x56416b(0x268),{'parse_mode':_0x56416b(0x1d9)});}catch(_0x172692){console[_0x56416b(0x217)](_0x56416b(0x193),_0x172692),await this['bot']?.['sendMessage'](_0x45a23f,_0x56416b(0x1c8));}}),this[_0x231def(0x1fa)][_0x231def(0x245)](/\/status/,async _0xaeae8d=>{const _0x5dce19=_0x231def,_0x45a4ad=_0xaeae8d['chat']['id'],_0x547a38=_0xaeae8d[_0x5dce19(0x221)]?.['id']['toString']();if(!_0x547a38)return;try{const _0x1596ec=await database_1[_0x5dce19(0x1da)][_0x5dce19(0x26a)][_0x5dce19(0x1e0)]({'where':{'telegramId':_0x547a38},'include':{'shop':!![]}});if(!_0x1596ec){await this[_0x5dce19(0x1fa)]?.[_0x5dce19(0x1b9)](_0x45a4ad,_0x5dce19(0x1bc)+_0x5dce19(0x260));return;}if(!_0x1596ec[_0x5dce19(0x24b)]||!_0x1596ec['shopId']||!_0x1596ec[_0x5dce19(0x216)]){await this[_0x5dce19(0x1fa)]?.[_0x5dce19(0x1b9)](_0x45a4ad,_0x5dce19(0x19f)+'Используйте\x20/start\x20для\x20подключения.');return;}await this[_0x5dce19(0x1fa)]?.[_0x5dce19(0x1b9)](_0x45a4ad,_0x5dce19(0x186)+(_0x5dce19(0x211)+_0x1596ec['shop'][_0x5dce19(0x1f0)]+'*\x0a')+(_0x5dce19(0x218)+_0x1596ec['shop'][_0x5dce19(0x182)]+'`\x0a')+(_0x5dce19(0x1fe)+_0x1596ec['updatedAt']['toLocaleDateString'](_0x5dce19(0x181))+'\x0a\x0a')+_0x5dce19(0x25f)+'Команды:\x0a'+_0x5dce19(0x1ca),{'parse_mode':_0x5dce19(0x1d9)});}catch(_0x307df1){console[_0x5dce19(0x217)](_0x5dce19(0x1f6),_0x307df1),await this[_0x5dce19(0x1fa)]?.[_0x5dce19(0x1b9)](_0x45a4ad,_0x5dce19(0x1c8));}}),this[_0x231def(0x1fa)][_0x231def(0x245)](/\/debug/,async _0x53727a=>{const _0x2a1fb6=_0x231def,_0x2cdf4a=_0x53727a[_0x2a1fb6(0x1e4)]['id'],_0x214719=_0x53727a[_0x2a1fb6(0x221)]?.['id'][_0x2a1fb6(0x1bd)]();if(!_0x214719)return;try{const _0x26e48f=await database_1[_0x2a1fb6(0x1da)][_0x2a1fb6(0x216)][_0x2a1fb6(0x22a)]({'select':{'id':!![],'name':!![],'username':!![],'status':!![],'publicKey':!![]},'take':0xa});let _0x5623cf=_0x2a1fb6(0x1cd);_0x5623cf+=_0x2a1fb6(0x1a4)+_0x214719+_0x2a1fb6(0x19c),_0x5623cf+='🏪\x20Доступные\x20магазины\x20в\x20системе:\x0a',_0x26e48f[_0x2a1fb6(0x188)]((_0x7940f5,_0x24750d)=>{const _0x571e87=_0x2a1fb6;_0x5623cf+=_0x24750d+0x1+'.\x20*'+_0x7940f5[_0x571e87(0x1f0)]+'*\x0a',_0x5623cf+=_0x571e87(0x208)+_0x7940f5[_0x571e87(0x182)]+'`\x0a',_0x5623cf+=_0x571e87(0x17d)+_0x7940f5[_0x571e87(0x24a)]+'\x0a',_0x5623cf+=_0x571e87(0x1eb)+_0x7940f5[_0x571e87(0x1e5)]['substring'](0x0,0xf)+'...`\x0a\x0a';}),await this['bot']?.[_0x2a1fb6(0x1b9)](_0x2cdf4a,_0x5623cf,{'parse_mode':_0x2a1fb6(0x1d9)});}catch(_0x4b84c2){console[_0x2a1fb6(0x217)]('Error\x20handling\x20/debug\x20command:',_0x4b84c2),await this['bot']?.[_0x2a1fb6(0x1b9)](_0x2cdf4a,_0x2a1fb6(0x1d3));}}),this['bot']['on'](_0x231def(0x255),async _0x3e81c5=>{const _0xb90ea7=_0x231def;if(_0x3e81c5[_0xb90ea7(0x1a6)]?.[_0xb90ea7(0x20f)]('/'))return;const _0x195119=_0x3e81c5[_0xb90ea7(0x1e4)]['id'],_0x4371ea=_0x3e81c5['from']?.['id'][_0xb90ea7(0x1bd)](),_0x2fb406=_0x3e81c5[_0xb90ea7(0x1a6)]?.[_0xb90ea7(0x237)]();if(!_0x4371ea||!_0x2fb406)return;try{const _0x14f39d=await database_1[_0xb90ea7(0x1da)][_0xb90ea7(0x26a)]['findUnique']({'where':{'telegramId':_0x4371ea},'include':{'shop':!![]}});if(!_0x14f39d){await this['bot']?.[_0xb90ea7(0x1b9)](_0x195119,_0xb90ea7(0x23f));return;}if(_0x14f39d['isVerified']&&_0x14f39d[_0xb90ea7(0x1b1)]&&_0x14f39d[_0xb90ea7(0x216)]){await this[_0xb90ea7(0x1fa)]?.['sendMessage'](_0x195119,_0xb90ea7(0x1ee)+_0x14f39d['shop'][_0xb90ea7(0x1f0)]+_0xb90ea7(0x1f3)+_0xb90ea7(0x20b),{'parse_mode':'Markdown'});return;}const _0x4ea2b5=_0x2fb406[_0xb90ea7(0x231)]('\x0a')[_0xb90ea7(0x192)](_0x2bc6bf=>_0x2bc6bf[_0xb90ea7(0x237)]())['filter'](_0x169627=>_0x169627[_0xb90ea7(0x21e)]>0x0);if(_0x4ea2b5[_0xb90ea7(0x21e)]===0x2){const [_0x989c7e,_0x135782]=_0x4ea2b5;await this['handleMultilineVerification'](_0x195119,_0x4371ea,_0x989c7e,_0x135782);}else{if(_0x4ea2b5[_0xb90ea7(0x21e)]===0x1){const _0xda236=_0x4ea2b5[0x0];if(_0xda236[_0xb90ea7(0x21e)]>=0x3&&_0xda236['length']<=0x32&&/^[a-zA-Z0-9_]+$/[_0xb90ea7(0x212)](_0xda236))await this[_0xb90ea7(0x21d)](_0x195119,_0x4371ea,_0xda236);else _0xda236[_0xb90ea7(0x20f)](_0xb90ea7(0x25e))||_0xda236[_0xb90ea7(0x20f)]('sk_')?await this[_0xb90ea7(0x269)](_0x195119,_0x4371ea,_0xda236):await this[_0xb90ea7(0x1fa)]?.['sendMessage'](_0x195119,'❌\x20Неверный\x20формат\x20данных.\x0a\x0a'+_0xb90ea7(0x1ff)+'1️⃣\x20Сначала\x20ваш\x20username\x20(только\x20буквы,\x20цифры\x20и\x20подчеркивание)\x0a'+_0xb90ea7(0x23c)+_0xb90ea7(0x187)+_0xb90ea7(0x1d7)+'`pk_aa6450d3f57afbefbb0f3f5be5ce6cca13037536afc5ccf14c81a6cbc7a07de5`',{'parse_mode':_0xb90ea7(0x1d9)});}else await this[_0xb90ea7(0x1fa)]?.['sendMessage'](_0x195119,_0xb90ea7(0x258)+'Отправьте\x20username\x20и\x20API\x20ключ\x20в\x20одном\x20сообщении\x20через\x20перенос\x20строки\x20или\x20отдельными\x20сообщениями.\x0a\x0a'+'Пример:\x0a'+_0xb90ea7(0x1d7)+_0xb90ea7(0x204),{'parse_mode':_0xb90ea7(0x1d9)});}}catch(_0x5b09e4){console[_0xb90ea7(0x217)](_0xb90ea7(0x1c1),_0x5b09e4),await this['bot']?.['sendMessage'](_0x195119,'❌\x20Произошла\x20ошибка.\x20Попробуйте\x20позже.');}}),this[_0x231def(0x1fa)]['on'](_0x231def(0x217),_0x2af674=>{const _0x356699=_0x231def;console[_0x356699(0x217)]('Telegram\x20bot\x20error:',_0x2af674);}),this[_0x231def(0x1fa)]['on'](_0x231def(0x239),_0x5aa78a=>{const _0xb4e11d=_0x231def;console[_0xb4e11d(0x217)](_0xb4e11d(0x1f4),_0x5aa78a);});}async['handleMultilineVerification'](_0x5e9927,_0x151b89,_0x43d7f6,_0xcedc24){const _0x5bf8bc=a49_0x53842a;try{console['log'](_0x5bf8bc(0x1db)+_0x151b89+_0x5bf8bc(0x232)+_0x43d7f6+_0x5bf8bc(0x1c3)+_0xcedc24[_0x5bf8bc(0x1ac)](0x0,0xa)+_0x5bf8bc(0x223));if(!_0x43d7f6||_0x43d7f6[_0x5bf8bc(0x21e)]<0x3||_0x43d7f6[_0x5bf8bc(0x21e)]>0x32||!/^[a-zA-Z0-9_]+$/['test'](_0x43d7f6)){await this[_0x5bf8bc(0x1fa)]?.['sendMessage'](_0x5e9927,_0x5bf8bc(0x23e)+_0x43d7f6+_0x5bf8bc(0x19c)+_0x5bf8bc(0x22f),{'parse_mode':_0x5bf8bc(0x1d9)});return;}if(!_0xcedc24||!_0xcedc24[_0x5bf8bc(0x20f)]('pk_')&&!_0xcedc24[_0x5bf8bc(0x20f)]('sk_')){await this['bot']?.['sendMessage'](_0x5e9927,_0x5bf8bc(0x203)+_0x5bf8bc(0x25c),{'parse_mode':_0x5bf8bc(0x1d9)});return;}const _0x393551=await database_1['default'][_0x5bf8bc(0x216)][_0x5bf8bc(0x1e0)]({'where':{'username':_0x43d7f6},'select':{'id':!![],'name':!![],'username':!![],'status':!![],'publicKey':!![],'secretKey':!![]}});if(!_0x393551){const _0x47c713=await database_1[_0x5bf8bc(0x1da)][_0x5bf8bc(0x216)][_0x5bf8bc(0x22a)]({'select':{'username':!![],'name':!![]},'take':0x5});let _0x2dc547='❌\x20Магазин\x20с\x20username\x20`'+_0x43d7f6+_0x5bf8bc(0x205);_0x47c713[_0x5bf8bc(0x21e)]>0x0?(_0x2dc547+=_0x5bf8bc(0x185),_0x47c713[_0x5bf8bc(0x188)](_0x2c0016=>{const _0x2dc924=_0x5bf8bc;_0x2dc547+=_0x2dc924(0x19e)+_0x2c0016[_0x2dc924(0x182)]+'`\x20('+_0x2c0016[_0x2dc924(0x1f0)]+')\x0a';}),_0x2dc547+='\x0aПроверьте\x20правильность\x20написания\x20и\x20попробуйте\x20снова.'):_0x2dc547+=_0x5bf8bc(0x189);await this[_0x5bf8bc(0x1fa)]?.['sendMessage'](_0x5e9927,_0x2dc547,{'parse_mode':_0x5bf8bc(0x1d9)});return;}if(_0x393551[_0x5bf8bc(0x24a)]!==_0x5bf8bc(0x26f)){await this[_0x5bf8bc(0x1fa)]?.['sendMessage'](_0x5e9927,_0x5bf8bc(0x243)+_0x43d7f6+'`\x20неактивен.\x0a\x0a'+_0x5bf8bc(0x246),{'parse_mode':_0x5bf8bc(0x1d9)});return;}if(_0x393551[_0x5bf8bc(0x1e5)]!==_0xcedc24&&_0x393551[_0x5bf8bc(0x1a1)]!==_0xcedc24){await this[_0x5bf8bc(0x1fa)]?.[_0x5bf8bc(0x1b9)](_0x5e9927,'❌\x20API\x20ключ\x20не\x20соответствует\x20магазину\x20`'+_0x43d7f6+'`.\x0a\x0a'+_0x5bf8bc(0x226)+'Ожидаемый\x20формат\x20ключа:\x20`pk_...`\x20или\x20`sk_...`',{'parse_mode':_0x5bf8bc(0x1d9)});return;}const _0x49ed8a=await database_1[_0x5bf8bc(0x1da)][_0x5bf8bc(0x26a)]['findFirst']({'where':{'shopId':_0x393551['id'],'isVerified':!![],'telegramId':{'not':_0x151b89}}});if(_0x49ed8a){await this['bot']?.['sendMessage'](_0x5e9927,_0x5bf8bc(0x1c9)+_0x43d7f6+_0x5bf8bc(0x1a8)+_0x5bf8bc(0x1be),{'parse_mode':'Markdown'});return;}await database_1[_0x5bf8bc(0x1da)][_0x5bf8bc(0x26a)]['update']({'where':{'telegramId':_0x151b89},'data':{'shopId':_0x393551['id'],'isVerified':!![]}}),await this[_0x5bf8bc(0x1fa)]?.['sendMessage'](_0x5e9927,_0x5bf8bc(0x233)+'✅\x20Вы\x20успешно\x20подключены\x20к\x20системе\x20уведомлений!\x0a\x0a'+(_0x5bf8bc(0x18f)+_0x393551[_0x5bf8bc(0x1f0)]+'*\x0a')+(_0x5bf8bc(0x218)+_0x393551['username']+_0x5bf8bc(0x19c))+_0x5bf8bc(0x214)+_0x5bf8bc(0x209)+_0x5bf8bc(0x1d1)+_0x5bf8bc(0x1ad)+_0x5bf8bc(0x1c6)+_0x5bf8bc(0x18b)+_0x5bf8bc(0x22b)+_0x5bf8bc(0x1ca),{'parse_mode':_0x5bf8bc(0x1d9)}),console[_0x5bf8bc(0x1e7)]('✅\x20Telegram\x20user\x20'+_0x151b89+_0x5bf8bc(0x1e1)+_0x393551[_0x5bf8bc(0x182)]+_0x5bf8bc(0x18a));}catch(_0x4335bc){console['error']('Error\x20in\x20handleMultilineVerification:',_0x4335bc),await this[_0x5bf8bc(0x1fa)]?.['sendMessage'](_0x5e9927,_0x5bf8bc(0x1e8));}}async['handleUsernameVerification'](_0x2225e7,_0x51a90b,_0x35eff9){const _0x546a7f=a49_0x53842a;try{console[_0x546a7f(0x1e7)]('🔄\x20Processing\x20username\x20verification\x20for\x20user\x20'+_0x51a90b+_0x546a7f(0x232)+_0x35eff9+'\x22');const _0x220b7b=await database_1[_0x546a7f(0x1da)][_0x546a7f(0x216)]['findUnique']({'where':{'username':_0x35eff9},'select':{'id':!![],'name':!![],'username':!![],'status':!![]}});if(!_0x220b7b){const _0x1d8267=await database_1[_0x546a7f(0x1da)][_0x546a7f(0x216)]['findMany']({'select':{'username':!![],'name':!![]},'take':0x5});let _0x356e3c='❌\x20Магазин\x20с\x20username\x20`'+_0x35eff9+_0x546a7f(0x205);_0x1d8267[_0x546a7f(0x21e)]>0x0?(_0x356e3c+=_0x546a7f(0x185),_0x1d8267[_0x546a7f(0x188)](_0x21a9ff=>{const _0x82ce65=_0x546a7f;_0x356e3c+=_0x82ce65(0x19e)+_0x21a9ff[_0x82ce65(0x182)]+_0x82ce65(0x1c0)+_0x21a9ff[_0x82ce65(0x1f0)]+')\x0a';}),_0x356e3c+=_0x546a7f(0x21b)):_0x356e3c+=_0x546a7f(0x189);await this[_0x546a7f(0x1fa)]?.[_0x546a7f(0x1b9)](_0x2225e7,_0x356e3c,{'parse_mode':_0x546a7f(0x1d9)});return;}if(_0x220b7b[_0x546a7f(0x24a)]!==_0x546a7f(0x26f)){await this['bot']?.[_0x546a7f(0x1b9)](_0x2225e7,'❌\x20Магазин\x20`'+_0x35eff9+_0x546a7f(0x23a)+_0x546a7f(0x246),{'parse_mode':_0x546a7f(0x1d9)});return;}await database_1[_0x546a7f(0x1da)][_0x546a7f(0x26a)][_0x546a7f(0x1bb)]({'where':{'telegramId':_0x51a90b},'data':{'shopId':_0x220b7b['id'],'isVerified':![]}}),await this[_0x546a7f(0x1fa)]?.['sendMessage'](_0x2225e7,'✅\x20Username\x20`'+_0x35eff9+_0x546a7f(0x1e6)+(_0x546a7f(0x1fb)+_0x220b7b['name']+_0x546a7f(0x1b7))+_0x546a7f(0x251),{'parse_mode':_0x546a7f(0x1d9)}),console[_0x546a7f(0x1e7)](_0x546a7f(0x261)+_0x51a90b+_0x546a7f(0x1ba)+_0x220b7b[_0x546a7f(0x182)]);}catch(_0x11d8e8){console[_0x546a7f(0x217)](_0x546a7f(0x22c),_0x11d8e8),await this[_0x546a7f(0x1fa)]?.[_0x546a7f(0x1b9)](_0x2225e7,_0x546a7f(0x18d));}}async['handleApiKeyVerification'](_0x289e76,_0x2db732,_0x3e391d){const _0x540097=a49_0x53842a;try{console[_0x540097(0x1e7)](_0x540097(0x1d4)+_0x2db732+_0x540097(0x196)+_0x3e391d[_0x540097(0x1ac)](0x0,0xa)+_0x540097(0x223));const _0x57f34c=await database_1[_0x540097(0x1da)][_0x540097(0x26a)]['findUnique']({'where':{'telegramId':_0x2db732},'include':{'shop':!![]}});if(!_0x57f34c?.[_0x540097(0x1b1)]){await this['bot']?.[_0x540097(0x1b9)](_0x289e76,_0x540097(0x1b2)+_0x540097(0x24c)+'1️⃣\x20Username\x0a'+'2️⃣\x20API\x20ключ');return;}if(_0x57f34c[_0x540097(0x24b)]){await this[_0x540097(0x1fa)]?.[_0x540097(0x1b9)](_0x289e76,_0x540097(0x1ee)+(_0x57f34c[_0x540097(0x216)]?.['name']||'неизвестный')+_0x540097(0x1f3)+'Используйте\x20/status\x20для\x20проверки\x20статуса.',{'parse_mode':_0x540097(0x1d9)});return;}const _0x1c6cbe=await database_1[_0x540097(0x1da)][_0x540097(0x216)][_0x540097(0x1a2)]({'where':{'id':_0x57f34c[_0x540097(0x1b1)],'OR':[{'publicKey':_0x3e391d},{'secretKey':_0x3e391d}]}});if(!_0x1c6cbe){await this[_0x540097(0x1fa)]?.[_0x540097(0x1b9)](_0x289e76,_0x540097(0x210)+_0x540097(0x26e)+_0x540097(0x1af),{'parse_mode':_0x540097(0x1d9)}),await database_1[_0x540097(0x1da)][_0x540097(0x26a)][_0x540097(0x1bb)]({'where':{'telegramId':_0x2db732},'data':{'shopId':null,'isVerified':![]}}),console[_0x540097(0x1e7)]('❌\x20Invalid\x20API\x20key\x20for\x20user\x20'+_0x2db732+_0x540097(0x230));return;}const _0x5d02cf=await database_1[_0x540097(0x1da)][_0x540097(0x26a)]['findFirst']({'where':{'shopId':_0x1c6cbe['id'],'isVerified':!![],'telegramId':{'not':_0x2db732}}});if(_0x5d02cf){await this[_0x540097(0x1fa)]?.[_0x540097(0x1b9)](_0x289e76,_0x540097(0x1c9)+_0x1c6cbe[_0x540097(0x182)]+_0x540097(0x1a8)+'Сначала\x20отключите\x20предыдущий\x20аккаунт\x20или\x20обратитесь\x20к\x20администратору.',{'parse_mode':_0x540097(0x1d9)}),await database_1[_0x540097(0x1da)][_0x540097(0x26a)][_0x540097(0x1bb)]({'where':{'telegramId':_0x2db732},'data':{'shopId':null,'isVerified':![]}});return;}await database_1[_0x540097(0x1da)][_0x540097(0x26a)][_0x540097(0x1bb)]({'where':{'telegramId':_0x2db732},'data':{'isVerified':!![]}}),await this['bot']?.['sendMessage'](_0x289e76,'🎉\x20*Поздравляем!*\x0a\x0a'+_0x540097(0x1b4)+(_0x540097(0x18f)+_0x1c6cbe[_0x540097(0x1f0)]+'*\x0a')+(_0x540097(0x218)+_0x1c6cbe[_0x540097(0x182)]+'`\x0a\x0a')+_0x540097(0x214)+_0x540097(0x209)+_0x540097(0x1d1)+_0x540097(0x1ad)+_0x540097(0x1c6)+_0x540097(0x18b)+_0x540097(0x22b)+_0x540097(0x1ca),{'parse_mode':_0x540097(0x1d9)}),console[_0x540097(0x1e7)](_0x540097(0x1ae)+_0x2db732+_0x540097(0x1e1)+_0x1c6cbe['username']);}catch(_0x3679ed){console[_0x540097(0x217)]('Error\x20in\x20handleApiKeyVerification:',_0x3679ed),await this['bot']?.[_0x540097(0x1b9)](_0x289e76,'❌\x20Произошла\x20ошибка\x20при\x20проверке\x20API\x20ключа.');}}async[a49_0x53842a(0x1d6)](_0x4395b9,_0x42475e,_0x34b2d3){const _0x3a50df=a49_0x53842a;if(!this[_0x3a50df(0x1fa)]){console[_0x3a50df(0x249)](_0x3a50df(0x1df));return;}try{const _0x5c21a6=await database_1[_0x3a50df(0x1da)][_0x3a50df(0x26a)][_0x3a50df(0x22a)]({'where':{'shopId':_0x4395b9,'isVerified':!![]}});if(_0x5c21a6[_0x3a50df(0x21e)]===0x0){console['log'](_0x3a50df(0x23b)+_0x4395b9);return;}const _0x233481=_0x5c21a6['map'](async _0x54e57c=>{const _0x233ef9=_0x3a50df;try{await this[_0x233ef9(0x1fa)]?.[_0x233ef9(0x1b9)](_0x54e57c['telegramId'],_0x42475e,_0x34b2d3),console[_0x233ef9(0x1e7)](_0x233ef9(0x1f5)+_0x54e57c[_0x233ef9(0x18e)]);}catch(_0x29a785){console[_0x233ef9(0x217)](_0x233ef9(0x1ea)+_0x54e57c[_0x233ef9(0x18e)]+':',_0x29a785),_0x29a785 instanceof Error&&(_0x29a785[_0x233ef9(0x255)][_0x233ef9(0x1ec)](_0x233ef9(0x241))||_0x29a785['message']['includes'](_0x233ef9(0x1f9))||_0x29a785[_0x233ef9(0x255)][_0x233ef9(0x1ec)](_0x233ef9(0x264)))&&(await database_1['default'][_0x233ef9(0x26a)][_0x233ef9(0x1bb)]({'where':{'id':_0x54e57c['id']},'data':{'isVerified':![]}}),console[_0x233ef9(0x1e7)](_0x233ef9(0x19d)+_0x54e57c[_0x233ef9(0x18e)]+_0x233ef9(0x23d)));}});await Promise[_0x3a50df(0x1d8)](_0x233481);}catch(_0x56c3b2){console['error'](_0x3a50df(0x1dc),_0x56c3b2);}}async['sendPaymentNotification'](_0xa6db5b,_0x11a210,_0x210025){const _0x586fb3=a49_0x53842a,_0x462e67={'created':'🆕','paid':'✅','failed':'❌','expired':'⏰','refund':'🔄','chargeback':'⚠️'},_0x1d4d76={'created':_0x586fb3(0x198),'paid':_0x586fb3(0x184),'failed':_0x586fb3(0x1b8),'expired':_0x586fb3(0x207),'refund':'Возврат\x20платежа','chargeback':_0x586fb3(0x1b6)},_0x296d00=_0x462e67[_0x210025],_0x46e4ea=_0x1d4d76[_0x210025];let _0x229762=_0x296d00+'\x20*'+_0x46e4ea+'*\x0a\x0a'+(_0x586fb3(0x190)+_0x11a210[_0x586fb3(0x1c5)]+'\x20'+_0x11a210[_0x586fb3(0x24e)]+'*\x0a')+(_0x586fb3(0x262)+(_0x11a210[_0x586fb3(0x1e9)]||_0x11a210['id'])+'`\x0a')+(_0x586fb3(0x1de)+_0x11a210['id']+'`\x0a')+('🏪\x20Шлюз:\x20`'+_0x11a210['gateway'][_0x586fb3(0x244)]()+'`\x0a')+(_0x586fb3(0x229)+new Date(_0x11a210['createdAt'])['toLocaleString'](_0x586fb3(0x181))+'\x0a');_0x210025==='chargeback'&&_0x11a210['chargebackAmount']&&(_0x229762+=_0x586fb3(0x20c)+_0x11a210[_0x586fb3(0x183)]+_0x586fb3(0x20e)),_0x11a210[_0x586fb3(0x21f)]&&(_0x229762+=_0x586fb3(0x197)+_0x11a210[_0x586fb3(0x21f)]+'\x0a'),await this[_0x586fb3(0x1d6)](_0xa6db5b,_0x229762,{'parse_mode':_0x586fb3(0x1d9)});}async['sendPayoutNotification'](_0x4d04f7,_0x1020aa,_0x23299e){const _0xacb267=a49_0x53842a,_0x264560={'created':'📤','completed':'✅','rejected':'❌'},_0x16894a={'created':_0xacb267(0x267),'completed':_0xacb267(0x1fc),'rejected':_0xacb267(0x1ce)},_0x35e4d0=_0x264560[_0x23299e],_0x2d68d3=_0x16894a[_0x23299e],_0x390782=_0x35e4d0+'\x20*'+_0x2d68d3+_0xacb267(0x1b7)+(_0xacb267(0x191)+_0x1020aa[_0xacb267(0x1c5)]+_0xacb267(0x26b))+(_0xacb267(0x25d)+_0x1020aa[_0xacb267(0x21c)]+'`\x0a')+(_0xacb267(0x224)+_0x1020aa['id']+'`\x0a')+(_0xacb267(0x229)+new Date(_0x1020aa['createdAt'])[_0xacb267(0x1d5)](_0xacb267(0x181))+'\x0a')+(_0x1020aa[_0xacb267(0x252)]?'🔗\x20TXID:\x20`'+_0x1020aa[_0xacb267(0x252)]+'`':'');await this[_0xacb267(0x1d6)](_0x4d04f7,_0x390782,{'parse_mode':_0xacb267(0x1d9)});}async[a49_0x53842a(0x20d)](_0x1b490a,_0x51c96f){const _0x18de26=a49_0x53842a;try{const _0x5a5c51=await database_1[_0x18de26(0x1da)][_0x18de26(0x228)][_0x18de26(0x1e0)]({'where':{'shopId':_0x1b490a},'select':{'notificationLogin':!![]}});if(!_0x5a5c51?.[_0x18de26(0x1ed)]){console[_0x18de26(0x1e7)](_0x18de26(0x236)+_0x1b490a);return;}const _0x253481=_0x51c96f['success']?'🔐':'🚨',_0x3eab38=_0x51c96f['success']?'Успешный\x20вход\x20в\x20систему':_0x18de26(0x1f7);let _0x1b75d5=_0x253481+'\x20*'+_0x3eab38+_0x18de26(0x1b7)+(_0x18de26(0x218)+_0x51c96f['username']+'`\x0a')+(_0x18de26(0x20a)+_0x51c96f['timestamp'][_0x18de26(0x1d5)](_0x18de26(0x181))+'\x0a');_0x51c96f[_0x18de26(0x202)]&&(_0x1b75d5+='🌐\x20IP\x20адрес:\x20`'+_0x51c96f[_0x18de26(0x202)]+'`\x0a');if(_0x51c96f[_0x18de26(0x1c4)]){const _0x12ddb6=_0x51c96f[_0x18de26(0x1c4)][_0x18de26(0x21e)]>0x32?_0x51c96f[_0x18de26(0x1c4)][_0x18de26(0x1ac)](0x0,0x32)+_0x18de26(0x1ab):_0x51c96f['userAgent'];_0x1b75d5+=_0x18de26(0x219)+_0x12ddb6+'`\x0a';}!_0x51c96f['success']&&(_0x1b75d5+='\x0a⚠️\x20Если\x20это\x20не\x20вы,\x20немедленно\x20смените\x20пароль!'),await this['sendShopNotification'](_0x1b490a,_0x1b75d5,{'parse_mode':_0x18de26(0x1d9)}),console['log']('✅\x20Login\x20notification\x20sent\x20for\x20shop\x20'+_0x1b490a+':\x20'+(_0x51c96f[_0x18de26(0x222)]?_0x18de26(0x222):_0x18de26(0x238)));}catch(_0x40a83d){console['error'](_0x18de26(0x25a),_0x40a83d);}}async[a49_0x53842a(0x199)](_0x5b4119,_0x21343a){const _0x42ff96=a49_0x53842a;try{const _0x1e5ab6=await database_1[_0x42ff96(0x1da)][_0x42ff96(0x228)][_0x42ff96(0x1e0)]({'where':{'shopId':_0x5b4119},'select':{'notificationApiError':!![]}});if(!_0x1e5ab6?.[_0x42ff96(0x194)]){console['log'](_0x42ff96(0x1c2)+_0x5b4119);return;}let _0x5a4795=_0x42ff96(0x22e)+(_0x42ff96(0x206)+_0x21343a[_0x42ff96(0x21c)]+'\x20'+_0x21343a[_0x42ff96(0x1e2)]+'`\x0a')+('📅\x20Время:\x20'+_0x21343a['timestamp']['toLocaleString']('ru-RU')+'\x0a');_0x21343a[_0x42ff96(0x234)]&&(_0x5a4795+=_0x42ff96(0x26d)+_0x21343a[_0x42ff96(0x234)]+'`\x0a'),_0x5a4795+=_0x42ff96(0x1a3)+_0x21343a[_0x42ff96(0x242)]+'`\x0a',_0x21343a[_0x42ff96(0x248)]&&(_0x5a4795+=_0x42ff96(0x24f)+_0x21343a[_0x42ff96(0x248)]+'`\x0a'),_0x5a4795+=_0x42ff96(0x247),await this['sendShopNotification'](_0x5b4119,_0x5a4795,{'parse_mode':'Markdown'}),console[_0x42ff96(0x1e7)](_0x42ff96(0x24d)+_0x5b4119+':\x20'+_0x21343a[_0x42ff96(0x1e2)]);}catch(_0x41d015){console['error']('Failed\x20to\x20send\x20API\x20error\x20notification:',_0x41d015);}}async['sendCustomNotification'](_0x296e9d,_0x2c9cc8,_0x483ea9){const _0x19a87c=a49_0x53842a;let _0x28cd39=_0x19a87c(0x259)+_0x2c9cc8+'*\x0a\x0a';for(const [_0xb09693,_0x2068dd]of Object['entries'](_0x483ea9)){_0x2068dd!==null&&_0x2068dd!==undefined&&(_0x28cd39+=_0xb09693+_0x19a87c(0x263)+_0x2068dd+'`\x0a');}await this[_0x19a87c(0x1d6)](_0x296e9d,_0x28cd39,{'parse_mode':_0x19a87c(0x1d9)});}[a49_0x53842a(0x1cf)](){const _0x38c7c6=a49_0x53842a;return{'isActive':!!this[_0x38c7c6(0x1fa)],'username':this[_0x38c7c6(0x1b3)]};}['stopBot'](){const _0x1f040c=a49_0x53842a;this[_0x1f040c(0x1fa)]&&(this['bot'][_0x1f040c(0x26c)](),this[_0x1f040c(0x1fa)]=null,console[_0x1f040c(0x1e7)](_0x1f040c(0x215)));}}exports[a49_0x53842a(0x254)]=TelegramBotService,exports[a49_0x53842a(0x25b)]=new TelegramBotService();function a49_0x7d44(){const _0x44a504=['📱\x20API\x20error\x20notifications\x20disabled\x20for\x20shop\x20','\x22,\x20apiKey=\x22','userAgent','amount','•\x20Важных\x20событиях\x0a\x0a','env','❌\x20Произошла\x20ошибка.\x20Попробуйте\x20позже.','❌\x20К\x20магазину\x20`','/disconnect\x20-\x20отключиться\x20от\x20уведомлений','80HAxIXo','•\x20Выплатах\x0a\x0a','🔍\x20*Отладочная\x20информация*\x0a\x0a','Выплата\x20отклонена','getBotInfo','341343oSenSm','•\x20Изменении\x20статуса\x20платежей\x0a','botToken','❌\x20Произошла\x20ошибка\x20при\x20получении\x20отладочной\x20информации.','🔄\x20Processing\x20API\x20key\x20verification\x20for\x20user\x20','toLocaleString','sendShopNotification','`appple`\x0a','allSettled','Markdown','default','🔄\x20Processing\x20multiline\x20verification\x20for\x20user\x20','Error\x20sending\x20shop\x20notification:','🔔\x20Вы\x20получаете\x20уведомления\x20о:\x0a','🆔\x20ID\x20платежа:\x20`','Telegram\x20bot\x20not\x20initialized,\x20cannot\x20send\x20notification','findUnique','\x20verified\x20for\x20shop\x20','endpoint','✅\x20Вы\x20успешно\x20отключены\x20от\x20магазина\x20*','chat','publicKey','`\x20найден!\x0a\x0a','log','❌\x20Произошла\x20ошибка\x20при\x20проверке\x20данных.','orderId','❌\x20Failed\x20to\x20send\x20notification\x20to\x20Telegram\x20user\x20','\x20\x20\x20Public\x20Key:\x20`','includes','notificationLogin','✅\x20Вы\x20уже\x20подключены\x20к\x20магазину\x20*','✅\x20Telegram\x20bot\x20@','name','../config/database','defineProperty','*.\x0a\x0a','Telegram\x20bot\x20polling\x20error:','✅\x20Notification\x20sent\x20to\x20Telegram\x20user\x20','Error\x20handling\x20/status\x20command:','Неудачная\x20попытка\x20входа','2469552Jxqguf','chat\x20not\x20found','bot','Магазин:\x20*','Выплата\x20завершена','522576XMwOoQ','📅\x20Дата\x20подключения:\x20','Пожалуйста,\x20отправьте:\x0a','138yyPhTr','484862eVnNKx','ipAddress','❌\x20Неверный\x20формат\x20API\x20ключа.\x0a\x0a','`pk_aa6450d3f57afbefbb0f3f5be5ce6cca13037536afc5ccf14c81a6cbc7a07de5`','`\x20не\x20найден.\x0a\x0a','🔗\x20Endpoint:\x20`','Платеж\x20истек','\x20\x20\x20Username:\x20`','•\x20Новых\x20платежах\x0a','📅\x20Время:\x20','Используйте\x20/status\x20для\x20проверки\x20статуса\x20или\x20/disconnect\x20для\x20отключения.','💸\x20Сумма\x20штрафа:\x20*','sendLoginNotification','\x20USDT*\x0a','startsWith','❌\x20API\x20ключ\x20не\x20соответствует\x20магазину.\x0a\x0a','✅\x20Подключен\x20к\x20магазину:\x20*','test','first_name','🔔\x20Теперь\x20вы\x20будете\x20получать\x20уведомления\x20о:\x0a','🛑\x20Telegram\x20bot\x20stopped','shop','error','👤\x20Username:\x20`','💻\x20Браузер:\x20`','\x20(@','\x0aПроверьте\x20правильность\x20написания\x20и\x20попробуйте\x20снова.','method','handleUsernameVerification','length','adminNotes','26115bYkudv','from','success','...\x22','🆔\x20ID\x20выплаты:\x20`','TELEGRAM_BOT_TOKEN','Проверьте\x20правильность\x20ключа\x20и\x20попробуйте\x20снова.\x0a\x0a','3SDuhWI','shopSettings','📅\x20Дата:\x20','findMany','/status\x20-\x20проверить\x20статус\x20подключения\x0a','Error\x20in\x20handleUsernameVerification:','create','🚨\x20*Ошибка\x20API*\x0a\x0a','Username\x20должен\x20содержать\x20только\x20буквы,\x20цифры\x20и\x20подчеркивание\x20(3-50\x20символов).',',\x20reset\x20shop\x20association','split',':\x20username=\x22','🎉\x20*Поздравляем!*\x0a\x0a','statusCode','last_name','📱\x20Login\x20notifications\x20disabled\x20for\x20shop\x20','trim','failed','polling_error','`\x20неактивен.\x0a\x0a','No\x20verified\x20Telegram\x20users\x20found\x20for\x20shop\x20','2️⃣\x20Затем\x20ваш\x20API\x20ключ\x20(начинается\x20с\x20pk\x5c_\x20или\x20sk\x5c_)\x0a\x0a','\x20marked\x20as\x20unverified\x20due\x20to\x20delivery\x20failure','❌\x20Неверный\x20формат\x20username:\x20`','❌\x20Сначала\x20используйте\x20команду\x20/start','❗️\x20Убедитесь,\x20что\x20отправляете\x20данные\x20в\x20правильном\x20порядке!','blocked','errorMessage','❌\x20Магазин\x20`','toUpperCase','onText','Обратитесь\x20к\x20администратору.','\x0a💡\x20Проверьте\x20правильность\x20запроса\x20или\x20обратитесь\x20в\x20поддержку.','requestId','warn','status','isVerified','Порядок:\x0a','✅\x20API\x20error\x20notification\x20sent\x20for\x20shop\x20','currency','🆔\x20Request\x20ID:\x20`','\x20disconnected\x20from\x20shop\x20','Теперь\x20отправьте\x20ваш\x20*API\x20ключ*\x20(публичный\x20или\x20секретный\x20ключ,\x20начинающийся\x20с\x20`pk\x5c_`\x20или\x20`sk\x5c_`)','txid','`pk_aa6450d3f57afbefbb0f3f5be5ce6cca13037536afc5ccf14c81a6cbc7a07de5`\x0a\x0a','TelegramBotService','message','1️⃣\x20Отправьте\x20ваш\x20*username*\x20(логин\x20от\x20панели)\x0a','node-telegram-bot-api','❌\x20Неверный\x20формат\x20данных.\x0a\x0a','🔔\x20*','Failed\x20to\x20send\x20login\x20notification:','telegramBotService','API\x20ключ\x20должен\x20начинаться\x20с\x20`pk\x5c_`\x20или\x20`sk\x5c_`.','🏦\x20Метод:\x20`','pk_','🔔\x20Уведомления\x20активны\x0a\x0a','Используйте\x20/start\x20для\x20начала\x20работы.','📝\x20Temporary\x20shop\x20association\x20created\x20for\x20user\x20','📝\x20Order\x20ID:\x20`',':\x20`','user\x20is\x20deactivated','\x20initialized\x20successfully','Пример:\x0a','Создана\x20новая\x20выплата','Для\x20повторного\x20подключения\x20используйте\x20команду\x20/start','handleApiKeyVerification','telegramUser','\x20USD*\x0a','stopPolling','📊\x20Код\x20ошибки:\x20`','Проверьте\x20правильность\x20ключа\x20или\x20начните\x20заново\x20с\x20команды\x20/start\x0a\x0a','ACTIVE','\x20\x20\x20Status:\x20','Error\x20handling\x20/start\x20command:','🔄\x20Reset\x20incomplete\x20verification\x20for\x20user\x20','Username:\x20`','ru-RU','username','chargebackAmount','Платеж\x20успешно\x20оплачен','Доступные\x20username:\x0a','📊\x20*Статус\x20подключения*\x0a\x0a','Вы\x20можете\x20отправить\x20их\x20в\x20одном\x20сообщении\x20через\x20перенос\x20строки:\x0a','forEach','Проверьте\x20правильность\x20написания\x20и\x20попробуйте\x20снова.','\x20via\x20multiline\x20input','Команды:\x0a','Вы\x20уже\x20подключены\x20к\x20магазину:\x20*','❌\x20Произошла\x20ошибка\x20при\x20проверке\x20username.','telegramId','📱\x20Магазин:\x20*','💰\x20Сумма:\x20*','💸\x20Сумма:\x20*','map','Error\x20handling\x20/disconnect\x20command:','notificationApiError','🤖\x20Добро\x20пожаловать\x20в\x20систему\x20уведомлений\x20TesSoft\x20Payment!\x0a\x0a',':\x20apiKey=\x22','📝\x20Заметки:\x20','Создан\x20новый\x20платеж','sendApiErrorNotification','неизвестный\x20магазин','213908pdggHs','`\x0a\x0a','User\x20','•\x20`','❌\x20Вы\x20не\x20подключены\x20к\x20магазину.\x0a\x0a','✅\x20Добро\x20пожаловать\x20обратно!\x0a\x0a','secretKey','findFirst','❌\x20Ошибка:\x20`','📱\x20Ваш\x20Telegram\x20ID:\x20`','__esModule','text','setupBotHandlers','`\x20уже\x20подключен\x20другой\x20Telegram\x20аккаунт.\x0a\x0a','TELEGRAM_BOT_TOKEN\x20not\x20found\x20in\x20environment\x20variables','initializeBot','...','substring','•\x20Выплатах\x0a','✅\x20Telegram\x20user\x20','Ожидаемый\x20формат\x20ключа:\x20`pk_...`\x20или\x20`sk_...`','Вы\x20можете\x20отправить\x20их\x20в\x20одном\x20сообщении\x20через\x20перенос\x20строки\x20или\x20отдельными\x20сообщениями:\x0a\x0a','shopId','❌\x20Сначала\x20отправьте\x20ваш\x20username.\x0a\x0a','botUsername','✅\x20Вы\x20успешно\x20подключены\x20к\x20системе\x20уведомлений!\x0a\x0a','TELEGRAM_BOT_USERNAME','Чарджбэк\x20по\x20платежу','*\x0a\x0a','Платеж\x20отклонен','sendMessage','\x20with\x20shop\x20','update','❌\x20Вы\x20не\x20зарегистрированы\x20в\x20системе.\x0a\x0a','toString','Сначала\x20отключите\x20предыдущий\x20аккаунт\x20или\x20обратитесь\x20к\x20администратору.','496792rUfkvP','`\x20(','Error\x20handling\x20message:'];a49_0x7d44=function(){return _0x44a504;};return a49_0x7d44();}