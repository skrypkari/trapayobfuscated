'use strict';const a48_0x1bd408=a48_0x4aa8;(function(_0x2d7f1f,_0x4d7251){const _0xee5e12=a48_0x4aa8,_0xcc1aa8=_0x2d7f1f();while(!![]){try{const _0x321499=-parseInt(_0xee5e12(0x27e))/0x1*(parseInt(_0xee5e12(0x1e4))/0x2)+parseInt(_0xee5e12(0x253))/0x3*(-parseInt(_0xee5e12(0x25b))/0x4)+-parseInt(_0xee5e12(0x1f8))/0x5*(parseInt(_0xee5e12(0x23e))/0x6)+parseInt(_0xee5e12(0x22b))/0x7+-parseInt(_0xee5e12(0x212))/0x8+parseInt(_0xee5e12(0x27a))/0x9+parseInt(_0xee5e12(0x19a))/0xa*(parseInt(_0xee5e12(0x1b6))/0xb);if(_0x321499===_0x4d7251)break;else _0xcc1aa8['push'](_0xcc1aa8['shift']());}catch(_0x21e153){_0xcc1aa8['push'](_0xcc1aa8['shift']());}}}(a48_0x13a8,0xab993));var __importDefault=this&&this[a48_0x1bd408(0x1a8)]||function(_0x1a2a27){return _0x1a2a27&&_0x1a2a27['__esModule']?_0x1a2a27:{'default':_0x1a2a27};};function a48_0x4aa8(_0x462799,_0x56d705){const _0x13a881=a48_0x13a8();return a48_0x4aa8=function(_0x4aa81c,_0x50bec6){_0x4aa81c=_0x4aa81c-0x18d;let _0x3c7ecc=_0x13a881[_0x4aa81c];return _0x3c7ecc;},a48_0x4aa8(_0x462799,_0x56d705);}function a48_0x13a8(){const _0x2e6725=['\x20verified\x20for\x20shop\x20','...','`pk_aa6450d3f57afbefbb0f3f5be5ce6cca13037536afc5ccf14c81a6cbc7a07de5`','–ü–ª–∞—Ç–µ–∂\x20–æ—Ç–∫–ª–æ–Ω–µ–Ω','\x20(@','üîç\x20*–û—Ç–ª–∞–¥–æ—á–Ω–∞—è\x20–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è*\x0a\x0a','create','secretKey','‚ùå\x20API\x20–∫–ª—é—á\x20–Ω–µ\x20—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç\x20–º–∞–≥–∞–∑–∏–Ω—É.\x0a\x0a','statusCode','‚ùå\x20–í—ã\x20–Ω–µ\x20–ø–æ–¥–∫–ª—é—á–µ–Ω—ã\x20–∫\x20—Å–∏—Å—Ç–µ–º–µ\x20—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.','\x20\x20\x20Username:\x20`','forEach','`pk_aa6450d3f57afbefbb0f3f5be5ce6cca13037536afc5ccf14c81a6cbc7a07de5`\x0a\x0a','‚ùå\x20Failed\x20to\x20initialize\x20Telegram\x20bot:','Telegram\x20bot\x20error:','Telegram\x20bot\x20polling\x20error:','telegramBotService','üîó\x20TXID:\x20`','allSettled','‚Ä¢\x20–í—ã–ø–ª–∞—Ç–∞—Ö\x0a','defineProperty','–ü–ª–∞—Ç–µ–∂\x20—É—Å–ø–µ—à–Ω–æ\x20–æ–ø–ª–∞—á–µ–Ω','Error\x20handling\x20/debug\x20command:','üì±\x20Created\x20new\x20Telegram\x20user:\x20','`\x20–Ω–∞–π–¥–µ–Ω!\x0a\x0a','‚úÖ\x20–ü–æ–¥–∫–ª—é—á–µ–Ω\x20–∫\x20–º–∞–≥–∞–∑–∏–Ω—É:\x20*','–ù–µ—É–¥–∞—á–Ω–∞—è\x20–ø–æ–ø—ã—Ç–∫–∞\x20–≤—Ö–æ–¥–∞',':\x20username=\x22','sendPaymentNotification','No\x20verified\x20Telegram\x20users\x20found\x20for\x20shop\x20','–î–æ—Å—Ç—É–ø–Ω—ã–µ\x20username:\x0a','adminNotes','ru-RU','`\x20–Ω–µ\x20–Ω–∞–π–¥–µ–Ω.\x0a\x0a','üìù\x20Order\x20ID:\x20`','6GuZGVh','User\x20','üí∏\x20–°—É–º–º–∞:\x20*','status','test','–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ\x20/start\x20–¥–ª—è\x20–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.','‚Ä¢\x20–ù–æ–≤—ã—Ö\x20–ø–ª–∞—Ç–µ–∂–∞—Ö\x0a','üë§\x20Username:\x20`','Error\x20handling\x20/status\x20command:','–ü—Ä–∏–º–µ—Ä:\x0a','\x20with\x20shop\x20','‚ùå\x20–°–Ω–∞—á–∞–ª–∞\x20–æ—Ç–ø—Ä–∞–≤—å—Ç–µ\x20–≤–∞—à\x20username.\x0a\x0a','ü§ñ\x20–î–æ–±—Ä–æ\x20–ø–æ–∂–∞–ª–æ–≤–∞—Ç—å\x20–≤\x20—Å–∏—Å—Ç–µ–º—É\x20—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π\x20TesSoft\x20Payment!\x0a\x0a','env','2Ô∏è‚É£\x20–ó–∞—Ç–µ–º\x20–≤–∞—à\x20API\x20–∫–ª—é—á\x20(–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è\x20—Å\x20pk\x5c_\x20–∏–ª–∏\x20sk\x5c_)\x0a\x0a','üÜî\x20ID\x20–ø–ª–∞—Ç–µ–∂–∞:\x20`','node-telegram-bot-api','üö®\x20*–û—à–∏–±–∫–∞\x20API*\x0a\x0a','‚Ä¢\x20`','‚ùå\x20–°–Ω–∞—á–∞–ª–∞\x20–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ\x20–∫–æ–º–∞–Ω–¥—É\x20/start','1119995nddikr','shopId','chat','‚ùå\x20–ü—Ä–æ–∏–∑–æ—à–ª–∞\x20–æ—à–∏–±–∫–∞\x20–ø—Ä–∏\x20–ø—Ä–æ–≤–µ—Ä–∫–µ\x20username.','*\x0a\x0a','üõë\x20Telegram\x20bot\x20stopped','requestId','‚ùå\x20–ö\x20–º–∞–≥–∞–∑–∏–Ω—É\x20`','‚Ä¢\x20–í–∞–∂–Ω—ã—Ö\x20—Å–æ–±—ã—Ç–∏—è—Ö\x0a\x0a','‚ùå\x20–ú–∞–≥–∞–∑–∏–Ω\x20`','–£—Å–ø–µ—à–Ω—ã–π\x20–≤—Ö–æ–¥\x20–≤\x20—Å–∏—Å—Ç–µ–º—É','TELEGRAM_BOT_TOKEN','setupBotHandlers','‚úÖ\x20–í—ã\x20—É—Å–ø–µ—à–Ω–æ\x20–ø–æ–¥–∫–ª—é—á–µ–Ω—ã\x20–∫\x20—Å–∏—Å—Ç–µ–º–µ\x20—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π!\x0a\x0a','sendPayoutNotification','TELEGRAM_BOT_USERNAME','message','üì±\x20–ú–∞–≥–∞–∑–∏–Ω:\x20*','–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ\x20/start\x20–¥–ª—è\x20–Ω–∞—á–∞–ª–∞\x20—Ä–∞–±–æ—Ç—ã.','\x20disconnected\x20from\x20shop\x20','pk_','telegramId','startsWith','–ö–æ–º–∞–Ω–¥—ã:\x0a','‚ùå\x20API\x20–∫–ª—é—á\x20–Ω–µ\x20—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç\x20–º–∞–≥–∞–∑–∏–Ω—É\x20`','`\x0a\x0a','6215576QrsVIB','‚ùå\x20–ü—Ä–æ–∏–∑–æ—à–ª–∞\x20–æ—à–∏–±–∫–∞\x20–ø—Ä–∏\x20–ø—Ä–æ–≤–µ—Ä–∫–µ\x20API\x20–∫–ª—é—á–∞.','findUnique','name','username','‚úÖ\x20Telegram\x20bot\x20@','shop','2Ô∏è‚É£\x20–ó–∞—Ç–µ–º\x20–æ—Ç–ø—Ä–∞–≤—å—Ç–µ\x20–≤–∞—à\x20*API\x20–∫–ª—é—á*\x0a\x0a','__esModule','telegramUser','sendMessage','`.\x0a\x0a','‚úÖ\x20Username\x20`','\x0a–ü—Ä–æ–≤–µ—Ä—å—Ç–µ\x20–ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å\x20–Ω–∞–ø–∏—Å–∞–Ω–∏—è\x20–∏\x20–ø–æ–ø—Ä–æ–±—É–π—Ç–µ\x20—Å–Ω–æ–≤–∞.','`appple`\x0a','/status\x20-\x20–ø—Ä–æ–≤–µ—Ä–∏—Ç—å\x20—Å—Ç–∞—Ç—É—Å\x20–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è\x0a','bot',',\x20reset\x20shop\x20association','TelegramBotService','Error\x20sending\x20shop\x20notification:','isVerified','error','üìÖ\x20–í—Ä–µ–º—è:\x20','...\x22','üìÖ\x20–î–∞—Ç–∞\x20–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:\x20','5016130SfVtUE','‚ùóÔ∏è\x20–£–±–µ–¥–∏—Ç–µ—Å—å,\x20—á—Ç–æ\x20–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç–µ\x20–¥–∞–Ω–Ω—ã–µ\x20–≤\x20–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º\x20–ø–æ—Ä—è–¥–∫–µ!','–ü—Ä–æ–≤–µ—Ä—å—Ç–µ\x20–ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å\x20–∫–ª—é—á–∞\x20–∏\x20–ø–æ–ø—Ä–æ–±—É–π—Ç–µ\x20—Å–Ω–æ–≤–∞.\x0a\x0a','Failed\x20to\x20send\x20API\x20error\x20notification:','API\x20–∫–ª—é—á\x20–¥–æ–ª–∂–µ–Ω\x20–Ω–∞—á–∏–Ω–∞—Ç—å—Å—è\x20—Å\x20`pk\x5c_`\x20–∏–ª–∏\x20`sk\x5c_`.','\x0aüí°\x20–ü—Ä–æ–≤–µ—Ä—å—Ç–µ\x20–ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å\x20–∑–∞–ø—Ä–æ—Å–∞\x20–∏–ª–∏\x20–æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å\x20–≤\x20–ø–æ–¥–¥–µ—Ä–∂–∫—É.','1Ô∏è‚É£\x20–û—Ç–ø—Ä–∞–≤—å—Ç–µ\x20–≤–∞—à\x20*username*\x20(–ª–æ–≥–∏–Ω\x20–æ—Ç\x20–ø–∞–Ω–µ–ª–∏)\x0a','‚úÖ\x20–í—ã\x20—É—Å–ø–µ—à–Ω–æ\x20–æ—Ç–∫–ª—é—á–µ–Ω—ã\x20–æ—Ç\x20–º–∞–≥–∞–∑–∏–Ω–∞\x20*','sendCustomNotification','*.\x0a\x0a','orderId','sendApiErrorNotification','üì±\x20–í–∞—à\x20Telegram\x20ID:\x20`','ipAddress','–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π','‚ùå\x20Invalid\x20API\x20key\x20for\x20user\x20','chat\x20not\x20found','from','üìä\x20–ö–æ–¥\x20–æ—à–∏–±–∫–∏:\x20`','6cbYLkS','üîÑ\x20Processing\x20username\x20verification\x20for\x20user\x20','warn','üîó\x20Endpoint:\x20`','handleUsernameVerification','–ü–ª–∞—Ç–µ–∂\x20–∏—Å—Ç–µ–∫','filter','length','includes','–°–æ–∑–¥–∞–Ω–∞\x20–Ω–æ–≤–∞—è\x20–≤—ã–ø–ª–∞—Ç–∞','amount','‚ùå\x20Failed\x20to\x20send\x20notification\x20to\x20Telegram\x20user\x20','`\x20(','endpoint','TELEGRAM_BOT_TOKEN\x20not\x20found\x20in\x20environment\x20variables','–ü–æ—Ä—è–¥–æ–∫:\x0a','toLocaleString',':\x20`','‚ùå\x20–ü—Ä–æ–∏–∑–æ—à–ª–∞\x20–æ—à–∏–±–∫–∞.\x20–ü–æ–ø—Ä–æ–±—É–π—Ç–µ\x20–ø–æ–∑–∂–µ.','user\x20is\x20deactivated','üÜî\x20ID\x20–≤—ã–ø–ª–∞—Ç—ã:\x20`','167337iMynAn','`\x20–Ω–µ–∞–∫—Ç–∏–≤–µ–Ω.\x0a\x0a','chargebackAmount','–¢–µ–ø–µ—Ä—å\x20–æ—Ç–ø—Ä–∞–≤—å—Ç–µ\x20–≤–∞—à\x20*API\x20–∫–ª—é—á*\x20(–ø—É–±–ª–∏—á–Ω—ã–π\x20–∏–ª–∏\x20—Å–µ–∫—Ä–µ—Ç–Ω—ã–π\x20–∫–ª—é—á,\x20–Ω–∞—á–∏–Ω–∞—é—â–∏–π—Å—è\x20—Å\x20`pk\x5c_`\x20–∏–ª–∏\x20`sk\x5c_`)','–û–±—Ä–∞—Ç–∏—Ç–µ—Å—å\x20–∫\x20–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É.','toString','üîÑ\x20Processing\x20API\x20key\x20verification\x20for\x20user\x20','txid','20qoFjsM','üîî\x20–¢–µ–ø–µ—Ä—å\x20–≤—ã\x20–±—É–¥–µ—Ç–µ\x20–ø–æ–ª—É—á–∞—Ç—å\x20—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è\x20–æ:\x0a','sk_','toUpperCase','Telegram\x20bot\x20not\x20initialized,\x20cannot\x20send\x20notification','ACTIVE','–û–∂–∏–¥–∞–µ–º—ã–π\x20—Ñ–æ—Ä–º–∞—Ç\x20–∫–ª—é—á–∞:\x20`pk_...`\x20–∏–ª–∏\x20`sk_...`','log','sendLoginNotification','Username\x20–¥–æ–ª–∂–µ–Ω\x20—Å–æ–¥–µ—Ä–∂–∞—Ç—å\x20—Ç–æ–ª—å–∫–æ\x20–±—É–∫–≤—ã,\x20—Ü–∏—Ñ—Ä—ã\x20–∏\x20–ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ\x20(3-50\x20—Å–∏–º–≤–æ–ª–æ–≤).','createdAt','entries','‚Ä¢\x20–í—ã–ø–ª–∞—Ç–∞—Ö\x0a\x0a','handleApiKeyVerification','split','publicKey','‚úÖ\x20Telegram\x20user\x20','–í—ã–ø–ª–∞—Ç–∞\x20–æ—Ç–∫–ª–æ–Ω–µ–Ω–∞','findFirst','getBotInfo','üì±\x20API\x20error\x20notifications\x20disabled\x20for\x20shop\x20','–ü—Ä–æ–≤–µ—Ä—å—Ç–µ\x20–ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å\x20–Ω–∞–ø–∏—Å–∞–Ω–∏—è\x20–∏\x20–ø–æ–ø—Ä–æ–±—É–π—Ç–µ\x20—Å–Ω–æ–≤–∞.','sendShopNotification','‚ùå\x20–ù–µ–≤–µ—Ä–Ω—ã–π\x20—Ñ–æ—Ä–º–∞—Ç\x20API\x20–∫–ª—é—á–∞.\x0a\x0a','botUsername','handleMultilineVerification','/disconnect\x20-\x20–æ—Ç–∫–ª—é—á–∏—Ç—å—Å—è\x20–æ—Ç\x20—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π','üìä\x20*–°—Ç–∞—Ç—É—Å\x20–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è*\x0a\x0a','–î–ª—è\x20–ø–æ–ª—É—á–µ–Ω–∏—è\x20—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π\x20–æ\x20–ø–ª–∞—Ç–µ–∂–∞—Ö,\x20–ø–æ–∂–∞–ª—É–π—Å—Ç–∞:\x0a\x0a','üè™\x20–î–æ—Å—Ç—É–ø–Ω—ã–µ\x20–º–∞–≥–∞–∑–∏–Ω—ã\x20–≤\x20—Å–∏—Å—Ç–µ–º–µ:\x0a','üíª\x20–ë—Ä–∞—É–∑–µ—Ä:\x20`','12004803WmkUoK','botToken','update','‚úÖ\x20–î–æ–±—Ä–æ\x20–ø–æ–∂–∞–ª–æ–≤–∞—Ç—å\x20–æ–±—Ä–∞—Ç–Ω–æ!\x0a\x0a','417283vsEZhX','–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π\x20–º–∞–≥–∞–∑–∏–Ω','üéâ\x20*–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!*\x0a\x0a','‚úÖ\x20Login\x20notification\x20sent\x20for\x20shop\x20','last_name','üí∞\x20–°—É–º–º–∞:\x20*','–í—ã\x20–º–æ–∂–µ—Ç–µ\x20–æ—Ç–ø—Ä–∞–≤–∏—Ç—å\x20–∏—Ö\x20–≤\x20–æ–¥–Ω–æ–º\x20—Å–æ–æ–±—â–µ–Ω–∏–∏\x20—á–µ—Ä–µ–∑\x20–ø–µ—Ä–µ–Ω–æ—Å\x20—Å—Ç—Ä–æ–∫–∏\x20–∏–ª–∏\x20–æ—Ç–¥–µ–ª—å–Ω—ã–º–∏\x20—Å–æ–æ–±—â–µ–Ω–∏—è–º–∏:\x0a\x0a','–í—ã\x20–º–æ–∂–µ—Ç–µ\x20–æ—Ç–ø—Ä–∞–≤–∏—Ç—å\x20–∏—Ö\x20–≤\x20–æ–¥–Ω–æ–º\x20—Å–æ–æ–±—â–µ–Ω–∏–∏\x20—á–µ—Ä–µ–∑\x20–ø–µ—Ä–µ–Ω–æ—Å\x20—Å—Ç—Ä–æ–∫–∏:\x0a','–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ\x20/status\x20–¥–ª—è\x20–ø—Ä–æ–≤–µ—Ä–∫–∏\x20—Å—Ç–∞—Ç—É—Å–∞\x20–∏–ª–∏\x20/disconnect\x20–¥–ª—è\x20–æ—Ç–∫–ª—é—á–µ–Ω–∏—è.','‚úÖ\x20–í—ã\x20—É–∂–µ\x20–ø–æ–¥–∫–ª—é—á–µ–Ω—ã\x20–∫\x20–º–∞–≥–∞–∑–∏–Ω—É\x20*','üîî\x20–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è\x20–∞–∫—Ç–∏–≤–Ω—ã\x0a\x0a','\x20USDT*\x0a','text','‚ùå\x20–ú–∞–≥–∞–∑–∏–Ω\x20—Å\x20username\x20`','592050AzjTkH','üí∏\x20–°—É–º–º–∞\x20—à—Ç—Ä–∞—Ñ–∞:\x20*','method','stopPolling','onText','shopSettings','timestamp','default','\x20\x20\x20Public\x20Key:\x20`',':\x20apiKey=\x22','polling_error','failed','‚Ä¢\x20–ò–∑–º–µ–Ω–µ–Ω–∏–∏\x20—Å—Ç–∞—Ç—É—Å–∞\x20–ø–ª–∞—Ç–µ–∂–µ–π\x0a','Markdown','__importDefault','‚ùå\x20–í—ã\x20–Ω–µ\x20–ø–æ–¥–∫–ª—é—á–µ–Ω—ã\x20–∫\x20–º–∞–≥–∞–∑–∏–Ω—É.\x0a\x0a','trim','../config/database','blocked','substring','–û—Ç–ø—Ä–∞–≤—å—Ç–µ\x20username\x20–∏\x20API\x20–∫–ª—é—á\x20–≤\x20–æ–¥–Ω–æ–º\x20—Å–æ–æ–±—â–µ–Ω–∏–∏\x20—á–µ—Ä–µ–∑\x20–ø–µ—Ä–µ–Ω–æ—Å\x20—Å—Ç—Ä–æ–∫–∏\x20–∏–ª–∏\x20–æ—Ç–¥–µ–ª—å–Ω—ã–º–∏\x20—Å–æ–æ–±—â–µ–Ω–∏—è–º–∏.\x0a\x0a','Error\x20in\x20handleApiKeyVerification:','\x20\x20\x20Status:\x20','Error\x20handling\x20/start\x20command:','`\x20—É–∂–µ\x20–ø–æ–¥–∫–ª—é—á–µ–Ω\x20–¥—Ä—É–≥–æ–π\x20Telegram\x20–∞–∫–∫–∞—É–Ω—Ç.\x0a\x0a','2Ô∏è‚É£\x20API\x20–∫–ª—é—á','‚úÖ\x20API\x20error\x20notification\x20sent\x20for\x20shop\x20','‚ùå\x20–í—ã\x20–Ω–µ\x20–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã\x20–≤\x20—Å–∏—Å—Ç–µ–º–µ.\x0a\x0a','220nlUQlF','success','...`\x0a\x0a','–°–Ω–∞—á–∞–ª–∞\x20–æ—Ç–∫–ª—é—á–∏—Ç–µ\x20–ø—Ä–µ–¥—ã–¥—É—â–∏–π\x20–∞–∫–∫–∞—É–Ω—Ç\x20–∏–ª–∏\x20–æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å\x20–∫\x20–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É.','Error\x20in\x20handleMultilineVerification:','userAgent','Error\x20in\x20handleUsernameVerification:','notificationApiError','updatedAt','notificationLogin'];a48_0x13a8=function(){return _0x2e6725;};return a48_0x13a8();}Object[a48_0x1bd408(0x1d5)](exports,a48_0x1bd408(0x21a),{'value':!![]}),exports[a48_0x1bd408(0x1d1)]=exports[a48_0x1bd408(0x224)]=void 0x0;const node_telegram_bot_api_1=__importDefault(require(a48_0x1bd408(0x1f4))),database_1=__importDefault(require(a48_0x1bd408(0x1ab)));class TelegramBotService{constructor(){const _0x42cb8c=a48_0x1bd408;this['bot']=null,this[_0x42cb8c(0x27b)]=process['env'][_0x42cb8c(0x203)]||'',this['botUsername']=process[_0x42cb8c(0x1f1)][_0x42cb8c(0x207)]||'trapay_bot',this[_0x42cb8c(0x27b)]?this['initializeBot']():console[_0x42cb8c(0x240)](_0x42cb8c(0x24c));}['initializeBot'](){const _0x1c39ca=a48_0x1bd408;try{this[_0x1c39ca(0x222)]=new node_telegram_bot_api_1['default'](this[_0x1c39ca(0x27b)],{'polling':!![]}),this[_0x1c39ca(0x204)](),console[_0x1c39ca(0x262)](_0x1c39ca(0x217)+this[_0x1c39ca(0x273)]+'\x20initialized\x20successfully');}catch(_0x5a2f12){console[_0x1c39ca(0x227)](_0x1c39ca(0x1ce),_0x5a2f12);}}[a48_0x1bd408(0x204)](){const _0x2974f6=a48_0x1bd408;if(!this[_0x2974f6(0x222)])return;this['bot'][_0x2974f6(0x19e)](/\/start/,async _0x46c4e8=>{const _0x3d95dc=_0x2974f6,_0x1ff6b1=_0x46c4e8[_0x3d95dc(0x1fa)]['id'],_0x56a4a5=_0x46c4e8['from']?.['id'][_0x3d95dc(0x258)](),_0x227d77=_0x46c4e8[_0x3d95dc(0x23c)]?.[_0x3d95dc(0x216)],_0x67ac32=_0x46c4e8[_0x3d95dc(0x23c)]?.['first_name'],_0x33e327=_0x46c4e8['from']?.[_0x3d95dc(0x190)];if(!_0x56a4a5)return;try{let _0xe61fb0=await database_1[_0x3d95dc(0x1a1)][_0x3d95dc(0x21b)]['findUnique']({'where':{'telegramId':_0x56a4a5},'include':{'shop':!![]}});!_0xe61fb0?(_0xe61fb0=await database_1['default']['telegramUser'][_0x3d95dc(0x1c6)]({'data':{'telegramId':_0x56a4a5,'username':_0x227d77,'firstName':_0x67ac32,'lastName':_0x33e327,'isVerified':![],'shopId':null},'include':{'shop':!![]}}),console[_0x3d95dc(0x262)](_0x3d95dc(0x1d8)+_0x56a4a5+_0x3d95dc(0x1c4)+_0x227d77+')')):_0xe61fb0=await database_1[_0x3d95dc(0x1a1)][_0x3d95dc(0x21b)][_0x3d95dc(0x27c)]({'where':{'telegramId':_0x56a4a5},'data':{'username':_0x227d77,'firstName':_0x67ac32,'lastName':_0x33e327},'include':{'shop':!![]}}),_0xe61fb0[_0x3d95dc(0x226)]&&_0xe61fb0[_0x3d95dc(0x1f9)]&&_0xe61fb0[_0x3d95dc(0x218)]?await this[_0x3d95dc(0x222)]?.['sendMessage'](_0x1ff6b1,_0x3d95dc(0x27d)+('–í—ã\x20—É–∂–µ\x20–ø–æ–¥–∫–ª—é—á–µ–Ω—ã\x20–∫\x20–º–∞–≥–∞–∑–∏–Ω—É:\x20*'+_0xe61fb0[_0x3d95dc(0x218)][_0x3d95dc(0x215)]+'*\x0a')+('Username:\x20`'+_0xe61fb0['shop'][_0x3d95dc(0x216)]+_0x3d95dc(0x211))+'üîî\x20–í—ã\x20–ø–æ–ª—É—á–∞–µ—Ç–µ\x20—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è\x20–æ:\x0a'+'‚Ä¢\x20–ù–æ–≤—ã—Ö\x20–ø–ª–∞—Ç–µ–∂–∞—Ö\x0a'+_0x3d95dc(0x1a6)+_0x3d95dc(0x267)+_0x3d95dc(0x20f)+_0x3d95dc(0x221)+_0x3d95dc(0x275),{'parse_mode':_0x3d95dc(0x1a7)}):(_0xe61fb0[_0x3d95dc(0x1f9)]&&!_0xe61fb0[_0x3d95dc(0x226)]&&(await database_1[_0x3d95dc(0x1a1)]['telegramUser'][_0x3d95dc(0x27c)]({'where':{'telegramId':_0x56a4a5},'data':{'shopId':null,'isVerified':![]}}),console[_0x3d95dc(0x262)]('üîÑ\x20Reset\x20incomplete\x20verification\x20for\x20user\x20'+_0x56a4a5)),await this[_0x3d95dc(0x222)]?.[_0x3d95dc(0x21c)](_0x1ff6b1,_0x3d95dc(0x1f0)+_0x3d95dc(0x277)+_0x3d95dc(0x231)+_0x3d95dc(0x219)+_0x3d95dc(0x192)+'–ü—Ä–∏–º–µ—Ä:\x0a'+_0x3d95dc(0x220)+_0x3d95dc(0x1cd)+_0x3d95dc(0x22c),{'parse_mode':_0x3d95dc(0x1a7)}));}catch(_0x5390ac){console[_0x3d95dc(0x227)](_0x3d95dc(0x1b1),_0x5390ac),await this['bot']?.['sendMessage'](_0x1ff6b1,'‚ùå\x20–ü—Ä–æ–∏–∑–æ—à–ª–∞\x20–æ—à–∏–±–∫–∞.\x20–ü–æ–ø—Ä–æ–±—É–π—Ç–µ\x20–ø–æ–∑–∂–µ.');}}),this[_0x2974f6(0x222)]['onText'](/\/disconnect/,async _0x55466b=>{const _0x1984fe=_0x2974f6,_0xcf7803=_0x55466b['chat']['id'],_0x4d435a=_0x55466b[_0x1984fe(0x23c)]?.['id'][_0x1984fe(0x258)]();if(!_0x4d435a)return;try{const _0x29d891=await database_1[_0x1984fe(0x1a1)][_0x1984fe(0x21b)][_0x1984fe(0x214)]({'where':{'telegramId':_0x4d435a},'include':{'shop':!![]}});if(!_0x29d891||!_0x29d891[_0x1984fe(0x226)]||!_0x29d891[_0x1984fe(0x1f9)]){await this[_0x1984fe(0x222)]?.['sendMessage'](_0xcf7803,_0x1984fe(0x1ca));return;}const _0x5255a4=_0x29d891[_0x1984fe(0x218)]?.[_0x1984fe(0x215)]||_0x1984fe(0x18d);await database_1[_0x1984fe(0x1a1)][_0x1984fe(0x21b)][_0x1984fe(0x27c)]({'where':{'telegramId':_0x4d435a},'data':{'shopId':null,'isVerified':![]}}),console[_0x1984fe(0x262)]('üîå\x20User\x20'+_0x4d435a+_0x1984fe(0x20b)+_0x29d891[_0x1984fe(0x1f9)]),await this[_0x1984fe(0x222)]?.['sendMessage'](_0xcf7803,_0x1984fe(0x232)+_0x5255a4+'*.\x0a\x0a'+'–î–ª—è\x20–ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ\x20–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è\x20–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ\x20–∫–æ–º–∞–Ω–¥—É\x20/start',{'parse_mode':_0x1984fe(0x1a7)});}catch(_0x1356fa){console['error']('Error\x20handling\x20/disconnect\x20command:',_0x1356fa),await this[_0x1984fe(0x222)]?.['sendMessage'](_0xcf7803,_0x1984fe(0x250));}}),this[_0x2974f6(0x222)][_0x2974f6(0x19e)](/\/status/,async _0x446781=>{const _0x584dbe=_0x2974f6,_0x41cc40=_0x446781[_0x584dbe(0x1fa)]['id'],_0x197fbb=_0x446781[_0x584dbe(0x23c)]?.['id']['toString']();if(!_0x197fbb)return;try{const _0x5d8889=await database_1['default'][_0x584dbe(0x21b)][_0x584dbe(0x214)]({'where':{'telegramId':_0x197fbb},'include':{'shop':!![]}});if(!_0x5d8889){await this[_0x584dbe(0x222)]?.[_0x584dbe(0x21c)](_0x41cc40,_0x584dbe(0x1b5)+_0x584dbe(0x20a));return;}if(!_0x5d8889[_0x584dbe(0x226)]||!_0x5d8889[_0x584dbe(0x1f9)]||!_0x5d8889['shop']){await this[_0x584dbe(0x222)]?.[_0x584dbe(0x21c)](_0x41cc40,_0x584dbe(0x1a9)+_0x584dbe(0x1e9));return;}await this[_0x584dbe(0x222)]?.[_0x584dbe(0x21c)](_0x41cc40,_0x584dbe(0x276)+(_0x584dbe(0x1da)+_0x5d8889[_0x584dbe(0x218)]['name']+'*\x0a')+('üë§\x20Username:\x20`'+_0x5d8889[_0x584dbe(0x218)]['username']+'`\x0a')+(_0x584dbe(0x22a)+_0x5d8889[_0x584dbe(0x1be)]['toLocaleDateString'](_0x584dbe(0x1e1))+'\x0a\x0a')+_0x584dbe(0x196)+_0x584dbe(0x20f)+_0x584dbe(0x275),{'parse_mode':_0x584dbe(0x1a7)});}catch(_0x926906){console[_0x584dbe(0x227)](_0x584dbe(0x1ec),_0x926906),await this[_0x584dbe(0x222)]?.[_0x584dbe(0x21c)](_0x41cc40,'‚ùå\x20–ü—Ä–æ–∏–∑–æ—à–ª–∞\x20–æ—à–∏–±–∫–∞.\x20–ü–æ–ø—Ä–æ–±—É–π—Ç–µ\x20–ø–æ–∑–∂–µ.');}}),this[_0x2974f6(0x222)][_0x2974f6(0x19e)](/\/debug/,async _0x57c961=>{const _0x4b8ffd=_0x2974f6,_0x103a6c=_0x57c961['chat']['id'],_0x42c7cc=_0x57c961['from']?.['id'][_0x4b8ffd(0x258)]();if(!_0x42c7cc)return;try{const _0x5dfe8e=await database_1[_0x4b8ffd(0x1a1)][_0x4b8ffd(0x218)]['findMany']({'select':{'id':!![],'name':!![],'username':!![],'status':!![],'publicKey':!![]},'take':0xa});let _0x353a4d=_0x4b8ffd(0x1c5);_0x353a4d+=_0x4b8ffd(0x237)+_0x42c7cc+_0x4b8ffd(0x211),_0x353a4d+=_0x4b8ffd(0x278),_0x5dfe8e[_0x4b8ffd(0x1cc)]((_0x361149,_0x4d5991)=>{const _0x135b29=_0x4b8ffd;_0x353a4d+=_0x4d5991+0x1+'.\x20*'+_0x361149[_0x135b29(0x215)]+'*\x0a',_0x353a4d+=_0x135b29(0x1cb)+_0x361149[_0x135b29(0x216)]+'`\x0a',_0x353a4d+=_0x135b29(0x1b0)+_0x361149[_0x135b29(0x1e7)]+'\x0a',_0x353a4d+=_0x135b29(0x1a2)+_0x361149[_0x135b29(0x26a)][_0x135b29(0x1ad)](0x0,0xf)+_0x135b29(0x1b8);}),await this['bot']?.[_0x4b8ffd(0x21c)](_0x103a6c,_0x353a4d,{'parse_mode':_0x4b8ffd(0x1a7)});}catch(_0x22be10){console[_0x4b8ffd(0x227)](_0x4b8ffd(0x1d7),_0x22be10),await this[_0x4b8ffd(0x222)]?.['sendMessage'](_0x103a6c,'‚ùå\x20–ü—Ä–æ–∏–∑–æ—à–ª–∞\x20–æ—à–∏–±–∫–∞\x20–ø—Ä–∏\x20–ø–æ–ª—É—á–µ–Ω–∏–∏\x20–æ—Ç–ª–∞–¥–æ—á–Ω–æ–π\x20–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.');}}),this[_0x2974f6(0x222)]['on'](_0x2974f6(0x208),async _0x526810=>{const _0x3b0ee8=_0x2974f6;if(_0x526810[_0x3b0ee8(0x198)]?.[_0x3b0ee8(0x20e)]('/'))return;const _0x3b8c73=_0x526810[_0x3b0ee8(0x1fa)]['id'],_0x43fbe6=_0x526810[_0x3b0ee8(0x23c)]?.['id'][_0x3b0ee8(0x258)](),_0x44e1d5=_0x526810['text']?.['trim']();if(!_0x43fbe6||!_0x44e1d5)return;try{const _0x33f560=await database_1[_0x3b0ee8(0x1a1)][_0x3b0ee8(0x21b)][_0x3b0ee8(0x214)]({'where':{'telegramId':_0x43fbe6},'include':{'shop':!![]}});if(!_0x33f560){await this[_0x3b0ee8(0x222)]?.[_0x3b0ee8(0x21c)](_0x3b8c73,_0x3b0ee8(0x1f7));return;}if(_0x33f560[_0x3b0ee8(0x226)]&&_0x33f560[_0x3b0ee8(0x1f9)]&&_0x33f560[_0x3b0ee8(0x218)]){await this[_0x3b0ee8(0x222)]?.[_0x3b0ee8(0x21c)](_0x3b8c73,_0x3b0ee8(0x195)+_0x33f560[_0x3b0ee8(0x218)][_0x3b0ee8(0x215)]+_0x3b0ee8(0x234)+_0x3b0ee8(0x194),{'parse_mode':_0x3b0ee8(0x1a7)});return;}const _0x154b84=_0x44e1d5[_0x3b0ee8(0x269)]('\x0a')['map'](_0x297216=>_0x297216[_0x3b0ee8(0x1aa)]())[_0x3b0ee8(0x244)](_0x571628=>_0x571628['length']>0x0);if(_0x154b84[_0x3b0ee8(0x245)]===0x2){const [_0x3cac0d,_0xf3dd48]=_0x154b84;await this[_0x3b0ee8(0x274)](_0x3b8c73,_0x43fbe6,_0x3cac0d,_0xf3dd48);}else{if(_0x154b84[_0x3b0ee8(0x245)]===0x1){const _0x52521c=_0x154b84[0x0];if(_0x52521c[_0x3b0ee8(0x245)]>=0x3&&_0x52521c['length']<=0x32&&/^[a-zA-Z0-9_]+$/['test'](_0x52521c))await this['handleUsernameVerification'](_0x3b8c73,_0x43fbe6,_0x52521c);else _0x52521c[_0x3b0ee8(0x20e)](_0x3b0ee8(0x20c))||_0x52521c[_0x3b0ee8(0x20e)](_0x3b0ee8(0x25d))?await this[_0x3b0ee8(0x268)](_0x3b8c73,_0x43fbe6,_0x52521c):await this['bot']?.[_0x3b0ee8(0x21c)](_0x3b8c73,'‚ùå\x20–ù–µ–≤–µ—Ä–Ω—ã–π\x20—Ñ–æ—Ä–º–∞—Ç\x20–¥–∞–Ω–Ω—ã—Ö.\x0a\x0a'+'–ü–æ–∂–∞–ª—É–π—Å—Ç–∞,\x20–æ—Ç–ø—Ä–∞–≤—å—Ç–µ:\x0a'+'1Ô∏è‚É£\x20–°–Ω–∞—á–∞–ª–∞\x20–≤–∞—à\x20username\x20(—Ç–æ–ª—å–∫–æ\x20–±—É–∫–≤—ã,\x20—Ü–∏—Ñ—Ä—ã\x20–∏\x20–ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ)\x0a'+_0x3b0ee8(0x1f2)+_0x3b0ee8(0x193)+'`appple`\x0a'+_0x3b0ee8(0x1c2),{'parse_mode':_0x3b0ee8(0x1a7)});}else await this[_0x3b0ee8(0x222)]?.[_0x3b0ee8(0x21c)](_0x3b8c73,'‚ùå\x20–ù–µ–≤–µ—Ä–Ω—ã–π\x20—Ñ–æ—Ä–º–∞—Ç\x20–¥–∞–Ω–Ω—ã—Ö.\x0a\x0a'+_0x3b0ee8(0x1ae)+_0x3b0ee8(0x1ed)+_0x3b0ee8(0x220)+_0x3b0ee8(0x1c2),{'parse_mode':_0x3b0ee8(0x1a7)});}}catch(_0x3d7e90){console[_0x3b0ee8(0x227)]('Error\x20handling\x20message:',_0x3d7e90),await this[_0x3b0ee8(0x222)]?.['sendMessage'](_0x3b8c73,_0x3b0ee8(0x250));}}),this['bot']['on'](_0x2974f6(0x227),_0x2051f8=>{const _0x569535=_0x2974f6;console[_0x569535(0x227)](_0x569535(0x1cf),_0x2051f8);}),this['bot']['on'](_0x2974f6(0x1a4),_0x3326d6=>{const _0x1f09cd=_0x2974f6;console[_0x1f09cd(0x227)](_0x1f09cd(0x1d0),_0x3326d6);});}async[a48_0x1bd408(0x274)](_0x652dbd,_0x117e6f,_0x446c5f,_0x584fa0){const _0x53dead=a48_0x1bd408;try{console[_0x53dead(0x262)]('üîÑ\x20Processing\x20multiline\x20verification\x20for\x20user\x20'+_0x117e6f+_0x53dead(0x1dc)+_0x446c5f+'\x22,\x20apiKey=\x22'+_0x584fa0[_0x53dead(0x1ad)](0x0,0xa)+_0x53dead(0x229));if(!_0x446c5f||_0x446c5f[_0x53dead(0x245)]<0x3||_0x446c5f[_0x53dead(0x245)]>0x32||!/^[a-zA-Z0-9_]+$/[_0x53dead(0x1e8)](_0x446c5f)){await this[_0x53dead(0x222)]?.[_0x53dead(0x21c)](_0x652dbd,'‚ùå\x20–ù–µ–≤–µ—Ä–Ω—ã–π\x20—Ñ–æ—Ä–º–∞—Ç\x20username:\x20`'+_0x446c5f+_0x53dead(0x211)+_0x53dead(0x264),{'parse_mode':'Markdown'});return;}if(!_0x584fa0||!_0x584fa0[_0x53dead(0x20e)](_0x53dead(0x20c))&&!_0x584fa0[_0x53dead(0x20e)](_0x53dead(0x25d))){await this[_0x53dead(0x222)]?.[_0x53dead(0x21c)](_0x652dbd,_0x53dead(0x272)+_0x53dead(0x22f),{'parse_mode':_0x53dead(0x1a7)});return;}const _0x49b90a=await database_1[_0x53dead(0x1a1)][_0x53dead(0x218)]['findUnique']({'where':{'username':_0x446c5f},'select':{'id':!![],'name':!![],'username':!![],'status':!![],'publicKey':!![],'secretKey':!![]}});if(!_0x49b90a){const _0x26367c=await database_1['default']['shop']['findMany']({'select':{'username':!![],'name':!![]},'take':0x5});let _0x29178f=_0x53dead(0x199)+_0x446c5f+_0x53dead(0x1e2);_0x26367c['length']>0x0?(_0x29178f+='–î–æ—Å—Ç—É–ø–Ω—ã–µ\x20username:\x0a',_0x26367c[_0x53dead(0x1cc)](_0x23d803=>{const _0x446ef6=_0x53dead;_0x29178f+=_0x446ef6(0x1f6)+_0x23d803[_0x446ef6(0x216)]+_0x446ef6(0x24a)+_0x23d803[_0x446ef6(0x215)]+')\x0a';}),_0x29178f+=_0x53dead(0x21f)):_0x29178f+=_0x53dead(0x270);await this[_0x53dead(0x222)]?.[_0x53dead(0x21c)](_0x652dbd,_0x29178f,{'parse_mode':'Markdown'});return;}if(_0x49b90a[_0x53dead(0x1e7)]!==_0x53dead(0x260)){await this[_0x53dead(0x222)]?.['sendMessage'](_0x652dbd,_0x53dead(0x201)+_0x446c5f+_0x53dead(0x254)+'–û–±—Ä–∞—Ç–∏—Ç–µ—Å—å\x20–∫\x20–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É.',{'parse_mode':'Markdown'});return;}if(_0x49b90a[_0x53dead(0x26a)]!==_0x584fa0&&_0x49b90a[_0x53dead(0x1c7)]!==_0x584fa0){await this[_0x53dead(0x222)]?.[_0x53dead(0x21c)](_0x652dbd,_0x53dead(0x210)+_0x446c5f+_0x53dead(0x21d)+_0x53dead(0x22d)+'–û–∂–∏–¥–∞–µ–º—ã–π\x20—Ñ–æ—Ä–º–∞—Ç\x20–∫–ª—é—á–∞:\x20`pk_...`\x20–∏–ª–∏\x20`sk_...`',{'parse_mode':_0x53dead(0x1a7)});return;}const _0x4af6fa=await database_1[_0x53dead(0x1a1)]['telegramUser'][_0x53dead(0x26d)]({'where':{'shopId':_0x49b90a['id'],'isVerified':!![],'telegramId':{'not':_0x117e6f}}});if(_0x4af6fa){await this[_0x53dead(0x222)]?.['sendMessage'](_0x652dbd,_0x53dead(0x1ff)+_0x446c5f+'`\x20—É–∂–µ\x20–ø–æ–¥–∫–ª—é—á–µ–Ω\x20–¥—Ä—É–≥–æ–π\x20Telegram\x20–∞–∫–∫–∞—É–Ω—Ç.\x0a\x0a'+_0x53dead(0x1b9),{'parse_mode':_0x53dead(0x1a7)});return;}await database_1[_0x53dead(0x1a1)][_0x53dead(0x21b)]['update']({'where':{'telegramId':_0x117e6f},'data':{'shopId':_0x49b90a['id'],'isVerified':!![]}}),await this[_0x53dead(0x222)]?.[_0x53dead(0x21c)](_0x652dbd,_0x53dead(0x18e)+_0x53dead(0x205)+(_0x53dead(0x209)+_0x49b90a[_0x53dead(0x215)]+'*\x0a')+(_0x53dead(0x1eb)+_0x49b90a[_0x53dead(0x216)]+_0x53dead(0x211))+_0x53dead(0x25c)+_0x53dead(0x1ea)+_0x53dead(0x1a6)+_0x53dead(0x1d4)+_0x53dead(0x200)+_0x53dead(0x20f)+_0x53dead(0x221)+_0x53dead(0x275),{'parse_mode':_0x53dead(0x1a7)}),console['log'](_0x53dead(0x26b)+_0x117e6f+_0x53dead(0x1c0)+_0x49b90a[_0x53dead(0x216)]+'\x20via\x20multiline\x20input');}catch(_0xcb85de){console[_0x53dead(0x227)](_0x53dead(0x1ba),_0xcb85de),await this[_0x53dead(0x222)]?.[_0x53dead(0x21c)](_0x652dbd,'‚ùå\x20–ü—Ä–æ–∏–∑–æ—à–ª–∞\x20–æ—à–∏–±–∫–∞\x20–ø—Ä–∏\x20–ø—Ä–æ–≤–µ—Ä–∫–µ\x20–¥–∞–Ω–Ω—ã—Ö.');}}async[a48_0x1bd408(0x242)](_0x2ce171,_0x4861b6,_0x66814f){const _0x55d9a4=a48_0x1bd408;try{console[_0x55d9a4(0x262)](_0x55d9a4(0x23f)+_0x4861b6+_0x55d9a4(0x1dc)+_0x66814f+'\x22');const _0x1362b1=await database_1[_0x55d9a4(0x1a1)][_0x55d9a4(0x218)][_0x55d9a4(0x214)]({'where':{'username':_0x66814f},'select':{'id':!![],'name':!![],'username':!![],'status':!![]}});if(!_0x1362b1){const _0x8cdc61=await database_1['default'][_0x55d9a4(0x218)]['findMany']({'select':{'username':!![],'name':!![]},'take':0x5});let _0x14e1e5=_0x55d9a4(0x199)+_0x66814f+'`\x20–Ω–µ\x20–Ω–∞–π–¥–µ–Ω.\x0a\x0a';_0x8cdc61[_0x55d9a4(0x245)]>0x0?(_0x14e1e5+=_0x55d9a4(0x1df),_0x8cdc61[_0x55d9a4(0x1cc)](_0x1e1427=>{const _0xb83d89=_0x55d9a4;_0x14e1e5+=_0xb83d89(0x1f6)+_0x1e1427[_0xb83d89(0x216)]+_0xb83d89(0x24a)+_0x1e1427[_0xb83d89(0x215)]+')\x0a';}),_0x14e1e5+='\x0a–ü—Ä–æ–≤–µ—Ä—å—Ç–µ\x20–ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å\x20–Ω–∞–ø–∏—Å–∞–Ω–∏—è\x20–∏\x20–ø–æ–ø—Ä–æ–±—É–π—Ç–µ\x20—Å–Ω–æ–≤–∞.'):_0x14e1e5+=_0x55d9a4(0x270);await this[_0x55d9a4(0x222)]?.[_0x55d9a4(0x21c)](_0x2ce171,_0x14e1e5,{'parse_mode':'Markdown'});return;}if(_0x1362b1[_0x55d9a4(0x1e7)]!==_0x55d9a4(0x260)){await this[_0x55d9a4(0x222)]?.['sendMessage'](_0x2ce171,'‚ùå\x20–ú–∞–≥–∞–∑–∏–Ω\x20`'+_0x66814f+'`\x20–Ω–µ–∞–∫—Ç–∏–≤–µ–Ω.\x0a\x0a'+_0x55d9a4(0x257),{'parse_mode':_0x55d9a4(0x1a7)});return;}await database_1[_0x55d9a4(0x1a1)]['telegramUser']['update']({'where':{'telegramId':_0x4861b6},'data':{'shopId':_0x1362b1['id'],'isVerified':![]}}),await this[_0x55d9a4(0x222)]?.['sendMessage'](_0x2ce171,_0x55d9a4(0x21e)+_0x66814f+_0x55d9a4(0x1d9)+('–ú–∞–≥–∞–∑–∏–Ω:\x20*'+_0x1362b1['name']+_0x55d9a4(0x1fc))+_0x55d9a4(0x256),{'parse_mode':_0x55d9a4(0x1a7)}),console[_0x55d9a4(0x262)]('üìù\x20Temporary\x20shop\x20association\x20created\x20for\x20user\x20'+_0x4861b6+_0x55d9a4(0x1ee)+_0x1362b1[_0x55d9a4(0x216)]);}catch(_0x3f00ec){console[_0x55d9a4(0x227)](_0x55d9a4(0x1bc),_0x3f00ec),await this[_0x55d9a4(0x222)]?.[_0x55d9a4(0x21c)](_0x2ce171,_0x55d9a4(0x1fb));}}async[a48_0x1bd408(0x268)](_0x39e459,_0x2e8798,_0x20b50e){const _0x44e659=a48_0x1bd408;try{console[_0x44e659(0x262)](_0x44e659(0x259)+_0x2e8798+_0x44e659(0x1a3)+_0x20b50e[_0x44e659(0x1ad)](0x0,0xa)+_0x44e659(0x229));const _0x3f8da0=await database_1['default'][_0x44e659(0x21b)][_0x44e659(0x214)]({'where':{'telegramId':_0x2e8798},'include':{'shop':!![]}});if(!_0x3f8da0?.['shopId']){await this['bot']?.[_0x44e659(0x21c)](_0x39e459,_0x44e659(0x1ef)+_0x44e659(0x24d)+'1Ô∏è‚É£\x20Username\x0a'+_0x44e659(0x1b3));return;}if(_0x3f8da0[_0x44e659(0x226)]){await this['bot']?.[_0x44e659(0x21c)](_0x39e459,_0x44e659(0x195)+(_0x3f8da0[_0x44e659(0x218)]?.[_0x44e659(0x215)]||_0x44e659(0x239))+_0x44e659(0x234)+'–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ\x20/status\x20–¥–ª—è\x20–ø—Ä–æ–≤–µ—Ä–∫–∏\x20—Å—Ç–∞—Ç—É—Å–∞.',{'parse_mode':'Markdown'});return;}const _0xdde76a=await database_1[_0x44e659(0x1a1)][_0x44e659(0x218)][_0x44e659(0x26d)]({'where':{'id':_0x3f8da0[_0x44e659(0x1f9)],'OR':[{'publicKey':_0x20b50e},{'secretKey':_0x20b50e}]}});if(!_0xdde76a){await this[_0x44e659(0x222)]?.[_0x44e659(0x21c)](_0x39e459,_0x44e659(0x1c8)+'–ü—Ä–æ–≤–µ—Ä—å—Ç–µ\x20–ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å\x20–∫–ª—é—á–∞\x20–∏–ª–∏\x20–Ω–∞—á–Ω–∏—Ç–µ\x20–∑–∞–Ω–æ–≤–æ\x20—Å\x20–∫–æ–º–∞–Ω–¥—ã\x20/start\x0a\x0a'+_0x44e659(0x261),{'parse_mode':'Markdown'}),await database_1[_0x44e659(0x1a1)][_0x44e659(0x21b)][_0x44e659(0x27c)]({'where':{'telegramId':_0x2e8798},'data':{'shopId':null,'isVerified':![]}}),console[_0x44e659(0x262)](_0x44e659(0x23a)+_0x2e8798+_0x44e659(0x223));return;}const _0x481c0b=await database_1[_0x44e659(0x1a1)][_0x44e659(0x21b)][_0x44e659(0x26d)]({'where':{'shopId':_0xdde76a['id'],'isVerified':!![],'telegramId':{'not':_0x2e8798}}});if(_0x481c0b){await this[_0x44e659(0x222)]?.[_0x44e659(0x21c)](_0x39e459,_0x44e659(0x1ff)+_0xdde76a['username']+_0x44e659(0x1b2)+_0x44e659(0x1b9),{'parse_mode':_0x44e659(0x1a7)}),await database_1['default'][_0x44e659(0x21b)][_0x44e659(0x27c)]({'where':{'telegramId':_0x2e8798},'data':{'shopId':null,'isVerified':![]}});return;}await database_1['default']['telegramUser'][_0x44e659(0x27c)]({'where':{'telegramId':_0x2e8798},'data':{'isVerified':!![]}}),await this[_0x44e659(0x222)]?.[_0x44e659(0x21c)](_0x39e459,_0x44e659(0x18e)+_0x44e659(0x205)+(_0x44e659(0x209)+_0xdde76a[_0x44e659(0x215)]+'*\x0a')+(_0x44e659(0x1eb)+_0xdde76a['username']+_0x44e659(0x211))+'üîî\x20–¢–µ–ø–µ—Ä—å\x20–≤—ã\x20–±—É–¥–µ—Ç–µ\x20–ø–æ–ª—É—á–∞—Ç—å\x20—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è\x20–æ:\x0a'+'‚Ä¢\x20–ù–æ–≤—ã—Ö\x20–ø–ª–∞—Ç–µ–∂–∞—Ö\x0a'+_0x44e659(0x1a6)+_0x44e659(0x1d4)+_0x44e659(0x200)+_0x44e659(0x20f)+_0x44e659(0x221)+_0x44e659(0x275),{'parse_mode':'Markdown'}),console[_0x44e659(0x262)](_0x44e659(0x26b)+_0x2e8798+'\x20verified\x20for\x20shop\x20'+_0xdde76a[_0x44e659(0x216)]);}catch(_0x2b5ca0){console['error'](_0x44e659(0x1af),_0x2b5ca0),await this[_0x44e659(0x222)]?.[_0x44e659(0x21c)](_0x39e459,_0x44e659(0x213));}}async['sendShopNotification'](_0x8e3c95,_0x591582,_0x5a2f6f){const _0x39c37a=a48_0x1bd408;if(!this[_0x39c37a(0x222)]){console[_0x39c37a(0x240)](_0x39c37a(0x25f));return;}try{const _0x228987=await database_1['default'][_0x39c37a(0x21b)]['findMany']({'where':{'shopId':_0x8e3c95,'isVerified':!![]}});if(_0x228987[_0x39c37a(0x245)]===0x0){console['log'](_0x39c37a(0x1de)+_0x8e3c95);return;}const _0x23ea49=_0x228987['map'](async _0x1c5d37=>{const _0x14a29f=_0x39c37a;try{await this[_0x14a29f(0x222)]?.[_0x14a29f(0x21c)](_0x1c5d37['telegramId'],_0x591582,_0x5a2f6f),console['log']('‚úÖ\x20Notification\x20sent\x20to\x20Telegram\x20user\x20'+_0x1c5d37[_0x14a29f(0x20d)]);}catch(_0x51106a){console['error'](_0x14a29f(0x249)+_0x1c5d37[_0x14a29f(0x20d)]+':',_0x51106a),_0x51106a instanceof Error&&(_0x51106a[_0x14a29f(0x208)][_0x14a29f(0x246)](_0x14a29f(0x1ac))||_0x51106a[_0x14a29f(0x208)][_0x14a29f(0x246)](_0x14a29f(0x23b))||_0x51106a['message']['includes'](_0x14a29f(0x251)))&&(await database_1[_0x14a29f(0x1a1)][_0x14a29f(0x21b)][_0x14a29f(0x27c)]({'where':{'id':_0x1c5d37['id']},'data':{'isVerified':![]}}),console[_0x14a29f(0x262)](_0x14a29f(0x1e5)+_0x1c5d37[_0x14a29f(0x20d)]+'\x20marked\x20as\x20unverified\x20due\x20to\x20delivery\x20failure'));}});await Promise[_0x39c37a(0x1d3)](_0x23ea49);}catch(_0x53eead){console['error'](_0x39c37a(0x225),_0x53eead);}}async[a48_0x1bd408(0x1dd)](_0x2dd53a,_0x47cef5,_0x200109){const _0x56d9d1=a48_0x1bd408,_0x1ff093={'created':'üÜï','paid':'‚úÖ','failed':'‚ùå','expired':'‚è∞','refund':'üîÑ','chargeback':'‚ö†Ô∏è'},_0x143658={'created':'–°–æ–∑–¥–∞–Ω\x20–Ω–æ–≤—ã–π\x20–ø–ª–∞—Ç–µ–∂','paid':_0x56d9d1(0x1d6),'failed':_0x56d9d1(0x1c3),'expired':_0x56d9d1(0x243),'refund':'–í–æ–∑–≤—Ä–∞—Ç\x20–ø–ª–∞—Ç–µ–∂–∞','chargeback':'–ß–∞—Ä–¥–∂–±—ç–∫\x20–ø–æ\x20–ø–ª–∞—Ç–µ–∂—É'},_0x43a0e7=_0x1ff093[_0x200109],_0x35e9d4=_0x143658[_0x200109];let _0x359709=_0x43a0e7+'\x20*'+_0x35e9d4+_0x56d9d1(0x1fc)+(_0x56d9d1(0x191)+_0x47cef5[_0x56d9d1(0x248)]+'\x20'+_0x47cef5['currency']+'*\x0a')+(_0x56d9d1(0x1e3)+(_0x47cef5[_0x56d9d1(0x235)]||_0x47cef5['id'])+'`\x0a')+(_0x56d9d1(0x1f3)+_0x47cef5['id']+'`\x0a')+('üè™\x20–®–ª—é–∑:\x20`'+_0x47cef5['gateway'][_0x56d9d1(0x25e)]()+'`\x0a')+('üìÖ\x20–î–∞—Ç–∞:\x20'+new Date(_0x47cef5[_0x56d9d1(0x265)])[_0x56d9d1(0x24e)]('ru-RU')+'\x0a');_0x200109==='chargeback'&&_0x47cef5[_0x56d9d1(0x255)]&&(_0x359709+=_0x56d9d1(0x19b)+_0x47cef5[_0x56d9d1(0x255)]+_0x56d9d1(0x197)),_0x47cef5[_0x56d9d1(0x1e0)]&&(_0x359709+='üìù\x20–ó–∞–º–µ—Ç–∫–∏:\x20'+_0x47cef5['adminNotes']+'\x0a'),await this[_0x56d9d1(0x271)](_0x2dd53a,_0x359709,{'parse_mode':'Markdown'});}async[a48_0x1bd408(0x206)](_0x2746d2,_0x229811,_0x3fc6a7){const _0x5f020d=a48_0x1bd408,_0x4665c9={'created':'üì§','completed':'‚úÖ','rejected':'‚ùå'},_0x4fb105={'created':_0x5f020d(0x247),'completed':'–í—ã–ø–ª–∞—Ç–∞\x20–∑–∞–≤–µ—Ä—à–µ–Ω–∞','rejected':_0x5f020d(0x26c)},_0x212a0f=_0x4665c9[_0x3fc6a7],_0x121b53=_0x4fb105[_0x3fc6a7],_0x49927b=_0x212a0f+'\x20*'+_0x121b53+_0x5f020d(0x1fc)+(_0x5f020d(0x1e6)+_0x229811[_0x5f020d(0x248)]+'\x20USD*\x0a')+('üè¶\x20–ú–µ—Ç–æ–¥:\x20`'+_0x229811[_0x5f020d(0x19c)]+'`\x0a')+(_0x5f020d(0x252)+_0x229811['id']+'`\x0a')+('üìÖ\x20–î–∞—Ç–∞:\x20'+new Date(_0x229811[_0x5f020d(0x265)])[_0x5f020d(0x24e)]('ru-RU')+'\x0a')+(_0x229811[_0x5f020d(0x25a)]?_0x5f020d(0x1d2)+_0x229811[_0x5f020d(0x25a)]+'`':'');await this[_0x5f020d(0x271)](_0x2746d2,_0x49927b,{'parse_mode':'Markdown'});}async[a48_0x1bd408(0x263)](_0x4715ea,_0x203db3){const _0x5c4080=a48_0x1bd408;try{const _0x2c7552=await database_1[_0x5c4080(0x1a1)][_0x5c4080(0x19f)][_0x5c4080(0x214)]({'where':{'shopId':_0x4715ea},'select':{'notificationLogin':!![]}});if(!_0x2c7552?.[_0x5c4080(0x1bf)]){console[_0x5c4080(0x262)]('üì±\x20Login\x20notifications\x20disabled\x20for\x20shop\x20'+_0x4715ea);return;}const _0x1e1a2f=_0x203db3['success']?'üîê':'üö®',_0x5c3625=_0x203db3[_0x5c4080(0x1b7)]?_0x5c4080(0x202):_0x5c4080(0x1db);let _0x463b32=_0x1e1a2f+'\x20*'+_0x5c3625+'*\x0a\x0a'+(_0x5c4080(0x1eb)+_0x203db3[_0x5c4080(0x216)]+'`\x0a')+(_0x5c4080(0x228)+_0x203db3[_0x5c4080(0x1a0)]['toLocaleString'](_0x5c4080(0x1e1))+'\x0a');_0x203db3[_0x5c4080(0x238)]&&(_0x463b32+='üåê\x20IP\x20–∞–¥—Ä–µ—Å:\x20`'+_0x203db3['ipAddress']+'`\x0a');if(_0x203db3[_0x5c4080(0x1bb)]){const _0xe44f9f=_0x203db3[_0x5c4080(0x1bb)]['length']>0x32?_0x203db3[_0x5c4080(0x1bb)]['substring'](0x0,0x32)+_0x5c4080(0x1c1):_0x203db3[_0x5c4080(0x1bb)];_0x463b32+=_0x5c4080(0x279)+_0xe44f9f+'`\x0a';}!_0x203db3['success']&&(_0x463b32+='\x0a‚ö†Ô∏è\x20–ï—Å–ª–∏\x20—ç—Ç–æ\x20–Ω–µ\x20–≤—ã,\x20–Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ\x20—Å–º–µ–Ω–∏—Ç–µ\x20–ø–∞—Ä–æ–ª—å!'),await this['sendShopNotification'](_0x4715ea,_0x463b32,{'parse_mode':_0x5c4080(0x1a7)}),console['log'](_0x5c4080(0x18f)+_0x4715ea+':\x20'+(_0x203db3[_0x5c4080(0x1b7)]?_0x5c4080(0x1b7):_0x5c4080(0x1a5)));}catch(_0x3ef57e){console['error']('Failed\x20to\x20send\x20login\x20notification:',_0x3ef57e);}}async[a48_0x1bd408(0x236)](_0x11c3d6,_0x4fb25f){const _0x3849f6=a48_0x1bd408;try{const _0x2e9992=await database_1[_0x3849f6(0x1a1)][_0x3849f6(0x19f)][_0x3849f6(0x214)]({'where':{'shopId':_0x11c3d6},'select':{'notificationApiError':!![]}});if(!_0x2e9992?.[_0x3849f6(0x1bd)]){console[_0x3849f6(0x262)](_0x3849f6(0x26f)+_0x11c3d6);return;}let _0x118254=_0x3849f6(0x1f5)+(_0x3849f6(0x241)+_0x4fb25f[_0x3849f6(0x19c)]+'\x20'+_0x4fb25f['endpoint']+'`\x0a')+(_0x3849f6(0x228)+_0x4fb25f[_0x3849f6(0x1a0)]['toLocaleString'](_0x3849f6(0x1e1))+'\x0a');_0x4fb25f[_0x3849f6(0x1c9)]&&(_0x118254+=_0x3849f6(0x23d)+_0x4fb25f['statusCode']+'`\x0a'),_0x118254+='‚ùå\x20–û—à–∏–±–∫–∞:\x20`'+_0x4fb25f['errorMessage']+'`\x0a',_0x4fb25f['requestId']&&(_0x118254+='üÜî\x20Request\x20ID:\x20`'+_0x4fb25f[_0x3849f6(0x1fe)]+'`\x0a'),_0x118254+=_0x3849f6(0x230),await this['sendShopNotification'](_0x11c3d6,_0x118254,{'parse_mode':_0x3849f6(0x1a7)}),console[_0x3849f6(0x262)](_0x3849f6(0x1b4)+_0x11c3d6+':\x20'+_0x4fb25f[_0x3849f6(0x24b)]);}catch(_0x1fc796){console[_0x3849f6(0x227)](_0x3849f6(0x22e),_0x1fc796);}}async[a48_0x1bd408(0x233)](_0x5846a1,_0x57e9c1,_0x3e954f){const _0x2abdf6=a48_0x1bd408;let _0xd65218='üîî\x20*'+_0x57e9c1+_0x2abdf6(0x1fc);for(const [_0x40f4f0,_0x3856d7]of Object[_0x2abdf6(0x266)](_0x3e954f)){_0x3856d7!==null&&_0x3856d7!==undefined&&(_0xd65218+=_0x40f4f0+_0x2abdf6(0x24f)+_0x3856d7+'`\x0a');}await this[_0x2abdf6(0x271)](_0x5846a1,_0xd65218,{'parse_mode':_0x2abdf6(0x1a7)});}[a48_0x1bd408(0x26e)](){const _0x5e9e6c=a48_0x1bd408;return{'isActive':!!this['bot'],'username':this[_0x5e9e6c(0x273)]};}['stopBot'](){const _0x11f5ee=a48_0x1bd408;this['bot']&&(this['bot'][_0x11f5ee(0x19d)](),this[_0x11f5ee(0x222)]=null,console['log'](_0x11f5ee(0x1fd)));}}exports[a48_0x1bd408(0x224)]=TelegramBotService,exports[a48_0x1bd408(0x1d1)]=new TelegramBotService();