'use strict';const a87_0x18e69b=a87_0x2baf;function a87_0x1286(){const _0x13276d=['üìÖ\x20Last\x20Month','__importDefault','QAR','‚úÖ\x20Notification\x20sent\x20to\x20Telegram\x20user\x20','üìä\x20*Statistics:\x20','warn','cmd_disconnect','‚ùå\x20You\x20are\x20not\x20connected\x20to\x20a\x20shop.\x0a\x0a','üá≤üá¶','image/jpeg','üìä\x20Status','\x20USDC','üìû\x20Contacts','üá≥üá¨','paymentLinkSessions','‚ùå\x20Shop\x20with\x20username\x20`','üáÆüá∑','...','`\x20is\x20inactive.\x0a\x0a','üá™üá¨','pl_cancel','‚úÖ\x20Login\x20notification\x20sent\x20for\x20shop\x20','sendShopFile','MYR','206fYXGfx','\x22,\x20apiKey=\x22','üá®üá≠','‚úÖ\x20API\x20error\x20notification\x20sent\x20for\x20shop\x20','Multi\x20Use','shopSettings','üá∞üá¨','‚ùå\x20Maximum\x20number\x20of\x20connected\x20accounts\x20(5)\x20reached\x20for\x20shop\x20`','NOK','üìÖ\x20Today','üîó\x20*Create\x20Payment\x20Link*\x0a\x0a','2681NRTGSc','/link/','ARS','üè™\x20Gateway:\x20`','üë§\x20Username:\x20`','TelegramBotService','No\x20verified\x20Telegram\x20users\x20found\x20for\x20shop\x20','\x20parts:\x20','RUB','Make\x20sure\x20you\x20have\x20the\x20correct\x20username\x20from\x20your\x20account.','üá®üá¥','all','üí∏\x20*Recent\x20Payouts*\x0a\x0a','editMessageText','Error\x20in\x20handleSingleLineVerification:','MMK','message','‚ùå\x20Telegram\x20bot\x20not\x20initialized','üá±üá¶','Single\x20Use','MDL','KWD','...\x22','SBD','New\x20payment\x20created','üì±\x20Created\x20new\x20Telegram\x20user:\x20','cmd_payment_links','bot','showCurrencyPage','failed','pl_create_new','JOD','üá´üáØ','‚úÖ\x20You\x20have\x20been\x20successfully\x20connected\x20to\x20the\x20notification\x20system!\x0a\x0a','9807830yWYTbV','endpoint','To\x20reconnect,\x20use\x20the\x20/start\x20command','createdAt','Use\x20/start\x20to\x20begin.','IQD','üìû\x20*Contacts*','status','pl_curr_','name','*\x0a\x0a','`\x20not\x20found.\x0a\x0a','PKR','MAD','‚úÖ\x20You\x20have\x20been\x20successfully\x20disconnected\x20from\x20shop\x20*','üîó\x20Payment\x20Links','USD','MXN','‚úÖ\x20Direct\x20message\x20sent\x20to\x20chat\x20','GATEWAY_ID_MAP','sendShopNotification','‚Ä¢\x20Active\x20payment\x20links\x0a','Error\x20handling\x20message:','handleSingleLineVerification','üö®\x20*API\x20Error*\x0a\x0a','\x20\x20\x20Username:\x20`','PGK','‚ùå\x20Error:\x20`','REFUND','amountUSDT','Use\x20/start\x20to\x20connect.','‚Ä¢\x20Last\x205\x20payouts\x0a','amountAfterGatewayCommissionUSDT','cmd_status','\x0a‚ö†Ô∏è\x20If\x20this\x20wasn\x27t\x20you,\x20change\x20your\x20password\x20immediately!','JPY','üá™üá∫','‚ùå\x20You\x20are\x20not\x20connected\x20to\x20any\x20shop.\x0a\x0a','Failed\x20to\x20send\x20login\x20notification:','toLocaleDateString','üá®üáø','BND','üáπüá∑','Disconnect\x20one\x20of\x20the\x20existing\x20accounts\x20first.','2549064yGTUTa','toFixed','getUTCFullYear','üí∏\x20Penalty\x20amount:\x20*','HKD','Payment\x20successfully\x20paid','timestamp','\x0aüë§\x20*Customer\x20Information:*\x0a','FJD','üá¶üá≤','üáπüá≠','OMR','KES','type','üáßüá©','last_name','üá≤üá≤','callback_query','üí∏\x20*Payouts*\x0a\x0a','üá¶üá™','üë§\x20Account','shop','üá∞üá≠','LAK','MVR','‚ùå\x20Shop\x20`','0.0','üîÑ\x20Reset\x20incomplete\x20verification\x20for\x20user\x20','https://t.me/trapay_news','üáøüá¶','üáµüá¨','üá®üá±','üåê\x20IP:\x20`','MNT','polling_error','üáØüá¥','sendNotificationToAll','BDT','\x20\x20\x20Gateway:\x20','updatedAt','Payment\x20expired','pl_type_','pl_view_list','pl_gw_','Payment\x20refund','Markdown','üá∫üáæ','cmd_back_to_menu','update','VND','üîó\x20*Payment\x20Links*\x0a\x0a','Not\x20specified','toLocaleString','unknown\x20shop','üá≤üá©','‚è≥\x20Pending\x20payouts:\x20','customerIp','RSD','stats_all_time','pl_type_single','üá±üáß','KHR','toString','3732953BVuvee','Error\x20handling\x20/status\x20command:','CHF','handleMerchantStatistics','‚Ä¢\x20Usage\x20statistics\x0a','2-digit','To\x20receive\x20payment\x20notifications,\x20send\x20your\x20credentials\x20in\x20one\x20line:\x0a\x0a','üá≠üá∞','requestId','üá≠üá∑','stats_today','‚ùå\x20Shop\x20not\x20found.\x20Please\x20start\x20over\x20with\x20/start','üí∞\x20Amount:\x20','üîå\x20Disconnect','LBP','VUV','üáÆüá±','ipAddress','https://app.trapay.uk/login','üîó\x20*Transaction\x20Link:*\x20`','API\x20key\x20must\x20start\x20with\x20`pk\x5c_`\x20or\x20`sk\x5c_`.','üá≥üáµ','üìä\x20*Statistics*\x0a\x0aSelect\x20period:','sendMessage','üì±\x20No\x20active\x20Telegram\x20users\x20found','BGN','üîÇ\x20Single\x20Use','telegramUser','length','üá¶üáø','desc','‚ùå\x20Cancel','üá∏üá¨','totalPaidOut','defineProperty','‚ùå\x20Invalid\x20API\x20key\x20format.\x0a\x0a','cmd_payouts','errorMessage','6836776Rrxvwf','üá≤üá≥','üá¶üá±','chargebackAmount','üîÑ\x20Refunds\x20\x5c-\x20','‚úÖ\x20Paid\x20out:\x20','Error\x20handling\x20/statistics\x20command:','‚ùå\x20Failed\x20to\x20send\x20notification\x20to\x20all\x20users:','6emXnho','‚Ä¢\x20Payouts','üîå\x20User\x20','N/A','üá©üá∞','../types/gateway','üá∫üá∏','‚ùå\x20Close','üîó\x20*Create\x20Payment\x20Link*\x0a\x0aStep\x201/4:\x20Select\x20gateway','sendPayoutNotification','üá∫üá¶','‚è≥\x20The\x20payment\x20is\x20currently\x20being\x20processed\x20by\x20the\x20gateway.\x0a','sendPaymentNotification','üí∞\x20Turnover\x20\x5c-\x20','Copy\x20and\x20share\x20this\x20link\x20with\x20your\x20customers\x5c!','\x20USDT\x0a','üîî\x20You\x20receive\x20notifications\x20about:\x0a','üá¨üá≠','/payment\x5c_links\x20-\x20manage\x20payment\x20links\x0a','CLP','notificationLogin','‚ùå\x20You\x20are\x20not\x20connected\x20to\x20a\x20shop.\x0a\x0aUse\x20/start\x20to\x20connect.','map','currency','MarkdownV2','üá¶üá∑','statusCode','HUF','üìù\x20Order\x20ID:\x20`','‚Ä¢\x20Payment\x20status\x20changes\x0a','.jpeg','botToken','üìÖ\x20This\x20Month','Error\x20handling\x20callback\x20query:','Unknown','COMPLETED','BRL','Coming\x20soon...\x0a\x0a','includes','üáØüáµ','Username\x20must\x20contain\x20only\x20letters,\x20numbers\x20and\x20underscore\x20(3-50\x20characters).','onText','LKR','reduce','UAH','Telegram\x20bot\x20not\x20initialized,\x20cannot\x20send\x20notification','findMany','‚ùå\x20An\x20error\x20occurred\x20while\x20verifying\x20data.','WST','Payment\x20failed','getGatewayCurrencies','üáµüá≠','getGatewayNameById','ceil','‚ùå\x20Error\x20getting\x20statistics','startsWith','‚ùå\x20Failed\x20Payments\x20\x5c-\x20','‚ùå\x20Error\x20sending\x20file\x20to\x20shop:','TELEGRAM_BOT_TOKEN\x20not\x20found\x20in\x20environment\x20variables','replace','‚ùóÔ∏è\x20Make\x20sure\x20to\x20separate\x20username\x20and\x20API\x20key\x20with\x20a\x20space!','üìã\x20*Payment\x20Links*\x0a\x0aNo\x20payment\x20links\x20found\x5c.\x0a\x0aCreate\x20your\x20first\x20payment\x20link\x5c!','‚úÖ\x20File\x20sent\x20to\x20chat\x20','üîó\x20Endpoint:\x20`','MKD','üáπüá¥','üìÖ\x20All\x20Time','first_name','üíª\x20Browser:\x20`','default','IDR','push','Next\x20‚û°Ô∏è','üì¢\x20Telegram\x20channel','message_id','‚ùå\x20Error\x20sending\x20file\x20to\x20user\x20','AZN','üìã\x20View\x20Payment\x20Links','‚Ä¢\x20New\x20payments\x0a','orderId','Please\x20check\x20the\x20spelling\x20and\x20try\x20again.\x0a\x0a','from','üá¨üáß','step',':\x20username=\x22','üìÖ\x20Connection\x20date:\x20','üá¶üá´','Failed\x20login\x20attempt','customerName','KGS','üáßüáπ','cmd_contacts','üìÖ\x20Time:\x20','Error\x20getting\x20merchant\x20statistics:','SEK','endsWith','pl_curr_page_','DKK','üáßüá¨','‚Ä¢\x20Share\x20link\x20directly','üîî\x20You\x20will\x20now\x20receive\x20notifications\x20about:\x0a','.jpg','Error\x20sending\x20shop\x20notification:','üìÖ\x20Yesterday','üá∏üá¶','Error\x20handling\x20/debug\x20command:','INR','‚úÖ\x20Connected\x20to\x20shop:\x20*','Payment\x20chargeback','user\x20is\x20deactivated','BYN','You\x20are\x20already\x20connected\x20to\x20shop:\x20*','findUnique','\x20(e.g.,\x20100)','üì±\x20Your\x20Telegram\x20ID:\x20`','\x20USDC\x0a','TWD','stats_this_month','üá≤üáª','TRY','üáªüá∫','‚ùå\x20Invalid\x20username\x20format:\x20`','‚ùå\x20Error\x20sending\x20direct\x20message:','üì±\x20API\x20error\x20notifications\x20disabled\x20for\x20shop\x20','filter','üá®üá¶','HRK','GBP','gateway','UZS','üìß\x20Email:\x20`','getCurrencyFlag','üí∞\x20Amount:\x20*','EUR','paymentGateways','üì±\x20Telegram\x20notification:\x20gateway\x20\x22','set','KZT','TND','`\x0a\x0a','en-US','\x5c.\x20','stats_yesterday','ACTIVE','COP','üîÑ\x20Type:\x20','`appple\x20pk_aa6450d3f57afbefbb0f3f5be5ce6cca13037536afc5ccf14c81a6cbc7a07de5`\x0a\x0a','9808QpFrNA','‚ùå\x20Failed\x20to\x20initialize\x20Telegram\x20bot:','get','chargeback','userAgent','üí¨\x20Support','ZAR','üìä\x20Statistics','üåê\x20Website','SINGLE','isVerified','UYU','üáπüá≤','üá∞üá™','stats_last_month','https://trapay.uk/','../config/database','payout','EGP','isValidGatewayId','‚ùå\x20An\x20error\x20occurred.\x20Please\x20try\x20again\x20later.','üìù\x20Format:\x20`username\x20api_key`\x0a\x0a','ü§ñ\x20Welcome\x20to\x20TRAPAY\x20notification\x20system!\x0a\x0a','üá∞üá∑','üá¶üá∫','method','NPR','IRR','image/png','‚ùå\x20No\x20verified\x20Telegram\x20users\x20found\x20for\x20shop\x20ID:\x20','shopId','üáÆüá∂','Telegram\x20bot\x20error:','üá±üá∞','PHP','chat','9YqhdDD','Contact\x20administrator.','parse','üáßüá¶','join','üìä\x20*Connection\x20Status*\x0a\x0a','üè¶\x20Gateway:\x20','test','application/pdf','PAID','üá∞üáº','\x20initialized\x20successfully','error','üí∏\x20Payouts','Page\x20','cmd_statistics','üí∞\x20Total\x20earned:\x20','AUD','‚ûï\x20Create\x20New\x20Link','trapay_bot','https://app.trapay.uk','üîÑ\x20Processing\x20single-line\x20verification\x20for\x20user\x20','ALL','üá≤üáΩ','sendDocument','customerEmail','/disconnect\x20-\x20disconnect\x20from\x20notifications','\x20users','sk_','txid','‚¨ÖÔ∏è\x20Previous','log','‚Ä¢\x20Dates\x20and\x20TX\x20IDs','üáºüá∏','üéâ\x20*Congratulations!*\x0a\x0a','count','botUsername','CZK','/payouts\x20-\x20view\x20recent\x20payouts\x0a','application/octet-stream','trim',')\x0a\x0a','Step\x204/4:\x20Enter\x20amount\x0a\x0a','pl_type_multi','*.\x0a\x0a','All\x20Time','\x20(@','‚ùå\x20Failed\x20to\x20send\x20notification\x20to\x20Telegram\x20user\x20','‚ùå\x20No\x20gateways\x20configured.\x20Please\x20configure\x20gateways\x20in\x20the\x20admin\x20panel\x20first.','üîî\x20Notifications\x20are\x20active','entries','geo','keys','RON','GHS','NGN','\x20-\x20','AMD','telegramBotService','Gateway\x20-\x20','__esModule','Username:\x20`','üá∑üá¥','`.\x0a\x0a','BTN','PLN','‚ùå\x20Error\x20getting\x20debug\x20information.','üá¨üá™','‚úÖ\x20Successful\x20Payments\x20\x5c-\x20','THB','CAD','üí≥\x20*Wallet:*\x20`','üí∞\x20*Amount:*\x20','getGatewayDisplayNameForTelegram','text','üì±\x20Shop:\x20*','paymentLink','‚è±Ô∏è\x20*Period:*\x20','You\x20are\x20connected\x20to\x20shop:\x20*','üá¥üá≤','PEN','Step\x202/4:\x20Select\x20link\x20type','‚úÖ\x20Telegram\x20bot\x20@','üáµüá∞','üá∑üá∏','SGD','forEach','pl_page_','üìõ\x20Name:\x20`','back_to_stats_menu','sendLoginNotification','pk_','üá≠üá∫','showPaymentLinksList','üá∑üá∫','üìù\x20Notes:\x20','KRW','sendDirectMessage','.pdf','FAILED','üá∫üáø','NZD','Example:\x0a','Telegram\x20bot\x20polling\x20error:','\x5c)\x0a\x0a','setupBotHandlers','Successful\x20login','balance','üáπüáØ','split','Step\x203/4:\x20Select\x20currency\x0a','https://t.me/trapay_sales','üáßüáæ','username','üá≤üáæ','UTC','üì±\x20Login\x20notifications\x20disabled\x20for\x20shop\x20','pl_','Failed\x20to\x20send\x20API\x20error\x20notification:','stopBot','adminNotes','TJS','5809639TVggQK','‚ùå\x20Invalid\x20format.\x20Please\x20send\x20exactly\x202\x20parts\x20separated\x20by\x20space:\x0a\x0a','‚úÖ\x20*Payment\x20Link\x20Created\x20Successfully\x5c!*\x0a\x0a','Error\x20in\x20payment\x20link\x20flow:','üá®üá≥','getUTCDate','‚ùå\x20You\x20are\x20not\x20registered\x20in\x20the\x20system.\x0a\x0a','‚¨ÖÔ∏è\x20Back','padStart','getUTCMonth','substring','Error\x20handling\x20/disconnect\x20command:','/contacts\x20-\x20support\x20contacts\x0a','delete','üì±\x20Sending\x20notification\x20to\x20all\x20connected\x20users:\x20','customerUa','amount','remitterIban','.png','This\x20feature\x20will\x20show:\x0a',':\x20`','currencyPage','üì±\x20Notification\x20sent\x20to\x20','‚Ä¢\x20Important\x20events','node-telegram-bot-api','‚ùå\x20Error\x20sending\x20file\x20to\x20chat:','üÜî\x20Payment\x20ID:\x20`','Error\x20showing\x20payment\x20links\x20list:','CNY','processing','1390BsRfff','answerCallbackQuery','üì±\x20Available\x20Commands:\x0a','success','‚ôæÔ∏è\x20Multi\x20Use','EXPIRED','allSettled','telegramId','sendDirectFile','Payment\x20is\x20being\x20processed','üåê\x20*Network:*\x20','AED','üåê\x20IP\x20address:\x20`','slice','‚úÖ\x20Telegram\x20user\x20'];a87_0x1286=function(){return _0x13276d;};return a87_0x1286();}(function(_0x131aa5,_0x59125b){const _0x47e440=a87_0x2baf,_0x329bfe=_0x131aa5();while(!![]){try{const _0x27d951=parseInt(_0x47e440(0x2d0))/0x1*(-parseInt(_0x47e440(0x2c5))/0x2)+-parseInt(_0x47e440(0x31e))/0x3+-parseInt(_0x47e440(0x1e2))/0x4*(-parseInt(_0x47e440(0x29e))/0x5)+parseInt(_0x47e440(0x14f))/0x6*(parseInt(_0x47e440(0x121))/0x7)+-parseInt(_0x47e440(0x147))/0x8*(-parseInt(_0x47e440(0x206))/0x9)+-parseInt(_0x47e440(0x2f2))/0xa+parseInt(_0x47e440(0x280))/0xb;if(_0x27d951===_0x59125b)break;else _0x329bfe['push'](_0x329bfe['shift']());}catch(_0x368407){_0x329bfe['push'](_0x329bfe['shift']());}}}(a87_0x1286,0x77e3b));var __importDefault=this&&this[a87_0x18e69b(0x2ae)]||function(_0x25fb41){const _0x4c316f=a87_0x18e69b;return _0x25fb41&&_0x25fb41[_0x4c316f(0x242)]?_0x25fb41:{'default':_0x25fb41};};Object[a87_0x18e69b(0x143)](exports,a87_0x18e69b(0x242),{'value':!![]}),exports[a87_0x18e69b(0x240)]=exports[a87_0x18e69b(0x2d5)]=void 0x0;const node_telegram_bot_api_1=__importDefault(require(a87_0x18e69b(0x298))),database_1=__importDefault(require(a87_0x18e69b(0x1f2))),gateway_1=require(a87_0x18e69b(0x154));class TelegramBotService{constructor(){const _0x5318e4=a87_0x18e69b;this[_0x5318e4(0x2eb)]=null,this['paymentLinkSessions']=new Map(),this[_0x5318e4(0x16e)]=process.env.TELEGRAM_BOT_TOKEN||'',this[_0x5318e4(0x22a)]=process.env.TELEGRAM_BOT_USERNAME||_0x5318e4(0x219),this['botToken']?this['initializeBot']():console['warn'](_0x5318e4(0x189));}['initializeBot'](){const _0x21a681=a87_0x18e69b;try{this[_0x21a681(0x2eb)]=new node_telegram_bot_api_1[(_0x21a681(0x194))](this[_0x21a681(0x16e)],{'polling':!![]}),this[_0x21a681(0x26f)](),console[_0x21a681(0x225)](_0x21a681(0x258)+this[_0x21a681(0x22a)]+_0x21a681(0x211));}catch(_0x36ae54){console[_0x21a681(0x212)](_0x21a681(0x1e3),_0x36ae54);}}['setupBotHandlers'](){const _0x22bd53=a87_0x18e69b;if(!this[_0x22bd53(0x2eb)])return;this[_0x22bd53(0x2eb)][_0x22bd53(0x178)](/\/start/,async _0x3ffc03=>{const _0x4157ae=_0x22bd53,_0x594f6e=_0x3ffc03[_0x4157ae(0x205)]['id'],_0x490caf=_0x3ffc03[_0x4157ae(0x1a0)]?.['id'][_0x4157ae(0x120)](),_0x3898fb=_0x3ffc03[_0x4157ae(0x1a0)]?.[_0x4157ae(0x277)],_0xe14a4e=_0x3ffc03[_0x4157ae(0x1a0)]?.[_0x4157ae(0x192)],_0x4dc41c=_0x3ffc03[_0x4157ae(0x1a0)]?.[_0x4157ae(0xf1)];if(!_0x490caf)return;try{let _0x484bf2=await database_1[_0x4157ae(0x194)]['telegramUser'][_0x4157ae(0x1bf)]({'where':{'telegramId':_0x490caf},'include':{'shop':!![]}});!_0x484bf2?(_0x484bf2=await database_1[_0x4157ae(0x194)]['telegramUser']['create']({'data':{'telegramId':_0x490caf,'username':_0x3898fb,'firstName':_0xe14a4e,'lastName':_0x4dc41c,'isVerified':![],'shopId':null},'include':{'shop':!![]}}),console[_0x4157ae(0x225)](_0x4157ae(0x2e9)+_0x490caf+_0x4157ae(0x234)+_0x3898fb+')')):_0x484bf2=await database_1[_0x4157ae(0x194)][_0x4157ae(0x13c)][_0x4157ae(0x112)]({'where':{'telegramId':_0x490caf},'data':{'username':_0x3898fb,'firstName':_0xe14a4e,'lastName':_0x4dc41c},'include':{'shop':!![]}}),_0x484bf2['isVerified']&&_0x484bf2[_0x4157ae(0x200)]&&_0x484bf2[_0x4157ae(0xf7)]?await this['bot']?.['sendMessage'](_0x594f6e,'‚úÖ\x20Welcome\x20back!\x0a\x0a'+(_0x4157ae(0x1be)+_0x484bf2[_0x4157ae(0xf7)][_0x4157ae(0x2fb)]+'*\x0a')+(_0x4157ae(0x243)+_0x484bf2[_0x4157ae(0xf7)][_0x4157ae(0x277)]+_0x4157ae(0x1da))+_0x4157ae(0x15f)+_0x4157ae(0x19d)+_0x4157ae(0x16c)+_0x4157ae(0x150),{'parse_mode':_0x4157ae(0x10f),'reply_markup':{'inline_keyboard':[[{'text':_0x4157ae(0x1e9),'callback_data':'cmd_statistics'},{'text':_0x4157ae(0x213),'callback_data':_0x4157ae(0x145)}],[{'text':'üîó\x20Payment\x20Links','callback_data':_0x4157ae(0x2ea)},{'text':'üìä\x20Status','callback_data':_0x4157ae(0x313)}],[{'text':_0x4157ae(0x2b9),'callback_data':_0x4157ae(0x1aa)},{'text':'üîå\x20Disconnect','callback_data':'cmd_disconnect'}]]}}):(_0x484bf2[_0x4157ae(0x200)]&&!_0x484bf2[_0x4157ae(0x1ec)]&&(await database_1[_0x4157ae(0x194)][_0x4157ae(0x13c)][_0x4157ae(0x112)]({'where':{'telegramId':_0x490caf},'data':{'shopId':null,'isVerified':![]}}),console[_0x4157ae(0x225)](_0x4157ae(0xfd)+_0x490caf)),await this[_0x4157ae(0x2eb)]?.[_0x4157ae(0x138)](_0x594f6e,_0x4157ae(0x1f8)+_0x4157ae(0x127)+_0x4157ae(0x1f7)+_0x4157ae(0x26c)+'`appple\x20pk_aa6450d3f57afbefbb0f3f5be5ce6cca13037536afc5ccf14c81a6cbc7a07de5`\x0a\x0a'+_0x4157ae(0x18b),{'parse_mode':_0x4157ae(0x10f)}));}catch(_0x4dec91){console[_0x4157ae(0x212)]('Error\x20handling\x20/start\x20command:',_0x4dec91),await this['bot']?.[_0x4157ae(0x138)](_0x594f6e,_0x4157ae(0x1f6));}}),this['bot'][_0x22bd53(0x178)](/\/disconnect/,async _0x2d1061=>{const _0x154d20=_0x22bd53,_0x13a727=_0x2d1061[_0x154d20(0x205)]['id'],_0x43d49a=_0x2d1061[_0x154d20(0x1a0)]?.['id']['toString']();if(!_0x43d49a)return;try{const _0x58ba52=await database_1[_0x154d20(0x194)][_0x154d20(0x13c)][_0x154d20(0x1bf)]({'where':{'telegramId':_0x43d49a},'include':{'shop':!![]}});if(!_0x58ba52||!_0x58ba52[_0x154d20(0x1ec)]||!_0x58ba52[_0x154d20(0x200)]){await this[_0x154d20(0x2eb)]?.[_0x154d20(0x138)](_0x13a727,'‚ùå\x20You\x20are\x20not\x20connected\x20to\x20the\x20notification\x20system.');return;}const _0x414afd=_0x58ba52[_0x154d20(0xf7)]?.[_0x154d20(0x2fb)]||_0x154d20(0x117);await database_1[_0x154d20(0x194)][_0x154d20(0x13c)][_0x154d20(0x112)]({'where':{'telegramId':_0x43d49a},'data':{'shopId':null,'isVerified':![]}}),console[_0x154d20(0x225)](_0x154d20(0x151)+_0x43d49a+'\x20disconnected\x20from\x20shop\x20'+_0x58ba52['shopId']),await this['bot']?.[_0x154d20(0x138)](_0x13a727,'‚úÖ\x20You\x20have\x20been\x20successfully\x20disconnected\x20from\x20shop\x20*'+_0x414afd+_0x154d20(0x232)+'To\x20reconnect,\x20use\x20the\x20/start\x20command',{'parse_mode':_0x154d20(0x10f)});}catch(_0x40aeda){console[_0x154d20(0x212)](_0x154d20(0x28b),_0x40aeda),await this[_0x154d20(0x2eb)]?.[_0x154d20(0x138)](_0x13a727,_0x154d20(0x1f6));}}),this[_0x22bd53(0x2eb)][_0x22bd53(0x178)](/\/status/,async _0x1c9720=>{const _0x5e30ce=_0x22bd53,_0x13f5fb=_0x1c9720[_0x5e30ce(0x205)]['id'],_0x3f6dfe=_0x1c9720[_0x5e30ce(0x1a0)]?.['id'][_0x5e30ce(0x120)]();if(!_0x3f6dfe)return;try{const _0x38868a=await database_1['default']['telegramUser'][_0x5e30ce(0x1bf)]({'where':{'telegramId':_0x3f6dfe},'include':{'shop':!![]}});if(!_0x38868a){await this[_0x5e30ce(0x2eb)]?.[_0x5e30ce(0x138)](_0x13f5fb,_0x5e30ce(0x286)+_0x5e30ce(0x2f6));return;}if(!_0x38868a[_0x5e30ce(0x1ec)]||!_0x38868a['shopId']||!_0x38868a[_0x5e30ce(0xf7)]){await this[_0x5e30ce(0x2eb)]?.[_0x5e30ce(0x138)](_0x13f5fb,_0x5e30ce(0x2b4)+'Use\x20/start\x20to\x20connect.');return;}await this['bot']?.[_0x5e30ce(0x138)](_0x13f5fb,_0x5e30ce(0x20b)+(_0x5e30ce(0x1ba)+_0x38868a[_0x5e30ce(0xf7)][_0x5e30ce(0x2fb)]+'*\x0a')+(_0x5e30ce(0x2d4)+_0x38868a[_0x5e30ce(0xf7)][_0x5e30ce(0x277)]+'`\x0a')+(_0x5e30ce(0x1a4)+_0x38868a[_0x5e30ce(0x109)][_0x5e30ce(0x319)](_0x5e30ce(0x1db))+'\x0a\x0a')+'üîî\x20Notifications\x20are\x20active\x0a\x0a'+_0x5e30ce(0x2a0)+'/statistics\x20-\x20view\x20your\x20statistics\x0a'+_0x5e30ce(0x22c)+_0x5e30ce(0x161)+_0x5e30ce(0x28c)+_0x5e30ce(0x220),{'parse_mode':_0x5e30ce(0x10f)});}catch(_0x5a6ea3){console[_0x5e30ce(0x212)](_0x5e30ce(0x122),_0x5a6ea3),await this['bot']?.[_0x5e30ce(0x138)](_0x13f5fb,_0x5e30ce(0x1f6));}}),this[_0x22bd53(0x2eb)][_0x22bd53(0x178)](/\/statistics/,async _0x29a65d=>{const _0x2652fd=_0x22bd53,_0x5c07be=_0x29a65d[_0x2652fd(0x205)]['id'],_0x160e6d=_0x29a65d[_0x2652fd(0x1a0)]?.['id'][_0x2652fd(0x120)]();if(!_0x160e6d)return;try{const _0x4cf2bf=await database_1[_0x2652fd(0x194)]['telegramUser']['findUnique']({'where':{'telegramId':_0x160e6d},'include':{'shop':!![]}});if(!_0x4cf2bf?.[_0x2652fd(0x1ec)]||!_0x4cf2bf[_0x2652fd(0x200)]){await this[_0x2652fd(0x2eb)]?.['sendMessage'](_0x5c07be,_0x2652fd(0x2b4)+_0x2652fd(0x310));return;}const _0x5f0f95={'inline_keyboard':[[{'text':_0x2652fd(0x2ce),'callback_data':_0x2652fd(0x12b)}],[{'text':_0x2652fd(0x1b6),'callback_data':'stats_yesterday'}],[{'text':_0x2652fd(0x16f),'callback_data':_0x2652fd(0x1c4)}],[{'text':_0x2652fd(0x2ad),'callback_data':_0x2652fd(0x1f0)}],[{'text':_0x2652fd(0x191),'callback_data':_0x2652fd(0x11c)}],[{'text':_0x2652fd(0x287),'callback_data':_0x2652fd(0x111)}]]};await this[_0x2652fd(0x2eb)]?.[_0x2652fd(0x138)](_0x5c07be,_0x2652fd(0x137),{'parse_mode':_0x2652fd(0x10f),'reply_markup':_0x5f0f95});}catch(_0x1d3a06){console[_0x2652fd(0x212)](_0x2652fd(0x14d),_0x1d3a06),await this[_0x2652fd(0x2eb)]?.[_0x2652fd(0x138)](_0x5c07be,_0x2652fd(0x1f6));}}),this[_0x22bd53(0x2eb)]['onText'](/\/payouts/,async _0x4cffb6=>{const _0x19a996=_0x22bd53,_0x515527=_0x4cffb6[_0x19a996(0x205)]['id'],_0x22ad26=_0x4cffb6[_0x19a996(0x1a0)]?.['id']['toString']();if(!_0x22ad26)return;try{const _0x343f86=await database_1['default'][_0x19a996(0x13c)][_0x19a996(0x1bf)]({'where':{'telegramId':_0x22ad26},'include':{'shop':!![]}});if(!_0x343f86?.[_0x19a996(0x1ec)]||!_0x343f86[_0x19a996(0x200)]){await this[_0x19a996(0x2eb)]?.[_0x19a996(0x138)](_0x515527,_0x19a996(0x2b4)+_0x19a996(0x310));return;}await this[_0x19a996(0x2eb)]?.[_0x19a996(0x138)](_0x515527,_0x19a996(0x2dc)+_0x19a996(0x174)+_0x19a996(0x293)+_0x19a996(0x311)+'‚Ä¢\x20Amount\x20and\x20network\x0a'+'‚Ä¢\x20Transaction\x20status\x0a'+_0x19a996(0x226),{'parse_mode':_0x19a996(0x10f)});}catch(_0x51b31c){console[_0x19a996(0x212)]('Error\x20handling\x20/payouts\x20command:',_0x51b31c),await this[_0x19a996(0x2eb)]?.[_0x19a996(0x138)](_0x515527,_0x19a996(0x1f6));}}),this[_0x22bd53(0x2eb)][_0x22bd53(0x178)](/\/payment_links/,async _0x113475=>{const _0x10ad98=_0x22bd53,_0x36f486=_0x113475[_0x10ad98(0x205)]['id'],_0x736dc8=_0x113475[_0x10ad98(0x1a0)]?.['id']['toString']();if(!_0x736dc8)return;try{const _0xeb482b=await database_1[_0x10ad98(0x194)][_0x10ad98(0x13c)][_0x10ad98(0x1bf)]({'where':{'telegramId':_0x736dc8},'include':{'shop':!![]}});if(!_0xeb482b?.[_0x10ad98(0x1ec)]||!_0xeb482b[_0x10ad98(0x200)]){await this[_0x10ad98(0x2eb)]?.[_0x10ad98(0x138)](_0x36f486,_0x10ad98(0x2b4)+'Use\x20/start\x20to\x20connect.');return;}await this[_0x10ad98(0x2eb)]?.[_0x10ad98(0x138)](_0x36f486,_0x10ad98(0x114)+_0x10ad98(0x174)+'This\x20feature\x20will\x20show:\x0a'+_0x10ad98(0x307)+_0x10ad98(0x125)+'‚Ä¢\x20Quick\x20create\x20new\x20link\x0a'+_0x10ad98(0x1b2),{'parse_mode':'Markdown'});}catch(_0x4a8ca4){console[_0x10ad98(0x212)]('Error\x20handling\x20/payment_links\x20command:',_0x4a8ca4),await this[_0x10ad98(0x2eb)]?.['sendMessage'](_0x36f486,_0x10ad98(0x1f6));}}),this[_0x22bd53(0x2eb)]['onText'](/\/contacts/,async _0x3607e1=>{const _0x356a48=_0x22bd53,_0x25fc32=_0x3607e1[_0x356a48(0x205)]['id'];try{await this[_0x356a48(0x2eb)]?.[_0x356a48(0x138)](_0x25fc32,_0x356a48(0x2f8),{'parse_mode':_0x356a48(0x10f),'reply_markup':{'inline_keyboard':[[{'text':_0x356a48(0x1ea),'url':_0x356a48(0x1f1)}],[{'text':_0x356a48(0xf6),'url':_0x356a48(0x133)}],[{'text':_0x356a48(0x198),'url':_0x356a48(0xfe)}],[{'text':_0x356a48(0x1e7),'url':_0x356a48(0x275)}]]}});}catch(_0x3742c1){console[_0x356a48(0x212)]('Error\x20handling\x20/contacts\x20command:',_0x3742c1),await this[_0x356a48(0x2eb)]?.[_0x356a48(0x138)](_0x25fc32,_0x356a48(0x1f6));}}),this[_0x22bd53(0x2eb)]['on'](_0x22bd53(0xf3),async _0x1969c8=>{const _0x2618bb=_0x22bd53,_0x1cbf7b=_0x1969c8['message'],_0x212fd6=_0x1cbf7b?.[_0x2618bb(0x205)]['id'],_0x82b44b=_0x1969c8['from']['id'][_0x2618bb(0x120)](),_0x4e1ab9=_0x1969c8['data'];if(!_0x212fd6||!_0x4e1ab9)return;try{await this[_0x2618bb(0x2eb)]?.[_0x2618bb(0x29f)](_0x1969c8['id']);const _0x3c1308=await database_1[_0x2618bb(0x194)]['telegramUser'][_0x2618bb(0x1bf)]({'where':{'telegramId':_0x82b44b},'include':{'shop':!![]}});if(!_0x3c1308?.[_0x2618bb(0x1ec)]||!_0x3c1308[_0x2618bb(0x200)]){await this[_0x2618bb(0x2eb)]?.[_0x2618bb(0x138)](_0x212fd6,_0x2618bb(0x164));return;}switch(_0x4e1ab9){case _0x2618bb(0x215):const _0x2b6b4a={'inline_keyboard':[[{'text':_0x2618bb(0x2ce),'callback_data':_0x2618bb(0x12b)}],[{'text':_0x2618bb(0x1b6),'callback_data':_0x2618bb(0x1dd)}],[{'text':_0x2618bb(0x16f),'callback_data':'stats_this_month'}],[{'text':'üìÖ\x20Last\x20Month','callback_data':_0x2618bb(0x1f0)}],[{'text':_0x2618bb(0x191),'callback_data':'stats_all_time'}],[{'text':_0x2618bb(0x287),'callback_data':_0x2618bb(0x111)}]]};await this[_0x2618bb(0x2eb)]?.[_0x2618bb(0x138)](_0x212fd6,_0x2618bb(0x137),{'parse_mode':'Markdown','reply_markup':_0x2b6b4a});break;case _0x2618bb(0x12b):case _0x2618bb(0x1dd):case _0x2618bb(0x1c4):case _0x2618bb(0x1f0):case _0x2618bb(0x11c):await this[_0x2618bb(0x124)](_0x212fd6,_0x3c1308[_0x2618bb(0x200)],_0x4e1ab9,_0x1cbf7b?.[_0x2618bb(0x199)]);break;case _0x2618bb(0x25f):const _0x50f03b={'inline_keyboard':[[{'text':_0x2618bb(0x2ce),'callback_data':_0x2618bb(0x12b)}],[{'text':_0x2618bb(0x1b6),'callback_data':_0x2618bb(0x1dd)}],[{'text':_0x2618bb(0x16f),'callback_data':'stats_this_month'}],[{'text':_0x2618bb(0x2ad),'callback_data':_0x2618bb(0x1f0)}],[{'text':_0x2618bb(0x191),'callback_data':_0x2618bb(0x11c)}],[{'text':_0x2618bb(0x287),'callback_data':_0x2618bb(0x111)}]]};_0x1cbf7b?.[_0x2618bb(0x199)]?await this[_0x2618bb(0x2eb)]?.[_0x2618bb(0x2dd)]('üìä\x20*Statistics*\x0a\x0aSelect\x20period:',{'chat_id':_0x212fd6,'message_id':_0x1cbf7b[_0x2618bb(0x199)],'parse_mode':_0x2618bb(0x10f),'reply_markup':_0x50f03b}):await this[_0x2618bb(0x2eb)]?.[_0x2618bb(0x138)](_0x212fd6,_0x2618bb(0x137),{'parse_mode':_0x2618bb(0x10f),'reply_markup':_0x50f03b});break;case _0x2618bb(0x145):const _0x569c11=await database_1[_0x2618bb(0x194)][_0x2618bb(0x1f3)][_0x2618bb(0x17d)]({'where':{'shopId':_0x3c1308[_0x2618bb(0x200)]},'orderBy':{'createdAt':_0x2618bb(0x13f)}}),_0x2f6a02=_0x569c11[_0x2618bb(0x1cb)](_0x5dbe21=>_0x5dbe21[_0x2618bb(0x2f9)]==='PENDING')[_0x2618bb(0x17a)]((_0x530a32,_0x2a4a98)=>_0x530a32+_0x2a4a98[_0x2618bb(0x290)],0x0),_0x579f25=_0x569c11[_0x2618bb(0x1cb)](_0x1c2c80=>_0x1c2c80[_0x2618bb(0x2f9)]===_0x2618bb(0x172))[_0x2618bb(0x17a)]((_0x5d4a01,_0x29f3f0)=>_0x5d4a01+_0x29f3f0[_0x2618bb(0x290)],0x0),_0x316512=(_0x3c1308['shop']?.[_0x2618bb(0x271)]||0x0)+(_0x3c1308['shop']?.[_0x2618bb(0x142)]||0x0);await this[_0x2618bb(0x2eb)]?.[_0x2618bb(0x138)](_0x212fd6,_0x2618bb(0xf4)+(_0x2618bb(0x119)+_0x2f6a02['toFixed'](0x2)+_0x2618bb(0x1c2))+(_0x2618bb(0x14c)+_0x579f25[_0x2618bb(0x31f)](0x2)+_0x2618bb(0x1c2))+(_0x2618bb(0x216)+_0x316512['toFixed'](0x2)+_0x2618bb(0x2b8)),{'parse_mode':_0x2618bb(0x10f),'reply_markup':{'inline_keyboard':[[{'text':_0x2618bb(0x287),'callback_data':'cmd_back_to_menu'}]]}});break;case _0x2618bb(0x2ea):await this[_0x2618bb(0x2eb)]?.[_0x2618bb(0x138)](_0x212fd6,'üîó\x20*Payment\x20Links*\x0a\x0aChoose\x20an\x20action:',{'parse_mode':_0x2618bb(0x10f),'reply_markup':{'inline_keyboard':[[{'text':_0x2618bb(0x19c),'callback_data':_0x2618bb(0x10c)}],[{'text':_0x2618bb(0x218),'callback_data':_0x2618bb(0x2ee)}],[{'text':'‚¨ÖÔ∏è\x20Back','callback_data':'cmd_back_to_menu'}]]}});break;case'cmd_status':await this['bot']?.[_0x2618bb(0x138)](_0x212fd6,_0x2618bb(0x20b)+('‚úÖ\x20Connected\x20to\x20shop:\x20*'+(_0x3c1308[_0x2618bb(0xf7)]?.['name']||'Unknown')+'*\x0a')+('üë§\x20Username:\x20`'+(_0x3c1308[_0x2618bb(0xf7)]?.['username']||_0x2618bb(0x171))+'`\x0a')+(_0x2618bb(0x1a4)+_0x3c1308[_0x2618bb(0x109)][_0x2618bb(0x319)](_0x2618bb(0x1db))+'\x0a\x0a')+_0x2618bb(0x237),{'parse_mode':_0x2618bb(0x10f),'reply_markup':{'inline_keyboard':[[{'text':_0x2618bb(0x287),'callback_data':'cmd_back_to_menu'}]]}});break;case _0x2618bb(0x1aa):await this['bot']?.['sendMessage'](_0x212fd6,_0x2618bb(0x2f8),{'parse_mode':_0x2618bb(0x10f),'reply_markup':{'inline_keyboard':[[{'text':_0x2618bb(0x1ea),'url':_0x2618bb(0x1f1)}],[{'text':'üë§\x20Account','url':'https://app.trapay.uk/login'}],[{'text':_0x2618bb(0x198),'url':_0x2618bb(0xfe)}],[{'text':_0x2618bb(0x1e7),'url':'https://t.me/trapay_sales'}],[{'text':_0x2618bb(0x287),'callback_data':'cmd_back_to_menu'}]]}});break;case _0x2618bb(0x111):await this['bot']?.[_0x2618bb(0x138)](_0x212fd6,'‚úÖ\x20Welcome\x20back!\x0a\x0a'+(_0x2618bb(0x254)+(_0x3c1308[_0x2618bb(0xf7)]?.['name']||_0x2618bb(0x171))+'*\x0a')+(_0x2618bb(0x243)+(_0x3c1308[_0x2618bb(0xf7)]?.[_0x2618bb(0x277)]||_0x2618bb(0x171))+_0x2618bb(0x1da))+_0x2618bb(0x15f)+'‚Ä¢\x20New\x20payments\x0a'+_0x2618bb(0x16c)+'‚Ä¢\x20Payouts',{'parse_mode':_0x2618bb(0x10f),'reply_markup':{'inline_keyboard':[[{'text':_0x2618bb(0x1e9),'callback_data':_0x2618bb(0x215)},{'text':_0x2618bb(0x213),'callback_data':_0x2618bb(0x145)}],[{'text':_0x2618bb(0x301),'callback_data':'cmd_payment_links'},{'text':_0x2618bb(0x2b7),'callback_data':'cmd_status'}],[{'text':_0x2618bb(0x2b9),'callback_data':_0x2618bb(0x1aa)},{'text':_0x2618bb(0x12e),'callback_data':_0x2618bb(0x2b3)}]]}});break;case _0x2618bb(0x2b3):await database_1[_0x2618bb(0x194)][_0x2618bb(0x13c)][_0x2618bb(0x112)]({'where':{'telegramId':_0x82b44b},'data':{'shopId':null,'isVerified':![]}}),await this[_0x2618bb(0x2eb)]?.[_0x2618bb(0x138)](_0x212fd6,_0x2618bb(0x300)+(_0x3c1308['shop']?.[_0x2618bb(0x2fb)]||_0x2618bb(0x171))+'*.\x0a\x0a'+_0x2618bb(0x2f4),{'parse_mode':_0x2618bb(0x10f)});break;default:_0x4e1ab9[_0x2618bb(0x186)](_0x2618bb(0x27b))?await this['handlePaymentLinkFlow'](_0x212fd6,_0x82b44b,_0x4e1ab9,_0x1969c8[_0x2618bb(0x2e0)]?.[_0x2618bb(0x199)]):await this['bot']?.['sendMessage'](_0x212fd6,'‚ùå\x20Unknown\x20command');}}catch(_0x3123f0){console[_0x2618bb(0x212)](_0x2618bb(0x170),_0x3123f0),await this['bot']?.['sendMessage'](_0x212fd6,_0x2618bb(0x1f6));}}),this[_0x22bd53(0x2eb)]['onText'](/\/debug/,async _0x57ca35=>{const _0x2d6c87=_0x22bd53,_0x5977b2=_0x57ca35[_0x2d6c87(0x205)]['id'],_0x390007=_0x57ca35[_0x2d6c87(0x1a0)]?.['id'][_0x2d6c87(0x120)]();if(!_0x390007)return;try{const _0xd4a452=await database_1[_0x2d6c87(0x194)][_0x2d6c87(0x13c)]['findUnique']({'where':{'telegramId':_0x390007},'include':{'shop':!![]}});let _0x45f505='üîç\x20*Debug\x20Information*\x0a\x0a';_0x45f505+=_0x2d6c87(0x1c1)+_0x390007+_0x2d6c87(0x1da),_0xd4a452?.[_0x2d6c87(0x1ec)]&&_0xd4a452[_0x2d6c87(0xf7)]?(_0x45f505+='üè™\x20Your\x20connected\x20shop:\x0a',_0x45f505+='\x20\x20\x20Name:\x20*'+_0xd4a452[_0x2d6c87(0xf7)][_0x2d6c87(0x2fb)]+'*\x0a',_0x45f505+=_0x2d6c87(0x30b)+_0xd4a452[_0x2d6c87(0xf7)][_0x2d6c87(0x277)]+'`\x0a',_0x45f505+='\x20\x20\x20Status:\x20'+_0xd4a452[_0x2d6c87(0xf7)][_0x2d6c87(0x2f9)]+'\x0a\x0a'):_0x45f505+=_0x2d6c87(0x317),_0x45f505+='Use\x20/start\x20to\x20connect\x20to\x20a\x20shop.',await this[_0x2d6c87(0x2eb)]?.['sendMessage'](_0x5977b2,_0x45f505,{'parse_mode':_0x2d6c87(0x10f)});}catch(_0x103e90){console[_0x2d6c87(0x212)](_0x2d6c87(0x1b8),_0x103e90),await this[_0x2d6c87(0x2eb)]?.[_0x2d6c87(0x138)](_0x5977b2,_0x2d6c87(0x248));}}),this[_0x22bd53(0x2eb)]['on'](_0x22bd53(0x2e0),async _0x2a57a4=>{const _0x4d8788=_0x22bd53;if(_0x2a57a4[_0x4d8788(0x250)]?.[_0x4d8788(0x186)]('/'))return;const _0x47fe0b=_0x2a57a4['chat']['id'],_0x4d8872=_0x2a57a4[_0x4d8788(0x1a0)]?.['id'][_0x4d8788(0x120)](),_0x5403c1=_0x2a57a4['text']?.['trim']();if(!_0x4d8872||!_0x5403c1)return;try{const _0x378bb4=this[_0x4d8788(0x2bb)][_0x4d8788(0x1e4)](_0x4d8872);if(_0x378bb4&&_0x378bb4[_0x4d8788(0x1a2)]==='amount'){const _0x8341b3=parseFloat(_0x5403c1);if(isNaN(_0x8341b3)||_0x8341b3<=0x0){await this[_0x4d8788(0x2eb)]?.[_0x4d8788(0x138)](_0x47fe0b,'‚ùå\x20Invalid\x20amount.\x20Please\x20enter\x20a\x20valid\x20number\x20greater\x20than\x200.');return;}const _0xe48618=await database_1['default'][_0x4d8788(0x13c)][_0x4d8788(0x1bf)]({'where':{'telegramId':_0x4d8872},'include':{'shop':!![]}});if(!_0xe48618?.[_0x4d8788(0x200)]){await this[_0x4d8788(0x2eb)]?.['sendMessage'](_0x47fe0b,_0x4d8788(0x12c)),this[_0x4d8788(0x2bb)][_0x4d8788(0x28d)](_0x4d8872);return;}const _0x2661ae=(0x0,gateway_1[_0x4d8788(0x1f5)])(_0x378bb4[_0x4d8788(0x1cf)])?(0x0,gateway_1[_0x4d8788(0x183)])(_0x378bb4[_0x4d8788(0x1cf)]):_0x378bb4[_0x4d8788(0x1cf)],_0x2ea76a={'shopId':_0xe48618['shopId'],'gateway':_0x2661ae,'amount':_0x8341b3,'currency':_0x378bb4['currency'],'type':_0x378bb4['type'],'status':_0x4d8788(0x1de)},_0x2208af=await database_1[_0x4d8788(0x194)]['paymentLink']['create']({'data':_0x2ea76a});this[_0x4d8788(0x2bb)][_0x4d8788(0x28d)](_0x4d8872);const _0x3f1b13=(process.env.FRONTEND_URL||_0x4d8788(0x21a))+_0x4d8788(0x2d1)+_0x2208af['id'],_0x501aef=_0x3f1b13[_0x4d8788(0x18a)](/\./g,'\x5c.')['replace'](/-/g,'\x5c-')[_0x4d8788(0x18a)](/\//g,'\x5c/');await this[_0x4d8788(0x2eb)]?.[_0x4d8788(0x138)](_0x47fe0b,_0x4d8788(0x282)+('üîó\x20Link:\x20'+_0x501aef+'\x0a')+(_0x4d8788(0x12d)+_0x8341b3+'\x20'+_0x378bb4[_0x4d8788(0x166)]+'\x0a')+(_0x4d8788(0x20c)+_0x378bb4[_0x4d8788(0x1cf)]+'\x0a')+(_0x4d8788(0x1e0)+(_0x378bb4[_0x4d8788(0xef)]===_0x4d8788(0x1eb)?_0x4d8788(0x2e3):_0x4d8788(0x2c9))+'\x0a\x0a')+_0x4d8788(0x15d),{'parse_mode':_0x4d8788(0x167)});return;}const _0x15fd96=await database_1[_0x4d8788(0x194)][_0x4d8788(0x13c)]['findUnique']({'where':{'telegramId':_0x4d8872},'include':{'shop':!![]}});if(!_0x15fd96){await this['bot']?.[_0x4d8788(0x138)](_0x47fe0b,'‚ùå\x20Please\x20use\x20/start\x20command\x20first');return;}if(_0x15fd96[_0x4d8788(0x1ec)]&&_0x15fd96[_0x4d8788(0x200)]&&_0x15fd96['shop']){await this[_0x4d8788(0x2eb)]?.[_0x4d8788(0x138)](_0x47fe0b,'‚úÖ\x20You\x20are\x20already\x20connected\x20to\x20shop\x20*'+_0x15fd96['shop'][_0x4d8788(0x2fb)]+'*.\x0a\x0a'+'Use\x20/status\x20to\x20check\x20status\x20or\x20/disconnect\x20to\x20disconnect.',{'parse_mode':_0x4d8788(0x10f)});return;}const _0x7b214f=_0x5403c1[_0x4d8788(0x273)](/\s+/);if(_0x7b214f['length']!==0x2){await this[_0x4d8788(0x2eb)]?.[_0x4d8788(0x138)](_0x47fe0b,_0x4d8788(0x281)+_0x4d8788(0x1f7)+'Example:\x0a'+_0x4d8788(0x1e1)+('You\x20sent\x20'+_0x7b214f[_0x4d8788(0x13d)]+_0x4d8788(0x2d7)+_0x7b214f['map'](_0xd99498=>'`'+_0xd99498+'`')[_0x4d8788(0x20a)](',\x20')),{'parse_mode':_0x4d8788(0x10f)});return;}const [_0x4c4d78,_0x454eff]=_0x7b214f;console[_0x4d8788(0x225)]('üîÑ\x20Processing\x20single-line\x20verification\x20for\x20user\x20'+_0x4d8872+':\x20username=\x22'+_0x4c4d78+_0x4d8788(0x2c6)+_0x454eff[_0x4d8788(0x28a)](0x0,0xa)+_0x4d8788(0x2e6)),await this['handleSingleLineVerification'](_0x47fe0b,_0x4d8872,_0x4c4d78,_0x454eff);}catch(_0x162be4){console[_0x4d8788(0x212)](_0x4d8788(0x308),_0x162be4),await this[_0x4d8788(0x2eb)]?.['sendMessage'](_0x47fe0b,_0x4d8788(0x1f6));}}),this[_0x22bd53(0x2eb)]['on'](_0x22bd53(0x212),_0x444126=>{const _0x378e72=_0x22bd53;console[_0x378e72(0x212)](_0x378e72(0x202),_0x444126);}),this[_0x22bd53(0x2eb)]['on'](_0x22bd53(0x104),_0x137673=>{const _0x40cc7a=_0x22bd53;console[_0x40cc7a(0x212)](_0x40cc7a(0x26d),_0x137673);});}async[a87_0x18e69b(0x309)](_0xaa47a7,_0x2141d3,_0x6ff920,_0x3b6e99){const _0x4299d0=a87_0x18e69b;try{console['log'](_0x4299d0(0x21b)+_0x2141d3+_0x4299d0(0x1a3)+_0x6ff920+_0x4299d0(0x2c6)+_0x3b6e99['substring'](0x0,0xa)+_0x4299d0(0x2e6));if(!_0x6ff920||_0x6ff920[_0x4299d0(0x13d)]<0x3||_0x6ff920[_0x4299d0(0x13d)]>0x32||!/^[a-zA-Z0-9_]+$/[_0x4299d0(0x20d)](_0x6ff920)){await this[_0x4299d0(0x2eb)]?.['sendMessage'](_0xaa47a7,_0x4299d0(0x1c8)+_0x6ff920+'`\x0a\x0a'+_0x4299d0(0x177),{'parse_mode':_0x4299d0(0x10f)});return;}if(!_0x3b6e99||!_0x3b6e99[_0x4299d0(0x186)](_0x4299d0(0x261))&&!_0x3b6e99[_0x4299d0(0x186)](_0x4299d0(0x222))){await this[_0x4299d0(0x2eb)]?.[_0x4299d0(0x138)](_0xaa47a7,_0x4299d0(0x144)+_0x4299d0(0x135),{'parse_mode':_0x4299d0(0x10f)});return;}const _0x59c84a=await database_1[_0x4299d0(0x194)][_0x4299d0(0xf7)][_0x4299d0(0x1bf)]({'where':{'username':_0x6ff920},'select':{'id':!![],'name':!![],'username':!![],'status':!![],'publicKey':!![],'secretKey':!![]}});if(!_0x59c84a){const _0x2e1472=_0x4299d0(0x2bc)+_0x6ff920+_0x4299d0(0x2fd)+_0x4299d0(0x19f)+_0x4299d0(0x2d9);await this[_0x4299d0(0x2eb)]?.[_0x4299d0(0x138)](_0xaa47a7,_0x2e1472,{'parse_mode':_0x4299d0(0x10f)});return;}if(_0x59c84a[_0x4299d0(0x2f9)]!==_0x4299d0(0x1de)){await this['bot']?.['sendMessage'](_0xaa47a7,_0x4299d0(0xfb)+_0x6ff920+_0x4299d0(0x2bf)+_0x4299d0(0x207),{'parse_mode':_0x4299d0(0x10f)});return;}if(_0x59c84a['publicKey']!==_0x3b6e99&&_0x59c84a['secretKey']!==_0x3b6e99){await this[_0x4299d0(0x2eb)]?.[_0x4299d0(0x138)](_0xaa47a7,'‚ùå\x20API\x20key\x20does\x20not\x20match\x20shop\x20`'+_0x6ff920+_0x4299d0(0x245)+'Check\x20the\x20key\x20and\x20try\x20again.\x0a\x0a'+'Expected\x20key\x20format:\x20`pk_...`\x20or\x20`sk_...`',{'parse_mode':'Markdown'});return;}const _0x4ef9b2=await database_1['default'][_0x4299d0(0x13c)][_0x4299d0(0x229)]({'where':{'shopId':_0x59c84a['id'],'isVerified':!![]}});if(_0x4ef9b2>=0x5){await this[_0x4299d0(0x2eb)]?.[_0x4299d0(0x138)](_0xaa47a7,_0x4299d0(0x2cc)+_0x6ff920+_0x4299d0(0x245)+_0x4299d0(0x31d),{'parse_mode':_0x4299d0(0x10f)});return;}await database_1[_0x4299d0(0x194)][_0x4299d0(0x13c)]['update']({'where':{'telegramId':_0x2141d3},'data':{'shopId':_0x59c84a['id'],'isVerified':!![]}}),await this[_0x4299d0(0x2eb)]?.[_0x4299d0(0x138)](_0xaa47a7,_0x4299d0(0x228)+_0x4299d0(0x2f1)+(_0x4299d0(0x251)+_0x59c84a[_0x4299d0(0x2fb)]+'*\x0a')+(_0x4299d0(0x2d4)+_0x59c84a[_0x4299d0(0x277)]+_0x4299d0(0x1da))+_0x4299d0(0x1b3)+_0x4299d0(0x19d)+_0x4299d0(0x16c)+'‚Ä¢\x20Payouts\x0a'+_0x4299d0(0x297),{'parse_mode':'Markdown','reply_markup':{'inline_keyboard':[[{'text':'üìä\x20Statistics','callback_data':_0x4299d0(0x215)},{'text':_0x4299d0(0x213),'callback_data':_0x4299d0(0x145)}],[{'text':_0x4299d0(0x301),'callback_data':'cmd_payment_links'},{'text':_0x4299d0(0x2b7),'callback_data':_0x4299d0(0x313)}],[{'text':_0x4299d0(0x2b9),'callback_data':_0x4299d0(0x1aa)},{'text':_0x4299d0(0x12e),'callback_data':_0x4299d0(0x2b3)}]]}}),console['log'](_0x4299d0(0x2ac)+_0x2141d3+'\x20verified\x20for\x20shop\x20'+_0x59c84a['username']+'\x20via\x20single-line\x20input');}catch(_0xb1c2d7){console[_0x4299d0(0x212)](_0x4299d0(0x2de),_0xb1c2d7),await this[_0x4299d0(0x2eb)]?.[_0x4299d0(0x138)](_0xaa47a7,_0x4299d0(0x17e));}}async[a87_0x18e69b(0x306)](_0x3c129d,_0x32e783,_0x232a87){const _0x8c31c1=a87_0x18e69b;if(!this[_0x8c31c1(0x2eb)]){console[_0x8c31c1(0x2b2)](_0x8c31c1(0x17c));return;}try{const _0x3338a6=await database_1[_0x8c31c1(0x194)][_0x8c31c1(0x13c)][_0x8c31c1(0x17d)]({'where':{'shopId':_0x3c129d,'isVerified':!![]}});if(_0x3338a6[_0x8c31c1(0x13d)]===0x0){console[_0x8c31c1(0x225)](_0x8c31c1(0x2d6)+_0x3c129d);return;}const _0x531d29=_0x3338a6[_0x8c31c1(0x165)](async _0x32ac4b=>{const _0x216a54=_0x8c31c1;try{await this[_0x216a54(0x2eb)]?.['sendMessage'](_0x32ac4b[_0x216a54(0x2a5)],_0x32e783,_0x232a87),console['log'](_0x216a54(0x2b0)+_0x32ac4b[_0x216a54(0x2a5)]);}catch(_0x4ede9b){console['error'](_0x216a54(0x235)+_0x32ac4b[_0x216a54(0x2a5)]+':',_0x4ede9b),_0x4ede9b instanceof Error&&(_0x4ede9b['message'][_0x216a54(0x175)]('blocked')||_0x4ede9b[_0x216a54(0x2e0)]['includes']('chat\x20not\x20found')||_0x4ede9b[_0x216a54(0x2e0)][_0x216a54(0x175)](_0x216a54(0x1bc)))&&(await database_1[_0x216a54(0x194)][_0x216a54(0x13c)][_0x216a54(0x112)]({'where':{'id':_0x32ac4b['id']},'data':{'isVerified':![]}}),console[_0x216a54(0x225)]('User\x20'+_0x32ac4b[_0x216a54(0x2a5)]+'\x20marked\x20as\x20unverified\x20due\x20to\x20delivery\x20failure'));}});await Promise[_0x8c31c1(0x2a4)](_0x531d29);}catch(_0x398c5a){console[_0x8c31c1(0x212)](_0x8c31c1(0x1b5),_0x398c5a);}}async[a87_0x18e69b(0x15b)](_0x411728,_0x53169a,_0x3675dc){const _0x3517aa=a87_0x18e69b,_0x6c8436={'created':'üÜï','paid':'‚úÖ','failed':'‚ùå','expired':'‚è∞','refund':'üîÑ','chargeback':'‚ö†Ô∏è','processing':'‚öôÔ∏è'},_0x3a9e67={'created':_0x3517aa(0x2e8),'paid':_0x3517aa(0x323),'failed':_0x3517aa(0x180),'expired':_0x3517aa(0x10a),'refund':_0x3517aa(0x10e),'chargeback':_0x3517aa(0x1bb),'processing':_0x3517aa(0x2a7)},_0x4563b2=_0x6c8436[_0x3675dc],_0x35da30=_0x3a9e67[_0x3675dc],_0x3e9118=(0x0,gateway_1[_0x3517aa(0x24f)])(_0x53169a[_0x3517aa(0x1cf)]);console['log'](_0x3517aa(0x1d6)+_0x53169a[_0x3517aa(0x1cf)]+'\x22\x20->\x20display\x20\x22'+_0x3e9118+'\x22');let _0xa0e681=_0x4563b2+'\x20*'+_0x35da30+'*\x0a\x0a'+(_0x3517aa(0x1d3)+_0x53169a[_0x3517aa(0x290)]+'\x20'+_0x53169a[_0x3517aa(0x166)]+'*\x0a')+(_0x3517aa(0x16b)+(_0x53169a[_0x3517aa(0x19e)]||_0x53169a['id'])+'`\x0a')+(_0x3517aa(0x29a)+_0x53169a['id']+'`\x0a')+(_0x3517aa(0x2d3)+_0x3e9118+'`\x0a')+('üìÖ\x20Date:\x20'+new Date(_0x53169a[_0x3517aa(0x2f5)])[_0x3517aa(0x116)](_0x3517aa(0x1db))+'\x0a');if(_0x53169a[_0x3517aa(0x1a7)]||_0x53169a[_0x3517aa(0x21f)]||_0x53169a[_0x3517aa(0x291)]||_0x53169a[_0x3517aa(0x11a)]||_0x53169a['customerUa']){_0xa0e681+=_0x3517aa(0xe9);_0x53169a[_0x3517aa(0x1a7)]&&(_0xa0e681+=_0x3517aa(0x25e)+_0x53169a[_0x3517aa(0x1a7)]+'`\x0a');_0x53169a[_0x3517aa(0x21f)]&&(_0xa0e681+=_0x3517aa(0x1d1)+_0x53169a[_0x3517aa(0x21f)]+'`\x0a');_0x53169a[_0x3517aa(0x291)]&&(_0xa0e681+='üè¶\x20IBAN:\x20`'+_0x53169a['remitterIban']+'`\x0a');_0x53169a[_0x3517aa(0x11a)]&&(_0xa0e681+=_0x3517aa(0x102)+_0x53169a[_0x3517aa(0x11a)]+'`\x0a');if(_0x53169a[_0x3517aa(0x28f)]){const _0x574a3b=_0x53169a[_0x3517aa(0x28f)]['length']>0x32?_0x53169a[_0x3517aa(0x28f)][_0x3517aa(0x28a)](0x0,0x32)+_0x3517aa(0x2be):_0x53169a[_0x3517aa(0x28f)];_0xa0e681+=_0x3517aa(0x193)+_0x574a3b+'`\x0a';}}_0x3675dc===_0x3517aa(0x1e5)&&_0x53169a[_0x3517aa(0x14a)]&&(_0xa0e681+=_0x3517aa(0x321)+_0x53169a[_0x3517aa(0x14a)]+'\x20USDT*\x0a'),_0x3675dc===_0x3517aa(0x29d)&&(_0xa0e681+=_0x3517aa(0x15a)),_0x53169a[_0x3517aa(0x27e)]&&(_0xa0e681+=_0x3517aa(0x265)+_0x53169a[_0x3517aa(0x27e)]+'\x0a'),await this['sendShopNotification'](_0x411728,_0xa0e681,{'parse_mode':'Markdown'});}async[a87_0x18e69b(0x158)](_0xbc024a,_0x5683d0){const _0x33b33a=a87_0x18e69b,_0x23b73a=new Date(_0x5683d0[_0x33b33a(0x2f5)])[_0x33b33a(0x116)](_0x33b33a(0x1db),{'year':'numeric','month':_0x33b33a(0x126),'day':_0x33b33a(0x126),'hour':_0x33b33a(0x126),'minute':_0x33b33a(0x126),'second':_0x33b33a(0x126)}),_0x337d1b='üí∏\x20*New\x20Payout*\x0a\x0a'+('üìÖ\x20*Payout\x20Date:*\x20'+_0x23b73a+'\x0a')+(_0x33b33a(0x24e)+_0x5683d0[_0x33b33a(0x290)]+'\x20USD\x0a')+(_0x33b33a(0x253)+(_0x5683d0['period']||_0x33b33a(0x115))+'\x0a')+(_0x33b33a(0x2a8)+(_0x5683d0['network']||_0x33b33a(0x115))+'\x0a')+(_0x33b33a(0x24d)+(_0x5683d0['wallet']||'Not\x20specified')+'`\x0a')+(_0x5683d0[_0x33b33a(0x223)]?_0x33b33a(0x134)+_0x5683d0[_0x33b33a(0x223)]+'`':'üîó\x20*Transaction\x20Link:*\x20Pending');await this[_0x33b33a(0x306)](_0xbc024a,_0x337d1b,{'parse_mode':'Markdown'});}async[a87_0x18e69b(0x260)](_0x3b95e7,_0x306e9c){const _0x32c7a5=a87_0x18e69b;try{const _0x21be80=await database_1[_0x32c7a5(0x194)][_0x32c7a5(0x2ca)][_0x32c7a5(0x1bf)]({'where':{'shopId':_0x3b95e7},'select':{'notificationLogin':!![]}});if(!_0x21be80?.[_0x32c7a5(0x163)]){console[_0x32c7a5(0x225)](_0x32c7a5(0x27a)+_0x3b95e7);return;}const _0x11f292=_0x306e9c[_0x32c7a5(0x2a1)]?'üîê':'üö®',_0x1e54dc=_0x306e9c[_0x32c7a5(0x2a1)]?_0x32c7a5(0x270):_0x32c7a5(0x1a6);let _0xe7140=_0x11f292+'\x20*'+_0x1e54dc+'*\x0a\x0a'+(_0x32c7a5(0x2d4)+_0x306e9c['username']+'`\x0a')+(_0x32c7a5(0x1ab)+_0x306e9c[_0x32c7a5(0x324)][_0x32c7a5(0x116)](_0x32c7a5(0x1db))+'\x0a');_0x306e9c[_0x32c7a5(0x132)]&&(_0xe7140+=_0x32c7a5(0x2aa)+_0x306e9c[_0x32c7a5(0x132)]+'`\x0a');_0x306e9c[_0x32c7a5(0x239)]&&(_0xe7140+='üåç\x20Country:\x20'+_0x306e9c[_0x32c7a5(0x239)]+'\x0a');if(_0x306e9c[_0x32c7a5(0x1e6)]){const _0x42f7a8=_0x306e9c['userAgent']['length']>0x32?_0x306e9c['userAgent']['substring'](0x0,0x32)+_0x32c7a5(0x2be):_0x306e9c[_0x32c7a5(0x1e6)];_0xe7140+=_0x32c7a5(0x193)+_0x42f7a8+'`\x0a';}!_0x306e9c[_0x32c7a5(0x2a1)]&&(_0xe7140+=_0x32c7a5(0x314)),await this[_0x32c7a5(0x306)](_0x3b95e7,_0xe7140,{'parse_mode':_0x32c7a5(0x10f)}),console[_0x32c7a5(0x225)](_0x32c7a5(0x2c2)+_0x3b95e7+':\x20'+(_0x306e9c['success']?_0x32c7a5(0x2a1):_0x32c7a5(0x2ed)));}catch(_0x2ec873){console[_0x32c7a5(0x212)](_0x32c7a5(0x318),_0x2ec873);}}async['sendApiErrorNotification'](_0x4d793d,_0x4465a2){const _0x2473db=a87_0x18e69b;try{const _0x543e70=await database_1[_0x2473db(0x194)][_0x2473db(0x2ca)][_0x2473db(0x1bf)]({'where':{'shopId':_0x4d793d},'select':{'notificationApiError':!![]}});if(!_0x543e70?.['notificationApiError']){console[_0x2473db(0x225)](_0x2473db(0x1ca)+_0x4d793d);return;}let _0x214643=_0x2473db(0x30a)+(_0x2473db(0x18e)+_0x4465a2[_0x2473db(0x1fb)]+'\x20'+_0x4465a2[_0x2473db(0x2f3)]+'`\x0a')+(_0x2473db(0x1ab)+_0x4465a2['timestamp'][_0x2473db(0x116)](_0x2473db(0x1db))+'\x0a');_0x4465a2[_0x2473db(0x169)]&&(_0x214643+='üìä\x20Error\x20code:\x20`'+_0x4465a2[_0x2473db(0x169)]+'`\x0a'),_0x214643+=_0x2473db(0x30d)+_0x4465a2[_0x2473db(0x146)]+'`\x0a',_0x4465a2[_0x2473db(0x129)]&&(_0x214643+='üÜî\x20Request\x20ID:\x20`'+_0x4465a2[_0x2473db(0x129)]+'`\x0a'),_0x214643+='\x0aüí°\x20Check\x20your\x20request\x20or\x20contact\x20support.',await this[_0x2473db(0x306)](_0x4d793d,_0x214643,{'parse_mode':_0x2473db(0x10f)}),console['log'](_0x2473db(0x2c8)+_0x4d793d+':\x20'+_0x4465a2[_0x2473db(0x2f3)]);}catch(_0x435b56){console['error'](_0x2473db(0x27c),_0x435b56);}}async['sendCustomNotification'](_0x5e0d65,_0x4a6fd7,_0x3d1148){const _0xb251c0=a87_0x18e69b;let _0x30e244='üîî\x20*'+_0x4a6fd7+_0xb251c0(0x2fc);for(const [_0x3fd462,_0xde751f]of Object[_0xb251c0(0x238)](_0x3d1148)){_0xde751f!==null&&_0xde751f!==undefined&&(_0x30e244+=_0x3fd462+_0xb251c0(0x294)+_0xde751f+'`\x0a');}await this['sendShopNotification'](_0x5e0d65,_0x30e244,{'parse_mode':'Markdown'});}async[a87_0x18e69b(0x106)](_0x14c61a){const _0x473e9b=a87_0x18e69b;try{console[_0x473e9b(0x225)](_0x473e9b(0x28e)+_0x14c61a[_0x473e9b(0x28a)](0x0,0x32)+'...');const _0x296c2d=await database_1[_0x473e9b(0x194)][_0x473e9b(0x13c)][_0x473e9b(0x17d)]({'select':{'telegramId':!![]}});if(_0x296c2d['length']===0x0){console[_0x473e9b(0x225)](_0x473e9b(0x139));return;}for(const _0xed269e of _0x296c2d){try{await this[_0x473e9b(0x2eb)]?.['sendMessage'](_0xed269e['telegramId'],_0x14c61a,{'parse_mode':_0x473e9b(0x10f)});}catch(_0x297caa){console['error']('‚ùå\x20Failed\x20to\x20send\x20message\x20to\x20user\x20'+_0xed269e['telegramId']+':',_0x297caa);}}console['log'](_0x473e9b(0x296)+_0x296c2d[_0x473e9b(0x13d)]+_0x473e9b(0x221));}catch(_0x31c612){console[_0x473e9b(0x212)](_0x473e9b(0x14e),_0x31c612);}}['getBotInfo'](){const _0x42ad32=a87_0x18e69b;return{'isActive':!!this['bot'],'username':this[_0x42ad32(0x22a)]};}async[a87_0x18e69b(0x2c3)](_0x1b4ac2,_0x233fae,_0x44d2f1,_0x11477e){const _0x56b1b7=a87_0x18e69b;try{if(!this[_0x56b1b7(0x2eb)])return console['error'](_0x56b1b7(0x2e1)),![];const _0x5ad571=await database_1[_0x56b1b7(0x194)]['telegramUser'][_0x56b1b7(0x17d)]({'where':{'shopId':_0x1b4ac2,'isVerified':!![]},'select':{'telegramId':!![]}});if(_0x5ad571[_0x56b1b7(0x13d)]===0x0)return console[_0x56b1b7(0x212)](_0x56b1b7(0x1ff)+_0x1b4ac2),![];let _0x48edce=0x0;for(const _0xe541a6 of _0x5ad571){try{await this['bot'][_0x56b1b7(0x21e)](_0xe541a6[_0x56b1b7(0x2a5)],_0x233fae,{},{'filename':_0x44d2f1,'contentType':_0x44d2f1[_0x56b1b7(0x1ae)](_0x56b1b7(0x292))?_0x56b1b7(0x1fe):_0x44d2f1[_0x56b1b7(0x1ae)](_0x56b1b7(0x1b4))||_0x44d2f1[_0x56b1b7(0x1ae)](_0x56b1b7(0x16d))?_0x56b1b7(0x2b6):_0x44d2f1[_0x56b1b7(0x1ae)](_0x56b1b7(0x268))?_0x56b1b7(0x20e):_0x56b1b7(0x22d)}),_0x11477e&&await this[_0x56b1b7(0x2eb)][_0x56b1b7(0x138)](_0xe541a6['telegramId'],_0x11477e),_0x48edce++;}catch(_0xc141d4){console[_0x56b1b7(0x212)](_0x56b1b7(0x19a)+_0xe541a6[_0x56b1b7(0x2a5)]+':',_0xc141d4);}}return console['log']('‚úÖ\x20File\x20sent\x20to\x20'+_0x48edce+'/'+_0x5ad571[_0x56b1b7(0x13d)]+'\x20users\x20of\x20shop\x20'+_0x1b4ac2+':\x20'+_0x44d2f1),_0x48edce>0x0;}catch(_0x54a6f5){return console['error'](_0x56b1b7(0x188),_0x54a6f5),![];}}async[a87_0x18e69b(0x267)](_0x840735,_0x238538){const _0x5a1c27=a87_0x18e69b;try{if(!this[_0x5a1c27(0x2eb)])return console['error']('‚ùå\x20Telegram\x20bot\x20not\x20initialized'),![];return await this[_0x5a1c27(0x2eb)][_0x5a1c27(0x138)](_0x840735,_0x238538),console[_0x5a1c27(0x225)](_0x5a1c27(0x304)+_0x840735),!![];}catch(_0x1b1f4d){return console[_0x5a1c27(0x212)](_0x5a1c27(0x1c9),_0x1b1f4d),![];}}async[a87_0x18e69b(0x2a6)](_0x495652,_0x3b7f46,_0x40a336,_0x377371){const _0x18d14b=a87_0x18e69b;try{if(!this[_0x18d14b(0x2eb)])return console['error'](_0x18d14b(0x2e1)),![];return await this['bot'][_0x18d14b(0x21e)](_0x495652,_0x3b7f46,{},{'filename':_0x40a336,'contentType':_0x40a336['endsWith'](_0x18d14b(0x292))?'image/png':_0x40a336[_0x18d14b(0x1ae)](_0x18d14b(0x1b4))||_0x40a336[_0x18d14b(0x1ae)](_0x18d14b(0x16d))?_0x18d14b(0x2b6):_0x40a336[_0x18d14b(0x1ae)](_0x18d14b(0x268))?_0x18d14b(0x20e):'application/octet-stream'}),_0x377371&&await this['bot'][_0x18d14b(0x138)](_0x495652,_0x377371),console[_0x18d14b(0x225)](_0x18d14b(0x18d)+_0x495652+':\x20'+_0x40a336),!![];}catch(_0xaaef83){return console['error'](_0x18d14b(0x299),_0xaaef83),![];}}async['handlePaymentLinkFlow'](_0x3442cc,_0x34b527,_0x5d20b1,_0x246f41){const _0x5a5b06=a87_0x18e69b,_0x3c133f=this[_0x5a5b06(0x2bb)][_0x5a5b06(0x1e4)](_0x34b527)||{};try{if(_0x5d20b1==='pl_cancel'){this[_0x5a5b06(0x2bb)]['delete'](_0x34b527),await this[_0x5a5b06(0x2eb)]?.[_0x5a5b06(0x2dd)]('‚ùå\x20Cancelled.',{'chat_id':_0x3442cc,'message_id':_0x246f41});return;}if(_0x5d20b1===_0x5a5b06(0x10c)){await this[_0x5a5b06(0x263)](_0x3442cc,_0x34b527,_0x246f41,0x1);return;}if(_0x5d20b1['startsWith'](_0x5a5b06(0x25d))){const _0x54582a=parseInt(_0x5d20b1[_0x5a5b06(0x18a)](_0x5a5b06(0x25d),''));await this[_0x5a5b06(0x263)](_0x3442cc,_0x34b527,_0x246f41,_0x54582a);return;}if(_0x5d20b1==='pl_create_new'){const _0x5883d0=await database_1['default'][_0x5a5b06(0x13c)][_0x5a5b06(0x1bf)]({'where':{'telegramId':_0x34b527},'include':{'shop':!![]}});if(!_0x5883d0?.['shop']?.[_0x5a5b06(0x1d5)]){await this['bot']?.[_0x5a5b06(0x2dd)](_0x5a5b06(0x236),{'chat_id':_0x3442cc,'message_id':_0x246f41});return;}let _0x13d503;try{_0x13d503=JSON[_0x5a5b06(0x208)](_0x5883d0[_0x5a5b06(0xf7)][_0x5a5b06(0x1d5)]);}catch{_0x13d503=_0x5883d0['shop']['paymentGateways'][_0x5a5b06(0x273)](',')[_0x5a5b06(0x1cb)](_0x4ee4df=>_0x4ee4df[_0x5a5b06(0x22e)]());}if(_0x13d503[_0x5a5b06(0x13d)]===0x0){await this[_0x5a5b06(0x2eb)]?.[_0x5a5b06(0x2dd)]('‚ùå\x20No\x20active\x20gateways\x20found.\x20Please\x20enable\x20at\x20least\x20one\x20gateway\x20in\x20the\x20admin\x20panel.',{'chat_id':_0x3442cc,'message_id':_0x246f41});return;}this[_0x5a5b06(0x2bb)][_0x5a5b06(0x1d7)](_0x34b527,{'step':_0x5a5b06(0x1cf)});const _0x1a2528=_0x13d503[_0x5a5b06(0x165)](_0x501af3=>{const _0x399540=_0x5a5b06,_0x222b06=Object[_0x399540(0x23a)](gateway_1[_0x399540(0x305)])['find'](_0x5b618d=>gateway_1[_0x399540(0x305)][_0x5b618d]===_0x501af3)||_0x501af3;return[{'text':_0x399540(0x241)+_0x222b06,'callback_data':_0x399540(0x10d)+_0x222b06}];});await this[_0x5a5b06(0x2eb)]?.[_0x5a5b06(0x2dd)](_0x5a5b06(0x157),{'chat_id':_0x3442cc,'message_id':_0x246f41,'parse_mode':_0x5a5b06(0x10f),'reply_markup':{'inline_keyboard':[..._0x1a2528,[{'text':_0x5a5b06(0x140),'callback_data':'pl_cancel'}]]}});return;}if(_0x5d20b1[_0x5a5b06(0x186)](_0x5a5b06(0x10d))){const _0x668557=_0x5d20b1[_0x5a5b06(0x18a)](_0x5a5b06(0x10d),'');_0x3c133f['gateway']=_0x668557,_0x3c133f['step']=_0x5a5b06(0xef),this[_0x5a5b06(0x2bb)][_0x5a5b06(0x1d7)](_0x34b527,_0x3c133f),await this[_0x5a5b06(0x2eb)]?.[_0x5a5b06(0x2dd)](_0x5a5b06(0x2cf)+_0x5a5b06(0x257),{'chat_id':_0x3442cc,'message_id':_0x246f41,'parse_mode':_0x5a5b06(0x10f),'reply_markup':{'inline_keyboard':[[{'text':_0x5a5b06(0x13b),'callback_data':_0x5a5b06(0x11d)}],[{'text':_0x5a5b06(0x2a2),'callback_data':_0x5a5b06(0x231)}],[{'text':_0x5a5b06(0x140),'callback_data':_0x5a5b06(0x2c1)}]]}});return;}if(_0x5d20b1[_0x5a5b06(0x186)](_0x5a5b06(0x10b))){const _0x1c6d50=_0x5d20b1[_0x5a5b06(0x18a)](_0x5a5b06(0x10b),'')['toUpperCase']();_0x3c133f['type']=_0x1c6d50,_0x3c133f[_0x5a5b06(0x1a2)]=_0x5a5b06(0x166),_0x3c133f[_0x5a5b06(0x295)]=0x0,this[_0x5a5b06(0x2bb)][_0x5a5b06(0x1d7)](_0x34b527,_0x3c133f),await this[_0x5a5b06(0x2ec)](_0x3442cc,_0x246f41,_0x3c133f,0x0);return;}if(_0x5d20b1['startsWith'](_0x5a5b06(0x1af))){const _0x116c8c=parseInt(_0x5d20b1[_0x5a5b06(0x18a)]('pl_curr_page_',''));await this[_0x5a5b06(0x2ec)](_0x3442cc,_0x246f41,_0x3c133f,_0x116c8c);return;}if(_0x5d20b1[_0x5a5b06(0x186)]('pl_curr_')){const _0x17f137=_0x5d20b1[_0x5a5b06(0x18a)](_0x5a5b06(0x2fa),'');_0x3c133f[_0x5a5b06(0x166)]=_0x17f137,_0x3c133f[_0x5a5b06(0x1a2)]=_0x5a5b06(0x290),this['paymentLinkSessions'][_0x5a5b06(0x1d7)](_0x34b527,_0x3c133f),await this[_0x5a5b06(0x2eb)]?.[_0x5a5b06(0x2dd)]('üîó\x20*Create\x20Payment\x20Link*\x0a\x0a'+_0x5a5b06(0x230)+('Please\x20send\x20the\x20amount\x20in\x20'+_0x17f137+_0x5a5b06(0x1c0)),{'chat_id':_0x3442cc,'message_id':_0x246f41,'parse_mode':'Markdown'});return;}}catch(_0x4cd106){console['error'](_0x5a5b06(0x283),_0x4cd106),await this[_0x5a5b06(0x2eb)]?.[_0x5a5b06(0x138)](_0x3442cc,'‚ùå\x20An\x20error\x20occurred.\x20Please\x20try\x20again.'),this['paymentLinkSessions'][_0x5a5b06(0x28d)](_0x34b527);}}async['showPaymentLinksList'](_0x36c616,_0x173370,_0x3782f5,_0x30ee76=0x1){const _0x309d8f=a87_0x18e69b;try{const _0x4c30b6=await database_1[_0x309d8f(0x194)][_0x309d8f(0x13c)]['findUnique']({'where':{'telegramId':_0x173370},'include':{'shop':!![]}});if(!_0x4c30b6?.[_0x309d8f(0x200)]){await this[_0x309d8f(0x2eb)]?.[_0x309d8f(0x138)](_0x36c616,'‚ùå\x20Shop\x20not\x20found.');return;}const _0x3ae556=0x5,_0x2189bd=(_0x30ee76-0x1)*_0x3ae556,[_0xc78437,_0x3fa993]=await Promise[_0x309d8f(0x2db)]([database_1[_0x309d8f(0x194)][_0x309d8f(0x252)]['findMany']({'where':{'shopId':_0x4c30b6[_0x309d8f(0x200)]},'orderBy':{'createdAt':_0x309d8f(0x13f)},'take':_0x3ae556,'skip':_0x2189bd}),database_1[_0x309d8f(0x194)]['paymentLink'][_0x309d8f(0x229)]({'where':{'shopId':_0x4c30b6[_0x309d8f(0x200)]}})]),_0xba6f72=Math[_0x309d8f(0x184)](_0x3fa993/_0x3ae556);if(_0xc78437[_0x309d8f(0x13d)]===0x0){const _0x2a2783=_0x309d8f(0x18c);_0x3782f5?await this[_0x309d8f(0x2eb)]?.['editMessageText'](_0x2a2783,{'chat_id':_0x36c616,'message_id':_0x3782f5,'parse_mode':_0x309d8f(0x167),'reply_markup':{'inline_keyboard':[[{'text':_0x309d8f(0x218),'callback_data':'pl_create_new'}]]}}):await this[_0x309d8f(0x2eb)]?.['sendMessage'](_0x36c616,_0x2a2783,{'parse_mode':_0x309d8f(0x167),'reply_markup':{'inline_keyboard':[[{'text':'‚ûï\x20Create\x20New\x20Link','callback_data':'pl_create_new'}]]}});return;}let _0x4e9601='üìã\x20*Payment\x20Links*\x20\x5c(Page\x20'+_0x30ee76+'/'+_0xba6f72+_0x309d8f(0x26e);_0xc78437[_0x309d8f(0x25c)]((_0x4b19b5,_0x13f88f)=>{const _0x4596a8=_0x309d8f,_0x5f482f=_0x2189bd+_0x13f88f+0x1,_0x346eeb=_0x4b19b5[_0x4596a8(0x290)]?_0x4b19b5['amount']+'\x20'+_0x4b19b5['currency']:_0x4596a8(0x152),_0x25244f=_0x4b19b5[_0x4596a8(0x2f9)]===_0x4596a8(0x1de)?'‚úÖ':'‚ùå',_0x38a806=(process.env.FRONTEND_URL||_0x4596a8(0x21a))+_0x4596a8(0x2d1)+_0x4b19b5['id'],_0x55a3f2=_0x38a806[_0x4596a8(0x18a)](/\./g,'\x5c.')['replace'](/-/g,'\x5c-')['replace'](/\//g,'\x5c/');_0x4e9601+=_0x5f482f+_0x4596a8(0x1dc)+_0x25244f+'\x20*'+_0x346eeb+'*\x0a',_0x4e9601+=_0x4596a8(0x108)+_0x4b19b5[_0x4596a8(0x1cf)]+'\x20\x5c|\x20Type:\x20'+_0x4b19b5[_0x4596a8(0xef)]+'\x0a',_0x4e9601+='\x20\x20\x20[LINK]('+_0x55a3f2+_0x4596a8(0x22f);});const _0xe11673=[];_0x30ee76>0x1&&_0xe11673[_0x309d8f(0x196)]({'text':_0x309d8f(0x224),'callback_data':'pl_page_'+(_0x30ee76-0x1)});_0x30ee76<_0xba6f72&&_0xe11673[_0x309d8f(0x196)]({'text':_0x309d8f(0x197),'callback_data':_0x309d8f(0x25d)+(_0x30ee76+0x1)});const _0x54d11f=[];_0xe11673[_0x309d8f(0x13d)]>0x0&&_0x54d11f[_0x309d8f(0x196)](_0xe11673),_0x54d11f[_0x309d8f(0x196)]([{'text':_0x309d8f(0x218),'callback_data':'pl_create_new'}]),_0x54d11f['push']([{'text':_0x309d8f(0x156),'callback_data':_0x309d8f(0x2c1)}]),_0x3782f5?await this['bot']?.['editMessageText'](_0x4e9601,{'chat_id':_0x36c616,'message_id':_0x3782f5,'parse_mode':_0x309d8f(0x167),'reply_markup':{'inline_keyboard':_0x54d11f}}):await this['bot']?.[_0x309d8f(0x138)](_0x36c616,_0x4e9601,{'parse_mode':_0x309d8f(0x167),'reply_markup':{'inline_keyboard':_0x54d11f}});}catch(_0x420754){console[_0x309d8f(0x212)](_0x309d8f(0x29b),_0x420754),await this[_0x309d8f(0x2eb)]?.[_0x309d8f(0x138)](_0x36c616,'‚ùå\x20An\x20error\x20occurred\x20while\x20loading\x20payment\x20links.');}}async[a87_0x18e69b(0x2ec)](_0x335179,_0x22b0ae,_0x5c9de1,_0x56fe3f){const _0x3fc950=a87_0x18e69b,_0x221252=this[_0x3fc950(0x181)](_0x5c9de1[_0x3fc950(0x1cf)]),_0x52f4e0=0xf,_0x271925=Math['ceil'](_0x221252[_0x3fc950(0x13d)]/_0x52f4e0),_0x10bdee=_0x56fe3f*_0x52f4e0,_0x221a33=_0x10bdee+_0x52f4e0,_0x40f923=_0x221252['slice'](_0x10bdee,_0x221a33),_0x422684=[];for(let _0x2244f4=0x0;_0x2244f4<_0x40f923[_0x3fc950(0x13d)];_0x2244f4+=0x3){const _0xee408=_0x40f923[_0x3fc950(0x2ab)](_0x2244f4,_0x2244f4+0x3)['map'](_0x3da9b7=>({'text':this['getCurrencyFlag'](_0x3da9b7)+'\x20'+_0x3da9b7,'callback_data':_0x3fc950(0x2fa)+_0x3da9b7}));_0x422684['push'](_0xee408);}const _0x5e7c75=[];_0x56fe3f>0x0&&_0x5e7c75['push']({'text':_0x3fc950(0x224),'callback_data':_0x3fc950(0x1af)+(_0x56fe3f-0x1)});_0x56fe3f<_0x271925-0x1&&_0x5e7c75[_0x3fc950(0x196)]({'text':'Next\x20‚û°Ô∏è','callback_data':_0x3fc950(0x1af)+(_0x56fe3f+0x1)});const _0x447198=[..._0x422684,..._0x5e7c75['length']>0x0?[_0x5e7c75]:[],[{'text':_0x3fc950(0x140),'callback_data':_0x3fc950(0x2c1)}]];await this[_0x3fc950(0x2eb)]?.[_0x3fc950(0x2dd)]('üîó\x20*Create\x20Payment\x20Link*\x0a\x0a'+_0x3fc950(0x274)+(_0x3fc950(0x214)+(_0x56fe3f+0x1)+'/'+_0x271925),{'chat_id':_0x335179,'message_id':_0x22b0ae,'parse_mode':_0x3fc950(0x10f),'reply_markup':{'inline_keyboard':_0x447198}});}[a87_0x18e69b(0x181)](_0xc949b){const _0x3621de=a87_0x18e69b,_0xcd6ef5={'1000':[_0x3621de(0x1d4),'GBP',_0x3621de(0x13a),'BRL',_0x3621de(0x24c),_0x3621de(0x315),_0x3621de(0x29c),_0x3621de(0x1ad),_0x3621de(0x2cd),'DKK','PLN',_0x3621de(0x22b),_0x3621de(0x16a),'RON',_0x3621de(0x1cd),_0x3621de(0x1c6),_0x3621de(0x303),_0x3621de(0x2d2),_0x3621de(0x162),_0x3621de(0x1df),_0x3621de(0x256),_0x3621de(0x1ed),'ZAR',_0x3621de(0x1f4),_0x3621de(0x2ff),_0x3621de(0x1d9),_0x3621de(0xee),_0x3621de(0x23d),_0x3621de(0x23c),_0x3621de(0x1b9),'PKR',_0x3621de(0x107),'LKR',_0x3621de(0x1fc),'THB',_0x3621de(0x113),_0x3621de(0x195),_0x3621de(0x2c4),_0x3621de(0x204),_0x3621de(0x25b),_0x3621de(0x322),_0x3621de(0x1c3),'KRW',_0x3621de(0x26b)],'0001':[_0x3621de(0x302),_0x3621de(0x1d4),_0x3621de(0x1ce),_0x3621de(0x24c),_0x3621de(0x217),'CHF',_0x3621de(0x315),_0x3621de(0x29c),_0x3621de(0x2d8),_0x3621de(0x1ad),_0x3621de(0x2cd),_0x3621de(0x1b0),_0x3621de(0x247),_0x3621de(0x22b),'HUF',_0x3621de(0x13a),_0x3621de(0x23b),_0x3621de(0x1cd),_0x3621de(0x1c6),_0x3621de(0x17b),'BRL','MXN','ARS',_0x3621de(0x1b9),_0x3621de(0x266),_0x3621de(0x25b),_0x3621de(0x322),'THB',_0x3621de(0x2c4),_0x3621de(0x204),_0x3621de(0x195),_0x3621de(0x113),_0x3621de(0x1e8),_0x3621de(0x1f4),_0x3621de(0x2a9),'SAR',_0x3621de(0x2af),_0x3621de(0x2e5),'BHD',_0x3621de(0xed),_0x3621de(0x2ef),_0x3621de(0x12f),'ILS',_0x3621de(0x1fd),_0x3621de(0x2f7),'AFN',_0x3621de(0x2fe),_0x3621de(0x107),_0x3621de(0x179),_0x3621de(0x1fc),_0x3621de(0x246),_0x3621de(0xfa),_0x3621de(0x1d8),_0x3621de(0x1d0),_0x3621de(0x1a8),_0x3621de(0x27f),'TMT',_0x3621de(0x19b),'GEL',_0x3621de(0x23f),_0x3621de(0x1bd),_0x3621de(0x2e4),_0x3621de(0x21c),_0x3621de(0x18f),_0x3621de(0x11b),'BAM',_0x3621de(0x103),_0x3621de(0x11f),_0x3621de(0xf9),_0x3621de(0x2df),_0x3621de(0x31b),_0x3621de(0xea),_0x3621de(0x30c),_0x3621de(0x130),_0x3621de(0x17f),'TOP',_0x3621de(0x2e7),_0x3621de(0x26b)],'0010':[_0x3621de(0x302),_0x3621de(0x1d4),'GBP',_0x3621de(0x24c),_0x3621de(0x217),_0x3621de(0x123),_0x3621de(0x315),_0x3621de(0x29c),_0x3621de(0x1ad),_0x3621de(0x2cd),_0x3621de(0x1b0),'PLN',_0x3621de(0x22b),'HUF',_0x3621de(0x13a),'RON',_0x3621de(0x1cd),_0x3621de(0x1c6),_0x3621de(0x173),_0x3621de(0x303),'ARS','CLP','COP',_0x3621de(0x256),_0x3621de(0x1ed),_0x3621de(0x1e8),_0x3621de(0x1f4),_0x3621de(0x2ff),'TND',_0x3621de(0xee),_0x3621de(0x23d),_0x3621de(0x23c),_0x3621de(0x1b9),'PKR',_0x3621de(0x107),'LKR',_0x3621de(0x1fc),_0x3621de(0x24b),'VND',_0x3621de(0x195),_0x3621de(0x2c4),_0x3621de(0x204),_0x3621de(0x25b),_0x3621de(0x322),'TWD',_0x3621de(0x266),'NZD'],'0100':[_0x3621de(0x1d4)],'0101':[_0x3621de(0x1d4)],'1001':[_0x3621de(0x1d4)],'1010':[_0x3621de(0x1ce)],'1100':['EUR',_0x3621de(0x302),_0x3621de(0x217),_0x3621de(0x24c),_0x3621de(0x1ce),_0x3621de(0x2cd),_0x3621de(0x315)],'1111':['EUR'],'0000':[_0x3621de(0x1d4),_0x3621de(0x302),'AUD',_0x3621de(0x24c),_0x3621de(0x1ce),_0x3621de(0x2cd),'JPY'],'1110':[_0x3621de(0x1d4),_0x3621de(0x302),_0x3621de(0x1ce)],'2000':[_0x3621de(0x1d4)],'2001':['EUR'],'2010':['EUR'],'2011':[_0x3621de(0x24c)],'2002':['TRY'],'3000':['TRY','AED','EUR',_0x3621de(0x302),_0x3621de(0x217),_0x3621de(0x247),_0x3621de(0x26b),_0x3621de(0x24c),_0x3621de(0x1ce),_0x3621de(0x2d2),_0x3621de(0x1b9)],'3001':['USD',_0x3621de(0x1d4)],'3002':[_0x3621de(0x1c6)],'3003':[_0x3621de(0x1d4),'USD','GBP',_0x3621de(0x217),_0x3621de(0x24c),_0x3621de(0x123),_0x3621de(0x173),'SEK','NOK',_0x3621de(0x1b0),'PLN',_0x3621de(0x22b),'HUF','RON','HRK'],'3004':[_0x3621de(0x302),_0x3621de(0x1d4),_0x3621de(0x1ce),'CAD',_0x3621de(0x217)]};return _0xcd6ef5[_0xc949b]||[_0x3621de(0x302)];}[a87_0x18e69b(0x1d2)](_0x237884){const _0x2e85d8=a87_0x18e69b,_0x18914c={'USD':_0x2e85d8(0x155),'EUR':_0x2e85d8(0x316),'GBP':_0x2e85d8(0x1a1),'JPY':_0x2e85d8(0x176),'CNY':_0x2e85d8(0x284),'AUD':_0x2e85d8(0x1fa),'CAD':_0x2e85d8(0x1cc),'CHF':_0x2e85d8(0x2c7),'SEK':'üá∏üá™','NOK':'üá≥üá¥','DKK':_0x2e85d8(0x153),'PLN':'üáµüá±','CZK':_0x2e85d8(0x31a),'HUF':_0x2e85d8(0x262),'BGN':_0x2e85d8(0x1b1),'RON':_0x2e85d8(0x244),'HRK':_0x2e85d8(0x12a),'TRY':_0x2e85d8(0x31c),'RUB':_0x2e85d8(0x264),'UAH':_0x2e85d8(0x159),'BRL':'üáßüá∑','MXN':_0x2e85d8(0x21d),'ARS':_0x2e85d8(0x168),'CLP':_0x2e85d8(0x101),'COP':_0x2e85d8(0x2da),'PEN':'üáµüá™','UYU':_0x2e85d8(0x110),'ZAR':_0x2e85d8(0xff),'EGP':_0x2e85d8(0x2c0),'MAD':_0x2e85d8(0x2b5),'TND':'üáπüá≥','KES':_0x2e85d8(0x1ef),'NGN':_0x2e85d8(0x2ba),'GHS':_0x2e85d8(0x160),'INR':'üáÆüá≥','PKR':_0x2e85d8(0x259),'BDT':_0x2e85d8(0xf0),'LKR':_0x2e85d8(0x203),'NPR':_0x2e85d8(0x136),'THB':_0x2e85d8(0xec),'VND':'üáªüá≥','IDR':'üáÆüá©','MYR':_0x2e85d8(0x278),'PHP':_0x2e85d8(0x182),'SGD':_0x2e85d8(0x141),'HKD':_0x2e85d8(0x128),'TWD':'üáπüáº','KRW':_0x2e85d8(0x1f9),'NZD':'üá≥üáø','AED':_0x2e85d8(0xf5),'SAR':_0x2e85d8(0x1b7),'QAR':'üá∂üá¶','KWD':_0x2e85d8(0x210),'BHD':'üáßüá≠','OMR':_0x2e85d8(0x255),'JOD':_0x2e85d8(0x105),'LBP':_0x2e85d8(0x11e),'ILS':_0x2e85d8(0x131),'IRR':_0x2e85d8(0x2bd),'IQD':_0x2e85d8(0x201),'AFN':_0x2e85d8(0x1a5),'BTN':_0x2e85d8(0x1a9),'MVR':_0x2e85d8(0x1c5),'KZT':'üá∞üáø','UZS':_0x2e85d8(0x26a),'KGS':_0x2e85d8(0x2cb),'TJS':_0x2e85d8(0x272),'TMT':_0x2e85d8(0x1ee),'AZN':_0x2e85d8(0x13e),'GEL':_0x2e85d8(0x249),'AMD':_0x2e85d8(0xeb),'BYN':_0x2e85d8(0x276),'MDL':_0x2e85d8(0x118),'ALL':_0x2e85d8(0x149),'MKD':'üá≤üá∞','RSD':_0x2e85d8(0x25a),'BAM':_0x2e85d8(0x209),'MNT':_0x2e85d8(0x148),'KHR':_0x2e85d8(0xf8),'LAK':_0x2e85d8(0x2e2),'MMK':_0x2e85d8(0xf2),'BND':'üáßüá≥','FJD':_0x2e85d8(0x2f0),'PGK':_0x2e85d8(0x100),'VUV':_0x2e85d8(0x1c7),'WST':_0x2e85d8(0x227),'TOP':_0x2e85d8(0x190),'SBD':'üá∏üáß'};return _0x18914c[_0x237884]||'üí±';}async['handleMerchantStatistics'](_0x36781d,_0x139e2a,_0x185fef,_0x35ebba){const _0x5cf2e8=a87_0x18e69b;try{const _0x19ccec=new Date();let _0x5d18ea,_0x40c91d,_0x1bb820;switch(_0x185fef){case _0x5cf2e8(0x12b):{const _0x103e9d=new Date(Date['UTC'](_0x19ccec[_0x5cf2e8(0x320)](),_0x19ccec[_0x5cf2e8(0x289)](),_0x19ccec[_0x5cf2e8(0x285)]()));_0x5d18ea=_0x103e9d,_0x40c91d=new Date(Date[_0x5cf2e8(0x279)](_0x19ccec[_0x5cf2e8(0x320)](),_0x19ccec[_0x5cf2e8(0x289)](),_0x19ccec['getUTCDate'](),0x17,0x3b,0x3b,0x3e7)),_0x1bb820=_0x103e9d[_0x5cf2e8(0x285)]()[_0x5cf2e8(0x120)]()[_0x5cf2e8(0x288)](0x2,'0')+'.'+(_0x103e9d[_0x5cf2e8(0x289)]()+0x1)['toString']()[_0x5cf2e8(0x288)](0x2,'0')+'.'+_0x103e9d[_0x5cf2e8(0x320)]();break;}case _0x5cf2e8(0x1dd):{const _0x23939b=new Date(Date['UTC'](_0x19ccec['getUTCFullYear'](),_0x19ccec[_0x5cf2e8(0x289)](),_0x19ccec[_0x5cf2e8(0x285)]()-0x1));_0x5d18ea=_0x23939b,_0x40c91d=new Date(Date[_0x5cf2e8(0x279)](_0x19ccec['getUTCFullYear'](),_0x19ccec['getUTCMonth'](),_0x19ccec[_0x5cf2e8(0x285)]()-0x1,0x17,0x3b,0x3b,0x3e7)),_0x1bb820=_0x23939b[_0x5cf2e8(0x285)]()['toString']()['padStart'](0x2,'0')+'.'+(_0x23939b[_0x5cf2e8(0x289)]()+0x1)[_0x5cf2e8(0x120)]()[_0x5cf2e8(0x288)](0x2,'0')+'.'+_0x23939b[_0x5cf2e8(0x320)]();break;}case _0x5cf2e8(0x1c4):{const _0x3a93c0=new Date(Date['UTC'](_0x19ccec[_0x5cf2e8(0x320)](),_0x19ccec['getUTCMonth'](),0x1));_0x5d18ea=_0x3a93c0,_0x40c91d=new Date(Date['UTC'](_0x19ccec[_0x5cf2e8(0x320)](),_0x19ccec[_0x5cf2e8(0x289)]()+0x1,0x0,0x17,0x3b,0x3b,0x3e7));const _0x3847f7=new Date(Date['UTC'](_0x19ccec[_0x5cf2e8(0x320)](),_0x19ccec[_0x5cf2e8(0x289)]()+0x1,0x0));_0x1bb820=_0x3a93c0[_0x5cf2e8(0x285)]()[_0x5cf2e8(0x120)]()[_0x5cf2e8(0x288)](0x2,'0')+'.'+(_0x3a93c0[_0x5cf2e8(0x289)]()+0x1)['toString']()[_0x5cf2e8(0x288)](0x2,'0')+'.'+_0x3a93c0[_0x5cf2e8(0x320)]()+_0x5cf2e8(0x23e)+_0x3847f7[_0x5cf2e8(0x285)]()[_0x5cf2e8(0x120)]()[_0x5cf2e8(0x288)](0x2,'0')+'.'+(_0x3847f7['getUTCMonth']()+0x1)[_0x5cf2e8(0x120)]()[_0x5cf2e8(0x288)](0x2,'0')+'.'+_0x3847f7[_0x5cf2e8(0x320)]();break;}case _0x5cf2e8(0x1f0):{const _0x54ab21=new Date(Date[_0x5cf2e8(0x279)](_0x19ccec['getUTCFullYear'](),_0x19ccec['getUTCMonth']()-0x1,0x1));_0x5d18ea=_0x54ab21,_0x40c91d=new Date(Date[_0x5cf2e8(0x279)](_0x19ccec['getUTCFullYear'](),_0x19ccec['getUTCMonth'](),0x0,0x17,0x3b,0x3b,0x3e7));const _0x503668=new Date(Date[_0x5cf2e8(0x279)](_0x19ccec[_0x5cf2e8(0x320)](),_0x19ccec[_0x5cf2e8(0x289)](),0x0));_0x1bb820=_0x54ab21[_0x5cf2e8(0x285)]()[_0x5cf2e8(0x120)]()[_0x5cf2e8(0x288)](0x2,'0')+'.'+(_0x54ab21[_0x5cf2e8(0x289)]()+0x1)[_0x5cf2e8(0x120)]()[_0x5cf2e8(0x288)](0x2,'0')+'.'+_0x54ab21['getUTCFullYear']()+_0x5cf2e8(0x23e)+_0x503668[_0x5cf2e8(0x285)]()[_0x5cf2e8(0x120)]()[_0x5cf2e8(0x288)](0x2,'0')+'.'+(_0x503668[_0x5cf2e8(0x289)]()+0x1)['toString']()[_0x5cf2e8(0x288)](0x2,'0')+'.'+_0x503668[_0x5cf2e8(0x320)]();break;}case _0x5cf2e8(0x11c):{_0x5d18ea=new Date(0x0),_0x40c91d=_0x19ccec,_0x1bb820=_0x5cf2e8(0x233);break;}default:return;}const _0xcca413=await database_1['default']['payment'][_0x5cf2e8(0x17d)]({'where':{'shopId':_0x139e2a,'createdAt':{'gte':_0x5d18ea,'lte':_0x40c91d}},'select':{'status':!![],'amountUSDT':!![],'amountAfterGatewayCommissionUSDT':!![]}});let _0x58ed81=0x0,_0x1b7fc6=0x0,_0x2815a1=0x0,_0x40626b=0x0,_0x2703cc=0x0,_0x33254c=0x0;_0xcca413[_0x5cf2e8(0x25c)](_0x3ebeab=>{const _0xdf837d=_0x5cf2e8,_0x368c34=_0x3ebeab[_0xdf837d(0x30f)]||0x0,_0x1f568a=_0x3ebeab[_0xdf837d(0x312)]||0x0;if(_0x3ebeab[_0xdf837d(0x2f9)]===_0xdf837d(0x20f))_0x58ed81+=_0x368c34,_0x1b7fc6+=_0x368c34-_0x1f568a,_0x2815a1++;else{if(_0x3ebeab[_0xdf837d(0x2f9)]===_0xdf837d(0x269)||_0x3ebeab['status']===_0xdf837d(0x2a3))_0x40626b++;else{if(_0x3ebeab[_0xdf837d(0x2f9)]==='CHARGEBACK')_0x2703cc++,_0x58ed81+=_0x368c34;else _0x3ebeab['status']===_0xdf837d(0x30e)&&(_0x33254c++,_0x58ed81+=_0x368c34);}}});const _0x4b4561=_0x2815a1+_0x40626b,_0x5765b0=_0x4b4561>0x0?(_0x2815a1/_0x4b4561*0x64)[_0x5cf2e8(0x31f)](0x1):_0x5cf2e8(0xfc),_0x265978=_0x1bb820[_0x5cf2e8(0x18a)](/\./g,'\x5c.')['replace'](/\-/g,'\x5c-'),_0x24cb74=_0x58ed81[_0x5cf2e8(0x31f)](0x2)['replace'](/\./g,'\x5c.'),_0x479110=_0x1b7fc6[_0x5cf2e8(0x31f)](0x2)['replace'](/\./g,'\x5c.'),_0x5576b8=_0x5765b0[_0x5cf2e8(0x18a)](/\./g,'\x5c.'),_0x20d83a=_0x5cf2e8(0x2b1)+_0x265978+_0x5cf2e8(0x2fc)+(_0x5cf2e8(0x15c)+_0x24cb74+_0x5cf2e8(0x15e))+('üíµ\x20Earned\x20\x5c-\x20'+_0x479110+'\x20USDT\x0a')+(_0x5cf2e8(0x24a)+_0x2815a1+'\x0a')+(_0x5cf2e8(0x187)+_0x40626b+'\x0a')+('üìà\x20Conversion\x20\x5c-\x20'+_0x5576b8+'%\x0a')+('‚ö†Ô∏è\x20Chargebacks\x20\x5c-\x20'+_0x2703cc+'\x0a')+(_0x5cf2e8(0x14b)+_0x33254c),_0x11cb82={'inline_keyboard':[[{'text':_0x5cf2e8(0x287),'callback_data':_0x5cf2e8(0x25f)}]]};_0x35ebba?await this[_0x5cf2e8(0x2eb)]?.['editMessageText'](_0x20d83a,{'chat_id':_0x36781d,'message_id':_0x35ebba,'parse_mode':_0x5cf2e8(0x167),'reply_markup':_0x11cb82}):await this['bot']?.[_0x5cf2e8(0x138)](_0x36781d,_0x20d83a,{'parse_mode':'MarkdownV2','reply_markup':_0x11cb82});}catch(_0x572215){console[_0x5cf2e8(0x212)](_0x5cf2e8(0x1ac),_0x572215),await this['bot']?.[_0x5cf2e8(0x138)](_0x36781d,_0x5cf2e8(0x185));}}[a87_0x18e69b(0x27d)](){const _0x3a11a9=a87_0x18e69b;this[_0x3a11a9(0x2eb)]&&(this['bot']['stopPolling'](),this[_0x3a11a9(0x2eb)]=null,console[_0x3a11a9(0x225)]('üõë\x20Telegram\x20bot\x20stopped'));}}function a87_0x2baf(_0x16e23a,_0x311712){_0x16e23a=_0x16e23a-0xe9;const _0x12860a=a87_0x1286();let _0x2baff4=_0x12860a[_0x16e23a];return _0x2baff4;}exports[a87_0x18e69b(0x2d5)]=TelegramBotService,exports[a87_0x18e69b(0x240)]=new TelegramBotService();