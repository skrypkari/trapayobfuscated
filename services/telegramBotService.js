'use strict';const a49_0xf390f2=a49_0x5efc;(function(_0x2b0d54,_0x3aceae){const _0x2323d8=a49_0x5efc,_0x4197d7=_0x2b0d54();while(!![]){try{const _0x552f3b=-parseInt(_0x2323d8(0xdb))/0x1+parseInt(_0x2323d8(0x16b))/0x2*(parseInt(_0x2323d8(0x153))/0x3)+parseInt(_0x2323d8(0x106))/0x4*(parseInt(_0x2323d8(0x13f))/0x5)+parseInt(_0x2323d8(0x105))/0x6+parseInt(_0x2323d8(0x131))/0x7+parseInt(_0x2323d8(0x15d))/0x8+parseInt(_0x2323d8(0xb7))/0x9*(-parseInt(_0x2323d8(0x100))/0xa);if(_0x552f3b===_0x3aceae)break;else _0x4197d7['push'](_0x4197d7['shift']());}catch(_0x53c1f1){_0x4197d7['push'](_0x4197d7['shift']());}}}(a49_0x8178,0xd4a0b));function a49_0x5efc(_0x98523,_0xef40de){const _0x81788e=a49_0x8178();return a49_0x5efc=function(_0x5efca9,_0x25cfe4){_0x5efca9=_0x5efca9-0x92;let _0x24b644=_0x81788e[_0x5efca9];return _0x24b644;},a49_0x5efc(_0x98523,_0xef40de);}var __importDefault=this&&this[a49_0xf390f2(0xcb)]||function(_0x3b5117){const _0x4867b0=a49_0xf390f2;return _0x3b5117&&_0x3b5117[_0x4867b0(0x10f)]?_0x3b5117:{'default':_0x3b5117};};Object['defineProperty'](exports,a49_0xf390f2(0x10f),{'value':!![]}),exports[a49_0xf390f2(0xd1)]=exports[a49_0xf390f2(0x128)]=void 0x0;const node_telegram_bot_api_1=__importDefault(require(a49_0xf390f2(0x10d))),database_1=__importDefault(require(a49_0xf390f2(0x126))),gateway_1=require(a49_0xf390f2(0x12c));class TelegramBotService{constructor(){const _0x184bff=a49_0xf390f2;this[_0x184bff(0x172)]=null,this[_0x184bff(0x16a)]=process[_0x184bff(0xb5)]['TELEGRAM_BOT_TOKEN']||'',this[_0x184bff(0x12a)]=process[_0x184bff(0xb5)][_0x184bff(0x116)]||_0x184bff(0x159),this[_0x184bff(0x16a)]?this[_0x184bff(0x166)]():console[_0x184bff(0xc9)]('TELEGRAM_BOT_TOKEN\x20not\x20found\x20in\x20environment\x20variables');}[a49_0xf390f2(0x166)](){const _0x1b4f51=a49_0xf390f2;try{this[_0x1b4f51(0x172)]=new node_telegram_bot_api_1[(_0x1b4f51(0xc3))](this[_0x1b4f51(0x16a)],{'polling':!![]}),this[_0x1b4f51(0x16d)](),console[_0x1b4f51(0x114)]('✅\x20Telegram\x20bot\x20@'+this[_0x1b4f51(0x12a)]+_0x1b4f51(0xa6));}catch(_0x56ab98){console[_0x1b4f51(0xb4)](_0x1b4f51(0xaa),_0x56ab98);}}[a49_0xf390f2(0x16d)](){const _0x74dcf0=a49_0xf390f2;if(!this[_0x74dcf0(0x172)])return;this[_0x74dcf0(0x172)]['onText'](/\/start/,async _0x5b2db2=>{const _0x39aa15=_0x74dcf0,_0x1663c6=_0x5b2db2[_0x39aa15(0xd7)]['id'],_0x51e406=_0x5b2db2['from']?.['id'][_0x39aa15(0xaf)](),_0x77eef3=_0x5b2db2['from']?.[_0x39aa15(0x155)],_0x5f3199=_0x5b2db2[_0x39aa15(0xa9)]?.[_0x39aa15(0x124)],_0x1edb59=_0x5b2db2[_0x39aa15(0xa9)]?.[_0x39aa15(0x14c)];if(!_0x51e406)return;try{let _0x30f237=await database_1['default'][_0x39aa15(0x147)]['findUnique']({'where':{'telegramId':_0x51e406},'include':{'shop':!![]}});!_0x30f237?(_0x30f237=await database_1[_0x39aa15(0xc3)][_0x39aa15(0x147)][_0x39aa15(0xd0)]({'data':{'telegramId':_0x51e406,'username':_0x77eef3,'firstName':_0x5f3199,'lastName':_0x1edb59,'isVerified':![],'shopId':null},'include':{'shop':!![]}}),console[_0x39aa15(0x114)]('📱\x20Created\x20new\x20Telegram\x20user:\x20'+_0x51e406+_0x39aa15(0xec)+_0x77eef3+')')):_0x30f237=await database_1[_0x39aa15(0xc3)][_0x39aa15(0x147)]['update']({'where':{'telegramId':_0x51e406},'data':{'username':_0x77eef3,'firstName':_0x5f3199,'lastName':_0x1edb59},'include':{'shop':!![]}}),_0x30f237[_0x39aa15(0xff)]&&_0x30f237['shopId']&&_0x30f237[_0x39aa15(0xa0)]?await this[_0x39aa15(0x172)]?.['sendMessage'](_0x1663c6,_0x39aa15(0x130)+(_0x39aa15(0x94)+_0x30f237[_0x39aa15(0xa0)][_0x39aa15(0xfa)]+'*\x0a')+(_0x39aa15(0x149)+_0x30f237['shop']['username']+'`\x0a\x0a')+_0x39aa15(0xfc)+_0x39aa15(0xd2)+'•\x20Payment\x20status\x20changes\x0a'+_0x39aa15(0xf6)+'Commands:\x0a'+'/status\x20-\x20check\x20connection\x20status\x0a'+'/disconnect\x20-\x20disconnect\x20from\x20notifications',{'parse_mode':_0x39aa15(0xa3)}):(_0x30f237['shopId']&&!_0x30f237[_0x39aa15(0xff)]&&(await database_1[_0x39aa15(0xc3)][_0x39aa15(0x147)][_0x39aa15(0xc1)]({'where':{'telegramId':_0x51e406},'data':{'shopId':null,'isVerified':![]}}),console[_0x39aa15(0x114)](_0x39aa15(0x125)+_0x51e406)),await this[_0x39aa15(0x172)]?.['sendMessage'](_0x1663c6,'🤖\x20Welcome\x20to\x20TRAPAY\x20notification\x20system!\x0a\x0a'+_0x39aa15(0x136)+_0x39aa15(0x122)+_0x39aa15(0x110)+_0x39aa15(0x142)+_0x39aa15(0x14d),{'parse_mode':_0x39aa15(0xa3)}));}catch(_0x5f0286){console[_0x39aa15(0xb4)](_0x39aa15(0xbc),_0x5f0286),await this[_0x39aa15(0x172)]?.[_0x39aa15(0xfb)](_0x1663c6,'❌\x20An\x20error\x20occurred.\x20Please\x20try\x20again\x20later.');}}),this[_0x74dcf0(0x172)]['onText'](/\/disconnect/,async _0x205462=>{const _0x32fa6f=_0x74dcf0,_0x3b3097=_0x205462['chat']['id'],_0x2d11fb=_0x205462[_0x32fa6f(0xa9)]?.['id'][_0x32fa6f(0xaf)]();if(!_0x2d11fb)return;try{const _0x150eda=await database_1[_0x32fa6f(0xc3)]['telegramUser'][_0x32fa6f(0xe5)]({'where':{'telegramId':_0x2d11fb},'include':{'shop':!![]}});if(!_0x150eda||!_0x150eda['isVerified']||!_0x150eda[_0x32fa6f(0xf1)]){await this[_0x32fa6f(0x172)]?.[_0x32fa6f(0xfb)](_0x3b3097,_0x32fa6f(0x144));return;}const _0x12d49c=_0x150eda[_0x32fa6f(0xa0)]?.[_0x32fa6f(0xfa)]||'unknown\x20shop';await database_1[_0x32fa6f(0xc3)]['telegramUser'][_0x32fa6f(0xc1)]({'where':{'telegramId':_0x2d11fb},'data':{'shopId':null,'isVerified':![]}}),console[_0x32fa6f(0x114)](_0x32fa6f(0xa2)+_0x2d11fb+_0x32fa6f(0xb8)+_0x150eda['shopId']),await this[_0x32fa6f(0x172)]?.[_0x32fa6f(0xfb)](_0x3b3097,_0x32fa6f(0x13b)+_0x12d49c+_0x32fa6f(0x11d)+'To\x20reconnect,\x20use\x20the\x20/start\x20command',{'parse_mode':_0x32fa6f(0xa3)});}catch(_0x2cbedf){console['error']('Error\x20handling\x20/disconnect\x20command:',_0x2cbedf),await this[_0x32fa6f(0x172)]?.[_0x32fa6f(0xfb)](_0x3b3097,_0x32fa6f(0xf8));}}),this[_0x74dcf0(0x172)][_0x74dcf0(0xbf)](/\/status/,async _0x5ef9f3=>{const _0x1be178=_0x74dcf0,_0x487dd2=_0x5ef9f3['chat']['id'],_0x53f113=_0x5ef9f3['from']?.['id'][_0x1be178(0xaf)]();if(!_0x53f113)return;try{const _0x1e1634=await database_1[_0x1be178(0xc3)][_0x1be178(0x147)][_0x1be178(0xe5)]({'where':{'telegramId':_0x53f113},'include':{'shop':!![]}});if(!_0x1e1634){await this[_0x1be178(0x172)]?.[_0x1be178(0xfb)](_0x487dd2,_0x1be178(0x11c)+_0x1be178(0x108));return;}if(!_0x1e1634[_0x1be178(0xff)]||!_0x1e1634[_0x1be178(0xf1)]||!_0x1e1634[_0x1be178(0xa0)]){await this[_0x1be178(0x172)]?.[_0x1be178(0xfb)](_0x487dd2,_0x1be178(0x115)+_0x1be178(0xa1));return;}await this[_0x1be178(0x172)]?.[_0x1be178(0xfb)](_0x487dd2,_0x1be178(0x9e)+(_0x1be178(0x10b)+_0x1e1634[_0x1be178(0xa0)]['name']+'*\x0a')+(_0x1be178(0x157)+_0x1e1634['shop']['username']+'`\x0a')+('📅\x20Connection\x20date:\x20'+_0x1e1634[_0x1be178(0x127)][_0x1be178(0xb3)](_0x1be178(0x10e))+'\x0a\x0a')+_0x1be178(0xd9)+'Commands:\x0a'+_0x1be178(0xb6),{'parse_mode':_0x1be178(0xa3)});}catch(_0x159201){console[_0x1be178(0xb4)]('Error\x20handling\x20/status\x20command:',_0x159201),await this['bot']?.[_0x1be178(0xfb)](_0x487dd2,_0x1be178(0xf8));}}),this[_0x74dcf0(0x172)][_0x74dcf0(0xbf)](/\/debug/,async _0xaf69dd=>{const _0x176353=_0x74dcf0,_0x3c3680=_0xaf69dd['chat']['id'],_0x5eb763=_0xaf69dd[_0x176353(0xa9)]?.['id'][_0x176353(0xaf)]();if(!_0x5eb763)return;try{const _0xc18a71=await database_1['default'][_0x176353(0xa0)]['findMany']({'select':{'id':!![],'name':!![],'username':!![],'status':!![],'publicKey':!![]},'take':0xa});let _0x30ac29=_0x176353(0x12e);_0x30ac29+=_0x176353(0x15a)+_0x5eb763+_0x176353(0x173),_0x30ac29+=_0x176353(0x98),_0xc18a71['forEach']((_0x42a9f3,_0x34122e)=>{const _0x425ce4=_0x176353;_0x30ac29+=_0x34122e+0x1+_0x425ce4(0x15e)+_0x42a9f3[_0x425ce4(0xfa)]+'*\x0a',_0x30ac29+='\x20\x20\x20Username:\x20`'+_0x42a9f3['username']+'`\x0a',_0x30ac29+='\x20\x20\x20Status:\x20'+_0x42a9f3[_0x425ce4(0x11f)]+'\x0a',_0x30ac29+=_0x425ce4(0xcc)+_0x42a9f3[_0x425ce4(0x123)]['substring'](0x0,0xf)+_0x425ce4(0x13e);}),await this[_0x176353(0x172)]?.[_0x176353(0xfb)](_0x3c3680,_0x30ac29,{'parse_mode':_0x176353(0xa3)});}catch(_0x2ca20c){console[_0x176353(0xb4)](_0x176353(0x9a),_0x2ca20c),await this['bot']?.[_0x176353(0xfb)](_0x3c3680,_0x176353(0xdc));}}),this['bot']['on'](_0x74dcf0(0x129),async _0x4b680f=>{const _0x467ce2=_0x74dcf0;if(_0x4b680f['text']?.['startsWith']('/'))return;const _0x3b8a75=_0x4b680f['chat']['id'],_0x2ff9d2=_0x4b680f[_0x467ce2(0xa9)]?.['id']['toString'](),_0x1278e2=_0x4b680f[_0x467ce2(0xea)]?.['trim']();if(!_0x2ff9d2||!_0x1278e2)return;try{const _0x1d8fd3=await database_1[_0x467ce2(0xc3)]['telegramUser']['findUnique']({'where':{'telegramId':_0x2ff9d2},'include':{'shop':!![]}});if(!_0x1d8fd3){await this['bot']?.['sendMessage'](_0x3b8a75,_0x467ce2(0xc7));return;}if(_0x1d8fd3[_0x467ce2(0xff)]&&_0x1d8fd3[_0x467ce2(0xf1)]&&_0x1d8fd3[_0x467ce2(0xa0)]){await this[_0x467ce2(0x172)]?.['sendMessage'](_0x3b8a75,_0x467ce2(0xf3)+_0x1d8fd3[_0x467ce2(0xa0)][_0x467ce2(0xfa)]+_0x467ce2(0x11d)+_0x467ce2(0x140),{'parse_mode':'Markdown'});return;}const _0x37761a=_0x1278e2[_0x467ce2(0xfd)](/\s+/);if(_0x37761a['length']!==0x2){await this[_0x467ce2(0x172)]?.[_0x467ce2(0xfb)](_0x3b8a75,_0x467ce2(0xe6)+'📝\x20Format:\x20`username\x20api_key`\x0a\x0a'+_0x467ce2(0x110)+_0x467ce2(0x142)+(_0x467ce2(0xc4)+_0x37761a[_0x467ce2(0x15f)]+_0x467ce2(0xe3)+_0x37761a[_0x467ce2(0x169)](_0x14dc30=>'`'+_0x14dc30+'`')['join'](',\x20')),{'parse_mode':_0x467ce2(0xa3)});return;}const [_0x3f06eb,_0x180f63]=_0x37761a;console[_0x467ce2(0x114)](_0x467ce2(0x154)+_0x2ff9d2+':\x20username=\x22'+_0x3f06eb+_0x467ce2(0xc5)+_0x180f63['substring'](0x0,0xa)+_0x467ce2(0x150)),await this[_0x467ce2(0x14f)](_0x3b8a75,_0x2ff9d2,_0x3f06eb,_0x180f63);}catch(_0x132523){console['error'](_0x467ce2(0xbd),_0x132523),await this['bot']?.[_0x467ce2(0xfb)](_0x3b8a75,_0x467ce2(0xf8));}}),this[_0x74dcf0(0x172)]['on'](_0x74dcf0(0xb4),_0x38bf53=>{const _0x48dc67=_0x74dcf0;console[_0x48dc67(0xb4)](_0x48dc67(0x145),_0x38bf53);}),this['bot']['on'](_0x74dcf0(0x158),_0x2cb6ba=>{const _0xf444a7=_0x74dcf0;console['error'](_0xf444a7(0xae),_0x2cb6ba);});}async[a49_0xf390f2(0x14f)](_0x309e8a,_0x513cdd,_0xbf5161,_0x15c47d){const _0x1d3510=a49_0xf390f2;try{console[_0x1d3510(0x114)](_0x1d3510(0x154)+_0x513cdd+':\x20username=\x22'+_0xbf5161+'\x22,\x20apiKey=\x22'+_0x15c47d['substring'](0x0,0xa)+_0x1d3510(0x150));if(!_0xbf5161||_0xbf5161['length']<0x3||_0xbf5161['length']>0x32||!/^[a-zA-Z0-9_]+$/[_0x1d3510(0xad)](_0xbf5161)){await this['bot']?.[_0x1d3510(0xfb)](_0x309e8a,_0x1d3510(0x168)+_0xbf5161+'`\x0a\x0a'+_0x1d3510(0x12f),{'parse_mode':_0x1d3510(0xa3)});return;}if(!_0x15c47d||!_0x15c47d['startsWith']('pk_')&&!_0x15c47d[_0x1d3510(0x99)](_0x1d3510(0x111))){await this[_0x1d3510(0x172)]?.[_0x1d3510(0xfb)](_0x309e8a,_0x1d3510(0xa7)+_0x1d3510(0x13a),{'parse_mode':'Markdown'});return;}const _0x56d412=await database_1[_0x1d3510(0xc3)]['shop'][_0x1d3510(0xe5)]({'where':{'username':_0xbf5161},'select':{'id':!![],'name':!![],'username':!![],'status':!![],'publicKey':!![],'secretKey':!![]}});if(!_0x56d412){const _0x6afcff=await database_1[_0x1d3510(0xc3)]['shop'][_0x1d3510(0x9c)]({'select':{'username':!![],'name':!![]},'take':0x5});let _0x30c93d=_0x1d3510(0x117)+_0xbf5161+_0x1d3510(0xef);_0x6afcff[_0x1d3510(0x15f)]>0x0?(_0x30c93d+=_0x1d3510(0xe0),_0x6afcff[_0x1d3510(0x167)](_0x24242a=>{const _0x2e02b1=_0x1d3510;_0x30c93d+='•\x20`'+_0x24242a[_0x2e02b1(0x155)]+'`\x20('+_0x24242a[_0x2e02b1(0xfa)]+')\x0a';}),_0x30c93d+='\x0aCheck\x20spelling\x20and\x20try\x20again.'):_0x30c93d+='Check\x20spelling\x20and\x20try\x20again.';await this[_0x1d3510(0x172)]?.[_0x1d3510(0xfb)](_0x309e8a,_0x30c93d,{'parse_mode':_0x1d3510(0xa3)});return;}if(_0x56d412[_0x1d3510(0x11f)]!==_0x1d3510(0x156)){await this[_0x1d3510(0x172)]?.[_0x1d3510(0xfb)](_0x309e8a,_0x1d3510(0xf9)+_0xbf5161+_0x1d3510(0xde)+_0x1d3510(0x120),{'parse_mode':'Markdown'});return;}if(_0x56d412[_0x1d3510(0x123)]!==_0x15c47d&&_0x56d412[_0x1d3510(0x14a)]!==_0x15c47d){await this[_0x1d3510(0x172)]?.['sendMessage'](_0x309e8a,'❌\x20API\x20key\x20does\x20not\x20match\x20shop\x20`'+_0xbf5161+_0x1d3510(0xf7)+'Check\x20the\x20key\x20and\x20try\x20again.\x0a\x0a'+_0x1d3510(0xc8),{'parse_mode':'Markdown'});return;}const _0x3003b0=await database_1[_0x1d3510(0xc3)][_0x1d3510(0x147)][_0x1d3510(0xb1)]({'where':{'shopId':_0x56d412['id'],'isVerified':!![],'telegramId':{'not':_0x513cdd}}});if(_0x3003b0){await this['bot']?.[_0x1d3510(0xfb)](_0x309e8a,_0x1d3510(0x16f)+_0xbf5161+'`.\x0a\x0a'+_0x1d3510(0xe8),{'parse_mode':_0x1d3510(0xa3)});return;}await database_1['default'][_0x1d3510(0x147)][_0x1d3510(0xc1)]({'where':{'telegramId':_0x513cdd},'data':{'shopId':_0x56d412['id'],'isVerified':!![]}}),await this[_0x1d3510(0x172)]?.[_0x1d3510(0xfb)](_0x309e8a,_0x1d3510(0x137)+_0x1d3510(0xf5)+('📱\x20Shop:\x20*'+_0x56d412[_0x1d3510(0xfa)]+'*\x0a')+(_0x1d3510(0x157)+_0x56d412[_0x1d3510(0x155)]+_0x1d3510(0x173))+_0x1d3510(0xdd)+_0x1d3510(0xd2)+'•\x20Payment\x20status\x20changes\x0a'+_0x1d3510(0xf4)+_0x1d3510(0xd8)+'Commands:\x0a'+_0x1d3510(0xdf)+_0x1d3510(0xb6),{'parse_mode':_0x1d3510(0xa3)}),console[_0x1d3510(0x114)](_0x1d3510(0xa4)+_0x513cdd+'\x20verified\x20for\x20shop\x20'+_0x56d412[_0x1d3510(0x155)]+_0x1d3510(0xd5));}catch(_0x2f2355){console['error'](_0x1d3510(0x96),_0x2f2355),await this['bot']?.[_0x1d3510(0xfb)](_0x309e8a,_0x1d3510(0xba));}}async[a49_0xf390f2(0xca)](_0x5557f8,_0x3ae5c1,_0x354b50){const _0x2d67a9=a49_0xf390f2;if(!this[_0x2d67a9(0x172)]){console[_0x2d67a9(0xc9)]('Telegram\x20bot\x20not\x20initialized,\x20cannot\x20send\x20notification');return;}try{const _0x18d111=await database_1['default'][_0x2d67a9(0x147)][_0x2d67a9(0x9c)]({'where':{'shopId':_0x5557f8,'isVerified':!![]}});if(_0x18d111[_0x2d67a9(0x15f)]===0x0){console[_0x2d67a9(0x114)]('No\x20verified\x20Telegram\x20users\x20found\x20for\x20shop\x20'+_0x5557f8);return;}const _0x48eea7=_0x18d111[_0x2d67a9(0x169)](async _0x3cbb0f=>{const _0x2a79e9=_0x2d67a9;try{await this[_0x2a79e9(0x172)]?.[_0x2a79e9(0xfb)](_0x3cbb0f[_0x2a79e9(0xcf)],_0x3ae5c1,_0x354b50),console[_0x2a79e9(0x114)](_0x2a79e9(0xe2)+_0x3cbb0f[_0x2a79e9(0xcf)]);}catch(_0xf35120){console[_0x2a79e9(0xb4)](_0x2a79e9(0xda)+_0x3cbb0f[_0x2a79e9(0xcf)]+':',_0xf35120),_0xf35120 instanceof Error&&(_0xf35120[_0x2a79e9(0x129)][_0x2a79e9(0x118)](_0x2a79e9(0xeb))||_0xf35120['message'][_0x2a79e9(0x118)](_0x2a79e9(0x138))||_0xf35120['message']['includes'](_0x2a79e9(0x165)))&&(await database_1[_0x2a79e9(0xc3)][_0x2a79e9(0x147)][_0x2a79e9(0xc1)]({'where':{'id':_0x3cbb0f['id']},'data':{'isVerified':![]}}),console[_0x2a79e9(0x114)](_0x2a79e9(0x14b)+_0x3cbb0f[_0x2a79e9(0xcf)]+_0x2a79e9(0x160)));}});await Promise[_0x2d67a9(0x11e)](_0x48eea7);}catch(_0x45005e){console[_0x2d67a9(0xb4)](_0x2d67a9(0xe1),_0x45005e);}}async['sendPaymentNotification'](_0x2715f3,_0x42c890,_0x2eaefb){const _0x17e0cb=a49_0xf390f2,_0x689540={'created':'🆕','paid':'✅','failed':'❌','expired':'⏰','refund':'🔄','chargeback':'⚠️','processing':'⚙️'},_0x1e6a0f={'created':'New\x20payment\x20created','paid':_0x17e0cb(0x15c),'failed':_0x17e0cb(0xe9),'expired':_0x17e0cb(0x102),'refund':_0x17e0cb(0xb2),'chargeback':_0x17e0cb(0xcd),'processing':_0x17e0cb(0xb9)},_0x417563=_0x689540[_0x2eaefb],_0x4a82c8=_0x1e6a0f[_0x2eaefb],_0x69f9f1=(0x0,gateway_1[_0x17e0cb(0x11a)])(_0x42c890[_0x17e0cb(0xb0)]);console['log'](_0x17e0cb(0xf2)+_0x42c890['gateway']+_0x17e0cb(0x164)+_0x69f9f1+'\x22');let _0x8eba50=_0x417563+'\x20*'+_0x4a82c8+'*\x0a\x0a'+(_0x17e0cb(0xc0)+_0x42c890['amount']+'\x20'+_0x42c890[_0x17e0cb(0xc6)]+'*\x0a')+(_0x17e0cb(0x103)+(_0x42c890[_0x17e0cb(0x151)]||_0x42c890['id'])+'`\x0a')+(_0x17e0cb(0x162)+_0x42c890['id']+'`\x0a')+('🏪\x20Gateway:\x20`'+_0x69f9f1+'`\x0a')+(_0x17e0cb(0xd4)+new Date(_0x42c890[_0x17e0cb(0x10c)])[_0x17e0cb(0x132)](_0x17e0cb(0x10e))+'\x0a');(_0x42c890['customerName']||_0x42c890[_0x17e0cb(0x9f)])&&(_0x8eba50+=_0x17e0cb(0x107),_0x42c890[_0x17e0cb(0x9d)]&&(_0x8eba50+='📛\x20Name:\x20`'+_0x42c890[_0x17e0cb(0x9d)]+'`\x0a'),_0x42c890['customerEmail']&&(_0x8eba50+=_0x17e0cb(0xd3)+_0x42c890[_0x17e0cb(0x9f)]+'`\x0a')),_0x2eaefb==='chargeback'&&_0x42c890[_0x17e0cb(0x13c)]&&(_0x8eba50+=_0x17e0cb(0xd6)+_0x42c890[_0x17e0cb(0x13c)]+_0x17e0cb(0x12d)),_0x2eaefb===_0x17e0cb(0x15b)&&(_0x8eba50+='⏳\x20The\x20payment\x20is\x20currently\x20being\x20processed\x20by\x20the\x20gateway.\x0a'),_0x42c890[_0x17e0cb(0x146)]&&(_0x8eba50+='📝\x20Notes:\x20'+_0x42c890['adminNotes']+'\x0a'),await this[_0x17e0cb(0xca)](_0x2715f3,_0x8eba50,{'parse_mode':_0x17e0cb(0xa3)});}async[a49_0xf390f2(0x93)](_0x2d696a,_0x56e4c5,_0x1b6c31){const _0x1221ed=a49_0xf390f2,_0x4de12e={'created':'📤','completed':'✅','rejected':'❌'},_0x3c6021={'created':_0x1221ed(0x121),'completed':_0x1221ed(0x92),'rejected':'Payout\x20rejected'},_0x1bebf2=_0x4de12e[_0x1b6c31],_0x262956=_0x3c6021[_0x1b6c31],_0x1f1c5b=_0x1bebf2+'\x20*'+_0x262956+'*\x0a\x0a'+('💸\x20Amount:\x20*'+_0x56e4c5[_0x1221ed(0x170)]+_0x1221ed(0x9b))+(_0x1221ed(0xee)+_0x56e4c5['method']+'`\x0a')+('🆔\x20Payout\x20ID:\x20`'+_0x56e4c5['id']+'`\x0a')+(_0x1221ed(0xd4)+new Date(_0x56e4c5['createdAt'])[_0x1221ed(0x132)]('en-US')+'\x0a')+(_0x56e4c5[_0x1221ed(0x11b)]?_0x1221ed(0xed)+_0x56e4c5[_0x1221ed(0x11b)]+'`':'');await this[_0x1221ed(0xca)](_0x2d696a,_0x1f1c5b,{'parse_mode':_0x1221ed(0xa3)});}async['sendLoginNotification'](_0x1f95e2,_0x4d75d6){const _0x284ce5=a49_0xf390f2;try{const _0x56766d=await database_1[_0x284ce5(0xc3)][_0x284ce5(0x119)][_0x284ce5(0xe5)]({'where':{'shopId':_0x1f95e2},'select':{'notificationLogin':!![]}});if(!_0x56766d?.[_0x284ce5(0x112)]){console[_0x284ce5(0x114)](_0x284ce5(0x13d)+_0x1f95e2);return;}const _0x27c36b=_0x4d75d6[_0x284ce5(0x171)]?'🔐':'🚨',_0xdb193a=_0x4d75d6[_0x284ce5(0x171)]?'Successful\x20login':_0x284ce5(0xc2);let _0x56502e=_0x27c36b+'\x20*'+_0xdb193a+_0x284ce5(0x104)+('👤\x20Username:\x20`'+_0x4d75d6['username']+'`\x0a')+(_0x284ce5(0x139)+_0x4d75d6[_0x284ce5(0x134)][_0x284ce5(0x132)]('en-US')+'\x0a');_0x4d75d6['ipAddress']&&(_0x56502e+=_0x284ce5(0x161)+_0x4d75d6[_0x284ce5(0xa5)]+'`\x0a');if(_0x4d75d6['userAgent']){const _0x25a30f=_0x4d75d6[_0x284ce5(0x95)][_0x284ce5(0x15f)]>0x32?_0x4d75d6[_0x284ce5(0x95)][_0x284ce5(0x10a)](0x0,0x32)+_0x284ce5(0x101):_0x4d75d6[_0x284ce5(0x95)];_0x56502e+=_0x284ce5(0x143)+_0x25a30f+'`\x0a';}!_0x4d75d6['success']&&(_0x56502e+=_0x284ce5(0xe4)),await this[_0x284ce5(0xca)](_0x1f95e2,_0x56502e,{'parse_mode':_0x284ce5(0xa3)}),console[_0x284ce5(0x114)]('✅\x20Login\x20notification\x20sent\x20for\x20shop\x20'+_0x1f95e2+':\x20'+(_0x4d75d6[_0x284ce5(0x171)]?'success':_0x284ce5(0xbe)));}catch(_0x39ca51){console[_0x284ce5(0xb4)](_0x284ce5(0x135),_0x39ca51);}}async[a49_0xf390f2(0xac)](_0x90b1e2,_0x3894b9){const _0x374795=a49_0xf390f2;try{const _0xe09fa1=await database_1['default']['shopSettings'][_0x374795(0xe5)]({'where':{'shopId':_0x90b1e2},'select':{'notificationApiError':!![]}});if(!_0xe09fa1?.[_0x374795(0xe7)]){console[_0x374795(0x114)](_0x374795(0x16e)+_0x90b1e2);return;}let _0x533ca4=_0x374795(0x12b)+(_0x374795(0x14e)+_0x3894b9[_0x374795(0x141)]+'\x20'+_0x3894b9[_0x374795(0x97)]+'`\x0a')+(_0x374795(0x139)+_0x3894b9[_0x374795(0x134)][_0x374795(0x132)]('en-US')+'\x0a');_0x3894b9[_0x374795(0x113)]&&(_0x533ca4+=_0x374795(0xbb)+_0x3894b9['statusCode']+'`\x0a'),_0x533ca4+='❌\x20Error:\x20`'+_0x3894b9[_0x374795(0x148)]+'`\x0a',_0x3894b9[_0x374795(0xfe)]&&(_0x533ca4+=_0x374795(0x16c)+_0x3894b9['requestId']+'`\x0a'),_0x533ca4+=_0x374795(0xce),await this[_0x374795(0xca)](_0x90b1e2,_0x533ca4,{'parse_mode':_0x374795(0xa3)}),console[_0x374795(0x114)](_0x374795(0x133)+_0x90b1e2+':\x20'+_0x3894b9[_0x374795(0x97)]);}catch(_0x59f3e4){console[_0x374795(0xb4)](_0x374795(0x109),_0x59f3e4);}}async[a49_0xf390f2(0xa8)](_0x5bf029,_0x21cace,_0x5d78bf){const _0x39f3c9=a49_0xf390f2;let _0x192ebe=_0x39f3c9(0xf0)+_0x21cace+'*\x0a\x0a';for(const [_0x320790,_0x1d0c6b]of Object['entries'](_0x5d78bf)){_0x1d0c6b!==null&&_0x1d0c6b!==undefined&&(_0x192ebe+=_0x320790+_0x39f3c9(0x152)+_0x1d0c6b+'`\x0a');}await this[_0x39f3c9(0xca)](_0x5bf029,_0x192ebe,{'parse_mode':_0x39f3c9(0xa3)});}['getBotInfo'](){const _0x2cbf26=a49_0xf390f2;return{'isActive':!!this[_0x2cbf26(0x172)],'username':this[_0x2cbf26(0x12a)]};}[a49_0xf390f2(0xab)](){const _0x2ff95d=a49_0xf390f2;this[_0x2ff95d(0x172)]&&(this[_0x2ff95d(0x172)][_0x2ff95d(0x163)](),this['bot']=null,console['log']('🛑\x20Telegram\x20bot\x20stopped'));}}exports[a49_0xf390f2(0x128)]=TelegramBotService,exports[a49_0xf390f2(0xd1)]=new TelegramBotService();function a49_0x8178(){const _0x1d8507=['findUnique','❌\x20Invalid\x20format.\x20Please\x20send\x20exactly\x202\x20parts\x20separated\x20by\x20space:\x0a\x0a','notificationApiError','Disconnect\x20the\x20previous\x20account\x20first\x20or\x20contact\x20administrator.','Payment\x20failed','text','blocked','\x20(@','🔗\x20TXID:\x20`','🏦\x20Method:\x20`','`\x20not\x20found.\x0a\x0a','🔔\x20*','shopId','📱\x20Telegram\x20notification:\x20gateway\x20\x22','✅\x20You\x20are\x20already\x20connected\x20to\x20shop\x20*','•\x20Payouts\x0a','✅\x20You\x20have\x20been\x20successfully\x20connected\x20to\x20the\x20notification\x20system!\x0a\x0a','•\x20Payouts\x0a\x0a','`.\x0a\x0a','❌\x20An\x20error\x20occurred.\x20Please\x20try\x20again\x20later.','❌\x20Shop\x20`','name','sendMessage','🔔\x20You\x20receive\x20notifications\x20about:\x0a','split','requestId','isVerified','40010qvyESC','...','Payment\x20expired','📝\x20Order\x20ID:\x20`','*\x0a\x0a','7624938FQzkUg','4PkYotn','\x0a👤\x20*Customer\x20Information:*\x0a','Use\x20/start\x20to\x20begin.','Failed\x20to\x20send\x20API\x20error\x20notification:','substring','✅\x20Connected\x20to\x20shop:\x20*','createdAt','node-telegram-bot-api','en-US','__esModule','Example:\x0a','sk_','notificationLogin','statusCode','log','❌\x20You\x20are\x20not\x20connected\x20to\x20a\x20shop.\x0a\x0a','TELEGRAM_BOT_USERNAME','❌\x20Shop\x20with\x20username\x20`','includes','shopSettings','getGatewayDisplayNameForTelegram','txid','❌\x20You\x20are\x20not\x20registered\x20in\x20the\x20system.\x0a\x0a','*.\x0a\x0a','allSettled','status','Contact\x20administrator.','New\x20payout\x20created','📝\x20Format:\x20`username\x20api_key`\x0a\x0a','publicKey','first_name','🔄\x20Reset\x20incomplete\x20verification\x20for\x20user\x20','../config/database','updatedAt','TelegramBotService','message','botUsername','🚨\x20*API\x20Error*\x0a\x0a','../types/gateway','\x20USDT*\x0a','🔍\x20*Debug\x20Information*\x0a\x0a','Username\x20must\x20contain\x20only\x20letters,\x20numbers\x20and\x20underscore\x20(3-50\x20characters).','✅\x20Welcome\x20back!\x0a\x0a','1025640XAcLFu','toLocaleString','✅\x20API\x20error\x20notification\x20sent\x20for\x20shop\x20','timestamp','Failed\x20to\x20send\x20login\x20notification:','To\x20receive\x20payment\x20notifications,\x20send\x20your\x20credentials\x20in\x20one\x20line:\x0a\x0a','🎉\x20*Congratulations!*\x0a\x0a','chat\x20not\x20found','📅\x20Time:\x20','API\x20key\x20must\x20start\x20with\x20`pk\x5c_`\x20or\x20`sk\x5c_`.','✅\x20You\x20have\x20been\x20successfully\x20disconnected\x20from\x20shop\x20*','chargebackAmount','📱\x20Login\x20notifications\x20disabled\x20for\x20shop\x20','...`\x0a\x0a','2028765PSUbbN','Use\x20/status\x20to\x20check\x20status\x20or\x20/disconnect\x20to\x20disconnect.','method','`appple\x20pk_aa6450d3f57afbefbb0f3f5be5ce6cca13037536afc5ccf14c81a6cbc7a07de5`\x0a\x0a','💻\x20Browser:\x20`','❌\x20You\x20are\x20not\x20connected\x20to\x20the\x20notification\x20system.','Telegram\x20bot\x20error:','adminNotes','telegramUser','errorMessage','Username:\x20`','secretKey','User\x20','last_name','❗️\x20Make\x20sure\x20to\x20separate\x20username\x20and\x20API\x20key\x20with\x20a\x20space!','🔗\x20Endpoint:\x20`','handleSingleLineVerification','...\x22','orderId',':\x20`','27JVstFX','🔄\x20Processing\x20single-line\x20verification\x20for\x20user\x20','username','ACTIVE','👤\x20Username:\x20`','polling_error','trapay_bot','📱\x20Your\x20Telegram\x20ID:\x20`','processing','Payment\x20successfully\x20paid','2591032PRPnQy','.\x20*','length','\x20marked\x20as\x20unverified\x20due\x20to\x20delivery\x20failure','🌐\x20IP\x20address:\x20`','🆔\x20Payment\x20ID:\x20`','stopPolling','\x22\x20->\x20display\x20\x22','user\x20is\x20deactivated','initializeBot','forEach','❌\x20Invalid\x20username\x20format:\x20`','map','botToken','287126nMNpua','🆔\x20Request\x20ID:\x20`','setupBotHandlers','📱\x20API\x20error\x20notifications\x20disabled\x20for\x20shop\x20','❌\x20Another\x20Telegram\x20account\x20is\x20already\x20connected\x20to\x20shop\x20`','amount','success','bot','`\x0a\x0a','Payout\x20completed','sendPayoutNotification','You\x20are\x20already\x20connected\x20to\x20shop:\x20*','userAgent','Error\x20in\x20handleSingleLineVerification:','endpoint','🏪\x20Available\x20shops\x20in\x20system:\x0a','startsWith','Error\x20handling\x20/debug\x20command:','\x20USD*\x0a','findMany','customerName','📊\x20*Connection\x20Status*\x0a\x0a','customerEmail','shop','Use\x20/start\x20to\x20connect.','🔌\x20User\x20','Markdown','✅\x20Telegram\x20user\x20','ipAddress','\x20initialized\x20successfully','❌\x20Invalid\x20API\x20key\x20format.\x0a\x0a','sendCustomNotification','from','❌\x20Failed\x20to\x20initialize\x20Telegram\x20bot:','stopBot','sendApiErrorNotification','test','Telegram\x20bot\x20polling\x20error:','toString','gateway','findFirst','Payment\x20refund','toLocaleDateString','error','env','/disconnect\x20-\x20disconnect\x20from\x20notifications','3861KSKmXB','\x20disconnected\x20from\x20shop\x20','Payment\x20is\x20being\x20processed','❌\x20An\x20error\x20occurred\x20while\x20verifying\x20data.','📊\x20Error\x20code:\x20`','Error\x20handling\x20/start\x20command:','Error\x20handling\x20message:','failed','onText','💰\x20Amount:\x20*','update','Failed\x20login\x20attempt','default','You\x20sent\x20','\x22,\x20apiKey=\x22','currency','❌\x20Please\x20use\x20/start\x20command\x20first','Expected\x20key\x20format:\x20`pk_...`\x20or\x20`sk_...`','warn','sendShopNotification','__importDefault','\x20\x20\x20Public\x20Key:\x20`','Payment\x20chargeback','\x0a💡\x20Check\x20your\x20request\x20or\x20contact\x20support.','telegramId','create','telegramBotService','•\x20New\x20payments\x0a','📧\x20Email:\x20`','📅\x20Date:\x20','\x20via\x20single-line\x20input','💸\x20Penalty\x20amount:\x20*','chat','•\x20Important\x20events\x0a\x0a','🔔\x20Notifications\x20are\x20active\x0a\x0a','❌\x20Failed\x20to\x20send\x20notification\x20to\x20Telegram\x20user\x20','851690uMIcDt','❌\x20Error\x20getting\x20debug\x20information.','🔔\x20You\x20will\x20now\x20receive\x20notifications\x20about:\x0a','`\x20is\x20inactive.\x0a\x0a','/status\x20-\x20check\x20connection\x20status\x0a','Available\x20usernames:\x0a','Error\x20sending\x20shop\x20notification:','✅\x20Notification\x20sent\x20to\x20Telegram\x20user\x20','\x20parts:\x20','\x0a⚠️\x20If\x20this\x20wasn\x27t\x20you,\x20change\x20your\x20password\x20immediately!'];a49_0x8178=function(){return _0x1d8507;};return a49_0x8178();}