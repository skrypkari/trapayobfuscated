'use strict';const a49_0x197890=a49_0x371a;(function(_0x2a1ab3,_0x30faea){const _0x42d94d=a49_0x371a,_0x7e1a45=_0x2a1ab3();while(!![]){try{const _0x133b6f=-parseInt(_0x42d94d(0xc9))/0x1*(parseInt(_0x42d94d(0xb9))/0x2)+-parseInt(_0x42d94d(0xdc))/0x3+-parseInt(_0x42d94d(0x128))/0x4*(parseInt(_0x42d94d(0xf3))/0x5)+parseInt(_0x42d94d(0xbb))/0x6*(parseInt(_0x42d94d(0xb8))/0x7)+parseInt(_0x42d94d(0x143))/0x8+-parseInt(_0x42d94d(0x19c))/0x9*(-parseInt(_0x42d94d(0x101))/0xa)+-parseInt(_0x42d94d(0xe7))/0xb*(-parseInt(_0x42d94d(0xae))/0xc);if(_0x133b6f===_0x30faea)break;else _0x7e1a45['push'](_0x7e1a45['shift']());}catch(_0x3a219d){_0x7e1a45['push'](_0x7e1a45['shift']());}}}(a49_0x45ed,0xa345e));function a49_0x371a(_0x256b9b,_0x549379){const _0x45ed84=a49_0x45ed();return a49_0x371a=function(_0x371a40,_0x5cb934){_0x371a40=_0x371a40-0xae;let _0x3b365f=_0x45ed84[_0x371a40];return _0x3b365f;},a49_0x371a(_0x256b9b,_0x549379);}function a49_0x45ed(){const _0x1a52c9=['‚ùå\x20–°–Ω–∞—á–∞–ª–∞\x20–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ\x20–∫–æ–º–∞–Ω–¥—É\x20/start','onText','TelegramBotService','...','txid','428wQJBHv','create',',\x20reset\x20shop\x20association','findFirst','`pk_aa6450d3f57afbefbb0f3f5be5ce6cca13037536afc5ccf14c81a6cbc7a07de5`','Username\x20–¥–æ–ª–∂–µ–Ω\x20—Å–æ–¥–µ—Ä–∂–∞—Ç—å\x20—Ç–æ–ª—å–∫–æ\x20–±—É–∫–≤—ã,\x20—Ü–∏—Ñ—Ä—ã\x20–∏\x20–ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ\x20(3-50\x20—Å–∏–º–≤–æ–ª–æ–≤).','–°–æ–∑–¥–∞–Ω–∞\x20–Ω–æ–≤–∞—è\x20–≤—ã–ø–ª–∞—Ç–∞','üõë\x20Telegram\x20bot\x20stopped','Error\x20handling\x20/status\x20command:','‚úÖ\x20–í—ã\x20—É–∂–µ\x20–ø–æ–¥–∫–ª—é—á–µ–Ω—ã\x20–∫\x20–º–∞–≥–∞–∑–∏–Ω—É\x20*','botUsername','üîÑ\x20Processing\x20API\x20key\x20verification\x20for\x20user\x20','–í—ã\x20—É–∂–µ\x20–ø–æ–¥–∫–ª—é—á–µ–Ω—ã\x20–∫\x20–º–∞–≥–∞–∑–∏–Ω—É:\x20*','–î–ª—è\x20–ø–æ–ª—É—á–µ–Ω–∏—è\x20—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π\x20–æ\x20–ø–ª–∞—Ç–µ–∂–∞—Ö,\x20–ø–æ–∂–∞–ª—É–π—Å—Ç–∞:\x0a\x0a','2Ô∏è‚É£\x20–ó–∞—Ç–µ–º\x20–≤–∞—à\x20API\x20–∫–ª—é—á\x20(–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è\x20—Å\x20pk\x5c_\x20–∏–ª–∏\x20sk\x5c_)\x0a\x0a','–í—ã–ø–ª–∞—Ç–∞\x20–æ—Ç–∫–ª–æ–Ω–µ–Ω–∞','‚Ä¢\x20–í—ã–ø–ª–∞—Ç–∞—Ö\x0a','Markdown','warn','ipAddress','userAgent','\x0a–ü—Ä–æ–≤–µ—Ä—å—Ç–µ\x20–ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å\x20–Ω–∞–ø–∏—Å–∞–Ω–∏—è\x20–∏\x20–ø–æ–ø—Ä–æ–±—É–π—Ç–µ\x20—Å–Ω–æ–≤–∞.','chargebackAmount','2Ô∏è‚É£\x20API\x20–∫–ª—é—á','findMany','sendPaymentNotification','status','2295648gkRZiR','handleApiKeyVerification','publicKey','toLocaleDateString','/status\x20-\x20–ø—Ä–æ–≤–µ—Ä–∏—Ç—å\x20—Å—Ç–∞—Ç—É—Å\x20–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è\x0a','filter','–ú–∞–≥–∞–∑–∏–Ω:\x20*','üìù\x20–ó–∞–º–µ—Ç–∫–∏:\x20','../config/database','botToken','API\x20–∫–ª—é—á\x20–¥–æ–ª–∂–µ–Ω\x20–Ω–∞—á–∏–Ω–∞—Ç—å—Å—è\x20—Å\x20`pk\x5c_`\x20–∏–ª–∏\x20`sk\x5c_`.','__esModule','–ù–µ—É–¥–∞—á–Ω–∞—è\x20–ø–æ–ø—ã—Ç–∫–∞\x20–≤—Ö–æ–¥–∞','üí∏\x20–°—É–º–º–∞:\x20*','üì±\x20Created\x20new\x20Telegram\x20user:\x20','trim','Telegram\x20bot\x20error:','node-telegram-bot-api','default','amount','–ü–ª–∞—Ç–µ–∂\x20–æ—Ç–∫–ª–æ–Ω–µ–Ω','*\x0a\x0a','üÜî\x20ID\x20–ø–ª–∞—Ç–µ–∂–∞:\x20`','No\x20verified\x20Telegram\x20users\x20found\x20for\x20shop\x20','includes','chat','‚úÖ\x20–í—ã\x20—É—Å–ø–µ—à–Ω–æ\x20–ø–æ–¥–∫–ª—é—á–µ–Ω—ã\x20–∫\x20—Å–∏—Å—Ç–µ–º–µ\x20—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π!\x0a\x0a','Error\x20in\x20handleUsernameVerification:','sendPayoutNotification','üë§\x20Username:\x20`','sendShopNotification','–î–ª—è\x20–ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ\x20–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è\x20–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ\x20–∫–æ–º–∞–Ω–¥—É\x20/start','telegramBotService','handleUsernameVerification','–ü—Ä–æ–≤–µ—Ä—å—Ç–µ\x20–ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å\x20–∫–ª—é—á–∞\x20–∏–ª–∏\x20–Ω–∞—á–Ω–∏—Ç–µ\x20–∑–∞–Ω–æ–≤–æ\x20—Å\x20–∫–æ–º–∞–Ω–¥—ã\x20/start\x0a\x0a','Error\x20in\x20handleApiKeyVerification:',':\x20apiKey=\x22','–ö–æ–º–∞–Ω–¥—ã:\x0a','last_name','sendMessage','shop','‚Ä¢\x20–í–∞–∂–Ω—ã—Ö\x20—Å–æ–±—ã—Ç–∏—è—Ö\x0a\x0a','Username:\x20`','üîî\x20–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è\x20–∞–∫—Ç–∏–≤–Ω—ã\x0a\x0a','first_name','‚ùå\x20–ù–µ–≤–µ—Ä–Ω—ã–π\x20—Ñ–æ—Ä–º–∞—Ç\x20API\x20–∫–ª—é—á–∞.\x0a\x0a','forEach','ru-RU','pk_','Error\x20in\x20handleMultilineVerification:','length','‚úÖ\x20Login\x20notification\x20sent\x20for\x20shop\x20','üì±\x20–í–∞—à\x20Telegram\x20ID:\x20`','substring','‚ùå\x20–ü—Ä–æ–∏–∑–æ—à–ª–∞\x20–æ—à–∏–±–∫–∞\x20–ø—Ä–∏\x20–ø—Ä–æ–≤–µ—Ä–∫–µ\x20API\x20–∫–ª—é—á–∞.','–ü–æ–∂–∞–ª—É–π—Å—Ç–∞,\x20–æ—Ç–ø—Ä–∞–≤—å—Ç–µ:\x0a','üîî\x20–¢–µ–ø–µ—Ä—å\x20–≤—ã\x20–±—É–¥–µ—Ç–µ\x20–ø–æ–ª—É—á–∞—Ç—å\x20—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è\x20–æ:\x0a','‚Ä¢\x20`','‚ùå\x20–ú–∞–≥–∞–∑–∏–Ω\x20`','split','endpoint','toString','üìù\x20Temporary\x20shop\x20association\x20created\x20for\x20user\x20','–í—ã\x20–º–æ–∂–µ—Ç–µ\x20–æ—Ç–ø—Ä–∞–≤–∏—Ç—å\x20–∏—Ö\x20–≤\x20–æ–¥–Ω–æ–º\x20—Å–æ–æ–±—â–µ–Ω–∏–∏\x20—á–µ—Ä–µ–∑\x20–ø–µ—Ä–µ–Ω–æ—Å\x20—Å—Ç—Ä–æ–∫–∏:\x0a','–°–Ω–∞—á–∞–ª–∞\x20–æ—Ç–∫–ª—é—á–∏—Ç–µ\x20–ø—Ä–µ–¥—ã–¥—É—â–∏–π\x20–∞–∫–∫–∞—É–Ω—Ç\x20–∏–ª–∏\x20–æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å\x20–∫\x20–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É.','ACTIVE','–°–æ–∑–¥–∞–Ω\x20–Ω–æ–≤—ã–π\x20–ø–ª–∞—Ç–µ–∂','User\x20','.\x20*','setupBotHandlers','error','TELEGRAM_BOT_USERNAME','text','–ü–ª–∞—Ç–µ–∂\x20–∏—Å—Ç–µ–∫','üìä\x20–ö–æ–¥\x20–æ—à–∏–±–∫–∏:\x20`','‚ùå\x20–ü—Ä–æ–∏–∑–æ—à–ª–∞\x20–æ—à–∏–±–∫–∞\x20–ø—Ä–∏\x20–ø–æ–ª—É—á–µ–Ω–∏–∏\x20–æ—Ç–ª–∞–¥–æ—á–Ω–æ–π\x20–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.','‚ùóÔ∏è\x20–£–±–µ–¥–∏—Ç–µ—Å—å,\x20—á—Ç–æ\x20–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç–µ\x20–¥–∞–Ω–Ω—ã–µ\x20–≤\x20–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º\x20–ø–æ—Ä—è–¥–∫–µ!','–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ\x20/status\x20–¥–ª—è\x20–ø—Ä–æ–≤–µ—Ä–∫–∏\x20—Å—Ç–∞—Ç—É—Å–∞.','‚úÖ\x20Telegram\x20user\x20','‚úÖ\x20–í—ã\x20—É—Å–ø–µ—à–Ω–æ\x20–æ—Ç–∫–ª—é—á–µ–Ω—ã\x20–æ—Ç\x20–º–∞–≥–∞–∑–∏–Ω–∞\x20*','–û–∂–∏–¥–∞–µ–º—ã–π\x20—Ñ–æ—Ä–º–∞—Ç\x20–∫–ª—é—á–∞:\x20`pk_...`\x20–∏–ª–∏\x20`sk_...`','secretKey','‚úÖ\x20–ü–æ–¥–∫–ª—é—á–µ–Ω\x20–∫\x20–º–∞–≥–∞–∑–∏–Ω—É:\x20*','from','stopPolling','username','Failed\x20to\x20send\x20login\x20notification:','–ü—Ä–æ–≤–µ—Ä—å—Ç–µ\x20–ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å\x20–Ω–∞–ø–∏—Å–∞–Ω–∏—è\x20–∏\x20–ø–æ–ø—Ä–æ–±—É–π—Ç–µ\x20—Å–Ω–æ–≤–∞.','TELEGRAM_BOT_TOKEN','10960299FUPUGP','–ß–∞—Ä–¥–∂–±—ç–∫\x20–ø–æ\x20–ø–ª–∞—Ç–µ–∂—É','orderId','18480480ByRJpQ','entries','–û—Ç–ø—Ä–∞–≤—å—Ç–µ\x20username\x20–∏\x20API\x20–∫–ª—é—á\x20–≤\x20–æ–¥–Ω–æ–º\x20—Å–æ–æ–±—â–µ–Ω–∏–∏\x20—á–µ—Ä–µ–∑\x20–ø–µ—Ä–µ–Ω–æ—Å\x20—Å—Ç—Ä–æ–∫–∏\x20–∏–ª–∏\x20–æ—Ç–¥–µ–ª—å–Ω—ã–º–∏\x20—Å–æ–æ–±—â–µ–Ω–∏—è–º–∏.\x0a\x0a','üíª\x20–ë—Ä–∞—É–∑–µ—Ä:\x20`','‚úÖ\x20–î–æ–±—Ä–æ\x20–ø–æ–∂–∞–ª–æ–≤–∞—Ç—å\x20–æ–±—Ä–∞—Ç–Ω–æ!\x0a\x0a','‚ùå\x20–í—ã\x20–Ω–µ\x20–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã\x20–≤\x20—Å–∏—Å—Ç–µ–º–µ.\x0a\x0a','üîó\x20Endpoint:\x20`','findUnique','üè™\x20–®–ª—é–∑:\x20`','failed','7icqqoz','816078bXkLFu','bot','1368186eVRxkG','telegramId','\x20USD*\x0a','üìÖ\x20–î–∞—Ç–∞\x20–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:\x20','update','‚Ä¢\x20–ù–æ–≤—ã—Ö\x20–ø–ª–∞—Ç–µ–∂–∞—Ö\x0a','blocked','handleMultilineVerification','Failed\x20to\x20send\x20API\x20error\x20notification:','‚ùå\x20Invalid\x20API\x20key\x20for\x20user\x20','Telegram\x20bot\x20not\x20initialized,\x20cannot\x20send\x20notification',':\x20username=\x22','üîó\x20TXID:\x20`','Error\x20sending\x20shop\x20notification:','3sJXOuE','`\x20–Ω–µ–∞–∫—Ç–∏–≤–µ–Ω.\x0a\x0a','polling_error','shopId','\x0a‚ö†Ô∏è\x20–ï—Å–ª–∏\x20—ç—Ç–æ\x20–Ω–µ\x20–≤—ã,\x20–Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ\x20—Å–º–µ–Ω–∏—Ç–µ\x20–ø–∞—Ä–æ–ª—å!','notificationLogin','telegramUser','shopSettings','toLocaleString','\x20verified\x20for\x20shop\x20','üì±\x20API\x20error\x20notifications\x20disabled\x20for\x20shop\x20','‚úÖ\x20Username\x20`','`\x0a\x0a','currency','statusCode','isVerified','\x20\x20\x20Username:\x20`','sendCustomNotification','‚ùå\x20API\x20–∫–ª—é—á\x20–Ω–µ\x20—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç\x20–º–∞–≥–∞–∑–∏–Ω—É\x20`','1486479NyjeAB','–í—ã–ø–ª–∞—Ç–∞\x20–∑–∞–≤–µ—Ä—à–µ–Ω–∞','...\x22','/disconnect\x20-\x20–æ—Ç–∫–ª—é—á–∏—Ç—å—Å—è\x20–æ—Ç\x20—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π','1Ô∏è‚É£\x20–°–Ω–∞—á–∞–ª–∞\x20–≤–∞—à\x20username\x20(—Ç–æ–ª—å–∫–æ\x20–±—É–∫–≤—ã,\x20—Ü–∏—Ñ—Ä—ã\x20–∏\x20–ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ)\x0a','üéâ\x20*–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!*\x0a\x0a','üí∞\x20–°—É–º–º–∞:\x20*','üè™\x20–î–æ—Å—Ç—É–ø–Ω—ã–µ\x20–º–∞–≥–∞–∑–∏–Ω—ã\x20–≤\x20—Å–∏—Å—Ç–µ–º–µ:\x0a','initializeBot','üÜî\x20Request\x20ID:\x20`','\x20USDT*\x0a','11kJCyAt','üîç\x20*–û—Ç–ª–∞–¥–æ—á–Ω–∞—è\x20–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è*\x0a\x0a','üè¶\x20–ú–µ—Ç–æ–¥:\x20`','üì±\x20Login\x20notifications\x20disabled\x20for\x20shop\x20','requestId','–£—Å–ø–µ—à–Ω—ã–π\x20–≤—Ö–æ–¥\x20–≤\x20—Å–∏—Å—Ç–µ–º—É','getBotInfo','üìù\x20Order\x20ID:\x20`','–ü—Ä–æ–≤–µ—Ä—å—Ç–µ\x20–ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å\x20–∫–ª—é—á–∞\x20–∏\x20–ø–æ–ø—Ä–æ–±—É–π—Ç–µ\x20—Å–Ω–æ–≤–∞.\x0a\x0a','–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ\x20/start\x20–¥–ª—è\x20–Ω–∞—á–∞–ª–∞\x20—Ä–∞–±–æ—Ç—ã.','sk_','‚úÖ\x20Notification\x20sent\x20to\x20Telegram\x20user\x20','41330hooVVm','sendLoginNotification','\x20(@','‚ùå\x20Failed\x20to\x20initialize\x20Telegram\x20bot:','map','‚ùå\x20–ú–∞–≥–∞–∑–∏–Ω\x20—Å\x20username\x20`','`appple`\x0a','‚ùå\x20–ö\x20–º–∞–≥–∞–∑–∏–Ω—É\x20`','–û–±—Ä–∞—Ç–∏—Ç–µ—Å—å\x20–∫\x20–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É.','Error\x20handling\x20/debug\x20command:','TELEGRAM_BOT_TOKEN\x20not\x20found\x20in\x20environment\x20variables','name','test','log','10UoDOnU','success','–¢–µ–ø–µ—Ä—å\x20–æ—Ç–ø—Ä–∞–≤—å—Ç–µ\x20–≤–∞—à\x20*API\x20–∫–ª—é—á*\x20(–ø—É–±–ª–∏—á–Ω—ã–π\x20–∏–ª–∏\x20—Å–µ–∫—Ä–µ—Ç–Ω—ã–π\x20–∫–ª—é—á,\x20–Ω–∞—á–∏–Ω–∞—é—â–∏–π—Å—è\x20—Å\x20`pk\x5c_`\x20–∏–ª–∏\x20`sk\x5c_`)','message','Error\x20handling\x20/start\x20command:','üîî\x20–í—ã\x20–ø–æ–ª—É—á–∞–µ—Ç–µ\x20—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è\x20–æ:\x0a','üì±\x20–ú–∞–≥–∞–∑–∏–Ω:\x20*','adminNotes','üåê\x20IP\x20–∞–¥—Ä–µ—Å:\x20`','\x20via\x20multiline\x20input','errorMessage','–ü–ª–∞—Ç–µ–∂\x20—É—Å–ø–µ—à–Ω–æ\x20–æ–ø–ª–∞—á–µ–Ω','`\x20(','...`\x0a\x0a','‚Ä¢\x20–ò–∑–º–µ–Ω–µ–Ω–∏–∏\x20—Å—Ç–∞—Ç—É—Å–∞\x20–ø–ª–∞—Ç–µ–∂–µ–π\x0a','\x20\x20\x20Status:\x20','–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ\x20/status\x20–¥–ª—è\x20–ø—Ä–æ–≤–µ—Ä–∫–∏\x20—Å—Ç–∞—Ç—É—Å–∞\x20–∏–ª–∏\x20/disconnect\x20–¥–ª—è\x20–æ—Ç–∫–ª—é—á–µ–Ω–∏—è.','üîÑ\x20Processing\x20multiline\x20verification\x20for\x20user\x20','chargeback','–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ\x20/start\x20–¥–ª—è\x20–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.','gateway','startsWith','`pk_aa6450d3f57afbefbb0f3f5be5ce6cca13037536afc5ccf14c81a6cbc7a07de5`\x0a\x0a','timestamp','‚ùå\x20–û—à–∏–±–∫–∞:\x20`','üìÖ\x20–î–∞—Ç–∞:\x20','‚ùå\x20–ù–µ–≤–µ—Ä–Ω—ã–π\x20—Ñ–æ—Ä–º–∞—Ç\x20–¥–∞–Ω–Ω—ã—Ö.\x0a\x0a','‚ùå\x20–ü—Ä–æ–∏–∑–æ—à–ª–∞\x20–æ—à–∏–±–∫–∞.\x20–ü–æ–ø—Ä–æ–±—É–π—Ç–µ\x20–ø–æ–∑–∂–µ.','üîî\x20*','üîÑ\x20Processing\x20username\x20verification\x20for\x20user\x20','`\x20–Ω–∞–π–¥–µ–Ω!\x0a\x0a','‚ùå\x20–í—ã\x20–Ω–µ\x20–ø–æ–¥–∫–ª—é—á–µ–Ω—ã\x20–∫\x20—Å–∏—Å—Ç–µ–º–µ\x20—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.','*.\x0a\x0a','–ü—Ä–∏–º–µ—Ä:\x0a'];a49_0x45ed=function(){return _0x1a52c9;};return a49_0x45ed();}var __importDefault=this&&this['__importDefault']||function(_0x44058c){const _0x368502=a49_0x371a;return _0x44058c&&_0x44058c[_0x368502(0x14e)]?_0x44058c:{'default':_0x44058c};};Object['defineProperty'](exports,a49_0x197890(0x14e),{'value':!![]}),exports[a49_0x197890(0x163)]=exports[a49_0x197890(0x125)]=void 0x0;const node_telegram_bot_api_1=__importDefault(require(a49_0x197890(0x154))),database_1=__importDefault(require(a49_0x197890(0x14b)));class TelegramBotService{constructor(){const _0x2317d3=a49_0x197890;this[_0x2317d3(0xba)]=null,this['botToken']=process['env'][_0x2317d3(0x19b)]||'',this[_0x2317d3(0x132)]=process['env'][_0x2317d3(0x18a)]||'trapay_bot',this[_0x2317d3(0x14c)]?this[_0x2317d3(0xe4)]():console[_0x2317d3(0x13a)](_0x2317d3(0xfd));}[a49_0x197890(0xe4)](){const _0x28f091=a49_0x197890;try{this['bot']=new node_telegram_bot_api_1['default'](this[_0x28f091(0x14c)],{'polling':!![]}),this[_0x28f091(0x188)](),console[_0x28f091(0x100)]('‚úÖ\x20Telegram\x20bot\x20@'+this[_0x28f091(0x132)]+'\x20initialized\x20successfully');}catch(_0x35cab9){console[_0x28f091(0x189)](_0x28f091(0xf6),_0x35cab9);}}['setupBotHandlers'](){const _0x2cc7e8=a49_0x197890;if(!this[_0x2cc7e8(0xba)])return;this[_0x2cc7e8(0xba)][_0x2cc7e8(0x124)](/\/start/,async _0x34f175=>{const _0x4df6b2=_0x2cc7e8,_0x63912c=_0x34f175[_0x4df6b2(0x15c)]['id'],_0x319bf3=_0x34f175[_0x4df6b2(0x196)]?.['id'][_0x4df6b2(0x180)](),_0x41e38a=_0x34f175[_0x4df6b2(0x196)]?.[_0x4df6b2(0x198)],_0x2b7458=_0x34f175[_0x4df6b2(0x196)]?.[_0x4df6b2(0x16f)],_0x3936b9=_0x34f175[_0x4df6b2(0x196)]?.[_0x4df6b2(0x169)];if(!_0x319bf3)return;try{let _0x25eeae=await database_1['default'][_0x4df6b2(0xcf)][_0x4df6b2(0xb5)]({'where':{'telegramId':_0x319bf3},'include':{'shop':!![]}});!_0x25eeae?(_0x25eeae=await database_1[_0x4df6b2(0x155)]['telegramUser'][_0x4df6b2(0x129)]({'data':{'telegramId':_0x319bf3,'username':_0x41e38a,'firstName':_0x2b7458,'lastName':_0x3936b9,'isVerified':![],'shopId':null},'include':{'shop':!![]}}),console[_0x4df6b2(0x100)](_0x4df6b2(0x151)+_0x319bf3+_0x4df6b2(0xf5)+_0x41e38a+')')):_0x25eeae=await database_1[_0x4df6b2(0x155)][_0x4df6b2(0xcf)]['update']({'where':{'telegramId':_0x319bf3},'data':{'username':_0x41e38a,'firstName':_0x2b7458,'lastName':_0x3936b9},'include':{'shop':!![]}}),_0x25eeae['isVerified']&&_0x25eeae[_0x4df6b2(0xcc)]&&_0x25eeae['shop']?await this[_0x4df6b2(0xba)]?.[_0x4df6b2(0x16a)](_0x63912c,_0x4df6b2(0xb2)+(_0x4df6b2(0x134)+_0x25eeae['shop']['name']+'*\x0a')+(_0x4df6b2(0x16d)+_0x25eeae[_0x4df6b2(0x16b)][_0x4df6b2(0x198)]+'`\x0a\x0a')+_0x4df6b2(0x106)+'‚Ä¢\x20–ù–æ–≤—ã—Ö\x20–ø–ª–∞—Ç–µ–∂–∞—Ö\x0a'+_0x4df6b2(0x10f)+'‚Ä¢\x20–í—ã–ø–ª–∞—Ç–∞—Ö\x0a\x0a'+_0x4df6b2(0x168)+'/status\x20-\x20–ø—Ä–æ–≤–µ—Ä–∏—Ç—å\x20—Å—Ç–∞—Ç—É—Å\x20–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è\x0a'+_0x4df6b2(0xdf),{'parse_mode':'Markdown'}):(_0x25eeae[_0x4df6b2(0xcc)]&&!_0x25eeae[_0x4df6b2(0xd8)]&&(await database_1['default'][_0x4df6b2(0xcf)][_0x4df6b2(0xbf)]({'where':{'telegramId':_0x319bf3},'data':{'shopId':null,'isVerified':![]}}),console[_0x4df6b2(0x100)]('üîÑ\x20Reset\x20incomplete\x20verification\x20for\x20user\x20'+_0x319bf3)),await this[_0x4df6b2(0xba)]?.[_0x4df6b2(0x16a)](_0x63912c,'ü§ñ\x20–î–æ–±—Ä–æ\x20–ø–æ–∂–∞–ª–æ–≤–∞—Ç—å\x20–≤\x20—Å–∏—Å—Ç–µ–º—É\x20—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π\x20TesSoft\x20Payment!\x0a\x0a'+_0x4df6b2(0x135)+'1Ô∏è‚É£\x20–û—Ç–ø—Ä–∞–≤—å—Ç–µ\x20–≤–∞—à\x20*username*\x20(–ª–æ–≥–∏–Ω\x20–æ—Ç\x20–ø–∞–Ω–µ–ª–∏)\x0a'+'2Ô∏è‚É£\x20–ó–∞—Ç–µ–º\x20–æ—Ç–ø—Ä–∞–≤—å—Ç–µ\x20–≤–∞—à\x20*API\x20–∫–ª—é—á*\x0a\x0a'+'–í—ã\x20–º–æ–∂–µ—Ç–µ\x20–æ—Ç–ø—Ä–∞–≤–∏—Ç—å\x20–∏—Ö\x20–≤\x20–æ–¥–Ω–æ–º\x20—Å–æ–æ–±—â–µ–Ω–∏–∏\x20—á–µ—Ä–µ–∑\x20–ø–µ—Ä–µ–Ω–æ—Å\x20—Å—Ç—Ä–æ–∫–∏\x20–∏–ª–∏\x20–æ—Ç–¥–µ–ª—å–Ω—ã–º–∏\x20—Å–æ–æ–±—â–µ–Ω–∏—è–º–∏:\x0a\x0a'+_0x4df6b2(0x122)+_0x4df6b2(0xf9)+_0x4df6b2(0x117)+_0x4df6b2(0x18f),{'parse_mode':_0x4df6b2(0x139)}));}catch(_0x4d85a0){console[_0x4df6b2(0x189)](_0x4df6b2(0x105),_0x4d85a0),await this[_0x4df6b2(0xba)]?.[_0x4df6b2(0x16a)](_0x63912c,'‚ùå\x20–ü—Ä–æ–∏–∑–æ—à–ª–∞\x20–æ—à–∏–±–∫–∞.\x20–ü–æ–ø—Ä–æ–±—É–π—Ç–µ\x20–ø–æ–∑–∂–µ.');}}),this[_0x2cc7e8(0xba)][_0x2cc7e8(0x124)](/\/disconnect/,async _0x12c3f9=>{const _0x29038b=_0x2cc7e8,_0x426897=_0x12c3f9[_0x29038b(0x15c)]['id'],_0x3fe014=_0x12c3f9[_0x29038b(0x196)]?.['id']['toString']();if(!_0x3fe014)return;try{const _0x483e7a=await database_1[_0x29038b(0x155)]['telegramUser'][_0x29038b(0xb5)]({'where':{'telegramId':_0x3fe014},'include':{'shop':!![]}});if(!_0x483e7a||!_0x483e7a[_0x29038b(0xd8)]||!_0x483e7a[_0x29038b(0xcc)]){await this['bot']?.[_0x29038b(0x16a)](_0x426897,_0x29038b(0x120));return;}const _0x3320f3=_0x483e7a[_0x29038b(0x16b)]?.[_0x29038b(0xfe)]||'–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π\x20–º–∞–≥–∞–∑–∏–Ω';await database_1[_0x29038b(0x155)][_0x29038b(0xcf)][_0x29038b(0xbf)]({'where':{'telegramId':_0x3fe014},'data':{'shopId':null,'isVerified':![]}}),console['log']('üîå\x20User\x20'+_0x3fe014+'\x20disconnected\x20from\x20shop\x20'+_0x483e7a['shopId']),await this[_0x29038b(0xba)]?.[_0x29038b(0x16a)](_0x426897,_0x29038b(0x192)+_0x3320f3+_0x29038b(0x121)+_0x29038b(0x162),{'parse_mode':_0x29038b(0x139)});}catch(_0x19d0c4){console[_0x29038b(0x189)]('Error\x20handling\x20/disconnect\x20command:',_0x19d0c4),await this['bot']?.[_0x29038b(0x16a)](_0x426897,'‚ùå\x20–ü—Ä–æ–∏–∑–æ—à–ª–∞\x20–æ—à–∏–±–∫–∞.\x20–ü–æ–ø—Ä–æ–±—É–π—Ç–µ\x20–ø–æ–∑–∂–µ.');}}),this[_0x2cc7e8(0xba)][_0x2cc7e8(0x124)](/\/status/,async _0x3354c2=>{const _0x49cd1f=_0x2cc7e8,_0x25b2b0=_0x3354c2[_0x49cd1f(0x15c)]['id'],_0x39e0fb=_0x3354c2[_0x49cd1f(0x196)]?.['id'][_0x49cd1f(0x180)]();if(!_0x39e0fb)return;try{const _0x110e43=await database_1[_0x49cd1f(0x155)]['telegramUser'][_0x49cd1f(0xb5)]({'where':{'telegramId':_0x39e0fb},'include':{'shop':!![]}});if(!_0x110e43){await this[_0x49cd1f(0xba)]?.[_0x49cd1f(0x16a)](_0x25b2b0,_0x49cd1f(0xb3)+_0x49cd1f(0xf0));return;}if(!_0x110e43[_0x49cd1f(0xd8)]||!_0x110e43[_0x49cd1f(0xcc)]||!_0x110e43[_0x49cd1f(0x16b)]){await this[_0x49cd1f(0xba)]?.['sendMessage'](_0x25b2b0,'‚ùå\x20–í—ã\x20–Ω–µ\x20–ø–æ–¥–∫–ª—é—á–µ–Ω—ã\x20–∫\x20–º–∞–≥–∞–∑–∏–Ω—É.\x0a\x0a'+_0x49cd1f(0x114));return;}await this[_0x49cd1f(0xba)]?.[_0x49cd1f(0x16a)](_0x25b2b0,'üìä\x20*–°—Ç–∞—Ç—É—Å\x20–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è*\x0a\x0a'+(_0x49cd1f(0x195)+_0x110e43[_0x49cd1f(0x16b)]['name']+'*\x0a')+(_0x49cd1f(0x160)+_0x110e43[_0x49cd1f(0x16b)][_0x49cd1f(0x198)]+'`\x0a')+(_0x49cd1f(0xbe)+_0x110e43['updatedAt'][_0x49cd1f(0x146)](_0x49cd1f(0x172))+'\x0a\x0a')+_0x49cd1f(0x16e)+_0x49cd1f(0x168)+_0x49cd1f(0xdf),{'parse_mode':_0x49cd1f(0x139)});}catch(_0x4a84f4){console['error'](_0x49cd1f(0x130),_0x4a84f4),await this['bot']?.[_0x49cd1f(0x16a)](_0x25b2b0,_0x49cd1f(0x11c));}}),this[_0x2cc7e8(0xba)][_0x2cc7e8(0x124)](/\/debug/,async _0x1bdb5f=>{const _0x5b8388=_0x2cc7e8,_0x26755f=_0x1bdb5f[_0x5b8388(0x15c)]['id'],_0x505b5e=_0x1bdb5f[_0x5b8388(0x196)]?.['id'][_0x5b8388(0x180)]();if(!_0x505b5e)return;try{const _0x2a4ddf=await database_1[_0x5b8388(0x155)]['shop']['findMany']({'select':{'id':!![],'name':!![],'username':!![],'status':!![],'publicKey':!![]},'take':0xa});let _0x4cae4f=_0x5b8388(0xe8);_0x4cae4f+=_0x5b8388(0x177)+_0x505b5e+_0x5b8388(0xd5),_0x4cae4f+=_0x5b8388(0xe3),_0x2a4ddf[_0x5b8388(0x171)]((_0x598b16,_0x126be6)=>{const _0xe10dff=_0x5b8388;_0x4cae4f+=_0x126be6+0x1+_0xe10dff(0x187)+_0x598b16[_0xe10dff(0xfe)]+'*\x0a',_0x4cae4f+=_0xe10dff(0xd9)+_0x598b16[_0xe10dff(0x198)]+'`\x0a',_0x4cae4f+=_0xe10dff(0x110)+_0x598b16[_0xe10dff(0x142)]+'\x0a',_0x4cae4f+='\x20\x20\x20Public\x20Key:\x20`'+_0x598b16[_0xe10dff(0x145)][_0xe10dff(0x178)](0x0,0xf)+_0xe10dff(0x10e);}),await this[_0x5b8388(0xba)]?.['sendMessage'](_0x26755f,_0x4cae4f,{'parse_mode':_0x5b8388(0x139)});}catch(_0x5785e9){console[_0x5b8388(0x189)](_0x5b8388(0xfc),_0x5785e9),await this['bot']?.[_0x5b8388(0x16a)](_0x26755f,_0x5b8388(0x18e));}}),this[_0x2cc7e8(0xba)]['on'](_0x2cc7e8(0x104),async _0x4efe55=>{const _0x761c3=_0x2cc7e8;if(_0x4efe55['text']?.[_0x761c3(0x116)]('/'))return;const _0x187246=_0x4efe55[_0x761c3(0x15c)]['id'],_0x30dfea=_0x4efe55[_0x761c3(0x196)]?.['id'][_0x761c3(0x180)](),_0x1f9b39=_0x4efe55[_0x761c3(0x18b)]?.['trim']();if(!_0x30dfea||!_0x1f9b39)return;try{const _0xbe8da3=await database_1[_0x761c3(0x155)][_0x761c3(0xcf)]['findUnique']({'where':{'telegramId':_0x30dfea},'include':{'shop':!![]}});if(!_0xbe8da3){await this[_0x761c3(0xba)]?.['sendMessage'](_0x187246,_0x761c3(0x123));return;}if(_0xbe8da3[_0x761c3(0xd8)]&&_0xbe8da3['shopId']&&_0xbe8da3['shop']){await this['bot']?.[_0x761c3(0x16a)](_0x187246,_0x761c3(0x131)+_0xbe8da3[_0x761c3(0x16b)]['name']+_0x761c3(0x121)+_0x761c3(0x111),{'parse_mode':'Markdown'});return;}const _0x121442=_0x1f9b39[_0x761c3(0x17e)]('\x0a')[_0x761c3(0xf7)](_0x489056=>_0x489056[_0x761c3(0x152)]())[_0x761c3(0x148)](_0x379918=>_0x379918[_0x761c3(0x175)]>0x0);if(_0x121442['length']===0x2){const [_0x28f4b2,_0x2470b7]=_0x121442;await this[_0x761c3(0xc2)](_0x187246,_0x30dfea,_0x28f4b2,_0x2470b7);}else{if(_0x121442[_0x761c3(0x175)]===0x1){const _0x404419=_0x121442[0x0];if(_0x404419[_0x761c3(0x175)]>=0x3&&_0x404419[_0x761c3(0x175)]<=0x32&&/^[a-zA-Z0-9_]+$/[_0x761c3(0xff)](_0x404419))await this[_0x761c3(0x164)](_0x187246,_0x30dfea,_0x404419);else _0x404419[_0x761c3(0x116)](_0x761c3(0x173))||_0x404419['startsWith'](_0x761c3(0xf1))?await this[_0x761c3(0x144)](_0x187246,_0x30dfea,_0x404419):await this['bot']?.[_0x761c3(0x16a)](_0x187246,_0x761c3(0x11b)+_0x761c3(0x17a)+_0x761c3(0xe0)+_0x761c3(0x136)+_0x761c3(0x182)+_0x761c3(0xf9)+_0x761c3(0x12c),{'parse_mode':'Markdown'});}else await this[_0x761c3(0xba)]?.[_0x761c3(0x16a)](_0x187246,_0x761c3(0x11b)+_0x761c3(0xb0)+_0x761c3(0x122)+_0x761c3(0xf9)+'`pk_aa6450d3f57afbefbb0f3f5be5ce6cca13037536afc5ccf14c81a6cbc7a07de5`',{'parse_mode':_0x761c3(0x139)});}}catch(_0x3bd3ca){console[_0x761c3(0x189)]('Error\x20handling\x20message:',_0x3bd3ca),await this[_0x761c3(0xba)]?.[_0x761c3(0x16a)](_0x187246,_0x761c3(0x11c));}}),this[_0x2cc7e8(0xba)]['on'](_0x2cc7e8(0x189),_0xb49d0b=>{const _0x49b5f0=_0x2cc7e8;console[_0x49b5f0(0x189)](_0x49b5f0(0x153),_0xb49d0b);}),this[_0x2cc7e8(0xba)]['on'](_0x2cc7e8(0xcb),_0x441074=>{console['error']('Telegram\x20bot\x20polling\x20error:',_0x441074);});}async[a49_0x197890(0xc2)](_0x5c89b4,_0x3b8c86,_0xce380d,_0xf9841){const _0x5ed7d3=a49_0x197890;try{console['log'](_0x5ed7d3(0x112)+_0x3b8c86+_0x5ed7d3(0xc6)+_0xce380d+'\x22,\x20apiKey=\x22'+_0xf9841['substring'](0x0,0xa)+_0x5ed7d3(0xde));if(!_0xce380d||_0xce380d[_0x5ed7d3(0x175)]<0x3||_0xce380d[_0x5ed7d3(0x175)]>0x32||!/^[a-zA-Z0-9_]+$/[_0x5ed7d3(0xff)](_0xce380d)){await this[_0x5ed7d3(0xba)]?.['sendMessage'](_0x5c89b4,'‚ùå\x20–ù–µ–≤–µ—Ä–Ω—ã–π\x20—Ñ–æ—Ä–º–∞—Ç\x20username:\x20`'+_0xce380d+_0x5ed7d3(0xd5)+_0x5ed7d3(0x12d),{'parse_mode':'Markdown'});return;}if(!_0xf9841||!_0xf9841['startsWith']('pk_')&&!_0xf9841[_0x5ed7d3(0x116)](_0x5ed7d3(0xf1))){await this[_0x5ed7d3(0xba)]?.[_0x5ed7d3(0x16a)](_0x5c89b4,_0x5ed7d3(0x170)+_0x5ed7d3(0x14d),{'parse_mode':_0x5ed7d3(0x139)});return;}const _0x14e337=await database_1[_0x5ed7d3(0x155)][_0x5ed7d3(0x16b)][_0x5ed7d3(0xb5)]({'where':{'username':_0xce380d},'select':{'id':!![],'name':!![],'username':!![],'status':!![],'publicKey':!![],'secretKey':!![]}});if(!_0x14e337){const _0x26833e=await database_1[_0x5ed7d3(0x155)]['shop']['findMany']({'select':{'username':!![],'name':!![]},'take':0x5});let _0x28371b=_0x5ed7d3(0xf8)+_0xce380d+'`\x20–Ω–µ\x20–Ω–∞–π–¥–µ–Ω.\x0a\x0a';_0x26833e[_0x5ed7d3(0x175)]>0x0?(_0x28371b+='–î–æ—Å—Ç—É–ø–Ω—ã–µ\x20username:\x0a',_0x26833e[_0x5ed7d3(0x171)](_0x4ba271=>{const _0x167ae3=_0x5ed7d3;_0x28371b+=_0x167ae3(0x17c)+_0x4ba271[_0x167ae3(0x198)]+_0x167ae3(0x10d)+_0x4ba271[_0x167ae3(0xfe)]+')\x0a';}),_0x28371b+=_0x5ed7d3(0x13d)):_0x28371b+=_0x5ed7d3(0x19a);await this[_0x5ed7d3(0xba)]?.[_0x5ed7d3(0x16a)](_0x5c89b4,_0x28371b,{'parse_mode':_0x5ed7d3(0x139)});return;}if(_0x14e337[_0x5ed7d3(0x142)]!==_0x5ed7d3(0x184)){await this[_0x5ed7d3(0xba)]?.[_0x5ed7d3(0x16a)](_0x5c89b4,_0x5ed7d3(0x17d)+_0xce380d+_0x5ed7d3(0xca)+_0x5ed7d3(0xfb),{'parse_mode':_0x5ed7d3(0x139)});return;}if(_0x14e337[_0x5ed7d3(0x145)]!==_0xf9841&&_0x14e337[_0x5ed7d3(0x194)]!==_0xf9841){await this[_0x5ed7d3(0xba)]?.[_0x5ed7d3(0x16a)](_0x5c89b4,_0x5ed7d3(0xdb)+_0xce380d+'`.\x0a\x0a'+_0x5ed7d3(0xef)+_0x5ed7d3(0x193),{'parse_mode':_0x5ed7d3(0x139)});return;}const _0x4908a1=await database_1['default'][_0x5ed7d3(0xcf)][_0x5ed7d3(0x12b)]({'where':{'shopId':_0x14e337['id'],'isVerified':!![],'telegramId':{'not':_0x3b8c86}}});if(_0x4908a1){await this['bot']?.[_0x5ed7d3(0x16a)](_0x5c89b4,_0x5ed7d3(0xfa)+_0xce380d+'`\x20—É–∂–µ\x20–ø–æ–¥–∫–ª—é—á–µ–Ω\x20–¥—Ä—É–≥–æ–π\x20Telegram\x20–∞–∫–∫–∞—É–Ω—Ç.\x0a\x0a'+_0x5ed7d3(0x183),{'parse_mode':_0x5ed7d3(0x139)});return;}await database_1[_0x5ed7d3(0x155)]['telegramUser'][_0x5ed7d3(0xbf)]({'where':{'telegramId':_0x3b8c86},'data':{'shopId':_0x14e337['id'],'isVerified':!![]}}),await this['bot']?.['sendMessage'](_0x5c89b4,_0x5ed7d3(0xe1)+_0x5ed7d3(0x15d)+(_0x5ed7d3(0x107)+_0x14e337[_0x5ed7d3(0xfe)]+'*\x0a')+(_0x5ed7d3(0x160)+_0x14e337[_0x5ed7d3(0x198)]+_0x5ed7d3(0xd5))+_0x5ed7d3(0x17b)+'‚Ä¢\x20–ù–æ–≤—ã—Ö\x20–ø–ª–∞—Ç–µ–∂–∞—Ö\x0a'+_0x5ed7d3(0x10f)+_0x5ed7d3(0x138)+'‚Ä¢\x20–í–∞–∂–Ω—ã—Ö\x20—Å–æ–±—ã—Ç–∏—è—Ö\x0a\x0a'+_0x5ed7d3(0x168)+_0x5ed7d3(0x147)+_0x5ed7d3(0xdf),{'parse_mode':_0x5ed7d3(0x139)}),console[_0x5ed7d3(0x100)](_0x5ed7d3(0x191)+_0x3b8c86+_0x5ed7d3(0xd2)+_0x14e337[_0x5ed7d3(0x198)]+_0x5ed7d3(0x10a));}catch(_0x4051fe){console[_0x5ed7d3(0x189)](_0x5ed7d3(0x174),_0x4051fe),await this[_0x5ed7d3(0xba)]?.[_0x5ed7d3(0x16a)](_0x5c89b4,'‚ùå\x20–ü—Ä–æ–∏–∑–æ—à–ª–∞\x20–æ—à–∏–±–∫–∞\x20–ø—Ä–∏\x20–ø—Ä–æ–≤–µ—Ä–∫–µ\x20–¥–∞–Ω–Ω—ã—Ö.');}}async[a49_0x197890(0x164)](_0x4a52ea,_0x3609de,_0x44a047){const _0x4cbd18=a49_0x197890;try{console['log'](_0x4cbd18(0x11e)+_0x3609de+_0x4cbd18(0xc6)+_0x44a047+'\x22');const _0x3c8c78=await database_1[_0x4cbd18(0x155)][_0x4cbd18(0x16b)]['findUnique']({'where':{'username':_0x44a047},'select':{'id':!![],'name':!![],'username':!![],'status':!![]}});if(!_0x3c8c78){const _0x192fae=await database_1[_0x4cbd18(0x155)]['shop'][_0x4cbd18(0x140)]({'select':{'username':!![],'name':!![]},'take':0x5});let _0x2f7292=_0x4cbd18(0xf8)+_0x44a047+'`\x20–Ω–µ\x20–Ω–∞–π–¥–µ–Ω.\x0a\x0a';_0x192fae[_0x4cbd18(0x175)]>0x0?(_0x2f7292+='–î–æ—Å—Ç—É–ø–Ω—ã–µ\x20username:\x0a',_0x192fae[_0x4cbd18(0x171)](_0x19b38b=>{const _0x320987=_0x4cbd18;_0x2f7292+=_0x320987(0x17c)+_0x19b38b['username']+_0x320987(0x10d)+_0x19b38b['name']+')\x0a';}),_0x2f7292+=_0x4cbd18(0x13d)):_0x2f7292+='–ü—Ä–æ–≤–µ—Ä—å—Ç–µ\x20–ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å\x20–Ω–∞–ø–∏—Å–∞–Ω–∏—è\x20–∏\x20–ø–æ–ø—Ä–æ–±—É–π—Ç–µ\x20—Å–Ω–æ–≤–∞.';await this['bot']?.[_0x4cbd18(0x16a)](_0x4a52ea,_0x2f7292,{'parse_mode':_0x4cbd18(0x139)});return;}if(_0x3c8c78[_0x4cbd18(0x142)]!=='ACTIVE'){await this[_0x4cbd18(0xba)]?.['sendMessage'](_0x4a52ea,_0x4cbd18(0x17d)+_0x44a047+_0x4cbd18(0xca)+_0x4cbd18(0xfb),{'parse_mode':_0x4cbd18(0x139)});return;}await database_1[_0x4cbd18(0x155)][_0x4cbd18(0xcf)][_0x4cbd18(0xbf)]({'where':{'telegramId':_0x3609de},'data':{'shopId':_0x3c8c78['id'],'isVerified':![]}}),await this[_0x4cbd18(0xba)]?.['sendMessage'](_0x4a52ea,_0x4cbd18(0xd4)+_0x44a047+_0x4cbd18(0x11f)+(_0x4cbd18(0x149)+_0x3c8c78[_0x4cbd18(0xfe)]+_0x4cbd18(0x158))+_0x4cbd18(0x103),{'parse_mode':_0x4cbd18(0x139)}),console[_0x4cbd18(0x100)](_0x4cbd18(0x181)+_0x3609de+'\x20with\x20shop\x20'+_0x3c8c78[_0x4cbd18(0x198)]);}catch(_0x383c4d){console[_0x4cbd18(0x189)](_0x4cbd18(0x15e),_0x383c4d),await this['bot']?.[_0x4cbd18(0x16a)](_0x4a52ea,'‚ùå\x20–ü—Ä–æ–∏–∑–æ—à–ª–∞\x20–æ—à–∏–±–∫–∞\x20–ø—Ä–∏\x20–ø—Ä–æ–≤–µ—Ä–∫–µ\x20username.');}}async[a49_0x197890(0x144)](_0x213040,_0x4258cf,_0x5b99f8){const _0x22e2fd=a49_0x197890;try{console[_0x22e2fd(0x100)](_0x22e2fd(0x133)+_0x4258cf+_0x22e2fd(0x167)+_0x5b99f8['substring'](0x0,0xa)+_0x22e2fd(0xde));const _0x207990=await database_1[_0x22e2fd(0x155)][_0x22e2fd(0xcf)][_0x22e2fd(0xb5)]({'where':{'telegramId':_0x4258cf},'include':{'shop':!![]}});if(!_0x207990?.[_0x22e2fd(0xcc)]){await this[_0x22e2fd(0xba)]?.[_0x22e2fd(0x16a)](_0x213040,'‚ùå\x20–°–Ω–∞—á–∞–ª–∞\x20–æ—Ç–ø—Ä–∞–≤—å—Ç–µ\x20–≤–∞—à\x20username.\x0a\x0a'+'–ü–æ—Ä—è–¥–æ–∫:\x0a'+'1Ô∏è‚É£\x20Username\x0a'+_0x22e2fd(0x13f));return;}if(_0x207990[_0x22e2fd(0xd8)]){await this[_0x22e2fd(0xba)]?.['sendMessage'](_0x213040,_0x22e2fd(0x131)+(_0x207990['shop']?.[_0x22e2fd(0xfe)]||'–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π')+'*.\x0a\x0a'+_0x22e2fd(0x190),{'parse_mode':_0x22e2fd(0x139)});return;}const _0x5f1243=await database_1[_0x22e2fd(0x155)][_0x22e2fd(0x16b)][_0x22e2fd(0x12b)]({'where':{'id':_0x207990[_0x22e2fd(0xcc)],'OR':[{'publicKey':_0x5b99f8},{'secretKey':_0x5b99f8}]}});if(!_0x5f1243){await this['bot']?.['sendMessage'](_0x213040,'‚ùå\x20API\x20–∫–ª—é—á\x20–Ω–µ\x20—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç\x20–º–∞–≥–∞–∑–∏–Ω—É.\x0a\x0a'+_0x22e2fd(0x165)+_0x22e2fd(0x193),{'parse_mode':_0x22e2fd(0x139)}),await database_1[_0x22e2fd(0x155)][_0x22e2fd(0xcf)][_0x22e2fd(0xbf)]({'where':{'telegramId':_0x4258cf},'data':{'shopId':null,'isVerified':![]}}),console['log'](_0x22e2fd(0xc4)+_0x4258cf+_0x22e2fd(0x12a));return;}const _0x1f3efd=await database_1[_0x22e2fd(0x155)]['telegramUser']['findFirst']({'where':{'shopId':_0x5f1243['id'],'isVerified':!![],'telegramId':{'not':_0x4258cf}}});if(_0x1f3efd){await this[_0x22e2fd(0xba)]?.[_0x22e2fd(0x16a)](_0x213040,_0x22e2fd(0xfa)+_0x5f1243[_0x22e2fd(0x198)]+'`\x20—É–∂–µ\x20–ø–æ–¥–∫–ª—é—á–µ–Ω\x20–¥—Ä—É–≥–æ–π\x20Telegram\x20–∞–∫–∫–∞—É–Ω—Ç.\x0a\x0a'+'–°–Ω–∞—á–∞–ª–∞\x20–æ—Ç–∫–ª—é—á–∏—Ç–µ\x20–ø—Ä–µ–¥—ã–¥—É—â–∏–π\x20–∞–∫–∫–∞—É–Ω—Ç\x20–∏–ª–∏\x20–æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å\x20–∫\x20–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É.',{'parse_mode':_0x22e2fd(0x139)}),await database_1['default'][_0x22e2fd(0xcf)][_0x22e2fd(0xbf)]({'where':{'telegramId':_0x4258cf},'data':{'shopId':null,'isVerified':![]}});return;}await database_1['default']['telegramUser'][_0x22e2fd(0xbf)]({'where':{'telegramId':_0x4258cf},'data':{'isVerified':!![]}}),await this['bot']?.['sendMessage'](_0x213040,'üéâ\x20*–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!*\x0a\x0a'+_0x22e2fd(0x15d)+(_0x22e2fd(0x107)+_0x5f1243[_0x22e2fd(0xfe)]+'*\x0a')+('üë§\x20Username:\x20`'+_0x5f1243[_0x22e2fd(0x198)]+_0x22e2fd(0xd5))+_0x22e2fd(0x17b)+_0x22e2fd(0xc0)+'‚Ä¢\x20–ò–∑–º–µ–Ω–µ–Ω–∏–∏\x20—Å—Ç–∞—Ç—É—Å–∞\x20–ø–ª–∞—Ç–µ–∂–µ–π\x0a'+_0x22e2fd(0x138)+_0x22e2fd(0x16c)+_0x22e2fd(0x168)+_0x22e2fd(0x147)+_0x22e2fd(0xdf),{'parse_mode':_0x22e2fd(0x139)}),console[_0x22e2fd(0x100)](_0x22e2fd(0x191)+_0x4258cf+'\x20verified\x20for\x20shop\x20'+_0x5f1243[_0x22e2fd(0x198)]);}catch(_0x3f1f80){console[_0x22e2fd(0x189)](_0x22e2fd(0x166),_0x3f1f80),await this['bot']?.['sendMessage'](_0x213040,_0x22e2fd(0x179));}}async[a49_0x197890(0x161)](_0xe95e8,_0x34426f,_0x32e5a9){const _0x58a061=a49_0x197890;if(!this['bot']){console['warn'](_0x58a061(0xc5));return;}try{const _0x1422bd=await database_1[_0x58a061(0x155)][_0x58a061(0xcf)][_0x58a061(0x140)]({'where':{'shopId':_0xe95e8,'isVerified':!![]}});if(_0x1422bd[_0x58a061(0x175)]===0x0){console[_0x58a061(0x100)](_0x58a061(0x15a)+_0xe95e8);return;}const _0x573a0b=_0x1422bd[_0x58a061(0xf7)](async _0x32a97a=>{const _0x419ce7=_0x58a061;try{await this[_0x419ce7(0xba)]?.[_0x419ce7(0x16a)](_0x32a97a['telegramId'],_0x34426f,_0x32e5a9),console[_0x419ce7(0x100)](_0x419ce7(0xf2)+_0x32a97a[_0x419ce7(0xbc)]);}catch(_0x3a132b){console[_0x419ce7(0x189)]('‚ùå\x20Failed\x20to\x20send\x20notification\x20to\x20Telegram\x20user\x20'+_0x32a97a['telegramId']+':',_0x3a132b),_0x3a132b instanceof Error&&(_0x3a132b[_0x419ce7(0x104)][_0x419ce7(0x15b)](_0x419ce7(0xc1))||_0x3a132b[_0x419ce7(0x104)][_0x419ce7(0x15b)]('chat\x20not\x20found')||_0x3a132b['message']['includes']('user\x20is\x20deactivated'))&&(await database_1[_0x419ce7(0x155)][_0x419ce7(0xcf)][_0x419ce7(0xbf)]({'where':{'id':_0x32a97a['id']},'data':{'isVerified':![]}}),console['log'](_0x419ce7(0x186)+_0x32a97a['telegramId']+'\x20marked\x20as\x20unverified\x20due\x20to\x20delivery\x20failure'));}});await Promise['allSettled'](_0x573a0b);}catch(_0x3db7df){console[_0x58a061(0x189)](_0x58a061(0xc8),_0x3db7df);}}async[a49_0x197890(0x141)](_0x445fee,_0x23d135,_0x5db66d){const _0x2ff38c=a49_0x197890,_0x263350={'created':'üÜï','paid':'‚úÖ','failed':'‚ùå','expired':'‚è∞','refund':'üîÑ','chargeback':'‚ö†Ô∏è'},_0x1133f1={'created':_0x2ff38c(0x185),'paid':_0x2ff38c(0x10c),'failed':_0x2ff38c(0x157),'expired':_0x2ff38c(0x18c),'refund':'–í–æ–∑–≤—Ä–∞—Ç\x20–ø–ª–∞—Ç–µ–∂–∞','chargeback':_0x2ff38c(0x19d)},_0x12cc9a=_0x263350[_0x5db66d],_0x6af9f3=_0x1133f1[_0x5db66d];let _0x54488e=_0x12cc9a+'\x20*'+_0x6af9f3+_0x2ff38c(0x158)+(_0x2ff38c(0xe2)+_0x23d135['amount']+'\x20'+_0x23d135[_0x2ff38c(0xd6)]+'*\x0a')+(_0x2ff38c(0xee)+(_0x23d135[_0x2ff38c(0x19e)]||_0x23d135['id'])+'`\x0a')+(_0x2ff38c(0x159)+_0x23d135['id']+'`\x0a')+(_0x2ff38c(0xb6)+_0x23d135[_0x2ff38c(0x115)]['toUpperCase']()+'`\x0a')+(_0x2ff38c(0x11a)+new Date(_0x23d135['createdAt'])['toLocaleString']('ru-RU')+'\x0a');_0x5db66d===_0x2ff38c(0x113)&&_0x23d135[_0x2ff38c(0x13e)]&&(_0x54488e+='üí∏\x20–°—É–º–º–∞\x20—à—Ç—Ä–∞—Ñ–∞:\x20*'+_0x23d135[_0x2ff38c(0x13e)]+_0x2ff38c(0xe6)),_0x23d135[_0x2ff38c(0x108)]&&(_0x54488e+=_0x2ff38c(0x14a)+_0x23d135[_0x2ff38c(0x108)]+'\x0a'),await this[_0x2ff38c(0x161)](_0x445fee,_0x54488e,{'parse_mode':_0x2ff38c(0x139)});}async[a49_0x197890(0x15f)](_0x3c6a93,_0x23795d,_0x30c370){const _0x1fa23f=a49_0x197890,_0x5a5646={'created':'üì§','completed':'‚úÖ','rejected':'‚ùå'},_0x15c562={'created':_0x1fa23f(0x12e),'completed':_0x1fa23f(0xdd),'rejected':_0x1fa23f(0x137)},_0x257872=_0x5a5646[_0x30c370],_0x138f4e=_0x15c562[_0x30c370],_0x408080=_0x257872+'\x20*'+_0x138f4e+_0x1fa23f(0x158)+(_0x1fa23f(0x150)+_0x23795d[_0x1fa23f(0x156)]+_0x1fa23f(0xbd))+(_0x1fa23f(0xe9)+_0x23795d['method']+'`\x0a')+('üÜî\x20ID\x20–≤—ã–ø–ª–∞—Ç—ã:\x20`'+_0x23795d['id']+'`\x0a')+(_0x1fa23f(0x11a)+new Date(_0x23795d['createdAt'])[_0x1fa23f(0xd1)](_0x1fa23f(0x172))+'\x0a')+(_0x23795d[_0x1fa23f(0x127)]?_0x1fa23f(0xc7)+_0x23795d[_0x1fa23f(0x127)]+'`':'');await this[_0x1fa23f(0x161)](_0x3c6a93,_0x408080,{'parse_mode':_0x1fa23f(0x139)});}async[a49_0x197890(0xf4)](_0x5c7799,_0xcd4b9){const _0xf30b48=a49_0x197890;try{const _0x36acb8=await database_1[_0xf30b48(0x155)][_0xf30b48(0xd0)][_0xf30b48(0xb5)]({'where':{'shopId':_0x5c7799},'select':{'notificationLogin':!![]}});if(!_0x36acb8?.[_0xf30b48(0xce)]){console['log'](_0xf30b48(0xea)+_0x5c7799);return;}const _0x5eac07=_0xcd4b9[_0xf30b48(0x102)]?'üîê':'üö®',_0x5226ee=_0xcd4b9[_0xf30b48(0x102)]?_0xf30b48(0xec):_0xf30b48(0x14f);let _0x5bab5f=_0x5eac07+'\x20*'+_0x5226ee+_0xf30b48(0x158)+(_0xf30b48(0x160)+_0xcd4b9[_0xf30b48(0x198)]+'`\x0a')+('üìÖ\x20–í—Ä–µ–º—è:\x20'+_0xcd4b9[_0xf30b48(0x118)][_0xf30b48(0xd1)]('ru-RU')+'\x0a');_0xcd4b9[_0xf30b48(0x13b)]&&(_0x5bab5f+=_0xf30b48(0x109)+_0xcd4b9[_0xf30b48(0x13b)]+'`\x0a');if(_0xcd4b9['userAgent']){const _0x2f3573=_0xcd4b9[_0xf30b48(0x13c)][_0xf30b48(0x175)]>0x32?_0xcd4b9['userAgent'][_0xf30b48(0x178)](0x0,0x32)+_0xf30b48(0x126):_0xcd4b9[_0xf30b48(0x13c)];_0x5bab5f+=_0xf30b48(0xb1)+_0x2f3573+'`\x0a';}!_0xcd4b9['success']&&(_0x5bab5f+=_0xf30b48(0xcd)),await this[_0xf30b48(0x161)](_0x5c7799,_0x5bab5f,{'parse_mode':_0xf30b48(0x139)}),console[_0xf30b48(0x100)](_0xf30b48(0x176)+_0x5c7799+':\x20'+(_0xcd4b9[_0xf30b48(0x102)]?_0xf30b48(0x102):_0xf30b48(0xb7)));}catch(_0x1edb12){console['error'](_0xf30b48(0x199),_0x1edb12);}}async['sendApiErrorNotification'](_0x21de2d,_0x3bf6d9){const _0x398e8d=a49_0x197890;try{const _0x5325c0=await database_1['default'][_0x398e8d(0xd0)][_0x398e8d(0xb5)]({'where':{'shopId':_0x21de2d},'select':{'notificationApiError':!![]}});if(!_0x5325c0?.['notificationApiError']){console[_0x398e8d(0x100)](_0x398e8d(0xd3)+_0x21de2d);return;}let _0x593778='üö®\x20*–û—à–∏–±–∫–∞\x20API*\x0a\x0a'+(_0x398e8d(0xb4)+_0x3bf6d9['method']+'\x20'+_0x3bf6d9['endpoint']+'`\x0a')+('üìÖ\x20–í—Ä–µ–º—è:\x20'+_0x3bf6d9[_0x398e8d(0x118)][_0x398e8d(0xd1)](_0x398e8d(0x172))+'\x0a');_0x3bf6d9[_0x398e8d(0xd7)]&&(_0x593778+=_0x398e8d(0x18d)+_0x3bf6d9[_0x398e8d(0xd7)]+'`\x0a'),_0x593778+=_0x398e8d(0x119)+_0x3bf6d9[_0x398e8d(0x10b)]+'`\x0a',_0x3bf6d9[_0x398e8d(0xeb)]&&(_0x593778+=_0x398e8d(0xe5)+_0x3bf6d9[_0x398e8d(0xeb)]+'`\x0a'),_0x593778+='\x0aüí°\x20–ü—Ä–æ–≤–µ—Ä—å—Ç–µ\x20–ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å\x20–∑–∞–ø—Ä–æ—Å–∞\x20–∏–ª–∏\x20–æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å\x20–≤\x20–ø–æ–¥–¥–µ—Ä–∂–∫—É.',await this[_0x398e8d(0x161)](_0x21de2d,_0x593778,{'parse_mode':_0x398e8d(0x139)}),console[_0x398e8d(0x100)]('‚úÖ\x20API\x20error\x20notification\x20sent\x20for\x20shop\x20'+_0x21de2d+':\x20'+_0x3bf6d9[_0x398e8d(0x17f)]);}catch(_0x4a23a9){console[_0x398e8d(0x189)](_0x398e8d(0xc3),_0x4a23a9);}}async[a49_0x197890(0xda)](_0x51729e,_0x399e4e,_0x2d1719){const _0x58fad7=a49_0x197890;let _0x5b30c7=_0x58fad7(0x11d)+_0x399e4e+'*\x0a\x0a';for(const [_0x3fc331,_0x4209e6]of Object[_0x58fad7(0xaf)](_0x2d1719)){_0x4209e6!==null&&_0x4209e6!==undefined&&(_0x5b30c7+=_0x3fc331+':\x20`'+_0x4209e6+'`\x0a');}await this['sendShopNotification'](_0x51729e,_0x5b30c7,{'parse_mode':_0x58fad7(0x139)});}[a49_0x197890(0xed)](){const _0x4bad37=a49_0x197890;return{'isActive':!!this[_0x4bad37(0xba)],'username':this['botUsername']};}['stopBot'](){const _0x1ac115=a49_0x197890;this[_0x1ac115(0xba)]&&(this[_0x1ac115(0xba)][_0x1ac115(0x197)](),this[_0x1ac115(0xba)]=null,console[_0x1ac115(0x100)](_0x1ac115(0x12f)));}}exports['TelegramBotService']=TelegramBotService,exports[a49_0x197890(0x163)]=new TelegramBotService();