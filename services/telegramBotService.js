'use strict';function a87_0x2043(_0x24f0cd,_0x3e0c2b){_0x24f0cd=_0x24f0cd-0x1a3;const _0x1c8e96=a87_0x1c8e();let _0x2043cc=_0x1c8e96[_0x24f0cd];return _0x2043cc;}const a87_0x390139=a87_0x2043;(function(_0xb84bb6,_0x2d85af){const _0x39ea66=a87_0x2043,_0x2112e5=_0xb84bb6();while(!![]){try{const _0x3c1395=-parseInt(_0x39ea66(0x299))/0x1*(-parseInt(_0x39ea66(0x31c))/0x2)+parseInt(_0x39ea66(0x33a))/0x3*(parseInt(_0x39ea66(0x2e3))/0x4)+-parseInt(_0x39ea66(0x287))/0x5*(-parseInt(_0x39ea66(0x1f5))/0x6)+-parseInt(_0x39ea66(0x276))/0x7+parseInt(_0x39ea66(0x25d))/0x8+-parseInt(_0x39ea66(0x264))/0x9+-parseInt(_0x39ea66(0x20d))/0xa;if(_0x3c1395===_0x2d85af)break;else _0x2112e5['push'](_0x2112e5['shift']());}catch(_0x242a55){_0x2112e5['push'](_0x2112e5['shift']());}}}(a87_0x1c8e,0x3e282));var __importDefault=this&&this[a87_0x390139(0x1cd)]||function(_0x222321){const _0x36f296=a87_0x390139;return _0x222321&&_0x222321[_0x36f296(0x279)]?_0x222321:{'default':_0x222321};};function a87_0x1c8e(){const _0xc17cea=['\x20USDC\x0a','https://app.trapay.uk','ðŸ”\x20*Debug\x20Information*\x0a\x0a','findUnique','map','FAILED','botUsername','ðŸ“¢\x20Telegram\x20channel:\x20https://t.me/trapay\x5c_news\x0a','ðŸ’°\x20Total\x20earned:\x20','toLocaleString','telegramBotService','orderId','ðŸ“‹\x20*Payment\x20Links*\x0a\x0aNo\x20payment\x20links\x20found\x5c.\x0a\x0aCreate\x20your\x20first\x20payment\x20link\x5c!','last_name','pl_type_single','remitterIban','â€¢\x20Total\x20revenue\x0a','âŒ\x20No\x20gateways\x20configured.\x20Please\x20configure\x20gateways\x20in\x20the\x20admin\x20panel\x20first.','â±ï¸\x20*Period:*\x20','length','ðŸ†”\x20Payment\x20ID:\x20`','Copy\x20and\x20share\x20this\x20link\x20with\x20your\x20customers\x5c!','\x20USD\x0a','adminNotes','\x5c.\x20','ðŸ“Š\x20*Connection\x20Status*\x0a\x0a','2-digit','N/A','ðŸ“Š\x20Statistics','findMany','secretKey','handleSingleLineVerification','â€¢\x20Gateway\x20performance','PAID','delete','Contact\x20administrator.','message_id','ðŸª\x20Your\x20connected\x20shop:\x0a','\x20via\x20single-line\x20input','NZD','entries',')\x0a\x0a','chargeback','Coming\x20soon...\x0a\x0a','âŒ\x20You\x20are\x20not\x20connected\x20to\x20any\x20shop.\x0a\x0a','name','ðŸ‘¤\x20Username:\x20`','\x20initialized\x20successfully','Error\x20handling\x20/disconnect\x20command:','customerEmail','`appple\x20pk_aa6450d3f57afbefbb0f3f5be5ce6cca13037536afc5ccf14c81a6cbc7a07de5`\x0a\x0a','âŒ\x20Invalid\x20username\x20format:\x20`','POL','2586320eqeelY','0.0','\x20parts:\x20','cmd_contacts','LTC','âŒ\x20Failed\x20payments\x20-\x20','botToken','3780819eTPwYj','New\x20payment\x20created','\x20disconnected\x20from\x20shop\x20','Next\x20âž¡ï¸','updatedAt','âŒ\x20Unknown\x20command','allSettled','ðŸ¦\x20Gateway:\x20','\x20\x20\x20Username:\x20`','Username\x20must\x20contain\x20only\x20letters,\x20numbers\x20and\x20underscore\x20(3-50\x20characters).','ðŸ“±\x20Available\x20Commands:\x0a','paymentLinkSessions','ðŸª\x20Gateway:\x20`','Use\x20/start\x20to\x20connect.','USDC','â€¢\x20Payouts\x0a','image/png','includes','1841224HTYyXn','test','Please\x20send\x20the\x20amount\x20in\x20','__esModule','âŒ\x20Shop\x20`','â€¢\x20Quick\x20create\x20new\x20link\x0a','toString','ðŸ“±\x20Shop:\x20*','count','ðŸ”„\x20Processing\x20single-line\x20verification\x20for\x20user\x20','getDate','ðŸ“ˆ\x20Conversion\x20-\x20','chargebackAmount','error','reduce','step','\x22\x20->\x20display\x20\x22','5FlYJWx','â†©ï¸\x20Refunds\x20-\x20','createdAt','numeric','No\x20verified\x20Telegram\x20users\x20found\x20for\x20shop\x20','ðŸ”—\x20*Create\x20Payment\x20Link*\x0a\x0a','ðŸ“±\x20Login\x20notifications\x20disabled\x20for\x20shop\x20','â€¢\x20Transaction\x20status\x0a','âŒ\x20Close','ðŸ’³\x20*Wallet:*\x20`','ðŸ”—\x20*Create\x20Payment\x20Link*\x0a\x0aStep\x201/4:\x20Select\x20gateway','ðŸ”—\x20*Payment\x20Links*\x0a\x0a','/disconnect\x20-\x20disconnect\x20from\x20notifications','TRY','\x20verified\x20for\x20shop\x20','ðŸ“\x20Format:\x20`username\x20api_key`\x0a\x0a','parse','startsWith','6806nEWrVo','Error\x20in\x20payment\x20link\x20flow:','ðŸ”—\x20Payment\x20Links','initializeBot','ACTIVE','\x20users\x20of\x20shop\x20','\x20\x20\x20[LINK](','Error\x20handling\x20/contacts\x20command:','pl_type_','Payment\x20is\x20being\x20processed','â€¢\x20New\x20payments\x0a','EUR','ðŸ“Š\x20*Statistics*\x0a\x0a','\x20\x20\x20Status:\x20','sendMessage','âœ…\x20You\x20are\x20already\x20connected\x20to\x20shop\x20*','/contacts\x20-\x20support\x20contacts\x0a','filter','â€¢\x20Payment\x20status\x20changes\x0a','â€¢\x20Success\x20rate\x0a','ðŸ”—\x20*Transaction\x20Link:*\x20`','bot','image/jpeg','sk_','substring','cmd_status','telegramUser','.jpg','ðŸŒ\x20Website:\x20https://trapay.uk/\x0a','Username:\x20`','sendNotificationToAll','ðŸ“…\x20Time:\x20','USDT','âœ…\x20You\x20have\x20been\x20successfully\x20disconnected\x20from\x20shop\x20*','BTC','Error\x20handling\x20callback\x20query:','Error\x20handling\x20/status\x20command:','âœ…\x20API\x20error\x20notification\x20sent\x20for\x20shop\x20','Error\x20handling\x20/payouts\x20command:','/payouts\x20-\x20view\x20recent\x20payouts\x0a','\x0aðŸ‘¤\x20*Customer\x20Information:*\x0a','SINGLE','shopId','ðŸŽ‰\x20*Congratulations!*\x0a\x0a','sendDocument','en-US','TRX','shopSettings','sendDirectMessage','BNB','customerUa','ðŸ’°\x20Amount:\x20','period','ðŸ“§\x20Email:\x20`','ðŸ”Œ\x20Disconnect','ðŸ’¸\x20Payouts','ðŸŒ\x20IP\x20address:\x20`','Payment\x20refund','ðŸ””\x20Notifications\x20are\x20active','forEach','Unknown','*.\x0a\x0a','get','sendShopFile','getBotInfo','ðŸ“\x20Order\x20ID:\x20`','GATEWAY_ID_MAP','You\x20are\x20already\x20connected\x20to\x20shop:\x20*','\x5c)\x0a\x0a','AUD','ðŸ¦\x20IBAN:\x20`','Failed\x20to\x20send\x20API\x20error\x20notification:','replace','ðŸ“\x20Notes:\x20','16lmdGNJ','type','statusCode','ðŸ†”\x20Request\x20ID:\x20`','username',':\x20`','ðŸ“…\x20*Payout\x20Date:*\x20','CHARGEBACK','Step\x202/4:\x20Select\x20link\x20type','ðŸ›‘\x20Telegram\x20bot\x20stopped','Please\x20check\x20the\x20spelling\x20and\x20try\x20again.\x0a\x0a','/link/','Gateway\x20-\x20','âŒ\x20An\x20error\x20occurred\x20while\x20loading\x20payment\x20links.','shop','pl_curr_','balance','This\x20feature\x20will\x20show:\x0a','cmd_payouts','unknown\x20shop','ðŸ“ž\x20Contacts','Failed\x20to\x20send\x20login\x20notification:','`.\x0a\x0a','âœ…\x20You\x20have\x20been\x20successfully\x20connected\x20to\x20the\x20notification\x20system!\x0a\x0a','toFixed','telegramId','set','isVerified','âœ…\x20Direct\x20message\x20sent\x20to\x20chat\x20','create','stopPolling','\x20users','answerCallbackQuery','requestId','âœ…\x20Notification\x20sent\x20to\x20Telegram\x20user\x20','../config/database','ðŸ’»\x20Browser:\x20`','ðŸ“ž\x20*Contacts*\x0a\x0a','\x20USDC','errorMessage','ðŸ“Š\x20Error\x20code:\x20`','âŒ\x20Shop\x20with\x20username\x20`','txid','âŒ\x20No\x20active\x20gateways\x20found.\x20Please\x20enable\x20at\x20least\x20one\x20gateway\x20in\x20the\x20admin\x20panel.','update','Step\x204/4:\x20Enter\x20amount\x0a\x0a','You\x20sent\x20','sendPayoutNotification','Single\x20Use','payment','toLocaleDateString','Multi\x20Use','split','default','ðŸ’°\x20*Amount:*\x20','status','network','108OvGLic','...','.png','Error\x20in\x20handleSingleLineVerification:','message','getGatewayDisplayNameForTelegram','To\x20reconnect,\x20use\x20the\x20/start\x20command','text','customerName','Expected\x20key\x20format:\x20`pk_...`\x20or\x20`sk_...`','âŒ\x20API\x20key\x20does\x20not\x20match\x20shop\x20`','ðŸ””\x20You\x20receive\x20notifications\x20about:\x0a','Telegram\x20bot\x20error:','first_name','Check\x20the\x20key\x20and\x20try\x20again.\x0a\x0a','âŒ\x20Telegram\x20bot\x20not\x20initialized','onText','user\x20is\x20deactivated','Successful\x20login','`\x20is\x20inactive.\x0a\x0a','API\x20key\x20must\x20start\x20with\x20`pk\x5c_`\x20or\x20`sk\x5c_`.','TelegramBotService','find','â€¢\x20Dates\x20and\x20TX\x20IDs','âŒ\x20You\x20are\x20not\x20registered\x20in\x20the\x20system.\x0a\x0a','keys','SOL','ðŸ“Š\x20*Today\x27s\x20Statistics\x20|\x20','warn','ðŸ‘¤\x20Account:\x20https://app.trapay.uk/login\x0a','22143ZMaxlW','pl_type_multi','ðŸ’¸\x20*New\x20Payout*\x0a\x0a','en-GB','ðŸ”—\x20*Payment\x20Links*\x0a\x0aChoose\x20an\x20action:','USD','ðŸ’¸\x20Penalty\x20amount:\x20*','âŒ\x20Failed\x20to\x20send\x20notification\x20to\x20Telegram\x20user\x20','ðŸ“‹\x20*Payment\x20Links*\x20\x5c(Page\x20','showPaymentLinksList','Payment\x20chargeback','chat\x20not\x20found','Not\x20specified','publicKey','ðŸŒ\x20*Network:*\x20','Error\x20handling\x20/debug\x20command:','Markdown','User\x20','â€¢\x20Share\x20link\x20directly','COMPLETED','userAgent','âœ…\x20Welcome\x20back!\x0a\x0a','âœ…\x20Connected\x20to\x20shop:\x20*','join','application/pdf','ðŸ“…\x20Connection\x20date:\x20','failed','callback_query','pl_gw_','Example:\x0a','âŒ\x20Cancelled.','cmd_disconnect','ðŸ“±\x20Your\x20Telegram\x20ID:\x20`','\x22,\x20apiKey=\x22','customerIp','âŒ\x20Error\x20sending\x20file\x20to\x20chat:','ðŸ’¸\x20*Payouts*\x0a\x0a','ðŸ”—\x20*Transaction\x20Link:*\x20Pending','ðŸ“…\x20Date:\x20','\x0aðŸ’¡\x20Check\x20your\x20request\x20or\x20contact\x20support.','sendPaymentNotification','sendShopNotification','endpoint','â€¢\x20Active\x20payment\x20links\x0a','trim','../types/gateway','âŒ\x20Maximum\x20number\x20of\x20connected\x20accounts\x20(5)\x20reached\x20for\x20shop\x20`','JPY','__importDefault','Disconnect\x20one\x20of\x20the\x20existing\x20accounts\x20first.','.jpeg','pl_cancel','stopBot','ðŸ“‹\x20View\x20Payment\x20Links','*\x0a\x0a','/payment\x5c_links\x20-\x20manage\x20payment\x20links\x0a','ðŸ””\x20You\x20will\x20now\x20receive\x20notifications\x20about:\x0a','Use\x20/status\x20to\x20check\x20status\x20or\x20/disconnect\x20to\x20disconnect.','âŒ\x20An\x20error\x20occurred\x20while\x20verifying\x20data.','from','paymentLink','\x20(e.g.,\x20100)','ðŸ”‚\x20Single\x20Use','pk_','âœ…\x20Successful\x20payments\x20-\x20','ðŸ””\x20Notifications\x20are\x20active\x0a\x0a','âŒ\x20You\x20are\x20not\x20connected\x20to\x20the\x20notification\x20system.','handlePaymentLinkFlow','âŒ\x20Failed\x20to\x20send\x20message\x20to\x20user\x20','`\x0a\x0a','â³\x20The\x20payment\x20is\x20currently\x20being\x20processed\x20by\x20the\x20gateway.\x0a','âŒ\x20You\x20are\x20not\x20connected\x20to\x20a\x20shop.\x0a\x0aUse\x20/start\x20to\x20connect.','getGatewayCurrencies','gateway','setDate','cmd_statistics','\x20(@','âœ…\x20File\x20sent\x20to\x20','â€¢\x20Last\x205\x20payouts\x0a','CAD','ðŸ”—\x20Endpoint:\x20`','ðŸ’°\x20Amount:\x20*','âŒ\x20An\x20error\x20occurred.\x20Please\x20try\x20again\x20later.','log','Error\x20handling\x20/payment_links\x20command:','endsWith','GBP','.pdf','2729262LHgaeg','push','...\x22','setupBotHandlers','data','â€¢\x20Payouts','âŒ\x20You\x20are\x20not\x20connected\x20to\x20a\x20shop.\x0a\x0a','toUpperCase','â€¢\x20Usage\x20statistics\x0a','timestamp','âœ…\x20Paid\x20out:\x20','Error\x20sending\x20shop\x20notification:','MarkdownV2','ðŸŒ\x20IP:\x20`','success','pl_page_','amount','cmd_payment_links','desc','âž•\x20Create\x20New\x20Link','â€¢\x20Payment\x20count\x0a','editMessageText','chat','\x20\x20\x20Name:\x20*','2374980EZrfHr','Payment\x20failed','\x20USDT*\x0a','ðŸ“Š\x20Status','\x0aâš ï¸\x20If\x20this\x20wasn\x27t\x20you,\x20change\x20your\x20password\x20immediately!','âŒ\x20Error\x20sending\x20file\x20to\x20shop:','application/octet-stream','pl_create_new','Make\x20sure\x20you\x20have\x20the\x20correct\x20username\x20from\x20your\x20account.','pl_','â³\x20Pending\x20payouts:\x20','currency','AED',':\x20username=\x22','To\x20receive\x20payment\x20notifications,\x20send\x20your\x20credentials\x20in\x20one\x20line:\x0a\x0a','all','âŒ\x20Error\x20getting\x20debug\x20information.','paymentGateways','ðŸŒ\x20Country:\x20','âœ…\x20Telegram\x20user\x20','REFUND','âš ï¸\x20Chargebacks\x20-\x20','ðŸ“±\x20Notification\x20sent\x20to\x20','sendCustomNotification','PENDING','âŒ\x20Cancel','Use\x20/start\x20to\x20begin.'];a87_0x1c8e=function(){return _0xc17cea;};return a87_0x1c8e();}Object['defineProperty'](exports,a87_0x390139(0x279),{'value':!![]}),exports[a87_0x390139(0x232)]=exports[a87_0x390139(0x331)]=void 0x0;const node_telegram_bot_api_1=__importDefault(require('node-telegram-bot-api')),database_1=__importDefault(require(a87_0x390139(0x306))),gateway_1=require(a87_0x390139(0x1ca));class TelegramBotService{constructor(){const _0x4884a8=a87_0x390139;this[_0x4884a8(0x2ae)]=null,this['paymentLinkSessions']=new Map(),this[_0x4884a8(0x263)]=process.env.TELEGRAM_BOT_TOKEN||'',this[_0x4884a8(0x22e)]=process.env.TELEGRAM_BOT_USERNAME||'trapay_bot',this[_0x4884a8(0x263)]?this[_0x4884a8(0x29c)]():console[_0x4884a8(0x338)]('TELEGRAM_BOT_TOKEN\x20not\x20found\x20in\x20environment\x20variables');}['initializeBot'](){const _0x1a96b4=a87_0x390139;try{this[_0x1a96b4(0x2ae)]=new node_telegram_bot_api_1[(_0x1a96b4(0x318))](this[_0x1a96b4(0x263)],{'polling':!![]}),this[_0x1a96b4(0x1f8)](),console['log']('âœ…\x20Telegram\x20bot\x20@'+this[_0x1a96b4(0x22e)]+_0x1a96b4(0x257));}catch(_0x591ce7){console[_0x1a96b4(0x283)]('âŒ\x20Failed\x20to\x20initialize\x20Telegram\x20bot:',_0x591ce7);}}[a87_0x390139(0x1f8)](){const _0x1c1ad6=a87_0x390139;if(!this[_0x1c1ad6(0x2ae)])return;this['bot'][_0x1c1ad6(0x32c)](/\/start/,async _0x57b0d1=>{const _0xd1697d=_0x1c1ad6,_0x50d295=_0x57b0d1[_0xd1697d(0x20b)]['id'],_0x45efbd=_0x57b0d1[_0xd1697d(0x1d8)]?.['id'][_0xd1697d(0x27c)](),_0x295f2d=_0x57b0d1[_0xd1697d(0x1d8)]?.[_0xd1697d(0x2e7)],_0x284f5c=_0x57b0d1[_0xd1697d(0x1d8)]?.[_0xd1697d(0x329)],_0x3df54d=_0x57b0d1[_0xd1697d(0x1d8)]?.[_0xd1697d(0x235)];if(!_0x45efbd)return;try{let _0x22d7fd=await database_1[_0xd1697d(0x318)][_0xd1697d(0x2b3)][_0xd1697d(0x22b)]({'where':{'telegramId':_0x45efbd},'include':{'shop':!![]}});!_0x22d7fd?(_0x22d7fd=await database_1[_0xd1697d(0x318)][_0xd1697d(0x2b3)]['create']({'data':{'telegramId':_0x45efbd,'username':_0x295f2d,'firstName':_0x284f5c,'lastName':_0x3df54d,'isVerified':![],'shopId':null},'include':{'shop':!![]}}),console[_0xd1697d(0x1f0)]('ðŸ“±\x20Created\x20new\x20Telegram\x20user:\x20'+_0x45efbd+_0xd1697d(0x1e9)+_0x295f2d+')')):_0x22d7fd=await database_1['default'][_0xd1697d(0x2b3)][_0xd1697d(0x30f)]({'where':{'telegramId':_0x45efbd},'data':{'username':_0x295f2d,'firstName':_0x284f5c,'lastName':_0x3df54d},'include':{'shop':!![]}}),_0x22d7fd[_0xd1697d(0x2fe)]&&_0x22d7fd[_0xd1697d(0x2c3)]&&_0x22d7fd[_0xd1697d(0x2f1)]?await this[_0xd1697d(0x2ae)]?.[_0xd1697d(0x2a7)](_0x50d295,_0xd1697d(0x1b2)+(_0xd1697d(0x2dc)+_0x22d7fd[_0xd1697d(0x2f1)][_0xd1697d(0x255)]+'*\x0a')+(_0xd1697d(0x2b6)+_0x22d7fd['shop'][_0xd1697d(0x2e7)]+_0xd1697d(0x1e2))+_0xd1697d(0x327)+'â€¢\x20New\x20payments\x0a'+_0xd1697d(0x2ab)+_0xd1697d(0x1fa),{'parse_mode':'Markdown','reply_markup':{'inline_keyboard':[[{'text':_0xd1697d(0x244),'callback_data':'cmd_statistics'},{'text':_0xd1697d(0x2d0),'callback_data':_0xd1697d(0x2f5)}],[{'text':_0xd1697d(0x29b),'callback_data':_0xd1697d(0x206)},{'text':_0xd1697d(0x210),'callback_data':_0xd1697d(0x2b2)}],[{'text':_0xd1697d(0x2f7),'callback_data':'cmd_contacts'},{'text':_0xd1697d(0x2cf),'callback_data':_0xd1697d(0x1bc)}]]}}):(_0x22d7fd[_0xd1697d(0x2c3)]&&!_0x22d7fd[_0xd1697d(0x2fe)]&&(await database_1[_0xd1697d(0x318)][_0xd1697d(0x2b3)][_0xd1697d(0x30f)]({'where':{'telegramId':_0x45efbd},'data':{'shopId':null,'isVerified':![]}}),console['log']('ðŸ”„\x20Reset\x20incomplete\x20verification\x20for\x20user\x20'+_0x45efbd)),await this['bot']?.['sendMessage'](_0x50d295,'ðŸ¤–\x20Welcome\x20to\x20TRAPAY\x20notification\x20system!\x0a\x0a'+_0xd1697d(0x21b)+_0xd1697d(0x296)+_0xd1697d(0x1ba)+'`appple\x20pk_aa6450d3f57afbefbb0f3f5be5ce6cca13037536afc5ccf14c81a6cbc7a07de5`\x0a\x0a'+'â—ï¸\x20Make\x20sure\x20to\x20separate\x20username\x20and\x20API\x20key\x20with\x20a\x20space!',{'parse_mode':_0xd1697d(0x1ad)}));}catch(_0x3a237b){console[_0xd1697d(0x283)]('Error\x20handling\x20/start\x20command:',_0x3a237b),await this[_0xd1697d(0x2ae)]?.['sendMessage'](_0x50d295,_0xd1697d(0x1ef));}}),this[_0x1c1ad6(0x2ae)][_0x1c1ad6(0x32c)](/\/disconnect/,async _0xc5f64c=>{const _0x1c5375=_0x1c1ad6,_0x1020b4=_0xc5f64c[_0x1c5375(0x20b)]['id'],_0x360984=_0xc5f64c['from']?.['id'][_0x1c5375(0x27c)]();if(!_0x360984)return;try{const _0x2bc506=await database_1['default'][_0x1c5375(0x2b3)][_0x1c5375(0x22b)]({'where':{'telegramId':_0x360984},'include':{'shop':!![]}});if(!_0x2bc506||!_0x2bc506[_0x1c5375(0x2fe)]||!_0x2bc506[_0x1c5375(0x2c3)]){await this[_0x1c5375(0x2ae)]?.[_0x1c5375(0x2a7)](_0x1020b4,_0x1c5375(0x1df));return;}const _0x5f1933=_0x2bc506[_0x1c5375(0x2f1)]?.['name']||_0x1c5375(0x2f6);await database_1['default'][_0x1c5375(0x2b3)][_0x1c5375(0x30f)]({'where':{'telegramId':_0x360984},'data':{'shopId':null,'isVerified':![]}}),console[_0x1c5375(0x1f0)]('ðŸ”Œ\x20User\x20'+_0x360984+_0x1c5375(0x266)+_0x2bc506[_0x1c5375(0x2c3)]),await this[_0x1c5375(0x2ae)]?.[_0x1c5375(0x2a7)](_0x1020b4,_0x1c5375(0x2ba)+_0x5f1933+_0x1c5375(0x2d6)+_0x1c5375(0x322),{'parse_mode':_0x1c5375(0x1ad)});}catch(_0x22e929){console[_0x1c5375(0x283)](_0x1c5375(0x258),_0x22e929),await this[_0x1c5375(0x2ae)]?.[_0x1c5375(0x2a7)](_0x1020b4,_0x1c5375(0x1ef));}}),this[_0x1c1ad6(0x2ae)][_0x1c1ad6(0x32c)](/\/status/,async _0x3d81d4=>{const _0x5b1c03=_0x1c1ad6,_0xe2ab59=_0x3d81d4[_0x5b1c03(0x20b)]['id'],_0x233448=_0x3d81d4['from']?.['id'][_0x5b1c03(0x27c)]();if(!_0x233448)return;try{const _0x288f0e=await database_1['default'][_0x5b1c03(0x2b3)][_0x5b1c03(0x22b)]({'where':{'telegramId':_0x233448},'include':{'shop':!![]}});if(!_0x288f0e){await this[_0x5b1c03(0x2ae)]?.[_0x5b1c03(0x2a7)](_0xe2ab59,_0x5b1c03(0x334)+_0x5b1c03(0x227));return;}if(!_0x288f0e[_0x5b1c03(0x2fe)]||!_0x288f0e[_0x5b1c03(0x2c3)]||!_0x288f0e['shop']){await this[_0x5b1c03(0x2ae)]?.[_0x5b1c03(0x2a7)](_0xe2ab59,_0x5b1c03(0x1fb)+'Use\x20/start\x20to\x20connect.');return;}await this[_0x5b1c03(0x2ae)]?.[_0x5b1c03(0x2a7)](_0xe2ab59,_0x5b1c03(0x241)+(_0x5b1c03(0x1b3)+_0x288f0e['shop'][_0x5b1c03(0x255)]+'*\x0a')+(_0x5b1c03(0x256)+_0x288f0e[_0x5b1c03(0x2f1)][_0x5b1c03(0x2e7)]+'`\x0a')+(_0x5b1c03(0x1b6)+_0x288f0e[_0x5b1c03(0x268)][_0x5b1c03(0x315)](_0x5b1c03(0x2c6))+'\x0a\x0a')+_0x5b1c03(0x1de)+_0x5b1c03(0x26e)+'/statistics\x20-\x20view\x20your\x20statistics\x0a'+_0x5b1c03(0x2c0)+_0x5b1c03(0x1d4)+_0x5b1c03(0x2a9)+_0x5b1c03(0x293),{'parse_mode':_0x5b1c03(0x1ad)});}catch(_0x3fdd7d){console[_0x5b1c03(0x283)](_0x5b1c03(0x2bd),_0x3fdd7d),await this[_0x5b1c03(0x2ae)]?.[_0x5b1c03(0x2a7)](_0xe2ab59,_0x5b1c03(0x1ef));}}),this[_0x1c1ad6(0x2ae)][_0x1c1ad6(0x32c)](/\/statistics/,async _0x4edaa4=>{const _0x1a3bd8=_0x1c1ad6,_0x485804=_0x4edaa4['chat']['id'],_0x52de7f=_0x4edaa4[_0x1a3bd8(0x1d8)]?.['id'][_0x1a3bd8(0x27c)]();if(!_0x52de7f)return;try{const _0x12eebb=await database_1[_0x1a3bd8(0x318)][_0x1a3bd8(0x2b3)]['findUnique']({'where':{'telegramId':_0x52de7f},'include':{'shop':!![]}});if(!_0x12eebb?.[_0x1a3bd8(0x2fe)]||!_0x12eebb[_0x1a3bd8(0x2c3)]){await this[_0x1a3bd8(0x2ae)]?.[_0x1a3bd8(0x2a7)](_0x485804,_0x1a3bd8(0x1fb)+_0x1a3bd8(0x271));return;}await this[_0x1a3bd8(0x2ae)]?.[_0x1a3bd8(0x2a7)](_0x485804,_0x1a3bd8(0x2a5)+_0x1a3bd8(0x253)+_0x1a3bd8(0x2f4)+_0x1a3bd8(0x238)+_0x1a3bd8(0x209)+_0x1a3bd8(0x2ac)+_0x1a3bd8(0x248),{'parse_mode':_0x1a3bd8(0x1ad)});}catch(_0x77768f){console['error']('Error\x20handling\x20/statistics\x20command:',_0x77768f),await this[_0x1a3bd8(0x2ae)]?.[_0x1a3bd8(0x2a7)](_0x485804,_0x1a3bd8(0x1ef));}}),this[_0x1c1ad6(0x2ae)][_0x1c1ad6(0x32c)](/\/payouts/,async _0x4a001a=>{const _0x16acb6=_0x1c1ad6,_0x3b1cdc=_0x4a001a[_0x16acb6(0x20b)]['id'],_0x37f4bc=_0x4a001a[_0x16acb6(0x1d8)]?.['id'][_0x16acb6(0x27c)]();if(!_0x37f4bc)return;try{const _0x1eeaf2=await database_1[_0x16acb6(0x318)][_0x16acb6(0x2b3)]['findUnique']({'where':{'telegramId':_0x37f4bc},'include':{'shop':!![]}});if(!_0x1eeaf2?.[_0x16acb6(0x2fe)]||!_0x1eeaf2[_0x16acb6(0x2c3)]){await this[_0x16acb6(0x2ae)]?.[_0x16acb6(0x2a7)](_0x3b1cdc,'âŒ\x20You\x20are\x20not\x20connected\x20to\x20a\x20shop.\x0a\x0a'+'Use\x20/start\x20to\x20connect.');return;}await this[_0x16acb6(0x2ae)]?.[_0x16acb6(0x2a7)](_0x3b1cdc,'ðŸ’¸\x20*Recent\x20Payouts*\x0a\x0a'+_0x16acb6(0x253)+_0x16acb6(0x2f4)+_0x16acb6(0x1eb)+'â€¢\x20Amount\x20and\x20network\x0a'+_0x16acb6(0x28e)+_0x16acb6(0x333),{'parse_mode':_0x16acb6(0x1ad)});}catch(_0x13d3e5){console[_0x16acb6(0x283)](_0x16acb6(0x2bf),_0x13d3e5),await this[_0x16acb6(0x2ae)]?.[_0x16acb6(0x2a7)](_0x3b1cdc,'âŒ\x20An\x20error\x20occurred.\x20Please\x20try\x20again\x20later.');}}),this['bot'][_0x1c1ad6(0x32c)](/\/payment_links/,async _0x586ac2=>{const _0x43c57f=_0x1c1ad6,_0x418f90=_0x586ac2[_0x43c57f(0x20b)]['id'],_0x3d3e73=_0x586ac2[_0x43c57f(0x1d8)]?.['id'][_0x43c57f(0x27c)]();if(!_0x3d3e73)return;try{const _0x4ba547=await database_1['default']['telegramUser'][_0x43c57f(0x22b)]({'where':{'telegramId':_0x3d3e73},'include':{'shop':!![]}});if(!_0x4ba547?.[_0x43c57f(0x2fe)]||!_0x4ba547['shopId']){await this[_0x43c57f(0x2ae)]?.['sendMessage'](_0x418f90,_0x43c57f(0x1fb)+_0x43c57f(0x271));return;}await this['bot']?.[_0x43c57f(0x2a7)](_0x418f90,_0x43c57f(0x292)+_0x43c57f(0x253)+'This\x20feature\x20will\x20show:\x0a'+_0x43c57f(0x1c8)+_0x43c57f(0x1fd)+_0x43c57f(0x27b)+_0x43c57f(0x1af),{'parse_mode':_0x43c57f(0x1ad)});}catch(_0x4f0fe4){console['error'](_0x43c57f(0x1f1),_0x4f0fe4),await this[_0x43c57f(0x2ae)]?.[_0x43c57f(0x2a7)](_0x418f90,_0x43c57f(0x1ef));}}),this[_0x1c1ad6(0x2ae)][_0x1c1ad6(0x32c)](/\/contacts/,async _0x5ad883=>{const _0x3769fa=_0x1c1ad6,_0x577cf8=_0x5ad883['chat']['id'];try{await this[_0x3769fa(0x2ae)]?.[_0x3769fa(0x2a7)](_0x577cf8,'ðŸ“ž\x20*Contacts*\x0a\x0a'+_0x3769fa(0x2b5)+_0x3769fa(0x339)+_0x3769fa(0x22f)+'ðŸ’¬\x20Support:\x20https://t.me/trapay\x5c_sales',{'parse_mode':_0x3769fa(0x1ad)});}catch(_0x580f3f){console[_0x3769fa(0x283)](_0x3769fa(0x2a0),_0x580f3f),await this[_0x3769fa(0x2ae)]?.[_0x3769fa(0x2a7)](_0x577cf8,_0x3769fa(0x1ef));}}),this['bot']['on'](_0x1c1ad6(0x1b8),async _0xebc98b=>{const _0x123e85=_0x1c1ad6,_0x10f96e=_0xebc98b[_0x123e85(0x320)],_0xa594d8=_0x10f96e?.[_0x123e85(0x20b)]['id'],_0x56a756=_0xebc98b[_0x123e85(0x1d8)]['id']['toString'](),_0x362de0=_0xebc98b[_0x123e85(0x1f9)];if(!_0xa594d8||!_0x362de0)return;try{await this[_0x123e85(0x2ae)]?.[_0x123e85(0x303)](_0xebc98b['id']);const _0x5ab3b1=await database_1[_0x123e85(0x318)][_0x123e85(0x2b3)][_0x123e85(0x22b)]({'where':{'telegramId':_0x56a756},'include':{'shop':!![]}});if(!_0x5ab3b1?.[_0x123e85(0x2fe)]||!_0x5ab3b1[_0x123e85(0x2c3)]){await this['bot']?.[_0x123e85(0x2a7)](_0xa594d8,_0x123e85(0x1e4));return;}switch(_0x362de0){case _0x123e85(0x1e8):const _0x4e1313=new Date();_0x4e1313['setHours'](0x0,0x0,0x0,0x0);const _0x6fba6e=new Date(_0x4e1313);_0x6fba6e[_0x123e85(0x1e7)](_0x6fba6e[_0x123e85(0x280)]()+0x1);const _0x1c4e36=await database_1[_0x123e85(0x318)][_0x123e85(0x314)][_0x123e85(0x245)]({'where':{'shopId':_0x5ab3b1[_0x123e85(0x2c3)],'createdAt':{'gte':_0x4e1313,'lt':_0x6fba6e}}}),_0xc6fbf0=_0x1c4e36['filter'](_0x40e698=>_0x40e698[_0x123e85(0x31a)]===_0x123e85(0x249)),_0x249954=_0x1c4e36[_0x123e85(0x2aa)](_0x30e2b8=>_0x30e2b8[_0x123e85(0x31a)]===_0x123e85(0x22d)),_0x101851=_0x1c4e36[_0x123e85(0x2aa)](_0x251f4d=>_0x251f4d[_0x123e85(0x31a)]===_0x123e85(0x2ea))[_0x123e85(0x23b)],_0x3e62a3=_0x1c4e36[_0x123e85(0x2aa)](_0x4aef94=>_0x4aef94[_0x123e85(0x31a)]===_0x123e85(0x221))[_0x123e85(0x23b)],_0x52e3ba=_0xc6fbf0[_0x123e85(0x284)]((_0x30f387,_0x44c750)=>_0x30f387+(_0x44c750[_0x123e85(0x205)]||0x0),0x0),_0x1b3dad=_0xc6fbf0[_0x123e85(0x284)]((_0x12ad10,_0x3a5763)=>_0x12ad10+(_0x3a5763['commission']||0x0),0x0),_0x1e714d=_0xc6fbf0[_0x123e85(0x23b)]+_0x249954[_0x123e85(0x23b)]>0x0?(_0xc6fbf0[_0x123e85(0x23b)]/(_0xc6fbf0['length']+_0x249954[_0x123e85(0x23b)])*0x64)[_0x123e85(0x2fb)](0x1):_0x123e85(0x25e),_0x14ac67=new Date()[_0x123e85(0x315)](_0x123e85(0x33d),{'day':_0x123e85(0x242),'month':_0x123e85(0x242),'year':'numeric'});await this[_0x123e85(0x2ae)]?.['sendMessage'](_0xa594d8,_0x123e85(0x337)+_0x14ac67+_0x123e85(0x1d3)+('ðŸ’°\x20Turnover\x20-\x20'+_0x52e3ba[_0x123e85(0x2fb)](0x2)+_0x123e85(0x228))+('ðŸ’µ\x20Earned\x20-\x20'+_0x1b3dad[_0x123e85(0x2fb)](0x2)+_0x123e85(0x228))+(_0x123e85(0x1dd)+_0xc6fbf0[_0x123e85(0x23b)]+'\x0a')+(_0x123e85(0x262)+_0x249954[_0x123e85(0x23b)]+'\x0a')+(_0x123e85(0x281)+_0x1e714d+'%\x0a')+(_0x123e85(0x222)+_0x101851+'\x0a')+(_0x123e85(0x288)+_0x3e62a3),{'parse_mode':_0x123e85(0x1ad)});break;case _0x123e85(0x2f5):const _0x5ae832=await database_1[_0x123e85(0x318)]['payout'][_0x123e85(0x245)]({'where':{'shopId':_0x5ab3b1['shopId']},'orderBy':{'createdAt':'desc'}}),_0x5b0eaf=_0x5ae832['filter'](_0x44d74b=>_0x44d74b[_0x123e85(0x31a)]===_0x123e85(0x225))[_0x123e85(0x284)]((_0x2ce31f,_0x4a7052)=>_0x2ce31f+_0x4a7052[_0x123e85(0x205)],0x0),_0x26ad3f=_0x5ae832[_0x123e85(0x2aa)](_0x48973d=>_0x48973d[_0x123e85(0x31a)]===_0x123e85(0x1b0))[_0x123e85(0x284)]((_0x52561b,_0x565ff5)=>_0x52561b+_0x565ff5[_0x123e85(0x205)],0x0),_0x22343a=(_0x5ab3b1[_0x123e85(0x2f1)]?.[_0x123e85(0x2f3)]||0x0)+(_0x5ab3b1[_0x123e85(0x2f1)]?.['totalPaidOut']||0x0);await this[_0x123e85(0x2ae)]?.[_0x123e85(0x2a7)](_0xa594d8,_0x123e85(0x1c1)+(_0x123e85(0x217)+_0x5b0eaf[_0x123e85(0x2fb)](0x2)+_0x123e85(0x228))+(_0x123e85(0x1ff)+_0x26ad3f['toFixed'](0x2)+_0x123e85(0x228))+(_0x123e85(0x230)+_0x22343a[_0x123e85(0x2fb)](0x2)+_0x123e85(0x309)),{'parse_mode':'Markdown'});break;case _0x123e85(0x206):await this[_0x123e85(0x2ae)]?.['sendMessage'](_0xa594d8,_0x123e85(0x33e),{'parse_mode':_0x123e85(0x1ad),'reply_markup':{'inline_keyboard':[[{'text':_0x123e85(0x1d2),'callback_data':'pl_view_list'}],[{'text':_0x123e85(0x208),'callback_data':_0x123e85(0x214)}],[{'text':'âŒ\x20Cancel','callback_data':_0x123e85(0x1d0)}]]}});break;case _0x123e85(0x2b2):await this['bot']?.['sendMessage'](_0xa594d8,'ðŸ“Š\x20*Connection\x20Status*\x0a\x0a'+(_0x123e85(0x1b3)+(_0x5ab3b1[_0x123e85(0x2f1)]?.[_0x123e85(0x255)]||'Unknown')+'*\x0a')+(_0x123e85(0x256)+(_0x5ab3b1[_0x123e85(0x2f1)]?.[_0x123e85(0x2e7)]||_0x123e85(0x2d5))+'`\x0a')+(_0x123e85(0x1b6)+_0x5ab3b1[_0x123e85(0x268)]['toLocaleDateString'](_0x123e85(0x2c6))+'\x0a\x0a')+_0x123e85(0x2d3),{'parse_mode':_0x123e85(0x1ad)});break;case _0x123e85(0x260):await this[_0x123e85(0x2ae)]?.[_0x123e85(0x2a7)](_0xa594d8,_0x123e85(0x308)+'ðŸŒ\x20Website:\x20https://trapay.uk/\x0a'+_0x123e85(0x339)+_0x123e85(0x22f)+'ðŸ’¬\x20Support:\x20https://t.me/trapay\x5c_sales',{'parse_mode':_0x123e85(0x1ad)});break;case _0x123e85(0x1bc):await database_1[_0x123e85(0x318)]['telegramUser'][_0x123e85(0x30f)]({'where':{'telegramId':_0x56a756},'data':{'shopId':null,'isVerified':![]}}),await this[_0x123e85(0x2ae)]?.[_0x123e85(0x2a7)](_0xa594d8,_0x123e85(0x2ba)+(_0x5ab3b1[_0x123e85(0x2f1)]?.[_0x123e85(0x255)]||_0x123e85(0x2d5))+_0x123e85(0x2d6)+_0x123e85(0x322),{'parse_mode':_0x123e85(0x1ad)});break;default:_0x362de0[_0x123e85(0x298)](_0x123e85(0x216))?await this[_0x123e85(0x1e0)](_0xa594d8,_0x56a756,_0x362de0,_0xebc98b['message']?.[_0x123e85(0x24c)]):await this[_0x123e85(0x2ae)]?.['sendMessage'](_0xa594d8,_0x123e85(0x269));}}catch(_0x55d55a){console['error'](_0x123e85(0x2bc),_0x55d55a),await this['bot']?.[_0x123e85(0x2a7)](_0xa594d8,_0x123e85(0x1ef));}}),this[_0x1c1ad6(0x2ae)][_0x1c1ad6(0x32c)](/\/debug/,async _0x888832=>{const _0x1653a8=_0x1c1ad6,_0x265247=_0x888832[_0x1653a8(0x20b)]['id'],_0x572972=_0x888832[_0x1653a8(0x1d8)]?.['id'][_0x1653a8(0x27c)]();if(!_0x572972)return;try{const _0x2b303c=await database_1[_0x1653a8(0x318)][_0x1653a8(0x2b3)]['findUnique']({'where':{'telegramId':_0x572972},'include':{'shop':!![]}});let _0x160cff=_0x1653a8(0x22a);_0x160cff+=_0x1653a8(0x1bd)+_0x572972+_0x1653a8(0x1e2),_0x2b303c?.['isVerified']&&_0x2b303c[_0x1653a8(0x2f1)]?(_0x160cff+=_0x1653a8(0x24d),_0x160cff+=_0x1653a8(0x20c)+_0x2b303c[_0x1653a8(0x2f1)][_0x1653a8(0x255)]+'*\x0a',_0x160cff+=_0x1653a8(0x26c)+_0x2b303c[_0x1653a8(0x2f1)][_0x1653a8(0x2e7)]+'`\x0a',_0x160cff+=_0x1653a8(0x2a6)+_0x2b303c['shop'][_0x1653a8(0x31a)]+'\x0a\x0a'):_0x160cff+=_0x1653a8(0x254),_0x160cff+='Use\x20/start\x20to\x20connect\x20to\x20a\x20shop.',await this[_0x1653a8(0x2ae)]?.[_0x1653a8(0x2a7)](_0x265247,_0x160cff,{'parse_mode':_0x1653a8(0x1ad)});}catch(_0x42178f){console[_0x1653a8(0x283)](_0x1653a8(0x1ac),_0x42178f),await this[_0x1653a8(0x2ae)]?.[_0x1653a8(0x2a7)](_0x265247,_0x1653a8(0x21d));}}),this[_0x1c1ad6(0x2ae)]['on'](_0x1c1ad6(0x320),async _0x23b6f0=>{const _0x5c6261=_0x1c1ad6;if(_0x23b6f0[_0x5c6261(0x323)]?.[_0x5c6261(0x298)]('/'))return;const _0x9ca9ee=_0x23b6f0[_0x5c6261(0x20b)]['id'],_0x1476f1=_0x23b6f0[_0x5c6261(0x1d8)]?.['id'][_0x5c6261(0x27c)](),_0x10327c=_0x23b6f0['text']?.[_0x5c6261(0x1c9)]();if(!_0x1476f1||!_0x10327c)return;try{const _0x5738af=this['paymentLinkSessions'][_0x5c6261(0x2d7)](_0x1476f1);if(_0x5738af&&_0x5738af[_0x5c6261(0x285)]===_0x5c6261(0x205)){const _0x74f8ed=parseFloat(_0x10327c);if(isNaN(_0x74f8ed)||_0x74f8ed<=0x0){await this['bot']?.['sendMessage'](_0x9ca9ee,'âŒ\x20Invalid\x20amount.\x20Please\x20enter\x20a\x20valid\x20number\x20greater\x20than\x200.');return;}const _0x1a9e6d=await database_1['default'][_0x5c6261(0x2b3)][_0x5c6261(0x22b)]({'where':{'telegramId':_0x1476f1},'include':{'shop':!![]}});if(!_0x1a9e6d?.['shopId']){await this[_0x5c6261(0x2ae)]?.[_0x5c6261(0x2a7)](_0x9ca9ee,'âŒ\x20Shop\x20not\x20found.\x20Please\x20start\x20over\x20with\x20/start'),this[_0x5c6261(0x26f)][_0x5c6261(0x24a)](_0x1476f1);return;}const _0x146915={'shopId':_0x1a9e6d[_0x5c6261(0x2c3)],'gateway':_0x5738af[_0x5c6261(0x1e6)],'amount':_0x74f8ed,'currency':_0x5738af[_0x5c6261(0x218)],'type':_0x5738af[_0x5c6261(0x2e4)],'status':_0x5c6261(0x29d)},_0x3e4e0b=await database_1[_0x5c6261(0x318)][_0x5c6261(0x1d9)][_0x5c6261(0x300)]({'data':_0x146915});this[_0x5c6261(0x26f)]['delete'](_0x1476f1);const _0x4e716b=(process.env.FRONTEND_URL||_0x5c6261(0x229))+_0x5c6261(0x2ee)+_0x3e4e0b['id'],_0xa3e72d=_0x4e716b[_0x5c6261(0x2e1)](/\./g,'\x5c.')['replace'](/-/g,'\x5c-')[_0x5c6261(0x2e1)](/\//g,'\x5c/');await this[_0x5c6261(0x2ae)]?.[_0x5c6261(0x2a7)](_0x9ca9ee,'âœ…\x20*Payment\x20Link\x20Created\x20Successfully\x5c!*\x0a\x0a'+('ðŸ”—\x20Link:\x20'+_0xa3e72d+'\x0a')+(_0x5c6261(0x2cc)+_0x74f8ed+'\x20'+_0x5738af[_0x5c6261(0x218)]+'\x0a')+(_0x5c6261(0x26b)+_0x5738af[_0x5c6261(0x1e6)]+'\x0a')+('ðŸ”„\x20Type:\x20'+(_0x5738af[_0x5c6261(0x2e4)]===_0x5c6261(0x2c2)?_0x5c6261(0x313):_0x5c6261(0x316))+'\x0a\x0a')+_0x5c6261(0x23d),{'parse_mode':_0x5c6261(0x201)});return;}const _0x4b08c2=await database_1[_0x5c6261(0x318)][_0x5c6261(0x2b3)][_0x5c6261(0x22b)]({'where':{'telegramId':_0x1476f1},'include':{'shop':!![]}});if(!_0x4b08c2){await this[_0x5c6261(0x2ae)]?.[_0x5c6261(0x2a7)](_0x9ca9ee,'âŒ\x20Please\x20use\x20/start\x20command\x20first');return;}if(_0x4b08c2[_0x5c6261(0x2fe)]&&_0x4b08c2[_0x5c6261(0x2c3)]&&_0x4b08c2[_0x5c6261(0x2f1)]){await this[_0x5c6261(0x2ae)]?.['sendMessage'](_0x9ca9ee,_0x5c6261(0x2a8)+_0x4b08c2[_0x5c6261(0x2f1)]['name']+_0x5c6261(0x2d6)+_0x5c6261(0x1d6),{'parse_mode':_0x5c6261(0x1ad)});return;}const _0x2bbcd9=_0x10327c[_0x5c6261(0x317)](/\s+/);if(_0x2bbcd9[_0x5c6261(0x23b)]!==0x2){await this[_0x5c6261(0x2ae)]?.[_0x5c6261(0x2a7)](_0x9ca9ee,'âŒ\x20Invalid\x20format.\x20Please\x20send\x20exactly\x202\x20parts\x20separated\x20by\x20space:\x0a\x0a'+_0x5c6261(0x296)+'Example:\x0a'+_0x5c6261(0x25a)+(_0x5c6261(0x311)+_0x2bbcd9[_0x5c6261(0x23b)]+_0x5c6261(0x25f)+_0x2bbcd9[_0x5c6261(0x22c)](_0x2da527=>'`'+_0x2da527+'`')[_0x5c6261(0x1b4)](',\x20')),{'parse_mode':_0x5c6261(0x1ad)});return;}const [_0x389e0b,_0x4934cf]=_0x2bbcd9;console['log'](_0x5c6261(0x27f)+_0x1476f1+_0x5c6261(0x21a)+_0x389e0b+'\x22,\x20apiKey=\x22'+_0x4934cf['substring'](0x0,0xa)+'...\x22'),await this[_0x5c6261(0x247)](_0x9ca9ee,_0x1476f1,_0x389e0b,_0x4934cf);}catch(_0x52a50a){console[_0x5c6261(0x283)]('Error\x20handling\x20message:',_0x52a50a),await this[_0x5c6261(0x2ae)]?.[_0x5c6261(0x2a7)](_0x9ca9ee,_0x5c6261(0x1ef));}}),this[_0x1c1ad6(0x2ae)]['on'](_0x1c1ad6(0x283),_0x51da1a=>{const _0xa1646c=_0x1c1ad6;console[_0xa1646c(0x283)](_0xa1646c(0x328),_0x51da1a);}),this['bot']['on']('polling_error',_0x123d55=>{console['error']('Telegram\x20bot\x20polling\x20error:',_0x123d55);});}async[a87_0x390139(0x247)](_0x114c08,_0x7ac57d,_0xff2f6d,_0x404ff4){const _0x4c4b5f=a87_0x390139;try{console[_0x4c4b5f(0x1f0)](_0x4c4b5f(0x27f)+_0x7ac57d+_0x4c4b5f(0x21a)+_0xff2f6d+_0x4c4b5f(0x1be)+_0x404ff4[_0x4c4b5f(0x2b1)](0x0,0xa)+_0x4c4b5f(0x1f7));if(!_0xff2f6d||_0xff2f6d[_0x4c4b5f(0x23b)]<0x3||_0xff2f6d[_0x4c4b5f(0x23b)]>0x32||!/^[a-zA-Z0-9_]+$/[_0x4c4b5f(0x277)](_0xff2f6d)){await this['bot']?.[_0x4c4b5f(0x2a7)](_0x114c08,_0x4c4b5f(0x25b)+_0xff2f6d+_0x4c4b5f(0x1e2)+_0x4c4b5f(0x26d),{'parse_mode':_0x4c4b5f(0x1ad)});return;}if(!_0x404ff4||!_0x404ff4[_0x4c4b5f(0x298)](_0x4c4b5f(0x1dc))&&!_0x404ff4['startsWith'](_0x4c4b5f(0x2b0))){await this[_0x4c4b5f(0x2ae)]?.[_0x4c4b5f(0x2a7)](_0x114c08,'âŒ\x20Invalid\x20API\x20key\x20format.\x0a\x0a'+_0x4c4b5f(0x330),{'parse_mode':'Markdown'});return;}const _0x3eeda5=await database_1[_0x4c4b5f(0x318)][_0x4c4b5f(0x2f1)][_0x4c4b5f(0x22b)]({'where':{'username':_0xff2f6d},'select':{'id':!![],'name':!![],'username':!![],'status':!![],'publicKey':!![],'secretKey':!![]}});if(!_0x3eeda5){const _0x3b7414=_0x4c4b5f(0x30c)+_0xff2f6d+'`\x20not\x20found.\x0a\x0a'+_0x4c4b5f(0x2ed)+_0x4c4b5f(0x215);await this[_0x4c4b5f(0x2ae)]?.['sendMessage'](_0x114c08,_0x3b7414,{'parse_mode':'Markdown'});return;}if(_0x3eeda5[_0x4c4b5f(0x31a)]!==_0x4c4b5f(0x29d)){await this[_0x4c4b5f(0x2ae)]?.[_0x4c4b5f(0x2a7)](_0x114c08,_0x4c4b5f(0x27a)+_0xff2f6d+_0x4c4b5f(0x32f)+_0x4c4b5f(0x24b),{'parse_mode':_0x4c4b5f(0x1ad)});return;}if(_0x3eeda5[_0x4c4b5f(0x1aa)]!==_0x404ff4&&_0x3eeda5[_0x4c4b5f(0x246)]!==_0x404ff4){await this[_0x4c4b5f(0x2ae)]?.[_0x4c4b5f(0x2a7)](_0x114c08,_0x4c4b5f(0x326)+_0xff2f6d+'`.\x0a\x0a'+_0x4c4b5f(0x32a)+_0x4c4b5f(0x325),{'parse_mode':'Markdown'});return;}const _0x588f31=await database_1[_0x4c4b5f(0x318)][_0x4c4b5f(0x2b3)][_0x4c4b5f(0x27e)]({'where':{'shopId':_0x3eeda5['id'],'isVerified':!![]}});if(_0x588f31>=0x5){await this[_0x4c4b5f(0x2ae)]?.[_0x4c4b5f(0x2a7)](_0x114c08,_0x4c4b5f(0x1cb)+_0xff2f6d+_0x4c4b5f(0x2f9)+_0x4c4b5f(0x1ce),{'parse_mode':_0x4c4b5f(0x1ad)});return;}await database_1['default'][_0x4c4b5f(0x2b3)][_0x4c4b5f(0x30f)]({'where':{'telegramId':_0x7ac57d},'data':{'shopId':_0x3eeda5['id'],'isVerified':!![]}}),await this[_0x4c4b5f(0x2ae)]?.[_0x4c4b5f(0x2a7)](_0x114c08,_0x4c4b5f(0x2c4)+_0x4c4b5f(0x2fa)+(_0x4c4b5f(0x27d)+_0x3eeda5[_0x4c4b5f(0x255)]+'*\x0a')+(_0x4c4b5f(0x256)+_0x3eeda5[_0x4c4b5f(0x2e7)]+_0x4c4b5f(0x1e2))+_0x4c4b5f(0x1d5)+_0x4c4b5f(0x2a3)+_0x4c4b5f(0x2ab)+_0x4c4b5f(0x273)+'â€¢\x20Important\x20events',{'parse_mode':'Markdown','reply_markup':{'inline_keyboard':[[{'text':_0x4c4b5f(0x244),'callback_data':'cmd_statistics'},{'text':_0x4c4b5f(0x2d0),'callback_data':_0x4c4b5f(0x2f5)}],[{'text':_0x4c4b5f(0x29b),'callback_data':_0x4c4b5f(0x206)},{'text':_0x4c4b5f(0x210),'callback_data':_0x4c4b5f(0x2b2)}],[{'text':_0x4c4b5f(0x2f7),'callback_data':_0x4c4b5f(0x260)},{'text':_0x4c4b5f(0x2cf),'callback_data':_0x4c4b5f(0x1bc)}]]}}),console[_0x4c4b5f(0x1f0)](_0x4c4b5f(0x220)+_0x7ac57d+_0x4c4b5f(0x295)+_0x3eeda5[_0x4c4b5f(0x2e7)]+_0x4c4b5f(0x24e));}catch(_0x36a569){console[_0x4c4b5f(0x283)](_0x4c4b5f(0x31f),_0x36a569),await this[_0x4c4b5f(0x2ae)]?.['sendMessage'](_0x114c08,_0x4c4b5f(0x1d7));}}async['sendShopNotification'](_0x581a1e,_0x1c1556,_0x445005){const _0x2cf142=a87_0x390139;if(!this[_0x2cf142(0x2ae)]){console[_0x2cf142(0x338)]('Telegram\x20bot\x20not\x20initialized,\x20cannot\x20send\x20notification');return;}try{const _0x2dbc1e=await database_1['default'][_0x2cf142(0x2b3)][_0x2cf142(0x245)]({'where':{'shopId':_0x581a1e,'isVerified':!![]}});if(_0x2dbc1e['length']===0x0){console[_0x2cf142(0x1f0)](_0x2cf142(0x28b)+_0x581a1e);return;}const _0x218d58=_0x2dbc1e[_0x2cf142(0x22c)](async _0x24c37a=>{const _0x1ae671=_0x2cf142;try{await this[_0x1ae671(0x2ae)]?.['sendMessage'](_0x24c37a[_0x1ae671(0x2fc)],_0x1c1556,_0x445005),console[_0x1ae671(0x1f0)](_0x1ae671(0x305)+_0x24c37a['telegramId']);}catch(_0x23fbe1){console[_0x1ae671(0x283)](_0x1ae671(0x1a4)+_0x24c37a['telegramId']+':',_0x23fbe1),_0x23fbe1 instanceof Error&&(_0x23fbe1[_0x1ae671(0x320)][_0x1ae671(0x275)]('blocked')||_0x23fbe1['message'][_0x1ae671(0x275)](_0x1ae671(0x1a8))||_0x23fbe1[_0x1ae671(0x320)][_0x1ae671(0x275)](_0x1ae671(0x32d)))&&(await database_1[_0x1ae671(0x318)]['telegramUser'][_0x1ae671(0x30f)]({'where':{'id':_0x24c37a['id']},'data':{'isVerified':![]}}),console[_0x1ae671(0x1f0)](_0x1ae671(0x1ae)+_0x24c37a['telegramId']+'\x20marked\x20as\x20unverified\x20due\x20to\x20delivery\x20failure'));}});await Promise[_0x2cf142(0x26a)](_0x218d58);}catch(_0x18055a){console['error'](_0x2cf142(0x200),_0x18055a);}}async[a87_0x390139(0x1c5)](_0x3d0e7c,_0x127442,_0xe2b6db){const _0x3827db=a87_0x390139,_0x11245e={'created':'ðŸ†•','paid':'âœ…','failed':'âŒ','expired':'â°','refund':'ðŸ”„','chargeback':'âš ï¸','processing':'âš™ï¸'},_0xfff5c5={'created':_0x3827db(0x265),'paid':'Payment\x20successfully\x20paid','failed':_0x3827db(0x20e),'expired':'Payment\x20expired','refund':_0x3827db(0x2d2),'chargeback':_0x3827db(0x1a7),'processing':_0x3827db(0x2a2)},_0x3e873a=_0x11245e[_0xe2b6db],_0x55457d=_0xfff5c5[_0xe2b6db],_0x2f22bf=(0x0,gateway_1[_0x3827db(0x321)])(_0x127442[_0x3827db(0x1e6)]);console[_0x3827db(0x1f0)]('ðŸ“±\x20Telegram\x20notification:\x20gateway\x20\x22'+_0x127442[_0x3827db(0x1e6)]+_0x3827db(0x286)+_0x2f22bf+'\x22');let _0x4d68e1=_0x3e873a+'\x20*'+_0x55457d+_0x3827db(0x1d3)+(_0x3827db(0x1ee)+_0x127442[_0x3827db(0x205)]+'\x20'+_0x127442[_0x3827db(0x218)]+'*\x0a')+(_0x3827db(0x2da)+(_0x127442[_0x3827db(0x233)]||_0x127442['id'])+'`\x0a')+(_0x3827db(0x23c)+_0x127442['id']+'`\x0a')+(_0x3827db(0x270)+_0x2f22bf+'`\x0a')+(_0x3827db(0x1c3)+new Date(_0x127442['createdAt'])[_0x3827db(0x231)](_0x3827db(0x2c6))+'\x0a');if(_0x127442[_0x3827db(0x324)]||_0x127442[_0x3827db(0x259)]||_0x127442[_0x3827db(0x237)]||_0x127442[_0x3827db(0x1bf)]||_0x127442[_0x3827db(0x2cb)]){_0x4d68e1+=_0x3827db(0x2c1);_0x127442[_0x3827db(0x324)]&&(_0x4d68e1+='ðŸ“›\x20Name:\x20`'+_0x127442['customerName']+'`\x0a');_0x127442[_0x3827db(0x259)]&&(_0x4d68e1+=_0x3827db(0x2ce)+_0x127442[_0x3827db(0x259)]+'`\x0a');_0x127442[_0x3827db(0x237)]&&(_0x4d68e1+=_0x3827db(0x2df)+_0x127442['remitterIban']+'`\x0a');_0x127442[_0x3827db(0x1bf)]&&(_0x4d68e1+=_0x3827db(0x202)+_0x127442[_0x3827db(0x1bf)]+'`\x0a');if(_0x127442[_0x3827db(0x2cb)]){const _0x474921=_0x127442[_0x3827db(0x2cb)][_0x3827db(0x23b)]>0x32?_0x127442[_0x3827db(0x2cb)][_0x3827db(0x2b1)](0x0,0x32)+_0x3827db(0x31d):_0x127442['customerUa'];_0x4d68e1+=_0x3827db(0x307)+_0x474921+'`\x0a';}}_0xe2b6db===_0x3827db(0x252)&&_0x127442[_0x3827db(0x282)]&&(_0x4d68e1+=_0x3827db(0x1a3)+_0x127442[_0x3827db(0x282)]+_0x3827db(0x20f)),_0xe2b6db==='processing'&&(_0x4d68e1+=_0x3827db(0x1e3)),_0x127442[_0x3827db(0x23f)]&&(_0x4d68e1+=_0x3827db(0x2e2)+_0x127442[_0x3827db(0x23f)]+'\x0a'),await this['sendShopNotification'](_0x3d0e7c,_0x4d68e1,{'parse_mode':'Markdown'});}async[a87_0x390139(0x312)](_0x2e4b39,_0x52628e){const _0x3ddb06=a87_0x390139,_0x591c98=new Date(_0x52628e[_0x3ddb06(0x289)])['toLocaleString'](_0x3ddb06(0x2c6),{'year':_0x3ddb06(0x28a),'month':_0x3ddb06(0x242),'day':_0x3ddb06(0x242),'hour':_0x3ddb06(0x242),'minute':_0x3ddb06(0x242),'second':'2-digit'}),_0x201be7=_0x3ddb06(0x33c)+(_0x3ddb06(0x2e9)+_0x591c98+'\x0a')+(_0x3ddb06(0x319)+_0x52628e['amount']+_0x3ddb06(0x23e))+(_0x3ddb06(0x23a)+(_0x52628e[_0x3ddb06(0x2cd)]||_0x3ddb06(0x1a9))+'\x0a')+(_0x3ddb06(0x1ab)+(_0x52628e[_0x3ddb06(0x31b)]||_0x3ddb06(0x1a9))+'\x0a')+(_0x3ddb06(0x290)+(_0x52628e['wallet']||_0x3ddb06(0x1a9))+'`\x0a')+(_0x52628e[_0x3ddb06(0x30d)]?_0x3ddb06(0x2ad)+_0x52628e[_0x3ddb06(0x30d)]+'`':_0x3ddb06(0x1c2));await this[_0x3ddb06(0x1c6)](_0x2e4b39,_0x201be7,{'parse_mode':'Markdown'});}async['sendLoginNotification'](_0x912846,_0x19e85f){const _0x242085=a87_0x390139;try{const _0x4a59ad=await database_1[_0x242085(0x318)][_0x242085(0x2c8)][_0x242085(0x22b)]({'where':{'shopId':_0x912846},'select':{'notificationLogin':!![]}});if(!_0x4a59ad?.['notificationLogin']){console[_0x242085(0x1f0)](_0x242085(0x28d)+_0x912846);return;}const _0x157e19=_0x19e85f['success']?'ðŸ”':'ðŸš¨',_0x1faba2=_0x19e85f['success']?_0x242085(0x32e):'Failed\x20login\x20attempt';let _0x3203a0=_0x157e19+'\x20*'+_0x1faba2+'*\x0a\x0a'+(_0x242085(0x256)+_0x19e85f[_0x242085(0x2e7)]+'`\x0a')+(_0x242085(0x2b8)+_0x19e85f['timestamp']['toLocaleString'](_0x242085(0x2c6))+'\x0a');_0x19e85f['ipAddress']&&(_0x3203a0+=_0x242085(0x2d1)+_0x19e85f['ipAddress']+'`\x0a');_0x19e85f['geo']&&(_0x3203a0+=_0x242085(0x21f)+_0x19e85f['geo']+'\x0a');if(_0x19e85f['userAgent']){const _0x50bf42=_0x19e85f[_0x242085(0x1b1)][_0x242085(0x23b)]>0x32?_0x19e85f[_0x242085(0x1b1)]['substring'](0x0,0x32)+_0x242085(0x31d):_0x19e85f[_0x242085(0x1b1)];_0x3203a0+=_0x242085(0x307)+_0x50bf42+'`\x0a';}!_0x19e85f[_0x242085(0x203)]&&(_0x3203a0+=_0x242085(0x211)),await this[_0x242085(0x1c6)](_0x912846,_0x3203a0,{'parse_mode':_0x242085(0x1ad)}),console[_0x242085(0x1f0)]('âœ…\x20Login\x20notification\x20sent\x20for\x20shop\x20'+_0x912846+':\x20'+(_0x19e85f[_0x242085(0x203)]?_0x242085(0x203):_0x242085(0x1b7)));}catch(_0x251ff3){console['error'](_0x242085(0x2f8),_0x251ff3);}}async['sendApiErrorNotification'](_0x46af1b,_0x4e4565){const _0x698ea4=a87_0x390139;try{const _0x7a52b9=await database_1[_0x698ea4(0x318)][_0x698ea4(0x2c8)][_0x698ea4(0x22b)]({'where':{'shopId':_0x46af1b},'select':{'notificationApiError':!![]}});if(!_0x7a52b9?.['notificationApiError']){console['log']('ðŸ“±\x20API\x20error\x20notifications\x20disabled\x20for\x20shop\x20'+_0x46af1b);return;}let _0x3ecb34='ðŸš¨\x20*API\x20Error*\x0a\x0a'+(_0x698ea4(0x1ed)+_0x4e4565['method']+'\x20'+_0x4e4565['endpoint']+'`\x0a')+('ðŸ“…\x20Time:\x20'+_0x4e4565[_0x698ea4(0x1fe)][_0x698ea4(0x231)](_0x698ea4(0x2c6))+'\x0a');_0x4e4565['statusCode']&&(_0x3ecb34+=_0x698ea4(0x30b)+_0x4e4565[_0x698ea4(0x2e5)]+'`\x0a'),_0x3ecb34+='âŒ\x20Error:\x20`'+_0x4e4565[_0x698ea4(0x30a)]+'`\x0a',_0x4e4565[_0x698ea4(0x304)]&&(_0x3ecb34+=_0x698ea4(0x2e6)+_0x4e4565[_0x698ea4(0x304)]+'`\x0a'),_0x3ecb34+=_0x698ea4(0x1c4),await this[_0x698ea4(0x1c6)](_0x46af1b,_0x3ecb34,{'parse_mode':_0x698ea4(0x1ad)}),console[_0x698ea4(0x1f0)](_0x698ea4(0x2be)+_0x46af1b+':\x20'+_0x4e4565[_0x698ea4(0x1c7)]);}catch(_0x35d8f1){console['error'](_0x698ea4(0x2e0),_0x35d8f1);}}async[a87_0x390139(0x224)](_0x2536e0,_0x1f9208,_0x584ce8){const _0x432f4a=a87_0x390139;let _0x13321a='ðŸ””\x20*'+_0x1f9208+_0x432f4a(0x1d3);for(const [_0x12c6ea,_0x33b949]of Object[_0x432f4a(0x250)](_0x584ce8)){_0x33b949!==null&&_0x33b949!==undefined&&(_0x13321a+=_0x12c6ea+_0x432f4a(0x2e8)+_0x33b949+'`\x0a');}await this[_0x432f4a(0x1c6)](_0x2536e0,_0x13321a,{'parse_mode':_0x432f4a(0x1ad)});}async[a87_0x390139(0x2b7)](_0x3e3557){const _0x2ea092=a87_0x390139;try{console[_0x2ea092(0x1f0)]('ðŸ“±\x20Sending\x20notification\x20to\x20all\x20connected\x20users:\x20'+_0x3e3557[_0x2ea092(0x2b1)](0x0,0x32)+_0x2ea092(0x31d));const _0x51877b=await database_1[_0x2ea092(0x318)][_0x2ea092(0x2b3)]['findMany']({'select':{'telegramId':!![]}});if(_0x51877b[_0x2ea092(0x23b)]===0x0){console[_0x2ea092(0x1f0)]('ðŸ“±\x20No\x20active\x20Telegram\x20users\x20found');return;}for(const _0x88bb30 of _0x51877b){try{await this[_0x2ea092(0x2ae)]?.['sendMessage'](_0x88bb30[_0x2ea092(0x2fc)],_0x3e3557,{'parse_mode':'Markdown'});}catch(_0x5c2db7){console[_0x2ea092(0x283)](_0x2ea092(0x1e1)+_0x88bb30[_0x2ea092(0x2fc)]+':',_0x5c2db7);}}console[_0x2ea092(0x1f0)](_0x2ea092(0x223)+_0x51877b[_0x2ea092(0x23b)]+_0x2ea092(0x302));}catch(_0x1a5ffe){console[_0x2ea092(0x283)]('âŒ\x20Failed\x20to\x20send\x20notification\x20to\x20all\x20users:',_0x1a5ffe);}}[a87_0x390139(0x2d9)](){const _0x2df81d=a87_0x390139;return{'isActive':!!this['bot'],'username':this[_0x2df81d(0x22e)]};}async[a87_0x390139(0x2d8)](_0x5a2804,_0x2e82cd,_0x3627d6,_0x1a56d9){const _0x58966d=a87_0x390139;try{if(!this[_0x58966d(0x2ae)])return console[_0x58966d(0x283)]('âŒ\x20Telegram\x20bot\x20not\x20initialized'),![];const _0x19ae68=await database_1[_0x58966d(0x318)][_0x58966d(0x2b3)][_0x58966d(0x245)]({'where':{'shopId':_0x5a2804,'isVerified':!![]},'select':{'telegramId':!![]}});if(_0x19ae68['length']===0x0)return console[_0x58966d(0x283)]('âŒ\x20No\x20verified\x20Telegram\x20users\x20found\x20for\x20shop\x20ID:\x20'+_0x5a2804),![];let _0x7bb184=0x0;for(const _0x4748d2 of _0x19ae68){try{await this[_0x58966d(0x2ae)][_0x58966d(0x2c5)](_0x4748d2[_0x58966d(0x2fc)],_0x2e82cd,{},{'filename':_0x3627d6,'contentType':_0x3627d6[_0x58966d(0x1f2)]('.png')?_0x58966d(0x274):_0x3627d6[_0x58966d(0x1f2)](_0x58966d(0x2b4))||_0x3627d6[_0x58966d(0x1f2)](_0x58966d(0x1cf))?_0x58966d(0x2af):_0x3627d6[_0x58966d(0x1f2)](_0x58966d(0x1f4))?_0x58966d(0x1b5):_0x58966d(0x213)}),_0x1a56d9&&await this[_0x58966d(0x2ae)][_0x58966d(0x2a7)](_0x4748d2[_0x58966d(0x2fc)],_0x1a56d9),_0x7bb184++;}catch(_0x1fbe6e){console[_0x58966d(0x283)]('âŒ\x20Error\x20sending\x20file\x20to\x20user\x20'+_0x4748d2['telegramId']+':',_0x1fbe6e);}}return console[_0x58966d(0x1f0)](_0x58966d(0x1ea)+_0x7bb184+'/'+_0x19ae68[_0x58966d(0x23b)]+_0x58966d(0x29e)+_0x5a2804+':\x20'+_0x3627d6),_0x7bb184>0x0;}catch(_0x371964){return console[_0x58966d(0x283)](_0x58966d(0x212),_0x371964),![];}}async[a87_0x390139(0x2c9)](_0x2e546e,_0x29e64c){const _0x2acfd6=a87_0x390139;try{if(!this[_0x2acfd6(0x2ae)])return console[_0x2acfd6(0x283)](_0x2acfd6(0x32b)),![];return await this['bot']['sendMessage'](_0x2e546e,_0x29e64c),console[_0x2acfd6(0x1f0)](_0x2acfd6(0x2ff)+_0x2e546e),!![];}catch(_0x357305){return console['error']('âŒ\x20Error\x20sending\x20direct\x20message:',_0x357305),![];}}async['sendDirectFile'](_0x542d3d,_0xfcc878,_0x83dd14,_0x48739a){const _0x4539f2=a87_0x390139;try{if(!this[_0x4539f2(0x2ae)])return console[_0x4539f2(0x283)](_0x4539f2(0x32b)),![];return await this[_0x4539f2(0x2ae)]['sendDocument'](_0x542d3d,_0xfcc878,{},{'filename':_0x83dd14,'contentType':_0x83dd14[_0x4539f2(0x1f2)](_0x4539f2(0x31e))?_0x4539f2(0x274):_0x83dd14[_0x4539f2(0x1f2)](_0x4539f2(0x2b4))||_0x83dd14[_0x4539f2(0x1f2)](_0x4539f2(0x1cf))?'image/jpeg':_0x83dd14[_0x4539f2(0x1f2)]('.pdf')?_0x4539f2(0x1b5):_0x4539f2(0x213)}),_0x48739a&&await this[_0x4539f2(0x2ae)][_0x4539f2(0x2a7)](_0x542d3d,_0x48739a),console['log']('âœ…\x20File\x20sent\x20to\x20chat\x20'+_0x542d3d+':\x20'+_0x83dd14),!![];}catch(_0x3aecf8){return console[_0x4539f2(0x283)](_0x4539f2(0x1c0),_0x3aecf8),![];}}async[a87_0x390139(0x1e0)](_0x4013dd,_0x24b08b,_0x21f132,_0x5ebeac){const _0x5edaac=a87_0x390139,_0x2bdb01=this[_0x5edaac(0x26f)][_0x5edaac(0x2d7)](_0x24b08b)||{};try{if(_0x21f132===_0x5edaac(0x1d0)){this[_0x5edaac(0x26f)][_0x5edaac(0x24a)](_0x24b08b),await this[_0x5edaac(0x2ae)]?.[_0x5edaac(0x20a)](_0x5edaac(0x1bb),{'chat_id':_0x4013dd,'message_id':_0x5ebeac});return;}if(_0x21f132==='pl_view_list'){await this[_0x5edaac(0x1a6)](_0x4013dd,_0x24b08b,_0x5ebeac,0x1);return;}if(_0x21f132[_0x5edaac(0x298)]('pl_page_')){const _0x4fe4db=parseInt(_0x21f132['replace'](_0x5edaac(0x204),''));await this[_0x5edaac(0x1a6)](_0x4013dd,_0x24b08b,_0x5ebeac,_0x4fe4db);return;}if(_0x21f132===_0x5edaac(0x214)){const _0x3eee01=await database_1['default'][_0x5edaac(0x2b3)][_0x5edaac(0x22b)]({'where':{'telegramId':_0x24b08b},'include':{'shop':!![]}});if(!_0x3eee01?.[_0x5edaac(0x2f1)]?.['paymentGateways']){await this[_0x5edaac(0x2ae)]?.[_0x5edaac(0x20a)](_0x5edaac(0x239),{'chat_id':_0x4013dd,'message_id':_0x5ebeac});return;}let _0x437589;try{_0x437589=JSON[_0x5edaac(0x297)](_0x3eee01[_0x5edaac(0x2f1)][_0x5edaac(0x21e)]);}catch{_0x437589=_0x3eee01[_0x5edaac(0x2f1)][_0x5edaac(0x21e)][_0x5edaac(0x317)](',')[_0x5edaac(0x2aa)](_0x1edf06=>_0x1edf06[_0x5edaac(0x1c9)]());}if(_0x437589['length']===0x0){await this[_0x5edaac(0x2ae)]?.['editMessageText'](_0x5edaac(0x30e),{'chat_id':_0x4013dd,'message_id':_0x5ebeac});return;}this['paymentLinkSessions'][_0x5edaac(0x2fd)](_0x24b08b,{'step':_0x5edaac(0x1e6)});const _0x1a9031=_0x437589[_0x5edaac(0x22c)](_0x38f97a=>{const _0x4b436e=_0x5edaac,_0x588b9d=Object[_0x4b436e(0x335)](gateway_1[_0x4b436e(0x2db)])[_0x4b436e(0x332)](_0x4ddcdc=>gateway_1[_0x4b436e(0x2db)][_0x4ddcdc]===_0x38f97a)||_0x38f97a;return[{'text':_0x4b436e(0x2ef)+_0x588b9d,'callback_data':_0x4b436e(0x1b9)+_0x588b9d}];});await this[_0x5edaac(0x2ae)]?.[_0x5edaac(0x20a)](_0x5edaac(0x291),{'chat_id':_0x4013dd,'message_id':_0x5ebeac,'parse_mode':_0x5edaac(0x1ad),'reply_markup':{'inline_keyboard':[..._0x1a9031,[{'text':'âŒ\x20Cancel','callback_data':_0x5edaac(0x1d0)}]]}});return;}if(_0x21f132['startsWith']('pl_gw_')){const _0x268c31=_0x21f132[_0x5edaac(0x2e1)]('pl_gw_','');_0x2bdb01[_0x5edaac(0x1e6)]=_0x268c31,_0x2bdb01[_0x5edaac(0x285)]=_0x5edaac(0x2e4),this[_0x5edaac(0x26f)][_0x5edaac(0x2fd)](_0x24b08b,_0x2bdb01),await this[_0x5edaac(0x2ae)]?.[_0x5edaac(0x20a)](_0x5edaac(0x28c)+_0x5edaac(0x2eb),{'chat_id':_0x4013dd,'message_id':_0x5ebeac,'parse_mode':_0x5edaac(0x1ad),'reply_markup':{'inline_keyboard':[[{'text':_0x5edaac(0x1db),'callback_data':_0x5edaac(0x236)}],[{'text':'â™¾ï¸\x20Multi\x20Use','callback_data':_0x5edaac(0x33b)}],[{'text':_0x5edaac(0x226),'callback_data':_0x5edaac(0x1d0)}]]}});return;}if(_0x21f132['startsWith'](_0x5edaac(0x2a1))){const _0x40a636=_0x21f132[_0x5edaac(0x2e1)]('pl_type_','')[_0x5edaac(0x1fc)]();_0x2bdb01[_0x5edaac(0x2e4)]=_0x40a636,_0x2bdb01['step']=_0x5edaac(0x218),this['paymentLinkSessions'][_0x5edaac(0x2fd)](_0x24b08b,_0x2bdb01);const _0x3614c8=this[_0x5edaac(0x1e5)](_0x2bdb01[_0x5edaac(0x1e6)]),_0x1475a0=_0x3614c8['slice'](0x0,0x14)['map'](_0x3cb695=>[{'text':_0x3cb695,'callback_data':_0x5edaac(0x2f2)+_0x3cb695}]);await this['bot']?.[_0x5edaac(0x20a)](_0x5edaac(0x28c)+'Step\x203/4:\x20Select\x20currency',{'chat_id':_0x4013dd,'message_id':_0x5ebeac,'parse_mode':'Markdown','reply_markup':{'inline_keyboard':[..._0x1475a0,[{'text':_0x5edaac(0x226),'callback_data':_0x5edaac(0x1d0)}]]}});return;}if(_0x21f132[_0x5edaac(0x298)](_0x5edaac(0x2f2))){const _0x5805dd=_0x21f132[_0x5edaac(0x2e1)](_0x5edaac(0x2f2),'');_0x2bdb01[_0x5edaac(0x218)]=_0x5805dd,_0x2bdb01['step']=_0x5edaac(0x205),this[_0x5edaac(0x26f)][_0x5edaac(0x2fd)](_0x24b08b,_0x2bdb01),await this[_0x5edaac(0x2ae)]?.[_0x5edaac(0x20a)](_0x5edaac(0x28c)+_0x5edaac(0x310)+(_0x5edaac(0x278)+_0x5805dd+_0x5edaac(0x1da)),{'chat_id':_0x4013dd,'message_id':_0x5ebeac,'parse_mode':_0x5edaac(0x1ad)});return;}}catch(_0x521359){console[_0x5edaac(0x283)](_0x5edaac(0x29a),_0x521359),await this[_0x5edaac(0x2ae)]?.[_0x5edaac(0x2a7)](_0x4013dd,'âŒ\x20An\x20error\x20occurred.\x20Please\x20try\x20again.'),this['paymentLinkSessions'][_0x5edaac(0x24a)](_0x24b08b);}}async[a87_0x390139(0x1a6)](_0x1b2c83,_0x4cbf93,_0x450877,_0x2451fd=0x1){const _0x4753fc=a87_0x390139;try{const _0x885bd8=await database_1['default']['telegramUser'][_0x4753fc(0x22b)]({'where':{'telegramId':_0x4cbf93},'include':{'shop':!![]}});if(!_0x885bd8?.[_0x4753fc(0x2c3)]){await this[_0x4753fc(0x2ae)]?.['sendMessage'](_0x1b2c83,'âŒ\x20Shop\x20not\x20found.');return;}const _0x40118b=0x5,_0x47235b=(_0x2451fd-0x1)*_0x40118b,[_0x2f6b5f,_0x3b2f62]=await Promise[_0x4753fc(0x21c)]([database_1[_0x4753fc(0x318)][_0x4753fc(0x1d9)]['findMany']({'where':{'shopId':_0x885bd8[_0x4753fc(0x2c3)]},'orderBy':{'createdAt':_0x4753fc(0x207)},'take':_0x40118b,'skip':_0x47235b}),database_1['default'][_0x4753fc(0x1d9)][_0x4753fc(0x27e)]({'where':{'shopId':_0x885bd8[_0x4753fc(0x2c3)]}})]),_0x2c362f=Math['ceil'](_0x3b2f62/_0x40118b);if(_0x2f6b5f['length']===0x0){const _0x149bd1=_0x4753fc(0x234);_0x450877?await this['bot']?.[_0x4753fc(0x20a)](_0x149bd1,{'chat_id':_0x1b2c83,'message_id':_0x450877,'parse_mode':_0x4753fc(0x201),'reply_markup':{'inline_keyboard':[[{'text':_0x4753fc(0x208),'callback_data':'pl_create_new'}]]}}):await this[_0x4753fc(0x2ae)]?.[_0x4753fc(0x2a7)](_0x1b2c83,_0x149bd1,{'parse_mode':_0x4753fc(0x201),'reply_markup':{'inline_keyboard':[[{'text':_0x4753fc(0x208),'callback_data':_0x4753fc(0x214)}]]}});return;}let _0x1fc6c4=_0x4753fc(0x1a5)+_0x2451fd+'/'+_0x2c362f+_0x4753fc(0x2dd);_0x2f6b5f[_0x4753fc(0x2d4)]((_0x177f31,_0x2cddb8)=>{const _0x342b4d=_0x4753fc,_0x248ffb=_0x47235b+_0x2cddb8+0x1,_0x44937d=_0x177f31[_0x342b4d(0x205)]?_0x177f31['amount']+'\x20'+_0x177f31[_0x342b4d(0x218)]:_0x342b4d(0x243),_0x2b6953=_0x177f31[_0x342b4d(0x31a)]===_0x342b4d(0x29d)?'âœ…':'âŒ',_0xcd8553=(process.env.FRONTEND_URL||_0x342b4d(0x229))+_0x342b4d(0x2ee)+_0x177f31['id'],_0x143f34=_0xcd8553[_0x342b4d(0x2e1)](/\./g,'\x5c.')['replace'](/-/g,'\x5c-')[_0x342b4d(0x2e1)](/\//g,'\x5c/');_0x1fc6c4+=_0x248ffb+_0x342b4d(0x240)+_0x2b6953+'\x20*'+_0x44937d+'*\x0a',_0x1fc6c4+='\x20\x20\x20Gateway:\x20'+_0x177f31[_0x342b4d(0x1e6)]+'\x20\x5c|\x20Type:\x20'+_0x177f31[_0x342b4d(0x2e4)]+'\x0a',_0x1fc6c4+=_0x342b4d(0x29f)+_0x143f34+_0x342b4d(0x251);});const _0x404650=[];_0x2451fd>0x1&&_0x404650[_0x4753fc(0x1f6)]({'text':'â¬…ï¸\x20Previous','callback_data':'pl_page_'+(_0x2451fd-0x1)});_0x2451fd<_0x2c362f&&_0x404650[_0x4753fc(0x1f6)]({'text':_0x4753fc(0x267),'callback_data':_0x4753fc(0x204)+(_0x2451fd+0x1)});const _0x400cc9=[];_0x404650[_0x4753fc(0x23b)]>0x0&&_0x400cc9[_0x4753fc(0x1f6)](_0x404650),_0x400cc9['push']([{'text':_0x4753fc(0x208),'callback_data':_0x4753fc(0x214)}]),_0x400cc9[_0x4753fc(0x1f6)]([{'text':_0x4753fc(0x28f),'callback_data':_0x4753fc(0x1d0)}]),_0x450877?await this[_0x4753fc(0x2ae)]?.['editMessageText'](_0x1fc6c4,{'chat_id':_0x1b2c83,'message_id':_0x450877,'parse_mode':_0x4753fc(0x201),'reply_markup':{'inline_keyboard':_0x400cc9}}):await this[_0x4753fc(0x2ae)]?.[_0x4753fc(0x2a7)](_0x1b2c83,_0x1fc6c4,{'parse_mode':_0x4753fc(0x201),'reply_markup':{'inline_keyboard':_0x400cc9}});}catch(_0x24718b){console['error']('Error\x20showing\x20payment\x20links\x20list:',_0x24718b),await this[_0x4753fc(0x2ae)]?.[_0x4753fc(0x2a7)](_0x1b2c83,_0x4753fc(0x2f0));}}['getGatewayCurrencies'](_0x12af46){const _0x5a8a5e=a87_0x390139,_0x38b476={'1000':[_0x5a8a5e(0x2a4),_0x5a8a5e(0x1f3),_0x5a8a5e(0x33f)],'0001':[_0x5a8a5e(0x33f),_0x5a8a5e(0x2a4),_0x5a8a5e(0x1f3),'CAD',_0x5a8a5e(0x2de)],'0010':[_0x5a8a5e(0x33f),'EUR',_0x5a8a5e(0x1f3),_0x5a8a5e(0x1ec),_0x5a8a5e(0x2de)],'1111':[_0x5a8a5e(0x2a4)],'0000':[_0x5a8a5e(0x2a4),_0x5a8a5e(0x33f),_0x5a8a5e(0x2de),_0x5a8a5e(0x1ec),'GBP','NOK',_0x5a8a5e(0x1cc)],'1110':[_0x5a8a5e(0x2a4),_0x5a8a5e(0x33f),_0x5a8a5e(0x1f3)],'2000':[_0x5a8a5e(0x2a4)],'2001':[_0x5a8a5e(0x2a4)],'2010':[_0x5a8a5e(0x2a4)],'2011':[_0x5a8a5e(0x1ec)],'2002':[_0x5a8a5e(0x294)],'3000':[_0x5a8a5e(0x294),_0x5a8a5e(0x219),_0x5a8a5e(0x2a4),'USD',_0x5a8a5e(0x2de),'PLN',_0x5a8a5e(0x24f),'CAD',_0x5a8a5e(0x1f3),'ARS','INR'],'3001':[_0x5a8a5e(0x33f),'EUR'],'3002':[_0x5a8a5e(0x2a4),_0x5a8a5e(0x33f),_0x5a8a5e(0x219),'GBP',_0x5a8a5e(0x2de),_0x5a8a5e(0x1ec),'CHF',_0x5a8a5e(0x1cc)],'3004':[_0x5a8a5e(0x2b9),_0x5a8a5e(0x2bb),'ETH',_0x5a8a5e(0x272),_0x5a8a5e(0x2ca),'DOGE',_0x5a8a5e(0x25c),_0x5a8a5e(0x261),_0x5a8a5e(0x336),_0x5a8a5e(0x2c7)]};return _0x38b476[_0x12af46]||[_0x5a8a5e(0x33f)];}[a87_0x390139(0x1d1)](){const _0x37e46b=a87_0x390139;this[_0x37e46b(0x2ae)]&&(this['bot'][_0x37e46b(0x301)](),this[_0x37e46b(0x2ae)]=null,console[_0x37e46b(0x1f0)](_0x37e46b(0x2ec)));}}exports[a87_0x390139(0x331)]=TelegramBotService,exports[a87_0x390139(0x232)]=new TelegramBotService();