'use strict';const a49_0x2022c6=a49_0x1109;(function(_0x10164e,_0x5ad1cf){const _0x3d9131=a49_0x1109,_0x46d64d=_0x10164e();while(!![]){try{const _0xabbe20=-parseInt(_0x3d9131(0x1a2))/0x1+-parseInt(_0x3d9131(0x183))/0x2+-parseInt(_0x3d9131(0x11c))/0x3*(-parseInt(_0x3d9131(0x161))/0x4)+-parseInt(_0x3d9131(0x159))/0x5*(-parseInt(_0x3d9131(0x181))/0x6)+parseInt(_0x3d9131(0x163))/0x7*(parseInt(_0x3d9131(0x18f))/0x8)+parseInt(_0x3d9131(0x170))/0x9*(parseInt(_0x3d9131(0x14c))/0xa)+-parseInt(_0x3d9131(0x147))/0xb*(parseInt(_0x3d9131(0x1a8))/0xc);if(_0xabbe20===_0x5ad1cf)break;else _0x46d64d['push'](_0x46d64d['shift']());}catch(_0xfe2f4e){_0x46d64d['push'](_0x46d64d['shift']());}}}(a49_0x1a55,0xe0889));function a49_0x1109(_0x694195,_0x3843fc){const _0x1a55b1=a49_0x1a55();return a49_0x1109=function(_0x11099d,_0x12b1f1){_0x11099d=_0x11099d-0xe5;let _0x505dad=_0x1a55b1[_0x11099d];return _0x505dad;},a49_0x1109(_0x694195,_0x3843fc);}var __importDefault=this&&this[a49_0x2022c6(0x146)]||function(_0x16c2ab){const _0xbd8cdf=a49_0x2022c6;return _0x16c2ab&&_0x16c2ab[_0xbd8cdf(0x11b)]?_0x16c2ab:{'default':_0x16c2ab};};Object[a49_0x2022c6(0x117)](exports,'__esModule',{'value':!![]}),exports[a49_0x2022c6(0x1b7)]=exports[a49_0x2022c6(0x176)]=void 0x0;const node_telegram_bot_api_1=__importDefault(require(a49_0x2022c6(0x17a))),database_1=__importDefault(require(a49_0x2022c6(0x123))),gateway_1=require(a49_0x2022c6(0x172));class TelegramBotService{constructor(){const _0x400923=a49_0x2022c6;this[_0x400923(0x111)]=null,this[_0x400923(0x14d)]=process[_0x400923(0x180)]['TELEGRAM_BOT_TOKEN']||'',this[_0x400923(0xf1)]=process[_0x400923(0x180)]['TELEGRAM_BOT_USERNAME']||_0x400923(0x1aa),this[_0x400923(0x14d)]?this[_0x400923(0x19f)]():console[_0x400923(0x11a)](_0x400923(0x120));}[a49_0x2022c6(0x19f)](){const _0x209d71=a49_0x2022c6;try{this['bot']=new node_telegram_bot_api_1[(_0x209d71(0x185))](this[_0x209d71(0x14d)],{'polling':!![]}),this[_0x209d71(0x131)](),console[_0x209d71(0x10c)]('‚úÖ\x20Telegram\x20bot\x20@'+this[_0x209d71(0xf1)]+_0x209d71(0x15f));}catch(_0x335b30){console[_0x209d71(0x13b)](_0x209d71(0x12e),_0x335b30);}}[a49_0x2022c6(0x131)](){const _0x1ffd06=a49_0x2022c6;if(!this['bot'])return;this[_0x1ffd06(0x111)][_0x1ffd06(0x12a)](/\/start/,async _0x1f255c=>{const _0xb4b63c=_0x1ffd06,_0x5d5e5a=_0x1f255c['chat']['id'],_0x3f54da=_0x1f255c['from']?.['id'][_0xb4b63c(0x149)](),_0x3f7acc=_0x1f255c[_0xb4b63c(0x132)]?.[_0xb4b63c(0x15e)],_0x38fd18=_0x1f255c[_0xb4b63c(0x132)]?.['first_name'],_0x4fe784=_0x1f255c[_0xb4b63c(0x132)]?.['last_name'];if(!_0x3f54da)return;try{let _0x2ea761=await database_1[_0xb4b63c(0x185)][_0xb4b63c(0x138)][_0xb4b63c(0x1b0)]({'where':{'telegramId':_0x3f54da},'include':{'shop':!![]}});!_0x2ea761?(_0x2ea761=await database_1['default'][_0xb4b63c(0x138)][_0xb4b63c(0xf7)]({'data':{'telegramId':_0x3f54da,'username':_0x3f7acc,'firstName':_0x38fd18,'lastName':_0x4fe784,'isVerified':![],'shopId':null},'include':{'shop':!![]}}),console[_0xb4b63c(0x10c)](_0xb4b63c(0x1b1)+_0x3f54da+_0xb4b63c(0x182)+_0x3f7acc+')')):_0x2ea761=await database_1[_0xb4b63c(0x185)][_0xb4b63c(0x138)][_0xb4b63c(0xe6)]({'where':{'telegramId':_0x3f54da},'data':{'username':_0x3f7acc,'firstName':_0x38fd18,'lastName':_0x4fe784},'include':{'shop':!![]}}),_0x2ea761[_0xb4b63c(0x193)]&&_0x2ea761[_0xb4b63c(0xef)]&&_0x2ea761['shop']?await this[_0xb4b63c(0x111)]?.[_0xb4b63c(0x156)](_0x5d5e5a,_0xb4b63c(0x143)+(_0xb4b63c(0x1ae)+_0x2ea761[_0xb4b63c(0x162)][_0xb4b63c(0x160)]+'*\x0a')+('Username:\x20`'+_0x2ea761[_0xb4b63c(0x162)]['username']+'`\x0a\x0a')+_0xb4b63c(0x10f)+_0xb4b63c(0x17b)+_0xb4b63c(0x189)+_0xb4b63c(0x18a)+_0xb4b63c(0x102)+_0xb4b63c(0x119)+'/disconnect\x20-\x20disconnect\x20from\x20notifications',{'parse_mode':_0xb4b63c(0x142)}):(_0x2ea761[_0xb4b63c(0xef)]&&!_0x2ea761[_0xb4b63c(0x193)]&&(await database_1[_0xb4b63c(0x185)][_0xb4b63c(0x138)][_0xb4b63c(0xe6)]({'where':{'telegramId':_0x3f54da},'data':{'shopId':null,'isVerified':![]}}),console[_0xb4b63c(0x10c)](_0xb4b63c(0x1ad)+_0x3f54da)),await this[_0xb4b63c(0x111)]?.['sendMessage'](_0x5d5e5a,_0xb4b63c(0x137)+_0xb4b63c(0x18b)+_0xb4b63c(0x1b5)+_0xb4b63c(0x13d)+_0xb4b63c(0x136)+_0xb4b63c(0x157),{'parse_mode':_0xb4b63c(0x142)}));}catch(_0x5c895b){console[_0xb4b63c(0x13b)](_0xb4b63c(0x126),_0x5c895b),await this[_0xb4b63c(0x111)]?.[_0xb4b63c(0x156)](_0x5d5e5a,'‚ùå\x20An\x20error\x20occurred.\x20Please\x20try\x20again\x20later.');}}),this[_0x1ffd06(0x111)][_0x1ffd06(0x12a)](/\/disconnect/,async _0x106803=>{const _0x53f698=_0x1ffd06,_0x110fb2=_0x106803['chat']['id'],_0x3b044b=_0x106803[_0x53f698(0x132)]?.['id'][_0x53f698(0x149)]();if(!_0x3b044b)return;try{const _0x59e659=await database_1[_0x53f698(0x185)][_0x53f698(0x138)]['findUnique']({'where':{'telegramId':_0x3b044b},'include':{'shop':!![]}});if(!_0x59e659||!_0x59e659[_0x53f698(0x193)]||!_0x59e659[_0x53f698(0xef)]){await this[_0x53f698(0x111)]?.[_0x53f698(0x156)](_0x110fb2,'‚ùå\x20You\x20are\x20not\x20connected\x20to\x20the\x20notification\x20system.');return;}const _0x33376b=_0x59e659[_0x53f698(0x162)]?.[_0x53f698(0x160)]||'unknown\x20shop';await database_1[_0x53f698(0x185)][_0x53f698(0x138)]['update']({'where':{'telegramId':_0x3b044b},'data':{'shopId':null,'isVerified':![]}}),console[_0x53f698(0x10c)]('üîå\x20User\x20'+_0x3b044b+'\x20disconnected\x20from\x20shop\x20'+_0x59e659[_0x53f698(0xef)]),await this[_0x53f698(0x111)]?.[_0x53f698(0x156)](_0x110fb2,'‚úÖ\x20You\x20have\x20been\x20successfully\x20disconnected\x20from\x20shop\x20*'+_0x33376b+_0x53f698(0x16c)+_0x53f698(0x191),{'parse_mode':_0x53f698(0x142)});}catch(_0x4b9f87){console['error'](_0x53f698(0xea),_0x4b9f87),await this[_0x53f698(0x111)]?.[_0x53f698(0x156)](_0x110fb2,_0x53f698(0x13a));}}),this[_0x1ffd06(0x111)][_0x1ffd06(0x12a)](/\/status/,async _0xa1d63c=>{const _0x2cf7ef=_0x1ffd06,_0x400e8b=_0xa1d63c[_0x2cf7ef(0x15c)]['id'],_0x9c4990=_0xa1d63c['from']?.['id']['toString']();if(!_0x9c4990)return;try{const _0x27ebd8=await database_1['default'][_0x2cf7ef(0x138)][_0x2cf7ef(0x1b0)]({'where':{'telegramId':_0x9c4990},'include':{'shop':!![]}});if(!_0x27ebd8){await this[_0x2cf7ef(0x111)]?.['sendMessage'](_0x400e8b,_0x2cf7ef(0xf0)+_0x2cf7ef(0x14b));return;}if(!_0x27ebd8[_0x2cf7ef(0x193)]||!_0x27ebd8[_0x2cf7ef(0xef)]||!_0x27ebd8[_0x2cf7ef(0x162)]){await this[_0x2cf7ef(0x111)]?.[_0x2cf7ef(0x156)](_0x400e8b,_0x2cf7ef(0x135)+_0x2cf7ef(0x141));return;}await this['bot']?.['sendMessage'](_0x400e8b,_0x2cf7ef(0x14e)+(_0x2cf7ef(0x11f)+_0x27ebd8[_0x2cf7ef(0x162)][_0x2cf7ef(0x160)]+'*\x0a')+(_0x2cf7ef(0x125)+_0x27ebd8[_0x2cf7ef(0x162)][_0x2cf7ef(0x15e)]+'`\x0a')+('üìÖ\x20Connection\x20date:\x20'+_0x27ebd8[_0x2cf7ef(0x18d)]['toLocaleDateString'](_0x2cf7ef(0x1a1))+'\x0a\x0a')+_0x2cf7ef(0xfc)+_0x2cf7ef(0x102)+_0x2cf7ef(0x106),{'parse_mode':_0x2cf7ef(0x142)});}catch(_0x388ac6){console[_0x2cf7ef(0x13b)]('Error\x20handling\x20/status\x20command:',_0x388ac6),await this[_0x2cf7ef(0x111)]?.[_0x2cf7ef(0x156)](_0x400e8b,_0x2cf7ef(0x13a));}}),this['bot'][_0x1ffd06(0x12a)](/\/debug/,async _0x3f8c02=>{const _0x145cb1=_0x1ffd06,_0x3bebce=_0x3f8c02[_0x145cb1(0x15c)]['id'],_0x4036d3=_0x3f8c02[_0x145cb1(0x132)]?.['id'][_0x145cb1(0x149)]();if(!_0x4036d3)return;try{const _0x1532a4=await database_1[_0x145cb1(0x185)][_0x145cb1(0x162)][_0x145cb1(0x11d)]({'select':{'id':!![],'name':!![],'username':!![],'status':!![],'publicKey':!![]},'take':0xa});let _0x591eea='üîç\x20*Debug\x20Information*\x0a\x0a';_0x591eea+='üì±\x20Your\x20Telegram\x20ID:\x20`'+_0x4036d3+'`\x0a\x0a',_0x591eea+='üè™\x20Available\x20shops\x20in\x20system:\x0a',_0x1532a4[_0x145cb1(0x103)]((_0x24890e,_0x4a550b)=>{const _0x198c19=_0x145cb1;_0x591eea+=_0x4a550b+0x1+_0x198c19(0x19a)+_0x24890e[_0x198c19(0x160)]+'*\x0a',_0x591eea+='\x20\x20\x20Username:\x20`'+_0x24890e[_0x198c19(0x15e)]+'`\x0a',_0x591eea+=_0x198c19(0x199)+_0x24890e['status']+'\x0a',_0x591eea+=_0x198c19(0x15b)+_0x24890e[_0x198c19(0xff)][_0x198c19(0x104)](0x0,0xf)+_0x198c19(0x16b);}),await this['bot']?.[_0x145cb1(0x156)](_0x3bebce,_0x591eea,{'parse_mode':_0x145cb1(0x142)});}catch(_0x40a4a0){console[_0x145cb1(0x13b)]('Error\x20handling\x20/debug\x20command:',_0x40a4a0),await this[_0x145cb1(0x111)]?.[_0x145cb1(0x156)](_0x3bebce,_0x145cb1(0xfe));}}),this[_0x1ffd06(0x111)]['on'](_0x1ffd06(0xe5),async _0x58cd21=>{const _0x35a832=_0x1ffd06;if(_0x58cd21['text']?.[_0x35a832(0x1a3)]('/'))return;const _0x1a16e9=_0x58cd21[_0x35a832(0x15c)]['id'],_0xf5a888=_0x58cd21['from']?.['id'][_0x35a832(0x149)](),_0x15d383=_0x58cd21[_0x35a832(0x140)]?.['trim']();if(!_0xf5a888||!_0x15d383)return;try{const _0xee6a8a=await database_1[_0x35a832(0x185)][_0x35a832(0x138)]['findUnique']({'where':{'telegramId':_0xf5a888},'include':{'shop':!![]}});if(!_0xee6a8a){await this['bot']?.[_0x35a832(0x156)](_0x1a16e9,_0x35a832(0xf3));return;}if(_0xee6a8a[_0x35a832(0x193)]&&_0xee6a8a[_0x35a832(0xef)]&&_0xee6a8a[_0x35a832(0x162)]){await this[_0x35a832(0x111)]?.[_0x35a832(0x156)](_0x1a16e9,_0x35a832(0x1a5)+_0xee6a8a[_0x35a832(0x162)][_0x35a832(0x160)]+_0x35a832(0x16c)+_0x35a832(0xfa),{'parse_mode':_0x35a832(0x142)});return;}const _0x22242e=_0x15d383[_0x35a832(0x173)](/\s+/);if(_0x22242e['length']!==0x2){await this[_0x35a832(0x111)]?.[_0x35a832(0x156)](_0x1a16e9,'‚ùå\x20Invalid\x20format.\x20Please\x20send\x20exactly\x202\x20parts\x20separated\x20by\x20space:\x0a\x0a'+_0x35a832(0x1b5)+_0x35a832(0x13d)+_0x35a832(0x136)+(_0x35a832(0x19e)+_0x22242e[_0x35a832(0x1a0)]+_0x35a832(0x114)+_0x22242e[_0x35a832(0x18e)](_0x57d247=>'`'+_0x57d247+'`')['join'](',\x20')),{'parse_mode':_0x35a832(0x142)});return;}const [_0x32610d,_0x542f15]=_0x22242e;console[_0x35a832(0x10c)](_0x35a832(0xee)+_0xf5a888+_0x35a832(0xf9)+_0x32610d+_0x35a832(0x17c)+_0x542f15[_0x35a832(0x104)](0x0,0xa)+_0x35a832(0xfd)),await this[_0x35a832(0x158)](_0x1a16e9,_0xf5a888,_0x32610d,_0x542f15);}catch(_0x304a2a){console[_0x35a832(0x13b)](_0x35a832(0x12c),_0x304a2a),await this[_0x35a832(0x111)]?.[_0x35a832(0x156)](_0x1a16e9,'‚ùå\x20An\x20error\x20occurred.\x20Please\x20try\x20again\x20later.');}}),this[_0x1ffd06(0x111)]['on'](_0x1ffd06(0x13b),_0x1053c1=>{const _0x28c8ac=_0x1ffd06;console['error'](_0x28c8ac(0x108),_0x1053c1);}),this[_0x1ffd06(0x111)]['on']('polling_error',_0x34a41a=>{const _0x2e447d=_0x1ffd06;console[_0x2e447d(0x13b)]('Telegram\x20bot\x20polling\x20error:',_0x34a41a);});}async[a49_0x2022c6(0x158)](_0x458bce,_0x29e70f,_0x239bdb,_0x439569){const _0x1c8632=a49_0x2022c6;try{console[_0x1c8632(0x10c)](_0x1c8632(0xee)+_0x29e70f+_0x1c8632(0xf9)+_0x239bdb+'\x22,\x20apiKey=\x22'+_0x439569[_0x1c8632(0x104)](0x0,0xa)+_0x1c8632(0xfd));if(!_0x239bdb||_0x239bdb['length']<0x3||_0x239bdb[_0x1c8632(0x1a0)]>0x32||!/^[a-zA-Z0-9_]+$/[_0x1c8632(0x112)](_0x239bdb)){await this['bot']?.[_0x1c8632(0x156)](_0x458bce,_0x1c8632(0x18c)+_0x239bdb+'`\x0a\x0a'+_0x1c8632(0x13e),{'parse_mode':_0x1c8632(0x142)});return;}if(!_0x439569||!_0x439569[_0x1c8632(0x1a3)]('pk_')&&!_0x439569['startsWith'](_0x1c8632(0x121))){await this['bot']?.[_0x1c8632(0x156)](_0x458bce,_0x1c8632(0x144)+'API\x20key\x20must\x20start\x20with\x20`pk\x5c_`\x20or\x20`sk\x5c_`.',{'parse_mode':'Markdown'});return;}const _0x50d281=await database_1['default'][_0x1c8632(0x162)][_0x1c8632(0x1b0)]({'where':{'username':_0x239bdb},'select':{'id':!![],'name':!![],'username':!![],'status':!![],'publicKey':!![],'secretKey':!![]}});if(!_0x50d281){const _0x39730e=await database_1[_0x1c8632(0x185)][_0x1c8632(0x162)][_0x1c8632(0x11d)]({'select':{'username':!![],'name':!![]},'take':0x5});let _0xd64bdb=_0x1c8632(0x10e)+_0x239bdb+_0x1c8632(0x12b);_0x39730e['length']>0x0?(_0xd64bdb+='Available\x20usernames:\x0a',_0x39730e[_0x1c8632(0x103)](_0x28b348=>{const _0x3dbc28=_0x1c8632;_0xd64bdb+='‚Ä¢\x20`'+_0x28b348['username']+_0x3dbc28(0x16f)+_0x28b348[_0x3dbc28(0x160)]+')\x0a';}),_0xd64bdb+=_0x1c8632(0x19b)):_0xd64bdb+=_0x1c8632(0x118);await this[_0x1c8632(0x111)]?.['sendMessage'](_0x458bce,_0xd64bdb,{'parse_mode':_0x1c8632(0x142)});return;}if(_0x50d281[_0x1c8632(0x13c)]!==_0x1c8632(0x187)){await this['bot']?.[_0x1c8632(0x156)](_0x458bce,_0x1c8632(0x179)+_0x239bdb+_0x1c8632(0x1b6)+'Contact\x20administrator.',{'parse_mode':_0x1c8632(0x142)});return;}if(_0x50d281[_0x1c8632(0xff)]!==_0x439569&&_0x50d281[_0x1c8632(0xec)]!==_0x439569){await this[_0x1c8632(0x111)]?.['sendMessage'](_0x458bce,'‚ùå\x20API\x20key\x20does\x20not\x20match\x20shop\x20`'+_0x239bdb+'`.\x0a\x0a'+_0x1c8632(0x109)+_0x1c8632(0x115),{'parse_mode':_0x1c8632(0x142)});return;}const _0x30655f=await database_1[_0x1c8632(0x185)][_0x1c8632(0x138)][_0x1c8632(0x198)]({'where':{'shopId':_0x50d281['id'],'isVerified':!![],'telegramId':{'not':_0x29e70f}}});if(_0x30655f){await this[_0x1c8632(0x111)]?.[_0x1c8632(0x156)](_0x458bce,'‚ùå\x20Another\x20Telegram\x20account\x20is\x20already\x20connected\x20to\x20shop\x20`'+_0x239bdb+_0x1c8632(0xf6)+_0x1c8632(0x1ab),{'parse_mode':_0x1c8632(0x142)});return;}await database_1[_0x1c8632(0x185)][_0x1c8632(0x138)][_0x1c8632(0xe6)]({'where':{'telegramId':_0x29e70f},'data':{'shopId':_0x50d281['id'],'isVerified':!![]}}),await this['bot']?.['sendMessage'](_0x458bce,_0x1c8632(0x15d)+_0x1c8632(0x190)+(_0x1c8632(0x130)+_0x50d281[_0x1c8632(0x160)]+'*\x0a')+(_0x1c8632(0x125)+_0x50d281[_0x1c8632(0x15e)]+'`\x0a\x0a')+'üîî\x20You\x20will\x20now\x20receive\x20notifications\x20about:\x0a'+'‚Ä¢\x20New\x20payments\x0a'+_0x1c8632(0x189)+'‚Ä¢\x20Payouts\x0a'+_0x1c8632(0x100)+_0x1c8632(0x102)+_0x1c8632(0x119)+'/disconnect\x20-\x20disconnect\x20from\x20notifications',{'parse_mode':_0x1c8632(0x142)}),console[_0x1c8632(0x10c)](_0x1c8632(0x139)+_0x29e70f+_0x1c8632(0xfb)+_0x50d281['username']+'\x20via\x20single-line\x20input');}catch(_0x2a8257){console[_0x1c8632(0x13b)]('Error\x20in\x20handleSingleLineVerification:',_0x2a8257),await this[_0x1c8632(0x111)]?.[_0x1c8632(0x156)](_0x458bce,_0x1c8632(0x17e));}}async[a49_0x2022c6(0xeb)](_0x40353e,_0x414700,_0x27c919){const _0x60cc88=a49_0x2022c6;if(!this[_0x60cc88(0x111)]){console[_0x60cc88(0x11a)](_0x60cc88(0x14f));return;}try{const _0x2a5c64=await database_1['default'][_0x60cc88(0x138)][_0x60cc88(0x11d)]({'where':{'shopId':_0x40353e,'isVerified':!![]}});if(_0x2a5c64['length']===0x0){console[_0x60cc88(0x10c)](_0x60cc88(0x127)+_0x40353e);return;}const _0x215868=_0x2a5c64[_0x60cc88(0x18e)](async _0x58a1b3=>{const _0x47c173=_0x60cc88;try{await this[_0x47c173(0x111)]?.['sendMessage'](_0x58a1b3[_0x47c173(0x1a9)],_0x414700,_0x27c919),console[_0x47c173(0x10c)]('‚úÖ\x20Notification\x20sent\x20to\x20Telegram\x20user\x20'+_0x58a1b3[_0x47c173(0x1a9)]);}catch(_0xf6774a){console[_0x47c173(0x13b)]('‚ùå\x20Failed\x20to\x20send\x20notification\x20to\x20Telegram\x20user\x20'+_0x58a1b3[_0x47c173(0x1a9)]+':',_0xf6774a),_0xf6774a instanceof Error&&(_0xf6774a['message']['includes']('blocked')||_0xf6774a[_0x47c173(0xe5)][_0x47c173(0x1a4)]('chat\x20not\x20found')||_0xf6774a[_0x47c173(0xe5)][_0x47c173(0x1a4)](_0x47c173(0x164)))&&(await database_1[_0x47c173(0x185)][_0x47c173(0x138)]['update']({'where':{'id':_0x58a1b3['id']},'data':{'isVerified':![]}}),console[_0x47c173(0x10c)](_0x47c173(0x165)+_0x58a1b3[_0x47c173(0x1a9)]+_0x47c173(0xed)));}});await Promise[_0x60cc88(0x1b8)](_0x215868);}catch(_0xf951ce){console[_0x60cc88(0x13b)](_0x60cc88(0x10a),_0xf951ce);}}async['sendPaymentNotification'](_0x3fb656,_0x1b00fb,_0xe33ca5){const _0x2b6580=a49_0x2022c6,_0x2086f1={'created':'üÜï','paid':'‚úÖ','failed':'‚ùå','expired':'‚è∞','refund':'üîÑ','chargeback':'‚ö†Ô∏è','processing':'‚öôÔ∏è'},_0x3e988a={'created':_0x2b6580(0x195),'paid':_0x2b6580(0xf4),'failed':_0x2b6580(0x1b3),'expired':_0x2b6580(0x184),'refund':_0x2b6580(0x101),'chargeback':'Payment\x20chargeback','processing':_0x2b6580(0x174)},_0x4b859b=_0x2086f1[_0xe33ca5],_0x3d7594=_0x3e988a[_0xe33ca5],_0x2deba3=(0x0,gateway_1[_0x2b6580(0x1b4)])(_0x1b00fb['gateway']);console[_0x2b6580(0x10c)]('üì±\x20Telegram\x20notification:\x20gateway\x20\x22'+_0x1b00fb[_0x2b6580(0x148)]+_0x2b6580(0x1a6)+_0x2deba3+'\x22');let _0xab6cf6=_0x4b859b+'\x20*'+_0x3d7594+_0x2b6580(0x16d)+('üí∞\x20Amount:\x20*'+_0x1b00fb[_0x2b6580(0xf2)]+'\x20'+_0x1b00fb['currency']+'*\x0a')+(_0x2b6580(0x1ac)+(_0x1b00fb['orderId']||_0x1b00fb['id'])+'`\x0a')+(_0x2b6580(0x129)+_0x1b00fb['id']+'`\x0a')+(_0x2b6580(0x134)+_0x2deba3+'`\x0a')+(_0x2b6580(0xe8)+new Date(_0x1b00fb[_0x2b6580(0x145)])[_0x2b6580(0x196)]('en-US')+'\x0a');_0xe33ca5==='chargeback'&&_0x1b00fb[_0x2b6580(0x166)]&&(_0xab6cf6+=_0x2b6580(0x16e)+_0x1b00fb[_0x2b6580(0x166)]+'\x20USDT*\x0a'),_0xe33ca5===_0x2b6580(0x1a7)&&(_0xab6cf6+=_0x2b6580(0x15a)),_0x1b00fb[_0x2b6580(0x171)]&&(_0xab6cf6+=_0x2b6580(0x124)+_0x1b00fb[_0x2b6580(0x171)]+'\x0a'),await this['sendShopNotification'](_0x3fb656,_0xab6cf6,{'parse_mode':'Markdown'});}async[a49_0x2022c6(0x150)](_0x432882,_0x19b7d2,_0xf25d3f){const _0xedc6e1=a49_0x2022c6,_0x31f478={'created':'üì§','completed':'‚úÖ','rejected':'‚ùå'},_0x3b3ff3={'created':_0xedc6e1(0x153),'completed':'Payout\x20completed','rejected':_0xedc6e1(0x14a)},_0x42f8c3=_0x31f478[_0xf25d3f],_0x8b8bf0=_0x3b3ff3[_0xf25d3f],_0x4376e7=_0x42f8c3+'\x20*'+_0x8b8bf0+_0xedc6e1(0x16d)+(_0xedc6e1(0x151)+_0x19b7d2[_0xedc6e1(0xf2)]+_0xedc6e1(0x10d))+(_0xedc6e1(0x16a)+_0x19b7d2[_0xedc6e1(0x11e)]+'`\x0a')+(_0xedc6e1(0x13f)+_0x19b7d2['id']+'`\x0a')+(_0xedc6e1(0xe8)+new Date(_0x19b7d2[_0xedc6e1(0x145)])['toLocaleString'](_0xedc6e1(0x1a1))+'\x0a')+(_0x19b7d2[_0xedc6e1(0x167)]?_0xedc6e1(0x17f)+_0x19b7d2[_0xedc6e1(0x167)]+'`':'');await this['sendShopNotification'](_0x432882,_0x4376e7,{'parse_mode':_0xedc6e1(0x142)});}async['sendLoginNotification'](_0x3ba89d,_0x56c9b9){const _0x5150e8=a49_0x2022c6;try{const _0x46bd5d=await database_1['default'][_0x5150e8(0x105)][_0x5150e8(0x1b0)]({'where':{'shopId':_0x3ba89d},'select':{'notificationLogin':!![]}});if(!_0x46bd5d?.[_0x5150e8(0x19d)]){console[_0x5150e8(0x10c)](_0x5150e8(0xf8)+_0x3ba89d);return;}const _0x1f4dd0=_0x56c9b9[_0x5150e8(0x17d)]?'üîê':'üö®',_0x491a2e=_0x56c9b9[_0x5150e8(0x17d)]?_0x5150e8(0x154):_0x5150e8(0x197);let _0x3a6b97=_0x1f4dd0+'\x20*'+_0x491a2e+_0x5150e8(0x16d)+(_0x5150e8(0x125)+_0x56c9b9[_0x5150e8(0x15e)]+'`\x0a')+(_0x5150e8(0x155)+_0x56c9b9['timestamp'][_0x5150e8(0x196)](_0x5150e8(0x1a1))+'\x0a');_0x56c9b9[_0x5150e8(0x12f)]&&(_0x3a6b97+=_0x5150e8(0x169)+_0x56c9b9['ipAddress']+'`\x0a');if(_0x56c9b9['userAgent']){const _0x1f807c=_0x56c9b9['userAgent']['length']>0x32?_0x56c9b9[_0x5150e8(0xf5)][_0x5150e8(0x104)](0x0,0x32)+_0x5150e8(0x194):_0x56c9b9['userAgent'];_0x3a6b97+=_0x5150e8(0x12d)+_0x1f807c+'`\x0a';}!_0x56c9b9[_0x5150e8(0x17d)]&&(_0x3a6b97+=_0x5150e8(0x1b2)),await this[_0x5150e8(0xeb)](_0x3ba89d,_0x3a6b97,{'parse_mode':_0x5150e8(0x142)}),console[_0x5150e8(0x10c)](_0x5150e8(0x133)+_0x3ba89d+':\x20'+(_0x56c9b9[_0x5150e8(0x17d)]?_0x5150e8(0x17d):_0x5150e8(0x152)));}catch(_0x31361a){console[_0x5150e8(0x13b)](_0x5150e8(0xe9),_0x31361a);}}async[a49_0x2022c6(0x175)](_0x335b9b,_0x572c97){const _0x563f54=a49_0x2022c6;try{const _0x1d1c8e=await database_1[_0x563f54(0x185)][_0x563f54(0x105)][_0x563f54(0x1b0)]({'where':{'shopId':_0x335b9b},'select':{'notificationApiError':!![]}});if(!_0x1d1c8e?.[_0x563f54(0x1af)]){console['log'](_0x563f54(0x10b)+_0x335b9b);return;}let _0x106df9='üö®\x20*API\x20Error*\x0a\x0a'+('üîó\x20Endpoint:\x20`'+_0x572c97[_0x563f54(0x11e)]+'\x20'+_0x572c97[_0x563f54(0x110)]+'`\x0a')+(_0x563f54(0x155)+_0x572c97['timestamp']['toLocaleString'](_0x563f54(0x1a1))+'\x0a');_0x572c97[_0x563f54(0x19c)]&&(_0x106df9+='üìä\x20Error\x20code:\x20`'+_0x572c97[_0x563f54(0x19c)]+'`\x0a'),_0x106df9+=_0x563f54(0x107)+_0x572c97[_0x563f54(0x168)]+'`\x0a',_0x572c97[_0x563f54(0x188)]&&(_0x106df9+=_0x563f54(0x186)+_0x572c97[_0x563f54(0x188)]+'`\x0a'),_0x106df9+=_0x563f54(0x192),await this[_0x563f54(0xeb)](_0x335b9b,_0x106df9,{'parse_mode':_0x563f54(0x142)}),console[_0x563f54(0x10c)]('‚úÖ\x20API\x20error\x20notification\x20sent\x20for\x20shop\x20'+_0x335b9b+':\x20'+_0x572c97[_0x563f54(0x110)]);}catch(_0x59f7ee){console[_0x563f54(0x13b)]('Failed\x20to\x20send\x20API\x20error\x20notification:',_0x59f7ee);}}async[a49_0x2022c6(0x113)](_0x2d4382,_0x3e5815,_0x1efe56){const _0x2f42dc=a49_0x2022c6;let _0x40105e=_0x2f42dc(0xe7)+_0x3e5815+_0x2f42dc(0x16d);for(const [_0x5a584c,_0x131dfd]of Object[_0x2f42dc(0x178)](_0x1efe56)){_0x131dfd!==null&&_0x131dfd!==undefined&&(_0x40105e+=_0x5a584c+_0x2f42dc(0x128)+_0x131dfd+'`\x0a');}await this[_0x2f42dc(0xeb)](_0x2d4382,_0x40105e,{'parse_mode':_0x2f42dc(0x142)});}[a49_0x2022c6(0x122)](){return{'isActive':!!this['bot'],'username':this['botUsername']};}[a49_0x2022c6(0x116)](){const _0x2f3ca5=a49_0x2022c6;this['bot']&&(this[_0x2f3ca5(0x111)][_0x2f3ca5(0x177)](),this[_0x2f3ca5(0x111)]=null,console[_0x2f3ca5(0x10c)]('üõë\x20Telegram\x20bot\x20stopped'));}}exports[a49_0x2022c6(0x176)]=TelegramBotService,exports[a49_0x2022c6(0x1b7)]=new TelegramBotService();function a49_0x1a55(){const _0x3e6555=['setupBotHandlers','from','‚úÖ\x20Login\x20notification\x20sent\x20for\x20shop\x20','üè™\x20Gateway:\x20`','‚ùå\x20You\x20are\x20not\x20connected\x20to\x20a\x20shop.\x0a\x0a','`appple\x20pk_aa6450d3f57afbefbb0f3f5be5ce6cca13037536afc5ccf14c81a6cbc7a07de5`\x0a\x0a','ü§ñ\x20Welcome\x20to\x20TRAPAY\x20notification\x20system!\x0a\x0a','telegramUser','‚úÖ\x20Telegram\x20user\x20','‚ùå\x20An\x20error\x20occurred.\x20Please\x20try\x20again\x20later.','error','status','Example:\x0a','Username\x20must\x20contain\x20only\x20letters,\x20numbers\x20and\x20underscore\x20(3-50\x20characters).','üÜî\x20Payout\x20ID:\x20`','text','Use\x20/start\x20to\x20connect.','Markdown','‚úÖ\x20Welcome\x20back!\x0a\x0a','‚ùå\x20Invalid\x20API\x20key\x20format.\x0a\x0a','createdAt','__importDefault','15037PzNfif','gateway','toString','Payout\x20rejected','Use\x20/start\x20to\x20begin.','6541660dLGzlS','botToken','üìä\x20*Connection\x20Status*\x0a\x0a','Telegram\x20bot\x20not\x20initialized,\x20cannot\x20send\x20notification','sendPayoutNotification','üí∏\x20Amount:\x20*','failed','New\x20payout\x20created','Successful\x20login','üìÖ\x20Time:\x20','sendMessage','‚ùóÔ∏è\x20Make\x20sure\x20to\x20separate\x20username\x20and\x20API\x20key\x20with\x20a\x20space!','handleSingleLineVerification','592005kwpqbA','‚è≥\x20The\x20payment\x20is\x20currently\x20being\x20processed\x20by\x20the\x20gateway.\x0a','\x20\x20\x20Public\x20Key:\x20`','chat','üéâ\x20*Congratulations!*\x0a\x0a','username','\x20initialized\x20successfully','name','6388XFOdpy','shop','945ZJPint','user\x20is\x20deactivated','User\x20','chargebackAmount','txid','errorMessage','üåê\x20IP\x20address:\x20`','üè¶\x20Method:\x20`','...`\x0a\x0a','*.\x0a\x0a','*\x0a\x0a','üí∏\x20Penalty\x20amount:\x20*','`\x20(','18HjIzcp','adminNotes','../types/gateway','split','Payment\x20is\x20being\x20processed','sendApiErrorNotification','TelegramBotService','stopPolling','entries','‚ùå\x20Shop\x20`','node-telegram-bot-api','‚Ä¢\x20New\x20payments\x0a','\x22,\x20apiKey=\x22','success','‚ùå\x20An\x20error\x20occurred\x20while\x20verifying\x20data.','üîó\x20TXID:\x20`','env','24FXEsPu','\x20(@','489636XNjzLC','Payment\x20expired','default','üÜî\x20Request\x20ID:\x20`','ACTIVE','requestId','‚Ä¢\x20Payment\x20status\x20changes\x0a','‚Ä¢\x20Payouts\x0a\x0a','To\x20receive\x20payment\x20notifications,\x20send\x20your\x20credentials\x20in\x20one\x20line:\x0a\x0a','‚ùå\x20Invalid\x20username\x20format:\x20`','updatedAt','map','43664dPACxE','‚úÖ\x20You\x20have\x20been\x20successfully\x20connected\x20to\x20the\x20notification\x20system!\x0a\x0a','To\x20reconnect,\x20use\x20the\x20/start\x20command','\x0aüí°\x20Check\x20your\x20request\x20or\x20contact\x20support.','isVerified','...','New\x20payment\x20created','toLocaleString','Failed\x20login\x20attempt','findFirst','\x20\x20\x20Status:\x20','.\x20*','\x0aCheck\x20spelling\x20and\x20try\x20again.','statusCode','notificationLogin','You\x20sent\x20','initializeBot','length','en-US','76018fcQeEk','startsWith','includes','‚úÖ\x20You\x20are\x20already\x20connected\x20to\x20shop\x20*','\x22\x20->\x20display\x20\x22','processing','13548GCudZI','telegramId','trapay_bot','Disconnect\x20the\x20previous\x20account\x20first\x20or\x20contact\x20administrator.','üìù\x20Order\x20ID:\x20`','üîÑ\x20Reset\x20incomplete\x20verification\x20for\x20user\x20','You\x20are\x20already\x20connected\x20to\x20shop:\x20*','notificationApiError','findUnique','üì±\x20Created\x20new\x20Telegram\x20user:\x20','\x0a‚ö†Ô∏è\x20If\x20this\x20wasn\x27t\x20you,\x20change\x20your\x20password\x20immediately!','Payment\x20failed','getGatewayDisplayNameForTelegram','üìù\x20Format:\x20`username\x20api_key`\x0a\x0a','`\x20is\x20inactive.\x0a\x0a','telegramBotService','allSettled','message','update','üîî\x20*','üìÖ\x20Date:\x20','Failed\x20to\x20send\x20login\x20notification:','Error\x20handling\x20/disconnect\x20command:','sendShopNotification','secretKey','\x20marked\x20as\x20unverified\x20due\x20to\x20delivery\x20failure','üîÑ\x20Processing\x20single-line\x20verification\x20for\x20user\x20','shopId','‚ùå\x20You\x20are\x20not\x20registered\x20in\x20the\x20system.\x0a\x0a','botUsername','amount','‚ùå\x20Please\x20use\x20/start\x20command\x20first','Payment\x20successfully\x20paid','userAgent','`.\x0a\x0a','create','üì±\x20Login\x20notifications\x20disabled\x20for\x20shop\x20',':\x20username=\x22','Use\x20/status\x20to\x20check\x20status\x20or\x20/disconnect\x20to\x20disconnect.','\x20verified\x20for\x20shop\x20','üîî\x20Notifications\x20are\x20active\x0a\x0a','...\x22','‚ùå\x20Error\x20getting\x20debug\x20information.','publicKey','‚Ä¢\x20Important\x20events\x0a\x0a','Payment\x20refund','Commands:\x0a','forEach','substring','shopSettings','/disconnect\x20-\x20disconnect\x20from\x20notifications','‚ùå\x20Error:\x20`','Telegram\x20bot\x20error:','Check\x20the\x20key\x20and\x20try\x20again.\x0a\x0a','Error\x20sending\x20shop\x20notification:','üì±\x20API\x20error\x20notifications\x20disabled\x20for\x20shop\x20','log','\x20USD*\x0a','‚ùå\x20Shop\x20with\x20username\x20`','üîî\x20You\x20receive\x20notifications\x20about:\x0a','endpoint','bot','test','sendCustomNotification','\x20parts:\x20','Expected\x20key\x20format:\x20`pk_...`\x20or\x20`sk_...`','stopBot','defineProperty','Check\x20spelling\x20and\x20try\x20again.','/status\x20-\x20check\x20connection\x20status\x0a','warn','__esModule','498rNZKzm','findMany','method','‚úÖ\x20Connected\x20to\x20shop:\x20*','TELEGRAM_BOT_TOKEN\x20not\x20found\x20in\x20environment\x20variables','sk_','getBotInfo','../config/database','üìù\x20Notes:\x20','üë§\x20Username:\x20`','Error\x20handling\x20/start\x20command:','No\x20verified\x20Telegram\x20users\x20found\x20for\x20shop\x20',':\x20`','üÜî\x20Payment\x20ID:\x20`','onText','`\x20not\x20found.\x0a\x0a','Error\x20handling\x20message:','üíª\x20Browser:\x20`','‚ùå\x20Failed\x20to\x20initialize\x20Telegram\x20bot:','ipAddress','üì±\x20Shop:\x20*'];a49_0x1a55=function(){return _0x3e6555;};return a49_0x1a55();}