'use strict';function a72_0x1fa6(_0x597b6d,_0x1d53e6){_0x597b6d=_0x597b6d-0x1b8;const _0x4da572=a72_0x4da5();let _0x1fa60d=_0x4da572[_0x597b6d];return _0x1fa60d;}const a72_0x367e4a=a72_0x1fa6;(function(_0x102f85,_0x2604d6){const _0x5ce8eb=a72_0x1fa6,_0x4be46d=_0x102f85();while(!![]){try{const _0x3e2078=-parseInt(_0x5ce8eb(0x22e))/0x1*(parseInt(_0x5ce8eb(0x237))/0x2)+parseInt(_0x5ce8eb(0x1e1))/0x3*(parseInt(_0x5ce8eb(0x20c))/0x4)+-parseInt(_0x5ce8eb(0x1ca))/0x5+-parseInt(_0x5ce8eb(0x20e))/0x6*(-parseInt(_0x5ce8eb(0x1c5))/0x7)+parseInt(_0x5ce8eb(0x233))/0x8+-parseInt(_0x5ce8eb(0x1e8))/0x9+parseInt(_0x5ce8eb(0x1f9))/0xa;if(_0x3e2078===_0x2604d6)break;else _0x4be46d['push'](_0x4be46d['shift']());}catch(_0x3f8bf8){_0x4be46d['push'](_0x4be46d['shift']());}}}(a72_0x4da5,0x8a69d));var __importDefault=this&&this[a72_0x367e4a(0x227)]||function(_0x20b02d){return _0x20b02d&&_0x20b02d['__esModule']?_0x20b02d:{'default':_0x20b02d};};Object['defineProperty'](exports,a72_0x367e4a(0x23c),{'value':!![]}),exports['paymentCleanupService']=exports['PaymentCleanupService']=void 0x0;const database_1=__importDefault(require(a72_0x367e4a(0x23f))),client_1=require(a72_0x367e4a(0x1f7)),loggerService_1=require(a72_0x367e4a(0x21e));class PaymentCleanupService{constructor(){const _0x22732a=a72_0x367e4a;this[_0x22732a(0x236)]=0x5,this[_0x22732a(0x239)]=0x5;}async[a72_0x367e4a(0x1d7)](){const _0x483c97=a72_0x367e4a,_0x27e762=[];let _0x5874cd=0x0,_0x19ce23=0x0;try{console[_0x483c97(0x222)](_0x483c97(0x1fd));const _0x69f73c=new Date();_0x69f73c[_0x483c97(0x1d1)](_0x69f73c['getDate']()-this[_0x483c97(0x236)]),console[_0x483c97(0x222)](_0x483c97(0x20a)+_0x69f73c[_0x483c97(0x1cb)]());const _0x2a8492=await database_1[_0x483c97(0x23a)][_0x483c97(0x1ba)][_0x483c97(0x1f0)]({'where':{'status':client_1[_0x483c97(0x212)][_0x483c97(0x223)],'createdAt':{'lt':_0x69f73c}},'include':{'shop':{'select':{'id':!![],'name':!![],'username':!![]}}}});console[_0x483c97(0x222)](_0x483c97(0x1fa)+_0x2a8492['length']+'\x20stale\x20PROCESSING\x20payments');if(_0x2a8492[_0x483c97(0x1e0)]===0x0)return console[_0x483c97(0x222)](_0x483c97(0x1c1)),{'processed':0x0,'failed':0x0,'errors':[]};for(const _0x43ef7a of _0x2a8492){try{console[_0x483c97(0x222)]('â±ï¸\x20Processing\x20stale\x20payment:\x20'+_0x43ef7a['id']+'\x20('+_0x43ef7a[_0x483c97(0x1c7)]+',\x20'+_0x43ef7a['amount']+'\x20'+_0x43ef7a[_0x483c97(0x215)]+')'),console[_0x483c97(0x222)]('\x20\x20\x20Shop:\x20'+_0x43ef7a[_0x483c97(0x213)][_0x483c97(0x23e)]+'\x20('+_0x43ef7a['shop'][_0x483c97(0x232)]+')'),console[_0x483c97(0x222)](_0x483c97(0x209)+_0x43ef7a[_0x483c97(0x205)]['toISOString']()),console['log']('\x20\x20\x20Age:\x20'+Math[_0x483c97(0x1e5)]((Date[_0x483c97(0x210)]()-_0x43ef7a[_0x483c97(0x205)]['getTime']())/(0x3e8*0x3c*0x3c*0x18))+_0x483c97(0x21b));const _0x5707a9=await database_1[_0x483c97(0x23a)][_0x483c97(0x1ba)][_0x483c97(0x1bf)]({'where':{'id':_0x43ef7a['id']},'data':{'status':client_1[_0x483c97(0x212)]['FAILED'],'statusChangedBy':_0x483c97(0x1b8),'statusChangedAt':new Date(),'failureMessage':_0x483c97(0x1f2)+this['PROCESSING_TIMEOUT_DAYS']+_0x483c97(0x21b)}});console[_0x483c97(0x222)]('âœ…\x20Updated\x20payment\x20'+_0x43ef7a['id']+_0x483c97(0x224)),loggerService_1[_0x483c97(0x1bd)][_0x483c97(0x219)](_0x43ef7a[_0x483c97(0x1c7)],_0x43ef7a['id'],'PROCESSING','FAILED',{'reason':'auto_timeout','timeoutDays':this[_0x483c97(0x236)]}),_0x5874cd++;}catch(_0x45d070){const _0x3905cb=_0x483c97(0x235)+_0x43ef7a['id']+':\x20'+(_0x45d070 instanceof Error?_0x45d070[_0x483c97(0x23d)]:_0x483c97(0x1c9));console[_0x483c97(0x1e9)]('âŒ\x20'+_0x3905cb),_0x27e762[_0x483c97(0x22b)](_0x3905cb),_0x19ce23++;}}const _0x5dee15='Cleanup\x20completed:\x20'+_0x5874cd+'\x20payments\x20updated\x20to\x20FAILED,\x20'+_0x19ce23+'\x20failed\x20to\x20update';return console[_0x483c97(0x222)](_0x483c97(0x238)+_0x5dee15),loggerService_1[_0x483c97(0x1bd)][_0x483c97(0x1c3)]('payment_cleanup',_0x483c97(0x1ec),_0x483c97(0x1b8),_0x483c97(0x226),{'processed':_0x5874cd,'failed':_0x19ce23,'errors':_0x27e762,'timeoutDays':this[_0x483c97(0x236)]}),{'processed':_0x5874cd,'failed':_0x19ce23,'errors':_0x27e762};}catch(_0x457ff4){const _0x851345=_0x483c97(0x1cd)+(_0x457ff4 instanceof Error?_0x457ff4['message']:'Unknown\x20error');return console[_0x483c97(0x1e9)](_0x483c97(0x1d2)+_0x851345),_0x27e762['push'](_0x851345),loggerService_1[_0x483c97(0x1bd)][_0x483c97(0x22f)]('payment_cleanup',_0x851345,{'timeoutDays':this[_0x483c97(0x236)]}),{'processed':_0x5874cd,'failed':_0x19ce23,'errors':_0x27e762};}}async['cleanupStalePendingPayments'](){const _0x529252=a72_0x367e4a,_0xcbddda=[];let _0x4b2080=0x0,_0x6fd62f=0x0;try{console[_0x529252(0x222)](_0x529252(0x1ea));const _0x33463d=new Date();_0x33463d[_0x529252(0x1d1)](_0x33463d['getDate']()-this[_0x529252(0x239)]),console[_0x529252(0x222)](_0x529252(0x1f1)+_0x33463d['toISOString']());const _0x46ad56=await database_1[_0x529252(0x23a)]['payment'][_0x529252(0x1f0)]({'where':{'status':client_1[_0x529252(0x212)][_0x529252(0x1c6)],'createdAt':{'lt':_0x33463d}},'include':{'shop':{'select':{'id':!![],'name':!![],'username':!![]}}}});console[_0x529252(0x222)](_0x529252(0x1fa)+_0x46ad56['length']+_0x529252(0x21f));if(_0x46ad56[_0x529252(0x1e0)]===0x0)return console['log'](_0x529252(0x1f5)),{'processed':0x0,'failed':0x0,'errors':[]};for(const _0x4bf18e of _0x46ad56){try{console[_0x529252(0x222)](_0x529252(0x1e7)+_0x4bf18e['id']+'\x20('+_0x4bf18e['gateway']+',\x20'+_0x4bf18e[_0x529252(0x1be)]+'\x20'+_0x4bf18e['currency']+')'),console['log']('\x20\x20\x20Shop:\x20'+_0x4bf18e[_0x529252(0x213)][_0x529252(0x23e)]+'\x20('+_0x4bf18e['shop'][_0x529252(0x232)]+')'),console['log']('\x20\x20\x20Created:\x20'+_0x4bf18e[_0x529252(0x205)][_0x529252(0x1cb)]()),console[_0x529252(0x222)](_0x529252(0x21d)+Math[_0x529252(0x1e5)]((Date['now']()-_0x4bf18e[_0x529252(0x205)][_0x529252(0x1f8)]())/(0x3e8*0x3c*0x3c*0x18))+_0x529252(0x21b));const _0x397abe=await database_1[_0x529252(0x23a)]['payment'][_0x529252(0x1bf)]({'where':{'id':_0x4bf18e['id']},'data':{'status':client_1['PaymentStatus'][_0x529252(0x1ce)],'statusChangedBy':_0x529252(0x1b8),'statusChangedAt':new Date(),'failureMessage':_0x529252(0x1db)+this[_0x529252(0x239)]+_0x529252(0x21b)}});console['log'](_0x529252(0x228)+_0x4bf18e['id']+'\x20from\x20PENDING\x20to\x20EXPIRED'),loggerService_1[_0x529252(0x1bd)][_0x529252(0x219)](_0x4bf18e['gateway'],_0x4bf18e['id'],_0x529252(0x1c6),_0x529252(0x1ce),{'reason':_0x529252(0x21c),'timeoutDays':this[_0x529252(0x239)]}),_0x4b2080++;}catch(_0x13029f){const _0x27c239='Failed\x20to\x20update\x20PENDING\x20payment\x20'+_0x4bf18e['id']+':\x20'+(_0x13029f instanceof Error?_0x13029f['message']:_0x529252(0x1c9));console[_0x529252(0x1e9)]('âŒ\x20'+_0x27c239),_0xcbddda['push'](_0x27c239),_0x6fd62f++;}}const _0x4b1df0=_0x529252(0x1e6)+_0x4b2080+_0x529252(0x1fb)+_0x6fd62f+_0x529252(0x23b);return console[_0x529252(0x222)](_0x529252(0x238)+_0x4b1df0),loggerService_1['loggerService']['logApiCall']('pending_payment_cleanup','POST','system',_0x529252(0x226),{'processed':_0x4b2080,'failed':_0x6fd62f,'errors':_0xcbddda,'timeoutDays':this['PENDING_TIMEOUT_DAYS']}),{'processed':_0x4b2080,'failed':_0x6fd62f,'errors':_0xcbddda};}catch(_0x2c25a9){const _0x2400c7='PENDING\x20cleanup\x20service\x20error:\x20'+(_0x2c25a9 instanceof Error?_0x2c25a9['message']:_0x529252(0x1c9));return console[_0x529252(0x1e9)](_0x529252(0x1d2)+_0x2400c7),_0xcbddda[_0x529252(0x22b)](_0x2400c7),loggerService_1['loggerService'][_0x529252(0x22f)]('pending_payment_cleanup',_0x2400c7,{'timeoutDays':this[_0x529252(0x239)]}),{'processed':_0x4b2080,'failed':_0x6fd62f,'errors':_0xcbddda};}}async['getProcessingPaymentsStats'](){const _0x242b4d=a72_0x367e4a;try{const _0x27190=new Date(),_0x5548d2=new Date(_0x27190[_0x242b4d(0x1f8)]()-0x1*0x18*0x3c*0x3c*0x3e8),_0x4f635f=new Date(_0x27190[_0x242b4d(0x1f8)]()-0x3*0x18*0x3c*0x3c*0x3e8),_0x3ef0b4=new Date(_0x27190[_0x242b4d(0x1f8)]()-0x5*0x18*0x3c*0x3c*0x3e8),_0xc99d7c=await database_1[_0x242b4d(0x23a)][_0x242b4d(0x1ba)][_0x242b4d(0x1f0)]({'where':{'status':{'in':[client_1[_0x242b4d(0x212)][_0x242b4d(0x223)],client_1[_0x242b4d(0x212)]['PENDING']]}},'select':{'id':!![],'gateway':!![],'status':!![],'createdAt':!![]}}),_0x116c7b={'total':_0xc99d7c[_0x242b4d(0x1e0)],'byAge':{'fresh':0x0,'recent':0x0,'stale':0x0,'expired':0x0},'byGateway':{},'byStatus':{}};for(const _0x4161e6 of _0xc99d7c){if(_0x4161e6['createdAt']>_0x5548d2)_0x116c7b[_0x242b4d(0x1f6)][_0x242b4d(0x1d6)]++;else{if(_0x4161e6[_0x242b4d(0x205)]>_0x4f635f)_0x116c7b[_0x242b4d(0x1f6)][_0x242b4d(0x1dc)]++;else _0x4161e6[_0x242b4d(0x205)]>_0x3ef0b4?_0x116c7b[_0x242b4d(0x1f6)][_0x242b4d(0x1b9)]++:_0x116c7b[_0x242b4d(0x1f6)][_0x242b4d(0x1fe)]++;}!_0x116c7b[_0x242b4d(0x1d4)][_0x4161e6[_0x242b4d(0x1c7)]]&&(_0x116c7b[_0x242b4d(0x1d4)][_0x4161e6[_0x242b4d(0x1c7)]]=0x0);_0x116c7b[_0x242b4d(0x1d4)][_0x4161e6['gateway']]++;const _0x448608=_0x4161e6[_0x242b4d(0x1d0)];!_0x116c7b[_0x242b4d(0x204)][_0x448608]&&(_0x116c7b[_0x242b4d(0x204)][_0x448608]=0x0),_0x116c7b[_0x242b4d(0x204)][_0x448608]++;}return _0x116c7b;}catch(_0x5984d9){console[_0x242b4d(0x1e9)](_0x242b4d(0x1eb),_0x5984d9);throw new Error(_0x242b4d(0x234)+(_0x5984d9 instanceof Error?_0x5984d9['message']:_0x242b4d(0x1c9)));}}async[a72_0x367e4a(0x22d)](){const _0x5cf994=a72_0x367e4a;console[_0x5cf994(0x222)]('ðŸš€\x20Starting\x20payment\x20cleanup\x20service...');const _0x36a79e=await this[_0x5cf994(0x229)]();console[_0x5cf994(0x222)](_0x5cf994(0x1de)),console[_0x5cf994(0x222)](_0x5cf994(0x1e2)+_0x36a79e[_0x5cf994(0x1ef)]),console[_0x5cf994(0x222)](_0x5cf994(0x1c8)+_0x36a79e[_0x5cf994(0x1f6)][_0x5cf994(0x1d6)]),console[_0x5cf994(0x222)](_0x5cf994(0x1e3)+_0x36a79e[_0x5cf994(0x1f6)][_0x5cf994(0x1dc)]),console[_0x5cf994(0x222)](_0x5cf994(0x20d)+_0x36a79e[_0x5cf994(0x1f6)][_0x5cf994(0x1b9)]),console[_0x5cf994(0x222)](_0x5cf994(0x214)+_0x36a79e[_0x5cf994(0x1f6)][_0x5cf994(0x1fe)]),console[_0x5cf994(0x222)](_0x5cf994(0x1df),_0x36a79e['byGateway']),console[_0x5cf994(0x222)](_0x5cf994(0x225),_0x36a79e[_0x5cf994(0x204)]),console[_0x5cf994(0x222)](_0x5cf994(0x22a));const _0x592d80=await this['cleanupStaleProcessingPayments']();console['log'](_0x5cf994(0x1d8));const _0x5b5855=await this[_0x5cf994(0x231)](),_0x5167bb=await this[_0x5cf994(0x229)]();console['log']('\x0aðŸ“Š\x20Stale\x20payments\x20(PROCESSING\x20+\x20PENDING)\x20after\x20cleanup:'),console['log']('\x20\x20\x20Total:\x20'+_0x5167bb[_0x5cf994(0x1ef)]),console[_0x5cf994(0x222)](_0x5cf994(0x214)+_0x5167bb['byAge'][_0x5cf994(0x1fe)]),console['log'](_0x5cf994(0x225),_0x5167bb[_0x5cf994(0x204)]);const _0x512d54=_0x592d80[_0x5cf994(0x20f)]+_0x5b5855[_0x5cf994(0x20f)],_0xf86403=_0x592d80[_0x5cf994(0x206)]+_0x5b5855[_0x5cf994(0x206)],_0xfee1=[..._0x592d80[_0x5cf994(0x1cc)],..._0x5b5855[_0x5cf994(0x1cc)]];console[_0x5cf994(0x222)]('\x0aðŸ“ˆ\x20Cleanup\x20Summary:'),console[_0x5cf994(0x222)](_0x5cf994(0x1d9)+_0x592d80[_0x5cf994(0x20f)]),console[_0x5cf994(0x222)]('\x20\x20\x20â°\x20PENDING\x20â†’\x20EXPIRED:\x20'+_0x5b5855['processed']),console[_0x5cf994(0x222)]('\x20\x20\x20âœ…\x20Total\x20successfully\x20processed:\x20'+_0x512d54),console[_0x5cf994(0x222)](_0x5cf994(0x211)+_0xf86403),console['log'](_0x5cf994(0x220)+(_0x36a79e[_0x5cf994(0x1ef)]-_0x5167bb[_0x5cf994(0x1ef)])),_0xfee1[_0x5cf994(0x1e0)]>0x0&&(console['log']('\x20\x20\x20âš ï¸\x20Errors\x20encountered:'),_0xfee1[_0x5cf994(0x1d3)]((_0x332875,_0x4c5b52)=>{const _0xa94a59=_0x5cf994;console['log'](_0xa94a59(0x1c0)+(_0x4c5b52+0x1)+'.\x20'+_0x332875);})),console[_0x5cf994(0x222)](_0x5cf994(0x200));}async[a72_0x367e4a(0x216)](){const _0x3d989e=a72_0x367e4a;console['log']('ðŸš€\x20Starting\x20PROCESSING\x20payments\x20cleanup\x20only...');const _0x56da06=await this[_0x3d989e(0x229)](),_0x2d7374=_0x56da06['byStatus'][_0x3d989e(0x223)]||0x0;console[_0x3d989e(0x222)](_0x3d989e(0x1c2)+_0x2d7374);const _0x3270fc=await this[_0x3d989e(0x1d7)](),_0x1e0e9c=await this[_0x3d989e(0x229)](),_0x25e852=_0x1e0e9c[_0x3d989e(0x204)][_0x3d989e(0x223)]||0x0;console[_0x3d989e(0x222)](_0x3d989e(0x207)+_0x25e852),console[_0x3d989e(0x222)](_0x3d989e(0x203)+_0x3270fc[_0x3d989e(0x20f)]),console[_0x3d989e(0x222)](_0x3d989e(0x20b));}async[a72_0x367e4a(0x1d5)](){const _0x39eac6=a72_0x367e4a;console[_0x39eac6(0x222)](_0x39eac6(0x230));const _0x21258f=await this['getProcessingPaymentsStats'](),_0x37411a=_0x21258f[_0x39eac6(0x204)][_0x39eac6(0x1c6)]||0x0;console['log'](_0x39eac6(0x1bb)+_0x37411a);const _0x5c6a47=await this[_0x39eac6(0x231)](),_0x299897=await this[_0x39eac6(0x229)](),_0x4cb92e=_0x299897[_0x39eac6(0x204)][_0x39eac6(0x1c6)]||0x0;console[_0x39eac6(0x222)](_0x39eac6(0x240)+_0x4cb92e),console[_0x39eac6(0x222)](_0x39eac6(0x208)+_0x5c6a47[_0x39eac6(0x20f)]),console[_0x39eac6(0x222)]('ðŸ\x20PENDING\x20cleanup\x20completed');}async[a72_0x367e4a(0x22c)](){const _0x193baa=a72_0x367e4a,_0x57b51b=[];let _0x272b60=0x0;try{console[_0x193baa(0x222)](_0x193baa(0x1dd));const _0x20cfaa=new Date(),_0x27ccec=['oxapay',_0x193baa(0x202)],_0x209559=['squirrelpay',_0x193baa(0x1da),'visa/mastercard',_0x193baa(0x1ed)],_0x2eb5e9=await database_1[_0x193baa(0x23a)][_0x193baa(0x1f3)]['findMany']({'where':{'type':_0x193baa(0x21a),'status':_0x193baa(0x1e4)},'include':{'payments':{'orderBy':{'createdAt':'desc'},'take':0x1}}});console[_0x193baa(0x222)](_0x193baa(0x1fa)+_0x2eb5e9[_0x193baa(0x1e0)]+_0x193baa(0x1bc));for(const _0x50810f of _0x2eb5e9){try{if(_0x50810f[_0x193baa(0x217)][_0x193baa(0x1e0)]===0x0)continue;const _0x4eef1f=_0x50810f[_0x193baa(0x217)][0x0];if(_0x4eef1f[_0x193baa(0x1d0)]===_0x193baa(0x241))continue;const _0x4bda4f=_0x20cfaa[_0x193baa(0x1f8)]()-_0x4eef1f[_0x193baa(0x205)][_0x193baa(0x1f8)]();let _0x39341b;_0x27ccec['includes'](_0x50810f['gateway'])||_0x209559[_0x193baa(0x1c4)](_0x50810f[_0x193baa(0x1c7)])?_0x39341b=0x1e*0x3c*0x3e8:_0x39341b=0x3*0x18*0x3c*0x3c*0x3e8,_0x4bda4f>_0x39341b&&(await database_1[_0x193baa(0x23a)][_0x193baa(0x1f3)][_0x193baa(0x1bf)]({'where':{'id':_0x50810f['id']},'data':{'status':_0x193baa(0x1ce)}}),console[_0x193baa(0x222)](_0x193baa(0x1ff)+_0x50810f['id']+_0x193baa(0x1cf)+_0x50810f[_0x193baa(0x1c7)]+_0x193baa(0x221)+Math[_0x193baa(0x1f4)](_0x4bda4f/0x3e8/0x3c)+'\x20minutes)'),_0x272b60++);}catch(_0x4961cd){const _0x1e6900=_0x193baa(0x201)+_0x50810f['id']+':\x20'+(_0x4961cd instanceof Error?_0x4961cd[_0x193baa(0x23d)]:'Unknown\x20error');console['error']('âŒ\x20'+_0x1e6900),_0x57b51b[_0x193baa(0x22b)](_0x1e6900);}}return console['log'](_0x193baa(0x218)+_0x272b60+_0x193baa(0x1ee)),{'expired':_0x272b60,'errors':_0x57b51b};}catch(_0x27556d){const _0x142aad=_0x193baa(0x1fc)+(_0x27556d instanceof Error?_0x27556d['message']:'Unknown\x20error');return console['error'](_0x193baa(0x1d2)+_0x142aad),_0x57b51b['push'](_0x142aad),{'expired':_0x272b60,'errors':_0x57b51b};}}}exports['PaymentCleanupService']=PaymentCleanupService,exports['paymentCleanupService']=new PaymentCleanupService();function a72_0x4da5(){const _0x27171d=['POST','mastercard','\x20links\x20expired','total','findMany','ðŸ“…\x20Looking\x20for\x20PENDING\x20payments\x20older\x20than:\x20','Payment\x20timeout:\x20No\x20status\x20update\x20received\x20for\x20','paymentLink','round','âœ…\x20No\x20stale\x20PENDING\x20payments\x20found','byAge','@prisma/client','getTime','1848560OtoCJs','ðŸ”\x20Found\x20','\x20payments\x20updated\x20to\x20EXPIRED,\x20','Link\x20expiration\x20service\x20error:\x20','ðŸ§¹\x20Starting\x20cleanup\x20of\x20stale\x20PROCESSING\x20payments...','expired','â°\x20Expired\x20link\x20','ðŸ\x20Payment\x20cleanup\x20service\x20completed','Failed\x20to\x20expire\x20link\x20','plisio','âœ…\x20PROCESSING\x20payments\x20processed:\x20','byStatus','createdAt','failed','ðŸ“Š\x20PROCESSING\x20payments\x20after\x20cleanup:\x20','âœ…\x20PENDING\x20payments\x20processed:\x20','\x20\x20\x20Created:\x20','ðŸ“…\x20Looking\x20for\x20PROCESSING\x20payments\x20older\x20than:\x20','ðŸ\x20PROCESSING\x20cleanup\x20completed','4cwxFCt','\x20\x20\x20Stale\x20(3-5\x20days):\x20','1902aKaPLP','processed','now','\x20\x20\x20âŒ\x20Total\x20failed\x20to\x20process:\x20','PaymentStatus','shop','\x20\x20\x20Expired\x20(>\x205\x20days):\x20','currency','runProcessingCleanupOnly','payments','ðŸ“Š\x20Expiration\x20completed:\x20','logWebhookProcessed','SINGLE','\x20days','auto_timeout_pending','\x20\x20\x20Age:\x20','./loggerService','\x20stale\x20PENDING\x20payments','\x20\x20\x20ðŸ“‰\x20Total\x20stale\x20payments\x20reduced\x20by:\x20',',\x20payment\x20age:\x20','log','PROCESSING','\x20from\x20PROCESSING\x20to\x20FAILED','\x20\x20\x20By\x20status:','admin','__importDefault','âœ…\x20Updated\x20payment\x20','getProcessingPaymentsStats','\x0aðŸ”„\x20Running\x20PROCESSING\x20payments\x20cleanup...','push','expireSinglePaymentLinks','runCleanupWithReport','500317MptcBv','logWebhookError','ðŸš€\x20Starting\x20PENDING\x20payments\x20cleanup\x20only...','cleanupStalePendingPayments','username','7902392YKpDXr','Failed\x20to\x20get\x20processing\x20payments\x20stats:\x20','Failed\x20to\x20update\x20payment\x20','PROCESSING_TIMEOUT_DAYS','2RttxPh','ðŸ“Š\x20','PENDING_TIMEOUT_DAYS','default','\x20failed\x20to\x20update','__esModule','message','name','../config/database','ðŸ“Š\x20PENDING\x20payments\x20after\x20cleanup:\x20','PAID','system','stale','payment','ðŸ“Š\x20PENDING\x20payments\x20before\x20cleanup:\x20','\x20active\x20SINGLE\x20links\x20to\x20check','loggerService','amount','update','\x20\x20\x20\x20\x20\x20','âœ…\x20No\x20stale\x20PROCESSING\x20payments\x20found','ðŸ“Š\x20PROCESSING\x20payments\x20before\x20cleanup:\x20','logApiCall','includes','8456ALUOsZ','PENDING','gateway','\x20\x20\x20Fresh\x20(<\x201\x20day):\x20','Unknown\x20error','3291040HylETH','toISOString','errors','Cleanup\x20service\x20error:\x20','EXPIRED','\x20(gateway:\x20','status','setDate','ðŸ’¥\x20','forEach','byGateway','runPendingCleanupOnly','fresh','cleanupStaleProcessingPayments','\x0aðŸ”„\x20Running\x20PENDING\x20payments\x20cleanup...','\x20\x20\x20ðŸ”„\x20PROCESSING\x20â†’\x20FAILED:\x20','rapyd','Payment\x20timeout:\x20No\x20payment\x20action\x20received\x20for\x20','recent','â°\x20Starting\x20expiration\x20check\x20for\x20SINGLE\x20payment\x20links...','ðŸ“Š\x20Stale\x20payments\x20(PROCESSING\x20+\x20PENDING)\x20before\x20cleanup:','\x20\x20\x20By\x20gateway:','length','2033547YwTwiH','\x20\x20\x20Total:\x20','\x20\x20\x20Recent\x20(1-3\x20days):\x20','ACTIVE','floor','PENDING\x20cleanup\x20completed:\x20','â°\x20Processing\x20stale\x20PENDING\x20payment:\x20','4571766cAbVrQ','error','ðŸ§¹\x20Starting\x20cleanup\x20of\x20stale\x20PENDING\x20payments...','Failed\x20to\x20get\x20processing\x20payments\x20stats:'];a72_0x4da5=function(){return _0x27171d;};return a72_0x4da5();}