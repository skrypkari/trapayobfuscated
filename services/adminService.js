'use strict';const a48_0x4987bc=a48_0x1610;(function(_0x5c8c9c,_0x1e8858){const _0x55dfa0=a48_0x1610,_0x41f332=_0x5c8c9c();while(!![]){try{const _0x2e2f64=parseInt(_0x55dfa0(0x219))/0x1*(-parseInt(_0x55dfa0(0x1d0))/0x2)+parseInt(_0x55dfa0(0x197))/0x3+-parseInt(_0x55dfa0(0x1d9))/0x4+-parseInt(_0x55dfa0(0x254))/0x5+parseInt(_0x55dfa0(0x2cd))/0x6+parseInt(_0x55dfa0(0x271))/0x7*(-parseInt(_0x55dfa0(0x255))/0x8)+parseInt(_0x55dfa0(0x1a2))/0x9;if(_0x2e2f64===_0x1e8858)break;else _0x41f332['push'](_0x41f332['shift']());}catch(_0x1f59b5){_0x41f332['push'](_0x41f332['shift']());}}}(a48_0x15f6,0xa36fc));function a48_0x1610(_0xf69e95,_0x2bec98){_0xf69e95=_0xf69e95-0x15e;const _0x15f6fd=a48_0x15f6();let _0x161044=_0x15f6fd[_0xf69e95];return _0x161044;}var __importDefault=this&&this[a48_0x4987bc(0x2a5)]||function(_0x516ae4){const _0x5ed053=a48_0x4987bc;return _0x516ae4&&_0x516ae4[_0x5ed053(0x233)]?_0x516ae4:{'default':_0x516ae4};};Object[a48_0x4987bc(0x16a)](exports,'__esModule',{'value':!![]}),exports['AdminService']=void 0x0;const database_1=__importDefault(require('../config/database')),bcryptjs_1=__importDefault(require(a48_0x4987bc(0x2a6))),crypto_1=__importDefault(require(a48_0x4987bc(0x285))),currencyService_1=require('./currencyService'),telegramBotService_1=require('./telegramBotService'),gateway_1=require('../types/gateway');class AdminService{async[a48_0x4987bc(0x275)](){const _0x51bb6a=a48_0x4987bc;console[_0x51bb6a(0x1fb)](_0x51bb6a(0x185));const _0x1e4d80=await database_1[_0x51bb6a(0x216)][_0x51bb6a(0x272)]['aggregate']({'_sum':{'balance':!![],'totalPaidOut':!![]}}),_0x49b129=await database_1[_0x51bb6a(0x216)][_0x51bb6a(0x286)][_0x51bb6a(0x270)]({'where':{'status':_0x51bb6a(0x22f),'gateway':{'not':'test_gateway'}}}),_0x5ebf0b=new Date(),_0x1cbf23=new Date(_0x5ebf0b['getFullYear'](),_0x5ebf0b[_0x51bb6a(0x249)](),0x1),_0x5e6652=new Date(_0x5ebf0b['getFullYear'](),_0x5ebf0b[_0x51bb6a(0x249)]()+0x1,0x0,0x17,0x3b,0x3b,0x3e7),_0x41a88b=await database_1[_0x51bb6a(0x216)][_0x51bb6a(0x1ee)][_0x51bb6a(0x26b)]({'_sum':{'amount':!![]},'where':{'createdAt':{'gte':_0x1cbf23,'lte':_0x5e6652},'status':'COMPLETED'}}),_0x485f42=_0x1e4d80[_0x51bb6a(0x299)]['totalPaidOut']||0x0,_0x5bd770=_0x1e4d80[_0x51bb6a(0x299)][_0x51bb6a(0x2a4)]||0x0,_0xaa6ff0=_0x41a88b[_0x51bb6a(0x299)]['amount']||0x0,_0x51816c={'totalPayout':Math['round'](_0x485f42*0x64)/0x64,'awaitingPayout':Math[_0x51bb6a(0x2b8)](_0x5bd770*0x64)/0x64,'thisMonth':Math[_0x51bb6a(0x2b8)](_0xaa6ff0*0x64)/0x64,'availableBalance':Math[_0x51bb6a(0x2b8)](_0x5bd770*0x64)/0x64,'totalPayments':_0x49b129};return console[_0x51bb6a(0x1fb)](_0x51bb6a(0x215)),console[_0x51bb6a(0x1fb)]('\x20\x20\x20ðŸ’°\x20Total\x20payout:\x20'+_0x51816c[_0x51bb6a(0x236)]+'\x20USDT\x20(total\x20paid\x20to\x20merchants)'),console[_0x51bb6a(0x1fb)](_0x51bb6a(0x21f)+_0x51816c[_0x51bb6a(0x1c4)]+_0x51bb6a(0x2ad)),console['log']('\x20\x20\x20ðŸ’µ\x20Available\x20balance:\x20'+_0x51816c[_0x51bb6a(0x1a6)]+_0x51bb6a(0x2b7)),console[_0x51bb6a(0x1fb)]('\x20\x20\x20ðŸ“…\x20This\x20month:\x20'+_0x51816c[_0x51bb6a(0x1a5)]+_0x51bb6a(0x28a)),console[_0x51bb6a(0x1fb)](_0x51bb6a(0x207)+_0x51816c[_0x51bb6a(0x248)]+_0x51bb6a(0x1f7)),_0x51816c;}async['updateCustomerData'](_0x26a742,_0xa5291e){const _0x844cca=a48_0x4987bc;console[_0x844cca(0x1fb)](_0x844cca(0x1b6)+_0x26a742+':',_0xa5291e);const _0x58d3c4=await database_1['default']['payment'][_0x844cca(0x2bc)]({'where':{'id':_0x26a742},'select':{'id':!![],'customerEmail':!![],'customerName':!![],'customerCountry':!![],'customerIp':!![],'customerUa':!![]}});if(!_0x58d3c4)throw new Error(_0x844cca(0x1c1));const _0x1510c2={};_0xa5291e[_0x844cca(0x1b2)]!==undefined&&(_0x1510c2[_0x844cca(0x1b2)]=_0xa5291e['customerCountry']||null);_0xa5291e['customerIp']!==undefined&&(_0x1510c2[_0x844cca(0x18b)]=_0xa5291e[_0x844cca(0x18b)]||null);_0xa5291e[_0x844cca(0x1b5)]!==undefined&&(_0x1510c2[_0x844cca(0x1b5)]=_0xa5291e[_0x844cca(0x1b5)]||null);const _0x145d98=await database_1['default']['payment'][_0x844cca(0x280)]({'where':{'id':_0x26a742},'data':{..._0x1510c2,'updatedAt':new Date()},'select':{'id':!![],'customerEmail':!![],'customerName':!![],'customerCountry':!![],'customerIp':!![],'customerUa':!![],'updatedAt':!![]}});return console[_0x844cca(0x1fb)]('âœ…\x20Customer\x20data\x20updated\x20for\x20payment\x20'+_0x26a742),console[_0x844cca(0x1fb)]('\x20\x20\x20ðŸŒ\x20Country:\x20'+_0x58d3c4[_0x844cca(0x1b2)]+_0x844cca(0x201)+_0x145d98[_0x844cca(0x1b2)]),console[_0x844cca(0x1fb)](_0x844cca(0x2b1)+_0x58d3c4['customerIp']+_0x844cca(0x201)+_0x145d98[_0x844cca(0x18b)]),console[_0x844cca(0x1fb)]('\x20\x20\x20ðŸ–¥ï¸\x20User\x20Agent:\x20'+(_0x58d3c4[_0x844cca(0x1b5)]?_0x844cca(0x21b):_0x844cca(0x1ef))+_0x844cca(0x201)+(_0x145d98[_0x844cca(0x1b5)]?_0x844cca(0x21b):_0x844cca(0x1ef))),_0x145d98;}async[a48_0x4987bc(0x27c)](_0x2e1d7d,_0x183d26){const _0x50cafe=a48_0x4987bc,_0x142689=_0x183d26?new Date(_0x183d26):new Date();let _0x4e4db1,_0xc01f5d;if(_0x2e1d7d[_0x50cafe(0x295)](_0x50cafe(0x253))){const _0x1ec8fd=_0x2e1d7d[_0x50cafe(0x229)](_0x50cafe(0x253),'')[_0x50cafe(0x246)]('_');if(_0x1ec8fd[_0x50cafe(0x16c)]===0x2){const _0x129b72=new Date(_0x1ec8fd[0x0]),_0x2702a9=new Date(_0x1ec8fd[0x1]);_0x4e4db1=new Date(Date[_0x50cafe(0x2b9)](_0x129b72[_0x50cafe(0x23f)](),_0x129b72['getUTCMonth'](),_0x129b72[_0x50cafe(0x235)](),0x0,0x0,0x0,0x0)),_0xc01f5d=new Date(Date['UTC'](_0x2702a9[_0x50cafe(0x23f)](),_0x2702a9[_0x50cafe(0x15f)](),_0x2702a9[_0x50cafe(0x235)](),0x17,0x3b,0x3b,0x3e7));}else{const _0xe84d9=new Date(Date['UTC'](_0x142689[_0x50cafe(0x23f)](),_0x142689[_0x50cafe(0x15f)](),_0x142689[_0x50cafe(0x235)]()-0x1e));_0x4e4db1=new Date(Date[_0x50cafe(0x2b9)](_0xe84d9[_0x50cafe(0x23f)](),_0xe84d9[_0x50cafe(0x15f)](),_0xe84d9[_0x50cafe(0x235)](),0x0,0x0,0x0,0x0)),_0xc01f5d=new Date(Date[_0x50cafe(0x2b9)](_0x142689[_0x50cafe(0x23f)](),_0x142689['getUTCMonth'](),_0x142689[_0x50cafe(0x235)](),0x17,0x3b,0x3b,0x3e7));}}else{switch(_0x2e1d7d[_0x50cafe(0x1e7)]()){case _0x50cafe(0x183):_0x4e4db1=new Date(Date[_0x50cafe(0x2b9)](_0x142689['getUTCFullYear'](),_0x142689[_0x50cafe(0x15f)](),_0x142689[_0x50cafe(0x235)](),0x0,0x0,0x0,0x0)),_0xc01f5d=new Date(Date['UTC'](_0x142689[_0x50cafe(0x23f)](),_0x142689[_0x50cafe(0x15f)](),_0x142689[_0x50cafe(0x235)](),0x17,0x3b,0x3b,0x3e7));break;case _0x50cafe(0x20d):const _0xd83d07=new Date(_0x142689);_0xd83d07['setUTCDate'](_0xd83d07[_0x50cafe(0x235)]()-0x1),_0x4e4db1=new Date(Date[_0x50cafe(0x2b9)](_0xd83d07[_0x50cafe(0x23f)](),_0xd83d07[_0x50cafe(0x15f)](),_0xd83d07['getUTCDate'](),0x0,0x0,0x0,0x0)),_0xc01f5d=new Date(Date[_0x50cafe(0x2b9)](_0xd83d07[_0x50cafe(0x23f)](),_0xd83d07[_0x50cafe(0x15f)](),_0xd83d07[_0x50cafe(0x235)](),0x17,0x3b,0x3b,0x3e7));break;case _0x50cafe(0x1ec):const _0x415a17=_0x142689[_0x50cafe(0x2b2)](),_0x26b288=_0x415a17===0x0?-0x6:0x1-_0x415a17,_0x3a3e9a=_0x142689[_0x50cafe(0x235)]()+_0x26b288;_0x4e4db1=new Date(Date[_0x50cafe(0x2b9)](_0x142689[_0x50cafe(0x23f)](),_0x142689[_0x50cafe(0x15f)](),_0x3a3e9a,0x0,0x0,0x0,0x0)),_0xc01f5d=new Date(Date[_0x50cafe(0x2b9)](_0x142689[_0x50cafe(0x23f)](),_0x142689[_0x50cafe(0x15f)](),_0x142689[_0x50cafe(0x235)](),0x17,0x3b,0x3b,0x3e7));break;case _0x50cafe(0x213):const _0x10b635=new Date(Date[_0x50cafe(0x2b9)](_0x142689['getUTCFullYear'](),_0x142689[_0x50cafe(0x15f)](),_0x142689[_0x50cafe(0x235)]()-0x7)),_0x128877=_0x10b635[_0x50cafe(0x2b2)](),_0x7518f9=_0x128877===0x0?-0x6:0x1-_0x128877,_0x448f27=_0x10b635['getUTCDate']()+_0x7518f9;_0x4e4db1=new Date(Date['UTC'](_0x10b635[_0x50cafe(0x23f)](),_0x10b635[_0x50cafe(0x15f)](),_0x448f27,0x0,0x0,0x0,0x0)),_0xc01f5d=new Date(Date[_0x50cafe(0x2b9)](_0x10b635[_0x50cafe(0x23f)](),_0x10b635[_0x50cafe(0x15f)](),_0x448f27+0x6,0x17,0x3b,0x3b,0x3e7));break;case _0x50cafe(0x1f4):_0x4e4db1=new Date(Date[_0x50cafe(0x2b9)](_0x142689[_0x50cafe(0x23f)](),_0x142689[_0x50cafe(0x15f)](),0x1,0x0,0x0,0x0,0x0)),_0xc01f5d=new Date(Date['UTC'](_0x142689[_0x50cafe(0x23f)](),_0x142689[_0x50cafe(0x15f)](),_0x142689['getUTCDate'](),0x17,0x3b,0x3b,0x3e7));break;case'last_month':_0x4e4db1=new Date(Date[_0x50cafe(0x2b9)](_0x142689['getUTCFullYear'](),_0x142689[_0x50cafe(0x15f)]()-0x1,0x1,0x0,0x0,0x0,0x0)),_0xc01f5d=new Date(Date[_0x50cafe(0x2b9)](_0x142689[_0x50cafe(0x23f)](),_0x142689[_0x50cafe(0x15f)](),0x0,0x17,0x3b,0x3b,0x3e7));break;case _0x50cafe(0x1dd):_0x4e4db1=new Date(Date[_0x50cafe(0x2b9)](0x7e9,0x5,0xe,0x0,0x0,0x0,0x0)),_0xc01f5d=new Date(Date[_0x50cafe(0x2b9)](_0x142689[_0x50cafe(0x23f)](),_0x142689[_0x50cafe(0x15f)](),_0x142689['getUTCDate'](),0x17,0x3b,0x3b,0x3e7));break;default:_0x4e4db1=new Date(_0x142689['getTime']()-0x1e*0x18*0x3c*0x3c*0x3e8);const _0x26822a=new Date(Date['UTC'](_0x142689[_0x50cafe(0x23f)](),_0x142689[_0x50cafe(0x15f)](),_0x142689[_0x50cafe(0x235)]()-0x1e));_0x4e4db1=new Date(Date[_0x50cafe(0x2b9)](_0x26822a[_0x50cafe(0x23f)](),_0x26822a['getUTCMonth'](),_0x26822a[_0x50cafe(0x235)](),0x0,0x0,0x0,0x0)),_0xc01f5d=new Date(Date['UTC'](_0x142689[_0x50cafe(0x23f)](),_0x142689[_0x50cafe(0x15f)](),_0x142689[_0x50cafe(0x235)](),0x17,0x3b,0x3b,0x3e7));}const _0x2bcaf7={'gte':_0x4e4db1,'lte':_0xc01f5d};console[_0x50cafe(0x1fb)](_0x50cafe(0x1a9)+_0x4e4db1[_0x50cafe(0x1e0)]()+'\x20to\x20'+_0xc01f5d[_0x50cafe(0x1e0)]());const [_0x5ba8e6,_0x2a2be4,_0x5c180b,_0x1632ad,_0x3d3b6d,_0x1d2e9d,_0x62c072,_0xd4154f,_0xed33f]=await Promise['all']([database_1['default'][_0x50cafe(0x272)][_0x50cafe(0x270)](),database_1[_0x50cafe(0x216)]['shop'][_0x50cafe(0x270)]({'where':{'status':_0x50cafe(0x278)}}),database_1[_0x50cafe(0x216)][_0x50cafe(0x286)][_0x50cafe(0x270)]({'where':{'status':_0x50cafe(0x22f),'createdAt':_0x2bcaf7,'gateway':{'not':'test_gateway'}}}),database_1[_0x50cafe(0x216)][_0x50cafe(0x286)]['count']({'where':{'status':_0x50cafe(0x2b3),'createdAt':_0x2bcaf7,'gateway':{'not':'test_gateway'}}}),database_1[_0x50cafe(0x216)][_0x50cafe(0x286)]['count']({'where':{'status':_0x50cafe(0x212),'createdAt':_0x2bcaf7,'gateway':{'not':_0x50cafe(0x26f)}}}),database_1[_0x50cafe(0x216)][_0x50cafe(0x286)][_0x50cafe(0x1d2)]({'where':{'status':_0x50cafe(0x22f),'createdAt':_0x2bcaf7,'gateway':{'not':_0x50cafe(0x26f)}},'select':{'amount':!![],'currency':!![],'amountUSDT':!![],'amountAfterGatewayCommissionUSDT':!![]}}),database_1[_0x50cafe(0x216)][_0x50cafe(0x286)][_0x50cafe(0x1d2)]({'where':{'gateway':{'not':_0x50cafe(0x26f)}},'take':0xa,'orderBy':{'createdAt':_0x50cafe(0x1bf)},'include':{'shop':{'select':{'name':!![],'username':!![]}}}}),database_1['default'][_0x50cafe(0x286)][_0x50cafe(0x1d2)]({'where':{'createdAt':_0x2bcaf7,'gateway':{'not':_0x50cafe(0x26f)}},'select':{'amount':!![],'currency':!![],'status':!![],'amountUSDT':!![],'createdAt':!![]}}),database_1['default'][_0x50cafe(0x286)]['findMany']({'where':{'status':_0x50cafe(0x22f),'gateway':{'not':_0x50cafe(0x26f)}},'select':{'amountUSDT':!![],'amountAfterGatewayCommissionUSDT':!![]}})]);console[_0x50cafe(0x1fb)](_0x50cafe(0x29d)+_0x5c180b);let _0x3c5d4c=0x0,_0x1c7043=0x0;for(const _0x560be5 of _0x1d2e9d){const _0x1a67bf=_0x560be5[_0x50cafe(0x268)]||0x0;_0x3c5d4c+=_0x1a67bf;if(_0x560be5[_0x50cafe(0x291)]&&_0x560be5['amountUSDT']){const _0x7c7044=_0x560be5['amountUSDT']-_0x560be5[_0x50cafe(0x291)];_0x1c7043+=_0x7c7044;}}let _0x4b9222=0x0;for(const _0x3e6b4b of _0xed33f){if(_0x3e6b4b[_0x50cafe(0x291)]&&_0x3e6b4b[_0x50cafe(0x268)]){const _0x5b3dbc=_0x3e6b4b[_0x50cafe(0x268)]-_0x3e6b4b[_0x50cafe(0x291)];_0x4b9222+=_0x5b3dbc;}}const _0x367a7b=_0x5c180b>0x0?_0x3c5d4c/_0x5c180b:0x0,_0x403e18=this['generateDailyStatistics'](_0xd4154f,_0x4e4db1,_0xc01f5d),_0x111622=await database_1['default'][_0x50cafe(0x286)][_0x50cafe(0x270)]({'where':{'createdAt':_0x2bcaf7,'gateway':{'not':_0x50cafe(0x26f)},'status':{'notIn':[_0x50cafe(0x24e),_0x50cafe(0x1e9)]}}}),_0x2e1679=_0x111622>0x0?_0x5c180b/_0x111622*0x64:0x0;return{'totalShops':_0x5ba8e6,'activeShops':_0x2a2be4,'totalPayments':_0x111622,'successfulPayments':_0x5c180b,'totalAttempts':_0x111622,'chargebacks':_0x1632ad,'refunds':_0x3d3b6d,'totalRevenue':Math['round'](_0x3c5d4c*0x64)/0x64,'trapayEarnings':Math[_0x50cafe(0x2b8)](_0x1c7043*0x64)/0x64,'trapayEarningsAllTime':Math[_0x50cafe(0x2b8)](_0x4b9222*0x64)/0x64,'averagePaymentAmount':Math[_0x50cafe(0x2b8)](_0x367a7b*0x64)/0x64,'conversionRate':Math[_0x50cafe(0x2b8)](_0x2e1679*0x64)/0x64,'dailyRevenue':_0x403e18[_0x50cafe(0x166)],'dailyPayments':_0x403e18[_0x50cafe(0x223)],'recentPayments':_0x62c072[_0x50cafe(0x232)](_0x124f68=>({'id':_0x124f68['id'],'amount':_0x124f68[_0x50cafe(0x1c2)],'currency':_0x124f68['currency'],'status':_0x124f68[_0x50cafe(0x1e1)],'gateway':_0x124f68[_0x50cafe(0x2c2)],'shop':_0x124f68[_0x50cafe(0x272)],'createdAt':_0x124f68['createdAt']}))};}}async[a48_0x4987bc(0x21e)](_0x2b8e45){const _0x369b6f=a48_0x4987bc;console[_0x369b6f(0x1fb)](_0x369b6f(0x22e),_0x2b8e45);let _0x1d53f4,_0x35990c=new Date();if(_0x2b8e45[_0x369b6f(0x24a)]===_0x369b6f(0x1f3)&&_0x2b8e45[_0x369b6f(0x1c8)]&&_0x2b8e45[_0x369b6f(0x279)]){const _0x546a0b=new Date(_0x2b8e45[_0x369b6f(0x1c8)]),_0x52f729=new Date(_0x2b8e45['dateTo']);_0x1d53f4=new Date(Date[_0x369b6f(0x2b9)](_0x546a0b['getUTCFullYear'](),_0x546a0b[_0x369b6f(0x15f)](),_0x546a0b['getUTCDate'](),0x0,0x0,0x0,0x0)),_0x35990c=new Date(Date[_0x369b6f(0x2b9)](_0x52f729[_0x369b6f(0x23f)](),_0x52f729[_0x369b6f(0x15f)](),_0x52f729[_0x369b6f(0x235)](),0x17,0x3b,0x3b,0x3e7));}else{const _0x52ce79=new Date();switch(_0x2b8e45[_0x369b6f(0x24a)]){case _0x369b6f(0x1b9):_0x1d53f4=new Date(_0x52ce79[_0x369b6f(0x26a)]()-0x7*0x18*0x3c*0x3c*0x3e8),_0x1d53f4[_0x369b6f(0x187)](0x0,0x0,0x0,0x0),_0x35990c[_0x369b6f(0x187)](0x17,0x3b,0x3b,0x3e7);break;case _0x369b6f(0x194):_0x1d53f4=new Date(Date[_0x369b6f(0x2b9)](_0x52ce79[_0x369b6f(0x23f)](),_0x52ce79['getUTCMonth'](),0x1,0x0,0x0,0x0,0x0)),_0x35990c=new Date(Date[_0x369b6f(0x2b9)](_0x52ce79[_0x369b6f(0x23f)](),_0x52ce79[_0x369b6f(0x15f)]()+0x1,0x0,0x17,0x3b,0x3b,0x3e7));break;case _0x369b6f(0x26c):_0x1d53f4=new Date(Date[_0x369b6f(0x2b9)](_0x52ce79[_0x369b6f(0x23f)](),_0x52ce79[_0x369b6f(0x15f)]()-0x1,0x1,0x0,0x0,0x0,0x0)),_0x35990c=new Date(Date[_0x369b6f(0x2b9)](_0x52ce79[_0x369b6f(0x23f)](),_0x52ce79['getUTCMonth'](),0x0,0x17,0x3b,0x3b,0x3e7));break;case _0x369b6f(0x1db):_0x1d53f4=new Date(_0x52ce79['getTime']()-0x16d*0x18*0x3c*0x3c*0x3e8),_0x1d53f4[_0x369b6f(0x187)](0x0,0x0,0x0,0x0),_0x35990c[_0x369b6f(0x187)](0x17,0x3b,0x3b,0x3e7);break;case _0x369b6f(0x2aa):default:_0x1d53f4=new Date(_0x369b6f(0x163)),_0x1d53f4[_0x369b6f(0x187)](0x0,0x0,0x0,0x0),_0x35990c[_0x369b6f(0x187)](0x17,0x3b,0x3b,0x3e7);break;}}console[_0x369b6f(0x1fb)](_0x369b6f(0x267)+_0x1d53f4[_0x369b6f(0x1e0)]()+_0x369b6f(0x1bd)+_0x35990c['toISOString']());const _0x56aafc={'status':_0x369b6f(0x22f),'gateway':{'not':_0x369b6f(0x26f)},'createdAt':{'gte':_0x1d53f4,'lte':_0x35990c}};_0x2b8e45[_0x369b6f(0x18f)]&&(_0x56aafc['shopId']=_0x2b8e45[_0x369b6f(0x18f)]);const _0x235ca9=await database_1[_0x369b6f(0x216)]['payment']['findMany']({'where':_0x56aafc,'select':{'id':!![],'amount':!![],'currency':!![],'amountUSDT':!![],'amountAfterGatewayCommissionUSDT':!![],'gatewayCommissionRate':!![],'gateway':!![],'shopId':!![],'paidAt':!![],'shop':{'select':{'id':!![],'name':!![],'username':!![],'gatewaySettings':!![]}}}});console[_0x369b6f(0x1fb)](_0x369b6f(0x1b1)+_0x235ca9[_0x369b6f(0x16c)]+_0x369b6f(0x25b));const _0x1d39d6={'gateway':{'not':_0x369b6f(0x26f)},'status':{'notIn':[_0x369b6f(0x24e),_0x369b6f(0x1e9)]},'createdAt':{'gte':_0x1d53f4,'lte':_0x35990c}};_0x2b8e45['shopId']&&(_0x1d39d6[_0x369b6f(0x18f)]=_0x2b8e45['shopId']);const _0x27fb4a=await database_1['default']['payment']['count']({'where':_0x1d39d6}),_0x3b83c4={..._0x1d39d6,'status':_0x369b6f(0x2b3)},_0x927bfd={..._0x1d39d6,'status':_0x369b6f(0x212)},[_0x592b7f,_0x395dec]=await Promise[_0x369b6f(0x2aa)]([database_1['default'][_0x369b6f(0x286)][_0x369b6f(0x270)]({'where':_0x3b83c4}),database_1['default'][_0x369b6f(0x286)]['count']({'where':_0x927bfd})]);console[_0x369b6f(0x1fb)]('ðŸ“Š\x20Total\x20payments\x20(including\x20failed):\x20'+_0x27fb4a+_0x369b6f(0x1f0)+_0x235ca9[_0x369b6f(0x16c)]+_0x369b6f(0x23b)+_0x592b7f+_0x369b6f(0x173)+_0x395dec);let _0x16f8e3=0x0,_0x59c2a5=0x0,_0x663041=0x0;const _0x5212a5={},_0x294c6c={},_0x17bb4d={},_0x358d13=new Date(_0x1d53f4);while(_0x358d13<=_0x35990c){const _0x33689a=_0x358d13['toISOString']()[_0x369b6f(0x246)]('T')[0x0];_0x17bb4d[_0x33689a]={'date':_0x33689a,'turnover':0x0,'merchantEarnings':0x0,'gatewayEarnings':0x0,'paymentsCount':0x0},_0x358d13[_0x369b6f(0x227)](_0x358d13[_0x369b6f(0x235)]()+0x1);}for(const _0x2ce791 of _0x235ca9){try{const _0x2b9642=_0x2ce791['amountUSDT']||0x0;if(_0x2b9642<=0x0){console['warn']('âš ï¸\x20Payment\x20'+_0x2ce791['id']+'\x20has\x20zero\x20or\x20null\x20amountUSDT,\x20skipping...');continue;}let _0x2544e6,_0x27aff6;if(_0x2ce791[_0x369b6f(0x291)]!==null&&_0x2ce791[_0x369b6f(0x291)]!==undefined)_0x2544e6=_0x2ce791[_0x369b6f(0x291)],_0x27aff6=_0x2b9642-_0x2544e6,console[_0x369b6f(0x1fb)](_0x369b6f(0x171)+_0x2ce791['id']+':\x20'+_0x2b9642[_0x369b6f(0x1fd)](0x6)+_0x369b6f(0x205)+_0x2544e6['toFixed'](0x6)+_0x369b6f(0x28a));else{let _0x447736={};if(_0x2ce791['shop'][_0x369b6f(0x252)])try{_0x447736=JSON[_0x369b6f(0x193)](_0x2ce791[_0x369b6f(0x272)][_0x369b6f(0x252)]);}catch(_0x26dbae){console['error'](_0x369b6f(0x1d7)+_0x2ce791['shopId']+':',_0x26dbae);}let _0x132160=0x2d;for(const [_0x110aba,_0x278c94]of Object[_0x369b6f(0x24c)](_0x447736)){if(_0x110aba[_0x369b6f(0x1e7)]()===_0x2ce791[_0x369b6f(0x2c2)]['toLowerCase']()){_0x132160=_0x278c94[_0x369b6f(0x1f5)]||0x2d;break;}}_0x27aff6=_0x2b9642*(_0x132160/0x64),_0x2544e6=_0x2b9642-_0x27aff6,console[_0x369b6f(0x1fb)]('ðŸ“Š\x20Calculating\x20commission\x20manually\x20for\x20payment\x20'+_0x2ce791['id']+':\x20'+_0x132160+_0x369b6f(0x1ac)+_0x2b9642[_0x369b6f(0x1fd)](0x6)+_0x369b6f(0x28a));}_0x16f8e3+=_0x2b9642,_0x59c2a5+=_0x2544e6,_0x663041+=_0x27aff6;let _0x142faf;_0x2ce791[_0x369b6f(0x217)]!==null&&_0x2ce791[_0x369b6f(0x217)]!==undefined?(_0x142faf=_0x2ce791[_0x369b6f(0x217)],console['log'](_0x369b6f(0x292)+_0x2ce791['id']+':\x20'+_0x142faf+'%')):(_0x142faf=_0x2b9642>0x0?_0x27aff6/_0x2b9642*0x64:0x0,console[_0x369b6f(0x1fb)](_0x369b6f(0x27b)+_0x2ce791['id']+':\x20'+_0x142faf['toFixed'](0x2)+'%'));!_0x5212a5[_0x2ce791[_0x369b6f(0x2c2)]]&&(_0x5212a5[_0x2ce791[_0x369b6f(0x2c2)]]={'gateway':_0x2ce791[_0x369b6f(0x2c2)],'gatewayDisplayName':this['getGatewayDisplayName'](_0x2ce791[_0x369b6f(0x2c2)]),'paymentsCount':0x0,'turnoverUSDT':0x0,'commissionUSDT':0x0,'merchantEarningsUSDT':0x0,'totalCommissionRate':0x0});_0x5212a5[_0x2ce791[_0x369b6f(0x2c2)]][_0x369b6f(0x20b)]++,_0x5212a5[_0x2ce791[_0x369b6f(0x2c2)]][_0x369b6f(0x290)]+=_0x2b9642,_0x5212a5[_0x2ce791[_0x369b6f(0x2c2)]][_0x369b6f(0x265)]+=_0x27aff6,_0x5212a5[_0x2ce791[_0x369b6f(0x2c2)]][_0x369b6f(0x1ed)]+=_0x2544e6,_0x5212a5[_0x2ce791[_0x369b6f(0x2c2)]][_0x369b6f(0x16e)]+=_0x142faf;!_0x2b8e45[_0x369b6f(0x18f)]&&(!_0x294c6c[_0x2ce791[_0x369b6f(0x18f)]]&&(_0x294c6c[_0x2ce791[_0x369b6f(0x18f)]]={'shopId':_0x2ce791['shopId'],'shopName':_0x2ce791['shop']['name'],'shopUsername':_0x2ce791['shop']['username'],'paymentsCount':0x0,'turnoverUSDT':0x0,'commissionUSDT':0x0,'merchantEarningsUSDT':0x0,'paidOutUSDT':0x0,'averageCheckUSDT':0x0}),_0x294c6c[_0x2ce791[_0x369b6f(0x18f)]][_0x369b6f(0x20b)]++,_0x294c6c[_0x2ce791[_0x369b6f(0x18f)]][_0x369b6f(0x290)]+=_0x2b9642,_0x294c6c[_0x2ce791[_0x369b6f(0x18f)]][_0x369b6f(0x265)]+=_0x27aff6,_0x294c6c[_0x2ce791[_0x369b6f(0x18f)]][_0x369b6f(0x1ed)]+=_0x2544e6);const _0x3009e0=_0x2ce791['paidAt'][_0x369b6f(0x1e0)]()[_0x369b6f(0x246)]('T')[0x0];_0x17bb4d[_0x3009e0]&&(_0x17bb4d[_0x3009e0][_0x369b6f(0x243)]+=_0x2b9642,_0x17bb4d[_0x3009e0]['merchantEarnings']+=_0x2544e6,_0x17bb4d[_0x3009e0][_0x369b6f(0x242)]+=_0x27aff6,_0x17bb4d[_0x3009e0][_0x369b6f(0x20b)]++);}catch(_0x130fdd){console['error'](_0x369b6f(0x1d1)+_0x2ce791['id']+':',_0x130fdd);}}Object[_0x369b6f(0x2cb)](_0x5212a5)['forEach'](_0x3d5190=>{const _0x74334f=_0x369b6f;_0x3d5190['averageCommissionRate']=_0x3d5190['paymentsCount']>0x0?_0x3d5190['totalCommissionRate']/_0x3d5190[_0x74334f(0x20b)]:0x0,delete _0x3d5190['totalCommissionRate'];}),Object[_0x369b6f(0x2cb)](_0x294c6c)['forEach'](_0x20e510=>{const _0x24a187=_0x369b6f;_0x20e510[_0x24a187(0x175)]=_0x20e510['paymentsCount']>0x0?_0x20e510[_0x24a187(0x290)]/_0x20e510[_0x24a187(0x20b)]:0x0;});let _0x34b417=0x0,_0x4176ba=0x0;if(_0x2b8e45[_0x369b6f(0x18f)]){const _0xda3d31=await database_1[_0x369b6f(0x216)][_0x369b6f(0x1ee)][_0x369b6f(0x1d2)]({'where':{'shopId':_0x2b8e45[_0x369b6f(0x18f)],'status':'COMPLETED','createdAt':{'gte':_0x1d53f4,'lte':_0x35990c}},'select':{'amount':!![]}});_0x34b417=_0xda3d31['reduce']((_0x5b9947,_0x5b1499)=>_0x5b9947+_0x5b1499[_0x369b6f(0x1c2)],0x0);const _0x59d6d8=await database_1[_0x369b6f(0x216)][_0x369b6f(0x1ee)][_0x369b6f(0x1d2)]({'where':{'shopId':_0x2b8e45[_0x369b6f(0x18f)],'status':_0x369b6f(0x24e),'createdAt':{'gte':_0x1d53f4,'lte':_0x35990c}},'select':{'amount':!![]}});_0x4176ba=_0x59d6d8[_0x369b6f(0x1ce)]((_0x3fdaf6,_0x31b20f)=>_0x3fdaf6+_0x31b20f[_0x369b6f(0x1c2)],0x0);}const _0x3d8c51=_0x27fb4a,_0xf0bea5=_0x235ca9[_0x369b6f(0x16c)],_0x5c4f4d=_0xf0bea5>0x0?_0x16f8e3/_0xf0bea5:0x0,_0x449c24=_0x3d8c51>0x0?Math['round'](_0xf0bea5/_0x3d8c51*0x2710)/0x64:0x0,_0x4b61fd=Math[_0x369b6f(0x2bf)]((_0x35990c[_0x369b6f(0x26a)]()-_0x1d53f4[_0x369b6f(0x26a)]())/(0x3e8*0x3c*0x3c*0x18)),_0x50c8d1={'totalTurnover':Math['round'](_0x16f8e3*0x64)/0x64,'merchantEarnings':Math[_0x369b6f(0x2b8)](_0x59c2a5*0x64)/0x64,'gatewayEarnings':Math['round'](_0x663041*0x64)/0x64,'totalPaidOut':Math[_0x369b6f(0x2b8)](_0x34b417*0x64)/0x64,'pendingPayout':Math[_0x369b6f(0x2b8)](_0x4176ba*0x64)/0x64,'averageCheck':Math[_0x369b6f(0x2b8)](_0x5c4f4d*0x64)/0x64,'totalPayments':_0x3d8c51,'successfulPayments':_0xf0bea5,'conversionRate':_0x449c24,'chargebacks':_0x592b7f,'refunds':_0x395dec,'gatewayBreakdown':Object['values'](_0x5212a5)[_0x369b6f(0x232)](_0x294eab=>({..._0x294eab,'turnoverUSDT':Math[_0x369b6f(0x2b8)](_0x294eab[_0x369b6f(0x290)]*0x64)/0x64,'commissionUSDT':Math[_0x369b6f(0x2b8)](_0x294eab['commissionUSDT']*0x64)/0x64,'merchantEarningsUSDT':Math[_0x369b6f(0x2b8)](_0x294eab[_0x369b6f(0x1ed)]*0x64)/0x64,'averageCommissionRate':Math[_0x369b6f(0x2b8)](_0x294eab['averageCommissionRate']*0x64)/0x64})),'merchantBreakdown':_0x2b8e45[_0x369b6f(0x18f)]?undefined:Object['values'](_0x294c6c)[_0x369b6f(0x232)](_0x45e5d4=>({..._0x45e5d4,'turnoverUSDT':Math[_0x369b6f(0x2b8)](_0x45e5d4[_0x369b6f(0x290)]*0x64)/0x64,'commissionUSDT':Math[_0x369b6f(0x2b8)](_0x45e5d4['commissionUSDT']*0x64)/0x64,'merchantEarningsUSDT':Math[_0x369b6f(0x2b8)](_0x45e5d4[_0x369b6f(0x1ed)]*0x64)/0x64,'paidOutUSDT':Math['round'](_0x45e5d4[_0x369b6f(0x1a0)]*0x64)/0x64,'averageCheckUSDT':Math[_0x369b6f(0x2b8)](_0x45e5d4[_0x369b6f(0x175)]*0x64)/0x64})),'dailyData':Object['values'](_0x17bb4d)['map'](_0x50eea1=>({..._0x50eea1,'turnover':Math[_0x369b6f(0x2b8)](_0x50eea1[_0x369b6f(0x243)]*0x64)/0x64,'merchantEarnings':Math['round'](_0x50eea1[_0x369b6f(0x23c)]*0x64)/0x64,'gatewayEarnings':Math[_0x369b6f(0x2b8)](_0x50eea1[_0x369b6f(0x242)]*0x64)/0x64}))[_0x369b6f(0x1e5)]((_0xd1364f,_0x3c5696)=>_0xd1364f[_0x369b6f(0x241)][_0x369b6f(0x16b)](_0x3c5696[_0x369b6f(0x241)])),'periodInfo':{'from':_0x1d53f4,'to':_0x35990c,'periodType':_0x2b8e45[_0x369b6f(0x24a)]||_0x369b6f(0x1f3),'daysCount':_0x4b61fd}};return console[_0x369b6f(0x1fb)](_0x369b6f(0x238)),console[_0x369b6f(0x1fb)](_0x369b6f(0x244)+_0x50c8d1['totalTurnover']+_0x369b6f(0x28a)),console[_0x369b6f(0x1fb)](_0x369b6f(0x22b)+_0x50c8d1[_0x369b6f(0x23c)]+_0x369b6f(0x28a)),console[_0x369b6f(0x1fb)](_0x369b6f(0x18d)+_0x50c8d1[_0x369b6f(0x242)]+_0x369b6f(0x28a)),console[_0x369b6f(0x1fb)](_0x369b6f(0x1cf)+_0x50c8d1[_0x369b6f(0x18e)]+_0x369b6f(0x28a)),console[_0x369b6f(0x1fb)](_0x369b6f(0x1bc)+_0x50c8d1[_0x369b6f(0x1c7)]+_0x369b6f(0x28a)),console[_0x369b6f(0x1fb)](_0x369b6f(0x2c4)+_0x50c8d1['totalPayments']),_0x50c8d1;}async['getMerchantsSelection'](_0x2abad7){const _0x21e505=a48_0x4987bc;console[_0x21e505(0x1fb)]('ðŸ“‹\x20Getting\x20merchants\x20selection\x20list...',{'hasPayoutHistory':_0x2abad7});let _0x19380f={};_0x2abad7&&(_0x19380f[_0x21e505(0x204)]={'some':{}});const _0x3c0e5a=await database_1[_0x21e505(0x216)][_0x21e505(0x272)]['findMany']({'where':_0x19380f,'select':{'id':!![],'username':!![],'name':!![]},'orderBy':{'name':_0x21e505(0x16d)}});return console[_0x21e505(0x1fb)](_0x21e505(0x1df)+_0x3c0e5a['length']+_0x21e505(0x251)+(_0x2abad7?'\x20with\x20payout\x20history':'')),_0x3c0e5a[_0x21e505(0x232)](_0x22cb74=>({'id':_0x22cb74['id'],'username':_0x22cb74[_0x21e505(0x186)],'name':_0x22cb74[_0x21e505(0x2a9)]}));}[a48_0x4987bc(0x28c)](_0x54ea75){const _0x897725=a48_0x4987bc,_0x30afaf={'test_gateway':_0x897725(0x296),'plisio':'Plisio','rapyd':_0x897725(0x2be),'noda':_0x897725(0x1bb),'cointopay':_0x897725(0x168),'cointopay2':_0x897725(0x225),'klyme_eu':_0x897725(0x224),'klyme_gb':_0x897725(0x19b),'klyme_de':'KLYME\x20DE','mastercard':_0x897725(0x2cc)};return _0x30afaf[_0x54ea75]||_0x54ea75;}[a48_0x4987bc(0x180)](_0x4c4f6f){const _0x53b603=a48_0x4987bc,_0x15eb91={'Test\x20Gateway':_0x53b603(0x26f),'Plisio':_0x53b603(0x27f),'Rapyd':_0x53b603(0x17b),'Noda':_0x53b603(0x298),'CoinToPay':_0x53b603(0x293),'CoinToPay2':'cointopay2','KLYME\x20EU':_0x53b603(0x188),'KLYME\x20GB':'klyme_gb','KLYME\x20DE':_0x53b603(0x269),'MasterCard':_0x53b603(0x195)};return _0x15eb91[_0x4c4f6f]||_0x4c4f6f['toLowerCase']();}async['getMerchantsAwaitingPayout'](_0x23542d){const _0x3b016c=a48_0x4987bc,{page:_0x431e95,limit:_0x34f869,minAmount:_0x475bdb,search:_0x109c48}=_0x23542d;console['log']('ðŸ“Š\x20Getting\x20merchants\x20awaiting\x20payout\x20with\x20filters:',_0x23542d);let _0x3e1d28={};_0x109c48&&(_0x3e1d28[_0x3b016c(0x2a9)]={'contains':_0x109c48,'mode':_0x3b016c(0x2ac)});const _0x338581=await database_1[_0x3b016c(0x216)][_0x3b016c(0x272)][_0x3b016c(0x1d2)]({'where':_0x3e1d28,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'balance':!![],'totalPaidOut':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'usdcErcWallet':!![],'gatewaySettings':!![],'createdAt':!![]}}),_0x4f69bf=_0x338581[_0x3b016c(0x1cb)](_0x35416e=>{const _0x565740=_0x3b016c,_0x3de37f=Math[_0x565740(0x2c9)](_0x35416e[_0x565740(0x2a4)]*0x64)/0x64;if(_0x475bdb&&_0x3de37f<_0x475bdb)return![];return _0x3de37f!==0x0;});_0x4f69bf[_0x3b016c(0x1e5)]((_0x38ac4c,_0x8e9834)=>_0x8e9834[_0x3b016c(0x2a4)]-_0x38ac4c[_0x3b016c(0x2a4)]);const _0x5c4a7c=_0x4f69bf[_0x3b016c(0x16c)],_0x49571f=(_0x431e95-0x1)*_0x34f869,_0x26193b=_0x4f69bf[_0x3b016c(0x23a)](_0x49571f,_0x49571f+_0x34f869);console[_0x3b016c(0x1fb)](_0x3b016c(0x1b1)+_0x26193b[_0x3b016c(0x16c)]+'\x20merchants\x20with\x20rounded\x20balance\x20!=\x200.00\x20(excluding\x20balances\x20that\x20round\x20to\x200.00)');const _0x28aaac=await Promise['all'](_0x26193b[_0x3b016c(0x232)](async _0x15d46c=>{const _0x1b38dc=_0x3b016c,[_0x13f955,_0x279b04,_0x504295]=await Promise['all']([database_1[_0x1b38dc(0x216)]['payment'][_0x1b38dc(0x270)]({'where':{'shopId':_0x15d46c['id'],'status':'PAID','gateway':{'not':_0x1b38dc(0x26f)}}}),database_1[_0x1b38dc(0x216)][_0x1b38dc(0x286)]['findFirst']({'where':{'shopId':_0x15d46c['id'],'status':_0x1b38dc(0x22f),'gateway':{'not':_0x1b38dc(0x26f)}},'orderBy':{'paidAt':_0x1b38dc(0x16d)},'select':{'paidAt':!![]}}),database_1[_0x1b38dc(0x216)][_0x1b38dc(0x286)][_0x1b38dc(0x17d)]({'by':[_0x1b38dc(0x2c2)],'where':{'shopId':_0x15d46c['id'],'status':_0x1b38dc(0x22f),'gateway':{'not':_0x1b38dc(0x26f)}},'_count':{'id':!![]},'_sum':{'amountUSDT':!![]}})]),_0x5ce9f7=new Date(),_0x2879db=new Date(_0x5ce9f7[_0x1b38dc(0x1b0)](),_0x5ce9f7[_0x1b38dc(0x249)](),0x1),_0x4cfd7f=new Date(_0x5ce9f7['getFullYear'](),_0x5ce9f7[_0x1b38dc(0x249)]()+0x1,0x0,0x17,0x3b,0x3b,0x3e7),[_0x3b1d7c,_0x3cd90e]=await Promise['all']([database_1['default'][_0x1b38dc(0x1ee)][_0x1b38dc(0x26b)]({'_sum':{'amount':!![]},'where':{'shopId':_0x15d46c['id'],'status':_0x1b38dc(0x1b3)}}),database_1['default'][_0x1b38dc(0x1ee)][_0x1b38dc(0x26b)]({'_sum':{'amount':!![]},'where':{'shopId':_0x15d46c['id'],'status':_0x1b38dc(0x1b3),'createdAt':{'gte':_0x2879db,'lte':_0x4cfd7f}}})]),_0x546279=_0x3b1d7c['_sum'][_0x1b38dc(0x1c2)]||0x0,_0x38c315=_0x3cd90e[_0x1b38dc(0x299)][_0x1b38dc(0x1c2)]||0x0,_0x3cbcc3=await Promise[_0x1b38dc(0x2aa)](_0x504295[_0x1b38dc(0x232)](async _0x5eabe9=>{const _0x53f47c=_0x1b38dc;let _0x588910=0x2d;if(_0x15d46c['gatewaySettings'])try{const _0xb452b8=JSON[_0x53f47c(0x193)](_0x15d46c['gatewaySettings']);for(const [_0x27f089,_0x3981d5]of Object[_0x53f47c(0x24c)](_0xb452b8)){if(_0x27f089[_0x53f47c(0x1e7)]()===_0x5eabe9[_0x53f47c(0x2c2)][_0x53f47c(0x1e7)]()){_0x588910=_0x3981d5[_0x53f47c(0x1f5)]||0xa,console[_0x53f47c(0x1fb)]('ðŸ’°\x20[PAYOUT]\x20Gateway\x20'+_0x5eabe9['gateway']+_0x53f47c(0x228)+_0x15d46c['id']+_0x53f47c(0x1af)+_0x588910+'%');break;}}}catch(_0x4d080f){console[_0x53f47c(0x2b4)](_0x53f47c(0x1d7)+_0x15d46c['id']+':',_0x4d080f);}const _0x1784cc=_0x5eabe9[_0x53f47c(0x299)]?.['amountUSDT']||0x0,_0x38c3d2=_0x1784cc*(0x1-_0x588910/0x64);return{'gateway':_0x5eabe9[_0x53f47c(0x2c2)],'count':_0x5eabe9[_0x53f47c(0x162)]?.['id']||0x0,'amountUSDT':Math[_0x53f47c(0x2b8)](_0x1784cc*0x64)/0x64,'amountAfterCommissionUSDT':Math[_0x53f47c(0x2b8)](_0x38c3d2*0x64)/0x64,'commission':_0x588910};})),_0x253e8f=_0x3cbcc3[_0x1b38dc(0x1ce)]((_0x329a91,_0x1decee)=>_0x329a91+_0x1decee['amountUSDT'],0x0),_0x33039a=_0x3cbcc3[_0x1b38dc(0x1ce)]((_0x4aea61,_0x27e7cb)=>_0x4aea61+_0x27e7cb[_0x1b38dc(0x2b0)],0x0),_0x2f3a24=_0x15d46c['balance'];return console[_0x1b38dc(0x1fb)](_0x1b38dc(0x25a)+_0x15d46c[_0x1b38dc(0x186)]+':'),console[_0x1b38dc(0x1fb)]('\x20\x20\x20ï¿½\x20Total\x20payments\x20turnover:\x20'+_0x253e8f[_0x1b38dc(0x1fd)](0x2)+_0x1b38dc(0x28f)),console[_0x1b38dc(0x1fb)](_0x1b38dc(0x1f2)+_0x33039a['toFixed'](0x2)+_0x1b38dc(0x170)),console['log'](_0x1b38dc(0x2c8)+_0x2f3a24[_0x1b38dc(0x1fd)](0x2)+_0x1b38dc(0x1ae)),console[_0x1b38dc(0x1fb)](_0x1b38dc(0x1c5)+_0x546279['toFixed'](0x2)+_0x1b38dc(0x283)),console[_0x1b38dc(0x1fb)](_0x1b38dc(0x234)+(_0x33039a-_0x546279-_0x2f3a24)[_0x1b38dc(0x1fd)](0x2)+_0x1b38dc(0x1ca)),{'id':_0x15d46c['id'],'fullName':_0x15d46c[_0x1b38dc(0x2a9)],'username':_0x15d46c[_0x1b38dc(0x186)],'telegramId':_0x15d46c['telegram'],'merchantUrl':_0x15d46c['shopUrl'],'wallets':{'usdtPolygonWallet':_0x15d46c[_0x1b38dc(0x1e4)],'usdtTrcWallet':_0x15d46c['usdtTrcWallet'],'usdtErcWallet':_0x15d46c[_0x1b38dc(0x2ca)],'usdcPolygonWallet':_0x15d46c[_0x1b38dc(0x191)],'usdcErcWallet':_0x15d46c['usdcErcWallet']},'totalAmountUSDT':Math['round'](_0x253e8f*0x64)/0x64,'totalAmountAfterCommissionUSDT':Math[_0x1b38dc(0x2b8)](_0x33039a*0x64)/0x64,'currentBalance':Math[_0x1b38dc(0x2c9)](_0x2f3a24*0x64)/0x64,'totalPayout':Math[_0x1b38dc(0x2b8)](_0x546279*0x64)/0x64,'thisMonth':Math['round'](_0x38c315*0x64)/0x64,'paymentsCount':_0x13f955,'oldestPaymentDate':_0x279b04?.[_0x1b38dc(0x23e)]||_0x15d46c[_0x1b38dc(0x1f6)],'gatewayBreakdown':_0x3cbcc3};})),_0x5cf54f=_0x28aaac['reduce']((_0x32b607,_0x7823b4)=>_0x32b607+_0x7823b4[_0x3b016c(0x239)],0x0),_0x56e5a9=_0x28aaac[_0x3b016c(0x1ce)]((_0x464c3a,_0x1f6a27)=>_0x464c3a+_0x1f6a27['totalAmountAfterCommissionUSDT'],0x0),_0xf1a63f=_0x28aaac[_0x3b016c(0x1ce)]((_0x196658,_0x310a05)=>_0x196658+_0x310a05[_0x3b016c(0x236)],0x0),_0x4b6336=_0x28aaac['reduce']((_0x71f8c7,_0x4d7121)=>_0x71f8c7+_0x4d7121['thisMonth'],0x0);return console['log'](_0x3b016c(0x2c1)+_0x5c4a7c+_0x3b016c(0x210)),console[_0x3b016c(0x1fb)](_0x3b016c(0x247)+Math[_0x3b016c(0x2b8)](_0x5cf54f*0x64)/0x64+'\x20USDT\x20(gross\x20revenue)'),console[_0x3b016c(0x1fb)](_0x3b016c(0x189)+Math[_0x3b016c(0x2b8)](_0x56e5a9*0x64)/0x64+_0x3b016c(0x28b)),console['log'](_0x3b016c(0x1f8)+Math['round'](_0xf1a63f*0x64)/0x64+'\x20USDT'),console['log']('\x20\x20\x20ðŸ“…\x20Total\x20payouts\x20(this\x20month):\x20'+Math['round'](_0x4b6336*0x64)/0x64+_0x3b016c(0x28a)),{'merchants':_0x28aaac,'pagination':{'page':_0x431e95,'limit':_0x34f869,'total':_0x5c4a7c,'totalPages':Math[_0x3b016c(0x2bf)](_0x5c4a7c/_0x34f869)},'summary':{'totalMerchants':_0x5c4a7c,'totalAmountUSDT':Math[_0x3b016c(0x2b8)](_0x5cf54f*0x64)/0x64,'totalAmountAfterCommissionUSDT':Math[_0x3b016c(0x2b8)](_0x56e5a9*0x64)/0x64,'totalPayout':Math[_0x3b016c(0x2b8)](_0xf1a63f*0x64)/0x64,'thisMonth':Math[_0x3b016c(0x2b8)](_0x4b6336*0x64)/0x64}};}async['createPayout'](_0x3c0d44){const _0x3202b7=a48_0x4987bc,{shopId:_0x22001c,amount:_0x1cde80,network:_0x2ea7ba,wallet:_0x404925,notes:_0x4c6d2c,txid:_0x3e314f,periodFrom:_0x5ebc1c,periodTo:_0x4afe73}=_0x3c0d44,_0x1560cc=await database_1[_0x3202b7(0x216)][_0x3202b7(0x258)](async _0x555fd7=>{const _0x567fcc=_0x3202b7,_0x283f57=await _0x555fd7[_0x567fcc(0x272)][_0x567fcc(0x2bc)]({'where':{'id':_0x22001c},'select':{'id':!![],'name':!![],'username':!![],'balance':!![],'totalPaidOut':!![]}});if(!_0x283f57)throw new Error(_0x567fcc(0x192));console[_0x567fcc(0x1fb)](_0x567fcc(0x230)+_0x283f57[_0x567fcc(0x186)]+':'),console[_0x567fcc(0x1fb)]('\x20\x20\x20Current\x20balance:\x20'+_0x283f57[_0x567fcc(0x2a4)][_0x567fcc(0x1fd)](0x6)+_0x567fcc(0x28a)),console[_0x567fcc(0x1fb)](_0x567fcc(0x24d)+_0x1cde80[_0x567fcc(0x1fd)](0x6)+_0x567fcc(0x28a)),console['log'](_0x567fcc(0x1e6)+_0x283f57['totalPaidOut'][_0x567fcc(0x1fd)](0x6)+_0x567fcc(0x28a));if(_0x3e314f)console[_0x567fcc(0x1fb)](_0x567fcc(0x1aa)+_0x3e314f);const _0x3bc32f=0.000001,_0x17c00b=Number(_0x283f57[_0x567fcc(0x2a4)]),_0x18c9a6=Number(_0x1cde80);console[_0x567fcc(0x1fb)](_0x567fcc(0x1ab)),console[_0x567fcc(0x1fb)](_0x567fcc(0x1d8)+_0x283f57['balance']),console[_0x567fcc(0x1fb)](_0x567fcc(0x276)+_0x17c00b),console[_0x567fcc(0x1fb)]('\x20\x20\x20Requested\x20(number):\x20'+_0x18c9a6),console[_0x567fcc(0x1fb)](_0x567fcc(0x208)+(_0x17c00b-_0x18c9a6)),console[_0x567fcc(0x1fb)](_0x567fcc(0x2bb)+_0x3bc32f);if(_0x17c00b<_0x18c9a6-_0x3bc32f)throw new Error(_0x567fcc(0x260)+_0x17c00b[_0x567fcc(0x1fd)](0x6)+_0x567fcc(0x1da)+_0x18c9a6[_0x567fcc(0x1fd)](0x6)+_0x567fcc(0x160)+(_0x17c00b-_0x18c9a6)['toFixed'](0x8)+_0x567fcc(0x28a));console[_0x567fcc(0x1fb)](_0x567fcc(0x256));const _0x2fbcdf=Math[_0x567fcc(0x199)](_0x17c00b,_0x18c9a6);let _0x3962f1=_0x404925;console[_0x567fcc(0x1fb)](_0x567fcc(0x1dc)+(_0x404925||'not\x20provided'));if(!_0x3962f1){console['log'](_0x567fcc(0x277));const _0x373a49=await _0x555fd7[_0x567fcc(0x272)][_0x567fcc(0x2bc)]({'where':{'id':_0x22001c},'select':{'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'usdcErcWallet':!![]}});console[_0x567fcc(0x1fb)]('ðŸ”\x20Shop\x20wallets:',_0x373a49);if(_0x373a49)switch(_0x2ea7ba){case _0x567fcc(0x209):_0x3962f1=_0x373a49[_0x567fcc(0x1e4)]||undefined,console[_0x567fcc(0x1fb)]('ðŸ”\x20Selected\x20polygon\x20wallet:\x20'+_0x3962f1);break;case _0x567fcc(0x282):_0x3962f1=_0x373a49[_0x567fcc(0x29b)]||undefined,console[_0x567fcc(0x1fb)](_0x567fcc(0x19c)+_0x3962f1);break;case'erc20':_0x3962f1=_0x373a49[_0x567fcc(0x2ca)]||undefined,console[_0x567fcc(0x1fb)](_0x567fcc(0x1be)+_0x3962f1);break;case _0x567fcc(0x2ae):_0x3962f1=_0x373a49['usdcPolygonWallet']||undefined,console['log'](_0x567fcc(0x25e)+_0x3962f1);break;case _0x567fcc(0x190):_0x3962f1=_0x373a49['usdcErcWallet']||undefined,console[_0x567fcc(0x1fb)]('ðŸ”\x20Selected\x20erc20_usdc\x20wallet:\x20'+_0x3962f1);break;}}else console[_0x567fcc(0x1fb)](_0x567fcc(0x266)+_0x3962f1);console['log'](_0x567fcc(0x176)+_0x2ea7ba+':\x20'+(_0x3962f1||'not\x20specified')),console[_0x567fcc(0x1fb)]('ðŸ”\x20Creating\x20payout\x20with\x20data:',{'shopId':_0x22001c,'amount':_0x2fbcdf,'network':_0x2ea7ba,'wallet':_0x3962f1,'status':_0x567fcc(0x1b3),'txid':_0x3e314f,'notes':_0x4c6d2c,'periodFrom':_0x5ebc1c?new Date(_0x5ebc1c):null,'periodTo':_0x4afe73?new Date(_0x4afe73):null});const _0x4c7ebe=await _0x555fd7['payout'][_0x567fcc(0x221)]({'data':{'shopId':_0x22001c,'amount':_0x2fbcdf,'network':_0x2ea7ba,'wallet':_0x3962f1,'status':_0x567fcc(0x1b3),'txid':_0x3e314f,'notes':_0x4c6d2c,'periodFrom':_0x5ebc1c?new Date(_0x5ebc1c):null,'periodTo':_0x4afe73?new Date(_0x4afe73):null,'createdAt':new Date(),'paidAt':new Date()}});console[_0x567fcc(0x1fb)](_0x567fcc(0x2c0),{'id':_0x4c7ebe['id'],'wallet':_0x4c7ebe[_0x567fcc(0x1f9)],'network':_0x4c7ebe[_0x567fcc(0x1d5)],'amount':_0x4c7ebe[_0x567fcc(0x1c2)]});const _0x544e3d=_0x17c00b-_0x2fbcdf,_0x4483b1=Number(_0x283f57[_0x567fcc(0x18e)])+_0x2fbcdf;return await _0x555fd7['shop'][_0x567fcc(0x280)]({'where':{'id':_0x22001c},'data':{'balance':_0x544e3d,'totalPaidOut':_0x4483b1}}),console[_0x567fcc(0x1fb)](_0x567fcc(0x2ab)+_0x283f57[_0x567fcc(0x186)]+_0x567fcc(0x2a7)),console[_0x567fcc(0x1fb)](_0x567fcc(0x22d)+_0x17c00b[_0x567fcc(0x1fd)](0x6)+_0x567fcc(0x201)+_0x544e3d[_0x567fcc(0x1fd)](0x6)+'\x20USDT\x20(-'+_0x2fbcdf[_0x567fcc(0x1fd)](0x6)+')'),console['log']('\x20\x20\x20Total\x20paid\x20out:\x20'+_0x283f57[_0x567fcc(0x18e)][_0x567fcc(0x1fd)](0x6)+'\x20->\x20'+_0x4483b1[_0x567fcc(0x1fd)](0x6)+_0x567fcc(0x16f)+_0x2fbcdf[_0x567fcc(0x1fd)](0x6)+')'),console['log'](_0x567fcc(0x29f)+_0x2fbcdf['toFixed'](0x6)+'\x20USDT'),{'payout':_0x4c7ebe,'shop':_0x283f57};});console[_0x3202b7(0x1fb)]('âœ…\x20Payout\x20created:\x20'+_0x1560cc[_0x3202b7(0x1ee)]['id']+_0x3202b7(0x228)+_0x1560cc[_0x3202b7(0x272)][_0x3202b7(0x186)]+'\x20('+_0x1560cc['payout'][_0x3202b7(0x1c2)][_0x3202b7(0x1fd)](0x6)+'\x20USDT)');try{let _0x2e500e=_0x3202b7(0x196);if(_0x1560cc[_0x3202b7(0x1ee)]['periodFrom']&&_0x1560cc['payout']['periodTo']){const _0x4534d5=new Date(_0x1560cc[_0x3202b7(0x1ee)][_0x3202b7(0x1c9)])[_0x3202b7(0x19d)](_0x3202b7(0x27e)),_0x264632=new Date(_0x1560cc[_0x3202b7(0x1ee)][_0x3202b7(0x1a8)])['toLocaleDateString'](_0x3202b7(0x27e));_0x2e500e=_0x4534d5+_0x3202b7(0x2c6)+_0x264632;}await telegramBotService_1['telegramBotService'][_0x3202b7(0x1a7)](_0x1560cc['payout'][_0x3202b7(0x18f)],{'id':_0x1560cc['payout']['id'],'amount':_0x1560cc['payout'][_0x3202b7(0x1c2)],'network':_0x1560cc['payout'][_0x3202b7(0x1d5)],'wallet':_0x1560cc[_0x3202b7(0x1ee)][_0x3202b7(0x1f9)],'period':_0x2e500e,'createdAt':_0x1560cc[_0x3202b7(0x1ee)][_0x3202b7(0x1f6)],'txid':_0x1560cc['payout'][_0x3202b7(0x26d)]}),console[_0x3202b7(0x1fb)](_0x3202b7(0x184)+_0x1560cc[_0x3202b7(0x1ee)]['id']);}catch(_0x19450f){console['error'](_0x3202b7(0x1ad)+_0x1560cc[_0x3202b7(0x1ee)]['id']+':',_0x19450f);}return{'id':_0x1560cc[_0x3202b7(0x1ee)]['id'],'shopId':_0x1560cc[_0x3202b7(0x1ee)][_0x3202b7(0x18f)],'shopName':_0x1560cc['shop']['name'],'shopUsername':_0x1560cc[_0x3202b7(0x272)]['username'],'amount':_0x1560cc['payout'][_0x3202b7(0x1c2)],'network':_0x1560cc[_0x3202b7(0x1ee)][_0x3202b7(0x1d5)],'wallet':_0x1560cc[_0x3202b7(0x1ee)][_0x3202b7(0x1f9)],'status':_0x1560cc[_0x3202b7(0x1ee)][_0x3202b7(0x1e1)],'txid':_0x1560cc[_0x3202b7(0x1ee)]['txid'],'notes':_0x1560cc[_0x3202b7(0x1ee)][_0x3202b7(0x2b6)],'periodFrom':_0x1560cc[_0x3202b7(0x1ee)][_0x3202b7(0x1c9)],'periodTo':_0x1560cc[_0x3202b7(0x1ee)]['periodTo'],'createdAt':_0x1560cc['payout']['createdAt'],'paidAt':_0x1560cc[_0x3202b7(0x1ee)][_0x3202b7(0x23e)]};}async[a48_0x4987bc(0x250)](_0x52bee6){const _0x23bbec=a48_0x4987bc,{page:_0x56b741,limit:_0x11d61e,shopId:_0x389104,network:_0x5bed72,dateFrom:_0x2f6521,dateTo:_0x92a8bf,search:_0x4ab65a}=_0x52bee6,_0x737db9=(_0x56b741-0x1)*_0x11d61e,_0x553ef1={};_0x389104&&(_0x553ef1['shopId']=_0x389104);_0x5bed72&&(_0x553ef1['network']=_0x5bed72);if(_0x2f6521||_0x92a8bf){_0x553ef1['createdAt']={};if(_0x2f6521){const _0x4ac7f6=new Date(_0x2f6521);_0x4ac7f6[_0x23bbec(0x187)](0x0,0x0,0x0,0x1),_0x553ef1[_0x23bbec(0x1f6)][_0x23bbec(0x28d)]=_0x4ac7f6,console['log'](_0x23bbec(0x2ba)+_0x4ac7f6[_0x23bbec(0x1e0)]());}if(_0x92a8bf){const _0x279f79=new Date(_0x92a8bf);_0x279f79[_0x23bbec(0x187)](0x17,0x3b,0x3b,0x3e7),_0x553ef1[_0x23bbec(0x1f6)]['lte']=_0x279f79,console[_0x23bbec(0x1fb)](_0x23bbec(0x1c6)+_0x279f79[_0x23bbec(0x1e0)]());}}_0x4ab65a&&(_0x553ef1['OR']=[{'shop':{'name':{'contains':_0x4ab65a,'mode':'insensitive'}}},{'shop':{'username':{'contains':_0x4ab65a,'mode':_0x23bbec(0x2ac)}}},{'notes':{'contains':_0x4ab65a,'mode':_0x23bbec(0x2ac)}}]);const [_0x1b7411,_0xabad9b]=await Promise['all']([database_1[_0x23bbec(0x216)][_0x23bbec(0x1ee)][_0x23bbec(0x1d2)]({'where':_0x553ef1,'skip':_0x737db9,'take':_0x11d61e,'orderBy':{'createdAt':_0x23bbec(0x1bf)},'select':{'id':!![],'shopId':!![],'amount':!![],'network':!![],'status':!![],'txid':!![],'notes':!![],'periodFrom':!![],'periodTo':!![],'createdAt':!![],'wallet':!![],'paidAt':!![],'shop':{'select':{'name':!![],'username':!![]}}}}),database_1[_0x23bbec(0x216)]['payout'][_0x23bbec(0x270)]({'where':_0x553ef1})]);return{'payouts':_0x1b7411['map'](_0x5a4671=>({'id':_0x5a4671['id'],'shopId':_0x5a4671[_0x23bbec(0x18f)],'shopName':_0x5a4671[_0x23bbec(0x272)][_0x23bbec(0x2a9)],'shopUsername':_0x5a4671[_0x23bbec(0x272)][_0x23bbec(0x186)],'amount':_0x5a4671['amount'],'network':_0x5a4671[_0x23bbec(0x1d5)],'wallet':_0x5a4671['wallet'],'status':_0x5a4671[_0x23bbec(0x1e1)],'txid':_0x5a4671['txid'],'notes':_0x5a4671[_0x23bbec(0x2b6)],'periodFrom':_0x5a4671['periodFrom'],'periodTo':_0x5a4671[_0x23bbec(0x1a8)],'createdAt':_0x5a4671['createdAt'],'paidAt':_0x5a4671[_0x23bbec(0x23e)]})),'pagination':{'page':_0x56b741,'limit':_0x11d61e,'total':_0xabad9b,'totalPages':Math[_0x23bbec(0x2bf)](_0xabad9b/_0x11d61e)}};}async[a48_0x4987bc(0x273)](_0x58e60c){const _0x3b707b=a48_0x4987bc,_0x214e2a=await database_1['default'][_0x3b707b(0x1ee)][_0x3b707b(0x2bc)]({'where':{'id':_0x58e60c},'include':{'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x214e2a)return null;return{'id':_0x214e2a['id'],'shopId':_0x214e2a['shopId'],'shopName':_0x214e2a[_0x3b707b(0x272)][_0x3b707b(0x2a9)],'shopUsername':_0x214e2a['shop'][_0x3b707b(0x186)],'amount':_0x214e2a[_0x3b707b(0x1c2)],'network':_0x214e2a[_0x3b707b(0x1d5)],'wallet':_0x214e2a[_0x3b707b(0x1f9)],'status':_0x214e2a['status'],'txid':_0x214e2a[_0x3b707b(0x26d)],'notes':_0x214e2a['notes'],'periodFrom':_0x214e2a[_0x3b707b(0x1c9)],'periodTo':_0x214e2a[_0x3b707b(0x1a8)],'createdAt':_0x214e2a[_0x3b707b(0x1f6)],'paidAt':_0x214e2a['paidAt']};}async[a48_0x4987bc(0x2b5)](_0x23c96b){const _0x21bc8e=a48_0x4987bc;await database_1[_0x21bc8e(0x216)][_0x21bc8e(0x1ee)][_0x21bc8e(0x179)]({'where':{'id':_0x23c96b}});}async[a48_0x4987bc(0x1e8)](_0x57a1c5){const _0x15b58f=a48_0x4987bc,{page:_0x574e2e,limit:_0x52bf82,status:_0x5a7070,gateway:_0x2460fe,shopId:_0x64fc5f,dateFrom:_0x362bd1,dateTo:_0x4541a0,search:_0x45af68,currency:_0x45632e,sortBy:_0x4905a1,sortOrder:_0x382fba}=_0x57a1c5,_0xba7ce9=(_0x574e2e-0x1)*_0x52bf82;console['log']('ðŸ“Š\x20Getting\x20payments\x20with\x20filters:',_0x57a1c5);const _0x140bc6=await database_1[_0x15b58f(0x216)][_0x15b58f(0x286)][_0x15b58f(0x17d)]({'by':[_0x15b58f(0x2c2)],'_count':{'gateway':!![]}});console[_0x15b58f(0x1fb)]('ðŸ“Š\x20Available\x20gateways\x20in\x20database:',_0x140bc6[_0x15b58f(0x232)](_0x3f4a4a=>_0x3f4a4a[_0x15b58f(0x2c2)]+'\x20('+_0x3f4a4a['_count']['gateway']+'\x20payments)'));if(_0x2460fe){const _0x36dd63=_0x140bc6[_0x15b58f(0x20e)](_0x3138fb=>_0x3138fb[_0x15b58f(0x2c2)][_0x15b58f(0x1e7)]()===_0x2460fe['toLowerCase']());!_0x36dd63&&_0x2460fe[_0x15b58f(0x1e7)]()!=='test_gateway'&&console[_0x15b58f(0x1fb)](_0x15b58f(0x1b8)+_0x2460fe+_0x15b58f(0x29a)+_0x140bc6[_0x15b58f(0x232)](_0xac9f52=>_0xac9f52[_0x15b58f(0x2c2)])['join'](',\x20'));}const _0x169206={};_0x5a7070&&(_0x169206['status']=_0x5a7070[_0x15b58f(0x202)]());if(!_0x2460fe)_0x169206[_0x15b58f(0x2c2)]={'not':_0x15b58f(0x26f)};else{if(_0x2460fe&&(_0x2460fe[_0x15b58f(0x1e7)]()==='test_gateway'||_0x2460fe===_0x15b58f(0x22c)))_0x169206[_0x15b58f(0x2c2)]=_0x15b58f(0x26f);else{let _0x6870e8=_0x2460fe;const _0x3c0882=(0x0,gateway_1['getGatewayNameById'])(_0x2460fe);if(_0x3c0882)_0x6870e8=_0x3c0882,console['log'](_0x15b58f(0x24b)+_0x2460fe+_0x15b58f(0x289)+_0x6870e8+'\x27');else{const _0x1439e5=(0x0,gateway_1[_0x15b58f(0x21c)])(_0x2460fe);if(_0x1439e5){const _0x12a9d7=(0x0,gateway_1['getGatewayNameById'])(_0x1439e5);_0x12a9d7&&(_0x6870e8=_0x12a9d7,console[_0x15b58f(0x1fb)]('ðŸ”„\x20Converted\x20gateway\x20name\x20\x27'+_0x2460fe+_0x15b58f(0x21a)+_0x1439e5+_0x15b58f(0x1cd)+_0x6870e8+'\x27'));}else console[_0x15b58f(0x1fb)]('ðŸ”\x20Using\x20gateway\x20\x27'+_0x2460fe+_0x15b58f(0x231));}const _0x22dbc7=await database_1[_0x15b58f(0x216)][_0x15b58f(0x286)][_0x15b58f(0x270)]({'where':{'gateway':_0x6870e8[_0x15b58f(0x1e7)]()},'take':0x1});_0x22dbc7===0x0?(console['log']('âš ï¸\x20Gateway\x20\x27'+_0x6870e8+_0x15b58f(0x22a)+_0x2460fe+'\x27)\x20not\x20found\x20in\x20database,\x20returning\x20empty\x20result'),_0x169206[_0x15b58f(0x2c2)]=_0x15b58f(0x1b4)):(_0x169206[_0x15b58f(0x2c2)]=_0x6870e8[_0x15b58f(0x1e7)](),console['log'](_0x15b58f(0x1f1)+_0x6870e8+_0x15b58f(0x22a)+_0x2460fe+'\x27)'));}}console['log'](_0x15b58f(0x17c),_0x169206[_0x15b58f(0x2c2)]);_0x64fc5f&&(_0x169206[_0x15b58f(0x18f)]=_0x64fc5f);_0x45632e&&(_0x169206['currency']=_0x45632e[_0x15b58f(0x202)](),console['log'](_0x15b58f(0x1d3)+_0x45632e[_0x15b58f(0x202)]()));if(_0x362bd1||_0x4541a0){_0x169206[_0x15b58f(0x1f6)]={};if(_0x362bd1){const _0x32fa44=new Date(_0x362bd1),_0x3fc2f2=new Date(Date[_0x15b58f(0x2b9)](_0x32fa44['getUTCFullYear'](),_0x32fa44[_0x15b58f(0x15f)](),_0x32fa44[_0x15b58f(0x235)](),0x0,0x0,0x0,0x0));_0x169206[_0x15b58f(0x1f6)][_0x15b58f(0x28d)]=_0x3fc2f2,console[_0x15b58f(0x1fb)](_0x15b58f(0x20a)+_0x3fc2f2[_0x15b58f(0x1e0)]());}if(_0x4541a0){const _0x1ef3ae=new Date(_0x4541a0),_0x36ffdd=new Date(Date[_0x15b58f(0x2b9)](_0x1ef3ae[_0x15b58f(0x23f)](),_0x1ef3ae[_0x15b58f(0x15f)](),_0x1ef3ae[_0x15b58f(0x235)](),0x17,0x3b,0x3b,0x3e7));_0x169206[_0x15b58f(0x1f6)][_0x15b58f(0x25f)]=_0x36ffdd,console[_0x15b58f(0x1fb)]('ðŸ“…\x20Date\x20to\x20filter:\x20'+_0x36ffdd[_0x15b58f(0x1e0)]());}}_0x45af68&&(_0x169206['OR']=[{'id':{'contains':_0x45af68,'mode':_0x15b58f(0x2ac)}},{'orderId':{'contains':_0x45af68,'mode':_0x15b58f(0x2ac)}},{'gatewayOrderId':{'contains':_0x45af68,'mode':_0x15b58f(0x2ac)}},{'customerEmail':{'contains':_0x45af68,'mode':_0x15b58f(0x2ac)}},{'shop':{'name':{'contains':_0x45af68,'mode':_0x15b58f(0x2ac)}}},{'shop':{'username':{'contains':_0x45af68,'mode':_0x15b58f(0x2ac)}}}]);console[_0x15b58f(0x1fb)](_0x15b58f(0x15e),JSON[_0x15b58f(0x2af)](_0x169206,null,0x2));const _0x5b9fb7=await database_1['default']['payment'][_0x15b58f(0x270)]({'where':_0x169206});console[_0x15b58f(0x1fb)]('ðŸ”\x20Total\x20payments\x20matching\x20filters:\x20'+_0x5b9fb7);let _0xe7d4ca={'createdAt':_0x15b58f(0x1bf)};if(_0x4905a1){const _0x1d38ad=[_0x15b58f(0x1c2),'createdAt','updatedAt',_0x15b58f(0x1e1),'gateway','currency'],_0x46dabb=[_0x15b58f(0x16d),_0x15b58f(0x1bf)];if(_0x1d38ad[_0x15b58f(0x1e3)](_0x4905a1)){const _0x53f6aa=_0x46dabb[_0x15b58f(0x1e3)](_0x382fba)?_0x382fba:'desc';_0xe7d4ca={[_0x4905a1]:_0x53f6aa},console[_0x15b58f(0x1fb)](_0x15b58f(0x174)+_0x4905a1+_0x15b58f(0x1ba)+_0x53f6aa+'\x20order');}}const [_0x59b6ed,_0x4f083b]=await Promise[_0x15b58f(0x2aa)]([database_1[_0x15b58f(0x216)][_0x15b58f(0x286)][_0x15b58f(0x1d2)]({'where':_0x169206,'skip':_0xba7ce9,'take':_0x52bf82,'orderBy':_0xe7d4ca,'include':{'shop':{'select':{'name':!![],'username':!![]}}}}),database_1['default']['payment'][_0x15b58f(0x270)]({'where':_0x169206})]);let _0x2ec7bc,_0x35b996;if(_0x362bd1){const _0x2c290c=new Date(_0x362bd1);_0x2ec7bc=new Date(Date[_0x15b58f(0x2b9)](_0x2c290c[_0x15b58f(0x23f)](),_0x2c290c[_0x15b58f(0x15f)](),_0x2c290c['getUTCDate'](),0x0,0x0,0x0,0x0));}else{const _0x4802f1=new Date();_0x2ec7bc=new Date(Date[_0x15b58f(0x2b9)](_0x4802f1[_0x15b58f(0x23f)](),_0x4802f1[_0x15b58f(0x15f)](),_0x4802f1[_0x15b58f(0x235)](),0x0,0x0,0x0,0x0));}if(_0x4541a0){const _0x7c22b3=new Date(_0x4541a0);_0x35b996=new Date(Date[_0x15b58f(0x2b9)](_0x7c22b3['getUTCFullYear'](),_0x7c22b3[_0x15b58f(0x15f)](),_0x7c22b3[_0x15b58f(0x235)](),0x17,0x3b,0x3b,0x3e7));}else{if(_0x362bd1){const _0x590a51=new Date(_0x362bd1);_0x35b996=new Date(Date['UTC'](_0x590a51[_0x15b58f(0x23f)](),_0x590a51[_0x15b58f(0x15f)](),_0x590a51['getUTCDate'](),0x17,0x3b,0x3b,0x3e7));}else{const _0xcc3a92=new Date();_0x35b996=new Date(Date[_0x15b58f(0x2b9)](_0xcc3a92[_0x15b58f(0x23f)](),_0xcc3a92[_0x15b58f(0x15f)](),_0xcc3a92[_0x15b58f(0x235)](),0x17,0x3b,0x3b,0x3e7));}}const _0x30f35e={'status':'PAID','createdAt':{'gte':_0x2ec7bc,'lte':_0x35b996}};_0x2460fe?_0x30f35e['gateway']=_0x169206[_0x15b58f(0x2c2)]:_0x30f35e[_0x15b58f(0x2c2)]={'not':_0x15b58f(0x26f)};_0x64fc5f&&(_0x30f35e[_0x15b58f(0x18f)]=_0x64fc5f);const _0x4696ce=await database_1['default'][_0x15b58f(0x286)]['findMany']({'where':_0x30f35e,'select':{'amountUSDT':!![],'currency':!![],'amount':!![]}}),_0x13d35c={};let _0x4a81b1=0x0;return _0x4696ce['forEach'](_0x4c3ceb=>{const _0x4dda63=_0x15b58f;_0x4c3ceb['amountUSDT']&&(_0x4a81b1+=_0x4c3ceb['amountUSDT']);if(_0x4c3ceb[_0x4dda63(0x206)]){const _0x4362b9=_0x4c3ceb['currency'][_0x4dda63(0x202)]();!_0x13d35c[_0x4362b9]&&(_0x13d35c[_0x4362b9]=0x0),_0x13d35c[_0x4362b9]+=_0x4c3ceb[_0x4dda63(0x1c2)];}}),_0x4a81b1>0x0&&(_0x13d35c[_0x15b58f(0x259)]=_0x4a81b1),{'payments':_0x59b6ed,'pagination':{'page':_0x574e2e,'limit':_0x52bf82,'total':_0x4f083b,'totalPages':Math[_0x15b58f(0x2bf)](_0x4f083b/_0x52bf82)},'statistics':_0x13d35c};}async[a48_0x4987bc(0x237)](_0x35691e){const _0x39f426=a48_0x4987bc,_0x331544=await database_1[_0x39f426(0x216)][_0x39f426(0x286)]['findUnique']({'where':{'id':_0x35691e},'select':{'id':!![],'shopId':!![],'amount':!![],'amountAfterGatewayCommissionUSDT':!![],'currency':!![],'sourceCurrency':!![],'status':!![],'gateway':!![],'orderId':!![],'gatewayOrderId':!![],'gatewayPaymentId':!![],'customerEmail':!![],'customerName':!![],'customerCountry':!![],'customerIp':!![],'customerUa':!![],'externalPaymentUrl':!![],'successUrl':!![],'failUrl':!![],'pendingUrl':!![],'whiteUrl':!![],'expiresAt':!![],'invoiceTotalSum':!![],'qrCode':!![],'qrUrl':!![],'country':!![],'language':!![],'amountIsEditable':!![],'maxPayments':!![],'rapydCustomer':!![],'cardLast4':!![],'paymentMethod':!![],'bankId':!![],'remitterIban':!![],'remitterName':!![],'failureMessage':!![],'usage':!![],'createdAt':!![],'updatedAt':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x331544)return null;return{'id':_0x331544['id'],'shopId':_0x331544[_0x39f426(0x18f)],'gateway':_0x331544[_0x39f426(0x2c2)],'amount':_0x331544[_0x39f426(0x1c2)],'currency':_0x331544['currency'],'status':_0x331544['status'],'orderId':_0x331544['orderId'],'gatewayOrderId':_0x331544['gatewayOrderId'],'customerEmail':_0x331544[_0x39f426(0x17a)],'customerName':_0x331544[_0x39f426(0x1cc)],'customerCountry':_0x331544[_0x39f426(0x1b2)],'customerIp':_0x331544[_0x39f426(0x18b)],'customerUa':_0x331544[_0x39f426(0x1b5)],'failureMessage':_0x331544['failureMessage'],'externalPaymentUrl':_0x331544[_0x39f426(0x1c3)],'successUrl':_0x331544[_0x39f426(0x297)],'failUrl':_0x331544[_0x39f426(0x2a3)],'pendingUrl':_0x331544[_0x39f426(0x19f)],'whiteUrl':_0x331544[_0x39f426(0x169)],'createdAt':_0x331544[_0x39f426(0x1f6)],'updatedAt':_0x331544[_0x39f426(0x288)],'shop':_0x331544[_0x39f426(0x272)]};}async[a48_0x4987bc(0x27d)](_0x3b6b65,_0x2b953,_0x2afc36,_0x12e818){const _0x5728bd=a48_0x4987bc,_0x5db9ad=await database_1[_0x5728bd(0x216)][_0x5728bd(0x258)](async _0xf4bca4=>{const _0x21016f=_0x5728bd,_0x209522=await _0xf4bca4[_0x21016f(0x286)][_0x21016f(0x2bc)]({'where':{'id':_0x3b6b65},'include':{'shop':{'select':{'id':!![],'name':!![],'username':!![],'balance':!![]}}}});if(!_0x209522)throw new Error('Payment\x20not\x20found');const _0x33ef7f=_0x209522[_0x21016f(0x1e1)],_0x1790af=_0x2b953[_0x21016f(0x202)]();console[_0x21016f(0x1fb)]('ðŸ”„\x20Admin\x20updating\x20payment\x20'+_0x3b6b65+'\x20status:\x20'+_0x33ef7f+_0x21016f(0x201)+_0x1790af),console['log'](_0x21016f(0x1a3)+_0x209522[_0x21016f(0x272)][_0x21016f(0x2a4)]+'\x20USDT');const _0x2d5921={'status':_0x1790af,'updatedAt':new Date(),'statusChangedBy':'admin','statusChangedAt':new Date()};_0x2afc36&&(_0x2d5921[_0x21016f(0x172)]=_0x2afc36);_0x1790af===_0x21016f(0x2b3)&&_0x12e818&&(_0x2d5921[_0x21016f(0x263)]=_0x12e818);let _0x2e0ab3=0x0,_0x5dec89=_0x209522[_0x21016f(0x272)]['balance'];if(_0x1790af==='PAID'&&_0x33ef7f!==_0x21016f(0x22f)){_0x2d5921[_0x21016f(0x23e)]=new Date();const _0x2bdc09=await currencyService_1['currencyService'][_0x21016f(0x1eb)](_0x209522[_0x21016f(0x1c2)],_0x209522[_0x21016f(0x206)]);_0x2d5921[_0x21016f(0x268)]=_0x2bdc09;let _0x398cbf=0x2d;const _0x3f4907=await _0xf4bca4[_0x21016f(0x272)][_0x21016f(0x2bc)]({'where':{'id':_0x209522['shopId']},'select':{'gatewaySettings':!![]}});if(_0x3f4907?.['gatewaySettings'])try{const _0x5f1fe5=JSON[_0x21016f(0x193)](_0x3f4907['gatewaySettings']);for(const [_0x55f6d3,_0x2205e6]of Object[_0x21016f(0x24c)](_0x5f1fe5)){if(_0x55f6d3[_0x21016f(0x1e7)]()===_0x209522[_0x21016f(0x2c2)][_0x21016f(0x1e7)]()){_0x398cbf=_0x2205e6['commission']||0xa;break;}}}catch(_0x39fcf9){console[_0x21016f(0x2b4)](_0x21016f(0x264)+_0x3b6b65+':',_0x39fcf9);}let _0x3d6fb1;_0x209522[_0x21016f(0x291)]!==null&&_0x209522[_0x21016f(0x291)]!==undefined?(_0x3d6fb1=_0x209522['amountAfterGatewayCommissionUSDT'],console['log'](_0x21016f(0x1b7)+_0x3d6fb1['toFixed'](0x6)+_0x21016f(0x2c5)+_0x3b6b65)):(_0x3d6fb1=_0x2bdc09*(0x1-_0x398cbf/0x64),console['log'](_0x21016f(0x29e)+_0x3b6b65+':\x20'+_0x398cbf+_0x21016f(0x1ac)+_0x2bdc09[_0x21016f(0x1fd)](0x6)+_0x21016f(0x28a)),_0x2d5921[_0x21016f(0x291)]=_0x3d6fb1,_0x2d5921['gatewayCommissionRate']=_0x398cbf),_0x2e0ab3=_0x3d6fb1,_0x5dec89+=_0x3d6fb1,console[_0x21016f(0x1fb)]('ðŸ’°\x20Payment\x20'+_0x3b6b65+_0x21016f(0x2a0)),console[_0x21016f(0x1fb)](_0x21016f(0x1d4)+_0x2bdc09[_0x21016f(0x1fd)](0x6)+_0x21016f(0x28a)),console[_0x21016f(0x1fb)](_0x21016f(0x29c)+_0x209522[_0x21016f(0x2c2)]+',\x20Commission:\x20'+_0x398cbf+'%'),console[_0x21016f(0x1fb)](_0x21016f(0x262)+_0x3d6fb1[_0x21016f(0x1fd)](0x6)+_0x21016f(0x294)+_0x398cbf+_0x21016f(0x284)),console['log'](_0x21016f(0x2bd)+_0x3d6fb1[_0x21016f(0x1fd)](0x6)+'\x20USDT');}else{if(_0x33ef7f==='PAID'&&_0x1790af!=='PAID'&&_0x1790af!==_0x21016f(0x2b3)){if(_0x209522['amountUSDT']){let _0x334a16=0x2d;const _0x32c428=await _0xf4bca4[_0x21016f(0x272)][_0x21016f(0x2bc)]({'where':{'id':_0x209522[_0x21016f(0x18f)]},'select':{'gatewaySettings':!![]}});if(_0x32c428?.[_0x21016f(0x252)])try{const _0x38cf9f=JSON[_0x21016f(0x193)](_0x32c428[_0x21016f(0x252)]);for(const [_0x22ef9c,_0x50a118]of Object[_0x21016f(0x24c)](_0x38cf9f)){if(_0x22ef9c['toLowerCase']()===_0x209522[_0x21016f(0x2c2)][_0x21016f(0x1e7)]()){_0x334a16=_0x50a118['commission']||0xa;break;}}}catch(_0x245838){console['error']('Error\x20parsing\x20gateway\x20settings\x20for\x20payment\x20'+_0x3b6b65+':',_0x245838);}const _0x1d9e23=_0x209522[_0x21016f(0x268)]*(0x1-_0x334a16/0x64);_0x2e0ab3=-_0x1d9e23,_0x5dec89-=_0x1d9e23,console[_0x21016f(0x1fb)](_0x21016f(0x1d4)+_0x209522[_0x21016f(0x268)]['toFixed'](0x6)+_0x21016f(0x28a)),console[_0x21016f(0x1fb)](_0x21016f(0x29c)+_0x209522[_0x21016f(0x2c2)]+_0x21016f(0x178)+_0x334a16+'%'),console[_0x21016f(0x1fb)](_0x21016f(0x20c)+_0x1d9e23[_0x21016f(0x1fd)](0x6)+_0x21016f(0x294)+_0x334a16+_0x21016f(0x284)),console[_0x21016f(0x1fb)]('\x20\x20\x20Subtracted\x20from\x20balance:\x20-'+_0x1d9e23[_0x21016f(0x1fd)](0x6)+_0x21016f(0x28a));}}}_0x1790af===_0x21016f(0x2b3)&&(console[_0x21016f(0x1fb)](_0x21016f(0x19e)),_0x12e818&&_0x12e818>0x0?(_0x2e0ab3=-_0x12e818,_0x5dec89-=_0x12e818,console['log'](_0x21016f(0x203)+_0x12e818[_0x21016f(0x1fd)](0x6)+_0x21016f(0x28e)),console[_0x21016f(0x1fb)]('ðŸ’°\x20Payment\x20amount\x20is\x20NOT\x20deducted\x20(chargeback\x20penalty\x20only)')):console[_0x21016f(0x1fb)](_0x21016f(0x261)),_0x2d5921[_0x21016f(0x263)]=_0x12e818||0x0);_0x1790af===_0x21016f(0x212)&&_0x33ef7f===_0x21016f(0x22f)&&console[_0x21016f(0x1fb)]('ðŸ”„\x20REFUND:\x20Payment\x20amount\x20already\x20deducted\x20from\x20balance');const _0x27faf9=await _0xf4bca4[_0x21016f(0x286)][_0x21016f(0x280)]({'where':{'id':_0x3b6b65},'data':_0x2d5921,'include':{'shop':{'select':{'name':!![],'username':!![]}}}});return _0x2e0ab3!==0x0&&(await _0xf4bca4['shop'][_0x21016f(0x280)]({'where':{'id':_0x209522[_0x21016f(0x18f)]},'data':{'balance':_0x5dec89}}),console[_0x21016f(0x1fb)](_0x21016f(0x2ab)+_0x209522[_0x21016f(0x18f)]+_0x21016f(0x2c3)+_0x209522[_0x21016f(0x272)][_0x21016f(0x2a4)][_0x21016f(0x1fd)](0x6)+_0x21016f(0x201)+_0x5dec89[_0x21016f(0x1fd)](0x6)+'\x20USDT\x20('+(_0x2e0ab3>0x0?'+':'')+_0x2e0ab3[_0x21016f(0x1fd)](0x6)+')')),_0x27faf9;});return{'id':_0x5db9ad['id'],'shopId':_0x5db9ad[_0x5728bd(0x18f)],'gateway':_0x5db9ad[_0x5728bd(0x2c2)],'amount':_0x5db9ad[_0x5728bd(0x1c2)],'currency':_0x5db9ad[_0x5728bd(0x206)],'status':_0x5db9ad[_0x5728bd(0x1e1)],'orderId':_0x5db9ad[_0x5728bd(0x18c)],'gatewayOrderId':_0x5db9ad['gatewayOrderId'],'customerEmail':_0x5db9ad[_0x5728bd(0x17a)],'customerName':_0x5db9ad[_0x5728bd(0x1cc)],'customerCountry':_0x5db9ad['customerCountry'],'customerIp':_0x5db9ad[_0x5728bd(0x18b)],'customerUa':_0x5db9ad[_0x5728bd(0x1b5)],'failureMessage':_0x5db9ad[_0x5728bd(0x23d)],'adminNotes':_0x5db9ad[_0x5728bd(0x172)],'chargebackAmount':_0x5db9ad[_0x5728bd(0x263)],'statusChangedBy':_0x5db9ad[_0x5728bd(0x21d)],'statusChangedAt':_0x5db9ad[_0x5728bd(0x181)],'createdAt':_0x5db9ad[_0x5728bd(0x1f6)],'updatedAt':_0x5db9ad[_0x5728bd(0x288)],'shop':_0x5db9ad['shop']};}async[a48_0x4987bc(0x1e2)](_0x579139,_0x54db79){const _0x141d45=a48_0x4987bc,_0x1eec9e=Math[_0x141d45(0x226)]()[_0x141d45(0x287)](0x24)[_0x141d45(0x2c7)](0x2,0x9);console['log']('ðŸŽ¯\x20updateUser\x20called\x20with\x20ID:\x20'+_0x1eec9e+_0x141d45(0x20f)+_0x579139);const _0x46e529={..._0x54db79};_0x54db79['password']&&_0x54db79['password']['trim']()!==''?(console['log']('ðŸ”\x20['+_0x1eec9e+_0x141d45(0x1c0)+_0x579139),_0x46e529[_0x141d45(0x182)]=await bcryptjs_1['default'][_0x141d45(0x222)](_0x54db79['password'],0xc)):(console[_0x141d45(0x1fb)](_0x141d45(0x1ff)+_0x1eec9e+_0x141d45(0x257)),delete _0x46e529[_0x141d45(0x182)]);_0x54db79['fullName']&&(_0x46e529[_0x141d45(0x2a9)]=_0x54db79[_0x141d45(0x17e)],delete _0x46e529['fullName']);_0x54db79['telegramId']&&(_0x46e529[_0x141d45(0x165)]=_0x54db79['telegramId'],delete _0x46e529[_0x141d45(0x1a4)]);_0x54db79['merchantUrl']&&(_0x46e529['shopUrl']=_0x54db79[_0x141d45(0x211)],delete _0x46e529['merchantUrl']);if(_0x54db79[_0x141d45(0x17f)]){const _0x2aaa22=_0x54db79[_0x141d45(0x17f)][_0x141d45(0x232)](_0x3d7307=>this[_0x141d45(0x180)](_0x3d7307));console[_0x141d45(0x1fb)](_0x141d45(0x2a2),_0x54db79[_0x141d45(0x17f)],'->',_0x2aaa22),_0x46e529[_0x141d45(0x198)]=JSON[_0x141d45(0x2af)](_0x2aaa22),delete _0x46e529[_0x141d45(0x17f)];}_0x54db79['gatewaySettings']&&(console[_0x141d45(0x1fb)](_0x141d45(0x2a1)+_0x1eec9e+_0x141d45(0x19a),_0x54db79[_0x141d45(0x252)]),_0x46e529['gatewaySettings']=JSON['stringify'](_0x54db79[_0x141d45(0x252)]),console[_0x141d45(0x1fb)](_0x141d45(0x2a1)+_0x1eec9e+']\x20Gateway\x20settings\x20JSON\x20string:',_0x46e529[_0x141d45(0x252)]));_0x54db79[_0x141d45(0x240)]&&(_0x54db79[_0x141d45(0x240)]['usdtPolygonWallet']!==undefined&&(_0x46e529[_0x141d45(0x1e4)]=_0x54db79[_0x141d45(0x240)][_0x141d45(0x1e4)]||null),_0x54db79[_0x141d45(0x240)][_0x141d45(0x29b)]!==undefined&&(_0x46e529['usdtTrcWallet']=_0x54db79['wallets'][_0x141d45(0x29b)]||null),_0x54db79[_0x141d45(0x240)][_0x141d45(0x2ca)]!==undefined&&(_0x46e529[_0x141d45(0x2ca)]=_0x54db79['wallets'][_0x141d45(0x2ca)]||null),_0x54db79[_0x141d45(0x240)][_0x141d45(0x191)]!==undefined&&(_0x46e529['usdcPolygonWallet']=_0x54db79[_0x141d45(0x240)]['usdcPolygonWallet']||null),delete _0x46e529['wallets']);const _0x27cc15=await database_1[_0x141d45(0x216)][_0x141d45(0x272)][_0x141d45(0x280)]({'where':{'id':_0x579139},'data':_0x46e529,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return console['log'](_0x141d45(0x25d)+_0x1eec9e+']\x20User\x20updated,\x20gatewaySettings\x20from\x20DB:',_0x27cc15[_0x141d45(0x252)]),{'id':_0x27cc15['id'],'fullName':_0x27cc15['name'],'username':_0x27cc15[_0x141d45(0x186)],'telegramId':_0x27cc15['telegram'],'merchantUrl':_0x27cc15[_0x141d45(0x161)],'gateways':_0x27cc15[_0x141d45(0x198)]?JSON['parse'](_0x27cc15[_0x141d45(0x198)]):null,'gatewaySettings':_0x27cc15['gatewaySettings']?JSON[_0x141d45(0x193)](_0x27cc15[_0x141d45(0x252)]):null,'publicKey':_0x27cc15[_0x141d45(0x167)],'wallets':{'usdtPolygonWallet':_0x27cc15[_0x141d45(0x1e4)],'usdtTrcWallet':_0x27cc15[_0x141d45(0x29b)],'usdtErcWallet':_0x27cc15[_0x141d45(0x2ca)],'usdcPolygonWallet':_0x27cc15[_0x141d45(0x191)]},'status':_0x27cc15[_0x141d45(0x1e1)],'createdAt':_0x27cc15[_0x141d45(0x1f6)]};}async[a48_0x4987bc(0x218)](_0x141673){const _0x5f0726=a48_0x4987bc,_0x4b7764=await database_1[_0x5f0726(0x216)][_0x5f0726(0x272)][_0x5f0726(0x280)]({'where':{'id':_0x141673},'data':{'status':_0x5f0726(0x26e)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x4b7764['id'],'fullName':_0x4b7764[_0x5f0726(0x2a9)],'username':_0x4b7764[_0x5f0726(0x186)],'telegramId':_0x4b7764[_0x5f0726(0x165)],'merchantUrl':_0x4b7764[_0x5f0726(0x161)],'gateways':_0x4b7764[_0x5f0726(0x198)]?JSON[_0x5f0726(0x193)](_0x4b7764[_0x5f0726(0x198)]):null,'gatewaySettings':_0x4b7764[_0x5f0726(0x252)]?JSON[_0x5f0726(0x193)](_0x4b7764[_0x5f0726(0x252)]):null,'publicKey':_0x4b7764[_0x5f0726(0x167)],'wallets':{'usdtPolygonWallet':_0x4b7764[_0x5f0726(0x1e4)],'usdtTrcWallet':_0x4b7764[_0x5f0726(0x29b)],'usdtErcWallet':_0x4b7764[_0x5f0726(0x2ca)],'usdcPolygonWallet':_0x4b7764['usdcPolygonWallet']},'status':_0x4b7764[_0x5f0726(0x1e1)],'createdAt':_0x4b7764[_0x5f0726(0x1f6)]};}async[a48_0x4987bc(0x220)](_0x5a2742){const _0x44a9ec=a48_0x4987bc,_0x4106bf=await database_1[_0x44a9ec(0x216)][_0x44a9ec(0x272)][_0x44a9ec(0x280)]({'where':{'id':_0x5a2742},'data':{'status':'ACTIVE'},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x4106bf['id'],'fullName':_0x4106bf[_0x44a9ec(0x2a9)],'username':_0x4106bf[_0x44a9ec(0x186)],'telegramId':_0x4106bf['telegram'],'merchantUrl':_0x4106bf[_0x44a9ec(0x161)],'gateways':_0x4106bf['paymentGateways']?JSON[_0x44a9ec(0x193)](_0x4106bf[_0x44a9ec(0x198)]):null,'gatewaySettings':_0x4106bf[_0x44a9ec(0x252)]?JSON['parse'](_0x4106bf[_0x44a9ec(0x252)]):null,'publicKey':_0x4106bf[_0x44a9ec(0x167)],'wallets':{'usdtPolygonWallet':_0x4106bf[_0x44a9ec(0x1e4)],'usdtTrcWallet':_0x4106bf['usdtTrcWallet'],'usdtErcWallet':_0x4106bf['usdtErcWallet'],'usdcPolygonWallet':_0x4106bf[_0x44a9ec(0x191)]},'status':_0x4106bf['status'],'createdAt':_0x4106bf['createdAt']};}async[a48_0x4987bc(0x1a1)](_0x5bcc2d){const _0x1bdd53=a48_0x4987bc,{page:_0x4b1013,limit:_0x106ba0,status:_0x1df8bc}=_0x5bcc2d,_0x4d78fb=(_0x4b1013-0x1)*_0x106ba0,_0x52d7a4={};_0x1df8bc&&(_0x52d7a4[_0x1bdd53(0x1e1)]=_0x1df8bc[_0x1bdd53(0x202)]());const [_0x5b9d3a,_0xcbff5b]=await Promise['all']([database_1[_0x1bdd53(0x216)][_0x1bdd53(0x272)][_0x1bdd53(0x1d2)]({'where':_0x52d7a4,'skip':_0x4d78fb,'take':_0x106ba0,'orderBy':{'createdAt':_0x1bdd53(0x1bf)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'usdcErcWallet':!![],'status':!![],'createdAt':!![]}}),database_1[_0x1bdd53(0x216)][_0x1bdd53(0x272)][_0x1bdd53(0x270)]({'where':_0x52d7a4})]);return{'users':_0x5b9d3a[_0x1bdd53(0x232)](_0xc6bd07=>{const _0x2f4428=_0x1bdd53,_0x3b4302=_0xc6bd07[_0x2f4428(0x198)]?JSON[_0x2f4428(0x193)](_0xc6bd07[_0x2f4428(0x198)]):null,_0xb023cf=_0x3b4302?_0x3b4302[_0x2f4428(0x232)](_0x234479=>this['getGatewayDisplayName'](_0x234479)):null;return{'id':_0xc6bd07['id'],'fullName':_0xc6bd07[_0x2f4428(0x2a9)],'username':_0xc6bd07[_0x2f4428(0x186)],'telegramId':_0xc6bd07[_0x2f4428(0x165)],'merchantUrl':_0xc6bd07[_0x2f4428(0x161)],'gateways':_0xb023cf,'gatewaySettings':_0xc6bd07[_0x2f4428(0x252)]?JSON['parse'](_0xc6bd07['gatewaySettings']):null,'publicKey':_0xc6bd07['publicKey'],'wallets':{'usdtPolygonWallet':_0xc6bd07[_0x2f4428(0x1e4)],'usdtTrcWallet':_0xc6bd07[_0x2f4428(0x29b)],'usdtErcWallet':_0xc6bd07[_0x2f4428(0x2ca)],'usdcPolygonWallet':_0xc6bd07[_0x2f4428(0x191)],'usdcErcWallet':_0xc6bd07[_0x2f4428(0x2a8)]},'status':_0xc6bd07[_0x2f4428(0x1e1)],'createdAt':_0xc6bd07[_0x2f4428(0x1f6)]};}),'pagination':{'page':_0x4b1013,'limit':_0x106ba0,'total':_0xcbff5b,'totalPages':Math['ceil'](_0xcbff5b/_0x106ba0)}};}async['getUserById'](_0x1bdb12){const _0x37a562=a48_0x4987bc,_0x40c951=await database_1[_0x37a562(0x216)][_0x37a562(0x272)][_0x37a562(0x2bc)]({'where':{'id':_0x1bdb12},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'usdcErcWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x40c951)return null;const _0x3831fa=_0x40c951['paymentGateways']?JSON[_0x37a562(0x193)](_0x40c951[_0x37a562(0x198)]):null,_0x5d77ef=_0x3831fa?_0x3831fa[_0x37a562(0x232)](_0x351184=>this[_0x37a562(0x28c)](_0x351184)):null;return _0x3831fa&&_0x5d77ef&&console['log'](_0x37a562(0x281),_0x3831fa,'->',_0x5d77ef),{'id':_0x40c951['id'],'fullName':_0x40c951[_0x37a562(0x2a9)],'username':_0x40c951[_0x37a562(0x186)],'telegramId':_0x40c951[_0x37a562(0x165)],'merchantUrl':_0x40c951['shopUrl'],'gateways':_0x5d77ef,'gatewaySettings':_0x40c951[_0x37a562(0x252)]?JSON[_0x37a562(0x193)](_0x40c951[_0x37a562(0x252)]):null,'publicKey':_0x40c951['publicKey'],'wallets':{'usdtPolygonWallet':_0x40c951[_0x37a562(0x1e4)],'usdtTrcWallet':_0x40c951[_0x37a562(0x29b)],'usdtErcWallet':_0x40c951['usdtErcWallet'],'usdcPolygonWallet':_0x40c951[_0x37a562(0x191)],'usdcErcWallet':_0x40c951[_0x37a562(0x2a8)]},'status':_0x40c951['status'],'createdAt':_0x40c951[_0x37a562(0x1f6)]};}async[a48_0x4987bc(0x164)](_0x56e089){const _0x364c60=a48_0x4987bc,{fullName:_0x4bfe11,username:_0x33a8b8,password:_0xe157ef,telegramId:_0x5c84ce,merchantUrl:_0x473adc,gateways:_0x134293,gatewaySettings:_0x31dd92,wallets:_0x21ebdf}=_0x56e089,_0x117d53=await database_1[_0x364c60(0x216)][_0x364c60(0x272)][_0x364c60(0x2bc)]({'where':{'username':_0x33a8b8}});if(_0x117d53)throw new Error(_0x364c60(0x245));if(_0x5c84ce){const _0x3f023d=await database_1[_0x364c60(0x216)][_0x364c60(0x272)][_0x364c60(0x2bc)]({'where':{'telegram':_0x5c84ce}});if(_0x3f023d)throw new Error(_0x364c60(0x1fc));}const _0x3098fe=await bcryptjs_1['default'][_0x364c60(0x222)](_0xe157ef,0xc),_0x16b833=_0x364c60(0x1d6)+crypto_1[_0x364c60(0x216)]['randomBytes'](0x20)[_0x364c60(0x287)](_0x364c60(0x200)),_0x587f88='sk_'+crypto_1[_0x364c60(0x216)][_0x364c60(0x1de)](0x20)[_0x364c60(0x287)](_0x364c60(0x200)),_0x4cbe09=_0x134293?_0x134293[_0x364c60(0x232)](_0x39b3cb=>this['getGatewayInternalName'](_0x39b3cb)):null;_0x134293&&_0x4cbe09&&console[_0x364c60(0x1fb)](_0x364c60(0x1ea),_0x134293,'->',_0x4cbe09);const _0x1d9fb7=await database_1[_0x364c60(0x216)][_0x364c60(0x272)][_0x364c60(0x221)]({'data':{'name':_0x4bfe11,'username':_0x33a8b8,'password':_0x3098fe,'telegram':_0x5c84ce,'shopUrl':_0x473adc,'paymentGateways':_0x4cbe09?JSON['stringify'](_0x4cbe09):null,'gatewaySettings':_0x31dd92?JSON[_0x364c60(0x2af)](_0x31dd92):null,'usdtPolygonWallet':_0x21ebdf?.[_0x364c60(0x1e4)]||null,'usdtTrcWallet':_0x21ebdf?.[_0x364c60(0x29b)]||null,'usdtErcWallet':_0x21ebdf?.['usdtErcWallet']||null,'usdcPolygonWallet':_0x21ebdf?.['usdcPolygonWallet']||null,'publicKey':_0x16b833,'secretKey':_0x587f88,'status':_0x364c60(0x278)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x1d9fb7['id'],'fullName':_0x1d9fb7[_0x364c60(0x2a9)],'username':_0x1d9fb7[_0x364c60(0x186)],'telegramId':_0x1d9fb7[_0x364c60(0x165)],'merchantUrl':_0x1d9fb7[_0x364c60(0x161)],'gateways':_0x1d9fb7[_0x364c60(0x198)]?JSON[_0x364c60(0x193)](_0x1d9fb7[_0x364c60(0x198)]):null,'gatewaySettings':_0x1d9fb7[_0x364c60(0x252)]?JSON[_0x364c60(0x193)](_0x1d9fb7[_0x364c60(0x252)]):null,'publicKey':_0x1d9fb7[_0x364c60(0x167)],'wallets':{'usdtPolygonWallet':_0x1d9fb7[_0x364c60(0x1e4)],'usdtTrcWallet':_0x1d9fb7['usdtTrcWallet'],'usdtErcWallet':_0x1d9fb7[_0x364c60(0x2ca)],'usdcPolygonWallet':_0x1d9fb7['usdcPolygonWallet']},'status':_0x1d9fb7['status'],'createdAt':_0x1d9fb7[_0x364c60(0x1f6)]};}async[a48_0x4987bc(0x214)](_0x3be4b9){const _0x413829=a48_0x4987bc;await database_1[_0x413829(0x216)][_0x413829(0x272)]['delete']({'where':{'id':_0x3be4b9}});}[a48_0x4987bc(0x1fa)](_0x21376d,_0x11d4cb,_0x1a97c2){const _0x747f12=a48_0x4987bc,_0x4c9ddb=new Map(),_0x442337=new Date(_0x11d4cb);while(_0x442337<=_0x1a97c2){const _0x13aeeb=_0x442337[_0x747f12(0x1e0)]()[_0x747f12(0x246)]('T')[0x0];_0x4c9ddb[_0x747f12(0x21b)](_0x13aeeb,{'revenue':0x0,'count':0x0}),_0x442337[_0x747f12(0x18a)](_0x442337[_0x747f12(0x274)]()+0x1);}for(const _0x481b62 of _0x21376d){const _0x64cb03=_0x481b62[_0x747f12(0x1f6)][_0x747f12(0x1e0)]()[_0x747f12(0x246)]('T')[0x0],_0x2687d0=_0x4c9ddb[_0x747f12(0x24f)](_0x64cb03);_0x2687d0&&(_0x2687d0['count']+=0x1,_0x481b62[_0x747f12(0x1e1)]===_0x747f12(0x22f)&&(_0x481b62[_0x747f12(0x268)]?_0x2687d0[_0x747f12(0x177)]+=_0x481b62['amountUSDT']:console[_0x747f12(0x1fb)](_0x747f12(0x27a)+_0x481b62['id']+_0x747f12(0x25c))));}const _0x4841ae=[],_0x1df22f=[];for(const [_0x5f0a61,_0x81b843]of _0x4c9ddb){_0x4841ae[_0x747f12(0x1fe)]({'date':_0x5f0a61,'amount':Math[_0x747f12(0x2b8)](_0x81b843['revenue']*0x64)/0x64}),_0x1df22f[_0x747f12(0x1fe)]({'date':_0x5f0a61,'count':_0x81b843['count']});}return{'dailyRevenue':_0x4841ae,'dailyPayments':_0x1df22f};}}function a48_0x15f6(){const _0x3d2972=['_sum','\x27\x20not\x20found.\x20Available\x20gateways:\x20','usdtTrcWallet','\x20\x20\x20Gateway:\x20','ðŸ“Š\x20Statistics\x20PAID\x20payments\x20count:\x20','ðŸ“Š\x20[ADMIN]\x20Calculating\x20commission\x20manually\x20for\x20payment\x20','\x20\x20\x20Final\x20payout\x20amount\x20used:\x20','\x20became\x20PAID:','ðŸ”§\x20[','ðŸ”„\x20Gateway\x20mapping:','failUrl','balance','__importDefault','bcryptjs','\x20balance\x20updated:','usdcErcWallet','name','all','ðŸ’°\x20Shop\x20','insensitive','\x20USDT\x20(sum\x20of\x20all\x20merchant\x20balances)','polygon_usdc','stringify','amountAfterCommissionUSDT','\x20\x20\x20ðŸŒ\x20IP:\x20','getUTCDay','CHARGEBACK','error','deletePayout','notes','\x20USDT\x20(same\x20as\x20awaiting)','round','UTC','ðŸ“…\x20Payout\x20date\x20from\x20filter:\x20','\x20\x20\x20Tolerance:\x20','findUnique','\x20\x20\x20Added\x20to\x20balance:\x20+','Rapyd','ceil','âœ…\x20Payout\x20created\x20in\x20DB:','ðŸ“Š\x20Merchants\x20with\x20rounded\x20balance\x20!=\x200.00:\x20','gateway','\x20balance\x20updated:\x20','\x20\x20\x20ï¿½ðŸ“Š\x20Total\x20payments:\x20','\x20USDT\x20for\x20payment\x20','\x20-\x20','substr','\x20\x20\x20âœ…\x20Actual\x20available\x20balance:\x20','floor','usdtErcWallet','values','MasterCard','3071376GDFEbp','ðŸ“Š\x20Final\x20WHERE\x20conditions:','getUTCMonth','\x20USDT,\x20Difference:\x20','shopUrl','_count','2020-01-01','createUser','telegram','dailyRevenue','publicKey','CoinToPay','whiteUrl','defineProperty','localeCompare','length','asc','totalCommissionRate','\x20USDT\x20(+','\x20USDT\x20(theoretical\x20net)','ðŸ“Š\x20Using\x20saved\x20values\x20for\x20payment\x20','adminNotes',',\x20refunds:\x20','ðŸ“Š\x20Sorting\x20payments\x20by\x20','averageCheckUSDT','ðŸ’³\x20Final\x20payout\x20wallet\x20for\x20','revenue',',\x20Commission:\x20','delete','customerEmail','rapyd','ðŸ“Š\x20Gateway\x20filter\x20applied:','groupBy','fullName','gateways','getGatewayInternalName','statusChangedAt','password','today','ðŸ“±\x20Telegram\x20notification\x20sent\x20for\x20payout\x20','ðŸ“Š\x20Calculating\x20payout\x20statistics...','username','setHours','klyme_eu','\x20\x20\x20âœ…\x20Total\x20net\x20balances:\x20','setDate','customerIp','orderId','\x20\x20\x20ðŸª\x20Gateway\x20earnings:\x20','totalPaidOut','shopId','erc20_usdc','usdcPolygonWallet','Shop\x20not\x20found','parse','month','mastercard','ÐÐµ\x20ÑƒÐºÐ°Ð·Ð°Ð½','3290610lqnftG','paymentGateways','min',']\x20Gateway\x20settings\x20before\x20saving:','KLYME\x20GB','ðŸ”\x20Selected\x20trc20\x20wallet:\x20','toLocaleDateString','ðŸ’¸\x20CHARGEBACK:\x20Processing\x20penalty-only\x20deduction','pendingUrl','paidOutUSDT','getAllUsers','12587067rzmBSa','ðŸ’°\x20Current\x20shop\x20balance:\x20','telegramId','thisMonth','availableBalance','sendPayoutNotification','periodTo','ðŸ“Š\x20Statistics\x20date\x20range:\x20','\x20\x20\x20Transaction\x20hash:\x20','ðŸ”\x20Balance\x20check\x20details:','%\x20from\x20','âŒ\x20Failed\x20to\x20send\x20Telegram\x20notification\x20for\x20payout\x20','\x20USDT\x20(current\x20balance\x20in\x20DB)',':\x20commission\x20=\x20','getFullYear','ðŸ’°\x20Found\x20','customerCountry','COMPLETED','NONEXISTENT_GATEWAY_FILTER','customerUa','ðŸ”„\x20Updating\x20customer\x20data\x20for\x20payment\x20','ðŸ“Š\x20[ADMIN]\x20Using\x20saved\x20amountAfterGatewayCommissionUSDT:\x20','âš ï¸\x20Requested\x20gateway\x20\x27','week','\x20in\x20','Noda','\x20\x20\x20â³\x20Pending\x20payout:\x20','\x20to\x20','ðŸ”\x20Selected\x20erc20\x20wallet:\x20','desc',']\x20Updating\x20password\x20for\x20user\x20','Payment\x20not\x20found','amount','externalPaymentUrl','awaitingPayout','\x20\x20\x20ðŸ’¸\x20Total\x20payouts:\x20','ðŸ“…\x20Payout\x20date\x20to\x20filter:\x20','pendingPayout','dateFrom','periodFrom','\x20USDT\x20(calculated\x20-\x20payouts\x20-\x20balance)','filter','customerName','\x27\x20->\x20name\x20\x27','reduce','\x20\x20\x20ï¿½\x20Total\x20paid\x20out:\x20','112IvxZrY','Error\x20processing\x20payment\x20','findMany','ðŸ’±\x20Currency\x20filter\x20applied:\x20','\x20\x20\x20Full\x20amount:\x20','network','pk_','Error\x20parsing\x20gateway\x20settings\x20for\x20shop\x20','\x20\x20\x20Available\x20(raw):\x20','1200024xaMkTO','\x20USDT,\x20Requested:\x20','year','ðŸ”\x20Initial\x20wallet\x20from\x20request:\x20','all_time','randomBytes','ðŸ“‹\x20Found\x20','toISOString','status','updateUser','includes','usdtPolygonWallet','sort','\x20\x20\x20Current\x20total\x20paid\x20out:\x20','toLowerCase','getAllPayments','EXPIRED','ðŸ”„\x20Gateway\x20mapping\x20(create):','convertToUSDT','this_week','merchantEarningsUSDT','payout','not\x20set',',\x20successful:\x20','âœ…\x20Using\x20gateway\x20filter:\x20\x27','\x20\x20\x20ðŸ”\x20Calculated\x20after\x20commission:\x20','custom','this_month','commission','createdAt','\x20PAID\x20payments','\x20\x20\x20ðŸ’¸\x20Total\x20payouts\x20(all\x20time):\x20','wallet','generateDailyStatistics','log','Telegram\x20username\x20already\x20exists','toFixed','push','ðŸ”\x20[','hex','\x20->\x20','toUpperCase','ðŸ’¸\x20CHARGEBACK\x20penalty\x20ONLY:\x20-','payouts','\x20USDT,\x20merchant:\x20','currency','\x20\x20\x20ðŸ’³\x20Total\x20payments:\x20','\x20\x20\x20Difference:\x20','polygon','ðŸ“…\x20Date\x20from\x20filter:\x20','paymentsCount','\x20\x20\x20Merchant\x20loses:\x20','yesterday','some',',\x20userId:\x20','\x20merchants','merchantUrl','REFUND','last_week','deleteUser','ðŸ“Š\x20Payout\x20statistics\x20calculated:','default','gatewayCommissionRate','suspendUser','14356eVuOfX','\x27\x20->\x20ID\x20\x27','set','getGatewayIdByName','statusChangedBy','getMerchantStatistics','\x20\x20\x20â³\x20Awaiting\x20payout:\x20','activateUser','create','hash','dailyPayments','KLYME\x20EU','Open\x20Banking\x202','random','setUTCDate','\x20for\x20shop\x20','replace','\x27\x20(from\x20\x27','\x20\x20\x20ðŸ‘¤\x20Merchant\x20earnings:\x20','0000','\x20\x20\x20Balance:\x20','ðŸ“Š\x20Getting\x20merchant\x20statistics\x20with\x20filters:','PAID','ðŸ’°\x20Creating\x20payout\x20for\x20shop\x20','\x27\x20as\x20is\x20(not\x20found\x20in\x20mappings)','map','__esModule','\x20\x20\x20ðŸ¤”\x20Difference:\x20','getUTCDate','totalPayout','getPaymentById','ðŸ“Š\x20Merchant\x20statistics\x20calculated:','totalAmountUSDT','slice',',\x20chargebacks:\x20','merchantEarnings','failureMessage','paidAt','getUTCFullYear','wallets','date','gatewayEarnings','turnover','\x20\x20\x20ðŸ’°\x20Total\x20turnover:\x20','Username\x20already\x20exists','split','\x20\x20\x20ðŸ’°\x20Total\x20payments\x20turnover:\x20','totalPayments','getMonth','period','ðŸ”„\x20Converted\x20gateway\x20ID\x20\x27','entries','\x20\x20\x20Payout\x20amount:\x20','PENDING','get','getAllPayouts','\x20merchants\x20for\x20selection','gatewaySettings','custom_','3044625uYtrwk','48UpHwJR','âœ…\x20Balance\x20check\x20passed\x20(with\x20tolerance)',']\x20Password\x20not\x20provided\x20or\x20empty,\x20skipping\x20password\x20update','$transaction','USDT','ðŸ’°\x20[PAYOUT]\x20Merchant\x20','\x20paid\x20payments\x20for\x20analysis','\x20missing\x20amountUSDT,\x20using\x20fallback\x20conversion','ðŸŽ¯\x20[','ðŸ”\x20Selected\x20polygon_usdc\x20wallet:\x20','lte','Insufficient\x20balance.\x20Available:\x20','âš ï¸\x20CHARGEBACK\x20without\x20penalty\x20amount\x20-\x20no\x20balance\x20change','\x20\x20\x20Merchant\x20gets:\x20','chargebackAmount','Error\x20parsing\x20gateway\x20settings\x20for\x20payment\x20','commissionUSDT','âœ…\x20Using\x20wallet\x20from\x20request:\x20','ðŸ“…\x20Period:\x20','amountUSDT','klyme_de','getTime','aggregate','lastMonth','txid','SUSPENDED','test_gateway','count','729197KQzVig','shop','getPayoutById','getDate','getPayoutStats','\x20\x20\x20Available\x20(number):\x20','ðŸ”\x20No\x20wallet\x20provided,\x20looking\x20up\x20from\x20shop\x20settings...','ACTIVE','dateTo','âš ï¸\x20Payment\x20','ðŸ“Š\x20Calculated\x20commission\x20rate\x20for\x20payment\x20','getSystemStatistics','updatePaymentStatus','ru-RU','plisio','update','ðŸ”„\x20Gateway\x20mapping\x20(get):','trc20','\x20USDT\x20(already\x20paid\x20out)','%\x20commission)','crypto','payment','toString','updatedAt','\x27\x20to\x20name\x20\x27','\x20USDT','\x20USDT\x20(rounded\x20to\x202\x20decimal\x20places)','getGatewayDisplayName','gte','\x20USDT\x20from\x20balance','\x20USDT\x20(gross\x20revenue)','turnoverUSDT','amountAfterGatewayCommissionUSDT','ðŸ“Š\x20Using\x20saved\x20commission\x20rate\x20for\x20payment\x20','cointopay','\x20USDT\x20(after\x20','startsWith','Test\x20Gateway','successUrl','noda'];a48_0x15f6=function(){return _0x3d2972;};return a48_0x15f6();}exports['AdminService']=AdminService;