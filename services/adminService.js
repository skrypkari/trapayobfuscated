'use strict';const a35_0x1980d3=a35_0x443d;(function(_0x20d6e1,_0x1bab29){const _0x518dbf=a35_0x443d,_0x560105=_0x20d6e1();while(!![]){try{const _0x16e8f1=parseInt(_0x518dbf(0x1e8))/0x1+parseInt(_0x518dbf(0x1aa))/0x2*(-parseInt(_0x518dbf(0x25c))/0x3)+-parseInt(_0x518dbf(0x1b6))/0x4*(-parseInt(_0x518dbf(0x220))/0x5)+-parseInt(_0x518dbf(0x23a))/0x6*(-parseInt(_0x518dbf(0x1e9))/0x7)+parseInt(_0x518dbf(0x245))/0x8*(-parseInt(_0x518dbf(0x1a4))/0x9)+-parseInt(_0x518dbf(0x190))/0xa*(parseInt(_0x518dbf(0x18c))/0xb)+-parseInt(_0x518dbf(0x200))/0xc*(-parseInt(_0x518dbf(0x1d1))/0xd);if(_0x16e8f1===_0x1bab29)break;else _0x560105['push'](_0x560105['shift']());}catch(_0x179bd0){_0x560105['push'](_0x560105['shift']());}}}(a35_0x5518,0x48271));function a35_0x443d(_0xa73a4b,_0x260ee6){const _0x551850=a35_0x5518();return a35_0x443d=function(_0x443d9c,_0x450efb){_0x443d9c=_0x443d9c-0x186;let _0x4ae911=_0x551850[_0x443d9c];return _0x4ae911;},a35_0x443d(_0xa73a4b,_0x260ee6);}var __importDefault=this&&this[a35_0x1980d3(0x20b)]||function(_0x4941ff){return _0x4941ff&&_0x4941ff['__esModule']?_0x4941ff:{'default':_0x4941ff};};Object['defineProperty'](exports,a35_0x1980d3(0x243),{'value':!![]}),exports[a35_0x1980d3(0x1dc)]=void 0x0;const database_1=__importDefault(require(a35_0x1980d3(0x242))),bcryptjs_1=__importDefault(require(a35_0x1980d3(0x1c2))),crypto_1=__importDefault(require('crypto')),currencyService_1=require(a35_0x1980d3(0x25f));class AdminService{async[a35_0x1980d3(0x1db)](){const _0x15039d=a35_0x1980d3;console[_0x15039d(0x1ee)](_0x15039d(0x1a7));const _0x53c197=await database_1['default']['shop']['aggregate']({'_sum':{'balance':!![],'totalPaidOut':!![]},'where':{'status':'ACTIVE'}}),_0x18f6a0=new Date(),_0x5568dd=new Date(_0x18f6a0[_0x15039d(0x1a0)](),_0x18f6a0[_0x15039d(0x188)](),0x1),_0xb60e35=new Date(_0x18f6a0[_0x15039d(0x1a0)](),_0x18f6a0[_0x15039d(0x188)]()+0x1,0x0,0x17,0x3b,0x3b,0x3e7),_0x5de503=await database_1[_0x15039d(0x258)][_0x15039d(0x1af)][_0x15039d(0x20a)]({'_sum':{'amount':!![]},'where':{'createdAt':{'gte':_0x5568dd,'lte':_0xb60e35},'status':_0x15039d(0x1d8)}}),_0x475869=_0x53c197['_sum'][_0x15039d(0x194)]||0x0,_0x48c942=_0x53c197[_0x15039d(0x1be)]['balance']||0x0,_0x1da3bf=_0x5de503['_sum'][_0x15039d(0x18b)]||0x0,_0x53f2f2={'totalPayout':Math['round'](_0x475869*0x64)/0x64,'awaitingPayout':Math[_0x15039d(0x1f8)](_0x48c942*0x64)/0x64,'thisMonth':Math[_0x15039d(0x1f8)](_0x1da3bf*0x64)/0x64,'availableBalance':Math[_0x15039d(0x1f8)](_0x48c942*0x64)/0x64};return console[_0x15039d(0x1ee)](_0x15039d(0x23b)),console[_0x15039d(0x1ee)]('\x20\x20\x20💰\x20Total\x20payout:\x20'+_0x53f2f2[_0x15039d(0x1f0)]+_0x15039d(0x1e0)),console[_0x15039d(0x1ee)]('\x20\x20\x20⏳\x20Awaiting\x20payout:\x20'+_0x53f2f2[_0x15039d(0x224)]+_0x15039d(0x229)),console['log']('\x20\x20\x20💵\x20Available\x20balance:\x20'+_0x53f2f2[_0x15039d(0x267)]+_0x15039d(0x250)),console[_0x15039d(0x1ee)](_0x15039d(0x186)+_0x53f2f2[_0x15039d(0x211)]+_0x15039d(0x21f)),_0x53f2f2;}async['updateCustomerData'](_0x521701,_0x4e1ce8){const _0x15a19c=a35_0x1980d3;console[_0x15a19c(0x1ee)](_0x15a19c(0x19f)+_0x521701+':',_0x4e1ce8);const _0x5c62bb=await database_1['default'][_0x15a19c(0x18d)][_0x15a19c(0x20e)]({'where':{'id':_0x521701},'select':{'id':!![],'customerEmail':!![],'customerName':!![],'customerCountry':!![],'customerIp':!![],'customerUa':!![]}});if(!_0x5c62bb)throw new Error(_0x15a19c(0x1bc));const _0x4575dc={};_0x4e1ce8[_0x15a19c(0x22b)]!==undefined&&(_0x4575dc[_0x15a19c(0x22b)]=_0x4e1ce8['customerCountry']||null);_0x4e1ce8[_0x15a19c(0x195)]!==undefined&&(_0x4575dc['customerIp']=_0x4e1ce8[_0x15a19c(0x195)]||null);_0x4e1ce8[_0x15a19c(0x225)]!==undefined&&(_0x4575dc[_0x15a19c(0x225)]=_0x4e1ce8[_0x15a19c(0x225)]||null);const _0x3bf9d0=await database_1[_0x15a19c(0x258)][_0x15a19c(0x18d)][_0x15a19c(0x1d4)]({'where':{'id':_0x521701},'data':{..._0x4575dc,'updatedAt':new Date()},'select':{'id':!![],'customerEmail':!![],'customerName':!![],'customerCountry':!![],'customerIp':!![],'customerUa':!![],'updatedAt':!![]}});return console[_0x15a19c(0x1ee)](_0x15a19c(0x1ce)+_0x521701),console[_0x15a19c(0x1ee)](_0x15a19c(0x193)+_0x5c62bb[_0x15a19c(0x22b)]+_0x15a19c(0x1ae)+_0x3bf9d0[_0x15a19c(0x22b)]),console['log'](_0x15a19c(0x1d7)+_0x5c62bb[_0x15a19c(0x195)]+_0x15a19c(0x1ae)+_0x3bf9d0[_0x15a19c(0x195)]),console['log'](_0x15a19c(0x1ad)+(_0x5c62bb[_0x15a19c(0x225)]?_0x15a19c(0x1a1):_0x15a19c(0x256))+_0x15a19c(0x1ae)+(_0x3bf9d0[_0x15a19c(0x225)]?_0x15a19c(0x1a1):'not\x20set')),_0x3bf9d0;}async['getSystemStatistics'](_0x312f14){const _0x43dd0a=a35_0x1980d3,_0x516098=new Date();let _0xa5d4ce;switch(_0x312f14){case'7d':_0xa5d4ce=new Date(_0x516098[_0x43dd0a(0x212)]()-0x7*0x18*0x3c*0x3c*0x3e8);break;case _0x43dd0a(0x19d):_0xa5d4ce=new Date(_0x516098[_0x43dd0a(0x212)]()-0x1e*0x18*0x3c*0x3c*0x3e8);break;case _0x43dd0a(0x260):_0xa5d4ce=new Date(_0x516098[_0x43dd0a(0x212)]()-0x5a*0x18*0x3c*0x3c*0x3e8);break;default:_0xa5d4ce=new Date(_0x516098['getTime']()-0x1e*0x18*0x3c*0x3c*0x3e8);}const [_0x40ed21,_0x353b25,_0x550bf3,_0x4c690f,_0x357898,_0x1cedc0]=await Promise['all']([database_1[_0x43dd0a(0x258)]['shop'][_0x43dd0a(0x1e3)](),database_1[_0x43dd0a(0x258)][_0x43dd0a(0x251)]['count']({'where':{'status':_0x43dd0a(0x266)}}),database_1[_0x43dd0a(0x258)][_0x43dd0a(0x18d)][_0x43dd0a(0x1e3)]({'where':{'createdAt':{'gte':_0xa5d4ce},'gateway':{'not':_0x43dd0a(0x25e)}}}),database_1['default'][_0x43dd0a(0x18d)][_0x43dd0a(0x1e3)]({'where':{'status':_0x43dd0a(0x19a),'createdAt':{'gte':_0xa5d4ce},'gateway':{'not':_0x43dd0a(0x25e)}}}),database_1[_0x43dd0a(0x258)][_0x43dd0a(0x18d)][_0x43dd0a(0x21c)]({'where':{'status':_0x43dd0a(0x19a),'createdAt':{'gte':_0xa5d4ce},'gateway':{'not':_0x43dd0a(0x25e)}},'select':{'amount':!![],'currency':!![]}}),database_1[_0x43dd0a(0x258)]['payment'][_0x43dd0a(0x21c)]({'where':{'gateway':{'not':_0x43dd0a(0x25e)}},'take':0xa,'orderBy':{'createdAt':_0x43dd0a(0x23c)},'include':{'shop':{'select':{'name':!![],'username':!![]}}}})]);let _0x54769d=0x0;for(const _0x138124 of _0x357898){const _0x52acdf=await currencyService_1[_0x43dd0a(0x214)][_0x43dd0a(0x226)](_0x138124[_0x43dd0a(0x18b)],_0x138124['currency']);_0x54769d+=_0x52acdf;}const _0x31cfae=_0x550bf3>0x0?_0x4c690f/_0x550bf3*0x64:0x0;return{'totalShops':_0x40ed21,'activeShops':_0x353b25,'totalPayments':_0x550bf3,'successfulPayments':_0x4c690f,'totalRevenue':Math[_0x43dd0a(0x1f8)](_0x54769d*0x64)/0x64,'conversionRate':Math[_0x43dd0a(0x1f8)](_0x31cfae*0x64)/0x64,'recentPayments':_0x1cedc0['map'](_0x12a9b0=>({'id':_0x12a9b0['id'],'amount':_0x12a9b0['amount'],'currency':_0x12a9b0['currency'],'status':_0x12a9b0['status'],'gateway':_0x12a9b0[_0x43dd0a(0x1ec)],'shop':_0x12a9b0[_0x43dd0a(0x251)],'createdAt':_0x12a9b0['createdAt']}))};}async['getMerchantStatistics'](_0x3bfbb5){const _0x5caf27=a35_0x1980d3;console[_0x5caf27(0x1ee)](_0x5caf27(0x18e),_0x3bfbb5);let _0x54c05e,_0x1050fd=new Date();if(_0x3bfbb5[_0x5caf27(0x208)]==='custom'&&_0x3bfbb5['dateFrom']&&_0x3bfbb5[_0x5caf27(0x230)])_0x54c05e=new Date(_0x3bfbb5[_0x5caf27(0x1e5)]),_0x1050fd=new Date(_0x3bfbb5[_0x5caf27(0x230)]);else{const _0x1dfdd9=new Date();switch(_0x3bfbb5['period']){case _0x5caf27(0x1ba):_0x54c05e=new Date(_0x1dfdd9['getTime']()-0x7*0x18*0x3c*0x3c*0x3e8);break;case _0x5caf27(0x21a):_0x54c05e=new Date(_0x1dfdd9[_0x5caf27(0x212)]()-0x1e*0x18*0x3c*0x3c*0x3e8);break;case'year':_0x54c05e=new Date(_0x1dfdd9[_0x5caf27(0x212)]()-0x16d*0x18*0x3c*0x3c*0x3e8);break;case _0x5caf27(0x1c8):default:_0x54c05e=new Date(_0x5caf27(0x1e7));break;}}console[_0x5caf27(0x1ee)](_0x5caf27(0x218)+_0x54c05e['toISOString']()+_0x5caf27(0x1f1)+_0x1050fd[_0x5caf27(0x1f2)]());const _0x267d05={'status':'PAID','gateway':{'not':_0x5caf27(0x25e)},'paidAt':{'gte':_0x54c05e,'lte':_0x1050fd}};_0x3bfbb5['shopId']&&(_0x267d05[_0x5caf27(0x1f7)]=_0x3bfbb5['shopId']);const _0x3fbfb2=await database_1['default'][_0x5caf27(0x18d)][_0x5caf27(0x21c)]({'where':_0x267d05,'include':{'shop':{'select':{'id':!![],'name':!![],'username':!![],'gatewaySettings':!![]}}}});console['log'](_0x5caf27(0x264)+_0x3fbfb2[_0x5caf27(0x213)]+_0x5caf27(0x1a9));const _0x1d4899={'gateway':{'not':_0x5caf27(0x25e)},'createdAt':{'gte':_0x54c05e,'lte':_0x1050fd}};_0x3bfbb5[_0x5caf27(0x1f7)]&&(_0x1d4899['shopId']=_0x3bfbb5[_0x5caf27(0x1f7)]);const _0x445592=await database_1[_0x5caf27(0x258)][_0x5caf27(0x18d)]['count']({'where':_0x1d4899});console['log'](_0x5caf27(0x202)+_0x445592+_0x5caf27(0x248)+_0x3fbfb2[_0x5caf27(0x213)]);let _0x56b486=0x0,_0x4d18cb=0x0,_0x69aaf3=0x0;const _0x180bb3={},_0x1d6072={},_0x22c4f7={};for(const _0x1bbb79 of _0x3fbfb2){try{const _0xca5911=await currencyService_1['currencyService'][_0x5caf27(0x226)](_0x1bbb79[_0x5caf27(0x18b)],_0x1bbb79['currency']);let _0x59f303={};if(_0x1bbb79[_0x5caf27(0x251)][_0x5caf27(0x234)])try{_0x59f303=JSON[_0x5caf27(0x1e2)](_0x1bbb79[_0x5caf27(0x251)][_0x5caf27(0x234)]);}catch(_0x473609){console['error'](_0x5caf27(0x22c)+_0x1bbb79['shopId']+':',_0x473609);}let _0x19a689={},_0x6e0afa=0xa;for(const [_0x5487ce,_0x3344ec]of Object['entries'](_0x59f303)){if(_0x5487ce[_0x5caf27(0x206)]()===_0x1bbb79[_0x5caf27(0x1ec)][_0x5caf27(0x206)]()){_0x19a689=_0x3344ec,_0x6e0afa=_0x3344ec[_0x5caf27(0x1b4)]||0xa;break;}}const _0x2626c3=_0xca5911*(_0x6e0afa/0x64),_0x4e3f23=_0xca5911-_0x2626c3;_0x56b486+=_0xca5911,_0x4d18cb+=_0x4e3f23,_0x69aaf3+=_0x2626c3;!_0x180bb3[_0x1bbb79['gateway']]&&(_0x180bb3[_0x1bbb79[_0x5caf27(0x1ec)]]={'gateway':_0x1bbb79['gateway'],'gatewayDisplayName':this[_0x5caf27(0x201)](_0x1bbb79[_0x5caf27(0x1ec)]),'paymentsCount':0x0,'turnoverUSDT':0x0,'commissionUSDT':0x0,'merchantEarningsUSDT':0x0,'totalCommissionRate':0x0});_0x180bb3[_0x1bbb79[_0x5caf27(0x1ec)]][_0x5caf27(0x1d0)]++,_0x180bb3[_0x1bbb79[_0x5caf27(0x1ec)]][_0x5caf27(0x1b0)]+=_0xca5911,_0x180bb3[_0x1bbb79['gateway']]['commissionUSDT']+=_0x2626c3,_0x180bb3[_0x1bbb79[_0x5caf27(0x1ec)]]['merchantEarningsUSDT']+=_0x4e3f23,_0x180bb3[_0x1bbb79[_0x5caf27(0x1ec)]][_0x5caf27(0x231)]+=_0x6e0afa;!_0x3bfbb5[_0x5caf27(0x1f7)]&&(!_0x1d6072[_0x1bbb79[_0x5caf27(0x1f7)]]&&(_0x1d6072[_0x1bbb79[_0x5caf27(0x1f7)]]={'shopId':_0x1bbb79[_0x5caf27(0x1f7)],'shopName':_0x1bbb79[_0x5caf27(0x251)][_0x5caf27(0x255)],'shopUsername':_0x1bbb79[_0x5caf27(0x251)]['username'],'paymentsCount':0x0,'turnoverUSDT':0x0,'commissionUSDT':0x0,'merchantEarningsUSDT':0x0,'paidOutUSDT':0x0,'averageCheckUSDT':0x0}),_0x1d6072[_0x1bbb79[_0x5caf27(0x1f7)]]['paymentsCount']++,_0x1d6072[_0x1bbb79['shopId']][_0x5caf27(0x1b0)]+=_0xca5911,_0x1d6072[_0x1bbb79[_0x5caf27(0x1f7)]]['commissionUSDT']+=_0x2626c3,_0x1d6072[_0x1bbb79[_0x5caf27(0x1f7)]][_0x5caf27(0x254)]+=_0x4e3f23);const _0x2e2af2=_0x1bbb79[_0x5caf27(0x19c)][_0x5caf27(0x1f2)]()[_0x5caf27(0x240)]('T')[0x0];!_0x22c4f7[_0x2e2af2]&&(_0x22c4f7[_0x2e2af2]={'date':_0x2e2af2,'turnover':0x0,'merchantEarnings':0x0,'gatewayEarnings':0x0,'paymentsCount':0x0}),_0x22c4f7[_0x2e2af2]['turnover']+=_0xca5911,_0x22c4f7[_0x2e2af2][_0x5caf27(0x1dd)]+=_0x4e3f23,_0x22c4f7[_0x2e2af2][_0x5caf27(0x219)]+=_0x2626c3,_0x22c4f7[_0x2e2af2][_0x5caf27(0x1d0)]++;}catch(_0x47772c){console['error']('Error\x20processing\x20payment\x20'+_0x1bbb79['id']+':',_0x47772c);}}Object['values'](_0x180bb3)[_0x5caf27(0x207)](_0x441abc=>{const _0x46de25=_0x5caf27;_0x441abc[_0x46de25(0x24c)]=_0x441abc[_0x46de25(0x1d0)]>0x0?_0x441abc[_0x46de25(0x231)]/_0x441abc[_0x46de25(0x1d0)]:0x0,delete _0x441abc[_0x46de25(0x231)];}),Object[_0x5caf27(0x249)](_0x1d6072)[_0x5caf27(0x207)](_0x42b108=>{const _0x38fe16=_0x5caf27;_0x42b108[_0x38fe16(0x235)]=_0x42b108[_0x38fe16(0x1d0)]>0x0?_0x42b108['turnoverUSDT']/_0x42b108[_0x38fe16(0x1d0)]:0x0;});let _0x48a252=0x0;if(_0x3bfbb5[_0x5caf27(0x1f7)]){const _0x5726dd=await database_1[_0x5caf27(0x258)][_0x5caf27(0x1af)][_0x5caf27(0x21c)]({'where':{'shopId':_0x3bfbb5['shopId'],'status':_0x5caf27(0x1d8),'createdAt':{'gte':_0x54c05e,'lte':_0x1050fd}},'select':{'amount':!![]}});_0x48a252=_0x5726dd[_0x5caf27(0x210)]((_0x2daace,_0xa83067)=>_0x2daace+_0xa83067['amount'],0x0);}const _0x58d98d=_0x445592,_0x370093=_0x3fbfb2[_0x5caf27(0x213)],_0x3ad4f9=_0x370093>0x0?_0x56b486/_0x370093:0x0,_0x32b8d9=_0x58d98d>0x0?Math[_0x5caf27(0x1f8)](_0x370093/_0x58d98d*0x2710)/0x64:0x0,_0xd7556b=Math[_0x5caf27(0x1bf)]((_0x1050fd[_0x5caf27(0x212)]()-_0x54c05e[_0x5caf27(0x212)]())/(0x3e8*0x3c*0x3c*0x18)),_0x25ecfd={'totalTurnover':Math[_0x5caf27(0x1f8)](_0x56b486*0x64)/0x64,'merchantEarnings':Math['round'](_0x4d18cb*0x64)/0x64,'gatewayEarnings':Math[_0x5caf27(0x1f8)](_0x69aaf3*0x64)/0x64,'totalPaidOut':Math['round'](_0x48a252*0x64)/0x64,'averageCheck':Math[_0x5caf27(0x1f8)](_0x3ad4f9*0x64)/0x64,'totalPayments':_0x58d98d,'successfulPayments':_0x370093,'conversionRate':_0x32b8d9,'gatewayBreakdown':Object[_0x5caf27(0x249)](_0x180bb3)[_0x5caf27(0x221)](_0x2291e4=>({..._0x2291e4,'turnoverUSDT':Math[_0x5caf27(0x1f8)](_0x2291e4[_0x5caf27(0x1b0)]*0x64)/0x64,'commissionUSDT':Math['round'](_0x2291e4[_0x5caf27(0x197)]*0x64)/0x64,'merchantEarningsUSDT':Math[_0x5caf27(0x1f8)](_0x2291e4[_0x5caf27(0x254)]*0x64)/0x64,'averageCommissionRate':Math[_0x5caf27(0x1f8)](_0x2291e4[_0x5caf27(0x24c)]*0x64)/0x64})),'merchantBreakdown':_0x3bfbb5[_0x5caf27(0x1f7)]?undefined:Object[_0x5caf27(0x249)](_0x1d6072)[_0x5caf27(0x221)](_0x2bf3d7=>({..._0x2bf3d7,'turnoverUSDT':Math[_0x5caf27(0x1f8)](_0x2bf3d7[_0x5caf27(0x1b0)]*0x64)/0x64,'commissionUSDT':Math[_0x5caf27(0x1f8)](_0x2bf3d7[_0x5caf27(0x197)]*0x64)/0x64,'merchantEarningsUSDT':Math['round'](_0x2bf3d7[_0x5caf27(0x254)]*0x64)/0x64,'paidOutUSDT':Math['round'](_0x2bf3d7['paidOutUSDT']*0x64)/0x64,'averageCheckUSDT':Math[_0x5caf27(0x1f8)](_0x2bf3d7[_0x5caf27(0x235)]*0x64)/0x64})),'dailyData':Object[_0x5caf27(0x249)](_0x22c4f7)[_0x5caf27(0x221)](_0x4d0bec=>({..._0x4d0bec,'turnover':Math[_0x5caf27(0x1f8)](_0x4d0bec[_0x5caf27(0x1fb)]*0x64)/0x64,'merchantEarnings':Math[_0x5caf27(0x1f8)](_0x4d0bec[_0x5caf27(0x1dd)]*0x64)/0x64,'gatewayEarnings':Math[_0x5caf27(0x1f8)](_0x4d0bec[_0x5caf27(0x219)]*0x64)/0x64}))['sort']((_0x544e18,_0x2e54ea)=>_0x544e18[_0x5caf27(0x1f4)][_0x5caf27(0x1fa)](_0x2e54ea[_0x5caf27(0x1f4)])),'periodInfo':{'from':_0x54c05e,'to':_0x1050fd,'periodType':_0x3bfbb5[_0x5caf27(0x208)]||'custom','daysCount':_0xd7556b}};return console[_0x5caf27(0x1ee)](_0x5caf27(0x259)),console[_0x5caf27(0x1ee)](_0x5caf27(0x237)+_0x25ecfd[_0x5caf27(0x1a5)]+_0x5caf27(0x21f)),console[_0x5caf27(0x1ee)](_0x5caf27(0x18a)+_0x25ecfd[_0x5caf27(0x1dd)]+_0x5caf27(0x21f)),console[_0x5caf27(0x1ee)](_0x5caf27(0x1a8)+_0x25ecfd[_0x5caf27(0x219)]+_0x5caf27(0x21f)),console[_0x5caf27(0x1ee)](_0x5caf27(0x223)+_0x25ecfd[_0x5caf27(0x1cb)]),_0x25ecfd;}[a35_0x1980d3(0x201)](_0x4e0041){const _0x5d1d8c=a35_0x1980d3,_0x17435b={'test_gateway':_0x5d1d8c(0x20c),'plisio':_0x5d1d8c(0x1fd),'rapyd':_0x5d1d8c(0x24d),'noda':_0x5d1d8c(0x1f9),'cointopay':'CoinToPay','klyme_eu':_0x5d1d8c(0x265),'klyme_gb':_0x5d1d8c(0x233),'klyme_de':'KLYME\x20DE'};return _0x17435b[_0x4e0041]||_0x4e0041;}async[a35_0x1980d3(0x203)](_0x2ac61d){const _0x436fc5=a35_0x1980d3,{page:_0x3f5717,limit:_0x4c3145,minAmount:_0xcae324,search:_0x30e1d9}=_0x2ac61d,_0x4de8bd=(_0x3f5717-0x1)*_0x4c3145;console[_0x436fc5(0x1ee)]('📊\x20Getting\x20merchants\x20awaiting\x20payout\x20with\x20filters:',_0x2ac61d);const _0x1918e5={'balance':{'gt':0x0},'status':_0x436fc5(0x266)};_0xcae324&&(_0x1918e5['balance'][_0x436fc5(0x1c6)]=_0xcae324);_0x30e1d9&&(_0x1918e5['OR']=[{'name':{'contains':_0x30e1d9,'mode':_0x436fc5(0x1b5)}},{'username':{'contains':_0x30e1d9,'mode':_0x436fc5(0x1b5)}}]);const [_0x4dd1c9,_0x3930a0]=await Promise[_0x436fc5(0x1c8)]([database_1[_0x436fc5(0x258)][_0x436fc5(0x251)]['findMany']({'where':_0x1918e5,'skip':_0x4de8bd,'take':_0x4c3145,'orderBy':{'balance':_0x436fc5(0x23c)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'balance':!![],'totalPaidOut':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'gatewaySettings':!![],'createdAt':!![]}}),database_1[_0x436fc5(0x258)][_0x436fc5(0x251)]['count']({'where':_0x1918e5})]);console[_0x436fc5(0x1ee)](_0x436fc5(0x264)+_0x4dd1c9[_0x436fc5(0x213)]+_0x436fc5(0x192));const _0x5445ee=await Promise[_0x436fc5(0x1c8)](_0x4dd1c9[_0x436fc5(0x221)](async _0x16e2cb=>{const _0x58ceba=_0x436fc5,[_0x522cd5,_0x123f8c,_0x82961c]=await Promise[_0x58ceba(0x1c8)]([database_1[_0x58ceba(0x258)][_0x58ceba(0x18d)][_0x58ceba(0x1e3)]({'where':{'shopId':_0x16e2cb['id'],'status':'PAID','amountUSDT':{'not':null}}}),database_1[_0x58ceba(0x258)][_0x58ceba(0x18d)][_0x58ceba(0x1a3)]({'where':{'shopId':_0x16e2cb['id'],'status':_0x58ceba(0x19a),'amountUSDT':{'not':null}},'orderBy':{'paidAt':_0x58ceba(0x1d6)},'select':{'paidAt':!![]}}),database_1['default'][_0x58ceba(0x18d)][_0x58ceba(0x21b)]({'by':[_0x58ceba(0x1ec)],'where':{'shopId':_0x16e2cb['id'],'status':_0x58ceba(0x19a),'amountUSDT':{'not':null}},'_count':{'id':!![]},'_sum':{'amountUSDT':!![]}})]),_0x3f524e=await Promise[_0x58ceba(0x1c8)](_0x82961c[_0x58ceba(0x221)](async _0x53b277=>{const _0x540b09=_0x58ceba;let _0x69d52=0xa;if(_0x16e2cb[_0x540b09(0x234)])try{const _0x208859=JSON[_0x540b09(0x1e2)](_0x16e2cb[_0x540b09(0x234)]);for(const [_0xc35d38,_0x5c62b1]of Object[_0x540b09(0x1bb)](_0x208859)){if(_0xc35d38[_0x540b09(0x206)]()===_0x53b277[_0x540b09(0x1ec)]['toLowerCase']()){_0x69d52=_0x5c62b1['commission']||0xa,console[_0x540b09(0x1ee)](_0x540b09(0x205)+_0x53b277[_0x540b09(0x1ec)]+_0x540b09(0x239)+_0x16e2cb['id']+_0x540b09(0x228)+_0x69d52+'%');break;}}}catch(_0x19e03a){console['error']('Error\x20parsing\x20gateway\x20settings\x20for\x20shop\x20'+_0x16e2cb['id']+':',_0x19e03a);}const _0x228b6d=_0x53b277[_0x540b09(0x1be)][_0x540b09(0x1da)]||0x0,_0x3e9ff9=_0x228b6d*(0x1-_0x69d52/0x64);return{'gateway':_0x53b277[_0x540b09(0x1ec)],'count':_0x53b277['_count']['id'],'amountUSDT':Math[_0x540b09(0x1f8)](_0x228b6d*0x64)/0x64,'amountAfterCommissionUSDT':Math[_0x540b09(0x1f8)](_0x3e9ff9*0x64)/0x64,'commission':_0x69d52};})),_0x36f542=_0x3f524e[_0x58ceba(0x210)]((_0x376c90,_0x17c1fc)=>_0x376c90+_0x17c1fc['amountUSDT'],0x0),_0x452ad3=_0x3f524e[_0x58ceba(0x210)]((_0x53bcb6,_0x33cf73)=>_0x53bcb6+_0x33cf73['amountAfterCommissionUSDT'],0x0);return{'id':_0x16e2cb['id'],'fullName':_0x16e2cb[_0x58ceba(0x255)],'username':_0x16e2cb['username'],'telegramId':_0x16e2cb['telegram'],'merchantUrl':_0x16e2cb[_0x58ceba(0x1cf)],'wallets':{'usdtPolygonWallet':_0x16e2cb[_0x58ceba(0x1ef)],'usdtTrcWallet':_0x16e2cb[_0x58ceba(0x1c1)],'usdtErcWallet':_0x16e2cb[_0x58ceba(0x261)],'usdcPolygonWallet':_0x16e2cb[_0x58ceba(0x189)]},'totalAmountUSDT':Math[_0x58ceba(0x1f8)](_0x36f542*0x64)/0x64,'totalAmountAfterCommissionUSDT':Math[_0x58ceba(0x1f8)](_0x452ad3*0x64)/0x64,'paymentsCount':_0x522cd5,'oldestPaymentDate':_0x123f8c?.[_0x58ceba(0x19c)]||_0x16e2cb[_0x58ceba(0x1d9)],'gatewayBreakdown':_0x3f524e};})),_0x277a5c=_0x5445ee[_0x436fc5(0x210)]((_0x203a76,_0x543323)=>_0x203a76+_0x543323[_0x436fc5(0x20d)],0x0),_0x591923=_0x5445ee['reduce']((_0x47b409,_0x2c3d5f)=>_0x47b409+_0x2c3d5f[_0x436fc5(0x25d)],0x0);return console[_0x436fc5(0x1ee)](_0x436fc5(0x215)+_0x3930a0+'\x20merchants,\x20'+Math['round'](_0x591923*0x64)/0x64+_0x436fc5(0x1ff)),{'merchants':_0x5445ee,'pagination':{'page':_0x3f5717,'limit':_0x4c3145,'total':_0x3930a0,'totalPages':Math[_0x436fc5(0x1bf)](_0x3930a0/_0x4c3145)},'summary':{'totalMerchants':_0x3930a0,'totalAmountUSDT':Math[_0x436fc5(0x1f8)](_0x277a5c*0x64)/0x64,'totalAmountAfterCommissionUSDT':Math[_0x436fc5(0x1f8)](_0x591923*0x64)/0x64}};}async['createPayout'](_0x14e09b){const _0x240606=a35_0x1980d3,{shopId:_0x150416,amount:_0x3181e0,network:_0x8e8670,wallet:_0x1d708e,notes:_0x4c88dc,txid:_0x14d3c6,periodFrom:_0x3b4593,periodTo:_0x615845}=_0x14e09b,_0xec3e0d=await database_1[_0x240606(0x258)][_0x240606(0x217)](async _0x3a4adc=>{const _0x9d078b=_0x240606,_0x1a5124=await _0x3a4adc[_0x9d078b(0x251)][_0x9d078b(0x20e)]({'where':{'id':_0x150416},'select':{'id':!![],'name':!![],'username':!![],'balance':!![],'totalPaidOut':!![]}});if(!_0x1a5124)throw new Error(_0x9d078b(0x1ac));console[_0x9d078b(0x1ee)](_0x9d078b(0x1cd)+_0x1a5124[_0x9d078b(0x1f3)]+':'),console[_0x9d078b(0x1ee)]('\x20\x20\x20Current\x20balance:\x20'+_0x1a5124['balance'][_0x9d078b(0x1c0)](0x6)+_0x9d078b(0x21f)),console[_0x9d078b(0x1ee)]('\x20\x20\x20Payout\x20amount:\x20'+_0x3181e0[_0x9d078b(0x1c0)](0x6)+'\x20USDT'),console[_0x9d078b(0x1ee)]('\x20\x20\x20Current\x20total\x20paid\x20out:\x20'+_0x1a5124['totalPaidOut'][_0x9d078b(0x1c0)](0x6)+_0x9d078b(0x21f));if(_0x14d3c6)console['log'](_0x9d078b(0x1e4)+_0x14d3c6);if(_0x1a5124[_0x9d078b(0x20f)]<_0x3181e0)throw new Error(_0x9d078b(0x222)+_0x1a5124['balance'][_0x9d078b(0x1c0)](0x6)+'\x20USDT,\x20Requested:\x20'+_0x3181e0[_0x9d078b(0x1c0)](0x6)+_0x9d078b(0x21f));let _0x13f3ae=_0x1d708e;if(!_0x13f3ae){const _0x1aa207=await _0x3a4adc['shop'][_0x9d078b(0x20e)]({'where':{'id':_0x150416},'select':{'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![]}});if(_0x1aa207)switch(_0x8e8670){case _0x9d078b(0x1b2):_0x13f3ae=_0x1aa207[_0x9d078b(0x1ef)]||undefined;break;case _0x9d078b(0x204):_0x13f3ae=_0x1aa207['usdtTrcWallet']||undefined;break;case _0x9d078b(0x21e):_0x13f3ae=_0x1aa207[_0x9d078b(0x261)]||undefined;break;case _0x9d078b(0x198):_0x13f3ae=_0x1aa207[_0x9d078b(0x189)]||undefined;break;}}console[_0x9d078b(0x1ee)](_0x9d078b(0x1c5)+_0x8e8670+':\x20'+(_0x13f3ae||'not\x20specified'));const _0x50cf85=await _0x3a4adc['payout'][_0x9d078b(0x227)]({'data':{'shopId':_0x150416,'amount':_0x3181e0,'network':_0x8e8670,'status':'COMPLETED','txid':_0x14d3c6,'notes':_0x4c88dc,'periodFrom':_0x3b4593?new Date(_0x3b4593):null,'periodTo':_0x615845?new Date(_0x615845):null,'createdAt':new Date(),'paidAt':new Date()}}),_0x1a3120=_0x1a5124[_0x9d078b(0x20f)]-_0x3181e0,_0x92da10=_0x1a5124[_0x9d078b(0x194)]+_0x3181e0;return await _0x3a4adc[_0x9d078b(0x251)][_0x9d078b(0x1d4)]({'where':{'id':_0x150416},'data':{'balance':_0x1a3120,'totalPaidOut':_0x92da10}}),console[_0x9d078b(0x1ee)]('💰\x20Shop\x20'+_0x1a5124[_0x9d078b(0x1f3)]+_0x9d078b(0x25b)),console[_0x9d078b(0x1ee)]('\x20\x20\x20Balance:\x20'+_0x1a5124[_0x9d078b(0x20f)]['toFixed'](0x6)+_0x9d078b(0x1ae)+_0x1a3120['toFixed'](0x6)+'\x20USDT\x20(-'+_0x3181e0[_0x9d078b(0x1c0)](0x6)+')'),console[_0x9d078b(0x1ee)](_0x9d078b(0x209)+_0x1a5124[_0x9d078b(0x194)][_0x9d078b(0x1c0)](0x6)+_0x9d078b(0x1ae)+_0x92da10[_0x9d078b(0x1c0)](0x6)+_0x9d078b(0x1c7)+_0x3181e0[_0x9d078b(0x1c0)](0x6)+')'),{'payout':_0x50cf85,'shop':_0x1a5124};});return console['log']('✅\x20Payout\x20created:\x20'+_0xec3e0d[_0x240606(0x1af)]['id']+'\x20for\x20shop\x20'+_0xec3e0d[_0x240606(0x251)][_0x240606(0x1f3)]+'\x20('+_0x3181e0+_0x240606(0x247)),{'id':_0xec3e0d[_0x240606(0x1af)]['id'],'shopId':_0xec3e0d['payout'][_0x240606(0x1f7)],'shopName':_0xec3e0d[_0x240606(0x251)][_0x240606(0x255)],'shopUsername':_0xec3e0d[_0x240606(0x251)][_0x240606(0x1f3)],'amount':_0xec3e0d['payout']['amount'],'network':_0xec3e0d['payout']['network'],'status':_0xec3e0d[_0x240606(0x1af)][_0x240606(0x22e)],'txid':_0xec3e0d[_0x240606(0x1af)][_0x240606(0x263)],'notes':_0xec3e0d[_0x240606(0x1af)]['notes'],'periodFrom':_0xec3e0d['payout']['periodFrom'],'periodTo':_0xec3e0d[_0x240606(0x1af)][_0x240606(0x1de)],'createdAt':_0xec3e0d[_0x240606(0x1af)][_0x240606(0x1d9)],'paidAt':_0xec3e0d[_0x240606(0x1af)][_0x240606(0x19c)]};}async['getAllPayouts'](_0x15785e){const _0x3a9c82=a35_0x1980d3,{page:_0x56a373,limit:_0x8f42df,shopId:_0x1af169,network:_0x2e6d37,dateFrom:_0x5115cd,dateTo:_0x26de22,search:_0x5e6753}=_0x15785e,_0x3f08e3=(_0x56a373-0x1)*_0x8f42df,_0x34fe39={};_0x1af169&&(_0x34fe39[_0x3a9c82(0x1f7)]=_0x1af169);_0x2e6d37&&(_0x34fe39[_0x3a9c82(0x18f)]=_0x2e6d37);(_0x5115cd||_0x26de22)&&(_0x34fe39[_0x3a9c82(0x1d9)]={},_0x5115cd&&(_0x34fe39[_0x3a9c82(0x1d9)][_0x3a9c82(0x1c6)]=new Date(_0x5115cd)),_0x26de22&&(_0x34fe39[_0x3a9c82(0x1d9)][_0x3a9c82(0x22a)]=new Date(_0x26de22)));_0x5e6753&&(_0x34fe39['OR']=[{'shop':{'name':{'contains':_0x5e6753,'mode':_0x3a9c82(0x1b5)}}},{'shop':{'username':{'contains':_0x5e6753,'mode':_0x3a9c82(0x1b5)}}},{'notes':{'contains':_0x5e6753,'mode':_0x3a9c82(0x1b5)}}]);const [_0x18cf91,_0x4015f1]=await Promise[_0x3a9c82(0x1c8)]([database_1['default']['payout'][_0x3a9c82(0x21c)]({'where':_0x34fe39,'skip':_0x3f08e3,'take':_0x8f42df,'orderBy':{'createdAt':_0x3a9c82(0x23c)},'include':{'shop':{'select':{'name':!![],'username':!![]}}}}),database_1[_0x3a9c82(0x258)][_0x3a9c82(0x1af)][_0x3a9c82(0x1e3)]({'where':_0x34fe39})]);return{'payouts':_0x18cf91[_0x3a9c82(0x221)](_0x448b8a=>({'id':_0x448b8a['id'],'shopId':_0x448b8a[_0x3a9c82(0x1f7)],'shopName':_0x448b8a[_0x3a9c82(0x251)]['name'],'shopUsername':_0x448b8a[_0x3a9c82(0x251)]['username'],'amount':_0x448b8a[_0x3a9c82(0x18b)],'network':_0x448b8a['network'],'status':_0x448b8a[_0x3a9c82(0x22e)],'txid':_0x448b8a[_0x3a9c82(0x263)],'notes':_0x448b8a[_0x3a9c82(0x246)],'periodFrom':_0x448b8a[_0x3a9c82(0x24e)],'periodTo':_0x448b8a['periodTo'],'createdAt':_0x448b8a['createdAt'],'paidAt':_0x448b8a[_0x3a9c82(0x19c)]})),'pagination':{'page':_0x56a373,'limit':_0x8f42df,'total':_0x4015f1,'totalPages':Math['ceil'](_0x4015f1/_0x8f42df)}};}async[a35_0x1980d3(0x196)](_0x2c5eb0){const _0x40068e=a35_0x1980d3,_0x46a56f=await database_1['default']['payout'][_0x40068e(0x20e)]({'where':{'id':_0x2c5eb0},'include':{'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x46a56f)return null;return{'id':_0x46a56f['id'],'shopId':_0x46a56f[_0x40068e(0x1f7)],'shopName':_0x46a56f[_0x40068e(0x251)][_0x40068e(0x255)],'shopUsername':_0x46a56f[_0x40068e(0x251)][_0x40068e(0x1f3)],'amount':_0x46a56f[_0x40068e(0x18b)],'network':_0x46a56f['network'],'status':_0x46a56f[_0x40068e(0x22e)],'txid':_0x46a56f['txid'],'notes':_0x46a56f[_0x40068e(0x246)],'periodFrom':_0x46a56f[_0x40068e(0x24e)],'periodTo':_0x46a56f[_0x40068e(0x1de)],'createdAt':_0x46a56f[_0x40068e(0x1d9)],'paidAt':_0x46a56f[_0x40068e(0x19c)]};}async[a35_0x1980d3(0x1ca)](_0x23c2a8){const _0x3ca402=a35_0x1980d3;await database_1[_0x3ca402(0x258)][_0x3ca402(0x1af)][_0x3ca402(0x1cc)]({'where':{'id':_0x23c2a8}});}async['getAllPayments'](_0x40e642){const _0x1f9971=a35_0x1980d3,{page:_0x498509,limit:_0x5cfc60,status:_0x397070,gateway:_0x1bec43,shopId:_0x247b15,dateFrom:_0x3170ea,dateTo:_0x41f711,search:_0x4fe77b}=_0x40e642,_0x2fb65f=(_0x498509-0x1)*_0x5cfc60,_0x57cd0c={};_0x397070&&(_0x57cd0c['status']=_0x397070[_0x1f9971(0x1df)]());_0x1bec43&&(_0x57cd0c[_0x1f9971(0x1ec)]=_0x1bec43['toLowerCase']());_0x57cd0c['gateway']=_0x57cd0c[_0x1f9971(0x1ec)]?_0x57cd0c[_0x1f9971(0x1ec)]:{'not':_0x1f9971(0x25e)};if(typeof _0x57cd0c[_0x1f9971(0x1ec)]===_0x1f9971(0x22f)&&_0x57cd0c[_0x1f9971(0x1ec)]!==_0x1f9971(0x25e)){}else{if(typeof _0x57cd0c[_0x1f9971(0x1ec)]===_0x1f9971(0x22f)&&_0x57cd0c[_0x1f9971(0x1ec)]===_0x1f9971(0x25e)){}else _0x57cd0c['gateway']={'not':'test_gateway'};}_0x247b15&&(_0x57cd0c[_0x1f9971(0x1f7)]=_0x247b15);(_0x3170ea||_0x41f711)&&(_0x57cd0c['createdAt']={},_0x3170ea&&(_0x57cd0c['createdAt'][_0x1f9971(0x1c6)]=new Date(_0x3170ea)),_0x41f711&&(_0x57cd0c[_0x1f9971(0x1d9)]['lte']=new Date(_0x41f711)));_0x4fe77b&&(_0x57cd0c['OR']=[{'orderId':{'contains':_0x4fe77b,'mode':_0x1f9971(0x1b5)}},{'gatewayOrderId':{'contains':_0x4fe77b,'mode':_0x1f9971(0x1b5)}},{'customerEmail':{'contains':_0x4fe77b,'mode':_0x1f9971(0x1b5)}},{'shop':{'name':{'contains':_0x4fe77b,'mode':_0x1f9971(0x1b5)}}},{'shop':{'username':{'contains':_0x4fe77b,'mode':'insensitive'}}}]);const [_0x244d0a,_0x407e9c]=await Promise[_0x1f9971(0x1c8)]([database_1[_0x1f9971(0x258)][_0x1f9971(0x18d)][_0x1f9971(0x21c)]({'where':_0x57cd0c,'skip':_0x2fb65f,'take':_0x5cfc60,'orderBy':{'createdAt':_0x1f9971(0x23c)},'include':{'shop':{'select':{'name':!![],'username':!![]}}}}),database_1[_0x1f9971(0x258)][_0x1f9971(0x18d)][_0x1f9971(0x1e3)]({'where':_0x57cd0c})]);return{'payments':_0x244d0a[_0x1f9971(0x221)](_0x36c7ca=>({'id':_0x36c7ca['id'],'shopId':_0x36c7ca[_0x1f9971(0x1f7)],'gateway':_0x36c7ca[_0x1f9971(0x1ec)],'amount':_0x36c7ca[_0x1f9971(0x18b)],'currency':_0x36c7ca[_0x1f9971(0x1c4)],'status':_0x36c7ca[_0x1f9971(0x22e)],'orderId':_0x36c7ca[_0x1f9971(0x1d2)],'gatewayOrderId':_0x36c7ca[_0x1f9971(0x1d5)],'customerEmail':_0x36c7ca['customerEmail'],'customerName':_0x36c7ca['customerName'],'customerCountry':_0x36c7ca[_0x1f9971(0x22b)],'customerIp':_0x36c7ca[_0x1f9971(0x195)],'customerUa':_0x36c7ca['customerUa'],'failureMessage':_0x36c7ca[_0x1f9971(0x253)],'createdAt':_0x36c7ca[_0x1f9971(0x1d9)],'updatedAt':_0x36c7ca[_0x1f9971(0x187)],'shop':_0x36c7ca[_0x1f9971(0x251)]})),'pagination':{'page':_0x498509,'limit':_0x5cfc60,'total':_0x407e9c,'totalPages':Math[_0x1f9971(0x1bf)](_0x407e9c/_0x5cfc60)}};}async[a35_0x1980d3(0x1c3)](_0x5a142e){const _0x5ae2a7=a35_0x1980d3,_0x1f6801=await database_1[_0x5ae2a7(0x258)]['payment']['findUnique']({'where':{'id':_0x5a142e},'include':{'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x1f6801)return null;return{'id':_0x1f6801['id'],'shopId':_0x1f6801[_0x5ae2a7(0x1f7)],'gateway':_0x1f6801[_0x5ae2a7(0x1ec)],'amount':_0x1f6801['amount'],'currency':_0x1f6801[_0x5ae2a7(0x1c4)],'status':_0x1f6801[_0x5ae2a7(0x22e)],'orderId':_0x1f6801['orderId'],'gatewayOrderId':_0x1f6801[_0x5ae2a7(0x1d5)],'customerEmail':_0x1f6801['customerEmail'],'customerName':_0x1f6801['customerName'],'customerCountry':_0x1f6801[_0x5ae2a7(0x22b)],'customerIp':_0x1f6801[_0x5ae2a7(0x195)],'customerUa':_0x1f6801[_0x5ae2a7(0x225)],'failureMessage':_0x1f6801[_0x5ae2a7(0x253)],'externalPaymentUrl':_0x1f6801[_0x5ae2a7(0x1fc)],'successUrl':_0x1f6801[_0x5ae2a7(0x1d3)],'failUrl':_0x1f6801[_0x5ae2a7(0x1c9)],'pendingUrl':_0x1f6801[_0x5ae2a7(0x1b9)],'whiteUrl':_0x1f6801[_0x5ae2a7(0x1a2)],'createdAt':_0x1f6801[_0x5ae2a7(0x1d9)],'updatedAt':_0x1f6801[_0x5ae2a7(0x187)],'shop':_0x1f6801[_0x5ae2a7(0x251)]};}async['updatePaymentStatus'](_0x2c142d,_0x5b66cb,_0x3d876b,_0x4d1628){const _0x4869fd=a35_0x1980d3,_0x471fc7=await database_1['default'][_0x4869fd(0x217)](async _0x36c05c=>{const _0x12c163=_0x4869fd,_0x449e0c=await _0x36c05c[_0x12c163(0x18d)][_0x12c163(0x20e)]({'where':{'id':_0x2c142d},'include':{'shop':{'select':{'id':!![],'name':!![],'username':!![],'balance':!![]}}}});if(!_0x449e0c)throw new Error(_0x12c163(0x1bc));const _0x47a842=_0x449e0c[_0x12c163(0x22e)],_0x27a0d8=_0x5b66cb['toUpperCase']();console[_0x12c163(0x1ee)](_0x12c163(0x1a6)+_0x2c142d+'\x20status:\x20'+_0x47a842+_0x12c163(0x1ae)+_0x27a0d8),console[_0x12c163(0x1ee)]('💰\x20Current\x20shop\x20balance:\x20'+_0x449e0c[_0x12c163(0x251)][_0x12c163(0x20f)]+_0x12c163(0x21f));const _0x442392={'status':_0x27a0d8,'updatedAt':new Date(),'statusChangedBy':_0x12c163(0x191),'statusChangedAt':new Date()};_0x3d876b&&(_0x442392[_0x12c163(0x24f)]=_0x3d876b);_0x27a0d8===_0x12c163(0x24b)&&_0x4d1628&&(_0x442392['chargebackAmount']=_0x4d1628);let _0xc10e2c=0x0,_0x339ac5=_0x449e0c[_0x12c163(0x251)]['balance'];if(_0x27a0d8===_0x12c163(0x19a)&&_0x47a842!==_0x12c163(0x19a)){_0x442392['paidAt']=new Date();const _0x24a220=await currencyService_1[_0x12c163(0x214)][_0x12c163(0x226)](_0x449e0c['amount'],_0x449e0c[_0x12c163(0x1c4)]);_0x442392[_0x12c163(0x1da)]=_0x24a220,_0xc10e2c=_0x24a220,_0x339ac5+=_0x24a220,console[_0x12c163(0x1ee)](_0x12c163(0x199)+_0x2c142d+_0x12c163(0x232)+_0x24a220[_0x12c163(0x1c0)](0x6)+_0x12c163(0x257));}else _0x47a842===_0x12c163(0x19a)&&_0x27a0d8!==_0x12c163(0x19a)&&(_0x449e0c[_0x12c163(0x1da)]&&(_0xc10e2c=-_0x449e0c[_0x12c163(0x1da)],_0x339ac5-=_0x449e0c['amountUSDT'],_0x442392[_0x12c163(0x1da)]=null,console[_0x12c163(0x1ee)](_0x12c163(0x199)+_0x2c142d+'\x20no\x20longer\x20PAID:\x20-'+_0x449e0c[_0x12c163(0x1da)]['toFixed'](0x6)+_0x12c163(0x1b1))));if(_0x27a0d8===_0x12c163(0x24b)){if(_0x47a842===_0x12c163(0x19a)&&_0x449e0c[_0x12c163(0x1da)]){}_0x4d1628&&_0x4d1628>0x0&&(_0xc10e2c-=_0x4d1628,_0x339ac5-=_0x4d1628,console[_0x12c163(0x1ee)](_0x12c163(0x1ea)+_0x4d1628['toFixed'](0x6)+_0x12c163(0x1b1)));}_0x27a0d8===_0x12c163(0x1fe)&&_0x47a842===_0x12c163(0x19a)&&console[_0x12c163(0x1ee)](_0x12c163(0x19b));const _0x28d965=await _0x36c05c[_0x12c163(0x18d)][_0x12c163(0x1d4)]({'where':{'id':_0x2c142d},'data':_0x442392,'include':{'shop':{'select':{'name':!![],'username':!![]}}}});return _0xc10e2c!==0x0&&(await _0x36c05c[_0x12c163(0x251)][_0x12c163(0x1d4)]({'where':{'id':_0x449e0c[_0x12c163(0x1f7)]},'data':{'balance':_0x339ac5}}),console[_0x12c163(0x1ee)]('💰\x20Shop\x20'+_0x449e0c[_0x12c163(0x1f7)]+_0x12c163(0x1e6)+_0x449e0c[_0x12c163(0x251)]['balance'][_0x12c163(0x1c0)](0x6)+_0x12c163(0x1ae)+_0x339ac5[_0x12c163(0x1c0)](0x6)+_0x12c163(0x1bd)+(_0xc10e2c>0x0?'+':'')+_0xc10e2c[_0x12c163(0x1c0)](0x6)+')')),_0x28d965;});return{'id':_0x471fc7['id'],'shopId':_0x471fc7['shopId'],'gateway':_0x471fc7[_0x4869fd(0x1ec)],'amount':_0x471fc7[_0x4869fd(0x18b)],'currency':_0x471fc7[_0x4869fd(0x1c4)],'status':_0x471fc7[_0x4869fd(0x22e)],'orderId':_0x471fc7['orderId'],'gatewayOrderId':_0x471fc7[_0x4869fd(0x1d5)],'customerEmail':_0x471fc7[_0x4869fd(0x23f)],'customerName':_0x471fc7[_0x4869fd(0x1b7)],'customerCountry':_0x471fc7['customerCountry'],'customerIp':_0x471fc7[_0x4869fd(0x195)],'customerUa':_0x471fc7[_0x4869fd(0x225)],'failureMessage':_0x471fc7['failureMessage'],'adminNotes':_0x471fc7['adminNotes'],'chargebackAmount':_0x471fc7[_0x4869fd(0x19e)],'statusChangedBy':_0x471fc7['statusChangedBy'],'statusChangedAt':_0x471fc7[_0x4869fd(0x22d)],'createdAt':_0x471fc7[_0x4869fd(0x1d9)],'updatedAt':_0x471fc7[_0x4869fd(0x187)],'shop':_0x471fc7['shop']};}async[a35_0x1980d3(0x1ed)](_0x3fee73,_0x8a3e5b){const _0x19b835=a35_0x1980d3,_0x2307c1={..._0x8a3e5b};_0x8a3e5b[_0x19b835(0x1ab)]&&(_0x2307c1[_0x19b835(0x1ab)]=await bcryptjs_1[_0x19b835(0x258)][_0x19b835(0x216)](_0x8a3e5b[_0x19b835(0x1ab)],0xc));_0x8a3e5b[_0x19b835(0x252)]&&(_0x2307c1[_0x19b835(0x255)]=_0x8a3e5b[_0x19b835(0x252)],delete _0x2307c1[_0x19b835(0x252)]);_0x8a3e5b[_0x19b835(0x1b3)]&&(_0x2307c1[_0x19b835(0x236)]=_0x8a3e5b[_0x19b835(0x1b3)],delete _0x2307c1[_0x19b835(0x1b3)]);_0x8a3e5b[_0x19b835(0x23e)]&&(_0x2307c1[_0x19b835(0x1cf)]=_0x8a3e5b[_0x19b835(0x23e)],delete _0x2307c1['merchantUrl']);_0x8a3e5b[_0x19b835(0x24a)]&&(_0x2307c1['paymentGateways']=JSON['stringify'](_0x8a3e5b['gateways']),delete _0x2307c1['gateways']);_0x8a3e5b[_0x19b835(0x234)]&&(_0x2307c1[_0x19b835(0x234)]=JSON[_0x19b835(0x238)](_0x8a3e5b[_0x19b835(0x234)]),delete _0x2307c1[_0x19b835(0x234)]);_0x8a3e5b[_0x19b835(0x25a)]&&(_0x8a3e5b[_0x19b835(0x25a)][_0x19b835(0x1ef)]!==undefined&&(_0x2307c1[_0x19b835(0x1ef)]=_0x8a3e5b['wallets']['usdtPolygonWallet']||null),_0x8a3e5b[_0x19b835(0x25a)]['usdtTrcWallet']!==undefined&&(_0x2307c1[_0x19b835(0x1c1)]=_0x8a3e5b[_0x19b835(0x25a)][_0x19b835(0x1c1)]||null),_0x8a3e5b[_0x19b835(0x25a)][_0x19b835(0x261)]!==undefined&&(_0x2307c1[_0x19b835(0x261)]=_0x8a3e5b[_0x19b835(0x25a)][_0x19b835(0x261)]||null),_0x8a3e5b[_0x19b835(0x25a)][_0x19b835(0x189)]!==undefined&&(_0x2307c1[_0x19b835(0x189)]=_0x8a3e5b['wallets'][_0x19b835(0x189)]||null),delete _0x2307c1[_0x19b835(0x25a)]);const _0x3aea5f=await database_1[_0x19b835(0x258)][_0x19b835(0x251)]['update']({'where':{'id':_0x3fee73},'data':_0x2307c1,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x3aea5f['id'],'fullName':_0x3aea5f[_0x19b835(0x255)],'username':_0x3aea5f[_0x19b835(0x1f3)],'telegramId':_0x3aea5f[_0x19b835(0x236)],'merchantUrl':_0x3aea5f[_0x19b835(0x1cf)],'gateways':_0x3aea5f[_0x19b835(0x1e1)]?JSON[_0x19b835(0x1e2)](_0x3aea5f[_0x19b835(0x1e1)]):null,'gatewaySettings':_0x3aea5f['gatewaySettings']?JSON[_0x19b835(0x1e2)](_0x3aea5f[_0x19b835(0x234)]):null,'publicKey':_0x3aea5f['publicKey'],'wallets':{'usdtPolygonWallet':_0x3aea5f[_0x19b835(0x1ef)],'usdtTrcWallet':_0x3aea5f[_0x19b835(0x1c1)],'usdtErcWallet':_0x3aea5f[_0x19b835(0x261)],'usdcPolygonWallet':_0x3aea5f['usdcPolygonWallet']},'status':_0x3aea5f['status'],'createdAt':_0x3aea5f[_0x19b835(0x1d9)]};}async[a35_0x1980d3(0x23d)](_0x1bb9f9){const _0x1b0c19=a35_0x1980d3,_0x4d4447=await database_1[_0x1b0c19(0x258)][_0x1b0c19(0x251)]['update']({'where':{'id':_0x1bb9f9},'data':{'status':'SUSPENDED'},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x4d4447['id'],'fullName':_0x4d4447[_0x1b0c19(0x255)],'username':_0x4d4447[_0x1b0c19(0x1f3)],'telegramId':_0x4d4447[_0x1b0c19(0x236)],'merchantUrl':_0x4d4447[_0x1b0c19(0x1cf)],'gateways':_0x4d4447[_0x1b0c19(0x1e1)]?JSON[_0x1b0c19(0x1e2)](_0x4d4447[_0x1b0c19(0x1e1)]):null,'gatewaySettings':_0x4d4447[_0x1b0c19(0x234)]?JSON['parse'](_0x4d4447[_0x1b0c19(0x234)]):null,'publicKey':_0x4d4447['publicKey'],'wallets':{'usdtPolygonWallet':_0x4d4447['usdtPolygonWallet'],'usdtTrcWallet':_0x4d4447[_0x1b0c19(0x1c1)],'usdtErcWallet':_0x4d4447[_0x1b0c19(0x261)],'usdcPolygonWallet':_0x4d4447['usdcPolygonWallet']},'status':_0x4d4447[_0x1b0c19(0x22e)],'createdAt':_0x4d4447[_0x1b0c19(0x1d9)]};}async['activateUser'](_0x123b35){const _0xc25dc2=a35_0x1980d3,_0x4d592f=await database_1['default'][_0xc25dc2(0x251)][_0xc25dc2(0x1d4)]({'where':{'id':_0x123b35},'data':{'status':_0xc25dc2(0x266)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x4d592f['id'],'fullName':_0x4d592f[_0xc25dc2(0x255)],'username':_0x4d592f[_0xc25dc2(0x1f3)],'telegramId':_0x4d592f['telegram'],'merchantUrl':_0x4d592f['shopUrl'],'gateways':_0x4d592f[_0xc25dc2(0x1e1)]?JSON[_0xc25dc2(0x1e2)](_0x4d592f['paymentGateways']):null,'gatewaySettings':_0x4d592f[_0xc25dc2(0x234)]?JSON['parse'](_0x4d592f[_0xc25dc2(0x234)]):null,'publicKey':_0x4d592f[_0xc25dc2(0x21d)],'wallets':{'usdtPolygonWallet':_0x4d592f[_0xc25dc2(0x1ef)],'usdtTrcWallet':_0x4d592f[_0xc25dc2(0x1c1)],'usdtErcWallet':_0x4d592f[_0xc25dc2(0x261)],'usdcPolygonWallet':_0x4d592f['usdcPolygonWallet']},'status':_0x4d592f[_0xc25dc2(0x22e)],'createdAt':_0x4d592f[_0xc25dc2(0x1d9)]};}async[a35_0x1980d3(0x1f5)](_0x4e101d){const _0x823bfe=a35_0x1980d3,{page:_0x450504,limit:_0x357581,status:_0x415d33}=_0x4e101d,_0x53e3d8=(_0x450504-0x1)*_0x357581,_0x4369b2={};_0x415d33&&(_0x4369b2[_0x823bfe(0x22e)]=_0x415d33[_0x823bfe(0x1df)]());const [_0x4b3a72,_0x106abb]=await Promise[_0x823bfe(0x1c8)]([database_1[_0x823bfe(0x258)][_0x823bfe(0x251)][_0x823bfe(0x21c)]({'where':_0x4369b2,'skip':_0x53e3d8,'take':_0x357581,'orderBy':{'createdAt':_0x823bfe(0x23c)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}}),database_1[_0x823bfe(0x258)][_0x823bfe(0x251)][_0x823bfe(0x1e3)]({'where':_0x4369b2})]);return{'users':_0x4b3a72[_0x823bfe(0x221)](_0x562d9a=>({'id':_0x562d9a['id'],'fullName':_0x562d9a[_0x823bfe(0x255)],'username':_0x562d9a[_0x823bfe(0x1f3)],'telegramId':_0x562d9a['telegram'],'merchantUrl':_0x562d9a['shopUrl'],'gateways':_0x562d9a['paymentGateways']?JSON[_0x823bfe(0x1e2)](_0x562d9a[_0x823bfe(0x1e1)]):null,'gatewaySettings':_0x562d9a[_0x823bfe(0x234)]?JSON[_0x823bfe(0x1e2)](_0x562d9a['gatewaySettings']):null,'publicKey':_0x562d9a[_0x823bfe(0x21d)],'wallets':{'usdtPolygonWallet':_0x562d9a[_0x823bfe(0x1ef)],'usdtTrcWallet':_0x562d9a[_0x823bfe(0x1c1)],'usdtErcWallet':_0x562d9a[_0x823bfe(0x261)],'usdcPolygonWallet':_0x562d9a[_0x823bfe(0x189)]},'status':_0x562d9a[_0x823bfe(0x22e)],'createdAt':_0x562d9a[_0x823bfe(0x1d9)]})),'pagination':{'page':_0x450504,'limit':_0x357581,'total':_0x106abb,'totalPages':Math[_0x823bfe(0x1bf)](_0x106abb/_0x357581)}};}async['getUserById'](_0x4f7782){const _0x39d971=a35_0x1980d3,_0x45c298=await database_1[_0x39d971(0x258)][_0x39d971(0x251)]['findUnique']({'where':{'id':_0x4f7782},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x45c298)return null;return{'id':_0x45c298['id'],'fullName':_0x45c298['name'],'username':_0x45c298['username'],'telegramId':_0x45c298[_0x39d971(0x236)],'merchantUrl':_0x45c298['shopUrl'],'gateways':_0x45c298[_0x39d971(0x1e1)]?JSON[_0x39d971(0x1e2)](_0x45c298[_0x39d971(0x1e1)]):null,'gatewaySettings':_0x45c298[_0x39d971(0x234)]?JSON[_0x39d971(0x1e2)](_0x45c298[_0x39d971(0x234)]):null,'publicKey':_0x45c298[_0x39d971(0x21d)],'wallets':{'usdtPolygonWallet':_0x45c298['usdtPolygonWallet'],'usdtTrcWallet':_0x45c298[_0x39d971(0x1c1)],'usdtErcWallet':_0x45c298['usdtErcWallet'],'usdcPolygonWallet':_0x45c298['usdcPolygonWallet']},'status':_0x45c298[_0x39d971(0x22e)],'createdAt':_0x45c298[_0x39d971(0x1d9)]};}async['createUser'](_0x1466bb){const _0x4bebb8=a35_0x1980d3,{fullName:_0x1aed83,username:_0xe807da,password:_0x5af34a,telegramId:_0x1a9e26,merchantUrl:_0x4447e2,gateways:_0x235c53,gatewaySettings:_0x4a13f3,wallets:_0x4cbf39}=_0x1466bb,_0x2ea649=await database_1[_0x4bebb8(0x258)]['shop'][_0x4bebb8(0x20e)]({'where':{'username':_0xe807da}});if(_0x2ea649)throw new Error(_0x4bebb8(0x244));if(_0x1a9e26){const _0x569fb3=await database_1[_0x4bebb8(0x258)][_0x4bebb8(0x251)][_0x4bebb8(0x20e)]({'where':{'telegram':_0x1a9e26}});if(_0x569fb3)throw new Error(_0x4bebb8(0x262));}const _0x5a334b=await bcryptjs_1['default'][_0x4bebb8(0x216)](_0x5af34a,0xc),_0x210bde=_0x4bebb8(0x1b8)+crypto_1[_0x4bebb8(0x258)][_0x4bebb8(0x241)](0x20)[_0x4bebb8(0x1f6)](_0x4bebb8(0x1eb)),_0x43222d='sk_'+crypto_1[_0x4bebb8(0x258)]['randomBytes'](0x20)[_0x4bebb8(0x1f6)]('hex'),_0x187c9e=await database_1[_0x4bebb8(0x258)]['shop'][_0x4bebb8(0x227)]({'data':{'name':_0x1aed83,'username':_0xe807da,'password':_0x5a334b,'telegram':_0x1a9e26,'shopUrl':_0x4447e2,'paymentGateways':_0x235c53?JSON[_0x4bebb8(0x238)](_0x235c53):null,'gatewaySettings':_0x4a13f3?JSON[_0x4bebb8(0x238)](_0x4a13f3):null,'usdtPolygonWallet':_0x4cbf39?.['usdtPolygonWallet']||null,'usdtTrcWallet':_0x4cbf39?.[_0x4bebb8(0x1c1)]||null,'usdtErcWallet':_0x4cbf39?.[_0x4bebb8(0x261)]||null,'usdcPolygonWallet':_0x4cbf39?.[_0x4bebb8(0x189)]||null,'publicKey':_0x210bde,'secretKey':_0x43222d,'status':_0x4bebb8(0x266)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x187c9e['id'],'fullName':_0x187c9e['name'],'username':_0x187c9e[_0x4bebb8(0x1f3)],'telegramId':_0x187c9e[_0x4bebb8(0x236)],'merchantUrl':_0x187c9e['shopUrl'],'gateways':_0x187c9e['paymentGateways']?JSON[_0x4bebb8(0x1e2)](_0x187c9e[_0x4bebb8(0x1e1)]):null,'gatewaySettings':_0x187c9e[_0x4bebb8(0x234)]?JSON['parse'](_0x187c9e[_0x4bebb8(0x234)]):null,'publicKey':_0x187c9e[_0x4bebb8(0x21d)],'wallets':{'usdtPolygonWallet':_0x187c9e[_0x4bebb8(0x1ef)],'usdtTrcWallet':_0x187c9e['usdtTrcWallet'],'usdtErcWallet':_0x187c9e['usdtErcWallet'],'usdcPolygonWallet':_0x187c9e[_0x4bebb8(0x189)]},'status':_0x187c9e[_0x4bebb8(0x22e)],'createdAt':_0x187c9e['createdAt']};}async['deleteUser'](_0x2c5a23){const _0x46ebf8=a35_0x1980d3;await database_1[_0x46ebf8(0x258)][_0x46ebf8(0x251)][_0x46ebf8(0x1cc)]({'where':{'id':_0x2c5a23}});}}exports[a35_0x1980d3(0x1dc)]=AdminService;function a35_0x5518(){const _0x2a22ff=['gatewayOrderId','asc','\x20\x20\x20🌐\x20IP:\x20','COMPLETED','createdAt','amountUSDT','getPayoutStats','AdminService','merchantEarnings','periodTo','toUpperCase','\x20USDT\x20(total\x20paid\x20to\x20merchants)','paymentGateways','parse','count','\x20\x20\x20Transaction\x20hash:\x20','dateFrom','\x20balance\x20updated:\x20','2020-01-01','376520tRTVnw','147crNDxE','💸\x20CHARGEBACK\x20penalty:\x20-','hex','gateway','updateUser','log','usdtPolygonWallet','totalPayout','\x20to\x20','toISOString','username','date','getAllUsers','toString','shopId','round','Noda','localeCompare','turnover','externalPaymentUrl','Plisio','REFUND','\x20USDT\x20total','24JplHVe','getGatewayDisplayName','📊\x20Total\x20payments\x20(including\x20failed):\x20','getMerchantsAwaitingPayout','trc20','💰\x20[PAYOUT]\x20Gateway\x20','toLowerCase','forEach','period','\x20\x20\x20Total\x20paid\x20out:\x20','aggregate','__importDefault','Test\x20Gateway','totalAmountUSDT','findUnique','balance','reduce','thisMonth','getTime','length','currencyService','📊\x20Merchants\x20awaiting\x20payout:\x20','hash','$transaction','📅\x20Period:\x20','gatewayEarnings','month','groupBy','findMany','publicKey','erc20','\x20USDT','105YoRswg','map','Insufficient\x20balance.\x20Available:\x20','\x20\x20\x20📊\x20Total\x20payments:\x20','awaitingPayout','customerUa','convertToUSDT','create',':\x20commission\x20=\x20','\x20USDT\x20(total\x20merchant\x20balances)','lte','customerCountry','Error\x20parsing\x20gateway\x20settings\x20for\x20shop\x20','statusChangedAt','status','string','dateTo','totalCommissionRate','\x20became\x20PAID:\x20+','KLYME\x20GB','gatewaySettings','averageCheckUSDT','telegram','\x20\x20\x20💰\x20Total\x20turnover:\x20','stringify','\x20for\x20shop\x20','10218ZyhkDz','📊\x20Payout\x20statistics\x20calculated:','desc','suspendUser','merchantUrl','customerEmail','split','randomBytes','../config/database','__esModule','Username\x20already\x20exists','208JYcGVv','notes','\x20USDT)',',\x20successful:\x20','values','gateways','CHARGEBACK','averageCommissionRate','Rapyd','periodFrom','adminNotes','\x20USDT\x20(same\x20as\x20awaiting)','shop','fullName','failureMessage','merchantEarningsUSDT','name','not\x20set','\x20USDT\x20to\x20balance','default','📊\x20Merchant\x20statistics\x20calculated:','wallets','\x20balance\x20updated:','15JxrPhE','totalAmountAfterCommissionUSDT','test_gateway','./currencyService','90d','usdtErcWallet','Telegram\x20username\x20already\x20exists','txid','💰\x20Found\x20','KLYME\x20EU','ACTIVE','availableBalance','\x20\x20\x20📅\x20This\x20month:\x20','updatedAt','getMonth','usdcPolygonWallet','\x20\x20\x20👤\x20Merchant\x20earnings:\x20','amount','11DcePfI','payment','📊\x20Getting\x20merchant\x20statistics\x20with\x20filters:','network','4838770JangPq','admin','\x20merchants\x20with\x20positive\x20balance','\x20\x20\x20🌍\x20Country:\x20','totalPaidOut','customerIp','getPayoutById','commissionUSDT','polygon_usdc','💰\x20Payment\x20','PAID','🔄\x20REFUND:\x20Payment\x20amount\x20already\x20deducted\x20from\x20balance','paidAt','30d','chargebackAmount','🔄\x20Updating\x20customer\x20data\x20for\x20payment\x20','getFullYear','set','whiteUrl','findFirst','140544AdbNbj','totalTurnover','🔄\x20Admin\x20updating\x20payment\x20','📊\x20Calculating\x20payout\x20statistics...','\x20\x20\x20🏪\x20Gateway\x20earnings:\x20','\x20paid\x20payments\x20for\x20analysis','79162lWDrak','password','Shop\x20not\x20found','\x20\x20\x20🖥️\x20User\x20Agent:\x20','\x20->\x20','payout','turnoverUSDT','\x20USDT\x20from\x20balance','polygon','telegramId','commission','insensitive','93320GbbCwN','customerName','pk_','pendingUrl','week','entries','Payment\x20not\x20found','\x20USDT\x20(','_sum','ceil','toFixed','usdtTrcWallet','bcryptjs','getPaymentById','currency','💳\x20Payout\x20wallet\x20for\x20','gte','\x20USDT\x20(+','all','failUrl','deletePayout','totalPayments','delete','💰\x20Creating\x20payout\x20for\x20shop\x20','✅\x20Customer\x20data\x20updated\x20for\x20payment\x20','shopUrl','paymentsCount','3127293COLXqB','orderId','successUrl','update'];a35_0x5518=function(){return _0x2a22ff;};return a35_0x5518();}