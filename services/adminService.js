'use strict';const a35_0x3e3fdf=a35_0x2a6e;(function(_0x1f0f1b,_0x2e4edd){const _0x574ae4=a35_0x2a6e,_0x40d28a=_0x1f0f1b();while(!![]){try{const _0x98cde5=parseInt(_0x574ae4(0x1f5))/0x1+parseInt(_0x574ae4(0x270))/0x2+parseInt(_0x574ae4(0x295))/0x3+-parseInt(_0x574ae4(0x299))/0x4+-parseInt(_0x574ae4(0x275))/0x5+-parseInt(_0x574ae4(0x274))/0x6*(parseInt(_0x574ae4(0x19c))/0x7)+-parseInt(_0x574ae4(0x2cd))/0x8*(parseInt(_0x574ae4(0x298))/0x9);if(_0x98cde5===_0x2e4edd)break;else _0x40d28a['push'](_0x40d28a['shift']());}catch(_0x4c7071){_0x40d28a['push'](_0x40d28a['shift']());}}}(a35_0x438d,0x1a499));var __importDefault=this&&this[a35_0x3e3fdf(0x23f)]||function(_0x3ef7ae){return _0x3ef7ae&&_0x3ef7ae['__esModule']?_0x3ef7ae:{'default':_0x3ef7ae};};Object[a35_0x3e3fdf(0x1ef)](exports,a35_0x3e3fdf(0x2a7),{'value':!![]}),exports['AdminService']=void 0x0;const database_1=__importDefault(require('../config/database')),bcryptjs_1=__importDefault(require('bcryptjs')),crypto_1=__importDefault(require(a35_0x3e3fdf(0x291))),currencyService_1=require(a35_0x3e3fdf(0x23d)),gateway_1=require(a35_0x3e3fdf(0x1a4));function a35_0x2a6e(_0x32cf1a,_0x328bb4){const _0x438d70=a35_0x438d();return a35_0x2a6e=function(_0x2a6e28,_0x3007d5){_0x2a6e28=_0x2a6e28-0x19c;let _0x28c57e=_0x438d70[_0x2a6e28];return _0x28c57e;},a35_0x2a6e(_0x32cf1a,_0x328bb4);}class AdminService{async['getPayoutStats'](){const _0x2f9f23=a35_0x3e3fdf;console[_0x2f9f23(0x1d3)](_0x2f9f23(0x1af));const _0x361092=await database_1[_0x2f9f23(0x281)][_0x2f9f23(0x21c)][_0x2f9f23(0x24e)]({'_sum':{'balance':!![],'totalPaidOut':!![]},'where':{'status':'ACTIVE'}}),_0x147e2f=await this[_0x2f9f23(0x23b)]({'page':0x1,'limit':0x3e8}),_0x5817b1=await database_1[_0x2f9f23(0x281)]['payment'][_0x2f9f23(0x290)]({'where':{'status':_0x2f9f23(0x228),'gateway':{'not':'test_gateway'}}}),_0x3e15e3=new Date(),_0x643cfe=new Date(_0x3e15e3[_0x2f9f23(0x229)](),_0x3e15e3[_0x2f9f23(0x2a0)](),0x1),_0x5017d7=new Date(_0x3e15e3[_0x2f9f23(0x229)](),_0x3e15e3[_0x2f9f23(0x2a0)]()+0x1,0x0,0x17,0x3b,0x3b,0x3e7),_0x82e936=await database_1[_0x2f9f23(0x281)][_0x2f9f23(0x244)][_0x2f9f23(0x24e)]({'_sum':{'amount':!![]},'where':{'createdAt':{'gte':_0x643cfe,'lte':_0x5017d7},'status':_0x2f9f23(0x2c0)}}),_0x3db09c=_0x361092[_0x2f9f23(0x200)][_0x2f9f23(0x1d9)]||0x0,_0x26942c=_0x147e2f[_0x2f9f23(0x1d5)][_0x2f9f23(0x216)],_0x429589=_0x82e936['_sum'][_0x2f9f23(0x27e)]||0x0,_0x3a2e10={'totalPayout':Math[_0x2f9f23(0x1b4)](_0x3db09c*0x64)/0x64,'awaitingPayout':Math[_0x2f9f23(0x1b4)](_0x26942c*0x64)/0x64,'thisMonth':Math['round'](_0x429589*0x64)/0x64,'availableBalance':Math['round'](_0x26942c*0x64)/0x64,'totalPayments':_0x5817b1};return console[_0x2f9f23(0x1d3)](_0x2f9f23(0x27d)),console[_0x2f9f23(0x1d3)](_0x2f9f23(0x1fe)+_0x3a2e10[_0x2f9f23(0x2af)]+_0x2f9f23(0x248)),console[_0x2f9f23(0x1d3)]('\x20\x20\x20⏳\x20Awaiting\x20payout:\x20'+_0x3a2e10[_0x2f9f23(0x1f1)]+'\x20USDT\x20(with\x20commission\x20deducted)'),console[_0x2f9f23(0x1d3)](_0x2f9f23(0x2ae)+_0x3a2e10[_0x2f9f23(0x280)]+'\x20USDT\x20(same\x20as\x20awaiting)'),console['log']('\x20\x20\x20📅\x20This\x20month:\x20'+_0x3a2e10[_0x2f9f23(0x20e)]+_0x2f9f23(0x227)),console['log'](_0x2f9f23(0x210)+_0x3a2e10['totalPayments']+_0x2f9f23(0x2b4)),console['log'](_0x2f9f23(0x1a9)+(_0x361092[_0x2f9f23(0x200)][_0x2f9f23(0x2a2)]||0x0)[_0x2f9f23(0x238)](0x2)+_0x2f9f23(0x1e1)),console[_0x2f9f23(0x1d3)](_0x2f9f23(0x256)+((_0x361092[_0x2f9f23(0x200)][_0x2f9f23(0x2a2)]||0x0)-_0x26942c)[_0x2f9f23(0x238)](0x2)+_0x2f9f23(0x227)),_0x3a2e10;}async[a35_0x3e3fdf(0x292)](_0x2fcf44,_0x284498){const _0x19d9c1=a35_0x3e3fdf;console[_0x19d9c1(0x1d3)]('🔄\x20Updating\x20customer\x20data\x20for\x20payment\x20'+_0x2fcf44+':',_0x284498);const _0x44f4d0=await database_1['default']['payment']['findUnique']({'where':{'id':_0x2fcf44},'select':{'id':!![],'customerEmail':!![],'customerName':!![],'customerCountry':!![],'customerIp':!![],'customerUa':!![]}});if(!_0x44f4d0)throw new Error(_0x19d9c1(0x293));const _0x1bad37={};_0x284498[_0x19d9c1(0x1fc)]!==undefined&&(_0x1bad37[_0x19d9c1(0x1fc)]=_0x284498[_0x19d9c1(0x1fc)]||null);_0x284498['customerIp']!==undefined&&(_0x1bad37['customerIp']=_0x284498[_0x19d9c1(0x2b8)]||null);_0x284498['customerUa']!==undefined&&(_0x1bad37[_0x19d9c1(0x241)]=_0x284498[_0x19d9c1(0x241)]||null);const _0x30b657=await database_1[_0x19d9c1(0x281)][_0x19d9c1(0x1e9)][_0x19d9c1(0x26f)]({'where':{'id':_0x2fcf44},'data':{..._0x1bad37,'updatedAt':new Date()},'select':{'id':!![],'customerEmail':!![],'customerName':!![],'customerCountry':!![],'customerIp':!![],'customerUa':!![],'updatedAt':!![]}});return console[_0x19d9c1(0x1d3)]('✅\x20Customer\x20data\x20updated\x20for\x20payment\x20'+_0x2fcf44),console['log'](_0x19d9c1(0x1e8)+_0x44f4d0[_0x19d9c1(0x1fc)]+_0x19d9c1(0x1c9)+_0x30b657[_0x19d9c1(0x1fc)]),console['log'](_0x19d9c1(0x206)+_0x44f4d0[_0x19d9c1(0x2b8)]+_0x19d9c1(0x1c9)+_0x30b657['customerIp']),console[_0x19d9c1(0x1d3)](_0x19d9c1(0x1e5)+(_0x44f4d0[_0x19d9c1(0x241)]?'set':_0x19d9c1(0x25d))+'\x20->\x20'+(_0x30b657[_0x19d9c1(0x241)]?_0x19d9c1(0x239):_0x19d9c1(0x25d))),_0x30b657;}async['getSystemStatistics'](_0xf7c6e){const _0x2e78a8=a35_0x3e3fdf,_0x339aef=new Date();let _0x41ab0d;switch(_0xf7c6e){case'7d':_0x41ab0d=new Date(_0x339aef[_0x2e78a8(0x1df)]()-0x7*0x18*0x3c*0x3c*0x3e8);break;case'30d':_0x41ab0d=new Date(_0x339aef['getTime']()-0x1e*0x18*0x3c*0x3c*0x3e8);break;case _0x2e78a8(0x223):_0x41ab0d=new Date(_0x339aef[_0x2e78a8(0x1df)]()-0x5a*0x18*0x3c*0x3c*0x3e8);break;case _0x2e78a8(0x213):const _0xcd4321=await database_1['default']['payment'][_0x2e78a8(0x21f)]({'where':{'gateway':{'not':_0x2e78a8(0x2c5)}},'orderBy':{'createdAt':'asc'},'select':{'createdAt':!![]}});_0x41ab0d=_0xcd4321?_0xcd4321[_0x2e78a8(0x2be)]:new Date(_0x2e78a8(0x1ed)),console[_0x2e78a8(0x1d3)]('📅\x20Period\x20\x27all\x27:\x20Using\x20start\x20date\x20from\x20first\x20payment:\x20'+_0x41ab0d[_0x2e78a8(0x1d0)]());break;default:_0x41ab0d=new Date(_0x339aef[_0x2e78a8(0x1df)]()-0x1e*0x18*0x3c*0x3c*0x3e8);}const [_0x4dc9f9,_0x30b3e7,_0x48d823,_0x46455a,_0x4c3ba6,_0x56bb25,_0x4529c8]=await Promise[_0x2e78a8(0x213)]([database_1[_0x2e78a8(0x281)][_0x2e78a8(0x21c)]['count'](),database_1['default'][_0x2e78a8(0x21c)]['count']({'where':{'status':_0x2e78a8(0x26a)}}),database_1[_0x2e78a8(0x281)][_0x2e78a8(0x1e9)]['count']({'where':{'createdAt':{'gte':_0x41ab0d},'gateway':{'not':_0x2e78a8(0x2c5)}}}),database_1[_0x2e78a8(0x281)]['payment'][_0x2e78a8(0x290)]({'where':{'status':_0x2e78a8(0x228),'createdAt':{'gte':_0x41ab0d},'gateway':{'not':_0x2e78a8(0x2c5)}}}),database_1[_0x2e78a8(0x281)][_0x2e78a8(0x1e9)][_0x2e78a8(0x1bc)]({'where':{'status':_0x2e78a8(0x228),'createdAt':{'gte':_0x41ab0d},'gateway':{'not':_0x2e78a8(0x2c5)}},'select':{'amount':!![],'currency':!![]}}),database_1[_0x2e78a8(0x281)][_0x2e78a8(0x1e9)][_0x2e78a8(0x1bc)]({'where':{'gateway':{'not':'test_gateway'}},'take':0xa,'orderBy':{'createdAt':_0x2e78a8(0x1e4)},'include':{'shop':{'select':{'name':!![],'username':!![]}}}}),database_1[_0x2e78a8(0x281)]['payment']['findMany']({'where':{'createdAt':{'gte':_0x41ab0d},'gateway':{'not':_0x2e78a8(0x2c5)}},'select':{'amount':!![],'currency':!![],'status':!![],'amountUSDT':!![],'createdAt':!![]}})]);let _0x6f1fc3=0x0;for(const _0x713ef0 of _0x4c3ba6){const _0x1cb62a=await currencyService_1['currencyService'][_0x2e78a8(0x1a7)](_0x713ef0['amount'],_0x713ef0[_0x2e78a8(0x215)]);_0x6f1fc3+=_0x1cb62a;}const _0x4a5d82=this['generateDailyStatistics'](_0x4529c8,_0x41ab0d,_0x339aef),_0x1e2276=_0x48d823>0x0?_0x46455a/_0x48d823*0x64:0x0;return{'totalShops':_0x4dc9f9,'activeShops':_0x30b3e7,'totalPayments':_0x48d823,'successfulPayments':_0x46455a,'totalRevenue':Math[_0x2e78a8(0x1b4)](_0x6f1fc3*0x64)/0x64,'conversionRate':Math[_0x2e78a8(0x1b4)](_0x1e2276*0x64)/0x64,'dailyRevenue':_0x4a5d82['dailyRevenue'],'dailyPayments':_0x4a5d82[_0x2e78a8(0x24b)],'recentPayments':_0x56bb25['map'](_0xaf75a6=>({'id':_0xaf75a6['id'],'amount':_0xaf75a6[_0x2e78a8(0x27e)],'currency':_0xaf75a6['currency'],'status':_0xaf75a6[_0x2e78a8(0x226)],'gateway':_0xaf75a6['gateway'],'shop':_0xaf75a6[_0x2e78a8(0x21c)],'createdAt':_0xaf75a6[_0x2e78a8(0x2be)]}))};}async[a35_0x3e3fdf(0x26d)](_0x27eb2f){const _0x47ae9d=a35_0x3e3fdf;console[_0x47ae9d(0x1d3)](_0x47ae9d(0x28e),_0x27eb2f);let _0x24d30f,_0x3d9230=new Date();if(_0x27eb2f[_0x47ae9d(0x1c5)]===_0x47ae9d(0x20a)&&_0x27eb2f[_0x47ae9d(0x1c6)]&&_0x27eb2f[_0x47ae9d(0x24c)])_0x24d30f=new Date(_0x27eb2f[_0x47ae9d(0x1c6)]),_0x3d9230=new Date(_0x27eb2f[_0x47ae9d(0x24c)]);else{const _0x552c44=new Date();switch(_0x27eb2f[_0x47ae9d(0x1c5)]){case _0x47ae9d(0x2a4):_0x24d30f=new Date(_0x552c44[_0x47ae9d(0x1df)]()-0x7*0x18*0x3c*0x3c*0x3e8);break;case _0x47ae9d(0x24d):_0x24d30f=new Date(_0x552c44[_0x47ae9d(0x1df)]()-0x1e*0x18*0x3c*0x3c*0x3e8);break;case'year':_0x24d30f=new Date(_0x552c44[_0x47ae9d(0x1df)]()-0x16d*0x18*0x3c*0x3c*0x3e8);break;case'all':default:_0x24d30f=new Date(_0x47ae9d(0x1ed));break;}}console[_0x47ae9d(0x1d3)](_0x47ae9d(0x220)+_0x24d30f[_0x47ae9d(0x1d0)]()+_0x47ae9d(0x2c2)+_0x3d9230[_0x47ae9d(0x1d0)]());const _0x2c725e={'status':_0x47ae9d(0x228),'gateway':{'not':'test_gateway'},'paidAt':{'gte':_0x24d30f,'lte':_0x3d9230}};_0x27eb2f['shopId']&&(_0x2c725e[_0x47ae9d(0x2c6)]=_0x27eb2f[_0x47ae9d(0x2c6)]);const _0x21b249=await database_1[_0x47ae9d(0x281)]['payment'][_0x47ae9d(0x1bc)]({'where':_0x2c725e,'include':{'shop':{'select':{'id':!![],'name':!![],'username':!![],'gatewaySettings':!![]}}}});console[_0x47ae9d(0x1d3)](_0x47ae9d(0x1b2)+_0x21b249[_0x47ae9d(0x2a8)]+'\x20paid\x20payments\x20for\x20analysis');const _0x302366={'gateway':{'not':_0x47ae9d(0x2c5)},'createdAt':{'gte':_0x24d30f,'lte':_0x3d9230}};_0x27eb2f[_0x47ae9d(0x2c6)]&&(_0x302366[_0x47ae9d(0x2c6)]=_0x27eb2f['shopId']);const _0x341f6f=await database_1[_0x47ae9d(0x281)]['payment'][_0x47ae9d(0x290)]({'where':_0x302366});console[_0x47ae9d(0x1d3)](_0x47ae9d(0x214)+_0x341f6f+_0x47ae9d(0x1b3)+_0x21b249['length']);let _0x4bbc4f=0x0,_0x243880=0x0,_0x233f2f=0x0;const _0x1cc436={},_0x348b1c={},_0x2f5e9d={};for(const _0x1a849c of _0x21b249){try{const _0x33f605=await currencyService_1[_0x47ae9d(0x240)]['convertToUSDT'](_0x1a849c[_0x47ae9d(0x27e)],_0x1a849c[_0x47ae9d(0x215)]);let _0x1ebd1d={};if(_0x1a849c[_0x47ae9d(0x21c)][_0x47ae9d(0x19e)])try{_0x1ebd1d=JSON['parse'](_0x1a849c[_0x47ae9d(0x21c)][_0x47ae9d(0x19e)]);}catch(_0x100776){console[_0x47ae9d(0x2a9)]('Error\x20parsing\x20gateway\x20settings\x20for\x20shop\x20'+_0x1a849c[_0x47ae9d(0x2c6)]+':',_0x100776);}let _0x1e4604={},_0x49c947=0xa;for(const [_0x1045f4,_0x4dc489]of Object['entries'](_0x1ebd1d)){if(_0x1045f4['toLowerCase']()===_0x1a849c[_0x47ae9d(0x1f7)][_0x47ae9d(0x1bf)]()){_0x1e4604=_0x4dc489,_0x49c947=_0x4dc489[_0x47ae9d(0x272)]||0xa;break;}}let _0x27bf2c,_0x27d203;_0x1a849c[_0x47ae9d(0x1bb)]!==null&&_0x1a849c[_0x47ae9d(0x1bb)]!==undefined?(_0x27bf2c=_0x1a849c[_0x47ae9d(0x1bb)],_0x27d203=_0x33f605-_0x27bf2c,console['log'](_0x47ae9d(0x1e2)+_0x27bf2c[_0x47ae9d(0x238)](0x6)+_0x47ae9d(0x294)+_0x1a849c['id'])):(_0x27d203=_0x33f605*(_0x49c947/0x64),_0x27bf2c=_0x33f605-_0x27d203,console[_0x47ae9d(0x1d3)](_0x47ae9d(0x297)+_0x1a849c['id']+':\x20'+_0x49c947+'%\x20from\x20'+_0x33f605['toFixed'](0x6)+_0x47ae9d(0x227)));_0x4bbc4f+=_0x33f605,_0x243880+=_0x27bf2c,_0x233f2f+=_0x27d203;!_0x1cc436[_0x1a849c[_0x47ae9d(0x1f7)]]&&(_0x1cc436[_0x1a849c[_0x47ae9d(0x1f7)]]={'gateway':_0x1a849c[_0x47ae9d(0x1f7)],'gatewayDisplayName':this['getGatewayDisplayName'](_0x1a849c[_0x47ae9d(0x1f7)]),'paymentsCount':0x0,'turnoverUSDT':0x0,'commissionUSDT':0x0,'merchantEarningsUSDT':0x0,'totalCommissionRate':0x0});_0x1cc436[_0x1a849c['gateway']][_0x47ae9d(0x19d)]++,_0x1cc436[_0x1a849c[_0x47ae9d(0x1f7)]][_0x47ae9d(0x277)]+=_0x33f605,_0x1cc436[_0x1a849c[_0x47ae9d(0x1f7)]][_0x47ae9d(0x1ec)]+=_0x27d203,_0x1cc436[_0x1a849c[_0x47ae9d(0x1f7)]][_0x47ae9d(0x224)]+=_0x27bf2c,_0x1cc436[_0x1a849c[_0x47ae9d(0x1f7)]][_0x47ae9d(0x269)]+=_0x49c947;!_0x27eb2f[_0x47ae9d(0x2c6)]&&(!_0x348b1c[_0x1a849c[_0x47ae9d(0x2c6)]]&&(_0x348b1c[_0x1a849c['shopId']]={'shopId':_0x1a849c[_0x47ae9d(0x2c6)],'shopName':_0x1a849c['shop'][_0x47ae9d(0x201)],'shopUsername':_0x1a849c['shop'][_0x47ae9d(0x1d4)],'paymentsCount':0x0,'turnoverUSDT':0x0,'commissionUSDT':0x0,'merchantEarningsUSDT':0x0,'paidOutUSDT':0x0,'averageCheckUSDT':0x0}),_0x348b1c[_0x1a849c[_0x47ae9d(0x2c6)]]['paymentsCount']++,_0x348b1c[_0x1a849c[_0x47ae9d(0x2c6)]][_0x47ae9d(0x277)]+=_0x33f605,_0x348b1c[_0x1a849c[_0x47ae9d(0x2c6)]][_0x47ae9d(0x1ec)]+=_0x27d203,_0x348b1c[_0x1a849c['shopId']][_0x47ae9d(0x224)]+=_0x27bf2c);const _0x4a779d=_0x1a849c[_0x47ae9d(0x1c8)][_0x47ae9d(0x1d0)]()['split']('T')[0x0];!_0x2f5e9d[_0x4a779d]&&(_0x2f5e9d[_0x4a779d]={'date':_0x4a779d,'turnover':0x0,'merchantEarnings':0x0,'gatewayEarnings':0x0,'paymentsCount':0x0}),_0x2f5e9d[_0x4a779d][_0x47ae9d(0x1ac)]+=_0x33f605,_0x2f5e9d[_0x4a779d]['merchantEarnings']+=_0x27bf2c,_0x2f5e9d[_0x4a779d][_0x47ae9d(0x237)]+=_0x27d203,_0x2f5e9d[_0x4a779d][_0x47ae9d(0x19d)]++;}catch(_0x14b45a){console[_0x47ae9d(0x2a9)](_0x47ae9d(0x284)+_0x1a849c['id']+':',_0x14b45a);}}Object[_0x47ae9d(0x288)](_0x1cc436)[_0x47ae9d(0x266)](_0x451819=>{const _0x210702=_0x47ae9d;_0x451819['averageCommissionRate']=_0x451819[_0x210702(0x19d)]>0x0?_0x451819[_0x210702(0x269)]/_0x451819[_0x210702(0x19d)]:0x0,delete _0x451819[_0x210702(0x269)];}),Object['values'](_0x348b1c)[_0x47ae9d(0x266)](_0x24c472=>{const _0x5bbb7d=_0x47ae9d;_0x24c472[_0x5bbb7d(0x21d)]=_0x24c472[_0x5bbb7d(0x19d)]>0x0?_0x24c472[_0x5bbb7d(0x277)]/_0x24c472['paymentsCount']:0x0;});let _0x2da7b2=0x0,_0x3f5605=0x0;if(_0x27eb2f[_0x47ae9d(0x2c6)]){const _0x441772=await database_1[_0x47ae9d(0x281)]['payout'][_0x47ae9d(0x1bc)]({'where':{'shopId':_0x27eb2f[_0x47ae9d(0x2c6)],'status':'COMPLETED','createdAt':{'gte':_0x24d30f,'lte':_0x3d9230}},'select':{'amount':!![]}});_0x2da7b2=_0x441772[_0x47ae9d(0x262)]((_0x5e56bc,_0x204eb4)=>_0x5e56bc+_0x204eb4['amount'],0x0);const _0x160007=await database_1[_0x47ae9d(0x281)][_0x47ae9d(0x244)][_0x47ae9d(0x1bc)]({'where':{'shopId':_0x27eb2f[_0x47ae9d(0x2c6)],'status':'PENDING','createdAt':{'gte':_0x24d30f,'lte':_0x3d9230}},'select':{'amount':!![]}});_0x3f5605=_0x160007['reduce']((_0x348c12,_0x527667)=>_0x348c12+_0x527667[_0x47ae9d(0x27e)],0x0);}const _0x2402b2=_0x341f6f,_0x39ec11=_0x21b249[_0x47ae9d(0x2a8)],_0x1e0fbe=_0x39ec11>0x0?_0x4bbc4f/_0x39ec11:0x0,_0x6b6279=_0x2402b2>0x0?Math['round'](_0x39ec11/_0x2402b2*0x2710)/0x64:0x0,_0x15a93c=Math[_0x47ae9d(0x1bd)]((_0x3d9230[_0x47ae9d(0x1df)]()-_0x24d30f[_0x47ae9d(0x1df)]())/(0x3e8*0x3c*0x3c*0x18)),_0x4e83cc={'totalTurnover':Math[_0x47ae9d(0x1b4)](_0x4bbc4f*0x64)/0x64,'merchantEarnings':Math[_0x47ae9d(0x1b4)](_0x243880*0x64)/0x64,'gatewayEarnings':Math[_0x47ae9d(0x1b4)](_0x233f2f*0x64)/0x64,'totalPaidOut':Math['round'](_0x2da7b2*0x64)/0x64,'pendingPayout':Math[_0x47ae9d(0x1b4)](_0x3f5605*0x64)/0x64,'averageCheck':Math[_0x47ae9d(0x1b4)](_0x1e0fbe*0x64)/0x64,'totalPayments':_0x2402b2,'successfulPayments':_0x39ec11,'conversionRate':_0x6b6279,'gatewayBreakdown':Object[_0x47ae9d(0x288)](_0x1cc436)['map'](_0x10ea95=>({..._0x10ea95,'turnoverUSDT':Math[_0x47ae9d(0x1b4)](_0x10ea95[_0x47ae9d(0x277)]*0x64)/0x64,'commissionUSDT':Math[_0x47ae9d(0x1b4)](_0x10ea95[_0x47ae9d(0x1ec)]*0x64)/0x64,'merchantEarningsUSDT':Math[_0x47ae9d(0x1b4)](_0x10ea95[_0x47ae9d(0x224)]*0x64)/0x64,'averageCommissionRate':Math[_0x47ae9d(0x1b4)](_0x10ea95['averageCommissionRate']*0x64)/0x64})),'merchantBreakdown':_0x27eb2f[_0x47ae9d(0x2c6)]?undefined:Object['values'](_0x348b1c)[_0x47ae9d(0x1cc)](_0x211f13=>({..._0x211f13,'turnoverUSDT':Math[_0x47ae9d(0x1b4)](_0x211f13['turnoverUSDT']*0x64)/0x64,'commissionUSDT':Math[_0x47ae9d(0x1b4)](_0x211f13[_0x47ae9d(0x1ec)]*0x64)/0x64,'merchantEarningsUSDT':Math[_0x47ae9d(0x1b4)](_0x211f13[_0x47ae9d(0x224)]*0x64)/0x64,'paidOutUSDT':Math[_0x47ae9d(0x1b4)](_0x211f13[_0x47ae9d(0x221)]*0x64)/0x64,'averageCheckUSDT':Math[_0x47ae9d(0x1b4)](_0x211f13['averageCheckUSDT']*0x64)/0x64})),'dailyData':Object[_0x47ae9d(0x288)](_0x2f5e9d)[_0x47ae9d(0x1cc)](_0x1256bf=>({..._0x1256bf,'turnover':Math['round'](_0x1256bf[_0x47ae9d(0x1ac)]*0x64)/0x64,'merchantEarnings':Math['round'](_0x1256bf[_0x47ae9d(0x211)]*0x64)/0x64,'gatewayEarnings':Math['round'](_0x1256bf[_0x47ae9d(0x237)]*0x64)/0x64}))[_0x47ae9d(0x22d)]((_0x27033f,_0x2409a1)=>_0x27033f[_0x47ae9d(0x2b6)][_0x47ae9d(0x2cc)](_0x2409a1[_0x47ae9d(0x2b6)])),'periodInfo':{'from':_0x24d30f,'to':_0x3d9230,'periodType':_0x27eb2f[_0x47ae9d(0x1c5)]||_0x47ae9d(0x20a),'daysCount':_0x15a93c}};return console['log'](_0x47ae9d(0x22e)),console[_0x47ae9d(0x1d3)](_0x47ae9d(0x1fb)+_0x4e83cc['totalTurnover']+_0x47ae9d(0x227)),console[_0x47ae9d(0x1d3)](_0x47ae9d(0x25e)+_0x4e83cc['merchantEarnings']+'\x20USDT'),console[_0x47ae9d(0x1d3)](_0x47ae9d(0x26b)+_0x4e83cc['gatewayEarnings']+_0x47ae9d(0x227)),console[_0x47ae9d(0x1d3)](_0x47ae9d(0x29e)+_0x4e83cc[_0x47ae9d(0x1d9)]+_0x47ae9d(0x227)),console[_0x47ae9d(0x1d3)](_0x47ae9d(0x1ab)+_0x4e83cc[_0x47ae9d(0x1a2)]+_0x47ae9d(0x227)),console[_0x47ae9d(0x1d3)](_0x47ae9d(0x29f)+_0x4e83cc[_0x47ae9d(0x267)]),_0x4e83cc;}async[a35_0x3e3fdf(0x1ea)](){const _0x43400b=a35_0x3e3fdf;console[_0x43400b(0x1d3)]('📋\x20Getting\x20merchants\x20selection\x20list...');const _0xe3459f=await database_1[_0x43400b(0x281)][_0x43400b(0x21c)][_0x43400b(0x1bc)]({'where':{'status':_0x43400b(0x26a)},'select':{'id':!![],'username':!![],'name':!![]},'orderBy':{'name':_0x43400b(0x1c0)}});return console['log'](_0x43400b(0x1b0)+_0xe3459f[_0x43400b(0x2a8)]+'\x20active\x20merchants\x20for\x20selection'),_0xe3459f[_0x43400b(0x1cc)](_0x451571=>({'id':_0x451571['id'],'username':_0x451571[_0x43400b(0x1d4)],'name':_0x451571['name']}));}[a35_0x3e3fdf(0x25b)](_0x53536b){const _0x156e8a=a35_0x3e3fdf,_0x18be43={'test_gateway':'Test\x20Gateway','plisio':'Plisio','rapyd':_0x156e8a(0x1ad),'noda':'Noda','cointopay':_0x156e8a(0x225),'cointopay2':_0x156e8a(0x27a),'klyme_eu':_0x156e8a(0x2aa),'klyme_gb':'KLYME\x20GB','klyme_de':_0x156e8a(0x2ce),'mastercard':'MasterCard'};return _0x18be43[_0x53536b]||_0x53536b;}[a35_0x3e3fdf(0x259)](_0x424fdc){const _0x26fa96=a35_0x3e3fdf,_0xf0ea7f={'Test\x20Gateway':_0x26fa96(0x2c5),'Plisio':_0x26fa96(0x1d8),'Rapyd':'rapyd','Noda':_0x26fa96(0x204),'CoinToPay':'cointopay','CoinToPay2':_0x26fa96(0x207),'KLYME\x20EU':_0x26fa96(0x1fd),'KLYME\x20GB':'klyme_gb','KLYME\x20DE':_0x26fa96(0x2ab),'MasterCard':_0x26fa96(0x1b5)};return _0xf0ea7f[_0x424fdc]||_0x424fdc['toLowerCase']();}async['getMerchantsAwaitingPayout'](_0x5cc509){const _0x33519d=a35_0x3e3fdf,{page:_0x416f0b,limit:_0x20dd21,minAmount:_0x41771a,search:_0x58de49}=_0x5cc509,_0x4c794c=(_0x416f0b-0x1)*_0x20dd21;console['log'](_0x33519d(0x22a),_0x5cc509);const _0x5ade52={'balance':{'gt':0x0},'status':_0x33519d(0x26a)};_0x41771a&&(_0x5ade52[_0x33519d(0x2a2)][_0x33519d(0x1ca)]=_0x41771a);_0x58de49&&(_0x5ade52['OR']=[{'name':{'contains':_0x58de49,'mode':_0x33519d(0x2b3)}},{'username':{'contains':_0x58de49,'mode':'insensitive'}}]);const [_0x42a6d4,_0x4bf0a2]=await Promise[_0x33519d(0x213)]([database_1[_0x33519d(0x281)]['shop'][_0x33519d(0x1bc)]({'where':_0x5ade52,'skip':_0x4c794c,'take':_0x20dd21,'orderBy':{'balance':_0x33519d(0x1e4)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'balance':!![],'totalPaidOut':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'gatewaySettings':!![],'createdAt':!![]}}),database_1[_0x33519d(0x281)][_0x33519d(0x21c)]['count']({'where':_0x5ade52})]);console[_0x33519d(0x1d3)]('💰\x20Found\x20'+_0x42a6d4[_0x33519d(0x2a8)]+'\x20merchants\x20with\x20positive\x20balance');const _0x15c956=await Promise[_0x33519d(0x213)](_0x42a6d4[_0x33519d(0x1cc)](async _0x3fcd7a=>{const _0x1bc12e=_0x33519d,[_0x2beaad,_0x238f8c,_0x594fab]=await Promise[_0x1bc12e(0x213)]([database_1[_0x1bc12e(0x281)]['payment'][_0x1bc12e(0x290)]({'where':{'shopId':_0x3fcd7a['id'],'status':_0x1bc12e(0x228),'gateway':{'not':'test_gateway'}}}),database_1[_0x1bc12e(0x281)]['payment']['findFirst']({'where':{'shopId':_0x3fcd7a['id'],'status':_0x1bc12e(0x228),'gateway':{'not':'test_gateway'}},'orderBy':{'paidAt':_0x1bc12e(0x1c0)},'select':{'paidAt':!![]}}),database_1['default']['payment'][_0x1bc12e(0x1d6)]({'by':[_0x1bc12e(0x1f7)],'where':{'shopId':_0x3fcd7a['id'],'status':_0x1bc12e(0x228),'gateway':{'not':_0x1bc12e(0x2c5)}},'_count':{'id':!![]},'_sum':{'amountUSDT':!![]}})]),_0x56120a=new Date(),_0x3c8dde=new Date(_0x56120a['getFullYear'](),_0x56120a[_0x1bc12e(0x2a0)](),0x1),_0x4ec6e7=new Date(_0x56120a[_0x1bc12e(0x229)](),_0x56120a['getMonth']()+0x1,0x0,0x17,0x3b,0x3b,0x3e7),[_0xe2d0cf,_0x2adfa5]=await Promise[_0x1bc12e(0x213)]([database_1[_0x1bc12e(0x281)][_0x1bc12e(0x244)]['aggregate']({'_sum':{'amount':!![]},'where':{'shopId':_0x3fcd7a['id'],'status':_0x1bc12e(0x2c0)}}),database_1[_0x1bc12e(0x281)][_0x1bc12e(0x244)][_0x1bc12e(0x24e)]({'_sum':{'amount':!![]},'where':{'shopId':_0x3fcd7a['id'],'status':_0x1bc12e(0x2c0),'createdAt':{'gte':_0x3c8dde,'lte':_0x4ec6e7}}})]),_0x5edded=_0xe2d0cf[_0x1bc12e(0x200)][_0x1bc12e(0x27e)]||0x0,_0x1a1ddb=_0x2adfa5[_0x1bc12e(0x200)][_0x1bc12e(0x27e)]||0x0,_0x948dc9=await Promise[_0x1bc12e(0x213)](_0x594fab['map'](async _0x364cf6=>{const _0x3c1c37=_0x1bc12e;let _0x47a0df=0xa;if(_0x3fcd7a['gatewaySettings'])try{const _0xcc525b=JSON[_0x3c1c37(0x1db)](_0x3fcd7a[_0x3c1c37(0x19e)]);for(const [_0x4f35fa,_0x309d74]of Object[_0x3c1c37(0x1ff)](_0xcc525b)){if(_0x4f35fa[_0x3c1c37(0x1bf)]()===_0x364cf6[_0x3c1c37(0x1f7)]['toLowerCase']()){_0x47a0df=_0x309d74[_0x3c1c37(0x272)]||0xa,console[_0x3c1c37(0x1d3)](_0x3c1c37(0x1ae)+_0x364cf6[_0x3c1c37(0x1f7)]+_0x3c1c37(0x1c3)+_0x3fcd7a['id']+_0x3c1c37(0x222)+_0x47a0df+'%');break;}}}catch(_0x2c7335){console[_0x3c1c37(0x2a9)](_0x3c1c37(0x2cb)+_0x3fcd7a['id']+':',_0x2c7335);}const _0x426aac=_0x364cf6[_0x3c1c37(0x200)]?.[_0x3c1c37(0x21a)]||0x0,_0x38ed2a=_0x426aac*(0x1-_0x47a0df/0x64);return{'gateway':_0x364cf6['gateway'],'count':_0x364cf6['_count']?.['id']||0x0,'amountUSDT':Math[_0x3c1c37(0x1b4)](_0x426aac*0x64)/0x64,'amountAfterCommissionUSDT':Math['round'](_0x38ed2a*0x64)/0x64,'commission':_0x47a0df};})),_0x5b8aae=_0x948dc9[_0x1bc12e(0x262)]((_0x338bfa,_0x58e7c1)=>_0x338bfa+_0x58e7c1[_0x1bc12e(0x21a)],0x0),_0x2dfc01=_0x3fcd7a[_0x1bc12e(0x2a2)];return console[_0x1bc12e(0x1d3)]('💰\x20[PAYOUT]\x20Merchant\x20'+_0x3fcd7a['username']+':'),console[_0x1bc12e(0x1d3)]('\x20\x20\x20�\x20Total\x20payments\x20turnover:\x20'+_0x5b8aae[_0x1bc12e(0x238)](0x2)+_0x1bc12e(0x243)),console[_0x1bc12e(0x1d3)](_0x1bc12e(0x29d)+_0x948dc9[_0x1bc12e(0x262)]((_0x43bf1e,_0x4ba081)=>_0x43bf1e+_0x4ba081['amountAfterCommissionUSDT'],0x0)[_0x1bc12e(0x238)](0x2)+_0x1bc12e(0x2b7)),console[_0x1bc12e(0x1d3)]('\x20\x20\x20✅\x20Actual\x20available\x20balance:\x20'+_0x2dfc01['toFixed'](0x2)+'\x20USDT\x20(after\x20payouts)'),{'id':_0x3fcd7a['id'],'fullName':_0x3fcd7a['name'],'username':_0x3fcd7a[_0x1bc12e(0x1d4)],'telegramId':_0x3fcd7a['telegram'],'merchantUrl':_0x3fcd7a['shopUrl'],'wallets':{'usdtPolygonWallet':_0x3fcd7a[_0x1bc12e(0x268)],'usdtTrcWallet':_0x3fcd7a[_0x1bc12e(0x20b)],'usdtErcWallet':_0x3fcd7a['usdtErcWallet'],'usdcPolygonWallet':_0x3fcd7a[_0x1bc12e(0x271)]},'totalAmountUSDT':Math['round'](_0x5b8aae*0x64)/0x64,'totalAmountAfterCommissionUSDT':Math['round'](_0x2dfc01*0x64)/0x64,'totalPayout':Math['round'](_0x5edded*0x64)/0x64,'thisMonth':Math[_0x1bc12e(0x1b4)](_0x1a1ddb*0x64)/0x64,'paymentsCount':_0x2beaad,'oldestPaymentDate':_0x238f8c?.['paidAt']||_0x3fcd7a['createdAt'],'gatewayBreakdown':_0x948dc9};})),_0x3c2ecf=_0x15c956['reduce']((_0x2d83d3,_0x306ff2)=>_0x2d83d3+_0x306ff2[_0x33519d(0x2b2)],0x0),_0x37c837=_0x15c956[_0x33519d(0x262)]((_0x111b81,_0x12c596)=>_0x111b81+_0x12c596[_0x33519d(0x216)],0x0),_0x3df109=_0x15c956[_0x33519d(0x262)]((_0x2a114b,_0x109011)=>_0x2a114b+_0x109011['totalPayout'],0x0),_0x1e46ec=_0x15c956[_0x33519d(0x262)]((_0xf05698,_0x106597)=>_0xf05698+_0x106597[_0x33519d(0x20e)],0x0);return console[_0x33519d(0x1d3)](_0x33519d(0x1c7)+_0x4bf0a2+'\x20merchants'),console['log']('\x20\x20\x20💰\x20Total\x20payments\x20turnover:\x20'+Math[_0x33519d(0x1b4)](_0x3c2ecf*0x64)/0x64+_0x33519d(0x243)),console['log']('\x20\x20\x20✅\x20Total\x20available\x20for\x20payout:\x20'+Math[_0x33519d(0x1b4)](_0x37c837*0x64)/0x64+_0x33519d(0x1e7)),console[_0x33519d(0x1d3)]('\x20\x20\x20💸\x20Total\x20payouts\x20(all\x20time):\x20'+Math['round'](_0x3df109*0x64)/0x64+'\x20USDT'),console['log'](_0x33519d(0x1c1)+Math[_0x33519d(0x1b4)](_0x1e46ec*0x64)/0x64+_0x33519d(0x227)),{'merchants':_0x15c956,'pagination':{'page':_0x416f0b,'limit':_0x20dd21,'total':_0x4bf0a2,'totalPages':Math[_0x33519d(0x1bd)](_0x4bf0a2/_0x20dd21)},'summary':{'totalMerchants':_0x4bf0a2,'totalAmountUSDT':Math[_0x33519d(0x1b4)](_0x3c2ecf*0x64)/0x64,'totalAmountAfterCommissionUSDT':Math[_0x33519d(0x1b4)](_0x37c837*0x64)/0x64,'totalPayout':Math[_0x33519d(0x1b4)](_0x3df109*0x64)/0x64,'thisMonth':Math[_0x33519d(0x1b4)](_0x1e46ec*0x64)/0x64}};}async[a35_0x3e3fdf(0x285)](_0xb9ff1){const _0x38aac5=a35_0x3e3fdf,{shopId:_0x126436,amount:_0x486972,network:_0x4b3c8e,wallet:_0xfce9ef,notes:_0x5890b5,txid:_0x548349,periodFrom:_0x47f849,periodTo:_0x25e917}=_0xb9ff1,_0x32fe81=await database_1[_0x38aac5(0x281)][_0x38aac5(0x242)](async _0x46bd9c=>{const _0x580688=_0x38aac5,_0x32e6d8=await _0x46bd9c[_0x580688(0x21c)][_0x580688(0x217)]({'where':{'id':_0x126436},'select':{'id':!![],'name':!![],'username':!![],'balance':!![],'totalPaidOut':!![]}});if(!_0x32e6d8)throw new Error('Shop\x20not\x20found');console[_0x580688(0x1d3)](_0x580688(0x2c7)+_0x32e6d8[_0x580688(0x1d4)]+':'),console[_0x580688(0x1d3)](_0x580688(0x1a0)+_0x32e6d8[_0x580688(0x2a2)][_0x580688(0x238)](0x6)+'\x20USDT'),console[_0x580688(0x1d3)](_0x580688(0x1aa)+_0x486972[_0x580688(0x238)](0x6)+_0x580688(0x227)),console[_0x580688(0x1d3)](_0x580688(0x233)+_0x32e6d8[_0x580688(0x1d9)][_0x580688(0x238)](0x6)+'\x20USDT');if(_0x548349)console['log'](_0x580688(0x1cb)+_0x548349);if(_0x32e6d8[_0x580688(0x2a2)]<_0x486972)throw new Error(_0x580688(0x2a3)+_0x32e6d8[_0x580688(0x2a2)][_0x580688(0x238)](0x6)+_0x580688(0x22f)+_0x486972[_0x580688(0x238)](0x6)+'\x20USDT');let _0x2db7a6=_0xfce9ef;if(!_0x2db7a6){const _0x21b470=await _0x46bd9c[_0x580688(0x21c)][_0x580688(0x217)]({'where':{'id':_0x126436},'select':{'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![]}});if(_0x21b470)switch(_0x4b3c8e){case'polygon':_0x2db7a6=_0x21b470[_0x580688(0x268)]||undefined;break;case _0x580688(0x2c3):_0x2db7a6=_0x21b470[_0x580688(0x20b)]||undefined;break;case _0x580688(0x212):_0x2db7a6=_0x21b470[_0x580688(0x219)]||undefined;break;case _0x580688(0x1ee):_0x2db7a6=_0x21b470['usdcPolygonWallet']||undefined;break;}}console[_0x580688(0x1d3)](_0x580688(0x1a5)+_0x4b3c8e+':\x20'+(_0x2db7a6||_0x580688(0x2bb)));const _0x27ba54=await _0x46bd9c[_0x580688(0x244)][_0x580688(0x23c)]({'data':{'shopId':_0x126436,'amount':_0x486972,'network':_0x4b3c8e,'status':'COMPLETED','txid':_0x548349,'notes':_0x5890b5,'periodFrom':_0x47f849?new Date(_0x47f849):null,'periodTo':_0x25e917?new Date(_0x25e917):null,'createdAt':new Date(),'paidAt':new Date()}}),_0x58c826=_0x32e6d8[_0x580688(0x2a2)]-_0x486972,_0x596ec0=_0x32e6d8['totalPaidOut']+_0x486972;return await _0x46bd9c['shop'][_0x580688(0x26f)]({'where':{'id':_0x126436},'data':{'balance':_0x58c826,'totalPaidOut':_0x596ec0}}),console[_0x580688(0x1d3)]('💰\x20Shop\x20'+_0x32e6d8[_0x580688(0x1d4)]+_0x580688(0x1de)),console['log'](_0x580688(0x27b)+_0x32e6d8[_0x580688(0x2a2)][_0x580688(0x238)](0x6)+'\x20->\x20'+_0x58c826['toFixed'](0x6)+'\x20USDT\x20(-'+_0x486972[_0x580688(0x238)](0x6)+')'),console[_0x580688(0x1d3)](_0x580688(0x24f)+_0x32e6d8[_0x580688(0x1d9)][_0x580688(0x238)](0x6)+_0x580688(0x1c9)+_0x596ec0['toFixed'](0x6)+_0x580688(0x1f9)+_0x486972['toFixed'](0x6)+')'),{'payout':_0x27ba54,'shop':_0x32e6d8};});return console[_0x38aac5(0x1d3)](_0x38aac5(0x1c4)+_0x32fe81[_0x38aac5(0x244)]['id']+'\x20for\x20shop\x20'+_0x32fe81[_0x38aac5(0x21c)][_0x38aac5(0x1d4)]+'\x20('+_0x486972+_0x38aac5(0x1a1)),{'id':_0x32fe81[_0x38aac5(0x244)]['id'],'shopId':_0x32fe81[_0x38aac5(0x244)][_0x38aac5(0x2c6)],'shopName':_0x32fe81['shop']['name'],'shopUsername':_0x32fe81[_0x38aac5(0x21c)][_0x38aac5(0x1d4)],'amount':_0x32fe81[_0x38aac5(0x244)][_0x38aac5(0x27e)],'network':_0x32fe81[_0x38aac5(0x244)][_0x38aac5(0x231)],'status':_0x32fe81[_0x38aac5(0x244)][_0x38aac5(0x226)],'txid':_0x32fe81['payout'][_0x38aac5(0x1be)],'notes':_0x32fe81[_0x38aac5(0x244)][_0x38aac5(0x258)],'periodFrom':_0x32fe81['payout'][_0x38aac5(0x21b)],'periodTo':_0x32fe81[_0x38aac5(0x244)][_0x38aac5(0x1cd)],'createdAt':_0x32fe81['payout'][_0x38aac5(0x2be)],'paidAt':_0x32fe81[_0x38aac5(0x244)][_0x38aac5(0x1c8)]};}async[a35_0x3e3fdf(0x1f4)](_0x2cbad8){const _0x2a7bd4=a35_0x3e3fdf,{page:_0x54a5d1,limit:_0x36e123,shopId:_0x931d51,network:_0x52e909,dateFrom:_0x5059fb,dateTo:_0x4dee0e,search:_0xdeb19}=_0x2cbad8,_0x29c6dd=(_0x54a5d1-0x1)*_0x36e123,_0x36d708={};_0x931d51&&(_0x36d708[_0x2a7bd4(0x2c6)]=_0x931d51);_0x52e909&&(_0x36d708[_0x2a7bd4(0x231)]=_0x52e909);(_0x5059fb||_0x4dee0e)&&(_0x36d708[_0x2a7bd4(0x2be)]={},_0x5059fb&&(_0x36d708[_0x2a7bd4(0x2be)][_0x2a7bd4(0x1ca)]=new Date(_0x5059fb)),_0x4dee0e&&(_0x36d708[_0x2a7bd4(0x2be)][_0x2a7bd4(0x247)]=new Date(_0x4dee0e)));_0xdeb19&&(_0x36d708['OR']=[{'shop':{'name':{'contains':_0xdeb19,'mode':_0x2a7bd4(0x2b3)}}},{'shop':{'username':{'contains':_0xdeb19,'mode':_0x2a7bd4(0x2b3)}}},{'notes':{'contains':_0xdeb19,'mode':_0x2a7bd4(0x2b3)}}]);const [_0x45e00e,_0x585018]=await Promise['all']([database_1[_0x2a7bd4(0x281)][_0x2a7bd4(0x244)]['findMany']({'where':_0x36d708,'skip':_0x29c6dd,'take':_0x36e123,'orderBy':{'createdAt':_0x2a7bd4(0x1e4)},'select':{'id':!![],'shopId':!![],'amount':!![],'network':!![],'status':!![],'txid':!![],'notes':!![],'periodFrom':!![],'periodTo':!![],'createdAt':!![],'paidAt':!![],'shop':{'select':{'name':!![],'username':!![]}}}}),database_1[_0x2a7bd4(0x281)][_0x2a7bd4(0x244)][_0x2a7bd4(0x290)]({'where':_0x36d708})]);return{'payouts':_0x45e00e[_0x2a7bd4(0x1cc)](_0x5b27d6=>({'id':_0x5b27d6['id'],'shopId':_0x5b27d6['shopId'],'shopName':_0x5b27d6['shop'][_0x2a7bd4(0x201)],'shopUsername':_0x5b27d6[_0x2a7bd4(0x21c)][_0x2a7bd4(0x1d4)],'amount':_0x5b27d6['amount'],'network':_0x5b27d6['network'],'status':_0x5b27d6['status'],'txid':_0x5b27d6[_0x2a7bd4(0x1be)],'notes':_0x5b27d6[_0x2a7bd4(0x258)],'periodFrom':_0x5b27d6[_0x2a7bd4(0x21b)],'periodTo':_0x5b27d6[_0x2a7bd4(0x1cd)],'createdAt':_0x5b27d6[_0x2a7bd4(0x2be)],'paidAt':_0x5b27d6[_0x2a7bd4(0x1c8)]})),'pagination':{'page':_0x54a5d1,'limit':_0x36e123,'total':_0x585018,'totalPages':Math[_0x2a7bd4(0x1bd)](_0x585018/_0x36e123)}};}async[a35_0x3e3fdf(0x27c)](_0x262d53){const _0x581565=a35_0x3e3fdf,_0x5478de=await database_1['default'][_0x581565(0x244)][_0x581565(0x217)]({'where':{'id':_0x262d53},'include':{'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x5478de)return null;return{'id':_0x5478de['id'],'shopId':_0x5478de[_0x581565(0x2c6)],'shopName':_0x5478de[_0x581565(0x21c)][_0x581565(0x201)],'shopUsername':_0x5478de[_0x581565(0x21c)]['username'],'amount':_0x5478de['amount'],'network':_0x5478de['network'],'status':_0x5478de[_0x581565(0x226)],'txid':_0x5478de[_0x581565(0x1be)],'notes':_0x5478de[_0x581565(0x258)],'periodFrom':_0x5478de['periodFrom'],'periodTo':_0x5478de[_0x581565(0x1cd)],'createdAt':_0x5478de[_0x581565(0x2be)],'paidAt':_0x5478de['paidAt']};}async[a35_0x3e3fdf(0x2c4)](_0x34c192){const _0xca782=a35_0x3e3fdf;await database_1[_0xca782(0x281)]['payout']['delete']({'where':{'id':_0x34c192}});}async[a35_0x3e3fdf(0x261)](_0x4ca2ab){const _0x43c52f=a35_0x3e3fdf,{page:_0x1469af,limit:_0x58f3fd,status:_0x3c77f9,gateway:_0x49a1e5,shopId:_0x3e354d,dateFrom:_0x40deef,dateTo:_0x5edf97,search:_0x25f8ae,currency:_0x2c676f,sortBy:_0x4645d0,sortOrder:_0x3561c1}=_0x4ca2ab,_0xfb1f3a=(_0x1469af-0x1)*_0x58f3fd;console[_0x43c52f(0x1d3)]('📊\x20Getting\x20payments\x20with\x20filters:',_0x4ca2ab);const _0xbc231a=await database_1[_0x43c52f(0x281)]['payment'][_0x43c52f(0x1d6)]({'by':[_0x43c52f(0x1f7)],'_count':{'gateway':!![]}});console[_0x43c52f(0x1d3)](_0x43c52f(0x230),_0xbc231a[_0x43c52f(0x1cc)](_0x1d84ef=>_0x1d84ef[_0x43c52f(0x1f7)]+'\x20('+_0x1d84ef[_0x43c52f(0x2bd)]['gateway']+'\x20payments)'));if(_0x49a1e5){const _0x4fab1f=_0xbc231a[_0x43c52f(0x1eb)](_0x211f8b=>_0x211f8b[_0x43c52f(0x1f7)][_0x43c52f(0x1bf)]()===_0x49a1e5['toLowerCase']());!_0x4fab1f&&_0x49a1e5[_0x43c52f(0x1bf)]()!=='test_gateway'&&console['log'](_0x43c52f(0x2a5)+_0x49a1e5+'\x27\x20not\x20found.\x20Available\x20gateways:\x20'+_0xbc231a[_0x43c52f(0x1cc)](_0x57b63e=>_0x57b63e[_0x43c52f(0x1f7)])[_0x43c52f(0x2a1)](',\x20'));}const _0x42a18f={};_0x3c77f9&&(_0x42a18f[_0x43c52f(0x226)]=_0x3c77f9['toUpperCase']());if(!_0x49a1e5)_0x42a18f[_0x43c52f(0x1f7)]={'not':_0x43c52f(0x2c5)};else{if(_0x49a1e5&&(_0x49a1e5[_0x43c52f(0x1bf)]()===_0x43c52f(0x2c5)||_0x49a1e5===_0x43c52f(0x245)))_0x42a18f[_0x43c52f(0x1f7)]='test_gateway';else{let _0x8616e8=_0x49a1e5;const _0xa06bd4=(0x0,gateway_1[_0x43c52f(0x2c1)])(_0x49a1e5);if(_0xa06bd4)_0x8616e8=_0xa06bd4,console['log'](_0x43c52f(0x279)+_0x49a1e5+_0x43c52f(0x265)+_0x8616e8+'\x27');else{const _0x111956=(0x0,gateway_1[_0x43c52f(0x218)])(_0x49a1e5);if(_0x111956){const _0xc5f8e3=(0x0,gateway_1[_0x43c52f(0x2c1)])(_0x111956);_0xc5f8e3&&(_0x8616e8=_0xc5f8e3,console['log']('🔄\x20Converted\x20gateway\x20name\x20\x27'+_0x49a1e5+'\x27\x20->\x20ID\x20\x27'+_0x111956+_0x43c52f(0x1b1)+_0x8616e8+'\x27'));}else console[_0x43c52f(0x1d3)](_0x43c52f(0x202)+_0x49a1e5+_0x43c52f(0x1b6));}const _0x290687=await database_1['default'][_0x43c52f(0x1e9)][_0x43c52f(0x290)]({'where':{'gateway':_0x8616e8[_0x43c52f(0x1bf)]()},'take':0x1});_0x290687===0x0?(console[_0x43c52f(0x1d3)](_0x43c52f(0x283)+_0x8616e8+_0x43c52f(0x2ba)+_0x49a1e5+_0x43c52f(0x28a)),_0x42a18f['gateway']=_0x43c52f(0x289)):(_0x42a18f[_0x43c52f(0x1f7)]=_0x8616e8[_0x43c52f(0x1bf)](),console['log'](_0x43c52f(0x25a)+_0x8616e8+_0x43c52f(0x2ba)+_0x49a1e5+'\x27)'));}}console[_0x43c52f(0x1d3)](_0x43c52f(0x25c),_0x42a18f[_0x43c52f(0x1f7)]);_0x3e354d&&(_0x42a18f[_0x43c52f(0x2c6)]=_0x3e354d);_0x2c676f&&(_0x42a18f[_0x43c52f(0x215)]=_0x2c676f[_0x43c52f(0x1fa)](),console[_0x43c52f(0x1d3)]('💱\x20Currency\x20filter\x20applied:\x20'+_0x2c676f[_0x43c52f(0x1fa)]()));(_0x40deef||_0x5edf97)&&(_0x42a18f[_0x43c52f(0x2be)]={},_0x40deef&&(_0x42a18f[_0x43c52f(0x2be)][_0x43c52f(0x1ca)]=new Date(_0x40deef)),_0x5edf97&&(_0x42a18f[_0x43c52f(0x2be)][_0x43c52f(0x247)]=new Date(_0x5edf97)));_0x25f8ae&&(_0x42a18f['OR']=[{'id':{'contains':_0x25f8ae,'mode':'insensitive'}},{'orderId':{'contains':_0x25f8ae,'mode':_0x43c52f(0x2b3)}},{'gatewayOrderId':{'contains':_0x25f8ae,'mode':_0x43c52f(0x2b3)}},{'customerEmail':{'contains':_0x25f8ae,'mode':_0x43c52f(0x2b3)}},{'shop':{'name':{'contains':_0x25f8ae,'mode':_0x43c52f(0x2b3)}}},{'shop':{'username':{'contains':_0x25f8ae,'mode':_0x43c52f(0x2b3)}}}]);console[_0x43c52f(0x1d3)](_0x43c52f(0x236),JSON[_0x43c52f(0x28c)](_0x42a18f,null,0x2));let _0x1c7c6={'createdAt':_0x43c52f(0x1e4)};if(_0x4645d0){const _0xb0c6e7=[_0x43c52f(0x27e),_0x43c52f(0x2be),_0x43c52f(0x19f),_0x43c52f(0x226),_0x43c52f(0x1f7),_0x43c52f(0x215)],_0x275610=[_0x43c52f(0x1c0),_0x43c52f(0x1e4)];if(_0xb0c6e7['includes'](_0x4645d0)){const _0x106fa7=_0x275610['includes'](_0x3561c1)?_0x3561c1:_0x43c52f(0x1e4);_0x1c7c6={[_0x4645d0]:_0x106fa7},console[_0x43c52f(0x1d3)](_0x43c52f(0x251)+_0x4645d0+_0x43c52f(0x20c)+_0x106fa7+_0x43c52f(0x2a6));}}const [_0x439b93,_0x37b260]=await Promise[_0x43c52f(0x213)]([database_1[_0x43c52f(0x281)][_0x43c52f(0x1e9)][_0x43c52f(0x1bc)]({'where':_0x42a18f,'skip':_0xfb1f3a,'take':_0x58f3fd,'orderBy':_0x1c7c6,'include':{'shop':{'select':{'name':!![],'username':!![]}}}}),database_1[_0x43c52f(0x281)][_0x43c52f(0x1e9)][_0x43c52f(0x290)]({'where':_0x42a18f})]);return{'payments':_0x439b93,'pagination':{'page':_0x1469af,'limit':_0x58f3fd,'total':_0x37b260,'totalPages':Math[_0x43c52f(0x1bd)](_0x37b260/_0x58f3fd)}};}async[a35_0x3e3fdf(0x273)](_0xf913a){const _0x1bae2f=a35_0x3e3fdf,_0x299a03=await database_1[_0x1bae2f(0x281)]['payment'][_0x1bae2f(0x217)]({'where':{'id':_0xf913a},'include':{'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x299a03)return null;return{'id':_0x299a03['id'],'shopId':_0x299a03[_0x1bae2f(0x2c6)],'gateway':_0x299a03[_0x1bae2f(0x1f7)],'amount':_0x299a03['amount'],'currency':_0x299a03['currency'],'status':_0x299a03[_0x1bae2f(0x226)],'orderId':_0x299a03[_0x1bae2f(0x21e)],'gatewayOrderId':_0x299a03['gatewayOrderId'],'customerEmail':_0x299a03[_0x1bae2f(0x205)],'customerName':_0x299a03['customerName'],'customerCountry':_0x299a03['customerCountry'],'customerIp':_0x299a03[_0x1bae2f(0x2b8)],'customerUa':_0x299a03['customerUa'],'failureMessage':_0x299a03[_0x1bae2f(0x28d)],'externalPaymentUrl':_0x299a03[_0x1bae2f(0x1a8)],'successUrl':_0x299a03[_0x1bae2f(0x287)],'failUrl':_0x299a03[_0x1bae2f(0x1f0)],'pendingUrl':_0x299a03[_0x1bae2f(0x29c)],'whiteUrl':_0x299a03['whiteUrl'],'createdAt':_0x299a03[_0x1bae2f(0x2be)],'updatedAt':_0x299a03[_0x1bae2f(0x19f)],'shop':_0x299a03[_0x1bae2f(0x21c)]};}async[a35_0x3e3fdf(0x234)](_0x4ac2ef,_0xbcea78,_0x4ead15,_0x27ba95){const _0x59c0c3=a35_0x3e3fdf,_0x35aeac=await database_1[_0x59c0c3(0x281)][_0x59c0c3(0x242)](async _0x517ba5=>{const _0x2282d5=_0x59c0c3,_0x408578=await _0x517ba5['payment'][_0x2282d5(0x217)]({'where':{'id':_0x4ac2ef},'include':{'shop':{'select':{'id':!![],'name':!![],'username':!![],'balance':!![]}}}});if(!_0x408578)throw new Error(_0x2282d5(0x293));const _0x2bcb3c=_0x408578['status'],_0x3e0ad6=_0xbcea78['toUpperCase']();console[_0x2282d5(0x1d3)]('🔄\x20Admin\x20updating\x20payment\x20'+_0x4ac2ef+_0x2282d5(0x1ce)+_0x2bcb3c+_0x2282d5(0x1c9)+_0x3e0ad6),console[_0x2282d5(0x1d3)](_0x2282d5(0x257)+_0x408578['shop'][_0x2282d5(0x2a2)]+_0x2282d5(0x227));const _0x562630={'status':_0x3e0ad6,'updatedAt':new Date(),'statusChangedBy':_0x2282d5(0x1e3),'statusChangedAt':new Date()};_0x4ead15&&(_0x562630[_0x2282d5(0x235)]=_0x4ead15);_0x3e0ad6===_0x2282d5(0x263)&&_0x27ba95&&(_0x562630['chargebackAmount']=_0x27ba95);let _0x1af69e=0x0,_0x4b6b9a=_0x408578[_0x2282d5(0x21c)][_0x2282d5(0x2a2)];if(_0x3e0ad6===_0x2282d5(0x228)&&_0x2bcb3c!=='PAID'){_0x562630[_0x2282d5(0x1c8)]=new Date();const _0x4f059e=await currencyService_1['currencyService'][_0x2282d5(0x1a7)](_0x408578[_0x2282d5(0x27e)],_0x408578['currency']);_0x562630[_0x2282d5(0x21a)]=_0x4f059e;let _0x54c81d=0xa;const _0x5b5fa7=await _0x517ba5['shop'][_0x2282d5(0x217)]({'where':{'id':_0x408578['shopId']},'select':{'gatewaySettings':!![]}});if(_0x5b5fa7?.['gatewaySettings'])try{const _0x5d80bb=JSON[_0x2282d5(0x1db)](_0x5b5fa7['gatewaySettings']);for(const [_0x421c90,_0x206b13]of Object['entries'](_0x5d80bb)){if(_0x421c90[_0x2282d5(0x1bf)]()===_0x408578['gateway']['toLowerCase']()){_0x54c81d=_0x206b13[_0x2282d5(0x272)]||0xa;break;}}}catch(_0x448730){console[_0x2282d5(0x2a9)]('Error\x20parsing\x20gateway\x20settings\x20for\x20payment\x20'+_0x4ac2ef+':',_0x448730);}let _0x74bddf;_0x408578['amountAfterGatewayCommissionUSDT']!==null&&_0x408578[_0x2282d5(0x1bb)]!==undefined?(_0x74bddf=_0x408578[_0x2282d5(0x1bb)],console[_0x2282d5(0x1d3)]('📊\x20[ADMIN]\x20Using\x20saved\x20amountAfterGatewayCommissionUSDT:\x20'+_0x74bddf['toFixed'](0x6)+_0x2282d5(0x294)+_0x4ac2ef)):(_0x74bddf=_0x4f059e*(0x1-_0x54c81d/0x64),console['log']('📊\x20[ADMIN]\x20Calculating\x20commission\x20manually\x20for\x20payment\x20'+_0x4ac2ef+':\x20'+_0x54c81d+_0x2282d5(0x29a)+_0x4f059e[_0x2282d5(0x238)](0x6)+'\x20USDT'),_0x562630['amountAfterGatewayCommissionUSDT']=_0x74bddf),_0x1af69e=_0x74bddf,_0x4b6b9a+=_0x74bddf,console['log'](_0x2282d5(0x286)+_0x4ac2ef+_0x2282d5(0x23a)),console[_0x2282d5(0x1d3)](_0x2282d5(0x276)+_0x4f059e[_0x2282d5(0x238)](0x6)+_0x2282d5(0x227)),console[_0x2282d5(0x1d3)]('\x20\x20\x20Gateway:\x20'+_0x408578[_0x2282d5(0x1f7)]+',\x20Commission:\x20'+_0x54c81d+'%'),console['log']('\x20\x20\x20Merchant\x20gets:\x20'+_0x74bddf[_0x2282d5(0x238)](0x6)+_0x2282d5(0x249)+_0x54c81d+'%\x20commission)'),console[_0x2282d5(0x1d3)](_0x2282d5(0x203)+_0x74bddf['toFixed'](0x6)+_0x2282d5(0x227));}else{if(_0x2bcb3c===_0x2282d5(0x228)&&_0x3e0ad6!==_0x2282d5(0x228)){if(_0x408578[_0x2282d5(0x21a)]){let _0x3a8cee=0xa;const _0x2d7706=await _0x517ba5[_0x2282d5(0x21c)][_0x2282d5(0x217)]({'where':{'id':_0x408578[_0x2282d5(0x2c6)]},'select':{'gatewaySettings':!![]}});if(_0x2d7706?.[_0x2282d5(0x19e)])try{const _0x1c4987=JSON[_0x2282d5(0x1db)](_0x2d7706[_0x2282d5(0x19e)]);for(const [_0x570a31,_0x1e8b35]of Object[_0x2282d5(0x1ff)](_0x1c4987)){if(_0x570a31[_0x2282d5(0x1bf)]()===_0x408578[_0x2282d5(0x1f7)][_0x2282d5(0x1bf)]()){_0x3a8cee=_0x1e8b35[_0x2282d5(0x272)]||0xa;break;}}}catch(_0x54b26a){console[_0x2282d5(0x2a9)](_0x2282d5(0x253)+_0x4ac2ef+':',_0x54b26a);}const _0x3c938e=_0x408578[_0x2282d5(0x21a)]*(0x1-_0x3a8cee/0x64);_0x1af69e=-_0x3c938e,_0x4b6b9a-=_0x3c938e,_0x562630[_0x2282d5(0x21a)]=null,_0x562630['amountAfterGatewayCommissionUSDT']=null,console[_0x2282d5(0x1d3)](_0x2282d5(0x286)+_0x4ac2ef+_0x2282d5(0x24a)),console[_0x2282d5(0x1d3)](_0x2282d5(0x276)+_0x408578[_0x2282d5(0x21a)][_0x2282d5(0x238)](0x6)+'\x20USDT'),console[_0x2282d5(0x1d3)](_0x2282d5(0x1cf)+_0x408578[_0x2282d5(0x1f7)]+_0x2282d5(0x264)+_0x3a8cee+'%'),console[_0x2282d5(0x1d3)](_0x2282d5(0x1f6)+_0x3c938e[_0x2282d5(0x238)](0x6)+_0x2282d5(0x249)+_0x3a8cee+'%\x20commission)'),console[_0x2282d5(0x1d3)](_0x2282d5(0x260)+_0x3c938e[_0x2282d5(0x238)](0x6)+_0x2282d5(0x227));}}}_0x3e0ad6==='CHARGEBACK'&&(_0x2bcb3c==='PAID'&&_0x408578[_0x2282d5(0x21a)]&&console[_0x2282d5(0x1d3)](_0x2282d5(0x2ad)),_0x27ba95&&_0x27ba95>0x0&&(_0x1af69e-=_0x27ba95,_0x4b6b9a-=_0x27ba95,console[_0x2282d5(0x1d3)](_0x2282d5(0x208)+_0x27ba95[_0x2282d5(0x238)](0x6)+'\x20USDT\x20from\x20balance')));_0x3e0ad6===_0x2282d5(0x1f2)&&_0x2bcb3c===_0x2282d5(0x228)&&console['log'](_0x2282d5(0x2ac));const _0x439cef=await _0x517ba5['payment'][_0x2282d5(0x26f)]({'where':{'id':_0x4ac2ef},'data':_0x562630,'include':{'shop':{'select':{'name':!![],'username':!![]}}}});return _0x1af69e!==0x0&&(await _0x517ba5['shop'][_0x2282d5(0x26f)]({'where':{'id':_0x408578[_0x2282d5(0x2c6)]},'data':{'balance':_0x4b6b9a}}),console[_0x2282d5(0x1d3)]('💰\x20Shop\x20'+_0x408578[_0x2282d5(0x2c6)]+_0x2282d5(0x1d2)+_0x408578['shop'][_0x2282d5(0x2a2)][_0x2282d5(0x238)](0x6)+_0x2282d5(0x1c9)+_0x4b6b9a[_0x2282d5(0x238)](0x6)+_0x2282d5(0x282)+(_0x1af69e>0x0?'+':'')+_0x1af69e[_0x2282d5(0x238)](0x6)+')')),_0x439cef;});return{'id':_0x35aeac['id'],'shopId':_0x35aeac['shopId'],'gateway':_0x35aeac[_0x59c0c3(0x1f7)],'amount':_0x35aeac[_0x59c0c3(0x27e)],'currency':_0x35aeac[_0x59c0c3(0x215)],'status':_0x35aeac['status'],'orderId':_0x35aeac[_0x59c0c3(0x21e)],'gatewayOrderId':_0x35aeac[_0x59c0c3(0x1a3)],'customerEmail':_0x35aeac[_0x59c0c3(0x205)],'customerName':_0x35aeac[_0x59c0c3(0x2ca)],'customerCountry':_0x35aeac[_0x59c0c3(0x1fc)],'customerIp':_0x35aeac[_0x59c0c3(0x2b8)],'customerUa':_0x35aeac[_0x59c0c3(0x241)],'failureMessage':_0x35aeac[_0x59c0c3(0x28d)],'adminNotes':_0x35aeac[_0x59c0c3(0x235)],'chargebackAmount':_0x35aeac[_0x59c0c3(0x1f8)],'statusChangedBy':_0x35aeac[_0x59c0c3(0x278)],'statusChangedAt':_0x35aeac[_0x59c0c3(0x20f)],'createdAt':_0x35aeac[_0x59c0c3(0x2be)],'updatedAt':_0x35aeac[_0x59c0c3(0x19f)],'shop':_0x35aeac[_0x59c0c3(0x21c)]};}async[a35_0x3e3fdf(0x20d)](_0x282dc8,_0x5ed526){const _0x331d57=a35_0x3e3fdf,_0x5ac8c8=Math[_0x331d57(0x1b8)]()[_0x331d57(0x1a6)](0x24)['substr'](0x2,0x9);console[_0x331d57(0x1d3)]('🎯\x20updateUser\x20called\x20with\x20ID:\x20'+_0x5ac8c8+_0x331d57(0x1c2)+_0x282dc8);const _0x1827a2={..._0x5ed526};_0x5ed526[_0x331d57(0x2b5)]&&_0x5ed526['password'][_0x331d57(0x1ba)]()!==''?(console['log']('🔐\x20['+_0x5ac8c8+']\x20Updating\x20password\x20for\x20user\x20'+_0x282dc8),_0x1827a2[_0x331d57(0x2b5)]=await bcryptjs_1['default']['hash'](_0x5ed526[_0x331d57(0x2b5)],0xc)):(console[_0x331d57(0x1d3)](_0x331d57(0x1e6)+_0x5ac8c8+_0x331d57(0x1e0)),delete _0x1827a2[_0x331d57(0x2b5)]);_0x5ed526[_0x331d57(0x27f)]&&(_0x1827a2[_0x331d57(0x201)]=_0x5ed526[_0x331d57(0x27f)],delete _0x1827a2[_0x331d57(0x27f)]);_0x5ed526['telegramId']&&(_0x1827a2[_0x331d57(0x246)]=_0x5ed526[_0x331d57(0x2b9)],delete _0x1827a2[_0x331d57(0x2b9)]);_0x5ed526[_0x331d57(0x2c9)]&&(_0x1827a2[_0x331d57(0x1da)]=_0x5ed526[_0x331d57(0x2c9)],delete _0x1827a2['merchantUrl']);if(_0x5ed526[_0x331d57(0x2c8)]){const _0x51d54a=_0x5ed526[_0x331d57(0x2c8)][_0x331d57(0x1cc)](_0x16be2e=>this[_0x331d57(0x259)](_0x16be2e));console[_0x331d57(0x1d3)](_0x331d57(0x26e),_0x5ed526[_0x331d57(0x2c8)],'->',_0x51d54a),_0x1827a2['paymentGateways']=JSON['stringify'](_0x51d54a),delete _0x1827a2[_0x331d57(0x2c8)];}_0x5ed526['gatewaySettings']&&(console[_0x331d57(0x1d3)](_0x331d57(0x1d1)+_0x5ac8c8+_0x331d57(0x252),_0x5ed526[_0x331d57(0x19e)]),_0x1827a2[_0x331d57(0x19e)]=JSON['stringify'](_0x5ed526[_0x331d57(0x19e)]),console['log']('🔧\x20['+_0x5ac8c8+_0x331d57(0x28b),_0x1827a2[_0x331d57(0x19e)]));_0x5ed526['wallets']&&(_0x5ed526[_0x331d57(0x29b)][_0x331d57(0x268)]!==undefined&&(_0x1827a2[_0x331d57(0x268)]=_0x5ed526[_0x331d57(0x29b)][_0x331d57(0x268)]||null),_0x5ed526[_0x331d57(0x29b)][_0x331d57(0x20b)]!==undefined&&(_0x1827a2[_0x331d57(0x20b)]=_0x5ed526['wallets'][_0x331d57(0x20b)]||null),_0x5ed526[_0x331d57(0x29b)]['usdtErcWallet']!==undefined&&(_0x1827a2['usdtErcWallet']=_0x5ed526[_0x331d57(0x29b)][_0x331d57(0x219)]||null),_0x5ed526[_0x331d57(0x29b)][_0x331d57(0x271)]!==undefined&&(_0x1827a2['usdcPolygonWallet']=_0x5ed526[_0x331d57(0x29b)][_0x331d57(0x271)]||null),delete _0x1827a2['wallets']);const _0xa8e794=await database_1[_0x331d57(0x281)][_0x331d57(0x21c)]['update']({'where':{'id':_0x282dc8},'data':_0x1827a2,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return console[_0x331d57(0x1d3)](_0x331d57(0x23e)+_0x5ac8c8+']\x20User\x20updated,\x20gatewaySettings\x20from\x20DB:',_0xa8e794[_0x331d57(0x19e)]),{'id':_0xa8e794['id'],'fullName':_0xa8e794[_0x331d57(0x201)],'username':_0xa8e794[_0x331d57(0x1d4)],'telegramId':_0xa8e794[_0x331d57(0x246)],'merchantUrl':_0xa8e794[_0x331d57(0x1da)],'gateways':_0xa8e794[_0x331d57(0x209)]?JSON[_0x331d57(0x1db)](_0xa8e794[_0x331d57(0x209)]):null,'gatewaySettings':_0xa8e794[_0x331d57(0x19e)]?JSON['parse'](_0xa8e794['gatewaySettings']):null,'publicKey':_0xa8e794[_0x331d57(0x250)],'wallets':{'usdtPolygonWallet':_0xa8e794['usdtPolygonWallet'],'usdtTrcWallet':_0xa8e794[_0x331d57(0x20b)],'usdtErcWallet':_0xa8e794['usdtErcWallet'],'usdcPolygonWallet':_0xa8e794[_0x331d57(0x271)]},'status':_0xa8e794[_0x331d57(0x226)],'createdAt':_0xa8e794[_0x331d57(0x2be)]};}async[a35_0x3e3fdf(0x296)](_0x52154f){const _0x333fba=a35_0x3e3fdf,_0x2f901d=await database_1[_0x333fba(0x281)]['shop'][_0x333fba(0x26f)]({'where':{'id':_0x52154f},'data':{'status':_0x333fba(0x25f)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x2f901d['id'],'fullName':_0x2f901d[_0x333fba(0x201)],'username':_0x2f901d[_0x333fba(0x1d4)],'telegramId':_0x2f901d['telegram'],'merchantUrl':_0x2f901d['shopUrl'],'gateways':_0x2f901d[_0x333fba(0x209)]?JSON['parse'](_0x2f901d['paymentGateways']):null,'gatewaySettings':_0x2f901d[_0x333fba(0x19e)]?JSON[_0x333fba(0x1db)](_0x2f901d[_0x333fba(0x19e)]):null,'publicKey':_0x2f901d[_0x333fba(0x250)],'wallets':{'usdtPolygonWallet':_0x2f901d['usdtPolygonWallet'],'usdtTrcWallet':_0x2f901d[_0x333fba(0x20b)],'usdtErcWallet':_0x2f901d['usdtErcWallet'],'usdcPolygonWallet':_0x2f901d[_0x333fba(0x271)]},'status':_0x2f901d[_0x333fba(0x226)],'createdAt':_0x2f901d['createdAt']};}async[a35_0x3e3fdf(0x1f3)](_0xb4a79f){const _0x2a0510=a35_0x3e3fdf,_0x3102e6=await database_1[_0x2a0510(0x281)]['shop']['update']({'where':{'id':_0xb4a79f},'data':{'status':_0x2a0510(0x26a)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x3102e6['id'],'fullName':_0x3102e6[_0x2a0510(0x201)],'username':_0x3102e6[_0x2a0510(0x1d4)],'telegramId':_0x3102e6[_0x2a0510(0x246)],'merchantUrl':_0x3102e6['shopUrl'],'gateways':_0x3102e6[_0x2a0510(0x209)]?JSON[_0x2a0510(0x1db)](_0x3102e6[_0x2a0510(0x209)]):null,'gatewaySettings':_0x3102e6[_0x2a0510(0x19e)]?JSON['parse'](_0x3102e6['gatewaySettings']):null,'publicKey':_0x3102e6['publicKey'],'wallets':{'usdtPolygonWallet':_0x3102e6[_0x2a0510(0x268)],'usdtTrcWallet':_0x3102e6['usdtTrcWallet'],'usdtErcWallet':_0x3102e6['usdtErcWallet'],'usdcPolygonWallet':_0x3102e6[_0x2a0510(0x271)]},'status':_0x3102e6[_0x2a0510(0x226)],'createdAt':_0x3102e6[_0x2a0510(0x2be)]};}async[a35_0x3e3fdf(0x26c)](_0x5674f4){const _0x469ee8=a35_0x3e3fdf,{page:_0x660270,limit:_0x542a56,status:_0xe06399}=_0x5674f4,_0x46c7f0=(_0x660270-0x1)*_0x542a56,_0x4f443f={};_0xe06399&&(_0x4f443f[_0x469ee8(0x226)]=_0xe06399[_0x469ee8(0x1fa)]());const [_0x30ad8a,_0x299ca2]=await Promise[_0x469ee8(0x213)]([database_1[_0x469ee8(0x281)][_0x469ee8(0x21c)][_0x469ee8(0x1bc)]({'where':_0x4f443f,'skip':_0x46c7f0,'take':_0x542a56,'orderBy':{'createdAt':'desc'},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}}),database_1[_0x469ee8(0x281)][_0x469ee8(0x21c)][_0x469ee8(0x290)]({'where':_0x4f443f})]);return{'users':_0x30ad8a[_0x469ee8(0x1cc)](_0x4f53e0=>{const _0x46b52c=_0x469ee8,_0x4d9277=_0x4f53e0[_0x46b52c(0x209)]?JSON['parse'](_0x4f53e0[_0x46b52c(0x209)]):null,_0xb0ec08=_0x4d9277?_0x4d9277['map'](_0x5201f4=>this[_0x46b52c(0x25b)](_0x5201f4)):null;return{'id':_0x4f53e0['id'],'fullName':_0x4f53e0['name'],'username':_0x4f53e0[_0x46b52c(0x1d4)],'telegramId':_0x4f53e0['telegram'],'merchantUrl':_0x4f53e0['shopUrl'],'gateways':_0xb0ec08,'gatewaySettings':_0x4f53e0[_0x46b52c(0x19e)]?JSON[_0x46b52c(0x1db)](_0x4f53e0[_0x46b52c(0x19e)]):null,'publicKey':_0x4f53e0[_0x46b52c(0x250)],'wallets':{'usdtPolygonWallet':_0x4f53e0[_0x46b52c(0x268)],'usdtTrcWallet':_0x4f53e0[_0x46b52c(0x20b)],'usdtErcWallet':_0x4f53e0['usdtErcWallet'],'usdcPolygonWallet':_0x4f53e0[_0x46b52c(0x271)]},'status':_0x4f53e0[_0x46b52c(0x226)],'createdAt':_0x4f53e0[_0x46b52c(0x2be)]};}),'pagination':{'page':_0x660270,'limit':_0x542a56,'total':_0x299ca2,'totalPages':Math['ceil'](_0x299ca2/_0x542a56)}};}async[a35_0x3e3fdf(0x255)](_0x4f8354){const _0x4b4c49=a35_0x3e3fdf,_0x3cafb9=await database_1[_0x4b4c49(0x281)]['shop'][_0x4b4c49(0x217)]({'where':{'id':_0x4f8354},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x3cafb9)return null;const _0x248ed1=_0x3cafb9[_0x4b4c49(0x209)]?JSON['parse'](_0x3cafb9[_0x4b4c49(0x209)]):null,_0x2fc796=_0x248ed1?_0x248ed1[_0x4b4c49(0x1cc)](_0x298bfc=>this[_0x4b4c49(0x25b)](_0x298bfc)):null;return _0x248ed1&&_0x2fc796&&console[_0x4b4c49(0x1d3)](_0x4b4c49(0x1dd),_0x248ed1,'->',_0x2fc796),{'id':_0x3cafb9['id'],'fullName':_0x3cafb9[_0x4b4c49(0x201)],'username':_0x3cafb9[_0x4b4c49(0x1d4)],'telegramId':_0x3cafb9[_0x4b4c49(0x246)],'merchantUrl':_0x3cafb9['shopUrl'],'gateways':_0x2fc796,'gatewaySettings':_0x3cafb9[_0x4b4c49(0x19e)]?JSON[_0x4b4c49(0x1db)](_0x3cafb9[_0x4b4c49(0x19e)]):null,'publicKey':_0x3cafb9['publicKey'],'wallets':{'usdtPolygonWallet':_0x3cafb9[_0x4b4c49(0x268)],'usdtTrcWallet':_0x3cafb9[_0x4b4c49(0x20b)],'usdtErcWallet':_0x3cafb9[_0x4b4c49(0x219)],'usdcPolygonWallet':_0x3cafb9[_0x4b4c49(0x271)]},'status':_0x3cafb9[_0x4b4c49(0x226)],'createdAt':_0x3cafb9[_0x4b4c49(0x2be)]};}async['createUser'](_0x2cc6a1){const _0x4361ee=a35_0x3e3fdf,{fullName:_0x4745f8,username:_0x3545e9,password:_0x6a2a68,telegramId:_0x2bbd93,merchantUrl:_0x31d090,gateways:_0x1251b6,gatewaySettings:_0x537e8d,wallets:_0x235aeb}=_0x2cc6a1,_0x5bdcf5=await database_1[_0x4361ee(0x281)]['shop'][_0x4361ee(0x217)]({'where':{'username':_0x3545e9}});if(_0x5bdcf5)throw new Error('Username\x20already\x20exists');if(_0x2bbd93){const _0x397c17=await database_1[_0x4361ee(0x281)]['shop'][_0x4361ee(0x217)]({'where':{'telegram':_0x2bbd93}});if(_0x397c17)throw new Error('Telegram\x20username\x20already\x20exists');}const _0x43d3ec=await bcryptjs_1['default']['hash'](_0x6a2a68,0xc),_0x31faab=_0x4361ee(0x2b1)+crypto_1[_0x4361ee(0x281)][_0x4361ee(0x22b)](0x20)[_0x4361ee(0x1a6)](_0x4361ee(0x1d7)),_0x343fe8='sk_'+crypto_1[_0x4361ee(0x281)][_0x4361ee(0x22b)](0x20)['toString'](_0x4361ee(0x1d7)),_0x3fe8c3=_0x1251b6?_0x1251b6[_0x4361ee(0x1cc)](_0x35257a=>this[_0x4361ee(0x259)](_0x35257a)):null;_0x1251b6&&_0x3fe8c3&&console[_0x4361ee(0x1d3)](_0x4361ee(0x254),_0x1251b6,'->',_0x3fe8c3);const _0x52df41=await database_1[_0x4361ee(0x281)][_0x4361ee(0x21c)]['create']({'data':{'name':_0x4745f8,'username':_0x3545e9,'password':_0x43d3ec,'telegram':_0x2bbd93,'shopUrl':_0x31d090,'paymentGateways':_0x3fe8c3?JSON['stringify'](_0x3fe8c3):null,'gatewaySettings':_0x537e8d?JSON['stringify'](_0x537e8d):null,'usdtPolygonWallet':_0x235aeb?.[_0x4361ee(0x268)]||null,'usdtTrcWallet':_0x235aeb?.[_0x4361ee(0x20b)]||null,'usdtErcWallet':_0x235aeb?.[_0x4361ee(0x219)]||null,'usdcPolygonWallet':_0x235aeb?.[_0x4361ee(0x271)]||null,'publicKey':_0x31faab,'secretKey':_0x343fe8,'status':_0x4361ee(0x26a)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x52df41['id'],'fullName':_0x52df41[_0x4361ee(0x201)],'username':_0x52df41['username'],'telegramId':_0x52df41[_0x4361ee(0x246)],'merchantUrl':_0x52df41[_0x4361ee(0x1da)],'gateways':_0x52df41[_0x4361ee(0x209)]?JSON['parse'](_0x52df41[_0x4361ee(0x209)]):null,'gatewaySettings':_0x52df41[_0x4361ee(0x19e)]?JSON[_0x4361ee(0x1db)](_0x52df41[_0x4361ee(0x19e)]):null,'publicKey':_0x52df41[_0x4361ee(0x250)],'wallets':{'usdtPolygonWallet':_0x52df41['usdtPolygonWallet'],'usdtTrcWallet':_0x52df41[_0x4361ee(0x20b)],'usdtErcWallet':_0x52df41['usdtErcWallet'],'usdcPolygonWallet':_0x52df41[_0x4361ee(0x271)]},'status':_0x52df41[_0x4361ee(0x226)],'createdAt':_0x52df41['createdAt']};}async[a35_0x3e3fdf(0x1dc)](_0x296bce){const _0x5604f5=a35_0x3e3fdf;await database_1[_0x5604f5(0x281)][_0x5604f5(0x21c)][_0x5604f5(0x28f)]({'where':{'id':_0x296bce}});}['generateDailyStatistics'](_0xdab631,_0x3a7834,_0x1ca3ef){const _0x34a899=a35_0x3e3fdf,_0x26db44=new Map(),_0x56d309=new Date(_0x3a7834);while(_0x56d309<=_0x1ca3ef){const _0x8dea74=_0x56d309[_0x34a899(0x1d0)]()['split']('T')[0x0];_0x26db44[_0x34a899(0x239)](_0x8dea74,{'revenue':0x0,'count':0x0}),_0x56d309[_0x34a899(0x2bc)](_0x56d309[_0x34a899(0x2bf)]()+0x1);}for(const _0x19285e of _0xdab631){const _0x228209=_0x19285e[_0x34a899(0x2be)][_0x34a899(0x1d0)]()['split']('T')[0x0],_0x4d759d=_0x26db44[_0x34a899(0x22c)](_0x228209);_0x4d759d&&(_0x4d759d[_0x34a899(0x290)]+=0x1,_0x19285e[_0x34a899(0x226)]===_0x34a899(0x228)&&(_0x19285e[_0x34a899(0x21a)]?_0x4d759d[_0x34a899(0x2b0)]+=_0x19285e[_0x34a899(0x21a)]:console[_0x34a899(0x1d3)]('⚠️\x20Payment\x20'+_0x19285e['id']+_0x34a899(0x232))));}const _0x4f5fe9=[],_0x337451=[];for(const [_0x272d3f,_0x492682]of _0x26db44){_0x4f5fe9[_0x34a899(0x1b7)]({'date':_0x272d3f,'amount':Math[_0x34a899(0x1b4)](_0x492682[_0x34a899(0x2b0)]*0x64)/0x64}),_0x337451[_0x34a899(0x1b7)]({'date':_0x272d3f,'count':_0x492682['count']});}return{'dailyRevenue':_0x4f5fe9,'dailyPayments':_0x337451};}}exports[a35_0x3e3fdf(0x1b9)]=AdminService;function a35_0x438d(){const _0x4e6541=['PAID','getFullYear','📊\x20Getting\x20merchants\x20awaiting\x20payout\x20with\x20filters:','randomBytes','get','sort','📊\x20Merchant\x20statistics\x20calculated:','\x20USDT,\x20Requested:\x20','📊\x20Available\x20gateways\x20in\x20database:','network','\x20missing\x20amountUSDT,\x20using\x20fallback\x20conversion','\x20\x20\x20Current\x20total\x20paid\x20out:\x20','updatePaymentStatus','adminNotes','📊\x20Final\x20WHERE\x20conditions:','gatewayEarnings','toFixed','set','\x20became\x20PAID:','getMerchantsAwaitingPayout','create','./currencyService','🎯\x20[','__importDefault','currencyService','customerUa','$transaction','\x20USDT\x20(gross\x20revenue)','payout','0000','telegram','lte','\x20USDT\x20(total\x20paid\x20to\x20merchants)','\x20USDT\x20(after\x20','\x20no\x20longer\x20PAID:','dailyPayments','dateTo','month','aggregate','\x20\x20\x20Total\x20paid\x20out:\x20','publicKey','📊\x20Sorting\x20payments\x20by\x20',']\x20Gateway\x20settings\x20before\x20saving:','Error\x20parsing\x20gateway\x20settings\x20for\x20payment\x20','🔄\x20Gateway\x20mapping\x20(create):','getUserById','\x20\x20\x20📊\x20Commission\x20difference:\x20','💰\x20Current\x20shop\x20balance:\x20','notes','getGatewayInternalName','✅\x20Using\x20gateway\x20filter:\x20\x27','getGatewayDisplayName','📊\x20Gateway\x20filter\x20applied:','not\x20set','\x20\x20\x20👤\x20Merchant\x20earnings:\x20','SUSPENDED','\x20\x20\x20Subtracted\x20from\x20balance:\x20-','getAllPayments','reduce','CHARGEBACK',',\x20Commission:\x20','\x27\x20to\x20name\x20\x27','forEach','totalPayments','usdtPolygonWallet','totalCommissionRate','ACTIVE','\x20\x20\x20🏪\x20Gateway\x20earnings:\x20','getAllUsers','getMerchantStatistics','🔄\x20Gateway\x20mapping:','update','295824JWoCmb','usdcPolygonWallet','commission','getPaymentById','1021542DXmndD','399310REcqrd','\x20\x20\x20Full\x20amount:\x20','turnoverUSDT','statusChangedBy','🔄\x20Converted\x20gateway\x20ID\x20\x27','Open\x20Banking\x202','\x20\x20\x20Balance:\x20','getPayoutById','📊\x20Payout\x20statistics\x20calculated:','amount','fullName','availableBalance','default','\x20USDT\x20(','⚠️\x20Gateway\x20\x27','Error\x20processing\x20payment\x20','createPayout','💰\x20Payment\x20','successUrl','values','NONEXISTENT_GATEWAY_FILTER','\x27)\x20not\x20found\x20in\x20database,\x20returning\x20empty\x20result',']\x20Gateway\x20settings\x20JSON\x20string:','stringify','failureMessage','📊\x20Getting\x20merchant\x20statistics\x20with\x20filters:','delete','count','crypto','updateCustomerData','Payment\x20not\x20found','\x20USDT\x20for\x20payment\x20','509922CVEium','suspendUser','📊\x20Calculating\x20commission\x20manually\x20for\x20payment\x20','446751SmvxbD','213380SLDLLy','%\x20from\x20','wallets','pendingUrl','\x20\x20\x20🔍\x20Calculated\x20after\x20commission:\x20','\x20\x20\x20�\x20Total\x20paid\x20out:\x20','\x20\x20\x20�📊\x20Total\x20payments:\x20','getMonth','join','balance','Insufficient\x20balance.\x20Available:\x20','week','⚠️\x20Requested\x20gateway\x20\x27','\x20order','__esModule','length','error','KLYME\x20EU','klyme_de','🔄\x20REFUND:\x20Payment\x20amount\x20already\x20deducted\x20from\x20balance','💸\x20CHARGEBACK:\x20Merchant\x20amount\x20already\x20deducted\x20from\x20balance','\x20\x20\x20💵\x20Available\x20balance:\x20','totalPayout','revenue','pk_','totalAmountUSDT','insensitive','\x20PAID\x20payments','password','date','\x20USDT\x20(theoretical\x20net)','customerIp','telegramId','\x27\x20(from\x20\x27','not\x20specified','setDate','_count','createdAt','getDate','COMPLETED','getGatewayNameById','\x20to\x20','trc20','deletePayout','test_gateway','shopId','💰\x20Creating\x20payout\x20for\x20shop\x20','gateways','merchantUrl','customerName','Error\x20parsing\x20gateway\x20settings\x20for\x20shop\x20','localeCompare','16efkZWR','KLYME\x20DE','7wKmklV','paymentsCount','gatewaySettings','updatedAt','\x20\x20\x20Current\x20balance:\x20','\x20USDT)','pendingPayout','gatewayOrderId','../types/gateway','💳\x20Payout\x20wallet\x20for\x20','toString','convertToUSDT','externalPaymentUrl','\x20\x20\x20🔍\x20Raw\x20balance\x20sum:\x20','\x20\x20\x20Payout\x20amount:\x20','\x20\x20\x20⏳\x20Pending\x20payout:\x20','turnover','Rapyd','💰\x20[PAYOUT]\x20Gateway\x20','📊\x20Calculating\x20payout\x20statistics...','📋\x20Found\x20','\x27\x20->\x20name\x20\x27','💰\x20Found\x20',',\x20successful:\x20','round','mastercard','\x27\x20as\x20is\x20(not\x20found\x20in\x20mappings)','push','random','AdminService','trim','amountAfterGatewayCommissionUSDT','findMany','ceil','txid','toLowerCase','asc','\x20\x20\x20📅\x20Total\x20payouts\x20(this\x20month):\x20',',\x20userId:\x20','\x20for\x20shop\x20','✅\x20Payout\x20created:\x20','period','dateFrom','📊\x20Merchants\x20awaiting\x20payout:\x20','paidAt','\x20->\x20','gte','\x20\x20\x20Transaction\x20hash:\x20','map','periodTo','\x20status:\x20','\x20\x20\x20Gateway:\x20','toISOString','🔧\x20[','\x20balance\x20updated:\x20','log','username','summary','groupBy','hex','plisio','totalPaidOut','shopUrl','parse','deleteUser','🔄\x20Gateway\x20mapping\x20(get):','\x20balance\x20updated:','getTime',']\x20Password\x20not\x20provided\x20or\x20empty,\x20skipping\x20password\x20update','\x20USDT\x20(without\x20commission)','📊\x20Using\x20saved\x20amountAfterGatewayCommissionUSDT:\x20','admin','desc','\x20\x20\x20🖥️\x20User\x20Agent:\x20','🔐\x20[','\x20USDT\x20(actual\x20balances)','\x20\x20\x20🌍\x20Country:\x20','payment','getMerchantsSelection','some','commissionUSDT','2020-01-01','polygon_usdc','defineProperty','failUrl','awaitingPayout','REFUND','activateUser','getAllPayouts','192529VZJVXm','\x20\x20\x20Merchant\x20loses:\x20','gateway','chargebackAmount','\x20USDT\x20(+','toUpperCase','\x20\x20\x20💰\x20Total\x20turnover:\x20','customerCountry','klyme_eu','\x20\x20\x20💰\x20Total\x20payout:\x20','entries','_sum','name','🔍\x20Using\x20gateway\x20\x27','\x20\x20\x20Added\x20to\x20balance:\x20+','noda','customerEmail','\x20\x20\x20🌐\x20IP:\x20','cointopay2','💸\x20CHARGEBACK\x20penalty:\x20-','paymentGateways','custom','usdtTrcWallet','\x20in\x20','updateUser','thisMonth','statusChangedAt','\x20\x20\x20💳\x20Total\x20payments:\x20','merchantEarnings','erc20','all','📊\x20Total\x20payments\x20(including\x20failed):\x20','currency','totalAmountAfterCommissionUSDT','findUnique','getGatewayIdByName','usdtErcWallet','amountUSDT','periodFrom','shop','averageCheckUSDT','orderId','findFirst','📅\x20Period:\x20','paidOutUSDT',':\x20commission\x20=\x20','90d','merchantEarningsUSDT','CoinToPay','status','\x20USDT'];a35_0x438d=function(){return _0x4e6541;};return a35_0x438d();}