'use strict';const a36_0x4a3512=a36_0x4274;function a36_0x4274(_0x29a1d3,_0x1a34a0){const _0x804018=a36_0x8040();return a36_0x4274=function(_0x427411,_0x423ff7){_0x427411=_0x427411-0x1bb;let _0x14aa98=_0x804018[_0x427411];return _0x14aa98;},a36_0x4274(_0x29a1d3,_0x1a34a0);}(function(_0x35d79a,_0x3bfc1e){const _0x1f83fc=a36_0x4274,_0x4ce810=_0x35d79a();while(!![]){try{const _0x3dbfdb=-parseInt(_0x1f83fc(0x227))/0x1+parseInt(_0x1f83fc(0x1bb))/0x2+parseInt(_0x1f83fc(0x1d9))/0x3*(-parseInt(_0x1f83fc(0x2c6))/0x4)+-parseInt(_0x1f83fc(0x2d9))/0x5*(parseInt(_0x1f83fc(0x1e3))/0x6)+parseInt(_0x1f83fc(0x2b9))/0x7+parseInt(_0x1f83fc(0x214))/0x8*(-parseInt(_0x1f83fc(0x262))/0x9)+parseInt(_0x1f83fc(0x1da))/0xa;if(_0x3dbfdb===_0x3bfc1e)break;else _0x4ce810['push'](_0x4ce810['shift']());}catch(_0x485494){_0x4ce810['push'](_0x4ce810['shift']());}}}(a36_0x8040,0x22e98));var __importDefault=this&&this[a36_0x4a3512(0x1c7)]||function(_0x410c2c){const _0x444dd2=a36_0x4a3512;return _0x410c2c&&_0x410c2c[_0x444dd2(0x1de)]?_0x410c2c:{'default':_0x410c2c};};Object[a36_0x4a3512(0x294)](exports,a36_0x4a3512(0x1de),{'value':!![]}),exports[a36_0x4a3512(0x251)]=void 0x0;const database_1=__importDefault(require(a36_0x4a3512(0x232))),bcryptjs_1=__importDefault(require(a36_0x4a3512(0x27e))),crypto_1=__importDefault(require(a36_0x4a3512(0x253))),currencyService_1=require(a36_0x4a3512(0x2cc)),gateway_1=require('../types/gateway');class AdminService{async[a36_0x4a3512(0x201)](){const _0x5d2356=a36_0x4a3512;console['log'](_0x5d2356(0x1be));const _0x4228d4=await database_1['default'][_0x5d2356(0x238)][_0x5d2356(0x291)]({'_sum':{'balance':!![],'totalPaidOut':!![]},'where':{'status':_0x5d2356(0x1cc)}}),_0x3dfb03=await this['getMerchantsAwaitingPayout']({'page':0x1,'limit':0x3e8}),_0x6a2050=await database_1[_0x5d2356(0x1ea)]['payment'][_0x5d2356(0x2e8)]({'where':{'status':'PAID','gateway':{'not':_0x5d2356(0x250)}}}),_0xfde05f=new Date(),_0x584459=new Date(_0xfde05f[_0x5d2356(0x2db)](),_0xfde05f[_0x5d2356(0x248)](),0x1),_0x261ae5=new Date(_0xfde05f[_0x5d2356(0x2db)](),_0xfde05f[_0x5d2356(0x248)]()+0x1,0x0,0x17,0x3b,0x3b,0x3e7),_0x3c4765=await database_1['default'][_0x5d2356(0x234)]['aggregate']({'_sum':{'amount':!![]},'where':{'createdAt':{'gte':_0x584459,'lte':_0x261ae5},'status':'COMPLETED'}}),_0x1a3429=_0x4228d4[_0x5d2356(0x222)]['totalPaidOut']||0x0,_0x4495d6=_0x3dfb03[_0x5d2356(0x2cf)][_0x5d2356(0x2bd)],_0x3c3e02=_0x3c4765[_0x5d2356(0x222)][_0x5d2356(0x22d)]||0x0,_0x10c04b={'totalPayout':Math[_0x5d2356(0x2cd)](_0x1a3429*0x64)/0x64,'awaitingPayout':Math[_0x5d2356(0x2cd)](_0x4495d6*0x64)/0x64,'thisMonth':Math['round'](_0x3c3e02*0x64)/0x64,'availableBalance':Math[_0x5d2356(0x2cd)](_0x4495d6*0x64)/0x64,'totalPayments':_0x6a2050};return console[_0x5d2356(0x2aa)](_0x5d2356(0x25a)),console[_0x5d2356(0x2aa)](_0x5d2356(0x2be)+_0x10c04b['totalPayout']+'\x20USDT\x20(total\x20paid\x20to\x20merchants)'),console[_0x5d2356(0x2aa)](_0x5d2356(0x249)+_0x10c04b[_0x5d2356(0x2f3)]+'\x20USDT\x20(with\x20commission\x20deducted)'),console['log'](_0x5d2356(0x21f)+_0x10c04b[_0x5d2356(0x21b)]+_0x5d2356(0x29c)),console[_0x5d2356(0x2aa)]('\x20\x20\x20📅\x20This\x20month:\x20'+_0x10c04b['thisMonth']+_0x5d2356(0x1df)),console['log']('\x20\x20\x20💳\x20Total\x20payments:\x20'+_0x10c04b['totalPayments']+_0x5d2356(0x2c9)),console[_0x5d2356(0x2aa)](_0x5d2356(0x1db)+(_0x4228d4[_0x5d2356(0x222)][_0x5d2356(0x237)]||0x0)[_0x5d2356(0x2a4)](0x2)+_0x5d2356(0x20a)),console[_0x5d2356(0x2aa)](_0x5d2356(0x264)+((_0x4228d4[_0x5d2356(0x222)][_0x5d2356(0x237)]||0x0)-_0x4495d6)[_0x5d2356(0x2a4)](0x2)+_0x5d2356(0x1df)),_0x10c04b;}async[a36_0x4a3512(0x24c)](_0x5e8b1c,_0x131f17){const _0x3811bd=a36_0x4a3512;console['log'](_0x3811bd(0x2fe)+_0x5e8b1c+':',_0x131f17);const _0x104340=await database_1[_0x3811bd(0x1ea)]['payment'][_0x3811bd(0x2fa)]({'where':{'id':_0x5e8b1c},'select':{'id':!![],'customerEmail':!![],'customerName':!![],'customerCountry':!![],'customerIp':!![],'customerUa':!![]}});if(!_0x104340)throw new Error('Payment\x20not\x20found');const _0x25ac68={};_0x131f17[_0x3811bd(0x1e7)]!==undefined&&(_0x25ac68['customerCountry']=_0x131f17[_0x3811bd(0x1e7)]||null);_0x131f17[_0x3811bd(0x1e9)]!==undefined&&(_0x25ac68[_0x3811bd(0x1e9)]=_0x131f17['customerIp']||null);_0x131f17[_0x3811bd(0x2f0)]!==undefined&&(_0x25ac68[_0x3811bd(0x2f0)]=_0x131f17[_0x3811bd(0x2f0)]||null);const _0x5a34c4=await database_1['default'][_0x3811bd(0x203)]['update']({'where':{'id':_0x5e8b1c},'data':{..._0x25ac68,'updatedAt':new Date()},'select':{'id':!![],'customerEmail':!![],'customerName':!![],'customerCountry':!![],'customerIp':!![],'customerUa':!![],'updatedAt':!![]}});return console[_0x3811bd(0x2aa)](_0x3811bd(0x1ff)+_0x5e8b1c),console['log'](_0x3811bd(0x2e6)+_0x104340['customerCountry']+'\x20->\x20'+_0x5a34c4['customerCountry']),console[_0x3811bd(0x2aa)](_0x3811bd(0x219)+_0x104340['customerIp']+_0x3811bd(0x2e5)+_0x5a34c4[_0x3811bd(0x1e9)]),console[_0x3811bd(0x2aa)]('\x20\x20\x20🖥️\x20User\x20Agent:\x20'+(_0x104340[_0x3811bd(0x2f0)]?_0x3811bd(0x215):_0x3811bd(0x25e))+_0x3811bd(0x2e5)+(_0x5a34c4[_0x3811bd(0x2f0)]?_0x3811bd(0x215):_0x3811bd(0x25e))),_0x5a34c4;}async['getSystemStatistics'](_0x21d1c4){const _0x3418e9=a36_0x4a3512,_0x31434e=new Date();let _0x25cb0b;switch(_0x21d1c4){case'7d':_0x25cb0b=new Date(_0x31434e['getTime']()-0x7*0x18*0x3c*0x3c*0x3e8);break;case'30d':_0x25cb0b=new Date(_0x31434e[_0x3418e9(0x1f9)]()-0x1e*0x18*0x3c*0x3c*0x3e8);break;case _0x3418e9(0x296):_0x25cb0b=new Date(_0x31434e['getTime']()-0x5a*0x18*0x3c*0x3c*0x3e8);break;case _0x3418e9(0x263):const _0x30bb94=await database_1['default'][_0x3418e9(0x203)]['findFirst']({'where':{'gateway':{'not':_0x3418e9(0x250)}},'orderBy':{'createdAt':_0x3418e9(0x1fb)},'select':{'createdAt':!![]}});_0x25cb0b=_0x30bb94?_0x30bb94[_0x3418e9(0x233)]:new Date(_0x3418e9(0x2d5)),console[_0x3418e9(0x2aa)]('📅\x20Period\x20\x27all\x27:\x20Using\x20start\x20date\x20from\x20first\x20payment:\x20'+_0x25cb0b[_0x3418e9(0x2de)]());break;default:_0x25cb0b=new Date(_0x31434e[_0x3418e9(0x1f9)]()-0x1e*0x18*0x3c*0x3c*0x3e8);}const [_0x3d7fbf,_0x1cfb33,_0xec47b7,_0x583fba,_0x1851c4,_0x5d00cd]=await Promise[_0x3418e9(0x263)]([database_1['default']['shop'][_0x3418e9(0x2e8)](),database_1[_0x3418e9(0x1ea)][_0x3418e9(0x238)][_0x3418e9(0x2e8)]({'where':{'status':_0x3418e9(0x1cc)}}),database_1['default']['payment']['count']({'where':{'status':_0x3418e9(0x289),'createdAt':{'gte':_0x25cb0b},'gateway':{'not':_0x3418e9(0x250)}}}),database_1['default'][_0x3418e9(0x203)][_0x3418e9(0x273)]({'where':{'status':_0x3418e9(0x289),'createdAt':{'gte':_0x25cb0b},'gateway':{'not':_0x3418e9(0x250)}},'select':{'amount':!![],'currency':!![],'amountAfterGatewayCommissionUSDT':!![]}}),database_1[_0x3418e9(0x1ea)][_0x3418e9(0x203)]['findMany']({'where':{'gateway':{'not':'test_gateway'}},'take':0xa,'orderBy':{'createdAt':_0x3418e9(0x279)},'include':{'shop':{'select':{'name':!![],'username':!![]}}}}),database_1[_0x3418e9(0x1ea)][_0x3418e9(0x203)][_0x3418e9(0x273)]({'where':{'createdAt':{'gte':_0x25cb0b},'gateway':{'not':'test_gateway'}},'select':{'amount':!![],'currency':!![],'status':!![],'amountUSDT':!![],'createdAt':!![]}})]);let _0x1900b1=0x0,_0x411d4a=0x0;for(const _0x5a6038 of _0x583fba){const _0x4ffafc=await currencyService_1[_0x3418e9(0x2da)][_0x3418e9(0x235)](_0x5a6038[_0x3418e9(0x22d)],_0x5a6038[_0x3418e9(0x295)]);_0x1900b1+=_0x4ffafc;if(_0x5a6038[_0x3418e9(0x1fd)]){const _0x35eb92=await currencyService_1[_0x3418e9(0x2da)][_0x3418e9(0x235)](_0x5a6038['amount'],_0x5a6038[_0x3418e9(0x295)]),_0x3494ec=_0x5a6038['amountAfterGatewayCommissionUSDT'],_0x39fe82=_0x35eb92-_0x3494ec;_0x411d4a+=_0x39fe82;}}const _0x37d203=_0xec47b7>0x0?_0x1900b1/_0xec47b7:0x0,_0x5d2985=this[_0x3418e9(0x1cf)](_0x5d00cd,_0x25cb0b,_0x31434e),_0x445f68=await database_1[_0x3418e9(0x1ea)][_0x3418e9(0x203)][_0x3418e9(0x2e8)]({'where':{'createdAt':{'gte':_0x25cb0b},'gateway':{'not':'test_gateway'}}}),_0x36b0bd=_0x445f68>0x0?_0xec47b7/_0x445f68*0x64:0x0;return{'totalShops':_0x3d7fbf,'activeShops':_0x1cfb33,'totalPayments':_0xec47b7,'successfulPayments':_0xec47b7,'totalAttempts':_0x445f68,'totalRevenue':Math['round'](_0x1900b1*0x64)/0x64,'trapayEarnings':Math[_0x3418e9(0x2cd)](_0x411d4a*0x64)/0x64,'averagePaymentAmount':Math[_0x3418e9(0x2cd)](_0x37d203*0x64)/0x64,'conversionRate':Math[_0x3418e9(0x2cd)](_0x36b0bd*0x64)/0x64,'dailyRevenue':_0x5d2985['dailyRevenue'],'dailyPayments':_0x5d2985[_0x3418e9(0x1f0)],'recentPayments':_0x1851c4[_0x3418e9(0x1e8)](_0x4468a4=>({'id':_0x4468a4['id'],'amount':_0x4468a4[_0x3418e9(0x22d)],'currency':_0x4468a4[_0x3418e9(0x295)],'status':_0x4468a4[_0x3418e9(0x1d3)],'gateway':_0x4468a4[_0x3418e9(0x1d5)],'shop':_0x4468a4[_0x3418e9(0x238)],'createdAt':_0x4468a4[_0x3418e9(0x233)]}))};}async[a36_0x4a3512(0x2c0)](_0x500120){const _0x52b191=a36_0x4a3512;console[_0x52b191(0x2aa)](_0x52b191(0x1c1),_0x500120);let _0x2aec76,_0x1c0e00=new Date();if(_0x500120['period']===_0x52b191(0x228)&&_0x500120['dateFrom']&&_0x500120[_0x52b191(0x1d6)])_0x2aec76=new Date(_0x500120[_0x52b191(0x28b)]),_0x1c0e00=new Date(_0x500120['dateTo']);else{const _0x2d365c=new Date();switch(_0x500120[_0x52b191(0x24b)]){case _0x52b191(0x28d):_0x2aec76=new Date(_0x2d365c[_0x52b191(0x1f9)]()-0x7*0x18*0x3c*0x3c*0x3e8);break;case'month':_0x2aec76=new Date(_0x2d365c[_0x52b191(0x1f9)]()-0x1e*0x18*0x3c*0x3c*0x3e8);break;case _0x52b191(0x281):_0x2aec76=new Date(_0x2d365c[_0x52b191(0x1f9)]()-0x16d*0x18*0x3c*0x3c*0x3e8);break;case'all':default:_0x2aec76=new Date(_0x52b191(0x2d5));break;}}console['log'](_0x52b191(0x1c6)+_0x2aec76['toISOString']()+_0x52b191(0x246)+_0x1c0e00[_0x52b191(0x2de)]());const _0x2729c7={'status':_0x52b191(0x289),'gateway':{'not':'test_gateway'},'paidAt':{'gte':_0x2aec76,'lte':_0x1c0e00}};_0x500120[_0x52b191(0x284)]&&(_0x2729c7['shopId']=_0x500120[_0x52b191(0x284)]);const _0x314a71=await database_1[_0x52b191(0x1ea)]['payment']['findMany']({'where':_0x2729c7,'include':{'shop':{'select':{'id':!![],'name':!![],'username':!![],'gatewaySettings':!![]}}}});console[_0x52b191(0x2aa)](_0x52b191(0x1bd)+_0x314a71['length']+_0x52b191(0x230));const _0x1d13a3={'gateway':{'not':_0x52b191(0x250)},'createdAt':{'gte':_0x2aec76,'lte':_0x1c0e00}};_0x500120[_0x52b191(0x284)]&&(_0x1d13a3[_0x52b191(0x284)]=_0x500120[_0x52b191(0x284)]);const _0xc95f15=await database_1['default']['payment'][_0x52b191(0x2e8)]({'where':_0x1d13a3});console[_0x52b191(0x2aa)](_0x52b191(0x287)+_0xc95f15+',\x20successful:\x20'+_0x314a71[_0x52b191(0x1f2)]);let _0x174dbe=0x0,_0x32bb3f=0x0,_0x2df2b6=0x0;const _0x1634f5={},_0x7f1da1={},_0x4bc35f={};for(const _0x22335d of _0x314a71){try{const _0x1b65c9=await currencyService_1[_0x52b191(0x2da)][_0x52b191(0x235)](_0x22335d[_0x52b191(0x22d)],_0x22335d[_0x52b191(0x295)]);let _0x346820={};if(_0x22335d[_0x52b191(0x238)][_0x52b191(0x2ab)])try{_0x346820=JSON[_0x52b191(0x2c4)](_0x22335d[_0x52b191(0x238)]['gatewaySettings']);}catch(_0x2af43d){console[_0x52b191(0x29d)](_0x52b191(0x1ef)+_0x22335d[_0x52b191(0x284)]+':',_0x2af43d);}let _0x1150b5={},_0x56807b=0xa;for(const [_0x1dc3d9,_0x4a3cd1]of Object[_0x52b191(0x2d7)](_0x346820)){if(_0x1dc3d9[_0x52b191(0x26b)]()===_0x22335d[_0x52b191(0x1d5)][_0x52b191(0x26b)]()){_0x1150b5=_0x4a3cd1,_0x56807b=_0x4a3cd1[_0x52b191(0x247)]||0xa;break;}}let _0x2f21ff,_0xbc1327;_0x22335d[_0x52b191(0x1fd)]!==null&&_0x22335d[_0x52b191(0x1fd)]!==undefined?(_0x2f21ff=_0x22335d['amountAfterGatewayCommissionUSDT'],_0xbc1327=_0x1b65c9-_0x2f21ff,console['log'](_0x52b191(0x1dd)+_0x2f21ff[_0x52b191(0x2a4)](0x6)+_0x52b191(0x27f)+_0x22335d['id'])):(_0xbc1327=_0x1b65c9*(_0x56807b/0x64),_0x2f21ff=_0x1b65c9-_0xbc1327,console[_0x52b191(0x2aa)](_0x52b191(0x207)+_0x22335d['id']+':\x20'+_0x56807b+_0x52b191(0x244)+_0x1b65c9['toFixed'](0x6)+_0x52b191(0x1df)));_0x174dbe+=_0x1b65c9,_0x32bb3f+=_0x2f21ff,_0x2df2b6+=_0xbc1327;!_0x1634f5[_0x22335d[_0x52b191(0x1d5)]]&&(_0x1634f5[_0x22335d['gateway']]={'gateway':_0x22335d[_0x52b191(0x1d5)],'gatewayDisplayName':this[_0x52b191(0x25c)](_0x22335d[_0x52b191(0x1d5)]),'paymentsCount':0x0,'turnoverUSDT':0x0,'commissionUSDT':0x0,'merchantEarningsUSDT':0x0,'totalCommissionRate':0x0});_0x1634f5[_0x22335d[_0x52b191(0x1d5)]]['paymentsCount']++,_0x1634f5[_0x22335d[_0x52b191(0x1d5)]][_0x52b191(0x27c)]+=_0x1b65c9,_0x1634f5[_0x22335d[_0x52b191(0x1d5)]][_0x52b191(0x208)]+=_0xbc1327,_0x1634f5[_0x22335d[_0x52b191(0x1d5)]][_0x52b191(0x261)]+=_0x2f21ff,_0x1634f5[_0x22335d[_0x52b191(0x1d5)]][_0x52b191(0x1e4)]+=_0x56807b;!_0x500120['shopId']&&(!_0x7f1da1[_0x22335d['shopId']]&&(_0x7f1da1[_0x22335d['shopId']]={'shopId':_0x22335d['shopId'],'shopName':_0x22335d['shop']['name'],'shopUsername':_0x22335d[_0x52b191(0x238)][_0x52b191(0x2eb)],'paymentsCount':0x0,'turnoverUSDT':0x0,'commissionUSDT':0x0,'merchantEarningsUSDT':0x0,'paidOutUSDT':0x0,'averageCheckUSDT':0x0}),_0x7f1da1[_0x22335d[_0x52b191(0x284)]]['paymentsCount']++,_0x7f1da1[_0x22335d[_0x52b191(0x284)]]['turnoverUSDT']+=_0x1b65c9,_0x7f1da1[_0x22335d[_0x52b191(0x284)]][_0x52b191(0x208)]+=_0xbc1327,_0x7f1da1[_0x22335d[_0x52b191(0x284)]][_0x52b191(0x261)]+=_0x2f21ff);const _0xe4308c=_0x22335d[_0x52b191(0x2f2)][_0x52b191(0x2de)]()[_0x52b191(0x283)]('T')[0x0];!_0x4bc35f[_0xe4308c]&&(_0x4bc35f[_0xe4308c]={'date':_0xe4308c,'turnover':0x0,'merchantEarnings':0x0,'gatewayEarnings':0x0,'paymentsCount':0x0}),_0x4bc35f[_0xe4308c][_0x52b191(0x22f)]+=_0x1b65c9,_0x4bc35f[_0xe4308c][_0x52b191(0x224)]+=_0x2f21ff,_0x4bc35f[_0xe4308c][_0x52b191(0x1c2)]+=_0xbc1327,_0x4bc35f[_0xe4308c][_0x52b191(0x220)]++;}catch(_0x355a39){console[_0x52b191(0x29d)](_0x52b191(0x243)+_0x22335d['id']+':',_0x355a39);}}Object[_0x52b191(0x267)](_0x1634f5)[_0x52b191(0x293)](_0x4f442b=>{const _0x3a8987=_0x52b191;_0x4f442b[_0x3a8987(0x1ec)]=_0x4f442b[_0x3a8987(0x220)]>0x0?_0x4f442b[_0x3a8987(0x1e4)]/_0x4f442b[_0x3a8987(0x220)]:0x0,delete _0x4f442b[_0x3a8987(0x1e4)];}),Object[_0x52b191(0x267)](_0x7f1da1)[_0x52b191(0x293)](_0x2e1ffa=>{const _0x5203bb=_0x52b191;_0x2e1ffa[_0x5203bb(0x2a5)]=_0x2e1ffa['paymentsCount']>0x0?_0x2e1ffa['turnoverUSDT']/_0x2e1ffa[_0x5203bb(0x220)]:0x0;});let _0x5a325e=0x0,_0x41aafc=0x0;if(_0x500120[_0x52b191(0x284)]){const _0x2bee9c=await database_1['default'][_0x52b191(0x234)]['findMany']({'where':{'shopId':_0x500120[_0x52b191(0x284)],'status':_0x52b191(0x28c),'createdAt':{'gte':_0x2aec76,'lte':_0x1c0e00}},'select':{'amount':!![]}});_0x5a325e=_0x2bee9c[_0x52b191(0x276)]((_0x388c56,_0x19f019)=>_0x388c56+_0x19f019[_0x52b191(0x22d)],0x0);const _0x1b1b3c=await database_1[_0x52b191(0x1ea)]['payout'][_0x52b191(0x273)]({'where':{'shopId':_0x500120['shopId'],'status':_0x52b191(0x2ae),'createdAt':{'gte':_0x2aec76,'lte':_0x1c0e00}},'select':{'amount':!![]}});_0x41aafc=_0x1b1b3c[_0x52b191(0x276)]((_0x558f6f,_0x5e6993)=>_0x558f6f+_0x5e6993[_0x52b191(0x22d)],0x0);}const _0x57b68c=_0xc95f15,_0x5af972=_0x314a71['length'],_0x4c0ccb=_0x5af972>0x0?_0x174dbe/_0x5af972:0x0,_0x2d4c06=_0x57b68c>0x0?Math['round'](_0x5af972/_0x57b68c*0x2710)/0x64:0x0,_0x5b6b77=Math[_0x52b191(0x2bf)]((_0x1c0e00[_0x52b191(0x1f9)]()-_0x2aec76[_0x52b191(0x1f9)]())/(0x3e8*0x3c*0x3c*0x18)),_0x3c7c6a={'totalTurnover':Math[_0x52b191(0x2cd)](_0x174dbe*0x64)/0x64,'merchantEarnings':Math[_0x52b191(0x2cd)](_0x32bb3f*0x64)/0x64,'gatewayEarnings':Math['round'](_0x2df2b6*0x64)/0x64,'totalPaidOut':Math[_0x52b191(0x2cd)](_0x5a325e*0x64)/0x64,'pendingPayout':Math[_0x52b191(0x2cd)](_0x41aafc*0x64)/0x64,'averageCheck':Math[_0x52b191(0x2cd)](_0x4c0ccb*0x64)/0x64,'totalPayments':_0x57b68c,'successfulPayments':_0x5af972,'conversionRate':_0x2d4c06,'gatewayBreakdown':Object['values'](_0x1634f5)['map'](_0x156369=>({..._0x156369,'turnoverUSDT':Math[_0x52b191(0x2cd)](_0x156369[_0x52b191(0x27c)]*0x64)/0x64,'commissionUSDT':Math[_0x52b191(0x2cd)](_0x156369['commissionUSDT']*0x64)/0x64,'merchantEarningsUSDT':Math['round'](_0x156369['merchantEarningsUSDT']*0x64)/0x64,'averageCommissionRate':Math['round'](_0x156369[_0x52b191(0x1ec)]*0x64)/0x64})),'merchantBreakdown':_0x500120[_0x52b191(0x284)]?undefined:Object['values'](_0x7f1da1)[_0x52b191(0x1e8)](_0x372cf7=>({..._0x372cf7,'turnoverUSDT':Math[_0x52b191(0x2cd)](_0x372cf7[_0x52b191(0x27c)]*0x64)/0x64,'commissionUSDT':Math[_0x52b191(0x2cd)](_0x372cf7[_0x52b191(0x208)]*0x64)/0x64,'merchantEarningsUSDT':Math['round'](_0x372cf7[_0x52b191(0x261)]*0x64)/0x64,'paidOutUSDT':Math[_0x52b191(0x2cd)](_0x372cf7[_0x52b191(0x2f5)]*0x64)/0x64,'averageCheckUSDT':Math[_0x52b191(0x2cd)](_0x372cf7[_0x52b191(0x2a5)]*0x64)/0x64})),'dailyData':Object[_0x52b191(0x267)](_0x4bc35f)['map'](_0x5644ca=>({..._0x5644ca,'turnover':Math['round'](_0x5644ca[_0x52b191(0x22f)]*0x64)/0x64,'merchantEarnings':Math[_0x52b191(0x2cd)](_0x5644ca[_0x52b191(0x224)]*0x64)/0x64,'gatewayEarnings':Math[_0x52b191(0x2cd)](_0x5644ca[_0x52b191(0x1c2)]*0x64)/0x64}))[_0x52b191(0x231)]((_0x46deb8,_0xf9ef42)=>_0x46deb8['date'][_0x52b191(0x256)](_0xf9ef42[_0x52b191(0x213)])),'periodInfo':{'from':_0x2aec76,'to':_0x1c0e00,'periodType':_0x500120[_0x52b191(0x24b)]||_0x52b191(0x228),'daysCount':_0x5b6b77}};return console[_0x52b191(0x2aa)](_0x52b191(0x216)),console[_0x52b191(0x2aa)]('\x20\x20\x20💰\x20Total\x20turnover:\x20'+_0x3c7c6a[_0x52b191(0x2b6)]+_0x52b191(0x1df)),console[_0x52b191(0x2aa)]('\x20\x20\x20👤\x20Merchant\x20earnings:\x20'+_0x3c7c6a[_0x52b191(0x224)]+_0x52b191(0x1df)),console[_0x52b191(0x2aa)](_0x52b191(0x25d)+_0x3c7c6a['gatewayEarnings']+_0x52b191(0x1df)),console[_0x52b191(0x2aa)](_0x52b191(0x260)+_0x3c7c6a[_0x52b191(0x25b)]+_0x52b191(0x1df)),console['log'](_0x52b191(0x28e)+_0x3c7c6a[_0x52b191(0x272)]+_0x52b191(0x1df)),console[_0x52b191(0x2aa)](_0x52b191(0x28a)+_0x3c7c6a['totalPayments']),_0x3c7c6a;}async[a36_0x4a3512(0x2ac)](){const _0x17ff08=a36_0x4a3512;console[_0x17ff08(0x2aa)](_0x17ff08(0x2e7));const _0x16357e=await database_1[_0x17ff08(0x1ea)][_0x17ff08(0x238)][_0x17ff08(0x273)]({'where':{'status':_0x17ff08(0x1cc)},'select':{'id':!![],'username':!![],'name':!![]},'orderBy':{'name':_0x17ff08(0x1fb)}});return console[_0x17ff08(0x2aa)](_0x17ff08(0x1cd)+_0x16357e[_0x17ff08(0x1f2)]+_0x17ff08(0x1fa)),_0x16357e['map'](_0x9d0e83=>({'id':_0x9d0e83['id'],'username':_0x9d0e83[_0x17ff08(0x2eb)],'name':_0x9d0e83['name']}));}[a36_0x4a3512(0x25c)](_0x376cec){const _0x515472=a36_0x4a3512,_0xda5a68={'test_gateway':'Test\x20Gateway','plisio':_0x515472(0x1d2),'rapyd':_0x515472(0x202),'noda':_0x515472(0x2c1),'cointopay':_0x515472(0x2ed),'cointopay2':_0x515472(0x2e0),'klyme_eu':_0x515472(0x280),'klyme_gb':_0x515472(0x29e),'klyme_de':'KLYME\x20DE','mastercard':_0x515472(0x2fb)};return _0xda5a68[_0x376cec]||_0x376cec;}[a36_0x4a3512(0x2f7)](_0x27cf72){const _0x5dfc68=a36_0x4a3512,_0x3af0e4={'Test\x20Gateway':'test_gateway','Plisio':_0x5dfc68(0x277),'Rapyd':_0x5dfc68(0x26d),'Noda':_0x5dfc68(0x23c),'CoinToPay':_0x5dfc68(0x24f),'CoinToPay2':'cointopay2','KLYME\x20EU':_0x5dfc68(0x271),'KLYME\x20GB':_0x5dfc68(0x24d),'KLYME\x20DE':_0x5dfc68(0x240),'MasterCard':_0x5dfc68(0x2b8)};return _0x3af0e4[_0x27cf72]||_0x27cf72['toLowerCase']();}async[a36_0x4a3512(0x1c4)](_0x23b28e){const _0x314ba3=a36_0x4a3512,{page:_0x4a5cf1,limit:_0x166342,minAmount:_0x26bdba,search:_0x3eb490}=_0x23b28e,_0x2fd7fc=(_0x4a5cf1-0x1)*_0x166342;console['log'](_0x314ba3(0x2ba),_0x23b28e);const _0x530a33={'balance':{'gt':0x0},'status':_0x314ba3(0x1cc)};_0x26bdba&&(_0x530a33[_0x314ba3(0x237)][_0x314ba3(0x26e)]=_0x26bdba);_0x3eb490&&(_0x530a33['OR']=[{'name':{'contains':_0x3eb490,'mode':_0x314ba3(0x2ce)}},{'username':{'contains':_0x3eb490,'mode':'insensitive'}}]);const [_0x50c187,_0x48c869]=await Promise['all']([database_1['default'][_0x314ba3(0x238)][_0x314ba3(0x273)]({'where':_0x530a33,'skip':_0x2fd7fc,'take':_0x166342,'orderBy':{'balance':_0x314ba3(0x279)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'balance':!![],'totalPaidOut':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'gatewaySettings':!![],'createdAt':!![]}}),database_1['default'][_0x314ba3(0x238)]['count']({'where':_0x530a33})]);console[_0x314ba3(0x2aa)](_0x314ba3(0x1bd)+_0x50c187[_0x314ba3(0x1f2)]+'\x20merchants\x20with\x20positive\x20balance');const _0x34146b=await Promise[_0x314ba3(0x263)](_0x50c187['map'](async _0x7d9945=>{const _0x475374=_0x314ba3,[_0x112b99,_0x426957,_0x504fd6]=await Promise[_0x475374(0x263)]([database_1[_0x475374(0x1ea)][_0x475374(0x203)][_0x475374(0x2e8)]({'where':{'shopId':_0x7d9945['id'],'status':_0x475374(0x289),'gateway':{'not':'test_gateway'}}}),database_1['default'][_0x475374(0x203)][_0x475374(0x225)]({'where':{'shopId':_0x7d9945['id'],'status':_0x475374(0x289),'gateway':{'not':_0x475374(0x250)}},'orderBy':{'paidAt':'asc'},'select':{'paidAt':!![]}}),database_1['default']['payment'][_0x475374(0x1fc)]({'by':[_0x475374(0x1d5)],'where':{'shopId':_0x7d9945['id'],'status':_0x475374(0x289),'gateway':{'not':'test_gateway'}},'_count':{'id':!![]},'_sum':{'amountUSDT':!![]}})]),_0x395209=new Date(),_0x2ece5f=new Date(_0x395209['getFullYear'](),_0x395209[_0x475374(0x248)](),0x1),_0x583c90=new Date(_0x395209['getFullYear'](),_0x395209[_0x475374(0x248)]()+0x1,0x0,0x17,0x3b,0x3b,0x3e7),[_0x10e1f2,_0x5006bb]=await Promise['all']([database_1[_0x475374(0x1ea)][_0x475374(0x234)][_0x475374(0x291)]({'_sum':{'amount':!![]},'where':{'shopId':_0x7d9945['id'],'status':_0x475374(0x28c)}}),database_1[_0x475374(0x1ea)][_0x475374(0x234)][_0x475374(0x291)]({'_sum':{'amount':!![]},'where':{'shopId':_0x7d9945['id'],'status':_0x475374(0x28c),'createdAt':{'gte':_0x2ece5f,'lte':_0x583c90}}})]),_0x36c5b8=_0x10e1f2['_sum'][_0x475374(0x22d)]||0x0,_0x1aa0d5=_0x5006bb[_0x475374(0x222)]['amount']||0x0,_0x45c1af=await Promise[_0x475374(0x263)](_0x504fd6[_0x475374(0x1e8)](async _0x4d02be=>{const _0x3f0aaf=_0x475374;let _0x1c5028=0xa;if(_0x7d9945[_0x3f0aaf(0x2ab)])try{const _0x2036e3=JSON[_0x3f0aaf(0x2c4)](_0x7d9945[_0x3f0aaf(0x2ab)]);for(const [_0x5b3df0,_0x238ada]of Object[_0x3f0aaf(0x2d7)](_0x2036e3)){if(_0x5b3df0[_0x3f0aaf(0x26b)]()===_0x4d02be[_0x3f0aaf(0x1d5)][_0x3f0aaf(0x26b)]()){_0x1c5028=_0x238ada[_0x3f0aaf(0x247)]||0xa,console['log'](_0x3f0aaf(0x22b)+_0x4d02be[_0x3f0aaf(0x1d5)]+_0x3f0aaf(0x2a9)+_0x7d9945['id']+_0x3f0aaf(0x212)+_0x1c5028+'%');break;}}}catch(_0x1cabbe){console[_0x3f0aaf(0x29d)](_0x3f0aaf(0x1ef)+_0x7d9945['id']+':',_0x1cabbe);}const _0x484138=_0x4d02be[_0x3f0aaf(0x222)]?.['amountUSDT']||0x0,_0x20e28a=_0x484138*(0x1-_0x1c5028/0x64);return{'gateway':_0x4d02be['gateway'],'count':_0x4d02be[_0x3f0aaf(0x1d8)]?.['id']||0x0,'amountUSDT':Math[_0x3f0aaf(0x2cd)](_0x484138*0x64)/0x64,'amountAfterCommissionUSDT':Math[_0x3f0aaf(0x2cd)](_0x20e28a*0x64)/0x64,'commission':_0x1c5028};})),_0x306c4d=_0x45c1af[_0x475374(0x276)]((_0x434adb,_0x2e0299)=>_0x434adb+_0x2e0299[_0x475374(0x25f)],0x0),_0x4a4a71=_0x7d9945['balance'];return console['log'](_0x475374(0x20b)+_0x7d9945['username']+':'),console[_0x475374(0x2aa)](_0x475374(0x239)+_0x306c4d[_0x475374(0x2a4)](0x2)+'\x20USDT\x20(gross\x20revenue)'),console[_0x475374(0x2aa)](_0x475374(0x2b3)+_0x45c1af['reduce']((_0x386c16,_0x378384)=>_0x386c16+_0x378384[_0x475374(0x266)],0x0)[_0x475374(0x2a4)](0x2)+_0x475374(0x211)),console[_0x475374(0x2aa)](_0x475374(0x1f6)+_0x4a4a71[_0x475374(0x2a4)](0x2)+'\x20USDT\x20(after\x20payouts)'),{'id':_0x7d9945['id'],'fullName':_0x7d9945[_0x475374(0x26a)],'username':_0x7d9945[_0x475374(0x2eb)],'telegramId':_0x7d9945[_0x475374(0x2b5)],'merchantUrl':_0x7d9945['shopUrl'],'wallets':{'usdtPolygonWallet':_0x7d9945['usdtPolygonWallet'],'usdtTrcWallet':_0x7d9945['usdtTrcWallet'],'usdtErcWallet':_0x7d9945[_0x475374(0x254)],'usdcPolygonWallet':_0x7d9945[_0x475374(0x21a)]},'totalAmountUSDT':Math[_0x475374(0x2cd)](_0x306c4d*0x64)/0x64,'totalAmountAfterCommissionUSDT':Math[_0x475374(0x2cd)](_0x4a4a71*0x64)/0x64,'totalPayout':Math['round'](_0x36c5b8*0x64)/0x64,'thisMonth':Math[_0x475374(0x2cd)](_0x1aa0d5*0x64)/0x64,'paymentsCount':_0x112b99,'oldestPaymentDate':_0x426957?.[_0x475374(0x2f2)]||_0x7d9945[_0x475374(0x233)],'gatewayBreakdown':_0x45c1af};})),_0x1047e9=_0x34146b[_0x314ba3(0x276)]((_0x560847,_0x4f0b1a)=>_0x560847+_0x4f0b1a[_0x314ba3(0x2ee)],0x0),_0x54b8c0=_0x34146b[_0x314ba3(0x276)]((_0x530dd2,_0x21b814)=>_0x530dd2+_0x21b814['totalAmountAfterCommissionUSDT'],0x0),_0x502543=_0x34146b[_0x314ba3(0x276)]((_0x50b756,_0x2a12fa)=>_0x50b756+_0x2a12fa[_0x314ba3(0x29a)],0x0),_0x44696f=_0x34146b[_0x314ba3(0x276)]((_0x1a0633,_0x58989a)=>_0x1a0633+_0x58989a[_0x314ba3(0x2d3)],0x0);return console['log'](_0x314ba3(0x2fc)+_0x48c869+_0x314ba3(0x22c)),console[_0x314ba3(0x2aa)]('\x20\x20\x20💰\x20Total\x20payments\x20turnover:\x20'+Math['round'](_0x1047e9*0x64)/0x64+_0x314ba3(0x270)),console[_0x314ba3(0x2aa)](_0x314ba3(0x299)+Math[_0x314ba3(0x2cd)](_0x54b8c0*0x64)/0x64+_0x314ba3(0x288)),console['log'](_0x314ba3(0x2d2)+Math['round'](_0x502543*0x64)/0x64+_0x314ba3(0x1df)),console[_0x314ba3(0x2aa)]('\x20\x20\x20📅\x20Total\x20payouts\x20(this\x20month):\x20'+Math[_0x314ba3(0x2cd)](_0x44696f*0x64)/0x64+_0x314ba3(0x1df)),{'merchants':_0x34146b,'pagination':{'page':_0x4a5cf1,'limit':_0x166342,'total':_0x48c869,'totalPages':Math['ceil'](_0x48c869/_0x166342)},'summary':{'totalMerchants':_0x48c869,'totalAmountUSDT':Math['round'](_0x1047e9*0x64)/0x64,'totalAmountAfterCommissionUSDT':Math[_0x314ba3(0x2cd)](_0x54b8c0*0x64)/0x64,'totalPayout':Math[_0x314ba3(0x2cd)](_0x502543*0x64)/0x64,'thisMonth':Math[_0x314ba3(0x2cd)](_0x44696f*0x64)/0x64}};}async[a36_0x4a3512(0x2f8)](_0x144a39){const _0x58a04d=a36_0x4a3512,{shopId:_0x28b1b3,amount:_0x5afefd,network:_0x34ed9e,wallet:_0x3a8a0f,notes:_0x300520,txid:_0xc0dc4f,periodFrom:_0x1581e8,periodTo:_0x51437f}=_0x144a39,_0xf4ae14=await database_1[_0x58a04d(0x1ea)][_0x58a04d(0x242)](async _0x23eeeb=>{const _0x3ebc76=_0x58a04d,_0x554b66=await _0x23eeeb[_0x3ebc76(0x238)]['findUnique']({'where':{'id':_0x28b1b3},'select':{'id':!![],'name':!![],'username':!![],'balance':!![],'totalPaidOut':!![]}});if(!_0x554b66)throw new Error('Shop\x20not\x20found');console['log'](_0x3ebc76(0x1e5)+_0x554b66[_0x3ebc76(0x2eb)]+':'),console[_0x3ebc76(0x2aa)](_0x3ebc76(0x20c)+_0x554b66[_0x3ebc76(0x237)][_0x3ebc76(0x2a4)](0x6)+_0x3ebc76(0x1df)),console['log'](_0x3ebc76(0x24e)+_0x5afefd[_0x3ebc76(0x2a4)](0x6)+_0x3ebc76(0x1df)),console[_0x3ebc76(0x2aa)](_0x3ebc76(0x27d)+_0x554b66[_0x3ebc76(0x25b)]['toFixed'](0x6)+'\x20USDT');if(_0xc0dc4f)console[_0x3ebc76(0x2aa)](_0x3ebc76(0x298)+_0xc0dc4f);if(_0x554b66[_0x3ebc76(0x237)]<_0x5afefd)throw new Error(_0x3ebc76(0x2dc)+_0x554b66[_0x3ebc76(0x237)][_0x3ebc76(0x2a4)](0x6)+_0x3ebc76(0x28f)+_0x5afefd[_0x3ebc76(0x2a4)](0x6)+_0x3ebc76(0x1df));let _0xec1563=_0x3a8a0f;if(!_0xec1563){const _0x473992=await _0x23eeeb[_0x3ebc76(0x238)][_0x3ebc76(0x2fa)]({'where':{'id':_0x28b1b3},'select':{'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![]}});if(_0x473992)switch(_0x34ed9e){case _0x3ebc76(0x2ec):_0xec1563=_0x473992[_0x3ebc76(0x200)]||undefined;break;case _0x3ebc76(0x258):_0xec1563=_0x473992['usdtTrcWallet']||undefined;break;case'erc20':_0xec1563=_0x473992[_0x3ebc76(0x254)]||undefined;break;case _0x3ebc76(0x252):_0xec1563=_0x473992['usdcPolygonWallet']||undefined;break;}}console[_0x3ebc76(0x2aa)](_0x3ebc76(0x205)+_0x34ed9e+':\x20'+(_0xec1563||_0x3ebc76(0x20e)));const _0x5c0c88=await _0x23eeeb[_0x3ebc76(0x234)]['create']({'data':{'shopId':_0x28b1b3,'amount':_0x5afefd,'network':_0x34ed9e,'status':_0x3ebc76(0x28c),'txid':_0xc0dc4f,'notes':_0x300520,'periodFrom':_0x1581e8?new Date(_0x1581e8):null,'periodTo':_0x51437f?new Date(_0x51437f):null,'createdAt':new Date(),'paidAt':new Date()}}),_0x561239=_0x554b66['balance']-_0x5afefd,_0x1d249c=_0x554b66[_0x3ebc76(0x25b)]+_0x5afefd;return await _0x23eeeb[_0x3ebc76(0x238)][_0x3ebc76(0x2a8)]({'where':{'id':_0x28b1b3},'data':{'balance':_0x561239,'totalPaidOut':_0x1d249c}}),console[_0x3ebc76(0x2aa)](_0x3ebc76(0x2a2)+_0x554b66[_0x3ebc76(0x2eb)]+'\x20balance\x20updated:'),console[_0x3ebc76(0x2aa)](_0x3ebc76(0x23e)+_0x554b66[_0x3ebc76(0x237)][_0x3ebc76(0x2a4)](0x6)+'\x20->\x20'+_0x561239['toFixed'](0x6)+'\x20USDT\x20(-'+_0x5afefd[_0x3ebc76(0x2a4)](0x6)+')'),console['log']('\x20\x20\x20Total\x20paid\x20out:\x20'+_0x554b66[_0x3ebc76(0x25b)][_0x3ebc76(0x2a4)](0x6)+_0x3ebc76(0x2e5)+_0x1d249c[_0x3ebc76(0x2a4)](0x6)+_0x3ebc76(0x2af)+_0x5afefd[_0x3ebc76(0x2a4)](0x6)+')'),{'payout':_0x5c0c88,'shop':_0x554b66};});return console[_0x58a04d(0x2aa)](_0x58a04d(0x226)+_0xf4ae14[_0x58a04d(0x234)]['id']+_0x58a04d(0x2a9)+_0xf4ae14['shop'][_0x58a04d(0x2eb)]+'\x20('+_0x5afefd+'\x20USDT)'),{'id':_0xf4ae14[_0x58a04d(0x234)]['id'],'shopId':_0xf4ae14[_0x58a04d(0x234)][_0x58a04d(0x284)],'shopName':_0xf4ae14[_0x58a04d(0x238)][_0x58a04d(0x26a)],'shopUsername':_0xf4ae14['shop'][_0x58a04d(0x2eb)],'amount':_0xf4ae14[_0x58a04d(0x234)][_0x58a04d(0x22d)],'network':_0xf4ae14[_0x58a04d(0x234)][_0x58a04d(0x27a)],'status':_0xf4ae14[_0x58a04d(0x234)][_0x58a04d(0x1d3)],'txid':_0xf4ae14[_0x58a04d(0x234)][_0x58a04d(0x257)],'notes':_0xf4ae14[_0x58a04d(0x234)][_0x58a04d(0x22a)],'periodFrom':_0xf4ae14[_0x58a04d(0x234)][_0x58a04d(0x2ef)],'periodTo':_0xf4ae14['payout']['periodTo'],'createdAt':_0xf4ae14[_0x58a04d(0x234)][_0x58a04d(0x233)],'paidAt':_0xf4ae14[_0x58a04d(0x234)][_0x58a04d(0x2f2)]};}async['getAllPayouts'](_0x27c8c1){const _0x93b709=a36_0x4a3512,{page:_0xa118d8,limit:_0x54dfc8,shopId:_0x484a07,network:_0x47f5a1,dateFrom:_0x1933f0,dateTo:_0x43cd2d,search:_0x51f5d7}=_0x27c8c1,_0x5ce7e4=(_0xa118d8-0x1)*_0x54dfc8,_0x40c0ba={};_0x484a07&&(_0x40c0ba[_0x93b709(0x284)]=_0x484a07);_0x47f5a1&&(_0x40c0ba[_0x93b709(0x27a)]=_0x47f5a1);(_0x1933f0||_0x43cd2d)&&(_0x40c0ba[_0x93b709(0x233)]={},_0x1933f0&&(_0x40c0ba[_0x93b709(0x233)]['gte']=new Date(_0x1933f0)),_0x43cd2d&&(_0x40c0ba['createdAt'][_0x93b709(0x2d4)]=new Date(_0x43cd2d)));_0x51f5d7&&(_0x40c0ba['OR']=[{'shop':{'name':{'contains':_0x51f5d7,'mode':_0x93b709(0x2ce)}}},{'shop':{'username':{'contains':_0x51f5d7,'mode':_0x93b709(0x2ce)}}},{'notes':{'contains':_0x51f5d7,'mode':_0x93b709(0x2ce)}}]);const [_0x134975,_0x36c28f]=await Promise['all']([database_1[_0x93b709(0x1ea)][_0x93b709(0x234)]['findMany']({'where':_0x40c0ba,'skip':_0x5ce7e4,'take':_0x54dfc8,'orderBy':{'createdAt':'desc'},'select':{'id':!![],'shopId':!![],'amount':!![],'network':!![],'status':!![],'txid':!![],'notes':!![],'periodFrom':!![],'periodTo':!![],'createdAt':!![],'paidAt':!![],'shop':{'select':{'name':!![],'username':!![]}}}}),database_1['default'][_0x93b709(0x234)][_0x93b709(0x2e8)]({'where':_0x40c0ba})]);return{'payouts':_0x134975['map'](_0xb2b7aa=>({'id':_0xb2b7aa['id'],'shopId':_0xb2b7aa[_0x93b709(0x284)],'shopName':_0xb2b7aa['shop']['name'],'shopUsername':_0xb2b7aa[_0x93b709(0x238)][_0x93b709(0x2eb)],'amount':_0xb2b7aa[_0x93b709(0x22d)],'network':_0xb2b7aa[_0x93b709(0x27a)],'status':_0xb2b7aa[_0x93b709(0x1d3)],'txid':_0xb2b7aa[_0x93b709(0x257)],'notes':_0xb2b7aa['notes'],'periodFrom':_0xb2b7aa[_0x93b709(0x2ef)],'periodTo':_0xb2b7aa[_0x93b709(0x1d1)],'createdAt':_0xb2b7aa[_0x93b709(0x233)],'paidAt':_0xb2b7aa[_0x93b709(0x2f2)]})),'pagination':{'page':_0xa118d8,'limit':_0x54dfc8,'total':_0x36c28f,'totalPages':Math[_0x93b709(0x2bf)](_0x36c28f/_0x54dfc8)}};}async[a36_0x4a3512(0x292)](_0x1f3db6){const _0x47ad1c=a36_0x4a3512,_0x16f7c8=await database_1[_0x47ad1c(0x1ea)][_0x47ad1c(0x234)][_0x47ad1c(0x2fa)]({'where':{'id':_0x1f3db6},'include':{'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x16f7c8)return null;return{'id':_0x16f7c8['id'],'shopId':_0x16f7c8[_0x47ad1c(0x284)],'shopName':_0x16f7c8[_0x47ad1c(0x238)][_0x47ad1c(0x26a)],'shopUsername':_0x16f7c8[_0x47ad1c(0x238)][_0x47ad1c(0x2eb)],'amount':_0x16f7c8[_0x47ad1c(0x22d)],'network':_0x16f7c8[_0x47ad1c(0x27a)],'status':_0x16f7c8[_0x47ad1c(0x1d3)],'txid':_0x16f7c8[_0x47ad1c(0x257)],'notes':_0x16f7c8[_0x47ad1c(0x22a)],'periodFrom':_0x16f7c8[_0x47ad1c(0x2ef)],'periodTo':_0x16f7c8[_0x47ad1c(0x1d1)],'createdAt':_0x16f7c8[_0x47ad1c(0x233)],'paidAt':_0x16f7c8['paidAt']};}async[a36_0x4a3512(0x236)](_0x29d95f){const _0x13065b=a36_0x4a3512;await database_1['default'][_0x13065b(0x234)][_0x13065b(0x269)]({'where':{'id':_0x29d95f}});}async[a36_0x4a3512(0x2f1)](_0x14eba4){const _0x417d2a=a36_0x4a3512,{page:_0x4ee708,limit:_0x4324f0,status:_0x1e4443,gateway:_0x43934d,shopId:_0x5229bf,dateFrom:_0x40d252,dateTo:_0xb63210,search:_0x4667e4,currency:_0x3448e5,sortBy:_0x5699d2,sortOrder:_0x17c268}=_0x14eba4,_0x3cc1c0=(_0x4ee708-0x1)*_0x4324f0;console['log'](_0x417d2a(0x245),_0x14eba4);const _0x49527c=await database_1['default'][_0x417d2a(0x203)][_0x417d2a(0x1fc)]({'by':[_0x417d2a(0x1d5)],'_count':{'gateway':!![]}});console[_0x417d2a(0x2aa)]('📊\x20Available\x20gateways\x20in\x20database:',_0x49527c[_0x417d2a(0x1e8)](_0x2f5017=>_0x2f5017[_0x417d2a(0x1d5)]+'\x20('+_0x2f5017[_0x417d2a(0x1d8)]['gateway']+_0x417d2a(0x206)));if(_0x43934d){const _0x477b12=_0x49527c[_0x417d2a(0x268)](_0xeee1a0=>_0xeee1a0[_0x417d2a(0x1d5)][_0x417d2a(0x26b)]()===_0x43934d['toLowerCase']());!_0x477b12&&_0x43934d[_0x417d2a(0x26b)]()!==_0x417d2a(0x250)&&console[_0x417d2a(0x2aa)]('⚠️\x20Requested\x20gateway\x20\x27'+_0x43934d+_0x417d2a(0x1c9)+_0x49527c['map'](_0x329bb2=>_0x329bb2[_0x417d2a(0x1d5)])[_0x417d2a(0x2b1)](',\x20'));}const _0x54ac84={};_0x1e4443&&(_0x54ac84[_0x417d2a(0x1d3)]=_0x1e4443[_0x417d2a(0x29b)]());if(!_0x43934d)_0x54ac84[_0x417d2a(0x1d5)]={'not':_0x417d2a(0x250)};else{if(_0x43934d&&(_0x43934d[_0x417d2a(0x26b)]()===_0x417d2a(0x250)||_0x43934d==='0000'))_0x54ac84[_0x417d2a(0x1d5)]=_0x417d2a(0x250);else{let _0xd7a088=_0x43934d;const _0x58b3bb=(0x0,gateway_1[_0x417d2a(0x274)])(_0x43934d);if(_0x58b3bb)_0xd7a088=_0x58b3bb,console[_0x417d2a(0x2aa)](_0x417d2a(0x1e6)+_0x43934d+_0x417d2a(0x265)+_0xd7a088+'\x27');else{const _0x425cae=(0x0,gateway_1[_0x417d2a(0x29f)])(_0x43934d);if(_0x425cae){const _0x3d63ac=(0x0,gateway_1['getGatewayNameById'])(_0x425cae);_0x3d63ac&&(_0xd7a088=_0x3d63ac,console[_0x417d2a(0x2aa)]('🔄\x20Converted\x20gateway\x20name\x20\x27'+_0x43934d+_0x417d2a(0x2a1)+_0x425cae+_0x417d2a(0x255)+_0xd7a088+'\x27'));}else console['log']('🔍\x20Using\x20gateway\x20\x27'+_0x43934d+_0x417d2a(0x1ed));}const _0x33895d=await database_1[_0x417d2a(0x1ea)][_0x417d2a(0x203)][_0x417d2a(0x2e8)]({'where':{'gateway':_0xd7a088[_0x417d2a(0x26b)]()},'take':0x1});_0x33895d===0x0?(console[_0x417d2a(0x2aa)](_0x417d2a(0x1e0)+_0xd7a088+_0x417d2a(0x285)+_0x43934d+_0x417d2a(0x1f8)),_0x54ac84[_0x417d2a(0x1d5)]='NONEXISTENT_GATEWAY_FILTER'):(_0x54ac84[_0x417d2a(0x1d5)]=_0xd7a088[_0x417d2a(0x26b)](),console[_0x417d2a(0x2aa)](_0x417d2a(0x1ee)+_0xd7a088+_0x417d2a(0x285)+_0x43934d+'\x27)'));}}console[_0x417d2a(0x2aa)](_0x417d2a(0x218),_0x54ac84['gateway']);_0x5229bf&&(_0x54ac84['shopId']=_0x5229bf);_0x3448e5&&(_0x54ac84[_0x417d2a(0x295)]=_0x3448e5[_0x417d2a(0x29b)](),console[_0x417d2a(0x2aa)](_0x417d2a(0x2a3)+_0x3448e5[_0x417d2a(0x29b)]()));(_0x40d252||_0xb63210)&&(_0x54ac84[_0x417d2a(0x233)]={},_0x40d252&&(_0x54ac84[_0x417d2a(0x233)][_0x417d2a(0x26e)]=new Date(_0x40d252)),_0xb63210&&(_0x54ac84['createdAt'][_0x417d2a(0x2d4)]=new Date(_0xb63210)));_0x4667e4&&(_0x54ac84['OR']=[{'id':{'contains':_0x4667e4,'mode':_0x417d2a(0x2ce)}},{'orderId':{'contains':_0x4667e4,'mode':_0x417d2a(0x2ce)}},{'gatewayOrderId':{'contains':_0x4667e4,'mode':_0x417d2a(0x2ce)}},{'customerEmail':{'contains':_0x4667e4,'mode':_0x417d2a(0x2ce)}},{'shop':{'name':{'contains':_0x4667e4,'mode':_0x417d2a(0x2ce)}}},{'shop':{'username':{'contains':_0x4667e4,'mode':_0x417d2a(0x2ce)}}}]);console['log'](_0x417d2a(0x241),JSON[_0x417d2a(0x27b)](_0x54ac84,null,0x2));let _0x2c475b={'createdAt':_0x417d2a(0x279)};if(_0x5699d2){const _0x57cbd2=[_0x417d2a(0x22d),_0x417d2a(0x233),_0x417d2a(0x26c),_0x417d2a(0x1d3),'gateway',_0x417d2a(0x295)],_0x11fbe0=['asc',_0x417d2a(0x279)];if(_0x57cbd2[_0x417d2a(0x217)](_0x5699d2)){const _0x3035a8=_0x11fbe0[_0x417d2a(0x217)](_0x17c268)?_0x17c268:'desc';_0x2c475b={[_0x5699d2]:_0x3035a8},console[_0x417d2a(0x2aa)]('📊\x20Sorting\x20payments\x20by\x20'+_0x5699d2+_0x417d2a(0x1bc)+_0x3035a8+_0x417d2a(0x24a));}}const [_0x65e0e4,_0x4cf49e]=await Promise[_0x417d2a(0x263)]([database_1[_0x417d2a(0x1ea)]['payment']['findMany']({'where':_0x54ac84,'skip':_0x3cc1c0,'take':_0x4324f0,'orderBy':_0x2c475b,'select':{'id':!![],'shopId':!![],'amount':!![],'amountAfterGatewayCommissionUSDT':!![],'currency':!![],'sourceCurrency':!![],'status':!![],'gateway':!![],'orderId':!![],'gatewayOrderId':!![],'gatewayPaymentId':!![],'customerEmail':!![],'customerName':!![],'customerCountry':!![],'customerIp':!![],'customerUa':!![],'externalPaymentUrl':!![],'successUrl':!![],'failUrl':!![],'pendingUrl':!![],'whiteUrl':!![],'expiresAt':!![],'invoiceTotalSum':!![],'qrCode':!![],'qrUrl':!![],'country':!![],'language':!![],'amountIsEditable':!![],'maxPayments':!![],'rapydCustomer':!![],'cardLast4':!![],'paymentMethod':!![],'bankId':!![],'remitterIban':!![],'remitterName':!![],'failureMessage':!![],'usage':!![],'createdAt':!![],'updatedAt':!![],'shop':{'select':{'name':!![],'username':!![]}}}}),database_1[_0x417d2a(0x1ea)][_0x417d2a(0x203)][_0x417d2a(0x2e8)]({'where':_0x54ac84})]);return{'payments':_0x65e0e4,'pagination':{'page':_0x4ee708,'limit':_0x4324f0,'total':_0x4cf49e,'totalPages':Math[_0x417d2a(0x2bf)](_0x4cf49e/_0x4324f0)}};}async[a36_0x4a3512(0x204)](_0x24383f){const _0x4aa7f1=a36_0x4a3512,_0x2c3b7e=await database_1[_0x4aa7f1(0x1ea)]['payment']['findUnique']({'where':{'id':_0x24383f},'select':{'id':!![],'shopId':!![],'amount':!![],'amountAfterGatewayCommissionUSDT':!![],'currency':!![],'sourceCurrency':!![],'status':!![],'gateway':!![],'orderId':!![],'gatewayOrderId':!![],'gatewayPaymentId':!![],'customerEmail':!![],'customerName':!![],'customerCountry':!![],'customerIp':!![],'customerUa':!![],'externalPaymentUrl':!![],'successUrl':!![],'failUrl':!![],'pendingUrl':!![],'whiteUrl':!![],'expiresAt':!![],'invoiceTotalSum':!![],'qrCode':!![],'qrUrl':!![],'country':!![],'language':!![],'amountIsEditable':!![],'maxPayments':!![],'rapydCustomer':!![],'cardLast4':!![],'paymentMethod':!![],'bankId':!![],'remitterIban':!![],'remitterName':!![],'failureMessage':!![],'usage':!![],'createdAt':!![],'updatedAt':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x2c3b7e)return null;return{'id':_0x2c3b7e['id'],'shopId':_0x2c3b7e[_0x4aa7f1(0x284)],'gateway':_0x2c3b7e[_0x4aa7f1(0x1d5)],'amount':_0x2c3b7e[_0x4aa7f1(0x22d)],'currency':_0x2c3b7e['currency'],'status':_0x2c3b7e[_0x4aa7f1(0x1d3)],'orderId':_0x2c3b7e[_0x4aa7f1(0x1d4)],'gatewayOrderId':_0x2c3b7e[_0x4aa7f1(0x21c)],'customerEmail':_0x2c3b7e['customerEmail'],'customerName':_0x2c3b7e['customerName'],'customerCountry':_0x2c3b7e[_0x4aa7f1(0x1e7)],'customerIp':_0x2c3b7e[_0x4aa7f1(0x1e9)],'customerUa':_0x2c3b7e[_0x4aa7f1(0x2f0)],'failureMessage':_0x2c3b7e[_0x4aa7f1(0x1d7)],'externalPaymentUrl':_0x2c3b7e['externalPaymentUrl'],'successUrl':_0x2c3b7e[_0x4aa7f1(0x229)],'failUrl':_0x2c3b7e[_0x4aa7f1(0x278)],'pendingUrl':_0x2c3b7e[_0x4aa7f1(0x1e2)],'whiteUrl':_0x2c3b7e[_0x4aa7f1(0x1ce)],'createdAt':_0x2c3b7e['createdAt'],'updatedAt':_0x2c3b7e['updatedAt'],'shop':_0x2c3b7e[_0x4aa7f1(0x238)]};}async[a36_0x4a3512(0x1f1)](_0x9795b2,_0x54418d,_0x2a328e,_0x428dd4){const _0x1b3750=a36_0x4a3512,_0x58e277=await database_1[_0x1b3750(0x1ea)][_0x1b3750(0x242)](async _0x2df7dc=>{const _0x3074d9=_0x1b3750,_0x1ecd5f=await _0x2df7dc[_0x3074d9(0x203)]['findUnique']({'where':{'id':_0x9795b2},'include':{'shop':{'select':{'id':!![],'name':!![],'username':!![],'balance':!![]}}}});if(!_0x1ecd5f)throw new Error(_0x3074d9(0x23d));const _0x53abdb=_0x1ecd5f['status'],_0x35fe76=_0x54418d[_0x3074d9(0x29b)]();console['log']('🔄\x20Admin\x20updating\x20payment\x20'+_0x9795b2+_0x3074d9(0x20f)+_0x53abdb+_0x3074d9(0x2e5)+_0x35fe76),console['log']('💰\x20Current\x20shop\x20balance:\x20'+_0x1ecd5f[_0x3074d9(0x238)][_0x3074d9(0x237)]+'\x20USDT');const _0x26e942={'status':_0x35fe76,'updatedAt':new Date(),'statusChangedBy':_0x3074d9(0x2f4),'statusChangedAt':new Date()};_0x2a328e&&(_0x26e942['adminNotes']=_0x2a328e);_0x35fe76===_0x3074d9(0x23f)&&_0x428dd4&&(_0x26e942[_0x3074d9(0x2b4)]=_0x428dd4);let _0x1964e9=0x0,_0x15255b=_0x1ecd5f[_0x3074d9(0x238)]['balance'];if(_0x35fe76==='PAID'&&_0x53abdb!==_0x3074d9(0x289)){_0x26e942['paidAt']=new Date();const _0x57b318=await currencyService_1[_0x3074d9(0x2da)][_0x3074d9(0x235)](_0x1ecd5f[_0x3074d9(0x22d)],_0x1ecd5f[_0x3074d9(0x295)]);_0x26e942[_0x3074d9(0x25f)]=_0x57b318;let _0x488913=0xa;const _0x72325f=await _0x2df7dc[_0x3074d9(0x238)]['findUnique']({'where':{'id':_0x1ecd5f[_0x3074d9(0x284)]},'select':{'gatewaySettings':!![]}});if(_0x72325f?.[_0x3074d9(0x2ab)])try{const _0x1564e8=JSON[_0x3074d9(0x2c4)](_0x72325f[_0x3074d9(0x2ab)]);for(const [_0x5638e9,_0x1e2646]of Object['entries'](_0x1564e8)){if(_0x5638e9[_0x3074d9(0x26b)]()===_0x1ecd5f[_0x3074d9(0x1d5)][_0x3074d9(0x26b)]()){_0x488913=_0x1e2646[_0x3074d9(0x247)]||0xa;break;}}}catch(_0x476b50){console[_0x3074d9(0x29d)]('Error\x20parsing\x20gateway\x20settings\x20for\x20payment\x20'+_0x9795b2+':',_0x476b50);}let _0x23d54c;_0x1ecd5f[_0x3074d9(0x1fd)]!==null&&_0x1ecd5f[_0x3074d9(0x1fd)]!==undefined?(_0x23d54c=_0x1ecd5f[_0x3074d9(0x1fd)],console[_0x3074d9(0x2aa)](_0x3074d9(0x2d6)+_0x23d54c[_0x3074d9(0x2a4)](0x6)+_0x3074d9(0x27f)+_0x9795b2)):(_0x23d54c=_0x57b318*(0x1-_0x488913/0x64),console[_0x3074d9(0x2aa)](_0x3074d9(0x2b0)+_0x9795b2+':\x20'+_0x488913+_0x3074d9(0x244)+_0x57b318[_0x3074d9(0x2a4)](0x6)+_0x3074d9(0x1df)),_0x26e942[_0x3074d9(0x1fd)]=_0x23d54c),_0x1964e9=_0x23d54c,_0x15255b+=_0x23d54c,console[_0x3074d9(0x2aa)](_0x3074d9(0x221)+_0x9795b2+_0x3074d9(0x223)),console[_0x3074d9(0x2aa)](_0x3074d9(0x1c5)+_0x57b318[_0x3074d9(0x2a4)](0x6)+_0x3074d9(0x1df)),console['log'](_0x3074d9(0x2d1)+_0x1ecd5f['gateway']+_0x3074d9(0x1f5)+_0x488913+'%'),console[_0x3074d9(0x2aa)]('\x20\x20\x20Merchant\x20gets:\x20'+_0x23d54c['toFixed'](0x6)+'\x20USDT\x20(after\x20'+_0x488913+_0x3074d9(0x21d)),console[_0x3074d9(0x2aa)]('\x20\x20\x20Added\x20to\x20balance:\x20+'+_0x23d54c[_0x3074d9(0x2a4)](0x6)+_0x3074d9(0x1df));}else{if(_0x53abdb==='PAID'&&_0x35fe76!==_0x3074d9(0x289)){if(_0x1ecd5f['amountUSDT']){let _0x2c2c9a=0xa;const _0x5a8098=await _0x2df7dc['shop'][_0x3074d9(0x2fa)]({'where':{'id':_0x1ecd5f[_0x3074d9(0x284)]},'select':{'gatewaySettings':!![]}});if(_0x5a8098?.[_0x3074d9(0x2ab)])try{const _0x3e5381=JSON[_0x3074d9(0x2c4)](_0x5a8098[_0x3074d9(0x2ab)]);for(const [_0x51e4d3,_0x2eef33]of Object[_0x3074d9(0x2d7)](_0x3e5381)){if(_0x51e4d3[_0x3074d9(0x26b)]()===_0x1ecd5f['gateway']['toLowerCase']()){_0x2c2c9a=_0x2eef33['commission']||0xa;break;}}}catch(_0x1bcf26){console[_0x3074d9(0x29d)](_0x3074d9(0x20d)+_0x9795b2+':',_0x1bcf26);}const _0x2ec1e1=_0x1ecd5f[_0x3074d9(0x25f)]*(0x1-_0x2c2c9a/0x64);_0x1964e9=-_0x2ec1e1,_0x15255b-=_0x2ec1e1,_0x26e942[_0x3074d9(0x25f)]=null,_0x26e942[_0x3074d9(0x1fd)]=null,console[_0x3074d9(0x2aa)](_0x3074d9(0x221)+_0x9795b2+_0x3074d9(0x21e)),console[_0x3074d9(0x2aa)](_0x3074d9(0x1c5)+_0x1ecd5f['amountUSDT']['toFixed'](0x6)+_0x3074d9(0x1df)),console['log'](_0x3074d9(0x2d1)+_0x1ecd5f[_0x3074d9(0x1d5)]+_0x3074d9(0x1f5)+_0x2c2c9a+'%'),console[_0x3074d9(0x2aa)](_0x3074d9(0x1cb)+_0x2ec1e1[_0x3074d9(0x2a4)](0x6)+_0x3074d9(0x259)+_0x2c2c9a+_0x3074d9(0x21d)),console['log'](_0x3074d9(0x2d0)+_0x2ec1e1[_0x3074d9(0x2a4)](0x6)+_0x3074d9(0x1df));}}}_0x35fe76===_0x3074d9(0x23f)&&(_0x53abdb==='PAID'&&_0x1ecd5f[_0x3074d9(0x25f)]&&console[_0x3074d9(0x2aa)]('💸\x20CHARGEBACK:\x20Merchant\x20amount\x20already\x20deducted\x20from\x20balance'),_0x428dd4&&_0x428dd4>0x0&&(_0x1964e9-=_0x428dd4,_0x15255b-=_0x428dd4,console[_0x3074d9(0x2aa)](_0x3074d9(0x2f6)+_0x428dd4[_0x3074d9(0x2a4)](0x6)+_0x3074d9(0x2c3))));_0x35fe76===_0x3074d9(0x1e1)&&_0x53abdb===_0x3074d9(0x289)&&console[_0x3074d9(0x2aa)]('🔄\x20REFUND:\x20Payment\x20amount\x20already\x20deducted\x20from\x20balance');const _0x52f92e=await _0x2df7dc[_0x3074d9(0x203)]['update']({'where':{'id':_0x9795b2},'data':_0x26e942,'include':{'shop':{'select':{'name':!![],'username':!![]}}}});return _0x1964e9!==0x0&&(await _0x2df7dc['shop']['update']({'where':{'id':_0x1ecd5f['shopId']},'data':{'balance':_0x15255b}}),console['log'](_0x3074d9(0x2a2)+_0x1ecd5f[_0x3074d9(0x284)]+_0x3074d9(0x2cb)+_0x1ecd5f[_0x3074d9(0x238)][_0x3074d9(0x237)]['toFixed'](0x6)+_0x3074d9(0x2e5)+_0x15255b['toFixed'](0x6)+_0x3074d9(0x1f4)+(_0x1964e9>0x0?'+':'')+_0x1964e9[_0x3074d9(0x2a4)](0x6)+')')),_0x52f92e;});return{'id':_0x58e277['id'],'shopId':_0x58e277[_0x1b3750(0x284)],'gateway':_0x58e277['gateway'],'amount':_0x58e277['amount'],'currency':_0x58e277[_0x1b3750(0x295)],'status':_0x58e277['status'],'orderId':_0x58e277['orderId'],'gatewayOrderId':_0x58e277['gatewayOrderId'],'customerEmail':_0x58e277[_0x1b3750(0x1c3)],'customerName':_0x58e277[_0x1b3750(0x1ca)],'customerCountry':_0x58e277[_0x1b3750(0x1e7)],'customerIp':_0x58e277[_0x1b3750(0x1e9)],'customerUa':_0x58e277[_0x1b3750(0x2f0)],'failureMessage':_0x58e277['failureMessage'],'adminNotes':_0x58e277['adminNotes'],'chargebackAmount':_0x58e277[_0x1b3750(0x2b4)],'statusChangedBy':_0x58e277[_0x1b3750(0x2ca)],'statusChangedAt':_0x58e277['statusChangedAt'],'createdAt':_0x58e277[_0x1b3750(0x233)],'updatedAt':_0x58e277[_0x1b3750(0x26c)],'shop':_0x58e277[_0x1b3750(0x238)]};}async['updateUser'](_0x5bf9f0,_0x47e1a6){const _0x1cb690=a36_0x4a3512,_0x1c36f1=Math[_0x1cb690(0x1f3)]()['toString'](0x24)[_0x1cb690(0x2a6)](0x2,0x9);console['log'](_0x1cb690(0x2c8)+_0x1c36f1+_0x1cb690(0x209)+_0x5bf9f0);const _0x4b473e={..._0x47e1a6};_0x47e1a6[_0x1cb690(0x297)]&&_0x47e1a6['password'][_0x1cb690(0x2c7)]()!==''?(console[_0x1cb690(0x2aa)]('🔐\x20['+_0x1c36f1+_0x1cb690(0x2d8)+_0x5bf9f0),_0x4b473e['password']=await bcryptjs_1['default'][_0x1cb690(0x2b7)](_0x47e1a6[_0x1cb690(0x297)],0xc)):(console[_0x1cb690(0x2aa)](_0x1cb690(0x2ad)+_0x1c36f1+_0x1cb690(0x2fd)),delete _0x4b473e[_0x1cb690(0x297)]);_0x47e1a6['fullName']&&(_0x4b473e[_0x1cb690(0x26a)]=_0x47e1a6[_0x1cb690(0x2e2)],delete _0x4b473e[_0x1cb690(0x2e2)]);_0x47e1a6[_0x1cb690(0x2e4)]&&(_0x4b473e[_0x1cb690(0x2b5)]=_0x47e1a6[_0x1cb690(0x2e4)],delete _0x4b473e['telegramId']);_0x47e1a6[_0x1cb690(0x290)]&&(_0x4b473e['shopUrl']=_0x47e1a6[_0x1cb690(0x290)],delete _0x4b473e['merchantUrl']);if(_0x47e1a6['gateways']){const _0x18c950=_0x47e1a6[_0x1cb690(0x210)][_0x1cb690(0x1e8)](_0x350997=>this['getGatewayInternalName'](_0x350997));console[_0x1cb690(0x2aa)](_0x1cb690(0x2a0),_0x47e1a6[_0x1cb690(0x210)],'->',_0x18c950),_0x4b473e[_0x1cb690(0x1bf)]=JSON[_0x1cb690(0x27b)](_0x18c950),delete _0x4b473e[_0x1cb690(0x210)];}_0x47e1a6['gatewaySettings']&&(console[_0x1cb690(0x2aa)](_0x1cb690(0x286)+_0x1c36f1+']\x20Gateway\x20settings\x20before\x20saving:',_0x47e1a6[_0x1cb690(0x2ab)]),_0x4b473e[_0x1cb690(0x2ab)]=JSON[_0x1cb690(0x27b)](_0x47e1a6[_0x1cb690(0x2ab)]),console['log']('🔧\x20['+_0x1c36f1+_0x1cb690(0x1c0),_0x4b473e[_0x1cb690(0x2ab)]));_0x47e1a6[_0x1cb690(0x2e3)]&&(_0x47e1a6[_0x1cb690(0x2e3)]['usdtPolygonWallet']!==undefined&&(_0x4b473e[_0x1cb690(0x200)]=_0x47e1a6[_0x1cb690(0x2e3)][_0x1cb690(0x200)]||null),_0x47e1a6[_0x1cb690(0x2e3)]['usdtTrcWallet']!==undefined&&(_0x4b473e[_0x1cb690(0x2bb)]=_0x47e1a6[_0x1cb690(0x2e3)][_0x1cb690(0x2bb)]||null),_0x47e1a6[_0x1cb690(0x2e3)]['usdtErcWallet']!==undefined&&(_0x4b473e[_0x1cb690(0x254)]=_0x47e1a6[_0x1cb690(0x2e3)]['usdtErcWallet']||null),_0x47e1a6[_0x1cb690(0x2e3)]['usdcPolygonWallet']!==undefined&&(_0x4b473e[_0x1cb690(0x21a)]=_0x47e1a6['wallets'][_0x1cb690(0x21a)]||null),delete _0x4b473e[_0x1cb690(0x2e3)]);const _0x4cbedd=await database_1[_0x1cb690(0x1ea)][_0x1cb690(0x238)]['update']({'where':{'id':_0x5bf9f0},'data':_0x4b473e,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return console[_0x1cb690(0x2aa)]('🎯\x20['+_0x1c36f1+_0x1cb690(0x1f7),_0x4cbedd['gatewaySettings']),{'id':_0x4cbedd['id'],'fullName':_0x4cbedd[_0x1cb690(0x26a)],'username':_0x4cbedd[_0x1cb690(0x2eb)],'telegramId':_0x4cbedd[_0x1cb690(0x2b5)],'merchantUrl':_0x4cbedd['shopUrl'],'gateways':_0x4cbedd[_0x1cb690(0x1bf)]?JSON[_0x1cb690(0x2c4)](_0x4cbedd[_0x1cb690(0x1bf)]):null,'gatewaySettings':_0x4cbedd['gatewaySettings']?JSON['parse'](_0x4cbedd['gatewaySettings']):null,'publicKey':_0x4cbedd[_0x1cb690(0x2c5)],'wallets':{'usdtPolygonWallet':_0x4cbedd[_0x1cb690(0x200)],'usdtTrcWallet':_0x4cbedd['usdtTrcWallet'],'usdtErcWallet':_0x4cbedd[_0x1cb690(0x254)],'usdcPolygonWallet':_0x4cbedd[_0x1cb690(0x21a)]},'status':_0x4cbedd['status'],'createdAt':_0x4cbedd[_0x1cb690(0x233)]};}async[a36_0x4a3512(0x2dd)](_0x3500fc){const _0x52fcd0=a36_0x4a3512,_0x1eb47d=await database_1['default'][_0x52fcd0(0x238)][_0x52fcd0(0x2a8)]({'where':{'id':_0x3500fc},'data':{'status':_0x52fcd0(0x2e9)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x1eb47d['id'],'fullName':_0x1eb47d[_0x52fcd0(0x26a)],'username':_0x1eb47d[_0x52fcd0(0x2eb)],'telegramId':_0x1eb47d[_0x52fcd0(0x2b5)],'merchantUrl':_0x1eb47d['shopUrl'],'gateways':_0x1eb47d[_0x52fcd0(0x1bf)]?JSON[_0x52fcd0(0x2c4)](_0x1eb47d[_0x52fcd0(0x1bf)]):null,'gatewaySettings':_0x1eb47d[_0x52fcd0(0x2ab)]?JSON[_0x52fcd0(0x2c4)](_0x1eb47d[_0x52fcd0(0x2ab)]):null,'publicKey':_0x1eb47d[_0x52fcd0(0x2c5)],'wallets':{'usdtPolygonWallet':_0x1eb47d[_0x52fcd0(0x200)],'usdtTrcWallet':_0x1eb47d[_0x52fcd0(0x2bb)],'usdtErcWallet':_0x1eb47d[_0x52fcd0(0x254)],'usdcPolygonWallet':_0x1eb47d[_0x52fcd0(0x21a)]},'status':_0x1eb47d['status'],'createdAt':_0x1eb47d[_0x52fcd0(0x233)]};}async[a36_0x4a3512(0x2df)](_0x1ef546){const _0x5858ca=a36_0x4a3512,_0x951016=await database_1[_0x5858ca(0x1ea)][_0x5858ca(0x238)]['update']({'where':{'id':_0x1ef546},'data':{'status':_0x5858ca(0x1cc)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x951016['id'],'fullName':_0x951016[_0x5858ca(0x26a)],'username':_0x951016[_0x5858ca(0x2eb)],'telegramId':_0x951016[_0x5858ca(0x2b5)],'merchantUrl':_0x951016[_0x5858ca(0x1d0)],'gateways':_0x951016['paymentGateways']?JSON['parse'](_0x951016[_0x5858ca(0x1bf)]):null,'gatewaySettings':_0x951016['gatewaySettings']?JSON[_0x5858ca(0x2c4)](_0x951016[_0x5858ca(0x2ab)]):null,'publicKey':_0x951016[_0x5858ca(0x2c5)],'wallets':{'usdtPolygonWallet':_0x951016['usdtPolygonWallet'],'usdtTrcWallet':_0x951016[_0x5858ca(0x2bb)],'usdtErcWallet':_0x951016[_0x5858ca(0x254)],'usdcPolygonWallet':_0x951016[_0x5858ca(0x21a)]},'status':_0x951016[_0x5858ca(0x1d3)],'createdAt':_0x951016['createdAt']};}async[a36_0x4a3512(0x26f)](_0x29eb0c){const _0x50d648=a36_0x4a3512,{page:_0x1c16ab,limit:_0x2bcdba,status:_0x248332}=_0x29eb0c,_0x3e26c3=(_0x1c16ab-0x1)*_0x2bcdba,_0x35c72b={};_0x248332&&(_0x35c72b['status']=_0x248332['toUpperCase']());const [_0x449e78,_0x22ed42]=await Promise['all']([database_1[_0x50d648(0x1ea)][_0x50d648(0x238)]['findMany']({'where':_0x35c72b,'skip':_0x3e26c3,'take':_0x2bcdba,'orderBy':{'createdAt':_0x50d648(0x279)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}}),database_1[_0x50d648(0x1ea)][_0x50d648(0x238)][_0x50d648(0x2e8)]({'where':_0x35c72b})]);return{'users':_0x449e78[_0x50d648(0x1e8)](_0x56fee1=>{const _0x10248b=_0x50d648,_0x50f646=_0x56fee1[_0x10248b(0x1bf)]?JSON[_0x10248b(0x2c4)](_0x56fee1['paymentGateways']):null,_0x2cb1b2=_0x50f646?_0x50f646[_0x10248b(0x1e8)](_0x50bdae=>this[_0x10248b(0x25c)](_0x50bdae)):null;return{'id':_0x56fee1['id'],'fullName':_0x56fee1[_0x10248b(0x26a)],'username':_0x56fee1['username'],'telegramId':_0x56fee1['telegram'],'merchantUrl':_0x56fee1[_0x10248b(0x1d0)],'gateways':_0x2cb1b2,'gatewaySettings':_0x56fee1[_0x10248b(0x2ab)]?JSON['parse'](_0x56fee1['gatewaySettings']):null,'publicKey':_0x56fee1['publicKey'],'wallets':{'usdtPolygonWallet':_0x56fee1['usdtPolygonWallet'],'usdtTrcWallet':_0x56fee1[_0x10248b(0x2bb)],'usdtErcWallet':_0x56fee1[_0x10248b(0x254)],'usdcPolygonWallet':_0x56fee1[_0x10248b(0x21a)]},'status':_0x56fee1[_0x10248b(0x1d3)],'createdAt':_0x56fee1[_0x10248b(0x233)]};}),'pagination':{'page':_0x1c16ab,'limit':_0x2bcdba,'total':_0x22ed42,'totalPages':Math[_0x50d648(0x2bf)](_0x22ed42/_0x2bcdba)}};}async[a36_0x4a3512(0x23a)](_0x501cf1){const _0x1fea1a=a36_0x4a3512,_0x2d7b57=await database_1['default'][_0x1fea1a(0x238)][_0x1fea1a(0x2fa)]({'where':{'id':_0x501cf1},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x2d7b57)return null;const _0x2b73a1=_0x2d7b57[_0x1fea1a(0x1bf)]?JSON[_0x1fea1a(0x2c4)](_0x2d7b57[_0x1fea1a(0x1bf)]):null,_0x5528ce=_0x2b73a1?_0x2b73a1['map'](_0x8d4615=>this[_0x1fea1a(0x25c)](_0x8d4615)):null;return _0x2b73a1&&_0x5528ce&&console['log'](_0x1fea1a(0x2b2),_0x2b73a1,'->',_0x5528ce),{'id':_0x2d7b57['id'],'fullName':_0x2d7b57[_0x1fea1a(0x26a)],'username':_0x2d7b57[_0x1fea1a(0x2eb)],'telegramId':_0x2d7b57[_0x1fea1a(0x2b5)],'merchantUrl':_0x2d7b57['shopUrl'],'gateways':_0x5528ce,'gatewaySettings':_0x2d7b57[_0x1fea1a(0x2ab)]?JSON['parse'](_0x2d7b57[_0x1fea1a(0x2ab)]):null,'publicKey':_0x2d7b57[_0x1fea1a(0x2c5)],'wallets':{'usdtPolygonWallet':_0x2d7b57[_0x1fea1a(0x200)],'usdtTrcWallet':_0x2d7b57[_0x1fea1a(0x2bb)],'usdtErcWallet':_0x2d7b57[_0x1fea1a(0x254)],'usdcPolygonWallet':_0x2d7b57['usdcPolygonWallet']},'status':_0x2d7b57[_0x1fea1a(0x1d3)],'createdAt':_0x2d7b57[_0x1fea1a(0x233)]};}async[a36_0x4a3512(0x275)](_0x1e11c0){const _0x32d94a=a36_0x4a3512,{fullName:_0x2016c2,username:_0x149e75,password:_0x5283f1,telegramId:_0x2c5fe5,merchantUrl:_0x2f44d1,gateways:_0x9629d1,gatewaySettings:_0x8132c9,wallets:_0x361933}=_0x1e11c0,_0x570426=await database_1[_0x32d94a(0x1ea)][_0x32d94a(0x238)][_0x32d94a(0x2fa)]({'where':{'username':_0x149e75}});if(_0x570426)throw new Error(_0x32d94a(0x1dc));if(_0x2c5fe5){const _0x72a0f6=await database_1['default']['shop'][_0x32d94a(0x2fa)]({'where':{'telegram':_0x2c5fe5}});if(_0x72a0f6)throw new Error(_0x32d94a(0x1eb));}const _0xe6d433=await bcryptjs_1['default']['hash'](_0x5283f1,0xc),_0xf157af=_0x32d94a(0x23b)+crypto_1['default'][_0x32d94a(0x22e)](0x20)['toString'](_0x32d94a(0x2f9)),_0x2be14a=_0x32d94a(0x282)+crypto_1[_0x32d94a(0x1ea)]['randomBytes'](0x20)[_0x32d94a(0x2a7)]('hex'),_0x1a5a0b=_0x9629d1?_0x9629d1['map'](_0x59ed61=>this[_0x32d94a(0x2f7)](_0x59ed61)):null;_0x9629d1&&_0x1a5a0b&&console[_0x32d94a(0x2aa)](_0x32d94a(0x2c2),_0x9629d1,'->',_0x1a5a0b);const _0x12ac32=await database_1['default']['shop']['create']({'data':{'name':_0x2016c2,'username':_0x149e75,'password':_0xe6d433,'telegram':_0x2c5fe5,'shopUrl':_0x2f44d1,'paymentGateways':_0x1a5a0b?JSON[_0x32d94a(0x27b)](_0x1a5a0b):null,'gatewaySettings':_0x8132c9?JSON[_0x32d94a(0x27b)](_0x8132c9):null,'usdtPolygonWallet':_0x361933?.['usdtPolygonWallet']||null,'usdtTrcWallet':_0x361933?.[_0x32d94a(0x2bb)]||null,'usdtErcWallet':_0x361933?.[_0x32d94a(0x254)]||null,'usdcPolygonWallet':_0x361933?.[_0x32d94a(0x21a)]||null,'publicKey':_0xf157af,'secretKey':_0x2be14a,'status':'ACTIVE'},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x12ac32['id'],'fullName':_0x12ac32[_0x32d94a(0x26a)],'username':_0x12ac32[_0x32d94a(0x2eb)],'telegramId':_0x12ac32[_0x32d94a(0x2b5)],'merchantUrl':_0x12ac32[_0x32d94a(0x1d0)],'gateways':_0x12ac32[_0x32d94a(0x1bf)]?JSON[_0x32d94a(0x2c4)](_0x12ac32[_0x32d94a(0x1bf)]):null,'gatewaySettings':_0x12ac32[_0x32d94a(0x2ab)]?JSON['parse'](_0x12ac32[_0x32d94a(0x2ab)]):null,'publicKey':_0x12ac32[_0x32d94a(0x2c5)],'wallets':{'usdtPolygonWallet':_0x12ac32[_0x32d94a(0x200)],'usdtTrcWallet':_0x12ac32['usdtTrcWallet'],'usdtErcWallet':_0x12ac32['usdtErcWallet'],'usdcPolygonWallet':_0x12ac32['usdcPolygonWallet']},'status':_0x12ac32[_0x32d94a(0x1d3)],'createdAt':_0x12ac32[_0x32d94a(0x233)]};}async['deleteUser'](_0x2213d0){const _0x47760b=a36_0x4a3512;await database_1[_0x47760b(0x1ea)][_0x47760b(0x238)][_0x47760b(0x269)]({'where':{'id':_0x2213d0}});}[a36_0x4a3512(0x1cf)](_0x2f2b57,_0x497d07,_0x1a99c3){const _0x475891=a36_0x4a3512,_0x4baa87=new Map(),_0x49f12d=new Date(_0x497d07);while(_0x49f12d<=_0x1a99c3){const _0x1f9e40=_0x49f12d['toISOString']()[_0x475891(0x283)]('T')[0x0];_0x4baa87[_0x475891(0x215)](_0x1f9e40,{'revenue':0x0,'count':0x0}),_0x49f12d[_0x475891(0x2ea)](_0x49f12d[_0x475891(0x1c8)]()+0x1);}for(const _0x291e64 of _0x2f2b57){const _0x31171c=_0x291e64[_0x475891(0x233)][_0x475891(0x2de)]()['split']('T')[0x0],_0x3467ff=_0x4baa87[_0x475891(0x2e1)](_0x31171c);_0x3467ff&&(_0x3467ff['count']+=0x1,_0x291e64[_0x475891(0x1d3)]===_0x475891(0x289)&&(_0x291e64[_0x475891(0x25f)]?_0x3467ff[_0x475891(0x1fe)]+=_0x291e64['amountUSDT']:console[_0x475891(0x2aa)](_0x475891(0x2bc)+_0x291e64['id']+'\x20missing\x20amountUSDT,\x20using\x20fallback\x20conversion')));}const _0x4a24d3=[],_0x285b1b=[];for(const [_0x183c0c,_0x768a5e]of _0x4baa87){_0x4a24d3['push']({'date':_0x183c0c,'amount':Math[_0x475891(0x2cd)](_0x768a5e[_0x475891(0x1fe)]*0x64)/0x64}),_0x285b1b['push']({'date':_0x183c0c,'count':_0x768a5e[_0x475891(0x2e8)]});}return{'dailyRevenue':_0x4a24d3,'dailyPayments':_0x285b1b};}}function a36_0x8040(){const _0x44ca6a=['admin','paidOutUSDT','💸\x20CHARGEBACK\x20penalty:\x20-','getGatewayInternalName','createPayout','hex','findUnique','MasterCard','📊\x20Merchants\x20awaiting\x20payout:\x20',']\x20Password\x20not\x20provided\x20or\x20empty,\x20skipping\x20password\x20update','🔄\x20Updating\x20customer\x20data\x20for\x20payment\x20','374724fDtaSz','\x20in\x20','💰\x20Found\x20','📊\x20Calculating\x20payout\x20statistics...','paymentGateways',']\x20Gateway\x20settings\x20JSON\x20string:','📊\x20Getting\x20merchant\x20statistics\x20with\x20filters:','gatewayEarnings','customerEmail','getMerchantsAwaitingPayout','\x20\x20\x20Full\x20amount:\x20','📅\x20Period:\x20','__importDefault','getDate','\x27\x20not\x20found.\x20Available\x20gateways:\x20','customerName','\x20\x20\x20Merchant\x20loses:\x20','ACTIVE','📋\x20Found\x20','whiteUrl','generateDailyStatistics','shopUrl','periodTo','Plisio','status','orderId','gateway','dateTo','failureMessage','_count','8283Yvjyyc','2856010uIxDrr','\x20\x20\x20🔍\x20Raw\x20balance\x20sum:\x20','Username\x20already\x20exists','📊\x20Using\x20saved\x20amountAfterGatewayCommissionUSDT:\x20','__esModule','\x20USDT','⚠️\x20Gateway\x20\x27','REFUND','pendingUrl','42fbLnVR','totalCommissionRate','💰\x20Creating\x20payout\x20for\x20shop\x20','🔄\x20Converted\x20gateway\x20ID\x20\x27','customerCountry','map','customerIp','default','Telegram\x20username\x20already\x20exists','averageCommissionRate','\x27\x20as\x20is\x20(not\x20found\x20in\x20mappings)','✅\x20Using\x20gateway\x20filter:\x20\x27','Error\x20parsing\x20gateway\x20settings\x20for\x20shop\x20','dailyPayments','updatePaymentStatus','length','random','\x20USDT\x20(',',\x20Commission:\x20','\x20\x20\x20✅\x20Actual\x20available\x20balance:\x20',']\x20User\x20updated,\x20gatewaySettings\x20from\x20DB:','\x27)\x20not\x20found\x20in\x20database,\x20returning\x20empty\x20result','getTime','\x20active\x20merchants\x20for\x20selection','asc','groupBy','amountAfterGatewayCommissionUSDT','revenue','✅\x20Customer\x20data\x20updated\x20for\x20payment\x20','usdtPolygonWallet','getPayoutStats','Rapyd','payment','getPaymentById','💳\x20Payout\x20wallet\x20for\x20','\x20payments)','📊\x20Calculating\x20commission\x20manually\x20for\x20payment\x20','commissionUSDT',',\x20userId:\x20','\x20USDT\x20(without\x20commission)','💰\x20[PAYOUT]\x20Merchant\x20','\x20\x20\x20Current\x20balance:\x20','Error\x20parsing\x20gateway\x20settings\x20for\x20payment\x20','not\x20specified','\x20status:\x20','gateways','\x20USDT\x20(theoretical\x20net)',':\x20commission\x20=\x20','date','1208mDdCGP','set','📊\x20Merchant\x20statistics\x20calculated:','includes','📊\x20Gateway\x20filter\x20applied:','\x20\x20\x20🌐\x20IP:\x20','usdcPolygonWallet','availableBalance','gatewayOrderId','%\x20commission)','\x20no\x20longer\x20PAID:','\x20\x20\x20💵\x20Available\x20balance:\x20','paymentsCount','💰\x20Payment\x20','_sum','\x20became\x20PAID:','merchantEarnings','findFirst','✅\x20Payout\x20created:\x20','266116ifCqVa','custom','successUrl','notes','💰\x20[PAYOUT]\x20Gateway\x20','\x20merchants','amount','randomBytes','turnover','\x20paid\x20payments\x20for\x20analysis','sort','../config/database','createdAt','payout','convertToUSDT','deletePayout','balance','shop','\x20\x20\x20�\x20Total\x20payments\x20turnover:\x20','getUserById','pk_','noda','Payment\x20not\x20found','\x20\x20\x20Balance:\x20','CHARGEBACK','klyme_de','📊\x20Final\x20WHERE\x20conditions:','$transaction','Error\x20processing\x20payment\x20','%\x20from\x20','📊\x20Getting\x20payments\x20with\x20filters:','\x20to\x20','commission','getMonth','\x20\x20\x20⏳\x20Awaiting\x20payout:\x20','\x20order','period','updateCustomerData','klyme_gb','\x20\x20\x20Payout\x20amount:\x20','cointopay','test_gateway','AdminService','polygon_usdc','crypto','usdtErcWallet','\x27\x20->\x20name\x20\x27','localeCompare','txid','trc20','\x20USDT\x20(after\x20','📊\x20Payout\x20statistics\x20calculated:','totalPaidOut','getGatewayDisplayName','\x20\x20\x20🏪\x20Gateway\x20earnings:\x20','not\x20set','amountUSDT','\x20\x20\x20�\x20Total\x20paid\x20out:\x20','merchantEarningsUSDT','4761oTjpQb','all','\x20\x20\x20📊\x20Commission\x20difference:\x20','\x27\x20to\x20name\x20\x27','amountAfterCommissionUSDT','values','some','delete','name','toLowerCase','updatedAt','rapyd','gte','getAllUsers','\x20USDT\x20(gross\x20revenue)','klyme_eu','pendingPayout','findMany','getGatewayNameById','createUser','reduce','plisio','failUrl','desc','network','stringify','turnoverUSDT','\x20\x20\x20Current\x20total\x20paid\x20out:\x20','bcryptjs','\x20USDT\x20for\x20payment\x20','KLYME\x20EU','year','sk_','split','shopId','\x27\x20(from\x20\x27','🔧\x20[','📊\x20Total\x20payments\x20(including\x20failed):\x20','\x20USDT\x20(actual\x20balances)','PAID','\x20\x20\x20�📊\x20Total\x20payments:\x20','dateFrom','COMPLETED','week','\x20\x20\x20⏳\x20Pending\x20payout:\x20','\x20USDT,\x20Requested:\x20','merchantUrl','aggregate','getPayoutById','forEach','defineProperty','currency','90d','password','\x20\x20\x20Transaction\x20hash:\x20','\x20\x20\x20✅\x20Total\x20available\x20for\x20payout:\x20','totalPayout','toUpperCase','\x20USDT\x20(same\x20as\x20awaiting)','error','KLYME\x20GB','getGatewayIdByName','🔄\x20Gateway\x20mapping:','\x27\x20->\x20ID\x20\x27','💰\x20Shop\x20','💱\x20Currency\x20filter\x20applied:\x20','toFixed','averageCheckUSDT','substr','toString','update','\x20for\x20shop\x20','log','gatewaySettings','getMerchantsSelection','🔐\x20[','PENDING','\x20USDT\x20(+','📊\x20[ADMIN]\x20Calculating\x20commission\x20manually\x20for\x20payment\x20','join','🔄\x20Gateway\x20mapping\x20(get):','\x20\x20\x20🔍\x20Calculated\x20after\x20commission:\x20','chargebackAmount','telegram','totalTurnover','hash','mastercard','1584513cpqXmU','📊\x20Getting\x20merchants\x20awaiting\x20payout\x20with\x20filters:','usdtTrcWallet','⚠️\x20Payment\x20','totalAmountAfterCommissionUSDT','\x20\x20\x20💰\x20Total\x20payout:\x20','ceil','getMerchantStatistics','Noda','🔄\x20Gateway\x20mapping\x20(create):','\x20USDT\x20from\x20balance','parse','publicKey','212JGLLzJ','trim','🎯\x20updateUser\x20called\x20with\x20ID:\x20','\x20PAID\x20payments','statusChangedBy','\x20balance\x20updated:\x20','./currencyService','round','insensitive','summary','\x20\x20\x20Subtracted\x20from\x20balance:\x20-','\x20\x20\x20Gateway:\x20','\x20\x20\x20💸\x20Total\x20payouts\x20(all\x20time):\x20','thisMonth','lte','2020-01-01','📊\x20[ADMIN]\x20Using\x20saved\x20amountAfterGatewayCommissionUSDT:\x20','entries',']\x20Updating\x20password\x20for\x20user\x20','45710qolMDQ','currencyService','getFullYear','Insufficient\x20balance.\x20Available:\x20','suspendUser','toISOString','activateUser','Open\x20Banking\x202','get','fullName','wallets','telegramId','\x20->\x20','\x20\x20\x20🌍\x20Country:\x20','📋\x20Getting\x20merchants\x20selection\x20list...','count','SUSPENDED','setDate','username','polygon','CoinToPay','totalAmountUSDT','periodFrom','customerUa','getAllPayments','paidAt','awaitingPayout'];a36_0x8040=function(){return _0x44ca6a;};return a36_0x8040();}exports[a36_0x4a3512(0x251)]=AdminService;