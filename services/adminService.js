'use strict';const a36_0x7b1077=a36_0x18ab;(function(_0x90d2ed,_0x52241d){const _0x141805=a36_0x18ab,_0x12cb11=_0x90d2ed();while(!![]){try{const _0xeb8be2=-parseInt(_0x141805(0xa8))/0x1*(-parseInt(_0x141805(0x13c))/0x2)+parseInt(_0x141805(0x140))/0x3+-parseInt(_0x141805(0x1a4))/0x4+-parseInt(_0x141805(0x14f))/0x5+-parseInt(_0x141805(0x113))/0x6*(parseInt(_0x141805(0x199))/0x7)+-parseInt(_0x141805(0xc5))/0x8+-parseInt(_0x141805(0x138))/0x9*(-parseInt(_0x141805(0xb8))/0xa);if(_0xeb8be2===_0x52241d)break;else _0x12cb11['push'](_0x12cb11['shift']());}catch(_0x2288e7){_0x12cb11['push'](_0x12cb11['shift']());}}}(a36_0x3eb6,0x1a81c));var __importDefault=this&&this[a36_0x7b1077(0xd6)]||function(_0x221981){return _0x221981&&_0x221981['__esModule']?_0x221981:{'default':_0x221981};};function a36_0x3eb6(){const _0x586c1f=['\x20\x20\x20Subtracted\x20from\x20balance:\x20-','txid','\x20to\x20','year','updatePaymentStatus','279420QJMaDN','shop',',\x20Commission:\x20','username','customerIp','gateway','randomBytes','klyme_gb','\x20USDT\x20(-','telegram','totalCommissionRate','🔄\x20Admin\x20updating\x20payment\x20','\x20\x20\x20💰\x20Total\x20payments\x20turnover:\x20','206552xJRjnQ','Username\x20already\x20exists','averageCommissionRate','totalAmountAfterCommissionUSDT','hex','Plisio','shopId','\x20USDT\x20(','getMerchantsAwaitingPayout','\x20balance\x20updated:','KLYME\x20EU','updatedAt','\x20\x20\x20📅\x20Total\x20payouts\x20(this\x20month):\x20','🔐\x20[','\x20\x20\x20Added\x20to\x20balance:\x20+','statusChangedBy','AdminService','__importDefault','findFirst','network','\x20USDT\x20(gross\x20revenue)','month','turnoverUSDT','getSystemStatistics','Telegram\x20username\x20already\x20exists','\x20\x20\x20✅\x20Total\x20available\x20for\x20payout:\x20','COMPLETED','create','polygon','Noda','periodTo','💱\x20Currency\x20filter\x20applied:\x20','error','\x20USDT,\x20Requested:\x20','\x20USDT\x20from\x20balance','$transaction',']\x20Updating\x20password\x20for\x20user\x20','\x20in\x20','\x20payments)','paymentsCount','cointopay2','📊\x20Getting\x20merchant\x20statistics\x20with\x20filters:','getAllPayouts','trc20','📋\x20Found\x20','plisio','push','dailyRevenue','\x20\x20\x20Merchant\x20loses:\x20','amountAfterCommissionUSDT','📅\x20Period\x20\x27all\x27:\x20Using\x20start\x20date\x20from\x20first\x20payment:\x20','notes','\x27\x20(from\x20\x27','getMerchantStatistics','getTime','\x20order','externalPaymentUrl','createdAt','\x20\x20\x20💳\x20Total\x20payments:\x20','admin','split','_sum','toUpperCase','paymentGateways','convertToUSDT','\x20\x20\x20Gateway:\x20','updateUser','\x20\x20\x20Current\x20total\x20paid\x20out:\x20','\x20->\x20','📊\x20Sorting\x20payments\x20by\x20','\x20USDT\x20(after\x20','polygon_usdc','\x27\x20->\x20ID\x20\x27','\x20USDT\x20(actual\x20balances)','Payment\x20not\x20found','💸\x20CHARGEBACK\x20penalty:\x20-',']\x20Password\x20not\x20provided\x20or\x20empty,\x20skipping\x20password\x20update','commissionUSDT','661098CdYVlD','usdtPolygonWallet','parse','PAID','currency','getPayoutStats','not\x20set','totalTurnover','payout','🎯\x20[','getPaymentById','\x20active\x20merchants\x20for\x20selection','\x20PAID\x20payments','includes','\x20USDT\x20(with\x20commission\x20deducted)','cointopay','deleteUser','\x20balance\x20updated:\x20','30d','../config/database','adminNotes','gateways','🔧\x20[','currencyService','PENDING','turnover','hash','erc20','SUSPENDED','\x20\x20\x20👤\x20Merchant\x20earnings:\x20','klyme_eu','CoinToPay','rapyd','\x27\x20not\x20found.\x20Available\x20gateways:\x20','🔄\x20Gateway\x20mapping\x20(create):','paidAt','getMerchantsSelection','18cSfrEG','balance','publicKey','custom','363088fLeEaA','all','log','lte','587361pdmXfj','thisMonth','📊\x20Getting\x20payments\x20with\x20filters:','revenue','\x20for\x20shop\x20','ceil','\x20\x20\x20�📊\x20Total\x20payments:\x20','gatewayEarnings','failUrl','usdcPolygonWallet','Error\x20parsing\x20gateway\x20settings\x20for\x20payment\x20','📊\x20Available\x20gateways\x20in\x20database:','💰\x20[PAYOUT]\x20Merchant\x20','payment','Open\x20Banking\x202','327030tncNXa',',\x20userId:\x20','NONEXISTENT_GATEWAY_FILTER','customerUa','getGatewayInternalName','fullName','\x27\x20->\x20name\x20\x27','usdtTrcWallet','🔄\x20Gateway\x20mapping:','💰\x20Creating\x20payout\x20for\x20shop\x20','🔄\x20REFUND:\x20Payment\x20amount\x20already\x20deducted\x20from\x20balance','Shop\x20not\x20found','dateTo','whiteUrl','\x20USDT\x20for\x20payment\x20','findUnique','\x20\x20\x20�\x20Total\x20payments\x20turnover:\x20','\x20\x20\x20Merchant\x20gets:\x20','MasterCard','gte','toLowerCase','📅\x20Period:\x20','availableBalance','telegramId','mastercard','_count','📊\x20Final\x20WHERE\x20conditions:','status','awaitingPayout','\x20missing\x20amountUSDT,\x20using\x20fallback\x20conversion','update','\x20\x20\x20📅\x20This\x20month:\x20','🔄\x20Gateway\x20mapping\x20(get):','\x20USDT\x20(after\x20payouts)','0000','customerCountry','not\x20specified','totalAmountUSDT','week','getAllUsers','averageCheckUSDT','customerName','Error\x20processing\x20payment\x20','KLYME\x20GB','successUrl','💸\x20CHARGEBACK:\x20Merchant\x20amount\x20already\x20deducted\x20from\x20balance','\x20\x20\x20Payout\x20amount:\x20','%\x20commission)','chargebackAmount','📊\x20[ADMIN]\x20Calculating\x20commission\x20manually\x20for\x20payment\x20','getGatewayIdByName','\x20\x20\x20🏪\x20Gateway\x20earnings:\x20','\x20\x20\x20⏳\x20Awaiting\x20payout:\x20','amountAfterGatewayCommissionUSDT','\x20\x20\x20💰\x20Total\x20payout:\x20','🔄\x20Updating\x20customer\x20data\x20for\x20payment\x20','reduce','📊\x20Gateway\x20filter\x20applied:','test_gateway','merchantEarnings','shopUrl','getFullYear','CHARGEBACK','insensitive','klyme_de','amountUSDT','📊\x20Merchant\x20statistics\x20calculated:','pk_','sort','values','customerEmail','round','\x20\x20\x20🌍\x20Country:\x20','📊\x20Calculating\x20payout\x20statistics...','7IivozM','getGatewayNameById','./currencyService','📊\x20Getting\x20merchants\x20awaiting\x20payout\x20with\x20filters:','map','Insufficient\x20balance.\x20Available:\x20','\x20USDT','failureMessage','💰\x20Payment\x20','\x20USDT\x20(+','\x27)\x20not\x20found\x20in\x20database,\x20returning\x20empty\x20result','492940stzKzS','✅\x20Payout\x20created:\x20','toISOString','random','Error\x20parsing\x20gateway\x20settings\x20for\x20shop\x20','💰\x20Shop\x20','\x20\x20\x20�\x20Total\x20paid\x20out:\x20','sk_','gatewayOrderId','Rapyd','📊\x20Calculating\x20commission\x20manually\x20for\x20payment\x20','bcryptjs','aggregate','period','totalPaidOut','\x20USDT\x20(total\x20paid\x20to\x20merchants)','📊\x20Payout\x20statistics\x20calculated:','ACTIVE','getDate','\x20\x20\x20⏳\x20Pending\x20payout:\x20','stringify','getGatewayDisplayName','merchantEarningsUSDT','count','createUser','⚠️\x20Requested\x20gateway\x20\x27','__esModule','usdtErcWallet','commission','💰\x20Found\x20','orderId','summary','\x20\x20\x20💵\x20Available\x20balance:\x20','set','password','\x20\x20\x20🖥️\x20User\x20Agent:\x20','\x20USDT\x20(theoretical\x20net)','deletePayout','getAllPayments','activateUser','findMany','toFixed','gatewaySettings','KLYME\x20DE','\x20\x20\x20💰\x20Total\x20turnover:\x20','default','2020-01-01','📊\x20Merchants\x20awaiting\x20payout:\x20','%\x20from\x20','crypto',':\x20commission\x20=\x20',']\x20User\x20updated,\x20gatewaySettings\x20from\x20DB:','toString','⚠️\x20Gateway\x20\x27','\x20\x20\x20📊\x20Commission\x20difference:\x20','totalPayments','amount','📊\x20[ADMIN]\x20Using\x20saved\x20amountAfterGatewayCommissionUSDT:\x20','\x20\x20\x20✅\x20Actual\x20available\x20balance:\x20','✅\x20Customer\x20data\x20updated\x20for\x20payment\x20','\x20USDT\x20(without\x20commission)','🎯\x20updateUser\x20called\x20with\x20ID:\x20','forEach','\x20USDT\x20(same\x20as\x20awaiting)','90d','name','getMonth','totalPayout','statusChangedAt','dateFrom','length','periodFrom','delete','\x20\x20\x20🔍\x20Calculated\x20after\x20commission:\x20','desc','1NXkPQx','\x20status:\x20','some','entries','asc','📋\x20Getting\x20merchants\x20selection\x20list...','wallets','substr','\x20\x20\x20Full\x20amount:\x20','✅\x20Using\x20gateway\x20filter:\x20\x27','\x20paid\x20payments\x20for\x20analysis'];a36_0x3eb6=function(){return _0x586c1f;};return a36_0x3eb6();}Object['defineProperty'](exports,a36_0x7b1077(0x1be),{'value':!![]}),exports[a36_0x7b1077(0xd5)]=void 0x0;const database_1=__importDefault(require(a36_0x7b1077(0x126))),bcryptjs_1=__importDefault(require(a36_0x7b1077(0x1af))),crypto_1=__importDefault(require(a36_0x7b1077(0x8e))),currencyService_1=require(a36_0x7b1077(0x19b)),gateway_1=require('../types/gateway');class AdminService{async[a36_0x7b1077(0x118)](){const _0x2e8758=a36_0x7b1077;console[_0x2e8758(0x13e)](_0x2e8758(0x198));const _0x2f863f=await database_1['default'][_0x2e8758(0xb9)][_0x2e8758(0x1b0)]({'_sum':{'balance':!![],'totalPaidOut':!![]},'where':{'status':_0x2e8758(0x1b5)}}),_0x65e887=await this[_0x2e8758(0xcd)]({'page':0x1,'limit':0x3e8}),_0x20e463=await database_1[_0x2e8758(0x8a)]['payment'][_0x2e8758(0x1bb)]({'where':{'status':_0x2e8758(0x116),'gateway':{'not':'test_gateway'}}}),_0x13c4b3=new Date(),_0x57d02f=new Date(_0x13c4b3[_0x2e8758(0x18c)](),_0x13c4b3['getMonth'](),0x1),_0xd9f5c=new Date(_0x13c4b3[_0x2e8758(0x18c)](),_0x13c4b3['getMonth']()+0x1,0x0,0x17,0x3b,0x3b,0x3e7),_0x5a792a=await database_1[_0x2e8758(0x8a)][_0x2e8758(0x11b)][_0x2e8758(0x1b0)]({'_sum':{'amount':!![]},'where':{'createdAt':{'gte':_0x57d02f,'lte':_0xd9f5c},'status':_0x2e8758(0xdf)}}),_0x157868=_0x2f863f['_sum'][_0x2e8758(0x1b2)]||0x0,_0x18b658=_0x65e887[_0x2e8758(0x7c)][_0x2e8758(0xc8)],_0x3c6c35=_0x5a792a[_0x2e8758(0x102)][_0x2e8758(0x95)]||0x0,_0x492f44={'totalPayout':Math[_0x2e8758(0x196)](_0x157868*0x64)/0x64,'awaitingPayout':Math[_0x2e8758(0x196)](_0x18b658*0x64)/0x64,'thisMonth':Math[_0x2e8758(0x196)](_0x3c6c35*0x64)/0x64,'availableBalance':Math[_0x2e8758(0x196)](_0x18b658*0x64)/0x64,'totalPayments':_0x20e463};return console[_0x2e8758(0x13e)](_0x2e8758(0x1b4)),console[_0x2e8758(0x13e)](_0x2e8758(0x185)+_0x492f44[_0x2e8758(0xa0)]+_0x2e8758(0x1b3)),console['log'](_0x2e8758(0x183)+_0x492f44[_0x2e8758(0x16b)]+_0x2e8758(0x121)),console[_0x2e8758(0x13e)](_0x2e8758(0x7d)+_0x492f44[_0x2e8758(0x165)]+_0x2e8758(0x9c)),console['log'](_0x2e8758(0x16e)+_0x492f44['thisMonth']+_0x2e8758(0x19f)),console['log'](_0x2e8758(0xff)+_0x492f44[_0x2e8758(0x94)]+_0x2e8758(0x11f)),console[_0x2e8758(0x13e)]('\x20\x20\x20🔍\x20Raw\x20balance\x20sum:\x20'+(_0x2f863f['_sum'][_0x2e8758(0x139)]||0x0)[_0x2e8758(0x86)](0x2)+_0x2e8758(0x99)),console[_0x2e8758(0x13e)](_0x2e8758(0x93)+((_0x2f863f['_sum'][_0x2e8758(0x139)]||0x0)-_0x18b658)['toFixed'](0x2)+'\x20USDT'),_0x492f44;}async['updateCustomerData'](_0x31b3e4,_0x39bd36){const _0x3b7b49=a36_0x7b1077;console[_0x3b7b49(0x13e)](_0x3b7b49(0x186)+_0x31b3e4+':',_0x39bd36);const _0x1e9969=await database_1['default'][_0x3b7b49(0x14d)][_0x3b7b49(0x15e)]({'where':{'id':_0x31b3e4},'select':{'id':!![],'customerEmail':!![],'customerName':!![],'customerCountry':!![],'customerIp':!![],'customerUa':!![]}});if(!_0x1e9969)throw new Error(_0x3b7b49(0x10f));const _0x2523be={};_0x39bd36[_0x3b7b49(0x172)]!==undefined&&(_0x2523be[_0x3b7b49(0x172)]=_0x39bd36[_0x3b7b49(0x172)]||null);_0x39bd36[_0x3b7b49(0xbc)]!==undefined&&(_0x2523be[_0x3b7b49(0xbc)]=_0x39bd36[_0x3b7b49(0xbc)]||null);_0x39bd36['customerUa']!==undefined&&(_0x2523be[_0x3b7b49(0x152)]=_0x39bd36[_0x3b7b49(0x152)]||null);const _0x27205b=await database_1[_0x3b7b49(0x8a)]['payment'][_0x3b7b49(0x16d)]({'where':{'id':_0x31b3e4},'data':{..._0x2523be,'updatedAt':new Date()},'select':{'id':!![],'customerEmail':!![],'customerName':!![],'customerCountry':!![],'customerIp':!![],'customerUa':!![],'updatedAt':!![]}});return console[_0x3b7b49(0x13e)](_0x3b7b49(0x98)+_0x31b3e4),console['log'](_0x3b7b49(0x197)+_0x1e9969['customerCountry']+'\x20->\x20'+_0x27205b[_0x3b7b49(0x172)]),console[_0x3b7b49(0x13e)]('\x20\x20\x20🌐\x20IP:\x20'+_0x1e9969[_0x3b7b49(0xbc)]+_0x3b7b49(0x109)+_0x27205b[_0x3b7b49(0xbc)]),console[_0x3b7b49(0x13e)](_0x3b7b49(0x80)+(_0x1e9969[_0x3b7b49(0x152)]?_0x3b7b49(0x7e):_0x3b7b49(0x119))+_0x3b7b49(0x109)+(_0x27205b['customerUa']?_0x3b7b49(0x7e):_0x3b7b49(0x119))),_0x27205b;}async[a36_0x7b1077(0xdc)](_0x4dd32d){const _0x325c19=a36_0x7b1077,_0x382a3e=new Date();let _0x43d772;switch(_0x4dd32d){case'7d':_0x43d772=new Date(_0x382a3e[_0x325c19(0xfb)]()-0x7*0x18*0x3c*0x3c*0x3e8);break;case _0x325c19(0x125):_0x43d772=new Date(_0x382a3e[_0x325c19(0xfb)]()-0x1e*0x18*0x3c*0x3c*0x3e8);break;case _0x325c19(0x9d):_0x43d772=new Date(_0x382a3e['getTime']()-0x5a*0x18*0x3c*0x3c*0x3e8);break;case _0x325c19(0x13d):const _0x3e013e=await database_1[_0x325c19(0x8a)]['payment'][_0x325c19(0xd7)]({'where':{'gateway':{'not':_0x325c19(0x189)}},'orderBy':{'createdAt':_0x325c19(0xac)},'select':{'createdAt':!![]}});_0x43d772=_0x3e013e?_0x3e013e[_0x325c19(0xfe)]:new Date(_0x325c19(0x8b)),console[_0x325c19(0x13e)](_0x325c19(0xf7)+_0x43d772['toISOString']());break;default:_0x43d772=new Date(_0x382a3e['getTime']()-0x1e*0x18*0x3c*0x3c*0x3e8);}const [_0x137c48,_0x563d32,_0x8f8a74,_0x521827,_0x2bf954,_0x190c76,_0x9f548a]=await Promise[_0x325c19(0x13d)]([database_1['default'][_0x325c19(0xb9)][_0x325c19(0x1bb)](),database_1[_0x325c19(0x8a)][_0x325c19(0xb9)][_0x325c19(0x1bb)]({'where':{'status':_0x325c19(0x1b5)}}),database_1[_0x325c19(0x8a)][_0x325c19(0x14d)]['count']({'where':{'createdAt':{'gte':_0x43d772},'gateway':{'not':'test_gateway'}}}),database_1[_0x325c19(0x8a)][_0x325c19(0x14d)][_0x325c19(0x1bb)]({'where':{'status':_0x325c19(0x116),'createdAt':{'gte':_0x43d772},'gateway':{'not':_0x325c19(0x189)}}}),database_1[_0x325c19(0x8a)][_0x325c19(0x14d)][_0x325c19(0x85)]({'where':{'status':_0x325c19(0x116),'createdAt':{'gte':_0x43d772},'gateway':{'not':_0x325c19(0x189)}},'select':{'amount':!![],'currency':!![]}}),database_1[_0x325c19(0x8a)][_0x325c19(0x14d)][_0x325c19(0x85)]({'where':{'gateway':{'not':_0x325c19(0x189)}},'take':0xa,'orderBy':{'createdAt':_0x325c19(0xa7)},'include':{'shop':{'select':{'name':!![],'username':!![]}}}}),database_1[_0x325c19(0x8a)][_0x325c19(0x14d)][_0x325c19(0x85)]({'where':{'createdAt':{'gte':_0x43d772},'gateway':{'not':_0x325c19(0x189)}},'select':{'amount':!![],'currency':!![],'status':!![],'amountUSDT':!![],'createdAt':!![]}})]);let _0x497f92=0x0;for(const _0x12562f of _0x2bf954){const _0xee1c2=await currencyService_1[_0x325c19(0x12a)]['convertToUSDT'](_0x12562f[_0x325c19(0x95)],_0x12562f[_0x325c19(0x117)]);_0x497f92+=_0xee1c2;}const _0x20b3b2=this['generateDailyStatistics'](_0x9f548a,_0x43d772,_0x382a3e),_0x306719=_0x8f8a74>0x0?_0x521827/_0x8f8a74*0x64:0x0;return{'totalShops':_0x137c48,'activeShops':_0x563d32,'totalPayments':_0x8f8a74,'successfulPayments':_0x521827,'totalRevenue':Math['round'](_0x497f92*0x64)/0x64,'conversionRate':Math[_0x325c19(0x196)](_0x306719*0x64)/0x64,'dailyRevenue':_0x20b3b2[_0x325c19(0xf4)],'dailyPayments':_0x20b3b2['dailyPayments'],'recentPayments':_0x190c76[_0x325c19(0x19d)](_0x44c93d=>({'id':_0x44c93d['id'],'amount':_0x44c93d[_0x325c19(0x95)],'currency':_0x44c93d[_0x325c19(0x117)],'status':_0x44c93d['status'],'gateway':_0x44c93d[_0x325c19(0xbd)],'shop':_0x44c93d[_0x325c19(0xb9)],'createdAt':_0x44c93d['createdAt']}))};}async[a36_0x7b1077(0xfa)](_0x5ca38c){const _0x3a2d2b=a36_0x7b1077;console[_0x3a2d2b(0x13e)](_0x3a2d2b(0xee),_0x5ca38c);let _0xb392c9,_0x6d8c1=new Date();if(_0x5ca38c[_0x3a2d2b(0x1b1)]===_0x3a2d2b(0x13b)&&_0x5ca38c[_0x3a2d2b(0xa2)]&&_0x5ca38c[_0x3a2d2b(0x15b)])_0xb392c9=new Date(_0x5ca38c[_0x3a2d2b(0xa2)]),_0x6d8c1=new Date(_0x5ca38c['dateTo']);else{const _0x55ae05=new Date();switch(_0x5ca38c['period']){case _0x3a2d2b(0x175):_0xb392c9=new Date(_0x55ae05[_0x3a2d2b(0xfb)]()-0x7*0x18*0x3c*0x3c*0x3e8);break;case _0x3a2d2b(0xda):_0xb392c9=new Date(_0x55ae05[_0x3a2d2b(0xfb)]()-0x1e*0x18*0x3c*0x3c*0x3e8);break;case _0x3a2d2b(0xb6):_0xb392c9=new Date(_0x55ae05[_0x3a2d2b(0xfb)]()-0x16d*0x18*0x3c*0x3c*0x3e8);break;case'all':default:_0xb392c9=new Date(_0x3a2d2b(0x8b));break;}}console[_0x3a2d2b(0x13e)](_0x3a2d2b(0x164)+_0xb392c9[_0x3a2d2b(0x1a6)]()+_0x3a2d2b(0xb5)+_0x6d8c1[_0x3a2d2b(0x1a6)]());const _0x3f314c={'status':_0x3a2d2b(0x116),'gateway':{'not':_0x3a2d2b(0x189)},'paidAt':{'gte':_0xb392c9,'lte':_0x6d8c1}};_0x5ca38c[_0x3a2d2b(0xcb)]&&(_0x3f314c['shopId']=_0x5ca38c[_0x3a2d2b(0xcb)]);const _0x1e71c2=await database_1['default'][_0x3a2d2b(0x14d)][_0x3a2d2b(0x85)]({'where':_0x3f314c,'include':{'shop':{'select':{'id':!![],'name':!![],'username':!![],'gatewaySettings':!![]}}}});console[_0x3a2d2b(0x13e)](_0x3a2d2b(0x7a)+_0x1e71c2[_0x3a2d2b(0xa3)]+_0x3a2d2b(0xb2));const _0x43f295={'gateway':{'not':'test_gateway'},'createdAt':{'gte':_0xb392c9,'lte':_0x6d8c1}};_0x5ca38c[_0x3a2d2b(0xcb)]&&(_0x43f295[_0x3a2d2b(0xcb)]=_0x5ca38c['shopId']);const _0x4e7aea=await database_1['default'][_0x3a2d2b(0x14d)][_0x3a2d2b(0x1bb)]({'where':_0x43f295});console[_0x3a2d2b(0x13e)]('📊\x20Total\x20payments\x20(including\x20failed):\x20'+_0x4e7aea+',\x20successful:\x20'+_0x1e71c2[_0x3a2d2b(0xa3)]);let _0x16bc96=0x0,_0x38b8fb=0x0,_0x32a2b6=0x0;const _0x383a5c={},_0x4cb817={},_0x2f617d={};for(const _0x9654aa of _0x1e71c2){try{const _0x22afed=await currencyService_1[_0x3a2d2b(0x12a)][_0x3a2d2b(0x105)](_0x9654aa['amount'],_0x9654aa[_0x3a2d2b(0x117)]);let _0x397dc={};if(_0x9654aa[_0x3a2d2b(0xb9)][_0x3a2d2b(0x87)])try{_0x397dc=JSON['parse'](_0x9654aa['shop'][_0x3a2d2b(0x87)]);}catch(_0xb294e1){console[_0x3a2d2b(0xe5)](_0x3a2d2b(0x1a8)+_0x9654aa['shopId']+':',_0xb294e1);}let _0x5a9acc={},_0x431ae7=0xa;for(const [_0x5c2a7c,_0x16646a]of Object[_0x3a2d2b(0xab)](_0x397dc)){if(_0x5c2a7c[_0x3a2d2b(0x163)]()===_0x9654aa[_0x3a2d2b(0xbd)][_0x3a2d2b(0x163)]()){_0x5a9acc=_0x16646a,_0x431ae7=_0x16646a[_0x3a2d2b(0x79)]||0xa;break;}}let _0x2b722c,_0xdaf4af;_0x9654aa[_0x3a2d2b(0x184)]!==null&&_0x9654aa[_0x3a2d2b(0x184)]!==undefined?(_0x2b722c=_0x9654aa[_0x3a2d2b(0x184)],_0xdaf4af=_0x22afed-_0x2b722c,console[_0x3a2d2b(0x13e)]('📊\x20Using\x20saved\x20amountAfterGatewayCommissionUSDT:\x20'+_0x2b722c[_0x3a2d2b(0x86)](0x6)+_0x3a2d2b(0x15d)+_0x9654aa['id'])):(_0xdaf4af=_0x22afed*(_0x431ae7/0x64),_0x2b722c=_0x22afed-_0xdaf4af,console[_0x3a2d2b(0x13e)](_0x3a2d2b(0x1ae)+_0x9654aa['id']+':\x20'+_0x431ae7+_0x3a2d2b(0x8d)+_0x22afed[_0x3a2d2b(0x86)](0x6)+_0x3a2d2b(0x19f)));_0x16bc96+=_0x22afed,_0x38b8fb+=_0x2b722c,_0x32a2b6+=_0xdaf4af;!_0x383a5c[_0x9654aa['gateway']]&&(_0x383a5c[_0x9654aa['gateway']]={'gateway':_0x9654aa[_0x3a2d2b(0xbd)],'gatewayDisplayName':this['getGatewayDisplayName'](_0x9654aa[_0x3a2d2b(0xbd)]),'paymentsCount':0x0,'turnoverUSDT':0x0,'commissionUSDT':0x0,'merchantEarningsUSDT':0x0,'totalCommissionRate':0x0});_0x383a5c[_0x9654aa['gateway']]['paymentsCount']++,_0x383a5c[_0x9654aa[_0x3a2d2b(0xbd)]]['turnoverUSDT']+=_0x22afed,_0x383a5c[_0x9654aa['gateway']][_0x3a2d2b(0x112)]+=_0xdaf4af,_0x383a5c[_0x9654aa[_0x3a2d2b(0xbd)]]['merchantEarningsUSDT']+=_0x2b722c,_0x383a5c[_0x9654aa[_0x3a2d2b(0xbd)]][_0x3a2d2b(0xc2)]+=_0x431ae7;!_0x5ca38c[_0x3a2d2b(0xcb)]&&(!_0x4cb817[_0x9654aa[_0x3a2d2b(0xcb)]]&&(_0x4cb817[_0x9654aa['shopId']]={'shopId':_0x9654aa[_0x3a2d2b(0xcb)],'shopName':_0x9654aa['shop']['name'],'shopUsername':_0x9654aa['shop'][_0x3a2d2b(0xbb)],'paymentsCount':0x0,'turnoverUSDT':0x0,'commissionUSDT':0x0,'merchantEarningsUSDT':0x0,'paidOutUSDT':0x0,'averageCheckUSDT':0x0}),_0x4cb817[_0x9654aa[_0x3a2d2b(0xcb)]][_0x3a2d2b(0xec)]++,_0x4cb817[_0x9654aa['shopId']][_0x3a2d2b(0xdb)]+=_0x22afed,_0x4cb817[_0x9654aa['shopId']][_0x3a2d2b(0x112)]+=_0xdaf4af,_0x4cb817[_0x9654aa[_0x3a2d2b(0xcb)]][_0x3a2d2b(0x1ba)]+=_0x2b722c);const _0x37fa04=_0x9654aa['paidAt'][_0x3a2d2b(0x1a6)]()[_0x3a2d2b(0x101)]('T')[0x0];!_0x2f617d[_0x37fa04]&&(_0x2f617d[_0x37fa04]={'date':_0x37fa04,'turnover':0x0,'merchantEarnings':0x0,'gatewayEarnings':0x0,'paymentsCount':0x0}),_0x2f617d[_0x37fa04]['turnover']+=_0x22afed,_0x2f617d[_0x37fa04][_0x3a2d2b(0x18a)]+=_0x2b722c,_0x2f617d[_0x37fa04]['gatewayEarnings']+=_0xdaf4af,_0x2f617d[_0x37fa04][_0x3a2d2b(0xec)]++;}catch(_0x48061d){console['error'](_0x3a2d2b(0x179)+_0x9654aa['id']+':',_0x48061d);}}Object['values'](_0x383a5c)['forEach'](_0x3e3c45=>{const _0x1eaed7=_0x3a2d2b;_0x3e3c45[_0x1eaed7(0xc7)]=_0x3e3c45[_0x1eaed7(0xec)]>0x0?_0x3e3c45[_0x1eaed7(0xc2)]/_0x3e3c45[_0x1eaed7(0xec)]:0x0,delete _0x3e3c45[_0x1eaed7(0xc2)];}),Object[_0x3a2d2b(0x194)](_0x4cb817)[_0x3a2d2b(0x9b)](_0x7a35d=>{const _0xe5aae4=_0x3a2d2b;_0x7a35d[_0xe5aae4(0x177)]=_0x7a35d[_0xe5aae4(0xec)]>0x0?_0x7a35d[_0xe5aae4(0xdb)]/_0x7a35d[_0xe5aae4(0xec)]:0x0;});let _0x4cca9b=0x0,_0x17a954=0x0;if(_0x5ca38c[_0x3a2d2b(0xcb)]){const _0x137990=await database_1[_0x3a2d2b(0x8a)][_0x3a2d2b(0x11b)][_0x3a2d2b(0x85)]({'where':{'shopId':_0x5ca38c[_0x3a2d2b(0xcb)],'status':'COMPLETED','createdAt':{'gte':_0xb392c9,'lte':_0x6d8c1}},'select':{'amount':!![]}});_0x4cca9b=_0x137990[_0x3a2d2b(0x187)]((_0x105656,_0x3c6f11)=>_0x105656+_0x3c6f11[_0x3a2d2b(0x95)],0x0);const _0x3effed=await database_1[_0x3a2d2b(0x8a)][_0x3a2d2b(0x11b)][_0x3a2d2b(0x85)]({'where':{'shopId':_0x5ca38c[_0x3a2d2b(0xcb)],'status':_0x3a2d2b(0x12b),'createdAt':{'gte':_0xb392c9,'lte':_0x6d8c1}},'select':{'amount':!![]}});_0x17a954=_0x3effed[_0x3a2d2b(0x187)]((_0x338c3a,_0x13bc2c)=>_0x338c3a+_0x13bc2c[_0x3a2d2b(0x95)],0x0);}const _0x20d680=_0x4e7aea,_0x1133cd=_0x1e71c2[_0x3a2d2b(0xa3)],_0x250e2a=_0x1133cd>0x0?_0x16bc96/_0x1133cd:0x0,_0x15e175=_0x20d680>0x0?Math['round'](_0x1133cd/_0x20d680*0x2710)/0x64:0x0,_0x3e777f=Math[_0x3a2d2b(0x145)]((_0x6d8c1[_0x3a2d2b(0xfb)]()-_0xb392c9[_0x3a2d2b(0xfb)]())/(0x3e8*0x3c*0x3c*0x18)),_0x34355b={'totalTurnover':Math[_0x3a2d2b(0x196)](_0x16bc96*0x64)/0x64,'merchantEarnings':Math[_0x3a2d2b(0x196)](_0x38b8fb*0x64)/0x64,'gatewayEarnings':Math['round'](_0x32a2b6*0x64)/0x64,'totalPaidOut':Math['round'](_0x4cca9b*0x64)/0x64,'pendingPayout':Math['round'](_0x17a954*0x64)/0x64,'averageCheck':Math[_0x3a2d2b(0x196)](_0x250e2a*0x64)/0x64,'totalPayments':_0x20d680,'successfulPayments':_0x1133cd,'conversionRate':_0x15e175,'gatewayBreakdown':Object['values'](_0x383a5c)['map'](_0x40a10f=>({..._0x40a10f,'turnoverUSDT':Math[_0x3a2d2b(0x196)](_0x40a10f[_0x3a2d2b(0xdb)]*0x64)/0x64,'commissionUSDT':Math[_0x3a2d2b(0x196)](_0x40a10f['commissionUSDT']*0x64)/0x64,'merchantEarningsUSDT':Math['round'](_0x40a10f[_0x3a2d2b(0x1ba)]*0x64)/0x64,'averageCommissionRate':Math[_0x3a2d2b(0x196)](_0x40a10f['averageCommissionRate']*0x64)/0x64})),'merchantBreakdown':_0x5ca38c[_0x3a2d2b(0xcb)]?undefined:Object[_0x3a2d2b(0x194)](_0x4cb817)[_0x3a2d2b(0x19d)](_0x25a387=>({..._0x25a387,'turnoverUSDT':Math[_0x3a2d2b(0x196)](_0x25a387['turnoverUSDT']*0x64)/0x64,'commissionUSDT':Math[_0x3a2d2b(0x196)](_0x25a387[_0x3a2d2b(0x112)]*0x64)/0x64,'merchantEarningsUSDT':Math[_0x3a2d2b(0x196)](_0x25a387[_0x3a2d2b(0x1ba)]*0x64)/0x64,'paidOutUSDT':Math[_0x3a2d2b(0x196)](_0x25a387['paidOutUSDT']*0x64)/0x64,'averageCheckUSDT':Math['round'](_0x25a387[_0x3a2d2b(0x177)]*0x64)/0x64})),'dailyData':Object['values'](_0x2f617d)[_0x3a2d2b(0x19d)](_0x2f1c97=>({..._0x2f1c97,'turnover':Math[_0x3a2d2b(0x196)](_0x2f1c97[_0x3a2d2b(0x12c)]*0x64)/0x64,'merchantEarnings':Math['round'](_0x2f1c97[_0x3a2d2b(0x18a)]*0x64)/0x64,'gatewayEarnings':Math['round'](_0x2f1c97[_0x3a2d2b(0x147)]*0x64)/0x64}))[_0x3a2d2b(0x193)]((_0x5281ac,_0x3fa583)=>_0x5281ac['date']['localeCompare'](_0x3fa583['date'])),'periodInfo':{'from':_0xb392c9,'to':_0x6d8c1,'periodType':_0x5ca38c[_0x3a2d2b(0x1b1)]||_0x3a2d2b(0x13b),'daysCount':_0x3e777f}};return console[_0x3a2d2b(0x13e)](_0x3a2d2b(0x191)),console['log'](_0x3a2d2b(0x89)+_0x34355b[_0x3a2d2b(0x11a)]+_0x3a2d2b(0x19f)),console[_0x3a2d2b(0x13e)](_0x3a2d2b(0x130)+_0x34355b['merchantEarnings']+_0x3a2d2b(0x19f)),console['log'](_0x3a2d2b(0x182)+_0x34355b[_0x3a2d2b(0x147)]+_0x3a2d2b(0x19f)),console[_0x3a2d2b(0x13e)](_0x3a2d2b(0x1aa)+_0x34355b[_0x3a2d2b(0x1b2)]+_0x3a2d2b(0x19f)),console[_0x3a2d2b(0x13e)](_0x3a2d2b(0x1b7)+_0x34355b['pendingPayout']+'\x20USDT'),console[_0x3a2d2b(0x13e)](_0x3a2d2b(0x146)+_0x34355b[_0x3a2d2b(0x94)]),_0x34355b;}async[a36_0x7b1077(0x137)](){const _0x250ba8=a36_0x7b1077;console[_0x250ba8(0x13e)](_0x250ba8(0xad));const _0x320595=await database_1[_0x250ba8(0x8a)]['shop']['findMany']({'where':{'status':_0x250ba8(0x1b5)},'select':{'id':!![],'username':!![],'name':!![]},'orderBy':{'name':_0x250ba8(0xac)}});return console[_0x250ba8(0x13e)](_0x250ba8(0xf1)+_0x320595[_0x250ba8(0xa3)]+_0x250ba8(0x11e)),_0x320595['map'](_0x582fb1=>({'id':_0x582fb1['id'],'username':_0x582fb1[_0x250ba8(0xbb)],'name':_0x582fb1[_0x250ba8(0x9e)]}));}[a36_0x7b1077(0x1b9)](_0x21ef84){const _0x58790c=a36_0x7b1077,_0x560de7={'test_gateway':'Test\x20Gateway','plisio':_0x58790c(0xca),'rapyd':_0x58790c(0x1ad),'noda':_0x58790c(0xe2),'cointopay':_0x58790c(0x132),'cointopay2':_0x58790c(0x14e),'klyme_eu':_0x58790c(0xcf),'klyme_gb':_0x58790c(0x17a),'klyme_de':_0x58790c(0x88),'mastercard':_0x58790c(0x161)};return _0x560de7[_0x21ef84]||_0x21ef84;}[a36_0x7b1077(0x153)](_0x1982b9){const _0x34ccd9=a36_0x7b1077,_0x20a749={'Test\x20Gateway':_0x34ccd9(0x189),'Plisio':_0x34ccd9(0xf2),'Rapyd':_0x34ccd9(0x133),'Noda':'noda','CoinToPay':_0x34ccd9(0x122),'CoinToPay2':_0x34ccd9(0xed),'KLYME\x20EU':_0x34ccd9(0x131),'KLYME\x20GB':_0x34ccd9(0xbf),'KLYME\x20DE':_0x34ccd9(0x18f),'MasterCard':_0x34ccd9(0x167)};return _0x20a749[_0x1982b9]||_0x1982b9[_0x34ccd9(0x163)]();}async[a36_0x7b1077(0xcd)](_0x375605){const _0x4d158b=a36_0x7b1077,{page:_0x450232,limit:_0x5230ce,minAmount:_0x56680b,search:_0x5b5dc7}=_0x375605,_0x5874fc=(_0x450232-0x1)*_0x5230ce;console['log'](_0x4d158b(0x19c),_0x375605);const _0x14b582={'balance':{'gt':0x0},'status':'ACTIVE'};_0x56680b&&(_0x14b582[_0x4d158b(0x139)][_0x4d158b(0x162)]=_0x56680b);_0x5b5dc7&&(_0x14b582['OR']=[{'name':{'contains':_0x5b5dc7,'mode':_0x4d158b(0x18e)}},{'username':{'contains':_0x5b5dc7,'mode':_0x4d158b(0x18e)}}]);const [_0x4087cb,_0x2116f2]=await Promise[_0x4d158b(0x13d)]([database_1[_0x4d158b(0x8a)]['shop'][_0x4d158b(0x85)]({'where':_0x14b582,'skip':_0x5874fc,'take':_0x5230ce,'orderBy':{'balance':_0x4d158b(0xa7)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'balance':!![],'totalPaidOut':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'gatewaySettings':!![],'createdAt':!![]}}),database_1['default'][_0x4d158b(0xb9)][_0x4d158b(0x1bb)]({'where':_0x14b582})]);console[_0x4d158b(0x13e)]('💰\x20Found\x20'+_0x4087cb[_0x4d158b(0xa3)]+'\x20merchants\x20with\x20positive\x20balance');const _0x545591=await Promise[_0x4d158b(0x13d)](_0x4087cb[_0x4d158b(0x19d)](async _0x53df7f=>{const _0x3a15f2=_0x4d158b,[_0x21df8d,_0x4c8207,_0x57a00e]=await Promise[_0x3a15f2(0x13d)]([database_1['default'][_0x3a15f2(0x14d)][_0x3a15f2(0x1bb)]({'where':{'shopId':_0x53df7f['id'],'status':'PAID','gateway':{'not':_0x3a15f2(0x189)}}}),database_1[_0x3a15f2(0x8a)][_0x3a15f2(0x14d)]['findFirst']({'where':{'shopId':_0x53df7f['id'],'status':_0x3a15f2(0x116),'gateway':{'not':_0x3a15f2(0x189)}},'orderBy':{'paidAt':'asc'},'select':{'paidAt':!![]}}),database_1['default'][_0x3a15f2(0x14d)]['groupBy']({'by':[_0x3a15f2(0xbd)],'where':{'shopId':_0x53df7f['id'],'status':_0x3a15f2(0x116),'gateway':{'not':'test_gateway'}},'_count':{'id':!![]},'_sum':{'amountUSDT':!![]}})]),_0x7f3f31=new Date(),_0x16a603=new Date(_0x7f3f31['getFullYear'](),_0x7f3f31[_0x3a15f2(0x9f)](),0x1),_0x1b1e27=new Date(_0x7f3f31['getFullYear'](),_0x7f3f31[_0x3a15f2(0x9f)]()+0x1,0x0,0x17,0x3b,0x3b,0x3e7),[_0x2b8191,_0x4749bb]=await Promise[_0x3a15f2(0x13d)]([database_1[_0x3a15f2(0x8a)][_0x3a15f2(0x11b)][_0x3a15f2(0x1b0)]({'_sum':{'amount':!![]},'where':{'shopId':_0x53df7f['id'],'status':_0x3a15f2(0xdf)}}),database_1['default'][_0x3a15f2(0x11b)][_0x3a15f2(0x1b0)]({'_sum':{'amount':!![]},'where':{'shopId':_0x53df7f['id'],'status':'COMPLETED','createdAt':{'gte':_0x16a603,'lte':_0x1b1e27}}})]),_0x5845ac=_0x2b8191[_0x3a15f2(0x102)][_0x3a15f2(0x95)]||0x0,_0x46fe52=_0x4749bb[_0x3a15f2(0x102)][_0x3a15f2(0x95)]||0x0,_0x25ee85=await Promise['all'](_0x57a00e[_0x3a15f2(0x19d)](async _0x1572bf=>{const _0x3d33e4=_0x3a15f2;let _0x4f8dd=0xa;if(_0x53df7f['gatewaySettings'])try{const _0x1fe736=JSON[_0x3d33e4(0x115)](_0x53df7f[_0x3d33e4(0x87)]);for(const [_0x27f3cc,_0x1180cb]of Object['entries'](_0x1fe736)){if(_0x27f3cc[_0x3d33e4(0x163)]()===_0x1572bf[_0x3d33e4(0xbd)][_0x3d33e4(0x163)]()){_0x4f8dd=_0x1180cb[_0x3d33e4(0x79)]||0xa,console['log']('💰\x20[PAYOUT]\x20Gateway\x20'+_0x1572bf[_0x3d33e4(0xbd)]+_0x3d33e4(0x144)+_0x53df7f['id']+_0x3d33e4(0x8f)+_0x4f8dd+'%');break;}}}catch(_0x2f4e5a){console[_0x3d33e4(0xe5)](_0x3d33e4(0x1a8)+_0x53df7f['id']+':',_0x2f4e5a);}const _0x1a9ad1=_0x1572bf[_0x3d33e4(0x102)]?.[_0x3d33e4(0x190)]||0x0,_0x3f07a3=_0x1a9ad1*(0x1-_0x4f8dd/0x64);return{'gateway':_0x1572bf[_0x3d33e4(0xbd)],'count':_0x1572bf[_0x3d33e4(0x168)]?.['id']||0x0,'amountUSDT':Math[_0x3d33e4(0x196)](_0x1a9ad1*0x64)/0x64,'amountAfterCommissionUSDT':Math['round'](_0x3f07a3*0x64)/0x64,'commission':_0x4f8dd};})),_0x9d4900=_0x25ee85[_0x3a15f2(0x187)]((_0x215831,_0x5a0468)=>_0x215831+_0x5a0468[_0x3a15f2(0x190)],0x0),_0x41c795=_0x53df7f['balance'];return console['log'](_0x3a15f2(0x14c)+_0x53df7f['username']+':'),console['log'](_0x3a15f2(0x15f)+_0x9d4900[_0x3a15f2(0x86)](0x2)+_0x3a15f2(0xd9)),console[_0x3a15f2(0x13e)](_0x3a15f2(0xa6)+_0x25ee85[_0x3a15f2(0x187)]((_0x5924d8,_0x20e8fa)=>_0x5924d8+_0x20e8fa[_0x3a15f2(0xf6)],0x0)[_0x3a15f2(0x86)](0x2)+_0x3a15f2(0x81)),console[_0x3a15f2(0x13e)](_0x3a15f2(0x97)+_0x41c795[_0x3a15f2(0x86)](0x2)+_0x3a15f2(0x170)),{'id':_0x53df7f['id'],'fullName':_0x53df7f[_0x3a15f2(0x9e)],'username':_0x53df7f['username'],'telegramId':_0x53df7f[_0x3a15f2(0xc1)],'merchantUrl':_0x53df7f[_0x3a15f2(0x18b)],'wallets':{'usdtPolygonWallet':_0x53df7f['usdtPolygonWallet'],'usdtTrcWallet':_0x53df7f['usdtTrcWallet'],'usdtErcWallet':_0x53df7f[_0x3a15f2(0x78)],'usdcPolygonWallet':_0x53df7f[_0x3a15f2(0x149)]},'totalAmountUSDT':Math[_0x3a15f2(0x196)](_0x9d4900*0x64)/0x64,'totalAmountAfterCommissionUSDT':Math[_0x3a15f2(0x196)](_0x41c795*0x64)/0x64,'totalPayout':Math[_0x3a15f2(0x196)](_0x5845ac*0x64)/0x64,'thisMonth':Math[_0x3a15f2(0x196)](_0x46fe52*0x64)/0x64,'paymentsCount':_0x21df8d,'oldestPaymentDate':_0x4c8207?.['paidAt']||_0x53df7f[_0x3a15f2(0xfe)],'gatewayBreakdown':_0x25ee85};})),_0x233891=_0x545591[_0x4d158b(0x187)]((_0x42f7a6,_0x49ef32)=>_0x42f7a6+_0x49ef32[_0x4d158b(0x174)],0x0),_0x8d725a=_0x545591[_0x4d158b(0x187)]((_0x268bdd,_0x47c5c9)=>_0x268bdd+_0x47c5c9['totalAmountAfterCommissionUSDT'],0x0),_0x19a4cd=_0x545591['reduce']((_0x531d48,_0x512c79)=>_0x531d48+_0x512c79[_0x4d158b(0xa0)],0x0),_0x4be62a=_0x545591['reduce']((_0x588661,_0x27100f)=>_0x588661+_0x27100f[_0x4d158b(0x141)],0x0);return console[_0x4d158b(0x13e)](_0x4d158b(0x8c)+_0x2116f2+'\x20merchants'),console['log'](_0x4d158b(0xc4)+Math[_0x4d158b(0x196)](_0x233891*0x64)/0x64+_0x4d158b(0xd9)),console['log'](_0x4d158b(0xde)+Math[_0x4d158b(0x196)](_0x8d725a*0x64)/0x64+_0x4d158b(0x10e)),console['log']('\x20\x20\x20💸\x20Total\x20payouts\x20(all\x20time):\x20'+Math[_0x4d158b(0x196)](_0x19a4cd*0x64)/0x64+_0x4d158b(0x19f)),console['log'](_0x4d158b(0xd1)+Math[_0x4d158b(0x196)](_0x4be62a*0x64)/0x64+_0x4d158b(0x19f)),{'merchants':_0x545591,'pagination':{'page':_0x450232,'limit':_0x5230ce,'total':_0x2116f2,'totalPages':Math[_0x4d158b(0x145)](_0x2116f2/_0x5230ce)},'summary':{'totalMerchants':_0x2116f2,'totalAmountUSDT':Math[_0x4d158b(0x196)](_0x233891*0x64)/0x64,'totalAmountAfterCommissionUSDT':Math[_0x4d158b(0x196)](_0x8d725a*0x64)/0x64,'totalPayout':Math[_0x4d158b(0x196)](_0x19a4cd*0x64)/0x64,'thisMonth':Math[_0x4d158b(0x196)](_0x4be62a*0x64)/0x64}};}async['createPayout'](_0x4d8706){const _0x1b2442=a36_0x7b1077,{shopId:_0x3decd6,amount:_0x24eafb,network:_0x2dfe6b,wallet:_0x57b710,notes:_0x3f9758,txid:_0xfef48a,periodFrom:_0x54249e,periodTo:_0x1d1c2f}=_0x4d8706,_0x9550a3=await database_1[_0x1b2442(0x8a)][_0x1b2442(0xe8)](async _0x367223=>{const _0x1adfc9=_0x1b2442,_0x5ebef7=await _0x367223[_0x1adfc9(0xb9)]['findUnique']({'where':{'id':_0x3decd6},'select':{'id':!![],'name':!![],'username':!![],'balance':!![],'totalPaidOut':!![]}});if(!_0x5ebef7)throw new Error(_0x1adfc9(0x15a));console[_0x1adfc9(0x13e)](_0x1adfc9(0x158)+_0x5ebef7[_0x1adfc9(0xbb)]+':'),console['log']('\x20\x20\x20Current\x20balance:\x20'+_0x5ebef7[_0x1adfc9(0x139)][_0x1adfc9(0x86)](0x6)+_0x1adfc9(0x19f)),console[_0x1adfc9(0x13e)](_0x1adfc9(0x17d)+_0x24eafb[_0x1adfc9(0x86)](0x6)+_0x1adfc9(0x19f)),console[_0x1adfc9(0x13e)](_0x1adfc9(0x108)+_0x5ebef7[_0x1adfc9(0x1b2)]['toFixed'](0x6)+_0x1adfc9(0x19f));if(_0xfef48a)console['log']('\x20\x20\x20Transaction\x20hash:\x20'+_0xfef48a);if(_0x5ebef7[_0x1adfc9(0x139)]<_0x24eafb)throw new Error(_0x1adfc9(0x19e)+_0x5ebef7[_0x1adfc9(0x139)][_0x1adfc9(0x86)](0x6)+_0x1adfc9(0xe6)+_0x24eafb[_0x1adfc9(0x86)](0x6)+'\x20USDT');let _0x2ace3c=_0x57b710;if(!_0x2ace3c){const _0xbca489=await _0x367223['shop'][_0x1adfc9(0x15e)]({'where':{'id':_0x3decd6},'select':{'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![]}});if(_0xbca489)switch(_0x2dfe6b){case _0x1adfc9(0xe1):_0x2ace3c=_0xbca489[_0x1adfc9(0x114)]||undefined;break;case _0x1adfc9(0xf0):_0x2ace3c=_0xbca489[_0x1adfc9(0x156)]||undefined;break;case _0x1adfc9(0x12e):_0x2ace3c=_0xbca489[_0x1adfc9(0x78)]||undefined;break;case _0x1adfc9(0x10c):_0x2ace3c=_0xbca489[_0x1adfc9(0x149)]||undefined;break;}}console[_0x1adfc9(0x13e)]('💳\x20Payout\x20wallet\x20for\x20'+_0x2dfe6b+':\x20'+(_0x2ace3c||_0x1adfc9(0x173)));const _0x1509a3=await _0x367223['payout'][_0x1adfc9(0xe0)]({'data':{'shopId':_0x3decd6,'amount':_0x24eafb,'network':_0x2dfe6b,'status':_0x1adfc9(0xdf),'txid':_0xfef48a,'notes':_0x3f9758,'periodFrom':_0x54249e?new Date(_0x54249e):null,'periodTo':_0x1d1c2f?new Date(_0x1d1c2f):null,'createdAt':new Date(),'paidAt':new Date()}}),_0x3ddd39=_0x5ebef7['balance']-_0x24eafb,_0x1577d3=_0x5ebef7[_0x1adfc9(0x1b2)]+_0x24eafb;return await _0x367223[_0x1adfc9(0xb9)][_0x1adfc9(0x16d)]({'where':{'id':_0x3decd6},'data':{'balance':_0x3ddd39,'totalPaidOut':_0x1577d3}}),console['log'](_0x1adfc9(0x1a9)+_0x5ebef7[_0x1adfc9(0xbb)]+_0x1adfc9(0xce)),console[_0x1adfc9(0x13e)]('\x20\x20\x20Balance:\x20'+_0x5ebef7[_0x1adfc9(0x139)][_0x1adfc9(0x86)](0x6)+_0x1adfc9(0x109)+_0x3ddd39[_0x1adfc9(0x86)](0x6)+_0x1adfc9(0xc0)+_0x24eafb[_0x1adfc9(0x86)](0x6)+')'),console[_0x1adfc9(0x13e)]('\x20\x20\x20Total\x20paid\x20out:\x20'+_0x5ebef7['totalPaidOut']['toFixed'](0x6)+_0x1adfc9(0x109)+_0x1577d3[_0x1adfc9(0x86)](0x6)+_0x1adfc9(0x1a2)+_0x24eafb[_0x1adfc9(0x86)](0x6)+')'),{'payout':_0x1509a3,'shop':_0x5ebef7};});return console[_0x1b2442(0x13e)](_0x1b2442(0x1a5)+_0x9550a3['payout']['id']+_0x1b2442(0x144)+_0x9550a3[_0x1b2442(0xb9)][_0x1b2442(0xbb)]+'\x20('+_0x24eafb+'\x20USDT)'),{'id':_0x9550a3[_0x1b2442(0x11b)]['id'],'shopId':_0x9550a3[_0x1b2442(0x11b)][_0x1b2442(0xcb)],'shopName':_0x9550a3[_0x1b2442(0xb9)][_0x1b2442(0x9e)],'shopUsername':_0x9550a3[_0x1b2442(0xb9)][_0x1b2442(0xbb)],'amount':_0x9550a3[_0x1b2442(0x11b)][_0x1b2442(0x95)],'network':_0x9550a3[_0x1b2442(0x11b)][_0x1b2442(0xd8)],'status':_0x9550a3[_0x1b2442(0x11b)]['status'],'txid':_0x9550a3[_0x1b2442(0x11b)][_0x1b2442(0xb4)],'notes':_0x9550a3[_0x1b2442(0x11b)][_0x1b2442(0xf8)],'periodFrom':_0x9550a3['payout'][_0x1b2442(0xa4)],'periodTo':_0x9550a3['payout'][_0x1b2442(0xe3)],'createdAt':_0x9550a3['payout'][_0x1b2442(0xfe)],'paidAt':_0x9550a3['payout'][_0x1b2442(0x136)]};}async[a36_0x7b1077(0xef)](_0x24bd5c){const _0x3a507f=a36_0x7b1077,{page:_0x4366e3,limit:_0x381979,shopId:_0x208f4c,network:_0x355584,dateFrom:_0x527f1b,dateTo:_0x269f3,search:_0x145ddb}=_0x24bd5c,_0x215602=(_0x4366e3-0x1)*_0x381979,_0x2f3fe9={};_0x208f4c&&(_0x2f3fe9['shopId']=_0x208f4c);_0x355584&&(_0x2f3fe9[_0x3a507f(0xd8)]=_0x355584);(_0x527f1b||_0x269f3)&&(_0x2f3fe9['createdAt']={},_0x527f1b&&(_0x2f3fe9[_0x3a507f(0xfe)][_0x3a507f(0x162)]=new Date(_0x527f1b)),_0x269f3&&(_0x2f3fe9['createdAt'][_0x3a507f(0x13f)]=new Date(_0x269f3)));_0x145ddb&&(_0x2f3fe9['OR']=[{'shop':{'name':{'contains':_0x145ddb,'mode':'insensitive'}}},{'shop':{'username':{'contains':_0x145ddb,'mode':_0x3a507f(0x18e)}}},{'notes':{'contains':_0x145ddb,'mode':_0x3a507f(0x18e)}}]);const [_0x232606,_0x23807a]=await Promise[_0x3a507f(0x13d)]([database_1[_0x3a507f(0x8a)]['payout'][_0x3a507f(0x85)]({'where':_0x2f3fe9,'skip':_0x215602,'take':_0x381979,'orderBy':{'createdAt':_0x3a507f(0xa7)},'select':{'id':!![],'shopId':!![],'amount':!![],'network':!![],'status':!![],'txid':!![],'notes':!![],'periodFrom':!![],'periodTo':!![],'createdAt':!![],'paidAt':!![],'shop':{'select':{'name':!![],'username':!![]}}}}),database_1[_0x3a507f(0x8a)][_0x3a507f(0x11b)][_0x3a507f(0x1bb)]({'where':_0x2f3fe9})]);return{'payouts':_0x232606[_0x3a507f(0x19d)](_0x534531=>({'id':_0x534531['id'],'shopId':_0x534531[_0x3a507f(0xcb)],'shopName':_0x534531[_0x3a507f(0xb9)]['name'],'shopUsername':_0x534531[_0x3a507f(0xb9)][_0x3a507f(0xbb)],'amount':_0x534531[_0x3a507f(0x95)],'network':_0x534531['network'],'status':_0x534531['status'],'txid':_0x534531['txid'],'notes':_0x534531[_0x3a507f(0xf8)],'periodFrom':_0x534531[_0x3a507f(0xa4)],'periodTo':_0x534531['periodTo'],'createdAt':_0x534531['createdAt'],'paidAt':_0x534531[_0x3a507f(0x136)]})),'pagination':{'page':_0x4366e3,'limit':_0x381979,'total':_0x23807a,'totalPages':Math['ceil'](_0x23807a/_0x381979)}};}async['getPayoutById'](_0x557a2e){const _0xe0028e=a36_0x7b1077,_0x8efd1e=await database_1[_0xe0028e(0x8a)][_0xe0028e(0x11b)]['findUnique']({'where':{'id':_0x557a2e},'include':{'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x8efd1e)return null;return{'id':_0x8efd1e['id'],'shopId':_0x8efd1e[_0xe0028e(0xcb)],'shopName':_0x8efd1e['shop'][_0xe0028e(0x9e)],'shopUsername':_0x8efd1e[_0xe0028e(0xb9)][_0xe0028e(0xbb)],'amount':_0x8efd1e[_0xe0028e(0x95)],'network':_0x8efd1e[_0xe0028e(0xd8)],'status':_0x8efd1e['status'],'txid':_0x8efd1e[_0xe0028e(0xb4)],'notes':_0x8efd1e['notes'],'periodFrom':_0x8efd1e[_0xe0028e(0xa4)],'periodTo':_0x8efd1e['periodTo'],'createdAt':_0x8efd1e[_0xe0028e(0xfe)],'paidAt':_0x8efd1e[_0xe0028e(0x136)]};}async[a36_0x7b1077(0x82)](_0x57f48d){const _0x17ca40=a36_0x7b1077;await database_1[_0x17ca40(0x8a)][_0x17ca40(0x11b)][_0x17ca40(0xa5)]({'where':{'id':_0x57f48d}});}async[a36_0x7b1077(0x83)](_0x2a2165){const _0x2d6199=a36_0x7b1077,{page:_0x1f07dd,limit:_0x5a9c71,status:_0x412f94,gateway:_0x2e1b68,shopId:_0x392232,dateFrom:_0x34d4f6,dateTo:_0x5c5b18,search:_0x496d19,currency:_0x1ada01,sortBy:_0x5de56a,sortOrder:_0x2b6c78}=_0x2a2165,_0x4b4e8b=(_0x1f07dd-0x1)*_0x5a9c71;console[_0x2d6199(0x13e)](_0x2d6199(0x142),_0x2a2165);const _0x3d93be=await database_1[_0x2d6199(0x8a)][_0x2d6199(0x14d)]['groupBy']({'by':[_0x2d6199(0xbd)],'_count':{'gateway':!![]}});console[_0x2d6199(0x13e)](_0x2d6199(0x14b),_0x3d93be['map'](_0x558d76=>_0x558d76['gateway']+'\x20('+_0x558d76['_count'][_0x2d6199(0xbd)]+_0x2d6199(0xeb)));if(_0x2e1b68){const _0x521178=_0x3d93be[_0x2d6199(0xaa)](_0x529e7c=>_0x529e7c[_0x2d6199(0xbd)][_0x2d6199(0x163)]()===_0x2e1b68[_0x2d6199(0x163)]());!_0x521178&&_0x2e1b68['toLowerCase']()!=='test_gateway'&&console['log'](_0x2d6199(0x1bd)+_0x2e1b68+_0x2d6199(0x134)+_0x3d93be[_0x2d6199(0x19d)](_0xf2b289=>_0xf2b289[_0x2d6199(0xbd)])['join'](',\x20'));}const _0x5e28d0={};_0x412f94&&(_0x5e28d0[_0x2d6199(0x16a)]=_0x412f94[_0x2d6199(0x103)]());if(!_0x2e1b68)_0x5e28d0[_0x2d6199(0xbd)]={'not':_0x2d6199(0x189)};else{if(_0x2e1b68&&(_0x2e1b68[_0x2d6199(0x163)]()===_0x2d6199(0x189)||_0x2e1b68===_0x2d6199(0x171)))_0x5e28d0['gateway']=_0x2d6199(0x189);else{let _0x16eb02=_0x2e1b68;const _0x86d2be=(0x0,gateway_1[_0x2d6199(0x19a)])(_0x2e1b68);if(_0x86d2be)_0x16eb02=_0x86d2be,console['log']('🔄\x20Converted\x20gateway\x20ID\x20\x27'+_0x2e1b68+'\x27\x20to\x20name\x20\x27'+_0x16eb02+'\x27');else{const _0x36dff2=(0x0,gateway_1[_0x2d6199(0x181)])(_0x2e1b68);if(_0x36dff2){const _0x354569=(0x0,gateway_1[_0x2d6199(0x19a)])(_0x36dff2);_0x354569&&(_0x16eb02=_0x354569,console['log']('🔄\x20Converted\x20gateway\x20name\x20\x27'+_0x2e1b68+_0x2d6199(0x10d)+_0x36dff2+_0x2d6199(0x155)+_0x16eb02+'\x27'));}else console[_0x2d6199(0x13e)]('🔍\x20Using\x20gateway\x20\x27'+_0x2e1b68+'\x27\x20as\x20is\x20(not\x20found\x20in\x20mappings)');}const _0x5935eb=await database_1[_0x2d6199(0x8a)][_0x2d6199(0x14d)][_0x2d6199(0x1bb)]({'where':{'gateway':_0x16eb02[_0x2d6199(0x163)]()},'take':0x1});_0x5935eb===0x0?(console[_0x2d6199(0x13e)](_0x2d6199(0x92)+_0x16eb02+_0x2d6199(0xf9)+_0x2e1b68+_0x2d6199(0x1a3)),_0x5e28d0[_0x2d6199(0xbd)]=_0x2d6199(0x151)):(_0x5e28d0[_0x2d6199(0xbd)]=_0x16eb02[_0x2d6199(0x163)](),console[_0x2d6199(0x13e)](_0x2d6199(0xb1)+_0x16eb02+_0x2d6199(0xf9)+_0x2e1b68+'\x27)'));}}console[_0x2d6199(0x13e)](_0x2d6199(0x188),_0x5e28d0['gateway']);_0x392232&&(_0x5e28d0['shopId']=_0x392232);_0x1ada01&&(_0x5e28d0[_0x2d6199(0x117)]=_0x1ada01[_0x2d6199(0x103)](),console[_0x2d6199(0x13e)](_0x2d6199(0xe4)+_0x1ada01[_0x2d6199(0x103)]()));(_0x34d4f6||_0x5c5b18)&&(_0x5e28d0[_0x2d6199(0xfe)]={},_0x34d4f6&&(_0x5e28d0[_0x2d6199(0xfe)][_0x2d6199(0x162)]=new Date(_0x34d4f6)),_0x5c5b18&&(_0x5e28d0[_0x2d6199(0xfe)][_0x2d6199(0x13f)]=new Date(_0x5c5b18)));_0x496d19&&(_0x5e28d0['OR']=[{'id':{'contains':_0x496d19,'mode':_0x2d6199(0x18e)}},{'orderId':{'contains':_0x496d19,'mode':'insensitive'}},{'gatewayOrderId':{'contains':_0x496d19,'mode':'insensitive'}},{'customerEmail':{'contains':_0x496d19,'mode':'insensitive'}},{'shop':{'name':{'contains':_0x496d19,'mode':_0x2d6199(0x18e)}}},{'shop':{'username':{'contains':_0x496d19,'mode':'insensitive'}}}]);console['log'](_0x2d6199(0x169),JSON[_0x2d6199(0x1b8)](_0x5e28d0,null,0x2));let _0x61a9b2={'createdAt':_0x2d6199(0xa7)};if(_0x5de56a){const _0x4d9da0=[_0x2d6199(0x95),'createdAt',_0x2d6199(0xd0),_0x2d6199(0x16a),_0x2d6199(0xbd),_0x2d6199(0x117)],_0x2d1a01=[_0x2d6199(0xac),_0x2d6199(0xa7)];if(_0x4d9da0['includes'](_0x5de56a)){const _0xc9acd6=_0x2d1a01[_0x2d6199(0x120)](_0x2b6c78)?_0x2b6c78:_0x2d6199(0xa7);_0x61a9b2={[_0x5de56a]:_0xc9acd6},console[_0x2d6199(0x13e)](_0x2d6199(0x10a)+_0x5de56a+_0x2d6199(0xea)+_0xc9acd6+_0x2d6199(0xfc));}}const [_0x4f4f40,_0x5182ec]=await Promise[_0x2d6199(0x13d)]([database_1[_0x2d6199(0x8a)][_0x2d6199(0x14d)]['findMany']({'where':_0x5e28d0,'skip':_0x4b4e8b,'take':_0x5a9c71,'orderBy':_0x61a9b2,'include':{'shop':{'select':{'name':!![],'username':!![]}}}}),database_1[_0x2d6199(0x8a)][_0x2d6199(0x14d)][_0x2d6199(0x1bb)]({'where':_0x5e28d0})]);return{'payments':_0x4f4f40,'pagination':{'page':_0x1f07dd,'limit':_0x5a9c71,'total':_0x5182ec,'totalPages':Math[_0x2d6199(0x145)](_0x5182ec/_0x5a9c71)}};}async[a36_0x7b1077(0x11d)](_0x5c211d){const _0x43fb5d=a36_0x7b1077,_0x4ade0d=await database_1[_0x43fb5d(0x8a)]['payment'][_0x43fb5d(0x15e)]({'where':{'id':_0x5c211d},'include':{'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x4ade0d)return null;return{'id':_0x4ade0d['id'],'shopId':_0x4ade0d[_0x43fb5d(0xcb)],'gateway':_0x4ade0d[_0x43fb5d(0xbd)],'amount':_0x4ade0d['amount'],'currency':_0x4ade0d[_0x43fb5d(0x117)],'status':_0x4ade0d[_0x43fb5d(0x16a)],'orderId':_0x4ade0d['orderId'],'gatewayOrderId':_0x4ade0d[_0x43fb5d(0x1ac)],'customerEmail':_0x4ade0d[_0x43fb5d(0x195)],'customerName':_0x4ade0d['customerName'],'customerCountry':_0x4ade0d[_0x43fb5d(0x172)],'customerIp':_0x4ade0d[_0x43fb5d(0xbc)],'customerUa':_0x4ade0d[_0x43fb5d(0x152)],'failureMessage':_0x4ade0d['failureMessage'],'externalPaymentUrl':_0x4ade0d[_0x43fb5d(0xfd)],'successUrl':_0x4ade0d[_0x43fb5d(0x17b)],'failUrl':_0x4ade0d[_0x43fb5d(0x148)],'pendingUrl':_0x4ade0d['pendingUrl'],'whiteUrl':_0x4ade0d[_0x43fb5d(0x15c)],'createdAt':_0x4ade0d[_0x43fb5d(0xfe)],'updatedAt':_0x4ade0d['updatedAt'],'shop':_0x4ade0d[_0x43fb5d(0xb9)]};}async[a36_0x7b1077(0xb7)](_0x233f07,_0x14cb6c,_0x549895,_0x25205c){const _0x17a784=a36_0x7b1077,_0x28e7d2=await database_1[_0x17a784(0x8a)][_0x17a784(0xe8)](async _0x1a5232=>{const _0x3736e3=_0x17a784,_0x30f87e=await _0x1a5232[_0x3736e3(0x14d)]['findUnique']({'where':{'id':_0x233f07},'include':{'shop':{'select':{'id':!![],'name':!![],'username':!![],'balance':!![]}}}});if(!_0x30f87e)throw new Error(_0x3736e3(0x10f));const _0x2b9c39=_0x30f87e[_0x3736e3(0x16a)],_0x1b2f9c=_0x14cb6c[_0x3736e3(0x103)]();console[_0x3736e3(0x13e)](_0x3736e3(0xc3)+_0x233f07+_0x3736e3(0xa9)+_0x2b9c39+'\x20->\x20'+_0x1b2f9c),console['log']('💰\x20Current\x20shop\x20balance:\x20'+_0x30f87e[_0x3736e3(0xb9)][_0x3736e3(0x139)]+_0x3736e3(0x19f));const _0x46198e={'status':_0x1b2f9c,'updatedAt':new Date(),'statusChangedBy':_0x3736e3(0x100),'statusChangedAt':new Date()};_0x549895&&(_0x46198e[_0x3736e3(0x127)]=_0x549895);_0x1b2f9c===_0x3736e3(0x18d)&&_0x25205c&&(_0x46198e['chargebackAmount']=_0x25205c);let _0x426d8a=0x0,_0x4c75c8=_0x30f87e['shop'][_0x3736e3(0x139)];if(_0x1b2f9c==='PAID'&&_0x2b9c39!==_0x3736e3(0x116)){_0x46198e['paidAt']=new Date();const _0x74b5aa=await currencyService_1[_0x3736e3(0x12a)][_0x3736e3(0x105)](_0x30f87e[_0x3736e3(0x95)],_0x30f87e['currency']);_0x46198e[_0x3736e3(0x190)]=_0x74b5aa;let _0x402705=0xa;const _0x54b849=await _0x1a5232[_0x3736e3(0xb9)][_0x3736e3(0x15e)]({'where':{'id':_0x30f87e['shopId']},'select':{'gatewaySettings':!![]}});if(_0x54b849?.[_0x3736e3(0x87)])try{const _0x3bd785=JSON[_0x3736e3(0x115)](_0x54b849[_0x3736e3(0x87)]);for(const [_0x1ff669,_0x430279]of Object[_0x3736e3(0xab)](_0x3bd785)){if(_0x1ff669[_0x3736e3(0x163)]()===_0x30f87e[_0x3736e3(0xbd)][_0x3736e3(0x163)]()){_0x402705=_0x430279[_0x3736e3(0x79)]||0xa;break;}}}catch(_0x519458){console[_0x3736e3(0xe5)](_0x3736e3(0x14a)+_0x233f07+':',_0x519458);}let _0x2044e9;_0x30f87e[_0x3736e3(0x184)]!==null&&_0x30f87e[_0x3736e3(0x184)]!==undefined?(_0x2044e9=_0x30f87e[_0x3736e3(0x184)],console[_0x3736e3(0x13e)](_0x3736e3(0x96)+_0x2044e9['toFixed'](0x6)+'\x20USDT\x20for\x20payment\x20'+_0x233f07)):(_0x2044e9=_0x74b5aa*(0x1-_0x402705/0x64),console['log'](_0x3736e3(0x180)+_0x233f07+':\x20'+_0x402705+'%\x20from\x20'+_0x74b5aa[_0x3736e3(0x86)](0x6)+_0x3736e3(0x19f)),_0x46198e[_0x3736e3(0x184)]=_0x2044e9),_0x426d8a=_0x2044e9,_0x4c75c8+=_0x2044e9,console['log'](_0x3736e3(0x1a1)+_0x233f07+'\x20became\x20PAID:'),console[_0x3736e3(0x13e)]('\x20\x20\x20Full\x20amount:\x20'+_0x74b5aa[_0x3736e3(0x86)](0x6)+_0x3736e3(0x19f)),console[_0x3736e3(0x13e)](_0x3736e3(0x106)+_0x30f87e[_0x3736e3(0xbd)]+',\x20Commission:\x20'+_0x402705+'%'),console[_0x3736e3(0x13e)](_0x3736e3(0x160)+_0x2044e9['toFixed'](0x6)+_0x3736e3(0x10b)+_0x402705+'%\x20commission)'),console[_0x3736e3(0x13e)](_0x3736e3(0xd3)+_0x2044e9['toFixed'](0x6)+_0x3736e3(0x19f));}else{if(_0x2b9c39===_0x3736e3(0x116)&&_0x1b2f9c!=='PAID'){if(_0x30f87e[_0x3736e3(0x190)]){let _0x544756=0xa;const _0x461fd6=await _0x1a5232[_0x3736e3(0xb9)][_0x3736e3(0x15e)]({'where':{'id':_0x30f87e[_0x3736e3(0xcb)]},'select':{'gatewaySettings':!![]}});if(_0x461fd6?.[_0x3736e3(0x87)])try{const _0x175df8=JSON[_0x3736e3(0x115)](_0x461fd6['gatewaySettings']);for(const [_0x2b4d27,_0x1057b9]of Object[_0x3736e3(0xab)](_0x175df8)){if(_0x2b4d27[_0x3736e3(0x163)]()===_0x30f87e[_0x3736e3(0xbd)][_0x3736e3(0x163)]()){_0x544756=_0x1057b9[_0x3736e3(0x79)]||0xa;break;}}}catch(_0x92da1f){console[_0x3736e3(0xe5)]('Error\x20parsing\x20gateway\x20settings\x20for\x20payment\x20'+_0x233f07+':',_0x92da1f);}const _0xff71f2=_0x30f87e[_0x3736e3(0x190)]*(0x1-_0x544756/0x64);_0x426d8a=-_0xff71f2,_0x4c75c8-=_0xff71f2,_0x46198e['amountUSDT']=null,_0x46198e[_0x3736e3(0x184)]=null,console[_0x3736e3(0x13e)]('💰\x20Payment\x20'+_0x233f07+'\x20no\x20longer\x20PAID:'),console[_0x3736e3(0x13e)](_0x3736e3(0xb0)+_0x30f87e[_0x3736e3(0x190)][_0x3736e3(0x86)](0x6)+_0x3736e3(0x19f)),console[_0x3736e3(0x13e)](_0x3736e3(0x106)+_0x30f87e[_0x3736e3(0xbd)]+_0x3736e3(0xba)+_0x544756+'%'),console['log'](_0x3736e3(0xf5)+_0xff71f2[_0x3736e3(0x86)](0x6)+_0x3736e3(0x10b)+_0x544756+_0x3736e3(0x17e)),console[_0x3736e3(0x13e)](_0x3736e3(0xb3)+_0xff71f2[_0x3736e3(0x86)](0x6)+_0x3736e3(0x19f));}}}_0x1b2f9c===_0x3736e3(0x18d)&&(_0x2b9c39==='PAID'&&_0x30f87e[_0x3736e3(0x190)]&&console[_0x3736e3(0x13e)](_0x3736e3(0x17c)),_0x25205c&&_0x25205c>0x0&&(_0x426d8a-=_0x25205c,_0x4c75c8-=_0x25205c,console[_0x3736e3(0x13e)](_0x3736e3(0x110)+_0x25205c['toFixed'](0x6)+_0x3736e3(0xe7))));_0x1b2f9c==='REFUND'&&_0x2b9c39===_0x3736e3(0x116)&&console[_0x3736e3(0x13e)](_0x3736e3(0x159));const _0x28423a=await _0x1a5232[_0x3736e3(0x14d)][_0x3736e3(0x16d)]({'where':{'id':_0x233f07},'data':_0x46198e,'include':{'shop':{'select':{'name':!![],'username':!![]}}}});return _0x426d8a!==0x0&&(await _0x1a5232[_0x3736e3(0xb9)][_0x3736e3(0x16d)]({'where':{'id':_0x30f87e['shopId']},'data':{'balance':_0x4c75c8}}),console[_0x3736e3(0x13e)](_0x3736e3(0x1a9)+_0x30f87e[_0x3736e3(0xcb)]+_0x3736e3(0x124)+_0x30f87e[_0x3736e3(0xb9)][_0x3736e3(0x139)][_0x3736e3(0x86)](0x6)+_0x3736e3(0x109)+_0x4c75c8[_0x3736e3(0x86)](0x6)+_0x3736e3(0xcc)+(_0x426d8a>0x0?'+':'')+_0x426d8a[_0x3736e3(0x86)](0x6)+')')),_0x28423a;});return{'id':_0x28e7d2['id'],'shopId':_0x28e7d2[_0x17a784(0xcb)],'gateway':_0x28e7d2[_0x17a784(0xbd)],'amount':_0x28e7d2['amount'],'currency':_0x28e7d2[_0x17a784(0x117)],'status':_0x28e7d2[_0x17a784(0x16a)],'orderId':_0x28e7d2[_0x17a784(0x7b)],'gatewayOrderId':_0x28e7d2[_0x17a784(0x1ac)],'customerEmail':_0x28e7d2['customerEmail'],'customerName':_0x28e7d2[_0x17a784(0x178)],'customerCountry':_0x28e7d2[_0x17a784(0x172)],'customerIp':_0x28e7d2[_0x17a784(0xbc)],'customerUa':_0x28e7d2['customerUa'],'failureMessage':_0x28e7d2[_0x17a784(0x1a0)],'adminNotes':_0x28e7d2['adminNotes'],'chargebackAmount':_0x28e7d2[_0x17a784(0x17f)],'statusChangedBy':_0x28e7d2[_0x17a784(0xd4)],'statusChangedAt':_0x28e7d2[_0x17a784(0xa1)],'createdAt':_0x28e7d2[_0x17a784(0xfe)],'updatedAt':_0x28e7d2['updatedAt'],'shop':_0x28e7d2[_0x17a784(0xb9)]};}async[a36_0x7b1077(0x107)](_0x7ed4d2,_0x1fff7e){const _0x20f0ac=a36_0x7b1077,_0x334a80=Math[_0x20f0ac(0x1a7)]()[_0x20f0ac(0x91)](0x24)[_0x20f0ac(0xaf)](0x2,0x9);console['log'](_0x20f0ac(0x9a)+_0x334a80+_0x20f0ac(0x150)+_0x7ed4d2);const _0x11414a={..._0x1fff7e};_0x1fff7e[_0x20f0ac(0x7f)]&&_0x1fff7e[_0x20f0ac(0x7f)]['trim']()!==''?(console[_0x20f0ac(0x13e)](_0x20f0ac(0xd2)+_0x334a80+_0x20f0ac(0xe9)+_0x7ed4d2),_0x11414a[_0x20f0ac(0x7f)]=await bcryptjs_1['default'][_0x20f0ac(0x12d)](_0x1fff7e[_0x20f0ac(0x7f)],0xc)):(console[_0x20f0ac(0x13e)](_0x20f0ac(0xd2)+_0x334a80+_0x20f0ac(0x111)),delete _0x11414a[_0x20f0ac(0x7f)]);_0x1fff7e['fullName']&&(_0x11414a[_0x20f0ac(0x9e)]=_0x1fff7e['fullName'],delete _0x11414a[_0x20f0ac(0x154)]);_0x1fff7e['telegramId']&&(_0x11414a[_0x20f0ac(0xc1)]=_0x1fff7e[_0x20f0ac(0x166)],delete _0x11414a['telegramId']);_0x1fff7e['merchantUrl']&&(_0x11414a[_0x20f0ac(0x18b)]=_0x1fff7e['merchantUrl'],delete _0x11414a['merchantUrl']);if(_0x1fff7e[_0x20f0ac(0x128)]){const _0x30f009=_0x1fff7e[_0x20f0ac(0x128)][_0x20f0ac(0x19d)](_0x480ed6=>this[_0x20f0ac(0x153)](_0x480ed6));console[_0x20f0ac(0x13e)](_0x20f0ac(0x157),_0x1fff7e[_0x20f0ac(0x128)],'->',_0x30f009),_0x11414a[_0x20f0ac(0x104)]=JSON[_0x20f0ac(0x1b8)](_0x30f009),delete _0x11414a[_0x20f0ac(0x128)];}_0x1fff7e['gatewaySettings']&&(console['log'](_0x20f0ac(0x129)+_0x334a80+']\x20Gateway\x20settings\x20before\x20saving:',_0x1fff7e[_0x20f0ac(0x87)]),_0x11414a[_0x20f0ac(0x87)]=JSON['stringify'](_0x1fff7e['gatewaySettings']),console[_0x20f0ac(0x13e)](_0x20f0ac(0x129)+_0x334a80+']\x20Gateway\x20settings\x20JSON\x20string:',_0x11414a[_0x20f0ac(0x87)]));_0x1fff7e[_0x20f0ac(0xae)]&&(_0x1fff7e[_0x20f0ac(0xae)]['usdtPolygonWallet']!==undefined&&(_0x11414a[_0x20f0ac(0x114)]=_0x1fff7e[_0x20f0ac(0xae)][_0x20f0ac(0x114)]||null),_0x1fff7e[_0x20f0ac(0xae)][_0x20f0ac(0x156)]!==undefined&&(_0x11414a[_0x20f0ac(0x156)]=_0x1fff7e['wallets']['usdtTrcWallet']||null),_0x1fff7e[_0x20f0ac(0xae)]['usdtErcWallet']!==undefined&&(_0x11414a[_0x20f0ac(0x78)]=_0x1fff7e[_0x20f0ac(0xae)][_0x20f0ac(0x78)]||null),_0x1fff7e[_0x20f0ac(0xae)][_0x20f0ac(0x149)]!==undefined&&(_0x11414a[_0x20f0ac(0x149)]=_0x1fff7e[_0x20f0ac(0xae)][_0x20f0ac(0x149)]||null),delete _0x11414a[_0x20f0ac(0xae)]);const _0x359e1e=await database_1[_0x20f0ac(0x8a)]['shop'][_0x20f0ac(0x16d)]({'where':{'id':_0x7ed4d2},'data':_0x11414a,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return console[_0x20f0ac(0x13e)](_0x20f0ac(0x11c)+_0x334a80+_0x20f0ac(0x90),_0x359e1e['gatewaySettings']),{'id':_0x359e1e['id'],'fullName':_0x359e1e[_0x20f0ac(0x9e)],'username':_0x359e1e[_0x20f0ac(0xbb)],'telegramId':_0x359e1e[_0x20f0ac(0xc1)],'merchantUrl':_0x359e1e[_0x20f0ac(0x18b)],'gateways':_0x359e1e[_0x20f0ac(0x104)]?JSON[_0x20f0ac(0x115)](_0x359e1e[_0x20f0ac(0x104)]):null,'gatewaySettings':_0x359e1e[_0x20f0ac(0x87)]?JSON[_0x20f0ac(0x115)](_0x359e1e[_0x20f0ac(0x87)]):null,'publicKey':_0x359e1e[_0x20f0ac(0x13a)],'wallets':{'usdtPolygonWallet':_0x359e1e[_0x20f0ac(0x114)],'usdtTrcWallet':_0x359e1e['usdtTrcWallet'],'usdtErcWallet':_0x359e1e[_0x20f0ac(0x78)],'usdcPolygonWallet':_0x359e1e[_0x20f0ac(0x149)]},'status':_0x359e1e[_0x20f0ac(0x16a)],'createdAt':_0x359e1e[_0x20f0ac(0xfe)]};}async['suspendUser'](_0x14f2f6){const _0x40e896=a36_0x7b1077,_0x374c2d=await database_1['default'][_0x40e896(0xb9)][_0x40e896(0x16d)]({'where':{'id':_0x14f2f6},'data':{'status':_0x40e896(0x12f)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x374c2d['id'],'fullName':_0x374c2d['name'],'username':_0x374c2d[_0x40e896(0xbb)],'telegramId':_0x374c2d['telegram'],'merchantUrl':_0x374c2d[_0x40e896(0x18b)],'gateways':_0x374c2d[_0x40e896(0x104)]?JSON[_0x40e896(0x115)](_0x374c2d[_0x40e896(0x104)]):null,'gatewaySettings':_0x374c2d['gatewaySettings']?JSON[_0x40e896(0x115)](_0x374c2d['gatewaySettings']):null,'publicKey':_0x374c2d[_0x40e896(0x13a)],'wallets':{'usdtPolygonWallet':_0x374c2d[_0x40e896(0x114)],'usdtTrcWallet':_0x374c2d[_0x40e896(0x156)],'usdtErcWallet':_0x374c2d[_0x40e896(0x78)],'usdcPolygonWallet':_0x374c2d[_0x40e896(0x149)]},'status':_0x374c2d[_0x40e896(0x16a)],'createdAt':_0x374c2d[_0x40e896(0xfe)]};}async[a36_0x7b1077(0x84)](_0x5e3fe4){const _0x9c6575=a36_0x7b1077,_0x3e8377=await database_1['default'][_0x9c6575(0xb9)][_0x9c6575(0x16d)]({'where':{'id':_0x5e3fe4},'data':{'status':_0x9c6575(0x1b5)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x3e8377['id'],'fullName':_0x3e8377[_0x9c6575(0x9e)],'username':_0x3e8377[_0x9c6575(0xbb)],'telegramId':_0x3e8377[_0x9c6575(0xc1)],'merchantUrl':_0x3e8377['shopUrl'],'gateways':_0x3e8377['paymentGateways']?JSON[_0x9c6575(0x115)](_0x3e8377[_0x9c6575(0x104)]):null,'gatewaySettings':_0x3e8377[_0x9c6575(0x87)]?JSON['parse'](_0x3e8377[_0x9c6575(0x87)]):null,'publicKey':_0x3e8377['publicKey'],'wallets':{'usdtPolygonWallet':_0x3e8377['usdtPolygonWallet'],'usdtTrcWallet':_0x3e8377[_0x9c6575(0x156)],'usdtErcWallet':_0x3e8377[_0x9c6575(0x78)],'usdcPolygonWallet':_0x3e8377[_0x9c6575(0x149)]},'status':_0x3e8377[_0x9c6575(0x16a)],'createdAt':_0x3e8377['createdAt']};}async[a36_0x7b1077(0x176)](_0x585d24){const _0x151b9d=a36_0x7b1077,{page:_0x1506f1,limit:_0x1cfee8,status:_0x117c44}=_0x585d24,_0x4548ee=(_0x1506f1-0x1)*_0x1cfee8,_0x1a0612={};_0x117c44&&(_0x1a0612[_0x151b9d(0x16a)]=_0x117c44[_0x151b9d(0x103)]());const [_0x122d99,_0x4be5bc]=await Promise[_0x151b9d(0x13d)]([database_1[_0x151b9d(0x8a)][_0x151b9d(0xb9)]['findMany']({'where':_0x1a0612,'skip':_0x4548ee,'take':_0x1cfee8,'orderBy':{'createdAt':_0x151b9d(0xa7)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}}),database_1['default'][_0x151b9d(0xb9)][_0x151b9d(0x1bb)]({'where':_0x1a0612})]);return{'users':_0x122d99[_0x151b9d(0x19d)](_0x3c1a08=>{const _0x1df49e=_0x151b9d,_0x26e1af=_0x3c1a08[_0x1df49e(0x104)]?JSON[_0x1df49e(0x115)](_0x3c1a08[_0x1df49e(0x104)]):null,_0x42fae6=_0x26e1af?_0x26e1af[_0x1df49e(0x19d)](_0x38578c=>this[_0x1df49e(0x1b9)](_0x38578c)):null;return{'id':_0x3c1a08['id'],'fullName':_0x3c1a08[_0x1df49e(0x9e)],'username':_0x3c1a08[_0x1df49e(0xbb)],'telegramId':_0x3c1a08['telegram'],'merchantUrl':_0x3c1a08[_0x1df49e(0x18b)],'gateways':_0x42fae6,'gatewaySettings':_0x3c1a08[_0x1df49e(0x87)]?JSON['parse'](_0x3c1a08[_0x1df49e(0x87)]):null,'publicKey':_0x3c1a08[_0x1df49e(0x13a)],'wallets':{'usdtPolygonWallet':_0x3c1a08[_0x1df49e(0x114)],'usdtTrcWallet':_0x3c1a08[_0x1df49e(0x156)],'usdtErcWallet':_0x3c1a08['usdtErcWallet'],'usdcPolygonWallet':_0x3c1a08[_0x1df49e(0x149)]},'status':_0x3c1a08[_0x1df49e(0x16a)],'createdAt':_0x3c1a08[_0x1df49e(0xfe)]};}),'pagination':{'page':_0x1506f1,'limit':_0x1cfee8,'total':_0x4be5bc,'totalPages':Math[_0x151b9d(0x145)](_0x4be5bc/_0x1cfee8)}};}async['getUserById'](_0x4d3cd0){const _0x3c2165=a36_0x7b1077,_0x4dcbf6=await database_1[_0x3c2165(0x8a)][_0x3c2165(0xb9)][_0x3c2165(0x15e)]({'where':{'id':_0x4d3cd0},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x4dcbf6)return null;const _0x5a82d5=_0x4dcbf6[_0x3c2165(0x104)]?JSON[_0x3c2165(0x115)](_0x4dcbf6[_0x3c2165(0x104)]):null,_0x5d1dc7=_0x5a82d5?_0x5a82d5['map'](_0x41ca35=>this['getGatewayDisplayName'](_0x41ca35)):null;return _0x5a82d5&&_0x5d1dc7&&console[_0x3c2165(0x13e)](_0x3c2165(0x16f),_0x5a82d5,'->',_0x5d1dc7),{'id':_0x4dcbf6['id'],'fullName':_0x4dcbf6['name'],'username':_0x4dcbf6[_0x3c2165(0xbb)],'telegramId':_0x4dcbf6[_0x3c2165(0xc1)],'merchantUrl':_0x4dcbf6['shopUrl'],'gateways':_0x5d1dc7,'gatewaySettings':_0x4dcbf6['gatewaySettings']?JSON[_0x3c2165(0x115)](_0x4dcbf6[_0x3c2165(0x87)]):null,'publicKey':_0x4dcbf6[_0x3c2165(0x13a)],'wallets':{'usdtPolygonWallet':_0x4dcbf6['usdtPolygonWallet'],'usdtTrcWallet':_0x4dcbf6[_0x3c2165(0x156)],'usdtErcWallet':_0x4dcbf6[_0x3c2165(0x78)],'usdcPolygonWallet':_0x4dcbf6['usdcPolygonWallet']},'status':_0x4dcbf6[_0x3c2165(0x16a)],'createdAt':_0x4dcbf6[_0x3c2165(0xfe)]};}async[a36_0x7b1077(0x1bc)](_0x626d49){const _0x3db426=a36_0x7b1077,{fullName:_0x3450de,username:_0x1d10c0,password:_0x1a6f51,telegramId:_0x2a6b6e,merchantUrl:_0x139435,gateways:_0x16b617,gatewaySettings:_0xa6536b,wallets:_0x271728}=_0x626d49,_0x2a0fed=await database_1[_0x3db426(0x8a)][_0x3db426(0xb9)][_0x3db426(0x15e)]({'where':{'username':_0x1d10c0}});if(_0x2a0fed)throw new Error(_0x3db426(0xc6));if(_0x2a6b6e){const _0x10852c=await database_1[_0x3db426(0x8a)][_0x3db426(0xb9)][_0x3db426(0x15e)]({'where':{'telegram':_0x2a6b6e}});if(_0x10852c)throw new Error(_0x3db426(0xdd));}const _0x4a5018=await bcryptjs_1['default'][_0x3db426(0x12d)](_0x1a6f51,0xc),_0x3f1446=_0x3db426(0x192)+crypto_1[_0x3db426(0x8a)][_0x3db426(0xbe)](0x20)[_0x3db426(0x91)](_0x3db426(0xc9)),_0x44189c=_0x3db426(0x1ab)+crypto_1[_0x3db426(0x8a)][_0x3db426(0xbe)](0x20)['toString'](_0x3db426(0xc9)),_0x466a6f=_0x16b617?_0x16b617['map'](_0x4b523c=>this['getGatewayInternalName'](_0x4b523c)):null;_0x16b617&&_0x466a6f&&console['log'](_0x3db426(0x135),_0x16b617,'->',_0x466a6f);const _0x162b71=await database_1[_0x3db426(0x8a)][_0x3db426(0xb9)]['create']({'data':{'name':_0x3450de,'username':_0x1d10c0,'password':_0x4a5018,'telegram':_0x2a6b6e,'shopUrl':_0x139435,'paymentGateways':_0x466a6f?JSON['stringify'](_0x466a6f):null,'gatewaySettings':_0xa6536b?JSON[_0x3db426(0x1b8)](_0xa6536b):null,'usdtPolygonWallet':_0x271728?.[_0x3db426(0x114)]||null,'usdtTrcWallet':_0x271728?.[_0x3db426(0x156)]||null,'usdtErcWallet':_0x271728?.[_0x3db426(0x78)]||null,'usdcPolygonWallet':_0x271728?.[_0x3db426(0x149)]||null,'publicKey':_0x3f1446,'secretKey':_0x44189c,'status':'ACTIVE'},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x162b71['id'],'fullName':_0x162b71[_0x3db426(0x9e)],'username':_0x162b71['username'],'telegramId':_0x162b71['telegram'],'merchantUrl':_0x162b71[_0x3db426(0x18b)],'gateways':_0x162b71[_0x3db426(0x104)]?JSON[_0x3db426(0x115)](_0x162b71[_0x3db426(0x104)]):null,'gatewaySettings':_0x162b71['gatewaySettings']?JSON[_0x3db426(0x115)](_0x162b71[_0x3db426(0x87)]):null,'publicKey':_0x162b71[_0x3db426(0x13a)],'wallets':{'usdtPolygonWallet':_0x162b71[_0x3db426(0x114)],'usdtTrcWallet':_0x162b71[_0x3db426(0x156)],'usdtErcWallet':_0x162b71[_0x3db426(0x78)],'usdcPolygonWallet':_0x162b71[_0x3db426(0x149)]},'status':_0x162b71[_0x3db426(0x16a)],'createdAt':_0x162b71[_0x3db426(0xfe)]};}async[a36_0x7b1077(0x123)](_0x53e7c4){const _0x46278f=a36_0x7b1077;await database_1[_0x46278f(0x8a)]['shop'][_0x46278f(0xa5)]({'where':{'id':_0x53e7c4}});}['generateDailyStatistics'](_0x133118,_0x1d8677,_0x66b37b){const _0x563a93=a36_0x7b1077,_0x56adc1=new Map(),_0x33731c=new Date(_0x1d8677);while(_0x33731c<=_0x66b37b){const _0x2330b3=_0x33731c[_0x563a93(0x1a6)]()[_0x563a93(0x101)]('T')[0x0];_0x56adc1[_0x563a93(0x7e)](_0x2330b3,{'revenue':0x0,'count':0x0}),_0x33731c['setDate'](_0x33731c[_0x563a93(0x1b6)]()+0x1);}for(const _0x39dd75 of _0x133118){const _0x40485e=_0x39dd75[_0x563a93(0xfe)]['toISOString']()['split']('T')[0x0],_0x290bf2=_0x56adc1['get'](_0x40485e);_0x290bf2&&(_0x290bf2[_0x563a93(0x1bb)]+=0x1,_0x39dd75[_0x563a93(0x16a)]==='PAID'&&(_0x39dd75[_0x563a93(0x190)]?_0x290bf2['revenue']+=_0x39dd75[_0x563a93(0x190)]:console[_0x563a93(0x13e)]('⚠️\x20Payment\x20'+_0x39dd75['id']+_0x563a93(0x16c))));}const _0x546548=[],_0x3be258=[];for(const [_0x17dfe4,_0x533212]of _0x56adc1){_0x546548[_0x563a93(0xf3)]({'date':_0x17dfe4,'amount':Math[_0x563a93(0x196)](_0x533212[_0x563a93(0x143)]*0x64)/0x64}),_0x3be258[_0x563a93(0xf3)]({'date':_0x17dfe4,'count':_0x533212[_0x563a93(0x1bb)]});}return{'dailyRevenue':_0x546548,'dailyPayments':_0x3be258};}}function a36_0x18ab(_0x265296,_0x2b990c){const _0x3eb6d9=a36_0x3eb6();return a36_0x18ab=function(_0x18abbc,_0x5dea39){_0x18abbc=_0x18abbc-0x78;let _0x21f03a=_0x3eb6d9[_0x18abbc];return _0x21f03a;},a36_0x18ab(_0x265296,_0x2b990c);}exports[a36_0x7b1077(0xd5)]=AdminService;