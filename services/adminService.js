'use strict';const a36_0x531fed=a36_0x3ba7;(function(_0x2426a4,_0x40ac1e){const _0x34fd02=a36_0x3ba7,_0x4be171=_0x2426a4();while(!![]){try{const _0x32d9be=parseInt(_0x34fd02(0x30d))/0x1*(parseInt(_0x34fd02(0x2da))/0x2)+parseInt(_0x34fd02(0x213))/0x3*(parseInt(_0x34fd02(0x26f))/0x4)+parseInt(_0x34fd02(0x2d9))/0x5*(-parseInt(_0x34fd02(0x24e))/0x6)+parseInt(_0x34fd02(0x268))/0x7+parseInt(_0x34fd02(0x21d))/0x8*(-parseInt(_0x34fd02(0x2ed))/0x9)+parseInt(_0x34fd02(0x2fe))/0xa+parseInt(_0x34fd02(0x32c))/0xb*(-parseInt(_0x34fd02(0x280))/0xc);if(_0x32d9be===_0x40ac1e)break;else _0x4be171['push'](_0x4be171['shift']());}catch(_0x4e464e){_0x4be171['push'](_0x4be171['shift']());}}}(a36_0x35be,0x2ba99));function a36_0x35be(){const _0x3b3ae4=['18GnWejs','\x20order','getTime','currency','\x20USDT\x20for\x20payment\x20','create','periodFrom','💰\x20Shop\x20','customerName','💸\x20CHARGEBACK\x20penalty:\x20-','\x20\x20\x20🏪\x20Gateway\x20earnings:\x20','getGatewayNameById','toISOString','Telegram\x20username\x20already\x20exists','getSystemStatistics','chargebackAmount','CHARGEBACK','3359350getDIG','PAID','🔧\x20[','\x20\x20\x20👤\x20Merchant\x20earnings:\x20','Test\x20Gateway','%\x20from\x20','SUSPENDED',']\x20Gateway\x20settings\x20before\x20saving:','./currencyService','📊\x20Getting\x20payments\x20with\x20filters:','\x27)\x20not\x20found\x20in\x20database,\x20returning\x20empty\x20result','getPayoutById','\x20USDT\x20from\x20balance','\x20merchants\x20with\x20positive\x20balance','paymentsCount','52930ShJQhw','trim','usdtTrcWallet','📊\x20Getting\x20merchant\x20statistics\x20with\x20filters:','dailyRevenue','telegramId','\x27\x20as\x20is\x20(not\x20found\x20in\x20mappings)','updatedAt','findMany','summary','erc20','all','\x20\x20\x20✅\x20Total\x20available\x20for\x20payout:\x20','usdtErcWallet','💰\x20Payment\x20','\x27\x20(from\x20\x27','getPaymentById','gatewayEarnings','📊\x20[ADMIN]\x20Using\x20saved\x20amountAfterGatewayCommissionUSDT:\x20','\x20\x20\x20⏳\x20Pending\x20payout:\x20','🎯\x20updateUser\x20called\x20with\x20ID:\x20','\x20\x20\x20Added\x20to\x20balance:\x20+',',\x20Commission:\x20','merchantUrl','📊\x20Using\x20saved\x20amountAfterGatewayCommissionUSDT:\x20','toString','\x20\x20\x20💵\x20Available\x20balance:\x20','successUrl','hex','🔐\x20[','📋\x20Found\x20','383130pRUOtR','\x20\x20\x20🌐\x20IP:\x20','getGatewayDisplayName','totalPayments','lte','createdAt','\x20\x20\x20💰\x20Total\x20turnover:\x20','\x20USDT','createPayout','\x20USDT)','✅\x20Payout\x20created:\x20','insensitive','90d','paymentGateways','trc20','NONEXISTENT_GATEWAY_FILTER','\x20\x20\x20Transaction\x20hash:\x20','getAllPayouts','\x20\x20\x20Subtracted\x20from\x20balance:\x20-','\x20USDT\x20(+','merchantEarnings','📊\x20Final\x20WHERE\x20conditions:','📊\x20Merchant\x20statistics\x20calculated:','\x20USDT\x20(same\x20as\x20awaiting)','\x20\x20\x20🔍\x20Raw\x20balance\x20sum:\x20','count','adminNotes','failUrl','\x20became\x20PAID:','periodTo','shopUrl','\x20in\x20','updateUser','COMPLETED','\x20\x20\x20�📊\x20Total\x20payments:\x20','default','shopId','toUpperCase','error','network','availableBalance','\x20USDT\x20(-','turnover','Plisio','\x20\x20\x20�\x20Total\x20paid\x20out:\x20','141WLVvRt','random','\x20USDT\x20(with\x20commission\x20deducted)','totalCommissionRate','totalAmountAfterCommissionUSDT','Error\x20parsing\x20gateway\x20settings\x20for\x20shop\x20','forEach','currencyService','merchantEarningsUSDT','customerCountry','993968BCTOae','localeCompare','externalPaymentUrl','\x20USDT\x20(','🔄\x20Admin\x20updating\x20payment\x20','rapyd',']\x20User\x20updated,\x20gatewaySettings\x20from\x20DB:','\x20no\x20longer\x20PAID:','thisMonth','substr','paidOutUSDT','test_gateway','📅\x20Period\x20\x27all\x27:\x20Using\x20start\x20date\x20from\x20first\x20payment:\x20','crypto','\x20\x20\x20Full\x20amount:\x20','customerUa','payout','findFirst','getMerchantsSelection','🔄\x20Gateway\x20mapping:','getGatewayIdByName','\x20USDT\x20(after\x20','💰\x20[PAYOUT]\x20Merchant\x20','\x20->\x20','admin','\x20\x20\x20📊\x20Commission\x20difference:\x20','custom','hash','awaitingPayout','year','averageCommissionRate','orderId','🔄\x20Converted\x20gateway\x20name\x20\x27','\x20\x20\x20🌍\x20Country:\x20','klyme_eu','shop','generateDailyStatistics','pk_','⚠️\x20Requested\x20gateway\x20\x27','💱\x20Currency\x20filter\x20applied:\x20','KLYME\x20DE','gatewaySettings','\x20\x20\x20💳\x20Total\x20payments:\x20','\x20\x20\x20Balance:\x20','commission','split','customerEmail','noda','push','2982htoaOT','updateCustomerData','round','🔄\x20Gateway\x20mapping\x20(get):','telegram','🔍\x20Using\x20gateway\x20\x27','getFullYear','log','PENDING','desc','🔄\x20Converted\x20gateway\x20ID\x20\x27','../types/gateway','reduce','password','status','gte','✅\x20Customer\x20data\x20updated\x20for\x20payment\x20','some','amountAfterCommissionUSDT','\x20\x20\x20Total\x20paid\x20out:\x20','activateUser','🎯\x20[','cointopay','toLowerCase','groupBy','paidAt','1011717HWorkQ','2020-01-01','randomBytes','fullName','pendingPayout','\x20active\x20merchants\x20for\x20selection','\x20USDT\x20(actual\x20balances)','26492XVqvvP',',\x20successful:\x20','\x20USDT,\x20Requested:\x20','AdminService','date','_sum','\x20paid\x20payments\x20for\x20analysis',']\x20Updating\x20password\x20for\x20user\x20','amountUSDT','\x20\x20\x20✅\x20Actual\x20available\x20balance:\x20','customerIp','gateway','$transaction','\x20missing\x20amountUSDT,\x20using\x20fallback\x20conversion','../config/database','getMerchantsAwaitingPayout','bcryptjs','108mQShvh','\x20USDT\x20(without\x20commission)','📊\x20Merchants\x20awaiting\x20payout:\x20','turnoverUSDT','month','polygon_usdc','entries','\x20\x20\x20Payout\x20amount:\x20','📊\x20Calculating\x20commission\x20manually\x20for\x20payment\x20','\x20status:\x20','\x27\x20not\x20found.\x20Available\x20gateways:\x20','getDate','update','\x20USDT\x20(gross\x20revenue)','MasterCard','failureMessage','Insufficient\x20balance.\x20Available:\x20','Shop\x20not\x20found','\x20\x20\x20📅\x20This\x20month:\x20','_count','📊\x20[ADMIN]\x20Calculating\x20commission\x20manually\x20for\x20payment\x20','\x20for\x20shop\x20','aggregate','📋\x20Getting\x20merchants\x20selection\x20list...','notes','delete','Payment\x20not\x20found','balance','\x20\x20\x20📅\x20Total\x20payouts\x20(this\x20month):\x20','\x27\x20->\x20name\x20\x27','dateTo','commissionUSDT','usdtPolygonWallet','REFUND','publicKey','getAllPayments','dateFrom','gateways','getPayoutStats','totalPayout','usdcPolygonWallet','amountAfterGatewayCommissionUSDT','deleteUser','sk_','__esModule','\x20\x20\x20💸\x20Total\x20payouts\x20(all\x20time):\x20','includes','📊\x20Payout\x20statistics\x20calculated:','\x27\x20to\x20name\x20\x27','Error\x20parsing\x20gateway\x20settings\x20for\x20payment\x20','KLYME\x20GB','getMonth',']\x20Gateway\x20settings\x20JSON\x20string:','\x20\x20\x20⏳\x20Awaiting\x20payout:\x20','not\x20specified','txid','not\x20set','averageCheckUSDT','amount','mastercard','totalAmountUSDT','totalPaidOut','set','payment','✅\x20Using\x20gateway\x20filter:\x20\x27','%\x20commission)','wallets','username','30d','plisio','__importDefault','💰\x20[PAYOUT]\x20Gateway\x20','0000','updatePaymentStatus','💰\x20Creating\x20payout\x20for\x20shop\x20','statusChangedBy','getUserById','sort','\x20\x20\x20🖥️\x20User\x20Agent:\x20','📊\x20Total\x20payments\x20(including\x20failed):\x20','week','convertToUSDT','name','\x20\x20\x20🔍\x20Calculated\x20after\x20commission:\x20','revenue','values','parse','length','createUser','2110CWvuxr','6pYkMuM',',\x20userId:\x20','📅\x20Period:\x20','ceil','asc','stringify','⚠️\x20Payment\x20','\x20\x20\x20💰\x20Total\x20payments\x20turnover:\x20','period','getAllUsers','📊\x20Available\x20gateways\x20in\x20database:','\x20payments)','findUnique','🔄\x20REFUND:\x20Payment\x20amount\x20already\x20deducted\x20from\x20balance','ACTIVE','📊\x20Gateway\x20filter\x20applied:','toFixed','map','\x27\x20->\x20ID\x20\x27'];a36_0x35be=function(){return _0x3b3ae4;};return a36_0x35be();}var __importDefault=this&&this[a36_0x531fed(0x2c6)]||function(_0x589a8d){const _0x51bae1=a36_0x531fed;return _0x589a8d&&_0x589a8d[_0x51bae1(0x2ac)]?_0x589a8d:{'default':_0x589a8d};};function a36_0x3ba7(_0x436eb8,_0x1fed79){const _0x35beef=a36_0x35be();return a36_0x3ba7=function(_0x3ba71c,_0x89e048){_0x3ba71c=_0x3ba71c-0x1ec;let _0x3add25=_0x35beef[_0x3ba71c];return _0x3add25;},a36_0x3ba7(_0x436eb8,_0x1fed79);}Object['defineProperty'](exports,a36_0x531fed(0x2ac),{'value':!![]}),exports[a36_0x531fed(0x272)]=void 0x0;const database_1=__importDefault(require(a36_0x531fed(0x27d))),bcryptjs_1=__importDefault(require(a36_0x531fed(0x27f))),crypto_1=__importDefault(require(a36_0x531fed(0x22a))),currencyService_1=require(a36_0x531fed(0x306)),gateway_1=require(a36_0x531fed(0x259));class AdminService{async[a36_0x531fed(0x2a6)](){const _0x4e507a=a36_0x531fed;console[_0x4e507a(0x255)]('📊\x20Calculating\x20payout\x20statistics...');const _0x352516=await database_1[_0x4e507a(0x209)]['shop'][_0x4e507a(0x296)]({'_sum':{'balance':!![],'totalPaidOut':!![]},'where':{'status':_0x4e507a(0x2e8)}}),_0x528513=await this[_0x4e507a(0x27e)]({'page':0x1,'limit':0x3e8}),_0x2de8e7=await database_1[_0x4e507a(0x209)][_0x4e507a(0x2bf)][_0x4e507a(0x1ff)]({'where':{'status':_0x4e507a(0x2ff),'gateway':{'not':_0x4e507a(0x228)}}}),_0x74320c=new Date(),_0x3e18bd=new Date(_0x74320c[_0x4e507a(0x254)](),_0x74320c[_0x4e507a(0x2b3)](),0x1),_0x42ecea=new Date(_0x74320c[_0x4e507a(0x254)](),_0x74320c[_0x4e507a(0x2b3)]()+0x1,0x0,0x17,0x3b,0x3b,0x3e7),_0x4c9247=await database_1[_0x4e507a(0x209)][_0x4e507a(0x22d)][_0x4e507a(0x296)]({'_sum':{'amount':!![]},'where':{'createdAt':{'gte':_0x3e18bd,'lte':_0x42ecea},'status':_0x4e507a(0x207)}}),_0x12e710=_0x352516[_0x4e507a(0x274)][_0x4e507a(0x2bd)]||0x0,_0x24ac2b=_0x528513[_0x4e507a(0x316)]['totalAmountAfterCommissionUSDT'],_0x1f3bfd=_0x4c9247['_sum'][_0x4e507a(0x2ba)]||0x0,_0x40b1a9={'totalPayout':Math['round'](_0x12e710*0x64)/0x64,'awaitingPayout':Math[_0x4e507a(0x250)](_0x24ac2b*0x64)/0x64,'thisMonth':Math['round'](_0x1f3bfd*0x64)/0x64,'availableBalance':Math[_0x4e507a(0x250)](_0x24ac2b*0x64)/0x64,'totalPayments':_0x2de8e7};return console[_0x4e507a(0x255)](_0x4e507a(0x2af)),console['log']('\x20\x20\x20💰\x20Total\x20payout:\x20'+_0x40b1a9[_0x4e507a(0x2a7)]+'\x20USDT\x20(total\x20paid\x20to\x20merchants)'),console[_0x4e507a(0x255)](_0x4e507a(0x2b5)+_0x40b1a9[_0x4e507a(0x239)]+_0x4e507a(0x215)),console[_0x4e507a(0x255)](_0x4e507a(0x327)+_0x40b1a9[_0x4e507a(0x20e)]+_0x4e507a(0x1fd)),console[_0x4e507a(0x255)](_0x4e507a(0x292)+_0x40b1a9[_0x4e507a(0x225)]+_0x4e507a(0x1ed)),console[_0x4e507a(0x255)](_0x4e507a(0x247)+_0x40b1a9[_0x4e507a(0x32f)]+'\x20PAID\x20payments'),console[_0x4e507a(0x255)](_0x4e507a(0x1fe)+(_0x352516[_0x4e507a(0x274)][_0x4e507a(0x29b)]||0x0)[_0x4e507a(0x2ea)](0x2)+_0x4e507a(0x281)),console[_0x4e507a(0x255)](_0x4e507a(0x236)+((_0x352516['_sum']['balance']||0x0)-_0x24ac2b)['toFixed'](0x2)+_0x4e507a(0x1ed)),_0x40b1a9;}async[a36_0x531fed(0x24f)](_0x2d63eb,_0x117961){const _0x3d0a8f=a36_0x531fed;console[_0x3d0a8f(0x255)]('🔄\x20Updating\x20customer\x20data\x20for\x20payment\x20'+_0x2d63eb+':',_0x117961);const _0x436ae5=await database_1[_0x3d0a8f(0x209)]['payment'][_0x3d0a8f(0x2e6)]({'where':{'id':_0x2d63eb},'select':{'id':!![],'customerEmail':!![],'customerName':!![],'customerCountry':!![],'customerIp':!![],'customerUa':!![]}});if(!_0x436ae5)throw new Error(_0x3d0a8f(0x29a));const _0x4ca5ff={};_0x117961[_0x3d0a8f(0x21c)]!==undefined&&(_0x4ca5ff[_0x3d0a8f(0x21c)]=_0x117961['customerCountry']||null);_0x117961[_0x3d0a8f(0x279)]!==undefined&&(_0x4ca5ff[_0x3d0a8f(0x279)]=_0x117961[_0x3d0a8f(0x279)]||null);_0x117961[_0x3d0a8f(0x22c)]!==undefined&&(_0x4ca5ff[_0x3d0a8f(0x22c)]=_0x117961['customerUa']||null);const _0x3a6177=await database_1['default'][_0x3d0a8f(0x2bf)]['update']({'where':{'id':_0x2d63eb},'data':{..._0x4ca5ff,'updatedAt':new Date()},'select':{'id':!![],'customerEmail':!![],'customerName':!![],'customerCountry':!![],'customerIp':!![],'customerUa':!![],'updatedAt':!![]}});return console[_0x3d0a8f(0x255)](_0x3d0a8f(0x25e)+_0x2d63eb),console[_0x3d0a8f(0x255)](_0x3d0a8f(0x23e)+_0x436ae5[_0x3d0a8f(0x21c)]+_0x3d0a8f(0x234)+_0x3a6177['customerCountry']),console[_0x3d0a8f(0x255)](_0x3d0a8f(0x32d)+_0x436ae5[_0x3d0a8f(0x279)]+_0x3d0a8f(0x234)+_0x3a6177[_0x3d0a8f(0x279)]),console[_0x3d0a8f(0x255)](_0x3d0a8f(0x2ce)+(_0x436ae5[_0x3d0a8f(0x22c)]?_0x3d0a8f(0x2be):_0x3d0a8f(0x2b8))+_0x3d0a8f(0x234)+(_0x3a6177['customerUa']?_0x3d0a8f(0x2be):'not\x20set')),_0x3a6177;}async[a36_0x531fed(0x2fb)](_0x478e90){const _0x5a49e2=a36_0x531fed,_0x49c224=new Date();let _0x47dc25;switch(_0x478e90){case'7d':_0x47dc25=new Date(_0x49c224['getTime']()-0x7*0x18*0x3c*0x3c*0x3e8);break;case _0x5a49e2(0x2c4):_0x47dc25=new Date(_0x49c224[_0x5a49e2(0x2ef)]()-0x1e*0x18*0x3c*0x3c*0x3e8);break;case _0x5a49e2(0x1f2):_0x47dc25=new Date(_0x49c224[_0x5a49e2(0x2ef)]()-0x5a*0x18*0x3c*0x3c*0x3e8);break;case'all':const _0x409044=await database_1[_0x5a49e2(0x209)]['payment'][_0x5a49e2(0x22e)]({'where':{'gateway':{'not':_0x5a49e2(0x228)}},'orderBy':{'createdAt':_0x5a49e2(0x2de)},'select':{'createdAt':!![]}});_0x47dc25=_0x409044?_0x409044['createdAt']:new Date('2020-01-01'),console[_0x5a49e2(0x255)](_0x5a49e2(0x229)+_0x47dc25['toISOString']());break;default:_0x47dc25=new Date(_0x49c224[_0x5a49e2(0x2ef)]()-0x1e*0x18*0x3c*0x3c*0x3e8);}const [_0x3f13b2,_0x190921,_0x4e0d0e,_0x32d835,_0x3b4208,_0x2c6060,_0x5a89f0]=await Promise[_0x5a49e2(0x318)]([database_1[_0x5a49e2(0x209)][_0x5a49e2(0x240)][_0x5a49e2(0x1ff)](),database_1[_0x5a49e2(0x209)][_0x5a49e2(0x240)][_0x5a49e2(0x1ff)]({'where':{'status':_0x5a49e2(0x2e8)}}),database_1[_0x5a49e2(0x209)][_0x5a49e2(0x2bf)][_0x5a49e2(0x1ff)]({'where':{'createdAt':{'gte':_0x47dc25},'gateway':{'not':_0x5a49e2(0x228)}}}),database_1[_0x5a49e2(0x209)][_0x5a49e2(0x2bf)][_0x5a49e2(0x1ff)]({'where':{'status':'PAID','createdAt':{'gte':_0x47dc25},'gateway':{'not':'test_gateway'}}}),database_1[_0x5a49e2(0x209)][_0x5a49e2(0x2bf)][_0x5a49e2(0x315)]({'where':{'status':_0x5a49e2(0x2ff),'createdAt':{'gte':_0x47dc25},'gateway':{'not':_0x5a49e2(0x228)}},'select':{'amount':!![],'currency':!![]}}),database_1[_0x5a49e2(0x209)][_0x5a49e2(0x2bf)][_0x5a49e2(0x315)]({'where':{'gateway':{'not':_0x5a49e2(0x228)}},'take':0xa,'orderBy':{'createdAt':'desc'},'include':{'shop':{'select':{'name':!![],'username':!![]}}}}),database_1[_0x5a49e2(0x209)][_0x5a49e2(0x2bf)][_0x5a49e2(0x315)]({'where':{'createdAt':{'gte':_0x47dc25},'gateway':{'not':_0x5a49e2(0x228)}},'select':{'amount':!![],'currency':!![],'status':!![],'amountUSDT':!![],'createdAt':!![]}})]);let _0x41e4d3=0x0;for(const _0x34b1ed of _0x3b4208){const _0x342d31=await currencyService_1[_0x5a49e2(0x21a)][_0x5a49e2(0x2d1)](_0x34b1ed[_0x5a49e2(0x2ba)],_0x34b1ed['currency']);_0x41e4d3+=_0x342d31;}const _0x36bc90=this[_0x5a49e2(0x241)](_0x5a89f0,_0x47dc25,_0x49c224),_0x21111c=_0x4e0d0e>0x0?_0x32d835/_0x4e0d0e*0x64:0x0;return{'totalShops':_0x3f13b2,'activeShops':_0x190921,'totalPayments':_0x4e0d0e,'successfulPayments':_0x32d835,'totalRevenue':Math[_0x5a49e2(0x250)](_0x41e4d3*0x64)/0x64,'conversionRate':Math[_0x5a49e2(0x250)](_0x21111c*0x64)/0x64,'dailyRevenue':_0x36bc90[_0x5a49e2(0x311)],'dailyPayments':_0x36bc90['dailyPayments'],'recentPayments':_0x2c6060[_0x5a49e2(0x2eb)](_0x1575f4=>({'id':_0x1575f4['id'],'amount':_0x1575f4[_0x5a49e2(0x2ba)],'currency':_0x1575f4[_0x5a49e2(0x2f0)],'status':_0x1575f4[_0x5a49e2(0x25c)],'gateway':_0x1575f4[_0x5a49e2(0x27a)],'shop':_0x1575f4[_0x5a49e2(0x240)],'createdAt':_0x1575f4[_0x5a49e2(0x331)]}))};}async['getMerchantStatistics'](_0x3b6cf6){const _0x32d5b9=a36_0x531fed;console[_0x32d5b9(0x255)](_0x32d5b9(0x310),_0x3b6cf6);let _0x534ca8,_0x452bcd=new Date();if(_0x3b6cf6[_0x32d5b9(0x2e2)]==='custom'&&_0x3b6cf6[_0x32d5b9(0x2a4)]&&_0x3b6cf6[_0x32d5b9(0x29e)])_0x534ca8=new Date(_0x3b6cf6['dateFrom']),_0x452bcd=new Date(_0x3b6cf6[_0x32d5b9(0x29e)]);else{const _0x422e60=new Date();switch(_0x3b6cf6[_0x32d5b9(0x2e2)]){case _0x32d5b9(0x2d0):_0x534ca8=new Date(_0x422e60[_0x32d5b9(0x2ef)]()-0x7*0x18*0x3c*0x3c*0x3e8);break;case _0x32d5b9(0x284):_0x534ca8=new Date(_0x422e60[_0x32d5b9(0x2ef)]()-0x1e*0x18*0x3c*0x3c*0x3e8);break;case _0x32d5b9(0x23a):_0x534ca8=new Date(_0x422e60[_0x32d5b9(0x2ef)]()-0x16d*0x18*0x3c*0x3c*0x3e8);break;case'all':default:_0x534ca8=new Date(_0x32d5b9(0x269));break;}}console[_0x32d5b9(0x255)](_0x32d5b9(0x2dc)+_0x534ca8[_0x32d5b9(0x2f9)]()+'\x20to\x20'+_0x452bcd[_0x32d5b9(0x2f9)]());const _0x3104ce={'status':_0x32d5b9(0x2ff),'gateway':{'not':_0x32d5b9(0x228)},'paidAt':{'gte':_0x534ca8,'lte':_0x452bcd}};_0x3b6cf6[_0x32d5b9(0x20a)]&&(_0x3104ce[_0x32d5b9(0x20a)]=_0x3b6cf6['shopId']);const _0x39ad44=await database_1[_0x32d5b9(0x209)][_0x32d5b9(0x2bf)][_0x32d5b9(0x315)]({'where':_0x3104ce,'include':{'shop':{'select':{'id':!![],'name':!![],'username':!![],'gatewaySettings':!![]}}}});console[_0x32d5b9(0x255)]('💰\x20Found\x20'+_0x39ad44['length']+_0x32d5b9(0x275));const _0x490db6={'gateway':{'not':'test_gateway'},'createdAt':{'gte':_0x534ca8,'lte':_0x452bcd}};_0x3b6cf6['shopId']&&(_0x490db6[_0x32d5b9(0x20a)]=_0x3b6cf6[_0x32d5b9(0x20a)]);const _0x1ed1dc=await database_1[_0x32d5b9(0x209)][_0x32d5b9(0x2bf)][_0x32d5b9(0x1ff)]({'where':_0x490db6});console['log'](_0x32d5b9(0x2cf)+_0x1ed1dc+_0x32d5b9(0x270)+_0x39ad44[_0x32d5b9(0x2d7)]);let _0x4a0f5a=0x0,_0x39ed51=0x0,_0x51679b=0x0;const _0x1f5ec3={},_0x287e7c={},_0x5b3850={};for(const _0x5dba19 of _0x39ad44){try{const _0x29efe4=await currencyService_1[_0x32d5b9(0x21a)][_0x32d5b9(0x2d1)](_0x5dba19[_0x32d5b9(0x2ba)],_0x5dba19[_0x32d5b9(0x2f0)]);let _0x2d4144={};if(_0x5dba19['shop']['gatewaySettings'])try{_0x2d4144=JSON[_0x32d5b9(0x2d6)](_0x5dba19[_0x32d5b9(0x240)]['gatewaySettings']);}catch(_0x511d09){console[_0x32d5b9(0x20c)]('Error\x20parsing\x20gateway\x20settings\x20for\x20shop\x20'+_0x5dba19[_0x32d5b9(0x20a)]+':',_0x511d09);}let _0x29ae02={},_0x5c90d3=0xa;for(const [_0x888257,_0x3e9004]of Object['entries'](_0x2d4144)){if(_0x888257[_0x32d5b9(0x265)]()===_0x5dba19[_0x32d5b9(0x27a)][_0x32d5b9(0x265)]()){_0x29ae02=_0x3e9004,_0x5c90d3=_0x3e9004['commission']||0xa;break;}}let _0x36f5d3,_0x46c910;_0x5dba19['amountAfterGatewayCommissionUSDT']!==null&&_0x5dba19['amountAfterGatewayCommissionUSDT']!==undefined?(_0x36f5d3=_0x5dba19[_0x32d5b9(0x2a9)],_0x46c910=_0x29efe4-_0x36f5d3,console['log'](_0x32d5b9(0x325)+_0x36f5d3['toFixed'](0x6)+_0x32d5b9(0x2f1)+_0x5dba19['id'])):(_0x46c910=_0x29efe4*(_0x5c90d3/0x64),_0x36f5d3=_0x29efe4-_0x46c910,console[_0x32d5b9(0x255)](_0x32d5b9(0x288)+_0x5dba19['id']+':\x20'+_0x5c90d3+_0x32d5b9(0x303)+_0x29efe4['toFixed'](0x6)+_0x32d5b9(0x1ed)));_0x4a0f5a+=_0x29efe4,_0x39ed51+=_0x36f5d3,_0x51679b+=_0x46c910;!_0x1f5ec3[_0x5dba19['gateway']]&&(_0x1f5ec3[_0x5dba19[_0x32d5b9(0x27a)]]={'gateway':_0x5dba19[_0x32d5b9(0x27a)],'gatewayDisplayName':this[_0x32d5b9(0x32e)](_0x5dba19['gateway']),'paymentsCount':0x0,'turnoverUSDT':0x0,'commissionUSDT':0x0,'merchantEarningsUSDT':0x0,'totalCommissionRate':0x0});_0x1f5ec3[_0x5dba19['gateway']][_0x32d5b9(0x30c)]++,_0x1f5ec3[_0x5dba19['gateway']][_0x32d5b9(0x283)]+=_0x29efe4,_0x1f5ec3[_0x5dba19[_0x32d5b9(0x27a)]]['commissionUSDT']+=_0x46c910,_0x1f5ec3[_0x5dba19[_0x32d5b9(0x27a)]]['merchantEarningsUSDT']+=_0x36f5d3,_0x1f5ec3[_0x5dba19[_0x32d5b9(0x27a)]][_0x32d5b9(0x216)]+=_0x5c90d3;!_0x3b6cf6[_0x32d5b9(0x20a)]&&(!_0x287e7c[_0x5dba19['shopId']]&&(_0x287e7c[_0x5dba19[_0x32d5b9(0x20a)]]={'shopId':_0x5dba19[_0x32d5b9(0x20a)],'shopName':_0x5dba19[_0x32d5b9(0x240)][_0x32d5b9(0x2d2)],'shopUsername':_0x5dba19['shop'][_0x32d5b9(0x2c3)],'paymentsCount':0x0,'turnoverUSDT':0x0,'commissionUSDT':0x0,'merchantEarningsUSDT':0x0,'paidOutUSDT':0x0,'averageCheckUSDT':0x0}),_0x287e7c[_0x5dba19['shopId']][_0x32d5b9(0x30c)]++,_0x287e7c[_0x5dba19[_0x32d5b9(0x20a)]]['turnoverUSDT']+=_0x29efe4,_0x287e7c[_0x5dba19[_0x32d5b9(0x20a)]][_0x32d5b9(0x29f)]+=_0x46c910,_0x287e7c[_0x5dba19['shopId']][_0x32d5b9(0x21b)]+=_0x36f5d3);const _0x108db7=_0x5dba19[_0x32d5b9(0x267)][_0x32d5b9(0x2f9)]()[_0x32d5b9(0x24a)]('T')[0x0];!_0x5b3850[_0x108db7]&&(_0x5b3850[_0x108db7]={'date':_0x108db7,'turnover':0x0,'merchantEarnings':0x0,'gatewayEarnings':0x0,'paymentsCount':0x0}),_0x5b3850[_0x108db7][_0x32d5b9(0x210)]+=_0x29efe4,_0x5b3850[_0x108db7]['merchantEarnings']+=_0x36f5d3,_0x5b3850[_0x108db7][_0x32d5b9(0x31e)]+=_0x46c910,_0x5b3850[_0x108db7][_0x32d5b9(0x30c)]++;}catch(_0x542f07){console[_0x32d5b9(0x20c)]('Error\x20processing\x20payment\x20'+_0x5dba19['id']+':',_0x542f07);}}Object[_0x32d5b9(0x2d5)](_0x1f5ec3)['forEach'](_0x42e2ba=>{const _0x3eaa66=_0x32d5b9;_0x42e2ba[_0x3eaa66(0x23b)]=_0x42e2ba['paymentsCount']>0x0?_0x42e2ba[_0x3eaa66(0x216)]/_0x42e2ba['paymentsCount']:0x0,delete _0x42e2ba[_0x3eaa66(0x216)];}),Object['values'](_0x287e7c)[_0x32d5b9(0x219)](_0x1d3b66=>{const _0x3042cc=_0x32d5b9;_0x1d3b66[_0x3042cc(0x2b9)]=_0x1d3b66[_0x3042cc(0x30c)]>0x0?_0x1d3b66[_0x3042cc(0x283)]/_0x1d3b66[_0x3042cc(0x30c)]:0x0;});let _0x2f79ff=0x0,_0x1b00a1=0x0;if(_0x3b6cf6[_0x32d5b9(0x20a)]){const _0x323aa5=await database_1['default']['payout'][_0x32d5b9(0x315)]({'where':{'shopId':_0x3b6cf6[_0x32d5b9(0x20a)],'status':'COMPLETED','createdAt':{'gte':_0x534ca8,'lte':_0x452bcd}},'select':{'amount':!![]}});_0x2f79ff=_0x323aa5[_0x32d5b9(0x25a)]((_0x4f0ab4,_0xc0d865)=>_0x4f0ab4+_0xc0d865['amount'],0x0);const _0x34ea69=await database_1[_0x32d5b9(0x209)][_0x32d5b9(0x22d)][_0x32d5b9(0x315)]({'where':{'shopId':_0x3b6cf6[_0x32d5b9(0x20a)],'status':_0x32d5b9(0x256),'createdAt':{'gte':_0x534ca8,'lte':_0x452bcd}},'select':{'amount':!![]}});_0x1b00a1=_0x34ea69[_0x32d5b9(0x25a)]((_0x58dc0a,_0x5166c7)=>_0x58dc0a+_0x5166c7['amount'],0x0);}const _0x4c64bd=_0x1ed1dc,_0x640309=_0x39ad44[_0x32d5b9(0x2d7)],_0x150b20=_0x640309>0x0?_0x4a0f5a/_0x640309:0x0,_0x1b794e=_0x4c64bd>0x0?Math['round'](_0x640309/_0x4c64bd*0x2710)/0x64:0x0,_0x3afb54=Math['ceil']((_0x452bcd[_0x32d5b9(0x2ef)]()-_0x534ca8[_0x32d5b9(0x2ef)]())/(0x3e8*0x3c*0x3c*0x18)),_0x53349a={'totalTurnover':Math[_0x32d5b9(0x250)](_0x4a0f5a*0x64)/0x64,'merchantEarnings':Math[_0x32d5b9(0x250)](_0x39ed51*0x64)/0x64,'gatewayEarnings':Math['round'](_0x51679b*0x64)/0x64,'totalPaidOut':Math[_0x32d5b9(0x250)](_0x2f79ff*0x64)/0x64,'pendingPayout':Math[_0x32d5b9(0x250)](_0x1b00a1*0x64)/0x64,'averageCheck':Math['round'](_0x150b20*0x64)/0x64,'totalPayments':_0x4c64bd,'successfulPayments':_0x640309,'conversionRate':_0x1b794e,'gatewayBreakdown':Object[_0x32d5b9(0x2d5)](_0x1f5ec3)['map'](_0x5339db=>({..._0x5339db,'turnoverUSDT':Math[_0x32d5b9(0x250)](_0x5339db['turnoverUSDT']*0x64)/0x64,'commissionUSDT':Math[_0x32d5b9(0x250)](_0x5339db[_0x32d5b9(0x29f)]*0x64)/0x64,'merchantEarningsUSDT':Math[_0x32d5b9(0x250)](_0x5339db[_0x32d5b9(0x21b)]*0x64)/0x64,'averageCommissionRate':Math['round'](_0x5339db[_0x32d5b9(0x23b)]*0x64)/0x64})),'merchantBreakdown':_0x3b6cf6[_0x32d5b9(0x20a)]?undefined:Object[_0x32d5b9(0x2d5)](_0x287e7c)[_0x32d5b9(0x2eb)](_0x30dbae=>({..._0x30dbae,'turnoverUSDT':Math['round'](_0x30dbae[_0x32d5b9(0x283)]*0x64)/0x64,'commissionUSDT':Math[_0x32d5b9(0x250)](_0x30dbae['commissionUSDT']*0x64)/0x64,'merchantEarningsUSDT':Math[_0x32d5b9(0x250)](_0x30dbae[_0x32d5b9(0x21b)]*0x64)/0x64,'paidOutUSDT':Math[_0x32d5b9(0x250)](_0x30dbae[_0x32d5b9(0x227)]*0x64)/0x64,'averageCheckUSDT':Math[_0x32d5b9(0x250)](_0x30dbae[_0x32d5b9(0x2b9)]*0x64)/0x64})),'dailyData':Object[_0x32d5b9(0x2d5)](_0x5b3850)['map'](_0x455ff0=>({..._0x455ff0,'turnover':Math[_0x32d5b9(0x250)](_0x455ff0[_0x32d5b9(0x210)]*0x64)/0x64,'merchantEarnings':Math[_0x32d5b9(0x250)](_0x455ff0[_0x32d5b9(0x1fa)]*0x64)/0x64,'gatewayEarnings':Math['round'](_0x455ff0[_0x32d5b9(0x31e)]*0x64)/0x64}))[_0x32d5b9(0x2cd)]((_0x168e42,_0x24c7f9)=>_0x168e42[_0x32d5b9(0x273)][_0x32d5b9(0x21e)](_0x24c7f9[_0x32d5b9(0x273)])),'periodInfo':{'from':_0x534ca8,'to':_0x452bcd,'periodType':_0x3b6cf6[_0x32d5b9(0x2e2)]||_0x32d5b9(0x237),'daysCount':_0x3afb54}};return console[_0x32d5b9(0x255)](_0x32d5b9(0x1fc)),console[_0x32d5b9(0x255)](_0x32d5b9(0x1ec)+_0x53349a['totalTurnover']+_0x32d5b9(0x1ed)),console[_0x32d5b9(0x255)](_0x32d5b9(0x301)+_0x53349a[_0x32d5b9(0x1fa)]+_0x32d5b9(0x1ed)),console[_0x32d5b9(0x255)](_0x32d5b9(0x2f7)+_0x53349a['gatewayEarnings']+_0x32d5b9(0x1ed)),console[_0x32d5b9(0x255)](_0x32d5b9(0x212)+_0x53349a[_0x32d5b9(0x2bd)]+_0x32d5b9(0x1ed)),console[_0x32d5b9(0x255)](_0x32d5b9(0x320)+_0x53349a[_0x32d5b9(0x26c)]+_0x32d5b9(0x1ed)),console['log'](_0x32d5b9(0x208)+_0x53349a[_0x32d5b9(0x32f)]),_0x53349a;}async[a36_0x531fed(0x22f)](){const _0x4d0b23=a36_0x531fed;console['log'](_0x4d0b23(0x297));const _0x496e9a=await database_1[_0x4d0b23(0x209)][_0x4d0b23(0x240)]['findMany']({'where':{'status':'ACTIVE'},'select':{'id':!![],'username':!![],'name':!![]},'orderBy':{'name':'asc'}});return console[_0x4d0b23(0x255)](_0x4d0b23(0x32b)+_0x496e9a[_0x4d0b23(0x2d7)]+_0x4d0b23(0x26d)),_0x496e9a[_0x4d0b23(0x2eb)](_0xacbe79=>({'id':_0xacbe79['id'],'username':_0xacbe79[_0x4d0b23(0x2c3)],'name':_0xacbe79[_0x4d0b23(0x2d2)]}));}[a36_0x531fed(0x32e)](_0x168745){const _0x2a968d=a36_0x531fed,_0x9f4d3d={'test_gateway':_0x2a968d(0x302),'plisio':_0x2a968d(0x211),'rapyd':'Rapyd','noda':'Noda','cointopay':'CoinToPay','cointopay2':'Open\x20Banking\x202','klyme_eu':'KLYME\x20EU','klyme_gb':_0x2a968d(0x2b2),'klyme_de':_0x2a968d(0x245),'mastercard':_0x2a968d(0x28e)};return _0x9f4d3d[_0x168745]||_0x168745;}['getGatewayInternalName'](_0x2eb8ce){const _0x24278f=a36_0x531fed,_0x4066fe={'Test\x20Gateway':_0x24278f(0x228),'Plisio':_0x24278f(0x2c5),'Rapyd':_0x24278f(0x222),'Noda':_0x24278f(0x24c),'CoinToPay':_0x24278f(0x264),'CoinToPay2':'cointopay2','KLYME\x20EU':_0x24278f(0x23f),'KLYME\x20GB':'klyme_gb','KLYME\x20DE':'klyme_de','MasterCard':_0x24278f(0x2bb)};return _0x4066fe[_0x2eb8ce]||_0x2eb8ce[_0x24278f(0x265)]();}async['getMerchantsAwaitingPayout'](_0x3d3777){const _0x451ad4=a36_0x531fed,{page:_0x1e3ff4,limit:_0x98f265,minAmount:_0x1110d3,search:_0x5947f3}=_0x3d3777,_0x4fb084=(_0x1e3ff4-0x1)*_0x98f265;console['log']('📊\x20Getting\x20merchants\x20awaiting\x20payout\x20with\x20filters:',_0x3d3777);const _0x20743e={'balance':{'gt':0x0},'status':'ACTIVE'};_0x1110d3&&(_0x20743e[_0x451ad4(0x29b)][_0x451ad4(0x25d)]=_0x1110d3);_0x5947f3&&(_0x20743e['OR']=[{'name':{'contains':_0x5947f3,'mode':_0x451ad4(0x1f1)}},{'username':{'contains':_0x5947f3,'mode':'insensitive'}}]);const [_0x1d2f76,_0x55bbff]=await Promise[_0x451ad4(0x318)]([database_1[_0x451ad4(0x209)][_0x451ad4(0x240)][_0x451ad4(0x315)]({'where':_0x20743e,'skip':_0x4fb084,'take':_0x98f265,'orderBy':{'balance':'desc'},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'balance':!![],'totalPaidOut':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'gatewaySettings':!![],'createdAt':!![]}}),database_1[_0x451ad4(0x209)]['shop'][_0x451ad4(0x1ff)]({'where':_0x20743e})]);console[_0x451ad4(0x255)]('💰\x20Found\x20'+_0x1d2f76[_0x451ad4(0x2d7)]+_0x451ad4(0x30b));const _0x2f50a9=await Promise[_0x451ad4(0x318)](_0x1d2f76[_0x451ad4(0x2eb)](async _0x24986e=>{const _0xfedd30=_0x451ad4,[_0x3baeba,_0x42b2d1,_0x5d6b08]=await Promise[_0xfedd30(0x318)]([database_1[_0xfedd30(0x209)][_0xfedd30(0x2bf)]['count']({'where':{'shopId':_0x24986e['id'],'status':'PAID','gateway':{'not':_0xfedd30(0x228)}}}),database_1[_0xfedd30(0x209)][_0xfedd30(0x2bf)][_0xfedd30(0x22e)]({'where':{'shopId':_0x24986e['id'],'status':_0xfedd30(0x2ff),'gateway':{'not':_0xfedd30(0x228)}},'orderBy':{'paidAt':_0xfedd30(0x2de)},'select':{'paidAt':!![]}}),database_1[_0xfedd30(0x209)]['payment']['groupBy']({'by':['gateway'],'where':{'shopId':_0x24986e['id'],'status':_0xfedd30(0x2ff),'gateway':{'not':'test_gateway'}},'_count':{'id':!![]},'_sum':{'amountUSDT':!![]}})]),_0x365d25=new Date(),_0x4ac55b=new Date(_0x365d25[_0xfedd30(0x254)](),_0x365d25[_0xfedd30(0x2b3)](),0x1),_0x5e9ee7=new Date(_0x365d25[_0xfedd30(0x254)](),_0x365d25[_0xfedd30(0x2b3)]()+0x1,0x0,0x17,0x3b,0x3b,0x3e7),[_0x1df23c,_0x530c7a]=await Promise[_0xfedd30(0x318)]([database_1[_0xfedd30(0x209)]['payout']['aggregate']({'_sum':{'amount':!![]},'where':{'shopId':_0x24986e['id'],'status':_0xfedd30(0x207)}}),database_1[_0xfedd30(0x209)]['payout'][_0xfedd30(0x296)]({'_sum':{'amount':!![]},'where':{'shopId':_0x24986e['id'],'status':_0xfedd30(0x207),'createdAt':{'gte':_0x4ac55b,'lte':_0x5e9ee7}}})]),_0x5e0d52=_0x1df23c['_sum'][_0xfedd30(0x2ba)]||0x0,_0x5527c2=_0x530c7a[_0xfedd30(0x274)]['amount']||0x0,_0x545a06=await Promise[_0xfedd30(0x318)](_0x5d6b08[_0xfedd30(0x2eb)](async _0x3b053a=>{const _0x32b12c=_0xfedd30;let _0x47b767=0xa;if(_0x24986e[_0x32b12c(0x246)])try{const _0x164437=JSON[_0x32b12c(0x2d6)](_0x24986e[_0x32b12c(0x246)]);for(const [_0x45ea02,_0x38346e]of Object[_0x32b12c(0x286)](_0x164437)){if(_0x45ea02['toLowerCase']()===_0x3b053a['gateway'][_0x32b12c(0x265)]()){_0x47b767=_0x38346e[_0x32b12c(0x249)]||0xa,console[_0x32b12c(0x255)](_0x32b12c(0x2c7)+_0x3b053a[_0x32b12c(0x27a)]+_0x32b12c(0x295)+_0x24986e['id']+':\x20commission\x20=\x20'+_0x47b767+'%');break;}}}catch(_0x1c2bdb){console[_0x32b12c(0x20c)](_0x32b12c(0x218)+_0x24986e['id']+':',_0x1c2bdb);}const _0x475bb3=_0x3b053a[_0x32b12c(0x274)]?.['amountUSDT']||0x0,_0x41e033=_0x475bb3*(0x1-_0x47b767/0x64);return{'gateway':_0x3b053a['gateway'],'count':_0x3b053a[_0x32b12c(0x293)]?.['id']||0x0,'amountUSDT':Math['round'](_0x475bb3*0x64)/0x64,'amountAfterCommissionUSDT':Math[_0x32b12c(0x250)](_0x41e033*0x64)/0x64,'commission':_0x47b767};})),_0x44e1f4=_0x545a06['reduce']((_0x14aabe,_0x143129)=>_0x14aabe+_0x143129[_0xfedd30(0x277)],0x0),_0x2be8a8=_0x24986e[_0xfedd30(0x29b)];return console[_0xfedd30(0x255)](_0xfedd30(0x233)+_0x24986e[_0xfedd30(0x2c3)]+':'),console['log']('\x20\x20\x20�\x20Total\x20payments\x20turnover:\x20'+_0x44e1f4[_0xfedd30(0x2ea)](0x2)+_0xfedd30(0x28d)),console[_0xfedd30(0x255)](_0xfedd30(0x2d3)+_0x545a06[_0xfedd30(0x25a)]((_0x7d6fa3,_0x1685eb)=>_0x7d6fa3+_0x1685eb[_0xfedd30(0x260)],0x0)[_0xfedd30(0x2ea)](0x2)+'\x20USDT\x20(theoretical\x20net)'),console[_0xfedd30(0x255)](_0xfedd30(0x278)+_0x2be8a8[_0xfedd30(0x2ea)](0x2)+'\x20USDT\x20(after\x20payouts)'),{'id':_0x24986e['id'],'fullName':_0x24986e[_0xfedd30(0x2d2)],'username':_0x24986e['username'],'telegramId':_0x24986e[_0xfedd30(0x252)],'merchantUrl':_0x24986e[_0xfedd30(0x204)],'wallets':{'usdtPolygonWallet':_0x24986e[_0xfedd30(0x2a0)],'usdtTrcWallet':_0x24986e[_0xfedd30(0x30f)],'usdtErcWallet':_0x24986e[_0xfedd30(0x31a)],'usdcPolygonWallet':_0x24986e['usdcPolygonWallet']},'totalAmountUSDT':Math[_0xfedd30(0x250)](_0x44e1f4*0x64)/0x64,'totalAmountAfterCommissionUSDT':Math['round'](_0x2be8a8*0x64)/0x64,'totalPayout':Math[_0xfedd30(0x250)](_0x5e0d52*0x64)/0x64,'thisMonth':Math[_0xfedd30(0x250)](_0x5527c2*0x64)/0x64,'paymentsCount':_0x3baeba,'oldestPaymentDate':_0x42b2d1?.[_0xfedd30(0x267)]||_0x24986e[_0xfedd30(0x331)],'gatewayBreakdown':_0x545a06};})),_0x1e21f0=_0x2f50a9[_0x451ad4(0x25a)]((_0x1c7fd0,_0xe0e206)=>_0x1c7fd0+_0xe0e206[_0x451ad4(0x2bc)],0x0),_0x155735=_0x2f50a9['reduce']((_0x3dd14e,_0x3c0415)=>_0x3dd14e+_0x3c0415[_0x451ad4(0x217)],0x0),_0x4b87f3=_0x2f50a9[_0x451ad4(0x25a)]((_0x331415,_0x4175d2)=>_0x331415+_0x4175d2[_0x451ad4(0x2a7)],0x0),_0xd7c3bf=_0x2f50a9[_0x451ad4(0x25a)]((_0x4a7231,_0x150c08)=>_0x4a7231+_0x150c08['thisMonth'],0x0);return console[_0x451ad4(0x255)](_0x451ad4(0x282)+_0x55bbff+'\x20merchants'),console[_0x451ad4(0x255)](_0x451ad4(0x2e1)+Math[_0x451ad4(0x250)](_0x1e21f0*0x64)/0x64+_0x451ad4(0x28d)),console[_0x451ad4(0x255)](_0x451ad4(0x319)+Math[_0x451ad4(0x250)](_0x155735*0x64)/0x64+_0x451ad4(0x26e)),console[_0x451ad4(0x255)](_0x451ad4(0x2ad)+Math[_0x451ad4(0x250)](_0x4b87f3*0x64)/0x64+'\x20USDT'),console['log'](_0x451ad4(0x29c)+Math[_0x451ad4(0x250)](_0xd7c3bf*0x64)/0x64+_0x451ad4(0x1ed)),{'merchants':_0x2f50a9,'pagination':{'page':_0x1e3ff4,'limit':_0x98f265,'total':_0x55bbff,'totalPages':Math[_0x451ad4(0x2dd)](_0x55bbff/_0x98f265)},'summary':{'totalMerchants':_0x55bbff,'totalAmountUSDT':Math[_0x451ad4(0x250)](_0x1e21f0*0x64)/0x64,'totalAmountAfterCommissionUSDT':Math[_0x451ad4(0x250)](_0x155735*0x64)/0x64,'totalPayout':Math[_0x451ad4(0x250)](_0x4b87f3*0x64)/0x64,'thisMonth':Math[_0x451ad4(0x250)](_0xd7c3bf*0x64)/0x64}};}async[a36_0x531fed(0x1ee)](_0x5cb711){const _0x11432e=a36_0x531fed,{shopId:_0x298090,amount:_0x84c751,network:_0x4b7052,wallet:_0x367e5d,notes:_0x15aa84,txid:_0xf24095,periodFrom:_0x1d2a78,periodTo:_0x34d2f5}=_0x5cb711,_0x37654f=await database_1[_0x11432e(0x209)][_0x11432e(0x27b)](async _0x1efbff=>{const _0x55ac09=_0x11432e,_0x509f02=await _0x1efbff['shop']['findUnique']({'where':{'id':_0x298090},'select':{'id':!![],'name':!![],'username':!![],'balance':!![],'totalPaidOut':!![]}});if(!_0x509f02)throw new Error(_0x55ac09(0x291));console[_0x55ac09(0x255)](_0x55ac09(0x2ca)+_0x509f02[_0x55ac09(0x2c3)]+':'),console['log']('\x20\x20\x20Current\x20balance:\x20'+_0x509f02[_0x55ac09(0x29b)][_0x55ac09(0x2ea)](0x6)+'\x20USDT'),console[_0x55ac09(0x255)](_0x55ac09(0x287)+_0x84c751[_0x55ac09(0x2ea)](0x6)+_0x55ac09(0x1ed)),console[_0x55ac09(0x255)]('\x20\x20\x20Current\x20total\x20paid\x20out:\x20'+_0x509f02[_0x55ac09(0x2bd)][_0x55ac09(0x2ea)](0x6)+_0x55ac09(0x1ed));if(_0xf24095)console[_0x55ac09(0x255)](_0x55ac09(0x1f6)+_0xf24095);if(_0x509f02[_0x55ac09(0x29b)]<_0x84c751)throw new Error(_0x55ac09(0x290)+_0x509f02['balance'][_0x55ac09(0x2ea)](0x6)+_0x55ac09(0x271)+_0x84c751[_0x55ac09(0x2ea)](0x6)+_0x55ac09(0x1ed));let _0x472c8f=_0x367e5d;if(!_0x472c8f){const _0x3b99fa=await _0x1efbff[_0x55ac09(0x240)]['findUnique']({'where':{'id':_0x298090},'select':{'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![]}});if(_0x3b99fa)switch(_0x4b7052){case'polygon':_0x472c8f=_0x3b99fa[_0x55ac09(0x2a0)]||undefined;break;case _0x55ac09(0x1f4):_0x472c8f=_0x3b99fa[_0x55ac09(0x30f)]||undefined;break;case _0x55ac09(0x317):_0x472c8f=_0x3b99fa['usdtErcWallet']||undefined;break;case _0x55ac09(0x285):_0x472c8f=_0x3b99fa[_0x55ac09(0x2a8)]||undefined;break;}}console[_0x55ac09(0x255)]('💳\x20Payout\x20wallet\x20for\x20'+_0x4b7052+':\x20'+(_0x472c8f||_0x55ac09(0x2b6)));const _0x970b1c=await _0x1efbff[_0x55ac09(0x22d)][_0x55ac09(0x2f2)]({'data':{'shopId':_0x298090,'amount':_0x84c751,'network':_0x4b7052,'status':_0x55ac09(0x207),'txid':_0xf24095,'notes':_0x15aa84,'periodFrom':_0x1d2a78?new Date(_0x1d2a78):null,'periodTo':_0x34d2f5?new Date(_0x34d2f5):null,'createdAt':new Date(),'paidAt':new Date()}}),_0x1367cd=_0x509f02[_0x55ac09(0x29b)]-_0x84c751,_0x40602c=_0x509f02[_0x55ac09(0x2bd)]+_0x84c751;return await _0x1efbff[_0x55ac09(0x240)][_0x55ac09(0x28c)]({'where':{'id':_0x298090},'data':{'balance':_0x1367cd,'totalPaidOut':_0x40602c}}),console[_0x55ac09(0x255)](_0x55ac09(0x2f4)+_0x509f02[_0x55ac09(0x2c3)]+'\x20balance\x20updated:'),console[_0x55ac09(0x255)](_0x55ac09(0x248)+_0x509f02[_0x55ac09(0x29b)][_0x55ac09(0x2ea)](0x6)+_0x55ac09(0x234)+_0x1367cd['toFixed'](0x6)+_0x55ac09(0x20f)+_0x84c751['toFixed'](0x6)+')'),console['log'](_0x55ac09(0x261)+_0x509f02[_0x55ac09(0x2bd)][_0x55ac09(0x2ea)](0x6)+'\x20->\x20'+_0x40602c['toFixed'](0x6)+_0x55ac09(0x1f9)+_0x84c751['toFixed'](0x6)+')'),{'payout':_0x970b1c,'shop':_0x509f02};});return console[_0x11432e(0x255)](_0x11432e(0x1f0)+_0x37654f['payout']['id']+_0x11432e(0x295)+_0x37654f['shop'][_0x11432e(0x2c3)]+'\x20('+_0x84c751+_0x11432e(0x1ef)),{'id':_0x37654f[_0x11432e(0x22d)]['id'],'shopId':_0x37654f[_0x11432e(0x22d)][_0x11432e(0x20a)],'shopName':_0x37654f[_0x11432e(0x240)][_0x11432e(0x2d2)],'shopUsername':_0x37654f[_0x11432e(0x240)][_0x11432e(0x2c3)],'amount':_0x37654f[_0x11432e(0x22d)][_0x11432e(0x2ba)],'network':_0x37654f[_0x11432e(0x22d)][_0x11432e(0x20d)],'status':_0x37654f[_0x11432e(0x22d)][_0x11432e(0x25c)],'txid':_0x37654f[_0x11432e(0x22d)][_0x11432e(0x2b7)],'notes':_0x37654f['payout'][_0x11432e(0x298)],'periodFrom':_0x37654f[_0x11432e(0x22d)]['periodFrom'],'periodTo':_0x37654f[_0x11432e(0x22d)][_0x11432e(0x203)],'createdAt':_0x37654f[_0x11432e(0x22d)]['createdAt'],'paidAt':_0x37654f['payout'][_0x11432e(0x267)]};}async[a36_0x531fed(0x1f7)](_0x4f3b59){const _0x139780=a36_0x531fed,{page:_0x3a93f4,limit:_0x15f676,shopId:_0x17e265,network:_0x47b6f7,dateFrom:_0x31874d,dateTo:_0x390b37,search:_0x91d5bf}=_0x4f3b59,_0x3f0f5f=(_0x3a93f4-0x1)*_0x15f676,_0x459909={};_0x17e265&&(_0x459909[_0x139780(0x20a)]=_0x17e265);_0x47b6f7&&(_0x459909[_0x139780(0x20d)]=_0x47b6f7);(_0x31874d||_0x390b37)&&(_0x459909[_0x139780(0x331)]={},_0x31874d&&(_0x459909[_0x139780(0x331)][_0x139780(0x25d)]=new Date(_0x31874d)),_0x390b37&&(_0x459909[_0x139780(0x331)][_0x139780(0x330)]=new Date(_0x390b37)));_0x91d5bf&&(_0x459909['OR']=[{'shop':{'name':{'contains':_0x91d5bf,'mode':_0x139780(0x1f1)}}},{'shop':{'username':{'contains':_0x91d5bf,'mode':_0x139780(0x1f1)}}},{'notes':{'contains':_0x91d5bf,'mode':_0x139780(0x1f1)}}]);const [_0x45da2d,_0x5e3f43]=await Promise[_0x139780(0x318)]([database_1[_0x139780(0x209)][_0x139780(0x22d)][_0x139780(0x315)]({'where':_0x459909,'skip':_0x3f0f5f,'take':_0x15f676,'orderBy':{'createdAt':_0x139780(0x257)},'select':{'id':!![],'shopId':!![],'amount':!![],'network':!![],'status':!![],'txid':!![],'notes':!![],'periodFrom':!![],'periodTo':!![],'createdAt':!![],'paidAt':!![],'shop':{'select':{'name':!![],'username':!![]}}}}),database_1[_0x139780(0x209)][_0x139780(0x22d)][_0x139780(0x1ff)]({'where':_0x459909})]);return{'payouts':_0x45da2d[_0x139780(0x2eb)](_0x1bc4b9=>({'id':_0x1bc4b9['id'],'shopId':_0x1bc4b9[_0x139780(0x20a)],'shopName':_0x1bc4b9[_0x139780(0x240)][_0x139780(0x2d2)],'shopUsername':_0x1bc4b9[_0x139780(0x240)][_0x139780(0x2c3)],'amount':_0x1bc4b9[_0x139780(0x2ba)],'network':_0x1bc4b9[_0x139780(0x20d)],'status':_0x1bc4b9[_0x139780(0x25c)],'txid':_0x1bc4b9['txid'],'notes':_0x1bc4b9[_0x139780(0x298)],'periodFrom':_0x1bc4b9[_0x139780(0x2f3)],'periodTo':_0x1bc4b9[_0x139780(0x203)],'createdAt':_0x1bc4b9[_0x139780(0x331)],'paidAt':_0x1bc4b9[_0x139780(0x267)]})),'pagination':{'page':_0x3a93f4,'limit':_0x15f676,'total':_0x5e3f43,'totalPages':Math[_0x139780(0x2dd)](_0x5e3f43/_0x15f676)}};}async[a36_0x531fed(0x309)](_0x2803f9){const _0x4a255c=a36_0x531fed,_0x550762=await database_1[_0x4a255c(0x209)]['payout'][_0x4a255c(0x2e6)]({'where':{'id':_0x2803f9},'include':{'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x550762)return null;return{'id':_0x550762['id'],'shopId':_0x550762[_0x4a255c(0x20a)],'shopName':_0x550762[_0x4a255c(0x240)]['name'],'shopUsername':_0x550762[_0x4a255c(0x240)][_0x4a255c(0x2c3)],'amount':_0x550762[_0x4a255c(0x2ba)],'network':_0x550762[_0x4a255c(0x20d)],'status':_0x550762[_0x4a255c(0x25c)],'txid':_0x550762['txid'],'notes':_0x550762[_0x4a255c(0x298)],'periodFrom':_0x550762[_0x4a255c(0x2f3)],'periodTo':_0x550762[_0x4a255c(0x203)],'createdAt':_0x550762[_0x4a255c(0x331)],'paidAt':_0x550762[_0x4a255c(0x267)]};}async['deletePayout'](_0x551188){const _0x388263=a36_0x531fed;await database_1[_0x388263(0x209)][_0x388263(0x22d)][_0x388263(0x299)]({'where':{'id':_0x551188}});}async[a36_0x531fed(0x2a3)](_0x37da12){const _0x1240af=a36_0x531fed,{page:_0x25731f,limit:_0x84a3fa,status:_0x774f69,gateway:_0x3f2222,shopId:_0x3a0804,dateFrom:_0x3aee48,dateTo:_0xd31ab0,search:_0x3b38a2,currency:_0x47516e,sortBy:_0x32e106,sortOrder:_0x580dcc}=_0x37da12,_0x1bd139=(_0x25731f-0x1)*_0x84a3fa;console[_0x1240af(0x255)](_0x1240af(0x307),_0x37da12);const _0x5d22ae=await database_1['default'][_0x1240af(0x2bf)][_0x1240af(0x266)]({'by':[_0x1240af(0x27a)],'_count':{'gateway':!![]}});console[_0x1240af(0x255)](_0x1240af(0x2e4),_0x5d22ae[_0x1240af(0x2eb)](_0x1ddfaa=>_0x1ddfaa[_0x1240af(0x27a)]+'\x20('+_0x1ddfaa[_0x1240af(0x293)][_0x1240af(0x27a)]+_0x1240af(0x2e5)));if(_0x3f2222){const _0x33fb09=_0x5d22ae[_0x1240af(0x25f)](_0x2d6a10=>_0x2d6a10[_0x1240af(0x27a)]['toLowerCase']()===_0x3f2222['toLowerCase']());!_0x33fb09&&_0x3f2222[_0x1240af(0x265)]()!==_0x1240af(0x228)&&console['log'](_0x1240af(0x243)+_0x3f2222+_0x1240af(0x28a)+_0x5d22ae['map'](_0x4562d7=>_0x4562d7['gateway'])['join'](',\x20'));}const _0x31202d={};_0x774f69&&(_0x31202d['status']=_0x774f69[_0x1240af(0x20b)]());if(!_0x3f2222)_0x31202d['gateway']={'not':_0x1240af(0x228)};else{if(_0x3f2222&&(_0x3f2222['toLowerCase']()===_0x1240af(0x228)||_0x3f2222===_0x1240af(0x2c8)))_0x31202d['gateway']='test_gateway';else{let _0x1322c2=_0x3f2222;const _0x4e248c=(0x0,gateway_1[_0x1240af(0x2f8)])(_0x3f2222);if(_0x4e248c)_0x1322c2=_0x4e248c,console[_0x1240af(0x255)](_0x1240af(0x258)+_0x3f2222+_0x1240af(0x2b0)+_0x1322c2+'\x27');else{const _0x4c379e=(0x0,gateway_1[_0x1240af(0x231)])(_0x3f2222);if(_0x4c379e){const _0x15e7b3=(0x0,gateway_1[_0x1240af(0x2f8)])(_0x4c379e);_0x15e7b3&&(_0x1322c2=_0x15e7b3,console[_0x1240af(0x255)](_0x1240af(0x23d)+_0x3f2222+_0x1240af(0x2ec)+_0x4c379e+_0x1240af(0x29d)+_0x1322c2+'\x27'));}else console['log'](_0x1240af(0x253)+_0x3f2222+_0x1240af(0x313));}const _0x379fc3=await database_1[_0x1240af(0x209)][_0x1240af(0x2bf)]['count']({'where':{'gateway':_0x1322c2[_0x1240af(0x265)]()},'take':0x1});_0x379fc3===0x0?(console[_0x1240af(0x255)]('⚠️\x20Gateway\x20\x27'+_0x1322c2+_0x1240af(0x31c)+_0x3f2222+_0x1240af(0x308)),_0x31202d[_0x1240af(0x27a)]=_0x1240af(0x1f5)):(_0x31202d['gateway']=_0x1322c2[_0x1240af(0x265)](),console[_0x1240af(0x255)](_0x1240af(0x2c0)+_0x1322c2+_0x1240af(0x31c)+_0x3f2222+'\x27)'));}}console[_0x1240af(0x255)](_0x1240af(0x2e9),_0x31202d[_0x1240af(0x27a)]);_0x3a0804&&(_0x31202d[_0x1240af(0x20a)]=_0x3a0804);_0x47516e&&(_0x31202d[_0x1240af(0x2f0)]=_0x47516e['toUpperCase'](),console['log'](_0x1240af(0x244)+_0x47516e['toUpperCase']()));(_0x3aee48||_0xd31ab0)&&(_0x31202d[_0x1240af(0x331)]={},_0x3aee48&&(_0x31202d[_0x1240af(0x331)][_0x1240af(0x25d)]=new Date(_0x3aee48)),_0xd31ab0&&(_0x31202d['createdAt']['lte']=new Date(_0xd31ab0)));_0x3b38a2&&(_0x31202d['OR']=[{'id':{'contains':_0x3b38a2,'mode':_0x1240af(0x1f1)}},{'orderId':{'contains':_0x3b38a2,'mode':_0x1240af(0x1f1)}},{'gatewayOrderId':{'contains':_0x3b38a2,'mode':'insensitive'}},{'customerEmail':{'contains':_0x3b38a2,'mode':'insensitive'}},{'shop':{'name':{'contains':_0x3b38a2,'mode':_0x1240af(0x1f1)}}},{'shop':{'username':{'contains':_0x3b38a2,'mode':'insensitive'}}}]);console['log'](_0x1240af(0x1fb),JSON[_0x1240af(0x2df)](_0x31202d,null,0x2));let _0x4f8ca0={'createdAt':_0x1240af(0x257)};if(_0x32e106){const _0x1c7e96=['amount',_0x1240af(0x331),_0x1240af(0x314),'status',_0x1240af(0x27a),_0x1240af(0x2f0)],_0x1b4cbe=[_0x1240af(0x2de),_0x1240af(0x257)];if(_0x1c7e96[_0x1240af(0x2ae)](_0x32e106)){const _0x50bda1=_0x1b4cbe[_0x1240af(0x2ae)](_0x580dcc)?_0x580dcc:_0x1240af(0x257);_0x4f8ca0={[_0x32e106]:_0x50bda1},console['log']('📊\x20Sorting\x20payments\x20by\x20'+_0x32e106+_0x1240af(0x205)+_0x50bda1+_0x1240af(0x2ee));}}const [_0x397619,_0x7fdb7d]=await Promise[_0x1240af(0x318)]([database_1['default']['payment']['findMany']({'where':_0x31202d,'skip':_0x1bd139,'take':_0x84a3fa,'orderBy':_0x4f8ca0,'include':{'shop':{'select':{'name':!![],'username':!![]}}}}),database_1['default'][_0x1240af(0x2bf)][_0x1240af(0x1ff)]({'where':_0x31202d})]);return{'payments':_0x397619,'pagination':{'page':_0x25731f,'limit':_0x84a3fa,'total':_0x7fdb7d,'totalPages':Math['ceil'](_0x7fdb7d/_0x84a3fa)}};}async[a36_0x531fed(0x31d)](_0x33831f){const _0x5f9abc=a36_0x531fed,_0x4ca4a5=await database_1[_0x5f9abc(0x209)][_0x5f9abc(0x2bf)]['findUnique']({'where':{'id':_0x33831f},'include':{'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x4ca4a5)return null;return{'id':_0x4ca4a5['id'],'shopId':_0x4ca4a5[_0x5f9abc(0x20a)],'gateway':_0x4ca4a5[_0x5f9abc(0x27a)],'amount':_0x4ca4a5[_0x5f9abc(0x2ba)],'currency':_0x4ca4a5['currency'],'status':_0x4ca4a5['status'],'orderId':_0x4ca4a5[_0x5f9abc(0x23c)],'gatewayOrderId':_0x4ca4a5['gatewayOrderId'],'customerEmail':_0x4ca4a5[_0x5f9abc(0x24b)],'customerName':_0x4ca4a5[_0x5f9abc(0x2f5)],'customerCountry':_0x4ca4a5[_0x5f9abc(0x21c)],'customerIp':_0x4ca4a5[_0x5f9abc(0x279)],'customerUa':_0x4ca4a5[_0x5f9abc(0x22c)],'failureMessage':_0x4ca4a5[_0x5f9abc(0x28f)],'externalPaymentUrl':_0x4ca4a5[_0x5f9abc(0x21f)],'successUrl':_0x4ca4a5[_0x5f9abc(0x328)],'failUrl':_0x4ca4a5[_0x5f9abc(0x201)],'pendingUrl':_0x4ca4a5['pendingUrl'],'whiteUrl':_0x4ca4a5['whiteUrl'],'createdAt':_0x4ca4a5[_0x5f9abc(0x331)],'updatedAt':_0x4ca4a5[_0x5f9abc(0x314)],'shop':_0x4ca4a5[_0x5f9abc(0x240)]};}async[a36_0x531fed(0x2c9)](_0x3b1c8c,_0x46b8c9,_0x35d1e1,_0x501f9d){const _0x236432=a36_0x531fed,_0x178ea5=await database_1[_0x236432(0x209)][_0x236432(0x27b)](async _0x2d204c=>{const _0xcc856=_0x236432,_0x37fe3a=await _0x2d204c['payment'][_0xcc856(0x2e6)]({'where':{'id':_0x3b1c8c},'include':{'shop':{'select':{'id':!![],'name':!![],'username':!![],'balance':!![]}}}});if(!_0x37fe3a)throw new Error(_0xcc856(0x29a));const _0x4c3080=_0x37fe3a[_0xcc856(0x25c)],_0x4cfa9f=_0x46b8c9[_0xcc856(0x20b)]();console['log'](_0xcc856(0x221)+_0x3b1c8c+_0xcc856(0x289)+_0x4c3080+_0xcc856(0x234)+_0x4cfa9f),console[_0xcc856(0x255)]('💰\x20Current\x20shop\x20balance:\x20'+_0x37fe3a[_0xcc856(0x240)][_0xcc856(0x29b)]+_0xcc856(0x1ed));const _0x91d705={'status':_0x4cfa9f,'updatedAt':new Date(),'statusChangedBy':_0xcc856(0x235),'statusChangedAt':new Date()};_0x35d1e1&&(_0x91d705[_0xcc856(0x200)]=_0x35d1e1);_0x4cfa9f===_0xcc856(0x2fd)&&_0x501f9d&&(_0x91d705[_0xcc856(0x2fc)]=_0x501f9d);let _0x535849=0x0,_0x5f19e9=_0x37fe3a['shop'][_0xcc856(0x29b)];if(_0x4cfa9f==='PAID'&&_0x4c3080!==_0xcc856(0x2ff)){_0x91d705['paidAt']=new Date();const _0x1f6cf2=await currencyService_1[_0xcc856(0x21a)]['convertToUSDT'](_0x37fe3a[_0xcc856(0x2ba)],_0x37fe3a[_0xcc856(0x2f0)]);_0x91d705[_0xcc856(0x277)]=_0x1f6cf2;let _0x253c13=0xa;const _0x38e517=await _0x2d204c[_0xcc856(0x240)][_0xcc856(0x2e6)]({'where':{'id':_0x37fe3a[_0xcc856(0x20a)]},'select':{'gatewaySettings':!![]}});if(_0x38e517?.['gatewaySettings'])try{const _0x575c56=JSON[_0xcc856(0x2d6)](_0x38e517[_0xcc856(0x246)]);for(const [_0x3b9b4a,_0x3d3970]of Object[_0xcc856(0x286)](_0x575c56)){if(_0x3b9b4a[_0xcc856(0x265)]()===_0x37fe3a[_0xcc856(0x27a)][_0xcc856(0x265)]()){_0x253c13=_0x3d3970[_0xcc856(0x249)]||0xa;break;}}}catch(_0x1d2868){console[_0xcc856(0x20c)]('Error\x20parsing\x20gateway\x20settings\x20for\x20payment\x20'+_0x3b1c8c+':',_0x1d2868);}let _0x581dad;_0x37fe3a[_0xcc856(0x2a9)]!==null&&_0x37fe3a[_0xcc856(0x2a9)]!==undefined?(_0x581dad=_0x37fe3a[_0xcc856(0x2a9)],console[_0xcc856(0x255)](_0xcc856(0x31f)+_0x581dad['toFixed'](0x6)+_0xcc856(0x2f1)+_0x3b1c8c)):(_0x581dad=_0x1f6cf2*(0x1-_0x253c13/0x64),console[_0xcc856(0x255)](_0xcc856(0x294)+_0x3b1c8c+':\x20'+_0x253c13+_0xcc856(0x303)+_0x1f6cf2['toFixed'](0x6)+_0xcc856(0x1ed)),_0x91d705[_0xcc856(0x2a9)]=_0x581dad),_0x535849=_0x581dad,_0x5f19e9+=_0x581dad,console[_0xcc856(0x255)](_0xcc856(0x31b)+_0x3b1c8c+_0xcc856(0x202)),console[_0xcc856(0x255)]('\x20\x20\x20Full\x20amount:\x20'+_0x1f6cf2[_0xcc856(0x2ea)](0x6)+'\x20USDT'),console[_0xcc856(0x255)]('\x20\x20\x20Gateway:\x20'+_0x37fe3a['gateway']+_0xcc856(0x323)+_0x253c13+'%'),console[_0xcc856(0x255)]('\x20\x20\x20Merchant\x20gets:\x20'+_0x581dad[_0xcc856(0x2ea)](0x6)+'\x20USDT\x20(after\x20'+_0x253c13+_0xcc856(0x2c1)),console[_0xcc856(0x255)](_0xcc856(0x322)+_0x581dad[_0xcc856(0x2ea)](0x6)+'\x20USDT');}else{if(_0x4c3080===_0xcc856(0x2ff)&&_0x4cfa9f!==_0xcc856(0x2ff)){if(_0x37fe3a['amountUSDT']){let _0x45a3dd=0xa;const _0x412e0c=await _0x2d204c[_0xcc856(0x240)][_0xcc856(0x2e6)]({'where':{'id':_0x37fe3a[_0xcc856(0x20a)]},'select':{'gatewaySettings':!![]}});if(_0x412e0c?.['gatewaySettings'])try{const _0x36e0d3=JSON[_0xcc856(0x2d6)](_0x412e0c[_0xcc856(0x246)]);for(const [_0x3e246b,_0x5605f3]of Object['entries'](_0x36e0d3)){if(_0x3e246b[_0xcc856(0x265)]()===_0x37fe3a['gateway'][_0xcc856(0x265)]()){_0x45a3dd=_0x5605f3[_0xcc856(0x249)]||0xa;break;}}}catch(_0x70c16d){console['error'](_0xcc856(0x2b1)+_0x3b1c8c+':',_0x70c16d);}const _0x161c41=_0x37fe3a[_0xcc856(0x277)]*(0x1-_0x45a3dd/0x64);_0x535849=-_0x161c41,_0x5f19e9-=_0x161c41,_0x91d705['amountUSDT']=null,_0x91d705['amountAfterGatewayCommissionUSDT']=null,console[_0xcc856(0x255)]('💰\x20Payment\x20'+_0x3b1c8c+_0xcc856(0x224)),console['log'](_0xcc856(0x22b)+_0x37fe3a[_0xcc856(0x277)]['toFixed'](0x6)+_0xcc856(0x1ed)),console[_0xcc856(0x255)]('\x20\x20\x20Gateway:\x20'+_0x37fe3a['gateway']+',\x20Commission:\x20'+_0x45a3dd+'%'),console[_0xcc856(0x255)]('\x20\x20\x20Merchant\x20loses:\x20'+_0x161c41[_0xcc856(0x2ea)](0x6)+_0xcc856(0x232)+_0x45a3dd+_0xcc856(0x2c1)),console['log'](_0xcc856(0x1f8)+_0x161c41[_0xcc856(0x2ea)](0x6)+_0xcc856(0x1ed));}}}_0x4cfa9f===_0xcc856(0x2fd)&&(_0x4c3080==='PAID'&&_0x37fe3a[_0xcc856(0x277)]&&console[_0xcc856(0x255)]('💸\x20CHARGEBACK:\x20Merchant\x20amount\x20already\x20deducted\x20from\x20balance'),_0x501f9d&&_0x501f9d>0x0&&(_0x535849-=_0x501f9d,_0x5f19e9-=_0x501f9d,console[_0xcc856(0x255)](_0xcc856(0x2f6)+_0x501f9d[_0xcc856(0x2ea)](0x6)+_0xcc856(0x30a))));_0x4cfa9f===_0xcc856(0x2a1)&&_0x4c3080===_0xcc856(0x2ff)&&console[_0xcc856(0x255)](_0xcc856(0x2e7));const _0x3af1ca=await _0x2d204c['payment'][_0xcc856(0x28c)]({'where':{'id':_0x3b1c8c},'data':_0x91d705,'include':{'shop':{'select':{'name':!![],'username':!![]}}}});return _0x535849!==0x0&&(await _0x2d204c[_0xcc856(0x240)]['update']({'where':{'id':_0x37fe3a[_0xcc856(0x20a)]},'data':{'balance':_0x5f19e9}}),console[_0xcc856(0x255)](_0xcc856(0x2f4)+_0x37fe3a[_0xcc856(0x20a)]+'\x20balance\x20updated:\x20'+_0x37fe3a[_0xcc856(0x240)][_0xcc856(0x29b)]['toFixed'](0x6)+_0xcc856(0x234)+_0x5f19e9[_0xcc856(0x2ea)](0x6)+_0xcc856(0x220)+(_0x535849>0x0?'+':'')+_0x535849[_0xcc856(0x2ea)](0x6)+')')),_0x3af1ca;});return{'id':_0x178ea5['id'],'shopId':_0x178ea5[_0x236432(0x20a)],'gateway':_0x178ea5[_0x236432(0x27a)],'amount':_0x178ea5['amount'],'currency':_0x178ea5[_0x236432(0x2f0)],'status':_0x178ea5[_0x236432(0x25c)],'orderId':_0x178ea5['orderId'],'gatewayOrderId':_0x178ea5['gatewayOrderId'],'customerEmail':_0x178ea5[_0x236432(0x24b)],'customerName':_0x178ea5[_0x236432(0x2f5)],'customerCountry':_0x178ea5[_0x236432(0x21c)],'customerIp':_0x178ea5[_0x236432(0x279)],'customerUa':_0x178ea5[_0x236432(0x22c)],'failureMessage':_0x178ea5[_0x236432(0x28f)],'adminNotes':_0x178ea5[_0x236432(0x200)],'chargebackAmount':_0x178ea5[_0x236432(0x2fc)],'statusChangedBy':_0x178ea5[_0x236432(0x2cb)],'statusChangedAt':_0x178ea5['statusChangedAt'],'createdAt':_0x178ea5[_0x236432(0x331)],'updatedAt':_0x178ea5['updatedAt'],'shop':_0x178ea5['shop']};}async[a36_0x531fed(0x206)](_0x5d733d,_0x273ce1){const _0x1dc44f=a36_0x531fed,_0x189e6d=Math[_0x1dc44f(0x214)]()['toString'](0x24)[_0x1dc44f(0x226)](0x2,0x9);console[_0x1dc44f(0x255)](_0x1dc44f(0x321)+_0x189e6d+_0x1dc44f(0x2db)+_0x5d733d);const _0x22245c={..._0x273ce1};_0x273ce1[_0x1dc44f(0x25b)]&&_0x273ce1[_0x1dc44f(0x25b)][_0x1dc44f(0x30e)]()!==''?(console[_0x1dc44f(0x255)](_0x1dc44f(0x32a)+_0x189e6d+_0x1dc44f(0x276)+_0x5d733d),_0x22245c['password']=await bcryptjs_1[_0x1dc44f(0x209)][_0x1dc44f(0x238)](_0x273ce1[_0x1dc44f(0x25b)],0xc)):(console['log'](_0x1dc44f(0x32a)+_0x189e6d+']\x20Password\x20not\x20provided\x20or\x20empty,\x20skipping\x20password\x20update'),delete _0x22245c[_0x1dc44f(0x25b)]);_0x273ce1[_0x1dc44f(0x26b)]&&(_0x22245c[_0x1dc44f(0x2d2)]=_0x273ce1['fullName'],delete _0x22245c[_0x1dc44f(0x26b)]);_0x273ce1[_0x1dc44f(0x312)]&&(_0x22245c[_0x1dc44f(0x252)]=_0x273ce1[_0x1dc44f(0x312)],delete _0x22245c['telegramId']);_0x273ce1[_0x1dc44f(0x324)]&&(_0x22245c[_0x1dc44f(0x204)]=_0x273ce1['merchantUrl'],delete _0x22245c[_0x1dc44f(0x324)]);if(_0x273ce1['gateways']){const _0x32825a=_0x273ce1[_0x1dc44f(0x2a5)][_0x1dc44f(0x2eb)](_0x2f3e6d=>this['getGatewayInternalName'](_0x2f3e6d));console[_0x1dc44f(0x255)](_0x1dc44f(0x230),_0x273ce1[_0x1dc44f(0x2a5)],'->',_0x32825a),_0x22245c[_0x1dc44f(0x1f3)]=JSON[_0x1dc44f(0x2df)](_0x32825a),delete _0x22245c[_0x1dc44f(0x2a5)];}_0x273ce1[_0x1dc44f(0x246)]&&(console[_0x1dc44f(0x255)](_0x1dc44f(0x300)+_0x189e6d+_0x1dc44f(0x305),_0x273ce1['gatewaySettings']),_0x22245c[_0x1dc44f(0x246)]=JSON['stringify'](_0x273ce1[_0x1dc44f(0x246)]),console[_0x1dc44f(0x255)]('🔧\x20['+_0x189e6d+_0x1dc44f(0x2b4),_0x22245c[_0x1dc44f(0x246)]));_0x273ce1[_0x1dc44f(0x2c2)]&&(_0x273ce1[_0x1dc44f(0x2c2)][_0x1dc44f(0x2a0)]!==undefined&&(_0x22245c[_0x1dc44f(0x2a0)]=_0x273ce1[_0x1dc44f(0x2c2)][_0x1dc44f(0x2a0)]||null),_0x273ce1[_0x1dc44f(0x2c2)]['usdtTrcWallet']!==undefined&&(_0x22245c[_0x1dc44f(0x30f)]=_0x273ce1['wallets'][_0x1dc44f(0x30f)]||null),_0x273ce1[_0x1dc44f(0x2c2)][_0x1dc44f(0x31a)]!==undefined&&(_0x22245c[_0x1dc44f(0x31a)]=_0x273ce1[_0x1dc44f(0x2c2)][_0x1dc44f(0x31a)]||null),_0x273ce1[_0x1dc44f(0x2c2)][_0x1dc44f(0x2a8)]!==undefined&&(_0x22245c['usdcPolygonWallet']=_0x273ce1['wallets']['usdcPolygonWallet']||null),delete _0x22245c[_0x1dc44f(0x2c2)]);const _0x1a33e3=await database_1[_0x1dc44f(0x209)]['shop'][_0x1dc44f(0x28c)]({'where':{'id':_0x5d733d},'data':_0x22245c,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return console['log'](_0x1dc44f(0x263)+_0x189e6d+_0x1dc44f(0x223),_0x1a33e3[_0x1dc44f(0x246)]),{'id':_0x1a33e3['id'],'fullName':_0x1a33e3['name'],'username':_0x1a33e3['username'],'telegramId':_0x1a33e3[_0x1dc44f(0x252)],'merchantUrl':_0x1a33e3['shopUrl'],'gateways':_0x1a33e3[_0x1dc44f(0x1f3)]?JSON['parse'](_0x1a33e3['paymentGateways']):null,'gatewaySettings':_0x1a33e3[_0x1dc44f(0x246)]?JSON[_0x1dc44f(0x2d6)](_0x1a33e3[_0x1dc44f(0x246)]):null,'publicKey':_0x1a33e3['publicKey'],'wallets':{'usdtPolygonWallet':_0x1a33e3['usdtPolygonWallet'],'usdtTrcWallet':_0x1a33e3[_0x1dc44f(0x30f)],'usdtErcWallet':_0x1a33e3[_0x1dc44f(0x31a)],'usdcPolygonWallet':_0x1a33e3['usdcPolygonWallet']},'status':_0x1a33e3['status'],'createdAt':_0x1a33e3[_0x1dc44f(0x331)]};}async['suspendUser'](_0xdb3522){const _0x1b799c=a36_0x531fed,_0x4b07d6=await database_1['default']['shop'][_0x1b799c(0x28c)]({'where':{'id':_0xdb3522},'data':{'status':_0x1b799c(0x304)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x4b07d6['id'],'fullName':_0x4b07d6[_0x1b799c(0x2d2)],'username':_0x4b07d6[_0x1b799c(0x2c3)],'telegramId':_0x4b07d6['telegram'],'merchantUrl':_0x4b07d6[_0x1b799c(0x204)],'gateways':_0x4b07d6[_0x1b799c(0x1f3)]?JSON[_0x1b799c(0x2d6)](_0x4b07d6[_0x1b799c(0x1f3)]):null,'gatewaySettings':_0x4b07d6[_0x1b799c(0x246)]?JSON[_0x1b799c(0x2d6)](_0x4b07d6[_0x1b799c(0x246)]):null,'publicKey':_0x4b07d6[_0x1b799c(0x2a2)],'wallets':{'usdtPolygonWallet':_0x4b07d6[_0x1b799c(0x2a0)],'usdtTrcWallet':_0x4b07d6[_0x1b799c(0x30f)],'usdtErcWallet':_0x4b07d6['usdtErcWallet'],'usdcPolygonWallet':_0x4b07d6[_0x1b799c(0x2a8)]},'status':_0x4b07d6[_0x1b799c(0x25c)],'createdAt':_0x4b07d6[_0x1b799c(0x331)]};}async[a36_0x531fed(0x262)](_0x4ce77e){const _0x2b958f=a36_0x531fed,_0x414792=await database_1[_0x2b958f(0x209)][_0x2b958f(0x240)][_0x2b958f(0x28c)]({'where':{'id':_0x4ce77e},'data':{'status':_0x2b958f(0x2e8)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x414792['id'],'fullName':_0x414792[_0x2b958f(0x2d2)],'username':_0x414792[_0x2b958f(0x2c3)],'telegramId':_0x414792[_0x2b958f(0x252)],'merchantUrl':_0x414792[_0x2b958f(0x204)],'gateways':_0x414792['paymentGateways']?JSON[_0x2b958f(0x2d6)](_0x414792[_0x2b958f(0x1f3)]):null,'gatewaySettings':_0x414792['gatewaySettings']?JSON[_0x2b958f(0x2d6)](_0x414792[_0x2b958f(0x246)]):null,'publicKey':_0x414792['publicKey'],'wallets':{'usdtPolygonWallet':_0x414792[_0x2b958f(0x2a0)],'usdtTrcWallet':_0x414792[_0x2b958f(0x30f)],'usdtErcWallet':_0x414792[_0x2b958f(0x31a)],'usdcPolygonWallet':_0x414792[_0x2b958f(0x2a8)]},'status':_0x414792[_0x2b958f(0x25c)],'createdAt':_0x414792[_0x2b958f(0x331)]};}async[a36_0x531fed(0x2e3)](_0x22758a){const _0x339822=a36_0x531fed,{page:_0x205a76,limit:_0x3a3eba,status:_0x468c05}=_0x22758a,_0x43d18c=(_0x205a76-0x1)*_0x3a3eba,_0x15bca6={};_0x468c05&&(_0x15bca6[_0x339822(0x25c)]=_0x468c05[_0x339822(0x20b)]());const [_0x293a3d,_0x237a20]=await Promise['all']([database_1[_0x339822(0x209)]['shop'][_0x339822(0x315)]({'where':_0x15bca6,'skip':_0x43d18c,'take':_0x3a3eba,'orderBy':{'createdAt':'desc'},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}}),database_1['default'][_0x339822(0x240)][_0x339822(0x1ff)]({'where':_0x15bca6})]);return{'users':_0x293a3d[_0x339822(0x2eb)](_0x2c5999=>{const _0x59c924=_0x339822,_0x44d6ab=_0x2c5999[_0x59c924(0x1f3)]?JSON['parse'](_0x2c5999[_0x59c924(0x1f3)]):null,_0xd0d78c=_0x44d6ab?_0x44d6ab[_0x59c924(0x2eb)](_0x59fdb1=>this['getGatewayDisplayName'](_0x59fdb1)):null;return{'id':_0x2c5999['id'],'fullName':_0x2c5999['name'],'username':_0x2c5999['username'],'telegramId':_0x2c5999[_0x59c924(0x252)],'merchantUrl':_0x2c5999[_0x59c924(0x204)],'gateways':_0xd0d78c,'gatewaySettings':_0x2c5999[_0x59c924(0x246)]?JSON[_0x59c924(0x2d6)](_0x2c5999[_0x59c924(0x246)]):null,'publicKey':_0x2c5999[_0x59c924(0x2a2)],'wallets':{'usdtPolygonWallet':_0x2c5999[_0x59c924(0x2a0)],'usdtTrcWallet':_0x2c5999[_0x59c924(0x30f)],'usdtErcWallet':_0x2c5999[_0x59c924(0x31a)],'usdcPolygonWallet':_0x2c5999[_0x59c924(0x2a8)]},'status':_0x2c5999[_0x59c924(0x25c)],'createdAt':_0x2c5999[_0x59c924(0x331)]};}),'pagination':{'page':_0x205a76,'limit':_0x3a3eba,'total':_0x237a20,'totalPages':Math[_0x339822(0x2dd)](_0x237a20/_0x3a3eba)}};}async[a36_0x531fed(0x2cc)](_0x1e6239){const _0x1b473f=a36_0x531fed,_0x45a189=await database_1[_0x1b473f(0x209)]['shop']['findUnique']({'where':{'id':_0x1e6239},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x45a189)return null;const _0x18ace9=_0x45a189[_0x1b473f(0x1f3)]?JSON['parse'](_0x45a189[_0x1b473f(0x1f3)]):null,_0x5bb9fd=_0x18ace9?_0x18ace9[_0x1b473f(0x2eb)](_0x40fe96=>this[_0x1b473f(0x32e)](_0x40fe96)):null;return _0x18ace9&&_0x5bb9fd&&console['log'](_0x1b473f(0x251),_0x18ace9,'->',_0x5bb9fd),{'id':_0x45a189['id'],'fullName':_0x45a189[_0x1b473f(0x2d2)],'username':_0x45a189['username'],'telegramId':_0x45a189[_0x1b473f(0x252)],'merchantUrl':_0x45a189[_0x1b473f(0x204)],'gateways':_0x5bb9fd,'gatewaySettings':_0x45a189['gatewaySettings']?JSON['parse'](_0x45a189[_0x1b473f(0x246)]):null,'publicKey':_0x45a189[_0x1b473f(0x2a2)],'wallets':{'usdtPolygonWallet':_0x45a189[_0x1b473f(0x2a0)],'usdtTrcWallet':_0x45a189[_0x1b473f(0x30f)],'usdtErcWallet':_0x45a189['usdtErcWallet'],'usdcPolygonWallet':_0x45a189['usdcPolygonWallet']},'status':_0x45a189[_0x1b473f(0x25c)],'createdAt':_0x45a189[_0x1b473f(0x331)]};}async[a36_0x531fed(0x2d8)](_0x242de9){const _0xc130f8=a36_0x531fed,{fullName:_0x4b819a,username:_0x547cfc,password:_0x1c6266,telegramId:_0x2a3459,merchantUrl:_0xf79d79,gateways:_0x105d33,gatewaySettings:_0x2ec59e,wallets:_0x3f2e99}=_0x242de9,_0x3a29c0=await database_1[_0xc130f8(0x209)][_0xc130f8(0x240)][_0xc130f8(0x2e6)]({'where':{'username':_0x547cfc}});if(_0x3a29c0)throw new Error('Username\x20already\x20exists');if(_0x2a3459){const _0x52d0ad=await database_1['default'][_0xc130f8(0x240)][_0xc130f8(0x2e6)]({'where':{'telegram':_0x2a3459}});if(_0x52d0ad)throw new Error(_0xc130f8(0x2fa));}const _0x50b3c3=await bcryptjs_1['default']['hash'](_0x1c6266,0xc),_0x2fef75=_0xc130f8(0x242)+crypto_1[_0xc130f8(0x209)]['randomBytes'](0x20)[_0xc130f8(0x326)]('hex'),_0x1f7cc5=_0xc130f8(0x2ab)+crypto_1['default'][_0xc130f8(0x26a)](0x20)[_0xc130f8(0x326)](_0xc130f8(0x329)),_0x556f94=_0x105d33?_0x105d33[_0xc130f8(0x2eb)](_0x131c85=>this['getGatewayInternalName'](_0x131c85)):null;_0x105d33&&_0x556f94&&console['log']('🔄\x20Gateway\x20mapping\x20(create):',_0x105d33,'->',_0x556f94);const _0x1b604f=await database_1[_0xc130f8(0x209)][_0xc130f8(0x240)][_0xc130f8(0x2f2)]({'data':{'name':_0x4b819a,'username':_0x547cfc,'password':_0x50b3c3,'telegram':_0x2a3459,'shopUrl':_0xf79d79,'paymentGateways':_0x556f94?JSON['stringify'](_0x556f94):null,'gatewaySettings':_0x2ec59e?JSON[_0xc130f8(0x2df)](_0x2ec59e):null,'usdtPolygonWallet':_0x3f2e99?.[_0xc130f8(0x2a0)]||null,'usdtTrcWallet':_0x3f2e99?.[_0xc130f8(0x30f)]||null,'usdtErcWallet':_0x3f2e99?.[_0xc130f8(0x31a)]||null,'usdcPolygonWallet':_0x3f2e99?.['usdcPolygonWallet']||null,'publicKey':_0x2fef75,'secretKey':_0x1f7cc5,'status':'ACTIVE'},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x1b604f['id'],'fullName':_0x1b604f['name'],'username':_0x1b604f[_0xc130f8(0x2c3)],'telegramId':_0x1b604f[_0xc130f8(0x252)],'merchantUrl':_0x1b604f['shopUrl'],'gateways':_0x1b604f[_0xc130f8(0x1f3)]?JSON['parse'](_0x1b604f[_0xc130f8(0x1f3)]):null,'gatewaySettings':_0x1b604f[_0xc130f8(0x246)]?JSON['parse'](_0x1b604f[_0xc130f8(0x246)]):null,'publicKey':_0x1b604f[_0xc130f8(0x2a2)],'wallets':{'usdtPolygonWallet':_0x1b604f[_0xc130f8(0x2a0)],'usdtTrcWallet':_0x1b604f[_0xc130f8(0x30f)],'usdtErcWallet':_0x1b604f['usdtErcWallet'],'usdcPolygonWallet':_0x1b604f['usdcPolygonWallet']},'status':_0x1b604f[_0xc130f8(0x25c)],'createdAt':_0x1b604f[_0xc130f8(0x331)]};}async[a36_0x531fed(0x2aa)](_0x251487){const _0x233d61=a36_0x531fed;await database_1[_0x233d61(0x209)][_0x233d61(0x240)]['delete']({'where':{'id':_0x251487}});}[a36_0x531fed(0x241)](_0x4785a5,_0x34912c,_0x7c2630){const _0x2af49e=a36_0x531fed,_0x1b39ad=new Map(),_0x3e9f4b=new Date(_0x34912c);while(_0x3e9f4b<=_0x7c2630){const _0x1022c6=_0x3e9f4b[_0x2af49e(0x2f9)]()[_0x2af49e(0x24a)]('T')[0x0];_0x1b39ad[_0x2af49e(0x2be)](_0x1022c6,{'revenue':0x0,'count':0x0}),_0x3e9f4b['setDate'](_0x3e9f4b[_0x2af49e(0x28b)]()+0x1);}for(const _0x3f3c6a of _0x4785a5){const _0x2bff32=_0x3f3c6a[_0x2af49e(0x331)][_0x2af49e(0x2f9)]()[_0x2af49e(0x24a)]('T')[0x0],_0x26910e=_0x1b39ad['get'](_0x2bff32);_0x26910e&&(_0x26910e[_0x2af49e(0x1ff)]+=0x1,_0x3f3c6a['status']===_0x2af49e(0x2ff)&&(_0x3f3c6a[_0x2af49e(0x277)]?_0x26910e['revenue']+=_0x3f3c6a[_0x2af49e(0x277)]:console[_0x2af49e(0x255)](_0x2af49e(0x2e0)+_0x3f3c6a['id']+_0x2af49e(0x27c))));}const _0x3ae1d8=[],_0x2d8c84=[];for(const [_0x465180,_0x4ae785]of _0x1b39ad){_0x3ae1d8['push']({'date':_0x465180,'amount':Math['round'](_0x4ae785[_0x2af49e(0x2d4)]*0x64)/0x64}),_0x2d8c84[_0x2af49e(0x24d)]({'date':_0x465180,'count':_0x4ae785[_0x2af49e(0x1ff)]});}return{'dailyRevenue':_0x3ae1d8,'dailyPayments':_0x2d8c84};}}exports[a36_0x531fed(0x272)]=AdminService;