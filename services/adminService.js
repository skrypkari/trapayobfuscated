'use strict';const a36_0x4442c8=a36_0x2f26;(function(_0x8ce68,_0x33325d){const _0x5309d6=a36_0x2f26,_0x46be83=_0x8ce68();while(!![]){try{const _0x225f40=parseInt(_0x5309d6(0x2d8))/0x1+parseInt(_0x5309d6(0x22d))/0x2*(parseInt(_0x5309d6(0x248))/0x3)+parseInt(_0x5309d6(0x2ac))/0x4+parseInt(_0x5309d6(0x21a))/0x5+parseInt(_0x5309d6(0x1ca))/0x6+parseInt(_0x5309d6(0x27d))/0x7*(parseInt(_0x5309d6(0x1dd))/0x8)+-parseInt(_0x5309d6(0x1c4))/0x9;if(_0x225f40===_0x33325d)break;else _0x46be83['push'](_0x46be83['shift']());}catch(_0x5e4817){_0x46be83['push'](_0x46be83['shift']());}}}(a36_0x281a,0xaaf7c));function a36_0x281a(){const _0x5214d1=['\x20active\x20merchants\x20for\x20selection','orderId','usdtErcWallet','gatewayEarnings','balance','groupBy','__esModule','length','Shop\x20not\x20found','randomBytes','usdtTrcWallet','\x20->\x20','🔐\x20[','\x20\x20\x20🌍\x20Country:\x20','2998055IMWrfR','currency','\x27)\x20not\x20found\x20in\x20database,\x20returning\x20empty\x20result','noda','paidOutUSDT','paidAt','shop','toUpperCase','📊\x20Calculating\x20commission\x20manually\x20for\x20payment\x20','\x20\x20\x20Current\x20total\x20paid\x20out:\x20','hex','currencyService','Telegram\x20username\x20already\x20exists','suspendUser','log','Payment\x20not\x20found','count','findUnique','round','754642KCYuMi','name','stringify','getGatewayNameById','\x27\x20->\x20ID\x20\x27','commissionUSDT','availableBalance','amount','\x20USDT\x20(without\x20commission)','admin','totalPayout','\x20\x20\x20Subtracted\x20from\x20balance:\x20-','create','substr','📊\x20Calculating\x20payout\x20statistics...','desc','%\x20commission)','network','mastercard','dailyPayments','📊\x20Getting\x20payments\x20with\x20filters:','telegramId','cointopay2','\x20\x20\x20Merchant\x20gets:\x20','set','merchantEarningsUSDT','getTime','3UTmCog',']\x20Updating\x20password\x20for\x20user\x20','\x20\x20\x20⏳\x20Pending\x20payout:\x20','\x20payments)','gte','⚠️\x20Gateway\x20\x27','__importDefault','🎯\x20[','Error\x20parsing\x20gateway\x20settings\x20for\x20payment\x20','\x27\x20(from\x20\x27','KLYME\x20GB','includes','reduce','split','merchantEarnings','📊\x20Merchant\x20statistics\x20calculated:','SUSPENDED','deletePayout','totalCommissionRate','\x20\x20\x20📅\x20This\x20month:\x20','\x20\x20\x20🔍\x20Calculated\x20after\x20commission:\x20','periodTo','\x20status:\x20','test_gateway','getAllPayments','sk_','\x20no\x20longer\x20PAID:','wallets','setDate','forEach','🎯\x20updateUser\x20called\x20with\x20ID:\x20','hash','📊\x20Sorting\x20payments\x20by\x20','sort','klyme_de','🔄\x20REFUND:\x20Payment\x20amount\x20already\x20deducted\x20from\x20balance','payment','generateDailyStatistics','amountUSDT','createUser','join','\x20\x20\x20✅\x20Total\x20available\x20for\x20payout:\x20','merchantUrl','📅\x20Period\x20\x27all\x27:\x20Using\x20start\x20date\x20from\x20first\x20payment:\x20','awaitingPayout','notes','insensitive','KLYME\x20EU',',\x20Commission:\x20','📊\x20Gateway\x20filter\x20applied:','statusChangedAt','💸\x20CHARGEBACK\x20penalty:\x20-','\x27\x20->\x20name\x20\x27','280133PthRQO','✅\x20Using\x20gateway\x20filter:\x20\x27','📋\x20Found\x20','findMany','\x20USDT\x20(total\x20paid\x20to\x20merchants)','getGatewayDisplayName','trc20','pendingPayout','deleteUser','push','Username\x20already\x20exists','getPayoutById','\x20\x20\x20💰\x20Total\x20payments\x20turnover:\x20','\x27\x20as\x20is\x20(not\x20found\x20in\x20mappings)','✅\x20Payout\x20created:\x20','turnover','usdcPolygonWallet','findFirst','custom','customerUa','customerName','status','\x20\x20\x20Payout\x20amount:\x20','getAllPayouts','\x20\x20\x20💰\x20Total\x20turnover:\x20','entries','🔍\x20Using\x20gateway\x20\x27','\x20USDT\x20(+','totalAmountAfterCommissionUSDT','periodFrom','shopId','trim','updatePaymentStatus','AdminService','💰\x20Payment\x20','all','📊\x20Payout\x20statistics\x20calculated:','\x20USDT,\x20Requested:\x20','fullName','createPayout','averageCheckUSDT','Insufficient\x20balance.\x20Available:\x20','convertToUSDT','getMerchantsAwaitingPayout','\x20\x20\x20�\x20Total\x20paid\x20out:\x20','\x20became\x20PAID:','\x20\x20\x20Merchant\x20loses:\x20','50272IAcdDC','getPaymentById','not\x20set','\x20USDT\x20(gross\x20revenue)','_sum','default','averageCommissionRate','adminNotes','updatedAt','✅\x20Customer\x20data\x20updated\x20for\x20payment\x20','🔄\x20Gateway\x20mapping:','getPayoutStats','\x20\x20\x20�📊\x20Total\x20payments:\x20','💰\x20Shop\x20','\x20USDT','\x20in\x20','\x20\x20\x20⏳\x20Awaiting\x20payout:\x20','customerEmail','plisio','paymentsCount','\x20USDT\x20(','chargebackAmount','updateUser','💰\x20Current\x20shop\x20balance:\x20','🔧\x20[','\x20USDT\x20(with\x20commission\x20deducted)','ACTIVE','revenue','values','MasterCard','rapyd','turnoverUSDT','\x27\x20to\x20name\x20\x27','📊\x20Merchants\x20awaiting\x20payout:\x20','./currencyService','paymentGateways','\x20USDT)','\x20paid\x20payments\x20for\x20analysis','telegram','\x20USDT\x20(-','Open\x20Banking\x202','pk_','\x20for\x20shop\x20','gatewaySettings','968227SUTBdG','📋\x20Getting\x20merchants\x20selection\x20list...','NONEXISTENT_GATEWAY_FILTER','week','gateways','_count','totalPayments','usdtPolygonWallet','getSystemStatistics','period','toISOString','get','\x20\x20\x20Current\x20balance:\x20','⚠️\x20Payment\x20','0000','username','some','CoinToPay','failUrl','💰\x20[PAYOUT]\x20Gateway\x20','\x20\x20\x20👤\x20Merchant\x20earnings:\x20','gateway','localeCompare','\x27\x20not\x20found.\x20Available\x20gateways:\x20','asc','toFixed','2020-01-01','ceil','getFullYear','customerIp','date','\x20PAID\x20payments','klyme_eu','map','COMPLETED','totalAmountUSDT','shopUrl',']\x20User\x20updated,\x20gatewaySettings\x20from\x20DB:','gatewayOrderId','17918685cDJwAc','delete','%\x20from\x20','not\x20specified','publicKey','commission','2720334DuqEmS','📊\x20Getting\x20merchants\x20awaiting\x20payout\x20with\x20filters:','dateTo','30d','\x20USDT\x20(after\x20','activateUser','\x20merchants','💱\x20Currency\x20filter\x20applied:\x20','\x20\x20\x20💰\x20Total\x20payout:\x20','💰\x20Found\x20','payout','PENDING','Error\x20parsing\x20gateway\x20settings\x20for\x20shop\x20','crypto','\x20USDT\x20from\x20balance','getMerchantsSelection','dailyRevenue','\x20\x20\x20Gateway:\x20','thisMonth','56KPSBaB','\x20\x20\x20✅\x20Actual\x20available\x20balance:\x20','statusChangedBy','dateFrom','⚠️\x20Requested\x20gateway\x20\x27','update','\x20\x20\x20💸\x20Total\x20payouts\x20(all\x20time):\x20','📊\x20[ADMIN]\x20Using\x20saved\x20amountAfterGatewayCommissionUSDT:\x20','\x20balance\x20updated:','\x20\x20\x20🔍\x20Raw\x20balance\x20sum:\x20','klyme_gb','\x20USDT\x20for\x20payment\x20','password','getUserById','../types/gateway','erc20','\x20\x20\x20Full\x20amount:\x20','getMonth','\x20\x20\x20Transaction\x20hash:\x20','year','PAID','\x20\x20\x20🏪\x20Gateway\x20earnings:\x20','totalPaidOut',']\x20Gateway\x20settings\x20JSON\x20string:','toLowerCase','Noda','📊\x20Total\x20payments\x20(including\x20failed):\x20','txid','polygon_usdc','toString','amountAfterGatewayCommissionUSDT','\x20\x20\x20🖥️\x20User\x20Agent:\x20','\x20to\x20','failureMessage','createdAt',',\x20userId:\x20','\x20USDT\x20(same\x20as\x20awaiting)','CHARGEBACK','error','📊\x20Available\x20gateways\x20in\x20database:','\x20\x20\x20Total\x20paid\x20out:\x20','aggregate','parse','lte','customerCountry',':\x20commission\x20=\x20','\x20order'];a36_0x281a=function(){return _0x5214d1;};return a36_0x281a();}var __importDefault=this&&this[a36_0x4442c8(0x24e)]||function(_0x4867c4){const _0x291c63=a36_0x4442c8;return _0x4867c4&&_0x4867c4[_0x291c63(0x212)]?_0x4867c4:{'default':_0x4867c4};};Object['defineProperty'](exports,a36_0x4442c8(0x212),{'value':!![]}),exports[a36_0x4442c8(0x29e)]=void 0x0;const database_1=__importDefault(require('../config/database')),bcryptjs_1=__importDefault(require('bcryptjs')),crypto_1=__importDefault(require(a36_0x4442c8(0x1d7))),currencyService_1=require(a36_0x4442c8(0x2ce)),gateway_1=require(a36_0x4442c8(0x1eb));class AdminService{async[a36_0x4442c8(0x2b7)](){const _0x1d5826=a36_0x4442c8;console[_0x1d5826(0x228)](_0x1d5826(0x23b));const _0x2d7005=await database_1[_0x1d5826(0x2b1)][_0x1d5826(0x220)]['aggregate']({'_sum':{'balance':!![],'totalPaidOut':!![]},'where':{'status':_0x1d5826(0x2c6)}}),_0x4560ea=await this[_0x1d5826(0x2a8)]({'page':0x1,'limit':0x3e8}),_0x2d067e=await database_1[_0x1d5826(0x2b1)][_0x1d5826(0x26c)][_0x1d5826(0x22a)]({'where':{'status':_0x1d5826(0x1f1),'gateway':{'not':_0x1d5826(0x25f)}}}),_0x331b11=new Date(),_0x279468=new Date(_0x331b11[_0x1d5826(0x1b9)](),_0x331b11[_0x1d5826(0x1ee)](),0x1),_0x10f91b=new Date(_0x331b11[_0x1d5826(0x1b9)](),_0x331b11[_0x1d5826(0x1ee)]()+0x1,0x0,0x17,0x3b,0x3b,0x3e7),_0x2f2dc0=await database_1[_0x1d5826(0x2b1)]['payout'][_0x1d5826(0x206)]({'_sum':{'amount':!![]},'where':{'createdAt':{'gte':_0x279468,'lte':_0x10f91b},'status':_0x1d5826(0x1bf)}}),_0x4464b8=_0x2d7005[_0x1d5826(0x2b0)][_0x1d5826(0x1f3)]||0x0,_0x53c0de=_0x4560ea['summary']['totalAmountAfterCommissionUSDT'],_0x547586=_0x2f2dc0[_0x1d5826(0x2b0)][_0x1d5826(0x234)]||0x0,_0x22331c={'totalPayout':Math[_0x1d5826(0x22c)](_0x4464b8*0x64)/0x64,'awaitingPayout':Math[_0x1d5826(0x22c)](_0x53c0de*0x64)/0x64,'thisMonth':Math[_0x1d5826(0x22c)](_0x547586*0x64)/0x64,'availableBalance':Math[_0x1d5826(0x22c)](_0x53c0de*0x64)/0x64,'totalPayments':_0x2d067e};return console[_0x1d5826(0x228)](_0x1d5826(0x2a1)),console[_0x1d5826(0x228)](_0x1d5826(0x1d2)+_0x22331c[_0x1d5826(0x237)]+_0x1d5826(0x281)),console[_0x1d5826(0x228)](_0x1d5826(0x2bc)+_0x22331c[_0x1d5826(0x274)]+_0x1d5826(0x2c5)),console['log']('\x20\x20\x20💵\x20Available\x20balance:\x20'+_0x22331c[_0x1d5826(0x233)]+_0x1d5826(0x201)),console[_0x1d5826(0x228)](_0x1d5826(0x25b)+_0x22331c[_0x1d5826(0x1dc)]+'\x20USDT'),console[_0x1d5826(0x228)]('\x20\x20\x20💳\x20Total\x20payments:\x20'+_0x22331c[_0x1d5826(0x1a3)]+_0x1d5826(0x1bc)),console[_0x1d5826(0x228)](_0x1d5826(0x1e6)+(_0x2d7005[_0x1d5826(0x2b0)][_0x1d5826(0x210)]||0x0)[_0x1d5826(0x1b6)](0x2)+_0x1d5826(0x235)),console[_0x1d5826(0x228)]('\x20\x20\x20📊\x20Commission\x20difference:\x20'+((_0x2d7005[_0x1d5826(0x2b0)][_0x1d5826(0x210)]||0x0)-_0x53c0de)['toFixed'](0x2)+_0x1d5826(0x2ba)),_0x22331c;}async['updateCustomerData'](_0x4438bf,_0x58805c){const _0x2a6556=a36_0x4442c8;console['log']('🔄\x20Updating\x20customer\x20data\x20for\x20payment\x20'+_0x4438bf+':',_0x58805c);const _0x2f6379=await database_1[_0x2a6556(0x2b1)]['payment']['findUnique']({'where':{'id':_0x4438bf},'select':{'id':!![],'customerEmail':!![],'customerName':!![],'customerCountry':!![],'customerIp':!![],'customerUa':!![]}});if(!_0x2f6379)throw new Error(_0x2a6556(0x229));const _0x250001={};_0x58805c[_0x2a6556(0x209)]!==undefined&&(_0x250001[_0x2a6556(0x209)]=_0x58805c['customerCountry']||null);_0x58805c[_0x2a6556(0x1ba)]!==undefined&&(_0x250001[_0x2a6556(0x1ba)]=_0x58805c['customerIp']||null);_0x58805c[_0x2a6556(0x290)]!==undefined&&(_0x250001[_0x2a6556(0x290)]=_0x58805c[_0x2a6556(0x290)]||null);const _0x57e9d3=await database_1[_0x2a6556(0x2b1)][_0x2a6556(0x26c)][_0x2a6556(0x1e2)]({'where':{'id':_0x4438bf},'data':{..._0x250001,'updatedAt':new Date()},'select':{'id':!![],'customerEmail':!![],'customerName':!![],'customerCountry':!![],'customerIp':!![],'customerUa':!![],'updatedAt':!![]}});return console[_0x2a6556(0x228)](_0x2a6556(0x2b5)+_0x4438bf),console[_0x2a6556(0x228)](_0x2a6556(0x219)+_0x2f6379[_0x2a6556(0x209)]+'\x20->\x20'+_0x57e9d3[_0x2a6556(0x209)]),console['log']('\x20\x20\x20🌐\x20IP:\x20'+_0x2f6379[_0x2a6556(0x1ba)]+_0x2a6556(0x217)+_0x57e9d3[_0x2a6556(0x1ba)]),console[_0x2a6556(0x228)](_0x2a6556(0x1fc)+(_0x2f6379['customerUa']?_0x2a6556(0x245):_0x2a6556(0x2ae))+'\x20->\x20'+(_0x57e9d3['customerUa']?_0x2a6556(0x245):_0x2a6556(0x2ae))),_0x57e9d3;}async[a36_0x4442c8(0x1a5)](_0x2b1609){const _0x423856=a36_0x4442c8,_0x52691b=new Date();let _0x47a458;switch(_0x2b1609){case'7d':_0x47a458=new Date(_0x52691b[_0x423856(0x247)]()-0x7*0x18*0x3c*0x3c*0x3e8);break;case _0x423856(0x1cd):_0x47a458=new Date(_0x52691b[_0x423856(0x247)]()-0x1e*0x18*0x3c*0x3c*0x3e8);break;case'90d':_0x47a458=new Date(_0x52691b[_0x423856(0x247)]()-0x5a*0x18*0x3c*0x3c*0x3e8);break;case _0x423856(0x2a0):const _0x41f373=await database_1[_0x423856(0x2b1)][_0x423856(0x26c)][_0x423856(0x28e)]({'where':{'gateway':{'not':_0x423856(0x25f)}},'orderBy':{'createdAt':'asc'},'select':{'createdAt':!![]}});_0x47a458=_0x41f373?_0x41f373['createdAt']:new Date(_0x423856(0x1b7)),console[_0x423856(0x228)](_0x423856(0x273)+_0x47a458[_0x423856(0x1a7)]());break;default:_0x47a458=new Date(_0x52691b[_0x423856(0x247)]()-0x1e*0x18*0x3c*0x3c*0x3e8);}const [_0x5ab49c,_0x1655ab,_0x39921f,_0xbd6a42,_0xa8bc87,_0x733ab9,_0x20668d]=await Promise[_0x423856(0x2a0)]([database_1['default'][_0x423856(0x220)]['count'](),database_1['default'][_0x423856(0x220)][_0x423856(0x22a)]({'where':{'status':_0x423856(0x2c6)}}),database_1[_0x423856(0x2b1)]['payment'][_0x423856(0x22a)]({'where':{'createdAt':{'gte':_0x47a458},'gateway':{'not':_0x423856(0x25f)}}}),database_1[_0x423856(0x2b1)]['payment'][_0x423856(0x22a)]({'where':{'status':_0x423856(0x1f1),'createdAt':{'gte':_0x47a458},'gateway':{'not':_0x423856(0x25f)}}}),database_1[_0x423856(0x2b1)][_0x423856(0x26c)][_0x423856(0x280)]({'where':{'status':'PAID','createdAt':{'gte':_0x47a458},'gateway':{'not':'test_gateway'}},'select':{'amount':!![],'currency':!![]}}),database_1['default'][_0x423856(0x26c)][_0x423856(0x280)]({'where':{'gateway':{'not':_0x423856(0x25f)}},'take':0xa,'orderBy':{'createdAt':_0x423856(0x23c)},'include':{'shop':{'select':{'name':!![],'username':!![]}}}}),database_1[_0x423856(0x2b1)][_0x423856(0x26c)][_0x423856(0x280)]({'where':{'createdAt':{'gte':_0x47a458},'gateway':{'not':_0x423856(0x25f)}},'select':{'amount':!![],'currency':!![],'status':!![],'amountUSDT':!![],'createdAt':!![]}})]);let _0x1ca3d6=0x0;for(const _0x531409 of _0xa8bc87){const _0x54ad6c=await currencyService_1[_0x423856(0x225)][_0x423856(0x2a7)](_0x531409[_0x423856(0x234)],_0x531409[_0x423856(0x21b)]);_0x1ca3d6+=_0x54ad6c;}const _0x55dbfb=this[_0x423856(0x26d)](_0x20668d,_0x47a458,_0x52691b),_0x473e40=_0x39921f>0x0?_0xbd6a42/_0x39921f*0x64:0x0;return{'totalShops':_0x5ab49c,'activeShops':_0x1655ab,'totalPayments':_0x39921f,'successfulPayments':_0xbd6a42,'totalRevenue':Math[_0x423856(0x22c)](_0x1ca3d6*0x64)/0x64,'conversionRate':Math[_0x423856(0x22c)](_0x473e40*0x64)/0x64,'dailyRevenue':_0x55dbfb[_0x423856(0x1da)],'dailyPayments':_0x55dbfb[_0x423856(0x240)],'recentPayments':_0x733ab9['map'](_0x35ed31=>({'id':_0x35ed31['id'],'amount':_0x35ed31['amount'],'currency':_0x35ed31[_0x423856(0x21b)],'status':_0x35ed31[_0x423856(0x292)],'gateway':_0x35ed31[_0x423856(0x1b2)],'shop':_0x35ed31[_0x423856(0x220)],'createdAt':_0x35ed31[_0x423856(0x1ff)]}))};}async['getMerchantStatistics'](_0x1a6dac){const _0x38aa43=a36_0x4442c8;console[_0x38aa43(0x228)]('📊\x20Getting\x20merchant\x20statistics\x20with\x20filters:',_0x1a6dac);let _0x1f338b,_0x8c1e88=new Date();if(_0x1a6dac[_0x38aa43(0x1a6)]===_0x38aa43(0x28f)&&_0x1a6dac[_0x38aa43(0x1e0)]&&_0x1a6dac[_0x38aa43(0x1cc)])_0x1f338b=new Date(_0x1a6dac[_0x38aa43(0x1e0)]),_0x8c1e88=new Date(_0x1a6dac['dateTo']);else{const _0x47cb71=new Date();switch(_0x1a6dac[_0x38aa43(0x1a6)]){case _0x38aa43(0x2db):_0x1f338b=new Date(_0x47cb71['getTime']()-0x7*0x18*0x3c*0x3c*0x3e8);break;case'month':_0x1f338b=new Date(_0x47cb71[_0x38aa43(0x247)]()-0x1e*0x18*0x3c*0x3c*0x3e8);break;case _0x38aa43(0x1f0):_0x1f338b=new Date(_0x47cb71[_0x38aa43(0x247)]()-0x16d*0x18*0x3c*0x3c*0x3e8);break;case'all':default:_0x1f338b=new Date(_0x38aa43(0x1b7));break;}}console[_0x38aa43(0x228)]('📅\x20Period:\x20'+_0x1f338b[_0x38aa43(0x1a7)]()+_0x38aa43(0x1fd)+_0x8c1e88[_0x38aa43(0x1a7)]());const _0xd3efdf={'status':_0x38aa43(0x1f1),'gateway':{'not':'test_gateway'},'paidAt':{'gte':_0x1f338b,'lte':_0x8c1e88}};_0x1a6dac[_0x38aa43(0x29b)]&&(_0xd3efdf['shopId']=_0x1a6dac[_0x38aa43(0x29b)]);const _0x36afb0=await database_1['default'][_0x38aa43(0x26c)][_0x38aa43(0x280)]({'where':_0xd3efdf,'include':{'shop':{'select':{'id':!![],'name':!![],'username':!![],'gatewaySettings':!![]}}}});console['log'](_0x38aa43(0x1d3)+_0x36afb0[_0x38aa43(0x213)]+_0x38aa43(0x2d1));const _0x38bee7={'gateway':{'not':'test_gateway'},'createdAt':{'gte':_0x1f338b,'lte':_0x8c1e88}};_0x1a6dac[_0x38aa43(0x29b)]&&(_0x38bee7['shopId']=_0x1a6dac[_0x38aa43(0x29b)]);const _0x143ea3=await database_1['default'][_0x38aa43(0x26c)][_0x38aa43(0x22a)]({'where':_0x38bee7});console[_0x38aa43(0x228)](_0x38aa43(0x1f7)+_0x143ea3+',\x20successful:\x20'+_0x36afb0[_0x38aa43(0x213)]);let _0x3ddc2e=0x0,_0xc2be1=0x0,_0x5d417c=0x0;const _0x15f61e={},_0x351224={},_0x37cd9e={};for(const _0x4a6654 of _0x36afb0){try{const _0xbcf1cd=await currencyService_1[_0x38aa43(0x225)][_0x38aa43(0x2a7)](_0x4a6654[_0x38aa43(0x234)],_0x4a6654[_0x38aa43(0x21b)]);let _0x4307fb={};if(_0x4a6654['shop'][_0x38aa43(0x2d7)])try{_0x4307fb=JSON[_0x38aa43(0x207)](_0x4a6654[_0x38aa43(0x220)][_0x38aa43(0x2d7)]);}catch(_0x2ffc67){console['error'](_0x38aa43(0x1d6)+_0x4a6654[_0x38aa43(0x29b)]+':',_0x2ffc67);}let _0x3201a8={},_0x42fa20=0xa;for(const [_0x3b3ec3,_0x5bf605]of Object[_0x38aa43(0x296)](_0x4307fb)){if(_0x3b3ec3[_0x38aa43(0x1f5)]()===_0x4a6654['gateway']['toLowerCase']()){_0x3201a8=_0x5bf605,_0x42fa20=_0x5bf605[_0x38aa43(0x1c9)]||0xa;break;}}let _0x5de4f8,_0x367db9;_0x4a6654[_0x38aa43(0x1fb)]!==null&&_0x4a6654[_0x38aa43(0x1fb)]!==undefined?(_0x5de4f8=_0x4a6654[_0x38aa43(0x1fb)],_0x367db9=_0xbcf1cd-_0x5de4f8,console['log']('📊\x20Using\x20saved\x20amountAfterGatewayCommissionUSDT:\x20'+_0x5de4f8[_0x38aa43(0x1b6)](0x6)+_0x38aa43(0x1e8)+_0x4a6654['id'])):(_0x367db9=_0xbcf1cd*(_0x42fa20/0x64),_0x5de4f8=_0xbcf1cd-_0x367db9,console[_0x38aa43(0x228)](_0x38aa43(0x222)+_0x4a6654['id']+':\x20'+_0x42fa20+_0x38aa43(0x1c6)+_0xbcf1cd['toFixed'](0x6)+_0x38aa43(0x2ba)));_0x3ddc2e+=_0xbcf1cd,_0xc2be1+=_0x5de4f8,_0x5d417c+=_0x367db9;!_0x15f61e[_0x4a6654['gateway']]&&(_0x15f61e[_0x4a6654['gateway']]={'gateway':_0x4a6654[_0x38aa43(0x1b2)],'gatewayDisplayName':this['getGatewayDisplayName'](_0x4a6654[_0x38aa43(0x1b2)]),'paymentsCount':0x0,'turnoverUSDT':0x0,'commissionUSDT':0x0,'merchantEarningsUSDT':0x0,'totalCommissionRate':0x0});_0x15f61e[_0x4a6654[_0x38aa43(0x1b2)]][_0x38aa43(0x2bf)]++,_0x15f61e[_0x4a6654[_0x38aa43(0x1b2)]][_0x38aa43(0x2cb)]+=_0xbcf1cd,_0x15f61e[_0x4a6654[_0x38aa43(0x1b2)]][_0x38aa43(0x232)]+=_0x367db9,_0x15f61e[_0x4a6654[_0x38aa43(0x1b2)]][_0x38aa43(0x246)]+=_0x5de4f8,_0x15f61e[_0x4a6654[_0x38aa43(0x1b2)]][_0x38aa43(0x25a)]+=_0x42fa20;!_0x1a6dac[_0x38aa43(0x29b)]&&(!_0x351224[_0x4a6654['shopId']]&&(_0x351224[_0x4a6654['shopId']]={'shopId':_0x4a6654[_0x38aa43(0x29b)],'shopName':_0x4a6654['shop'][_0x38aa43(0x22e)],'shopUsername':_0x4a6654[_0x38aa43(0x220)]['username'],'paymentsCount':0x0,'turnoverUSDT':0x0,'commissionUSDT':0x0,'merchantEarningsUSDT':0x0,'paidOutUSDT':0x0,'averageCheckUSDT':0x0}),_0x351224[_0x4a6654['shopId']][_0x38aa43(0x2bf)]++,_0x351224[_0x4a6654[_0x38aa43(0x29b)]]['turnoverUSDT']+=_0xbcf1cd,_0x351224[_0x4a6654['shopId']][_0x38aa43(0x232)]+=_0x367db9,_0x351224[_0x4a6654[_0x38aa43(0x29b)]][_0x38aa43(0x246)]+=_0x5de4f8);const _0x2c83d5=_0x4a6654[_0x38aa43(0x21f)]['toISOString']()[_0x38aa43(0x255)]('T')[0x0];!_0x37cd9e[_0x2c83d5]&&(_0x37cd9e[_0x2c83d5]={'date':_0x2c83d5,'turnover':0x0,'merchantEarnings':0x0,'gatewayEarnings':0x0,'paymentsCount':0x0}),_0x37cd9e[_0x2c83d5]['turnover']+=_0xbcf1cd,_0x37cd9e[_0x2c83d5]['merchantEarnings']+=_0x5de4f8,_0x37cd9e[_0x2c83d5]['gatewayEarnings']+=_0x367db9,_0x37cd9e[_0x2c83d5]['paymentsCount']++;}catch(_0x2d753e){console[_0x38aa43(0x203)]('Error\x20processing\x20payment\x20'+_0x4a6654['id']+':',_0x2d753e);}}Object[_0x38aa43(0x2c8)](_0x15f61e)[_0x38aa43(0x265)](_0x2e033e=>{const _0x1b7df2=_0x38aa43;_0x2e033e[_0x1b7df2(0x2b2)]=_0x2e033e[_0x1b7df2(0x2bf)]>0x0?_0x2e033e['totalCommissionRate']/_0x2e033e[_0x1b7df2(0x2bf)]:0x0,delete _0x2e033e['totalCommissionRate'];}),Object[_0x38aa43(0x2c8)](_0x351224)[_0x38aa43(0x265)](_0x3bb593=>{const _0x13ca9a=_0x38aa43;_0x3bb593[_0x13ca9a(0x2a5)]=_0x3bb593[_0x13ca9a(0x2bf)]>0x0?_0x3bb593[_0x13ca9a(0x2cb)]/_0x3bb593[_0x13ca9a(0x2bf)]:0x0;});let _0x2149de=0x0,_0x52f38a=0x0;if(_0x1a6dac['shopId']){const _0xa15d0f=await database_1[_0x38aa43(0x2b1)][_0x38aa43(0x1d4)][_0x38aa43(0x280)]({'where':{'shopId':_0x1a6dac['shopId'],'status':'COMPLETED','createdAt':{'gte':_0x1f338b,'lte':_0x8c1e88}},'select':{'amount':!![]}});_0x2149de=_0xa15d0f[_0x38aa43(0x254)]((_0x3de4d6,_0x474a02)=>_0x3de4d6+_0x474a02[_0x38aa43(0x234)],0x0);const _0x69130e=await database_1[_0x38aa43(0x2b1)][_0x38aa43(0x1d4)][_0x38aa43(0x280)]({'where':{'shopId':_0x1a6dac[_0x38aa43(0x29b)],'status':_0x38aa43(0x1d5),'createdAt':{'gte':_0x1f338b,'lte':_0x8c1e88}},'select':{'amount':!![]}});_0x52f38a=_0x69130e['reduce']((_0x4205bc,_0x340315)=>_0x4205bc+_0x340315[_0x38aa43(0x234)],0x0);}const _0x2fcc6f=_0x143ea3,_0xbe81e2=_0x36afb0['length'],_0x5704a0=_0xbe81e2>0x0?_0x3ddc2e/_0xbe81e2:0x0,_0x424033=_0x2fcc6f>0x0?Math[_0x38aa43(0x22c)](_0xbe81e2/_0x2fcc6f*0x2710)/0x64:0x0,_0x4dfaaf=Math[_0x38aa43(0x1b8)]((_0x8c1e88[_0x38aa43(0x247)]()-_0x1f338b['getTime']())/(0x3e8*0x3c*0x3c*0x18)),_0x35d60b={'totalTurnover':Math[_0x38aa43(0x22c)](_0x3ddc2e*0x64)/0x64,'merchantEarnings':Math[_0x38aa43(0x22c)](_0xc2be1*0x64)/0x64,'gatewayEarnings':Math[_0x38aa43(0x22c)](_0x5d417c*0x64)/0x64,'totalPaidOut':Math[_0x38aa43(0x22c)](_0x2149de*0x64)/0x64,'pendingPayout':Math[_0x38aa43(0x22c)](_0x52f38a*0x64)/0x64,'averageCheck':Math[_0x38aa43(0x22c)](_0x5704a0*0x64)/0x64,'totalPayments':_0x2fcc6f,'successfulPayments':_0xbe81e2,'conversionRate':_0x424033,'gatewayBreakdown':Object[_0x38aa43(0x2c8)](_0x15f61e)['map'](_0x16921e=>({..._0x16921e,'turnoverUSDT':Math[_0x38aa43(0x22c)](_0x16921e['turnoverUSDT']*0x64)/0x64,'commissionUSDT':Math[_0x38aa43(0x22c)](_0x16921e[_0x38aa43(0x232)]*0x64)/0x64,'merchantEarningsUSDT':Math[_0x38aa43(0x22c)](_0x16921e['merchantEarningsUSDT']*0x64)/0x64,'averageCommissionRate':Math[_0x38aa43(0x22c)](_0x16921e[_0x38aa43(0x2b2)]*0x64)/0x64})),'merchantBreakdown':_0x1a6dac[_0x38aa43(0x29b)]?undefined:Object[_0x38aa43(0x2c8)](_0x351224)['map'](_0x1a26fb=>({..._0x1a26fb,'turnoverUSDT':Math[_0x38aa43(0x22c)](_0x1a26fb[_0x38aa43(0x2cb)]*0x64)/0x64,'commissionUSDT':Math['round'](_0x1a26fb[_0x38aa43(0x232)]*0x64)/0x64,'merchantEarningsUSDT':Math[_0x38aa43(0x22c)](_0x1a26fb[_0x38aa43(0x246)]*0x64)/0x64,'paidOutUSDT':Math[_0x38aa43(0x22c)](_0x1a26fb[_0x38aa43(0x21e)]*0x64)/0x64,'averageCheckUSDT':Math[_0x38aa43(0x22c)](_0x1a26fb[_0x38aa43(0x2a5)]*0x64)/0x64})),'dailyData':Object[_0x38aa43(0x2c8)](_0x37cd9e)[_0x38aa43(0x1be)](_0x5422a7=>({..._0x5422a7,'turnover':Math[_0x38aa43(0x22c)](_0x5422a7[_0x38aa43(0x28c)]*0x64)/0x64,'merchantEarnings':Math['round'](_0x5422a7[_0x38aa43(0x256)]*0x64)/0x64,'gatewayEarnings':Math['round'](_0x5422a7[_0x38aa43(0x20f)]*0x64)/0x64}))[_0x38aa43(0x269)]((_0x57b75a,_0x1d761a)=>_0x57b75a[_0x38aa43(0x1bb)][_0x38aa43(0x1b3)](_0x1d761a[_0x38aa43(0x1bb)])),'periodInfo':{'from':_0x1f338b,'to':_0x8c1e88,'periodType':_0x1a6dac[_0x38aa43(0x1a6)]||_0x38aa43(0x28f),'daysCount':_0x4dfaaf}};return console['log'](_0x38aa43(0x257)),console[_0x38aa43(0x228)](_0x38aa43(0x295)+_0x35d60b['totalTurnover']+'\x20USDT'),console[_0x38aa43(0x228)](_0x38aa43(0x1b1)+_0x35d60b['merchantEarnings']+_0x38aa43(0x2ba)),console[_0x38aa43(0x228)](_0x38aa43(0x1f2)+_0x35d60b[_0x38aa43(0x20f)]+_0x38aa43(0x2ba)),console[_0x38aa43(0x228)](_0x38aa43(0x2a9)+_0x35d60b[_0x38aa43(0x1f3)]+_0x38aa43(0x2ba)),console['log'](_0x38aa43(0x24a)+_0x35d60b[_0x38aa43(0x284)]+_0x38aa43(0x2ba)),console[_0x38aa43(0x228)](_0x38aa43(0x2b8)+_0x35d60b[_0x38aa43(0x1a3)]),_0x35d60b;}async[a36_0x4442c8(0x1d9)](){const _0x1b2637=a36_0x4442c8;console[_0x1b2637(0x228)](_0x1b2637(0x2d9));const _0x288d3e=await database_1[_0x1b2637(0x2b1)][_0x1b2637(0x220)][_0x1b2637(0x280)]({'where':{'status':_0x1b2637(0x2c6)},'select':{'id':!![],'username':!![],'name':!![]},'orderBy':{'name':_0x1b2637(0x1b5)}});return console[_0x1b2637(0x228)](_0x1b2637(0x27f)+_0x288d3e[_0x1b2637(0x213)]+_0x1b2637(0x20c)),_0x288d3e[_0x1b2637(0x1be)](_0x5318e0=>({'id':_0x5318e0['id'],'username':_0x5318e0[_0x1b2637(0x1ac)],'name':_0x5318e0['name']}));}[a36_0x4442c8(0x282)](_0x461057){const _0x2ce950=a36_0x4442c8,_0x4921e8={'test_gateway':'Test\x20Gateway','plisio':'Plisio','rapyd':'Rapyd','noda':_0x2ce950(0x1f6),'cointopay':_0x2ce950(0x1ae),'cointopay2':_0x2ce950(0x2d4),'klyme_eu':_0x2ce950(0x277),'klyme_gb':_0x2ce950(0x252),'klyme_de':'KLYME\x20DE','mastercard':_0x2ce950(0x2c9)};return _0x4921e8[_0x461057]||_0x461057;}['getGatewayInternalName'](_0x23eedd){const _0x206e48=a36_0x4442c8,_0x317590={'Test\x20Gateway':'test_gateway','Plisio':_0x206e48(0x2be),'Rapyd':_0x206e48(0x2ca),'Noda':_0x206e48(0x21d),'CoinToPay':'cointopay','CoinToPay2':_0x206e48(0x243),'KLYME\x20EU':_0x206e48(0x1bd),'KLYME\x20GB':_0x206e48(0x1e7),'KLYME\x20DE':_0x206e48(0x26a),'MasterCard':_0x206e48(0x23f)};return _0x317590[_0x23eedd]||_0x23eedd[_0x206e48(0x1f5)]();}async[a36_0x4442c8(0x2a8)](_0x28c6ed){const _0x27715c=a36_0x4442c8,{page:_0xb837c2,limit:_0x21be18,minAmount:_0x3cee01,search:_0x5196bf}=_0x28c6ed,_0x4262b6=(_0xb837c2-0x1)*_0x21be18;console[_0x27715c(0x228)](_0x27715c(0x1cb),_0x28c6ed);const _0x138dfd={'balance':{'gt':0x0},'status':_0x27715c(0x2c6)};_0x3cee01&&(_0x138dfd[_0x27715c(0x210)][_0x27715c(0x24c)]=_0x3cee01);_0x5196bf&&(_0x138dfd['OR']=[{'name':{'contains':_0x5196bf,'mode':_0x27715c(0x276)}},{'username':{'contains':_0x5196bf,'mode':_0x27715c(0x276)}}]);const [_0x39f2db,_0x104287]=await Promise['all']([database_1[_0x27715c(0x2b1)][_0x27715c(0x220)][_0x27715c(0x280)]({'where':_0x138dfd,'skip':_0x4262b6,'take':_0x21be18,'orderBy':{'balance':_0x27715c(0x23c)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'balance':!![],'totalPaidOut':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'gatewaySettings':!![],'createdAt':!![]}}),database_1['default'][_0x27715c(0x220)][_0x27715c(0x22a)]({'where':_0x138dfd})]);console[_0x27715c(0x228)]('💰\x20Found\x20'+_0x39f2db[_0x27715c(0x213)]+'\x20merchants\x20with\x20positive\x20balance');const _0x191315=await Promise[_0x27715c(0x2a0)](_0x39f2db[_0x27715c(0x1be)](async _0x4cf3a2=>{const _0x28a637=_0x27715c,[_0x2f9d0f,_0x28753d,_0xeabc73]=await Promise[_0x28a637(0x2a0)]([database_1[_0x28a637(0x2b1)][_0x28a637(0x26c)]['count']({'where':{'shopId':_0x4cf3a2['id'],'status':'PAID','gateway':{'not':_0x28a637(0x25f)}}}),database_1[_0x28a637(0x2b1)]['payment'][_0x28a637(0x28e)]({'where':{'shopId':_0x4cf3a2['id'],'status':_0x28a637(0x1f1),'gateway':{'not':_0x28a637(0x25f)}},'orderBy':{'paidAt':_0x28a637(0x1b5)},'select':{'paidAt':!![]}}),database_1[_0x28a637(0x2b1)][_0x28a637(0x26c)][_0x28a637(0x211)]({'by':[_0x28a637(0x1b2)],'where':{'shopId':_0x4cf3a2['id'],'status':_0x28a637(0x1f1),'gateway':{'not':_0x28a637(0x25f)}},'_count':{'id':!![]},'_sum':{'amountUSDT':!![]}})]),_0x13affc=new Date(),_0x33555c=new Date(_0x13affc[_0x28a637(0x1b9)](),_0x13affc[_0x28a637(0x1ee)](),0x1),_0x12c6d8=new Date(_0x13affc[_0x28a637(0x1b9)](),_0x13affc[_0x28a637(0x1ee)]()+0x1,0x0,0x17,0x3b,0x3b,0x3e7),[_0x48b284,_0x3d6296]=await Promise[_0x28a637(0x2a0)]([database_1[_0x28a637(0x2b1)][_0x28a637(0x1d4)][_0x28a637(0x206)]({'_sum':{'amount':!![]},'where':{'shopId':_0x4cf3a2['id'],'status':_0x28a637(0x1bf)}}),database_1[_0x28a637(0x2b1)]['payout'][_0x28a637(0x206)]({'_sum':{'amount':!![]},'where':{'shopId':_0x4cf3a2['id'],'status':_0x28a637(0x1bf),'createdAt':{'gte':_0x33555c,'lte':_0x12c6d8}}})]),_0x426f7f=_0x48b284[_0x28a637(0x2b0)][_0x28a637(0x234)]||0x0,_0x52a86d=_0x3d6296[_0x28a637(0x2b0)][_0x28a637(0x234)]||0x0,_0x5db96f=await Promise[_0x28a637(0x2a0)](_0xeabc73[_0x28a637(0x1be)](async _0xb84cfe=>{const _0x2ea5a4=_0x28a637;let _0x5f08e5=0xa;if(_0x4cf3a2[_0x2ea5a4(0x2d7)])try{const _0x2bb865=JSON['parse'](_0x4cf3a2[_0x2ea5a4(0x2d7)]);for(const [_0x3f4128,_0x3e788e]of Object[_0x2ea5a4(0x296)](_0x2bb865)){if(_0x3f4128['toLowerCase']()===_0xb84cfe[_0x2ea5a4(0x1b2)][_0x2ea5a4(0x1f5)]()){_0x5f08e5=_0x3e788e[_0x2ea5a4(0x1c9)]||0xa,console[_0x2ea5a4(0x228)](_0x2ea5a4(0x1b0)+_0xb84cfe[_0x2ea5a4(0x1b2)]+_0x2ea5a4(0x2d6)+_0x4cf3a2['id']+_0x2ea5a4(0x20a)+_0x5f08e5+'%');break;}}}catch(_0x46ffb7){console[_0x2ea5a4(0x203)]('Error\x20parsing\x20gateway\x20settings\x20for\x20shop\x20'+_0x4cf3a2['id']+':',_0x46ffb7);}const _0x39bb03=_0xb84cfe[_0x2ea5a4(0x2b0)]?.[_0x2ea5a4(0x26e)]||0x0,_0x99ef67=_0x39bb03*(0x1-_0x5f08e5/0x64);return{'gateway':_0xb84cfe[_0x2ea5a4(0x1b2)],'count':_0xb84cfe[_0x2ea5a4(0x2dd)]?.['id']||0x0,'amountUSDT':Math[_0x2ea5a4(0x22c)](_0x39bb03*0x64)/0x64,'amountAfterCommissionUSDT':Math[_0x2ea5a4(0x22c)](_0x99ef67*0x64)/0x64,'commission':_0x5f08e5};})),_0x2adc75=_0x5db96f[_0x28a637(0x254)]((_0x339b5a,_0x3c442a)=>_0x339b5a+_0x3c442a[_0x28a637(0x26e)],0x0),_0x1ae585=_0x4cf3a2[_0x28a637(0x210)];return console[_0x28a637(0x228)]('💰\x20[PAYOUT]\x20Merchant\x20'+_0x4cf3a2[_0x28a637(0x1ac)]+':'),console[_0x28a637(0x228)]('\x20\x20\x20�\x20Total\x20payments\x20turnover:\x20'+_0x2adc75[_0x28a637(0x1b6)](0x2)+_0x28a637(0x2af)),console[_0x28a637(0x228)](_0x28a637(0x25c)+_0x5db96f['reduce']((_0x5ea45d,_0x1e6315)=>_0x5ea45d+_0x1e6315['amountAfterCommissionUSDT'],0x0)[_0x28a637(0x1b6)](0x2)+'\x20USDT\x20(theoretical\x20net)'),console['log'](_0x28a637(0x1de)+_0x1ae585[_0x28a637(0x1b6)](0x2)+'\x20USDT\x20(after\x20payouts)'),{'id':_0x4cf3a2['id'],'fullName':_0x4cf3a2[_0x28a637(0x22e)],'username':_0x4cf3a2[_0x28a637(0x1ac)],'telegramId':_0x4cf3a2[_0x28a637(0x2d2)],'merchantUrl':_0x4cf3a2[_0x28a637(0x1c1)],'wallets':{'usdtPolygonWallet':_0x4cf3a2[_0x28a637(0x1a4)],'usdtTrcWallet':_0x4cf3a2[_0x28a637(0x216)],'usdtErcWallet':_0x4cf3a2[_0x28a637(0x20e)],'usdcPolygonWallet':_0x4cf3a2[_0x28a637(0x28d)]},'totalAmountUSDT':Math[_0x28a637(0x22c)](_0x2adc75*0x64)/0x64,'totalAmountAfterCommissionUSDT':Math[_0x28a637(0x22c)](_0x1ae585*0x64)/0x64,'totalPayout':Math['round'](_0x426f7f*0x64)/0x64,'thisMonth':Math[_0x28a637(0x22c)](_0x52a86d*0x64)/0x64,'paymentsCount':_0x2f9d0f,'oldestPaymentDate':_0x28753d?.['paidAt']||_0x4cf3a2[_0x28a637(0x1ff)],'gatewayBreakdown':_0x5db96f};})),_0x9766ac=_0x191315[_0x27715c(0x254)]((_0x5a166a,_0x5413dd)=>_0x5a166a+_0x5413dd[_0x27715c(0x1c0)],0x0),_0x171bc8=_0x191315['reduce']((_0x4b6fed,_0x5d7a99)=>_0x4b6fed+_0x5d7a99[_0x27715c(0x299)],0x0),_0x13de59=_0x191315[_0x27715c(0x254)]((_0x307909,_0x51719c)=>_0x307909+_0x51719c['totalPayout'],0x0),_0x379307=_0x191315['reduce']((_0x4bb61b,_0x547082)=>_0x4bb61b+_0x547082[_0x27715c(0x1dc)],0x0);return console[_0x27715c(0x228)](_0x27715c(0x2cd)+_0x104287+_0x27715c(0x1d0)),console[_0x27715c(0x228)](_0x27715c(0x289)+Math['round'](_0x9766ac*0x64)/0x64+_0x27715c(0x2af)),console[_0x27715c(0x228)](_0x27715c(0x271)+Math['round'](_0x171bc8*0x64)/0x64+'\x20USDT\x20(actual\x20balances)'),console[_0x27715c(0x228)](_0x27715c(0x1e3)+Math[_0x27715c(0x22c)](_0x13de59*0x64)/0x64+_0x27715c(0x2ba)),console[_0x27715c(0x228)]('\x20\x20\x20📅\x20Total\x20payouts\x20(this\x20month):\x20'+Math[_0x27715c(0x22c)](_0x379307*0x64)/0x64+_0x27715c(0x2ba)),{'merchants':_0x191315,'pagination':{'page':_0xb837c2,'limit':_0x21be18,'total':_0x104287,'totalPages':Math['ceil'](_0x104287/_0x21be18)},'summary':{'totalMerchants':_0x104287,'totalAmountUSDT':Math[_0x27715c(0x22c)](_0x9766ac*0x64)/0x64,'totalAmountAfterCommissionUSDT':Math[_0x27715c(0x22c)](_0x171bc8*0x64)/0x64,'totalPayout':Math[_0x27715c(0x22c)](_0x13de59*0x64)/0x64,'thisMonth':Math[_0x27715c(0x22c)](_0x379307*0x64)/0x64}};}async[a36_0x4442c8(0x2a4)](_0x346c40){const _0x391a5d=a36_0x4442c8,{shopId:_0x2c13c6,amount:_0x39086a,network:_0x104fb9,wallet:_0xb1191b,notes:_0x3f12a1,txid:_0x54771a,periodFrom:_0x5c531c,periodTo:_0x2a1ede}=_0x346c40,_0x2544d0=await database_1[_0x391a5d(0x2b1)]['$transaction'](async _0x19b56c=>{const _0x5175a0=_0x391a5d,_0x1c1cb2=await _0x19b56c['shop'][_0x5175a0(0x22b)]({'where':{'id':_0x2c13c6},'select':{'id':!![],'name':!![],'username':!![],'balance':!![],'totalPaidOut':!![]}});if(!_0x1c1cb2)throw new Error(_0x5175a0(0x214));console['log']('💰\x20Creating\x20payout\x20for\x20shop\x20'+_0x1c1cb2[_0x5175a0(0x1ac)]+':'),console[_0x5175a0(0x228)](_0x5175a0(0x1a9)+_0x1c1cb2[_0x5175a0(0x210)][_0x5175a0(0x1b6)](0x6)+'\x20USDT'),console[_0x5175a0(0x228)](_0x5175a0(0x293)+_0x39086a[_0x5175a0(0x1b6)](0x6)+_0x5175a0(0x2ba)),console[_0x5175a0(0x228)](_0x5175a0(0x223)+_0x1c1cb2[_0x5175a0(0x1f3)][_0x5175a0(0x1b6)](0x6)+_0x5175a0(0x2ba));if(_0x54771a)console[_0x5175a0(0x228)](_0x5175a0(0x1ef)+_0x54771a);if(_0x1c1cb2['balance']<_0x39086a)throw new Error(_0x5175a0(0x2a6)+_0x1c1cb2[_0x5175a0(0x210)][_0x5175a0(0x1b6)](0x6)+_0x5175a0(0x2a2)+_0x39086a[_0x5175a0(0x1b6)](0x6)+'\x20USDT');let _0x561ec6=_0xb1191b;if(!_0x561ec6){const _0x425875=await _0x19b56c[_0x5175a0(0x220)][_0x5175a0(0x22b)]({'where':{'id':_0x2c13c6},'select':{'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![]}});if(_0x425875)switch(_0x104fb9){case'polygon':_0x561ec6=_0x425875[_0x5175a0(0x1a4)]||undefined;break;case _0x5175a0(0x283):_0x561ec6=_0x425875[_0x5175a0(0x216)]||undefined;break;case _0x5175a0(0x1ec):_0x561ec6=_0x425875[_0x5175a0(0x20e)]||undefined;break;case _0x5175a0(0x1f9):_0x561ec6=_0x425875[_0x5175a0(0x28d)]||undefined;break;}}console[_0x5175a0(0x228)]('💳\x20Payout\x20wallet\x20for\x20'+_0x104fb9+':\x20'+(_0x561ec6||_0x5175a0(0x1c7)));const _0x45cf45=await _0x19b56c[_0x5175a0(0x1d4)]['create']({'data':{'shopId':_0x2c13c6,'amount':_0x39086a,'network':_0x104fb9,'status':_0x5175a0(0x1bf),'txid':_0x54771a,'notes':_0x3f12a1,'periodFrom':_0x5c531c?new Date(_0x5c531c):null,'periodTo':_0x2a1ede?new Date(_0x2a1ede):null,'createdAt':new Date(),'paidAt':new Date()}}),_0xd787d1=_0x1c1cb2[_0x5175a0(0x210)]-_0x39086a,_0x4fb5d7=_0x1c1cb2[_0x5175a0(0x1f3)]+_0x39086a;return await _0x19b56c['shop']['update']({'where':{'id':_0x2c13c6},'data':{'balance':_0xd787d1,'totalPaidOut':_0x4fb5d7}}),console[_0x5175a0(0x228)](_0x5175a0(0x2b9)+_0x1c1cb2['username']+_0x5175a0(0x1e5)),console[_0x5175a0(0x228)]('\x20\x20\x20Balance:\x20'+_0x1c1cb2['balance'][_0x5175a0(0x1b6)](0x6)+_0x5175a0(0x217)+_0xd787d1[_0x5175a0(0x1b6)](0x6)+_0x5175a0(0x2d3)+_0x39086a[_0x5175a0(0x1b6)](0x6)+')'),console[_0x5175a0(0x228)](_0x5175a0(0x205)+_0x1c1cb2[_0x5175a0(0x1f3)][_0x5175a0(0x1b6)](0x6)+'\x20->\x20'+_0x4fb5d7[_0x5175a0(0x1b6)](0x6)+_0x5175a0(0x298)+_0x39086a['toFixed'](0x6)+')'),{'payout':_0x45cf45,'shop':_0x1c1cb2};});return console['log'](_0x391a5d(0x28b)+_0x2544d0[_0x391a5d(0x1d4)]['id']+_0x391a5d(0x2d6)+_0x2544d0[_0x391a5d(0x220)][_0x391a5d(0x1ac)]+'\x20('+_0x39086a+_0x391a5d(0x2d0)),{'id':_0x2544d0['payout']['id'],'shopId':_0x2544d0[_0x391a5d(0x1d4)]['shopId'],'shopName':_0x2544d0[_0x391a5d(0x220)][_0x391a5d(0x22e)],'shopUsername':_0x2544d0['shop']['username'],'amount':_0x2544d0[_0x391a5d(0x1d4)]['amount'],'network':_0x2544d0[_0x391a5d(0x1d4)][_0x391a5d(0x23e)],'status':_0x2544d0[_0x391a5d(0x1d4)]['status'],'txid':_0x2544d0['payout']['txid'],'notes':_0x2544d0[_0x391a5d(0x1d4)]['notes'],'periodFrom':_0x2544d0[_0x391a5d(0x1d4)][_0x391a5d(0x29a)],'periodTo':_0x2544d0['payout'][_0x391a5d(0x25d)],'createdAt':_0x2544d0[_0x391a5d(0x1d4)][_0x391a5d(0x1ff)],'paidAt':_0x2544d0['payout'][_0x391a5d(0x21f)]};}async[a36_0x4442c8(0x294)](_0x39130e){const _0x1a7e6e=a36_0x4442c8,{page:_0xbec184,limit:_0x40c90c,shopId:_0x250f8e,network:_0x48ec66,dateFrom:_0x537eaa,dateTo:_0x578c83,search:_0x1b0d95}=_0x39130e,_0x4db89d=(_0xbec184-0x1)*_0x40c90c,_0x124a0d={};_0x250f8e&&(_0x124a0d[_0x1a7e6e(0x29b)]=_0x250f8e);_0x48ec66&&(_0x124a0d[_0x1a7e6e(0x23e)]=_0x48ec66);(_0x537eaa||_0x578c83)&&(_0x124a0d['createdAt']={},_0x537eaa&&(_0x124a0d[_0x1a7e6e(0x1ff)][_0x1a7e6e(0x24c)]=new Date(_0x537eaa)),_0x578c83&&(_0x124a0d[_0x1a7e6e(0x1ff)][_0x1a7e6e(0x208)]=new Date(_0x578c83)));_0x1b0d95&&(_0x124a0d['OR']=[{'shop':{'name':{'contains':_0x1b0d95,'mode':_0x1a7e6e(0x276)}}},{'shop':{'username':{'contains':_0x1b0d95,'mode':_0x1a7e6e(0x276)}}},{'notes':{'contains':_0x1b0d95,'mode':'insensitive'}}]);const [_0x2ebaea,_0x95d3b8]=await Promise[_0x1a7e6e(0x2a0)]([database_1[_0x1a7e6e(0x2b1)][_0x1a7e6e(0x1d4)][_0x1a7e6e(0x280)]({'where':_0x124a0d,'skip':_0x4db89d,'take':_0x40c90c,'orderBy':{'createdAt':_0x1a7e6e(0x23c)},'select':{'id':!![],'shopId':!![],'amount':!![],'network':!![],'status':!![],'txid':!![],'notes':!![],'periodFrom':!![],'periodTo':!![],'createdAt':!![],'paidAt':!![],'shop':{'select':{'name':!![],'username':!![]}}}}),database_1['default'][_0x1a7e6e(0x1d4)]['count']({'where':_0x124a0d})]);return{'payouts':_0x2ebaea[_0x1a7e6e(0x1be)](_0x4dc522=>({'id':_0x4dc522['id'],'shopId':_0x4dc522[_0x1a7e6e(0x29b)],'shopName':_0x4dc522['shop']['name'],'shopUsername':_0x4dc522['shop']['username'],'amount':_0x4dc522[_0x1a7e6e(0x234)],'network':_0x4dc522['network'],'status':_0x4dc522[_0x1a7e6e(0x292)],'txid':_0x4dc522['txid'],'notes':_0x4dc522[_0x1a7e6e(0x275)],'periodFrom':_0x4dc522[_0x1a7e6e(0x29a)],'periodTo':_0x4dc522[_0x1a7e6e(0x25d)],'createdAt':_0x4dc522[_0x1a7e6e(0x1ff)],'paidAt':_0x4dc522['paidAt']})),'pagination':{'page':_0xbec184,'limit':_0x40c90c,'total':_0x95d3b8,'totalPages':Math[_0x1a7e6e(0x1b8)](_0x95d3b8/_0x40c90c)}};}async[a36_0x4442c8(0x288)](_0x22033e){const _0x27b1b6=a36_0x4442c8,_0x463b77=await database_1['default']['payout'][_0x27b1b6(0x22b)]({'where':{'id':_0x22033e},'include':{'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x463b77)return null;return{'id':_0x463b77['id'],'shopId':_0x463b77['shopId'],'shopName':_0x463b77[_0x27b1b6(0x220)][_0x27b1b6(0x22e)],'shopUsername':_0x463b77[_0x27b1b6(0x220)][_0x27b1b6(0x1ac)],'amount':_0x463b77[_0x27b1b6(0x234)],'network':_0x463b77[_0x27b1b6(0x23e)],'status':_0x463b77[_0x27b1b6(0x292)],'txid':_0x463b77[_0x27b1b6(0x1f8)],'notes':_0x463b77['notes'],'periodFrom':_0x463b77['periodFrom'],'periodTo':_0x463b77[_0x27b1b6(0x25d)],'createdAt':_0x463b77[_0x27b1b6(0x1ff)],'paidAt':_0x463b77[_0x27b1b6(0x21f)]};}async[a36_0x4442c8(0x259)](_0x1cd77d){const _0x43edf9=a36_0x4442c8;await database_1['default'][_0x43edf9(0x1d4)]['delete']({'where':{'id':_0x1cd77d}});}async[a36_0x4442c8(0x260)](_0x244a42){const _0x3e9505=a36_0x4442c8,{page:_0x2994f2,limit:_0x459396,status:_0xf9b525,gateway:_0x310362,shopId:_0x59d5ce,dateFrom:_0x4fd278,dateTo:_0x22aeb3,search:_0x4cdc26,currency:_0x17f91e,sortBy:_0x7ff743,sortOrder:_0x55bff9}=_0x244a42,_0x5cb1f3=(_0x2994f2-0x1)*_0x459396;console['log'](_0x3e9505(0x241),_0x244a42);const _0x5b4ba8=await database_1['default'][_0x3e9505(0x26c)][_0x3e9505(0x211)]({'by':[_0x3e9505(0x1b2)],'_count':{'gateway':!![]}});console['log'](_0x3e9505(0x204),_0x5b4ba8['map'](_0x419746=>_0x419746['gateway']+'\x20('+_0x419746[_0x3e9505(0x2dd)][_0x3e9505(0x1b2)]+_0x3e9505(0x24b)));if(_0x310362){const _0x1968b5=_0x5b4ba8[_0x3e9505(0x1ad)](_0x3021c8=>_0x3021c8['gateway'][_0x3e9505(0x1f5)]()===_0x310362[_0x3e9505(0x1f5)]());!_0x1968b5&&_0x310362[_0x3e9505(0x1f5)]()!==_0x3e9505(0x25f)&&console[_0x3e9505(0x228)](_0x3e9505(0x1e1)+_0x310362+_0x3e9505(0x1b4)+_0x5b4ba8[_0x3e9505(0x1be)](_0x32e535=>_0x32e535[_0x3e9505(0x1b2)])[_0x3e9505(0x270)](',\x20'));}const _0x506ed3={};_0xf9b525&&(_0x506ed3['status']=_0xf9b525['toUpperCase']());if(!_0x310362)_0x506ed3[_0x3e9505(0x1b2)]={'not':_0x3e9505(0x25f)};else{if(_0x310362&&(_0x310362[_0x3e9505(0x1f5)]()==='test_gateway'||_0x310362===_0x3e9505(0x1ab)))_0x506ed3[_0x3e9505(0x1b2)]=_0x3e9505(0x25f);else{let _0x5a7e2c=_0x310362;const _0x54f67c=(0x0,gateway_1[_0x3e9505(0x230)])(_0x310362);if(_0x54f67c)_0x5a7e2c=_0x54f67c,console[_0x3e9505(0x228)]('🔄\x20Converted\x20gateway\x20ID\x20\x27'+_0x310362+_0x3e9505(0x2cc)+_0x5a7e2c+'\x27');else{const _0x5f695b=(0x0,gateway_1['getGatewayIdByName'])(_0x310362);if(_0x5f695b){const _0x4d22d0=(0x0,gateway_1[_0x3e9505(0x230)])(_0x5f695b);_0x4d22d0&&(_0x5a7e2c=_0x4d22d0,console[_0x3e9505(0x228)]('🔄\x20Converted\x20gateway\x20name\x20\x27'+_0x310362+_0x3e9505(0x231)+_0x5f695b+_0x3e9505(0x27c)+_0x5a7e2c+'\x27'));}else console['log'](_0x3e9505(0x297)+_0x310362+_0x3e9505(0x28a));}const _0x1bc396=await database_1[_0x3e9505(0x2b1)][_0x3e9505(0x26c)]['count']({'where':{'gateway':_0x5a7e2c[_0x3e9505(0x1f5)]()},'take':0x1});_0x1bc396===0x0?(console[_0x3e9505(0x228)](_0x3e9505(0x24d)+_0x5a7e2c+_0x3e9505(0x251)+_0x310362+_0x3e9505(0x21c)),_0x506ed3['gateway']=_0x3e9505(0x2da)):(_0x506ed3['gateway']=_0x5a7e2c[_0x3e9505(0x1f5)](),console[_0x3e9505(0x228)](_0x3e9505(0x27e)+_0x5a7e2c+_0x3e9505(0x251)+_0x310362+'\x27)'));}}console[_0x3e9505(0x228)](_0x3e9505(0x279),_0x506ed3[_0x3e9505(0x1b2)]);_0x59d5ce&&(_0x506ed3[_0x3e9505(0x29b)]=_0x59d5ce);_0x17f91e&&(_0x506ed3[_0x3e9505(0x21b)]=_0x17f91e[_0x3e9505(0x221)](),console['log'](_0x3e9505(0x1d1)+_0x17f91e['toUpperCase']()));(_0x4fd278||_0x22aeb3)&&(_0x506ed3[_0x3e9505(0x1ff)]={},_0x4fd278&&(_0x506ed3[_0x3e9505(0x1ff)][_0x3e9505(0x24c)]=new Date(_0x4fd278)),_0x22aeb3&&(_0x506ed3[_0x3e9505(0x1ff)][_0x3e9505(0x208)]=new Date(_0x22aeb3)));_0x4cdc26&&(_0x506ed3['OR']=[{'id':{'contains':_0x4cdc26,'mode':_0x3e9505(0x276)}},{'orderId':{'contains':_0x4cdc26,'mode':_0x3e9505(0x276)}},{'gatewayOrderId':{'contains':_0x4cdc26,'mode':_0x3e9505(0x276)}},{'customerEmail':{'contains':_0x4cdc26,'mode':'insensitive'}},{'shop':{'name':{'contains':_0x4cdc26,'mode':_0x3e9505(0x276)}}},{'shop':{'username':{'contains':_0x4cdc26,'mode':'insensitive'}}}]);console['log']('📊\x20Final\x20WHERE\x20conditions:',JSON[_0x3e9505(0x22f)](_0x506ed3,null,0x2));let _0x476adb={'createdAt':'desc'};if(_0x7ff743){const _0x56b864=['amount','createdAt','updatedAt',_0x3e9505(0x292),_0x3e9505(0x1b2),'currency'],_0x546d45=[_0x3e9505(0x1b5),_0x3e9505(0x23c)];if(_0x56b864[_0x3e9505(0x253)](_0x7ff743)){const _0x48deb1=_0x546d45[_0x3e9505(0x253)](_0x55bff9)?_0x55bff9:_0x3e9505(0x23c);_0x476adb={[_0x7ff743]:_0x48deb1},console[_0x3e9505(0x228)](_0x3e9505(0x268)+_0x7ff743+_0x3e9505(0x2bb)+_0x48deb1+_0x3e9505(0x20b));}}const [_0x2920e9,_0x13b2be]=await Promise[_0x3e9505(0x2a0)]([database_1['default'][_0x3e9505(0x26c)][_0x3e9505(0x280)]({'where':_0x506ed3,'skip':_0x5cb1f3,'take':_0x459396,'orderBy':_0x476adb,'include':{'shop':{'select':{'name':!![],'username':!![]}}}}),database_1[_0x3e9505(0x2b1)]['payment'][_0x3e9505(0x22a)]({'where':_0x506ed3})]);return{'payments':_0x2920e9,'pagination':{'page':_0x2994f2,'limit':_0x459396,'total':_0x13b2be,'totalPages':Math[_0x3e9505(0x1b8)](_0x13b2be/_0x459396)}};}async[a36_0x4442c8(0x2ad)](_0x550872){const _0x36c374=a36_0x4442c8,_0x21bc0d=await database_1['default']['payment'][_0x36c374(0x22b)]({'where':{'id':_0x550872},'include':{'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x21bc0d)return null;return{'id':_0x21bc0d['id'],'shopId':_0x21bc0d[_0x36c374(0x29b)],'gateway':_0x21bc0d[_0x36c374(0x1b2)],'amount':_0x21bc0d[_0x36c374(0x234)],'currency':_0x21bc0d['currency'],'status':_0x21bc0d['status'],'orderId':_0x21bc0d['orderId'],'gatewayOrderId':_0x21bc0d[_0x36c374(0x1c3)],'customerEmail':_0x21bc0d['customerEmail'],'customerName':_0x21bc0d['customerName'],'customerCountry':_0x21bc0d['customerCountry'],'customerIp':_0x21bc0d[_0x36c374(0x1ba)],'customerUa':_0x21bc0d[_0x36c374(0x290)],'failureMessage':_0x21bc0d['failureMessage'],'externalPaymentUrl':_0x21bc0d['externalPaymentUrl'],'successUrl':_0x21bc0d['successUrl'],'failUrl':_0x21bc0d[_0x36c374(0x1af)],'pendingUrl':_0x21bc0d['pendingUrl'],'whiteUrl':_0x21bc0d['whiteUrl'],'createdAt':_0x21bc0d[_0x36c374(0x1ff)],'updatedAt':_0x21bc0d[_0x36c374(0x2b4)],'shop':_0x21bc0d[_0x36c374(0x220)]};}async[a36_0x4442c8(0x29d)](_0x5245cf,_0x58d450,_0x45fe52,_0x312b69){const _0x2f564e=a36_0x4442c8,_0x883751=await database_1[_0x2f564e(0x2b1)]['$transaction'](async _0x376b59=>{const _0x10159a=_0x2f564e,_0x3cadb2=await _0x376b59['payment'][_0x10159a(0x22b)]({'where':{'id':_0x5245cf},'include':{'shop':{'select':{'id':!![],'name':!![],'username':!![],'balance':!![]}}}});if(!_0x3cadb2)throw new Error(_0x10159a(0x229));const _0x284ab2=_0x3cadb2['status'],_0x3cc1bf=_0x58d450['toUpperCase']();console[_0x10159a(0x228)]('🔄\x20Admin\x20updating\x20payment\x20'+_0x5245cf+_0x10159a(0x25e)+_0x284ab2+_0x10159a(0x217)+_0x3cc1bf),console[_0x10159a(0x228)](_0x10159a(0x2c3)+_0x3cadb2['shop']['balance']+_0x10159a(0x2ba));const _0x4a3cc5={'status':_0x3cc1bf,'updatedAt':new Date(),'statusChangedBy':_0x10159a(0x236),'statusChangedAt':new Date()};_0x45fe52&&(_0x4a3cc5[_0x10159a(0x2b3)]=_0x45fe52);_0x3cc1bf===_0x10159a(0x202)&&_0x312b69&&(_0x4a3cc5[_0x10159a(0x2c1)]=_0x312b69);let _0x28a2b0=0x0,_0x31d3a7=_0x3cadb2['shop'][_0x10159a(0x210)];if(_0x3cc1bf===_0x10159a(0x1f1)&&_0x284ab2!==_0x10159a(0x1f1)){_0x4a3cc5[_0x10159a(0x21f)]=new Date();const _0x1acb04=await currencyService_1[_0x10159a(0x225)][_0x10159a(0x2a7)](_0x3cadb2['amount'],_0x3cadb2[_0x10159a(0x21b)]);_0x4a3cc5[_0x10159a(0x26e)]=_0x1acb04;let _0x14b0e9=0xa;const _0x167cd4=await _0x376b59['shop'][_0x10159a(0x22b)]({'where':{'id':_0x3cadb2[_0x10159a(0x29b)]},'select':{'gatewaySettings':!![]}});if(_0x167cd4?.[_0x10159a(0x2d7)])try{const _0x34d379=JSON[_0x10159a(0x207)](_0x167cd4[_0x10159a(0x2d7)]);for(const [_0xee0fdb,_0x523480]of Object[_0x10159a(0x296)](_0x34d379)){if(_0xee0fdb[_0x10159a(0x1f5)]()===_0x3cadb2[_0x10159a(0x1b2)][_0x10159a(0x1f5)]()){_0x14b0e9=_0x523480[_0x10159a(0x1c9)]||0xa;break;}}}catch(_0x228277){console['error'](_0x10159a(0x250)+_0x5245cf+':',_0x228277);}let _0x7151a9;_0x3cadb2[_0x10159a(0x1fb)]!==null&&_0x3cadb2['amountAfterGatewayCommissionUSDT']!==undefined?(_0x7151a9=_0x3cadb2[_0x10159a(0x1fb)],console['log'](_0x10159a(0x1e4)+_0x7151a9[_0x10159a(0x1b6)](0x6)+_0x10159a(0x1e8)+_0x5245cf)):(_0x7151a9=_0x1acb04*(0x1-_0x14b0e9/0x64),console[_0x10159a(0x228)]('📊\x20[ADMIN]\x20Calculating\x20commission\x20manually\x20for\x20payment\x20'+_0x5245cf+':\x20'+_0x14b0e9+'%\x20from\x20'+_0x1acb04[_0x10159a(0x1b6)](0x6)+_0x10159a(0x2ba)),_0x4a3cc5[_0x10159a(0x1fb)]=_0x7151a9),_0x28a2b0=_0x7151a9,_0x31d3a7+=_0x7151a9,console[_0x10159a(0x228)](_0x10159a(0x29f)+_0x5245cf+_0x10159a(0x2aa)),console[_0x10159a(0x228)](_0x10159a(0x1ed)+_0x1acb04[_0x10159a(0x1b6)](0x6)+'\x20USDT'),console[_0x10159a(0x228)](_0x10159a(0x1db)+_0x3cadb2[_0x10159a(0x1b2)]+',\x20Commission:\x20'+_0x14b0e9+'%'),console['log'](_0x10159a(0x244)+_0x7151a9[_0x10159a(0x1b6)](0x6)+_0x10159a(0x1ce)+_0x14b0e9+_0x10159a(0x23d)),console['log']('\x20\x20\x20Added\x20to\x20balance:\x20+'+_0x7151a9[_0x10159a(0x1b6)](0x6)+_0x10159a(0x2ba));}else{if(_0x284ab2===_0x10159a(0x1f1)&&_0x3cc1bf!==_0x10159a(0x1f1)){if(_0x3cadb2['amountUSDT']){let _0x513397=0xa;const _0x46cc1f=await _0x376b59[_0x10159a(0x220)][_0x10159a(0x22b)]({'where':{'id':_0x3cadb2[_0x10159a(0x29b)]},'select':{'gatewaySettings':!![]}});if(_0x46cc1f?.[_0x10159a(0x2d7)])try{const _0x2b1695=JSON[_0x10159a(0x207)](_0x46cc1f['gatewaySettings']);for(const [_0x155afc,_0x50b3e2]of Object[_0x10159a(0x296)](_0x2b1695)){if(_0x155afc[_0x10159a(0x1f5)]()===_0x3cadb2['gateway'][_0x10159a(0x1f5)]()){_0x513397=_0x50b3e2[_0x10159a(0x1c9)]||0xa;break;}}}catch(_0x48e8e3){console[_0x10159a(0x203)](_0x10159a(0x250)+_0x5245cf+':',_0x48e8e3);}const _0x3bbea5=_0x3cadb2['amountUSDT']*(0x1-_0x513397/0x64);_0x28a2b0=-_0x3bbea5,_0x31d3a7-=_0x3bbea5,_0x4a3cc5[_0x10159a(0x26e)]=null,_0x4a3cc5[_0x10159a(0x1fb)]=null,console[_0x10159a(0x228)](_0x10159a(0x29f)+_0x5245cf+_0x10159a(0x262)),console[_0x10159a(0x228)](_0x10159a(0x1ed)+_0x3cadb2[_0x10159a(0x26e)][_0x10159a(0x1b6)](0x6)+_0x10159a(0x2ba)),console['log']('\x20\x20\x20Gateway:\x20'+_0x3cadb2['gateway']+_0x10159a(0x278)+_0x513397+'%'),console[_0x10159a(0x228)](_0x10159a(0x2ab)+_0x3bbea5['toFixed'](0x6)+_0x10159a(0x1ce)+_0x513397+'%\x20commission)'),console['log'](_0x10159a(0x238)+_0x3bbea5[_0x10159a(0x1b6)](0x6)+'\x20USDT');}}}_0x3cc1bf==='CHARGEBACK'&&(_0x284ab2===_0x10159a(0x1f1)&&_0x3cadb2[_0x10159a(0x26e)]&&console['log']('💸\x20CHARGEBACK:\x20Merchant\x20amount\x20already\x20deducted\x20from\x20balance'),_0x312b69&&_0x312b69>0x0&&(_0x28a2b0-=_0x312b69,_0x31d3a7-=_0x312b69,console[_0x10159a(0x228)](_0x10159a(0x27b)+_0x312b69[_0x10159a(0x1b6)](0x6)+_0x10159a(0x1d8))));_0x3cc1bf==='REFUND'&&_0x284ab2==='PAID'&&console['log'](_0x10159a(0x26b));const _0x118bad=await _0x376b59['payment']['update']({'where':{'id':_0x5245cf},'data':_0x4a3cc5,'include':{'shop':{'select':{'name':!![],'username':!![]}}}});return _0x28a2b0!==0x0&&(await _0x376b59['shop'][_0x10159a(0x1e2)]({'where':{'id':_0x3cadb2['shopId']},'data':{'balance':_0x31d3a7}}),console[_0x10159a(0x228)](_0x10159a(0x2b9)+_0x3cadb2[_0x10159a(0x29b)]+'\x20balance\x20updated:\x20'+_0x3cadb2[_0x10159a(0x220)][_0x10159a(0x210)]['toFixed'](0x6)+_0x10159a(0x217)+_0x31d3a7[_0x10159a(0x1b6)](0x6)+_0x10159a(0x2c0)+(_0x28a2b0>0x0?'+':'')+_0x28a2b0['toFixed'](0x6)+')')),_0x118bad;});return{'id':_0x883751['id'],'shopId':_0x883751['shopId'],'gateway':_0x883751[_0x2f564e(0x1b2)],'amount':_0x883751[_0x2f564e(0x234)],'currency':_0x883751[_0x2f564e(0x21b)],'status':_0x883751[_0x2f564e(0x292)],'orderId':_0x883751[_0x2f564e(0x20d)],'gatewayOrderId':_0x883751[_0x2f564e(0x1c3)],'customerEmail':_0x883751[_0x2f564e(0x2bd)],'customerName':_0x883751[_0x2f564e(0x291)],'customerCountry':_0x883751[_0x2f564e(0x209)],'customerIp':_0x883751['customerIp'],'customerUa':_0x883751[_0x2f564e(0x290)],'failureMessage':_0x883751[_0x2f564e(0x1fe)],'adminNotes':_0x883751[_0x2f564e(0x2b3)],'chargebackAmount':_0x883751['chargebackAmount'],'statusChangedBy':_0x883751[_0x2f564e(0x1df)],'statusChangedAt':_0x883751[_0x2f564e(0x27a)],'createdAt':_0x883751[_0x2f564e(0x1ff)],'updatedAt':_0x883751[_0x2f564e(0x2b4)],'shop':_0x883751[_0x2f564e(0x220)]};}async[a36_0x4442c8(0x2c2)](_0x2756e1,_0x4ddaf9){const _0x44ccf9=a36_0x4442c8,_0xfd78f4=Math['random']()[_0x44ccf9(0x1fa)](0x24)[_0x44ccf9(0x23a)](0x2,0x9);console[_0x44ccf9(0x228)](_0x44ccf9(0x266)+_0xfd78f4+_0x44ccf9(0x200)+_0x2756e1);const _0x13056a={..._0x4ddaf9};_0x4ddaf9['password']&&_0x4ddaf9[_0x44ccf9(0x1e9)][_0x44ccf9(0x29c)]()!==''?(console[_0x44ccf9(0x228)](_0x44ccf9(0x218)+_0xfd78f4+_0x44ccf9(0x249)+_0x2756e1),_0x13056a[_0x44ccf9(0x1e9)]=await bcryptjs_1[_0x44ccf9(0x2b1)][_0x44ccf9(0x267)](_0x4ddaf9[_0x44ccf9(0x1e9)],0xc)):(console[_0x44ccf9(0x228)](_0x44ccf9(0x218)+_0xfd78f4+']\x20Password\x20not\x20provided\x20or\x20empty,\x20skipping\x20password\x20update'),delete _0x13056a[_0x44ccf9(0x1e9)]);_0x4ddaf9[_0x44ccf9(0x2a3)]&&(_0x13056a['name']=_0x4ddaf9[_0x44ccf9(0x2a3)],delete _0x13056a[_0x44ccf9(0x2a3)]);_0x4ddaf9[_0x44ccf9(0x242)]&&(_0x13056a[_0x44ccf9(0x2d2)]=_0x4ddaf9[_0x44ccf9(0x242)],delete _0x13056a['telegramId']);_0x4ddaf9[_0x44ccf9(0x272)]&&(_0x13056a[_0x44ccf9(0x1c1)]=_0x4ddaf9[_0x44ccf9(0x272)],delete _0x13056a[_0x44ccf9(0x272)]);if(_0x4ddaf9[_0x44ccf9(0x2dc)]){const _0x40fc59=_0x4ddaf9['gateways'][_0x44ccf9(0x1be)](_0x1fc294=>this['getGatewayInternalName'](_0x1fc294));console[_0x44ccf9(0x228)](_0x44ccf9(0x2b6),_0x4ddaf9['gateways'],'->',_0x40fc59),_0x13056a[_0x44ccf9(0x2cf)]=JSON[_0x44ccf9(0x22f)](_0x40fc59),delete _0x13056a['gateways'];}_0x4ddaf9[_0x44ccf9(0x2d7)]&&(console[_0x44ccf9(0x228)](_0x44ccf9(0x2c4)+_0xfd78f4+']\x20Gateway\x20settings\x20before\x20saving:',_0x4ddaf9[_0x44ccf9(0x2d7)]),_0x13056a['gatewaySettings']=JSON[_0x44ccf9(0x22f)](_0x4ddaf9['gatewaySettings']),console['log']('🔧\x20['+_0xfd78f4+_0x44ccf9(0x1f4),_0x13056a[_0x44ccf9(0x2d7)]));_0x4ddaf9[_0x44ccf9(0x263)]&&(_0x4ddaf9[_0x44ccf9(0x263)]['usdtPolygonWallet']!==undefined&&(_0x13056a[_0x44ccf9(0x1a4)]=_0x4ddaf9[_0x44ccf9(0x263)]['usdtPolygonWallet']||null),_0x4ddaf9[_0x44ccf9(0x263)]['usdtTrcWallet']!==undefined&&(_0x13056a[_0x44ccf9(0x216)]=_0x4ddaf9[_0x44ccf9(0x263)][_0x44ccf9(0x216)]||null),_0x4ddaf9[_0x44ccf9(0x263)][_0x44ccf9(0x20e)]!==undefined&&(_0x13056a[_0x44ccf9(0x20e)]=_0x4ddaf9[_0x44ccf9(0x263)][_0x44ccf9(0x20e)]||null),_0x4ddaf9['wallets']['usdcPolygonWallet']!==undefined&&(_0x13056a[_0x44ccf9(0x28d)]=_0x4ddaf9['wallets'][_0x44ccf9(0x28d)]||null),delete _0x13056a[_0x44ccf9(0x263)]);const _0x2bce6d=await database_1['default'][_0x44ccf9(0x220)]['update']({'where':{'id':_0x2756e1},'data':_0x13056a,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return console[_0x44ccf9(0x228)](_0x44ccf9(0x24f)+_0xfd78f4+_0x44ccf9(0x1c2),_0x2bce6d[_0x44ccf9(0x2d7)]),{'id':_0x2bce6d['id'],'fullName':_0x2bce6d[_0x44ccf9(0x22e)],'username':_0x2bce6d[_0x44ccf9(0x1ac)],'telegramId':_0x2bce6d[_0x44ccf9(0x2d2)],'merchantUrl':_0x2bce6d['shopUrl'],'gateways':_0x2bce6d[_0x44ccf9(0x2cf)]?JSON['parse'](_0x2bce6d['paymentGateways']):null,'gatewaySettings':_0x2bce6d[_0x44ccf9(0x2d7)]?JSON[_0x44ccf9(0x207)](_0x2bce6d['gatewaySettings']):null,'publicKey':_0x2bce6d[_0x44ccf9(0x1c8)],'wallets':{'usdtPolygonWallet':_0x2bce6d[_0x44ccf9(0x1a4)],'usdtTrcWallet':_0x2bce6d[_0x44ccf9(0x216)],'usdtErcWallet':_0x2bce6d[_0x44ccf9(0x20e)],'usdcPolygonWallet':_0x2bce6d[_0x44ccf9(0x28d)]},'status':_0x2bce6d[_0x44ccf9(0x292)],'createdAt':_0x2bce6d[_0x44ccf9(0x1ff)]};}async[a36_0x4442c8(0x227)](_0x919232){const _0x15c1e3=a36_0x4442c8,_0x29edeb=await database_1['default'][_0x15c1e3(0x220)]['update']({'where':{'id':_0x919232},'data':{'status':_0x15c1e3(0x258)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x29edeb['id'],'fullName':_0x29edeb['name'],'username':_0x29edeb[_0x15c1e3(0x1ac)],'telegramId':_0x29edeb['telegram'],'merchantUrl':_0x29edeb[_0x15c1e3(0x1c1)],'gateways':_0x29edeb[_0x15c1e3(0x2cf)]?JSON['parse'](_0x29edeb[_0x15c1e3(0x2cf)]):null,'gatewaySettings':_0x29edeb[_0x15c1e3(0x2d7)]?JSON[_0x15c1e3(0x207)](_0x29edeb[_0x15c1e3(0x2d7)]):null,'publicKey':_0x29edeb[_0x15c1e3(0x1c8)],'wallets':{'usdtPolygonWallet':_0x29edeb[_0x15c1e3(0x1a4)],'usdtTrcWallet':_0x29edeb[_0x15c1e3(0x216)],'usdtErcWallet':_0x29edeb[_0x15c1e3(0x20e)],'usdcPolygonWallet':_0x29edeb[_0x15c1e3(0x28d)]},'status':_0x29edeb[_0x15c1e3(0x292)],'createdAt':_0x29edeb[_0x15c1e3(0x1ff)]};}async[a36_0x4442c8(0x1cf)](_0x52d7a7){const _0x2a4e42=a36_0x4442c8,_0x1c7487=await database_1[_0x2a4e42(0x2b1)][_0x2a4e42(0x220)][_0x2a4e42(0x1e2)]({'where':{'id':_0x52d7a7},'data':{'status':_0x2a4e42(0x2c6)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x1c7487['id'],'fullName':_0x1c7487[_0x2a4e42(0x22e)],'username':_0x1c7487['username'],'telegramId':_0x1c7487[_0x2a4e42(0x2d2)],'merchantUrl':_0x1c7487[_0x2a4e42(0x1c1)],'gateways':_0x1c7487[_0x2a4e42(0x2cf)]?JSON['parse'](_0x1c7487[_0x2a4e42(0x2cf)]):null,'gatewaySettings':_0x1c7487[_0x2a4e42(0x2d7)]?JSON[_0x2a4e42(0x207)](_0x1c7487[_0x2a4e42(0x2d7)]):null,'publicKey':_0x1c7487['publicKey'],'wallets':{'usdtPolygonWallet':_0x1c7487[_0x2a4e42(0x1a4)],'usdtTrcWallet':_0x1c7487['usdtTrcWallet'],'usdtErcWallet':_0x1c7487[_0x2a4e42(0x20e)],'usdcPolygonWallet':_0x1c7487[_0x2a4e42(0x28d)]},'status':_0x1c7487[_0x2a4e42(0x292)],'createdAt':_0x1c7487[_0x2a4e42(0x1ff)]};}async['getAllUsers'](_0x3d090a){const _0x18cd55=a36_0x4442c8,{page:_0x296313,limit:_0x13a7ec,status:_0x27a7ad}=_0x3d090a,_0x1176b4=(_0x296313-0x1)*_0x13a7ec,_0x7f6271={};_0x27a7ad&&(_0x7f6271['status']=_0x27a7ad['toUpperCase']());const [_0x484e8b,_0x1707f6]=await Promise['all']([database_1['default']['shop'][_0x18cd55(0x280)]({'where':_0x7f6271,'skip':_0x1176b4,'take':_0x13a7ec,'orderBy':{'createdAt':_0x18cd55(0x23c)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}}),database_1[_0x18cd55(0x2b1)]['shop'][_0x18cd55(0x22a)]({'where':_0x7f6271})]);return{'users':_0x484e8b['map'](_0x2a5e06=>{const _0x45cf07=_0x18cd55,_0x23751f=_0x2a5e06[_0x45cf07(0x2cf)]?JSON[_0x45cf07(0x207)](_0x2a5e06['paymentGateways']):null,_0x3bd87d=_0x23751f?_0x23751f[_0x45cf07(0x1be)](_0x27e200=>this['getGatewayDisplayName'](_0x27e200)):null;return{'id':_0x2a5e06['id'],'fullName':_0x2a5e06[_0x45cf07(0x22e)],'username':_0x2a5e06[_0x45cf07(0x1ac)],'telegramId':_0x2a5e06[_0x45cf07(0x2d2)],'merchantUrl':_0x2a5e06[_0x45cf07(0x1c1)],'gateways':_0x3bd87d,'gatewaySettings':_0x2a5e06['gatewaySettings']?JSON[_0x45cf07(0x207)](_0x2a5e06[_0x45cf07(0x2d7)]):null,'publicKey':_0x2a5e06[_0x45cf07(0x1c8)],'wallets':{'usdtPolygonWallet':_0x2a5e06['usdtPolygonWallet'],'usdtTrcWallet':_0x2a5e06[_0x45cf07(0x216)],'usdtErcWallet':_0x2a5e06[_0x45cf07(0x20e)],'usdcPolygonWallet':_0x2a5e06[_0x45cf07(0x28d)]},'status':_0x2a5e06['status'],'createdAt':_0x2a5e06[_0x45cf07(0x1ff)]};}),'pagination':{'page':_0x296313,'limit':_0x13a7ec,'total':_0x1707f6,'totalPages':Math[_0x18cd55(0x1b8)](_0x1707f6/_0x13a7ec)}};}async[a36_0x4442c8(0x1ea)](_0x5a433c){const _0x517fe4=a36_0x4442c8,_0x34296d=await database_1[_0x517fe4(0x2b1)]['shop'][_0x517fe4(0x22b)]({'where':{'id':_0x5a433c},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x34296d)return null;const _0x144aab=_0x34296d[_0x517fe4(0x2cf)]?JSON[_0x517fe4(0x207)](_0x34296d['paymentGateways']):null,_0x316b6d=_0x144aab?_0x144aab[_0x517fe4(0x1be)](_0xbb8d0c=>this[_0x517fe4(0x282)](_0xbb8d0c)):null;return _0x144aab&&_0x316b6d&&console['log']('🔄\x20Gateway\x20mapping\x20(get):',_0x144aab,'->',_0x316b6d),{'id':_0x34296d['id'],'fullName':_0x34296d[_0x517fe4(0x22e)],'username':_0x34296d[_0x517fe4(0x1ac)],'telegramId':_0x34296d[_0x517fe4(0x2d2)],'merchantUrl':_0x34296d['shopUrl'],'gateways':_0x316b6d,'gatewaySettings':_0x34296d[_0x517fe4(0x2d7)]?JSON[_0x517fe4(0x207)](_0x34296d[_0x517fe4(0x2d7)]):null,'publicKey':_0x34296d['publicKey'],'wallets':{'usdtPolygonWallet':_0x34296d[_0x517fe4(0x1a4)],'usdtTrcWallet':_0x34296d[_0x517fe4(0x216)],'usdtErcWallet':_0x34296d['usdtErcWallet'],'usdcPolygonWallet':_0x34296d[_0x517fe4(0x28d)]},'status':_0x34296d[_0x517fe4(0x292)],'createdAt':_0x34296d[_0x517fe4(0x1ff)]};}async[a36_0x4442c8(0x26f)](_0x49ada1){const _0x1af3a2=a36_0x4442c8,{fullName:_0x59590d,username:_0x15c262,password:_0x2ead8d,telegramId:_0x48f9f0,merchantUrl:_0x4ef830,gateways:_0x1e8eb3,gatewaySettings:_0x28e448,wallets:_0x2eface}=_0x49ada1,_0x71a871=await database_1[_0x1af3a2(0x2b1)]['shop'][_0x1af3a2(0x22b)]({'where':{'username':_0x15c262}});if(_0x71a871)throw new Error(_0x1af3a2(0x287));if(_0x48f9f0){const _0x3fc5b6=await database_1[_0x1af3a2(0x2b1)][_0x1af3a2(0x220)][_0x1af3a2(0x22b)]({'where':{'telegram':_0x48f9f0}});if(_0x3fc5b6)throw new Error(_0x1af3a2(0x226));}const _0x4038f8=await bcryptjs_1[_0x1af3a2(0x2b1)][_0x1af3a2(0x267)](_0x2ead8d,0xc),_0x48367d=_0x1af3a2(0x2d5)+crypto_1[_0x1af3a2(0x2b1)][_0x1af3a2(0x215)](0x20)[_0x1af3a2(0x1fa)](_0x1af3a2(0x224)),_0x4eb5ec=_0x1af3a2(0x261)+crypto_1[_0x1af3a2(0x2b1)][_0x1af3a2(0x215)](0x20)[_0x1af3a2(0x1fa)](_0x1af3a2(0x224)),_0x3f3a8c=_0x1e8eb3?_0x1e8eb3[_0x1af3a2(0x1be)](_0x16b97b=>this['getGatewayInternalName'](_0x16b97b)):null;_0x1e8eb3&&_0x3f3a8c&&console[_0x1af3a2(0x228)]('🔄\x20Gateway\x20mapping\x20(create):',_0x1e8eb3,'->',_0x3f3a8c);const _0x47d13b=await database_1[_0x1af3a2(0x2b1)][_0x1af3a2(0x220)][_0x1af3a2(0x239)]({'data':{'name':_0x59590d,'username':_0x15c262,'password':_0x4038f8,'telegram':_0x48f9f0,'shopUrl':_0x4ef830,'paymentGateways':_0x3f3a8c?JSON[_0x1af3a2(0x22f)](_0x3f3a8c):null,'gatewaySettings':_0x28e448?JSON['stringify'](_0x28e448):null,'usdtPolygonWallet':_0x2eface?.[_0x1af3a2(0x1a4)]||null,'usdtTrcWallet':_0x2eface?.[_0x1af3a2(0x216)]||null,'usdtErcWallet':_0x2eface?.[_0x1af3a2(0x20e)]||null,'usdcPolygonWallet':_0x2eface?.[_0x1af3a2(0x28d)]||null,'publicKey':_0x48367d,'secretKey':_0x4eb5ec,'status':'ACTIVE'},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x47d13b['id'],'fullName':_0x47d13b[_0x1af3a2(0x22e)],'username':_0x47d13b[_0x1af3a2(0x1ac)],'telegramId':_0x47d13b[_0x1af3a2(0x2d2)],'merchantUrl':_0x47d13b[_0x1af3a2(0x1c1)],'gateways':_0x47d13b[_0x1af3a2(0x2cf)]?JSON['parse'](_0x47d13b[_0x1af3a2(0x2cf)]):null,'gatewaySettings':_0x47d13b[_0x1af3a2(0x2d7)]?JSON[_0x1af3a2(0x207)](_0x47d13b[_0x1af3a2(0x2d7)]):null,'publicKey':_0x47d13b[_0x1af3a2(0x1c8)],'wallets':{'usdtPolygonWallet':_0x47d13b[_0x1af3a2(0x1a4)],'usdtTrcWallet':_0x47d13b[_0x1af3a2(0x216)],'usdtErcWallet':_0x47d13b[_0x1af3a2(0x20e)],'usdcPolygonWallet':_0x47d13b[_0x1af3a2(0x28d)]},'status':_0x47d13b[_0x1af3a2(0x292)],'createdAt':_0x47d13b['createdAt']};}async[a36_0x4442c8(0x285)](_0x49843b){const _0x35af4b=a36_0x4442c8;await database_1[_0x35af4b(0x2b1)][_0x35af4b(0x220)][_0x35af4b(0x1c5)]({'where':{'id':_0x49843b}});}[a36_0x4442c8(0x26d)](_0x32aed0,_0x23c496,_0x3270fa){const _0x1f0dca=a36_0x4442c8,_0x39bc58=new Map(),_0x17e061=new Date(_0x23c496);while(_0x17e061<=_0x3270fa){const _0x24e078=_0x17e061[_0x1f0dca(0x1a7)]()[_0x1f0dca(0x255)]('T')[0x0];_0x39bc58[_0x1f0dca(0x245)](_0x24e078,{'revenue':0x0,'count':0x0}),_0x17e061[_0x1f0dca(0x264)](_0x17e061['getDate']()+0x1);}for(const _0x3b23c4 of _0x32aed0){const _0x1983c8=_0x3b23c4[_0x1f0dca(0x1ff)][_0x1f0dca(0x1a7)]()['split']('T')[0x0],_0x566b8f=_0x39bc58[_0x1f0dca(0x1a8)](_0x1983c8);_0x566b8f&&(_0x566b8f[_0x1f0dca(0x22a)]+=0x1,_0x3b23c4[_0x1f0dca(0x292)]===_0x1f0dca(0x1f1)&&(_0x3b23c4[_0x1f0dca(0x26e)]?_0x566b8f[_0x1f0dca(0x2c7)]+=_0x3b23c4[_0x1f0dca(0x26e)]:console[_0x1f0dca(0x228)](_0x1f0dca(0x1aa)+_0x3b23c4['id']+'\x20missing\x20amountUSDT,\x20using\x20fallback\x20conversion')));}const _0x5f09fe=[],_0x160fbf=[];for(const [_0x2e5e43,_0xd8d3d0]of _0x39bc58){_0x5f09fe[_0x1f0dca(0x286)]({'date':_0x2e5e43,'amount':Math[_0x1f0dca(0x22c)](_0xd8d3d0[_0x1f0dca(0x2c7)]*0x64)/0x64}),_0x160fbf[_0x1f0dca(0x286)]({'date':_0x2e5e43,'count':_0xd8d3d0['count']});}return{'dailyRevenue':_0x5f09fe,'dailyPayments':_0x160fbf};}}function a36_0x2f26(_0x39c93d,_0x5995b9){const _0x281a9f=a36_0x281a();return a36_0x2f26=function(_0x2f2670,_0x31f6a2){_0x2f2670=_0x2f2670-0x1a3;let _0x2c26e7=_0x281a9f[_0x2f2670];return _0x2c26e7;},a36_0x2f26(_0x39c93d,_0x5995b9);}exports['AdminService']=AdminService;