'use strict';const a36_0x5a6729=a36_0x1e38;function a36_0x1e38(_0x591891,_0x15c1cb){const _0x1bc1d1=a36_0x1bc1();return a36_0x1e38=function(_0x1e38de,_0x215991){_0x1e38de=_0x1e38de-0x65;let _0x2cd8dc=_0x1bc1d1[_0x1e38de];return _0x2cd8dc;},a36_0x1e38(_0x591891,_0x15c1cb);}(function(_0x4dbc83,_0x24a542){const _0x1b0989=a36_0x1e38,_0x1ae910=_0x4dbc83();while(!![]){try{const _0xe28cd7=-parseInt(_0x1b0989(0xd2))/0x1+-parseInt(_0x1b0989(0x9e))/0x2*(parseInt(_0x1b0989(0x162))/0x3)+-parseInt(_0x1b0989(0x196))/0x4+parseInt(_0x1b0989(0x176))/0x5+-parseInt(_0x1b0989(0xe8))/0x6+-parseInt(_0x1b0989(0x83))/0x7*(-parseInt(_0x1b0989(0x15a))/0x8)+parseInt(_0x1b0989(0xbd))/0x9*(parseInt(_0x1b0989(0x8d))/0xa);if(_0xe28cd7===_0x24a542)break;else _0x1ae910['push'](_0x1ae910['shift']());}catch(_0x32faef){_0x1ae910['push'](_0x1ae910['shift']());}}}(a36_0x1bc1,0x3619d));function a36_0x1bc1(){const _0x2ec737=['status','getPayoutStats','30d','\x20\x20\x20üè™\x20Gateway\x20earnings:\x20','\x27\x20to\x20name\x20\x27','paymentsCount','üîÑ\x20Gateway\x20mapping:','totalTurnover',',\x20userId:\x20','üí∞\x20Payment\x20','\x20\x20\x20üí≥\x20Total\x20payments:\x20','\x20payments)','\x20USDT\x20(after\x20','admin','pendingPayout','createUser','totalCommissionRate','txid','hash','NONEXISTENT_GATEWAY_FILTER','\x20\x20\x20üí∏\x20Total\x20payouts\x20(all\x20time):\x20','lte','successUrl','customerName','failureMessage','../types/gateway','709528nkxxJl','whiteUrl','publicKey','toString','dailyPayments','toFixed',']\x20User\x20updated,\x20gatewaySettings\x20from\x20DB:','balance','6QIUMWG','shopUrl','usdtErcWallet','wallets','‚ö†Ô∏è\x20Requested\x20gateway\x20\x27','reduce','\x20in\x20','substr','sk_','\x20USDT\x20(actual\x20balances)','\x20\x20\x20Subtracted\x20from\x20balance:\x20-','Shop\x20not\x20found','default','üîÑ\x20Admin\x20updating\x20payment\x20','password','revenue','amount','commission','usdtPolygonWallet','\x20USDT\x20(after\x20payouts)','1681080OkEgvA','\x20USDT\x20(','$transaction','\x20\x20\x20üåê\x20IP:\x20','../config/database','Payment\x20not\x20found','gatewaySettings','\x20\x20\x20üíµ\x20Available\x20balance:\x20','gatewayOrderId','pk_','Test\x20Gateway',':\x20commission\x20=\x20','generateDailyStatistics','getTime','__importDefault','getFullYear','Rapyd','awaitingPayout','currency','\x27\x20->\x20name\x20\x27','orderId','stringify','shopId','notes','network','findMany','getMonth','count','‚úÖ\x20Using\x20gateway\x20filter:\x20\x27','hex','üîÑ\x20Gateway\x20mapping\x20(get):','KLYME\x20EU','595156LSQXhg','update','‚úÖ\x20Customer\x20data\x20updated\x20for\x20payment\x20','split','convertToUSDT','üìä\x20Merchants\x20awaiting\x20payout:\x20','%\x20commission)','getDate','groupBy','üéØ\x20updateUser\x20called\x20with\x20ID:\x20','Error\x20parsing\x20gateway\x20settings\x20for\x20shop\x20','üîÑ\x20Converted\x20gateway\x20ID\x20\x27',',\x20Commission:\x20','toUpperCase','üìÖ\x20Period\x20\x27all\x27:\x20Using\x20start\x20date\x20from\x20first\x20payment:\x20','\x20USDT\x20(same\x20as\x20awaiting)','all','parse','activateUser','üìä\x20[ADMIN]\x20Using\x20saved\x20amountAfterGatewayCommissionUSDT:\x20','map','period','shop',']\x20Updating\x20password\x20for\x20user\x20','periodFrom','merchantUrl','paidOutUSDT','\x27\x20as\x20is\x20(not\x20found\x20in\x20mappings)','length','gateway','commissionUSDT','2020-01-01','\x20USDT\x20(theoretical\x20net)','findFirst','gte',',\x20successful:\x20','getGatewayIdByName','7NIZRIF','üìä\x20Merchant\x20statistics\x20calculated:','asc','get','totalAmountAfterCommissionUSDT','telegram','thisMonth','üîß\x20[','\x20merchants','gateways','1797980HOgwXC','üí≥\x20Payout\x20wallet\x20for\x20','\x20\x20\x20Transaction\x20hash:\x20',']\x20Password\x20not\x20provided\x20or\x20empty,\x20skipping\x20password\x20update','not\x20set','CHARGEBACK','username','\x20for\x20shop\x20','paidAt','name','aggregate','\x20\x20\x20Merchant\x20gets:\x20','Error\x20processing\x20payment\x20','PAID','getMerchantsSelection','usdtTrcWallet','availableBalance','386186AIktKT','‚úÖ\x20Payout\x20created:\x20','forEach','round','plisio','suspendUser','dailyRevenue','\x20\x20\x20Balance:\x20','üìä\x20Getting\x20merchants\x20awaiting\x20payout\x20with\x20filters:','merchantEarnings','üìä\x20Available\x20gateways\x20in\x20database:','\x20USDT\x20(+','month','toISOString','cointopay','Insufficient\x20balance.\x20Available:\x20','create','random','entries',']\x20Gateway\x20settings\x20JSON\x20string:','_sum','bcryptjs','Error\x20parsing\x20gateway\x20settings\x20for\x20payment\x20','\x20USDT\x20(without\x20commission)','\x20paid\x20payments\x20for\x20analysis','Username\x20already\x20exists','amountUSDT','klyme_de','dateFrom','%\x20from\x20','insensitive','36HbEYrW','üí∞\x20Shop\x20','averageCheckUSDT','AdminService','üìä\x20Payout\x20statistics\x20calculated:','getAllUsers','chargebackAmount','getUserById','createPayout','ceil','randomBytes','toLowerCase','custom','paymentGateways','totalPaidOut','üìä\x20Getting\x20merchant\x20statistics\x20with\x20filters:','COMPLETED','\x20PAID\x20payments','date','\x20became\x20PAID:','averageCommissionRate','158539ZMSLQw','fullName','getPayoutById','currencyService','updatedAt','\x20\x20\x20üí∞\x20Total\x20turnover:\x20','error','\x20USDT,\x20Requested:\x20','dateTo','90d','some','\x20\x20\x20Gateway:\x20','findUnique','turnover','\x20USDT\x20(-','üìä\x20[ADMIN]\x20Calculating\x20commission\x20manually\x20for\x20payment\x20','\x20active\x20merchants\x20for\x20selection','telegramId','üí∏\x20CHARGEBACK\x20penalty:\x20-','ACTIVE','Telegram\x20username\x20already\x20exists','\x20\x20\x20Added\x20to\x20balance:\x20+','1373928JeJyba','\x20\x20\x20‚úÖ\x20Total\x20available\x20for\x20payout:\x20','üîê\x20[','customerCountry','pendingUrl','desc','customerEmail','_count','getGatewayDisplayName','\x20\x20\x20Current\x20total\x20paid\x20out:\x20','\x20balance\x20updated:','erc20','‚ö†Ô∏è\x20Gateway\x20\x27','statusChangedBy','polygon_usdc','üîÑ\x20REFUND:\x20Payment\x20amount\x20already\x20deducted\x20from\x20balance','customerIp','\x20merchants\x20with\x20positive\x20balance','PENDING','amountAfterCommissionUSDT','payment','adminNotes','__esModule','getPaymentById','polygon','summary','createdAt','klyme_gb','getMerchantsAwaitingPayout','üí±\x20Currency\x20filter\x20applied:\x20','updatePaymentStatus','\x27\x20->\x20ID\x20\x27','payout','getAllPayments','\x20USDT','\x20\x20\x20Current\x20balance:\x20','mastercard','turnoverUSDT','üìä\x20Final\x20WHERE\x20conditions:','usdcPolygonWallet','\x20USDT\x20for\x20payment\x20','getMerchantStatistics','merchantEarningsUSDT','./currencyService','delete','set','customerUa','\x20\x20\x20Total\x20paid\x20out:\x20','getGatewayInternalName','\x27\x20not\x20found.\x20Available\x20gateways:\x20','\x20no\x20longer\x20PAID:','\x20->\x20','values','\x20\x20\x20Full\x20amount:\x20','MasterCard','statusChangedAt','\x20\x20\x20üñ•Ô∏è\x20User\x20Agent:\x20','join','totalPayments','\x20order','log','totalPayout','üí∞\x20Found\x20','totalAmountUSDT','\x20\x20\x20Merchant\x20loses:\x20','üí∞\x20Creating\x20payout\x20for\x20shop\x20','\x27\x20(from\x20\x27','‚ö†Ô∏è\x20Payment\x20','\x20\x20\x20Payout\x20amount:\x20',']\x20Gateway\x20settings\x20before\x20saving:','\x20balance\x20updated:\x20','\x20\x20\x20ÔøΩüìä\x20Total\x20payments:\x20','üìä\x20Calculating\x20payout\x20statistics...','getGatewayNameById','\x20\x20\x20üí∞\x20Total\x20payments\x20turnover:\x20','test_gateway','0000','updateUser','KLYME\x20DE','\x20to\x20','üìä\x20Total\x20payments\x20(including\x20failed):\x20','periodTo','amountAfterGatewayCommissionUSDT','\x20\x20\x20üìä\x20Commission\x20difference:\x20','\x20USDT\x20(gross\x20revenue)','not\x20specified','gatewayEarnings','push'];a36_0x1bc1=function(){return _0x2ec737;};return a36_0x1bc1();}var __importDefault=this&&this[a36_0x5a6729(0x184)]||function(_0x23d8d1){const _0x51ec95=a36_0x5a6729;return _0x23d8d1&&_0x23d8d1[_0x51ec95(0xfe)]?_0x23d8d1:{'default':_0x23d8d1};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a36_0x5a6729(0xc0)]=void 0x0;const database_1=__importDefault(require(a36_0x5a6729(0x17a))),bcryptjs_1=__importDefault(require(a36_0x5a6729(0xb3))),crypto_1=__importDefault(require('crypto')),currencyService_1=require(a36_0x5a6729(0x113)),gateway_1=require(a36_0x5a6729(0x159));class AdminService{async[a36_0x5a6729(0x141)](){const _0x5327a4=a36_0x5a6729;console[_0x5327a4(0x124)](_0x5327a4(0x130));const _0x225e39=await database_1['default'][_0x5327a4(0x74)][_0x5327a4(0x97)]({'_sum':{'balance':!![],'totalPaidOut':!![]},'where':{'status':'ACTIVE'}}),_0x2ed1c3=await this[_0x5327a4(0x104)]({'page':0x1,'limit':0x3e8}),_0x2a85df=await database_1[_0x5327a4(0x16e)][_0x5327a4(0xfc)]['count']({'where':{'status':_0x5327a4(0x9a),'gateway':{'not':_0x5327a4(0x133)}}}),_0x2219ee=new Date(),_0x2c2120=new Date(_0x2219ee[_0x5327a4(0x185)](),_0x2219ee[_0x5327a4(0x190)](),0x1),_0x505616=new Date(_0x2219ee[_0x5327a4(0x185)](),_0x2219ee['getMonth']()+0x1,0x0,0x17,0x3b,0x3b,0x3e7),_0x12f05f=await database_1[_0x5327a4(0x16e)][_0x5327a4(0x108)][_0x5327a4(0x97)]({'_sum':{'amount':!![]},'where':{'createdAt':{'gte':_0x2c2120,'lte':_0x505616},'status':'COMPLETED'}}),_0x353bce=_0x225e39[_0x5327a4(0xb2)]['totalPaidOut']||0x0,_0x4fb121=_0x2ed1c3[_0x5327a4(0x101)][_0x5327a4(0x87)],_0x121144=_0x12f05f[_0x5327a4(0xb2)][_0x5327a4(0x172)]||0x0,_0x3b83b8={'totalPayout':Math[_0x5327a4(0xa1)](_0x353bce*0x64)/0x64,'awaitingPayout':Math[_0x5327a4(0xa1)](_0x4fb121*0x64)/0x64,'thisMonth':Math['round'](_0x121144*0x64)/0x64,'availableBalance':Math[_0x5327a4(0xa1)](_0x4fb121*0x64)/0x64,'totalPayments':_0x2a85df};return console['log'](_0x5327a4(0xc1)),console[_0x5327a4(0x124)]('\x20\x20\x20üí∞\x20Total\x20payout:\x20'+_0x3b83b8[_0x5327a4(0x125)]+'\x20USDT\x20(total\x20paid\x20to\x20merchants)'),console['log']('\x20\x20\x20‚è≥\x20Awaiting\x20payout:\x20'+_0x3b83b8[_0x5327a4(0x187)]+'\x20USDT\x20(with\x20commission\x20deducted)'),console['log'](_0x5327a4(0x17d)+_0x3b83b8[_0x5327a4(0x9d)]+_0x5327a4(0x6d)),console['log']('\x20\x20\x20üìÖ\x20This\x20month:\x20'+_0x3b83b8[_0x5327a4(0x89)]+_0x5327a4(0x10a)),console['log'](_0x5327a4(0x14a)+_0x3b83b8[_0x5327a4(0x122)]+_0x5327a4(0xce)),console[_0x5327a4(0x124)]('\x20\x20\x20üîç\x20Raw\x20balance\x20sum:\x20'+(_0x225e39[_0x5327a4(0xb2)][_0x5327a4(0x161)]||0x0)['toFixed'](0x2)+_0x5327a4(0xb5)),console['log'](_0x5327a4(0x13b)+((_0x225e39[_0x5327a4(0xb2)][_0x5327a4(0x161)]||0x0)-_0x4fb121)[_0x5327a4(0x15f)](0x2)+'\x20USDT'),_0x3b83b8;}async['updateCustomerData'](_0x561dba,_0x39dd94){const _0x22369f=a36_0x5a6729;console[_0x22369f(0x124)]('üîÑ\x20Updating\x20customer\x20data\x20for\x20payment\x20'+_0x561dba+':',_0x39dd94);const _0x134ad2=await database_1[_0x22369f(0x16e)]['payment']['findUnique']({'where':{'id':_0x561dba},'select':{'id':!![],'customerEmail':!![],'customerName':!![],'customerCountry':!![],'customerIp':!![],'customerUa':!![]}});if(!_0x134ad2)throw new Error(_0x22369f(0x17b));const _0x412cba={};_0x39dd94['customerCountry']!==undefined&&(_0x412cba[_0x22369f(0xeb)]=_0x39dd94[_0x22369f(0xeb)]||null);_0x39dd94[_0x22369f(0xf8)]!==undefined&&(_0x412cba[_0x22369f(0xf8)]=_0x39dd94[_0x22369f(0xf8)]||null);_0x39dd94['customerUa']!==undefined&&(_0x412cba['customerUa']=_0x39dd94[_0x22369f(0x116)]||null);const _0x4fc322=await database_1['default'][_0x22369f(0xfc)][_0x22369f(0x197)]({'where':{'id':_0x561dba},'data':{..._0x412cba,'updatedAt':new Date()},'select':{'id':!![],'customerEmail':!![],'customerName':!![],'customerCountry':!![],'customerIp':!![],'customerUa':!![],'updatedAt':!![]}});return console[_0x22369f(0x124)](_0x22369f(0x198)+_0x561dba),console[_0x22369f(0x124)]('\x20\x20\x20üåç\x20Country:\x20'+_0x134ad2[_0x22369f(0xeb)]+_0x22369f(0x11b)+_0x4fc322[_0x22369f(0xeb)]),console[_0x22369f(0x124)](_0x22369f(0x179)+_0x134ad2['customerIp']+_0x22369f(0x11b)+_0x4fc322[_0x22369f(0xf8)]),console[_0x22369f(0x124)](_0x22369f(0x120)+(_0x134ad2['customerUa']?'set':_0x22369f(0x91))+_0x22369f(0x11b)+(_0x4fc322[_0x22369f(0x116)]?_0x22369f(0x115):'not\x20set')),_0x4fc322;}async['getSystemStatistics'](_0x181069){const _0x70b1d8=a36_0x5a6729,_0x4ab4ab=new Date();let _0x151790;switch(_0x181069){case'7d':_0x151790=new Date(_0x4ab4ab[_0x70b1d8(0x183)]()-0x7*0x18*0x3c*0x3c*0x3e8);break;case _0x70b1d8(0x142):_0x151790=new Date(_0x4ab4ab['getTime']()-0x1e*0x18*0x3c*0x3c*0x3e8);break;case _0x70b1d8(0xdb):_0x151790=new Date(_0x4ab4ab[_0x70b1d8(0x183)]()-0x5a*0x18*0x3c*0x3c*0x3e8);break;case _0x70b1d8(0x6e):const _0x533bac=await database_1[_0x70b1d8(0x16e)][_0x70b1d8(0xfc)][_0x70b1d8(0x7f)]({'where':{'gateway':{'not':_0x70b1d8(0x133)}},'orderBy':{'createdAt':_0x70b1d8(0x85)},'select':{'createdAt':!![]}});_0x151790=_0x533bac?_0x533bac['createdAt']:new Date(_0x70b1d8(0x7d)),console[_0x70b1d8(0x124)](_0x70b1d8(0x6c)+_0x151790['toISOString']());break;default:_0x151790=new Date(_0x4ab4ab[_0x70b1d8(0x183)]()-0x1e*0x18*0x3c*0x3c*0x3e8);}const [_0x174e35,_0x2e3b72,_0x1524eb,_0x18ddfc,_0x3b4ae4,_0x1cd282]=await Promise[_0x70b1d8(0x6e)]([database_1[_0x70b1d8(0x16e)]['shop'][_0x70b1d8(0x191)](),database_1[_0x70b1d8(0x16e)][_0x70b1d8(0x74)][_0x70b1d8(0x191)]({'where':{'status':'ACTIVE'}}),database_1['default'][_0x70b1d8(0xfc)][_0x70b1d8(0x191)]({'where':{'status':_0x70b1d8(0x9a),'createdAt':{'gte':_0x151790},'gateway':{'not':_0x70b1d8(0x133)}}}),database_1[_0x70b1d8(0x16e)][_0x70b1d8(0xfc)][_0x70b1d8(0x18f)]({'where':{'status':_0x70b1d8(0x9a),'createdAt':{'gte':_0x151790},'gateway':{'not':_0x70b1d8(0x133)}},'select':{'amount':!![],'currency':!![],'amountAfterGatewayCommissionUSDT':!![]}}),database_1[_0x70b1d8(0x16e)][_0x70b1d8(0xfc)]['findMany']({'where':{'gateway':{'not':'test_gateway'}},'take':0xa,'orderBy':{'createdAt':'desc'},'include':{'shop':{'select':{'name':!![],'username':!![]}}}}),database_1[_0x70b1d8(0x16e)][_0x70b1d8(0xfc)][_0x70b1d8(0x18f)]({'where':{'createdAt':{'gte':_0x151790},'gateway':{'not':_0x70b1d8(0x133)}},'select':{'amount':!![],'currency':!![],'status':!![],'amountUSDT':!![],'createdAt':!![]}})]);let _0x45e5bd=0x0,_0x3b5dfd=0x0;for(const _0x43bd13 of _0x18ddfc){const _0x4f1651=await currencyService_1[_0x70b1d8(0xd5)][_0x70b1d8(0x19a)](_0x43bd13[_0x70b1d8(0x172)],_0x43bd13['currency']);_0x45e5bd+=_0x4f1651;if(_0x43bd13[_0x70b1d8(0x13a)]){const _0x402f30=await currencyService_1[_0x70b1d8(0xd5)][_0x70b1d8(0x19a)](_0x43bd13[_0x70b1d8(0x172)],_0x43bd13['currency']),_0x5cfe2b=_0x43bd13['amountAfterGatewayCommissionUSDT'],_0x25aed9=_0x402f30-_0x5cfe2b;_0x3b5dfd+=_0x25aed9;}}const _0x2bb415=_0x1524eb>0x0?_0x45e5bd/_0x1524eb:0x0,_0x36befe=this['generateDailyStatistics'](_0x1cd282,_0x151790,_0x4ab4ab),_0x555490=await database_1['default']['payment'][_0x70b1d8(0x191)]({'where':{'createdAt':{'gte':_0x151790},'gateway':{'not':_0x70b1d8(0x133)}}}),_0x1a9d6c=_0x555490>0x0?_0x1524eb/_0x555490*0x64:0x0;return{'totalShops':_0x174e35,'activeShops':_0x2e3b72,'totalPayments':_0x1524eb,'successfulPayments':_0x1524eb,'totalAttempts':_0x555490,'totalRevenue':Math['round'](_0x45e5bd*0x64)/0x64,'trapayEarnings':Math[_0x70b1d8(0xa1)](_0x3b5dfd*0x64)/0x64,'averagePaymentAmount':Math[_0x70b1d8(0xa1)](_0x2bb415*0x64)/0x64,'conversionRate':Math[_0x70b1d8(0xa1)](_0x1a9d6c*0x64)/0x64,'dailyRevenue':_0x36befe[_0x70b1d8(0xa4)],'dailyPayments':_0x36befe[_0x70b1d8(0x15e)],'recentPayments':_0x3b4ae4[_0x70b1d8(0x72)](_0x535674=>({'id':_0x535674['id'],'amount':_0x535674[_0x70b1d8(0x172)],'currency':_0x535674[_0x70b1d8(0x188)],'status':_0x535674[_0x70b1d8(0x140)],'gateway':_0x535674[_0x70b1d8(0x7b)],'shop':_0x535674[_0x70b1d8(0x74)],'createdAt':_0x535674['createdAt']}))};}async[a36_0x5a6729(0x111)](_0x3c432c){const _0x363ff2=a36_0x5a6729;console['log'](_0x363ff2(0xcc),_0x3c432c);let _0x3777ec,_0x85290b=new Date();if(_0x3c432c[_0x363ff2(0x73)]===_0x363ff2(0xc9)&&_0x3c432c[_0x363ff2(0xba)]&&_0x3c432c[_0x363ff2(0xda)])_0x3777ec=new Date(_0x3c432c[_0x363ff2(0xba)]),_0x85290b=new Date(_0x3c432c['dateTo']);else{const _0x3eb4ea=new Date();switch(_0x3c432c[_0x363ff2(0x73)]){case'week':_0x3777ec=new Date(_0x3eb4ea[_0x363ff2(0x183)]()-0x7*0x18*0x3c*0x3c*0x3e8);break;case _0x363ff2(0xaa):_0x3777ec=new Date(_0x3eb4ea[_0x363ff2(0x183)]()-0x1e*0x18*0x3c*0x3c*0x3e8);break;case'year':_0x3777ec=new Date(_0x3eb4ea[_0x363ff2(0x183)]()-0x16d*0x18*0x3c*0x3c*0x3e8);break;case _0x363ff2(0x6e):default:_0x3777ec=new Date('2020-01-01');break;}}console[_0x363ff2(0x124)]('üìÖ\x20Period:\x20'+_0x3777ec['toISOString']()+_0x363ff2(0x137)+_0x85290b[_0x363ff2(0xab)]());const _0x2fd838={'status':_0x363ff2(0x9a),'gateway':{'not':_0x363ff2(0x133)},'paidAt':{'gte':_0x3777ec,'lte':_0x85290b}};_0x3c432c[_0x363ff2(0x18c)]&&(_0x2fd838[_0x363ff2(0x18c)]=_0x3c432c['shopId']);const _0x1f0549=await database_1[_0x363ff2(0x16e)][_0x363ff2(0xfc)][_0x363ff2(0x18f)]({'where':_0x2fd838,'include':{'shop':{'select':{'id':!![],'name':!![],'username':!![],'gatewaySettings':!![]}}}});console[_0x363ff2(0x124)](_0x363ff2(0x126)+_0x1f0549[_0x363ff2(0x7a)]+_0x363ff2(0xb6));const _0x4f31c3={'gateway':{'not':_0x363ff2(0x133)},'createdAt':{'gte':_0x3777ec,'lte':_0x85290b}};_0x3c432c[_0x363ff2(0x18c)]&&(_0x4f31c3[_0x363ff2(0x18c)]=_0x3c432c[_0x363ff2(0x18c)]);const _0x2f12d9=await database_1[_0x363ff2(0x16e)][_0x363ff2(0xfc)][_0x363ff2(0x191)]({'where':_0x4f31c3});console[_0x363ff2(0x124)](_0x363ff2(0x138)+_0x2f12d9+_0x363ff2(0x81)+_0x1f0549[_0x363ff2(0x7a)]);let _0x27f8fc=0x0,_0x4dc1c5=0x0,_0x5886c8=0x0;const _0x2b8a13={},_0x493ba1={},_0x18bb5b={};for(const _0x18f98b of _0x1f0549){try{const _0x437c02=await currencyService_1['currencyService'][_0x363ff2(0x19a)](_0x18f98b['amount'],_0x18f98b[_0x363ff2(0x188)]);let _0x1d5f07={};if(_0x18f98b['shop'][_0x363ff2(0x17c)])try{_0x1d5f07=JSON['parse'](_0x18f98b['shop'][_0x363ff2(0x17c)]);}catch(_0x31da4a){console['error'](_0x363ff2(0x68)+_0x18f98b[_0x363ff2(0x18c)]+':',_0x31da4a);}let _0x1a3e6e={},_0x3c02ec=0xa;for(const [_0x447bb3,_0x1f0f76]of Object[_0x363ff2(0xb0)](_0x1d5f07)){if(_0x447bb3[_0x363ff2(0xc8)]()===_0x18f98b['gateway']['toLowerCase']()){_0x1a3e6e=_0x1f0f76,_0x3c02ec=_0x1f0f76[_0x363ff2(0x173)]||0xa;break;}}let _0x35a688,_0x3e0e22;_0x18f98b['amountAfterGatewayCommissionUSDT']!==null&&_0x18f98b[_0x363ff2(0x13a)]!==undefined?(_0x35a688=_0x18f98b[_0x363ff2(0x13a)],_0x3e0e22=_0x437c02-_0x35a688,console[_0x363ff2(0x124)]('üìä\x20Using\x20saved\x20amountAfterGatewayCommissionUSDT:\x20'+_0x35a688['toFixed'](0x6)+'\x20USDT\x20for\x20payment\x20'+_0x18f98b['id'])):(_0x3e0e22=_0x437c02*(_0x3c02ec/0x64),_0x35a688=_0x437c02-_0x3e0e22,console[_0x363ff2(0x124)]('üìä\x20Calculating\x20commission\x20manually\x20for\x20payment\x20'+_0x18f98b['id']+':\x20'+_0x3c02ec+_0x363ff2(0xbb)+_0x437c02[_0x363ff2(0x15f)](0x6)+_0x363ff2(0x10a)));_0x27f8fc+=_0x437c02,_0x4dc1c5+=_0x35a688,_0x5886c8+=_0x3e0e22;!_0x2b8a13[_0x18f98b[_0x363ff2(0x7b)]]&&(_0x2b8a13[_0x18f98b[_0x363ff2(0x7b)]]={'gateway':_0x18f98b[_0x363ff2(0x7b)],'gatewayDisplayName':this[_0x363ff2(0xf0)](_0x18f98b[_0x363ff2(0x7b)]),'paymentsCount':0x0,'turnoverUSDT':0x0,'commissionUSDT':0x0,'merchantEarningsUSDT':0x0,'totalCommissionRate':0x0});_0x2b8a13[_0x18f98b[_0x363ff2(0x7b)]]['paymentsCount']++,_0x2b8a13[_0x18f98b[_0x363ff2(0x7b)]][_0x363ff2(0x10d)]+=_0x437c02,_0x2b8a13[_0x18f98b[_0x363ff2(0x7b)]][_0x363ff2(0x7c)]+=_0x3e0e22,_0x2b8a13[_0x18f98b[_0x363ff2(0x7b)]][_0x363ff2(0x112)]+=_0x35a688,_0x2b8a13[_0x18f98b[_0x363ff2(0x7b)]][_0x363ff2(0x150)]+=_0x3c02ec;!_0x3c432c[_0x363ff2(0x18c)]&&(!_0x493ba1[_0x18f98b[_0x363ff2(0x18c)]]&&(_0x493ba1[_0x18f98b[_0x363ff2(0x18c)]]={'shopId':_0x18f98b[_0x363ff2(0x18c)],'shopName':_0x18f98b[_0x363ff2(0x74)][_0x363ff2(0x96)],'shopUsername':_0x18f98b[_0x363ff2(0x74)][_0x363ff2(0x93)],'paymentsCount':0x0,'turnoverUSDT':0x0,'commissionUSDT':0x0,'merchantEarningsUSDT':0x0,'paidOutUSDT':0x0,'averageCheckUSDT':0x0}),_0x493ba1[_0x18f98b[_0x363ff2(0x18c)]][_0x363ff2(0x145)]++,_0x493ba1[_0x18f98b['shopId']][_0x363ff2(0x10d)]+=_0x437c02,_0x493ba1[_0x18f98b[_0x363ff2(0x18c)]][_0x363ff2(0x7c)]+=_0x3e0e22,_0x493ba1[_0x18f98b[_0x363ff2(0x18c)]][_0x363ff2(0x112)]+=_0x35a688);const _0x477dbe=_0x18f98b[_0x363ff2(0x95)][_0x363ff2(0xab)]()[_0x363ff2(0x199)]('T')[0x0];!_0x18bb5b[_0x477dbe]&&(_0x18bb5b[_0x477dbe]={'date':_0x477dbe,'turnover':0x0,'merchantEarnings':0x0,'gatewayEarnings':0x0,'paymentsCount':0x0}),_0x18bb5b[_0x477dbe][_0x363ff2(0xdf)]+=_0x437c02,_0x18bb5b[_0x477dbe]['merchantEarnings']+=_0x35a688,_0x18bb5b[_0x477dbe]['gatewayEarnings']+=_0x3e0e22,_0x18bb5b[_0x477dbe][_0x363ff2(0x145)]++;}catch(_0x19ba5a){console[_0x363ff2(0xd8)](_0x363ff2(0x99)+_0x18f98b['id']+':',_0x19ba5a);}}Object[_0x363ff2(0x11c)](_0x2b8a13)[_0x363ff2(0xa0)](_0x1aea4a=>{const _0x3749e8=_0x363ff2;_0x1aea4a[_0x3749e8(0xd1)]=_0x1aea4a[_0x3749e8(0x145)]>0x0?_0x1aea4a['totalCommissionRate']/_0x1aea4a[_0x3749e8(0x145)]:0x0,delete _0x1aea4a[_0x3749e8(0x150)];}),Object[_0x363ff2(0x11c)](_0x493ba1)[_0x363ff2(0xa0)](_0x56ea92=>{const _0x4a3dc3=_0x363ff2;_0x56ea92[_0x4a3dc3(0xbf)]=_0x56ea92[_0x4a3dc3(0x145)]>0x0?_0x56ea92[_0x4a3dc3(0x10d)]/_0x56ea92['paymentsCount']:0x0;});let _0x5ad36b=0x0,_0xe3970b=0x0;if(_0x3c432c[_0x363ff2(0x18c)]){const _0x5058a6=await database_1[_0x363ff2(0x16e)][_0x363ff2(0x108)][_0x363ff2(0x18f)]({'where':{'shopId':_0x3c432c[_0x363ff2(0x18c)],'status':_0x363ff2(0xcd),'createdAt':{'gte':_0x3777ec,'lte':_0x85290b}},'select':{'amount':!![]}});_0x5ad36b=_0x5058a6[_0x363ff2(0x167)]((_0x176f88,_0x1ceee1)=>_0x176f88+_0x1ceee1[_0x363ff2(0x172)],0x0);const _0x1d36e1=await database_1[_0x363ff2(0x16e)]['payout'][_0x363ff2(0x18f)]({'where':{'shopId':_0x3c432c['shopId'],'status':_0x363ff2(0xfa),'createdAt':{'gte':_0x3777ec,'lte':_0x85290b}},'select':{'amount':!![]}});_0xe3970b=_0x1d36e1[_0x363ff2(0x167)]((_0x4c72bc,_0x1bc435)=>_0x4c72bc+_0x1bc435[_0x363ff2(0x172)],0x0);}const _0x1d5356=_0x2f12d9,_0x206864=_0x1f0549[_0x363ff2(0x7a)],_0x709273=_0x206864>0x0?_0x27f8fc/_0x206864:0x0,_0x235006=_0x1d5356>0x0?Math[_0x363ff2(0xa1)](_0x206864/_0x1d5356*0x2710)/0x64:0x0,_0x205acd=Math['ceil']((_0x85290b[_0x363ff2(0x183)]()-_0x3777ec[_0x363ff2(0x183)]())/(0x3e8*0x3c*0x3c*0x18)),_0x14d27c={'totalTurnover':Math['round'](_0x27f8fc*0x64)/0x64,'merchantEarnings':Math[_0x363ff2(0xa1)](_0x4dc1c5*0x64)/0x64,'gatewayEarnings':Math[_0x363ff2(0xa1)](_0x5886c8*0x64)/0x64,'totalPaidOut':Math[_0x363ff2(0xa1)](_0x5ad36b*0x64)/0x64,'pendingPayout':Math[_0x363ff2(0xa1)](_0xe3970b*0x64)/0x64,'averageCheck':Math['round'](_0x709273*0x64)/0x64,'totalPayments':_0x1d5356,'successfulPayments':_0x206864,'conversionRate':_0x235006,'gatewayBreakdown':Object[_0x363ff2(0x11c)](_0x2b8a13)[_0x363ff2(0x72)](_0xf7382b=>({..._0xf7382b,'turnoverUSDT':Math[_0x363ff2(0xa1)](_0xf7382b[_0x363ff2(0x10d)]*0x64)/0x64,'commissionUSDT':Math['round'](_0xf7382b[_0x363ff2(0x7c)]*0x64)/0x64,'merchantEarningsUSDT':Math[_0x363ff2(0xa1)](_0xf7382b[_0x363ff2(0x112)]*0x64)/0x64,'averageCommissionRate':Math[_0x363ff2(0xa1)](_0xf7382b[_0x363ff2(0xd1)]*0x64)/0x64})),'merchantBreakdown':_0x3c432c[_0x363ff2(0x18c)]?undefined:Object[_0x363ff2(0x11c)](_0x493ba1)[_0x363ff2(0x72)](_0x264219=>({..._0x264219,'turnoverUSDT':Math['round'](_0x264219['turnoverUSDT']*0x64)/0x64,'commissionUSDT':Math[_0x363ff2(0xa1)](_0x264219[_0x363ff2(0x7c)]*0x64)/0x64,'merchantEarningsUSDT':Math[_0x363ff2(0xa1)](_0x264219['merchantEarningsUSDT']*0x64)/0x64,'paidOutUSDT':Math[_0x363ff2(0xa1)](_0x264219[_0x363ff2(0x78)]*0x64)/0x64,'averageCheckUSDT':Math[_0x363ff2(0xa1)](_0x264219[_0x363ff2(0xbf)]*0x64)/0x64})),'dailyData':Object[_0x363ff2(0x11c)](_0x18bb5b)[_0x363ff2(0x72)](_0x5dc18d=>({..._0x5dc18d,'turnover':Math[_0x363ff2(0xa1)](_0x5dc18d['turnover']*0x64)/0x64,'merchantEarnings':Math[_0x363ff2(0xa1)](_0x5dc18d[_0x363ff2(0xa7)]*0x64)/0x64,'gatewayEarnings':Math['round'](_0x5dc18d[_0x363ff2(0x13e)]*0x64)/0x64}))['sort']((_0x12e865,_0x4d61e6)=>_0x12e865[_0x363ff2(0xcf)]['localeCompare'](_0x4d61e6[_0x363ff2(0xcf)])),'periodInfo':{'from':_0x3777ec,'to':_0x85290b,'periodType':_0x3c432c[_0x363ff2(0x73)]||'custom','daysCount':_0x205acd}};return console[_0x363ff2(0x124)](_0x363ff2(0x84)),console[_0x363ff2(0x124)](_0x363ff2(0xd7)+_0x14d27c[_0x363ff2(0x147)]+_0x363ff2(0x10a)),console['log']('\x20\x20\x20üë§\x20Merchant\x20earnings:\x20'+_0x14d27c[_0x363ff2(0xa7)]+_0x363ff2(0x10a)),console[_0x363ff2(0x124)](_0x363ff2(0x143)+_0x14d27c[_0x363ff2(0x13e)]+_0x363ff2(0x10a)),console[_0x363ff2(0x124)]('\x20\x20\x20ÔøΩ\x20Total\x20paid\x20out:\x20'+_0x14d27c[_0x363ff2(0xcb)]+_0x363ff2(0x10a)),console[_0x363ff2(0x124)]('\x20\x20\x20‚è≥\x20Pending\x20payout:\x20'+_0x14d27c[_0x363ff2(0x14e)]+_0x363ff2(0x10a)),console['log'](_0x363ff2(0x12f)+_0x14d27c[_0x363ff2(0x122)]),_0x14d27c;}async[a36_0x5a6729(0x9b)](){const _0x24aaa0=a36_0x5a6729;console[_0x24aaa0(0x124)]('üìã\x20Getting\x20merchants\x20selection\x20list...');const _0x20f698=await database_1[_0x24aaa0(0x16e)][_0x24aaa0(0x74)]['findMany']({'where':{'status':_0x24aaa0(0xe5)},'select':{'id':!![],'username':!![],'name':!![]},'orderBy':{'name':_0x24aaa0(0x85)}});return console['log']('üìã\x20Found\x20'+_0x20f698[_0x24aaa0(0x7a)]+_0x24aaa0(0xe2)),_0x20f698[_0x24aaa0(0x72)](_0x6001b9=>({'id':_0x6001b9['id'],'username':_0x6001b9[_0x24aaa0(0x93)],'name':_0x6001b9[_0x24aaa0(0x96)]}));}[a36_0x5a6729(0xf0)](_0xf6bbee){const _0x18b26f=a36_0x5a6729,_0x3bc368={'test_gateway':_0x18b26f(0x180),'plisio':'Plisio','rapyd':_0x18b26f(0x186),'noda':'Noda','cointopay':'CoinToPay','cointopay2':'Open\x20Banking\x202','klyme_eu':_0x18b26f(0x195),'klyme_gb':'KLYME\x20GB','klyme_de':_0x18b26f(0x136),'mastercard':_0x18b26f(0x11e)};return _0x3bc368[_0xf6bbee]||_0xf6bbee;}[a36_0x5a6729(0x118)](_0x4010dc){const _0x3b4f5c=a36_0x5a6729,_0x1a1953={'Test\x20Gateway':_0x3b4f5c(0x133),'Plisio':_0x3b4f5c(0xa2),'Rapyd':'rapyd','Noda':'noda','CoinToPay':_0x3b4f5c(0xac),'CoinToPay2':'cointopay2','KLYME\x20EU':'klyme_eu','KLYME\x20GB':_0x3b4f5c(0x103),'KLYME\x20DE':_0x3b4f5c(0xb9),'MasterCard':_0x3b4f5c(0x10c)};return _0x1a1953[_0x4010dc]||_0x4010dc[_0x3b4f5c(0xc8)]();}async[a36_0x5a6729(0x104)](_0x3a55e6){const _0x5b9681=a36_0x5a6729,{page:_0x285bd7,limit:_0x2e5653,minAmount:_0x2dfa8d,search:_0x4577e5}=_0x3a55e6,_0x5dcde0=(_0x285bd7-0x1)*_0x2e5653;console[_0x5b9681(0x124)](_0x5b9681(0xa6),_0x3a55e6);const _0x18d401={'balance':{'gt':0x0},'status':_0x5b9681(0xe5)};_0x2dfa8d&&(_0x18d401[_0x5b9681(0x161)][_0x5b9681(0x80)]=_0x2dfa8d);_0x4577e5&&(_0x18d401['OR']=[{'name':{'contains':_0x4577e5,'mode':_0x5b9681(0xbc)}},{'username':{'contains':_0x4577e5,'mode':_0x5b9681(0xbc)}}]);const [_0xb6ad7f,_0x5022aa]=await Promise[_0x5b9681(0x6e)]([database_1['default'][_0x5b9681(0x74)][_0x5b9681(0x18f)]({'where':_0x18d401,'skip':_0x5dcde0,'take':_0x2e5653,'orderBy':{'balance':'desc'},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'balance':!![],'totalPaidOut':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'gatewaySettings':!![],'createdAt':!![]}}),database_1[_0x5b9681(0x16e)][_0x5b9681(0x74)][_0x5b9681(0x191)]({'where':_0x18d401})]);console[_0x5b9681(0x124)]('üí∞\x20Found\x20'+_0xb6ad7f[_0x5b9681(0x7a)]+_0x5b9681(0xf9));const _0x2a1062=await Promise[_0x5b9681(0x6e)](_0xb6ad7f['map'](async _0x3cce91=>{const _0x2ab678=_0x5b9681,[_0x490526,_0x5d2346,_0x129c98]=await Promise[_0x2ab678(0x6e)]([database_1['default'][_0x2ab678(0xfc)][_0x2ab678(0x191)]({'where':{'shopId':_0x3cce91['id'],'status':_0x2ab678(0x9a),'gateway':{'not':'test_gateway'}}}),database_1['default'][_0x2ab678(0xfc)][_0x2ab678(0x7f)]({'where':{'shopId':_0x3cce91['id'],'status':_0x2ab678(0x9a),'gateway':{'not':'test_gateway'}},'orderBy':{'paidAt':_0x2ab678(0x85)},'select':{'paidAt':!![]}}),database_1[_0x2ab678(0x16e)][_0x2ab678(0xfc)][_0x2ab678(0x66)]({'by':[_0x2ab678(0x7b)],'where':{'shopId':_0x3cce91['id'],'status':'PAID','gateway':{'not':_0x2ab678(0x133)}},'_count':{'id':!![]},'_sum':{'amountUSDT':!![]}})]),_0x7ad1de=new Date(),_0x417777=new Date(_0x7ad1de[_0x2ab678(0x185)](),_0x7ad1de[_0x2ab678(0x190)](),0x1),_0x4f977f=new Date(_0x7ad1de['getFullYear'](),_0x7ad1de[_0x2ab678(0x190)]()+0x1,0x0,0x17,0x3b,0x3b,0x3e7),[_0x5a5e8c,_0xfe6e68]=await Promise[_0x2ab678(0x6e)]([database_1[_0x2ab678(0x16e)]['payout'][_0x2ab678(0x97)]({'_sum':{'amount':!![]},'where':{'shopId':_0x3cce91['id'],'status':'COMPLETED'}}),database_1['default'][_0x2ab678(0x108)][_0x2ab678(0x97)]({'_sum':{'amount':!![]},'where':{'shopId':_0x3cce91['id'],'status':_0x2ab678(0xcd),'createdAt':{'gte':_0x417777,'lte':_0x4f977f}}})]),_0x4c0fff=_0x5a5e8c[_0x2ab678(0xb2)][_0x2ab678(0x172)]||0x0,_0xaa3e87=_0xfe6e68[_0x2ab678(0xb2)][_0x2ab678(0x172)]||0x0,_0x435071=await Promise['all'](_0x129c98['map'](async _0x5431b7=>{const _0x1b4dae=_0x2ab678;let _0xf7e1c4=0xa;if(_0x3cce91[_0x1b4dae(0x17c)])try{const _0x49f47a=JSON[_0x1b4dae(0x6f)](_0x3cce91['gatewaySettings']);for(const [_0xb89f02,_0x3a679d]of Object['entries'](_0x49f47a)){if(_0xb89f02[_0x1b4dae(0xc8)]()===_0x5431b7[_0x1b4dae(0x7b)][_0x1b4dae(0xc8)]()){_0xf7e1c4=_0x3a679d[_0x1b4dae(0x173)]||0xa,console[_0x1b4dae(0x124)]('üí∞\x20[PAYOUT]\x20Gateway\x20'+_0x5431b7['gateway']+_0x1b4dae(0x94)+_0x3cce91['id']+_0x1b4dae(0x181)+_0xf7e1c4+'%');break;}}}catch(_0x457dde){console[_0x1b4dae(0xd8)](_0x1b4dae(0x68)+_0x3cce91['id']+':',_0x457dde);}const _0x17a89e=_0x5431b7['_sum']?.[_0x1b4dae(0xb8)]||0x0,_0x569531=_0x17a89e*(0x1-_0xf7e1c4/0x64);return{'gateway':_0x5431b7[_0x1b4dae(0x7b)],'count':_0x5431b7['_count']?.['id']||0x0,'amountUSDT':Math[_0x1b4dae(0xa1)](_0x17a89e*0x64)/0x64,'amountAfterCommissionUSDT':Math[_0x1b4dae(0xa1)](_0x569531*0x64)/0x64,'commission':_0xf7e1c4};})),_0x562e50=_0x435071['reduce']((_0x1a4241,_0x2fe06e)=>_0x1a4241+_0x2fe06e[_0x2ab678(0xb8)],0x0),_0x198952=_0x3cce91[_0x2ab678(0x161)];return console[_0x2ab678(0x124)]('üí∞\x20[PAYOUT]\x20Merchant\x20'+_0x3cce91[_0x2ab678(0x93)]+':'),console[_0x2ab678(0x124)]('\x20\x20\x20ÔøΩ\x20Total\x20payments\x20turnover:\x20'+_0x562e50[_0x2ab678(0x15f)](0x2)+_0x2ab678(0x13c)),console['log']('\x20\x20\x20üîç\x20Calculated\x20after\x20commission:\x20'+_0x435071['reduce']((_0x588f07,_0x396b5c)=>_0x588f07+_0x396b5c[_0x2ab678(0xfb)],0x0)['toFixed'](0x2)+_0x2ab678(0x7e)),console[_0x2ab678(0x124)]('\x20\x20\x20‚úÖ\x20Actual\x20available\x20balance:\x20'+_0x198952[_0x2ab678(0x15f)](0x2)+_0x2ab678(0x175)),{'id':_0x3cce91['id'],'fullName':_0x3cce91[_0x2ab678(0x96)],'username':_0x3cce91['username'],'telegramId':_0x3cce91[_0x2ab678(0x88)],'merchantUrl':_0x3cce91[_0x2ab678(0x163)],'wallets':{'usdtPolygonWallet':_0x3cce91[_0x2ab678(0x174)],'usdtTrcWallet':_0x3cce91[_0x2ab678(0x9c)],'usdtErcWallet':_0x3cce91['usdtErcWallet'],'usdcPolygonWallet':_0x3cce91['usdcPolygonWallet']},'totalAmountUSDT':Math[_0x2ab678(0xa1)](_0x562e50*0x64)/0x64,'totalAmountAfterCommissionUSDT':Math[_0x2ab678(0xa1)](_0x198952*0x64)/0x64,'totalPayout':Math[_0x2ab678(0xa1)](_0x4c0fff*0x64)/0x64,'thisMonth':Math[_0x2ab678(0xa1)](_0xaa3e87*0x64)/0x64,'paymentsCount':_0x490526,'oldestPaymentDate':_0x5d2346?.[_0x2ab678(0x95)]||_0x3cce91[_0x2ab678(0x102)],'gatewayBreakdown':_0x435071};})),_0x52ceec=_0x2a1062['reduce']((_0x9d845a,_0x87480c)=>_0x9d845a+_0x87480c[_0x5b9681(0x127)],0x0),_0x4c9fcd=_0x2a1062[_0x5b9681(0x167)]((_0x4c4209,_0x8fdcd2)=>_0x4c4209+_0x8fdcd2[_0x5b9681(0x87)],0x0),_0x3c53bf=_0x2a1062['reduce']((_0x17e161,_0x35f75f)=>_0x17e161+_0x35f75f[_0x5b9681(0x125)],0x0),_0x1b807c=_0x2a1062[_0x5b9681(0x167)]((_0x5ba686,_0xf7e3ab)=>_0x5ba686+_0xf7e3ab[_0x5b9681(0x89)],0x0);return console[_0x5b9681(0x124)](_0x5b9681(0x19b)+_0x5022aa+_0x5b9681(0x8b)),console[_0x5b9681(0x124)](_0x5b9681(0x132)+Math[_0x5b9681(0xa1)](_0x52ceec*0x64)/0x64+'\x20USDT\x20(gross\x20revenue)'),console[_0x5b9681(0x124)](_0x5b9681(0xe9)+Math[_0x5b9681(0xa1)](_0x4c9fcd*0x64)/0x64+_0x5b9681(0x16b)),console[_0x5b9681(0x124)](_0x5b9681(0x154)+Math['round'](_0x3c53bf*0x64)/0x64+_0x5b9681(0x10a)),console[_0x5b9681(0x124)]('\x20\x20\x20üìÖ\x20Total\x20payouts\x20(this\x20month):\x20'+Math[_0x5b9681(0xa1)](_0x1b807c*0x64)/0x64+'\x20USDT'),{'merchants':_0x2a1062,'pagination':{'page':_0x285bd7,'limit':_0x2e5653,'total':_0x5022aa,'totalPages':Math[_0x5b9681(0xc6)](_0x5022aa/_0x2e5653)},'summary':{'totalMerchants':_0x5022aa,'totalAmountUSDT':Math[_0x5b9681(0xa1)](_0x52ceec*0x64)/0x64,'totalAmountAfterCommissionUSDT':Math[_0x5b9681(0xa1)](_0x4c9fcd*0x64)/0x64,'totalPayout':Math[_0x5b9681(0xa1)](_0x3c53bf*0x64)/0x64,'thisMonth':Math[_0x5b9681(0xa1)](_0x1b807c*0x64)/0x64}};}async[a36_0x5a6729(0xc5)](_0x278b07){const _0x4d8b2=a36_0x5a6729,{shopId:_0x17533b,amount:_0x57e156,network:_0x4604c9,wallet:_0x3a6d90,notes:_0x13f146,txid:_0x517d74,periodFrom:_0x1e0399,periodTo:_0x302603}=_0x278b07,_0x3365ed=await database_1['default'][_0x4d8b2(0x178)](async _0x433b32=>{const _0x325d46=_0x4d8b2,_0x3b4628=await _0x433b32[_0x325d46(0x74)][_0x325d46(0xde)]({'where':{'id':_0x17533b},'select':{'id':!![],'name':!![],'username':!![],'balance':!![],'totalPaidOut':!![]}});if(!_0x3b4628)throw new Error(_0x325d46(0x16d));console['log'](_0x325d46(0x129)+_0x3b4628['username']+':'),console[_0x325d46(0x124)](_0x325d46(0x10b)+_0x3b4628['balance'][_0x325d46(0x15f)](0x6)+_0x325d46(0x10a)),console['log'](_0x325d46(0x12c)+_0x57e156[_0x325d46(0x15f)](0x6)+'\x20USDT'),console[_0x325d46(0x124)](_0x325d46(0xf1)+_0x3b4628[_0x325d46(0xcb)][_0x325d46(0x15f)](0x6)+'\x20USDT');if(_0x517d74)console[_0x325d46(0x124)](_0x325d46(0x8f)+_0x517d74);if(_0x3b4628[_0x325d46(0x161)]<_0x57e156)throw new Error(_0x325d46(0xad)+_0x3b4628['balance'][_0x325d46(0x15f)](0x6)+_0x325d46(0xd9)+_0x57e156[_0x325d46(0x15f)](0x6)+_0x325d46(0x10a));let _0x64745f=_0x3a6d90;if(!_0x64745f){const _0x15af7f=await _0x433b32[_0x325d46(0x74)]['findUnique']({'where':{'id':_0x17533b},'select':{'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![]}});if(_0x15af7f)switch(_0x4604c9){case _0x325d46(0x100):_0x64745f=_0x15af7f['usdtPolygonWallet']||undefined;break;case'trc20':_0x64745f=_0x15af7f[_0x325d46(0x9c)]||undefined;break;case _0x325d46(0xf3):_0x64745f=_0x15af7f[_0x325d46(0x164)]||undefined;break;case _0x325d46(0xf6):_0x64745f=_0x15af7f[_0x325d46(0x10f)]||undefined;break;}}console[_0x325d46(0x124)](_0x325d46(0x8e)+_0x4604c9+':\x20'+(_0x64745f||_0x325d46(0x13d)));const _0x57717f=await _0x433b32[_0x325d46(0x108)]['create']({'data':{'shopId':_0x17533b,'amount':_0x57e156,'network':_0x4604c9,'status':_0x325d46(0xcd),'txid':_0x517d74,'notes':_0x13f146,'periodFrom':_0x1e0399?new Date(_0x1e0399):null,'periodTo':_0x302603?new Date(_0x302603):null,'createdAt':new Date(),'paidAt':new Date()}}),_0x109561=_0x3b4628[_0x325d46(0x161)]-_0x57e156,_0x1c4611=_0x3b4628[_0x325d46(0xcb)]+_0x57e156;return await _0x433b32['shop'][_0x325d46(0x197)]({'where':{'id':_0x17533b},'data':{'balance':_0x109561,'totalPaidOut':_0x1c4611}}),console[_0x325d46(0x124)](_0x325d46(0xbe)+_0x3b4628[_0x325d46(0x93)]+_0x325d46(0xf2)),console[_0x325d46(0x124)](_0x325d46(0xa5)+_0x3b4628[_0x325d46(0x161)][_0x325d46(0x15f)](0x6)+_0x325d46(0x11b)+_0x109561[_0x325d46(0x15f)](0x6)+_0x325d46(0xe0)+_0x57e156['toFixed'](0x6)+')'),console[_0x325d46(0x124)](_0x325d46(0x117)+_0x3b4628[_0x325d46(0xcb)][_0x325d46(0x15f)](0x6)+_0x325d46(0x11b)+_0x1c4611[_0x325d46(0x15f)](0x6)+_0x325d46(0xa9)+_0x57e156[_0x325d46(0x15f)](0x6)+')'),{'payout':_0x57717f,'shop':_0x3b4628};});return console[_0x4d8b2(0x124)](_0x4d8b2(0x9f)+_0x3365ed[_0x4d8b2(0x108)]['id']+_0x4d8b2(0x94)+_0x3365ed['shop']['username']+'\x20('+_0x57e156+'\x20USDT)'),{'id':_0x3365ed['payout']['id'],'shopId':_0x3365ed[_0x4d8b2(0x108)][_0x4d8b2(0x18c)],'shopName':_0x3365ed[_0x4d8b2(0x74)][_0x4d8b2(0x96)],'shopUsername':_0x3365ed[_0x4d8b2(0x74)][_0x4d8b2(0x93)],'amount':_0x3365ed[_0x4d8b2(0x108)]['amount'],'network':_0x3365ed[_0x4d8b2(0x108)][_0x4d8b2(0x18e)],'status':_0x3365ed[_0x4d8b2(0x108)]['status'],'txid':_0x3365ed[_0x4d8b2(0x108)][_0x4d8b2(0x151)],'notes':_0x3365ed['payout'][_0x4d8b2(0x18d)],'periodFrom':_0x3365ed[_0x4d8b2(0x108)][_0x4d8b2(0x76)],'periodTo':_0x3365ed[_0x4d8b2(0x108)][_0x4d8b2(0x139)],'createdAt':_0x3365ed[_0x4d8b2(0x108)][_0x4d8b2(0x102)],'paidAt':_0x3365ed[_0x4d8b2(0x108)]['paidAt']};}async['getAllPayouts'](_0x1570f5){const _0x4f48e1=a36_0x5a6729,{page:_0xb1d8a9,limit:_0x2f31e4,shopId:_0x3e9d90,network:_0x39c67b,dateFrom:_0x1ac294,dateTo:_0x497526,search:_0x46a2b5}=_0x1570f5,_0x441b21=(_0xb1d8a9-0x1)*_0x2f31e4,_0x116071={};_0x3e9d90&&(_0x116071[_0x4f48e1(0x18c)]=_0x3e9d90);_0x39c67b&&(_0x116071[_0x4f48e1(0x18e)]=_0x39c67b);(_0x1ac294||_0x497526)&&(_0x116071['createdAt']={},_0x1ac294&&(_0x116071[_0x4f48e1(0x102)]['gte']=new Date(_0x1ac294)),_0x497526&&(_0x116071['createdAt'][_0x4f48e1(0x155)]=new Date(_0x497526)));_0x46a2b5&&(_0x116071['OR']=[{'shop':{'name':{'contains':_0x46a2b5,'mode':_0x4f48e1(0xbc)}}},{'shop':{'username':{'contains':_0x46a2b5,'mode':'insensitive'}}},{'notes':{'contains':_0x46a2b5,'mode':'insensitive'}}]);const [_0x281102,_0x2ad546]=await Promise['all']([database_1[_0x4f48e1(0x16e)]['payout'][_0x4f48e1(0x18f)]({'where':_0x116071,'skip':_0x441b21,'take':_0x2f31e4,'orderBy':{'createdAt':_0x4f48e1(0xed)},'select':{'id':!![],'shopId':!![],'amount':!![],'network':!![],'status':!![],'txid':!![],'notes':!![],'periodFrom':!![],'periodTo':!![],'createdAt':!![],'paidAt':!![],'shop':{'select':{'name':!![],'username':!![]}}}}),database_1[_0x4f48e1(0x16e)][_0x4f48e1(0x108)]['count']({'where':_0x116071})]);return{'payouts':_0x281102[_0x4f48e1(0x72)](_0x4beaab=>({'id':_0x4beaab['id'],'shopId':_0x4beaab[_0x4f48e1(0x18c)],'shopName':_0x4beaab[_0x4f48e1(0x74)][_0x4f48e1(0x96)],'shopUsername':_0x4beaab[_0x4f48e1(0x74)]['username'],'amount':_0x4beaab['amount'],'network':_0x4beaab[_0x4f48e1(0x18e)],'status':_0x4beaab['status'],'txid':_0x4beaab[_0x4f48e1(0x151)],'notes':_0x4beaab['notes'],'periodFrom':_0x4beaab[_0x4f48e1(0x76)],'periodTo':_0x4beaab[_0x4f48e1(0x139)],'createdAt':_0x4beaab[_0x4f48e1(0x102)],'paidAt':_0x4beaab[_0x4f48e1(0x95)]})),'pagination':{'page':_0xb1d8a9,'limit':_0x2f31e4,'total':_0x2ad546,'totalPages':Math[_0x4f48e1(0xc6)](_0x2ad546/_0x2f31e4)}};}async[a36_0x5a6729(0xd4)](_0x1991f8){const _0xb530b8=a36_0x5a6729,_0x5dd9f0=await database_1[_0xb530b8(0x16e)][_0xb530b8(0x108)][_0xb530b8(0xde)]({'where':{'id':_0x1991f8},'include':{'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x5dd9f0)return null;return{'id':_0x5dd9f0['id'],'shopId':_0x5dd9f0['shopId'],'shopName':_0x5dd9f0[_0xb530b8(0x74)][_0xb530b8(0x96)],'shopUsername':_0x5dd9f0[_0xb530b8(0x74)][_0xb530b8(0x93)],'amount':_0x5dd9f0['amount'],'network':_0x5dd9f0[_0xb530b8(0x18e)],'status':_0x5dd9f0[_0xb530b8(0x140)],'txid':_0x5dd9f0[_0xb530b8(0x151)],'notes':_0x5dd9f0[_0xb530b8(0x18d)],'periodFrom':_0x5dd9f0[_0xb530b8(0x76)],'periodTo':_0x5dd9f0[_0xb530b8(0x139)],'createdAt':_0x5dd9f0[_0xb530b8(0x102)],'paidAt':_0x5dd9f0['paidAt']};}async['deletePayout'](_0xbbf972){const _0xf8f33e=a36_0x5a6729;await database_1[_0xf8f33e(0x16e)][_0xf8f33e(0x108)][_0xf8f33e(0x114)]({'where':{'id':_0xbbf972}});}async[a36_0x5a6729(0x109)](_0x542171){const _0x2a6837=a36_0x5a6729,{page:_0xc1b6f4,limit:_0x3b1d84,status:_0x134ff5,gateway:_0x510add,shopId:_0x35f536,dateFrom:_0x1ad5d9,dateTo:_0x32f3d1,search:_0x256095,currency:_0x1c8d48,sortBy:_0x34e892,sortOrder:_0x5b1fc9}=_0x542171,_0x84340c=(_0xc1b6f4-0x1)*_0x3b1d84;console[_0x2a6837(0x124)]('üìä\x20Getting\x20payments\x20with\x20filters:',_0x542171);const _0x547262=await database_1['default'][_0x2a6837(0xfc)][_0x2a6837(0x66)]({'by':[_0x2a6837(0x7b)],'_count':{'gateway':!![]}});console[_0x2a6837(0x124)](_0x2a6837(0xa8),_0x547262[_0x2a6837(0x72)](_0x4f1b7e=>_0x4f1b7e[_0x2a6837(0x7b)]+'\x20('+_0x4f1b7e[_0x2a6837(0xef)][_0x2a6837(0x7b)]+_0x2a6837(0x14b)));if(_0x510add){const _0x26703a=_0x547262[_0x2a6837(0xdc)](_0xb8a1fd=>_0xb8a1fd[_0x2a6837(0x7b)][_0x2a6837(0xc8)]()===_0x510add[_0x2a6837(0xc8)]());!_0x26703a&&_0x510add['toLowerCase']()!==_0x2a6837(0x133)&&console[_0x2a6837(0x124)](_0x2a6837(0x166)+_0x510add+_0x2a6837(0x119)+_0x547262[_0x2a6837(0x72)](_0x4db91a=>_0x4db91a['gateway'])[_0x2a6837(0x121)](',\x20'));}const _0x169346={};_0x134ff5&&(_0x169346[_0x2a6837(0x140)]=_0x134ff5[_0x2a6837(0x6b)]());if(!_0x510add)_0x169346[_0x2a6837(0x7b)]={'not':'test_gateway'};else{if(_0x510add&&(_0x510add['toLowerCase']()===_0x2a6837(0x133)||_0x510add===_0x2a6837(0x134)))_0x169346[_0x2a6837(0x7b)]=_0x2a6837(0x133);else{let _0x5281ee=_0x510add;const _0x1b58dc=(0x0,gateway_1['getGatewayNameById'])(_0x510add);if(_0x1b58dc)_0x5281ee=_0x1b58dc,console[_0x2a6837(0x124)](_0x2a6837(0x69)+_0x510add+_0x2a6837(0x144)+_0x5281ee+'\x27');else{const _0x388d46=(0x0,gateway_1[_0x2a6837(0x82)])(_0x510add);if(_0x388d46){const _0x4f99f7=(0x0,gateway_1[_0x2a6837(0x131)])(_0x388d46);_0x4f99f7&&(_0x5281ee=_0x4f99f7,console[_0x2a6837(0x124)]('üîÑ\x20Converted\x20gateway\x20name\x20\x27'+_0x510add+_0x2a6837(0x107)+_0x388d46+_0x2a6837(0x189)+_0x5281ee+'\x27'));}else console[_0x2a6837(0x124)]('üîç\x20Using\x20gateway\x20\x27'+_0x510add+_0x2a6837(0x79));}const _0x2198e5=await database_1[_0x2a6837(0x16e)]['payment'][_0x2a6837(0x191)]({'where':{'gateway':_0x5281ee['toLowerCase']()},'take':0x1});_0x2198e5===0x0?(console['log'](_0x2a6837(0xf4)+_0x5281ee+_0x2a6837(0x12a)+_0x510add+'\x27)\x20not\x20found\x20in\x20database,\x20returning\x20empty\x20result'),_0x169346[_0x2a6837(0x7b)]=_0x2a6837(0x153)):(_0x169346[_0x2a6837(0x7b)]=_0x5281ee[_0x2a6837(0xc8)](),console['log'](_0x2a6837(0x192)+_0x5281ee+_0x2a6837(0x12a)+_0x510add+'\x27)'));}}console[_0x2a6837(0x124)]('üìä\x20Gateway\x20filter\x20applied:',_0x169346[_0x2a6837(0x7b)]);_0x35f536&&(_0x169346[_0x2a6837(0x18c)]=_0x35f536);_0x1c8d48&&(_0x169346[_0x2a6837(0x188)]=_0x1c8d48[_0x2a6837(0x6b)](),console[_0x2a6837(0x124)](_0x2a6837(0x105)+_0x1c8d48['toUpperCase']()));(_0x1ad5d9||_0x32f3d1)&&(_0x169346[_0x2a6837(0x102)]={},_0x1ad5d9&&(_0x169346[_0x2a6837(0x102)]['gte']=new Date(_0x1ad5d9)),_0x32f3d1&&(_0x169346['createdAt'][_0x2a6837(0x155)]=new Date(_0x32f3d1)));_0x256095&&(_0x169346['OR']=[{'id':{'contains':_0x256095,'mode':_0x2a6837(0xbc)}},{'orderId':{'contains':_0x256095,'mode':_0x2a6837(0xbc)}},{'gatewayOrderId':{'contains':_0x256095,'mode':_0x2a6837(0xbc)}},{'customerEmail':{'contains':_0x256095,'mode':_0x2a6837(0xbc)}},{'shop':{'name':{'contains':_0x256095,'mode':_0x2a6837(0xbc)}}},{'shop':{'username':{'contains':_0x256095,'mode':_0x2a6837(0xbc)}}}]);console[_0x2a6837(0x124)](_0x2a6837(0x10e),JSON[_0x2a6837(0x18b)](_0x169346,null,0x2));let _0x32cf79={'createdAt':_0x2a6837(0xed)};if(_0x34e892){const _0x414204=[_0x2a6837(0x172),_0x2a6837(0x102),_0x2a6837(0xd6),_0x2a6837(0x140),_0x2a6837(0x7b),'currency'],_0x806d03=['asc',_0x2a6837(0xed)];if(_0x414204['includes'](_0x34e892)){const _0x5407b0=_0x806d03['includes'](_0x5b1fc9)?_0x5b1fc9:'desc';_0x32cf79={[_0x34e892]:_0x5407b0},console[_0x2a6837(0x124)]('üìä\x20Sorting\x20payments\x20by\x20'+_0x34e892+_0x2a6837(0x168)+_0x5407b0+_0x2a6837(0x123));}}const [_0x350fd3,_0x58085f]=await Promise['all']([database_1[_0x2a6837(0x16e)]['payment'][_0x2a6837(0x18f)]({'where':_0x169346,'skip':_0x84340c,'take':_0x3b1d84,'orderBy':_0x32cf79,'select':{'id':!![],'shopId':!![],'amount':!![],'amountAfterGatewayCommissionUSDT':!![],'currency':!![],'sourceCurrency':!![],'status':!![],'gateway':!![],'orderId':!![],'gatewayOrderId':!![],'gatewayPaymentId':!![],'customerEmail':!![],'customerName':!![],'customerCountry':!![],'customerIp':!![],'customerUa':!![],'externalPaymentUrl':!![],'successUrl':!![],'failUrl':!![],'pendingUrl':!![],'whiteUrl':!![],'expiresAt':!![],'invoiceTotalSum':!![],'qrCode':!![],'qrUrl':!![],'country':!![],'language':!![],'amountIsEditable':!![],'maxPayments':!![],'rapydCustomer':!![],'cardLast4':!![],'paymentMethod':!![],'bankId':!![],'remitterIban':!![],'remitterName':!![],'failureMessage':!![],'usage':!![],'createdAt':!![],'updatedAt':!![],'shop':{'select':{'name':!![],'username':!![]}}}}),database_1['default'][_0x2a6837(0xfc)][_0x2a6837(0x191)]({'where':_0x169346})]);return{'payments':_0x350fd3,'pagination':{'page':_0xc1b6f4,'limit':_0x3b1d84,'total':_0x58085f,'totalPages':Math['ceil'](_0x58085f/_0x3b1d84)}};}async[a36_0x5a6729(0xff)](_0x4f4838){const _0x2c943e=a36_0x5a6729,_0x4bc85c=await database_1['default'][_0x2c943e(0xfc)][_0x2c943e(0xde)]({'where':{'id':_0x4f4838},'select':{'id':!![],'shopId':!![],'amount':!![],'amountAfterGatewayCommissionUSDT':!![],'currency':!![],'sourceCurrency':!![],'status':!![],'gateway':!![],'orderId':!![],'gatewayOrderId':!![],'gatewayPaymentId':!![],'customerEmail':!![],'customerName':!![],'customerCountry':!![],'customerIp':!![],'customerUa':!![],'externalPaymentUrl':!![],'successUrl':!![],'failUrl':!![],'pendingUrl':!![],'whiteUrl':!![],'expiresAt':!![],'invoiceTotalSum':!![],'qrCode':!![],'qrUrl':!![],'country':!![],'language':!![],'amountIsEditable':!![],'maxPayments':!![],'rapydCustomer':!![],'cardLast4':!![],'paymentMethod':!![],'bankId':!![],'remitterIban':!![],'remitterName':!![],'failureMessage':!![],'usage':!![],'createdAt':!![],'updatedAt':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x4bc85c)return null;return{'id':_0x4bc85c['id'],'shopId':_0x4bc85c[_0x2c943e(0x18c)],'gateway':_0x4bc85c['gateway'],'amount':_0x4bc85c[_0x2c943e(0x172)],'currency':_0x4bc85c[_0x2c943e(0x188)],'status':_0x4bc85c['status'],'orderId':_0x4bc85c[_0x2c943e(0x18a)],'gatewayOrderId':_0x4bc85c[_0x2c943e(0x17e)],'customerEmail':_0x4bc85c[_0x2c943e(0xee)],'customerName':_0x4bc85c['customerName'],'customerCountry':_0x4bc85c[_0x2c943e(0xeb)],'customerIp':_0x4bc85c[_0x2c943e(0xf8)],'customerUa':_0x4bc85c[_0x2c943e(0x116)],'failureMessage':_0x4bc85c['failureMessage'],'externalPaymentUrl':_0x4bc85c['externalPaymentUrl'],'successUrl':_0x4bc85c[_0x2c943e(0x156)],'failUrl':_0x4bc85c['failUrl'],'pendingUrl':_0x4bc85c[_0x2c943e(0xec)],'whiteUrl':_0x4bc85c[_0x2c943e(0x15b)],'createdAt':_0x4bc85c['createdAt'],'updatedAt':_0x4bc85c[_0x2c943e(0xd6)],'shop':_0x4bc85c[_0x2c943e(0x74)]};}async[a36_0x5a6729(0x106)](_0x2542d8,_0x4bbf27,_0x14df70,_0x4f34b5){const _0xf416c7=a36_0x5a6729,_0x4b82b3=await database_1['default']['$transaction'](async _0x1f04e0=>{const _0x29632c=a36_0x1e38,_0x5e5465=await _0x1f04e0[_0x29632c(0xfc)][_0x29632c(0xde)]({'where':{'id':_0x2542d8},'include':{'shop':{'select':{'id':!![],'name':!![],'username':!![],'balance':!![]}}}});if(!_0x5e5465)throw new Error(_0x29632c(0x17b));const _0x4a310d=_0x5e5465[_0x29632c(0x140)],_0xe09832=_0x4bbf27[_0x29632c(0x6b)]();console[_0x29632c(0x124)](_0x29632c(0x16f)+_0x2542d8+'\x20status:\x20'+_0x4a310d+_0x29632c(0x11b)+_0xe09832),console[_0x29632c(0x124)]('üí∞\x20Current\x20shop\x20balance:\x20'+_0x5e5465[_0x29632c(0x74)][_0x29632c(0x161)]+_0x29632c(0x10a));const _0x5d5253={'status':_0xe09832,'updatedAt':new Date(),'statusChangedBy':_0x29632c(0x14d),'statusChangedAt':new Date()};_0x14df70&&(_0x5d5253[_0x29632c(0xfd)]=_0x14df70);_0xe09832===_0x29632c(0x92)&&_0x4f34b5&&(_0x5d5253[_0x29632c(0xc3)]=_0x4f34b5);let _0x5ba300=0x0,_0x54592c=_0x5e5465[_0x29632c(0x74)][_0x29632c(0x161)];if(_0xe09832===_0x29632c(0x9a)&&_0x4a310d!==_0x29632c(0x9a)){_0x5d5253[_0x29632c(0x95)]=new Date();const _0x3642ad=await currencyService_1[_0x29632c(0xd5)][_0x29632c(0x19a)](_0x5e5465[_0x29632c(0x172)],_0x5e5465[_0x29632c(0x188)]);_0x5d5253[_0x29632c(0xb8)]=_0x3642ad;let _0x312450=0xa;const _0x205cc3=await _0x1f04e0[_0x29632c(0x74)][_0x29632c(0xde)]({'where':{'id':_0x5e5465['shopId']},'select':{'gatewaySettings':!![]}});if(_0x205cc3?.[_0x29632c(0x17c)])try{const _0x3764d1=JSON['parse'](_0x205cc3[_0x29632c(0x17c)]);for(const [_0x4fd80d,_0xb3eea1]of Object[_0x29632c(0xb0)](_0x3764d1)){if(_0x4fd80d['toLowerCase']()===_0x5e5465[_0x29632c(0x7b)][_0x29632c(0xc8)]()){_0x312450=_0xb3eea1['commission']||0xa;break;}}}catch(_0x23bbc7){console['error'](_0x29632c(0xb4)+_0x2542d8+':',_0x23bbc7);}let _0x5a95d4;_0x5e5465[_0x29632c(0x13a)]!==null&&_0x5e5465['amountAfterGatewayCommissionUSDT']!==undefined?(_0x5a95d4=_0x5e5465[_0x29632c(0x13a)],console[_0x29632c(0x124)](_0x29632c(0x71)+_0x5a95d4['toFixed'](0x6)+_0x29632c(0x110)+_0x2542d8)):(_0x5a95d4=_0x3642ad*(0x1-_0x312450/0x64),console[_0x29632c(0x124)](_0x29632c(0xe1)+_0x2542d8+':\x20'+_0x312450+_0x29632c(0xbb)+_0x3642ad[_0x29632c(0x15f)](0x6)+_0x29632c(0x10a)),_0x5d5253[_0x29632c(0x13a)]=_0x5a95d4),_0x5ba300=_0x5a95d4,_0x54592c+=_0x5a95d4,console[_0x29632c(0x124)](_0x29632c(0x149)+_0x2542d8+_0x29632c(0xd0)),console[_0x29632c(0x124)](_0x29632c(0x11d)+_0x3642ad[_0x29632c(0x15f)](0x6)+_0x29632c(0x10a)),console['log'](_0x29632c(0xdd)+_0x5e5465[_0x29632c(0x7b)]+_0x29632c(0x6a)+_0x312450+'%'),console[_0x29632c(0x124)](_0x29632c(0x98)+_0x5a95d4['toFixed'](0x6)+_0x29632c(0x14c)+_0x312450+_0x29632c(0x19c)),console[_0x29632c(0x124)](_0x29632c(0xe7)+_0x5a95d4[_0x29632c(0x15f)](0x6)+_0x29632c(0x10a));}else{if(_0x4a310d===_0x29632c(0x9a)&&_0xe09832!=='PAID'){if(_0x5e5465[_0x29632c(0xb8)]){let _0x23adfa=0xa;const _0x1aba3b=await _0x1f04e0['shop'][_0x29632c(0xde)]({'where':{'id':_0x5e5465[_0x29632c(0x18c)]},'select':{'gatewaySettings':!![]}});if(_0x1aba3b?.['gatewaySettings'])try{const _0x1a5562=JSON['parse'](_0x1aba3b[_0x29632c(0x17c)]);for(const [_0x1a7d0c,_0x2be0f4]of Object[_0x29632c(0xb0)](_0x1a5562)){if(_0x1a7d0c['toLowerCase']()===_0x5e5465[_0x29632c(0x7b)]['toLowerCase']()){_0x23adfa=_0x2be0f4['commission']||0xa;break;}}}catch(_0x1da3f5){console['error'](_0x29632c(0xb4)+_0x2542d8+':',_0x1da3f5);}const _0xbd626d=_0x5e5465['amountUSDT']*(0x1-_0x23adfa/0x64);_0x5ba300=-_0xbd626d,_0x54592c-=_0xbd626d,_0x5d5253[_0x29632c(0xb8)]=null,_0x5d5253[_0x29632c(0x13a)]=null,console[_0x29632c(0x124)](_0x29632c(0x149)+_0x2542d8+_0x29632c(0x11a)),console[_0x29632c(0x124)](_0x29632c(0x11d)+_0x5e5465[_0x29632c(0xb8)][_0x29632c(0x15f)](0x6)+_0x29632c(0x10a)),console[_0x29632c(0x124)](_0x29632c(0xdd)+_0x5e5465[_0x29632c(0x7b)]+_0x29632c(0x6a)+_0x23adfa+'%'),console[_0x29632c(0x124)](_0x29632c(0x128)+_0xbd626d['toFixed'](0x6)+'\x20USDT\x20(after\x20'+_0x23adfa+_0x29632c(0x19c)),console[_0x29632c(0x124)](_0x29632c(0x16c)+_0xbd626d['toFixed'](0x6)+'\x20USDT');}}}_0xe09832===_0x29632c(0x92)&&(_0x4a310d===_0x29632c(0x9a)&&_0x5e5465[_0x29632c(0xb8)]&&console[_0x29632c(0x124)]('üí∏\x20CHARGEBACK:\x20Merchant\x20amount\x20already\x20deducted\x20from\x20balance'),_0x4f34b5&&_0x4f34b5>0x0&&(_0x5ba300-=_0x4f34b5,_0x54592c-=_0x4f34b5,console['log'](_0x29632c(0xe4)+_0x4f34b5[_0x29632c(0x15f)](0x6)+'\x20USDT\x20from\x20balance')));_0xe09832==='REFUND'&&_0x4a310d===_0x29632c(0x9a)&&console[_0x29632c(0x124)](_0x29632c(0xf7));const _0x32e770=await _0x1f04e0['payment'][_0x29632c(0x197)]({'where':{'id':_0x2542d8},'data':_0x5d5253,'include':{'shop':{'select':{'name':!![],'username':!![]}}}});return _0x5ba300!==0x0&&(await _0x1f04e0['shop'][_0x29632c(0x197)]({'where':{'id':_0x5e5465[_0x29632c(0x18c)]},'data':{'balance':_0x54592c}}),console[_0x29632c(0x124)]('üí∞\x20Shop\x20'+_0x5e5465[_0x29632c(0x18c)]+_0x29632c(0x12e)+_0x5e5465[_0x29632c(0x74)][_0x29632c(0x161)][_0x29632c(0x15f)](0x6)+_0x29632c(0x11b)+_0x54592c[_0x29632c(0x15f)](0x6)+_0x29632c(0x177)+(_0x5ba300>0x0?'+':'')+_0x5ba300['toFixed'](0x6)+')')),_0x32e770;});return{'id':_0x4b82b3['id'],'shopId':_0x4b82b3[_0xf416c7(0x18c)],'gateway':_0x4b82b3['gateway'],'amount':_0x4b82b3[_0xf416c7(0x172)],'currency':_0x4b82b3[_0xf416c7(0x188)],'status':_0x4b82b3[_0xf416c7(0x140)],'orderId':_0x4b82b3['orderId'],'gatewayOrderId':_0x4b82b3['gatewayOrderId'],'customerEmail':_0x4b82b3['customerEmail'],'customerName':_0x4b82b3[_0xf416c7(0x157)],'customerCountry':_0x4b82b3['customerCountry'],'customerIp':_0x4b82b3[_0xf416c7(0xf8)],'customerUa':_0x4b82b3[_0xf416c7(0x116)],'failureMessage':_0x4b82b3[_0xf416c7(0x158)],'adminNotes':_0x4b82b3[_0xf416c7(0xfd)],'chargebackAmount':_0x4b82b3[_0xf416c7(0xc3)],'statusChangedBy':_0x4b82b3[_0xf416c7(0xf5)],'statusChangedAt':_0x4b82b3[_0xf416c7(0x11f)],'createdAt':_0x4b82b3[_0xf416c7(0x102)],'updatedAt':_0x4b82b3[_0xf416c7(0xd6)],'shop':_0x4b82b3[_0xf416c7(0x74)]};}async[a36_0x5a6729(0x135)](_0x19bc46,_0x5ab8fd){const _0x327f99=a36_0x5a6729,_0x8f6b89=Math[_0x327f99(0xaf)]()[_0x327f99(0x15d)](0x24)[_0x327f99(0x169)](0x2,0x9);console[_0x327f99(0x124)](_0x327f99(0x67)+_0x8f6b89+_0x327f99(0x148)+_0x19bc46);const _0x47a996={..._0x5ab8fd};_0x5ab8fd['password']&&_0x5ab8fd[_0x327f99(0x170)]['trim']()!==''?(console[_0x327f99(0x124)](_0x327f99(0xea)+_0x8f6b89+_0x327f99(0x75)+_0x19bc46),_0x47a996[_0x327f99(0x170)]=await bcryptjs_1[_0x327f99(0x16e)][_0x327f99(0x152)](_0x5ab8fd['password'],0xc)):(console[_0x327f99(0x124)](_0x327f99(0xea)+_0x8f6b89+_0x327f99(0x90)),delete _0x47a996['password']);_0x5ab8fd[_0x327f99(0xd3)]&&(_0x47a996['name']=_0x5ab8fd[_0x327f99(0xd3)],delete _0x47a996[_0x327f99(0xd3)]);_0x5ab8fd['telegramId']&&(_0x47a996[_0x327f99(0x88)]=_0x5ab8fd[_0x327f99(0xe3)],delete _0x47a996[_0x327f99(0xe3)]);_0x5ab8fd[_0x327f99(0x77)]&&(_0x47a996[_0x327f99(0x163)]=_0x5ab8fd[_0x327f99(0x77)],delete _0x47a996['merchantUrl']);if(_0x5ab8fd['gateways']){const _0x42a0a2=_0x5ab8fd[_0x327f99(0x8c)]['map'](_0x25e1b3=>this[_0x327f99(0x118)](_0x25e1b3));console['log'](_0x327f99(0x146),_0x5ab8fd['gateways'],'->',_0x42a0a2),_0x47a996['paymentGateways']=JSON[_0x327f99(0x18b)](_0x42a0a2),delete _0x47a996['gateways'];}_0x5ab8fd['gatewaySettings']&&(console[_0x327f99(0x124)](_0x327f99(0x8a)+_0x8f6b89+_0x327f99(0x12d),_0x5ab8fd[_0x327f99(0x17c)]),_0x47a996[_0x327f99(0x17c)]=JSON['stringify'](_0x5ab8fd[_0x327f99(0x17c)]),console['log'](_0x327f99(0x8a)+_0x8f6b89+_0x327f99(0xb1),_0x47a996[_0x327f99(0x17c)]));_0x5ab8fd['wallets']&&(_0x5ab8fd[_0x327f99(0x165)]['usdtPolygonWallet']!==undefined&&(_0x47a996[_0x327f99(0x174)]=_0x5ab8fd[_0x327f99(0x165)][_0x327f99(0x174)]||null),_0x5ab8fd[_0x327f99(0x165)][_0x327f99(0x9c)]!==undefined&&(_0x47a996[_0x327f99(0x9c)]=_0x5ab8fd[_0x327f99(0x165)][_0x327f99(0x9c)]||null),_0x5ab8fd[_0x327f99(0x165)][_0x327f99(0x164)]!==undefined&&(_0x47a996['usdtErcWallet']=_0x5ab8fd[_0x327f99(0x165)][_0x327f99(0x164)]||null),_0x5ab8fd[_0x327f99(0x165)]['usdcPolygonWallet']!==undefined&&(_0x47a996['usdcPolygonWallet']=_0x5ab8fd[_0x327f99(0x165)][_0x327f99(0x10f)]||null),delete _0x47a996[_0x327f99(0x165)]);const _0xbcce7=await database_1[_0x327f99(0x16e)][_0x327f99(0x74)][_0x327f99(0x197)]({'where':{'id':_0x19bc46},'data':_0x47a996,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return console['log']('üéØ\x20['+_0x8f6b89+_0x327f99(0x160),_0xbcce7[_0x327f99(0x17c)]),{'id':_0xbcce7['id'],'fullName':_0xbcce7[_0x327f99(0x96)],'username':_0xbcce7[_0x327f99(0x93)],'telegramId':_0xbcce7[_0x327f99(0x88)],'merchantUrl':_0xbcce7[_0x327f99(0x163)],'gateways':_0xbcce7[_0x327f99(0xca)]?JSON['parse'](_0xbcce7[_0x327f99(0xca)]):null,'gatewaySettings':_0xbcce7[_0x327f99(0x17c)]?JSON[_0x327f99(0x6f)](_0xbcce7[_0x327f99(0x17c)]):null,'publicKey':_0xbcce7[_0x327f99(0x15c)],'wallets':{'usdtPolygonWallet':_0xbcce7[_0x327f99(0x174)],'usdtTrcWallet':_0xbcce7[_0x327f99(0x9c)],'usdtErcWallet':_0xbcce7[_0x327f99(0x164)],'usdcPolygonWallet':_0xbcce7['usdcPolygonWallet']},'status':_0xbcce7[_0x327f99(0x140)],'createdAt':_0xbcce7[_0x327f99(0x102)]};}async[a36_0x5a6729(0xa3)](_0x31f4c9){const _0x688b6d=a36_0x5a6729,_0x45b733=await database_1[_0x688b6d(0x16e)][_0x688b6d(0x74)][_0x688b6d(0x197)]({'where':{'id':_0x31f4c9},'data':{'status':'SUSPENDED'},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x45b733['id'],'fullName':_0x45b733[_0x688b6d(0x96)],'username':_0x45b733['username'],'telegramId':_0x45b733[_0x688b6d(0x88)],'merchantUrl':_0x45b733[_0x688b6d(0x163)],'gateways':_0x45b733[_0x688b6d(0xca)]?JSON['parse'](_0x45b733[_0x688b6d(0xca)]):null,'gatewaySettings':_0x45b733['gatewaySettings']?JSON[_0x688b6d(0x6f)](_0x45b733[_0x688b6d(0x17c)]):null,'publicKey':_0x45b733[_0x688b6d(0x15c)],'wallets':{'usdtPolygonWallet':_0x45b733[_0x688b6d(0x174)],'usdtTrcWallet':_0x45b733[_0x688b6d(0x9c)],'usdtErcWallet':_0x45b733[_0x688b6d(0x164)],'usdcPolygonWallet':_0x45b733[_0x688b6d(0x10f)]},'status':_0x45b733[_0x688b6d(0x140)],'createdAt':_0x45b733[_0x688b6d(0x102)]};}async[a36_0x5a6729(0x70)](_0x114aa7){const _0x4bbc04=a36_0x5a6729,_0x191c32=await database_1['default'][_0x4bbc04(0x74)][_0x4bbc04(0x197)]({'where':{'id':_0x114aa7},'data':{'status':_0x4bbc04(0xe5)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x191c32['id'],'fullName':_0x191c32[_0x4bbc04(0x96)],'username':_0x191c32[_0x4bbc04(0x93)],'telegramId':_0x191c32[_0x4bbc04(0x88)],'merchantUrl':_0x191c32[_0x4bbc04(0x163)],'gateways':_0x191c32['paymentGateways']?JSON['parse'](_0x191c32[_0x4bbc04(0xca)]):null,'gatewaySettings':_0x191c32[_0x4bbc04(0x17c)]?JSON['parse'](_0x191c32[_0x4bbc04(0x17c)]):null,'publicKey':_0x191c32['publicKey'],'wallets':{'usdtPolygonWallet':_0x191c32[_0x4bbc04(0x174)],'usdtTrcWallet':_0x191c32['usdtTrcWallet'],'usdtErcWallet':_0x191c32[_0x4bbc04(0x164)],'usdcPolygonWallet':_0x191c32[_0x4bbc04(0x10f)]},'status':_0x191c32[_0x4bbc04(0x140)],'createdAt':_0x191c32[_0x4bbc04(0x102)]};}async[a36_0x5a6729(0xc2)](_0x374bb9){const _0x519d8c=a36_0x5a6729,{page:_0x1c1e01,limit:_0x1ccf14,status:_0x452ace}=_0x374bb9,_0x227d0f=(_0x1c1e01-0x1)*_0x1ccf14,_0x2afe35={};_0x452ace&&(_0x2afe35[_0x519d8c(0x140)]=_0x452ace[_0x519d8c(0x6b)]());const [_0x258ecc,_0x36b43c]=await Promise['all']([database_1[_0x519d8c(0x16e)][_0x519d8c(0x74)][_0x519d8c(0x18f)]({'where':_0x2afe35,'skip':_0x227d0f,'take':_0x1ccf14,'orderBy':{'createdAt':_0x519d8c(0xed)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}}),database_1[_0x519d8c(0x16e)][_0x519d8c(0x74)][_0x519d8c(0x191)]({'where':_0x2afe35})]);return{'users':_0x258ecc['map'](_0x4b6ec7=>{const _0x5c0925=_0x519d8c,_0x1e2812=_0x4b6ec7[_0x5c0925(0xca)]?JSON[_0x5c0925(0x6f)](_0x4b6ec7[_0x5c0925(0xca)]):null,_0x56c538=_0x1e2812?_0x1e2812[_0x5c0925(0x72)](_0x18608d=>this['getGatewayDisplayName'](_0x18608d)):null;return{'id':_0x4b6ec7['id'],'fullName':_0x4b6ec7[_0x5c0925(0x96)],'username':_0x4b6ec7['username'],'telegramId':_0x4b6ec7[_0x5c0925(0x88)],'merchantUrl':_0x4b6ec7[_0x5c0925(0x163)],'gateways':_0x56c538,'gatewaySettings':_0x4b6ec7[_0x5c0925(0x17c)]?JSON[_0x5c0925(0x6f)](_0x4b6ec7['gatewaySettings']):null,'publicKey':_0x4b6ec7[_0x5c0925(0x15c)],'wallets':{'usdtPolygonWallet':_0x4b6ec7[_0x5c0925(0x174)],'usdtTrcWallet':_0x4b6ec7[_0x5c0925(0x9c)],'usdtErcWallet':_0x4b6ec7[_0x5c0925(0x164)],'usdcPolygonWallet':_0x4b6ec7['usdcPolygonWallet']},'status':_0x4b6ec7[_0x5c0925(0x140)],'createdAt':_0x4b6ec7[_0x5c0925(0x102)]};}),'pagination':{'page':_0x1c1e01,'limit':_0x1ccf14,'total':_0x36b43c,'totalPages':Math[_0x519d8c(0xc6)](_0x36b43c/_0x1ccf14)}};}async[a36_0x5a6729(0xc4)](_0x35a476){const _0x27be78=a36_0x5a6729,_0x288025=await database_1['default'][_0x27be78(0x74)][_0x27be78(0xde)]({'where':{'id':_0x35a476},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x288025)return null;const _0xfff1ea=_0x288025[_0x27be78(0xca)]?JSON[_0x27be78(0x6f)](_0x288025[_0x27be78(0xca)]):null,_0x18a404=_0xfff1ea?_0xfff1ea[_0x27be78(0x72)](_0x66c5bf=>this[_0x27be78(0xf0)](_0x66c5bf)):null;return _0xfff1ea&&_0x18a404&&console['log'](_0x27be78(0x194),_0xfff1ea,'->',_0x18a404),{'id':_0x288025['id'],'fullName':_0x288025[_0x27be78(0x96)],'username':_0x288025[_0x27be78(0x93)],'telegramId':_0x288025['telegram'],'merchantUrl':_0x288025[_0x27be78(0x163)],'gateways':_0x18a404,'gatewaySettings':_0x288025[_0x27be78(0x17c)]?JSON[_0x27be78(0x6f)](_0x288025[_0x27be78(0x17c)]):null,'publicKey':_0x288025[_0x27be78(0x15c)],'wallets':{'usdtPolygonWallet':_0x288025[_0x27be78(0x174)],'usdtTrcWallet':_0x288025['usdtTrcWallet'],'usdtErcWallet':_0x288025[_0x27be78(0x164)],'usdcPolygonWallet':_0x288025[_0x27be78(0x10f)]},'status':_0x288025[_0x27be78(0x140)],'createdAt':_0x288025[_0x27be78(0x102)]};}async[a36_0x5a6729(0x14f)](_0x2079db){const _0x3fa2b0=a36_0x5a6729,{fullName:_0x459beb,username:_0x5f24f1,password:_0x33757c,telegramId:_0x4d1aeb,merchantUrl:_0x5de874,gateways:_0x5e36f3,gatewaySettings:_0x45dbd7,wallets:_0x11f336}=_0x2079db,_0x37928a=await database_1[_0x3fa2b0(0x16e)][_0x3fa2b0(0x74)][_0x3fa2b0(0xde)]({'where':{'username':_0x5f24f1}});if(_0x37928a)throw new Error(_0x3fa2b0(0xb7));if(_0x4d1aeb){const _0x11ea94=await database_1['default'][_0x3fa2b0(0x74)][_0x3fa2b0(0xde)]({'where':{'telegram':_0x4d1aeb}});if(_0x11ea94)throw new Error(_0x3fa2b0(0xe6));}const _0x3f30d9=await bcryptjs_1[_0x3fa2b0(0x16e)][_0x3fa2b0(0x152)](_0x33757c,0xc),_0x2c9007=_0x3fa2b0(0x17f)+crypto_1[_0x3fa2b0(0x16e)][_0x3fa2b0(0xc7)](0x20)[_0x3fa2b0(0x15d)](_0x3fa2b0(0x193)),_0x49dcc0=_0x3fa2b0(0x16a)+crypto_1[_0x3fa2b0(0x16e)][_0x3fa2b0(0xc7)](0x20)[_0x3fa2b0(0x15d)]('hex'),_0x45d291=_0x5e36f3?_0x5e36f3['map'](_0x5ce365=>this[_0x3fa2b0(0x118)](_0x5ce365)):null;_0x5e36f3&&_0x45d291&&console[_0x3fa2b0(0x124)]('üîÑ\x20Gateway\x20mapping\x20(create):',_0x5e36f3,'->',_0x45d291);const _0x2639b1=await database_1[_0x3fa2b0(0x16e)][_0x3fa2b0(0x74)][_0x3fa2b0(0xae)]({'data':{'name':_0x459beb,'username':_0x5f24f1,'password':_0x3f30d9,'telegram':_0x4d1aeb,'shopUrl':_0x5de874,'paymentGateways':_0x45d291?JSON[_0x3fa2b0(0x18b)](_0x45d291):null,'gatewaySettings':_0x45dbd7?JSON[_0x3fa2b0(0x18b)](_0x45dbd7):null,'usdtPolygonWallet':_0x11f336?.[_0x3fa2b0(0x174)]||null,'usdtTrcWallet':_0x11f336?.[_0x3fa2b0(0x9c)]||null,'usdtErcWallet':_0x11f336?.[_0x3fa2b0(0x164)]||null,'usdcPolygonWallet':_0x11f336?.[_0x3fa2b0(0x10f)]||null,'publicKey':_0x2c9007,'secretKey':_0x49dcc0,'status':_0x3fa2b0(0xe5)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x2639b1['id'],'fullName':_0x2639b1[_0x3fa2b0(0x96)],'username':_0x2639b1['username'],'telegramId':_0x2639b1[_0x3fa2b0(0x88)],'merchantUrl':_0x2639b1[_0x3fa2b0(0x163)],'gateways':_0x2639b1[_0x3fa2b0(0xca)]?JSON['parse'](_0x2639b1[_0x3fa2b0(0xca)]):null,'gatewaySettings':_0x2639b1[_0x3fa2b0(0x17c)]?JSON[_0x3fa2b0(0x6f)](_0x2639b1[_0x3fa2b0(0x17c)]):null,'publicKey':_0x2639b1[_0x3fa2b0(0x15c)],'wallets':{'usdtPolygonWallet':_0x2639b1[_0x3fa2b0(0x174)],'usdtTrcWallet':_0x2639b1[_0x3fa2b0(0x9c)],'usdtErcWallet':_0x2639b1['usdtErcWallet'],'usdcPolygonWallet':_0x2639b1['usdcPolygonWallet']},'status':_0x2639b1[_0x3fa2b0(0x140)],'createdAt':_0x2639b1[_0x3fa2b0(0x102)]};}async['deleteUser'](_0x2bb137){const _0x2304de=a36_0x5a6729;await database_1['default'][_0x2304de(0x74)]['delete']({'where':{'id':_0x2bb137}});}[a36_0x5a6729(0x182)](_0x3f2392,_0x269c7c,_0xaf8783){const _0x579d0e=a36_0x5a6729,_0x2d5efd=new Map(),_0x352662=new Date(_0x269c7c);while(_0x352662<=_0xaf8783){const _0x105003=_0x352662['toISOString']()[_0x579d0e(0x199)]('T')[0x0];_0x2d5efd[_0x579d0e(0x115)](_0x105003,{'revenue':0x0,'count':0x0}),_0x352662['setDate'](_0x352662[_0x579d0e(0x65)]()+0x1);}for(const _0x40e458 of _0x3f2392){const _0x112e63=_0x40e458[_0x579d0e(0x102)]['toISOString']()[_0x579d0e(0x199)]('T')[0x0],_0x10954f=_0x2d5efd[_0x579d0e(0x86)](_0x112e63);_0x10954f&&(_0x10954f['count']+=0x1,_0x40e458[_0x579d0e(0x140)]===_0x579d0e(0x9a)&&(_0x40e458['amountUSDT']?_0x10954f[_0x579d0e(0x171)]+=_0x40e458['amountUSDT']:console[_0x579d0e(0x124)](_0x579d0e(0x12b)+_0x40e458['id']+'\x20missing\x20amountUSDT,\x20using\x20fallback\x20conversion')));}const _0x1ccbc4=[],_0x272664=[];for(const [_0x3c7b15,_0x373fff]of _0x2d5efd){_0x1ccbc4[_0x579d0e(0x13f)]({'date':_0x3c7b15,'amount':Math[_0x579d0e(0xa1)](_0x373fff[_0x579d0e(0x171)]*0x64)/0x64}),_0x272664[_0x579d0e(0x13f)]({'date':_0x3c7b15,'count':_0x373fff[_0x579d0e(0x191)]});}return{'dailyRevenue':_0x1ccbc4,'dailyPayments':_0x272664};}}exports[a36_0x5a6729(0xc0)]=AdminService;