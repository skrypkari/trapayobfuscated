'use strict';const a36_0x52a1b6=a36_0x4bd1;(function(_0xdd6f3e,_0x10f53f){const _0x419b3f=a36_0x4bd1,_0x5d901c=_0xdd6f3e();while(!![]){try{const _0x4dace0=parseInt(_0x419b3f(0x1a0))/0x1*(-parseInt(_0x419b3f(0x13a))/0x2)+parseInt(_0x419b3f(0x10a))/0x3+parseInt(_0x419b3f(0x16a))/0x4+parseInt(_0x419b3f(0x174))/0x5*(-parseInt(_0x419b3f(0x151))/0x6)+parseInt(_0x419b3f(0x1ea))/0x7*(-parseInt(_0x419b3f(0x187))/0x8)+-parseInt(_0x419b3f(0x16b))/0x9+parseInt(_0x419b3f(0x13e))/0xa;if(_0x4dace0===_0x10f53f)break;else _0x5d901c['push'](_0x5d901c['shift']());}catch(_0x2e6fed){_0x5d901c['push'](_0x5d901c['shift']());}}}(a36_0x40f8,0xbd716));function a36_0x4bd1(_0x1fa842,_0x31b72b){const _0x40f882=a36_0x40f8();return a36_0x4bd1=function(_0x4bd11d,_0x59532e){_0x4bd11d=_0x4bd11d-0xeb;let _0x244bb4=_0x40f882[_0x4bd11d];return _0x244bb4;},a36_0x4bd1(_0x1fa842,_0x31b72b);}var __importDefault=this&&this[a36_0x52a1b6(0x184)]||function(_0x384994){const _0x47d1c7=a36_0x52a1b6;return _0x384994&&_0x384994[_0x47d1c7(0x1c6)]?_0x384994:{'default':_0x384994};};Object[a36_0x52a1b6(0x175)](exports,a36_0x52a1b6(0x1c6),{'value':!![]}),exports[a36_0x52a1b6(0x1f5)]=void 0x0;const database_1=__importDefault(require(a36_0x52a1b6(0x125))),bcryptjs_1=__importDefault(require('bcryptjs')),crypto_1=__importDefault(require(a36_0x52a1b6(0x1dc))),currencyService_1=require(a36_0x52a1b6(0x207)),gateway_1=require('../types/gateway');class AdminService{async[a36_0x52a1b6(0x1ef)](){const _0x492769=a36_0x52a1b6;console[_0x492769(0x10f)]('📊\x20Calculating\x20payout\x20statistics...');const _0x487bf8=await database_1[_0x492769(0x1c5)][_0x492769(0x134)]['aggregate']({'_sum':{'balance':!![],'totalPaidOut':!![]},'where':{'status':_0x492769(0x17b)}}),_0x37078d=await this['getMerchantsAwaitingPayout']({'page':0x1,'limit':0x3e8}),_0x514b73=await database_1['default']['payment'][_0x492769(0x19f)]({'where':{'status':_0x492769(0x178),'gateway':{'not':_0x492769(0x121)}}}),_0x2f8c37=new Date(),_0x71c27c=new Date(_0x2f8c37[_0x492769(0x12e)](),_0x2f8c37[_0x492769(0xf3)](),0x1),_0x16ac1f=new Date(_0x2f8c37[_0x492769(0x12e)](),_0x2f8c37[_0x492769(0xf3)]()+0x1,0x0,0x17,0x3b,0x3b,0x3e7),_0x59a32b=await database_1[_0x492769(0x1c5)]['payout'][_0x492769(0x16d)]({'_sum':{'amount':!![]},'where':{'createdAt':{'gte':_0x71c27c,'lte':_0x16ac1f},'status':_0x492769(0x1ee)}}),_0x5f0dd3=_0x487bf8[_0x492769(0x225)][_0x492769(0x129)]||0x0,_0x22cbfb=_0x37078d['summary'][_0x492769(0x210)],_0x16dcae=_0x59a32b[_0x492769(0x225)][_0x492769(0x196)]||0x0,_0x48f984={'totalPayout':Math[_0x492769(0x19a)](_0x5f0dd3*0x64)/0x64,'awaitingPayout':Math[_0x492769(0x19a)](_0x22cbfb*0x64)/0x64,'thisMonth':Math[_0x492769(0x19a)](_0x16dcae*0x64)/0x64,'availableBalance':Math[_0x492769(0x19a)](_0x22cbfb*0x64)/0x64,'totalPayments':_0x514b73};return console['log'](_0x492769(0x1e9)),console[_0x492769(0x10f)](_0x492769(0x1ed)+_0x48f984[_0x492769(0x17e)]+_0x492769(0x12f)),console[_0x492769(0x10f)]('\x20\x20\x20⏳\x20Awaiting\x20payout:\x20'+_0x48f984[_0x492769(0x15e)]+_0x492769(0x16e)),console[_0x492769(0x10f)]('\x20\x20\x20💵\x20Available\x20balance:\x20'+_0x48f984[_0x492769(0x205)]+'\x20USDT\x20(same\x20as\x20awaiting)'),console[_0x492769(0x10f)]('\x20\x20\x20📅\x20This\x20month:\x20'+_0x48f984[_0x492769(0x156)]+_0x492769(0x146)),console[_0x492769(0x10f)](_0x492769(0x14c)+_0x48f984[_0x492769(0x227)]+_0x492769(0x1cf)),console['log'](_0x492769(0x183)+(_0x487bf8[_0x492769(0x225)]['balance']||0x0)[_0x492769(0x192)](0x2)+_0x492769(0x110)),console[_0x492769(0x10f)](_0x492769(0x1b6)+((_0x487bf8['_sum'][_0x492769(0x165)]||0x0)-_0x22cbfb)['toFixed'](0x2)+_0x492769(0x146)),_0x48f984;}async[a36_0x52a1b6(0x1a2)](_0x45b4ad,_0x141680){const _0x5d0314=a36_0x52a1b6;console[_0x5d0314(0x10f)](_0x5d0314(0x20b)+_0x45b4ad+':',_0x141680);const _0x4a054b=await database_1[_0x5d0314(0x1c5)][_0x5d0314(0x179)][_0x5d0314(0xf5)]({'where':{'id':_0x45b4ad},'select':{'id':!![],'customerEmail':!![],'customerName':!![],'customerCountry':!![],'customerIp':!![],'customerUa':!![]}});if(!_0x4a054b)throw new Error('Payment\x20not\x20found');const _0x513096={};_0x141680['customerCountry']!==undefined&&(_0x513096[_0x5d0314(0x13c)]=_0x141680[_0x5d0314(0x13c)]||null);_0x141680['customerIp']!==undefined&&(_0x513096[_0x5d0314(0x149)]=_0x141680[_0x5d0314(0x149)]||null);_0x141680[_0x5d0314(0x123)]!==undefined&&(_0x513096['customerUa']=_0x141680[_0x5d0314(0x123)]||null);const _0x37d672=await database_1[_0x5d0314(0x1c5)][_0x5d0314(0x179)][_0x5d0314(0x1b4)]({'where':{'id':_0x45b4ad},'data':{..._0x513096,'updatedAt':new Date()},'select':{'id':!![],'customerEmail':!![],'customerName':!![],'customerCountry':!![],'customerIp':!![],'customerUa':!![],'updatedAt':!![]}});return console['log']('✅\x20Customer\x20data\x20updated\x20for\x20payment\x20'+_0x45b4ad),console['log'](_0x5d0314(0xfe)+_0x4a054b[_0x5d0314(0x13c)]+'\x20->\x20'+_0x37d672[_0x5d0314(0x13c)]),console['log'](_0x5d0314(0x185)+_0x4a054b[_0x5d0314(0x149)]+_0x5d0314(0x1b8)+_0x37d672[_0x5d0314(0x149)]),console['log'](_0x5d0314(0x20c)+(_0x4a054b[_0x5d0314(0x123)]?_0x5d0314(0x22b):_0x5d0314(0x189))+'\x20->\x20'+(_0x37d672['customerUa']?'set':_0x5d0314(0x189))),_0x37d672;}async[a36_0x52a1b6(0x1d9)](_0x12a3c7){const _0x5dab5d=a36_0x52a1b6,_0x1984f8=new Date();let _0x5a0950;switch(_0x12a3c7){case'7d':_0x5a0950=new Date(_0x1984f8[_0x5dab5d(0x153)]()-0x7*0x18*0x3c*0x3c*0x3e8);break;case _0x5dab5d(0x1df):_0x5a0950=new Date(_0x1984f8['getTime']()-0x1e*0x18*0x3c*0x3c*0x3e8);break;case'90d':_0x5a0950=new Date(_0x1984f8['getTime']()-0x5a*0x18*0x3c*0x3c*0x3e8);break;case'all':const _0x42b8d8=await database_1[_0x5dab5d(0x1c5)]['payment'][_0x5dab5d(0xfd)]({'where':{'gateway':{'not':_0x5dab5d(0x121)}},'orderBy':{'createdAt':'asc'},'select':{'createdAt':!![]}});_0x5a0950=_0x42b8d8?_0x42b8d8['createdAt']:new Date('2020-01-01'),console[_0x5dab5d(0x10f)]('📅\x20Period\x20\x27all\x27:\x20Using\x20start\x20date\x20from\x20first\x20payment:\x20'+_0x5a0950[_0x5dab5d(0x10e)]());break;default:_0x5a0950=new Date(_0x1984f8[_0x5dab5d(0x153)]()-0x1e*0x18*0x3c*0x3c*0x3e8);}const [_0x589501,_0x3ef8f4,_0x3a068c,_0x43be95,_0x1a18ab,_0x24b2af]=await Promise[_0x5dab5d(0x161)]([database_1['default'][_0x5dab5d(0x134)]['count'](),database_1[_0x5dab5d(0x1c5)]['shop'][_0x5dab5d(0x19f)]({'where':{'status':'ACTIVE'}}),database_1[_0x5dab5d(0x1c5)][_0x5dab5d(0x179)][_0x5dab5d(0x19f)]({'where':{'status':_0x5dab5d(0x178),'createdAt':{'gte':_0x5a0950},'gateway':{'not':'test_gateway'}}}),database_1['default'][_0x5dab5d(0x179)][_0x5dab5d(0x1ca)]({'where':{'status':_0x5dab5d(0x178),'createdAt':{'gte':_0x5a0950},'gateway':{'not':_0x5dab5d(0x121)}},'select':{'amount':!![],'currency':!![],'amountAfterGatewayCommissionUSDT':!![]}}),database_1[_0x5dab5d(0x1c5)][_0x5dab5d(0x179)][_0x5dab5d(0x1ca)]({'where':{'gateway':{'not':'test_gateway'}},'take':0xa,'orderBy':{'createdAt':_0x5dab5d(0x1fb)},'include':{'shop':{'select':{'name':!![],'username':!![]}}}}),database_1[_0x5dab5d(0x1c5)][_0x5dab5d(0x179)]['findMany']({'where':{'createdAt':{'gte':_0x5a0950},'gateway':{'not':_0x5dab5d(0x121)}},'select':{'amount':!![],'currency':!![],'status':!![],'amountUSDT':!![],'createdAt':!![]}})]);let _0x3e7535=0x0,_0x1e88bb=0x0;for(const _0x512c11 of _0x43be95){const _0x4c3ee2=await currencyService_1['currencyService']['convertToUSDT'](_0x512c11['amount'],_0x512c11['currency']);_0x3e7535+=_0x4c3ee2;if(_0x512c11[_0x5dab5d(0xeb)]){const _0x44df18=await currencyService_1[_0x5dab5d(0x17c)][_0x5dab5d(0x214)](_0x512c11['amount'],_0x512c11['currency']),_0x22125b=_0x512c11[_0x5dab5d(0xeb)],_0x5ed764=_0x44df18-_0x22125b;_0x1e88bb+=_0x5ed764;}}const _0x32dd41=_0x3a068c>0x0?_0x3e7535/_0x3a068c:0x0,_0x37ebb8=this[_0x5dab5d(0x18c)](_0x24b2af,_0x5a0950,_0x1984f8),_0xf4cb17=await database_1[_0x5dab5d(0x1c5)][_0x5dab5d(0x179)][_0x5dab5d(0x19f)]({'where':{'createdAt':{'gte':_0x5a0950},'gateway':{'not':_0x5dab5d(0x121)}}}),_0x348895=_0xf4cb17>0x0?_0x3a068c/_0xf4cb17*0x64:0x0;return{'totalShops':_0x589501,'activeShops':_0x3ef8f4,'totalPayments':_0x3a068c,'successfulPayments':_0x3a068c,'totalAttempts':_0xf4cb17,'totalRevenue':Math[_0x5dab5d(0x19a)](_0x3e7535*0x64)/0x64,'trapayEarnings':Math[_0x5dab5d(0x19a)](_0x1e88bb*0x64)/0x64,'averagePaymentAmount':Math['round'](_0x32dd41*0x64)/0x64,'conversionRate':Math['round'](_0x348895*0x64)/0x64,'dailyRevenue':_0x37ebb8[_0x5dab5d(0x1f2)],'dailyPayments':_0x37ebb8[_0x5dab5d(0x1ce)],'recentPayments':_0x1a18ab[_0x5dab5d(0x1f1)](_0x12949f=>({'id':_0x12949f['id'],'amount':_0x12949f[_0x5dab5d(0x196)],'currency':_0x12949f[_0x5dab5d(0x226)],'status':_0x12949f[_0x5dab5d(0x1a9)],'gateway':_0x12949f[_0x5dab5d(0x150)],'shop':_0x12949f[_0x5dab5d(0x134)],'createdAt':_0x12949f['createdAt']}))};}async[a36_0x52a1b6(0x19e)](_0x51a73d){const _0x267ca8=a36_0x52a1b6;console[_0x267ca8(0x10f)](_0x267ca8(0x203),_0x51a73d);let _0x505485,_0x4a03c2=new Date();if(_0x51a73d[_0x267ca8(0xfa)]===_0x267ca8(0x1ab)&&_0x51a73d[_0x267ca8(0x1e8)]&&_0x51a73d['dateTo'])_0x505485=new Date(_0x51a73d[_0x267ca8(0x1e8)]),_0x4a03c2=new Date(_0x51a73d[_0x267ca8(0x1da)]);else{const _0x20ce07=new Date();switch(_0x51a73d[_0x267ca8(0xfa)]){case _0x267ca8(0x11e):_0x505485=new Date(_0x20ce07[_0x267ca8(0x153)]()-0x7*0x18*0x3c*0x3c*0x3e8);break;case _0x267ca8(0x199):_0x505485=new Date(_0x20ce07[_0x267ca8(0x153)]()-0x1e*0x18*0x3c*0x3c*0x3e8);break;case _0x267ca8(0x109):_0x505485=new Date(_0x20ce07[_0x267ca8(0x153)]()-0x16d*0x18*0x3c*0x3c*0x3e8);break;case _0x267ca8(0x161):default:_0x505485=new Date(_0x267ca8(0x138));break;}}console['log'](_0x267ca8(0x191)+_0x505485['toISOString']()+_0x267ca8(0x10c)+_0x4a03c2[_0x267ca8(0x10e)]());const _0x5ba532={'status':_0x267ca8(0x178),'gateway':{'not':_0x267ca8(0x121)},'paidAt':{'gte':_0x505485,'lte':_0x4a03c2}};_0x51a73d[_0x267ca8(0x1ad)]&&(_0x5ba532['shopId']=_0x51a73d[_0x267ca8(0x1ad)]);const _0x399047=await database_1[_0x267ca8(0x1c5)][_0x267ca8(0x179)][_0x267ca8(0x1ca)]({'where':_0x5ba532,'include':{'shop':{'select':{'id':!![],'name':!![],'username':!![],'gatewaySettings':!![]}}}});console[_0x267ca8(0x10f)](_0x267ca8(0x1a6)+_0x399047[_0x267ca8(0x228)]+_0x267ca8(0x1fe));const _0x28718b={'gateway':{'not':_0x267ca8(0x121)},'createdAt':{'gte':_0x505485,'lte':_0x4a03c2}};_0x51a73d['shopId']&&(_0x28718b[_0x267ca8(0x1ad)]=_0x51a73d[_0x267ca8(0x1ad)]);const _0x23b835=await database_1[_0x267ca8(0x1c5)][_0x267ca8(0x179)][_0x267ca8(0x19f)]({'where':_0x28718b});console[_0x267ca8(0x10f)](_0x267ca8(0x1af)+_0x23b835+',\x20successful:\x20'+_0x399047[_0x267ca8(0x228)]);let _0x4a7e11=0x0,_0x2e214f=0x0,_0x17053e=0x0;const _0x4debad={},_0x25c85b={},_0xa39f91={};for(const _0x3aa497 of _0x399047){try{const _0x515575=await currencyService_1[_0x267ca8(0x17c)]['convertToUSDT'](_0x3aa497['amount'],_0x3aa497[_0x267ca8(0x226)]);let _0x3a49c4={};if(_0x3aa497[_0x267ca8(0x134)][_0x267ca8(0xfc)])try{_0x3a49c4=JSON[_0x267ca8(0x167)](_0x3aa497[_0x267ca8(0x134)][_0x267ca8(0xfc)]);}catch(_0xe1162a){console[_0x267ca8(0x1ac)](_0x267ca8(0x11d)+_0x3aa497['shopId']+':',_0xe1162a);}let _0x57c57e={},_0xc1626e=0xa;for(const [_0x1ab995,_0x449ecd]of Object[_0x267ca8(0x18f)](_0x3a49c4)){if(_0x1ab995[_0x267ca8(0x1c3)]()===_0x3aa497[_0x267ca8(0x150)][_0x267ca8(0x1c3)]()){_0x57c57e=_0x449ecd,_0xc1626e=_0x449ecd['commission']||0xa;break;}}let _0x380453,_0x5a27c0;_0x3aa497['amountAfterGatewayCommissionUSDT']!==null&&_0x3aa497[_0x267ca8(0xeb)]!==undefined?(_0x380453=_0x3aa497['amountAfterGatewayCommissionUSDT'],_0x5a27c0=_0x515575-_0x380453,console['log']('📊\x20Using\x20saved\x20amountAfterGatewayCommissionUSDT:\x20'+_0x380453['toFixed'](0x6)+_0x267ca8(0x21b)+_0x3aa497['id'])):(_0x5a27c0=_0x515575*(_0xc1626e/0x64),_0x380453=_0x515575-_0x5a27c0,console[_0x267ca8(0x10f)](_0x267ca8(0x10d)+_0x3aa497['id']+':\x20'+_0xc1626e+_0x267ca8(0x1c8)+_0x515575[_0x267ca8(0x192)](0x6)+_0x267ca8(0x146)));_0x4a7e11+=_0x515575,_0x2e214f+=_0x380453,_0x17053e+=_0x5a27c0;!_0x4debad[_0x3aa497[_0x267ca8(0x150)]]&&(_0x4debad[_0x3aa497[_0x267ca8(0x150)]]={'gateway':_0x3aa497['gateway'],'gatewayDisplayName':this[_0x267ca8(0x160)](_0x3aa497[_0x267ca8(0x150)]),'paymentsCount':0x0,'turnoverUSDT':0x0,'commissionUSDT':0x0,'merchantEarningsUSDT':0x0,'totalCommissionRate':0x0});_0x4debad[_0x3aa497[_0x267ca8(0x150)]][_0x267ca8(0x113)]++,_0x4debad[_0x3aa497['gateway']][_0x267ca8(0xf6)]+=_0x515575,_0x4debad[_0x3aa497['gateway']][_0x267ca8(0x229)]+=_0x5a27c0,_0x4debad[_0x3aa497[_0x267ca8(0x150)]][_0x267ca8(0x12b)]+=_0x380453,_0x4debad[_0x3aa497[_0x267ca8(0x150)]]['totalCommissionRate']+=_0xc1626e;!_0x51a73d['shopId']&&(!_0x25c85b[_0x3aa497['shopId']]&&(_0x25c85b[_0x3aa497['shopId']]={'shopId':_0x3aa497[_0x267ca8(0x1ad)],'shopName':_0x3aa497['shop'][_0x267ca8(0x120)],'shopUsername':_0x3aa497[_0x267ca8(0x134)][_0x267ca8(0x211)],'paymentsCount':0x0,'turnoverUSDT':0x0,'commissionUSDT':0x0,'merchantEarningsUSDT':0x0,'paidOutUSDT':0x0,'averageCheckUSDT':0x0}),_0x25c85b[_0x3aa497[_0x267ca8(0x1ad)]]['paymentsCount']++,_0x25c85b[_0x3aa497[_0x267ca8(0x1ad)]][_0x267ca8(0xf6)]+=_0x515575,_0x25c85b[_0x3aa497[_0x267ca8(0x1ad)]][_0x267ca8(0x229)]+=_0x5a27c0,_0x25c85b[_0x3aa497['shopId']][_0x267ca8(0x12b)]+=_0x380453);const _0x4db5b1=_0x3aa497[_0x267ca8(0x1bc)][_0x267ca8(0x10e)]()['split']('T')[0x0];!_0xa39f91[_0x4db5b1]&&(_0xa39f91[_0x4db5b1]={'date':_0x4db5b1,'turnover':0x0,'merchantEarnings':0x0,'gatewayEarnings':0x0,'paymentsCount':0x0}),_0xa39f91[_0x4db5b1][_0x267ca8(0x14e)]+=_0x515575,_0xa39f91[_0x4db5b1][_0x267ca8(0x164)]+=_0x380453,_0xa39f91[_0x4db5b1][_0x267ca8(0x15c)]+=_0x5a27c0,_0xa39f91[_0x4db5b1][_0x267ca8(0x113)]++;}catch(_0x282583){console[_0x267ca8(0x1ac)](_0x267ca8(0x1b3)+_0x3aa497['id']+':',_0x282583);}}Object[_0x267ca8(0x133)](_0x4debad)[_0x267ca8(0x127)](_0x29ca4a=>{const _0x524596=_0x267ca8;_0x29ca4a['averageCommissionRate']=_0x29ca4a['paymentsCount']>0x0?_0x29ca4a[_0x524596(0x20a)]/_0x29ca4a[_0x524596(0x113)]:0x0,delete _0x29ca4a[_0x524596(0x20a)];}),Object[_0x267ca8(0x133)](_0x25c85b)['forEach'](_0xbbd8d4=>{const _0xa3ec1e=_0x267ca8;_0xbbd8d4['averageCheckUSDT']=_0xbbd8d4[_0xa3ec1e(0x113)]>0x0?_0xbbd8d4[_0xa3ec1e(0xf6)]/_0xbbd8d4[_0xa3ec1e(0x113)]:0x0;});let _0x2e494d=0x0,_0x39173e=0x0;if(_0x51a73d[_0x267ca8(0x1ad)]){const _0x2f1fd5=await database_1[_0x267ca8(0x1c5)]['payout'][_0x267ca8(0x1ca)]({'where':{'shopId':_0x51a73d['shopId'],'status':_0x267ca8(0x1ee),'createdAt':{'gte':_0x505485,'lte':_0x4a03c2}},'select':{'amount':!![]}});_0x2e494d=_0x2f1fd5[_0x267ca8(0x131)]((_0x4b1e55,_0x2b324b)=>_0x4b1e55+_0x2b324b[_0x267ca8(0x196)],0x0);const _0x273159=await database_1[_0x267ca8(0x1c5)][_0x267ca8(0x18d)][_0x267ca8(0x1ca)]({'where':{'shopId':_0x51a73d[_0x267ca8(0x1ad)],'status':_0x267ca8(0x17a),'createdAt':{'gte':_0x505485,'lte':_0x4a03c2}},'select':{'amount':!![]}});_0x39173e=_0x273159['reduce']((_0x22dc09,_0x628c66)=>_0x22dc09+_0x628c66[_0x267ca8(0x196)],0x0);}const _0x22af1c=_0x23b835,_0x640384=_0x399047[_0x267ca8(0x228)],_0x3a150c=_0x640384>0x0?_0x4a7e11/_0x640384:0x0,_0x159c8d=_0x22af1c>0x0?Math['round'](_0x640384/_0x22af1c*0x2710)/0x64:0x0,_0x3de2e1=Math[_0x267ca8(0x14a)]((_0x4a03c2[_0x267ca8(0x153)]()-_0x505485[_0x267ca8(0x153)]())/(0x3e8*0x3c*0x3c*0x18)),_0x50d39b={'totalTurnover':Math[_0x267ca8(0x19a)](_0x4a7e11*0x64)/0x64,'merchantEarnings':Math[_0x267ca8(0x19a)](_0x2e214f*0x64)/0x64,'gatewayEarnings':Math[_0x267ca8(0x19a)](_0x17053e*0x64)/0x64,'totalPaidOut':Math['round'](_0x2e494d*0x64)/0x64,'pendingPayout':Math[_0x267ca8(0x19a)](_0x39173e*0x64)/0x64,'averageCheck':Math[_0x267ca8(0x19a)](_0x3a150c*0x64)/0x64,'totalPayments':_0x22af1c,'successfulPayments':_0x640384,'conversionRate':_0x159c8d,'gatewayBreakdown':Object[_0x267ca8(0x133)](_0x4debad)[_0x267ca8(0x1f1)](_0x1c2cd8=>({..._0x1c2cd8,'turnoverUSDT':Math[_0x267ca8(0x19a)](_0x1c2cd8[_0x267ca8(0xf6)]*0x64)/0x64,'commissionUSDT':Math[_0x267ca8(0x19a)](_0x1c2cd8[_0x267ca8(0x229)]*0x64)/0x64,'merchantEarningsUSDT':Math['round'](_0x1c2cd8[_0x267ca8(0x12b)]*0x64)/0x64,'averageCommissionRate':Math[_0x267ca8(0x19a)](_0x1c2cd8['averageCommissionRate']*0x64)/0x64})),'merchantBreakdown':_0x51a73d[_0x267ca8(0x1ad)]?undefined:Object[_0x267ca8(0x133)](_0x25c85b)[_0x267ca8(0x1f1)](_0x137053=>({..._0x137053,'turnoverUSDT':Math[_0x267ca8(0x19a)](_0x137053[_0x267ca8(0xf6)]*0x64)/0x64,'commissionUSDT':Math['round'](_0x137053[_0x267ca8(0x229)]*0x64)/0x64,'merchantEarningsUSDT':Math[_0x267ca8(0x19a)](_0x137053[_0x267ca8(0x12b)]*0x64)/0x64,'paidOutUSDT':Math[_0x267ca8(0x19a)](_0x137053[_0x267ca8(0x170)]*0x64)/0x64,'averageCheckUSDT':Math[_0x267ca8(0x19a)](_0x137053[_0x267ca8(0x21a)]*0x64)/0x64})),'dailyData':Object[_0x267ca8(0x133)](_0xa39f91)[_0x267ca8(0x1f1)](_0x3c954e=>({..._0x3c954e,'turnover':Math['round'](_0x3c954e[_0x267ca8(0x14e)]*0x64)/0x64,'merchantEarnings':Math[_0x267ca8(0x19a)](_0x3c954e['merchantEarnings']*0x64)/0x64,'gatewayEarnings':Math[_0x267ca8(0x19a)](_0x3c954e[_0x267ca8(0x15c)]*0x64)/0x64}))[_0x267ca8(0x1e3)]((_0x25b6cc,_0xc7c66d)=>_0x25b6cc[_0x267ca8(0x1f6)][_0x267ca8(0x1ae)](_0xc7c66d[_0x267ca8(0x1f6)])),'periodInfo':{'from':_0x505485,'to':_0x4a03c2,'periodType':_0x51a73d['period']||_0x267ca8(0x1ab),'daysCount':_0x3de2e1}};return console[_0x267ca8(0x10f)](_0x267ca8(0x115)),console['log'](_0x267ca8(0x144)+_0x50d39b[_0x267ca8(0x1b7)]+_0x267ca8(0x146)),console[_0x267ca8(0x10f)](_0x267ca8(0x195)+_0x50d39b[_0x267ca8(0x164)]+_0x267ca8(0x146)),console[_0x267ca8(0x10f)](_0x267ca8(0x217)+_0x50d39b[_0x267ca8(0x15c)]+_0x267ca8(0x146)),console[_0x267ca8(0x10f)](_0x267ca8(0x102)+_0x50d39b[_0x267ca8(0x129)]+'\x20USDT'),console[_0x267ca8(0x10f)]('\x20\x20\x20⏳\x20Pending\x20payout:\x20'+_0x50d39b['pendingPayout']+_0x267ca8(0x146)),console['log'](_0x267ca8(0x1fa)+_0x50d39b[_0x267ca8(0x227)]),_0x50d39b;}async[a36_0x52a1b6(0x1d5)](){const _0x2a1405=a36_0x52a1b6;console['log']('📋\x20Getting\x20merchants\x20selection\x20list...');const _0x2915b1=await database_1[_0x2a1405(0x1c5)][_0x2a1405(0x134)]['findMany']({'where':{'status':'ACTIVE'},'select':{'id':!![],'username':!![],'name':!![]},'orderBy':{'name':_0x2a1405(0x1f9)}});return console['log'](_0x2a1405(0x193)+_0x2915b1[_0x2a1405(0x228)]+_0x2a1405(0x12a)),_0x2915b1[_0x2a1405(0x1f1)](_0x144d25=>({'id':_0x144d25['id'],'username':_0x144d25[_0x2a1405(0x211)],'name':_0x144d25['name']}));}[a36_0x52a1b6(0x160)](_0x526304){const _0x56dc55=a36_0x52a1b6,_0x41d98b={'test_gateway':'Test\x20Gateway','plisio':_0x56dc55(0xf2),'rapyd':_0x56dc55(0x14d),'noda':_0x56dc55(0x1f8),'cointopay':_0x56dc55(0x215),'cointopay2':_0x56dc55(0x221),'klyme_eu':_0x56dc55(0x136),'klyme_gb':_0x56dc55(0xf0),'klyme_de':'KLYME\x20DE','mastercard':'MasterCard'};return _0x41d98b[_0x526304]||_0x526304;}[a36_0x52a1b6(0x1e7)](_0x285780){const _0x585fff=a36_0x52a1b6,_0x83b139={'Test\x20Gateway':_0x585fff(0x121),'Plisio':'plisio','Rapyd':_0x585fff(0x216),'Noda':'noda','CoinToPay':'cointopay','CoinToPay2':_0x585fff(0x182),'KLYME\x20EU':_0x585fff(0x103),'KLYME\x20GB':_0x585fff(0x100),'KLYME\x20DE':'klyme_de','MasterCard':_0x585fff(0x17f)};return _0x83b139[_0x285780]||_0x285780[_0x585fff(0x1c3)]();}async[a36_0x52a1b6(0x157)](_0x7a3db4){const _0x18e870=a36_0x52a1b6,{page:_0x1cfa09,limit:_0x4cb75a,minAmount:_0x103696,search:_0x4878a8}=_0x7a3db4,_0x5cb45a=(_0x1cfa09-0x1)*_0x4cb75a;console[_0x18e870(0x10f)](_0x18e870(0x1b2),_0x7a3db4);const _0x2020df={'balance':{'gt':0x0},'status':_0x18e870(0x17b)};_0x103696&&(_0x2020df['balance']['gte']=_0x103696);_0x4878a8&&(_0x2020df['OR']=[{'name':{'contains':_0x4878a8,'mode':_0x18e870(0x1d1)}},{'username':{'contains':_0x4878a8,'mode':_0x18e870(0x1d1)}}]);const [_0x204a46,_0x12a152]=await Promise[_0x18e870(0x161)]([database_1[_0x18e870(0x1c5)][_0x18e870(0x134)][_0x18e870(0x1ca)]({'where':_0x2020df,'skip':_0x5cb45a,'take':_0x4cb75a,'orderBy':{'balance':'desc'},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'balance':!![],'totalPaidOut':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'gatewaySettings':!![],'createdAt':!![]}}),database_1[_0x18e870(0x1c5)][_0x18e870(0x134)][_0x18e870(0x19f)]({'where':_0x2020df})]);console[_0x18e870(0x10f)]('💰\x20Found\x20'+_0x204a46[_0x18e870(0x228)]+'\x20merchants\x20with\x20positive\x20balance');const _0xb507cd=await Promise['all'](_0x204a46[_0x18e870(0x1f1)](async _0xa8e250=>{const _0x3893e4=_0x18e870,[_0x4f9f6d,_0xabfd82,_0x3222ce]=await Promise[_0x3893e4(0x161)]([database_1[_0x3893e4(0x1c5)]['payment'][_0x3893e4(0x19f)]({'where':{'shopId':_0xa8e250['id'],'status':'PAID','gateway':{'not':'test_gateway'}}}),database_1[_0x3893e4(0x1c5)][_0x3893e4(0x179)][_0x3893e4(0xfd)]({'where':{'shopId':_0xa8e250['id'],'status':_0x3893e4(0x178),'gateway':{'not':_0x3893e4(0x121)}},'orderBy':{'paidAt':_0x3893e4(0x1f9)},'select':{'paidAt':!![]}}),database_1['default']['payment']['groupBy']({'by':[_0x3893e4(0x150)],'where':{'shopId':_0xa8e250['id'],'status':_0x3893e4(0x178),'gateway':{'not':_0x3893e4(0x121)}},'_count':{'id':!![]},'_sum':{'amountUSDT':!![]}})]),_0x54d371=new Date(),_0x637140=new Date(_0x54d371[_0x3893e4(0x12e)](),_0x54d371[_0x3893e4(0xf3)](),0x1),_0x57d10c=new Date(_0x54d371['getFullYear'](),_0x54d371[_0x3893e4(0xf3)]()+0x1,0x0,0x17,0x3b,0x3b,0x3e7),[_0x25a169,_0x26c6a2]=await Promise[_0x3893e4(0x161)]([database_1[_0x3893e4(0x1c5)][_0x3893e4(0x18d)][_0x3893e4(0x16d)]({'_sum':{'amount':!![]},'where':{'shopId':_0xa8e250['id'],'status':'COMPLETED'}}),database_1[_0x3893e4(0x1c5)]['payout'][_0x3893e4(0x16d)]({'_sum':{'amount':!![]},'where':{'shopId':_0xa8e250['id'],'status':_0x3893e4(0x1ee),'createdAt':{'gte':_0x637140,'lte':_0x57d10c}}})]),_0x37414f=_0x25a169[_0x3893e4(0x225)][_0x3893e4(0x196)]||0x0,_0x134449=_0x26c6a2[_0x3893e4(0x225)][_0x3893e4(0x196)]||0x0,_0x46c3cb=await Promise[_0x3893e4(0x161)](_0x3222ce[_0x3893e4(0x1f1)](async _0x39ecfe=>{const _0x2589f9=_0x3893e4;let _0x42660b=0xa;if(_0xa8e250['gatewaySettings'])try{const _0x4f5a3c=JSON[_0x2589f9(0x167)](_0xa8e250[_0x2589f9(0xfc)]);for(const [_0x55de93,_0x54f54f]of Object[_0x2589f9(0x18f)](_0x4f5a3c)){if(_0x55de93[_0x2589f9(0x1c3)]()===_0x39ecfe[_0x2589f9(0x150)][_0x2589f9(0x1c3)]()){_0x42660b=_0x54f54f[_0x2589f9(0xed)]||0xa,console[_0x2589f9(0x10f)](_0x2589f9(0x1c0)+_0x39ecfe[_0x2589f9(0x150)]+_0x2589f9(0x1d6)+_0xa8e250['id']+_0x2589f9(0xf4)+_0x42660b+'%');break;}}}catch(_0x39d0ba){console[_0x2589f9(0x1ac)](_0x2589f9(0x11d)+_0xa8e250['id']+':',_0x39d0ba);}const _0x423733=_0x39ecfe[_0x2589f9(0x225)]?.[_0x2589f9(0x128)]||0x0,_0x1bdfdd=_0x423733*(0x1-_0x42660b/0x64);return{'gateway':_0x39ecfe['gateway'],'count':_0x39ecfe[_0x2589f9(0x1f3)]?.['id']||0x0,'amountUSDT':Math['round'](_0x423733*0x64)/0x64,'amountAfterCommissionUSDT':Math[_0x2589f9(0x19a)](_0x1bdfdd*0x64)/0x64,'commission':_0x42660b};})),_0x3111d6=_0x46c3cb[_0x3893e4(0x131)]((_0x143428,_0x1413a1)=>_0x143428+_0x1413a1[_0x3893e4(0x128)],0x0),_0x3a5baa=_0xa8e250[_0x3893e4(0x165)];return console['log']('💰\x20[PAYOUT]\x20Merchant\x20'+_0xa8e250['username']+':'),console['log'](_0x3893e4(0xec)+_0x3111d6[_0x3893e4(0x192)](0x2)+_0x3893e4(0x107)),console['log'](_0x3893e4(0xfb)+_0x46c3cb['reduce']((_0x46d915,_0x3f0dc7)=>_0x46d915+_0x3f0dc7[_0x3893e4(0x122)],0x0)[_0x3893e4(0x192)](0x2)+'\x20USDT\x20(theoretical\x20net)'),console[_0x3893e4(0x10f)]('\x20\x20\x20✅\x20Actual\x20available\x20balance:\x20'+_0x3a5baa[_0x3893e4(0x192)](0x2)+'\x20USDT\x20(after\x20payouts)'),{'id':_0xa8e250['id'],'fullName':_0xa8e250[_0x3893e4(0x120)],'username':_0xa8e250[_0x3893e4(0x211)],'telegramId':_0xa8e250[_0x3893e4(0x198)],'merchantUrl':_0xa8e250['shopUrl'],'wallets':{'usdtPolygonWallet':_0xa8e250[_0x3893e4(0x154)],'usdtTrcWallet':_0xa8e250[_0x3893e4(0x1d2)],'usdtErcWallet':_0xa8e250[_0x3893e4(0x1fd)],'usdcPolygonWallet':_0xa8e250[_0x3893e4(0x200)]},'totalAmountUSDT':Math[_0x3893e4(0x19a)](_0x3111d6*0x64)/0x64,'totalAmountAfterCommissionUSDT':Math[_0x3893e4(0x19a)](_0x3a5baa*0x64)/0x64,'totalPayout':Math[_0x3893e4(0x19a)](_0x37414f*0x64)/0x64,'thisMonth':Math['round'](_0x134449*0x64)/0x64,'paymentsCount':_0x4f9f6d,'oldestPaymentDate':_0xabfd82?.[_0x3893e4(0x1bc)]||_0xa8e250[_0x3893e4(0x22e)],'gatewayBreakdown':_0x46c3cb};})),_0x7a2524=_0xb507cd[_0x18e870(0x131)]((_0x465b18,_0xb1ee61)=>_0x465b18+_0xb1ee61[_0x18e870(0x101)],0x0),_0x74ddcf=_0xb507cd[_0x18e870(0x131)]((_0x1f631d,_0x485a04)=>_0x1f631d+_0x485a04['totalAmountAfterCommissionUSDT'],0x0),_0x5189d7=_0xb507cd[_0x18e870(0x131)]((_0x41352b,_0x46543a)=>_0x41352b+_0x46543a[_0x18e870(0x17e)],0x0),_0x3c9281=_0xb507cd[_0x18e870(0x131)]((_0x120819,_0x8db96f)=>_0x120819+_0x8db96f[_0x18e870(0x156)],0x0);return console[_0x18e870(0x10f)](_0x18e870(0x1aa)+_0x12a152+_0x18e870(0x114)),console[_0x18e870(0x10f)](_0x18e870(0x21e)+Math[_0x18e870(0x19a)](_0x7a2524*0x64)/0x64+'\x20USDT\x20(gross\x20revenue)'),console[_0x18e870(0x10f)](_0x18e870(0x22d)+Math[_0x18e870(0x19a)](_0x74ddcf*0x64)/0x64+_0x18e870(0x145)),console[_0x18e870(0x10f)](_0x18e870(0x208)+Math[_0x18e870(0x19a)](_0x5189d7*0x64)/0x64+_0x18e870(0x146)),console[_0x18e870(0x10f)](_0x18e870(0xee)+Math[_0x18e870(0x19a)](_0x3c9281*0x64)/0x64+_0x18e870(0x146)),{'merchants':_0xb507cd,'pagination':{'page':_0x1cfa09,'limit':_0x4cb75a,'total':_0x12a152,'totalPages':Math['ceil'](_0x12a152/_0x4cb75a)},'summary':{'totalMerchants':_0x12a152,'totalAmountUSDT':Math[_0x18e870(0x19a)](_0x7a2524*0x64)/0x64,'totalAmountAfterCommissionUSDT':Math['round'](_0x74ddcf*0x64)/0x64,'totalPayout':Math[_0x18e870(0x19a)](_0x5189d7*0x64)/0x64,'thisMonth':Math[_0x18e870(0x19a)](_0x3c9281*0x64)/0x64}};}async[a36_0x52a1b6(0x1e4)](_0x251ff7){const _0x5474f5=a36_0x52a1b6,{shopId:_0xd7a71f,amount:_0x38bac8,network:_0x5ed625,wallet:_0x5a3843,notes:_0x3dad03,txid:_0x3c65c7,periodFrom:_0x5cdaf1,periodTo:_0x8ced84}=_0x251ff7,_0x26942e=await database_1[_0x5474f5(0x1c5)]['$transaction'](async _0x2f9251=>{const _0x29b921=_0x5474f5,_0x5602ed=await _0x2f9251['shop']['findUnique']({'where':{'id':_0xd7a71f},'select':{'id':!![],'name':!![],'username':!![],'balance':!![],'totalPaidOut':!![]}});if(!_0x5602ed)throw new Error(_0x29b921(0x108));console[_0x29b921(0x10f)](_0x29b921(0x11b)+_0x5602ed['username']+':'),console[_0x29b921(0x10f)](_0x29b921(0x220)+_0x5602ed[_0x29b921(0x165)][_0x29b921(0x192)](0x6)+'\x20USDT'),console['log'](_0x29b921(0x212)+_0x38bac8[_0x29b921(0x192)](0x6)+_0x29b921(0x146)),console[_0x29b921(0x10f)](_0x29b921(0x1a3)+_0x5602ed[_0x29b921(0x129)]['toFixed'](0x6)+_0x29b921(0x146));if(_0x3c65c7)console[_0x29b921(0x10f)](_0x29b921(0x116)+_0x3c65c7);if(_0x5602ed[_0x29b921(0x165)]<_0x38bac8)throw new Error(_0x29b921(0x119)+_0x5602ed[_0x29b921(0x165)][_0x29b921(0x192)](0x6)+'\x20USDT,\x20Requested:\x20'+_0x38bac8[_0x29b921(0x192)](0x6)+'\x20USDT');let _0x5c0e01=_0x5a3843;if(!_0x5c0e01){const _0x14726e=await _0x2f9251['shop']['findUnique']({'where':{'id':_0xd7a71f},'select':{'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![]}});if(_0x14726e)switch(_0x5ed625){case _0x29b921(0x190):_0x5c0e01=_0x14726e[_0x29b921(0x154)]||undefined;break;case _0x29b921(0x218):_0x5c0e01=_0x14726e[_0x29b921(0x1d2)]||undefined;break;case _0x29b921(0x148):_0x5c0e01=_0x14726e[_0x29b921(0x1fd)]||undefined;break;case'polygon_usdc':_0x5c0e01=_0x14726e[_0x29b921(0x200)]||undefined;break;}}console['log'](_0x29b921(0x20d)+_0x5ed625+':\x20'+(_0x5c0e01||_0x29b921(0x11f)));const _0x589284=await _0x2f9251[_0x29b921(0x18d)]['create']({'data':{'shopId':_0xd7a71f,'amount':_0x38bac8,'network':_0x5ed625,'status':_0x29b921(0x1ee),'txid':_0x3c65c7,'notes':_0x3dad03,'periodFrom':_0x5cdaf1?new Date(_0x5cdaf1):null,'periodTo':_0x8ced84?new Date(_0x8ced84):null,'createdAt':new Date(),'paidAt':new Date()}}),_0x5a02f1=_0x5602ed[_0x29b921(0x165)]-_0x38bac8,_0x3ba9a3=_0x5602ed[_0x29b921(0x129)]+_0x38bac8;return await _0x2f9251[_0x29b921(0x134)][_0x29b921(0x1b4)]({'where':{'id':_0xd7a71f},'data':{'balance':_0x5a02f1,'totalPaidOut':_0x3ba9a3}}),console['log'](_0x29b921(0x11a)+_0x5602ed[_0x29b921(0x211)]+_0x29b921(0x1b1)),console[_0x29b921(0x10f)](_0x29b921(0x1bd)+_0x5602ed[_0x29b921(0x165)][_0x29b921(0x192)](0x6)+_0x29b921(0x1b8)+_0x5a02f1[_0x29b921(0x192)](0x6)+_0x29b921(0xf9)+_0x38bac8[_0x29b921(0x192)](0x6)+')'),console[_0x29b921(0x10f)]('\x20\x20\x20Total\x20paid\x20out:\x20'+_0x5602ed[_0x29b921(0x129)]['toFixed'](0x6)+'\x20->\x20'+_0x3ba9a3['toFixed'](0x6)+_0x29b921(0x202)+_0x38bac8[_0x29b921(0x192)](0x6)+')'),{'payout':_0x589284,'shop':_0x5602ed};});return console[_0x5474f5(0x10f)]('✅\x20Payout\x20created:\x20'+_0x26942e[_0x5474f5(0x18d)]['id']+'\x20for\x20shop\x20'+_0x26942e[_0x5474f5(0x134)][_0x5474f5(0x211)]+'\x20('+_0x38bac8+_0x5474f5(0x105)),{'id':_0x26942e[_0x5474f5(0x18d)]['id'],'shopId':_0x26942e[_0x5474f5(0x18d)][_0x5474f5(0x1ad)],'shopName':_0x26942e[_0x5474f5(0x134)][_0x5474f5(0x120)],'shopUsername':_0x26942e['shop'][_0x5474f5(0x211)],'amount':_0x26942e[_0x5474f5(0x18d)]['amount'],'network':_0x26942e[_0x5474f5(0x18d)][_0x5474f5(0x177)],'status':_0x26942e[_0x5474f5(0x18d)][_0x5474f5(0x1a9)],'txid':_0x26942e[_0x5474f5(0x18d)]['txid'],'notes':_0x26942e['payout']['notes'],'periodFrom':_0x26942e[_0x5474f5(0x18d)][_0x5474f5(0x22a)],'periodTo':_0x26942e[_0x5474f5(0x18d)][_0x5474f5(0x197)],'createdAt':_0x26942e[_0x5474f5(0x18d)]['createdAt'],'paidAt':_0x26942e['payout'][_0x5474f5(0x1bc)]};}async[a36_0x52a1b6(0x13b)](_0x4b5c82){const _0x237208=a36_0x52a1b6,{page:_0x43dc9c,limit:_0x3ded2f,shopId:_0x11b7a9,network:_0x3ab79c,dateFrom:_0x25747f,dateTo:_0x50c24e,search:_0x3911b6}=_0x4b5c82,_0x1ecb78=(_0x43dc9c-0x1)*_0x3ded2f,_0x158af7={};_0x11b7a9&&(_0x158af7[_0x237208(0x1ad)]=_0x11b7a9);_0x3ab79c&&(_0x158af7['network']=_0x3ab79c);(_0x25747f||_0x50c24e)&&(_0x158af7['createdAt']={},_0x25747f&&(_0x158af7['createdAt'][_0x237208(0x1e5)]=new Date(_0x25747f)),_0x50c24e&&(_0x158af7[_0x237208(0x22e)]['lte']=new Date(_0x50c24e)));_0x3911b6&&(_0x158af7['OR']=[{'shop':{'name':{'contains':_0x3911b6,'mode':_0x237208(0x1d1)}}},{'shop':{'username':{'contains':_0x3911b6,'mode':_0x237208(0x1d1)}}},{'notes':{'contains':_0x3911b6,'mode':_0x237208(0x1d1)}}]);const [_0x4bbb2d,_0x508272]=await Promise[_0x237208(0x161)]([database_1[_0x237208(0x1c5)][_0x237208(0x18d)][_0x237208(0x1ca)]({'where':_0x158af7,'skip':_0x1ecb78,'take':_0x3ded2f,'orderBy':{'createdAt':'desc'},'select':{'id':!![],'shopId':!![],'amount':!![],'network':!![],'status':!![],'txid':!![],'notes':!![],'periodFrom':!![],'periodTo':!![],'createdAt':!![],'paidAt':!![],'shop':{'select':{'name':!![],'username':!![]}}}}),database_1[_0x237208(0x1c5)]['payout'][_0x237208(0x19f)]({'where':_0x158af7})]);return{'payouts':_0x4bbb2d['map'](_0x490f55=>({'id':_0x490f55['id'],'shopId':_0x490f55[_0x237208(0x1ad)],'shopName':_0x490f55[_0x237208(0x134)][_0x237208(0x120)],'shopUsername':_0x490f55[_0x237208(0x134)][_0x237208(0x211)],'amount':_0x490f55['amount'],'network':_0x490f55[_0x237208(0x177)],'status':_0x490f55['status'],'txid':_0x490f55[_0x237208(0x152)],'notes':_0x490f55[_0x237208(0x12c)],'periodFrom':_0x490f55[_0x237208(0x22a)],'periodTo':_0x490f55[_0x237208(0x197)],'createdAt':_0x490f55['createdAt'],'paidAt':_0x490f55['paidAt']})),'pagination':{'page':_0x43dc9c,'limit':_0x3ded2f,'total':_0x508272,'totalPages':Math[_0x237208(0x14a)](_0x508272/_0x3ded2f)}};}async[a36_0x52a1b6(0x1a7)](_0x3164c5){const _0x33c651=a36_0x52a1b6,_0x3153ce=await database_1[_0x33c651(0x1c5)][_0x33c651(0x18d)][_0x33c651(0xf5)]({'where':{'id':_0x3164c5},'include':{'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x3153ce)return null;return{'id':_0x3153ce['id'],'shopId':_0x3153ce[_0x33c651(0x1ad)],'shopName':_0x3153ce[_0x33c651(0x134)][_0x33c651(0x120)],'shopUsername':_0x3153ce[_0x33c651(0x134)]['username'],'amount':_0x3153ce[_0x33c651(0x196)],'network':_0x3153ce[_0x33c651(0x177)],'status':_0x3153ce['status'],'txid':_0x3153ce[_0x33c651(0x152)],'notes':_0x3153ce[_0x33c651(0x12c)],'periodFrom':_0x3153ce[_0x33c651(0x22a)],'periodTo':_0x3153ce[_0x33c651(0x197)],'createdAt':_0x3153ce[_0x33c651(0x22e)],'paidAt':_0x3153ce[_0x33c651(0x1bc)]};}async[a36_0x52a1b6(0x21d)](_0x1037f1){const _0x1bbb07=a36_0x52a1b6;await database_1[_0x1bbb07(0x1c5)][_0x1bbb07(0x18d)][_0x1bbb07(0x1ba)]({'where':{'id':_0x1037f1}});}async[a36_0x52a1b6(0x1f4)](_0x2c9670){const _0xe33810=a36_0x52a1b6,{page:_0x46b3d6,limit:_0x3a45ac,status:_0x420988,gateway:_0x364b48,shopId:_0x3d4d78,dateFrom:_0x52b79f,dateTo:_0x433fa6,search:_0x42c97a,currency:_0x5341d9,sortBy:_0xd6e1ee,sortOrder:_0x353213}=_0x2c9670,_0x5f4e7c=(_0x46b3d6-0x1)*_0x3a45ac;console[_0xe33810(0x10f)](_0xe33810(0x172),_0x2c9670);const _0x2854c0=await database_1[_0xe33810(0x1c5)]['payment']['groupBy']({'by':['gateway'],'_count':{'gateway':!![]}});console[_0xe33810(0x10f)]('📊\x20Available\x20gateways\x20in\x20database:',_0x2854c0['map'](_0x54d571=>_0x54d571[_0xe33810(0x150)]+'\x20('+_0x54d571[_0xe33810(0x1f3)][_0xe33810(0x150)]+_0xe33810(0x213)));if(_0x364b48){const _0x2aebf9=_0x2854c0[_0xe33810(0x20e)](_0x5098f2=>_0x5098f2['gateway'][_0xe33810(0x1c3)]()===_0x364b48[_0xe33810(0x1c3)]());!_0x2aebf9&&_0x364b48['toLowerCase']()!==_0xe33810(0x121)&&console['log'](_0xe33810(0x1d7)+_0x364b48+_0xe33810(0x135)+_0x2854c0[_0xe33810(0x1f1)](_0x10d12d=>_0x10d12d[_0xe33810(0x150)])[_0xe33810(0x181)](',\x20'));}const _0x4d9bde={};_0x420988&&(_0x4d9bde['status']=_0x420988['toUpperCase']());if(!_0x364b48)_0x4d9bde[_0xe33810(0x150)]={'not':_0xe33810(0x121)};else{if(_0x364b48&&(_0x364b48[_0xe33810(0x1c3)]()==='test_gateway'||_0x364b48===_0xe33810(0x1b5)))_0x4d9bde[_0xe33810(0x150)]=_0xe33810(0x121);else{let _0x58a230=_0x364b48;const _0x5c0600=(0x0,gateway_1[_0xe33810(0x20f)])(_0x364b48);if(_0x5c0600)_0x58a230=_0x5c0600,console['log'](_0xe33810(0x10b)+_0x364b48+_0xe33810(0x1b0)+_0x58a230+'\x27');else{const _0x3e310d=(0x0,gateway_1['getGatewayIdByName'])(_0x364b48);if(_0x3e310d){const _0x159c41=(0x0,gateway_1['getGatewayNameById'])(_0x3e310d);_0x159c41&&(_0x58a230=_0x159c41,console[_0xe33810(0x10f)](_0xe33810(0x173)+_0x364b48+_0xe33810(0x140)+_0x3e310d+_0xe33810(0x141)+_0x58a230+'\x27'));}else console[_0xe33810(0x10f)]('🔍\x20Using\x20gateway\x20\x27'+_0x364b48+_0xe33810(0x219));}const _0xfdb1e6=await database_1[_0xe33810(0x1c5)][_0xe33810(0x179)][_0xe33810(0x19f)]({'where':{'gateway':_0x58a230['toLowerCase']()},'take':0x1});_0xfdb1e6===0x0?(console['log'](_0xe33810(0x1a1)+_0x58a230+_0xe33810(0x222)+_0x364b48+_0xe33810(0x204)),_0x4d9bde[_0xe33810(0x150)]=_0xe33810(0x104)):(_0x4d9bde[_0xe33810(0x150)]=_0x58a230[_0xe33810(0x1c3)](),console['log'](_0xe33810(0x21f)+_0x58a230+'\x27\x20(from\x20\x27'+_0x364b48+'\x27)'));}}console[_0xe33810(0x10f)](_0xe33810(0x22c),_0x4d9bde[_0xe33810(0x150)]);_0x3d4d78&&(_0x4d9bde[_0xe33810(0x1ad)]=_0x3d4d78);_0x5341d9&&(_0x4d9bde[_0xe33810(0x226)]=_0x5341d9['toUpperCase'](),console[_0xe33810(0x10f)](_0xe33810(0x1a8)+_0x5341d9['toUpperCase']()));(_0x52b79f||_0x433fa6)&&(_0x4d9bde[_0xe33810(0x22e)]={},_0x52b79f&&(_0x4d9bde[_0xe33810(0x22e)][_0xe33810(0x1e5)]=new Date(_0x52b79f)),_0x433fa6&&(_0x4d9bde[_0xe33810(0x22e)][_0xe33810(0x15f)]=new Date(_0x433fa6)));_0x42c97a&&(_0x4d9bde['OR']=[{'id':{'contains':_0x42c97a,'mode':_0xe33810(0x1d1)}},{'orderId':{'contains':_0x42c97a,'mode':_0xe33810(0x1d1)}},{'gatewayOrderId':{'contains':_0x42c97a,'mode':'insensitive'}},{'customerEmail':{'contains':_0x42c97a,'mode':_0xe33810(0x1d1)}},{'shop':{'name':{'contains':_0x42c97a,'mode':_0xe33810(0x1d1)}}},{'shop':{'username':{'contains':_0x42c97a,'mode':_0xe33810(0x1d1)}}}]);console['log']('📊\x20Final\x20WHERE\x20conditions:',JSON[_0xe33810(0xf8)](_0x4d9bde,null,0x2));let _0x5ad028={'createdAt':'desc'};if(_0xd6e1ee){const _0x577c3c=[_0xe33810(0x196),_0xe33810(0x22e),_0xe33810(0x18b),'status',_0xe33810(0x150),_0xe33810(0x226)],_0x2a99f3=['asc',_0xe33810(0x1fb)];if(_0x577c3c[_0xe33810(0x1a4)](_0xd6e1ee)){const _0x3dd465=_0x2a99f3[_0xe33810(0x1a4)](_0x353213)?_0x353213:'desc';_0x5ad028={[_0xd6e1ee]:_0x3dd465},console[_0xe33810(0x10f)](_0xe33810(0x14f)+_0xd6e1ee+_0xe33810(0xef)+_0x3dd465+_0xe33810(0x112));}}const [_0x4ee66e,_0x362645]=await Promise[_0xe33810(0x161)]([database_1[_0xe33810(0x1c5)][_0xe33810(0x179)][_0xe33810(0x1ca)]({'where':_0x4d9bde,'skip':_0x5f4e7c,'take':_0x3a45ac,'orderBy':_0x5ad028,'select':{'id':!![],'shopId':!![],'amount':!![],'amountAfterGatewayCommissionUSDT':!![],'currency':!![],'sourceCurrency':!![],'status':!![],'gateway':!![],'orderId':!![],'gatewayOrderId':!![],'gatewayPaymentId':!![],'customerEmail':!![],'customerName':!![],'customerCountry':!![],'customerIp':!![],'customerUa':!![],'externalPaymentUrl':!![],'successUrl':!![],'failUrl':!![],'pendingUrl':!![],'whiteUrl':!![],'expiresAt':!![],'invoiceTotalSum':!![],'qrCode':!![],'qrUrl':!![],'country':!![],'language':!![],'amountIsEditable':!![],'maxPayments':!![],'rapydCustomer':!![],'cardLast4':!![],'paymentMethod':!![],'bankId':!![],'remitterIban':!![],'remitterName':!![],'failureMessage':!![],'usage':!![],'createdAt':!![],'updatedAt':!![],'shop':{'select':{'name':!![],'username':!![]}}}}),database_1[_0xe33810(0x1c5)][_0xe33810(0x179)][_0xe33810(0x19f)]({'where':_0x4d9bde})]);return{'payments':_0x4ee66e,'pagination':{'page':_0x46b3d6,'limit':_0x3a45ac,'total':_0x362645,'totalPages':Math[_0xe33810(0x14a)](_0x362645/_0x3a45ac)}};}async[a36_0x52a1b6(0x1e1)](_0xf4d76e){const _0x1a9ac6=a36_0x52a1b6,_0x558f1e=await database_1[_0x1a9ac6(0x1c5)]['payment'][_0x1a9ac6(0xf5)]({'where':{'id':_0xf4d76e},'select':{'id':!![],'shopId':!![],'amount':!![],'amountAfterGatewayCommissionUSDT':!![],'currency':!![],'sourceCurrency':!![],'status':!![],'gateway':!![],'orderId':!![],'gatewayOrderId':!![],'gatewayPaymentId':!![],'customerEmail':!![],'customerName':!![],'customerCountry':!![],'customerIp':!![],'customerUa':!![],'externalPaymentUrl':!![],'successUrl':!![],'failUrl':!![],'pendingUrl':!![],'whiteUrl':!![],'expiresAt':!![],'invoiceTotalSum':!![],'qrCode':!![],'qrUrl':!![],'country':!![],'language':!![],'amountIsEditable':!![],'maxPayments':!![],'rapydCustomer':!![],'cardLast4':!![],'paymentMethod':!![],'bankId':!![],'remitterIban':!![],'remitterName':!![],'failureMessage':!![],'usage':!![],'createdAt':!![],'updatedAt':!![],'shop':{'select':{'name':!![],'username':!![]}}}});if(!_0x558f1e)return null;return{'id':_0x558f1e['id'],'shopId':_0x558f1e[_0x1a9ac6(0x1ad)],'gateway':_0x558f1e['gateway'],'amount':_0x558f1e[_0x1a9ac6(0x196)],'currency':_0x558f1e[_0x1a9ac6(0x226)],'status':_0x558f1e['status'],'orderId':_0x558f1e[_0x1a9ac6(0x1cc)],'gatewayOrderId':_0x558f1e[_0x1a9ac6(0x19c)],'customerEmail':_0x558f1e[_0x1a9ac6(0x137)],'customerName':_0x558f1e[_0x1a9ac6(0x1dd)],'customerCountry':_0x558f1e['customerCountry'],'customerIp':_0x558f1e['customerIp'],'customerUa':_0x558f1e[_0x1a9ac6(0x123)],'failureMessage':_0x558f1e[_0x1a9ac6(0x19d)],'externalPaymentUrl':_0x558f1e[_0x1a9ac6(0x1e2)],'successUrl':_0x558f1e[_0x1a9ac6(0x12d)],'failUrl':_0x558f1e[_0x1a9ac6(0x1d4)],'pendingUrl':_0x558f1e[_0x1a9ac6(0x19b)],'whiteUrl':_0x558f1e['whiteUrl'],'createdAt':_0x558f1e[_0x1a9ac6(0x22e)],'updatedAt':_0x558f1e['updatedAt'],'shop':_0x558f1e[_0x1a9ac6(0x134)]};}async[a36_0x52a1b6(0x162)](_0x25583d,_0xfc6f78,_0x9749e3,_0x5ce4b0){const _0x2878a1=a36_0x52a1b6,_0x459406=await database_1['default'][_0x2878a1(0x194)](async _0x576461=>{const _0x1ad2a1=_0x2878a1,_0x2e07bc=await _0x576461['payment'][_0x1ad2a1(0xf5)]({'where':{'id':_0x25583d},'include':{'shop':{'select':{'id':!![],'name':!![],'username':!![],'balance':!![]}}}});if(!_0x2e07bc)throw new Error(_0x1ad2a1(0x1d0));const _0x13a3e5=_0x2e07bc[_0x1ad2a1(0x1a9)],_0x5a45b2=_0xfc6f78['toUpperCase']();console['log']('🔄\x20Admin\x20updating\x20payment\x20'+_0x25583d+_0x1ad2a1(0x118)+_0x13a3e5+_0x1ad2a1(0x1b8)+_0x5a45b2),console[_0x1ad2a1(0x10f)](_0x1ad2a1(0x11c)+_0x2e07bc['shop'][_0x1ad2a1(0x165)]+'\x20USDT');const _0x31e131={'status':_0x5a45b2,'updatedAt':new Date(),'statusChangedBy':_0x1ad2a1(0x18e),'statusChangedAt':new Date()};_0x9749e3&&(_0x31e131['adminNotes']=_0x9749e3);_0x5a45b2===_0x1ad2a1(0x13d)&&_0x5ce4b0&&(_0x31e131[_0x1ad2a1(0x1d3)]=_0x5ce4b0);let _0x329561=0x0,_0x54e80d=_0x2e07bc[_0x1ad2a1(0x134)][_0x1ad2a1(0x165)];if(_0x5a45b2==='PAID'&&_0x13a3e5!==_0x1ad2a1(0x178)){_0x31e131['paidAt']=new Date();const _0xe31411=await currencyService_1[_0x1ad2a1(0x17c)][_0x1ad2a1(0x214)](_0x2e07bc[_0x1ad2a1(0x196)],_0x2e07bc['currency']);_0x31e131[_0x1ad2a1(0x128)]=_0xe31411;let _0x2932e7=0xa;const _0x19402d=await _0x576461['shop'][_0x1ad2a1(0xf5)]({'where':{'id':_0x2e07bc[_0x1ad2a1(0x1ad)]},'select':{'gatewaySettings':!![]}});if(_0x19402d?.['gatewaySettings'])try{const _0x3ecf9a=JSON['parse'](_0x19402d[_0x1ad2a1(0xfc)]);for(const [_0x13748a,_0x3b6097]of Object[_0x1ad2a1(0x18f)](_0x3ecf9a)){if(_0x13748a[_0x1ad2a1(0x1c3)]()===_0x2e07bc[_0x1ad2a1(0x150)]['toLowerCase']()){_0x2932e7=_0x3b6097[_0x1ad2a1(0xed)]||0xa;break;}}}catch(_0xf017a9){console[_0x1ad2a1(0x1ac)]('Error\x20parsing\x20gateway\x20settings\x20for\x20payment\x20'+_0x25583d+':',_0xf017a9);}let _0x30bf2e;_0x2e07bc[_0x1ad2a1(0xeb)]!==null&&_0x2e07bc[_0x1ad2a1(0xeb)]!==undefined?(_0x30bf2e=_0x2e07bc['amountAfterGatewayCommissionUSDT'],console[_0x1ad2a1(0x10f)](_0x1ad2a1(0x147)+_0x30bf2e[_0x1ad2a1(0x192)](0x6)+_0x1ad2a1(0x21b)+_0x25583d)):(_0x30bf2e=_0xe31411*(0x1-_0x2932e7/0x64),console[_0x1ad2a1(0x10f)](_0x1ad2a1(0x142)+_0x25583d+':\x20'+_0x2932e7+_0x1ad2a1(0x1c8)+_0xe31411[_0x1ad2a1(0x192)](0x6)+_0x1ad2a1(0x146)),_0x31e131['amountAfterGatewayCommissionUSDT']=_0x30bf2e),_0x329561=_0x30bf2e,_0x54e80d+=_0x30bf2e,console['log'](_0x1ad2a1(0x1c7)+_0x25583d+_0x1ad2a1(0x139)),console['log'](_0x1ad2a1(0x171)+_0xe31411[_0x1ad2a1(0x192)](0x6)+_0x1ad2a1(0x146)),console['log']('\x20\x20\x20Gateway:\x20'+_0x2e07bc[_0x1ad2a1(0x150)]+_0x1ad2a1(0x18a)+_0x2932e7+'%'),console[_0x1ad2a1(0x10f)](_0x1ad2a1(0xff)+_0x30bf2e['toFixed'](0x6)+'\x20USDT\x20(after\x20'+_0x2932e7+_0x1ad2a1(0x124)),console['log'](_0x1ad2a1(0x1f7)+_0x30bf2e[_0x1ad2a1(0x192)](0x6)+_0x1ad2a1(0x146));}else{if(_0x13a3e5===_0x1ad2a1(0x178)&&_0x5a45b2!=='PAID'){if(_0x2e07bc[_0x1ad2a1(0x128)]){let _0x3a6f7c=0xa;const _0x1972d6=await _0x576461[_0x1ad2a1(0x134)][_0x1ad2a1(0xf5)]({'where':{'id':_0x2e07bc[_0x1ad2a1(0x1ad)]},'select':{'gatewaySettings':!![]}});if(_0x1972d6?.[_0x1ad2a1(0xfc)])try{const _0x5a0ced=JSON[_0x1ad2a1(0x167)](_0x1972d6[_0x1ad2a1(0xfc)]);for(const [_0x1dbec8,_0x1d8d32]of Object[_0x1ad2a1(0x18f)](_0x5a0ced)){if(_0x1dbec8[_0x1ad2a1(0x1c3)]()===_0x2e07bc[_0x1ad2a1(0x150)][_0x1ad2a1(0x1c3)]()){_0x3a6f7c=_0x1d8d32[_0x1ad2a1(0xed)]||0xa;break;}}}catch(_0x1c780b){console['error'](_0x1ad2a1(0x188)+_0x25583d+':',_0x1c780b);}const _0x57e829=_0x2e07bc[_0x1ad2a1(0x128)]*(0x1-_0x3a6f7c/0x64);_0x329561=-_0x57e829,_0x54e80d-=_0x57e829,_0x31e131[_0x1ad2a1(0x128)]=null,_0x31e131[_0x1ad2a1(0xeb)]=null,console[_0x1ad2a1(0x10f)](_0x1ad2a1(0x1c7)+_0x25583d+'\x20no\x20longer\x20PAID:'),console[_0x1ad2a1(0x10f)](_0x1ad2a1(0x171)+_0x2e07bc[_0x1ad2a1(0x128)]['toFixed'](0x6)+_0x1ad2a1(0x146)),console['log'](_0x1ad2a1(0x126)+_0x2e07bc['gateway']+_0x1ad2a1(0x18a)+_0x3a6f7c+'%'),console[_0x1ad2a1(0x10f)](_0x1ad2a1(0x1b9)+_0x57e829[_0x1ad2a1(0x192)](0x6)+_0x1ad2a1(0x209)+_0x3a6f7c+_0x1ad2a1(0x124)),console[_0x1ad2a1(0x10f)](_0x1ad2a1(0x1fc)+_0x57e829['toFixed'](0x6)+_0x1ad2a1(0x146));}}}_0x5a45b2===_0x1ad2a1(0x13d)&&(_0x13a3e5===_0x1ad2a1(0x178)&&_0x2e07bc[_0x1ad2a1(0x128)]&&console[_0x1ad2a1(0x10f)](_0x1ad2a1(0x180)),_0x5ce4b0&&_0x5ce4b0>0x0&&(_0x329561-=_0x5ce4b0,_0x54e80d-=_0x5ce4b0,console['log'](_0x1ad2a1(0x16c)+_0x5ce4b0[_0x1ad2a1(0x192)](0x6)+_0x1ad2a1(0x1e0))));_0x5a45b2===_0x1ad2a1(0xf7)&&_0x13a3e5===_0x1ad2a1(0x178)&&console[_0x1ad2a1(0x10f)](_0x1ad2a1(0x223));const _0xabc763=await _0x576461[_0x1ad2a1(0x179)][_0x1ad2a1(0x1b4)]({'where':{'id':_0x25583d},'data':_0x31e131,'include':{'shop':{'select':{'name':!![],'username':!![]}}}});return _0x329561!==0x0&&(await _0x576461[_0x1ad2a1(0x134)][_0x1ad2a1(0x1b4)]({'where':{'id':_0x2e07bc[_0x1ad2a1(0x1ad)]},'data':{'balance':_0x54e80d}}),console[_0x1ad2a1(0x10f)](_0x1ad2a1(0x11a)+_0x2e07bc[_0x1ad2a1(0x1ad)]+_0x1ad2a1(0x1ec)+_0x2e07bc[_0x1ad2a1(0x134)][_0x1ad2a1(0x165)][_0x1ad2a1(0x192)](0x6)+_0x1ad2a1(0x1b8)+_0x54e80d[_0x1ad2a1(0x192)](0x6)+_0x1ad2a1(0x1cd)+(_0x329561>0x0?'+':'')+_0x329561[_0x1ad2a1(0x192)](0x6)+')')),_0xabc763;});return{'id':_0x459406['id'],'shopId':_0x459406[_0x2878a1(0x1ad)],'gateway':_0x459406[_0x2878a1(0x150)],'amount':_0x459406[_0x2878a1(0x196)],'currency':_0x459406['currency'],'status':_0x459406['status'],'orderId':_0x459406[_0x2878a1(0x1cc)],'gatewayOrderId':_0x459406[_0x2878a1(0x19c)],'customerEmail':_0x459406[_0x2878a1(0x137)],'customerName':_0x459406[_0x2878a1(0x1dd)],'customerCountry':_0x459406[_0x2878a1(0x13c)],'customerIp':_0x459406[_0x2878a1(0x149)],'customerUa':_0x459406[_0x2878a1(0x123)],'failureMessage':_0x459406[_0x2878a1(0x19d)],'adminNotes':_0x459406['adminNotes'],'chargebackAmount':_0x459406[_0x2878a1(0x1d3)],'statusChangedBy':_0x459406[_0x2878a1(0x166)],'statusChangedAt':_0x459406[_0x2878a1(0x159)],'createdAt':_0x459406['createdAt'],'updatedAt':_0x459406['updatedAt'],'shop':_0x459406[_0x2878a1(0x134)]};}async[a36_0x52a1b6(0x169)](_0x42d78f,_0x17a035){const _0x2a5683=a36_0x52a1b6,_0x3f28e4=Math['random']()[_0x2a5683(0x1db)](0x24)[_0x2a5683(0x155)](0x2,0x9);console[_0x2a5683(0x10f)](_0x2a5683(0x21c)+_0x3f28e4+',\x20userId:\x20'+_0x42d78f);const _0x34b278={..._0x17a035};_0x17a035[_0x2a5683(0x1d8)]&&_0x17a035['password'][_0x2a5683(0x143)]()!==''?(console['log'](_0x2a5683(0x14b)+_0x3f28e4+_0x2a5683(0x1be)+_0x42d78f),_0x34b278[_0x2a5683(0x1d8)]=await bcryptjs_1['default']['hash'](_0x17a035[_0x2a5683(0x1d8)],0xc)):(console[_0x2a5683(0x10f)]('🔐\x20['+_0x3f28e4+_0x2a5683(0x16f)),delete _0x34b278[_0x2a5683(0x1d8)]);_0x17a035['fullName']&&(_0x34b278['name']=_0x17a035['fullName'],delete _0x34b278[_0x2a5683(0x111)]);_0x17a035[_0x2a5683(0x168)]&&(_0x34b278['telegram']=_0x17a035[_0x2a5683(0x168)],delete _0x34b278[_0x2a5683(0x168)]);_0x17a035[_0x2a5683(0x17d)]&&(_0x34b278[_0x2a5683(0x1c9)]=_0x17a035[_0x2a5683(0x17d)],delete _0x34b278['merchantUrl']);if(_0x17a035[_0x2a5683(0x132)]){const _0x36293d=_0x17a035[_0x2a5683(0x132)][_0x2a5683(0x1f1)](_0x14dc33=>this[_0x2a5683(0x1e7)](_0x14dc33));console[_0x2a5683(0x10f)](_0x2a5683(0x1bf),_0x17a035[_0x2a5683(0x132)],'->',_0x36293d),_0x34b278[_0x2a5683(0x186)]=JSON[_0x2a5683(0xf8)](_0x36293d),delete _0x34b278['gateways'];}_0x17a035[_0x2a5683(0xfc)]&&(console[_0x2a5683(0x10f)]('🔧\x20['+_0x3f28e4+_0x2a5683(0xf1),_0x17a035[_0x2a5683(0xfc)]),_0x34b278[_0x2a5683(0xfc)]=JSON[_0x2a5683(0xf8)](_0x17a035[_0x2a5683(0xfc)]),console['log'](_0x2a5683(0x201)+_0x3f28e4+']\x20Gateway\x20settings\x20JSON\x20string:',_0x34b278[_0x2a5683(0xfc)]));_0x17a035[_0x2a5683(0x1eb)]&&(_0x17a035[_0x2a5683(0x1eb)][_0x2a5683(0x154)]!==undefined&&(_0x34b278[_0x2a5683(0x154)]=_0x17a035[_0x2a5683(0x1eb)][_0x2a5683(0x154)]||null),_0x17a035[_0x2a5683(0x1eb)][_0x2a5683(0x1d2)]!==undefined&&(_0x34b278[_0x2a5683(0x1d2)]=_0x17a035[_0x2a5683(0x1eb)][_0x2a5683(0x1d2)]||null),_0x17a035[_0x2a5683(0x1eb)]['usdtErcWallet']!==undefined&&(_0x34b278[_0x2a5683(0x1fd)]=_0x17a035[_0x2a5683(0x1eb)]['usdtErcWallet']||null),_0x17a035[_0x2a5683(0x1eb)][_0x2a5683(0x200)]!==undefined&&(_0x34b278[_0x2a5683(0x200)]=_0x17a035[_0x2a5683(0x1eb)][_0x2a5683(0x200)]||null),delete _0x34b278[_0x2a5683(0x1eb)]);const _0x40d678=await database_1[_0x2a5683(0x1c5)][_0x2a5683(0x134)]['update']({'where':{'id':_0x42d78f},'data':_0x34b278,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return console['log']('🎯\x20['+_0x3f28e4+_0x2a5683(0x1ff),_0x40d678['gatewaySettings']),{'id':_0x40d678['id'],'fullName':_0x40d678['name'],'username':_0x40d678[_0x2a5683(0x211)],'telegramId':_0x40d678[_0x2a5683(0x198)],'merchantUrl':_0x40d678[_0x2a5683(0x1c9)],'gateways':_0x40d678[_0x2a5683(0x186)]?JSON['parse'](_0x40d678['paymentGateways']):null,'gatewaySettings':_0x40d678[_0x2a5683(0xfc)]?JSON[_0x2a5683(0x167)](_0x40d678['gatewaySettings']):null,'publicKey':_0x40d678[_0x2a5683(0x206)],'wallets':{'usdtPolygonWallet':_0x40d678['usdtPolygonWallet'],'usdtTrcWallet':_0x40d678[_0x2a5683(0x1d2)],'usdtErcWallet':_0x40d678[_0x2a5683(0x1fd)],'usdcPolygonWallet':_0x40d678[_0x2a5683(0x200)]},'status':_0x40d678['status'],'createdAt':_0x40d678['createdAt']};}async['suspendUser'](_0x1bed51){const _0xc48dde=a36_0x52a1b6,_0x102645=await database_1[_0xc48dde(0x1c5)][_0xc48dde(0x134)][_0xc48dde(0x1b4)]({'where':{'id':_0x1bed51},'data':{'status':_0xc48dde(0x1c2)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x102645['id'],'fullName':_0x102645[_0xc48dde(0x120)],'username':_0x102645[_0xc48dde(0x211)],'telegramId':_0x102645['telegram'],'merchantUrl':_0x102645['shopUrl'],'gateways':_0x102645[_0xc48dde(0x186)]?JSON['parse'](_0x102645['paymentGateways']):null,'gatewaySettings':_0x102645[_0xc48dde(0xfc)]?JSON[_0xc48dde(0x167)](_0x102645[_0xc48dde(0xfc)]):null,'publicKey':_0x102645['publicKey'],'wallets':{'usdtPolygonWallet':_0x102645[_0xc48dde(0x154)],'usdtTrcWallet':_0x102645[_0xc48dde(0x1d2)],'usdtErcWallet':_0x102645[_0xc48dde(0x1fd)],'usdcPolygonWallet':_0x102645[_0xc48dde(0x200)]},'status':_0x102645[_0xc48dde(0x1a9)],'createdAt':_0x102645[_0xc48dde(0x22e)]};}async[a36_0x52a1b6(0x15d)](_0x4a0e12){const _0x3cb842=a36_0x52a1b6,_0x4689ef=await database_1['default'][_0x3cb842(0x134)][_0x3cb842(0x1b4)]({'where':{'id':_0x4a0e12},'data':{'status':_0x3cb842(0x17b)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x4689ef['id'],'fullName':_0x4689ef[_0x3cb842(0x120)],'username':_0x4689ef[_0x3cb842(0x211)],'telegramId':_0x4689ef[_0x3cb842(0x198)],'merchantUrl':_0x4689ef['shopUrl'],'gateways':_0x4689ef[_0x3cb842(0x186)]?JSON[_0x3cb842(0x167)](_0x4689ef[_0x3cb842(0x186)]):null,'gatewaySettings':_0x4689ef[_0x3cb842(0xfc)]?JSON[_0x3cb842(0x167)](_0x4689ef[_0x3cb842(0xfc)]):null,'publicKey':_0x4689ef['publicKey'],'wallets':{'usdtPolygonWallet':_0x4689ef[_0x3cb842(0x154)],'usdtTrcWallet':_0x4689ef[_0x3cb842(0x1d2)],'usdtErcWallet':_0x4689ef[_0x3cb842(0x1fd)],'usdcPolygonWallet':_0x4689ef[_0x3cb842(0x200)]},'status':_0x4689ef[_0x3cb842(0x1a9)],'createdAt':_0x4689ef[_0x3cb842(0x22e)]};}async[a36_0x52a1b6(0x158)](_0x53ae38){const _0x187871=a36_0x52a1b6,{page:_0x49f92e,limit:_0x253341,status:_0x75ae2d}=_0x53ae38,_0x3248ad=(_0x49f92e-0x1)*_0x253341,_0x2deb87={};_0x75ae2d&&(_0x2deb87[_0x187871(0x1a9)]=_0x75ae2d[_0x187871(0x117)]());const [_0x589b01,_0x322173]=await Promise['all']([database_1['default']['shop'][_0x187871(0x1ca)]({'where':_0x2deb87,'skip':_0x3248ad,'take':_0x253341,'orderBy':{'createdAt':_0x187871(0x1fb)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}}),database_1[_0x187871(0x1c5)][_0x187871(0x134)]['count']({'where':_0x2deb87})]);return{'users':_0x589b01['map'](_0x38e0e4=>{const _0x5226e9=_0x187871,_0x19bbd6=_0x38e0e4[_0x5226e9(0x186)]?JSON[_0x5226e9(0x167)](_0x38e0e4[_0x5226e9(0x186)]):null,_0x15c403=_0x19bbd6?_0x19bbd6[_0x5226e9(0x1f1)](_0x2fbd4c=>this[_0x5226e9(0x160)](_0x2fbd4c)):null;return{'id':_0x38e0e4['id'],'fullName':_0x38e0e4[_0x5226e9(0x120)],'username':_0x38e0e4[_0x5226e9(0x211)],'telegramId':_0x38e0e4['telegram'],'merchantUrl':_0x38e0e4[_0x5226e9(0x1c9)],'gateways':_0x15c403,'gatewaySettings':_0x38e0e4[_0x5226e9(0xfc)]?JSON[_0x5226e9(0x167)](_0x38e0e4['gatewaySettings']):null,'publicKey':_0x38e0e4[_0x5226e9(0x206)],'wallets':{'usdtPolygonWallet':_0x38e0e4[_0x5226e9(0x154)],'usdtTrcWallet':_0x38e0e4[_0x5226e9(0x1d2)],'usdtErcWallet':_0x38e0e4[_0x5226e9(0x1fd)],'usdcPolygonWallet':_0x38e0e4[_0x5226e9(0x200)]},'status':_0x38e0e4[_0x5226e9(0x1a9)],'createdAt':_0x38e0e4[_0x5226e9(0x22e)]};}),'pagination':{'page':_0x49f92e,'limit':_0x253341,'total':_0x322173,'totalPages':Math[_0x187871(0x14a)](_0x322173/_0x253341)}};}async['getUserById'](_0x34c4df){const _0x415260=a36_0x52a1b6,_0x1a5188=await database_1['default'][_0x415260(0x134)][_0x415260(0xf5)]({'where':{'id':_0x34c4df},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x1a5188)return null;const _0x363655=_0x1a5188[_0x415260(0x186)]?JSON[_0x415260(0x167)](_0x1a5188[_0x415260(0x186)]):null,_0x3729ec=_0x363655?_0x363655[_0x415260(0x1f1)](_0x3253a4=>this[_0x415260(0x160)](_0x3253a4)):null;return _0x363655&&_0x3729ec&&console['log'](_0x415260(0x1bb),_0x363655,'->',_0x3729ec),{'id':_0x1a5188['id'],'fullName':_0x1a5188[_0x415260(0x120)],'username':_0x1a5188[_0x415260(0x211)],'telegramId':_0x1a5188['telegram'],'merchantUrl':_0x1a5188[_0x415260(0x1c9)],'gateways':_0x3729ec,'gatewaySettings':_0x1a5188[_0x415260(0xfc)]?JSON['parse'](_0x1a5188[_0x415260(0xfc)]):null,'publicKey':_0x1a5188[_0x415260(0x206)],'wallets':{'usdtPolygonWallet':_0x1a5188['usdtPolygonWallet'],'usdtTrcWallet':_0x1a5188[_0x415260(0x1d2)],'usdtErcWallet':_0x1a5188[_0x415260(0x1fd)],'usdcPolygonWallet':_0x1a5188['usdcPolygonWallet']},'status':_0x1a5188[_0x415260(0x1a9)],'createdAt':_0x1a5188[_0x415260(0x22e)]};}async['createUser'](_0x38cad9){const _0x218e99=a36_0x52a1b6,{fullName:_0x3d2d8f,username:_0x359671,password:_0x332868,telegramId:_0x203f88,merchantUrl:_0x1a6862,gateways:_0x300798,gatewaySettings:_0x10a800,wallets:_0x15e87a}=_0x38cad9,_0x5a57fd=await database_1[_0x218e99(0x1c5)][_0x218e99(0x134)][_0x218e99(0xf5)]({'where':{'username':_0x359671}});if(_0x5a57fd)throw new Error(_0x218e99(0x13f));if(_0x203f88){const _0x1583de=await database_1[_0x218e99(0x1c5)][_0x218e99(0x134)][_0x218e99(0xf5)]({'where':{'telegram':_0x203f88}});if(_0x1583de)throw new Error(_0x218e99(0x224));}const _0x166bfc=await bcryptjs_1[_0x218e99(0x1c5)][_0x218e99(0x15a)](_0x332868,0xc),_0x3124aa=_0x218e99(0x176)+crypto_1[_0x218e99(0x1c5)][_0x218e99(0x1a5)](0x20)[_0x218e99(0x1db)](_0x218e99(0x1c1)),_0x108f97=_0x218e99(0x1f0)+crypto_1['default'][_0x218e99(0x1a5)](0x20)['toString'](_0x218e99(0x1c1)),_0x1336e3=_0x300798?_0x300798[_0x218e99(0x1f1)](_0x4c86a3=>this['getGatewayInternalName'](_0x4c86a3)):null;_0x300798&&_0x1336e3&&console[_0x218e99(0x10f)](_0x218e99(0x1cb),_0x300798,'->',_0x1336e3);const _0x111d70=await database_1['default']['shop'][_0x218e99(0x106)]({'data':{'name':_0x3d2d8f,'username':_0x359671,'password':_0x166bfc,'telegram':_0x203f88,'shopUrl':_0x1a6862,'paymentGateways':_0x1336e3?JSON[_0x218e99(0xf8)](_0x1336e3):null,'gatewaySettings':_0x10a800?JSON[_0x218e99(0xf8)](_0x10a800):null,'usdtPolygonWallet':_0x15e87a?.['usdtPolygonWallet']||null,'usdtTrcWallet':_0x15e87a?.[_0x218e99(0x1d2)]||null,'usdtErcWallet':_0x15e87a?.['usdtErcWallet']||null,'usdcPolygonWallet':_0x15e87a?.[_0x218e99(0x200)]||null,'publicKey':_0x3124aa,'secretKey':_0x108f97,'status':'ACTIVE'},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x111d70['id'],'fullName':_0x111d70['name'],'username':_0x111d70[_0x218e99(0x211)],'telegramId':_0x111d70[_0x218e99(0x198)],'merchantUrl':_0x111d70[_0x218e99(0x1c9)],'gateways':_0x111d70[_0x218e99(0x186)]?JSON[_0x218e99(0x167)](_0x111d70[_0x218e99(0x186)]):null,'gatewaySettings':_0x111d70[_0x218e99(0xfc)]?JSON['parse'](_0x111d70['gatewaySettings']):null,'publicKey':_0x111d70[_0x218e99(0x206)],'wallets':{'usdtPolygonWallet':_0x111d70[_0x218e99(0x154)],'usdtTrcWallet':_0x111d70[_0x218e99(0x1d2)],'usdtErcWallet':_0x111d70[_0x218e99(0x1fd)],'usdcPolygonWallet':_0x111d70['usdcPolygonWallet']},'status':_0x111d70['status'],'createdAt':_0x111d70[_0x218e99(0x22e)]};}async[a36_0x52a1b6(0x15b)](_0x90badd){const _0x42593e=a36_0x52a1b6;await database_1[_0x42593e(0x1c5)]['shop']['delete']({'where':{'id':_0x90badd}});}['generateDailyStatistics'](_0x3bd775,_0x17972e,_0x24dce5){const _0x30c394=a36_0x52a1b6,_0x47bcb3=new Map(),_0x43d197=new Date(_0x17972e);while(_0x43d197<=_0x24dce5){const _0x588338=_0x43d197[_0x30c394(0x10e)]()[_0x30c394(0x130)]('T')[0x0];_0x47bcb3['set'](_0x588338,{'revenue':0x0,'count':0x0}),_0x43d197[_0x30c394(0x1e6)](_0x43d197['getDate']()+0x1);}for(const _0x2b771e of _0x3bd775){const _0x1787be=_0x2b771e[_0x30c394(0x22e)]['toISOString']()[_0x30c394(0x130)]('T')[0x0],_0x21dc39=_0x47bcb3[_0x30c394(0x1c4)](_0x1787be);_0x21dc39&&(_0x21dc39[_0x30c394(0x19f)]+=0x1,_0x2b771e[_0x30c394(0x1a9)]===_0x30c394(0x178)&&(_0x2b771e[_0x30c394(0x128)]?_0x21dc39[_0x30c394(0x1de)]+=_0x2b771e[_0x30c394(0x128)]:console[_0x30c394(0x10f)]('⚠️\x20Payment\x20'+_0x2b771e['id']+'\x20missing\x20amountUSDT,\x20using\x20fallback\x20conversion')));}const _0x96889=[],_0xce0e43=[];for(const [_0x5d0d46,_0x4e284f]of _0x47bcb3){_0x96889[_0x30c394(0x163)]({'date':_0x5d0d46,'amount':Math[_0x30c394(0x19a)](_0x4e284f['revenue']*0x64)/0x64}),_0xce0e43['push']({'date':_0x5d0d46,'count':_0x4e284f['count']});}return{'dailyRevenue':_0x96889,'dailyPayments':_0xce0e43};}}function a36_0x40f8(){const _0x2d438a=['getGatewayDisplayName','all','updatePaymentStatus','push','merchantEarnings','balance','statusChangedBy','parse','telegramId','updateUser','3306356sjpaFM','2721546ongFRn','💸\x20CHARGEBACK\x20penalty:\x20-','aggregate','\x20USDT\x20(with\x20commission\x20deducted)',']\x20Password\x20not\x20provided\x20or\x20empty,\x20skipping\x20password\x20update','paidOutUSDT','\x20\x20\x20Full\x20amount:\x20','📊\x20Getting\x20payments\x20with\x20filters:','🔄\x20Converted\x20gateway\x20name\x20\x27','10ykiudt','defineProperty','pk_','network','PAID','payment','PENDING','ACTIVE','currencyService','merchantUrl','totalPayout','mastercard','💸\x20CHARGEBACK:\x20Merchant\x20amount\x20already\x20deducted\x20from\x20balance','join','cointopay2','\x20\x20\x20🔍\x20Raw\x20balance\x20sum:\x20','__importDefault','\x20\x20\x20🌐\x20IP:\x20','paymentGateways','1808zxiNeo','Error\x20parsing\x20gateway\x20settings\x20for\x20payment\x20','not\x20set',',\x20Commission:\x20','updatedAt','generateDailyStatistics','payout','admin','entries','polygon','📅\x20Period:\x20','toFixed','📋\x20Found\x20','$transaction','\x20\x20\x20👤\x20Merchant\x20earnings:\x20','amount','periodTo','telegram','month','round','pendingUrl','gatewayOrderId','failureMessage','getMerchantStatistics','count','2JTnRlC','⚠️\x20Gateway\x20\x27','updateCustomerData','\x20\x20\x20Current\x20total\x20paid\x20out:\x20','includes','randomBytes','💰\x20Found\x20','getPayoutById','💱\x20Currency\x20filter\x20applied:\x20','status','📊\x20Merchants\x20awaiting\x20payout:\x20','custom','error','shopId','localeCompare','📊\x20Total\x20payments\x20(including\x20failed):\x20','\x27\x20to\x20name\x20\x27','\x20balance\x20updated:','📊\x20Getting\x20merchants\x20awaiting\x20payout\x20with\x20filters:','Error\x20processing\x20payment\x20','update','0000','\x20\x20\x20📊\x20Commission\x20difference:\x20','totalTurnover','\x20->\x20','\x20\x20\x20Merchant\x20loses:\x20','delete','🔄\x20Gateway\x20mapping\x20(get):','paidAt','\x20\x20\x20Balance:\x20',']\x20Updating\x20password\x20for\x20user\x20','🔄\x20Gateway\x20mapping:','💰\x20[PAYOUT]\x20Gateway\x20','hex','SUSPENDED','toLowerCase','get','default','__esModule','💰\x20Payment\x20','%\x20from\x20','shopUrl','findMany','🔄\x20Gateway\x20mapping\x20(create):','orderId','\x20USDT\x20(','dailyPayments','\x20PAID\x20payments','Payment\x20not\x20found','insensitive','usdtTrcWallet','chargebackAmount','failUrl','getMerchantsSelection','\x20for\x20shop\x20','⚠️\x20Requested\x20gateway\x20\x27','password','getSystemStatistics','dateTo','toString','crypto','customerName','revenue','30d','\x20USDT\x20from\x20balance','getPaymentById','externalPaymentUrl','sort','createPayout','gte','setDate','getGatewayInternalName','dateFrom','📊\x20Payout\x20statistics\x20calculated:','39018BTPFEE','wallets','\x20balance\x20updated:\x20','\x20\x20\x20💰\x20Total\x20payout:\x20','COMPLETED','getPayoutStats','sk_','map','dailyRevenue','_count','getAllPayments','AdminService','date','\x20\x20\x20Added\x20to\x20balance:\x20+','Noda','asc','\x20\x20\x20�📊\x20Total\x20payments:\x20','desc','\x20\x20\x20Subtracted\x20from\x20balance:\x20-','usdtErcWallet','\x20paid\x20payments\x20for\x20analysis',']\x20User\x20updated,\x20gatewaySettings\x20from\x20DB:','usdcPolygonWallet','🔧\x20[','\x20USDT\x20(+','📊\x20Getting\x20merchant\x20statistics\x20with\x20filters:','\x27)\x20not\x20found\x20in\x20database,\x20returning\x20empty\x20result','availableBalance','publicKey','./currencyService','\x20\x20\x20💸\x20Total\x20payouts\x20(all\x20time):\x20','\x20USDT\x20(after\x20','totalCommissionRate','🔄\x20Updating\x20customer\x20data\x20for\x20payment\x20','\x20\x20\x20🖥️\x20User\x20Agent:\x20','💳\x20Payout\x20wallet\x20for\x20','some','getGatewayNameById','totalAmountAfterCommissionUSDT','username','\x20\x20\x20Payout\x20amount:\x20','\x20payments)','convertToUSDT','CoinToPay','rapyd','\x20\x20\x20🏪\x20Gateway\x20earnings:\x20','trc20','\x27\x20as\x20is\x20(not\x20found\x20in\x20mappings)','averageCheckUSDT','\x20USDT\x20for\x20payment\x20','🎯\x20updateUser\x20called\x20with\x20ID:\x20','deletePayout','\x20\x20\x20💰\x20Total\x20payments\x20turnover:\x20','✅\x20Using\x20gateway\x20filter:\x20\x27','\x20\x20\x20Current\x20balance:\x20','Open\x20Banking\x202','\x27\x20(from\x20\x27','🔄\x20REFUND:\x20Payment\x20amount\x20already\x20deducted\x20from\x20balance','Telegram\x20username\x20already\x20exists','_sum','currency','totalPayments','length','commissionUSDT','periodFrom','set','📊\x20Gateway\x20filter\x20applied:','\x20\x20\x20✅\x20Total\x20available\x20for\x20payout:\x20','createdAt','amountAfterGatewayCommissionUSDT','\x20\x20\x20�\x20Total\x20payments\x20turnover:\x20','commission','\x20\x20\x20📅\x20Total\x20payouts\x20(this\x20month):\x20','\x20in\x20','KLYME\x20GB',']\x20Gateway\x20settings\x20before\x20saving:','Plisio','getMonth',':\x20commission\x20=\x20','findUnique','turnoverUSDT','REFUND','stringify','\x20USDT\x20(-','period','\x20\x20\x20🔍\x20Calculated\x20after\x20commission:\x20','gatewaySettings','findFirst','\x20\x20\x20🌍\x20Country:\x20','\x20\x20\x20Merchant\x20gets:\x20','klyme_gb','totalAmountUSDT','\x20\x20\x20�\x20Total\x20paid\x20out:\x20','klyme_eu','NONEXISTENT_GATEWAY_FILTER','\x20USDT)','create','\x20USDT\x20(gross\x20revenue)','Shop\x20not\x20found','year','3733467FyDuIM','🔄\x20Converted\x20gateway\x20ID\x20\x27','\x20to\x20','📊\x20Calculating\x20commission\x20manually\x20for\x20payment\x20','toISOString','log','\x20USDT\x20(without\x20commission)','fullName','\x20order','paymentsCount','\x20merchants','📊\x20Merchant\x20statistics\x20calculated:','\x20\x20\x20Transaction\x20hash:\x20','toUpperCase','\x20status:\x20','Insufficient\x20balance.\x20Available:\x20','💰\x20Shop\x20','💰\x20Creating\x20payout\x20for\x20shop\x20','💰\x20Current\x20shop\x20balance:\x20','Error\x20parsing\x20gateway\x20settings\x20for\x20shop\x20','week','not\x20specified','name','test_gateway','amountAfterCommissionUSDT','customerUa','%\x20commission)','../config/database','\x20\x20\x20Gateway:\x20','forEach','amountUSDT','totalPaidOut','\x20active\x20merchants\x20for\x20selection','merchantEarningsUSDT','notes','successUrl','getFullYear','\x20USDT\x20(total\x20paid\x20to\x20merchants)','split','reduce','gateways','values','shop','\x27\x20not\x20found.\x20Available\x20gateways:\x20','KLYME\x20EU','customerEmail','2020-01-01','\x20became\x20PAID:','748798yoRxts','getAllPayouts','customerCountry','CHARGEBACK','20431460FHFwpT','Username\x20already\x20exists','\x27\x20->\x20ID\x20\x27','\x27\x20->\x20name\x20\x27','📊\x20[ADMIN]\x20Calculating\x20commission\x20manually\x20for\x20payment\x20','trim','\x20\x20\x20💰\x20Total\x20turnover:\x20','\x20USDT\x20(actual\x20balances)','\x20USDT','📊\x20[ADMIN]\x20Using\x20saved\x20amountAfterGatewayCommissionUSDT:\x20','erc20','customerIp','ceil','🔐\x20[','\x20\x20\x20💳\x20Total\x20payments:\x20','Rapyd','turnover','📊\x20Sorting\x20payments\x20by\x20','gateway','3082050TuLFyZ','txid','getTime','usdtPolygonWallet','substr','thisMonth','getMerchantsAwaitingPayout','getAllUsers','statusChangedAt','hash','deleteUser','gatewayEarnings','activateUser','awaitingPayout','lte'];a36_0x40f8=function(){return _0x2d438a;};return a36_0x40f8();}exports[a36_0x52a1b6(0x1f5)]=AdminService;