'use strict';const a68_0x46cd5f=a68_0x4a20;(function(_0x4c11c9,_0x132a16){const _0x2b0966=a68_0x4a20,_0x59182b=_0x4c11c9();while(!![]){try{const _0x347fe6=-parseInt(_0x2b0966(0xfd))/0x1+-parseInt(_0x2b0966(0x118))/0x2+parseInt(_0x2b0966(0x106))/0x3+-parseInt(_0x2b0966(0x103))/0x4+-parseInt(_0x2b0966(0x101))/0x5*(parseInt(_0x2b0966(0xf4))/0x6)+parseInt(_0x2b0966(0xe6))/0x7*(-parseInt(_0x2b0966(0x104))/0x8)+parseInt(_0x2b0966(0x10c))/0x9*(parseInt(_0x2b0966(0xe3))/0xa);if(_0x347fe6===_0x132a16)break;else _0x59182b['push'](_0x59182b['shift']());}catch(_0x91c96d){_0x59182b['push'](_0x59182b['shift']());}}}(a68_0x23c5,0x3c23d));var __importDefault=this&&this[a68_0x46cd5f(0xf1)]||function(_0x40a399){return _0x40a399&&_0x40a399['__esModule']?_0x40a399:{'default':_0x40a399};};Object[a68_0x46cd5f(0xfe)](exports,'__esModule',{'value':!![]}),exports['UserService']=void 0x0;const bcryptjs_1=__importDefault(require(a68_0x46cd5f(0xfc))),crypto_1=__importDefault(require('crypto')),database_1=__importDefault(require(a68_0x46cd5f(0xf9)));function a68_0x23c5(){const _0x4ecbb3=['update','generateApiKeys','findUnique','parse','getUserById','password','1058030ywpEAy','shopUrl','updateUser','38507QqjJqN','findMany','paymentGateways','randomBytes','stringify','UserService','usdtPolygonWallet','sk_','telegramId','create','default','__importDefault','gateways','map','6jqLwQw','delete','username','name','createUser','../config/database','pk_','status','bcryptjs','481921NOxIqL','defineProperty','ACTIVE','deleteUser','900035gvHxZd','hash','683312ODpvvl','144knCSvS','fullName','537384BrBxEs','getAllUsers','usdtErcWallet','gatewaySettings','merchantUrl','hex','117ebUmwg','publicKey','shop','wallets','toString','Telegram\x20username\x20already\x20exists','usdtTrcWallet','createdAt','telegram','desc','usdcPolygonWallet','Username\x20already\x20exists','752920GuGZXh'];a68_0x23c5=function(){return _0x4ecbb3;};return a68_0x23c5();}class UserService{[a68_0x46cd5f(0x11a)](){const _0x4a9eb8=a68_0x46cd5f,_0xa8abb5=_0x4a9eb8(0xfa)+crypto_1[_0x4a9eb8(0xf0)][_0x4a9eb8(0xe9)](0x20)[_0x4a9eb8(0x110)](_0x4a9eb8(0x10b)),_0x8d5342=_0x4a9eb8(0xed)+crypto_1[_0x4a9eb8(0xf0)][_0x4a9eb8(0xe9)](0x20)['toString'](_0x4a9eb8(0x10b));return{'publicKey':_0xa8abb5,'secretKey':_0x8d5342};}async[a68_0x46cd5f(0xf8)](_0x2d2ac7){const _0x3f4ce4=a68_0x46cd5f,{fullName:_0x385bc0,username:_0x263f67,password:_0x19690f,telegramId:_0x1030e8,merchantUrl:_0x35c8ec,gateways:_0x1bbbb0,gatewaySettings:_0x156793,wallets:_0x5aa907}=_0x2d2ac7,_0x5e590e=await database_1[_0x3f4ce4(0xf0)][_0x3f4ce4(0x10e)][_0x3f4ce4(0x11b)]({'where':{'username':_0x263f67}});if(_0x5e590e)throw new Error(_0x3f4ce4(0x117));if(_0x1030e8){const _0x50219c=await database_1[_0x3f4ce4(0xf0)][_0x3f4ce4(0x10e)]['findUnique']({'where':{'telegram':_0x1030e8}});if(_0x50219c)throw new Error(_0x3f4ce4(0x111));}const _0x71dab7=await bcryptjs_1['default']['hash'](_0x19690f,0xc),{publicKey:_0x45b911,secretKey:_0xb94cb}=this[_0x3f4ce4(0x11a)](),_0x44068d=await database_1[_0x3f4ce4(0xf0)][_0x3f4ce4(0x10e)][_0x3f4ce4(0xef)]({'data':{'name':_0x385bc0,'username':_0x263f67,'password':_0x71dab7,'telegram':_0x1030e8,'shopUrl':_0x35c8ec,'paymentGateways':_0x1bbbb0?JSON['stringify'](_0x1bbbb0):null,'gatewaySettings':_0x156793?JSON[_0x3f4ce4(0xea)](_0x156793):null,'usdtPolygonWallet':_0x5aa907?.[_0x3f4ce4(0xec)]||null,'usdtTrcWallet':_0x5aa907?.[_0x3f4ce4(0x112)]||null,'usdtErcWallet':_0x5aa907?.[_0x3f4ce4(0x108)]||null,'usdcPolygonWallet':_0x5aa907?.[_0x3f4ce4(0x116)]||null,'publicKey':_0x45b911,'secretKey':_0xb94cb,'status':_0x3f4ce4(0xff)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x44068d['id'],'fullName':_0x44068d[_0x3f4ce4(0xf7)],'username':_0x44068d[_0x3f4ce4(0xf6)],'telegramId':_0x44068d[_0x3f4ce4(0x114)],'merchantUrl':_0x44068d[_0x3f4ce4(0xe4)],'gateways':_0x44068d[_0x3f4ce4(0xe8)]?JSON[_0x3f4ce4(0x11c)](_0x44068d[_0x3f4ce4(0xe8)]):null,'gatewaySettings':_0x44068d[_0x3f4ce4(0x109)]?JSON['parse'](_0x44068d['gatewaySettings']):null,'publicKey':_0x44068d[_0x3f4ce4(0x10d)],'wallets':{'usdtPolygonWallet':_0x44068d[_0x3f4ce4(0xec)],'usdtTrcWallet':_0x44068d[_0x3f4ce4(0x112)],'usdtErcWallet':_0x44068d[_0x3f4ce4(0x108)],'usdcPolygonWallet':_0x44068d[_0x3f4ce4(0x116)]},'status':_0x44068d[_0x3f4ce4(0xfb)],'createdAt':_0x44068d[_0x3f4ce4(0x113)]};}async[a68_0x46cd5f(0x107)](){const _0x54efad=a68_0x46cd5f,_0x34433a=await database_1[_0x54efad(0xf0)][_0x54efad(0x10e)][_0x54efad(0xe7)]({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':_0x54efad(0x115)}});return _0x34433a[_0x54efad(0xf3)](_0x589deb=>({'id':_0x589deb['id'],'fullName':_0x589deb[_0x54efad(0xf7)],'username':_0x589deb[_0x54efad(0xf6)],'telegramId':_0x589deb[_0x54efad(0x114)],'merchantUrl':_0x589deb[_0x54efad(0xe4)],'gateways':_0x589deb['paymentGateways']?JSON[_0x54efad(0x11c)](_0x589deb[_0x54efad(0xe8)]):null,'gatewaySettings':_0x589deb[_0x54efad(0x109)]?JSON['parse'](_0x589deb[_0x54efad(0x109)]):null,'publicKey':_0x589deb['publicKey'],'wallets':{'usdtPolygonWallet':_0x589deb['usdtPolygonWallet'],'usdtTrcWallet':_0x589deb[_0x54efad(0x112)],'usdtErcWallet':_0x589deb[_0x54efad(0x108)],'usdcPolygonWallet':_0x589deb[_0x54efad(0x116)]},'status':_0x589deb[_0x54efad(0xfb)],'createdAt':_0x589deb[_0x54efad(0x113)]}));}async[a68_0x46cd5f(0x11d)](_0x3a39ee){const _0x39eb79=a68_0x46cd5f,_0xa1a595=await database_1[_0x39eb79(0xf0)][_0x39eb79(0x10e)][_0x39eb79(0x11b)]({'where':{'id':_0x3a39ee},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0xa1a595)return null;return{'id':_0xa1a595['id'],'fullName':_0xa1a595[_0x39eb79(0xf7)],'username':_0xa1a595['username'],'telegramId':_0xa1a595['telegram'],'merchantUrl':_0xa1a595[_0x39eb79(0xe4)],'gateways':_0xa1a595[_0x39eb79(0xe8)]?JSON['parse'](_0xa1a595['paymentGateways']):null,'gatewaySettings':_0xa1a595[_0x39eb79(0x109)]?JSON[_0x39eb79(0x11c)](_0xa1a595['gatewaySettings']):null,'publicKey':_0xa1a595['publicKey'],'wallets':{'usdtPolygonWallet':_0xa1a595[_0x39eb79(0xec)],'usdtTrcWallet':_0xa1a595[_0x39eb79(0x112)],'usdtErcWallet':_0xa1a595['usdtErcWallet'],'usdcPolygonWallet':_0xa1a595[_0x39eb79(0x116)]},'status':_0xa1a595[_0x39eb79(0xfb)],'createdAt':_0xa1a595[_0x39eb79(0x113)]};}async[a68_0x46cd5f(0xe5)](_0x407f20,_0x16c17c){const _0x405dfb=a68_0x46cd5f,_0x21696d={..._0x16c17c};_0x16c17c[_0x405dfb(0xe2)]&&(_0x21696d[_0x405dfb(0xe2)]=await bcryptjs_1[_0x405dfb(0xf0)][_0x405dfb(0x102)](_0x16c17c[_0x405dfb(0xe2)],0xc));_0x16c17c[_0x405dfb(0x105)]&&(_0x21696d['name']=_0x16c17c[_0x405dfb(0x105)],delete _0x21696d[_0x405dfb(0x105)]);_0x16c17c[_0x405dfb(0xee)]&&(_0x21696d[_0x405dfb(0x114)]=_0x16c17c[_0x405dfb(0xee)],delete _0x21696d[_0x405dfb(0xee)]);_0x16c17c[_0x405dfb(0x10a)]&&(_0x21696d[_0x405dfb(0xe4)]=_0x16c17c[_0x405dfb(0x10a)],delete _0x21696d['merchantUrl']);_0x16c17c[_0x405dfb(0xf2)]&&(_0x21696d[_0x405dfb(0xe8)]=JSON[_0x405dfb(0xea)](_0x16c17c['gateways']),delete _0x21696d[_0x405dfb(0xf2)]);_0x16c17c['gatewaySettings']&&(_0x21696d['gatewaySettings']=JSON[_0x405dfb(0xea)](_0x16c17c[_0x405dfb(0x109)]),delete _0x21696d[_0x405dfb(0x109)]);_0x16c17c[_0x405dfb(0x10f)]&&(_0x16c17c[_0x405dfb(0x10f)][_0x405dfb(0xec)]!==undefined&&(_0x21696d[_0x405dfb(0xec)]=_0x16c17c[_0x405dfb(0x10f)][_0x405dfb(0xec)]||null),_0x16c17c[_0x405dfb(0x10f)][_0x405dfb(0x112)]!==undefined&&(_0x21696d[_0x405dfb(0x112)]=_0x16c17c['wallets'][_0x405dfb(0x112)]||null),_0x16c17c[_0x405dfb(0x10f)][_0x405dfb(0x108)]!==undefined&&(_0x21696d[_0x405dfb(0x108)]=_0x16c17c[_0x405dfb(0x10f)][_0x405dfb(0x108)]||null),_0x16c17c['wallets'][_0x405dfb(0x116)]!==undefined&&(_0x21696d[_0x405dfb(0x116)]=_0x16c17c[_0x405dfb(0x10f)][_0x405dfb(0x116)]||null),delete _0x21696d[_0x405dfb(0x10f)]);const _0x21b562=await database_1['default'][_0x405dfb(0x10e)][_0x405dfb(0x119)]({'where':{'id':_0x407f20},'data':_0x21696d,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x21b562['id'],'fullName':_0x21b562[_0x405dfb(0xf7)],'username':_0x21b562['username'],'telegramId':_0x21b562[_0x405dfb(0x114)],'merchantUrl':_0x21b562[_0x405dfb(0xe4)],'gateways':_0x21b562[_0x405dfb(0xe8)]?JSON[_0x405dfb(0x11c)](_0x21b562['paymentGateways']):null,'gatewaySettings':_0x21b562['gatewaySettings']?JSON[_0x405dfb(0x11c)](_0x21b562[_0x405dfb(0x109)]):null,'publicKey':_0x21b562['publicKey'],'wallets':{'usdtPolygonWallet':_0x21b562[_0x405dfb(0xec)],'usdtTrcWallet':_0x21b562[_0x405dfb(0x112)],'usdtErcWallet':_0x21b562['usdtErcWallet'],'usdcPolygonWallet':_0x21b562['usdcPolygonWallet']},'status':_0x21b562[_0x405dfb(0xfb)],'createdAt':_0x21b562['createdAt']};}async[a68_0x46cd5f(0x100)](_0x330e0f){const _0x24fd74=a68_0x46cd5f;await database_1[_0x24fd74(0xf0)][_0x24fd74(0x10e)][_0x24fd74(0xf5)]({'where':{'id':_0x330e0f}});}}function a68_0x4a20(_0x5a58ae,_0x54bdcc){const _0x23c55e=a68_0x23c5();return a68_0x4a20=function(_0x4a20b7,_0x26c288){_0x4a20b7=_0x4a20b7-0xe2;let _0x36c48b=_0x23c55e[_0x4a20b7];return _0x36c48b;},a68_0x4a20(_0x5a58ae,_0x54bdcc);}exports[a68_0x46cd5f(0xeb)]=UserService;