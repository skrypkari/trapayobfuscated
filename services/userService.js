'use strict';const a59_0x56e61a=a59_0x2112;function a59_0x2112(_0x41b922,_0x441808){const _0x2394d3=a59_0x2394();return a59_0x2112=function(_0x2112de,_0x6d00e5){_0x2112de=_0x2112de-0x71;let _0x3b8b82=_0x2394d3[_0x2112de];return _0x3b8b82;},a59_0x2112(_0x41b922,_0x441808);}function a59_0x2394(){const _0x4d60c2=['gatewaySettings','126ocdmSd','generateApiKeys','hash','randomBytes','password','findUnique','status','delete','parse','277218euiBPY','__importDefault','deleteUser','8YyvBne','map','merchantUrl','ACTIVE','shop','defineProperty','2425137WKLTBT','stringify','wallets','findMany','username','55300EHkfNi','updateUser','toString','usdtTrcWallet','usdcPolygonWallet','name','sk_','telegram','createUser','../config/database','pk_','gateways','publicKey','bcryptjs','createdAt','usdtErcWallet','fullName','Username\x20already\x20exists','create','default','crypto','5609547rrZYiR','usdtPolygonWallet','101100uEqkiT','535500uilpJZ','paymentGateways','19607ICUDkM','UserService','getUserById','hex','shopUrl','72WsHwjt','__esModule','telegramId'];a59_0x2394=function(){return _0x4d60c2;};return a59_0x2394();}(function(_0x5664c7,_0x7f8b60){const _0x156b75=a59_0x2112,_0x518237=_0x5664c7();while(!![]){try{const _0x13cd20=parseInt(_0x156b75(0x83))/0x1*(-parseInt(_0x156b75(0x8c))/0x2)+parseInt(_0x156b75(0x9e))/0x3+parseInt(_0x156b75(0x88))/0x4*(parseInt(_0x156b75(0x80))/0x5)+parseInt(_0x156b75(0x95))/0x6+-parseInt(_0x156b75(0xa3))/0x7+-parseInt(_0x156b75(0x98))/0x8*(-parseInt(_0x156b75(0x7e))/0x9)+parseInt(_0x156b75(0x81))/0xa;if(_0x13cd20===_0x7f8b60)break;else _0x518237['push'](_0x518237['shift']());}catch(_0xf2d983){_0x518237['push'](_0x518237['shift']());}}}(a59_0x2394,0x9f3ca));var __importDefault=this&&this[a59_0x56e61a(0x96)]||function(_0x956c40){const _0x23e0ec=a59_0x56e61a;return _0x956c40&&_0x956c40[_0x23e0ec(0x89)]?_0x956c40:{'default':_0x956c40};};Object[a59_0x56e61a(0x9d)](exports,a59_0x56e61a(0x89),{'value':!![]}),exports['UserService']=void 0x0;const bcryptjs_1=__importDefault(require(a59_0x56e61a(0x76))),crypto_1=__importDefault(require(a59_0x56e61a(0x7d))),database_1=__importDefault(require(a59_0x56e61a(0x72)));class UserService{['generateApiKeys'](){const _0x484996=a59_0x56e61a,_0x5f3790=_0x484996(0x73)+crypto_1[_0x484996(0x7c)][_0x484996(0x8f)](0x20)[_0x484996(0xa5)](_0x484996(0x86)),_0x4ea082=_0x484996(0xa9)+crypto_1[_0x484996(0x7c)][_0x484996(0x8f)](0x20)[_0x484996(0xa5)](_0x484996(0x86));return{'publicKey':_0x5f3790,'secretKey':_0x4ea082};}async[a59_0x56e61a(0x71)](_0x17c3c8){const _0x48223c=a59_0x56e61a,{fullName:_0x43b655,username:_0xbf7dc0,password:_0x1e8c7c,telegramId:_0x8b1867,merchantUrl:_0x41df3d,gateways:_0x2fefb3,gatewaySettings:_0x129825,wallets:_0xcebb8}=_0x17c3c8,_0x4261b7=await database_1[_0x48223c(0x7c)][_0x48223c(0x9c)][_0x48223c(0x91)]({'where':{'username':_0xbf7dc0}});if(_0x4261b7)throw new Error(_0x48223c(0x7a));if(_0x8b1867){const _0xec62dd=await database_1[_0x48223c(0x7c)][_0x48223c(0x9c)][_0x48223c(0x91)]({'where':{'telegram':_0x8b1867}});if(_0xec62dd)throw new Error('Telegram\x20username\x20already\x20exists');}const _0x26a332=await bcryptjs_1[_0x48223c(0x7c)][_0x48223c(0x8e)](_0x1e8c7c,0xc),{publicKey:_0xbd6b97,secretKey:_0x5aeec9}=this[_0x48223c(0x8d)](),_0x45c957=await database_1['default'][_0x48223c(0x9c)][_0x48223c(0x7b)]({'data':{'name':_0x43b655,'username':_0xbf7dc0,'password':_0x26a332,'telegram':_0x8b1867,'shopUrl':_0x41df3d,'paymentGateways':_0x2fefb3?JSON[_0x48223c(0x9f)](_0x2fefb3):null,'gatewaySettings':_0x129825?JSON[_0x48223c(0x9f)](_0x129825):null,'usdtPolygonWallet':_0xcebb8?.[_0x48223c(0x7f)]||null,'usdtTrcWallet':_0xcebb8?.[_0x48223c(0xa6)]||null,'usdtErcWallet':_0xcebb8?.['usdtErcWallet']||null,'usdcPolygonWallet':_0xcebb8?.['usdcPolygonWallet']||null,'publicKey':_0xbd6b97,'secretKey':_0x5aeec9,'status':_0x48223c(0x9b)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x45c957['id'],'fullName':_0x45c957[_0x48223c(0xa8)],'username':_0x45c957[_0x48223c(0xa2)],'telegramId':_0x45c957[_0x48223c(0xaa)],'merchantUrl':_0x45c957['shopUrl'],'gateways':_0x45c957[_0x48223c(0x82)]?JSON[_0x48223c(0x94)](_0x45c957[_0x48223c(0x82)]):null,'gatewaySettings':_0x45c957[_0x48223c(0x8b)]?JSON['parse'](_0x45c957[_0x48223c(0x8b)]):null,'publicKey':_0x45c957[_0x48223c(0x75)],'wallets':{'usdtPolygonWallet':_0x45c957[_0x48223c(0x7f)],'usdtTrcWallet':_0x45c957['usdtTrcWallet'],'usdtErcWallet':_0x45c957[_0x48223c(0x78)],'usdcPolygonWallet':_0x45c957['usdcPolygonWallet']},'status':_0x45c957[_0x48223c(0x92)],'createdAt':_0x45c957[_0x48223c(0x77)]};}async['getAllUsers'](){const _0x27ac2a=a59_0x56e61a,_0x3fc4a2=await database_1[_0x27ac2a(0x7c)][_0x27ac2a(0x9c)][_0x27ac2a(0xa1)]({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':'desc'}});return _0x3fc4a2[_0x27ac2a(0x99)](_0x56fc21=>({'id':_0x56fc21['id'],'fullName':_0x56fc21['name'],'username':_0x56fc21[_0x27ac2a(0xa2)],'telegramId':_0x56fc21[_0x27ac2a(0xaa)],'merchantUrl':_0x56fc21[_0x27ac2a(0x87)],'gateways':_0x56fc21[_0x27ac2a(0x82)]?JSON[_0x27ac2a(0x94)](_0x56fc21[_0x27ac2a(0x82)]):null,'gatewaySettings':_0x56fc21[_0x27ac2a(0x8b)]?JSON[_0x27ac2a(0x94)](_0x56fc21[_0x27ac2a(0x8b)]):null,'publicKey':_0x56fc21['publicKey'],'wallets':{'usdtPolygonWallet':_0x56fc21[_0x27ac2a(0x7f)],'usdtTrcWallet':_0x56fc21[_0x27ac2a(0xa6)],'usdtErcWallet':_0x56fc21[_0x27ac2a(0x78)],'usdcPolygonWallet':_0x56fc21['usdcPolygonWallet']},'status':_0x56fc21[_0x27ac2a(0x92)],'createdAt':_0x56fc21[_0x27ac2a(0x77)]}));}async[a59_0x56e61a(0x85)](_0x4ea2ee){const _0x3a8969=a59_0x56e61a,_0x76ae6f=await database_1[_0x3a8969(0x7c)][_0x3a8969(0x9c)][_0x3a8969(0x91)]({'where':{'id':_0x4ea2ee},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x76ae6f)return null;return{'id':_0x76ae6f['id'],'fullName':_0x76ae6f[_0x3a8969(0xa8)],'username':_0x76ae6f[_0x3a8969(0xa2)],'telegramId':_0x76ae6f[_0x3a8969(0xaa)],'merchantUrl':_0x76ae6f[_0x3a8969(0x87)],'gateways':_0x76ae6f['paymentGateways']?JSON[_0x3a8969(0x94)](_0x76ae6f[_0x3a8969(0x82)]):null,'gatewaySettings':_0x76ae6f[_0x3a8969(0x8b)]?JSON['parse'](_0x76ae6f[_0x3a8969(0x8b)]):null,'publicKey':_0x76ae6f[_0x3a8969(0x75)],'wallets':{'usdtPolygonWallet':_0x76ae6f[_0x3a8969(0x7f)],'usdtTrcWallet':_0x76ae6f['usdtTrcWallet'],'usdtErcWallet':_0x76ae6f[_0x3a8969(0x78)],'usdcPolygonWallet':_0x76ae6f[_0x3a8969(0xa7)]},'status':_0x76ae6f['status'],'createdAt':_0x76ae6f['createdAt']};}async[a59_0x56e61a(0xa4)](_0x419a16,_0xc5b3f7){const _0x21bd47=a59_0x56e61a,_0x43c6ce={..._0xc5b3f7};_0xc5b3f7['password']&&(_0x43c6ce[_0x21bd47(0x90)]=await bcryptjs_1['default'][_0x21bd47(0x8e)](_0xc5b3f7[_0x21bd47(0x90)],0xc));_0xc5b3f7[_0x21bd47(0x79)]&&(_0x43c6ce[_0x21bd47(0xa8)]=_0xc5b3f7[_0x21bd47(0x79)],delete _0x43c6ce[_0x21bd47(0x79)]);_0xc5b3f7[_0x21bd47(0x8a)]&&(_0x43c6ce[_0x21bd47(0xaa)]=_0xc5b3f7[_0x21bd47(0x8a)],delete _0x43c6ce[_0x21bd47(0x8a)]);_0xc5b3f7[_0x21bd47(0x9a)]&&(_0x43c6ce[_0x21bd47(0x87)]=_0xc5b3f7[_0x21bd47(0x9a)],delete _0x43c6ce['merchantUrl']);_0xc5b3f7[_0x21bd47(0x74)]&&(_0x43c6ce[_0x21bd47(0x82)]=JSON[_0x21bd47(0x9f)](_0xc5b3f7[_0x21bd47(0x74)]),delete _0x43c6ce[_0x21bd47(0x74)]);_0xc5b3f7[_0x21bd47(0x8b)]&&(_0x43c6ce[_0x21bd47(0x8b)]=JSON['stringify'](_0xc5b3f7['gatewaySettings']),delete _0x43c6ce['gatewaySettings']);_0xc5b3f7[_0x21bd47(0xa0)]&&(_0xc5b3f7[_0x21bd47(0xa0)]['usdtPolygonWallet']!==undefined&&(_0x43c6ce[_0x21bd47(0x7f)]=_0xc5b3f7[_0x21bd47(0xa0)]['usdtPolygonWallet']||null),_0xc5b3f7[_0x21bd47(0xa0)][_0x21bd47(0xa6)]!==undefined&&(_0x43c6ce['usdtTrcWallet']=_0xc5b3f7['wallets']['usdtTrcWallet']||null),_0xc5b3f7['wallets'][_0x21bd47(0x78)]!==undefined&&(_0x43c6ce[_0x21bd47(0x78)]=_0xc5b3f7[_0x21bd47(0xa0)][_0x21bd47(0x78)]||null),_0xc5b3f7[_0x21bd47(0xa0)][_0x21bd47(0xa7)]!==undefined&&(_0x43c6ce[_0x21bd47(0xa7)]=_0xc5b3f7[_0x21bd47(0xa0)]['usdcPolygonWallet']||null),delete _0x43c6ce[_0x21bd47(0xa0)]);const _0x5ea028=await database_1['default'][_0x21bd47(0x9c)]['update']({'where':{'id':_0x419a16},'data':_0x43c6ce,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x5ea028['id'],'fullName':_0x5ea028[_0x21bd47(0xa8)],'username':_0x5ea028[_0x21bd47(0xa2)],'telegramId':_0x5ea028[_0x21bd47(0xaa)],'merchantUrl':_0x5ea028['shopUrl'],'gateways':_0x5ea028['paymentGateways']?JSON[_0x21bd47(0x94)](_0x5ea028[_0x21bd47(0x82)]):null,'gatewaySettings':_0x5ea028[_0x21bd47(0x8b)]?JSON[_0x21bd47(0x94)](_0x5ea028[_0x21bd47(0x8b)]):null,'publicKey':_0x5ea028['publicKey'],'wallets':{'usdtPolygonWallet':_0x5ea028[_0x21bd47(0x7f)],'usdtTrcWallet':_0x5ea028[_0x21bd47(0xa6)],'usdtErcWallet':_0x5ea028[_0x21bd47(0x78)],'usdcPolygonWallet':_0x5ea028[_0x21bd47(0xa7)]},'status':_0x5ea028['status'],'createdAt':_0x5ea028[_0x21bd47(0x77)]};}async[a59_0x56e61a(0x97)](_0x20f431){const _0x4961fa=a59_0x56e61a;await database_1[_0x4961fa(0x7c)][_0x4961fa(0x9c)][_0x4961fa(0x93)]({'where':{'id':_0x20f431}});}}exports[a59_0x56e61a(0x84)]=UserService;