'use strict';const a85_0x3a55a3=a85_0x5dd9;(function(_0x5c0aa8,_0x3d8bac){const _0x46dbe7=a85_0x5dd9,_0x4273f9=_0x5c0aa8();while(!![]){try{const _0x287c19=-parseInt(_0x46dbe7(0x1c7))/0x1+-parseInt(_0x46dbe7(0x1db))/0x2*(-parseInt(_0x46dbe7(0x1d3))/0x3)+parseInt(_0x46dbe7(0x1b8))/0x4*(-parseInt(_0x46dbe7(0x1b9))/0x5)+-parseInt(_0x46dbe7(0x1b4))/0x6*(parseInt(_0x46dbe7(0x1be))/0x7)+parseInt(_0x46dbe7(0x1a5))/0x8*(-parseInt(_0x46dbe7(0x1ae))/0x9)+parseInt(_0x46dbe7(0x1d5))/0xa*(-parseInt(_0x46dbe7(0x1de))/0xb)+parseInt(_0x46dbe7(0x1b3))/0xc;if(_0x287c19===_0x3d8bac)break;else _0x4273f9['push'](_0x4273f9['shift']());}catch(_0x542c35){_0x4273f9['push'](_0x4273f9['shift']());}}}(a85_0x719e,0x7f9f3));var __importDefault=this&&this[a85_0x3a55a3(0x1b2)]||function(_0x254380){const _0x495ac2=a85_0x3a55a3;return _0x254380&&_0x254380[_0x495ac2(0x1a7)]?_0x254380:{'default':_0x254380};};function a85_0x5dd9(_0x5b3783,_0x967d58){_0x5b3783=_0x5b3783-0x1a5;const _0x719e6c=a85_0x719e();let _0x5dd970=_0x719e6c[_0x5b3783];return _0x5dd970;}Object['defineProperty'](exports,a85_0x3a55a3(0x1a7),{'value':!![]}),exports['UserService']=void 0x0;const bcryptjs_1=__importDefault(require(a85_0x3a55a3(0x1da))),crypto_1=__importDefault(require(a85_0x3a55a3(0x1cc))),database_1=__importDefault(require(a85_0x3a55a3(0x1ab)));class UserService{['generateApiKeys'](){const _0x383ceb=a85_0x3a55a3,_0x19e84a=_0x383ceb(0x1dc)+crypto_1[_0x383ceb(0x1ac)]['randomBytes'](0x20)[_0x383ceb(0x1a9)](_0x383ceb(0x1c8)),_0x1e2b80='sk_'+crypto_1[_0x383ceb(0x1ac)][_0x383ceb(0x1d6)](0x20)['toString'](_0x383ceb(0x1c8));return{'publicKey':_0x19e84a,'secretKey':_0x1e2b80};}async[a85_0x3a55a3(0x1aa)](_0x51f7ee){const _0x5add2c=a85_0x3a55a3,{fullName:_0x20e825,username:_0xaefc2d,password:_0x439a9c,telegramId:_0x2b59bb,merchantUrl:_0x5e6bb5,gateways:_0x22fd35,gatewaySettings:_0x1fe0d6,wallets:_0x47775b}=_0x51f7ee,_0x4d5fec=await database_1[_0x5add2c(0x1ac)][_0x5add2c(0x1a8)][_0x5add2c(0x1d9)]({'where':{'username':_0xaefc2d}});if(_0x4d5fec)throw new Error(_0x5add2c(0x1bf));if(_0x2b59bb){const _0x544c78=await database_1['default'][_0x5add2c(0x1a8)][_0x5add2c(0x1d9)]({'where':{'telegram':_0x2b59bb}});if(_0x544c78)throw new Error('Telegram\x20username\x20already\x20exists');}const _0x47c756=await bcryptjs_1[_0x5add2c(0x1ac)][_0x5add2c(0x1ca)](_0x439a9c,0xc),{publicKey:_0x3fbf30,secretKey:_0x2f015f}=this[_0x5add2c(0x1b1)](),_0x1e2ae1=await database_1[_0x5add2c(0x1ac)][_0x5add2c(0x1a8)][_0x5add2c(0x1df)]({'data':{'name':_0x20e825,'username':_0xaefc2d,'password':_0x47c756,'telegram':_0x2b59bb,'shopUrl':_0x5e6bb5,'paymentGateways':_0x22fd35?JSON[_0x5add2c(0x1dd)](_0x22fd35):null,'gatewaySettings':_0x1fe0d6?JSON[_0x5add2c(0x1dd)](_0x1fe0d6):null,'usdtPolygonWallet':_0x47775b?.[_0x5add2c(0x1b6)]||null,'usdtTrcWallet':_0x47775b?.[_0x5add2c(0x1ad)]||null,'usdtErcWallet':_0x47775b?.[_0x5add2c(0x1c5)]||null,'usdcPolygonWallet':_0x47775b?.[_0x5add2c(0x1d4)]||null,'publicKey':_0x3fbf30,'secretKey':_0x2f015f,'status':_0x5add2c(0x1c1)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x1e2ae1['id'],'fullName':_0x1e2ae1[_0x5add2c(0x1b5)],'username':_0x1e2ae1[_0x5add2c(0x1d8)],'telegramId':_0x1e2ae1['telegram'],'merchantUrl':_0x1e2ae1[_0x5add2c(0x1b0)],'gateways':_0x1e2ae1[_0x5add2c(0x1d1)]?JSON[_0x5add2c(0x1a6)](_0x1e2ae1['paymentGateways']):null,'gatewaySettings':_0x1e2ae1[_0x5add2c(0x1cb)]?JSON[_0x5add2c(0x1a6)](_0x1e2ae1[_0x5add2c(0x1cb)]):null,'publicKey':_0x1e2ae1[_0x5add2c(0x1d7)],'wallets':{'usdtPolygonWallet':_0x1e2ae1['usdtPolygonWallet'],'usdtTrcWallet':_0x1e2ae1[_0x5add2c(0x1ad)],'usdtErcWallet':_0x1e2ae1[_0x5add2c(0x1c5)],'usdcPolygonWallet':_0x1e2ae1['usdcPolygonWallet']},'status':_0x1e2ae1[_0x5add2c(0x1cd)],'createdAt':_0x1e2ae1[_0x5add2c(0x1b7)]};}async[a85_0x3a55a3(0x1c9)](){const _0x177d31=a85_0x3a55a3,_0x196882=await database_1[_0x177d31(0x1ac)][_0x177d31(0x1a8)][_0x177d31(0x1c0)]({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':'desc'}});return _0x196882[_0x177d31(0x1ba)](_0x5a1fe5=>({'id':_0x5a1fe5['id'],'fullName':_0x5a1fe5[_0x177d31(0x1b5)],'username':_0x5a1fe5[_0x177d31(0x1d8)],'telegramId':_0x5a1fe5[_0x177d31(0x1c4)],'merchantUrl':_0x5a1fe5[_0x177d31(0x1b0)],'gateways':_0x5a1fe5[_0x177d31(0x1d1)]?JSON[_0x177d31(0x1a6)](_0x5a1fe5[_0x177d31(0x1d1)]):null,'gatewaySettings':_0x5a1fe5[_0x177d31(0x1cb)]?JSON['parse'](_0x5a1fe5[_0x177d31(0x1cb)]):null,'publicKey':_0x5a1fe5[_0x177d31(0x1d7)],'wallets':{'usdtPolygonWallet':_0x5a1fe5[_0x177d31(0x1b6)],'usdtTrcWallet':_0x5a1fe5[_0x177d31(0x1ad)],'usdtErcWallet':_0x5a1fe5[_0x177d31(0x1c5)],'usdcPolygonWallet':_0x5a1fe5['usdcPolygonWallet']},'status':_0x5a1fe5['status'],'createdAt':_0x5a1fe5[_0x177d31(0x1b7)]}));}async[a85_0x3a55a3(0x1bc)](_0x55f0d7){const _0x3d922b=a85_0x3a55a3,_0x3c25ed=await database_1[_0x3d922b(0x1ac)][_0x3d922b(0x1a8)][_0x3d922b(0x1d9)]({'where':{'id':_0x55f0d7},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x3c25ed)return null;return{'id':_0x3c25ed['id'],'fullName':_0x3c25ed['name'],'username':_0x3c25ed[_0x3d922b(0x1d8)],'telegramId':_0x3c25ed[_0x3d922b(0x1c4)],'merchantUrl':_0x3c25ed['shopUrl'],'gateways':_0x3c25ed[_0x3d922b(0x1d1)]?JSON[_0x3d922b(0x1a6)](_0x3c25ed[_0x3d922b(0x1d1)]):null,'gatewaySettings':_0x3c25ed[_0x3d922b(0x1cb)]?JSON['parse'](_0x3c25ed[_0x3d922b(0x1cb)]):null,'publicKey':_0x3c25ed[_0x3d922b(0x1d7)],'wallets':{'usdtPolygonWallet':_0x3c25ed[_0x3d922b(0x1b6)],'usdtTrcWallet':_0x3c25ed['usdtTrcWallet'],'usdtErcWallet':_0x3c25ed['usdtErcWallet'],'usdcPolygonWallet':_0x3c25ed[_0x3d922b(0x1d4)]},'status':_0x3c25ed[_0x3d922b(0x1cd)],'createdAt':_0x3c25ed[_0x3d922b(0x1b7)]};}async[a85_0x3a55a3(0x1bd)](_0x12486e,_0x7e60fd){const _0x4c83da=a85_0x3a55a3,_0x3578dd={..._0x7e60fd};_0x7e60fd[_0x4c83da(0x1c6)]&&(_0x3578dd['password']=await bcryptjs_1[_0x4c83da(0x1ac)][_0x4c83da(0x1ca)](_0x7e60fd[_0x4c83da(0x1c6)],0xc));_0x7e60fd[_0x4c83da(0x1cf)]&&(_0x3578dd[_0x4c83da(0x1b5)]=_0x7e60fd[_0x4c83da(0x1cf)],delete _0x3578dd['fullName']);_0x7e60fd['telegramId']&&(_0x3578dd[_0x4c83da(0x1c4)]=_0x7e60fd[_0x4c83da(0x1c3)],delete _0x3578dd[_0x4c83da(0x1c3)]);_0x7e60fd[_0x4c83da(0x1c2)]&&(_0x3578dd[_0x4c83da(0x1b0)]=_0x7e60fd['merchantUrl'],delete _0x3578dd[_0x4c83da(0x1c2)]);_0x7e60fd['gateways']&&(_0x3578dd[_0x4c83da(0x1d1)]=JSON[_0x4c83da(0x1dd)](_0x7e60fd[_0x4c83da(0x1bb)]),delete _0x3578dd['gateways']);_0x7e60fd['gatewaySettings']&&(_0x3578dd['gatewaySettings']=JSON[_0x4c83da(0x1dd)](_0x7e60fd[_0x4c83da(0x1cb)]),delete _0x3578dd['gatewaySettings']);_0x7e60fd[_0x4c83da(0x1d0)]&&(_0x7e60fd[_0x4c83da(0x1d0)][_0x4c83da(0x1b6)]!==undefined&&(_0x3578dd[_0x4c83da(0x1b6)]=_0x7e60fd['wallets']['usdtPolygonWallet']||null),_0x7e60fd[_0x4c83da(0x1d0)]['usdtTrcWallet']!==undefined&&(_0x3578dd[_0x4c83da(0x1ad)]=_0x7e60fd['wallets'][_0x4c83da(0x1ad)]||null),_0x7e60fd[_0x4c83da(0x1d0)][_0x4c83da(0x1c5)]!==undefined&&(_0x3578dd['usdtErcWallet']=_0x7e60fd[_0x4c83da(0x1d0)]['usdtErcWallet']||null),_0x7e60fd['wallets']['usdcPolygonWallet']!==undefined&&(_0x3578dd[_0x4c83da(0x1d4)]=_0x7e60fd[_0x4c83da(0x1d0)][_0x4c83da(0x1d4)]||null),delete _0x3578dd[_0x4c83da(0x1d0)]);const _0x36167a=await database_1['default'][_0x4c83da(0x1a8)][_0x4c83da(0x1d2)]({'where':{'id':_0x12486e},'data':_0x3578dd,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x36167a['id'],'fullName':_0x36167a[_0x4c83da(0x1b5)],'username':_0x36167a[_0x4c83da(0x1d8)],'telegramId':_0x36167a['telegram'],'merchantUrl':_0x36167a[_0x4c83da(0x1b0)],'gateways':_0x36167a[_0x4c83da(0x1d1)]?JSON['parse'](_0x36167a[_0x4c83da(0x1d1)]):null,'gatewaySettings':_0x36167a['gatewaySettings']?JSON[_0x4c83da(0x1a6)](_0x36167a[_0x4c83da(0x1cb)]):null,'publicKey':_0x36167a[_0x4c83da(0x1d7)],'wallets':{'usdtPolygonWallet':_0x36167a['usdtPolygonWallet'],'usdtTrcWallet':_0x36167a[_0x4c83da(0x1ad)],'usdtErcWallet':_0x36167a[_0x4c83da(0x1c5)],'usdcPolygonWallet':_0x36167a[_0x4c83da(0x1d4)]},'status':_0x36167a[_0x4c83da(0x1cd)],'createdAt':_0x36167a[_0x4c83da(0x1b7)]};}async['deleteUser'](_0x41ead7){const _0x19ee94=a85_0x3a55a3;await database_1[_0x19ee94(0x1ac)][_0x19ee94(0x1a8)][_0x19ee94(0x1ce)]({'where':{'id':_0x41ead7}});}}function a85_0x719e(){const _0x2e5c48=['gateways','getUserById','updateUser','2129673McZNHf','Username\x20already\x20exists','findMany','ACTIVE','merchantUrl','telegramId','telegram','usdtErcWallet','password','413365IOnJDV','hex','getAllUsers','hash','gatewaySettings','crypto','status','delete','fullName','wallets','paymentGateways','update','3ndAUwi','usdcPolygonWallet','4336480yAquDI','randomBytes','publicKey','username','findUnique','bcryptjs','969574ybCdoz','pk_','stringify','11zKLmbP','create','27976HibgTy','parse','__esModule','shop','toString','createUser','../config/database','default','usdtTrcWallet','1611zNYbwv','UserService','shopUrl','generateApiKeys','__importDefault','32595552fZHPad','12tOrXur','name','usdtPolygonWallet','createdAt','170540wdmhsn','70iNQvgG','map'];a85_0x719e=function(){return _0x2e5c48;};return a85_0x719e();}exports[a85_0x3a55a3(0x1af)]=UserService;