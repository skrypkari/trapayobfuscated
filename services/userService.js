'use strict';const a63_0x305a58=a63_0x8de9;(function(_0x3b1382,_0x4d691e){const _0x4d6c7=a63_0x8de9,_0x229b19=_0x3b1382();while(!![]){try{const _0x13dea0=-parseInt(_0x4d6c7(0xfe))/0x1*(-parseInt(_0x4d6c7(0xf9))/0x2)+parseInt(_0x4d6c7(0x126))/0x3+-parseInt(_0x4d6c7(0x11b))/0x4+parseInt(_0x4d6c7(0x120))/0x5*(-parseInt(_0x4d6c7(0x104))/0x6)+-parseInt(_0x4d6c7(0x116))/0x7*(-parseInt(_0x4d6c7(0x123))/0x8)+parseInt(_0x4d6c7(0x128))/0x9*(-parseInt(_0x4d6c7(0x122))/0xa)+-parseInt(_0x4d6c7(0x107))/0xb;if(_0x13dea0===_0x4d691e)break;else _0x229b19['push'](_0x229b19['shift']());}catch(_0xcef3bc){_0x229b19['push'](_0x229b19['shift']());}}}(a63_0x3e98,0x95d6e));var __importDefault=this&&this[a63_0x305a58(0xfd)]||function(_0x32c733){const _0x38df28=a63_0x305a58;return _0x32c733&&_0x32c733[_0x38df28(0x106)]?_0x32c733:{'default':_0x32c733};};Object[a63_0x305a58(0x131)](exports,a63_0x305a58(0x106),{'value':!![]}),exports[a63_0x305a58(0x11e)]=void 0x0;function a63_0x8de9(_0x1759aa,_0x2a98f5){const _0x3e9879=a63_0x3e98();return a63_0x8de9=function(_0x8de91b,_0x2a4912){_0x8de91b=_0x8de91b-0xf8;let _0x592fac=_0x3e9879[_0x8de91b];return _0x592fac;},a63_0x8de9(_0x1759aa,_0x2a98f5);}const bcryptjs_1=__importDefault(require(a63_0x305a58(0x133))),crypto_1=__importDefault(require('crypto')),database_1=__importDefault(require(a63_0x305a58(0x102)));class UserService{[a63_0x305a58(0x111)](){const _0x13ba99=a63_0x305a58,_0x395270=_0x13ba99(0xfa)+crypto_1['default']['randomBytes'](0x20)[_0x13ba99(0x125)]('hex'),_0x5dd8af=_0x13ba99(0x10d)+crypto_1[_0x13ba99(0x10e)][_0x13ba99(0x10f)](0x20)[_0x13ba99(0x125)](_0x13ba99(0x10c));return{'publicKey':_0x395270,'secretKey':_0x5dd8af};}async['createUser'](_0x5110ed){const _0x5f10be=a63_0x305a58,{fullName:_0xacd87b,username:_0x1b5734,password:_0xc0dcb9,telegramId:_0x538aa5,merchantUrl:_0x4a21d6,gateways:_0x5ac7aa,gatewaySettings:_0x1df62e,wallets:_0x403891}=_0x5110ed,_0x147451=await database_1[_0x5f10be(0x10e)][_0x5f10be(0x114)][_0x5f10be(0x132)]({'where':{'username':_0x1b5734}});if(_0x147451)throw new Error(_0x5f10be(0xf8));if(_0x538aa5){const _0x31d0e0=await database_1[_0x5f10be(0x10e)][_0x5f10be(0x114)][_0x5f10be(0x132)]({'where':{'telegram':_0x538aa5}});if(_0x31d0e0)throw new Error(_0x5f10be(0x12e));}const _0x10e4d7=await bcryptjs_1[_0x5f10be(0x10e)]['hash'](_0xc0dcb9,0xc),{publicKey:_0x3d8e49,secretKey:_0x44573f}=this[_0x5f10be(0x111)](),_0x254f95=await database_1[_0x5f10be(0x10e)]['shop'][_0x5f10be(0x119)]({'data':{'name':_0xacd87b,'username':_0x1b5734,'password':_0x10e4d7,'telegram':_0x538aa5,'shopUrl':_0x4a21d6,'paymentGateways':_0x5ac7aa?JSON[_0x5f10be(0x10b)](_0x5ac7aa):null,'gatewaySettings':_0x1df62e?JSON[_0x5f10be(0x10b)](_0x1df62e):null,'usdtPolygonWallet':_0x403891?.['usdtPolygonWallet']||null,'usdtTrcWallet':_0x403891?.['usdtTrcWallet']||null,'usdtErcWallet':_0x403891?.[_0x5f10be(0x12d)]||null,'usdcPolygonWallet':_0x403891?.['usdcPolygonWallet']||null,'publicKey':_0x3d8e49,'secretKey':_0x44573f,'status':_0x5f10be(0x11f)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x254f95['id'],'fullName':_0x254f95[_0x5f10be(0xfb)],'username':_0x254f95['username'],'telegramId':_0x254f95[_0x5f10be(0x124)],'merchantUrl':_0x254f95[_0x5f10be(0x117)],'gateways':_0x254f95['paymentGateways']?JSON[_0x5f10be(0x129)](_0x254f95[_0x5f10be(0x113)]):null,'gatewaySettings':_0x254f95['gatewaySettings']?JSON[_0x5f10be(0x129)](_0x254f95[_0x5f10be(0x118)]):null,'publicKey':_0x254f95[_0x5f10be(0x108)],'wallets':{'usdtPolygonWallet':_0x254f95[_0x5f10be(0x110)],'usdtTrcWallet':_0x254f95[_0x5f10be(0x105)],'usdtErcWallet':_0x254f95[_0x5f10be(0x12d)],'usdcPolygonWallet':_0x254f95[_0x5f10be(0x12c)]},'status':_0x254f95[_0x5f10be(0x112)],'createdAt':_0x254f95[_0x5f10be(0x127)]};}async[a63_0x305a58(0xff)](){const _0xff0bce=a63_0x305a58,_0x45ca9b=await database_1[_0xff0bce(0x10e)]['shop'][_0xff0bce(0x11d)]({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':_0xff0bce(0x12b)}});return _0x45ca9b['map'](_0x369f59=>({'id':_0x369f59['id'],'fullName':_0x369f59['name'],'username':_0x369f59[_0xff0bce(0x121)],'telegramId':_0x369f59['telegram'],'merchantUrl':_0x369f59[_0xff0bce(0x117)],'gateways':_0x369f59[_0xff0bce(0x113)]?JSON[_0xff0bce(0x129)](_0x369f59[_0xff0bce(0x113)]):null,'gatewaySettings':_0x369f59[_0xff0bce(0x118)]?JSON[_0xff0bce(0x129)](_0x369f59[_0xff0bce(0x118)]):null,'publicKey':_0x369f59[_0xff0bce(0x108)],'wallets':{'usdtPolygonWallet':_0x369f59[_0xff0bce(0x110)],'usdtTrcWallet':_0x369f59[_0xff0bce(0x105)],'usdtErcWallet':_0x369f59[_0xff0bce(0x12d)],'usdcPolygonWallet':_0x369f59[_0xff0bce(0x12c)]},'status':_0x369f59['status'],'createdAt':_0x369f59['createdAt']}));}async[a63_0x305a58(0x130)](_0x558e4b){const _0x428131=a63_0x305a58,_0x3083d2=await database_1[_0x428131(0x10e)]['shop'][_0x428131(0x132)]({'where':{'id':_0x558e4b},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x3083d2)return null;return{'id':_0x3083d2['id'],'fullName':_0x3083d2[_0x428131(0xfb)],'username':_0x3083d2[_0x428131(0x121)],'telegramId':_0x3083d2[_0x428131(0x124)],'merchantUrl':_0x3083d2[_0x428131(0x117)],'gateways':_0x3083d2['paymentGateways']?JSON[_0x428131(0x129)](_0x3083d2[_0x428131(0x113)]):null,'gatewaySettings':_0x3083d2[_0x428131(0x118)]?JSON[_0x428131(0x129)](_0x3083d2[_0x428131(0x118)]):null,'publicKey':_0x3083d2[_0x428131(0x108)],'wallets':{'usdtPolygonWallet':_0x3083d2['usdtPolygonWallet'],'usdtTrcWallet':_0x3083d2[_0x428131(0x105)],'usdtErcWallet':_0x3083d2['usdtErcWallet'],'usdcPolygonWallet':_0x3083d2['usdcPolygonWallet']},'status':_0x3083d2[_0x428131(0x112)],'createdAt':_0x3083d2[_0x428131(0x127)]};}async[a63_0x305a58(0x12f)](_0x52555d,_0x44dd96){const _0x170b83=a63_0x305a58,_0x46a8b6={..._0x44dd96};_0x44dd96[_0x170b83(0x12a)]&&(_0x46a8b6[_0x170b83(0x12a)]=await bcryptjs_1[_0x170b83(0x10e)][_0x170b83(0x115)](_0x44dd96[_0x170b83(0x12a)],0xc));_0x44dd96[_0x170b83(0x10a)]&&(_0x46a8b6[_0x170b83(0xfb)]=_0x44dd96[_0x170b83(0x10a)],delete _0x46a8b6[_0x170b83(0x10a)]);_0x44dd96[_0x170b83(0xfc)]&&(_0x46a8b6[_0x170b83(0x124)]=_0x44dd96[_0x170b83(0xfc)],delete _0x46a8b6[_0x170b83(0xfc)]);_0x44dd96[_0x170b83(0x101)]&&(_0x46a8b6[_0x170b83(0x117)]=_0x44dd96[_0x170b83(0x101)],delete _0x46a8b6['merchantUrl']);_0x44dd96[_0x170b83(0x11a)]&&(_0x46a8b6[_0x170b83(0x113)]=JSON[_0x170b83(0x10b)](_0x44dd96['gateways']),delete _0x46a8b6[_0x170b83(0x11a)]);_0x44dd96[_0x170b83(0x118)]&&(_0x46a8b6[_0x170b83(0x118)]=JSON['stringify'](_0x44dd96[_0x170b83(0x118)]),delete _0x46a8b6[_0x170b83(0x118)]);_0x44dd96[_0x170b83(0x11c)]&&(_0x44dd96[_0x170b83(0x11c)]['usdtPolygonWallet']!==undefined&&(_0x46a8b6[_0x170b83(0x110)]=_0x44dd96[_0x170b83(0x11c)][_0x170b83(0x110)]||null),_0x44dd96[_0x170b83(0x11c)][_0x170b83(0x105)]!==undefined&&(_0x46a8b6[_0x170b83(0x105)]=_0x44dd96[_0x170b83(0x11c)][_0x170b83(0x105)]||null),_0x44dd96[_0x170b83(0x11c)]['usdtErcWallet']!==undefined&&(_0x46a8b6[_0x170b83(0x12d)]=_0x44dd96[_0x170b83(0x11c)][_0x170b83(0x12d)]||null),_0x44dd96[_0x170b83(0x11c)][_0x170b83(0x12c)]!==undefined&&(_0x46a8b6['usdcPolygonWallet']=_0x44dd96[_0x170b83(0x11c)][_0x170b83(0x12c)]||null),delete _0x46a8b6[_0x170b83(0x11c)]);const _0x171cee=await database_1[_0x170b83(0x10e)][_0x170b83(0x114)][_0x170b83(0x103)]({'where':{'id':_0x52555d},'data':_0x46a8b6,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x171cee['id'],'fullName':_0x171cee[_0x170b83(0xfb)],'username':_0x171cee[_0x170b83(0x121)],'telegramId':_0x171cee[_0x170b83(0x124)],'merchantUrl':_0x171cee[_0x170b83(0x117)],'gateways':_0x171cee[_0x170b83(0x113)]?JSON['parse'](_0x171cee[_0x170b83(0x113)]):null,'gatewaySettings':_0x171cee[_0x170b83(0x118)]?JSON[_0x170b83(0x129)](_0x171cee['gatewaySettings']):null,'publicKey':_0x171cee['publicKey'],'wallets':{'usdtPolygonWallet':_0x171cee['usdtPolygonWallet'],'usdtTrcWallet':_0x171cee[_0x170b83(0x105)],'usdtErcWallet':_0x171cee[_0x170b83(0x12d)],'usdcPolygonWallet':_0x171cee[_0x170b83(0x12c)]},'status':_0x171cee['status'],'createdAt':_0x171cee[_0x170b83(0x127)]};}async[a63_0x305a58(0x100)](_0x190138){const _0xef9b26=a63_0x305a58;await database_1['default'][_0xef9b26(0x114)][_0xef9b26(0x109)]({'where':{'id':_0x190138}});}}function a63_0x3e98(){const _0x688add=['__esModule','9737651JLIZxs','publicKey','delete','fullName','stringify','hex','sk_','default','randomBytes','usdtPolygonWallet','generateApiKeys','status','paymentGateways','shop','hash','2803969CfKvgE','shopUrl','gatewaySettings','create','gateways','2209944BtDJPw','wallets','findMany','UserService','ACTIVE','5pWmRHj','username','2140GGpXZO','16WuCNji','telegram','toString','3301041XAlGUk','createdAt','5229YfOgib','parse','password','desc','usdcPolygonWallet','usdtErcWallet','Telegram\x20username\x20already\x20exists','updateUser','getUserById','defineProperty','findUnique','bcryptjs','Username\x20already\x20exists','549174ikNYZI','pk_','name','telegramId','__importDefault','1PDSYZS','getAllUsers','deleteUser','merchantUrl','../config/database','update','1590nAwzIQ','usdtTrcWallet'];a63_0x3e98=function(){return _0x688add;};return a63_0x3e98();}exports[a63_0x305a58(0x11e)]=UserService;