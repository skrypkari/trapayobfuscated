'use strict';const a80_0x4dc0a7=a80_0x1705;(function(_0x1168db,_0x3d6d5a){const _0x16bde2=a80_0x1705,_0x5d68d5=_0x1168db();while(!![]){try{const _0x5f4137=parseInt(_0x16bde2(0x1bf))/0x1+parseInt(_0x16bde2(0x1a5))/0x2*(parseInt(_0x16bde2(0x19f))/0x3)+parseInt(_0x16bde2(0x1a4))/0x4*(-parseInt(_0x16bde2(0x1ca))/0x5)+parseInt(_0x16bde2(0x1ae))/0x6*(-parseInt(_0x16bde2(0x1d3))/0x7)+-parseInt(_0x16bde2(0x19d))/0x8+parseInt(_0x16bde2(0x197))/0x9*(parseInt(_0x16bde2(0x1c5))/0xa)+parseInt(_0x16bde2(0x1be))/0xb;if(_0x5f4137===_0x3d6d5a)break;else _0x5d68d5['push'](_0x5d68d5['shift']());}catch(_0x3e452c){_0x5d68d5['push'](_0x5d68d5['shift']());}}}(a80_0x38e8,0x61d15));function a80_0x1705(_0x471c40,_0x146c2c){_0x471c40=_0x471c40-0x197;const _0x38e87f=a80_0x38e8();let _0x1705b3=_0x38e87f[_0x471c40];return _0x1705b3;}function a80_0x38e8(){const _0x2b13ee=['publicKey','getAllUsers','2118380YuCfaD','395670oKapfe','createdAt','Username\x20already\x20exists','Telegram\x20username\x20already\x20exists','bcryptjs','parse','10pAXkoj','status','name','usdtTrcWallet','generateApiKeys','890gNAXVw','desc','randomBytes','getUserById','ACTIVE','shopUrl','defineProperty','findMany','hex','7OYKDZB','username','117783NAhptp','hash','findUnique','create','gateways','__esModule','5064464VaAwMU','createUser','2249793idgchd','__importDefault','telegramId','pk_','gatewaySettings','5164jooIYk','2gMYIFG','deleteUser','paymentGateways','sk_','usdtPolygonWallet','update','default','delete','stringify','526506WFlvwB','updateUser','telegram','merchantUrl','shop','fullName','../config/database','usdtErcWallet','UserService','toString','password','wallets','usdcPolygonWallet','map'];a80_0x38e8=function(){return _0x2b13ee;};return a80_0x38e8();}var __importDefault=this&&this[a80_0x4dc0a7(0x1a0)]||function(_0x11497b){const _0xe261f4=a80_0x4dc0a7;return _0x11497b&&_0x11497b[_0xe261f4(0x19c)]?_0x11497b:{'default':_0x11497b};};Object[a80_0x4dc0a7(0x1d0)](exports,a80_0x4dc0a7(0x19c),{'value':!![]}),exports[a80_0x4dc0a7(0x1b6)]=void 0x0;const bcryptjs_1=__importDefault(require(a80_0x4dc0a7(0x1c3))),crypto_1=__importDefault(require('crypto')),database_1=__importDefault(require(a80_0x4dc0a7(0x1b4)));class UserService{[a80_0x4dc0a7(0x1c9)](){const _0x4cc27b=a80_0x4dc0a7,_0x9758a2=_0x4cc27b(0x1a2)+crypto_1[_0x4cc27b(0x1ab)][_0x4cc27b(0x1cc)](0x20)[_0x4cc27b(0x1b7)](_0x4cc27b(0x1d2)),_0x5286c9=_0x4cc27b(0x1a8)+crypto_1[_0x4cc27b(0x1ab)][_0x4cc27b(0x1cc)](0x20)[_0x4cc27b(0x1b7)](_0x4cc27b(0x1d2));return{'publicKey':_0x9758a2,'secretKey':_0x5286c9};}async[a80_0x4dc0a7(0x19e)](_0x594879){const _0x55941d=a80_0x4dc0a7,{fullName:_0x35d0dd,username:_0x42b436,password:_0x19b70f,telegramId:_0x171d5a,merchantUrl:_0x1674b9,gateways:_0x13c890,gatewaySettings:_0xf8c90f,wallets:_0x2eaf6b}=_0x594879,_0x59e82d=await database_1['default'][_0x55941d(0x1b2)][_0x55941d(0x199)]({'where':{'username':_0x42b436}});if(_0x59e82d)throw new Error(_0x55941d(0x1c1));if(_0x171d5a){const _0x39432a=await database_1['default'][_0x55941d(0x1b2)][_0x55941d(0x199)]({'where':{'telegram':_0x171d5a}});if(_0x39432a)throw new Error(_0x55941d(0x1c2));}const _0x417cd5=await bcryptjs_1[_0x55941d(0x1ab)]['hash'](_0x19b70f,0xc),{publicKey:_0x14f469,secretKey:_0x4c5b33}=this[_0x55941d(0x1c9)](),_0xbdd28e=await database_1[_0x55941d(0x1ab)][_0x55941d(0x1b2)][_0x55941d(0x19a)]({'data':{'name':_0x35d0dd,'username':_0x42b436,'password':_0x417cd5,'telegram':_0x171d5a,'shopUrl':_0x1674b9,'paymentGateways':_0x13c890?JSON[_0x55941d(0x1ad)](_0x13c890):null,'gatewaySettings':_0xf8c90f?JSON[_0x55941d(0x1ad)](_0xf8c90f):null,'usdtPolygonWallet':_0x2eaf6b?.[_0x55941d(0x1a9)]||null,'usdtTrcWallet':_0x2eaf6b?.[_0x55941d(0x1c8)]||null,'usdtErcWallet':_0x2eaf6b?.[_0x55941d(0x1b5)]||null,'usdcPolygonWallet':_0x2eaf6b?.['usdcPolygonWallet']||null,'publicKey':_0x14f469,'secretKey':_0x4c5b33,'status':_0x55941d(0x1ce)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0xbdd28e['id'],'fullName':_0xbdd28e[_0x55941d(0x1c7)],'username':_0xbdd28e[_0x55941d(0x1d4)],'telegramId':_0xbdd28e[_0x55941d(0x1b0)],'merchantUrl':_0xbdd28e['shopUrl'],'gateways':_0xbdd28e[_0x55941d(0x1a7)]?JSON[_0x55941d(0x1c4)](_0xbdd28e[_0x55941d(0x1a7)]):null,'gatewaySettings':_0xbdd28e[_0x55941d(0x1a3)]?JSON['parse'](_0xbdd28e[_0x55941d(0x1a3)]):null,'publicKey':_0xbdd28e[_0x55941d(0x1bc)],'wallets':{'usdtPolygonWallet':_0xbdd28e[_0x55941d(0x1a9)],'usdtTrcWallet':_0xbdd28e['usdtTrcWallet'],'usdtErcWallet':_0xbdd28e[_0x55941d(0x1b5)],'usdcPolygonWallet':_0xbdd28e[_0x55941d(0x1ba)]},'status':_0xbdd28e['status'],'createdAt':_0xbdd28e[_0x55941d(0x1c0)]};}async[a80_0x4dc0a7(0x1bd)](){const _0x2a56f1=a80_0x4dc0a7,_0x7003ce=await database_1[_0x2a56f1(0x1ab)][_0x2a56f1(0x1b2)][_0x2a56f1(0x1d1)]({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':_0x2a56f1(0x1cb)}});return _0x7003ce[_0x2a56f1(0x1bb)](_0x3d5cc8=>({'id':_0x3d5cc8['id'],'fullName':_0x3d5cc8['name'],'username':_0x3d5cc8[_0x2a56f1(0x1d4)],'telegramId':_0x3d5cc8[_0x2a56f1(0x1b0)],'merchantUrl':_0x3d5cc8['shopUrl'],'gateways':_0x3d5cc8['paymentGateways']?JSON[_0x2a56f1(0x1c4)](_0x3d5cc8[_0x2a56f1(0x1a7)]):null,'gatewaySettings':_0x3d5cc8[_0x2a56f1(0x1a3)]?JSON[_0x2a56f1(0x1c4)](_0x3d5cc8['gatewaySettings']):null,'publicKey':_0x3d5cc8['publicKey'],'wallets':{'usdtPolygonWallet':_0x3d5cc8[_0x2a56f1(0x1a9)],'usdtTrcWallet':_0x3d5cc8[_0x2a56f1(0x1c8)],'usdtErcWallet':_0x3d5cc8[_0x2a56f1(0x1b5)],'usdcPolygonWallet':_0x3d5cc8['usdcPolygonWallet']},'status':_0x3d5cc8['status'],'createdAt':_0x3d5cc8['createdAt']}));}async[a80_0x4dc0a7(0x1cd)](_0x23dd1b){const _0x7a13d6=a80_0x4dc0a7,_0x492aa3=await database_1[_0x7a13d6(0x1ab)][_0x7a13d6(0x1b2)][_0x7a13d6(0x199)]({'where':{'id':_0x23dd1b},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x492aa3)return null;return{'id':_0x492aa3['id'],'fullName':_0x492aa3['name'],'username':_0x492aa3['username'],'telegramId':_0x492aa3[_0x7a13d6(0x1b0)],'merchantUrl':_0x492aa3[_0x7a13d6(0x1cf)],'gateways':_0x492aa3[_0x7a13d6(0x1a7)]?JSON[_0x7a13d6(0x1c4)](_0x492aa3[_0x7a13d6(0x1a7)]):null,'gatewaySettings':_0x492aa3[_0x7a13d6(0x1a3)]?JSON[_0x7a13d6(0x1c4)](_0x492aa3['gatewaySettings']):null,'publicKey':_0x492aa3[_0x7a13d6(0x1bc)],'wallets':{'usdtPolygonWallet':_0x492aa3[_0x7a13d6(0x1a9)],'usdtTrcWallet':_0x492aa3[_0x7a13d6(0x1c8)],'usdtErcWallet':_0x492aa3[_0x7a13d6(0x1b5)],'usdcPolygonWallet':_0x492aa3[_0x7a13d6(0x1ba)]},'status':_0x492aa3[_0x7a13d6(0x1c6)],'createdAt':_0x492aa3[_0x7a13d6(0x1c0)]};}async[a80_0x4dc0a7(0x1af)](_0x158bd5,_0x31a917){const _0x2ea1c3=a80_0x4dc0a7,_0x3b342b={..._0x31a917};_0x31a917[_0x2ea1c3(0x1b8)]&&(_0x3b342b['password']=await bcryptjs_1[_0x2ea1c3(0x1ab)][_0x2ea1c3(0x198)](_0x31a917[_0x2ea1c3(0x1b8)],0xc));_0x31a917[_0x2ea1c3(0x1b3)]&&(_0x3b342b[_0x2ea1c3(0x1c7)]=_0x31a917[_0x2ea1c3(0x1b3)],delete _0x3b342b[_0x2ea1c3(0x1b3)]);_0x31a917[_0x2ea1c3(0x1a1)]&&(_0x3b342b[_0x2ea1c3(0x1b0)]=_0x31a917[_0x2ea1c3(0x1a1)],delete _0x3b342b[_0x2ea1c3(0x1a1)]);_0x31a917['merchantUrl']&&(_0x3b342b[_0x2ea1c3(0x1cf)]=_0x31a917[_0x2ea1c3(0x1b1)],delete _0x3b342b[_0x2ea1c3(0x1b1)]);_0x31a917[_0x2ea1c3(0x19b)]&&(_0x3b342b[_0x2ea1c3(0x1a7)]=JSON['stringify'](_0x31a917[_0x2ea1c3(0x19b)]),delete _0x3b342b['gateways']);_0x31a917[_0x2ea1c3(0x1a3)]&&(_0x3b342b[_0x2ea1c3(0x1a3)]=JSON[_0x2ea1c3(0x1ad)](_0x31a917['gatewaySettings']),delete _0x3b342b[_0x2ea1c3(0x1a3)]);_0x31a917['wallets']&&(_0x31a917[_0x2ea1c3(0x1b9)][_0x2ea1c3(0x1a9)]!==undefined&&(_0x3b342b['usdtPolygonWallet']=_0x31a917['wallets']['usdtPolygonWallet']||null),_0x31a917['wallets']['usdtTrcWallet']!==undefined&&(_0x3b342b['usdtTrcWallet']=_0x31a917[_0x2ea1c3(0x1b9)][_0x2ea1c3(0x1c8)]||null),_0x31a917[_0x2ea1c3(0x1b9)][_0x2ea1c3(0x1b5)]!==undefined&&(_0x3b342b[_0x2ea1c3(0x1b5)]=_0x31a917[_0x2ea1c3(0x1b9)][_0x2ea1c3(0x1b5)]||null),_0x31a917['wallets'][_0x2ea1c3(0x1ba)]!==undefined&&(_0x3b342b[_0x2ea1c3(0x1ba)]=_0x31a917[_0x2ea1c3(0x1b9)][_0x2ea1c3(0x1ba)]||null),delete _0x3b342b[_0x2ea1c3(0x1b9)]);const _0x44bd02=await database_1[_0x2ea1c3(0x1ab)][_0x2ea1c3(0x1b2)][_0x2ea1c3(0x1aa)]({'where':{'id':_0x158bd5},'data':_0x3b342b,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x44bd02['id'],'fullName':_0x44bd02[_0x2ea1c3(0x1c7)],'username':_0x44bd02[_0x2ea1c3(0x1d4)],'telegramId':_0x44bd02[_0x2ea1c3(0x1b0)],'merchantUrl':_0x44bd02['shopUrl'],'gateways':_0x44bd02[_0x2ea1c3(0x1a7)]?JSON['parse'](_0x44bd02[_0x2ea1c3(0x1a7)]):null,'gatewaySettings':_0x44bd02[_0x2ea1c3(0x1a3)]?JSON[_0x2ea1c3(0x1c4)](_0x44bd02[_0x2ea1c3(0x1a3)]):null,'publicKey':_0x44bd02['publicKey'],'wallets':{'usdtPolygonWallet':_0x44bd02[_0x2ea1c3(0x1a9)],'usdtTrcWallet':_0x44bd02[_0x2ea1c3(0x1c8)],'usdtErcWallet':_0x44bd02['usdtErcWallet'],'usdcPolygonWallet':_0x44bd02['usdcPolygonWallet']},'status':_0x44bd02[_0x2ea1c3(0x1c6)],'createdAt':_0x44bd02[_0x2ea1c3(0x1c0)]};}async[a80_0x4dc0a7(0x1a6)](_0x3301fa){const _0x26cea7=a80_0x4dc0a7;await database_1[_0x26cea7(0x1ab)][_0x26cea7(0x1b2)][_0x26cea7(0x1ac)]({'where':{'id':_0x3301fa}});}}exports[a80_0x4dc0a7(0x1b6)]=UserService;