'use strict';const a56_0x3ebfeb=a56_0x396c;(function(_0x1376dd,_0x2d76c7){const _0x174c48=a56_0x396c,_0x56aaf5=_0x1376dd();while(!![]){try{const _0x5bbf75=parseInt(_0x174c48(0x1ee))/0x1*(parseInt(_0x174c48(0x1e3))/0x2)+-parseInt(_0x174c48(0x1e9))/0x3+-parseInt(_0x174c48(0x1fb))/0x4*(parseInt(_0x174c48(0x1ea))/0x5)+-parseInt(_0x174c48(0x1cb))/0x6*(-parseInt(_0x174c48(0x1f6))/0x7)+parseInt(_0x174c48(0x1c8))/0x8+-parseInt(_0x174c48(0x1fe))/0x9+-parseInt(_0x174c48(0x1da))/0xa*(-parseInt(_0x174c48(0x1f5))/0xb);if(_0x5bbf75===_0x2d76c7)break;else _0x56aaf5['push'](_0x56aaf5['shift']());}catch(_0x1f20ee){_0x56aaf5['push'](_0x56aaf5['shift']());}}}(a56_0x35b0,0x24d61));var __importDefault=this&&this[a56_0x3ebfeb(0x1f2)]||function(_0x1b3d0a){return _0x1b3d0a&&_0x1b3d0a['__esModule']?_0x1b3d0a:{'default':_0x1b3d0a};};Object[a56_0x3ebfeb(0x1e6)](exports,'__esModule',{'value':!![]}),exports[a56_0x3ebfeb(0x1fa)]=void 0x0;const bcryptjs_1=__importDefault(require('bcryptjs')),crypto_1=__importDefault(require(a56_0x3ebfeb(0x1ef))),database_1=__importDefault(require(a56_0x3ebfeb(0x1d4)));function a56_0x396c(_0xd73f57,_0x30e18c){const _0x35b0e3=a56_0x35b0();return a56_0x396c=function(_0x396c01,_0x28537f){_0x396c01=_0x396c01-0x1c5;let _0x468dae=_0x35b0e3[_0x396c01];return _0x468dae;},a56_0x396c(_0xd73f57,_0x30e18c);}function a56_0x35b0(){const _0x240570=['password','150tgVJPk','generateApiKeys','ACTIVE','telegramId','desc','create','default','findUnique','usdcPolygonWallet','2VGAGHt','usdtPolygonWallet','Username\x20already\x20exists','defineProperty','paymentGateways','deleteUser','453501PZknFu','195KYOSys','shopUrl','pk_','merchantUrl','175573EKrzLU','crypto','status','createUser','__importDefault','parse','fullName','70950tBqPnP','189DogUmR','randomBytes','shop','stringify','UserService','28292iRoduY','toString','updateUser','1027413LqjZOI','createdAt','name','map','hash','1465456OLPYOU','update','gatewaySettings','52566WjCVEj','usdtErcWallet','Telegram\x20username\x20already\x20exists','wallets','telegram','getAllUsers','usdtTrcWallet','getUserById','publicKey','../config/database','gateways','username','findMany','hex'];a56_0x35b0=function(){return _0x240570;};return a56_0x35b0();}class UserService{[a56_0x3ebfeb(0x1db)](){const _0x1e5be4=a56_0x3ebfeb,_0x5ca97e=_0x1e5be4(0x1ec)+crypto_1[_0x1e5be4(0x1e0)]['randomBytes'](0x20)[_0x1e5be4(0x1fc)](_0x1e5be4(0x1d8)),_0x1efbe8='sk_'+crypto_1[_0x1e5be4(0x1e0)][_0x1e5be4(0x1f7)](0x20)[_0x1e5be4(0x1fc)](_0x1e5be4(0x1d8));return{'publicKey':_0x5ca97e,'secretKey':_0x1efbe8};}async[a56_0x3ebfeb(0x1f1)](_0x45936c){const _0x58266e=a56_0x3ebfeb,{fullName:_0x34401a,username:_0x656642,password:_0x2ec656,telegramId:_0x23379c,merchantUrl:_0xd6493b,gateways:_0x1dbc9d,gatewaySettings:_0xd9f86,wallets:_0x3a6e9}=_0x45936c,_0x1fab31=await database_1[_0x58266e(0x1e0)][_0x58266e(0x1f8)][_0x58266e(0x1e1)]({'where':{'username':_0x656642}});if(_0x1fab31)throw new Error(_0x58266e(0x1e5));if(_0x23379c){const _0x3a72cb=await database_1['default'][_0x58266e(0x1f8)][_0x58266e(0x1e1)]({'where':{'telegram':_0x23379c}});if(_0x3a72cb)throw new Error(_0x58266e(0x1cd));}const _0x297731=await bcryptjs_1[_0x58266e(0x1e0)][_0x58266e(0x1c7)](_0x2ec656,0xc),{publicKey:_0x59d7ec,secretKey:_0x4e73fc}=this[_0x58266e(0x1db)](),_0x509ea3=await database_1['default'][_0x58266e(0x1f8)][_0x58266e(0x1df)]({'data':{'name':_0x34401a,'username':_0x656642,'password':_0x297731,'telegram':_0x23379c,'shopUrl':_0xd6493b,'paymentGateways':_0x1dbc9d?JSON['stringify'](_0x1dbc9d):null,'gatewaySettings':_0xd9f86?JSON[_0x58266e(0x1f9)](_0xd9f86):null,'usdtPolygonWallet':_0x3a6e9?.[_0x58266e(0x1e4)]||null,'usdtTrcWallet':_0x3a6e9?.[_0x58266e(0x1d1)]||null,'usdtErcWallet':_0x3a6e9?.[_0x58266e(0x1cc)]||null,'usdcPolygonWallet':_0x3a6e9?.[_0x58266e(0x1e2)]||null,'publicKey':_0x59d7ec,'secretKey':_0x4e73fc,'status':_0x58266e(0x1dc)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x509ea3['id'],'fullName':_0x509ea3['name'],'username':_0x509ea3[_0x58266e(0x1d6)],'telegramId':_0x509ea3[_0x58266e(0x1cf)],'merchantUrl':_0x509ea3[_0x58266e(0x1eb)],'gateways':_0x509ea3[_0x58266e(0x1e7)]?JSON[_0x58266e(0x1f3)](_0x509ea3[_0x58266e(0x1e7)]):null,'gatewaySettings':_0x509ea3[_0x58266e(0x1ca)]?JSON[_0x58266e(0x1f3)](_0x509ea3[_0x58266e(0x1ca)]):null,'publicKey':_0x509ea3[_0x58266e(0x1d3)],'wallets':{'usdtPolygonWallet':_0x509ea3[_0x58266e(0x1e4)],'usdtTrcWallet':_0x509ea3[_0x58266e(0x1d1)],'usdtErcWallet':_0x509ea3[_0x58266e(0x1cc)],'usdcPolygonWallet':_0x509ea3[_0x58266e(0x1e2)]},'status':_0x509ea3['status'],'createdAt':_0x509ea3[_0x58266e(0x1ff)]};}async[a56_0x3ebfeb(0x1d0)](){const _0xe81a89=a56_0x3ebfeb,_0x38502e=await database_1[_0xe81a89(0x1e0)][_0xe81a89(0x1f8)][_0xe81a89(0x1d7)]({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':_0xe81a89(0x1de)}});return _0x38502e[_0xe81a89(0x1c6)](_0x272df2=>({'id':_0x272df2['id'],'fullName':_0x272df2['name'],'username':_0x272df2[_0xe81a89(0x1d6)],'telegramId':_0x272df2[_0xe81a89(0x1cf)],'merchantUrl':_0x272df2[_0xe81a89(0x1eb)],'gateways':_0x272df2[_0xe81a89(0x1e7)]?JSON['parse'](_0x272df2[_0xe81a89(0x1e7)]):null,'gatewaySettings':_0x272df2[_0xe81a89(0x1ca)]?JSON[_0xe81a89(0x1f3)](_0x272df2[_0xe81a89(0x1ca)]):null,'publicKey':_0x272df2[_0xe81a89(0x1d3)],'wallets':{'usdtPolygonWallet':_0x272df2[_0xe81a89(0x1e4)],'usdtTrcWallet':_0x272df2[_0xe81a89(0x1d1)],'usdtErcWallet':_0x272df2[_0xe81a89(0x1cc)],'usdcPolygonWallet':_0x272df2['usdcPolygonWallet']},'status':_0x272df2[_0xe81a89(0x1f0)],'createdAt':_0x272df2[_0xe81a89(0x1ff)]}));}async[a56_0x3ebfeb(0x1d2)](_0x3ddf6b){const _0x23b655=a56_0x3ebfeb,_0x72479c=await database_1[_0x23b655(0x1e0)][_0x23b655(0x1f8)][_0x23b655(0x1e1)]({'where':{'id':_0x3ddf6b},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x72479c)return null;return{'id':_0x72479c['id'],'fullName':_0x72479c[_0x23b655(0x1c5)],'username':_0x72479c[_0x23b655(0x1d6)],'telegramId':_0x72479c[_0x23b655(0x1cf)],'merchantUrl':_0x72479c[_0x23b655(0x1eb)],'gateways':_0x72479c['paymentGateways']?JSON['parse'](_0x72479c[_0x23b655(0x1e7)]):null,'gatewaySettings':_0x72479c['gatewaySettings']?JSON[_0x23b655(0x1f3)](_0x72479c[_0x23b655(0x1ca)]):null,'publicKey':_0x72479c['publicKey'],'wallets':{'usdtPolygonWallet':_0x72479c[_0x23b655(0x1e4)],'usdtTrcWallet':_0x72479c[_0x23b655(0x1d1)],'usdtErcWallet':_0x72479c[_0x23b655(0x1cc)],'usdcPolygonWallet':_0x72479c[_0x23b655(0x1e2)]},'status':_0x72479c[_0x23b655(0x1f0)],'createdAt':_0x72479c[_0x23b655(0x1ff)]};}async[a56_0x3ebfeb(0x1fd)](_0x21741f,_0x4ff357){const _0x48124e=a56_0x3ebfeb,_0xca0110={..._0x4ff357};_0x4ff357['password']&&(_0xca0110[_0x48124e(0x1d9)]=await bcryptjs_1[_0x48124e(0x1e0)]['hash'](_0x4ff357['password'],0xc));_0x4ff357[_0x48124e(0x1f4)]&&(_0xca0110[_0x48124e(0x1c5)]=_0x4ff357['fullName'],delete _0xca0110[_0x48124e(0x1f4)]);_0x4ff357['telegramId']&&(_0xca0110['telegram']=_0x4ff357[_0x48124e(0x1dd)],delete _0xca0110[_0x48124e(0x1dd)]);_0x4ff357[_0x48124e(0x1ed)]&&(_0xca0110[_0x48124e(0x1eb)]=_0x4ff357[_0x48124e(0x1ed)],delete _0xca0110[_0x48124e(0x1ed)]);_0x4ff357['gateways']&&(_0xca0110[_0x48124e(0x1e7)]=JSON['stringify'](_0x4ff357[_0x48124e(0x1d5)]),delete _0xca0110[_0x48124e(0x1d5)]);_0x4ff357['gatewaySettings']&&(_0xca0110[_0x48124e(0x1ca)]=JSON[_0x48124e(0x1f9)](_0x4ff357[_0x48124e(0x1ca)]),delete _0xca0110[_0x48124e(0x1ca)]);_0x4ff357[_0x48124e(0x1ce)]&&(_0x4ff357[_0x48124e(0x1ce)]['usdtPolygonWallet']!==undefined&&(_0xca0110[_0x48124e(0x1e4)]=_0x4ff357[_0x48124e(0x1ce)][_0x48124e(0x1e4)]||null),_0x4ff357['wallets'][_0x48124e(0x1d1)]!==undefined&&(_0xca0110[_0x48124e(0x1d1)]=_0x4ff357[_0x48124e(0x1ce)][_0x48124e(0x1d1)]||null),_0x4ff357[_0x48124e(0x1ce)][_0x48124e(0x1cc)]!==undefined&&(_0xca0110[_0x48124e(0x1cc)]=_0x4ff357[_0x48124e(0x1ce)][_0x48124e(0x1cc)]||null),_0x4ff357[_0x48124e(0x1ce)][_0x48124e(0x1e2)]!==undefined&&(_0xca0110[_0x48124e(0x1e2)]=_0x4ff357['wallets']['usdcPolygonWallet']||null),delete _0xca0110[_0x48124e(0x1ce)]);const _0xed472=await database_1[_0x48124e(0x1e0)][_0x48124e(0x1f8)][_0x48124e(0x1c9)]({'where':{'id':_0x21741f},'data':_0xca0110,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0xed472['id'],'fullName':_0xed472[_0x48124e(0x1c5)],'username':_0xed472[_0x48124e(0x1d6)],'telegramId':_0xed472[_0x48124e(0x1cf)],'merchantUrl':_0xed472[_0x48124e(0x1eb)],'gateways':_0xed472[_0x48124e(0x1e7)]?JSON[_0x48124e(0x1f3)](_0xed472[_0x48124e(0x1e7)]):null,'gatewaySettings':_0xed472['gatewaySettings']?JSON['parse'](_0xed472[_0x48124e(0x1ca)]):null,'publicKey':_0xed472[_0x48124e(0x1d3)],'wallets':{'usdtPolygonWallet':_0xed472['usdtPolygonWallet'],'usdtTrcWallet':_0xed472[_0x48124e(0x1d1)],'usdtErcWallet':_0xed472['usdtErcWallet'],'usdcPolygonWallet':_0xed472[_0x48124e(0x1e2)]},'status':_0xed472[_0x48124e(0x1f0)],'createdAt':_0xed472[_0x48124e(0x1ff)]};}async[a56_0x3ebfeb(0x1e8)](_0x573e29){const _0x1a6c89=a56_0x3ebfeb;await database_1[_0x1a6c89(0x1e0)][_0x1a6c89(0x1f8)]['delete']({'where':{'id':_0x573e29}});}}exports['UserService']=UserService;