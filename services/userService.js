'use strict';const a80_0x17d862=a80_0x3da0;(function(_0x306030,_0x26b21a){const _0x49d24d=a80_0x3da0,_0xf2d66=_0x306030();while(!![]){try{const _0x4b5217=-parseInt(_0x49d24d(0xe5))/0x1*(-parseInt(_0x49d24d(0xf0))/0x2)+parseInt(_0x49d24d(0xf5))/0x3+-parseInt(_0x49d24d(0x10b))/0x4*(-parseInt(_0x49d24d(0x10e))/0x5)+-parseInt(_0x49d24d(0xdc))/0x6*(parseInt(_0x49d24d(0xea))/0x7)+-parseInt(_0x49d24d(0xf3))/0x8*(-parseInt(_0x49d24d(0xfa))/0x9)+parseInt(_0x49d24d(0x10a))/0xa*(-parseInt(_0x49d24d(0xee))/0xb)+-parseInt(_0x49d24d(0xda))/0xc;if(_0x4b5217===_0x26b21a)break;else _0xf2d66['push'](_0xf2d66['shift']());}catch(_0x5c047d){_0xf2d66['push'](_0xf2d66['shift']());}}}(a80_0x1ef2,0xd6ceb));var __importDefault=this&&this[a80_0x17d862(0xe2)]||function(_0x2bfead){const _0x536d92=a80_0x17d862;return _0x2bfead&&_0x2bfead[_0x536d92(0xe1)]?_0x2bfead:{'default':_0x2bfead};};function a80_0x3da0(_0x3536f5,_0x125934){_0x3536f5=_0x3536f5-0xd6;const _0x1ef28c=a80_0x1ef2();let _0x3da045=_0x1ef28c[_0x3536f5];return _0x3da045;}Object[a80_0x17d862(0xfb)](exports,'__esModule',{'value':!![]}),exports[a80_0x17d862(0xf6)]=void 0x0;const bcryptjs_1=__importDefault(require(a80_0x17d862(0xe7))),crypto_1=__importDefault(require(a80_0x17d862(0x100))),database_1=__importDefault(require(a80_0x17d862(0x10c)));class UserService{['generateApiKeys'](){const _0xc6e251=a80_0x17d862,_0xde3259=_0xc6e251(0x109)+crypto_1[_0xc6e251(0xf8)]['randomBytes'](0x20)[_0xc6e251(0x106)](_0xc6e251(0x103)),_0xbdb31d=_0xc6e251(0x105)+crypto_1[_0xc6e251(0xf8)][_0xc6e251(0xf4)](0x20)['toString'](_0xc6e251(0x103));return{'publicKey':_0xde3259,'secretKey':_0xbdb31d};}async['createUser'](_0x46e5f3){const _0x40e6f7=a80_0x17d862,{fullName:_0x178226,username:_0x2546b6,password:_0x27e8d9,telegramId:_0x140b4e,merchantUrl:_0x1691d0,gateways:_0x24b2f5,gatewaySettings:_0x534c4b,wallets:_0x343e2a}=_0x46e5f3,_0x4027a1=await database_1[_0x40e6f7(0xf8)][_0x40e6f7(0xef)][_0x40e6f7(0xf2)]({'where':{'username':_0x2546b6}});if(_0x4027a1)throw new Error('Username\x20already\x20exists');if(_0x140b4e){const _0x2ca1eb=await database_1[_0x40e6f7(0xf8)][_0x40e6f7(0xef)][_0x40e6f7(0xf2)]({'where':{'telegram':_0x140b4e}});if(_0x2ca1eb)throw new Error(_0x40e6f7(0xec));}const _0x34479b=await bcryptjs_1[_0x40e6f7(0xf8)]['hash'](_0x27e8d9,0xc),{publicKey:_0x283b7d,secretKey:_0x2ff365}=this[_0x40e6f7(0xd7)](),_0x5b7041=await database_1['default'][_0x40e6f7(0xef)][_0x40e6f7(0xfd)]({'data':{'name':_0x178226,'username':_0x2546b6,'password':_0x34479b,'telegram':_0x140b4e,'shopUrl':_0x1691d0,'paymentGateways':_0x24b2f5?JSON['stringify'](_0x24b2f5):null,'gatewaySettings':_0x534c4b?JSON[_0x40e6f7(0xfc)](_0x534c4b):null,'usdtPolygonWallet':_0x343e2a?.['usdtPolygonWallet']||null,'usdtTrcWallet':_0x343e2a?.['usdtTrcWallet']||null,'usdtErcWallet':_0x343e2a?.[_0x40e6f7(0xdf)]||null,'usdcPolygonWallet':_0x343e2a?.[_0x40e6f7(0x10d)]||null,'publicKey':_0x283b7d,'secretKey':_0x2ff365,'status':'ACTIVE'},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x5b7041['id'],'fullName':_0x5b7041[_0x40e6f7(0xeb)],'username':_0x5b7041[_0x40e6f7(0x110)],'telegramId':_0x5b7041[_0x40e6f7(0x107)],'merchantUrl':_0x5b7041[_0x40e6f7(0xe3)],'gateways':_0x5b7041[_0x40e6f7(0x104)]?JSON[_0x40e6f7(0x108)](_0x5b7041[_0x40e6f7(0x104)]):null,'gatewaySettings':_0x5b7041[_0x40e6f7(0xe0)]?JSON[_0x40e6f7(0x108)](_0x5b7041[_0x40e6f7(0xe0)]):null,'publicKey':_0x5b7041[_0x40e6f7(0xe8)],'wallets':{'usdtPolygonWallet':_0x5b7041[_0x40e6f7(0xd8)],'usdtTrcWallet':_0x5b7041[_0x40e6f7(0xd9)],'usdtErcWallet':_0x5b7041[_0x40e6f7(0xdf)],'usdcPolygonWallet':_0x5b7041[_0x40e6f7(0x10d)]},'status':_0x5b7041[_0x40e6f7(0x10f)],'createdAt':_0x5b7041['createdAt']};}async[a80_0x17d862(0xdb)](){const _0x49223b=a80_0x17d862,_0x19068c=await database_1[_0x49223b(0xf8)][_0x49223b(0xef)][_0x49223b(0x101)]({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':_0x49223b(0xf9)}});return _0x19068c[_0x49223b(0xff)](_0xa10c46=>({'id':_0xa10c46['id'],'fullName':_0xa10c46[_0x49223b(0xeb)],'username':_0xa10c46[_0x49223b(0x110)],'telegramId':_0xa10c46[_0x49223b(0x107)],'merchantUrl':_0xa10c46[_0x49223b(0xe3)],'gateways':_0xa10c46[_0x49223b(0x104)]?JSON[_0x49223b(0x108)](_0xa10c46[_0x49223b(0x104)]):null,'gatewaySettings':_0xa10c46[_0x49223b(0xe0)]?JSON[_0x49223b(0x108)](_0xa10c46[_0x49223b(0xe0)]):null,'publicKey':_0xa10c46['publicKey'],'wallets':{'usdtPolygonWallet':_0xa10c46[_0x49223b(0xd8)],'usdtTrcWallet':_0xa10c46[_0x49223b(0xd9)],'usdtErcWallet':_0xa10c46['usdtErcWallet'],'usdcPolygonWallet':_0xa10c46[_0x49223b(0x10d)]},'status':_0xa10c46['status'],'createdAt':_0xa10c46[_0x49223b(0xed)]}));}async['getUserById'](_0x30e54c){const _0x301799=a80_0x17d862,_0x3241f0=await database_1[_0x301799(0xf8)][_0x301799(0xef)][_0x301799(0xf2)]({'where':{'id':_0x30e54c},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x3241f0)return null;return{'id':_0x3241f0['id'],'fullName':_0x3241f0[_0x301799(0xeb)],'username':_0x3241f0[_0x301799(0x110)],'telegramId':_0x3241f0[_0x301799(0x107)],'merchantUrl':_0x3241f0[_0x301799(0xe3)],'gateways':_0x3241f0['paymentGateways']?JSON[_0x301799(0x108)](_0x3241f0[_0x301799(0x104)]):null,'gatewaySettings':_0x3241f0[_0x301799(0xe0)]?JSON['parse'](_0x3241f0[_0x301799(0xe0)]):null,'publicKey':_0x3241f0[_0x301799(0xe8)],'wallets':{'usdtPolygonWallet':_0x3241f0['usdtPolygonWallet'],'usdtTrcWallet':_0x3241f0[_0x301799(0xd9)],'usdtErcWallet':_0x3241f0[_0x301799(0xdf)],'usdcPolygonWallet':_0x3241f0[_0x301799(0x10d)]},'status':_0x3241f0[_0x301799(0x10f)],'createdAt':_0x3241f0[_0x301799(0xed)]};}async[a80_0x17d862(0xf7)](_0x416547,_0x358a65){const _0x349413=a80_0x17d862,_0x1b705b={..._0x358a65};_0x358a65[_0x349413(0xde)]&&(_0x1b705b[_0x349413(0xde)]=await bcryptjs_1['default'][_0x349413(0xd6)](_0x358a65['password'],0xc));_0x358a65['fullName']&&(_0x1b705b[_0x349413(0xeb)]=_0x358a65[_0x349413(0xe9)],delete _0x1b705b[_0x349413(0xe9)]);_0x358a65[_0x349413(0xfe)]&&(_0x1b705b[_0x349413(0x107)]=_0x358a65['telegramId'],delete _0x1b705b[_0x349413(0xfe)]);_0x358a65['merchantUrl']&&(_0x1b705b[_0x349413(0xe3)]=_0x358a65[_0x349413(0x102)],delete _0x1b705b[_0x349413(0x102)]);_0x358a65[_0x349413(0xe4)]&&(_0x1b705b[_0x349413(0x104)]=JSON[_0x349413(0xfc)](_0x358a65[_0x349413(0xe4)]),delete _0x1b705b['gateways']);_0x358a65[_0x349413(0xe0)]&&(_0x1b705b[_0x349413(0xe0)]=JSON[_0x349413(0xfc)](_0x358a65[_0x349413(0xe0)]),delete _0x1b705b[_0x349413(0xe0)]);_0x358a65[_0x349413(0xdd)]&&(_0x358a65[_0x349413(0xdd)]['usdtPolygonWallet']!==undefined&&(_0x1b705b[_0x349413(0xd8)]=_0x358a65[_0x349413(0xdd)][_0x349413(0xd8)]||null),_0x358a65[_0x349413(0xdd)][_0x349413(0xd9)]!==undefined&&(_0x1b705b['usdtTrcWallet']=_0x358a65[_0x349413(0xdd)]['usdtTrcWallet']||null),_0x358a65['wallets']['usdtErcWallet']!==undefined&&(_0x1b705b[_0x349413(0xdf)]=_0x358a65[_0x349413(0xdd)][_0x349413(0xdf)]||null),_0x358a65['wallets']['usdcPolygonWallet']!==undefined&&(_0x1b705b[_0x349413(0x10d)]=_0x358a65[_0x349413(0xdd)][_0x349413(0x10d)]||null),delete _0x1b705b['wallets']);const _0x3bdfe9=await database_1['default']['shop'][_0x349413(0xe6)]({'where':{'id':_0x416547},'data':_0x1b705b,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x3bdfe9['id'],'fullName':_0x3bdfe9['name'],'username':_0x3bdfe9['username'],'telegramId':_0x3bdfe9[_0x349413(0x107)],'merchantUrl':_0x3bdfe9[_0x349413(0xe3)],'gateways':_0x3bdfe9['paymentGateways']?JSON[_0x349413(0x108)](_0x3bdfe9[_0x349413(0x104)]):null,'gatewaySettings':_0x3bdfe9['gatewaySettings']?JSON[_0x349413(0x108)](_0x3bdfe9['gatewaySettings']):null,'publicKey':_0x3bdfe9[_0x349413(0xe8)],'wallets':{'usdtPolygonWallet':_0x3bdfe9[_0x349413(0xd8)],'usdtTrcWallet':_0x3bdfe9['usdtTrcWallet'],'usdtErcWallet':_0x3bdfe9[_0x349413(0xdf)],'usdcPolygonWallet':_0x3bdfe9['usdcPolygonWallet']},'status':_0x3bdfe9[_0x349413(0x10f)],'createdAt':_0x3bdfe9[_0x349413(0xed)]};}async[a80_0x17d862(0xf1)](_0x38b18f){const _0xabb461=a80_0x17d862;await database_1[_0xabb461(0xf8)][_0xabb461(0xef)]['delete']({'where':{'id':_0x38b18f}});}}function a80_0x1ef2(){const _0xe5f1f2=['merchantUrl','hex','paymentGateways','sk_','toString','telegram','parse','pk_','10DRmqQI','170040mORZLE','../config/database','usdcPolygonWallet','185kwidUX','status','username','hash','generateApiKeys','usdtPolygonWallet','usdtTrcWallet','26029284OhJEdU','getAllUsers','18NertYx','wallets','password','usdtErcWallet','gatewaySettings','__esModule','__importDefault','shopUrl','gateways','13002MbOcno','update','bcryptjs','publicKey','fullName','556829IfBlcL','name','Telegram\x20username\x20already\x20exists','createdAt','8939579biUWKL','shop','110HyttLC','deleteUser','findUnique','2508984VxKOJs','randomBytes','4496055bXQXlL','UserService','updateUser','default','desc','9PQlBSu','defineProperty','stringify','create','telegramId','map','crypto','findMany'];a80_0x1ef2=function(){return _0xe5f1f2;};return a80_0x1ef2();}exports[a80_0x17d862(0xf6)]=UserService;