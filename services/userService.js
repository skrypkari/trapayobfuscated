'use strict';const a76_0x84e734=a76_0x85b6;(function(_0x59f442,_0xf40c31){const _0x363718=a76_0x85b6,_0x8dd07f=_0x59f442();while(!![]){try{const _0x3508b3=-parseInt(_0x363718(0xdf))/0x1+parseInt(_0x363718(0xc5))/0x2+-parseInt(_0x363718(0xb7))/0x3+parseInt(_0x363718(0xd8))/0x4+-parseInt(_0x363718(0xcf))/0x5*(parseInt(_0x363718(0xcc))/0x6)+-parseInt(_0x363718(0xc2))/0x7+parseInt(_0x363718(0xc7))/0x8;if(_0x3508b3===_0xf40c31)break;else _0x8dd07f['push'](_0x8dd07f['shift']());}catch(_0x4490fc){_0x8dd07f['push'](_0x8dd07f['shift']());}}}(a76_0x269c,0x796d2));function a76_0x269c(){const _0x4b15b9=['create','pk_','wallets','map','updateUser','publicKey','313824QmvBhw','findUnique','ACTIVE','1414344SHPGlZ','bcryptjs','1469808kRRFnr','username','__importDefault','deleteUser','createdAt','261078ESUfwZ','gateways','name','85Ktizqo','usdtPolygonWallet','stringify','update','fullName','paymentGateways','password','status','usdtTrcWallet','3417684cxGmpr','getAllUsers','gatewaySettings','desc','shop','usdcPolygonWallet','UserService','414746sLNvsu','hash','parse','createUser','hex','__esModule','merchantUrl','telegramId','default','toString','randomBytes','shopUrl','145974yweTPF','usdtErcWallet','sk_','generateApiKeys','telegram'];a76_0x269c=function(){return _0x4b15b9;};return a76_0x269c();}var __importDefault=this&&this[a76_0x84e734(0xc9)]||function(_0x2e3520){return _0x2e3520&&_0x2e3520['__esModule']?_0x2e3520:{'default':_0x2e3520};};Object['defineProperty'](exports,a76_0x84e734(0xb0),{'value':!![]}),exports['UserService']=void 0x0;function a76_0x85b6(_0x43bd22,_0x26b913){_0x43bd22=_0x43bd22-0xae;const _0x269cea=a76_0x269c();let _0x85b6e8=_0x269cea[_0x43bd22];return _0x85b6e8;}const bcryptjs_1=__importDefault(require(a76_0x84e734(0xc6))),crypto_1=__importDefault(require('crypto')),database_1=__importDefault(require('../config/database'));class UserService{['generateApiKeys'](){const _0x2dc4ab=a76_0x84e734,_0x5adc47=_0x2dc4ab(0xbd)+crypto_1[_0x2dc4ab(0xb3)][_0x2dc4ab(0xb5)](0x20)[_0x2dc4ab(0xb4)](_0x2dc4ab(0xaf)),_0x5b70fe=_0x2dc4ab(0xb9)+crypto_1[_0x2dc4ab(0xb3)][_0x2dc4ab(0xb5)](0x20)['toString'](_0x2dc4ab(0xaf));return{'publicKey':_0x5adc47,'secretKey':_0x5b70fe};}async[a76_0x84e734(0xae)](_0x188645){const _0x2a8029=a76_0x84e734,{fullName:_0x4d1936,username:_0xbcaf8d,password:_0x3c9ad1,telegramId:_0x54f06d,merchantUrl:_0x111bd1,gateways:_0x4a5823,gatewaySettings:_0x281a53,wallets:_0xa31370}=_0x188645,_0x4fe864=await database_1[_0x2a8029(0xb3)][_0x2a8029(0xdc)][_0x2a8029(0xc3)]({'where':{'username':_0xbcaf8d}});if(_0x4fe864)throw new Error('Username\x20already\x20exists');if(_0x54f06d){const _0x57a693=await database_1['default'][_0x2a8029(0xdc)][_0x2a8029(0xc3)]({'where':{'telegram':_0x54f06d}});if(_0x57a693)throw new Error('Telegram\x20username\x20already\x20exists');}const _0x1b61d1=await bcryptjs_1['default'][_0x2a8029(0xe0)](_0x3c9ad1,0xc),{publicKey:_0x182e72,secretKey:_0x1838c2}=this[_0x2a8029(0xba)](),_0x160092=await database_1[_0x2a8029(0xb3)]['shop'][_0x2a8029(0xbc)]({'data':{'name':_0x4d1936,'username':_0xbcaf8d,'password':_0x1b61d1,'telegram':_0x54f06d,'shopUrl':_0x111bd1,'paymentGateways':_0x4a5823?JSON['stringify'](_0x4a5823):null,'gatewaySettings':_0x281a53?JSON[_0x2a8029(0xd1)](_0x281a53):null,'usdtPolygonWallet':_0xa31370?.[_0x2a8029(0xd0)]||null,'usdtTrcWallet':_0xa31370?.[_0x2a8029(0xd7)]||null,'usdtErcWallet':_0xa31370?.[_0x2a8029(0xb8)]||null,'usdcPolygonWallet':_0xa31370?.['usdcPolygonWallet']||null,'publicKey':_0x182e72,'secretKey':_0x1838c2,'status':_0x2a8029(0xc4)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x160092['id'],'fullName':_0x160092[_0x2a8029(0xce)],'username':_0x160092[_0x2a8029(0xc8)],'telegramId':_0x160092[_0x2a8029(0xbb)],'merchantUrl':_0x160092[_0x2a8029(0xb6)],'gateways':_0x160092[_0x2a8029(0xd4)]?JSON[_0x2a8029(0xe1)](_0x160092['paymentGateways']):null,'gatewaySettings':_0x160092[_0x2a8029(0xda)]?JSON[_0x2a8029(0xe1)](_0x160092[_0x2a8029(0xda)]):null,'publicKey':_0x160092[_0x2a8029(0xc1)],'wallets':{'usdtPolygonWallet':_0x160092['usdtPolygonWallet'],'usdtTrcWallet':_0x160092[_0x2a8029(0xd7)],'usdtErcWallet':_0x160092[_0x2a8029(0xb8)],'usdcPolygonWallet':_0x160092[_0x2a8029(0xdd)]},'status':_0x160092['status'],'createdAt':_0x160092['createdAt']};}async[a76_0x84e734(0xd9)](){const _0xd17db3=a76_0x84e734,_0x6f0477=await database_1[_0xd17db3(0xb3)][_0xd17db3(0xdc)]['findMany']({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':_0xd17db3(0xdb)}});return _0x6f0477[_0xd17db3(0xbf)](_0x30f92b=>({'id':_0x30f92b['id'],'fullName':_0x30f92b[_0xd17db3(0xce)],'username':_0x30f92b[_0xd17db3(0xc8)],'telegramId':_0x30f92b[_0xd17db3(0xbb)],'merchantUrl':_0x30f92b['shopUrl'],'gateways':_0x30f92b[_0xd17db3(0xd4)]?JSON[_0xd17db3(0xe1)](_0x30f92b[_0xd17db3(0xd4)]):null,'gatewaySettings':_0x30f92b[_0xd17db3(0xda)]?JSON['parse'](_0x30f92b[_0xd17db3(0xda)]):null,'publicKey':_0x30f92b[_0xd17db3(0xc1)],'wallets':{'usdtPolygonWallet':_0x30f92b[_0xd17db3(0xd0)],'usdtTrcWallet':_0x30f92b[_0xd17db3(0xd7)],'usdtErcWallet':_0x30f92b['usdtErcWallet'],'usdcPolygonWallet':_0x30f92b[_0xd17db3(0xdd)]},'status':_0x30f92b[_0xd17db3(0xd6)],'createdAt':_0x30f92b[_0xd17db3(0xcb)]}));}async['getUserById'](_0x534071){const _0x1d5d3c=a76_0x84e734,_0x658dfb=await database_1[_0x1d5d3c(0xb3)][_0x1d5d3c(0xdc)][_0x1d5d3c(0xc3)]({'where':{'id':_0x534071},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x658dfb)return null;return{'id':_0x658dfb['id'],'fullName':_0x658dfb[_0x1d5d3c(0xce)],'username':_0x658dfb[_0x1d5d3c(0xc8)],'telegramId':_0x658dfb['telegram'],'merchantUrl':_0x658dfb[_0x1d5d3c(0xb6)],'gateways':_0x658dfb[_0x1d5d3c(0xd4)]?JSON[_0x1d5d3c(0xe1)](_0x658dfb[_0x1d5d3c(0xd4)]):null,'gatewaySettings':_0x658dfb['gatewaySettings']?JSON[_0x1d5d3c(0xe1)](_0x658dfb[_0x1d5d3c(0xda)]):null,'publicKey':_0x658dfb[_0x1d5d3c(0xc1)],'wallets':{'usdtPolygonWallet':_0x658dfb[_0x1d5d3c(0xd0)],'usdtTrcWallet':_0x658dfb['usdtTrcWallet'],'usdtErcWallet':_0x658dfb[_0x1d5d3c(0xb8)],'usdcPolygonWallet':_0x658dfb['usdcPolygonWallet']},'status':_0x658dfb['status'],'createdAt':_0x658dfb[_0x1d5d3c(0xcb)]};}async[a76_0x84e734(0xc0)](_0x2ad2c2,_0x13acfb){const _0x48ecf9=a76_0x84e734,_0x98b120={..._0x13acfb};_0x13acfb[_0x48ecf9(0xd5)]&&(_0x98b120[_0x48ecf9(0xd5)]=await bcryptjs_1[_0x48ecf9(0xb3)][_0x48ecf9(0xe0)](_0x13acfb['password'],0xc));_0x13acfb[_0x48ecf9(0xd3)]&&(_0x98b120[_0x48ecf9(0xce)]=_0x13acfb[_0x48ecf9(0xd3)],delete _0x98b120[_0x48ecf9(0xd3)]);_0x13acfb[_0x48ecf9(0xb2)]&&(_0x98b120[_0x48ecf9(0xbb)]=_0x13acfb[_0x48ecf9(0xb2)],delete _0x98b120[_0x48ecf9(0xb2)]);_0x13acfb[_0x48ecf9(0xb1)]&&(_0x98b120[_0x48ecf9(0xb6)]=_0x13acfb['merchantUrl'],delete _0x98b120['merchantUrl']);_0x13acfb[_0x48ecf9(0xcd)]&&(_0x98b120[_0x48ecf9(0xd4)]=JSON[_0x48ecf9(0xd1)](_0x13acfb['gateways']),delete _0x98b120[_0x48ecf9(0xcd)]);_0x13acfb[_0x48ecf9(0xda)]&&(_0x98b120[_0x48ecf9(0xda)]=JSON[_0x48ecf9(0xd1)](_0x13acfb[_0x48ecf9(0xda)]),delete _0x98b120['gatewaySettings']);_0x13acfb[_0x48ecf9(0xbe)]&&(_0x13acfb[_0x48ecf9(0xbe)][_0x48ecf9(0xd0)]!==undefined&&(_0x98b120[_0x48ecf9(0xd0)]=_0x13acfb['wallets'][_0x48ecf9(0xd0)]||null),_0x13acfb['wallets'][_0x48ecf9(0xd7)]!==undefined&&(_0x98b120[_0x48ecf9(0xd7)]=_0x13acfb[_0x48ecf9(0xbe)][_0x48ecf9(0xd7)]||null),_0x13acfb[_0x48ecf9(0xbe)]['usdtErcWallet']!==undefined&&(_0x98b120[_0x48ecf9(0xb8)]=_0x13acfb['wallets']['usdtErcWallet']||null),_0x13acfb[_0x48ecf9(0xbe)][_0x48ecf9(0xdd)]!==undefined&&(_0x98b120[_0x48ecf9(0xdd)]=_0x13acfb['wallets'][_0x48ecf9(0xdd)]||null),delete _0x98b120[_0x48ecf9(0xbe)]);const _0x30ad25=await database_1[_0x48ecf9(0xb3)][_0x48ecf9(0xdc)][_0x48ecf9(0xd2)]({'where':{'id':_0x2ad2c2},'data':_0x98b120,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x30ad25['id'],'fullName':_0x30ad25[_0x48ecf9(0xce)],'username':_0x30ad25[_0x48ecf9(0xc8)],'telegramId':_0x30ad25['telegram'],'merchantUrl':_0x30ad25[_0x48ecf9(0xb6)],'gateways':_0x30ad25['paymentGateways']?JSON['parse'](_0x30ad25[_0x48ecf9(0xd4)]):null,'gatewaySettings':_0x30ad25[_0x48ecf9(0xda)]?JSON[_0x48ecf9(0xe1)](_0x30ad25[_0x48ecf9(0xda)]):null,'publicKey':_0x30ad25[_0x48ecf9(0xc1)],'wallets':{'usdtPolygonWallet':_0x30ad25[_0x48ecf9(0xd0)],'usdtTrcWallet':_0x30ad25[_0x48ecf9(0xd7)],'usdtErcWallet':_0x30ad25[_0x48ecf9(0xb8)],'usdcPolygonWallet':_0x30ad25[_0x48ecf9(0xdd)]},'status':_0x30ad25[_0x48ecf9(0xd6)],'createdAt':_0x30ad25['createdAt']};}async[a76_0x84e734(0xca)](_0x253333){const _0xe9accd=a76_0x84e734;await database_1[_0xe9accd(0xb3)][_0xe9accd(0xdc)]['delete']({'where':{'id':_0x253333}});}}exports[a76_0x84e734(0xde)]=UserService;