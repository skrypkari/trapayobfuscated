'use strict';const a56_0x377ada=a56_0x5dd6;function a56_0x5dd6(_0x4819d3,_0x4b10de){const _0x5b30f9=a56_0x5b30();return a56_0x5dd6=function(_0x5dd65f,_0x538d3b){_0x5dd65f=_0x5dd65f-0xcc;let _0x4d3cbd=_0x5b30f9[_0x5dd65f];return _0x4d3cbd;},a56_0x5dd6(_0x4819d3,_0x4b10de);}(function(_0x49f5fe,_0x464c55){const _0x58e794=a56_0x5dd6,_0x51b6fe=_0x49f5fe();while(!![]){try{const _0x509e2e=parseInt(_0x58e794(0xe2))/0x1*(-parseInt(_0x58e794(0xf9))/0x2)+-parseInt(_0x58e794(0xcd))/0x3+parseInt(_0x58e794(0xf3))/0x4+-parseInt(_0x58e794(0x102))/0x5+-parseInt(_0x58e794(0xcc))/0x6*(-parseInt(_0x58e794(0xfb))/0x7)+parseInt(_0x58e794(0xdc))/0x8*(-parseInt(_0x58e794(0xd4))/0x9)+parseInt(_0x58e794(0x106))/0xa*(parseInt(_0x58e794(0xf4))/0xb);if(_0x509e2e===_0x464c55)break;else _0x51b6fe['push'](_0x51b6fe['shift']());}catch(_0x5231a0){_0x51b6fe['push'](_0x51b6fe['shift']());}}}(a56_0x5b30,0xa756b));var __importDefault=this&&this[a56_0x377ada(0xd0)]||function(_0x40d560){return _0x40d560&&_0x40d560['__esModule']?_0x40d560:{'default':_0x40d560};};function a56_0x5b30(){const _0x474a66=['2282255DjRZTg','publicKey','createdAt','default','3918610sCiXQN','50550Yrdyaj','2428230eejavZ','deleteUser','telegram','__importDefault','hex','randomBytes','usdcPolygonWallet','9184743VIyPbN','usdtErcWallet','telegramId','desc','password','toString','findMany','UserService','8Xqhduj','bcryptjs','usdtTrcWallet','create','findUnique','gatewaySettings','135853feAnSr','stringify','generateApiKeys','shop','fullName','hash','sk_','merchantUrl','name','map','pk_','paymentGateways','Telegram\x20username\x20already\x20exists','status','../config/database','usdtPolygonWallet','shopUrl','3894144iWwDVL','55XpUrZD','wallets','defineProperty','__esModule','createUser','6BpNTaY','updateUser','371soKUze','ACTIVE','parse','crypto','username','gateways','delete'];a56_0x5b30=function(){return _0x474a66;};return a56_0x5b30();}Object[a56_0x377ada(0xf6)](exports,a56_0x377ada(0xf7),{'value':!![]}),exports[a56_0x377ada(0xdb)]=void 0x0;const bcryptjs_1=__importDefault(require(a56_0x377ada(0xdd))),crypto_1=__importDefault(require(a56_0x377ada(0xfe))),database_1=__importDefault(require(a56_0x377ada(0xf0)));class UserService{[a56_0x377ada(0xe4)](){const _0x44a8db=a56_0x377ada,_0x56aaec=_0x44a8db(0xec)+crypto_1[_0x44a8db(0x105)][_0x44a8db(0xd2)](0x20)[_0x44a8db(0xd9)](_0x44a8db(0xd1)),_0x11d9ac=_0x44a8db(0xe8)+crypto_1['default']['randomBytes'](0x20)['toString']('hex');return{'publicKey':_0x56aaec,'secretKey':_0x11d9ac};}async[a56_0x377ada(0xf8)](_0x74a117){const _0x225c0e=a56_0x377ada,{fullName:_0x2ca014,username:_0x5396ad,password:_0x512a33,telegramId:_0x20da38,merchantUrl:_0x1486e7,gateways:_0x49aac3,gatewaySettings:_0x316533,wallets:_0x5a2adb}=_0x74a117,_0x5f17b8=await database_1[_0x225c0e(0x105)][_0x225c0e(0xe5)][_0x225c0e(0xe0)]({'where':{'username':_0x5396ad}});if(_0x5f17b8)throw new Error('Username\x20already\x20exists');if(_0x20da38){const _0x2cebda=await database_1[_0x225c0e(0x105)][_0x225c0e(0xe5)][_0x225c0e(0xe0)]({'where':{'telegram':_0x20da38}});if(_0x2cebda)throw new Error(_0x225c0e(0xee));}const _0x472f3c=await bcryptjs_1[_0x225c0e(0x105)][_0x225c0e(0xe7)](_0x512a33,0xc),{publicKey:_0x2f1795,secretKey:_0x205e99}=this[_0x225c0e(0xe4)](),_0x5daaf2=await database_1[_0x225c0e(0x105)][_0x225c0e(0xe5)][_0x225c0e(0xdf)]({'data':{'name':_0x2ca014,'username':_0x5396ad,'password':_0x472f3c,'telegram':_0x20da38,'shopUrl':_0x1486e7,'paymentGateways':_0x49aac3?JSON['stringify'](_0x49aac3):null,'gatewaySettings':_0x316533?JSON['stringify'](_0x316533):null,'usdtPolygonWallet':_0x5a2adb?.[_0x225c0e(0xf1)]||null,'usdtTrcWallet':_0x5a2adb?.['usdtTrcWallet']||null,'usdtErcWallet':_0x5a2adb?.[_0x225c0e(0xd5)]||null,'usdcPolygonWallet':_0x5a2adb?.[_0x225c0e(0xd3)]||null,'publicKey':_0x2f1795,'secretKey':_0x205e99,'status':_0x225c0e(0xfc)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x5daaf2['id'],'fullName':_0x5daaf2[_0x225c0e(0xea)],'username':_0x5daaf2['username'],'telegramId':_0x5daaf2[_0x225c0e(0xcf)],'merchantUrl':_0x5daaf2[_0x225c0e(0xf2)],'gateways':_0x5daaf2[_0x225c0e(0xed)]?JSON['parse'](_0x5daaf2['paymentGateways']):null,'gatewaySettings':_0x5daaf2['gatewaySettings']?JSON['parse'](_0x5daaf2[_0x225c0e(0xe1)]):null,'publicKey':_0x5daaf2[_0x225c0e(0x103)],'wallets':{'usdtPolygonWallet':_0x5daaf2['usdtPolygonWallet'],'usdtTrcWallet':_0x5daaf2[_0x225c0e(0xde)],'usdtErcWallet':_0x5daaf2['usdtErcWallet'],'usdcPolygonWallet':_0x5daaf2[_0x225c0e(0xd3)]},'status':_0x5daaf2['status'],'createdAt':_0x5daaf2[_0x225c0e(0x104)]};}async['getAllUsers'](){const _0x49321c=a56_0x377ada,_0x539348=await database_1[_0x49321c(0x105)][_0x49321c(0xe5)][_0x49321c(0xda)]({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':_0x49321c(0xd7)}});return _0x539348[_0x49321c(0xeb)](_0x374c24=>({'id':_0x374c24['id'],'fullName':_0x374c24[_0x49321c(0xea)],'username':_0x374c24[_0x49321c(0xff)],'telegramId':_0x374c24['telegram'],'merchantUrl':_0x374c24[_0x49321c(0xf2)],'gateways':_0x374c24[_0x49321c(0xed)]?JSON[_0x49321c(0xfd)](_0x374c24[_0x49321c(0xed)]):null,'gatewaySettings':_0x374c24['gatewaySettings']?JSON[_0x49321c(0xfd)](_0x374c24[_0x49321c(0xe1)]):null,'publicKey':_0x374c24[_0x49321c(0x103)],'wallets':{'usdtPolygonWallet':_0x374c24['usdtPolygonWallet'],'usdtTrcWallet':_0x374c24[_0x49321c(0xde)],'usdtErcWallet':_0x374c24[_0x49321c(0xd5)],'usdcPolygonWallet':_0x374c24[_0x49321c(0xd3)]},'status':_0x374c24[_0x49321c(0xef)],'createdAt':_0x374c24[_0x49321c(0x104)]}));}async['getUserById'](_0x3d8652){const _0x25959c=a56_0x377ada,_0x3a4248=await database_1['default'][_0x25959c(0xe5)]['findUnique']({'where':{'id':_0x3d8652},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x3a4248)return null;return{'id':_0x3a4248['id'],'fullName':_0x3a4248['name'],'username':_0x3a4248[_0x25959c(0xff)],'telegramId':_0x3a4248[_0x25959c(0xcf)],'merchantUrl':_0x3a4248['shopUrl'],'gateways':_0x3a4248[_0x25959c(0xed)]?JSON[_0x25959c(0xfd)](_0x3a4248[_0x25959c(0xed)]):null,'gatewaySettings':_0x3a4248['gatewaySettings']?JSON['parse'](_0x3a4248[_0x25959c(0xe1)]):null,'publicKey':_0x3a4248[_0x25959c(0x103)],'wallets':{'usdtPolygonWallet':_0x3a4248['usdtPolygonWallet'],'usdtTrcWallet':_0x3a4248[_0x25959c(0xde)],'usdtErcWallet':_0x3a4248[_0x25959c(0xd5)],'usdcPolygonWallet':_0x3a4248[_0x25959c(0xd3)]},'status':_0x3a4248[_0x25959c(0xef)],'createdAt':_0x3a4248['createdAt']};}async[a56_0x377ada(0xfa)](_0x491a64,_0x305734){const _0x26e6c5=a56_0x377ada,_0x411c8f={..._0x305734};_0x305734[_0x26e6c5(0xd8)]&&(_0x411c8f['password']=await bcryptjs_1[_0x26e6c5(0x105)]['hash'](_0x305734['password'],0xc));_0x305734[_0x26e6c5(0xe6)]&&(_0x411c8f[_0x26e6c5(0xea)]=_0x305734[_0x26e6c5(0xe6)],delete _0x411c8f[_0x26e6c5(0xe6)]);_0x305734[_0x26e6c5(0xd6)]&&(_0x411c8f['telegram']=_0x305734['telegramId'],delete _0x411c8f[_0x26e6c5(0xd6)]);_0x305734['merchantUrl']&&(_0x411c8f[_0x26e6c5(0xf2)]=_0x305734[_0x26e6c5(0xe9)],delete _0x411c8f['merchantUrl']);_0x305734[_0x26e6c5(0x100)]&&(_0x411c8f[_0x26e6c5(0xed)]=JSON[_0x26e6c5(0xe3)](_0x305734[_0x26e6c5(0x100)]),delete _0x411c8f['gateways']);_0x305734[_0x26e6c5(0xe1)]&&(_0x411c8f[_0x26e6c5(0xe1)]=JSON[_0x26e6c5(0xe3)](_0x305734['gatewaySettings']),delete _0x411c8f[_0x26e6c5(0xe1)]);_0x305734['wallets']&&(_0x305734[_0x26e6c5(0xf5)][_0x26e6c5(0xf1)]!==undefined&&(_0x411c8f['usdtPolygonWallet']=_0x305734['wallets'][_0x26e6c5(0xf1)]||null),_0x305734[_0x26e6c5(0xf5)][_0x26e6c5(0xde)]!==undefined&&(_0x411c8f[_0x26e6c5(0xde)]=_0x305734[_0x26e6c5(0xf5)]['usdtTrcWallet']||null),_0x305734['wallets'][_0x26e6c5(0xd5)]!==undefined&&(_0x411c8f[_0x26e6c5(0xd5)]=_0x305734[_0x26e6c5(0xf5)][_0x26e6c5(0xd5)]||null),_0x305734[_0x26e6c5(0xf5)][_0x26e6c5(0xd3)]!==undefined&&(_0x411c8f[_0x26e6c5(0xd3)]=_0x305734[_0x26e6c5(0xf5)][_0x26e6c5(0xd3)]||null),delete _0x411c8f['wallets']);const _0x1a2270=await database_1['default'][_0x26e6c5(0xe5)]['update']({'where':{'id':_0x491a64},'data':_0x411c8f,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x1a2270['id'],'fullName':_0x1a2270[_0x26e6c5(0xea)],'username':_0x1a2270[_0x26e6c5(0xff)],'telegramId':_0x1a2270['telegram'],'merchantUrl':_0x1a2270[_0x26e6c5(0xf2)],'gateways':_0x1a2270['paymentGateways']?JSON[_0x26e6c5(0xfd)](_0x1a2270[_0x26e6c5(0xed)]):null,'gatewaySettings':_0x1a2270[_0x26e6c5(0xe1)]?JSON[_0x26e6c5(0xfd)](_0x1a2270['gatewaySettings']):null,'publicKey':_0x1a2270[_0x26e6c5(0x103)],'wallets':{'usdtPolygonWallet':_0x1a2270[_0x26e6c5(0xf1)],'usdtTrcWallet':_0x1a2270[_0x26e6c5(0xde)],'usdtErcWallet':_0x1a2270[_0x26e6c5(0xd5)],'usdcPolygonWallet':_0x1a2270['usdcPolygonWallet']},'status':_0x1a2270[_0x26e6c5(0xef)],'createdAt':_0x1a2270[_0x26e6c5(0x104)]};}async[a56_0x377ada(0xce)](_0x1346b2){const _0x183fcb=a56_0x377ada;await database_1[_0x183fcb(0x105)][_0x183fcb(0xe5)][_0x183fcb(0x101)]({'where':{'id':_0x1346b2}});}}exports[a56_0x377ada(0xdb)]=UserService;