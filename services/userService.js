'use strict';function a59_0x290c(_0x322761,_0x4d1038){const _0x3acaa9=a59_0x3aca();return a59_0x290c=function(_0x290cc0,_0xb3b3d8){_0x290cc0=_0x290cc0-0x1ed;let _0x36c01e=_0x3acaa9[_0x290cc0];return _0x36c01e;},a59_0x290c(_0x322761,_0x4d1038);}const a59_0x3b9b65=a59_0x290c;function a59_0x3aca(){const _0x583776=['7Inezax','telegram','randomBytes','29312vjydvq','Telegram\x20username\x20already\x20exists','usdtErcWallet','getAllUsers','findMany','deleteUser','createUser','updateUser','usdtTrcWallet','1bFDAxY','toString','gateways','bcryptjs','stringify','update','912498egrJVV','hex','status','createdAt','fullName','15iIPgtf','paymentGateways','username','parse','Username\x20already\x20exists','1204356ZjmhLj','merchantUrl','5086840AXLEPK','shop','7487744oUotKO','generateApiKeys','pk_','telegramId','sk_','findUnique','usdtPolygonWallet','password','gatewaySettings','2487664gGNVBO','map','publicKey','default','../config/database','6777549PSvvey','create','90TSkRdF','name','shopUrl','delete','wallets','getUserById','crypto','hash','usdcPolygonWallet','UserService','__esModule'];a59_0x3aca=function(){return _0x583776;};return a59_0x3aca();}(function(_0x3311c1,_0x464433){const _0x52e032=a59_0x290c,_0x2416a2=_0x3311c1();while(!![]){try{const _0x178748=-parseInt(_0x52e032(0x20a))/0x1*(-parseInt(_0x52e032(0x21a))/0x2)+-parseInt(_0x52e032(0x1f3))/0x3*(parseInt(_0x52e032(0x201))/0x4)+parseInt(_0x52e032(0x215))/0x5*(parseInt(_0x52e032(0x210))/0x6)+-parseInt(_0x52e032(0x1fe))/0x7*(-parseInt(_0x52e032(0x227))/0x8)+parseInt(_0x52e032(0x1f1))/0x9+-parseInt(_0x52e032(0x21c))/0xa+-parseInt(_0x52e032(0x21e))/0xb;if(_0x178748===_0x464433)break;else _0x2416a2['push'](_0x2416a2['shift']());}catch(_0x3030c1){_0x2416a2['push'](_0x2416a2['shift']());}}}(a59_0x3aca,0xae202));var __importDefault=this&&this['__importDefault']||function(_0x455b58){const _0x22ed06=a59_0x290c;return _0x455b58&&_0x455b58[_0x22ed06(0x1fd)]?_0x455b58:{'default':_0x455b58};};Object['defineProperty'](exports,a59_0x3b9b65(0x1fd),{'value':!![]}),exports[a59_0x3b9b65(0x1fc)]=void 0x0;const bcryptjs_1=__importDefault(require(a59_0x3b9b65(0x20d))),crypto_1=__importDefault(require(a59_0x3b9b65(0x1f9))),database_1=__importDefault(require(a59_0x3b9b65(0x1f0)));class UserService{[a59_0x3b9b65(0x21f)](){const _0x3814d4=a59_0x3b9b65,_0x37184a=_0x3814d4(0x220)+crypto_1[_0x3814d4(0x1ef)][_0x3814d4(0x200)](0x20)[_0x3814d4(0x20b)](_0x3814d4(0x211)),_0x30aadb=_0x3814d4(0x222)+crypto_1[_0x3814d4(0x1ef)][_0x3814d4(0x200)](0x20)[_0x3814d4(0x20b)]('hex');return{'publicKey':_0x37184a,'secretKey':_0x30aadb};}async[a59_0x3b9b65(0x207)](_0x322ddb){const _0x54ce01=a59_0x3b9b65,{fullName:_0x1e2bb5,username:_0x4c7bf5,password:_0x5c70cb,telegramId:_0x554fae,merchantUrl:_0x587964,gateways:_0x3811be,gatewaySettings:_0x247c1e,wallets:_0x441ba8}=_0x322ddb,_0x3b1d55=await database_1['default'][_0x54ce01(0x21d)][_0x54ce01(0x223)]({'where':{'username':_0x4c7bf5}});if(_0x3b1d55)throw new Error(_0x54ce01(0x219));if(_0x554fae){const _0x58d4c2=await database_1[_0x54ce01(0x1ef)][_0x54ce01(0x21d)][_0x54ce01(0x223)]({'where':{'telegram':_0x554fae}});if(_0x58d4c2)throw new Error(_0x54ce01(0x202));}const _0x5aa584=await bcryptjs_1[_0x54ce01(0x1ef)][_0x54ce01(0x1fa)](_0x5c70cb,0xc),{publicKey:_0x5e3ea1,secretKey:_0x3550bc}=this[_0x54ce01(0x21f)](),_0x813753=await database_1[_0x54ce01(0x1ef)][_0x54ce01(0x21d)][_0x54ce01(0x1f2)]({'data':{'name':_0x1e2bb5,'username':_0x4c7bf5,'password':_0x5aa584,'telegram':_0x554fae,'shopUrl':_0x587964,'paymentGateways':_0x3811be?JSON[_0x54ce01(0x20e)](_0x3811be):null,'gatewaySettings':_0x247c1e?JSON[_0x54ce01(0x20e)](_0x247c1e):null,'usdtPolygonWallet':_0x441ba8?.['usdtPolygonWallet']||null,'usdtTrcWallet':_0x441ba8?.[_0x54ce01(0x209)]||null,'usdtErcWallet':_0x441ba8?.['usdtErcWallet']||null,'usdcPolygonWallet':_0x441ba8?.[_0x54ce01(0x1fb)]||null,'publicKey':_0x5e3ea1,'secretKey':_0x3550bc,'status':'ACTIVE'},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x813753['id'],'fullName':_0x813753[_0x54ce01(0x1f4)],'username':_0x813753[_0x54ce01(0x217)],'telegramId':_0x813753['telegram'],'merchantUrl':_0x813753[_0x54ce01(0x1f5)],'gateways':_0x813753[_0x54ce01(0x216)]?JSON[_0x54ce01(0x218)](_0x813753[_0x54ce01(0x216)]):null,'gatewaySettings':_0x813753[_0x54ce01(0x226)]?JSON[_0x54ce01(0x218)](_0x813753[_0x54ce01(0x226)]):null,'publicKey':_0x813753[_0x54ce01(0x1ee)],'wallets':{'usdtPolygonWallet':_0x813753['usdtPolygonWallet'],'usdtTrcWallet':_0x813753['usdtTrcWallet'],'usdtErcWallet':_0x813753[_0x54ce01(0x203)],'usdcPolygonWallet':_0x813753[_0x54ce01(0x1fb)]},'status':_0x813753[_0x54ce01(0x212)],'createdAt':_0x813753[_0x54ce01(0x213)]};}async[a59_0x3b9b65(0x204)](){const _0x53cbf2=a59_0x3b9b65,_0x430bac=await database_1[_0x53cbf2(0x1ef)][_0x53cbf2(0x21d)][_0x53cbf2(0x205)]({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':'desc'}});return _0x430bac[_0x53cbf2(0x1ed)](_0x17ef7d=>({'id':_0x17ef7d['id'],'fullName':_0x17ef7d[_0x53cbf2(0x1f4)],'username':_0x17ef7d[_0x53cbf2(0x217)],'telegramId':_0x17ef7d[_0x53cbf2(0x1ff)],'merchantUrl':_0x17ef7d[_0x53cbf2(0x1f5)],'gateways':_0x17ef7d[_0x53cbf2(0x216)]?JSON[_0x53cbf2(0x218)](_0x17ef7d[_0x53cbf2(0x216)]):null,'gatewaySettings':_0x17ef7d[_0x53cbf2(0x226)]?JSON[_0x53cbf2(0x218)](_0x17ef7d[_0x53cbf2(0x226)]):null,'publicKey':_0x17ef7d[_0x53cbf2(0x1ee)],'wallets':{'usdtPolygonWallet':_0x17ef7d[_0x53cbf2(0x224)],'usdtTrcWallet':_0x17ef7d[_0x53cbf2(0x209)],'usdtErcWallet':_0x17ef7d[_0x53cbf2(0x203)],'usdcPolygonWallet':_0x17ef7d[_0x53cbf2(0x1fb)]},'status':_0x17ef7d[_0x53cbf2(0x212)],'createdAt':_0x17ef7d['createdAt']}));}async[a59_0x3b9b65(0x1f8)](_0x1f6aeb){const _0x5006af=a59_0x3b9b65,_0x5e295f=await database_1['default'][_0x5006af(0x21d)]['findUnique']({'where':{'id':_0x1f6aeb},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x5e295f)return null;return{'id':_0x5e295f['id'],'fullName':_0x5e295f[_0x5006af(0x1f4)],'username':_0x5e295f[_0x5006af(0x217)],'telegramId':_0x5e295f[_0x5006af(0x1ff)],'merchantUrl':_0x5e295f['shopUrl'],'gateways':_0x5e295f['paymentGateways']?JSON[_0x5006af(0x218)](_0x5e295f[_0x5006af(0x216)]):null,'gatewaySettings':_0x5e295f[_0x5006af(0x226)]?JSON[_0x5006af(0x218)](_0x5e295f[_0x5006af(0x226)]):null,'publicKey':_0x5e295f[_0x5006af(0x1ee)],'wallets':{'usdtPolygonWallet':_0x5e295f[_0x5006af(0x224)],'usdtTrcWallet':_0x5e295f[_0x5006af(0x209)],'usdtErcWallet':_0x5e295f[_0x5006af(0x203)],'usdcPolygonWallet':_0x5e295f[_0x5006af(0x1fb)]},'status':_0x5e295f[_0x5006af(0x212)],'createdAt':_0x5e295f[_0x5006af(0x213)]};}async[a59_0x3b9b65(0x208)](_0x201e69,_0x264e4d){const _0x2743fc=a59_0x3b9b65,_0x51c01c={..._0x264e4d};_0x264e4d['password']&&(_0x51c01c['password']=await bcryptjs_1[_0x2743fc(0x1ef)][_0x2743fc(0x1fa)](_0x264e4d[_0x2743fc(0x225)],0xc));_0x264e4d[_0x2743fc(0x214)]&&(_0x51c01c['name']=_0x264e4d[_0x2743fc(0x214)],delete _0x51c01c['fullName']);_0x264e4d[_0x2743fc(0x221)]&&(_0x51c01c[_0x2743fc(0x1ff)]=_0x264e4d[_0x2743fc(0x221)],delete _0x51c01c['telegramId']);_0x264e4d[_0x2743fc(0x21b)]&&(_0x51c01c['shopUrl']=_0x264e4d[_0x2743fc(0x21b)],delete _0x51c01c[_0x2743fc(0x21b)]);_0x264e4d[_0x2743fc(0x20c)]&&(_0x51c01c[_0x2743fc(0x216)]=JSON['stringify'](_0x264e4d[_0x2743fc(0x20c)]),delete _0x51c01c[_0x2743fc(0x20c)]);_0x264e4d[_0x2743fc(0x226)]&&(_0x51c01c[_0x2743fc(0x226)]=JSON[_0x2743fc(0x20e)](_0x264e4d['gatewaySettings']),delete _0x51c01c[_0x2743fc(0x226)]);_0x264e4d[_0x2743fc(0x1f7)]&&(_0x264e4d[_0x2743fc(0x1f7)][_0x2743fc(0x224)]!==undefined&&(_0x51c01c[_0x2743fc(0x224)]=_0x264e4d['wallets'][_0x2743fc(0x224)]||null),_0x264e4d[_0x2743fc(0x1f7)]['usdtTrcWallet']!==undefined&&(_0x51c01c[_0x2743fc(0x209)]=_0x264e4d[_0x2743fc(0x1f7)][_0x2743fc(0x209)]||null),_0x264e4d[_0x2743fc(0x1f7)]['usdtErcWallet']!==undefined&&(_0x51c01c[_0x2743fc(0x203)]=_0x264e4d[_0x2743fc(0x1f7)][_0x2743fc(0x203)]||null),_0x264e4d[_0x2743fc(0x1f7)]['usdcPolygonWallet']!==undefined&&(_0x51c01c[_0x2743fc(0x1fb)]=_0x264e4d['wallets'][_0x2743fc(0x1fb)]||null),delete _0x51c01c[_0x2743fc(0x1f7)]);const _0x4592d5=await database_1[_0x2743fc(0x1ef)][_0x2743fc(0x21d)][_0x2743fc(0x20f)]({'where':{'id':_0x201e69},'data':_0x51c01c,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x4592d5['id'],'fullName':_0x4592d5['name'],'username':_0x4592d5[_0x2743fc(0x217)],'telegramId':_0x4592d5[_0x2743fc(0x1ff)],'merchantUrl':_0x4592d5[_0x2743fc(0x1f5)],'gateways':_0x4592d5['paymentGateways']?JSON['parse'](_0x4592d5[_0x2743fc(0x216)]):null,'gatewaySettings':_0x4592d5[_0x2743fc(0x226)]?JSON['parse'](_0x4592d5[_0x2743fc(0x226)]):null,'publicKey':_0x4592d5[_0x2743fc(0x1ee)],'wallets':{'usdtPolygonWallet':_0x4592d5[_0x2743fc(0x224)],'usdtTrcWallet':_0x4592d5[_0x2743fc(0x209)],'usdtErcWallet':_0x4592d5[_0x2743fc(0x203)],'usdcPolygonWallet':_0x4592d5[_0x2743fc(0x1fb)]},'status':_0x4592d5[_0x2743fc(0x212)],'createdAt':_0x4592d5['createdAt']};}async[a59_0x3b9b65(0x206)](_0x50d490){const _0x3a87c8=a59_0x3b9b65;await database_1[_0x3a87c8(0x1ef)][_0x3a87c8(0x21d)][_0x3a87c8(0x1f6)]({'where':{'id':_0x50d490}});}}exports[a59_0x3b9b65(0x1fc)]=UserService;