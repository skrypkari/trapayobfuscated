'use strict';function a61_0x5af7(_0x579f00,_0x34e32c){const _0x93551d=a61_0x9355();return a61_0x5af7=function(_0x5af787,_0x425651){_0x5af787=_0x5af787-0x1cf;let _0x2769b9=_0x93551d[_0x5af787];return _0x2769b9;},a61_0x5af7(_0x579f00,_0x34e32c);}const a61_0xfe58d0=a61_0x5af7;(function(_0x3b2fbb,_0x3807b6){const _0x469a2f=a61_0x5af7,_0x4e820b=_0x3b2fbb();while(!![]){try{const _0x536dd0=-parseInt(_0x469a2f(0x1e4))/0x1*(parseInt(_0x469a2f(0x1d9))/0x2)+-parseInt(_0x469a2f(0x1de))/0x3+parseInt(_0x469a2f(0x1fa))/0x4+parseInt(_0x469a2f(0x1d1))/0x5+parseInt(_0x469a2f(0x1f5))/0x6+parseInt(_0x469a2f(0x1d4))/0x7+-parseInt(_0x469a2f(0x205))/0x8;if(_0x536dd0===_0x3807b6)break;else _0x4e820b['push'](_0x4e820b['shift']());}catch(_0x58a895){_0x4e820b['push'](_0x4e820b['shift']());}}}(a61_0x9355,0x2cc52));var __importDefault=this&&this[a61_0xfe58d0(0x1f9)]||function(_0x5c7d02){const _0x6b27d3=a61_0xfe58d0;return _0x5c7d02&&_0x5c7d02[_0x6b27d3(0x1eb)]?_0x5c7d02:{'default':_0x5c7d02};};Object['defineProperty'](exports,a61_0xfe58d0(0x1eb),{'value':!![]}),exports[a61_0xfe58d0(0x1ef)]=void 0x0;function a61_0x9355(){const _0x3a19a6=['724344ZBgtfF','Telegram\x20username\x20already\x20exists','updateUser','wallets','__importDefault','1318984TOMPfd','createdAt','hex','getUserById','telegram','deleteUser','usdtErcWallet','shop','createUser','paymentGateways','getAllUsers','1520864ZgunCh','status','findUnique','490840ZSJeXn','update','default','2042831ZCaDAm','fullName','usdtTrcWallet','password','toString','14AEtSYi','delete','publicKey','telegramId','pk_','670134vliBvL','gateways','generateApiKeys','shopUrl','usdcPolygonWallet','randomBytes','34801hiDOLo','parse','gatewaySettings','usdtPolygonWallet','sk_','Username\x20already\x20exists','username','__esModule','../config/database','merchantUrl','hash','UserService','map','crypto','name','create','stringify'];a61_0x9355=function(){return _0x3a19a6;};return a61_0x9355();}const bcryptjs_1=__importDefault(require('bcryptjs')),crypto_1=__importDefault(require(a61_0xfe58d0(0x1f1))),database_1=__importDefault(require(a61_0xfe58d0(0x1ec)));class UserService{[a61_0xfe58d0(0x1e0)](){const _0x1783ec=a61_0xfe58d0,_0x3f2bd4=_0x1783ec(0x1dd)+crypto_1[_0x1783ec(0x1d3)][_0x1783ec(0x1e3)](0x20)[_0x1783ec(0x1d8)](_0x1783ec(0x1fc)),_0x2b0d62=_0x1783ec(0x1e8)+crypto_1['default'][_0x1783ec(0x1e3)](0x20)[_0x1783ec(0x1d8)](_0x1783ec(0x1fc));return{'publicKey':_0x3f2bd4,'secretKey':_0x2b0d62};}async[a61_0xfe58d0(0x202)](_0x400a44){const _0x4f9421=a61_0xfe58d0,{fullName:_0x55467b,username:_0x4a2259,password:_0x2efbe8,telegramId:_0x5dc432,merchantUrl:_0xf9e684,gateways:_0xd63297,gatewaySettings:_0x4ac6c5,wallets:_0xb03451}=_0x400a44,_0x1655d7=await database_1[_0x4f9421(0x1d3)][_0x4f9421(0x201)][_0x4f9421(0x1d0)]({'where':{'username':_0x4a2259}});if(_0x1655d7)throw new Error(_0x4f9421(0x1e9));if(_0x5dc432){const _0x51ce85=await database_1[_0x4f9421(0x1d3)][_0x4f9421(0x201)][_0x4f9421(0x1d0)]({'where':{'telegram':_0x5dc432}});if(_0x51ce85)throw new Error(_0x4f9421(0x1f6));}const _0x4b5cc5=await bcryptjs_1[_0x4f9421(0x1d3)][_0x4f9421(0x1ee)](_0x2efbe8,0xc),{publicKey:_0x964c8,secretKey:_0x4f8cf6}=this[_0x4f9421(0x1e0)](),_0x10921f=await database_1['default'][_0x4f9421(0x201)][_0x4f9421(0x1f3)]({'data':{'name':_0x55467b,'username':_0x4a2259,'password':_0x4b5cc5,'telegram':_0x5dc432,'shopUrl':_0xf9e684,'paymentGateways':_0xd63297?JSON[_0x4f9421(0x1f4)](_0xd63297):null,'gatewaySettings':_0x4ac6c5?JSON[_0x4f9421(0x1f4)](_0x4ac6c5):null,'usdtPolygonWallet':_0xb03451?.[_0x4f9421(0x1e7)]||null,'usdtTrcWallet':_0xb03451?.['usdtTrcWallet']||null,'usdtErcWallet':_0xb03451?.[_0x4f9421(0x200)]||null,'usdcPolygonWallet':_0xb03451?.['usdcPolygonWallet']||null,'publicKey':_0x964c8,'secretKey':_0x4f8cf6,'status':'ACTIVE'},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x10921f['id'],'fullName':_0x10921f['name'],'username':_0x10921f[_0x4f9421(0x1ea)],'telegramId':_0x10921f['telegram'],'merchantUrl':_0x10921f[_0x4f9421(0x1e1)],'gateways':_0x10921f[_0x4f9421(0x203)]?JSON['parse'](_0x10921f[_0x4f9421(0x203)]):null,'gatewaySettings':_0x10921f['gatewaySettings']?JSON[_0x4f9421(0x1e5)](_0x10921f[_0x4f9421(0x1e6)]):null,'publicKey':_0x10921f[_0x4f9421(0x1db)],'wallets':{'usdtPolygonWallet':_0x10921f['usdtPolygonWallet'],'usdtTrcWallet':_0x10921f['usdtTrcWallet'],'usdtErcWallet':_0x10921f['usdtErcWallet'],'usdcPolygonWallet':_0x10921f[_0x4f9421(0x1e2)]},'status':_0x10921f[_0x4f9421(0x1cf)],'createdAt':_0x10921f[_0x4f9421(0x1fb)]};}async[a61_0xfe58d0(0x204)](){const _0x15cd2e=a61_0xfe58d0,_0x52c8ea=await database_1['default'][_0x15cd2e(0x201)]['findMany']({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':'desc'}});return _0x52c8ea[_0x15cd2e(0x1f0)](_0x2fb4ef=>({'id':_0x2fb4ef['id'],'fullName':_0x2fb4ef[_0x15cd2e(0x1f2)],'username':_0x2fb4ef[_0x15cd2e(0x1ea)],'telegramId':_0x2fb4ef[_0x15cd2e(0x1fe)],'merchantUrl':_0x2fb4ef[_0x15cd2e(0x1e1)],'gateways':_0x2fb4ef[_0x15cd2e(0x203)]?JSON['parse'](_0x2fb4ef['paymentGateways']):null,'gatewaySettings':_0x2fb4ef[_0x15cd2e(0x1e6)]?JSON[_0x15cd2e(0x1e5)](_0x2fb4ef[_0x15cd2e(0x1e6)]):null,'publicKey':_0x2fb4ef[_0x15cd2e(0x1db)],'wallets':{'usdtPolygonWallet':_0x2fb4ef[_0x15cd2e(0x1e7)],'usdtTrcWallet':_0x2fb4ef['usdtTrcWallet'],'usdtErcWallet':_0x2fb4ef['usdtErcWallet'],'usdcPolygonWallet':_0x2fb4ef[_0x15cd2e(0x1e2)]},'status':_0x2fb4ef[_0x15cd2e(0x1cf)],'createdAt':_0x2fb4ef[_0x15cd2e(0x1fb)]}));}async[a61_0xfe58d0(0x1fd)](_0xf5cfb1){const _0x30b299=a61_0xfe58d0,_0x16314f=await database_1[_0x30b299(0x1d3)][_0x30b299(0x201)][_0x30b299(0x1d0)]({'where':{'id':_0xf5cfb1},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x16314f)return null;return{'id':_0x16314f['id'],'fullName':_0x16314f['name'],'username':_0x16314f[_0x30b299(0x1ea)],'telegramId':_0x16314f[_0x30b299(0x1fe)],'merchantUrl':_0x16314f[_0x30b299(0x1e1)],'gateways':_0x16314f[_0x30b299(0x203)]?JSON[_0x30b299(0x1e5)](_0x16314f[_0x30b299(0x203)]):null,'gatewaySettings':_0x16314f['gatewaySettings']?JSON['parse'](_0x16314f['gatewaySettings']):null,'publicKey':_0x16314f[_0x30b299(0x1db)],'wallets':{'usdtPolygonWallet':_0x16314f[_0x30b299(0x1e7)],'usdtTrcWallet':_0x16314f['usdtTrcWallet'],'usdtErcWallet':_0x16314f['usdtErcWallet'],'usdcPolygonWallet':_0x16314f[_0x30b299(0x1e2)]},'status':_0x16314f[_0x30b299(0x1cf)],'createdAt':_0x16314f[_0x30b299(0x1fb)]};}async[a61_0xfe58d0(0x1f7)](_0x4bae7f,_0x24cfe6){const _0x491836=a61_0xfe58d0,_0x2508ea={..._0x24cfe6};_0x24cfe6[_0x491836(0x1d7)]&&(_0x2508ea[_0x491836(0x1d7)]=await bcryptjs_1[_0x491836(0x1d3)][_0x491836(0x1ee)](_0x24cfe6[_0x491836(0x1d7)],0xc));_0x24cfe6[_0x491836(0x1d5)]&&(_0x2508ea[_0x491836(0x1f2)]=_0x24cfe6['fullName'],delete _0x2508ea[_0x491836(0x1d5)]);_0x24cfe6['telegramId']&&(_0x2508ea[_0x491836(0x1fe)]=_0x24cfe6[_0x491836(0x1dc)],delete _0x2508ea[_0x491836(0x1dc)]);_0x24cfe6[_0x491836(0x1ed)]&&(_0x2508ea[_0x491836(0x1e1)]=_0x24cfe6[_0x491836(0x1ed)],delete _0x2508ea[_0x491836(0x1ed)]);_0x24cfe6[_0x491836(0x1df)]&&(_0x2508ea[_0x491836(0x203)]=JSON['stringify'](_0x24cfe6[_0x491836(0x1df)]),delete _0x2508ea[_0x491836(0x1df)]);_0x24cfe6[_0x491836(0x1e6)]&&(_0x2508ea['gatewaySettings']=JSON['stringify'](_0x24cfe6[_0x491836(0x1e6)]),delete _0x2508ea[_0x491836(0x1e6)]);_0x24cfe6[_0x491836(0x1f8)]&&(_0x24cfe6[_0x491836(0x1f8)]['usdtPolygonWallet']!==undefined&&(_0x2508ea[_0x491836(0x1e7)]=_0x24cfe6['wallets'][_0x491836(0x1e7)]||null),_0x24cfe6['wallets'][_0x491836(0x1d6)]!==undefined&&(_0x2508ea[_0x491836(0x1d6)]=_0x24cfe6[_0x491836(0x1f8)][_0x491836(0x1d6)]||null),_0x24cfe6[_0x491836(0x1f8)]['usdtErcWallet']!==undefined&&(_0x2508ea['usdtErcWallet']=_0x24cfe6[_0x491836(0x1f8)][_0x491836(0x200)]||null),_0x24cfe6['wallets'][_0x491836(0x1e2)]!==undefined&&(_0x2508ea[_0x491836(0x1e2)]=_0x24cfe6[_0x491836(0x1f8)]['usdcPolygonWallet']||null),delete _0x2508ea['wallets']);const _0xf7101f=await database_1['default']['shop'][_0x491836(0x1d2)]({'where':{'id':_0x4bae7f},'data':_0x2508ea,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0xf7101f['id'],'fullName':_0xf7101f[_0x491836(0x1f2)],'username':_0xf7101f[_0x491836(0x1ea)],'telegramId':_0xf7101f['telegram'],'merchantUrl':_0xf7101f[_0x491836(0x1e1)],'gateways':_0xf7101f[_0x491836(0x203)]?JSON['parse'](_0xf7101f['paymentGateways']):null,'gatewaySettings':_0xf7101f[_0x491836(0x1e6)]?JSON[_0x491836(0x1e5)](_0xf7101f[_0x491836(0x1e6)]):null,'publicKey':_0xf7101f[_0x491836(0x1db)],'wallets':{'usdtPolygonWallet':_0xf7101f['usdtPolygonWallet'],'usdtTrcWallet':_0xf7101f[_0x491836(0x1d6)],'usdtErcWallet':_0xf7101f[_0x491836(0x200)],'usdcPolygonWallet':_0xf7101f[_0x491836(0x1e2)]},'status':_0xf7101f['status'],'createdAt':_0xf7101f[_0x491836(0x1fb)]};}async[a61_0xfe58d0(0x1ff)](_0x2540e3){const _0x39dc1e=a61_0xfe58d0;await database_1[_0x39dc1e(0x1d3)][_0x39dc1e(0x201)][_0x39dc1e(0x1da)]({'where':{'id':_0x2540e3}});}}exports[a61_0xfe58d0(0x1ef)]=UserService;