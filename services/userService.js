'use strict';const a76_0x3c32bd=a76_0x1557;(function(_0x4dfb5f,_0x57d62b){const _0x3e633d=a76_0x1557,_0x2ebf4d=_0x4dfb5f();while(!![]){try{const _0x12b76b=-parseInt(_0x3e633d(0x174))/0x1*(parseInt(_0x3e633d(0x159))/0x2)+-parseInt(_0x3e633d(0x178))/0x3+-parseInt(_0x3e633d(0x17f))/0x4+parseInt(_0x3e633d(0x160))/0x5*(-parseInt(_0x3e633d(0x15f))/0x6)+-parseInt(_0x3e633d(0x175))/0x7+-parseInt(_0x3e633d(0x179))/0x8*(parseInt(_0x3e633d(0x172))/0x9)+parseInt(_0x3e633d(0x185))/0xa;if(_0x12b76b===_0x57d62b)break;else _0x2ebf4d['push'](_0x2ebf4d['shift']());}catch(_0xc5ab60){_0x2ebf4d['push'](_0x2ebf4d['shift']());}}}(a76_0x45d8,0xcc2d8));function a76_0x1557(_0x1bb653,_0x23ff39){_0x1bb653=_0x1bb653-0x14b;const _0x45d8cc=a76_0x45d8();let _0x155702=_0x45d8cc[_0x1bb653];return _0x155702;}function a76_0x45d8(){const _0x371e24=['3715143Vbcfkx','930272iFuekV','getAllUsers','update','telegram','findUnique','paymentGateways','1713240CEyQUK','randomBytes','crypto','status','desc','bcryptjs','50388080COQfvV','usdtErcWallet','delete','createdAt','updateUser','gateways','Telegram\x20username\x20already\x20exists','publicKey','hex','Username\x20already\x20exists','UserService','../config/database','merchantUrl','default','pk_','202822yecTzo','getUserById','name','toString','map','fullName','6okMKOP','785305jNHvYy','createUser','generateApiKeys','gatewaySettings','password','shopUrl','hash','username','usdtPolygonWallet','telegramId','__importDefault','deleteUser','defineProperty','wallets','usdcPolygonWallet','__esModule','parse','shop','36LfzWNH','ACTIVE','13mRTRiu','4166855ALrapb','usdtTrcWallet','stringify'];a76_0x45d8=function(){return _0x371e24;};return a76_0x45d8();}var __importDefault=this&&this[a76_0x3c32bd(0x16a)]||function(_0x2bdafc){return _0x2bdafc&&_0x2bdafc['__esModule']?_0x2bdafc:{'default':_0x2bdafc};};Object[a76_0x3c32bd(0x16c)](exports,a76_0x3c32bd(0x16f),{'value':!![]}),exports[a76_0x3c32bd(0x154)]=void 0x0;const bcryptjs_1=__importDefault(require(a76_0x3c32bd(0x184))),crypto_1=__importDefault(require(a76_0x3c32bd(0x181))),database_1=__importDefault(require(a76_0x3c32bd(0x155)));class UserService{[a76_0x3c32bd(0x162)](){const _0x5ac572=a76_0x3c32bd,_0x3ec604=_0x5ac572(0x158)+crypto_1[_0x5ac572(0x157)][_0x5ac572(0x180)](0x20)['toString'](_0x5ac572(0x152)),_0x19fda2='sk_'+crypto_1[_0x5ac572(0x157)][_0x5ac572(0x180)](0x20)[_0x5ac572(0x15c)](_0x5ac572(0x152));return{'publicKey':_0x3ec604,'secretKey':_0x19fda2};}async[a76_0x3c32bd(0x161)](_0x252250){const _0x598f07=a76_0x3c32bd,{fullName:_0x1cbf7f,username:_0x373052,password:_0x289365,telegramId:_0x4929f8,merchantUrl:_0x43a3af,gateways:_0x14f094,gatewaySettings:_0x89256,wallets:_0x1e4882}=_0x252250,_0x557ac9=await database_1[_0x598f07(0x157)][_0x598f07(0x171)]['findUnique']({'where':{'username':_0x373052}});if(_0x557ac9)throw new Error(_0x598f07(0x153));if(_0x4929f8){const _0x4a2e1=await database_1[_0x598f07(0x157)]['shop'][_0x598f07(0x17d)]({'where':{'telegram':_0x4929f8}});if(_0x4a2e1)throw new Error(_0x598f07(0x150));}const _0x14cf01=await bcryptjs_1['default']['hash'](_0x289365,0xc),{publicKey:_0x54794d,secretKey:_0x2ecdb7}=this[_0x598f07(0x162)](),_0x74f710=await database_1[_0x598f07(0x157)][_0x598f07(0x171)]['create']({'data':{'name':_0x1cbf7f,'username':_0x373052,'password':_0x14cf01,'telegram':_0x4929f8,'shopUrl':_0x43a3af,'paymentGateways':_0x14f094?JSON[_0x598f07(0x177)](_0x14f094):null,'gatewaySettings':_0x89256?JSON[_0x598f07(0x177)](_0x89256):null,'usdtPolygonWallet':_0x1e4882?.[_0x598f07(0x168)]||null,'usdtTrcWallet':_0x1e4882?.[_0x598f07(0x176)]||null,'usdtErcWallet':_0x1e4882?.[_0x598f07(0x14b)]||null,'usdcPolygonWallet':_0x1e4882?.[_0x598f07(0x16e)]||null,'publicKey':_0x54794d,'secretKey':_0x2ecdb7,'status':_0x598f07(0x173)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x74f710['id'],'fullName':_0x74f710[_0x598f07(0x15b)],'username':_0x74f710['username'],'telegramId':_0x74f710['telegram'],'merchantUrl':_0x74f710[_0x598f07(0x165)],'gateways':_0x74f710[_0x598f07(0x17e)]?JSON[_0x598f07(0x170)](_0x74f710[_0x598f07(0x17e)]):null,'gatewaySettings':_0x74f710[_0x598f07(0x163)]?JSON['parse'](_0x74f710[_0x598f07(0x163)]):null,'publicKey':_0x74f710[_0x598f07(0x151)],'wallets':{'usdtPolygonWallet':_0x74f710[_0x598f07(0x168)],'usdtTrcWallet':_0x74f710[_0x598f07(0x176)],'usdtErcWallet':_0x74f710[_0x598f07(0x14b)],'usdcPolygonWallet':_0x74f710[_0x598f07(0x16e)]},'status':_0x74f710[_0x598f07(0x182)],'createdAt':_0x74f710[_0x598f07(0x14d)]};}async[a76_0x3c32bd(0x17a)](){const _0x3660c5=a76_0x3c32bd,_0x318740=await database_1[_0x3660c5(0x157)][_0x3660c5(0x171)]['findMany']({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':_0x3660c5(0x183)}});return _0x318740[_0x3660c5(0x15d)](_0xb70089=>({'id':_0xb70089['id'],'fullName':_0xb70089[_0x3660c5(0x15b)],'username':_0xb70089[_0x3660c5(0x167)],'telegramId':_0xb70089['telegram'],'merchantUrl':_0xb70089[_0x3660c5(0x165)],'gateways':_0xb70089[_0x3660c5(0x17e)]?JSON[_0x3660c5(0x170)](_0xb70089[_0x3660c5(0x17e)]):null,'gatewaySettings':_0xb70089[_0x3660c5(0x163)]?JSON[_0x3660c5(0x170)](_0xb70089[_0x3660c5(0x163)]):null,'publicKey':_0xb70089['publicKey'],'wallets':{'usdtPolygonWallet':_0xb70089[_0x3660c5(0x168)],'usdtTrcWallet':_0xb70089['usdtTrcWallet'],'usdtErcWallet':_0xb70089[_0x3660c5(0x14b)],'usdcPolygonWallet':_0xb70089[_0x3660c5(0x16e)]},'status':_0xb70089[_0x3660c5(0x182)],'createdAt':_0xb70089[_0x3660c5(0x14d)]}));}async[a76_0x3c32bd(0x15a)](_0x15d940){const _0x38654c=a76_0x3c32bd,_0x28cf35=await database_1[_0x38654c(0x157)][_0x38654c(0x171)][_0x38654c(0x17d)]({'where':{'id':_0x15d940},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x28cf35)return null;return{'id':_0x28cf35['id'],'fullName':_0x28cf35['name'],'username':_0x28cf35['username'],'telegramId':_0x28cf35['telegram'],'merchantUrl':_0x28cf35['shopUrl'],'gateways':_0x28cf35[_0x38654c(0x17e)]?JSON[_0x38654c(0x170)](_0x28cf35[_0x38654c(0x17e)]):null,'gatewaySettings':_0x28cf35['gatewaySettings']?JSON[_0x38654c(0x170)](_0x28cf35[_0x38654c(0x163)]):null,'publicKey':_0x28cf35[_0x38654c(0x151)],'wallets':{'usdtPolygonWallet':_0x28cf35[_0x38654c(0x168)],'usdtTrcWallet':_0x28cf35[_0x38654c(0x176)],'usdtErcWallet':_0x28cf35['usdtErcWallet'],'usdcPolygonWallet':_0x28cf35[_0x38654c(0x16e)]},'status':_0x28cf35[_0x38654c(0x182)],'createdAt':_0x28cf35['createdAt']};}async[a76_0x3c32bd(0x14e)](_0x44c9d7,_0x11d138){const _0x11bfdd=a76_0x3c32bd,_0x53a54a={..._0x11d138};_0x11d138['password']&&(_0x53a54a['password']=await bcryptjs_1[_0x11bfdd(0x157)][_0x11bfdd(0x166)](_0x11d138[_0x11bfdd(0x164)],0xc));_0x11d138[_0x11bfdd(0x15e)]&&(_0x53a54a['name']=_0x11d138[_0x11bfdd(0x15e)],delete _0x53a54a[_0x11bfdd(0x15e)]);_0x11d138[_0x11bfdd(0x169)]&&(_0x53a54a[_0x11bfdd(0x17c)]=_0x11d138[_0x11bfdd(0x169)],delete _0x53a54a[_0x11bfdd(0x169)]);_0x11d138['merchantUrl']&&(_0x53a54a[_0x11bfdd(0x165)]=_0x11d138[_0x11bfdd(0x156)],delete _0x53a54a[_0x11bfdd(0x156)]);_0x11d138[_0x11bfdd(0x14f)]&&(_0x53a54a['paymentGateways']=JSON[_0x11bfdd(0x177)](_0x11d138[_0x11bfdd(0x14f)]),delete _0x53a54a[_0x11bfdd(0x14f)]);_0x11d138[_0x11bfdd(0x163)]&&(_0x53a54a['gatewaySettings']=JSON[_0x11bfdd(0x177)](_0x11d138[_0x11bfdd(0x163)]),delete _0x53a54a[_0x11bfdd(0x163)]);_0x11d138[_0x11bfdd(0x16d)]&&(_0x11d138['wallets'][_0x11bfdd(0x168)]!==undefined&&(_0x53a54a[_0x11bfdd(0x168)]=_0x11d138[_0x11bfdd(0x16d)][_0x11bfdd(0x168)]||null),_0x11d138[_0x11bfdd(0x16d)][_0x11bfdd(0x176)]!==undefined&&(_0x53a54a[_0x11bfdd(0x176)]=_0x11d138[_0x11bfdd(0x16d)][_0x11bfdd(0x176)]||null),_0x11d138['wallets']['usdtErcWallet']!==undefined&&(_0x53a54a['usdtErcWallet']=_0x11d138['wallets']['usdtErcWallet']||null),_0x11d138['wallets'][_0x11bfdd(0x16e)]!==undefined&&(_0x53a54a[_0x11bfdd(0x16e)]=_0x11d138['wallets'][_0x11bfdd(0x16e)]||null),delete _0x53a54a['wallets']);const _0x497764=await database_1[_0x11bfdd(0x157)][_0x11bfdd(0x171)][_0x11bfdd(0x17b)]({'where':{'id':_0x44c9d7},'data':_0x53a54a,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x497764['id'],'fullName':_0x497764['name'],'username':_0x497764[_0x11bfdd(0x167)],'telegramId':_0x497764[_0x11bfdd(0x17c)],'merchantUrl':_0x497764[_0x11bfdd(0x165)],'gateways':_0x497764['paymentGateways']?JSON['parse'](_0x497764[_0x11bfdd(0x17e)]):null,'gatewaySettings':_0x497764['gatewaySettings']?JSON[_0x11bfdd(0x170)](_0x497764[_0x11bfdd(0x163)]):null,'publicKey':_0x497764[_0x11bfdd(0x151)],'wallets':{'usdtPolygonWallet':_0x497764[_0x11bfdd(0x168)],'usdtTrcWallet':_0x497764[_0x11bfdd(0x176)],'usdtErcWallet':_0x497764['usdtErcWallet'],'usdcPolygonWallet':_0x497764[_0x11bfdd(0x16e)]},'status':_0x497764[_0x11bfdd(0x182)],'createdAt':_0x497764[_0x11bfdd(0x14d)]};}async[a76_0x3c32bd(0x16b)](_0xafd2bb){const _0x4c2e92=a76_0x3c32bd;await database_1[_0x4c2e92(0x157)][_0x4c2e92(0x171)][_0x4c2e92(0x14c)]({'where':{'id':_0xafd2bb}});}}exports[a76_0x3c32bd(0x154)]=UserService;