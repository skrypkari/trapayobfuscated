'use strict';const a56_0x4243f2=a56_0x59f3;(function(_0x1f2c8a,_0x41406a){const _0x6fd4fe=a56_0x59f3,_0xb595a3=_0x1f2c8a();while(!![]){try{const _0x543314=-parseInt(_0x6fd4fe(0x1ad))/0x1*(-parseInt(_0x6fd4fe(0x178))/0x2)+-parseInt(_0x6fd4fe(0x191))/0x3*(-parseInt(_0x6fd4fe(0x19a))/0x4)+parseInt(_0x6fd4fe(0x197))/0x5*(parseInt(_0x6fd4fe(0x190))/0x6)+parseInt(_0x6fd4fe(0x18a))/0x7*(parseInt(_0x6fd4fe(0x185))/0x8)+-parseInt(_0x6fd4fe(0x19c))/0x9*(parseInt(_0x6fd4fe(0x18e))/0xa)+-parseInt(_0x6fd4fe(0x17f))/0xb*(-parseInt(_0x6fd4fe(0x1a7))/0xc)+parseInt(_0x6fd4fe(0x174))/0xd*(-parseInt(_0x6fd4fe(0x17b))/0xe);if(_0x543314===_0x41406a)break;else _0xb595a3['push'](_0xb595a3['shift']());}catch(_0x3757f0){_0xb595a3['push'](_0xb595a3['shift']());}}}(a56_0x136e,0xba0c4));function a56_0x136e(){const _0x31e855=['__esModule','fullName','desc','shop','usdcPolygonWallet','telegramId','generateApiKeys','57996amxbVw','hash','password','publicKey','updateUser','createUser','518917NeJqCq','__importDefault','getUserById','82394YEdubB','merchantUrl','crypto','telegram','2CxOpyy','createdAt','wallets','4844gbQcgZ','gatewaySettings','deleteUser','usdtPolygonWallet','1243QHtDkJ','findUnique','username','pk_','stringify','findMany','2928oWpcho','usdtErcWallet','defineProperty','sk_','Username\x20already\x20exists','13769NvPNJD','update','name','bcryptjs','1815330xpNNBL','status','256602koVvtC','166983HLrFzD','gateways','paymentGateways','default','getAllUsers','shopUrl','145NsfajD','randomBytes','hex','8OVwlXP','ACTIVE','9aTtsbs','toString','usdtTrcWallet','parse'];a56_0x136e=function(){return _0x31e855;};return a56_0x136e();}function a56_0x59f3(_0x1e2b5a,_0x582119){const _0x136e97=a56_0x136e();return a56_0x59f3=function(_0x59f377,_0x238082){_0x59f377=_0x59f377-0x173;let _0x454405=_0x136e97[_0x59f377];return _0x454405;},a56_0x59f3(_0x1e2b5a,_0x582119);}var __importDefault=this&&this[a56_0x4243f2(0x1ae)]||function(_0x11b572){const _0x161f48=a56_0x4243f2;return _0x11b572&&_0x11b572[_0x161f48(0x1a0)]?_0x11b572:{'default':_0x11b572};};Object[a56_0x4243f2(0x187)](exports,a56_0x4243f2(0x1a0),{'value':!![]}),exports['UserService']=void 0x0;const bcryptjs_1=__importDefault(require(a56_0x4243f2(0x18d))),crypto_1=__importDefault(require(a56_0x4243f2(0x176))),database_1=__importDefault(require('../config/database'));class UserService{[a56_0x4243f2(0x1a6)](){const _0x2274a3=a56_0x4243f2,_0x2113da=_0x2274a3(0x182)+crypto_1['default'][_0x2274a3(0x198)](0x20)[_0x2274a3(0x19d)](_0x2274a3(0x199)),_0x3d6a86=_0x2274a3(0x188)+crypto_1[_0x2274a3(0x194)]['randomBytes'](0x20)[_0x2274a3(0x19d)]('hex');return{'publicKey':_0x2113da,'secretKey':_0x3d6a86};}async[a56_0x4243f2(0x1ac)](_0x4bce28){const _0x5b03b3=a56_0x4243f2,{fullName:_0x196e7a,username:_0x346f08,password:_0x5b4d95,telegramId:_0x23f791,merchantUrl:_0x203cf6,gateways:_0x12d1ad,gatewaySettings:_0xd7c47,wallets:_0x501619}=_0x4bce28,_0x1c805c=await database_1[_0x5b03b3(0x194)][_0x5b03b3(0x1a3)][_0x5b03b3(0x180)]({'where':{'username':_0x346f08}});if(_0x1c805c)throw new Error(_0x5b03b3(0x189));if(_0x23f791){const _0x51abad=await database_1['default'][_0x5b03b3(0x1a3)][_0x5b03b3(0x180)]({'where':{'telegram':_0x23f791}});if(_0x51abad)throw new Error('Telegram\x20username\x20already\x20exists');}const _0x5e0c05=await bcryptjs_1[_0x5b03b3(0x194)]['hash'](_0x5b4d95,0xc),{publicKey:_0x12c474,secretKey:_0x2efed3}=this[_0x5b03b3(0x1a6)](),_0x5db914=await database_1['default'][_0x5b03b3(0x1a3)]['create']({'data':{'name':_0x196e7a,'username':_0x346f08,'password':_0x5e0c05,'telegram':_0x23f791,'shopUrl':_0x203cf6,'paymentGateways':_0x12d1ad?JSON[_0x5b03b3(0x183)](_0x12d1ad):null,'gatewaySettings':_0xd7c47?JSON[_0x5b03b3(0x183)](_0xd7c47):null,'usdtPolygonWallet':_0x501619?.['usdtPolygonWallet']||null,'usdtTrcWallet':_0x501619?.['usdtTrcWallet']||null,'usdtErcWallet':_0x501619?.['usdtErcWallet']||null,'usdcPolygonWallet':_0x501619?.[_0x5b03b3(0x1a4)]||null,'publicKey':_0x12c474,'secretKey':_0x2efed3,'status':_0x5b03b3(0x19b)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x5db914['id'],'fullName':_0x5db914['name'],'username':_0x5db914['username'],'telegramId':_0x5db914[_0x5b03b3(0x177)],'merchantUrl':_0x5db914[_0x5b03b3(0x196)],'gateways':_0x5db914[_0x5b03b3(0x193)]?JSON['parse'](_0x5db914[_0x5b03b3(0x193)]):null,'gatewaySettings':_0x5db914[_0x5b03b3(0x17c)]?JSON[_0x5b03b3(0x19f)](_0x5db914[_0x5b03b3(0x17c)]):null,'publicKey':_0x5db914[_0x5b03b3(0x1aa)],'wallets':{'usdtPolygonWallet':_0x5db914[_0x5b03b3(0x17e)],'usdtTrcWallet':_0x5db914[_0x5b03b3(0x19e)],'usdtErcWallet':_0x5db914[_0x5b03b3(0x186)],'usdcPolygonWallet':_0x5db914[_0x5b03b3(0x1a4)]},'status':_0x5db914[_0x5b03b3(0x18f)],'createdAt':_0x5db914[_0x5b03b3(0x179)]};}async[a56_0x4243f2(0x195)](){const _0x38b944=a56_0x4243f2,_0x8f0837=await database_1[_0x38b944(0x194)][_0x38b944(0x1a3)][_0x38b944(0x184)]({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':_0x38b944(0x1a2)}});return _0x8f0837['map'](_0x369c3c=>({'id':_0x369c3c['id'],'fullName':_0x369c3c[_0x38b944(0x18c)],'username':_0x369c3c['username'],'telegramId':_0x369c3c['telegram'],'merchantUrl':_0x369c3c[_0x38b944(0x196)],'gateways':_0x369c3c[_0x38b944(0x193)]?JSON[_0x38b944(0x19f)](_0x369c3c[_0x38b944(0x193)]):null,'gatewaySettings':_0x369c3c[_0x38b944(0x17c)]?JSON[_0x38b944(0x19f)](_0x369c3c[_0x38b944(0x17c)]):null,'publicKey':_0x369c3c[_0x38b944(0x1aa)],'wallets':{'usdtPolygonWallet':_0x369c3c[_0x38b944(0x17e)],'usdtTrcWallet':_0x369c3c['usdtTrcWallet'],'usdtErcWallet':_0x369c3c[_0x38b944(0x186)],'usdcPolygonWallet':_0x369c3c[_0x38b944(0x1a4)]},'status':_0x369c3c[_0x38b944(0x18f)],'createdAt':_0x369c3c[_0x38b944(0x179)]}));}async[a56_0x4243f2(0x173)](_0x55e802){const _0x3306cd=a56_0x4243f2,_0x125ac0=await database_1[_0x3306cd(0x194)]['shop'][_0x3306cd(0x180)]({'where':{'id':_0x55e802},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x125ac0)return null;return{'id':_0x125ac0['id'],'fullName':_0x125ac0[_0x3306cd(0x18c)],'username':_0x125ac0['username'],'telegramId':_0x125ac0[_0x3306cd(0x177)],'merchantUrl':_0x125ac0[_0x3306cd(0x196)],'gateways':_0x125ac0[_0x3306cd(0x193)]?JSON['parse'](_0x125ac0[_0x3306cd(0x193)]):null,'gatewaySettings':_0x125ac0['gatewaySettings']?JSON['parse'](_0x125ac0[_0x3306cd(0x17c)]):null,'publicKey':_0x125ac0['publicKey'],'wallets':{'usdtPolygonWallet':_0x125ac0['usdtPolygonWallet'],'usdtTrcWallet':_0x125ac0[_0x3306cd(0x19e)],'usdtErcWallet':_0x125ac0[_0x3306cd(0x186)],'usdcPolygonWallet':_0x125ac0['usdcPolygonWallet']},'status':_0x125ac0[_0x3306cd(0x18f)],'createdAt':_0x125ac0[_0x3306cd(0x179)]};}async[a56_0x4243f2(0x1ab)](_0x2c90f5,_0x5cb6ae){const _0x211aa5=a56_0x4243f2,_0x479b82={..._0x5cb6ae};_0x5cb6ae[_0x211aa5(0x1a9)]&&(_0x479b82[_0x211aa5(0x1a9)]=await bcryptjs_1[_0x211aa5(0x194)][_0x211aa5(0x1a8)](_0x5cb6ae[_0x211aa5(0x1a9)],0xc));_0x5cb6ae[_0x211aa5(0x1a1)]&&(_0x479b82[_0x211aa5(0x18c)]=_0x5cb6ae[_0x211aa5(0x1a1)],delete _0x479b82[_0x211aa5(0x1a1)]);_0x5cb6ae[_0x211aa5(0x1a5)]&&(_0x479b82[_0x211aa5(0x177)]=_0x5cb6ae[_0x211aa5(0x1a5)],delete _0x479b82['telegramId']);_0x5cb6ae[_0x211aa5(0x175)]&&(_0x479b82[_0x211aa5(0x196)]=_0x5cb6ae['merchantUrl'],delete _0x479b82[_0x211aa5(0x175)]);_0x5cb6ae[_0x211aa5(0x192)]&&(_0x479b82['paymentGateways']=JSON['stringify'](_0x5cb6ae[_0x211aa5(0x192)]),delete _0x479b82[_0x211aa5(0x192)]);_0x5cb6ae[_0x211aa5(0x17c)]&&(_0x479b82[_0x211aa5(0x17c)]=JSON[_0x211aa5(0x183)](_0x5cb6ae[_0x211aa5(0x17c)]),delete _0x479b82['gatewaySettings']);_0x5cb6ae['wallets']&&(_0x5cb6ae['wallets'][_0x211aa5(0x17e)]!==undefined&&(_0x479b82[_0x211aa5(0x17e)]=_0x5cb6ae[_0x211aa5(0x17a)][_0x211aa5(0x17e)]||null),_0x5cb6ae[_0x211aa5(0x17a)][_0x211aa5(0x19e)]!==undefined&&(_0x479b82[_0x211aa5(0x19e)]=_0x5cb6ae[_0x211aa5(0x17a)][_0x211aa5(0x19e)]||null),_0x5cb6ae[_0x211aa5(0x17a)][_0x211aa5(0x186)]!==undefined&&(_0x479b82[_0x211aa5(0x186)]=_0x5cb6ae[_0x211aa5(0x17a)][_0x211aa5(0x186)]||null),_0x5cb6ae['wallets'][_0x211aa5(0x1a4)]!==undefined&&(_0x479b82[_0x211aa5(0x1a4)]=_0x5cb6ae[_0x211aa5(0x17a)][_0x211aa5(0x1a4)]||null),delete _0x479b82[_0x211aa5(0x17a)]);const _0x1935e6=await database_1[_0x211aa5(0x194)][_0x211aa5(0x1a3)][_0x211aa5(0x18b)]({'where':{'id':_0x2c90f5},'data':_0x479b82,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x1935e6['id'],'fullName':_0x1935e6['name'],'username':_0x1935e6[_0x211aa5(0x181)],'telegramId':_0x1935e6[_0x211aa5(0x177)],'merchantUrl':_0x1935e6[_0x211aa5(0x196)],'gateways':_0x1935e6[_0x211aa5(0x193)]?JSON[_0x211aa5(0x19f)](_0x1935e6[_0x211aa5(0x193)]):null,'gatewaySettings':_0x1935e6[_0x211aa5(0x17c)]?JSON[_0x211aa5(0x19f)](_0x1935e6['gatewaySettings']):null,'publicKey':_0x1935e6[_0x211aa5(0x1aa)],'wallets':{'usdtPolygonWallet':_0x1935e6[_0x211aa5(0x17e)],'usdtTrcWallet':_0x1935e6[_0x211aa5(0x19e)],'usdtErcWallet':_0x1935e6['usdtErcWallet'],'usdcPolygonWallet':_0x1935e6[_0x211aa5(0x1a4)]},'status':_0x1935e6['status'],'createdAt':_0x1935e6[_0x211aa5(0x179)]};}async[a56_0x4243f2(0x17d)](_0x50bf31){const _0x337393=a56_0x4243f2;await database_1[_0x337393(0x194)][_0x337393(0x1a3)]['delete']({'where':{'id':_0x50bf31}});}}exports['UserService']=UserService;