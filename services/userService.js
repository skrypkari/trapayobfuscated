'use strict';const a56_0x2e7c3f=a56_0x161b;(function(_0x1a6c8e,_0x363d0f){const _0x2d4035=a56_0x161b,_0x2c580f=_0x1a6c8e();while(!![]){try{const _0x5f36c0=-parseInt(_0x2d4035(0x1a6))/0x1+-parseInt(_0x2d4035(0x1a3))/0x2+-parseInt(_0x2d4035(0x1c6))/0x3*(parseInt(_0x2d4035(0x1a4))/0x4)+-parseInt(_0x2d4035(0x1cc))/0x5+-parseInt(_0x2d4035(0x1a7))/0x6*(parseInt(_0x2d4035(0x1ca))/0x7)+parseInt(_0x2d4035(0x1d8))/0x8+parseInt(_0x2d4035(0x1af))/0x9;if(_0x5f36c0===_0x363d0f)break;else _0x2c580f['push'](_0x2c580f['shift']());}catch(_0x1a0376){_0x2c580f['push'](_0x2c580f['shift']());}}}(a56_0xcf9f,0x5d37e));function a56_0x161b(_0x2953b8,_0x14d819){const _0xcf9fb8=a56_0xcf9f();return a56_0x161b=function(_0x161bfc,_0x55ecf8){_0x161bfc=_0x161bfc-0x1a1;let _0x1d4878=_0xcf9fb8[_0x161bfc];return _0x1d4878;},a56_0x161b(_0x2953b8,_0x14d819);}var __importDefault=this&&this[a56_0x2e7c3f(0x1c4)]||function(_0x4f77d1){return _0x4f77d1&&_0x4f77d1['__esModule']?_0x4f77d1:{'default':_0x4f77d1};};Object[a56_0x2e7c3f(0x1d2)](exports,'__esModule',{'value':!![]}),exports[a56_0x2e7c3f(0x1c7)]=void 0x0;function a56_0xcf9f(){const _0x39a600=['__importDefault','gateways','29715jXThfa','UserService','getAllUsers','sk_','4157034ZIHVub','telegram','1934475HHCYNi','toString','status','update','create','username','defineProperty','usdcPolygonWallet','map','createUser','bcryptjs','parse','1042032RUzJjF','stringify','desc','delete','672120pHRcNR','216pRzYuE','findUnique','270163AdKySx','6uVchYR','telegramId','updateUser','default','Telegram\x20username\x20already\x20exists','generateApiKeys','usdtErcWallet','publicKey','21360762XkxZuI','pk_','gatewaySettings','usdtPolygonWallet','randomBytes','shopUrl','findMany','deleteUser','ACTIVE','password','Username\x20already\x20exists','createdAt','usdtTrcWallet','paymentGateways','wallets','merchantUrl','name','crypto','fullName','../config/database','shop'];a56_0xcf9f=function(){return _0x39a600;};return a56_0xcf9f();}const bcryptjs_1=__importDefault(require(a56_0x2e7c3f(0x1d6))),crypto_1=__importDefault(require(a56_0x2e7c3f(0x1c0))),database_1=__importDefault(require(a56_0x2e7c3f(0x1c2)));class UserService{[a56_0x2e7c3f(0x1ac)](){const _0x3ec665=a56_0x2e7c3f,_0x3f6856=_0x3ec665(0x1b0)+crypto_1[_0x3ec665(0x1aa)][_0x3ec665(0x1b3)](0x20)[_0x3ec665(0x1cd)]('hex'),_0x2c66c7=_0x3ec665(0x1c9)+crypto_1[_0x3ec665(0x1aa)][_0x3ec665(0x1b3)](0x20)['toString']('hex');return{'publicKey':_0x3f6856,'secretKey':_0x2c66c7};}async[a56_0x2e7c3f(0x1d5)](_0x1b0bb1){const _0x430d3b=a56_0x2e7c3f,{fullName:_0x58107e,username:_0xafae09,password:_0x34a967,telegramId:_0x45ef83,merchantUrl:_0x3f5254,gateways:_0x2839e9,gatewaySettings:_0x330e3f,wallets:_0x11f1c5}=_0x1b0bb1,_0xe98aaf=await database_1[_0x430d3b(0x1aa)]['shop'][_0x430d3b(0x1a5)]({'where':{'username':_0xafae09}});if(_0xe98aaf)throw new Error(_0x430d3b(0x1b9));if(_0x45ef83){const _0x4cc6e6=await database_1[_0x430d3b(0x1aa)]['shop'][_0x430d3b(0x1a5)]({'where':{'telegram':_0x45ef83}});if(_0x4cc6e6)throw new Error(_0x430d3b(0x1ab));}const _0x302199=await bcryptjs_1[_0x430d3b(0x1aa)]['hash'](_0x34a967,0xc),{publicKey:_0x5e6110,secretKey:_0x390699}=this[_0x430d3b(0x1ac)](),_0x5587f2=await database_1[_0x430d3b(0x1aa)][_0x430d3b(0x1c3)][_0x430d3b(0x1d0)]({'data':{'name':_0x58107e,'username':_0xafae09,'password':_0x302199,'telegram':_0x45ef83,'shopUrl':_0x3f5254,'paymentGateways':_0x2839e9?JSON[_0x430d3b(0x1d9)](_0x2839e9):null,'gatewaySettings':_0x330e3f?JSON['stringify'](_0x330e3f):null,'usdtPolygonWallet':_0x11f1c5?.['usdtPolygonWallet']||null,'usdtTrcWallet':_0x11f1c5?.[_0x430d3b(0x1bb)]||null,'usdtErcWallet':_0x11f1c5?.['usdtErcWallet']||null,'usdcPolygonWallet':_0x11f1c5?.[_0x430d3b(0x1d3)]||null,'publicKey':_0x5e6110,'secretKey':_0x390699,'status':_0x430d3b(0x1b7)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x5587f2['id'],'fullName':_0x5587f2[_0x430d3b(0x1bf)],'username':_0x5587f2[_0x430d3b(0x1d1)],'telegramId':_0x5587f2[_0x430d3b(0x1cb)],'merchantUrl':_0x5587f2[_0x430d3b(0x1b4)],'gateways':_0x5587f2[_0x430d3b(0x1bc)]?JSON['parse'](_0x5587f2[_0x430d3b(0x1bc)]):null,'gatewaySettings':_0x5587f2[_0x430d3b(0x1b1)]?JSON[_0x430d3b(0x1d7)](_0x5587f2[_0x430d3b(0x1b1)]):null,'publicKey':_0x5587f2[_0x430d3b(0x1ae)],'wallets':{'usdtPolygonWallet':_0x5587f2[_0x430d3b(0x1b2)],'usdtTrcWallet':_0x5587f2[_0x430d3b(0x1bb)],'usdtErcWallet':_0x5587f2[_0x430d3b(0x1ad)],'usdcPolygonWallet':_0x5587f2['usdcPolygonWallet']},'status':_0x5587f2[_0x430d3b(0x1ce)],'createdAt':_0x5587f2[_0x430d3b(0x1ba)]};}async[a56_0x2e7c3f(0x1c8)](){const _0x50901d=a56_0x2e7c3f,_0x3941eb=await database_1[_0x50901d(0x1aa)]['shop'][_0x50901d(0x1b5)]({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':_0x50901d(0x1a1)}});return _0x3941eb[_0x50901d(0x1d4)](_0x1d534a=>({'id':_0x1d534a['id'],'fullName':_0x1d534a[_0x50901d(0x1bf)],'username':_0x1d534a['username'],'telegramId':_0x1d534a[_0x50901d(0x1cb)],'merchantUrl':_0x1d534a[_0x50901d(0x1b4)],'gateways':_0x1d534a[_0x50901d(0x1bc)]?JSON['parse'](_0x1d534a[_0x50901d(0x1bc)]):null,'gatewaySettings':_0x1d534a[_0x50901d(0x1b1)]?JSON[_0x50901d(0x1d7)](_0x1d534a[_0x50901d(0x1b1)]):null,'publicKey':_0x1d534a['publicKey'],'wallets':{'usdtPolygonWallet':_0x1d534a[_0x50901d(0x1b2)],'usdtTrcWallet':_0x1d534a[_0x50901d(0x1bb)],'usdtErcWallet':_0x1d534a[_0x50901d(0x1ad)],'usdcPolygonWallet':_0x1d534a[_0x50901d(0x1d3)]},'status':_0x1d534a[_0x50901d(0x1ce)],'createdAt':_0x1d534a[_0x50901d(0x1ba)]}));}async['getUserById'](_0x47ca0a){const _0x56b0cc=a56_0x2e7c3f,_0x3debf7=await database_1[_0x56b0cc(0x1aa)]['shop'][_0x56b0cc(0x1a5)]({'where':{'id':_0x47ca0a},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x3debf7)return null;return{'id':_0x3debf7['id'],'fullName':_0x3debf7[_0x56b0cc(0x1bf)],'username':_0x3debf7[_0x56b0cc(0x1d1)],'telegramId':_0x3debf7[_0x56b0cc(0x1cb)],'merchantUrl':_0x3debf7[_0x56b0cc(0x1b4)],'gateways':_0x3debf7['paymentGateways']?JSON['parse'](_0x3debf7[_0x56b0cc(0x1bc)]):null,'gatewaySettings':_0x3debf7[_0x56b0cc(0x1b1)]?JSON[_0x56b0cc(0x1d7)](_0x3debf7[_0x56b0cc(0x1b1)]):null,'publicKey':_0x3debf7[_0x56b0cc(0x1ae)],'wallets':{'usdtPolygonWallet':_0x3debf7[_0x56b0cc(0x1b2)],'usdtTrcWallet':_0x3debf7[_0x56b0cc(0x1bb)],'usdtErcWallet':_0x3debf7[_0x56b0cc(0x1ad)],'usdcPolygonWallet':_0x3debf7[_0x56b0cc(0x1d3)]},'status':_0x3debf7['status'],'createdAt':_0x3debf7[_0x56b0cc(0x1ba)]};}async[a56_0x2e7c3f(0x1a9)](_0x19ba53,_0x451cf5){const _0x2ca9a9=a56_0x2e7c3f,_0x713fd7={..._0x451cf5};_0x451cf5[_0x2ca9a9(0x1b8)]&&(_0x713fd7[_0x2ca9a9(0x1b8)]=await bcryptjs_1[_0x2ca9a9(0x1aa)]['hash'](_0x451cf5[_0x2ca9a9(0x1b8)],0xc));_0x451cf5[_0x2ca9a9(0x1c1)]&&(_0x713fd7[_0x2ca9a9(0x1bf)]=_0x451cf5[_0x2ca9a9(0x1c1)],delete _0x713fd7[_0x2ca9a9(0x1c1)]);_0x451cf5['telegramId']&&(_0x713fd7[_0x2ca9a9(0x1cb)]=_0x451cf5[_0x2ca9a9(0x1a8)],delete _0x713fd7[_0x2ca9a9(0x1a8)]);_0x451cf5[_0x2ca9a9(0x1be)]&&(_0x713fd7[_0x2ca9a9(0x1b4)]=_0x451cf5[_0x2ca9a9(0x1be)],delete _0x713fd7[_0x2ca9a9(0x1be)]);_0x451cf5['gateways']&&(_0x713fd7[_0x2ca9a9(0x1bc)]=JSON[_0x2ca9a9(0x1d9)](_0x451cf5[_0x2ca9a9(0x1c5)]),delete _0x713fd7[_0x2ca9a9(0x1c5)]);_0x451cf5['gatewaySettings']&&(_0x713fd7['gatewaySettings']=JSON[_0x2ca9a9(0x1d9)](_0x451cf5[_0x2ca9a9(0x1b1)]),delete _0x713fd7['gatewaySettings']);_0x451cf5[_0x2ca9a9(0x1bd)]&&(_0x451cf5[_0x2ca9a9(0x1bd)][_0x2ca9a9(0x1b2)]!==undefined&&(_0x713fd7[_0x2ca9a9(0x1b2)]=_0x451cf5[_0x2ca9a9(0x1bd)][_0x2ca9a9(0x1b2)]||null),_0x451cf5[_0x2ca9a9(0x1bd)][_0x2ca9a9(0x1bb)]!==undefined&&(_0x713fd7[_0x2ca9a9(0x1bb)]=_0x451cf5[_0x2ca9a9(0x1bd)][_0x2ca9a9(0x1bb)]||null),_0x451cf5[_0x2ca9a9(0x1bd)][_0x2ca9a9(0x1ad)]!==undefined&&(_0x713fd7['usdtErcWallet']=_0x451cf5[_0x2ca9a9(0x1bd)][_0x2ca9a9(0x1ad)]||null),_0x451cf5[_0x2ca9a9(0x1bd)][_0x2ca9a9(0x1d3)]!==undefined&&(_0x713fd7[_0x2ca9a9(0x1d3)]=_0x451cf5['wallets'][_0x2ca9a9(0x1d3)]||null),delete _0x713fd7['wallets']);const _0x57e120=await database_1[_0x2ca9a9(0x1aa)]['shop'][_0x2ca9a9(0x1cf)]({'where':{'id':_0x19ba53},'data':_0x713fd7,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x57e120['id'],'fullName':_0x57e120[_0x2ca9a9(0x1bf)],'username':_0x57e120[_0x2ca9a9(0x1d1)],'telegramId':_0x57e120['telegram'],'merchantUrl':_0x57e120[_0x2ca9a9(0x1b4)],'gateways':_0x57e120[_0x2ca9a9(0x1bc)]?JSON[_0x2ca9a9(0x1d7)](_0x57e120[_0x2ca9a9(0x1bc)]):null,'gatewaySettings':_0x57e120[_0x2ca9a9(0x1b1)]?JSON[_0x2ca9a9(0x1d7)](_0x57e120[_0x2ca9a9(0x1b1)]):null,'publicKey':_0x57e120[_0x2ca9a9(0x1ae)],'wallets':{'usdtPolygonWallet':_0x57e120[_0x2ca9a9(0x1b2)],'usdtTrcWallet':_0x57e120[_0x2ca9a9(0x1bb)],'usdtErcWallet':_0x57e120['usdtErcWallet'],'usdcPolygonWallet':_0x57e120[_0x2ca9a9(0x1d3)]},'status':_0x57e120['status'],'createdAt':_0x57e120[_0x2ca9a9(0x1ba)]};}async[a56_0x2e7c3f(0x1b6)](_0x2c9510){const _0x538ed3=a56_0x2e7c3f;await database_1[_0x538ed3(0x1aa)]['shop'][_0x538ed3(0x1a2)]({'where':{'id':_0x2c9510}});}}exports[a56_0x2e7c3f(0x1c7)]=UserService;