'use strict';const a63_0x1eb2b4=a63_0x1e5d;(function(_0x1da973,_0x57a46d){const _0x596ae4=a63_0x1e5d,_0x291cb5=_0x1da973();while(!![]){try{const _0x755697=parseInt(_0x596ae4(0x164))/0x1*(parseInt(_0x596ae4(0x173))/0x2)+-parseInt(_0x596ae4(0x169))/0x3+-parseInt(_0x596ae4(0x14d))/0x4+-parseInt(_0x596ae4(0x16c))/0x5+-parseInt(_0x596ae4(0x159))/0x6*(-parseInt(_0x596ae4(0x180))/0x7)+-parseInt(_0x596ae4(0x178))/0x8+-parseInt(_0x596ae4(0x168))/0x9*(-parseInt(_0x596ae4(0x17f))/0xa);if(_0x755697===_0x57a46d)break;else _0x291cb5['push'](_0x291cb5['shift']());}catch(_0xf28aaa){_0x291cb5['push'](_0x291cb5['shift']());}}}(a63_0x4582,0x77448));var __importDefault=this&&this[a63_0x1eb2b4(0x162)]||function(_0x8aa07b){const _0x53f508=a63_0x1eb2b4;return _0x8aa07b&&_0x8aa07b[_0x53f508(0x167)]?_0x8aa07b:{'default':_0x8aa07b};};Object[a63_0x1eb2b4(0x154)](exports,a63_0x1eb2b4(0x167),{'value':!![]}),exports[a63_0x1eb2b4(0x166)]=void 0x0;const bcryptjs_1=__importDefault(require(a63_0x1eb2b4(0x156))),crypto_1=__importDefault(require(a63_0x1eb2b4(0x15a))),database_1=__importDefault(require('../config/database'));class UserService{[a63_0x1eb2b4(0x174)](){const _0xffbe83=a63_0x1eb2b4,_0xb2a2b2=_0xffbe83(0x176)+crypto_1[_0xffbe83(0x17d)][_0xffbe83(0x16b)](0x20)[_0xffbe83(0x160)](_0xffbe83(0x16e)),_0x43ca39=_0xffbe83(0x158)+crypto_1['default'][_0xffbe83(0x16b)](0x20)[_0xffbe83(0x160)]('hex');return{'publicKey':_0xb2a2b2,'secretKey':_0x43ca39};}async[a63_0x1eb2b4(0x182)](_0x30fe70){const _0x44d2fd=a63_0x1eb2b4,{fullName:_0x26448e,username:_0x3c592c,password:_0x479a57,telegramId:_0x457d39,merchantUrl:_0x4841c8,gateways:_0x1b5ab4,gatewaySettings:_0x6216ea,wallets:_0x1e2881}=_0x30fe70,_0x56bbe8=await database_1['default'][_0x44d2fd(0x15d)]['findUnique']({'where':{'username':_0x3c592c}});if(_0x56bbe8)throw new Error(_0x44d2fd(0x171));if(_0x457d39){const _0x1c6d72=await database_1['default'][_0x44d2fd(0x15d)][_0x44d2fd(0x183)]({'where':{'telegram':_0x457d39}});if(_0x1c6d72)throw new Error(_0x44d2fd(0x163));}const _0x49b5d3=await bcryptjs_1[_0x44d2fd(0x17d)][_0x44d2fd(0x16d)](_0x479a57,0xc),{publicKey:_0xbcadb8,secretKey:_0x478ee4}=this[_0x44d2fd(0x174)](),_0x1012f9=await database_1[_0x44d2fd(0x17d)][_0x44d2fd(0x15d)][_0x44d2fd(0x181)]({'data':{'name':_0x26448e,'username':_0x3c592c,'password':_0x49b5d3,'telegram':_0x457d39,'shopUrl':_0x4841c8,'paymentGateways':_0x1b5ab4?JSON[_0x44d2fd(0x17e)](_0x1b5ab4):null,'gatewaySettings':_0x6216ea?JSON['stringify'](_0x6216ea):null,'usdtPolygonWallet':_0x1e2881?.[_0x44d2fd(0x17b)]||null,'usdtTrcWallet':_0x1e2881?.[_0x44d2fd(0x184)]||null,'usdtErcWallet':_0x1e2881?.[_0x44d2fd(0x153)]||null,'usdcPolygonWallet':_0x1e2881?.['usdcPolygonWallet']||null,'publicKey':_0xbcadb8,'secretKey':_0x478ee4,'status':_0x44d2fd(0x14a)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x1012f9['id'],'fullName':_0x1012f9[_0x44d2fd(0x172)],'username':_0x1012f9[_0x44d2fd(0x150)],'telegramId':_0x1012f9['telegram'],'merchantUrl':_0x1012f9[_0x44d2fd(0x15b)],'gateways':_0x1012f9[_0x44d2fd(0x16a)]?JSON[_0x44d2fd(0x175)](_0x1012f9['paymentGateways']):null,'gatewaySettings':_0x1012f9[_0x44d2fd(0x17a)]?JSON[_0x44d2fd(0x175)](_0x1012f9[_0x44d2fd(0x17a)]):null,'publicKey':_0x1012f9['publicKey'],'wallets':{'usdtPolygonWallet':_0x1012f9[_0x44d2fd(0x17b)],'usdtTrcWallet':_0x1012f9[_0x44d2fd(0x184)],'usdtErcWallet':_0x1012f9[_0x44d2fd(0x153)],'usdcPolygonWallet':_0x1012f9['usdcPolygonWallet']},'status':_0x1012f9[_0x44d2fd(0x179)],'createdAt':_0x1012f9[_0x44d2fd(0x14c)]};}async[a63_0x1eb2b4(0x155)](){const _0x2c0afb=a63_0x1eb2b4,_0x158d4f=await database_1['default'][_0x2c0afb(0x15d)][_0x2c0afb(0x15e)]({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':_0x2c0afb(0x152)}});return _0x158d4f[_0x2c0afb(0x161)](_0x475ca7=>({'id':_0x475ca7['id'],'fullName':_0x475ca7[_0x2c0afb(0x172)],'username':_0x475ca7[_0x2c0afb(0x150)],'telegramId':_0x475ca7['telegram'],'merchantUrl':_0x475ca7[_0x2c0afb(0x15b)],'gateways':_0x475ca7[_0x2c0afb(0x16a)]?JSON[_0x2c0afb(0x175)](_0x475ca7[_0x2c0afb(0x16a)]):null,'gatewaySettings':_0x475ca7[_0x2c0afb(0x17a)]?JSON[_0x2c0afb(0x175)](_0x475ca7[_0x2c0afb(0x17a)]):null,'publicKey':_0x475ca7[_0x2c0afb(0x15f)],'wallets':{'usdtPolygonWallet':_0x475ca7[_0x2c0afb(0x17b)],'usdtTrcWallet':_0x475ca7[_0x2c0afb(0x184)],'usdtErcWallet':_0x475ca7['usdtErcWallet'],'usdcPolygonWallet':_0x475ca7['usdcPolygonWallet']},'status':_0x475ca7[_0x2c0afb(0x179)],'createdAt':_0x475ca7[_0x2c0afb(0x14c)]}));}async[a63_0x1eb2b4(0x151)](_0x500cbd){const _0x79f7d7=a63_0x1eb2b4,_0x5a42f7=await database_1['default'][_0x79f7d7(0x15d)][_0x79f7d7(0x183)]({'where':{'id':_0x500cbd},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x5a42f7)return null;return{'id':_0x5a42f7['id'],'fullName':_0x5a42f7[_0x79f7d7(0x172)],'username':_0x5a42f7['username'],'telegramId':_0x5a42f7[_0x79f7d7(0x165)],'merchantUrl':_0x5a42f7[_0x79f7d7(0x15b)],'gateways':_0x5a42f7[_0x79f7d7(0x16a)]?JSON['parse'](_0x5a42f7[_0x79f7d7(0x16a)]):null,'gatewaySettings':_0x5a42f7[_0x79f7d7(0x17a)]?JSON['parse'](_0x5a42f7[_0x79f7d7(0x17a)]):null,'publicKey':_0x5a42f7['publicKey'],'wallets':{'usdtPolygonWallet':_0x5a42f7[_0x79f7d7(0x17b)],'usdtTrcWallet':_0x5a42f7[_0x79f7d7(0x184)],'usdtErcWallet':_0x5a42f7[_0x79f7d7(0x153)],'usdcPolygonWallet':_0x5a42f7[_0x79f7d7(0x185)]},'status':_0x5a42f7[_0x79f7d7(0x179)],'createdAt':_0x5a42f7[_0x79f7d7(0x14c)]};}async['updateUser'](_0x5a69e5,_0x2486cf){const _0x3066bf=a63_0x1eb2b4,_0x16227f={..._0x2486cf};_0x2486cf[_0x3066bf(0x14e)]&&(_0x16227f[_0x3066bf(0x14e)]=await bcryptjs_1['default'][_0x3066bf(0x16d)](_0x2486cf[_0x3066bf(0x14e)],0xc));_0x2486cf[_0x3066bf(0x17c)]&&(_0x16227f[_0x3066bf(0x172)]=_0x2486cf[_0x3066bf(0x17c)],delete _0x16227f[_0x3066bf(0x17c)]);_0x2486cf[_0x3066bf(0x170)]&&(_0x16227f[_0x3066bf(0x165)]=_0x2486cf['telegramId'],delete _0x16227f['telegramId']);_0x2486cf[_0x3066bf(0x14b)]&&(_0x16227f[_0x3066bf(0x15b)]=_0x2486cf[_0x3066bf(0x14b)],delete _0x16227f[_0x3066bf(0x14b)]);_0x2486cf[_0x3066bf(0x15c)]&&(_0x16227f[_0x3066bf(0x16a)]=JSON[_0x3066bf(0x17e)](_0x2486cf[_0x3066bf(0x15c)]),delete _0x16227f['gateways']);_0x2486cf['gatewaySettings']&&(_0x16227f[_0x3066bf(0x17a)]=JSON[_0x3066bf(0x17e)](_0x2486cf[_0x3066bf(0x17a)]),delete _0x16227f[_0x3066bf(0x17a)]);_0x2486cf[_0x3066bf(0x177)]&&(_0x2486cf[_0x3066bf(0x177)][_0x3066bf(0x17b)]!==undefined&&(_0x16227f[_0x3066bf(0x17b)]=_0x2486cf[_0x3066bf(0x177)]['usdtPolygonWallet']||null),_0x2486cf[_0x3066bf(0x177)]['usdtTrcWallet']!==undefined&&(_0x16227f['usdtTrcWallet']=_0x2486cf[_0x3066bf(0x177)][_0x3066bf(0x184)]||null),_0x2486cf[_0x3066bf(0x177)][_0x3066bf(0x153)]!==undefined&&(_0x16227f['usdtErcWallet']=_0x2486cf[_0x3066bf(0x177)][_0x3066bf(0x153)]||null),_0x2486cf[_0x3066bf(0x177)][_0x3066bf(0x185)]!==undefined&&(_0x16227f['usdcPolygonWallet']=_0x2486cf[_0x3066bf(0x177)][_0x3066bf(0x185)]||null),delete _0x16227f['wallets']);const _0x3ef585=await database_1[_0x3066bf(0x17d)][_0x3066bf(0x15d)][_0x3066bf(0x14f)]({'where':{'id':_0x5a69e5},'data':_0x16227f,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x3ef585['id'],'fullName':_0x3ef585[_0x3066bf(0x172)],'username':_0x3ef585[_0x3066bf(0x150)],'telegramId':_0x3ef585['telegram'],'merchantUrl':_0x3ef585['shopUrl'],'gateways':_0x3ef585[_0x3066bf(0x16a)]?JSON['parse'](_0x3ef585[_0x3066bf(0x16a)]):null,'gatewaySettings':_0x3ef585[_0x3066bf(0x17a)]?JSON['parse'](_0x3ef585[_0x3066bf(0x17a)]):null,'publicKey':_0x3ef585[_0x3066bf(0x15f)],'wallets':{'usdtPolygonWallet':_0x3ef585[_0x3066bf(0x17b)],'usdtTrcWallet':_0x3ef585[_0x3066bf(0x184)],'usdtErcWallet':_0x3ef585[_0x3066bf(0x153)],'usdcPolygonWallet':_0x3ef585[_0x3066bf(0x185)]},'status':_0x3ef585['status'],'createdAt':_0x3ef585['createdAt']};}async[a63_0x1eb2b4(0x16f)](_0x2a32e5){const _0x372006=a63_0x1eb2b4;await database_1[_0x372006(0x17d)][_0x372006(0x15d)][_0x372006(0x157)]({'where':{'id':_0x2a32e5}});}}function a63_0x1e5d(_0x477eb4,_0x592f2a){const _0x458238=a63_0x4582();return a63_0x1e5d=function(_0x1e5dba,_0x3f92fa){_0x1e5dba=_0x1e5dba-0x14a;let _0x20c1b6=_0x458238[_0x1e5dba];return _0x20c1b6;},a63_0x1e5d(_0x477eb4,_0x592f2a);}function a63_0x4582(){const _0x19df18=['getUserById','desc','usdtErcWallet','defineProperty','getAllUsers','bcryptjs','delete','sk_','456fRPLRK','crypto','shopUrl','gateways','shop','findMany','publicKey','toString','map','__importDefault','Telegram\x20username\x20already\x20exists','371249jKmVUo','telegram','UserService','__esModule','288RtqufH','816831mZmYsL','paymentGateways','randomBytes','1716525HeUXtk','hash','hex','deleteUser','telegramId','Username\x20already\x20exists','name','2ZdMpfX','generateApiKeys','parse','pk_','wallets','619792rUVCUR','status','gatewaySettings','usdtPolygonWallet','fullName','default','stringify','342940yZcUvE','48993MZFZDy','create','createUser','findUnique','usdtTrcWallet','usdcPolygonWallet','ACTIVE','merchantUrl','createdAt','3276020uOpvaQ','password','update','username'];a63_0x4582=function(){return _0x19df18;};return a63_0x4582();}exports[a63_0x1eb2b4(0x166)]=UserService;