'use strict';const a59_0xb5bd18=a59_0x1790;(function(_0x1ae10b,_0xceaf53){const _0x35dd11=a59_0x1790,_0x10314a=_0x1ae10b();while(!![]){try{const _0x53b3d4=parseInt(_0x35dd11(0x153))/0x1*(-parseInt(_0x35dd11(0x169))/0x2)+-parseInt(_0x35dd11(0x161))/0x3+-parseInt(_0x35dd11(0x14c))/0x4+parseInt(_0x35dd11(0x15f))/0x5+-parseInt(_0x35dd11(0x16a))/0x6*(-parseInt(_0x35dd11(0x145))/0x7)+-parseInt(_0x35dd11(0x17a))/0x8*(parseInt(_0x35dd11(0x15b))/0x9)+parseInt(_0x35dd11(0x165))/0xa*(parseInt(_0x35dd11(0x14e))/0xb);if(_0x53b3d4===_0xceaf53)break;else _0x10314a['push'](_0x10314a['shift']());}catch(_0x4d98a0){_0x10314a['push'](_0x10314a['shift']());}}}(a59_0xca05,0x3fe5c));var __importDefault=this&&this['__importDefault']||function(_0x26bdad){const _0xfbbb7b=a59_0x1790;return _0x26bdad&&_0x26bdad[_0xfbbb7b(0x176)]?_0x26bdad:{'default':_0x26bdad};};Object[a59_0xb5bd18(0x162)](exports,a59_0xb5bd18(0x176),{'value':!![]}),exports[a59_0xb5bd18(0x174)]=void 0x0;function a59_0x1790(_0x40231e,_0x4ae315){const _0xca05bc=a59_0xca05();return a59_0x1790=function(_0x17902f,_0x332761){_0x17902f=_0x17902f-0x142;let _0x34f81d=_0xca05bc[_0x17902f];return _0x34f81d;},a59_0x1790(_0x40231e,_0x4ae315);}const bcryptjs_1=__importDefault(require(a59_0xb5bd18(0x170))),crypto_1=__importDefault(require(a59_0xb5bd18(0x16f))),database_1=__importDefault(require(a59_0xb5bd18(0x16e)));class UserService{[a59_0xb5bd18(0x14b)](){const _0x4f03d5=a59_0xb5bd18,_0x4ad025=_0x4f03d5(0x143)+crypto_1[_0x4f03d5(0x175)][_0x4f03d5(0x15d)](0x20)[_0x4f03d5(0x163)](_0x4f03d5(0x171)),_0x599ac4=_0x4f03d5(0x151)+crypto_1[_0x4f03d5(0x175)][_0x4f03d5(0x15d)](0x20)[_0x4f03d5(0x163)](_0x4f03d5(0x171));return{'publicKey':_0x4ad025,'secretKey':_0x599ac4};}async['createUser'](_0x15f1e0){const _0x5ac8a8=a59_0xb5bd18,{fullName:_0x170654,username:_0x2abbf9,password:_0xe05d7b,telegramId:_0x118247,merchantUrl:_0x18175a,gateways:_0x297a5b,gatewaySettings:_0x4e06ad,wallets:_0x27dd6a}=_0x15f1e0,_0x232a84=await database_1[_0x5ac8a8(0x175)][_0x5ac8a8(0x154)][_0x5ac8a8(0x147)]({'where':{'username':_0x2abbf9}});if(_0x232a84)throw new Error('Username\x20already\x20exists');if(_0x118247){const _0x48883b=await database_1[_0x5ac8a8(0x175)][_0x5ac8a8(0x154)][_0x5ac8a8(0x147)]({'where':{'telegram':_0x118247}});if(_0x48883b)throw new Error('Telegram\x20username\x20already\x20exists');}const _0x10f19f=await bcryptjs_1['default'][_0x5ac8a8(0x166)](_0xe05d7b,0xc),{publicKey:_0x1120ed,secretKey:_0x2f5c9c}=this[_0x5ac8a8(0x14b)](),_0x9effd2=await database_1[_0x5ac8a8(0x175)][_0x5ac8a8(0x154)][_0x5ac8a8(0x156)]({'data':{'name':_0x170654,'username':_0x2abbf9,'password':_0x10f19f,'telegram':_0x118247,'shopUrl':_0x18175a,'paymentGateways':_0x297a5b?JSON[_0x5ac8a8(0x144)](_0x297a5b):null,'gatewaySettings':_0x4e06ad?JSON[_0x5ac8a8(0x144)](_0x4e06ad):null,'usdtPolygonWallet':_0x27dd6a?.['usdtPolygonWallet']||null,'usdtTrcWallet':_0x27dd6a?.[_0x5ac8a8(0x14f)]||null,'usdtErcWallet':_0x27dd6a?.[_0x5ac8a8(0x14a)]||null,'usdcPolygonWallet':_0x27dd6a?.['usdcPolygonWallet']||null,'publicKey':_0x1120ed,'secretKey':_0x2f5c9c,'status':_0x5ac8a8(0x179)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x9effd2['id'],'fullName':_0x9effd2[_0x5ac8a8(0x149)],'username':_0x9effd2[_0x5ac8a8(0x152)],'telegramId':_0x9effd2[_0x5ac8a8(0x17b)],'merchantUrl':_0x9effd2[_0x5ac8a8(0x148)],'gateways':_0x9effd2[_0x5ac8a8(0x14d)]?JSON[_0x5ac8a8(0x16b)](_0x9effd2[_0x5ac8a8(0x14d)]):null,'gatewaySettings':_0x9effd2[_0x5ac8a8(0x164)]?JSON['parse'](_0x9effd2[_0x5ac8a8(0x164)]):null,'publicKey':_0x9effd2['publicKey'],'wallets':{'usdtPolygonWallet':_0x9effd2[_0x5ac8a8(0x167)],'usdtTrcWallet':_0x9effd2[_0x5ac8a8(0x14f)],'usdtErcWallet':_0x9effd2[_0x5ac8a8(0x14a)],'usdcPolygonWallet':_0x9effd2[_0x5ac8a8(0x15e)]},'status':_0x9effd2[_0x5ac8a8(0x160)],'createdAt':_0x9effd2[_0x5ac8a8(0x178)]};}async[a59_0xb5bd18(0x16c)](){const _0x1a9330=a59_0xb5bd18,_0x415b2d=await database_1[_0x1a9330(0x175)][_0x1a9330(0x154)][_0x1a9330(0x146)]({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':_0x1a9330(0x157)}});return _0x415b2d[_0x1a9330(0x15c)](_0x4a5efa=>({'id':_0x4a5efa['id'],'fullName':_0x4a5efa['name'],'username':_0x4a5efa[_0x1a9330(0x152)],'telegramId':_0x4a5efa[_0x1a9330(0x17b)],'merchantUrl':_0x4a5efa[_0x1a9330(0x148)],'gateways':_0x4a5efa['paymentGateways']?JSON[_0x1a9330(0x16b)](_0x4a5efa[_0x1a9330(0x14d)]):null,'gatewaySettings':_0x4a5efa[_0x1a9330(0x164)]?JSON[_0x1a9330(0x16b)](_0x4a5efa[_0x1a9330(0x164)]):null,'publicKey':_0x4a5efa['publicKey'],'wallets':{'usdtPolygonWallet':_0x4a5efa['usdtPolygonWallet'],'usdtTrcWallet':_0x4a5efa['usdtTrcWallet'],'usdtErcWallet':_0x4a5efa['usdtErcWallet'],'usdcPolygonWallet':_0x4a5efa[_0x1a9330(0x15e)]},'status':_0x4a5efa['status'],'createdAt':_0x4a5efa[_0x1a9330(0x178)]}));}async[a59_0xb5bd18(0x168)](_0x369825){const _0x28ef2e=a59_0xb5bd18,_0x534859=await database_1['default'][_0x28ef2e(0x154)][_0x28ef2e(0x147)]({'where':{'id':_0x369825},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x534859)return null;return{'id':_0x534859['id'],'fullName':_0x534859['name'],'username':_0x534859[_0x28ef2e(0x152)],'telegramId':_0x534859[_0x28ef2e(0x17b)],'merchantUrl':_0x534859[_0x28ef2e(0x148)],'gateways':_0x534859[_0x28ef2e(0x14d)]?JSON[_0x28ef2e(0x16b)](_0x534859[_0x28ef2e(0x14d)]):null,'gatewaySettings':_0x534859[_0x28ef2e(0x164)]?JSON[_0x28ef2e(0x16b)](_0x534859[_0x28ef2e(0x164)]):null,'publicKey':_0x534859[_0x28ef2e(0x173)],'wallets':{'usdtPolygonWallet':_0x534859[_0x28ef2e(0x167)],'usdtTrcWallet':_0x534859[_0x28ef2e(0x14f)],'usdtErcWallet':_0x534859[_0x28ef2e(0x14a)],'usdcPolygonWallet':_0x534859[_0x28ef2e(0x15e)]},'status':_0x534859[_0x28ef2e(0x160)],'createdAt':_0x534859['createdAt']};}async[a59_0xb5bd18(0x158)](_0x1c5e39,_0x1078e3){const _0x2049ce=a59_0xb5bd18,_0x25d962={..._0x1078e3};_0x1078e3[_0x2049ce(0x155)]&&(_0x25d962[_0x2049ce(0x155)]=await bcryptjs_1[_0x2049ce(0x175)][_0x2049ce(0x166)](_0x1078e3[_0x2049ce(0x155)],0xc));_0x1078e3[_0x2049ce(0x150)]&&(_0x25d962['name']=_0x1078e3[_0x2049ce(0x150)],delete _0x25d962[_0x2049ce(0x150)]);_0x1078e3[_0x2049ce(0x15a)]&&(_0x25d962['telegram']=_0x1078e3[_0x2049ce(0x15a)],delete _0x25d962[_0x2049ce(0x15a)]);_0x1078e3[_0x2049ce(0x172)]&&(_0x25d962[_0x2049ce(0x148)]=_0x1078e3['merchantUrl'],delete _0x25d962[_0x2049ce(0x172)]);_0x1078e3['gateways']&&(_0x25d962[_0x2049ce(0x14d)]=JSON[_0x2049ce(0x144)](_0x1078e3['gateways']),delete _0x25d962['gateways']);_0x1078e3[_0x2049ce(0x164)]&&(_0x25d962['gatewaySettings']=JSON['stringify'](_0x1078e3['gatewaySettings']),delete _0x25d962['gatewaySettings']);_0x1078e3['wallets']&&(_0x1078e3[_0x2049ce(0x142)][_0x2049ce(0x167)]!==undefined&&(_0x25d962[_0x2049ce(0x167)]=_0x1078e3[_0x2049ce(0x142)][_0x2049ce(0x167)]||null),_0x1078e3['wallets'][_0x2049ce(0x14f)]!==undefined&&(_0x25d962['usdtTrcWallet']=_0x1078e3[_0x2049ce(0x142)][_0x2049ce(0x14f)]||null),_0x1078e3[_0x2049ce(0x142)]['usdtErcWallet']!==undefined&&(_0x25d962[_0x2049ce(0x14a)]=_0x1078e3['wallets'][_0x2049ce(0x14a)]||null),_0x1078e3[_0x2049ce(0x142)][_0x2049ce(0x15e)]!==undefined&&(_0x25d962[_0x2049ce(0x15e)]=_0x1078e3[_0x2049ce(0x142)][_0x2049ce(0x15e)]||null),delete _0x25d962[_0x2049ce(0x142)]);const _0x50f52e=await database_1[_0x2049ce(0x175)][_0x2049ce(0x154)][_0x2049ce(0x177)]({'where':{'id':_0x1c5e39},'data':_0x25d962,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x50f52e['id'],'fullName':_0x50f52e[_0x2049ce(0x149)],'username':_0x50f52e[_0x2049ce(0x152)],'telegramId':_0x50f52e[_0x2049ce(0x17b)],'merchantUrl':_0x50f52e['shopUrl'],'gateways':_0x50f52e[_0x2049ce(0x14d)]?JSON[_0x2049ce(0x16b)](_0x50f52e['paymentGateways']):null,'gatewaySettings':_0x50f52e[_0x2049ce(0x164)]?JSON[_0x2049ce(0x16b)](_0x50f52e[_0x2049ce(0x164)]):null,'publicKey':_0x50f52e[_0x2049ce(0x173)],'wallets':{'usdtPolygonWallet':_0x50f52e[_0x2049ce(0x167)],'usdtTrcWallet':_0x50f52e[_0x2049ce(0x14f)],'usdtErcWallet':_0x50f52e[_0x2049ce(0x14a)],'usdcPolygonWallet':_0x50f52e[_0x2049ce(0x15e)]},'status':_0x50f52e[_0x2049ce(0x160)],'createdAt':_0x50f52e[_0x2049ce(0x178)]};}async[a59_0xb5bd18(0x159)](_0x21ce60){const _0x1308fa=a59_0xb5bd18;await database_1[_0x1308fa(0x175)][_0x1308fa(0x154)][_0x1308fa(0x16d)]({'where':{'id':_0x21ce60}});}}function a59_0xca05(){const _0x15aa64=['49OWwYtr','findMany','findUnique','shopUrl','name','usdtErcWallet','generateApiKeys','397216cIqNlB','paymentGateways','8261957xsOcjE','usdtTrcWallet','fullName','sk_','username','321767lJLtRZ','shop','password','create','desc','updateUser','deleteUser','telegramId','9NRnJkl','map','randomBytes','usdcPolygonWallet','1315760praTXe','status','967686wUnhxg','defineProperty','toString','gatewaySettings','10SSwPFH','hash','usdtPolygonWallet','getUserById','2uOjlcJ','134526SLSbPU','parse','getAllUsers','delete','../config/database','crypto','bcryptjs','hex','merchantUrl','publicKey','UserService','default','__esModule','update','createdAt','ACTIVE','1326632wfVQBJ','telegram','wallets','pk_','stringify'];a59_0xca05=function(){return _0x15aa64;};return a59_0xca05();}exports[a59_0xb5bd18(0x174)]=UserService;