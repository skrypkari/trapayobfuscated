'use strict';function a59_0x48ce(_0x3d0ab3,_0x237122){const _0x309e46=a59_0x309e();return a59_0x48ce=function(_0x48ce0a,_0x295808){_0x48ce0a=_0x48ce0a-0x82;let _0x5ac055=_0x309e46[_0x48ce0a];return _0x5ac055;},a59_0x48ce(_0x3d0ab3,_0x237122);}const a59_0x57f975=a59_0x48ce;(function(_0x30c966,_0x376652){const _0x1ef966=a59_0x48ce,_0x540b1f=_0x30c966();while(!![]){try{const _0x36beb3=-parseInt(_0x1ef966(0xa4))/0x1*(parseInt(_0x1ef966(0xa2))/0x2)+parseInt(_0x1ef966(0xbd))/0x3*(-parseInt(_0x1ef966(0xbb))/0x4)+parseInt(_0x1ef966(0xab))/0x5*(parseInt(_0x1ef966(0xb2))/0x6)+-parseInt(_0x1ef966(0xa1))/0x7+-parseInt(_0x1ef966(0x97))/0x8*(-parseInt(_0x1ef966(0x83))/0x9)+parseInt(_0x1ef966(0xac))/0xa+parseInt(_0x1ef966(0x9d))/0xb*(parseInt(_0x1ef966(0x8f))/0xc);if(_0x36beb3===_0x376652)break;else _0x540b1f['push'](_0x540b1f['shift']());}catch(_0x38b995){_0x540b1f['push'](_0x540b1f['shift']());}}}(a59_0x309e,0x7b7ba));var __importDefault=this&&this['__importDefault']||function(_0x5d9f7b){const _0xcf8472=a59_0x48ce;return _0x5d9f7b&&_0x5d9f7b[_0xcf8472(0xae)]?_0x5d9f7b:{'default':_0x5d9f7b};};function a59_0x309e(){const _0x30cc46=['telegramId','deleteUser','8GZghSv','status','gateways','usdtPolygonWallet','sk_','UserService','1273261qYPRJD','findUnique','pk_','update','5039489VJnyXH','12994RHcfok','map','149imoQrA','usdtErcWallet','parse','shop','../config/database','publicKey','randomBytes','125kGtSzL','8675870ZZnEVV','gatewaySettings','__esModule','generateApiKeys','wallets','findMany','71094PFUEBt','toString','createUser','name','Telegram\x20username\x20already\x20exists','crypto','password','usdtTrcWallet','Username\x20already\x20exists','4VSDhaK','stringify','38928aHIVOM','getAllUsers','username','1052298UqftsU','shopUrl','desc','delete','paymentGateways','bcryptjs','usdcPolygonWallet','fullName','updateUser','hash','default','merchantUrl','96bjvojD','createdAt','defineProperty','telegram','hex','create'];a59_0x309e=function(){return _0x30cc46;};return a59_0x309e();}Object[a59_0x57f975(0x91)](exports,'__esModule',{'value':!![]}),exports[a59_0x57f975(0x9c)]=void 0x0;const bcryptjs_1=__importDefault(require(a59_0x57f975(0x88))),crypto_1=__importDefault(require(a59_0x57f975(0xb7))),database_1=__importDefault(require(a59_0x57f975(0xa8)));class UserService{[a59_0x57f975(0xaf)](){const _0x2d8bb5=a59_0x57f975,_0x40dcaa=_0x2d8bb5(0x9f)+crypto_1['default'][_0x2d8bb5(0xaa)](0x20)[_0x2d8bb5(0xb3)](_0x2d8bb5(0x93)),_0x19ab30=_0x2d8bb5(0x9b)+crypto_1[_0x2d8bb5(0x8d)][_0x2d8bb5(0xaa)](0x20)['toString'](_0x2d8bb5(0x93));return{'publicKey':_0x40dcaa,'secretKey':_0x19ab30};}async[a59_0x57f975(0xb4)](_0x547ed1){const _0x50e3a4=a59_0x57f975,{fullName:_0x5e3146,username:_0x45865b,password:_0x1dbda2,telegramId:_0x4ca9b6,merchantUrl:_0x3d6b64,gateways:_0x1665c8,gatewaySettings:_0x5d34cd,wallets:_0x957cf2}=_0x547ed1,_0x36c414=await database_1[_0x50e3a4(0x8d)][_0x50e3a4(0xa7)][_0x50e3a4(0x9e)]({'where':{'username':_0x45865b}});if(_0x36c414)throw new Error(_0x50e3a4(0xba));if(_0x4ca9b6){const _0x1c4f81=await database_1[_0x50e3a4(0x8d)][_0x50e3a4(0xa7)]['findUnique']({'where':{'telegram':_0x4ca9b6}});if(_0x1c4f81)throw new Error(_0x50e3a4(0xb6));}const _0x3fd505=await bcryptjs_1[_0x50e3a4(0x8d)]['hash'](_0x1dbda2,0xc),{publicKey:_0x308757,secretKey:_0x26e317}=this[_0x50e3a4(0xaf)](),_0x20f12e=await database_1['default'][_0x50e3a4(0xa7)][_0x50e3a4(0x94)]({'data':{'name':_0x5e3146,'username':_0x45865b,'password':_0x3fd505,'telegram':_0x4ca9b6,'shopUrl':_0x3d6b64,'paymentGateways':_0x1665c8?JSON[_0x50e3a4(0xbc)](_0x1665c8):null,'gatewaySettings':_0x5d34cd?JSON[_0x50e3a4(0xbc)](_0x5d34cd):null,'usdtPolygonWallet':_0x957cf2?.['usdtPolygonWallet']||null,'usdtTrcWallet':_0x957cf2?.[_0x50e3a4(0xb9)]||null,'usdtErcWallet':_0x957cf2?.[_0x50e3a4(0xa5)]||null,'usdcPolygonWallet':_0x957cf2?.[_0x50e3a4(0x89)]||null,'publicKey':_0x308757,'secretKey':_0x26e317,'status':'ACTIVE'},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x20f12e['id'],'fullName':_0x20f12e[_0x50e3a4(0xb5)],'username':_0x20f12e[_0x50e3a4(0x82)],'telegramId':_0x20f12e['telegram'],'merchantUrl':_0x20f12e[_0x50e3a4(0x84)],'gateways':_0x20f12e[_0x50e3a4(0x87)]?JSON['parse'](_0x20f12e[_0x50e3a4(0x87)]):null,'gatewaySettings':_0x20f12e[_0x50e3a4(0xad)]?JSON['parse'](_0x20f12e[_0x50e3a4(0xad)]):null,'publicKey':_0x20f12e[_0x50e3a4(0xa9)],'wallets':{'usdtPolygonWallet':_0x20f12e['usdtPolygonWallet'],'usdtTrcWallet':_0x20f12e[_0x50e3a4(0xb9)],'usdtErcWallet':_0x20f12e[_0x50e3a4(0xa5)],'usdcPolygonWallet':_0x20f12e['usdcPolygonWallet']},'status':_0x20f12e[_0x50e3a4(0x98)],'createdAt':_0x20f12e[_0x50e3a4(0x90)]};}async[a59_0x57f975(0xbe)](){const _0x58e97d=a59_0x57f975,_0x1d36cf=await database_1[_0x58e97d(0x8d)]['shop'][_0x58e97d(0xb1)]({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':_0x58e97d(0x85)}});return _0x1d36cf[_0x58e97d(0xa3)](_0x43594a=>({'id':_0x43594a['id'],'fullName':_0x43594a[_0x58e97d(0xb5)],'username':_0x43594a[_0x58e97d(0x82)],'telegramId':_0x43594a[_0x58e97d(0x92)],'merchantUrl':_0x43594a[_0x58e97d(0x84)],'gateways':_0x43594a[_0x58e97d(0x87)]?JSON[_0x58e97d(0xa6)](_0x43594a[_0x58e97d(0x87)]):null,'gatewaySettings':_0x43594a[_0x58e97d(0xad)]?JSON[_0x58e97d(0xa6)](_0x43594a[_0x58e97d(0xad)]):null,'publicKey':_0x43594a['publicKey'],'wallets':{'usdtPolygonWallet':_0x43594a[_0x58e97d(0x9a)],'usdtTrcWallet':_0x43594a['usdtTrcWallet'],'usdtErcWallet':_0x43594a[_0x58e97d(0xa5)],'usdcPolygonWallet':_0x43594a[_0x58e97d(0x89)]},'status':_0x43594a[_0x58e97d(0x98)],'createdAt':_0x43594a[_0x58e97d(0x90)]}));}async['getUserById'](_0x11e861){const _0x27eeef=a59_0x57f975,_0x84281e=await database_1['default'][_0x27eeef(0xa7)][_0x27eeef(0x9e)]({'where':{'id':_0x11e861},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x84281e)return null;return{'id':_0x84281e['id'],'fullName':_0x84281e[_0x27eeef(0xb5)],'username':_0x84281e[_0x27eeef(0x82)],'telegramId':_0x84281e[_0x27eeef(0x92)],'merchantUrl':_0x84281e[_0x27eeef(0x84)],'gateways':_0x84281e[_0x27eeef(0x87)]?JSON[_0x27eeef(0xa6)](_0x84281e['paymentGateways']):null,'gatewaySettings':_0x84281e[_0x27eeef(0xad)]?JSON['parse'](_0x84281e['gatewaySettings']):null,'publicKey':_0x84281e[_0x27eeef(0xa9)],'wallets':{'usdtPolygonWallet':_0x84281e[_0x27eeef(0x9a)],'usdtTrcWallet':_0x84281e[_0x27eeef(0xb9)],'usdtErcWallet':_0x84281e['usdtErcWallet'],'usdcPolygonWallet':_0x84281e['usdcPolygonWallet']},'status':_0x84281e['status'],'createdAt':_0x84281e[_0x27eeef(0x90)]};}async[a59_0x57f975(0x8b)](_0x36ef51,_0x30cf18){const _0x3ebed6=a59_0x57f975,_0xbae66d={..._0x30cf18};_0x30cf18[_0x3ebed6(0xb8)]&&(_0xbae66d[_0x3ebed6(0xb8)]=await bcryptjs_1[_0x3ebed6(0x8d)][_0x3ebed6(0x8c)](_0x30cf18[_0x3ebed6(0xb8)],0xc));_0x30cf18['fullName']&&(_0xbae66d[_0x3ebed6(0xb5)]=_0x30cf18['fullName'],delete _0xbae66d[_0x3ebed6(0x8a)]);_0x30cf18['telegramId']&&(_0xbae66d[_0x3ebed6(0x92)]=_0x30cf18['telegramId'],delete _0xbae66d[_0x3ebed6(0x95)]);_0x30cf18[_0x3ebed6(0x8e)]&&(_0xbae66d[_0x3ebed6(0x84)]=_0x30cf18[_0x3ebed6(0x8e)],delete _0xbae66d[_0x3ebed6(0x8e)]);_0x30cf18['gateways']&&(_0xbae66d[_0x3ebed6(0x87)]=JSON['stringify'](_0x30cf18[_0x3ebed6(0x99)]),delete _0xbae66d[_0x3ebed6(0x99)]);_0x30cf18[_0x3ebed6(0xad)]&&(_0xbae66d['gatewaySettings']=JSON[_0x3ebed6(0xbc)](_0x30cf18['gatewaySettings']),delete _0xbae66d['gatewaySettings']);_0x30cf18[_0x3ebed6(0xb0)]&&(_0x30cf18[_0x3ebed6(0xb0)]['usdtPolygonWallet']!==undefined&&(_0xbae66d['usdtPolygonWallet']=_0x30cf18[_0x3ebed6(0xb0)]['usdtPolygonWallet']||null),_0x30cf18['wallets'][_0x3ebed6(0xb9)]!==undefined&&(_0xbae66d['usdtTrcWallet']=_0x30cf18[_0x3ebed6(0xb0)][_0x3ebed6(0xb9)]||null),_0x30cf18[_0x3ebed6(0xb0)][_0x3ebed6(0xa5)]!==undefined&&(_0xbae66d[_0x3ebed6(0xa5)]=_0x30cf18[_0x3ebed6(0xb0)][_0x3ebed6(0xa5)]||null),_0x30cf18[_0x3ebed6(0xb0)][_0x3ebed6(0x89)]!==undefined&&(_0xbae66d[_0x3ebed6(0x89)]=_0x30cf18[_0x3ebed6(0xb0)][_0x3ebed6(0x89)]||null),delete _0xbae66d[_0x3ebed6(0xb0)]);const _0x489b47=await database_1['default']['shop'][_0x3ebed6(0xa0)]({'where':{'id':_0x36ef51},'data':_0xbae66d,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x489b47['id'],'fullName':_0x489b47[_0x3ebed6(0xb5)],'username':_0x489b47[_0x3ebed6(0x82)],'telegramId':_0x489b47[_0x3ebed6(0x92)],'merchantUrl':_0x489b47[_0x3ebed6(0x84)],'gateways':_0x489b47['paymentGateways']?JSON[_0x3ebed6(0xa6)](_0x489b47[_0x3ebed6(0x87)]):null,'gatewaySettings':_0x489b47[_0x3ebed6(0xad)]?JSON[_0x3ebed6(0xa6)](_0x489b47[_0x3ebed6(0xad)]):null,'publicKey':_0x489b47[_0x3ebed6(0xa9)],'wallets':{'usdtPolygonWallet':_0x489b47[_0x3ebed6(0x9a)],'usdtTrcWallet':_0x489b47['usdtTrcWallet'],'usdtErcWallet':_0x489b47[_0x3ebed6(0xa5)],'usdcPolygonWallet':_0x489b47[_0x3ebed6(0x89)]},'status':_0x489b47[_0x3ebed6(0x98)],'createdAt':_0x489b47['createdAt']};}async[a59_0x57f975(0x96)](_0x3a07f7){const _0x1c3be7=a59_0x57f975;await database_1['default'][_0x1c3be7(0xa7)][_0x1c3be7(0x86)]({'where':{'id':_0x3a07f7}});}}exports[a59_0x57f975(0x9c)]=UserService;