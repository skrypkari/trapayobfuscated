'use strict';const a59_0x29eff1=a59_0x168a;(function(_0x24b323,_0x3d7989){const _0x272cf6=a59_0x168a,_0x1970e0=_0x24b323();while(!![]){try{const _0x2e3b5e=-parseInt(_0x272cf6(0xfb))/0x1*(parseInt(_0x272cf6(0x107))/0x2)+-parseInt(_0x272cf6(0x123))/0x3*(parseInt(_0x272cf6(0x11e))/0x4)+parseInt(_0x272cf6(0x109))/0x5+parseInt(_0x272cf6(0x121))/0x6*(parseInt(_0x272cf6(0x119))/0x7)+parseInt(_0x272cf6(0x105))/0x8+-parseInt(_0x272cf6(0x12b))/0x9*(-parseInt(_0x272cf6(0x12a))/0xa)+-parseInt(_0x272cf6(0x10a))/0xb;if(_0x2e3b5e===_0x3d7989)break;else _0x1970e0['push'](_0x1970e0['shift']());}catch(_0x217bfd){_0x1970e0['push'](_0x1970e0['shift']());}}}(a59_0x5c76,0xeee15));var __importDefault=this&&this[a59_0x29eff1(0x10d)]||function(_0x1a3a3b){const _0x3b7c98=a59_0x29eff1;return _0x1a3a3b&&_0x1a3a3b[_0x3b7c98(0xfe)]?_0x1a3a3b:{'default':_0x1a3a3b};};Object['defineProperty'](exports,a59_0x29eff1(0xfe),{'value':!![]}),exports[a59_0x29eff1(0x12f)]=void 0x0;function a59_0x5c76(){const _0x29bbf8=['623rJxeNn','gatewaySettings','findUnique','desc','getUserById','8JOkmmZ','Username\x20already\x20exists','shop','130362tLPErK','usdtPolygonWallet','2820900KyMMtN','usdtErcWallet','telegramId','shopUrl','status','parse','password','1235650gTuGRS','99lwBbui','wallets','default','merchantUrl','UserService','toString','fullName','randomBytes','ACTIVE','sk_','generateApiKeys','deleteUser','10CvSvLE','createdAt','usdtTrcWallet','__esModule','publicKey','telegram','hex','gateways','username','map','14676200HKiRQE','usdcPolygonWallet','332140laezzI','getAllUsers','6477430EHttTm','20934936haeZPo','name','bcryptjs','__importDefault','Telegram\x20username\x20already\x20exists','hash','paymentGateways','update','../config/database','pk_','updateUser','stringify','createUser','create','findMany'];a59_0x5c76=function(){return _0x29bbf8;};return a59_0x5c76();}const bcryptjs_1=__importDefault(require(a59_0x29eff1(0x10c))),crypto_1=__importDefault(require('crypto')),database_1=__importDefault(require(a59_0x29eff1(0x112)));class UserService{[a59_0x29eff1(0x135)](){const _0x79d17d=a59_0x29eff1,_0x12aaf3=_0x79d17d(0x113)+crypto_1[_0x79d17d(0x12d)][_0x79d17d(0x132)](0x20)[_0x79d17d(0x130)](_0x79d17d(0x101)),_0x204483=_0x79d17d(0x134)+crypto_1['default'][_0x79d17d(0x132)](0x20)[_0x79d17d(0x130)](_0x79d17d(0x101));return{'publicKey':_0x12aaf3,'secretKey':_0x204483};}async[a59_0x29eff1(0x116)](_0x245770){const _0x2c838e=a59_0x29eff1,{fullName:_0x3ebd9a,username:_0x1c9ffa,password:_0x1f77de,telegramId:_0x1d766a,merchantUrl:_0x227fa2,gateways:_0x41e39b,gatewaySettings:_0x4cd96e,wallets:_0x315e4e}=_0x245770,_0xb17582=await database_1['default'][_0x2c838e(0x120)][_0x2c838e(0x11b)]({'where':{'username':_0x1c9ffa}});if(_0xb17582)throw new Error(_0x2c838e(0x11f));if(_0x1d766a){const _0x5ca396=await database_1[_0x2c838e(0x12d)][_0x2c838e(0x120)][_0x2c838e(0x11b)]({'where':{'telegram':_0x1d766a}});if(_0x5ca396)throw new Error(_0x2c838e(0x10e));}const _0x2b052a=await bcryptjs_1[_0x2c838e(0x12d)][_0x2c838e(0x10f)](_0x1f77de,0xc),{publicKey:_0x1a92a7,secretKey:_0x124b5a}=this['generateApiKeys'](),_0x542f28=await database_1['default'][_0x2c838e(0x120)][_0x2c838e(0x117)]({'data':{'name':_0x3ebd9a,'username':_0x1c9ffa,'password':_0x2b052a,'telegram':_0x1d766a,'shopUrl':_0x227fa2,'paymentGateways':_0x41e39b?JSON[_0x2c838e(0x115)](_0x41e39b):null,'gatewaySettings':_0x4cd96e?JSON['stringify'](_0x4cd96e):null,'usdtPolygonWallet':_0x315e4e?.[_0x2c838e(0x122)]||null,'usdtTrcWallet':_0x315e4e?.[_0x2c838e(0xfd)]||null,'usdtErcWallet':_0x315e4e?.[_0x2c838e(0x124)]||null,'usdcPolygonWallet':_0x315e4e?.[_0x2c838e(0x106)]||null,'publicKey':_0x1a92a7,'secretKey':_0x124b5a,'status':_0x2c838e(0x133)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x542f28['id'],'fullName':_0x542f28[_0x2c838e(0x10b)],'username':_0x542f28['username'],'telegramId':_0x542f28['telegram'],'merchantUrl':_0x542f28[_0x2c838e(0x126)],'gateways':_0x542f28[_0x2c838e(0x110)]?JSON[_0x2c838e(0x128)](_0x542f28['paymentGateways']):null,'gatewaySettings':_0x542f28[_0x2c838e(0x11a)]?JSON[_0x2c838e(0x128)](_0x542f28['gatewaySettings']):null,'publicKey':_0x542f28['publicKey'],'wallets':{'usdtPolygonWallet':_0x542f28[_0x2c838e(0x122)],'usdtTrcWallet':_0x542f28[_0x2c838e(0xfd)],'usdtErcWallet':_0x542f28['usdtErcWallet'],'usdcPolygonWallet':_0x542f28['usdcPolygonWallet']},'status':_0x542f28[_0x2c838e(0x127)],'createdAt':_0x542f28[_0x2c838e(0xfc)]};}async[a59_0x29eff1(0x108)](){const _0x13a746=a59_0x29eff1,_0x42b6c2=await database_1[_0x13a746(0x12d)][_0x13a746(0x120)][_0x13a746(0x118)]({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':_0x13a746(0x11c)}});return _0x42b6c2[_0x13a746(0x104)](_0x4376d9=>({'id':_0x4376d9['id'],'fullName':_0x4376d9[_0x13a746(0x10b)],'username':_0x4376d9[_0x13a746(0x103)],'telegramId':_0x4376d9['telegram'],'merchantUrl':_0x4376d9[_0x13a746(0x126)],'gateways':_0x4376d9[_0x13a746(0x110)]?JSON[_0x13a746(0x128)](_0x4376d9[_0x13a746(0x110)]):null,'gatewaySettings':_0x4376d9[_0x13a746(0x11a)]?JSON['parse'](_0x4376d9[_0x13a746(0x11a)]):null,'publicKey':_0x4376d9[_0x13a746(0xff)],'wallets':{'usdtPolygonWallet':_0x4376d9[_0x13a746(0x122)],'usdtTrcWallet':_0x4376d9['usdtTrcWallet'],'usdtErcWallet':_0x4376d9[_0x13a746(0x124)],'usdcPolygonWallet':_0x4376d9[_0x13a746(0x106)]},'status':_0x4376d9['status'],'createdAt':_0x4376d9[_0x13a746(0xfc)]}));}async[a59_0x29eff1(0x11d)](_0x2b4a49){const _0x5a9ae5=a59_0x29eff1,_0x3073d9=await database_1[_0x5a9ae5(0x12d)][_0x5a9ae5(0x120)][_0x5a9ae5(0x11b)]({'where':{'id':_0x2b4a49},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x3073d9)return null;return{'id':_0x3073d9['id'],'fullName':_0x3073d9[_0x5a9ae5(0x10b)],'username':_0x3073d9[_0x5a9ae5(0x103)],'telegramId':_0x3073d9[_0x5a9ae5(0x100)],'merchantUrl':_0x3073d9['shopUrl'],'gateways':_0x3073d9['paymentGateways']?JSON[_0x5a9ae5(0x128)](_0x3073d9[_0x5a9ae5(0x110)]):null,'gatewaySettings':_0x3073d9[_0x5a9ae5(0x11a)]?JSON[_0x5a9ae5(0x128)](_0x3073d9[_0x5a9ae5(0x11a)]):null,'publicKey':_0x3073d9['publicKey'],'wallets':{'usdtPolygonWallet':_0x3073d9[_0x5a9ae5(0x122)],'usdtTrcWallet':_0x3073d9[_0x5a9ae5(0xfd)],'usdtErcWallet':_0x3073d9['usdtErcWallet'],'usdcPolygonWallet':_0x3073d9[_0x5a9ae5(0x106)]},'status':_0x3073d9['status'],'createdAt':_0x3073d9[_0x5a9ae5(0xfc)]};}async[a59_0x29eff1(0x114)](_0x4a7ba0,_0x1d25d4){const _0x2e3ec0=a59_0x29eff1,_0x340165={..._0x1d25d4};_0x1d25d4[_0x2e3ec0(0x129)]&&(_0x340165[_0x2e3ec0(0x129)]=await bcryptjs_1[_0x2e3ec0(0x12d)][_0x2e3ec0(0x10f)](_0x1d25d4[_0x2e3ec0(0x129)],0xc));_0x1d25d4[_0x2e3ec0(0x131)]&&(_0x340165[_0x2e3ec0(0x10b)]=_0x1d25d4[_0x2e3ec0(0x131)],delete _0x340165['fullName']);_0x1d25d4[_0x2e3ec0(0x125)]&&(_0x340165[_0x2e3ec0(0x100)]=_0x1d25d4['telegramId'],delete _0x340165[_0x2e3ec0(0x125)]);_0x1d25d4[_0x2e3ec0(0x12e)]&&(_0x340165[_0x2e3ec0(0x126)]=_0x1d25d4['merchantUrl'],delete _0x340165[_0x2e3ec0(0x12e)]);_0x1d25d4[_0x2e3ec0(0x102)]&&(_0x340165[_0x2e3ec0(0x110)]=JSON[_0x2e3ec0(0x115)](_0x1d25d4['gateways']),delete _0x340165[_0x2e3ec0(0x102)]);_0x1d25d4[_0x2e3ec0(0x11a)]&&(_0x340165[_0x2e3ec0(0x11a)]=JSON[_0x2e3ec0(0x115)](_0x1d25d4['gatewaySettings']),delete _0x340165[_0x2e3ec0(0x11a)]);_0x1d25d4['wallets']&&(_0x1d25d4[_0x2e3ec0(0x12c)][_0x2e3ec0(0x122)]!==undefined&&(_0x340165[_0x2e3ec0(0x122)]=_0x1d25d4[_0x2e3ec0(0x12c)][_0x2e3ec0(0x122)]||null),_0x1d25d4['wallets'][_0x2e3ec0(0xfd)]!==undefined&&(_0x340165[_0x2e3ec0(0xfd)]=_0x1d25d4[_0x2e3ec0(0x12c)][_0x2e3ec0(0xfd)]||null),_0x1d25d4['wallets'][_0x2e3ec0(0x124)]!==undefined&&(_0x340165['usdtErcWallet']=_0x1d25d4[_0x2e3ec0(0x12c)][_0x2e3ec0(0x124)]||null),_0x1d25d4[_0x2e3ec0(0x12c)][_0x2e3ec0(0x106)]!==undefined&&(_0x340165[_0x2e3ec0(0x106)]=_0x1d25d4[_0x2e3ec0(0x12c)][_0x2e3ec0(0x106)]||null),delete _0x340165[_0x2e3ec0(0x12c)]);const _0x1b98eb=await database_1[_0x2e3ec0(0x12d)]['shop'][_0x2e3ec0(0x111)]({'where':{'id':_0x4a7ba0},'data':_0x340165,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x1b98eb['id'],'fullName':_0x1b98eb['name'],'username':_0x1b98eb[_0x2e3ec0(0x103)],'telegramId':_0x1b98eb['telegram'],'merchantUrl':_0x1b98eb['shopUrl'],'gateways':_0x1b98eb[_0x2e3ec0(0x110)]?JSON[_0x2e3ec0(0x128)](_0x1b98eb[_0x2e3ec0(0x110)]):null,'gatewaySettings':_0x1b98eb[_0x2e3ec0(0x11a)]?JSON[_0x2e3ec0(0x128)](_0x1b98eb[_0x2e3ec0(0x11a)]):null,'publicKey':_0x1b98eb[_0x2e3ec0(0xff)],'wallets':{'usdtPolygonWallet':_0x1b98eb[_0x2e3ec0(0x122)],'usdtTrcWallet':_0x1b98eb[_0x2e3ec0(0xfd)],'usdtErcWallet':_0x1b98eb[_0x2e3ec0(0x124)],'usdcPolygonWallet':_0x1b98eb[_0x2e3ec0(0x106)]},'status':_0x1b98eb['status'],'createdAt':_0x1b98eb[_0x2e3ec0(0xfc)]};}async[a59_0x29eff1(0xfa)](_0x1319ba){const _0x439ae3=a59_0x29eff1;await database_1[_0x439ae3(0x12d)][_0x439ae3(0x120)]['delete']({'where':{'id':_0x1319ba}});}}function a59_0x168a(_0x51c3cf,_0x6f42af){const _0x5c766b=a59_0x5c76();return a59_0x168a=function(_0x168a9b,_0x295692){_0x168a9b=_0x168a9b-0xfa;let _0x49bf69=_0x5c766b[_0x168a9b];return _0x49bf69;},a59_0x168a(_0x51c3cf,_0x6f42af);}exports[a59_0x29eff1(0x12f)]=UserService;