'use strict';const a56_0xde66fc=a56_0x59c1;(function(_0x193e0f,_0x67dc8a){const _0x363e1d=a56_0x59c1,_0x4ae3c6=_0x193e0f();while(!![]){try{const _0x1f687a=-parseInt(_0x363e1d(0x1a2))/0x1*(parseInt(_0x363e1d(0x1b7))/0x2)+parseInt(_0x363e1d(0x19b))/0x3*(parseInt(_0x363e1d(0x1a7))/0x4)+-parseInt(_0x363e1d(0x1b3))/0x5+parseInt(_0x363e1d(0x1b6))/0x6+parseInt(_0x363e1d(0x184))/0x7+-parseInt(_0x363e1d(0x1a8))/0x8*(parseInt(_0x363e1d(0x196))/0x9)+-parseInt(_0x363e1d(0x181))/0xa*(-parseInt(_0x363e1d(0x1a6))/0xb);if(_0x1f687a===_0x67dc8a)break;else _0x4ae3c6['push'](_0x4ae3c6['shift']());}catch(_0xa4861c){_0x4ae3c6['push'](_0x4ae3c6['shift']());}}}(a56_0x3d98,0x8a232));function a56_0x3d98(){const _0x5a5c0f=['toString','updateUser','shopUrl','name','usdtTrcWallet','getAllUsers','wallets','delete','639RyGAyg','gatewaySettings','hex','hash','Telegram\x20username\x20already\x20exists','1509sUWpjm','ACTIVE','map','randomBytes','Username\x20already\x20exists','pk_','create','22VCOPUY','status','parse','update','341WlSLsY','5892eowOsM','22728EGfqRS','password','findMany','../config/database','usdtPolygonWallet','fullName','merchantUrl','username','shop','telegramId','paymentGateways','1909195YSfaDR','default','createUser','78774ZTaUPS','93502tDdqtG','__esModule','publicKey','generateApiKeys','UserService','desc','gateways','137890GPTiRd','usdcPolygonWallet','telegram','6974625SGxyyC','sk_','defineProperty','stringify','bcryptjs','deleteUser','usdtErcWallet','createdAt','crypto','findUnique'];a56_0x3d98=function(){return _0x5a5c0f;};return a56_0x3d98();}var __importDefault=this&&this['__importDefault']||function(_0x1f62f2){const _0x32a657=a56_0x59c1;return _0x1f62f2&&_0x1f62f2[_0x32a657(0x1b8)]?_0x1f62f2:{'default':_0x1f62f2};};Object[a56_0xde66fc(0x186)](exports,a56_0xde66fc(0x1b8),{'value':!![]}),exports[a56_0xde66fc(0x17e)]=void 0x0;function a56_0x59c1(_0x4ab50a,_0x7fb0fb){const _0x3d9876=a56_0x3d98();return a56_0x59c1=function(_0x59c130,_0x4a4b33){_0x59c130=_0x59c130-0x17e;let _0x58fa58=_0x3d9876[_0x59c130];return _0x58fa58;},a56_0x59c1(_0x4ab50a,_0x7fb0fb);}const bcryptjs_1=__importDefault(require(a56_0xde66fc(0x188))),crypto_1=__importDefault(require(a56_0xde66fc(0x18c))),database_1=__importDefault(require(a56_0xde66fc(0x1ab)));class UserService{['generateApiKeys'](){const _0xf28f3e=a56_0xde66fc,_0x8d9e77=_0xf28f3e(0x1a0)+crypto_1[_0xf28f3e(0x1b4)][_0xf28f3e(0x19e)](0x20)['toString'](_0xf28f3e(0x198)),_0x2dd4e2=_0xf28f3e(0x185)+crypto_1['default'][_0xf28f3e(0x19e)](0x20)[_0xf28f3e(0x18e)](_0xf28f3e(0x198));return{'publicKey':_0x8d9e77,'secretKey':_0x2dd4e2};}async[a56_0xde66fc(0x1b5)](_0x3175e4){const _0x7459e0=a56_0xde66fc,{fullName:_0x2cd256,username:_0x25bf86,password:_0x21643a,telegramId:_0x1ab745,merchantUrl:_0x26bad3,gateways:_0x567d75,gatewaySettings:_0x23e4c9,wallets:_0xf3db9c}=_0x3175e4,_0x4e164b=await database_1[_0x7459e0(0x1b4)]['shop'][_0x7459e0(0x18d)]({'where':{'username':_0x25bf86}});if(_0x4e164b)throw new Error(_0x7459e0(0x19f));if(_0x1ab745){const _0x569d6d=await database_1[_0x7459e0(0x1b4)]['shop'][_0x7459e0(0x18d)]({'where':{'telegram':_0x1ab745}});if(_0x569d6d)throw new Error(_0x7459e0(0x19a));}const _0x287f4f=await bcryptjs_1[_0x7459e0(0x1b4)][_0x7459e0(0x199)](_0x21643a,0xc),{publicKey:_0x2af30b,secretKey:_0x17469a}=this[_0x7459e0(0x1ba)](),_0x19c6a9=await database_1[_0x7459e0(0x1b4)][_0x7459e0(0x1b0)][_0x7459e0(0x1a1)]({'data':{'name':_0x2cd256,'username':_0x25bf86,'password':_0x287f4f,'telegram':_0x1ab745,'shopUrl':_0x26bad3,'paymentGateways':_0x567d75?JSON[_0x7459e0(0x187)](_0x567d75):null,'gatewaySettings':_0x23e4c9?JSON[_0x7459e0(0x187)](_0x23e4c9):null,'usdtPolygonWallet':_0xf3db9c?.[_0x7459e0(0x1ac)]||null,'usdtTrcWallet':_0xf3db9c?.[_0x7459e0(0x192)]||null,'usdtErcWallet':_0xf3db9c?.['usdtErcWallet']||null,'usdcPolygonWallet':_0xf3db9c?.[_0x7459e0(0x182)]||null,'publicKey':_0x2af30b,'secretKey':_0x17469a,'status':_0x7459e0(0x19c)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x19c6a9['id'],'fullName':_0x19c6a9[_0x7459e0(0x191)],'username':_0x19c6a9[_0x7459e0(0x1af)],'telegramId':_0x19c6a9['telegram'],'merchantUrl':_0x19c6a9[_0x7459e0(0x190)],'gateways':_0x19c6a9[_0x7459e0(0x1b2)]?JSON[_0x7459e0(0x1a4)](_0x19c6a9[_0x7459e0(0x1b2)]):null,'gatewaySettings':_0x19c6a9[_0x7459e0(0x197)]?JSON[_0x7459e0(0x1a4)](_0x19c6a9[_0x7459e0(0x197)]):null,'publicKey':_0x19c6a9['publicKey'],'wallets':{'usdtPolygonWallet':_0x19c6a9[_0x7459e0(0x1ac)],'usdtTrcWallet':_0x19c6a9[_0x7459e0(0x192)],'usdtErcWallet':_0x19c6a9[_0x7459e0(0x18a)],'usdcPolygonWallet':_0x19c6a9[_0x7459e0(0x182)]},'status':_0x19c6a9['status'],'createdAt':_0x19c6a9[_0x7459e0(0x18b)]};}async[a56_0xde66fc(0x193)](){const _0x4be5ae=a56_0xde66fc,_0x237e08=await database_1[_0x4be5ae(0x1b4)][_0x4be5ae(0x1b0)][_0x4be5ae(0x1aa)]({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':_0x4be5ae(0x17f)}});return _0x237e08[_0x4be5ae(0x19d)](_0x1ec827=>({'id':_0x1ec827['id'],'fullName':_0x1ec827['name'],'username':_0x1ec827[_0x4be5ae(0x1af)],'telegramId':_0x1ec827[_0x4be5ae(0x183)],'merchantUrl':_0x1ec827[_0x4be5ae(0x190)],'gateways':_0x1ec827[_0x4be5ae(0x1b2)]?JSON[_0x4be5ae(0x1a4)](_0x1ec827[_0x4be5ae(0x1b2)]):null,'gatewaySettings':_0x1ec827[_0x4be5ae(0x197)]?JSON[_0x4be5ae(0x1a4)](_0x1ec827['gatewaySettings']):null,'publicKey':_0x1ec827[_0x4be5ae(0x1b9)],'wallets':{'usdtPolygonWallet':_0x1ec827['usdtPolygonWallet'],'usdtTrcWallet':_0x1ec827[_0x4be5ae(0x192)],'usdtErcWallet':_0x1ec827[_0x4be5ae(0x18a)],'usdcPolygonWallet':_0x1ec827[_0x4be5ae(0x182)]},'status':_0x1ec827[_0x4be5ae(0x1a3)],'createdAt':_0x1ec827[_0x4be5ae(0x18b)]}));}async['getUserById'](_0x26abe4){const _0x586088=a56_0xde66fc,_0x5a5a71=await database_1['default'][_0x586088(0x1b0)]['findUnique']({'where':{'id':_0x26abe4},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x5a5a71)return null;return{'id':_0x5a5a71['id'],'fullName':_0x5a5a71[_0x586088(0x191)],'username':_0x5a5a71[_0x586088(0x1af)],'telegramId':_0x5a5a71[_0x586088(0x183)],'merchantUrl':_0x5a5a71[_0x586088(0x190)],'gateways':_0x5a5a71[_0x586088(0x1b2)]?JSON[_0x586088(0x1a4)](_0x5a5a71[_0x586088(0x1b2)]):null,'gatewaySettings':_0x5a5a71['gatewaySettings']?JSON[_0x586088(0x1a4)](_0x5a5a71[_0x586088(0x197)]):null,'publicKey':_0x5a5a71[_0x586088(0x1b9)],'wallets':{'usdtPolygonWallet':_0x5a5a71['usdtPolygonWallet'],'usdtTrcWallet':_0x5a5a71[_0x586088(0x192)],'usdtErcWallet':_0x5a5a71[_0x586088(0x18a)],'usdcPolygonWallet':_0x5a5a71[_0x586088(0x182)]},'status':_0x5a5a71[_0x586088(0x1a3)],'createdAt':_0x5a5a71[_0x586088(0x18b)]};}async[a56_0xde66fc(0x18f)](_0x5bb728,_0x504616){const _0x3eac8e=a56_0xde66fc,_0x1c357f={..._0x504616};_0x504616[_0x3eac8e(0x1a9)]&&(_0x1c357f[_0x3eac8e(0x1a9)]=await bcryptjs_1[_0x3eac8e(0x1b4)][_0x3eac8e(0x199)](_0x504616['password'],0xc));_0x504616[_0x3eac8e(0x1ad)]&&(_0x1c357f[_0x3eac8e(0x191)]=_0x504616['fullName'],delete _0x1c357f[_0x3eac8e(0x1ad)]);_0x504616[_0x3eac8e(0x1b1)]&&(_0x1c357f[_0x3eac8e(0x183)]=_0x504616['telegramId'],delete _0x1c357f[_0x3eac8e(0x1b1)]);_0x504616[_0x3eac8e(0x1ae)]&&(_0x1c357f[_0x3eac8e(0x190)]=_0x504616[_0x3eac8e(0x1ae)],delete _0x1c357f[_0x3eac8e(0x1ae)]);_0x504616['gateways']&&(_0x1c357f[_0x3eac8e(0x1b2)]=JSON[_0x3eac8e(0x187)](_0x504616['gateways']),delete _0x1c357f[_0x3eac8e(0x180)]);_0x504616[_0x3eac8e(0x197)]&&(_0x1c357f['gatewaySettings']=JSON[_0x3eac8e(0x187)](_0x504616['gatewaySettings']),delete _0x1c357f['gatewaySettings']);_0x504616[_0x3eac8e(0x194)]&&(_0x504616[_0x3eac8e(0x194)][_0x3eac8e(0x1ac)]!==undefined&&(_0x1c357f[_0x3eac8e(0x1ac)]=_0x504616[_0x3eac8e(0x194)][_0x3eac8e(0x1ac)]||null),_0x504616['wallets'][_0x3eac8e(0x192)]!==undefined&&(_0x1c357f[_0x3eac8e(0x192)]=_0x504616[_0x3eac8e(0x194)][_0x3eac8e(0x192)]||null),_0x504616[_0x3eac8e(0x194)]['usdtErcWallet']!==undefined&&(_0x1c357f['usdtErcWallet']=_0x504616[_0x3eac8e(0x194)]['usdtErcWallet']||null),_0x504616[_0x3eac8e(0x194)][_0x3eac8e(0x182)]!==undefined&&(_0x1c357f[_0x3eac8e(0x182)]=_0x504616[_0x3eac8e(0x194)][_0x3eac8e(0x182)]||null),delete _0x1c357f['wallets']);const _0x382a3d=await database_1[_0x3eac8e(0x1b4)][_0x3eac8e(0x1b0)][_0x3eac8e(0x1a5)]({'where':{'id':_0x5bb728},'data':_0x1c357f,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x382a3d['id'],'fullName':_0x382a3d[_0x3eac8e(0x191)],'username':_0x382a3d[_0x3eac8e(0x1af)],'telegramId':_0x382a3d[_0x3eac8e(0x183)],'merchantUrl':_0x382a3d[_0x3eac8e(0x190)],'gateways':_0x382a3d['paymentGateways']?JSON[_0x3eac8e(0x1a4)](_0x382a3d[_0x3eac8e(0x1b2)]):null,'gatewaySettings':_0x382a3d['gatewaySettings']?JSON[_0x3eac8e(0x1a4)](_0x382a3d[_0x3eac8e(0x197)]):null,'publicKey':_0x382a3d[_0x3eac8e(0x1b9)],'wallets':{'usdtPolygonWallet':_0x382a3d[_0x3eac8e(0x1ac)],'usdtTrcWallet':_0x382a3d[_0x3eac8e(0x192)],'usdtErcWallet':_0x382a3d[_0x3eac8e(0x18a)],'usdcPolygonWallet':_0x382a3d[_0x3eac8e(0x182)]},'status':_0x382a3d['status'],'createdAt':_0x382a3d[_0x3eac8e(0x18b)]};}async[a56_0xde66fc(0x189)](_0x4ce71f){const _0x50b97c=a56_0xde66fc;await database_1[_0x50b97c(0x1b4)][_0x50b97c(0x1b0)][_0x50b97c(0x195)]({'where':{'id':_0x4ce71f}});}}exports[a56_0xde66fc(0x17e)]=UserService;