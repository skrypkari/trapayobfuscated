'use strict';const a57_0x8b6704=a57_0x9e58;(function(_0x3aefd7,_0x3a6a5c){const _0x5e23a7=a57_0x9e58,_0x4a068e=_0x3aefd7();while(!![]){try{const _0x49af3e=-parseInt(_0x5e23a7(0x1ac))/0x1*(parseInt(_0x5e23a7(0x1b8))/0x2)+parseInt(_0x5e23a7(0x1ca))/0x3*(-parseInt(_0x5e23a7(0x1bb))/0x4)+parseInt(_0x5e23a7(0x1cf))/0x5+-parseInt(_0x5e23a7(0x1c8))/0x6*(-parseInt(_0x5e23a7(0x1c0))/0x7)+parseInt(_0x5e23a7(0x1a3))/0x8+-parseInt(_0x5e23a7(0x1aa))/0x9*(parseInt(_0x5e23a7(0x198))/0xa)+-parseInt(_0x5e23a7(0x1c2))/0xb;if(_0x49af3e===_0x3a6a5c)break;else _0x4a068e['push'](_0x4a068e['shift']());}catch(_0x1d29bb){_0x4a068e['push'](_0x4a068e['shift']());}}}(a57_0x3a5e,0x5774d));var __importDefault=this&&this[a57_0x8b6704(0x199)]||function(_0x340eb0){return _0x340eb0&&_0x340eb0['__esModule']?_0x340eb0:{'default':_0x340eb0};};function a57_0x9e58(_0x77af98,_0x4438f8){const _0x3a5e33=a57_0x3a5e();return a57_0x9e58=function(_0x9e5828,_0x5225f3){_0x9e5828=_0x9e5828-0x198;let _0x371296=_0x3a5e33[_0x9e5828];return _0x371296;},a57_0x9e58(_0x77af98,_0x4438f8);}Object[a57_0x8b6704(0x1b2)](exports,a57_0x8b6704(0x1a0),{'value':!![]}),exports[a57_0x8b6704(0x1b6)]=void 0x0;const bcryptjs_1=__importDefault(require(a57_0x8b6704(0x1ab))),crypto_1=__importDefault(require(a57_0x8b6704(0x19d))),database_1=__importDefault(require(a57_0x8b6704(0x1c1)));class UserService{[a57_0x8b6704(0x1d0)](){const _0x4f2141=a57_0x8b6704,_0x5a5b8e=_0x4f2141(0x1c6)+crypto_1['default'][_0x4f2141(0x1d1)](0x20)['toString']('hex'),_0x2b683c=_0x4f2141(0x1cc)+crypto_1['default'][_0x4f2141(0x1d1)](0x20)['toString'](_0x4f2141(0x1bd));return{'publicKey':_0x5a5b8e,'secretKey':_0x2b683c};}async[a57_0x8b6704(0x1b7)](_0x3d7f0f){const _0x562333=a57_0x8b6704,{fullName:_0x425d4c,username:_0x2deadc,password:_0x29172d,telegramId:_0x45ace8,merchantUrl:_0x11de72,gateways:_0x26d9af,gatewaySettings:_0x35c57d,wallets:_0x5c9f8a}=_0x3d7f0f,_0x26d6f2=await database_1[_0x562333(0x1cd)]['shop'][_0x562333(0x1a6)]({'where':{'username':_0x2deadc}});if(_0x26d6f2)throw new Error(_0x562333(0x1ad));if(_0x45ace8){const _0x200bd3=await database_1[_0x562333(0x1cd)][_0x562333(0x19f)][_0x562333(0x1a6)]({'where':{'telegram':_0x45ace8}});if(_0x200bd3)throw new Error('Telegram\x20username\x20already\x20exists');}const _0x59f14c=await bcryptjs_1[_0x562333(0x1cd)]['hash'](_0x29172d,0xc),{publicKey:_0x26a05b,secretKey:_0x1f1e6c}=this[_0x562333(0x1d0)](),_0x2f66dc=await database_1[_0x562333(0x1cd)]['shop'][_0x562333(0x1c3)]({'data':{'name':_0x425d4c,'username':_0x2deadc,'password':_0x59f14c,'telegram':_0x45ace8,'shopUrl':_0x11de72,'paymentGateways':_0x26d9af?JSON[_0x562333(0x1b3)](_0x26d9af):null,'gatewaySettings':_0x35c57d?JSON[_0x562333(0x1b3)](_0x35c57d):null,'usdtPolygonWallet':_0x5c9f8a?.[_0x562333(0x1ce)]||null,'usdtTrcWallet':_0x5c9f8a?.['usdtTrcWallet']||null,'usdtErcWallet':_0x5c9f8a?.[_0x562333(0x1cb)]||null,'usdcPolygonWallet':_0x5c9f8a?.['usdcPolygonWallet']||null,'publicKey':_0x26a05b,'secretKey':_0x1f1e6c,'status':'ACTIVE'},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x2f66dc['id'],'fullName':_0x2f66dc[_0x562333(0x19b)],'username':_0x2f66dc[_0x562333(0x1a4)],'telegramId':_0x2f66dc[_0x562333(0x1b4)],'merchantUrl':_0x2f66dc[_0x562333(0x1b1)],'gateways':_0x2f66dc[_0x562333(0x1a7)]?JSON[_0x562333(0x1be)](_0x2f66dc[_0x562333(0x1a7)]):null,'gatewaySettings':_0x2f66dc[_0x562333(0x1a5)]?JSON[_0x562333(0x1be)](_0x2f66dc[_0x562333(0x1a5)]):null,'publicKey':_0x2f66dc[_0x562333(0x1af)],'wallets':{'usdtPolygonWallet':_0x2f66dc[_0x562333(0x1ce)],'usdtTrcWallet':_0x2f66dc[_0x562333(0x1c7)],'usdtErcWallet':_0x2f66dc[_0x562333(0x1cb)],'usdcPolygonWallet':_0x2f66dc[_0x562333(0x1ba)]},'status':_0x2f66dc[_0x562333(0x1c4)],'createdAt':_0x2f66dc[_0x562333(0x1b9)]};}async['getAllUsers'](){const _0x156837=a57_0x8b6704,_0x32fcc1=await database_1[_0x156837(0x1cd)][_0x156837(0x19f)][_0x156837(0x19a)]({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':_0x156837(0x1a8)}});return _0x32fcc1[_0x156837(0x1b5)](_0x123abe=>({'id':_0x123abe['id'],'fullName':_0x123abe[_0x156837(0x19b)],'username':_0x123abe[_0x156837(0x1a4)],'telegramId':_0x123abe[_0x156837(0x1b4)],'merchantUrl':_0x123abe['shopUrl'],'gateways':_0x123abe[_0x156837(0x1a7)]?JSON[_0x156837(0x1be)](_0x123abe[_0x156837(0x1a7)]):null,'gatewaySettings':_0x123abe[_0x156837(0x1a5)]?JSON[_0x156837(0x1be)](_0x123abe[_0x156837(0x1a5)]):null,'publicKey':_0x123abe[_0x156837(0x1af)],'wallets':{'usdtPolygonWallet':_0x123abe[_0x156837(0x1ce)],'usdtTrcWallet':_0x123abe[_0x156837(0x1c7)],'usdtErcWallet':_0x123abe[_0x156837(0x1cb)],'usdcPolygonWallet':_0x123abe['usdcPolygonWallet']},'status':_0x123abe[_0x156837(0x1c4)],'createdAt':_0x123abe[_0x156837(0x1b9)]}));}async[a57_0x8b6704(0x1a9)](_0x37be4f){const _0x20c55e=a57_0x8b6704,_0x174227=await database_1['default'][_0x20c55e(0x19f)][_0x20c55e(0x1a6)]({'where':{'id':_0x37be4f},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x174227)return null;return{'id':_0x174227['id'],'fullName':_0x174227[_0x20c55e(0x19b)],'username':_0x174227['username'],'telegramId':_0x174227['telegram'],'merchantUrl':_0x174227[_0x20c55e(0x1b1)],'gateways':_0x174227[_0x20c55e(0x1a7)]?JSON[_0x20c55e(0x1be)](_0x174227['paymentGateways']):null,'gatewaySettings':_0x174227[_0x20c55e(0x1a5)]?JSON[_0x20c55e(0x1be)](_0x174227[_0x20c55e(0x1a5)]):null,'publicKey':_0x174227[_0x20c55e(0x1af)],'wallets':{'usdtPolygonWallet':_0x174227['usdtPolygonWallet'],'usdtTrcWallet':_0x174227[_0x20c55e(0x1c7)],'usdtErcWallet':_0x174227[_0x20c55e(0x1cb)],'usdcPolygonWallet':_0x174227['usdcPolygonWallet']},'status':_0x174227[_0x20c55e(0x1c4)],'createdAt':_0x174227[_0x20c55e(0x1b9)]};}async[a57_0x8b6704(0x1c9)](_0x78d9a5,_0xef9ad2){const _0xa0ba0a=a57_0x8b6704,_0x1e4572={..._0xef9ad2};_0xef9ad2[_0xa0ba0a(0x19e)]&&(_0x1e4572[_0xa0ba0a(0x19e)]=await bcryptjs_1['default'][_0xa0ba0a(0x1ae)](_0xef9ad2[_0xa0ba0a(0x19e)],0xc));_0xef9ad2[_0xa0ba0a(0x1bf)]&&(_0x1e4572[_0xa0ba0a(0x19b)]=_0xef9ad2['fullName'],delete _0x1e4572['fullName']);_0xef9ad2[_0xa0ba0a(0x1c5)]&&(_0x1e4572[_0xa0ba0a(0x1b4)]=_0xef9ad2[_0xa0ba0a(0x1c5)],delete _0x1e4572['telegramId']);_0xef9ad2[_0xa0ba0a(0x1bc)]&&(_0x1e4572['shopUrl']=_0xef9ad2['merchantUrl'],delete _0x1e4572[_0xa0ba0a(0x1bc)]);_0xef9ad2[_0xa0ba0a(0x1a1)]&&(_0x1e4572[_0xa0ba0a(0x1a7)]=JSON[_0xa0ba0a(0x1b3)](_0xef9ad2[_0xa0ba0a(0x1a1)]),delete _0x1e4572['gateways']);_0xef9ad2[_0xa0ba0a(0x1a5)]&&(_0x1e4572['gatewaySettings']=JSON[_0xa0ba0a(0x1b3)](_0xef9ad2[_0xa0ba0a(0x1a5)]),delete _0x1e4572['gatewaySettings']);_0xef9ad2['wallets']&&(_0xef9ad2[_0xa0ba0a(0x19c)][_0xa0ba0a(0x1ce)]!==undefined&&(_0x1e4572[_0xa0ba0a(0x1ce)]=_0xef9ad2[_0xa0ba0a(0x19c)][_0xa0ba0a(0x1ce)]||null),_0xef9ad2[_0xa0ba0a(0x19c)][_0xa0ba0a(0x1c7)]!==undefined&&(_0x1e4572[_0xa0ba0a(0x1c7)]=_0xef9ad2['wallets'][_0xa0ba0a(0x1c7)]||null),_0xef9ad2['wallets'][_0xa0ba0a(0x1cb)]!==undefined&&(_0x1e4572[_0xa0ba0a(0x1cb)]=_0xef9ad2[_0xa0ba0a(0x19c)][_0xa0ba0a(0x1cb)]||null),_0xef9ad2[_0xa0ba0a(0x19c)][_0xa0ba0a(0x1ba)]!==undefined&&(_0x1e4572[_0xa0ba0a(0x1ba)]=_0xef9ad2[_0xa0ba0a(0x19c)][_0xa0ba0a(0x1ba)]||null),delete _0x1e4572[_0xa0ba0a(0x19c)]);const _0x59089b=await database_1[_0xa0ba0a(0x1cd)][_0xa0ba0a(0x19f)][_0xa0ba0a(0x1b0)]({'where':{'id':_0x78d9a5},'data':_0x1e4572,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x59089b['id'],'fullName':_0x59089b[_0xa0ba0a(0x19b)],'username':_0x59089b[_0xa0ba0a(0x1a4)],'telegramId':_0x59089b[_0xa0ba0a(0x1b4)],'merchantUrl':_0x59089b[_0xa0ba0a(0x1b1)],'gateways':_0x59089b[_0xa0ba0a(0x1a7)]?JSON['parse'](_0x59089b[_0xa0ba0a(0x1a7)]):null,'gatewaySettings':_0x59089b[_0xa0ba0a(0x1a5)]?JSON[_0xa0ba0a(0x1be)](_0x59089b['gatewaySettings']):null,'publicKey':_0x59089b[_0xa0ba0a(0x1af)],'wallets':{'usdtPolygonWallet':_0x59089b['usdtPolygonWallet'],'usdtTrcWallet':_0x59089b[_0xa0ba0a(0x1c7)],'usdtErcWallet':_0x59089b[_0xa0ba0a(0x1cb)],'usdcPolygonWallet':_0x59089b[_0xa0ba0a(0x1ba)]},'status':_0x59089b[_0xa0ba0a(0x1c4)],'createdAt':_0x59089b[_0xa0ba0a(0x1b9)]};}async[a57_0x8b6704(0x1a2)](_0x38c36a){const _0x41ec32=a57_0x8b6704;await database_1[_0x41ec32(0x1cd)][_0x41ec32(0x19f)]['delete']({'where':{'id':_0x38c36a}});}}exports[a57_0x8b6704(0x1b6)]=UserService;function a57_0x3a5e(){const _0x38eeeb=['createdAt','usdcPolygonWallet','20rhskcg','merchantUrl','hex','parse','fullName','2293025JNBruF','../config/database','47828xazIHk','create','status','telegramId','pk_','usdtTrcWallet','6qODmcm','updateUser','259431RJBcBa','usdtErcWallet','sk_','default','usdtPolygonWallet','3162235XQcJUT','generateApiKeys','randomBytes','20vtPBgj','__importDefault','findMany','name','wallets','crypto','password','shop','__esModule','gateways','deleteUser','5492104hyinjd','username','gatewaySettings','findUnique','paymentGateways','desc','getUserById','1123479LVYXBG','bcryptjs','601919qcrvcL','Username\x20already\x20exists','hash','publicKey','update','shopUrl','defineProperty','stringify','telegram','map','UserService','createUser','2hfVoJP'];a57_0x3a5e=function(){return _0x38eeeb;};return a57_0x3a5e();}