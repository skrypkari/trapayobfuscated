'use strict';const a61_0x3c8170=a61_0x5d2c;(function(_0x535d94,_0x15773d){const _0x4d96e6=a61_0x5d2c,_0x107a78=_0x535d94();while(!![]){try{const _0x2b5f81=-parseInt(_0x4d96e6(0x1bb))/0x1*(parseInt(_0x4d96e6(0x1a1))/0x2)+-parseInt(_0x4d96e6(0x1b5))/0x3+parseInt(_0x4d96e6(0x1d7))/0x4*(-parseInt(_0x4d96e6(0x1bd))/0x5)+parseInt(_0x4d96e6(0x1cc))/0x6+-parseInt(_0x4d96e6(0x1a2))/0x7+parseInt(_0x4d96e6(0x1a4))/0x8*(parseInt(_0x4d96e6(0x1c3))/0x9)+parseInt(_0x4d96e6(0x1c9))/0xa;if(_0x2b5f81===_0x15773d)break;else _0x107a78['push'](_0x107a78['shift']());}catch(_0x15af31){_0x107a78['push'](_0x107a78['shift']());}}}(a61_0x5a30,0x4d6ec));var __importDefault=this&&this[a61_0x3c8170(0x1d1)]||function(_0x3c081e){return _0x3c081e&&_0x3c081e['__esModule']?_0x3c081e:{'default':_0x3c081e};};Object[a61_0x3c8170(0x1ca)](exports,a61_0x3c8170(0x1ad),{'value':!![]}),exports[a61_0x3c8170(0x1a7)]=void 0x0;const bcryptjs_1=__importDefault(require(a61_0x3c8170(0x1db))),crypto_1=__importDefault(require(a61_0x3c8170(0x1b9))),database_1=__importDefault(require(a61_0x3c8170(0x1aa)));function a61_0x5d2c(_0x4d5c5c,_0x1b39da){const _0x5a30c4=a61_0x5a30();return a61_0x5d2c=function(_0x5d2cbf,_0x541d99){_0x5d2cbf=_0x5d2cbf-0x1a0;let _0x5891d6=_0x5a30c4[_0x5d2cbf];return _0x5891d6;},a61_0x5d2c(_0x4d5c5c,_0x1b39da);}function a61_0x5a30(){const _0x2a52b7=['deleteUser','getUserById','crypto','shopUrl','139NjXSMO','hash','726205FYApGq','status','usdtPolygonWallet','Telegram\x20username\x20already\x20exists','findMany','default','54usNxBg','merchantUrl','usdtTrcWallet','updateUser','publicKey','usdtErcWallet','10722910tOsVTf','defineProperty','pk_','105012pJfDwO','getAllUsers','fullName','desc','usdcPolygonWallet','__importDefault','wallets','randomBytes','createUser','toString','telegram','4UNmPgg','create','ACTIVE','shop','bcryptjs','telegramId','3638ejrqnn','2304666PDSdJk','generateApiKeys','175288CUyAFn','paymentGateways','findUnique','UserService','hex','password','../config/database','stringify','gatewaySettings','__esModule','gateways','parse','name','sk_','Username\x20already\x20exists','createdAt','delete','530325gzHzbW','username'];a61_0x5a30=function(){return _0x2a52b7;};return a61_0x5a30();}class UserService{[a61_0x3c8170(0x1a3)](){const _0x2e30b5=a61_0x3c8170,_0x28d8d2=_0x2e30b5(0x1cb)+crypto_1[_0x2e30b5(0x1c2)][_0x2e30b5(0x1d3)](0x20)['toString'](_0x2e30b5(0x1a8)),_0x459d05=_0x2e30b5(0x1b1)+crypto_1[_0x2e30b5(0x1c2)][_0x2e30b5(0x1d3)](0x20)[_0x2e30b5(0x1d5)]('hex');return{'publicKey':_0x28d8d2,'secretKey':_0x459d05};}async[a61_0x3c8170(0x1d4)](_0x218c79){const _0xd39045=a61_0x3c8170,{fullName:_0x1e57f8,username:_0x2c5b64,password:_0x1cc6ab,telegramId:_0x3660c2,merchantUrl:_0x4361ed,gateways:_0x4f0c64,gatewaySettings:_0x404ada,wallets:_0x431425}=_0x218c79,_0x12029e=await database_1['default']['shop']['findUnique']({'where':{'username':_0x2c5b64}});if(_0x12029e)throw new Error(_0xd39045(0x1b2));if(_0x3660c2){const _0x38d40=await database_1[_0xd39045(0x1c2)][_0xd39045(0x1da)][_0xd39045(0x1a6)]({'where':{'telegram':_0x3660c2}});if(_0x38d40)throw new Error(_0xd39045(0x1c0));}const _0x27ba75=await bcryptjs_1[_0xd39045(0x1c2)]['hash'](_0x1cc6ab,0xc),{publicKey:_0x763917,secretKey:_0x246462}=this[_0xd39045(0x1a3)](),_0x3e78e5=await database_1[_0xd39045(0x1c2)][_0xd39045(0x1da)][_0xd39045(0x1d8)]({'data':{'name':_0x1e57f8,'username':_0x2c5b64,'password':_0x27ba75,'telegram':_0x3660c2,'shopUrl':_0x4361ed,'paymentGateways':_0x4f0c64?JSON[_0xd39045(0x1ab)](_0x4f0c64):null,'gatewaySettings':_0x404ada?JSON[_0xd39045(0x1ab)](_0x404ada):null,'usdtPolygonWallet':_0x431425?.['usdtPolygonWallet']||null,'usdtTrcWallet':_0x431425?.[_0xd39045(0x1c5)]||null,'usdtErcWallet':_0x431425?.[_0xd39045(0x1c8)]||null,'usdcPolygonWallet':_0x431425?.[_0xd39045(0x1d0)]||null,'publicKey':_0x763917,'secretKey':_0x246462,'status':_0xd39045(0x1d9)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x3e78e5['id'],'fullName':_0x3e78e5['name'],'username':_0x3e78e5[_0xd39045(0x1b6)],'telegramId':_0x3e78e5['telegram'],'merchantUrl':_0x3e78e5[_0xd39045(0x1ba)],'gateways':_0x3e78e5['paymentGateways']?JSON[_0xd39045(0x1af)](_0x3e78e5[_0xd39045(0x1a5)]):null,'gatewaySettings':_0x3e78e5['gatewaySettings']?JSON[_0xd39045(0x1af)](_0x3e78e5[_0xd39045(0x1ac)]):null,'publicKey':_0x3e78e5['publicKey'],'wallets':{'usdtPolygonWallet':_0x3e78e5[_0xd39045(0x1bf)],'usdtTrcWallet':_0x3e78e5[_0xd39045(0x1c5)],'usdtErcWallet':_0x3e78e5[_0xd39045(0x1c8)],'usdcPolygonWallet':_0x3e78e5[_0xd39045(0x1d0)]},'status':_0x3e78e5[_0xd39045(0x1be)],'createdAt':_0x3e78e5[_0xd39045(0x1b3)]};}async[a61_0x3c8170(0x1cd)](){const _0x46021f=a61_0x3c8170,_0x3ad4a5=await database_1[_0x46021f(0x1c2)][_0x46021f(0x1da)][_0x46021f(0x1c1)]({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':_0x46021f(0x1cf)}});return _0x3ad4a5['map'](_0x4d861e=>({'id':_0x4d861e['id'],'fullName':_0x4d861e[_0x46021f(0x1b0)],'username':_0x4d861e[_0x46021f(0x1b6)],'telegramId':_0x4d861e[_0x46021f(0x1d6)],'merchantUrl':_0x4d861e[_0x46021f(0x1ba)],'gateways':_0x4d861e['paymentGateways']?JSON[_0x46021f(0x1af)](_0x4d861e[_0x46021f(0x1a5)]):null,'gatewaySettings':_0x4d861e['gatewaySettings']?JSON[_0x46021f(0x1af)](_0x4d861e[_0x46021f(0x1ac)]):null,'publicKey':_0x4d861e['publicKey'],'wallets':{'usdtPolygonWallet':_0x4d861e[_0x46021f(0x1bf)],'usdtTrcWallet':_0x4d861e[_0x46021f(0x1c5)],'usdtErcWallet':_0x4d861e['usdtErcWallet'],'usdcPolygonWallet':_0x4d861e[_0x46021f(0x1d0)]},'status':_0x4d861e[_0x46021f(0x1be)],'createdAt':_0x4d861e[_0x46021f(0x1b3)]}));}async[a61_0x3c8170(0x1b8)](_0x34bac2){const _0x447366=a61_0x3c8170,_0x11cb41=await database_1[_0x447366(0x1c2)][_0x447366(0x1da)][_0x447366(0x1a6)]({'where':{'id':_0x34bac2},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x11cb41)return null;return{'id':_0x11cb41['id'],'fullName':_0x11cb41[_0x447366(0x1b0)],'username':_0x11cb41['username'],'telegramId':_0x11cb41[_0x447366(0x1d6)],'merchantUrl':_0x11cb41[_0x447366(0x1ba)],'gateways':_0x11cb41[_0x447366(0x1a5)]?JSON[_0x447366(0x1af)](_0x11cb41['paymentGateways']):null,'gatewaySettings':_0x11cb41[_0x447366(0x1ac)]?JSON['parse'](_0x11cb41[_0x447366(0x1ac)]):null,'publicKey':_0x11cb41[_0x447366(0x1c7)],'wallets':{'usdtPolygonWallet':_0x11cb41[_0x447366(0x1bf)],'usdtTrcWallet':_0x11cb41[_0x447366(0x1c5)],'usdtErcWallet':_0x11cb41['usdtErcWallet'],'usdcPolygonWallet':_0x11cb41[_0x447366(0x1d0)]},'status':_0x11cb41['status'],'createdAt':_0x11cb41[_0x447366(0x1b3)]};}async[a61_0x3c8170(0x1c6)](_0x2c2564,_0x6e2309){const _0x53f169=a61_0x3c8170,_0x57b41d={..._0x6e2309};_0x6e2309[_0x53f169(0x1a9)]&&(_0x57b41d['password']=await bcryptjs_1[_0x53f169(0x1c2)][_0x53f169(0x1bc)](_0x6e2309[_0x53f169(0x1a9)],0xc));_0x6e2309[_0x53f169(0x1ce)]&&(_0x57b41d[_0x53f169(0x1b0)]=_0x6e2309['fullName'],delete _0x57b41d['fullName']);_0x6e2309[_0x53f169(0x1a0)]&&(_0x57b41d[_0x53f169(0x1d6)]=_0x6e2309[_0x53f169(0x1a0)],delete _0x57b41d[_0x53f169(0x1a0)]);_0x6e2309[_0x53f169(0x1c4)]&&(_0x57b41d[_0x53f169(0x1ba)]=_0x6e2309['merchantUrl'],delete _0x57b41d[_0x53f169(0x1c4)]);_0x6e2309[_0x53f169(0x1ae)]&&(_0x57b41d[_0x53f169(0x1a5)]=JSON[_0x53f169(0x1ab)](_0x6e2309['gateways']),delete _0x57b41d[_0x53f169(0x1ae)]);_0x6e2309[_0x53f169(0x1ac)]&&(_0x57b41d[_0x53f169(0x1ac)]=JSON[_0x53f169(0x1ab)](_0x6e2309[_0x53f169(0x1ac)]),delete _0x57b41d['gatewaySettings']);_0x6e2309[_0x53f169(0x1d2)]&&(_0x6e2309[_0x53f169(0x1d2)][_0x53f169(0x1bf)]!==undefined&&(_0x57b41d[_0x53f169(0x1bf)]=_0x6e2309[_0x53f169(0x1d2)][_0x53f169(0x1bf)]||null),_0x6e2309[_0x53f169(0x1d2)][_0x53f169(0x1c5)]!==undefined&&(_0x57b41d[_0x53f169(0x1c5)]=_0x6e2309[_0x53f169(0x1d2)]['usdtTrcWallet']||null),_0x6e2309['wallets'][_0x53f169(0x1c8)]!==undefined&&(_0x57b41d['usdtErcWallet']=_0x6e2309['wallets'][_0x53f169(0x1c8)]||null),_0x6e2309[_0x53f169(0x1d2)][_0x53f169(0x1d0)]!==undefined&&(_0x57b41d[_0x53f169(0x1d0)]=_0x6e2309['wallets'][_0x53f169(0x1d0)]||null),delete _0x57b41d[_0x53f169(0x1d2)]);const _0x45d27e=await database_1[_0x53f169(0x1c2)][_0x53f169(0x1da)]['update']({'where':{'id':_0x2c2564},'data':_0x57b41d,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x45d27e['id'],'fullName':_0x45d27e[_0x53f169(0x1b0)],'username':_0x45d27e[_0x53f169(0x1b6)],'telegramId':_0x45d27e[_0x53f169(0x1d6)],'merchantUrl':_0x45d27e[_0x53f169(0x1ba)],'gateways':_0x45d27e[_0x53f169(0x1a5)]?JSON[_0x53f169(0x1af)](_0x45d27e['paymentGateways']):null,'gatewaySettings':_0x45d27e[_0x53f169(0x1ac)]?JSON[_0x53f169(0x1af)](_0x45d27e[_0x53f169(0x1ac)]):null,'publicKey':_0x45d27e['publicKey'],'wallets':{'usdtPolygonWallet':_0x45d27e[_0x53f169(0x1bf)],'usdtTrcWallet':_0x45d27e[_0x53f169(0x1c5)],'usdtErcWallet':_0x45d27e[_0x53f169(0x1c8)],'usdcPolygonWallet':_0x45d27e[_0x53f169(0x1d0)]},'status':_0x45d27e[_0x53f169(0x1be)],'createdAt':_0x45d27e[_0x53f169(0x1b3)]};}async[a61_0x3c8170(0x1b7)](_0x4bbca4){const _0x16914c=a61_0x3c8170;await database_1[_0x16914c(0x1c2)][_0x16914c(0x1da)][_0x16914c(0x1b4)]({'where':{'id':_0x4bbca4}});}}exports[a61_0x3c8170(0x1a7)]=UserService;