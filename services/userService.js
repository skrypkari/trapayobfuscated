'use strict';function a63_0x43b5(_0x175173,_0x4805cd){const _0x5d35eb=a63_0x5d35();return a63_0x43b5=function(_0x43b565,_0x30d09f){_0x43b565=_0x43b565-0x16b;let _0x38769c=_0x5d35eb[_0x43b565];return _0x38769c;},a63_0x43b5(_0x175173,_0x4805cd);}const a63_0x54473e=a63_0x43b5;(function(_0xd51746,_0x37382e){const _0xdd0773=a63_0x43b5,_0x1defd2=_0xd51746();while(!![]){try{const _0x18aeae=parseInt(_0xdd0773(0x191))/0x1*(parseInt(_0xdd0773(0x18b))/0x2)+-parseInt(_0xdd0773(0x182))/0x3*(-parseInt(_0xdd0773(0x1a2))/0x4)+-parseInt(_0xdd0773(0x17c))/0x5+-parseInt(_0xdd0773(0x175))/0x6*(parseInt(_0xdd0773(0x189))/0x7)+parseInt(_0xdd0773(0x195))/0x8+parseInt(_0xdd0773(0x196))/0x9*(parseInt(_0xdd0773(0x170))/0xa)+-parseInt(_0xdd0773(0x184))/0xb*(parseInt(_0xdd0773(0x19b))/0xc);if(_0x18aeae===_0x37382e)break;else _0x1defd2['push'](_0x1defd2['shift']());}catch(_0x54196b){_0x1defd2['push'](_0x1defd2['shift']());}}}(a63_0x5d35,0x7be76));var __importDefault=this&&this[a63_0x54473e(0x187)]||function(_0x2a6b36){const _0x494b86=a63_0x54473e;return _0x2a6b36&&_0x2a6b36[_0x494b86(0x19f)]?_0x2a6b36:{'default':_0x2a6b36};};Object[a63_0x54473e(0x178)](exports,'__esModule',{'value':!![]}),exports[a63_0x54473e(0x192)]=void 0x0;const bcryptjs_1=__importDefault(require(a63_0x54473e(0x193))),crypto_1=__importDefault(require(a63_0x54473e(0x180))),database_1=__importDefault(require(a63_0x54473e(0x183)));class UserService{[a63_0x54473e(0x198)](){const _0x2698cc=a63_0x54473e,_0xd03907='pk_'+crypto_1['default'][_0x2698cc(0x171)](0x20)[_0x2698cc(0x16b)](_0x2698cc(0x17e)),_0x36fc42='sk_'+crypto_1[_0x2698cc(0x190)][_0x2698cc(0x171)](0x20)[_0x2698cc(0x16b)]('hex');return{'publicKey':_0xd03907,'secretKey':_0x36fc42};}async['createUser'](_0x15ca2b){const _0x10a152=a63_0x54473e,{fullName:_0x3c4951,username:_0x3c3319,password:_0x3b2353,telegramId:_0x518c58,merchantUrl:_0xde045e,gateways:_0x4ab221,gatewaySettings:_0x4e0541,wallets:_0x1ff949}=_0x15ca2b,_0x5a0e6f=await database_1[_0x10a152(0x190)][_0x10a152(0x173)]['findUnique']({'where':{'username':_0x3c3319}});if(_0x5a0e6f)throw new Error(_0x10a152(0x197));if(_0x518c58){const _0x5d44e2=await database_1[_0x10a152(0x190)][_0x10a152(0x173)][_0x10a152(0x16d)]({'where':{'telegram':_0x518c58}});if(_0x5d44e2)throw new Error('Telegram\x20username\x20already\x20exists');}const _0x52c6d5=await bcryptjs_1['default'][_0x10a152(0x18d)](_0x3b2353,0xc),{publicKey:_0x2bff9e,secretKey:_0x44b4e8}=this[_0x10a152(0x198)](),_0x129f4a=await database_1[_0x10a152(0x190)][_0x10a152(0x173)][_0x10a152(0x16f)]({'data':{'name':_0x3c4951,'username':_0x3c3319,'password':_0x52c6d5,'telegram':_0x518c58,'shopUrl':_0xde045e,'paymentGateways':_0x4ab221?JSON[_0x10a152(0x188)](_0x4ab221):null,'gatewaySettings':_0x4e0541?JSON[_0x10a152(0x188)](_0x4e0541):null,'usdtPolygonWallet':_0x1ff949?.[_0x10a152(0x17b)]||null,'usdtTrcWallet':_0x1ff949?.[_0x10a152(0x194)]||null,'usdtErcWallet':_0x1ff949?.[_0x10a152(0x1a0)]||null,'usdcPolygonWallet':_0x1ff949?.[_0x10a152(0x18e)]||null,'publicKey':_0x2bff9e,'secretKey':_0x44b4e8,'status':_0x10a152(0x199)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x129f4a['id'],'fullName':_0x129f4a[_0x10a152(0x18f)],'username':_0x129f4a[_0x10a152(0x181)],'telegramId':_0x129f4a[_0x10a152(0x174)],'merchantUrl':_0x129f4a[_0x10a152(0x172)],'gateways':_0x129f4a[_0x10a152(0x17f)]?JSON[_0x10a152(0x1a1)](_0x129f4a[_0x10a152(0x17f)]):null,'gatewaySettings':_0x129f4a[_0x10a152(0x18a)]?JSON['parse'](_0x129f4a[_0x10a152(0x18a)]):null,'publicKey':_0x129f4a[_0x10a152(0x177)],'wallets':{'usdtPolygonWallet':_0x129f4a[_0x10a152(0x17b)],'usdtTrcWallet':_0x129f4a[_0x10a152(0x194)],'usdtErcWallet':_0x129f4a[_0x10a152(0x1a0)],'usdcPolygonWallet':_0x129f4a[_0x10a152(0x18e)]},'status':_0x129f4a[_0x10a152(0x17a)],'createdAt':_0x129f4a[_0x10a152(0x176)]};}async['getAllUsers'](){const _0x1095eb=a63_0x54473e,_0x4fb223=await database_1[_0x1095eb(0x190)][_0x1095eb(0x173)][_0x1095eb(0x19c)]({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':'desc'}});return _0x4fb223[_0x1095eb(0x185)](_0x3c599c=>({'id':_0x3c599c['id'],'fullName':_0x3c599c[_0x1095eb(0x18f)],'username':_0x3c599c[_0x1095eb(0x181)],'telegramId':_0x3c599c['telegram'],'merchantUrl':_0x3c599c[_0x1095eb(0x172)],'gateways':_0x3c599c[_0x1095eb(0x17f)]?JSON['parse'](_0x3c599c['paymentGateways']):null,'gatewaySettings':_0x3c599c[_0x1095eb(0x18a)]?JSON[_0x1095eb(0x1a1)](_0x3c599c[_0x1095eb(0x18a)]):null,'publicKey':_0x3c599c[_0x1095eb(0x177)],'wallets':{'usdtPolygonWallet':_0x3c599c[_0x1095eb(0x17b)],'usdtTrcWallet':_0x3c599c['usdtTrcWallet'],'usdtErcWallet':_0x3c599c[_0x1095eb(0x1a0)],'usdcPolygonWallet':_0x3c599c[_0x1095eb(0x18e)]},'status':_0x3c599c[_0x1095eb(0x17a)],'createdAt':_0x3c599c['createdAt']}));}async[a63_0x54473e(0x19a)](_0x588782){const _0x3455a8=a63_0x54473e,_0x31fa9e=await database_1[_0x3455a8(0x190)][_0x3455a8(0x173)]['findUnique']({'where':{'id':_0x588782},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x31fa9e)return null;return{'id':_0x31fa9e['id'],'fullName':_0x31fa9e[_0x3455a8(0x18f)],'username':_0x31fa9e[_0x3455a8(0x181)],'telegramId':_0x31fa9e[_0x3455a8(0x174)],'merchantUrl':_0x31fa9e[_0x3455a8(0x172)],'gateways':_0x31fa9e[_0x3455a8(0x17f)]?JSON[_0x3455a8(0x1a1)](_0x31fa9e['paymentGateways']):null,'gatewaySettings':_0x31fa9e[_0x3455a8(0x18a)]?JSON[_0x3455a8(0x1a1)](_0x31fa9e[_0x3455a8(0x18a)]):null,'publicKey':_0x31fa9e['publicKey'],'wallets':{'usdtPolygonWallet':_0x31fa9e[_0x3455a8(0x17b)],'usdtTrcWallet':_0x31fa9e[_0x3455a8(0x194)],'usdtErcWallet':_0x31fa9e[_0x3455a8(0x1a0)],'usdcPolygonWallet':_0x31fa9e['usdcPolygonWallet']},'status':_0x31fa9e[_0x3455a8(0x17a)],'createdAt':_0x31fa9e[_0x3455a8(0x176)]};}async['updateUser'](_0x36c8df,_0x2870ad){const _0x5eb322=a63_0x54473e,_0x5a4d81={..._0x2870ad};_0x2870ad[_0x5eb322(0x16c)]&&(_0x5a4d81[_0x5eb322(0x16c)]=await bcryptjs_1['default'][_0x5eb322(0x18d)](_0x2870ad[_0x5eb322(0x16c)],0xc));_0x2870ad[_0x5eb322(0x186)]&&(_0x5a4d81[_0x5eb322(0x18f)]=_0x2870ad[_0x5eb322(0x186)],delete _0x5a4d81[_0x5eb322(0x186)]);_0x2870ad[_0x5eb322(0x18c)]&&(_0x5a4d81[_0x5eb322(0x174)]=_0x2870ad['telegramId'],delete _0x5a4d81['telegramId']);_0x2870ad[_0x5eb322(0x19d)]&&(_0x5a4d81[_0x5eb322(0x172)]=_0x2870ad[_0x5eb322(0x19d)],delete _0x5a4d81[_0x5eb322(0x19d)]);_0x2870ad['gateways']&&(_0x5a4d81['paymentGateways']=JSON['stringify'](_0x2870ad['gateways']),delete _0x5a4d81[_0x5eb322(0x17d)]);_0x2870ad[_0x5eb322(0x18a)]&&(_0x5a4d81[_0x5eb322(0x18a)]=JSON[_0x5eb322(0x188)](_0x2870ad[_0x5eb322(0x18a)]),delete _0x5a4d81['gatewaySettings']);_0x2870ad[_0x5eb322(0x179)]&&(_0x2870ad[_0x5eb322(0x179)]['usdtPolygonWallet']!==undefined&&(_0x5a4d81['usdtPolygonWallet']=_0x2870ad[_0x5eb322(0x179)][_0x5eb322(0x17b)]||null),_0x2870ad[_0x5eb322(0x179)][_0x5eb322(0x194)]!==undefined&&(_0x5a4d81[_0x5eb322(0x194)]=_0x2870ad['wallets'][_0x5eb322(0x194)]||null),_0x2870ad[_0x5eb322(0x179)]['usdtErcWallet']!==undefined&&(_0x5a4d81['usdtErcWallet']=_0x2870ad['wallets'][_0x5eb322(0x1a0)]||null),_0x2870ad[_0x5eb322(0x179)][_0x5eb322(0x18e)]!==undefined&&(_0x5a4d81['usdcPolygonWallet']=_0x2870ad[_0x5eb322(0x179)][_0x5eb322(0x18e)]||null),delete _0x5a4d81['wallets']);const _0x58e5af=await database_1[_0x5eb322(0x190)][_0x5eb322(0x173)][_0x5eb322(0x16e)]({'where':{'id':_0x36c8df},'data':_0x5a4d81,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x58e5af['id'],'fullName':_0x58e5af[_0x5eb322(0x18f)],'username':_0x58e5af[_0x5eb322(0x181)],'telegramId':_0x58e5af[_0x5eb322(0x174)],'merchantUrl':_0x58e5af['shopUrl'],'gateways':_0x58e5af['paymentGateways']?JSON['parse'](_0x58e5af['paymentGateways']):null,'gatewaySettings':_0x58e5af[_0x5eb322(0x18a)]?JSON[_0x5eb322(0x1a1)](_0x58e5af[_0x5eb322(0x18a)]):null,'publicKey':_0x58e5af['publicKey'],'wallets':{'usdtPolygonWallet':_0x58e5af[_0x5eb322(0x17b)],'usdtTrcWallet':_0x58e5af[_0x5eb322(0x194)],'usdtErcWallet':_0x58e5af[_0x5eb322(0x1a0)],'usdcPolygonWallet':_0x58e5af['usdcPolygonWallet']},'status':_0x58e5af['status'],'createdAt':_0x58e5af[_0x5eb322(0x176)]};}async[a63_0x54473e(0x19e)](_0x392c70){const _0x21f124=a63_0x54473e;await database_1[_0x21f124(0x190)][_0x21f124(0x173)][_0x21f124(0x1a3)]({'where':{'id':_0x392c70}});}}exports[a63_0x54473e(0x192)]=UserService;function a63_0x5d35(){const _0x2a2da7=['bcryptjs','usdtTrcWallet','4429864XOITTz','1116OVZVId','Username\x20already\x20exists','generateApiKeys','ACTIVE','getUserById','1233684abyouL','findMany','merchantUrl','deleteUser','__esModule','usdtErcWallet','parse','504508PlykPc','delete','toString','password','findUnique','update','create','2260xwADGd','randomBytes','shopUrl','shop','telegram','750018VmoNDA','createdAt','publicKey','defineProperty','wallets','status','usdtPolygonWallet','3883180oJukGn','gateways','hex','paymentGateways','crypto','username','6mnfILm','../config/database','33wWrGWI','map','fullName','__importDefault','stringify','7cGYLuq','gatewaySettings','2lkyPzk','telegramId','hash','usdcPolygonWallet','name','default','883559aCrfOV','UserService'];a63_0x5d35=function(){return _0x2a2da7;};return a63_0x5d35();}