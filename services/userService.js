'use strict';function a68_0x56b8(_0x5570ec,_0x1c43de){const _0x39390a=a68_0x3939();return a68_0x56b8=function(_0x56b82d,_0x1b3345){_0x56b82d=_0x56b82d-0xb8;let _0x3a35f6=_0x39390a[_0x56b82d];return _0x3a35f6;},a68_0x56b8(_0x5570ec,_0x1c43de);}const a68_0x242b96=a68_0x56b8;(function(_0x3d6b36,_0x456bd8){const _0x34a382=a68_0x56b8,_0x237bf1=_0x3d6b36();while(!![]){try{const _0x3fe1e4=-parseInt(_0x34a382(0xc7))/0x1*(parseInt(_0x34a382(0xbf))/0x2)+parseInt(_0x34a382(0xcb))/0x3*(parseInt(_0x34a382(0xe0))/0x4)+-parseInt(_0x34a382(0xbb))/0x5+-parseInt(_0x34a382(0xda))/0x6+parseInt(_0x34a382(0xec))/0x7*(parseInt(_0x34a382(0xef))/0x8)+-parseInt(_0x34a382(0xc5))/0x9*(-parseInt(_0x34a382(0xdf))/0xa)+parseInt(_0x34a382(0xe3))/0xb;if(_0x3fe1e4===_0x456bd8)break;else _0x237bf1['push'](_0x237bf1['shift']());}catch(_0x4b68be){_0x237bf1['push'](_0x237bf1['shift']());}}}(a68_0x3939,0x19ba8));function a68_0x3939(){const _0x40d0b8=['toString','desc','651072zhDQjF','hash','merchantUrl','Telegram\x20username\x20already\x20exists','delete','1704430MvJDQQ','4mYIJXM','wallets','usdtPolygonWallet','441243qkonpp','password','bcryptjs','status','paymentGateways','generateApiKeys','telegram','publicKey','gatewaySettings','147rWFlvC','usdtTrcWallet','fullName','42776Suxmra','crypto','UserService','shop','ACTIVE','usdtErcWallet','name','sk_','131215nXiCwd','pk_','username','updateUser','110TPYDmA','stringify','createdAt','usdcPolygonWallet','default','gateways','9WPKLow','create','2081yozUeO','findMany','shopUrl','hex','95253ocjHXp','randomBytes','update','findUnique','deleteUser','__importDefault','map','Username\x20already\x20exists','parse','createUser','getAllUsers','telegramId','../config/database'];a68_0x3939=function(){return _0x40d0b8;};return a68_0x3939();}var __importDefault=this&&this[a68_0x242b96(0xd0)]||function(_0x59e480){return _0x59e480&&_0x59e480['__esModule']?_0x59e480:{'default':_0x59e480};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a68_0x242b96(0xf1)]=void 0x0;const bcryptjs_1=__importDefault(require(a68_0x242b96(0xe5))),crypto_1=__importDefault(require(a68_0x242b96(0xf0))),database_1=__importDefault(require(a68_0x242b96(0xd7)));class UserService{[a68_0x242b96(0xe8)](){const _0x33bf01=a68_0x242b96,_0x51425b=_0x33bf01(0xbc)+crypto_1[_0x33bf01(0xc3)][_0x33bf01(0xcc)](0x20)[_0x33bf01(0xd8)](_0x33bf01(0xca)),_0x2805f8=_0x33bf01(0xba)+crypto_1[_0x33bf01(0xc3)][_0x33bf01(0xcc)](0x20)[_0x33bf01(0xd8)](_0x33bf01(0xca));return{'publicKey':_0x51425b,'secretKey':_0x2805f8};}async[a68_0x242b96(0xd4)](_0x1e01cf){const _0x52aae1=a68_0x242b96,{fullName:_0x1caeff,username:_0x3da9c4,password:_0x27c8d8,telegramId:_0x573c15,merchantUrl:_0x40187f,gateways:_0x1b92f0,gatewaySettings:_0x44b7b5,wallets:_0x216d52}=_0x1e01cf,_0x2aaf16=await database_1[_0x52aae1(0xc3)][_0x52aae1(0xf2)][_0x52aae1(0xce)]({'where':{'username':_0x3da9c4}});if(_0x2aaf16)throw new Error(_0x52aae1(0xd2));if(_0x573c15){const _0x3eb03b=await database_1['default'][_0x52aae1(0xf2)]['findUnique']({'where':{'telegram':_0x573c15}});if(_0x3eb03b)throw new Error(_0x52aae1(0xdd));}const _0x20bdb1=await bcryptjs_1[_0x52aae1(0xc3)][_0x52aae1(0xdb)](_0x27c8d8,0xc),{publicKey:_0xd9091f,secretKey:_0x192442}=this[_0x52aae1(0xe8)](),_0x3c8d90=await database_1[_0x52aae1(0xc3)][_0x52aae1(0xf2)][_0x52aae1(0xc6)]({'data':{'name':_0x1caeff,'username':_0x3da9c4,'password':_0x20bdb1,'telegram':_0x573c15,'shopUrl':_0x40187f,'paymentGateways':_0x1b92f0?JSON[_0x52aae1(0xc0)](_0x1b92f0):null,'gatewaySettings':_0x44b7b5?JSON[_0x52aae1(0xc0)](_0x44b7b5):null,'usdtPolygonWallet':_0x216d52?.[_0x52aae1(0xe2)]||null,'usdtTrcWallet':_0x216d52?.[_0x52aae1(0xed)]||null,'usdtErcWallet':_0x216d52?.[_0x52aae1(0xb8)]||null,'usdcPolygonWallet':_0x216d52?.[_0x52aae1(0xc2)]||null,'publicKey':_0xd9091f,'secretKey':_0x192442,'status':_0x52aae1(0xf3)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x3c8d90['id'],'fullName':_0x3c8d90[_0x52aae1(0xb9)],'username':_0x3c8d90['username'],'telegramId':_0x3c8d90[_0x52aae1(0xe9)],'merchantUrl':_0x3c8d90['shopUrl'],'gateways':_0x3c8d90['paymentGateways']?JSON['parse'](_0x3c8d90['paymentGateways']):null,'gatewaySettings':_0x3c8d90[_0x52aae1(0xeb)]?JSON[_0x52aae1(0xd3)](_0x3c8d90[_0x52aae1(0xeb)]):null,'publicKey':_0x3c8d90[_0x52aae1(0xea)],'wallets':{'usdtPolygonWallet':_0x3c8d90['usdtPolygonWallet'],'usdtTrcWallet':_0x3c8d90['usdtTrcWallet'],'usdtErcWallet':_0x3c8d90[_0x52aae1(0xb8)],'usdcPolygonWallet':_0x3c8d90['usdcPolygonWallet']},'status':_0x3c8d90['status'],'createdAt':_0x3c8d90[_0x52aae1(0xc1)]};}async[a68_0x242b96(0xd5)](){const _0x330670=a68_0x242b96,_0x129c37=await database_1[_0x330670(0xc3)][_0x330670(0xf2)][_0x330670(0xc8)]({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':_0x330670(0xd9)}});return _0x129c37[_0x330670(0xd1)](_0x2ea535=>({'id':_0x2ea535['id'],'fullName':_0x2ea535[_0x330670(0xb9)],'username':_0x2ea535[_0x330670(0xbd)],'telegramId':_0x2ea535[_0x330670(0xe9)],'merchantUrl':_0x2ea535['shopUrl'],'gateways':_0x2ea535[_0x330670(0xe7)]?JSON['parse'](_0x2ea535[_0x330670(0xe7)]):null,'gatewaySettings':_0x2ea535['gatewaySettings']?JSON[_0x330670(0xd3)](_0x2ea535[_0x330670(0xeb)]):null,'publicKey':_0x2ea535[_0x330670(0xea)],'wallets':{'usdtPolygonWallet':_0x2ea535[_0x330670(0xe2)],'usdtTrcWallet':_0x2ea535[_0x330670(0xed)],'usdtErcWallet':_0x2ea535['usdtErcWallet'],'usdcPolygonWallet':_0x2ea535[_0x330670(0xc2)]},'status':_0x2ea535[_0x330670(0xe6)],'createdAt':_0x2ea535[_0x330670(0xc1)]}));}async['getUserById'](_0x23db2d){const _0x53676c=a68_0x242b96,_0x4be95f=await database_1['default'][_0x53676c(0xf2)][_0x53676c(0xce)]({'where':{'id':_0x23db2d},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x4be95f)return null;return{'id':_0x4be95f['id'],'fullName':_0x4be95f[_0x53676c(0xb9)],'username':_0x4be95f[_0x53676c(0xbd)],'telegramId':_0x4be95f['telegram'],'merchantUrl':_0x4be95f[_0x53676c(0xc9)],'gateways':_0x4be95f['paymentGateways']?JSON[_0x53676c(0xd3)](_0x4be95f[_0x53676c(0xe7)]):null,'gatewaySettings':_0x4be95f[_0x53676c(0xeb)]?JSON[_0x53676c(0xd3)](_0x4be95f[_0x53676c(0xeb)]):null,'publicKey':_0x4be95f[_0x53676c(0xea)],'wallets':{'usdtPolygonWallet':_0x4be95f[_0x53676c(0xe2)],'usdtTrcWallet':_0x4be95f['usdtTrcWallet'],'usdtErcWallet':_0x4be95f[_0x53676c(0xb8)],'usdcPolygonWallet':_0x4be95f['usdcPolygonWallet']},'status':_0x4be95f[_0x53676c(0xe6)],'createdAt':_0x4be95f[_0x53676c(0xc1)]};}async[a68_0x242b96(0xbe)](_0x3837fe,_0x13d519){const _0x47c087=a68_0x242b96,_0x2ea50e={..._0x13d519};_0x13d519['password']&&(_0x2ea50e[_0x47c087(0xe4)]=await bcryptjs_1[_0x47c087(0xc3)][_0x47c087(0xdb)](_0x13d519[_0x47c087(0xe4)],0xc));_0x13d519[_0x47c087(0xee)]&&(_0x2ea50e[_0x47c087(0xb9)]=_0x13d519[_0x47c087(0xee)],delete _0x2ea50e[_0x47c087(0xee)]);_0x13d519['telegramId']&&(_0x2ea50e[_0x47c087(0xe9)]=_0x13d519[_0x47c087(0xd6)],delete _0x2ea50e[_0x47c087(0xd6)]);_0x13d519[_0x47c087(0xdc)]&&(_0x2ea50e[_0x47c087(0xc9)]=_0x13d519['merchantUrl'],delete _0x2ea50e[_0x47c087(0xdc)]);_0x13d519[_0x47c087(0xc4)]&&(_0x2ea50e[_0x47c087(0xe7)]=JSON[_0x47c087(0xc0)](_0x13d519[_0x47c087(0xc4)]),delete _0x2ea50e[_0x47c087(0xc4)]);_0x13d519[_0x47c087(0xeb)]&&(_0x2ea50e[_0x47c087(0xeb)]=JSON[_0x47c087(0xc0)](_0x13d519[_0x47c087(0xeb)]),delete _0x2ea50e[_0x47c087(0xeb)]);_0x13d519[_0x47c087(0xe1)]&&(_0x13d519[_0x47c087(0xe1)][_0x47c087(0xe2)]!==undefined&&(_0x2ea50e[_0x47c087(0xe2)]=_0x13d519[_0x47c087(0xe1)][_0x47c087(0xe2)]||null),_0x13d519['wallets']['usdtTrcWallet']!==undefined&&(_0x2ea50e[_0x47c087(0xed)]=_0x13d519[_0x47c087(0xe1)][_0x47c087(0xed)]||null),_0x13d519[_0x47c087(0xe1)][_0x47c087(0xb8)]!==undefined&&(_0x2ea50e[_0x47c087(0xb8)]=_0x13d519[_0x47c087(0xe1)]['usdtErcWallet']||null),_0x13d519[_0x47c087(0xe1)][_0x47c087(0xc2)]!==undefined&&(_0x2ea50e[_0x47c087(0xc2)]=_0x13d519['wallets'][_0x47c087(0xc2)]||null),delete _0x2ea50e[_0x47c087(0xe1)]);const _0x20922f=await database_1[_0x47c087(0xc3)][_0x47c087(0xf2)][_0x47c087(0xcd)]({'where':{'id':_0x3837fe},'data':_0x2ea50e,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x20922f['id'],'fullName':_0x20922f[_0x47c087(0xb9)],'username':_0x20922f[_0x47c087(0xbd)],'telegramId':_0x20922f[_0x47c087(0xe9)],'merchantUrl':_0x20922f[_0x47c087(0xc9)],'gateways':_0x20922f[_0x47c087(0xe7)]?JSON[_0x47c087(0xd3)](_0x20922f['paymentGateways']):null,'gatewaySettings':_0x20922f[_0x47c087(0xeb)]?JSON[_0x47c087(0xd3)](_0x20922f[_0x47c087(0xeb)]):null,'publicKey':_0x20922f[_0x47c087(0xea)],'wallets':{'usdtPolygonWallet':_0x20922f[_0x47c087(0xe2)],'usdtTrcWallet':_0x20922f[_0x47c087(0xed)],'usdtErcWallet':_0x20922f[_0x47c087(0xb8)],'usdcPolygonWallet':_0x20922f[_0x47c087(0xc2)]},'status':_0x20922f[_0x47c087(0xe6)],'createdAt':_0x20922f[_0x47c087(0xc1)]};}async[a68_0x242b96(0xcf)](_0x335951){const _0x54aaf7=a68_0x242b96;await database_1[_0x54aaf7(0xc3)][_0x54aaf7(0xf2)][_0x54aaf7(0xde)]({'where':{'id':_0x335951}});}}exports[a68_0x242b96(0xf1)]=UserService;