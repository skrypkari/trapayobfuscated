'use strict';const a51_0x5c71f5=a51_0x1c5a;(function(_0x204bae,_0x154fe0){const _0x4d0cff=a51_0x1c5a,_0x565da7=_0x204bae();while(!![]){try{const _0x111117=parseInt(_0x4d0cff(0x1bd))/0x1*(-parseInt(_0x4d0cff(0x1c5))/0x2)+parseInt(_0x4d0cff(0x1cd))/0x3+parseInt(_0x4d0cff(0x1b8))/0x4+parseInt(_0x4d0cff(0x1eb))/0x5*(parseInt(_0x4d0cff(0x1cc))/0x6)+-parseInt(_0x4d0cff(0x1d1))/0x7*(-parseInt(_0x4d0cff(0x1e0))/0x8)+-parseInt(_0x4d0cff(0x1ed))/0x9*(-parseInt(_0x4d0cff(0x1c0))/0xa)+parseInt(_0x4d0cff(0x1ee))/0xb*(-parseInt(_0x4d0cff(0x1ea))/0xc);if(_0x111117===_0x154fe0)break;else _0x565da7['push'](_0x565da7['shift']());}catch(_0xbc8702){_0x565da7['push'](_0x565da7['shift']());}}}(a51_0x3d70,0x36338));function a51_0x1c5a(_0x2a920c,_0x1eac25){const _0x3d7087=a51_0x3d70();return a51_0x1c5a=function(_0x1c5a69,_0xa82ccf){_0x1c5a69=_0x1c5a69-0x1b4;let _0x80672=_0x3d7087[_0x1c5a69];return _0x80672;},a51_0x1c5a(_0x2a920c,_0x1eac25);}var __importDefault=this&&this[a51_0x5c71f5(0x1c3)]||function(_0x53d372){return _0x53d372&&_0x53d372['__esModule']?_0x53d372:{'default':_0x53d372};};Object['defineProperty'](exports,a51_0x5c71f5(0x1d6),{'value':!![]}),exports[a51_0x5c71f5(0x1c1)]=void 0x0;const bcryptjs_1=__importDefault(require('bcryptjs')),crypto_1=__importDefault(require(a51_0x5c71f5(0x1b7))),database_1=__importDefault(require(a51_0x5c71f5(0x1bc)));class UserService{['generateApiKeys'](){const _0x37a7f9=a51_0x5c71f5,_0x1cc4ba=_0x37a7f9(0x1b5)+crypto_1[_0x37a7f9(0x1e4)][_0x37a7f9(0x1b6)](0x20)[_0x37a7f9(0x1ca)]('hex'),_0x481c7a=_0x37a7f9(0x1dc)+crypto_1['default'][_0x37a7f9(0x1b6)](0x20)[_0x37a7f9(0x1ca)]('hex');return{'publicKey':_0x1cc4ba,'secretKey':_0x481c7a};}async[a51_0x5c71f5(0x1b4)](_0x30bf83){const _0x13063c=a51_0x5c71f5,{fullName:_0x502353,username:_0x3907c4,password:_0x142e1a,telegramId:_0x16a312,merchantUrl:_0x2a6e27,gateways:_0x27b9c4,gatewaySettings:_0x364ad2,wallets:_0x58db16}=_0x30bf83,_0x24145a=await database_1['default'][_0x13063c(0x1e2)][_0x13063c(0x1de)]({'where':{'username':_0x3907c4}});if(_0x24145a)throw new Error(_0x13063c(0x1c7));if(_0x16a312){const _0x129f27=await database_1[_0x13063c(0x1e4)][_0x13063c(0x1e2)][_0x13063c(0x1de)]({'where':{'telegram':_0x16a312}});if(_0x129f27)throw new Error(_0x13063c(0x1d3));}const _0x2b3b1f=await bcryptjs_1[_0x13063c(0x1e4)][_0x13063c(0x1e7)](_0x142e1a,0xc),{publicKey:_0x51c12f,secretKey:_0x3f4f81}=this[_0x13063c(0x1c4)](),_0x2b6b21=await database_1[_0x13063c(0x1e4)][_0x13063c(0x1e2)][_0x13063c(0x1cf)]({'data':{'name':_0x502353,'username':_0x3907c4,'password':_0x2b3b1f,'telegram':_0x16a312,'shopUrl':_0x2a6e27,'paymentGateways':_0x27b9c4?JSON[_0x13063c(0x1e8)](_0x27b9c4):null,'gatewaySettings':_0x364ad2?JSON[_0x13063c(0x1e8)](_0x364ad2):null,'usdtPolygonWallet':_0x58db16?.[_0x13063c(0x1ef)]||null,'usdtTrcWallet':_0x58db16?.[_0x13063c(0x1d4)]||null,'usdtErcWallet':_0x58db16?.[_0x13063c(0x1d8)]||null,'usdcPolygonWallet':_0x58db16?.['usdcPolygonWallet']||null,'publicKey':_0x51c12f,'secretKey':_0x3f4f81,'status':_0x13063c(0x1d5)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x2b6b21['id'],'fullName':_0x2b6b21[_0x13063c(0x1df)],'username':_0x2b6b21[_0x13063c(0x1e3)],'telegramId':_0x2b6b21[_0x13063c(0x1da)],'merchantUrl':_0x2b6b21[_0x13063c(0x1d0)],'gateways':_0x2b6b21[_0x13063c(0x1be)]?JSON[_0x13063c(0x1e6)](_0x2b6b21[_0x13063c(0x1be)]):null,'gatewaySettings':_0x2b6b21['gatewaySettings']?JSON[_0x13063c(0x1e6)](_0x2b6b21[_0x13063c(0x1bf)]):null,'publicKey':_0x2b6b21[_0x13063c(0x1d9)],'wallets':{'usdtPolygonWallet':_0x2b6b21[_0x13063c(0x1ef)],'usdtTrcWallet':_0x2b6b21[_0x13063c(0x1d4)],'usdtErcWallet':_0x2b6b21[_0x13063c(0x1d8)],'usdcPolygonWallet':_0x2b6b21[_0x13063c(0x1ce)]},'status':_0x2b6b21[_0x13063c(0x1e1)],'createdAt':_0x2b6b21[_0x13063c(0x1ba)]};}async[a51_0x5c71f5(0x1cb)](){const _0x4ef84f=a51_0x5c71f5,_0x2642c5=await database_1[_0x4ef84f(0x1e4)]['shop'][_0x4ef84f(0x1b9)]({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':_0x4ef84f(0x1e5)}});return _0x2642c5[_0x4ef84f(0x1bb)](_0x257d0e=>({'id':_0x257d0e['id'],'fullName':_0x257d0e[_0x4ef84f(0x1df)],'username':_0x257d0e['username'],'telegramId':_0x257d0e[_0x4ef84f(0x1da)],'merchantUrl':_0x257d0e['shopUrl'],'gateways':_0x257d0e[_0x4ef84f(0x1be)]?JSON[_0x4ef84f(0x1e6)](_0x257d0e[_0x4ef84f(0x1be)]):null,'gatewaySettings':_0x257d0e[_0x4ef84f(0x1bf)]?JSON[_0x4ef84f(0x1e6)](_0x257d0e[_0x4ef84f(0x1bf)]):null,'publicKey':_0x257d0e[_0x4ef84f(0x1d9)],'wallets':{'usdtPolygonWallet':_0x257d0e['usdtPolygonWallet'],'usdtTrcWallet':_0x257d0e['usdtTrcWallet'],'usdtErcWallet':_0x257d0e[_0x4ef84f(0x1d8)],'usdcPolygonWallet':_0x257d0e['usdcPolygonWallet']},'status':_0x257d0e[_0x4ef84f(0x1e1)],'createdAt':_0x257d0e[_0x4ef84f(0x1ba)]}));}async[a51_0x5c71f5(0x1c8)](_0x182dc8){const _0x40a18d=a51_0x5c71f5,_0x5b7419=await database_1['default'][_0x40a18d(0x1e2)][_0x40a18d(0x1de)]({'where':{'id':_0x182dc8},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x5b7419)return null;return{'id':_0x5b7419['id'],'fullName':_0x5b7419[_0x40a18d(0x1df)],'username':_0x5b7419[_0x40a18d(0x1e3)],'telegramId':_0x5b7419['telegram'],'merchantUrl':_0x5b7419[_0x40a18d(0x1d0)],'gateways':_0x5b7419[_0x40a18d(0x1be)]?JSON['parse'](_0x5b7419['paymentGateways']):null,'gatewaySettings':_0x5b7419[_0x40a18d(0x1bf)]?JSON[_0x40a18d(0x1e6)](_0x5b7419['gatewaySettings']):null,'publicKey':_0x5b7419[_0x40a18d(0x1d9)],'wallets':{'usdtPolygonWallet':_0x5b7419[_0x40a18d(0x1ef)],'usdtTrcWallet':_0x5b7419[_0x40a18d(0x1d4)],'usdtErcWallet':_0x5b7419['usdtErcWallet'],'usdcPolygonWallet':_0x5b7419[_0x40a18d(0x1ce)]},'status':_0x5b7419[_0x40a18d(0x1e1)],'createdAt':_0x5b7419['createdAt']};}async[a51_0x5c71f5(0x1c6)](_0x581f8a,_0x32cf74){const _0xc65e13=a51_0x5c71f5,_0x20ef56={..._0x32cf74};_0x32cf74['password']&&(_0x20ef56[_0xc65e13(0x1db)]=await bcryptjs_1['default'][_0xc65e13(0x1e7)](_0x32cf74[_0xc65e13(0x1db)],0xc));_0x32cf74[_0xc65e13(0x1e9)]&&(_0x20ef56[_0xc65e13(0x1df)]=_0x32cf74['fullName'],delete _0x20ef56[_0xc65e13(0x1e9)]);_0x32cf74[_0xc65e13(0x1c9)]&&(_0x20ef56[_0xc65e13(0x1da)]=_0x32cf74[_0xc65e13(0x1c9)],delete _0x20ef56[_0xc65e13(0x1c9)]);_0x32cf74[_0xc65e13(0x1ec)]&&(_0x20ef56[_0xc65e13(0x1d0)]=_0x32cf74[_0xc65e13(0x1ec)],delete _0x20ef56[_0xc65e13(0x1ec)]);_0x32cf74[_0xc65e13(0x1dd)]&&(_0x20ef56['paymentGateways']=JSON[_0xc65e13(0x1e8)](_0x32cf74[_0xc65e13(0x1dd)]),delete _0x20ef56[_0xc65e13(0x1dd)]);_0x32cf74[_0xc65e13(0x1bf)]&&(_0x20ef56['gatewaySettings']=JSON[_0xc65e13(0x1e8)](_0x32cf74['gatewaySettings']),delete _0x20ef56[_0xc65e13(0x1bf)]);_0x32cf74[_0xc65e13(0x1c2)]&&(_0x32cf74[_0xc65e13(0x1c2)][_0xc65e13(0x1ef)]!==undefined&&(_0x20ef56[_0xc65e13(0x1ef)]=_0x32cf74[_0xc65e13(0x1c2)][_0xc65e13(0x1ef)]||null),_0x32cf74['wallets'][_0xc65e13(0x1d4)]!==undefined&&(_0x20ef56[_0xc65e13(0x1d4)]=_0x32cf74[_0xc65e13(0x1c2)][_0xc65e13(0x1d4)]||null),_0x32cf74[_0xc65e13(0x1c2)][_0xc65e13(0x1d8)]!==undefined&&(_0x20ef56[_0xc65e13(0x1d8)]=_0x32cf74[_0xc65e13(0x1c2)][_0xc65e13(0x1d8)]||null),_0x32cf74['wallets']['usdcPolygonWallet']!==undefined&&(_0x20ef56[_0xc65e13(0x1ce)]=_0x32cf74[_0xc65e13(0x1c2)]['usdcPolygonWallet']||null),delete _0x20ef56[_0xc65e13(0x1c2)]);const _0x573254=await database_1[_0xc65e13(0x1e4)][_0xc65e13(0x1e2)][_0xc65e13(0x1d7)]({'where':{'id':_0x581f8a},'data':_0x20ef56,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x573254['id'],'fullName':_0x573254[_0xc65e13(0x1df)],'username':_0x573254['username'],'telegramId':_0x573254[_0xc65e13(0x1da)],'merchantUrl':_0x573254[_0xc65e13(0x1d0)],'gateways':_0x573254[_0xc65e13(0x1be)]?JSON[_0xc65e13(0x1e6)](_0x573254['paymentGateways']):null,'gatewaySettings':_0x573254[_0xc65e13(0x1bf)]?JSON[_0xc65e13(0x1e6)](_0x573254[_0xc65e13(0x1bf)]):null,'publicKey':_0x573254[_0xc65e13(0x1d9)],'wallets':{'usdtPolygonWallet':_0x573254['usdtPolygonWallet'],'usdtTrcWallet':_0x573254[_0xc65e13(0x1d4)],'usdtErcWallet':_0x573254['usdtErcWallet'],'usdcPolygonWallet':_0x573254[_0xc65e13(0x1ce)]},'status':_0x573254[_0xc65e13(0x1e1)],'createdAt':_0x573254[_0xc65e13(0x1ba)]};}async[a51_0x5c71f5(0x1d2)](_0xe6a5e0){const _0x2b07d5=a51_0x5c71f5;await database_1[_0x2b07d5(0x1e4)][_0x2b07d5(0x1e2)]['delete']({'where':{'id':_0xe6a5e0}});}}exports['UserService']=UserService;function a51_0x3d70(){const _0x572b54=['map','../config/database','57117dKCOMp','paymentGateways','gatewaySettings','10YZecUY','UserService','wallets','__importDefault','generateApiKeys','12YfxAmu','updateUser','Username\x20already\x20exists','getUserById','telegramId','toString','getAllUsers','18octduF','1146825bcSevR','usdcPolygonWallet','create','shopUrl','48944BetbIl','deleteUser','Telegram\x20username\x20already\x20exists','usdtTrcWallet','ACTIVE','__esModule','update','usdtErcWallet','publicKey','telegram','password','sk_','gateways','findUnique','name','344TnkzLU','status','shop','username','default','desc','parse','hash','stringify','fullName','12eXOUar','680675szXqPW','merchantUrl','2667348ZdHMjs','9088739wNMUdh','usdtPolygonWallet','createUser','pk_','randomBytes','crypto','13004DImKJb','findMany','createdAt'];a51_0x3d70=function(){return _0x572b54;};return a51_0x3d70();}