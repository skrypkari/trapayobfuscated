'use strict';const a56_0x47be18=a56_0x22a5;(function(_0x1aa815,_0x16ab28){const _0x534ff8=a56_0x22a5,_0x14ce81=_0x1aa815();while(!![]){try{const _0xad9882=parseInt(_0x534ff8(0xd3))/0x1+parseInt(_0x534ff8(0xdc))/0x2+parseInt(_0x534ff8(0xa4))/0x3+-parseInt(_0x534ff8(0xc4))/0x4*(-parseInt(_0x534ff8(0xca))/0x5)+parseInt(_0x534ff8(0xb6))/0x6*(-parseInt(_0x534ff8(0xb9))/0x7)+parseInt(_0x534ff8(0xdd))/0x8*(-parseInt(_0x534ff8(0xd5))/0x9)+parseInt(_0x534ff8(0xbb))/0xa*(parseInt(_0x534ff8(0xbd))/0xb);if(_0xad9882===_0x16ab28)break;else _0x14ce81['push'](_0x14ce81['shift']());}catch(_0x35841c){_0x14ce81['push'](_0x14ce81['shift']());}}}(a56_0x28b4,0x3c809));function a56_0x22a5(_0x390b63,_0x49f843){const _0x28b492=a56_0x28b4();return a56_0x22a5=function(_0x22a544,_0x4d9cfd){_0x22a544=_0x22a544-0xa4;let _0x42f299=_0x28b492[_0x22a544];return _0x42f299;},a56_0x22a5(_0x390b63,_0x49f843);}var __importDefault=this&&this[a56_0x47be18(0xc6)]||function(_0xfe2cfc){const _0x2e06a3=a56_0x47be18;return _0xfe2cfc&&_0xfe2cfc[_0x2e06a3(0xd4)]?_0xfe2cfc:{'default':_0xfe2cfc};};Object[a56_0x47be18(0xd8)](exports,a56_0x47be18(0xd4),{'value':!![]}),exports['UserService']=void 0x0;const bcryptjs_1=__importDefault(require(a56_0x47be18(0xab))),crypto_1=__importDefault(require(a56_0x47be18(0xb2))),database_1=__importDefault(require(a56_0x47be18(0xbe)));class UserService{['generateApiKeys'](){const _0x819f3a=a56_0x47be18,_0x295a78=_0x819f3a(0xda)+crypto_1[_0x819f3a(0xaf)]['randomBytes'](0x20)['toString']('hex'),_0x7ee486=_0x819f3a(0xd0)+crypto_1[_0x819f3a(0xaf)][_0x819f3a(0xbf)](0x20)[_0x819f3a(0xad)](_0x819f3a(0xa9));return{'publicKey':_0x295a78,'secretKey':_0x7ee486};}async[a56_0x47be18(0xc9)](_0x224ec6){const _0x303bed=a56_0x47be18,{fullName:_0x5f5672,username:_0x7105bc,password:_0x16c336,telegramId:_0x1afd6e,merchantUrl:_0xc7504f,gateways:_0x3e9e87,gatewaySettings:_0xda759e,wallets:_0x1cd4dc}=_0x224ec6,_0x308419=await database_1['default']['shop'][_0x303bed(0xb7)]({'where':{'username':_0x7105bc}});if(_0x308419)throw new Error(_0x303bed(0xb3));if(_0x1afd6e){const _0x41a13b=await database_1[_0x303bed(0xaf)][_0x303bed(0xac)][_0x303bed(0xb7)]({'where':{'telegram':_0x1afd6e}});if(_0x41a13b)throw new Error('Telegram\x20username\x20already\x20exists');}const _0x37ca79=await bcryptjs_1[_0x303bed(0xaf)][_0x303bed(0xd6)](_0x16c336,0xc),{publicKey:_0x4956b7,secretKey:_0x346c5d}=this[_0x303bed(0xa5)](),_0x29cb6f=await database_1[_0x303bed(0xaf)][_0x303bed(0xac)][_0x303bed(0xa8)]({'data':{'name':_0x5f5672,'username':_0x7105bc,'password':_0x37ca79,'telegram':_0x1afd6e,'shopUrl':_0xc7504f,'paymentGateways':_0x3e9e87?JSON[_0x303bed(0xc0)](_0x3e9e87):null,'gatewaySettings':_0xda759e?JSON[_0x303bed(0xc0)](_0xda759e):null,'usdtPolygonWallet':_0x1cd4dc?.[_0x303bed(0xc5)]||null,'usdtTrcWallet':_0x1cd4dc?.[_0x303bed(0xae)]||null,'usdtErcWallet':_0x1cd4dc?.['usdtErcWallet']||null,'usdcPolygonWallet':_0x1cd4dc?.[_0x303bed(0xcc)]||null,'publicKey':_0x4956b7,'secretKey':_0x346c5d,'status':_0x303bed(0xd9)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x29cb6f['id'],'fullName':_0x29cb6f[_0x303bed(0xa7)],'username':_0x29cb6f[_0x303bed(0xd7)],'telegramId':_0x29cb6f['telegram'],'merchantUrl':_0x29cb6f[_0x303bed(0xcf)],'gateways':_0x29cb6f[_0x303bed(0xbc)]?JSON[_0x303bed(0xb4)](_0x29cb6f['paymentGateways']):null,'gatewaySettings':_0x29cb6f[_0x303bed(0xb8)]?JSON[_0x303bed(0xb4)](_0x29cb6f[_0x303bed(0xb8)]):null,'publicKey':_0x29cb6f[_0x303bed(0xb0)],'wallets':{'usdtPolygonWallet':_0x29cb6f[_0x303bed(0xc5)],'usdtTrcWallet':_0x29cb6f[_0x303bed(0xae)],'usdtErcWallet':_0x29cb6f[_0x303bed(0xa6)],'usdcPolygonWallet':_0x29cb6f[_0x303bed(0xcc)]},'status':_0x29cb6f['status'],'createdAt':_0x29cb6f[_0x303bed(0xb5)]};}async['getAllUsers'](){const _0x53031f=a56_0x47be18,_0x2fb964=await database_1[_0x53031f(0xaf)]['shop'][_0x53031f(0xaa)]({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':_0x53031f(0xc3)}});return _0x2fb964[_0x53031f(0xde)](_0x4ac035=>({'id':_0x4ac035['id'],'fullName':_0x4ac035['name'],'username':_0x4ac035[_0x53031f(0xd7)],'telegramId':_0x4ac035[_0x53031f(0xc8)],'merchantUrl':_0x4ac035[_0x53031f(0xcf)],'gateways':_0x4ac035['paymentGateways']?JSON['parse'](_0x4ac035['paymentGateways']):null,'gatewaySettings':_0x4ac035['gatewaySettings']?JSON[_0x53031f(0xb4)](_0x4ac035[_0x53031f(0xb8)]):null,'publicKey':_0x4ac035['publicKey'],'wallets':{'usdtPolygonWallet':_0x4ac035[_0x53031f(0xc5)],'usdtTrcWallet':_0x4ac035[_0x53031f(0xae)],'usdtErcWallet':_0x4ac035[_0x53031f(0xa6)],'usdcPolygonWallet':_0x4ac035['usdcPolygonWallet']},'status':_0x4ac035[_0x53031f(0xb1)],'createdAt':_0x4ac035[_0x53031f(0xb5)]}));}async[a56_0x47be18(0xcb)](_0x550fc2){const _0x3d346a=a56_0x47be18,_0x677688=await database_1['default'][_0x3d346a(0xac)][_0x3d346a(0xb7)]({'where':{'id':_0x550fc2},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x677688)return null;return{'id':_0x677688['id'],'fullName':_0x677688[_0x3d346a(0xa7)],'username':_0x677688[_0x3d346a(0xd7)],'telegramId':_0x677688[_0x3d346a(0xc8)],'merchantUrl':_0x677688[_0x3d346a(0xcf)],'gateways':_0x677688['paymentGateways']?JSON[_0x3d346a(0xb4)](_0x677688[_0x3d346a(0xbc)]):null,'gatewaySettings':_0x677688['gatewaySettings']?JSON[_0x3d346a(0xb4)](_0x677688[_0x3d346a(0xb8)]):null,'publicKey':_0x677688[_0x3d346a(0xb0)],'wallets':{'usdtPolygonWallet':_0x677688[_0x3d346a(0xc5)],'usdtTrcWallet':_0x677688[_0x3d346a(0xae)],'usdtErcWallet':_0x677688[_0x3d346a(0xa6)],'usdcPolygonWallet':_0x677688['usdcPolygonWallet']},'status':_0x677688[_0x3d346a(0xb1)],'createdAt':_0x677688[_0x3d346a(0xb5)]};}async['updateUser'](_0x8dfcd4,_0x3ee3c5){const _0x56fb2b=a56_0x47be18,_0x4aec06={..._0x3ee3c5};_0x3ee3c5[_0x56fb2b(0xd1)]&&(_0x4aec06[_0x56fb2b(0xd1)]=await bcryptjs_1['default']['hash'](_0x3ee3c5[_0x56fb2b(0xd1)],0xc));_0x3ee3c5[_0x56fb2b(0xba)]&&(_0x4aec06['name']=_0x3ee3c5[_0x56fb2b(0xba)],delete _0x4aec06[_0x56fb2b(0xba)]);_0x3ee3c5[_0x56fb2b(0xce)]&&(_0x4aec06[_0x56fb2b(0xc8)]=_0x3ee3c5['telegramId'],delete _0x4aec06[_0x56fb2b(0xce)]);_0x3ee3c5[_0x56fb2b(0xc1)]&&(_0x4aec06[_0x56fb2b(0xcf)]=_0x3ee3c5[_0x56fb2b(0xc1)],delete _0x4aec06[_0x56fb2b(0xc1)]);_0x3ee3c5[_0x56fb2b(0xc7)]&&(_0x4aec06[_0x56fb2b(0xbc)]=JSON[_0x56fb2b(0xc0)](_0x3ee3c5[_0x56fb2b(0xc7)]),delete _0x4aec06[_0x56fb2b(0xc7)]);_0x3ee3c5[_0x56fb2b(0xb8)]&&(_0x4aec06[_0x56fb2b(0xb8)]=JSON['stringify'](_0x3ee3c5['gatewaySettings']),delete _0x4aec06[_0x56fb2b(0xb8)]);_0x3ee3c5[_0x56fb2b(0xc2)]&&(_0x3ee3c5[_0x56fb2b(0xc2)][_0x56fb2b(0xc5)]!==undefined&&(_0x4aec06['usdtPolygonWallet']=_0x3ee3c5[_0x56fb2b(0xc2)]['usdtPolygonWallet']||null),_0x3ee3c5[_0x56fb2b(0xc2)]['usdtTrcWallet']!==undefined&&(_0x4aec06[_0x56fb2b(0xae)]=_0x3ee3c5['wallets'][_0x56fb2b(0xae)]||null),_0x3ee3c5[_0x56fb2b(0xc2)][_0x56fb2b(0xa6)]!==undefined&&(_0x4aec06[_0x56fb2b(0xa6)]=_0x3ee3c5[_0x56fb2b(0xc2)][_0x56fb2b(0xa6)]||null),_0x3ee3c5[_0x56fb2b(0xc2)]['usdcPolygonWallet']!==undefined&&(_0x4aec06['usdcPolygonWallet']=_0x3ee3c5[_0x56fb2b(0xc2)][_0x56fb2b(0xcc)]||null),delete _0x4aec06[_0x56fb2b(0xc2)]);const _0x1dbad5=await database_1['default'][_0x56fb2b(0xac)][_0x56fb2b(0xd2)]({'where':{'id':_0x8dfcd4},'data':_0x4aec06,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x1dbad5['id'],'fullName':_0x1dbad5['name'],'username':_0x1dbad5[_0x56fb2b(0xd7)],'telegramId':_0x1dbad5[_0x56fb2b(0xc8)],'merchantUrl':_0x1dbad5[_0x56fb2b(0xcf)],'gateways':_0x1dbad5[_0x56fb2b(0xbc)]?JSON[_0x56fb2b(0xb4)](_0x1dbad5[_0x56fb2b(0xbc)]):null,'gatewaySettings':_0x1dbad5[_0x56fb2b(0xb8)]?JSON[_0x56fb2b(0xb4)](_0x1dbad5[_0x56fb2b(0xb8)]):null,'publicKey':_0x1dbad5[_0x56fb2b(0xb0)],'wallets':{'usdtPolygonWallet':_0x1dbad5['usdtPolygonWallet'],'usdtTrcWallet':_0x1dbad5[_0x56fb2b(0xae)],'usdtErcWallet':_0x1dbad5[_0x56fb2b(0xa6)],'usdcPolygonWallet':_0x1dbad5[_0x56fb2b(0xcc)]},'status':_0x1dbad5[_0x56fb2b(0xb1)],'createdAt':_0x1dbad5['createdAt']};}async[a56_0x47be18(0xcd)](_0x25a512){const _0x4b6721=a56_0x47be18;await database_1[_0x4b6721(0xaf)][_0x4b6721(0xac)][_0x4b6721(0xdb)]({'where':{'id':_0x25a512}});}}exports['UserService']=UserService;function a56_0x28b4(){const _0x49fa50=['1071612RufLZW','generateApiKeys','usdtErcWallet','name','create','hex','findMany','bcryptjs','shop','toString','usdtTrcWallet','default','publicKey','status','crypto','Username\x20already\x20exists','parse','createdAt','18KheEje','findUnique','gatewaySettings','1151234PdcQum','fullName','990630eJmjVZ','paymentGateways','33KfECYI','../config/database','randomBytes','stringify','merchantUrl','wallets','desc','19316RcFkNW','usdtPolygonWallet','__importDefault','gateways','telegram','createUser','190aaGYGP','getUserById','usdcPolygonWallet','deleteUser','telegramId','shopUrl','sk_','password','update','73037mbZYGC','__esModule','1827QJWfuH','hash','username','defineProperty','ACTIVE','pk_','delete','459956Nrfahm','15752LIyKZV','map'];a56_0x28b4=function(){return _0x49fa50;};return a56_0x28b4();}