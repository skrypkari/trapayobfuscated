'use strict';const a56_0x1d2d55=a56_0x34e5;(function(_0x47a187,_0x5d30f1){const _0x36bcac=a56_0x34e5,_0x2363fb=_0x47a187();while(!![]){try{const _0x89dfab=-parseInt(_0x36bcac(0x1de))/0x1*(-parseInt(_0x36bcac(0x1cc))/0x2)+-parseInt(_0x36bcac(0x1dd))/0x3+parseInt(_0x36bcac(0x1ce))/0x4*(parseInt(_0x36bcac(0x1bf))/0x5)+parseInt(_0x36bcac(0x1c8))/0x6*(-parseInt(_0x36bcac(0x1b2))/0x7)+parseInt(_0x36bcac(0x1b7))/0x8+-parseInt(_0x36bcac(0x1c9))/0x9*(parseInt(_0x36bcac(0x1c1))/0xa)+-parseInt(_0x36bcac(0x1b1))/0xb*(-parseInt(_0x36bcac(0x1d0))/0xc);if(_0x89dfab===_0x5d30f1)break;else _0x2363fb['push'](_0x2363fb['shift']());}catch(_0x4355e0){_0x2363fb['push'](_0x2363fb['shift']());}}}(a56_0x3291,0x42d41));var __importDefault=this&&this[a56_0x1d2d55(0x1cf)]||function(_0x298c0a){const _0x31dbbf=a56_0x1d2d55;return _0x298c0a&&_0x298c0a[_0x31dbbf(0x1c7)]?_0x298c0a:{'default':_0x298c0a};};Object[a56_0x1d2d55(0x1b5)](exports,a56_0x1d2d55(0x1c7),{'value':!![]}),exports[a56_0x1d2d55(0x1ad)]=void 0x0;function a56_0x34e5(_0x32acab,_0x237ccb){const _0x329120=a56_0x3291();return a56_0x34e5=function(_0x34e5d6,_0x264483){_0x34e5d6=_0x34e5d6-0x1a6;let _0x16e8ab=_0x329120[_0x34e5d6];return _0x16e8ab;},a56_0x34e5(_0x32acab,_0x237ccb);}function a56_0x3291(){const _0x5261fe=['205854BayGuy','19ySEaUz','gatewaySettings','hash','telegramId','create','usdtPolygonWallet','paymentGateways','usdtTrcWallet','wallets','merchantUrl','telegram','UserService','stringify','generateApiKeys','randomBytes','4253579fTKYxq','7NXzOdv','name','createUser','defineProperty','shopUrl','107808smCVHg','username','toString','Telegram\x20username\x20already\x20exists','../config/database','usdcPolygonWallet','status','getUserById','105InmSGZ','sk_','20oFMLbT','bcryptjs','delete','password','gateways','update','__esModule','2696208PKEBhg','1513305AILbgR','getAllUsers','fullName','24212IUEZlM','Username\x20already\x20exists','94824PGbvWb','__importDefault','12mnwzfB','createdAt','default','pk_','shop','usdtErcWallet','crypto','parse','ACTIVE','publicKey','findUnique','deleteUser','hex'];a56_0x3291=function(){return _0x5261fe;};return a56_0x3291();}const bcryptjs_1=__importDefault(require(a56_0x1d2d55(0x1c2))),crypto_1=__importDefault(require(a56_0x1d2d55(0x1d6))),database_1=__importDefault(require(a56_0x1d2d55(0x1bb)));class UserService{['generateApiKeys'](){const _0x56bde0=a56_0x1d2d55,_0x384605=_0x56bde0(0x1d3)+crypto_1['default'][_0x56bde0(0x1b0)](0x20)[_0x56bde0(0x1b9)](_0x56bde0(0x1dc)),_0x12e74a=_0x56bde0(0x1c0)+crypto_1['default'][_0x56bde0(0x1b0)](0x20)[_0x56bde0(0x1b9)](_0x56bde0(0x1dc));return{'publicKey':_0x384605,'secretKey':_0x12e74a};}async[a56_0x1d2d55(0x1b4)](_0x40c062){const _0x1b1d4d=a56_0x1d2d55,{fullName:_0x11dada,username:_0xac5ad,password:_0x25c23c,telegramId:_0x2d6d2a,merchantUrl:_0x67724f,gateways:_0x436758,gatewaySettings:_0x17d8e7,wallets:_0xf9a04a}=_0x40c062,_0x3ff7a1=await database_1['default'][_0x1b1d4d(0x1d4)][_0x1b1d4d(0x1da)]({'where':{'username':_0xac5ad}});if(_0x3ff7a1)throw new Error(_0x1b1d4d(0x1cd));if(_0x2d6d2a){const _0xc33160=await database_1[_0x1b1d4d(0x1d2)][_0x1b1d4d(0x1d4)]['findUnique']({'where':{'telegram':_0x2d6d2a}});if(_0xc33160)throw new Error(_0x1b1d4d(0x1ba));}const _0x48e41b=await bcryptjs_1[_0x1b1d4d(0x1d2)][_0x1b1d4d(0x1e0)](_0x25c23c,0xc),{publicKey:_0x94486c,secretKey:_0x10b615}=this[_0x1b1d4d(0x1af)](),_0x50fbcc=await database_1[_0x1b1d4d(0x1d2)][_0x1b1d4d(0x1d4)][_0x1b1d4d(0x1a6)]({'data':{'name':_0x11dada,'username':_0xac5ad,'password':_0x48e41b,'telegram':_0x2d6d2a,'shopUrl':_0x67724f,'paymentGateways':_0x436758?JSON['stringify'](_0x436758):null,'gatewaySettings':_0x17d8e7?JSON['stringify'](_0x17d8e7):null,'usdtPolygonWallet':_0xf9a04a?.[_0x1b1d4d(0x1a7)]||null,'usdtTrcWallet':_0xf9a04a?.[_0x1b1d4d(0x1a9)]||null,'usdtErcWallet':_0xf9a04a?.[_0x1b1d4d(0x1d5)]||null,'usdcPolygonWallet':_0xf9a04a?.[_0x1b1d4d(0x1bc)]||null,'publicKey':_0x94486c,'secretKey':_0x10b615,'status':_0x1b1d4d(0x1d8)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x50fbcc['id'],'fullName':_0x50fbcc[_0x1b1d4d(0x1b3)],'username':_0x50fbcc['username'],'telegramId':_0x50fbcc['telegram'],'merchantUrl':_0x50fbcc[_0x1b1d4d(0x1b6)],'gateways':_0x50fbcc[_0x1b1d4d(0x1a8)]?JSON[_0x1b1d4d(0x1d7)](_0x50fbcc[_0x1b1d4d(0x1a8)]):null,'gatewaySettings':_0x50fbcc['gatewaySettings']?JSON[_0x1b1d4d(0x1d7)](_0x50fbcc['gatewaySettings']):null,'publicKey':_0x50fbcc['publicKey'],'wallets':{'usdtPolygonWallet':_0x50fbcc[_0x1b1d4d(0x1a7)],'usdtTrcWallet':_0x50fbcc[_0x1b1d4d(0x1a9)],'usdtErcWallet':_0x50fbcc[_0x1b1d4d(0x1d5)],'usdcPolygonWallet':_0x50fbcc[_0x1b1d4d(0x1bc)]},'status':_0x50fbcc[_0x1b1d4d(0x1bd)],'createdAt':_0x50fbcc[_0x1b1d4d(0x1d1)]};}async[a56_0x1d2d55(0x1ca)](){const _0x11c021=a56_0x1d2d55,_0x2b6f6f=await database_1['default'][_0x11c021(0x1d4)]['findMany']({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':'desc'}});return _0x2b6f6f['map'](_0x2d4a98=>({'id':_0x2d4a98['id'],'fullName':_0x2d4a98[_0x11c021(0x1b3)],'username':_0x2d4a98[_0x11c021(0x1b8)],'telegramId':_0x2d4a98['telegram'],'merchantUrl':_0x2d4a98[_0x11c021(0x1b6)],'gateways':_0x2d4a98[_0x11c021(0x1a8)]?JSON[_0x11c021(0x1d7)](_0x2d4a98[_0x11c021(0x1a8)]):null,'gatewaySettings':_0x2d4a98['gatewaySettings']?JSON[_0x11c021(0x1d7)](_0x2d4a98[_0x11c021(0x1df)]):null,'publicKey':_0x2d4a98[_0x11c021(0x1d9)],'wallets':{'usdtPolygonWallet':_0x2d4a98[_0x11c021(0x1a7)],'usdtTrcWallet':_0x2d4a98[_0x11c021(0x1a9)],'usdtErcWallet':_0x2d4a98[_0x11c021(0x1d5)],'usdcPolygonWallet':_0x2d4a98[_0x11c021(0x1bc)]},'status':_0x2d4a98[_0x11c021(0x1bd)],'createdAt':_0x2d4a98[_0x11c021(0x1d1)]}));}async[a56_0x1d2d55(0x1be)](_0x7a23cd){const _0x1fda5f=a56_0x1d2d55,_0x5aab28=await database_1['default'][_0x1fda5f(0x1d4)]['findUnique']({'where':{'id':_0x7a23cd},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x5aab28)return null;return{'id':_0x5aab28['id'],'fullName':_0x5aab28['name'],'username':_0x5aab28[_0x1fda5f(0x1b8)],'telegramId':_0x5aab28[_0x1fda5f(0x1ac)],'merchantUrl':_0x5aab28['shopUrl'],'gateways':_0x5aab28[_0x1fda5f(0x1a8)]?JSON[_0x1fda5f(0x1d7)](_0x5aab28[_0x1fda5f(0x1a8)]):null,'gatewaySettings':_0x5aab28[_0x1fda5f(0x1df)]?JSON[_0x1fda5f(0x1d7)](_0x5aab28['gatewaySettings']):null,'publicKey':_0x5aab28[_0x1fda5f(0x1d9)],'wallets':{'usdtPolygonWallet':_0x5aab28[_0x1fda5f(0x1a7)],'usdtTrcWallet':_0x5aab28[_0x1fda5f(0x1a9)],'usdtErcWallet':_0x5aab28[_0x1fda5f(0x1d5)],'usdcPolygonWallet':_0x5aab28[_0x1fda5f(0x1bc)]},'status':_0x5aab28[_0x1fda5f(0x1bd)],'createdAt':_0x5aab28['createdAt']};}async['updateUser'](_0x334b6c,_0x47da1d){const _0x56f013=a56_0x1d2d55,_0x593cb8={..._0x47da1d};_0x47da1d[_0x56f013(0x1c4)]&&(_0x593cb8[_0x56f013(0x1c4)]=await bcryptjs_1[_0x56f013(0x1d2)][_0x56f013(0x1e0)](_0x47da1d[_0x56f013(0x1c4)],0xc));_0x47da1d[_0x56f013(0x1cb)]&&(_0x593cb8['name']=_0x47da1d[_0x56f013(0x1cb)],delete _0x593cb8[_0x56f013(0x1cb)]);_0x47da1d[_0x56f013(0x1e1)]&&(_0x593cb8['telegram']=_0x47da1d['telegramId'],delete _0x593cb8[_0x56f013(0x1e1)]);_0x47da1d[_0x56f013(0x1ab)]&&(_0x593cb8[_0x56f013(0x1b6)]=_0x47da1d[_0x56f013(0x1ab)],delete _0x593cb8[_0x56f013(0x1ab)]);_0x47da1d[_0x56f013(0x1c5)]&&(_0x593cb8['paymentGateways']=JSON[_0x56f013(0x1ae)](_0x47da1d[_0x56f013(0x1c5)]),delete _0x593cb8[_0x56f013(0x1c5)]);_0x47da1d['gatewaySettings']&&(_0x593cb8[_0x56f013(0x1df)]=JSON[_0x56f013(0x1ae)](_0x47da1d[_0x56f013(0x1df)]),delete _0x593cb8['gatewaySettings']);_0x47da1d['wallets']&&(_0x47da1d['wallets']['usdtPolygonWallet']!==undefined&&(_0x593cb8[_0x56f013(0x1a7)]=_0x47da1d[_0x56f013(0x1aa)]['usdtPolygonWallet']||null),_0x47da1d[_0x56f013(0x1aa)][_0x56f013(0x1a9)]!==undefined&&(_0x593cb8[_0x56f013(0x1a9)]=_0x47da1d['wallets']['usdtTrcWallet']||null),_0x47da1d[_0x56f013(0x1aa)]['usdtErcWallet']!==undefined&&(_0x593cb8[_0x56f013(0x1d5)]=_0x47da1d[_0x56f013(0x1aa)][_0x56f013(0x1d5)]||null),_0x47da1d[_0x56f013(0x1aa)]['usdcPolygonWallet']!==undefined&&(_0x593cb8[_0x56f013(0x1bc)]=_0x47da1d['wallets']['usdcPolygonWallet']||null),delete _0x593cb8[_0x56f013(0x1aa)]);const _0x370fcf=await database_1[_0x56f013(0x1d2)][_0x56f013(0x1d4)][_0x56f013(0x1c6)]({'where':{'id':_0x334b6c},'data':_0x593cb8,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x370fcf['id'],'fullName':_0x370fcf[_0x56f013(0x1b3)],'username':_0x370fcf[_0x56f013(0x1b8)],'telegramId':_0x370fcf['telegram'],'merchantUrl':_0x370fcf[_0x56f013(0x1b6)],'gateways':_0x370fcf[_0x56f013(0x1a8)]?JSON[_0x56f013(0x1d7)](_0x370fcf['paymentGateways']):null,'gatewaySettings':_0x370fcf[_0x56f013(0x1df)]?JSON[_0x56f013(0x1d7)](_0x370fcf[_0x56f013(0x1df)]):null,'publicKey':_0x370fcf[_0x56f013(0x1d9)],'wallets':{'usdtPolygonWallet':_0x370fcf[_0x56f013(0x1a7)],'usdtTrcWallet':_0x370fcf['usdtTrcWallet'],'usdtErcWallet':_0x370fcf[_0x56f013(0x1d5)],'usdcPolygonWallet':_0x370fcf[_0x56f013(0x1bc)]},'status':_0x370fcf[_0x56f013(0x1bd)],'createdAt':_0x370fcf[_0x56f013(0x1d1)]};}async[a56_0x1d2d55(0x1db)](_0x32c7d3){const _0x499b07=a56_0x1d2d55;await database_1[_0x499b07(0x1d2)][_0x499b07(0x1d4)][_0x499b07(0x1c3)]({'where':{'id':_0x32c7d3}});}}exports[a56_0x1d2d55(0x1ad)]=UserService;