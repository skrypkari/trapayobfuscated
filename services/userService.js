'use strict';function a51_0x2464(_0x48c54b,_0x222d99){const _0x18b56d=a51_0x18b5();return a51_0x2464=function(_0x24648a,_0x3a1ba5){_0x24648a=_0x24648a-0x198;let _0x4cee34=_0x18b56d[_0x24648a];return _0x4cee34;},a51_0x2464(_0x48c54b,_0x222d99);}function a51_0x18b5(){const _0x1c82cb=['1871288nltxAW','crypto','shopUrl','18zOEUYP','gatewaySettings','hex','usdcPolygonWallet','__importDefault','9nDyvZw','../config/database','deleteUser','getAllUsers','Telegram\x20username\x20already\x20exists','parse','UserService','55blQyzZ','updateUser','status','createdAt','defineProperty','878535KrIfYF','606840diLcCQ','telegram','gateways','usdtPolygonWallet','hash','usdtErcWallet','stringify','publicKey','findUnique','name','username','1836550Thpswv','9EFNENt','telegramId','delete','password','createUser','paymentGateways','wallets','default','merchantUrl','generateApiKeys','create','__esModule','desc','6506mGDhCI','shop','51SbivZc','toString','1210884mUvZNM','randomBytes','ACTIVE','usdtTrcWallet','bcryptjs','fullName','369964tXzYQE','findMany'];a51_0x18b5=function(){return _0x1c82cb;};return a51_0x18b5();}const a51_0x3ee6bc=a51_0x2464;(function(_0x5c4e8f,_0x1bce35){const _0x8ce0db=a51_0x2464,_0x44c289=_0x5c4e8f();while(!![]){try{const _0x44ecbb=parseInt(_0x8ce0db(0x1c2))/0x1*(-parseInt(_0x8ce0db(0x1c0))/0x2)+-parseInt(_0x8ce0db(0x1b3))/0x3*(-parseInt(_0x8ce0db(0x1ca))/0x4)+parseInt(_0x8ce0db(0x1b2))/0x5+-parseInt(_0x8ce0db(0x1cf))/0x6*(-parseInt(_0x8ce0db(0x1a6))/0x7)+-parseInt(_0x8ce0db(0x1cc))/0x8*(parseInt(_0x8ce0db(0x19a))/0x9)+parseInt(_0x8ce0db(0x1a7))/0xa*(-parseInt(_0x8ce0db(0x1a1))/0xb)+-parseInt(_0x8ce0db(0x1c4))/0xc;if(_0x44ecbb===_0x1bce35)break;else _0x44c289['push'](_0x44c289['shift']());}catch(_0x49d795){_0x44c289['push'](_0x44c289['shift']());}}}(a51_0x18b5,0x35045));var __importDefault=this&&this[a51_0x3ee6bc(0x199)]||function(_0x460439){const _0x4821d2=a51_0x3ee6bc;return _0x460439&&_0x460439[_0x4821d2(0x1be)]?_0x460439:{'default':_0x460439};};Object[a51_0x3ee6bc(0x1a5)](exports,a51_0x3ee6bc(0x1be),{'value':!![]}),exports['UserService']=void 0x0;const bcryptjs_1=__importDefault(require(a51_0x3ee6bc(0x1c8))),crypto_1=__importDefault(require(a51_0x3ee6bc(0x1cd))),database_1=__importDefault(require(a51_0x3ee6bc(0x19b)));class UserService{['generateApiKeys'](){const _0x1d04a2=a51_0x3ee6bc,_0x4088e0='pk_'+crypto_1[_0x1d04a2(0x1ba)][_0x1d04a2(0x1c5)](0x20)[_0x1d04a2(0x1c3)](_0x1d04a2(0x1d1)),_0x220330='sk_'+crypto_1[_0x1d04a2(0x1ba)][_0x1d04a2(0x1c5)](0x20)[_0x1d04a2(0x1c3)](_0x1d04a2(0x1d1));return{'publicKey':_0x4088e0,'secretKey':_0x220330};}async[a51_0x3ee6bc(0x1b7)](_0x4237c9){const _0x27fe67=a51_0x3ee6bc,{fullName:_0x395db4,username:_0x537997,password:_0x76dc7f,telegramId:_0x576ce1,merchantUrl:_0x52bb0d,gateways:_0x2223aa,gatewaySettings:_0x428ff9,wallets:_0x35db05}=_0x4237c9,_0x30c219=await database_1[_0x27fe67(0x1ba)]['shop'][_0x27fe67(0x1af)]({'where':{'username':_0x537997}});if(_0x30c219)throw new Error('Username\x20already\x20exists');if(_0x576ce1){const _0x43cbf6=await database_1['default'][_0x27fe67(0x1c1)][_0x27fe67(0x1af)]({'where':{'telegram':_0x576ce1}});if(_0x43cbf6)throw new Error(_0x27fe67(0x19e));}const _0x4036d7=await bcryptjs_1[_0x27fe67(0x1ba)][_0x27fe67(0x1ab)](_0x76dc7f,0xc),{publicKey:_0x2b1dec,secretKey:_0x50d3bc}=this[_0x27fe67(0x1bc)](),_0x2eba60=await database_1[_0x27fe67(0x1ba)][_0x27fe67(0x1c1)][_0x27fe67(0x1bd)]({'data':{'name':_0x395db4,'username':_0x537997,'password':_0x4036d7,'telegram':_0x576ce1,'shopUrl':_0x52bb0d,'paymentGateways':_0x2223aa?JSON[_0x27fe67(0x1ad)](_0x2223aa):null,'gatewaySettings':_0x428ff9?JSON[_0x27fe67(0x1ad)](_0x428ff9):null,'usdtPolygonWallet':_0x35db05?.[_0x27fe67(0x1aa)]||null,'usdtTrcWallet':_0x35db05?.[_0x27fe67(0x1c7)]||null,'usdtErcWallet':_0x35db05?.[_0x27fe67(0x1ac)]||null,'usdcPolygonWallet':_0x35db05?.[_0x27fe67(0x198)]||null,'publicKey':_0x2b1dec,'secretKey':_0x50d3bc,'status':_0x27fe67(0x1c6)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x2eba60['id'],'fullName':_0x2eba60[_0x27fe67(0x1b0)],'username':_0x2eba60[_0x27fe67(0x1b1)],'telegramId':_0x2eba60[_0x27fe67(0x1a8)],'merchantUrl':_0x2eba60['shopUrl'],'gateways':_0x2eba60[_0x27fe67(0x1b8)]?JSON[_0x27fe67(0x19f)](_0x2eba60[_0x27fe67(0x1b8)]):null,'gatewaySettings':_0x2eba60[_0x27fe67(0x1d0)]?JSON[_0x27fe67(0x19f)](_0x2eba60[_0x27fe67(0x1d0)]):null,'publicKey':_0x2eba60[_0x27fe67(0x1ae)],'wallets':{'usdtPolygonWallet':_0x2eba60[_0x27fe67(0x1aa)],'usdtTrcWallet':_0x2eba60[_0x27fe67(0x1c7)],'usdtErcWallet':_0x2eba60[_0x27fe67(0x1ac)],'usdcPolygonWallet':_0x2eba60['usdcPolygonWallet']},'status':_0x2eba60['status'],'createdAt':_0x2eba60['createdAt']};}async[a51_0x3ee6bc(0x19d)](){const _0x366ea4=a51_0x3ee6bc,_0x172ec5=await database_1['default']['shop'][_0x366ea4(0x1cb)]({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':_0x366ea4(0x1bf)}});return _0x172ec5['map'](_0x2bcb41=>({'id':_0x2bcb41['id'],'fullName':_0x2bcb41['name'],'username':_0x2bcb41[_0x366ea4(0x1b1)],'telegramId':_0x2bcb41['telegram'],'merchantUrl':_0x2bcb41[_0x366ea4(0x1ce)],'gateways':_0x2bcb41[_0x366ea4(0x1b8)]?JSON['parse'](_0x2bcb41[_0x366ea4(0x1b8)]):null,'gatewaySettings':_0x2bcb41[_0x366ea4(0x1d0)]?JSON[_0x366ea4(0x19f)](_0x2bcb41['gatewaySettings']):null,'publicKey':_0x2bcb41[_0x366ea4(0x1ae)],'wallets':{'usdtPolygonWallet':_0x2bcb41['usdtPolygonWallet'],'usdtTrcWallet':_0x2bcb41[_0x366ea4(0x1c7)],'usdtErcWallet':_0x2bcb41[_0x366ea4(0x1ac)],'usdcPolygonWallet':_0x2bcb41[_0x366ea4(0x198)]},'status':_0x2bcb41[_0x366ea4(0x1a3)],'createdAt':_0x2bcb41['createdAt']}));}async['getUserById'](_0x1c0333){const _0x224327=a51_0x3ee6bc,_0x2332c1=await database_1['default'][_0x224327(0x1c1)]['findUnique']({'where':{'id':_0x1c0333},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x2332c1)return null;return{'id':_0x2332c1['id'],'fullName':_0x2332c1[_0x224327(0x1b0)],'username':_0x2332c1['username'],'telegramId':_0x2332c1['telegram'],'merchantUrl':_0x2332c1['shopUrl'],'gateways':_0x2332c1[_0x224327(0x1b8)]?JSON[_0x224327(0x19f)](_0x2332c1[_0x224327(0x1b8)]):null,'gatewaySettings':_0x2332c1[_0x224327(0x1d0)]?JSON[_0x224327(0x19f)](_0x2332c1[_0x224327(0x1d0)]):null,'publicKey':_0x2332c1[_0x224327(0x1ae)],'wallets':{'usdtPolygonWallet':_0x2332c1['usdtPolygonWallet'],'usdtTrcWallet':_0x2332c1['usdtTrcWallet'],'usdtErcWallet':_0x2332c1['usdtErcWallet'],'usdcPolygonWallet':_0x2332c1[_0x224327(0x198)]},'status':_0x2332c1[_0x224327(0x1a3)],'createdAt':_0x2332c1[_0x224327(0x1a4)]};}async[a51_0x3ee6bc(0x1a2)](_0x5eac2d,_0x1d1742){const _0x1de72a=a51_0x3ee6bc,_0x5e5d17={..._0x1d1742};_0x1d1742[_0x1de72a(0x1b6)]&&(_0x5e5d17[_0x1de72a(0x1b6)]=await bcryptjs_1['default'][_0x1de72a(0x1ab)](_0x1d1742[_0x1de72a(0x1b6)],0xc));_0x1d1742[_0x1de72a(0x1c9)]&&(_0x5e5d17['name']=_0x1d1742[_0x1de72a(0x1c9)],delete _0x5e5d17[_0x1de72a(0x1c9)]);_0x1d1742[_0x1de72a(0x1b4)]&&(_0x5e5d17[_0x1de72a(0x1a8)]=_0x1d1742['telegramId'],delete _0x5e5d17[_0x1de72a(0x1b4)]);_0x1d1742[_0x1de72a(0x1bb)]&&(_0x5e5d17[_0x1de72a(0x1ce)]=_0x1d1742[_0x1de72a(0x1bb)],delete _0x5e5d17['merchantUrl']);_0x1d1742['gateways']&&(_0x5e5d17[_0x1de72a(0x1b8)]=JSON['stringify'](_0x1d1742[_0x1de72a(0x1a9)]),delete _0x5e5d17[_0x1de72a(0x1a9)]);_0x1d1742[_0x1de72a(0x1d0)]&&(_0x5e5d17['gatewaySettings']=JSON[_0x1de72a(0x1ad)](_0x1d1742[_0x1de72a(0x1d0)]),delete _0x5e5d17[_0x1de72a(0x1d0)]);_0x1d1742[_0x1de72a(0x1b9)]&&(_0x1d1742[_0x1de72a(0x1b9)][_0x1de72a(0x1aa)]!==undefined&&(_0x5e5d17[_0x1de72a(0x1aa)]=_0x1d1742[_0x1de72a(0x1b9)][_0x1de72a(0x1aa)]||null),_0x1d1742[_0x1de72a(0x1b9)][_0x1de72a(0x1c7)]!==undefined&&(_0x5e5d17[_0x1de72a(0x1c7)]=_0x1d1742[_0x1de72a(0x1b9)]['usdtTrcWallet']||null),_0x1d1742[_0x1de72a(0x1b9)][_0x1de72a(0x1ac)]!==undefined&&(_0x5e5d17[_0x1de72a(0x1ac)]=_0x1d1742[_0x1de72a(0x1b9)]['usdtErcWallet']||null),_0x1d1742[_0x1de72a(0x1b9)][_0x1de72a(0x198)]!==undefined&&(_0x5e5d17[_0x1de72a(0x198)]=_0x1d1742[_0x1de72a(0x1b9)][_0x1de72a(0x198)]||null),delete _0x5e5d17[_0x1de72a(0x1b9)]);const _0x3836e9=await database_1[_0x1de72a(0x1ba)][_0x1de72a(0x1c1)]['update']({'where':{'id':_0x5eac2d},'data':_0x5e5d17,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x3836e9['id'],'fullName':_0x3836e9[_0x1de72a(0x1b0)],'username':_0x3836e9[_0x1de72a(0x1b1)],'telegramId':_0x3836e9[_0x1de72a(0x1a8)],'merchantUrl':_0x3836e9[_0x1de72a(0x1ce)],'gateways':_0x3836e9[_0x1de72a(0x1b8)]?JSON[_0x1de72a(0x19f)](_0x3836e9[_0x1de72a(0x1b8)]):null,'gatewaySettings':_0x3836e9[_0x1de72a(0x1d0)]?JSON[_0x1de72a(0x19f)](_0x3836e9['gatewaySettings']):null,'publicKey':_0x3836e9[_0x1de72a(0x1ae)],'wallets':{'usdtPolygonWallet':_0x3836e9[_0x1de72a(0x1aa)],'usdtTrcWallet':_0x3836e9[_0x1de72a(0x1c7)],'usdtErcWallet':_0x3836e9[_0x1de72a(0x1ac)],'usdcPolygonWallet':_0x3836e9[_0x1de72a(0x198)]},'status':_0x3836e9[_0x1de72a(0x1a3)],'createdAt':_0x3836e9['createdAt']};}async[a51_0x3ee6bc(0x19c)](_0x47cdfe){const _0x294fe9=a51_0x3ee6bc;await database_1[_0x294fe9(0x1ba)]['shop'][_0x294fe9(0x1b5)]({'where':{'id':_0x47cdfe}});}}exports[a51_0x3ee6bc(0x1a0)]=UserService;