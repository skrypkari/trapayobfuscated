'use strict';const a59_0x3fd066=a59_0x8179;(function(_0x66e126,_0x140e21){const _0x5cceb7=a59_0x8179,_0x1f6d4d=_0x66e126();while(!![]){try{const _0x1af799=-parseInt(_0x5cceb7(0x1f5))/0x1*(parseInt(_0x5cceb7(0x1f1))/0x2)+-parseInt(_0x5cceb7(0x202))/0x3+-parseInt(_0x5cceb7(0x1fb))/0x4+parseInt(_0x5cceb7(0x204))/0x5*(-parseInt(_0x5cceb7(0x1dc))/0x6)+parseInt(_0x5cceb7(0x1cc))/0x7*(parseInt(_0x5cceb7(0x1eb))/0x8)+-parseInt(_0x5cceb7(0x1ec))/0x9*(-parseInt(_0x5cceb7(0x1f6))/0xa)+-parseInt(_0x5cceb7(0x1de))/0xb*(-parseInt(_0x5cceb7(0x1ff))/0xc);if(_0x1af799===_0x140e21)break;else _0x1f6d4d['push'](_0x1f6d4d['shift']());}catch(_0x259319){_0x1f6d4d['push'](_0x1f6d4d['shift']());}}}(a59_0x44b7,0x42031));function a59_0x44b7(){const _0x26789b=['gatewaySettings','getUserById','usdtPolygonWallet','1033746DIUJmR','telegramId','password','parse','1rpuuLv','10yRcSlV','__importDefault','shopUrl','wallets','usdcPolygonWallet','571176gYYgat','shop','createdAt','deleteUser','61152qwobuc','default','usdtErcWallet','1371915ZxlnZT','crypto','5pryHiq','telegram','create','34027AkRjtc','hash','findMany','pk_','randomBytes','stringify','publicKey','toString','name','fullName','defineProperty','delete','status','UserService','paymentGateways','gateways','2095614UozDpZ','getAllUsers','2409UnMkiC','Telegram\x20username\x20already\x20exists','findUnique','username','sk_','merchantUrl','createUser','generateApiKeys','usdtTrcWallet','__esModule','updateUser','hex','Username\x20already\x20exists','168iFmLts','4666689vdkPyC','map'];a59_0x44b7=function(){return _0x26789b;};return a59_0x44b7();}function a59_0x8179(_0x249d89,_0x176e8e){const _0x44b741=a59_0x44b7();return a59_0x8179=function(_0x817953,_0x118481){_0x817953=_0x817953-0x1cb;let _0x2edf54=_0x44b741[_0x817953];return _0x2edf54;},a59_0x8179(_0x249d89,_0x176e8e);}var __importDefault=this&&this[a59_0x3fd066(0x1f7)]||function(_0x1ae3bd){const _0x1ea242=a59_0x3fd066;return _0x1ae3bd&&_0x1ae3bd[_0x1ea242(0x1e7)]?_0x1ae3bd:{'default':_0x1ae3bd};};Object[a59_0x3fd066(0x1d6)](exports,a59_0x3fd066(0x1e7),{'value':!![]}),exports[a59_0x3fd066(0x1d9)]=void 0x0;const bcryptjs_1=__importDefault(require('bcryptjs')),crypto_1=__importDefault(require(a59_0x3fd066(0x203))),database_1=__importDefault(require('../config/database'));class UserService{[a59_0x3fd066(0x1e5)](){const _0x3584df=a59_0x3fd066,_0x67cbd5=_0x3584df(0x1cf)+crypto_1['default'][_0x3584df(0x1d0)](0x20)['toString'](_0x3584df(0x1e9)),_0x3ca112=_0x3584df(0x1e2)+crypto_1[_0x3584df(0x200)][_0x3584df(0x1d0)](0x20)[_0x3584df(0x1d3)](_0x3584df(0x1e9));return{'publicKey':_0x67cbd5,'secretKey':_0x3ca112};}async[a59_0x3fd066(0x1e4)](_0x39b608){const _0x4fa190=a59_0x3fd066,{fullName:_0x2a0384,username:_0x5b1c05,password:_0x51d33c,telegramId:_0x27a79d,merchantUrl:_0xdf9b95,gateways:_0x1ec80b,gatewaySettings:_0xffa44,wallets:_0x602e74}=_0x39b608,_0x9b2dad=await database_1[_0x4fa190(0x200)][_0x4fa190(0x1fc)][_0x4fa190(0x1e0)]({'where':{'username':_0x5b1c05}});if(_0x9b2dad)throw new Error(_0x4fa190(0x1ea));if(_0x27a79d){const _0x2c7e05=await database_1['default'][_0x4fa190(0x1fc)][_0x4fa190(0x1e0)]({'where':{'telegram':_0x27a79d}});if(_0x2c7e05)throw new Error(_0x4fa190(0x1df));}const _0x1f4761=await bcryptjs_1[_0x4fa190(0x200)][_0x4fa190(0x1cd)](_0x51d33c,0xc),{publicKey:_0xf9c6c6,secretKey:_0xfe4ae6}=this[_0x4fa190(0x1e5)](),_0x37905a=await database_1[_0x4fa190(0x200)][_0x4fa190(0x1fc)][_0x4fa190(0x1cb)]({'data':{'name':_0x2a0384,'username':_0x5b1c05,'password':_0x1f4761,'telegram':_0x27a79d,'shopUrl':_0xdf9b95,'paymentGateways':_0x1ec80b?JSON[_0x4fa190(0x1d1)](_0x1ec80b):null,'gatewaySettings':_0xffa44?JSON[_0x4fa190(0x1d1)](_0xffa44):null,'usdtPolygonWallet':_0x602e74?.[_0x4fa190(0x1f0)]||null,'usdtTrcWallet':_0x602e74?.[_0x4fa190(0x1e6)]||null,'usdtErcWallet':_0x602e74?.[_0x4fa190(0x201)]||null,'usdcPolygonWallet':_0x602e74?.['usdcPolygonWallet']||null,'publicKey':_0xf9c6c6,'secretKey':_0xfe4ae6,'status':'ACTIVE'},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x37905a['id'],'fullName':_0x37905a[_0x4fa190(0x1d4)],'username':_0x37905a[_0x4fa190(0x1e1)],'telegramId':_0x37905a['telegram'],'merchantUrl':_0x37905a[_0x4fa190(0x1f8)],'gateways':_0x37905a[_0x4fa190(0x1da)]?JSON['parse'](_0x37905a[_0x4fa190(0x1da)]):null,'gatewaySettings':_0x37905a['gatewaySettings']?JSON[_0x4fa190(0x1f4)](_0x37905a[_0x4fa190(0x1ee)]):null,'publicKey':_0x37905a['publicKey'],'wallets':{'usdtPolygonWallet':_0x37905a['usdtPolygonWallet'],'usdtTrcWallet':_0x37905a['usdtTrcWallet'],'usdtErcWallet':_0x37905a[_0x4fa190(0x201)],'usdcPolygonWallet':_0x37905a[_0x4fa190(0x1fa)]},'status':_0x37905a[_0x4fa190(0x1d8)],'createdAt':_0x37905a[_0x4fa190(0x1fd)]};}async[a59_0x3fd066(0x1dd)](){const _0x1aaa58=a59_0x3fd066,_0x5e2432=await database_1[_0x1aaa58(0x200)][_0x1aaa58(0x1fc)][_0x1aaa58(0x1ce)]({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':'desc'}});return _0x5e2432[_0x1aaa58(0x1ed)](_0x584577=>({'id':_0x584577['id'],'fullName':_0x584577[_0x1aaa58(0x1d4)],'username':_0x584577['username'],'telegramId':_0x584577['telegram'],'merchantUrl':_0x584577['shopUrl'],'gateways':_0x584577[_0x1aaa58(0x1da)]?JSON[_0x1aaa58(0x1f4)](_0x584577[_0x1aaa58(0x1da)]):null,'gatewaySettings':_0x584577[_0x1aaa58(0x1ee)]?JSON[_0x1aaa58(0x1f4)](_0x584577[_0x1aaa58(0x1ee)]):null,'publicKey':_0x584577[_0x1aaa58(0x1d2)],'wallets':{'usdtPolygonWallet':_0x584577[_0x1aaa58(0x1f0)],'usdtTrcWallet':_0x584577[_0x1aaa58(0x1e6)],'usdtErcWallet':_0x584577[_0x1aaa58(0x201)],'usdcPolygonWallet':_0x584577[_0x1aaa58(0x1fa)]},'status':_0x584577[_0x1aaa58(0x1d8)],'createdAt':_0x584577[_0x1aaa58(0x1fd)]}));}async[a59_0x3fd066(0x1ef)](_0x1c8c8d){const _0x14387e=a59_0x3fd066,_0x3183ad=await database_1[_0x14387e(0x200)][_0x14387e(0x1fc)]['findUnique']({'where':{'id':_0x1c8c8d},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x3183ad)return null;return{'id':_0x3183ad['id'],'fullName':_0x3183ad[_0x14387e(0x1d4)],'username':_0x3183ad['username'],'telegramId':_0x3183ad[_0x14387e(0x205)],'merchantUrl':_0x3183ad[_0x14387e(0x1f8)],'gateways':_0x3183ad[_0x14387e(0x1da)]?JSON[_0x14387e(0x1f4)](_0x3183ad[_0x14387e(0x1da)]):null,'gatewaySettings':_0x3183ad[_0x14387e(0x1ee)]?JSON['parse'](_0x3183ad['gatewaySettings']):null,'publicKey':_0x3183ad['publicKey'],'wallets':{'usdtPolygonWallet':_0x3183ad[_0x14387e(0x1f0)],'usdtTrcWallet':_0x3183ad[_0x14387e(0x1e6)],'usdtErcWallet':_0x3183ad['usdtErcWallet'],'usdcPolygonWallet':_0x3183ad['usdcPolygonWallet']},'status':_0x3183ad[_0x14387e(0x1d8)],'createdAt':_0x3183ad[_0x14387e(0x1fd)]};}async[a59_0x3fd066(0x1e8)](_0x50902d,_0x20e481){const _0x24e5e6=a59_0x3fd066,_0x1a73cc={..._0x20e481};_0x20e481[_0x24e5e6(0x1f3)]&&(_0x1a73cc[_0x24e5e6(0x1f3)]=await bcryptjs_1['default'][_0x24e5e6(0x1cd)](_0x20e481[_0x24e5e6(0x1f3)],0xc));_0x20e481[_0x24e5e6(0x1d5)]&&(_0x1a73cc['name']=_0x20e481[_0x24e5e6(0x1d5)],delete _0x1a73cc[_0x24e5e6(0x1d5)]);_0x20e481[_0x24e5e6(0x1f2)]&&(_0x1a73cc[_0x24e5e6(0x205)]=_0x20e481[_0x24e5e6(0x1f2)],delete _0x1a73cc[_0x24e5e6(0x1f2)]);_0x20e481[_0x24e5e6(0x1e3)]&&(_0x1a73cc[_0x24e5e6(0x1f8)]=_0x20e481[_0x24e5e6(0x1e3)],delete _0x1a73cc[_0x24e5e6(0x1e3)]);_0x20e481[_0x24e5e6(0x1db)]&&(_0x1a73cc[_0x24e5e6(0x1da)]=JSON[_0x24e5e6(0x1d1)](_0x20e481['gateways']),delete _0x1a73cc[_0x24e5e6(0x1db)]);_0x20e481['gatewaySettings']&&(_0x1a73cc[_0x24e5e6(0x1ee)]=JSON[_0x24e5e6(0x1d1)](_0x20e481['gatewaySettings']),delete _0x1a73cc[_0x24e5e6(0x1ee)]);_0x20e481[_0x24e5e6(0x1f9)]&&(_0x20e481['wallets']['usdtPolygonWallet']!==undefined&&(_0x1a73cc[_0x24e5e6(0x1f0)]=_0x20e481[_0x24e5e6(0x1f9)]['usdtPolygonWallet']||null),_0x20e481['wallets'][_0x24e5e6(0x1e6)]!==undefined&&(_0x1a73cc[_0x24e5e6(0x1e6)]=_0x20e481[_0x24e5e6(0x1f9)]['usdtTrcWallet']||null),_0x20e481[_0x24e5e6(0x1f9)][_0x24e5e6(0x201)]!==undefined&&(_0x1a73cc['usdtErcWallet']=_0x20e481[_0x24e5e6(0x1f9)][_0x24e5e6(0x201)]||null),_0x20e481[_0x24e5e6(0x1f9)]['usdcPolygonWallet']!==undefined&&(_0x1a73cc[_0x24e5e6(0x1fa)]=_0x20e481[_0x24e5e6(0x1f9)][_0x24e5e6(0x1fa)]||null),delete _0x1a73cc[_0x24e5e6(0x1f9)]);const _0x156e2b=await database_1['default'][_0x24e5e6(0x1fc)]['update']({'where':{'id':_0x50902d},'data':_0x1a73cc,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x156e2b['id'],'fullName':_0x156e2b[_0x24e5e6(0x1d4)],'username':_0x156e2b[_0x24e5e6(0x1e1)],'telegramId':_0x156e2b['telegram'],'merchantUrl':_0x156e2b[_0x24e5e6(0x1f8)],'gateways':_0x156e2b[_0x24e5e6(0x1da)]?JSON[_0x24e5e6(0x1f4)](_0x156e2b['paymentGateways']):null,'gatewaySettings':_0x156e2b['gatewaySettings']?JSON[_0x24e5e6(0x1f4)](_0x156e2b[_0x24e5e6(0x1ee)]):null,'publicKey':_0x156e2b[_0x24e5e6(0x1d2)],'wallets':{'usdtPolygonWallet':_0x156e2b[_0x24e5e6(0x1f0)],'usdtTrcWallet':_0x156e2b[_0x24e5e6(0x1e6)],'usdtErcWallet':_0x156e2b[_0x24e5e6(0x201)],'usdcPolygonWallet':_0x156e2b[_0x24e5e6(0x1fa)]},'status':_0x156e2b[_0x24e5e6(0x1d8)],'createdAt':_0x156e2b['createdAt']};}async[a59_0x3fd066(0x1fe)](_0x4ef60a){const _0x2e0a8a=a59_0x3fd066;await database_1[_0x2e0a8a(0x200)][_0x2e0a8a(0x1fc)][_0x2e0a8a(0x1d7)]({'where':{'id':_0x4ef60a}});}}exports[a59_0x3fd066(0x1d9)]=UserService;