'use strict';function a56_0x3307(_0x2d1fdc,_0x5ecff0){const _0x2d30e1=a56_0x2d30();return a56_0x3307=function(_0x33072b,_0x302a89){_0x33072b=_0x33072b-0x1ac;let _0x2409ee=_0x2d30e1[_0x33072b];return _0x2409ee;},a56_0x3307(_0x2d1fdc,_0x5ecff0);}const a56_0x5abcfd=a56_0x3307;(function(_0x54982f,_0x1b2d1e){const _0x5e09f2=a56_0x3307,_0xb21a69=_0x54982f();while(!![]){try{const _0xece5cb=parseInt(_0x5e09f2(0x1c6))/0x1*(parseInt(_0x5e09f2(0x1c7))/0x2)+-parseInt(_0x5e09f2(0x1db))/0x3+-parseInt(_0x5e09f2(0x1b0))/0x4+-parseInt(_0x5e09f2(0x1e4))/0x5*(parseInt(_0x5e09f2(0x1c1))/0x6)+parseInt(_0x5e09f2(0x1e0))/0x7+parseInt(_0x5e09f2(0x1cb))/0x8+-parseInt(_0x5e09f2(0x1c9))/0x9*(-parseInt(_0x5e09f2(0x1d3))/0xa);if(_0xece5cb===_0x1b2d1e)break;else _0xb21a69['push'](_0xb21a69['shift']());}catch(_0x572f83){_0xb21a69['push'](_0xb21a69['shift']());}}}(a56_0x2d30,0xc1a3e));function a56_0x2d30(){const _0xdd198b=['username','3967700rXfNXS','stringify','__esModule','name','randomBytes','merchantUrl','__importDefault','publicKey','create','wallets','ACTIVE','gateways','generateApiKeys','Telegram\x20username\x20already\x20exists','fullName','telegram','gatewaySettings','161724YgUWpT','../config/database','UserService','toString','parse','422nExmzS','5712hTTcAA','sk_','793341nWWpaY','password','10681408sPBhBc','findUnique','createUser','default','usdtTrcWallet','pk_','usdtErcWallet','telegramId','10WgkdOz','shopUrl','deleteUser','hash','findMany','defineProperty','hex','getUserById','3160749dRBAeK','update','paymentGateways','status','usdcPolygonWallet','1848063xMnVTh','usdtPolygonWallet','desc','Username\x20already\x20exists','10cCfcDs','shop','createdAt','bcryptjs'];a56_0x2d30=function(){return _0xdd198b;};return a56_0x2d30();}var __importDefault=this&&this[a56_0x5abcfd(0x1b6)]||function(_0x41c593){return _0x41c593&&_0x41c593['__esModule']?_0x41c593:{'default':_0x41c593};};Object[a56_0x5abcfd(0x1d8)](exports,a56_0x5abcfd(0x1b2),{'value':!![]}),exports[a56_0x5abcfd(0x1c3)]=void 0x0;const bcryptjs_1=__importDefault(require(a56_0x5abcfd(0x1ae))),crypto_1=__importDefault(require('crypto')),database_1=__importDefault(require(a56_0x5abcfd(0x1c2)));class UserService{[a56_0x5abcfd(0x1bc)](){const _0x5c9912=a56_0x5abcfd,_0x5b9698=_0x5c9912(0x1d0)+crypto_1[_0x5c9912(0x1ce)][_0x5c9912(0x1b4)](0x20)['toString'](_0x5c9912(0x1d9)),_0x4cc0d3=_0x5c9912(0x1c8)+crypto_1[_0x5c9912(0x1ce)][_0x5c9912(0x1b4)](0x20)[_0x5c9912(0x1c4)](_0x5c9912(0x1d9));return{'publicKey':_0x5b9698,'secretKey':_0x4cc0d3};}async[a56_0x5abcfd(0x1cd)](_0x496f01){const _0x3f6f10=a56_0x5abcfd,{fullName:_0x299171,username:_0x5210eb,password:_0x27e455,telegramId:_0x4c0fac,merchantUrl:_0x17b56a,gateways:_0x48bf42,gatewaySettings:_0x5c8779,wallets:_0x478ebb}=_0x496f01,_0x879b31=await database_1[_0x3f6f10(0x1ce)][_0x3f6f10(0x1ac)][_0x3f6f10(0x1cc)]({'where':{'username':_0x5210eb}});if(_0x879b31)throw new Error(_0x3f6f10(0x1e3));if(_0x4c0fac){const _0xae2869=await database_1[_0x3f6f10(0x1ce)]['shop'][_0x3f6f10(0x1cc)]({'where':{'telegram':_0x4c0fac}});if(_0xae2869)throw new Error(_0x3f6f10(0x1bd));}const _0x5d06b6=await bcryptjs_1['default'][_0x3f6f10(0x1d6)](_0x27e455,0xc),{publicKey:_0x28ffbf,secretKey:_0x3f91f0}=this[_0x3f6f10(0x1bc)](),_0xf2d6ae=await database_1[_0x3f6f10(0x1ce)]['shop'][_0x3f6f10(0x1b8)]({'data':{'name':_0x299171,'username':_0x5210eb,'password':_0x5d06b6,'telegram':_0x4c0fac,'shopUrl':_0x17b56a,'paymentGateways':_0x48bf42?JSON['stringify'](_0x48bf42):null,'gatewaySettings':_0x5c8779?JSON[_0x3f6f10(0x1b1)](_0x5c8779):null,'usdtPolygonWallet':_0x478ebb?.[_0x3f6f10(0x1e1)]||null,'usdtTrcWallet':_0x478ebb?.[_0x3f6f10(0x1cf)]||null,'usdtErcWallet':_0x478ebb?.[_0x3f6f10(0x1d1)]||null,'usdcPolygonWallet':_0x478ebb?.[_0x3f6f10(0x1df)]||null,'publicKey':_0x28ffbf,'secretKey':_0x3f91f0,'status':_0x3f6f10(0x1ba)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0xf2d6ae['id'],'fullName':_0xf2d6ae[_0x3f6f10(0x1b3)],'username':_0xf2d6ae[_0x3f6f10(0x1af)],'telegramId':_0xf2d6ae[_0x3f6f10(0x1bf)],'merchantUrl':_0xf2d6ae['shopUrl'],'gateways':_0xf2d6ae['paymentGateways']?JSON['parse'](_0xf2d6ae[_0x3f6f10(0x1dd)]):null,'gatewaySettings':_0xf2d6ae[_0x3f6f10(0x1c0)]?JSON['parse'](_0xf2d6ae['gatewaySettings']):null,'publicKey':_0xf2d6ae[_0x3f6f10(0x1b7)],'wallets':{'usdtPolygonWallet':_0xf2d6ae['usdtPolygonWallet'],'usdtTrcWallet':_0xf2d6ae['usdtTrcWallet'],'usdtErcWallet':_0xf2d6ae['usdtErcWallet'],'usdcPolygonWallet':_0xf2d6ae[_0x3f6f10(0x1df)]},'status':_0xf2d6ae[_0x3f6f10(0x1de)],'createdAt':_0xf2d6ae[_0x3f6f10(0x1ad)]};}async['getAllUsers'](){const _0x4751a6=a56_0x5abcfd,_0x165580=await database_1[_0x4751a6(0x1ce)][_0x4751a6(0x1ac)][_0x4751a6(0x1d7)]({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':_0x4751a6(0x1e2)}});return _0x165580['map'](_0x209d08=>({'id':_0x209d08['id'],'fullName':_0x209d08[_0x4751a6(0x1b3)],'username':_0x209d08[_0x4751a6(0x1af)],'telegramId':_0x209d08[_0x4751a6(0x1bf)],'merchantUrl':_0x209d08[_0x4751a6(0x1d4)],'gateways':_0x209d08[_0x4751a6(0x1dd)]?JSON[_0x4751a6(0x1c5)](_0x209d08[_0x4751a6(0x1dd)]):null,'gatewaySettings':_0x209d08['gatewaySettings']?JSON[_0x4751a6(0x1c5)](_0x209d08['gatewaySettings']):null,'publicKey':_0x209d08[_0x4751a6(0x1b7)],'wallets':{'usdtPolygonWallet':_0x209d08['usdtPolygonWallet'],'usdtTrcWallet':_0x209d08[_0x4751a6(0x1cf)],'usdtErcWallet':_0x209d08[_0x4751a6(0x1d1)],'usdcPolygonWallet':_0x209d08[_0x4751a6(0x1df)]},'status':_0x209d08[_0x4751a6(0x1de)],'createdAt':_0x209d08['createdAt']}));}async[a56_0x5abcfd(0x1da)](_0x141a7b){const _0x705ec1=a56_0x5abcfd,_0x3ba0b4=await database_1[_0x705ec1(0x1ce)][_0x705ec1(0x1ac)][_0x705ec1(0x1cc)]({'where':{'id':_0x141a7b},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x3ba0b4)return null;return{'id':_0x3ba0b4['id'],'fullName':_0x3ba0b4[_0x705ec1(0x1b3)],'username':_0x3ba0b4['username'],'telegramId':_0x3ba0b4[_0x705ec1(0x1bf)],'merchantUrl':_0x3ba0b4['shopUrl'],'gateways':_0x3ba0b4[_0x705ec1(0x1dd)]?JSON[_0x705ec1(0x1c5)](_0x3ba0b4[_0x705ec1(0x1dd)]):null,'gatewaySettings':_0x3ba0b4[_0x705ec1(0x1c0)]?JSON[_0x705ec1(0x1c5)](_0x3ba0b4[_0x705ec1(0x1c0)]):null,'publicKey':_0x3ba0b4[_0x705ec1(0x1b7)],'wallets':{'usdtPolygonWallet':_0x3ba0b4[_0x705ec1(0x1e1)],'usdtTrcWallet':_0x3ba0b4[_0x705ec1(0x1cf)],'usdtErcWallet':_0x3ba0b4[_0x705ec1(0x1d1)],'usdcPolygonWallet':_0x3ba0b4['usdcPolygonWallet']},'status':_0x3ba0b4[_0x705ec1(0x1de)],'createdAt':_0x3ba0b4['createdAt']};}async['updateUser'](_0x1961fe,_0x302d6c){const _0x3541fa=a56_0x5abcfd,_0x3081d6={..._0x302d6c};_0x302d6c[_0x3541fa(0x1ca)]&&(_0x3081d6[_0x3541fa(0x1ca)]=await bcryptjs_1[_0x3541fa(0x1ce)]['hash'](_0x302d6c[_0x3541fa(0x1ca)],0xc));_0x302d6c[_0x3541fa(0x1be)]&&(_0x3081d6['name']=_0x302d6c[_0x3541fa(0x1be)],delete _0x3081d6[_0x3541fa(0x1be)]);_0x302d6c[_0x3541fa(0x1d2)]&&(_0x3081d6[_0x3541fa(0x1bf)]=_0x302d6c[_0x3541fa(0x1d2)],delete _0x3081d6[_0x3541fa(0x1d2)]);_0x302d6c['merchantUrl']&&(_0x3081d6[_0x3541fa(0x1d4)]=_0x302d6c[_0x3541fa(0x1b5)],delete _0x3081d6[_0x3541fa(0x1b5)]);_0x302d6c[_0x3541fa(0x1bb)]&&(_0x3081d6['paymentGateways']=JSON[_0x3541fa(0x1b1)](_0x302d6c['gateways']),delete _0x3081d6['gateways']);_0x302d6c[_0x3541fa(0x1c0)]&&(_0x3081d6[_0x3541fa(0x1c0)]=JSON['stringify'](_0x302d6c[_0x3541fa(0x1c0)]),delete _0x3081d6[_0x3541fa(0x1c0)]);_0x302d6c[_0x3541fa(0x1b9)]&&(_0x302d6c[_0x3541fa(0x1b9)][_0x3541fa(0x1e1)]!==undefined&&(_0x3081d6[_0x3541fa(0x1e1)]=_0x302d6c[_0x3541fa(0x1b9)]['usdtPolygonWallet']||null),_0x302d6c[_0x3541fa(0x1b9)]['usdtTrcWallet']!==undefined&&(_0x3081d6[_0x3541fa(0x1cf)]=_0x302d6c[_0x3541fa(0x1b9)][_0x3541fa(0x1cf)]||null),_0x302d6c[_0x3541fa(0x1b9)][_0x3541fa(0x1d1)]!==undefined&&(_0x3081d6[_0x3541fa(0x1d1)]=_0x302d6c['wallets'][_0x3541fa(0x1d1)]||null),_0x302d6c['wallets'][_0x3541fa(0x1df)]!==undefined&&(_0x3081d6[_0x3541fa(0x1df)]=_0x302d6c[_0x3541fa(0x1b9)][_0x3541fa(0x1df)]||null),delete _0x3081d6[_0x3541fa(0x1b9)]);const _0x2b608d=await database_1[_0x3541fa(0x1ce)][_0x3541fa(0x1ac)][_0x3541fa(0x1dc)]({'where':{'id':_0x1961fe},'data':_0x3081d6,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x2b608d['id'],'fullName':_0x2b608d[_0x3541fa(0x1b3)],'username':_0x2b608d[_0x3541fa(0x1af)],'telegramId':_0x2b608d[_0x3541fa(0x1bf)],'merchantUrl':_0x2b608d[_0x3541fa(0x1d4)],'gateways':_0x2b608d[_0x3541fa(0x1dd)]?JSON[_0x3541fa(0x1c5)](_0x2b608d[_0x3541fa(0x1dd)]):null,'gatewaySettings':_0x2b608d[_0x3541fa(0x1c0)]?JSON[_0x3541fa(0x1c5)](_0x2b608d[_0x3541fa(0x1c0)]):null,'publicKey':_0x2b608d[_0x3541fa(0x1b7)],'wallets':{'usdtPolygonWallet':_0x2b608d[_0x3541fa(0x1e1)],'usdtTrcWallet':_0x2b608d[_0x3541fa(0x1cf)],'usdtErcWallet':_0x2b608d[_0x3541fa(0x1d1)],'usdcPolygonWallet':_0x2b608d[_0x3541fa(0x1df)]},'status':_0x2b608d[_0x3541fa(0x1de)],'createdAt':_0x2b608d[_0x3541fa(0x1ad)]};}async[a56_0x5abcfd(0x1d5)](_0x31e118){const _0x56a89a=a56_0x5abcfd;await database_1[_0x56a89a(0x1ce)][_0x56a89a(0x1ac)]['delete']({'where':{'id':_0x31e118}});}}exports['UserService']=UserService;