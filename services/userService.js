'use strict';const a68_0x139013=a68_0x3991;(function(_0x45c097,_0x4e62f5){const _0x5abb92=a68_0x3991,_0x179fb3=_0x45c097();while(!![]){try{const _0x3dcf78=parseInt(_0x5abb92(0x1dd))/0x1*(-parseInt(_0x5abb92(0x1f2))/0x2)+-parseInt(_0x5abb92(0x1e2))/0x3+parseInt(_0x5abb92(0x1de))/0x4*(parseInt(_0x5abb92(0x1eb))/0x5)+-parseInt(_0x5abb92(0x1e0))/0x6+parseInt(_0x5abb92(0x1d6))/0x7*(-parseInt(_0x5abb92(0x1d4))/0x8)+parseInt(_0x5abb92(0x1db))/0x9*(-parseInt(_0x5abb92(0x1ff))/0xa)+parseInt(_0x5abb92(0x1da))/0xb;if(_0x3dcf78===_0x4e62f5)break;else _0x179fb3['push'](_0x179fb3['shift']());}catch(_0x3bd395){_0x179fb3['push'](_0x179fb3['shift']());}}}(a68_0x4933,0x5f864));var __importDefault=this&&this[a68_0x139013(0x1f5)]||function(_0x4c07a9){const _0x3db5a8=a68_0x139013;return _0x4c07a9&&_0x4c07a9[_0x3db5a8(0x203)]?_0x4c07a9:{'default':_0x4c07a9};};Object[a68_0x139013(0x1f4)](exports,a68_0x139013(0x203),{'value':!![]}),exports[a68_0x139013(0x1f7)]=void 0x0;const bcryptjs_1=__importDefault(require(a68_0x139013(0x1d0))),crypto_1=__importDefault(require(a68_0x139013(0x1ed))),database_1=__importDefault(require(a68_0x139013(0x1ef)));function a68_0x3991(_0x31fbfc,_0x52bb7f){const _0x493340=a68_0x4933();return a68_0x3991=function(_0x399172,_0x1a7155){_0x399172=_0x399172-0x1ca;let _0x1e2cdb=_0x493340[_0x399172];return _0x1e2cdb;},a68_0x3991(_0x31fbfc,_0x52bb7f);}class UserService{[a68_0x139013(0x1cb)](){const _0x252689=a68_0x139013,_0x177258='pk_'+crypto_1['default'][_0x252689(0x1e8)](0x20)[_0x252689(0x1f0)](_0x252689(0x1e4)),_0x139ae8=_0x252689(0x1ec)+crypto_1[_0x252689(0x1ce)][_0x252689(0x1e8)](0x20)[_0x252689(0x1f0)]('hex');return{'publicKey':_0x177258,'secretKey':_0x139ae8};}async[a68_0x139013(0x1f3)](_0x100b7a){const _0x38d520=a68_0x139013,{fullName:_0x2790f2,username:_0x277c3c,password:_0x1fd583,telegramId:_0x3a0109,merchantUrl:_0x10782e,gateways:_0x69ca99,gatewaySettings:_0x3871f0,wallets:_0x6f4ed6}=_0x100b7a,_0x10d391=await database_1[_0x38d520(0x1ce)]['shop'][_0x38d520(0x1f6)]({'where':{'username':_0x277c3c}});if(_0x10d391)throw new Error(_0x38d520(0x1d2));if(_0x3a0109){const _0x57efe8=await database_1[_0x38d520(0x1ce)][_0x38d520(0x1e6)][_0x38d520(0x1f6)]({'where':{'telegram':_0x3a0109}});if(_0x57efe8)throw new Error(_0x38d520(0x1dc));}const _0xcfbeb5=await bcryptjs_1[_0x38d520(0x1ce)][_0x38d520(0x1e9)](_0x1fd583,0xc),{publicKey:_0x1bb768,secretKey:_0x25849f}=this[_0x38d520(0x1cb)](),_0x409c56=await database_1[_0x38d520(0x1ce)][_0x38d520(0x1e6)][_0x38d520(0x1df)]({'data':{'name':_0x2790f2,'username':_0x277c3c,'password':_0xcfbeb5,'telegram':_0x3a0109,'shopUrl':_0x10782e,'paymentGateways':_0x69ca99?JSON[_0x38d520(0x200)](_0x69ca99):null,'gatewaySettings':_0x3871f0?JSON[_0x38d520(0x200)](_0x3871f0):null,'usdtPolygonWallet':_0x6f4ed6?.[_0x38d520(0x1e5)]||null,'usdtTrcWallet':_0x6f4ed6?.[_0x38d520(0x1e1)]||null,'usdtErcWallet':_0x6f4ed6?.[_0x38d520(0x1cd)]||null,'usdcPolygonWallet':_0x6f4ed6?.['usdcPolygonWallet']||null,'publicKey':_0x1bb768,'secretKey':_0x25849f,'status':_0x38d520(0x204)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x409c56['id'],'fullName':_0x409c56[_0x38d520(0x1f1)],'username':_0x409c56[_0x38d520(0x1e3)],'telegramId':_0x409c56['telegram'],'merchantUrl':_0x409c56[_0x38d520(0x1ea)],'gateways':_0x409c56[_0x38d520(0x202)]?JSON[_0x38d520(0x1e7)](_0x409c56['paymentGateways']):null,'gatewaySettings':_0x409c56[_0x38d520(0x1d9)]?JSON[_0x38d520(0x1e7)](_0x409c56[_0x38d520(0x1d9)]):null,'publicKey':_0x409c56[_0x38d520(0x1fb)],'wallets':{'usdtPolygonWallet':_0x409c56[_0x38d520(0x1e5)],'usdtTrcWallet':_0x409c56[_0x38d520(0x1e1)],'usdtErcWallet':_0x409c56[_0x38d520(0x1cd)],'usdcPolygonWallet':_0x409c56[_0x38d520(0x1fa)]},'status':_0x409c56[_0x38d520(0x1ca)],'createdAt':_0x409c56[_0x38d520(0x201)]};}async['getAllUsers'](){const _0x56f0f7=a68_0x139013,_0x58a47d=await database_1[_0x56f0f7(0x1ce)][_0x56f0f7(0x1e6)]['findMany']({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':'desc'}});return _0x58a47d[_0x56f0f7(0x1cc)](_0x16b2cb=>({'id':_0x16b2cb['id'],'fullName':_0x16b2cb[_0x56f0f7(0x1f1)],'username':_0x16b2cb[_0x56f0f7(0x1e3)],'telegramId':_0x16b2cb['telegram'],'merchantUrl':_0x16b2cb[_0x56f0f7(0x1ea)],'gateways':_0x16b2cb['paymentGateways']?JSON[_0x56f0f7(0x1e7)](_0x16b2cb[_0x56f0f7(0x202)]):null,'gatewaySettings':_0x16b2cb[_0x56f0f7(0x1d9)]?JSON[_0x56f0f7(0x1e7)](_0x16b2cb[_0x56f0f7(0x1d9)]):null,'publicKey':_0x16b2cb[_0x56f0f7(0x1fb)],'wallets':{'usdtPolygonWallet':_0x16b2cb['usdtPolygonWallet'],'usdtTrcWallet':_0x16b2cb['usdtTrcWallet'],'usdtErcWallet':_0x16b2cb[_0x56f0f7(0x1cd)],'usdcPolygonWallet':_0x16b2cb[_0x56f0f7(0x1fa)]},'status':_0x16b2cb[_0x56f0f7(0x1ca)],'createdAt':_0x16b2cb['createdAt']}));}async[a68_0x139013(0x1fe)](_0x2fb8fc){const _0x49c595=a68_0x139013,_0x597bdb=await database_1[_0x49c595(0x1ce)][_0x49c595(0x1e6)][_0x49c595(0x1f6)]({'where':{'id':_0x2fb8fc},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x597bdb)return null;return{'id':_0x597bdb['id'],'fullName':_0x597bdb[_0x49c595(0x1f1)],'username':_0x597bdb[_0x49c595(0x1e3)],'telegramId':_0x597bdb[_0x49c595(0x1cf)],'merchantUrl':_0x597bdb[_0x49c595(0x1ea)],'gateways':_0x597bdb['paymentGateways']?JSON[_0x49c595(0x1e7)](_0x597bdb[_0x49c595(0x202)]):null,'gatewaySettings':_0x597bdb['gatewaySettings']?JSON[_0x49c595(0x1e7)](_0x597bdb[_0x49c595(0x1d9)]):null,'publicKey':_0x597bdb[_0x49c595(0x1fb)],'wallets':{'usdtPolygonWallet':_0x597bdb[_0x49c595(0x1e5)],'usdtTrcWallet':_0x597bdb[_0x49c595(0x1e1)],'usdtErcWallet':_0x597bdb[_0x49c595(0x1cd)],'usdcPolygonWallet':_0x597bdb[_0x49c595(0x1fa)]},'status':_0x597bdb[_0x49c595(0x1ca)],'createdAt':_0x597bdb[_0x49c595(0x201)]};}async[a68_0x139013(0x1d7)](_0xdf9928,_0x4f7632){const _0x1c1b62=a68_0x139013,_0x2b4942={..._0x4f7632};_0x4f7632[_0x1c1b62(0x1fc)]&&(_0x2b4942[_0x1c1b62(0x1fc)]=await bcryptjs_1[_0x1c1b62(0x1ce)][_0x1c1b62(0x1e9)](_0x4f7632['password'],0xc));_0x4f7632[_0x1c1b62(0x1d8)]&&(_0x2b4942[_0x1c1b62(0x1f1)]=_0x4f7632[_0x1c1b62(0x1d8)],delete _0x2b4942[_0x1c1b62(0x1d8)]);_0x4f7632[_0x1c1b62(0x1fd)]&&(_0x2b4942[_0x1c1b62(0x1cf)]=_0x4f7632['telegramId'],delete _0x2b4942['telegramId']);_0x4f7632['merchantUrl']&&(_0x2b4942['shopUrl']=_0x4f7632[_0x1c1b62(0x1f9)],delete _0x2b4942['merchantUrl']);_0x4f7632[_0x1c1b62(0x1d3)]&&(_0x2b4942[_0x1c1b62(0x202)]=JSON['stringify'](_0x4f7632['gateways']),delete _0x2b4942[_0x1c1b62(0x1d3)]);_0x4f7632[_0x1c1b62(0x1d9)]&&(_0x2b4942[_0x1c1b62(0x1d9)]=JSON[_0x1c1b62(0x200)](_0x4f7632[_0x1c1b62(0x1d9)]),delete _0x2b4942[_0x1c1b62(0x1d9)]);_0x4f7632['wallets']&&(_0x4f7632[_0x1c1b62(0x1d5)][_0x1c1b62(0x1e5)]!==undefined&&(_0x2b4942[_0x1c1b62(0x1e5)]=_0x4f7632['wallets'][_0x1c1b62(0x1e5)]||null),_0x4f7632['wallets'][_0x1c1b62(0x1e1)]!==undefined&&(_0x2b4942[_0x1c1b62(0x1e1)]=_0x4f7632['wallets'][_0x1c1b62(0x1e1)]||null),_0x4f7632['wallets']['usdtErcWallet']!==undefined&&(_0x2b4942['usdtErcWallet']=_0x4f7632[_0x1c1b62(0x1d5)][_0x1c1b62(0x1cd)]||null),_0x4f7632['wallets']['usdcPolygonWallet']!==undefined&&(_0x2b4942[_0x1c1b62(0x1fa)]=_0x4f7632[_0x1c1b62(0x1d5)][_0x1c1b62(0x1fa)]||null),delete _0x2b4942[_0x1c1b62(0x1d5)]);const _0x5b1185=await database_1[_0x1c1b62(0x1ce)][_0x1c1b62(0x1e6)][_0x1c1b62(0x1ee)]({'where':{'id':_0xdf9928},'data':_0x2b4942,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x5b1185['id'],'fullName':_0x5b1185['name'],'username':_0x5b1185[_0x1c1b62(0x1e3)],'telegramId':_0x5b1185[_0x1c1b62(0x1cf)],'merchantUrl':_0x5b1185[_0x1c1b62(0x1ea)],'gateways':_0x5b1185[_0x1c1b62(0x202)]?JSON[_0x1c1b62(0x1e7)](_0x5b1185[_0x1c1b62(0x202)]):null,'gatewaySettings':_0x5b1185[_0x1c1b62(0x1d9)]?JSON[_0x1c1b62(0x1e7)](_0x5b1185[_0x1c1b62(0x1d9)]):null,'publicKey':_0x5b1185[_0x1c1b62(0x1fb)],'wallets':{'usdtPolygonWallet':_0x5b1185[_0x1c1b62(0x1e5)],'usdtTrcWallet':_0x5b1185[_0x1c1b62(0x1e1)],'usdtErcWallet':_0x5b1185[_0x1c1b62(0x1cd)],'usdcPolygonWallet':_0x5b1185[_0x1c1b62(0x1fa)]},'status':_0x5b1185[_0x1c1b62(0x1ca)],'createdAt':_0x5b1185[_0x1c1b62(0x201)]};}async[a68_0x139013(0x1d1)](_0x1ba198){const _0x54849b=a68_0x139013;await database_1[_0x54849b(0x1ce)][_0x54849b(0x1e6)][_0x54849b(0x1f8)]({'where':{'id':_0x1ba198}});}}function a68_0x4933(){const _0x2c5d58=['7fyvAAf','updateUser','fullName','gatewaySettings','18161605aNkIct','1179gHOaVr','Telegram\x20username\x20already\x20exists','482716obbnlK','454928yFigxk','create','2225946PhcUuF','usdtTrcWallet','2170647XhoIjj','username','hex','usdtPolygonWallet','shop','parse','randomBytes','hash','shopUrl','30cFOBei','sk_','crypto','update','../config/database','toString','name','2TpAUVN','createUser','defineProperty','__importDefault','findUnique','UserService','delete','merchantUrl','usdcPolygonWallet','publicKey','password','telegramId','getUserById','1450UaKbft','stringify','createdAt','paymentGateways','__esModule','ACTIVE','status','generateApiKeys','map','usdtErcWallet','default','telegram','bcryptjs','deleteUser','Username\x20already\x20exists','gateways','2767424DkMkFt','wallets'];a68_0x4933=function(){return _0x2c5d58;};return a68_0x4933();}exports[a68_0x139013(0x1f7)]=UserService;