'use strict';const a56_0x1975e3=a56_0x27a9;(function(_0x266285,_0x35f503){const _0xdc1464=a56_0x27a9,_0x10215d=_0x266285();while(!![]){try{const _0x422d8a=parseInt(_0xdc1464(0x1c8))/0x1*(parseInt(_0xdc1464(0x1bb))/0x2)+parseInt(_0xdc1464(0x1d5))/0x3*(parseInt(_0xdc1464(0x1d1))/0x4)+-parseInt(_0xdc1464(0x1c9))/0x5*(-parseInt(_0xdc1464(0x1c5))/0x6)+parseInt(_0xdc1464(0x1f3))/0x7*(parseInt(_0xdc1464(0x1da))/0x8)+parseInt(_0xdc1464(0x1d6))/0x9*(-parseInt(_0xdc1464(0x1d3))/0xa)+parseInt(_0xdc1464(0x1e4))/0xb+-parseInt(_0xdc1464(0x1d9))/0xc;if(_0x422d8a===_0x35f503)break;else _0x10215d['push'](_0x10215d['shift']());}catch(_0x5d273e){_0x10215d['push'](_0x10215d['shift']());}}}(a56_0x2114,0x4ab25));var __importDefault=this&&this[a56_0x1975e3(0x1f2)]||function(_0x943ddb){return _0x943ddb&&_0x943ddb['__esModule']?_0x943ddb:{'default':_0x943ddb};};Object[a56_0x1975e3(0x1ed)](exports,'__esModule',{'value':!![]}),exports['UserService']=void 0x0;const bcryptjs_1=__importDefault(require(a56_0x1975e3(0x1ca))),crypto_1=__importDefault(require('crypto')),database_1=__importDefault(require('../config/database'));class UserService{['generateApiKeys'](){const _0x2f7364=a56_0x1975e3,_0x3a99ca=_0x2f7364(0x1c6)+crypto_1[_0x2f7364(0x1e5)]['randomBytes'](0x20)[_0x2f7364(0x1d4)](_0x2f7364(0x1e6)),_0x2cc49f=_0x2f7364(0x1e1)+crypto_1[_0x2f7364(0x1e5)]['randomBytes'](0x20)[_0x2f7364(0x1d4)](_0x2f7364(0x1e6));return{'publicKey':_0x3a99ca,'secretKey':_0x2cc49f};}async[a56_0x1975e3(0x1c0)](_0x6ae6c){const _0x5844eb=a56_0x1975e3,{fullName:_0x50ac56,username:_0x1cf02d,password:_0x503312,telegramId:_0x39348f,merchantUrl:_0x467636,gateways:_0x347e0c,gatewaySettings:_0x238430,wallets:_0x3a48a0}=_0x6ae6c,_0x41ac07=await database_1[_0x5844eb(0x1e5)][_0x5844eb(0x1d2)][_0x5844eb(0x1cf)]({'where':{'username':_0x1cf02d}});if(_0x41ac07)throw new Error(_0x5844eb(0x1e7));if(_0x39348f){const _0xcd2d08=await database_1[_0x5844eb(0x1e5)][_0x5844eb(0x1d2)][_0x5844eb(0x1cf)]({'where':{'telegram':_0x39348f}});if(_0xcd2d08)throw new Error(_0x5844eb(0x1c3));}const _0x29730c=await bcryptjs_1['default'][_0x5844eb(0x1ec)](_0x503312,0xc),{publicKey:_0xd71da4,secretKey:_0x3747a7}=this[_0x5844eb(0x1cc)](),_0x53e2ee=await database_1[_0x5844eb(0x1e5)][_0x5844eb(0x1d2)][_0x5844eb(0x1e2)]({'data':{'name':_0x50ac56,'username':_0x1cf02d,'password':_0x29730c,'telegram':_0x39348f,'shopUrl':_0x467636,'paymentGateways':_0x347e0c?JSON[_0x5844eb(0x1ce)](_0x347e0c):null,'gatewaySettings':_0x238430?JSON[_0x5844eb(0x1ce)](_0x238430):null,'usdtPolygonWallet':_0x3a48a0?.[_0x5844eb(0x1c4)]||null,'usdtTrcWallet':_0x3a48a0?.[_0x5844eb(0x1bd)]||null,'usdtErcWallet':_0x3a48a0?.['usdtErcWallet']||null,'usdcPolygonWallet':_0x3a48a0?.[_0x5844eb(0x1d7)]||null,'publicKey':_0xd71da4,'secretKey':_0x3747a7,'status':'ACTIVE'},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x53e2ee['id'],'fullName':_0x53e2ee[_0x5844eb(0x1e3)],'username':_0x53e2ee[_0x5844eb(0x1c2)],'telegramId':_0x53e2ee[_0x5844eb(0x1f1)],'merchantUrl':_0x53e2ee[_0x5844eb(0x1de)],'gateways':_0x53e2ee[_0x5844eb(0x1ef)]?JSON['parse'](_0x53e2ee[_0x5844eb(0x1ef)]):null,'gatewaySettings':_0x53e2ee[_0x5844eb(0x1eb)]?JSON[_0x5844eb(0x1dc)](_0x53e2ee[_0x5844eb(0x1eb)]):null,'publicKey':_0x53e2ee[_0x5844eb(0x1f4)],'wallets':{'usdtPolygonWallet':_0x53e2ee[_0x5844eb(0x1c4)],'usdtTrcWallet':_0x53e2ee[_0x5844eb(0x1bd)],'usdtErcWallet':_0x53e2ee[_0x5844eb(0x1ea)],'usdcPolygonWallet':_0x53e2ee[_0x5844eb(0x1d7)]},'status':_0x53e2ee[_0x5844eb(0x1c7)],'createdAt':_0x53e2ee[_0x5844eb(0x1db)]};}async[a56_0x1975e3(0x1e9)](){const _0x18bb1d=a56_0x1975e3,_0x2895c6=await database_1[_0x18bb1d(0x1e5)][_0x18bb1d(0x1d2)][_0x18bb1d(0x1cd)]({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':_0x18bb1d(0x1d8)}});return _0x2895c6[_0x18bb1d(0x1ee)](_0x4f00aa=>({'id':_0x4f00aa['id'],'fullName':_0x4f00aa[_0x18bb1d(0x1e3)],'username':_0x4f00aa[_0x18bb1d(0x1c2)],'telegramId':_0x4f00aa[_0x18bb1d(0x1f1)],'merchantUrl':_0x4f00aa['shopUrl'],'gateways':_0x4f00aa[_0x18bb1d(0x1ef)]?JSON['parse'](_0x4f00aa[_0x18bb1d(0x1ef)]):null,'gatewaySettings':_0x4f00aa['gatewaySettings']?JSON[_0x18bb1d(0x1dc)](_0x4f00aa['gatewaySettings']):null,'publicKey':_0x4f00aa[_0x18bb1d(0x1f4)],'wallets':{'usdtPolygonWallet':_0x4f00aa[_0x18bb1d(0x1c4)],'usdtTrcWallet':_0x4f00aa[_0x18bb1d(0x1bd)],'usdtErcWallet':_0x4f00aa['usdtErcWallet'],'usdcPolygonWallet':_0x4f00aa[_0x18bb1d(0x1d7)]},'status':_0x4f00aa[_0x18bb1d(0x1c7)],'createdAt':_0x4f00aa[_0x18bb1d(0x1db)]}));}async['getUserById'](_0x52b57a){const _0x118e37=a56_0x1975e3,_0x546093=await database_1[_0x118e37(0x1e5)]['shop'][_0x118e37(0x1cf)]({'where':{'id':_0x52b57a},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x546093)return null;return{'id':_0x546093['id'],'fullName':_0x546093[_0x118e37(0x1e3)],'username':_0x546093[_0x118e37(0x1c2)],'telegramId':_0x546093['telegram'],'merchantUrl':_0x546093[_0x118e37(0x1de)],'gateways':_0x546093['paymentGateways']?JSON['parse'](_0x546093[_0x118e37(0x1ef)]):null,'gatewaySettings':_0x546093[_0x118e37(0x1eb)]?JSON['parse'](_0x546093['gatewaySettings']):null,'publicKey':_0x546093[_0x118e37(0x1f4)],'wallets':{'usdtPolygonWallet':_0x546093['usdtPolygonWallet'],'usdtTrcWallet':_0x546093['usdtTrcWallet'],'usdtErcWallet':_0x546093[_0x118e37(0x1ea)],'usdcPolygonWallet':_0x546093[_0x118e37(0x1d7)]},'status':_0x546093['status'],'createdAt':_0x546093[_0x118e37(0x1db)]};}async[a56_0x1975e3(0x1d0)](_0xa13cff,_0x5d4be8){const _0x478a3c=a56_0x1975e3,_0x5dd87d={..._0x5d4be8};_0x5d4be8[_0x478a3c(0x1f0)]&&(_0x5dd87d[_0x478a3c(0x1f0)]=await bcryptjs_1['default']['hash'](_0x5d4be8['password'],0xc));_0x5d4be8[_0x478a3c(0x1dd)]&&(_0x5dd87d[_0x478a3c(0x1e3)]=_0x5d4be8[_0x478a3c(0x1dd)],delete _0x5dd87d['fullName']);_0x5d4be8[_0x478a3c(0x1bf)]&&(_0x5dd87d[_0x478a3c(0x1f1)]=_0x5d4be8[_0x478a3c(0x1bf)],delete _0x5dd87d[_0x478a3c(0x1bf)]);_0x5d4be8[_0x478a3c(0x1be)]&&(_0x5dd87d[_0x478a3c(0x1de)]=_0x5d4be8[_0x478a3c(0x1be)],delete _0x5dd87d[_0x478a3c(0x1be)]);_0x5d4be8[_0x478a3c(0x1bc)]&&(_0x5dd87d[_0x478a3c(0x1ef)]=JSON['stringify'](_0x5d4be8['gateways']),delete _0x5dd87d['gateways']);_0x5d4be8[_0x478a3c(0x1eb)]&&(_0x5dd87d[_0x478a3c(0x1eb)]=JSON['stringify'](_0x5d4be8[_0x478a3c(0x1eb)]),delete _0x5dd87d['gatewaySettings']);_0x5d4be8['wallets']&&(_0x5d4be8[_0x478a3c(0x1df)][_0x478a3c(0x1c4)]!==undefined&&(_0x5dd87d[_0x478a3c(0x1c4)]=_0x5d4be8[_0x478a3c(0x1df)][_0x478a3c(0x1c4)]||null),_0x5d4be8['wallets']['usdtTrcWallet']!==undefined&&(_0x5dd87d[_0x478a3c(0x1bd)]=_0x5d4be8[_0x478a3c(0x1df)]['usdtTrcWallet']||null),_0x5d4be8[_0x478a3c(0x1df)]['usdtErcWallet']!==undefined&&(_0x5dd87d[_0x478a3c(0x1ea)]=_0x5d4be8[_0x478a3c(0x1df)]['usdtErcWallet']||null),_0x5d4be8[_0x478a3c(0x1df)]['usdcPolygonWallet']!==undefined&&(_0x5dd87d[_0x478a3c(0x1d7)]=_0x5d4be8[_0x478a3c(0x1df)][_0x478a3c(0x1d7)]||null),delete _0x5dd87d[_0x478a3c(0x1df)]);const _0x4d1e0b=await database_1[_0x478a3c(0x1e5)][_0x478a3c(0x1d2)][_0x478a3c(0x1e0)]({'where':{'id':_0xa13cff},'data':_0x5dd87d,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x4d1e0b['id'],'fullName':_0x4d1e0b[_0x478a3c(0x1e3)],'username':_0x4d1e0b[_0x478a3c(0x1c2)],'telegramId':_0x4d1e0b[_0x478a3c(0x1f1)],'merchantUrl':_0x4d1e0b[_0x478a3c(0x1de)],'gateways':_0x4d1e0b[_0x478a3c(0x1ef)]?JSON['parse'](_0x4d1e0b[_0x478a3c(0x1ef)]):null,'gatewaySettings':_0x4d1e0b[_0x478a3c(0x1eb)]?JSON['parse'](_0x4d1e0b['gatewaySettings']):null,'publicKey':_0x4d1e0b[_0x478a3c(0x1f4)],'wallets':{'usdtPolygonWallet':_0x4d1e0b[_0x478a3c(0x1c4)],'usdtTrcWallet':_0x4d1e0b[_0x478a3c(0x1bd)],'usdtErcWallet':_0x4d1e0b[_0x478a3c(0x1ea)],'usdcPolygonWallet':_0x4d1e0b['usdcPolygonWallet']},'status':_0x4d1e0b[_0x478a3c(0x1c7)],'createdAt':_0x4d1e0b[_0x478a3c(0x1db)]};}async[a56_0x1975e3(0x1e8)](_0x1862c8){const _0xb1cc5f=a56_0x1975e3;await database_1['default'][_0xb1cc5f(0x1d2)][_0xb1cc5f(0x1c1)]({'where':{'id':_0x1862c8}});}}exports[a56_0x1975e3(0x1cb)]=UserService;function a56_0x27a9(_0x4eb4c2,_0x2e3991){const _0x2114a5=a56_0x2114();return a56_0x27a9=function(_0x27a906,_0x460183){_0x27a906=_0x27a906-0x1bb;let _0x56563e=_0x2114a5[_0x27a906];return _0x56563e;},a56_0x27a9(_0x4eb4c2,_0x2e3991);}function a56_0x2114(){const _0xfb5085=['stringify','findUnique','updateUser','803272GtXRtD','shop','730STyVwm','toString','6mazhlW','61497pxKCmk','usdcPolygonWallet','desc','10795764xOhNAH','108152gyjHsU','createdAt','parse','fullName','shopUrl','wallets','update','sk_','create','name','3480741Eounqd','default','hex','Username\x20already\x20exists','deleteUser','getAllUsers','usdtErcWallet','gatewaySettings','hash','defineProperty','map','paymentGateways','password','telegram','__importDefault','133WsssOu','publicKey','6fdxAdJ','gateways','usdtTrcWallet','merchantUrl','telegramId','createUser','delete','username','Telegram\x20username\x20already\x20exists','usdtPolygonWallet','438Lmkrag','pk_','status','56671JhMCIq','38320bqZBpG','bcryptjs','UserService','generateApiKeys','findMany'];a56_0x2114=function(){return _0xfb5085;};return a56_0x2114();}