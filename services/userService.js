'use strict';const a51_0x42e95e=a51_0x4ed6;(function(_0x30332b,_0x50c3b5){const _0x1771e7=a51_0x4ed6,_0x172dd2=_0x30332b();while(!![]){try{const _0x8b8cf7=-parseInt(_0x1771e7(0x1af))/0x1+parseInt(_0x1771e7(0x1a4))/0x2+parseInt(_0x1771e7(0x1bb))/0x3*(-parseInt(_0x1771e7(0x1ad))/0x4)+-parseInt(_0x1771e7(0x1cd))/0x5+parseInt(_0x1771e7(0x1b1))/0x6*(-parseInt(_0x1771e7(0x1ac))/0x7)+parseInt(_0x1771e7(0x1bf))/0x8+parseInt(_0x1771e7(0x1a2))/0x9;if(_0x8b8cf7===_0x50c3b5)break;else _0x172dd2['push'](_0x172dd2['shift']());}catch(_0x1959b3){_0x172dd2['push'](_0x172dd2['shift']());}}}(a51_0x3190,0xaa690));var __importDefault=this&&this[a51_0x42e95e(0x1c1)]||function(_0x552f3a){const _0x3013f3=a51_0x42e95e;return _0x552f3a&&_0x552f3a[_0x3013f3(0x1a5)]?_0x552f3a:{'default':_0x552f3a};};function a51_0x4ed6(_0xd0288b,_0xa4c38a){const _0x319076=a51_0x3190();return a51_0x4ed6=function(_0x4ed677,_0x767fdb){_0x4ed677=_0x4ed677-0x1a0;let _0x52a934=_0x319076[_0x4ed677];return _0x52a934;},a51_0x4ed6(_0xd0288b,_0xa4c38a);}Object[a51_0x42e95e(0x1b0)](exports,a51_0x42e95e(0x1a5),{'value':!![]}),exports[a51_0x42e95e(0x1b2)]=void 0x0;const bcryptjs_1=__importDefault(require('bcryptjs')),crypto_1=__importDefault(require(a51_0x42e95e(0x1b4))),database_1=__importDefault(require(a51_0x42e95e(0x1c4)));class UserService{[a51_0x42e95e(0x1a9)](){const _0x3d92ff=a51_0x42e95e,_0x40d8de=_0x3d92ff(0x1ae)+crypto_1[_0x3d92ff(0x1d4)]['randomBytes'](0x20)[_0x3d92ff(0x1cc)](_0x3d92ff(0x1a6)),_0x5aa16f=_0x3d92ff(0x1c0)+crypto_1['default'][_0x3d92ff(0x1d3)](0x20)[_0x3d92ff(0x1cc)](_0x3d92ff(0x1a6));return{'publicKey':_0x40d8de,'secretKey':_0x5aa16f};}async[a51_0x42e95e(0x1d2)](_0x5f5615){const _0x4a41f3=a51_0x42e95e,{fullName:_0x3e41fd,username:_0x535155,password:_0x49ffbc,telegramId:_0x3ddfb7,merchantUrl:_0x472935,gateways:_0x1c40a6,gatewaySettings:_0xb2669,wallets:_0x47ab09}=_0x5f5615,_0x59d06f=await database_1[_0x4a41f3(0x1d4)][_0x4a41f3(0x1aa)][_0x4a41f3(0x1b9)]({'where':{'username':_0x535155}});if(_0x59d06f)throw new Error('Username\x20already\x20exists');if(_0x3ddfb7){const _0x1ead4a=await database_1['default'][_0x4a41f3(0x1aa)][_0x4a41f3(0x1b9)]({'where':{'telegram':_0x3ddfb7}});if(_0x1ead4a)throw new Error('Telegram\x20username\x20already\x20exists');}const _0x8c0859=await bcryptjs_1[_0x4a41f3(0x1d4)][_0x4a41f3(0x1c9)](_0x49ffbc,0xc),{publicKey:_0x1fc378,secretKey:_0x3f55c7}=this[_0x4a41f3(0x1a9)](),_0x1ac257=await database_1[_0x4a41f3(0x1d4)][_0x4a41f3(0x1aa)][_0x4a41f3(0x1a7)]({'data':{'name':_0x3e41fd,'username':_0x535155,'password':_0x8c0859,'telegram':_0x3ddfb7,'shopUrl':_0x472935,'paymentGateways':_0x1c40a6?JSON['stringify'](_0x1c40a6):null,'gatewaySettings':_0xb2669?JSON['stringify'](_0xb2669):null,'usdtPolygonWallet':_0x47ab09?.['usdtPolygonWallet']||null,'usdtTrcWallet':_0x47ab09?.[_0x4a41f3(0x1bd)]||null,'usdtErcWallet':_0x47ab09?.[_0x4a41f3(0x1b5)]||null,'usdcPolygonWallet':_0x47ab09?.[_0x4a41f3(0x1ca)]||null,'publicKey':_0x1fc378,'secretKey':_0x3f55c7,'status':'ACTIVE'},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x1ac257['id'],'fullName':_0x1ac257[_0x4a41f3(0x1bc)],'username':_0x1ac257[_0x4a41f3(0x1c6)],'telegramId':_0x1ac257[_0x4a41f3(0x1d1)],'merchantUrl':_0x1ac257[_0x4a41f3(0x1cb)],'gateways':_0x1ac257[_0x4a41f3(0x1d0)]?JSON['parse'](_0x1ac257[_0x4a41f3(0x1d0)]):null,'gatewaySettings':_0x1ac257[_0x4a41f3(0x1be)]?JSON[_0x4a41f3(0x1a8)](_0x1ac257[_0x4a41f3(0x1be)]):null,'publicKey':_0x1ac257[_0x4a41f3(0x1b7)],'wallets':{'usdtPolygonWallet':_0x1ac257['usdtPolygonWallet'],'usdtTrcWallet':_0x1ac257['usdtTrcWallet'],'usdtErcWallet':_0x1ac257[_0x4a41f3(0x1b5)],'usdcPolygonWallet':_0x1ac257[_0x4a41f3(0x1ca)]},'status':_0x1ac257[_0x4a41f3(0x1b8)],'createdAt':_0x1ac257['createdAt']};}async['getAllUsers'](){const _0x5755c1=a51_0x42e95e,_0x4c567e=await database_1['default']['shop'][_0x5755c1(0x1ba)]({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':'desc'}});return _0x4c567e[_0x5755c1(0x1ab)](_0x4801d5=>({'id':_0x4801d5['id'],'fullName':_0x4801d5[_0x5755c1(0x1bc)],'username':_0x4801d5['username'],'telegramId':_0x4801d5[_0x5755c1(0x1d1)],'merchantUrl':_0x4801d5[_0x5755c1(0x1cb)],'gateways':_0x4801d5[_0x5755c1(0x1d0)]?JSON[_0x5755c1(0x1a8)](_0x4801d5[_0x5755c1(0x1d0)]):null,'gatewaySettings':_0x4801d5['gatewaySettings']?JSON['parse'](_0x4801d5[_0x5755c1(0x1be)]):null,'publicKey':_0x4801d5[_0x5755c1(0x1b7)],'wallets':{'usdtPolygonWallet':_0x4801d5['usdtPolygonWallet'],'usdtTrcWallet':_0x4801d5[_0x5755c1(0x1bd)],'usdtErcWallet':_0x4801d5[_0x5755c1(0x1b5)],'usdcPolygonWallet':_0x4801d5[_0x5755c1(0x1ca)]},'status':_0x4801d5[_0x5755c1(0x1b8)],'createdAt':_0x4801d5[_0x5755c1(0x1ce)]}));}async['getUserById'](_0xa80487){const _0x53f506=a51_0x42e95e,_0x4f3e4d=await database_1['default'][_0x53f506(0x1aa)][_0x53f506(0x1b9)]({'where':{'id':_0xa80487},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x4f3e4d)return null;return{'id':_0x4f3e4d['id'],'fullName':_0x4f3e4d[_0x53f506(0x1bc)],'username':_0x4f3e4d['username'],'telegramId':_0x4f3e4d[_0x53f506(0x1d1)],'merchantUrl':_0x4f3e4d['shopUrl'],'gateways':_0x4f3e4d['paymentGateways']?JSON['parse'](_0x4f3e4d[_0x53f506(0x1d0)]):null,'gatewaySettings':_0x4f3e4d[_0x53f506(0x1be)]?JSON[_0x53f506(0x1a8)](_0x4f3e4d['gatewaySettings']):null,'publicKey':_0x4f3e4d[_0x53f506(0x1b7)],'wallets':{'usdtPolygonWallet':_0x4f3e4d[_0x53f506(0x1a3)],'usdtTrcWallet':_0x4f3e4d[_0x53f506(0x1bd)],'usdtErcWallet':_0x4f3e4d[_0x53f506(0x1b5)],'usdcPolygonWallet':_0x4f3e4d[_0x53f506(0x1ca)]},'status':_0x4f3e4d[_0x53f506(0x1b8)],'createdAt':_0x4f3e4d[_0x53f506(0x1ce)]};}async[a51_0x42e95e(0x1b6)](_0x4d60d2,_0x37705a){const _0x2ef153=a51_0x42e95e,_0x1cb2af={..._0x37705a};_0x37705a[_0x2ef153(0x1cf)]&&(_0x1cb2af[_0x2ef153(0x1cf)]=await bcryptjs_1[_0x2ef153(0x1d4)][_0x2ef153(0x1c9)](_0x37705a[_0x2ef153(0x1cf)],0xc));_0x37705a['fullName']&&(_0x1cb2af['name']=_0x37705a['fullName'],delete _0x1cb2af[_0x2ef153(0x1c3)]);_0x37705a['telegramId']&&(_0x1cb2af['telegram']=_0x37705a[_0x2ef153(0x1c8)],delete _0x1cb2af[_0x2ef153(0x1c8)]);_0x37705a[_0x2ef153(0x1c7)]&&(_0x1cb2af[_0x2ef153(0x1cb)]=_0x37705a[_0x2ef153(0x1c7)],delete _0x1cb2af[_0x2ef153(0x1c7)]);_0x37705a[_0x2ef153(0x1b3)]&&(_0x1cb2af[_0x2ef153(0x1d0)]=JSON[_0x2ef153(0x1c2)](_0x37705a['gateways']),delete _0x1cb2af[_0x2ef153(0x1b3)]);_0x37705a[_0x2ef153(0x1be)]&&(_0x1cb2af[_0x2ef153(0x1be)]=JSON['stringify'](_0x37705a[_0x2ef153(0x1be)]),delete _0x1cb2af[_0x2ef153(0x1be)]);_0x37705a[_0x2ef153(0x1d5)]&&(_0x37705a['wallets']['usdtPolygonWallet']!==undefined&&(_0x1cb2af[_0x2ef153(0x1a3)]=_0x37705a[_0x2ef153(0x1d5)][_0x2ef153(0x1a3)]||null),_0x37705a[_0x2ef153(0x1d5)]['usdtTrcWallet']!==undefined&&(_0x1cb2af[_0x2ef153(0x1bd)]=_0x37705a['wallets'][_0x2ef153(0x1bd)]||null),_0x37705a[_0x2ef153(0x1d5)]['usdtErcWallet']!==undefined&&(_0x1cb2af[_0x2ef153(0x1b5)]=_0x37705a['wallets'][_0x2ef153(0x1b5)]||null),_0x37705a['wallets']['usdcPolygonWallet']!==undefined&&(_0x1cb2af[_0x2ef153(0x1ca)]=_0x37705a['wallets'][_0x2ef153(0x1ca)]||null),delete _0x1cb2af[_0x2ef153(0x1d5)]);const _0x455e45=await database_1[_0x2ef153(0x1d4)][_0x2ef153(0x1aa)][_0x2ef153(0x1c5)]({'where':{'id':_0x4d60d2},'data':_0x1cb2af,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x455e45['id'],'fullName':_0x455e45[_0x2ef153(0x1bc)],'username':_0x455e45[_0x2ef153(0x1c6)],'telegramId':_0x455e45[_0x2ef153(0x1d1)],'merchantUrl':_0x455e45[_0x2ef153(0x1cb)],'gateways':_0x455e45[_0x2ef153(0x1d0)]?JSON['parse'](_0x455e45[_0x2ef153(0x1d0)]):null,'gatewaySettings':_0x455e45['gatewaySettings']?JSON['parse'](_0x455e45[_0x2ef153(0x1be)]):null,'publicKey':_0x455e45['publicKey'],'wallets':{'usdtPolygonWallet':_0x455e45['usdtPolygonWallet'],'usdtTrcWallet':_0x455e45[_0x2ef153(0x1bd)],'usdtErcWallet':_0x455e45[_0x2ef153(0x1b5)],'usdcPolygonWallet':_0x455e45[_0x2ef153(0x1ca)]},'status':_0x455e45[_0x2ef153(0x1b8)],'createdAt':_0x455e45['createdAt']};}async[a51_0x42e95e(0x1a0)](_0x569a63){const _0x211bfb=a51_0x42e95e;await database_1[_0x211bfb(0x1d4)][_0x211bfb(0x1aa)][_0x211bfb(0x1a1)]({'where':{'id':_0x569a63}});}}exports[a51_0x42e95e(0x1b2)]=UserService;function a51_0x3190(){const _0x9f72e6=['fullName','../config/database','update','username','merchantUrl','telegramId','hash','usdcPolygonWallet','shopUrl','toString','5734540VYthxt','createdAt','password','paymentGateways','telegram','createUser','randomBytes','default','wallets','deleteUser','delete','26925813YbuoQs','usdtPolygonWallet','997006XJAWrY','__esModule','hex','create','parse','generateApiKeys','shop','map','77WBRwza','563348jZbpEl','pk_','642295peJzap','defineProperty','487722LRNzVB','UserService','gateways','crypto','usdtErcWallet','updateUser','publicKey','status','findUnique','findMany','24oiQNQu','name','usdtTrcWallet','gatewaySettings','8142368rQGVWW','sk_','__importDefault','stringify'];a51_0x3190=function(){return _0x9f72e6;};return a51_0x3190();}