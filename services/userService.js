'use strict';const a89_0x494d64=a89_0x100d;(function(_0x3f1fc1,_0x533263){const _0x39651f=a89_0x100d,_0x545c61=_0x3f1fc1();while(!![]){try{const _0x294f5f=-parseInt(_0x39651f(0x18e))/0x1+parseInt(_0x39651f(0x1a7))/0x2+-parseInt(_0x39651f(0x1b0))/0x3+parseInt(_0x39651f(0x183))/0x4+-parseInt(_0x39651f(0x1a4))/0x5+parseInt(_0x39651f(0x198))/0x6+parseInt(_0x39651f(0x186))/0x7;if(_0x294f5f===_0x533263)break;else _0x545c61['push'](_0x545c61['shift']());}catch(_0x4a45ac){_0x545c61['push'](_0x545c61['shift']());}}}(a89_0x26c3,0xed4c1));var __importDefault=this&&this[a89_0x494d64(0x17c)]||function(_0x587da7){return _0x587da7&&_0x587da7['__esModule']?_0x587da7:{'default':_0x587da7};};Object['defineProperty'](exports,a89_0x494d64(0x1a8),{'value':!![]}),exports['UserService']=void 0x0;function a89_0x26c3(){const _0x426ad2=['shopUrl','gateways','findUnique','username','shopUrl3','hash','shop','5244186PLIsts','create','generateApiKeys','usdtTrcWallet','usdcPolygonWallet','publicKey','__importDefault','merchantUrl','gatewaySettings','hex','usdtPolygonWallet','merchantUrl2','status','288280CLQKVV','Telegram\x20username\x20already\x20exists','shopUrl4','17097906TjDxXg','wallets','findMany','merchantUrl4','Username\x20already\x20exists','ACTIVE','stringify','sk_','1485317LNBXkE','pk_','delete','default','updateUser','fullName','name','randomBytes','getUserById','desc','8953194qMIyGU','parse','telegram','deleteUser','shopUrl2','toString','createUser','paymentGateways','usdtErcWallet','crypto','password','telegramId','4380055kkPhhL','createdAt','merchantUrl3','2149064qmPciy','__esModule'];a89_0x26c3=function(){return _0x426ad2;};return a89_0x26c3();}const bcryptjs_1=__importDefault(require('bcryptjs')),crypto_1=__importDefault(require(a89_0x494d64(0x1a1))),database_1=__importDefault(require('../config/database'));function a89_0x100d(_0x828c2b,_0x4bd130){_0x828c2b=_0x828c2b-0x17b;const _0x26c33f=a89_0x26c3();let _0x100de1=_0x26c33f[_0x828c2b];return _0x100de1;}class UserService{[a89_0x494d64(0x1b2)](){const _0x36ecc8=a89_0x494d64,_0x2b8080=_0x36ecc8(0x18f)+crypto_1['default'][_0x36ecc8(0x195)](0x20)[_0x36ecc8(0x19d)](_0x36ecc8(0x17f)),_0x425188=_0x36ecc8(0x18d)+crypto_1['default'][_0x36ecc8(0x195)](0x20)[_0x36ecc8(0x19d)](_0x36ecc8(0x17f));return{'publicKey':_0x2b8080,'secretKey':_0x425188};}async[a89_0x494d64(0x19e)](_0x356e78){const _0x58b432=a89_0x494d64,{fullName:_0x8c51b8,username:_0x301400,password:_0x31b9e2,telegramId:_0x261423,merchantUrl:_0x5083c6,gateways:_0x4a32df,gatewaySettings:_0x34038b,wallets:_0x565d18}=_0x356e78,_0xa5549e=await database_1['default'][_0x58b432(0x1af)][_0x58b432(0x1ab)]({'where':{'username':_0x301400}});if(_0xa5549e)throw new Error(_0x58b432(0x18a));if(_0x261423){const _0x27202b=await database_1['default'][_0x58b432(0x1af)][_0x58b432(0x1ab)]({'where':{'telegram':_0x261423}});if(_0x27202b)throw new Error(_0x58b432(0x184));}const _0x3359a8=await bcryptjs_1[_0x58b432(0x191)]['hash'](_0x31b9e2,0xc),{publicKey:_0x36fecd,secretKey:_0x4355a7}=this[_0x58b432(0x1b2)](),_0x3a91af=await database_1[_0x58b432(0x191)][_0x58b432(0x1af)][_0x58b432(0x1b1)]({'data':{'name':_0x8c51b8,'username':_0x301400,'password':_0x3359a8,'telegram':_0x261423,'shopUrl':_0x5083c6,'shopUrl2':_0x356e78[_0x58b432(0x181)]||null,'shopUrl3':_0x356e78[_0x58b432(0x1a6)]||null,'shopUrl4':_0x356e78[_0x58b432(0x189)]||null,'paymentGateways':_0x4a32df?JSON[_0x58b432(0x18c)](_0x4a32df):null,'gatewaySettings':_0x34038b?JSON['stringify'](_0x34038b):null,'usdtPolygonWallet':_0x565d18?.['usdtPolygonWallet']||null,'usdtTrcWallet':_0x565d18?.['usdtTrcWallet']||null,'usdtErcWallet':_0x565d18?.[_0x58b432(0x1a0)]||null,'usdcPolygonWallet':_0x565d18?.['usdcPolygonWallet']||null,'publicKey':_0x36fecd,'secretKey':_0x4355a7,'status':_0x58b432(0x18b)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'shopUrl2':!![],'shopUrl3':!![],'shopUrl4':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x3a91af['id'],'fullName':_0x3a91af[_0x58b432(0x194)],'username':_0x3a91af[_0x58b432(0x1ac)],'telegramId':_0x3a91af['telegram'],'merchantUrl':_0x3a91af[_0x58b432(0x1a9)],'merchantUrl2':_0x3a91af[_0x58b432(0x19c)],'merchantUrl3':_0x3a91af[_0x58b432(0x1ad)],'merchantUrl4':_0x3a91af[_0x58b432(0x185)],'gateways':_0x3a91af['paymentGateways']?JSON['parse'](_0x3a91af[_0x58b432(0x19f)]):null,'gatewaySettings':_0x3a91af[_0x58b432(0x17e)]?JSON[_0x58b432(0x199)](_0x3a91af[_0x58b432(0x17e)]):null,'publicKey':_0x3a91af[_0x58b432(0x17b)],'wallets':{'usdtPolygonWallet':_0x3a91af[_0x58b432(0x180)],'usdtTrcWallet':_0x3a91af[_0x58b432(0x1b3)],'usdtErcWallet':_0x3a91af['usdtErcWallet'],'usdcPolygonWallet':_0x3a91af[_0x58b432(0x1b4)]},'status':_0x3a91af[_0x58b432(0x182)],'createdAt':_0x3a91af['createdAt']};}async['getAllUsers'](){const _0x20e348=a89_0x494d64,_0x536100=await database_1[_0x20e348(0x191)]['shop'][_0x20e348(0x188)]({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'shopUrl2':!![],'shopUrl3':!![],'shopUrl4':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':_0x20e348(0x197)}});return _0x536100['map'](_0x50600c=>({'id':_0x50600c['id'],'fullName':_0x50600c[_0x20e348(0x194)],'username':_0x50600c['username'],'telegramId':_0x50600c[_0x20e348(0x19a)],'merchantUrl':_0x50600c[_0x20e348(0x1a9)],'merchantUrl2':_0x50600c[_0x20e348(0x19c)],'merchantUrl3':_0x50600c['shopUrl3'],'merchantUrl4':_0x50600c[_0x20e348(0x185)],'gateways':_0x50600c[_0x20e348(0x19f)]?JSON[_0x20e348(0x199)](_0x50600c[_0x20e348(0x19f)]):null,'gatewaySettings':_0x50600c[_0x20e348(0x17e)]?JSON[_0x20e348(0x199)](_0x50600c[_0x20e348(0x17e)]):null,'publicKey':_0x50600c[_0x20e348(0x17b)],'wallets':{'usdtPolygonWallet':_0x50600c['usdtPolygonWallet'],'usdtTrcWallet':_0x50600c['usdtTrcWallet'],'usdtErcWallet':_0x50600c['usdtErcWallet'],'usdcPolygonWallet':_0x50600c[_0x20e348(0x1b4)]},'status':_0x50600c[_0x20e348(0x182)],'createdAt':_0x50600c[_0x20e348(0x1a5)]}));}async[a89_0x494d64(0x196)](_0xd861d9){const _0x245e3a=a89_0x494d64,_0x1c1513=await database_1[_0x245e3a(0x191)][_0x245e3a(0x1af)][_0x245e3a(0x1ab)]({'where':{'id':_0xd861d9},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'shopUrl2':!![],'shopUrl3':!![],'shopUrl4':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x1c1513)return null;return{'id':_0x1c1513['id'],'fullName':_0x1c1513[_0x245e3a(0x194)],'username':_0x1c1513[_0x245e3a(0x1ac)],'telegramId':_0x1c1513[_0x245e3a(0x19a)],'merchantUrl':_0x1c1513[_0x245e3a(0x1a9)],'merchantUrl2':_0x1c1513[_0x245e3a(0x19c)],'merchantUrl3':_0x1c1513[_0x245e3a(0x1ad)],'merchantUrl4':_0x1c1513[_0x245e3a(0x185)],'gateways':_0x1c1513[_0x245e3a(0x19f)]?JSON[_0x245e3a(0x199)](_0x1c1513[_0x245e3a(0x19f)]):null,'gatewaySettings':_0x1c1513[_0x245e3a(0x17e)]?JSON[_0x245e3a(0x199)](_0x1c1513[_0x245e3a(0x17e)]):null,'publicKey':_0x1c1513[_0x245e3a(0x17b)],'wallets':{'usdtPolygonWallet':_0x1c1513[_0x245e3a(0x180)],'usdtTrcWallet':_0x1c1513['usdtTrcWallet'],'usdtErcWallet':_0x1c1513[_0x245e3a(0x1a0)],'usdcPolygonWallet':_0x1c1513[_0x245e3a(0x1b4)]},'status':_0x1c1513[_0x245e3a(0x182)],'createdAt':_0x1c1513[_0x245e3a(0x1a5)]};}async[a89_0x494d64(0x192)](_0x3d66f9,_0x39ade8){const _0x16d058=a89_0x494d64,_0x1d7cee={..._0x39ade8};_0x39ade8['password']&&(_0x1d7cee['password']=await bcryptjs_1[_0x16d058(0x191)][_0x16d058(0x1ae)](_0x39ade8[_0x16d058(0x1a2)],0xc));_0x39ade8[_0x16d058(0x193)]&&(_0x1d7cee[_0x16d058(0x194)]=_0x39ade8[_0x16d058(0x193)],delete _0x1d7cee['fullName']);_0x39ade8[_0x16d058(0x1a3)]&&(_0x1d7cee[_0x16d058(0x19a)]=_0x39ade8[_0x16d058(0x1a3)],delete _0x1d7cee['telegramId']);_0x39ade8[_0x16d058(0x17d)]&&(_0x1d7cee[_0x16d058(0x1a9)]=_0x39ade8[_0x16d058(0x17d)],delete _0x1d7cee[_0x16d058(0x17d)]);_0x39ade8['merchantUrl2']!==undefined&&(_0x1d7cee[_0x16d058(0x19c)]=_0x39ade8[_0x16d058(0x181)]||null,delete _0x1d7cee[_0x16d058(0x181)]);_0x39ade8[_0x16d058(0x1a6)]!==undefined&&(_0x1d7cee['shopUrl3']=_0x39ade8['merchantUrl3']||null,delete _0x1d7cee[_0x16d058(0x1a6)]);_0x39ade8[_0x16d058(0x189)]!==undefined&&(_0x1d7cee['shopUrl4']=_0x39ade8[_0x16d058(0x189)]||null,delete _0x1d7cee[_0x16d058(0x189)]);_0x39ade8[_0x16d058(0x1aa)]&&(_0x1d7cee[_0x16d058(0x19f)]=JSON[_0x16d058(0x18c)](_0x39ade8[_0x16d058(0x1aa)]),delete _0x1d7cee[_0x16d058(0x1aa)]);_0x39ade8[_0x16d058(0x17e)]&&(_0x1d7cee[_0x16d058(0x17e)]=JSON[_0x16d058(0x18c)](_0x39ade8[_0x16d058(0x17e)]),delete _0x1d7cee[_0x16d058(0x17e)]);_0x39ade8[_0x16d058(0x187)]&&(_0x39ade8[_0x16d058(0x187)][_0x16d058(0x180)]!==undefined&&(_0x1d7cee[_0x16d058(0x180)]=_0x39ade8[_0x16d058(0x187)][_0x16d058(0x180)]||null),_0x39ade8[_0x16d058(0x187)][_0x16d058(0x1b3)]!==undefined&&(_0x1d7cee[_0x16d058(0x1b3)]=_0x39ade8[_0x16d058(0x187)]['usdtTrcWallet']||null),_0x39ade8[_0x16d058(0x187)][_0x16d058(0x1a0)]!==undefined&&(_0x1d7cee[_0x16d058(0x1a0)]=_0x39ade8[_0x16d058(0x187)][_0x16d058(0x1a0)]||null),_0x39ade8[_0x16d058(0x187)]['usdcPolygonWallet']!==undefined&&(_0x1d7cee[_0x16d058(0x1b4)]=_0x39ade8[_0x16d058(0x187)][_0x16d058(0x1b4)]||null),delete _0x1d7cee[_0x16d058(0x187)]);const _0x591187=await database_1[_0x16d058(0x191)][_0x16d058(0x1af)]['update']({'where':{'id':_0x3d66f9},'data':_0x1d7cee,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'shopUrl2':!![],'shopUrl3':!![],'shopUrl4':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x591187['id'],'fullName':_0x591187[_0x16d058(0x194)],'username':_0x591187[_0x16d058(0x1ac)],'telegramId':_0x591187[_0x16d058(0x19a)],'merchantUrl':_0x591187['shopUrl'],'merchantUrl2':_0x591187[_0x16d058(0x19c)],'merchantUrl3':_0x591187['shopUrl3'],'merchantUrl4':_0x591187[_0x16d058(0x185)],'gateways':_0x591187[_0x16d058(0x19f)]?JSON[_0x16d058(0x199)](_0x591187[_0x16d058(0x19f)]):null,'gatewaySettings':_0x591187[_0x16d058(0x17e)]?JSON[_0x16d058(0x199)](_0x591187['gatewaySettings']):null,'publicKey':_0x591187['publicKey'],'wallets':{'usdtPolygonWallet':_0x591187[_0x16d058(0x180)],'usdtTrcWallet':_0x591187[_0x16d058(0x1b3)],'usdtErcWallet':_0x591187['usdtErcWallet'],'usdcPolygonWallet':_0x591187[_0x16d058(0x1b4)]},'status':_0x591187['status'],'createdAt':_0x591187[_0x16d058(0x1a5)]};}async[a89_0x494d64(0x19b)](_0x32be50){const _0x1cd97f=a89_0x494d64;await database_1['default'][_0x1cd97f(0x1af)][_0x1cd97f(0x190)]({'where':{'id':_0x32be50}});}}exports['UserService']=UserService;