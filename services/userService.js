'use strict';function a76_0x3ca9(_0x4b2de4,_0x1633dc){_0x4b2de4=_0x4b2de4-0x1f3;const _0x46f156=a76_0x46f1();let _0x3ca99d=_0x46f156[_0x4b2de4];return _0x3ca99d;}const a76_0x54b8d5=a76_0x3ca9;(function(_0x3f4689,_0x212576){const _0x9ff106=a76_0x3ca9,_0x113cea=_0x3f4689();while(!![]){try{const _0x1a7697=parseInt(_0x9ff106(0x21a))/0x1+-parseInt(_0x9ff106(0x208))/0x2*(-parseInt(_0x9ff106(0x1f9))/0x3)+parseInt(_0x9ff106(0x219))/0x4*(-parseInt(_0x9ff106(0x229))/0x5)+-parseInt(_0x9ff106(0x202))/0x6+-parseInt(_0x9ff106(0x226))/0x7+parseInt(_0x9ff106(0x1f3))/0x8+parseInt(_0x9ff106(0x205))/0x9;if(_0x1a7697===_0x212576)break;else _0x113cea['push'](_0x113cea['shift']());}catch(_0x10e564){_0x113cea['push'](_0x113cea['shift']());}}}(a76_0x46f1,0x96c27));var __importDefault=this&&this[a76_0x54b8d5(0x214)]||function(_0x5612cc){return _0x5612cc&&_0x5612cc['__esModule']?_0x5612cc:{'default':_0x5612cc};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a76_0x54b8d5(0x21c)]=void 0x0;const bcryptjs_1=__importDefault(require(a76_0x54b8d5(0x20e))),crypto_1=__importDefault(require(a76_0x54b8d5(0x217))),database_1=__importDefault(require(a76_0x54b8d5(0x1ff)));class UserService{[a76_0x54b8d5(0x211)](){const _0x266be1=a76_0x54b8d5,_0x3b2cb6='pk_'+crypto_1[_0x266be1(0x20d)][_0x266be1(0x209)](0x20)[_0x266be1(0x215)]('hex'),_0x155736=_0x266be1(0x22a)+crypto_1['default'][_0x266be1(0x209)](0x20)['toString'](_0x266be1(0x227));return{'publicKey':_0x3b2cb6,'secretKey':_0x155736};}async[a76_0x54b8d5(0x1f6)](_0x35ba03){const _0x2183e0=a76_0x54b8d5,{fullName:_0x32ed93,username:_0x362804,password:_0x1066ac,telegramId:_0x4a4fcd,merchantUrl:_0x3fc992,gateways:_0x37cf03,gatewaySettings:_0x266eb4,wallets:_0x33d90c}=_0x35ba03,_0x1d71ef=await database_1[_0x2183e0(0x20d)]['shop']['findUnique']({'where':{'username':_0x362804}});if(_0x1d71ef)throw new Error(_0x2183e0(0x216));if(_0x4a4fcd){const _0xfd7c3d=await database_1[_0x2183e0(0x20d)][_0x2183e0(0x1fa)][_0x2183e0(0x207)]({'where':{'telegram':_0x4a4fcd}});if(_0xfd7c3d)throw new Error(_0x2183e0(0x22b));}const _0x766fb5=await bcryptjs_1['default'][_0x2183e0(0x1f4)](_0x1066ac,0xc),{publicKey:_0x3ef96d,secretKey:_0x835f00}=this[_0x2183e0(0x211)](),_0x297a77=await database_1[_0x2183e0(0x20d)][_0x2183e0(0x1fa)][_0x2183e0(0x1f7)]({'data':{'name':_0x32ed93,'username':_0x362804,'password':_0x766fb5,'telegram':_0x4a4fcd,'shopUrl':_0x3fc992,'paymentGateways':_0x37cf03?JSON[_0x2183e0(0x21d)](_0x37cf03):null,'gatewaySettings':_0x266eb4?JSON['stringify'](_0x266eb4):null,'usdtPolygonWallet':_0x33d90c?.[_0x2183e0(0x1fc)]||null,'usdtTrcWallet':_0x33d90c?.[_0x2183e0(0x21e)]||null,'usdtErcWallet':_0x33d90c?.[_0x2183e0(0x225)]||null,'usdcPolygonWallet':_0x33d90c?.[_0x2183e0(0x21b)]||null,'publicKey':_0x3ef96d,'secretKey':_0x835f00,'status':_0x2183e0(0x221)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x297a77['id'],'fullName':_0x297a77[_0x2183e0(0x1f5)],'username':_0x297a77['username'],'telegramId':_0x297a77[_0x2183e0(0x218)],'merchantUrl':_0x297a77[_0x2183e0(0x1f8)],'gateways':_0x297a77[_0x2183e0(0x1fd)]?JSON[_0x2183e0(0x1fe)](_0x297a77[_0x2183e0(0x1fd)]):null,'gatewaySettings':_0x297a77[_0x2183e0(0x204)]?JSON[_0x2183e0(0x1fe)](_0x297a77[_0x2183e0(0x204)]):null,'publicKey':_0x297a77['publicKey'],'wallets':{'usdtPolygonWallet':_0x297a77[_0x2183e0(0x1fc)],'usdtTrcWallet':_0x297a77[_0x2183e0(0x21e)],'usdtErcWallet':_0x297a77['usdtErcWallet'],'usdcPolygonWallet':_0x297a77[_0x2183e0(0x21b)]},'status':_0x297a77[_0x2183e0(0x20c)],'createdAt':_0x297a77[_0x2183e0(0x200)]};}async[a76_0x54b8d5(0x203)](){const _0x2967b0=a76_0x54b8d5,_0x4ec39e=await database_1[_0x2967b0(0x20d)][_0x2967b0(0x1fa)][_0x2967b0(0x228)]({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':_0x2967b0(0x212)}});return _0x4ec39e[_0x2967b0(0x222)](_0x38decf=>({'id':_0x38decf['id'],'fullName':_0x38decf['name'],'username':_0x38decf['username'],'telegramId':_0x38decf[_0x2967b0(0x218)],'merchantUrl':_0x38decf[_0x2967b0(0x1f8)],'gateways':_0x38decf[_0x2967b0(0x1fd)]?JSON[_0x2967b0(0x1fe)](_0x38decf[_0x2967b0(0x1fd)]):null,'gatewaySettings':_0x38decf[_0x2967b0(0x204)]?JSON['parse'](_0x38decf[_0x2967b0(0x204)]):null,'publicKey':_0x38decf['publicKey'],'wallets':{'usdtPolygonWallet':_0x38decf['usdtPolygonWallet'],'usdtTrcWallet':_0x38decf[_0x2967b0(0x21e)],'usdtErcWallet':_0x38decf['usdtErcWallet'],'usdcPolygonWallet':_0x38decf[_0x2967b0(0x21b)]},'status':_0x38decf['status'],'createdAt':_0x38decf[_0x2967b0(0x200)]}));}async[a76_0x54b8d5(0x1fb)](_0xf4155f){const _0x27932c=a76_0x54b8d5,_0x3fae05=await database_1[_0x27932c(0x20d)][_0x27932c(0x1fa)]['findUnique']({'where':{'id':_0xf4155f},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x3fae05)return null;return{'id':_0x3fae05['id'],'fullName':_0x3fae05[_0x27932c(0x1f5)],'username':_0x3fae05['username'],'telegramId':_0x3fae05[_0x27932c(0x218)],'merchantUrl':_0x3fae05[_0x27932c(0x1f8)],'gateways':_0x3fae05[_0x27932c(0x1fd)]?JSON['parse'](_0x3fae05[_0x27932c(0x1fd)]):null,'gatewaySettings':_0x3fae05[_0x27932c(0x204)]?JSON[_0x27932c(0x1fe)](_0x3fae05[_0x27932c(0x204)]):null,'publicKey':_0x3fae05['publicKey'],'wallets':{'usdtPolygonWallet':_0x3fae05[_0x27932c(0x1fc)],'usdtTrcWallet':_0x3fae05[_0x27932c(0x21e)],'usdtErcWallet':_0x3fae05[_0x27932c(0x225)],'usdcPolygonWallet':_0x3fae05['usdcPolygonWallet']},'status':_0x3fae05[_0x27932c(0x20c)],'createdAt':_0x3fae05[_0x27932c(0x200)]};}async['updateUser'](_0x517cfd,_0x1017e0){const _0x34870a=a76_0x54b8d5,_0x438884={..._0x1017e0};_0x1017e0[_0x34870a(0x20b)]&&(_0x438884[_0x34870a(0x20b)]=await bcryptjs_1[_0x34870a(0x20d)][_0x34870a(0x1f4)](_0x1017e0[_0x34870a(0x20b)],0xc));_0x1017e0[_0x34870a(0x20a)]&&(_0x438884[_0x34870a(0x1f5)]=_0x1017e0[_0x34870a(0x20a)],delete _0x438884[_0x34870a(0x20a)]);_0x1017e0['telegramId']&&(_0x438884[_0x34870a(0x218)]=_0x1017e0[_0x34870a(0x206)],delete _0x438884['telegramId']);_0x1017e0['merchantUrl']&&(_0x438884['shopUrl']=_0x1017e0[_0x34870a(0x213)],delete _0x438884[_0x34870a(0x213)]);_0x1017e0[_0x34870a(0x210)]&&(_0x438884[_0x34870a(0x1fd)]=JSON['stringify'](_0x1017e0['gateways']),delete _0x438884['gateways']);_0x1017e0[_0x34870a(0x204)]&&(_0x438884[_0x34870a(0x204)]=JSON[_0x34870a(0x21d)](_0x1017e0['gatewaySettings']),delete _0x438884[_0x34870a(0x204)]);_0x1017e0[_0x34870a(0x201)]&&(_0x1017e0[_0x34870a(0x201)][_0x34870a(0x1fc)]!==undefined&&(_0x438884[_0x34870a(0x1fc)]=_0x1017e0[_0x34870a(0x201)][_0x34870a(0x1fc)]||null),_0x1017e0['wallets']['usdtTrcWallet']!==undefined&&(_0x438884['usdtTrcWallet']=_0x1017e0[_0x34870a(0x201)][_0x34870a(0x21e)]||null),_0x1017e0[_0x34870a(0x201)]['usdtErcWallet']!==undefined&&(_0x438884[_0x34870a(0x225)]=_0x1017e0['wallets'][_0x34870a(0x225)]||null),_0x1017e0[_0x34870a(0x201)][_0x34870a(0x21b)]!==undefined&&(_0x438884[_0x34870a(0x21b)]=_0x1017e0[_0x34870a(0x201)]['usdcPolygonWallet']||null),delete _0x438884[_0x34870a(0x201)]);const _0x1b06aa=await database_1[_0x34870a(0x20d)][_0x34870a(0x1fa)][_0x34870a(0x220)]({'where':{'id':_0x517cfd},'data':_0x438884,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x1b06aa['id'],'fullName':_0x1b06aa[_0x34870a(0x1f5)],'username':_0x1b06aa[_0x34870a(0x21f)],'telegramId':_0x1b06aa['telegram'],'merchantUrl':_0x1b06aa['shopUrl'],'gateways':_0x1b06aa['paymentGateways']?JSON[_0x34870a(0x1fe)](_0x1b06aa[_0x34870a(0x1fd)]):null,'gatewaySettings':_0x1b06aa[_0x34870a(0x204)]?JSON[_0x34870a(0x1fe)](_0x1b06aa[_0x34870a(0x204)]):null,'publicKey':_0x1b06aa[_0x34870a(0x223)],'wallets':{'usdtPolygonWallet':_0x1b06aa[_0x34870a(0x1fc)],'usdtTrcWallet':_0x1b06aa[_0x34870a(0x21e)],'usdtErcWallet':_0x1b06aa[_0x34870a(0x225)],'usdcPolygonWallet':_0x1b06aa[_0x34870a(0x21b)]},'status':_0x1b06aa[_0x34870a(0x20c)],'createdAt':_0x1b06aa[_0x34870a(0x200)]};}async[a76_0x54b8d5(0x20f)](_0x521041){const _0x759e73=a76_0x54b8d5;await database_1[_0x759e73(0x20d)][_0x759e73(0x1fa)][_0x759e73(0x224)]({'where':{'id':_0x521041}});}}exports[a76_0x54b8d5(0x21c)]=UserService;function a76_0x46f1(){const _0x883283=['530lPyNvv','randomBytes','fullName','password','status','default','bcryptjs','deleteUser','gateways','generateApiKeys','desc','merchantUrl','__importDefault','toString','Username\x20already\x20exists','crypto','telegram','136nPQdfu','670583rPIYzl','usdcPolygonWallet','UserService','stringify','usdtTrcWallet','username','update','ACTIVE','map','publicKey','delete','usdtErcWallet','8102556YvRuok','hex','findMany','147195KYfFBX','sk_','Telegram\x20username\x20already\x20exists','9750336BbJSwx','hash','name','createUser','create','shopUrl','633tCqNHw','shop','getUserById','usdtPolygonWallet','paymentGateways','parse','../config/database','createdAt','wallets','6339714hpFMUA','getAllUsers','gatewaySettings','16985466krIBwc','telegramId','findUnique'];a76_0x46f1=function(){return _0x883283;};return a76_0x46f1();}