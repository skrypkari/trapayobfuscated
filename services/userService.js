'use strict';const a51_0x3dae2a=a51_0x4355;(function(_0x347cd7,_0x2430e9){const _0x158271=a51_0x4355,_0x1126c1=_0x347cd7();while(!![]){try{const _0x1a39d1=parseInt(_0x158271(0x91))/0x1+parseInt(_0x158271(0x8a))/0x2+-parseInt(_0x158271(0xa7))/0x3*(-parseInt(_0x158271(0x9a))/0x4)+parseInt(_0x158271(0xa0))/0x5+-parseInt(_0x158271(0x9e))/0x6*(-parseInt(_0x158271(0x9c))/0x7)+-parseInt(_0x158271(0x95))/0x8*(parseInt(_0x158271(0xa4))/0x9)+-parseInt(_0x158271(0xb8))/0xa*(parseInt(_0x158271(0xb9))/0xb);if(_0x1a39d1===_0x2430e9)break;else _0x1126c1['push'](_0x1126c1['shift']());}catch(_0x1f3aef){_0x1126c1['push'](_0x1126c1['shift']());}}}(a51_0x41a3,0xef7e2));var __importDefault=this&&this[a51_0x3dae2a(0xaa)]||function(_0x474de8){const _0x164a34=a51_0x3dae2a;return _0x474de8&&_0x474de8[_0x164a34(0xaf)]?_0x474de8:{'default':_0x474de8};};Object['defineProperty'](exports,a51_0x3dae2a(0xaf),{'value':!![]}),exports[a51_0x3dae2a(0x94)]=void 0x0;function a51_0x4355(_0x54bce0,_0x112e91){const _0x41a3da=a51_0x41a3();return a51_0x4355=function(_0x435550,_0x5cdf88){_0x435550=_0x435550-0x89;let _0x1ef698=_0x41a3da[_0x435550];return _0x1ef698;},a51_0x4355(_0x54bce0,_0x112e91);}const bcryptjs_1=__importDefault(require(a51_0x3dae2a(0x90))),crypto_1=__importDefault(require(a51_0x3dae2a(0xae))),database_1=__importDefault(require('../config/database'));function a51_0x41a3(){const _0x49fcd2=['stringify','776NKAvyW','getAllUsers','134351emsqYB','publicKey','30EfJtmI','Username\x20already\x20exists','6034785TEzvde','ACTIVE','parse','hex','9ycCIXK','gatewaySettings','usdtErcWallet','20409qJKsDH','usdtPolygonWallet','hash','__importDefault','create','updateUser','shopUrl','crypto','__esModule','findMany','default','status','desc','update','fullName','shop','map','1707350kVgvnu','220DZTxVV','findUnique','Telegram\x20username\x20already\x20exists','wallets','username','createUser','generateApiKeys','pk_','usdcPolygonWallet','paymentGateways','merchantUrl','randomBytes','2207978KMVpGI','sk_','toString','usdtTrcWallet','telegramId','delete','bcryptjs','817076GzmPfK','password','createdAt','UserService','1184856BjwCwg','name','telegram','deleteUser'];a51_0x41a3=function(){return _0x49fcd2;};return a51_0x41a3();}class UserService{[a51_0x3dae2a(0xbf)](){const _0x1c07e2=a51_0x3dae2a,_0x29dd2d=_0x1c07e2(0xc0)+crypto_1[_0x1c07e2(0xb1)][_0x1c07e2(0x89)](0x20)[_0x1c07e2(0x8c)](_0x1c07e2(0xa3)),_0x142f66=_0x1c07e2(0x8b)+crypto_1[_0x1c07e2(0xb1)][_0x1c07e2(0x89)](0x20)[_0x1c07e2(0x8c)]('hex');return{'publicKey':_0x29dd2d,'secretKey':_0x142f66};}async[a51_0x3dae2a(0xbe)](_0x35f82a){const _0x1aa2ef=a51_0x3dae2a,{fullName:_0x5181c5,username:_0x135de7,password:_0x489f30,telegramId:_0x54ac78,merchantUrl:_0x5267a4,gateways:_0xb220fc,gatewaySettings:_0x5f2834,wallets:_0x17cef9}=_0x35f82a,_0x51f211=await database_1['default'][_0x1aa2ef(0xb6)]['findUnique']({'where':{'username':_0x135de7}});if(_0x51f211)throw new Error(_0x1aa2ef(0x9f));if(_0x54ac78){const _0xc2a41a=await database_1[_0x1aa2ef(0xb1)][_0x1aa2ef(0xb6)][_0x1aa2ef(0xba)]({'where':{'telegram':_0x54ac78}});if(_0xc2a41a)throw new Error(_0x1aa2ef(0xbb));}const _0x2af28e=await bcryptjs_1[_0x1aa2ef(0xb1)][_0x1aa2ef(0xa9)](_0x489f30,0xc),{publicKey:_0x47183b,secretKey:_0x57c247}=this[_0x1aa2ef(0xbf)](),_0x27c587=await database_1[_0x1aa2ef(0xb1)]['shop'][_0x1aa2ef(0xab)]({'data':{'name':_0x5181c5,'username':_0x135de7,'password':_0x2af28e,'telegram':_0x54ac78,'shopUrl':_0x5267a4,'paymentGateways':_0xb220fc?JSON[_0x1aa2ef(0x99)](_0xb220fc):null,'gatewaySettings':_0x5f2834?JSON[_0x1aa2ef(0x99)](_0x5f2834):null,'usdtPolygonWallet':_0x17cef9?.[_0x1aa2ef(0xa8)]||null,'usdtTrcWallet':_0x17cef9?.[_0x1aa2ef(0x8d)]||null,'usdtErcWallet':_0x17cef9?.['usdtErcWallet']||null,'usdcPolygonWallet':_0x17cef9?.['usdcPolygonWallet']||null,'publicKey':_0x47183b,'secretKey':_0x57c247,'status':_0x1aa2ef(0xa1)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x27c587['id'],'fullName':_0x27c587[_0x1aa2ef(0x96)],'username':_0x27c587[_0x1aa2ef(0xbd)],'telegramId':_0x27c587[_0x1aa2ef(0x97)],'merchantUrl':_0x27c587['shopUrl'],'gateways':_0x27c587[_0x1aa2ef(0xc2)]?JSON[_0x1aa2ef(0xa2)](_0x27c587[_0x1aa2ef(0xc2)]):null,'gatewaySettings':_0x27c587[_0x1aa2ef(0xa5)]?JSON['parse'](_0x27c587['gatewaySettings']):null,'publicKey':_0x27c587[_0x1aa2ef(0x9d)],'wallets':{'usdtPolygonWallet':_0x27c587[_0x1aa2ef(0xa8)],'usdtTrcWallet':_0x27c587[_0x1aa2ef(0x8d)],'usdtErcWallet':_0x27c587[_0x1aa2ef(0xa6)],'usdcPolygonWallet':_0x27c587[_0x1aa2ef(0xc1)]},'status':_0x27c587[_0x1aa2ef(0xb2)],'createdAt':_0x27c587['createdAt']};}async[a51_0x3dae2a(0x9b)](){const _0x54d015=a51_0x3dae2a,_0x3e9124=await database_1[_0x54d015(0xb1)]['shop'][_0x54d015(0xb0)]({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':_0x54d015(0xb3)}});return _0x3e9124[_0x54d015(0xb7)](_0x4ab79a=>({'id':_0x4ab79a['id'],'fullName':_0x4ab79a['name'],'username':_0x4ab79a['username'],'telegramId':_0x4ab79a['telegram'],'merchantUrl':_0x4ab79a['shopUrl'],'gateways':_0x4ab79a[_0x54d015(0xc2)]?JSON['parse'](_0x4ab79a[_0x54d015(0xc2)]):null,'gatewaySettings':_0x4ab79a[_0x54d015(0xa5)]?JSON['parse'](_0x4ab79a[_0x54d015(0xa5)]):null,'publicKey':_0x4ab79a[_0x54d015(0x9d)],'wallets':{'usdtPolygonWallet':_0x4ab79a['usdtPolygonWallet'],'usdtTrcWallet':_0x4ab79a['usdtTrcWallet'],'usdtErcWallet':_0x4ab79a[_0x54d015(0xa6)],'usdcPolygonWallet':_0x4ab79a[_0x54d015(0xc1)]},'status':_0x4ab79a[_0x54d015(0xb2)],'createdAt':_0x4ab79a[_0x54d015(0x93)]}));}async['getUserById'](_0x192ebc){const _0x42df73=a51_0x3dae2a,_0x32fbb5=await database_1[_0x42df73(0xb1)][_0x42df73(0xb6)][_0x42df73(0xba)]({'where':{'id':_0x192ebc},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x32fbb5)return null;return{'id':_0x32fbb5['id'],'fullName':_0x32fbb5[_0x42df73(0x96)],'username':_0x32fbb5[_0x42df73(0xbd)],'telegramId':_0x32fbb5[_0x42df73(0x97)],'merchantUrl':_0x32fbb5[_0x42df73(0xad)],'gateways':_0x32fbb5[_0x42df73(0xc2)]?JSON[_0x42df73(0xa2)](_0x32fbb5['paymentGateways']):null,'gatewaySettings':_0x32fbb5[_0x42df73(0xa5)]?JSON['parse'](_0x32fbb5[_0x42df73(0xa5)]):null,'publicKey':_0x32fbb5[_0x42df73(0x9d)],'wallets':{'usdtPolygonWallet':_0x32fbb5[_0x42df73(0xa8)],'usdtTrcWallet':_0x32fbb5[_0x42df73(0x8d)],'usdtErcWallet':_0x32fbb5[_0x42df73(0xa6)],'usdcPolygonWallet':_0x32fbb5[_0x42df73(0xc1)]},'status':_0x32fbb5['status'],'createdAt':_0x32fbb5['createdAt']};}async[a51_0x3dae2a(0xac)](_0x4bac16,_0x2ab964){const _0x4c3062=a51_0x3dae2a,_0x1613ae={..._0x2ab964};_0x2ab964[_0x4c3062(0x92)]&&(_0x1613ae['password']=await bcryptjs_1['default']['hash'](_0x2ab964['password'],0xc));_0x2ab964[_0x4c3062(0xb5)]&&(_0x1613ae[_0x4c3062(0x96)]=_0x2ab964[_0x4c3062(0xb5)],delete _0x1613ae[_0x4c3062(0xb5)]);_0x2ab964[_0x4c3062(0x8e)]&&(_0x1613ae['telegram']=_0x2ab964['telegramId'],delete _0x1613ae[_0x4c3062(0x8e)]);_0x2ab964[_0x4c3062(0xc3)]&&(_0x1613ae['shopUrl']=_0x2ab964[_0x4c3062(0xc3)],delete _0x1613ae['merchantUrl']);_0x2ab964['gateways']&&(_0x1613ae['paymentGateways']=JSON['stringify'](_0x2ab964['gateways']),delete _0x1613ae['gateways']);_0x2ab964['gatewaySettings']&&(_0x1613ae[_0x4c3062(0xa5)]=JSON[_0x4c3062(0x99)](_0x2ab964['gatewaySettings']),delete _0x1613ae[_0x4c3062(0xa5)]);_0x2ab964[_0x4c3062(0xbc)]&&(_0x2ab964[_0x4c3062(0xbc)][_0x4c3062(0xa8)]!==undefined&&(_0x1613ae[_0x4c3062(0xa8)]=_0x2ab964[_0x4c3062(0xbc)][_0x4c3062(0xa8)]||null),_0x2ab964[_0x4c3062(0xbc)][_0x4c3062(0x8d)]!==undefined&&(_0x1613ae['usdtTrcWallet']=_0x2ab964[_0x4c3062(0xbc)][_0x4c3062(0x8d)]||null),_0x2ab964[_0x4c3062(0xbc)][_0x4c3062(0xa6)]!==undefined&&(_0x1613ae[_0x4c3062(0xa6)]=_0x2ab964['wallets'][_0x4c3062(0xa6)]||null),_0x2ab964[_0x4c3062(0xbc)][_0x4c3062(0xc1)]!==undefined&&(_0x1613ae['usdcPolygonWallet']=_0x2ab964[_0x4c3062(0xbc)][_0x4c3062(0xc1)]||null),delete _0x1613ae[_0x4c3062(0xbc)]);const _0x9d276d=await database_1[_0x4c3062(0xb1)][_0x4c3062(0xb6)][_0x4c3062(0xb4)]({'where':{'id':_0x4bac16},'data':_0x1613ae,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x9d276d['id'],'fullName':_0x9d276d['name'],'username':_0x9d276d[_0x4c3062(0xbd)],'telegramId':_0x9d276d[_0x4c3062(0x97)],'merchantUrl':_0x9d276d['shopUrl'],'gateways':_0x9d276d[_0x4c3062(0xc2)]?JSON['parse'](_0x9d276d[_0x4c3062(0xc2)]):null,'gatewaySettings':_0x9d276d[_0x4c3062(0xa5)]?JSON[_0x4c3062(0xa2)](_0x9d276d['gatewaySettings']):null,'publicKey':_0x9d276d['publicKey'],'wallets':{'usdtPolygonWallet':_0x9d276d[_0x4c3062(0xa8)],'usdtTrcWallet':_0x9d276d['usdtTrcWallet'],'usdtErcWallet':_0x9d276d[_0x4c3062(0xa6)],'usdcPolygonWallet':_0x9d276d[_0x4c3062(0xc1)]},'status':_0x9d276d['status'],'createdAt':_0x9d276d[_0x4c3062(0x93)]};}async[a51_0x3dae2a(0x98)](_0x28cfb1){const _0x561552=a51_0x3dae2a;await database_1['default']['shop'][_0x561552(0x8f)]({'where':{'id':_0x28cfb1}});}}exports[a51_0x3dae2a(0x94)]=UserService;