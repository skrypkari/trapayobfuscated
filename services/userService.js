'use strict';const a56_0x4be303=a56_0x520e;(function(_0x5c55f4,_0x31dee1){const _0x38d0b4=a56_0x520e,_0x1ab11c=_0x5c55f4();while(!![]){try{const _0x3eaeb7=-parseInt(_0x38d0b4(0xbf))/0x1+parseInt(_0x38d0b4(0xd7))/0x2+parseInt(_0x38d0b4(0xde))/0x3+-parseInt(_0x38d0b4(0xbd))/0x4+-parseInt(_0x38d0b4(0xc1))/0x5+-parseInt(_0x38d0b4(0xd3))/0x6*(-parseInt(_0x38d0b4(0xba))/0x7)+-parseInt(_0x38d0b4(0xae))/0x8*(-parseInt(_0x38d0b4(0xdd))/0x9);if(_0x3eaeb7===_0x31dee1)break;else _0x1ab11c['push'](_0x1ab11c['shift']());}catch(_0x203228){_0x1ab11c['push'](_0x1ab11c['shift']());}}}(a56_0x6601,0x65a2e));function a56_0x520e(_0x5ecc88,_0x552b10){const _0x66019c=a56_0x6601();return a56_0x520e=function(_0x520ede,_0x514f25){_0x520ede=_0x520ede-0xa8;let _0x369878=_0x66019c[_0x520ede];return _0x369878;},a56_0x520e(_0x5ecc88,_0x552b10);}var __importDefault=this&&this[a56_0x4be303(0xd4)]||function(_0x796053){return _0x796053&&_0x796053['__esModule']?_0x796053:{'default':_0x796053};};function a56_0x6601(){const _0x2c36ad=['default','deleteUser','55398pzoZZB','__importDefault','createUser','getAllUsers','972876AeiRwt','toString','create','createdAt','delete','usdtPolygonWallet','9fwhbcx','691920xDceFL','hex','usdcPolygonWallet','sk_','hash','usdtErcWallet','generateApiKeys','6756368ieJyok','shopUrl','updateUser','name','wallets','paymentGateways','pk_','gateways','update','gatewaySettings','usdtTrcWallet','crypto','343sJFsGb','randomBytes','fullName','2761128OFWSAH','bcryptjs','725607Ftyrfi','merchantUrl','909250iHYeSd','parse','Username\x20already\x20exists','findUnique','UserService','username','stringify','map','telegram','publicKey','telegramId','shop','status','findMany','password','getUserById'];a56_0x6601=function(){return _0x2c36ad;};return a56_0x6601();}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['UserService']=void 0x0;const bcryptjs_1=__importDefault(require(a56_0x4be303(0xbe))),crypto_1=__importDefault(require(a56_0x4be303(0xb9))),database_1=__importDefault(require('../config/database'));class UserService{[a56_0x4be303(0xad)](){const _0x4e9f3a=a56_0x4be303,_0x1a017c=_0x4e9f3a(0xb4)+crypto_1[_0x4e9f3a(0xd1)][_0x4e9f3a(0xbb)](0x20)['toString'](_0x4e9f3a(0xa8)),_0x3a6129=_0x4e9f3a(0xaa)+crypto_1[_0x4e9f3a(0xd1)][_0x4e9f3a(0xbb)](0x20)[_0x4e9f3a(0xd8)](_0x4e9f3a(0xa8));return{'publicKey':_0x1a017c,'secretKey':_0x3a6129};}async[a56_0x4be303(0xd5)](_0x252a0b){const _0x375c74=a56_0x4be303,{fullName:_0x43c7df,username:_0x5bc3fd,password:_0x4fb35c,telegramId:_0x333c60,merchantUrl:_0x2f0963,gateways:_0x141935,gatewaySettings:_0x534193,wallets:_0x2f2222}=_0x252a0b,_0x2be1c9=await database_1[_0x375c74(0xd1)][_0x375c74(0xcc)]['findUnique']({'where':{'username':_0x5bc3fd}});if(_0x2be1c9)throw new Error(_0x375c74(0xc3));if(_0x333c60){const _0xb565a0=await database_1[_0x375c74(0xd1)]['shop'][_0x375c74(0xc4)]({'where':{'telegram':_0x333c60}});if(_0xb565a0)throw new Error('Telegram\x20username\x20already\x20exists');}const _0x531ade=await bcryptjs_1[_0x375c74(0xd1)][_0x375c74(0xab)](_0x4fb35c,0xc),{publicKey:_0x52b840,secretKey:_0x4c975e}=this[_0x375c74(0xad)](),_0x5487db=await database_1[_0x375c74(0xd1)]['shop'][_0x375c74(0xd9)]({'data':{'name':_0x43c7df,'username':_0x5bc3fd,'password':_0x531ade,'telegram':_0x333c60,'shopUrl':_0x2f0963,'paymentGateways':_0x141935?JSON['stringify'](_0x141935):null,'gatewaySettings':_0x534193?JSON['stringify'](_0x534193):null,'usdtPolygonWallet':_0x2f2222?.[_0x375c74(0xdc)]||null,'usdtTrcWallet':_0x2f2222?.[_0x375c74(0xb8)]||null,'usdtErcWallet':_0x2f2222?.['usdtErcWallet']||null,'usdcPolygonWallet':_0x2f2222?.[_0x375c74(0xa9)]||null,'publicKey':_0x52b840,'secretKey':_0x4c975e,'status':'ACTIVE'},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x5487db['id'],'fullName':_0x5487db[_0x375c74(0xb1)],'username':_0x5487db['username'],'telegramId':_0x5487db[_0x375c74(0xc9)],'merchantUrl':_0x5487db[_0x375c74(0xaf)],'gateways':_0x5487db[_0x375c74(0xb3)]?JSON[_0x375c74(0xc2)](_0x5487db[_0x375c74(0xb3)]):null,'gatewaySettings':_0x5487db['gatewaySettings']?JSON[_0x375c74(0xc2)](_0x5487db['gatewaySettings']):null,'publicKey':_0x5487db[_0x375c74(0xca)],'wallets':{'usdtPolygonWallet':_0x5487db[_0x375c74(0xdc)],'usdtTrcWallet':_0x5487db[_0x375c74(0xb8)],'usdtErcWallet':_0x5487db[_0x375c74(0xac)],'usdcPolygonWallet':_0x5487db[_0x375c74(0xa9)]},'status':_0x5487db['status'],'createdAt':_0x5487db[_0x375c74(0xda)]};}async[a56_0x4be303(0xd6)](){const _0x159fd6=a56_0x4be303,_0x695a82=await database_1['default'][_0x159fd6(0xcc)][_0x159fd6(0xce)]({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':'desc'}});return _0x695a82[_0x159fd6(0xc8)](_0x38d84a=>({'id':_0x38d84a['id'],'fullName':_0x38d84a['name'],'username':_0x38d84a[_0x159fd6(0xc6)],'telegramId':_0x38d84a['telegram'],'merchantUrl':_0x38d84a[_0x159fd6(0xaf)],'gateways':_0x38d84a[_0x159fd6(0xb3)]?JSON[_0x159fd6(0xc2)](_0x38d84a[_0x159fd6(0xb3)]):null,'gatewaySettings':_0x38d84a[_0x159fd6(0xb7)]?JSON[_0x159fd6(0xc2)](_0x38d84a[_0x159fd6(0xb7)]):null,'publicKey':_0x38d84a[_0x159fd6(0xca)],'wallets':{'usdtPolygonWallet':_0x38d84a[_0x159fd6(0xdc)],'usdtTrcWallet':_0x38d84a[_0x159fd6(0xb8)],'usdtErcWallet':_0x38d84a[_0x159fd6(0xac)],'usdcPolygonWallet':_0x38d84a['usdcPolygonWallet']},'status':_0x38d84a['status'],'createdAt':_0x38d84a['createdAt']}));}async[a56_0x4be303(0xd0)](_0x150e5a){const _0x46348d=a56_0x4be303,_0x20a684=await database_1['default'][_0x46348d(0xcc)][_0x46348d(0xc4)]({'where':{'id':_0x150e5a},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x20a684)return null;return{'id':_0x20a684['id'],'fullName':_0x20a684[_0x46348d(0xb1)],'username':_0x20a684[_0x46348d(0xc6)],'telegramId':_0x20a684[_0x46348d(0xc9)],'merchantUrl':_0x20a684[_0x46348d(0xaf)],'gateways':_0x20a684[_0x46348d(0xb3)]?JSON[_0x46348d(0xc2)](_0x20a684[_0x46348d(0xb3)]):null,'gatewaySettings':_0x20a684[_0x46348d(0xb7)]?JSON[_0x46348d(0xc2)](_0x20a684[_0x46348d(0xb7)]):null,'publicKey':_0x20a684[_0x46348d(0xca)],'wallets':{'usdtPolygonWallet':_0x20a684[_0x46348d(0xdc)],'usdtTrcWallet':_0x20a684['usdtTrcWallet'],'usdtErcWallet':_0x20a684['usdtErcWallet'],'usdcPolygonWallet':_0x20a684[_0x46348d(0xa9)]},'status':_0x20a684[_0x46348d(0xcd)],'createdAt':_0x20a684['createdAt']};}async[a56_0x4be303(0xb0)](_0x549da9,_0x3102fb){const _0x4dec94=a56_0x4be303,_0x4e23b1={..._0x3102fb};_0x3102fb[_0x4dec94(0xcf)]&&(_0x4e23b1['password']=await bcryptjs_1[_0x4dec94(0xd1)][_0x4dec94(0xab)](_0x3102fb['password'],0xc));_0x3102fb[_0x4dec94(0xbc)]&&(_0x4e23b1[_0x4dec94(0xb1)]=_0x3102fb[_0x4dec94(0xbc)],delete _0x4e23b1[_0x4dec94(0xbc)]);_0x3102fb[_0x4dec94(0xcb)]&&(_0x4e23b1['telegram']=_0x3102fb[_0x4dec94(0xcb)],delete _0x4e23b1[_0x4dec94(0xcb)]);_0x3102fb[_0x4dec94(0xc0)]&&(_0x4e23b1['shopUrl']=_0x3102fb['merchantUrl'],delete _0x4e23b1['merchantUrl']);_0x3102fb[_0x4dec94(0xb5)]&&(_0x4e23b1[_0x4dec94(0xb3)]=JSON['stringify'](_0x3102fb[_0x4dec94(0xb5)]),delete _0x4e23b1[_0x4dec94(0xb5)]);_0x3102fb[_0x4dec94(0xb7)]&&(_0x4e23b1[_0x4dec94(0xb7)]=JSON[_0x4dec94(0xc7)](_0x3102fb['gatewaySettings']),delete _0x4e23b1[_0x4dec94(0xb7)]);_0x3102fb[_0x4dec94(0xb2)]&&(_0x3102fb[_0x4dec94(0xb2)][_0x4dec94(0xdc)]!==undefined&&(_0x4e23b1['usdtPolygonWallet']=_0x3102fb['wallets'][_0x4dec94(0xdc)]||null),_0x3102fb[_0x4dec94(0xb2)][_0x4dec94(0xb8)]!==undefined&&(_0x4e23b1['usdtTrcWallet']=_0x3102fb[_0x4dec94(0xb2)]['usdtTrcWallet']||null),_0x3102fb['wallets']['usdtErcWallet']!==undefined&&(_0x4e23b1[_0x4dec94(0xac)]=_0x3102fb['wallets'][_0x4dec94(0xac)]||null),_0x3102fb['wallets'][_0x4dec94(0xa9)]!==undefined&&(_0x4e23b1[_0x4dec94(0xa9)]=_0x3102fb[_0x4dec94(0xb2)][_0x4dec94(0xa9)]||null),delete _0x4e23b1[_0x4dec94(0xb2)]);const _0x353b16=await database_1[_0x4dec94(0xd1)][_0x4dec94(0xcc)][_0x4dec94(0xb6)]({'where':{'id':_0x549da9},'data':_0x4e23b1,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x353b16['id'],'fullName':_0x353b16[_0x4dec94(0xb1)],'username':_0x353b16[_0x4dec94(0xc6)],'telegramId':_0x353b16[_0x4dec94(0xc9)],'merchantUrl':_0x353b16[_0x4dec94(0xaf)],'gateways':_0x353b16['paymentGateways']?JSON[_0x4dec94(0xc2)](_0x353b16['paymentGateways']):null,'gatewaySettings':_0x353b16['gatewaySettings']?JSON[_0x4dec94(0xc2)](_0x353b16[_0x4dec94(0xb7)]):null,'publicKey':_0x353b16[_0x4dec94(0xca)],'wallets':{'usdtPolygonWallet':_0x353b16[_0x4dec94(0xdc)],'usdtTrcWallet':_0x353b16[_0x4dec94(0xb8)],'usdtErcWallet':_0x353b16[_0x4dec94(0xac)],'usdcPolygonWallet':_0x353b16[_0x4dec94(0xa9)]},'status':_0x353b16['status'],'createdAt':_0x353b16['createdAt']};}async[a56_0x4be303(0xd2)](_0x58a051){const _0xc6f78=a56_0x4be303;await database_1['default'][_0xc6f78(0xcc)][_0xc6f78(0xdb)]({'where':{'id':_0x58a051}});}}exports[a56_0x4be303(0xc5)]=UserService;