'use strict';const a89_0x1ac481=a89_0x522b;(function(_0x881645,_0xbab153){const _0xd6ebfe=a89_0x522b,_0x35042f=_0x881645();while(!![]){try{const _0x50a87e=parseInt(_0xd6ebfe(0xd4))/0x1*(-parseInt(_0xd6ebfe(0xae))/0x2)+parseInt(_0xd6ebfe(0xbb))/0x3+parseInt(_0xd6ebfe(0xb4))/0x4+parseInt(_0xd6ebfe(0xc9))/0x5+-parseInt(_0xd6ebfe(0xda))/0x6*(-parseInt(_0xd6ebfe(0xbd))/0x7)+parseInt(_0xd6ebfe(0xd2))/0x8+parseInt(_0xd6ebfe(0xb7))/0x9*(-parseInt(_0xd6ebfe(0xd5))/0xa);if(_0x50a87e===_0xbab153)break;else _0x35042f['push'](_0x35042f['shift']());}catch(_0x34513c){_0x35042f['push'](_0x35042f['shift']());}}}(a89_0x2731,0x68592));function a89_0x2731(){const _0x34b935=['hex','delete','findMany','6HVGgIr','map','status','fullName','Telegram\x20username\x20already\x20exists','createdAt','shopUrl','publicKey','shop','gatewaySettings','usdcPolygonWallet','telegram','249294cPnubF','updateUser','password','stringify','getAllUsers','__esModule','2442060bdIKav','toString','wallets','14616wGFtbJ','telegramId','usdtTrcWallet','merchantUrl','415527KqifwB','name','5132827lAFNvz','paymentGateways','Username\x20already\x20exists','parse','usdtErcWallet','generateApiKeys','findUnique','username','default','randomBytes','ACTIVE','bcryptjs','3122825HyQlhS','crypto','createUser','update','hash','pk_','__importDefault','gateways','usdtPolygonWallet','5896736NbMSbo','../config/database','4iDfgio','11810EnrEDi','UserService'];a89_0x2731=function(){return _0x34b935;};return a89_0x2731();}var __importDefault=this&&this[a89_0x1ac481(0xcf)]||function(_0x258f05){const _0x4c6fea=a89_0x1ac481;return _0x258f05&&_0x258f05[_0x4c6fea(0xb3)]?_0x258f05:{'default':_0x258f05};};Object['defineProperty'](exports,a89_0x1ac481(0xb3),{'value':!![]}),exports[a89_0x1ac481(0xd6)]=void 0x0;const bcryptjs_1=__importDefault(require(a89_0x1ac481(0xc8))),crypto_1=__importDefault(require(a89_0x1ac481(0xca))),database_1=__importDefault(require(a89_0x1ac481(0xd3)));function a89_0x522b(_0x553ecb,_0x2902f4){_0x553ecb=_0x553ecb-0xab;const _0x273162=a89_0x2731();let _0x522bb5=_0x273162[_0x553ecb];return _0x522bb5;}class UserService{[a89_0x1ac481(0xc2)](){const _0x1f1f61=a89_0x1ac481,_0x3b860f=_0x1f1f61(0xce)+crypto_1[_0x1f1f61(0xc5)][_0x1f1f61(0xc6)](0x20)[_0x1f1f61(0xb5)](_0x1f1f61(0xd7)),_0x3e52df='sk_'+crypto_1['default'][_0x1f1f61(0xc6)](0x20)[_0x1f1f61(0xb5)](_0x1f1f61(0xd7));return{'publicKey':_0x3b860f,'secretKey':_0x3e52df};}async[a89_0x1ac481(0xcb)](_0x151e3d){const _0x3fce6b=a89_0x1ac481,{fullName:_0x486968,username:_0x4f9184,password:_0x5930c5,telegramId:_0x2ce3a3,merchantUrl:_0x4e4ee4,gateways:_0x18d62c,gatewaySettings:_0x332c6c,wallets:_0x177ee3}=_0x151e3d,_0x597ca8=await database_1[_0x3fce6b(0xc5)][_0x3fce6b(0xe2)][_0x3fce6b(0xc3)]({'where':{'username':_0x4f9184}});if(_0x597ca8)throw new Error(_0x3fce6b(0xbf));if(_0x2ce3a3){const _0x477e50=await database_1[_0x3fce6b(0xc5)][_0x3fce6b(0xe2)][_0x3fce6b(0xc3)]({'where':{'telegram':_0x2ce3a3}});if(_0x477e50)throw new Error(_0x3fce6b(0xde));}const _0x24cfa0=await bcryptjs_1[_0x3fce6b(0xc5)]['hash'](_0x5930c5,0xc),{publicKey:_0xe7307a,secretKey:_0x1687ca}=this[_0x3fce6b(0xc2)](),_0x1ef1a0=await database_1[_0x3fce6b(0xc5)]['shop']['create']({'data':{'name':_0x486968,'username':_0x4f9184,'password':_0x24cfa0,'telegram':_0x2ce3a3,'shopUrl':_0x4e4ee4,'paymentGateways':_0x18d62c?JSON[_0x3fce6b(0xb1)](_0x18d62c):null,'gatewaySettings':_0x332c6c?JSON['stringify'](_0x332c6c):null,'usdtPolygonWallet':_0x177ee3?.[_0x3fce6b(0xd1)]||null,'usdtTrcWallet':_0x177ee3?.[_0x3fce6b(0xb9)]||null,'usdtErcWallet':_0x177ee3?.[_0x3fce6b(0xc1)]||null,'usdcPolygonWallet':_0x177ee3?.[_0x3fce6b(0xac)]||null,'publicKey':_0xe7307a,'secretKey':_0x1687ca,'status':_0x3fce6b(0xc7)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x1ef1a0['id'],'fullName':_0x1ef1a0[_0x3fce6b(0xbc)],'username':_0x1ef1a0[_0x3fce6b(0xc4)],'telegramId':_0x1ef1a0[_0x3fce6b(0xad)],'merchantUrl':_0x1ef1a0[_0x3fce6b(0xe0)],'gateways':_0x1ef1a0[_0x3fce6b(0xbe)]?JSON[_0x3fce6b(0xc0)](_0x1ef1a0[_0x3fce6b(0xbe)]):null,'gatewaySettings':_0x1ef1a0[_0x3fce6b(0xab)]?JSON[_0x3fce6b(0xc0)](_0x1ef1a0[_0x3fce6b(0xab)]):null,'publicKey':_0x1ef1a0['publicKey'],'wallets':{'usdtPolygonWallet':_0x1ef1a0[_0x3fce6b(0xd1)],'usdtTrcWallet':_0x1ef1a0[_0x3fce6b(0xb9)],'usdtErcWallet':_0x1ef1a0[_0x3fce6b(0xc1)],'usdcPolygonWallet':_0x1ef1a0[_0x3fce6b(0xac)]},'status':_0x1ef1a0[_0x3fce6b(0xdc)],'createdAt':_0x1ef1a0[_0x3fce6b(0xdf)]};}async[a89_0x1ac481(0xb2)](){const _0x3913e3=a89_0x1ac481,_0x5d2cef=await database_1[_0x3913e3(0xc5)][_0x3913e3(0xe2)][_0x3913e3(0xd9)]({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':'desc'}});return _0x5d2cef[_0x3913e3(0xdb)](_0x4d2ebc=>({'id':_0x4d2ebc['id'],'fullName':_0x4d2ebc['name'],'username':_0x4d2ebc['username'],'telegramId':_0x4d2ebc[_0x3913e3(0xad)],'merchantUrl':_0x4d2ebc['shopUrl'],'gateways':_0x4d2ebc[_0x3913e3(0xbe)]?JSON[_0x3913e3(0xc0)](_0x4d2ebc[_0x3913e3(0xbe)]):null,'gatewaySettings':_0x4d2ebc['gatewaySettings']?JSON[_0x3913e3(0xc0)](_0x4d2ebc[_0x3913e3(0xab)]):null,'publicKey':_0x4d2ebc['publicKey'],'wallets':{'usdtPolygonWallet':_0x4d2ebc[_0x3913e3(0xd1)],'usdtTrcWallet':_0x4d2ebc[_0x3913e3(0xb9)],'usdtErcWallet':_0x4d2ebc[_0x3913e3(0xc1)],'usdcPolygonWallet':_0x4d2ebc[_0x3913e3(0xac)]},'status':_0x4d2ebc[_0x3913e3(0xdc)],'createdAt':_0x4d2ebc[_0x3913e3(0xdf)]}));}async['getUserById'](_0x23d81e){const _0x19e871=a89_0x1ac481,_0x435b4c=await database_1[_0x19e871(0xc5)]['shop'][_0x19e871(0xc3)]({'where':{'id':_0x23d81e},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x435b4c)return null;return{'id':_0x435b4c['id'],'fullName':_0x435b4c[_0x19e871(0xbc)],'username':_0x435b4c[_0x19e871(0xc4)],'telegramId':_0x435b4c[_0x19e871(0xad)],'merchantUrl':_0x435b4c[_0x19e871(0xe0)],'gateways':_0x435b4c[_0x19e871(0xbe)]?JSON[_0x19e871(0xc0)](_0x435b4c[_0x19e871(0xbe)]):null,'gatewaySettings':_0x435b4c[_0x19e871(0xab)]?JSON[_0x19e871(0xc0)](_0x435b4c['gatewaySettings']):null,'publicKey':_0x435b4c[_0x19e871(0xe1)],'wallets':{'usdtPolygonWallet':_0x435b4c['usdtPolygonWallet'],'usdtTrcWallet':_0x435b4c[_0x19e871(0xb9)],'usdtErcWallet':_0x435b4c['usdtErcWallet'],'usdcPolygonWallet':_0x435b4c['usdcPolygonWallet']},'status':_0x435b4c[_0x19e871(0xdc)],'createdAt':_0x435b4c[_0x19e871(0xdf)]};}async[a89_0x1ac481(0xaf)](_0x47ee67,_0x1f1c45){const _0x1f39aa=a89_0x1ac481,_0x2eea1c={..._0x1f1c45};_0x1f1c45[_0x1f39aa(0xb0)]&&(_0x2eea1c[_0x1f39aa(0xb0)]=await bcryptjs_1[_0x1f39aa(0xc5)][_0x1f39aa(0xcd)](_0x1f1c45['password'],0xc));_0x1f1c45[_0x1f39aa(0xdd)]&&(_0x2eea1c['name']=_0x1f1c45[_0x1f39aa(0xdd)],delete _0x2eea1c[_0x1f39aa(0xdd)]);_0x1f1c45['telegramId']&&(_0x2eea1c[_0x1f39aa(0xad)]=_0x1f1c45[_0x1f39aa(0xb8)],delete _0x2eea1c['telegramId']);_0x1f1c45[_0x1f39aa(0xba)]&&(_0x2eea1c['shopUrl']=_0x1f1c45[_0x1f39aa(0xba)],delete _0x2eea1c[_0x1f39aa(0xba)]);_0x1f1c45['gateways']&&(_0x2eea1c[_0x1f39aa(0xbe)]=JSON[_0x1f39aa(0xb1)](_0x1f1c45[_0x1f39aa(0xd0)]),delete _0x2eea1c[_0x1f39aa(0xd0)]);_0x1f1c45[_0x1f39aa(0xab)]&&(_0x2eea1c[_0x1f39aa(0xab)]=JSON[_0x1f39aa(0xb1)](_0x1f1c45[_0x1f39aa(0xab)]),delete _0x2eea1c['gatewaySettings']);_0x1f1c45['wallets']&&(_0x1f1c45[_0x1f39aa(0xb6)]['usdtPolygonWallet']!==undefined&&(_0x2eea1c['usdtPolygonWallet']=_0x1f1c45[_0x1f39aa(0xb6)][_0x1f39aa(0xd1)]||null),_0x1f1c45[_0x1f39aa(0xb6)][_0x1f39aa(0xb9)]!==undefined&&(_0x2eea1c[_0x1f39aa(0xb9)]=_0x1f1c45[_0x1f39aa(0xb6)][_0x1f39aa(0xb9)]||null),_0x1f1c45[_0x1f39aa(0xb6)][_0x1f39aa(0xc1)]!==undefined&&(_0x2eea1c[_0x1f39aa(0xc1)]=_0x1f1c45[_0x1f39aa(0xb6)][_0x1f39aa(0xc1)]||null),_0x1f1c45[_0x1f39aa(0xb6)][_0x1f39aa(0xac)]!==undefined&&(_0x2eea1c[_0x1f39aa(0xac)]=_0x1f1c45[_0x1f39aa(0xb6)][_0x1f39aa(0xac)]||null),delete _0x2eea1c[_0x1f39aa(0xb6)]);const _0x223497=await database_1[_0x1f39aa(0xc5)]['shop'][_0x1f39aa(0xcc)]({'where':{'id':_0x47ee67},'data':_0x2eea1c,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x223497['id'],'fullName':_0x223497[_0x1f39aa(0xbc)],'username':_0x223497[_0x1f39aa(0xc4)],'telegramId':_0x223497[_0x1f39aa(0xad)],'merchantUrl':_0x223497[_0x1f39aa(0xe0)],'gateways':_0x223497['paymentGateways']?JSON[_0x1f39aa(0xc0)](_0x223497[_0x1f39aa(0xbe)]):null,'gatewaySettings':_0x223497[_0x1f39aa(0xab)]?JSON[_0x1f39aa(0xc0)](_0x223497['gatewaySettings']):null,'publicKey':_0x223497[_0x1f39aa(0xe1)],'wallets':{'usdtPolygonWallet':_0x223497[_0x1f39aa(0xd1)],'usdtTrcWallet':_0x223497[_0x1f39aa(0xb9)],'usdtErcWallet':_0x223497[_0x1f39aa(0xc1)],'usdcPolygonWallet':_0x223497[_0x1f39aa(0xac)]},'status':_0x223497[_0x1f39aa(0xdc)],'createdAt':_0x223497[_0x1f39aa(0xdf)]};}async['deleteUser'](_0x18b00a){const _0x3c09da=a89_0x1ac481;await database_1[_0x3c09da(0xc5)]['shop'][_0x3c09da(0xd8)]({'where':{'id':_0x18b00a}});}}exports['UserService']=UserService;