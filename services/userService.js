'use strict';const a54_0x2c1132=a54_0x5e6f;(function(_0x4bbeac,_0x4a36a1){const _0x51493c=a54_0x5e6f,_0x2ad4d7=_0x4bbeac();while(!![]){try{const _0x253d41=-parseInt(_0x51493c(0x167))/0x1+parseInt(_0x51493c(0x18c))/0x2*(parseInt(_0x51493c(0x158))/0x3)+parseInt(_0x51493c(0x17b))/0x4+-parseInt(_0x51493c(0x16d))/0x5+-parseInt(_0x51493c(0x18d))/0x6*(parseInt(_0x51493c(0x182))/0x7)+-parseInt(_0x51493c(0x16f))/0x8*(-parseInt(_0x51493c(0x18b))/0x9)+parseInt(_0x51493c(0x18e))/0xa*(parseInt(_0x51493c(0x17f))/0xb);if(_0x253d41===_0x4a36a1)break;else _0x2ad4d7['push'](_0x2ad4d7['shift']());}catch(_0x13232c){_0x2ad4d7['push'](_0x2ad4d7['shift']());}}}(a54_0x4b93,0x8308c));var __importDefault=this&&this[a54_0x2c1132(0x15a)]||function(_0x325b7f){const _0x143d26=a54_0x2c1132;return _0x325b7f&&_0x325b7f[_0x143d26(0x16b)]?_0x325b7f:{'default':_0x325b7f};};Object[a54_0x2c1132(0x189)](exports,a54_0x2c1132(0x16b),{'value':!![]}),exports[a54_0x2c1132(0x174)]=void 0x0;const bcryptjs_1=__importDefault(require(a54_0x2c1132(0x153))),crypto_1=__importDefault(require(a54_0x2c1132(0x161))),database_1=__importDefault(require('../config/database'));function a54_0x5e6f(_0x287ca0,_0x175634){const _0x4b93ea=a54_0x4b93();return a54_0x5e6f=function(_0x5e6f3c,_0x3e77ce){_0x5e6f3c=_0x5e6f3c-0x153;let _0x2a8e32=_0x4b93ea[_0x5e6f3c];return _0x2a8e32;},a54_0x5e6f(_0x287ca0,_0x175634);}class UserService{['generateApiKeys'](){const _0x22fba8=a54_0x2c1132,_0x5f2473=_0x22fba8(0x157)+crypto_1['default'][_0x22fba8(0x16e)](0x20)['toString'](_0x22fba8(0x163)),_0x5150cf=_0x22fba8(0x186)+crypto_1[_0x22fba8(0x154)][_0x22fba8(0x16e)](0x20)[_0x22fba8(0x165)](_0x22fba8(0x163));return{'publicKey':_0x5f2473,'secretKey':_0x5150cf};}async[a54_0x2c1132(0x168)](_0x23e7f2){const _0x4a33de=a54_0x2c1132,{fullName:_0x456eb0,username:_0x34c35a,password:_0x19bd18,telegramId:_0x2f417e,merchantUrl:_0x57f8dd,gateways:_0x441efb,gatewaySettings:_0x4f93ff,wallets:_0x23ea8a}=_0x23e7f2,_0x4c9e50=await database_1['default']['shop'][_0x4a33de(0x15f)]({'where':{'username':_0x34c35a}});if(_0x4c9e50)throw new Error(_0x4a33de(0x155));if(_0x2f417e){const _0x33a80f=await database_1[_0x4a33de(0x154)][_0x4a33de(0x181)][_0x4a33de(0x15f)]({'where':{'telegram':_0x2f417e}});if(_0x33a80f)throw new Error(_0x4a33de(0x17e));}const _0x3c5116=await bcryptjs_1[_0x4a33de(0x154)][_0x4a33de(0x176)](_0x19bd18,0xc),{publicKey:_0x18c4fa,secretKey:_0x43b4c0}=this[_0x4a33de(0x171)](),_0xe202e3=await database_1[_0x4a33de(0x154)]['shop'][_0x4a33de(0x15b)]({'data':{'name':_0x456eb0,'username':_0x34c35a,'password':_0x3c5116,'telegram':_0x2f417e,'shopUrl':_0x57f8dd,'paymentGateways':_0x441efb?JSON['stringify'](_0x441efb):null,'gatewaySettings':_0x4f93ff?JSON['stringify'](_0x4f93ff):null,'usdtPolygonWallet':_0x23ea8a?.[_0x4a33de(0x177)]||null,'usdtTrcWallet':_0x23ea8a?.['usdtTrcWallet']||null,'usdtErcWallet':_0x23ea8a?.['usdtErcWallet']||null,'usdcPolygonWallet':_0x23ea8a?.['usdcPolygonWallet']||null,'publicKey':_0x18c4fa,'secretKey':_0x43b4c0,'status':_0x4a33de(0x162)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0xe202e3['id'],'fullName':_0xe202e3[_0x4a33de(0x185)],'username':_0xe202e3[_0x4a33de(0x159)],'telegramId':_0xe202e3[_0x4a33de(0x183)],'merchantUrl':_0xe202e3['shopUrl'],'gateways':_0xe202e3['paymentGateways']?JSON[_0x4a33de(0x169)](_0xe202e3[_0x4a33de(0x164)]):null,'gatewaySettings':_0xe202e3[_0x4a33de(0x16a)]?JSON['parse'](_0xe202e3[_0x4a33de(0x16a)]):null,'publicKey':_0xe202e3[_0x4a33de(0x178)],'wallets':{'usdtPolygonWallet':_0xe202e3[_0x4a33de(0x177)],'usdtTrcWallet':_0xe202e3[_0x4a33de(0x170)],'usdtErcWallet':_0xe202e3[_0x4a33de(0x17c)],'usdcPolygonWallet':_0xe202e3[_0x4a33de(0x180)]},'status':_0xe202e3['status'],'createdAt':_0xe202e3[_0x4a33de(0x187)]};}async['getAllUsers'](){const _0x1234ba=a54_0x2c1132,_0xe39e68=await database_1['default'][_0x1234ba(0x181)][_0x1234ba(0x156)]({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':_0x1234ba(0x15d)}});return _0xe39e68[_0x1234ba(0x15e)](_0x196254=>({'id':_0x196254['id'],'fullName':_0x196254['name'],'username':_0x196254[_0x1234ba(0x159)],'telegramId':_0x196254['telegram'],'merchantUrl':_0x196254[_0x1234ba(0x18f)],'gateways':_0x196254[_0x1234ba(0x164)]?JSON[_0x1234ba(0x169)](_0x196254[_0x1234ba(0x164)]):null,'gatewaySettings':_0x196254[_0x1234ba(0x16a)]?JSON['parse'](_0x196254[_0x1234ba(0x16a)]):null,'publicKey':_0x196254[_0x1234ba(0x178)],'wallets':{'usdtPolygonWallet':_0x196254['usdtPolygonWallet'],'usdtTrcWallet':_0x196254[_0x1234ba(0x170)],'usdtErcWallet':_0x196254[_0x1234ba(0x17c)],'usdcPolygonWallet':_0x196254['usdcPolygonWallet']},'status':_0x196254[_0x1234ba(0x18a)],'createdAt':_0x196254['createdAt']}));}async[a54_0x2c1132(0x173)](_0x4205e3){const _0x5d6d94=a54_0x2c1132,_0xd8a62a=await database_1[_0x5d6d94(0x154)][_0x5d6d94(0x181)][_0x5d6d94(0x15f)]({'where':{'id':_0x4205e3},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0xd8a62a)return null;return{'id':_0xd8a62a['id'],'fullName':_0xd8a62a[_0x5d6d94(0x185)],'username':_0xd8a62a[_0x5d6d94(0x159)],'telegramId':_0xd8a62a[_0x5d6d94(0x183)],'merchantUrl':_0xd8a62a[_0x5d6d94(0x18f)],'gateways':_0xd8a62a[_0x5d6d94(0x164)]?JSON[_0x5d6d94(0x169)](_0xd8a62a['paymentGateways']):null,'gatewaySettings':_0xd8a62a['gatewaySettings']?JSON[_0x5d6d94(0x169)](_0xd8a62a[_0x5d6d94(0x16a)]):null,'publicKey':_0xd8a62a[_0x5d6d94(0x178)],'wallets':{'usdtPolygonWallet':_0xd8a62a[_0x5d6d94(0x177)],'usdtTrcWallet':_0xd8a62a[_0x5d6d94(0x170)],'usdtErcWallet':_0xd8a62a[_0x5d6d94(0x17c)],'usdcPolygonWallet':_0xd8a62a[_0x5d6d94(0x180)]},'status':_0xd8a62a[_0x5d6d94(0x18a)],'createdAt':_0xd8a62a[_0x5d6d94(0x187)]};}async[a54_0x2c1132(0x166)](_0x1c6f2d,_0x2509e8){const _0x3f9d1a=a54_0x2c1132,_0xbc8be6={..._0x2509e8};_0x2509e8[_0x3f9d1a(0x188)]&&(_0xbc8be6[_0x3f9d1a(0x188)]=await bcryptjs_1['default']['hash'](_0x2509e8['password'],0xc));_0x2509e8[_0x3f9d1a(0x16c)]&&(_0xbc8be6[_0x3f9d1a(0x185)]=_0x2509e8[_0x3f9d1a(0x16c)],delete _0xbc8be6[_0x3f9d1a(0x16c)]);_0x2509e8[_0x3f9d1a(0x17a)]&&(_0xbc8be6[_0x3f9d1a(0x183)]=_0x2509e8['telegramId'],delete _0xbc8be6['telegramId']);_0x2509e8[_0x3f9d1a(0x15c)]&&(_0xbc8be6[_0x3f9d1a(0x18f)]=_0x2509e8['merchantUrl'],delete _0xbc8be6['merchantUrl']);_0x2509e8['gateways']&&(_0xbc8be6[_0x3f9d1a(0x164)]=JSON[_0x3f9d1a(0x175)](_0x2509e8['gateways']),delete _0xbc8be6[_0x3f9d1a(0x160)]);_0x2509e8[_0x3f9d1a(0x16a)]&&(_0xbc8be6[_0x3f9d1a(0x16a)]=JSON['stringify'](_0x2509e8[_0x3f9d1a(0x16a)]),delete _0xbc8be6[_0x3f9d1a(0x16a)]);_0x2509e8[_0x3f9d1a(0x179)]&&(_0x2509e8['wallets']['usdtPolygonWallet']!==undefined&&(_0xbc8be6[_0x3f9d1a(0x177)]=_0x2509e8['wallets'][_0x3f9d1a(0x177)]||null),_0x2509e8[_0x3f9d1a(0x179)][_0x3f9d1a(0x170)]!==undefined&&(_0xbc8be6[_0x3f9d1a(0x170)]=_0x2509e8['wallets'][_0x3f9d1a(0x170)]||null),_0x2509e8['wallets'][_0x3f9d1a(0x17c)]!==undefined&&(_0xbc8be6[_0x3f9d1a(0x17c)]=_0x2509e8[_0x3f9d1a(0x179)]['usdtErcWallet']||null),_0x2509e8[_0x3f9d1a(0x179)]['usdcPolygonWallet']!==undefined&&(_0xbc8be6[_0x3f9d1a(0x180)]=_0x2509e8[_0x3f9d1a(0x179)][_0x3f9d1a(0x180)]||null),delete _0xbc8be6['wallets']);const _0x5216ac=await database_1[_0x3f9d1a(0x154)][_0x3f9d1a(0x181)][_0x3f9d1a(0x184)]({'where':{'id':_0x1c6f2d},'data':_0xbc8be6,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x5216ac['id'],'fullName':_0x5216ac[_0x3f9d1a(0x185)],'username':_0x5216ac[_0x3f9d1a(0x159)],'telegramId':_0x5216ac[_0x3f9d1a(0x183)],'merchantUrl':_0x5216ac[_0x3f9d1a(0x18f)],'gateways':_0x5216ac[_0x3f9d1a(0x164)]?JSON[_0x3f9d1a(0x169)](_0x5216ac[_0x3f9d1a(0x164)]):null,'gatewaySettings':_0x5216ac[_0x3f9d1a(0x16a)]?JSON[_0x3f9d1a(0x169)](_0x5216ac['gatewaySettings']):null,'publicKey':_0x5216ac[_0x3f9d1a(0x178)],'wallets':{'usdtPolygonWallet':_0x5216ac[_0x3f9d1a(0x177)],'usdtTrcWallet':_0x5216ac['usdtTrcWallet'],'usdtErcWallet':_0x5216ac['usdtErcWallet'],'usdcPolygonWallet':_0x5216ac[_0x3f9d1a(0x180)]},'status':_0x5216ac['status'],'createdAt':_0x5216ac[_0x3f9d1a(0x187)]};}async[a54_0x2c1132(0x172)](_0x436156){const _0x1aaafd=a54_0x2c1132;await database_1['default']['shop'][_0x1aaafd(0x17d)]({'where':{'id':_0x436156}});}}function a54_0x4b93(){const _0x218678=['gatewaySettings','__esModule','fullName','4683325hcjFDc','randomBytes','8wjNyQq','usdtTrcWallet','generateApiKeys','deleteUser','getUserById','UserService','stringify','hash','usdtPolygonWallet','publicKey','wallets','telegramId','2380232PKOXKG','usdtErcWallet','delete','Telegram\x20username\x20already\x20exists','11erlDxP','usdcPolygonWallet','shop','42mfxNLY','telegram','update','name','sk_','createdAt','password','defineProperty','status','133317SKohiC','3756fIuVGJ','1012206JlWuhl','20734910UwPcjb','shopUrl','bcryptjs','default','Username\x20already\x20exists','findMany','pk_','633EaVehC','username','__importDefault','create','merchantUrl','desc','map','findUnique','gateways','crypto','ACTIVE','hex','paymentGateways','toString','updateUser','594033WSgFta','createUser','parse'];a54_0x4b93=function(){return _0x218678;};return a54_0x4b93();}exports['UserService']=UserService;