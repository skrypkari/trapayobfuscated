'use strict';function a82_0x4899(){const _0x2098dc=['22YVsIJA','password','bcryptjs','usdcPolygonWallet','create','1386196DOhgPG','hash','usdtPolygonWallet','70950rOEITt','paymentGateways','264845ueQrwW','generateApiKeys','fullName','randomBytes','createdAt','usdtErcWallet','parse','name','93776jJrfcO','UserService','findUnique','getAllUsers','shop','update','Username\x20already\x20exists','username','ACTIVE','378532WdlHiB','publicKey','telegramId','default','gatewaySettings','1zKcAlp','hex','__esModule','deleteUser','wallets','status','81rALQCr','sk_','getUserById','728286fGZklk','shopUrl','Telegram\x20username\x20already\x20exists','updateUser','toString','gateways','createUser','telegram','stringify','merchantUrl','313570mgGUQc','usdtTrcWallet','64oqokSa'];a82_0x4899=function(){return _0x2098dc;};return a82_0x4899();}const a82_0x17df02=a82_0x1a15;(function(_0x38c3aa,_0x2ae7d6){const _0x5cabba=a82_0x1a15,_0x51b542=_0x38c3aa();while(!![]){try{const _0x2c2f5a=parseInt(_0x5cabba(0x1b5))/0x1*(parseInt(_0x5cabba(0x1b0))/0x2)+-parseInt(_0x5cabba(0x1d3))/0x3*(parseInt(_0x5cabba(0x1ca))/0x4)+-parseInt(_0x5cabba(0x19f))/0x5+parseInt(_0x5cabba(0x1be))/0x6+parseInt(_0x5cabba(0x1d0))/0x7+-parseInt(_0x5cabba(0x1a7))/0x8*(-parseInt(_0x5cabba(0x1bb))/0x9)+-parseInt(_0x5cabba(0x1c8))/0xa*(-parseInt(_0x5cabba(0x1cb))/0xb);if(_0x2c2f5a===_0x2ae7d6)break;else _0x51b542['push'](_0x51b542['shift']());}catch(_0x217632){_0x51b542['push'](_0x51b542['shift']());}}}(a82_0x4899,0x3bf0e));var __importDefault=this&&this['__importDefault']||function(_0x2f2056){const _0x26ca93=a82_0x1a15;return _0x2f2056&&_0x2f2056[_0x26ca93(0x1b7)]?_0x2f2056:{'default':_0x2f2056};};Object['defineProperty'](exports,a82_0x17df02(0x1b7),{'value':!![]}),exports[a82_0x17df02(0x1a8)]=void 0x0;const bcryptjs_1=__importDefault(require(a82_0x17df02(0x1cd))),crypto_1=__importDefault(require('crypto')),database_1=__importDefault(require('../config/database'));class UserService{[a82_0x17df02(0x1a0)](){const _0x339626=a82_0x17df02,_0x4d3a52='pk_'+crypto_1[_0x339626(0x1b3)][_0x339626(0x1a2)](0x20)[_0x339626(0x1c2)](_0x339626(0x1b6)),_0x4f3e0a=_0x339626(0x1bc)+crypto_1[_0x339626(0x1b3)][_0x339626(0x1a2)](0x20)[_0x339626(0x1c2)](_0x339626(0x1b6));return{'publicKey':_0x4d3a52,'secretKey':_0x4f3e0a};}async[a82_0x17df02(0x1c4)](_0x3544df){const _0x53580f=a82_0x17df02,{fullName:_0xfbd10a,username:_0x5eae3a,password:_0x53dfc7,telegramId:_0x1b80ed,merchantUrl:_0x36898e,gateways:_0x5bd223,gatewaySettings:_0x379951,wallets:_0x577aed}=_0x3544df,_0x4ed9fe=await database_1[_0x53580f(0x1b3)][_0x53580f(0x1ab)]['findUnique']({'where':{'username':_0x5eae3a}});if(_0x4ed9fe)throw new Error(_0x53580f(0x1ad));if(_0x1b80ed){const _0x1c59a1=await database_1[_0x53580f(0x1b3)][_0x53580f(0x1ab)][_0x53580f(0x1a9)]({'where':{'telegram':_0x1b80ed}});if(_0x1c59a1)throw new Error(_0x53580f(0x1c0));}const _0x4275d6=await bcryptjs_1[_0x53580f(0x1b3)][_0x53580f(0x1d1)](_0x53dfc7,0xc),{publicKey:_0x553431,secretKey:_0x150d5e}=this[_0x53580f(0x1a0)](),_0x295561=await database_1['default']['shop'][_0x53580f(0x1cf)]({'data':{'name':_0xfbd10a,'username':_0x5eae3a,'password':_0x4275d6,'telegram':_0x1b80ed,'shopUrl':_0x36898e,'paymentGateways':_0x5bd223?JSON[_0x53580f(0x1c6)](_0x5bd223):null,'gatewaySettings':_0x379951?JSON[_0x53580f(0x1c6)](_0x379951):null,'usdtPolygonWallet':_0x577aed?.[_0x53580f(0x1d2)]||null,'usdtTrcWallet':_0x577aed?.[_0x53580f(0x1c9)]||null,'usdtErcWallet':_0x577aed?.[_0x53580f(0x1a4)]||null,'usdcPolygonWallet':_0x577aed?.['usdcPolygonWallet']||null,'publicKey':_0x553431,'secretKey':_0x150d5e,'status':_0x53580f(0x1af)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x295561['id'],'fullName':_0x295561[_0x53580f(0x1a6)],'username':_0x295561[_0x53580f(0x1ae)],'telegramId':_0x295561[_0x53580f(0x1c5)],'merchantUrl':_0x295561[_0x53580f(0x1bf)],'gateways':_0x295561[_0x53580f(0x1d4)]?JSON[_0x53580f(0x1a5)](_0x295561[_0x53580f(0x1d4)]):null,'gatewaySettings':_0x295561['gatewaySettings']?JSON[_0x53580f(0x1a5)](_0x295561[_0x53580f(0x1b4)]):null,'publicKey':_0x295561[_0x53580f(0x1b1)],'wallets':{'usdtPolygonWallet':_0x295561[_0x53580f(0x1d2)],'usdtTrcWallet':_0x295561[_0x53580f(0x1c9)],'usdtErcWallet':_0x295561['usdtErcWallet'],'usdcPolygonWallet':_0x295561[_0x53580f(0x1ce)]},'status':_0x295561['status'],'createdAt':_0x295561[_0x53580f(0x1a3)]};}async[a82_0x17df02(0x1aa)](){const _0x217641=a82_0x17df02,_0x16165a=await database_1[_0x217641(0x1b3)]['shop']['findMany']({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':'desc'}});return _0x16165a['map'](_0x45e121=>({'id':_0x45e121['id'],'fullName':_0x45e121[_0x217641(0x1a6)],'username':_0x45e121['username'],'telegramId':_0x45e121['telegram'],'merchantUrl':_0x45e121[_0x217641(0x1bf)],'gateways':_0x45e121[_0x217641(0x1d4)]?JSON[_0x217641(0x1a5)](_0x45e121['paymentGateways']):null,'gatewaySettings':_0x45e121[_0x217641(0x1b4)]?JSON['parse'](_0x45e121[_0x217641(0x1b4)]):null,'publicKey':_0x45e121['publicKey'],'wallets':{'usdtPolygonWallet':_0x45e121[_0x217641(0x1d2)],'usdtTrcWallet':_0x45e121[_0x217641(0x1c9)],'usdtErcWallet':_0x45e121[_0x217641(0x1a4)],'usdcPolygonWallet':_0x45e121[_0x217641(0x1ce)]},'status':_0x45e121[_0x217641(0x1ba)],'createdAt':_0x45e121['createdAt']}));}async[a82_0x17df02(0x1bd)](_0x3c4283){const _0x3a1822=a82_0x17df02,_0x3a9fdb=await database_1[_0x3a1822(0x1b3)][_0x3a1822(0x1ab)][_0x3a1822(0x1a9)]({'where':{'id':_0x3c4283},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x3a9fdb)return null;return{'id':_0x3a9fdb['id'],'fullName':_0x3a9fdb[_0x3a1822(0x1a6)],'username':_0x3a9fdb[_0x3a1822(0x1ae)],'telegramId':_0x3a9fdb[_0x3a1822(0x1c5)],'merchantUrl':_0x3a9fdb['shopUrl'],'gateways':_0x3a9fdb[_0x3a1822(0x1d4)]?JSON[_0x3a1822(0x1a5)](_0x3a9fdb[_0x3a1822(0x1d4)]):null,'gatewaySettings':_0x3a9fdb[_0x3a1822(0x1b4)]?JSON[_0x3a1822(0x1a5)](_0x3a9fdb['gatewaySettings']):null,'publicKey':_0x3a9fdb['publicKey'],'wallets':{'usdtPolygonWallet':_0x3a9fdb[_0x3a1822(0x1d2)],'usdtTrcWallet':_0x3a9fdb[_0x3a1822(0x1c9)],'usdtErcWallet':_0x3a9fdb['usdtErcWallet'],'usdcPolygonWallet':_0x3a9fdb[_0x3a1822(0x1ce)]},'status':_0x3a9fdb[_0x3a1822(0x1ba)],'createdAt':_0x3a9fdb[_0x3a1822(0x1a3)]};}async[a82_0x17df02(0x1c1)](_0x217f88,_0x1a08cd){const _0x2440ec=a82_0x17df02,_0x404dfc={..._0x1a08cd};_0x1a08cd[_0x2440ec(0x1cc)]&&(_0x404dfc[_0x2440ec(0x1cc)]=await bcryptjs_1['default'][_0x2440ec(0x1d1)](_0x1a08cd[_0x2440ec(0x1cc)],0xc));_0x1a08cd['fullName']&&(_0x404dfc[_0x2440ec(0x1a6)]=_0x1a08cd['fullName'],delete _0x404dfc[_0x2440ec(0x1a1)]);_0x1a08cd[_0x2440ec(0x1b2)]&&(_0x404dfc['telegram']=_0x1a08cd[_0x2440ec(0x1b2)],delete _0x404dfc['telegramId']);_0x1a08cd['merchantUrl']&&(_0x404dfc[_0x2440ec(0x1bf)]=_0x1a08cd['merchantUrl'],delete _0x404dfc[_0x2440ec(0x1c7)]);_0x1a08cd[_0x2440ec(0x1c3)]&&(_0x404dfc['paymentGateways']=JSON[_0x2440ec(0x1c6)](_0x1a08cd[_0x2440ec(0x1c3)]),delete _0x404dfc[_0x2440ec(0x1c3)]);_0x1a08cd[_0x2440ec(0x1b4)]&&(_0x404dfc[_0x2440ec(0x1b4)]=JSON[_0x2440ec(0x1c6)](_0x1a08cd[_0x2440ec(0x1b4)]),delete _0x404dfc[_0x2440ec(0x1b4)]);_0x1a08cd[_0x2440ec(0x1b9)]&&(_0x1a08cd[_0x2440ec(0x1b9)][_0x2440ec(0x1d2)]!==undefined&&(_0x404dfc[_0x2440ec(0x1d2)]=_0x1a08cd[_0x2440ec(0x1b9)][_0x2440ec(0x1d2)]||null),_0x1a08cd[_0x2440ec(0x1b9)][_0x2440ec(0x1c9)]!==undefined&&(_0x404dfc[_0x2440ec(0x1c9)]=_0x1a08cd[_0x2440ec(0x1b9)][_0x2440ec(0x1c9)]||null),_0x1a08cd['wallets'][_0x2440ec(0x1a4)]!==undefined&&(_0x404dfc[_0x2440ec(0x1a4)]=_0x1a08cd['wallets']['usdtErcWallet']||null),_0x1a08cd[_0x2440ec(0x1b9)][_0x2440ec(0x1ce)]!==undefined&&(_0x404dfc[_0x2440ec(0x1ce)]=_0x1a08cd['wallets']['usdcPolygonWallet']||null),delete _0x404dfc[_0x2440ec(0x1b9)]);const _0x3a2d4e=await database_1[_0x2440ec(0x1b3)][_0x2440ec(0x1ab)][_0x2440ec(0x1ac)]({'where':{'id':_0x217f88},'data':_0x404dfc,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x3a2d4e['id'],'fullName':_0x3a2d4e[_0x2440ec(0x1a6)],'username':_0x3a2d4e[_0x2440ec(0x1ae)],'telegramId':_0x3a2d4e['telegram'],'merchantUrl':_0x3a2d4e['shopUrl'],'gateways':_0x3a2d4e[_0x2440ec(0x1d4)]?JSON[_0x2440ec(0x1a5)](_0x3a2d4e['paymentGateways']):null,'gatewaySettings':_0x3a2d4e['gatewaySettings']?JSON[_0x2440ec(0x1a5)](_0x3a2d4e[_0x2440ec(0x1b4)]):null,'publicKey':_0x3a2d4e[_0x2440ec(0x1b1)],'wallets':{'usdtPolygonWallet':_0x3a2d4e[_0x2440ec(0x1d2)],'usdtTrcWallet':_0x3a2d4e[_0x2440ec(0x1c9)],'usdtErcWallet':_0x3a2d4e[_0x2440ec(0x1a4)],'usdcPolygonWallet':_0x3a2d4e[_0x2440ec(0x1ce)]},'status':_0x3a2d4e['status'],'createdAt':_0x3a2d4e[_0x2440ec(0x1a3)]};}async[a82_0x17df02(0x1b8)](_0x420c29){const _0x458504=a82_0x17df02;await database_1[_0x458504(0x1b3)][_0x458504(0x1ab)]['delete']({'where':{'id':_0x420c29}});}}function a82_0x1a15(_0x49c81d,_0x13fb06){_0x49c81d=_0x49c81d-0x19f;const _0x48993b=a82_0x4899();let _0x1a158e=_0x48993b[_0x49c81d];return _0x1a158e;}exports[a82_0x17df02(0x1a8)]=UserService;