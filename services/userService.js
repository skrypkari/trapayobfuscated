'use strict';const a55_0x2d9c15=a55_0x1419;(function(_0x39d637,_0x3e1207){const _0x69a9d5=a55_0x1419,_0xe5ee2e=_0x39d637();while(!![]){try{const _0xcb0b0d=-parseInt(_0x69a9d5(0xf1))/0x1*(-parseInt(_0x69a9d5(0xeb))/0x2)+-parseInt(_0x69a9d5(0xe8))/0x3*(-parseInt(_0x69a9d5(0xd5))/0x4)+parseInt(_0x69a9d5(0xc9))/0x5*(parseInt(_0x69a9d5(0xe4))/0x6)+parseInt(_0x69a9d5(0xe3))/0x7*(parseInt(_0x69a9d5(0xd8))/0x8)+-parseInt(_0x69a9d5(0xd3))/0x9+-parseInt(_0x69a9d5(0xec))/0xa*(parseInt(_0x69a9d5(0xee))/0xb)+-parseInt(_0x69a9d5(0xc5))/0xc;if(_0xcb0b0d===_0x3e1207)break;else _0xe5ee2e['push'](_0xe5ee2e['shift']());}catch(_0x50dfc9){_0xe5ee2e['push'](_0xe5ee2e['shift']());}}}(a55_0x3da0,0x27fc9));var __importDefault=this&&this['__importDefault']||function(_0x5de2d7){const _0x354e5d=a55_0x1419;return _0x5de2d7&&_0x5de2d7[_0x354e5d(0xc6)]?_0x5de2d7:{'default':_0x5de2d7};};function a55_0x1419(_0x1ad846,_0x529482){const _0x3da016=a55_0x3da0();return a55_0x1419=function(_0x1419bc,_0x584115){_0x1419bc=_0x1419bc-0xc0;let _0x435e10=_0x3da016[_0x1419bc];return _0x435e10;},a55_0x1419(_0x1ad846,_0x529482);}Object[a55_0x2d9c15(0xde)](exports,a55_0x2d9c15(0xc6),{'value':!![]}),exports['UserService']=void 0x0;const bcryptjs_1=__importDefault(require(a55_0x2d9c15(0xef))),crypto_1=__importDefault(require(a55_0x2d9c15(0xe1))),database_1=__importDefault(require('../config/database'));class UserService{[a55_0x2d9c15(0xea)](){const _0x111da8=a55_0x2d9c15,_0x1cb72c='pk_'+crypto_1['default']['randomBytes'](0x20)['toString']('hex'),_0x23dbbc=_0x111da8(0xc8)+crypto_1[_0x111da8(0xd0)][_0x111da8(0xf3)](0x20)[_0x111da8(0xc3)]('hex');return{'publicKey':_0x1cb72c,'secretKey':_0x23dbbc};}async[a55_0x2d9c15(0xf8)](_0x423b10){const _0xae9c1=a55_0x2d9c15,{fullName:_0x15b652,username:_0x101e87,password:_0x5e340e,telegramId:_0x3a719e,merchantUrl:_0x2b432e,gateways:_0x5d4c5e,gatewaySettings:_0xf2af82,wallets:_0x77e124}=_0x423b10,_0x5bbeee=await database_1[_0xae9c1(0xd0)][_0xae9c1(0xca)][_0xae9c1(0xd2)]({'where':{'username':_0x101e87}});if(_0x5bbeee)throw new Error(_0xae9c1(0xf9));if(_0x3a719e){const _0x59968d=await database_1['default'][_0xae9c1(0xca)][_0xae9c1(0xd2)]({'where':{'telegram':_0x3a719e}});if(_0x59968d)throw new Error(_0xae9c1(0xf6));}const _0x4ebdb7=await bcryptjs_1[_0xae9c1(0xd0)][_0xae9c1(0xdf)](_0x5e340e,0xc),{publicKey:_0x5602b5,secretKey:_0x3a9fa1}=this[_0xae9c1(0xea)](),_0x122cb1=await database_1[_0xae9c1(0xd0)][_0xae9c1(0xca)][_0xae9c1(0xcc)]({'data':{'name':_0x15b652,'username':_0x101e87,'password':_0x4ebdb7,'telegram':_0x3a719e,'shopUrl':_0x2b432e,'paymentGateways':_0x5d4c5e?JSON[_0xae9c1(0xc2)](_0x5d4c5e):null,'gatewaySettings':_0xf2af82?JSON[_0xae9c1(0xc2)](_0xf2af82):null,'usdtPolygonWallet':_0x77e124?.[_0xae9c1(0xf7)]||null,'usdtTrcWallet':_0x77e124?.['usdtTrcWallet']||null,'usdtErcWallet':_0x77e124?.[_0xae9c1(0xf5)]||null,'usdcPolygonWallet':_0x77e124?.[_0xae9c1(0xc4)]||null,'publicKey':_0x5602b5,'secretKey':_0x3a9fa1,'status':_0xae9c1(0xce)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x122cb1['id'],'fullName':_0x122cb1[_0xae9c1(0xe6)],'username':_0x122cb1['username'],'telegramId':_0x122cb1[_0xae9c1(0xcd)],'merchantUrl':_0x122cb1[_0xae9c1(0xda)],'gateways':_0x122cb1[_0xae9c1(0xd7)]?JSON['parse'](_0x122cb1[_0xae9c1(0xd7)]):null,'gatewaySettings':_0x122cb1[_0xae9c1(0xed)]?JSON['parse'](_0x122cb1[_0xae9c1(0xed)]):null,'publicKey':_0x122cb1[_0xae9c1(0xf4)],'wallets':{'usdtPolygonWallet':_0x122cb1[_0xae9c1(0xf7)],'usdtTrcWallet':_0x122cb1['usdtTrcWallet'],'usdtErcWallet':_0x122cb1[_0xae9c1(0xf5)],'usdcPolygonWallet':_0x122cb1[_0xae9c1(0xc4)]},'status':_0x122cb1[_0xae9c1(0xd9)],'createdAt':_0x122cb1['createdAt']};}async['getAllUsers'](){const _0x2646d2=a55_0x2d9c15,_0x6db53d=await database_1[_0x2646d2(0xd0)][_0x2646d2(0xca)][_0x2646d2(0xe7)]({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':_0x2646d2(0xd1)}});return _0x6db53d[_0x2646d2(0xf2)](_0x921188=>({'id':_0x921188['id'],'fullName':_0x921188['name'],'username':_0x921188[_0x2646d2(0xcb)],'telegramId':_0x921188[_0x2646d2(0xcd)],'merchantUrl':_0x921188[_0x2646d2(0xda)],'gateways':_0x921188[_0x2646d2(0xd7)]?JSON['parse'](_0x921188['paymentGateways']):null,'gatewaySettings':_0x921188[_0x2646d2(0xed)]?JSON[_0x2646d2(0xc7)](_0x921188['gatewaySettings']):null,'publicKey':_0x921188['publicKey'],'wallets':{'usdtPolygonWallet':_0x921188['usdtPolygonWallet'],'usdtTrcWallet':_0x921188[_0x2646d2(0xe0)],'usdtErcWallet':_0x921188[_0x2646d2(0xf5)],'usdcPolygonWallet':_0x921188['usdcPolygonWallet']},'status':_0x921188[_0x2646d2(0xd9)],'createdAt':_0x921188[_0x2646d2(0xf0)]}));}async[a55_0x2d9c15(0xd6)](_0xcf3973){const _0x1ff934=a55_0x2d9c15,_0xbc5727=await database_1[_0x1ff934(0xd0)]['shop'][_0x1ff934(0xd2)]({'where':{'id':_0xcf3973},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0xbc5727)return null;return{'id':_0xbc5727['id'],'fullName':_0xbc5727['name'],'username':_0xbc5727['username'],'telegramId':_0xbc5727[_0x1ff934(0xcd)],'merchantUrl':_0xbc5727['shopUrl'],'gateways':_0xbc5727[_0x1ff934(0xd7)]?JSON['parse'](_0xbc5727[_0x1ff934(0xd7)]):null,'gatewaySettings':_0xbc5727[_0x1ff934(0xed)]?JSON[_0x1ff934(0xc7)](_0xbc5727[_0x1ff934(0xed)]):null,'publicKey':_0xbc5727['publicKey'],'wallets':{'usdtPolygonWallet':_0xbc5727[_0x1ff934(0xf7)],'usdtTrcWallet':_0xbc5727[_0x1ff934(0xe0)],'usdtErcWallet':_0xbc5727[_0x1ff934(0xf5)],'usdcPolygonWallet':_0xbc5727[_0x1ff934(0xc4)]},'status':_0xbc5727['status'],'createdAt':_0xbc5727['createdAt']};}async[a55_0x2d9c15(0xdd)](_0x1a7c89,_0x3dc9b9){const _0xdfbd74=a55_0x2d9c15,_0x5df516={..._0x3dc9b9};_0x3dc9b9['password']&&(_0x5df516[_0xdfbd74(0xe5)]=await bcryptjs_1[_0xdfbd74(0xd0)][_0xdfbd74(0xdf)](_0x3dc9b9[_0xdfbd74(0xe5)],0xc));_0x3dc9b9['fullName']&&(_0x5df516[_0xdfbd74(0xe6)]=_0x3dc9b9['fullName'],delete _0x5df516[_0xdfbd74(0xcf)]);_0x3dc9b9[_0xdfbd74(0xdc)]&&(_0x5df516['telegram']=_0x3dc9b9['telegramId'],delete _0x5df516[_0xdfbd74(0xdc)]);_0x3dc9b9[_0xdfbd74(0xdb)]&&(_0x5df516[_0xdfbd74(0xda)]=_0x3dc9b9[_0xdfbd74(0xdb)],delete _0x5df516[_0xdfbd74(0xdb)]);_0x3dc9b9['gateways']&&(_0x5df516['paymentGateways']=JSON['stringify'](_0x3dc9b9[_0xdfbd74(0xc0)]),delete _0x5df516[_0xdfbd74(0xc0)]);_0x3dc9b9['gatewaySettings']&&(_0x5df516['gatewaySettings']=JSON[_0xdfbd74(0xc2)](_0x3dc9b9[_0xdfbd74(0xed)]),delete _0x5df516[_0xdfbd74(0xed)]);_0x3dc9b9[_0xdfbd74(0xe9)]&&(_0x3dc9b9[_0xdfbd74(0xe9)][_0xdfbd74(0xf7)]!==undefined&&(_0x5df516[_0xdfbd74(0xf7)]=_0x3dc9b9[_0xdfbd74(0xe9)][_0xdfbd74(0xf7)]||null),_0x3dc9b9[_0xdfbd74(0xe9)][_0xdfbd74(0xe0)]!==undefined&&(_0x5df516[_0xdfbd74(0xe0)]=_0x3dc9b9[_0xdfbd74(0xe9)][_0xdfbd74(0xe0)]||null),_0x3dc9b9[_0xdfbd74(0xe9)]['usdtErcWallet']!==undefined&&(_0x5df516[_0xdfbd74(0xf5)]=_0x3dc9b9['wallets']['usdtErcWallet']||null),_0x3dc9b9[_0xdfbd74(0xe9)][_0xdfbd74(0xc4)]!==undefined&&(_0x5df516[_0xdfbd74(0xc4)]=_0x3dc9b9[_0xdfbd74(0xe9)][_0xdfbd74(0xc4)]||null),delete _0x5df516[_0xdfbd74(0xe9)]);const _0x458813=await database_1['default'][_0xdfbd74(0xca)][_0xdfbd74(0xc1)]({'where':{'id':_0x1a7c89},'data':_0x5df516,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x458813['id'],'fullName':_0x458813[_0xdfbd74(0xe6)],'username':_0x458813[_0xdfbd74(0xcb)],'telegramId':_0x458813[_0xdfbd74(0xcd)],'merchantUrl':_0x458813[_0xdfbd74(0xda)],'gateways':_0x458813[_0xdfbd74(0xd7)]?JSON[_0xdfbd74(0xc7)](_0x458813[_0xdfbd74(0xd7)]):null,'gatewaySettings':_0x458813[_0xdfbd74(0xed)]?JSON[_0xdfbd74(0xc7)](_0x458813[_0xdfbd74(0xed)]):null,'publicKey':_0x458813['publicKey'],'wallets':{'usdtPolygonWallet':_0x458813[_0xdfbd74(0xf7)],'usdtTrcWallet':_0x458813[_0xdfbd74(0xe0)],'usdtErcWallet':_0x458813[_0xdfbd74(0xf5)],'usdcPolygonWallet':_0x458813['usdcPolygonWallet']},'status':_0x458813['status'],'createdAt':_0x458813[_0xdfbd74(0xf0)]};}async['deleteUser'](_0x42cf75){const _0x1a5b1e=a55_0x2d9c15;await database_1['default']['shop'][_0x1a5b1e(0xd4)]({'where':{'id':_0x42cf75}});}}function a55_0x3da0(){const _0x4353eb=['update','stringify','toString','usdcPolygonWallet','4757616KEDjBk','__esModule','parse','sk_','122190iXDAUw','shop','username','create','telegram','ACTIVE','fullName','default','desc','findUnique','1456497YXMDGf','delete','4kSEZHU','getUserById','paymentGateways','1872376zBPGoD','status','shopUrl','merchantUrl','telegramId','updateUser','defineProperty','hash','usdtTrcWallet','crypto','UserService','7UhJmlx','12AJOsxK','password','name','findMany','835713LHZMaq','wallets','generateApiKeys','316ZvfMEm','847820oXhEaH','gatewaySettings','11gaNyzG','bcryptjs','createdAt','1553AjazGW','map','randomBytes','publicKey','usdtErcWallet','Telegram\x20username\x20already\x20exists','usdtPolygonWallet','createUser','Username\x20already\x20exists','gateways'];a55_0x3da0=function(){return _0x4353eb;};return a55_0x3da0();}exports[a55_0x2d9c15(0xe2)]=UserService;