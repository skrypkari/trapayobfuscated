'use strict';const a51_0x2d2919=a51_0x52cc;(function(_0x33fdb4,_0x54594c){const _0x3f2131=a51_0x52cc,_0x1ea9b8=_0x33fdb4();while(!![]){try{const _0x30088f=-parseInt(_0x3f2131(0x100))/0x1+-parseInt(_0x3f2131(0x104))/0x2+-parseInt(_0x3f2131(0xf6))/0x3+-parseInt(_0x3f2131(0xfb))/0x4*(-parseInt(_0x3f2131(0xfd))/0x5)+-parseInt(_0x3f2131(0x10d))/0x6+parseInt(_0x3f2131(0x107))/0x7+parseInt(_0x3f2131(0x102))/0x8;if(_0x30088f===_0x54594c)break;else _0x1ea9b8['push'](_0x1ea9b8['shift']());}catch(_0x5b7e66){_0x1ea9b8['push'](_0x1ea9b8['shift']());}}}(a51_0x80af,0xe9517));function a51_0x52cc(_0x32a5ca,_0xaa3a0){const _0x80af57=a51_0x80af();return a51_0x52cc=function(_0x52cccc,_0x56e43d){_0x52cccc=_0x52cccc-0xf0;let _0x14ab4d=_0x80af57[_0x52cccc];return _0x14ab4d;},a51_0x52cc(_0x32a5ca,_0xaa3a0);}var __importDefault=this&&this[a51_0x2d2919(0x127)]||function(_0x5323af){const _0x2578ba=a51_0x2d2919;return _0x5323af&&_0x5323af[_0x2578ba(0x11f)]?_0x5323af:{'default':_0x5323af};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a51_0x2d2919(0x120)]=void 0x0;const bcryptjs_1=__importDefault(require('bcryptjs')),crypto_1=__importDefault(require(a51_0x2d2919(0xfe))),database_1=__importDefault(require(a51_0x2d2919(0x11c)));class UserService{[a51_0x2d2919(0x10f)](){const _0x1e6aa5=a51_0x2d2919,_0x528251=_0x1e6aa5(0x123)+crypto_1['default'][_0x1e6aa5(0x11b)](0x20)[_0x1e6aa5(0xf7)](_0x1e6aa5(0x11a)),_0xd80449=_0x1e6aa5(0x124)+crypto_1['default'][_0x1e6aa5(0x11b)](0x20)[_0x1e6aa5(0xf7)](_0x1e6aa5(0x11a));return{'publicKey':_0x528251,'secretKey':_0xd80449};}async[a51_0x2d2919(0x10c)](_0x1d49df){const _0x1db054=a51_0x2d2919,{fullName:_0x12a45a,username:_0x201885,password:_0x196f9a,telegramId:_0x118317,merchantUrl:_0x445b6d,gateways:_0x47dfa0,gatewaySettings:_0x3bbbbd,wallets:_0x326ca5}=_0x1d49df,_0x2e8924=await database_1[_0x1db054(0xfc)]['shop']['findUnique']({'where':{'username':_0x201885}});if(_0x2e8924)throw new Error(_0x1db054(0x117));if(_0x118317){const _0x404453=await database_1[_0x1db054(0xfc)]['shop'][_0x1db054(0x115)]({'where':{'telegram':_0x118317}});if(_0x404453)throw new Error(_0x1db054(0xf5));}const _0x11d7c8=await bcryptjs_1[_0x1db054(0xfc)][_0x1db054(0x11e)](_0x196f9a,0xc),{publicKey:_0x352f20,secretKey:_0x560cc4}=this[_0x1db054(0x10f)](),_0x24eec7=await database_1[_0x1db054(0xfc)][_0x1db054(0x110)][_0x1db054(0xf9)]({'data':{'name':_0x12a45a,'username':_0x201885,'password':_0x11d7c8,'telegram':_0x118317,'shopUrl':_0x445b6d,'paymentGateways':_0x47dfa0?JSON[_0x1db054(0x125)](_0x47dfa0):null,'gatewaySettings':_0x3bbbbd?JSON[_0x1db054(0x125)](_0x3bbbbd):null,'usdtPolygonWallet':_0x326ca5?.[_0x1db054(0x121)]||null,'usdtTrcWallet':_0x326ca5?.[_0x1db054(0xff)]||null,'usdtErcWallet':_0x326ca5?.[_0x1db054(0xf0)]||null,'usdcPolygonWallet':_0x326ca5?.[_0x1db054(0x10b)]||null,'publicKey':_0x352f20,'secretKey':_0x560cc4,'status':_0x1db054(0xf3)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x24eec7['id'],'fullName':_0x24eec7[_0x1db054(0xf2)],'username':_0x24eec7['username'],'telegramId':_0x24eec7['telegram'],'merchantUrl':_0x24eec7[_0x1db054(0x105)],'gateways':_0x24eec7[_0x1db054(0x11d)]?JSON['parse'](_0x24eec7[_0x1db054(0x11d)]):null,'gatewaySettings':_0x24eec7['gatewaySettings']?JSON[_0x1db054(0x112)](_0x24eec7[_0x1db054(0x113)]):null,'publicKey':_0x24eec7[_0x1db054(0x106)],'wallets':{'usdtPolygonWallet':_0x24eec7[_0x1db054(0x121)],'usdtTrcWallet':_0x24eec7[_0x1db054(0xff)],'usdtErcWallet':_0x24eec7[_0x1db054(0xf0)],'usdcPolygonWallet':_0x24eec7[_0x1db054(0x10b)]},'status':_0x24eec7[_0x1db054(0x116)],'createdAt':_0x24eec7['createdAt']};}async['getAllUsers'](){const _0xcefa15=a51_0x2d2919,_0x2b557f=await database_1['default'][_0xcefa15(0x110)][_0xcefa15(0x119)]({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':_0xcefa15(0x126)}});return _0x2b557f[_0xcefa15(0xf4)](_0x47ccc3=>({'id':_0x47ccc3['id'],'fullName':_0x47ccc3[_0xcefa15(0xf2)],'username':_0x47ccc3['username'],'telegramId':_0x47ccc3['telegram'],'merchantUrl':_0x47ccc3[_0xcefa15(0x105)],'gateways':_0x47ccc3[_0xcefa15(0x11d)]?JSON[_0xcefa15(0x112)](_0x47ccc3['paymentGateways']):null,'gatewaySettings':_0x47ccc3['gatewaySettings']?JSON['parse'](_0x47ccc3[_0xcefa15(0x113)]):null,'publicKey':_0x47ccc3[_0xcefa15(0x106)],'wallets':{'usdtPolygonWallet':_0x47ccc3['usdtPolygonWallet'],'usdtTrcWallet':_0x47ccc3['usdtTrcWallet'],'usdtErcWallet':_0x47ccc3['usdtErcWallet'],'usdcPolygonWallet':_0x47ccc3[_0xcefa15(0x10b)]},'status':_0x47ccc3[_0xcefa15(0x116)],'createdAt':_0x47ccc3['createdAt']}));}async['getUserById'](_0x440e5b){const _0x240e0d=a51_0x2d2919,_0x1e470d=await database_1[_0x240e0d(0xfc)]['shop']['findUnique']({'where':{'id':_0x440e5b},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x1e470d)return null;return{'id':_0x1e470d['id'],'fullName':_0x1e470d[_0x240e0d(0xf2)],'username':_0x1e470d[_0x240e0d(0x122)],'telegramId':_0x1e470d['telegram'],'merchantUrl':_0x1e470d[_0x240e0d(0x105)],'gateways':_0x1e470d[_0x240e0d(0x11d)]?JSON[_0x240e0d(0x112)](_0x1e470d['paymentGateways']):null,'gatewaySettings':_0x1e470d[_0x240e0d(0x113)]?JSON[_0x240e0d(0x112)](_0x1e470d['gatewaySettings']):null,'publicKey':_0x1e470d[_0x240e0d(0x106)],'wallets':{'usdtPolygonWallet':_0x1e470d[_0x240e0d(0x121)],'usdtTrcWallet':_0x1e470d[_0x240e0d(0xff)],'usdtErcWallet':_0x1e470d[_0x240e0d(0xf0)],'usdcPolygonWallet':_0x1e470d[_0x240e0d(0x10b)]},'status':_0x1e470d[_0x240e0d(0x116)],'createdAt':_0x1e470d[_0x240e0d(0x10e)]};}async[a51_0x2d2919(0x103)](_0x3ed45a,_0x232d99){const _0x5a9b86=a51_0x2d2919,_0xc2fb85={..._0x232d99};_0x232d99[_0x5a9b86(0x101)]&&(_0xc2fb85[_0x5a9b86(0x101)]=await bcryptjs_1[_0x5a9b86(0xfc)][_0x5a9b86(0x11e)](_0x232d99['password'],0xc));_0x232d99['fullName']&&(_0xc2fb85[_0x5a9b86(0xf2)]=_0x232d99[_0x5a9b86(0x10a)],delete _0xc2fb85[_0x5a9b86(0x10a)]);_0x232d99[_0x5a9b86(0xf1)]&&(_0xc2fb85['telegram']=_0x232d99[_0x5a9b86(0xf1)],delete _0xc2fb85[_0x5a9b86(0xf1)]);_0x232d99[_0x5a9b86(0xfa)]&&(_0xc2fb85[_0x5a9b86(0x105)]=_0x232d99[_0x5a9b86(0xfa)],delete _0xc2fb85[_0x5a9b86(0xfa)]);_0x232d99[_0x5a9b86(0x111)]&&(_0xc2fb85[_0x5a9b86(0x11d)]=JSON[_0x5a9b86(0x125)](_0x232d99[_0x5a9b86(0x111)]),delete _0xc2fb85[_0x5a9b86(0x111)]);_0x232d99[_0x5a9b86(0x113)]&&(_0xc2fb85[_0x5a9b86(0x113)]=JSON[_0x5a9b86(0x125)](_0x232d99[_0x5a9b86(0x113)]),delete _0xc2fb85[_0x5a9b86(0x113)]);_0x232d99[_0x5a9b86(0x108)]&&(_0x232d99[_0x5a9b86(0x108)]['usdtPolygonWallet']!==undefined&&(_0xc2fb85[_0x5a9b86(0x121)]=_0x232d99[_0x5a9b86(0x108)][_0x5a9b86(0x121)]||null),_0x232d99[_0x5a9b86(0x108)]['usdtTrcWallet']!==undefined&&(_0xc2fb85[_0x5a9b86(0xff)]=_0x232d99['wallets'][_0x5a9b86(0xff)]||null),_0x232d99[_0x5a9b86(0x108)][_0x5a9b86(0xf0)]!==undefined&&(_0xc2fb85[_0x5a9b86(0xf0)]=_0x232d99[_0x5a9b86(0x108)][_0x5a9b86(0xf0)]||null),_0x232d99[_0x5a9b86(0x108)][_0x5a9b86(0x10b)]!==undefined&&(_0xc2fb85[_0x5a9b86(0x10b)]=_0x232d99[_0x5a9b86(0x108)][_0x5a9b86(0x10b)]||null),delete _0xc2fb85[_0x5a9b86(0x108)]);const _0x5e03ac=await database_1[_0x5a9b86(0xfc)][_0x5a9b86(0x110)][_0x5a9b86(0x118)]({'where':{'id':_0x3ed45a},'data':_0xc2fb85,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x5e03ac['id'],'fullName':_0x5e03ac['name'],'username':_0x5e03ac['username'],'telegramId':_0x5e03ac[_0x5a9b86(0x114)],'merchantUrl':_0x5e03ac[_0x5a9b86(0x105)],'gateways':_0x5e03ac[_0x5a9b86(0x11d)]?JSON['parse'](_0x5e03ac[_0x5a9b86(0x11d)]):null,'gatewaySettings':_0x5e03ac['gatewaySettings']?JSON[_0x5a9b86(0x112)](_0x5e03ac['gatewaySettings']):null,'publicKey':_0x5e03ac['publicKey'],'wallets':{'usdtPolygonWallet':_0x5e03ac[_0x5a9b86(0x121)],'usdtTrcWallet':_0x5e03ac[_0x5a9b86(0xff)],'usdtErcWallet':_0x5e03ac[_0x5a9b86(0xf0)],'usdcPolygonWallet':_0x5e03ac[_0x5a9b86(0x10b)]},'status':_0x5e03ac['status'],'createdAt':_0x5e03ac['createdAt']};}async[a51_0x2d2919(0x109)](_0x6969f6){const _0x24c688=a51_0x2d2919;await database_1[_0x24c688(0xfc)][_0x24c688(0x110)][_0x24c688(0xf8)]({'where':{'id':_0x6969f6}});}}exports['UserService']=UserService;function a51_0x80af(){const _0x23a5e0=['toString','delete','create','merchantUrl','144WQOxkW','default','208870bMihPv','crypto','usdtTrcWallet','1840837YpSHpf','password','19884304mIsACS','updateUser','3318300RDmUTb','shopUrl','publicKey','8358364CMzWqg','wallets','deleteUser','fullName','usdcPolygonWallet','createUser','47976lHWTlU','createdAt','generateApiKeys','shop','gateways','parse','gatewaySettings','telegram','findUnique','status','Username\x20already\x20exists','update','findMany','hex','randomBytes','../config/database','paymentGateways','hash','__esModule','UserService','usdtPolygonWallet','username','pk_','sk_','stringify','desc','__importDefault','usdtErcWallet','telegramId','name','ACTIVE','map','Telegram\x20username\x20already\x20exists','2159400sfEuRr'];a51_0x80af=function(){return _0x23a5e0;};return a51_0x80af();}