'use strict';const a56_0x35d171=a56_0x7a8a;(function(_0x48c034,_0x42f8d1){const _0x239955=a56_0x7a8a,_0x1d6017=_0x48c034();while(!![]){try{const _0x50db21=-parseInt(_0x239955(0xa8))/0x1*(parseInt(_0x239955(0xbc))/0x2)+-parseInt(_0x239955(0xb6))/0x3+-parseInt(_0x239955(0x99))/0x4*(-parseInt(_0x239955(0x89))/0x5)+-parseInt(_0x239955(0xb0))/0x6+parseInt(_0x239955(0xac))/0x7*(parseInt(_0x239955(0xa5))/0x8)+-parseInt(_0x239955(0x8b))/0x9*(-parseInt(_0x239955(0xa4))/0xa)+parseInt(_0x239955(0x9b))/0xb*(-parseInt(_0x239955(0xa0))/0xc);if(_0x50db21===_0x42f8d1)break;else _0x1d6017['push'](_0x1d6017['shift']());}catch(_0x256685){_0x1d6017['push'](_0x1d6017['shift']());}}}(a56_0x15e0,0x234aa));function a56_0x15e0(){const _0xd2ebeb=['130412MxTXPR','status','default','wallets','name','695PkcrwI','publicKey','9mKZGvt','desc','generateApiKeys','Telegram\x20username\x20already\x20exists','merchantUrl','stringify','ACTIVE','gateways','create','parse','telegram','update','usdtTrcWallet','fullName','4652HmNhGH','hash','3509ouMVeL','toString','password','defineProperty','createdAt','3852pyPUJz','shop','map','hex','1631910KLgoEK','6512UQimGk','usdtPolygonWallet','gatewaySettings','1VIsPKt','username','UserService','__importDefault','1701XqplsY','shopUrl','pk_','usdtErcWallet','501096mdJkol','../config/database','telegramId','getAllUsers','randomBytes','usdcPolygonWallet','380925PPceAf','crypto','__esModule','paymentGateways','bcryptjs','findUnique'];a56_0x15e0=function(){return _0xd2ebeb;};return a56_0x15e0();}var __importDefault=this&&this[a56_0x35d171(0xab)]||function(_0x1d1ed2){const _0x2d4d5e=a56_0x35d171;return _0x1d1ed2&&_0x1d1ed2[_0x2d4d5e(0xb8)]?_0x1d1ed2:{'default':_0x1d1ed2};};Object[a56_0x35d171(0x9e)](exports,'__esModule',{'value':!![]}),exports[a56_0x35d171(0xaa)]=void 0x0;const bcryptjs_1=__importDefault(require(a56_0x35d171(0xba))),crypto_1=__importDefault(require(a56_0x35d171(0xb7))),database_1=__importDefault(require(a56_0x35d171(0xb1)));class UserService{[a56_0x35d171(0x8d)](){const _0x8fc08b=a56_0x35d171,_0x20e5c2=_0x8fc08b(0xae)+crypto_1[_0x8fc08b(0xbe)][_0x8fc08b(0xb4)](0x20)[_0x8fc08b(0x9c)](_0x8fc08b(0xa3)),_0x2477a4='sk_'+crypto_1[_0x8fc08b(0xbe)]['randomBytes'](0x20)['toString'](_0x8fc08b(0xa3));return{'publicKey':_0x20e5c2,'secretKey':_0x2477a4};}async['createUser'](_0x50ca72){const _0x43bb90=a56_0x35d171,{fullName:_0x56b504,username:_0xb72216,password:_0x560233,telegramId:_0x42051e,merchantUrl:_0x24dd73,gateways:_0x3dc7ca,gatewaySettings:_0xc5ea72,wallets:_0x14512b}=_0x50ca72,_0x369075=await database_1[_0x43bb90(0xbe)][_0x43bb90(0xa1)]['findUnique']({'where':{'username':_0xb72216}});if(_0x369075)throw new Error('Username\x20already\x20exists');if(_0x42051e){const _0x180590=await database_1['default'][_0x43bb90(0xa1)][_0x43bb90(0xbb)]({'where':{'telegram':_0x42051e}});if(_0x180590)throw new Error(_0x43bb90(0x8e));}const _0x1671ba=await bcryptjs_1[_0x43bb90(0xbe)][_0x43bb90(0x9a)](_0x560233,0xc),{publicKey:_0x17f06c,secretKey:_0x41613c}=this[_0x43bb90(0x8d)](),_0x1a02d4=await database_1[_0x43bb90(0xbe)][_0x43bb90(0xa1)][_0x43bb90(0x93)]({'data':{'name':_0x56b504,'username':_0xb72216,'password':_0x1671ba,'telegram':_0x42051e,'shopUrl':_0x24dd73,'paymentGateways':_0x3dc7ca?JSON[_0x43bb90(0x90)](_0x3dc7ca):null,'gatewaySettings':_0xc5ea72?JSON[_0x43bb90(0x90)](_0xc5ea72):null,'usdtPolygonWallet':_0x14512b?.['usdtPolygonWallet']||null,'usdtTrcWallet':_0x14512b?.[_0x43bb90(0x97)]||null,'usdtErcWallet':_0x14512b?.[_0x43bb90(0xaf)]||null,'usdcPolygonWallet':_0x14512b?.['usdcPolygonWallet']||null,'publicKey':_0x17f06c,'secretKey':_0x41613c,'status':_0x43bb90(0x91)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x1a02d4['id'],'fullName':_0x1a02d4[_0x43bb90(0x88)],'username':_0x1a02d4[_0x43bb90(0xa9)],'telegramId':_0x1a02d4[_0x43bb90(0x95)],'merchantUrl':_0x1a02d4[_0x43bb90(0xad)],'gateways':_0x1a02d4[_0x43bb90(0xb9)]?JSON[_0x43bb90(0x94)](_0x1a02d4[_0x43bb90(0xb9)]):null,'gatewaySettings':_0x1a02d4['gatewaySettings']?JSON[_0x43bb90(0x94)](_0x1a02d4[_0x43bb90(0xa7)]):null,'publicKey':_0x1a02d4[_0x43bb90(0x8a)],'wallets':{'usdtPolygonWallet':_0x1a02d4[_0x43bb90(0xa6)],'usdtTrcWallet':_0x1a02d4[_0x43bb90(0x97)],'usdtErcWallet':_0x1a02d4['usdtErcWallet'],'usdcPolygonWallet':_0x1a02d4['usdcPolygonWallet']},'status':_0x1a02d4[_0x43bb90(0xbd)],'createdAt':_0x1a02d4[_0x43bb90(0x9f)]};}async[a56_0x35d171(0xb3)](){const _0xc3b4f3=a56_0x35d171,_0x523d25=await database_1[_0xc3b4f3(0xbe)][_0xc3b4f3(0xa1)]['findMany']({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':_0xc3b4f3(0x8c)}});return _0x523d25[_0xc3b4f3(0xa2)](_0x2c4d03=>({'id':_0x2c4d03['id'],'fullName':_0x2c4d03['name'],'username':_0x2c4d03['username'],'telegramId':_0x2c4d03[_0xc3b4f3(0x95)],'merchantUrl':_0x2c4d03[_0xc3b4f3(0xad)],'gateways':_0x2c4d03[_0xc3b4f3(0xb9)]?JSON['parse'](_0x2c4d03[_0xc3b4f3(0xb9)]):null,'gatewaySettings':_0x2c4d03[_0xc3b4f3(0xa7)]?JSON[_0xc3b4f3(0x94)](_0x2c4d03[_0xc3b4f3(0xa7)]):null,'publicKey':_0x2c4d03[_0xc3b4f3(0x8a)],'wallets':{'usdtPolygonWallet':_0x2c4d03[_0xc3b4f3(0xa6)],'usdtTrcWallet':_0x2c4d03[_0xc3b4f3(0x97)],'usdtErcWallet':_0x2c4d03[_0xc3b4f3(0xaf)],'usdcPolygonWallet':_0x2c4d03[_0xc3b4f3(0xb5)]},'status':_0x2c4d03[_0xc3b4f3(0xbd)],'createdAt':_0x2c4d03['createdAt']}));}async['getUserById'](_0x3b29fb){const _0x43ddb7=a56_0x35d171,_0x6db1b1=await database_1['default'][_0x43ddb7(0xa1)][_0x43ddb7(0xbb)]({'where':{'id':_0x3b29fb},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x6db1b1)return null;return{'id':_0x6db1b1['id'],'fullName':_0x6db1b1['name'],'username':_0x6db1b1[_0x43ddb7(0xa9)],'telegramId':_0x6db1b1['telegram'],'merchantUrl':_0x6db1b1[_0x43ddb7(0xad)],'gateways':_0x6db1b1[_0x43ddb7(0xb9)]?JSON[_0x43ddb7(0x94)](_0x6db1b1[_0x43ddb7(0xb9)]):null,'gatewaySettings':_0x6db1b1['gatewaySettings']?JSON[_0x43ddb7(0x94)](_0x6db1b1[_0x43ddb7(0xa7)]):null,'publicKey':_0x6db1b1[_0x43ddb7(0x8a)],'wallets':{'usdtPolygonWallet':_0x6db1b1[_0x43ddb7(0xa6)],'usdtTrcWallet':_0x6db1b1[_0x43ddb7(0x97)],'usdtErcWallet':_0x6db1b1[_0x43ddb7(0xaf)],'usdcPolygonWallet':_0x6db1b1['usdcPolygonWallet']},'status':_0x6db1b1[_0x43ddb7(0xbd)],'createdAt':_0x6db1b1[_0x43ddb7(0x9f)]};}async['updateUser'](_0x800219,_0x4e44bc){const _0x50fea8=a56_0x35d171,_0x3f9fc1={..._0x4e44bc};_0x4e44bc[_0x50fea8(0x9d)]&&(_0x3f9fc1['password']=await bcryptjs_1[_0x50fea8(0xbe)][_0x50fea8(0x9a)](_0x4e44bc['password'],0xc));_0x4e44bc[_0x50fea8(0x98)]&&(_0x3f9fc1['name']=_0x4e44bc[_0x50fea8(0x98)],delete _0x3f9fc1[_0x50fea8(0x98)]);_0x4e44bc['telegramId']&&(_0x3f9fc1[_0x50fea8(0x95)]=_0x4e44bc[_0x50fea8(0xb2)],delete _0x3f9fc1[_0x50fea8(0xb2)]);_0x4e44bc[_0x50fea8(0x8f)]&&(_0x3f9fc1[_0x50fea8(0xad)]=_0x4e44bc[_0x50fea8(0x8f)],delete _0x3f9fc1[_0x50fea8(0x8f)]);_0x4e44bc[_0x50fea8(0x92)]&&(_0x3f9fc1[_0x50fea8(0xb9)]=JSON['stringify'](_0x4e44bc[_0x50fea8(0x92)]),delete _0x3f9fc1[_0x50fea8(0x92)]);_0x4e44bc[_0x50fea8(0xa7)]&&(_0x3f9fc1['gatewaySettings']=JSON['stringify'](_0x4e44bc['gatewaySettings']),delete _0x3f9fc1[_0x50fea8(0xa7)]);_0x4e44bc[_0x50fea8(0xbf)]&&(_0x4e44bc[_0x50fea8(0xbf)]['usdtPolygonWallet']!==undefined&&(_0x3f9fc1[_0x50fea8(0xa6)]=_0x4e44bc[_0x50fea8(0xbf)][_0x50fea8(0xa6)]||null),_0x4e44bc[_0x50fea8(0xbf)][_0x50fea8(0x97)]!==undefined&&(_0x3f9fc1[_0x50fea8(0x97)]=_0x4e44bc['wallets'][_0x50fea8(0x97)]||null),_0x4e44bc[_0x50fea8(0xbf)][_0x50fea8(0xaf)]!==undefined&&(_0x3f9fc1[_0x50fea8(0xaf)]=_0x4e44bc[_0x50fea8(0xbf)][_0x50fea8(0xaf)]||null),_0x4e44bc[_0x50fea8(0xbf)]['usdcPolygonWallet']!==undefined&&(_0x3f9fc1[_0x50fea8(0xb5)]=_0x4e44bc['wallets'][_0x50fea8(0xb5)]||null),delete _0x3f9fc1['wallets']);const _0x1a5f6d=await database_1[_0x50fea8(0xbe)][_0x50fea8(0xa1)][_0x50fea8(0x96)]({'where':{'id':_0x800219},'data':_0x3f9fc1,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x1a5f6d['id'],'fullName':_0x1a5f6d[_0x50fea8(0x88)],'username':_0x1a5f6d['username'],'telegramId':_0x1a5f6d[_0x50fea8(0x95)],'merchantUrl':_0x1a5f6d[_0x50fea8(0xad)],'gateways':_0x1a5f6d[_0x50fea8(0xb9)]?JSON[_0x50fea8(0x94)](_0x1a5f6d[_0x50fea8(0xb9)]):null,'gatewaySettings':_0x1a5f6d[_0x50fea8(0xa7)]?JSON[_0x50fea8(0x94)](_0x1a5f6d['gatewaySettings']):null,'publicKey':_0x1a5f6d[_0x50fea8(0x8a)],'wallets':{'usdtPolygonWallet':_0x1a5f6d[_0x50fea8(0xa6)],'usdtTrcWallet':_0x1a5f6d[_0x50fea8(0x97)],'usdtErcWallet':_0x1a5f6d[_0x50fea8(0xaf)],'usdcPolygonWallet':_0x1a5f6d[_0x50fea8(0xb5)]},'status':_0x1a5f6d[_0x50fea8(0xbd)],'createdAt':_0x1a5f6d[_0x50fea8(0x9f)]};}async['deleteUser'](_0x4d99c3){const _0x2f61c3=a56_0x35d171;await database_1[_0x2f61c3(0xbe)][_0x2f61c3(0xa1)]['delete']({'where':{'id':_0x4d99c3}});}}function a56_0x7a8a(_0x1b2b85,_0x180e93){const _0x15e0b8=a56_0x15e0();return a56_0x7a8a=function(_0x7a8a09,_0x107bdb){_0x7a8a09=_0x7a8a09-0x88;let _0x34856a=_0x15e0b8[_0x7a8a09];return _0x34856a;},a56_0x7a8a(_0x1b2b85,_0x180e93);}exports['UserService']=UserService;