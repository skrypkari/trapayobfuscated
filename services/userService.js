'use strict';function a57_0x5c35(){const _0xa78963=['generateApiKeys','create','status','4XfBjug','default','3453540fYvOyy','Username\x20already\x20exists','randomBytes','name','gatewaySettings','paymentGateways','fullName','parse','42rarIfj','UserService','624JaVVKh','createUser','629802ZiKAIK','updateUser','bcryptjs','wallets','crypto','__esModule','username','../config/database','168355BskBVn','44347dZPTPe','usdtTrcWallet','hex','createdAt','getAllUsers','telegram','hash','findMany','toString','merchantUrl','delete','telegramId','ACTIVE','password','deleteUser','shopUrl','defineProperty','publicKey','shop','gateways','80HIUxUI','120rHAOwt','stringify','usdtPolygonWallet','map','12WWlGfB','update','usdtErcWallet','__importDefault','usdcPolygonWallet','289280lPoeEI','getUserById','128556mWMllJ'];a57_0x5c35=function(){return _0xa78963;};return a57_0x5c35();}const a57_0x1c628c=a57_0x59f5;function a57_0x59f5(_0x1da056,_0x9fec5d){const _0x5c359a=a57_0x5c35();return a57_0x59f5=function(_0x59f5d0,_0x2fc2ab){_0x59f5d0=_0x59f5d0-0xf3;let _0x1d04e8=_0x5c359a[_0x59f5d0];return _0x1d04e8;},a57_0x59f5(_0x1da056,_0x9fec5d);}(function(_0x467ddd,_0x3cc5e5){const _0x1cdf5c=a57_0x59f5,_0x64effd=_0x467ddd();while(!![]){try{const _0x17725e=-parseInt(_0x1cdf5c(0x127))/0x1*(parseInt(_0x1cdf5c(0x110))/0x2)+-parseInt(_0x1cdf5c(0x11e))/0x3+parseInt(_0x1cdf5c(0x105))/0x4*(parseInt(_0x1cdf5c(0x10a))/0x5)+parseInt(_0x1cdf5c(0x11c))/0x6*(-parseInt(_0x1cdf5c(0x11a))/0x7)+parseInt(_0x1cdf5c(0x100))/0x8*(-parseInt(_0x1cdf5c(0x10c))/0x9)+-parseInt(_0x1cdf5c(0x101))/0xa*(-parseInt(_0x1cdf5c(0x126))/0xb)+parseInt(_0x1cdf5c(0x112))/0xc;if(_0x17725e===_0x3cc5e5)break;else _0x64effd['push'](_0x64effd['shift']());}catch(_0x17fc97){_0x64effd['push'](_0x64effd['shift']());}}}(a57_0x5c35,0x318b3));var __importDefault=this&&this[a57_0x1c628c(0x108)]||function(_0x49dfb2){const _0x12dbac=a57_0x1c628c;return _0x49dfb2&&_0x49dfb2[_0x12dbac(0x123)]?_0x49dfb2:{'default':_0x49dfb2};};Object[a57_0x1c628c(0xfc)](exports,a57_0x1c628c(0x123),{'value':!![]}),exports[a57_0x1c628c(0x11b)]=void 0x0;const bcryptjs_1=__importDefault(require(a57_0x1c628c(0x120))),crypto_1=__importDefault(require(a57_0x1c628c(0x122))),database_1=__importDefault(require(a57_0x1c628c(0x125)));class UserService{[a57_0x1c628c(0x10d)](){const _0x42a009=a57_0x1c628c,_0x223883='pk_'+crypto_1['default'][_0x42a009(0x114)](0x20)['toString'](_0x42a009(0x129)),_0x5abaca='sk_'+crypto_1[_0x42a009(0x111)][_0x42a009(0x114)](0x20)[_0x42a009(0xf4)](_0x42a009(0x129));return{'publicKey':_0x223883,'secretKey':_0x5abaca};}async[a57_0x1c628c(0x11d)](_0x3dcfe6){const _0x28e27f=a57_0x1c628c,{fullName:_0xe82763,username:_0x414947,password:_0x4647e9,telegramId:_0x53d6c9,merchantUrl:_0x4a9c33,gateways:_0x240f7e,gatewaySettings:_0x33e45b,wallets:_0x131e99}=_0x3dcfe6,_0x17e25a=await database_1[_0x28e27f(0x111)][_0x28e27f(0xfe)]['findUnique']({'where':{'username':_0x414947}});if(_0x17e25a)throw new Error(_0x28e27f(0x113));if(_0x53d6c9){const _0x16704a=await database_1[_0x28e27f(0x111)][_0x28e27f(0xfe)]['findUnique']({'where':{'telegram':_0x53d6c9}});if(_0x16704a)throw new Error('Telegram\x20username\x20already\x20exists');}const _0x1e8f83=await bcryptjs_1[_0x28e27f(0x111)][_0x28e27f(0x12d)](_0x4647e9,0xc),{publicKey:_0x54ba8e,secretKey:_0x25aa7d}=this[_0x28e27f(0x10d)](),_0x2cc259=await database_1['default'][_0x28e27f(0xfe)][_0x28e27f(0x10e)]({'data':{'name':_0xe82763,'username':_0x414947,'password':_0x1e8f83,'telegram':_0x53d6c9,'shopUrl':_0x4a9c33,'paymentGateways':_0x240f7e?JSON['stringify'](_0x240f7e):null,'gatewaySettings':_0x33e45b?JSON[_0x28e27f(0x102)](_0x33e45b):null,'usdtPolygonWallet':_0x131e99?.[_0x28e27f(0x103)]||null,'usdtTrcWallet':_0x131e99?.[_0x28e27f(0x128)]||null,'usdtErcWallet':_0x131e99?.[_0x28e27f(0x107)]||null,'usdcPolygonWallet':_0x131e99?.[_0x28e27f(0x109)]||null,'publicKey':_0x54ba8e,'secretKey':_0x25aa7d,'status':_0x28e27f(0xf8)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x2cc259['id'],'fullName':_0x2cc259[_0x28e27f(0x115)],'username':_0x2cc259[_0x28e27f(0x124)],'telegramId':_0x2cc259[_0x28e27f(0x12c)],'merchantUrl':_0x2cc259[_0x28e27f(0xfb)],'gateways':_0x2cc259[_0x28e27f(0x117)]?JSON[_0x28e27f(0x119)](_0x2cc259['paymentGateways']):null,'gatewaySettings':_0x2cc259[_0x28e27f(0x116)]?JSON['parse'](_0x2cc259[_0x28e27f(0x116)]):null,'publicKey':_0x2cc259[_0x28e27f(0xfd)],'wallets':{'usdtPolygonWallet':_0x2cc259[_0x28e27f(0x103)],'usdtTrcWallet':_0x2cc259[_0x28e27f(0x128)],'usdtErcWallet':_0x2cc259['usdtErcWallet'],'usdcPolygonWallet':_0x2cc259[_0x28e27f(0x109)]},'status':_0x2cc259[_0x28e27f(0x10f)],'createdAt':_0x2cc259['createdAt']};}async[a57_0x1c628c(0x12b)](){const _0xfadab3=a57_0x1c628c,_0x3fc12b=await database_1[_0xfadab3(0x111)][_0xfadab3(0xfe)][_0xfadab3(0xf3)]({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':'desc'}});return _0x3fc12b[_0xfadab3(0x104)](_0x2b8d13=>({'id':_0x2b8d13['id'],'fullName':_0x2b8d13[_0xfadab3(0x115)],'username':_0x2b8d13['username'],'telegramId':_0x2b8d13[_0xfadab3(0x12c)],'merchantUrl':_0x2b8d13[_0xfadab3(0xfb)],'gateways':_0x2b8d13[_0xfadab3(0x117)]?JSON[_0xfadab3(0x119)](_0x2b8d13[_0xfadab3(0x117)]):null,'gatewaySettings':_0x2b8d13[_0xfadab3(0x116)]?JSON[_0xfadab3(0x119)](_0x2b8d13[_0xfadab3(0x116)]):null,'publicKey':_0x2b8d13['publicKey'],'wallets':{'usdtPolygonWallet':_0x2b8d13['usdtPolygonWallet'],'usdtTrcWallet':_0x2b8d13[_0xfadab3(0x128)],'usdtErcWallet':_0x2b8d13[_0xfadab3(0x107)],'usdcPolygonWallet':_0x2b8d13[_0xfadab3(0x109)]},'status':_0x2b8d13['status'],'createdAt':_0x2b8d13[_0xfadab3(0x12a)]}));}async[a57_0x1c628c(0x10b)](_0x4f89cf){const _0x58d6a4=a57_0x1c628c,_0x59319f=await database_1[_0x58d6a4(0x111)][_0x58d6a4(0xfe)]['findUnique']({'where':{'id':_0x4f89cf},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x59319f)return null;return{'id':_0x59319f['id'],'fullName':_0x59319f['name'],'username':_0x59319f[_0x58d6a4(0x124)],'telegramId':_0x59319f[_0x58d6a4(0x12c)],'merchantUrl':_0x59319f[_0x58d6a4(0xfb)],'gateways':_0x59319f['paymentGateways']?JSON[_0x58d6a4(0x119)](_0x59319f[_0x58d6a4(0x117)]):null,'gatewaySettings':_0x59319f[_0x58d6a4(0x116)]?JSON[_0x58d6a4(0x119)](_0x59319f[_0x58d6a4(0x116)]):null,'publicKey':_0x59319f[_0x58d6a4(0xfd)],'wallets':{'usdtPolygonWallet':_0x59319f[_0x58d6a4(0x103)],'usdtTrcWallet':_0x59319f[_0x58d6a4(0x128)],'usdtErcWallet':_0x59319f[_0x58d6a4(0x107)],'usdcPolygonWallet':_0x59319f[_0x58d6a4(0x109)]},'status':_0x59319f[_0x58d6a4(0x10f)],'createdAt':_0x59319f[_0x58d6a4(0x12a)]};}async[a57_0x1c628c(0x11f)](_0x1df19e,_0x28c1e7){const _0x306264=a57_0x1c628c,_0x1aa1e9={..._0x28c1e7};_0x28c1e7[_0x306264(0xf9)]&&(_0x1aa1e9['password']=await bcryptjs_1[_0x306264(0x111)]['hash'](_0x28c1e7['password'],0xc));_0x28c1e7[_0x306264(0x118)]&&(_0x1aa1e9[_0x306264(0x115)]=_0x28c1e7[_0x306264(0x118)],delete _0x1aa1e9[_0x306264(0x118)]);_0x28c1e7[_0x306264(0xf7)]&&(_0x1aa1e9[_0x306264(0x12c)]=_0x28c1e7[_0x306264(0xf7)],delete _0x1aa1e9[_0x306264(0xf7)]);_0x28c1e7[_0x306264(0xf5)]&&(_0x1aa1e9['shopUrl']=_0x28c1e7[_0x306264(0xf5)],delete _0x1aa1e9[_0x306264(0xf5)]);_0x28c1e7[_0x306264(0xff)]&&(_0x1aa1e9[_0x306264(0x117)]=JSON[_0x306264(0x102)](_0x28c1e7[_0x306264(0xff)]),delete _0x1aa1e9['gateways']);_0x28c1e7[_0x306264(0x116)]&&(_0x1aa1e9['gatewaySettings']=JSON[_0x306264(0x102)](_0x28c1e7[_0x306264(0x116)]),delete _0x1aa1e9['gatewaySettings']);_0x28c1e7[_0x306264(0x121)]&&(_0x28c1e7[_0x306264(0x121)]['usdtPolygonWallet']!==undefined&&(_0x1aa1e9[_0x306264(0x103)]=_0x28c1e7[_0x306264(0x121)]['usdtPolygonWallet']||null),_0x28c1e7['wallets'][_0x306264(0x128)]!==undefined&&(_0x1aa1e9['usdtTrcWallet']=_0x28c1e7[_0x306264(0x121)][_0x306264(0x128)]||null),_0x28c1e7[_0x306264(0x121)][_0x306264(0x107)]!==undefined&&(_0x1aa1e9['usdtErcWallet']=_0x28c1e7['wallets'][_0x306264(0x107)]||null),_0x28c1e7[_0x306264(0x121)][_0x306264(0x109)]!==undefined&&(_0x1aa1e9['usdcPolygonWallet']=_0x28c1e7[_0x306264(0x121)][_0x306264(0x109)]||null),delete _0x1aa1e9['wallets']);const _0x3d17ee=await database_1[_0x306264(0x111)][_0x306264(0xfe)][_0x306264(0x106)]({'where':{'id':_0x1df19e},'data':_0x1aa1e9,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x3d17ee['id'],'fullName':_0x3d17ee[_0x306264(0x115)],'username':_0x3d17ee['username'],'telegramId':_0x3d17ee[_0x306264(0x12c)],'merchantUrl':_0x3d17ee[_0x306264(0xfb)],'gateways':_0x3d17ee['paymentGateways']?JSON[_0x306264(0x119)](_0x3d17ee[_0x306264(0x117)]):null,'gatewaySettings':_0x3d17ee[_0x306264(0x116)]?JSON[_0x306264(0x119)](_0x3d17ee[_0x306264(0x116)]):null,'publicKey':_0x3d17ee['publicKey'],'wallets':{'usdtPolygonWallet':_0x3d17ee[_0x306264(0x103)],'usdtTrcWallet':_0x3d17ee['usdtTrcWallet'],'usdtErcWallet':_0x3d17ee[_0x306264(0x107)],'usdcPolygonWallet':_0x3d17ee[_0x306264(0x109)]},'status':_0x3d17ee[_0x306264(0x10f)],'createdAt':_0x3d17ee[_0x306264(0x12a)]};}async[a57_0x1c628c(0xfa)](_0x3cac7e){const _0xac268c=a57_0x1c628c;await database_1[_0xac268c(0x111)]['shop'][_0xac268c(0xf6)]({'where':{'id':_0x3cac7e}});}}exports[a57_0x1c628c(0x11b)]=UserService;