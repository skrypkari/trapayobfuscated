'use strict';function a89_0x2c53(_0x1e768d,_0x1c43ae){_0x1e768d=_0x1e768d-0x185;const _0x4aaa54=a89_0x4aaa();let _0x2c5392=_0x4aaa54[_0x1e768d];return _0x2c5392;}const a89_0x2cab81=a89_0x2c53;(function(_0x387b75,_0x163a1b){const _0x4312d9=a89_0x2c53,_0x2cb708=_0x387b75();while(!![]){try{const _0x3c939d=-parseInt(_0x4312d9(0x1ac))/0x1+-parseInt(_0x4312d9(0x18a))/0x2*(-parseInt(_0x4312d9(0x187))/0x3)+parseInt(_0x4312d9(0x19b))/0x4+parseInt(_0x4312d9(0x199))/0x5*(-parseInt(_0x4312d9(0x1af))/0x6)+parseInt(_0x4312d9(0x1b3))/0x7+-parseInt(_0x4312d9(0x185))/0x8*(-parseInt(_0x4312d9(0x195))/0x9)+parseInt(_0x4312d9(0x18e))/0xa;if(_0x3c939d===_0x163a1b)break;else _0x2cb708['push'](_0x2cb708['shift']());}catch(_0x1fb5ec){_0x2cb708['push'](_0x2cb708['shift']());}}}(a89_0x4aaa,0xe2d7f));var __importDefault=this&&this['__importDefault']||function(_0x87ec8b){const _0x37d770=a89_0x2c53;return _0x87ec8b&&_0x87ec8b[_0x37d770(0x1a7)]?_0x87ec8b:{'default':_0x87ec8b};};Object[a89_0x2cab81(0x19f)](exports,a89_0x2cab81(0x1a7),{'value':!![]}),exports[a89_0x2cab81(0x19a)]=void 0x0;const bcryptjs_1=__importDefault(require(a89_0x2cab81(0x1b4))),crypto_1=__importDefault(require(a89_0x2cab81(0x1b1))),database_1=__importDefault(require('../config/database'));function a89_0x4aaa(){const _0x48a6d1=['fullName','usdtPolygonWallet','17950970WPzjEx','toString','status','publicKey','username','gateways','wallets','9SgyIwN','stringify','telegramId','updateUser','50iqzIyb','UserService','731888cxcWjq','desc','usdcPolygonWallet','pk_','defineProperty','delete','getUserById','createdAt','merchantUrl','shop','randomBytes','create','__esModule','paymentGateways','usdtTrcWallet','generateApiKeys','Username\x20already\x20exists','1781907UqKfEq','gatewaySettings','shopUrl','774978wfhTbb','password','crypto','usdtErcWallet','7896518cNjLFB','bcryptjs','Telegram\x20username\x20already\x20exists','map','findMany','findUnique','hex','default','6146136fqQclS','telegram','93UGsktO','parse','update','8276nLYaVK','name'];a89_0x4aaa=function(){return _0x48a6d1;};return a89_0x4aaa();}class UserService{['generateApiKeys'](){const _0x61b8ab=a89_0x2cab81,_0x1d1339=_0x61b8ab(0x19e)+crypto_1['default'][_0x61b8ab(0x1a5)](0x20)[_0x61b8ab(0x18f)](_0x61b8ab(0x1b9)),_0x369fab='sk_'+crypto_1['default'][_0x61b8ab(0x1a5)](0x20)[_0x61b8ab(0x18f)](_0x61b8ab(0x1b9));return{'publicKey':_0x1d1339,'secretKey':_0x369fab};}async['createUser'](_0x498130){const _0x2232b9=a89_0x2cab81,{fullName:_0x548888,username:_0x333314,password:_0x4ee99a,telegramId:_0x2d5740,merchantUrl:_0x226532,gateways:_0xed0c2a,gatewaySettings:_0x1e636d,wallets:_0x501247}=_0x498130,_0x19c205=await database_1[_0x2232b9(0x1ba)][_0x2232b9(0x1a4)][_0x2232b9(0x1b8)]({'where':{'username':_0x333314}});if(_0x19c205)throw new Error(_0x2232b9(0x1ab));if(_0x2d5740){const _0x343e4a=await database_1[_0x2232b9(0x1ba)][_0x2232b9(0x1a4)]['findUnique']({'where':{'telegram':_0x2d5740}});if(_0x343e4a)throw new Error(_0x2232b9(0x1b5));}const _0x51b51c=await bcryptjs_1['default']['hash'](_0x4ee99a,0xc),{publicKey:_0x28306d,secretKey:_0x5b8a00}=this[_0x2232b9(0x1aa)](),_0x1c26bd=await database_1[_0x2232b9(0x1ba)]['shop'][_0x2232b9(0x1a6)]({'data':{'name':_0x548888,'username':_0x333314,'password':_0x51b51c,'telegram':_0x2d5740,'shopUrl':_0x226532,'paymentGateways':_0xed0c2a?JSON[_0x2232b9(0x196)](_0xed0c2a):null,'gatewaySettings':_0x1e636d?JSON['stringify'](_0x1e636d):null,'usdtPolygonWallet':_0x501247?.['usdtPolygonWallet']||null,'usdtTrcWallet':_0x501247?.['usdtTrcWallet']||null,'usdtErcWallet':_0x501247?.['usdtErcWallet']||null,'usdcPolygonWallet':_0x501247?.['usdcPolygonWallet']||null,'publicKey':_0x28306d,'secretKey':_0x5b8a00,'status':'ACTIVE'},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x1c26bd['id'],'fullName':_0x1c26bd['name'],'username':_0x1c26bd[_0x2232b9(0x192)],'telegramId':_0x1c26bd['telegram'],'merchantUrl':_0x1c26bd['shopUrl'],'gateways':_0x1c26bd[_0x2232b9(0x1a8)]?JSON[_0x2232b9(0x188)](_0x1c26bd['paymentGateways']):null,'gatewaySettings':_0x1c26bd[_0x2232b9(0x1ad)]?JSON[_0x2232b9(0x188)](_0x1c26bd[_0x2232b9(0x1ad)]):null,'publicKey':_0x1c26bd[_0x2232b9(0x191)],'wallets':{'usdtPolygonWallet':_0x1c26bd['usdtPolygonWallet'],'usdtTrcWallet':_0x1c26bd['usdtTrcWallet'],'usdtErcWallet':_0x1c26bd[_0x2232b9(0x1b2)],'usdcPolygonWallet':_0x1c26bd[_0x2232b9(0x19d)]},'status':_0x1c26bd[_0x2232b9(0x190)],'createdAt':_0x1c26bd['createdAt']};}async['getAllUsers'](){const _0x329798=a89_0x2cab81,_0x144338=await database_1[_0x329798(0x1ba)][_0x329798(0x1a4)][_0x329798(0x1b7)]({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':_0x329798(0x19c)}});return _0x144338[_0x329798(0x1b6)](_0x5a950a=>({'id':_0x5a950a['id'],'fullName':_0x5a950a[_0x329798(0x18b)],'username':_0x5a950a[_0x329798(0x192)],'telegramId':_0x5a950a[_0x329798(0x186)],'merchantUrl':_0x5a950a[_0x329798(0x1ae)],'gateways':_0x5a950a['paymentGateways']?JSON[_0x329798(0x188)](_0x5a950a[_0x329798(0x1a8)]):null,'gatewaySettings':_0x5a950a[_0x329798(0x1ad)]?JSON[_0x329798(0x188)](_0x5a950a[_0x329798(0x1ad)]):null,'publicKey':_0x5a950a[_0x329798(0x191)],'wallets':{'usdtPolygonWallet':_0x5a950a[_0x329798(0x18d)],'usdtTrcWallet':_0x5a950a[_0x329798(0x1a9)],'usdtErcWallet':_0x5a950a[_0x329798(0x1b2)],'usdcPolygonWallet':_0x5a950a[_0x329798(0x19d)]},'status':_0x5a950a[_0x329798(0x190)],'createdAt':_0x5a950a['createdAt']}));}async[a89_0x2cab81(0x1a1)](_0x327bf2){const _0x3e998c=a89_0x2cab81,_0x3fcb2c=await database_1[_0x3e998c(0x1ba)][_0x3e998c(0x1a4)][_0x3e998c(0x1b8)]({'where':{'id':_0x327bf2},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x3fcb2c)return null;return{'id':_0x3fcb2c['id'],'fullName':_0x3fcb2c[_0x3e998c(0x18b)],'username':_0x3fcb2c[_0x3e998c(0x192)],'telegramId':_0x3fcb2c[_0x3e998c(0x186)],'merchantUrl':_0x3fcb2c['shopUrl'],'gateways':_0x3fcb2c[_0x3e998c(0x1a8)]?JSON[_0x3e998c(0x188)](_0x3fcb2c[_0x3e998c(0x1a8)]):null,'gatewaySettings':_0x3fcb2c[_0x3e998c(0x1ad)]?JSON[_0x3e998c(0x188)](_0x3fcb2c[_0x3e998c(0x1ad)]):null,'publicKey':_0x3fcb2c[_0x3e998c(0x191)],'wallets':{'usdtPolygonWallet':_0x3fcb2c[_0x3e998c(0x18d)],'usdtTrcWallet':_0x3fcb2c['usdtTrcWallet'],'usdtErcWallet':_0x3fcb2c[_0x3e998c(0x1b2)],'usdcPolygonWallet':_0x3fcb2c[_0x3e998c(0x19d)]},'status':_0x3fcb2c[_0x3e998c(0x190)],'createdAt':_0x3fcb2c[_0x3e998c(0x1a2)]};}async[a89_0x2cab81(0x198)](_0x29155c,_0x5009d4){const _0x2996a6=a89_0x2cab81,_0x310f7a={..._0x5009d4};_0x5009d4[_0x2996a6(0x1b0)]&&(_0x310f7a[_0x2996a6(0x1b0)]=await bcryptjs_1[_0x2996a6(0x1ba)]['hash'](_0x5009d4[_0x2996a6(0x1b0)],0xc));_0x5009d4[_0x2996a6(0x18c)]&&(_0x310f7a['name']=_0x5009d4['fullName'],delete _0x310f7a[_0x2996a6(0x18c)]);_0x5009d4['telegramId']&&(_0x310f7a[_0x2996a6(0x186)]=_0x5009d4[_0x2996a6(0x197)],delete _0x310f7a[_0x2996a6(0x197)]);_0x5009d4[_0x2996a6(0x1a3)]&&(_0x310f7a[_0x2996a6(0x1ae)]=_0x5009d4[_0x2996a6(0x1a3)],delete _0x310f7a['merchantUrl']);_0x5009d4[_0x2996a6(0x193)]&&(_0x310f7a['paymentGateways']=JSON[_0x2996a6(0x196)](_0x5009d4['gateways']),delete _0x310f7a[_0x2996a6(0x193)]);_0x5009d4[_0x2996a6(0x1ad)]&&(_0x310f7a[_0x2996a6(0x1ad)]=JSON['stringify'](_0x5009d4[_0x2996a6(0x1ad)]),delete _0x310f7a[_0x2996a6(0x1ad)]);_0x5009d4[_0x2996a6(0x194)]&&(_0x5009d4[_0x2996a6(0x194)][_0x2996a6(0x18d)]!==undefined&&(_0x310f7a['usdtPolygonWallet']=_0x5009d4[_0x2996a6(0x194)][_0x2996a6(0x18d)]||null),_0x5009d4[_0x2996a6(0x194)]['usdtTrcWallet']!==undefined&&(_0x310f7a[_0x2996a6(0x1a9)]=_0x5009d4[_0x2996a6(0x194)][_0x2996a6(0x1a9)]||null),_0x5009d4['wallets'][_0x2996a6(0x1b2)]!==undefined&&(_0x310f7a[_0x2996a6(0x1b2)]=_0x5009d4['wallets'][_0x2996a6(0x1b2)]||null),_0x5009d4[_0x2996a6(0x194)][_0x2996a6(0x19d)]!==undefined&&(_0x310f7a[_0x2996a6(0x19d)]=_0x5009d4['wallets'][_0x2996a6(0x19d)]||null),delete _0x310f7a[_0x2996a6(0x194)]);const _0x406208=await database_1[_0x2996a6(0x1ba)][_0x2996a6(0x1a4)][_0x2996a6(0x189)]({'where':{'id':_0x29155c},'data':_0x310f7a,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x406208['id'],'fullName':_0x406208[_0x2996a6(0x18b)],'username':_0x406208[_0x2996a6(0x192)],'telegramId':_0x406208[_0x2996a6(0x186)],'merchantUrl':_0x406208[_0x2996a6(0x1ae)],'gateways':_0x406208['paymentGateways']?JSON[_0x2996a6(0x188)](_0x406208[_0x2996a6(0x1a8)]):null,'gatewaySettings':_0x406208[_0x2996a6(0x1ad)]?JSON[_0x2996a6(0x188)](_0x406208[_0x2996a6(0x1ad)]):null,'publicKey':_0x406208[_0x2996a6(0x191)],'wallets':{'usdtPolygonWallet':_0x406208[_0x2996a6(0x18d)],'usdtTrcWallet':_0x406208[_0x2996a6(0x1a9)],'usdtErcWallet':_0x406208['usdtErcWallet'],'usdcPolygonWallet':_0x406208['usdcPolygonWallet']},'status':_0x406208[_0x2996a6(0x190)],'createdAt':_0x406208[_0x2996a6(0x1a2)]};}async['deleteUser'](_0x359dee){const _0x49e2db=a89_0x2cab81;await database_1[_0x49e2db(0x1ba)][_0x49e2db(0x1a4)][_0x49e2db(0x1a0)]({'where':{'id':_0x359dee}});}}exports[a89_0x2cab81(0x19a)]=UserService;