'use strict';function a56_0x2559(_0x3f4e7d,_0x2b3c79){const _0x2cafa4=a56_0x2caf();return a56_0x2559=function(_0x2559c9,_0x405c4a){_0x2559c9=_0x2559c9-0x1c1;let _0x10cf9d=_0x2cafa4[_0x2559c9];return _0x10cf9d;},a56_0x2559(_0x3f4e7d,_0x2b3c79);}const a56_0x412dd2=a56_0x2559;(function(_0x1d071e,_0x5448ad){const _0x1eb764=a56_0x2559,_0x2b9f9d=_0x1d071e();while(!![]){try{const _0x32b5ae=parseInt(_0x1eb764(0x1dd))/0x1*(parseInt(_0x1eb764(0x1f1))/0x2)+-parseInt(_0x1eb764(0x1fb))/0x3*(parseInt(_0x1eb764(0x1e3))/0x4)+parseInt(_0x1eb764(0x1f8))/0x5*(parseInt(_0x1eb764(0x1dc))/0x6)+parseInt(_0x1eb764(0x1f5))/0x7*(parseInt(_0x1eb764(0x1d6))/0x8)+parseInt(_0x1eb764(0x1ca))/0x9*(-parseInt(_0x1eb764(0x1f0))/0xa)+parseInt(_0x1eb764(0x1e2))/0xb+-parseInt(_0x1eb764(0x1cb))/0xc*(parseInt(_0x1eb764(0x1da))/0xd);if(_0x32b5ae===_0x5448ad)break;else _0x2b9f9d['push'](_0x2b9f9d['shift']());}catch(_0x429e00){_0x2b9f9d['push'](_0x2b9f9d['shift']());}}}(a56_0x2caf,0xa3907));var __importDefault=this&&this[a56_0x412dd2(0x1e1)]||function(_0x466092){return _0x466092&&_0x466092['__esModule']?_0x466092:{'default':_0x466092};};Object[a56_0x412dd2(0x1cf)](exports,a56_0x412dd2(0x1d8),{'value':!![]}),exports['UserService']=void 0x0;function a56_0x2caf(){const _0x922da8=['usdtPolygonWallet','username','3prLSWn','desc','bcryptjs','stringify','Username\x20already\x20exists','generateApiKeys','telegram','usdcPolygonWallet','getUserById','pk_','findUnique','hash','279fSqQLC','246084LcDpol','sk_','usdtTrcWallet','shopUrl','defineProperty','default','password','usdtErcWallet','merchantUrl','UserService','updateUser','296ajhWXn','publicKey','__esModule','getAllUsers','2119dtaXhG','toString','6rxUBxe','76316tEOENd','wallets','gateways','ACTIVE','__importDefault','14567894uptlCh','31952vRPSow','crypto','findMany','parse','telegramId','hex','Telegram\x20username\x20already\x20exists','update','randomBytes','shop','createUser','map','fullName','235510LANVCp','34emFvyD','gatewaySettings','name','paymentGateways','149352UZzDAH','createdAt','status','6697555RMAKPD'];a56_0x2caf=function(){return _0x922da8;};return a56_0x2caf();}const bcryptjs_1=__importDefault(require(a56_0x412dd2(0x1fd))),crypto_1=__importDefault(require(a56_0x412dd2(0x1e4))),database_1=__importDefault(require('../config/database'));class UserService{[a56_0x412dd2(0x1c3)](){const _0x1fc440=a56_0x412dd2,_0xa2d323=_0x1fc440(0x1c7)+crypto_1[_0x1fc440(0x1d0)][_0x1fc440(0x1eb)](0x20)['toString'](_0x1fc440(0x1e8)),_0x423d54=_0x1fc440(0x1cc)+crypto_1[_0x1fc440(0x1d0)][_0x1fc440(0x1eb)](0x20)[_0x1fc440(0x1db)]('hex');return{'publicKey':_0xa2d323,'secretKey':_0x423d54};}async[a56_0x412dd2(0x1ed)](_0x288688){const _0x5d0f25=a56_0x412dd2,{fullName:_0x1a43af,username:_0x8658b1,password:_0x1df5c,telegramId:_0x4788eb,merchantUrl:_0x285136,gateways:_0xf61acb,gatewaySettings:_0x29ade1,wallets:_0x44919f}=_0x288688,_0x3f2bac=await database_1[_0x5d0f25(0x1d0)]['shop'][_0x5d0f25(0x1c8)]({'where':{'username':_0x8658b1}});if(_0x3f2bac)throw new Error(_0x5d0f25(0x1c2));if(_0x4788eb){const _0x55ae97=await database_1[_0x5d0f25(0x1d0)]['shop'][_0x5d0f25(0x1c8)]({'where':{'telegram':_0x4788eb}});if(_0x55ae97)throw new Error(_0x5d0f25(0x1e9));}const _0x562885=await bcryptjs_1['default'][_0x5d0f25(0x1c9)](_0x1df5c,0xc),{publicKey:_0x1170b8,secretKey:_0x54aca6}=this[_0x5d0f25(0x1c3)](),_0x35937a=await database_1[_0x5d0f25(0x1d0)][_0x5d0f25(0x1ec)]['create']({'data':{'name':_0x1a43af,'username':_0x8658b1,'password':_0x562885,'telegram':_0x4788eb,'shopUrl':_0x285136,'paymentGateways':_0xf61acb?JSON[_0x5d0f25(0x1c1)](_0xf61acb):null,'gatewaySettings':_0x29ade1?JSON['stringify'](_0x29ade1):null,'usdtPolygonWallet':_0x44919f?.['usdtPolygonWallet']||null,'usdtTrcWallet':_0x44919f?.[_0x5d0f25(0x1cd)]||null,'usdtErcWallet':_0x44919f?.[_0x5d0f25(0x1d2)]||null,'usdcPolygonWallet':_0x44919f?.[_0x5d0f25(0x1c5)]||null,'publicKey':_0x1170b8,'secretKey':_0x54aca6,'status':_0x5d0f25(0x1e0)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x35937a['id'],'fullName':_0x35937a[_0x5d0f25(0x1f3)],'username':_0x35937a['username'],'telegramId':_0x35937a[_0x5d0f25(0x1c4)],'merchantUrl':_0x35937a[_0x5d0f25(0x1ce)],'gateways':_0x35937a[_0x5d0f25(0x1f4)]?JSON[_0x5d0f25(0x1e6)](_0x35937a[_0x5d0f25(0x1f4)]):null,'gatewaySettings':_0x35937a[_0x5d0f25(0x1f2)]?JSON[_0x5d0f25(0x1e6)](_0x35937a['gatewaySettings']):null,'publicKey':_0x35937a['publicKey'],'wallets':{'usdtPolygonWallet':_0x35937a[_0x5d0f25(0x1f9)],'usdtTrcWallet':_0x35937a[_0x5d0f25(0x1cd)],'usdtErcWallet':_0x35937a[_0x5d0f25(0x1d2)],'usdcPolygonWallet':_0x35937a[_0x5d0f25(0x1c5)]},'status':_0x35937a[_0x5d0f25(0x1f7)],'createdAt':_0x35937a[_0x5d0f25(0x1f6)]};}async[a56_0x412dd2(0x1d9)](){const _0x5ec076=a56_0x412dd2,_0x3e642d=await database_1[_0x5ec076(0x1d0)][_0x5ec076(0x1ec)][_0x5ec076(0x1e5)]({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':_0x5ec076(0x1fc)}});return _0x3e642d[_0x5ec076(0x1ee)](_0xff1b41=>({'id':_0xff1b41['id'],'fullName':_0xff1b41['name'],'username':_0xff1b41[_0x5ec076(0x1fa)],'telegramId':_0xff1b41[_0x5ec076(0x1c4)],'merchantUrl':_0xff1b41[_0x5ec076(0x1ce)],'gateways':_0xff1b41['paymentGateways']?JSON[_0x5ec076(0x1e6)](_0xff1b41[_0x5ec076(0x1f4)]):null,'gatewaySettings':_0xff1b41[_0x5ec076(0x1f2)]?JSON[_0x5ec076(0x1e6)](_0xff1b41[_0x5ec076(0x1f2)]):null,'publicKey':_0xff1b41['publicKey'],'wallets':{'usdtPolygonWallet':_0xff1b41['usdtPolygonWallet'],'usdtTrcWallet':_0xff1b41[_0x5ec076(0x1cd)],'usdtErcWallet':_0xff1b41[_0x5ec076(0x1d2)],'usdcPolygonWallet':_0xff1b41[_0x5ec076(0x1c5)]},'status':_0xff1b41[_0x5ec076(0x1f7)],'createdAt':_0xff1b41[_0x5ec076(0x1f6)]}));}async[a56_0x412dd2(0x1c6)](_0x1ac64f){const _0x40a967=a56_0x412dd2,_0x135ec1=await database_1['default'][_0x40a967(0x1ec)][_0x40a967(0x1c8)]({'where':{'id':_0x1ac64f},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0x135ec1)return null;return{'id':_0x135ec1['id'],'fullName':_0x135ec1[_0x40a967(0x1f3)],'username':_0x135ec1[_0x40a967(0x1fa)],'telegramId':_0x135ec1[_0x40a967(0x1c4)],'merchantUrl':_0x135ec1['shopUrl'],'gateways':_0x135ec1['paymentGateways']?JSON[_0x40a967(0x1e6)](_0x135ec1[_0x40a967(0x1f4)]):null,'gatewaySettings':_0x135ec1[_0x40a967(0x1f2)]?JSON[_0x40a967(0x1e6)](_0x135ec1[_0x40a967(0x1f2)]):null,'publicKey':_0x135ec1[_0x40a967(0x1d7)],'wallets':{'usdtPolygonWallet':_0x135ec1[_0x40a967(0x1f9)],'usdtTrcWallet':_0x135ec1[_0x40a967(0x1cd)],'usdtErcWallet':_0x135ec1['usdtErcWallet'],'usdcPolygonWallet':_0x135ec1[_0x40a967(0x1c5)]},'status':_0x135ec1[_0x40a967(0x1f7)],'createdAt':_0x135ec1[_0x40a967(0x1f6)]};}async[a56_0x412dd2(0x1d5)](_0x31482b,_0x2f763a){const _0x42f445=a56_0x412dd2,_0x368946={..._0x2f763a};_0x2f763a[_0x42f445(0x1d1)]&&(_0x368946[_0x42f445(0x1d1)]=await bcryptjs_1['default'][_0x42f445(0x1c9)](_0x2f763a[_0x42f445(0x1d1)],0xc));_0x2f763a[_0x42f445(0x1ef)]&&(_0x368946[_0x42f445(0x1f3)]=_0x2f763a[_0x42f445(0x1ef)],delete _0x368946[_0x42f445(0x1ef)]);_0x2f763a[_0x42f445(0x1e7)]&&(_0x368946[_0x42f445(0x1c4)]=_0x2f763a['telegramId'],delete _0x368946['telegramId']);_0x2f763a[_0x42f445(0x1d3)]&&(_0x368946[_0x42f445(0x1ce)]=_0x2f763a[_0x42f445(0x1d3)],delete _0x368946['merchantUrl']);_0x2f763a[_0x42f445(0x1df)]&&(_0x368946[_0x42f445(0x1f4)]=JSON['stringify'](_0x2f763a['gateways']),delete _0x368946['gateways']);_0x2f763a[_0x42f445(0x1f2)]&&(_0x368946['gatewaySettings']=JSON['stringify'](_0x2f763a[_0x42f445(0x1f2)]),delete _0x368946['gatewaySettings']);_0x2f763a[_0x42f445(0x1de)]&&(_0x2f763a[_0x42f445(0x1de)]['usdtPolygonWallet']!==undefined&&(_0x368946[_0x42f445(0x1f9)]=_0x2f763a['wallets'][_0x42f445(0x1f9)]||null),_0x2f763a[_0x42f445(0x1de)][_0x42f445(0x1cd)]!==undefined&&(_0x368946['usdtTrcWallet']=_0x2f763a[_0x42f445(0x1de)][_0x42f445(0x1cd)]||null),_0x2f763a[_0x42f445(0x1de)]['usdtErcWallet']!==undefined&&(_0x368946[_0x42f445(0x1d2)]=_0x2f763a['wallets'][_0x42f445(0x1d2)]||null),_0x2f763a['wallets']['usdcPolygonWallet']!==undefined&&(_0x368946[_0x42f445(0x1c5)]=_0x2f763a['wallets'][_0x42f445(0x1c5)]||null),delete _0x368946[_0x42f445(0x1de)]);const _0x4681e0=await database_1['default'][_0x42f445(0x1ec)][_0x42f445(0x1ea)]({'where':{'id':_0x31482b},'data':_0x368946,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x4681e0['id'],'fullName':_0x4681e0[_0x42f445(0x1f3)],'username':_0x4681e0[_0x42f445(0x1fa)],'telegramId':_0x4681e0[_0x42f445(0x1c4)],'merchantUrl':_0x4681e0[_0x42f445(0x1ce)],'gateways':_0x4681e0[_0x42f445(0x1f4)]?JSON[_0x42f445(0x1e6)](_0x4681e0[_0x42f445(0x1f4)]):null,'gatewaySettings':_0x4681e0[_0x42f445(0x1f2)]?JSON[_0x42f445(0x1e6)](_0x4681e0[_0x42f445(0x1f2)]):null,'publicKey':_0x4681e0[_0x42f445(0x1d7)],'wallets':{'usdtPolygonWallet':_0x4681e0['usdtPolygonWallet'],'usdtTrcWallet':_0x4681e0['usdtTrcWallet'],'usdtErcWallet':_0x4681e0[_0x42f445(0x1d2)],'usdcPolygonWallet':_0x4681e0[_0x42f445(0x1c5)]},'status':_0x4681e0[_0x42f445(0x1f7)],'createdAt':_0x4681e0[_0x42f445(0x1f6)]};}async['deleteUser'](_0x55bc5c){const _0x2cb0f9=a56_0x412dd2;await database_1['default'][_0x2cb0f9(0x1ec)]['delete']({'where':{'id':_0x55bc5c}});}}exports[a56_0x412dd2(0x1d4)]=UserService;