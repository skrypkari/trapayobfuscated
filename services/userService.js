'use strict';const a56_0x43d0d7=a56_0x28ff;function a56_0x28ff(_0x282346,_0x439da4){const _0x31fffb=a56_0x31ff();return a56_0x28ff=function(_0x28ff96,_0x15fdcc){_0x28ff96=_0x28ff96-0xb8;let _0x3de9d1=_0x31fffb[_0x28ff96];return _0x3de9d1;},a56_0x28ff(_0x282346,_0x439da4);}(function(_0x29a936,_0x62495d){const _0x500f8f=a56_0x28ff,_0x3091f5=_0x29a936();while(!![]){try{const _0x177d36=-parseInt(_0x500f8f(0xd2))/0x1*(parseInt(_0x500f8f(0xed))/0x2)+-parseInt(_0x500f8f(0xe6))/0x3+parseInt(_0x500f8f(0xe1))/0x4+-parseInt(_0x500f8f(0xb8))/0x5*(parseInt(_0x500f8f(0xde))/0x6)+-parseInt(_0x500f8f(0xc6))/0x7*(-parseInt(_0x500f8f(0xdd))/0x8)+-parseInt(_0x500f8f(0xc3))/0x9+parseInt(_0x500f8f(0xd8))/0xa;if(_0x177d36===_0x62495d)break;else _0x3091f5['push'](_0x3091f5['shift']());}catch(_0x227a81){_0x3091f5['push'](_0x3091f5['shift']());}}}(a56_0x31ff,0x2f260));var __importDefault=this&&this[a56_0x43d0d7(0xcc)]||function(_0xaedf77){const _0x4f8bff=a56_0x43d0d7;return _0xaedf77&&_0xaedf77[_0x4f8bff(0xbc)]?_0xaedf77:{'default':_0xaedf77};};Object[a56_0x43d0d7(0xc5)](exports,a56_0x43d0d7(0xbc),{'value':!![]}),exports[a56_0x43d0d7(0xd3)]=void 0x0;function a56_0x31ff(){const _0xb25a7a=['usdcPolygonWallet','sk_','usdtPolygonWallet','gatewaySettings','getUserById','__importDefault','telegram','telegramId','findUnique','updateUser','hex','1reOJcc','UserService','deleteUser','paymentGateways','shopUrl','delete','4018800QKuMje','randomBytes','map','merchantUrl','bcryptjs','1204256fmnKfs','36NHYdSn','pk_','wallets','1179056yxRuYV','createUser','publicKey','ACTIVE','gateways','134037RxoMyD','create','usdtErcWallet','Telegram\x20username\x20already\x20exists','status','findMany','shop','564364rUWeEJ','parse','usdtTrcWallet','97655wGEUhc','fullName','stringify','password','__esModule','Username\x20already\x20exists','name','generateApiKeys','getAllUsers','username','default','1890081rzKtwB','createdAt','defineProperty','7XwOYfv'];a56_0x31ff=function(){return _0xb25a7a;};return a56_0x31ff();}const bcryptjs_1=__importDefault(require(a56_0x43d0d7(0xdc))),crypto_1=__importDefault(require('crypto')),database_1=__importDefault(require('../config/database'));class UserService{[a56_0x43d0d7(0xbf)](){const _0x12c67f=a56_0x43d0d7,_0x3bad49=_0x12c67f(0xdf)+crypto_1['default'][_0x12c67f(0xd9)](0x20)['toString'](_0x12c67f(0xd1)),_0x4b592c=_0x12c67f(0xc8)+crypto_1[_0x12c67f(0xc2)]['randomBytes'](0x20)['toString'](_0x12c67f(0xd1));return{'publicKey':_0x3bad49,'secretKey':_0x4b592c};}async[a56_0x43d0d7(0xe2)](_0x312ba7){const _0x240c34=a56_0x43d0d7,{fullName:_0x22edaf,username:_0x277417,password:_0x249def,telegramId:_0x6ea64c,merchantUrl:_0x5b96ec,gateways:_0x22bfc3,gatewaySettings:_0x17caa1,wallets:_0x482c43}=_0x312ba7,_0x44302a=await database_1['default']['shop'][_0x240c34(0xcf)]({'where':{'username':_0x277417}});if(_0x44302a)throw new Error(_0x240c34(0xbd));if(_0x6ea64c){const _0x488706=await database_1[_0x240c34(0xc2)][_0x240c34(0xec)]['findUnique']({'where':{'telegram':_0x6ea64c}});if(_0x488706)throw new Error(_0x240c34(0xe9));}const _0x43aca5=await bcryptjs_1['default']['hash'](_0x249def,0xc),{publicKey:_0x54c33e,secretKey:_0x3f2ca8}=this[_0x240c34(0xbf)](),_0x570620=await database_1[_0x240c34(0xc2)]['shop'][_0x240c34(0xe7)]({'data':{'name':_0x22edaf,'username':_0x277417,'password':_0x43aca5,'telegram':_0x6ea64c,'shopUrl':_0x5b96ec,'paymentGateways':_0x22bfc3?JSON[_0x240c34(0xba)](_0x22bfc3):null,'gatewaySettings':_0x17caa1?JSON[_0x240c34(0xba)](_0x17caa1):null,'usdtPolygonWallet':_0x482c43?.[_0x240c34(0xc9)]||null,'usdtTrcWallet':_0x482c43?.[_0x240c34(0xef)]||null,'usdtErcWallet':_0x482c43?.['usdtErcWallet']||null,'usdcPolygonWallet':_0x482c43?.[_0x240c34(0xc7)]||null,'publicKey':_0x54c33e,'secretKey':_0x3f2ca8,'status':_0x240c34(0xe4)},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x570620['id'],'fullName':_0x570620[_0x240c34(0xbe)],'username':_0x570620[_0x240c34(0xc1)],'telegramId':_0x570620[_0x240c34(0xcd)],'merchantUrl':_0x570620[_0x240c34(0xd6)],'gateways':_0x570620['paymentGateways']?JSON[_0x240c34(0xee)](_0x570620[_0x240c34(0xd5)]):null,'gatewaySettings':_0x570620['gatewaySettings']?JSON[_0x240c34(0xee)](_0x570620[_0x240c34(0xca)]):null,'publicKey':_0x570620['publicKey'],'wallets':{'usdtPolygonWallet':_0x570620[_0x240c34(0xc9)],'usdtTrcWallet':_0x570620[_0x240c34(0xef)],'usdtErcWallet':_0x570620['usdtErcWallet'],'usdcPolygonWallet':_0x570620[_0x240c34(0xc7)]},'status':_0x570620['status'],'createdAt':_0x570620[_0x240c34(0xc4)]};}async[a56_0x43d0d7(0xc0)](){const _0x3711d1=a56_0x43d0d7,_0x5719e6=await database_1[_0x3711d1(0xc2)]['shop'][_0x3711d1(0xeb)]({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':'desc'}});return _0x5719e6[_0x3711d1(0xda)](_0x23330f=>({'id':_0x23330f['id'],'fullName':_0x23330f[_0x3711d1(0xbe)],'username':_0x23330f[_0x3711d1(0xc1)],'telegramId':_0x23330f[_0x3711d1(0xcd)],'merchantUrl':_0x23330f[_0x3711d1(0xd6)],'gateways':_0x23330f[_0x3711d1(0xd5)]?JSON['parse'](_0x23330f[_0x3711d1(0xd5)]):null,'gatewaySettings':_0x23330f[_0x3711d1(0xca)]?JSON[_0x3711d1(0xee)](_0x23330f[_0x3711d1(0xca)]):null,'publicKey':_0x23330f['publicKey'],'wallets':{'usdtPolygonWallet':_0x23330f[_0x3711d1(0xc9)],'usdtTrcWallet':_0x23330f[_0x3711d1(0xef)],'usdtErcWallet':_0x23330f[_0x3711d1(0xe8)],'usdcPolygonWallet':_0x23330f[_0x3711d1(0xc7)]},'status':_0x23330f[_0x3711d1(0xea)],'createdAt':_0x23330f[_0x3711d1(0xc4)]}));}async[a56_0x43d0d7(0xcb)](_0x24dfa1){const _0x65b5a0=a56_0x43d0d7,_0xc16d94=await database_1['default'][_0x65b5a0(0xec)][_0x65b5a0(0xcf)]({'where':{'id':_0x24dfa1},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0xc16d94)return null;return{'id':_0xc16d94['id'],'fullName':_0xc16d94['name'],'username':_0xc16d94[_0x65b5a0(0xc1)],'telegramId':_0xc16d94[_0x65b5a0(0xcd)],'merchantUrl':_0xc16d94['shopUrl'],'gateways':_0xc16d94['paymentGateways']?JSON[_0x65b5a0(0xee)](_0xc16d94[_0x65b5a0(0xd5)]):null,'gatewaySettings':_0xc16d94[_0x65b5a0(0xca)]?JSON[_0x65b5a0(0xee)](_0xc16d94['gatewaySettings']):null,'publicKey':_0xc16d94[_0x65b5a0(0xe3)],'wallets':{'usdtPolygonWallet':_0xc16d94['usdtPolygonWallet'],'usdtTrcWallet':_0xc16d94[_0x65b5a0(0xef)],'usdtErcWallet':_0xc16d94[_0x65b5a0(0xe8)],'usdcPolygonWallet':_0xc16d94[_0x65b5a0(0xc7)]},'status':_0xc16d94[_0x65b5a0(0xea)],'createdAt':_0xc16d94[_0x65b5a0(0xc4)]};}async[a56_0x43d0d7(0xd0)](_0x531830,_0x4ccfcf){const _0x3de2b8=a56_0x43d0d7,_0x5c9c47={..._0x4ccfcf};_0x4ccfcf['password']&&(_0x5c9c47['password']=await bcryptjs_1[_0x3de2b8(0xc2)]['hash'](_0x4ccfcf[_0x3de2b8(0xbb)],0xc));_0x4ccfcf[_0x3de2b8(0xb9)]&&(_0x5c9c47['name']=_0x4ccfcf[_0x3de2b8(0xb9)],delete _0x5c9c47['fullName']);_0x4ccfcf[_0x3de2b8(0xce)]&&(_0x5c9c47[_0x3de2b8(0xcd)]=_0x4ccfcf[_0x3de2b8(0xce)],delete _0x5c9c47[_0x3de2b8(0xce)]);_0x4ccfcf['merchantUrl']&&(_0x5c9c47[_0x3de2b8(0xd6)]=_0x4ccfcf[_0x3de2b8(0xdb)],delete _0x5c9c47['merchantUrl']);_0x4ccfcf['gateways']&&(_0x5c9c47[_0x3de2b8(0xd5)]=JSON[_0x3de2b8(0xba)](_0x4ccfcf[_0x3de2b8(0xe5)]),delete _0x5c9c47[_0x3de2b8(0xe5)]);_0x4ccfcf['gatewaySettings']&&(_0x5c9c47['gatewaySettings']=JSON[_0x3de2b8(0xba)](_0x4ccfcf['gatewaySettings']),delete _0x5c9c47[_0x3de2b8(0xca)]);_0x4ccfcf[_0x3de2b8(0xe0)]&&(_0x4ccfcf[_0x3de2b8(0xe0)]['usdtPolygonWallet']!==undefined&&(_0x5c9c47[_0x3de2b8(0xc9)]=_0x4ccfcf[_0x3de2b8(0xe0)]['usdtPolygonWallet']||null),_0x4ccfcf[_0x3de2b8(0xe0)][_0x3de2b8(0xef)]!==undefined&&(_0x5c9c47[_0x3de2b8(0xef)]=_0x4ccfcf[_0x3de2b8(0xe0)]['usdtTrcWallet']||null),_0x4ccfcf[_0x3de2b8(0xe0)][_0x3de2b8(0xe8)]!==undefined&&(_0x5c9c47[_0x3de2b8(0xe8)]=_0x4ccfcf[_0x3de2b8(0xe0)]['usdtErcWallet']||null),_0x4ccfcf[_0x3de2b8(0xe0)][_0x3de2b8(0xc7)]!==undefined&&(_0x5c9c47[_0x3de2b8(0xc7)]=_0x4ccfcf[_0x3de2b8(0xe0)][_0x3de2b8(0xc7)]||null),delete _0x5c9c47[_0x3de2b8(0xe0)]);const _0xb424cc=await database_1[_0x3de2b8(0xc2)][_0x3de2b8(0xec)]['update']({'where':{'id':_0x531830},'data':_0x5c9c47,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0xb424cc['id'],'fullName':_0xb424cc['name'],'username':_0xb424cc[_0x3de2b8(0xc1)],'telegramId':_0xb424cc[_0x3de2b8(0xcd)],'merchantUrl':_0xb424cc[_0x3de2b8(0xd6)],'gateways':_0xb424cc[_0x3de2b8(0xd5)]?JSON['parse'](_0xb424cc[_0x3de2b8(0xd5)]):null,'gatewaySettings':_0xb424cc[_0x3de2b8(0xca)]?JSON['parse'](_0xb424cc['gatewaySettings']):null,'publicKey':_0xb424cc[_0x3de2b8(0xe3)],'wallets':{'usdtPolygonWallet':_0xb424cc[_0x3de2b8(0xc9)],'usdtTrcWallet':_0xb424cc[_0x3de2b8(0xef)],'usdtErcWallet':_0xb424cc[_0x3de2b8(0xe8)],'usdcPolygonWallet':_0xb424cc[_0x3de2b8(0xc7)]},'status':_0xb424cc[_0x3de2b8(0xea)],'createdAt':_0xb424cc['createdAt']};}async[a56_0x43d0d7(0xd4)](_0x568c73){const _0xe9eccc=a56_0x43d0d7;await database_1[_0xe9eccc(0xc2)]['shop'][_0xe9eccc(0xd7)]({'where':{'id':_0x568c73}});}}exports[a56_0x43d0d7(0xd3)]=UserService;