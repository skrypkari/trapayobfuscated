'use strict';function a56_0x39ec(){const _0x58c2a3=['49044504vppuQe','randomBytes','__esModule','paymentGateways','Telegram\x20username\x20already\x20exists','usdtErcWallet','gatewaySettings','password','1873566iaKRNb','publicKey','defineProperty','default','UserService','username','176MWpxSi','generateApiKeys','907510paqSpp','deleteUser','12606oIZKAk','usdcPolygonWallet','5537996HYVwSy','984bzkFdD','../config/database','toString','gateways','createdAt','create','crypto','hash','findMany','3KMvVQL','wallets','findUnique','merchantUrl','usdtPolygonWallet','telegram','pk_','fullName','shop','hex','parse','getUserById','bcryptjs','stringify','1QutlkL','shopUrl','status','5119025tGeqeB','telegramId','124839NuhlKv','getAllUsers','delete','4774gRObvM','usdtTrcWallet','updateUser','name','Username\x20already\x20exists'];a56_0x39ec=function(){return _0x58c2a3;};return a56_0x39ec();}const a56_0x6bf8ab=a56_0x51e7;(function(_0x318cc5,_0x47037c){const _0x107c09=a56_0x51e7,_0x4bceb7=_0x318cc5();while(!![]){try{const _0x4009b1=-parseInt(_0x107c09(0x212))/0x1*(-parseInt(_0x107c09(0x1ee))/0x2)+parseInt(_0x107c09(0x204))/0x3*(parseInt(_0x107c09(0x1fa))/0x4)+parseInt(_0x107c09(0x215))/0x5+-parseInt(_0x107c09(0x1f8))/0x6*(-parseInt(_0x107c09(0x1e1))/0x7)+parseInt(_0x107c09(0x1fb))/0x8*(parseInt(_0x107c09(0x217))/0x9)+-parseInt(_0x107c09(0x1f6))/0xa*(parseInt(_0x107c09(0x1f4))/0xb)+-parseInt(_0x107c09(0x1e6))/0xc;if(_0x4009b1===_0x47037c)break;else _0x4bceb7['push'](_0x4bceb7['shift']());}catch(_0x15499d){_0x4bceb7['push'](_0x4bceb7['shift']());}}}(a56_0x39ec,0xe6b94));function a56_0x51e7(_0xa68da1,_0x1fdce0){const _0x39ecdb=a56_0x39ec();return a56_0x51e7=function(_0x51e785,_0x1c1c3d){_0x51e785=_0x51e785-0x1e1;let _0x4e327f=_0x39ecdb[_0x51e785];return _0x4e327f;},a56_0x51e7(_0xa68da1,_0x1fdce0);}var __importDefault=this&&this['__importDefault']||function(_0x17d963){return _0x17d963&&_0x17d963['__esModule']?_0x17d963:{'default':_0x17d963};};Object[a56_0x6bf8ab(0x1f0)](exports,a56_0x6bf8ab(0x1e8),{'value':!![]}),exports[a56_0x6bf8ab(0x1f2)]=void 0x0;const bcryptjs_1=__importDefault(require(a56_0x6bf8ab(0x210))),crypto_1=__importDefault(require(a56_0x6bf8ab(0x201))),database_1=__importDefault(require(a56_0x6bf8ab(0x1fc)));class UserService{[a56_0x6bf8ab(0x1f5)](){const _0x25083e=a56_0x6bf8ab,_0x2fa97e=_0x25083e(0x20a)+crypto_1[_0x25083e(0x1f1)][_0x25083e(0x1e7)](0x20)[_0x25083e(0x1fd)]('hex'),_0x5b3006='sk_'+crypto_1[_0x25083e(0x1f1)][_0x25083e(0x1e7)](0x20)[_0x25083e(0x1fd)](_0x25083e(0x20d));return{'publicKey':_0x2fa97e,'secretKey':_0x5b3006};}async['createUser'](_0x10f14b){const _0x5182b5=a56_0x6bf8ab,{fullName:_0x55ded1,username:_0x22fc00,password:_0x301c84,telegramId:_0x456130,merchantUrl:_0x306cde,gateways:_0x5a3b2f,gatewaySettings:_0x4982f8,wallets:_0x401516}=_0x10f14b,_0x4a89fa=await database_1['default'][_0x5182b5(0x20c)][_0x5182b5(0x206)]({'where':{'username':_0x22fc00}});if(_0x4a89fa)throw new Error(_0x5182b5(0x1e5));if(_0x456130){const _0x53a584=await database_1[_0x5182b5(0x1f1)][_0x5182b5(0x20c)][_0x5182b5(0x206)]({'where':{'telegram':_0x456130}});if(_0x53a584)throw new Error(_0x5182b5(0x1ea));}const _0x4b94ef=await bcryptjs_1['default'][_0x5182b5(0x202)](_0x301c84,0xc),{publicKey:_0x1dc0dd,secretKey:_0x3a8efd}=this[_0x5182b5(0x1f5)](),_0x26a96e=await database_1['default']['shop'][_0x5182b5(0x200)]({'data':{'name':_0x55ded1,'username':_0x22fc00,'password':_0x4b94ef,'telegram':_0x456130,'shopUrl':_0x306cde,'paymentGateways':_0x5a3b2f?JSON['stringify'](_0x5a3b2f):null,'gatewaySettings':_0x4982f8?JSON[_0x5182b5(0x211)](_0x4982f8):null,'usdtPolygonWallet':_0x401516?.[_0x5182b5(0x208)]||null,'usdtTrcWallet':_0x401516?.[_0x5182b5(0x1e2)]||null,'usdtErcWallet':_0x401516?.[_0x5182b5(0x1eb)]||null,'usdcPolygonWallet':_0x401516?.[_0x5182b5(0x1f9)]||null,'publicKey':_0x1dc0dd,'secretKey':_0x3a8efd,'status':'ACTIVE'},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x26a96e['id'],'fullName':_0x26a96e[_0x5182b5(0x1e4)],'username':_0x26a96e[_0x5182b5(0x1f3)],'telegramId':_0x26a96e[_0x5182b5(0x209)],'merchantUrl':_0x26a96e[_0x5182b5(0x213)],'gateways':_0x26a96e['paymentGateways']?JSON['parse'](_0x26a96e[_0x5182b5(0x1e9)]):null,'gatewaySettings':_0x26a96e[_0x5182b5(0x1ec)]?JSON[_0x5182b5(0x20e)](_0x26a96e[_0x5182b5(0x1ec)]):null,'publicKey':_0x26a96e[_0x5182b5(0x1ef)],'wallets':{'usdtPolygonWallet':_0x26a96e[_0x5182b5(0x208)],'usdtTrcWallet':_0x26a96e['usdtTrcWallet'],'usdtErcWallet':_0x26a96e[_0x5182b5(0x1eb)],'usdcPolygonWallet':_0x26a96e['usdcPolygonWallet']},'status':_0x26a96e[_0x5182b5(0x214)],'createdAt':_0x26a96e['createdAt']};}async[a56_0x6bf8ab(0x218)](){const _0x27d121=a56_0x6bf8ab,_0x391175=await database_1['default'][_0x27d121(0x20c)][_0x27d121(0x203)]({'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]},'orderBy':{'createdAt':'desc'}});return _0x391175['map'](_0x3182a7=>({'id':_0x3182a7['id'],'fullName':_0x3182a7[_0x27d121(0x1e4)],'username':_0x3182a7['username'],'telegramId':_0x3182a7['telegram'],'merchantUrl':_0x3182a7[_0x27d121(0x213)],'gateways':_0x3182a7[_0x27d121(0x1e9)]?JSON['parse'](_0x3182a7[_0x27d121(0x1e9)]):null,'gatewaySettings':_0x3182a7['gatewaySettings']?JSON['parse'](_0x3182a7['gatewaySettings']):null,'publicKey':_0x3182a7[_0x27d121(0x1ef)],'wallets':{'usdtPolygonWallet':_0x3182a7['usdtPolygonWallet'],'usdtTrcWallet':_0x3182a7[_0x27d121(0x1e2)],'usdtErcWallet':_0x3182a7[_0x27d121(0x1eb)],'usdcPolygonWallet':_0x3182a7['usdcPolygonWallet']},'status':_0x3182a7[_0x27d121(0x214)],'createdAt':_0x3182a7['createdAt']}));}async[a56_0x6bf8ab(0x20f)](_0x4f81aa){const _0x4273d9=a56_0x6bf8ab,_0xcd878f=await database_1[_0x4273d9(0x1f1)][_0x4273d9(0x20c)][_0x4273d9(0x206)]({'where':{'id':_0x4f81aa},'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});if(!_0xcd878f)return null;return{'id':_0xcd878f['id'],'fullName':_0xcd878f[_0x4273d9(0x1e4)],'username':_0xcd878f['username'],'telegramId':_0xcd878f[_0x4273d9(0x209)],'merchantUrl':_0xcd878f[_0x4273d9(0x213)],'gateways':_0xcd878f[_0x4273d9(0x1e9)]?JSON[_0x4273d9(0x20e)](_0xcd878f[_0x4273d9(0x1e9)]):null,'gatewaySettings':_0xcd878f[_0x4273d9(0x1ec)]?JSON[_0x4273d9(0x20e)](_0xcd878f[_0x4273d9(0x1ec)]):null,'publicKey':_0xcd878f[_0x4273d9(0x1ef)],'wallets':{'usdtPolygonWallet':_0xcd878f[_0x4273d9(0x208)],'usdtTrcWallet':_0xcd878f[_0x4273d9(0x1e2)],'usdtErcWallet':_0xcd878f[_0x4273d9(0x1eb)],'usdcPolygonWallet':_0xcd878f[_0x4273d9(0x1f9)]},'status':_0xcd878f['status'],'createdAt':_0xcd878f[_0x4273d9(0x1ff)]};}async[a56_0x6bf8ab(0x1e3)](_0x116688,_0x8d8326){const _0x1ea6bf=a56_0x6bf8ab,_0x5eccbb={..._0x8d8326};_0x8d8326['password']&&(_0x5eccbb[_0x1ea6bf(0x1ed)]=await bcryptjs_1['default'][_0x1ea6bf(0x202)](_0x8d8326[_0x1ea6bf(0x1ed)],0xc));_0x8d8326[_0x1ea6bf(0x20b)]&&(_0x5eccbb[_0x1ea6bf(0x1e4)]=_0x8d8326[_0x1ea6bf(0x20b)],delete _0x5eccbb[_0x1ea6bf(0x20b)]);_0x8d8326[_0x1ea6bf(0x216)]&&(_0x5eccbb[_0x1ea6bf(0x209)]=_0x8d8326['telegramId'],delete _0x5eccbb[_0x1ea6bf(0x216)]);_0x8d8326[_0x1ea6bf(0x207)]&&(_0x5eccbb[_0x1ea6bf(0x213)]=_0x8d8326[_0x1ea6bf(0x207)],delete _0x5eccbb[_0x1ea6bf(0x207)]);_0x8d8326[_0x1ea6bf(0x1fe)]&&(_0x5eccbb[_0x1ea6bf(0x1e9)]=JSON['stringify'](_0x8d8326[_0x1ea6bf(0x1fe)]),delete _0x5eccbb[_0x1ea6bf(0x1fe)]);_0x8d8326[_0x1ea6bf(0x1ec)]&&(_0x5eccbb['gatewaySettings']=JSON[_0x1ea6bf(0x211)](_0x8d8326[_0x1ea6bf(0x1ec)]),delete _0x5eccbb[_0x1ea6bf(0x1ec)]);_0x8d8326[_0x1ea6bf(0x205)]&&(_0x8d8326[_0x1ea6bf(0x205)]['usdtPolygonWallet']!==undefined&&(_0x5eccbb[_0x1ea6bf(0x208)]=_0x8d8326[_0x1ea6bf(0x205)][_0x1ea6bf(0x208)]||null),_0x8d8326['wallets'][_0x1ea6bf(0x1e2)]!==undefined&&(_0x5eccbb[_0x1ea6bf(0x1e2)]=_0x8d8326[_0x1ea6bf(0x205)][_0x1ea6bf(0x1e2)]||null),_0x8d8326[_0x1ea6bf(0x205)][_0x1ea6bf(0x1eb)]!==undefined&&(_0x5eccbb[_0x1ea6bf(0x1eb)]=_0x8d8326['wallets'][_0x1ea6bf(0x1eb)]||null),_0x8d8326[_0x1ea6bf(0x205)][_0x1ea6bf(0x1f9)]!==undefined&&(_0x5eccbb['usdcPolygonWallet']=_0x8d8326[_0x1ea6bf(0x205)]['usdcPolygonWallet']||null),delete _0x5eccbb['wallets']);const _0x371ddc=await database_1[_0x1ea6bf(0x1f1)]['shop']['update']({'where':{'id':_0x116688},'data':_0x5eccbb,'select':{'id':!![],'name':!![],'username':!![],'telegram':!![],'shopUrl':!![],'paymentGateways':!![],'gatewaySettings':!![],'publicKey':!![],'usdtPolygonWallet':!![],'usdtTrcWallet':!![],'usdtErcWallet':!![],'usdcPolygonWallet':!![],'status':!![],'createdAt':!![]}});return{'id':_0x371ddc['id'],'fullName':_0x371ddc[_0x1ea6bf(0x1e4)],'username':_0x371ddc[_0x1ea6bf(0x1f3)],'telegramId':_0x371ddc[_0x1ea6bf(0x209)],'merchantUrl':_0x371ddc[_0x1ea6bf(0x213)],'gateways':_0x371ddc[_0x1ea6bf(0x1e9)]?JSON[_0x1ea6bf(0x20e)](_0x371ddc[_0x1ea6bf(0x1e9)]):null,'gatewaySettings':_0x371ddc[_0x1ea6bf(0x1ec)]?JSON['parse'](_0x371ddc['gatewaySettings']):null,'publicKey':_0x371ddc[_0x1ea6bf(0x1ef)],'wallets':{'usdtPolygonWallet':_0x371ddc[_0x1ea6bf(0x208)],'usdtTrcWallet':_0x371ddc[_0x1ea6bf(0x1e2)],'usdtErcWallet':_0x371ddc[_0x1ea6bf(0x1eb)],'usdcPolygonWallet':_0x371ddc['usdcPolygonWallet']},'status':_0x371ddc[_0x1ea6bf(0x214)],'createdAt':_0x371ddc[_0x1ea6bf(0x1ff)]};}async[a56_0x6bf8ab(0x1f7)](_0x3c31d7){const _0x104614=a56_0x6bf8ab;await database_1[_0x104614(0x1f1)][_0x104614(0x20c)][_0x104614(0x219)]({'where':{'id':_0x3c31d7}});}}exports[a56_0x6bf8ab(0x1f2)]=UserService;