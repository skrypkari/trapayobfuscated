'use strict';const a48_0x4924fe=a48_0x4463;(function(_0x1f3f64,_0x506b4d){const _0x5f2d63=a48_0x4463,_0x18b74c=_0x1f3f64();while(!![]){try{const _0x5433e0=parseInt(_0x5f2d63(0x1fc))/0x1*(-parseInt(_0x5f2d63(0x206))/0x2)+-parseInt(_0x5f2d63(0x201))/0x3+-parseInt(_0x5f2d63(0x1d6))/0x4+parseInt(_0x5f2d63(0x1d1))/0x5+parseInt(_0x5f2d63(0x205))/0x6+-parseInt(_0x5f2d63(0x1cb))/0x7*(-parseInt(_0x5f2d63(0x1eb))/0x8)+-parseInt(_0x5f2d63(0x1e6))/0x9;if(_0x5433e0===_0x506b4d)break;else _0x18b74c['push'](_0x18b74c['shift']());}catch(_0x2fa881){_0x18b74c['push'](_0x18b74c['shift']());}}}(a48_0x175d,0xe067e));var __importDefault=this&&this[a48_0x4924fe(0x1dc)]||function(_0x5d48a3){return _0x5d48a3&&_0x5d48a3['__esModule']?_0x5d48a3:{'default':_0x5d48a3};};Object[a48_0x4924fe(0x1c8)](exports,'__esModule',{'value':!![]}),exports['loggerService']=exports[a48_0x4924fe(0x1ed)]=void 0x0;const fs_1=__importDefault(require('fs')),path_1=__importDefault(require(a48_0x4924fe(0x1d9)));class LoggerService{constructor(){const _0x33ca3c=a48_0x4924fe;this[_0x33ca3c(0x1f4)]=path_1[_0x33ca3c(0x1d8)][_0x33ca3c(0x1e0)](process['cwd'](),'logs'),this[_0x33ca3c(0x1f8)]();}[a48_0x4924fe(0x1f8)](){const _0x3d18a6=a48_0x4924fe;!fs_1[_0x3d18a6(0x1d8)][_0x3d18a6(0x1f9)](this[_0x3d18a6(0x1f4)])&&(fs_1[_0x3d18a6(0x1d8)][_0x3d18a6(0x1e3)](this[_0x3d18a6(0x1f4)],{'recursive':!![]}),console['log'](_0x3d18a6(0x208)+this['logsDir']));}[a48_0x4924fe(0x1ef)](_0x547ba2){const _0x5cc4c7=a48_0x4924fe,_0x59d1e5=new Date()[_0x5cc4c7(0x213)]()['split']('T')[0x0];return path_1['default'][_0x5cc4c7(0x1e0)](this[_0x5cc4c7(0x1f4)],_0x547ba2+'_'+_0x59d1e5+_0x5cc4c7(0x1c5));}['writeLog'](_0x3271b7,_0x3ec7b3){const _0x5ced2c=a48_0x4924fe;try{const _0x4176eb=new Date()[_0x5ced2c(0x213)](),_0x3aa548={'timestamp':_0x4176eb,..._0x3ec7b3},_0x541d2d=JSON[_0x5ced2c(0x1d2)](_0x3aa548)+'\x0a',_0x4eef56=this[_0x5ced2c(0x1ef)](_0x3271b7);fs_1[_0x5ced2c(0x1d8)][_0x5ced2c(0x1f3)](_0x4eef56,_0x541d2d,_0x5ced2c(0x210));}catch(_0x42c84a){console[_0x5ced2c(0x1de)](_0x5ced2c(0x1ca)+_0x3271b7+'\x20log:',_0x42c84a);}}[a48_0x4924fe(0x1ec)](_0x30ee8c,_0x41f2d9,_0x13aa84,_0x2b6ffd){const _0x273255=a48_0x4924fe;this['writeLog']('white_domain_requests',{'type':_0x273255(0x1f0),'gateway':_0x30ee8c,'endpoint':_0x41f2d9,'method':_0x13aa84,'data':_0x2b6ffd});}[a48_0x4924fe(0x1d5)](_0x101393,_0x3c2fe9,_0x8bf8f3,_0x4075c5,_0x189c05){const _0x36b9b9=a48_0x4924fe;this[_0x36b9b9(0x1f1)](_0x36b9b9(0x1ff),{'type':_0x36b9b9(0x1d4),'gateway':_0x101393,'endpoint':_0x3c2fe9,'status':_0x8bf8f3,'responseTime':_0x189c05,'data':_0x4075c5});}[a48_0x4924fe(0x1d3)](_0x2349f4,_0x16fc66,_0x2d356d){const _0x90d426=a48_0x4924fe;this['writeLog'](_0x90d426(0x1fd),{'type':_0x90d426(0x211),'gateway':_0x2349f4,'endpoint':_0x16fc66,'error':_0x2d356d instanceof Error?{'message':_0x2d356d[_0x90d426(0x1c7)],'stack':_0x2d356d['stack']}:_0x2d356d});}[a48_0x4924fe(0x1e2)](_0x308ae5,_0x3128b4,_0xec506d){const _0xe41286=a48_0x4924fe;this[_0xe41286(0x1f1)]('webhooks_received',{'type':_0xe41286(0x20c),'gateway':_0x308ae5,'headers':_0xec506d,'data':_0x3128b4});}['logWebhookProcessed'](_0x40863a,_0xa1e109,_0x259c1d,_0x45cf89,_0x4390c1){const _0x446b62=a48_0x4924fe;this[_0x446b62(0x1f1)](_0x446b62(0x209),{'type':_0x446b62(0x1f5),'gateway':_0x40863a,'paymentId':_0xa1e109,'oldStatus':_0x259c1d,'newStatus':_0x45cf89,'originalData':_0x4390c1});}[a48_0x4924fe(0x1ce)](_0x4d869d,_0x59ab84,_0x3a0aad){const _0x16fe29=a48_0x4924fe;this[_0x16fe29(0x1f1)]('webhooks_errors',{'type':_0x16fe29(0x1cf),'gateway':_0x4d869d,'error':_0x59ab84 instanceof Error?{'message':_0x59ab84[_0x16fe29(0x1c7)],'stack':_0x59ab84[_0x16fe29(0x203)]}:_0x59ab84,'originalData':_0x3a0aad});}['logCoinToPayStatus'](_0x30986d){const _0x427774=a48_0x4924fe;this[_0x427774(0x1f1)](_0x427774(0x1cc),{'type':_0x427774(0x20f),..._0x30986d});}[a48_0x4924fe(0x1e8)](_0x11a8ef){const _0x27ceb3=a48_0x4924fe;this[_0x27ceb3(0x1f1)](_0x27ceb3(0x1f2),{'type':_0x27ceb3(0x1e4),..._0x11a8ef});}['logShopWebhookSent'](_0x16dc86,_0x123c5d,_0x4f22b4,_0x5c3aa7,_0xbd6fe2,_0x1b8313){const _0x74df4=a48_0x4924fe;this[_0x74df4(0x1f1)](_0x74df4(0x1d0),{'type':_0x74df4(0x1cd),'shopId':_0x16dc86,'webhookUrl':_0x123c5d,'event':_0x4f22b4,'status':_0x5c3aa7,'responseTime':_0xbd6fe2,'payload':_0x1b8313});}['logShopWebhookError'](_0x3af5a5,_0x55881c,_0x195f58,_0x3d71b4,_0x524255){const _0x23702d=a48_0x4924fe;this[_0x23702d(0x1f1)]('shop_webhooks_errors',{'type':_0x23702d(0x1fa),'shopId':_0x3af5a5,'webhookUrl':_0x55881c,'event':_0x195f58,'error':_0x3d71b4 instanceof Error?{'message':_0x3d71b4['message'],'stack':_0x3d71b4[_0x23702d(0x203)]}:_0x3d71b4,'payload':_0x524255});}['logPaymentCreated'](_0x537195,_0x3f8096,_0x3cf562,_0x3e1c1a,_0x46c7fa){const _0x472dc8=a48_0x4924fe;this[_0x472dc8(0x1f1)](_0x472dc8(0x1e7),{'type':_0x472dc8(0x1df),'gateway':_0x537195,'paymentId':_0x3f8096,'shopId':_0x3cf562,'amount':_0x3e1c1a,'currency':_0x46c7fa});}[a48_0x4924fe(0x1c6)](_0x54deb1,_0x1bcf0a,_0xd5bfe3,_0x137e14,_0x3822c7){const _0x195996=a48_0x4924fe;this[_0x195996(0x1f1)]('api_calls',{'type':'API_CALL','endpoint':_0x54deb1,'method':_0x1bcf0a,'userId':_0xd5bfe3,'userRole':_0x137e14,'requestData':_0x3822c7});}[a48_0x4924fe(0x202)](){const _0x113fd8=a48_0x4924fe;try{const _0x15a2af=fs_1[_0x113fd8(0x1d8)]['readdirSync'](this[_0x113fd8(0x1f4)]),_0x692859=_0x15a2af[_0x113fd8(0x1da)](_0x323029=>_0x323029['endsWith'](_0x113fd8(0x1c5))),_0x15e81a=[...new Set(_0x692859['map'](_0x415256=>_0x415256['split']('_')[0x0]))],_0x20254a=_0x692859[_0x113fd8(0x1db)](_0x555e4e=>{const _0x941390=_0x113fd8,_0x3e7dec=path_1[_0x941390(0x1d8)][_0x941390(0x1e0)](this[_0x941390(0x1f4)],_0x555e4e),_0x16f227=fs_1[_0x941390(0x1d8)][_0x941390(0x1e9)](_0x3e7dec),[_0x50b23d,_0x4a5005]=_0x555e4e[_0x941390(0x1fe)](_0x941390(0x1c5),'')[_0x941390(0x20b)]('_');return{'type':_0x50b23d,'date':_0x4a5005,'size':_0x16f227[_0x941390(0x20e)]};})[_0x113fd8(0x204)]((_0x4360ea,_0x16efdb)=>_0x16efdb[_0x113fd8(0x1e5)][_0x113fd8(0x212)](_0x4360ea[_0x113fd8(0x1e5)]));return{'totalFiles':_0x692859[_0x113fd8(0x200)],'logTypes':_0x15e81a,'latestLogs':_0x20254a['slice'](0x0,0xa)};}catch(_0x114ce3){return console[_0x113fd8(0x1de)](_0x113fd8(0x207),_0x114ce3),{'totalFiles':0x0,'logTypes':[],'latestLogs':[]};}}[a48_0x4924fe(0x1ea)](_0x6a7f2e=0x1e){const _0x4adaa8=a48_0x4924fe;try{const _0x5134df=fs_1[_0x4adaa8(0x1d8)][_0x4adaa8(0x1f7)](this[_0x4adaa8(0x1f4)]),_0x42d222=new Date();_0x42d222['setDate'](_0x42d222[_0x4adaa8(0x1e1)]()-_0x6a7f2e);let _0x26eac0=0x0;_0x5134df[_0x4adaa8(0x1f6)](_0x1fde95=>{const _0x27d28a=_0x4adaa8;if(!_0x1fde95[_0x27d28a(0x20d)](_0x27d28a(0x1c5)))return;const _0x33450d=path_1['default'][_0x27d28a(0x1e0)](this[_0x27d28a(0x1f4)],_0x1fde95),_0x759d20=fs_1['default']['statSync'](_0x33450d);_0x759d20[_0x27d28a(0x1ee)]<_0x42d222&&(fs_1[_0x27d28a(0x1d8)]['unlinkSync'](_0x33450d),_0x26eac0++,console[_0x27d28a(0x1fb)](_0x27d28a(0x1dd)+_0x1fde95));}),console[_0x4adaa8(0x1fb)](_0x4adaa8(0x20a)+_0x26eac0+'\x20old\x20log\x20files\x20(older\x20than\x20'+_0x6a7f2e+'\x20days)');}catch(_0x72d42e){console[_0x4adaa8(0x1de)](_0x4adaa8(0x1c9),_0x72d42e);}}}exports[a48_0x4924fe(0x1ed)]=LoggerService,exports[a48_0x4924fe(0x1d7)]=new LoggerService();function a48_0x4463(_0x46e62a,_0x440d1f){const _0x175da0=a48_0x175d();return a48_0x4463=function(_0x446392,_0x300704){_0x446392=_0x446392-0x1c5;let _0x4b1f5b=_0x175da0[_0x446392];return _0x4b1f5b;},a48_0x4463(_0x46e62a,_0x440d1f);}function a48_0x175d(){const _0x9866ae=['length','1734330CTtlHZ','getLogStats','stack','sort','4979808KcSrAa','88702DLFJbc','Failed\x20to\x20get\x20log\x20stats:','📁\x20Created\x20logs\x20directory:\x20','webhooks_processed','🧹\x20Cleaned\x20','split','WEBHOOK_RECEIVED','endsWith','size','COINTOPAY_STATUS_CHANGE','utf8','ERROR','localeCompare','toISOString','.log','logApiCall','message','defineProperty','Failed\x20to\x20clean\x20old\x20logs:','Failed\x20to\x20write\x20','9810864uQNhcF','cointopay_status_changes','SHOP_WEBHOOK_SENT','logWebhookError','WEBHOOK_ERROR','shop_webhooks_sent','8078320JaoIRm','stringify','logWhiteDomainError','RESPONSE','logWhiteDomainResponse','1741592rzHxGp','loggerService','default','path','filter','map','__importDefault','🗑️\x20Deleted\x20old\x20log\x20file:\x20','error','PAYMENT_CREATED','join','getDate','logWebhookReceived','mkdirSync','COINTOPAY_ERROR','date','4856661hpqylC','payments_created','logCoinToPayError','statSync','cleanOldLogs','8eZVPFS','logWhiteDomainRequest','LoggerService','mtime','getLogFileName','REQUEST','writeLog','cointopay_errors','appendFileSync','logsDir','WEBHOOK_PROCESSED','forEach','readdirSync','ensureLogsDirectory','existsSync','SHOP_WEBHOOK_ERROR','log','31KGJdXZ','white_domain_errors','replace','white_domain_responses'];a48_0x175d=function(){return _0x9866ae;};return a48_0x175d();}