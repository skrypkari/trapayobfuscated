'use strict';const a44_0x52feee=a44_0x23e9;(function(_0x57d580,_0x14fe84){const _0x38edfb=a44_0x23e9,_0x594a7a=_0x57d580();while(!![]){try{const _0x2a65ea=-parseInt(_0x38edfb(0x17d))/0x1*(parseInt(_0x38edfb(0x186))/0x2)+-parseInt(_0x38edfb(0x17f))/0x3+-parseInt(_0x38edfb(0x192))/0x4+parseInt(_0x38edfb(0x14d))/0x5+-parseInt(_0x38edfb(0x173))/0x6+-parseInt(_0x38edfb(0x169))/0x7+parseInt(_0x38edfb(0x16b))/0x8;if(_0x2a65ea===_0x14fe84)break;else _0x594a7a['push'](_0x594a7a['shift']());}catch(_0x4b4034){_0x594a7a['push'](_0x594a7a['shift']());}}}(a44_0x3033,0x9db62));function a44_0x23e9(_0x2ebfa2,_0xeadd43){const _0x303318=a44_0x3033();return a44_0x23e9=function(_0x23e9d8,_0x1b9536){_0x23e9d8=_0x23e9d8-0x149;let _0x362432=_0x303318[_0x23e9d8];return _0x362432;},a44_0x23e9(_0x2ebfa2,_0xeadd43);}var __importDefault=this&&this['__importDefault']||function(_0x2c38a4){const _0x1c57e2=a44_0x23e9;return _0x2c38a4&&_0x2c38a4[_0x1c57e2(0x161)]?_0x2c38a4:{'default':_0x2c38a4};};Object[a44_0x52feee(0x15b)](exports,a44_0x52feee(0x161),{'value':!![]}),exports['loggerService']=exports[a44_0x52feee(0x175)]=void 0x0;const fs_1=__importDefault(require('fs')),path_1=__importDefault(require(a44_0x52feee(0x160)));class LoggerService{constructor(){const _0x148fe0=a44_0x52feee;this[_0x148fe0(0x18c)]=path_1[_0x148fe0(0x163)][_0x148fe0(0x153)](process[_0x148fe0(0x16c)](),_0x148fe0(0x159)),this[_0x148fe0(0x151)]();}['ensureLogsDirectory'](){const _0x1f585c=a44_0x52feee;!fs_1[_0x1f585c(0x163)][_0x1f585c(0x164)](this['logsDir'])&&(fs_1[_0x1f585c(0x163)][_0x1f585c(0x181)](this[_0x1f585c(0x18c)],{'recursive':!![]}),console[_0x1f585c(0x188)](_0x1f585c(0x149)+this[_0x1f585c(0x18c)]));}[a44_0x52feee(0x183)](_0x46f0c2){const _0xd120dc=a44_0x52feee,_0x1841ed=new Date()[_0xd120dc(0x158)]()[_0xd120dc(0x15f)]('T')[0x0];return path_1[_0xd120dc(0x163)][_0xd120dc(0x153)](this[_0xd120dc(0x18c)],_0x46f0c2+'_'+_0x1841ed+_0xd120dc(0x168));}[a44_0x52feee(0x156)](_0x88ee8c,_0x5162e9){const _0x146f50=a44_0x52feee;try{const _0x2b81c6=new Date()['toISOString'](),_0x593bd9={'timestamp':_0x2b81c6,..._0x5162e9},_0x27d4ba=JSON['stringify'](_0x593bd9)+'\x0a',_0x5f14e2=this[_0x146f50(0x183)](_0x88ee8c);fs_1[_0x146f50(0x163)]['appendFileSync'](_0x5f14e2,_0x27d4ba,_0x146f50(0x189));}catch(_0x27649d){console['error'](_0x146f50(0x150)+_0x88ee8c+_0x146f50(0x152),_0x27649d);}}[a44_0x52feee(0x180)](_0x2feb57,_0x5db3e9,_0x34376d,_0x1e64d9){const _0x4ded92=a44_0x52feee;this['writeLog'](_0x4ded92(0x187),{'type':_0x4ded92(0x157),'gateway':_0x2feb57,'endpoint':_0x5db3e9,'method':_0x34376d,'data':_0x1e64d9});}[a44_0x52feee(0x162)](_0x3ddf83,_0x19e7d1,_0x36c78c,_0x399733,_0xc9d4a){const _0x51cc8b=a44_0x52feee;this[_0x51cc8b(0x156)](_0x51cc8b(0x154),{'type':_0x51cc8b(0x178),'gateway':_0x3ddf83,'endpoint':_0x19e7d1,'status':_0x36c78c,'responseTime':_0xc9d4a,'data':_0x399733});}['logWhiteDomainError'](_0x3c94ff,_0x3059d6,_0x32da98){const _0x44bd32=a44_0x52feee;this[_0x44bd32(0x156)]('white_domain_errors',{'type':'ERROR','gateway':_0x3c94ff,'endpoint':_0x3059d6,'error':_0x32da98 instanceof Error?{'message':_0x32da98[_0x44bd32(0x14e)],'stack':_0x32da98[_0x44bd32(0x170)]}:_0x32da98});}[a44_0x52feee(0x166)](_0x1f56c7,_0x38692e,_0x570be7){const _0x8cce40=a44_0x52feee;this[_0x8cce40(0x156)]('webhooks_received',{'type':_0x8cce40(0x15d),'gateway':_0x1f56c7,'headers':_0x570be7,'data':_0x38692e});}[a44_0x52feee(0x177)](_0x33498e,_0x4b54db,_0x3b0fd8,_0x4a17b0,_0x34c764){const _0x15576f=a44_0x52feee;this[_0x15576f(0x156)](_0x15576f(0x17e),{'type':_0x15576f(0x190),'gateway':_0x33498e,'paymentId':_0x4b54db,'oldStatus':_0x3b0fd8,'newStatus':_0x4a17b0,'originalData':_0x34c764});}[a44_0x52feee(0x18f)](_0xa4432d,_0x3faee4,_0x156002){const _0x18574d=a44_0x52feee;this[_0x18574d(0x156)](_0x18574d(0x15a),{'type':_0x18574d(0x18b),'gateway':_0xa4432d,'error':_0x3faee4 instanceof Error?{'message':_0x3faee4[_0x18574d(0x14e)],'stack':_0x3faee4['stack']}:_0x3faee4,'originalData':_0x156002});}[a44_0x52feee(0x17c)](_0x888a50,_0x1f9666,_0xad87c3,_0x26de57,_0x15598b,_0x5a3c7d){const _0x5b9e7f=a44_0x52feee;this['writeLog'](_0x5b9e7f(0x184),{'type':_0x5b9e7f(0x193),'shopId':_0x888a50,'webhookUrl':_0x1f9666,'event':_0xad87c3,'status':_0x26de57,'responseTime':_0x15598b,'payload':_0x5a3c7d});}[a44_0x52feee(0x174)](_0x44972c,_0x2d4460,_0x36cdac,_0x4a4b79,_0x105e58){const _0x414242=a44_0x52feee;this[_0x414242(0x156)](_0x414242(0x185),{'type':'SHOP_WEBHOOK_ERROR','shopId':_0x44972c,'webhookUrl':_0x2d4460,'event':_0x36cdac,'error':_0x4a4b79 instanceof Error?{'message':_0x4a4b79[_0x414242(0x14e)],'stack':_0x4a4b79[_0x414242(0x170)]}:_0x4a4b79,'payload':_0x105e58});}[a44_0x52feee(0x17a)](_0x1c5e45,_0x109d2c,_0x422692,_0x487389,_0x5971aa){const _0x6017f8=a44_0x52feee;this['writeLog'](_0x6017f8(0x16e),{'type':'PAYMENT_CREATED','gateway':_0x1c5e45,'paymentId':_0x109d2c,'shopId':_0x422692,'amount':_0x487389,'currency':_0x5971aa});}['logApiCall'](_0x4312c0,_0x5312c6,_0x3c2d05,_0x3b4177,_0x274d69){const _0xe52122=a44_0x52feee;this[_0xe52122(0x156)](_0xe52122(0x14a),{'type':'API_CALL','endpoint':_0x4312c0,'method':_0x5312c6,'userId':_0x3c2d05,'userRole':_0x3b4177,'requestData':_0x274d69});}[a44_0x52feee(0x182)](){const _0x419692=a44_0x52feee;try{const _0x559c3f=fs_1[_0x419692(0x163)][_0x419692(0x171)](this[_0x419692(0x18c)]),_0x4653ca=_0x559c3f[_0x419692(0x14c)](_0x3d2c54=>_0x3d2c54[_0x419692(0x167)](_0x419692(0x168))),_0x49ffc8=[...new Set(_0x4653ca['map'](_0x581abf=>_0x581abf['split']('_')[0x0]))],_0x29347a=_0x4653ca[_0x419692(0x176)](_0x3156f7=>{const _0x5336f0=_0x419692,_0x53a553=path_1[_0x5336f0(0x163)][_0x5336f0(0x153)](this[_0x5336f0(0x18c)],_0x3156f7),_0x50dc04=fs_1[_0x5336f0(0x163)][_0x5336f0(0x16f)](_0x53a553),[_0x1eb519,_0x2a10aa]=_0x3156f7[_0x5336f0(0x14b)](_0x5336f0(0x168),'')[_0x5336f0(0x15f)]('_');return{'type':_0x1eb519,'date':_0x2a10aa,'size':_0x50dc04[_0x5336f0(0x172)]};})[_0x419692(0x191)]((_0x4fc7eb,_0x54efc2)=>_0x54efc2['date'][_0x419692(0x17b)](_0x4fc7eb[_0x419692(0x15e)]));return{'totalFiles':_0x4653ca['length'],'logTypes':_0x49ffc8,'latestLogs':_0x29347a[_0x419692(0x155)](0x0,0xa)};}catch(_0x3d23ac){return console['error'](_0x419692(0x165),_0x3d23ac),{'totalFiles':0x0,'logTypes':[],'latestLogs':[]};}}[a44_0x52feee(0x16d)](_0x557f1e=0x1e){const _0x1d4ac2=a44_0x52feee;try{const _0x4b708d=fs_1[_0x1d4ac2(0x163)]['readdirSync'](this[_0x1d4ac2(0x18c)]),_0x381c69=new Date();_0x381c69[_0x1d4ac2(0x194)](_0x381c69[_0x1d4ac2(0x179)]()-_0x557f1e);let _0x476e67=0x0;_0x4b708d[_0x1d4ac2(0x16a)](_0x1d56e0=>{const _0x2e14ca=_0x1d4ac2;if(!_0x1d56e0['endsWith']('.log'))return;const _0xd6acfe=path_1[_0x2e14ca(0x163)][_0x2e14ca(0x153)](this[_0x2e14ca(0x18c)],_0x1d56e0),_0x548683=fs_1[_0x2e14ca(0x163)]['statSync'](_0xd6acfe);_0x548683['mtime']<_0x381c69&&(fs_1['default'][_0x2e14ca(0x14f)](_0xd6acfe),_0x476e67++,console[_0x2e14ca(0x188)](_0x2e14ca(0x18e)+_0x1d56e0));}),console['log'](_0x1d4ac2(0x18a)+_0x476e67+'\x20old\x20log\x20files\x20(older\x20than\x20'+_0x557f1e+'\x20days)');}catch(_0x2d0abb){console[_0x1d4ac2(0x18d)](_0x1d4ac2(0x15c),_0x2d0abb);}}}exports[a44_0x52feee(0x175)]=LoggerService,exports['loggerService']=new LoggerService();function a44_0x3033(){const _0x3982ce=['white_domain_requests','log','utf8','ðŸ§¹\x20Cleaned\x20','WEBHOOK_ERROR','logsDir','error','ðŸ—‘ï¸\x20Deleted\x20old\x20log\x20file:\x20','logWebhookError','WEBHOOK_PROCESSED','sort','1268808AgFLNG','SHOP_WEBHOOK_SENT','setDate','ðŸ“\x20Created\x20logs\x20directory:\x20','api_calls','replace','filter','2872175rswjnR','message','unlinkSync','Failed\x20to\x20write\x20','ensureLogsDirectory','\x20log:','join','white_domain_responses','slice','writeLog','REQUEST','toISOString','logs','webhooks_errors','defineProperty','Failed\x20to\x20clean\x20old\x20logs:','WEBHOOK_RECEIVED','date','split','path','__esModule','logWhiteDomainResponse','default','existsSync','Failed\x20to\x20get\x20log\x20stats:','logWebhookReceived','endsWith','.log','3040891jtFuFU','forEach','29973176RmxbnP','cwd','cleanOldLogs','payments_created','statSync','stack','readdirSync','size','5851434qdHuak','logShopWebhookError','LoggerService','map','logWebhookProcessed','RESPONSE','getDate','logPaymentCreated','localeCompare','logShopWebhookSent','1257041oyOnOS','webhooks_processed','2073603yhmfZW','logWhiteDomainRequest','mkdirSync','getLogStats','getLogFileName','shop_webhooks_sent','shop_webhooks_errors','2TzOXCm'];a44_0x3033=function(){return _0x3982ce;};return a44_0x3033();}