'use strict';function a60_0x5d93(_0x16703c,_0x2e403c){_0x16703c=_0x16703c-0x81;const _0x1ce7f5=a60_0x1ce7();let _0x5d93cb=_0x1ce7f5[_0x16703c];return _0x5d93cb;}const a60_0x8748a7=a60_0x5d93;(function(_0x2645c2,_0x4e74a4){const _0x1a03c9=a60_0x5d93,_0x1f6430=_0x2645c2();while(!![]){try{const _0xd7aa72=-parseInt(_0x1a03c9(0x98))/0x1+-parseInt(_0x1a03c9(0xa9))/0x2*(parseInt(_0x1a03c9(0x87))/0x3)+parseInt(_0x1a03c9(0xa5))/0x4*(parseInt(_0x1a03c9(0x89))/0x5)+parseInt(_0x1a03c9(0x88))/0x6*(parseInt(_0x1a03c9(0x93))/0x7)+parseInt(_0x1a03c9(0x95))/0x8*(-parseInt(_0x1a03c9(0xaa))/0x9)+-parseInt(_0x1a03c9(0x90))/0xa*(parseInt(_0x1a03c9(0x8b))/0xb)+parseInt(_0x1a03c9(0x8d))/0xc;if(_0xd7aa72===_0x4e74a4)break;else _0x1f6430['push'](_0x1f6430['shift']());}catch(_0x2420f2){_0x1f6430['push'](_0x1f6430['shift']());}}}(a60_0x1ce7,0xec918));var __importDefault=this&&this[a60_0x8748a7(0x9f)]||function(_0x100607){const _0x3a9987=a60_0x8748a7;return _0x100607&&_0x100607[_0x3a9987(0xab)]?_0x100607:{'default':_0x100607};};Object[a60_0x8748a7(0xa3)](exports,a60_0x8748a7(0xab),{'value':!![]}),exports[a60_0x8748a7(0x9c)]=exports[a60_0x8748a7(0x9a)]=void 0x0;function a60_0x1ce7(){const _0x62c327=['includes','10ZBwNmz','../types/gateway','getGatewaysForShop','4634JEFmWt','log','4368xISfwy','parse','path','857387TNxCWU','Error\x20updating\x20gateway\x20settings:','GatewaySettingsService','existsSync','gatewaySettingsService','writeFileSync','error','__importDefault','AVAILABLE_GATEWAYS','readFileSync','map','defineProperty','displayName','6237820USVpjl','getSettingsByGatewayId','✅\x20Created\x20gateway-settings.json\x20with\x20default\x20values','Failed\x20to\x20update\x20gateway\x20settings','1934BhruQZ','8325vpYJeC','__esModule','getAllGatewaysWithSettings','name','default','utf8','getSettings','filter','3729iCAyQD','852betgZv','5BTFoAN','join','20070776OSFDGj','stringify','44454708JunxlJ','Error\x20reading\x20gateway\x20settings:'];a60_0x1ce7=function(){return _0x62c327;};return a60_0x1ce7();}const fs_1=__importDefault(require('fs')),path_1=__importDefault(require(a60_0x8748a7(0x97))),gateway_1=require(a60_0x8748a7(0x91)),SETTINGS_FILE_PATH=path_1[a60_0x8748a7(0x83)][a60_0x8748a7(0x8a)](__dirname,'../../gateway-settings.json'),getDefaultSettings=()=>{const _0x4eb81a=a60_0x8748a7,_0x2b15c4={};return gateway_1[_0x4eb81a(0xa0)]['forEach'](_0x4f2c64=>{_0x2b15c4[_0x4f2c64['id']]={'minAmount':0x0,'maxAmount':0x0,'payoutDelay':0x0,'gatewayCommission':0x0};}),_0x2b15c4;},ensureSettingsFileExists=()=>{const _0x3610d5=a60_0x8748a7;if(!fs_1[_0x3610d5(0x83)][_0x3610d5(0x9b)](SETTINGS_FILE_PATH)){const _0x3e016a=getDefaultSettings();fs_1[_0x3610d5(0x83)][_0x3610d5(0x9d)](SETTINGS_FILE_PATH,JSON[_0x3610d5(0x8c)](_0x3e016a,null,0x2),_0x3610d5(0x84)),console[_0x3610d5(0x94)](_0x3610d5(0xa7));}};class GatewaySettingsService{[a60_0x8748a7(0x85)](){const _0x221939=a60_0x8748a7;try{ensureSettingsFileExists();const _0x255c25=fs_1[_0x221939(0x83)][_0x221939(0xa1)](SETTINGS_FILE_PATH,'utf8'),_0x5d5ff5=JSON[_0x221939(0x96)](_0x255c25);return _0x5d5ff5;}catch(_0x1f6b59){return console[_0x221939(0x9e)](_0x221939(0x8e),_0x1f6b59),getDefaultSettings();}}[a60_0x8748a7(0xa6)](_0x4ed231){const _0x3a6b21=this['getSettings']();return _0x3a6b21[_0x4ed231]||null;}['updateSettings'](_0x7fff7,_0x26200e){const _0x57a195=a60_0x8748a7;try{ensureSettingsFileExists();const _0x29c1a7=this['getSettings']();return!_0x29c1a7[_0x7fff7]&&(_0x29c1a7[_0x7fff7]={'minAmount':0x0,'maxAmount':0x0,'payoutDelay':0x0,'gatewayCommission':0x0}),_0x29c1a7[_0x7fff7]={..._0x29c1a7[_0x7fff7],..._0x26200e},fs_1[_0x57a195(0x83)][_0x57a195(0x9d)](SETTINGS_FILE_PATH,JSON['stringify'](_0x29c1a7,null,0x2),_0x57a195(0x84)),console['log']('✅\x20Updated\x20gateway\x20settings\x20for\x20'+_0x7fff7+':',_0x29c1a7[_0x7fff7]),_0x29c1a7;}catch(_0x3ef934){console[_0x57a195(0x9e)](_0x57a195(0x99),_0x3ef934);throw new Error(_0x57a195(0xa8));}}[a60_0x8748a7(0x81)](){const _0x315082=a60_0x8748a7,_0x248748=this[_0x315082(0x85)]();return gateway_1[_0x315082(0xa0)][_0x315082(0xa2)](_0x14d9ab=>({'id':_0x14d9ab['id'],'name':_0x14d9ab['name'],'displayName':_0x14d9ab[_0x315082(0xa4)],'settings':_0x248748[_0x14d9ab['id']]||{'minAmount':0x0,'maxAmount':0x0,'payoutDelay':0x0,'gatewayCommission':0x0}}));}[a60_0x8748a7(0x92)](_0x32ee23){const _0x1be690=a60_0x8748a7,_0x39734f=this[_0x1be690(0x85)]();if(!_0x32ee23||!Array['isArray'](_0x32ee23)||_0x32ee23['length']===0x0)return[];return gateway_1[_0x1be690(0xa0)][_0x1be690(0x86)](_0x299604=>_0x32ee23[_0x1be690(0x8f)](_0x299604[_0x1be690(0x82)]))[_0x1be690(0xa2)](_0x45507a=>({'id':_0x45507a['id'],'name':_0x45507a[_0x1be690(0x82)],'displayName':_0x45507a[_0x1be690(0xa4)],'settings':_0x39734f[_0x45507a['id']]||{'minAmount':0x0,'maxAmount':0x0,'payoutDelay':0x0,'gatewayCommission':0x0}}));}}exports[a60_0x8748a7(0x9a)]=GatewaySettingsService,exports[a60_0x8748a7(0x9c)]=new GatewaySettingsService();