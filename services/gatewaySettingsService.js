'use strict';const a60_0x5a9b7f=a60_0x22c8;(function(_0x2c39e2,_0x4b8fa2){const _0x4bac88=a60_0x22c8,_0x29d022=_0x2c39e2();while(!![]){try{const _0x28d322=parseInt(_0x4bac88(0x188))/0x1+parseInt(_0x4bac88(0x17d))/0x2*(-parseInt(_0x4bac88(0x18f))/0x3)+parseInt(_0x4bac88(0x1a1))/0x4*(-parseInt(_0x4bac88(0x1a2))/0x5)+-parseInt(_0x4bac88(0x185))/0x6+parseInt(_0x4bac88(0x18c))/0x7+parseInt(_0x4bac88(0x195))/0x8*(parseInt(_0x4bac88(0x18a))/0x9)+-parseInt(_0x4bac88(0x190))/0xa*(-parseInt(_0x4bac88(0x181))/0xb);if(_0x28d322===_0x4b8fa2)break;else _0x29d022['push'](_0x29d022['shift']());}catch(_0xe3ab8f){_0x29d022['push'](_0x29d022['shift']());}}}(a60_0x4e4b,0xf2911));var __importDefault=this&&this['__importDefault']||function(_0x211296){const _0x114d68=a60_0x22c8;return _0x211296&&_0x211296[_0x114d68(0x17b)]?_0x211296:{'default':_0x211296};};function a60_0x4e4b(){const _0xf8f398=['100770sLbWIQ','Error\x20updating\x20gateway\x20settings:','__esModule','../../gateway-settings.json','1094zAxREq','log','../types/gateway','getSettingsByGatewayId','11sLMpCV','getAllGatewaysWithSettings','GatewaySettingsService','updateSettings','2587236LhvzSj','getSettings','writeFileSync','1960528Brzwwi','isArray','9bmNrBT','getGatewaysForShop','3725260QKJrHz','length','defineProperty','6774UQYhNE','3921650lfSfhs','parse','AVAILABLE_GATEWAYS','join','includes','3198288VjyxqU','✅\x20Created\x20gateway-settings.json\x20with\x20default\x20values','map','error','readFileSync','stringify','forEach','default','gatewaySettingsService','utf8','name','displayName','124MrfMHQ'];a60_0x4e4b=function(){return _0xf8f398;};return a60_0x4e4b();}function a60_0x22c8(_0x13ff8c,_0x3a548f){_0x13ff8c=_0x13ff8c-0x17b;const _0x4e4b26=a60_0x4e4b();let _0x22c89b=_0x4e4b26[_0x13ff8c];return _0x22c89b;}Object[a60_0x5a9b7f(0x18e)](exports,a60_0x5a9b7f(0x17b),{'value':!![]}),exports[a60_0x5a9b7f(0x19d)]=exports[a60_0x5a9b7f(0x183)]=void 0x0;const fs_1=__importDefault(require('fs')),path_1=__importDefault(require('path')),gateway_1=require(a60_0x5a9b7f(0x17f)),SETTINGS_FILE_PATH=path_1[a60_0x5a9b7f(0x19c)][a60_0x5a9b7f(0x193)](__dirname,a60_0x5a9b7f(0x17c)),getDefaultSettings=()=>{const _0x3dee27=a60_0x5a9b7f,_0x157b0c={};return gateway_1[_0x3dee27(0x192)][_0x3dee27(0x19b)](_0x173d85=>{_0x157b0c[_0x173d85['id']]={'minAmount':0x0,'maxAmount':0x0,'payoutDelay':0x0,'gatewayCommission':0x0};}),_0x157b0c;},ensureSettingsFileExists=()=>{const _0x271eea=a60_0x5a9b7f;if(!fs_1[_0x271eea(0x19c)]['existsSync'](SETTINGS_FILE_PATH)){const _0x4b3a01=getDefaultSettings();fs_1[_0x271eea(0x19c)][_0x271eea(0x187)](SETTINGS_FILE_PATH,JSON[_0x271eea(0x19a)](_0x4b3a01,null,0x2),_0x271eea(0x19e)),console[_0x271eea(0x17e)](_0x271eea(0x196));}};class GatewaySettingsService{['getSettings'](){const _0x3a6153=a60_0x5a9b7f;try{ensureSettingsFileExists();const _0x2ac84b=fs_1[_0x3a6153(0x19c)][_0x3a6153(0x199)](SETTINGS_FILE_PATH,_0x3a6153(0x19e)),_0x820002=JSON[_0x3a6153(0x191)](_0x2ac84b);return _0x820002;}catch(_0x4e78b3){return console['error']('Error\x20reading\x20gateway\x20settings:',_0x4e78b3),getDefaultSettings();}}[a60_0x5a9b7f(0x180)](_0x138888){const _0x51a770=a60_0x5a9b7f,_0x4421c1=this[_0x51a770(0x186)]();return _0x4421c1[_0x138888]||null;}[a60_0x5a9b7f(0x184)](_0x4d48c7,_0x36deff){const _0x53dbb3=a60_0x5a9b7f;try{ensureSettingsFileExists();const _0x17086e=this[_0x53dbb3(0x186)]();return!_0x17086e[_0x4d48c7]&&(_0x17086e[_0x4d48c7]={'minAmount':0x0,'maxAmount':0x0,'payoutDelay':0x0,'gatewayCommission':0x0}),_0x17086e[_0x4d48c7]={..._0x17086e[_0x4d48c7],..._0x36deff},fs_1[_0x53dbb3(0x19c)][_0x53dbb3(0x187)](SETTINGS_FILE_PATH,JSON[_0x53dbb3(0x19a)](_0x17086e,null,0x2),'utf8'),console[_0x53dbb3(0x17e)]('✅\x20Updated\x20gateway\x20settings\x20for\x20'+_0x4d48c7+':',_0x17086e[_0x4d48c7]),_0x17086e;}catch(_0x4af960){console[_0x53dbb3(0x198)](_0x53dbb3(0x1a3),_0x4af960);throw new Error('Failed\x20to\x20update\x20gateway\x20settings');}}[a60_0x5a9b7f(0x182)](){const _0x46f2d2=a60_0x5a9b7f,_0x549f28=this[_0x46f2d2(0x186)]();return gateway_1[_0x46f2d2(0x192)][_0x46f2d2(0x197)](_0x5a25fd=>({'id':_0x5a25fd['id'],'name':_0x5a25fd[_0x46f2d2(0x19f)],'displayName':_0x5a25fd[_0x46f2d2(0x1a0)],'settings':_0x549f28[_0x5a25fd['id']]||{'minAmount':0x0,'maxAmount':0x0,'payoutDelay':0x0,'gatewayCommission':0x0}}));}[a60_0x5a9b7f(0x18b)](_0x5064a1){const _0x33eb64=a60_0x5a9b7f,_0x3f0b6b=this['getSettings']();if(!_0x5064a1||!Array[_0x33eb64(0x189)](_0x5064a1)||_0x5064a1[_0x33eb64(0x18d)]===0x0)return[];return gateway_1[_0x33eb64(0x192)]['filter'](_0x2c7638=>_0x5064a1[_0x33eb64(0x194)](_0x2c7638[_0x33eb64(0x19f)]))[_0x33eb64(0x197)](_0x29108f=>({'id':_0x29108f['id'],'name':_0x29108f['name'],'displayName':_0x29108f[_0x33eb64(0x1a0)],'settings':_0x3f0b6b[_0x29108f['id']]||{'minAmount':0x0,'maxAmount':0x0,'payoutDelay':0x0,'gatewayCommission':0x0}}));}}exports[a60_0x5a9b7f(0x183)]=GatewaySettingsService,exports['gatewaySettingsService']=new GatewaySettingsService();