'use strict';function a60_0x16d0(_0x5863b3,_0x1db6f3){_0x5863b3=_0x5863b3-0xc2;const _0x56a0fb=a60_0x56a0();let _0x16d004=_0x56a0fb[_0x5863b3];return _0x16d004;}const a60_0x2236a5=a60_0x16d0;function a60_0x56a0(){const _0x438eba=['21339aRZsQg','getAllGatewaysWithSettings','error','Error\x20reading\x20gateway\x20settings:','244188uamwfd','Failed\x20to\x20update\x20gateway\x20settings','isArray','parse','writeFileSync','328CQhAxO','length','10PhzAUy','14UlCmsn','updateSettings','getSettingsByGatewayId','../types/gateway','70098YpTZQd','GatewaySettingsService','includes','stringify','AVAILABLE_GATEWAYS','existsSync','displayName','gatewaySettingsService','default','Error\x20updating\x20gateway\x20settings:','getGatewaysForShop','path','utf8','✅\x20Created\x20gateway-settings.json\x20with\x20default\x20values','join','log','6rMhgoO','415365GZTjvX','../../gateway-settings.json','296509RVkzMd','name','✅\x20Updated\x20gateway\x20settings\x20for\x20','getSettings','364420PyigQT','__esModule','2031293Blwvfj','filter','map'];a60_0x56a0=function(){return _0x438eba;};return a60_0x56a0();}(function(_0x3bed27,_0x2a34b1){const _0x2f4dc0=a60_0x16d0,_0x55b370=_0x3bed27();while(!![]){try{const _0x19c234=-parseInt(_0x2f4dc0(0xc2))/0x1+-parseInt(_0x2f4dc0(0xeb))/0x2*(-parseInt(_0x2f4dc0(0xec))/0x3)+parseInt(_0x2f4dc0(0xcf))/0x4+-parseInt(_0x2f4dc0(0xc6))/0x5+parseInt(_0x2f4dc0(0xdb))/0x6*(parseInt(_0x2f4dc0(0xd7))/0x7)+parseInt(_0x2f4dc0(0xd4))/0x8*(-parseInt(_0x2f4dc0(0xcb))/0x9)+-parseInt(_0x2f4dc0(0xd6))/0xa*(-parseInt(_0x2f4dc0(0xc8))/0xb);if(_0x19c234===_0x2a34b1)break;else _0x55b370['push'](_0x55b370['shift']());}catch(_0x45d6e4){_0x55b370['push'](_0x55b370['shift']());}}}(a60_0x56a0,0x352ed));var __importDefault=this&&this['__importDefault']||function(_0x46440c){const _0x4fa570=a60_0x16d0;return _0x46440c&&_0x46440c[_0x4fa570(0xc7)]?_0x46440c:{'default':_0x46440c};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a60_0x2236a5(0xe2)]=exports[a60_0x2236a5(0xdc)]=void 0x0;const fs_1=__importDefault(require('fs')),path_1=__importDefault(require(a60_0x2236a5(0xe6))),gateway_1=require(a60_0x2236a5(0xda)),SETTINGS_FILE_PATH=path_1['default'][a60_0x2236a5(0xe9)](__dirname,a60_0x2236a5(0xed)),getDefaultSettings=()=>{const _0x3f13fb=a60_0x2236a5,_0x68a24f={};return gateway_1[_0x3f13fb(0xdf)]['forEach'](_0x2aecc5=>{_0x68a24f[_0x2aecc5['id']]={'minAmount':0x0,'maxAmount':0x0,'payoutDelay':0x0,'gatewayCommission':0x0};}),_0x68a24f;},ensureSettingsFileExists=()=>{const _0x5ef2be=a60_0x2236a5;if(!fs_1['default'][_0x5ef2be(0xe0)](SETTINGS_FILE_PATH)){const _0x40d9b5=getDefaultSettings();fs_1[_0x5ef2be(0xe3)][_0x5ef2be(0xd3)](SETTINGS_FILE_PATH,JSON[_0x5ef2be(0xde)](_0x40d9b5,null,0x2),_0x5ef2be(0xe7)),console[_0x5ef2be(0xea)](_0x5ef2be(0xe8));}};class GatewaySettingsService{[a60_0x2236a5(0xc5)](){const _0x3753d4=a60_0x2236a5;try{ensureSettingsFileExists();const _0x2a1c0f=fs_1[_0x3753d4(0xe3)]['readFileSync'](SETTINGS_FILE_PATH,_0x3753d4(0xe7)),_0x1a0bc2=JSON[_0x3753d4(0xd2)](_0x2a1c0f);return _0x1a0bc2;}catch(_0x427633){return console[_0x3753d4(0xcd)](_0x3753d4(0xce),_0x427633),getDefaultSettings();}}[a60_0x2236a5(0xd9)](_0xb5e828){const _0x2eef86=a60_0x2236a5,_0x48517d=this[_0x2eef86(0xc5)]();return _0x48517d[_0xb5e828]||null;}[a60_0x2236a5(0xd8)](_0x3fc500,_0x269751){const _0x1ea9fe=a60_0x2236a5;try{ensureSettingsFileExists();const _0x2a6579=this['getSettings']();return!_0x2a6579[_0x3fc500]&&(_0x2a6579[_0x3fc500]={'minAmount':0x0,'maxAmount':0x0,'payoutDelay':0x0,'gatewayCommission':0x0}),_0x2a6579[_0x3fc500]={..._0x2a6579[_0x3fc500],..._0x269751},fs_1[_0x1ea9fe(0xe3)]['writeFileSync'](SETTINGS_FILE_PATH,JSON[_0x1ea9fe(0xde)](_0x2a6579,null,0x2),'utf8'),console[_0x1ea9fe(0xea)](_0x1ea9fe(0xc4)+_0x3fc500+':',_0x2a6579[_0x3fc500]),_0x2a6579;}catch(_0x197678){console[_0x1ea9fe(0xcd)](_0x1ea9fe(0xe4),_0x197678);throw new Error(_0x1ea9fe(0xd0));}}[a60_0x2236a5(0xcc)](){const _0x17a24b=a60_0x2236a5,_0x407245=this['getSettings']();return gateway_1['AVAILABLE_GATEWAYS'][_0x17a24b(0xca)](_0x84f38=>({'id':_0x84f38['id'],'name':_0x84f38[_0x17a24b(0xc3)],'displayName':_0x84f38[_0x17a24b(0xe1)],'settings':_0x407245[_0x84f38['id']]||{'minAmount':0x0,'maxAmount':0x0,'payoutDelay':0x0,'gatewayCommission':0x0}}));}[a60_0x2236a5(0xe5)](_0x35f5bd){const _0x568e51=a60_0x2236a5,_0x46a9ba=this['getSettings']();if(!_0x35f5bd||!Array[_0x568e51(0xd1)](_0x35f5bd)||_0x35f5bd[_0x568e51(0xd5)]===0x0)return[];return gateway_1['AVAILABLE_GATEWAYS'][_0x568e51(0xc9)](_0x5bedf=>_0x35f5bd[_0x568e51(0xdd)](_0x5bedf[_0x568e51(0xc3)]))[_0x568e51(0xca)](_0x4f30f0=>({'id':_0x4f30f0['id'],'name':_0x4f30f0['name'],'displayName':_0x4f30f0['displayName'],'settings':_0x46a9ba[_0x4f30f0['id']]||{'minAmount':0x0,'maxAmount':0x0,'payoutDelay':0x0,'gatewayCommission':0x0}}));}}exports[a60_0x2236a5(0xdc)]=GatewaySettingsService,exports[a60_0x2236a5(0xe2)]=new GatewaySettingsService();