'use strict';const a60_0x2e2994=a60_0x5874;(function(_0xdf566a,_0x4d8084){const _0x376184=a60_0x5874,_0x150db3=_0xdf566a();while(!![]){try{const _0x20a616=parseInt(_0x376184(0xb4))/0x1*(parseInt(_0x376184(0x90))/0x2)+-parseInt(_0x376184(0xb5))/0x3+-parseInt(_0x376184(0x98))/0x4*(parseInt(_0x376184(0x8e))/0x5)+parseInt(_0x376184(0xaa))/0x6+-parseInt(_0x376184(0xaf))/0x7+-parseInt(_0x376184(0x8d))/0x8+parseInt(_0x376184(0xb2))/0x9;if(_0x20a616===_0x4d8084)break;else _0x150db3['push'](_0x150db3['shift']());}catch(_0xe2dfb6){_0x150db3['push'](_0x150db3['shift']());}}}(a60_0x5140,0x78732));var __importDefault=this&&this[a60_0x2e2994(0xa6)]||function(_0x56ec52){const _0x11e8ca=a60_0x2e2994;return _0x56ec52&&_0x56ec52[_0x11e8ca(0xa4)]?_0x56ec52:{'default':_0x56ec52};};Object[a60_0x2e2994(0xad)](exports,a60_0x2e2994(0xa4),{'value':!![]}),exports[a60_0x2e2994(0x9f)]=exports[a60_0x2e2994(0xab)]=void 0x0;const fs_1=__importDefault(require('fs')),path_1=__importDefault(require(a60_0x2e2994(0xac))),gateway_1=require('../types/gateway'),SETTINGS_FILE_PATH=path_1[a60_0x2e2994(0x97)][a60_0x2e2994(0xa2)](__dirname,'../../gateway-settings.json'),getDefaultSettings=()=>{const _0x30a585=a60_0x2e2994,_0x5c7af1={};return gateway_1[_0x30a585(0x9a)][_0x30a585(0x92)](_0x7ac4ba=>{_0x5c7af1[_0x7ac4ba['id']]={'minAmount':0x0,'maxAmount':0x0,'payoutDelay':0x0,'gatewayCommission':0x0};}),_0x5c7af1;},ensureSettingsFileExists=()=>{const _0x1e76f7=a60_0x2e2994;if(!fs_1['default']['existsSync'](SETTINGS_FILE_PATH)){const _0x11adef=getDefaultSettings();fs_1[_0x1e76f7(0x97)]['writeFileSync'](SETTINGS_FILE_PATH,JSON[_0x1e76f7(0x94)](_0x11adef,null,0x2),_0x1e76f7(0xb3)),console[_0x1e76f7(0xa8)](_0x1e76f7(0xb0));}};function a60_0x5874(_0x53742c,_0x57acf9){_0x53742c=_0x53742c-0x8d;const _0x5140aa=a60_0x5140();let _0x587443=_0x5140aa[_0x53742c];return _0x587443;}class GatewaySettingsService{[a60_0x2e2994(0x8f)](){const _0x573af7=a60_0x2e2994;try{ensureSettingsFileExists();const _0x70c6d2=fs_1[_0x573af7(0x97)][_0x573af7(0xae)](SETTINGS_FILE_PATH,'utf8'),_0x579b9c=JSON[_0x573af7(0xa7)](_0x70c6d2);return _0x579b9c;}catch(_0x4af76f){return console[_0x573af7(0xa1)](_0x573af7(0xa9),_0x4af76f),getDefaultSettings();}}[a60_0x2e2994(0xb1)](_0x22691a){const _0x3d2e98=a60_0x2e2994,_0x59f5ce=this[_0x3d2e98(0x8f)]();return _0x59f5ce[_0x22691a]||null;}[a60_0x2e2994(0x99)](_0x24f170,_0x167d04){const _0x56a2df=a60_0x2e2994;try{ensureSettingsFileExists();const _0x3aa892=this[_0x56a2df(0x8f)]();return!_0x3aa892[_0x24f170]&&(_0x3aa892[_0x24f170]={'minAmount':0x0,'maxAmount':0x0,'payoutDelay':0x0,'gatewayCommission':0x0}),_0x3aa892[_0x24f170]={..._0x3aa892[_0x24f170],..._0x167d04},fs_1[_0x56a2df(0x97)]['writeFileSync'](SETTINGS_FILE_PATH,JSON[_0x56a2df(0x94)](_0x3aa892,null,0x2),_0x56a2df(0xb3)),console[_0x56a2df(0xa8)](_0x56a2df(0x9e)+_0x24f170+':',_0x3aa892[_0x24f170]),_0x3aa892;}catch(_0x5c61fb){console[_0x56a2df(0xa1)](_0x56a2df(0xa5),_0x5c61fb);throw new Error(_0x56a2df(0x91));}}[a60_0x2e2994(0xb6)](){const _0x482a16=a60_0x2e2994,_0x13cccc=this[_0x482a16(0x8f)]();return gateway_1[_0x482a16(0x9a)][_0x482a16(0xa3)](_0x64db0a=>({'id':_0x64db0a['id'],'name':_0x64db0a[_0x482a16(0x96)],'displayName':_0x64db0a['displayName'],'settings':_0x13cccc[_0x64db0a['id']]||{'minAmount':0x0,'maxAmount':0x0,'payoutDelay':0x0,'gatewayCommission':0x0}}));}[a60_0x2e2994(0xa0)](_0x338154){const _0x27bd0a=a60_0x2e2994,_0xebaa25=this[_0x27bd0a(0x8f)]();if(!_0x338154||!Array[_0x27bd0a(0x9d)](_0x338154)||_0x338154[_0x27bd0a(0x95)]===0x0)return[];return gateway_1['AVAILABLE_GATEWAYS'][_0x27bd0a(0x9c)](_0x2121f5=>_0x338154[_0x27bd0a(0x9b)](_0x2121f5['name']))['map'](_0x255050=>({'id':_0x255050['id'],'name':_0x255050[_0x27bd0a(0x96)],'displayName':_0x255050[_0x27bd0a(0x93)],'settings':_0xebaa25[_0x255050['id']]||{'minAmount':0x0,'maxAmount':0x0,'payoutDelay':0x0,'gatewayCommission':0x0}}));}}exports[a60_0x2e2994(0xab)]=GatewaySettingsService,exports[a60_0x2e2994(0x9f)]=new GatewaySettingsService();function a60_0x5140(){const _0x52e589=['parse','log','Error\x20reading\x20gateway\x20settings:','4502628LJyUnA','GatewaySettingsService','path','defineProperty','readFileSync','6584123fajyPl','✅\x20Created\x20gateway-settings.json\x20with\x20default\x20values','getSettingsByGatewayId','8853120ucyZfI','utf8','4rNicPn','2797506xttoWw','getAllGatewaysWithSettings','809368DCFKFN','372410qlPMlk','getSettings','403994Dqhtvw','Failed\x20to\x20update\x20gateway\x20settings','forEach','displayName','stringify','length','name','default','4YBJght','updateSettings','AVAILABLE_GATEWAYS','includes','filter','isArray','✅\x20Updated\x20gateway\x20settings\x20for\x20','gatewaySettingsService','getGatewaysForShop','error','join','map','__esModule','Error\x20updating\x20gateway\x20settings:','__importDefault'];a60_0x5140=function(){return _0x52e589;};return a60_0x5140();}