'use strict';const a60_0x314791=a60_0x4f8b;function a60_0x1de1(){const _0x6852=['getSettingsByGatewayId','17710288ZZPXzP','map','filter','default','gatewaySettingsService','writeFileSync','forEach','__esModule','readFileSync','✅\x20Updated\x20gateway\x20settings\x20for\x20','Error\x20updating\x20gateway\x20settings:','error','381294jJhDPH','AVAILABLE_GATEWAYS','existsSync','getGatewaysForShop','10186050RGnSJJ','18vuuTxX','join','name','parse','3352085WwYKuK','isArray','length','getSettings','7123356SsOmjN','13472067AghtAO','__importDefault','utf8','displayName','✅\x20Created\x20gateway-settings.json\x20with\x20default\x20values','GatewaySettingsService','updateSettings','log','109869aVShSs','path','Failed\x20to\x20update\x20gateway\x20settings','stringify'];a60_0x1de1=function(){return _0x6852;};return a60_0x1de1();}(function(_0x4521c9,_0x505205){const _0x414359=a60_0x4f8b,_0x5cf223=_0x4521c9();while(!![]){try{const _0x45f211=-parseInt(_0x414359(0xa4))/0x1+-parseInt(_0x414359(0xa9))/0x2*(-parseInt(_0x414359(0x93))/0x3)+parseInt(_0x414359(0xb1))/0x4+parseInt(_0x414359(0xad))/0x5+-parseInt(_0x414359(0xa8))/0x6+-parseInt(_0x414359(0xb2))/0x7+parseInt(_0x414359(0x98))/0x8;if(_0x45f211===_0x505205)break;else _0x5cf223['push'](_0x5cf223['shift']());}catch(_0x53cee6){_0x5cf223['push'](_0x5cf223['shift']());}}}(a60_0x1de1,0xf1f7b));var __importDefault=this&&this[a60_0x314791(0xb3)]||function(_0x3f77df){const _0x3ead44=a60_0x314791;return _0x3f77df&&_0x3f77df[_0x3ead44(0x9f)]?_0x3f77df:{'default':_0x3f77df};};function a60_0x4f8b(_0x1c9b33,_0x3d6170){_0x1c9b33=_0x1c9b33-0x90;const _0x1de17e=a60_0x1de1();let _0x4f8b79=_0x1de17e[_0x1c9b33];return _0x4f8b79;}Object['defineProperty'](exports,a60_0x314791(0x9f),{'value':!![]}),exports[a60_0x314791(0x9c)]=exports[a60_0x314791(0x90)]=void 0x0;const fs_1=__importDefault(require('fs')),path_1=__importDefault(require(a60_0x314791(0x94))),gateway_1=require('../types/gateway'),SETTINGS_FILE_PATH=path_1[a60_0x314791(0x9b)][a60_0x314791(0xaa)](__dirname,'../../gateway-settings.json'),getDefaultSettings=()=>{const _0x2d343d=a60_0x314791,_0x2fe099={};return gateway_1[_0x2d343d(0xa5)][_0x2d343d(0x9e)](_0x46c59d=>{_0x2fe099[_0x46c59d['id']]={'minAmount':0x0,'maxAmount':0x0,'payoutDelay':0x0,'gatewayCommission':0x0};}),_0x2fe099;},ensureSettingsFileExists=()=>{const _0x264101=a60_0x314791;if(!fs_1[_0x264101(0x9b)][_0x264101(0xa6)](SETTINGS_FILE_PATH)){const _0x454698=getDefaultSettings();fs_1[_0x264101(0x9b)]['writeFileSync'](SETTINGS_FILE_PATH,JSON[_0x264101(0x96)](_0x454698,null,0x2),_0x264101(0xb4)),console[_0x264101(0x92)](_0x264101(0xb6));}};class GatewaySettingsService{[a60_0x314791(0xb0)](){const _0x4f4c8a=a60_0x314791;try{ensureSettingsFileExists();const _0x45a268=fs_1[_0x4f4c8a(0x9b)][_0x4f4c8a(0xa0)](SETTINGS_FILE_PATH,_0x4f4c8a(0xb4)),_0x4ad85e=JSON[_0x4f4c8a(0xac)](_0x45a268);return _0x4ad85e;}catch(_0x395af4){return console[_0x4f4c8a(0xa3)]('Error\x20reading\x20gateway\x20settings:',_0x395af4),getDefaultSettings();}}[a60_0x314791(0x97)](_0x583bed){const _0x57cfaa=this['getSettings']();return _0x57cfaa[_0x583bed]||null;}[a60_0x314791(0x91)](_0x366a11,_0x265930){const _0x4d8e3d=a60_0x314791;try{ensureSettingsFileExists();const _0x5b9972=this['getSettings']();return!_0x5b9972[_0x366a11]&&(_0x5b9972[_0x366a11]={'minAmount':0x0,'maxAmount':0x0,'payoutDelay':0x0,'gatewayCommission':0x0}),_0x5b9972[_0x366a11]={..._0x5b9972[_0x366a11],..._0x265930},fs_1[_0x4d8e3d(0x9b)][_0x4d8e3d(0x9d)](SETTINGS_FILE_PATH,JSON[_0x4d8e3d(0x96)](_0x5b9972,null,0x2),'utf8'),console['log'](_0x4d8e3d(0xa1)+_0x366a11+':',_0x5b9972[_0x366a11]),_0x5b9972;}catch(_0x290211){console['error'](_0x4d8e3d(0xa2),_0x290211);throw new Error(_0x4d8e3d(0x95));}}['getAllGatewaysWithSettings'](){const _0x7e9f58=a60_0x314791,_0x295261=this[_0x7e9f58(0xb0)]();return gateway_1['AVAILABLE_GATEWAYS'][_0x7e9f58(0x99)](_0x1e66cc=>({'id':_0x1e66cc['id'],'name':_0x1e66cc[_0x7e9f58(0xab)],'displayName':_0x1e66cc[_0x7e9f58(0xb5)],'settings':_0x295261[_0x1e66cc['id']]||{'minAmount':0x0,'maxAmount':0x0,'payoutDelay':0x0,'gatewayCommission':0x0}}));}[a60_0x314791(0xa7)](_0x24bad8){const _0x386a17=a60_0x314791,_0x80ae87=this['getSettings']();if(!_0x24bad8||!Array[_0x386a17(0xae)](_0x24bad8)||_0x24bad8[_0x386a17(0xaf)]===0x0)return[];return gateway_1[_0x386a17(0xa5)][_0x386a17(0x9a)](_0x726c9c=>_0x24bad8['includes'](_0x726c9c[_0x386a17(0xab)]))[_0x386a17(0x99)](_0x3bcd48=>({'id':_0x3bcd48['id'],'name':_0x3bcd48[_0x386a17(0xab)],'displayName':_0x3bcd48[_0x386a17(0xb5)],'settings':_0x80ae87[_0x3bcd48['id']]||{'minAmount':0x0,'maxAmount':0x0,'payoutDelay':0x0,'gatewayCommission':0x0}}));}}exports[a60_0x314791(0x90)]=GatewaySettingsService,exports[a60_0x314791(0x9c)]=new GatewaySettingsService();