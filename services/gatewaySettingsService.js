'use strict';const a60_0x472632=a60_0x2658;(function(_0x4ea3e3,_0x23fe19){const _0x29ed16=a60_0x2658,_0xe37c53=_0x4ea3e3();while(!![]){try{const _0x3d9851=parseInt(_0x29ed16(0xa6))/0x1+parseInt(_0x29ed16(0xae))/0x2*(parseInt(_0x29ed16(0xa4))/0x3)+-parseInt(_0x29ed16(0xb0))/0x4+-parseInt(_0x29ed16(0xac))/0x5*(-parseInt(_0x29ed16(0xa7))/0x6)+parseInt(_0x29ed16(0xb4))/0x7+-parseInt(_0x29ed16(0x9c))/0x8*(parseInt(_0x29ed16(0x9d))/0x9)+-parseInt(_0x29ed16(0x9b))/0xa*(parseInt(_0x29ed16(0xb8))/0xb);if(_0x3d9851===_0x23fe19)break;else _0xe37c53['push'](_0xe37c53['shift']());}catch(_0x5f2f73){_0xe37c53['push'](_0xe37c53['shift']());}}}(a60_0x3344,0xd5bbd));function a60_0x2658(_0x31e32a,_0x1de9e2){_0x31e32a=_0x31e32a-0x98;const _0x334443=a60_0x3344();let _0x26582a=_0x334443[_0x31e32a];return _0x26582a;}var __importDefault=this&&this[a60_0x472632(0x98)]||function(_0x4fb666){return _0x4fb666&&_0x4fb666['__esModule']?_0x4fb666:{'default':_0x4fb666};};Object[a60_0x472632(0x9a)](exports,a60_0x472632(0xa1),{'value':!![]}),exports[a60_0x472632(0x99)]=exports[a60_0x472632(0xb3)]=void 0x0;function a60_0x3344(){const _0x577ca9=['✅\x20Created\x20gateway-settings.json\x20with\x20default\x20values','displayName','Error\x20reading\x20gateway\x20settings:','1760eYDtfv','map','getSettings','default','existsSync','__importDefault','gatewaySettingsService','defineProperty','98310NVoTuL','4246376Cdyigx','9WdNUeE','forEach','error','filter','__esModule','writeFileSync','utf8','10341MjSLBV','getGatewaysForShop','1476046igPHgY','2599386vHxFcn','log','AVAILABLE_GATEWAYS','getSettingsByGatewayId','length','5qdsAdP','stringify','822QUocaF','getAllGatewaysWithSettings','4274252EOSuht','name','Failed\x20to\x20update\x20gateway\x20settings','GatewaySettingsService','5052453IuGfiS'];a60_0x3344=function(){return _0x577ca9;};return a60_0x3344();}const fs_1=__importDefault(require('fs')),path_1=__importDefault(require('path')),gateway_1=require('../types/gateway'),SETTINGS_FILE_PATH=path_1[a60_0x472632(0xbb)]['join'](__dirname,'../../gateway-settings.json'),getDefaultSettings=()=>{const _0x4eef57=a60_0x472632,_0x21a761={};return gateway_1[_0x4eef57(0xa9)][_0x4eef57(0x9e)](_0x37168e=>{_0x21a761[_0x37168e['id']]={'minAmount':0x0,'maxAmount':0x0,'payoutDelay':0x0,'gatewayCommission':0x0};}),_0x21a761;},ensureSettingsFileExists=()=>{const _0x2e4568=a60_0x472632;if(!fs_1[_0x2e4568(0xbb)][_0x2e4568(0xbc)](SETTINGS_FILE_PATH)){const _0x45c801=getDefaultSettings();fs_1['default'][_0x2e4568(0xa2)](SETTINGS_FILE_PATH,JSON[_0x2e4568(0xad)](_0x45c801,null,0x2),_0x2e4568(0xa3)),console[_0x2e4568(0xa8)](_0x2e4568(0xb5));}};class GatewaySettingsService{['getSettings'](){const _0x190b3f=a60_0x472632;try{ensureSettingsFileExists();const _0xdddfc4=fs_1[_0x190b3f(0xbb)]['readFileSync'](SETTINGS_FILE_PATH,'utf8'),_0x42b810=JSON['parse'](_0xdddfc4);return _0x42b810;}catch(_0x19a6ec){return console[_0x190b3f(0x9f)](_0x190b3f(0xb7),_0x19a6ec),getDefaultSettings();}}[a60_0x472632(0xaa)](_0x14b912){const _0x2cd84c=a60_0x472632,_0x397ab9=this[_0x2cd84c(0xba)]();return _0x397ab9[_0x14b912]||null;}['updateSettings'](_0x83330f,_0x136db4){const _0x1b203d=a60_0x472632;try{ensureSettingsFileExists();const _0x3beba2=this['getSettings']();return!_0x3beba2[_0x83330f]&&(_0x3beba2[_0x83330f]={'minAmount':0x0,'maxAmount':0x0,'payoutDelay':0x0,'gatewayCommission':0x0}),_0x3beba2[_0x83330f]={..._0x3beba2[_0x83330f],..._0x136db4},fs_1['default'][_0x1b203d(0xa2)](SETTINGS_FILE_PATH,JSON[_0x1b203d(0xad)](_0x3beba2,null,0x2),'utf8'),console[_0x1b203d(0xa8)]('✅\x20Updated\x20gateway\x20settings\x20for\x20'+_0x83330f+':',_0x3beba2[_0x83330f]),_0x3beba2;}catch(_0x22d8c5){console['error']('Error\x20updating\x20gateway\x20settings:',_0x22d8c5);throw new Error(_0x1b203d(0xb2));}}[a60_0x472632(0xaf)](){const _0x1b0a54=a60_0x472632,_0x2bd9fb=this[_0x1b0a54(0xba)]();return gateway_1[_0x1b0a54(0xa9)][_0x1b0a54(0xb9)](_0x358c48=>({'id':_0x358c48['id'],'name':_0x358c48['name'],'displayName':_0x358c48[_0x1b0a54(0xb6)],'settings':_0x2bd9fb[_0x358c48['id']]||{'minAmount':0x0,'maxAmount':0x0,'payoutDelay':0x0,'gatewayCommission':0x0}}));}[a60_0x472632(0xa5)](_0x44bd7b){const _0x3312a1=a60_0x472632,_0xcab43d=this[_0x3312a1(0xba)]();if(!_0x44bd7b||!Array['isArray'](_0x44bd7b)||_0x44bd7b[_0x3312a1(0xab)]===0x0)return[];return gateway_1[_0x3312a1(0xa9)][_0x3312a1(0xa0)](_0xe930b3=>_0x44bd7b['includes'](_0xe930b3['name']))['map'](_0x4a6817=>({'id':_0x4a6817['id'],'name':_0x4a6817[_0x3312a1(0xb1)],'displayName':_0x4a6817[_0x3312a1(0xb6)],'settings':_0xcab43d[_0x4a6817['id']]||{'minAmount':0x0,'maxAmount':0x0,'payoutDelay':0x0,'gatewayCommission':0x0}}));}}exports[a60_0x472632(0xb3)]=GatewaySettingsService,exports[a60_0x472632(0x99)]=new GatewaySettingsService();