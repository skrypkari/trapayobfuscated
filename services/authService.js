'use strict';const a34_0x26d671=a34_0x3d39;(function(_0x7b15fc,_0xb4709b){const _0x12873f=a34_0x3d39,_0x50ceee=_0x7b15fc();while(!![]){try{const _0x1b99dc=parseInt(_0x12873f(0x8e))/0x1*(-parseInt(_0x12873f(0xae))/0x2)+-parseInt(_0x12873f(0x96))/0x3+-parseInt(_0x12873f(0x8a))/0x4+-parseInt(_0x12873f(0x8c))/0x5*(-parseInt(_0x12873f(0x9c))/0x6)+-parseInt(_0x12873f(0xa6))/0x7+-parseInt(_0x12873f(0x90))/0x8+-parseInt(_0x12873f(0xa3))/0x9*(-parseInt(_0x12873f(0xa2))/0xa);if(_0x1b99dc===_0xb4709b)break;else _0x50ceee['push'](_0x50ceee['shift']());}catch(_0x32a0b0){_0x50ceee['push'](_0x50ceee['shift']());}}}(a34_0x1134,0x1c6c9));function a34_0x3d39(_0x19f8f8,_0x456de1){const _0x1134ef=a34_0x1134();return a34_0x3d39=function(_0x3d395b,_0x482e2b){_0x3d395b=_0x3d395b-0x89;let _0x2aaa79=_0x1134ef[_0x3d395b];return _0x2aaa79;},a34_0x3d39(_0x19f8f8,_0x456de1);}var __importDefault=this&&this[a34_0x26d671(0x9a)]||function(_0x1650a7){const _0x513052=a34_0x26d671;return _0x1650a7&&_0x1650a7[_0x513052(0xab)]?_0x1650a7:{'default':_0x1650a7};};Object[a34_0x26d671(0xaa)](exports,a34_0x26d671(0xab),{'value':!![]}),exports['AuthService']=void 0x0;const bcryptjs_1=__importDefault(require('bcryptjs')),jsonwebtoken_1=__importDefault(require(a34_0x26d671(0x8f))),database_1=__importDefault(require(a34_0x26d671(0xad))),config_1=require(a34_0x26d671(0xa8));class AuthService{[a34_0x26d671(0xa1)](_0x1ad200){const _0x30184b=a34_0x26d671;return jsonwebtoken_1[_0x30184b(0x93)][_0x30184b(0xac)](_0x1ad200,config_1[_0x30184b(0x8d)][_0x30184b(0x92)][_0x30184b(0x9f)],{'expiresIn':String(config_1[_0x30184b(0x8d)][_0x30184b(0x92)][_0x30184b(0x9e)])});}async[a34_0x26d671(0x98)](_0x3496b1){const _0x516e0e=a34_0x26d671,{username:_0x40e898,password:_0x5d6651}=_0x3496b1;if(_0x40e898===config_1['config']['admin'][_0x516e0e(0x8b)]){const _0xe6aaf5=await bcryptjs_1[_0x516e0e(0x93)][_0x516e0e(0xa9)](_0x5d6651,config_1[_0x516e0e(0x8d)][_0x516e0e(0x97)][_0x516e0e(0x89)]);if(_0xe6aaf5){const _0x9d886d=this[_0x516e0e(0xa1)]({'id':_0x516e0e(0x97),'username':config_1[_0x516e0e(0x8d)][_0x516e0e(0x97)][_0x516e0e(0x8b)],'role':'admin'});return{'access_token':_0x9d886d,'role':_0x516e0e(0x97)};}}const _0x5ea030=await database_1['default'][_0x516e0e(0x99)][_0x516e0e(0xa0)]({'where':{'username':_0x40e898},'select':{'id':!![],'name':!![],'username':!![],'password':!![],'status':!![]}});if(!_0x5ea030)throw new Error(_0x516e0e(0x9b));if(_0x5ea030['status']!=='ACTIVE')throw new Error(_0x516e0e(0x94));const _0x214c82=await bcryptjs_1['default']['compare'](_0x5d6651,_0x5ea030[_0x516e0e(0xa5)]);if(!_0x214c82)throw new Error(_0x516e0e(0x9b));const _0x5df278=this[_0x516e0e(0xa1)]({'id':_0x5ea030['id'],'username':_0x5ea030[_0x516e0e(0x8b)],'role':'shop'});return{'access_token':_0x5df278,'role':_0x516e0e(0x99),'user':{'id':_0x5ea030['id'],'name':_0x5ea030[_0x516e0e(0xa7)],'username':_0x5ea030[_0x516e0e(0x8b)]}};}async[a34_0x26d671(0x95)](_0x4f2c1a){const _0x301c25=a34_0x26d671;try{const _0x315f9a=jsonwebtoken_1[_0x301c25(0x93)][_0x301c25(0x9d)](_0x4f2c1a,config_1[_0x301c25(0x8d)][_0x301c25(0x92)][_0x301c25(0x9f)]);return _0x315f9a;}catch(_0x521ac4){throw new Error(_0x301c25(0xa4));}}}exports[a34_0x26d671(0x91)]=AuthService;function a34_0x1134(){const _0x3ac377=['secret','findUnique','generateToken','10670qfiMCe','2682seIrpA','Invalid\x20token','password','299327uzUury','name','../config/config','compare','defineProperty','__esModule','sign','../config/database','334lXjCwn','passwordHash','444232SMHVIL','username','15lQrtHh','config','255OvQEpD','jsonwebtoken','866560SweypC','AuthService','jwt','default','Account\x20is\x20not\x20active','verifyToken','246444rsfsev','admin','login','shop','__importDefault','Invalid\x20credentials','370662maSlMX','verify','expiresIn'];a34_0x1134=function(){return _0x3ac377;};return a34_0x1134();}