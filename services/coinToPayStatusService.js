'use strict';const a37_0x53eecd=a37_0x5d6e;(function(_0x3b7c1e,_0x4e86c8){const _0x79ec77=a37_0x5d6e,_0x5f5311=_0x3b7c1e();while(!![]){try{const _0x10e4be=parseInt(_0x79ec77(0x107))/0x1*(parseInt(_0x79ec77(0xe0))/0x2)+parseInt(_0x79ec77(0xea))/0x3*(-parseInt(_0x79ec77(0x17f))/0x4)+parseInt(_0x79ec77(0xc1))/0x5*(parseInt(_0x79ec77(0xd7))/0x6)+parseInt(_0x79ec77(0xc9))/0x7+parseInt(_0x79ec77(0x133))/0x8+parseInt(_0x79ec77(0xb3))/0x9+parseInt(_0x79ec77(0xc2))/0xa*(-parseInt(_0x79ec77(0xf5))/0xb);if(_0x10e4be===_0x4e86c8)break;else _0x5f5311['push'](_0x5f5311['shift']());}catch(_0x1987c6){_0x5f5311['push'](_0x5f5311['shift']());}}}(a37_0x4838,0x94ac8));var __importDefault=this&&this[a37_0x53eecd(0x10b)]||function(_0x1e125d){const _0x558cd4=a37_0x53eecd;return _0x1e125d&&_0x1e125d[_0x558cd4(0x168)]?_0x1e125d:{'default':_0x1e125d};};function a37_0x4838(){const _0x1d48d9=['__importDefault','\x20expired\x20CoinToPay\x20payments','webhook_send','‚ùå\x20[GLOBAL]\x20Failed\x20to\x20check\x20CoinToPay\x20payment\x20','\x20\x20\x20-\x20paymentId:\x20','checkAllPendingPayments','stack','1\x20minute','üîç\x20[MANUAL]\x20Manual\x20check\x20requested\x20for\x20payment:\x20','log','delay','\x20status\x20is\x20','\x20(after\x20','./loggerService','payment.failed','size','status_check','getServiceStats','webhookLog','not\x20confirmed','‚ùå\x20[INIT]\x20Initial\x20CoinToPay\x20status\x20check\x20failed:','checkPaymentStatus',',\x20stopping\x20individual\x20checks','setDate','\x20found:','telegramBotService','now','\x20days','remitterIban','toISOString','gateway','ü™ô\x20[GLOBAL]\x20Getting\x20all\x20pending\x20CoinToPay\x20payments...','üßπ\x20[DEBUG]\x20Cleared\x20timer\x20#','schedulePaymentChecks','PAID','logCoinToPayStatus','payment.success','PENDING','\x20status\x20from\x20','üõë\x20[SHUTDOWN]\x20Cleared\x20','9519216PozfGv','settings','currency','5\x20minutes','\x20not\x20enabled\x20for\x20shop\x20','createdOn','paymentTimers','COINTOPAY_ERROR','‚ö†Ô∏è\x20[DEBUG]\x20No\x20timers\x20found\x20for\x20payment\x20','created','\x20already\x20marked\x20as\x20expired,\x20skipping\x20global\x20check','logShopWebhookError','‚úÖ\x20[DEBUG]\x20All\x20timers\x20cleared\x20for\x20payment\x20','‚úÖ\x20[MANUAL]\x20Starting\x20manual\x20check\x20for\x20','push','logShopWebhookSent','üÜî\x20[CHECK]\x20Transaction\x20ID:\x20','\x20marked\x20as\x20paid\x20at:\x20','floor','CoinToPayStatusService','\x20checked,\x20','bankDetails','payment','payment.pending','‚ùå\x20[GLOBAL]\x20Periodic\x20CoinToPay\x20status\x20check\x20failed:','ü™ô\x20[LOG]\x20CoinToPay\x20Status\x20Change:\x20','toLowerCase','cointopay2','clearPaymentTimers','includes','getPaymentTimerInfo','Bank\x20Details:\x20','globalCheckInterval','üìä\x20[CHECK]\x20Payment\x20','‚úÖ\x20[TIMER]\x20Individual\x20check\x20#','auto_expire','stringify','paidAt','ms)','unknown','coinToPayStatusService','üßπ\x20[CHECK]\x20Payment\x20','schedule_created','findMany','‚úÖ\x20[GLOBAL]\x20Global\x20check\x20cycle\x20completed','‚ùå\x20[GLOBAL]\x20Failed\x20to\x20get\x20pending\x20CoinToPay\x20payments:','ü™ô\x20[INIT]\x20Starting\x20CoinToPay\x20periodic\x20status\x20checking\x20(global\x20checks\x20every\x201\x20hour)','amount','ü™ô\x20CoinToPayStatusService\x20initialized\x20with\x20support\x20for\x20both\x20CoinToPay\x20and\x20CoinToPay2','\x20\x20\x20üìù\x20Context:','create','createdAt','EXPIRED','__esModule','not\x20found','checkExpiredPayments','gatewayOrderId','\x20initial\x20checks\x20+\x20hourly\x20checks\x20for\x20payment\x20','transactionId','iban','\x20\x20\x20üìä\x20Status:\x20','ü™ô\x20[GLOBAL]\x20Starting\x20global\x20check\x20cycle...','\x20has\x20no\x20gatewayPaymentId','‚úÖ\x20[INIT]\x20CoinToPay\x20status\x20checking\x20service\x20started\x20(global\x20hourly\x20checks\x20+\x20individual\x20payment\x20timers)','checkPaymentById','status','message','‚úÖ\x20[HOURLY]\x20Payment\x20','\x20status:\x20','\x20completed\x20for\x20payment\x20','cointopay_auto_expired','üìä\x20[CHECK]\x20CoinToPay\x20payment\x20','\x20payment\x20','set','loggerService','‚è∞\x20[HOURLY]\x20Payment\x20','4uTrkVy','CoinToPay2Service','stopPeriodicStatusCheck','cointopay_status_check_','gatewayPaymentId','ü™ô\x20[TIMER]\x20Individual\x20check\x20#','\x20\x20\x20-\x20Status:\x20','timestamp','‚úÖ\x20[HOURLY]\x20Hourly\x20check\x20completed\x20for\x20payment\x20','‚è∞\x20[GLOBAL]\x20Payment\x20','\x20days,\x20marking\x20as\x20EXPIRED','‚ö†Ô∏è\x20[CHECK]\x20Payment\x20','‚è∞\x20[EXPIRY]\x20Checking\x20for\x20CoinToPay\x20payments\x20older\x20than\x20','default','\x20seconds\x20(','shop','getDate','Success','cointopay','üí∞\x20[CHECK]\x20Payment\x20','EXPIRY_DAYS','\x20current\x20status:\x20','update','\x20days\x20(created\x20before\x20','webhookUrl','\x20\x20\x20-\x20gatewayPaymentId:\x20','6325452koLFuM','../config/database','\x20for\x20payment\x20','values','Shop\x20webhook\x20sent\x20to\x20','description','Failed\x20to\x20send\x20Telegram\x20payment\x20notification:','customerEmail','toFixed','‚ùå\x20[TIMER]\x20Failed\x20individual\x20check\x20#','\x20details:','COINTOPAY_STATUS_CHANGE','\x20updated\x20successfully','‚úÖ\x20[MANUAL]\x20Manual\x20check\x20completed\x20for\x20payment\x20','13255fFNdMe','20470HCBSLp','\x20is\x20older\x20than\x20','paymentDetails','No\x20webhook\x20URL\x20configured\x20for\x20shop\x20','üìä\x20[CHECK]\x20CoinToPay2\x20payment\x20','üîÑ\x20[CHECK]\x20Updating\x20payment\x20','‚ùå\x20[CHECK]\x20Failed\x20to\x20check\x20payment\x20','6598613GVhdqU','text','coinToPay2Service','.\x20Remaining\x20active\x20timers:\x20','failed','getGatewayIdByName','üîç\x20[CHECK]\x20Checking\x20','catch','length','\x20is\x20too\x20new\x20(','CoinToPayService','./gateways/coinToPayService','\x20->\x20','checkSinglePaymentById','162GQzCgG','\x20\x20\x20-\x20GatewayPaymentId:\x20','error','\x20(age:\x20','paid','getTime','ü™ô\x20[ERROR]\x20CoinToPay\x20Error:\x20','\x20in\x20','Failed\x20to\x20send\x20shop\x20webhook:','344462cClBGd','\x20\x20\x20-\x20Amount:\x20','\x20initial\x20timers\x20for\x20payment\x20','ü™ô\x20[GLOBAL]\x20Found\x20','Unknown\x20error','‚úÖ\x20[CHECK]\x20Payment\x20','Payment\x20older\x20than\x20','get','‚úÖ\x20[CHECK]\x20Transaction\x20confirmed\x20on:\x20','webhookEvents','606459uKPlNJ','üõë\x20[SHUTDOWN]\x20Stopping\x20CoinToPay\x20status\x20checking\x20service...','‚è∞\x20[GLOBAL]\x20Found\x20','checkSinglePayment','coinToPayService','shopId','\x20status\x20changed\x20to\x20','‚ùå\x20[HOURLY]\x20Payment\x20','GLOBAL_CHECK_INTERVAL_MS','\x20with\x20status\x20','sendShopWebhook','12188GNcQnm','/status/','‚úÖ\x20[GLOBAL]\x20Global\x20check\x20completed:\x20','findUnique','\x20pending\x20CoinToPay\x20payments','üè¶\x20[CHECK]\x20Saved\x20IBAN:\x20','sendPaymentStatusNotification','logCoinToPayError','startPeriodicStatusCheck',',\x20clearing\x20individual\x20timers','üõë\x20[SHUTDOWN]\x20CoinToPay\x20global\x20status\x20checking\x20stopped','ü™ô\x20[DEBUG]\x20Creating\x20','\x20timers\x20for\x20payment\x20','\x20individual\x20payment\x20timers','delete','forEach','../types/gateway','ü™ô\x20[HOURLY]\x20Hourly\x20check\x20triggered\x20for\x20payment\x20','1llXrjT','adminNotes','üìä\x20[HOURLY]\x20Payment\x20','\x20\x20\x20üìÖ\x20Time:\x20'];a37_0x4838=function(){return _0x1d48d9;};return a37_0x4838();}function a37_0x5d6e(_0x1ae136,_0x2912e2){const _0x4838db=a37_0x4838();return a37_0x5d6e=function(_0x5d6eb1,_0x568699){_0x5d6eb1=_0x5d6eb1-0xac;let _0x114cec=_0x4838db[_0x5d6eb1];return _0x114cec;},a37_0x5d6e(_0x1ae136,_0x2912e2);}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a37_0x53eecd(0x15b)]=exports[a37_0x53eecd(0x146)]=void 0x0;const coinToPayService_1=require(a37_0x53eecd(0xd4)),coinToPay2Service_1=require('./gateways/coinToPay2Service'),gateway_1=require(a37_0x53eecd(0x105)),database_1=__importDefault(require(a37_0x53eecd(0xb4))),telegramBotService_1=require('./telegramBotService'),loggerService_1=require(a37_0x53eecd(0x118));class CoinToPayStatusService{constructor(){const _0x383902=a37_0x53eecd;this[_0x383902(0x153)]=null,this[_0x383902(0xf2)]=0x3c*0x3c*0x3e8,this['EXPIRY_DAYS']=0x5,this[_0x383902(0x139)]=new Map(),this[_0x383902(0xee)]=new coinToPayService_1[(_0x383902(0xd3))](),this[_0x383902(0xcb)]=new coinToPay2Service_1[(_0x383902(0x180))](),console[_0x383902(0x114)](_0x383902(0x163));}[a37_0x53eecd(0x12c)](_0x1fdce4,_0x146a9e){const _0x36747f=a37_0x53eecd;console[_0x36747f(0x114)]('ü™ô\x20[DEBUG]\x20schedulePaymentChecks\x20called\x20with:'),console['log'](_0x36747f(0x10f)+_0x1fdce4),console[_0x36747f(0x114)](_0x36747f(0xb2)+_0x146a9e),this[_0x36747f(0x14f)](_0x1fdce4);const _0x5422b4=[],_0x4d2140=new Date(),_0x266863=[{'delay':0x1*0x3c*0x3e8,'description':_0x36747f(0x112)},{'delay':0x2*0x3c*0x3e8,'description':'2\x20minutes'},{'delay':0x5*0x3c*0x3e8,'description':_0x36747f(0x136)},{'delay':0x5*0x3c*0x3e8,'description':_0x36747f(0x136)}];console[_0x36747f(0x114)](_0x36747f(0x100)+_0x266863[_0x36747f(0xd1)]+_0x36747f(0xe2)+_0x1fdce4);let _0x5f402c=0x0;_0x266863[_0x36747f(0x104)]((_0x46719a,_0x29ea7b)=>{const _0x11f050=_0x36747f;_0x5f402c+=_0x46719a[_0x11f050(0x115)];const _0x1b3a4d=setTimeout(async()=>{const _0x39c3d1=_0x11f050;console[_0x39c3d1(0x114)](_0x39c3d1(0x184)+(_0x29ea7b+0x1)+'\x20triggered\x20for\x20payment\x20'+_0x1fdce4+_0x39c3d1(0x117)+_0x46719a['description']+')');try{await this[_0x39c3d1(0xd6)](_0x1fdce4),console[_0x39c3d1(0x114)](_0x39c3d1(0x155)+(_0x29ea7b+0x1)+_0x39c3d1(0x178)+_0x1fdce4);}catch(_0x1fc95f){console[_0x39c3d1(0xd9)](_0x39c3d1(0xbc)+(_0x29ea7b+0x1)+_0x39c3d1(0xb5)+_0x1fdce4+':',_0x1fc95f),this[_0x39c3d1(0xfc)](_0x1fdce4,_0x146a9e,_0x1fc95f,_0x39c3d1(0x11b),{'checkNumber':_0x29ea7b+0x1,'scheduledAfter':_0x46719a[_0x39c3d1(0xb8)],'isIndividualCheck':!![]});}},_0x5f402c);_0x5422b4['push'](_0x1b3a4d),console[_0x11f050(0x114)]('‚è∞\x20[DEBUG]\x20Scheduled\x20check\x20#'+(_0x29ea7b+0x1)+_0x11f050(0xb5)+_0x1fdce4+_0x11f050(0xde)+_0x5f402c/0x3e8+_0x11f050(0x18d)+_0x46719a[_0x11f050(0xb8)]+')');});const _0x249a7d=setInterval(async()=>{const _0x1dcd5c=_0x36747f;console['log'](_0x1dcd5c(0x106)+_0x1fdce4);try{const _0x513f35=await database_1[_0x1dcd5c(0x18c)][_0x1dcd5c(0x149)][_0x1dcd5c(0xf8)]({'where':{'id':_0x1fdce4},'select':{'id':!![],'status':!![],'createdAt':!![],'gatewayPaymentId':!![]}});if(!_0x513f35){console['log'](_0x1dcd5c(0xf1)+_0x1fdce4+'\x20not\x20found,\x20clearing\x20timers'),this[_0x1dcd5c(0x14f)](_0x1fdce4);return;}console[_0x1dcd5c(0x114)](_0x1dcd5c(0x109)+_0x1fdce4+_0x1dcd5c(0xae)+_0x513f35[_0x1dcd5c(0x174)]);if(_0x513f35[_0x1dcd5c(0x174)]!==_0x1dcd5c(0x130)){console['log'](_0x1dcd5c(0x176)+_0x1fdce4+_0x1dcd5c(0x116)+_0x513f35[_0x1dcd5c(0x174)]+_0x1dcd5c(0x121)),this[_0x1dcd5c(0x14f)](_0x1fdce4);return;}const _0xf9faf5=Math[_0x1dcd5c(0x145)]((Date[_0x1dcd5c(0x125)]()-_0x513f35['createdAt']['getTime']())/(0x3e8*0x3c*0x3c*0x18));if(_0xf9faf5>=this[_0x1dcd5c(0xad)]){console['log'](_0x1dcd5c(0x17e)+_0x1fdce4+_0x1dcd5c(0xc3)+this[_0x1dcd5c(0xad)]+'\x20days,\x20will\x20be\x20handled\x20by\x20global\x20expiry\x20check'),this[_0x1dcd5c(0x14f)](_0x1fdce4);return;}await this['checkSinglePaymentById'](_0x1fdce4),console[_0x1dcd5c(0x114)](_0x1dcd5c(0x187)+_0x1fdce4);}catch(_0x411d92){console[_0x1dcd5c(0xd9)]('‚ùå\x20[HOURLY]\x20Failed\x20hourly\x20check\x20for\x20payment\x20'+_0x1fdce4+':',_0x411d92),this[_0x1dcd5c(0xfc)](_0x1fdce4,_0x146a9e,_0x411d92,'status_check',{'isHourlyCheck':!![],'isIndividualCheck':!![]});}},0x3c*0x3c*0x3e8);_0x5422b4[_0x36747f(0x141)](_0x249a7d),this[_0x36747f(0x139)][_0x36747f(0x17c)](_0x1fdce4,{'timers':_0x5422b4,'paymentId':_0x1fdce4,'gatewayPaymentId':_0x146a9e,'createdAt':_0x4d2140}),console['log']('‚úÖ\x20[DEBUG]\x20Successfully\x20scheduled\x20'+_0x266863[_0x36747f(0xd1)]+_0x36747f(0x16c)+_0x1fdce4),console[_0x36747f(0x114)]('üìä\x20[DEBUG]\x20Total\x20active\x20payment\x20timers:\x20'+this['paymentTimers']['size']),this[_0x36747f(0x12e)](_0x1fdce4,_0x146a9e,_0x36747f(0x130),_0x36747f(0x130),'status_check',{'action':_0x36747f(0x15d),'scheduledChecks':_0x266863[_0x36747f(0xd1)],'firstCheckIn':_0x266863[0x0][_0x36747f(0x115)]/0x3e8,'totalTimers':this[_0x36747f(0x139)][_0x36747f(0x11a)]});}[a37_0x53eecd(0x14f)](_0x5df9a3){const _0x3b4e5d=a37_0x53eecd,_0x236146=this['paymentTimers'][_0x3b4e5d(0xe7)](_0x5df9a3);_0x236146?(console[_0x3b4e5d(0x114)]('üßπ\x20[DEBUG]\x20Clearing\x20'+_0x236146['timers'][_0x3b4e5d(0xd1)]+_0x3b4e5d(0x101)+_0x5df9a3),_0x236146['timers'][_0x3b4e5d(0x104)]((_0x519c98,_0x5aee53)=>{const _0xa67591=_0x3b4e5d;_0x519c98&&(clearTimeout(_0x519c98),clearInterval(_0x519c98),console[_0xa67591(0x114)](_0xa67591(0x12b)+(_0x5aee53+0x1)+'\x20for\x20payment\x20'+_0x5df9a3));}),this[_0x3b4e5d(0x139)][_0x3b4e5d(0x103)](_0x5df9a3),console[_0x3b4e5d(0x114)](_0x3b4e5d(0x13f)+_0x5df9a3+_0x3b4e5d(0xcc)+this[_0x3b4e5d(0x139)]['size'])):console[_0x3b4e5d(0x114)](_0x3b4e5d(0x13b)+_0x5df9a3+'\x20to\x20clear');}async['checkSinglePaymentById'](_0xd2fb6c){const _0xcf597c=a37_0x53eecd;console[_0xcf597c(0x114)]('üîç\x20[CHECK]\x20Starting\x20check\x20for\x20payment\x20ID:\x20'+_0xd2fb6c);const _0x1a2d36=await database_1[_0xcf597c(0x18c)][_0xcf597c(0x149)][_0xcf597c(0xf8)]({'where':{'id':_0xd2fb6c},'select':{'id':!![],'gatewayPaymentId':!![],'amount':!![],'currency':!![],'status':!![],'shopId':!![],'createdAt':!![],'gateway':!![],'remitterIban':!![],'customerIp':!![],'customerUa':!![],'shop':{'select':{'id':!![],'name':!![],'settings':{'select':{'webhookUrl':!![],'webhookEvents':!![]}}}}}});if(!_0x1a2d36){console[_0xcf597c(0x114)]('‚ùå\x20[CHECK]\x20Payment\x20'+_0xd2fb6c+'\x20not\x20found\x20in\x20database');return;}console['log'](_0xcf597c(0x154)+_0xd2fb6c+_0xcf597c(0x123)),console['log']('\x20\x20\x20-\x20Gateway:\x20'+_0x1a2d36[_0xcf597c(0x129)]),console[_0xcf597c(0x114)](_0xcf597c(0x185)+_0x1a2d36['status']),console[_0xcf597c(0x114)](_0xcf597c(0xd8)+_0x1a2d36[_0xcf597c(0x183)]),console[_0xcf597c(0x114)](_0xcf597c(0xe1)+_0x1a2d36['amount']+'\x20'+_0x1a2d36['currency']),console['log']('\x20\x20\x20-\x20ShopId:\x20'+_0x1a2d36[_0xcf597c(0xef)]);if(_0x1a2d36[_0xcf597c(0x129)]!==_0xcf597c(0x191)&&_0x1a2d36[_0xcf597c(0x129)]!=='cointopay2'){console['log']('‚ö†Ô∏è\x20[CHECK]\x20Payment\x20'+_0xd2fb6c+'\x20is\x20not\x20a\x20CoinToPay/CoinToPay2\x20payment\x20(gateway:\x20'+_0x1a2d36[_0xcf597c(0x129)]+')');return;}if(_0x1a2d36[_0xcf597c(0x174)]!==_0xcf597c(0x130)){console[_0xcf597c(0x114)]('‚ö†Ô∏è\x20[CHECK]\x20Payment\x20'+_0xd2fb6c+_0xcf597c(0x116)+_0x1a2d36[_0xcf597c(0x174)]+_0xcf597c(0x121)),this[_0xcf597c(0x14f)](_0xd2fb6c);return;}if(!_0x1a2d36[_0xcf597c(0x183)]){console[_0xcf597c(0x114)](_0xcf597c(0x18a)+_0xd2fb6c+_0xcf597c(0x171));return;}console[_0xcf597c(0x114)](_0xcf597c(0xe5)+_0xd2fb6c+'\x20is\x20valid\x20for\x20checking,\x20proceeding...'),await this[_0xcf597c(0xed)](_0x1a2d36);}[a37_0x53eecd(0x12e)](_0x1494d6,_0x3b9151,_0x2b6c3f,_0x1e6d63,_0x4f0d39,_0xa8e878){const _0x23c35a=a37_0x53eecd,_0x376122={'type':_0x23c35a(0xbe),'paymentId':_0x1494d6,'gatewayPaymentId':_0x3b9151,'oldStatus':_0x2b6c3f,'newStatus':_0x1e6d63,'source':_0x4f0d39,'timestamp':new Date()[_0x23c35a(0x128)](),'details':_0xa8e878||{}};loggerService_1[_0x23c35a(0x17d)][_0x23c35a(0x12e)](_0x376122),console[_0x23c35a(0x114)](_0x23c35a(0x14c)+_0x1494d6+'\x20('+_0x3b9151+')'),console[_0x23c35a(0x114)](_0x23c35a(0x16f)+_0x2b6c3f+_0x23c35a(0xd5)+_0x1e6d63),console[_0x23c35a(0x114)]('\x20\x20\x20üìç\x20Source:\x20'+_0x4f0d39),console['log'](_0x23c35a(0x10a)+_0x376122[_0x23c35a(0x186)]),_0xa8e878&&console[_0x23c35a(0x114)]('\x20\x20\x20üìù\x20Details:',_0xa8e878);}[a37_0x53eecd(0xfc)](_0x43ffef,_0x1b9ea3,_0x2d2970,_0x8cd1ff,_0x271e79){const _0x26c82a=a37_0x53eecd,_0x541230={'type':_0x26c82a(0x13a),'paymentId':_0x43ffef,'gatewayPaymentId':_0x1b9ea3,'error':_0x2d2970 instanceof Error?{'message':_0x2d2970[_0x26c82a(0x175)],'stack':_0x2d2970[_0x26c82a(0x111)]}:_0x2d2970,'source':_0x8cd1ff,'timestamp':new Date()['toISOString'](),'context':_0x271e79||{}};loggerService_1[_0x26c82a(0x17d)][_0x26c82a(0xfc)](_0x541230),console['error'](_0x26c82a(0xdd)+_0x43ffef+'\x20('+_0x1b9ea3+')'),console[_0x26c82a(0xd9)]('\x20\x20\x20‚ùå\x20Error:\x20'+(_0x2d2970 instanceof Error?_0x2d2970[_0x26c82a(0x175)]:_0x2d2970)),console[_0x26c82a(0xd9)]('\x20\x20\x20üìç\x20Source:\x20'+_0x8cd1ff),console[_0x26c82a(0xd9)]('\x20\x20\x20üìÖ\x20Time:\x20'+_0x541230['timestamp']),_0x271e79&&console[_0x26c82a(0xd9)](_0x26c82a(0x164),_0x271e79);}[a37_0x53eecd(0xfd)](){const _0x3bb3f3=a37_0x53eecd;console[_0x3bb3f3(0x114)](_0x3bb3f3(0x161)),this[_0x3bb3f3(0x110)]()[_0x3bb3f3(0xd0)](_0x2f94ad=>{const _0x481728=_0x3bb3f3;console[_0x481728(0xd9)](_0x481728(0x11f),_0x2f94ad);}),this['globalCheckInterval']=setInterval(async()=>{const _0x2c753d=_0x3bb3f3;try{console['log'](_0x2c753d(0x170)),await this['checkAllPendingPayments'](),console[_0x2c753d(0x114)](_0x2c753d(0x15f));}catch(_0x289166){console[_0x2c753d(0xd9)](_0x2c753d(0x14b),_0x289166);}},this[_0x3bb3f3(0xf2)]),console[_0x3bb3f3(0x114)](_0x3bb3f3(0x172));}[a37_0x53eecd(0x181)](){const _0x5acd14=a37_0x53eecd;console[_0x5acd14(0x114)](_0x5acd14(0xeb));this[_0x5acd14(0x153)]&&(clearInterval(this['globalCheckInterval']),this[_0x5acd14(0x153)]=null,console[_0x5acd14(0x114)](_0x5acd14(0xff)));const _0x36639b=this[_0x5acd14(0x139)][_0x5acd14(0x11a)];for(const [_0x35c141]of this['paymentTimers']){this['clearPaymentTimers'](_0x35c141);}console[_0x5acd14(0x114)](_0x5acd14(0x132)+_0x36639b+_0x5acd14(0x102));}async['checkAllPendingPayments'](){const _0x2bbe7c=a37_0x53eecd;try{console[_0x2bbe7c(0x114)](_0x2bbe7c(0x12a));const _0x9414f5=await database_1[_0x2bbe7c(0x18c)]['payment'][_0x2bbe7c(0x15e)]({'where':{'gateway':{'in':[_0x2bbe7c(0x191),_0x2bbe7c(0x14e)]},'status':_0x2bbe7c(0x130),'gatewayPaymentId':{'not':null}},'select':{'id':!![],'gatewayPaymentId':!![],'amount':!![],'currency':!![],'status':!![],'shopId':!![],'createdAt':!![],'remitterIban':!![],'customerIp':!![],'customerUa':!![],'shop':{'select':{'id':!![],'name':!![],'settings':{'select':{'webhookUrl':!![],'webhookEvents':!![]}}}}}});console[_0x2bbe7c(0x114)](_0x2bbe7c(0xe3)+_0x9414f5[_0x2bbe7c(0xd1)]+_0x2bbe7c(0xf9));if(_0x9414f5['length']===0x0){console[_0x2bbe7c(0x114)]('ü™ô\x20[GLOBAL]\x20No\x20pending\x20CoinToPay\x20payments\x20to\x20check');return;}const _0x15436f=await this['checkExpiredPayments'](_0x9414f5);console[_0x2bbe7c(0x114)](_0x2bbe7c(0xec)+_0x15436f[_0x2bbe7c(0xd1)]+_0x2bbe7c(0x10c));let _0x5d36dd=0x0,_0x55ae03=0x0;for(const _0x2327ee of _0x9414f5){try{if(_0x15436f[_0x2bbe7c(0x150)](_0x2327ee['id'])){console[_0x2bbe7c(0x114)]('‚è∞\x20[GLOBAL]\x20Payment\x20'+_0x2327ee['id']+_0x2bbe7c(0x13d)),_0x55ae03++;continue;}if(this[_0x2bbe7c(0x139)]['has'](_0x2327ee['id'])){console[_0x2bbe7c(0x114)](_0x2bbe7c(0x188)+_0x2327ee['id']+'\x20has\x20individual\x20timers,\x20skipping\x20global\x20check'),_0x55ae03++;continue;}const _0x4ba8d3=(Date[_0x2bbe7c(0x125)]()-_0x2327ee[_0x2bbe7c(0x166)]['getTime']())/(0x3e8*0x3c*0x3c);if(_0x4ba8d3<0x1){console[_0x2bbe7c(0x114)](_0x2bbe7c(0x188)+_0x2327ee['id']+_0x2bbe7c(0xd2)+_0x4ba8d3[_0x2bbe7c(0xbb)](0x1)+'h),\x20skipping\x20global\x20check'),_0x55ae03++;continue;}console[_0x2bbe7c(0x114)]('üîç\x20[GLOBAL]\x20Checking\x20old\x20payment\x20'+_0x2327ee['id']+_0x2bbe7c(0xda)+_0x4ba8d3[_0x2bbe7c(0xbb)](0x1)+'h)'),await this[_0x2bbe7c(0xed)](_0x2327ee),_0x5d36dd++,await new Promise(_0xbed3f6=>setTimeout(_0xbed3f6,0x7d0));}catch(_0xc23d5){console[_0x2bbe7c(0xd9)](_0x2bbe7c(0x10e)+_0x2327ee['id']+':',_0xc23d5),this[_0x2bbe7c(0xfc)](_0x2327ee['id'],_0x2327ee['gatewayPaymentId']||_0x2bbe7c(0x15a),_0xc23d5,_0x2bbe7c(0x11b),{'isGlobalCheck':!![],'paymentAmount':_0x2327ee[_0x2bbe7c(0x162)],'paymentCurrency':_0x2327ee[_0x2bbe7c(0x135)],'shopId':_0x2327ee[_0x2bbe7c(0xef)],'createdAt':_0x2327ee[_0x2bbe7c(0x166)]}),loggerService_1['loggerService']['logWhiteDomainError'](_0x2bbe7c(0x191),_0x2bbe7c(0xf6)+_0x2327ee[_0x2bbe7c(0x183)],_0xc23d5);}}console[_0x2bbe7c(0x114)](_0x2bbe7c(0xf7)+_0x5d36dd+_0x2bbe7c(0x147)+_0x55ae03+'\x20skipped,\x20'+_0x15436f['length']+'\x20expired');}catch(_0x290f15){console[_0x2bbe7c(0xd9)](_0x2bbe7c(0x160),_0x290f15);}}async[a37_0x53eecd(0x16a)](_0x3162e5){const _0x2fb806=a37_0x53eecd,_0x1a8732=[],_0x318cf0=new Date();_0x318cf0[_0x2fb806(0x122)](_0x318cf0[_0x2fb806(0x18f)]()-this[_0x2fb806(0xad)]),console[_0x2fb806(0x114)](_0x2fb806(0x18b)+this[_0x2fb806(0xad)]+_0x2fb806(0xb0)+_0x318cf0[_0x2fb806(0x128)]()+')');for(const _0x43c6d5 of _0x3162e5){if(_0x43c6d5[_0x2fb806(0x166)]<_0x318cf0){console[_0x2fb806(0x114)]('‚è∞\x20[EXPIRY]\x20Payment\x20'+_0x43c6d5['id']+_0x2fb806(0xc3)+this[_0x2fb806(0xad)]+_0x2fb806(0x189));try{this[_0x2fb806(0x12e)](_0x43c6d5['id'],_0x43c6d5[_0x2fb806(0x183)]||_0x2fb806(0x15a),'PENDING',_0x2fb806(0x167),_0x2fb806(0x156),{'reason':_0x2fb806(0xe6)+this[_0x2fb806(0xad)]+_0x2fb806(0x126),'createdAt':_0x43c6d5[_0x2fb806(0x166)],'daysSinceCreation':Math[_0x2fb806(0x145)]((Date[_0x2fb806(0x125)]()-_0x43c6d5[_0x2fb806(0x166)][_0x2fb806(0xdc)]())/(0x3e8*0x3c*0x3c*0x18)),'paymentAmount':_0x43c6d5[_0x2fb806(0x162)],'paymentCurrency':_0x43c6d5[_0x2fb806(0x135)],'shopId':_0x43c6d5[_0x2fb806(0xef)]}),await database_1[_0x2fb806(0x18c)][_0x2fb806(0x149)][_0x2fb806(0xaf)]({'where':{'id':_0x43c6d5['id']},'data':{'status':_0x2fb806(0x167),'updatedAt':new Date(),'adminNotes':'Automatically\x20expired\x20after\x20'+this[_0x2fb806(0xad)]+'\x20days\x20without\x20payment\x20confirmation'}}),await database_1['default'][_0x2fb806(0x11d)][_0x2fb806(0x165)]({'data':{'paymentId':_0x43c6d5['id'],'shopId':_0x43c6d5['shopId'],'event':_0x2fb806(0x179),'statusCode':0xc8,'responseBody':JSON['stringify']({'reason':_0x2fb806(0xe6)+this[_0x2fb806(0xad)]+_0x2fb806(0x126),'createdAt':_0x43c6d5[_0x2fb806(0x166)],'expiredAt':new Date()[_0x2fb806(0x128)](),'daysSinceCreation':Math[_0x2fb806(0x145)]((Date[_0x2fb806(0x125)]()-_0x43c6d5['createdAt'][_0x2fb806(0xdc)]())/(0x3e8*0x3c*0x3c*0x18))})}}),await this[_0x2fb806(0xf4)](_0x43c6d5,'EXPIRED'),await this[_0x2fb806(0xfb)](_0x43c6d5,_0x2fb806(0x167)),this['clearPaymentTimers'](_0x43c6d5['id']),_0x1a8732['push'](_0x43c6d5['id']),console[_0x2fb806(0x114)]('‚úÖ\x20[EXPIRY]\x20Payment\x20'+_0x43c6d5['id']+'\x20marked\x20as\x20EXPIRED\x20due\x20to\x20'+this[_0x2fb806(0xad)]+'-day\x20timeout');}catch(_0xe9b256){console[_0x2fb806(0xd9)]('‚ùå\x20[EXPIRY]\x20Failed\x20to\x20expire\x20payment\x20'+_0x43c6d5['id']+':',_0xe9b256),this[_0x2fb806(0xfc)](_0x43c6d5['id'],_0x43c6d5[_0x2fb806(0x183)]||'unknown',_0xe9b256,_0x2fb806(0x156),{'reason':'Failed\x20to\x20mark\x20payment\x20as\x20expired','createdAt':_0x43c6d5[_0x2fb806(0x166)],'daysSinceCreation':Math[_0x2fb806(0x145)]((Date['now']()-_0x43c6d5['createdAt']['getTime']())/(0x3e8*0x3c*0x3c*0x18))});}}}return _0x1a8732;}async[a37_0x53eecd(0xed)](_0x22d64d){const _0x3ef34a=a37_0x53eecd;if(!_0x22d64d[_0x3ef34a(0x183)]){console[_0x3ef34a(0x114)](_0x3ef34a(0x18a)+_0x22d64d['id']+'\x20has\x20no\x20gatewayPaymentId,\x20skipping');return;}console[_0x3ef34a(0x114)](_0x3ef34a(0xcf)+_0x22d64d[_0x3ef34a(0x129)]+_0x3ef34a(0x17b)+_0x22d64d['id']+'\x20('+_0x22d64d['gatewayPaymentId']+')');try{let _0x4a76d8;_0x22d64d['gateway']==='cointopay2'?(_0x4a76d8=await this[_0x3ef34a(0xcb)][_0x3ef34a(0x120)](_0x22d64d[_0x3ef34a(0x183)]),console[_0x3ef34a(0x114)](_0x3ef34a(0xc6)+_0x22d64d['id']+_0x3ef34a(0x177)+_0x4a76d8[_0x3ef34a(0x174)])):(_0x4a76d8=await this[_0x3ef34a(0xee)][_0x3ef34a(0x120)](_0x22d64d['gatewayPaymentId']),console[_0x3ef34a(0x114)](_0x3ef34a(0x17a)+_0x22d64d['id']+_0x3ef34a(0x177)+_0x4a76d8[_0x3ef34a(0x174)]));_0x4a76d8[_0x3ef34a(0xc4)]&&console['log']('üìä\x20[CHECK]\x20Payment\x20'+_0x22d64d['id']+_0x3ef34a(0xbd),{'iban':_0x4a76d8['paymentDetails']['iban']||_0x3ef34a(0x169),'transactionId':_0x4a76d8[_0x3ef34a(0xc4)][_0x3ef34a(0x16d)],'createdOn':_0x4a76d8[_0x3ef34a(0xc4)][_0x3ef34a(0x138)],'confirmedOn':_0x4a76d8[_0x3ef34a(0xc4)]['confirmedOn']||_0x3ef34a(0x11e)});if(_0x4a76d8[_0x3ef34a(0x174)]!==_0x22d64d[_0x3ef34a(0x174)]){console[_0x3ef34a(0x114)](_0x3ef34a(0xc7)+_0x22d64d['id']+_0x3ef34a(0x131)+_0x22d64d['status']+'\x20to\x20'+_0x4a76d8['status']),this[_0x3ef34a(0x12e)](_0x22d64d['id'],_0x22d64d[_0x3ef34a(0x183)],_0x22d64d['status'],_0x4a76d8[_0x3ef34a(0x174)],_0x3ef34a(0x11b),{'paymentDetails':_0x4a76d8[_0x3ef34a(0xc4)],'amount':_0x4a76d8['amount'],'currency':_0x4a76d8[_0x3ef34a(0x135)],'shopId':_0x22d64d[_0x3ef34a(0xef)],'checkTimestamp':new Date()[_0x3ef34a(0x128)]()});const _0x55dfd2={'status':_0x4a76d8['status'],'updatedAt':new Date()};_0x4a76d8['status']===_0x3ef34a(0x12d)&&_0x22d64d[_0x3ef34a(0x174)]!=='PAID'&&(_0x55dfd2[_0x3ef34a(0x158)]=new Date(),console[_0x3ef34a(0x114)](_0x3ef34a(0xac)+_0x22d64d['id']+_0x3ef34a(0x144)+_0x55dfd2[_0x3ef34a(0x158)][_0x3ef34a(0x128)]()));if(_0x4a76d8['paymentDetails']){const _0x48b1bc=_0x4a76d8[_0x3ef34a(0xc4)];_0x48b1bc[_0x3ef34a(0x16e)]&&(_0x55dfd2[_0x3ef34a(0x127)]=_0x48b1bc[_0x3ef34a(0x16e)],console['log'](_0x3ef34a(0xfa)+_0x48b1bc[_0x3ef34a(0x16e)]));if(_0x48b1bc[_0x3ef34a(0x148)]){const _0x1819de=_0x22d64d[_0x3ef34a(0x108)]||'',_0x368201=_0x3ef34a(0x152)+_0x48b1bc[_0x3ef34a(0x148)];_0x55dfd2[_0x3ef34a(0x108)]=_0x1819de?_0x1819de+'\x0a\x0a'+_0x368201:_0x368201,console[_0x3ef34a(0x114)]('üè¶\x20[CHECK]\x20Saved\x20bank\x20details\x20to\x20admin\x20notes');}_0x48b1bc[_0x3ef34a(0x16d)]&&console[_0x3ef34a(0x114)](_0x3ef34a(0x143)+_0x48b1bc[_0x3ef34a(0x16d)]),_0x48b1bc['confirmedOn']&&console['log'](_0x3ef34a(0xe8)+_0x48b1bc['confirmedOn']);}await database_1[_0x3ef34a(0x18c)][_0x3ef34a(0x149)][_0x3ef34a(0xaf)]({'where':{'id':_0x22d64d['id']},'data':_0x55dfd2}),await database_1[_0x3ef34a(0x18c)][_0x3ef34a(0x11d)][_0x3ef34a(0x165)]({'data':{'paymentId':_0x22d64d['id'],'shopId':_0x22d64d[_0x3ef34a(0xef)],'event':_0x3ef34a(0x182)+_0x4a76d8['status'][_0x3ef34a(0x14d)](),'statusCode':0xc8,'responseBody':JSON['stringify']({'oldStatus':_0x22d64d[_0x3ef34a(0x174)],'newStatus':_0x4a76d8[_0x3ef34a(0x174)],'paymentDetails':_0x4a76d8[_0x3ef34a(0xc4)],'checkedAt':new Date()['toISOString']()})}}),await this[_0x3ef34a(0xf4)](_0x22d64d,_0x4a76d8[_0x3ef34a(0x174)]),await this[_0x3ef34a(0xfb)](_0x22d64d,_0x4a76d8['status']),_0x4a76d8['status']!=='PENDING'&&(console[_0x3ef34a(0x114)](_0x3ef34a(0x15c)+_0x22d64d['id']+_0x3ef34a(0xf0)+_0x4a76d8['status']+_0x3ef34a(0xfe)),this[_0x3ef34a(0x14f)](_0x22d64d['id'])),console[_0x3ef34a(0x114)](_0x3ef34a(0xe5)+_0x22d64d['id']+_0x3ef34a(0xbf));}else console[_0x3ef34a(0x114)](_0x3ef34a(0x154)+_0x22d64d['id']+'\x20status\x20unchanged\x20('+_0x4a76d8[_0x3ef34a(0x174)]+')'),this[_0x3ef34a(0x12e)](_0x22d64d['id'],_0x22d64d[_0x3ef34a(0x183)],_0x22d64d[_0x3ef34a(0x174)],_0x4a76d8[_0x3ef34a(0x174)],'status_check',{'statusUnchanged':!![],'paymentDetails':_0x4a76d8[_0x3ef34a(0xc4)],'amount':_0x4a76d8['amount'],'currency':_0x4a76d8[_0x3ef34a(0x135)],'shopId':_0x22d64d[_0x3ef34a(0xef)],'checkTimestamp':new Date()[_0x3ef34a(0x128)]()});}catch(_0x274f66){console[_0x3ef34a(0xd9)](_0x3ef34a(0xc8)+_0x22d64d['id']+':',_0x274f66),this[_0x3ef34a(0xfc)](_0x22d64d['id'],_0x22d64d['gatewayPaymentId'],_0x274f66,_0x3ef34a(0x11b),{'paymentAmount':_0x22d64d[_0x3ef34a(0x162)],'paymentCurrency':_0x22d64d[_0x3ef34a(0x135)],'shopId':_0x22d64d[_0x3ef34a(0xef)],'createdAt':_0x22d64d[_0x3ef34a(0x166)]}),await database_1[_0x3ef34a(0x18c)]['webhookLog']['create']({'data':{'paymentId':_0x22d64d['id'],'shopId':_0x22d64d[_0x3ef34a(0xef)],'event':'cointopay_status_check_error','statusCode':0x1f4,'responseBody':JSON['stringify']({'error':_0x274f66 instanceof Error?_0x274f66['message']:_0x3ef34a(0xe4),'gatewayPaymentId':_0x22d64d[_0x3ef34a(0x183)],'checkedAt':new Date()['toISOString']()})}});}}async[a37_0x53eecd(0xf4)](_0x4a32c1,_0x4cdd8c){const _0x9c388b=a37_0x53eecd,_0x8f9354=Date[_0x9c388b(0x125)]();try{const _0x4a2c46=_0x4a32c1[_0x9c388b(0x18e)],_0x3e5533=_0x4a2c46['settings'];if(!_0x3e5533?.[_0x9c388b(0xb1)]){console['log'](_0x9c388b(0xc5)+_0x4a2c46['id']);return;}const _0x34b2a0=_0x4cdd8c===_0x9c388b(0x12d)?_0x9c388b(0x12f):_0x4cdd8c==='FAILED'?_0x9c388b(0x119):_0x4cdd8c===_0x9c388b(0x167)?'payment.failed':_0x9c388b(0x14a);if(!_0x3e5533[_0x9c388b(0xe9)]?.['includes'](_0x34b2a0)){console[_0x9c388b(0x114)]('Webhook\x20event\x20'+_0x34b2a0+_0x9c388b(0x137)+_0x4a2c46['id']);return;}const _0x1b0564=(0x0,gateway_1[_0x9c388b(0xce)])(_0x4a32c1[_0x9c388b(0x129)])||_0x4a32c1[_0x9c388b(0x129)],_0x75c605={'event':_0x34b2a0,'payment':{'id':_0x4a32c1['id'],'order_id':_0x4a32c1['orderId'],'gateway_order_id':_0x4a32c1[_0x9c388b(0x16b)],'gateway':_0x1b0564,'amount':_0x4a32c1[_0x9c388b(0x162)],'currency':_0x4a32c1[_0x9c388b(0x135)],'status':_0x4cdd8c[_0x9c388b(0x14d)](),'customer_email':_0x4a32c1[_0x9c388b(0xba)],'customer_name':_0x4a32c1['customerName'],'created_at':_0x4a32c1[_0x9c388b(0x166)],'updated_at':new Date()}},_0x1725e6=await fetch(_0x3e5533[_0x9c388b(0xb1)],{'method':'POST','headers':{'Content-Type':'application/json','User-Agent':'TesSoft\x20Payment\x20System/1.0'},'body':JSON[_0x9c388b(0x157)](_0x75c605)}),_0x50b201=Date[_0x9c388b(0x125)]()-_0x8f9354,_0x461f9a=_0x1725e6['ok']?_0x9c388b(0x190):await _0x1725e6[_0x9c388b(0xca)]();loggerService_1[_0x9c388b(0x17d)][_0x9c388b(0x142)](_0x4a32c1[_0x9c388b(0xef)],_0x3e5533[_0x9c388b(0xb1)],_0x34b2a0,_0x1725e6['status'],_0x50b201,_0x75c605),console[_0x9c388b(0x114)](_0x9c388b(0xb7)+_0x3e5533[_0x9c388b(0xb1)]+_0x9c388b(0xf3)+_0x1725e6[_0x9c388b(0x174)]+'\x20('+_0x50b201+_0x9c388b(0x159));}catch(_0x3fb01e){console[_0x9c388b(0xd9)](_0x9c388b(0xdf),_0x3fb01e),loggerService_1[_0x9c388b(0x17d)][_0x9c388b(0x13e)](_0x4a32c1['shopId'],_0x4a32c1[_0x9c388b(0x18e)]?.[_0x9c388b(0x134)]?.['webhookUrl']||_0x9c388b(0x15a),_0x9c388b(0x10d),_0x3fb01e,{});}}async[a37_0x53eecd(0xfb)](_0x375ddf,_0x27a531){const _0x385b42=a37_0x53eecd;try{const _0x3a8acf={'PENDING':'created','PAID':_0x385b42(0xdb),'FAILED':_0x385b42(0xcd),'EXPIRED':'expired'},_0x30edc5=_0x3a8acf[_0x27a531];if(!_0x30edc5||_0x30edc5===_0x385b42(0x13c))return;await telegramBotService_1[_0x385b42(0x124)]['sendPaymentNotification'](_0x375ddf[_0x385b42(0xef)],_0x375ddf,_0x30edc5);}catch(_0x51ceb3){console['error'](_0x385b42(0xb9),_0x51ceb3);}}async[a37_0x53eecd(0x173)](_0x40289f){const _0x27f039=a37_0x53eecd;console[_0x27f039(0x114)](_0x27f039(0x113)+_0x40289f);const _0x7fb5ee=await database_1[_0x27f039(0x18c)][_0x27f039(0x149)][_0x27f039(0xf8)]({'where':{'id':_0x40289f},'include':{'shop':{'select':{'id':!![],'name':!![],'settings':{'select':{'webhookUrl':!![],'webhookEvents':!![]}}}}}});if(!_0x7fb5ee)throw new Error('Payment\x20not\x20found');if(_0x7fb5ee['gateway']!==_0x27f039(0x191)&&_0x7fb5ee[_0x27f039(0x129)]!==_0x27f039(0x14e))throw new Error('Payment\x20is\x20not\x20a\x20CoinToPay/CoinToPay2\x20payment');console['log'](_0x27f039(0x140)+_0x7fb5ee['gateway']+_0x27f039(0x17b)+_0x40289f),await this[_0x27f039(0xed)](_0x7fb5ee),console['log'](_0x27f039(0xc0)+_0x40289f);}[a37_0x53eecd(0x11c)](){const _0x236ffc=a37_0x53eecd,_0x4983e9=this[_0x236ffc(0x153)]?this[_0x236ffc(0xf2)]:undefined,_0x47ff16=Array['from'](this[_0x236ffc(0x139)][_0x236ffc(0xb6)]())['map'](_0x315408=>({'paymentId':_0x315408['paymentId'],'gatewayPaymentId':_0x315408[_0x236ffc(0x183)],'createdAt':_0x315408[_0x236ffc(0x166)],'timersCount':_0x315408['timers']['length']}));return{'isActive':!!this[_0x236ffc(0x153)],'globalCheckIntervalMinutes':this['GLOBAL_CHECK_INTERVAL_MS']/(0x3e8*0x3c),'expiryDays':this[_0x236ffc(0xad)],'activeIndividualTimers':this[_0x236ffc(0x139)][_0x236ffc(0x11a)],'nextGlobalCheckIn':_0x4983e9,'paymentTimersDetails':_0x47ff16};}[a37_0x53eecd(0x151)](_0x5708f6){const _0x5818f4=a37_0x53eecd,_0x3df4f0=this[_0x5818f4(0x139)][_0x5818f4(0xe7)](_0x5708f6);if(_0x3df4f0)return{'hasTimers':!![],'timersCount':_0x3df4f0['timers'][_0x5818f4(0xd1)],'createdAt':_0x3df4f0['createdAt'],'gatewayPaymentId':_0x3df4f0[_0x5818f4(0x183)]};return{'hasTimers':![]};}}exports[a37_0x53eecd(0x146)]=CoinToPayStatusService,exports[a37_0x53eecd(0x15b)]=new CoinToPayStatusService();