'use strict';const a37_0x3c924c=a37_0xfd92;function a37_0x2f2f(){const _0x435a43=['sendPaymentStatusNotification','TesSoft\x20Payment\x20System/1.0','‚è∞\x20[GLOBAL]\x20Payment\x20','toLowerCase','\x20\x20\x20üìç\x20Source:\x20','checkPaymentById','CoinToPayStatusService','\x20pending\x20CoinToPay\x20payments','\x20timers\x20for\x20payment\x20','‚è∞\x20[HOURLY]\x20Payment\x20','\x20already\x20marked\x20as\x20expired,\x20skipping\x20global\x20check','description','\x20\x20\x20-\x20paymentId:\x20','webhookUrl','currency','ü™ô\x20[HOURLY]\x20Hourly\x20check\x20triggered\x20for\x20payment\x20','FAILED','\x20\x20\x20-\x20Amount:\x20','No\x20webhook\x20URL\x20configured\x20for\x20shop\x20','webhookEvents','size','defineProperty','\x20is\x20not\x20a\x20CoinToPay/CoinToPay2\x20payment\x20(gateway:\x20','loggerService','application/json','üè¶\x20[CHECK]\x20Saved\x20bank\x20details\x20to\x20admin\x20notes','PENDING','Shop\x20webhook\x20sent\x20to\x20','bankDetails','Success','\x20completed\x20for\x20payment\x20','sendPaymentNotification','üßπ\x20[DEBUG]\x20Clearing\x20','getGatewayIdByName','customerName','üõë\x20[SHUTDOWN]\x20Cleared\x20','‚ùå\x20[INIT]\x20Initial\x20CoinToPay\x20status\x20check\x20failed:','Failed\x20to\x20send\x20Telegram\x20payment\x20notification:','Failed\x20to\x20send\x20shop\x20webhook:','üîç\x20[GLOBAL]\x20Checking\x20old\x20payment\x20','checkAllPendingPayments','expired','now','5\x20minutes','‚ùå\x20[EXPIRY]\x20Failed\x20to\x20expire\x20payment\x20','transactionId','getPaymentTimerInfo','\x20(after\x20','‚ùå\x20[HOURLY]\x20Failed\x20hourly\x20check\x20for\x20payment\x20','‚ùå\x20[GLOBAL]\x20Periodic\x20CoinToPay\x20status\x20check\x20failed:','Webhook\x20event\x20','ü™ô\x20[GLOBAL]\x20No\x20pending\x20CoinToPay\x20payments\x20to\x20check','\x20status\x20unchanged\x20(','299263nbqdaF','\x20days,\x20marking\x20as\x20EXPIRED','‚úÖ\x20[MANUAL]\x20Manual\x20check\x20completed\x20for\x20payment\x20','status_check','\x20\x20\x20üìù\x20Details:','\x20not\x20found,\x20clearing\x20timers','‚úÖ\x20[TIMER]\x20Individual\x20check\x20#','confirmedOn','getDate','cointopay_status_check_error','\x20(age:\x20','COINTOPAY_STATUS_CHANGE','payment.pending','GLOBAL_CHECK_INTERVAL_MS','\x20\x20\x20-\x20gatewayPaymentId:\x20','\x20\x20\x20-\x20Gateway:\x20','sendShopWebhook','cointopay2','552830OozYjH','stringify','‚ùå\x20[CHECK]\x20Payment\x20','\x20initial\x20timers\x20for\x20payment\x20','\x20is\x20older\x20than\x20','ms)','length','createdAt','delete','üîç\x20[MANUAL]\x20Manual\x20check\x20requested\x20for\x20payment:\x20','clearPaymentTimers','checkPaymentStatus','../config/database','\x20found:','üìä\x20[CHECK]\x20CoinToPay2\x20payment\x20','11216348louYKY','delay','üìä\x20[DEBUG]\x20Total\x20active\x20payment\x20timers:\x20','__esModule','startPeriodicStatusCheck','‚è∞\x20[GLOBAL]\x20Found\x20','auto_expire','‚úÖ\x20[HOURLY]\x20Payment\x20','push','‚úÖ\x20[GLOBAL]\x20Global\x20check\x20cycle\x20completed','default','EXPIRED','customerEmail','cointopay','coinToPay2Service','orderId','\x20not\x20found\x20in\x20database','\x20expired','ü™ô\x20[DEBUG]\x20schedulePaymentChecks\x20called\x20with:','created','has','Failed\x20to\x20mark\x20payment\x20as\x20expired','payment.failed','error','settings','üìä\x20[CHECK]\x20CoinToPay\x20payment\x20','4286048Sontik','./gateways/coinToPay2Service','\x20is\x20valid\x20for\x20checking,\x20proceeding...','shopId','checkExpiredPayments','2\x20minutes','‚úÖ\x20[HOURLY]\x20Hourly\x20check\x20completed\x20for\x20payment\x20','üìä\x20[CHECK]\x20Payment\x20','\x20status\x20is\x20','‚úÖ\x20[GLOBAL]\x20Global\x20check\x20completed:\x20','gatewayPaymentId','Payment\x20older\x20than\x20','üîç\x20[CHECK]\x20Checking\x20','gateway','\x20\x20\x20-\x20ShopId:\x20','\x20for\x20payment\x20','Payment\x20is\x20not\x20a\x20CoinToPay/CoinToPay2\x20payment','\x20to\x20clear','EXPIRY_DAYS','checkSinglePaymentById','setDate','logCoinToPayStatus','\x20is\x20too\x20new\x20(','\x20not\x20enabled\x20for\x20shop\x20','findUnique','42KLZdNf','values','34955pJdLcJ','üßπ\x20[DEBUG]\x20Cleared\x20timer\x20#','Bank\x20Details:\x20','floor','get','./loggerService','üîç\x20[CHECK]\x20Starting\x20check\x20for\x20payment\x20ID:\x20','createdOn','remitterIban','getTime','1125607nDDxKs','logWhiteDomainError','\x20in\x20','catch','adminNotes','paymentDetails','globalCheckInterval','failed','\x20status\x20changed\x20to\x20','status','\x20payment\x20','findMany','ü™ô\x20[ERROR]\x20CoinToPay\x20Error:\x20','unknown','coinToPayStatusService','coinToPayService','ü™ô\x20[GLOBAL]\x20Starting\x20global\x20check\x20cycle...','paidAt','‚úÖ\x20[CHECK]\x20Payment\x20','‚úÖ\x20[CHECK]\x20Transaction\x20confirmed\x20on:\x20','POST','ü™ô\x20[INIT]\x20Starting\x20CoinToPay\x20periodic\x20status\x20checking\x20(global\x20checks\x20every\x201\x20hour)',',\x20stopping\x20individual\x20checks','\x20\x20\x20-\x20Status:\x20','\x20status:\x20','\x20marked\x20as\x20paid\x20at:\x20','./telegramBotService','message','stack','‚úÖ\x20[EXPIRY]\x20Payment\x20','4FfESSP','‚úÖ\x20[DEBUG]\x20Successfully\x20scheduled\x20','\x20seconds\x20(','\x20triggered\x20for\x20payment\x20','2vPKmsT','timestamp','ü™ô\x20[LOG]\x20CoinToPay\x20Status\x20Change:\x20','‚è∞\x20[EXPIRY]\x20Payment\x20','81QhIaDK','cointopay_auto_expired','not\x20confirmed','\x20with\x20status\x20','payment','-day\x20timeout','cointopay_status_check_','toFixed','\x20individual\x20payment\x20timers','‚ùå\x20[GLOBAL]\x20Failed\x20to\x20get\x20pending\x20CoinToPay\x20payments:','forEach','\x20status\x20from\x20','includes','PAID','paymentTimers','timers','set','\x20\x20\x20üìÖ\x20Time:\x20','paid','amount','logCoinToPayError','\x20->\x20','webhookLog','checkSinglePayment','create','298899VUihmM','gatewayOrderId','shop','‚úÖ\x20[DEBUG]\x20All\x20timers\x20cleared\x20for\x20payment\x20','Unknown\x20error','üõë\x20[SHUTDOWN]\x20Stopping\x20CoinToPay\x20status\x20checking\x20service...','\x20days\x20(created\x20before\x20','\x20initial\x20checks\x20+\x20hourly\x20checks\x20for\x20payment\x20','‚úÖ\x20[MANUAL]\x20Starting\x20manual\x20check\x20for\x20','‚è∞\x20[DEBUG]\x20Scheduled\x20check\x20#','\x20current\x20status:\x20','iban','webhook_send','‚ö†Ô∏è\x20[CHECK]\x20Payment\x20','üÜî\x20[CHECK]\x20Transaction\x20ID:\x20','\x20days,\x20will\x20be\x20handled\x20by\x20global\x20expiry\x20check','log','Payment\x20not\x20found','toISOString'];a37_0x2f2f=function(){return _0x435a43;};return a37_0x2f2f();}(function(_0x55249f,_0x883c1d){const _0x29ec1d=a37_0xfd92,_0x205e0e=_0x55249f();while(!![]){try{const _0x1138ae=parseInt(_0x29ec1d(0x1b5))/0x1*(parseInt(_0x29ec1d(0x237))/0x2)+parseInt(_0x29ec1d(0x16d))/0x3*(parseInt(_0x29ec1d(0x233))/0x4)+parseInt(_0x29ec1d(0x20b))/0x5*(parseInt(_0x29ec1d(0x209))/0x6)+-parseInt(_0x29ec1d(0x215))/0x7+parseInt(_0x29ec1d(0x1f0))/0x8+-parseInt(_0x29ec1d(0x23b))/0x9*(-parseInt(_0x29ec1d(0x1c7))/0xa)+-parseInt(_0x29ec1d(0x1d6))/0xb;if(_0x1138ae===_0x883c1d)break;else _0x205e0e['push'](_0x205e0e['shift']());}catch(_0x2d7043){_0x205e0e['push'](_0x205e0e['shift']());}}}(a37_0x2f2f,0x4967b));var __importDefault=this&&this['__importDefault']||function(_0x2a99e4){const _0x3ed4a6=a37_0xfd92;return _0x2a99e4&&_0x2a99e4[_0x3ed4a6(0x1d9)]?_0x2a99e4:{'default':_0x2a99e4};};function a37_0xfd92(_0x3b21fc,_0x37e831){const _0x2f2ff2=a37_0x2f2f();return a37_0xfd92=function(_0xfd9250,_0x17e6fc){_0xfd9250=_0xfd9250-0x163;let _0x173474=_0x2f2ff2[_0xfd9250];return _0x173474;},a37_0xfd92(_0x3b21fc,_0x37e831);}Object[a37_0x3c924c(0x195)](exports,'__esModule',{'value':!![]}),exports[a37_0x3c924c(0x223)]=exports[a37_0x3c924c(0x186)]=void 0x0;const coinToPayService_1=require('./gateways/coinToPayService'),coinToPay2Service_1=require(a37_0x3c924c(0x1f1)),gateway_1=require('../types/gateway'),database_1=__importDefault(require(a37_0x3c924c(0x1d3))),telegramBotService_1=require(a37_0x3c924c(0x22f)),loggerService_1=require(a37_0x3c924c(0x210));class CoinToPayStatusService{constructor(){const _0x3c9add=a37_0x3c924c;this[_0x3c9add(0x21b)]=null,this[_0x3c9add(0x1c2)]=0x3c*0x3c*0x3e8,this['EXPIRY_DAYS']=0x5,this[_0x3c9add(0x249)]=new Map(),this[_0x3c9add(0x224)]=new coinToPayService_1['CoinToPayService'](),this[_0x3c9add(0x1e4)]=new coinToPay2Service_1['CoinToPay2Service'](),console[_0x3c9add(0x17d)]('ü™ô\x20CoinToPayStatusService\x20initialized\x20with\x20support\x20for\x20both\x20CoinToPay\x20and\x20CoinToPay2');}['schedulePaymentChecks'](_0x1d8bcf,_0x32d99c){const _0x193df3=a37_0x3c924c;console[_0x193df3(0x17d)](_0x193df3(0x1e8)),console['log'](_0x193df3(0x18c)+_0x1d8bcf),console[_0x193df3(0x17d)](_0x193df3(0x1c3)+_0x32d99c),this[_0x193df3(0x1d1)](_0x1d8bcf);const _0x85d56f=[],_0xba1a85=new Date(),_0x4dfb90=[{'delay':0x1*0x3c*0x3e8,'description':'1\x20minute'},{'delay':0x2*0x3c*0x3e8,'description':_0x193df3(0x1f5)},{'delay':0x5*0x3c*0x3e8,'description':_0x193df3(0x1ab)},{'delay':0x5*0x3c*0x3e8,'description':'5\x20minutes'}];console[_0x193df3(0x17d)]('ü™ô\x20[DEBUG]\x20Creating\x20'+_0x4dfb90[_0x193df3(0x1cd)]+_0x193df3(0x1ca)+_0x1d8bcf);let _0x574fcc=0x0;_0x4dfb90[_0x193df3(0x245)]((_0x164e9e,_0x12c5ac)=>{const _0x159323=_0x193df3;_0x574fcc+=_0x164e9e['delay'];const _0xbfd929=setTimeout(async()=>{const _0x548bfc=a37_0xfd92;console[_0x548bfc(0x17d)]('ü™ô\x20[TIMER]\x20Individual\x20check\x20#'+(_0x12c5ac+0x1)+_0x548bfc(0x236)+_0x1d8bcf+_0x548bfc(0x1af)+_0x164e9e[_0x548bfc(0x18b)]+')');try{await this['checkSinglePaymentById'](_0x1d8bcf),console[_0x548bfc(0x17d)](_0x548bfc(0x1bb)+(_0x12c5ac+0x1)+_0x548bfc(0x19e)+_0x1d8bcf);}catch(_0xd17205){console[_0x548bfc(0x1ed)]('‚ùå\x20[TIMER]\x20Failed\x20individual\x20check\x20#'+(_0x12c5ac+0x1)+_0x548bfc(0x1ff)+_0x1d8bcf+':',_0xd17205),this[_0x548bfc(0x168)](_0x1d8bcf,_0x32d99c,_0xd17205,_0x548bfc(0x1b8),{'checkNumber':_0x12c5ac+0x1,'scheduledAfter':_0x164e9e[_0x548bfc(0x18b)],'isIndividualCheck':!![]});}},_0x574fcc);_0x85d56f[_0x159323(0x1de)](_0xbfd929),console[_0x159323(0x17d)](_0x159323(0x176)+(_0x12c5ac+0x1)+_0x159323(0x1ff)+_0x1d8bcf+_0x159323(0x217)+_0x574fcc/0x3e8+_0x159323(0x235)+_0x164e9e['description']+')');});const _0x27f863=setInterval(async()=>{const _0x19807a=_0x193df3;console[_0x19807a(0x17d)](_0x19807a(0x18f)+_0x1d8bcf);try{const _0xca9413=await database_1[_0x19807a(0x1e0)][_0x19807a(0x23f)][_0x19807a(0x208)]({'where':{'id':_0x1d8bcf},'select':{'id':!![],'status':!![],'createdAt':!![],'gatewayPaymentId':!![]}});if(!_0xca9413){console[_0x19807a(0x17d)]('‚ùå\x20[HOURLY]\x20Payment\x20'+_0x1d8bcf+_0x19807a(0x1ba)),this[_0x19807a(0x1d1)](_0x1d8bcf);return;}console[_0x19807a(0x17d)]('üìä\x20[HOURLY]\x20Payment\x20'+_0x1d8bcf+_0x19807a(0x177)+_0xca9413['status']);if(_0xca9413[_0x19807a(0x21e)]!==_0x19807a(0x19a)){console[_0x19807a(0x17d)](_0x19807a(0x1dd)+_0x1d8bcf+'\x20status\x20is\x20'+_0xca9413[_0x19807a(0x21e)]+',\x20stopping\x20individual\x20checks'),this[_0x19807a(0x1d1)](_0x1d8bcf);return;}const _0x5c8704=Math['floor']((Date[_0x19807a(0x1aa)]()-_0xca9413[_0x19807a(0x1ce)][_0x19807a(0x214)]())/(0x3e8*0x3c*0x3c*0x18));if(_0x5c8704>=this[_0x19807a(0x202)]){console[_0x19807a(0x17d)](_0x19807a(0x189)+_0x1d8bcf+_0x19807a(0x1cb)+this[_0x19807a(0x202)]+_0x19807a(0x17c)),this['clearPaymentTimers'](_0x1d8bcf);return;}await this[_0x19807a(0x203)](_0x1d8bcf),console['log'](_0x19807a(0x1f6)+_0x1d8bcf);}catch(_0x14e137){console['error'](_0x19807a(0x1b0)+_0x1d8bcf+':',_0x14e137),this[_0x19807a(0x168)](_0x1d8bcf,_0x32d99c,_0x14e137,_0x19807a(0x1b8),{'isHourlyCheck':!![],'isIndividualCheck':!![]});}},0x3c*0x3c*0x3e8);_0x85d56f[_0x193df3(0x1de)](_0x27f863),this[_0x193df3(0x249)][_0x193df3(0x164)](_0x1d8bcf,{'timers':_0x85d56f,'paymentId':_0x1d8bcf,'gatewayPaymentId':_0x32d99c,'createdAt':_0xba1a85}),console['log'](_0x193df3(0x234)+_0x4dfb90[_0x193df3(0x1cd)]+_0x193df3(0x174)+_0x1d8bcf),console[_0x193df3(0x17d)](_0x193df3(0x1d8)+this[_0x193df3(0x249)]['size']),this[_0x193df3(0x205)](_0x1d8bcf,_0x32d99c,_0x193df3(0x19a),_0x193df3(0x19a),'status_check',{'action':'schedule_created','scheduledChecks':_0x4dfb90['length'],'firstCheckIn':_0x4dfb90[0x0][_0x193df3(0x1d7)]/0x3e8,'totalTimers':this[_0x193df3(0x249)][_0x193df3(0x194)]});}[a37_0x3c924c(0x1d1)](_0x5a7255){const _0x4de55f=a37_0x3c924c,_0x2c9cc7=this[_0x4de55f(0x249)][_0x4de55f(0x20f)](_0x5a7255);_0x2c9cc7?(console['log'](_0x4de55f(0x1a0)+_0x2c9cc7['timers'][_0x4de55f(0x1cd)]+_0x4de55f(0x188)+_0x5a7255),_0x2c9cc7[_0x4de55f(0x163)][_0x4de55f(0x245)]((_0xdcf8c3,_0x1804df)=>{const _0x1614eb=_0x4de55f;_0xdcf8c3&&(clearTimeout(_0xdcf8c3),clearInterval(_0xdcf8c3),console[_0x1614eb(0x17d)](_0x1614eb(0x20c)+(_0x1804df+0x1)+_0x1614eb(0x1ff)+_0x5a7255));}),this[_0x4de55f(0x249)][_0x4de55f(0x1cf)](_0x5a7255),console[_0x4de55f(0x17d)](_0x4de55f(0x170)+_0x5a7255+'.\x20Remaining\x20active\x20timers:\x20'+this[_0x4de55f(0x249)]['size'])):console[_0x4de55f(0x17d)]('‚ö†Ô∏è\x20[DEBUG]\x20No\x20timers\x20found\x20for\x20payment\x20'+_0x5a7255+_0x4de55f(0x201));}async['checkSinglePaymentById'](_0x2dd4f4){const _0x267934=a37_0x3c924c;console['log'](_0x267934(0x211)+_0x2dd4f4);const _0x131ded=await database_1[_0x267934(0x1e0)]['payment'][_0x267934(0x208)]({'where':{'id':_0x2dd4f4},'select':{'id':!![],'gatewayPaymentId':!![],'amount':!![],'currency':!![],'status':!![],'shopId':!![],'createdAt':!![],'gateway':!![],'remitterIban':!![],'customerIp':!![],'customerUa':!![],'shop':{'select':{'id':!![],'name':!![],'settings':{'select':{'webhookUrl':!![],'webhookEvents':!![]}}}}}});if(!_0x131ded){console[_0x267934(0x17d)](_0x267934(0x1c9)+_0x2dd4f4+_0x267934(0x1e6));return;}console[_0x267934(0x17d)]('üìä\x20[CHECK]\x20Payment\x20'+_0x2dd4f4+_0x267934(0x1d4)),console['log'](_0x267934(0x1c4)+_0x131ded[_0x267934(0x1fd)]),console[_0x267934(0x17d)](_0x267934(0x22c)+_0x131ded['status']),console[_0x267934(0x17d)]('\x20\x20\x20-\x20GatewayPaymentId:\x20'+_0x131ded[_0x267934(0x1fa)]),console[_0x267934(0x17d)](_0x267934(0x191)+_0x131ded['amount']+'\x20'+_0x131ded[_0x267934(0x18e)]),console[_0x267934(0x17d)](_0x267934(0x1fe)+_0x131ded[_0x267934(0x1f3)]);if(_0x131ded[_0x267934(0x1fd)]!==_0x267934(0x1e3)&&_0x131ded[_0x267934(0x1fd)]!=='cointopay2'){console[_0x267934(0x17d)](_0x267934(0x17a)+_0x2dd4f4+_0x267934(0x196)+_0x131ded[_0x267934(0x1fd)]+')');return;}if(_0x131ded[_0x267934(0x21e)]!=='PENDING'){console[_0x267934(0x17d)]('‚ö†Ô∏è\x20[CHECK]\x20Payment\x20'+_0x2dd4f4+_0x267934(0x1f8)+_0x131ded[_0x267934(0x21e)]+_0x267934(0x22b)),this['clearPaymentTimers'](_0x2dd4f4);return;}if(!_0x131ded[_0x267934(0x1fa)]){console[_0x267934(0x17d)](_0x267934(0x17a)+_0x2dd4f4+'\x20has\x20no\x20gatewayPaymentId');return;}console[_0x267934(0x17d)](_0x267934(0x227)+_0x2dd4f4+_0x267934(0x1f2)),await this[_0x267934(0x16b)](_0x131ded);}['logCoinToPayStatus'](_0x40cbc2,_0x4b75f7,_0x594c5a,_0x178b6c,_0x301aba,_0x234cea){const _0xe302eb=a37_0x3c924c,_0xf6b42={'type':_0xe302eb(0x1c0),'paymentId':_0x40cbc2,'gatewayPaymentId':_0x4b75f7,'oldStatus':_0x594c5a,'newStatus':_0x178b6c,'source':_0x301aba,'timestamp':new Date()[_0xe302eb(0x17f)](),'details':_0x234cea||{}};loggerService_1[_0xe302eb(0x197)]['logCoinToPayStatus'](_0xf6b42),console['log'](_0xe302eb(0x239)+_0x40cbc2+'\x20('+_0x4b75f7+')'),console[_0xe302eb(0x17d)]('\x20\x20\x20üìä\x20Status:\x20'+_0x594c5a+_0xe302eb(0x169)+_0x178b6c),console[_0xe302eb(0x17d)]('\x20\x20\x20üìç\x20Source:\x20'+_0x301aba),console[_0xe302eb(0x17d)](_0xe302eb(0x165)+_0xf6b42[_0xe302eb(0x238)]),_0x234cea&&console['log'](_0xe302eb(0x1b9),_0x234cea);}[a37_0x3c924c(0x168)](_0x42026e,_0x30e71f,_0x4670b6,_0x9469f7,_0x3adc94){const _0x4c9d88=a37_0x3c924c,_0x270ef3={'type':'COINTOPAY_ERROR','paymentId':_0x42026e,'gatewayPaymentId':_0x30e71f,'error':_0x4670b6 instanceof Error?{'message':_0x4670b6['message'],'stack':_0x4670b6[_0x4c9d88(0x231)]}:_0x4670b6,'source':_0x9469f7,'timestamp':new Date()['toISOString'](),'context':_0x3adc94||{}};loggerService_1[_0x4c9d88(0x197)][_0x4c9d88(0x168)](_0x270ef3),console[_0x4c9d88(0x1ed)](_0x4c9d88(0x221)+_0x42026e+'\x20('+_0x30e71f+')'),console[_0x4c9d88(0x1ed)]('\x20\x20\x20‚ùå\x20Error:\x20'+(_0x4670b6 instanceof Error?_0x4670b6[_0x4c9d88(0x230)]:_0x4670b6)),console[_0x4c9d88(0x1ed)](_0x4c9d88(0x184)+_0x9469f7),console['error'](_0x4c9d88(0x165)+_0x270ef3[_0x4c9d88(0x238)]),_0x3adc94&&console[_0x4c9d88(0x1ed)]('\x20\x20\x20üìù\x20Context:',_0x3adc94);}[a37_0x3c924c(0x1da)](){const _0x2621a7=a37_0x3c924c;console[_0x2621a7(0x17d)](_0x2621a7(0x22a)),this['checkAllPendingPayments']()[_0x2621a7(0x218)](_0x6528b1=>{const _0x274f31=_0x2621a7;console['error'](_0x274f31(0x1a4),_0x6528b1);}),this[_0x2621a7(0x21b)]=setInterval(async()=>{const _0x5628c0=_0x2621a7;try{console['log'](_0x5628c0(0x225)),await this[_0x5628c0(0x1a8)](),console[_0x5628c0(0x17d)](_0x5628c0(0x1df));}catch(_0x5c9e28){console[_0x5628c0(0x1ed)](_0x5628c0(0x1b1),_0x5c9e28);}},this[_0x2621a7(0x1c2)]),console['log']('‚úÖ\x20[INIT]\x20CoinToPay\x20status\x20checking\x20service\x20started\x20(global\x20hourly\x20checks\x20+\x20individual\x20payment\x20timers)');}['stopPeriodicStatusCheck'](){const _0x541e63=a37_0x3c924c;console['log'](_0x541e63(0x172));this[_0x541e63(0x21b)]&&(clearInterval(this[_0x541e63(0x21b)]),this[_0x541e63(0x21b)]=null,console[_0x541e63(0x17d)]('üõë\x20[SHUTDOWN]\x20CoinToPay\x20global\x20status\x20checking\x20stopped'));const _0x1f29c7=this[_0x541e63(0x249)][_0x541e63(0x194)];for(const [_0x1244ab]of this[_0x541e63(0x249)]){this[_0x541e63(0x1d1)](_0x1244ab);}console['log'](_0x541e63(0x1a3)+_0x1f29c7+_0x541e63(0x243));}async[a37_0x3c924c(0x1a8)](){const _0x3b3ab6=a37_0x3c924c;try{console[_0x3b3ab6(0x17d)]('ü™ô\x20[GLOBAL]\x20Getting\x20all\x20pending\x20CoinToPay\x20payments...');const _0x2aa04d=await database_1['default']['payment'][_0x3b3ab6(0x220)]({'where':{'gateway':{'in':[_0x3b3ab6(0x1e3),_0x3b3ab6(0x1c6)]},'status':_0x3b3ab6(0x19a),'gatewayPaymentId':{'not':null}},'select':{'id':!![],'gatewayPaymentId':!![],'amount':!![],'currency':!![],'status':!![],'shopId':!![],'createdAt':!![],'remitterIban':!![],'customerIp':!![],'customerUa':!![],'shop':{'select':{'id':!![],'name':!![],'settings':{'select':{'webhookUrl':!![],'webhookEvents':!![]}}}}}});console['log']('ü™ô\x20[GLOBAL]\x20Found\x20'+_0x2aa04d[_0x3b3ab6(0x1cd)]+_0x3b3ab6(0x187));if(_0x2aa04d[_0x3b3ab6(0x1cd)]===0x0){console[_0x3b3ab6(0x17d)](_0x3b3ab6(0x1b3));return;}const _0x324ace=await this[_0x3b3ab6(0x1f4)](_0x2aa04d);console[_0x3b3ab6(0x17d)](_0x3b3ab6(0x1db)+_0x324ace[_0x3b3ab6(0x1cd)]+'\x20expired\x20CoinToPay\x20payments');let _0x69a8f3=0x0,_0x1242a0=0x0;for(const _0x3aa3f0 of _0x2aa04d){try{if(_0x324ace[_0x3b3ab6(0x247)](_0x3aa3f0['id'])){console[_0x3b3ab6(0x17d)](_0x3b3ab6(0x182)+_0x3aa3f0['id']+_0x3b3ab6(0x18a)),_0x1242a0++;continue;}if(this[_0x3b3ab6(0x249)][_0x3b3ab6(0x1ea)](_0x3aa3f0['id'])){console[_0x3b3ab6(0x17d)](_0x3b3ab6(0x182)+_0x3aa3f0['id']+'\x20has\x20individual\x20timers,\x20skipping\x20global\x20check'),_0x1242a0++;continue;}const _0x30fbd4=(Date[_0x3b3ab6(0x1aa)]()-_0x3aa3f0[_0x3b3ab6(0x1ce)][_0x3b3ab6(0x214)]())/(0x3e8*0x3c*0x3c);if(_0x30fbd4<0x1){console[_0x3b3ab6(0x17d)](_0x3b3ab6(0x182)+_0x3aa3f0['id']+_0x3b3ab6(0x206)+_0x30fbd4[_0x3b3ab6(0x242)](0x1)+'h),\x20skipping\x20global\x20check'),_0x1242a0++;continue;}console['log'](_0x3b3ab6(0x1a7)+_0x3aa3f0['id']+_0x3b3ab6(0x1bf)+_0x30fbd4[_0x3b3ab6(0x242)](0x1)+'h)'),await this[_0x3b3ab6(0x16b)](_0x3aa3f0),_0x69a8f3++,await new Promise(_0xacaafd=>setTimeout(_0xacaafd,0x7d0));}catch(_0x13184a){console[_0x3b3ab6(0x1ed)]('‚ùå\x20[GLOBAL]\x20Failed\x20to\x20check\x20CoinToPay\x20payment\x20'+_0x3aa3f0['id']+':',_0x13184a),this['logCoinToPayError'](_0x3aa3f0['id'],_0x3aa3f0[_0x3b3ab6(0x1fa)]||_0x3b3ab6(0x222),_0x13184a,_0x3b3ab6(0x1b8),{'isGlobalCheck':!![],'paymentAmount':_0x3aa3f0[_0x3b3ab6(0x167)],'paymentCurrency':_0x3aa3f0[_0x3b3ab6(0x18e)],'shopId':_0x3aa3f0[_0x3b3ab6(0x1f3)],'createdAt':_0x3aa3f0[_0x3b3ab6(0x1ce)]}),loggerService_1[_0x3b3ab6(0x197)][_0x3b3ab6(0x216)](_0x3b3ab6(0x1e3),'/status/'+_0x3aa3f0[_0x3b3ab6(0x1fa)],_0x13184a);}}console[_0x3b3ab6(0x17d)](_0x3b3ab6(0x1f9)+_0x69a8f3+'\x20checked,\x20'+_0x1242a0+'\x20skipped,\x20'+_0x324ace[_0x3b3ab6(0x1cd)]+_0x3b3ab6(0x1e7));}catch(_0x79bb71){console['error'](_0x3b3ab6(0x244),_0x79bb71);}}async[a37_0x3c924c(0x1f4)](_0x366ba0){const _0x4c95f0=a37_0x3c924c,_0x5b950a=[],_0x3eeb88=new Date();_0x3eeb88[_0x4c95f0(0x204)](_0x3eeb88[_0x4c95f0(0x1bd)]()-this['EXPIRY_DAYS']),console['log']('‚è∞\x20[EXPIRY]\x20Checking\x20for\x20CoinToPay\x20payments\x20older\x20than\x20'+this[_0x4c95f0(0x202)]+_0x4c95f0(0x173)+_0x3eeb88[_0x4c95f0(0x17f)]()+')');for(const _0x197753 of _0x366ba0){if(_0x197753[_0x4c95f0(0x1ce)]<_0x3eeb88){console[_0x4c95f0(0x17d)](_0x4c95f0(0x23a)+_0x197753['id']+'\x20is\x20older\x20than\x20'+this[_0x4c95f0(0x202)]+_0x4c95f0(0x1b6));try{this['logCoinToPayStatus'](_0x197753['id'],_0x197753[_0x4c95f0(0x1fa)]||'unknown',_0x4c95f0(0x19a),'EXPIRED',_0x4c95f0(0x1dc),{'reason':_0x4c95f0(0x1fb)+this[_0x4c95f0(0x202)]+'\x20days','createdAt':_0x197753[_0x4c95f0(0x1ce)],'daysSinceCreation':Math[_0x4c95f0(0x20e)]((Date[_0x4c95f0(0x1aa)]()-_0x197753['createdAt'][_0x4c95f0(0x214)]())/(0x3e8*0x3c*0x3c*0x18)),'paymentAmount':_0x197753[_0x4c95f0(0x167)],'paymentCurrency':_0x197753['currency'],'shopId':_0x197753[_0x4c95f0(0x1f3)]}),await database_1[_0x4c95f0(0x1e0)][_0x4c95f0(0x23f)]['update']({'where':{'id':_0x197753['id']},'data':{'status':_0x4c95f0(0x1e1),'updatedAt':new Date(),'adminNotes':'Automatically\x20expired\x20after\x20'+this['EXPIRY_DAYS']+'\x20days\x20without\x20payment\x20confirmation'}}),await database_1[_0x4c95f0(0x1e0)][_0x4c95f0(0x16a)][_0x4c95f0(0x16c)]({'data':{'paymentId':_0x197753['id'],'shopId':_0x197753[_0x4c95f0(0x1f3)],'event':_0x4c95f0(0x23c),'statusCode':0xc8,'responseBody':JSON[_0x4c95f0(0x1c8)]({'reason':_0x4c95f0(0x1fb)+this[_0x4c95f0(0x202)]+'\x20days','createdAt':_0x197753[_0x4c95f0(0x1ce)],'expiredAt':new Date()[_0x4c95f0(0x17f)](),'daysSinceCreation':Math[_0x4c95f0(0x20e)]((Date['now']()-_0x197753[_0x4c95f0(0x1ce)][_0x4c95f0(0x214)]())/(0x3e8*0x3c*0x3c*0x18))})}}),await this[_0x4c95f0(0x1c5)](_0x197753,_0x4c95f0(0x1e1)),await this['sendPaymentStatusNotification'](_0x197753,_0x4c95f0(0x1e1)),this['clearPaymentTimers'](_0x197753['id']),_0x5b950a['push'](_0x197753['id']),console['log'](_0x4c95f0(0x232)+_0x197753['id']+'\x20marked\x20as\x20EXPIRED\x20due\x20to\x20'+this['EXPIRY_DAYS']+_0x4c95f0(0x240));}catch(_0x57f340){console['error'](_0x4c95f0(0x1ac)+_0x197753['id']+':',_0x57f340),this[_0x4c95f0(0x168)](_0x197753['id'],_0x197753['gatewayPaymentId']||'unknown',_0x57f340,_0x4c95f0(0x1dc),{'reason':_0x4c95f0(0x1eb),'createdAt':_0x197753[_0x4c95f0(0x1ce)],'daysSinceCreation':Math[_0x4c95f0(0x20e)]((Date[_0x4c95f0(0x1aa)]()-_0x197753['createdAt'][_0x4c95f0(0x214)]())/(0x3e8*0x3c*0x3c*0x18))});}}}return _0x5b950a;}async[a37_0x3c924c(0x16b)](_0xb396c8){const _0x4648cb=a37_0x3c924c;if(!_0xb396c8[_0x4648cb(0x1fa)]){console['log'](_0x4648cb(0x17a)+_0xb396c8['id']+'\x20has\x20no\x20gatewayPaymentId,\x20skipping');return;}console[_0x4648cb(0x17d)](_0x4648cb(0x1fc)+_0xb396c8[_0x4648cb(0x1fd)]+_0x4648cb(0x21f)+_0xb396c8['id']+'\x20('+_0xb396c8['gatewayPaymentId']+')');try{let _0x3e3135;_0xb396c8['gateway']===_0x4648cb(0x1c6)?(_0x3e3135=await this['coinToPay2Service'][_0x4648cb(0x1d2)](_0xb396c8['gatewayPaymentId']),console[_0x4648cb(0x17d)](_0x4648cb(0x1d5)+_0xb396c8['id']+_0x4648cb(0x22d)+_0x3e3135[_0x4648cb(0x21e)])):(_0x3e3135=await this[_0x4648cb(0x224)]['checkPaymentStatus'](_0xb396c8['gatewayPaymentId']),console['log'](_0x4648cb(0x1ef)+_0xb396c8['id']+_0x4648cb(0x22d)+_0x3e3135[_0x4648cb(0x21e)]));_0x3e3135[_0x4648cb(0x21a)]&&console[_0x4648cb(0x17d)](_0x4648cb(0x1f7)+_0xb396c8['id']+'\x20details:',{'iban':_0x3e3135['paymentDetails']['iban']||'not\x20found','transactionId':_0x3e3135[_0x4648cb(0x21a)]['transactionId'],'createdOn':_0x3e3135[_0x4648cb(0x21a)][_0x4648cb(0x212)],'confirmedOn':_0x3e3135[_0x4648cb(0x21a)][_0x4648cb(0x1bc)]||_0x4648cb(0x23d)});if(_0x3e3135['status']!==_0xb396c8['status']){console[_0x4648cb(0x17d)]('üîÑ\x20[CHECK]\x20Updating\x20payment\x20'+_0xb396c8['id']+_0x4648cb(0x246)+_0xb396c8[_0x4648cb(0x21e)]+'\x20to\x20'+_0x3e3135[_0x4648cb(0x21e)]),this[_0x4648cb(0x205)](_0xb396c8['id'],_0xb396c8[_0x4648cb(0x1fa)],_0xb396c8[_0x4648cb(0x21e)],_0x3e3135[_0x4648cb(0x21e)],_0x4648cb(0x1b8),{'paymentDetails':_0x3e3135[_0x4648cb(0x21a)],'amount':_0x3e3135[_0x4648cb(0x167)],'currency':_0x3e3135[_0x4648cb(0x18e)],'shopId':_0xb396c8[_0x4648cb(0x1f3)],'checkTimestamp':new Date()[_0x4648cb(0x17f)]()});const _0x2431be={'status':_0x3e3135[_0x4648cb(0x21e)],'updatedAt':new Date()};_0x3e3135[_0x4648cb(0x21e)]==='PAID'&&_0xb396c8[_0x4648cb(0x21e)]!==_0x4648cb(0x248)&&(_0x2431be[_0x4648cb(0x226)]=new Date(),console[_0x4648cb(0x17d)]('üí∞\x20[CHECK]\x20Payment\x20'+_0xb396c8['id']+_0x4648cb(0x22e)+_0x2431be['paidAt']['toISOString']()));if(_0x3e3135['paymentDetails']){const _0x410f3b=_0x3e3135[_0x4648cb(0x21a)];_0x410f3b[_0x4648cb(0x178)]&&(_0x2431be[_0x4648cb(0x213)]=_0x410f3b['iban'],console[_0x4648cb(0x17d)]('üè¶\x20[CHECK]\x20Saved\x20IBAN:\x20'+_0x410f3b['iban']));if(_0x410f3b['bankDetails']){const _0x32fca6=_0xb396c8[_0x4648cb(0x219)]||'',_0x5cba1f=_0x4648cb(0x20d)+_0x410f3b[_0x4648cb(0x19c)];_0x2431be['adminNotes']=_0x32fca6?_0x32fca6+'\x0a\x0a'+_0x5cba1f:_0x5cba1f,console[_0x4648cb(0x17d)](_0x4648cb(0x199));}_0x410f3b[_0x4648cb(0x1ad)]&&console[_0x4648cb(0x17d)](_0x4648cb(0x17b)+_0x410f3b[_0x4648cb(0x1ad)]),_0x410f3b[_0x4648cb(0x1bc)]&&console['log'](_0x4648cb(0x228)+_0x410f3b[_0x4648cb(0x1bc)]);}await database_1[_0x4648cb(0x1e0)][_0x4648cb(0x23f)]['update']({'where':{'id':_0xb396c8['id']},'data':_0x2431be}),await database_1[_0x4648cb(0x1e0)]['webhookLog'][_0x4648cb(0x16c)]({'data':{'paymentId':_0xb396c8['id'],'shopId':_0xb396c8[_0x4648cb(0x1f3)],'event':_0x4648cb(0x241)+_0x3e3135[_0x4648cb(0x21e)][_0x4648cb(0x183)](),'statusCode':0xc8,'responseBody':JSON[_0x4648cb(0x1c8)]({'oldStatus':_0xb396c8[_0x4648cb(0x21e)],'newStatus':_0x3e3135['status'],'paymentDetails':_0x3e3135['paymentDetails'],'checkedAt':new Date()[_0x4648cb(0x17f)]()})}}),await this[_0x4648cb(0x1c5)](_0xb396c8,_0x3e3135[_0x4648cb(0x21e)]),await this[_0x4648cb(0x180)](_0xb396c8,_0x3e3135[_0x4648cb(0x21e)]),_0x3e3135[_0x4648cb(0x21e)]!=='PENDING'&&(console[_0x4648cb(0x17d)]('üßπ\x20[CHECK]\x20Payment\x20'+_0xb396c8['id']+_0x4648cb(0x21d)+_0x3e3135[_0x4648cb(0x21e)]+',\x20clearing\x20individual\x20timers'),this['clearPaymentTimers'](_0xb396c8['id'])),console[_0x4648cb(0x17d)](_0x4648cb(0x227)+_0xb396c8['id']+'\x20updated\x20successfully');}else console[_0x4648cb(0x17d)]('üìä\x20[CHECK]\x20Payment\x20'+_0xb396c8['id']+_0x4648cb(0x1b4)+_0x3e3135['status']+')'),this['logCoinToPayStatus'](_0xb396c8['id'],_0xb396c8[_0x4648cb(0x1fa)],_0xb396c8[_0x4648cb(0x21e)],_0x3e3135[_0x4648cb(0x21e)],_0x4648cb(0x1b8),{'statusUnchanged':!![],'paymentDetails':_0x3e3135[_0x4648cb(0x21a)],'amount':_0x3e3135[_0x4648cb(0x167)],'currency':_0x3e3135[_0x4648cb(0x18e)],'shopId':_0xb396c8[_0x4648cb(0x1f3)],'checkTimestamp':new Date()[_0x4648cb(0x17f)]()});}catch(_0x31efd0){console[_0x4648cb(0x1ed)]('‚ùå\x20[CHECK]\x20Failed\x20to\x20check\x20payment\x20'+_0xb396c8['id']+':',_0x31efd0),this['logCoinToPayError'](_0xb396c8['id'],_0xb396c8[_0x4648cb(0x1fa)],_0x31efd0,_0x4648cb(0x1b8),{'paymentAmount':_0xb396c8[_0x4648cb(0x167)],'paymentCurrency':_0xb396c8[_0x4648cb(0x18e)],'shopId':_0xb396c8['shopId'],'createdAt':_0xb396c8[_0x4648cb(0x1ce)]}),await database_1[_0x4648cb(0x1e0)][_0x4648cb(0x16a)][_0x4648cb(0x16c)]({'data':{'paymentId':_0xb396c8['id'],'shopId':_0xb396c8[_0x4648cb(0x1f3)],'event':_0x4648cb(0x1be),'statusCode':0x1f4,'responseBody':JSON[_0x4648cb(0x1c8)]({'error':_0x31efd0 instanceof Error?_0x31efd0[_0x4648cb(0x230)]:_0x4648cb(0x171),'gatewayPaymentId':_0xb396c8[_0x4648cb(0x1fa)],'checkedAt':new Date()[_0x4648cb(0x17f)]()})}});}}async[a37_0x3c924c(0x1c5)](_0x31c8b9,_0x4348a4){const _0xc60258=a37_0x3c924c,_0x35a657=Date[_0xc60258(0x1aa)]();try{const _0x375657=_0x31c8b9[_0xc60258(0x16f)],_0x3eb93b=_0x375657[_0xc60258(0x1ee)];if(!_0x3eb93b?.[_0xc60258(0x18d)]){console[_0xc60258(0x17d)](_0xc60258(0x192)+_0x375657['id']);return;}const _0x19b545=_0x4348a4===_0xc60258(0x248)?'payment.success':_0x4348a4===_0xc60258(0x190)?'payment.failed':_0x4348a4===_0xc60258(0x1e1)?_0xc60258(0x1ec):_0xc60258(0x1c1);if(!_0x3eb93b[_0xc60258(0x193)]?.[_0xc60258(0x247)](_0x19b545)){console[_0xc60258(0x17d)](_0xc60258(0x1b2)+_0x19b545+_0xc60258(0x207)+_0x375657['id']);return;}const _0x2ca0b5=(0x0,gateway_1[_0xc60258(0x1a1)])(_0x31c8b9['gateway'])||_0x31c8b9[_0xc60258(0x1fd)],_0x5e0613={'event':_0x19b545,'payment':{'id':_0x31c8b9['id'],'order_id':_0x31c8b9[_0xc60258(0x1e5)],'gateway_order_id':_0x31c8b9[_0xc60258(0x16e)],'gateway':_0x2ca0b5,'amount':_0x31c8b9[_0xc60258(0x167)],'currency':_0x31c8b9[_0xc60258(0x18e)],'status':_0x4348a4['toLowerCase'](),'customer_email':_0x31c8b9[_0xc60258(0x1e2)],'customer_name':_0x31c8b9[_0xc60258(0x1a2)],'created_at':_0x31c8b9[_0xc60258(0x1ce)],'updated_at':new Date()}},_0xb4afdf=await fetch(_0x3eb93b[_0xc60258(0x18d)],{'method':_0xc60258(0x229),'headers':{'Content-Type':_0xc60258(0x198),'User-Agent':_0xc60258(0x181)},'body':JSON[_0xc60258(0x1c8)](_0x5e0613)}),_0x583625=Date[_0xc60258(0x1aa)]()-_0x35a657,_0x282214=_0xb4afdf['ok']?_0xc60258(0x19d):await _0xb4afdf['text']();loggerService_1[_0xc60258(0x197)]['logShopWebhookSent'](_0x31c8b9['shopId'],_0x3eb93b[_0xc60258(0x18d)],_0x19b545,_0xb4afdf[_0xc60258(0x21e)],_0x583625,_0x5e0613),console[_0xc60258(0x17d)](_0xc60258(0x19b)+_0x3eb93b[_0xc60258(0x18d)]+_0xc60258(0x23e)+_0xb4afdf[_0xc60258(0x21e)]+'\x20('+_0x583625+_0xc60258(0x1cc));}catch(_0x2a45d9){console['error'](_0xc60258(0x1a6),_0x2a45d9),loggerService_1[_0xc60258(0x197)]['logShopWebhookError'](_0x31c8b9[_0xc60258(0x1f3)],_0x31c8b9['shop']?.[_0xc60258(0x1ee)]?.['webhookUrl']||_0xc60258(0x222),_0xc60258(0x179),_0x2a45d9,{});}}async[a37_0x3c924c(0x180)](_0x4bb6b7,_0x1ad7be){const _0x49564e=a37_0x3c924c;try{const _0x291112={'PENDING':_0x49564e(0x1e9),'PAID':_0x49564e(0x166),'FAILED':_0x49564e(0x21c),'EXPIRED':_0x49564e(0x1a9)},_0x3e1600=_0x291112[_0x1ad7be];if(!_0x3e1600||_0x3e1600===_0x49564e(0x1e9))return;await telegramBotService_1['telegramBotService'][_0x49564e(0x19f)](_0x4bb6b7[_0x49564e(0x1f3)],_0x4bb6b7,_0x3e1600);}catch(_0x12c47d){console[_0x49564e(0x1ed)](_0x49564e(0x1a5),_0x12c47d);}}async[a37_0x3c924c(0x185)](_0xc60036){const _0x36e5bf=a37_0x3c924c;console[_0x36e5bf(0x17d)](_0x36e5bf(0x1d0)+_0xc60036);const _0x250d13=await database_1[_0x36e5bf(0x1e0)]['payment'][_0x36e5bf(0x208)]({'where':{'id':_0xc60036},'include':{'shop':{'select':{'id':!![],'name':!![],'settings':{'select':{'webhookUrl':!![],'webhookEvents':!![]}}}}}});if(!_0x250d13)throw new Error(_0x36e5bf(0x17e));if(_0x250d13[_0x36e5bf(0x1fd)]!=='cointopay'&&_0x250d13[_0x36e5bf(0x1fd)]!==_0x36e5bf(0x1c6))throw new Error(_0x36e5bf(0x200));console[_0x36e5bf(0x17d)](_0x36e5bf(0x175)+_0x250d13[_0x36e5bf(0x1fd)]+_0x36e5bf(0x21f)+_0xc60036),await this['checkSinglePayment'](_0x250d13),console['log'](_0x36e5bf(0x1b7)+_0xc60036);}['getServiceStats'](){const _0x2c85d0=a37_0x3c924c,_0x2e45d4=this[_0x2c85d0(0x21b)]?this['GLOBAL_CHECK_INTERVAL_MS']:undefined,_0x35475b=Array['from'](this[_0x2c85d0(0x249)][_0x2c85d0(0x20a)]())['map'](_0x678621=>({'paymentId':_0x678621['paymentId'],'gatewayPaymentId':_0x678621[_0x2c85d0(0x1fa)],'createdAt':_0x678621['createdAt'],'timersCount':_0x678621['timers'][_0x2c85d0(0x1cd)]}));return{'isActive':!!this['globalCheckInterval'],'globalCheckIntervalMinutes':this[_0x2c85d0(0x1c2)]/(0x3e8*0x3c),'expiryDays':this[_0x2c85d0(0x202)],'activeIndividualTimers':this['paymentTimers'][_0x2c85d0(0x194)],'nextGlobalCheckIn':_0x2e45d4,'paymentTimersDetails':_0x35475b};}[a37_0x3c924c(0x1ae)](_0xc9ce71){const _0x44bfe2=a37_0x3c924c,_0xadcafd=this[_0x44bfe2(0x249)][_0x44bfe2(0x20f)](_0xc9ce71);if(_0xadcafd)return{'hasTimers':!![],'timersCount':_0xadcafd[_0x44bfe2(0x163)]['length'],'createdAt':_0xadcafd['createdAt'],'gatewayPaymentId':_0xadcafd[_0x44bfe2(0x1fa)]};return{'hasTimers':![]};}}exports['CoinToPayStatusService']=CoinToPayStatusService,exports[a37_0x3c924c(0x223)]=new CoinToPayStatusService();