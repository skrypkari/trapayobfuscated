'use strict';const a37_0x39942a=a37_0x4809;(function(_0x210861,_0x1051a9){const _0x94071e=a37_0x4809,_0x5ec454=_0x210861();while(!![]){try{const _0x19f126=-parseInt(_0x94071e(0x136))/0x1*(parseInt(_0x94071e(0x188))/0x2)+parseInt(_0x94071e(0x1a0))/0x3*(parseInt(_0x94071e(0x109))/0x4)+parseInt(_0x94071e(0x1c5))/0x5+-parseInt(_0x94071e(0x1a4))/0x6*(-parseInt(_0x94071e(0x14a))/0x7)+-parseInt(_0x94071e(0x1b6))/0x8*(-parseInt(_0x94071e(0x177))/0x9)+-parseInt(_0x94071e(0x162))/0xa+parseInt(_0x94071e(0x1e5))/0xb*(-parseInt(_0x94071e(0x194))/0xc);if(_0x19f126===_0x1051a9)break;else _0x5ec454['push'](_0x5ec454['shift']());}catch(_0x358311){_0x5ec454['push'](_0x5ec454['shift']());}}}(a37_0x39d0,0x9e7a2));var __createBinding=this&&this[a37_0x39942a(0x1a6)]||(Object[a37_0x39942a(0x15e)]?function(_0x501dab,_0x54593b,_0x1efaf1,_0x3d53ed){const _0x4d9d0c=a37_0x39942a;if(_0x3d53ed===undefined)_0x3d53ed=_0x1efaf1;var _0x44eca3=Object[_0x4d9d0c(0x1cc)](_0x54593b,_0x1efaf1);(!_0x44eca3||(_0x4d9d0c(0x208)in _0x44eca3?!_0x54593b[_0x4d9d0c(0x1ec)]:_0x44eca3['writable']||_0x44eca3[_0x4d9d0c(0x199)]))&&(_0x44eca3={'enumerable':!![],'get':function(){return _0x54593b[_0x1efaf1];}}),Object['defineProperty'](_0x501dab,_0x3d53ed,_0x44eca3);}:function(_0x36f6a4,_0x19ac6c,_0xfca287,_0x4e29d6){if(_0x4e29d6===undefined)_0x4e29d6=_0xfca287;_0x36f6a4[_0x4e29d6]=_0x19ac6c[_0xfca287];}),__setModuleDefault=this&&this[a37_0x39942a(0x11b)]||(Object['create']?function(_0x4e3cc9,_0x5b7f02){const _0x53e296=a37_0x39942a;Object[_0x53e296(0x119)](_0x4e3cc9,_0x53e296(0x1fa),{'enumerable':!![],'value':_0x5b7f02});}:function(_0x36f664,_0x40a5d7){const _0x449bdf=a37_0x39942a;_0x36f664[_0x449bdf(0x1fa)]=_0x40a5d7;}),__importStar=this&&this[a37_0x39942a(0x1e2)]||(function(){var _0x5a575e=function(_0x566bf7){const _0x32a26f=a37_0x4809;return _0x5a575e=Object[_0x32a26f(0x16b)]||function(_0x1feaf0){const _0x548f4d=_0x32a26f;var _0x7efe93=[];for(var _0x3226f8 in _0x1feaf0)if(Object[_0x548f4d(0x144)][_0x548f4d(0x151)]['call'](_0x1feaf0,_0x3226f8))_0x7efe93[_0x7efe93[_0x548f4d(0x11a)]]=_0x3226f8;return _0x7efe93;},_0x5a575e(_0x566bf7);};return function(_0x16c8e2){const _0x38988f=a37_0x4809;if(_0x16c8e2&&_0x16c8e2[_0x38988f(0x1ec)])return _0x16c8e2;var _0x590fcf={};if(_0x16c8e2!=null){for(var _0x5600c2=_0x5a575e(_0x16c8e2),_0x26c989=0x0;_0x26c989<_0x5600c2[_0x38988f(0x11a)];_0x26c989++)if(_0x5600c2[_0x26c989]!=='default')__createBinding(_0x590fcf,_0x16c8e2,_0x5600c2[_0x26c989]);}return __setModuleDefault(_0x590fcf,_0x16c8e2),_0x590fcf;};}()),__importDefault=this&&this[a37_0x39942a(0x107)]||function(_0x4d2a7d){const _0x46980e=a37_0x39942a;return _0x4d2a7d&&_0x4d2a7d[_0x46980e(0x1ec)]?_0x4d2a7d:{'default':_0x4d2a7d};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a37_0x39942a(0x16e)]=exports['CoinToPayStatusService']=void 0x0;const coinToPayService_1=require(a37_0x39942a(0x1c3)),database_1=__importDefault(require(a37_0x39942a(0x193))),telegramBotService_1=require(a37_0x39942a(0x13b)),loggerService_1=require(a37_0x39942a(0x131));class CoinToPayStatusService{constructor(){const _0x507a4e=a37_0x39942a;this[_0x507a4e(0x18b)]=null,this[_0x507a4e(0x1f1)]=0x3c*0x3c*0x3e8,this['EXPIRY_DAYS']=0x5,this[_0x507a4e(0x121)]=new Map(),this[_0x507a4e(0x1c9)]=new coinToPayService_1[(_0x507a4e(0x134))](),console[_0x507a4e(0x183)](_0x507a4e(0x15f));}[a37_0x39942a(0x13a)](_0x294ef9,_0x4da504){const _0x139baf=a37_0x39942a;console[_0x139baf(0x183)]('ü™ô\x20[DEBUG]\x20schedulePaymentChecks\x20called\x20with:'),console['log']('\x20\x20\x20-\x20paymentId:\x20'+_0x294ef9),console[_0x139baf(0x183)](_0x139baf(0x1db)+_0x4da504),this['clearPaymentTimers'](_0x294ef9);const _0x153c41=[],_0x1865f4=new Date(),_0x524762=[{'delay':0x1*0x3c*0x3e8,'description':'1\x20minute'},{'delay':0x2*0x3c*0x3e8,'description':_0x139baf(0x1ab)},{'delay':0x5*0x3c*0x3e8,'description':_0x139baf(0x184)},{'delay':0x5*0x3c*0x3e8,'description':_0x139baf(0x184)}];console[_0x139baf(0x183)](_0x139baf(0x17d)+_0x524762[_0x139baf(0x11a)]+_0x139baf(0x1b1)+_0x294ef9);let _0x37d4f1=0x0;_0x524762[_0x139baf(0x1b8)]((_0x26964e,_0x4e9bf5)=>{const _0x5e5406=_0x139baf;_0x37d4f1+=_0x26964e[_0x5e5406(0x1d7)];const _0x3b3a93=setTimeout(async()=>{const _0x2d8cfd=_0x5e5406;console[_0x2d8cfd(0x183)](_0x2d8cfd(0x156)+(_0x4e9bf5+0x1)+_0x2d8cfd(0x1cd)+_0x294ef9+_0x2d8cfd(0x169)+_0x26964e[_0x2d8cfd(0x1bb)]+')');try{await this['checkSinglePaymentById'](_0x294ef9),console[_0x2d8cfd(0x183)](_0x2d8cfd(0x13c)+(_0x4e9bf5+0x1)+_0x2d8cfd(0x1df)+_0x294ef9);}catch(_0x11bb73){console[_0x2d8cfd(0x185)](_0x2d8cfd(0x19b)+(_0x4e9bf5+0x1)+_0x2d8cfd(0x1fe)+_0x294ef9+':',_0x11bb73),this[_0x2d8cfd(0x163)](_0x294ef9,_0x4da504,_0x11bb73,'status_check',{'checkNumber':_0x4e9bf5+0x1,'scheduledAfter':_0x26964e['description'],'isIndividualCheck':!![]});}},_0x37d4f1);_0x153c41[_0x5e5406(0x1d8)](_0x3b3a93),console[_0x5e5406(0x183)](_0x5e5406(0x160)+(_0x4e9bf5+0x1)+_0x5e5406(0x1fe)+_0x294ef9+'\x20in\x20'+_0x37d4f1/0x3e8+_0x5e5406(0x147)+_0x26964e[_0x5e5406(0x1bb)]+')');});const _0xbaf2da=setInterval(async()=>{const _0x6786ff=_0x139baf;console['log']('ü™ô\x20[HOURLY]\x20Hourly\x20check\x20triggered\x20for\x20payment\x20'+_0x294ef9);try{const _0x421b73=await database_1[_0x6786ff(0x1fa)]['payment'][_0x6786ff(0x115)]({'where':{'id':_0x294ef9},'select':{'id':!![],'status':!![],'createdAt':!![],'gatewayPaymentId':!![]}});if(!_0x421b73){console[_0x6786ff(0x183)](_0x6786ff(0x133)+_0x294ef9+_0x6786ff(0x153)),this[_0x6786ff(0x1dd)](_0x294ef9);return;}console[_0x6786ff(0x183)](_0x6786ff(0x135)+_0x294ef9+_0x6786ff(0x1b5)+_0x421b73[_0x6786ff(0x1e7)]);if(_0x421b73['status']!=='PENDING'){console['log'](_0x6786ff(0x1c4)+_0x294ef9+_0x6786ff(0x181)+_0x421b73[_0x6786ff(0x1e7)]+',\x20stopping\x20individual\x20checks'),this[_0x6786ff(0x1dd)](_0x294ef9);return;}const _0x2494cc=Math[_0x6786ff(0x1d0)]((Date[_0x6786ff(0x13f)]()-_0x421b73[_0x6786ff(0x145)][_0x6786ff(0x1a7)]())/(0x3e8*0x3c*0x3c*0x18));if(_0x2494cc>=this[_0x6786ff(0x191)]){console['log'](_0x6786ff(0x138)+_0x294ef9+'\x20is\x20older\x20than\x20'+this[_0x6786ff(0x191)]+'\x20days,\x20will\x20be\x20handled\x20by\x20global\x20expiry\x20check'),this[_0x6786ff(0x1dd)](_0x294ef9);return;}await this[_0x6786ff(0x128)](_0x294ef9),console[_0x6786ff(0x183)](_0x6786ff(0x12e)+_0x294ef9);}catch(_0xc8bdf2){console['error'](_0x6786ff(0x1b0)+_0x294ef9+':',_0xc8bdf2),this[_0x6786ff(0x163)](_0x294ef9,_0x4da504,_0xc8bdf2,'status_check',{'isHourlyCheck':!![],'isIndividualCheck':!![]});}},0x3c*0x3c*0x3e8);_0x153c41['push'](_0xbaf2da),this[_0x139baf(0x121)][_0x139baf(0x1e9)](_0x294ef9,{'timers':_0x153c41,'paymentId':_0x294ef9,'gatewayPaymentId':_0x4da504,'createdAt':_0x1865f4}),console[_0x139baf(0x183)](_0x139baf(0x132)+_0x524762[_0x139baf(0x11a)]+_0x139baf(0x161)+_0x294ef9),console[_0x139baf(0x183)](_0x139baf(0x1ea)+this[_0x139baf(0x121)][_0x139baf(0x18c)]),this['logCoinToPayStatus'](_0x294ef9,_0x4da504,_0x139baf(0x1f4),_0x139baf(0x1f4),_0x139baf(0x122),{'action':_0x139baf(0x117),'scheduledChecks':_0x524762[_0x139baf(0x11a)],'firstCheckIn':_0x524762[0x0][_0x139baf(0x1d7)]/0x3e8,'totalTimers':this[_0x139baf(0x121)][_0x139baf(0x18c)]});}[a37_0x39942a(0x1dd)](_0x168fab){const _0x4b0801=a37_0x39942a,_0x3af1b8=this[_0x4b0801(0x121)][_0x4b0801(0x208)](_0x168fab);_0x3af1b8?(console[_0x4b0801(0x183)](_0x4b0801(0x17c)+_0x3af1b8[_0x4b0801(0x1b4)]['length']+_0x4b0801(0x1e8)+_0x168fab),_0x3af1b8[_0x4b0801(0x1b4)][_0x4b0801(0x1b8)]((_0x3a6b84,_0x46706e)=>{const _0x5955a1=_0x4b0801;_0x3a6b84&&(clearTimeout(_0x3a6b84),clearInterval(_0x3a6b84),console['log']('üßπ\x20[DEBUG]\x20Cleared\x20timer\x20#'+(_0x46706e+0x1)+_0x5955a1(0x1fe)+_0x168fab));}),this[_0x4b0801(0x121)]['delete'](_0x168fab),console[_0x4b0801(0x183)](_0x4b0801(0x104)+_0x168fab+_0x4b0801(0x17a)+this[_0x4b0801(0x121)][_0x4b0801(0x18c)])):console[_0x4b0801(0x183)](_0x4b0801(0x1e1)+_0x168fab+_0x4b0801(0x20b));}async[a37_0x39942a(0x128)](_0x5b7ce6){const _0x3d014b=a37_0x39942a;console[_0x3d014b(0x183)](_0x3d014b(0x146)+_0x5b7ce6);const _0xe4994d=await database_1[_0x3d014b(0x1fa)][_0x3d014b(0x19e)][_0x3d014b(0x115)]({'where':{'id':_0x5b7ce6},'select':{'id':!![],'gatewayPaymentId':!![],'amount':!![],'currency':!![],'status':!![],'shopId':!![],'createdAt':!![],'gateway':!![],'shop':{'select':{'id':!![],'name':!![],'settings':{'select':{'webhookUrl':!![],'webhookEvents':!![]}}}}}});if(!_0xe4994d){console['log'](_0x3d014b(0x1d4)+_0x5b7ce6+_0x3d014b(0x1ef));return;}console['log'](_0x3d014b(0x13e)+_0x5b7ce6+_0x3d014b(0x1c2)),console[_0x3d014b(0x183)](_0x3d014b(0x186)+_0xe4994d[_0x3d014b(0x19d)]),console[_0x3d014b(0x183)](_0x3d014b(0x11c)+_0xe4994d[_0x3d014b(0x1e7)]),console['log'](_0x3d014b(0x16f)+_0xe4994d['gatewayPaymentId']),console[_0x3d014b(0x183)](_0x3d014b(0x1a8)+_0xe4994d[_0x3d014b(0x1a9)]+'\x20'+_0xe4994d['currency']),console[_0x3d014b(0x183)](_0x3d014b(0x14d)+_0xe4994d['shopId']);if(_0xe4994d['gateway']!=='cointopay'){console[_0x3d014b(0x183)](_0x3d014b(0x148)+_0x5b7ce6+_0x3d014b(0x1eb)+_0xe4994d[_0x3d014b(0x19d)]+')');return;}if(_0xe4994d[_0x3d014b(0x1e7)]!=='PENDING'){console['log']('‚ö†Ô∏è\x20[CHECK]\x20Payment\x20'+_0x5b7ce6+_0x3d014b(0x181)+_0xe4994d[_0x3d014b(0x1e7)]+',\x20stopping\x20individual\x20checks'),this[_0x3d014b(0x1dd)](_0x5b7ce6);return;}if(!_0xe4994d[_0x3d014b(0x10c)]){console[_0x3d014b(0x183)](_0x3d014b(0x148)+_0x5b7ce6+_0x3d014b(0x19a));return;}console[_0x3d014b(0x183)](_0x3d014b(0x1bd)+_0x5b7ce6+'\x20is\x20valid\x20for\x20checking,\x20proceeding...'),await this[_0x3d014b(0x1bf)](_0xe4994d);}[a37_0x39942a(0x176)](_0xb1d856,_0x4ae08b,_0x125a4b,_0x479f99,_0x2f12c3,_0x46b20b){const _0x1664ca=a37_0x39942a,_0x290005={'type':_0x1664ca(0x140),'paymentId':_0xb1d856,'gatewayPaymentId':_0x4ae08b,'oldStatus':_0x125a4b,'newStatus':_0x479f99,'source':_0x2f12c3,'timestamp':new Date()[_0x1664ca(0x112)](),'details':_0x46b20b||{}};loggerService_1[_0x1664ca(0x12f)]['logCoinToPayStatus'](_0x290005),console[_0x1664ca(0x183)](_0x1664ca(0x10b)+_0xb1d856+'\x20('+_0x4ae08b+')'),console[_0x1664ca(0x183)]('\x20\x20\x20üìä\x20Status:\x20'+_0x125a4b+_0x1664ca(0x10f)+_0x479f99),console[_0x1664ca(0x183)](_0x1664ca(0x1b3)+_0x2f12c3),console[_0x1664ca(0x183)](_0x1664ca(0x170)+_0x290005[_0x1664ca(0x17e)]),_0x46b20b&&console[_0x1664ca(0x183)]('\x20\x20\x20üìù\x20Details:',_0x46b20b);}[a37_0x39942a(0x163)](_0x7873aa,_0x49060d,_0x3e145d,_0x1af9e1,_0x431795){const _0x4438f9=a37_0x39942a,_0x2b7193={'type':_0x4438f9(0x1ed),'paymentId':_0x7873aa,'gatewayPaymentId':_0x49060d,'error':_0x3e145d instanceof Error?{'message':_0x3e145d[_0x4438f9(0x123)],'stack':_0x3e145d[_0x4438f9(0x167)]}:_0x3e145d,'source':_0x1af9e1,'timestamp':new Date()[_0x4438f9(0x112)](),'context':_0x431795||{}};loggerService_1[_0x4438f9(0x12f)][_0x4438f9(0x163)](_0x2b7193),console[_0x4438f9(0x185)]('ü™ô\x20[ERROR]\x20CoinToPay\x20Error:\x20'+_0x7873aa+'\x20('+_0x49060d+')'),console['error'](_0x4438f9(0x18d)+(_0x3e145d instanceof Error?_0x3e145d[_0x4438f9(0x123)]:_0x3e145d)),console[_0x4438f9(0x185)](_0x4438f9(0x1b3)+_0x1af9e1),console['error'](_0x4438f9(0x170)+_0x2b7193['timestamp']),_0x431795&&console['error'](_0x4438f9(0x1af),_0x431795);}[a37_0x39942a(0x139)](){const _0x4c17d6=a37_0x39942a;console[_0x4c17d6(0x183)](_0x4c17d6(0x200)),this['checkAllPendingPayments']()['catch'](_0x3987f6=>{const _0x57cc6f=_0x4c17d6;console[_0x57cc6f(0x185)](_0x57cc6f(0x1f2),_0x3987f6);}),this[_0x4c17d6(0x18b)]=setInterval(async()=>{const _0x5ebac9=_0x4c17d6;try{console[_0x5ebac9(0x183)](_0x5ebac9(0x154)),await this[_0x5ebac9(0x168)](),console['log'](_0x5ebac9(0x1c7));}catch(_0x3b4dcc){console[_0x5ebac9(0x185)](_0x5ebac9(0x152),_0x3b4dcc);}},this[_0x4c17d6(0x1f1)]),console[_0x4c17d6(0x183)]('‚úÖ\x20[INIT]\x20CoinToPay\x20status\x20checking\x20service\x20started\x20(global\x20hourly\x20checks\x20+\x20individual\x20payment\x20timers)');}['stopPeriodicStatusCheck'](){const _0x2d1576=a37_0x39942a;console['log'](_0x2d1576(0x15a));this[_0x2d1576(0x18b)]&&(clearInterval(this[_0x2d1576(0x18b)]),this[_0x2d1576(0x18b)]=null,console[_0x2d1576(0x183)](_0x2d1576(0x124)));const _0x54579d=this[_0x2d1576(0x121)]['size'];for(const [_0x2df804]of this['paymentTimers']){this[_0x2d1576(0x1dd)](_0x2df804);}console[_0x2d1576(0x183)](_0x2d1576(0x203)+_0x54579d+_0x2d1576(0x1f3));}async[a37_0x39942a(0x168)](){const _0x441987=a37_0x39942a;try{console[_0x441987(0x183)](_0x441987(0x141));const _0x1e9248=await database_1[_0x441987(0x1fa)][_0x441987(0x19e)]['findMany']({'where':{'gateway':_0x441987(0x1bc),'status':_0x441987(0x1f4),'gatewayPaymentId':{'not':null}},'select':{'id':!![],'gatewayPaymentId':!![],'amount':!![],'currency':!![],'status':!![],'shopId':!![],'createdAt':!![],'shop':{'select':{'id':!![],'name':!![],'settings':{'select':{'webhookUrl':!![],'webhookEvents':!![]}}}}}});console[_0x441987(0x183)]('ü™ô\x20[GLOBAL]\x20Found\x20'+_0x1e9248['length']+_0x441987(0x190));if(_0x1e9248[_0x441987(0x11a)]===0x0){console[_0x441987(0x183)](_0x441987(0x1d6));return;}const _0x544d90=await this[_0x441987(0x1f0)](_0x1e9248);console['log'](_0x441987(0x17f)+_0x544d90[_0x441987(0x11a)]+'\x20expired\x20CoinToPay\x20payments');let _0x352906=0x0,_0x275f2f=0x0;for(const _0x38a547 of _0x1e9248){try{if(_0x544d90['includes'](_0x38a547['id'])){console[_0x441987(0x183)](_0x441987(0x19f)+_0x38a547['id']+_0x441987(0x192)),_0x275f2f++;continue;}if(this[_0x441987(0x121)][_0x441987(0x1d1)](_0x38a547['id'])){console[_0x441987(0x183)]('‚è∞\x20[GLOBAL]\x20Payment\x20'+_0x38a547['id']+_0x441987(0x14e)),_0x275f2f++;continue;}const _0x7ad3e=(Date['now']()-_0x38a547[_0x441987(0x145)][_0x441987(0x1a7)]())/(0x3e8*0x3c*0x3c);if(_0x7ad3e<0x1){console[_0x441987(0x183)]('‚è∞\x20[GLOBAL]\x20Payment\x20'+_0x38a547['id']+_0x441987(0x1d9)+_0x7ad3e[_0x441987(0x10e)](0x1)+_0x441987(0x105)),_0x275f2f++;continue;}console[_0x441987(0x183)](_0x441987(0x205)+_0x38a547['id']+_0x441987(0x1c1)+_0x7ad3e[_0x441987(0x10e)](0x1)+'h)'),await this['checkSinglePayment'](_0x38a547),_0x352906++,await new Promise(_0x1aa519=>setTimeout(_0x1aa519,0x7d0));}catch(_0x4b3900){console[_0x441987(0x185)](_0x441987(0x10d)+_0x38a547['id']+':',_0x4b3900),this['logCoinToPayError'](_0x38a547['id'],_0x38a547[_0x441987(0x10c)]||_0x441987(0x1f7),_0x4b3900,_0x441987(0x122),{'isGlobalCheck':!![],'paymentAmount':_0x38a547[_0x441987(0x1a9)],'paymentCurrency':_0x38a547[_0x441987(0x16a)],'shopId':_0x38a547[_0x441987(0x14f)],'createdAt':_0x38a547['createdAt']}),loggerService_1[_0x441987(0x12f)][_0x441987(0x1d2)]('cointopay',_0x441987(0x1a2)+_0x38a547[_0x441987(0x10c)],_0x4b3900);}}console['log'](_0x441987(0x1f5)+_0x352906+_0x441987(0x180)+_0x275f2f+'\x20skipped,\x20'+_0x544d90['length']+'\x20expired');}catch(_0x317911){console[_0x441987(0x185)](_0x441987(0x150),_0x317911);}}async[a37_0x39942a(0x1f0)](_0x5edfb9){const _0x638c2b=a37_0x39942a,_0x5f17e2=[],_0x4fc72e=new Date();_0x4fc72e[_0x638c2b(0x159)](_0x4fc72e[_0x638c2b(0x1e3)]()-this[_0x638c2b(0x191)]),console['log'](_0x638c2b(0x155)+this['EXPIRY_DAYS']+_0x638c2b(0x129)+_0x4fc72e[_0x638c2b(0x112)]()+')');for(const _0x1d4b45 of _0x5edfb9){if(_0x1d4b45[_0x638c2b(0x145)]<_0x4fc72e){console[_0x638c2b(0x183)]('‚è∞\x20[EXPIRY]\x20Payment\x20'+_0x1d4b45['id']+_0x638c2b(0x164)+this[_0x638c2b(0x191)]+_0x638c2b(0x12a));try{this[_0x638c2b(0x176)](_0x1d4b45['id'],_0x1d4b45[_0x638c2b(0x10c)]||'unknown',_0x638c2b(0x1f4),_0x638c2b(0x16d),_0x638c2b(0x18f),{'reason':_0x638c2b(0x198)+this['EXPIRY_DAYS']+_0x638c2b(0x182),'createdAt':_0x1d4b45[_0x638c2b(0x145)],'daysSinceCreation':Math[_0x638c2b(0x1d0)]((Date[_0x638c2b(0x13f)]()-_0x1d4b45[_0x638c2b(0x145)]['getTime']())/(0x3e8*0x3c*0x3c*0x18)),'paymentAmount':_0x1d4b45[_0x638c2b(0x1a9)],'paymentCurrency':_0x1d4b45[_0x638c2b(0x16a)],'shopId':_0x1d4b45[_0x638c2b(0x14f)]}),await database_1[_0x638c2b(0x1fa)]['payment'][_0x638c2b(0x19c)]({'where':{'id':_0x1d4b45['id']},'data':{'status':_0x638c2b(0x16d),'updatedAt':new Date(),'adminNotes':_0x638c2b(0x179)+this[_0x638c2b(0x191)]+_0x638c2b(0x172)}}),await database_1[_0x638c2b(0x1fa)]['webhookLog']['create']({'data':{'paymentId':_0x1d4b45['id'],'shopId':_0x1d4b45[_0x638c2b(0x14f)],'event':_0x638c2b(0x127),'statusCode':0xc8,'responseBody':JSON[_0x638c2b(0x189)]({'reason':'Payment\x20older\x20than\x20'+this[_0x638c2b(0x191)]+'\x20days','createdAt':_0x1d4b45[_0x638c2b(0x145)],'expiredAt':new Date()[_0x638c2b(0x112)](),'daysSinceCreation':Math[_0x638c2b(0x1d0)]((Date['now']()-_0x1d4b45['createdAt'][_0x638c2b(0x1a7)]())/(0x3e8*0x3c*0x3c*0x18))})}}),await this['sendShopWebhook'](_0x1d4b45,_0x638c2b(0x16d)),await this[_0x638c2b(0x196)](_0x1d4b45,_0x638c2b(0x16d)),this[_0x638c2b(0x1dd)](_0x1d4b45['id']),_0x5f17e2[_0x638c2b(0x1d8)](_0x1d4b45['id']),console['log'](_0x638c2b(0x108)+_0x1d4b45['id']+_0x638c2b(0x14b)+this['EXPIRY_DAYS']+'-day\x20timeout');}catch(_0x22499a){console['error'](_0x638c2b(0x1de)+_0x1d4b45['id']+':',_0x22499a),this[_0x638c2b(0x163)](_0x1d4b45['id'],_0x1d4b45[_0x638c2b(0x10c)]||_0x638c2b(0x1f7),_0x22499a,_0x638c2b(0x18f),{'reason':_0x638c2b(0x142),'createdAt':_0x1d4b45[_0x638c2b(0x145)],'daysSinceCreation':Math[_0x638c2b(0x1d0)]((Date[_0x638c2b(0x13f)]()-_0x1d4b45[_0x638c2b(0x145)][_0x638c2b(0x1a7)]())/(0x3e8*0x3c*0x3c*0x18))});}}}return _0x5f17e2;}async[a37_0x39942a(0x1bf)](_0x36b007){const _0x47a568=a37_0x39942a;if(!_0x36b007['gatewayPaymentId']){console[_0x47a568(0x183)](_0x47a568(0x148)+_0x36b007['id']+_0x47a568(0x120));return;}console[_0x47a568(0x183)](_0x47a568(0x1da)+_0x36b007['id']+'\x20('+_0x36b007[_0x47a568(0x10c)]+')');try{const _0x18b7c3=await this[_0x47a568(0x1c9)]['checkPaymentStatus'](_0x36b007[_0x47a568(0x10c)]);console[_0x47a568(0x183)]('üìä\x20[CHECK]\x20Payment\x20'+_0x36b007['id']+_0x47a568(0x158)+_0x18b7c3[_0x47a568(0x1e7)]);_0x18b7c3[_0x47a568(0x111)]&&console['log'](_0x47a568(0x13e)+_0x36b007['id']+_0x47a568(0x1aa),{'iban':_0x18b7c3[_0x47a568(0x111)][_0x47a568(0x11e)]||_0x47a568(0x15b),'transactionId':_0x18b7c3[_0x47a568(0x111)][_0x47a568(0x1fb)],'createdOn':_0x18b7c3[_0x47a568(0x111)][_0x47a568(0x1fd)],'confirmedOn':_0x18b7c3[_0x47a568(0x111)][_0x47a568(0x1cb)]||_0x47a568(0x1ac)});if(_0x18b7c3['status']!==_0x36b007['status']){console[_0x47a568(0x183)](_0x47a568(0x209)+_0x36b007['id']+'\x20status\x20from\x20'+_0x36b007[_0x47a568(0x1e7)]+_0x47a568(0x171)+_0x18b7c3[_0x47a568(0x1e7)]),this[_0x47a568(0x176)](_0x36b007['id'],_0x36b007[_0x47a568(0x10c)],_0x36b007[_0x47a568(0x1e7)],_0x18b7c3[_0x47a568(0x1e7)],'status_check',{'paymentDetails':_0x18b7c3[_0x47a568(0x111)],'amount':_0x18b7c3['amount'],'currency':_0x18b7c3[_0x47a568(0x16a)],'shopId':_0x36b007[_0x47a568(0x14f)],'checkTimestamp':new Date()['toISOString']()});const _0x18d1f1={'status':_0x18b7c3['status'],'updatedAt':new Date()};_0x18b7c3['status']==='PAID'&&_0x36b007['status']!==_0x47a568(0x1f8)&&(_0x18d1f1[_0x47a568(0x1e6)]=new Date(),console['log'](_0x47a568(0x201)+_0x36b007['id']+_0x47a568(0x204)+_0x18d1f1[_0x47a568(0x1e6)][_0x47a568(0x112)]()));if(_0x18b7c3[_0x47a568(0x111)]){const _0x525bba=_0x18b7c3['paymentDetails'];_0x525bba[_0x47a568(0x11e)]&&(_0x18d1f1[_0x47a568(0x197)]=_0x525bba[_0x47a568(0x11e)],console['log'](_0x47a568(0x110)+_0x525bba[_0x47a568(0x11e)]));if(_0x525bba['bankDetails']){const _0x944372=_0x36b007[_0x47a568(0x187)]||'',_0x368aa0=_0x47a568(0x1f9)+_0x525bba[_0x47a568(0x1ca)];_0x18d1f1[_0x47a568(0x187)]=_0x944372?_0x944372+'\x0a\x0a'+_0x368aa0:_0x368aa0,console['log'](_0x47a568(0x206));}_0x525bba[_0x47a568(0x1fb)]&&console[_0x47a568(0x183)](_0x47a568(0x207)+_0x525bba[_0x47a568(0x1fb)]),_0x525bba[_0x47a568(0x1cb)]&&console[_0x47a568(0x183)]('‚úÖ\x20[CHECK]\x20Transaction\x20confirmed\x20on:\x20'+_0x525bba[_0x47a568(0x1cb)]);}await database_1[_0x47a568(0x1fa)][_0x47a568(0x19e)][_0x47a568(0x19c)]({'where':{'id':_0x36b007['id']},'data':_0x18d1f1}),await database_1[_0x47a568(0x1fa)][_0x47a568(0x126)]['create']({'data':{'paymentId':_0x36b007['id'],'shopId':_0x36b007[_0x47a568(0x14f)],'event':_0x47a568(0x18e)+_0x18b7c3['status'][_0x47a568(0x1a3)](),'statusCode':0xc8,'responseBody':JSON['stringify']({'oldStatus':_0x36b007[_0x47a568(0x1e7)],'newStatus':_0x18b7c3[_0x47a568(0x1e7)],'paymentDetails':_0x18b7c3[_0x47a568(0x111)],'checkedAt':new Date()['toISOString']()})}}),await this[_0x47a568(0x1c8)](_0x36b007,_0x18b7c3[_0x47a568(0x1e7)]),await this[_0x47a568(0x196)](_0x36b007,_0x18b7c3[_0x47a568(0x1e7)]);if(_0x18b7c3[_0x47a568(0x1e7)]===_0x47a568(0x1f8)&&_0x36b007['status']!=='PAID')try{const {PaymentLinkService:_0x55eefc}=await Promise[_0x47a568(0x1e0)]()[_0x47a568(0x157)](()=>__importStar(require(_0x47a568(0x113)))),_0x1531d9=new _0x55eefc();await _0x1531d9[_0x47a568(0x14c)](_0x36b007['id']),console[_0x47a568(0x183)](_0x47a568(0x1c6)+_0x36b007['id']);}catch(_0x38bd6b){console[_0x47a568(0x185)]('‚ùå\x20[CHECK]\x20Failed\x20to\x20update\x20payment\x20link\x20counter\x20for\x20payment\x20'+_0x36b007['id']+':',_0x38bd6b);}_0x18b7c3['status']!==_0x47a568(0x1f4)&&(console['log'](_0x47a568(0x130)+_0x36b007['id']+_0x47a568(0x202)+_0x18b7c3['status']+_0x47a568(0x173)),this[_0x47a568(0x1dd)](_0x36b007['id'])),console[_0x47a568(0x183)](_0x47a568(0x1bd)+_0x36b007['id']+_0x47a568(0x174));}else console[_0x47a568(0x183)](_0x47a568(0x13e)+_0x36b007['id']+_0x47a568(0x175)+_0x18b7c3[_0x47a568(0x1e7)]+')'),this[_0x47a568(0x176)](_0x36b007['id'],_0x36b007['gatewayPaymentId'],_0x36b007[_0x47a568(0x1e7)],_0x18b7c3['status'],'status_check',{'statusUnchanged':!![],'paymentDetails':_0x18b7c3[_0x47a568(0x111)],'amount':_0x18b7c3['amount'],'currency':_0x18b7c3[_0x47a568(0x16a)],'shopId':_0x36b007[_0x47a568(0x14f)],'checkTimestamp':new Date()[_0x47a568(0x112)]()});}catch(_0x263882){console['error'](_0x47a568(0x16c)+_0x36b007['id']+':',_0x263882),this[_0x47a568(0x163)](_0x36b007['id'],_0x36b007[_0x47a568(0x10c)],_0x263882,_0x47a568(0x122),{'paymentAmount':_0x36b007[_0x47a568(0x1a9)],'paymentCurrency':_0x36b007[_0x47a568(0x16a)],'shopId':_0x36b007[_0x47a568(0x14f)],'createdAt':_0x36b007['createdAt']}),await database_1[_0x47a568(0x1fa)]['webhookLog'][_0x47a568(0x15e)]({'data':{'paymentId':_0x36b007['id'],'shopId':_0x36b007['shopId'],'event':'cointopay_status_check_error','statusCode':0x1f4,'responseBody':JSON[_0x47a568(0x189)]({'error':_0x263882 instanceof Error?_0x263882[_0x47a568(0x123)]:_0x47a568(0x195),'gatewayPaymentId':_0x36b007[_0x47a568(0x10c)],'checkedAt':new Date()[_0x47a568(0x112)]()})}});}}async[a37_0x39942a(0x1c8)](_0x4c872d,_0x420e15){const _0x22e5e1=a37_0x39942a,_0x54c10b=Date['now']();try{const _0x5618ca=_0x4c872d[_0x22e5e1(0x1b9)],_0x4c27f4=_0x5618ca[_0x22e5e1(0x1ee)];if(!_0x4c27f4?.[_0x22e5e1(0x18a)]){console[_0x22e5e1(0x183)](_0x22e5e1(0x1ad)+_0x5618ca['id']);return;}const _0x5a7d55=_0x420e15===_0x22e5e1(0x1f8)?_0x22e5e1(0x12d):_0x420e15===_0x22e5e1(0x149)?_0x22e5e1(0x20a):_0x420e15===_0x22e5e1(0x16d)?_0x22e5e1(0x20a):_0x22e5e1(0x165);if(!_0x4c27f4[_0x22e5e1(0x15d)]?.[_0x22e5e1(0x1ba)](_0x5a7d55)){console[_0x22e5e1(0x183)](_0x22e5e1(0x11d)+_0x5a7d55+'\x20not\x20enabled\x20for\x20shop\x20'+_0x5618ca['id']);return;}const _0x1cf241={'event':_0x5a7d55,'payment':{'id':_0x4c872d['id'],'order_id':_0x4c872d[_0x22e5e1(0x118)],'gateway_order_id':_0x4c872d['gatewayOrderId'],'gateway':_0x22e5e1(0x17b),'amount':_0x4c872d[_0x22e5e1(0x1a9)],'currency':_0x4c872d[_0x22e5e1(0x16a)],'status':_0x420e15[_0x22e5e1(0x1a3)](),'customer_email':_0x4c872d[_0x22e5e1(0x1b2)],'customer_name':_0x4c872d[_0x22e5e1(0x1ff)],'created_at':_0x4c872d[_0x22e5e1(0x145)],'updated_at':new Date()}},_0x128483=await fetch(_0x4c27f4[_0x22e5e1(0x18a)],{'method':_0x22e5e1(0x116),'headers':{'Content-Type':_0x22e5e1(0x1a5),'User-Agent':_0x22e5e1(0x178)},'body':JSON[_0x22e5e1(0x189)](_0x1cf241)}),_0x146a0a=Date['now']()-_0x54c10b,_0x343620=_0x128483['ok']?'Success':await _0x128483[_0x22e5e1(0x1a1)]();loggerService_1[_0x22e5e1(0x12f)][_0x22e5e1(0x1dc)](_0x4c872d[_0x22e5e1(0x14f)],_0x4c27f4[_0x22e5e1(0x18a)],_0x5a7d55,_0x128483['status'],_0x146a0a,_0x1cf241),console['log'](_0x22e5e1(0x106)+_0x4c27f4['webhookUrl']+_0x22e5e1(0x10a)+_0x128483['status']+'\x20('+_0x146a0a+_0x22e5e1(0x1f6));}catch(_0x202eae){console[_0x22e5e1(0x185)]('Failed\x20to\x20send\x20shop\x20webhook:',_0x202eae),loggerService_1['loggerService'][_0x22e5e1(0x1e4)](_0x4c872d[_0x22e5e1(0x14f)],_0x4c872d[_0x22e5e1(0x1b9)]?.['settings']?.[_0x22e5e1(0x18a)]||_0x22e5e1(0x1f7),_0x22e5e1(0x12c),_0x202eae,{});}}async[a37_0x39942a(0x196)](_0x50c3aa,_0x2dfe41){const _0x12c285=a37_0x39942a;try{const _0x267377={'PENDING':_0x12c285(0x114),'PAID':_0x12c285(0x1d3),'FAILED':_0x12c285(0x12b),'EXPIRED':_0x12c285(0x1ce)},_0x3b83a7=_0x267377[_0x2dfe41];if(!_0x3b83a7||_0x3b83a7===_0x12c285(0x114))return;await telegramBotService_1[_0x12c285(0x1cf)][_0x12c285(0x166)](_0x50c3aa[_0x12c285(0x14f)],_0x50c3aa,_0x3b83a7);}catch(_0x3c61c0){console['error'](_0x12c285(0x1b7),_0x3c61c0);}}async[a37_0x39942a(0x143)](_0x125b2a){const _0x4a7745=a37_0x39942a;console['log'](_0x4a7745(0x1d5)+_0x125b2a);const _0x9e1957=await database_1[_0x4a7745(0x1fa)][_0x4a7745(0x19e)][_0x4a7745(0x115)]({'where':{'id':_0x125b2a},'include':{'shop':{'select':{'id':!![],'name':!![],'settings':{'select':{'webhookUrl':!![],'webhookEvents':!![]}}}}}});if(!_0x9e1957)throw new Error(_0x4a7745(0x137));if(_0x9e1957[_0x4a7745(0x19d)]!==_0x4a7745(0x1bc))throw new Error('Payment\x20is\x20not\x20a\x20CoinToPay\x20payment');console['log'](_0x4a7745(0x13d)+_0x125b2a),await this['checkSinglePayment'](_0x9e1957),console[_0x4a7745(0x183)](_0x4a7745(0x1ae)+_0x125b2a);}['getServiceStats'](){const _0x472515=a37_0x39942a,_0x238ea2=this[_0x472515(0x18b)]?this['GLOBAL_CHECK_INTERVAL_MS']:undefined,_0x4f79fd=Array[_0x472515(0x1c0)](this[_0x472515(0x121)][_0x472515(0x1fc)]())[_0x472515(0x125)](_0x4f9f73=>({'paymentId':_0x4f9f73[_0x472515(0x15c)],'gatewayPaymentId':_0x4f9f73[_0x472515(0x10c)],'createdAt':_0x4f9f73[_0x472515(0x145)],'timersCount':_0x4f9f73[_0x472515(0x1b4)][_0x472515(0x11a)]}));return{'isActive':!!this[_0x472515(0x18b)],'globalCheckIntervalMinutes':this[_0x472515(0x1f1)]/(0x3e8*0x3c),'expiryDays':this[_0x472515(0x191)],'activeIndividualTimers':this[_0x472515(0x121)][_0x472515(0x18c)],'nextGlobalCheckIn':_0x238ea2,'paymentTimersDetails':_0x4f79fd};}[a37_0x39942a(0x1be)](_0x5f2b5e){const _0xb73767=a37_0x39942a,_0x51c953=this[_0xb73767(0x121)][_0xb73767(0x208)](_0x5f2b5e);if(_0x51c953)return{'hasTimers':!![],'timersCount':_0x51c953[_0xb73767(0x1b4)][_0xb73767(0x11a)],'createdAt':_0x51c953[_0xb73767(0x145)],'gatewayPaymentId':_0x51c953[_0xb73767(0x10c)]};return{'hasTimers':![]};}}function a37_0x4809(_0x7d3043,_0x300f1b){const _0x39d0b9=a37_0x39d0();return a37_0x4809=function(_0x48095a,_0xef0e4f){_0x48095a=_0x48095a-0x104;let _0x123db1=_0x39d0b9[_0x48095a];return _0x123db1;},a37_0x4809(_0x7d3043,_0x300f1b);}function a37_0x39d0(){const _0x3cc4fb=['5\x20minutes','error','\x20\x20\x20-\x20Gateway:\x20','adminNotes','40PxQybb','stringify','webhookUrl','globalCheckInterval','size','\x20\x20\x20‚ùå\x20Error:\x20','cointopay_status_check_','auto_expire','\x20pending\x20CoinToPay\x20payments','EXPIRY_DAYS','\x20already\x20marked\x20as\x20expired,\x20skipping\x20global\x20check','../config/database','9795816onqMWf','Unknown\x20error','sendPaymentStatusNotification','remitterIban','Payment\x20older\x20than\x20','configurable','\x20has\x20no\x20gatewayPaymentId','‚ùå\x20[TIMER]\x20Failed\x20individual\x20check\x20#','update','gateway','payment','‚è∞\x20[GLOBAL]\x20Payment\x20','2187coTZjT','text','/status/','toLowerCase','4072494JBOcpF','application/json','__createBinding','getTime','\x20\x20\x20-\x20Amount:\x20','amount','\x20details:','2\x20minutes','not\x20confirmed','No\x20webhook\x20URL\x20configured\x20for\x20shop\x20','‚úÖ\x20[MANUAL]\x20Manual\x20check\x20completed\x20for\x20payment\x20','\x20\x20\x20üìù\x20Context:','‚ùå\x20[HOURLY]\x20Failed\x20hourly\x20check\x20for\x20payment\x20','\x20initial\x20timers\x20for\x20payment\x20','customerEmail','\x20\x20\x20üìç\x20Source:\x20','timers','\x20current\x20status:\x20','899680EQyHpx','Failed\x20to\x20send\x20Telegram\x20payment\x20notification:','forEach','shop','includes','description','cointopay','‚úÖ\x20[CHECK]\x20Payment\x20','getPaymentTimerInfo','checkSinglePayment','from','\x20(age:\x20','\x20found:','./gateways/coinToPayService','‚úÖ\x20[HOURLY]\x20Payment\x20','3415920kMiYhs','üìà\x20[CHECK]\x20Payment\x20link\x20counter\x20updated\x20for\x20payment\x20','‚úÖ\x20[GLOBAL]\x20Global\x20check\x20cycle\x20completed','sendShopWebhook','coinToPayService','bankDetails','confirmedOn','getOwnPropertyDescriptor','\x20triggered\x20for\x20payment\x20','expired','telegramBotService','floor','has','logWhiteDomainError','paid','‚ùå\x20[CHECK]\x20Payment\x20','üîç\x20[MANUAL]\x20Manual\x20check\x20requested\x20for\x20payment:\x20','ü™ô\x20[GLOBAL]\x20No\x20pending\x20CoinToPay\x20payments\x20to\x20check','delay','push','\x20is\x20too\x20new\x20(','üîç\x20[CHECK]\x20Checking\x20CoinToPay\x20payment\x20','\x20\x20\x20-\x20gatewayPaymentId:\x20','logShopWebhookSent','clearPaymentTimers','‚ùå\x20[EXPIRY]\x20Failed\x20to\x20expire\x20payment\x20','\x20completed\x20for\x20payment\x20','resolve','‚ö†Ô∏è\x20[DEBUG]\x20No\x20timers\x20found\x20for\x20payment\x20','__importStar','getDate','logShopWebhookError','11jWzHYF','paidAt','status','\x20timers\x20for\x20payment\x20','set','üìä\x20[DEBUG]\x20Total\x20active\x20payment\x20timers:\x20','\x20is\x20not\x20a\x20CoinToPay\x20payment\x20(gateway:\x20','__esModule','COINTOPAY_ERROR','settings','\x20not\x20found\x20in\x20database','checkExpiredPayments','GLOBAL_CHECK_INTERVAL_MS','‚ùå\x20[INIT]\x20Initial\x20CoinToPay\x20status\x20check\x20failed:','\x20individual\x20payment\x20timers','PENDING','‚úÖ\x20[GLOBAL]\x20Global\x20check\x20completed:\x20','ms)','unknown','PAID','Bank\x20Details:\x20','default','transactionId','values','createdOn','\x20for\x20payment\x20','customerName','ü™ô\x20[INIT]\x20Starting\x20CoinToPay\x20periodic\x20status\x20checking\x20(global\x20checks\x20every\x201\x20hour)','üí∞\x20[CHECK]\x20Payment\x20','\x20status\x20changed\x20to\x20','üõë\x20[SHUTDOWN]\x20Cleared\x20','\x20marked\x20as\x20paid\x20at:\x20','üîç\x20[GLOBAL]\x20Checking\x20old\x20payment\x20','üè¶\x20[CHECK]\x20Saved\x20bank\x20details\x20to\x20admin\x20notes','üÜî\x20[CHECK]\x20Transaction\x20ID:\x20','get','üîÑ\x20[CHECK]\x20Updating\x20payment\x20','payment.failed','\x20to\x20clear','‚úÖ\x20[DEBUG]\x20All\x20timers\x20cleared\x20for\x20payment\x20','h),\x20skipping\x20global\x20check','Shop\x20webhook\x20sent\x20to\x20','__importDefault','‚úÖ\x20[EXPIRY]\x20Payment\x20','164eHnUuv','\x20with\x20status\x20','ü™ô\x20[LOG]\x20CoinToPay\x20Status\x20Change:\x20','gatewayPaymentId','‚ùå\x20[GLOBAL]\x20Failed\x20to\x20check\x20CoinToPay\x20payment\x20','toFixed','\x20->\x20','üè¶\x20[CHECK]\x20Saved\x20IBAN:\x20','paymentDetails','toISOString','./paymentLinkService','created','findUnique','POST','schedule_created','orderId','defineProperty','length','__setModuleDefault','\x20\x20\x20-\x20Status:\x20','Webhook\x20event\x20','iban','CoinToPayStatusService','\x20has\x20no\x20gatewayPaymentId,\x20skipping','paymentTimers','status_check','message','üõë\x20[SHUTDOWN]\x20CoinToPay\x20global\x20status\x20checking\x20stopped','map','webhookLog','cointopay_auto_expired','checkSinglePaymentById','\x20days\x20(created\x20before\x20','\x20days,\x20marking\x20as\x20EXPIRED','failed','webhook_send','payment.success','‚úÖ\x20[HOURLY]\x20Hourly\x20check\x20completed\x20for\x20payment\x20','loggerService','üßπ\x20[CHECK]\x20Payment\x20','./loggerService','‚úÖ\x20[DEBUG]\x20Successfully\x20scheduled\x20','‚ùå\x20[HOURLY]\x20Payment\x20','CoinToPayService','üìä\x20[HOURLY]\x20Payment\x20','54427yEMBvc','Payment\x20not\x20found','‚è∞\x20[HOURLY]\x20Payment\x20','startPeriodicStatusCheck','schedulePaymentChecks','./telegramBotService','‚úÖ\x20[TIMER]\x20Individual\x20check\x20#','‚úÖ\x20[MANUAL]\x20Starting\x20manual\x20check\x20for\x20CoinToPay\x20payment\x20','üìä\x20[CHECK]\x20Payment\x20','now','COINTOPAY_STATUS_CHANGE','ü™ô\x20[GLOBAL]\x20Getting\x20all\x20pending\x20CoinToPay\x20payments...','Failed\x20to\x20mark\x20payment\x20as\x20expired','checkPaymentById','prototype','createdAt','üîç\x20[CHECK]\x20Starting\x20check\x20for\x20payment\x20ID:\x20','\x20seconds\x20(','‚ö†Ô∏è\x20[CHECK]\x20Payment\x20','FAILED','7YDWIec','\x20marked\x20as\x20EXPIRED\x20due\x20to\x20','handleSuccessfulPayment','\x20\x20\x20-\x20ShopId:\x20','\x20has\x20individual\x20timers,\x20skipping\x20global\x20check','shopId','‚ùå\x20[GLOBAL]\x20Failed\x20to\x20get\x20pending\x20CoinToPay\x20payments:','hasOwnProperty','‚ùå\x20[GLOBAL]\x20Periodic\x20CoinToPay\x20status\x20check\x20failed:','\x20not\x20found,\x20clearing\x20timers','ü™ô\x20[GLOBAL]\x20Starting\x20global\x20check\x20cycle...','‚è∞\x20[EXPIRY]\x20Checking\x20for\x20CoinToPay\x20payments\x20older\x20than\x20','ü™ô\x20[TIMER]\x20Individual\x20check\x20#','then','\x20status:\x20','setDate','üõë\x20[SHUTDOWN]\x20Stopping\x20CoinToPay\x20status\x20checking\x20service...','not\x20found','paymentId','webhookEvents','create','ü™ô\x20CoinToPayStatusService\x20initialized','‚è∞\x20[DEBUG]\x20Scheduled\x20check\x20#','\x20initial\x20checks\x20+\x20hourly\x20checks\x20for\x20payment\x20','749020dYlBrP','logCoinToPayError','\x20is\x20older\x20than\x20','payment.pending','sendPaymentNotification','stack','checkAllPendingPayments','\x20(after\x20','currency','getOwnPropertyNames','‚ùå\x20[CHECK]\x20Failed\x20to\x20check\x20payment\x20','EXPIRED','coinToPayStatusService','\x20\x20\x20-\x20GatewayPaymentId:\x20','\x20\x20\x20üìÖ\x20Time:\x20','\x20to\x20','\x20days\x20without\x20payment\x20confirmation',',\x20clearing\x20individual\x20timers','\x20updated\x20successfully','\x20status\x20unchanged\x20(','logCoinToPayStatus','99rIXuJZ','TesSoft\x20Payment\x20System/1.0','Automatically\x20expired\x20after\x20','.\x20Remaining\x20active\x20timers:\x20','0100','üßπ\x20[DEBUG]\x20Clearing\x20','ü™ô\x20[DEBUG]\x20Creating\x20','timestamp','‚è∞\x20[GLOBAL]\x20Found\x20','\x20checked,\x20','\x20status\x20is\x20','\x20days','log'];a37_0x39d0=function(){return _0x3cc4fb;};return a37_0x39d0();}exports[a37_0x39942a(0x11f)]=CoinToPayStatusService,exports['coinToPayStatusService']=new CoinToPayStatusService();