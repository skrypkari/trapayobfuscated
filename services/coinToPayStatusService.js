'use strict';const a37_0x30fc4a=a37_0x319f;(function(_0xbf26c4,_0x1e4dfc){const _0x36ae2a=a37_0x319f,_0x54052a=_0xbf26c4();while(!![]){try{const _0x4223e1=-parseInt(_0x36ae2a(0xf7))/0x1*(parseInt(_0x36ae2a(0x1ae))/0x2)+parseInt(_0x36ae2a(0x199))/0x3+-parseInt(_0x36ae2a(0x188))/0x4+-parseInt(_0x36ae2a(0x101))/0x5+parseInt(_0x36ae2a(0x154))/0x6*(-parseInt(_0x36ae2a(0x11f))/0x7)+parseInt(_0x36ae2a(0x153))/0x8+parseInt(_0x36ae2a(0xe1))/0x9;if(_0x4223e1===_0x1e4dfc)break;else _0x54052a['push'](_0x54052a['shift']());}catch(_0x383cf8){_0x54052a['push'](_0x54052a['shift']());}}}(a37_0x6288,0x5249f));var __createBinding=this&&this['__createBinding']||(Object[a37_0x30fc4a(0x134)]?function(_0x7d6d01,_0x55ab6f,_0x199677,_0x7e1a3b){const _0x40bfb2=a37_0x30fc4a;if(_0x7e1a3b===undefined)_0x7e1a3b=_0x199677;var _0x217888=Object[_0x40bfb2(0x172)](_0x55ab6f,_0x199677);(!_0x217888||(_0x40bfb2(0x128)in _0x217888?!_0x55ab6f['__esModule']:_0x217888[_0x40bfb2(0x1bb)]||_0x217888[_0x40bfb2(0x187)]))&&(_0x217888={'enumerable':!![],'get':function(){return _0x55ab6f[_0x199677];}}),Object[_0x40bfb2(0x1b8)](_0x7d6d01,_0x7e1a3b,_0x217888);}:function(_0x3a0ca6,_0x1e49a1,_0x5eaa73,_0x38a060){if(_0x38a060===undefined)_0x38a060=_0x5eaa73;_0x3a0ca6[_0x38a060]=_0x1e49a1[_0x5eaa73];}),__setModuleDefault=this&&this[a37_0x30fc4a(0xee)]||(Object[a37_0x30fc4a(0x134)]?function(_0x4f44e5,_0x1c967e){const _0x3c51d4=a37_0x30fc4a;Object[_0x3c51d4(0x1b8)](_0x4f44e5,_0x3c51d4(0x173),{'enumerable':!![],'value':_0x1c967e});}:function(_0x1a9f56,_0x55ac1f){const _0xceb35f=a37_0x30fc4a;_0x1a9f56[_0xceb35f(0x173)]=_0x55ac1f;}),__importStar=this&&this['__importStar']||(function(){var _0x45a50e=function(_0xbce381){const _0x37ad1c=a37_0x319f;return _0x45a50e=Object[_0x37ad1c(0x11b)]||function(_0x208504){const _0x4a0352=_0x37ad1c;var _0x7e0cd6=[];for(var _0x461f66 in _0x208504)if(Object[_0x4a0352(0x112)][_0x4a0352(0xfd)][_0x4a0352(0x183)](_0x208504,_0x461f66))_0x7e0cd6[_0x7e0cd6[_0x4a0352(0x117)]]=_0x461f66;return _0x7e0cd6;},_0x45a50e(_0xbce381);};return function(_0x2c32e3){const _0x5bb94e=a37_0x319f;if(_0x2c32e3&&_0x2c32e3['__esModule'])return _0x2c32e3;var _0x7e8eb6={};if(_0x2c32e3!=null){for(var _0x159da4=_0x45a50e(_0x2c32e3),_0x31e7f8=0x0;_0x31e7f8<_0x159da4[_0x5bb94e(0x117)];_0x31e7f8++)if(_0x159da4[_0x31e7f8]!==_0x5bb94e(0x173))__createBinding(_0x7e8eb6,_0x2c32e3,_0x159da4[_0x31e7f8]);}return __setModuleDefault(_0x7e8eb6,_0x2c32e3),_0x7e8eb6;};}()),__importDefault=this&&this[a37_0x30fc4a(0x1a9)]||function(_0x14ae33){const _0x6d763c=a37_0x30fc4a;return _0x14ae33&&_0x14ae33[_0x6d763c(0x16a)]?_0x14ae33:{'default':_0x14ae33};};Object['defineProperty'](exports,a37_0x30fc4a(0x16a),{'value':!![]}),exports[a37_0x30fc4a(0x178)]=exports[a37_0x30fc4a(0x165)]=void 0x0;const coinToPayService_1=require(a37_0x30fc4a(0x17f)),database_1=__importDefault(require(a37_0x30fc4a(0x18b))),telegramBotService_1=require(a37_0x30fc4a(0x151)),loggerService_1=require(a37_0x30fc4a(0x1b4));class CoinToPayStatusService{constructor(){const _0x4f7214=a37_0x30fc4a;this['globalCheckInterval']=null,this[_0x4f7214(0x150)]=0x3c*0x3c*0x3e8,this['EXPIRY_DAYS']=0x5,this[_0x4f7214(0x14a)]=new Map(),this[_0x4f7214(0x192)]=new coinToPayService_1[(_0x4f7214(0x18c))](),console['log'](_0x4f7214(0x163));}[a37_0x30fc4a(0x149)](_0x65d3a9,_0x493ceb){const _0x141b3a=a37_0x30fc4a;console['log']('ü™ô\x20[DEBUG]\x20schedulePaymentChecks\x20called\x20with:'),console['log'](_0x141b3a(0x156)+_0x65d3a9),console[_0x141b3a(0xe9)]('\x20\x20\x20-\x20gatewayPaymentId:\x20'+_0x493ceb),this[_0x141b3a(0xf5)](_0x65d3a9);const _0x2638c1=[],_0x27d13a=new Date(),_0x1c7341=[{'delay':0x1*0x3c*0x3e8,'description':_0x141b3a(0x180)},{'delay':0x2*0x3c*0x3e8,'description':_0x141b3a(0x191)},{'delay':0x5*0x3c*0x3e8,'description':_0x141b3a(0x189)},{'delay':0x5*0x3c*0x3e8,'description':_0x141b3a(0x189)}];console[_0x141b3a(0xe9)](_0x141b3a(0x133)+_0x1c7341['length']+_0x141b3a(0x17d)+_0x65d3a9);let _0x573f57=0x0;_0x1c7341[_0x141b3a(0x1ad)]((_0x15f3cd,_0x29134e)=>{const _0x46d69d=_0x141b3a;_0x573f57+=_0x15f3cd[_0x46d69d(0x19d)];const _0x2f4b9c=setTimeout(async()=>{const _0x56c4bd=_0x46d69d;console['log']('ü™ô\x20[TIMER]\x20Individual\x20check\x20#'+(_0x29134e+0x1)+'\x20triggered\x20for\x20payment\x20'+_0x65d3a9+_0x56c4bd(0x12a)+_0x15f3cd['description']+')');try{await this[_0x56c4bd(0x11a)](_0x65d3a9),console[_0x56c4bd(0xe9)](_0x56c4bd(0x1ab)+(_0x29134e+0x1)+'\x20completed\x20for\x20payment\x20'+_0x65d3a9);}catch(_0x38ece0){console[_0x56c4bd(0x13c)]('‚ùå\x20[TIMER]\x20Failed\x20individual\x20check\x20#'+(_0x29134e+0x1)+_0x56c4bd(0xeb)+_0x65d3a9+':',_0x38ece0),this[_0x56c4bd(0x1a1)](_0x65d3a9,_0x493ceb,_0x38ece0,_0x56c4bd(0x147),{'checkNumber':_0x29134e+0x1,'scheduledAfter':_0x15f3cd[_0x56c4bd(0x152)],'isIndividualCheck':!![]});}},_0x573f57);_0x2638c1[_0x46d69d(0xe4)](_0x2f4b9c),console['log'](_0x46d69d(0x17b)+(_0x29134e+0x1)+_0x46d69d(0xeb)+_0x65d3a9+_0x46d69d(0x132)+_0x573f57/0x3e8+_0x46d69d(0xff)+_0x15f3cd[_0x46d69d(0x152)]+')');});const _0x394d47=setInterval(async()=>{const _0x3b7d57=_0x141b3a;console[_0x3b7d57(0xe9)](_0x3b7d57(0x17e)+_0x65d3a9);try{const _0x493fd6=await database_1['default'][_0x3b7d57(0x143)][_0x3b7d57(0xca)]({'where':{'id':_0x65d3a9},'select':{'id':!![],'status':!![],'createdAt':!![],'gatewayPaymentId':!![]}});if(!_0x493fd6){console[_0x3b7d57(0xe9)](_0x3b7d57(0x123)+_0x65d3a9+_0x3b7d57(0x148)),this['clearPaymentTimers'](_0x65d3a9);return;}console[_0x3b7d57(0xe9)]('üìä\x20[HOURLY]\x20Payment\x20'+_0x65d3a9+_0x3b7d57(0x102)+_0x493fd6[_0x3b7d57(0x1bd)]);if(_0x493fd6['status']!==_0x3b7d57(0x115)){console[_0x3b7d57(0xe9)](_0x3b7d57(0x131)+_0x65d3a9+_0x3b7d57(0x176)+_0x493fd6[_0x3b7d57(0x1bd)]+_0x3b7d57(0x181)),this['clearPaymentTimers'](_0x65d3a9);return;}const _0x32bd3f=Math[_0x3b7d57(0x10d)]((Date['now']()-_0x493fd6[_0x3b7d57(0xf6)]['getTime']())/(0x3e8*0x3c*0x3c*0x18));if(_0x32bd3f>=this[_0x3b7d57(0xd6)]){console[_0x3b7d57(0xe9)](_0x3b7d57(0x162)+_0x65d3a9+'\x20is\x20older\x20than\x20'+this[_0x3b7d57(0xd6)]+_0x3b7d57(0x159)),this[_0x3b7d57(0xf5)](_0x65d3a9);return;}await this[_0x3b7d57(0x11a)](_0x65d3a9),console[_0x3b7d57(0xe9)](_0x3b7d57(0x166)+_0x65d3a9);}catch(_0x5d98e8){console[_0x3b7d57(0x13c)](_0x3b7d57(0x1af)+_0x65d3a9+':',_0x5d98e8),this[_0x3b7d57(0x1a1)](_0x65d3a9,_0x493ceb,_0x5d98e8,'status_check',{'isHourlyCheck':!![],'isIndividualCheck':!![]});}},0x3c*0x3c*0x3e8);_0x2638c1[_0x141b3a(0xe4)](_0x394d47),this[_0x141b3a(0x14a)]['set'](_0x65d3a9,{'timers':_0x2638c1,'paymentId':_0x65d3a9,'gatewayPaymentId':_0x493ceb,'createdAt':_0x27d13a}),console['log']('‚úÖ\x20[DEBUG]\x20Successfully\x20scheduled\x20'+_0x1c7341[_0x141b3a(0x117)]+_0x141b3a(0xf3)+_0x65d3a9),console['log'](_0x141b3a(0x15b)+this['paymentTimers'][_0x141b3a(0xe3)]),this[_0x141b3a(0x19e)](_0x65d3a9,_0x493ceb,'PENDING','PENDING',_0x141b3a(0x147),{'action':_0x141b3a(0x1a6),'scheduledChecks':_0x1c7341[_0x141b3a(0x117)],'firstCheckIn':_0x1c7341[0x0][_0x141b3a(0x19d)]/0x3e8,'totalTimers':this[_0x141b3a(0x14a)]['size']});}['clearPaymentTimers'](_0x5294f4){const _0x187b99=a37_0x30fc4a,_0x214b60=this[_0x187b99(0x14a)]['get'](_0x5294f4);_0x214b60?(console[_0x187b99(0xe9)](_0x187b99(0x17a)+_0x214b60[_0x187b99(0x11e)][_0x187b99(0x117)]+'\x20timers\x20for\x20payment\x20'+_0x5294f4),_0x214b60[_0x187b99(0x11e)][_0x187b99(0x1ad)]((_0x3a9403,_0x452efa)=>{const _0x44bd7a=_0x187b99;_0x3a9403&&(clearTimeout(_0x3a9403),clearInterval(_0x3a9403),console[_0x44bd7a(0xe9)]('üßπ\x20[DEBUG]\x20Cleared\x20timer\x20#'+(_0x452efa+0x1)+_0x44bd7a(0xeb)+_0x5294f4));}),this[_0x187b99(0x14a)][_0x187b99(0x193)](_0x5294f4),console[_0x187b99(0xe9)](_0x187b99(0x10b)+_0x5294f4+_0x187b99(0xda)+this['paymentTimers']['size'])):console[_0x187b99(0xe9)](_0x187b99(0x135)+_0x5294f4+_0x187b99(0x15e));}async[a37_0x30fc4a(0x11a)](_0x1b09fb){const _0x37deee=a37_0x30fc4a;console[_0x37deee(0xe9)]('üîç\x20[CHECK]\x20Starting\x20check\x20for\x20payment\x20ID:\x20'+_0x1b09fb);const _0x12e9ae=await database_1['default'][_0x37deee(0x143)][_0x37deee(0xca)]({'where':{'id':_0x1b09fb},'select':{'id':!![],'gatewayPaymentId':!![],'amount':!![],'currency':!![],'status':!![],'shopId':!![],'createdAt':!![],'gateway':!![],'shop':{'select':{'id':!![],'name':!![],'settings':{'select':{'webhookUrl':!![],'webhookEvents':!![]}}}}}});if(!_0x12e9ae){console[_0x37deee(0xe9)]('‚ùå\x20[CHECK]\x20Payment\x20'+_0x1b09fb+_0x37deee(0xfc));return;}console[_0x37deee(0xe9)](_0x37deee(0x1a0)+_0x1b09fb+_0x37deee(0x12c)),console['log'](_0x37deee(0x186)+_0x12e9ae['gateway']),console[_0x37deee(0xe9)]('\x20\x20\x20-\x20Status:\x20'+_0x12e9ae['status']),console[_0x37deee(0xe9)](_0x37deee(0x121)+_0x12e9ae['gatewayPaymentId']),console[_0x37deee(0xe9)](_0x37deee(0x198)+_0x12e9ae[_0x37deee(0xd2)]+'\x20'+_0x12e9ae[_0x37deee(0x103)]),console['log']('\x20\x20\x20-\x20ShopId:\x20'+_0x12e9ae[_0x37deee(0x120)]);if(_0x12e9ae['gateway']!==_0x37deee(0xd0)){console['log']('‚ö†Ô∏è\x20[CHECK]\x20Payment\x20'+_0x1b09fb+_0x37deee(0x140)+_0x12e9ae[_0x37deee(0x15f)]+')');return;}if(_0x12e9ae['status']!==_0x37deee(0x115)){console[_0x37deee(0xe9)]('‚ö†Ô∏è\x20[CHECK]\x20Payment\x20'+_0x1b09fb+_0x37deee(0x176)+_0x12e9ae[_0x37deee(0x1bd)]+_0x37deee(0x181)),this[_0x37deee(0xf5)](_0x1b09fb);return;}if(!_0x12e9ae['gatewayPaymentId']){console['log'](_0x37deee(0xea)+_0x1b09fb+_0x37deee(0x1aa));return;}console[_0x37deee(0xe9)](_0x37deee(0x1a3)+_0x1b09fb+'\x20is\x20valid\x20for\x20checking,\x20proceeding...'),await this[_0x37deee(0x12f)](_0x12e9ae);}[a37_0x30fc4a(0x19e)](_0x1659fe,_0x1aa183,_0x50a131,_0x36a9f3,_0x11afad,_0x145f4a){const _0x3f26e6=a37_0x30fc4a,_0xac0184={'type':_0x3f26e6(0xe0),'paymentId':_0x1659fe,'gatewayPaymentId':_0x1aa183,'oldStatus':_0x50a131,'newStatus':_0x36a9f3,'source':_0x11afad,'timestamp':new Date()[_0x3f26e6(0x1b0)](),'details':_0x145f4a||{}};loggerService_1[_0x3f26e6(0x177)]['logCoinToPayStatus'](_0xac0184),console[_0x3f26e6(0xe9)]('ü™ô\x20[LOG]\x20CoinToPay\x20Status\x20Change:\x20'+_0x1659fe+'\x20('+_0x1aa183+')'),console[_0x3f26e6(0xe9)]('\x20\x20\x20üìä\x20Status:\x20'+_0x50a131+_0x3f26e6(0xcc)+_0x36a9f3),console['log']('\x20\x20\x20üìç\x20Source:\x20'+_0x11afad),console['log'](_0x3f26e6(0xf0)+_0xac0184[_0x3f26e6(0x1b1)]),_0x145f4a&&console[_0x3f26e6(0xe9)](_0x3f26e6(0x155),_0x145f4a);}[a37_0x30fc4a(0x1a1)](_0x3008ee,_0xf9c219,_0x31d7c6,_0xb1f9cd,_0x463c01){const _0x595796=a37_0x30fc4a,_0x571fed={'type':_0x595796(0x18a),'paymentId':_0x3008ee,'gatewayPaymentId':_0xf9c219,'error':_0x31d7c6 instanceof Error?{'message':_0x31d7c6['message'],'stack':_0x31d7c6[_0x595796(0x1a5)]}:_0x31d7c6,'source':_0xb1f9cd,'timestamp':new Date()[_0x595796(0x1b0)](),'context':_0x463c01||{}};loggerService_1[_0x595796(0x177)][_0x595796(0x1a1)](_0x571fed),console[_0x595796(0x13c)](_0x595796(0x158)+_0x3008ee+'\x20('+_0xf9c219+')'),console[_0x595796(0x13c)](_0x595796(0xef)+(_0x31d7c6 instanceof Error?_0x31d7c6['message']:_0x31d7c6)),console[_0x595796(0x13c)](_0x595796(0x130)+_0xb1f9cd),console['error'](_0x595796(0xf0)+_0x571fed[_0x595796(0x1b1)]),_0x463c01&&console[_0x595796(0x13c)]('\x20\x20\x20üìù\x20Context:',_0x463c01);}['startPeriodicStatusCheck'](){const _0xb2a9c4=a37_0x30fc4a;console[_0xb2a9c4(0xe9)](_0xb2a9c4(0x15c)),this[_0xb2a9c4(0x160)]()[_0xb2a9c4(0x1bc)](_0x1fa900=>{const _0x4585c0=_0xb2a9c4;console[_0x4585c0(0x13c)](_0x4585c0(0xd7),_0x1fa900);}),this[_0xb2a9c4(0x119)]=setInterval(async()=>{const _0x51417f=_0xb2a9c4;try{console[_0x51417f(0xe9)](_0x51417f(0x12e)),await this[_0x51417f(0x160)](),console[_0x51417f(0xe9)](_0x51417f(0x14b));}catch(_0xbbc260){console['error']('‚ùå\x20[GLOBAL]\x20Periodic\x20CoinToPay\x20status\x20check\x20failed:',_0xbbc260);}},this[_0xb2a9c4(0x150)]),console[_0xb2a9c4(0xe9)](_0xb2a9c4(0x137));}[a37_0x30fc4a(0x12b)](){const _0x2cfd12=a37_0x30fc4a;console[_0x2cfd12(0xe9)](_0x2cfd12(0xd4));this[_0x2cfd12(0x119)]&&(clearInterval(this[_0x2cfd12(0x119)]),this[_0x2cfd12(0x119)]=null,console[_0x2cfd12(0xe9)](_0x2cfd12(0x168)));const _0x4c5b5b=this[_0x2cfd12(0x14a)][_0x2cfd12(0xe3)];for(const [_0x513818]of this['paymentTimers']){this['clearPaymentTimers'](_0x513818);}console[_0x2cfd12(0xe9)](_0x2cfd12(0x16b)+_0x4c5b5b+_0x2cfd12(0x18e));}async[a37_0x30fc4a(0x160)](){const _0x76d620=a37_0x30fc4a;try{console[_0x76d620(0xe9)]('ü™ô\x20[GLOBAL]\x20Getting\x20all\x20pending\x20CoinToPay\x20payments...');const _0x914d81=await database_1[_0x76d620(0x173)][_0x76d620(0x143)][_0x76d620(0xe6)]({'where':{'gateway':'cointopay','status':_0x76d620(0x115),'gatewayPaymentId':{'not':null}},'select':{'id':!![],'gatewayPaymentId':!![],'amount':!![],'currency':!![],'status':!![],'shopId':!![],'createdAt':!![],'shop':{'select':{'id':!![],'name':!![],'settings':{'select':{'webhookUrl':!![],'webhookEvents':!![]}}}}}});console[_0x76d620(0xe9)](_0x76d620(0x126)+_0x914d81[_0x76d620(0x117)]+_0x76d620(0x194));if(_0x914d81['length']===0x0){console[_0x76d620(0xe9)](_0x76d620(0x108));return;}const _0x24c502=await this[_0x76d620(0x16c)](_0x914d81);console[_0x76d620(0xe9)]('‚è∞\x20[GLOBAL]\x20Found\x20'+_0x24c502[_0x76d620(0x117)]+_0x76d620(0xcf));let _0x5f3bbc=0x0,_0x3d0743=0x0;for(const _0x4aa7d5 of _0x914d81){try{if(_0x24c502['includes'](_0x4aa7d5['id'])){console[_0x76d620(0xe9)]('‚è∞\x20[GLOBAL]\x20Payment\x20'+_0x4aa7d5['id']+'\x20already\x20marked\x20as\x20expired,\x20skipping\x20global\x20check'),_0x3d0743++;continue;}if(this[_0x76d620(0x14a)][_0x76d620(0x18d)](_0x4aa7d5['id'])){console['log'](_0x76d620(0x11d)+_0x4aa7d5['id']+_0x76d620(0x13b)),_0x3d0743++;continue;}const _0xfb3d26=(Date[_0x76d620(0x1b5)]()-_0x4aa7d5[_0x76d620(0xf6)][_0x76d620(0xf2)]())/(0x3e8*0x3c*0x3c);if(_0xfb3d26<0x1){console['log'](_0x76d620(0x11d)+_0x4aa7d5['id']+_0x76d620(0xf9)+_0xfb3d26[_0x76d620(0x105)](0x1)+_0x76d620(0x124)),_0x3d0743++;continue;}console['log'](_0x76d620(0x138)+_0x4aa7d5['id']+'\x20(age:\x20'+_0xfb3d26[_0x76d620(0x105)](0x1)+'h)'),await this[_0x76d620(0x12f)](_0x4aa7d5),_0x5f3bbc++,await new Promise(_0x5412be=>setTimeout(_0x5412be,0x7d0));}catch(_0x241e28){console[_0x76d620(0x13c)](_0x76d620(0x109)+_0x4aa7d5['id']+':',_0x241e28),this[_0x76d620(0x1a1)](_0x4aa7d5['id'],_0x4aa7d5['gatewayPaymentId']||'unknown',_0x241e28,_0x76d620(0x147),{'isGlobalCheck':!![],'paymentAmount':_0x4aa7d5[_0x76d620(0xd2)],'paymentCurrency':_0x4aa7d5['currency'],'shopId':_0x4aa7d5[_0x76d620(0x120)],'createdAt':_0x4aa7d5[_0x76d620(0xf6)]}),loggerService_1['loggerService'][_0x76d620(0x1ba)](_0x76d620(0xd0),_0x76d620(0x144)+_0x4aa7d5[_0x76d620(0x111)],_0x241e28);}}console[_0x76d620(0xe9)](_0x76d620(0x164)+_0x5f3bbc+_0x76d620(0x169)+_0x3d0743+_0x76d620(0xf1)+_0x24c502[_0x76d620(0x117)]+_0x76d620(0x125));}catch(_0x2b0f8d){console[_0x76d620(0x13c)](_0x76d620(0xe8),_0x2b0f8d);}}async['checkExpiredPayments'](_0x4d15c5){const _0x59591c=a37_0x30fc4a,_0x423b2a=[],_0x5af034=new Date();_0x5af034[_0x59591c(0x116)](_0x5af034[_0x59591c(0x179)]()-this[_0x59591c(0xd6)]),console[_0x59591c(0xe9)]('‚è∞\x20[EXPIRY]\x20Checking\x20for\x20CoinToPay\x20payments\x20older\x20than\x20'+this[_0x59591c(0xd6)]+'\x20days\x20(created\x20before\x20'+_0x5af034[_0x59591c(0x1b0)]()+')');for(const _0x4f661e of _0x4d15c5){if(_0x4f661e['createdAt']<_0x5af034){console[_0x59591c(0xe9)]('‚è∞\x20[EXPIRY]\x20Payment\x20'+_0x4f661e['id']+_0x59591c(0x196)+this['EXPIRY_DAYS']+_0x59591c(0xce));try{this[_0x59591c(0x19e)](_0x4f661e['id'],_0x4f661e[_0x59591c(0x111)]||_0x59591c(0x118),_0x59591c(0x115),_0x59591c(0x110),_0x59591c(0x11c),{'reason':_0x59591c(0xfa)+this['EXPIRY_DAYS']+_0x59591c(0x161),'createdAt':_0x4f661e['createdAt'],'daysSinceCreation':Math['floor']((Date[_0x59591c(0x1b5)]()-_0x4f661e[_0x59591c(0xf6)]['getTime']())/(0x3e8*0x3c*0x3c*0x18)),'paymentAmount':_0x4f661e['amount'],'paymentCurrency':_0x4f661e[_0x59591c(0x103)],'shopId':_0x4f661e[_0x59591c(0x120)]}),await database_1[_0x59591c(0x173)][_0x59591c(0x143)][_0x59591c(0x114)]({'where':{'id':_0x4f661e['id']},'data':{'status':_0x59591c(0x110),'updatedAt':new Date(),'adminNotes':_0x59591c(0xfe)+this[_0x59591c(0xd6)]+_0x59591c(0x1b2)}}),await database_1['default']['webhookLog'][_0x59591c(0x134)]({'data':{'paymentId':_0x4f661e['id'],'shopId':_0x4f661e[_0x59591c(0x120)],'event':_0x59591c(0xec),'statusCode':0xc8,'responseBody':JSON[_0x59591c(0xdb)]({'reason':_0x59591c(0xfa)+this['EXPIRY_DAYS']+_0x59591c(0x161),'createdAt':_0x4f661e[_0x59591c(0xf6)],'expiredAt':new Date()[_0x59591c(0x1b0)](),'daysSinceCreation':Math[_0x59591c(0x10d)]((Date[_0x59591c(0x1b5)]()-_0x4f661e[_0x59591c(0xf6)]['getTime']())/(0x3e8*0x3c*0x3c*0x18))})}}),await this['sendShopWebhook'](_0x4f661e,_0x59591c(0x110)),await this[_0x59591c(0xdd)](_0x4f661e,_0x59591c(0x110)),this['clearPaymentTimers'](_0x4f661e['id']),_0x423b2a[_0x59591c(0xe4)](_0x4f661e['id']),console[_0x59591c(0xe9)]('‚úÖ\x20[EXPIRY]\x20Payment\x20'+_0x4f661e['id']+_0x59591c(0x167)+this['EXPIRY_DAYS']+'-day\x20timeout');}catch(_0x5ce593){console[_0x59591c(0x13c)](_0x59591c(0xcd)+_0x4f661e['id']+':',_0x5ce593),this[_0x59591c(0x1a1)](_0x4f661e['id'],_0x4f661e['gatewayPaymentId']||'unknown',_0x5ce593,_0x59591c(0x11c),{'reason':_0x59591c(0x175),'createdAt':_0x4f661e['createdAt'],'daysSinceCreation':Math[_0x59591c(0x10d)]((Date[_0x59591c(0x1b5)]()-_0x4f661e[_0x59591c(0xf6)]['getTime']())/(0x3e8*0x3c*0x3c*0x18))});}}}return _0x423b2a;}async[a37_0x30fc4a(0x12f)](_0xcef636){const _0x52bb61=a37_0x30fc4a;if(!_0xcef636[_0x52bb61(0x111)]){console[_0x52bb61(0xe9)](_0x52bb61(0xea)+_0xcef636['id']+_0x52bb61(0x122));return;}console['log'](_0x52bb61(0x182)+_0xcef636['id']+'\x20('+_0xcef636[_0x52bb61(0x111)]+')');try{const _0x3cf735=await this['coinToPayService'][_0x52bb61(0xd9)](_0xcef636[_0x52bb61(0x111)]);console[_0x52bb61(0xe9)](_0x52bb61(0x1a0)+_0xcef636['id']+'\x20status:\x20'+_0x3cf735[_0x52bb61(0x1bd)]);_0x3cf735[_0x52bb61(0x1b9)]&&console['log'](_0x52bb61(0x1a0)+_0xcef636['id']+_0x52bb61(0xfb),{'iban':_0x3cf735[_0x52bb61(0x1b9)][_0x52bb61(0x185)]||'not\x20found','transactionId':_0x3cf735[_0x52bb61(0x1b9)][_0x52bb61(0x174)],'createdOn':_0x3cf735[_0x52bb61(0x1b9)][_0x52bb61(0xcb)],'confirmedOn':_0x3cf735[_0x52bb61(0x1b9)]['confirmedOn']||_0x52bb61(0x171)});if(_0x3cf735[_0x52bb61(0x1bd)]!==_0xcef636['status']){console[_0x52bb61(0xe9)](_0x52bb61(0x146)+_0xcef636['id']+_0x52bb61(0x107)+_0xcef636[_0x52bb61(0x1bd)]+_0x52bb61(0x157)+_0x3cf735[_0x52bb61(0x1bd)]),this[_0x52bb61(0x19e)](_0xcef636['id'],_0xcef636[_0x52bb61(0x111)],_0xcef636['status'],_0x3cf735[_0x52bb61(0x1bd)],_0x52bb61(0x147),{'paymentDetails':_0x3cf735[_0x52bb61(0x1b9)],'amount':_0x3cf735[_0x52bb61(0xd2)],'currency':_0x3cf735[_0x52bb61(0x103)],'shopId':_0xcef636[_0x52bb61(0x120)],'checkTimestamp':new Date()[_0x52bb61(0x1b0)]()});const _0x183291={'status':_0x3cf735[_0x52bb61(0x1bd)],'updatedAt':new Date()};_0x3cf735[_0x52bb61(0x1bd)]===_0x52bb61(0x10e)&&_0xcef636[_0x52bb61(0x1bd)]!==_0x52bb61(0x10e)&&(_0x183291[_0x52bb61(0x15a)]=new Date(),console[_0x52bb61(0xe9)](_0x52bb61(0x197)+_0xcef636['id']+_0x52bb61(0x14d)+_0x183291[_0x52bb61(0x15a)][_0x52bb61(0x1b0)]()));if(_0x3cf735[_0x52bb61(0x1b9)]){const _0x386cb0=_0x3cf735['paymentDetails'];_0x386cb0[_0x52bb61(0x185)]&&(_0x183291['remitterIban']=_0x386cb0[_0x52bb61(0x185)],console[_0x52bb61(0xe9)](_0x52bb61(0x100)+_0x386cb0[_0x52bb61(0x185)]));if(_0x386cb0['bankDetails']){const _0x23a0c3=_0xcef636[_0x52bb61(0x104)]||'',_0x421b57=_0x52bb61(0x17c)+_0x386cb0[_0x52bb61(0x106)];_0x183291[_0x52bb61(0x104)]=_0x23a0c3?_0x23a0c3+'\x0a\x0a'+_0x421b57:_0x421b57,console[_0x52bb61(0xe9)](_0x52bb61(0x184));}_0x386cb0[_0x52bb61(0x174)]&&console[_0x52bb61(0xe9)](_0x52bb61(0x129)+_0x386cb0[_0x52bb61(0x174)]),_0x386cb0[_0x52bb61(0x13e)]&&console[_0x52bb61(0xe9)](_0x52bb61(0x16e)+_0x386cb0['confirmedOn']);}await database_1[_0x52bb61(0x173)][_0x52bb61(0x143)][_0x52bb61(0x114)]({'where':{'id':_0xcef636['id']},'data':_0x183291}),await database_1[_0x52bb61(0x173)][_0x52bb61(0xdf)][_0x52bb61(0x134)]({'data':{'paymentId':_0xcef636['id'],'shopId':_0xcef636[_0x52bb61(0x120)],'event':'cointopay_status_check_'+_0x3cf735['status'][_0x52bb61(0x141)](),'statusCode':0xc8,'responseBody':JSON[_0x52bb61(0xdb)]({'oldStatus':_0xcef636[_0x52bb61(0x1bd)],'newStatus':_0x3cf735[_0x52bb61(0x1bd)],'paymentDetails':_0x3cf735[_0x52bb61(0x1b9)],'checkedAt':new Date()[_0x52bb61(0x1b0)]()})}}),await this['sendShopWebhook'](_0xcef636,_0x3cf735['status']),await this[_0x52bb61(0xdd)](_0xcef636,_0x3cf735['status']);if(_0x3cf735[_0x52bb61(0x1bd)]==='PAID'&&_0xcef636[_0x52bb61(0x1bd)]!=='PAID')try{const {PaymentLinkService:_0x25780c}=await Promise[_0x52bb61(0xf8)]()[_0x52bb61(0xc9)](()=>__importStar(require(_0x52bb61(0xd8)))),_0x4ec76b=new _0x25780c();await _0x4ec76b[_0x52bb61(0x127)](_0xcef636['id']),console[_0x52bb61(0xe9)]('üìà\x20[CHECK]\x20Payment\x20link\x20counter\x20updated\x20for\x20payment\x20'+_0xcef636['id']);}catch(_0x4d7dfe){console[_0x52bb61(0x13c)](_0x52bb61(0xf4)+_0xcef636['id']+':',_0x4d7dfe);}_0x3cf735[_0x52bb61(0x1bd)]!==_0x52bb61(0x115)&&(console['log'](_0x52bb61(0x190)+_0xcef636['id']+'\x20status\x20changed\x20to\x20'+_0x3cf735[_0x52bb61(0x1bd)]+_0x52bb61(0x1a2)),this[_0x52bb61(0xf5)](_0xcef636['id'])),console[_0x52bb61(0xe9)]('‚úÖ\x20[CHECK]\x20Payment\x20'+_0xcef636['id']+_0x52bb61(0xd5));}else console[_0x52bb61(0xe9)](_0x52bb61(0x1a0)+_0xcef636['id']+'\x20status\x20unchanged\x20('+_0x3cf735[_0x52bb61(0x1bd)]+')'),this[_0x52bb61(0x19e)](_0xcef636['id'],_0xcef636['gatewayPaymentId'],_0xcef636[_0x52bb61(0x1bd)],_0x3cf735['status'],_0x52bb61(0x147),{'statusUnchanged':!![],'paymentDetails':_0x3cf735[_0x52bb61(0x1b9)],'amount':_0x3cf735[_0x52bb61(0xd2)],'currency':_0x3cf735[_0x52bb61(0x103)],'shopId':_0xcef636[_0x52bb61(0x120)],'checkTimestamp':new Date()[_0x52bb61(0x1b0)]()});}catch(_0x297b43){console['error'](_0x52bb61(0x1b3)+_0xcef636['id']+':',_0x297b43),this[_0x52bb61(0x1a1)](_0xcef636['id'],_0xcef636[_0x52bb61(0x111)],_0x297b43,_0x52bb61(0x147),{'paymentAmount':_0xcef636[_0x52bb61(0xd2)],'paymentCurrency':_0xcef636[_0x52bb61(0x103)],'shopId':_0xcef636[_0x52bb61(0x120)],'createdAt':_0xcef636[_0x52bb61(0xf6)]}),await database_1['default'][_0x52bb61(0xdf)][_0x52bb61(0x134)]({'data':{'paymentId':_0xcef636['id'],'shopId':_0xcef636['shopId'],'event':'cointopay_status_check_error','statusCode':0x1f4,'responseBody':JSON[_0x52bb61(0xdb)]({'error':_0x297b43 instanceof Error?_0x297b43[_0x52bb61(0xed)]:'Unknown\x20error','gatewayPaymentId':_0xcef636['gatewayPaymentId'],'checkedAt':new Date()['toISOString']()})}});}}async['sendShopWebhook'](_0x3641d9,_0x24cb86){const _0x1bdded=a37_0x30fc4a,_0x30d24d=Date[_0x1bdded(0x1b5)]();try{const _0x4c445e=_0x3641d9['shop'],_0x185e51=_0x4c445e[_0x1bdded(0x136)];if(!_0x185e51?.['webhookUrl']){console[_0x1bdded(0xe9)]('No\x20webhook\x20URL\x20configured\x20for\x20shop\x20'+_0x4c445e['id']);return;}const _0x53de4d=_0x24cb86==='PAID'?_0x1bdded(0xd3):_0x24cb86===_0x1bdded(0xe7)?_0x1bdded(0x139):_0x24cb86===_0x1bdded(0x110)?_0x1bdded(0x139):_0x1bdded(0x1ac);if(!_0x185e51[_0x1bdded(0x14f)]?.[_0x1bdded(0x142)](_0x53de4d)){console['log'](_0x1bdded(0x195)+_0x53de4d+_0x1bdded(0x1a8)+_0x4c445e['id']);return;}const _0x22c54e={'event':_0x53de4d,'payment':{'id':_0x3641d9['id'],'order_id':_0x3641d9[_0x1bdded(0xd1)],'gateway_order_id':_0x3641d9[_0x1bdded(0x1a4)],'gateway':'0100','amount':_0x3641d9[_0x1bdded(0xd2)],'currency':_0x3641d9[_0x1bdded(0x103)],'status':_0x24cb86[_0x1bdded(0x141)](),'customer_email':_0x3641d9[_0x1bdded(0x1b6)],'customer_name':_0x3641d9['customerName'],'created_at':_0x3641d9[_0x1bdded(0xf6)],'updated_at':new Date()}},_0x1af931=await fetch(_0x185e51[_0x1bdded(0x19f)],{'method':_0x1bdded(0x1b7),'headers':{'Content-Type':_0x1bdded(0x14e),'User-Agent':_0x1bdded(0x113)},'body':JSON['stringify'](_0x22c54e)}),_0x12c02f=Date[_0x1bdded(0x1b5)]()-_0x30d24d,_0x72d088=_0x1af931['ok']?'Success':await _0x1af931[_0x1bdded(0x13f)]();loggerService_1[_0x1bdded(0x177)][_0x1bdded(0x14c)](_0x3641d9[_0x1bdded(0x120)],_0x185e51['webhookUrl'],_0x53de4d,_0x1af931[_0x1bdded(0x1bd)],_0x12c02f,_0x22c54e),console[_0x1bdded(0xe9)](_0x1bdded(0x170)+_0x185e51[_0x1bdded(0x19f)]+_0x1bdded(0x15d)+_0x1af931[_0x1bdded(0x1bd)]+'\x20('+_0x12c02f+'ms)');}catch(_0x2da0bb){console['error'](_0x1bdded(0x145),_0x2da0bb),loggerService_1[_0x1bdded(0x177)]['logShopWebhookError'](_0x3641d9[_0x1bdded(0x120)],_0x3641d9[_0x1bdded(0x19c)]?.[_0x1bdded(0x136)]?.['webhookUrl']||_0x1bdded(0x118),_0x1bdded(0x19b),_0x2da0bb,{});}}async['sendPaymentStatusNotification'](_0x20fdde,_0xfa2b43){const _0x13f8ad=a37_0x30fc4a;try{const _0xf57afd={'PENDING':'created','PAID':_0x13f8ad(0xde),'FAILED':'failed','EXPIRED':_0x13f8ad(0xe2)},_0x379ed5=_0xf57afd[_0xfa2b43];if(!_0x379ed5||_0x379ed5===_0x13f8ad(0x16d))return;await telegramBotService_1[_0x13f8ad(0x10a)][_0x13f8ad(0x10c)](_0x20fdde['shopId'],_0x20fdde,_0x379ed5);}catch(_0x308c82){console['error'](_0x13f8ad(0x13a),_0x308c82);}}async[a37_0x30fc4a(0x16f)](_0x12b18e){const _0x46cdfe=a37_0x30fc4a;console[_0x46cdfe(0xe9)](_0x46cdfe(0xe5)+_0x12b18e);const _0x1c20d4=await database_1[_0x46cdfe(0x173)][_0x46cdfe(0x143)]['findUnique']({'where':{'id':_0x12b18e},'include':{'shop':{'select':{'id':!![],'name':!![],'settings':{'select':{'webhookUrl':!![],'webhookEvents':!![]}}}}}});if(!_0x1c20d4)throw new Error('Payment\x20not\x20found');if(_0x1c20d4[_0x46cdfe(0x15f)]!==_0x46cdfe(0xd0))throw new Error(_0x46cdfe(0x10f));console[_0x46cdfe(0xe9)]('‚úÖ\x20[MANUAL]\x20Starting\x20manual\x20check\x20for\x20CoinToPay\x20payment\x20'+_0x12b18e),await this[_0x46cdfe(0x12f)](_0x1c20d4),console[_0x46cdfe(0xe9)](_0x46cdfe(0x1a7)+_0x12b18e);}[a37_0x30fc4a(0xdc)](){const _0x284532=a37_0x30fc4a,_0x4cfe8a=this['globalCheckInterval']?this[_0x284532(0x150)]:undefined,_0x475014=Array[_0x284532(0x18f)](this[_0x284532(0x14a)][_0x284532(0x12d)]())['map'](_0xa9da3d=>({'paymentId':_0xa9da3d[_0x284532(0x19a)],'gatewayPaymentId':_0xa9da3d[_0x284532(0x111)],'createdAt':_0xa9da3d[_0x284532(0xf6)],'timersCount':_0xa9da3d[_0x284532(0x11e)][_0x284532(0x117)]}));return{'isActive':!!this[_0x284532(0x119)],'globalCheckIntervalMinutes':this[_0x284532(0x150)]/(0x3e8*0x3c),'expiryDays':this[_0x284532(0xd6)],'activeIndividualTimers':this[_0x284532(0x14a)][_0x284532(0xe3)],'nextGlobalCheckIn':_0x4cfe8a,'paymentTimersDetails':_0x475014};}[a37_0x30fc4a(0x13d)](_0x1b732c){const _0x426170=a37_0x30fc4a,_0x439898=this[_0x426170(0x14a)][_0x426170(0x128)](_0x1b732c);if(_0x439898)return{'hasTimers':!![],'timersCount':_0x439898['timers'][_0x426170(0x117)],'createdAt':_0x439898[_0x426170(0xf6)],'gatewayPaymentId':_0x439898[_0x426170(0x111)]};return{'hasTimers':![]};}}exports[a37_0x30fc4a(0x165)]=CoinToPayStatusService,exports['coinToPayStatusService']=new CoinToPayStatusService();function a37_0x319f(_0x1de4ec,_0x48e7f0){const _0x628810=a37_0x6288();return a37_0x319f=function(_0x319f2a,_0x2da438){_0x319f2a=_0x319f2a-0xc9;let _0x5a3616=_0x628810[_0x319f2a];return _0x5a3616;},a37_0x319f(_0x1de4ec,_0x48e7f0);}function a37_0x6288(){const _0x20410b=['error','getPaymentTimerInfo','confirmedOn','text','\x20is\x20not\x20a\x20CoinToPay\x20payment\x20(gateway:\x20','toLowerCase','includes','payment','/status/','Failed\x20to\x20send\x20shop\x20webhook:','üîÑ\x20[CHECK]\x20Updating\x20payment\x20','status_check','\x20not\x20found,\x20clearing\x20timers','schedulePaymentChecks','paymentTimers','‚úÖ\x20[GLOBAL]\x20Global\x20check\x20cycle\x20completed','logShopWebhookSent','\x20marked\x20as\x20paid\x20at:\x20','application/json','webhookEvents','GLOBAL_CHECK_INTERVAL_MS','./telegramBotService','description','338864uWlHBV','210TsTcXJ','\x20\x20\x20üìù\x20Details:','\x20\x20\x20-\x20paymentId:\x20','\x20to\x20','ü™ô\x20[ERROR]\x20CoinToPay\x20Error:\x20','\x20days,\x20will\x20be\x20handled\x20by\x20global\x20expiry\x20check','paidAt','üìä\x20[DEBUG]\x20Total\x20active\x20payment\x20timers:\x20','ü™ô\x20[INIT]\x20Starting\x20CoinToPay\x20periodic\x20status\x20checking\x20(global\x20checks\x20every\x201\x20hour)','\x20with\x20status\x20','\x20to\x20clear','gateway','checkAllPendingPayments','\x20days','‚è∞\x20[HOURLY]\x20Payment\x20','ü™ô\x20CoinToPayStatusService\x20initialized','‚úÖ\x20[GLOBAL]\x20Global\x20check\x20completed:\x20','CoinToPayStatusService','‚úÖ\x20[HOURLY]\x20Hourly\x20check\x20completed\x20for\x20payment\x20','\x20marked\x20as\x20EXPIRED\x20due\x20to\x20','üõë\x20[SHUTDOWN]\x20CoinToPay\x20global\x20status\x20checking\x20stopped','\x20checked,\x20','__esModule','üõë\x20[SHUTDOWN]\x20Cleared\x20','checkExpiredPayments','created','‚úÖ\x20[CHECK]\x20Transaction\x20confirmed\x20on:\x20','checkPaymentById','Shop\x20webhook\x20sent\x20to\x20','not\x20confirmed','getOwnPropertyDescriptor','default','transactionId','Failed\x20to\x20mark\x20payment\x20as\x20expired','\x20status\x20is\x20','loggerService','coinToPayStatusService','getDate','üßπ\x20[DEBUG]\x20Clearing\x20','‚è∞\x20[DEBUG]\x20Scheduled\x20check\x20#','Bank\x20Details:\x20','\x20initial\x20timers\x20for\x20payment\x20','ü™ô\x20[HOURLY]\x20Hourly\x20check\x20triggered\x20for\x20payment\x20','./gateways/coinToPayService','1\x20minute',',\x20stopping\x20individual\x20checks','üîç\x20[CHECK]\x20Checking\x20CoinToPay\x20payment\x20','call','üè¶\x20[CHECK]\x20Saved\x20bank\x20details\x20to\x20admin\x20notes','iban','\x20\x20\x20-\x20Gateway:\x20','configurable','1661336qublwv','5\x20minutes','COINTOPAY_ERROR','../config/database','CoinToPayService','has','\x20individual\x20payment\x20timers','from','üßπ\x20[CHECK]\x20Payment\x20','2\x20minutes','coinToPayService','delete','\x20pending\x20CoinToPay\x20payments','Webhook\x20event\x20','\x20is\x20older\x20than\x20','üí∞\x20[CHECK]\x20Payment\x20','\x20\x20\x20-\x20Amount:\x20','1353951OqpXuf','paymentId','webhook_send','shop','delay','logCoinToPayStatus','webhookUrl','üìä\x20[CHECK]\x20Payment\x20','logCoinToPayError',',\x20clearing\x20individual\x20timers','‚úÖ\x20[CHECK]\x20Payment\x20','gatewayOrderId','stack','schedule_created','‚úÖ\x20[MANUAL]\x20Manual\x20check\x20completed\x20for\x20payment\x20','\x20not\x20enabled\x20for\x20shop\x20','__importDefault','\x20has\x20no\x20gatewayPaymentId','‚úÖ\x20[TIMER]\x20Individual\x20check\x20#','payment.pending','forEach','1165038LMnUGP','‚ùå\x20[HOURLY]\x20Failed\x20hourly\x20check\x20for\x20payment\x20','toISOString','timestamp','\x20days\x20without\x20payment\x20confirmation','‚ùå\x20[CHECK]\x20Failed\x20to\x20check\x20payment\x20','./loggerService','now','customerEmail','POST','defineProperty','paymentDetails','logWhiteDomainError','writable','catch','status','then','findUnique','createdOn','\x20->\x20','‚ùå\x20[EXPIRY]\x20Failed\x20to\x20expire\x20payment\x20','\x20days,\x20marking\x20as\x20EXPIRED','\x20expired\x20CoinToPay\x20payments','cointopay','orderId','amount','payment.success','üõë\x20[SHUTDOWN]\x20Stopping\x20CoinToPay\x20status\x20checking\x20service...','\x20updated\x20successfully','EXPIRY_DAYS','‚ùå\x20[INIT]\x20Initial\x20CoinToPay\x20status\x20check\x20failed:','./paymentLinkService','checkPaymentStatus','.\x20Remaining\x20active\x20timers:\x20','stringify','getServiceStats','sendPaymentStatusNotification','paid','webhookLog','COINTOPAY_STATUS_CHANGE','11464830SQNaoC','expired','size','push','üîç\x20[MANUAL]\x20Manual\x20check\x20requested\x20for\x20payment:\x20','findMany','FAILED','‚ùå\x20[GLOBAL]\x20Failed\x20to\x20get\x20pending\x20CoinToPay\x20payments:','log','‚ö†Ô∏è\x20[CHECK]\x20Payment\x20','\x20for\x20payment\x20','cointopay_auto_expired','message','__setModuleDefault','\x20\x20\x20‚ùå\x20Error:\x20','\x20\x20\x20üìÖ\x20Time:\x20','\x20skipped,\x20','getTime','\x20initial\x20checks\x20+\x20hourly\x20checks\x20for\x20payment\x20','‚ùå\x20[CHECK]\x20Failed\x20to\x20update\x20payment\x20link\x20counter\x20for\x20payment\x20','clearPaymentTimers','createdAt','1sNqkPc','resolve','\x20is\x20too\x20new\x20(','Payment\x20older\x20than\x20','\x20details:','\x20not\x20found\x20in\x20database','hasOwnProperty','Automatically\x20expired\x20after\x20','\x20seconds\x20(','üè¶\x20[CHECK]\x20Saved\x20IBAN:\x20','795210nxehtZ','\x20current\x20status:\x20','currency','adminNotes','toFixed','bankDetails','\x20status\x20from\x20','ü™ô\x20[GLOBAL]\x20No\x20pending\x20CoinToPay\x20payments\x20to\x20check','‚ùå\x20[GLOBAL]\x20Failed\x20to\x20check\x20CoinToPay\x20payment\x20','telegramBotService','‚úÖ\x20[DEBUG]\x20All\x20timers\x20cleared\x20for\x20payment\x20','sendPaymentNotification','floor','PAID','Payment\x20is\x20not\x20a\x20CoinToPay\x20payment','EXPIRED','gatewayPaymentId','prototype','TesSoft\x20Payment\x20System/1.0','update','PENDING','setDate','length','unknown','globalCheckInterval','checkSinglePaymentById','getOwnPropertyNames','auto_expire','‚è∞\x20[GLOBAL]\x20Payment\x20','timers','54719OUKgbR','shopId','\x20\x20\x20-\x20GatewayPaymentId:\x20','\x20has\x20no\x20gatewayPaymentId,\x20skipping','‚ùå\x20[HOURLY]\x20Payment\x20','h),\x20skipping\x20global\x20check','\x20expired','ü™ô\x20[GLOBAL]\x20Found\x20','handleSuccessfulPayment','get','üÜî\x20[CHECK]\x20Transaction\x20ID:\x20','\x20(after\x20','stopPeriodicStatusCheck','\x20found:','values','ü™ô\x20[GLOBAL]\x20Starting\x20global\x20check\x20cycle...','checkSinglePayment','\x20\x20\x20üìç\x20Source:\x20','‚úÖ\x20[HOURLY]\x20Payment\x20','\x20in\x20','ü™ô\x20[DEBUG]\x20Creating\x20','create','‚ö†Ô∏è\x20[DEBUG]\x20No\x20timers\x20found\x20for\x20payment\x20','settings','‚úÖ\x20[INIT]\x20CoinToPay\x20status\x20checking\x20service\x20started\x20(global\x20hourly\x20checks\x20+\x20individual\x20payment\x20timers)','üîç\x20[GLOBAL]\x20Checking\x20old\x20payment\x20','payment.failed','Failed\x20to\x20send\x20Telegram\x20payment\x20notification:','\x20has\x20individual\x20timers,\x20skipping\x20global\x20check'];a37_0x6288=function(){return _0x20410b;};return a37_0x6288();}