'use strict';const a35_0x5e86bb=a35_0x3bd5;(function(_0x4f71d0,_0x3ffee3){const _0x2f6438=a35_0x3bd5,_0x23e616=_0x4f71d0();while(!![]){try{const _0x18486f=-parseInt(_0x2f6438(0x1e0))/0x1*(parseInt(_0x2f6438(0x21f))/0x2)+-parseInt(_0x2f6438(0x26b))/0x3*(-parseInt(_0x2f6438(0x1d3))/0x4)+parseInt(_0x2f6438(0x237))/0x5*(-parseInt(_0x2f6438(0x1d5))/0x6)+parseInt(_0x2f6438(0x230))/0x7*(parseInt(_0x2f6438(0x1ed))/0x8)+-parseInt(_0x2f6438(0x247))/0x9*(-parseInt(_0x2f6438(0x204))/0xa)+parseInt(_0x2f6438(0x1f0))/0xb+-parseInt(_0x2f6438(0x203))/0xc;if(_0x18486f===_0x3ffee3)break;else _0x23e616['push'](_0x23e616['shift']());}catch(_0x509814){_0x23e616['push'](_0x23e616['shift']());}}}(a35_0x7541,0xde09d));var __importDefault=this&&this[a35_0x5e86bb(0x22f)]||function(_0x74a9d2){return _0x74a9d2&&_0x74a9d2['__esModule']?_0x74a9d2:{'default':_0x74a9d2};};function a35_0x3bd5(_0xfed3e3,_0x4c489a){const _0x754109=a35_0x7541();return a35_0x3bd5=function(_0x3bd56f,_0x3a7c5c){_0x3bd56f=_0x3bd56f-0x1d2;let _0x51780f=_0x754109[_0x3bd56f];return _0x51780f;},a35_0x3bd5(_0xfed3e3,_0x4c489a);}Object['defineProperty'](exports,a35_0x5e86bb(0x1fa),{'value':!![]}),exports[a35_0x5e86bb(0x212)]=exports[a35_0x5e86bb(0x23b)]=void 0x0;const coinToPayService_1=require(a35_0x5e86bb(0x25e)),database_1=__importDefault(require(a35_0x5e86bb(0x218))),telegramBotService_1=require(a35_0x5e86bb(0x1d6)),loggerService_1=require(a35_0x5e86bb(0x222));class CoinToPayStatusService{constructor(){const _0x5c2773=a35_0x5e86bb;this[_0x5c2773(0x275)]=null,this[_0x5c2773(0x216)]=0x3c*0x3c*0x3e8,this[_0x5c2773(0x1d2)]=0x5,this[_0x5c2773(0x23f)]=new coinToPayService_1['CoinToPayService']();}[a35_0x5e86bb(0x227)](_0x554c07,_0x161cd6,_0x599466,_0x5edc7c,_0x46bb96,_0x59c16f){const _0x116652=a35_0x5e86bb,_0x2feb0b={'type':_0x116652(0x1f7),'paymentId':_0x554c07,'gatewayPaymentId':_0x161cd6,'oldStatus':_0x599466,'newStatus':_0x5edc7c,'source':_0x46bb96,'timestamp':new Date()[_0x116652(0x268)](),'details':_0x59c16f||{}};loggerService_1[_0x116652(0x238)][_0x116652(0x227)](_0x2feb0b),console[_0x116652(0x241)]('🪙\x20CoinToPay\x20Status\x20Change:\x20'+_0x554c07+'\x20('+_0x161cd6+')'),console[_0x116652(0x241)](_0x116652(0x1f4)+_0x599466+_0x116652(0x217)+_0x5edc7c),console['log'](_0x116652(0x1f3)+_0x46bb96),console[_0x116652(0x241)](_0x116652(0x208)+_0x2feb0b['timestamp']),_0x59c16f&&console[_0x116652(0x241)](_0x116652(0x253),_0x59c16f);}[a35_0x5e86bb(0x1f6)](_0x33e229,_0x206a7d,_0x1ca5a4,_0xb60ac0,_0x2eab6e){const _0x568ff7=a35_0x5e86bb,_0x26e94e={'type':_0x568ff7(0x20e),'paymentId':_0x33e229,'gatewayPaymentId':_0x206a7d,'error':_0x1ca5a4 instanceof Error?{'message':_0x1ca5a4[_0x568ff7(0x20d)],'stack':_0x1ca5a4[_0x568ff7(0x236)]}:_0x1ca5a4,'source':_0xb60ac0,'timestamp':new Date()[_0x568ff7(0x268)](),'context':_0x2eab6e||{}};loggerService_1[_0x568ff7(0x238)][_0x568ff7(0x1f6)](_0x26e94e),console['error']('🪙\x20CoinToPay\x20Error:\x20'+_0x33e229+'\x20('+_0x206a7d+')'),console[_0x568ff7(0x1ee)](_0x568ff7(0x21a)+(_0x1ca5a4 instanceof Error?_0x1ca5a4[_0x568ff7(0x20d)]:_0x1ca5a4)),console['error'](_0x568ff7(0x1f3)+_0xb60ac0),console['error'](_0x568ff7(0x208)+_0x26e94e[_0x568ff7(0x244)]),_0x2eab6e&&console[_0x568ff7(0x1ee)](_0x568ff7(0x206),_0x2eab6e);}['startPeriodicStatusCheck'](){const _0x1b3e1a=a35_0x5e86bb;console['log'](_0x1b3e1a(0x1e7)),this[_0x1b3e1a(0x1dd)]()[_0x1b3e1a(0x278)](_0x5e6aa4=>{const _0x91f99d=_0x1b3e1a;console[_0x91f99d(0x1ee)](_0x91f99d(0x25f),_0x5e6aa4);}),this[_0x1b3e1a(0x275)]=setInterval(async()=>{const _0x57ceb9=_0x1b3e1a;try{await this['checkAllPendingPayments']();}catch(_0x364015){console[_0x57ceb9(0x1ee)](_0x57ceb9(0x252),_0x364015);}},this[_0x1b3e1a(0x216)]),console[_0x1b3e1a(0x241)](_0x1b3e1a(0x258));}[a35_0x5e86bb(0x20c)](){const _0x3f9468=a35_0x5e86bb;this[_0x3f9468(0x275)]&&(clearInterval(this['checkInterval']),this[_0x3f9468(0x275)]=null,console['log'](_0x3f9468(0x1e2)));}async[a35_0x5e86bb(0x1dd)](){const _0x557416=a35_0x5e86bb;try{const _0x132bcc=await database_1[_0x557416(0x1ea)][_0x557416(0x1e9)]['findMany']({'where':{'gateway':_0x557416(0x21c),'status':_0x557416(0x256),'gatewayPaymentId':{'not':null}},'select':{'id':!![],'gatewayPaymentId':!![],'amount':!![],'currency':!![],'status':!![],'shopId':!![],'createdAt':!![],'shop':{'select':{'id':!![],'name':!![],'settings':{'select':{'webhookUrl':!![],'webhookEvents':!![]}}}}}});if(_0x132bcc[_0x557416(0x25a)]===0x0){console[_0x557416(0x241)](_0x557416(0x23a));return;}console['log']('🪙\x20Checking\x20'+_0x132bcc['length']+_0x557416(0x22d));const _0x1eed47=await this[_0x557416(0x20a)](_0x132bcc);console[_0x557416(0x241)](_0x557416(0x201)+_0x1eed47[_0x557416(0x25a)]+_0x557416(0x1df));for(const _0x1bbbfe of _0x132bcc){try{if(_0x1eed47[_0x557416(0x242)](_0x1bbbfe['id'])){console['log'](_0x557416(0x1f1)+_0x1bbbfe['id']+_0x557416(0x243));continue;}await this[_0x557416(0x1eb)](_0x1bbbfe),await new Promise(_0x3ddad4=>setTimeout(_0x3ddad4,0x7d0));}catch(_0x3ebaa7){console[_0x557416(0x1ee)]('Failed\x20to\x20check\x20CoinToPay\x20payment\x20'+_0x1bbbfe['id']+':',_0x3ebaa7),this[_0x557416(0x1f6)](_0x1bbbfe['id'],_0x1bbbfe[_0x557416(0x219)]||_0x557416(0x272),_0x3ebaa7,_0x557416(0x25d),{'paymentAmount':_0x1bbbfe[_0x557416(0x250)],'paymentCurrency':_0x1bbbfe[_0x557416(0x22c)],'shopId':_0x1bbbfe['shopId'],'createdAt':_0x1bbbfe[_0x557416(0x249)]}),loggerService_1['loggerService'][_0x557416(0x257)](_0x557416(0x21c),_0x557416(0x25c)+_0x1bbbfe[_0x557416(0x219)],_0x3ebaa7);}}console[_0x557416(0x241)](_0x557416(0x26a)+_0x132bcc[_0x557416(0x25a)]+_0x557416(0x1de));}catch(_0x357225){console['error']('Failed\x20to\x20get\x20pending\x20CoinToPay\x20payments:',_0x357225);}}async[a35_0x5e86bb(0x20a)](_0x50d14c){const _0x362f72=a35_0x5e86bb,_0x2f6fe8=[],_0x2250e4=new Date();_0x2250e4[_0x362f72(0x239)](_0x2250e4[_0x362f72(0x24a)]()-this['EXPIRY_DAYS']),console[_0x362f72(0x241)](_0x362f72(0x1f2)+this[_0x362f72(0x1d2)]+'\x20days\x20(created\x20before\x20'+_0x2250e4[_0x362f72(0x268)]()+')');for(const _0x24633a of _0x50d14c){if(_0x24633a[_0x362f72(0x249)]<_0x2250e4){console[_0x362f72(0x241)](_0x362f72(0x1f1)+_0x24633a['id']+_0x362f72(0x21d)+this[_0x362f72(0x1d2)]+_0x362f72(0x254));try{this[_0x362f72(0x227)](_0x24633a['id'],_0x24633a[_0x362f72(0x219)]||_0x362f72(0x272),'PENDING',_0x362f72(0x1d9),'auto_expire',{'reason':_0x362f72(0x1ec)+this['EXPIRY_DAYS']+_0x362f72(0x1dc),'createdAt':_0x24633a[_0x362f72(0x249)],'daysSinceCreation':Math[_0x362f72(0x26d)]((Date[_0x362f72(0x248)]()-_0x24633a[_0x362f72(0x249)][_0x362f72(0x265)]())/(0x3e8*0x3c*0x3c*0x18)),'paymentAmount':_0x24633a[_0x362f72(0x250)],'paymentCurrency':_0x24633a[_0x362f72(0x22c)],'shopId':_0x24633a[_0x362f72(0x263)]}),await database_1[_0x362f72(0x1ea)][_0x362f72(0x1e9)][_0x362f72(0x215)]({'where':{'id':_0x24633a['id']},'data':{'status':_0x362f72(0x1d9),'updatedAt':new Date(),'adminNotes':_0x362f72(0x26f)+this[_0x362f72(0x1d2)]+_0x362f72(0x214)}}),await database_1[_0x362f72(0x1ea)]['webhookLog'][_0x362f72(0x224)]({'data':{'paymentId':_0x24633a['id'],'shopId':_0x24633a[_0x362f72(0x263)],'event':'cointopay_auto_expired','statusCode':0xc8,'responseBody':JSON[_0x362f72(0x24f)]({'reason':'Payment\x20older\x20than\x20'+this['EXPIRY_DAYS']+'\x20days','createdAt':_0x24633a[_0x362f72(0x249)],'expiredAt':new Date()['toISOString'](),'daysSinceCreation':Math['floor']((Date[_0x362f72(0x248)]()-_0x24633a[_0x362f72(0x249)][_0x362f72(0x265)]())/(0x3e8*0x3c*0x3c*0x18))})}}),await this[_0x362f72(0x1d7)](_0x24633a,_0x362f72(0x1d9)),await this[_0x362f72(0x211)](_0x24633a,'EXPIRED'),_0x2f6fe8[_0x362f72(0x251)](_0x24633a['id']),console[_0x362f72(0x241)]('✅\x20Payment\x20'+_0x24633a['id']+_0x362f72(0x228)+this[_0x362f72(0x1d2)]+_0x362f72(0x22e));}catch(_0x559628){console[_0x362f72(0x1ee)](_0x362f72(0x266)+_0x24633a['id']+':',_0x559628),this[_0x362f72(0x1f6)](_0x24633a['id'],_0x24633a['gatewayPaymentId']||'unknown',_0x559628,_0x362f72(0x270),{'reason':_0x362f72(0x1db),'createdAt':_0x24633a[_0x362f72(0x249)],'daysSinceCreation':Math[_0x362f72(0x26d)]((Date['now']()-_0x24633a['createdAt'][_0x362f72(0x265)]())/(0x3e8*0x3c*0x3c*0x18))});}}}return _0x2f6fe8;}async[a35_0x5e86bb(0x1eb)](_0x3ca435){const _0x300272=a35_0x5e86bb;if(!_0x3ca435[_0x300272(0x219)]){console[_0x300272(0x241)]('⚠️\x20Payment\x20'+_0x3ca435['id']+_0x300272(0x213));return;}console[_0x300272(0x241)](_0x300272(0x276)+_0x3ca435['id']+'\x20('+_0x3ca435[_0x300272(0x219)]+')');try{const _0x2aa20e=await this[_0x300272(0x23f)][_0x300272(0x202)](_0x3ca435['gatewayPaymentId']);console['log'](_0x300272(0x1e1)+_0x3ca435['id']+_0x300272(0x1e5)+_0x2aa20e['status']);_0x2aa20e[_0x300272(0x210)]&&console[_0x300272(0x241)](_0x300272(0x1e1)+_0x3ca435['id']+_0x300272(0x274),{'iban':_0x2aa20e[_0x300272(0x210)][_0x300272(0x22b)]||'not\x20found','transactionId':_0x2aa20e[_0x300272(0x210)][_0x300272(0x234)],'createdOn':_0x2aa20e[_0x300272(0x210)][_0x300272(0x240)],'confirmedOn':_0x2aa20e[_0x300272(0x210)][_0x300272(0x20f)]||_0x300272(0x26c)});if(_0x2aa20e['status']!==_0x3ca435['status']){console[_0x300272(0x241)](_0x300272(0x225)+_0x3ca435['id']+_0x300272(0x26e)+_0x3ca435[_0x300272(0x24b)]+_0x300272(0x1d4)+_0x2aa20e[_0x300272(0x24b)]),this[_0x300272(0x227)](_0x3ca435['id'],_0x3ca435[_0x300272(0x219)],_0x3ca435[_0x300272(0x24b)],_0x2aa20e[_0x300272(0x24b)],_0x300272(0x25d),{'paymentDetails':_0x2aa20e[_0x300272(0x210)],'amount':_0x2aa20e[_0x300272(0x250)],'currency':_0x2aa20e[_0x300272(0x22c)],'shopId':_0x3ca435['shopId'],'checkTimestamp':new Date()['toISOString']()});const _0x732906={'status':_0x2aa20e[_0x300272(0x24b)],'updatedAt':new Date()};_0x2aa20e[_0x300272(0x24b)]==='PAID'&&_0x3ca435['status']!=='PAID'&&(_0x732906['paidAt']=new Date(),console[_0x300272(0x241)](_0x300272(0x269)+_0x3ca435['id']+_0x300272(0x1f9)+_0x732906[_0x300272(0x1fb)][_0x300272(0x268)]()));if(_0x2aa20e[_0x300272(0x210)]){const _0x20ba76=_0x2aa20e[_0x300272(0x210)];_0x20ba76['iban']&&(_0x732906[_0x300272(0x1ef)]=_0x20ba76[_0x300272(0x22b)],console[_0x300272(0x241)]('🏦\x20Saved\x20IBAN:\x20'+_0x20ba76[_0x300272(0x22b)]));if(_0x20ba76[_0x300272(0x1fe)]){const _0x4fae5e=_0x3ca435['adminNotes']||'',_0x395d86=_0x300272(0x1f5)+_0x20ba76[_0x300272(0x1fe)];_0x732906[_0x300272(0x273)]=_0x4fae5e?_0x4fae5e+'\x0a\x0a'+_0x395d86:_0x395d86,console[_0x300272(0x241)](_0x300272(0x1ff));}_0x20ba76[_0x300272(0x234)]&&console['log']('🆔\x20Transaction\x20ID:\x20'+_0x20ba76['transactionId']),_0x20ba76[_0x300272(0x20f)]&&console[_0x300272(0x241)]('✅\x20Transaction\x20confirmed\x20on:\x20'+_0x20ba76[_0x300272(0x20f)]);}await database_1['default']['payment'][_0x300272(0x215)]({'where':{'id':_0x3ca435['id']},'data':_0x732906}),await database_1['default'][_0x300272(0x1e8)][_0x300272(0x224)]({'data':{'paymentId':_0x3ca435['id'],'shopId':_0x3ca435['shopId'],'event':_0x300272(0x1e6)+_0x2aa20e[_0x300272(0x24b)][_0x300272(0x25b)](),'statusCode':0xc8,'responseBody':JSON['stringify']({'oldStatus':_0x3ca435[_0x300272(0x24b)],'newStatus':_0x2aa20e[_0x300272(0x24b)],'paymentDetails':_0x2aa20e[_0x300272(0x210)],'checkedAt':new Date()[_0x300272(0x268)]()})}}),await this[_0x300272(0x1d7)](_0x3ca435,_0x2aa20e[_0x300272(0x24b)]),await this[_0x300272(0x211)](_0x3ca435,_0x2aa20e[_0x300272(0x24b)]),console['log']('✅\x20Payment\x20'+_0x3ca435['id']+_0x300272(0x21b));}else console[_0x300272(0x241)]('📊\x20Payment\x20'+_0x3ca435['id']+_0x300272(0x260)+_0x2aa20e[_0x300272(0x24b)]+')'),this[_0x300272(0x227)](_0x3ca435['id'],_0x3ca435[_0x300272(0x219)],_0x3ca435[_0x300272(0x24b)],_0x2aa20e[_0x300272(0x24b)],_0x300272(0x25d),{'statusUnchanged':!![],'paymentDetails':_0x2aa20e[_0x300272(0x210)],'amount':_0x2aa20e[_0x300272(0x250)],'currency':_0x2aa20e['currency'],'shopId':_0x3ca435[_0x300272(0x263)],'checkTimestamp':new Date()[_0x300272(0x268)]()});}catch(_0x3092d3){console['error'](_0x300272(0x264)+_0x3ca435['id']+':',_0x3092d3),this[_0x300272(0x1f6)](_0x3ca435['id'],_0x3ca435[_0x300272(0x219)],_0x3092d3,_0x300272(0x25d),{'paymentAmount':_0x3ca435[_0x300272(0x250)],'paymentCurrency':_0x3ca435['currency'],'shopId':_0x3ca435[_0x300272(0x263)],'createdAt':_0x3ca435['createdAt']}),await database_1['default'][_0x300272(0x1e8)][_0x300272(0x224)]({'data':{'paymentId':_0x3ca435['id'],'shopId':_0x3ca435['shopId'],'event':_0x300272(0x24d),'statusCode':0x1f4,'responseBody':JSON['stringify']({'error':_0x3092d3 instanceof Error?_0x3092d3[_0x300272(0x20d)]:_0x300272(0x261),'gatewayPaymentId':_0x3ca435[_0x300272(0x219)],'checkedAt':new Date()['toISOString']()})}});}}async[a35_0x5e86bb(0x1d7)](_0x13e3e7,_0x34558b){const _0x8de9f0=a35_0x5e86bb,_0xea1778=Date['now']();try{const _0x34e209=_0x13e3e7['shop'],_0x25442d=_0x34e209['settings'];if(!_0x25442d?.['webhookUrl']){console['log'](_0x8de9f0(0x207)+_0x34e209['id']);return;}const _0x5481dc=_0x34558b===_0x8de9f0(0x235)?_0x8de9f0(0x205):_0x34558b===_0x8de9f0(0x277)?_0x8de9f0(0x221):_0x34558b==='EXPIRED'?_0x8de9f0(0x221):'payment.pending';if(!_0x25442d[_0x8de9f0(0x1d8)]?.[_0x8de9f0(0x242)](_0x5481dc)){console[_0x8de9f0(0x241)](_0x8de9f0(0x22a)+_0x5481dc+_0x8de9f0(0x255)+_0x34e209['id']);return;}const _0x2ef441={'event':_0x5481dc,'payment':{'id':_0x13e3e7['id'],'order_id':_0x13e3e7[_0x8de9f0(0x24e)],'gateway_order_id':_0x13e3e7[_0x8de9f0(0x259)],'gateway':_0x8de9f0(0x1da),'amount':_0x13e3e7[_0x8de9f0(0x250)],'currency':_0x13e3e7[_0x8de9f0(0x22c)],'status':_0x34558b['toLowerCase'](),'customer_email':_0x13e3e7[_0x8de9f0(0x245)],'customer_name':_0x13e3e7[_0x8de9f0(0x233)],'created_at':_0x13e3e7[_0x8de9f0(0x249)],'updated_at':new Date()}},_0x2cd256=await fetch(_0x25442d[_0x8de9f0(0x20b)],{'method':'POST','headers':{'Content-Type':_0x8de9f0(0x220),'User-Agent':_0x8de9f0(0x271)},'body':JSON[_0x8de9f0(0x24f)](_0x2ef441)}),_0x4eae48=Date[_0x8de9f0(0x248)]()-_0xea1778,_0x1ce4b1=_0x2cd256['ok']?_0x8de9f0(0x23e):await _0x2cd256[_0x8de9f0(0x267)]();loggerService_1[_0x8de9f0(0x238)][_0x8de9f0(0x1f8)](_0x13e3e7['shopId'],_0x25442d[_0x8de9f0(0x20b)],_0x5481dc,_0x2cd256[_0x8de9f0(0x24b)],_0x4eae48,_0x2ef441),console[_0x8de9f0(0x241)]('Shop\x20webhook\x20sent\x20to\x20'+_0x25442d['webhookUrl']+_0x8de9f0(0x246)+_0x2cd256[_0x8de9f0(0x24b)]+'\x20('+_0x4eae48+_0x8de9f0(0x1e4));}catch(_0x35dddf){console[_0x8de9f0(0x1ee)](_0x8de9f0(0x24c),_0x35dddf),loggerService_1[_0x8de9f0(0x238)]['logShopWebhookError'](_0x13e3e7[_0x8de9f0(0x263)],_0x13e3e7[_0x8de9f0(0x23c)]?.[_0x8de9f0(0x1e3)]?.[_0x8de9f0(0x20b)]||'unknown','webhook_send',_0x35dddf,{});}}async[a35_0x5e86bb(0x211)](_0x24bf8e,_0x3a1b2b){const _0x4ba33b=a35_0x5e86bb;try{const _0x115d43={'PENDING':_0x4ba33b(0x23d),'PAID':'paid','FAILED':_0x4ba33b(0x231),'EXPIRED':_0x4ba33b(0x232)},_0x5bf855=_0x115d43[_0x3a1b2b];if(!_0x5bf855||_0x5bf855===_0x4ba33b(0x23d))return;await telegramBotService_1[_0x4ba33b(0x1fc)][_0x4ba33b(0x1fd)](_0x24bf8e[_0x4ba33b(0x263)],_0x24bf8e,_0x5bf855);}catch(_0x567819){console[_0x4ba33b(0x1ee)](_0x4ba33b(0x226),_0x567819);}}async[a35_0x5e86bb(0x21e)](_0x47710b){const _0x34762a=a35_0x5e86bb,_0x4c9f6c=await database_1['default'][_0x34762a(0x1e9)][_0x34762a(0x223)]({'where':{'id':_0x47710b},'include':{'shop':{'select':{'id':!![],'name':!![],'settings':{'select':{'webhookUrl':!![],'webhookEvents':!![]}}}}}});if(!_0x4c9f6c)throw new Error(_0x34762a(0x200));if(_0x4c9f6c[_0x34762a(0x262)]!==_0x34762a(0x21c))throw new Error(_0x34762a(0x209));await this[_0x34762a(0x1eb)](_0x4c9f6c);}[a35_0x5e86bb(0x229)](){const _0x5222bb=a35_0x5e86bb,_0x1e64f9=this[_0x5222bb(0x275)]?this[_0x5222bb(0x216)]:undefined;return{'isActive':!!this[_0x5222bb(0x275)],'checkIntervalMinutes':this[_0x5222bb(0x216)]/(0x3e8*0x3c),'expiryDays':this['EXPIRY_DAYS'],'nextCheckIn':_0x1e64f9};}}exports[a35_0x5e86bb(0x23b)]=CoinToPayStatusService,exports[a35_0x5e86bb(0x212)]=new CoinToPayStatusService();function a35_0x7541(){const _0x288b30=['failed','expired','customerName','transactionId','PAID','stack','56180XIftOA','loggerService','setDate','🪙\x20No\x20pending\x20CoinToPay\x20payments\x20to\x20check','CoinToPayStatusService','shop','created','Success','coinToPayService','createdOn','log','includes','\x20already\x20marked\x20as\x20expired,\x20skipping\x20status\x20check','timestamp','customerEmail','\x20with\x20status\x20','218421sfpcQu','now','createdAt','getDate','status','Failed\x20to\x20send\x20shop\x20webhook:','cointopay_status_check_error','orderId','stringify','amount','push','Periodic\x20CoinToPay\x20status\x20check\x20failed:','\x20\x20\x20📝\x20Details:','\x20days,\x20marking\x20as\x20EXPIRED','\x20not\x20enabled\x20for\x20shop\x20','PENDING','logWhiteDomainError','✅\x20CoinToPay\x20status\x20checking\x20service\x20started\x20(hourly\x20checks)','gatewayOrderId','length','toLowerCase','/status/','status_check','./gateways/coinToPayService','Initial\x20CoinToPay\x20status\x20check\x20failed:','\x20status\x20unchanged\x20(','Unknown\x20error','gateway','shopId','Failed\x20to\x20check\x20payment\x20','getTime','Failed\x20to\x20expire\x20payment\x20','text','toISOString','💰\x20Payment\x20','✅\x20Completed\x20checking\x20','9FcgobG','not\x20confirmed','floor','\x20status\x20from\x20','Automatically\x20expired\x20after\x20','auto_expire','TesSoft\x20Payment\x20System/1.0','unknown','adminNotes','\x20details:','checkInterval','🔍\x20Checking\x20CoinToPay\x20payment\x20','FAILED','catch','EXPIRY_DAYS','1978900drVsPl','\x20to\x20','750NwDmPU','./telegramBotService','sendShopWebhook','webhookEvents','EXPIRED','0100','Failed\x20to\x20mark\x20payment\x20as\x20expired','\x20days','checkAllPendingPayments','\x20CoinToPay\x20payments','\x20expired\x20CoinToPay\x20payments','45139CdbVzh','📊\x20Payment\x20','🛑\x20CoinToPay\x20status\x20checking\x20stopped','settings','ms)','\x20status:\x20','cointopay_status_check_','🪙\x20Starting\x20CoinToPay\x20periodic\x20status\x20checking\x20(every\x201\x20hour)','webhookLog','payment','default','checkSinglePayment','Payment\x20older\x20than\x20','296fuWDzY','error','remitterIban','18245689ZEuROb','⏰\x20Payment\x20','⏰\x20Checking\x20for\x20CoinToPay\x20payments\x20older\x20than\x20','\x20\x20\x20📍\x20Source:\x20','\x20\x20\x20📊\x20Status:\x20','Bank\x20Details:\x20','logCoinToPayError','COINTOPAY_STATUS_CHANGE','logShopWebhookSent','\x20marked\x20as\x20paid\x20at:\x20','__esModule','paidAt','telegramBotService','sendPaymentNotification','bankDetails','🏦\x20Saved\x20bank\x20details\x20to\x20admin\x20notes','Payment\x20not\x20found','⏰\x20Found\x20','checkPaymentStatus','18580992tGHOUH','210qHqVAS','payment.success','\x20\x20\x20📝\x20Context:','No\x20webhook\x20URL\x20configured\x20for\x20shop\x20','\x20\x20\x20📅\x20Time:\x20','Payment\x20is\x20not\x20a\x20CoinToPay\x20payment','checkExpiredPayments','webhookUrl','stopPeriodicStatusCheck','message','COINTOPAY_ERROR','confirmedOn','paymentDetails','sendPaymentStatusNotification','coinToPayStatusService','\x20has\x20no\x20gatewayPaymentId,\x20skipping','\x20days\x20without\x20payment\x20confirmation','update','CHECK_INTERVAL_MS','\x20->\x20','../config/database','gatewayPaymentId','\x20\x20\x20❌\x20Error:\x20','\x20updated\x20successfully','cointopay','\x20is\x20older\x20than\x20','checkPaymentById','70cBXaxK','application/json','payment.failed','./loggerService','findUnique','create','🔄\x20Updating\x20payment\x20','Failed\x20to\x20send\x20Telegram\x20payment\x20notification:','logCoinToPayStatus','\x20marked\x20as\x20EXPIRED\x20due\x20to\x20','getServiceStats','Webhook\x20event\x20','iban','currency','\x20pending\x20CoinToPay\x20payments','-day\x20timeout','__importDefault','338597epuVNl'];a35_0x7541=function(){return _0x288b30;};return a35_0x7541();}