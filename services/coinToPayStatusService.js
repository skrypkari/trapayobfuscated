'use strict';const a37_0x226910=a37_0x3ba3;(function(_0x166051,_0x53dae3){const _0x47b891=a37_0x3ba3,_0x2a1591=_0x166051();while(!![]){try{const _0x286328=parseInt(_0x47b891(0xbd))/0x1*(parseInt(_0x47b891(0x12d))/0x2)+parseInt(_0x47b891(0xca))/0x3+-parseInt(_0x47b891(0x18b))/0x4+parseInt(_0x47b891(0xf2))/0x5*(-parseInt(_0x47b891(0x16a))/0x6)+parseInt(_0x47b891(0x198))/0x7+parseInt(_0x47b891(0x12a))/0x8+parseInt(_0x47b891(0x1a0))/0x9*(-parseInt(_0x47b891(0x117))/0xa);if(_0x286328===_0x53dae3)break;else _0x2a1591['push'](_0x2a1591['shift']());}catch(_0x2e4aaf){_0x2a1591['push'](_0x2a1591['shift']());}}}(a37_0x74af,0xe45f7));function a37_0x3ba3(_0x19cd3d,_0x1e9866){const _0x74af93=a37_0x74af();return a37_0x3ba3=function(_0x3ba357,_0x3670ef){_0x3ba357=_0x3ba357-0xb3;let _0x378f56=_0x74af93[_0x3ba357];return _0x378f56;},a37_0x3ba3(_0x19cd3d,_0x1e9866);}var __importDefault=this&&this[a37_0x226910(0xde)]||function(_0x33ed5b){const _0x317aed=a37_0x226910;return _0x33ed5b&&_0x33ed5b[_0x317aed(0xb7)]?_0x33ed5b:{'default':_0x33ed5b};};Object[a37_0x226910(0x127)](exports,a37_0x226910(0xb7),{'value':!![]}),exports['coinToPayStatusService']=exports[a37_0x226910(0xf7)]=void 0x0;const coinToPayService_1=require(a37_0x226910(0x153)),coinToPay2Service_1=require(a37_0x226910(0x10f)),gateway_1=require(a37_0x226910(0x133)),database_1=__importDefault(require('../config/database')),telegramBotService_1=require(a37_0x226910(0x181)),loggerService_1=require(a37_0x226910(0x152));function a37_0x74af(){const _0x307c59=['Success','1857483NqgHrG','getTime','EXPIRY_DAYS','\x20has\x20no\x20gatewayPaymentId','paymentDetails','paymentLink','🔍\x20[CHECK]\x20Starting\x20check\x20for\x20payment\x20ID:\x20','⏰\x20[GLOBAL]\x20Payment\x20','\x20with\x20status\x20','⏰\x20[HOURLY]\x20Payment\x20','payment.pending','\x20seconds\x20(','\x20->\x20','❌\x20[TIMER]\x20Failed\x20individual\x20check\x20#','timestamp','gatewayPaymentId','length','\x20marked\x20as\x20EXPIRED\x20due\x20to\x20','checkSinglePayment','webhookLog','__importDefault','\x20\x20\x20📍\x20Source:\x20','customerName','\x20days','getServiceStats','📊\x20[CHECK]\x20Payment\x20','status_check','failed','✅\x20[GLOBAL]\x20Global\x20check\x20completed:\x20','size','logWhiteDomainError','\x20is\x20not\x20linked\x20to\x20a\x20payment\x20link','sendShopWebhook','\x20\x20\x20📝\x20Context:','values','❌\x20[COINTOPAY]\x20Failed\x20to\x20update\x20payment\x20link:','🪙\x20[DEBUG]\x20schedulePaymentChecks\x20called\x20with:','update','Failed\x20to\x20send\x20Telegram\x20payment\x20notification:','PENDING','2535zNXHFa','\x20became\x20PAID\x20via\x20status\x20check,\x20updating\x20payment\x20link','🏦\x20[CHECK]\x20Saved\x20bank\x20details\x20to\x20admin\x20notes','✅\x20[MANUAL]\x20Starting\x20manual\x20check\x20for\x20','Failed\x20to\x20mark\x20payment\x20as\x20expired','CoinToPayStatusService','settings','type','\x20\x20\x20-\x20Gateway:\x20','\x20\x20\x20❌\x20Error:\x20','COMPLETED','✅\x20[TIMER]\x20Individual\x20check\x20#','✅\x20[COINTOPAY]\x20Payment\x20link\x20','.\x20Remaining\x20active\x20timers:\x20','🔄\x20[CHECK]\x20Updating\x20payment\x20','shopId','\x20is\x20too\x20new\x20(','\x20already\x20marked\x20as\x20expired,\x20skipping\x20global\x20check','\x20days\x20without\x20payment\x20confirmation','floor','not\x20found','Failed\x20to\x20send\x20shop\x20webhook:','checkSinglePaymentById','⚠️\x20[CHECK]\x20Payment\x20','\x20not\x20found,\x20clearing\x20timers','description','shop','cointopay_status_check_','coinToPayService','./gateways/coinToPay2Service','paymentLinkId','schedule_created','coinToPayStatusService','⏰\x20[EXPIRY]\x20Checking\x20for\x20CoinToPay\x20payments\x20older\x20than\x20','stringify','\x20individual\x20payment\x20timers','logCoinToPayError','10mhXYAD','text','paymentId','getPaymentTimerInfo','❌\x20[GLOBAL]\x20Failed\x20to\x20get\x20pending\x20CoinToPay\x20payments:','\x20status:\x20','paymentTimers','⏰\x20[DEBUG]\x20Scheduled\x20check\x20#','ms)','gatewayOrderId','logCoinToPayStatus','\x20updated\x20successfully','🧹\x20[CHECK]\x20Payment\x20','Payment\x20older\x20than\x20','\x20found:','⏰\x20[EXPIRY]\x20Payment\x20','defineProperty','💰\x20[CHECK]\x20Payment\x20','\x20is\x20older\x20than\x20','8229984crCiRT','toLowerCase','\x20timers\x20for\x20payment\x20','3146074SzGYDK','Shop\x20webhook\x20sent\x20to\x20','getDate','startPeriodicStatusCheck','expired','checkExpiredPayments','../types/gateway','amount','unknown','Payment\x20is\x20not\x20a\x20CoinToPay/CoinToPay2\x20payment','default','error','\x20status\x20from\x20','5\x20minutes','GLOBAL_CHECK_INTERVAL_MS','\x20in\x20','\x20\x20\x20-\x20Amount:\x20','✅\x20[CHECK]\x20Transaction\x20confirmed\x20on:\x20','status','FAILED','❌\x20[INIT]\x20Initial\x20CoinToPay\x20status\x20check\x20failed:','createdAt','create','from','1\x20minute','\x20not\x20enabled\x20for\x20shop\x20','message','🪙\x20[GLOBAL]\x20Found\x20','🛑\x20[SHUTDOWN]\x20CoinToPay\x20global\x20status\x20checking\x20stopped','delay','orderId','🧹\x20[DEBUG]\x20Clearing\x20','❌\x20[GLOBAL]\x20Periodic\x20CoinToPay\x20status\x20check\x20failed:','\x20current\x20status:\x20','❌\x20[HOURLY]\x20Failed\x20hourly\x20check\x20for\x20payment\x20','webhookEvents','\x20expired','./loggerService','./gateways/coinToPayService','\x20marked\x20as\x20paid\x20at:\x20','\x20not\x20found\x20in\x20database','\x20for\x20payment\x20','clearPaymentTimers','🆔\x20[CHECK]\x20Transaction\x20ID:\x20','cointopay','🪙\x20[DEBUG]\x20Creating\x20','\x20completed\x20for\x20payment\x20','log','🛑\x20[SHUTDOWN]\x20Cleared\x20','TesSoft\x20Payment\x20System/1.0','adminNotes','🪙\x20[TIMER]\x20Individual\x20check\x20#','EXPIRED','🧹\x20[DEBUG]\x20Cleared\x20timer\x20#','\x20days,\x20will\x20be\x20handled\x20by\x20global\x20expiry\x20check','\x20expired\x20CoinToPay\x20payments','gateway','❌\x20[HOURLY]\x20Payment\x20','createdOn','\x20checked,\x20','coinToPay2Service','18156naoibY','\x20\x20\x20-\x20gatewayPaymentId:\x20','push','No\x20webhook\x20URL\x20configured\x20for\x20shop\x20','paidAt','payment','SINGLE','get','✅\x20[CHECK]\x20Payment\x20','toISOString','✅\x20[DEBUG]\x20Successfully\x20scheduled\x20','\x20\x20\x20-\x20paymentId:\x20',',\x20status=','toFixed','🔍\x20[CHECK]\x20Checking\x20','\x20to\x20','currentPayments','🔍\x20[MANUAL]\x20Manual\x20check\x20requested\x20for\x20payment:\x20','sendPaymentStatusNotification','\x20triggered\x20for\x20payment\x20','🪙\x20[GLOBAL]\x20Starting\x20global\x20check\x20cycle...','\x20status\x20changed\x20to\x20','globalCheckInterval','./telegramBotService','PAID','payment.success','\x20skipped,\x20','🪙\x20[INIT]\x20Starting\x20CoinToPay\x20periodic\x20status\x20checking\x20(global\x20checks\x20every\x201\x20hour)','\x20status\x20unchanged\x20(','Unknown\x20error','📊\x20[CHECK]\x20CoinToPay2\x20payment\x20','\x20days,\x20marking\x20as\x20EXPIRED','🪙\x20[ERROR]\x20CoinToPay\x20Error:\x20','3856928REYscN','COINTOPAY_ERROR','Automatically\x20expired\x20after\x20','\x20updated:\x20currentPayments=','stack','\x20days\x20(created\x20before\x20','schedulePaymentChecks','checkAllPendingPayments','✅\x20[HOURLY]\x20Payment\x20','❌\x20[CHECK]\x20Payment\x20','\x20\x20\x20📅\x20Time:\x20','\x20\x20\x20📊\x20Status:\x20','✅\x20[MANUAL]\x20Manual\x20check\x20completed\x20for\x20payment\x20','12827584ISZTsZ','CoinToPayService','includes','🪙\x20CoinToPayStatusService\x20initialized\x20with\x20support\x20for\x20both\x20CoinToPay\x20and\x20CoinToPay2','\x20\x20\x20-\x20Status:\x20','loggerService','\x20initial\x20timers\x20for\x20payment\x20','🪙\x20[HOURLY]\x20Hourly\x20check\x20triggered\x20for\x20payment\x20','14576661dDHFxt','now','transactionId','created','timers','cointopay2','catch','📈\x20[COINTOPAY]\x20Payment\x20','\x20initial\x20checks\x20+\x20hourly\x20checks\x20for\x20payment\x20','⏰\x20[GLOBAL]\x20Found\x20','CoinToPay2Service','\x20status\x20is\x20','findUnique','checkPaymentById','__esModule','🪙\x20[GLOBAL]\x20No\x20pending\x20CoinToPay\x20payments\x20to\x20check','confirmedOn','setDate','webhookUrl','auto_expire','1wxeuuJ','bankDetails','📊\x20[HOURLY]\x20Payment\x20','currency','Webhook\x20event\x20','stopPeriodicStatusCheck','POST','payment.failed','telegramBotService','application/json','logShopWebhookError','iban'];a37_0x74af=function(){return _0x307c59;};return a37_0x74af();}class CoinToPayStatusService{constructor(){const _0x47c188=a37_0x226910;this[_0x47c188(0x180)]=null,this[_0x47c188(0x13b)]=0x3c*0x3c*0x3e8,this[_0x47c188(0xcc)]=0x5,this['paymentTimers']=new Map(),this['coinToPayService']=new coinToPayService_1[(_0x47c188(0x199))](),this[_0x47c188(0x169)]=new coinToPay2Service_1[(_0x47c188(0xb3))](),console[_0x47c188(0x15c)](_0x47c188(0x19b));}[a37_0x226910(0x191)](_0x1d2409,_0x50dc7f){const _0x530177=a37_0x226910;console['log'](_0x530177(0xee)),console['log'](_0x530177(0x175)+_0x1d2409),console['log'](_0x530177(0x16b)+_0x50dc7f),this[_0x530177(0x157)](_0x1d2409);const _0x59cbc6=[],_0x25ea5f=new Date(),_0x58df9f=[{'delay':0x1*0x3c*0x3e8,'description':_0x530177(0x145)},{'delay':0x2*0x3c*0x3e8,'description':'2\x20minutes'},{'delay':0x5*0x3c*0x3e8,'description':_0x530177(0x13a)},{'delay':0x5*0x3c*0x3e8,'description':_0x530177(0x13a)}];console[_0x530177(0x15c)](_0x530177(0x15a)+_0x58df9f[_0x530177(0xda)]+_0x530177(0x19e)+_0x1d2409);let _0x4de71a=0x0;_0x58df9f['forEach']((_0x336fa0,_0x170f1c)=>{const _0x47d99c=_0x530177;_0x4de71a+=_0x336fa0[_0x47d99c(0x14a)];const _0x267017=setTimeout(async()=>{const _0x47fe37=_0x47d99c;console[_0x47fe37(0x15c)](_0x47fe37(0x160)+(_0x170f1c+0x1)+_0x47fe37(0x17d)+_0x1d2409+'\x20(after\x20'+_0x336fa0[_0x47fe37(0x10b)]+')');try{await this[_0x47fe37(0x108)](_0x1d2409),console[_0x47fe37(0x15c)](_0x47fe37(0xfd)+(_0x170f1c+0x1)+_0x47fe37(0x15b)+_0x1d2409);}catch(_0x3f0ffd){console[_0x47fe37(0x138)](_0x47fe37(0xd7)+(_0x170f1c+0x1)+_0x47fe37(0x156)+_0x1d2409+':',_0x3f0ffd),this[_0x47fe37(0x116)](_0x1d2409,_0x50dc7f,_0x3f0ffd,_0x47fe37(0xe4),{'checkNumber':_0x170f1c+0x1,'scheduledAfter':_0x336fa0[_0x47fe37(0x10b)],'isIndividualCheck':!![]});}},_0x4de71a);_0x59cbc6[_0x47d99c(0x16c)](_0x267017),console[_0x47d99c(0x15c)](_0x47d99c(0x11e)+(_0x170f1c+0x1)+'\x20for\x20payment\x20'+_0x1d2409+_0x47d99c(0x13c)+_0x4de71a/0x3e8+_0x47d99c(0xd5)+_0x336fa0[_0x47d99c(0x10b)]+')');});const _0x38359a=setInterval(async()=>{const _0x2bb07d=_0x530177;console[_0x2bb07d(0x15c)](_0x2bb07d(0x19f)+_0x1d2409);try{const _0x2335bb=await database_1[_0x2bb07d(0x137)][_0x2bb07d(0x16f)][_0x2bb07d(0xb5)]({'where':{'id':_0x1d2409},'select':{'id':!![],'status':!![],'createdAt':!![],'gatewayPaymentId':!![]}});if(!_0x2335bb){console[_0x2bb07d(0x15c)](_0x2bb07d(0x166)+_0x1d2409+_0x2bb07d(0x10a)),this[_0x2bb07d(0x157)](_0x1d2409);return;}console['log'](_0x2bb07d(0xbf)+_0x1d2409+_0x2bb07d(0x14e)+_0x2335bb[_0x2bb07d(0x13f)]);if(_0x2335bb[_0x2bb07d(0x13f)]!==_0x2bb07d(0xf1)){console['log'](_0x2bb07d(0x193)+_0x1d2409+_0x2bb07d(0xb4)+_0x2335bb[_0x2bb07d(0x13f)]+',\x20stopping\x20individual\x20checks'),this[_0x2bb07d(0x157)](_0x1d2409);return;}const _0x4b6625=Math[_0x2bb07d(0x105)]((Date['now']()-_0x2335bb[_0x2bb07d(0x142)][_0x2bb07d(0xcb)]())/(0x3e8*0x3c*0x3c*0x18));if(_0x4b6625>=this[_0x2bb07d(0xcc)]){console[_0x2bb07d(0x15c)](_0x2bb07d(0xd3)+_0x1d2409+_0x2bb07d(0x129)+this[_0x2bb07d(0xcc)]+_0x2bb07d(0x163)),this[_0x2bb07d(0x157)](_0x1d2409);return;}await this[_0x2bb07d(0x108)](_0x1d2409),console[_0x2bb07d(0x15c)]('✅\x20[HOURLY]\x20Hourly\x20check\x20completed\x20for\x20payment\x20'+_0x1d2409);}catch(_0x47f4d5){console[_0x2bb07d(0x138)](_0x2bb07d(0x14f)+_0x1d2409+':',_0x47f4d5),this[_0x2bb07d(0x116)](_0x1d2409,_0x50dc7f,_0x47f4d5,_0x2bb07d(0xe4),{'isHourlyCheck':!![],'isIndividualCheck':!![]});}},0x3c*0x3c*0x3e8);_0x59cbc6[_0x530177(0x16c)](_0x38359a),this[_0x530177(0x11d)]['set'](_0x1d2409,{'timers':_0x59cbc6,'paymentId':_0x1d2409,'gatewayPaymentId':_0x50dc7f,'createdAt':_0x25ea5f}),console['log'](_0x530177(0x174)+_0x58df9f[_0x530177(0xda)]+_0x530177(0x1a8)+_0x1d2409),console[_0x530177(0x15c)]('📊\x20[DEBUG]\x20Total\x20active\x20payment\x20timers:\x20'+this['paymentTimers'][_0x530177(0xe7)]),this['logCoinToPayStatus'](_0x1d2409,_0x50dc7f,_0x530177(0xf1),_0x530177(0xf1),'status_check',{'action':_0x530177(0x111),'scheduledChecks':_0x58df9f['length'],'firstCheckIn':_0x58df9f[0x0][_0x530177(0x14a)]/0x3e8,'totalTimers':this[_0x530177(0x11d)][_0x530177(0xe7)]});}['clearPaymentTimers'](_0x1f29f8){const _0x235a2a=a37_0x226910,_0x5cdb3a=this[_0x235a2a(0x11d)][_0x235a2a(0x171)](_0x1f29f8);_0x5cdb3a?(console['log'](_0x235a2a(0x14c)+_0x5cdb3a[_0x235a2a(0x1a4)][_0x235a2a(0xda)]+_0x235a2a(0x12c)+_0x1f29f8),_0x5cdb3a[_0x235a2a(0x1a4)]['forEach']((_0xd571cc,_0x187740)=>{const _0x531ddc=_0x235a2a;_0xd571cc&&(clearTimeout(_0xd571cc),clearInterval(_0xd571cc),console[_0x531ddc(0x15c)](_0x531ddc(0x162)+(_0x187740+0x1)+_0x531ddc(0x156)+_0x1f29f8));}),this[_0x235a2a(0x11d)]['delete'](_0x1f29f8),console[_0x235a2a(0x15c)]('✅\x20[DEBUG]\x20All\x20timers\x20cleared\x20for\x20payment\x20'+_0x1f29f8+_0x235a2a(0xff)+this['paymentTimers']['size'])):console[_0x235a2a(0x15c)]('⚠️\x20[DEBUG]\x20No\x20timers\x20found\x20for\x20payment\x20'+_0x1f29f8+'\x20to\x20clear');}async[a37_0x226910(0x108)](_0x2f4d01){const _0x3cee25=a37_0x226910;console[_0x3cee25(0x15c)](_0x3cee25(0xd0)+_0x2f4d01);const _0x4ead81=await database_1['default'][_0x3cee25(0x16f)]['findUnique']({'where':{'id':_0x2f4d01},'select':{'id':!![],'gatewayPaymentId':!![],'amount':!![],'currency':!![],'status':!![],'shopId':!![],'createdAt':!![],'gateway':!![],'remitterIban':!![],'customerIp':!![],'customerUa':!![],'shop':{'select':{'id':!![],'name':!![],'settings':{'select':{'webhookUrl':!![],'webhookEvents':!![]}}}}}});if(!_0x4ead81){console[_0x3cee25(0x15c)](_0x3cee25(0x194)+_0x2f4d01+_0x3cee25(0x155));return;}console[_0x3cee25(0x15c)](_0x3cee25(0xe3)+_0x2f4d01+_0x3cee25(0x125)),console[_0x3cee25(0x15c)](_0x3cee25(0xfa)+_0x4ead81[_0x3cee25(0x165)]),console[_0x3cee25(0x15c)](_0x3cee25(0x19c)+_0x4ead81[_0x3cee25(0x13f)]),console[_0x3cee25(0x15c)]('\x20\x20\x20-\x20GatewayPaymentId:\x20'+_0x4ead81[_0x3cee25(0xd9)]),console['log'](_0x3cee25(0x13d)+_0x4ead81[_0x3cee25(0x134)]+'\x20'+_0x4ead81[_0x3cee25(0xc0)]),console['log']('\x20\x20\x20-\x20ShopId:\x20'+_0x4ead81['shopId']);if(_0x4ead81[_0x3cee25(0x165)]!=='cointopay'&&_0x4ead81['gateway']!=='cointopay2'){console[_0x3cee25(0x15c)]('⚠️\x20[CHECK]\x20Payment\x20'+_0x2f4d01+'\x20is\x20not\x20a\x20CoinToPay/CoinToPay2\x20payment\x20(gateway:\x20'+_0x4ead81[_0x3cee25(0x165)]+')');return;}if(_0x4ead81[_0x3cee25(0x13f)]!==_0x3cee25(0xf1)){console[_0x3cee25(0x15c)](_0x3cee25(0x109)+_0x2f4d01+_0x3cee25(0xb4)+_0x4ead81['status']+',\x20stopping\x20individual\x20checks'),this[_0x3cee25(0x157)](_0x2f4d01);return;}if(!_0x4ead81['gatewayPaymentId']){console[_0x3cee25(0x15c)](_0x3cee25(0x109)+_0x2f4d01+_0x3cee25(0xcd));return;}console[_0x3cee25(0x15c)](_0x3cee25(0x172)+_0x2f4d01+'\x20is\x20valid\x20for\x20checking,\x20proceeding...'),await this[_0x3cee25(0xdc)](_0x4ead81);}[a37_0x226910(0x121)](_0x177d6b,_0x34b3de,_0x24f606,_0x16ff6a,_0x35d40e,_0x58fcbb){const _0x4aa38c=a37_0x226910,_0x2a662b={'type':'COINTOPAY_STATUS_CHANGE','paymentId':_0x177d6b,'gatewayPaymentId':_0x34b3de,'oldStatus':_0x24f606,'newStatus':_0x16ff6a,'source':_0x35d40e,'timestamp':new Date()[_0x4aa38c(0x173)](),'details':_0x58fcbb||{}};loggerService_1[_0x4aa38c(0x19d)][_0x4aa38c(0x121)](_0x2a662b),console['log']('🪙\x20[LOG]\x20CoinToPay\x20Status\x20Change:\x20'+_0x177d6b+'\x20('+_0x34b3de+')'),console['log'](_0x4aa38c(0x196)+_0x24f606+_0x4aa38c(0xd6)+_0x16ff6a),console['log'](_0x4aa38c(0xdf)+_0x35d40e),console[_0x4aa38c(0x15c)](_0x4aa38c(0x195)+_0x2a662b[_0x4aa38c(0xd8)]),_0x58fcbb&&console[_0x4aa38c(0x15c)]('\x20\x20\x20📝\x20Details:',_0x58fcbb);}[a37_0x226910(0x116)](_0x3f3620,_0x54411f,_0x4a4252,_0x44365f,_0x5a69e2){const _0x15df6d=a37_0x226910,_0x1b8dfa={'type':_0x15df6d(0x18c),'paymentId':_0x3f3620,'gatewayPaymentId':_0x54411f,'error':_0x4a4252 instanceof Error?{'message':_0x4a4252[_0x15df6d(0x147)],'stack':_0x4a4252[_0x15df6d(0x18f)]}:_0x4a4252,'source':_0x44365f,'timestamp':new Date()[_0x15df6d(0x173)](),'context':_0x5a69e2||{}};loggerService_1[_0x15df6d(0x19d)][_0x15df6d(0x116)](_0x1b8dfa),console['error'](_0x15df6d(0x18a)+_0x3f3620+'\x20('+_0x54411f+')'),console['error'](_0x15df6d(0xfb)+(_0x4a4252 instanceof Error?_0x4a4252[_0x15df6d(0x147)]:_0x4a4252)),console['error'](_0x15df6d(0xdf)+_0x44365f),console[_0x15df6d(0x138)](_0x15df6d(0x195)+_0x1b8dfa[_0x15df6d(0xd8)]),_0x5a69e2&&console[_0x15df6d(0x138)](_0x15df6d(0xeb),_0x5a69e2);}[a37_0x226910(0x130)](){const _0xca28ba=a37_0x226910;console[_0xca28ba(0x15c)](_0xca28ba(0x185)),this[_0xca28ba(0x192)]()[_0xca28ba(0x1a6)](_0xef6745=>{const _0x2276cd=_0xca28ba;console[_0x2276cd(0x138)](_0x2276cd(0x141),_0xef6745);}),this[_0xca28ba(0x180)]=setInterval(async()=>{const _0x44b8e3=_0xca28ba;try{console['log'](_0x44b8e3(0x17e)),await this[_0x44b8e3(0x192)](),console['log']('✅\x20[GLOBAL]\x20Global\x20check\x20cycle\x20completed');}catch(_0x1c0658){console[_0x44b8e3(0x138)](_0x44b8e3(0x14d),_0x1c0658);}},this['GLOBAL_CHECK_INTERVAL_MS']),console['log']('✅\x20[INIT]\x20CoinToPay\x20status\x20checking\x20service\x20started\x20(global\x20hourly\x20checks\x20+\x20individual\x20payment\x20timers)');}[a37_0x226910(0xc2)](){const _0x5ed709=a37_0x226910;console[_0x5ed709(0x15c)]('🛑\x20[SHUTDOWN]\x20Stopping\x20CoinToPay\x20status\x20checking\x20service...');this[_0x5ed709(0x180)]&&(clearInterval(this[_0x5ed709(0x180)]),this[_0x5ed709(0x180)]=null,console[_0x5ed709(0x15c)](_0x5ed709(0x149)));const _0x7a02c9=this[_0x5ed709(0x11d)][_0x5ed709(0xe7)];for(const [_0x5f2e8d]of this['paymentTimers']){this['clearPaymentTimers'](_0x5f2e8d);}console['log'](_0x5ed709(0x15d)+_0x7a02c9+_0x5ed709(0x115));}async[a37_0x226910(0x192)](){const _0x198a1d=a37_0x226910;try{console[_0x198a1d(0x15c)]('🪙\x20[GLOBAL]\x20Getting\x20all\x20pending\x20CoinToPay\x20payments...');const _0x325e85=await database_1[_0x198a1d(0x137)]['payment']['findMany']({'where':{'gateway':{'in':[_0x198a1d(0x159),'cointopay2']},'status':'PENDING','gatewayPaymentId':{'not':null}},'select':{'id':!![],'gatewayPaymentId':!![],'amount':!![],'currency':!![],'status':!![],'shopId':!![],'createdAt':!![],'remitterIban':!![],'customerIp':!![],'customerUa':!![],'shop':{'select':{'id':!![],'name':!![],'settings':{'select':{'webhookUrl':!![],'webhookEvents':!![]}}}}}});console[_0x198a1d(0x15c)](_0x198a1d(0x148)+_0x325e85[_0x198a1d(0xda)]+'\x20pending\x20CoinToPay\x20payments');if(_0x325e85[_0x198a1d(0xda)]===0x0){console[_0x198a1d(0x15c)](_0x198a1d(0xb8));return;}const _0x58861c=await this[_0x198a1d(0x132)](_0x325e85);console['log'](_0x198a1d(0x1a9)+_0x58861c[_0x198a1d(0xda)]+_0x198a1d(0x164));let _0x13f908=0x0,_0xbf5e4b=0x0;for(const _0x494bc2 of _0x325e85){try{if(_0x58861c[_0x198a1d(0x19a)](_0x494bc2['id'])){console[_0x198a1d(0x15c)]('⏰\x20[GLOBAL]\x20Payment\x20'+_0x494bc2['id']+_0x198a1d(0x103)),_0xbf5e4b++;continue;}if(this[_0x198a1d(0x11d)]['has'](_0x494bc2['id'])){console[_0x198a1d(0x15c)](_0x198a1d(0xd1)+_0x494bc2['id']+'\x20has\x20individual\x20timers,\x20skipping\x20global\x20check'),_0xbf5e4b++;continue;}const _0x4aaee3=(Date[_0x198a1d(0x1a1)]()-_0x494bc2[_0x198a1d(0x142)][_0x198a1d(0xcb)]())/(0x3e8*0x3c*0x3c);if(_0x4aaee3<0x1){console[_0x198a1d(0x15c)](_0x198a1d(0xd1)+_0x494bc2['id']+_0x198a1d(0x102)+_0x4aaee3[_0x198a1d(0x177)](0x1)+'h),\x20skipping\x20global\x20check'),_0xbf5e4b++;continue;}console[_0x198a1d(0x15c)]('🔍\x20[GLOBAL]\x20Checking\x20old\x20payment\x20'+_0x494bc2['id']+'\x20(age:\x20'+_0x4aaee3[_0x198a1d(0x177)](0x1)+'h)'),await this[_0x198a1d(0xdc)](_0x494bc2),_0x13f908++,await new Promise(_0x3929d5=>setTimeout(_0x3929d5,0x7d0));}catch(_0x5b5546){console[_0x198a1d(0x138)]('❌\x20[GLOBAL]\x20Failed\x20to\x20check\x20CoinToPay\x20payment\x20'+_0x494bc2['id']+':',_0x5b5546),this[_0x198a1d(0x116)](_0x494bc2['id'],_0x494bc2[_0x198a1d(0xd9)]||_0x198a1d(0x135),_0x5b5546,_0x198a1d(0xe4),{'isGlobalCheck':!![],'paymentAmount':_0x494bc2[_0x198a1d(0x134)],'paymentCurrency':_0x494bc2[_0x198a1d(0xc0)],'shopId':_0x494bc2[_0x198a1d(0x101)],'createdAt':_0x494bc2[_0x198a1d(0x142)]}),loggerService_1[_0x198a1d(0x19d)][_0x198a1d(0xe8)]('cointopay','/status/'+_0x494bc2[_0x198a1d(0xd9)],_0x5b5546);}}console[_0x198a1d(0x15c)](_0x198a1d(0xe6)+_0x13f908+_0x198a1d(0x168)+_0xbf5e4b+_0x198a1d(0x184)+_0x58861c[_0x198a1d(0xda)]+_0x198a1d(0x151));}catch(_0x187446){console['error'](_0x198a1d(0x11b),_0x187446);}}async['checkExpiredPayments'](_0x1bcbb7){const _0x57d90=a37_0x226910,_0x7b9329=[],_0x4d6c6d=new Date();_0x4d6c6d[_0x57d90(0xba)](_0x4d6c6d[_0x57d90(0x12f)]()-this['EXPIRY_DAYS']),console['log'](_0x57d90(0x113)+this[_0x57d90(0xcc)]+_0x57d90(0x190)+_0x4d6c6d[_0x57d90(0x173)]()+')');for(const _0x409022 of _0x1bcbb7){if(_0x409022['createdAt']<_0x4d6c6d){console['log'](_0x57d90(0x126)+_0x409022['id']+'\x20is\x20older\x20than\x20'+this['EXPIRY_DAYS']+_0x57d90(0x189));try{this[_0x57d90(0x121)](_0x409022['id'],_0x409022[_0x57d90(0xd9)]||_0x57d90(0x135),_0x57d90(0xf1),_0x57d90(0x161),_0x57d90(0xbc),{'reason':_0x57d90(0x124)+this[_0x57d90(0xcc)]+_0x57d90(0xe1),'createdAt':_0x409022['createdAt'],'daysSinceCreation':Math[_0x57d90(0x105)]((Date['now']()-_0x409022[_0x57d90(0x142)]['getTime']())/(0x3e8*0x3c*0x3c*0x18)),'paymentAmount':_0x409022['amount'],'paymentCurrency':_0x409022['currency'],'shopId':_0x409022[_0x57d90(0x101)]}),await database_1[_0x57d90(0x137)]['payment'][_0x57d90(0xef)]({'where':{'id':_0x409022['id']},'data':{'status':_0x57d90(0x161),'updatedAt':new Date(),'adminNotes':_0x57d90(0x18d)+this[_0x57d90(0xcc)]+_0x57d90(0x104)}}),await database_1[_0x57d90(0x137)][_0x57d90(0xdd)][_0x57d90(0x143)]({'data':{'paymentId':_0x409022['id'],'shopId':_0x409022['shopId'],'event':'cointopay_auto_expired','statusCode':0xc8,'responseBody':JSON[_0x57d90(0x114)]({'reason':_0x57d90(0x124)+this[_0x57d90(0xcc)]+_0x57d90(0xe1),'createdAt':_0x409022[_0x57d90(0x142)],'expiredAt':new Date()[_0x57d90(0x173)](),'daysSinceCreation':Math[_0x57d90(0x105)]((Date['now']()-_0x409022[_0x57d90(0x142)][_0x57d90(0xcb)]())/(0x3e8*0x3c*0x3c*0x18))})}}),await this[_0x57d90(0xea)](_0x409022,'EXPIRED'),await this[_0x57d90(0x17c)](_0x409022,_0x57d90(0x161)),this[_0x57d90(0x157)](_0x409022['id']),_0x7b9329[_0x57d90(0x16c)](_0x409022['id']),console[_0x57d90(0x15c)]('✅\x20[EXPIRY]\x20Payment\x20'+_0x409022['id']+_0x57d90(0xdb)+this[_0x57d90(0xcc)]+'-day\x20timeout');}catch(_0x2c0575){console[_0x57d90(0x138)]('❌\x20[EXPIRY]\x20Failed\x20to\x20expire\x20payment\x20'+_0x409022['id']+':',_0x2c0575),this[_0x57d90(0x116)](_0x409022['id'],_0x409022[_0x57d90(0xd9)]||_0x57d90(0x135),_0x2c0575,_0x57d90(0xbc),{'reason':_0x57d90(0xf6),'createdAt':_0x409022[_0x57d90(0x142)],'daysSinceCreation':Math[_0x57d90(0x105)]((Date[_0x57d90(0x1a1)]()-_0x409022['createdAt'][_0x57d90(0xcb)]())/(0x3e8*0x3c*0x3c*0x18))});}}}return _0x7b9329;}async[a37_0x226910(0xdc)](_0x420e64){const _0x14b354=a37_0x226910;if(!_0x420e64['gatewayPaymentId']){console[_0x14b354(0x15c)]('⚠️\x20[CHECK]\x20Payment\x20'+_0x420e64['id']+'\x20has\x20no\x20gatewayPaymentId,\x20skipping');return;}console['log'](_0x14b354(0x178)+_0x420e64['gateway']+'\x20payment\x20'+_0x420e64['id']+'\x20('+_0x420e64[_0x14b354(0xd9)]+')');try{let _0x141816;_0x420e64[_0x14b354(0x165)]===_0x14b354(0x1a5)?(_0x141816=await this['coinToPay2Service']['checkPaymentStatus'](_0x420e64['gatewayPaymentId']),console[_0x14b354(0x15c)](_0x14b354(0x188)+_0x420e64['id']+_0x14b354(0x11c)+_0x141816[_0x14b354(0x13f)])):(_0x141816=await this[_0x14b354(0x10e)]['checkPaymentStatus'](_0x420e64[_0x14b354(0xd9)]),console[_0x14b354(0x15c)]('📊\x20[CHECK]\x20CoinToPay\x20payment\x20'+_0x420e64['id']+'\x20status:\x20'+_0x141816[_0x14b354(0x13f)]));_0x141816[_0x14b354(0xce)]&&console[_0x14b354(0x15c)](_0x14b354(0xe3)+_0x420e64['id']+'\x20details:',{'iban':_0x141816[_0x14b354(0xce)]['iban']||_0x14b354(0x106),'transactionId':_0x141816[_0x14b354(0xce)][_0x14b354(0x1a2)],'createdOn':_0x141816[_0x14b354(0xce)][_0x14b354(0x167)],'confirmedOn':_0x141816[_0x14b354(0xce)][_0x14b354(0xb9)]||'not\x20confirmed'});if(_0x141816['status']!==_0x420e64[_0x14b354(0x13f)]){console[_0x14b354(0x15c)](_0x14b354(0x100)+_0x420e64['id']+_0x14b354(0x139)+_0x420e64[_0x14b354(0x13f)]+_0x14b354(0x179)+_0x141816[_0x14b354(0x13f)]),this[_0x14b354(0x121)](_0x420e64['id'],_0x420e64['gatewayPaymentId'],_0x420e64[_0x14b354(0x13f)],_0x141816['status'],'status_check',{'paymentDetails':_0x141816[_0x14b354(0xce)],'amount':_0x141816['amount'],'currency':_0x141816[_0x14b354(0xc0)],'shopId':_0x420e64[_0x14b354(0x101)],'checkTimestamp':new Date()[_0x14b354(0x173)]()});const _0x3d4002={'status':_0x141816[_0x14b354(0x13f)],'updatedAt':new Date()};_0x141816[_0x14b354(0x13f)]===_0x14b354(0x182)&&_0x420e64[_0x14b354(0x13f)]!==_0x14b354(0x182)&&(_0x3d4002['paidAt']=new Date(),console[_0x14b354(0x15c)](_0x14b354(0x128)+_0x420e64['id']+_0x14b354(0x154)+_0x3d4002[_0x14b354(0x16e)]['toISOString']()));if(_0x141816[_0x14b354(0xce)]){const _0x3500dd=_0x141816['paymentDetails'];_0x3500dd['iban']&&(_0x3d4002['remitterIban']=_0x3500dd[_0x14b354(0xc8)],console[_0x14b354(0x15c)]('🏦\x20[CHECK]\x20Saved\x20IBAN:\x20'+_0x3500dd[_0x14b354(0xc8)]));if(_0x3500dd[_0x14b354(0xbe)]){const _0x467b0f=_0x420e64[_0x14b354(0x15f)]||'',_0x253616='Bank\x20Details:\x20'+_0x3500dd[_0x14b354(0xbe)];_0x3d4002['adminNotes']=_0x467b0f?_0x467b0f+'\x0a\x0a'+_0x253616:_0x253616,console['log'](_0x14b354(0xf4));}_0x3500dd[_0x14b354(0x1a2)]&&console[_0x14b354(0x15c)](_0x14b354(0x158)+_0x3500dd['transactionId']),_0x3500dd['confirmedOn']&&console[_0x14b354(0x15c)](_0x14b354(0x13e)+_0x3500dd[_0x14b354(0xb9)]);}await database_1[_0x14b354(0x137)][_0x14b354(0x16f)][_0x14b354(0xef)]({'where':{'id':_0x420e64['id']},'data':_0x3d4002});if(_0x141816[_0x14b354(0x13f)]===_0x14b354(0x182)&&_0x420e64[_0x14b354(0x13f)]!==_0x14b354(0x182)){console[_0x14b354(0x15c)](_0x14b354(0x1a7)+_0x420e64['id']+_0x14b354(0xf3));const _0x134e76=await database_1['default'][_0x14b354(0x16f)][_0x14b354(0xb5)]({'where':{'id':_0x420e64['id']},'select':{'id':!![],'paymentLinkId':!![],'paymentLink':{'select':{'id':!![],'type':!![],'currentPayments':!![],'status':!![]}}}});if(_0x134e76?.[_0x14b354(0x110)]&&_0x134e76['paymentLink'])try{const _0x166263=_0x134e76[_0x14b354(0xcf)];console[_0x14b354(0x15c)]('📈\x20[COINTOPAY]\x20Found\x20payment\x20link\x20'+_0x166263['id']+':\x20type='+_0x166263[_0x14b354(0xf9)]+',\x20currentPayments='+_0x166263['currentPayments']+_0x14b354(0x176)+_0x166263[_0x14b354(0x13f)]);const _0x550800=_0x166263[_0x14b354(0x17a)]+0x1,_0x41eff0=_0x166263[_0x14b354(0xf9)]===_0x14b354(0x170)?_0x14b354(0xfc):_0x166263[_0x14b354(0x13f)];await database_1[_0x14b354(0x137)][_0x14b354(0xcf)][_0x14b354(0xef)]({'where':{'id':_0x166263['id']},'data':{'currentPayments':_0x550800,'status':_0x41eff0,'updatedAt':new Date()}}),console[_0x14b354(0x15c)](_0x14b354(0xfe)+_0x166263['id']+_0x14b354(0x18e)+_0x166263[_0x14b354(0x17a)]+_0x14b354(0xd6)+_0x550800+',\x20status='+_0x166263[_0x14b354(0x13f)]+'\x20->\x20'+_0x41eff0);}catch(_0x349677){console['error'](_0x14b354(0xed),_0x349677);}else console['log']('📈\x20[COINTOPAY]\x20Payment\x20'+_0x420e64['id']+_0x14b354(0xe9));}await database_1['default']['webhookLog'][_0x14b354(0x143)]({'data':{'paymentId':_0x420e64['id'],'shopId':_0x420e64[_0x14b354(0x101)],'event':_0x14b354(0x10d)+_0x141816[_0x14b354(0x13f)][_0x14b354(0x12b)](),'statusCode':0xc8,'responseBody':JSON[_0x14b354(0x114)]({'oldStatus':_0x420e64[_0x14b354(0x13f)],'newStatus':_0x141816[_0x14b354(0x13f)],'paymentDetails':_0x141816[_0x14b354(0xce)],'checkedAt':new Date()[_0x14b354(0x173)]()})}}),await this[_0x14b354(0xea)](_0x420e64,_0x141816['status']),await this['sendPaymentStatusNotification'](_0x420e64,_0x141816['status']),_0x141816['status']!=='PENDING'&&(console[_0x14b354(0x15c)](_0x14b354(0x123)+_0x420e64['id']+_0x14b354(0x17f)+_0x141816['status']+',\x20clearing\x20individual\x20timers'),this['clearPaymentTimers'](_0x420e64['id'])),console[_0x14b354(0x15c)]('✅\x20[CHECK]\x20Payment\x20'+_0x420e64['id']+_0x14b354(0x122));}else console[_0x14b354(0x15c)](_0x14b354(0xe3)+_0x420e64['id']+_0x14b354(0x186)+_0x141816[_0x14b354(0x13f)]+')'),this[_0x14b354(0x121)](_0x420e64['id'],_0x420e64['gatewayPaymentId'],_0x420e64[_0x14b354(0x13f)],_0x141816[_0x14b354(0x13f)],_0x14b354(0xe4),{'statusUnchanged':!![],'paymentDetails':_0x141816[_0x14b354(0xce)],'amount':_0x141816['amount'],'currency':_0x141816[_0x14b354(0xc0)],'shopId':_0x420e64['shopId'],'checkTimestamp':new Date()[_0x14b354(0x173)]()});}catch(_0x409c78){console[_0x14b354(0x138)]('❌\x20[CHECK]\x20Failed\x20to\x20check\x20payment\x20'+_0x420e64['id']+':',_0x409c78),this[_0x14b354(0x116)](_0x420e64['id'],_0x420e64[_0x14b354(0xd9)],_0x409c78,_0x14b354(0xe4),{'paymentAmount':_0x420e64[_0x14b354(0x134)],'paymentCurrency':_0x420e64[_0x14b354(0xc0)],'shopId':_0x420e64[_0x14b354(0x101)],'createdAt':_0x420e64[_0x14b354(0x142)]}),await database_1[_0x14b354(0x137)][_0x14b354(0xdd)][_0x14b354(0x143)]({'data':{'paymentId':_0x420e64['id'],'shopId':_0x420e64[_0x14b354(0x101)],'event':'cointopay_status_check_error','statusCode':0x1f4,'responseBody':JSON[_0x14b354(0x114)]({'error':_0x409c78 instanceof Error?_0x409c78[_0x14b354(0x147)]:_0x14b354(0x187),'gatewayPaymentId':_0x420e64[_0x14b354(0xd9)],'checkedAt':new Date()[_0x14b354(0x173)]()})}});}}async['sendShopWebhook'](_0x106780,_0x3eb293){const _0x2a89c0=a37_0x226910,_0x96debe=Date[_0x2a89c0(0x1a1)]();try{const _0x588932=_0x106780[_0x2a89c0(0x10c)],_0x2fdfdc=_0x588932['settings'];if(!_0x2fdfdc?.[_0x2a89c0(0xbb)]){console[_0x2a89c0(0x15c)](_0x2a89c0(0x16d)+_0x588932['id']);return;}const _0xbb814=_0x3eb293===_0x2a89c0(0x182)?_0x2a89c0(0x183):_0x3eb293===_0x2a89c0(0x140)?_0x2a89c0(0xc4):_0x3eb293==='EXPIRED'?'payment.failed':_0x2a89c0(0xd4);if(!_0x2fdfdc[_0x2a89c0(0x150)]?.[_0x2a89c0(0x19a)](_0xbb814)){console[_0x2a89c0(0x15c)](_0x2a89c0(0xc1)+_0xbb814+_0x2a89c0(0x146)+_0x588932['id']);return;}const _0x3cc438=(0x0,gateway_1['getGatewayIdByName'])(_0x106780['gateway'])||_0x106780['gateway'],_0x6c6c4={'event':_0xbb814,'payment':{'id':_0x106780['id'],'order_id':_0x106780[_0x2a89c0(0x14b)],'gateway_order_id':_0x106780[_0x2a89c0(0x120)],'gateway':_0x3cc438,'amount':_0x106780[_0x2a89c0(0x134)],'currency':_0x106780['currency'],'status':_0x3eb293[_0x2a89c0(0x12b)](),'customer_email':_0x106780['customerEmail'],'customer_name':_0x106780[_0x2a89c0(0xe0)],'created_at':_0x106780[_0x2a89c0(0x142)],'updated_at':new Date()}},_0x2a4e70=await fetch(_0x2fdfdc['webhookUrl'],{'method':_0x2a89c0(0xc3),'headers':{'Content-Type':_0x2a89c0(0xc6),'User-Agent':_0x2a89c0(0x15e)},'body':JSON['stringify'](_0x6c6c4)}),_0x137894=Date[_0x2a89c0(0x1a1)]()-_0x96debe,_0x4d0cb1=_0x2a4e70['ok']?_0x2a89c0(0xc9):await _0x2a4e70[_0x2a89c0(0x118)]();loggerService_1['loggerService']['logShopWebhookSent'](_0x106780[_0x2a89c0(0x101)],_0x2fdfdc[_0x2a89c0(0xbb)],_0xbb814,_0x2a4e70['status'],_0x137894,_0x6c6c4),console[_0x2a89c0(0x15c)](_0x2a89c0(0x12e)+_0x2fdfdc[_0x2a89c0(0xbb)]+_0x2a89c0(0xd2)+_0x2a4e70[_0x2a89c0(0x13f)]+'\x20('+_0x137894+_0x2a89c0(0x11f));}catch(_0x442e8f){console[_0x2a89c0(0x138)](_0x2a89c0(0x107),_0x442e8f),loggerService_1['loggerService'][_0x2a89c0(0xc7)](_0x106780[_0x2a89c0(0x101)],_0x106780[_0x2a89c0(0x10c)]?.[_0x2a89c0(0xf8)]?.[_0x2a89c0(0xbb)]||_0x2a89c0(0x135),'webhook_send',_0x442e8f,{});}}async[a37_0x226910(0x17c)](_0x841206,_0x56f631){const _0x229dba=a37_0x226910;try{const _0x2ee89e={'PENDING':_0x229dba(0x1a3),'PAID':'paid','FAILED':_0x229dba(0xe5),'EXPIRED':_0x229dba(0x131)},_0x6aff25=_0x2ee89e[_0x56f631];if(!_0x6aff25||_0x6aff25===_0x229dba(0x1a3))return;await telegramBotService_1[_0x229dba(0xc5)]['sendPaymentNotification'](_0x841206[_0x229dba(0x101)],_0x841206,_0x6aff25);}catch(_0x19f59f){console['error'](_0x229dba(0xf0),_0x19f59f);}}async[a37_0x226910(0xb6)](_0x2e00cc){const _0x378543=a37_0x226910;console['log'](_0x378543(0x17b)+_0x2e00cc);const _0x529637=await database_1['default'][_0x378543(0x16f)][_0x378543(0xb5)]({'where':{'id':_0x2e00cc},'include':{'shop':{'select':{'id':!![],'name':!![],'settings':{'select':{'webhookUrl':!![],'webhookEvents':!![]}}}}}});if(!_0x529637)throw new Error('Payment\x20not\x20found');if(_0x529637[_0x378543(0x165)]!==_0x378543(0x159)&&_0x529637[_0x378543(0x165)]!==_0x378543(0x1a5))throw new Error(_0x378543(0x136));console['log'](_0x378543(0xf5)+_0x529637['gateway']+'\x20payment\x20'+_0x2e00cc),await this[_0x378543(0xdc)](_0x529637),console[_0x378543(0x15c)](_0x378543(0x197)+_0x2e00cc);}[a37_0x226910(0xe2)](){const _0x1f8ae7=a37_0x226910,_0x3e57a5=this['globalCheckInterval']?this[_0x1f8ae7(0x13b)]:undefined,_0x4f7d5b=Array[_0x1f8ae7(0x144)](this[_0x1f8ae7(0x11d)][_0x1f8ae7(0xec)]())['map'](_0x44c707=>({'paymentId':_0x44c707[_0x1f8ae7(0x119)],'gatewayPaymentId':_0x44c707[_0x1f8ae7(0xd9)],'createdAt':_0x44c707[_0x1f8ae7(0x142)],'timersCount':_0x44c707[_0x1f8ae7(0x1a4)][_0x1f8ae7(0xda)]}));return{'isActive':!!this[_0x1f8ae7(0x180)],'globalCheckIntervalMinutes':this[_0x1f8ae7(0x13b)]/(0x3e8*0x3c),'expiryDays':this[_0x1f8ae7(0xcc)],'activeIndividualTimers':this[_0x1f8ae7(0x11d)][_0x1f8ae7(0xe7)],'nextGlobalCheckIn':_0x3e57a5,'paymentTimersDetails':_0x4f7d5b};}[a37_0x226910(0x11a)](_0x5a49b9){const _0x2fcf09=a37_0x226910,_0x589492=this['paymentTimers'][_0x2fcf09(0x171)](_0x5a49b9);if(_0x589492)return{'hasTimers':!![],'timersCount':_0x589492['timers']['length'],'createdAt':_0x589492['createdAt'],'gatewayPaymentId':_0x589492['gatewayPaymentId']};return{'hasTimers':![]};}}exports['CoinToPayStatusService']=CoinToPayStatusService,exports[a37_0x226910(0x112)]=new CoinToPayStatusService();