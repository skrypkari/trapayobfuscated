'use strict';function a52_0xdaa8(){const _0x3d7056=['Failed\x20to\x20download\x20photo:','cmd_statistics','EXPIRED','ðŸ“ˆ\x20Statistics','uptime','broadcast_send','botActive','cwd','ðŸ”§\x20Debug','defineProperty','back_to_stats_menu','message','âœ…\x20Admin\x20Telegram\x20bot\x20initialized\x20successfully','âœ…\x20Successful\x20Payments\x20\x5c-\x20','ðŸ“…\x20Last\x20Month','ðŸ“Š\x20*Statistics:\x20','ðŸ’¬\x20Create\x20Broadcast','initializeBot','ðŸ“¢\x20*Broadcast\x20Preview*\x0a\x0a','includes','dirname','chat','ðŸ”„\x20Refunds\x20\x5c-\x20','\x20merchants...','ðŸ”\x20*Debug\x20Information*\x0a\x0a','âŒ\x20Cancel','message_id','ðŸ”™\x20Back','caption','stats_all_time','telegramUser','âŒ\x20Failed\x20Payments\x20\x5c-\x20','ðŸ“…\x20Today','telegramId','âŒ\x20No\x20message\x20to\x20send','stats_this_month','25236NBlamj','adminCount','trim','Error\x20handling\x20/debug\x20command:','Failed\x20to\x20send\x20to\x20','length','file_id','478482UuXffu','amountUSDT','\x0a\x0a_Ready\x20to\x20send?_','payment','version','filter','â›”ï¸\x20Access\x20Denied','stats_last_month','getAdminIds','join','ðŸ†”\x20Your\x20ID:\x20`','ðŸ“†\x20Last\x20Month','âš ï¸\x20Chargebacks\x20\x5c-\x20','toFixed','â°\x20Timestamp:\x20','Error\x20sending\x20broadcast:','Markdown','setupBotHandlers','ðŸ›‘\x20Admin\x20Telegram\x20bot\x20stopped','FAILED','photoFileId','adminIds','broadcastSessions','âœ…\x20*Broadcast\x20Complete*\x0a\x0a','__importDefault','config','../config/database','timestamp','__esModule','\x20USDT\x0a','32567095xbMocj','ðŸ”\x20*TRAPAY\x20Admin\x20Bot*\x0a\x0aâœ…\x20You\x20are\x20authorized\x20as\x20admin.','REFUND','ðŸ“…\x20Yesterday','getUTCDate','ðŸ“…\x20This\x20Month','yourId','ðŸ’°\x20Turnover\x20\x5c-\x20','awaiting_text','ðŸ“†\x20This\x20Month','data','adminBotService','MarkdownV2','set','ðŸ“¤\x20Sending\x20broadcast...','ðŸ‘¥\x20Admin\x20Count:\x20','botToken','mkdirSync','4939700gPuYFz','stopBot','\x20-\x20','âŒ\x20Error\x20getting\x20debug\x20information','getFileLink','stats_today','7PaIZUb','handleBroadcast','step','stats_yesterday','ðŸ¤–\x20Bot\x20Status:\x20','isAdmin','error','ðŸ“¤\x20Sent:\x20','utf-8','findMany','status','answerCallbackQuery','â¬…ï¸\x20Back','PAID','âœ…\x20Admin\x20IDs\x20updated:','All\x20Time','photo','You\x20are\x20not\x20authorized\x20to\x20use\x20this\x20bot.\x0a','ðŸ“†\x20All\x20Time','default','sendPhoto','Error\x20handling\x20debug\x20command:','amountAfterGatewayCommissionUSDT','floor','ðŸ“Š\x20*Statistics*\x0a\x0aSelect\x20period:','cmd_broadcast','stats_','Admin\x20Telegram\x20bot\x20error:','ðŸ“‹\x20Admins:\x20`','saveConfig','warn','writeFileSync','back_to_main','âŒ\x20Error\x20sending\x20broadcast','Error\x20getting\x20statistics:','974945KmotIh','getUTCMonth','âŒ\x20Inactive','preview','40fhfeFI','TELEGRAM_ADMIN_BOT_TOKEN\x20not\x20found\x20in\x20environment\x20variables','arrayBuffer','onText','replace','654058HZqvMe','âœ…\x20Delivered:\x20','log','Error\x20loading\x20admin\x20bot\x20config:','existsSync','ðŸ“¤\x20Sending\x20broadcast\x20to\x20','AdminBotService','146tolSaR','getUTCFullYear','â±\x20Uptime:\x20','editMessageText','from','âŒ\x20Error\x20getting\x20statistics','delete','cmd_debug','text','loadConfig','UTC','3824sfDsxZ','nodeVersion','path','sendMessage','Error\x20saving\x20admin\x20bot\x20config:','admins','get','startsWith','ðŸ“¦\x20Node:\x20','toString','23154RzupRw','ðŸ“¢\x20*Create\x20Broadcast*\x0a\x0aPlease\x20enter\x20the\x20message\x20text\x20you\x20want\x20to\x20send\x20to\x20all\x20merchants:','broadcast_cancel','bot','ðŸ“…\x20All\x20Time','toISOString','âŒ\x20Not\x20Delivered:\x20','padStart','âŒ\x20Failed\x20to\x20download\x20photo'];a52_0xdaa8=function(){return _0x3d7056;};return a52_0xdaa8();}const a52_0x180294=a52_0x5ec3;(function(_0x532387,_0x2e3d60){const _0x4c4f19=a52_0x5ec3,_0x2cec17=_0x532387();while(!![]){try{const _0x36ca18=parseInt(_0x4c4f19(0x153))/0x1+-parseInt(_0x4c4f19(0x15a))/0x2*(parseInt(_0x4c4f19(0xbd))/0x3)+parseInt(_0x4c4f19(0x14e))/0x4*(parseInt(_0x4c4f19(0x14a))/0x5)+parseInt(_0x4c4f19(0xf1))/0x6*(parseInt(_0x4c4f19(0x127))/0x7)+-parseInt(_0x4c4f19(0xb3))/0x8*(-parseInt(_0x4c4f19(0xea))/0x9)+parseInt(_0x4c4f19(0x121))/0xa+-parseInt(_0x4c4f19(0x10f))/0xb;if(_0x36ca18===_0x2e3d60)break;else _0x2cec17['push'](_0x2cec17['shift']());}catch(_0x6fba28){_0x2cec17['push'](_0x2cec17['shift']());}}}(a52_0xdaa8,0xf2a7e));var __importDefault=this&&this[a52_0x180294(0x109)]||function(_0x3f2b93){const _0x7772fa=a52_0x180294;return _0x3f2b93&&_0x3f2b93[_0x7772fa(0x10d)]?_0x3f2b93:{'default':_0x3f2b93};};function a52_0x5ec3(_0xb45f73,_0x239d8d){_0xb45f73=_0xb45f73-0xaa;const _0xdaa8f5=a52_0xdaa8();let _0x5ec366=_0xdaa8f5[_0xb45f73];return _0x5ec366;}Object[a52_0x180294(0xcf)](exports,a52_0x180294(0x10d),{'value':!![]}),exports[a52_0x180294(0x11a)]=exports[a52_0x180294(0x159)]=void 0x0;const node_telegram_bot_api_1=__importDefault(require('node-telegram-bot-api')),fs_1=__importDefault(require('fs')),path_1=__importDefault(require(a52_0x180294(0xb5))),CONFIG_PATH=path_1['default']['join'](process[a52_0x180294(0xcd)](),'data','adminBotConfig.json');class AdminBotService{constructor(){const _0x241d92=a52_0x180294;this['bot']=null,this[_0x241d92(0x107)]=new Map(),this['botToken']=process.env.TELEGRAM_ADMIN_BOT_TOKEN||'',this[_0x241d92(0x10a)]=this[_0x241d92(0xb1)](),this[_0x241d92(0x11f)]?this[_0x241d92(0xd7)]():console[_0x241d92(0x145)](_0x241d92(0x14f));}[a52_0x180294(0xb1)](){const _0x383a0c=a52_0x180294;try{if(fs_1[_0x383a0c(0x13a)]['existsSync'](CONFIG_PATH)){const _0x362efe=fs_1[_0x383a0c(0x13a)]['readFileSync'](CONFIG_PATH,_0x383a0c(0x12f));return JSON['parse'](_0x362efe);}}catch(_0x2f25a7){console['error'](_0x383a0c(0x156),_0x2f25a7);}return{'adminIds':[]};}[a52_0x180294(0x144)](){const _0x3736bc=a52_0x180294;try{const _0x370bcf=path_1[_0x3736bc(0x13a)][_0x3736bc(0xda)](CONFIG_PATH);!fs_1[_0x3736bc(0x13a)][_0x3736bc(0x157)](_0x370bcf)&&fs_1['default'][_0x3736bc(0x120)](_0x370bcf,{'recursive':!![]}),fs_1[_0x3736bc(0x13a)][_0x3736bc(0x146)](CONFIG_PATH,JSON['stringify'](this[_0x3736bc(0x10a)],null,0x2));}catch(_0x59a8fa){console[_0x3736bc(0x12d)](_0x3736bc(0xb7),_0x59a8fa);}}[a52_0x180294(0x12c)](_0x386125){const _0x431ded=a52_0x180294;return this[_0x431ded(0x10a)][_0x431ded(0x106)][_0x431ded(0xd9)](_0x386125);}['initializeBot'](){const _0xd10a71=a52_0x180294;try{this[_0xd10a71(0xc0)]=new node_telegram_bot_api_1[(_0xd10a71(0x13a))](this[_0xd10a71(0x11f)],{'polling':!![]}),this[_0xd10a71(0x102)](),console[_0xd10a71(0x155)](_0xd10a71(0xd2));}catch(_0x10b844){console[_0xd10a71(0x12d)]('âŒ\x20Failed\x20to\x20initialize\x20Admin\x20Telegram\x20bot:',_0x10b844);}}[a52_0x180294(0x102)](){const _0x17cc20=a52_0x180294;if(!this['bot'])return;this[_0x17cc20(0xc0)][_0x17cc20(0x151)](/\/start/,async _0x3ef124=>{const _0x2ac1f9=_0x17cc20,_0x1ac1fa=_0x3ef124[_0x2ac1f9(0xdb)]['id'],_0x55ad89=_0x3ef124[_0x2ac1f9(0xac)]?.['id'][_0x2ac1f9(0xbc)]();if(!_0x55ad89)return;if(this['isAdmin'](_0x55ad89)){const _0x55bf77={'inline_keyboard':[[{'text':_0x2ac1f9(0xc9),'callback_data':_0x2ac1f9(0xc7)}],[{'text':'ðŸ’¬\x20Create\x20Broadcast','callback_data':'cmd_broadcast'}],[{'text':_0x2ac1f9(0xce),'callback_data':_0x2ac1f9(0xaf)}]]};await this[_0x2ac1f9(0xc0)]?.[_0x2ac1f9(0xb6)](_0x1ac1fa,_0x2ac1f9(0x110),{'parse_mode':'Markdown','reply_markup':_0x55bf77});}else await this[_0x2ac1f9(0xc0)]?.[_0x2ac1f9(0xb6)](_0x1ac1fa,'â›”ï¸\x20Access\x20Denied\x0a\x0a'+_0x2ac1f9(0x138)+'Contact\x20system\x20administrator.',{'parse_mode':_0x2ac1f9(0x101)});}),this['bot'][_0x17cc20(0x151)](/\/debug/,async _0x22dea9=>{const _0x21808b=_0x17cc20,_0x203752=_0x22dea9[_0x21808b(0xdb)]['id'],_0x3b52cc=_0x22dea9['from']?.['id'][_0x21808b(0xbc)]();if(!_0x3b52cc)return;if(!this['isAdmin'](_0x3b52cc)){await this[_0x21808b(0xc0)]?.[_0x21808b(0xb6)](_0x203752,_0x21808b(0xf7));return;}try{const _0x3369e2={'botActive':!!this[_0x21808b(0xc0)],'adminCount':this[_0x21808b(0x10a)]['adminIds'][_0x21808b(0xef)],'admins':this['config'][_0x21808b(0x106)],'yourId':_0x3b52cc,'timestamp':new Date()[_0x21808b(0xc2)](),'nodeVersion':process[_0x21808b(0xf5)],'uptime':process['uptime']()};let _0x41061b='ðŸ”\x20*Debug\x20Information*\x0a\x0a';_0x41061b+=_0x21808b(0x12b)+(_0x3369e2[_0x21808b(0xcc)]?'âœ…\x20Active':_0x21808b(0x14c))+'\x0a',_0x41061b+=_0x21808b(0x11e)+_0x3369e2[_0x21808b(0xeb)]+'\x0a',_0x41061b+=_0x21808b(0x143)+_0x3369e2[_0x21808b(0xb8)][_0x21808b(0xfa)](',\x20')+'`\x0a',_0x41061b+=_0x21808b(0xfb)+_0x3369e2['yourId']+'`\x0a',_0x41061b+='â°\x20Timestamp:\x20'+_0x3369e2['timestamp']+'\x0a',_0x41061b+=_0x21808b(0xbb)+_0x3369e2[_0x21808b(0xb4)]+'\x0a',_0x41061b+='â±\x20Uptime:\x20'+Math[_0x21808b(0x13e)](_0x3369e2[_0x21808b(0xca)])+'s',await this[_0x21808b(0xc0)]?.['sendMessage'](_0x203752,_0x41061b,{'parse_mode':_0x21808b(0x101)});}catch(_0x45cacc){console['error'](_0x21808b(0xed),_0x45cacc),await this[_0x21808b(0xc0)]?.[_0x21808b(0xb6)](_0x203752,_0x21808b(0x124));}}),this[_0x17cc20(0xc0)][_0x17cc20(0x151)](/\/statistics/,async _0x27c7c6=>{const _0x17c492=_0x17cc20,_0x4e600f=_0x27c7c6[_0x17c492(0xdb)]['id'],_0x285c88=_0x27c7c6[_0x17c492(0xac)]?.['id'][_0x17c492(0xbc)]();if(!_0x285c88)return;if(!this[_0x17c492(0x12c)](_0x285c88)){await this['bot']?.[_0x17c492(0xb6)](_0x4e600f,'â›”ï¸\x20Access\x20Denied');return;}const _0x11e5b4={'inline_keyboard':[[{'text':_0x17c492(0xe6),'callback_data':_0x17c492(0x126)}],[{'text':_0x17c492(0x112),'callback_data':_0x17c492(0x12a)}],[{'text':_0x17c492(0x114),'callback_data':_0x17c492(0xe9)}],[{'text':_0x17c492(0xd4),'callback_data':_0x17c492(0xf8)}],[{'text':_0x17c492(0xc1),'callback_data':_0x17c492(0xe3)}]]};await this[_0x17c492(0xc0)]?.[_0x17c492(0xb6)](_0x4e600f,_0x17c492(0x13f),{'parse_mode':_0x17c492(0x101),'reply_markup':_0x11e5b4});}),this[_0x17cc20(0xc0)]['on']('callback_query',async _0x4753d1=>{const _0x36e6e1=_0x17cc20,_0x2b98cd=_0x4753d1[_0x36e6e1(0xd1)]?.['chat']['id'],_0x56beba=_0x4753d1[_0x36e6e1(0xac)]?.['id'][_0x36e6e1(0xbc)](),_0xcec573=_0x4753d1[_0x36e6e1(0x119)];if(!_0x2b98cd||!_0x56beba||!_0xcec573)return;if(!this['isAdmin'](_0x56beba)){await this[_0x36e6e1(0xc0)]?.[_0x36e6e1(0x132)](_0x4753d1['id'],{'text':_0x36e6e1(0xf7)});return;}if(_0xcec573===_0x36e6e1(0xc7)){const _0x335f55={'inline_keyboard':[[{'text':_0x36e6e1(0xe6),'callback_data':_0x36e6e1(0x126)}],[{'text':_0x36e6e1(0x112),'callback_data':_0x36e6e1(0x12a)}],[{'text':'ðŸ“…\x20This\x20Month','callback_data':_0x36e6e1(0xe9)}],[{'text':_0x36e6e1(0xd4),'callback_data':_0x36e6e1(0xf8)}],[{'text':_0x36e6e1(0xc1),'callback_data':_0x36e6e1(0xe3)}],[{'text':_0x36e6e1(0xe1),'callback_data':'back_to_main'}]]};await this['bot']?.['editMessageText']('ðŸ“Š\x20*Statistics*\x0a\x0aSelect\x20period:',{'chat_id':_0x2b98cd,'message_id':_0x4753d1[_0x36e6e1(0xd1)]?.['message_id'],'parse_mode':_0x36e6e1(0x101),'reply_markup':_0x335f55}),await this[_0x36e6e1(0xc0)]?.[_0x36e6e1(0x132)](_0x4753d1['id']);}else{if(_0xcec573===_0x36e6e1(0xaf))try{const _0x102e37={'botActive':!!this['bot'],'adminCount':this['config']['adminIds'][_0x36e6e1(0xef)],'admins':this[_0x36e6e1(0x10a)]['adminIds'],'yourId':_0x56beba,'timestamp':new Date()[_0x36e6e1(0xc2)](),'nodeVersion':process[_0x36e6e1(0xf5)],'uptime':process[_0x36e6e1(0xca)]()};let _0x467d9e=_0x36e6e1(0xde);_0x467d9e+=_0x36e6e1(0x12b)+(_0x102e37[_0x36e6e1(0xcc)]?'âœ…\x20Active':'âŒ\x20Inactive')+'\x0a',_0x467d9e+=_0x36e6e1(0x11e)+_0x102e37[_0x36e6e1(0xeb)]+'\x0a',_0x467d9e+=_0x36e6e1(0x143)+_0x102e37[_0x36e6e1(0xb8)]['join'](',\x20')+'`\x0a',_0x467d9e+=_0x36e6e1(0xfb)+_0x102e37[_0x36e6e1(0x115)]+'`\x0a',_0x467d9e+=_0x36e6e1(0xff)+_0x102e37[_0x36e6e1(0x10c)]+'\x0a',_0x467d9e+='ðŸ“¦\x20Node:\x20'+_0x102e37[_0x36e6e1(0xb4)]+'\x0a',_0x467d9e+=_0x36e6e1(0xaa)+Math[_0x36e6e1(0x13e)](_0x102e37[_0x36e6e1(0xca)])+'s';const _0x7ee67a={'inline_keyboard':[[{'text':_0x36e6e1(0x133),'callback_data':_0x36e6e1(0x147)}]]};await this['bot']?.['editMessageText'](_0x467d9e,{'chat_id':_0x2b98cd,'message_id':_0x4753d1[_0x36e6e1(0xd1)]?.[_0x36e6e1(0xe0)],'parse_mode':_0x36e6e1(0x101),'reply_markup':_0x7ee67a}),await this[_0x36e6e1(0xc0)]?.[_0x36e6e1(0x132)](_0x4753d1['id']);}catch(_0x478a19){console['error'](_0x36e6e1(0x13c),_0x478a19),await this[_0x36e6e1(0xc0)]?.[_0x36e6e1(0x132)](_0x4753d1['id'],{'text':_0x36e6e1(0x124)});}else{if(_0xcec573===_0x36e6e1(0x140))this['broadcastSessions'][_0x36e6e1(0x11c)](_0x2b98cd,{'step':_0x36e6e1(0x117)}),await this[_0x36e6e1(0xc0)]?.['editMessageText'](_0x36e6e1(0xbe),{'chat_id':_0x2b98cd,'message_id':_0x4753d1[_0x36e6e1(0xd1)]?.[_0x36e6e1(0xe0)],'parse_mode':_0x36e6e1(0x101)}),await this[_0x36e6e1(0xc0)]?.[_0x36e6e1(0x132)](_0x4753d1['id']);else{if(_0xcec573===_0x36e6e1(0xbf))this[_0x36e6e1(0x107)][_0x36e6e1(0xae)](_0x2b98cd),await this[_0x36e6e1(0xc0)]?.[_0x36e6e1(0xb6)](_0x2b98cd,'âŒ\x20Broadcast\x20cancelled'),await this[_0x36e6e1(0xc0)]?.[_0x36e6e1(0x132)](_0x4753d1['id']);else{if(_0xcec573===_0x36e6e1(0xcb)){const _0x565b20=this[_0x36e6e1(0x107)][_0x36e6e1(0xb9)](_0x2b98cd);if(!_0x565b20||!_0x565b20[_0x36e6e1(0xb0)]&&!_0x565b20[_0x36e6e1(0x105)]){await this[_0x36e6e1(0xc0)]?.[_0x36e6e1(0x132)](_0x4753d1['id'],{'text':_0x36e6e1(0xe8)});return;}await this['bot']?.['answerCallbackQuery'](_0x4753d1['id'],{'text':_0x36e6e1(0x11d)}),await this[_0x36e6e1(0x128)](_0x2b98cd,_0x565b20[_0x36e6e1(0xb0)]||'',_0x565b20['photoFileId']),this[_0x36e6e1(0x107)][_0x36e6e1(0xae)](_0x2b98cd);}else{if(_0xcec573[_0x36e6e1(0xba)](_0x36e6e1(0x141)))await this['handleStatistics'](_0x2b98cd,_0xcec573,_0x4753d1[_0x36e6e1(0xd1)]?.[_0x36e6e1(0xe0)]),await this[_0x36e6e1(0xc0)]?.['answerCallbackQuery'](_0x4753d1['id']);else{if(_0xcec573===_0x36e6e1(0x147)){const _0x32565e={'inline_keyboard':[[{'text':'ðŸ“ˆ\x20Statistics','callback_data':_0x36e6e1(0xc7)}],[{'text':_0x36e6e1(0xd6),'callback_data':_0x36e6e1(0x140)}],[{'text':_0x36e6e1(0xce),'callback_data':_0x36e6e1(0xaf)}]]};await this[_0x36e6e1(0xc0)]?.[_0x36e6e1(0xab)](_0x36e6e1(0x110),{'chat_id':_0x2b98cd,'message_id':_0x4753d1[_0x36e6e1(0xd1)]?.[_0x36e6e1(0xe0)],'parse_mode':_0x36e6e1(0x101),'reply_markup':_0x32565e}),await this[_0x36e6e1(0xc0)]?.[_0x36e6e1(0x132)](_0x4753d1['id']);}else{if(_0xcec573===_0x36e6e1(0xd0)){const _0x353ab3={'inline_keyboard':[[{'text':'ï¿½\x20Today','callback_data':'stats_today'}],[{'text':'ðŸ“†\x20Yesterday','callback_data':_0x36e6e1(0x12a)}],[{'text':_0x36e6e1(0x118),'callback_data':_0x36e6e1(0xe9)}],[{'text':_0x36e6e1(0xfc),'callback_data':_0x36e6e1(0xf8)}],[{'text':_0x36e6e1(0x139),'callback_data':'stats_all_time'}],[{'text':_0x36e6e1(0x133),'callback_data':_0x36e6e1(0x147)}]]};await this[_0x36e6e1(0xc0)]?.[_0x36e6e1(0xab)](_0x36e6e1(0x13f),{'chat_id':_0x2b98cd,'message_id':_0x4753d1[_0x36e6e1(0xd1)]?.[_0x36e6e1(0xe0)],'parse_mode':_0x36e6e1(0x101),'reply_markup':_0x353ab3}),await this[_0x36e6e1(0xc0)]?.[_0x36e6e1(0x132)](_0x4753d1['id']);}}}}}}}}}),this[_0x17cc20(0xc0)]['on']('message',async _0x4cbcdd=>{const _0x1cf99d=_0x17cc20,_0x25c7bb=_0x4cbcdd[_0x1cf99d(0xdb)]['id'],_0x23d5bf=_0x4cbcdd[_0x1cf99d(0xac)]?.['id'][_0x1cf99d(0xbc)](),_0x231a85=_0x4cbcdd['text']||_0x4cbcdd[_0x1cf99d(0xe2)],_0x47d7be=_0x4cbcdd[_0x1cf99d(0x137)];if(!_0x23d5bf)return;if(!this[_0x1cf99d(0x12c)](_0x23d5bf))return;if(_0x231a85&&_0x231a85[_0x1cf99d(0xba)]('/'))return;const _0x55d8e0=this['broadcastSessions'][_0x1cf99d(0xb9)](_0x25c7bb);if(!_0x55d8e0)return;if(_0x55d8e0['step']===_0x1cf99d(0x117)){if(!_0x231a85&&!_0x47d7be)return;_0x55d8e0[_0x1cf99d(0xb0)]=_0x231a85||'';_0x47d7be&&_0x47d7be[_0x1cf99d(0xef)]>0x0&&(_0x55d8e0[_0x1cf99d(0x105)]=_0x47d7be[_0x47d7be['length']-0x1][_0x1cf99d(0xf0)]);_0x55d8e0[_0x1cf99d(0x129)]=_0x1cf99d(0x14d);const _0x4c087f={'inline_keyboard':[[{'text':_0x1cf99d(0xdf),'callback_data':_0x1cf99d(0xbf)},{'text':'ðŸ“¤\x20Send','callback_data':_0x1cf99d(0xcb)}]]};_0x55d8e0[_0x1cf99d(0x105)]?await this[_0x1cf99d(0xc0)]?.[_0x1cf99d(0x13b)](_0x25c7bb,_0x55d8e0[_0x1cf99d(0x105)],{'caption':_0x1cf99d(0xd8)+_0x55d8e0[_0x1cf99d(0xb0)]+_0x1cf99d(0xf3),'parse_mode':'Markdown','reply_markup':_0x4c087f}):await this[_0x1cf99d(0xc0)]?.[_0x1cf99d(0xb6)](_0x25c7bb,'ðŸ“¢\x20*Broadcast\x20Preview*\x0a\x0a'+_0x55d8e0[_0x1cf99d(0xb0)]+_0x1cf99d(0xf3),{'parse_mode':_0x1cf99d(0x101),'reply_markup':_0x4c087f});}}),this[_0x17cc20(0xc0)]['on'](_0x17cc20(0x12d),_0x2061cd=>{const _0x17e19f=_0x17cc20;console[_0x17e19f(0x12d)](_0x17e19f(0x142),_0x2061cd);});}async[a52_0x180294(0x128)](_0x4a4710,_0x4080f3,_0xbb8d32){const _0x52a479=a52_0x180294;try{const _0x1246f1=require(_0x52a479(0x10b))[_0x52a479(0x13a)],_0x1aa107=require('node-telegram-bot-api'),_0x421918=process.env.TELEGRAM_BOT_TOKEN;if(!_0x421918){await this[_0x52a479(0xc0)]?.[_0x52a479(0xb6)](_0x4a4710,'âŒ\x20Merchant\x20bot\x20token\x20not\x20configured');return;}const _0x230b05=new _0x1aa107(_0x421918),_0x2e8b21=await _0x1246f1[_0x52a479(0xe4)][_0x52a479(0x130)]({'where':{'shopId':{'not':null},'isVerified':!![]},'select':{'telegramId':!![]}}),_0x34601d=_0x2e8b21[_0x52a479(0xef)];let _0x5c17f9=0x0,_0x555c3b=0x0,_0x182936=0x0;await this[_0x52a479(0xc0)]?.[_0x52a479(0xb6)](_0x4a4710,_0x52a479(0x158)+_0x34601d+_0x52a479(0xdd));let _0x5beb7b=null;if(_0xbb8d32&&this[_0x52a479(0xc0)])try{const _0x2b21e0=await this['bot'][_0x52a479(0x125)](_0xbb8d32),_0x1d1c27=await fetch(_0x2b21e0);_0x5beb7b=Buffer[_0x52a479(0xac)](await _0x1d1c27[_0x52a479(0x150)]());}catch(_0x17216a){console[_0x52a479(0x12d)](_0x52a479(0xc6),_0x17216a),await this[_0x52a479(0xc0)]?.[_0x52a479(0xb6)](_0x4a4710,_0x52a479(0xc5));return;}for(const _0x241061 of _0x2e8b21){try{_0x5beb7b?await _0x230b05[_0x52a479(0x13b)](_0x241061[_0x52a479(0xe7)],_0x5beb7b,{'caption':_0x4080f3,'parse_mode':'Markdown'}):await _0x230b05[_0x52a479(0xb6)](_0x241061[_0x52a479(0xe7)],_0x4080f3,{'parse_mode':'Markdown'}),_0x5c17f9++,_0x555c3b++,await new Promise(_0x1204c3=>setTimeout(_0x1204c3,0x64));}catch(_0x359f24){_0x5c17f9++,_0x182936++,console[_0x52a479(0x12d)](_0x52a479(0xee)+_0x241061['telegramId']+':',_0x359f24[_0x52a479(0xd1)]);}}const _0x148180=_0x52a479(0x108)+('ðŸ‘¥\x20Total\x20Merchants:\x20'+_0x34601d+'\x0a')+(_0x52a479(0x12e)+_0x5c17f9+'\x0a')+(_0x52a479(0x154)+_0x555c3b+'\x0a')+(_0x52a479(0xc3)+_0x182936);await this['bot']?.[_0x52a479(0xb6)](_0x4a4710,_0x148180,{'parse_mode':'Markdown'});}catch(_0x41df10){console[_0x52a479(0x12d)](_0x52a479(0x100),_0x41df10),await this[_0x52a479(0xc0)]?.[_0x52a479(0xb6)](_0x4a4710,_0x52a479(0x148));}}async['handleStatistics'](_0x3610b8,_0x2d254f,_0x2fb949){const _0x59ac00=a52_0x180294;try{const _0x27e846=require(_0x59ac00(0x10b))['default'],_0x12e5e5=new Date();let _0x562cbd,_0x448f90,_0x14128f;switch(_0x2d254f){case _0x59ac00(0x126):{const _0x4b6e93=new Date(Date[_0x59ac00(0xb2)](_0x12e5e5['getUTCFullYear'](),_0x12e5e5[_0x59ac00(0x14b)](),_0x12e5e5[_0x59ac00(0x113)]()));_0x562cbd=_0x4b6e93,_0x448f90=new Date(Date[_0x59ac00(0xb2)](_0x12e5e5['getUTCFullYear'](),_0x12e5e5['getUTCMonth'](),_0x12e5e5[_0x59ac00(0x113)](),0x17,0x3b,0x3b,0x3e7)),_0x14128f=_0x4b6e93[_0x59ac00(0x113)]()['toString']()[_0x59ac00(0xc4)](0x2,'0')+'.'+(_0x4b6e93[_0x59ac00(0x14b)]()+0x1)[_0x59ac00(0xbc)]()['padStart'](0x2,'0')+'.'+_0x4b6e93[_0x59ac00(0x15b)]();break;}case _0x59ac00(0x12a):{const _0x22306f=new Date(Date[_0x59ac00(0xb2)](_0x12e5e5[_0x59ac00(0x15b)](),_0x12e5e5[_0x59ac00(0x14b)](),_0x12e5e5['getUTCDate']()-0x1));_0x562cbd=_0x22306f,_0x448f90=new Date(Date[_0x59ac00(0xb2)](_0x12e5e5[_0x59ac00(0x15b)](),_0x12e5e5['getUTCMonth'](),_0x12e5e5['getUTCDate']()-0x1,0x17,0x3b,0x3b,0x3e7)),_0x14128f=_0x22306f[_0x59ac00(0x113)]()['toString']()[_0x59ac00(0xc4)](0x2,'0')+'.'+(_0x22306f[_0x59ac00(0x14b)]()+0x1)[_0x59ac00(0xbc)]()[_0x59ac00(0xc4)](0x2,'0')+'.'+_0x22306f[_0x59ac00(0x15b)]();break;}case _0x59ac00(0xe9):{const _0x3e892=new Date(Date[_0x59ac00(0xb2)](_0x12e5e5['getUTCFullYear'](),_0x12e5e5[_0x59ac00(0x14b)](),0x1));_0x562cbd=_0x3e892,_0x448f90=new Date(Date['UTC'](_0x12e5e5[_0x59ac00(0x15b)](),_0x12e5e5['getUTCMonth']()+0x1,0x0,0x17,0x3b,0x3b,0x3e7));const _0x40224d=new Date(Date['UTC'](_0x12e5e5[_0x59ac00(0x15b)](),_0x12e5e5['getUTCMonth']()+0x1,0x0));_0x14128f=_0x3e892[_0x59ac00(0x113)]()[_0x59ac00(0xbc)]()['padStart'](0x2,'0')+'.'+(_0x3e892['getUTCMonth']()+0x1)[_0x59ac00(0xbc)]()['padStart'](0x2,'0')+'.'+_0x3e892[_0x59ac00(0x15b)]()+_0x59ac00(0x123)+_0x40224d[_0x59ac00(0x113)]()[_0x59ac00(0xbc)]()[_0x59ac00(0xc4)](0x2,'0')+'.'+(_0x40224d[_0x59ac00(0x14b)]()+0x1)['toString']()['padStart'](0x2,'0')+'.'+_0x40224d['getUTCFullYear']();break;}case _0x59ac00(0xf8):{const _0x3b0719=new Date(Date[_0x59ac00(0xb2)](_0x12e5e5[_0x59ac00(0x15b)](),_0x12e5e5[_0x59ac00(0x14b)]()-0x1,0x1));_0x562cbd=_0x3b0719,_0x448f90=new Date(Date[_0x59ac00(0xb2)](_0x12e5e5['getUTCFullYear'](),_0x12e5e5[_0x59ac00(0x14b)](),0x0,0x17,0x3b,0x3b,0x3e7));const _0x276f8a=new Date(Date[_0x59ac00(0xb2)](_0x12e5e5['getUTCFullYear'](),_0x12e5e5[_0x59ac00(0x14b)](),0x0));_0x14128f=_0x3b0719[_0x59ac00(0x113)]()[_0x59ac00(0xbc)]()[_0x59ac00(0xc4)](0x2,'0')+'.'+(_0x3b0719[_0x59ac00(0x14b)]()+0x1)[_0x59ac00(0xbc)]()[_0x59ac00(0xc4)](0x2,'0')+'.'+_0x3b0719[_0x59ac00(0x15b)]()+'\x20-\x20'+_0x276f8a[_0x59ac00(0x113)]()['toString']()[_0x59ac00(0xc4)](0x2,'0')+'.'+(_0x276f8a[_0x59ac00(0x14b)]()+0x1)[_0x59ac00(0xbc)]()[_0x59ac00(0xc4)](0x2,'0')+'.'+_0x276f8a[_0x59ac00(0x15b)]();break;}case'stats_all_time':{_0x562cbd=new Date(0x0),_0x448f90=_0x12e5e5,_0x14128f=_0x59ac00(0x136);break;}default:return;}const _0x106edd=await _0x27e846[_0x59ac00(0xf4)][_0x59ac00(0x130)]({'where':{'createdAt':{'gte':_0x562cbd,'lte':_0x448f90}},'select':{'status':!![],'amountUSDT':!![],'amountAfterGatewayCommissionUSDT':!![]}});let _0x45013b=0x0,_0x37ce7b=0x0,_0x3906be=0x0,_0x8e6680=0x0,_0xbcef95=0x0,_0x4457b7=0x0;_0x106edd['forEach'](_0x53f5b7=>{const _0x2014bc=_0x59ac00,_0x343722=_0x53f5b7[_0x2014bc(0xf2)]||0x0,_0x2737d4=_0x53f5b7[_0x2014bc(0x13d)]||0x0;if(_0x53f5b7['status']===_0x2014bc(0x134))_0x45013b+=_0x343722,_0x37ce7b+=_0x343722-_0x2737d4,_0x3906be++;else{if(_0x53f5b7[_0x2014bc(0x131)]===_0x2014bc(0x104)||_0x53f5b7['status']===_0x2014bc(0xc8))_0x8e6680++;else{if(_0x53f5b7[_0x2014bc(0x131)]==='CHARGEBACK')_0xbcef95++,_0x45013b+=_0x343722;else _0x53f5b7[_0x2014bc(0x131)]===_0x2014bc(0x111)&&(_0x4457b7++,_0x45013b+=_0x343722);}}});const _0x381540=_0x3906be+_0x8e6680,_0x135e73=_0x381540>0x0?(_0x3906be/_0x381540*0x64)['toFixed'](0x1):'0.0',_0xbb9ce6=_0x14128f[_0x59ac00(0x152)](/\./g,'\x5c.')[_0x59ac00(0x152)](/\-/g,'\x5c-'),_0xc8a22f=_0x45013b[_0x59ac00(0xfe)](0x2)['replace'](/\./g,'\x5c.'),_0x4e77f9=_0x37ce7b[_0x59ac00(0xfe)](0x2)[_0x59ac00(0x152)](/\./g,'\x5c.'),_0x420b0b=_0x135e73[_0x59ac00(0x152)](/\./g,'\x5c.'),_0x446d3d=_0x59ac00(0xd5)+_0xbb9ce6+'*\x0a\x0a'+(_0x59ac00(0x116)+_0xc8a22f+'\x20USDT\x0a')+('ðŸ’µ\x20Earned\x20\x5c-\x20'+_0x4e77f9+_0x59ac00(0x10e))+(_0x59ac00(0xd3)+_0x3906be+'\x0a')+(_0x59ac00(0xe5)+_0x8e6680+'\x0a')+('ðŸ“ˆ\x20Conversion\x20\x5c-\x20'+_0x420b0b+'%\x0a')+(_0x59ac00(0xfd)+_0xbcef95+'\x0a')+(_0x59ac00(0xdc)+_0x4457b7),_0x4100dc={'inline_keyboard':[[{'text':_0x59ac00(0x133),'callback_data':_0x59ac00(0xd0)}]]};_0x2fb949?await this['bot']?.['editMessageText'](_0x446d3d,{'chat_id':_0x3610b8,'message_id':_0x2fb949,'parse_mode':'MarkdownV2','reply_markup':_0x4100dc}):await this['bot']?.[_0x59ac00(0xb6)](_0x3610b8,_0x446d3d,{'parse_mode':_0x59ac00(0x11b),'reply_markup':_0x4100dc});}catch(_0x3f5078){console[_0x59ac00(0x12d)](_0x59ac00(0x149),_0x3f5078),await this['bot']?.['sendMessage'](_0x3610b8,_0x59ac00(0xad));}}['updateAdminIds'](_0x29b478){const _0x3e07bf=a52_0x180294;this[_0x3e07bf(0x10a)]['adminIds']=_0x29b478[_0x3e07bf(0xf6)](_0x1d2368=>_0x1d2368&&_0x1d2368[_0x3e07bf(0xec)]()),this[_0x3e07bf(0x144)](),console[_0x3e07bf(0x155)](_0x3e07bf(0x135),this[_0x3e07bf(0x10a)]['adminIds']);}[a52_0x180294(0xf9)](){const _0x44f6f2=a52_0x180294;return[...this[_0x44f6f2(0x10a)][_0x44f6f2(0x106)]];}['getBotInfo'](){const _0x3cff00=a52_0x180294;return{'isActive':!!this[_0x3cff00(0xc0)],'adminCount':this[_0x3cff00(0x10a)][_0x3cff00(0x106)][_0x3cff00(0xef)]};}[a52_0x180294(0x122)](){const _0x135608=a52_0x180294;this['bot']&&(this['bot']['stopPolling'](),this[_0x135608(0xc0)]=null,console['log'](_0x135608(0x103)));}}exports['AdminBotService']=AdminBotService,exports[a52_0x180294(0x11a)]=new AdminBotService();