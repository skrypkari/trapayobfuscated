'use strict';const a52_0x1ddb6e=a52_0xb001;(function(_0x24951c,_0x48c356){const _0x562de1=a52_0xb001,_0x145baa=_0x24951c();while(!![]){try{const _0x37f88d=parseInt(_0x562de1(0x23a))/0x1*(-parseInt(_0x562de1(0x203))/0x2)+parseInt(_0x562de1(0x1d6))/0x3*(parseInt(_0x562de1(0x218))/0x4)+parseInt(_0x562de1(0x219))/0x5*(parseInt(_0x562de1(0x210))/0x6)+parseInt(_0x562de1(0x1d0))/0x7*(parseInt(_0x562de1(0x20b))/0x8)+-parseInt(_0x562de1(0x275))/0x9+parseInt(_0x562de1(0x21e))/0xa+parseInt(_0x562de1(0x1cf))/0xb*(-parseInt(_0x562de1(0x1db))/0xc);if(_0x37f88d===_0x48c356)break;else _0x145baa['push'](_0x145baa['shift']());}catch(_0x486831){_0x145baa['push'](_0x145baa['shift']());}}}(a52_0x5eb6,0xd9dd3));var __importDefault=this&&this[a52_0x1ddb6e(0x1e9)]||function(_0x4f851d){const _0x27be19=a52_0x1ddb6e;return _0x4f851d&&_0x4f851d[_0x27be19(0x202)]?_0x4f851d:{'default':_0x4f851d};};function a52_0x5eb6(){const _0x22e189=['sendMessage','saveConfig','âŒ\x20Merchant\x20bot\x20token\x20not\x20configured','Error\x20loading\x20admin\x20bot\x20config:','__esModule','30488Bazvuh','findMany','âŒ\x20Failed\x20Payments\x20\x5c-\x20','\x20USDT\x0a','handleStatistics','â›”ï¸\x20Access\x20Denied','botActive','ðŸ”\x20*TRAPAY\x20Admin\x20Bot*\x0a\x0aâœ…\x20You\x20are\x20authorized\x20as\x20admin.','334648AUvDbk','join','cmd_debug','payment','broadcast_cancel','198942caCLmZ','existsSync','getUTCFullYear','updateAdminIds','ðŸ”§\x20Debug','TELEGRAM_ADMIN_BOT_TOKEN\x20not\x20found\x20in\x20environment\x20variables','data','MarkdownV2','2433428OkjAZR','235zBLPJk','ðŸ”\x20*Debug\x20Information*\x0a\x0a','config','âœ…\x20Delivered:\x20','cwd','16863630JzryzW','EXPIRED','âœ…\x20Admin\x20Telegram\x20bot\x20initialized\x20successfully','telegramId','Contact\x20system\x20administrator.','isAdmin','stats_yesterday','trim','stopPolling','Failed\x20to\x20download\x20photo:','Failed\x20to\x20send\x20to\x20','ðŸ“¤\x20Sending\x20broadcast\x20to\x20','âŒ\x20Inactive','ðŸ“ˆ\x20Statistics','onText','âŒ\x20Not\x20Delivered:\x20','stringify','cmd_statistics','getUTCDate','status','UTC','ðŸ›‘\x20Admin\x20Telegram\x20bot\x20stopped','utf-8','ðŸ“†\x20This\x20Month','\x20-\x20','timestamp','ðŸ“¦\x20Node:\x20','âŒ\x20Error\x20getting\x20statistics','2ZEffus','adminBotConfig.json','ðŸ‘¥\x20Admin\x20Count:\x20','stats_','â±\x20Uptime:\x20','getFileLink','Markdown','delete','stats_today','toFixed','replace','âœ…\x20Successful\x20Payments\x20\x5c-\x20','ðŸ“¤\x20Sending\x20broadcast...','Error\x20handling\x20debug\x20command:','ðŸ”„\x20Refunds\x20\x5c-\x20','ðŸ’µ\x20Earned\x20\x5c-\x20','ï¿½\x20Today','Error\x20getting\x20statistics:','writeFileSync','telegramUser','FAILED','Error\x20saving\x20admin\x20bot\x20config:','ðŸ’¬\x20Create\x20Broadcast','floor','ðŸ“…\x20Today','âŒ\x20Failed\x20to\x20initialize\x20Admin\x20Telegram\x20bot:','Error\x20handling\x20/debug\x20command:','getBotInfo','includes','nodeVersion','ðŸ“¤\x20Send','getUTCMonth','parse','amountAfterGatewayCommissionUSDT','editMessageText','REFUND','get','awaiting_text','0.0','set','ðŸ“…\x20Yesterday','sendPhoto','â¬…ï¸\x20Back','âœ…\x20Active','adminCount','stats_all_time','âŒ\x20Cancel','Admin\x20Telegram\x20bot\x20error:','ðŸ’°\x20Turnover\x20\x5c-\x20','file_id','from','ðŸ”™\x20Back','ðŸ“…\x20This\x20Month','adminIds','âš ï¸\x20Chargebacks\x20\x5c-\x20','error','adminBotService','âŒ\x20No\x20message\x20to\x20send','initializeBot','11891466CiVAYl','broadcast_send','answerCallbackQuery','ðŸ“‹\x20Admins:\x20`','âŒ\x20Error\x20sending\x20broadcast','padStart','ðŸ“†\x20Last\x20Month','photo','loadConfig','text','ðŸ¤–\x20Bot\x20Status:\x20','PAID','All\x20Time','photoFileId','ðŸ“Š\x20*Statistics*\x0a\x0aSelect\x20period:','../config/database','ðŸ†”\x20Your\x20ID:\x20`','CHARGEBACK','bot','âŒ\x20Failed\x20to\x20download\x20photo','16566616CzyqzM','133yMHOoM','admins','filter','node-telegram-bot-api','botToken','message_id','6ZVJCSe','handleBroadcast','*\x0a\x0a','readFileSync','message','24hAUDAr','âœ…\x20Admin\x20IDs\x20updated:','setupBotHandlers','back_to_stats_menu','ðŸ“¤\x20Sent:\x20','callback_query','warn','toString','âŒ\x20Error\x20getting\x20debug\x20information','ðŸ“†\x20Yesterday','forEach','back_to_main','startsWith','uptime','__importDefault','preview','cmd_broadcast','length','ðŸ“¢\x20*Broadcast\x20Preview*\x0a\x0a','Error\x20sending\x20broadcast:','stats_last_month','chat','stats_this_month','log','ðŸ“Š\x20*Statistics:\x20','stopBot','â°\x20Timestamp:\x20','default','version','âŒ\x20Broadcast\x20cancelled','ðŸ“…\x20Last\x20Month','âœ…\x20*Broadcast\x20Complete*\x0a\x0a','ðŸ“¢\x20*Create\x20Broadcast*\x0a\x0aPlease\x20enter\x20the\x20message\x20text\x20you\x20want\x20to\x20send\x20to\x20all\x20merchants:','broadcastSessions','AdminBotService'];a52_0x5eb6=function(){return _0x22e189;};return a52_0x5eb6();}function a52_0xb001(_0x12c1f9,_0xc0e4f1){_0x12c1f9=_0x12c1f9-0x1bc;const _0x5eb613=a52_0x5eb6();let _0xb00168=_0x5eb613[_0x12c1f9];return _0xb00168;}Object['defineProperty'](exports,a52_0x1ddb6e(0x202),{'value':!![]}),exports['adminBotService']=exports[a52_0x1ddb6e(0x1fd)]=void 0x0;const node_telegram_bot_api_1=__importDefault(require(a52_0x1ddb6e(0x1d3))),fs_1=__importDefault(require('fs')),path_1=__importDefault(require('path')),CONFIG_PATH=path_1[a52_0x1ddb6e(0x1f6)]['join'](process[a52_0x1ddb6e(0x21d)](),'data',a52_0x1ddb6e(0x23b));class AdminBotService{constructor(){const _0x52f601=a52_0x1ddb6e;this[_0x52f601(0x1cd)]=null,this[_0x52f601(0x1fc)]=new Map(),this[_0x52f601(0x1d4)]=process.env.TELEGRAM_ADMIN_BOT_TOKEN||'',this['config']=this[_0x52f601(0x1c3)](),this[_0x52f601(0x1d4)]?this['initializeBot']():console[_0x52f601(0x1e1)](_0x52f601(0x215));}[a52_0x1ddb6e(0x1c3)](){const _0x3da237=a52_0x1ddb6e;try{if(fs_1['default'][_0x3da237(0x211)](CONFIG_PATH)){const _0x457ddf=fs_1[_0x3da237(0x1f6)][_0x3da237(0x1d9)](CONFIG_PATH,_0x3da237(0x234));return JSON[_0x3da237(0x25a)](_0x457ddf);}}catch(_0x4be92f){console[_0x3da237(0x271)](_0x3da237(0x201),_0x4be92f);}return{'adminIds':[]};}[a52_0x1ddb6e(0x1ff)](){const _0x2aa118=a52_0x1ddb6e;try{const _0x3bf1b9=path_1['default']['dirname'](CONFIG_PATH);!fs_1[_0x2aa118(0x1f6)][_0x2aa118(0x211)](_0x3bf1b9)&&fs_1[_0x2aa118(0x1f6)]['mkdirSync'](_0x3bf1b9,{'recursive':!![]}),fs_1['default'][_0x2aa118(0x24c)](CONFIG_PATH,JSON[_0x2aa118(0x22e)](this['config'],null,0x2));}catch(_0x481ad1){console['error'](_0x2aa118(0x24f),_0x481ad1);}}[a52_0x1ddb6e(0x223)](_0x33a083){const _0x1af26e=a52_0x1ddb6e;return this['config'][_0x1af26e(0x26f)][_0x1af26e(0x256)](_0x33a083);}[a52_0x1ddb6e(0x274)](){const _0x296a47=a52_0x1ddb6e;try{this[_0x296a47(0x1cd)]=new node_telegram_bot_api_1[(_0x296a47(0x1f6))](this[_0x296a47(0x1d4)],{'polling':!![]}),this[_0x296a47(0x1dd)](),console[_0x296a47(0x1f2)](_0x296a47(0x220));}catch(_0x29d158){console[_0x296a47(0x271)](_0x296a47(0x253),_0x29d158);}}[a52_0x1ddb6e(0x1dd)](){const _0x372c2d=a52_0x1ddb6e;if(!this['bot'])return;this[_0x372c2d(0x1cd)][_0x372c2d(0x22c)](/\/start/,async _0x5be02c=>{const _0x12a054=_0x372c2d,_0x2b3d09=_0x5be02c[_0x12a054(0x1f0)]['id'],_0x50b9e1=_0x5be02c[_0x12a054(0x26c)]?.['id'][_0x12a054(0x1e2)]();if(!_0x50b9e1)return;if(this[_0x12a054(0x223)](_0x50b9e1)){const _0x21c123={'inline_keyboard':[[{'text':_0x12a054(0x22b),'callback_data':_0x12a054(0x22f)}],[{'text':_0x12a054(0x250),'callback_data':'cmd_broadcast'}],[{'text':_0x12a054(0x214),'callback_data':_0x12a054(0x20d)}]]};await this['bot']?.[_0x12a054(0x1fe)](_0x2b3d09,_0x12a054(0x20a),{'parse_mode':_0x12a054(0x240),'reply_markup':_0x21c123});}else await this[_0x12a054(0x1cd)]?.['sendMessage'](_0x2b3d09,'â›”ï¸\x20Access\x20Denied\x0a\x0a'+'You\x20are\x20not\x20authorized\x20to\x20use\x20this\x20bot.\x0a'+_0x12a054(0x222),{'parse_mode':_0x12a054(0x240)});}),this['bot'][_0x372c2d(0x22c)](/\/debug/,async _0x221b77=>{const _0xdc41e3=_0x372c2d,_0x299591=_0x221b77[_0xdc41e3(0x1f0)]['id'],_0x43b2b5=_0x221b77[_0xdc41e3(0x26c)]?.['id']['toString']();if(!_0x43b2b5)return;if(!this[_0xdc41e3(0x223)](_0x43b2b5)){await this[_0xdc41e3(0x1cd)]?.[_0xdc41e3(0x1fe)](_0x299591,_0xdc41e3(0x208));return;}try{const _0x4c69e4={'botActive':!!this[_0xdc41e3(0x1cd)],'adminCount':this[_0xdc41e3(0x21b)][_0xdc41e3(0x26f)]['length'],'admins':this[_0xdc41e3(0x21b)][_0xdc41e3(0x26f)],'yourId':_0x43b2b5,'timestamp':new Date()['toISOString'](),'nodeVersion':process[_0xdc41e3(0x1f7)],'uptime':process['uptime']()};let _0x35383f=_0xdc41e3(0x21a);_0x35383f+=_0xdc41e3(0x1c5)+(_0x4c69e4['botActive']?_0xdc41e3(0x265):_0xdc41e3(0x22a))+'\x0a',_0x35383f+=_0xdc41e3(0x23c)+_0x4c69e4[_0xdc41e3(0x266)]+'\x0a',_0x35383f+=_0xdc41e3(0x1be)+_0x4c69e4[_0xdc41e3(0x1d1)][_0xdc41e3(0x20c)](',\x20')+'`\x0a',_0x35383f+=_0xdc41e3(0x1cb)+_0x4c69e4['yourId']+'`\x0a',_0x35383f+=_0xdc41e3(0x1f5)+_0x4c69e4[_0xdc41e3(0x237)]+'\x0a',_0x35383f+=_0xdc41e3(0x238)+_0x4c69e4['nodeVersion']+'\x0a',_0x35383f+=_0xdc41e3(0x23e)+Math['floor'](_0x4c69e4[_0xdc41e3(0x1e8)])+'s',await this['bot']?.[_0xdc41e3(0x1fe)](_0x299591,_0x35383f,{'parse_mode':_0xdc41e3(0x240)});}catch(_0x58873f){console[_0xdc41e3(0x271)](_0xdc41e3(0x254),_0x58873f),await this[_0xdc41e3(0x1cd)]?.[_0xdc41e3(0x1fe)](_0x299591,_0xdc41e3(0x1e3));}}),this[_0x372c2d(0x1cd)]['onText'](/\/statistics/,async _0x29836e=>{const _0x4817eb=_0x372c2d,_0x181cce=_0x29836e['chat']['id'],_0x124940=_0x29836e[_0x4817eb(0x26c)]?.['id'][_0x4817eb(0x1e2)]();if(!_0x124940)return;if(!this['isAdmin'](_0x124940)){await this['bot']?.[_0x4817eb(0x1fe)](_0x181cce,'â›”ï¸\x20Access\x20Denied');return;}const _0x10a264={'inline_keyboard':[[{'text':_0x4817eb(0x252),'callback_data':_0x4817eb(0x242)}],[{'text':'ðŸ“…\x20Yesterday','callback_data':_0x4817eb(0x224)}],[{'text':_0x4817eb(0x26e),'callback_data':'stats_this_month'}],[{'text':_0x4817eb(0x1f9),'callback_data':_0x4817eb(0x1ef)}],[{'text':'ðŸ“…\x20All\x20Time','callback_data':_0x4817eb(0x267)}]]};await this[_0x4817eb(0x1cd)]?.[_0x4817eb(0x1fe)](_0x181cce,_0x4817eb(0x1c9),{'parse_mode':'Markdown','reply_markup':_0x10a264});}),this[_0x372c2d(0x1cd)]['on'](_0x372c2d(0x1e0),async _0x4e93d6=>{const _0x1a3465=_0x372c2d,_0x464cd6=_0x4e93d6[_0x1a3465(0x1da)]?.['chat']['id'],_0x28901b=_0x4e93d6[_0x1a3465(0x26c)]?.['id'][_0x1a3465(0x1e2)](),_0x57bc9a=_0x4e93d6[_0x1a3465(0x216)];if(!_0x464cd6||!_0x28901b||!_0x57bc9a)return;if(!this['isAdmin'](_0x28901b)){await this[_0x1a3465(0x1cd)]?.[_0x1a3465(0x1bd)](_0x4e93d6['id'],{'text':_0x1a3465(0x208)});return;}if(_0x57bc9a===_0x1a3465(0x22f)){const _0x1efb02={'inline_keyboard':[[{'text':'ðŸ“…\x20Today','callback_data':_0x1a3465(0x242)}],[{'text':_0x1a3465(0x262),'callback_data':_0x1a3465(0x224)}],[{'text':_0x1a3465(0x26e),'callback_data':_0x1a3465(0x1f1)}],[{'text':_0x1a3465(0x1f9),'callback_data':_0x1a3465(0x1ef)}],[{'text':'ðŸ“…\x20All\x20Time','callback_data':_0x1a3465(0x267)}],[{'text':_0x1a3465(0x26d),'callback_data':_0x1a3465(0x1e6)}]]};await this['bot']?.[_0x1a3465(0x25c)]('ðŸ“Š\x20*Statistics*\x0a\x0aSelect\x20period:',{'chat_id':_0x464cd6,'message_id':_0x4e93d6['message']?.[_0x1a3465(0x1d5)],'parse_mode':_0x1a3465(0x240),'reply_markup':_0x1efb02}),await this[_0x1a3465(0x1cd)]?.[_0x1a3465(0x1bd)](_0x4e93d6['id']);}else{if(_0x57bc9a==='cmd_debug')try{const _0x4c164a={'botActive':!!this['bot'],'adminCount':this['config'][_0x1a3465(0x26f)][_0x1a3465(0x1ec)],'admins':this[_0x1a3465(0x21b)][_0x1a3465(0x26f)],'yourId':_0x28901b,'timestamp':new Date()['toISOString'](),'nodeVersion':process[_0x1a3465(0x1f7)],'uptime':process[_0x1a3465(0x1e8)]()};let _0xe68058=_0x1a3465(0x21a);_0xe68058+=_0x1a3465(0x1c5)+(_0x4c164a[_0x1a3465(0x209)]?'âœ…\x20Active':'âŒ\x20Inactive')+'\x0a',_0xe68058+=_0x1a3465(0x23c)+_0x4c164a[_0x1a3465(0x266)]+'\x0a',_0xe68058+=_0x1a3465(0x1be)+_0x4c164a['admins']['join'](',\x20')+'`\x0a',_0xe68058+=_0x1a3465(0x1cb)+_0x4c164a['yourId']+'`\x0a',_0xe68058+=_0x1a3465(0x1f5)+_0x4c164a[_0x1a3465(0x237)]+'\x0a',_0xe68058+=_0x1a3465(0x238)+_0x4c164a[_0x1a3465(0x257)]+'\x0a',_0xe68058+=_0x1a3465(0x23e)+Math[_0x1a3465(0x251)](_0x4c164a[_0x1a3465(0x1e8)])+'s';const _0x1fc907={'inline_keyboard':[[{'text':_0x1a3465(0x264),'callback_data':'back_to_main'}]]};await this[_0x1a3465(0x1cd)]?.[_0x1a3465(0x25c)](_0xe68058,{'chat_id':_0x464cd6,'message_id':_0x4e93d6[_0x1a3465(0x1da)]?.[_0x1a3465(0x1d5)],'parse_mode':_0x1a3465(0x240),'reply_markup':_0x1fc907}),await this[_0x1a3465(0x1cd)]?.['answerCallbackQuery'](_0x4e93d6['id']);}catch(_0x2c3760){console[_0x1a3465(0x271)](_0x1a3465(0x247),_0x2c3760),await this[_0x1a3465(0x1cd)]?.[_0x1a3465(0x1bd)](_0x4e93d6['id'],{'text':_0x1a3465(0x1e3)});}else{if(_0x57bc9a===_0x1a3465(0x1eb))this[_0x1a3465(0x1fc)][_0x1a3465(0x261)](_0x464cd6,{'step':_0x1a3465(0x25f)}),await this['bot']?.[_0x1a3465(0x25c)](_0x1a3465(0x1fb),{'chat_id':_0x464cd6,'message_id':_0x4e93d6[_0x1a3465(0x1da)]?.[_0x1a3465(0x1d5)],'parse_mode':'Markdown'}),await this[_0x1a3465(0x1cd)]?.[_0x1a3465(0x1bd)](_0x4e93d6['id']);else{if(_0x57bc9a===_0x1a3465(0x20f))this[_0x1a3465(0x1fc)][_0x1a3465(0x241)](_0x464cd6),await this['bot']?.[_0x1a3465(0x1fe)](_0x464cd6,_0x1a3465(0x1f8)),await this['bot']?.['answerCallbackQuery'](_0x4e93d6['id']);else{if(_0x57bc9a===_0x1a3465(0x1bc)){const _0x5cce56=this[_0x1a3465(0x1fc)][_0x1a3465(0x25e)](_0x464cd6);if(!_0x5cce56||!_0x5cce56['text']&&!_0x5cce56[_0x1a3465(0x1c8)]){await this[_0x1a3465(0x1cd)]?.[_0x1a3465(0x1bd)](_0x4e93d6['id'],{'text':_0x1a3465(0x273)});return;}await this['bot']?.[_0x1a3465(0x1bd)](_0x4e93d6['id'],{'text':_0x1a3465(0x246)}),await this['handleBroadcast'](_0x464cd6,_0x5cce56['text']||'',_0x5cce56['photoFileId']),this[_0x1a3465(0x1fc)][_0x1a3465(0x241)](_0x464cd6);}else{if(_0x57bc9a[_0x1a3465(0x1e7)](_0x1a3465(0x23d)))await this[_0x1a3465(0x207)](_0x464cd6,_0x57bc9a,_0x4e93d6[_0x1a3465(0x1da)]?.[_0x1a3465(0x1d5)]),await this[_0x1a3465(0x1cd)]?.[_0x1a3465(0x1bd)](_0x4e93d6['id']);else{if(_0x57bc9a===_0x1a3465(0x1e6)){const _0x256bb6={'inline_keyboard':[[{'text':_0x1a3465(0x22b),'callback_data':_0x1a3465(0x22f)}],[{'text':_0x1a3465(0x250),'callback_data':'cmd_broadcast'}],[{'text':'ðŸ”§\x20Debug','callback_data':_0x1a3465(0x20d)}]]};await this[_0x1a3465(0x1cd)]?.[_0x1a3465(0x25c)](_0x1a3465(0x20a),{'chat_id':_0x464cd6,'message_id':_0x4e93d6[_0x1a3465(0x1da)]?.[_0x1a3465(0x1d5)],'parse_mode':'Markdown','reply_markup':_0x256bb6}),await this['bot']?.[_0x1a3465(0x1bd)](_0x4e93d6['id']);}else{if(_0x57bc9a===_0x1a3465(0x1de)){const _0x156d5b={'inline_keyboard':[[{'text':_0x1a3465(0x24a),'callback_data':_0x1a3465(0x242)}],[{'text':_0x1a3465(0x1e4),'callback_data':'stats_yesterday'}],[{'text':_0x1a3465(0x235),'callback_data':_0x1a3465(0x1f1)}],[{'text':_0x1a3465(0x1c1),'callback_data':_0x1a3465(0x1ef)}],[{'text':'ðŸ“†\x20All\x20Time','callback_data':_0x1a3465(0x267)}],[{'text':_0x1a3465(0x264),'callback_data':'back_to_main'}]]};await this[_0x1a3465(0x1cd)]?.[_0x1a3465(0x25c)]('ðŸ“Š\x20*Statistics*\x0a\x0aSelect\x20period:',{'chat_id':_0x464cd6,'message_id':_0x4e93d6[_0x1a3465(0x1da)]?.[_0x1a3465(0x1d5)],'parse_mode':_0x1a3465(0x240),'reply_markup':_0x156d5b}),await this[_0x1a3465(0x1cd)]?.[_0x1a3465(0x1bd)](_0x4e93d6['id']);}}}}}}}}}),this[_0x372c2d(0x1cd)]['on'](_0x372c2d(0x1da),async _0x32227a=>{const _0x4ec067=_0x372c2d,_0xe4f7e9=_0x32227a['chat']['id'],_0x40cf91=_0x32227a[_0x4ec067(0x26c)]?.['id'][_0x4ec067(0x1e2)](),_0x246d14=_0x32227a[_0x4ec067(0x1c4)]||_0x32227a['caption'],_0x55221a=_0x32227a[_0x4ec067(0x1c2)];if(!_0x40cf91)return;if(!this[_0x4ec067(0x223)](_0x40cf91))return;if(_0x246d14&&_0x246d14[_0x4ec067(0x1e7)]('/'))return;const _0x166364=this[_0x4ec067(0x1fc)][_0x4ec067(0x25e)](_0xe4f7e9);if(!_0x166364)return;if(_0x166364['step']===_0x4ec067(0x25f)){if(!_0x246d14&&!_0x55221a)return;_0x166364['text']=_0x246d14||'';_0x55221a&&_0x55221a[_0x4ec067(0x1ec)]>0x0&&(_0x166364['photoFileId']=_0x55221a[_0x55221a[_0x4ec067(0x1ec)]-0x1][_0x4ec067(0x26b)]);_0x166364['step']=_0x4ec067(0x1ea);const _0x2314dc={'inline_keyboard':[[{'text':_0x4ec067(0x268),'callback_data':_0x4ec067(0x20f)},{'text':_0x4ec067(0x258),'callback_data':'broadcast_send'}]]};_0x166364['photoFileId']?await this[_0x4ec067(0x1cd)]?.[_0x4ec067(0x263)](_0xe4f7e9,_0x166364[_0x4ec067(0x1c8)],{'caption':_0x4ec067(0x1ed)+_0x166364['text']+'\x0a\x0a_Ready\x20to\x20send?_','parse_mode':_0x4ec067(0x240),'reply_markup':_0x2314dc}):await this[_0x4ec067(0x1cd)]?.['sendMessage'](_0xe4f7e9,'ðŸ“¢\x20*Broadcast\x20Preview*\x0a\x0a'+_0x166364[_0x4ec067(0x1c4)]+'\x0a\x0a_Ready\x20to\x20send?_',{'parse_mode':'Markdown','reply_markup':_0x2314dc});}}),this[_0x372c2d(0x1cd)]['on'](_0x372c2d(0x271),_0x5630ed=>{const _0x4c5df1=_0x372c2d;console[_0x4c5df1(0x271)](_0x4c5df1(0x269),_0x5630ed);});}async[a52_0x1ddb6e(0x1d7)](_0xdc5ae3,_0xd3b9a6,_0x4c1755){const _0x1e9570=a52_0x1ddb6e;try{const _0x53f76f=require(_0x1e9570(0x1ca))[_0x1e9570(0x1f6)],_0x5100b9=require(_0x1e9570(0x1d3)),_0x5a5a78=process.env.TELEGRAM_BOT_TOKEN;if(!_0x5a5a78){await this[_0x1e9570(0x1cd)]?.['sendMessage'](_0xdc5ae3,_0x1e9570(0x200));return;}const _0x349175=new _0x5100b9(_0x5a5a78),_0x1705c2=await _0x53f76f[_0x1e9570(0x24d)]['findMany']({'where':{'shopId':{'not':null},'isVerified':!![]},'select':{'telegramId':!![]}}),_0x34e3dc=_0x1705c2['length'];let _0x4166e2=0x0,_0x50a591=0x0,_0x4c0579=0x0;await this[_0x1e9570(0x1cd)]?.['sendMessage'](_0xdc5ae3,_0x1e9570(0x229)+_0x34e3dc+'\x20merchants...');let _0x4430af=null;if(_0x4c1755&&this['bot'])try{const _0x46505b=await this[_0x1e9570(0x1cd)][_0x1e9570(0x23f)](_0x4c1755),_0x2cac91=await fetch(_0x46505b);_0x4430af=Buffer[_0x1e9570(0x26c)](await _0x2cac91['arrayBuffer']());}catch(_0x25258a){console[_0x1e9570(0x271)](_0x1e9570(0x227),_0x25258a),await this[_0x1e9570(0x1cd)]?.[_0x1e9570(0x1fe)](_0xdc5ae3,_0x1e9570(0x1ce));return;}for(const _0x434b88 of _0x1705c2){try{_0x4430af?await _0x349175[_0x1e9570(0x263)](_0x434b88[_0x1e9570(0x221)],_0x4430af,{'caption':_0xd3b9a6,'parse_mode':_0x1e9570(0x240)}):await _0x349175['sendMessage'](_0x434b88[_0x1e9570(0x221)],_0xd3b9a6,{'parse_mode':_0x1e9570(0x240)}),_0x4166e2++,_0x50a591++,await new Promise(_0x5e661e=>setTimeout(_0x5e661e,0x64));}catch(_0x32634e){_0x4166e2++,_0x4c0579++,console[_0x1e9570(0x271)](_0x1e9570(0x228)+_0x434b88[_0x1e9570(0x221)]+':',_0x32634e['message']);}}const _0x52c662=_0x1e9570(0x1fa)+('ðŸ‘¥\x20Total\x20Merchants:\x20'+_0x34e3dc+'\x0a')+(_0x1e9570(0x1df)+_0x4166e2+'\x0a')+(_0x1e9570(0x21c)+_0x50a591+'\x0a')+(_0x1e9570(0x22d)+_0x4c0579);await this[_0x1e9570(0x1cd)]?.[_0x1e9570(0x1fe)](_0xdc5ae3,_0x52c662,{'parse_mode':_0x1e9570(0x240)});}catch(_0x1ff912){console[_0x1e9570(0x271)](_0x1e9570(0x1ee),_0x1ff912),await this[_0x1e9570(0x1cd)]?.[_0x1e9570(0x1fe)](_0xdc5ae3,_0x1e9570(0x1bf));}}async[a52_0x1ddb6e(0x207)](_0x354bbc,_0xc5685,_0x4e532b){const _0x2f9538=a52_0x1ddb6e;try{const _0xd4b41d=require('../config/database')[_0x2f9538(0x1f6)],_0x513fb0=new Date();let _0x31a91d,_0x1ee292,_0x3b774f;switch(_0xc5685){case _0x2f9538(0x242):{const _0x161fd6=new Date(Date[_0x2f9538(0x232)](_0x513fb0[_0x2f9538(0x212)](),_0x513fb0[_0x2f9538(0x259)](),_0x513fb0['getUTCDate']()));_0x31a91d=_0x161fd6,_0x1ee292=new Date(Date[_0x2f9538(0x232)](_0x513fb0['getUTCFullYear'](),_0x513fb0['getUTCMonth'](),_0x513fb0[_0x2f9538(0x230)](),0x17,0x3b,0x3b,0x3e7)),_0x3b774f=_0x161fd6[_0x2f9538(0x230)]()[_0x2f9538(0x1e2)]()['padStart'](0x2,'0')+'.'+(_0x161fd6['getUTCMonth']()+0x1)[_0x2f9538(0x1e2)]()[_0x2f9538(0x1c0)](0x2,'0')+'.'+_0x161fd6['getUTCFullYear']();break;}case _0x2f9538(0x224):{const _0x550717=new Date(Date[_0x2f9538(0x232)](_0x513fb0[_0x2f9538(0x212)](),_0x513fb0[_0x2f9538(0x259)](),_0x513fb0[_0x2f9538(0x230)]()-0x1));_0x31a91d=_0x550717,_0x1ee292=new Date(Date['UTC'](_0x513fb0[_0x2f9538(0x212)](),_0x513fb0[_0x2f9538(0x259)](),_0x513fb0[_0x2f9538(0x230)]()-0x1,0x17,0x3b,0x3b,0x3e7)),_0x3b774f=_0x550717[_0x2f9538(0x230)]()[_0x2f9538(0x1e2)]()[_0x2f9538(0x1c0)](0x2,'0')+'.'+(_0x550717[_0x2f9538(0x259)]()+0x1)[_0x2f9538(0x1e2)]()[_0x2f9538(0x1c0)](0x2,'0')+'.'+_0x550717['getUTCFullYear']();break;}case _0x2f9538(0x1f1):{const _0x1ace75=new Date(Date[_0x2f9538(0x232)](_0x513fb0[_0x2f9538(0x212)](),_0x513fb0['getUTCMonth'](),0x1));_0x31a91d=_0x1ace75,_0x1ee292=new Date(Date['UTC'](_0x513fb0[_0x2f9538(0x212)](),_0x513fb0[_0x2f9538(0x259)]()+0x1,0x0,0x17,0x3b,0x3b,0x3e7));const _0x1e8240=new Date(Date[_0x2f9538(0x232)](_0x513fb0[_0x2f9538(0x212)](),_0x513fb0[_0x2f9538(0x259)]()+0x1,0x0));_0x3b774f=_0x1ace75[_0x2f9538(0x230)]()[_0x2f9538(0x1e2)]()[_0x2f9538(0x1c0)](0x2,'0')+'.'+(_0x1ace75[_0x2f9538(0x259)]()+0x1)['toString']()[_0x2f9538(0x1c0)](0x2,'0')+'.'+_0x1ace75[_0x2f9538(0x212)]()+_0x2f9538(0x236)+_0x1e8240['getUTCDate']()['toString']()[_0x2f9538(0x1c0)](0x2,'0')+'.'+(_0x1e8240['getUTCMonth']()+0x1)['toString']()[_0x2f9538(0x1c0)](0x2,'0')+'.'+_0x1e8240[_0x2f9538(0x212)]();break;}case _0x2f9538(0x1ef):{const _0x1bb73c=new Date(Date['UTC'](_0x513fb0['getUTCFullYear'](),_0x513fb0[_0x2f9538(0x259)]()-0x1,0x1));_0x31a91d=_0x1bb73c,_0x1ee292=new Date(Date[_0x2f9538(0x232)](_0x513fb0['getUTCFullYear'](),_0x513fb0['getUTCMonth'](),0x0,0x17,0x3b,0x3b,0x3e7));const _0x294f6b=new Date(Date[_0x2f9538(0x232)](_0x513fb0['getUTCFullYear'](),_0x513fb0['getUTCMonth'](),0x0));_0x3b774f=_0x1bb73c[_0x2f9538(0x230)]()[_0x2f9538(0x1e2)]()['padStart'](0x2,'0')+'.'+(_0x1bb73c['getUTCMonth']()+0x1)['toString']()[_0x2f9538(0x1c0)](0x2,'0')+'.'+_0x1bb73c[_0x2f9538(0x212)]()+_0x2f9538(0x236)+_0x294f6b[_0x2f9538(0x230)]()['toString']()[_0x2f9538(0x1c0)](0x2,'0')+'.'+(_0x294f6b[_0x2f9538(0x259)]()+0x1)[_0x2f9538(0x1e2)]()[_0x2f9538(0x1c0)](0x2,'0')+'.'+_0x294f6b[_0x2f9538(0x212)]();break;}case'stats_all_time':{_0x31a91d=new Date(0x0),_0x1ee292=_0x513fb0,_0x3b774f=_0x2f9538(0x1c7);break;}default:return;}const _0x480b89=await _0xd4b41d[_0x2f9538(0x20e)][_0x2f9538(0x204)]({'where':{'createdAt':{'gte':_0x31a91d,'lte':_0x1ee292}},'select':{'status':!![],'amountUSDT':!![],'amountAfterGatewayCommissionUSDT':!![]}});let _0x3c6a29=0x0,_0x44ddfc=0x0,_0xc62751=0x0,_0x1b9fb7=0x0,_0x2897ca=0x0,_0x2b5aba=0x0;_0x480b89[_0x2f9538(0x1e5)](_0x4a4710=>{const _0x55ce24=_0x2f9538,_0x13b2eb=_0x4a4710['amountUSDT']||0x0,_0x1976c8=_0x4a4710[_0x55ce24(0x25b)]||0x0;if(_0x4a4710['status']===_0x55ce24(0x1c6))_0x3c6a29+=_0x13b2eb,_0x44ddfc+=_0x13b2eb-_0x1976c8,_0xc62751++;else{if(_0x4a4710[_0x55ce24(0x231)]===_0x55ce24(0x24e)||_0x4a4710['status']===_0x55ce24(0x21f))_0x1b9fb7++;else{if(_0x4a4710[_0x55ce24(0x231)]===_0x55ce24(0x1cc))_0x2897ca++,_0x3c6a29+=_0x13b2eb;else _0x4a4710[_0x55ce24(0x231)]===_0x55ce24(0x25d)&&(_0x2b5aba++,_0x3c6a29+=_0x13b2eb);}}});const _0x5984fb=_0xc62751+_0x1b9fb7,_0xa79ae3=_0x5984fb>0x0?(_0xc62751/_0x5984fb*0x64)['toFixed'](0x1):_0x2f9538(0x260),_0x5f2198=_0x3b774f['replace'](/\./g,'\x5c.')['replace'](/\-/g,'\x5c-'),_0x162f77=_0x3c6a29[_0x2f9538(0x243)](0x2)['replace'](/\./g,'\x5c.'),_0x5af6a5=_0x44ddfc[_0x2f9538(0x243)](0x2)[_0x2f9538(0x244)](/\./g,'\x5c.'),_0x2d4ac0=_0xa79ae3['replace'](/\./g,'\x5c.'),_0x5bfdb9=_0x2f9538(0x1f3)+_0x5f2198+_0x2f9538(0x1d8)+(_0x2f9538(0x26a)+_0x162f77+_0x2f9538(0x206))+(_0x2f9538(0x249)+_0x5af6a5+_0x2f9538(0x206))+(_0x2f9538(0x245)+_0xc62751+'\x0a')+(_0x2f9538(0x205)+_0x1b9fb7+'\x0a')+('ðŸ“ˆ\x20Conversion\x20\x5c-\x20'+_0x2d4ac0+'%\x0a')+(_0x2f9538(0x270)+_0x2897ca+'\x0a')+(_0x2f9538(0x248)+_0x2b5aba),_0x3bb787={'inline_keyboard':[[{'text':_0x2f9538(0x264),'callback_data':_0x2f9538(0x1de)}]]};_0x4e532b?await this['bot']?.[_0x2f9538(0x25c)](_0x5bfdb9,{'chat_id':_0x354bbc,'message_id':_0x4e532b,'parse_mode':_0x2f9538(0x217),'reply_markup':_0x3bb787}):await this[_0x2f9538(0x1cd)]?.[_0x2f9538(0x1fe)](_0x354bbc,_0x5bfdb9,{'parse_mode':_0x2f9538(0x217),'reply_markup':_0x3bb787});}catch(_0x328038){console[_0x2f9538(0x271)](_0x2f9538(0x24b),_0x328038),await this[_0x2f9538(0x1cd)]?.[_0x2f9538(0x1fe)](_0x354bbc,_0x2f9538(0x239));}}[a52_0x1ddb6e(0x213)](_0x8f26de){const _0x8de6c4=a52_0x1ddb6e;this[_0x8de6c4(0x21b)][_0x8de6c4(0x26f)]=_0x8f26de[_0x8de6c4(0x1d2)](_0x48ba80=>_0x48ba80&&_0x48ba80[_0x8de6c4(0x225)]()),this[_0x8de6c4(0x1ff)](),console[_0x8de6c4(0x1f2)](_0x8de6c4(0x1dc),this[_0x8de6c4(0x21b)][_0x8de6c4(0x26f)]);}['getAdminIds'](){const _0x5ac7bd=a52_0x1ddb6e;return[...this[_0x5ac7bd(0x21b)][_0x5ac7bd(0x26f)]];}[a52_0x1ddb6e(0x255)](){const _0x514e0a=a52_0x1ddb6e;return{'isActive':!!this[_0x514e0a(0x1cd)],'adminCount':this['config'][_0x514e0a(0x26f)][_0x514e0a(0x1ec)]};}[a52_0x1ddb6e(0x1f4)](){const _0x5010d7=a52_0x1ddb6e;this[_0x5010d7(0x1cd)]&&(this[_0x5010d7(0x1cd)][_0x5010d7(0x226)](),this['bot']=null,console[_0x5010d7(0x1f2)](_0x5010d7(0x233)));}}exports[a52_0x1ddb6e(0x1fd)]=AdminBotService,exports[a52_0x1ddb6e(0x272)]=new AdminBotService();