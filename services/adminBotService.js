'use strict';const a52_0x2309b5=a52_0x5f3c;function a52_0x3faa(){const _0x33d4b2=['floor','FAILED','âœ…\x20Successful\x20Payments\x20\x5c-\x20','config','step','admins','payment','sendPhoto','Error\x20getting\x20statistics:','âœ…\x20*Broadcast\x20Complete*\x0a\x0a','message','padStart','stats_today','Error\x20saving\x20admin\x20bot\x20config:','ðŸ“Š\x20*Statistics*\x0a\x0aSelect\x20period:','handleBroadcast','loadConfig','from','adminBotService','default','defineProperty','â›”ï¸\x20Access\x20Denied','PAID','stopBot','getUTCFullYear','warn','existsSync','chat','broadcastSessions','â±\x20Uptime:\x20','telegramId','ðŸ“¢\x20*Broadcast\x20Preview*\x0a\x0a','cmd_broadcast','message_id','ðŸ“¤\x20Sending\x20broadcast...','log','writeFileSync','node-telegram-bot-api','broadcast_send','__esModule','findMany','stats_yesterday','All\x20Time','includes','arrayBuffer','sendMessage','back_to_stats_menu','ðŸ”™\x20Back','setupBotHandlers','callback_query','ðŸ“¤\x20Sent:\x20','ðŸ¤–\x20Bot\x20Status:\x20','toString','bot','initializeBot','Admin\x20Telegram\x20bot\x20error:','getUTCMonth','length','parse','yourId','dirname','botToken','ðŸ“ˆ\x20Conversion\x20\x5c-\x20','adminIds','ðŸ’°\x20Turnover\x20\x5c-\x20','isAdmin','adminBotConfig.json','Failed\x20to\x20send\x20to\x20','UTC','nodeVersion','timestamp','ðŸ“¦\x20Node:\x20','../config/database','ðŸ“…\x20Yesterday','4166574sMvzPc','stats_this_month','error','CHARGEBACK','file_id','editMessageText','stats_all_time','forEach','â¬…ï¸\x20Back','ðŸ“¤\x20Send','10206648ENMqLS','text','TELEGRAM_ADMIN_BOT_TOKEN\x20not\x20found\x20in\x20environment\x20variables','\x0a\x0a_Ready\x20to\x20send?_','ï¿½\x20Today','getAdminIds','awaiting_text','âŒ\x20Error\x20getting\x20debug\x20information','toFixed','0.0','256090DItYzC','ðŸ’µ\x20Earned\x20\x5c-\x20','ðŸ“†\x20This\x20Month','stats_last_month','toISOString','answerCallbackQuery','getBotInfo','\x20merchants...','6zjuoka','amountAfterGatewayCommissionUSDT','replace','â°\x20Timestamp:\x20','âœ…\x20Admin\x20Telegram\x20bot\x20initialized\x20successfully','cwd','data','âŒ\x20Error\x20sending\x20broadcast','1731690peiNXh','âŒ\x20Inactive','EXPIRED','ðŸ‘¥\x20Admin\x20Count:\x20','âŒ\x20Cancel','âœ…\x20Delivered:\x20','version','startsWith','ðŸ‘¥\x20Total\x20Merchants:\x20','âŒ\x20Error\x20getting\x20statistics','trim','stats_','photo','onText','ðŸ“…\x20This\x20Month','cmd_debug','ðŸ”\x20*TRAPAY\x20Admin\x20Bot*\x0a\x0aâœ…\x20You\x20are\x20authorized\x20as\x20admin.','caption','12305874hwqODp','back_to_main','ðŸ›‘\x20Admin\x20Telegram\x20bot\x20stopped','stringify','status','âœ…\x20Active','âŒ\x20No\x20message\x20to\x20send','9zNhQea','Error\x20loading\x20admin\x20bot\x20config:','ðŸ“…\x20All\x20Time','delete','join','âŒ\x20Not\x20Delivered:\x20','Markdown','get','botActive','ðŸ”§\x20Debug','29253670gTkedn','preview','cmd_statistics','handleStatistics','996446UQKqsk','ðŸ“¤\x20Sending\x20broadcast\x20to\x20','ðŸ”„\x20Refunds\x20\x5c-\x20','ðŸ“…\x20Today','ðŸ“ˆ\x20Statistics','ðŸ“‹\x20Admins:\x20`','Error\x20sending\x20broadcast:','MarkdownV2','getUTCDate','ðŸ”\x20*Debug\x20Information*\x0a\x0a','path','ðŸ†”\x20Your\x20ID:\x20`','ðŸ“¢\x20*Create\x20Broadcast*\x0a\x0aPlease\x20enter\x20the\x20message\x20text\x20you\x20want\x20to\x20send\x20to\x20all\x20merchants:','âŒ\x20Broadcast\x20cancelled','photoFileId','âŒ\x20Failed\x20Payments\x20\x5c-\x20','broadcast_cancel','uptime','ðŸ’¬\x20Create\x20Broadcast','\x20-\x20','84mdvnbx','adminCount','ðŸ“…\x20Last\x20Month'];a52_0x3faa=function(){return _0x33d4b2;};return a52_0x3faa();}(function(_0x55d0ff,_0x1f6390){const _0x2f138c=a52_0x5f3c,_0x4e53fa=_0x55d0ff();while(!![]){try{const _0x2c204f=-parseInt(_0x2f138c(0x147))/0x1+-parseInt(_0x2f138c(0x120))/0x2+parseInt(_0x2f138c(0x1a8))/0x3+parseInt(_0x2f138c(0x15b))/0x4*(-parseInt(_0x2f138c(0x110))/0x5)+parseInt(_0x2f138c(0x118))/0x6*(-parseInt(_0x2f138c(0x132))/0x7)+parseInt(_0x2f138c(0x106))/0x8+parseInt(_0x2f138c(0x139))/0x9*(parseInt(_0x2f138c(0x143))/0xa);if(_0x2c204f===_0x1f6390)break;else _0x4e53fa['push'](_0x4e53fa['shift']());}catch(_0x415693){_0x4e53fa['push'](_0x4e53fa['shift']());}}}(a52_0x3faa,0xda4fd));var __importDefault=this&&this['__importDefault']||function(_0x21f22c){const _0x235c01=a52_0x5f3c;return _0x21f22c&&_0x21f22c[_0x235c01(0x185)]?_0x21f22c:{'default':_0x21f22c};};Object[a52_0x2309b5(0x172)](exports,'__esModule',{'value':!![]}),exports[a52_0x2309b5(0x170)]=exports['AdminBotService']=void 0x0;const node_telegram_bot_api_1=__importDefault(require(a52_0x2309b5(0x183))),fs_1=__importDefault(require('fs')),path_1=__importDefault(require(a52_0x2309b5(0x151))),CONFIG_PATH=path_1[a52_0x2309b5(0x171)][a52_0x2309b5(0x13d)](process[a52_0x2309b5(0x11d)](),a52_0x2309b5(0x11e),a52_0x2309b5(0x1a0));function a52_0x5f3c(_0x9e3cce,_0x34af7c){_0x9e3cce=_0x9e3cce-0x102;const _0x3faaeb=a52_0x3faa();let _0x5f3ca4=_0x3faaeb[_0x9e3cce];return _0x5f3ca4;}class AdminBotService{constructor(){const _0x1049c7=a52_0x2309b5;this[_0x1049c7(0x193)]=null,this[_0x1049c7(0x17a)]=new Map(),this[_0x1049c7(0x19b)]=process.env.TELEGRAM_ADMIN_BOT_TOKEN||'',this['config']=this[_0x1049c7(0x16e)](),this['botToken']?this[_0x1049c7(0x194)]():console[_0x1049c7(0x177)](_0x1049c7(0x108));}['loadConfig'](){const _0x3d1895=a52_0x2309b5;try{if(fs_1[_0x3d1895(0x171)][_0x3d1895(0x178)](CONFIG_PATH)){const _0x13d965=fs_1[_0x3d1895(0x171)]['readFileSync'](CONFIG_PATH,'utf-8');return JSON[_0x3d1895(0x198)](_0x13d965);}}catch(_0x578681){console[_0x3d1895(0x1aa)](_0x3d1895(0x13a),_0x578681);}return{'adminIds':[]};}['saveConfig'](){const _0x45faf2=a52_0x2309b5;try{const _0x3125f5=path_1['default'][_0x45faf2(0x19a)](CONFIG_PATH);!fs_1[_0x45faf2(0x171)][_0x45faf2(0x178)](_0x3125f5)&&fs_1['default']['mkdirSync'](_0x3125f5,{'recursive':!![]}),fs_1['default'][_0x45faf2(0x182)](CONFIG_PATH,JSON[_0x45faf2(0x135)](this[_0x45faf2(0x161)],null,0x2));}catch(_0x228cdd){console['error'](_0x45faf2(0x16b),_0x228cdd);}}[a52_0x2309b5(0x19f)](_0x53f2b8){const _0x5b2c04=a52_0x2309b5;return this['config'][_0x5b2c04(0x19d)][_0x5b2c04(0x189)](_0x53f2b8);}['initializeBot'](){const _0x3eb1c2=a52_0x2309b5;try{this[_0x3eb1c2(0x193)]=new node_telegram_bot_api_1[(_0x3eb1c2(0x171))](this[_0x3eb1c2(0x19b)],{'polling':!![]}),this[_0x3eb1c2(0x18e)](),console['log'](_0x3eb1c2(0x11c));}catch(_0x1868fb){console[_0x3eb1c2(0x1aa)]('âŒ\x20Failed\x20to\x20initialize\x20Admin\x20Telegram\x20bot:',_0x1868fb);}}[a52_0x2309b5(0x18e)](){const _0x26a7e9=a52_0x2309b5;if(!this[_0x26a7e9(0x193)])return;this['bot']['onText'](/\/start/,async _0x3d2448=>{const _0xd34542=_0x26a7e9,_0x5e3170=_0x3d2448['chat']['id'],_0x8b9311=_0x3d2448[_0xd34542(0x16f)]?.['id'][_0xd34542(0x192)]();if(!_0x8b9311)return;if(this[_0xd34542(0x19f)](_0x8b9311)){const _0x4d6456={'inline_keyboard':[[{'text':_0xd34542(0x14b),'callback_data':_0xd34542(0x145)}],[{'text':_0xd34542(0x159),'callback_data':_0xd34542(0x17e)}],[{'text':_0xd34542(0x142),'callback_data':'cmd_debug'}]]};await this[_0xd34542(0x193)]?.[_0xd34542(0x18b)](_0x5e3170,'ðŸ”\x20*TRAPAY\x20Admin\x20Bot*\x0a\x0aâœ…\x20You\x20are\x20authorized\x20as\x20admin.',{'parse_mode':_0xd34542(0x13f),'reply_markup':_0x4d6456});}else await this[_0xd34542(0x193)]?.['sendMessage'](_0x5e3170,'â›”ï¸\x20Access\x20Denied\x0a\x0a'+'You\x20are\x20not\x20authorized\x20to\x20use\x20this\x20bot.\x0a'+'Contact\x20system\x20administrator.',{'parse_mode':_0xd34542(0x13f)});}),this[_0x26a7e9(0x193)][_0x26a7e9(0x12d)](/\/debug/,async _0x4a46d6=>{const _0x431516=_0x26a7e9,_0x2c3baf=_0x4a46d6[_0x431516(0x179)]['id'],_0x11844d=_0x4a46d6[_0x431516(0x16f)]?.['id']['toString']();if(!_0x11844d)return;if(!this['isAdmin'](_0x11844d)){await this['bot']?.[_0x431516(0x18b)](_0x2c3baf,_0x431516(0x173));return;}try{const _0x4ed755={'botActive':!!this[_0x431516(0x193)],'adminCount':this[_0x431516(0x161)][_0x431516(0x19d)][_0x431516(0x197)],'admins':this[_0x431516(0x161)][_0x431516(0x19d)],'yourId':_0x11844d,'timestamp':new Date()[_0x431516(0x114)](),'nodeVersion':process['version'],'uptime':process[_0x431516(0x158)]()};let _0x149ed0=_0x431516(0x150);_0x149ed0+=_0x431516(0x191)+(_0x4ed755[_0x431516(0x141)]?_0x431516(0x137):_0x431516(0x121))+'\x0a',_0x149ed0+=_0x431516(0x123)+_0x4ed755[_0x431516(0x15c)]+'\x0a',_0x149ed0+='ðŸ“‹\x20Admins:\x20`'+_0x4ed755[_0x431516(0x163)][_0x431516(0x13d)](',\x20')+'`\x0a',_0x149ed0+=_0x431516(0x152)+_0x4ed755[_0x431516(0x199)]+'`\x0a',_0x149ed0+='â°\x20Timestamp:\x20'+_0x4ed755['timestamp']+'\x0a',_0x149ed0+=_0x431516(0x1a5)+_0x4ed755[_0x431516(0x1a3)]+'\x0a',_0x149ed0+='â±\x20Uptime:\x20'+Math[_0x431516(0x15e)](_0x4ed755[_0x431516(0x158)])+'s',await this['bot']?.[_0x431516(0x18b)](_0x2c3baf,_0x149ed0,{'parse_mode':_0x431516(0x13f)});}catch(_0x3c66c9){console['error']('Error\x20handling\x20/debug\x20command:',_0x3c66c9),await this[_0x431516(0x193)]?.[_0x431516(0x18b)](_0x2c3baf,_0x431516(0x10d));}}),this[_0x26a7e9(0x193)][_0x26a7e9(0x12d)](/\/statistics/,async _0x44bd0e=>{const _0x5c92c1=_0x26a7e9,_0x17ec9f=_0x44bd0e['chat']['id'],_0x443ab1=_0x44bd0e['from']?.['id'][_0x5c92c1(0x192)]();if(!_0x443ab1)return;if(!this[_0x5c92c1(0x19f)](_0x443ab1)){await this[_0x5c92c1(0x193)]?.[_0x5c92c1(0x18b)](_0x17ec9f,_0x5c92c1(0x173));return;}const _0xc967c={'inline_keyboard':[[{'text':_0x5c92c1(0x14a),'callback_data':_0x5c92c1(0x16a)}],[{'text':'ðŸ“…\x20Yesterday','callback_data':_0x5c92c1(0x187)}],[{'text':_0x5c92c1(0x12e),'callback_data':_0x5c92c1(0x1a9)}],[{'text':_0x5c92c1(0x15d),'callback_data':_0x5c92c1(0x113)}],[{'text':'ðŸ“…\x20All\x20Time','callback_data':'stats_all_time'}]]};await this[_0x5c92c1(0x193)]?.['sendMessage'](_0x17ec9f,_0x5c92c1(0x16c),{'parse_mode':_0x5c92c1(0x13f),'reply_markup':_0xc967c});}),this['bot']['on'](_0x26a7e9(0x18f),async _0xe04607=>{const _0x31c673=_0x26a7e9,_0x2ffd3f=_0xe04607[_0x31c673(0x168)]?.['chat']['id'],_0x390aa5=_0xe04607[_0x31c673(0x16f)]?.['id'][_0x31c673(0x192)](),_0x22d645=_0xe04607[_0x31c673(0x11e)];if(!_0x2ffd3f||!_0x390aa5||!_0x22d645)return;if(!this[_0x31c673(0x19f)](_0x390aa5)){await this[_0x31c673(0x193)]?.[_0x31c673(0x115)](_0xe04607['id'],{'text':_0x31c673(0x173)});return;}if(_0x22d645===_0x31c673(0x145)){const _0x1ebbf8={'inline_keyboard':[[{'text':_0x31c673(0x14a),'callback_data':_0x31c673(0x16a)}],[{'text':_0x31c673(0x1a7),'callback_data':_0x31c673(0x187)}],[{'text':_0x31c673(0x12e),'callback_data':_0x31c673(0x1a9)}],[{'text':_0x31c673(0x15d),'callback_data':_0x31c673(0x113)}],[{'text':_0x31c673(0x13b),'callback_data':_0x31c673(0x102)}],[{'text':_0x31c673(0x18d),'callback_data':_0x31c673(0x133)}]]};await this[_0x31c673(0x193)]?.[_0x31c673(0x1ad)](_0x31c673(0x16c),{'chat_id':_0x2ffd3f,'message_id':_0xe04607[_0x31c673(0x168)]?.['message_id'],'parse_mode':_0x31c673(0x13f),'reply_markup':_0x1ebbf8}),await this['bot']?.[_0x31c673(0x115)](_0xe04607['id']);}else{if(_0x22d645===_0x31c673(0x12f))try{const _0x452d4a={'botActive':!!this[_0x31c673(0x193)],'adminCount':this['config'][_0x31c673(0x19d)][_0x31c673(0x197)],'admins':this[_0x31c673(0x161)][_0x31c673(0x19d)],'yourId':_0x390aa5,'timestamp':new Date()[_0x31c673(0x114)](),'nodeVersion':process[_0x31c673(0x126)],'uptime':process['uptime']()};let _0x52b8a3=_0x31c673(0x150);_0x52b8a3+=_0x31c673(0x191)+(_0x452d4a[_0x31c673(0x141)]?'âœ…\x20Active':_0x31c673(0x121))+'\x0a',_0x52b8a3+=_0x31c673(0x123)+_0x452d4a[_0x31c673(0x15c)]+'\x0a',_0x52b8a3+=_0x31c673(0x14c)+_0x452d4a[_0x31c673(0x163)]['join'](',\x20')+'`\x0a',_0x52b8a3+=_0x31c673(0x152)+_0x452d4a[_0x31c673(0x199)]+'`\x0a',_0x52b8a3+=_0x31c673(0x11b)+_0x452d4a[_0x31c673(0x1a4)]+'\x0a',_0x52b8a3+=_0x31c673(0x1a5)+_0x452d4a[_0x31c673(0x1a3)]+'\x0a',_0x52b8a3+=_0x31c673(0x17b)+Math['floor'](_0x452d4a[_0x31c673(0x158)])+'s';const _0x521879={'inline_keyboard':[[{'text':'â¬…ï¸\x20Back','callback_data':_0x31c673(0x133)}]]};await this[_0x31c673(0x193)]?.[_0x31c673(0x1ad)](_0x52b8a3,{'chat_id':_0x2ffd3f,'message_id':_0xe04607['message']?.[_0x31c673(0x17f)],'parse_mode':_0x31c673(0x13f),'reply_markup':_0x521879}),await this[_0x31c673(0x193)]?.[_0x31c673(0x115)](_0xe04607['id']);}catch(_0x4cad09){console[_0x31c673(0x1aa)]('Error\x20handling\x20debug\x20command:',_0x4cad09),await this[_0x31c673(0x193)]?.['answerCallbackQuery'](_0xe04607['id'],{'text':_0x31c673(0x10d)});}else{if(_0x22d645==='cmd_broadcast')this['broadcastSessions']['set'](_0x2ffd3f,{'step':'awaiting_text'}),await this[_0x31c673(0x193)]?.[_0x31c673(0x1ad)](_0x31c673(0x153),{'chat_id':_0x2ffd3f,'message_id':_0xe04607[_0x31c673(0x168)]?.[_0x31c673(0x17f)],'parse_mode':_0x31c673(0x13f)}),await this[_0x31c673(0x193)]?.[_0x31c673(0x115)](_0xe04607['id']);else{if(_0x22d645===_0x31c673(0x157))this['broadcastSessions']['delete'](_0x2ffd3f),await this[_0x31c673(0x193)]?.[_0x31c673(0x18b)](_0x2ffd3f,_0x31c673(0x154)),await this['bot']?.['answerCallbackQuery'](_0xe04607['id']);else{if(_0x22d645==='broadcast_send'){const _0x365816=this[_0x31c673(0x17a)][_0x31c673(0x140)](_0x2ffd3f);if(!_0x365816||!_0x365816[_0x31c673(0x107)]&&!_0x365816[_0x31c673(0x155)]){await this['bot']?.[_0x31c673(0x115)](_0xe04607['id'],{'text':_0x31c673(0x138)});return;}await this[_0x31c673(0x193)]?.[_0x31c673(0x115)](_0xe04607['id'],{'text':_0x31c673(0x180)}),await this['handleBroadcast'](_0x2ffd3f,_0x365816[_0x31c673(0x107)]||'',_0x365816[_0x31c673(0x155)]),this[_0x31c673(0x17a)][_0x31c673(0x13c)](_0x2ffd3f);}else{if(_0x22d645[_0x31c673(0x127)](_0x31c673(0x12b)))await this[_0x31c673(0x146)](_0x2ffd3f,_0x22d645,_0xe04607[_0x31c673(0x168)]?.[_0x31c673(0x17f)]),await this[_0x31c673(0x193)]?.[_0x31c673(0x115)](_0xe04607['id']);else{if(_0x22d645==='back_to_main'){const _0x5a8ee9={'inline_keyboard':[[{'text':_0x31c673(0x14b),'callback_data':_0x31c673(0x145)}],[{'text':_0x31c673(0x159),'callback_data':_0x31c673(0x17e)}],[{'text':_0x31c673(0x142),'callback_data':'cmd_debug'}]]};await this['bot']?.[_0x31c673(0x1ad)](_0x31c673(0x130),{'chat_id':_0x2ffd3f,'message_id':_0xe04607[_0x31c673(0x168)]?.[_0x31c673(0x17f)],'parse_mode':_0x31c673(0x13f),'reply_markup':_0x5a8ee9}),await this[_0x31c673(0x193)]?.[_0x31c673(0x115)](_0xe04607['id']);}else{if(_0x22d645===_0x31c673(0x18c)){const _0x525ff1={'inline_keyboard':[[{'text':_0x31c673(0x10a),'callback_data':_0x31c673(0x16a)}],[{'text':'ðŸ“†\x20Yesterday','callback_data':_0x31c673(0x187)}],[{'text':_0x31c673(0x112),'callback_data':'stats_this_month'}],[{'text':'ðŸ“†\x20Last\x20Month','callback_data':_0x31c673(0x113)}],[{'text':'ðŸ“†\x20All\x20Time','callback_data':'stats_all_time'}],[{'text':_0x31c673(0x104),'callback_data':_0x31c673(0x133)}]]};await this[_0x31c673(0x193)]?.[_0x31c673(0x1ad)]('ðŸ“Š\x20*Statistics*\x0a\x0aSelect\x20period:',{'chat_id':_0x2ffd3f,'message_id':_0xe04607[_0x31c673(0x168)]?.['message_id'],'parse_mode':_0x31c673(0x13f),'reply_markup':_0x525ff1}),await this[_0x31c673(0x193)]?.[_0x31c673(0x115)](_0xe04607['id']);}}}}}}}}}),this[_0x26a7e9(0x193)]['on'](_0x26a7e9(0x168),async _0x63bd29=>{const _0x2a2237=_0x26a7e9,_0x49bdaa=_0x63bd29[_0x2a2237(0x179)]['id'],_0x32ba65=_0x63bd29[_0x2a2237(0x16f)]?.['id'][_0x2a2237(0x192)](),_0x9145e6=_0x63bd29['text']||_0x63bd29[_0x2a2237(0x131)],_0x3106e1=_0x63bd29[_0x2a2237(0x12c)];if(!_0x32ba65)return;if(!this['isAdmin'](_0x32ba65))return;if(_0x9145e6&&_0x9145e6[_0x2a2237(0x127)]('/'))return;const _0x1d527a=this['broadcastSessions'][_0x2a2237(0x140)](_0x49bdaa);if(!_0x1d527a)return;if(_0x1d527a[_0x2a2237(0x162)]===_0x2a2237(0x10c)){if(!_0x9145e6&&!_0x3106e1)return;_0x1d527a['text']=_0x9145e6||'';_0x3106e1&&_0x3106e1[_0x2a2237(0x197)]>0x0&&(_0x1d527a[_0x2a2237(0x155)]=_0x3106e1[_0x3106e1[_0x2a2237(0x197)]-0x1][_0x2a2237(0x1ac)]);_0x1d527a[_0x2a2237(0x162)]=_0x2a2237(0x144);const _0x4a0f2a={'inline_keyboard':[[{'text':_0x2a2237(0x124),'callback_data':_0x2a2237(0x157)},{'text':_0x2a2237(0x105),'callback_data':_0x2a2237(0x184)}]]};_0x1d527a[_0x2a2237(0x155)]?await this[_0x2a2237(0x193)]?.[_0x2a2237(0x165)](_0x49bdaa,_0x1d527a[_0x2a2237(0x155)],{'caption':_0x2a2237(0x17d)+_0x1d527a['text']+'\x0a\x0a_Ready\x20to\x20send?_','parse_mode':_0x2a2237(0x13f),'reply_markup':_0x4a0f2a}):await this[_0x2a2237(0x193)]?.[_0x2a2237(0x18b)](_0x49bdaa,_0x2a2237(0x17d)+_0x1d527a['text']+_0x2a2237(0x109),{'parse_mode':_0x2a2237(0x13f),'reply_markup':_0x4a0f2a});}}),this[_0x26a7e9(0x193)]['on']('error',_0x3ea717=>{const _0xa29fe5=_0x26a7e9;console[_0xa29fe5(0x1aa)](_0xa29fe5(0x195),_0x3ea717);});}async[a52_0x2309b5(0x16d)](_0x2e9310,_0x16598e,_0x58a2a4){const _0x24db72=a52_0x2309b5;try{const _0x1fd289=require(_0x24db72(0x1a6))[_0x24db72(0x171)],_0x4fd7f4=require(_0x24db72(0x183)),_0x503e36=process.env.TELEGRAM_BOT_TOKEN;if(!_0x503e36){await this[_0x24db72(0x193)]?.[_0x24db72(0x18b)](_0x2e9310,'âŒ\x20Merchant\x20bot\x20token\x20not\x20configured');return;}const _0x207465=new _0x4fd7f4(_0x503e36),_0x4b2fae=await _0x1fd289['telegramUser'][_0x24db72(0x186)]({'where':{'shopId':{'not':null},'isVerified':!![]},'select':{'telegramId':!![]}}),_0x41735d=_0x4b2fae['length'];let _0x38be74=0x0,_0x1439e1=0x0,_0x2939df=0x0;await this['bot']?.['sendMessage'](_0x2e9310,_0x24db72(0x148)+_0x41735d+_0x24db72(0x117));let _0x3673d4=null;if(_0x58a2a4&&this[_0x24db72(0x193)])try{const _0x4f511c=await this['bot']['getFileLink'](_0x58a2a4),_0x167bc7=await fetch(_0x4f511c);_0x3673d4=Buffer[_0x24db72(0x16f)](await _0x167bc7[_0x24db72(0x18a)]());}catch(_0x2403ae){console[_0x24db72(0x1aa)]('Failed\x20to\x20download\x20photo:',_0x2403ae),await this[_0x24db72(0x193)]?.[_0x24db72(0x18b)](_0x2e9310,'âŒ\x20Failed\x20to\x20download\x20photo');return;}for(const _0x72a37a of _0x4b2fae){try{_0x3673d4?await _0x207465[_0x24db72(0x165)](_0x72a37a[_0x24db72(0x17c)],_0x3673d4,{'caption':_0x16598e,'parse_mode':_0x24db72(0x13f)}):await _0x207465[_0x24db72(0x18b)](_0x72a37a[_0x24db72(0x17c)],_0x16598e,{'parse_mode':_0x24db72(0x13f)}),_0x38be74++,_0x1439e1++,await new Promise(_0x5e738c=>setTimeout(_0x5e738c,0x64));}catch(_0x2954ad){_0x38be74++,_0x2939df++,console[_0x24db72(0x1aa)](_0x24db72(0x1a1)+_0x72a37a[_0x24db72(0x17c)]+':',_0x2954ad['message']);}}const _0x552c12=_0x24db72(0x167)+(_0x24db72(0x128)+_0x41735d+'\x0a')+(_0x24db72(0x190)+_0x38be74+'\x0a')+(_0x24db72(0x125)+_0x1439e1+'\x0a')+(_0x24db72(0x13e)+_0x2939df);await this[_0x24db72(0x193)]?.[_0x24db72(0x18b)](_0x2e9310,_0x552c12,{'parse_mode':_0x24db72(0x13f)});}catch(_0x377c71){console[_0x24db72(0x1aa)](_0x24db72(0x14d),_0x377c71),await this[_0x24db72(0x193)]?.[_0x24db72(0x18b)](_0x2e9310,_0x24db72(0x11f));}}async['handleStatistics'](_0x1cae11,_0x5c8762,_0x2ddd11){const _0x15e000=a52_0x2309b5;try{const _0x324745=require(_0x15e000(0x1a6))[_0x15e000(0x171)],_0x4877c7=new Date();let _0x48c385,_0x191a30,_0x32ad6a;switch(_0x5c8762){case _0x15e000(0x16a):{const _0x187976=new Date(Date[_0x15e000(0x1a2)](_0x4877c7[_0x15e000(0x176)](),_0x4877c7[_0x15e000(0x196)](),_0x4877c7[_0x15e000(0x14f)]()));_0x48c385=_0x187976,_0x191a30=new Date(Date['UTC'](_0x4877c7['getUTCFullYear'](),_0x4877c7[_0x15e000(0x196)](),_0x4877c7[_0x15e000(0x14f)](),0x17,0x3b,0x3b,0x3e7)),_0x32ad6a=_0x187976[_0x15e000(0x14f)]()[_0x15e000(0x192)]()[_0x15e000(0x169)](0x2,'0')+'.'+(_0x187976[_0x15e000(0x196)]()+0x1)['toString']()[_0x15e000(0x169)](0x2,'0')+'.'+_0x187976[_0x15e000(0x176)]();break;}case _0x15e000(0x187):{const _0x1b259a=new Date(Date['UTC'](_0x4877c7[_0x15e000(0x176)](),_0x4877c7[_0x15e000(0x196)](),_0x4877c7[_0x15e000(0x14f)]()-0x1));_0x48c385=_0x1b259a,_0x191a30=new Date(Date[_0x15e000(0x1a2)](_0x4877c7['getUTCFullYear'](),_0x4877c7['getUTCMonth'](),_0x4877c7[_0x15e000(0x14f)]()-0x1,0x17,0x3b,0x3b,0x3e7)),_0x32ad6a=_0x1b259a[_0x15e000(0x14f)]()[_0x15e000(0x192)]()[_0x15e000(0x169)](0x2,'0')+'.'+(_0x1b259a[_0x15e000(0x196)]()+0x1)['toString']()[_0x15e000(0x169)](0x2,'0')+'.'+_0x1b259a[_0x15e000(0x176)]();break;}case'stats_this_month':{const _0xe9535f=new Date(Date[_0x15e000(0x1a2)](_0x4877c7[_0x15e000(0x176)](),_0x4877c7[_0x15e000(0x196)](),0x1));_0x48c385=_0xe9535f,_0x191a30=new Date(Date['UTC'](_0x4877c7['getUTCFullYear'](),_0x4877c7[_0x15e000(0x196)]()+0x1,0x0,0x17,0x3b,0x3b,0x3e7));const _0x5665b8=new Date(Date['UTC'](_0x4877c7[_0x15e000(0x176)](),_0x4877c7[_0x15e000(0x196)]()+0x1,0x0));_0x32ad6a=_0xe9535f[_0x15e000(0x14f)]()[_0x15e000(0x192)]()[_0x15e000(0x169)](0x2,'0')+'.'+(_0xe9535f[_0x15e000(0x196)]()+0x1)[_0x15e000(0x192)]()[_0x15e000(0x169)](0x2,'0')+'.'+_0xe9535f['getUTCFullYear']()+_0x15e000(0x15a)+_0x5665b8[_0x15e000(0x14f)]()[_0x15e000(0x192)]()[_0x15e000(0x169)](0x2,'0')+'.'+(_0x5665b8[_0x15e000(0x196)]()+0x1)[_0x15e000(0x192)]()['padStart'](0x2,'0')+'.'+_0x5665b8[_0x15e000(0x176)]();break;}case _0x15e000(0x113):{const _0x1d75e2=new Date(Date[_0x15e000(0x1a2)](_0x4877c7[_0x15e000(0x176)](),_0x4877c7[_0x15e000(0x196)]()-0x1,0x1));_0x48c385=_0x1d75e2,_0x191a30=new Date(Date['UTC'](_0x4877c7[_0x15e000(0x176)](),_0x4877c7['getUTCMonth'](),0x0,0x17,0x3b,0x3b,0x3e7));const _0x1bc570=new Date(Date[_0x15e000(0x1a2)](_0x4877c7['getUTCFullYear'](),_0x4877c7['getUTCMonth'](),0x0));_0x32ad6a=_0x1d75e2[_0x15e000(0x14f)]()['toString']()[_0x15e000(0x169)](0x2,'0')+'.'+(_0x1d75e2[_0x15e000(0x196)]()+0x1)['toString']()[_0x15e000(0x169)](0x2,'0')+'.'+_0x1d75e2[_0x15e000(0x176)]()+_0x15e000(0x15a)+_0x1bc570[_0x15e000(0x14f)]()['toString']()[_0x15e000(0x169)](0x2,'0')+'.'+(_0x1bc570[_0x15e000(0x196)]()+0x1)[_0x15e000(0x192)]()[_0x15e000(0x169)](0x2,'0')+'.'+_0x1bc570[_0x15e000(0x176)]();break;}case _0x15e000(0x102):{_0x48c385=new Date(0x0),_0x191a30=_0x4877c7,_0x32ad6a=_0x15e000(0x188);break;}default:return;}const _0x27a507=await _0x324745[_0x15e000(0x164)][_0x15e000(0x186)]({'where':{'createdAt':{'gte':_0x48c385,'lte':_0x191a30}},'select':{'status':!![],'amountUSDT':!![],'amountAfterGatewayCommissionUSDT':!![]}});let _0x2c216=0x0,_0x14a382=0x0,_0x472d72=0x0,_0x19ccf9=0x0,_0x15b2a4=0x0,_0x4e7b87=0x0;_0x27a507[_0x15e000(0x103)](_0x4d7678=>{const _0x1b615a=_0x15e000,_0xfc080e=_0x4d7678['amountUSDT']||0x0,_0x5b55ee=_0x4d7678[_0x1b615a(0x119)]||0x0;if(_0x4d7678[_0x1b615a(0x136)]===_0x1b615a(0x174))_0x2c216+=_0xfc080e,_0x14a382+=_0xfc080e-_0x5b55ee,_0x472d72++;else{if(_0x4d7678[_0x1b615a(0x136)]===_0x1b615a(0x15f)||_0x4d7678['status']===_0x1b615a(0x122))_0x19ccf9++;else{if(_0x4d7678[_0x1b615a(0x136)]===_0x1b615a(0x1ab))_0x15b2a4++,_0x2c216+=_0xfc080e;else _0x4d7678[_0x1b615a(0x136)]==='REFUND'&&(_0x4e7b87++,_0x2c216+=_0xfc080e);}}});const _0x4388a4=_0x472d72+_0x19ccf9,_0x17a0cf=_0x4388a4>0x0?(_0x472d72/_0x4388a4*0x64)[_0x15e000(0x10e)](0x1):_0x15e000(0x10f),_0x3fa188=_0x32ad6a['replace'](/\./g,'\x5c.')[_0x15e000(0x11a)](/\-/g,'\x5c-'),_0x466539=_0x2c216['toFixed'](0x2)[_0x15e000(0x11a)](/\./g,'\x5c.'),_0x5b55e2=_0x14a382[_0x15e000(0x10e)](0x2)['replace'](/\./g,'\x5c.'),_0x105592=_0x17a0cf['replace'](/\./g,'\x5c.'),_0x560ab5='ðŸ“Š\x20*Statistics:\x20'+_0x3fa188+'*\x0a\x0a'+(_0x15e000(0x19e)+_0x466539+'\x20USDT\x0a')+(_0x15e000(0x111)+_0x5b55e2+'\x20USDT\x0a')+(_0x15e000(0x160)+_0x472d72+'\x0a')+(_0x15e000(0x156)+_0x19ccf9+'\x0a')+(_0x15e000(0x19c)+_0x105592+'%\x0a')+('âš ï¸\x20Chargebacks\x20\x5c-\x20'+_0x15b2a4+'\x0a')+(_0x15e000(0x149)+_0x4e7b87),_0x505095={'inline_keyboard':[[{'text':_0x15e000(0x104),'callback_data':_0x15e000(0x18c)}]]};_0x2ddd11?await this['bot']?.[_0x15e000(0x1ad)](_0x560ab5,{'chat_id':_0x1cae11,'message_id':_0x2ddd11,'parse_mode':_0x15e000(0x14e),'reply_markup':_0x505095}):await this['bot']?.['sendMessage'](_0x1cae11,_0x560ab5,{'parse_mode':_0x15e000(0x14e),'reply_markup':_0x505095});}catch(_0x1a509f){console['error'](_0x15e000(0x166),_0x1a509f),await this[_0x15e000(0x193)]?.[_0x15e000(0x18b)](_0x1cae11,_0x15e000(0x129));}}['updateAdminIds'](_0x39585c){const _0x4ff0c3=a52_0x2309b5;this['config'][_0x4ff0c3(0x19d)]=_0x39585c['filter'](_0x207401=>_0x207401&&_0x207401[_0x4ff0c3(0x12a)]()),this['saveConfig'](),console['log']('âœ…\x20Admin\x20IDs\x20updated:',this['config'][_0x4ff0c3(0x19d)]);}[a52_0x2309b5(0x10b)](){const _0x377bc3=a52_0x2309b5;return[...this['config'][_0x377bc3(0x19d)]];}[a52_0x2309b5(0x116)](){const _0x43e323=a52_0x2309b5;return{'isActive':!!this[_0x43e323(0x193)],'adminCount':this[_0x43e323(0x161)][_0x43e323(0x19d)][_0x43e323(0x197)]};}[a52_0x2309b5(0x175)](){const _0x40481f=a52_0x2309b5;this[_0x40481f(0x193)]&&(this[_0x40481f(0x193)]['stopPolling'](),this['bot']=null,console[_0x40481f(0x181)](_0x40481f(0x134)));}}exports['AdminBotService']=AdminBotService,exports[a52_0x2309b5(0x170)]=new AdminBotService();