'use strict';function a52_0xc25e(){const _0x17e707=['uptime','telegramId','toString','\x20merchants...','1746404VcHvdJ','botActive','AdminBotService','cmd_statistics','âŒ\x20Error\x20getting\x20debug\x20information','join','Failed\x20to\x20download\x20photo:','MarkdownV2','â°\x20Timestamp:\x20','replace','telegramUser','warn','stats_this_month','getUTCDate','ðŸ“†\x20All\x20Time','file_id','startsWith','ï¿½\x20Today','isAdmin','getAdminIds','ðŸ“…\x20Yesterday','CHARGEBACK','from','__importDefault','\x20-\x20','Failed\x20to\x20send\x20to\x20','âŒ\x20Broadcast\x20cancelled','ðŸ“†\x20This\x20Month','âœ…\x20Delivered:\x20','ðŸ‘¥\x20Admin\x20Count:\x20','__esModule','*\x0a\x0a','ðŸ“¢\x20*Create\x20Broadcast*\x0a\x0aPlease\x20enter\x20the\x20message\x20text\x20you\x20want\x20to\x20send\x20to\x20all\x20merchants:','cwd','ðŸ“¤\x20Send','handleStatistics','4713939ASzsRq','photo','toISOString','adminIds','adminBotConfig.json','mkdirSync','message_id','botToken','loadConfig','âŒ\x20Merchant\x20bot\x20token\x20not\x20configured','6238440CHuyEG','âœ…\x20Active','Error\x20getting\x20statistics:','ðŸ“…\x20Today','node-telegram-bot-api','handleBroadcast','You\x20are\x20not\x20authorized\x20to\x20use\x20this\x20bot.\x0a','findMany','path','âœ…\x20Successful\x20Payments\x20\x5c-\x20','2500589OYTDIP','back_to_main','awaiting_text','ðŸ“…\x20All\x20Time','parse','chat','version','âŒ\x20No\x20message\x20to\x20send','ðŸ“¤\x20Sending\x20broadcast...','sendMessage','back_to_stats_menu','stats_yesterday','ðŸ”\x20*Debug\x20Information*\x0a\x0a','stats_all_time','getBotInfo','stats_today','Error\x20loading\x20admin\x20bot\x20config:','Admin\x20Telegram\x20bot\x20error:','ðŸ“…\x20This\x20Month','forEach','Markdown','yourId','EXPIRED','ðŸ“†\x20Yesterday','setupBotHandlers','nodeVersion','caption','bot','ðŸ‘¥\x20Total\x20Merchants:\x20','ðŸ’¬\x20Create\x20Broadcast','â›”ï¸\x20Access\x20Denied\x0a\x0a','updateAdminIds','readFileSync','delete','âš ï¸\x20Chargebacks\x20\x5c-\x20','cmd_debug','sendPhoto','initializeBot','amountUSDT','ðŸ“Š\x20*Statistics:\x20','1117693vEnMjN','length','stats_','ðŸ”™\x20Back','13732vkTzAO','ðŸ”„\x20Refunds\x20\x5c-\x20','writeFileSync','Contact\x20system\x20administrator.','photoFileId','status','ðŸ“¢\x20*Broadcast\x20Preview*\x0a\x0a','log','adminCount','REFUND','All\x20Time','broadcastSessions','PAID','toFixed','stats_last_month','stringify','getUTCFullYear','5319920HPSXxy','payment','Error\x20handling\x20debug\x20command:','ðŸ“Š\x20*Statistics*\x0a\x0aSelect\x20period:','ðŸ“ˆ\x20Conversion\x20\x5c-\x20','admins','default','includes','â±\x20Uptime:\x20','preview','cmd_broadcast','floor','ðŸ”\x20*TRAPAY\x20Admin\x20Bot*\x0a\x0aâœ…\x20You\x20are\x20authorized\x20as\x20admin.','ðŸ“‹\x20Admins:\x20`','message','ðŸ”§\x20Debug','getUTCMonth','step','ðŸ“¤\x20Sent:\x20','Error\x20saving\x20admin\x20bot\x20config:','editMessageText','â›”ï¸\x20Access\x20Denied','error','UTC','../config/database','padStart','data','ðŸ“†\x20Last\x20Month','â¬…ï¸\x20Back','âŒ\x20Inactive','answerCallbackQuery','189RdQSki','onText','text','\x0a\x0a_Ready\x20to\x20send?_','get','ðŸ“¤\x20Sending\x20broadcast\x20to\x20','ðŸ“¦\x20Node:\x20','existsSync','âŒ\x20Not\x20Delivered:\x20','FAILED','ðŸ“ˆ\x20Statistics','timestamp','utf-8','24KdRYWU','defineProperty','adminBotService','set','config','âŒ\x20Error\x20sending\x20broadcast','âŒ\x20Failed\x20to\x20download\x20photo','amountAfterGatewayCommissionUSDT','ðŸ†”\x20Your\x20ID:\x20`','\x20USDT\x0a','saveConfig','ðŸ“…\x20Last\x20Month'];a52_0xc25e=function(){return _0x17e707;};return a52_0xc25e();}const a52_0x4d3e9a=a52_0x5442;function a52_0x5442(_0x42a1ce,_0x40b73f){_0x42a1ce=_0x42a1ce-0x67;const _0xc25e65=a52_0xc25e();let _0x544266=_0xc25e65[_0x42a1ce];return _0x544266;}(function(_0x2d1c19,_0x36d3e6){const _0x21c8a4=a52_0x5442,_0x3d0b98=_0x2d1c19();while(!![]){try{const _0x22dd56=parseInt(_0x21c8a4(0xf1))/0x1+-parseInt(_0x21c8a4(0xf5))/0x2*(-parseInt(_0x21c8a4(0x74))/0x3)+-parseInt(_0x21c8a4(0x91))/0x4+parseInt(_0x21c8a4(0xbf))/0x5+parseInt(_0x21c8a4(0x81))/0x6*(-parseInt(_0x21c8a4(0xc9))/0x7)+-parseInt(_0x21c8a4(0x106))/0x8+parseInt(_0x21c8a4(0xb5))/0x9;if(_0x22dd56===_0x36d3e6)break;else _0x3d0b98['push'](_0x3d0b98['shift']());}catch(_0x2cfe36){_0x3d0b98['push'](_0x3d0b98['shift']());}}}(a52_0xc25e,0xc12ab));var __importDefault=this&&this[a52_0x4d3e9a(0xa8)]||function(_0x1e8aca){return _0x1e8aca&&_0x1e8aca['__esModule']?_0x1e8aca:{'default':_0x1e8aca};};Object[a52_0x4d3e9a(0x82)](exports,a52_0x4d3e9a(0xaf),{'value':!![]}),exports[a52_0x4d3e9a(0x83)]=exports[a52_0x4d3e9a(0x93)]=void 0x0;const node_telegram_bot_api_1=__importDefault(require(a52_0x4d3e9a(0xc3))),fs_1=__importDefault(require('fs')),path_1=__importDefault(require(a52_0x4d3e9a(0xc7))),CONFIG_PATH=path_1['default'][a52_0x4d3e9a(0x96)](process[a52_0x4d3e9a(0xb2)](),'data',a52_0x4d3e9a(0xb9));class AdminBotService{constructor(){const _0x3f6f7a=a52_0x4d3e9a;this[_0x3f6f7a(0xe4)]=null,this[_0x3f6f7a(0x100)]=new Map(),this[_0x3f6f7a(0xbc)]=process.env.TELEGRAM_ADMIN_BOT_TOKEN||'',this[_0x3f6f7a(0x85)]=this[_0x3f6f7a(0xbd)](),this[_0x3f6f7a(0xbc)]?this[_0x3f6f7a(0xee)]():console[_0x3f6f7a(0x9c)]('TELEGRAM_ADMIN_BOT_TOKEN\x20not\x20found\x20in\x20environment\x20variables');}[a52_0x4d3e9a(0xbd)](){const _0x41b041=a52_0x4d3e9a;try{if(fs_1[_0x41b041(0x10c)]['existsSync'](CONFIG_PATH)){const _0x8c5203=fs_1[_0x41b041(0x10c)][_0x41b041(0xe9)](CONFIG_PATH,_0x41b041(0x80));return JSON[_0x41b041(0xcd)](_0x8c5203);}}catch(_0x40e1f9){console[_0x41b041(0x6b)](_0x41b041(0xd9),_0x40e1f9);}return{'adminIds':[]};}[a52_0x4d3e9a(0x8b)](){const _0x397ef2=a52_0x4d3e9a;try{const _0x22a638=path_1[_0x397ef2(0x10c)]['dirname'](CONFIG_PATH);!fs_1[_0x397ef2(0x10c)][_0x397ef2(0x7b)](_0x22a638)&&fs_1[_0x397ef2(0x10c)][_0x397ef2(0xba)](_0x22a638,{'recursive':!![]}),fs_1['default'][_0x397ef2(0xf7)](CONFIG_PATH,JSON[_0x397ef2(0x104)](this[_0x397ef2(0x85)],null,0x2));}catch(_0x3a01dc){console[_0x397ef2(0x6b)](_0x397ef2(0x68),_0x3a01dc);}}[a52_0x4d3e9a(0xa3)](_0x4f33b1){const _0x3758f3=a52_0x4d3e9a;return this[_0x3758f3(0x85)][_0x3758f3(0xb8)][_0x3758f3(0x10d)](_0x4f33b1);}['initializeBot'](){const _0x1e244a=a52_0x4d3e9a;try{this[_0x1e244a(0xe4)]=new node_telegram_bot_api_1[(_0x1e244a(0x10c))](this['botToken'],{'polling':!![]}),this[_0x1e244a(0xe1)](),console[_0x1e244a(0xfc)]('âœ…\x20Admin\x20Telegram\x20bot\x20initialized\x20successfully');}catch(_0x353d4d){console[_0x1e244a(0x6b)]('âŒ\x20Failed\x20to\x20initialize\x20Admin\x20Telegram\x20bot:',_0x353d4d);}}[a52_0x4d3e9a(0xe1)](){const _0x4f8a5a=a52_0x4d3e9a;if(!this['bot'])return;this['bot'][_0x4f8a5a(0x75)](/\/start/,async _0xe8a666=>{const _0x4fb968=_0x4f8a5a,_0x3f081e=_0xe8a666['chat']['id'],_0x3e213c=_0xe8a666[_0x4fb968(0xa7)]?.['id'][_0x4fb968(0x8f)]();if(!_0x3e213c)return;if(this['isAdmin'](_0x3e213c)){const _0x5d7234={'inline_keyboard':[[{'text':_0x4fb968(0x7e),'callback_data':'cmd_statistics'}],[{'text':_0x4fb968(0xe6),'callback_data':_0x4fb968(0x110)}],[{'text':_0x4fb968(0x115),'callback_data':_0x4fb968(0xec)}]]};await this[_0x4fb968(0xe4)]?.[_0x4fb968(0xd2)](_0x3f081e,_0x4fb968(0x112),{'parse_mode':_0x4fb968(0xdd),'reply_markup':_0x5d7234});}else await this[_0x4fb968(0xe4)]?.[_0x4fb968(0xd2)](_0x3f081e,_0x4fb968(0xe7)+_0x4fb968(0xc5)+_0x4fb968(0xf8),{'parse_mode':_0x4fb968(0xdd)});}),this[_0x4f8a5a(0xe4)]['onText'](/\/debug/,async _0x3bffd3=>{const _0xed3484=_0x4f8a5a,_0x23f2e9=_0x3bffd3['chat']['id'],_0x595fe5=_0x3bffd3[_0xed3484(0xa7)]?.['id']['toString']();if(!_0x595fe5)return;if(!this[_0xed3484(0xa3)](_0x595fe5)){await this['bot']?.[_0xed3484(0xd2)](_0x23f2e9,_0xed3484(0x6a));return;}try{const _0x327c54={'botActive':!!this[_0xed3484(0xe4)],'adminCount':this[_0xed3484(0x85)][_0xed3484(0xb8)]['length'],'admins':this['config'][_0xed3484(0xb8)],'yourId':_0x595fe5,'timestamp':new Date()[_0xed3484(0xb7)](),'nodeVersion':process['version'],'uptime':process[_0xed3484(0x8d)]()};let _0x72eaf4='ðŸ”\x20*Debug\x20Information*\x0a\x0a';_0x72eaf4+='ðŸ¤–\x20Bot\x20Status:\x20'+(_0x327c54[_0xed3484(0x92)]?_0xed3484(0xc0):_0xed3484(0x72))+'\x0a',_0x72eaf4+='ðŸ‘¥\x20Admin\x20Count:\x20'+_0x327c54['adminCount']+'\x0a',_0x72eaf4+=_0xed3484(0x113)+_0x327c54['admins'][_0xed3484(0x96)](',\x20')+'`\x0a',_0x72eaf4+=_0xed3484(0x89)+_0x327c54[_0xed3484(0xde)]+'`\x0a',_0x72eaf4+='â°\x20Timestamp:\x20'+_0x327c54['timestamp']+'\x0a',_0x72eaf4+=_0xed3484(0x7a)+_0x327c54['nodeVersion']+'\x0a',_0x72eaf4+=_0xed3484(0x10e)+Math[_0xed3484(0x111)](_0x327c54[_0xed3484(0x8d)])+'s',await this[_0xed3484(0xe4)]?.[_0xed3484(0xd2)](_0x23f2e9,_0x72eaf4,{'parse_mode':_0xed3484(0xdd)});}catch(_0x5910bf){console[_0xed3484(0x6b)]('Error\x20handling\x20/debug\x20command:',_0x5910bf),await this[_0xed3484(0xe4)]?.[_0xed3484(0xd2)](_0x23f2e9,_0xed3484(0x95));}}),this[_0x4f8a5a(0xe4)][_0x4f8a5a(0x75)](/\/statistics/,async _0x507ccd=>{const _0x3ec5f6=_0x4f8a5a,_0x253d7b=_0x507ccd[_0x3ec5f6(0xce)]['id'],_0x556962=_0x507ccd[_0x3ec5f6(0xa7)]?.['id'][_0x3ec5f6(0x8f)]();if(!_0x556962)return;if(!this[_0x3ec5f6(0xa3)](_0x556962)){await this[_0x3ec5f6(0xe4)]?.[_0x3ec5f6(0xd2)](_0x253d7b,_0x3ec5f6(0x6a));return;}const _0x54fbf6={'inline_keyboard':[[{'text':_0x3ec5f6(0xc2),'callback_data':'stats_today'}],[{'text':_0x3ec5f6(0xa5),'callback_data':_0x3ec5f6(0xd4)}],[{'text':'ðŸ“…\x20This\x20Month','callback_data':_0x3ec5f6(0x9d)}],[{'text':_0x3ec5f6(0x8c),'callback_data':_0x3ec5f6(0x103)}],[{'text':_0x3ec5f6(0xcc),'callback_data':_0x3ec5f6(0xd6)}]]};await this[_0x3ec5f6(0xe4)]?.[_0x3ec5f6(0xd2)](_0x253d7b,_0x3ec5f6(0x109),{'parse_mode':_0x3ec5f6(0xdd),'reply_markup':_0x54fbf6});}),this[_0x4f8a5a(0xe4)]['on']('callback_query',async _0x1c268b=>{const _0x1525a8=_0x4f8a5a,_0x15a3e4=_0x1c268b['message']?.[_0x1525a8(0xce)]['id'],_0x5aaa57=_0x1c268b[_0x1525a8(0xa7)]?.['id']['toString'](),_0x28b419=_0x1c268b[_0x1525a8(0x6f)];if(!_0x15a3e4||!_0x5aaa57||!_0x28b419)return;if(!this[_0x1525a8(0xa3)](_0x5aaa57)){await this[_0x1525a8(0xe4)]?.[_0x1525a8(0x73)](_0x1c268b['id'],{'text':_0x1525a8(0x6a)});return;}if(_0x28b419==='cmd_statistics'){const _0x9fba3e={'inline_keyboard':[[{'text':_0x1525a8(0xc2),'callback_data':_0x1525a8(0xd8)}],[{'text':_0x1525a8(0xa5),'callback_data':'stats_yesterday'}],[{'text':_0x1525a8(0xdb),'callback_data':'stats_this_month'}],[{'text':_0x1525a8(0x8c),'callback_data':_0x1525a8(0x103)}],[{'text':_0x1525a8(0xcc),'callback_data':_0x1525a8(0xd6)}],[{'text':_0x1525a8(0xf4),'callback_data':'back_to_main'}]]};await this[_0x1525a8(0xe4)]?.[_0x1525a8(0x69)](_0x1525a8(0x109),{'chat_id':_0x15a3e4,'message_id':_0x1c268b[_0x1525a8(0x114)]?.[_0x1525a8(0xbb)],'parse_mode':_0x1525a8(0xdd),'reply_markup':_0x9fba3e}),await this['bot']?.[_0x1525a8(0x73)](_0x1c268b['id']);}else{if(_0x28b419===_0x1525a8(0xec))try{const _0x197a5b={'botActive':!!this[_0x1525a8(0xe4)],'adminCount':this[_0x1525a8(0x85)][_0x1525a8(0xb8)]['length'],'admins':this['config'][_0x1525a8(0xb8)],'yourId':_0x5aaa57,'timestamp':new Date()[_0x1525a8(0xb7)](),'nodeVersion':process[_0x1525a8(0xcf)],'uptime':process[_0x1525a8(0x8d)]()};let _0x5c6930=_0x1525a8(0xd5);_0x5c6930+='ðŸ¤–\x20Bot\x20Status:\x20'+(_0x197a5b[_0x1525a8(0x92)]?_0x1525a8(0xc0):'âŒ\x20Inactive')+'\x0a',_0x5c6930+=_0x1525a8(0xae)+_0x197a5b[_0x1525a8(0xfd)]+'\x0a',_0x5c6930+=_0x1525a8(0x113)+_0x197a5b[_0x1525a8(0x10b)][_0x1525a8(0x96)](',\x20')+'`\x0a',_0x5c6930+=_0x1525a8(0x89)+_0x197a5b['yourId']+'`\x0a',_0x5c6930+=_0x1525a8(0x99)+_0x197a5b[_0x1525a8(0x7f)]+'\x0a',_0x5c6930+=_0x1525a8(0x7a)+_0x197a5b[_0x1525a8(0xe2)]+'\x0a',_0x5c6930+=_0x1525a8(0x10e)+Math[_0x1525a8(0x111)](_0x197a5b['uptime'])+'s';const _0x2bdd2b={'inline_keyboard':[[{'text':_0x1525a8(0x71),'callback_data':_0x1525a8(0xca)}]]};await this[_0x1525a8(0xe4)]?.[_0x1525a8(0x69)](_0x5c6930,{'chat_id':_0x15a3e4,'message_id':_0x1c268b[_0x1525a8(0x114)]?.[_0x1525a8(0xbb)],'parse_mode':_0x1525a8(0xdd),'reply_markup':_0x2bdd2b}),await this[_0x1525a8(0xe4)]?.['answerCallbackQuery'](_0x1c268b['id']);}catch(_0x13238f){console['error'](_0x1525a8(0x108),_0x13238f),await this['bot']?.[_0x1525a8(0x73)](_0x1c268b['id'],{'text':'âŒ\x20Error\x20getting\x20debug\x20information'});}else{if(_0x28b419===_0x1525a8(0x110))this[_0x1525a8(0x100)][_0x1525a8(0x84)](_0x15a3e4,{'step':_0x1525a8(0xcb)}),await this[_0x1525a8(0xe4)]?.[_0x1525a8(0x69)](_0x1525a8(0xb1),{'chat_id':_0x15a3e4,'message_id':_0x1c268b['message']?.['message_id'],'parse_mode':_0x1525a8(0xdd)}),await this[_0x1525a8(0xe4)]?.[_0x1525a8(0x73)](_0x1c268b['id']);else{if(_0x28b419==='broadcast_cancel')this[_0x1525a8(0x100)][_0x1525a8(0xea)](_0x15a3e4),await this[_0x1525a8(0xe4)]?.['sendMessage'](_0x15a3e4,_0x1525a8(0xab)),await this[_0x1525a8(0xe4)]?.[_0x1525a8(0x73)](_0x1c268b['id']);else{if(_0x28b419==='broadcast_send'){const _0x781e6a=this[_0x1525a8(0x100)][_0x1525a8(0x78)](_0x15a3e4);if(!_0x781e6a||!_0x781e6a[_0x1525a8(0x76)]&&!_0x781e6a[_0x1525a8(0xf9)]){await this[_0x1525a8(0xe4)]?.[_0x1525a8(0x73)](_0x1c268b['id'],{'text':_0x1525a8(0xd0)});return;}await this[_0x1525a8(0xe4)]?.[_0x1525a8(0x73)](_0x1c268b['id'],{'text':_0x1525a8(0xd1)}),await this[_0x1525a8(0xc4)](_0x15a3e4,_0x781e6a[_0x1525a8(0x76)]||'',_0x781e6a[_0x1525a8(0xf9)]),this['broadcastSessions'][_0x1525a8(0xea)](_0x15a3e4);}else{if(_0x28b419['startsWith'](_0x1525a8(0xf3)))await this[_0x1525a8(0xb4)](_0x15a3e4,_0x28b419,_0x1c268b[_0x1525a8(0x114)]?.[_0x1525a8(0xbb)]),await this[_0x1525a8(0xe4)]?.[_0x1525a8(0x73)](_0x1c268b['id']);else{if(_0x28b419===_0x1525a8(0xca)){const _0x4971cc={'inline_keyboard':[[{'text':_0x1525a8(0x7e),'callback_data':_0x1525a8(0x94)}],[{'text':_0x1525a8(0xe6),'callback_data':_0x1525a8(0x110)}],[{'text':_0x1525a8(0x115),'callback_data':_0x1525a8(0xec)}]]};await this[_0x1525a8(0xe4)]?.['editMessageText'](_0x1525a8(0x112),{'chat_id':_0x15a3e4,'message_id':_0x1c268b[_0x1525a8(0x114)]?.['message_id'],'parse_mode':'Markdown','reply_markup':_0x4971cc}),await this[_0x1525a8(0xe4)]?.['answerCallbackQuery'](_0x1c268b['id']);}else{if(_0x28b419==='back_to_stats_menu'){const _0x16ef47={'inline_keyboard':[[{'text':_0x1525a8(0xa2),'callback_data':_0x1525a8(0xd8)}],[{'text':_0x1525a8(0xe0),'callback_data':_0x1525a8(0xd4)}],[{'text':_0x1525a8(0xac),'callback_data':_0x1525a8(0x9d)}],[{'text':_0x1525a8(0x70),'callback_data':_0x1525a8(0x103)}],[{'text':_0x1525a8(0x9f),'callback_data':_0x1525a8(0xd6)}],[{'text':_0x1525a8(0x71),'callback_data':'back_to_main'}]]};await this[_0x1525a8(0xe4)]?.['editMessageText'](_0x1525a8(0x109),{'chat_id':_0x15a3e4,'message_id':_0x1c268b[_0x1525a8(0x114)]?.['message_id'],'parse_mode':_0x1525a8(0xdd),'reply_markup':_0x16ef47}),await this[_0x1525a8(0xe4)]?.[_0x1525a8(0x73)](_0x1c268b['id']);}}}}}}}}}),this['bot']['on'](_0x4f8a5a(0x114),async _0x3e9c72=>{const _0x2b8e91=_0x4f8a5a,_0x315ded=_0x3e9c72['chat']['id'],_0x19318e=_0x3e9c72['from']?.['id'][_0x2b8e91(0x8f)](),_0x3eaef6=_0x3e9c72[_0x2b8e91(0x76)]||_0x3e9c72[_0x2b8e91(0xe3)],_0x17d573=_0x3e9c72[_0x2b8e91(0xb6)];if(!_0x19318e)return;if(!this[_0x2b8e91(0xa3)](_0x19318e))return;if(_0x3eaef6&&_0x3eaef6[_0x2b8e91(0xa1)]('/'))return;const _0x512f8f=this[_0x2b8e91(0x100)][_0x2b8e91(0x78)](_0x315ded);if(!_0x512f8f)return;if(_0x512f8f[_0x2b8e91(0x117)]===_0x2b8e91(0xcb)){if(!_0x3eaef6&&!_0x17d573)return;_0x512f8f['text']=_0x3eaef6||'';_0x17d573&&_0x17d573[_0x2b8e91(0xf2)]>0x0&&(_0x512f8f['photoFileId']=_0x17d573[_0x17d573['length']-0x1][_0x2b8e91(0xa0)]);_0x512f8f[_0x2b8e91(0x117)]=_0x2b8e91(0x10f);const _0x19f6a1={'inline_keyboard':[[{'text':'âŒ\x20Cancel','callback_data':'broadcast_cancel'},{'text':_0x2b8e91(0xb3),'callback_data':'broadcast_send'}]]};_0x512f8f['photoFileId']?await this[_0x2b8e91(0xe4)]?.['sendPhoto'](_0x315ded,_0x512f8f[_0x2b8e91(0xf9)],{'caption':_0x2b8e91(0xfb)+_0x512f8f[_0x2b8e91(0x76)]+_0x2b8e91(0x77),'parse_mode':'Markdown','reply_markup':_0x19f6a1}):await this[_0x2b8e91(0xe4)]?.[_0x2b8e91(0xd2)](_0x315ded,_0x2b8e91(0xfb)+_0x512f8f[_0x2b8e91(0x76)]+_0x2b8e91(0x77),{'parse_mode':_0x2b8e91(0xdd),'reply_markup':_0x19f6a1});}}),this[_0x4f8a5a(0xe4)]['on'](_0x4f8a5a(0x6b),_0x1620d6=>{const _0x512325=_0x4f8a5a;console[_0x512325(0x6b)](_0x512325(0xda),_0x1620d6);});}async['handleBroadcast'](_0x3ef324,_0xc1ac3b,_0x2bf22f){const _0x5c5eb7=a52_0x4d3e9a;try{const _0x18f6d8=require(_0x5c5eb7(0x6d))[_0x5c5eb7(0x10c)],_0x383720=require('node-telegram-bot-api'),_0xce2ab2=process.env.TELEGRAM_BOT_TOKEN;if(!_0xce2ab2){await this[_0x5c5eb7(0xe4)]?.['sendMessage'](_0x3ef324,_0x5c5eb7(0xbe));return;}const _0x78d5f4=new _0x383720(_0xce2ab2),_0x5f1606=await _0x18f6d8[_0x5c5eb7(0x9b)][_0x5c5eb7(0xc6)]({'where':{'shopId':{'not':null},'isVerified':!![]},'select':{'telegramId':!![]}}),_0x5eb486=_0x5f1606[_0x5c5eb7(0xf2)];let _0x39e88e=0x0,_0x287285=0x0,_0x1ac2b5=0x0;await this['bot']?.[_0x5c5eb7(0xd2)](_0x3ef324,_0x5c5eb7(0x79)+_0x5eb486+_0x5c5eb7(0x90));let _0x113354=null;if(_0x2bf22f&&this[_0x5c5eb7(0xe4)])try{const _0x24434e=await this[_0x5c5eb7(0xe4)]['getFileLink'](_0x2bf22f),_0x51c09f=await fetch(_0x24434e);_0x113354=Buffer[_0x5c5eb7(0xa7)](await _0x51c09f['arrayBuffer']());}catch(_0x532548){console[_0x5c5eb7(0x6b)](_0x5c5eb7(0x97),_0x532548),await this[_0x5c5eb7(0xe4)]?.['sendMessage'](_0x3ef324,_0x5c5eb7(0x87));return;}for(const _0x4ba23e of _0x5f1606){try{_0x113354?await _0x78d5f4[_0x5c5eb7(0xed)](_0x4ba23e['telegramId'],_0x113354,{'caption':_0xc1ac3b,'parse_mode':_0x5c5eb7(0xdd)}):await _0x78d5f4['sendMessage'](_0x4ba23e[_0x5c5eb7(0x8e)],_0xc1ac3b,{'parse_mode':'Markdown'}),_0x39e88e++,_0x287285++,await new Promise(_0x27b78f=>setTimeout(_0x27b78f,0x64));}catch(_0x3aabfe){_0x39e88e++,_0x1ac2b5++,console[_0x5c5eb7(0x6b)](_0x5c5eb7(0xaa)+_0x4ba23e['telegramId']+':',_0x3aabfe['message']);}}const _0x25001e='âœ…\x20*Broadcast\x20Complete*\x0a\x0a'+(_0x5c5eb7(0xe5)+_0x5eb486+'\x0a')+(_0x5c5eb7(0x67)+_0x39e88e+'\x0a')+(_0x5c5eb7(0xad)+_0x287285+'\x0a')+(_0x5c5eb7(0x7c)+_0x1ac2b5);await this['bot']?.['sendMessage'](_0x3ef324,_0x25001e,{'parse_mode':_0x5c5eb7(0xdd)});}catch(_0x2e9b92){console['error']('Error\x20sending\x20broadcast:',_0x2e9b92),await this[_0x5c5eb7(0xe4)]?.['sendMessage'](_0x3ef324,_0x5c5eb7(0x86));}}async[a52_0x4d3e9a(0xb4)](_0xf6d32c,_0x53ff15,_0x37cece){const _0x21275a=a52_0x4d3e9a;try{const _0x4d7978=require('../config/database')[_0x21275a(0x10c)],_0xcfdaec=new Date();let _0x24f507,_0x522c64,_0x23e5cb;switch(_0x53ff15){case _0x21275a(0xd8):{const _0x516a32=new Date(Date['UTC'](_0xcfdaec['getUTCFullYear'](),_0xcfdaec['getUTCMonth'](),_0xcfdaec[_0x21275a(0x9e)]()));_0x24f507=_0x516a32,_0x522c64=new Date(Date['UTC'](_0xcfdaec[_0x21275a(0x105)](),_0xcfdaec['getUTCMonth'](),_0xcfdaec[_0x21275a(0x9e)](),0x17,0x3b,0x3b,0x3e7)),_0x23e5cb=_0x516a32[_0x21275a(0x9e)]()['toString']()['padStart'](0x2,'0')+'.'+(_0x516a32[_0x21275a(0x116)]()+0x1)[_0x21275a(0x8f)]()[_0x21275a(0x6e)](0x2,'0')+'.'+_0x516a32[_0x21275a(0x105)]();break;}case _0x21275a(0xd4):{const _0x86d8de=new Date(Date[_0x21275a(0x6c)](_0xcfdaec[_0x21275a(0x105)](),_0xcfdaec[_0x21275a(0x116)](),_0xcfdaec[_0x21275a(0x9e)]()-0x1));_0x24f507=_0x86d8de,_0x522c64=new Date(Date[_0x21275a(0x6c)](_0xcfdaec[_0x21275a(0x105)](),_0xcfdaec[_0x21275a(0x116)](),_0xcfdaec[_0x21275a(0x9e)]()-0x1,0x17,0x3b,0x3b,0x3e7)),_0x23e5cb=_0x86d8de[_0x21275a(0x9e)]()['toString']()['padStart'](0x2,'0')+'.'+(_0x86d8de[_0x21275a(0x116)]()+0x1)[_0x21275a(0x8f)]()[_0x21275a(0x6e)](0x2,'0')+'.'+_0x86d8de['getUTCFullYear']();break;}case _0x21275a(0x9d):{const _0x662a20=new Date(Date[_0x21275a(0x6c)](_0xcfdaec['getUTCFullYear'](),_0xcfdaec[_0x21275a(0x116)](),0x1));_0x24f507=_0x662a20,_0x522c64=new Date(Date['UTC'](_0xcfdaec[_0x21275a(0x105)](),_0xcfdaec['getUTCMonth']()+0x1,0x0,0x17,0x3b,0x3b,0x3e7));const _0x3bd6df=new Date(Date['UTC'](_0xcfdaec[_0x21275a(0x105)](),_0xcfdaec[_0x21275a(0x116)]()+0x1,0x0));_0x23e5cb=_0x662a20[_0x21275a(0x9e)]()['toString']()[_0x21275a(0x6e)](0x2,'0')+'.'+(_0x662a20[_0x21275a(0x116)]()+0x1)['toString']()[_0x21275a(0x6e)](0x2,'0')+'.'+_0x662a20[_0x21275a(0x105)]()+_0x21275a(0xa9)+_0x3bd6df[_0x21275a(0x9e)]()[_0x21275a(0x8f)]()['padStart'](0x2,'0')+'.'+(_0x3bd6df[_0x21275a(0x116)]()+0x1)[_0x21275a(0x8f)]()[_0x21275a(0x6e)](0x2,'0')+'.'+_0x3bd6df[_0x21275a(0x105)]();break;}case _0x21275a(0x103):{const _0x58419f=new Date(Date[_0x21275a(0x6c)](_0xcfdaec['getUTCFullYear'](),_0xcfdaec[_0x21275a(0x116)]()-0x1,0x1));_0x24f507=_0x58419f,_0x522c64=new Date(Date[_0x21275a(0x6c)](_0xcfdaec[_0x21275a(0x105)](),_0xcfdaec['getUTCMonth'](),0x0,0x17,0x3b,0x3b,0x3e7));const _0x1c8f9f=new Date(Date[_0x21275a(0x6c)](_0xcfdaec[_0x21275a(0x105)](),_0xcfdaec['getUTCMonth'](),0x0));_0x23e5cb=_0x58419f['getUTCDate']()[_0x21275a(0x8f)]()[_0x21275a(0x6e)](0x2,'0')+'.'+(_0x58419f[_0x21275a(0x116)]()+0x1)[_0x21275a(0x8f)]()[_0x21275a(0x6e)](0x2,'0')+'.'+_0x58419f[_0x21275a(0x105)]()+'\x20-\x20'+_0x1c8f9f['getUTCDate']()[_0x21275a(0x8f)]()[_0x21275a(0x6e)](0x2,'0')+'.'+(_0x1c8f9f['getUTCMonth']()+0x1)[_0x21275a(0x8f)]()[_0x21275a(0x6e)](0x2,'0')+'.'+_0x1c8f9f[_0x21275a(0x105)]();break;}case _0x21275a(0xd6):{_0x24f507=new Date(0x0),_0x522c64=_0xcfdaec,_0x23e5cb=_0x21275a(0xff);break;}default:return;}const _0x48b2dd=await _0x4d7978[_0x21275a(0x107)][_0x21275a(0xc6)]({'where':{'createdAt':{'gte':_0x24f507,'lte':_0x522c64}},'select':{'status':!![],'amountUSDT':!![],'amountAfterGatewayCommissionUSDT':!![]}});let _0x5f30c4=0x0,_0xfe8374=0x0,_0x56bc5d=0x0,_0x567bd8=0x0,_0x3366b7=0x0,_0x2daf2e=0x0;_0x48b2dd[_0x21275a(0xdc)](_0x2c890f=>{const _0x26d46c=_0x21275a,_0x29781c=_0x2c890f[_0x26d46c(0xef)]||0x0,_0x7c51c3=_0x2c890f[_0x26d46c(0x88)]||0x0;if(_0x2c890f[_0x26d46c(0xfa)]===_0x26d46c(0x101))_0x5f30c4+=_0x29781c,_0xfe8374+=_0x29781c-_0x7c51c3,_0x56bc5d++;else{if(_0x2c890f[_0x26d46c(0xfa)]===_0x26d46c(0x7d)||_0x2c890f['status']===_0x26d46c(0xdf))_0x567bd8++;else{if(_0x2c890f['status']===_0x26d46c(0xa6))_0x3366b7++,_0x5f30c4+=_0x29781c;else _0x2c890f[_0x26d46c(0xfa)]===_0x26d46c(0xfe)&&(_0x2daf2e++,_0x5f30c4+=_0x29781c);}}});const _0x271772=_0x56bc5d+_0x567bd8,_0x5e390a=_0x271772>0x0?(_0x56bc5d/_0x271772*0x64)['toFixed'](0x1):'0.0',_0x3eba3a=_0x23e5cb['replace'](/\./g,'\x5c.')[_0x21275a(0x9a)](/\-/g,'\x5c-'),_0x1eae11=_0x5f30c4['toFixed'](0x2)[_0x21275a(0x9a)](/\./g,'\x5c.'),_0x58264b=_0xfe8374[_0x21275a(0x102)](0x2)[_0x21275a(0x9a)](/\./g,'\x5c.'),_0x3c8a8d=_0x5e390a[_0x21275a(0x9a)](/\./g,'\x5c.'),_0x12582e=_0x21275a(0xf0)+_0x3eba3a+_0x21275a(0xb0)+('ðŸ’°\x20Turnover\x20\x5c-\x20'+_0x1eae11+_0x21275a(0x8a))+('ðŸ’µ\x20Earned\x20\x5c-\x20'+_0x58264b+_0x21275a(0x8a))+(_0x21275a(0xc8)+_0x56bc5d+'\x0a')+('âŒ\x20Failed\x20Payments\x20\x5c-\x20'+_0x567bd8+'\x0a')+(_0x21275a(0x10a)+_0x3c8a8d+'%\x0a')+(_0x21275a(0xeb)+_0x3366b7+'\x0a')+(_0x21275a(0xf6)+_0x2daf2e),_0x3d0bee={'inline_keyboard':[[{'text':_0x21275a(0x71),'callback_data':_0x21275a(0xd3)}]]};_0x37cece?await this[_0x21275a(0xe4)]?.[_0x21275a(0x69)](_0x12582e,{'chat_id':_0xf6d32c,'message_id':_0x37cece,'parse_mode':_0x21275a(0x98),'reply_markup':_0x3d0bee}):await this[_0x21275a(0xe4)]?.[_0x21275a(0xd2)](_0xf6d32c,_0x12582e,{'parse_mode':_0x21275a(0x98),'reply_markup':_0x3d0bee});}catch(_0x2a407f){console[_0x21275a(0x6b)](_0x21275a(0xc1),_0x2a407f),await this['bot']?.['sendMessage'](_0xf6d32c,'âŒ\x20Error\x20getting\x20statistics');}}[a52_0x4d3e9a(0xe8)](_0x501daa){const _0x197195=a52_0x4d3e9a;this['config'][_0x197195(0xb8)]=_0x501daa['filter'](_0x3b799d=>_0x3b799d&&_0x3b799d['trim']()),this['saveConfig'](),console[_0x197195(0xfc)]('âœ…\x20Admin\x20IDs\x20updated:',this[_0x197195(0x85)][_0x197195(0xb8)]);}[a52_0x4d3e9a(0xa4)](){const _0x1fb676=a52_0x4d3e9a;return[...this['config'][_0x1fb676(0xb8)]];}[a52_0x4d3e9a(0xd7)](){const _0x7c14d5=a52_0x4d3e9a;return{'isActive':!!this[_0x7c14d5(0xe4)],'adminCount':this['config']['adminIds'][_0x7c14d5(0xf2)]};}['stopBot'](){const _0x573986=a52_0x4d3e9a;this[_0x573986(0xe4)]&&(this[_0x573986(0xe4)]['stopPolling'](),this['bot']=null,console[_0x573986(0xfc)]('ðŸ›‘\x20Admin\x20Telegram\x20bot\x20stopped'));}}exports[a52_0x4d3e9a(0x93)]=AdminBotService,exports[a52_0x4d3e9a(0x83)]=new AdminBotService();