'use strict';function a52_0x2547(_0x5dd93e,_0x5be160){_0x5dd93e=_0x5dd93e-0x99;const _0x5187c9=a52_0x5187();let _0x254728=_0x5187c9[_0x5dd93e];return _0x254728;}const a52_0x643f78=a52_0x2547;(function(_0x45316b,_0x4c44d5){const _0x522bac=a52_0x2547,_0xedf649=_0x45316b();while(!![]){try{const _0x4bb0c1=-parseInt(_0x522bac(0xeb))/0x1+parseInt(_0x522bac(0x134))/0x2*(parseInt(_0x522bac(0xc1))/0x3)+-parseInt(_0x522bac(0xd8))/0x4*(parseInt(_0x522bac(0xb4))/0x5)+parseInt(_0x522bac(0xd9))/0x6+-parseInt(_0x522bac(0x11e))/0x7*(-parseInt(_0x522bac(0x11d))/0x8)+parseInt(_0x522bac(0x122))/0x9*(parseInt(_0x522bac(0xf5))/0xa)+parseInt(_0x522bac(0x144))/0xb*(-parseInt(_0x522bac(0x105))/0xc);if(_0x4bb0c1===_0x4c44d5)break;else _0xedf649['push'](_0xedf649['shift']());}catch(_0x3cb3ad){_0xedf649['push'](_0xedf649['shift']());}}}(a52_0x5187,0x7ebcd));var __importDefault=this&&this[a52_0x643f78(0x13f)]||function(_0xd2b49d){const _0x58583e=a52_0x643f78;return _0xd2b49d&&_0xd2b49d[_0x58583e(0xa5)]?_0xd2b49d:{'default':_0xd2b49d};};Object[a52_0x643f78(0xf1)](exports,a52_0x643f78(0xa5),{'value':!![]}),exports[a52_0x643f78(0x141)]=exports[a52_0x643f78(0x11a)]=void 0x0;const node_telegram_bot_api_1=__importDefault(require(a52_0x643f78(0x13e))),fs_1=__importDefault(require('fs')),path_1=__importDefault(require('path')),CONFIG_PATH=path_1[a52_0x643f78(0xb0)][a52_0x643f78(0xcb)](process[a52_0x643f78(0xfb)](),a52_0x643f78(0xac),a52_0x643f78(0xd3));class AdminBotService{constructor(){const _0x426ce0=a52_0x643f78;this['bot']=null,this[_0x426ce0(0xb3)]=new Map(),this['botToken']=process.env.TELEGRAM_ADMIN_BOT_TOKEN||'',this[_0x426ce0(0xc6)]=this[_0x426ce0(0xcc)](),this[_0x426ce0(0x131)]?this[_0x426ce0(0x148)]():console['warn'](_0x426ce0(0xa1));}['loadConfig'](){const _0x33bb7c=a52_0x643f78;try{if(fs_1[_0x33bb7c(0xb0)]['existsSync'](CONFIG_PATH)){const _0x1c3d5d=fs_1[_0x33bb7c(0xb0)][_0x33bb7c(0xf7)](CONFIG_PATH,_0x33bb7c(0xe3));return JSON[_0x33bb7c(0x108)](_0x1c3d5d);}}catch(_0x3223d0){console[_0x33bb7c(0xc4)](_0x33bb7c(0x125),_0x3223d0);}return{'adminIds':[]};}[a52_0x643f78(0x146)](){const _0x383c35=a52_0x643f78;try{const _0x4de601=path_1[_0x383c35(0xb0)][_0x383c35(0x137)](CONFIG_PATH);!fs_1[_0x383c35(0xb0)][_0x383c35(0xde)](_0x4de601)&&fs_1[_0x383c35(0xb0)][_0x383c35(0x14e)](_0x4de601,{'recursive':!![]}),fs_1['default']['writeFileSync'](CONFIG_PATH,JSON[_0x383c35(0xa4)](this[_0x383c35(0xc6)],null,0x2));}catch(_0x247042){console[_0x383c35(0xc4)](_0x383c35(0xbe),_0x247042);}}[a52_0x643f78(0x126)](_0x1c4ca4){const _0x43b719=a52_0x643f78;return this[_0x43b719(0xc6)][_0x43b719(0x139)][_0x43b719(0xd1)](_0x1c4ca4);}[a52_0x643f78(0x148)](){const _0x192b06=a52_0x643f78;try{this[_0x192b06(0xe8)]=new node_telegram_bot_api_1[(_0x192b06(0xb0))](this['botToken'],{'polling':!![]}),this[_0x192b06(0xab)](),console[_0x192b06(0x10a)](_0x192b06(0xb8));}catch(_0x392aee){console[_0x192b06(0xc4)]('âŒ\x20Failed\x20to\x20initialize\x20Admin\x20Telegram\x20bot:',_0x392aee);}}['setupBotHandlers'](){const _0x2b0647=a52_0x643f78;if(!this['bot'])return;this[_0x2b0647(0xe8)]['onText'](/\/start/,async _0x46d8c1=>{const _0x1b9233=_0x2b0647,_0x93970d=_0x46d8c1[_0x1b9233(0xb2)]['id'],_0x42af0e=_0x46d8c1[_0x1b9233(0xf9)]?.['id'][_0x1b9233(0xfc)]();if(!_0x42af0e)return;if(this[_0x1b9233(0x126)](_0x42af0e)){const _0x594fcf={'inline_keyboard':[[{'text':_0x1b9233(0x112),'callback_data':_0x1b9233(0x9a)}],[{'text':_0x1b9233(0x9f),'callback_data':'cmd_broadcast'}],[{'text':_0x1b9233(0xae),'callback_data':'cmd_debug'}]]};await this['bot']?.[_0x1b9233(0xbc)](_0x93970d,_0x1b9233(0x12c),{'parse_mode':_0x1b9233(0x13d),'reply_markup':_0x594fcf});}else await this[_0x1b9233(0xe8)]?.[_0x1b9233(0xbc)](_0x93970d,_0x1b9233(0xe4)+_0x1b9233(0x121)+_0x1b9233(0xf8),{'parse_mode':_0x1b9233(0x13d)});}),this['bot'][_0x2b0647(0xe0)](/\/debug/,async _0xf2f3c4=>{const _0x4fb90a=_0x2b0647,_0xd3e931=_0xf2f3c4[_0x4fb90a(0xb2)]['id'],_0x43ea23=_0xf2f3c4[_0x4fb90a(0xf9)]?.['id'][_0x4fb90a(0xfc)]();if(!_0x43ea23)return;if(!this['isAdmin'](_0x43ea23)){await this[_0x4fb90a(0xe8)]?.[_0x4fb90a(0xbc)](_0xd3e931,_0x4fb90a(0x12a));return;}try{const _0x5c69e1={'botActive':!!this[_0x4fb90a(0xe8)],'adminCount':this[_0x4fb90a(0xc6)][_0x4fb90a(0x139)]['length'],'admins':this[_0x4fb90a(0xc6)][_0x4fb90a(0x139)],'yourId':_0x43ea23,'timestamp':new Date()[_0x4fb90a(0x11c)](),'nodeVersion':process[_0x4fb90a(0x13b)],'uptime':process[_0x4fb90a(0x14c)]()};let _0x10e521=_0x4fb90a(0xee);_0x10e521+=_0x4fb90a(0x103)+(_0x5c69e1[_0x4fb90a(0xe6)]?_0x4fb90a(0x133):_0x4fb90a(0x116))+'\x0a',_0x10e521+=_0x4fb90a(0x119)+_0x5c69e1[_0x4fb90a(0xf6)]+'\x0a',_0x10e521+='ğŸ“‹\x20Admins:\x20`'+_0x5c69e1['admins'][_0x4fb90a(0xcb)](',\x20')+'`\x0a',_0x10e521+=_0x4fb90a(0xcf)+_0x5c69e1[_0x4fb90a(0x150)]+'`\x0a',_0x10e521+=_0x4fb90a(0x11f)+_0x5c69e1[_0x4fb90a(0xf4)]+'\x0a',_0x10e521+=_0x4fb90a(0x132)+_0x5c69e1[_0x4fb90a(0xc3)]+'\x0a',_0x10e521+=_0x4fb90a(0xf3)+Math[_0x4fb90a(0xfe)](_0x5c69e1[_0x4fb90a(0x14c)])+'s',await this[_0x4fb90a(0xe8)]?.['sendMessage'](_0xd3e931,_0x10e521,{'parse_mode':_0x4fb90a(0x13d)});}catch(_0x3a7834){console['error'](_0x4fb90a(0x11b),_0x3a7834),await this[_0x4fb90a(0xe8)]?.['sendMessage'](_0xd3e931,_0x4fb90a(0x10d));}}),this[_0x2b0647(0xe8)][_0x2b0647(0xe0)](/\/statistics/,async _0x11effb=>{const _0x481028=_0x2b0647,_0xe0e650=_0x11effb[_0x481028(0xb2)]['id'],_0x464af1=_0x11effb[_0x481028(0xf9)]?.['id'][_0x481028(0xfc)]();if(!_0x464af1)return;if(!this[_0x481028(0x126)](_0x464af1)){await this['bot']?.[_0x481028(0xbc)](_0xe0e650,_0x481028(0x12a));return;}const _0x13d39e={'inline_keyboard':[[{'text':_0x481028(0x114),'callback_data':_0x481028(0xb9)}],[{'text':_0x481028(0xa6),'callback_data':_0x481028(0x14b)}],[{'text':_0x481028(0xb7),'callback_data':_0x481028(0x99)}],[{'text':_0x481028(0xba),'callback_data':_0x481028(0x10e)}],[{'text':_0x481028(0xcd),'callback_data':'stats_all_time'}]]};await this[_0x481028(0xe8)]?.[_0x481028(0xbc)](_0xe0e650,'ğŸ“Š\x20*Statistics*\x0a\x0aSelect\x20period:',{'parse_mode':_0x481028(0x13d),'reply_markup':_0x13d39e});}),this[_0x2b0647(0xe8)]['on'](_0x2b0647(0xec),async _0x2f8c27=>{const _0x267979=_0x2b0647,_0x4e70fa=_0x2f8c27[_0x267979(0xc9)]?.[_0x267979(0xb2)]['id'],_0x2c9604=_0x2f8c27['from']?.['id']['toString'](),_0x2bb24e=_0x2f8c27[_0x267979(0xac)];if(!_0x4e70fa||!_0x2c9604||!_0x2bb24e)return;if(!this[_0x267979(0x126)](_0x2c9604)){await this[_0x267979(0xe8)]?.[_0x267979(0xc7)](_0x2f8c27['id'],{'text':_0x267979(0x12a)});return;}if(_0x2bb24e===_0x267979(0x9a)){const _0x32921d={'inline_keyboard':[[{'text':'ğŸ“…\x20Today','callback_data':'stats_today'}],[{'text':'ğŸ“…\x20Yesterday','callback_data':'stats_yesterday'}],[{'text':'ğŸ“…\x20This\x20Month','callback_data':'stats_this_month'}],[{'text':_0x267979(0xba),'callback_data':_0x267979(0x10e)}],[{'text':_0x267979(0xcd),'callback_data':'stats_all_time'}],[{'text':_0x267979(0x10f),'callback_data':_0x267979(0x117)}]]};await this[_0x267979(0xe8)]?.['editMessageText'](_0x267979(0x128),{'chat_id':_0x4e70fa,'message_id':_0x2f8c27[_0x267979(0xc9)]?.[_0x267979(0x130)],'parse_mode':_0x267979(0x13d),'reply_markup':_0x32921d}),await this['bot']?.[_0x267979(0xc7)](_0x2f8c27['id']);}else{if(_0x2bb24e===_0x267979(0xb1))try{const _0x414636={'botActive':!!this['bot'],'adminCount':this[_0x267979(0xc6)][_0x267979(0x139)][_0x267979(0x142)],'admins':this['config'][_0x267979(0x139)],'yourId':_0x2c9604,'timestamp':new Date()[_0x267979(0x11c)](),'nodeVersion':process[_0x267979(0x13b)],'uptime':process['uptime']()};let _0x966ced=_0x267979(0xee);_0x966ced+='ğŸ¤–\x20Bot\x20Status:\x20'+(_0x414636[_0x267979(0xe6)]?'âœ…\x20Active':_0x267979(0x116))+'\x0a',_0x966ced+=_0x267979(0x119)+_0x414636['adminCount']+'\x0a',_0x966ced+=_0x267979(0xe1)+_0x414636[_0x267979(0x12d)][_0x267979(0xcb)](',\x20')+'`\x0a',_0x966ced+=_0x267979(0xcf)+_0x414636['yourId']+'`\x0a',_0x966ced+=_0x267979(0x11f)+_0x414636[_0x267979(0xf4)]+'\x0a',_0x966ced+=_0x267979(0x132)+_0x414636['nodeVersion']+'\x0a',_0x966ced+=_0x267979(0xf3)+Math['floor'](_0x414636[_0x267979(0x14c)])+'s';const _0x1a632b={'inline_keyboard':[[{'text':_0x267979(0xa0),'callback_data':_0x267979(0x117)}]]};await this[_0x267979(0xe8)]?.[_0x267979(0x9b)](_0x966ced,{'chat_id':_0x4e70fa,'message_id':_0x2f8c27[_0x267979(0xc9)]?.[_0x267979(0x130)],'parse_mode':_0x267979(0x13d),'reply_markup':_0x1a632b}),await this['bot']?.[_0x267979(0xc7)](_0x2f8c27['id']);}catch(_0x5b961c){console['error']('Error\x20handling\x20debug\x20command:',_0x5b961c),await this[_0x267979(0xe8)]?.[_0x267979(0xc7)](_0x2f8c27['id'],{'text':'âŒ\x20Error\x20getting\x20debug\x20information'});}else{if(_0x2bb24e==='cmd_broadcast')this['broadcastSessions'][_0x267979(0xd2)](_0x4e70fa,{'step':_0x267979(0x14a)}),await this[_0x267979(0xe8)]?.[_0x267979(0x9b)](_0x267979(0xaf),{'chat_id':_0x4e70fa,'message_id':_0x2f8c27[_0x267979(0xc9)]?.[_0x267979(0x130)],'parse_mode':_0x267979(0x13d)}),await this[_0x267979(0xe8)]?.[_0x267979(0xc7)](_0x2f8c27['id']);else{if(_0x2bb24e===_0x267979(0xb6))this[_0x267979(0xb3)][_0x267979(0xd4)](_0x4e70fa),await this[_0x267979(0xe8)]?.[_0x267979(0xbc)](_0x4e70fa,_0x267979(0x151)),await this[_0x267979(0xe8)]?.[_0x267979(0xc7)](_0x2f8c27['id']);else{if(_0x2bb24e===_0x267979(0xa7)){const _0x154c36=this[_0x267979(0xb3)]['get'](_0x4e70fa);if(!_0x154c36||!_0x154c36[_0x267979(0x124)]&&!_0x154c36[_0x267979(0x149)]){await this['bot']?.['answerCallbackQuery'](_0x2f8c27['id'],{'text':_0x267979(0x113)});return;}await this['bot']?.['answerCallbackQuery'](_0x2f8c27['id'],{'text':_0x267979(0x12e)}),await this[_0x267979(0x14f)](_0x4e70fa,_0x154c36['text']||'',_0x154c36[_0x267979(0x149)]),this['broadcastSessions'][_0x267979(0xd4)](_0x4e70fa);}else{if(_0x2bb24e[_0x267979(0x13c)]('stats_'))await this[_0x267979(0x13a)](_0x4e70fa,_0x2bb24e,_0x2f8c27[_0x267979(0xc9)]?.[_0x267979(0x130)]),await this[_0x267979(0xe8)]?.[_0x267979(0xc7)](_0x2f8c27['id']);else{if(_0x2bb24e===_0x267979(0x117)){const _0x3ef44c={'inline_keyboard':[[{'text':_0x267979(0x112),'callback_data':_0x267979(0x9a)}],[{'text':_0x267979(0x9f),'callback_data':_0x267979(0x106)}],[{'text':'ğŸ”§\x20Debug','callback_data':_0x267979(0xb1)}]]};await this[_0x267979(0xe8)]?.[_0x267979(0x9b)](_0x267979(0x12c),{'chat_id':_0x4e70fa,'message_id':_0x2f8c27[_0x267979(0xc9)]?.[_0x267979(0x130)],'parse_mode':_0x267979(0x13d),'reply_markup':_0x3ef44c}),await this[_0x267979(0xe8)]?.['answerCallbackQuery'](_0x2f8c27['id']);}else{if(_0x2bb24e===_0x267979(0x12f)){const _0x51481f={'inline_keyboard':[[{'text':_0x267979(0xfa),'callback_data':_0x267979(0xb9)}],[{'text':'ğŸ“†\x20Yesterday','callback_data':_0x267979(0x14b)}],[{'text':_0x267979(0xda),'callback_data':'stats_this_month'}],[{'text':_0x267979(0xb5),'callback_data':_0x267979(0x10e)}],[{'text':_0x267979(0x127),'callback_data':_0x267979(0xea)}],[{'text':_0x267979(0xa0),'callback_data':'back_to_main'}]]};await this[_0x267979(0xe8)]?.[_0x267979(0x9b)](_0x267979(0x128),{'chat_id':_0x4e70fa,'message_id':_0x2f8c27[_0x267979(0xc9)]?.[_0x267979(0x130)],'parse_mode':_0x267979(0x13d),'reply_markup':_0x51481f}),await this[_0x267979(0xe8)]?.[_0x267979(0xc7)](_0x2f8c27['id']);}}}}}}}}}),this[_0x2b0647(0xe8)]['on'](_0x2b0647(0xc9),async _0x802526=>{const _0x382c16=_0x2b0647,_0x3b6fdb=_0x802526[_0x382c16(0xb2)]['id'],_0x55c708=_0x802526[_0x382c16(0xf9)]?.['id'][_0x382c16(0xfc)](),_0x494f17=_0x802526[_0x382c16(0x124)]||_0x802526[_0x382c16(0x100)],_0x4ec3d1=_0x802526[_0x382c16(0xbd)];if(!_0x55c708)return;if(!this[_0x382c16(0x126)](_0x55c708))return;if(_0x494f17&&_0x494f17['startsWith']('/'))return;const _0x23bdee=this[_0x382c16(0xb3)][_0x382c16(0xdc)](_0x3b6fdb);if(!_0x23bdee)return;if(_0x23bdee[_0x382c16(0xdf)]===_0x382c16(0x14a)){if(!_0x494f17&&!_0x4ec3d1)return;_0x23bdee[_0x382c16(0x124)]=_0x494f17||'';_0x4ec3d1&&_0x4ec3d1['length']>0x0&&(_0x23bdee[_0x382c16(0x149)]=_0x4ec3d1[_0x4ec3d1[_0x382c16(0x142)]-0x1][_0x382c16(0x10b)]);_0x23bdee[_0x382c16(0xdf)]=_0x382c16(0x136);const _0xc37613={'inline_keyboard':[[{'text':_0x382c16(0x138),'callback_data':'broadcast_cancel'},{'text':'ğŸ“¤\x20Send','callback_data':_0x382c16(0xa7)}]]};_0x23bdee[_0x382c16(0x149)]?await this[_0x382c16(0xe8)]?.[_0x382c16(0xca)](_0x3b6fdb,_0x23bdee[_0x382c16(0x149)],{'caption':_0x382c16(0xbb)+_0x23bdee[_0x382c16(0x124)]+_0x382c16(0xf0),'parse_mode':_0x382c16(0x13d),'reply_markup':_0xc37613}):await this[_0x382c16(0xe8)]?.[_0x382c16(0xbc)](_0x3b6fdb,'ğŸ“¢\x20*Broadcast\x20Preview*\x0a\x0a'+_0x23bdee[_0x382c16(0x124)]+_0x382c16(0xf0),{'parse_mode':'Markdown','reply_markup':_0xc37613});}}),this[_0x2b0647(0xe8)]['on'](_0x2b0647(0xc4),_0x44b2a5=>{const _0x203b66=_0x2b0647;console['error'](_0x203b66(0xe5),_0x44b2a5);});}async[a52_0x643f78(0x14f)](_0x4725bc,_0x8d69a4,_0x57cf32){const _0x275053=a52_0x643f78;try{const _0x1b251f=require('../config/database')[_0x275053(0xb0)],_0x15f1f2=require(_0x275053(0x13e)),_0x5c0c06=process.env.TELEGRAM_BOT_TOKEN;if(!_0x5c0c06){await this['bot']?.[_0x275053(0xbc)](_0x4725bc,_0x275053(0xe9));return;}const _0x4e616e=new _0x15f1f2(_0x5c0c06),_0x1044fa=await _0x1b251f[_0x275053(0x9d)][_0x275053(0xe2)]({'where':{'shopId':{'not':null},'isVerified':!![]},'select':{'telegramId':!![]}}),_0x55ee3f=_0x1044fa[_0x275053(0x142)];let _0x5c9bf5=0x0,_0x4e25ba=0x0,_0x58fff2=0x0;await this['bot']?.[_0x275053(0xbc)](_0x4725bc,_0x275053(0xe7)+_0x55ee3f+_0x275053(0x135));let _0x2496ae=null;if(_0x57cf32&&this['bot'])try{const _0x19113d=await this[_0x275053(0xe8)]['getFileLink'](_0x57cf32),_0xca1c5f=await fetch(_0x19113d);_0x2496ae=Buffer[_0x275053(0xf9)](await _0xca1c5f[_0x275053(0xa3)]());}catch(_0x4895f2){console[_0x275053(0xc4)](_0x275053(0xaa),_0x4895f2),await this['bot']?.[_0x275053(0xbc)](_0x4725bc,_0x275053(0xa9));return;}for(const _0x4b8e89 of _0x1044fa){try{_0x2496ae?await _0x4e616e[_0x275053(0xca)](_0x4b8e89[_0x275053(0x140)],_0x2496ae,{'caption':_0x8d69a4,'parse_mode':'Markdown'}):await _0x4e616e[_0x275053(0xbc)](_0x4b8e89[_0x275053(0x140)],_0x8d69a4,{'parse_mode':_0x275053(0x13d)}),_0x5c9bf5++,_0x4e25ba++,await new Promise(_0x5a4bd5=>setTimeout(_0x5a4bd5,0x64));}catch(_0x361b66){_0x5c9bf5++,_0x58fff2++,console[_0x275053(0xc4)]('Failed\x20to\x20send\x20to\x20'+_0x4b8e89[_0x275053(0x140)]+':',_0x361b66['message']);}}const _0x483619=_0x275053(0xce)+(_0x275053(0xdd)+_0x55ee3f+'\x0a')+(_0x275053(0xd6)+_0x5c9bf5+'\x0a')+(_0x275053(0x118)+_0x4e25ba+'\x0a')+(_0x275053(0xd5)+_0x58fff2);await this[_0x275053(0xe8)]?.['sendMessage'](_0x4725bc,_0x483619,{'parse_mode':_0x275053(0x13d)});}catch(_0x1193b1){console[_0x275053(0xc4)](_0x275053(0xd7),_0x1193b1),await this['bot']?.[_0x275053(0xbc)](_0x4725bc,_0x275053(0x10c));}}async[a52_0x643f78(0x13a)](_0x5e8283,_0x3c462e,_0x1b4b5e){const _0x341289=a52_0x643f78;try{const _0x375fb3=require('../config/database')[_0x341289(0xb0)],_0x1fe2f9=new Date();let _0x2d1c0f,_0x18c38a,_0x299221;switch(_0x3c462e){case _0x341289(0xb9):{const _0x2cdf81=new Date(Date['UTC'](_0x1fe2f9[_0x341289(0xa2)](),_0x1fe2f9[_0x341289(0x14d)](),_0x1fe2f9[_0x341289(0x104)]()));_0x2d1c0f=_0x2cdf81,_0x18c38a=new Date(Date['UTC'](_0x1fe2f9[_0x341289(0xa2)](),_0x1fe2f9[_0x341289(0x14d)](),_0x1fe2f9['getUTCDate'](),0x17,0x3b,0x3b,0x3e7)),_0x299221=_0x2cdf81['getUTCDate']()[_0x341289(0xfc)]()['padStart'](0x2,'0')+'.'+(_0x2cdf81[_0x341289(0x14d)]()+0x1)[_0x341289(0xfc)]()[_0x341289(0xef)](0x2,'0')+'.'+_0x2cdf81[_0x341289(0xa2)]();break;}case _0x341289(0x14b):{const _0x2f728d=new Date(Date[_0x341289(0xdb)](_0x1fe2f9[_0x341289(0xa2)](),_0x1fe2f9[_0x341289(0x14d)](),_0x1fe2f9['getUTCDate']()-0x1));_0x2d1c0f=_0x2f728d,_0x18c38a=new Date(Date[_0x341289(0xdb)](_0x1fe2f9[_0x341289(0xa2)](),_0x1fe2f9['getUTCMonth'](),_0x1fe2f9[_0x341289(0x104)]()-0x1,0x17,0x3b,0x3b,0x3e7)),_0x299221=_0x2f728d['getUTCDate']()[_0x341289(0xfc)]()[_0x341289(0xef)](0x2,'0')+'.'+(_0x2f728d[_0x341289(0x14d)]()+0x1)[_0x341289(0xfc)]()[_0x341289(0xef)](0x2,'0')+'.'+_0x2f728d[_0x341289(0xa2)]();break;}case _0x341289(0x99):{const _0x4cdf5a=new Date(Date[_0x341289(0xdb)](_0x1fe2f9['getUTCFullYear'](),_0x1fe2f9[_0x341289(0x14d)](),0x1));_0x2d1c0f=_0x4cdf5a,_0x18c38a=new Date(Date['UTC'](_0x1fe2f9[_0x341289(0xa2)](),_0x1fe2f9['getUTCMonth']()+0x1,0x0,0x17,0x3b,0x3b,0x3e7));const _0x4c7a72=new Date(Date['UTC'](_0x1fe2f9['getUTCFullYear'](),_0x1fe2f9[_0x341289(0x14d)]()+0x1,0x0));_0x299221=_0x4cdf5a['getUTCDate']()['toString']()[_0x341289(0xef)](0x2,'0')+'.'+(_0x4cdf5a[_0x341289(0x14d)]()+0x1)[_0x341289(0xfc)]()['padStart'](0x2,'0')+'.'+_0x4cdf5a['getUTCFullYear']()+_0x341289(0x12b)+_0x4c7a72['getUTCDate']()[_0x341289(0xfc)]()[_0x341289(0xef)](0x2,'0')+'.'+(_0x4c7a72[_0x341289(0x14d)]()+0x1)['toString']()[_0x341289(0xef)](0x2,'0')+'.'+_0x4c7a72[_0x341289(0xa2)]();break;}case _0x341289(0x10e):{const _0x5801b5=new Date(Date['UTC'](_0x1fe2f9['getUTCFullYear'](),_0x1fe2f9[_0x341289(0x14d)]()-0x1,0x1));_0x2d1c0f=_0x5801b5,_0x18c38a=new Date(Date[_0x341289(0xdb)](_0x1fe2f9[_0x341289(0xa2)](),_0x1fe2f9[_0x341289(0x14d)](),0x0,0x17,0x3b,0x3b,0x3e7));const _0x2d14b4=new Date(Date[_0x341289(0xdb)](_0x1fe2f9[_0x341289(0xa2)](),_0x1fe2f9[_0x341289(0x14d)](),0x0));_0x299221=_0x5801b5[_0x341289(0x104)]()[_0x341289(0xfc)]()[_0x341289(0xef)](0x2,'0')+'.'+(_0x5801b5[_0x341289(0x14d)]()+0x1)[_0x341289(0xfc)]()[_0x341289(0xef)](0x2,'0')+'.'+_0x5801b5[_0x341289(0xa2)]()+_0x341289(0x12b)+_0x2d14b4['getUTCDate']()[_0x341289(0xfc)]()['padStart'](0x2,'0')+'.'+(_0x2d14b4[_0x341289(0x14d)]()+0x1)[_0x341289(0xfc)]()[_0x341289(0xef)](0x2,'0')+'.'+_0x2d14b4[_0x341289(0xa2)]();break;}case _0x341289(0xea):{_0x2d1c0f=new Date(0x0),_0x18c38a=_0x1fe2f9,_0x299221=_0x341289(0x123);break;}default:return;}const _0x1099ba=await _0x375fb3['payment'][_0x341289(0xe2)]({'where':{'createdAt':{'gte':_0x2d1c0f,'lte':_0x18c38a}},'select':{'status':!![],'amountUSDT':!![],'amountAfterGatewayCommissionUSDT':!![]}});let _0x45160d=0x0,_0x39d2d8=0x0,_0x1c58e1=0x0,_0x112d1f=0x0,_0x33d25d=0x0,_0xcc41d2=0x0;_0x1099ba[_0x341289(0x107)](_0x310811=>{const _0x3aedbc=_0x341289,_0x5fd0eb=_0x310811['amountUSDT']||0x0,_0x3383ec=_0x310811[_0x3aedbc(0xbf)]||0x0;if(_0x310811[_0x3aedbc(0x147)]===_0x3aedbc(0x111))_0x45160d+=_0x5fd0eb,_0x39d2d8+=_0x5fd0eb-_0x3383ec,_0x1c58e1++;else{if(_0x310811['status']===_0x3aedbc(0x101)||_0x310811['status']===_0x3aedbc(0xf2))_0x112d1f++;else{if(_0x310811['status']===_0x3aedbc(0xd0))_0x33d25d++,_0x45160d+=_0x5fd0eb;else _0x310811[_0x3aedbc(0x147)]===_0x3aedbc(0x9e)&&(_0xcc41d2++,_0x45160d+=_0x5fd0eb);}}});const _0x202848=_0x1c58e1+_0x112d1f,_0x406841=_0x202848>0x0?(_0x1c58e1/_0x202848*0x64)[_0x341289(0xc2)](0x1):_0x341289(0xc0),_0x10528a=_0x299221[_0x341289(0x152)](/\./g,'\x5c.')[_0x341289(0x152)](/\-/g,'\x5c-'),_0x5e47f1=_0x45160d[_0x341289(0xc2)](0x2)['replace'](/\./g,'\x5c.'),_0x80f530=_0x39d2d8[_0x341289(0xc2)](0x2)[_0x341289(0x152)](/\./g,'\x5c.'),_0x32b143=_0x406841['replace'](/\./g,'\x5c.'),_0x2f7c59=_0x341289(0x115)+_0x10528a+_0x341289(0x120)+(_0x341289(0x109)+_0x5e47f1+'\x20USDT\x0a')+(_0x341289(0x9c)+_0x80f530+_0x341289(0xad))+('âœ…\x20Successful\x20Payments\x20\x5c-\x20'+_0x1c58e1+'\x0a')+('âŒ\x20Failed\x20Payments\x20\x5c-\x20'+_0x112d1f+'\x0a')+(_0x341289(0xfd)+_0x32b143+'%\x0a')+(_0x341289(0xa8)+_0x33d25d+'\x0a')+(_0x341289(0xed)+_0xcc41d2),_0x25a54f={'inline_keyboard':[[{'text':_0x341289(0xa0),'callback_data':_0x341289(0x12f)}]]};_0x1b4b5e?await this['bot']?.[_0x341289(0x9b)](_0x2f7c59,{'chat_id':_0x5e8283,'message_id':_0x1b4b5e,'parse_mode':_0x341289(0xff),'reply_markup':_0x25a54f}):await this['bot']?.['sendMessage'](_0x5e8283,_0x2f7c59,{'parse_mode':_0x341289(0xff),'reply_markup':_0x25a54f});}catch(_0x5dac9e){console['error'](_0x341289(0x145),_0x5dac9e),await this['bot']?.[_0x341289(0xbc)](_0x5e8283,_0x341289(0x129));}}[a52_0x643f78(0x110)](_0x29d52d){const _0x560952=a52_0x643f78;this[_0x560952(0xc6)][_0x560952(0x139)]=_0x29d52d['filter'](_0x22b4c2=>_0x22b4c2&&_0x22b4c2['trim']()),this['saveConfig'](),console['log'](_0x560952(0x143),this[_0x560952(0xc6)]['adminIds']);}[a52_0x643f78(0xc8)](){const _0x566f8d=a52_0x643f78;return[...this[_0x566f8d(0xc6)]['adminIds']];}[a52_0x643f78(0xc5)](){const _0xc06a43=a52_0x643f78;return{'isActive':!!this[_0xc06a43(0xe8)],'adminCount':this[_0xc06a43(0xc6)]['adminIds']['length']};}['stopBot'](){const _0x2da77b=a52_0x643f78;this[_0x2da77b(0xe8)]&&(this[_0x2da77b(0xe8)]['stopPolling'](),this[_0x2da77b(0xe8)]=null,console[_0x2da77b(0x10a)](_0x2da77b(0x102)));}}function a52_0x5187(){const _0x8b4d35=['sendPhoto','join','loadConfig','ğŸ“…\x20All\x20Time','âœ…\x20*Broadcast\x20Complete*\x0a\x0a','ğŸ†”\x20Your\x20ID:\x20`','CHARGEBACK','includes','set','adminBotConfig.json','delete','âŒ\x20Not\x20Delivered:\x20','ğŸ“¤\x20Sent:\x20','Error\x20sending\x20broadcast:','96468FsECJr','1722750CcoTkw','ğŸ“†\x20This\x20Month','UTC','get','ğŸ‘¥\x20Total\x20Merchants:\x20','existsSync','step','onText','ğŸ“‹\x20Admins:\x20`','findMany','utf-8','â›”ï¸\x20Access\x20Denied\x0a\x0a','Admin\x20Telegram\x20bot\x20error:','botActive','ğŸ“¤\x20Sending\x20broadcast\x20to\x20','bot','âŒ\x20Merchant\x20bot\x20token\x20not\x20configured','stats_all_time','841345ehpNmk','callback_query','ğŸ”„\x20Refunds\x20\x5c-\x20','ğŸ”\x20*Debug\x20Information*\x0a\x0a','padStart','\x0a\x0a_Ready\x20to\x20send?_','defineProperty','EXPIRED','â±\x20Uptime:\x20','timestamp','235990XOmwSL','adminCount','readFileSync','Contact\x20system\x20administrator.','from','ï¿½\x20Today','cwd','toString','ğŸ“ˆ\x20Conversion\x20\x5c-\x20','floor','MarkdownV2','caption','FAILED','ğŸ›‘\x20Admin\x20Telegram\x20bot\x20stopped','ğŸ¤–\x20Bot\x20Status:\x20','getUTCDate','6746856spZvjR','cmd_broadcast','forEach','parse','ğŸ’°\x20Turnover\x20\x5c-\x20','log','file_id','âŒ\x20Error\x20sending\x20broadcast','âŒ\x20Error\x20getting\x20debug\x20information','stats_last_month','ğŸ”™\x20Back','updateAdminIds','PAID','ğŸ“ˆ\x20Statistics','âŒ\x20No\x20message\x20to\x20send','ğŸ“…\x20Today','ğŸ“Š\x20*Statistics:\x20','âŒ\x20Inactive','back_to_main','âœ…\x20Delivered:\x20','ğŸ‘¥\x20Admin\x20Count:\x20','AdminBotService','Error\x20handling\x20/debug\x20command:','toISOString','1147072YZloLQ','49VmrOVY','â°\x20Timestamp:\x20','*\x0a\x0a','You\x20are\x20not\x20authorized\x20to\x20use\x20this\x20bot.\x0a','261rScUff','All\x20Time','text','Error\x20loading\x20admin\x20bot\x20config:','isAdmin','ğŸ“†\x20All\x20Time','ğŸ“Š\x20*Statistics*\x0a\x0aSelect\x20period:','âŒ\x20Error\x20getting\x20statistics','â›”ï¸\x20Access\x20Denied','\x20-\x20','ğŸ”\x20*TRAPAY\x20Admin\x20Bot*\x0a\x0aâœ…\x20You\x20are\x20authorized\x20as\x20admin.','admins','ğŸ“¤\x20Sending\x20broadcast...','back_to_stats_menu','message_id','botToken','ğŸ“¦\x20Node:\x20','âœ…\x20Active','335938fMWiXB','\x20merchants...','preview','dirname','âŒ\x20Cancel','adminIds','handleStatistics','version','startsWith','Markdown','node-telegram-bot-api','__importDefault','telegramId','adminBotService','length','âœ…\x20Admin\x20IDs\x20updated:','11AMaVpb','Error\x20getting\x20statistics:','saveConfig','status','initializeBot','photoFileId','awaiting_text','stats_yesterday','uptime','getUTCMonth','mkdirSync','handleBroadcast','yourId','âŒ\x20Broadcast\x20cancelled','replace','stats_this_month','cmd_statistics','editMessageText','ğŸ’µ\x20Earned\x20\x5c-\x20','telegramUser','REFUND','ğŸ’¬\x20Create\x20Broadcast','â¬…ï¸\x20Back','TELEGRAM_ADMIN_BOT_TOKEN\x20not\x20found\x20in\x20environment\x20variables','getUTCFullYear','arrayBuffer','stringify','__esModule','ğŸ“…\x20Yesterday','broadcast_send','âš ï¸\x20Chargebacks\x20\x5c-\x20','âŒ\x20Failed\x20to\x20download\x20photo','Failed\x20to\x20download\x20photo:','setupBotHandlers','data','\x20USDT\x0a','ğŸ”§\x20Debug','ğŸ“¢\x20*Create\x20Broadcast*\x0a\x0aPlease\x20enter\x20the\x20message\x20text\x20you\x20want\x20to\x20send\x20to\x20all\x20merchants:','default','cmd_debug','chat','broadcastSessions','185FwwItT','ğŸ“†\x20Last\x20Month','broadcast_cancel','ğŸ“…\x20This\x20Month','âœ…\x20Admin\x20Telegram\x20bot\x20initialized\x20successfully','stats_today','ğŸ“…\x20Last\x20Month','ğŸ“¢\x20*Broadcast\x20Preview*\x0a\x0a','sendMessage','photo','Error\x20saving\x20admin\x20bot\x20config:','amountAfterGatewayCommissionUSDT','0.0','15UmTIvb','toFixed','nodeVersion','error','getBotInfo','config','answerCallbackQuery','getAdminIds','message'];a52_0x5187=function(){return _0x8b4d35;};return a52_0x5187();}exports[a52_0x643f78(0x11a)]=AdminBotService,exports['adminBotService']=new AdminBotService();