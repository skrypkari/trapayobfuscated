'use strict';const a52_0x10e44c=a52_0x1388;(function(_0x5ee99c,_0x22dd03){const _0x4117c8=a52_0x1388,_0x118585=_0x5ee99c();while(!![]){try{const _0xe6cfff=parseInt(_0x4117c8(0x104))/0x1+-parseInt(_0x4117c8(0x176))/0x2+parseInt(_0x4117c8(0x120))/0x3+parseInt(_0x4117c8(0x11a))/0x4+-parseInt(_0x4117c8(0x170))/0x5*(parseInt(_0x4117c8(0xfc))/0x6)+parseInt(_0x4117c8(0x171))/0x7+-parseInt(_0x4117c8(0x11f))/0x8;if(_0xe6cfff===_0x22dd03)break;else _0x118585['push'](_0x118585['shift']());}catch(_0x1efef5){_0x118585['push'](_0x118585['shift']());}}}(a52_0x506f,0x480f9));function a52_0x1388(_0x1f1cac,_0x2902b4){_0x1f1cac=_0x1f1cac-0xd6;const _0x506fd3=a52_0x506f();let _0x138826=_0x506fd3[_0x1f1cac];return _0x138826;}var __importDefault=this&&this[a52_0x10e44c(0xe4)]||function(_0x580d78){const _0x278d61=a52_0x10e44c;return _0x580d78&&_0x580d78[_0x278d61(0x106)]?_0x580d78:{'default':_0x580d78};};Object[a52_0x10e44c(0x124)](exports,a52_0x10e44c(0x106),{'value':!![]}),exports[a52_0x10e44c(0x133)]=exports[a52_0x10e44c(0x16b)]=void 0x0;const node_telegram_bot_api_1=__importDefault(require(a52_0x10e44c(0x15f))),fs_1=__importDefault(require('fs')),path_1=__importDefault(require(a52_0x10e44c(0x116))),CONFIG_PATH=path_1[a52_0x10e44c(0x129)][a52_0x10e44c(0x142)](process['cwd'](),'data','adminBotConfig.json');class AdminBotService{constructor(){const _0x4f139d=a52_0x10e44c;this[_0x4f139d(0x100)]=null,this[_0x4f139d(0xed)]=new Map(),this[_0x4f139d(0xe1)]=process.env.TELEGRAM_ADMIN_BOT_TOKEN||'',this[_0x4f139d(0x135)]=this[_0x4f139d(0x179)](),this[_0x4f139d(0xe1)]?this['initializeBot']():console[_0x4f139d(0x167)](_0x4f139d(0xdc));}[a52_0x10e44c(0x179)](){const _0x5ec4eb=a52_0x10e44c;try{if(fs_1[_0x5ec4eb(0x129)][_0x5ec4eb(0xf9)](CONFIG_PATH)){const _0xd8c4f5=fs_1[_0x5ec4eb(0x129)][_0x5ec4eb(0xf0)](CONFIG_PATH,_0x5ec4eb(0x16c));return JSON[_0x5ec4eb(0x181)](_0xd8c4f5);}}catch(_0x40a944){console[_0x5ec4eb(0x118)](_0x5ec4eb(0x178),_0x40a944);}return{'adminIds':[]};}['saveConfig'](){const _0x1212c0=a52_0x10e44c;try{const _0x3e2094=path_1['default'][_0x1212c0(0x108)](CONFIG_PATH);!fs_1[_0x1212c0(0x129)]['existsSync'](_0x3e2094)&&fs_1[_0x1212c0(0x129)][_0x1212c0(0xfe)](_0x3e2094,{'recursive':!![]}),fs_1['default'][_0x1212c0(0x128)](CONFIG_PATH,JSON[_0x1212c0(0x162)](this[_0x1212c0(0x135)],null,0x2));}catch(_0xc78253){console[_0x1212c0(0x118)](_0x1212c0(0x143),_0xc78253);}}['isAdmin'](_0x138eed){const _0x590863=a52_0x10e44c;return this[_0x590863(0x135)][_0x590863(0x16f)][_0x590863(0x159)](_0x138eed);}[a52_0x10e44c(0x125)](){const _0x14d062=a52_0x10e44c;try{this[_0x14d062(0x100)]=new node_telegram_bot_api_1[(_0x14d062(0x129))](this[_0x14d062(0xe1)],{'polling':!![]}),this[_0x14d062(0x149)](),console['log']('âœ…\x20Admin\x20Telegram\x20bot\x20initialized\x20successfully');}catch(_0x2f0180){console[_0x14d062(0x118)](_0x14d062(0x132),_0x2f0180);}}[a52_0x10e44c(0x149)](){const _0x531bca=a52_0x10e44c;if(!this[_0x531bca(0x100)])return;this[_0x531bca(0x100)][_0x531bca(0xd7)](/\/start/,async _0x199c16=>{const _0x1c799c=_0x531bca,_0x11d69b=_0x199c16['chat']['id'],_0x234c86=_0x199c16[_0x1c799c(0xe5)]?.['id'][_0x1c799c(0x16d)]();if(!_0x234c86)return;if(this['isAdmin'](_0x234c86)){const _0x226c13={'inline_keyboard':[[{'text':_0x1c799c(0x137),'callback_data':_0x1c799c(0xec)}],[{'text':'ğŸ’¬\x20Create\x20Broadcast','callback_data':'cmd_broadcast'}],[{'text':_0x1c799c(0x134),'callback_data':_0x1c799c(0x12b)}]]};await this[_0x1c799c(0x100)]?.[_0x1c799c(0x165)](_0x11d69b,'ğŸ”\x20*TRAPAY\x20Admin\x20Bot*\x0a\x0aâœ…\x20You\x20are\x20authorized\x20as\x20admin.',{'parse_mode':'Markdown','reply_markup':_0x226c13});}else await this[_0x1c799c(0x100)]?.[_0x1c799c(0x165)](_0x11d69b,_0x1c799c(0x112)+_0x1c799c(0xdd)+'Contact\x20system\x20administrator.',{'parse_mode':_0x1c799c(0xd8)});}),this['bot'][_0x531bca(0xd7)](/\/debug/,async _0x2b33f6=>{const _0x4a8767=_0x531bca,_0x46fc2b=_0x2b33f6[_0x4a8767(0x151)]['id'],_0x148227=_0x2b33f6[_0x4a8767(0xe5)]?.['id'][_0x4a8767(0x16d)]();if(!_0x148227)return;if(!this[_0x4a8767(0x138)](_0x148227)){await this[_0x4a8767(0x100)]?.['sendMessage'](_0x46fc2b,_0x4a8767(0x15d));return;}try{const _0x33a00c={'botActive':!!this[_0x4a8767(0x100)],'adminCount':this[_0x4a8767(0x135)][_0x4a8767(0x16f)][_0x4a8767(0x163)],'admins':this[_0x4a8767(0x135)][_0x4a8767(0x16f)],'yourId':_0x148227,'timestamp':new Date()[_0x4a8767(0xf2)](),'nodeVersion':process['version'],'uptime':process['uptime']()};let _0x327084=_0x4a8767(0x12e);_0x327084+='ğŸ¤–\x20Bot\x20Status:\x20'+(_0x33a00c[_0x4a8767(0xf8)]?'âœ…\x20Active':_0x4a8767(0x10f))+'\x0a',_0x327084+=_0x4a8767(0x169)+_0x33a00c['adminCount']+'\x0a',_0x327084+='ğŸ“‹\x20Admins:\x20`'+_0x33a00c[_0x4a8767(0x11c)][_0x4a8767(0x142)](',\x20')+'`\x0a',_0x327084+=_0x4a8767(0x17a)+_0x33a00c[_0x4a8767(0xf6)]+'`\x0a',_0x327084+='â°\x20Timestamp:\x20'+_0x33a00c[_0x4a8767(0x147)]+'\x0a',_0x327084+=_0x4a8767(0xfa)+_0x33a00c['nodeVersion']+'\x0a',_0x327084+=_0x4a8767(0x166)+Math[_0x4a8767(0xf4)](_0x33a00c[_0x4a8767(0x110)])+'s',await this['bot']?.[_0x4a8767(0x165)](_0x46fc2b,_0x327084,{'parse_mode':_0x4a8767(0xd8)});}catch(_0x961525){console[_0x4a8767(0x118)](_0x4a8767(0x17f),_0x961525),await this[_0x4a8767(0x100)]?.['sendMessage'](_0x46fc2b,'âŒ\x20Error\x20getting\x20debug\x20information');}}),this['bot']['onText'](/\/statistics/,async _0x1750dd=>{const _0x13fddf=_0x531bca,_0x3713ab=_0x1750dd[_0x13fddf(0x151)]['id'],_0x4e5b72=_0x1750dd['from']?.['id'][_0x13fddf(0x16d)]();if(!_0x4e5b72)return;if(!this[_0x13fddf(0x138)](_0x4e5b72)){await this[_0x13fddf(0x100)]?.[_0x13fddf(0x165)](_0x3713ab,_0x13fddf(0x15d));return;}const _0x3045e5={'inline_keyboard':[[{'text':_0x13fddf(0x117),'callback_data':_0x13fddf(0x14e)}],[{'text':_0x13fddf(0xe3),'callback_data':_0x13fddf(0x131)}],[{'text':_0x13fddf(0x101),'callback_data':_0x13fddf(0xea)}],[{'text':'ğŸ“…\x20Last\x20Month','callback_data':_0x13fddf(0xe6)}],[{'text':'ğŸ“…\x20All\x20Time','callback_data':'stats_all_time'}]]};await this[_0x13fddf(0x100)]?.[_0x13fddf(0x165)](_0x3713ab,_0x13fddf(0xee),{'parse_mode':_0x13fddf(0xd8),'reply_markup':_0x3045e5});}),this[_0x531bca(0x100)]['on'](_0x531bca(0xe9),async _0x53b8d2=>{const _0x2b974c=_0x531bca,_0x45b812=_0x53b8d2['message']?.[_0x2b974c(0x151)]['id'],_0x123647=_0x53b8d2[_0x2b974c(0xe5)]?.['id'][_0x2b974c(0x16d)](),_0x22df71=_0x53b8d2[_0x2b974c(0xdf)];if(!_0x45b812||!_0x123647||!_0x22df71)return;if(!this['isAdmin'](_0x123647)){await this[_0x2b974c(0x100)]?.['answerCallbackQuery'](_0x53b8d2['id'],{'text':_0x2b974c(0x15d)});return;}if(_0x22df71===_0x2b974c(0xec)){const _0x1c145f={'inline_keyboard':[[{'text':_0x2b974c(0x117),'callback_data':_0x2b974c(0x14e)}],[{'text':_0x2b974c(0xe3),'callback_data':'stats_yesterday'}],[{'text':_0x2b974c(0x101),'callback_data':_0x2b974c(0xea)}],[{'text':_0x2b974c(0x13c),'callback_data':_0x2b974c(0xe6)}],[{'text':'ğŸ“…\x20All\x20Time','callback_data':_0x2b974c(0xeb)}],[{'text':'ğŸ”™\x20Back','callback_data':_0x2b974c(0x174)}]]};await this[_0x2b974c(0x100)]?.['editMessageText'](_0x2b974c(0xee),{'chat_id':_0x45b812,'message_id':_0x53b8d2['message']?.[_0x2b974c(0x148)],'parse_mode':_0x2b974c(0xd8),'reply_markup':_0x1c145f}),await this[_0x2b974c(0x100)]?.['answerCallbackQuery'](_0x53b8d2['id']);}else{if(_0x22df71===_0x2b974c(0x12b))try{const _0x3d906d={'botActive':!!this[_0x2b974c(0x100)],'adminCount':this[_0x2b974c(0x135)][_0x2b974c(0x16f)][_0x2b974c(0x163)],'admins':this['config'][_0x2b974c(0x16f)],'yourId':_0x123647,'timestamp':new Date()[_0x2b974c(0xf2)](),'nodeVersion':process[_0x2b974c(0x102)],'uptime':process[_0x2b974c(0x110)]()};let _0x4dadc2=_0x2b974c(0x12e);_0x4dadc2+='ğŸ¤–\x20Bot\x20Status:\x20'+(_0x3d906d[_0x2b974c(0xf8)]?_0x2b974c(0x16e):_0x2b974c(0x10f))+'\x0a',_0x4dadc2+=_0x2b974c(0x169)+_0x3d906d[_0x2b974c(0x17e)]+'\x0a',_0x4dadc2+='ğŸ“‹\x20Admins:\x20`'+_0x3d906d[_0x2b974c(0x11c)][_0x2b974c(0x142)](',\x20')+'`\x0a',_0x4dadc2+=_0x2b974c(0x17a)+_0x3d906d['yourId']+'`\x0a',_0x4dadc2+=_0x2b974c(0x157)+_0x3d906d[_0x2b974c(0x147)]+'\x0a',_0x4dadc2+=_0x2b974c(0xfa)+_0x3d906d['nodeVersion']+'\x0a',_0x4dadc2+=_0x2b974c(0x166)+Math[_0x2b974c(0xf4)](_0x3d906d[_0x2b974c(0x110)])+'s';const _0x16aec9={'inline_keyboard':[[{'text':'â¬…ï¸\x20Back','callback_data':_0x2b974c(0x174)}]]};await this[_0x2b974c(0x100)]?.[_0x2b974c(0x175)](_0x4dadc2,{'chat_id':_0x45b812,'message_id':_0x53b8d2['message']?.[_0x2b974c(0x148)],'parse_mode':_0x2b974c(0xd8),'reply_markup':_0x16aec9}),await this[_0x2b974c(0x100)]?.[_0x2b974c(0x155)](_0x53b8d2['id']);}catch(_0x3ce166){console[_0x2b974c(0x118)](_0x2b974c(0x12f),_0x3ce166),await this[_0x2b974c(0x100)]?.['answerCallbackQuery'](_0x53b8d2['id'],{'text':'âŒ\x20Error\x20getting\x20debug\x20information'});}else{if(_0x22df71===_0x2b974c(0xde))this[_0x2b974c(0xed)][_0x2b974c(0xef)](_0x45b812,{'step':_0x2b974c(0x15e)}),await this[_0x2b974c(0x100)]?.[_0x2b974c(0x175)]('ğŸ“¢\x20*Create\x20Broadcast*\x0a\x0aPlease\x20enter\x20the\x20message\x20text\x20you\x20want\x20to\x20send\x20to\x20all\x20merchants:',{'chat_id':_0x45b812,'message_id':_0x53b8d2[_0x2b974c(0x173)]?.['message_id'],'parse_mode':_0x2b974c(0xd8)}),await this['bot']?.[_0x2b974c(0x155)](_0x53b8d2['id']);else{if(_0x22df71==='broadcast_cancel')this[_0x2b974c(0xed)][_0x2b974c(0x121)](_0x45b812),await this[_0x2b974c(0x100)]?.[_0x2b974c(0x165)](_0x45b812,_0x2b974c(0x160)),await this['bot']?.[_0x2b974c(0x155)](_0x53b8d2['id']);else{if(_0x22df71==='broadcast_send'){const _0x16aa76=this['broadcastSessions'][_0x2b974c(0x14c)](_0x45b812);if(!_0x16aa76||!_0x16aa76[_0x2b974c(0x123)]&&!_0x16aa76[_0x2b974c(0x146)]){await this['bot']?.[_0x2b974c(0x155)](_0x53b8d2['id'],{'text':_0x2b974c(0x161)});return;}await this['bot']?.['answerCallbackQuery'](_0x53b8d2['id'],{'text':_0x2b974c(0x14d)}),await this[_0x2b974c(0x15c)](_0x45b812,_0x16aa76[_0x2b974c(0x123)]||'',_0x16aa76['photoFileId']),this['broadcastSessions'][_0x2b974c(0x121)](_0x45b812);}else{if(_0x22df71[_0x2b974c(0x141)](_0x2b974c(0x111)))await this[_0x2b974c(0x13d)](_0x45b812,_0x22df71,_0x53b8d2[_0x2b974c(0x173)]?.['message_id']),await this[_0x2b974c(0x100)]?.['answerCallbackQuery'](_0x53b8d2['id']);else{if(_0x22df71===_0x2b974c(0x174)){const _0x228adf={'inline_keyboard':[[{'text':_0x2b974c(0x137),'callback_data':'cmd_statistics'}],[{'text':_0x2b974c(0x183),'callback_data':_0x2b974c(0xde)}],[{'text':'ğŸ”§\x20Debug','callback_data':_0x2b974c(0x12b)}]]};await this[_0x2b974c(0x100)]?.[_0x2b974c(0x175)](_0x2b974c(0x12d),{'chat_id':_0x45b812,'message_id':_0x53b8d2[_0x2b974c(0x173)]?.[_0x2b974c(0x148)],'parse_mode':'Markdown','reply_markup':_0x228adf}),await this[_0x2b974c(0x100)]?.[_0x2b974c(0x155)](_0x53b8d2['id']);}else{if(_0x22df71==='back_to_stats_menu'){const _0x5f1320={'inline_keyboard':[[{'text':_0x2b974c(0x14f),'callback_data':_0x2b974c(0x14e)}],[{'text':_0x2b974c(0x10e),'callback_data':_0x2b974c(0x131)}],[{'text':_0x2b974c(0xd6),'callback_data':_0x2b974c(0xea)}],[{'text':'ğŸ“†\x20Last\x20Month','callback_data':'stats_last_month'}],[{'text':_0x2b974c(0x11b),'callback_data':'stats_all_time'}],[{'text':'â¬…ï¸\x20Back','callback_data':_0x2b974c(0x174)}]]};await this[_0x2b974c(0x100)]?.[_0x2b974c(0x175)]('ğŸ“Š\x20*Statistics*\x0a\x0aSelect\x20period:',{'chat_id':_0x45b812,'message_id':_0x53b8d2[_0x2b974c(0x173)]?.[_0x2b974c(0x148)],'parse_mode':_0x2b974c(0xd8),'reply_markup':_0x5f1320}),await this['bot']?.[_0x2b974c(0x155)](_0x53b8d2['id']);}}}}}}}}}),this[_0x531bca(0x100)]['on'](_0x531bca(0x173),async _0x21f942=>{const _0x596496=_0x531bca,_0x58e349=_0x21f942['chat']['id'],_0x231c8f=_0x21f942[_0x596496(0xe5)]?.['id'][_0x596496(0x16d)](),_0x57071a=_0x21f942[_0x596496(0x123)]||_0x21f942[_0x596496(0x177)],_0x422140=_0x21f942['photo'];if(!_0x231c8f)return;if(!this['isAdmin'](_0x231c8f))return;if(_0x57071a&&_0x57071a['startsWith']('/'))return;const _0x1c5009=this[_0x596496(0xed)]['get'](_0x58e349);if(!_0x1c5009)return;if(_0x1c5009[_0x596496(0x127)]===_0x596496(0x15e)){if(!_0x57071a&&!_0x422140)return;_0x1c5009[_0x596496(0x123)]=_0x57071a||'';_0x422140&&_0x422140[_0x596496(0x163)]>0x0&&(_0x1c5009[_0x596496(0x146)]=_0x422140[_0x422140[_0x596496(0x163)]-0x1][_0x596496(0x16a)]);_0x1c5009[_0x596496(0x127)]=_0x596496(0x13b);const _0x5e5ddc={'inline_keyboard':[[{'text':'âŒ\x20Cancel','callback_data':_0x596496(0x17d)},{'text':_0x596496(0xe8),'callback_data':'broadcast_send'}]]};_0x1c5009[_0x596496(0x146)]?await this[_0x596496(0x100)]?.[_0x596496(0x11e)](_0x58e349,_0x1c5009[_0x596496(0x146)],{'caption':_0x596496(0x109)+_0x1c5009[_0x596496(0x123)]+_0x596496(0x184),'parse_mode':_0x596496(0xd8),'reply_markup':_0x5e5ddc}):await this['bot']?.[_0x596496(0x165)](_0x58e349,_0x596496(0x109)+_0x1c5009[_0x596496(0x123)]+_0x596496(0x184),{'parse_mode':_0x596496(0xd8),'reply_markup':_0x5e5ddc});}}),this[_0x531bca(0x100)]['on'](_0x531bca(0x118),_0x17bc64=>{const _0x5175ba=_0x531bca;console[_0x5175ba(0x118)](_0x5175ba(0x113),_0x17bc64);});}async[a52_0x10e44c(0x15c)](_0x5a40cb,_0x4e10c7,_0x167869){const _0x24f853=a52_0x10e44c;try{const _0x18f7a8=require('../config/database')[_0x24f853(0x129)],_0x2c49ec=require('node-telegram-bot-api'),_0x42aca8=process.env.TELEGRAM_BOT_TOKEN;if(!_0x42aca8){await this[_0x24f853(0x100)]?.[_0x24f853(0x165)](_0x5a40cb,'âŒ\x20Merchant\x20bot\x20token\x20not\x20configured');return;}const _0x4c3856=new _0x2c49ec(_0x42aca8),_0x5edd00=await _0x18f7a8[_0x24f853(0x15a)][_0x24f853(0x150)]({'where':{'shopId':{'not':null},'isVerified':!![]},'select':{'telegramId':!![]}}),_0x5b6042=_0x5edd00[_0x24f853(0x163)];let _0x26921c=0x0,_0x5ac68f=0x0,_0x79a710=0x0;await this['bot']?.[_0x24f853(0x165)](_0x5a40cb,_0x24f853(0x152)+_0x5b6042+_0x24f853(0x15b));let _0x1d652d=null;if(_0x167869&&this[_0x24f853(0x100)])try{const _0x459671=await this[_0x24f853(0x100)]['getFileLink'](_0x167869),_0x3b42d9=await fetch(_0x459671);_0x1d652d=Buffer[_0x24f853(0xe5)](await _0x3b42d9[_0x24f853(0x156)]());}catch(_0x58cc70){console[_0x24f853(0x118)]('Failed\x20to\x20download\x20photo:',_0x58cc70),await this[_0x24f853(0x100)]?.[_0x24f853(0x165)](_0x5a40cb,_0x24f853(0xf7));return;}for(const _0x312370 of _0x5edd00){try{_0x1d652d?await _0x4c3856[_0x24f853(0x11e)](_0x312370['telegramId'],_0x1d652d,{'caption':_0x4e10c7,'parse_mode':_0x24f853(0xd8)}):await _0x4c3856[_0x24f853(0x165)](_0x312370[_0x24f853(0xff)],_0x4e10c7,{'parse_mode':'Markdown'}),_0x26921c++,_0x5ac68f++,await new Promise(_0x36d5db=>setTimeout(_0x36d5db,0x64));}catch(_0x43ccae){_0x26921c++,_0x79a710++,console[_0x24f853(0x118)](_0x24f853(0xfb)+_0x312370[_0x24f853(0xff)]+':',_0x43ccae[_0x24f853(0x173)]);}}const _0x52c7dd=_0x24f853(0xdb)+(_0x24f853(0x105)+_0x5b6042+'\x0a')+(_0x24f853(0x182)+_0x26921c+'\x0a')+(_0x24f853(0x10c)+_0x5ac68f+'\x0a')+('âŒ\x20Not\x20Delivered:\x20'+_0x79a710);await this[_0x24f853(0x100)]?.[_0x24f853(0x165)](_0x5a40cb,_0x52c7dd,{'parse_mode':_0x24f853(0xd8)});}catch(_0x362339){console[_0x24f853(0x118)]('Error\x20sending\x20broadcast:',_0x362339),await this[_0x24f853(0x100)]?.[_0x24f853(0x165)](_0x5a40cb,_0x24f853(0x10a));}}async[a52_0x10e44c(0x13d)](_0x460619,_0x29828f,_0x7f16be){const _0xed666d=a52_0x10e44c;try{const _0x563916=require('../config/database')[_0xed666d(0x129)],_0x5bf86f=new Date();let _0x222216,_0x353c57,_0x8d0ca6;switch(_0x29828f){case _0xed666d(0x14e):{const _0x2aa924=new Date(Date['UTC'](_0x5bf86f[_0xed666d(0x17c)](),_0x5bf86f['getUTCMonth'](),_0x5bf86f[_0xed666d(0x13e)]()));_0x222216=_0x2aa924,_0x353c57=new Date(Date['UTC'](_0x5bf86f['getUTCFullYear'](),_0x5bf86f[_0xed666d(0x158)](),_0x5bf86f[_0xed666d(0x13e)](),0x17,0x3b,0x3b,0x3e7)),_0x8d0ca6=_0x2aa924[_0xed666d(0x13e)]()['toString']()[_0xed666d(0x153)](0x2,'0')+'.'+(_0x2aa924[_0xed666d(0x158)]()+0x1)[_0xed666d(0x16d)]()[_0xed666d(0x153)](0x2,'0')+'.'+_0x2aa924[_0xed666d(0x17c)]();break;}case'stats_yesterday':{const _0x146ae1=new Date(Date[_0xed666d(0xf1)](_0x5bf86f[_0xed666d(0x17c)](),_0x5bf86f[_0xed666d(0x158)](),_0x5bf86f[_0xed666d(0x13e)]()-0x1));_0x222216=_0x146ae1,_0x353c57=new Date(Date['UTC'](_0x5bf86f['getUTCFullYear'](),_0x5bf86f[_0xed666d(0x158)](),_0x5bf86f['getUTCDate']()-0x1,0x17,0x3b,0x3b,0x3e7)),_0x8d0ca6=_0x146ae1[_0xed666d(0x13e)]()['toString']()['padStart'](0x2,'0')+'.'+(_0x146ae1[_0xed666d(0x158)]()+0x1)[_0xed666d(0x16d)]()[_0xed666d(0x153)](0x2,'0')+'.'+_0x146ae1['getUTCFullYear']();break;}case _0xed666d(0xea):{const _0x5700f8=new Date(Date[_0xed666d(0xf1)](_0x5bf86f[_0xed666d(0x17c)](),_0x5bf86f['getUTCMonth'](),0x1));_0x222216=_0x5700f8,_0x353c57=new Date(Date[_0xed666d(0xf1)](_0x5bf86f[_0xed666d(0x17c)](),_0x5bf86f[_0xed666d(0x158)]()+0x1,0x0,0x17,0x3b,0x3b,0x3e7));const _0x55d9fe=new Date(Date[_0xed666d(0xf1)](_0x5bf86f['getUTCFullYear'](),_0x5bf86f[_0xed666d(0x158)]()+0x1,0x0));_0x8d0ca6=_0x5700f8['getUTCDate']()[_0xed666d(0x16d)]()[_0xed666d(0x153)](0x2,'0')+'.'+(_0x5700f8[_0xed666d(0x158)]()+0x1)[_0xed666d(0x16d)]()['padStart'](0x2,'0')+'.'+_0x5700f8[_0xed666d(0x17c)]()+_0xed666d(0x130)+_0x55d9fe[_0xed666d(0x13e)]()[_0xed666d(0x16d)]()[_0xed666d(0x153)](0x2,'0')+'.'+(_0x55d9fe[_0xed666d(0x158)]()+0x1)[_0xed666d(0x16d)]()[_0xed666d(0x153)](0x2,'0')+'.'+_0x55d9fe[_0xed666d(0x17c)]();break;}case _0xed666d(0xe6):{const _0x235a30=new Date(Date[_0xed666d(0xf1)](_0x5bf86f[_0xed666d(0x17c)](),_0x5bf86f[_0xed666d(0x158)]()-0x1,0x1));_0x222216=_0x235a30,_0x353c57=new Date(Date['UTC'](_0x5bf86f[_0xed666d(0x17c)](),_0x5bf86f[_0xed666d(0x158)](),0x0,0x17,0x3b,0x3b,0x3e7));const _0x33be0e=new Date(Date[_0xed666d(0xf1)](_0x5bf86f[_0xed666d(0x17c)](),_0x5bf86f[_0xed666d(0x158)](),0x0));_0x8d0ca6=_0x235a30[_0xed666d(0x13e)]()['toString']()[_0xed666d(0x153)](0x2,'0')+'.'+(_0x235a30[_0xed666d(0x158)]()+0x1)[_0xed666d(0x16d)]()[_0xed666d(0x153)](0x2,'0')+'.'+_0x235a30['getUTCFullYear']()+'\x20-\x20'+_0x33be0e[_0xed666d(0x13e)]()['toString']()[_0xed666d(0x153)](0x2,'0')+'.'+(_0x33be0e[_0xed666d(0x158)]()+0x1)['toString']()[_0xed666d(0x153)](0x2,'0')+'.'+_0x33be0e[_0xed666d(0x17c)]();break;}case'stats_all_time':{_0x222216=new Date(0x0),_0x353c57=_0x5bf86f,_0x8d0ca6='All\x20Time';break;}default:return;}const _0x31a1b1=await _0x563916[_0xed666d(0x145)]['findMany']({'where':{'createdAt':{'gte':_0x222216,'lte':_0x353c57}},'select':{'status':!![],'amountUSDT':!![],'amountAfterGatewayCommissionUSDT':!![]}});let _0x2f0732=0x0,_0x3c0fa1=0x0,_0x2807da=0x0,_0x384587=0x0,_0x479ba6=0x0,_0x1edad3=0x0;_0x31a1b1[_0xed666d(0x12a)](_0x462268=>{const _0x3d3938=_0xed666d,_0xd65cf2=_0x462268[_0x3d3938(0x107)]||0x0,_0x4224d1=_0x462268[_0x3d3938(0xe0)]||0x0;if(_0x462268[_0x3d3938(0x139)]===_0x3d3938(0x17b))_0x2f0732+=_0xd65cf2,_0x3c0fa1+=_0xd65cf2-_0x4224d1,_0x2807da++;else{if(_0x462268['status']===_0x3d3938(0x154)||_0x462268['status']===_0x3d3938(0xf5))_0x384587++;else{if(_0x462268[_0x3d3938(0x139)]==='CHARGEBACK')_0x479ba6++,_0x2f0732+=_0xd65cf2;else _0x462268['status']===_0x3d3938(0x126)&&(_0x1edad3++,_0x2f0732+=_0xd65cf2);}}});const _0x16097b=_0x2807da+_0x384587,_0x53b712=_0x16097b>0x0?(_0x2807da/_0x16097b*0x64)[_0xed666d(0xd9)](0x1):_0xed666d(0x12c),_0x335680=_0x8d0ca6['replace'](/\./g,'\x5c.')[_0xed666d(0xda)](/\-/g,'\x5c-'),_0x311f2f=_0x2f0732[_0xed666d(0xd9)](0x2)[_0xed666d(0xda)](/\./g,'\x5c.'),_0xf59812=_0x3c0fa1[_0xed666d(0xd9)](0x2)[_0xed666d(0xda)](/\./g,'\x5c.'),_0x54182c=_0x53b712['replace'](/\./g,'\x5c.'),_0x5c544a=_0xed666d(0x136)+_0x335680+_0xed666d(0x13f)+('ğŸ’°\x20Turnover\x20\x5c-\x20'+_0x311f2f+_0xed666d(0x172))+(_0xed666d(0x14b)+_0xf59812+'\x20USDT\x0a')+(_0xed666d(0x122)+_0x2807da+'\x0a')+(_0xed666d(0x13a)+_0x384587+'\x0a')+('ğŸ“ˆ\x20Conversion\x20\x5c-\x20'+_0x54182c+'%\x0a')+(_0xed666d(0x115)+_0x479ba6+'\x0a')+(_0xed666d(0x11d)+_0x1edad3),_0xbb27b9={'inline_keyboard':[[{'text':_0xed666d(0x140),'callback_data':'back_to_stats_menu'}]]};_0x7f16be?await this['bot']?.[_0xed666d(0x175)](_0x5c544a,{'chat_id':_0x460619,'message_id':_0x7f16be,'parse_mode':_0xed666d(0x180),'reply_markup':_0xbb27b9}):await this[_0xed666d(0x100)]?.[_0xed666d(0x165)](_0x460619,_0x5c544a,{'parse_mode':_0xed666d(0x180),'reply_markup':_0xbb27b9});}catch(_0x40ee97){console[_0xed666d(0x118)](_0xed666d(0x164),_0x40ee97),await this['bot']?.[_0xed666d(0x165)](_0x460619,_0xed666d(0xe7));}}[a52_0x10e44c(0x168)](_0x2f3f13){const _0x406299=a52_0x10e44c;this[_0x406299(0x135)][_0x406299(0x16f)]=_0x2f3f13[_0x406299(0x114)](_0x1414de=>_0x1414de&&_0x1414de[_0x406299(0x144)]()),this[_0x406299(0x10d)](),console[_0x406299(0x10b)](_0x406299(0xf3),this[_0x406299(0x135)][_0x406299(0x16f)]);}[a52_0x10e44c(0xfd)](){const _0x28c2e1=a52_0x10e44c;return[...this[_0x28c2e1(0x135)][_0x28c2e1(0x16f)]];}[a52_0x10e44c(0x119)](){const _0x266929=a52_0x10e44c;return{'isActive':!!this[_0x266929(0x100)],'adminCount':this['config'][_0x266929(0x16f)][_0x266929(0x163)]};}[a52_0x10e44c(0x103)](){const _0x19777b=a52_0x10e44c;this[_0x19777b(0x100)]&&(this[_0x19777b(0x100)][_0x19777b(0x14a)](),this['bot']=null,console[_0x19777b(0x10b)](_0x19777b(0xe2)));}}function a52_0x506f(){const _0x37b48f=['get','ğŸ“¤\x20Sending\x20broadcast...','stats_today','ï¿½\x20Today','findMany','chat','ğŸ“¤\x20Sending\x20broadcast\x20to\x20','padStart','FAILED','answerCallbackQuery','arrayBuffer','â°\x20Timestamp:\x20','getUTCMonth','includes','telegramUser','\x20merchants...','handleBroadcast','â›”ï¸\x20Access\x20Denied','awaiting_text','node-telegram-bot-api','âŒ\x20Broadcast\x20cancelled','âŒ\x20No\x20message\x20to\x20send','stringify','length','Error\x20getting\x20statistics:','sendMessage','â±\x20Uptime:\x20','warn','updateAdminIds','ğŸ‘¥\x20Admin\x20Count:\x20','file_id','AdminBotService','utf-8','toString','âœ…\x20Active','adminIds','641530Vzimuk','3005051XWjFzC','\x20USDT\x0a','message','back_to_main','editMessageText','500118wrwDvz','caption','Error\x20loading\x20admin\x20bot\x20config:','loadConfig','ğŸ†”\x20Your\x20ID:\x20`','PAID','getUTCFullYear','broadcast_cancel','adminCount','Error\x20handling\x20/debug\x20command:','MarkdownV2','parse','ğŸ“¤\x20Sent:\x20','ğŸ’¬\x20Create\x20Broadcast','\x0a\x0a_Ready\x20to\x20send?_','ğŸ“†\x20This\x20Month','onText','Markdown','toFixed','replace','âœ…\x20*Broadcast\x20Complete*\x0a\x0a','TELEGRAM_ADMIN_BOT_TOKEN\x20not\x20found\x20in\x20environment\x20variables','You\x20are\x20not\x20authorized\x20to\x20use\x20this\x20bot.\x0a','cmd_broadcast','data','amountAfterGatewayCommissionUSDT','botToken','ğŸ›‘\x20Admin\x20Telegram\x20bot\x20stopped','ğŸ“…\x20Yesterday','__importDefault','from','stats_last_month','âŒ\x20Error\x20getting\x20statistics','ğŸ“¤\x20Send','callback_query','stats_this_month','stats_all_time','cmd_statistics','broadcastSessions','ğŸ“Š\x20*Statistics*\x0a\x0aSelect\x20period:','set','readFileSync','UTC','toISOString','âœ…\x20Admin\x20IDs\x20updated:','floor','EXPIRED','yourId','âŒ\x20Failed\x20to\x20download\x20photo','botActive','existsSync','ğŸ“¦\x20Node:\x20','Failed\x20to\x20send\x20to\x20','6FUwrhI','getAdminIds','mkdirSync','telegramId','bot','ğŸ“…\x20This\x20Month','version','stopBot','279786sPCnaG','ğŸ‘¥\x20Total\x20Merchants:\x20','__esModule','amountUSDT','dirname','ğŸ“¢\x20*Broadcast\x20Preview*\x0a\x0a','âŒ\x20Error\x20sending\x20broadcast','log','âœ…\x20Delivered:\x20','saveConfig','ğŸ“†\x20Yesterday','âŒ\x20Inactive','uptime','stats_','â›”ï¸\x20Access\x20Denied\x0a\x0a','Admin\x20Telegram\x20bot\x20error:','filter','âš ï¸\x20Chargebacks\x20\x5c-\x20','path','ğŸ“…\x20Today','error','getBotInfo','553936cMwwVt','ğŸ“†\x20All\x20Time','admins','ğŸ”„\x20Refunds\x20\x5c-\x20','sendPhoto','3873080QzZhkg','930294jFpKpc','delete','âœ…\x20Successful\x20Payments\x20\x5c-\x20','text','defineProperty','initializeBot','REFUND','step','writeFileSync','default','forEach','cmd_debug','0.0','ğŸ”\x20*TRAPAY\x20Admin\x20Bot*\x0a\x0aâœ…\x20You\x20are\x20authorized\x20as\x20admin.','ğŸ”\x20*Debug\x20Information*\x0a\x0a','Error\x20handling\x20debug\x20command:','\x20-\x20','stats_yesterday','âŒ\x20Failed\x20to\x20initialize\x20Admin\x20Telegram\x20bot:','adminBotService','ğŸ”§\x20Debug','config','ğŸ“Š\x20*Statistics:\x20','ğŸ“ˆ\x20Statistics','isAdmin','status','âŒ\x20Failed\x20Payments\x20\x5c-\x20','preview','ğŸ“…\x20Last\x20Month','handleStatistics','getUTCDate','*\x0a\x0a','â¬…ï¸\x20Back','startsWith','join','Error\x20saving\x20admin\x20bot\x20config:','trim','payment','photoFileId','timestamp','message_id','setupBotHandlers','stopPolling','ğŸ’µ\x20Earned\x20\x5c-\x20'];a52_0x506f=function(){return _0x37b48f;};return a52_0x506f();}exports[a52_0x10e44c(0x16b)]=AdminBotService,exports['adminBotService']=new AdminBotService();