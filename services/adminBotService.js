'use strict';const a52_0x292892=a52_0x4457;function a52_0x33ff(){const _0x1c6556=['âœ…\x20Successful\x20Payments\x20\x5c-\x20','âœ…\x20Active','back_to_stats_menu','back_to_main','âŒ\x20Error\x20sending\x20broadcast','photo','Error\x20saving\x20admin\x20bot\x20config:','initializeBot','uptime','updateAdminIds','ðŸ“Š\x20*Statistics:\x20','ðŸ“¦\x20Node:\x20','Error\x20loading\x20admin\x20bot\x20config:','âŒ\x20No\x20message\x20to\x20send','âŒ\x20Not\x20Delivered:\x20','stats_yesterday','â±\x20Uptime:\x20','log','ðŸ›‘\x20Admin\x20Telegram\x20bot\x20stopped','__importDefault','ðŸ“†\x20Last\x20Month','23518340LeRoRz','Error\x20getting\x20statistics:','handleBroadcast','ðŸ¤–\x20Bot\x20Status:\x20','botActive','ðŸ“†\x20All\x20Time','sendPhoto','ï¿½\x20Today','ðŸ“…\x20Last\x20Month','warn','â¬…ï¸\x20Back','âŒ\x20Cancel','300BuRdbf','data','get','AdminBotService','CHARGEBACK','ðŸ“…\x20Yesterday','FAILED','getFileLink','replace','getAdminIds','ðŸ“†\x20This\x20Month','padStart','cmd_statistics','nodeVersion','chat','amountAfterGatewayCommissionUSDT','parse','EXPIRED','from','ðŸ”\x20*Debug\x20Information*\x0a\x0a','mkdirSync','findMany','text','ðŸ”„\x20Refunds\x20\x5c-\x20','Contact\x20system\x20administrator.','ðŸ“Š\x20*Statistics*\x0a\x0aSelect\x20period:','caption','broadcast_cancel','toFixed','All\x20Time','ðŸ“…\x20All\x20Time','botToken','filter','timestamp','getBotInfo','MarkdownV2','ðŸ“¢\x20*Create\x20Broadcast*\x0a\x0aPlease\x20enter\x20the\x20message\x20text\x20you\x20want\x20to\x20send\x20to\x20all\x20merchants:','ðŸ“¤\x20Sending\x20broadcast...','amountUSDT','\x20USDT\x0a','You\x20are\x20not\x20authorized\x20to\x20use\x20this\x20bot.\x0a','\x0a\x0a_Ready\x20to\x20send?_','ðŸ†”\x20Your\x20ID:\x20`','ðŸ“…\x20Today','122633gZeqrA','join','Error\x20handling\x20/debug\x20command:','âŒ\x20Error\x20getting\x20debug\x20information','status','defineProperty','â°\x20Timestamp:\x20','step','default','âœ…\x20Delivered:\x20','Admin\x20Telegram\x20bot\x20error:','getUTCDate','stopPolling','toISOString','isAdmin','forEach','ðŸ“¤\x20Sending\x20broadcast\x20to\x20','428rIBavE','1427127bZPTcV','getUTCMonth','adminBotConfig.json','ðŸ”™\x20Back','set','message_id','0.0','loadConfig','adminCount','version','cmd_debug','readFileSync','sendMessage','message','stats_this_month','ðŸ‘¥\x20Admin\x20Count:\x20','toString','yourId','arrayBuffer','telegramId','âŒ\x20Failed\x20to\x20download\x20photo','editMessageText','getUTCFullYear','cmd_broadcast','\x20-\x20','handleStatistics','utf-8','setupBotHandlers','bot','length','node-telegram-bot-api','56493NdDqrE','callback_query','stats_','stopBot','answerCallbackQuery','ðŸ’¬\x20Create\x20Broadcast','trim','stats_last_month','Error\x20handling\x20debug\x20command:','2622290MWNayL','broadcast_send','UTC','âš ï¸\x20Chargebacks\x20\x5c-\x20','adminIds','âœ…\x20Admin\x20Telegram\x20bot\x20initialized\x20successfully','onText','stats_all_time','â›”ï¸\x20Access\x20Denied\x0a\x0a','existsSync','4QyAKsT','âŒ\x20Error\x20getting\x20statistics','floor','PAID','stats_today','Failed\x20to\x20send\x20to\x20','config','âŒ\x20Inactive','ðŸ”§\x20Debug','dirname','saveConfig','adminBotService','3641BLKCCV','broadcastSessions','ðŸ“ˆ\x20Conversion\x20\x5c-\x20','ðŸ“‹\x20Admins:\x20`','error','telegramUser','âŒ\x20Broadcast\x20cancelled','__esModule','includes','photoFileId','ðŸ‘¥\x20Total\x20Merchants:\x20','admins','delete','Markdown','6343488epyRfL','ðŸ“ˆ\x20Statistics','writeFileSync','awaiting_text','ðŸ“…\x20This\x20Month'];a52_0x33ff=function(){return _0x1c6556;};return a52_0x33ff();}(function(_0x5e850f,_0xeedfd4){const _0x2e98bd=a52_0x4457,_0x416bd1=_0x5e850f();while(!![]){try{const _0x375a9d=-parseInt(_0x2e98bd(0x20a))/0x1*(parseInt(_0x2e98bd(0x1cb))/0x2)+-parseInt(_0x2e98bd(0x1cc))/0x3*(parseInt(_0x2e98bd(0x1fe))/0x4)+-parseInt(_0x2e98bd(0x1f4))/0x5+parseInt(_0x2e98bd(0x23e))/0x6*(parseInt(_0x2e98bd(0x26a))/0x7)+-parseInt(_0x2e98bd(0x218))/0x8+-parseInt(_0x2e98bd(0x1eb))/0x9+parseInt(_0x2e98bd(0x232))/0xa;if(_0x375a9d===_0xeedfd4)break;else _0x416bd1['push'](_0x416bd1['shift']());}catch(_0x2fa290){_0x416bd1['push'](_0x416bd1['shift']());}}}(a52_0x33ff,0x9e80e));var __importDefault=this&&this[a52_0x292892(0x230)]||function(_0x1fea3c){const _0x239cc6=a52_0x292892;return _0x1fea3c&&_0x1fea3c[_0x239cc6(0x211)]?_0x1fea3c:{'default':_0x1fea3c};};function a52_0x4457(_0x26710f,_0x4fc18c){_0x26710f=_0x26710f-0x1c4;const _0x33ff92=a52_0x33ff();let _0x4457d2=_0x33ff92[_0x26710f];return _0x4457d2;}Object[a52_0x292892(0x26f)](exports,a52_0x292892(0x211),{'value':!![]}),exports[a52_0x292892(0x209)]=exports[a52_0x292892(0x241)]=void 0x0;const node_telegram_bot_api_1=__importDefault(require(a52_0x292892(0x1ea))),fs_1=__importDefault(require('fs')),path_1=__importDefault(require('path')),CONFIG_PATH=path_1[a52_0x292892(0x272)][a52_0x292892(0x26b)](process['cwd'](),'data',a52_0x292892(0x1ce));class AdminBotService{constructor(){const _0x4d799e=a52_0x292892;this[_0x4d799e(0x1e8)]=null,this[_0x4d799e(0x20b)]=new Map(),this[_0x4d799e(0x25d)]=process.env.TELEGRAM_ADMIN_BOT_TOKEN||'',this[_0x4d799e(0x204)]=this[_0x4d799e(0x1d3)](),this[_0x4d799e(0x25d)]?this[_0x4d799e(0x224)]():console[_0x4d799e(0x23b)]('TELEGRAM_ADMIN_BOT_TOKEN\x20not\x20found\x20in\x20environment\x20variables');}[a52_0x292892(0x1d3)](){const _0x5efb32=a52_0x292892;try{if(fs_1[_0x5efb32(0x272)][_0x5efb32(0x1fd)](CONFIG_PATH)){const _0x483393=fs_1[_0x5efb32(0x272)][_0x5efb32(0x1d7)](CONFIG_PATH,_0x5efb32(0x1e6));return JSON[_0x5efb32(0x24e)](_0x483393);}}catch(_0x39b8fb){console[_0x5efb32(0x20e)](_0x5efb32(0x229),_0x39b8fb);}return{'adminIds':[]};}[a52_0x292892(0x208)](){const _0xa771b=a52_0x292892;try{const _0x200644=path_1['default'][_0xa771b(0x207)](CONFIG_PATH);!fs_1[_0xa771b(0x272)]['existsSync'](_0x200644)&&fs_1[_0xa771b(0x272)][_0xa771b(0x252)](_0x200644,{'recursive':!![]}),fs_1[_0xa771b(0x272)][_0xa771b(0x21a)](CONFIG_PATH,JSON['stringify'](this[_0xa771b(0x204)],null,0x2));}catch(_0x5f4859){console['error'](_0xa771b(0x223),_0x5f4859);}}[a52_0x292892(0x1c8)](_0xcaf04){const _0x4c34e3=a52_0x292892;return this[_0x4c34e3(0x204)][_0x4c34e3(0x1f8)][_0x4c34e3(0x212)](_0xcaf04);}[a52_0x292892(0x224)](){const _0x4efdb6=a52_0x292892;try{this[_0x4efdb6(0x1e8)]=new node_telegram_bot_api_1[(_0x4efdb6(0x272))](this[_0x4efdb6(0x25d)],{'polling':!![]}),this[_0x4efdb6(0x1e7)](),console[_0x4efdb6(0x22e)](_0x4efdb6(0x1f9));}catch(_0x3515af){console[_0x4efdb6(0x20e)]('âŒ\x20Failed\x20to\x20initialize\x20Admin\x20Telegram\x20bot:',_0x3515af);}}[a52_0x292892(0x1e7)](){const _0x4e797f=a52_0x292892;if(!this[_0x4e797f(0x1e8)])return;this['bot']['onText'](/\/start/,async _0x44c157=>{const _0xe3a7b=_0x4e797f,_0x1dbe29=_0x44c157[_0xe3a7b(0x24c)]['id'],_0x379e65=_0x44c157[_0xe3a7b(0x250)]?.['id'][_0xe3a7b(0x1dc)]();if(!_0x379e65)return;if(this[_0xe3a7b(0x1c8)](_0x379e65)){const _0x1a492b={'inline_keyboard':[[{'text':_0xe3a7b(0x219),'callback_data':_0xe3a7b(0x24a)}],[{'text':_0xe3a7b(0x1f0),'callback_data':'cmd_broadcast'}],[{'text':'ðŸ”§\x20Debug','callback_data':_0xe3a7b(0x1d6)}]]};await this[_0xe3a7b(0x1e8)]?.[_0xe3a7b(0x1d8)](_0x1dbe29,'ðŸ”\x20*TRAPAY\x20Admin\x20Bot*\x0a\x0aâœ…\x20You\x20are\x20authorized\x20as\x20admin.',{'parse_mode':_0xe3a7b(0x217),'reply_markup':_0x1a492b});}else await this['bot']?.[_0xe3a7b(0x1d8)](_0x1dbe29,_0xe3a7b(0x1fc)+_0xe3a7b(0x266)+_0xe3a7b(0x256),{'parse_mode':_0xe3a7b(0x217)});}),this[_0x4e797f(0x1e8)][_0x4e797f(0x1fa)](/\/debug/,async _0x32a4c4=>{const _0x16372c=_0x4e797f,_0x45357c=_0x32a4c4[_0x16372c(0x24c)]['id'],_0x4c9b33=_0x32a4c4['from']?.['id'][_0x16372c(0x1dc)]();if(!_0x4c9b33)return;if(!this[_0x16372c(0x1c8)](_0x4c9b33)){await this[_0x16372c(0x1e8)]?.[_0x16372c(0x1d8)](_0x45357c,'â›”ï¸\x20Access\x20Denied');return;}try{const _0x3d46b3={'botActive':!!this[_0x16372c(0x1e8)],'adminCount':this[_0x16372c(0x204)][_0x16372c(0x1f8)][_0x16372c(0x1e9)],'admins':this[_0x16372c(0x204)][_0x16372c(0x1f8)],'yourId':_0x4c9b33,'timestamp':new Date()[_0x16372c(0x1c7)](),'nodeVersion':process[_0x16372c(0x1d5)],'uptime':process[_0x16372c(0x225)]()};let _0x5c2858=_0x16372c(0x251);_0x5c2858+=_0x16372c(0x235)+(_0x3d46b3[_0x16372c(0x236)]?_0x16372c(0x21e):_0x16372c(0x205))+'\x0a',_0x5c2858+=_0x16372c(0x1db)+_0x3d46b3['adminCount']+'\x0a',_0x5c2858+=_0x16372c(0x20d)+_0x3d46b3[_0x16372c(0x215)][_0x16372c(0x26b)](',\x20')+'`\x0a',_0x5c2858+=_0x16372c(0x268)+_0x3d46b3['yourId']+'`\x0a',_0x5c2858+=_0x16372c(0x270)+_0x3d46b3[_0x16372c(0x25f)]+'\x0a',_0x5c2858+=_0x16372c(0x228)+_0x3d46b3[_0x16372c(0x24b)]+'\x0a',_0x5c2858+=_0x16372c(0x22d)+Math[_0x16372c(0x200)](_0x3d46b3[_0x16372c(0x225)])+'s',await this['bot']?.[_0x16372c(0x1d8)](_0x45357c,_0x5c2858,{'parse_mode':_0x16372c(0x217)});}catch(_0x5ae851){console[_0x16372c(0x20e)](_0x16372c(0x26c),_0x5ae851),await this[_0x16372c(0x1e8)]?.[_0x16372c(0x1d8)](_0x45357c,_0x16372c(0x26d));}}),this['bot'][_0x4e797f(0x1fa)](/\/statistics/,async _0x4bce08=>{const _0x310393=_0x4e797f,_0x2c99c4=_0x4bce08[_0x310393(0x24c)]['id'],_0x56683e=_0x4bce08['from']?.['id']['toString']();if(!_0x56683e)return;if(!this[_0x310393(0x1c8)](_0x56683e)){await this[_0x310393(0x1e8)]?.[_0x310393(0x1d8)](_0x2c99c4,'â›”ï¸\x20Access\x20Denied');return;}const _0x29a417={'inline_keyboard':[[{'text':_0x310393(0x269),'callback_data':'stats_today'}],[{'text':'ðŸ“…\x20Yesterday','callback_data':_0x310393(0x22c)}],[{'text':_0x310393(0x21c),'callback_data':_0x310393(0x1da)}],[{'text':'ðŸ“…\x20Last\x20Month','callback_data':'stats_last_month'}],[{'text':_0x310393(0x25c),'callback_data':_0x310393(0x1fb)}]]};await this['bot']?.[_0x310393(0x1d8)](_0x2c99c4,_0x310393(0x257),{'parse_mode':_0x310393(0x217),'reply_markup':_0x29a417});}),this['bot']['on'](_0x4e797f(0x1ec),async _0x320c0e=>{const _0x3a109d=_0x4e797f,_0x50da36=_0x320c0e[_0x3a109d(0x1d9)]?.[_0x3a109d(0x24c)]['id'],_0x589f69=_0x320c0e[_0x3a109d(0x250)]?.['id'][_0x3a109d(0x1dc)](),_0x54ac67=_0x320c0e[_0x3a109d(0x23f)];if(!_0x50da36||!_0x589f69||!_0x54ac67)return;if(!this['isAdmin'](_0x589f69)){await this[_0x3a109d(0x1e8)]?.['answerCallbackQuery'](_0x320c0e['id'],{'text':'â›”ï¸\x20Access\x20Denied'});return;}if(_0x54ac67==='cmd_statistics'){const _0x500ca0={'inline_keyboard':[[{'text':_0x3a109d(0x269),'callback_data':_0x3a109d(0x202)}],[{'text':_0x3a109d(0x243),'callback_data':_0x3a109d(0x22c)}],[{'text':'ðŸ“…\x20This\x20Month','callback_data':'stats_this_month'}],[{'text':_0x3a109d(0x23a),'callback_data':_0x3a109d(0x1f2)}],[{'text':_0x3a109d(0x25c),'callback_data':_0x3a109d(0x1fb)}],[{'text':_0x3a109d(0x1cf),'callback_data':_0x3a109d(0x220)}]]};await this[_0x3a109d(0x1e8)]?.[_0x3a109d(0x1e1)]('ðŸ“Š\x20*Statistics*\x0a\x0aSelect\x20period:',{'chat_id':_0x50da36,'message_id':_0x320c0e[_0x3a109d(0x1d9)]?.[_0x3a109d(0x1d1)],'parse_mode':_0x3a109d(0x217),'reply_markup':_0x500ca0}),await this[_0x3a109d(0x1e8)]?.[_0x3a109d(0x1ef)](_0x320c0e['id']);}else{if(_0x54ac67===_0x3a109d(0x1d6))try{const _0x3918b7={'botActive':!!this['bot'],'adminCount':this[_0x3a109d(0x204)][_0x3a109d(0x1f8)][_0x3a109d(0x1e9)],'admins':this[_0x3a109d(0x204)]['adminIds'],'yourId':_0x589f69,'timestamp':new Date()['toISOString'](),'nodeVersion':process[_0x3a109d(0x1d5)],'uptime':process[_0x3a109d(0x225)]()};let _0x599cd4=_0x3a109d(0x251);_0x599cd4+=_0x3a109d(0x235)+(_0x3918b7[_0x3a109d(0x236)]?'âœ…\x20Active':_0x3a109d(0x205))+'\x0a',_0x599cd4+=_0x3a109d(0x1db)+_0x3918b7[_0x3a109d(0x1d4)]+'\x0a',_0x599cd4+=_0x3a109d(0x20d)+_0x3918b7[_0x3a109d(0x215)]['join'](',\x20')+'`\x0a',_0x599cd4+=_0x3a109d(0x268)+_0x3918b7[_0x3a109d(0x1dd)]+'`\x0a',_0x599cd4+='â°\x20Timestamp:\x20'+_0x3918b7[_0x3a109d(0x25f)]+'\x0a',_0x599cd4+=_0x3a109d(0x228)+_0x3918b7[_0x3a109d(0x24b)]+'\x0a',_0x599cd4+='â±\x20Uptime:\x20'+Math[_0x3a109d(0x200)](_0x3918b7[_0x3a109d(0x225)])+'s';const _0x3c61b4={'inline_keyboard':[[{'text':_0x3a109d(0x23c),'callback_data':_0x3a109d(0x220)}]]};await this['bot']?.[_0x3a109d(0x1e1)](_0x599cd4,{'chat_id':_0x50da36,'message_id':_0x320c0e[_0x3a109d(0x1d9)]?.[_0x3a109d(0x1d1)],'parse_mode':_0x3a109d(0x217),'reply_markup':_0x3c61b4}),await this['bot']?.[_0x3a109d(0x1ef)](_0x320c0e['id']);}catch(_0x39d7ac){console[_0x3a109d(0x20e)](_0x3a109d(0x1f3),_0x39d7ac),await this[_0x3a109d(0x1e8)]?.[_0x3a109d(0x1ef)](_0x320c0e['id'],{'text':'âŒ\x20Error\x20getting\x20debug\x20information'});}else{if(_0x54ac67==='cmd_broadcast')this[_0x3a109d(0x20b)][_0x3a109d(0x1d0)](_0x50da36,{'step':_0x3a109d(0x21b)}),await this[_0x3a109d(0x1e8)]?.[_0x3a109d(0x1e1)](_0x3a109d(0x262),{'chat_id':_0x50da36,'message_id':_0x320c0e['message']?.[_0x3a109d(0x1d1)],'parse_mode':'Markdown'}),await this[_0x3a109d(0x1e8)]?.[_0x3a109d(0x1ef)](_0x320c0e['id']);else{if(_0x54ac67==='broadcast_cancel')this[_0x3a109d(0x20b)]['delete'](_0x50da36),await this[_0x3a109d(0x1e8)]?.[_0x3a109d(0x1d8)](_0x50da36,_0x3a109d(0x210)),await this[_0x3a109d(0x1e8)]?.[_0x3a109d(0x1ef)](_0x320c0e['id']);else{if(_0x54ac67===_0x3a109d(0x1f5)){const _0x386d8e=this['broadcastSessions']['get'](_0x50da36);if(!_0x386d8e||!_0x386d8e[_0x3a109d(0x254)]&&!_0x386d8e[_0x3a109d(0x213)]){await this[_0x3a109d(0x1e8)]?.[_0x3a109d(0x1ef)](_0x320c0e['id'],{'text':_0x3a109d(0x22a)});return;}await this[_0x3a109d(0x1e8)]?.['answerCallbackQuery'](_0x320c0e['id'],{'text':_0x3a109d(0x263)}),await this[_0x3a109d(0x234)](_0x50da36,_0x386d8e[_0x3a109d(0x254)]||'',_0x386d8e['photoFileId']),this[_0x3a109d(0x20b)][_0x3a109d(0x216)](_0x50da36);}else{if(_0x54ac67['startsWith'](_0x3a109d(0x1ed)))await this[_0x3a109d(0x1e5)](_0x50da36,_0x54ac67,_0x320c0e[_0x3a109d(0x1d9)]?.['message_id']),await this[_0x3a109d(0x1e8)]?.[_0x3a109d(0x1ef)](_0x320c0e['id']);else{if(_0x54ac67===_0x3a109d(0x220)){const _0x37eb06={'inline_keyboard':[[{'text':_0x3a109d(0x219),'callback_data':'cmd_statistics'}],[{'text':_0x3a109d(0x1f0),'callback_data':_0x3a109d(0x1e3)}],[{'text':_0x3a109d(0x206),'callback_data':_0x3a109d(0x1d6)}]]};await this['bot']?.[_0x3a109d(0x1e1)]('ðŸ”\x20*TRAPAY\x20Admin\x20Bot*\x0a\x0aâœ…\x20You\x20are\x20authorized\x20as\x20admin.',{'chat_id':_0x50da36,'message_id':_0x320c0e[_0x3a109d(0x1d9)]?.[_0x3a109d(0x1d1)],'parse_mode':_0x3a109d(0x217),'reply_markup':_0x37eb06}),await this['bot']?.[_0x3a109d(0x1ef)](_0x320c0e['id']);}else{if(_0x54ac67===_0x3a109d(0x21f)){const _0x4177e1={'inline_keyboard':[[{'text':_0x3a109d(0x239),'callback_data':_0x3a109d(0x202)}],[{'text':'ðŸ“†\x20Yesterday','callback_data':_0x3a109d(0x22c)}],[{'text':_0x3a109d(0x248),'callback_data':_0x3a109d(0x1da)}],[{'text':_0x3a109d(0x231),'callback_data':_0x3a109d(0x1f2)}],[{'text':_0x3a109d(0x237),'callback_data':_0x3a109d(0x1fb)}],[{'text':_0x3a109d(0x23c),'callback_data':_0x3a109d(0x220)}]]};await this[_0x3a109d(0x1e8)]?.['editMessageText'](_0x3a109d(0x257),{'chat_id':_0x50da36,'message_id':_0x320c0e['message']?.[_0x3a109d(0x1d1)],'parse_mode':_0x3a109d(0x217),'reply_markup':_0x4177e1}),await this[_0x3a109d(0x1e8)]?.[_0x3a109d(0x1ef)](_0x320c0e['id']);}}}}}}}}}),this[_0x4e797f(0x1e8)]['on'](_0x4e797f(0x1d9),async _0x3f7b60=>{const _0x207e4c=_0x4e797f,_0x493f5b=_0x3f7b60[_0x207e4c(0x24c)]['id'],_0x5e3318=_0x3f7b60['from']?.['id'][_0x207e4c(0x1dc)](),_0x56a4c0=_0x3f7b60[_0x207e4c(0x254)]||_0x3f7b60[_0x207e4c(0x258)],_0x1dd5b0=_0x3f7b60[_0x207e4c(0x222)];if(!_0x5e3318)return;if(!this[_0x207e4c(0x1c8)](_0x5e3318))return;if(_0x56a4c0&&_0x56a4c0['startsWith']('/'))return;const _0x2ffb3c=this[_0x207e4c(0x20b)][_0x207e4c(0x240)](_0x493f5b);if(!_0x2ffb3c)return;if(_0x2ffb3c[_0x207e4c(0x271)]===_0x207e4c(0x21b)){if(!_0x56a4c0&&!_0x1dd5b0)return;_0x2ffb3c[_0x207e4c(0x254)]=_0x56a4c0||'';_0x1dd5b0&&_0x1dd5b0[_0x207e4c(0x1e9)]>0x0&&(_0x2ffb3c['photoFileId']=_0x1dd5b0[_0x1dd5b0[_0x207e4c(0x1e9)]-0x1]['file_id']);_0x2ffb3c[_0x207e4c(0x271)]='preview';const _0x220ce5={'inline_keyboard':[[{'text':_0x207e4c(0x23d),'callback_data':_0x207e4c(0x259)},{'text':'ðŸ“¤\x20Send','callback_data':_0x207e4c(0x1f5)}]]};_0x2ffb3c[_0x207e4c(0x213)]?await this['bot']?.[_0x207e4c(0x238)](_0x493f5b,_0x2ffb3c['photoFileId'],{'caption':'ðŸ“¢\x20*Broadcast\x20Preview*\x0a\x0a'+_0x2ffb3c[_0x207e4c(0x254)]+'\x0a\x0a_Ready\x20to\x20send?_','parse_mode':_0x207e4c(0x217),'reply_markup':_0x220ce5}):await this[_0x207e4c(0x1e8)]?.['sendMessage'](_0x493f5b,'ðŸ“¢\x20*Broadcast\x20Preview*\x0a\x0a'+_0x2ffb3c[_0x207e4c(0x254)]+_0x207e4c(0x267),{'parse_mode':'Markdown','reply_markup':_0x220ce5});}}),this[_0x4e797f(0x1e8)]['on'](_0x4e797f(0x20e),_0x392b47=>{const _0x3f70f8=_0x4e797f;console[_0x3f70f8(0x20e)](_0x3f70f8(0x1c4),_0x392b47);});}async[a52_0x292892(0x234)](_0x46084f,_0x4cfeef,_0x450cdd){const _0x5a9b8d=a52_0x292892;try{const _0x5e7acf=require('../config/database')[_0x5a9b8d(0x272)],_0xe3d525=require('node-telegram-bot-api'),_0x45e09=process.env.TELEGRAM_BOT_TOKEN;if(!_0x45e09){await this[_0x5a9b8d(0x1e8)]?.[_0x5a9b8d(0x1d8)](_0x46084f,'âŒ\x20Merchant\x20bot\x20token\x20not\x20configured');return;}const _0xa79d58=new _0xe3d525(_0x45e09),_0x5e50cc=await _0x5e7acf[_0x5a9b8d(0x20f)][_0x5a9b8d(0x253)]({'where':{'shopId':{'not':null},'isVerified':!![]},'select':{'telegramId':!![]}}),_0x3ba133=_0x5e50cc[_0x5a9b8d(0x1e9)];let _0x2375c9=0x0,_0x3159fb=0x0,_0x4214a4=0x0;await this[_0x5a9b8d(0x1e8)]?.[_0x5a9b8d(0x1d8)](_0x46084f,_0x5a9b8d(0x1ca)+_0x3ba133+'\x20merchants...');let _0x1de84e=null;if(_0x450cdd&&this[_0x5a9b8d(0x1e8)])try{const _0xb67c0f=await this[_0x5a9b8d(0x1e8)][_0x5a9b8d(0x245)](_0x450cdd),_0x36fff8=await fetch(_0xb67c0f);_0x1de84e=Buffer[_0x5a9b8d(0x250)](await _0x36fff8[_0x5a9b8d(0x1de)]());}catch(_0x5e6173){console[_0x5a9b8d(0x20e)]('Failed\x20to\x20download\x20photo:',_0x5e6173),await this['bot']?.[_0x5a9b8d(0x1d8)](_0x46084f,_0x5a9b8d(0x1e0));return;}for(const _0x33d3ea of _0x5e50cc){try{_0x1de84e?await _0xa79d58[_0x5a9b8d(0x238)](_0x33d3ea[_0x5a9b8d(0x1df)],_0x1de84e,{'caption':_0x4cfeef,'parse_mode':_0x5a9b8d(0x217)}):await _0xa79d58[_0x5a9b8d(0x1d8)](_0x33d3ea['telegramId'],_0x4cfeef,{'parse_mode':_0x5a9b8d(0x217)}),_0x2375c9++,_0x3159fb++,await new Promise(_0x10b8c3=>setTimeout(_0x10b8c3,0x64));}catch(_0x1962e6){_0x2375c9++,_0x4214a4++,console[_0x5a9b8d(0x20e)](_0x5a9b8d(0x203)+_0x33d3ea[_0x5a9b8d(0x1df)]+':',_0x1962e6[_0x5a9b8d(0x1d9)]);}}const _0x4e660a='âœ…\x20*Broadcast\x20Complete*\x0a\x0a'+(_0x5a9b8d(0x214)+_0x3ba133+'\x0a')+('ðŸ“¤\x20Sent:\x20'+_0x2375c9+'\x0a')+(_0x5a9b8d(0x273)+_0x3159fb+'\x0a')+(_0x5a9b8d(0x22b)+_0x4214a4);await this['bot']?.[_0x5a9b8d(0x1d8)](_0x46084f,_0x4e660a,{'parse_mode':'Markdown'});}catch(_0x29abdf){console[_0x5a9b8d(0x20e)]('Error\x20sending\x20broadcast:',_0x29abdf),await this[_0x5a9b8d(0x1e8)]?.[_0x5a9b8d(0x1d8)](_0x46084f,_0x5a9b8d(0x221));}}async['handleStatistics'](_0x6debbc,_0x221155,_0x253010){const _0x36d0ae=a52_0x292892;try{const _0x3a238e=require('../config/database')[_0x36d0ae(0x272)],_0x57eb8b=new Date();let _0x4a9b8c,_0x4fcf2d,_0x3ef013;switch(_0x221155){case _0x36d0ae(0x202):{const _0x332b1f=new Date(Date[_0x36d0ae(0x1f6)](_0x57eb8b['getUTCFullYear'](),_0x57eb8b['getUTCMonth'](),_0x57eb8b[_0x36d0ae(0x1c5)]()));_0x4a9b8c=_0x332b1f,_0x4fcf2d=new Date(Date['UTC'](_0x57eb8b[_0x36d0ae(0x1e2)](),_0x57eb8b['getUTCMonth'](),_0x57eb8b[_0x36d0ae(0x1c5)](),0x17,0x3b,0x3b,0x3e7)),_0x3ef013=_0x332b1f[_0x36d0ae(0x1c5)]()[_0x36d0ae(0x1dc)]()[_0x36d0ae(0x249)](0x2,'0')+'.'+(_0x332b1f[_0x36d0ae(0x1cd)]()+0x1)[_0x36d0ae(0x1dc)]()['padStart'](0x2,'0')+'.'+_0x332b1f[_0x36d0ae(0x1e2)]();break;}case _0x36d0ae(0x22c):{const _0x39bf42=new Date(Date[_0x36d0ae(0x1f6)](_0x57eb8b[_0x36d0ae(0x1e2)](),_0x57eb8b[_0x36d0ae(0x1cd)](),_0x57eb8b[_0x36d0ae(0x1c5)]()-0x1));_0x4a9b8c=_0x39bf42,_0x4fcf2d=new Date(Date[_0x36d0ae(0x1f6)](_0x57eb8b[_0x36d0ae(0x1e2)](),_0x57eb8b[_0x36d0ae(0x1cd)](),_0x57eb8b['getUTCDate']()-0x1,0x17,0x3b,0x3b,0x3e7)),_0x3ef013=_0x39bf42[_0x36d0ae(0x1c5)]()[_0x36d0ae(0x1dc)]()[_0x36d0ae(0x249)](0x2,'0')+'.'+(_0x39bf42[_0x36d0ae(0x1cd)]()+0x1)[_0x36d0ae(0x1dc)]()[_0x36d0ae(0x249)](0x2,'0')+'.'+_0x39bf42[_0x36d0ae(0x1e2)]();break;}case _0x36d0ae(0x1da):{const _0x4c95f=new Date(Date[_0x36d0ae(0x1f6)](_0x57eb8b[_0x36d0ae(0x1e2)](),_0x57eb8b[_0x36d0ae(0x1cd)](),0x1));_0x4a9b8c=_0x4c95f,_0x4fcf2d=new Date(Date[_0x36d0ae(0x1f6)](_0x57eb8b['getUTCFullYear'](),_0x57eb8b['getUTCMonth']()+0x1,0x0,0x17,0x3b,0x3b,0x3e7));const _0x2ebe67=new Date(Date[_0x36d0ae(0x1f6)](_0x57eb8b[_0x36d0ae(0x1e2)](),_0x57eb8b[_0x36d0ae(0x1cd)]()+0x1,0x0));_0x3ef013=_0x4c95f[_0x36d0ae(0x1c5)]()[_0x36d0ae(0x1dc)]()[_0x36d0ae(0x249)](0x2,'0')+'.'+(_0x4c95f['getUTCMonth']()+0x1)[_0x36d0ae(0x1dc)]()['padStart'](0x2,'0')+'.'+_0x4c95f[_0x36d0ae(0x1e2)]()+'\x20-\x20'+_0x2ebe67[_0x36d0ae(0x1c5)]()[_0x36d0ae(0x1dc)]()['padStart'](0x2,'0')+'.'+(_0x2ebe67[_0x36d0ae(0x1cd)]()+0x1)['toString']()['padStart'](0x2,'0')+'.'+_0x2ebe67[_0x36d0ae(0x1e2)]();break;}case _0x36d0ae(0x1f2):{const _0x33d995=new Date(Date['UTC'](_0x57eb8b['getUTCFullYear'](),_0x57eb8b[_0x36d0ae(0x1cd)]()-0x1,0x1));_0x4a9b8c=_0x33d995,_0x4fcf2d=new Date(Date[_0x36d0ae(0x1f6)](_0x57eb8b[_0x36d0ae(0x1e2)](),_0x57eb8b['getUTCMonth'](),0x0,0x17,0x3b,0x3b,0x3e7));const _0x2dd165=new Date(Date[_0x36d0ae(0x1f6)](_0x57eb8b[_0x36d0ae(0x1e2)](),_0x57eb8b[_0x36d0ae(0x1cd)](),0x0));_0x3ef013=_0x33d995[_0x36d0ae(0x1c5)]()[_0x36d0ae(0x1dc)]()[_0x36d0ae(0x249)](0x2,'0')+'.'+(_0x33d995[_0x36d0ae(0x1cd)]()+0x1)[_0x36d0ae(0x1dc)]()['padStart'](0x2,'0')+'.'+_0x33d995[_0x36d0ae(0x1e2)]()+_0x36d0ae(0x1e4)+_0x2dd165[_0x36d0ae(0x1c5)]()[_0x36d0ae(0x1dc)]()[_0x36d0ae(0x249)](0x2,'0')+'.'+(_0x2dd165[_0x36d0ae(0x1cd)]()+0x1)[_0x36d0ae(0x1dc)]()[_0x36d0ae(0x249)](0x2,'0')+'.'+_0x2dd165['getUTCFullYear']();break;}case _0x36d0ae(0x1fb):{_0x4a9b8c=new Date(0x0),_0x4fcf2d=_0x57eb8b,_0x3ef013=_0x36d0ae(0x25b);break;}default:return;}const _0x517861=await _0x3a238e['payment'][_0x36d0ae(0x253)]({'where':{'createdAt':{'gte':_0x4a9b8c,'lte':_0x4fcf2d}},'select':{'status':!![],'amountUSDT':!![],'amountAfterGatewayCommissionUSDT':!![]}});let _0x6105e7=0x0,_0x2845b4=0x0,_0x3f4fbb=0x0,_0x4f7d03=0x0,_0x53581b=0x0,_0x498547=0x0;_0x517861[_0x36d0ae(0x1c9)](_0x344803=>{const _0x45db6a=_0x36d0ae,_0x427a4c=_0x344803[_0x45db6a(0x264)]||0x0,_0x138ed0=_0x344803[_0x45db6a(0x24d)]||0x0;if(_0x344803['status']===_0x45db6a(0x201))_0x6105e7+=_0x427a4c,_0x2845b4+=_0x427a4c-_0x138ed0,_0x3f4fbb++;else{if(_0x344803[_0x45db6a(0x26e)]===_0x45db6a(0x244)||_0x344803[_0x45db6a(0x26e)]===_0x45db6a(0x24f))_0x4f7d03++;else{if(_0x344803[_0x45db6a(0x26e)]===_0x45db6a(0x242))_0x53581b++,_0x6105e7+=_0x427a4c;else _0x344803[_0x45db6a(0x26e)]==='REFUND'&&(_0x498547++,_0x6105e7+=_0x427a4c);}}});const _0xe3ae5b=_0x3f4fbb+_0x4f7d03,_0x4cbb41=_0xe3ae5b>0x0?(_0x3f4fbb/_0xe3ae5b*0x64)['toFixed'](0x1):_0x36d0ae(0x1d2),_0x509e41=_0x3ef013[_0x36d0ae(0x246)](/\./g,'\x5c.')[_0x36d0ae(0x246)](/\-/g,'\x5c-'),_0x5985fa=_0x6105e7[_0x36d0ae(0x25a)](0x2)[_0x36d0ae(0x246)](/\./g,'\x5c.'),_0x89ae9f=_0x2845b4[_0x36d0ae(0x25a)](0x2)['replace'](/\./g,'\x5c.'),_0x2e470f=_0x4cbb41[_0x36d0ae(0x246)](/\./g,'\x5c.'),_0x563df7=_0x36d0ae(0x227)+_0x509e41+'*\x0a\x0a'+('ðŸ’°\x20Turnover\x20\x5c-\x20'+_0x5985fa+_0x36d0ae(0x265))+('ðŸ’µ\x20Earned\x20\x5c-\x20'+_0x89ae9f+_0x36d0ae(0x265))+(_0x36d0ae(0x21d)+_0x3f4fbb+'\x0a')+('âŒ\x20Failed\x20Payments\x20\x5c-\x20'+_0x4f7d03+'\x0a')+(_0x36d0ae(0x20c)+_0x2e470f+'%\x0a')+(_0x36d0ae(0x1f7)+_0x53581b+'\x0a')+(_0x36d0ae(0x255)+_0x498547),_0x50f30a={'inline_keyboard':[[{'text':_0x36d0ae(0x23c),'callback_data':_0x36d0ae(0x21f)}]]};_0x253010?await this[_0x36d0ae(0x1e8)]?.[_0x36d0ae(0x1e1)](_0x563df7,{'chat_id':_0x6debbc,'message_id':_0x253010,'parse_mode':'MarkdownV2','reply_markup':_0x50f30a}):await this[_0x36d0ae(0x1e8)]?.['sendMessage'](_0x6debbc,_0x563df7,{'parse_mode':_0x36d0ae(0x261),'reply_markup':_0x50f30a});}catch(_0x166289){console[_0x36d0ae(0x20e)](_0x36d0ae(0x233),_0x166289),await this[_0x36d0ae(0x1e8)]?.[_0x36d0ae(0x1d8)](_0x6debbc,_0x36d0ae(0x1ff));}}[a52_0x292892(0x226)](_0x1f332d){const _0x146f36=a52_0x292892;this['config']['adminIds']=_0x1f332d[_0x146f36(0x25e)](_0x27be43=>_0x27be43&&_0x27be43[_0x146f36(0x1f1)]()),this[_0x146f36(0x208)](),console[_0x146f36(0x22e)]('âœ…\x20Admin\x20IDs\x20updated:',this[_0x146f36(0x204)][_0x146f36(0x1f8)]);}[a52_0x292892(0x247)](){const _0x128629=a52_0x292892;return[...this[_0x128629(0x204)][_0x128629(0x1f8)]];}[a52_0x292892(0x260)](){const _0x289acf=a52_0x292892;return{'isActive':!!this['bot'],'adminCount':this['config'][_0x289acf(0x1f8)][_0x289acf(0x1e9)]};}[a52_0x292892(0x1ee)](){const _0x1363aa=a52_0x292892;this[_0x1363aa(0x1e8)]&&(this[_0x1363aa(0x1e8)][_0x1363aa(0x1c6)](),this[_0x1363aa(0x1e8)]=null,console[_0x1363aa(0x22e)](_0x1363aa(0x22f)));}}exports['AdminBotService']=AdminBotService,exports['adminBotService']=new AdminBotService();