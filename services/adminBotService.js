'use strict';const a52_0x2cfac3=a52_0x5774;(function(_0x51cbab,_0x44e7f2){const _0x21867c=a52_0x5774,_0x1f547c=_0x51cbab();while(!![]){try{const _0x45d796=-parseInt(_0x21867c(0x196))/0x1+parseInt(_0x21867c(0x1ca))/0x2*(parseInt(_0x21867c(0x1a8))/0x3)+-parseInt(_0x21867c(0x1eb))/0x4*(-parseInt(_0x21867c(0x168))/0x5)+parseInt(_0x21867c(0x155))/0x6*(-parseInt(_0x21867c(0x164))/0x7)+parseInt(_0x21867c(0x1dc))/0x8+-parseInt(_0x21867c(0x1c5))/0x9+-parseInt(_0x21867c(0x1de))/0xa*(-parseInt(_0x21867c(0x16f))/0xb);if(_0x45d796===_0x44e7f2)break;else _0x1f547c['push'](_0x1f547c['shift']());}catch(_0x3ce310){_0x1f547c['push'](_0x1f547c['shift']());}}}(a52_0x24ea,0x7c091));var __importDefault=this&&this[a52_0x2cfac3(0x1b4)]||function(_0x5070ca){const _0x4605ac=a52_0x2cfac3;return _0x5070ca&&_0x5070ca[_0x4605ac(0x15b)]?_0x5070ca:{'default':_0x5070ca};};Object[a52_0x2cfac3(0x189)](exports,a52_0x2cfac3(0x15b),{'value':!![]}),exports['adminBotService']=exports['AdminBotService']=void 0x0;const node_telegram_bot_api_1=__importDefault(require(a52_0x2cfac3(0x163))),fs_1=__importDefault(require('fs')),path_1=__importDefault(require(a52_0x2cfac3(0x198))),CONFIG_PATH=path_1[a52_0x2cfac3(0x1ed)]['join'](process[a52_0x2cfac3(0x1c7)](),a52_0x2cfac3(0x18f),a52_0x2cfac3(0x15f));class AdminBotService{constructor(){const _0x21f2f6=a52_0x2cfac3;this[_0x21f2f6(0x1b8)]=null,this[_0x21f2f6(0x194)]=new Map(),this[_0x21f2f6(0x166)]=process.env.TELEGRAM_ADMIN_BOT_TOKEN||'',this[_0x21f2f6(0x159)]=this[_0x21f2f6(0x182)](),this[_0x21f2f6(0x166)]?this[_0x21f2f6(0x1c8)]():console[_0x21f2f6(0x15d)]('TELEGRAM_ADMIN_BOT_TOKEN\x20not\x20found\x20in\x20environment\x20variables');}[a52_0x2cfac3(0x182)](){const _0x32d9d4=a52_0x2cfac3;try{if(fs_1[_0x32d9d4(0x1ed)][_0x32d9d4(0x152)](CONFIG_PATH)){const _0x4eceee=fs_1[_0x32d9d4(0x1ed)]['readFileSync'](CONFIG_PATH,_0x32d9d4(0x14e));return JSON[_0x32d9d4(0x1c3)](_0x4eceee);}}catch(_0x15a5e1){console['error'](_0x32d9d4(0x1e0),_0x15a5e1);}return{'adminIds':[]};}['saveConfig'](){const _0x139536=a52_0x2cfac3;try{const _0x1847b6=path_1[_0x139536(0x1ed)][_0x139536(0x1cb)](CONFIG_PATH);!fs_1[_0x139536(0x1ed)][_0x139536(0x152)](_0x1847b6)&&fs_1[_0x139536(0x1ed)]['mkdirSync'](_0x1847b6,{'recursive':!![]}),fs_1['default'][_0x139536(0x1d9)](CONFIG_PATH,JSON[_0x139536(0x1ec)](this[_0x139536(0x159)],null,0x2));}catch(_0x247d57){console[_0x139536(0x1e3)](_0x139536(0x16e),_0x247d57);}}[a52_0x2cfac3(0x1cf)](_0x6afda9){const _0xd8d0a5=a52_0x2cfac3;return this[_0xd8d0a5(0x159)][_0xd8d0a5(0x1c4)][_0xd8d0a5(0x1db)](_0x6afda9);}[a52_0x2cfac3(0x1c8)](){const _0x410df7=a52_0x2cfac3;try{this[_0x410df7(0x1b8)]=new node_telegram_bot_api_1[(_0x410df7(0x1ed))](this[_0x410df7(0x166)],{'polling':!![]}),this[_0x410df7(0x1d2)](),console[_0x410df7(0x181)](_0x410df7(0x1dd));}catch(_0x2dd777){console[_0x410df7(0x1e3)](_0x410df7(0x1a7),_0x2dd777);}}['setupBotHandlers'](){const _0x5f1f57=a52_0x2cfac3;if(!this['bot'])return;this['bot']['onText'](/\/start/,async _0x5732fc=>{const _0x4e7949=a52_0x5774,_0x3c923f=_0x5732fc[_0x4e7949(0x174)]['id'],_0x231bbe=_0x5732fc[_0x4e7949(0x1e8)]?.['id'][_0x4e7949(0x19f)]();if(!_0x231bbe)return;if(this['isAdmin'](_0x231bbe)){const _0x43c780={'inline_keyboard':[[{'text':_0x4e7949(0x1a3),'callback_data':'cmd_statistics'}],[{'text':'ğŸ’¬\x20Create\x20Broadcast','callback_data':_0x4e7949(0x1b3)}],[{'text':_0x4e7949(0x17e),'callback_data':_0x4e7949(0x1b6)}]]};await this[_0x4e7949(0x1b8)]?.[_0x4e7949(0x173)](_0x3c923f,_0x4e7949(0x151),{'parse_mode':_0x4e7949(0x1e5),'reply_markup':_0x43c780});}else await this['bot']?.[_0x4e7949(0x173)](_0x3c923f,_0x4e7949(0x19b)+_0x4e7949(0x192)+'Contact\x20system\x20administrator.',{'parse_mode':_0x4e7949(0x1e5)});}),this[_0x5f1f57(0x1b8)][_0x5f1f57(0x1c2)](/\/debug/,async _0x28d3a1=>{const _0x193342=_0x5f1f57,_0x3b38c0=_0x28d3a1[_0x193342(0x174)]['id'],_0x37ee26=_0x28d3a1[_0x193342(0x1e8)]?.['id'][_0x193342(0x19f)]();if(!_0x37ee26)return;if(!this[_0x193342(0x1cf)](_0x37ee26)){await this[_0x193342(0x1b8)]?.[_0x193342(0x173)](_0x3b38c0,'â›”ï¸\x20Access\x20Denied');return;}try{const _0x4a7bfa={'botActive':!!this[_0x193342(0x1b8)],'adminCount':this[_0x193342(0x159)][_0x193342(0x1c4)]['length'],'admins':this[_0x193342(0x159)][_0x193342(0x1c4)],'yourId':_0x37ee26,'timestamp':new Date()['toISOString'](),'nodeVersion':process[_0x193342(0x1bf)],'uptime':process['uptime']()};let _0x2f8eee=_0x193342(0x1bd);_0x2f8eee+='ğŸ¤–\x20Bot\x20Status:\x20'+(_0x4a7bfa['botActive']?_0x193342(0x16a):_0x193342(0x1ea))+'\x0a',_0x2f8eee+='ğŸ‘¥\x20Admin\x20Count:\x20'+_0x4a7bfa['adminCount']+'\x0a',_0x2f8eee+=_0x193342(0x197)+_0x4a7bfa[_0x193342(0x153)][_0x193342(0x1fa)](',\x20')+'`\x0a',_0x2f8eee+=_0x193342(0x1df)+_0x4a7bfa[_0x193342(0x1b0)]+'`\x0a',_0x2f8eee+=_0x193342(0x195)+_0x4a7bfa[_0x193342(0x1ba)]+'\x0a',_0x2f8eee+=_0x193342(0x1aa)+_0x4a7bfa[_0x193342(0x172)]+'\x0a',_0x2f8eee+=_0x193342(0x169)+Math[_0x193342(0x1ad)](_0x4a7bfa[_0x193342(0x14a)])+'s',await this['bot']?.['sendMessage'](_0x3b38c0,_0x2f8eee,{'parse_mode':_0x193342(0x1e5)});}catch(_0x5b89d6){console[_0x193342(0x1e3)](_0x193342(0x1f6),_0x5b89d6),await this['bot']?.[_0x193342(0x173)](_0x3b38c0,_0x193342(0x1fc));}}),this[_0x5f1f57(0x1b8)]['onText'](/\/statistics/,async _0x10a54f=>{const _0x5d64e9=_0x5f1f57,_0x45e666=_0x10a54f[_0x5d64e9(0x174)]['id'],_0x178d15=_0x10a54f['from']?.['id'][_0x5d64e9(0x19f)]();if(!_0x178d15)return;if(!this[_0x5d64e9(0x1cf)](_0x178d15)){await this['bot']?.[_0x5d64e9(0x173)](_0x45e666,_0x5d64e9(0x17d));return;}const _0x47ec78={'inline_keyboard':[[{'text':_0x5d64e9(0x19e),'callback_data':_0x5d64e9(0x187)}],[{'text':'ğŸ“…\x20Yesterday','callback_data':_0x5d64e9(0x1c9)}],[{'text':_0x5d64e9(0x1bc),'callback_data':_0x5d64e9(0x1c6)}],[{'text':_0x5d64e9(0x1d0),'callback_data':_0x5d64e9(0x1a5)}],[{'text':'ğŸ“…\x20All\x20Time','callback_data':_0x5d64e9(0x1f2)}]]};await this['bot']?.[_0x5d64e9(0x173)](_0x45e666,_0x5d64e9(0x1f5),{'parse_mode':'Markdown','reply_markup':_0x47ec78});}),this[_0x5f1f57(0x1b8)]['on'](_0x5f1f57(0x1f7),async _0x2d4e9d=>{const _0x3f114f=_0x5f1f57,_0x2a26db=_0x2d4e9d['message']?.[_0x3f114f(0x174)]['id'],_0x17ee6b=_0x2d4e9d['from']?.['id'][_0x3f114f(0x19f)](),_0x56e76f=_0x2d4e9d['data'];if(!_0x2a26db||!_0x17ee6b||!_0x56e76f)return;if(!this[_0x3f114f(0x1cf)](_0x17ee6b)){await this[_0x3f114f(0x1b8)]?.['answerCallbackQuery'](_0x2d4e9d['id'],{'text':_0x3f114f(0x17d)});return;}if(_0x56e76f===_0x3f114f(0x18d)){const _0x489f31={'inline_keyboard':[[{'text':_0x3f114f(0x19e),'callback_data':_0x3f114f(0x187)}],[{'text':_0x3f114f(0x1af),'callback_data':_0x3f114f(0x1c9)}],[{'text':_0x3f114f(0x1bc),'callback_data':_0x3f114f(0x1c6)}],[{'text':_0x3f114f(0x1d0),'callback_data':_0x3f114f(0x1a5)}],[{'text':_0x3f114f(0x190),'callback_data':_0x3f114f(0x1f2)}],[{'text':'ğŸ”™\x20Back','callback_data':_0x3f114f(0x156)}]]};await this[_0x3f114f(0x1b8)]?.['editMessageText'](_0x3f114f(0x1f5),{'chat_id':_0x2a26db,'message_id':_0x2d4e9d[_0x3f114f(0x1a6)]?.[_0x3f114f(0x1e6)],'parse_mode':'Markdown','reply_markup':_0x489f31}),await this[_0x3f114f(0x1b8)]?.[_0x3f114f(0x1a2)](_0x2d4e9d['id']);}else{if(_0x56e76f===_0x3f114f(0x1b6))try{const _0x312dd9={'botActive':!!this['bot'],'adminCount':this[_0x3f114f(0x159)]['adminIds'][_0x3f114f(0x180)],'admins':this[_0x3f114f(0x159)][_0x3f114f(0x1c4)],'yourId':_0x17ee6b,'timestamp':new Date()[_0x3f114f(0x171)](),'nodeVersion':process['version'],'uptime':process['uptime']()};let _0x4afc55=_0x3f114f(0x1bd);_0x4afc55+=_0x3f114f(0x17c)+(_0x312dd9[_0x3f114f(0x19d)]?_0x3f114f(0x16a):_0x3f114f(0x1ea))+'\x0a',_0x4afc55+=_0x3f114f(0x1fb)+_0x312dd9['adminCount']+'\x0a',_0x4afc55+=_0x3f114f(0x197)+_0x312dd9[_0x3f114f(0x153)]['join'](',\x20')+'`\x0a',_0x4afc55+=_0x3f114f(0x1df)+_0x312dd9[_0x3f114f(0x1b0)]+'`\x0a',_0x4afc55+='â°\x20Timestamp:\x20'+_0x312dd9[_0x3f114f(0x1ba)]+'\x0a',_0x4afc55+=_0x3f114f(0x1aa)+_0x312dd9[_0x3f114f(0x172)]+'\x0a',_0x4afc55+=_0x3f114f(0x169)+Math['floor'](_0x312dd9[_0x3f114f(0x14a)])+'s';const _0xc06827={'inline_keyboard':[[{'text':_0x3f114f(0x14b),'callback_data':_0x3f114f(0x156)}]]};await this[_0x3f114f(0x1b8)]?.['editMessageText'](_0x4afc55,{'chat_id':_0x2a26db,'message_id':_0x2d4e9d['message']?.[_0x3f114f(0x1e6)],'parse_mode':'Markdown','reply_markup':_0xc06827}),await this[_0x3f114f(0x1b8)]?.[_0x3f114f(0x1a2)](_0x2d4e9d['id']);}catch(_0x5ee206){console[_0x3f114f(0x1e3)](_0x3f114f(0x158),_0x5ee206),await this[_0x3f114f(0x1b8)]?.[_0x3f114f(0x1a2)](_0x2d4e9d['id'],{'text':_0x3f114f(0x1fc)});}else{if(_0x56e76f===_0x3f114f(0x1b3))this['broadcastSessions'][_0x3f114f(0x15c)](_0x2a26db,{'step':_0x3f114f(0x1d4)}),await this[_0x3f114f(0x1b8)]?.[_0x3f114f(0x1ce)]('ğŸ“¢\x20*Create\x20Broadcast*\x0a\x0aPlease\x20enter\x20the\x20message\x20text\x20you\x20want\x20to\x20send\x20to\x20all\x20merchants:',{'chat_id':_0x2a26db,'message_id':_0x2d4e9d[_0x3f114f(0x1a6)]?.[_0x3f114f(0x1e6)],'parse_mode':_0x3f114f(0x1e5)}),await this[_0x3f114f(0x1b8)]?.[_0x3f114f(0x1a2)](_0x2d4e9d['id']);else{if(_0x56e76f===_0x3f114f(0x15a))this[_0x3f114f(0x194)][_0x3f114f(0x1cc)](_0x2a26db),await this[_0x3f114f(0x1b8)]?.[_0x3f114f(0x173)](_0x2a26db,_0x3f114f(0x177)),await this[_0x3f114f(0x1b8)]?.['answerCallbackQuery'](_0x2d4e9d['id']);else{if(_0x56e76f===_0x3f114f(0x165)){const _0x4bfcf7=this[_0x3f114f(0x194)]['get'](_0x2a26db);if(!_0x4bfcf7||!_0x4bfcf7[_0x3f114f(0x183)]&&!_0x4bfcf7[_0x3f114f(0x1a0)]){await this['bot']?.[_0x3f114f(0x1a2)](_0x2d4e9d['id'],{'text':_0x3f114f(0x167)});return;}await this['bot']?.[_0x3f114f(0x1a2)](_0x2d4e9d['id'],{'text':'ğŸ“¤\x20Sending\x20broadcast...'}),await this[_0x3f114f(0x16d)](_0x2a26db,_0x4bfcf7['text']||'',_0x4bfcf7[_0x3f114f(0x1a0)]),this[_0x3f114f(0x194)][_0x3f114f(0x1cc)](_0x2a26db);}else{if(_0x56e76f[_0x3f114f(0x1ef)](_0x3f114f(0x170)))await this[_0x3f114f(0x160)](_0x2a26db,_0x56e76f,_0x2d4e9d[_0x3f114f(0x1a6)]?.[_0x3f114f(0x1e6)]),await this[_0x3f114f(0x1b8)]?.['answerCallbackQuery'](_0x2d4e9d['id']);else{if(_0x56e76f==='back_to_main'){const _0x557102={'inline_keyboard':[[{'text':_0x3f114f(0x1a3),'callback_data':'cmd_statistics'}],[{'text':_0x3f114f(0x14d),'callback_data':_0x3f114f(0x1b3)}],[{'text':'ğŸ”§\x20Debug','callback_data':_0x3f114f(0x1b6)}]]};await this['bot']?.[_0x3f114f(0x1ce)]('ğŸ”\x20*TRAPAY\x20Admin\x20Bot*\x0a\x0aâœ…\x20You\x20are\x20authorized\x20as\x20admin.',{'chat_id':_0x2a26db,'message_id':_0x2d4e9d[_0x3f114f(0x1a6)]?.[_0x3f114f(0x1e6)],'parse_mode':_0x3f114f(0x1e5),'reply_markup':_0x557102}),await this[_0x3f114f(0x1b8)]?.[_0x3f114f(0x1a2)](_0x2d4e9d['id']);}else{if(_0x56e76f===_0x3f114f(0x186)){const _0x2e4c7f={'inline_keyboard':[[{'text':_0x3f114f(0x1a9),'callback_data':_0x3f114f(0x187)}],[{'text':_0x3f114f(0x1f9),'callback_data':'stats_yesterday'}],[{'text':_0x3f114f(0x1f1),'callback_data':_0x3f114f(0x1c6)}],[{'text':_0x3f114f(0x1b2),'callback_data':_0x3f114f(0x1a5)}],[{'text':_0x3f114f(0x17b),'callback_data':'stats_all_time'}],[{'text':_0x3f114f(0x14b),'callback_data':'back_to_main'}]]};await this['bot']?.[_0x3f114f(0x1ce)](_0x3f114f(0x1f5),{'chat_id':_0x2a26db,'message_id':_0x2d4e9d[_0x3f114f(0x1a6)]?.['message_id'],'parse_mode':_0x3f114f(0x1e5),'reply_markup':_0x2e4c7f}),await this[_0x3f114f(0x1b8)]?.[_0x3f114f(0x1a2)](_0x2d4e9d['id']);}}}}}}}}}),this[_0x5f1f57(0x1b8)]['on'](_0x5f1f57(0x1a6),async _0x465e18=>{const _0x128f9c=_0x5f1f57,_0x498270=_0x465e18[_0x128f9c(0x174)]['id'],_0x1b7714=_0x465e18[_0x128f9c(0x1e8)]?.['id'][_0x128f9c(0x19f)](),_0x38e63e=_0x465e18[_0x128f9c(0x183)]||_0x465e18[_0x128f9c(0x1ac)],_0x12d27d=_0x465e18['photo'];if(!_0x1b7714)return;if(!this[_0x128f9c(0x1cf)](_0x1b7714))return;if(_0x38e63e&&_0x38e63e[_0x128f9c(0x1ef)]('/'))return;const _0x24040b=this[_0x128f9c(0x194)][_0x128f9c(0x1d8)](_0x498270);if(!_0x24040b)return;if(_0x24040b[_0x128f9c(0x19c)]===_0x128f9c(0x1d4)){if(!_0x38e63e&&!_0x12d27d)return;_0x24040b[_0x128f9c(0x183)]=_0x38e63e||'';_0x12d27d&&_0x12d27d[_0x128f9c(0x180)]>0x0&&(_0x24040b['photoFileId']=_0x12d27d[_0x12d27d[_0x128f9c(0x180)]-0x1][_0x128f9c(0x1c1)]);_0x24040b[_0x128f9c(0x19c)]=_0x128f9c(0x193);const _0x78f4ea={'inline_keyboard':[[{'text':_0x128f9c(0x1f0),'callback_data':'broadcast_cancel'},{'text':_0x128f9c(0x1b9),'callback_data':_0x128f9c(0x165)}]]};_0x24040b[_0x128f9c(0x1a0)]?await this['bot']?.[_0x128f9c(0x1e4)](_0x498270,_0x24040b[_0x128f9c(0x1a0)],{'caption':_0x128f9c(0x1da)+_0x24040b[_0x128f9c(0x183)]+_0x128f9c(0x1d7),'parse_mode':_0x128f9c(0x1e5),'reply_markup':_0x78f4ea}):await this['bot']?.[_0x128f9c(0x173)](_0x498270,_0x128f9c(0x1da)+_0x24040b[_0x128f9c(0x183)]+'\x0a\x0a_Ready\x20to\x20send?_',{'parse_mode':_0x128f9c(0x1e5),'reply_markup':_0x78f4ea});}}),this[_0x5f1f57(0x1b8)]['on'](_0x5f1f57(0x1e3),_0x4a207c=>{console['error']('Admin\x20Telegram\x20bot\x20error:',_0x4a207c);});}async[a52_0x2cfac3(0x16d)](_0x1e165b,_0x5cd737,_0x50e018){const _0xcedcd9=a52_0x2cfac3;try{const _0x3b1a0f=require(_0xcedcd9(0x154))[_0xcedcd9(0x1ed)],_0x42d9e9=require(_0xcedcd9(0x163)),_0x2f9cdf=process.env.TELEGRAM_BOT_TOKEN;if(!_0x2f9cdf){await this[_0xcedcd9(0x1b8)]?.[_0xcedcd9(0x173)](_0x1e165b,'âŒ\x20Merchant\x20bot\x20token\x20not\x20configured');return;}const _0xe1b5c4=new _0x42d9e9(_0x2f9cdf),_0x4327f6=await _0x3b1a0f[_0xcedcd9(0x179)][_0xcedcd9(0x16c)]({'where':{'shopId':{'not':null},'isVerified':!![]},'select':{'telegramId':!![]}}),_0x281830=_0x4327f6[_0xcedcd9(0x180)];let _0x4d96cc=0x0,_0x1c0a75=0x0,_0x2ba005=0x0;await this[_0xcedcd9(0x1b8)]?.[_0xcedcd9(0x173)](_0x1e165b,_0xcedcd9(0x14f)+_0x281830+'\x20merchants...');let _0x1a9b80=null;if(_0x50e018&&this[_0xcedcd9(0x1b8)])try{const _0x3041c4=await this[_0xcedcd9(0x1b8)][_0xcedcd9(0x184)](_0x50e018),_0x20ff15=await fetch(_0x3041c4);_0x1a9b80=Buffer[_0xcedcd9(0x1e8)](await _0x20ff15[_0xcedcd9(0x16b)]());}catch(_0xad0779){console[_0xcedcd9(0x1e3)](_0xcedcd9(0x15e),_0xad0779),await this[_0xcedcd9(0x1b8)]?.[_0xcedcd9(0x173)](_0x1e165b,_0xcedcd9(0x188));return;}for(const _0x325129 of _0x4327f6){try{_0x1a9b80?await _0xe1b5c4['sendPhoto'](_0x325129[_0xcedcd9(0x1cd)],_0x1a9b80,{'caption':_0x5cd737,'parse_mode':'Markdown'}):await _0xe1b5c4[_0xcedcd9(0x173)](_0x325129[_0xcedcd9(0x1cd)],_0x5cd737,{'parse_mode':'Markdown'}),_0x4d96cc++,_0x1c0a75++,await new Promise(_0x40854a=>setTimeout(_0x40854a,0x64));}catch(_0x5628b5){_0x4d96cc++,_0x2ba005++,console[_0xcedcd9(0x1e3)]('Failed\x20to\x20send\x20to\x20'+_0x325129[_0xcedcd9(0x1cd)]+':',_0x5628b5[_0xcedcd9(0x1a6)]);}}const _0x4bc0cf=_0xcedcd9(0x1e2)+(_0xcedcd9(0x162)+_0x281830+'\x0a')+(_0xcedcd9(0x18c)+_0x4d96cc+'\x0a')+('âœ…\x20Delivered:\x20'+_0x1c0a75+'\x0a')+('âŒ\x20Not\x20Delivered:\x20'+_0x2ba005);await this['bot']?.[_0xcedcd9(0x173)](_0x1e165b,_0x4bc0cf,{'parse_mode':_0xcedcd9(0x1e5)});}catch(_0x36af77){console[_0xcedcd9(0x1e3)](_0xcedcd9(0x1d1),_0x36af77),await this[_0xcedcd9(0x1b8)]?.['sendMessage'](_0x1e165b,_0xcedcd9(0x18b));}}async[a52_0x2cfac3(0x160)](_0x24fbaf,_0x175755,_0x155da3){const _0x412afc=a52_0x2cfac3;try{const _0x4ed7e5=require(_0x412afc(0x154))[_0x412afc(0x1ed)],_0x5b1405=new Date();let _0x20cb83,_0x27a46e,_0x3d119c;switch(_0x175755){case _0x412afc(0x187):{const _0x129699=new Date(Date[_0x412afc(0x1a1)](_0x5b1405[_0x412afc(0x185)](),_0x5b1405[_0x412afc(0x1ae)](),_0x5b1405[_0x412afc(0x1f3)]()));_0x20cb83=_0x129699,_0x27a46e=new Date(Date[_0x412afc(0x1a1)](_0x5b1405[_0x412afc(0x185)](),_0x5b1405[_0x412afc(0x1ae)](),_0x5b1405[_0x412afc(0x1f3)](),0x17,0x3b,0x3b,0x3e7)),_0x3d119c=_0x129699[_0x412afc(0x1f3)]()[_0x412afc(0x19f)]()[_0x412afc(0x191)](0x2,'0')+'.'+(_0x129699[_0x412afc(0x1ae)]()+0x1)[_0x412afc(0x19f)]()['padStart'](0x2,'0')+'.'+_0x129699[_0x412afc(0x185)]();break;}case'stats_yesterday':{const _0x410d4e=new Date(Date[_0x412afc(0x1a1)](_0x5b1405[_0x412afc(0x185)](),_0x5b1405[_0x412afc(0x1ae)](),_0x5b1405[_0x412afc(0x1f3)]()-0x1));_0x20cb83=_0x410d4e,_0x27a46e=new Date(Date[_0x412afc(0x1a1)](_0x5b1405['getUTCFullYear'](),_0x5b1405[_0x412afc(0x1ae)](),_0x5b1405[_0x412afc(0x1f3)]()-0x1,0x17,0x3b,0x3b,0x3e7)),_0x3d119c=_0x410d4e['getUTCDate']()[_0x412afc(0x19f)]()[_0x412afc(0x191)](0x2,'0')+'.'+(_0x410d4e[_0x412afc(0x1ae)]()+0x1)[_0x412afc(0x19f)]()[_0x412afc(0x191)](0x2,'0')+'.'+_0x410d4e[_0x412afc(0x185)]();break;}case _0x412afc(0x1c6):{const _0x5b2db6=new Date(Date['UTC'](_0x5b1405['getUTCFullYear'](),_0x5b1405[_0x412afc(0x1ae)](),0x1));_0x20cb83=_0x5b2db6,_0x27a46e=new Date(Date[_0x412afc(0x1a1)](_0x5b1405['getUTCFullYear'](),_0x5b1405[_0x412afc(0x1ae)]()+0x1,0x0,0x17,0x3b,0x3b,0x3e7));const _0x3961f8=new Date(Date[_0x412afc(0x1a1)](_0x5b1405[_0x412afc(0x185)](),_0x5b1405['getUTCMonth']()+0x1,0x0));_0x3d119c=_0x5b2db6['getUTCDate']()['toString']()[_0x412afc(0x191)](0x2,'0')+'.'+(_0x5b2db6['getUTCMonth']()+0x1)[_0x412afc(0x19f)]()[_0x412afc(0x191)](0x2,'0')+'.'+_0x5b2db6['getUTCFullYear']()+_0x412afc(0x1e9)+_0x3961f8[_0x412afc(0x1f3)]()['toString']()[_0x412afc(0x191)](0x2,'0')+'.'+(_0x3961f8[_0x412afc(0x1ae)]()+0x1)[_0x412afc(0x19f)]()[_0x412afc(0x191)](0x2,'0')+'.'+_0x3961f8[_0x412afc(0x185)]();break;}case'stats_last_month':{const _0x5d7670=new Date(Date['UTC'](_0x5b1405[_0x412afc(0x185)](),_0x5b1405[_0x412afc(0x1ae)]()-0x1,0x1));_0x20cb83=_0x5d7670,_0x27a46e=new Date(Date['UTC'](_0x5b1405[_0x412afc(0x185)](),_0x5b1405[_0x412afc(0x1ae)](),0x0,0x17,0x3b,0x3b,0x3e7));const _0x4f3e73=new Date(Date['UTC'](_0x5b1405[_0x412afc(0x185)](),_0x5b1405[_0x412afc(0x1ae)](),0x0));_0x3d119c=_0x5d7670[_0x412afc(0x1f3)]()[_0x412afc(0x19f)]()[_0x412afc(0x191)](0x2,'0')+'.'+(_0x5d7670[_0x412afc(0x1ae)]()+0x1)[_0x412afc(0x19f)]()[_0x412afc(0x191)](0x2,'0')+'.'+_0x5d7670[_0x412afc(0x185)]()+_0x412afc(0x1e9)+_0x4f3e73[_0x412afc(0x1f3)]()['toString']()[_0x412afc(0x191)](0x2,'0')+'.'+(_0x4f3e73[_0x412afc(0x1ae)]()+0x1)[_0x412afc(0x19f)]()[_0x412afc(0x191)](0x2,'0')+'.'+_0x4f3e73[_0x412afc(0x185)]();break;}case _0x412afc(0x1f2):{_0x20cb83=new Date(0x0),_0x27a46e=_0x5b1405,_0x3d119c=_0x412afc(0x1d6);break;}default:return;}const _0x5a0155=await _0x4ed7e5[_0x412afc(0x175)][_0x412afc(0x16c)]({'where':{'createdAt':{'gte':_0x20cb83,'lte':_0x27a46e}},'select':{'status':!![],'amountUSDT':!![],'amountAfterGatewayCommissionUSDT':!![]}});let _0x56609f=0x0,_0x30af92=0x0,_0x8cacba=0x0,_0x17b564=0x0,_0x63c593=0x0,_0x3fbadc=0x0;_0x5a0155[_0x412afc(0x161)](_0x14a2db=>{const _0x58e195=_0x412afc,_0x2a1bbd=_0x14a2db[_0x58e195(0x199)]||0x0,_0x3a41c9=_0x14a2db[_0x58e195(0x149)]||0x0;if(_0x14a2db[_0x58e195(0x1e1)]===_0x58e195(0x1d3))_0x56609f+=_0x2a1bbd,_0x30af92+=_0x2a1bbd-_0x3a41c9,_0x8cacba++;else{if(_0x14a2db[_0x58e195(0x1e1)]===_0x58e195(0x1d5)||_0x14a2db[_0x58e195(0x1e1)]==='EXPIRED')_0x17b564++;else{if(_0x14a2db[_0x58e195(0x1e1)]===_0x58e195(0x1fe))_0x63c593++,_0x56609f+=_0x2a1bbd;else _0x14a2db[_0x58e195(0x1e1)]===_0x58e195(0x1f8)&&(_0x3fbadc++,_0x56609f+=_0x2a1bbd);}}});const _0x17902c=_0x8cacba+_0x17b564,_0x4ed752=_0x17902c>0x0?(_0x8cacba/_0x17902c*0x64)[_0x412afc(0x1ee)](0x1):_0x412afc(0x176),_0x42dfa2=_0x3d119c[_0x412afc(0x19a)](/\./g,'\x5c.')['replace'](/\-/g,'\x5c-'),_0x2be2a0=_0x56609f['toFixed'](0x2)[_0x412afc(0x19a)](/\./g,'\x5c.'),_0x3c727a=_0x30af92[_0x412afc(0x1ee)](0x2)[_0x412afc(0x19a)](/\./g,'\x5c.'),_0x4db7fc=_0x4ed752[_0x412afc(0x19a)](/\./g,'\x5c.'),_0xb4e865=_0x412afc(0x18a)+_0x42dfa2+_0x412afc(0x18e)+('ğŸ’°\x20Turnover\x20\x5c-\x20'+_0x2be2a0+'\x20USDT\x0a')+(_0x412afc(0x1a4)+_0x3c727a+_0x412afc(0x17a))+(_0x412afc(0x178)+_0x8cacba+'\x0a')+(_0x412afc(0x1b1)+_0x17b564+'\x0a')+(_0x412afc(0x150)+_0x4db7fc+'%\x0a')+(_0x412afc(0x1b5)+_0x63c593+'\x0a')+(_0x412afc(0x1e7)+_0x3fbadc),_0x2511af={'inline_keyboard':[[{'text':'â¬…ï¸\x20Back','callback_data':_0x412afc(0x186)}]]};_0x155da3?await this[_0x412afc(0x1b8)]?.['editMessageText'](_0xb4e865,{'chat_id':_0x24fbaf,'message_id':_0x155da3,'parse_mode':_0x412afc(0x1f4),'reply_markup':_0x2511af}):await this[_0x412afc(0x1b8)]?.['sendMessage'](_0x24fbaf,_0xb4e865,{'parse_mode':_0x412afc(0x1f4),'reply_markup':_0x2511af});}catch(_0x61eb5){console[_0x412afc(0x1e3)](_0x412afc(0x1be),_0x61eb5),await this[_0x412afc(0x1b8)]?.[_0x412afc(0x173)](_0x24fbaf,_0x412afc(0x1c0));}}[a52_0x2cfac3(0x1b7)](_0x557e40){const _0x573635=a52_0x2cfac3;this['config'][_0x573635(0x1c4)]=_0x557e40[_0x573635(0x14c)](_0x53eeb0=>_0x53eeb0&&_0x53eeb0['trim']()),this[_0x573635(0x157)](),console['log']('âœ…\x20Admin\x20IDs\x20updated:',this['config'][_0x573635(0x1c4)]);}['getAdminIds'](){const _0x3793e9=a52_0x2cfac3;return[...this[_0x3793e9(0x159)][_0x3793e9(0x1c4)]];}[a52_0x2cfac3(0x1fd)](){const _0x6eb322=a52_0x2cfac3;return{'isActive':!!this[_0x6eb322(0x1b8)],'adminCount':this[_0x6eb322(0x159)][_0x6eb322(0x1c4)]['length']};}[a52_0x2cfac3(0x1bb)](){const _0x4f66a0=a52_0x2cfac3;this['bot']&&(this[_0x4f66a0(0x1b8)][_0x4f66a0(0x1ab)](),this[_0x4f66a0(0x1b8)]=null,console['log']('ğŸ›‘\x20Admin\x20Telegram\x20bot\x20stopped'));}}function a52_0x5774(_0x5d23cf,_0x3348b9){_0x5d23cf=_0x5d23cf-0x149;const _0x24ea37=a52_0x24ea();let _0x5774ce=_0x24ea37[_0x5d23cf];return _0x5774ce;}exports[a52_0x2cfac3(0x17f)]=AdminBotService,exports['adminBotService']=new AdminBotService();function a52_0x24ea(){const _0x23a3b3=['You\x20are\x20not\x20authorized\x20to\x20use\x20this\x20bot.\x0a','preview','broadcastSessions','â°\x20Timestamp:\x20','328018qVbrDg','ğŸ“‹\x20Admins:\x20`','path','amountUSDT','replace','â›”ï¸\x20Access\x20Denied\x0a\x0a','step','botActive','ğŸ“…\x20Today','toString','photoFileId','UTC','answerCallbackQuery','ğŸ“ˆ\x20Statistics','ğŸ’µ\x20Earned\x20\x5c-\x20','stats_last_month','message','âŒ\x20Failed\x20to\x20initialize\x20Admin\x20Telegram\x20bot:','3483SrWgEH','ï¿½\x20Today','ğŸ“¦\x20Node:\x20','stopPolling','caption','floor','getUTCMonth','ğŸ“…\x20Yesterday','yourId','âŒ\x20Failed\x20Payments\x20\x5c-\x20','ğŸ“†\x20Last\x20Month','cmd_broadcast','__importDefault','âš ï¸\x20Chargebacks\x20\x5c-\x20','cmd_debug','updateAdminIds','bot','ğŸ“¤\x20Send','timestamp','stopBot','ğŸ“…\x20This\x20Month','ğŸ”\x20*Debug\x20Information*\x0a\x0a','Error\x20getting\x20statistics:','version','âŒ\x20Error\x20getting\x20statistics','file_id','onText','parse','adminIds','1926207SKtSMg','stats_this_month','cwd','initializeBot','stats_yesterday','768yjCtCd','dirname','delete','telegramId','editMessageText','isAdmin','ğŸ“…\x20Last\x20Month','Error\x20sending\x20broadcast:','setupBotHandlers','PAID','awaiting_text','FAILED','All\x20Time','\x0a\x0a_Ready\x20to\x20send?_','get','writeFileSync','ğŸ“¢\x20*Broadcast\x20Preview*\x0a\x0a','includes','3298688HEoNNy','âœ…\x20Admin\x20Telegram\x20bot\x20initialized\x20successfully','10IyfYiX','ğŸ†”\x20Your\x20ID:\x20`','Error\x20loading\x20admin\x20bot\x20config:','status','âœ…\x20*Broadcast\x20Complete*\x0a\x0a','error','sendPhoto','Markdown','message_id','ğŸ”„\x20Refunds\x20\x5c-\x20','from','\x20-\x20','âŒ\x20Inactive','17012EvYGAS','stringify','default','toFixed','startsWith','âŒ\x20Cancel','ğŸ“†\x20This\x20Month','stats_all_time','getUTCDate','MarkdownV2','ğŸ“Š\x20*Statistics*\x0a\x0aSelect\x20period:','Error\x20handling\x20/debug\x20command:','callback_query','REFUND','ğŸ“†\x20Yesterday','join','ğŸ‘¥\x20Admin\x20Count:\x20','âŒ\x20Error\x20getting\x20debug\x20information','getBotInfo','CHARGEBACK','amountAfterGatewayCommissionUSDT','uptime','â¬…ï¸\x20Back','filter','ğŸ’¬\x20Create\x20Broadcast','utf-8','ğŸ“¤\x20Sending\x20broadcast\x20to\x20','ğŸ“ˆ\x20Conversion\x20\x5c-\x20','ğŸ”\x20*TRAPAY\x20Admin\x20Bot*\x0a\x0aâœ…\x20You\x20are\x20authorized\x20as\x20admin.','existsSync','admins','../config/database','24goUnPE','back_to_main','saveConfig','Error\x20handling\x20debug\x20command:','config','broadcast_cancel','__esModule','set','warn','Failed\x20to\x20download\x20photo:','adminBotConfig.json','handleStatistics','forEach','ğŸ‘¥\x20Total\x20Merchants:\x20','node-telegram-bot-api','1767661SxsgRd','broadcast_send','botToken','âŒ\x20No\x20message\x20to\x20send','355CjNeWY','â±\x20Uptime:\x20','âœ…\x20Active','arrayBuffer','findMany','handleBroadcast','Error\x20saving\x20admin\x20bot\x20config:','9900649DPlRNA','stats_','toISOString','nodeVersion','sendMessage','chat','payment','0.0','âŒ\x20Broadcast\x20cancelled','âœ…\x20Successful\x20Payments\x20\x5c-\x20','telegramUser','\x20USDT\x0a','ğŸ“†\x20All\x20Time','ğŸ¤–\x20Bot\x20Status:\x20','â›”ï¸\x20Access\x20Denied','ğŸ”§\x20Debug','AdminBotService','length','log','loadConfig','text','getFileLink','getUTCFullYear','back_to_stats_menu','stats_today','âŒ\x20Failed\x20to\x20download\x20photo','defineProperty','ğŸ“Š\x20*Statistics:\x20','âŒ\x20Error\x20sending\x20broadcast','ğŸ“¤\x20Sent:\x20','cmd_statistics','*\x0a\x0a','data','ğŸ“…\x20All\x20Time','padStart'];a52_0x24ea=function(){return _0x23a3b3;};return a52_0x24ea();}