'use strict';const a46_0xf1a6c0=a46_0x4793;function a46_0x5331(){const _0x36e9d8=['PAID','****','cardNumber','883926gZrkgd','length','4242424242424242','now','2365338hTDAnS','5WaGegK','Invalid\x20expiry\x20month','1528124hJSHeQ','floor','amount','validateCardData','test','toString','‚úÖ\x20Test\x20payment\x20successful','generateTransactionId','Processing\x20Test\x20Gateway\x20webhook\x20(not\x20typically\x20used):','Card\x20Number:','maskCardNumber','Transaction\x20ID:','error','cardHolderName','isValid','Card\x20number\x20must\x20be\x2016\x20digits','expiryYear','****\x20****\x20****\x20','274690BVHReY','status','Card\x20validation\x20failed','Payment\x20failed','üß™\x20Test\x20Gateway\x20service\x20initialized','currency','getFullYear','__esModule','1txNASw','2239363gPdvNT','log','Card\x20Holder:','random','TestGatewayService','Invalid\x20expiry\x20year','Card\x20declined\x20-\x20insufficient\x20funds\x20or\x20invalid\x20card','slice','SUCCESS_CARD','success','FAILED','‚ùå\x20Card\x20validation\x20failed:','***','143331nuFaYp','replace','Payment\x20processed\x20successfully','1808272PTMwsv','Card\x20holder\x20name\x20is\x20required'];a46_0x5331=function(){return _0x36e9d8;};return a46_0x5331();}(function(_0x317040,_0x4b93bc){const _0x3eacce=a46_0x4793,_0x5e04ba=_0x317040();while(!![]){try{const _0x5d5858=-parseInt(_0x3eacce(0x101))/0x1*(-parseInt(_0x3eacce(0xf9))/0x2)+-parseInt(_0x3eacce(0x10f))/0x3+parseInt(_0x3eacce(0x11e))/0x4*(parseInt(_0x3eacce(0x11c))/0x5)+parseInt(_0x3eacce(0x11b))/0x6+-parseInt(_0x3eacce(0x102))/0x7+-parseInt(_0x3eacce(0x112))/0x8+-parseInt(_0x3eacce(0x117))/0x9;if(_0x5d5858===_0x4b93bc)break;else _0x5e04ba['push'](_0x5e04ba['shift']());}catch(_0x4ee8b4){_0x5e04ba['push'](_0x5e04ba['shift']());}}}(a46_0x5331,0x361e1));Object['defineProperty'](exports,a46_0xf1a6c0(0x100),{'value':!![]}),exports[a46_0xf1a6c0(0x106)]=void 0x0;class TestGatewayService{constructor(){const _0x36a9ed=a46_0xf1a6c0;this[_0x36a9ed(0x10a)]=_0x36a9ed(0x119),console[_0x36a9ed(0x103)](_0x36a9ed(0xfd));}async['processCardPayment'](_0x5dcdd5){const _0x2305aa=a46_0xf1a6c0,{paymentId:_0x2ab8cf,orderId:_0x420fe1,amount:_0x1bcf51,currency:_0x56a3da,cardData:_0x472741}=_0x5dcdd5;console[_0x2305aa(0x103)]('===\x20TEST\x20GATEWAY\x20CARD\x20PROCESSING\x20==='),console[_0x2305aa(0x103)]('Payment\x20ID:',_0x2ab8cf),console[_0x2305aa(0x103)]('Order\x20ID:',_0x420fe1),console[_0x2305aa(0x103)]('Amount:',_0x1bcf51,_0x56a3da),console[_0x2305aa(0x103)](_0x2305aa(0xf0),this[_0x2305aa(0xf1)](_0x472741['cardNumber'])),console[_0x2305aa(0x103)](_0x2305aa(0x104),_0x472741[_0x2305aa(0xf4)]),console[_0x2305aa(0x103)]('Expiry:',_0x472741['expiryMonth']+'/'+_0x472741[_0x2305aa(0xf7)]),console['log']('CVC:',_0x2305aa(0x10e));const _0x156d1f=this['validateCardData'](_0x472741);if(!_0x156d1f[_0x2305aa(0xf5)])return console['log'](_0x2305aa(0x10d),_0x156d1f[_0x2305aa(0xf3)]),{'success':![],'status':'FAILED','message':_0x2305aa(0xfb),'failureReason':_0x156d1f[_0x2305aa(0xf3)]};const _0x251566=_0x472741[_0x2305aa(0x116)]['replace'](/[\s-]/g,'');if(_0x251566===this[_0x2305aa(0x10a)]){const _0x5a3b83=this[_0x2305aa(0x125)]();return console[_0x2305aa(0x103)](_0x2305aa(0x124)),console[_0x2305aa(0x103)](_0x2305aa(0xf2),_0x5a3b83),{'success':!![],'status':_0x2305aa(0x114),'message':_0x2305aa(0x111),'transactionId':_0x5a3b83};}else return console[_0x2305aa(0x103)]('‚ùå\x20Test\x20payment\x20failed\x20-\x20invalid\x20card\x20number'),{'success':![],'status':'FAILED','message':_0x2305aa(0xfc),'failureReason':_0x2305aa(0x108)};}[a46_0xf1a6c0(0x121)](_0x4cec1d){const _0x170611=a46_0xf1a6c0,_0x3c8f05=_0x4cec1d['cardNumber'][_0x170611(0x110)](/[\s-]/g,'');if(!/^\d{16}$/[_0x170611(0x122)](_0x3c8f05))return{'isValid':![],'error':_0x170611(0xf6)};if(!_0x4cec1d[_0x170611(0xf4)]||_0x4cec1d['cardHolderName']['trim']()[_0x170611(0x118)]<0x2)return{'isValid':![],'error':_0x170611(0x113)};const _0x45e1b6=parseInt(_0x4cec1d['expiryMonth']);if(isNaN(_0x45e1b6)||_0x45e1b6<0x1||_0x45e1b6>0xc)return{'isValid':![],'error':_0x170611(0x11d)};const _0x1ee7c6=parseInt(_0x4cec1d[_0x170611(0xf7)]),_0x5a54af=new Date()[_0x170611(0xff)](),_0x53f0ab=_0x1ee7c6<0x32?0x7d0+_0x1ee7c6:0x76c+_0x1ee7c6;if(isNaN(_0x1ee7c6)||_0x53f0ab<_0x5a54af||_0x53f0ab>_0x5a54af+0x14)return{'isValid':![],'error':_0x170611(0x107)};if(!/^\d{3,4}$/[_0x170611(0x122)](_0x4cec1d['cvc']))return{'isValid':![],'error':'CVC\x20must\x20be\x203\x20or\x204\x20digits'};return{'isValid':!![]};}['maskCardNumber'](_0x3e31b8){const _0x25e9b0=a46_0xf1a6c0,_0x4fbe26=_0x3e31b8[_0x25e9b0(0x110)](/[\s-]/g,'');if(_0x4fbe26[_0x25e9b0(0x118)]<0x4)return _0x25e9b0(0x115);return _0x25e9b0(0xf8)+_0x4fbe26[_0x25e9b0(0x109)](-0x4);}[a46_0xf1a6c0(0x125)](){const _0x40aac9=a46_0xf1a6c0,_0x3df4cb=Date[_0x40aac9(0x11a)]()[_0x40aac9(0x123)](),_0x3f2313=Math[_0x40aac9(0x11f)](Math[_0x40aac9(0x105)]()*0x2710)[_0x40aac9(0x123)]()['padStart'](0x4,'0');return'test_'+_0x3df4cb+'_'+_0x3f2313;}async['processWebhook'](_0x51b8d1){const _0x4e1628=a46_0xf1a6c0;return console[_0x4e1628(0x103)](_0x4e1628(0xef),_0x51b8d1),{'paymentId':_0x51b8d1['order_id']||'','status':_0x51b8d1[_0x4e1628(0xfa)]===_0x4e1628(0x10b)?_0x4e1628(0x114):_0x4e1628(0x10c),'amount':_0x51b8d1[_0x4e1628(0x120)],'currency':_0x51b8d1[_0x4e1628(0xfe)]};}}function a46_0x4793(_0x416245,_0x5f4a1b){const _0x53312c=a46_0x5331();return a46_0x4793=function(_0x479324,_0x4ed7e8){_0x479324=_0x479324-0xef;let _0x4375cf=_0x53312c[_0x479324];return _0x4375cf;},a46_0x4793(_0x416245,_0x5f4a1b);}exports[a46_0xf1a6c0(0x106)]=TestGatewayService;