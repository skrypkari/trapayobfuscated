'use strict';function a71_0x4533(){const _0x56a9f8=['‚ùå\x20Card\x20validation\x20failed:','cardHolderName','test','cardNumber','maskCardNumber','1278166RJUezb','TestGatewayService','toString','Card\x20holder\x20name\x20is\x20required','9669AdQJHO','slice','Card\x20Number:','***','SUCCESS_CARD','984645lpqRoB','2052qKpLlZ','Transaction\x20ID:','test_','12885xkXRXe','order_id','validateCardData','log','PAID','error','FAILED','replace','Invalid\x20expiry\x20month','‚ùå\x20Test\x20payment\x20failed\x20-\x20invalid\x20card\x20number','55336RLPewh','success','expiryYear','Card\x20declined\x20-\x20insufficient\x20funds\x20or\x20invalid\x20card','__esModule','floor','defineProperty','10NcrlPS','getFullYear','Card\x20validation\x20failed','Amount:','****\x20****\x20****\x20','trim','CVC\x20must\x20be\x203\x20or\x204\x20digits','3299190WiMbYw','888GWhJpN','padStart','‚úÖ\x20Test\x20payment\x20successful','isValid','2vXAYMx','4242424242424242','Processing\x20Test\x20Gateway\x20webhook\x20(not\x20typically\x20used):','Payment\x20processed\x20successfully','Invalid\x20expiry\x20year','expiryMonth','amount','56HdenIK','status','Expiry:','3565320RaFXMw','generateTransactionId','currency','length','processCardPayment'];a71_0x4533=function(){return _0x56a9f8;};return a71_0x4533();}const a71_0x1e19a5=a71_0x57c3;(function(_0x58c084,_0x111a30){const _0xc09f2f=a71_0x57c3,_0x3d496a=_0x58c084();while(!![]){try{const _0x4552f5=parseInt(_0xc09f2f(0x15f))/0x1*(parseInt(_0xc09f2f(0x173))/0x2)+-parseInt(_0xc09f2f(0x15a))/0x3+parseInt(_0xc09f2f(0x169))/0x4+-parseInt(_0xc09f2f(0x142))/0x5*(parseInt(_0xc09f2f(0x15b))/0x6)+-parseInt(_0xc09f2f(0x166))/0x7*(parseInt(_0xc09f2f(0x14c))/0x8)+-parseInt(_0xc09f2f(0x17c))/0x9*(parseInt(_0xc09f2f(0x153))/0xa)+parseInt(_0xc09f2f(0x177))/0xb*(parseInt(_0xc09f2f(0x17d))/0xc);if(_0x4552f5===_0x111a30)break;else _0x3d496a['push'](_0x3d496a['shift']());}catch(_0x1800f5){_0x3d496a['push'](_0x3d496a['shift']());}}}(a71_0x4533,0xa4892));Object[a71_0x1e19a5(0x152)](exports,a71_0x1e19a5(0x150),{'value':!![]}),exports['TestGatewayService']=void 0x0;function a71_0x57c3(_0x496769,_0x41062f){_0x496769=_0x496769-0x142;const _0x4533c2=a71_0x4533();let _0x57c31d=_0x4533c2[_0x496769];return _0x57c31d;}class TestGatewayService{constructor(){const _0x3ac77f=a71_0x1e19a5;this['SUCCESS_CARD']=_0x3ac77f(0x160),console[_0x3ac77f(0x145)]('üß™\x20Test\x20Gateway\x20service\x20initialized');}async[a71_0x1e19a5(0x16d)](_0x24b16f){const _0x1d797c=a71_0x1e19a5,{paymentId:_0x341677,orderId:_0x1fc022,amount:_0x5f17e1,currency:_0x4caa5d,cardData:_0x4000aa}=_0x24b16f;console[_0x1d797c(0x145)]('===\x20TEST\x20GATEWAY\x20CARD\x20PROCESSING\x20==='),console[_0x1d797c(0x145)]('Payment\x20ID:',_0x341677),console[_0x1d797c(0x145)]('Order\x20ID:',_0x1fc022),console[_0x1d797c(0x145)](_0x1d797c(0x156),_0x5f17e1,_0x4caa5d),console[_0x1d797c(0x145)](_0x1d797c(0x179),this[_0x1d797c(0x172)](_0x4000aa['cardNumber'])),console['log']('Card\x20Holder:',_0x4000aa[_0x1d797c(0x16f)]),console[_0x1d797c(0x145)](_0x1d797c(0x168),_0x4000aa['expiryMonth']+'/'+_0x4000aa[_0x1d797c(0x14e)]),console[_0x1d797c(0x145)]('CVC:',_0x1d797c(0x17a));const _0x17a8ce=this['validateCardData'](_0x4000aa);if(!_0x17a8ce[_0x1d797c(0x15e)])return console['log'](_0x1d797c(0x16e),_0x17a8ce[_0x1d797c(0x147)]),{'success':![],'status':'FAILED','message':_0x1d797c(0x155),'failureReason':_0x17a8ce['error']};const _0x331a5d=_0x4000aa[_0x1d797c(0x171)][_0x1d797c(0x149)](/[\s-]/g,'');if(_0x331a5d===this[_0x1d797c(0x17b)]){const _0x347b0c=this['generateTransactionId']();return console[_0x1d797c(0x145)](_0x1d797c(0x15d)),console[_0x1d797c(0x145)](_0x1d797c(0x17e),_0x347b0c),{'success':!![],'status':'PAID','message':_0x1d797c(0x162),'transactionId':_0x347b0c};}else return console[_0x1d797c(0x145)](_0x1d797c(0x14b)),{'success':![],'status':_0x1d797c(0x148),'message':'Payment\x20failed','failureReason':_0x1d797c(0x14f)};}[a71_0x1e19a5(0x144)](_0x3a82e8){const _0x10d218=a71_0x1e19a5,_0x378caa=_0x3a82e8[_0x10d218(0x171)][_0x10d218(0x149)](/[\s-]/g,'');if(!/^\d{16}$/[_0x10d218(0x170)](_0x378caa))return{'isValid':![],'error':'Card\x20number\x20must\x20be\x2016\x20digits'};if(!_0x3a82e8['cardHolderName']||_0x3a82e8['cardHolderName'][_0x10d218(0x158)]()[_0x10d218(0x16c)]<0x2)return{'isValid':![],'error':_0x10d218(0x176)};const _0x192c46=parseInt(_0x3a82e8[_0x10d218(0x164)]);if(isNaN(_0x192c46)||_0x192c46<0x1||_0x192c46>0xc)return{'isValid':![],'error':_0x10d218(0x14a)};const _0x546e1f=parseInt(_0x3a82e8['expiryYear']),_0x5cc3d5=new Date()[_0x10d218(0x154)](),_0x190000=_0x546e1f<0x32?0x7d0+_0x546e1f:0x76c+_0x546e1f;if(isNaN(_0x546e1f)||_0x190000<_0x5cc3d5||_0x190000>_0x5cc3d5+0x14)return{'isValid':![],'error':_0x10d218(0x163)};if(!/^\d{3,4}$/['test'](_0x3a82e8['cvc']))return{'isValid':![],'error':_0x10d218(0x159)};return{'isValid':!![]};}[a71_0x1e19a5(0x172)](_0x329bb5){const _0x35ee40=a71_0x1e19a5,_0xe52108=_0x329bb5[_0x35ee40(0x149)](/[\s-]/g,'');if(_0xe52108['length']<0x4)return'****';return _0x35ee40(0x157)+_0xe52108[_0x35ee40(0x178)](-0x4);}[a71_0x1e19a5(0x16a)](){const _0x37a061=a71_0x1e19a5,_0xa223e9=Date['now']()[_0x37a061(0x175)](),_0x584246=Math[_0x37a061(0x151)](Math['random']()*0x2710)[_0x37a061(0x175)]()[_0x37a061(0x15c)](0x4,'0');return _0x37a061(0x17f)+_0xa223e9+'_'+_0x584246;}async['processWebhook'](_0x6cf6c3){const _0x123d0b=a71_0x1e19a5;return console[_0x123d0b(0x145)](_0x123d0b(0x161),_0x6cf6c3),{'paymentId':_0x6cf6c3[_0x123d0b(0x143)]||'','status':_0x6cf6c3[_0x123d0b(0x167)]===_0x123d0b(0x14d)?_0x123d0b(0x146):_0x123d0b(0x148),'amount':_0x6cf6c3[_0x123d0b(0x165)],'currency':_0x6cf6c3[_0x123d0b(0x16b)]};}}exports[a71_0x1e19a5(0x174)]=TestGatewayService;