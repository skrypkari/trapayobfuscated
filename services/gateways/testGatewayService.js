'use strict';const a77_0x257b10=a77_0x1dea;function a77_0x4151(){const _0x5afefe=['random','554748kaFnTZ','Payment\x20ID:','6706648GcnyTE','error','expiryMonth','toString','amount','===\x20TEST\x20GATEWAY\x20CARD\x20PROCESSING\x20===','currency','__esModule','test_','floor','2hudabJ','status','log','1676577eqmpcv','5KFnpDA','success','‚úÖ\x20Test\x20payment\x20successful','***','2162601hCspsi','slice','order_id','validateCardData','Payment\x20failed','PAID','Payment\x20processed\x20successfully','‚ùå\x20Test\x20payment\x20failed\x20-\x20invalid\x20card\x20number','Card\x20Holder:','isValid','SUCCESS_CARD','216065vNTIwn','Processing\x20Test\x20Gateway\x20webhook\x20(not\x20typically\x20used):','Transaction\x20ID:','‚ùå\x20Card\x20validation\x20failed:','Card\x20number\x20must\x20be\x2016\x20digits','trim','now','Invalid\x20expiry\x20month','replace','1566188kDTqFS','TestGatewayService','generateTransactionId','cardNumber','Invalid\x20expiry\x20year','processCardPayment','getFullYear','Card\x20validation\x20failed','padStart','maskCardNumber','Card\x20Number:','2811114UnpJjH','CVC\x20must\x20be\x203\x20or\x204\x20digits','FAILED','test','length','Card\x20declined\x20-\x20insufficient\x20funds\x20or\x20invalid\x20card','****\x20****\x20****\x20','cardHolderName'];a77_0x4151=function(){return _0x5afefe;};return a77_0x4151();}function a77_0x1dea(_0x4767d9,_0x164444){_0x4767d9=_0x4767d9-0x9b;const _0x415171=a77_0x4151();let _0x1dea71=_0x415171[_0x4767d9];return _0x1dea71;}(function(_0x1b2b3b,_0x4725e2){const _0x45563b=a77_0x1dea,_0x30d4c8=_0x1b2b3b();while(!![]){try{const _0x11a002=parseInt(_0x45563b(0xaa))/0x1*(-parseInt(_0x45563b(0xd3))/0x2)+-parseInt(_0x45563b(0xd6))/0x3+parseInt(_0x45563b(0xb3))/0x4+-parseInt(_0x45563b(0x9b))/0x5*(-parseInt(_0x45563b(0xc7))/0x6)+parseInt(_0x45563b(0x9f))/0x7+parseInt(_0x45563b(0xc9))/0x8+-parseInt(_0x45563b(0xbe))/0x9;if(_0x11a002===_0x4725e2)break;else _0x30d4c8['push'](_0x30d4c8['shift']());}catch(_0x296c84){_0x30d4c8['push'](_0x30d4c8['shift']());}}}(a77_0x4151,0x84d09));Object['defineProperty'](exports,a77_0x257b10(0xd0),{'value':!![]}),exports[a77_0x257b10(0xb4)]=void 0x0;class TestGatewayService{constructor(){this['SUCCESS_CARD']='4242424242424242',console['log']('üß™\x20Test\x20Gateway\x20service\x20initialized');}async[a77_0x257b10(0xb8)](_0x624e2){const _0x36c90c=a77_0x257b10,{paymentId:_0x53d004,orderId:_0x296538,amount:_0x392882,currency:_0x3c7319,cardData:_0x1085ee}=_0x624e2;console[_0x36c90c(0xd5)](_0x36c90c(0xce)),console[_0x36c90c(0xd5)](_0x36c90c(0xc8),_0x53d004),console[_0x36c90c(0xd5)]('Order\x20ID:',_0x296538),console[_0x36c90c(0xd5)]('Amount:',_0x392882,_0x3c7319),console[_0x36c90c(0xd5)](_0x36c90c(0xbd),this['maskCardNumber'](_0x1085ee['cardNumber'])),console[_0x36c90c(0xd5)](_0x36c90c(0xa7),_0x1085ee[_0x36c90c(0xc5)]),console[_0x36c90c(0xd5)]('Expiry:',_0x1085ee[_0x36c90c(0xcb)]+'/'+_0x1085ee['expiryYear']),console[_0x36c90c(0xd5)]('CVC:',_0x36c90c(0x9e));const _0x528335=this['validateCardData'](_0x1085ee);if(!_0x528335[_0x36c90c(0xa8)])return console['log'](_0x36c90c(0xad),_0x528335[_0x36c90c(0xca)]),{'success':![],'status':_0x36c90c(0xc0),'message':_0x36c90c(0xba),'failureReason':_0x528335[_0x36c90c(0xca)]};const _0x510c31=_0x1085ee[_0x36c90c(0xb6)][_0x36c90c(0xb2)](/[\s-]/g,'');if(_0x510c31===this[_0x36c90c(0xa9)]){const _0x576b0e=this['generateTransactionId']();return console[_0x36c90c(0xd5)](_0x36c90c(0x9d)),console['log'](_0x36c90c(0xac),_0x576b0e),{'success':!![],'status':_0x36c90c(0xa4),'message':_0x36c90c(0xa5),'transactionId':_0x576b0e};}else return console[_0x36c90c(0xd5)](_0x36c90c(0xa6)),{'success':![],'status':_0x36c90c(0xc0),'message':_0x36c90c(0xa3),'failureReason':_0x36c90c(0xc3)};}[a77_0x257b10(0xa2)](_0x5d3fd5){const _0x3ca5c2=a77_0x257b10,_0x48d6ba=_0x5d3fd5[_0x3ca5c2(0xb6)]['replace'](/[\s-]/g,'');if(!/^\d{16}$/['test'](_0x48d6ba))return{'isValid':![],'error':_0x3ca5c2(0xae)};if(!_0x5d3fd5[_0x3ca5c2(0xc5)]||_0x5d3fd5[_0x3ca5c2(0xc5)][_0x3ca5c2(0xaf)]()[_0x3ca5c2(0xc2)]<0x2)return{'isValid':![],'error':'Card\x20holder\x20name\x20is\x20required'};const _0x46a9e0=parseInt(_0x5d3fd5[_0x3ca5c2(0xcb)]);if(isNaN(_0x46a9e0)||_0x46a9e0<0x1||_0x46a9e0>0xc)return{'isValid':![],'error':_0x3ca5c2(0xb1)};const _0x1ad5d0=parseInt(_0x5d3fd5['expiryYear']),_0x511c93=new Date()[_0x3ca5c2(0xb9)](),_0x295f50=_0x1ad5d0<0x32?0x7d0+_0x1ad5d0:0x76c+_0x1ad5d0;if(isNaN(_0x1ad5d0)||_0x295f50<_0x511c93||_0x295f50>_0x511c93+0x14)return{'isValid':![],'error':_0x3ca5c2(0xb7)};if(!/^\d{3,4}$/[_0x3ca5c2(0xc1)](_0x5d3fd5['cvc']))return{'isValid':![],'error':_0x3ca5c2(0xbf)};return{'isValid':!![]};}[a77_0x257b10(0xbc)](_0xeba4d6){const _0x2d3ba2=a77_0x257b10,_0x2b0e4a=_0xeba4d6[_0x2d3ba2(0xb2)](/[\s-]/g,'');if(_0x2b0e4a[_0x2d3ba2(0xc2)]<0x4)return'****';return _0x2d3ba2(0xc4)+_0x2b0e4a[_0x2d3ba2(0xa0)](-0x4);}[a77_0x257b10(0xb5)](){const _0x1a435e=a77_0x257b10,_0x16b362=Date[_0x1a435e(0xb0)]()[_0x1a435e(0xcc)](),_0x5296ec=Math[_0x1a435e(0xd2)](Math[_0x1a435e(0xc6)]()*0x2710)[_0x1a435e(0xcc)]()[_0x1a435e(0xbb)](0x4,'0');return _0x1a435e(0xd1)+_0x16b362+'_'+_0x5296ec;}async['processWebhook'](_0x2f8fa6){const _0x3d5f08=a77_0x257b10;return console['log'](_0x3d5f08(0xab),_0x2f8fa6),{'paymentId':_0x2f8fa6[_0x3d5f08(0xa1)]||'','status':_0x2f8fa6[_0x3d5f08(0xd4)]===_0x3d5f08(0x9c)?_0x3d5f08(0xa4):_0x3d5f08(0xc0),'amount':_0x2f8fa6[_0x3d5f08(0xcd)],'currency':_0x2f8fa6[_0x3d5f08(0xcf)]};}}exports[a77_0x257b10(0xb4)]=TestGatewayService;