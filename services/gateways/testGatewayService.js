'use strict';const a46_0x3ac452=a46_0x25d7;function a46_0x25d7(_0x55026e,_0x5cf1ed){const _0x5838f5=a46_0x5838();return a46_0x25d7=function(_0x25d739,_0x578343){_0x25d739=_0x25d739-0x11c;let _0x21fe32=_0x5838f5[_0x25d739];return _0x21fe32;},a46_0x25d7(_0x55026e,_0x5cf1ed);}(function(_0x39af03,_0x282ffb){const _0x1a5f74=a46_0x25d7,_0x469937=_0x39af03();while(!![]){try{const _0x4d3357=parseInt(_0x1a5f74(0x12b))/0x1*(parseInt(_0x1a5f74(0x13c))/0x2)+-parseInt(_0x1a5f74(0x157))/0x3+-parseInt(_0x1a5f74(0x147))/0x4+parseInt(_0x1a5f74(0x152))/0x5+parseInt(_0x1a5f74(0x14d))/0x6*(-parseInt(_0x1a5f74(0x134))/0x7)+-parseInt(_0x1a5f74(0x11c))/0x8+-parseInt(_0x1a5f74(0x12e))/0x9*(-parseInt(_0x1a5f74(0x125))/0xa);if(_0x4d3357===_0x282ffb)break;else _0x469937['push'](_0x469937['shift']());}catch(_0x436f27){_0x469937['push'](_0x469937['shift']());}}}(a46_0x5838,0xef654));function a46_0x5838(){const _0x2a73ee=['===\x20TEST\x20GATEWAY\x20CARD\x20PROCESSING\x20===','Processing\x20Test\x20Gateway\x20webhook\x20(not\x20typically\x20used):','SUCCESS_CARD','Card\x20declined\x20-\x20insufficient\x20funds\x20or\x20invalid\x20card','1812MyhMif','validateCardData','expiryMonth','2943npiGOi','replace','‚úÖ\x20Test\x20payment\x20successful','üß™\x20Test\x20Gateway\x20service\x20initialized','TestGatewayService','log','11116zZREBu','Payment\x20failed','CVC:','CVC\x20must\x20be\x203\x20or\x204\x20digits','‚ùå\x20Test\x20payment\x20failed\x20-\x20invalid\x20card\x20number','Payment\x20processed\x20successfully','padStart','Order\x20ID:','596upDnmd','random','toString','cvc','***','Expiry:','FAILED','maskCardNumber','Card\x20Number:','Card\x20holder\x20name\x20is\x20required','Card\x20number\x20must\x20be\x2016\x20digits','5365220WhsvJb','floor','cardHolderName','cardNumber','expiryYear','generateTransactionId','6582JrXMyQ','now','status','trim','error','2514030CwQsgf','test','processCardPayment','Card\x20validation\x20failed','4242424242424242','3424929yXoobz','Invalid\x20expiry\x20month','Amount:','6547400BXAjYs','currency','Transaction\x20ID:','test_','amount','PAID','Card\x20Holder:','getFullYear','length','152330hfqtgp','isValid'];a46_0x5838=function(){return _0x2a73ee;};return a46_0x5838();}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a46_0x3ac452(0x132)]=void 0x0;class TestGatewayService{constructor(){const _0x13dd68=a46_0x3ac452;this[_0x13dd68(0x129)]=_0x13dd68(0x156),console[_0x13dd68(0x133)](_0x13dd68(0x131));}async[a46_0x3ac452(0x154)](_0x1bbf66){const _0x12590a=a46_0x3ac452,{paymentId:_0x3d6c63,orderId:_0x2f1af0,amount:_0x57967a,currency:_0x36181c,cardData:_0x58fcf9}=_0x1bbf66;console[_0x12590a(0x133)](_0x12590a(0x127)),console[_0x12590a(0x133)]('Payment\x20ID:',_0x3d6c63),console[_0x12590a(0x133)](_0x12590a(0x13b),_0x2f1af0),console[_0x12590a(0x133)](_0x12590a(0x159),_0x57967a,_0x36181c),console[_0x12590a(0x133)](_0x12590a(0x144),this[_0x12590a(0x143)](_0x58fcf9['cardNumber'])),console[_0x12590a(0x133)](_0x12590a(0x122),_0x58fcf9[_0x12590a(0x149)]),console[_0x12590a(0x133)](_0x12590a(0x141),_0x58fcf9[_0x12590a(0x12d)]+'/'+_0x58fcf9[_0x12590a(0x14b)]),console['log'](_0x12590a(0x136),_0x12590a(0x140));const _0xa94c44=this['validateCardData'](_0x58fcf9);if(!_0xa94c44[_0x12590a(0x126)])return console[_0x12590a(0x133)]('‚ùå\x20Card\x20validation\x20failed:',_0xa94c44[_0x12590a(0x151)]),{'success':![],'status':_0x12590a(0x142),'message':_0x12590a(0x155),'failureReason':_0xa94c44[_0x12590a(0x151)]};const _0x4760ae=_0x58fcf9[_0x12590a(0x14a)]['replace'](/[\s-]/g,'');if(_0x4760ae===this[_0x12590a(0x129)]){const _0x1d160c=this[_0x12590a(0x14c)]();return console[_0x12590a(0x133)](_0x12590a(0x130)),console[_0x12590a(0x133)](_0x12590a(0x11e),_0x1d160c),{'success':!![],'status':_0x12590a(0x121),'message':_0x12590a(0x139),'transactionId':_0x1d160c};}else return console[_0x12590a(0x133)](_0x12590a(0x138)),{'success':![],'status':_0x12590a(0x142),'message':_0x12590a(0x135),'failureReason':_0x12590a(0x12a)};}[a46_0x3ac452(0x12c)](_0x16d6a7){const _0x4fbd5c=a46_0x3ac452,_0x49a6e0=_0x16d6a7['cardNumber'][_0x4fbd5c(0x12f)](/[\s-]/g,'');if(!/^\d{16}$/['test'](_0x49a6e0))return{'isValid':![],'error':_0x4fbd5c(0x146)};if(!_0x16d6a7[_0x4fbd5c(0x149)]||_0x16d6a7[_0x4fbd5c(0x149)][_0x4fbd5c(0x150)]()['length']<0x2)return{'isValid':![],'error':_0x4fbd5c(0x145)};const _0x42744b=parseInt(_0x16d6a7[_0x4fbd5c(0x12d)]);if(isNaN(_0x42744b)||_0x42744b<0x1||_0x42744b>0xc)return{'isValid':![],'error':_0x4fbd5c(0x158)};const _0x2b9d0b=parseInt(_0x16d6a7['expiryYear']),_0x3e6ac6=new Date()[_0x4fbd5c(0x123)](),_0x187ede=_0x2b9d0b<0x32?0x7d0+_0x2b9d0b:0x76c+_0x2b9d0b;if(isNaN(_0x2b9d0b)||_0x187ede<_0x3e6ac6||_0x187ede>_0x3e6ac6+0x14)return{'isValid':![],'error':'Invalid\x20expiry\x20year'};if(!/^\d{3,4}$/[_0x4fbd5c(0x153)](_0x16d6a7[_0x4fbd5c(0x13f)]))return{'isValid':![],'error':_0x4fbd5c(0x137)};return{'isValid':!![]};}['maskCardNumber'](_0x522df2){const _0x2adf8b=a46_0x3ac452,_0x5e7ce7=_0x522df2[_0x2adf8b(0x12f)](/[\s-]/g,'');if(_0x5e7ce7[_0x2adf8b(0x124)]<0x4)return'****';return'****\x20****\x20****\x20'+_0x5e7ce7['slice'](-0x4);}[a46_0x3ac452(0x14c)](){const _0x332784=a46_0x3ac452,_0x43a7ae=Date[_0x332784(0x14e)]()[_0x332784(0x13e)](),_0x433cb8=Math[_0x332784(0x148)](Math[_0x332784(0x13d)]()*0x2710)[_0x332784(0x13e)]()[_0x332784(0x13a)](0x4,'0');return _0x332784(0x11f)+_0x43a7ae+'_'+_0x433cb8;}async['processWebhook'](_0x1e83d8){const _0x1b7317=a46_0x3ac452;return console[_0x1b7317(0x133)](_0x1b7317(0x128),_0x1e83d8),{'paymentId':_0x1e83d8['order_id']||'','status':_0x1e83d8[_0x1b7317(0x14f)]==='success'?_0x1b7317(0x121):_0x1b7317(0x142),'amount':_0x1e83d8[_0x1b7317(0x120)],'currency':_0x1e83d8[_0x1b7317(0x11d)]};}}exports[a46_0x3ac452(0x132)]=TestGatewayService;