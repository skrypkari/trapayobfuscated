'use strict';const a54_0x2709a6=a54_0x2c4f;function a54_0x2c4f(_0x2ec45c,_0x2970d8){const _0x356586=a54_0x3565();return a54_0x2c4f=function(_0x2c4f94,_0x54ab9f){_0x2c4f94=_0x2c4f94-0x100;let _0x4a9fe1=_0x356586[_0x2c4f94];return _0x4a9fe1;},a54_0x2c4f(_0x2ec45c,_0x2970d8);}function a54_0x3565(){const _0x2c67a0=['defineProperty','40tIDvmT','replace','expiryYear','slice','__esModule','test','4242424242424242','Payment\x20failed','444SFsdaB','Processing\x20Test\x20Gateway\x20webhook\x20(not\x20typically\x20used):','now','random','processCardPayment','5198677VnPjwo','Card\x20declined\x20-\x20insufficient\x20funds\x20or\x20invalid\x20card','Transaction\x20ID:','padStart','‚ùå\x20Card\x20validation\x20failed:','TestGatewayService','error','‚úÖ\x20Test\x20payment\x20successful','Amount:','53405MeGVEu','Payment\x20processed\x20successfully','SUCCESS_CARD','floor','FAILED','length','1327731larjwF','Invalid\x20expiry\x20year','5938niUnrL','3601536sjEHRk','cvc','isValid','170wxtGtn','***','toString','Card\x20number\x20must\x20be\x2016\x20digits','4lnMpaE','Invalid\x20expiry\x20month','generateTransactionId','470729MngQbv','processWebhook','CVC:','amount','Card\x20validation\x20failed','success','trim','test_','196173lBlLuc','Card\x20Holder:','Payment\x20ID:','validateCardData','Card\x20holder\x20name\x20is\x20required','PAID','269adLWOf','CVC\x20must\x20be\x203\x20or\x204\x20digits','Card\x20Number:','cardNumber','expiryMonth','log','‚ùå\x20Test\x20payment\x20failed\x20-\x20invalid\x20card\x20number'];a54_0x3565=function(){return _0x2c67a0;};return a54_0x3565();}(function(_0x44d11d,_0x3e0296){const _0x146b1b=a54_0x2c4f,_0x2217c1=_0x44d11d();while(!![]){try{const _0xcd81cc=-parseInt(_0x146b1b(0x131))/0x1*(-parseInt(_0x146b1b(0x118))/0x2)+-parseInt(_0x146b1b(0x116))/0x3*(parseInt(_0x146b1b(0x120))/0x4)+parseInt(_0x146b1b(0x110))/0x5*(-parseInt(_0x146b1b(0x102))/0x6)+parseInt(_0x146b1b(0x123))/0x7*(parseInt(_0x146b1b(0x139))/0x8)+parseInt(_0x146b1b(0x12b))/0x9*(parseInt(_0x146b1b(0x11c))/0xa)+parseInt(_0x146b1b(0x107))/0xb+-parseInt(_0x146b1b(0x119))/0xc;if(_0xcd81cc===_0x3e0296)break;else _0x2217c1['push'](_0x2217c1['shift']());}catch(_0x3de192){_0x2217c1['push'](_0x2217c1['shift']());}}}(a54_0x3565,0x6ca19));Object[a54_0x2709a6(0x138)](exports,a54_0x2709a6(0x13d),{'value':!![]}),exports[a54_0x2709a6(0x10c)]=void 0x0;class TestGatewayService{constructor(){const _0x1f6b2f=a54_0x2709a6;this[_0x1f6b2f(0x112)]=_0x1f6b2f(0x100),console['log']('üß™\x20Test\x20Gateway\x20service\x20initialized');}async[a54_0x2709a6(0x106)](_0x4534f7){const _0x4e0a52=a54_0x2709a6,{paymentId:_0x391ba0,orderId:_0x1cdab1,amount:_0x17bd91,currency:_0x5a8363,cardData:_0x440735}=_0x4534f7;console['log']('===\x20TEST\x20GATEWAY\x20CARD\x20PROCESSING\x20==='),console[_0x4e0a52(0x136)](_0x4e0a52(0x12d),_0x391ba0),console[_0x4e0a52(0x136)]('Order\x20ID:',_0x1cdab1),console[_0x4e0a52(0x136)](_0x4e0a52(0x10f),_0x17bd91,_0x5a8363),console[_0x4e0a52(0x136)](_0x4e0a52(0x133),this['maskCardNumber'](_0x440735[_0x4e0a52(0x134)])),console[_0x4e0a52(0x136)](_0x4e0a52(0x12c),_0x440735['cardHolderName']),console['log']('Expiry:',_0x440735[_0x4e0a52(0x135)]+'/'+_0x440735[_0x4e0a52(0x13b)]),console[_0x4e0a52(0x136)](_0x4e0a52(0x125),_0x4e0a52(0x11d));const _0x1aba1e=this['validateCardData'](_0x440735);if(!_0x1aba1e[_0x4e0a52(0x11b)])return console['log'](_0x4e0a52(0x10b),_0x1aba1e['error']),{'success':![],'status':_0x4e0a52(0x114),'message':_0x4e0a52(0x127),'failureReason':_0x1aba1e[_0x4e0a52(0x10d)]};const _0x26a5b9=_0x440735['cardNumber'][_0x4e0a52(0x13a)](/[\s-]/g,'');if(_0x26a5b9===this[_0x4e0a52(0x112)]){const _0x17b5e8=this['generateTransactionId']();return console['log'](_0x4e0a52(0x10e)),console['log'](_0x4e0a52(0x109),_0x17b5e8),{'success':!![],'status':_0x4e0a52(0x130),'message':_0x4e0a52(0x111),'transactionId':_0x17b5e8};}else return console[_0x4e0a52(0x136)](_0x4e0a52(0x137)),{'success':![],'status':'FAILED','message':_0x4e0a52(0x101),'failureReason':_0x4e0a52(0x108)};}[a54_0x2709a6(0x12e)](_0x320696){const _0x4ed514=a54_0x2709a6,_0xb3c8b2=_0x320696['cardNumber']['replace'](/[\s-]/g,'');if(!/^\d{16}$/[_0x4ed514(0x13e)](_0xb3c8b2))return{'isValid':![],'error':_0x4ed514(0x11f)};if(!_0x320696['cardHolderName']||_0x320696['cardHolderName'][_0x4ed514(0x129)]()['length']<0x2)return{'isValid':![],'error':_0x4ed514(0x12f)};const _0x3b6bef=parseInt(_0x320696[_0x4ed514(0x135)]);if(isNaN(_0x3b6bef)||_0x3b6bef<0x1||_0x3b6bef>0xc)return{'isValid':![],'error':_0x4ed514(0x121)};const _0x37666a=parseInt(_0x320696[_0x4ed514(0x13b)]),_0x68bb7f=new Date()['getFullYear'](),_0x2ffaae=_0x37666a<0x32?0x7d0+_0x37666a:0x76c+_0x37666a;if(isNaN(_0x37666a)||_0x2ffaae<_0x68bb7f||_0x2ffaae>_0x68bb7f+0x14)return{'isValid':![],'error':_0x4ed514(0x117)};if(!/^\d{3,4}$/['test'](_0x320696[_0x4ed514(0x11a)]))return{'isValid':![],'error':_0x4ed514(0x132)};return{'isValid':!![]};}['maskCardNumber'](_0x4e48f7){const _0x5881b5=a54_0x2709a6,_0x452791=_0x4e48f7[_0x5881b5(0x13a)](/[\s-]/g,'');if(_0x452791[_0x5881b5(0x115)]<0x4)return'****';return'****\x20****\x20****\x20'+_0x452791[_0x5881b5(0x13c)](-0x4);}[a54_0x2709a6(0x122)](){const _0x596f59=a54_0x2709a6,_0x56e59d=Date[_0x596f59(0x104)]()[_0x596f59(0x11e)](),_0x368cea=Math[_0x596f59(0x113)](Math[_0x596f59(0x105)]()*0x2710)[_0x596f59(0x11e)]()[_0x596f59(0x10a)](0x4,'0');return _0x596f59(0x12a)+_0x56e59d+'_'+_0x368cea;}async[a54_0x2709a6(0x124)](_0x39c683){const _0x50e9d1=a54_0x2709a6;return console[_0x50e9d1(0x136)](_0x50e9d1(0x103),_0x39c683),{'paymentId':_0x39c683['order_id']||'','status':_0x39c683['status']===_0x50e9d1(0x128)?'PAID':_0x50e9d1(0x114),'amount':_0x39c683[_0x50e9d1(0x126)],'currency':_0x39c683['currency']};}}exports[a54_0x2709a6(0x10c)]=TestGatewayService;