'use strict';const a69_0x20a803=a69_0x1d44;function a69_0xb0ee(){const _0x4503ea=['logs','15CWWgfq','customerName','305744WSvdLs','MaxPara\x20API\x20error:\x20','8697490kgHMmO','MaxParaService','Unknown\x20error','FAILED','2547456mqxOYZ','token','existsSync','config','cwd','log','application/json','/api/deposit','612360czfcGp','processWebhook','toString','type','createDeposit','DEPOSIT','77PrYvVC','method','logRequest','TrapayUK/1.0','401','amount','json','defineProperty','__esModule','message','500','MaxPara\x20validation\x20error:\x20','stringify','âŒ\x20MaxPara\x20API\x20error:','385320yLnZoH','347568WbkMSn','status','logResponse','default','400','ðŸ”„\x20Processing\x20MaxPara\x20webhook:','PAID','POST','error','__importDefault','maxpara-requests.log','paymentId','path','appendFileSync','mkdirSync','catch','join','validateWebhookSignature','toISOString','baseUrl','ðŸ“Š\x20MaxPara\x20webhook\x20processed:\x20','APPROVED','2QbuZoI','ðŸ¦\x20Creating\x20MaxPara\x20deposit\x20for\x20','ðŸ“¥\x20MaxPara\x20API\x20response:','includes','Request\x20failed','MaxPara\x20authentication\x20failed','currency','DECLINED','link','fast','483588VDVQhe','HIDDEN'];a69_0xb0ee=function(){return _0x4503ea;};return a69_0xb0ee();}(function(_0x591997,_0x4b81aa){const _0x1bcb51=a69_0x1d44,_0x4b99b6=_0x591997();while(!![]){try{const _0xe73822=-parseInt(_0x1bcb51(0x113))/0x1*(parseInt(_0x1bcb51(0x129))/0x2)+parseInt(_0x1bcb51(0x112))/0x3+-parseInt(_0x1bcb51(0xeb))/0x4*(-parseInt(_0x1bcb51(0xee))/0x5)+-parseInt(_0x1bcb51(0xf6))/0x6+parseInt(_0x1bcb51(0x104))/0x7*(-parseInt(_0x1bcb51(0xf0))/0x8)+parseInt(_0x1bcb51(0xfe))/0x9+parseInt(_0x1bcb51(0xf2))/0xa;if(_0xe73822===_0x4b81aa)break;else _0x4b99b6['push'](_0x4b99b6['shift']());}catch(_0x17b9ea){_0x4b99b6['push'](_0x4b99b6['shift']());}}}(a69_0xb0ee,0x39b5a));var __importDefault=this&&this[a69_0x20a803(0x11c)]||function(_0x16e8db){const _0x55a9d2=a69_0x20a803;return _0x16e8db&&_0x16e8db[_0x55a9d2(0x10c)]?_0x16e8db:{'default':_0x16e8db};};Object[a69_0x20a803(0x10b)](exports,'__esModule',{'value':!![]}),exports['MaxParaService']=void 0x0;function a69_0x1d44(_0x352ffd,_0x4ac540){_0x352ffd=_0x352ffd-0xe3;const _0xb0ee2c=a69_0xb0ee();let _0x1d44c1=_0xb0ee2c[_0x352ffd];return _0x1d44c1;}const fs_1=__importDefault(require('fs')),path_1=__importDefault(require(a69_0x20a803(0x11f)));class MaxParaService{constructor(_0x26aeb6){const _0x2ee580=a69_0x20a803;this[_0x2ee580(0xf9)]=_0x26aeb6;}['logRequest'](_0x2fc0ea,_0x43c414){const _0x9eb5f2=a69_0x20a803,_0x4389f4=path_1[_0x9eb5f2(0x116)][_0x9eb5f2(0x123)](process[_0x9eb5f2(0xfa)](),_0x9eb5f2(0xed)),_0x9ae6bd=path_1[_0x9eb5f2(0x116)]['join'](_0x4389f4,_0x9eb5f2(0x11d));!fs_1[_0x9eb5f2(0x116)]['existsSync'](_0x4389f4)&&fs_1[_0x9eb5f2(0x116)][_0x9eb5f2(0x121)](_0x4389f4,{'recursive':!![]});const _0x3e3644=new Date()[_0x9eb5f2(0x125)](),_0x4ebe7d='['+_0x3e3644+']\x20'+_0x2fc0ea+':\x20'+JSON['stringify'](_0x43c414)+'\x0a';try{fs_1[_0x9eb5f2(0x116)][_0x9eb5f2(0x120)](_0x9ae6bd,_0x4ebe7d);}catch(_0x4bf020){console[_0x9eb5f2(0x11b)]('Failed\x20to\x20write\x20to\x20request\x20log\x20file:',_0x4bf020);}}[a69_0x20a803(0x115)](_0x2ea146,_0x5e1055){const _0x17b8ec=a69_0x20a803,_0x1d7817=path_1['default'][_0x17b8ec(0x123)](process[_0x17b8ec(0xfa)](),_0x17b8ec(0xed)),_0x2803c1=path_1['default'][_0x17b8ec(0x123)](_0x1d7817,'maxpara-responses.log');!fs_1[_0x17b8ec(0x116)][_0x17b8ec(0xf8)](_0x1d7817)&&fs_1[_0x17b8ec(0x116)][_0x17b8ec(0x121)](_0x1d7817,{'recursive':!![]});const _0x563eaf=new Date()[_0x17b8ec(0x125)](),_0x3ffbf2='['+_0x563eaf+']\x20'+_0x2ea146+':\x20'+JSON['stringify'](_0x5e1055)+'\x0a';try{fs_1[_0x17b8ec(0x116)]['appendFileSync'](_0x2803c1,_0x3ffbf2);}catch(_0x17c015){console[_0x17b8ec(0x11b)]('Failed\x20to\x20write\x20to\x20response\x20log\x20file:',_0x17c015);}}async[a69_0x20a803(0x102)](_0x1452b4){const _0x1baf1d=a69_0x20a803;console[_0x1baf1d(0xfb)](_0x1baf1d(0x12a)+_0x1452b4[_0x1baf1d(0x109)]+'\x20'+_0x1452b4[_0x1baf1d(0xe7)]);try{const _0x359ce2={'key':this[_0x1baf1d(0xf9)]['apiKey'],'username':_0x1452b4[_0x1baf1d(0xef)],'user_id':_0x1452b4[_0x1baf1d(0x11e)],'token':_0x1452b4['orderId'],'method':_0x1baf1d(0xea),'amount':_0x1452b4['amount'],'callbackUrl':_0x1452b4['callbackUrl']};this[_0x1baf1d(0x106)](_0x1baf1d(0xfd),{..._0x359ce2,'key':_0x1baf1d(0xec)}),console['log']('ðŸ“¤\x20MaxPara\x20API\x20request:',{..._0x359ce2,'key':_0x1baf1d(0xec)});const _0x1fe439=await fetch(this[_0x1baf1d(0xf9)][_0x1baf1d(0x126)]+_0x1baf1d(0xfd),{'method':_0x1baf1d(0x11a),'headers':{'Content-Type':_0x1baf1d(0xfc),'User-Agent':_0x1baf1d(0x107)},'body':JSON[_0x1baf1d(0x110)](_0x359ce2)});if(!_0x1fe439['ok']){const _0x3fd707=await _0x1fe439[_0x1baf1d(0x10a)]()[_0x1baf1d(0x122)](()=>({}));throw new Error('HTTP\x20'+_0x1fe439[_0x1baf1d(0x114)]+':\x20'+(_0x3fd707[_0x1baf1d(0x10d)]||_0x1baf1d(0xe5)));}const _0x5ea941=await _0x1fe439['json']();this[_0x1baf1d(0x115)](_0x1baf1d(0xfd),_0x5ea941),console['log'](_0x1baf1d(0xe3),_0x5ea941);if(_0x5ea941['code']!==0xc8||_0x5ea941[_0x1baf1d(0x114)]!=='success')throw new Error(_0x1baf1d(0xf1)+(_0x5ea941[_0x1baf1d(0x10d)]||_0x1baf1d(0xf4)));return{'gateway_payment_id':_0x5ea941[_0x1baf1d(0xf7)],'payment_url':_0x5ea941[_0x1baf1d(0xe9)],'expires_at':_0x5ea941['expire_date']};}catch(_0x17977a){console[_0x1baf1d(0x11b)](_0x1baf1d(0x111),_0x17977a['message']);if(_0x17977a[_0x1baf1d(0x10d)]?.[_0x1baf1d(0xe4)](_0x1baf1d(0x117)))throw new Error(_0x1baf1d(0x10f)+_0x17977a[_0x1baf1d(0x10d)]);else{if(_0x17977a[_0x1baf1d(0x10d)]?.[_0x1baf1d(0xe4)](_0x1baf1d(0x108)))throw new Error(_0x1baf1d(0xe6));else{if(_0x17977a[_0x1baf1d(0x10d)]?.[_0x1baf1d(0xe4)](_0x1baf1d(0x10e)))throw new Error('MaxPara\x20server\x20error');else throw new Error('MaxPara\x20API\x20error:\x20'+_0x17977a[_0x1baf1d(0x10d)]);}}}}[a69_0x20a803(0xff)](_0xd055d3){const _0x1e5e93=a69_0x20a803;console[_0x1e5e93(0xfb)](_0x1e5e93(0x118),_0xd055d3);const _0x1bf511=_0xd055d3[_0x1e5e93(0xf7)];let _0x59cce7;switch(_0xd055d3[_0x1e5e93(0x114)]){case _0x1e5e93(0x128):_0x59cce7=_0x1e5e93(0x119);break;case _0x1e5e93(0xe8):_0x59cce7=_0x1e5e93(0xf5);break;default:_0x59cce7='PENDING';break;}const _0x562065={'method':_0xd055d3[_0x1e5e93(0x105)],'transactionId':_0xd055d3['id'][_0x1e5e93(0x100)]()};return _0xd055d3[_0x1e5e93(0x10d)]&&(_0x562065[_0x1e5e93(0x10d)]=_0xd055d3[_0x1e5e93(0x10d)]),console[_0x1e5e93(0xfb)](_0x1e5e93(0x127)+_0x1bf511+'\x20->\x20'+_0x59cce7),{'paymentId':_0x1bf511,'status':_0x59cce7,'additionalInfo':_0x562065};}[a69_0x20a803(0x124)](_0xa84dd4,_0x49ba19){const _0x370af1=a69_0x20a803;return!!(_0xa84dd4['id']&&_0xa84dd4[_0x370af1(0xf7)]&&_0xa84dd4['status']&&_0xa84dd4[_0x370af1(0x101)]===_0x370af1(0x103));}}exports[a69_0x20a803(0xf3)]=MaxParaService;