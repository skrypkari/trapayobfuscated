'use strict';const a63_0x862b0c=a63_0x340c;(function(_0x46480b,_0x42c953){const _0x4237cf=a63_0x340c,_0x254075=_0x46480b();while(!![]){try{const _0xce3977=-parseInt(_0x4237cf(0xfd))/0x1+parseInt(_0x4237cf(0xe1))/0x2*(parseInt(_0x4237cf(0xc8))/0x3)+parseInt(_0x4237cf(0xda))/0x4+-parseInt(_0x4237cf(0xc2))/0x5*(parseInt(_0x4237cf(0xd9))/0x6)+-parseInt(_0x4237cf(0xd2))/0x7*(parseInt(_0x4237cf(0xe9))/0x8)+parseInt(_0x4237cf(0xc9))/0x9+parseInt(_0x4237cf(0xe6))/0xa;if(_0xce3977===_0x42c953)break;else _0x254075['push'](_0x254075['shift']());}catch(_0x750921){_0x254075['push'](_0x254075['shift']());}}}(a63_0x3379,0xa9284));function a63_0x340c(_0x219e79,_0x406700){_0x219e79=_0x219e79-0xb7;const _0x3379f5=a63_0x3379();let _0x340c3a=_0x3379f5[_0x219e79];return _0x340c3a;}var __importDefault=this&&this[a63_0x862b0c(0xeb)]||function(_0x3a90de){return _0x3a90de&&_0x3a90de['__esModule']?_0x3a90de:{'default':_0x3a90de};};Object[a63_0x862b0c(0xcc)](exports,a63_0x862b0c(0xde),{'value':!![]}),exports[a63_0x862b0c(0xf9)]=void 0x0;const fs_1=__importDefault(require('fs')),path_1=__importDefault(require(a63_0x862b0c(0xe2)));class MaxParaService{constructor(_0x1ee8c9){const _0x54fe1f=a63_0x862b0c;this[_0x54fe1f(0xe7)]=_0x1ee8c9;}[a63_0x862b0c(0xf4)](_0xbd6da6,_0x1cc89b){const _0x2080fe=a63_0x862b0c,_0x138632=path_1['default'][_0x2080fe(0xca)](process[_0x2080fe(0x100)](),'logs'),_0x29afc9=path_1['default'][_0x2080fe(0xca)](_0x138632,'maxpara-requests.log');!fs_1[_0x2080fe(0xd0)][_0x2080fe(0xd7)](_0x138632)&&fs_1['default'][_0x2080fe(0xc1)](_0x138632,{'recursive':!![]});const _0x3d4a52=new Date()[_0x2080fe(0xe0)](),_0x381e6e='['+_0x3d4a52+']\x20'+_0xbd6da6+':\x20'+JSON[_0x2080fe(0xe5)](_0x1cc89b)+'\x0a';try{fs_1[_0x2080fe(0xd0)][_0x2080fe(0xcd)](_0x29afc9,_0x381e6e);}catch(_0x2a6e09){console[_0x2080fe(0xc4)](_0x2080fe(0xd4),_0x2a6e09);}}[a63_0x862b0c(0xbc)](_0x247a89,_0x2c60a9){const _0x491946=a63_0x862b0c,_0x31b863=path_1['default'][_0x491946(0xca)](process[_0x491946(0x100)](),_0x491946(0xed)),_0x41d2bc=path_1[_0x491946(0xd0)][_0x491946(0xca)](_0x31b863,_0x491946(0xf6));!fs_1[_0x491946(0xd0)]['existsSync'](_0x31b863)&&fs_1[_0x491946(0xd0)][_0x491946(0xc1)](_0x31b863,{'recursive':!![]});const _0x28c1e9=new Date()[_0x491946(0xe0)](),_0x97cdf3='['+_0x28c1e9+']\x20'+_0x247a89+':\x20'+JSON['stringify'](_0x2c60a9)+'\x0a';try{fs_1['default'][_0x491946(0xcd)](_0x41d2bc,_0x97cdf3);}catch(_0x452190){console[_0x491946(0xc4)](_0x491946(0x101),_0x452190);}}async[a63_0x862b0c(0xce)](_0x1de27a){const _0xc4142a=a63_0x862b0c;console[_0xc4142a(0xb7)](_0xc4142a(0xee)+_0x1de27a[_0xc4142a(0xf8)]+'\x20'+_0x1de27a[_0xc4142a(0xd8)]);try{const _0x170cbe={'key':this[_0xc4142a(0xe7)][_0xc4142a(0xec)],'username':_0x1de27a[_0xc4142a(0xf0)],'user_id':_0x1de27a['paymentId'],'token':_0x1de27a[_0xc4142a(0xe3)],'method':'fast','amount':_0x1de27a['amount'],'callbackUrl':_0x1de27a['callbackUrl']};this[_0xc4142a(0xf4)](_0xc4142a(0xf7),{..._0x170cbe,'key':_0xc4142a(0xfb)}),console['log'](_0xc4142a(0xf5),{..._0x170cbe,'key':_0xc4142a(0xfb)});const _0x44d375=await fetch(this[_0xc4142a(0xe7)][_0xc4142a(0xc5)]+_0xc4142a(0xf7),{'method':_0xc4142a(0xff),'headers':{'Content-Type':_0xc4142a(0xfe),'User-Agent':_0xc4142a(0xd3)},'body':JSON[_0xc4142a(0xe5)](_0x170cbe)});if(!_0x44d375['ok']){const _0x9c864f=await _0x44d375[_0xc4142a(0xdd)]()[_0xc4142a(0xc0)](()=>({}));throw new Error(_0xc4142a(0xf2)+_0x44d375[_0xc4142a(0xe4)]+':\x20'+(_0x9c864f[_0xc4142a(0xc3)]||'Request\x20failed'));}const _0xbe2d5=await _0x44d375[_0xc4142a(0xdd)]();this[_0xc4142a(0xbc)](_0xc4142a(0xf7),_0xbe2d5),console[_0xc4142a(0xb7)]('üì•\x20MaxPara\x20API\x20response:',_0xbe2d5);if(_0xbe2d5['code']!==0xc8||_0xbe2d5[_0xc4142a(0xe4)]!=='success')throw new Error('MaxPara\x20API\x20error:\x20'+(_0xbe2d5[_0xc4142a(0xc3)]||_0xc4142a(0xbe)));return{'gateway_payment_id':_0xbe2d5[_0xc4142a(0xdf)],'payment_url':_0xbe2d5[_0xc4142a(0xcf)],'expires_at':_0xbe2d5[_0xc4142a(0xf1)]};}catch(_0x5bae2d){console[_0xc4142a(0xc4)](_0xc4142a(0xb8),_0x5bae2d[_0xc4142a(0xc3)]);if(_0x5bae2d[_0xc4142a(0xc3)]?.[_0xc4142a(0xdc)]('400'))throw new Error(_0xc4142a(0xef)+_0x5bae2d[_0xc4142a(0xc3)]);else{if(_0x5bae2d[_0xc4142a(0xc3)]?.[_0xc4142a(0xdc)](_0xc4142a(0xbf)))throw new Error(_0xc4142a(0xbb));else{if(_0x5bae2d[_0xc4142a(0xc3)]?.[_0xc4142a(0xdc)](_0xc4142a(0xfa)))throw new Error('MaxPara\x20server\x20error');else throw new Error(_0xc4142a(0xe8)+_0x5bae2d[_0xc4142a(0xc3)]);}}}}[a63_0x862b0c(0xb9)](_0x14e768){const _0x5af255=a63_0x862b0c;console[_0x5af255(0xb7)](_0x5af255(0xd5),_0x14e768);const _0x46ac2a=_0x14e768['token'];let _0x251d11;switch(_0x14e768['status']){case _0x5af255(0xd6):_0x251d11=_0x5af255(0xd1);break;case _0x5af255(0xea):_0x251d11=_0x5af255(0xdb);break;default:_0x251d11=_0x5af255(0xc7);break;}const _0x46ae93={'method':_0x14e768['method'],'transactionId':_0x14e768['id'][_0x5af255(0xc6)]()};return _0x14e768['message']&&(_0x46ae93[_0x5af255(0xc3)]=_0x14e768[_0x5af255(0xc3)]),console[_0x5af255(0xb7)](_0x5af255(0xfc)+_0x46ac2a+_0x5af255(0xf3)+_0x251d11),{'paymentId':_0x46ac2a,'status':_0x251d11,'additionalInfo':_0x46ae93};}[a63_0x862b0c(0xba)](_0xfde54a,_0x59f581){const _0xb25e47=a63_0x862b0c;return!!(_0xfde54a['id']&&_0xfde54a[_0xb25e47(0xdf)]&&_0xfde54a[_0xb25e47(0xe4)]&&_0xfde54a[_0xb25e47(0xcb)]===_0xb25e47(0xbd));}}function a63_0x3379(){const _0x436c99=['error','baseUrl','toString','PENDING','21dUTjcd','8414802vyJeCp','join','type','defineProperty','appendFileSync','createDeposit','link','default','PAID','7EtIdRl','TrapayUK/1.0','Failed\x20to\x20write\x20to\x20request\x20log\x20file:','üîÑ\x20Processing\x20MaxPara\x20webhook:','APPROVED','existsSync','currency','7081974PcLgzP','3092892ZCCEWn','FAILED','includes','json','__esModule','token','toISOString','82734EPTCwK','path','orderId','status','stringify','5086930XFENBb','config','MaxPara\x20API\x20error:\x20','631992kWQnxs','DECLINED','__importDefault','apiKey','logs','üè¶\x20Creating\x20MaxPara\x20deposit\x20for\x20','MaxPara\x20validation\x20error:\x20','customerName','expire_date','HTTP\x20','\x20->\x20','logRequest','üì§\x20MaxPara\x20API\x20request:','maxpara-responses.log','/api/deposit','amount','MaxParaService','500','HIDDEN','üìä\x20MaxPara\x20webhook\x20processed:\x20','554267dtAxEL','application/json','POST','cwd','Failed\x20to\x20write\x20to\x20response\x20log\x20file:','log','‚ùå\x20MaxPara\x20API\x20error:','processWebhook','validateWebhookSignature','MaxPara\x20authentication\x20failed','logResponse','DEPOSIT','Unknown\x20error','401','catch','mkdirSync','5LPpBdM','message'];a63_0x3379=function(){return _0x436c99;};return a63_0x3379();}exports[a63_0x862b0c(0xf9)]=MaxParaService;