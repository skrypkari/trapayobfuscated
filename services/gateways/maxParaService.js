'use strict';const a58_0x4e28c6=a58_0x1279;(function(_0x441a24,_0x3d6b81){const _0x1e077b=a58_0x1279,_0x163ab8=_0x441a24();while(!![]){try{const _0x38de2d=parseInt(_0x1e077b(0x91))/0x1*(parseInt(_0x1e077b(0xc0))/0x2)+-parseInt(_0x1e077b(0xb6))/0x3+-parseInt(_0x1e077b(0xb3))/0x4*(-parseInt(_0x1e077b(0x99))/0x5)+-parseInt(_0x1e077b(0xa7))/0x6+parseInt(_0x1e077b(0xa2))/0x7*(parseInt(_0x1e077b(0xa1))/0x8)+-parseInt(_0x1e077b(0xbb))/0x9+parseInt(_0x1e077b(0xbc))/0xa;if(_0x38de2d===_0x3d6b81)break;else _0x163ab8['push'](_0x163ab8['shift']());}catch(_0x1a8e75){_0x163ab8['push'](_0x163ab8['shift']());}}}(a58_0x44e8,0x3d09f));var __importDefault=this&&this[a58_0x4e28c6(0xac)]||function(_0x427834){const _0x17ea8a=a58_0x4e28c6;return _0x427834&&_0x427834[_0x17ea8a(0x98)]?_0x427834:{'default':_0x427834};};Object[a58_0x4e28c6(0xbd)](exports,a58_0x4e28c6(0x98),{'value':!![]}),exports[a58_0x4e28c6(0xca)]=void 0x0;const fs_1=__importDefault(require('fs')),path_1=__importDefault(require('path'));function a58_0x1279(_0x4016eb,_0x4e36f7){_0x4016eb=_0x4016eb-0x91;const _0x44e878=a58_0x44e8();let _0x1279d7=_0x44e878[_0x4016eb];return _0x1279d7;}class MaxParaService{constructor(_0x369593){this['config']=_0x369593;}[a58_0x4e28c6(0xb9)](_0x5d22ba,_0x16c578){const _0x3569b4=a58_0x4e28c6,_0x522e76=path_1[_0x3569b4(0xd3)][_0x3569b4(0x9f)](process[_0x3569b4(0xd0)](),_0x3569b4(0x97)),_0x444097=path_1[_0x3569b4(0xd3)][_0x3569b4(0x9f)](_0x522e76,_0x3569b4(0xbe));!fs_1[_0x3569b4(0xd3)][_0x3569b4(0xc9)](_0x522e76)&&fs_1['default'][_0x3569b4(0xa3)](_0x522e76,{'recursive':!![]});const _0x3a7a52=new Date()['toISOString'](),_0x12b36b='['+_0x3a7a52+']\x20'+_0x5d22ba+':\x20'+JSON['stringify'](_0x16c578)+'\x0a';try{fs_1[_0x3569b4(0xd3)][_0x3569b4(0xce)](_0x444097,_0x12b36b);}catch(_0x219302){console[_0x3569b4(0xa5)](_0x3569b4(0xd4),_0x219302);}}[a58_0x4e28c6(0xb2)](_0x169c87,_0x3b2755){const _0x258c35=a58_0x4e28c6,_0x494cc9=path_1[_0x258c35(0xd3)][_0x258c35(0x9f)](process[_0x258c35(0xd0)](),_0x258c35(0x97)),_0x407da5=path_1[_0x258c35(0xd3)][_0x258c35(0x9f)](_0x494cc9,_0x258c35(0x9d));!fs_1[_0x258c35(0xd3)][_0x258c35(0xc9)](_0x494cc9)&&fs_1[_0x258c35(0xd3)][_0x258c35(0xa3)](_0x494cc9,{'recursive':!![]});const _0x2cb67e=new Date()['toISOString'](),_0x3b909c='['+_0x2cb67e+']\x20'+_0x169c87+':\x20'+JSON['stringify'](_0x3b2755)+'\x0a';try{fs_1['default']['appendFileSync'](_0x407da5,_0x3b909c);}catch(_0x54316a){console[_0x258c35(0xa5)](_0x258c35(0x96),_0x54316a);}}async[a58_0x4e28c6(0x9b)](_0x4f3edb){const _0x38d506=a58_0x4e28c6;console[_0x38d506(0xc5)](_0x38d506(0xaa)+_0x4f3edb[_0x38d506(0xc4)]+'\x20'+_0x4f3edb['currency']);try{const _0x5eb871={'key':this[_0x38d506(0x95)]['apiKey'],'username':_0x4f3edb['customerName'],'user_id':_0x4f3edb[_0x38d506(0xba)],'token':_0x4f3edb['orderId'],'method':'fast','amount':_0x4f3edb['amount'],'callbackUrl':_0x4f3edb[_0x38d506(0xd5)]};this[_0x38d506(0xb9)](_0x38d506(0xc8),{..._0x5eb871,'key':_0x38d506(0xc6)}),console['log'](_0x38d506(0x93),{..._0x5eb871,'key':_0x38d506(0xc6)});const _0x232783=await fetch(this[_0x38d506(0x95)][_0x38d506(0x94)]+_0x38d506(0xc8),{'method':'POST','headers':{'Content-Type':'application/json','User-Agent':'TrapayUK/1.0'},'body':JSON[_0x38d506(0xa4)](_0x5eb871)});if(!_0x232783['ok']){const _0x42a952=await _0x232783[_0x38d506(0xb8)]()[_0x38d506(0x92)](()=>({}));throw new Error(_0x38d506(0xaf)+_0x232783['status']+':\x20'+(_0x42a952[_0x38d506(0xa8)]||'Request\x20failed'));}const _0x48d917=await _0x232783[_0x38d506(0xb8)]();this[_0x38d506(0xb2)](_0x38d506(0xc8),_0x48d917),console[_0x38d506(0xc5)](_0x38d506(0xab),_0x48d917);if(_0x48d917[_0x38d506(0xd2)]!==0xc8||_0x48d917['status']!==_0x38d506(0xa6))throw new Error(_0x38d506(0x9e)+(_0x48d917[_0x38d506(0xa8)]||'Unknown\x20error'));return{'gateway_payment_id':_0x48d917[_0x38d506(0xa0)],'payment_url':_0x48d917['link'],'expires_at':_0x48d917[_0x38d506(0xc7)]};}catch(_0x1c452b){console[_0x38d506(0xa5)](_0x38d506(0xbf),_0x1c452b[_0x38d506(0xa8)]);if(_0x1c452b['message']?.['includes'](_0x38d506(0xd1)))throw new Error(_0x38d506(0xcc)+_0x1c452b[_0x38d506(0xa8)]);else{if(_0x1c452b['message']?.[_0x38d506(0xb5)](_0x38d506(0xb7)))throw new Error('MaxPara\x20authentication\x20failed');else{if(_0x1c452b[_0x38d506(0xa8)]?.[_0x38d506(0xb5)]('500'))throw new Error(_0x38d506(0xae));else throw new Error(_0x38d506(0x9e)+_0x1c452b[_0x38d506(0xa8)]);}}}}[a58_0x4e28c6(0xb4)](_0x5e9e85){const _0x5dff62=a58_0x4e28c6;console[_0x5dff62(0xc5)](_0x5dff62(0xc3),_0x5e9e85);const _0x5dfd08=_0x5e9e85[_0x5dff62(0xa0)];let _0xdc13f0;switch(_0x5e9e85[_0x5dff62(0xc2)]){case _0x5dff62(0x9a):_0xdc13f0=_0x5dff62(0xa9);break;case _0x5dff62(0xad):_0xdc13f0='FAILED';break;default:_0xdc13f0=_0x5dff62(0xc1);break;}const _0x44ad72={'method':_0x5e9e85[_0x5dff62(0xcb)],'transactionId':_0x5e9e85['id'][_0x5dff62(0xb0)]()};return _0x5e9e85[_0x5dff62(0xa8)]&&(_0x44ad72[_0x5dff62(0xa8)]=_0x5e9e85[_0x5dff62(0xa8)]),console[_0x5dff62(0xc5)]('üìä\x20MaxPara\x20webhook\x20processed:\x20'+_0x5dfd08+_0x5dff62(0xcf)+_0xdc13f0),{'paymentId':_0x5dfd08,'status':_0xdc13f0,'additionalInfo':_0x44ad72};}[a58_0x4e28c6(0xcd)](_0x35a2ad,_0x178dc4){const _0x3c99f8=a58_0x4e28c6;return!!(_0x35a2ad['id']&&_0x35a2ad['token']&&_0x35a2ad[_0x3c99f8(0xc2)]&&_0x35a2ad[_0x3c99f8(0x9c)]===_0x3c99f8(0xb1));}}function a58_0x44e8(){const _0x52e757=['logRequest','paymentId','2762532HDXIRv','2030420HFuwts','defineProperty','maxpara-requests.log','‚ùå\x20MaxPara\x20API\x20error:','4JNBmTZ','PENDING','status','üîÑ\x20Processing\x20MaxPara\x20webhook:','amount','log','HIDDEN','expire_date','/api/deposit','existsSync','MaxParaService','method','MaxPara\x20validation\x20error:\x20','validateWebhookSignature','appendFileSync','\x20->\x20','cwd','400','code','default','Failed\x20to\x20write\x20to\x20request\x20log\x20file:','callbackUrl','69279RjswTl','catch','üì§\x20MaxPara\x20API\x20request:','baseUrl','config','Failed\x20to\x20write\x20to\x20response\x20log\x20file:','logs','__esModule','1795gFsvEs','APPROVED','createDeposit','type','maxpara-responses.log','MaxPara\x20API\x20error:\x20','join','token','24zIXTgX','432460oyeeID','mkdirSync','stringify','error','success','525918NzBAoK','message','PAID','üè¶\x20Creating\x20MaxPara\x20deposit\x20for\x20','üì•\x20MaxPara\x20API\x20response:','__importDefault','DECLINED','MaxPara\x20server\x20error','HTTP\x20','toString','DEPOSIT','logResponse','4860GHJSuy','processWebhook','includes','955527msYrLb','401','json'];a58_0x44e8=function(){return _0x52e757;};return a58_0x44e8();}exports[a58_0x4e28c6(0xca)]=MaxParaService;