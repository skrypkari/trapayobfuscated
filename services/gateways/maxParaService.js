'use strict';const a69_0x498a51=a69_0x5fa5;(function(_0x536a08,_0x136b64){const _0x1c77ba=a69_0x5fa5,_0x14dde7=_0x536a08();while(!![]){try{const _0x9f719d=-parseInt(_0x1c77ba(0x132))/0x1*(parseInt(_0x1c77ba(0x10a))/0x2)+-parseInt(_0x1c77ba(0x129))/0x3+parseInt(_0x1c77ba(0x136))/0x4+parseInt(_0x1c77ba(0x14a))/0x5*(parseInt(_0x1c77ba(0x112))/0x6)+parseInt(_0x1c77ba(0x153))/0x7*(-parseInt(_0x1c77ba(0x155))/0x8)+parseInt(_0x1c77ba(0x154))/0x9+-parseInt(_0x1c77ba(0x13b))/0xa;if(_0x9f719d===_0x136b64)break;else _0x14dde7['push'](_0x14dde7['shift']());}catch(_0x33cf8e){_0x14dde7['push'](_0x14dde7['shift']());}}}(a69_0x4e8b,0xca6f7));function a69_0x5fa5(_0x5f4a10,_0x1edd7c){_0x5f4a10=_0x5f4a10-0x106;const _0x4e8b4a=a69_0x4e8b();let _0x5fa533=_0x4e8b4a[_0x5f4a10];return _0x5fa533;}function a69_0x4e8b(){const _0x4bd9d7=['processWebhook','ðŸ“¥\x20MaxPara\x20API\x20response:','6orjXky','__esModule','\x20->\x20','ðŸ“¤\x20MaxPara\x20API\x20request:','success','HTTP\x20','/api/deposit','type','909906qkFEfX','validateWebhookSignature','DECLINED','existsSync','Failed\x20to\x20write\x20to\x20request\x20log\x20file:','defineProperty','âŒ\x20MaxPara\x20API\x20error:','500','toString','mkdirSync','Failed\x20to\x20write\x20to\x20response\x20log\x20file:','HIDDEN','expire_date','orderId','toISOString','Unknown\x20error','apiKey','MaxPara\x20API\x20error:\x20','MaxPara\x20validation\x20error:\x20','TrapayUK/1.0','__importDefault','ðŸ“Š\x20MaxPara\x20webhook\x20processed:\x20','appendFileSync','10569CLeMDx','customerName','maxpara-requests.log','logRequest','stringify','cwd','link','MaxPara\x20server\x20error','ðŸ”„\x20Processing\x20MaxPara\x20webhook:','39633FSveJJ','MaxParaService','status','logResponse','5239024RxbJlb','join','amount','PAID','code','6896090dBYbEt','catch','includes','error','json','400','POST','paymentId','callbackUrl','PENDING','Request\x20failed','config','ðŸ¦\x20Creating\x20MaxPara\x20deposit\x20for\x20','application/json','default','25DRtbol','MaxPara\x20authentication\x20failed','log','message','401','logs','token','APPROVED','FAILED','7497721kiKpCo','5798682CVmkWv','8eRqLAm','method','fast'];a69_0x4e8b=function(){return _0x4bd9d7;};return a69_0x4e8b();}var __importDefault=this&&this[a69_0x498a51(0x126)]||function(_0x16b837){return _0x16b837&&_0x16b837['__esModule']?_0x16b837:{'default':_0x16b837};};Object[a69_0x498a51(0x117)](exports,a69_0x498a51(0x10b),{'value':!![]}),exports[a69_0x498a51(0x133)]=void 0x0;const fs_1=__importDefault(require('fs')),path_1=__importDefault(require('path'));class MaxParaService{constructor(_0x4a93ec){this['config']=_0x4a93ec;}['logRequest'](_0x2a5c56,_0x2f2bc9){const _0x266404=a69_0x498a51,_0x269105=path_1[_0x266404(0x149)][_0x266404(0x137)](process['cwd'](),_0x266404(0x14f)),_0x4ee88d=path_1[_0x266404(0x149)][_0x266404(0x137)](_0x269105,_0x266404(0x12b));!fs_1[_0x266404(0x149)][_0x266404(0x115)](_0x269105)&&fs_1[_0x266404(0x149)]['mkdirSync'](_0x269105,{'recursive':!![]});const _0x4382d2=new Date()[_0x266404(0x120)](),_0x5deae0='['+_0x4382d2+']\x20'+_0x2a5c56+':\x20'+JSON[_0x266404(0x12d)](_0x2f2bc9)+'\x0a';try{fs_1[_0x266404(0x149)]['appendFileSync'](_0x4ee88d,_0x5deae0);}catch(_0xbc6f82){console[_0x266404(0x13e)](_0x266404(0x116),_0xbc6f82);}}[a69_0x498a51(0x135)](_0x391c29,_0x549db9){const _0x195f25=a69_0x498a51,_0x184c72=path_1['default'][_0x195f25(0x137)](process[_0x195f25(0x12e)](),_0x195f25(0x14f)),_0x30a87b=path_1[_0x195f25(0x149)][_0x195f25(0x137)](_0x184c72,'maxpara-responses.log');!fs_1[_0x195f25(0x149)][_0x195f25(0x115)](_0x184c72)&&fs_1[_0x195f25(0x149)][_0x195f25(0x11b)](_0x184c72,{'recursive':!![]});const _0x53d1c2=new Date()[_0x195f25(0x120)](),_0x14cd81='['+_0x53d1c2+']\x20'+_0x391c29+':\x20'+JSON[_0x195f25(0x12d)](_0x549db9)+'\x0a';try{fs_1[_0x195f25(0x149)][_0x195f25(0x128)](_0x30a87b,_0x14cd81);}catch(_0xfc8bd3){console[_0x195f25(0x13e)](_0x195f25(0x11c),_0xfc8bd3);}}async['createDeposit'](_0x585884){const _0x73c553=a69_0x498a51;console['log'](_0x73c553(0x147)+_0x585884['amount']+'\x20'+_0x585884['currency']);try{const _0x677964={'key':this[_0x73c553(0x146)][_0x73c553(0x122)],'username':_0x585884[_0x73c553(0x12a)],'user_id':_0x585884[_0x73c553(0x142)],'token':_0x585884[_0x73c553(0x11f)],'method':_0x73c553(0x107),'amount':_0x585884[_0x73c553(0x138)],'callbackUrl':_0x585884[_0x73c553(0x143)]};this[_0x73c553(0x12c)](_0x73c553(0x110),{..._0x677964,'key':_0x73c553(0x11d)}),console[_0x73c553(0x14c)](_0x73c553(0x10d),{..._0x677964,'key':_0x73c553(0x11d)});const _0x155c6c=await fetch(this[_0x73c553(0x146)]['baseUrl']+'/api/deposit',{'method':_0x73c553(0x141),'headers':{'Content-Type':_0x73c553(0x148),'User-Agent':_0x73c553(0x125)},'body':JSON[_0x73c553(0x12d)](_0x677964)});if(!_0x155c6c['ok']){const _0x228d5e=await _0x155c6c['json']()[_0x73c553(0x13c)](()=>({}));throw new Error(_0x73c553(0x10f)+_0x155c6c[_0x73c553(0x134)]+':\x20'+(_0x228d5e['message']||_0x73c553(0x145)));}const _0x2d786f=await _0x155c6c[_0x73c553(0x13f)]();this[_0x73c553(0x135)](_0x73c553(0x110),_0x2d786f),console['log'](_0x73c553(0x109),_0x2d786f);if(_0x2d786f[_0x73c553(0x13a)]!==0xc8||_0x2d786f['status']!==_0x73c553(0x10e))throw new Error(_0x73c553(0x123)+(_0x2d786f[_0x73c553(0x14d)]||_0x73c553(0x121)));return{'gateway_payment_id':_0x2d786f['token'],'payment_url':_0x2d786f[_0x73c553(0x12f)],'expires_at':_0x2d786f[_0x73c553(0x11e)]};}catch(_0x54fa98){console[_0x73c553(0x13e)](_0x73c553(0x118),_0x54fa98[_0x73c553(0x14d)]);if(_0x54fa98[_0x73c553(0x14d)]?.['includes'](_0x73c553(0x140)))throw new Error(_0x73c553(0x124)+_0x54fa98[_0x73c553(0x14d)]);else{if(_0x54fa98['message']?.[_0x73c553(0x13d)](_0x73c553(0x14e)))throw new Error(_0x73c553(0x14b));else{if(_0x54fa98['message']?.[_0x73c553(0x13d)](_0x73c553(0x119)))throw new Error(_0x73c553(0x130));else throw new Error('MaxPara\x20API\x20error:\x20'+_0x54fa98[_0x73c553(0x14d)]);}}}}[a69_0x498a51(0x108)](_0x25e3d2){const _0x420e2d=a69_0x498a51;console['log'](_0x420e2d(0x131),_0x25e3d2);const _0x14529c=_0x25e3d2[_0x420e2d(0x150)];let _0x1b2b42;switch(_0x25e3d2['status']){case _0x420e2d(0x151):_0x1b2b42=_0x420e2d(0x139);break;case _0x420e2d(0x114):_0x1b2b42=_0x420e2d(0x152);break;default:_0x1b2b42=_0x420e2d(0x144);break;}const _0x217096={'method':_0x25e3d2[_0x420e2d(0x106)],'transactionId':_0x25e3d2['id'][_0x420e2d(0x11a)]()};return _0x25e3d2[_0x420e2d(0x14d)]&&(_0x217096['message']=_0x25e3d2[_0x420e2d(0x14d)]),console[_0x420e2d(0x14c)](_0x420e2d(0x127)+_0x14529c+_0x420e2d(0x10c)+_0x1b2b42),{'paymentId':_0x14529c,'status':_0x1b2b42,'additionalInfo':_0x217096};}[a69_0x498a51(0x113)](_0x7b6b63,_0x43004e){const _0x48a081=a69_0x498a51;return!!(_0x7b6b63['id']&&_0x7b6b63[_0x48a081(0x150)]&&_0x7b6b63[_0x48a081(0x134)]&&_0x7b6b63[_0x48a081(0x111)]==='DEPOSIT');}}exports[a69_0x498a51(0x133)]=MaxParaService;