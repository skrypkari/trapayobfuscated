'use strict';function a58_0x4332(_0xb07005,_0x588f69){_0xb07005=_0xb07005-0x10d;const _0x2d7550=a58_0x2d75();let _0x43323f=_0x2d7550[_0xb07005];return _0x43323f;}const a58_0x576d80=a58_0x4332;function a58_0x2d75(){const _0x3ec224=['json','5535240rEYitP','logs','toISOString','380488hvmLoU','processWebhook','success','MaxPara\x20API\x20error:\x20','500','Request\x20failed','catch','400','logResponse','existsSync','createDeposit','DECLINED','508996KpWllx','303720ETOvAj','method','mkdirSync','\x20->\x20','link','FAILED','defineProperty','includes','HTTP\x20','validateWebhookSignature','paymentId','message','amount','cwd','stringify','error','5krImMg','default','maxpara-responses.log','6104376MzPnoD','log','Failed\x20to\x20write\x20to\x20request\x20log\x20file:','MaxPara\x20server\x20error','join','callbackUrl','DEPOSIT','config','11tpHtQZ','/api/deposit','POST','MaxPara\x20authentication\x20failed','currency','appendFileSync','maxpara-requests.log','HIDDEN','baseUrl','status','MaxParaService','18607990TzYGSR','APPROVED','156934xtFuJp','91jbrmLo','path','fast','orderId','token','üîÑ\x20Processing\x20MaxPara\x20webhook:','application/json','Failed\x20to\x20write\x20to\x20response\x20log\x20file:','__importDefault','logRequest','PENDING','TrapayUK/1.0','21fNUfpd','PAID'];a58_0x2d75=function(){return _0x3ec224;};return a58_0x2d75();}(function(_0x204892,_0xea0bfa){const _0x8ff037=a58_0x4332,_0x478662=_0x204892();while(!![]){try{const _0x4e94f6=parseInt(_0x8ff037(0x137))/0x1+-parseInt(_0x8ff037(0x117))/0x2*(parseInt(_0x8ff037(0x124))/0x3)+-parseInt(_0x8ff037(0x136))/0x4*(parseInt(_0x8ff037(0x147))/0x5)+-parseInt(_0x8ff037(0x127))/0x6+parseInt(_0x8ff037(0x118))/0x7*(parseInt(_0x8ff037(0x12a))/0x8)+-parseInt(_0x8ff037(0x14a))/0x9+-parseInt(_0x8ff037(0x115))/0xa*(-parseInt(_0x8ff037(0x152))/0xb);if(_0x4e94f6===_0xea0bfa)break;else _0x478662['push'](_0x478662['shift']());}catch(_0x2e5586){_0x478662['push'](_0x478662['shift']());}}}(a58_0x2d75,0x7b692));var __importDefault=this&&this[a58_0x576d80(0x120)]||function(_0x3d2902){return _0x3d2902&&_0x3d2902['__esModule']?_0x3d2902:{'default':_0x3d2902};};Object[a58_0x576d80(0x13d)](exports,'__esModule',{'value':!![]}),exports[a58_0x576d80(0x114)]=void 0x0;const fs_1=__importDefault(require('fs')),path_1=__importDefault(require(a58_0x576d80(0x119)));class MaxParaService{constructor(_0x60d366){const _0x4bd3cc=a58_0x576d80;this[_0x4bd3cc(0x151)]=_0x60d366;}[a58_0x576d80(0x121)](_0x5a2c73,_0x258f0b){const _0x5c852d=a58_0x576d80,_0x56c9bf=path_1[_0x5c852d(0x148)][_0x5c852d(0x14e)](process['cwd'](),_0x5c852d(0x128)),_0x2cdd93=path_1[_0x5c852d(0x148)][_0x5c852d(0x14e)](_0x56c9bf,_0x5c852d(0x110));!fs_1['default'][_0x5c852d(0x133)](_0x56c9bf)&&fs_1['default'][_0x5c852d(0x139)](_0x56c9bf,{'recursive':!![]});const _0x25efa0=new Date()[_0x5c852d(0x129)](),_0x3595bc='['+_0x25efa0+']\x20'+_0x5a2c73+':\x20'+JSON[_0x5c852d(0x145)](_0x258f0b)+'\x0a';try{fs_1['default'][_0x5c852d(0x10f)](_0x2cdd93,_0x3595bc);}catch(_0xf57db1){console['error'](_0x5c852d(0x14c),_0xf57db1);}}['logResponse'](_0x6d962a,_0x41992c){const _0x2685f8=a58_0x576d80,_0x4a6498=path_1[_0x2685f8(0x148)][_0x2685f8(0x14e)](process[_0x2685f8(0x144)](),_0x2685f8(0x128)),_0x407162=path_1[_0x2685f8(0x148)][_0x2685f8(0x14e)](_0x4a6498,_0x2685f8(0x149));!fs_1[_0x2685f8(0x148)][_0x2685f8(0x133)](_0x4a6498)&&fs_1[_0x2685f8(0x148)][_0x2685f8(0x139)](_0x4a6498,{'recursive':!![]});const _0x113c02=new Date()['toISOString'](),_0x5cdfe2='['+_0x113c02+']\x20'+_0x6d962a+':\x20'+JSON[_0x2685f8(0x145)](_0x41992c)+'\x0a';try{fs_1[_0x2685f8(0x148)]['appendFileSync'](_0x407162,_0x5cdfe2);}catch(_0x2a0e14){console[_0x2685f8(0x146)](_0x2685f8(0x11f),_0x2a0e14);}}async[a58_0x576d80(0x134)](_0x4b3b1f){const _0x3b11d7=a58_0x576d80;console[_0x3b11d7(0x14b)]('üè¶\x20Creating\x20MaxPara\x20deposit\x20for\x20'+_0x4b3b1f[_0x3b11d7(0x143)]+'\x20'+_0x4b3b1f[_0x3b11d7(0x10e)]);try{const _0x342a71={'key':this['config']['apiKey'],'username':_0x4b3b1f['customerName'],'user_id':_0x4b3b1f[_0x3b11d7(0x141)],'token':_0x4b3b1f[_0x3b11d7(0x11b)],'method':_0x3b11d7(0x11a),'amount':_0x4b3b1f[_0x3b11d7(0x143)],'callbackUrl':_0x4b3b1f[_0x3b11d7(0x14f)]};this['logRequest'](_0x3b11d7(0x153),{..._0x342a71,'key':_0x3b11d7(0x111)}),console[_0x3b11d7(0x14b)]('üì§\x20MaxPara\x20API\x20request:',{..._0x342a71,'key':_0x3b11d7(0x111)});const _0x4fafc6=await fetch(this[_0x3b11d7(0x151)][_0x3b11d7(0x112)]+_0x3b11d7(0x153),{'method':_0x3b11d7(0x154),'headers':{'Content-Type':_0x3b11d7(0x11e),'User-Agent':_0x3b11d7(0x123)},'body':JSON[_0x3b11d7(0x145)](_0x342a71)});if(!_0x4fafc6['ok']){const _0x234700=await _0x4fafc6[_0x3b11d7(0x126)]()[_0x3b11d7(0x130)](()=>({}));throw new Error(_0x3b11d7(0x13f)+_0x4fafc6[_0x3b11d7(0x113)]+':\x20'+(_0x234700['message']||_0x3b11d7(0x12f)));}const _0x2926e9=await _0x4fafc6[_0x3b11d7(0x126)]();this[_0x3b11d7(0x132)](_0x3b11d7(0x153),_0x2926e9),console['log']('üì•\x20MaxPara\x20API\x20response:',_0x2926e9);if(_0x2926e9['code']!==0xc8||_0x2926e9[_0x3b11d7(0x113)]!==_0x3b11d7(0x12c))throw new Error(_0x3b11d7(0x12d)+(_0x2926e9[_0x3b11d7(0x142)]||'Unknown\x20error'));return{'gateway_payment_id':_0x2926e9['token'],'payment_url':_0x2926e9[_0x3b11d7(0x13b)],'expires_at':_0x2926e9['expire_date']};}catch(_0x57e357){console[_0x3b11d7(0x146)]('‚ùå\x20MaxPara\x20API\x20error:',_0x57e357[_0x3b11d7(0x142)]);if(_0x57e357[_0x3b11d7(0x142)]?.[_0x3b11d7(0x13e)](_0x3b11d7(0x131)))throw new Error('MaxPara\x20validation\x20error:\x20'+_0x57e357[_0x3b11d7(0x142)]);else{if(_0x57e357[_0x3b11d7(0x142)]?.[_0x3b11d7(0x13e)]('401'))throw new Error(_0x3b11d7(0x10d));else{if(_0x57e357[_0x3b11d7(0x142)]?.[_0x3b11d7(0x13e)](_0x3b11d7(0x12e)))throw new Error(_0x3b11d7(0x14d));else throw new Error(_0x3b11d7(0x12d)+_0x57e357[_0x3b11d7(0x142)]);}}}}[a58_0x576d80(0x12b)](_0x562f03){const _0x30caa0=a58_0x576d80;console['log'](_0x30caa0(0x11d),_0x562f03);const _0x513c6f=_0x562f03[_0x30caa0(0x11c)];let _0x19372d;switch(_0x562f03[_0x30caa0(0x113)]){case _0x30caa0(0x116):_0x19372d=_0x30caa0(0x125);break;case _0x30caa0(0x135):_0x19372d=_0x30caa0(0x13c);break;default:_0x19372d=_0x30caa0(0x122);break;}const _0x27cb3c={'method':_0x562f03[_0x30caa0(0x138)],'transactionId':_0x562f03['id']['toString']()};return _0x562f03[_0x30caa0(0x142)]&&(_0x27cb3c['message']=_0x562f03[_0x30caa0(0x142)]),console[_0x30caa0(0x14b)]('üìä\x20MaxPara\x20webhook\x20processed:\x20'+_0x513c6f+_0x30caa0(0x13a)+_0x19372d),{'paymentId':_0x513c6f,'status':_0x19372d,'additionalInfo':_0x27cb3c};}[a58_0x576d80(0x140)](_0x1613ce,_0x511197){const _0x2d5f1c=a58_0x576d80;return!!(_0x1613ce['id']&&_0x1613ce[_0x2d5f1c(0x11c)]&&_0x1613ce['status']&&_0x1613ce['type']===_0x2d5f1c(0x150));}}exports[a58_0x576d80(0x114)]=MaxParaService;