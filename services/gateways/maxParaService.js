'use strict';const a69_0x318e6e=a69_0x5cd3;(function(_0x38621d,_0x566c06){const _0x4f04a8=a69_0x5cd3,_0x43c3e7=_0x38621d();while(!![]){try{const _0x257b1b=parseInt(_0x4f04a8(0x113))/0x1*(-parseInt(_0x4f04a8(0x10a))/0x2)+-parseInt(_0x4f04a8(0xfc))/0x3+-parseInt(_0x4f04a8(0x10c))/0x4*(parseInt(_0x4f04a8(0x120))/0x5)+-parseInt(_0x4f04a8(0x10e))/0x6*(parseInt(_0x4f04a8(0xf3))/0x7)+-parseInt(_0x4f04a8(0x11e))/0x8*(-parseInt(_0x4f04a8(0x10b))/0x9)+parseInt(_0x4f04a8(0x11c))/0xa+parseInt(_0x4f04a8(0xe5))/0xb;if(_0x257b1b===_0x566c06)break;else _0x43c3e7['push'](_0x43c3e7['shift']());}catch(_0x46cc3e){_0x43c3e7['push'](_0x43c3e7['shift']());}}}(a69_0x1bff,0x9804f));function a69_0x1bff(){const _0x59eaef=['cwd','processWebhook','toISOString','DEPOSIT','success','logRequest','ðŸ”„\x20Processing\x20MaxPara\x20webhook:','logs','MaxParaService','appendFileSync','includes','apiKey','6RwYcyU','2205FuOVZr','744dbTaRx','log','192qvUWUm','FAILED','defineProperty','orderId','MaxPara\x20authentication\x20failed','21253PsKvyi','customerName','Unknown\x20error','MaxPara\x20API\x20error:\x20','PENDING','/api/deposit','ðŸ“¥\x20MaxPara\x20API\x20response:','mkdirSync','ðŸ¦\x20Creating\x20MaxPara\x20deposit\x20for\x20','7479820watgkW','logResponse','7424qajrut','paymentId','23195oSDbfr','type','500','currency','APPROVED','POST','Failed\x20to\x20write\x20to\x20response\x20log\x20file:','existsSync','Request\x20failed','__importDefault','default','config','validateWebhookSignature','method','join','Failed\x20to\x20write\x20to\x20request\x20log\x20file:','status','17955289iGGwbR','DECLINED','createDeposit','path','TrapayUK/1.0','json','\x20->\x20','__esModule','stringify','âŒ\x20MaxPara\x20API\x20error:','catch','ðŸ“¤\x20MaxPara\x20API\x20request:','token','baseUrl','151270NKDjfY','400','HIDDEN','error','amount','ðŸ“Š\x20MaxPara\x20webhook\x20processed:\x20','maxpara-responses.log','maxpara-requests.log','message','1100511adohQO','application/json'];a69_0x1bff=function(){return _0x59eaef;};return a69_0x1bff();}var __importDefault=this&&this[a69_0x318e6e(0xdd)]||function(_0x22239d){const _0x578042=a69_0x318e6e;return _0x22239d&&_0x22239d[_0x578042(0xec)]?_0x22239d:{'default':_0x22239d};};function a69_0x5cd3(_0x21ba50,_0x7215c7){_0x21ba50=_0x21ba50-0xd9;const _0x1bff2e=a69_0x1bff();let _0x5cd33f=_0x1bff2e[_0x21ba50];return _0x5cd33f;}Object[a69_0x318e6e(0x110)](exports,a69_0x318e6e(0xec),{'value':!![]}),exports[a69_0x318e6e(0x106)]=void 0x0;const fs_1=__importDefault(require('fs')),path_1=__importDefault(require(a69_0x318e6e(0xe8)));class MaxParaService{constructor(_0x5031bc){const _0x4d6135=a69_0x318e6e;this[_0x4d6135(0xdf)]=_0x5031bc;}['logRequest'](_0x4d9910,_0x3bb043){const _0x3579f4=a69_0x318e6e,_0x8a38a2=path_1[_0x3579f4(0xde)]['join'](process[_0x3579f4(0xfe)](),_0x3579f4(0x105)),_0x51f7ab=path_1[_0x3579f4(0xde)][_0x3579f4(0xe2)](_0x8a38a2,_0x3579f4(0xfa));!fs_1[_0x3579f4(0xde)][_0x3579f4(0xdb)](_0x8a38a2)&&fs_1[_0x3579f4(0xde)]['mkdirSync'](_0x8a38a2,{'recursive':!![]});const _0x5be7d5=new Date()[_0x3579f4(0x100)](),_0x3895a0='['+_0x5be7d5+']\x20'+_0x4d9910+':\x20'+JSON['stringify'](_0x3bb043)+'\x0a';try{fs_1[_0x3579f4(0xde)]['appendFileSync'](_0x51f7ab,_0x3895a0);}catch(_0x2e6532){console['error'](_0x3579f4(0xe3),_0x2e6532);}}[a69_0x318e6e(0x11d)](_0x91d4d4,_0x32257c){const _0x2a702f=a69_0x318e6e,_0x5aa091=path_1[_0x2a702f(0xde)][_0x2a702f(0xe2)](process['cwd'](),'logs'),_0x3c7e7f=path_1[_0x2a702f(0xde)][_0x2a702f(0xe2)](_0x5aa091,_0x2a702f(0xf9));!fs_1[_0x2a702f(0xde)]['existsSync'](_0x5aa091)&&fs_1[_0x2a702f(0xde)][_0x2a702f(0x11a)](_0x5aa091,{'recursive':!![]});const _0x3ce26a=new Date()[_0x2a702f(0x100)](),_0x5327c6='['+_0x3ce26a+']\x20'+_0x91d4d4+':\x20'+JSON[_0x2a702f(0xed)](_0x32257c)+'\x0a';try{fs_1[_0x2a702f(0xde)][_0x2a702f(0x107)](_0x3c7e7f,_0x5327c6);}catch(_0x2e433e){console['error'](_0x2a702f(0xda),_0x2e433e);}}async[a69_0x318e6e(0xe7)](_0xa73cc1){const _0x2ce867=a69_0x318e6e;console[_0x2ce867(0x10d)](_0x2ce867(0x11b)+_0xa73cc1['amount']+'\x20'+_0xa73cc1[_0x2ce867(0x123)]);try{const _0x2b9f42={'key':this[_0x2ce867(0xdf)][_0x2ce867(0x109)],'username':_0xa73cc1[_0x2ce867(0x114)],'user_id':_0xa73cc1[_0x2ce867(0x11f)],'token':_0xa73cc1[_0x2ce867(0x111)],'method':'fast','amount':_0xa73cc1[_0x2ce867(0xf7)],'callbackUrl':_0xa73cc1['callbackUrl']};this[_0x2ce867(0x103)]('/api/deposit',{..._0x2b9f42,'key':_0x2ce867(0xf5)}),console[_0x2ce867(0x10d)](_0x2ce867(0xf0),{..._0x2b9f42,'key':_0x2ce867(0xf5)});const _0x359ff1=await fetch(this[_0x2ce867(0xdf)][_0x2ce867(0xf2)]+_0x2ce867(0x118),{'method':_0x2ce867(0xd9),'headers':{'Content-Type':_0x2ce867(0xfd),'User-Agent':_0x2ce867(0xe9)},'body':JSON['stringify'](_0x2b9f42)});if(!_0x359ff1['ok']){const _0x15e020=await _0x359ff1[_0x2ce867(0xea)]()[_0x2ce867(0xef)](()=>({}));throw new Error('HTTP\x20'+_0x359ff1[_0x2ce867(0xe4)]+':\x20'+(_0x15e020['message']||_0x2ce867(0xdc)));}const _0x31add6=await _0x359ff1[_0x2ce867(0xea)]();this[_0x2ce867(0x11d)]('/api/deposit',_0x31add6),console[_0x2ce867(0x10d)](_0x2ce867(0x119),_0x31add6);if(_0x31add6['code']!==0xc8||_0x31add6[_0x2ce867(0xe4)]!==_0x2ce867(0x102))throw new Error(_0x2ce867(0x116)+(_0x31add6[_0x2ce867(0xfb)]||_0x2ce867(0x115)));return{'gateway_payment_id':_0x31add6[_0x2ce867(0xf1)],'payment_url':_0x31add6['link'],'expires_at':_0x31add6['expire_date']};}catch(_0x528ac4){console[_0x2ce867(0xf6)](_0x2ce867(0xee),_0x528ac4[_0x2ce867(0xfb)]);if(_0x528ac4['message']?.[_0x2ce867(0x108)](_0x2ce867(0xf4)))throw new Error('MaxPara\x20validation\x20error:\x20'+_0x528ac4[_0x2ce867(0xfb)]);else{if(_0x528ac4[_0x2ce867(0xfb)]?.[_0x2ce867(0x108)]('401'))throw new Error(_0x2ce867(0x112));else{if(_0x528ac4[_0x2ce867(0xfb)]?.[_0x2ce867(0x108)](_0x2ce867(0x122)))throw new Error('MaxPara\x20server\x20error');else throw new Error(_0x2ce867(0x116)+_0x528ac4[_0x2ce867(0xfb)]);}}}}[a69_0x318e6e(0xff)](_0x73aad){const _0x66799a=a69_0x318e6e;console['log'](_0x66799a(0x104),_0x73aad);const _0x3af614=_0x73aad[_0x66799a(0xf1)];let _0x521c27;switch(_0x73aad['status']){case _0x66799a(0x124):_0x521c27='PAID';break;case _0x66799a(0xe6):_0x521c27=_0x66799a(0x10f);break;default:_0x521c27=_0x66799a(0x117);break;}const _0x14f587={'method':_0x73aad[_0x66799a(0xe1)],'transactionId':_0x73aad['id']['toString']()};return _0x73aad['message']&&(_0x14f587[_0x66799a(0xfb)]=_0x73aad[_0x66799a(0xfb)]),console[_0x66799a(0x10d)](_0x66799a(0xf8)+_0x3af614+_0x66799a(0xeb)+_0x521c27),{'paymentId':_0x3af614,'status':_0x521c27,'additionalInfo':_0x14f587};}[a69_0x318e6e(0xe0)](_0x5f2389,_0x4e4a51){const _0x149665=a69_0x318e6e;return!!(_0x5f2389['id']&&_0x5f2389[_0x149665(0xf1)]&&_0x5f2389['status']&&_0x5f2389[_0x149665(0x121)]===_0x149665(0x101));}}exports['MaxParaService']=MaxParaService;