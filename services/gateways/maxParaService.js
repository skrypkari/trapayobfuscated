'use strict';const a69_0x1fc830=a69_0x17ba;(function(_0x3b6c91,_0x2a2914){const _0x46bc30=a69_0x17ba,_0x41ffc3=_0x3b6c91();while(!![]){try{const _0x4764ef=parseInt(_0x46bc30(0x1ad))/0x1*(-parseInt(_0x46bc30(0x195))/0x2)+parseInt(_0x46bc30(0x1b2))/0x3+-parseInt(_0x46bc30(0x1ce))/0x4*(-parseInt(_0x46bc30(0x19b))/0x5)+parseInt(_0x46bc30(0x1b6))/0x6*(-parseInt(_0x46bc30(0x1a7))/0x7)+parseInt(_0x46bc30(0x1a5))/0x8*(parseInt(_0x46bc30(0x1cf))/0x9)+-parseInt(_0x46bc30(0x1ab))/0xa*(-parseInt(_0x46bc30(0x192))/0xb)+-parseInt(_0x46bc30(0x1cc))/0xc*(parseInt(_0x46bc30(0x1b7))/0xd);if(_0x4764ef===_0x2a2914)break;else _0x41ffc3['push'](_0x41ffc3['shift']());}catch(_0x567550){_0x41ffc3['push'](_0x41ffc3['shift']());}}}(a69_0x3513,0x6a2f6));function a69_0x17ba(_0x218dfa,_0x214b4f){_0x218dfa=_0x218dfa-0x18e;const _0x3513cb=a69_0x3513();let _0x17ba06=_0x3513cb[_0x218dfa];return _0x17ba06;}var __importDefault=this&&this['__importDefault']||function(_0x11dabf){const _0x4b00e5=a69_0x17ba;return _0x11dabf&&_0x11dabf[_0x4b00e5(0x1a6)]?_0x11dabf:{'default':_0x11dabf};};function a69_0x3513(){const _0x43aff6=['validateWebhookSignature','message','98104zkzKrT','__esModule','1855819kpYuye','orderId','ðŸ“Š\x20MaxPara\x20webhook\x20processed:\x20','Failed\x20to\x20write\x20to\x20response\x20log\x20file:','11590RwowEh','token','1zLiAIL','existsSync','type','Failed\x20to\x20write\x20to\x20request\x20log\x20file:','/api/deposit','1658178QRdcTE','HTTP\x20','default','\x20->\x20','6HNzHmv','580151BfOnYx','maxpara-responses.log','logs','fast','amount','path','json','logRequest','status','stringify','logResponse','config','defineProperty','code','includes','MaxParaService','DECLINED','HIDDEN','toISOString','ðŸ”„\x20Processing\x20MaxPara\x20webhook:','MaxPara\x20API\x20error:\x20','192gnCmbx','Request\x20failed','4ORhaul','225FoILhg','createDeposit','maxpara-requests.log','expire_date','method','catch','processWebhook','apiKey','ðŸ“¥\x20MaxPara\x20API\x20response:','MaxPara\x20server\x20error','6039ReQmPV','application/json','ðŸ¦\x20Creating\x20MaxPara\x20deposit\x20for\x20','1514484ecBdCV','PENDING','TrapayUK/1.0','âŒ\x20MaxPara\x20API\x20error:','join','currency','3378665XBCpMQ','mkdirSync','appendFileSync','error','401','customerName','DEPOSIT','log'];a69_0x3513=function(){return _0x43aff6;};return a69_0x3513();}Object[a69_0x1fc830(0x1c3)](exports,a69_0x1fc830(0x1a6),{'value':!![]}),exports[a69_0x1fc830(0x1c6)]=void 0x0;const fs_1=__importDefault(require('fs')),path_1=__importDefault(require(a69_0x1fc830(0x1bc)));class MaxParaService{constructor(_0x34d43c){this['config']=_0x34d43c;}[a69_0x1fc830(0x1be)](_0x4249e2,_0x1e4b2d){const _0x4744c4=a69_0x1fc830,_0x3baaae=path_1['default'][_0x4744c4(0x199)](process['cwd'](),_0x4744c4(0x1b9)),_0x36dfd4=path_1['default'][_0x4744c4(0x199)](_0x3baaae,_0x4744c4(0x1d1));!fs_1[_0x4744c4(0x1b4)][_0x4744c4(0x1ae)](_0x3baaae)&&fs_1[_0x4744c4(0x1b4)][_0x4744c4(0x19c)](_0x3baaae,{'recursive':!![]});const _0x13c445=new Date()['toISOString'](),_0x394a03='['+_0x13c445+']\x20'+_0x4249e2+':\x20'+JSON[_0x4744c4(0x1c0)](_0x1e4b2d)+'\x0a';try{fs_1[_0x4744c4(0x1b4)][_0x4744c4(0x19d)](_0x36dfd4,_0x394a03);}catch(_0x34c3eb){console[_0x4744c4(0x19e)](_0x4744c4(0x1b0),_0x34c3eb);}}[a69_0x1fc830(0x1c1)](_0xe67d0e,_0x3f728e){const _0x3f38d5=a69_0x1fc830,_0x18cbca=path_1['default'][_0x3f38d5(0x199)](process['cwd'](),_0x3f38d5(0x1b9)),_0xa26084=path_1[_0x3f38d5(0x1b4)][_0x3f38d5(0x199)](_0x18cbca,_0x3f38d5(0x1b8));!fs_1[_0x3f38d5(0x1b4)][_0x3f38d5(0x1ae)](_0x18cbca)&&fs_1[_0x3f38d5(0x1b4)][_0x3f38d5(0x19c)](_0x18cbca,{'recursive':!![]});const _0x2f2f93=new Date()[_0x3f38d5(0x1c9)](),_0x5384a9='['+_0x2f2f93+']\x20'+_0xe67d0e+':\x20'+JSON['stringify'](_0x3f728e)+'\x0a';try{fs_1[_0x3f38d5(0x1b4)][_0x3f38d5(0x19d)](_0xa26084,_0x5384a9);}catch(_0x33c9de){console['error'](_0x3f38d5(0x1aa),_0x33c9de);}}async[a69_0x1fc830(0x1d0)](_0x181683){const _0x159b78=a69_0x1fc830;console[_0x159b78(0x1a2)](_0x159b78(0x194)+_0x181683['amount']+'\x20'+_0x181683[_0x159b78(0x19a)]);try{const _0x5695bd={'key':this[_0x159b78(0x1c2)][_0x159b78(0x18f)],'username':_0x181683[_0x159b78(0x1a0)],'user_id':_0x181683['paymentId'],'token':_0x181683[_0x159b78(0x1a8)],'method':_0x159b78(0x1ba),'amount':_0x181683[_0x159b78(0x1bb)],'callbackUrl':_0x181683['callbackUrl']};this[_0x159b78(0x1be)](_0x159b78(0x1b1),{..._0x5695bd,'key':_0x159b78(0x1c8)}),console[_0x159b78(0x1a2)]('ðŸ“¤\x20MaxPara\x20API\x20request:',{..._0x5695bd,'key':'HIDDEN'});const _0xa3e00a=await fetch(this[_0x159b78(0x1c2)]['baseUrl']+_0x159b78(0x1b1),{'method':'POST','headers':{'Content-Type':_0x159b78(0x193),'User-Agent':_0x159b78(0x197)},'body':JSON[_0x159b78(0x1c0)](_0x5695bd)});if(!_0xa3e00a['ok']){const _0x383e84=await _0xa3e00a[_0x159b78(0x1bd)]()[_0x159b78(0x1d4)](()=>({}));throw new Error(_0x159b78(0x1b3)+_0xa3e00a[_0x159b78(0x1bf)]+':\x20'+(_0x383e84[_0x159b78(0x1a4)]||_0x159b78(0x1cd)));}const _0x297b51=await _0xa3e00a[_0x159b78(0x1bd)]();this[_0x159b78(0x1c1)](_0x159b78(0x1b1),_0x297b51),console[_0x159b78(0x1a2)](_0x159b78(0x190),_0x297b51);if(_0x297b51[_0x159b78(0x1c4)]!==0xc8||_0x297b51[_0x159b78(0x1bf)]!=='success')throw new Error(_0x159b78(0x1cb)+(_0x297b51[_0x159b78(0x1a4)]||'Unknown\x20error'));return{'gateway_payment_id':_0x297b51['token'],'payment_url':_0x297b51['link'],'expires_at':_0x297b51[_0x159b78(0x1d2)]};}catch(_0x167818){console['error'](_0x159b78(0x198),_0x167818[_0x159b78(0x1a4)]);if(_0x167818['message']?.['includes']('400'))throw new Error('MaxPara\x20validation\x20error:\x20'+_0x167818[_0x159b78(0x1a4)]);else{if(_0x167818[_0x159b78(0x1a4)]?.[_0x159b78(0x1c5)](_0x159b78(0x19f)))throw new Error('MaxPara\x20authentication\x20failed');else{if(_0x167818['message']?.[_0x159b78(0x1c5)]('500'))throw new Error(_0x159b78(0x191));else throw new Error(_0x159b78(0x1cb)+_0x167818['message']);}}}}[a69_0x1fc830(0x18e)](_0x11fcfb){const _0x1f93ac=a69_0x1fc830;console[_0x1f93ac(0x1a2)](_0x1f93ac(0x1ca),_0x11fcfb);const _0x1d66a3=_0x11fcfb[_0x1f93ac(0x1ac)];let _0x455eae;switch(_0x11fcfb[_0x1f93ac(0x1bf)]){case'APPROVED':_0x455eae='PAID';break;case _0x1f93ac(0x1c7):_0x455eae='FAILED';break;default:_0x455eae=_0x1f93ac(0x196);break;}const _0x2a0237={'method':_0x11fcfb[_0x1f93ac(0x1d3)],'transactionId':_0x11fcfb['id']['toString']()};return _0x11fcfb[_0x1f93ac(0x1a4)]&&(_0x2a0237[_0x1f93ac(0x1a4)]=_0x11fcfb[_0x1f93ac(0x1a4)]),console['log'](_0x1f93ac(0x1a9)+_0x1d66a3+_0x1f93ac(0x1b5)+_0x455eae),{'paymentId':_0x1d66a3,'status':_0x455eae,'additionalInfo':_0x2a0237};}[a69_0x1fc830(0x1a3)](_0x1f320d,_0x9c5109){const _0x523efe=a69_0x1fc830;return!!(_0x1f320d['id']&&_0x1f320d[_0x523efe(0x1ac)]&&_0x1f320d[_0x523efe(0x1bf)]&&_0x1f320d[_0x523efe(0x1af)]===_0x523efe(0x1a1));}}exports[a69_0x1fc830(0x1c6)]=MaxParaService;