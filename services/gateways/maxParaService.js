'use strict';const a58_0x15664f=a58_0x21a9;function a58_0x21a9(_0xe62e40,_0x59642e){_0xe62e40=_0xe62e40-0x15f;const _0x5aa5d3=a58_0x5aa5();let _0x21a9ad=_0x5aa5d3[_0xe62e40];return _0x21a9ad;}function a58_0x5aa5(){const _0x51d21a=['catch','logResponse','maxpara-responses.log','__esModule','FAILED','amount','defineProperty','orderId','error','existsSync','logs','Failed\x20to\x20write\x20to\x20response\x20log\x20file:','üìä\x20MaxPara\x20webhook\x20processed:\x20','401','config','6599645wRLcvC','validateWebhookSignature','TrapayUK/1.0','path','status','includes','callbackUrl','Request\x20failed','currency','MaxPara\x20API\x20error:\x20','code','application/json','method','APPROVED','Unknown\x20error','maxpara-requests.log','__importDefault','toISOString','customerName','mkdirSync','9992eqhfCc','expire_date','processWebhook','MaxPara\x20authentication\x20failed','paymentId','üîÑ\x20Processing\x20MaxPara\x20webhook:','baseUrl','message','13439466DTnpVl','MaxPara\x20validation\x20error:\x20','2443teRGBf','üì§\x20MaxPara\x20API\x20request:','Failed\x20to\x20write\x20to\x20request\x20log\x20file:','cwd','500','json','1765608mUmBgD','stringify','token','PENDING','1096838EyaEFZ','HIDDEN','MaxPara\x20server\x20error','logRequest','4973955WgVuyu','DECLINED','POST','/api/deposit','default','\x20->\x20','join','appendFileSync','HTTP\x20','link','DEPOSIT','PAID','apiKey','MaxParaService','400','success','6813268ctaNlr','log','1rTLBiA'];a58_0x5aa5=function(){return _0x51d21a;};return a58_0x5aa5();}(function(_0x69fef3,_0x43df0f){const _0x2b7b9c=a58_0x21a9,_0x5b9d24=_0x69fef3();while(!![]){try{const _0x4965bc=-parseInt(_0x2b7b9c(0x19b))/0x1*(-parseInt(_0x2b7b9c(0x185))/0x2)+-parseInt(_0x2b7b9c(0x189))/0x3+parseInt(_0x2b7b9c(0x199))/0x4+-parseInt(_0x2b7b9c(0x1ab))/0x5+-parseInt(_0x2b7b9c(0x181))/0x6+-parseInt(_0x2b7b9c(0x17b))/0x7*(-parseInt(_0x2b7b9c(0x171))/0x8)+parseInt(_0x2b7b9c(0x179))/0x9;if(_0x4965bc===_0x43df0f)break;else _0x5b9d24['push'](_0x5b9d24['shift']());}catch(_0x16d4ed){_0x5b9d24['push'](_0x5b9d24['shift']());}}}(a58_0x5aa5,0xdddb9));var __importDefault=this&&this[a58_0x15664f(0x16d)]||function(_0x11c7b4){return _0x11c7b4&&_0x11c7b4['__esModule']?_0x11c7b4:{'default':_0x11c7b4};};Object[a58_0x15664f(0x1a2)](exports,a58_0x15664f(0x19f),{'value':!![]}),exports[a58_0x15664f(0x196)]=void 0x0;const fs_1=__importDefault(require('fs')),path_1=__importDefault(require(a58_0x15664f(0x160)));class MaxParaService{constructor(_0x1be7bb){const _0xe044e2=a58_0x15664f;this[_0xe044e2(0x1aa)]=_0x1be7bb;}[a58_0x15664f(0x188)](_0x5be1b3,_0x8359e9){const _0x10a719=a58_0x15664f,_0x5187f8=path_1[_0x10a719(0x18d)][_0x10a719(0x18f)](process[_0x10a719(0x17e)](),'logs'),_0x1eae1a=path_1['default']['join'](_0x5187f8,_0x10a719(0x16c));!fs_1[_0x10a719(0x18d)]['existsSync'](_0x5187f8)&&fs_1[_0x10a719(0x18d)][_0x10a719(0x170)](_0x5187f8,{'recursive':!![]});const _0xab33f4=new Date()[_0x10a719(0x16e)](),_0x110c39='['+_0xab33f4+']\x20'+_0x5be1b3+':\x20'+JSON[_0x10a719(0x182)](_0x8359e9)+'\x0a';try{fs_1[_0x10a719(0x18d)][_0x10a719(0x190)](_0x1eae1a,_0x110c39);}catch(_0x2a5f36){console[_0x10a719(0x1a4)](_0x10a719(0x17d),_0x2a5f36);}}['logResponse'](_0x43c89e,_0x2dc41e){const _0x13a7de=a58_0x15664f,_0x462d14=path_1[_0x13a7de(0x18d)][_0x13a7de(0x18f)](process[_0x13a7de(0x17e)](),_0x13a7de(0x1a6)),_0x5bcc5e=path_1[_0x13a7de(0x18d)][_0x13a7de(0x18f)](_0x462d14,_0x13a7de(0x19e));!fs_1[_0x13a7de(0x18d)][_0x13a7de(0x1a5)](_0x462d14)&&fs_1[_0x13a7de(0x18d)][_0x13a7de(0x170)](_0x462d14,{'recursive':!![]});const _0x3c3335=new Date()[_0x13a7de(0x16e)](),_0x2dd867='['+_0x3c3335+']\x20'+_0x43c89e+':\x20'+JSON[_0x13a7de(0x182)](_0x2dc41e)+'\x0a';try{fs_1[_0x13a7de(0x18d)][_0x13a7de(0x190)](_0x5bcc5e,_0x2dd867);}catch(_0x275f2d){console[_0x13a7de(0x1a4)](_0x13a7de(0x1a7),_0x275f2d);}}async['createDeposit'](_0x36cceb){const _0x5dd779=a58_0x15664f;console[_0x5dd779(0x19a)]('üè¶\x20Creating\x20MaxPara\x20deposit\x20for\x20'+_0x36cceb[_0x5dd779(0x1a1)]+'\x20'+_0x36cceb[_0x5dd779(0x165)]);try{const _0x34e6ce={'key':this['config'][_0x5dd779(0x195)],'username':_0x36cceb[_0x5dd779(0x16f)],'user_id':_0x36cceb[_0x5dd779(0x175)],'token':_0x36cceb[_0x5dd779(0x1a3)],'method':'fast','amount':_0x36cceb[_0x5dd779(0x1a1)],'callbackUrl':_0x36cceb[_0x5dd779(0x163)]};this['logRequest'](_0x5dd779(0x18c),{..._0x34e6ce,'key':'HIDDEN'}),console[_0x5dd779(0x19a)](_0x5dd779(0x17c),{..._0x34e6ce,'key':_0x5dd779(0x186)});const _0x2cc258=await fetch(this[_0x5dd779(0x1aa)][_0x5dd779(0x177)]+_0x5dd779(0x18c),{'method':_0x5dd779(0x18b),'headers':{'Content-Type':_0x5dd779(0x168),'User-Agent':_0x5dd779(0x15f)},'body':JSON[_0x5dd779(0x182)](_0x34e6ce)});if(!_0x2cc258['ok']){const _0x5bf3ec=await _0x2cc258['json']()[_0x5dd779(0x19c)](()=>({}));throw new Error(_0x5dd779(0x191)+_0x2cc258[_0x5dd779(0x161)]+':\x20'+(_0x5bf3ec[_0x5dd779(0x178)]||_0x5dd779(0x164)));}const _0x3c6fb1=await _0x2cc258[_0x5dd779(0x180)]();this[_0x5dd779(0x19d)]('/api/deposit',_0x3c6fb1),console[_0x5dd779(0x19a)]('üì•\x20MaxPara\x20API\x20response:',_0x3c6fb1);if(_0x3c6fb1[_0x5dd779(0x167)]!==0xc8||_0x3c6fb1[_0x5dd779(0x161)]!==_0x5dd779(0x198))throw new Error(_0x5dd779(0x166)+(_0x3c6fb1[_0x5dd779(0x178)]||_0x5dd779(0x16b)));return{'gateway_payment_id':_0x3c6fb1[_0x5dd779(0x183)],'payment_url':_0x3c6fb1[_0x5dd779(0x192)],'expires_at':_0x3c6fb1[_0x5dd779(0x172)]};}catch(_0x16d2c1){console[_0x5dd779(0x1a4)]('‚ùå\x20MaxPara\x20API\x20error:',_0x16d2c1[_0x5dd779(0x178)]);if(_0x16d2c1[_0x5dd779(0x178)]?.[_0x5dd779(0x162)](_0x5dd779(0x197)))throw new Error(_0x5dd779(0x17a)+_0x16d2c1['message']);else{if(_0x16d2c1[_0x5dd779(0x178)]?.['includes'](_0x5dd779(0x1a9)))throw new Error(_0x5dd779(0x174));else{if(_0x16d2c1[_0x5dd779(0x178)]?.[_0x5dd779(0x162)](_0x5dd779(0x17f)))throw new Error(_0x5dd779(0x187));else throw new Error(_0x5dd779(0x166)+_0x16d2c1[_0x5dd779(0x178)]);}}}}[a58_0x15664f(0x173)](_0x41893a){const _0x28a3db=a58_0x15664f;console['log'](_0x28a3db(0x176),_0x41893a);const _0x2a94d=_0x41893a[_0x28a3db(0x183)];let _0xa7b768;switch(_0x41893a[_0x28a3db(0x161)]){case _0x28a3db(0x16a):_0xa7b768=_0x28a3db(0x194);break;case _0x28a3db(0x18a):_0xa7b768=_0x28a3db(0x1a0);break;default:_0xa7b768=_0x28a3db(0x184);break;}const _0x136283={'method':_0x41893a[_0x28a3db(0x169)],'transactionId':_0x41893a['id']['toString']()};return _0x41893a['message']&&(_0x136283[_0x28a3db(0x178)]=_0x41893a[_0x28a3db(0x178)]),console[_0x28a3db(0x19a)](_0x28a3db(0x1a8)+_0x2a94d+_0x28a3db(0x18e)+_0xa7b768),{'paymentId':_0x2a94d,'status':_0xa7b768,'additionalInfo':_0x136283};}[a58_0x15664f(0x1ac)](_0x49af1a,_0x2a13f6){const _0x352636=a58_0x15664f;return!!(_0x49af1a['id']&&_0x49af1a[_0x352636(0x183)]&&_0x49af1a[_0x352636(0x161)]&&_0x49af1a['type']===_0x352636(0x193));}}exports[a58_0x15664f(0x196)]=MaxParaService;