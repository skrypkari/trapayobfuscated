'use strict';function a58_0x5de7(){const _0x6e46e7=['defineProperty','includes','catch','HTTP\x20','MaxPara\x20authentication\x20failed','3877983ospZNT','10Rrvjsm','MaxPara\x20API\x20error:\x20','callbackUrl','PAID','Failed\x20to\x20write\x20to\x20response\x20log\x20file:','currency','ðŸ“¤\x20MaxPara\x20API\x20request:','DECLINED','ðŸ¦\x20Creating\x20MaxPara\x20deposit\x20for\x20','815947MatmAx','1184246idCkIW','default','/api/deposit','toISOString','maxpara-requests.log','link','612195XXYoQe','6RNzFXv','TrapayUK/1.0','existsSync','customerName','json','appendFileSync','logs','300TzugxL','1848KEBxnX','token','ðŸ“Š\x20MaxPara\x20webhook\x20processed:\x20','Unknown\x20error','__importDefault','expire_date','logRequest','application/json','PENDING','processWebhook','1631430AivicD','path','MaxPara\x20validation\x20error:\x20','fast','MaxParaService','POST','MaxPara\x20server\x20error','join','createDeposit','401','method','baseUrl','orderId','status','âŒ\x20MaxPara\x20API\x20error:','maxpara-responses.log','code','error','FAILED','\x20->\x20','stringify','amount','paymentId','3085776GJnSTi','ðŸ”„\x20Processing\x20MaxPara\x20webhook:','logResponse','cwd','validateWebhookSignature','log','25949GFALSO','message','APPROVED','ðŸ“¥\x20MaxPara\x20API\x20response:','HIDDEN','__esModule','400','config','mkdirSync','2YBjeBT'];a58_0x5de7=function(){return _0x6e46e7;};return a58_0x5de7();}const a58_0x36e477=a58_0xa302;(function(_0x42b66b,_0x5bc005){const _0x2090ad=a58_0xa302,_0x5686dc=_0x42b66b();while(!![]){try{const _0x50a03f=-parseInt(_0x2090ad(0x1f8))/0x1+parseInt(_0x2090ad(0x1e7))/0x2*(-parseInt(_0x2090ad(0x1fe))/0x3)+-parseInt(_0x2090ad(0x1d8))/0x4+parseInt(_0x2090ad(0x211))/0x5*(-parseInt(_0x2090ad(0x1ff))/0x6)+-parseInt(_0x2090ad(0x1de))/0x7*(-parseInt(_0x2090ad(0x207))/0x8)+parseInt(_0x2090ad(0x1ed))/0x9*(parseInt(_0x2090ad(0x1ee))/0xa)+parseInt(_0x2090ad(0x1f7))/0xb*(parseInt(_0x2090ad(0x206))/0xc);if(_0x50a03f===_0x5bc005)break;else _0x5686dc['push'](_0x5686dc['shift']());}catch(_0x5ec80a){_0x5686dc['push'](_0x5686dc['shift']());}}}(a58_0x5de7,0xa00e4));function a58_0xa302(_0x3d0127,_0x254a89){_0x3d0127=_0x3d0127-0x1c8;const _0x5de7e3=a58_0x5de7();let _0xa30230=_0x5de7e3[_0x3d0127];return _0xa30230;}var __importDefault=this&&this[a58_0x36e477(0x20b)]||function(_0x31ab75){const _0x185eb5=a58_0x36e477;return _0x31ab75&&_0x31ab75[_0x185eb5(0x1e3)]?_0x31ab75:{'default':_0x31ab75};};Object[a58_0x36e477(0x1e8)](exports,'__esModule',{'value':!![]}),exports[a58_0x36e477(0x215)]=void 0x0;const fs_1=__importDefault(require('fs')),path_1=__importDefault(require(a58_0x36e477(0x212)));class MaxParaService{constructor(_0xc78c65){const _0x566c3c=a58_0x36e477;this[_0x566c3c(0x1e5)]=_0xc78c65;}[a58_0x36e477(0x20d)](_0x4d26ff,_0x32918d){const _0x203823=a58_0x36e477,_0x29ecd8=path_1[_0x203823(0x1f9)][_0x203823(0x1c8)](process['cwd'](),_0x203823(0x205)),_0x54b063=path_1['default']['join'](_0x29ecd8,_0x203823(0x1fc));!fs_1[_0x203823(0x1f9)]['existsSync'](_0x29ecd8)&&fs_1[_0x203823(0x1f9)][_0x203823(0x1e6)](_0x29ecd8,{'recursive':!![]});const _0x56a353=new Date()[_0x203823(0x1fb)](),_0x507b91='['+_0x56a353+']\x20'+_0x4d26ff+':\x20'+JSON[_0x203823(0x1d5)](_0x32918d)+'\x0a';try{fs_1[_0x203823(0x1f9)][_0x203823(0x204)](_0x54b063,_0x507b91);}catch(_0x2ae0c8){console[_0x203823(0x1d2)]('Failed\x20to\x20write\x20to\x20request\x20log\x20file:',_0x2ae0c8);}}[a58_0x36e477(0x1da)](_0x5e36f5,_0x308706){const _0x3492ed=a58_0x36e477,_0x3c6b75=path_1[_0x3492ed(0x1f9)][_0x3492ed(0x1c8)](process[_0x3492ed(0x1db)](),'logs'),_0x3fd19=path_1[_0x3492ed(0x1f9)]['join'](_0x3c6b75,_0x3492ed(0x1d0));!fs_1[_0x3492ed(0x1f9)][_0x3492ed(0x201)](_0x3c6b75)&&fs_1['default'][_0x3492ed(0x1e6)](_0x3c6b75,{'recursive':!![]});const _0x2ed6e7=new Date()[_0x3492ed(0x1fb)](),_0x1b0702='['+_0x2ed6e7+']\x20'+_0x5e36f5+':\x20'+JSON[_0x3492ed(0x1d5)](_0x308706)+'\x0a';try{fs_1[_0x3492ed(0x1f9)][_0x3492ed(0x204)](_0x3fd19,_0x1b0702);}catch(_0x3a542f){console[_0x3492ed(0x1d2)](_0x3492ed(0x1f2),_0x3a542f);}}async[a58_0x36e477(0x1c9)](_0x5ec1cb){const _0x28913f=a58_0x36e477;console['log'](_0x28913f(0x1f6)+_0x5ec1cb[_0x28913f(0x1d6)]+'\x20'+_0x5ec1cb[_0x28913f(0x1f3)]);try{const _0xd0f1d3={'key':this[_0x28913f(0x1e5)]['apiKey'],'username':_0x5ec1cb[_0x28913f(0x202)],'user_id':_0x5ec1cb[_0x28913f(0x1d7)],'token':_0x5ec1cb[_0x28913f(0x1cd)],'method':_0x28913f(0x214),'amount':_0x5ec1cb['amount'],'callbackUrl':_0x5ec1cb[_0x28913f(0x1f0)]};this['logRequest'](_0x28913f(0x1fa),{..._0xd0f1d3,'key':_0x28913f(0x1e2)}),console['log'](_0x28913f(0x1f4),{..._0xd0f1d3,'key':_0x28913f(0x1e2)});const _0xa5bcd3=await fetch(this[_0x28913f(0x1e5)][_0x28913f(0x1cc)]+_0x28913f(0x1fa),{'method':_0x28913f(0x216),'headers':{'Content-Type':_0x28913f(0x20e),'User-Agent':_0x28913f(0x200)},'body':JSON[_0x28913f(0x1d5)](_0xd0f1d3)});if(!_0xa5bcd3['ok']){const _0x1c7098=await _0xa5bcd3['json']()[_0x28913f(0x1ea)](()=>({}));throw new Error(_0x28913f(0x1eb)+_0xa5bcd3[_0x28913f(0x1ce)]+':\x20'+(_0x1c7098['message']||'Request\x20failed'));}const _0x31225a=await _0xa5bcd3[_0x28913f(0x203)]();this[_0x28913f(0x1da)](_0x28913f(0x1fa),_0x31225a),console[_0x28913f(0x1dd)](_0x28913f(0x1e1),_0x31225a);if(_0x31225a[_0x28913f(0x1d1)]!==0xc8||_0x31225a[_0x28913f(0x1ce)]!=='success')throw new Error(_0x28913f(0x1ef)+(_0x31225a[_0x28913f(0x1df)]||_0x28913f(0x20a)));return{'gateway_payment_id':_0x31225a[_0x28913f(0x208)],'payment_url':_0x31225a[_0x28913f(0x1fd)],'expires_at':_0x31225a[_0x28913f(0x20c)]};}catch(_0x56895d){console[_0x28913f(0x1d2)](_0x28913f(0x1cf),_0x56895d[_0x28913f(0x1df)]);if(_0x56895d[_0x28913f(0x1df)]?.[_0x28913f(0x1e9)](_0x28913f(0x1e4)))throw new Error(_0x28913f(0x213)+_0x56895d[_0x28913f(0x1df)]);else{if(_0x56895d[_0x28913f(0x1df)]?.[_0x28913f(0x1e9)](_0x28913f(0x1ca)))throw new Error(_0x28913f(0x1ec));else{if(_0x56895d[_0x28913f(0x1df)]?.[_0x28913f(0x1e9)]('500'))throw new Error(_0x28913f(0x217));else throw new Error(_0x28913f(0x1ef)+_0x56895d[_0x28913f(0x1df)]);}}}}[a58_0x36e477(0x210)](_0x179dea){const _0x560635=a58_0x36e477;console[_0x560635(0x1dd)](_0x560635(0x1d9),_0x179dea);const _0xa7b604=_0x179dea[_0x560635(0x208)];let _0x430afb;switch(_0x179dea[_0x560635(0x1ce)]){case _0x560635(0x1e0):_0x430afb=_0x560635(0x1f1);break;case _0x560635(0x1f5):_0x430afb=_0x560635(0x1d3);break;default:_0x430afb=_0x560635(0x20f);break;}const _0x35a5af={'method':_0x179dea[_0x560635(0x1cb)],'transactionId':_0x179dea['id']['toString']()};return _0x179dea[_0x560635(0x1df)]&&(_0x35a5af['message']=_0x179dea['message']),console[_0x560635(0x1dd)](_0x560635(0x209)+_0xa7b604+_0x560635(0x1d4)+_0x430afb),{'paymentId':_0xa7b604,'status':_0x430afb,'additionalInfo':_0x35a5af};}[a58_0x36e477(0x1dc)](_0xfc5324,_0x59e0c8){const _0x2e77c9=a58_0x36e477;return!!(_0xfc5324['id']&&_0xfc5324[_0x2e77c9(0x208)]&&_0xfc5324['status']&&_0xfc5324['type']==='DEPOSIT');}}exports['MaxParaService']=MaxParaService;