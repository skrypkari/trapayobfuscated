'use strict';function a61_0x2c48(_0x5e3907,_0x213e4c){_0x5e3907=_0x5e3907-0x126;const _0xa6230=a61_0xa623();let _0x2c488b=_0xa6230[_0x5e3907];return _0x2c488b;}const a61_0x2a7e1f=a61_0x2c48;(function(_0x21c167,_0x20a158){const _0x3d9cb2=a61_0x2c48,_0x2196ba=_0x21c167();while(!![]){try{const _0x4683f5=-parseInt(_0x3d9cb2(0x156))/0x1+-parseInt(_0x3d9cb2(0x144))/0x2+parseInt(_0x3d9cb2(0x158))/0x3*(-parseInt(_0x3d9cb2(0x136))/0x4)+parseInt(_0x3d9cb2(0x14e))/0x5+-parseInt(_0x3d9cb2(0x12d))/0x6+-parseInt(_0x3d9cb2(0x146))/0x7+-parseInt(_0x3d9cb2(0x168))/0x8*(-parseInt(_0x3d9cb2(0x13d))/0x9);if(_0x4683f5===_0x20a158)break;else _0x2196ba['push'](_0x2196ba['shift']());}catch(_0x5cbd87){_0x2196ba['push'](_0x2196ba['shift']());}}}(a61_0xa623,0x6ff86));var __importDefault=this&&this[a61_0x2a7e1f(0x161)]||function(_0x54395b){const _0x38e682=a61_0x2a7e1f;return _0x54395b&&_0x54395b[_0x38e682(0x165)]?_0x54395b:{'default':_0x54395b};};Object[a61_0x2a7e1f(0x150)](exports,'__esModule',{'value':!![]}),exports[a61_0x2a7e1f(0x141)]=void 0x0;const fs_1=__importDefault(require('fs')),path_1=__importDefault(require(a61_0x2a7e1f(0x13e)));class MaxParaService{constructor(_0x3ebf23){const _0xc264c2=a61_0x2a7e1f;this[_0xc264c2(0x12c)]=_0x3ebf23;}[a61_0x2a7e1f(0x12b)](_0x586405,_0x354127){const _0x4027c2=a61_0x2a7e1f,_0xd0b3da=path_1[_0x4027c2(0x139)][_0x4027c2(0x13a)](process[_0x4027c2(0x155)](),_0x4027c2(0x14b)),_0x44602e=path_1[_0x4027c2(0x139)][_0x4027c2(0x13a)](_0xd0b3da,_0x4027c2(0x162));!fs_1[_0x4027c2(0x139)][_0x4027c2(0x127)](_0xd0b3da)&&fs_1['default'][_0x4027c2(0x145)](_0xd0b3da,{'recursive':!![]});const _0x2b3764=new Date()[_0x4027c2(0x129)](),_0x60863='['+_0x2b3764+']\x20'+_0x586405+':\x20'+JSON[_0x4027c2(0x15e)](_0x354127)+'\x0a';try{fs_1['default'][_0x4027c2(0x16b)](_0x44602e,_0x60863);}catch(_0x5f67db){console[_0x4027c2(0x15f)](_0x4027c2(0x151),_0x5f67db);}}[a61_0x2a7e1f(0x14a)](_0x211b74,_0x4f7f35){const _0x1f4ade=a61_0x2a7e1f,_0x3a0f41=path_1[_0x1f4ade(0x139)][_0x1f4ade(0x13a)](process['cwd'](),_0x1f4ade(0x14b)),_0x4f87d5=path_1[_0x1f4ade(0x139)][_0x1f4ade(0x13a)](_0x3a0f41,_0x1f4ade(0x134));!fs_1[_0x1f4ade(0x139)][_0x1f4ade(0x127)](_0x3a0f41)&&fs_1['default'][_0x1f4ade(0x145)](_0x3a0f41,{'recursive':!![]});const _0x1332c6=new Date()['toISOString'](),_0x586acd='['+_0x1332c6+']\x20'+_0x211b74+':\x20'+JSON[_0x1f4ade(0x15e)](_0x4f7f35)+'\x0a';try{fs_1[_0x1f4ade(0x139)]['appendFileSync'](_0x4f87d5,_0x586acd);}catch(_0xd565a5){console[_0x1f4ade(0x15f)](_0x1f4ade(0x154),_0xd565a5);}}async[a61_0x2a7e1f(0x138)](_0xaa47a){const _0x909053=a61_0x2a7e1f;console[_0x909053(0x12f)]('üè¶\x20Creating\x20MaxPara\x20deposit\x20for\x20'+_0xaa47a[_0x909053(0x137)]+'\x20'+_0xaa47a[_0x909053(0x167)]);try{const _0xb9d73e={'key':this[_0x909053(0x12c)][_0x909053(0x13f)],'username':_0xaa47a['customerName'],'user_id':_0xaa47a['paymentId'],'token':_0xaa47a[_0x909053(0x128)],'method':_0x909053(0x16d),'amount':_0xaa47a[_0x909053(0x137)],'callbackUrl':_0xaa47a[_0x909053(0x16e)]};this[_0x909053(0x12b)](_0x909053(0x130),{..._0xb9d73e,'key':'HIDDEN'}),console[_0x909053(0x12f)](_0x909053(0x169),{..._0xb9d73e,'key':_0x909053(0x15a)});const _0x30db98=await fetch(this['config'][_0x909053(0x14c)]+_0x909053(0x130),{'method':_0x909053(0x126),'headers':{'Content-Type':'application/json','User-Agent':_0x909053(0x13b)},'body':JSON[_0x909053(0x15e)](_0xb9d73e)});if(!_0x30db98['ok']){const _0xa04c26=await _0x30db98[_0x909053(0x142)]()[_0x909053(0x140)](()=>({}));throw new Error(_0x909053(0x164)+_0x30db98[_0x909053(0x133)]+':\x20'+(_0xa04c26[_0x909053(0x163)]||_0x909053(0x14d)));}const _0x43cc9a=await _0x30db98[_0x909053(0x142)]();this[_0x909053(0x14a)](_0x909053(0x130),_0x43cc9a),console['log'](_0x909053(0x14f),_0x43cc9a);if(_0x43cc9a[_0x909053(0x148)]!==0xc8||_0x43cc9a[_0x909053(0x133)]!==_0x909053(0x166))throw new Error(_0x909053(0x15d)+(_0x43cc9a[_0x909053(0x163)]||_0x909053(0x13c)));return{'gateway_payment_id':_0x43cc9a[_0x909053(0x149)],'payment_url':_0x43cc9a[_0x909053(0x147)],'expires_at':_0x43cc9a[_0x909053(0x160)]};}catch(_0xdb7821){console[_0x909053(0x15f)](_0x909053(0x16c),_0xdb7821[_0x909053(0x163)]);if(_0xdb7821[_0x909053(0x163)]?.[_0x909053(0x132)](_0x909053(0x152)))throw new Error('MaxPara\x20validation\x20error:\x20'+_0xdb7821[_0x909053(0x163)]);else{if(_0xdb7821[_0x909053(0x163)]?.[_0x909053(0x132)](_0x909053(0x15c)))throw new Error('MaxPara\x20authentication\x20failed');else{if(_0xdb7821[_0x909053(0x163)]?.[_0x909053(0x132)](_0x909053(0x159)))throw new Error('MaxPara\x20server\x20error');else throw new Error(_0x909053(0x15d)+_0xdb7821[_0x909053(0x163)]);}}}}[a61_0x2a7e1f(0x16a)](_0x3c7c39){const _0x3d5f72=a61_0x2a7e1f;console['log'](_0x3d5f72(0x157),_0x3c7c39);const _0x175fc1=_0x3c7c39[_0x3d5f72(0x149)];let _0x20ef3c;switch(_0x3c7c39[_0x3d5f72(0x133)]){case'APPROVED':_0x20ef3c='PAID';break;case'DECLINED':_0x20ef3c=_0x3d5f72(0x131);break;default:_0x20ef3c=_0x3d5f72(0x15b);break;}const _0xef69d6={'method':_0x3c7c39[_0x3d5f72(0x135)],'transactionId':_0x3c7c39['id'][_0x3d5f72(0x153)]()};return _0x3c7c39[_0x3d5f72(0x163)]&&(_0xef69d6['message']=_0x3c7c39[_0x3d5f72(0x163)]),console[_0x3d5f72(0x12f)](_0x3d5f72(0x143)+_0x175fc1+'\x20->\x20'+_0x20ef3c),{'paymentId':_0x175fc1,'status':_0x20ef3c,'additionalInfo':_0xef69d6};}['validateWebhookSignature'](_0x4d65b5,_0x52166d){const _0x3f102c=a61_0x2a7e1f;return!!(_0x4d65b5['id']&&_0x4d65b5[_0x3f102c(0x149)]&&_0x4d65b5['status']&&_0x4d65b5[_0x3f102c(0x12e)]===_0x3f102c(0x12a));}}function a61_0xa623(){const _0x3575af=['existsSync','orderId','toISOString','DEPOSIT','logRequest','config','1322334dcXIXa','type','log','/api/deposit','FAILED','includes','status','maxpara-responses.log','method','232BPOhrY','amount','createDeposit','default','join','TrapayUK/1.0','Unknown\x20error','7194177qdumQe','path','apiKey','catch','MaxParaService','json','üìä\x20MaxPara\x20webhook\x20processed:\x20','1595996WhbqIS','mkdirSync','2141818hpZNcP','link','code','token','logResponse','logs','baseUrl','Request\x20failed','3023940oGFEXr','üì•\x20MaxPara\x20API\x20response:','defineProperty','Failed\x20to\x20write\x20to\x20request\x20log\x20file:','400','toString','Failed\x20to\x20write\x20to\x20response\x20log\x20file:','cwd','374741dcZwuy','üîÑ\x20Processing\x20MaxPara\x20webhook:','2367HMIegT','500','HIDDEN','PENDING','401','MaxPara\x20API\x20error:\x20','stringify','error','expire_date','__importDefault','maxpara-requests.log','message','HTTP\x20','__esModule','success','currency','16SKjqOQ','üì§\x20MaxPara\x20API\x20request:','processWebhook','appendFileSync','‚ùå\x20MaxPara\x20API\x20error:','fast','callbackUrl','POST'];a61_0xa623=function(){return _0x3575af;};return a61_0xa623();}exports['MaxParaService']=MaxParaService;