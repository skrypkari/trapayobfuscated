'use strict';const a58_0x58c956=a58_0x4662;function a58_0x4662(_0x5c0403,_0x24881d){_0x5c0403=_0x5c0403-0xf8;const _0x49dddd=a58_0x49dd();let _0x466217=_0x49dddd[_0x5c0403];return _0x466217;}(function(_0xf2ed8b,_0x278cd3){const _0x4b723b=a58_0x4662,_0x1c3624=_0xf2ed8b();while(!![]){try{const _0x37b726=parseInt(_0x4b723b(0x139))/0x1*(-parseInt(_0x4b723b(0x109))/0x2)+parseInt(_0x4b723b(0x116))/0x3*(parseInt(_0x4b723b(0x125))/0x4)+-parseInt(_0x4b723b(0x10d))/0x5+parseInt(_0x4b723b(0x11a))/0x6+parseInt(_0x4b723b(0x10c))/0x7+parseInt(_0x4b723b(0x114))/0x8+parseInt(_0x4b723b(0x10a))/0x9*(-parseInt(_0x4b723b(0x11b))/0xa);if(_0x37b726===_0x278cd3)break;else _0x1c3624['push'](_0x1c3624['shift']());}catch(_0x5a54a6){_0x1c3624['push'](_0x1c3624['shift']());}}}(a58_0x49dd,0xbc1a8));var __importDefault=this&&this[a58_0x58c956(0x11c)]||function(_0x4df7fa){const _0x4e4fce=a58_0x58c956;return _0x4df7fa&&_0x4df7fa[_0x4e4fce(0x122)]?_0x4df7fa:{'default':_0x4df7fa};};Object[a58_0x58c956(0x138)](exports,a58_0x58c956(0x122),{'value':!![]}),exports[a58_0x58c956(0x13b)]=void 0x0;const fs_1=__importDefault(require('fs')),path_1=__importDefault(require('path'));class MaxParaService{constructor(_0x5a1123){const _0x281639=a58_0x58c956;this[_0x281639(0x11e)]=_0x5a1123;}[a58_0x58c956(0x104)](_0x4aa5fb,_0xdf8b2e){const _0x4f87d7=a58_0x58c956,_0x5c332b=path_1['default'][_0x4f87d7(0x103)](process[_0x4f87d7(0x107)](),_0x4f87d7(0x10e)),_0x549b74=path_1['default'][_0x4f87d7(0x103)](_0x5c332b,'maxpara-requests.log');!fs_1['default'][_0x4f87d7(0x102)](_0x5c332b)&&fs_1['default'][_0x4f87d7(0x101)](_0x5c332b,{'recursive':!![]});const _0x2704ce=new Date()[_0x4f87d7(0xfc)](),_0x5786f5='['+_0x2704ce+']\x20'+_0x4aa5fb+':\x20'+JSON[_0x4f87d7(0x108)](_0xdf8b2e)+'\x0a';try{fs_1[_0x4f87d7(0x120)][_0x4f87d7(0x118)](_0x549b74,_0x5786f5);}catch(_0x38eb47){console[_0x4f87d7(0x115)](_0x4f87d7(0x127),_0x38eb47);}}['logResponse'](_0xa00b72,_0x5a0a64){const _0x21d43d=a58_0x58c956,_0xc6c406=path_1[_0x21d43d(0x120)][_0x21d43d(0x103)](process[_0x21d43d(0x107)](),'logs'),_0x5a940c=path_1[_0x21d43d(0x120)]['join'](_0xc6c406,'maxpara-responses.log');!fs_1[_0x21d43d(0x120)][_0x21d43d(0x102)](_0xc6c406)&&fs_1[_0x21d43d(0x120)][_0x21d43d(0x101)](_0xc6c406,{'recursive':!![]});const _0xc789ea=new Date()[_0x21d43d(0xfc)](),_0x2bf3ca='['+_0xc789ea+']\x20'+_0xa00b72+':\x20'+JSON[_0x21d43d(0x108)](_0x5a0a64)+'\x0a';try{fs_1[_0x21d43d(0x120)][_0x21d43d(0x118)](_0x5a940c,_0x2bf3ca);}catch(_0x54d3eb){console['error']('Failed\x20to\x20write\x20to\x20response\x20log\x20file:',_0x54d3eb);}}async['createDeposit'](_0x4427ed){const _0x5ad22d=a58_0x58c956;console[_0x5ad22d(0x133)](_0x5ad22d(0x124)+_0x4427ed[_0x5ad22d(0x126)]+'\x20'+_0x4427ed[_0x5ad22d(0x130)]);try{const _0x131e70={'key':this[_0x5ad22d(0x11e)][_0x5ad22d(0xfd)],'username':_0x4427ed[_0x5ad22d(0x11d)],'user_id':_0x4427ed[_0x5ad22d(0x123)],'token':_0x4427ed[_0x5ad22d(0x112)],'method':_0x5ad22d(0x12e),'amount':_0x4427ed[_0x5ad22d(0x126)],'callbackUrl':_0x4427ed[_0x5ad22d(0x110)]};this[_0x5ad22d(0x104)](_0x5ad22d(0x10f),{..._0x131e70,'key':_0x5ad22d(0x12d)}),console[_0x5ad22d(0x133)](_0x5ad22d(0xf8),{..._0x131e70,'key':_0x5ad22d(0x12d)});const _0x11c1f2=await fetch(this[_0x5ad22d(0x11e)][_0x5ad22d(0x119)]+_0x5ad22d(0x10f),{'method':'POST','headers':{'Content-Type':'application/json','User-Agent':_0x5ad22d(0x129)},'body':JSON[_0x5ad22d(0x108)](_0x131e70)});if(!_0x11c1f2['ok']){const _0x5d7e4c=await _0x11c1f2['json']()[_0x5ad22d(0x117)](()=>({}));throw new Error('HTTP\x20'+_0x11c1f2[_0x5ad22d(0x137)]+':\x20'+(_0x5d7e4c[_0x5ad22d(0x12b)]||_0x5ad22d(0x106)));}const _0x4627d6=await _0x11c1f2[_0x5ad22d(0x128)]();this[_0x5ad22d(0x111)](_0x5ad22d(0x10f),_0x4627d6),console[_0x5ad22d(0x133)](_0x5ad22d(0x105),_0x4627d6);if(_0x4627d6[_0x5ad22d(0x121)]!==0xc8||_0x4627d6[_0x5ad22d(0x137)]!==_0x5ad22d(0x113))throw new Error(_0x5ad22d(0x134)+(_0x4627d6['message']||_0x5ad22d(0x13c)));return{'gateway_payment_id':_0x4627d6[_0x5ad22d(0x12c)],'payment_url':_0x4627d6[_0x5ad22d(0xf9)],'expires_at':_0x4627d6[_0x5ad22d(0x10b)]};}catch(_0x54f3e5){console[_0x5ad22d(0x115)](_0x5ad22d(0x100),_0x54f3e5[_0x5ad22d(0x12b)]);if(_0x54f3e5['message']?.[_0x5ad22d(0x132)](_0x5ad22d(0x13f)))throw new Error(_0x5ad22d(0x12f)+_0x54f3e5[_0x5ad22d(0x12b)]);else{if(_0x54f3e5[_0x5ad22d(0x12b)]?.[_0x5ad22d(0x132)](_0x5ad22d(0x12a)))throw new Error(_0x5ad22d(0x11f));else{if(_0x54f3e5[_0x5ad22d(0x12b)]?.[_0x5ad22d(0x132)](_0x5ad22d(0xfe)))throw new Error('MaxPara\x20server\x20error');else throw new Error(_0x5ad22d(0x134)+_0x54f3e5['message']);}}}}['processWebhook'](_0x1bbe52){const _0xe88bf2=a58_0x58c956;console[_0xe88bf2(0x133)](_0xe88bf2(0x135),_0x1bbe52);const _0x262c0b=_0x1bbe52[_0xe88bf2(0x12c)];let _0x1fbff5;switch(_0x1bbe52[_0xe88bf2(0x137)]){case _0xe88bf2(0x13e):_0x1fbff5='PAID';break;case _0xe88bf2(0x13a):_0x1fbff5='FAILED';break;default:_0x1fbff5=_0xe88bf2(0x136);break;}const _0x1bcd39={'method':_0x1bbe52[_0xe88bf2(0x131)],'transactionId':_0x1bbe52['id'][_0xe88bf2(0xff)]()};return _0x1bbe52[_0xe88bf2(0x12b)]&&(_0x1bcd39['message']=_0x1bbe52[_0xe88bf2(0x12b)]),console[_0xe88bf2(0x133)](_0xe88bf2(0xfa)+_0x262c0b+'\x20->\x20'+_0x1fbff5),{'paymentId':_0x262c0b,'status':_0x1fbff5,'additionalInfo':_0x1bcd39};}[a58_0x58c956(0xfb)](_0x267e6d,_0x3dee80){const _0xdc780f=a58_0x58c956;return!!(_0x267e6d['id']&&_0x267e6d[_0xdc780f(0x12c)]&&_0x267e6d[_0xdc780f(0x137)]&&_0x267e6d[_0xdc780f(0x13d)]==='DEPOSIT');}}function a58_0x49dd(){const _0x2e52b4=['500','toString','‚ùå\x20MaxPara\x20API\x20error:','mkdirSync','existsSync','join','logRequest','üì•\x20MaxPara\x20API\x20response:','Request\x20failed','cwd','stringify','2XvtiTe','9GLYimm','expire_date','8375892UFtTtR','163830UQGimL','logs','/api/deposit','callbackUrl','logResponse','orderId','success','9985392xjlxrF','error','27FGVACh','catch','appendFileSync','baseUrl','1621236ZoXGUn','11672870ZNVFXG','__importDefault','customerName','config','MaxPara\x20authentication\x20failed','default','code','__esModule','paymentId','üè¶\x20Creating\x20MaxPara\x20deposit\x20for\x20','200916JYNQGR','amount','Failed\x20to\x20write\x20to\x20request\x20log\x20file:','json','TrapayUK/1.0','401','message','token','HIDDEN','fast','MaxPara\x20validation\x20error:\x20','currency','method','includes','log','MaxPara\x20API\x20error:\x20','üîÑ\x20Processing\x20MaxPara\x20webhook:','PENDING','status','defineProperty','1196472YuYrem','DECLINED','MaxParaService','Unknown\x20error','type','APPROVED','400','üì§\x20MaxPara\x20API\x20request:','link','üìä\x20MaxPara\x20webhook\x20processed:\x20','validateWebhookSignature','toISOString','apiKey'];a58_0x49dd=function(){return _0x2e52b4;};return a58_0x49dd();}exports['MaxParaService']=MaxParaService;