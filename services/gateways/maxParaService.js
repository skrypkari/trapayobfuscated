'use strict';const a61_0x242769=a61_0x9b3f;(function(_0x1a7138,_0x41f65d){const _0x5b2a21=a61_0x9b3f,_0xbd2285=_0x1a7138();while(!![]){try{const _0x3e5eec=parseInt(_0x5b2a21(0xad))/0x1+parseInt(_0x5b2a21(0xde))/0x2+-parseInt(_0x5b2a21(0xe9))/0x3+parseInt(_0x5b2a21(0xd7))/0x4+-parseInt(_0x5b2a21(0xd2))/0x5+-parseInt(_0x5b2a21(0xed))/0x6+parseInt(_0x5b2a21(0xc0))/0x7*(-parseInt(_0x5b2a21(0xbb))/0x8);if(_0x3e5eec===_0x41f65d)break;else _0xbd2285['push'](_0xbd2285['shift']());}catch(_0x44c783){_0xbd2285['push'](_0xbd2285['shift']());}}}(a61_0x5201,0xb9c88));function a61_0x5201(){const _0x203ec3=['log','amount','callbackUrl','application/json','json','maxpara-requests.log','Failed\x20to\x20write\x20to\x20response\x20log\x20file:','cwd','248QafBfU','paymentId','fast','toISOString','stringify','58975oAnYtX','DEPOSIT','MaxPara\x20API\x20error:\x20','path','apiKey','FAILED','ðŸ“Š\x20MaxPara\x20webhook\x20processed:\x20','baseUrl','validateWebhookSignature','config','join','orderId','APPROVED','customerName','currency','link','logs','MaxPara\x20authentication\x20failed','1951190BYZARj','default','includes','500','HIDDEN','4126904bQnQhv','PENDING','POST','\x20->\x20','logRequest','401','ðŸ“¥\x20MaxPara\x20API\x20response:','1375770nrVPrB','Failed\x20to\x20write\x20to\x20request\x20log\x20file:','MaxParaService','maxpara-responses.log','âŒ\x20MaxPara\x20API\x20error:','type','PAID','code','method','error','existsSync','978603UfNmJo','logResponse','MaxPara\x20validation\x20error:\x20','message','4502658sdKRvo','/api/deposit','400','__esModule','status','appendFileSync','769414WmMxIc','token','defineProperty','ðŸ”„\x20Processing\x20MaxPara\x20webhook:','Request\x20failed','processWebhook'];a61_0x5201=function(){return _0x203ec3;};return a61_0x5201();}function a61_0x9b3f(_0x26a527,_0x4689ab){_0x26a527=_0x26a527-0xab;const _0x5201f3=a61_0x5201();let _0x9b3f68=_0x5201f3[_0x26a527];return _0x9b3f68;}var __importDefault=this&&this['__importDefault']||function(_0x3fba69){const _0x57a530=a61_0x9b3f;return _0x3fba69&&_0x3fba69[_0x57a530(0xf0)]?_0x3fba69:{'default':_0x3fba69};};Object[a61_0x242769(0xaf)](exports,a61_0x242769(0xf0),{'value':!![]}),exports[a61_0x242769(0xe0)]=void 0x0;const fs_1=__importDefault(require('fs')),path_1=__importDefault(require(a61_0x242769(0xc3)));class MaxParaService{constructor(_0x7f7982){const _0x314061=a61_0x242769;this[_0x314061(0xc9)]=_0x7f7982;}[a61_0x242769(0xdb)](_0x5e9cbc,_0x203b4f){const _0x3dfd3e=a61_0x242769,_0xe0de35=path_1['default'][_0x3dfd3e(0xca)](process[_0x3dfd3e(0xba)](),_0x3dfd3e(0xd0)),_0x4e6722=path_1[_0x3dfd3e(0xd3)]['join'](_0xe0de35,_0x3dfd3e(0xb8));!fs_1[_0x3dfd3e(0xd3)][_0x3dfd3e(0xe8)](_0xe0de35)&&fs_1[_0x3dfd3e(0xd3)]['mkdirSync'](_0xe0de35,{'recursive':!![]});const _0x1c42b7=new Date()[_0x3dfd3e(0xbe)](),_0x2f0f7c='['+_0x1c42b7+']\x20'+_0x5e9cbc+':\x20'+JSON[_0x3dfd3e(0xbf)](_0x203b4f)+'\x0a';try{fs_1[_0x3dfd3e(0xd3)][_0x3dfd3e(0xac)](_0x4e6722,_0x2f0f7c);}catch(_0x28cc08){console[_0x3dfd3e(0xe7)](_0x3dfd3e(0xdf),_0x28cc08);}}[a61_0x242769(0xea)](_0x5dcf59,_0x2c871d){const _0x33b7f6=a61_0x242769,_0x18563a=path_1['default'][_0x33b7f6(0xca)](process[_0x33b7f6(0xba)](),_0x33b7f6(0xd0)),_0x4bbde7=path_1[_0x33b7f6(0xd3)]['join'](_0x18563a,_0x33b7f6(0xe1));!fs_1[_0x33b7f6(0xd3)]['existsSync'](_0x18563a)&&fs_1[_0x33b7f6(0xd3)]['mkdirSync'](_0x18563a,{'recursive':!![]});const _0x471dd5=new Date()[_0x33b7f6(0xbe)](),_0x32e862='['+_0x471dd5+']\x20'+_0x5dcf59+':\x20'+JSON[_0x33b7f6(0xbf)](_0x2c871d)+'\x0a';try{fs_1[_0x33b7f6(0xd3)][_0x33b7f6(0xac)](_0x4bbde7,_0x32e862);}catch(_0xb7014c){console[_0x33b7f6(0xe7)](_0x33b7f6(0xb9),_0xb7014c);}}async['createDeposit'](_0x53a6b6){const _0x41f25c=a61_0x242769;console[_0x41f25c(0xb3)]('ðŸ¦\x20Creating\x20MaxPara\x20deposit\x20for\x20'+_0x53a6b6[_0x41f25c(0xb4)]+'\x20'+_0x53a6b6[_0x41f25c(0xce)]);try{const _0x5e597f={'key':this['config'][_0x41f25c(0xc4)],'username':_0x53a6b6[_0x41f25c(0xcd)],'user_id':_0x53a6b6[_0x41f25c(0xbc)],'token':_0x53a6b6[_0x41f25c(0xcb)],'method':_0x41f25c(0xbd),'amount':_0x53a6b6[_0x41f25c(0xb4)],'callbackUrl':_0x53a6b6[_0x41f25c(0xb5)]};this[_0x41f25c(0xdb)](_0x41f25c(0xee),{..._0x5e597f,'key':_0x41f25c(0xd6)}),console[_0x41f25c(0xb3)]('ðŸ“¤\x20MaxPara\x20API\x20request:',{..._0x5e597f,'key':_0x41f25c(0xd6)});const _0x3aa6ad=await fetch(this[_0x41f25c(0xc9)][_0x41f25c(0xc7)]+'/api/deposit',{'method':_0x41f25c(0xd9),'headers':{'Content-Type':_0x41f25c(0xb6),'User-Agent':'TrapayUK/1.0'},'body':JSON['stringify'](_0x5e597f)});if(!_0x3aa6ad['ok']){const _0x2853e7=await _0x3aa6ad[_0x41f25c(0xb7)]()['catch'](()=>({}));throw new Error('HTTP\x20'+_0x3aa6ad[_0x41f25c(0xab)]+':\x20'+(_0x2853e7[_0x41f25c(0xec)]||_0x41f25c(0xb1)));}const _0x3288fb=await _0x3aa6ad[_0x41f25c(0xb7)]();this[_0x41f25c(0xea)](_0x41f25c(0xee),_0x3288fb),console[_0x41f25c(0xb3)](_0x41f25c(0xdd),_0x3288fb);if(_0x3288fb[_0x41f25c(0xe5)]!==0xc8||_0x3288fb[_0x41f25c(0xab)]!=='success')throw new Error('MaxPara\x20API\x20error:\x20'+(_0x3288fb[_0x41f25c(0xec)]||'Unknown\x20error'));return{'gateway_payment_id':_0x3288fb['token'],'payment_url':_0x3288fb[_0x41f25c(0xcf)],'expires_at':_0x3288fb['expire_date']};}catch(_0x5bb614){console[_0x41f25c(0xe7)](_0x41f25c(0xe2),_0x5bb614[_0x41f25c(0xec)]);if(_0x5bb614[_0x41f25c(0xec)]?.[_0x41f25c(0xd4)](_0x41f25c(0xef)))throw new Error(_0x41f25c(0xeb)+_0x5bb614[_0x41f25c(0xec)]);else{if(_0x5bb614[_0x41f25c(0xec)]?.[_0x41f25c(0xd4)](_0x41f25c(0xdc)))throw new Error(_0x41f25c(0xd1));else{if(_0x5bb614[_0x41f25c(0xec)]?.['includes'](_0x41f25c(0xd5)))throw new Error('MaxPara\x20server\x20error');else throw new Error(_0x41f25c(0xc2)+_0x5bb614['message']);}}}}[a61_0x242769(0xb2)](_0x4534fc){const _0x52847b=a61_0x242769;console[_0x52847b(0xb3)](_0x52847b(0xb0),_0x4534fc);const _0x2fd8ad=_0x4534fc[_0x52847b(0xae)];let _0x23e27;switch(_0x4534fc[_0x52847b(0xab)]){case _0x52847b(0xcc):_0x23e27=_0x52847b(0xe4);break;case'DECLINED':_0x23e27=_0x52847b(0xc5);break;default:_0x23e27=_0x52847b(0xd8);break;}const _0x4c7451={'method':_0x4534fc[_0x52847b(0xe6)],'transactionId':_0x4534fc['id']['toString']()};return _0x4534fc['message']&&(_0x4c7451[_0x52847b(0xec)]=_0x4534fc[_0x52847b(0xec)]),console[_0x52847b(0xb3)](_0x52847b(0xc6)+_0x2fd8ad+_0x52847b(0xda)+_0x23e27),{'paymentId':_0x2fd8ad,'status':_0x23e27,'additionalInfo':_0x4c7451};}[a61_0x242769(0xc8)](_0x417232,_0x101da8){const _0xd6c91a=a61_0x242769;return!!(_0x417232['id']&&_0x417232[_0xd6c91a(0xae)]&&_0x417232['status']&&_0x417232[_0xd6c91a(0xe3)]===_0xd6c91a(0xc1));}}exports[a61_0x242769(0xe0)]=MaxParaService;