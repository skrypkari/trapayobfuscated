'use strict';function a63_0x3daa(_0xcc42e7,_0x350d2e){_0xcc42e7=_0xcc42e7-0x1c6;const _0x21c149=a63_0x21c1();let _0x3daa00=_0x21c149[_0xcc42e7];return _0x3daa00;}const a63_0x376c94=a63_0x3daa;function a63_0x21c1(){const _0xeffd47=['callbackUrl','Request\x20failed','includes','processWebhook','APPROVED','/api/deposit','maxpara-requests.log','stringify','5226jnFBwz','log','token','HTTP\x20','400','amount','logRequest','catch','currency','method','MaxParaService','401','352bVUqYw','expire_date','status','createDeposit','baseUrl','config','paymentId','defineProperty','customerName','code','71673QwvDRs','Unknown\x20error','1241989rfzBki','path','application/json','appendFileSync','ðŸ“¤\x20MaxPara\x20API\x20request:','existsSync','error','MaxPara\x20authentication\x20failed','HIDDEN','apiKey','message','default','success','mkdirSync','cwd','logResponse','toISOString','type','6364128IXWrMn','logs','15ZJeafo','Failed\x20to\x20write\x20to\x20response\x20log\x20file:','âŒ\x20MaxPara\x20API\x20error:','MaxPara\x20API\x20error:\x20','validateWebhookSignature','ðŸ”„\x20Processing\x20MaxPara\x20webhook:','maxpara-responses.log','MaxPara\x20server\x20error','5004360LQoyNQ','337337gTkbfv','join','json','341204GSDOvx','PENDING','ðŸ“¥\x20MaxPara\x20API\x20response:','DECLINED','PAID','toString','430yHZSGU','822tnnUNe'];a63_0x21c1=function(){return _0xeffd47;};return a63_0x21c1();}(function(_0x183df5,_0x5ad306){const _0x684e98=a63_0x3daa,_0x59bdc5=_0x183df5();while(!![]){try{const _0x1a0efc=parseInt(_0x684e98(0x1df))/0x1+-parseInt(_0x684e98(0x1c7))/0x2*(parseInt(_0x684e98(0x206))/0x3)+parseInt(_0x684e98(0x1ff))/0x4*(parseInt(_0x684e98(0x1f3))/0x5)+parseInt(_0x684e98(0x1f1))/0x6+parseInt(_0x684e98(0x1dd))/0x7*(-parseInt(_0x684e98(0x1d3))/0x8)+parseInt(_0x684e98(0x1fb))/0x9+-parseInt(_0x684e98(0x205))/0xa*(parseInt(_0x684e98(0x1fc))/0xb);if(_0x1a0efc===_0x5ad306)break;else _0x59bdc5['push'](_0x59bdc5['shift']());}catch(_0x1fc12d){_0x59bdc5['push'](_0x59bdc5['shift']());}}}(a63_0x21c1,0x99ad5));var __importDefault=this&&this['__importDefault']||function(_0x2e32a2){return _0x2e32a2&&_0x2e32a2['__esModule']?_0x2e32a2:{'default':_0x2e32a2};};Object[a63_0x376c94(0x1da)](exports,'__esModule',{'value':!![]}),exports[a63_0x376c94(0x1d1)]=void 0x0;const fs_1=__importDefault(require('fs')),path_1=__importDefault(require(a63_0x376c94(0x1e0)));class MaxParaService{constructor(_0x377f16){const _0x55d3a6=a63_0x376c94;this[_0x55d3a6(0x1d8)]=_0x377f16;}[a63_0x376c94(0x1cd)](_0x4b7541,_0x589462){const _0x5ce7b3=a63_0x376c94,_0x25dcbe=path_1[_0x5ce7b3(0x1ea)]['join'](process[_0x5ce7b3(0x1ed)](),_0x5ce7b3(0x1f2)),_0x4d03fb=path_1[_0x5ce7b3(0x1ea)][_0x5ce7b3(0x1fd)](_0x25dcbe,_0x5ce7b3(0x20d));!fs_1[_0x5ce7b3(0x1ea)][_0x5ce7b3(0x1e4)](_0x25dcbe)&&fs_1[_0x5ce7b3(0x1ea)][_0x5ce7b3(0x1ec)](_0x25dcbe,{'recursive':!![]});const _0x2ee5dd=new Date()[_0x5ce7b3(0x1ef)](),_0xc7432='['+_0x2ee5dd+']\x20'+_0x4b7541+':\x20'+JSON[_0x5ce7b3(0x1c6)](_0x589462)+'\x0a';try{fs_1[_0x5ce7b3(0x1ea)][_0x5ce7b3(0x1e2)](_0x4d03fb,_0xc7432);}catch(_0x386d23){console['error']('Failed\x20to\x20write\x20to\x20request\x20log\x20file:',_0x386d23);}}[a63_0x376c94(0x1ee)](_0x58990c,_0x596161){const _0x5e9f6d=a63_0x376c94,_0x5ea1b5=path_1[_0x5e9f6d(0x1ea)][_0x5e9f6d(0x1fd)](process[_0x5e9f6d(0x1ed)](),_0x5e9f6d(0x1f2)),_0x11b61a=path_1[_0x5e9f6d(0x1ea)][_0x5e9f6d(0x1fd)](_0x5ea1b5,_0x5e9f6d(0x1f9));!fs_1['default'][_0x5e9f6d(0x1e4)](_0x5ea1b5)&&fs_1['default']['mkdirSync'](_0x5ea1b5,{'recursive':!![]});const _0x491400=new Date()[_0x5e9f6d(0x1ef)](),_0x26a05a='['+_0x491400+']\x20'+_0x58990c+':\x20'+JSON['stringify'](_0x596161)+'\x0a';try{fs_1[_0x5e9f6d(0x1ea)][_0x5e9f6d(0x1e2)](_0x11b61a,_0x26a05a);}catch(_0x54bf46){console[_0x5e9f6d(0x1e5)](_0x5e9f6d(0x1f4),_0x54bf46);}}async[a63_0x376c94(0x1d6)](_0x20a668){const _0x3c05fb=a63_0x376c94;console['log']('ðŸ¦\x20Creating\x20MaxPara\x20deposit\x20for\x20'+_0x20a668[_0x3c05fb(0x1cc)]+'\x20'+_0x20a668[_0x3c05fb(0x1cf)]);try{const _0x43d968={'key':this[_0x3c05fb(0x1d8)][_0x3c05fb(0x1e8)],'username':_0x20a668[_0x3c05fb(0x1db)],'user_id':_0x20a668[_0x3c05fb(0x1d9)],'token':_0x20a668['orderId'],'method':'fast','amount':_0x20a668[_0x3c05fb(0x1cc)],'callbackUrl':_0x20a668[_0x3c05fb(0x207)]};this[_0x3c05fb(0x1cd)](_0x3c05fb(0x20c),{..._0x43d968,'key':_0x3c05fb(0x1e7)}),console['log'](_0x3c05fb(0x1e3),{..._0x43d968,'key':_0x3c05fb(0x1e7)});const _0x366eb8=await fetch(this['config'][_0x3c05fb(0x1d7)]+_0x3c05fb(0x20c),{'method':'POST','headers':{'Content-Type':_0x3c05fb(0x1e1),'User-Agent':'TrapayUK/1.0'},'body':JSON[_0x3c05fb(0x1c6)](_0x43d968)});if(!_0x366eb8['ok']){const _0x1b6e8c=await _0x366eb8[_0x3c05fb(0x1fe)]()[_0x3c05fb(0x1ce)](()=>({}));throw new Error(_0x3c05fb(0x1ca)+_0x366eb8[_0x3c05fb(0x1d5)]+':\x20'+(_0x1b6e8c[_0x3c05fb(0x1e9)]||_0x3c05fb(0x208)));}const _0x2d2084=await _0x366eb8[_0x3c05fb(0x1fe)]();this[_0x3c05fb(0x1ee)](_0x3c05fb(0x20c),_0x2d2084),console[_0x3c05fb(0x1c8)](_0x3c05fb(0x201),_0x2d2084);if(_0x2d2084[_0x3c05fb(0x1dc)]!==0xc8||_0x2d2084[_0x3c05fb(0x1d5)]!==_0x3c05fb(0x1eb))throw new Error(_0x3c05fb(0x1f6)+(_0x2d2084['message']||_0x3c05fb(0x1de)));return{'gateway_payment_id':_0x2d2084[_0x3c05fb(0x1c9)],'payment_url':_0x2d2084['link'],'expires_at':_0x2d2084[_0x3c05fb(0x1d4)]};}catch(_0x51081b){console[_0x3c05fb(0x1e5)](_0x3c05fb(0x1f5),_0x51081b[_0x3c05fb(0x1e9)]);if(_0x51081b[_0x3c05fb(0x1e9)]?.[_0x3c05fb(0x209)](_0x3c05fb(0x1cb)))throw new Error('MaxPara\x20validation\x20error:\x20'+_0x51081b[_0x3c05fb(0x1e9)]);else{if(_0x51081b[_0x3c05fb(0x1e9)]?.[_0x3c05fb(0x209)](_0x3c05fb(0x1d2)))throw new Error(_0x3c05fb(0x1e6));else{if(_0x51081b[_0x3c05fb(0x1e9)]?.['includes']('500'))throw new Error(_0x3c05fb(0x1fa));else throw new Error(_0x3c05fb(0x1f6)+_0x51081b[_0x3c05fb(0x1e9)]);}}}}[a63_0x376c94(0x20a)](_0x3be884){const _0x4b2744=a63_0x376c94;console[_0x4b2744(0x1c8)](_0x4b2744(0x1f8),_0x3be884);const _0x5a86e9=_0x3be884[_0x4b2744(0x1c9)];let _0x1cce68;switch(_0x3be884['status']){case _0x4b2744(0x20b):_0x1cce68=_0x4b2744(0x203);break;case _0x4b2744(0x202):_0x1cce68='FAILED';break;default:_0x1cce68=_0x4b2744(0x200);break;}const _0x381bc7={'method':_0x3be884[_0x4b2744(0x1d0)],'transactionId':_0x3be884['id'][_0x4b2744(0x204)]()};return _0x3be884[_0x4b2744(0x1e9)]&&(_0x381bc7[_0x4b2744(0x1e9)]=_0x3be884[_0x4b2744(0x1e9)]),console[_0x4b2744(0x1c8)]('ðŸ“Š\x20MaxPara\x20webhook\x20processed:\x20'+_0x5a86e9+'\x20->\x20'+_0x1cce68),{'paymentId':_0x5a86e9,'status':_0x1cce68,'additionalInfo':_0x381bc7};}[a63_0x376c94(0x1f7)](_0x1fe2db,_0x3da496){const _0x4870db=a63_0x376c94;return!!(_0x1fe2db['id']&&_0x1fe2db['token']&&_0x1fe2db['status']&&_0x1fe2db[_0x4870db(0x1f0)]==='DEPOSIT');}}exports[a63_0x376c94(0x1d1)]=MaxParaService;