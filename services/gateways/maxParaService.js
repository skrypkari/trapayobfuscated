'use strict';function a63_0x1409(_0x12e3fb,_0x4c6614){_0x12e3fb=_0x12e3fb-0x119;const _0xb25ef8=a63_0xb25e();let _0x1409b2=_0xb25ef8[_0x12e3fb];return _0x1409b2;}const a63_0x4793e3=a63_0x1409;(function(_0xb1f1be,_0x4e76e1){const _0x143fcc=a63_0x1409,_0x2bf468=_0xb1f1be();while(!![]){try{const _0x53e332=parseInt(_0x143fcc(0x138))/0x1*(parseInt(_0x143fcc(0x11d))/0x2)+parseInt(_0x143fcc(0x15a))/0x3*(-parseInt(_0x143fcc(0x14c))/0x4)+parseInt(_0x143fcc(0x14e))/0x5*(parseInt(_0x143fcc(0x13a))/0x6)+parseInt(_0x143fcc(0x13f))/0x7+-parseInt(_0x143fcc(0x143))/0x8+-parseInt(_0x143fcc(0x122))/0x9*(-parseInt(_0x143fcc(0x12a))/0xa)+parseInt(_0x143fcc(0x137))/0xb*(parseInt(_0x143fcc(0x14d))/0xc);if(_0x53e332===_0x4e76e1)break;else _0x2bf468['push'](_0x2bf468['shift']());}catch(_0x53b0a2){_0x2bf468['push'](_0x2bf468['shift']());}}}(a63_0xb25e,0xe1c3e));var __importDefault=this&&this[a63_0x4793e3(0x130)]||function(_0x4369e7){const _0x515e90=a63_0x4793e3;return _0x4369e7&&_0x4369e7[_0x515e90(0x160)]?_0x4369e7:{'default':_0x4369e7};};Object[a63_0x4793e3(0x150)](exports,a63_0x4793e3(0x160),{'value':!![]}),exports[a63_0x4793e3(0x126)]=void 0x0;const fs_1=__importDefault(require('fs')),path_1=__importDefault(require('path'));class MaxParaService{constructor(_0x51b1b0){const _0x2af806=a63_0x4793e3;this[_0x2af806(0x12e)]=_0x51b1b0;}[a63_0x4793e3(0x156)](_0x44b99e,_0xde978a){const _0x3e3305=a63_0x4793e3,_0x3bda86=path_1[_0x3e3305(0x11a)]['join'](process['cwd'](),'logs'),_0x1e09f8=path_1[_0x3e3305(0x11a)]['join'](_0x3bda86,_0x3e3305(0x131));!fs_1[_0x3e3305(0x11a)][_0x3e3305(0x132)](_0x3bda86)&&fs_1[_0x3e3305(0x11a)][_0x3e3305(0x127)](_0x3bda86,{'recursive':!![]});const _0x21e083=new Date()[_0x3e3305(0x140)](),_0xcfeaa5='['+_0x21e083+']\x20'+_0x44b99e+':\x20'+JSON['stringify'](_0xde978a)+'\x0a';try{fs_1['default']['appendFileSync'](_0x1e09f8,_0xcfeaa5);}catch(_0x331a18){console[_0x3e3305(0x161)](_0x3e3305(0x158),_0x331a18);}}[a63_0x4793e3(0x157)](_0x53d44e,_0x1f6f4c){const _0x367dd2=a63_0x4793e3,_0x5ae7a6=path_1[_0x367dd2(0x11a)][_0x367dd2(0x14f)](process[_0x367dd2(0x121)](),_0x367dd2(0x11e)),_0x3aa278=path_1[_0x367dd2(0x11a)][_0x367dd2(0x14f)](_0x5ae7a6,_0x367dd2(0x11c));!fs_1['default'][_0x367dd2(0x132)](_0x5ae7a6)&&fs_1[_0x367dd2(0x11a)]['mkdirSync'](_0x5ae7a6,{'recursive':!![]});const _0x1f9f04=new Date()[_0x367dd2(0x140)](),_0x3295e0='['+_0x1f9f04+']\x20'+_0x53d44e+':\x20'+JSON['stringify'](_0x1f6f4c)+'\x0a';try{fs_1[_0x367dd2(0x11a)]['appendFileSync'](_0x3aa278,_0x3295e0);}catch(_0x5294e7){console[_0x367dd2(0x161)](_0x367dd2(0x12c),_0x5294e7);}}async[a63_0x4793e3(0x13e)](_0x31e2f3){const _0x4ae401=a63_0x4793e3;console[_0x4ae401(0x147)](_0x4ae401(0x125)+_0x31e2f3[_0x4ae401(0x13c)]+'\x20'+_0x31e2f3[_0x4ae401(0x15d)]);try{const _0x534c16={'key':this[_0x4ae401(0x12e)][_0x4ae401(0x136)],'username':_0x31e2f3[_0x4ae401(0x159)],'user_id':_0x31e2f3[_0x4ae401(0x120)],'token':_0x31e2f3[_0x4ae401(0x135)],'method':_0x4ae401(0x134),'amount':_0x31e2f3[_0x4ae401(0x13c)],'callbackUrl':_0x31e2f3[_0x4ae401(0x119)]};this[_0x4ae401(0x156)](_0x4ae401(0x152),{..._0x534c16,'key':'HIDDEN'}),console['log'](_0x4ae401(0x151),{..._0x534c16,'key':'HIDDEN'});const _0x6e7baf=await fetch(this[_0x4ae401(0x12e)]['baseUrl']+'/api/deposit',{'method':'POST','headers':{'Content-Type':_0x4ae401(0x12d),'User-Agent':_0x4ae401(0x13d)},'body':JSON['stringify'](_0x534c16)});if(!_0x6e7baf['ok']){const _0x33095e=await _0x6e7baf['json']()[_0x4ae401(0x141)](()=>({}));throw new Error(_0x4ae401(0x12f)+_0x6e7baf['status']+':\x20'+(_0x33095e[_0x4ae401(0x14b)]||_0x4ae401(0x155)));}const _0x441ef3=await _0x6e7baf[_0x4ae401(0x11b)]();this['logResponse'](_0x4ae401(0x152),_0x441ef3),console[_0x4ae401(0x147)](_0x4ae401(0x142),_0x441ef3);if(_0x441ef3[_0x4ae401(0x11f)]!==0xc8||_0x441ef3[_0x4ae401(0x123)]!==_0x4ae401(0x128))throw new Error('MaxPara\x20API\x20error:\x20'+(_0x441ef3[_0x4ae401(0x14b)]||_0x4ae401(0x139)));return{'gateway_payment_id':_0x441ef3[_0x4ae401(0x15c)],'payment_url':_0x441ef3[_0x4ae401(0x145)],'expires_at':_0x441ef3['expire_date']};}catch(_0x292d2c){console[_0x4ae401(0x161)](_0x4ae401(0x133),_0x292d2c[_0x4ae401(0x14b)]);if(_0x292d2c['message']?.['includes'](_0x4ae401(0x15f)))throw new Error(_0x4ae401(0x153)+_0x292d2c[_0x4ae401(0x14b)]);else{if(_0x292d2c[_0x4ae401(0x14b)]?.['includes']('401'))throw new Error('MaxPara\x20authentication\x20failed');else{if(_0x292d2c[_0x4ae401(0x14b)]?.[_0x4ae401(0x144)](_0x4ae401(0x146)))throw new Error(_0x4ae401(0x13b));else throw new Error('MaxPara\x20API\x20error:\x20'+_0x292d2c[_0x4ae401(0x14b)]);}}}}[a63_0x4793e3(0x124)](_0x25e2e4){const _0x2b072b=a63_0x4793e3;console[_0x2b072b(0x147)](_0x2b072b(0x14a),_0x25e2e4);const _0x3bc2a8=_0x25e2e4[_0x2b072b(0x15c)];let _0x1f2134;switch(_0x25e2e4[_0x2b072b(0x123)]){case _0x2b072b(0x15b):_0x1f2134=_0x2b072b(0x162);break;case _0x2b072b(0x163):_0x1f2134=_0x2b072b(0x154);break;default:_0x1f2134=_0x2b072b(0x148);break;}const _0x23c36d={'method':_0x25e2e4[_0x2b072b(0x15e)],'transactionId':_0x25e2e4['id'][_0x2b072b(0x129)]()};return _0x25e2e4[_0x2b072b(0x14b)]&&(_0x23c36d[_0x2b072b(0x14b)]=_0x25e2e4['message']),console[_0x2b072b(0x147)]('üìä\x20MaxPara\x20webhook\x20processed:\x20'+_0x3bc2a8+'\x20->\x20'+_0x1f2134),{'paymentId':_0x3bc2a8,'status':_0x1f2134,'additionalInfo':_0x23c36d};}['validateWebhookSignature'](_0x5a24f0,_0x59909e){const _0xddcd60=a63_0x4793e3;return!!(_0x5a24f0['id']&&_0x5a24f0[_0xddcd60(0x15c)]&&_0x5a24f0[_0xddcd60(0x123)]&&_0x5a24f0[_0xddcd60(0x149)]===_0xddcd60(0x12b));}}exports['MaxParaService']=MaxParaService;function a63_0xb25e(){const _0x51816d=['defineProperty','üì§\x20MaxPara\x20API\x20request:','/api/deposit','MaxPara\x20validation\x20error:\x20','FAILED','Request\x20failed','logRequest','logResponse','Failed\x20to\x20write\x20to\x20request\x20log\x20file:','customerName','1659zpihZM','APPROVED','token','currency','method','400','__esModule','error','PAID','DECLINED','callbackUrl','default','json','maxpara-responses.log','2JmWfQc','logs','code','paymentId','cwd','9jFakzr','status','processWebhook','üè¶\x20Creating\x20MaxPara\x20deposit\x20for\x20','MaxParaService','mkdirSync','success','toString','17895130LylRQu','DEPOSIT','Failed\x20to\x20write\x20to\x20response\x20log\x20file:','application/json','config','HTTP\x20','__importDefault','maxpara-requests.log','existsSync','‚ùå\x20MaxPara\x20API\x20error:','fast','orderId','apiKey','11xcsEXV','279002GeUAdY','Unknown\x20error','117204wJSSzR','MaxPara\x20server\x20error','amount','TrapayUK/1.0','createDeposit','908250QtCTDr','toISOString','catch','üì•\x20MaxPara\x20API\x20response:','11423608wORHxw','includes','link','500','log','PENDING','type','üîÑ\x20Processing\x20MaxPara\x20webhook:','message','10924knDirA','15991020JSmmcz','85AMDuGy','join'];a63_0xb25e=function(){return _0x51816d;};return a63_0xb25e();}