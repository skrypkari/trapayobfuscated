'use strict';const a61_0xf5dc56=a61_0x1e7b;function a61_0x1e7b(_0x327164,_0x14b946){_0x327164=_0x327164-0x1b9;const _0x569c5f=a61_0x569c();let _0x1e7b33=_0x569c5f[_0x327164];return _0x1e7b33;}(function(_0x10f898,_0x5569c6){const _0x38ddcc=a61_0x1e7b,_0x243620=_0x10f898();while(!![]){try{const _0x20a6d9=parseInt(_0x38ddcc(0x1c1))/0x1*(-parseInt(_0x38ddcc(0x1c4))/0x2)+-parseInt(_0x38ddcc(0x1ff))/0x3+parseInt(_0x38ddcc(0x1fa))/0x4*(-parseInt(_0x38ddcc(0x202))/0x5)+-parseInt(_0x38ddcc(0x200))/0x6*(-parseInt(_0x38ddcc(0x1bf))/0x7)+parseInt(_0x38ddcc(0x1fb))/0x8+-parseInt(_0x38ddcc(0x1bd))/0x9*(-parseInt(_0x38ddcc(0x1fd))/0xa)+-parseInt(_0x38ddcc(0x1db))/0xb*(-parseInt(_0x38ddcc(0x1d5))/0xc);if(_0x20a6d9===_0x5569c6)break;else _0x243620['push'](_0x243620['shift']());}catch(_0x35aad8){_0x243620['push'](_0x243620['shift']());}}}(a61_0x569c,0x76511));function a61_0x569c(){const _0x35b8a5=['paymentId','code','ðŸ“¥\x20MaxPara\x20API\x20response:','maxpara-requests.log','Request\x20failed','mkdirSync','path','stringify','ðŸ“¤\x20MaxPara\x20API\x20request:','âŒ\x20MaxPara\x20API\x20error:','POST','amount','__esModule','createDeposit','MaxPara\x20validation\x20error:\x20','apiKey','72qYXgkj','5418752wJJqEg','MaxParaService','50CSkPlc','catch','552777OisYGG','6tGXUTN','appendFileSync','180135IQxLvZ','callbackUrl','MaxPara\x20authentication\x20failed','logResponse','application/json','config','processWebhook','782910ANSfuc','message','2053681lFdbYR','APPROVED','106519oGtXsP','DECLINED','Failed\x20to\x20write\x20to\x20request\x20log\x20file:','2TpUNXI','cwd','logRequest','currency','existsSync','logs','fast','error','default','FAILED','validateWebhookSignature','includes','expire_date','token','defineProperty','400','link','109272OsRSrI','PAID','ðŸ“Š\x20MaxPara\x20webhook\x20processed:\x20','ðŸ”„\x20Processing\x20MaxPara\x20webhook:','customerName','method','22ahCmee','maxpara-responses.log','401','status','/api/deposit','HIDDEN','success','log','toString','\x20->\x20','json','join','Failed\x20to\x20write\x20to\x20response\x20log\x20file:','type','HTTP\x20'];a61_0x569c=function(){return _0x35b8a5;};return a61_0x569c();}var __importDefault=this&&this['__importDefault']||function(_0x5295d8){const _0x77271f=a61_0x1e7b;return _0x5295d8&&_0x5295d8[_0x77271f(0x1f6)]?_0x5295d8:{'default':_0x5295d8};};Object[a61_0xf5dc56(0x1d2)](exports,'__esModule',{'value':!![]}),exports[a61_0xf5dc56(0x1fc)]=void 0x0;const fs_1=__importDefault(require('fs')),path_1=__importDefault(require(a61_0xf5dc56(0x1f0)));class MaxParaService{constructor(_0x496ed5){const _0x15cf91=a61_0xf5dc56;this[_0x15cf91(0x1bb)]=_0x496ed5;}[a61_0xf5dc56(0x1c6)](_0x556ee2,_0x45282a){const _0x2b96ee=a61_0xf5dc56,_0x142bd1=path_1[_0x2b96ee(0x1cc)][_0x2b96ee(0x1e6)](process[_0x2b96ee(0x1c5)](),_0x2b96ee(0x1c9)),_0x4d99da=path_1[_0x2b96ee(0x1cc)]['join'](_0x142bd1,_0x2b96ee(0x1ed));!fs_1[_0x2b96ee(0x1cc)][_0x2b96ee(0x1c8)](_0x142bd1)&&fs_1[_0x2b96ee(0x1cc)][_0x2b96ee(0x1ef)](_0x142bd1,{'recursive':!![]});const _0x151340=new Date()['toISOString'](),_0x1f0313='['+_0x151340+']\x20'+_0x556ee2+':\x20'+JSON[_0x2b96ee(0x1f1)](_0x45282a)+'\x0a';try{fs_1['default'][_0x2b96ee(0x201)](_0x4d99da,_0x1f0313);}catch(_0x1bf9ef){console['error'](_0x2b96ee(0x1c3),_0x1bf9ef);}}[a61_0xf5dc56(0x1b9)](_0x594b29,_0x4b69a7){const _0x5b769a=a61_0xf5dc56,_0x5e185d=path_1['default'][_0x5b769a(0x1e6)](process['cwd'](),_0x5b769a(0x1c9)),_0x450d3d=path_1[_0x5b769a(0x1cc)][_0x5b769a(0x1e6)](_0x5e185d,_0x5b769a(0x1dc));!fs_1['default'][_0x5b769a(0x1c8)](_0x5e185d)&&fs_1['default'][_0x5b769a(0x1ef)](_0x5e185d,{'recursive':!![]});const _0x3d6776=new Date()['toISOString'](),_0x268b6d='['+_0x3d6776+']\x20'+_0x594b29+':\x20'+JSON['stringify'](_0x4b69a7)+'\x0a';try{fs_1[_0x5b769a(0x1cc)][_0x5b769a(0x201)](_0x450d3d,_0x268b6d);}catch(_0x576f0f){console[_0x5b769a(0x1cb)](_0x5b769a(0x1e7),_0x576f0f);}}async[a61_0xf5dc56(0x1f7)](_0x3769db){const _0x360c98=a61_0xf5dc56;console['log']('ðŸ¦\x20Creating\x20MaxPara\x20deposit\x20for\x20'+_0x3769db['amount']+'\x20'+_0x3769db[_0x360c98(0x1c7)]);try{const _0x39fa80={'key':this['config'][_0x360c98(0x1f9)],'username':_0x3769db[_0x360c98(0x1d9)],'user_id':_0x3769db[_0x360c98(0x1ea)],'token':_0x3769db['orderId'],'method':_0x360c98(0x1ca),'amount':_0x3769db[_0x360c98(0x1f5)],'callbackUrl':_0x3769db[_0x360c98(0x203)]};this['logRequest'](_0x360c98(0x1df),{..._0x39fa80,'key':_0x360c98(0x1e0)}),console[_0x360c98(0x1e2)](_0x360c98(0x1f2),{..._0x39fa80,'key':_0x360c98(0x1e0)});const _0x31f78d=await fetch(this[_0x360c98(0x1bb)]['baseUrl']+_0x360c98(0x1df),{'method':_0x360c98(0x1f4),'headers':{'Content-Type':_0x360c98(0x1ba),'User-Agent':'TrapayUK/1.0'},'body':JSON['stringify'](_0x39fa80)});if(!_0x31f78d['ok']){const _0x25adbc=await _0x31f78d[_0x360c98(0x1e5)]()[_0x360c98(0x1fe)](()=>({}));throw new Error(_0x360c98(0x1e9)+_0x31f78d[_0x360c98(0x1de)]+':\x20'+(_0x25adbc[_0x360c98(0x1be)]||_0x360c98(0x1ee)));}const _0x26fcfc=await _0x31f78d[_0x360c98(0x1e5)]();this[_0x360c98(0x1b9)](_0x360c98(0x1df),_0x26fcfc),console['log'](_0x360c98(0x1ec),_0x26fcfc);if(_0x26fcfc[_0x360c98(0x1eb)]!==0xc8||_0x26fcfc[_0x360c98(0x1de)]!==_0x360c98(0x1e1))throw new Error('MaxPara\x20API\x20error:\x20'+(_0x26fcfc[_0x360c98(0x1be)]||'Unknown\x20error'));return{'gateway_payment_id':_0x26fcfc['token'],'payment_url':_0x26fcfc[_0x360c98(0x1d4)],'expires_at':_0x26fcfc[_0x360c98(0x1d0)]};}catch(_0x56828c){console[_0x360c98(0x1cb)](_0x360c98(0x1f3),_0x56828c[_0x360c98(0x1be)]);if(_0x56828c[_0x360c98(0x1be)]?.[_0x360c98(0x1cf)](_0x360c98(0x1d3)))throw new Error(_0x360c98(0x1f8)+_0x56828c[_0x360c98(0x1be)]);else{if(_0x56828c[_0x360c98(0x1be)]?.[_0x360c98(0x1cf)](_0x360c98(0x1dd)))throw new Error(_0x360c98(0x204));else{if(_0x56828c['message']?.['includes']('500'))throw new Error('MaxPara\x20server\x20error');else throw new Error('MaxPara\x20API\x20error:\x20'+_0x56828c['message']);}}}}[a61_0xf5dc56(0x1bc)](_0x5d1ed9){const _0x18820c=a61_0xf5dc56;console['log'](_0x18820c(0x1d8),_0x5d1ed9);const _0x1e0184=_0x5d1ed9[_0x18820c(0x1d1)];let _0x592cdc;switch(_0x5d1ed9['status']){case _0x18820c(0x1c0):_0x592cdc=_0x18820c(0x1d6);break;case _0x18820c(0x1c2):_0x592cdc=_0x18820c(0x1cd);break;default:_0x592cdc='PENDING';break;}const _0x59f1b3={'method':_0x5d1ed9[_0x18820c(0x1da)],'transactionId':_0x5d1ed9['id'][_0x18820c(0x1e3)]()};return _0x5d1ed9['message']&&(_0x59f1b3[_0x18820c(0x1be)]=_0x5d1ed9[_0x18820c(0x1be)]),console[_0x18820c(0x1e2)](_0x18820c(0x1d7)+_0x1e0184+_0x18820c(0x1e4)+_0x592cdc),{'paymentId':_0x1e0184,'status':_0x592cdc,'additionalInfo':_0x59f1b3};}[a61_0xf5dc56(0x1ce)](_0x3cf960,_0x293337){const _0x5a0398=a61_0xf5dc56;return!!(_0x3cf960['id']&&_0x3cf960[_0x5a0398(0x1d1)]&&_0x3cf960[_0x5a0398(0x1de)]&&_0x3cf960[_0x5a0398(0x1e8)]==='DEPOSIT');}}exports[a61_0xf5dc56(0x1fc)]=MaxParaService;