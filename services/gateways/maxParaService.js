'use strict';const a61_0x3dc112=a61_0x4524;(function(_0x42db7f,_0x3d7390){const _0x5adccf=a61_0x4524,_0x3cca53=_0x42db7f();while(!![]){try{const _0x178715=parseInt(_0x5adccf(0xc8))/0x1+parseInt(_0x5adccf(0xe7))/0x2+parseInt(_0x5adccf(0xc7))/0x3+parseInt(_0x5adccf(0xcc))/0x4*(parseInt(_0x5adccf(0xc1))/0x5)+parseInt(_0x5adccf(0xd3))/0x6*(parseInt(_0x5adccf(0xf1))/0x7)+parseInt(_0x5adccf(0xbd))/0x8+-parseInt(_0x5adccf(0xf4))/0x9*(parseInt(_0x5adccf(0xe2))/0xa);if(_0x178715===_0x3d7390)break;else _0x3cca53['push'](_0x3cca53['shift']());}catch(_0x41aab1){_0x3cca53['push'](_0x3cca53['shift']());}}}(a61_0x475c,0x40085));var __importDefault=this&&this[a61_0x3dc112(0xc4)]||function(_0x3f798e){return _0x3f798e&&_0x3f798e['__esModule']?_0x3f798e:{'default':_0x3f798e};};function a61_0x4524(_0x343e5a,_0x18a414){_0x343e5a=_0x343e5a-0xad;const _0x475c56=a61_0x475c();let _0x4524b1=_0x475c56[_0x343e5a];return _0x4524b1;}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a61_0x3dc112(0xc5)]=void 0x0;const fs_1=__importDefault(require('fs')),path_1=__importDefault(require(a61_0x3dc112(0xd6)));function a61_0x475c(){const _0x13382f=['MaxParaService','link','955614kTjmLL','357327gcwjqc','catch','ðŸ¦\x20Creating\x20MaxPara\x20deposit\x20for\x20','code','8zLlkJJ','paymentId','401','\x20->\x20','success','Request\x20failed','default','6EepzUL','ðŸ“¤\x20MaxPara\x20API\x20request:','HTTP\x20','path','MaxPara\x20authentication\x20failed','MaxPara\x20validation\x20error:\x20','TrapayUK/1.0','âŒ\x20MaxPara\x20API\x20error:','ðŸ”„\x20Processing\x20MaxPara\x20webhook:','orderId','ðŸ“Š\x20MaxPara\x20webhook\x20processed:\x20','maxpara-responses.log','cwd','MaxPara\x20API\x20error:\x20','logResponse','2312410GpsLEI','includes','PENDING','POST','customerName','398796rniFyt','mkdirSync','status','log','createDeposit','Failed\x20to\x20write\x20to\x20request\x20log\x20file:','currency','HIDDEN','type','method','3533383Nliugm','DEPOSIT','DECLINED','63KuKIUC','token','baseUrl','config','PAID','logRequest','join','logs','json','processWebhook','message','APPROVED','400','application/json','Unknown\x20error','toISOString','/api/deposit','maxpara-requests.log','ðŸ“¥\x20MaxPara\x20API\x20response:','1198800IoxqNR','stringify','FAILED','error','877705xIKXEZ','fast','500','__importDefault'];a61_0x475c=function(){return _0x13382f;};return a61_0x475c();}class MaxParaService{constructor(_0x5aaca1){this['config']=_0x5aaca1;}[a61_0x3dc112(0xaf)](_0x364b56,_0x7149db){const _0x26c874=a61_0x3dc112,_0x32460d=path_1[_0x26c874(0xd2)][_0x26c874(0xb0)](process[_0x26c874(0xdf)](),_0x26c874(0xb1)),_0x81d044=path_1['default'][_0x26c874(0xb0)](_0x32460d,_0x26c874(0xbb));!fs_1[_0x26c874(0xd2)]['existsSync'](_0x32460d)&&fs_1[_0x26c874(0xd2)][_0x26c874(0xe8)](_0x32460d,{'recursive':!![]});const _0x2d68c3=new Date()[_0x26c874(0xb9)](),_0xd8fa4c='['+_0x2d68c3+']\x20'+_0x364b56+':\x20'+JSON[_0x26c874(0xbe)](_0x7149db)+'\x0a';try{fs_1[_0x26c874(0xd2)]['appendFileSync'](_0x81d044,_0xd8fa4c);}catch(_0x2ad5d5){console[_0x26c874(0xc0)](_0x26c874(0xec),_0x2ad5d5);}}[a61_0x3dc112(0xe1)](_0x4bc4b6,_0x32782e){const _0x2ac6c1=a61_0x3dc112,_0x550472=path_1['default']['join'](process[_0x2ac6c1(0xdf)](),_0x2ac6c1(0xb1)),_0x3b0aef=path_1[_0x2ac6c1(0xd2)][_0x2ac6c1(0xb0)](_0x550472,_0x2ac6c1(0xde));!fs_1['default']['existsSync'](_0x550472)&&fs_1['default'][_0x2ac6c1(0xe8)](_0x550472,{'recursive':!![]});const _0x37e283=new Date()[_0x2ac6c1(0xb9)](),_0x4aca08='['+_0x37e283+']\x20'+_0x4bc4b6+':\x20'+JSON[_0x2ac6c1(0xbe)](_0x32782e)+'\x0a';try{fs_1[_0x2ac6c1(0xd2)]['appendFileSync'](_0x3b0aef,_0x4aca08);}catch(_0x1fe405){console['error']('Failed\x20to\x20write\x20to\x20response\x20log\x20file:',_0x1fe405);}}async[a61_0x3dc112(0xeb)](_0x2ea5aa){const _0x173f13=a61_0x3dc112;console[_0x173f13(0xea)](_0x173f13(0xca)+_0x2ea5aa['amount']+'\x20'+_0x2ea5aa[_0x173f13(0xed)]);try{const _0x3d64d7={'key':this[_0x173f13(0xad)]['apiKey'],'username':_0x2ea5aa[_0x173f13(0xe6)],'user_id':_0x2ea5aa[_0x173f13(0xcd)],'token':_0x2ea5aa[_0x173f13(0xdc)],'method':_0x173f13(0xc2),'amount':_0x2ea5aa['amount'],'callbackUrl':_0x2ea5aa['callbackUrl']};this['logRequest'](_0x173f13(0xba),{..._0x3d64d7,'key':_0x173f13(0xee)}),console[_0x173f13(0xea)](_0x173f13(0xd4),{..._0x3d64d7,'key':'HIDDEN'});const _0x297383=await fetch(this[_0x173f13(0xad)][_0x173f13(0xf6)]+_0x173f13(0xba),{'method':_0x173f13(0xe5),'headers':{'Content-Type':_0x173f13(0xb7),'User-Agent':_0x173f13(0xd9)},'body':JSON[_0x173f13(0xbe)](_0x3d64d7)});if(!_0x297383['ok']){const _0x44badc=await _0x297383[_0x173f13(0xb2)]()[_0x173f13(0xc9)](()=>({}));throw new Error(_0x173f13(0xd5)+_0x297383[_0x173f13(0xe9)]+':\x20'+(_0x44badc[_0x173f13(0xb4)]||_0x173f13(0xd1)));}const _0x464ec7=await _0x297383[_0x173f13(0xb2)]();this[_0x173f13(0xe1)](_0x173f13(0xba),_0x464ec7),console['log'](_0x173f13(0xbc),_0x464ec7);if(_0x464ec7[_0x173f13(0xcb)]!==0xc8||_0x464ec7['status']!==_0x173f13(0xd0))throw new Error(_0x173f13(0xe0)+(_0x464ec7['message']||_0x173f13(0xb8)));return{'gateway_payment_id':_0x464ec7[_0x173f13(0xf5)],'payment_url':_0x464ec7[_0x173f13(0xc6)],'expires_at':_0x464ec7['expire_date']};}catch(_0x4de12d){console[_0x173f13(0xc0)](_0x173f13(0xda),_0x4de12d[_0x173f13(0xb4)]);if(_0x4de12d[_0x173f13(0xb4)]?.[_0x173f13(0xe3)](_0x173f13(0xb6)))throw new Error(_0x173f13(0xd8)+_0x4de12d['message']);else{if(_0x4de12d[_0x173f13(0xb4)]?.[_0x173f13(0xe3)](_0x173f13(0xce)))throw new Error(_0x173f13(0xd7));else{if(_0x4de12d['message']?.[_0x173f13(0xe3)](_0x173f13(0xc3)))throw new Error('MaxPara\x20server\x20error');else throw new Error(_0x173f13(0xe0)+_0x4de12d[_0x173f13(0xb4)]);}}}}[a61_0x3dc112(0xb3)](_0x31448c){const _0x57f95b=a61_0x3dc112;console[_0x57f95b(0xea)](_0x57f95b(0xdb),_0x31448c);const _0x1e3e48=_0x31448c[_0x57f95b(0xf5)];let _0x44174d;switch(_0x31448c[_0x57f95b(0xe9)]){case _0x57f95b(0xb5):_0x44174d=_0x57f95b(0xae);break;case _0x57f95b(0xf3):_0x44174d=_0x57f95b(0xbf);break;default:_0x44174d=_0x57f95b(0xe4);break;}const _0x2a5607={'method':_0x31448c[_0x57f95b(0xf0)],'transactionId':_0x31448c['id']['toString']()};return _0x31448c['message']&&(_0x2a5607[_0x57f95b(0xb4)]=_0x31448c['message']),console[_0x57f95b(0xea)](_0x57f95b(0xdd)+_0x1e3e48+_0x57f95b(0xcf)+_0x44174d),{'paymentId':_0x1e3e48,'status':_0x44174d,'additionalInfo':_0x2a5607};}['validateWebhookSignature'](_0x17cd27,_0x1414a0){const _0x1762eb=a61_0x3dc112;return!!(_0x17cd27['id']&&_0x17cd27[_0x1762eb(0xf5)]&&_0x17cd27[_0x1762eb(0xe9)]&&_0x17cd27[_0x1762eb(0xef)]===_0x1762eb(0xf2));}}exports['MaxParaService']=MaxParaService;