'use strict';const a69_0x43ff61=a69_0x1359;(function(_0x45cc06,_0x20d435){const _0x21404d=a69_0x1359,_0x198c8f=_0x45cc06();while(!![]){try{const _0x296be2=-parseInt(_0x21404d(0x1d6))/0x1*(-parseInt(_0x21404d(0x1d0))/0x2)+parseInt(_0x21404d(0x209))/0x3+parseInt(_0x21404d(0x1f8))/0x4*(-parseInt(_0x21404d(0x1ff))/0x5)+-parseInt(_0x21404d(0x1e5))/0x6*(-parseInt(_0x21404d(0x1e8))/0x7)+-parseInt(_0x21404d(0x20b))/0x8+parseInt(_0x21404d(0x1e1))/0x9+-parseInt(_0x21404d(0x1d1))/0xa;if(_0x296be2===_0x20d435)break;else _0x198c8f['push'](_0x198c8f['shift']());}catch(_0x11307c){_0x198c8f['push'](_0x198c8f['shift']());}}}(a69_0x228d,0x1b453));var __importDefault=this&&this[a69_0x43ff61(0x1f4)]||function(_0x46a788){const _0x3d5176=a69_0x43ff61;return _0x46a788&&_0x46a788[_0x3d5176(0x1d8)]?_0x46a788:{'default':_0x46a788};};Object[a69_0x43ff61(0x1d2)](exports,a69_0x43ff61(0x1d8),{'value':!![]}),exports['MaxParaService']=void 0x0;function a69_0x1359(_0x370ea4,_0xf2e953){_0x370ea4=_0x370ea4-0x1ce;const _0x228dce=a69_0x228d();let _0x1359e7=_0x228dce[_0x370ea4];return _0x1359e7;}const fs_1=__importDefault(require('fs')),path_1=__importDefault(require('path'));class MaxParaService{constructor(_0x2aee15){const _0x53282b=a69_0x43ff61;this[_0x53282b(0x1f1)]=_0x2aee15;}[a69_0x43ff61(0x20d)](_0x2368b8,_0x35f822){const _0x3e054a=a69_0x43ff61,_0x539cd2=path_1['default']['join'](process[_0x3e054a(0x20c)](),_0x3e054a(0x203)),_0x23d59d=path_1[_0x3e054a(0x207)][_0x3e054a(0x1f9)](_0x539cd2,_0x3e054a(0x1f2));!fs_1[_0x3e054a(0x207)][_0x3e054a(0x1ee)](_0x539cd2)&&fs_1['default'][_0x3e054a(0x204)](_0x539cd2,{'recursive':!![]});const _0x556bd9=new Date()[_0x3e054a(0x1ef)](),_0x4b4c03='['+_0x556bd9+']\x20'+_0x2368b8+':\x20'+JSON[_0x3e054a(0x1da)](_0x35f822)+'\x0a';try{fs_1[_0x3e054a(0x207)]['appendFileSync'](_0x23d59d,_0x4b4c03);}catch(_0x458c18){console['error'](_0x3e054a(0x1fe),_0x458c18);}}['logResponse'](_0x136382,_0x434b01){const _0x409004=a69_0x43ff61,_0x23e605=path_1[_0x409004(0x207)][_0x409004(0x1f9)](process[_0x409004(0x20c)](),_0x409004(0x203)),_0x54ee17=path_1[_0x409004(0x207)][_0x409004(0x1f9)](_0x23e605,_0x409004(0x1fd));!fs_1[_0x409004(0x207)]['existsSync'](_0x23e605)&&fs_1[_0x409004(0x207)][_0x409004(0x204)](_0x23e605,{'recursive':!![]});const _0x28f5c4=new Date()[_0x409004(0x1ef)](),_0x3a3ef6='['+_0x28f5c4+']\x20'+_0x136382+':\x20'+JSON[_0x409004(0x1da)](_0x434b01)+'\x0a';try{fs_1[_0x409004(0x207)][_0x409004(0x1f6)](_0x54ee17,_0x3a3ef6);}catch(_0x99178a){console[_0x409004(0x1d4)](_0x409004(0x1d3),_0x99178a);}}async[a69_0x43ff61(0x1ec)](_0x13958e){const _0x572bf2=a69_0x43ff61;console[_0x572bf2(0x1f7)](_0x572bf2(0x211)+_0x13958e[_0x572bf2(0x1e2)]+'\x20'+_0x13958e['currency']);try{const _0x1c6cef={'key':this['config'][_0x572bf2(0x1fb)],'username':_0x13958e[_0x572bf2(0x1df)],'user_id':_0x13958e[_0x572bf2(0x1e4)],'token':_0x13958e[_0x572bf2(0x20a)],'method':_0x572bf2(0x1f5),'amount':_0x13958e[_0x572bf2(0x1e2)],'callbackUrl':_0x13958e['callbackUrl']};this[_0x572bf2(0x20d)](_0x572bf2(0x1e7),{..._0x1c6cef,'key':'HIDDEN'}),console[_0x572bf2(0x1f7)](_0x572bf2(0x1e6),{..._0x1c6cef,'key':_0x572bf2(0x1d9)});const _0x4be92f=await fetch(this[_0x572bf2(0x1f1)]['baseUrl']+_0x572bf2(0x1e7),{'method':_0x572bf2(0x1cf),'headers':{'Content-Type':'application/json','User-Agent':_0x572bf2(0x202)},'body':JSON['stringify'](_0x1c6cef)});if(!_0x4be92f['ok']){const _0x51319c=await _0x4be92f[_0x572bf2(0x1f0)]()[_0x572bf2(0x206)](()=>({}));throw new Error('HTTP\x20'+_0x4be92f['status']+':\x20'+(_0x51319c[_0x572bf2(0x210)]||_0x572bf2(0x1e9)));}const _0x5a4baa=await _0x4be92f[_0x572bf2(0x1f0)]();this[_0x572bf2(0x1f3)](_0x572bf2(0x1e7),_0x5a4baa),console[_0x572bf2(0x1f7)]('ðŸ“¥\x20MaxPara\x20API\x20response:',_0x5a4baa);if(_0x5a4baa[_0x572bf2(0x1dd)]!==0xc8||_0x5a4baa[_0x572bf2(0x1dc)]!=='success')throw new Error(_0x572bf2(0x1ed)+(_0x5a4baa['message']||_0x572bf2(0x1e0)));return{'gateway_payment_id':_0x5a4baa[_0x572bf2(0x208)],'payment_url':_0x5a4baa[_0x572bf2(0x1e3)],'expires_at':_0x5a4baa[_0x572bf2(0x1ce)]};}catch(_0x4e6d46){console['error']('âŒ\x20MaxPara\x20API\x20error:',_0x4e6d46['message']);if(_0x4e6d46[_0x572bf2(0x210)]?.['includes'](_0x572bf2(0x1eb)))throw new Error(_0x572bf2(0x20f)+_0x4e6d46['message']);else{if(_0x4e6d46['message']?.[_0x572bf2(0x1db)]('401'))throw new Error(_0x572bf2(0x1ea));else{if(_0x4e6d46['message']?.[_0x572bf2(0x1db)](_0x572bf2(0x20e)))throw new Error('MaxPara\x20server\x20error');else throw new Error(_0x572bf2(0x1ed)+_0x4e6d46['message']);}}}}['processWebhook'](_0x3f7318){const _0x1e483f=a69_0x43ff61;console[_0x1e483f(0x1f7)](_0x1e483f(0x1fc),_0x3f7318);const _0x4b01f4=_0x3f7318[_0x1e483f(0x208)];let _0x158609;switch(_0x3f7318[_0x1e483f(0x1dc)]){case _0x1e483f(0x1d7):_0x158609=_0x1e483f(0x200);break;case'DECLINED':_0x158609=_0x1e483f(0x1fa);break;default:_0x158609=_0x1e483f(0x205);break;}const _0x56f273={'method':_0x3f7318['method'],'transactionId':_0x3f7318['id'][_0x1e483f(0x1de)]()};return _0x3f7318[_0x1e483f(0x210)]&&(_0x56f273[_0x1e483f(0x210)]=_0x3f7318['message']),console['log'](_0x1e483f(0x212)+_0x4b01f4+_0x1e483f(0x1d5)+_0x158609),{'paymentId':_0x4b01f4,'status':_0x158609,'additionalInfo':_0x56f273};}[a69_0x43ff61(0x201)](_0x501407,_0x4345c6){const _0x4ad722=a69_0x43ff61;return!!(_0x501407['id']&&_0x501407[_0x4ad722(0x208)]&&_0x501407[_0x4ad722(0x1dc)]&&_0x501407['type']==='DEPOSIT');}}function a69_0x228d(){const _0x18e768=['validateWebhookSignature','TrapayUK/1.0','logs','mkdirSync','PENDING','catch','default','token','80571UaRTGA','orderId','303968GQJqvV','cwd','logRequest','500','MaxPara\x20validation\x20error:\x20','message','ðŸ¦\x20Creating\x20MaxPara\x20deposit\x20for\x20','ðŸ“Š\x20MaxPara\x20webhook\x20processed:\x20','expire_date','POST','68216pjHGKB','2406270HBBjxm','defineProperty','Failed\x20to\x20write\x20to\x20response\x20log\x20file:','error','\x20->\x20','5UJknmf','APPROVED','__esModule','HIDDEN','stringify','includes','status','code','toString','customerName','Unknown\x20error','1726452krklFD','amount','link','paymentId','984JOHEik','ðŸ“¤\x20MaxPara\x20API\x20request:','/api/deposit','5054XmMcYP','Request\x20failed','MaxPara\x20authentication\x20failed','400','createDeposit','MaxPara\x20API\x20error:\x20','existsSync','toISOString','json','config','maxpara-requests.log','logResponse','__importDefault','fast','appendFileSync','log','292pIJDEb','join','FAILED','apiKey','ðŸ”„\x20Processing\x20MaxPara\x20webhook:','maxpara-responses.log','Failed\x20to\x20write\x20to\x20request\x20log\x20file:','8035BiAxuc','PAID'];a69_0x228d=function(){return _0x18e768;};return a69_0x228d();}exports['MaxParaService']=MaxParaService;