'use strict';function a58_0x2057(){const _0x2ba311=['Request\x20failed','266boooOS','1466181wIkaIh','cwd','logs','TrapayUK/1.0','ðŸ“Š\x20MaxPara\x20webhook\x20processed:\x20','appendFileSync','expire_date','HTTP\x20','catch','stringify','type','code','MaxParaService','\x20->\x20','join','ðŸ“¤\x20MaxPara\x20API\x20request:','application/json','213728iaRepO','20kjZrqT','createDeposit','500','logRequest','callbackUrl','/api/deposit','link','default','status','includes','defineProperty','message','json','currency','log','105661AsBITD','token','Failed\x20to\x20write\x20to\x20request\x20log\x20file:','41652nJcKIj','error','401','PENDING','success','maxpara-responses.log','âŒ\x20MaxPara\x20API\x20error:','MaxPara\x20authentication\x20failed','logResponse','existsSync','685668jTrGHq','321452eCazQh','400','processWebhook','APPROVED','amount','paymentId','path','baseUrl','PAID','fast','config','validateWebhookSignature','ðŸ”„\x20Processing\x20MaxPara\x20webhook:','Failed\x20to\x20write\x20to\x20response\x20log\x20file:','11255967ZqTvRe','toISOString','__esModule','HIDDEN','FAILED','ðŸ“¥\x20MaxPara\x20API\x20response:','DEPOSIT','MaxPara\x20API\x20error:\x20'];a58_0x2057=function(){return _0x2ba311;};return a58_0x2057();}const a58_0x526bae=a58_0x1d64;(function(_0x2fe6fc,_0x103f9c){const _0xd6c625=a58_0x1d64,_0x50014f=_0x2fe6fc();while(!![]){try{const _0x233512=parseInt(_0xd6c625(0xf8))/0x1+-parseInt(_0xd6c625(0xfb))/0x2+parseInt(_0xd6c625(0xd7))/0x3+parseInt(_0xd6c625(0x106))/0x4*(-parseInt(_0xd6c625(0xe9))/0x5)+parseInt(_0xd6c625(0x105))/0x6+-parseInt(_0xd6c625(0xd6))/0x7*(parseInt(_0xd6c625(0xe8))/0x8)+parseInt(_0xd6c625(0x114))/0x9;if(_0x233512===_0x103f9c)break;else _0x50014f['push'](_0x50014f['shift']());}catch(_0x1708b2){_0x50014f['push'](_0x50014f['shift']());}}}(a58_0x2057,0x92ef3));var __importDefault=this&&this['__importDefault']||function(_0x1e75df){const _0x342138=a58_0x1d64;return _0x1e75df&&_0x1e75df[_0x342138(0x116)]?_0x1e75df:{'default':_0x1e75df};};Object[a58_0x526bae(0xf3)](exports,a58_0x526bae(0x116),{'value':!![]}),exports[a58_0x526bae(0xe3)]=void 0x0;const fs_1=__importDefault(require('fs')),path_1=__importDefault(require(a58_0x526bae(0x10c)));class MaxParaService{constructor(_0x4833ac){const _0x40cd06=a58_0x526bae;this[_0x40cd06(0x110)]=_0x4833ac;}['logRequest'](_0x1661d9,_0x1798a6){const _0xcff728=a58_0x526bae,_0x43cc5c=path_1[_0xcff728(0xf0)][_0xcff728(0xe5)](process[_0xcff728(0xd8)](),_0xcff728(0xd9)),_0xe08844=path_1[_0xcff728(0xf0)][_0xcff728(0xe5)](_0x43cc5c,'maxpara-requests.log');!fs_1[_0xcff728(0xf0)][_0xcff728(0x104)](_0x43cc5c)&&fs_1[_0xcff728(0xf0)]['mkdirSync'](_0x43cc5c,{'recursive':!![]});const _0x15fb2c=new Date()['toISOString'](),_0x413d4b='['+_0x15fb2c+']\x20'+_0x1661d9+':\x20'+JSON['stringify'](_0x1798a6)+'\x0a';try{fs_1['default'][_0xcff728(0xdc)](_0xe08844,_0x413d4b);}catch(_0x414e93){console[_0xcff728(0xfc)](_0xcff728(0xfa),_0x414e93);}}[a58_0x526bae(0x103)](_0x4e63d6,_0x16c7c1){const _0x3389c2=a58_0x526bae,_0x17e619=path_1[_0x3389c2(0xf0)][_0x3389c2(0xe5)](process[_0x3389c2(0xd8)](),_0x3389c2(0xd9)),_0x3ad972=path_1[_0x3389c2(0xf0)][_0x3389c2(0xe5)](_0x17e619,_0x3389c2(0x100));!fs_1['default']['existsSync'](_0x17e619)&&fs_1[_0x3389c2(0xf0)]['mkdirSync'](_0x17e619,{'recursive':!![]});const _0x586172=new Date()[_0x3389c2(0x115)](),_0x4e8de8='['+_0x586172+']\x20'+_0x4e63d6+':\x20'+JSON['stringify'](_0x16c7c1)+'\x0a';try{fs_1[_0x3389c2(0xf0)]['appendFileSync'](_0x3ad972,_0x4e8de8);}catch(_0x413cdd){console[_0x3389c2(0xfc)](_0x3389c2(0x113),_0x413cdd);}}async[a58_0x526bae(0xea)](_0x34b7b2){const _0x604f36=a58_0x526bae;console[_0x604f36(0xf7)]('ðŸ¦\x20Creating\x20MaxPara\x20deposit\x20for\x20'+_0x34b7b2[_0x604f36(0x10a)]+'\x20'+_0x34b7b2[_0x604f36(0xf6)]);try{const _0x49440c={'key':this['config']['apiKey'],'username':_0x34b7b2['customerName'],'user_id':_0x34b7b2[_0x604f36(0x10b)],'token':_0x34b7b2['orderId'],'method':_0x604f36(0x10f),'amount':_0x34b7b2[_0x604f36(0x10a)],'callbackUrl':_0x34b7b2[_0x604f36(0xed)]};this[_0x604f36(0xec)](_0x604f36(0xee),{..._0x49440c,'key':_0x604f36(0x117)}),console[_0x604f36(0xf7)](_0x604f36(0xe6),{..._0x49440c,'key':_0x604f36(0x117)});const _0x4ccd26=await fetch(this['config'][_0x604f36(0x10d)]+'/api/deposit',{'method':'POST','headers':{'Content-Type':_0x604f36(0xe7),'User-Agent':_0x604f36(0xda)},'body':JSON[_0x604f36(0xe0)](_0x49440c)});if(!_0x4ccd26['ok']){const _0x57c84b=await _0x4ccd26[_0x604f36(0xf5)]()[_0x604f36(0xdf)](()=>({}));throw new Error(_0x604f36(0xde)+_0x4ccd26[_0x604f36(0xf1)]+':\x20'+(_0x57c84b[_0x604f36(0xf4)]||_0x604f36(0xd5)));}const _0x9a51f4=await _0x4ccd26['json']();this[_0x604f36(0x103)](_0x604f36(0xee),_0x9a51f4),console[_0x604f36(0xf7)](_0x604f36(0x119),_0x9a51f4);if(_0x9a51f4[_0x604f36(0xe2)]!==0xc8||_0x9a51f4[_0x604f36(0xf1)]!==_0x604f36(0xff))throw new Error(_0x604f36(0xd4)+(_0x9a51f4[_0x604f36(0xf4)]||'Unknown\x20error'));return{'gateway_payment_id':_0x9a51f4[_0x604f36(0xf9)],'payment_url':_0x9a51f4[_0x604f36(0xef)],'expires_at':_0x9a51f4[_0x604f36(0xdd)]};}catch(_0x4a08c5){console['error'](_0x604f36(0x101),_0x4a08c5['message']);if(_0x4a08c5[_0x604f36(0xf4)]?.['includes'](_0x604f36(0x107)))throw new Error('MaxPara\x20validation\x20error:\x20'+_0x4a08c5[_0x604f36(0xf4)]);else{if(_0x4a08c5[_0x604f36(0xf4)]?.[_0x604f36(0xf2)](_0x604f36(0xfd)))throw new Error(_0x604f36(0x102));else{if(_0x4a08c5[_0x604f36(0xf4)]?.['includes'](_0x604f36(0xeb)))throw new Error('MaxPara\x20server\x20error');else throw new Error(_0x604f36(0xd4)+_0x4a08c5['message']);}}}}[a58_0x526bae(0x108)](_0x457982){const _0x4fa091=a58_0x526bae;console[_0x4fa091(0xf7)](_0x4fa091(0x112),_0x457982);const _0x5c061e=_0x457982['token'];let _0x2da1c2;switch(_0x457982[_0x4fa091(0xf1)]){case _0x4fa091(0x109):_0x2da1c2=_0x4fa091(0x10e);break;case'DECLINED':_0x2da1c2=_0x4fa091(0x118);break;default:_0x2da1c2=_0x4fa091(0xfe);break;}const _0x4d6988={'method':_0x457982['method'],'transactionId':_0x457982['id']['toString']()};return _0x457982['message']&&(_0x4d6988['message']=_0x457982[_0x4fa091(0xf4)]),console[_0x4fa091(0xf7)](_0x4fa091(0xdb)+_0x5c061e+_0x4fa091(0xe4)+_0x2da1c2),{'paymentId':_0x5c061e,'status':_0x2da1c2,'additionalInfo':_0x4d6988};}[a58_0x526bae(0x111)](_0x3aa17d,_0x15b3a7){const _0x8125da=a58_0x526bae;return!!(_0x3aa17d['id']&&_0x3aa17d[_0x8125da(0xf9)]&&_0x3aa17d[_0x8125da(0xf1)]&&_0x3aa17d[_0x8125da(0xe1)]===_0x8125da(0xd3));}}function a58_0x1d64(_0x409bf6,_0x58ec05){_0x409bf6=_0x409bf6-0xd3;const _0x205722=a58_0x2057();let _0x1d647b=_0x205722[_0x409bf6];return _0x1d647b;}exports['MaxParaService']=MaxParaService;