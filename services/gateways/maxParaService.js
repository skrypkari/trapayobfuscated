'use strict';const a58_0x76885c=a58_0x54ca;(function(_0x393061,_0x443190){const _0xebfdf5=a58_0x54ca,_0x174f94=_0x393061();while(!![]){try{const _0x16de5a=parseInt(_0xebfdf5(0x17a))/0x1*(parseInt(_0xebfdf5(0x172))/0x2)+parseInt(_0xebfdf5(0x159))/0x3*(parseInt(_0xebfdf5(0x178))/0x4)+parseInt(_0xebfdf5(0x17e))/0x5+-parseInt(_0xebfdf5(0x169))/0x6*(parseInt(_0xebfdf5(0x196))/0x7)+parseInt(_0xebfdf5(0x16b))/0x8+parseInt(_0xebfdf5(0x194))/0x9+-parseInt(_0xebfdf5(0x18e))/0xa*(parseInt(_0xebfdf5(0x175))/0xb);if(_0x16de5a===_0x443190)break;else _0x174f94['push'](_0x174f94['shift']());}catch(_0x17f08a){_0x174f94['push'](_0x174f94['shift']());}}}(a58_0x3552,0x69cf2));var __importDefault=this&&this['__importDefault']||function(_0x2ae2d8){const _0x3cbe43=a58_0x54ca;return _0x2ae2d8&&_0x2ae2d8[_0x3cbe43(0x161)]?_0x2ae2d8:{'default':_0x2ae2d8};};Object[a58_0x76885c(0x15d)](exports,'__esModule',{'value':!![]}),exports[a58_0x76885c(0x189)]=void 0x0;const fs_1=__importDefault(require('fs')),path_1=__importDefault(require(a58_0x76885c(0x17d)));class MaxParaService{constructor(_0x293e57){const _0x5b2871=a58_0x76885c;this[_0x5b2871(0x167)]=_0x293e57;}[a58_0x76885c(0x18d)](_0x2289a4,_0x37368d){const _0xba905=a58_0x76885c,_0x213d9d=path_1['default'][_0xba905(0x18a)](process['cwd'](),_0xba905(0x198)),_0x19dbee=path_1[_0xba905(0x16f)][_0xba905(0x18a)](_0x213d9d,_0xba905(0x16c));!fs_1[_0xba905(0x16f)][_0xba905(0x16a)](_0x213d9d)&&fs_1['default'][_0xba905(0x162)](_0x213d9d,{'recursive':!![]});const _0x29be17=new Date()[_0xba905(0x174)](),_0x2c5368='['+_0x29be17+']\x20'+_0x2289a4+':\x20'+JSON[_0xba905(0x187)](_0x37368d)+'\x0a';try{fs_1[_0xba905(0x16f)]['appendFileSync'](_0x19dbee,_0x2c5368);}catch(_0x2275de){console[_0xba905(0x184)](_0xba905(0x180),_0x2275de);}}[a58_0x76885c(0x16d)](_0x189984,_0x14e939){const _0x430294=a58_0x76885c,_0x3f160a=path_1[_0x430294(0x16f)]['join'](process[_0x430294(0x166)](),_0x430294(0x198)),_0x4395ce=path_1[_0x430294(0x16f)]['join'](_0x3f160a,_0x430294(0x182));!fs_1[_0x430294(0x16f)][_0x430294(0x16a)](_0x3f160a)&&fs_1[_0x430294(0x16f)][_0x430294(0x162)](_0x3f160a,{'recursive':!![]});const _0x1391c1=new Date()[_0x430294(0x174)](),_0x54fd99='['+_0x1391c1+']\x20'+_0x189984+':\x20'+JSON[_0x430294(0x187)](_0x14e939)+'\x0a';try{fs_1[_0x430294(0x16f)][_0x430294(0x191)](_0x4395ce,_0x54fd99);}catch(_0x56524e){console[_0x430294(0x184)](_0x430294(0x18f),_0x56524e);}}async[a58_0x76885c(0x193)](_0xe9ecf0){const _0x21150c=a58_0x76885c;console[_0x21150c(0x199)](_0x21150c(0x16e)+_0xe9ecf0[_0x21150c(0x177)]+'\x20'+_0xe9ecf0['currency']);try{const _0xd264e={'key':this['config'][_0x21150c(0x179)],'username':_0xe9ecf0[_0x21150c(0x190)],'user_id':_0xe9ecf0[_0x21150c(0x15e)],'token':_0xe9ecf0[_0x21150c(0x15c)],'method':_0x21150c(0x176),'amount':_0xe9ecf0[_0x21150c(0x177)],'callbackUrl':_0xe9ecf0[_0x21150c(0x160)]};this[_0x21150c(0x18d)]('/api/deposit',{..._0xd264e,'key':'HIDDEN'}),console[_0x21150c(0x199)](_0x21150c(0x192),{..._0xd264e,'key':_0x21150c(0x188)});const _0x126be4=await fetch(this[_0x21150c(0x167)][_0x21150c(0x17c)]+'/api/deposit',{'method':'POST','headers':{'Content-Type':'application/json','User-Agent':'TrapayUK/1.0'},'body':JSON[_0x21150c(0x187)](_0xd264e)});if(!_0x126be4['ok']){const _0x1fcd3d=await _0x126be4['json']()['catch'](()=>({}));throw new Error(_0x21150c(0x18c)+_0x126be4[_0x21150c(0x165)]+':\x20'+(_0x1fcd3d[_0x21150c(0x164)]||_0x21150c(0x15b)));}const _0x1c9029=await _0x126be4['json']();this[_0x21150c(0x16d)](_0x21150c(0x170),_0x1c9029),console[_0x21150c(0x199)](_0x21150c(0x181),_0x1c9029);if(_0x1c9029['code']!==0xc8||_0x1c9029[_0x21150c(0x165)]!=='success')throw new Error(_0x21150c(0x17f)+(_0x1c9029['message']||_0x21150c(0x18b)));return{'gateway_payment_id':_0x1c9029[_0x21150c(0x15a)],'payment_url':_0x1c9029['link'],'expires_at':_0x1c9029['expire_date']};}catch(_0x5cf667){console[_0x21150c(0x184)]('âŒ\x20MaxPara\x20API\x20error:',_0x5cf667['message']);if(_0x5cf667['message']?.['includes']('400'))throw new Error(_0x21150c(0x17b)+_0x5cf667[_0x21150c(0x164)]);else{if(_0x5cf667[_0x21150c(0x164)]?.[_0x21150c(0x183)](_0x21150c(0x195)))throw new Error('MaxPara\x20authentication\x20failed');else{if(_0x5cf667[_0x21150c(0x164)]?.['includes'](_0x21150c(0x158)))throw new Error(_0x21150c(0x19b));else throw new Error(_0x21150c(0x17f)+_0x5cf667['message']);}}}}[a58_0x76885c(0x163)](_0x9bb1ef){const _0x19e95c=a58_0x76885c;console[_0x19e95c(0x199)]('ðŸ”„\x20Processing\x20MaxPara\x20webhook:',_0x9bb1ef);const _0x3c5d0f=_0x9bb1ef[_0x19e95c(0x15a)];let _0x3cb490;switch(_0x9bb1ef[_0x19e95c(0x165)]){case _0x19e95c(0x168):_0x3cb490=_0x19e95c(0x15f);break;case'DECLINED':_0x3cb490=_0x19e95c(0x186);break;default:_0x3cb490=_0x19e95c(0x197);break;}const _0x12ffa5={'method':_0x9bb1ef[_0x19e95c(0x19a)],'transactionId':_0x9bb1ef['id'][_0x19e95c(0x173)]()};return _0x9bb1ef['message']&&(_0x12ffa5['message']=_0x9bb1ef['message']),console[_0x19e95c(0x199)]('ðŸ“Š\x20MaxPara\x20webhook\x20processed:\x20'+_0x3c5d0f+_0x19e95c(0x171)+_0x3cb490),{'paymentId':_0x3c5d0f,'status':_0x3cb490,'additionalInfo':_0x12ffa5};}['validateWebhookSignature'](_0x533271,_0x419763){const _0x2fdff9=a58_0x76885c;return!!(_0x533271['id']&&_0x533271[_0x2fdff9(0x15a)]&&_0x533271['status']&&_0x533271[_0x2fdff9(0x185)]==='DEPOSIT');}}function a58_0x54ca(_0x5f482d,_0x181210){_0x5f482d=_0x5f482d-0x158;const _0x3552db=a58_0x3552();let _0x54ca92=_0x3552db[_0x5f482d];return _0x54ca92;}exports[a58_0x76885c(0x189)]=MaxParaService;function a58_0x3552(){const _0x5cd6e3=['existsSync','786200QhpMvy','maxpara-requests.log','logResponse','ðŸ¦\x20Creating\x20MaxPara\x20deposit\x20for\x20','default','/api/deposit','\x20->\x20','76sMrxiX','toString','toISOString','255893aKlaTa','fast','amount','1245292bvjRhZ','apiKey','5233ICCWAU','MaxPara\x20validation\x20error:\x20','baseUrl','path','1340525mciAIb','MaxPara\x20API\x20error:\x20','Failed\x20to\x20write\x20to\x20request\x20log\x20file:','ðŸ“¥\x20MaxPara\x20API\x20response:','maxpara-responses.log','includes','error','type','FAILED','stringify','HIDDEN','MaxParaService','join','Unknown\x20error','HTTP\x20','logRequest','470BdMIwC','Failed\x20to\x20write\x20to\x20response\x20log\x20file:','customerName','appendFileSync','ðŸ“¤\x20MaxPara\x20API\x20request:','createDeposit','6795531cRiTrI','401','38633JKiDBI','PENDING','logs','log','method','MaxPara\x20server\x20error','500','3AsiVpa','token','Request\x20failed','orderId','defineProperty','paymentId','PAID','callbackUrl','__esModule','mkdirSync','processWebhook','message','status','cwd','config','APPROVED','114xkUXmQ'];a58_0x3552=function(){return _0x5cd6e3;};return a58_0x3552();}