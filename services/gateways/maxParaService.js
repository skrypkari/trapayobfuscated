'use strict';const a65_0x4f2700=a65_0x3d0b;(function(_0x45fe1e,_0x135681){const _0x582428=a65_0x3d0b,_0x50fd83=_0x45fe1e();while(!![]){try{const _0x5a8a=parseInt(_0x582428(0xf8))/0x1*(-parseInt(_0x582428(0xf3))/0x2)+-parseInt(_0x582428(0xec))/0x3*(parseInt(_0x582428(0xf5))/0x4)+-parseInt(_0x582428(0xdf))/0x5+-parseInt(_0x582428(0x118))/0x6+-parseInt(_0x582428(0x109))/0x7*(parseInt(_0x582428(0xf6))/0x8)+-parseInt(_0x582428(0x116))/0x9+parseInt(_0x582428(0x11f))/0xa;if(_0x5a8a===_0x135681)break;else _0x50fd83['push'](_0x50fd83['shift']());}catch(_0xecbc2f){_0x50fd83['push'](_0x50fd83['shift']());}}}(a65_0x507c,0x9e7c2));function a65_0x3d0b(_0x589c22,_0x296f9d){_0x589c22=_0x589c22-0xdf;const _0x507ced=a65_0x507c();let _0x3d0bd5=_0x507ced[_0x589c22];return _0x3d0bd5;}var __importDefault=this&&this[a65_0x4f2700(0xe3)]||function(_0x36efdb){const _0x495144=a65_0x4f2700;return _0x36efdb&&_0x36efdb[_0x495144(0x106)]?_0x36efdb:{'default':_0x36efdb};};Object['defineProperty'](exports,a65_0x4f2700(0x106),{'value':!![]}),exports[a65_0x4f2700(0x10d)]=void 0x0;const fs_1=__importDefault(require('fs')),path_1=__importDefault(require('path'));class MaxParaService{constructor(_0x18a8f6){const _0x1ff744=a65_0x4f2700;this[_0x1ff744(0x107)]=_0x18a8f6;}[a65_0x4f2700(0xf1)](_0x1eee50,_0x48082c){const _0xb66200=a65_0x4f2700,_0x244b46=path_1[_0xb66200(0x11a)][_0xb66200(0xe7)](process[_0xb66200(0xfc)](),_0xb66200(0xe2)),_0x4eddb0=path_1['default'][_0xb66200(0xe7)](_0x244b46,_0xb66200(0xe6));!fs_1['default'][_0xb66200(0xe8)](_0x244b46)&&fs_1[_0xb66200(0x11a)]['mkdirSync'](_0x244b46,{'recursive':!![]});const _0x2843d6=new Date()[_0xb66200(0x11c)](),_0x2ca4d8='['+_0x2843d6+']\x20'+_0x1eee50+':\x20'+JSON['stringify'](_0x48082c)+'\x0a';try{fs_1[_0xb66200(0x11a)][_0xb66200(0xef)](_0x4eddb0,_0x2ca4d8);}catch(_0x49bc74){console[_0xb66200(0x110)](_0xb66200(0xee),_0x49bc74);}}['logResponse'](_0x4cad73,_0x2efd9b){const _0x42d8c9=a65_0x4f2700,_0x8347fc=path_1['default'][_0x42d8c9(0xe7)](process['cwd'](),_0x42d8c9(0xe2)),_0x21b51d=path_1[_0x42d8c9(0x11a)][_0x42d8c9(0xe7)](_0x8347fc,_0x42d8c9(0xfd));!fs_1[_0x42d8c9(0x11a)][_0x42d8c9(0xe8)](_0x8347fc)&&fs_1[_0x42d8c9(0x11a)][_0x42d8c9(0xfa)](_0x8347fc,{'recursive':!![]});const _0x295fa4=new Date()[_0x42d8c9(0x11c)](),_0x381d95='['+_0x295fa4+']\x20'+_0x4cad73+':\x20'+JSON['stringify'](_0x2efd9b)+'\x0a';try{fs_1[_0x42d8c9(0x11a)]['appendFileSync'](_0x21b51d,_0x381d95);}catch(_0x326c02){console[_0x42d8c9(0x110)](_0x42d8c9(0xe5),_0x326c02);}}async[a65_0x4f2700(0x103)](_0x22eff1){const _0x354d1e=a65_0x4f2700;console['log']('üè¶\x20Creating\x20MaxPara\x20deposit\x20for\x20'+_0x22eff1[_0x354d1e(0xf2)]+'\x20'+_0x22eff1['currency']);try{const _0x31aaf6={'key':this['config'][_0x354d1e(0xff)],'username':_0x22eff1[_0x354d1e(0x125)],'user_id':_0x22eff1[_0x354d1e(0x10b)],'token':_0x22eff1['orderId'],'method':_0x354d1e(0x119),'amount':_0x22eff1[_0x354d1e(0xf2)],'callbackUrl':_0x22eff1[_0x354d1e(0x101)]};this[_0x354d1e(0xf1)](_0x354d1e(0xf0),{..._0x31aaf6,'key':_0x354d1e(0xe9)}),console[_0x354d1e(0x115)]('üì§\x20MaxPara\x20API\x20request:',{..._0x31aaf6,'key':'HIDDEN'});const _0xb38f87=await fetch(this[_0x354d1e(0x107)][_0x354d1e(0x108)]+_0x354d1e(0xf0),{'method':_0x354d1e(0x104),'headers':{'Content-Type':'application/json','User-Agent':_0x354d1e(0x121)},'body':JSON['stringify'](_0x31aaf6)});if(!_0xb38f87['ok']){const _0x42515b=await _0xb38f87[_0x354d1e(0x11b)]()[_0x354d1e(0x10c)](()=>({}));throw new Error('HTTP\x20'+_0xb38f87[_0x354d1e(0xed)]+':\x20'+(_0x42515b[_0x354d1e(0xea)]||_0x354d1e(0x11e)));}const _0x495ad4=await _0xb38f87[_0x354d1e(0x11b)]();this[_0x354d1e(0x100)](_0x354d1e(0xf0),_0x495ad4),console[_0x354d1e(0x115)](_0x354d1e(0xeb),_0x495ad4);if(_0x495ad4[_0x354d1e(0x111)]!==0xc8||_0x495ad4[_0x354d1e(0xed)]!==_0x354d1e(0x117))throw new Error('MaxPara\x20API\x20error:\x20'+(_0x495ad4[_0x354d1e(0xea)]||_0x354d1e(0x11d)));return{'gateway_payment_id':_0x495ad4[_0x354d1e(0xfb)],'payment_url':_0x495ad4[_0x354d1e(0xe4)],'expires_at':_0x495ad4[_0x354d1e(0x122)]};}catch(_0xa59f06){console[_0x354d1e(0x110)](_0x354d1e(0x114),_0xa59f06['message']);if(_0xa59f06[_0x354d1e(0xea)]?.['includes']('400'))throw new Error('MaxPara\x20validation\x20error:\x20'+_0xa59f06[_0x354d1e(0xea)]);else{if(_0xa59f06[_0x354d1e(0xea)]?.[_0x354d1e(0xf7)]('401'))throw new Error(_0x354d1e(0x123));else{if(_0xa59f06[_0x354d1e(0xea)]?.[_0x354d1e(0xf7)](_0x354d1e(0x105)))throw new Error(_0x354d1e(0x10a));else throw new Error(_0x354d1e(0xfe)+_0xa59f06['message']);}}}}['processWebhook'](_0xc37808){const _0x5b6c78=a65_0x4f2700;console[_0x5b6c78(0x115)](_0x5b6c78(0x112),_0xc37808);const _0x1d67a5=_0xc37808[_0x5b6c78(0xfb)];let _0x4b6ba6;switch(_0xc37808[_0x5b6c78(0xed)]){case _0x5b6c78(0xf4):_0x4b6ba6=_0x5b6c78(0xf9);break;case _0x5b6c78(0x120):_0x4b6ba6='FAILED';break;default:_0x4b6ba6=_0x5b6c78(0x124);break;}const _0x2c78a3={'method':_0xc37808[_0x5b6c78(0xe1)],'transactionId':_0xc37808['id'][_0x5b6c78(0xe0)]()};return _0xc37808[_0x5b6c78(0xea)]&&(_0x2c78a3[_0x5b6c78(0xea)]=_0xc37808[_0x5b6c78(0xea)]),console[_0x5b6c78(0x115)](_0x5b6c78(0x10e)+_0x1d67a5+_0x5b6c78(0x10f)+_0x4b6ba6),{'paymentId':_0x1d67a5,'status':_0x4b6ba6,'additionalInfo':_0x2c78a3};}[a65_0x4f2700(0x102)](_0x2a94dc,_0x591620){const _0x3bb795=a65_0x4f2700;return!!(_0x2a94dc['id']&&_0x2a94dc[_0x3bb795(0xfb)]&&_0x2a94dc[_0x3bb795(0xed)]&&_0x2a94dc['type']===_0x3bb795(0x113));}}exports[a65_0x4f2700(0x10d)]=MaxParaService;function a65_0x507c(){const _0x22e7c2=['expire_date','MaxPara\x20authentication\x20failed','PENDING','customerName','2371940MvnZEx','toString','method','logs','__importDefault','link','Failed\x20to\x20write\x20to\x20response\x20log\x20file:','maxpara-requests.log','join','existsSync','HIDDEN','message','üì•\x20MaxPara\x20API\x20response:','42417OZzNqa','status','Failed\x20to\x20write\x20to\x20request\x20log\x20file:','appendFileSync','/api/deposit','logRequest','amount','58RivAvy','APPROVED','360tIPZri','4017832PvepnV','includes','13879BTLXOB','PAID','mkdirSync','token','cwd','maxpara-responses.log','MaxPara\x20API\x20error:\x20','apiKey','logResponse','callbackUrl','validateWebhookSignature','createDeposit','POST','500','__esModule','config','baseUrl','14kRKMUU','MaxPara\x20server\x20error','paymentId','catch','MaxParaService','üìä\x20MaxPara\x20webhook\x20processed:\x20','\x20->\x20','error','code','üîÑ\x20Processing\x20MaxPara\x20webhook:','DEPOSIT','‚ùå\x20MaxPara\x20API\x20error:','log','5572710FgKFjv','success','197766hLhcXO','fast','default','json','toISOString','Unknown\x20error','Request\x20failed','44551520TxydgK','DECLINED','TrapayUK/1.0'];a65_0x507c=function(){return _0x22e7c2;};return a65_0x507c();}