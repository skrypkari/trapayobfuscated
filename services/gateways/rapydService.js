'use strict';const a41_0x4cced7=a41_0x4798;function a41_0x4798(_0x5bb2ab,_0x5a52f6){const _0x3c96a5=a41_0x3c96();return a41_0x4798=function(_0x479852,_0x2b8459){_0x479852=_0x479852-0x114;let _0xb71583=_0x3c96a5[_0x479852];return _0xb71583;},a41_0x4798(_0x5bb2ab,_0x5a52f6);}(function(_0x249e07,_0xc609f){const _0x285037=a41_0x4798,_0x1b7f4f=_0x249e07();while(!![]){try{const _0x2449ab=parseInt(_0x285037(0x175))/0x1*(-parseInt(_0x285037(0x179))/0x2)+-parseInt(_0x285037(0x17a))/0x3*(parseInt(_0x285037(0x140))/0x4)+-parseInt(_0x285037(0x161))/0x5+parseInt(_0x285037(0x12f))/0x6*(-parseInt(_0x285037(0x127))/0x7)+-parseInt(_0x285037(0x13c))/0x8*(-parseInt(_0x285037(0x15c))/0x9)+-parseInt(_0x285037(0x150))/0xa*(-parseInt(_0x285037(0x17f))/0xb)+parseInt(_0x285037(0x181))/0xc;if(_0x2449ab===_0xc609f)break;else _0x1b7f4f['push'](_0x1b7f4f['shift']());}catch(_0x1411dd){_0x1b7f4f['push'](_0x1b7f4f['shift']());}}}(a41_0x3c96,0x45e52));Object['defineProperty'](exports,a41_0x4cced7(0x168),{'value':!![]}),exports[a41_0x4cced7(0x13d)]=void 0x0;const loggerService_1=require(a41_0x4cced7(0x12c));class RapydService{constructor(){const _0x22399a=a41_0x4cced7;this[_0x22399a(0x11b)]=_0x22399a(0x17b),console[_0x22399a(0x171)](_0x22399a(0x172));}async[a41_0x4cced7(0x152)](_0xb713e5){const _0x27cffa=a41_0x4cced7,{orderId:_0x3b4f2a,orderName:_0x396a89,amount:_0x120d37,currency:_0x3b0617,usage:_0x3d1f58,maxPayments:_0x3de80c,successUrl:_0x546958,failUrl:_0x3cf1ae}=_0xb713e5,_0x22a70d=_0x3b0617[_0x27cffa(0x115)](),_0x2eacb2='GB';console[_0x27cffa(0x171)]('üá¨üáß\x20Using\x20GB\x20(Britain)\x20as\x20country\x20for\x20Rapyd\x20payment\x20link');const _0x5b2567=_0x27cffa(0x128)+_0x3b4f2a,_0x315b29=_0x27cffa(0x15f)+_0x3b4f2a,_0x3a66dc={'amount':_0x120d37,'cancel_checkout_url':_0x315b29,'complete_checkout_url':_0x5b2567,'complete_payment_url':_0x5b2567,'merchant_reference_id':_0x3b4f2a,'description':'ORDER:\x20'+_0x3b4f2a,'payment_method_types_include':[_0x27cffa(0x126),_0x27cffa(0x176)],'custom_elements':{'display_description':!![]}},_0x277236=Date[_0x27cffa(0x130)]();try{console[_0x27cffa(0x171)](_0x27cffa(0x154)),console[_0x27cffa(0x171)](_0x27cffa(0x155),this[_0x27cffa(0x11b)]),console[_0x27cffa(0x171)](_0x27cffa(0x13b),JSON[_0x27cffa(0x151)](_0x3a66dc,null,0x2)),console[_0x27cffa(0x171)]('üá¨üáß\x20Country:\x20'+_0x2eacb2+'\x20(always\x20GB\x20for\x20Rapyd)'),console[_0x27cffa(0x171)]('üí≥\x20Payment\x20Methods:\x20gb_visa_card,\x20gb_mastercard_card'),loggerService_1[_0x27cffa(0x16c)][_0x27cffa(0x167)]('rapyd',_0x27cffa(0x129),_0x27cffa(0x157),_0x3a66dc);const _0x5bf338=await fetch(this[_0x27cffa(0x11b)],{'method':'POST','headers':{'Content-Type':_0x27cffa(0x15e),'User-Agent':'TesSoft\x20Payment\x20System/1.0'},'body':JSON[_0x27cffa(0x151)](_0x3a66dc)}),_0xf75903=Date[_0x27cffa(0x130)]()-_0x277236;console['log']('===\x20RAPYD\x20API\x20RESPONSE\x20(White\x20Domain)\x20==='),console['log']('Status:',_0x5bf338[_0x27cffa(0x14d)]),console[_0x27cffa(0x171)](_0x27cffa(0x173),_0x5bf338[_0x27cffa(0x131)]),console[_0x27cffa(0x171)](_0x27cffa(0x144),Object[_0x27cffa(0x149)](_0x5bf338['headers'][_0x27cffa(0x170)]())),console[_0x27cffa(0x171)](_0x27cffa(0x12e),_0xf75903+'ms');const _0xdfc0f3=await _0x5bf338[_0x27cffa(0x114)]();console[_0x27cffa(0x171)](_0x27cffa(0x16d),_0xdfc0f3);if(!_0x5bf338['ok']){console['error']('===\x20RAPYD\x20API\x20ERROR\x20==='),console[_0x27cffa(0x14e)](_0x27cffa(0x136),_0x5bf338[_0x27cffa(0x14d)]),console[_0x27cffa(0x14e)](_0x27cffa(0x16e),_0xdfc0f3),loggerService_1[_0x27cffa(0x16c)][_0x27cffa(0x139)](_0x27cffa(0x166),_0x27cffa(0x129),_0x5bf338[_0x27cffa(0x14d)],_0xdfc0f3,_0xf75903),loggerService_1[_0x27cffa(0x16c)]['logWhiteDomainError']('rapyd',_0x27cffa(0x129),'HTTP\x20'+_0x5bf338['status']+':\x20'+_0xdfc0f3);throw new Error(_0x27cffa(0x135)+_0x5bf338[_0x27cffa(0x14d)]+_0x27cffa(0x120)+_0xdfc0f3);}let _0x333371;try{_0x333371=JSON[_0x27cffa(0x137)](_0xdfc0f3);}catch(_0x1b4be1){console[_0x27cffa(0x14e)](_0x27cffa(0x14f),_0x1b4be1),loggerService_1[_0x27cffa(0x16c)]['logWhiteDomainError'](_0x27cffa(0x166),_0x27cffa(0x129),_0x27cffa(0x182)+_0x1b4be1);throw new Error(_0x27cffa(0x11a)+_0xdfc0f3);}console['log'](_0x27cffa(0x159)),console[_0x27cffa(0x171)](_0x27cffa(0x14a),JSON[_0x27cffa(0x151)](_0x333371,null,0x2)),loggerService_1[_0x27cffa(0x16c)]['logWhiteDomainResponse'](_0x27cffa(0x166),'/v1/hosted/payment_links',_0x5bf338[_0x27cffa(0x14d)],_0x333371,_0xf75903);if(_0x333371[_0x27cffa(0x14d)]?.[_0x27cffa(0x14d)]!==_0x27cffa(0x11f)){const _0x3356af=_0x333371['status']?.['message']||_0x27cffa(0x123),_0x1dee36=_0x333371[_0x27cffa(0x14d)]?.[_0x27cffa(0x17e)]||_0x27cffa(0x17c);console[_0x27cffa(0x14e)](_0x27cffa(0x132)),console[_0x27cffa(0x14e)](_0x27cffa(0x13e),_0x1dee36),console[_0x27cffa(0x14e)]('Error\x20Message:',_0x3356af),console[_0x27cffa(0x14e)](_0x27cffa(0x145),_0x333371[_0x27cffa(0x14d)]),loggerService_1[_0x27cffa(0x16c)][_0x27cffa(0x160)](_0x27cffa(0x166),'/v1/hosted/payment_links',_0x27cffa(0x153)+_0x1dee36+_0x27cffa(0x116)+_0x3356af);throw new Error(_0x27cffa(0x12a)+_0x1dee36+_0x27cffa(0x116)+_0x3356af);}if(!_0x333371[_0x27cffa(0x14b)]?.['id']||!_0x333371['data']?.[_0x27cffa(0x12b)]){console[_0x27cffa(0x14e)](_0x27cffa(0x143)),console[_0x27cffa(0x14e)](_0x27cffa(0x16a)),console[_0x27cffa(0x14e)](_0x27cffa(0x13a),_0x333371[_0x27cffa(0x14b)]),loggerService_1[_0x27cffa(0x16c)]['logWhiteDomainError'](_0x27cffa(0x166),_0x27cffa(0x129),_0x27cffa(0x15a));throw new Error(_0x27cffa(0x11d));}return console[_0x27cffa(0x171)](_0x27cffa(0x141)),console[_0x27cffa(0x171)]('Payment\x20Link\x20ID:',_0x333371['data']['id']),console[_0x27cffa(0x171)]('Redirect\x20URL:',_0x333371[_0x27cffa(0x14b)][_0x27cffa(0x12b)]),console[_0x27cffa(0x171)](_0x27cffa(0x16b)+_0x2eacb2+'\x20(GB\x20-\x20Britain)'),console['log']('üí≥\x20Payment\x20Methods:\x20gb_visa_card,\x20gb_mastercard_card'),{'gateway_payment_id':_0x333371[_0x27cffa(0x14b)]['id'],'payment_url':_0x333371[_0x27cffa(0x14b)][_0x27cffa(0x12b)]};}catch(_0xd8eca9){console[_0x27cffa(0x14e)](_0x27cffa(0x165)),console[_0x27cffa(0x14e)](_0x27cffa(0x11e),_0xd8eca9),loggerService_1[_0x27cffa(0x16c)][_0x27cffa(0x160)]('rapyd',_0x27cffa(0x129),_0xd8eca9);if(_0xd8eca9 instanceof Error){console[_0x27cffa(0x14e)](_0x27cffa(0x15b),_0xd8eca9[_0x27cffa(0x163)]),console[_0x27cffa(0x14e)](_0x27cffa(0x134),_0xd8eca9[_0x27cffa(0x174)]);throw new Error(_0x27cffa(0x146)+_0xd8eca9[_0x27cffa(0x163)]);}throw new Error('Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20Unknown\x20error');}}async[a41_0x4cced7(0x11c)](_0x4dd84c){const _0x3fde85=a41_0x4cced7,_0x3c15e7=Date[_0x3fde85(0x130)]();try{loggerService_1['loggerService'][_0x3fde85(0x167)](_0x3fde85(0x166),'/v1/hosted/payment_links/'+_0x4dd84c,_0x3fde85(0x138),{});const _0x4750a6=await fetch(this['apiUrl']+'/'+_0x4dd84c,{'method':_0x3fde85(0x138),'headers':{'Content-Type':_0x3fde85(0x15e),'User-Agent':'TesSoft\x20Payment\x20System/1.0'}}),_0x1d7e89=Date[_0x3fde85(0x130)]()-_0x3c15e7;if(!_0x4750a6['ok']){const _0x4603de=await _0x4750a6[_0x3fde85(0x114)]();loggerService_1[_0x3fde85(0x16c)][_0x3fde85(0x139)](_0x3fde85(0x166),_0x3fde85(0x17d)+_0x4dd84c,_0x4750a6['status'],_0x4603de,_0x1d7e89);throw new Error(_0x3fde85(0x135)+_0x4750a6[_0x3fde85(0x14d)]);}const _0x3adeed=await _0x4750a6[_0x3fde85(0x14c)]();loggerService_1['loggerService'][_0x3fde85(0x139)](_0x3fde85(0x166),_0x3fde85(0x17d)+_0x4dd84c,_0x4750a6[_0x3fde85(0x14d)],_0x3adeed,_0x1d7e89);if(_0x3adeed[_0x3fde85(0x14d)]?.[_0x3fde85(0x14d)]!=='SUCCESS'){loggerService_1[_0x3fde85(0x16c)][_0x3fde85(0x160)](_0x3fde85(0x166),_0x3fde85(0x17d)+_0x4dd84c,_0x3fde85(0x147)+(_0x3adeed[_0x3fde85(0x14d)]?.['message']||_0x3fde85(0x169)));throw new Error(_0x3fde85(0x147)+(_0x3adeed['status']?.[_0x3fde85(0x163)]||_0x3fde85(0x169)));}let _0x52d767=_0x3fde85(0x122);if(_0x3adeed[_0x3fde85(0x14b)]?.['status'])switch(_0x3adeed['data'][_0x3fde85(0x14d)][_0x3fde85(0x115)]()){case _0x3fde85(0x178):_0x52d767=_0x3fde85(0x117);break;case _0x3fde85(0x158):_0x52d767=_0x3fde85(0x162);break;case'EXP':_0x52d767='EXPIRED';break;case _0x3fde85(0x13f):_0x52d767=_0x3fde85(0x162);break;case _0x3fde85(0x164):case'ACT':default:_0x52d767=_0x3fde85(0x122);break;}return{'status':_0x52d767,'amount':_0x3adeed[_0x3fde85(0x14b)]?.[_0x3fde85(0x121)],'currency':_0x3adeed[_0x3fde85(0x14b)]?.[_0x3fde85(0x12d)]};}catch(_0x4c31b3){console['error'](_0x3fde85(0x142),_0x4c31b3),loggerService_1[_0x3fde85(0x16c)][_0x3fde85(0x160)](_0x3fde85(0x166),_0x3fde85(0x17d)+_0x4dd84c,_0x4c31b3);throw new Error(_0x3fde85(0x156)+(_0x4c31b3 instanceof Error?_0x4c31b3[_0x3fde85(0x163)]:_0x3fde85(0x169)));}}async[a41_0x4cced7(0x180)](_0x4f2330){const _0x463a06=a41_0x4cced7;console[_0x463a06(0x171)](_0x463a06(0x125),_0x4f2330);let _0x325c54=_0x463a06(0x122);switch(_0x4f2330[_0x463a06(0x15d)]?.[_0x463a06(0x115)]()){case'PAYMENT_COMPLETED':_0x4f2330['data']?.[_0x463a06(0x133)]===!![]&&_0x4f2330[_0x463a06(0x14b)]?.[_0x463a06(0x14d)]===_0x463a06(0x178)?_0x325c54=_0x463a06(0x117):_0x325c54=_0x463a06(0x122);break;case _0x463a06(0x119):_0x325c54=_0x463a06(0x162);break;case _0x463a06(0x118):_0x325c54='EXPIRED';break;case _0x463a06(0x177):_0x325c54=_0x463a06(0x162);break;default:switch(_0x4f2330[_0x463a06(0x14b)]?.[_0x463a06(0x14d)]?.[_0x463a06(0x115)]()){case _0x463a06(0x178):_0x4f2330['data']?.[_0x463a06(0x133)]===!![]?_0x325c54='PAID':_0x325c54=_0x463a06(0x162);break;case _0x463a06(0x158):_0x325c54=_0x463a06(0x162);break;case _0x463a06(0x16f):_0x325c54='EXPIRED';break;case _0x463a06(0x13f):_0x325c54=_0x463a06(0x162);break;case _0x463a06(0x164):case _0x463a06(0x148):default:_0x325c54=_0x463a06(0x122);break;}break;}return{'paymentId':_0x4f2330['data']?.[_0x463a06(0x124)]||'','status':_0x325c54,'amount':_0x4f2330['data']?.[_0x463a06(0x121)],'currency':_0x4f2330['data']?.['currency']};}}exports[a41_0x4cced7(0x13d)]=RapydService;function a41_0x3c96(){const _0x3f37be=['Failed\x20to\x20parse\x20JSON\x20response:','50eyUBwb','stringify','createPaymentLink','Business\x20Error\x20(','===\x20RAPYD\x20API\x20REQUEST\x20(White\x20Domain\x20-\x20Updated\x20Format)\x20===','URL:','Failed\x20to\x20verify\x20Rapyd\x20payment:\x20','POST','CAN','===\x20PARSED\x20RAPYD\x20RESPONSE\x20===','Incomplete\x20response:\x20missing\x20id\x20or\x20redirect_url','Error\x20message:','8964nmNuJK','type','application/json','https://tesoft.uk/gateway/fail.php?id=','logWhiteDomainError','705215pCCJIE','FAILED','message','NEW','===\x20RAPYD\x20SERVICE\x20ERROR\x20===','rapyd','logWhiteDomainRequest','__esModule','Unknown\x20error','Missing\x20id\x20or\x20redirect_url\x20in\x20response','üá¨üáß\x20Country\x20used:\x20','loggerService','Raw\x20Response\x20Body:','Response\x20Body:','EXP','entries','log','üåê\x20Rapyd\x20service\x20initialized\x20with\x20white\x20domain\x20proxy','Status\x20Text:','stack','521315GvIBfx','gb_mastercard_card','PAYMENT_FAILED','CLO','2WRzlbI','15AzvQQj','https://tesoft.uk/gateway/rapyd/','UNKNOWN','/v1/hosted/payment_links/','error_code','1067143lSkeqA','processWebhook','4286544VafaxX','JSON\x20Parse\x20Error:\x20','text','toUpperCase','):\x20','PAID','PAYMENT_EXPIRED','PAYMENT_CANCELED','Invalid\x20JSON\x20response\x20from\x20Rapyd\x20API:\x20','apiUrl','verifyPayment','Invalid\x20response\x20from\x20Rapyd\x20API:\x20missing\x20id\x20or\x20redirect_url','Error\x20details:','SUCCESS',',\x20body:\x20','amount','PENDING','Unknown\x20error\x20from\x20Rapyd\x20API','merchant_reference_id','Processing\x20Rapyd\x20webhook:','gb_visa_card','95655QPDsZK','https://tesoft.uk/gateway/success.php?id=','/v1/hosted/payment_links','Rapyd\x20API\x20error\x20(','redirect_url','../loggerService','currency','Response\x20Time:','132FpWcgG','now','statusText','===\x20RAPYD\x20API\x20BUSINESS\x20ERROR\x20===','paid','Error\x20stack:','HTTP\x20error!\x20status:\x20','HTTP\x20Status:','parse','GET','logWhiteDomainResponse','Response\x20data:','Request\x20Body\x20(Updated\x20Format):','4528ThNQdf','RapydService','Error\x20Code:','ERR','125388OlXujx','===\x20RAPYD\x20SUCCESS\x20===','Rapyd\x20payment\x20verification\x20error:','===\x20RAPYD\x20API\x20INCOMPLETE\x20RESPONSE\x20===','Headers:','Full\x20Error\x20Data:','Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20','Rapyd\x20API\x20error:\x20','ACT','fromEntries','Parsed\x20Result:','data','json','status','error'];a41_0x3c96=function(){return _0x3f37be;};return a41_0x3c96();}