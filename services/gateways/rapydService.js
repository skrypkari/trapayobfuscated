'use strict';const a44_0x4fec60=a44_0x5356;(function(_0x4ced2d,_0xba556a){const _0xd79779=a44_0x5356,_0x299b73=_0x4ced2d();while(!![]){try{const _0x3fc7fd=parseInt(_0xd79779(0x132))/0x1+parseInt(_0xd79779(0x147))/0x2*(parseInt(_0xd79779(0x171))/0x3)+-parseInt(_0xd79779(0x16d))/0x4*(-parseInt(_0xd79779(0x14d))/0x5)+parseInt(_0xd79779(0x157))/0x6+-parseInt(_0xd79779(0x15f))/0x7*(-parseInt(_0xd79779(0x150))/0x8)+-parseInt(_0xd79779(0x172))/0x9+-parseInt(_0xd79779(0x127))/0xa;if(_0x3fc7fd===_0xba556a)break;else _0x299b73['push'](_0x299b73['shift']());}catch(_0x14ac68){_0x299b73['push'](_0x299b73['shift']());}}}(a44_0x3e3a,0xa941b));Object[a44_0x4fec60(0x140)](exports,a44_0x4fec60(0x17b),{'value':!![]}),exports['RapydService']=void 0x0;const loggerService_1=require(a44_0x4fec60(0x160));class RapydService{constructor(){const _0x3c0b0a=a44_0x4fec60;this['apiUrl']=_0x3c0b0a(0x16b),console[_0x3c0b0a(0x155)](_0x3c0b0a(0x12f));}async[a44_0x4fec60(0x175)](_0x192524){const _0x1f4680=a44_0x4fec60,{orderId:_0x37aec7,orderName:_0x347c61,amount:_0x303815,currency:_0x356c5c,usage:_0x18afd7,maxPayments:_0x20d36f,successUrl:_0x727edf,failUrl:_0x1d65a2}=_0x192524,_0xc9b5f5=_0x356c5c[_0x1f4680(0x13a)](),_0x14e261='GB';console[_0x1f4680(0x155)](_0x1f4680(0x17f));const _0x11bb51=_0x1f4680(0x121)+_0x37aec7,_0x5e7b9e=_0x1f4680(0x148)+_0x37aec7,_0x2f4519={'amount':_0x303815,'currency':_0xc9b5f5,'cancel_checkout_url':_0x5e7b9e,'complete_checkout_url':_0x11bb51,'complete_payment_url':_0x11bb51,'merchant_reference_id':_0x37aec7,'description':_0x1f4680(0x137)+_0x37aec7,'country':'GB','payment_method_types_include':['gb_visa_card','gb_mastercard_card'],'custom_elements':{'display_description':!![]}},_0x1d1fb6=Date[_0x1f4680(0x130)]();try{console[_0x1f4680(0x155)](_0x1f4680(0x16f)),console[_0x1f4680(0x155)]('URL:',this['apiUrl']),console[_0x1f4680(0x155)](_0x1f4680(0x138),JSON[_0x1f4680(0x156)](_0x2f4519,null,0x2)),console['log']('🇬🇧\x20Country:\x20'+_0x14e261+_0x1f4680(0x167)),console[_0x1f4680(0x155)](_0x1f4680(0x166)),loggerService_1['loggerService'][_0x1f4680(0x14c)]('rapyd',_0x1f4680(0x11f),_0x1f4680(0x177),_0x2f4519);const _0x531b05=await fetch(this[_0x1f4680(0x134)],{'method':_0x1f4680(0x177),'headers':{'Content-Type':_0x1f4680(0x185),'User-Agent':_0x1f4680(0x179)},'body':JSON[_0x1f4680(0x156)](_0x2f4519)}),_0x3190bd=Date[_0x1f4680(0x130)]()-_0x1d1fb6;console['log'](_0x1f4680(0x15e)),console['log'](_0x1f4680(0x17d),_0x531b05[_0x1f4680(0x13d)]),console['log']('Status\x20Text:',_0x531b05['statusText']),console['log'](_0x1f4680(0x13e),Object['fromEntries'](_0x531b05['headers'][_0x1f4680(0x180)]())),console[_0x1f4680(0x155)]('Response\x20Time:',_0x3190bd+'ms');const _0xceb44d=await _0x531b05[_0x1f4680(0x169)]();console[_0x1f4680(0x155)](_0x1f4680(0x18a),_0xceb44d);if(!_0x531b05['ok']){console[_0x1f4680(0x136)]('===\x20RAPYD\x20API\x20ERROR\x20==='),console[_0x1f4680(0x136)]('HTTP\x20Status:',_0x531b05[_0x1f4680(0x13d)]),console[_0x1f4680(0x136)](_0x1f4680(0x159),_0xceb44d),loggerService_1[_0x1f4680(0x14f)][_0x1f4680(0x142)](_0x1f4680(0x163),_0x1f4680(0x11f),_0x531b05[_0x1f4680(0x13d)],_0xceb44d,_0x3190bd),loggerService_1['loggerService'][_0x1f4680(0x184)]('rapyd',_0x1f4680(0x11f),_0x1f4680(0x154)+_0x531b05[_0x1f4680(0x13d)]+':\x20'+_0xceb44d);throw new Error('HTTP\x20error!\x20status:\x20'+_0x531b05[_0x1f4680(0x13d)]+',\x20body:\x20'+_0xceb44d);}let _0x1891c4;try{_0x1891c4=JSON['parse'](_0xceb44d);}catch(_0x29e4f7){console['error'](_0x1f4680(0x170),_0x29e4f7),loggerService_1[_0x1f4680(0x14f)][_0x1f4680(0x184)](_0x1f4680(0x163),'/v1/hosted/payment_links',_0x1f4680(0x144)+_0x29e4f7);throw new Error(_0x1f4680(0x12d)+_0xceb44d);}console[_0x1f4680(0x155)](_0x1f4680(0x15c)),console[_0x1f4680(0x155)]('Parsed\x20Result:',JSON[_0x1f4680(0x156)](_0x1891c4,null,0x2)),loggerService_1['loggerService'][_0x1f4680(0x142)](_0x1f4680(0x163),'/v1/hosted/payment_links',_0x531b05[_0x1f4680(0x13d)],_0x1891c4,_0x3190bd);if(_0x1891c4['status']?.[_0x1f4680(0x13d)]!==_0x1f4680(0x122)){const _0x39c5d1=_0x1891c4['status']?.[_0x1f4680(0x173)]||_0x1f4680(0x123),_0xbc96ea=_0x1891c4['status']?.[_0x1f4680(0x11e)]||_0x1f4680(0x149);console['error']('===\x20RAPYD\x20API\x20BUSINESS\x20ERROR\x20==='),console['error']('Error\x20Code:',_0xbc96ea),console[_0x1f4680(0x136)](_0x1f4680(0x12c),_0x39c5d1),console['error'](_0x1f4680(0x176),_0x1891c4[_0x1f4680(0x13d)]),loggerService_1['loggerService']['logWhiteDomainError'](_0x1f4680(0x163),_0x1f4680(0x11f),_0x1f4680(0x125)+_0xbc96ea+'):\x20'+_0x39c5d1);throw new Error(_0x1f4680(0x183)+_0xbc96ea+_0x1f4680(0x17c)+_0x39c5d1);}if(!_0x1891c4[_0x1f4680(0x153)]?.['id']||!_0x1891c4[_0x1f4680(0x153)]?.[_0x1f4680(0x11d)]){console[_0x1f4680(0x136)](_0x1f4680(0x168)),console[_0x1f4680(0x136)](_0x1f4680(0x146)),console['error'](_0x1f4680(0x139),_0x1891c4[_0x1f4680(0x153)]),loggerService_1['loggerService']['logWhiteDomainError'](_0x1f4680(0x163),_0x1f4680(0x11f),_0x1f4680(0x181));throw new Error(_0x1f4680(0x161));}return console[_0x1f4680(0x155)](_0x1f4680(0x174)),console[_0x1f4680(0x155)](_0x1f4680(0x151),_0x1891c4[_0x1f4680(0x153)]['id']),console[_0x1f4680(0x155)](_0x1f4680(0x13c),_0x1891c4['data'][_0x1f4680(0x11d)]),console[_0x1f4680(0x155)](_0x1f4680(0x16c)+_0x14e261+'\x20(GB\x20-\x20Britain)'),console[_0x1f4680(0x155)](_0x1f4680(0x166)),{'gateway_payment_id':_0x1891c4['data']['id'],'payment_url':_0x1891c4['data'][_0x1f4680(0x11d)]};}catch(_0x39d3da){console[_0x1f4680(0x136)]('===\x20RAPYD\x20SERVICE\x20ERROR\x20==='),console[_0x1f4680(0x136)]('Error\x20details:',_0x39d3da),loggerService_1[_0x1f4680(0x14f)][_0x1f4680(0x184)](_0x1f4680(0x163),_0x1f4680(0x11f),_0x39d3da);if(_0x39d3da instanceof Error){console[_0x1f4680(0x136)]('Error\x20message:',_0x39d3da[_0x1f4680(0x173)]),console['error']('Error\x20stack:',_0x39d3da['stack']);throw new Error(_0x1f4680(0x126)+_0x39d3da[_0x1f4680(0x173)]);}throw new Error(_0x1f4680(0x15b));}}async['verifyPayment'](_0x42a0ee){const _0x336b05=a44_0x4fec60,_0x2e4de2=Date[_0x336b05(0x130)]();try{loggerService_1[_0x336b05(0x14f)][_0x336b05(0x14c)](_0x336b05(0x163),_0x336b05(0x14a)+_0x42a0ee,_0x336b05(0x182),{});const _0x20ebf6=await fetch(this['apiUrl']+'/'+_0x42a0ee,{'method':_0x336b05(0x182),'headers':{'Content-Type':_0x336b05(0x185),'User-Agent':_0x336b05(0x179)}}),_0x38263e=Date[_0x336b05(0x130)]()-_0x2e4de2;if(!_0x20ebf6['ok']){const _0x211555=await _0x20ebf6[_0x336b05(0x169)]();loggerService_1['loggerService'][_0x336b05(0x142)](_0x336b05(0x163),_0x336b05(0x14a)+_0x42a0ee,_0x20ebf6[_0x336b05(0x13d)],_0x211555,_0x38263e);throw new Error(_0x336b05(0x12b)+_0x20ebf6[_0x336b05(0x13d)]);}const _0x4bdb06=await _0x20ebf6['json']();loggerService_1['loggerService'][_0x336b05(0x142)](_0x336b05(0x163),'/v1/hosted/payment_links/'+_0x42a0ee,_0x20ebf6[_0x336b05(0x13d)],_0x4bdb06,_0x38263e);if(_0x4bdb06[_0x336b05(0x13d)]?.[_0x336b05(0x13d)]!=='SUCCESS'){loggerService_1[_0x336b05(0x14f)][_0x336b05(0x184)](_0x336b05(0x163),_0x336b05(0x14a)+_0x42a0ee,_0x336b05(0x164)+(_0x4bdb06[_0x336b05(0x13d)]?.[_0x336b05(0x173)]||_0x336b05(0x15a)));throw new Error(_0x336b05(0x164)+(_0x4bdb06[_0x336b05(0x13d)]?.['message']||_0x336b05(0x15a)));}let _0x4f5917=_0x336b05(0x16e);if(_0x4bdb06[_0x336b05(0x153)]?.[_0x336b05(0x13d)])switch(_0x4bdb06[_0x336b05(0x153)][_0x336b05(0x13d)][_0x336b05(0x13a)]()){case'CLO':_0x4f5917=_0x336b05(0x145);break;case _0x336b05(0x16a):_0x4f5917=_0x336b05(0x186);break;case _0x336b05(0x15d):_0x4f5917=_0x336b05(0x152);break;case _0x336b05(0x158):_0x4f5917='FAILED';break;case _0x336b05(0x133):case _0x336b05(0x12a):default:_0x4f5917=_0x336b05(0x16e);break;}return{'status':_0x4f5917,'amount':_0x4bdb06[_0x336b05(0x153)]?.['amount'],'currency':_0x4bdb06['data']?.[_0x336b05(0x135)]};}catch(_0x3463c5){console[_0x336b05(0x136)]('Rapyd\x20payment\x20verification\x20error:',_0x3463c5),loggerService_1['loggerService'][_0x336b05(0x184)](_0x336b05(0x163),'/v1/hosted/payment_links/'+_0x42a0ee,_0x3463c5);throw new Error(_0x336b05(0x165)+(_0x3463c5 instanceof Error?_0x3463c5[_0x336b05(0x173)]:_0x336b05(0x15a)));}}async[a44_0x4fec60(0x14e)](_0x18a36a){const _0x23421f=a44_0x4fec60;console[_0x23421f(0x155)](_0x23421f(0x162),_0x18a36a);let _0x2990ca=_0x23421f(0x16e),_0x547ecf;_0x18a36a['data']?.[_0x23421f(0x17e)]&&(_0x547ecf=_0x18a36a[_0x23421f(0x153)][_0x23421f(0x17e)],console[_0x23421f(0x155)](_0x23421f(0x131)+_0x547ecf));switch(_0x18a36a[_0x23421f(0x124)]?.['toUpperCase']()){case _0x23421f(0x143):_0x18a36a[_0x23421f(0x153)]?.['paid']===!![]&&_0x18a36a[_0x23421f(0x153)]?.[_0x23421f(0x13d)]===_0x23421f(0x187)?_0x2990ca=_0x23421f(0x145):_0x2990ca=_0x23421f(0x16e);break;case _0x23421f(0x189):_0x2990ca='FAILED';break;case'PAYMENT_EXPIRED':_0x2990ca=_0x23421f(0x152);break;case'PAYMENT_FAILED':_0x2990ca=_0x23421f(0x186);!_0x547ecf&&_0x18a36a[_0x23421f(0x153)]?.[_0x23421f(0x17e)]&&(_0x547ecf=_0x18a36a[_0x23421f(0x153)][_0x23421f(0x17e)]);break;default:switch(_0x18a36a[_0x23421f(0x153)]?.[_0x23421f(0x13d)]?.[_0x23421f(0x13a)]()){case'CLO':_0x18a36a[_0x23421f(0x153)]?.[_0x23421f(0x120)]===!![]?_0x2990ca=_0x23421f(0x145):_0x2990ca=_0x23421f(0x186);break;case _0x23421f(0x16a):_0x2990ca='FAILED';break;case _0x23421f(0x15d):_0x2990ca='EXPIRED';break;case _0x23421f(0x158):_0x2990ca=_0x23421f(0x186);!_0x547ecf&&_0x18a36a[_0x23421f(0x153)]?.[_0x23421f(0x17e)]&&(_0x547ecf=_0x18a36a[_0x23421f(0x153)][_0x23421f(0x17e)]);break;case _0x23421f(0x133):case _0x23421f(0x12a):default:_0x2990ca=_0x23421f(0x16e);break;}break;}const _0x102b71={};return _0x18a36a[_0x23421f(0x153)]?.[_0x23421f(0x17a)]?.[_0x23421f(0x13b)]&&(_0x102b71['cardLast4']=_0x18a36a[_0x23421f(0x153)][_0x23421f(0x17a)][_0x23421f(0x13b)]),_0x18a36a[_0x23421f(0x153)]?.['payment_method_type']&&(_0x102b71['paymentMethod']=_0x18a36a[_0x23421f(0x153)][_0x23421f(0x141)]),_0x18a36a[_0x23421f(0x153)]?.['error_code']&&(_0x102b71[_0x23421f(0x128)]=_0x18a36a[_0x23421f(0x153)][_0x23421f(0x11e)]),_0x18a36a[_0x23421f(0x153)]?.[_0x23421f(0x13f)]&&(_0x102b71[_0x23421f(0x178)]=_0x18a36a[_0x23421f(0x153)][_0x23421f(0x13f)]),console[_0x23421f(0x155)]('🔄\x20Rapyd\x20webhook\x20processed:\x20status='+_0x2990ca+_0x23421f(0x12e)+(_0x547ecf||'none')),{'paymentId':_0x18a36a[_0x23421f(0x153)]?.[_0x23421f(0x14b)]||'','status':_0x2990ca,'amount':_0x18a36a[_0x23421f(0x153)]?.[_0x23421f(0x188)],'currency':_0x18a36a['data']?.[_0x23421f(0x135)],'failureMessage':_0x547ecf,'additionalInfo':_0x102b71};}}function a44_0x5356(_0x54951d,_0x1fde22){const _0x3e3ad7=a44_0x3e3a();return a44_0x5356=function(_0x5356a7,_0x3eddf2){_0x5356a7=_0x5356a7-0x11d;let _0x4fcea8=_0x3e3ad7[_0x5356a7];return _0x4fcea8;},a44_0x5356(_0x54951d,_0x1fde22);}exports[a44_0x4fec60(0x129)]=RapydService;function a44_0x3e3a(){const _0x577106=['failureCode','TesSoft\x20Payment\x20System/1.0','payment_method_data','__esModule','):\x20','Status:','failure_message','🇬🇧\x20Using\x20GB\x20(Britain)\x20as\x20country\x20for\x20Rapyd\x20payment\x20link','entries','Incomplete\x20response:\x20missing\x20id\x20or\x20redirect_url','GET','Rapyd\x20API\x20error\x20(','logWhiteDomainError','application/json','FAILED','CLO','amount','PAYMENT_CANCELED','Raw\x20Response\x20Body:','redirect_url','error_code','/v1/hosted/payment_links','paid','https://tesoft.uk/gateway/success.php?id=','SUCCESS','Unknown\x20error\x20from\x20Rapyd\x20API','type','Business\x20Error\x20(','Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20','11150660GFrijC','errorCode','RapydService','ACT','HTTP\x20error!\x20status:\x20','Error\x20Message:','Invalid\x20JSON\x20response\x20from\x20Rapyd\x20API:\x20',',\x20failureMessage=','🌐\x20Rapyd\x20service\x20initialized\x20with\x20white\x20domain\x20proxy','now','💥\x20Rapyd\x20failure\x20message:\x20','92776dbBcEh','NEW','apiUrl','currency','error','ORDER:\x20','Request\x20Body\x20(Updated\x20Format):','Response\x20data:','toUpperCase','last4','Redirect\x20URL:','status','Headers:','failure_code','defineProperty','payment_method_type','logWhiteDomainResponse','PAYMENT_COMPLETED','JSON\x20Parse\x20Error:\x20','PAID','Missing\x20id\x20or\x20redirect_url\x20in\x20response','518176AuqiEZ','https://tesoft.uk/gateway/fail.php?id=','UNKNOWN','/v1/hosted/payment_links/','merchant_reference_id','logWhiteDomainRequest','10OwOOXi','processWebhook','loggerService','16CPHcTx','Payment\x20Link\x20ID:','EXPIRED','data','HTTP\x20','log','stringify','7073796klAglb','ERR','Response\x20Body:','Unknown\x20error','Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20Unknown\x20error','===\x20PARSED\x20RAPYD\x20RESPONSE\x20===','EXP','===\x20RAPYD\x20API\x20RESPONSE\x20(White\x20Domain)\x20===','2731295XqLFqT','../loggerService','Invalid\x20response\x20from\x20Rapyd\x20API:\x20missing\x20id\x20or\x20redirect_url','Processing\x20Rapyd\x20webhook:','rapyd','Rapyd\x20API\x20error:\x20','Failed\x20to\x20verify\x20Rapyd\x20payment:\x20','💳\x20Payment\x20Methods:\x20gb_visa_card,\x20gb_mastercard_card','\x20(always\x20GB\x20for\x20Rapyd)','===\x20RAPYD\x20API\x20INCOMPLETE\x20RESPONSE\x20===','text','CAN','https://tesoft.uk/gateway/rapyd/','🇬🇧\x20Country\x20used:\x20','1756348LYggcH','PENDING','===\x20RAPYD\x20API\x20REQUEST\x20(White\x20Domain\x20-\x20Updated\x20Format)\x20===','Failed\x20to\x20parse\x20JSON\x20response:','3PhuAWY','12429297nSXuMt','message','===\x20RAPYD\x20SUCCESS\x20===','createPaymentLink','Full\x20Error\x20Data:','POST'];a44_0x3e3a=function(){return _0x577106;};return a44_0x3e3a();}