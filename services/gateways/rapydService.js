'use strict';function a53_0x4d3c(_0x4da126,_0x779f3c){const _0x5204dc=a53_0x5204();return a53_0x4d3c=function(_0x4d3ca0,_0x963113){_0x4d3ca0=_0x4d3ca0-0x19b;let _0x13a07b=_0x5204dc[_0x4d3ca0];return _0x13a07b;},a53_0x4d3c(_0x4da126,_0x779f3c);}const a53_0x30e7e5=a53_0x4d3c;(function(_0x177d7c,_0xcce137){const _0xb8382a=a53_0x4d3c,_0x28e6b4=_0x177d7c();while(!![]){try{const _0x20a711=parseInt(_0xb8382a(0x1b4))/0x1*(parseInt(_0xb8382a(0x1d1))/0x2)+parseInt(_0xb8382a(0x1d6))/0x3+parseInt(_0xb8382a(0x206))/0x4*(-parseInt(_0xb8382a(0x1d2))/0x5)+-parseInt(_0xb8382a(0x1dd))/0x6*(parseInt(_0xb8382a(0x1d8))/0x7)+parseInt(_0xb8382a(0x1b9))/0x8*(-parseInt(_0xb8382a(0x1a0))/0x9)+-parseInt(_0xb8382a(0x20e))/0xa+parseInt(_0xb8382a(0x1d9))/0xb;if(_0x20a711===_0xcce137)break;else _0x28e6b4['push'](_0x28e6b4['shift']());}catch(_0x1b9e34){_0x28e6b4['push'](_0x28e6b4['shift']());}}}(a53_0x5204,0xa87c9));Object[a53_0x30e7e5(0x20b)](exports,'__esModule',{'value':!![]}),exports[a53_0x30e7e5(0x1c2)]=void 0x0;const loggerService_1=require(a53_0x30e7e5(0x1de));class RapydService{constructor(){const _0x33f1bf=a53_0x30e7e5;this[_0x33f1bf(0x1aa)]=_0x33f1bf(0x1c9),console[_0x33f1bf(0x1f8)](_0x33f1bf(0x213));}async[a53_0x30e7e5(0x1a3)](_0x223bf5){const _0x1f28d0=a53_0x30e7e5,{orderId:_0x150fb1,orderName:_0xbae81,amount:_0xad53,currency:_0xe565db,usage:_0x102cb1,maxPayments:_0x52bc98,successUrl:_0x126168,failUrl:_0x208608}=_0x223bf5,_0x50c959=_0xe565db['toUpperCase'](),_0x57d111='GB';console[_0x1f28d0(0x1f8)]('🇬🇧\x20Using\x20GB\x20(Britain)\x20as\x20country\x20for\x20Rapyd\x20payment\x20link');const _0x508e80='https://tesoft.uk/gateway/success.php?id='+_0x150fb1,_0x42e435=_0x1f28d0(0x1bd)+_0x150fb1,_0x42e8df={'amount':_0xad53,'currency':_0x50c959,'cancel_checkout_url':_0x42e435,'complete_checkout_url':_0x508e80,'complete_payment_url':_0x508e80,'merchant_reference_id':_0x150fb1,'description':_0x1f28d0(0x1b3)+_0x150fb1,'country':'GB','payment_method_types_include':['gb_visa_card',_0x1f28d0(0x211)],'custom_elements':{'display_description':!![]}};if(_0x50c959!=='EUR'){const _0x742e1=Math['floor'](Date[_0x1f28d0(0x1e1)]()/0x3e8)+0x1e*0x3c;_0x42e8df[_0x1f28d0(0x1a8)]=_0x1f28d0(0x1df),_0x42e8df[_0x1f28d0(0x1ff)]=_0x1f28d0(0x1ab),_0x42e8df[_0x1f28d0(0x1ea)]=_0x742e1,console[_0x1f28d0(0x1f8)](_0x1f28d0(0x1cc)+_0x50c959+'\x20->\x20EUR:'),console[_0x1f28d0(0x1f8)](_0x1f28d0(0x1f2)),console[_0x1f28d0(0x1f8)]('\x20\x20\x20requested_currency:\x20EUR'),console[_0x1f28d0(0x1f8)](_0x1f28d0(0x1eb)+_0x742e1+'\x20('+new Date(_0x742e1*0x3e8)[_0x1f28d0(0x1d7)]()+')');}const _0x477fa6=Date[_0x1f28d0(0x1e1)]();try{console['log'](_0x1f28d0(0x1c0)),console[_0x1f28d0(0x1f8)](_0x1f28d0(0x1a7),this[_0x1f28d0(0x1aa)]),console['log']('Request\x20Body\x20(Updated\x20Format):',JSON[_0x1f28d0(0x209)](_0x42e8df,null,0x2)),console[_0x1f28d0(0x1f8)](_0x1f28d0(0x1a6)+_0x57d111+_0x1f28d0(0x1da)),console[_0x1f28d0(0x1f8)](_0x1f28d0(0x214)),loggerService_1[_0x1f28d0(0x1c5)]['logWhiteDomainRequest'](_0x1f28d0(0x1e3),'/v1/hosted/payment_links',_0x1f28d0(0x20d),_0x42e8df);const _0x3f001a=await fetch(this['apiUrl'],{'method':_0x1f28d0(0x20d),'headers':{'Content-Type':_0x1f28d0(0x218),'User-Agent':'Payment\x20System/1.0'},'body':JSON['stringify'](_0x42e8df)}),_0x4ae503=Date[_0x1f28d0(0x1e1)]()-_0x477fa6;console['log'](_0x1f28d0(0x1d3)),console['log'](_0x1f28d0(0x20f),_0x3f001a['status']),console[_0x1f28d0(0x1f8)](_0x1f28d0(0x219),_0x3f001a[_0x1f28d0(0x21a)]),console[_0x1f28d0(0x1f8)](_0x1f28d0(0x1a2),Object[_0x1f28d0(0x201)](_0x3f001a['headers'][_0x1f28d0(0x1bb)]())),console['log'](_0x1f28d0(0x1fd),_0x4ae503+'ms');const _0xeab5c5=await _0x3f001a[_0x1f28d0(0x1fa)]();console[_0x1f28d0(0x1f8)](_0x1f28d0(0x1b0),_0xeab5c5);if(!_0x3f001a['ok']){console[_0x1f28d0(0x1f5)]('===\x20RAPYD\x20API\x20ERROR\x20==='),console[_0x1f28d0(0x1f5)](_0x1f28d0(0x1ca),_0x3f001a['status']),console[_0x1f28d0(0x1f5)](_0x1f28d0(0x1e4),_0xeab5c5),loggerService_1[_0x1f28d0(0x1c5)][_0x1f28d0(0x1b6)](_0x1f28d0(0x1e3),_0x1f28d0(0x1f9),_0x3f001a[_0x1f28d0(0x1fe)],_0xeab5c5,_0x4ae503),loggerService_1[_0x1f28d0(0x1c5)][_0x1f28d0(0x1b1)](_0x1f28d0(0x1e3),_0x1f28d0(0x1f9),_0x1f28d0(0x1cf)+_0x3f001a[_0x1f28d0(0x1fe)]+':\x20'+_0xeab5c5);throw new Error(_0x1f28d0(0x1e0)+_0x3f001a[_0x1f28d0(0x1fe)]+_0x1f28d0(0x19f)+_0xeab5c5);}let _0x369a68;try{_0x369a68=JSON[_0x1f28d0(0x1e6)](_0xeab5c5);}catch(_0x5cefc8){console[_0x1f28d0(0x1f5)](_0x1f28d0(0x1dc),_0x5cefc8),loggerService_1[_0x1f28d0(0x1c5)][_0x1f28d0(0x1b1)](_0x1f28d0(0x1e3),'/v1/hosted/payment_links',_0x1f28d0(0x19c)+_0x5cefc8);throw new Error(_0x1f28d0(0x1ef)+_0xeab5c5);}console['log'](_0x1f28d0(0x217)),console[_0x1f28d0(0x1f8)]('Parsed\x20Result:',JSON[_0x1f28d0(0x209)](_0x369a68,null,0x2)),loggerService_1[_0x1f28d0(0x1c5)]['logWhiteDomainResponse']('rapyd','/v1/hosted/payment_links',_0x3f001a[_0x1f28d0(0x1fe)],_0x369a68,_0x4ae503);if(_0x369a68[_0x1f28d0(0x1fe)]?.[_0x1f28d0(0x1fe)]!==_0x1f28d0(0x1c7)){const _0x5048df=_0x369a68[_0x1f28d0(0x1fe)]?.['message']||_0x1f28d0(0x1e5),_0x1fcfc8=_0x369a68['status']?.[_0x1f28d0(0x1ce)]||_0x1f28d0(0x1f4);console[_0x1f28d0(0x1f5)](_0x1f28d0(0x21b)),console[_0x1f28d0(0x1f5)]('Error\x20Code:',_0x1fcfc8),console[_0x1f28d0(0x1f5)](_0x1f28d0(0x1ae),_0x5048df),console[_0x1f28d0(0x1f5)](_0x1f28d0(0x1b7),_0x369a68[_0x1f28d0(0x1fe)]),loggerService_1[_0x1f28d0(0x1c5)][_0x1f28d0(0x1b1)](_0x1f28d0(0x1e3),_0x1f28d0(0x1f9),_0x1f28d0(0x1a4)+_0x1fcfc8+_0x1f28d0(0x1e8)+_0x5048df);throw new Error(_0x1f28d0(0x1be)+_0x1fcfc8+'):\x20'+_0x5048df);}if(!_0x369a68[_0x1f28d0(0x1cb)]?.['id']||!_0x369a68[_0x1f28d0(0x1cb)]?.[_0x1f28d0(0x205)]){console[_0x1f28d0(0x1f5)](_0x1f28d0(0x1c4)),console[_0x1f28d0(0x1f5)](_0x1f28d0(0x1c8)),console[_0x1f28d0(0x1f5)]('Response\x20data:',_0x369a68[_0x1f28d0(0x1cb)]),loggerService_1[_0x1f28d0(0x1c5)]['logWhiteDomainError'](_0x1f28d0(0x1e3),_0x1f28d0(0x1f9),'Incomplete\x20response:\x20missing\x20id\x20or\x20redirect_url');throw new Error('Invalid\x20response\x20from\x20Rapyd\x20API:\x20missing\x20id\x20or\x20redirect_url');}return console[_0x1f28d0(0x1f8)](_0x1f28d0(0x1ac)),console[_0x1f28d0(0x1f8)](_0x1f28d0(0x1a1),_0x369a68[_0x1f28d0(0x1cb)]['id']),console[_0x1f28d0(0x1f8)](_0x1f28d0(0x1fc),_0x369a68['data'][_0x1f28d0(0x205)]),console[_0x1f28d0(0x1f8)]('🇬🇧\x20Country\x20used:\x20'+_0x57d111+_0x1f28d0(0x1d5)),console['log'](_0x1f28d0(0x214)),{'gateway_payment_id':_0x369a68[_0x1f28d0(0x1cb)]['id'],'payment_url':_0x369a68[_0x1f28d0(0x1cb)]['redirect_url']};}catch(_0x913af2){console['error'](_0x1f28d0(0x1db)),console['error'](_0x1f28d0(0x1fb),_0x913af2),loggerService_1['loggerService'][_0x1f28d0(0x1b1)](_0x1f28d0(0x1e3),_0x1f28d0(0x1f9),_0x913af2);if(_0x913af2 instanceof Error){console[_0x1f28d0(0x1f5)](_0x1f28d0(0x1cd),_0x913af2['message']),console[_0x1f28d0(0x1f5)](_0x1f28d0(0x203),_0x913af2[_0x1f28d0(0x1ba)]);throw new Error(_0x1f28d0(0x1d4)+_0x913af2['message']);}throw new Error(_0x1f28d0(0x19b));}}async[a53_0x30e7e5(0x208)](_0x1a244f){const _0x432374=a53_0x30e7e5,_0x2b27f9=Date['now']();try{loggerService_1[_0x432374(0x1c5)][_0x432374(0x200)](_0x432374(0x1e3),_0x432374(0x215)+_0x1a244f,'GET',{});const _0x1a9e95=await fetch(this[_0x432374(0x1aa)]+'/'+_0x1a244f,{'method':_0x432374(0x1a5),'headers':{'Content-Type':'application/json','User-Agent':'Payment\x20System/1.0'}}),_0x5bfbe7=Date[_0x432374(0x1e1)]()-_0x2b27f9;if(!_0x1a9e95['ok']){const _0x521f54=await _0x1a9e95[_0x432374(0x1fa)]();loggerService_1[_0x432374(0x1c5)]['logWhiteDomainResponse']('rapyd',_0x432374(0x215)+_0x1a244f,_0x1a9e95[_0x432374(0x1fe)],_0x521f54,_0x5bfbe7);throw new Error('HTTP\x20error!\x20status:\x20'+_0x1a9e95['status']);}const _0x1299d8=await _0x1a9e95[_0x432374(0x212)]();loggerService_1['loggerService']['logWhiteDomainResponse'](_0x432374(0x1e3),'/v1/hosted/payment_links/'+_0x1a244f,_0x1a9e95[_0x432374(0x1fe)],_0x1299d8,_0x5bfbe7);if(_0x1299d8[_0x432374(0x1fe)]?.[_0x432374(0x1fe)]!==_0x432374(0x1c7)){loggerService_1[_0x432374(0x1c5)][_0x432374(0x1b1)](_0x432374(0x1e3),_0x432374(0x215)+_0x1a244f,_0x432374(0x1c6)+(_0x1299d8['status']?.[_0x432374(0x1ec)]||'Unknown\x20error'));throw new Error(_0x432374(0x1c6)+(_0x1299d8[_0x432374(0x1fe)]?.['message']||'Unknown\x20error'));}let _0x21dacc=_0x432374(0x19d);if(_0x1299d8[_0x432374(0x1cb)]?.['status'])switch(_0x1299d8[_0x432374(0x1cb)][_0x432374(0x1fe)][_0x432374(0x20a)]()){case _0x432374(0x1b8):_0x21dacc=_0x432374(0x1e9);break;case'CAN':_0x21dacc=_0x432374(0x1f3);break;case _0x432374(0x1a9):_0x21dacc='EXPIRED';break;case _0x432374(0x216):_0x21dacc=_0x432374(0x1f3);break;case _0x432374(0x1ad):case _0x432374(0x1e2):default:_0x21dacc=_0x432374(0x19d);break;}return{'status':_0x21dacc,'amount':_0x1299d8[_0x432374(0x1cb)]?.[_0x432374(0x1ed)],'currency':_0x1299d8[_0x432374(0x1cb)]?.[_0x432374(0x1ee)]};}catch(_0xe2dc7f){console['error'](_0x432374(0x1f6),_0xe2dc7f),loggerService_1[_0x432374(0x1c5)][_0x432374(0x1b1)]('rapyd',_0x432374(0x215)+_0x1a244f,_0xe2dc7f);throw new Error(_0x432374(0x1b5)+(_0xe2dc7f instanceof Error?_0xe2dc7f[_0x432374(0x1ec)]:'Unknown\x20error'));}}async[a53_0x30e7e5(0x204)](_0x407a81){const _0xad3679=a53_0x30e7e5;console[_0xad3679(0x1f8)](_0xad3679(0x207),_0x407a81);let _0x4b8b22=_0xad3679(0x19d),_0x2081b0;_0x407a81[_0xad3679(0x1cb)]?.['failure_message']&&(_0x2081b0=_0x407a81[_0xad3679(0x1cb)]['failure_message'],console['log'](_0xad3679(0x1f7)+_0x2081b0));switch(_0x407a81[_0xad3679(0x1bf)]?.['toUpperCase']()){case _0xad3679(0x21c):_0x407a81['data']?.['paid']===!![]&&_0x407a81[_0xad3679(0x1cb)]?.[_0xad3679(0x1fe)]==='CLO'?_0x4b8b22=_0xad3679(0x1e9):_0x4b8b22=_0xad3679(0x19d);break;case _0xad3679(0x1c3):_0x4b8b22='FAILED';break;case _0xad3679(0x1e7):_0x4b8b22=_0xad3679(0x1f1);break;case'PAYMENT_FAILED':_0x4b8b22=_0xad3679(0x1f3);!_0x2081b0&&_0x407a81[_0xad3679(0x1cb)]?.[_0xad3679(0x1af)]&&(_0x2081b0=_0x407a81[_0xad3679(0x1cb)][_0xad3679(0x1af)]);break;default:switch(_0x407a81[_0xad3679(0x1cb)]?.[_0xad3679(0x1fe)]?.[_0xad3679(0x20a)]()){case'CLO':_0x407a81[_0xad3679(0x1cb)]?.[_0xad3679(0x1d0)]===!![]?_0x4b8b22='PAID':_0x4b8b22=_0xad3679(0x1f3);break;case'CAN':_0x4b8b22='FAILED';break;case _0xad3679(0x1a9):_0x4b8b22='EXPIRED';break;case _0xad3679(0x216):_0x4b8b22='FAILED';!_0x2081b0&&_0x407a81[_0xad3679(0x1cb)]?.[_0xad3679(0x1af)]&&(_0x2081b0=_0x407a81[_0xad3679(0x1cb)][_0xad3679(0x1af)]);break;case'NEW':case _0xad3679(0x1e2):default:_0x4b8b22=_0xad3679(0x19d);break;}break;}const _0x199b8d={};return _0x407a81['data']?.[_0xad3679(0x21d)]?.[_0xad3679(0x1c1)]&&(_0x199b8d[_0xad3679(0x202)]=_0x407a81[_0xad3679(0x1cb)][_0xad3679(0x21d)][_0xad3679(0x1c1)]),_0x407a81[_0xad3679(0x1cb)]?.[_0xad3679(0x20c)]&&(_0x199b8d[_0xad3679(0x1bc)]=_0x407a81['data']['payment_method_type']),_0x407a81[_0xad3679(0x1cb)]?.[_0xad3679(0x1ce)]&&(_0x199b8d['errorCode']=_0x407a81[_0xad3679(0x1cb)][_0xad3679(0x1ce)]),_0x407a81[_0xad3679(0x1cb)]?.[_0xad3679(0x1b2)]&&(_0x199b8d['failureCode']=_0x407a81[_0xad3679(0x1cb)][_0xad3679(0x1b2)]),console[_0xad3679(0x1f8)](_0xad3679(0x19e)+_0x4b8b22+_0xad3679(0x1f0)+(_0x2081b0||'none')),{'paymentId':_0x407a81[_0xad3679(0x1cb)]?.[_0xad3679(0x210)]||'','status':_0x4b8b22,'amount':_0x407a81[_0xad3679(0x1cb)]?.['amount'],'currency':_0x407a81[_0xad3679(0x1cb)]?.[_0xad3679(0x1ee)],'failureMessage':_0x2081b0,'additionalInfo':_0x199b8d};}}exports[a53_0x30e7e5(0x1c2)]=RapydService;function a53_0x5204(){const _0x3e619b=['logWhiteDomainResponse','Full\x20Error\x20Data:','CLO','697616BRqeHq','stack','entries','paymentMethod','https://tesoft.uk/gateway/fail.php?id=','Rapyd\x20API\x20error\x20(','type','===\x20RAPYD\x20API\x20REQUEST\x20(White\x20Domain\x20-\x20Updated\x20Format)\x20===','last4','RapydService','PAYMENT_CANCELED','===\x20RAPYD\x20API\x20INCOMPLETE\x20RESPONSE\x20===','loggerService','Rapyd\x20API\x20error:\x20','SUCCESS','Missing\x20id\x20or\x20redirect_url\x20in\x20response','https://tesoft.uk/gateway/rapyd/','HTTP\x20Status:','data','💱\x20Adding\x20currency\x20conversion\x20fields\x20for\x20','Error\x20message:','error_code','HTTP\x20','paid','1853316SOAzKg','2265sKjgNr','===\x20RAPYD\x20API\x20RESPONSE\x20(White\x20Domain)\x20===','Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20','\x20(GB\x20-\x20Britain)','2085009prDCBb','toISOString','3584378LerIJG','10241583MshJth','\x20(always\x20GB\x20for\x20Rapyd)','===\x20RAPYD\x20SERVICE\x20ERROR\x20===','Failed\x20to\x20parse\x20JSON\x20response:','12GadYMw','../loggerService','buy','HTTP\x20error!\x20status:\x20','now','ACT','rapyd','Response\x20Body:','Unknown\x20error\x20from\x20Rapyd\x20API','parse','PAYMENT_EXPIRED','):\x20','PAID','expiration','\x20\x20\x20expiration:\x20','message','amount','currency','Invalid\x20JSON\x20response\x20from\x20Rapyd\x20API:\x20',',\x20failureMessage=','EXPIRED','\x20\x20\x20fixed_side:\x20buy','FAILED','UNKNOWN','error','Rapyd\x20payment\x20verification\x20error:','💥\x20Rapyd\x20failure\x20message:\x20','log','/v1/hosted/payment_links','text','Error\x20details:','Redirect\x20URL:','Response\x20Time:','status','requested_currency','logWhiteDomainRequest','fromEntries','cardLast4','Error\x20stack:','processWebhook','redirect_url','1924DOZjyR','Processing\x20Rapyd\x20webhook:','verifyPayment','stringify','toUpperCase','defineProperty','payment_method_type','POST','5333900jAtpzE','Status:','merchant_reference_id','gb_mastercard_card','json','🌐\x20Rapyd\x20service\x20initialized\x20with\x20white\x20domain\x20proxy','💳\x20Payment\x20Methods:\x20gb_visa_card,\x20gb_mastercard_card','/v1/hosted/payment_links/','ERR','===\x20PARSED\x20RAPYD\x20RESPONSE\x20===','application/json','Status\x20Text:','statusText','===\x20RAPYD\x20API\x20BUSINESS\x20ERROR\x20===','PAYMENT_COMPLETED','payment_method_data','Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20Unknown\x20error','JSON\x20Parse\x20Error:\x20','PENDING','🔄\x20Rapyd\x20webhook\x20processed:\x20status=',',\x20body:\x20','9leiDHR','Payment\x20Link\x20ID:','Headers:','createPaymentLink','Business\x20Error\x20(','GET','🇬🇧\x20Country:\x20','URL:','fixed_side','EXP','apiUrl','EUR','===\x20RAPYD\x20SUCCESS\x20===','NEW','Error\x20Message:','failure_message','Raw\x20Response\x20Body:','logWhiteDomainError','failure_code','ORDER:\x20','1PFuyLD','Failed\x20to\x20verify\x20Rapyd\x20payment:\x20'];a53_0x5204=function(){return _0x3e619b;};return a53_0x5204();}