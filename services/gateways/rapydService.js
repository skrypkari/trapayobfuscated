'use strict';const a56_0x76e9c6=a56_0x4173;function a56_0x4173(_0x2a4146,_0x24c998){const _0x1901e4=a56_0x1901();return a56_0x4173=function(_0x4173e7,_0x38684d){_0x4173e7=_0x4173e7-0x1ac;let _0x2d2664=_0x1901e4[_0x4173e7];return _0x2d2664;},a56_0x4173(_0x2a4146,_0x24c998);}(function(_0x2b06f1,_0x1fe71f){const _0x2861c4=a56_0x4173,_0x7fce86=_0x2b06f1();while(!![]){try{const _0x396d8a=-parseInt(_0x2861c4(0x1ad))/0x1*(-parseInt(_0x2861c4(0x216))/0x2)+-parseInt(_0x2861c4(0x219))/0x3*(parseInt(_0x2861c4(0x1ae))/0x4)+-parseInt(_0x2861c4(0x210))/0x5+-parseInt(_0x2861c4(0x1e4))/0x6+parseInt(_0x2861c4(0x1f3))/0x7*(-parseInt(_0x2861c4(0x1f4))/0x8)+parseInt(_0x2861c4(0x20b))/0x9+parseInt(_0x2861c4(0x1b8))/0xa*(parseInt(_0x2861c4(0x208))/0xb);if(_0x396d8a===_0x1fe71f)break;else _0x7fce86['push'](_0x7fce86['shift']());}catch(_0x22cd4a){_0x7fce86['push'](_0x7fce86['shift']());}}}(a56_0x1901,0x42a74));Object[a56_0x76e9c6(0x211)](exports,a56_0x76e9c6(0x1bf),{'value':!![]}),exports['RapydService']=void 0x0;function a56_0x1901(){const _0x1ae479=['EUR','ERR','logWhiteDomainError','EXPIRED','🌐\x20Rapyd\x20service\x20initialized\x20with\x20white\x20domain\x20proxy','https://tesoft.uk/gateway/rapyd/','Error\x20stack:','Request\x20Body\x20(Updated\x20Format):','CAN','\x20->\x20EUR:','stringify','🇬🇧\x20Country\x20used:\x20','fixed_side','application/json','NEW','processWebhook','Parsed\x20Result:','===\x20RAPYD\x20API\x20ERROR\x20===','toUpperCase','Status:','RapydService','Headers:','PAYMENT_CANCELED','amount','paymentMethod','HTTP\x20','Full\x20Error\x20Data:','🇬🇧\x20Country:\x20','Invalid\x20response\x20from\x20Rapyd\x20API:\x20missing\x20id\x20or\x20redirect_url','stack','POST','data','PENDING','merchant_reference_id','type','478332jGGFay','buy','URL:','https://tesoft.uk/gateway/fail.php?id=','🔄\x20Rapyd\x20webhook\x20processed:\x20status=','last4','\x20\x20\x20expiration:\x20','Unknown\x20error\x20from\x20Rapyd\x20API','Response\x20Time:','Failed\x20to\x20verify\x20Rapyd\x20payment:\x20','apiUrl','Processing\x20Rapyd\x20webhook:','Raw\x20Response\x20Body:','Error\x20details:','gb_mastercard_card','87619rWzZzY','248fCfCYh','Error\x20Code:','HTTP\x20error!\x20status:\x20','failureCode','none','entries','currency','):\x20','createPaymentLink','error','/v1/hosted/payment_links/','toISOString','failure_code','Response\x20Body:','message','\x20(always\x20GB\x20for\x20Rapyd)','Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20','Status\x20Text:','PAYMENT_COMPLETED','failure_message','11vSDIGD',',\x20body:\x20','payment_method_data','1325196nlBsHy','Failed\x20to\x20parse\x20JSON\x20response:','cardLast4','Invalid\x20JSON\x20response\x20from\x20Rapyd\x20API:\x20','===\x20RAPYD\x20SERVICE\x20ERROR\x20===','2027025rcYQiF','defineProperty','ORDER:\x20','/v1/hosted/payment_links','💳\x20Payment\x20Methods:\x20gb_visa_card,\x20gb_mastercard_card','Error\x20Message:','484984ItbXko','UNKNOWN','Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20Unknown\x20error','136824YyUUYA','===\x20RAPYD\x20SUCCESS\x20===','CLO','Redirect\x20URL:','status','logWhiteDomainResponse','EXP','Payment\x20System/1.0','text','json','requested_currency','logWhiteDomainRequest','../loggerService','parse','error_code','https://tesoft.uk/gateway/success.php?id=','payment_method_type','PAYMENT_EXPIRED','paid','Rapyd\x20API\x20error:\x20','🇬🇧\x20Using\x20GB\x20(Britain)\x20as\x20country\x20for\x20Rapyd\x20payment\x20link','now','1JrIfiJ','12fZUrKv','Incomplete\x20response:\x20missing\x20id\x20or\x20redirect_url','===\x20RAPYD\x20API\x20BUSINESS\x20ERROR\x20===','Error\x20message:','FAILED','SUCCESS','statusText','floor','GET','HTTP\x20Status:','8932540GGagUt','ACT','PAID','loggerService','Business\x20Error\x20(','log','rapyd','__esModule','redirect_url'];a56_0x1901=function(){return _0x1ae479;};return a56_0x1901();}const loggerService_1=require(a56_0x76e9c6(0x225));class RapydService{constructor(){const _0x1f13c7=a56_0x76e9c6;this[_0x1f13c7(0x1ee)]=_0x1f13c7(0x1c6),console[_0x1f13c7(0x1bd)](_0x1f13c7(0x1c5));}async[a56_0x76e9c6(0x1fc)](_0x258c1a){const _0x1c6c7d=a56_0x76e9c6,{orderId:_0x30f37b,orderName:_0x3e9a6d,amount:_0x32df0f,currency:_0x152108,usage:_0x2ddc6d,maxPayments:_0x286ea4,successUrl:_0x427a2b,failUrl:_0x39f0a1}=_0x258c1a,_0x23f485=_0x152108['toUpperCase'](),_0x36fb24='GB';console['log'](_0x1c6c7d(0x22d));const _0x2a412f=_0x1c6c7d(0x228)+_0x30f37b,_0x237d6a=_0x1c6c7d(0x1e7)+_0x30f37b,_0x496601={'amount':_0x32df0f,'currency':_0x23f485,'cancel_checkout_url':_0x237d6a,'complete_checkout_url':_0x2a412f,'complete_payment_url':_0x2a412f,'merchant_reference_id':_0x30f37b,'description':_0x1c6c7d(0x212)+_0x30f37b,'country':'GB','payment_method_types_include':['gb_visa_card',_0x1c6c7d(0x1f2)],'custom_elements':{'display_description':!![]}};if(_0x23f485!=='EUR'){const _0x3dc3bd=Math[_0x1c6c7d(0x1b5)](Date[_0x1c6c7d(0x1ac)]()/0x3e8)+0x1e*0x3c;_0x496601[_0x1c6c7d(0x1cd)]=_0x1c6c7d(0x1e5),_0x496601[_0x1c6c7d(0x223)]=_0x1c6c7d(0x1c1),_0x496601['expiration']=_0x3dc3bd,console[_0x1c6c7d(0x1bd)]('💱\x20Adding\x20currency\x20conversion\x20fields\x20for\x20'+_0x23f485+_0x1c6c7d(0x1ca)),console[_0x1c6c7d(0x1bd)]('\x20\x20\x20fixed_side:\x20buy'),console['log']('\x20\x20\x20requested_currency:\x20EUR'),console[_0x1c6c7d(0x1bd)](_0x1c6c7d(0x1ea)+_0x3dc3bd+'\x20('+new Date(_0x3dc3bd*0x3e8)[_0x1c6c7d(0x1ff)]()+')');}const _0x48f82c=Date['now']();try{console['log']('===\x20RAPYD\x20API\x20REQUEST\x20(White\x20Domain\x20-\x20Updated\x20Format)\x20==='),console[_0x1c6c7d(0x1bd)](_0x1c6c7d(0x1e6),this['apiUrl']),console[_0x1c6c7d(0x1bd)](_0x1c6c7d(0x1c8),JSON[_0x1c6c7d(0x1cb)](_0x496601,null,0x2)),console[_0x1c6c7d(0x1bd)](_0x1c6c7d(0x1dc)+_0x36fb24+_0x1c6c7d(0x203)),console[_0x1c6c7d(0x1bd)](_0x1c6c7d(0x214)),loggerService_1['loggerService']['logWhiteDomainRequest']('rapyd',_0x1c6c7d(0x213),_0x1c6c7d(0x1df),_0x496601);const _0x24d47f=await fetch(this[_0x1c6c7d(0x1ee)],{'method':'POST','headers':{'Content-Type':_0x1c6c7d(0x1ce),'User-Agent':_0x1c6c7d(0x220)},'body':JSON['stringify'](_0x496601)}),_0x34410d=Date[_0x1c6c7d(0x1ac)]()-_0x48f82c;console['log']('===\x20RAPYD\x20API\x20RESPONSE\x20(White\x20Domain)\x20==='),console['log'](_0x1c6c7d(0x1d4),_0x24d47f['status']),console[_0x1c6c7d(0x1bd)](_0x1c6c7d(0x205),_0x24d47f[_0x1c6c7d(0x1b4)]),console[_0x1c6c7d(0x1bd)](_0x1c6c7d(0x1d6),Object['fromEntries'](_0x24d47f['headers'][_0x1c6c7d(0x1f9)]())),console[_0x1c6c7d(0x1bd)](_0x1c6c7d(0x1ec),_0x34410d+'ms');const _0x56b490=await _0x24d47f[_0x1c6c7d(0x221)]();console[_0x1c6c7d(0x1bd)](_0x1c6c7d(0x1f0),_0x56b490);if(!_0x24d47f['ok']){console[_0x1c6c7d(0x1fd)](_0x1c6c7d(0x1d2)),console['error'](_0x1c6c7d(0x1b7),_0x24d47f[_0x1c6c7d(0x21d)]),console['error'](_0x1c6c7d(0x201),_0x56b490),loggerService_1['loggerService'][_0x1c6c7d(0x21e)](_0x1c6c7d(0x1be),_0x1c6c7d(0x213),_0x24d47f[_0x1c6c7d(0x21d)],_0x56b490,_0x34410d),loggerService_1[_0x1c6c7d(0x1bb)][_0x1c6c7d(0x1c3)](_0x1c6c7d(0x1be),_0x1c6c7d(0x213),_0x1c6c7d(0x1da)+_0x24d47f[_0x1c6c7d(0x21d)]+':\x20'+_0x56b490);throw new Error(_0x1c6c7d(0x1f6)+_0x24d47f[_0x1c6c7d(0x21d)]+_0x1c6c7d(0x209)+_0x56b490);}let _0x1847e6;try{_0x1847e6=JSON[_0x1c6c7d(0x226)](_0x56b490);}catch(_0x3e73b9){console['error'](_0x1c6c7d(0x20c),_0x3e73b9),loggerService_1[_0x1c6c7d(0x1bb)][_0x1c6c7d(0x1c3)](_0x1c6c7d(0x1be),_0x1c6c7d(0x213),'JSON\x20Parse\x20Error:\x20'+_0x3e73b9);throw new Error(_0x1c6c7d(0x20e)+_0x56b490);}console[_0x1c6c7d(0x1bd)]('===\x20PARSED\x20RAPYD\x20RESPONSE\x20==='),console['log'](_0x1c6c7d(0x1d1),JSON['stringify'](_0x1847e6,null,0x2)),loggerService_1[_0x1c6c7d(0x1bb)][_0x1c6c7d(0x21e)](_0x1c6c7d(0x1be),'/v1/hosted/payment_links',_0x24d47f['status'],_0x1847e6,_0x34410d);if(_0x1847e6[_0x1c6c7d(0x21d)]?.[_0x1c6c7d(0x21d)]!==_0x1c6c7d(0x1b3)){const _0x4652a2=_0x1847e6[_0x1c6c7d(0x21d)]?.[_0x1c6c7d(0x202)]||_0x1c6c7d(0x1eb),_0x2159fe=_0x1847e6[_0x1c6c7d(0x21d)]?.['error_code']||_0x1c6c7d(0x217);console['error'](_0x1c6c7d(0x1b0)),console[_0x1c6c7d(0x1fd)](_0x1c6c7d(0x1f5),_0x2159fe),console[_0x1c6c7d(0x1fd)](_0x1c6c7d(0x215),_0x4652a2),console[_0x1c6c7d(0x1fd)](_0x1c6c7d(0x1db),_0x1847e6[_0x1c6c7d(0x21d)]),loggerService_1[_0x1c6c7d(0x1bb)][_0x1c6c7d(0x1c3)](_0x1c6c7d(0x1be),_0x1c6c7d(0x213),_0x1c6c7d(0x1bc)+_0x2159fe+_0x1c6c7d(0x1fb)+_0x4652a2);throw new Error('Rapyd\x20API\x20error\x20('+_0x2159fe+_0x1c6c7d(0x1fb)+_0x4652a2);}if(!_0x1847e6[_0x1c6c7d(0x1e0)]?.['id']||!_0x1847e6['data']?.[_0x1c6c7d(0x1c0)]){console[_0x1c6c7d(0x1fd)]('===\x20RAPYD\x20API\x20INCOMPLETE\x20RESPONSE\x20==='),console[_0x1c6c7d(0x1fd)]('Missing\x20id\x20or\x20redirect_url\x20in\x20response'),console[_0x1c6c7d(0x1fd)]('Response\x20data:',_0x1847e6[_0x1c6c7d(0x1e0)]),loggerService_1[_0x1c6c7d(0x1bb)]['logWhiteDomainError']('rapyd','/v1/hosted/payment_links',_0x1c6c7d(0x1af));throw new Error(_0x1c6c7d(0x1dd));}return console[_0x1c6c7d(0x1bd)](_0x1c6c7d(0x21a)),console[_0x1c6c7d(0x1bd)]('Payment\x20Link\x20ID:',_0x1847e6[_0x1c6c7d(0x1e0)]['id']),console['log'](_0x1c6c7d(0x21c),_0x1847e6[_0x1c6c7d(0x1e0)][_0x1c6c7d(0x1c0)]),console[_0x1c6c7d(0x1bd)](_0x1c6c7d(0x1cc)+_0x36fb24+'\x20(GB\x20-\x20Britain)'),console[_0x1c6c7d(0x1bd)](_0x1c6c7d(0x214)),{'gateway_payment_id':_0x1847e6[_0x1c6c7d(0x1e0)]['id'],'payment_url':_0x1847e6[_0x1c6c7d(0x1e0)][_0x1c6c7d(0x1c0)]};}catch(_0x2ac027){console[_0x1c6c7d(0x1fd)](_0x1c6c7d(0x20f)),console[_0x1c6c7d(0x1fd)](_0x1c6c7d(0x1f1),_0x2ac027),loggerService_1[_0x1c6c7d(0x1bb)][_0x1c6c7d(0x1c3)](_0x1c6c7d(0x1be),_0x1c6c7d(0x213),_0x2ac027);if(_0x2ac027 instanceof Error){console[_0x1c6c7d(0x1fd)](_0x1c6c7d(0x1b1),_0x2ac027[_0x1c6c7d(0x202)]),console['error'](_0x1c6c7d(0x1c7),_0x2ac027[_0x1c6c7d(0x1de)]);throw new Error(_0x1c6c7d(0x204)+_0x2ac027[_0x1c6c7d(0x202)]);}throw new Error(_0x1c6c7d(0x218));}}async['verifyPayment'](_0x3a9286){const _0x435981=a56_0x76e9c6,_0x8f5bbc=Date['now']();try{loggerService_1['loggerService'][_0x435981(0x224)](_0x435981(0x1be),_0x435981(0x1fe)+_0x3a9286,_0x435981(0x1b6),{});const _0x33c9b2=await fetch(this[_0x435981(0x1ee)]+'/'+_0x3a9286,{'method':_0x435981(0x1b6),'headers':{'Content-Type':'application/json','User-Agent':_0x435981(0x220)}}),_0xf25fb6=Date['now']()-_0x8f5bbc;if(!_0x33c9b2['ok']){const _0x6bcf98=await _0x33c9b2[_0x435981(0x221)]();loggerService_1[_0x435981(0x1bb)]['logWhiteDomainResponse'](_0x435981(0x1be),'/v1/hosted/payment_links/'+_0x3a9286,_0x33c9b2[_0x435981(0x21d)],_0x6bcf98,_0xf25fb6);throw new Error('HTTP\x20error!\x20status:\x20'+_0x33c9b2[_0x435981(0x21d)]);}const _0x311521=await _0x33c9b2[_0x435981(0x222)]();loggerService_1[_0x435981(0x1bb)][_0x435981(0x21e)](_0x435981(0x1be),'/v1/hosted/payment_links/'+_0x3a9286,_0x33c9b2['status'],_0x311521,_0xf25fb6);if(_0x311521[_0x435981(0x21d)]?.[_0x435981(0x21d)]!==_0x435981(0x1b3)){loggerService_1[_0x435981(0x1bb)][_0x435981(0x1c3)](_0x435981(0x1be),_0x435981(0x1fe)+_0x3a9286,'Rapyd\x20API\x20error:\x20'+(_0x311521[_0x435981(0x21d)]?.[_0x435981(0x202)]||'Unknown\x20error'));throw new Error(_0x435981(0x22c)+(_0x311521[_0x435981(0x21d)]?.[_0x435981(0x202)]||'Unknown\x20error'));}let _0x40c835='PENDING';if(_0x311521[_0x435981(0x1e0)]?.[_0x435981(0x21d)])switch(_0x311521[_0x435981(0x1e0)][_0x435981(0x21d)][_0x435981(0x1d3)]()){case _0x435981(0x21b):_0x40c835=_0x435981(0x1ba);break;case'CAN':_0x40c835=_0x435981(0x1b2);break;case'EXP':_0x40c835=_0x435981(0x1c4);break;case'ERR':_0x40c835=_0x435981(0x1b2);break;case _0x435981(0x1cf):case _0x435981(0x1b9):default:_0x40c835=_0x435981(0x1e1);break;}return{'status':_0x40c835,'amount':_0x311521['data']?.[_0x435981(0x1d8)],'currency':_0x311521[_0x435981(0x1e0)]?.[_0x435981(0x1fa)]};}catch(_0x259479){console[_0x435981(0x1fd)]('Rapyd\x20payment\x20verification\x20error:',_0x259479),loggerService_1[_0x435981(0x1bb)]['logWhiteDomainError'](_0x435981(0x1be),'/v1/hosted/payment_links/'+_0x3a9286,_0x259479);throw new Error(_0x435981(0x1ed)+(_0x259479 instanceof Error?_0x259479['message']:'Unknown\x20error'));}}async[a56_0x76e9c6(0x1d0)](_0x6de08d){const _0x385f4c=a56_0x76e9c6;console[_0x385f4c(0x1bd)](_0x385f4c(0x1ef),_0x6de08d);let _0x5551c7=_0x385f4c(0x1e1),_0x4498c1;_0x6de08d[_0x385f4c(0x1e0)]?.[_0x385f4c(0x207)]&&(_0x4498c1=_0x6de08d[_0x385f4c(0x1e0)][_0x385f4c(0x207)],console[_0x385f4c(0x1bd)]('💥\x20Rapyd\x20failure\x20message:\x20'+_0x4498c1));switch(_0x6de08d[_0x385f4c(0x1e3)]?.['toUpperCase']()){case _0x385f4c(0x206):_0x6de08d[_0x385f4c(0x1e0)]?.[_0x385f4c(0x22b)]===!![]&&_0x6de08d['data']?.[_0x385f4c(0x21d)]===_0x385f4c(0x21b)?_0x5551c7=_0x385f4c(0x1ba):_0x5551c7=_0x385f4c(0x1e1);break;case _0x385f4c(0x1d7):_0x5551c7=_0x385f4c(0x1b2);break;case _0x385f4c(0x22a):_0x5551c7=_0x385f4c(0x1c4);break;case'PAYMENT_FAILED':_0x5551c7=_0x385f4c(0x1b2);!_0x4498c1&&_0x6de08d[_0x385f4c(0x1e0)]?.[_0x385f4c(0x207)]&&(_0x4498c1=_0x6de08d[_0x385f4c(0x1e0)][_0x385f4c(0x207)]);break;default:switch(_0x6de08d[_0x385f4c(0x1e0)]?.['status']?.[_0x385f4c(0x1d3)]()){case _0x385f4c(0x21b):_0x6de08d['data']?.[_0x385f4c(0x22b)]===!![]?_0x5551c7='PAID':_0x5551c7=_0x385f4c(0x1b2);break;case _0x385f4c(0x1c9):_0x5551c7=_0x385f4c(0x1b2);break;case _0x385f4c(0x21f):_0x5551c7=_0x385f4c(0x1c4);break;case _0x385f4c(0x1c2):_0x5551c7=_0x385f4c(0x1b2);!_0x4498c1&&_0x6de08d[_0x385f4c(0x1e0)]?.[_0x385f4c(0x207)]&&(_0x4498c1=_0x6de08d[_0x385f4c(0x1e0)][_0x385f4c(0x207)]);break;case _0x385f4c(0x1cf):case _0x385f4c(0x1b9):default:_0x5551c7=_0x385f4c(0x1e1);break;}break;}const _0x52a3aa={};return _0x6de08d['data']?.[_0x385f4c(0x20a)]?.[_0x385f4c(0x1e9)]&&(_0x52a3aa[_0x385f4c(0x20d)]=_0x6de08d['data'][_0x385f4c(0x20a)]['last4']),_0x6de08d[_0x385f4c(0x1e0)]?.[_0x385f4c(0x229)]&&(_0x52a3aa[_0x385f4c(0x1d9)]=_0x6de08d[_0x385f4c(0x1e0)][_0x385f4c(0x229)]),_0x6de08d[_0x385f4c(0x1e0)]?.[_0x385f4c(0x227)]&&(_0x52a3aa['errorCode']=_0x6de08d['data'][_0x385f4c(0x227)]),_0x6de08d[_0x385f4c(0x1e0)]?.['failure_code']&&(_0x52a3aa[_0x385f4c(0x1f7)]=_0x6de08d['data'][_0x385f4c(0x200)]),console['log'](_0x385f4c(0x1e8)+_0x5551c7+',\x20failureMessage='+(_0x4498c1||_0x385f4c(0x1f8))),{'paymentId':_0x6de08d[_0x385f4c(0x1e0)]?.[_0x385f4c(0x1e2)]||'','status':_0x5551c7,'amount':_0x6de08d['data']?.[_0x385f4c(0x1d8)],'currency':_0x6de08d[_0x385f4c(0x1e0)]?.[_0x385f4c(0x1fa)],'failureMessage':_0x4498c1,'additionalInfo':_0x52a3aa};}}exports[a56_0x76e9c6(0x1d5)]=RapydService;