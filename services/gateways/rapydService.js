'use strict';const a48_0x52e916=a48_0x388c;(function(_0x3bd2d4,_0x45d10e){const _0x52e149=a48_0x388c,_0x45271d=_0x3bd2d4();while(!![]){try{const _0x307adf=-parseInt(_0x52e149(0x1fd))/0x1*(parseInt(_0x52e149(0x20b))/0x2)+-parseInt(_0x52e149(0x253))/0x3*(-parseInt(_0x52e149(0x21e))/0x4)+parseInt(_0x52e149(0x20d))/0x5+-parseInt(_0x52e149(0x1fb))/0x6*(-parseInt(_0x52e149(0x1f3))/0x7)+parseInt(_0x52e149(0x215))/0x8*(parseInt(_0x52e149(0x205))/0x9)+-parseInt(_0x52e149(0x203))/0xa*(-parseInt(_0x52e149(0x221))/0xb)+parseInt(_0x52e149(0x219))/0xc*(-parseInt(_0x52e149(0x214))/0xd);if(_0x307adf===_0x45d10e)break;else _0x45271d['push'](_0x45271d['shift']());}catch(_0x3ea0df){_0x45271d['push'](_0x45271d['shift']());}}}(a48_0x5220,0x8beb2));Object[a48_0x52e916(0x23d)](exports,a48_0x52e916(0x1ec),{'value':!![]}),exports[a48_0x52e916(0x248)]=void 0x0;function a48_0x388c(_0x2f79f8,_0x2b6a51){const _0x52206f=a48_0x5220();return a48_0x388c=function(_0x388c79,_0x238039){_0x388c79=_0x388c79-0x1e3;let _0x3e9d9a=_0x52206f[_0x388c79];return _0x3e9d9a;},a48_0x388c(_0x2f79f8,_0x2b6a51);}function a48_0x5220(){const _0x52c189=['PAYMENT_CANCELED','https://tesoft.uk/gateway/rapyd/','gb_visa_card','status','gb_mastercard_card','EUR','Request\x20Body\x20(Updated\x20Format):','🇬🇧\x20Country\x20used:\x20','last4','Rapyd\x20API\x20error:\x20','/v1/hosted/payment_links','Unknown\x20error','EXP','application/json','PAYMENT_FAILED','error_code','ERR','💳\x20Payment\x20Methods:\x20gb_visa_card,\x20gb_mastercard_card','headers','Error\x20message:','Response\x20Time:','🇬🇧\x20Using\x20GB\x20(Britain)\x20as\x20country\x20for\x20Rapyd\x20payment\x20link',',\x20failureMessage=','UNKNOWN','Processing\x20Rapyd\x20webhook:','Error\x20details:','🌐\x20Rapyd\x20service\x20initialized\x20with\x20white\x20domain\x20proxy','defineProperty','Response\x20Body:','log',',\x20body:\x20','\x20->\x20EUR:','text','buy','===\x20RAPYD\x20API\x20INCOMPLETE\x20RESPONSE\x20===','PENDING','CLO','Failed\x20to\x20parse\x20JSON\x20response:','RapydService','HTTP\x20Status:','Invalid\x20response\x20from\x20Rapyd\x20API:\x20missing\x20id\x20or\x20redirect_url','Redirect\x20URL:','HTTP\x20','CAN','json','apiUrl','PAYMENT_COMPLETED','💥\x20Rapyd\x20failure\x20message:\x20','Failed\x20to\x20verify\x20Rapyd\x20payment:\x20','16155TvSpsN','Error\x20stack:','error','Invalid\x20JSON\x20response\x20from\x20Rapyd\x20API:\x20','fromEntries','TesSoft\x20Payment\x20System/1.0','💱\x20Adding\x20currency\x20conversion\x20fields\x20for\x20','):\x20','\x20\x20\x20requested_currency:\x20EUR','Headers:','payment_method_type','requested_currency','===\x20RAPYD\x20API\x20ERROR\x20===','🇬🇧\x20Country:\x20','Business\x20Error\x20(','Missing\x20id\x20or\x20redirect_url\x20in\x20response','===\x20RAPYD\x20API\x20BUSINESS\x20ERROR\x20===','\x20(GB\x20-\x20Britain)','createPaymentLink','Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20','currency','===\x20RAPYD\x20SERVICE\x20ERROR\x20===','data','Unknown\x20error\x20from\x20Rapyd\x20API','Parsed\x20Result:','../loggerService','loggerService','Rapyd\x20payment\x20verification\x20error:','Raw\x20Response\x20Body:','FAILED','JSON\x20Parse\x20Error:\x20','===\x20RAPYD\x20API\x20REQUEST\x20(White\x20Domain\x20-\x20Updated\x20Format)\x20===','🔄\x20Rapyd\x20webhook\x20processed:\x20status=','rapyd','__esModule','logWhiteDomainRequest','\x20\x20\x20fixed_side:\x20buy','now','Error\x20Message:','logWhiteDomainResponse','Error\x20Code:','7wQybHN','https://tesoft.uk/gateway/success.php?id=','https://tesoft.uk/gateway/fail.php?id=','amount','PAID','fixed_side','PAYMENT_EXPIRED','redirect_url','4746918BVEpuQ','failure_message','1ftXhNZ','Rapyd\x20API\x20error\x20(','POST','/v1/hosted/payment_links/','entries','ACT','2308350ptUAuv','Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20Unknown\x20error','9TMJfOB','stack','none','Status\x20Text:','failure_code','URL:','258736fsoVoX','processWebhook','5721295TBlsTa','ORDER:\x20','errorCode','HTTP\x20error!\x20status:\x20','toISOString','failureCode','verifyPayment','3822mShNUx','1482136pCffzV','EXPIRED','payment_method_data','paid','109860mykmwh','toUpperCase','SUCCESS','type','logWhiteDomainError','260YTRrld','NEW','message','44ZobGnp'];a48_0x5220=function(){return _0x52c189;};return a48_0x5220();}const loggerService_1=require(a48_0x52e916(0x1e3));class RapydService{constructor(){const _0x3ab669=a48_0x52e916;this[_0x3ab669(0x24f)]=_0x3ab669(0x223),console[_0x3ab669(0x23f)](_0x3ab669(0x23c));}async[a48_0x52e916(0x265)](_0x185903){const _0x3a30b0=a48_0x52e916,{orderId:_0x1268ef,orderName:_0x5a884c,amount:_0x2582a2,currency:_0x426542,usage:_0x1b690e,maxPayments:_0x54ae8a,successUrl:_0x25207b,failUrl:_0x3fb63}=_0x185903,_0x31db6e=_0x426542['toUpperCase'](),_0x3ab15b='GB';console[_0x3a30b0(0x23f)](_0x3a30b0(0x237));const _0x350bea=_0x3a30b0(0x1f4)+_0x1268ef,_0xa0d7d9=_0x3a30b0(0x1f5)+_0x1268ef,_0xd1ce90={'amount':_0x2582a2,'currency':_0x31db6e,'cancel_checkout_url':_0xa0d7d9,'complete_checkout_url':_0x350bea,'complete_payment_url':_0x350bea,'merchant_reference_id':_0x1268ef,'description':_0x3a30b0(0x20e)+_0x1268ef,'country':'GB','payment_method_types_include':[_0x3a30b0(0x224),_0x3a30b0(0x226)],'custom_elements':{'display_description':!![]}};if(_0x31db6e!==_0x3a30b0(0x227)){const _0x19e2e4=Math['floor'](Date['now']()/0x3e8)+0x1e*0x3c;_0xd1ce90[_0x3a30b0(0x1f8)]=_0x3a30b0(0x243),_0xd1ce90[_0x3a30b0(0x25e)]='EUR',_0xd1ce90['expiration']=_0x19e2e4,console[_0x3a30b0(0x23f)](_0x3a30b0(0x259)+_0x31db6e+_0x3a30b0(0x241)),console[_0x3a30b0(0x23f)](_0x3a30b0(0x1ee)),console['log'](_0x3a30b0(0x25b)),console[_0x3a30b0(0x23f)]('\x20\x20\x20expiration:\x20'+_0x19e2e4+'\x20('+new Date(_0x19e2e4*0x3e8)[_0x3a30b0(0x211)]()+')');}const _0x1fffdb=Date[_0x3a30b0(0x1ef)]();try{console[_0x3a30b0(0x23f)](_0x3a30b0(0x1e9)),console[_0x3a30b0(0x23f)](_0x3a30b0(0x20a),this['apiUrl']),console['log'](_0x3a30b0(0x228),JSON['stringify'](_0xd1ce90,null,0x2)),console[_0x3a30b0(0x23f)](_0x3a30b0(0x260)+_0x3ab15b+'\x20(always\x20GB\x20for\x20Rapyd)'),console['log'](_0x3a30b0(0x233)),loggerService_1[_0x3a30b0(0x1e4)][_0x3a30b0(0x1ed)](_0x3a30b0(0x1eb),_0x3a30b0(0x22c),_0x3a30b0(0x1ff),_0xd1ce90);const _0x143700=await fetch(this[_0x3a30b0(0x24f)],{'method':_0x3a30b0(0x1ff),'headers':{'Content-Type':_0x3a30b0(0x22f),'User-Agent':_0x3a30b0(0x258)},'body':JSON['stringify'](_0xd1ce90)}),_0x5dea10=Date[_0x3a30b0(0x1ef)]()-_0x1fffdb;console[_0x3a30b0(0x23f)]('===\x20RAPYD\x20API\x20RESPONSE\x20(White\x20Domain)\x20==='),console['log']('Status:',_0x143700[_0x3a30b0(0x225)]),console[_0x3a30b0(0x23f)](_0x3a30b0(0x208),_0x143700['statusText']),console[_0x3a30b0(0x23f)](_0x3a30b0(0x25c),Object[_0x3a30b0(0x257)](_0x143700[_0x3a30b0(0x234)][_0x3a30b0(0x201)]())),console[_0x3a30b0(0x23f)](_0x3a30b0(0x236),_0x5dea10+'ms');const _0x3ea361=await _0x143700[_0x3a30b0(0x242)]();console[_0x3a30b0(0x23f)](_0x3a30b0(0x1e6),_0x3ea361);if(!_0x143700['ok']){console['error'](_0x3a30b0(0x25f)),console['error'](_0x3a30b0(0x249),_0x143700[_0x3a30b0(0x225)]),console[_0x3a30b0(0x255)](_0x3a30b0(0x23e),_0x3ea361),loggerService_1[_0x3a30b0(0x1e4)][_0x3a30b0(0x1f1)](_0x3a30b0(0x1eb),'/v1/hosted/payment_links',_0x143700[_0x3a30b0(0x225)],_0x3ea361,_0x5dea10),loggerService_1[_0x3a30b0(0x1e4)][_0x3a30b0(0x21d)](_0x3a30b0(0x1eb),_0x3a30b0(0x22c),_0x3a30b0(0x24c)+_0x143700[_0x3a30b0(0x225)]+':\x20'+_0x3ea361);throw new Error(_0x3a30b0(0x210)+_0x143700[_0x3a30b0(0x225)]+_0x3a30b0(0x240)+_0x3ea361);}let _0x4ef90a;try{_0x4ef90a=JSON['parse'](_0x3ea361);}catch(_0x456863){console[_0x3a30b0(0x255)](_0x3a30b0(0x247),_0x456863),loggerService_1[_0x3a30b0(0x1e4)][_0x3a30b0(0x21d)](_0x3a30b0(0x1eb),'/v1/hosted/payment_links',_0x3a30b0(0x1e8)+_0x456863);throw new Error(_0x3a30b0(0x256)+_0x3ea361);}console[_0x3a30b0(0x23f)]('===\x20PARSED\x20RAPYD\x20RESPONSE\x20==='),console[_0x3a30b0(0x23f)](_0x3a30b0(0x26b),JSON['stringify'](_0x4ef90a,null,0x2)),loggerService_1[_0x3a30b0(0x1e4)]['logWhiteDomainResponse']('rapyd','/v1/hosted/payment_links',_0x143700[_0x3a30b0(0x225)],_0x4ef90a,_0x5dea10);if(_0x4ef90a[_0x3a30b0(0x225)]?.[_0x3a30b0(0x225)]!==_0x3a30b0(0x21b)){const _0x578266=_0x4ef90a[_0x3a30b0(0x225)]?.[_0x3a30b0(0x220)]||_0x3a30b0(0x26a),_0x2a5c96=_0x4ef90a[_0x3a30b0(0x225)]?.['error_code']||_0x3a30b0(0x239);console[_0x3a30b0(0x255)](_0x3a30b0(0x263)),console[_0x3a30b0(0x255)](_0x3a30b0(0x1f2),_0x2a5c96),console[_0x3a30b0(0x255)](_0x3a30b0(0x1f0),_0x578266),console[_0x3a30b0(0x255)]('Full\x20Error\x20Data:',_0x4ef90a[_0x3a30b0(0x225)]),loggerService_1['loggerService'][_0x3a30b0(0x21d)](_0x3a30b0(0x1eb),_0x3a30b0(0x22c),_0x3a30b0(0x261)+_0x2a5c96+_0x3a30b0(0x25a)+_0x578266);throw new Error(_0x3a30b0(0x1fe)+_0x2a5c96+'):\x20'+_0x578266);}if(!_0x4ef90a[_0x3a30b0(0x269)]?.['id']||!_0x4ef90a['data']?.[_0x3a30b0(0x1fa)]){console[_0x3a30b0(0x255)](_0x3a30b0(0x244)),console['error'](_0x3a30b0(0x262)),console[_0x3a30b0(0x255)]('Response\x20data:',_0x4ef90a[_0x3a30b0(0x269)]),loggerService_1[_0x3a30b0(0x1e4)][_0x3a30b0(0x21d)](_0x3a30b0(0x1eb),'/v1/hosted/payment_links','Incomplete\x20response:\x20missing\x20id\x20or\x20redirect_url');throw new Error(_0x3a30b0(0x24a));}return console[_0x3a30b0(0x23f)]('===\x20RAPYD\x20SUCCESS\x20==='),console[_0x3a30b0(0x23f)]('Payment\x20Link\x20ID:',_0x4ef90a[_0x3a30b0(0x269)]['id']),console['log'](_0x3a30b0(0x24b),_0x4ef90a[_0x3a30b0(0x269)][_0x3a30b0(0x1fa)]),console[_0x3a30b0(0x23f)](_0x3a30b0(0x229)+_0x3ab15b+_0x3a30b0(0x264)),console['log'](_0x3a30b0(0x233)),{'gateway_payment_id':_0x4ef90a[_0x3a30b0(0x269)]['id'],'payment_url':_0x4ef90a[_0x3a30b0(0x269)]['redirect_url']};}catch(_0x48d45a){console['error'](_0x3a30b0(0x268)),console[_0x3a30b0(0x255)](_0x3a30b0(0x23b),_0x48d45a),loggerService_1['loggerService']['logWhiteDomainError']('rapyd','/v1/hosted/payment_links',_0x48d45a);if(_0x48d45a instanceof Error){console['error'](_0x3a30b0(0x235),_0x48d45a['message']),console[_0x3a30b0(0x255)](_0x3a30b0(0x254),_0x48d45a[_0x3a30b0(0x206)]);throw new Error(_0x3a30b0(0x266)+_0x48d45a[_0x3a30b0(0x220)]);}throw new Error(_0x3a30b0(0x204));}}async[a48_0x52e916(0x213)](_0xbf81ee){const _0x5be83d=a48_0x52e916,_0x5c58a2=Date['now']();try{loggerService_1[_0x5be83d(0x1e4)][_0x5be83d(0x1ed)](_0x5be83d(0x1eb),_0x5be83d(0x200)+_0xbf81ee,'GET',{});const _0x2362f7=await fetch(this[_0x5be83d(0x24f)]+'/'+_0xbf81ee,{'method':'GET','headers':{'Content-Type':'application/json','User-Agent':_0x5be83d(0x258)}}),_0xe35708=Date['now']()-_0x5c58a2;if(!_0x2362f7['ok']){const _0x573698=await _0x2362f7['text']();loggerService_1[_0x5be83d(0x1e4)][_0x5be83d(0x1f1)]('rapyd',_0x5be83d(0x200)+_0xbf81ee,_0x2362f7['status'],_0x573698,_0xe35708);throw new Error(_0x5be83d(0x210)+_0x2362f7[_0x5be83d(0x225)]);}const _0x56c4c2=await _0x2362f7[_0x5be83d(0x24e)]();loggerService_1[_0x5be83d(0x1e4)][_0x5be83d(0x1f1)]('rapyd',_0x5be83d(0x200)+_0xbf81ee,_0x2362f7['status'],_0x56c4c2,_0xe35708);if(_0x56c4c2[_0x5be83d(0x225)]?.[_0x5be83d(0x225)]!==_0x5be83d(0x21b)){loggerService_1[_0x5be83d(0x1e4)]['logWhiteDomainError'](_0x5be83d(0x1eb),_0x5be83d(0x200)+_0xbf81ee,_0x5be83d(0x22b)+(_0x56c4c2[_0x5be83d(0x225)]?.[_0x5be83d(0x220)]||_0x5be83d(0x22d)));throw new Error(_0x5be83d(0x22b)+(_0x56c4c2[_0x5be83d(0x225)]?.[_0x5be83d(0x220)]||_0x5be83d(0x22d)));}let _0x3934f0=_0x5be83d(0x245);if(_0x56c4c2[_0x5be83d(0x269)]?.[_0x5be83d(0x225)])switch(_0x56c4c2[_0x5be83d(0x269)]['status'][_0x5be83d(0x21a)]()){case'CLO':_0x3934f0=_0x5be83d(0x1f7);break;case'CAN':_0x3934f0=_0x5be83d(0x1e7);break;case'EXP':_0x3934f0=_0x5be83d(0x216);break;case _0x5be83d(0x232):_0x3934f0='FAILED';break;case'NEW':case _0x5be83d(0x202):default:_0x3934f0='PENDING';break;}return{'status':_0x3934f0,'amount':_0x56c4c2[_0x5be83d(0x269)]?.[_0x5be83d(0x1f6)],'currency':_0x56c4c2['data']?.['currency']};}catch(_0xe895f9){console['error'](_0x5be83d(0x1e5),_0xe895f9),loggerService_1['loggerService']['logWhiteDomainError'](_0x5be83d(0x1eb),_0x5be83d(0x200)+_0xbf81ee,_0xe895f9);throw new Error(_0x5be83d(0x252)+(_0xe895f9 instanceof Error?_0xe895f9['message']:_0x5be83d(0x22d)));}}async[a48_0x52e916(0x20c)](_0x127bce){const _0x291d19=a48_0x52e916;console[_0x291d19(0x23f)](_0x291d19(0x23a),_0x127bce);let _0x434b35=_0x291d19(0x245),_0x5f5b73;_0x127bce[_0x291d19(0x269)]?.['failure_message']&&(_0x5f5b73=_0x127bce[_0x291d19(0x269)][_0x291d19(0x1fc)],console[_0x291d19(0x23f)](_0x291d19(0x251)+_0x5f5b73));switch(_0x127bce[_0x291d19(0x21c)]?.[_0x291d19(0x21a)]()){case _0x291d19(0x250):_0x127bce['data']?.[_0x291d19(0x218)]===!![]&&_0x127bce[_0x291d19(0x269)]?.[_0x291d19(0x225)]===_0x291d19(0x246)?_0x434b35='PAID':_0x434b35=_0x291d19(0x245);break;case _0x291d19(0x222):_0x434b35='FAILED';break;case _0x291d19(0x1f9):_0x434b35=_0x291d19(0x216);break;case _0x291d19(0x230):_0x434b35=_0x291d19(0x1e7);!_0x5f5b73&&_0x127bce[_0x291d19(0x269)]?.[_0x291d19(0x1fc)]&&(_0x5f5b73=_0x127bce[_0x291d19(0x269)][_0x291d19(0x1fc)]);break;default:switch(_0x127bce[_0x291d19(0x269)]?.[_0x291d19(0x225)]?.[_0x291d19(0x21a)]()){case'CLO':_0x127bce[_0x291d19(0x269)]?.[_0x291d19(0x218)]===!![]?_0x434b35=_0x291d19(0x1f7):_0x434b35=_0x291d19(0x1e7);break;case _0x291d19(0x24d):_0x434b35=_0x291d19(0x1e7);break;case _0x291d19(0x22e):_0x434b35=_0x291d19(0x216);break;case _0x291d19(0x232):_0x434b35=_0x291d19(0x1e7);!_0x5f5b73&&_0x127bce[_0x291d19(0x269)]?.[_0x291d19(0x1fc)]&&(_0x5f5b73=_0x127bce['data'][_0x291d19(0x1fc)]);break;case _0x291d19(0x21f):case _0x291d19(0x202):default:_0x434b35=_0x291d19(0x245);break;}break;}const _0x1fa9f5={};return _0x127bce[_0x291d19(0x269)]?.['payment_method_data']?.[_0x291d19(0x22a)]&&(_0x1fa9f5['cardLast4']=_0x127bce['data'][_0x291d19(0x217)][_0x291d19(0x22a)]),_0x127bce[_0x291d19(0x269)]?.[_0x291d19(0x25d)]&&(_0x1fa9f5['paymentMethod']=_0x127bce[_0x291d19(0x269)][_0x291d19(0x25d)]),_0x127bce['data']?.['error_code']&&(_0x1fa9f5[_0x291d19(0x20f)]=_0x127bce[_0x291d19(0x269)][_0x291d19(0x231)]),_0x127bce['data']?.[_0x291d19(0x209)]&&(_0x1fa9f5[_0x291d19(0x212)]=_0x127bce[_0x291d19(0x269)][_0x291d19(0x209)]),console[_0x291d19(0x23f)](_0x291d19(0x1ea)+_0x434b35+_0x291d19(0x238)+(_0x5f5b73||_0x291d19(0x207))),{'paymentId':_0x127bce[_0x291d19(0x269)]?.['merchant_reference_id']||'','status':_0x434b35,'amount':_0x127bce[_0x291d19(0x269)]?.[_0x291d19(0x1f6)],'currency':_0x127bce[_0x291d19(0x269)]?.[_0x291d19(0x267)],'failureMessage':_0x5f5b73,'additionalInfo':_0x1fa9f5};}}exports[a48_0x52e916(0x248)]=RapydService;