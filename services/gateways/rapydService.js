'use strict';const a46_0x3c9863=a46_0x115d;(function(_0x15cfde,_0xe692c1){const _0x2e0797=a46_0x115d,_0x1aeebb=_0x15cfde();while(!![]){try{const _0x46c6ce=parseInt(_0x2e0797(0x208))/0x1*(-parseInt(_0x2e0797(0x217))/0x2)+-parseInt(_0x2e0797(0x1c8))/0x3*(parseInt(_0x2e0797(0x213))/0x4)+-parseInt(_0x2e0797(0x1e4))/0x5*(parseInt(_0x2e0797(0x207))/0x6)+parseInt(_0x2e0797(0x1e6))/0x7+-parseInt(_0x2e0797(0x1f0))/0x8*(parseInt(_0x2e0797(0x1d8))/0x9)+-parseInt(_0x2e0797(0x219))/0xa+parseInt(_0x2e0797(0x212))/0xb*(parseInt(_0x2e0797(0x1be))/0xc);if(_0x46c6ce===_0xe692c1)break;else _0x1aeebb['push'](_0x1aeebb['shift']());}catch(_0x1aa11c){_0x1aeebb['push'](_0x1aeebb['shift']());}}}(a46_0x4490,0x6cadb));function a46_0x4490(){const _0x4323f8=['Invalid\x20response\x20from\x20Rapyd\x20API:\x20missing\x20id\x20or\x20redirect_url','amount','paid','JSON\x20Parse\x20Error:\x20','GET','PAYMENT_EXPIRED','payment_method_type','rapyd','27387316SdKfDg','4DaTgPF','===\x20RAPYD\x20API\x20BUSINESS\x20ERROR\x20===','Incomplete\x20response:\x20missing\x20id\x20or\x20redirect_url','POST','236ZIbFdQ','defineProperty','8847020jiFMcU','RapydService','EXP','message','SUCCESS','failure_code','Request\x20Body\x20(Updated\x20Format):','parse','===\x20RAPYD\x20API\x20INCOMPLETE\x20RESPONSE\x20===','Response\x20data:','type','fromEntries','data','stringify','application/json','statusText','NEW','/v1/hosted/payment_links/','HTTP\x20error!\x20status:\x20','Failed\x20to\x20verify\x20Rapyd\x20payment:\x20','üá¨üáß\x20Using\x20GB\x20(Britain)\x20as\x20country\x20for\x20Rapyd\x20payment\x20link','failure_message','\x20(always\x20GB\x20for\x20Rapyd)','Payment\x20Link\x20ID:','===\x20RAPYD\x20SERVICE\x20ERROR\x20===','Rapyd\x20API\x20error:\x20','ACT','\x20(GB\x20-\x20Britain)','https://tesoft.uk/gateway/success.php?id=','log','12uqyaRI',',\x20body:\x20','merchant_reference_id','cardLast4','loggerService','error','Full\x20Error\x20Data:','CLO','Error\x20stack:','===\x20PARSED\x20RAPYD\x20RESPONSE\x20===','1243959adtuxu','Unknown\x20error\x20from\x20Rapyd\x20API','Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20','redirect_url','===\x20RAPYD\x20API\x20ERROR\x20===','PAYMENT_CANCELED','Response\x20Time:','URL:','PAYMENT_FAILED','üí•\x20Rapyd\x20failure\x20message:\x20','Response\x20Body:','toUpperCase','text','logWhiteDomainRequest','===\x20RAPYD\x20API\x20RESPONSE\x20(White\x20Domain)\x20===','https://tesoft.uk/gateway/fail.php?id=','9xisWkU','createPaymentLink','TesSoft\x20Payment\x20System/1.0','FAILED','PAID','error_code','===\x20RAPYD\x20SUCCESS\x20===','PAYMENT_COMPLETED','currency',',\x20failureMessage=','HTTP\x20Status:','UNKNOWN','150845XjMKDy','Missing\x20id\x20or\x20redirect_url\x20in\x20response','3366237zEFsuK','json','Unknown\x20error','EXPIRED','Processing\x20Rapyd\x20webhook:','headers','/v1/hosted/payment_links','Error\x20message:','Error\x20Message:','payment_method_data','5350640fkjaNZ','logWhiteDomainResponse','PENDING','Raw\x20Response\x20Body:','__esModule','status','Business\x20Error\x20(','https://tesoft.uk/gateway/rapyd/','processWebhook','now','errorCode','none','gb_visa_card','logWhiteDomainError','failureCode','Error\x20Code:','last4','../loggerService','Status:','apiUrl','ORDER:\x20','verifyPayment','CAN','18DndPie','3956DWsyTn','):\x20'];a46_0x4490=function(){return _0x4323f8;};return a46_0x4490();}function a46_0x115d(_0x55f48a,_0x2bb5cf){const _0x449039=a46_0x4490();return a46_0x115d=function(_0x115d52,_0x44ab48){_0x115d52=_0x115d52-0x1a6;let _0x18e167=_0x449039[_0x115d52];return _0x18e167;},a46_0x115d(_0x55f48a,_0x2bb5cf);}Object[a46_0x3c9863(0x218)](exports,a46_0x3c9863(0x1f4),{'value':!![]}),exports[a46_0x3c9863(0x21a)]=void 0x0;const loggerService_1=require(a46_0x3c9863(0x201));class RapydService{constructor(){const _0x558cab=a46_0x3c9863;this[_0x558cab(0x203)]=_0x558cab(0x1f7),console[_0x558cab(0x1bd)]('üåê\x20Rapyd\x20service\x20initialized\x20with\x20white\x20domain\x20proxy');}async[a46_0x3c9863(0x1d9)](_0x43e397){const _0x40fafc=a46_0x3c9863,{orderId:_0x26c67d,orderName:_0x2fac57,amount:_0x2e79b6,currency:_0x5c000e,usage:_0x1e037c,maxPayments:_0xbbf483,successUrl:_0x18beed,failUrl:_0x11f6be}=_0x43e397,_0xeb480a=_0x5c000e[_0x40fafc(0x1d3)](),_0x2ca4f9='GB';console[_0x40fafc(0x1bd)](_0x40fafc(0x1b4));const _0x173acf=_0x40fafc(0x1bc)+_0x26c67d,_0x35085c=_0x40fafc(0x1d7)+_0x26c67d,_0x467472={'amount':_0x2e79b6,'currency':_0xeb480a,'cancel_checkout_url':_0x35085c,'complete_checkout_url':_0x173acf,'complete_payment_url':_0x173acf,'merchant_reference_id':_0x26c67d,'description':_0x40fafc(0x204)+_0x26c67d,'country':'GB','payment_method_types_include':[_0x40fafc(0x1fc),'gb_mastercard_card'],'custom_elements':{'display_description':!![]}},_0x43f934=Date[_0x40fafc(0x1f9)]();try{console[_0x40fafc(0x1bd)]('===\x20RAPYD\x20API\x20REQUEST\x20(White\x20Domain\x20-\x20Updated\x20Format)\x20==='),console[_0x40fafc(0x1bd)](_0x40fafc(0x1cf),this[_0x40fafc(0x203)]),console['log'](_0x40fafc(0x1a6),JSON[_0x40fafc(0x1ad)](_0x467472,null,0x2)),console['log']('üá¨üáß\x20Country:\x20'+_0x2ca4f9+_0x40fafc(0x1b6)),console[_0x40fafc(0x1bd)]('üí≥\x20Payment\x20Methods:\x20gb_visa_card,\x20gb_mastercard_card'),loggerService_1[_0x40fafc(0x1c2)][_0x40fafc(0x1d5)]('rapyd',_0x40fafc(0x1ec),'POST',_0x467472);const _0x1b37bd=await fetch(this[_0x40fafc(0x203)],{'method':_0x40fafc(0x216),'headers':{'Content-Type':_0x40fafc(0x1ae),'User-Agent':_0x40fafc(0x1da)},'body':JSON[_0x40fafc(0x1ad)](_0x467472)}),_0x16206b=Date[_0x40fafc(0x1f9)]()-_0x43f934;console[_0x40fafc(0x1bd)](_0x40fafc(0x1d6)),console[_0x40fafc(0x1bd)](_0x40fafc(0x202),_0x1b37bd['status']),console['log']('Status\x20Text:',_0x1b37bd[_0x40fafc(0x1af)]),console['log']('Headers:',Object[_0x40fafc(0x1ab)](_0x1b37bd[_0x40fafc(0x1eb)]['entries']())),console[_0x40fafc(0x1bd)](_0x40fafc(0x1ce),_0x16206b+'ms');const _0x2f9852=await _0x1b37bd['text']();console[_0x40fafc(0x1bd)](_0x40fafc(0x1f3),_0x2f9852);if(!_0x1b37bd['ok']){console[_0x40fafc(0x1c3)](_0x40fafc(0x1cc)),console['error'](_0x40fafc(0x1e2),_0x1b37bd[_0x40fafc(0x1f5)]),console[_0x40fafc(0x1c3)](_0x40fafc(0x1d2),_0x2f9852),loggerService_1['loggerService'][_0x40fafc(0x1f1)](_0x40fafc(0x211),_0x40fafc(0x1ec),_0x1b37bd[_0x40fafc(0x1f5)],_0x2f9852,_0x16206b),loggerService_1[_0x40fafc(0x1c2)][_0x40fafc(0x1fd)](_0x40fafc(0x211),_0x40fafc(0x1ec),'HTTP\x20'+_0x1b37bd['status']+':\x20'+_0x2f9852);throw new Error(_0x40fafc(0x1b2)+_0x1b37bd['status']+_0x40fafc(0x1bf)+_0x2f9852);}let _0x3f2463;try{_0x3f2463=JSON[_0x40fafc(0x1a7)](_0x2f9852);}catch(_0x3899c0){console['error']('Failed\x20to\x20parse\x20JSON\x20response:',_0x3899c0),loggerService_1[_0x40fafc(0x1c2)][_0x40fafc(0x1fd)](_0x40fafc(0x211),'/v1/hosted/payment_links',_0x40fafc(0x20d)+_0x3899c0);throw new Error('Invalid\x20JSON\x20response\x20from\x20Rapyd\x20API:\x20'+_0x2f9852);}console['log'](_0x40fafc(0x1c7)),console[_0x40fafc(0x1bd)]('Parsed\x20Result:',JSON['stringify'](_0x3f2463,null,0x2)),loggerService_1['loggerService']['logWhiteDomainResponse'](_0x40fafc(0x211),_0x40fafc(0x1ec),_0x1b37bd[_0x40fafc(0x1f5)],_0x3f2463,_0x16206b);if(_0x3f2463['status']?.[_0x40fafc(0x1f5)]!==_0x40fafc(0x21d)){const _0x1dda70=_0x3f2463['status']?.[_0x40fafc(0x21c)]||_0x40fafc(0x1c9),_0x3031fd=_0x3f2463['status']?.['error_code']||_0x40fafc(0x1e3);console['error'](_0x40fafc(0x214)),console[_0x40fafc(0x1c3)](_0x40fafc(0x1ff),_0x3031fd),console[_0x40fafc(0x1c3)](_0x40fafc(0x1ee),_0x1dda70),console[_0x40fafc(0x1c3)](_0x40fafc(0x1c4),_0x3f2463[_0x40fafc(0x1f5)]),loggerService_1[_0x40fafc(0x1c2)]['logWhiteDomainError'](_0x40fafc(0x211),'/v1/hosted/payment_links',_0x40fafc(0x1f6)+_0x3031fd+'):\x20'+_0x1dda70);throw new Error('Rapyd\x20API\x20error\x20('+_0x3031fd+_0x40fafc(0x209)+_0x1dda70);}if(!_0x3f2463[_0x40fafc(0x1ac)]?.['id']||!_0x3f2463[_0x40fafc(0x1ac)]?.[_0x40fafc(0x1cb)]){console['error'](_0x40fafc(0x1a8)),console[_0x40fafc(0x1c3)](_0x40fafc(0x1e5)),console[_0x40fafc(0x1c3)](_0x40fafc(0x1a9),_0x3f2463[_0x40fafc(0x1ac)]),loggerService_1[_0x40fafc(0x1c2)][_0x40fafc(0x1fd)](_0x40fafc(0x211),_0x40fafc(0x1ec),_0x40fafc(0x215));throw new Error(_0x40fafc(0x20a));}return console[_0x40fafc(0x1bd)](_0x40fafc(0x1de)),console[_0x40fafc(0x1bd)](_0x40fafc(0x1b7),_0x3f2463['data']['id']),console['log']('Redirect\x20URL:',_0x3f2463[_0x40fafc(0x1ac)][_0x40fafc(0x1cb)]),console[_0x40fafc(0x1bd)]('üá¨üáß\x20Country\x20used:\x20'+_0x2ca4f9+_0x40fafc(0x1bb)),console[_0x40fafc(0x1bd)]('üí≥\x20Payment\x20Methods:\x20gb_visa_card,\x20gb_mastercard_card'),{'gateway_payment_id':_0x3f2463['data']['id'],'payment_url':_0x3f2463[_0x40fafc(0x1ac)][_0x40fafc(0x1cb)]};}catch(_0x1c2c66){console[_0x40fafc(0x1c3)](_0x40fafc(0x1b8)),console[_0x40fafc(0x1c3)]('Error\x20details:',_0x1c2c66),loggerService_1[_0x40fafc(0x1c2)]['logWhiteDomainError']('rapyd',_0x40fafc(0x1ec),_0x1c2c66);if(_0x1c2c66 instanceof Error){console[_0x40fafc(0x1c3)](_0x40fafc(0x1ed),_0x1c2c66[_0x40fafc(0x21c)]),console[_0x40fafc(0x1c3)](_0x40fafc(0x1c6),_0x1c2c66['stack']);throw new Error(_0x40fafc(0x1ca)+_0x1c2c66[_0x40fafc(0x21c)]);}throw new Error('Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20Unknown\x20error');}}async[a46_0x3c9863(0x205)](_0x591fd7){const _0x18c7b1=a46_0x3c9863,_0x3c2706=Date[_0x18c7b1(0x1f9)]();try{loggerService_1[_0x18c7b1(0x1c2)][_0x18c7b1(0x1d5)](_0x18c7b1(0x211),_0x18c7b1(0x1b1)+_0x591fd7,_0x18c7b1(0x20e),{});const _0x36631d=await fetch(this[_0x18c7b1(0x203)]+'/'+_0x591fd7,{'method':_0x18c7b1(0x20e),'headers':{'Content-Type':_0x18c7b1(0x1ae),'User-Agent':_0x18c7b1(0x1da)}}),_0x40855c=Date['now']()-_0x3c2706;if(!_0x36631d['ok']){const _0x51fb42=await _0x36631d[_0x18c7b1(0x1d4)]();loggerService_1[_0x18c7b1(0x1c2)][_0x18c7b1(0x1f1)]('rapyd',_0x18c7b1(0x1b1)+_0x591fd7,_0x36631d[_0x18c7b1(0x1f5)],_0x51fb42,_0x40855c);throw new Error('HTTP\x20error!\x20status:\x20'+_0x36631d['status']);}const _0x5329b0=await _0x36631d[_0x18c7b1(0x1e7)]();loggerService_1[_0x18c7b1(0x1c2)]['logWhiteDomainResponse']('rapyd','/v1/hosted/payment_links/'+_0x591fd7,_0x36631d['status'],_0x5329b0,_0x40855c);if(_0x5329b0[_0x18c7b1(0x1f5)]?.['status']!==_0x18c7b1(0x21d)){loggerService_1['loggerService']['logWhiteDomainError'](_0x18c7b1(0x211),'/v1/hosted/payment_links/'+_0x591fd7,'Rapyd\x20API\x20error:\x20'+(_0x5329b0[_0x18c7b1(0x1f5)]?.[_0x18c7b1(0x21c)]||_0x18c7b1(0x1e8)));throw new Error(_0x18c7b1(0x1b9)+(_0x5329b0[_0x18c7b1(0x1f5)]?.['message']||_0x18c7b1(0x1e8)));}let _0x34a65c=_0x18c7b1(0x1f2);if(_0x5329b0[_0x18c7b1(0x1ac)]?.[_0x18c7b1(0x1f5)])switch(_0x5329b0[_0x18c7b1(0x1ac)][_0x18c7b1(0x1f5)][_0x18c7b1(0x1d3)]()){case _0x18c7b1(0x1c5):_0x34a65c='PAID';break;case _0x18c7b1(0x206):_0x34a65c=_0x18c7b1(0x1db);break;case _0x18c7b1(0x21b):_0x34a65c=_0x18c7b1(0x1e9);break;case'ERR':_0x34a65c=_0x18c7b1(0x1db);break;case'NEW':case _0x18c7b1(0x1ba):default:_0x34a65c='PENDING';break;}return{'status':_0x34a65c,'amount':_0x5329b0['data']?.['amount'],'currency':_0x5329b0[_0x18c7b1(0x1ac)]?.[_0x18c7b1(0x1e0)]};}catch(_0x3cc724){console[_0x18c7b1(0x1c3)]('Rapyd\x20payment\x20verification\x20error:',_0x3cc724),loggerService_1[_0x18c7b1(0x1c2)][_0x18c7b1(0x1fd)](_0x18c7b1(0x211),_0x18c7b1(0x1b1)+_0x591fd7,_0x3cc724);throw new Error(_0x18c7b1(0x1b3)+(_0x3cc724 instanceof Error?_0x3cc724[_0x18c7b1(0x21c)]:'Unknown\x20error'));}}async[a46_0x3c9863(0x1f8)](_0x54a64c){const _0x1aa7c4=a46_0x3c9863;console[_0x1aa7c4(0x1bd)](_0x1aa7c4(0x1ea),_0x54a64c);let _0x562260=_0x1aa7c4(0x1f2),_0x10dc55;_0x54a64c[_0x1aa7c4(0x1ac)]?.[_0x1aa7c4(0x1b5)]&&(_0x10dc55=_0x54a64c['data'][_0x1aa7c4(0x1b5)],console[_0x1aa7c4(0x1bd)](_0x1aa7c4(0x1d1)+_0x10dc55));switch(_0x54a64c[_0x1aa7c4(0x1aa)]?.[_0x1aa7c4(0x1d3)]()){case _0x1aa7c4(0x1df):_0x54a64c['data']?.['paid']===!![]&&_0x54a64c[_0x1aa7c4(0x1ac)]?.[_0x1aa7c4(0x1f5)]===_0x1aa7c4(0x1c5)?_0x562260=_0x1aa7c4(0x1dc):_0x562260=_0x1aa7c4(0x1f2);break;case _0x1aa7c4(0x1cd):_0x562260=_0x1aa7c4(0x1db);break;case _0x1aa7c4(0x20f):_0x562260=_0x1aa7c4(0x1e9);break;case _0x1aa7c4(0x1d0):_0x562260=_0x1aa7c4(0x1db);!_0x10dc55&&_0x54a64c['data']?.[_0x1aa7c4(0x1b5)]&&(_0x10dc55=_0x54a64c['data'][_0x1aa7c4(0x1b5)]);break;default:switch(_0x54a64c[_0x1aa7c4(0x1ac)]?.[_0x1aa7c4(0x1f5)]?.[_0x1aa7c4(0x1d3)]()){case _0x1aa7c4(0x1c5):_0x54a64c[_0x1aa7c4(0x1ac)]?.[_0x1aa7c4(0x20c)]===!![]?_0x562260=_0x1aa7c4(0x1dc):_0x562260=_0x1aa7c4(0x1db);break;case _0x1aa7c4(0x206):_0x562260='FAILED';break;case'EXP':_0x562260=_0x1aa7c4(0x1e9);break;case'ERR':_0x562260=_0x1aa7c4(0x1db);!_0x10dc55&&_0x54a64c[_0x1aa7c4(0x1ac)]?.[_0x1aa7c4(0x1b5)]&&(_0x10dc55=_0x54a64c[_0x1aa7c4(0x1ac)][_0x1aa7c4(0x1b5)]);break;case _0x1aa7c4(0x1b0):case'ACT':default:_0x562260=_0x1aa7c4(0x1f2);break;}break;}const _0x46885b={};return _0x54a64c[_0x1aa7c4(0x1ac)]?.[_0x1aa7c4(0x1ef)]?.[_0x1aa7c4(0x200)]&&(_0x46885b[_0x1aa7c4(0x1c1)]=_0x54a64c[_0x1aa7c4(0x1ac)][_0x1aa7c4(0x1ef)][_0x1aa7c4(0x200)]),_0x54a64c[_0x1aa7c4(0x1ac)]?.[_0x1aa7c4(0x210)]&&(_0x46885b['paymentMethod']=_0x54a64c[_0x1aa7c4(0x1ac)][_0x1aa7c4(0x210)]),_0x54a64c['data']?.[_0x1aa7c4(0x1dd)]&&(_0x46885b[_0x1aa7c4(0x1fa)]=_0x54a64c[_0x1aa7c4(0x1ac)][_0x1aa7c4(0x1dd)]),_0x54a64c['data']?.[_0x1aa7c4(0x21e)]&&(_0x46885b[_0x1aa7c4(0x1fe)]=_0x54a64c['data']['failure_code']),console['log']('üîÑ\x20Rapyd\x20webhook\x20processed:\x20status='+_0x562260+_0x1aa7c4(0x1e1)+(_0x10dc55||_0x1aa7c4(0x1fb))),{'paymentId':_0x54a64c['data']?.[_0x1aa7c4(0x1c0)]||'','status':_0x562260,'amount':_0x54a64c[_0x1aa7c4(0x1ac)]?.[_0x1aa7c4(0x20b)],'currency':_0x54a64c[_0x1aa7c4(0x1ac)]?.[_0x1aa7c4(0x1e0)],'failureMessage':_0x10dc55,'additionalInfo':_0x46885b};}}exports[a46_0x3c9863(0x21a)]=RapydService;