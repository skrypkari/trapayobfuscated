'use strict';const a45_0x309992=a45_0x3ec4;(function(_0x14d42b,_0x2a2c3d){const _0x206e69=a45_0x3ec4,_0x43c12c=_0x14d42b();while(!![]){try{const _0x1c876e=-parseInt(_0x206e69(0xc8))/0x1+parseInt(_0x206e69(0xe6))/0x2+parseInt(_0x206e69(0xbe))/0x3+-parseInt(_0x206e69(0x87))/0x4+-parseInt(_0x206e69(0x90))/0x5*(parseInt(_0x206e69(0xf4))/0x6)+parseInt(_0x206e69(0xdf))/0x7*(parseInt(_0x206e69(0xd4))/0x8)+parseInt(_0x206e69(0xf2))/0x9;if(_0x1c876e===_0x2a2c3d)break;else _0x43c12c['push'](_0x43c12c['shift']());}catch(_0x3242c8){_0x43c12c['push'](_0x43c12c['shift']());}}}(a45_0x58c2,0x8f00c));Object[a45_0x309992(0x103)](exports,a45_0x309992(0xaf),{'value':!![]}),exports[a45_0x309992(0x8a)]=void 0x0;const loggerService_1=require(a45_0x309992(0xec));function a45_0x3ec4(_0x232000,_0x2bd9c8){const _0x58c2ae=a45_0x58c2();return a45_0x3ec4=function(_0x3ec4d3,_0x4262a8){_0x3ec4d3=_0x3ec4d3-0x85;let _0xef1280=_0x58c2ae[_0x3ec4d3];return _0xef1280;},a45_0x3ec4(_0x232000,_0x2bd9c8);}class RapydService{constructor(){const _0x406cc5=a45_0x309992;this[_0x406cc5(0xc5)]='https://tesoft.uk/gateway/rapyd/',console[_0x406cc5(0xd5)](_0x406cc5(0x85));}async[a45_0x309992(0xdd)](_0x22e0b6){const _0x5043ba=a45_0x309992,{orderId:_0x517ef3,orderName:_0x2bacc7,amount:_0x37e263,currency:_0x56dec6,usage:_0x320875,maxPayments:_0x439c37,successUrl:_0x57d2da,failUrl:_0x4b09b9}=_0x22e0b6,_0x16203e=_0x56dec6[_0x5043ba(0xf0)](),_0x190974='GB';console[_0x5043ba(0xd5)]('🇬🇧\x20Using\x20GB\x20(Britain)\x20as\x20country\x20for\x20Rapyd\x20payment\x20link');const _0x52e91d=_0x5043ba(0x9f)+_0x517ef3,_0x324f2b=_0x5043ba(0xe1)+_0x517ef3,_0xfcf63c={'amount':_0x37e263,'currency':_0x16203e,'cancel_checkout_url':_0x324f2b,'complete_checkout_url':_0x52e91d,'complete_payment_url':_0x52e91d,'merchant_reference_id':_0x517ef3,'description':_0x5043ba(0xf3)+_0x517ef3,'country':'GB','payment_method_types_include':[_0x5043ba(0xf6),'gb_mastercard_card'],'custom_elements':{'display_description':!![]}},_0x2f0033=Date[_0x5043ba(0xe4)]();try{console['log']('===\x20RAPYD\x20API\x20REQUEST\x20(White\x20Domain\x20-\x20Updated\x20Format)\x20==='),console[_0x5043ba(0xd5)]('URL:',this['apiUrl']),console[_0x5043ba(0xd5)](_0x5043ba(0xca),JSON['stringify'](_0xfcf63c,null,0x2)),console[_0x5043ba(0xd5)]('🇬🇧\x20Country:\x20'+_0x190974+_0x5043ba(0xe3)),console['log']('💳\x20Payment\x20Methods:\x20gb_visa_card,\x20gb_mastercard_card'),loggerService_1[_0x5043ba(0xdc)][_0x5043ba(0xb0)](_0x5043ba(0xa5),'/v1/hosted/payment_links',_0x5043ba(0xf5),_0xfcf63c);const _0x441b70=await fetch(this['apiUrl'],{'method':_0x5043ba(0xf5),'headers':{'Content-Type':_0x5043ba(0x8e),'User-Agent':_0x5043ba(0xbf)},'body':JSON['stringify'](_0xfcf63c)}),_0x112a7a=Date[_0x5043ba(0xe4)]()-_0x2f0033;console[_0x5043ba(0xd5)](_0x5043ba(0x9b)),console[_0x5043ba(0xd5)](_0x5043ba(0xcb),_0x441b70[_0x5043ba(0x100)]),console[_0x5043ba(0xd5)](_0x5043ba(0xcd),_0x441b70[_0x5043ba(0xda)]),console['log'](_0x5043ba(0x88),Object[_0x5043ba(0xa9)](_0x441b70[_0x5043ba(0xb9)][_0x5043ba(0x96)]())),console[_0x5043ba(0xd5)](_0x5043ba(0xbb),_0x112a7a+'ms');const _0x143d38=await _0x441b70[_0x5043ba(0xd1)]();console[_0x5043ba(0xd5)](_0x5043ba(0x8f),_0x143d38);if(!_0x441b70['ok']){console[_0x5043ba(0xc6)](_0x5043ba(0xe9)),console[_0x5043ba(0xc6)](_0x5043ba(0x92),_0x441b70['status']),console[_0x5043ba(0xc6)](_0x5043ba(0x101),_0x143d38),loggerService_1['loggerService'][_0x5043ba(0xa1)](_0x5043ba(0xa5),_0x5043ba(0xf8),_0x441b70[_0x5043ba(0x100)],_0x143d38,_0x112a7a),loggerService_1[_0x5043ba(0xdc)][_0x5043ba(0xb1)](_0x5043ba(0xa5),_0x5043ba(0xf8),_0x5043ba(0xb7)+_0x441b70[_0x5043ba(0x100)]+':\x20'+_0x143d38);throw new Error(_0x5043ba(0xe0)+_0x441b70[_0x5043ba(0x100)]+_0x5043ba(0x95)+_0x143d38);}let _0x45139b;try{_0x45139b=JSON[_0x5043ba(0xcc)](_0x143d38);}catch(_0x56f10a){console[_0x5043ba(0xc6)](_0x5043ba(0xfc),_0x56f10a),loggerService_1['loggerService'][_0x5043ba(0xb1)](_0x5043ba(0xa5),_0x5043ba(0xf8),'JSON\x20Parse\x20Error:\x20'+_0x56f10a);throw new Error(_0x5043ba(0x86)+_0x143d38);}console[_0x5043ba(0xd5)](_0x5043ba(0x8b)),console[_0x5043ba(0xd5)](_0x5043ba(0xc7),JSON[_0x5043ba(0xfa)](_0x45139b,null,0x2)),loggerService_1[_0x5043ba(0xdc)][_0x5043ba(0xa1)](_0x5043ba(0xa5),_0x5043ba(0xf8),_0x441b70[_0x5043ba(0x100)],_0x45139b,_0x112a7a);if(_0x45139b['status']?.[_0x5043ba(0x100)]!==_0x5043ba(0xac)){const _0x2a6558=_0x45139b[_0x5043ba(0x100)]?.['message']||_0x5043ba(0xc1),_0x561e98=_0x45139b[_0x5043ba(0x100)]?.['error_code']||_0x5043ba(0xeb);console['error'](_0x5043ba(0xaa)),console['error'](_0x5043ba(0x102),_0x561e98),console[_0x5043ba(0xc6)](_0x5043ba(0x8d),_0x2a6558),console['error'](_0x5043ba(0x9d),_0x45139b[_0x5043ba(0x100)]),loggerService_1[_0x5043ba(0xdc)][_0x5043ba(0xb1)](_0x5043ba(0xa5),'/v1/hosted/payment_links',_0x5043ba(0xe5)+_0x561e98+'):\x20'+_0x2a6558);throw new Error(_0x5043ba(0x9a)+_0x561e98+_0x5043ba(0xde)+_0x2a6558);}if(!_0x45139b['data']?.['id']||!_0x45139b[_0x5043ba(0xba)]?.[_0x5043ba(0xc0)]){console[_0x5043ba(0xc6)]('===\x20RAPYD\x20API\x20INCOMPLETE\x20RESPONSE\x20==='),console[_0x5043ba(0xc6)](_0x5043ba(0xcf)),console[_0x5043ba(0xc6)]('Response\x20data:',_0x45139b[_0x5043ba(0xba)]),loggerService_1[_0x5043ba(0xdc)][_0x5043ba(0xb1)](_0x5043ba(0xa5),_0x5043ba(0xf8),_0x5043ba(0xd6));throw new Error(_0x5043ba(0xf9));}return console['log'](_0x5043ba(0xce)),console[_0x5043ba(0xd5)]('Payment\x20Link\x20ID:',_0x45139b[_0x5043ba(0xba)]['id']),console[_0x5043ba(0xd5)](_0x5043ba(0xb8),_0x45139b['data'][_0x5043ba(0xc0)]),console[_0x5043ba(0xd5)](_0x5043ba(0xf7)+_0x190974+_0x5043ba(0xa0)),console[_0x5043ba(0xd5)](_0x5043ba(0x104)),{'gateway_payment_id':_0x45139b[_0x5043ba(0xba)]['id'],'payment_url':_0x45139b[_0x5043ba(0xba)][_0x5043ba(0xc0)]};}catch(_0x5f415e){console['error'](_0x5043ba(0xc2)),console[_0x5043ba(0xc6)](_0x5043ba(0xe8),_0x5f415e),loggerService_1[_0x5043ba(0xdc)]['logWhiteDomainError'](_0x5043ba(0xa5),_0x5043ba(0xf8),_0x5f415e);if(_0x5f415e instanceof Error){console[_0x5043ba(0xc6)](_0x5043ba(0xa4),_0x5f415e[_0x5043ba(0xae)]),console[_0x5043ba(0xc6)](_0x5043ba(0xff),_0x5f415e[_0x5043ba(0xdb)]);throw new Error(_0x5043ba(0x98)+_0x5f415e['message']);}throw new Error(_0x5043ba(0xe7));}}async[a45_0x309992(0xed)](_0x5c927c){const _0x560aed=a45_0x309992,_0x181c7f=Date[_0x560aed(0xe4)]();try{loggerService_1[_0x560aed(0xdc)][_0x560aed(0xb0)]('rapyd',_0x560aed(0xea)+_0x5c927c,_0x560aed(0xa2),{});const _0x4d03ad=await fetch(this['apiUrl']+'/'+_0x5c927c,{'method':_0x560aed(0xa2),'headers':{'Content-Type':_0x560aed(0x8e),'User-Agent':_0x560aed(0xbf)}}),_0x1ea12f=Date[_0x560aed(0xe4)]()-_0x181c7f;if(!_0x4d03ad['ok']){const _0x44437c=await _0x4d03ad[_0x560aed(0xd1)]();loggerService_1['loggerService']['logWhiteDomainResponse'](_0x560aed(0xa5),_0x560aed(0xea)+_0x5c927c,_0x4d03ad[_0x560aed(0x100)],_0x44437c,_0x1ea12f);throw new Error(_0x560aed(0xe0)+_0x4d03ad[_0x560aed(0x100)]);}const _0x23935b=await _0x4d03ad[_0x560aed(0x97)]();loggerService_1['loggerService'][_0x560aed(0xa1)](_0x560aed(0xa5),_0x560aed(0xea)+_0x5c927c,_0x4d03ad[_0x560aed(0x100)],_0x23935b,_0x1ea12f);if(_0x23935b[_0x560aed(0x100)]?.[_0x560aed(0x100)]!=='SUCCESS'){loggerService_1[_0x560aed(0xdc)][_0x560aed(0xb1)](_0x560aed(0xa5),_0x560aed(0xea)+_0x5c927c,'Rapyd\x20API\x20error:\x20'+(_0x23935b[_0x560aed(0x100)]?.[_0x560aed(0xae)]||_0x560aed(0x9e)));throw new Error(_0x560aed(0xee)+(_0x23935b['status']?.[_0x560aed(0xae)]||'Unknown\x20error'));}let _0x131bc1=_0x560aed(0x93);if(_0x23935b['data']?.[_0x560aed(0x100)])switch(_0x23935b[_0x560aed(0xba)][_0x560aed(0x100)][_0x560aed(0xf0)]()){case'CLO':_0x131bc1=_0x560aed(0xad);break;case _0x560aed(0xfb):_0x131bc1='FAILED';break;case'EXP':_0x131bc1=_0x560aed(0xd7);break;case _0x560aed(0xa8):_0x131bc1=_0x560aed(0xd8);break;case _0x560aed(0xb2):case _0x560aed(0xbc):default:_0x131bc1=_0x560aed(0x93);break;}return{'status':_0x131bc1,'amount':_0x23935b[_0x560aed(0xba)]?.['amount'],'currency':_0x23935b['data']?.[_0x560aed(0xb5)]};}catch(_0x56f1c5){console['error'](_0x560aed(0xd0),_0x56f1c5),loggerService_1[_0x560aed(0xdc)][_0x560aed(0xb1)](_0x560aed(0xa5),_0x560aed(0xea)+_0x5c927c,_0x56f1c5);throw new Error(_0x560aed(0xab)+(_0x56f1c5 instanceof Error?_0x56f1c5[_0x560aed(0xae)]:'Unknown\x20error'));}}async[a45_0x309992(0xef)](_0x5ee40d){const _0x1e17d4=a45_0x309992;console[_0x1e17d4(0xd5)](_0x1e17d4(0xc9),_0x5ee40d);let _0x3a1d30='PENDING',_0x51ade0;_0x5ee40d[_0x1e17d4(0xba)]?.[_0x1e17d4(0xc3)]&&(_0x51ade0=_0x5ee40d[_0x1e17d4(0xba)][_0x1e17d4(0xc3)],console[_0x1e17d4(0xd5)](_0x1e17d4(0xe2)+_0x51ade0));switch(_0x5ee40d['type']?.[_0x1e17d4(0xf0)]()){case _0x1e17d4(0x8c):_0x5ee40d[_0x1e17d4(0xba)]?.[_0x1e17d4(0xd9)]===!![]&&_0x5ee40d[_0x1e17d4(0xba)]?.['status']==='CLO'?_0x3a1d30=_0x1e17d4(0xad):_0x3a1d30=_0x1e17d4(0x93);break;case _0x1e17d4(0xfd):_0x3a1d30='FAILED';break;case _0x1e17d4(0xa7):_0x3a1d30='EXPIRED';break;case _0x1e17d4(0xc4):_0x3a1d30='FAILED';!_0x51ade0&&_0x5ee40d[_0x1e17d4(0xba)]?.[_0x1e17d4(0xc3)]&&(_0x51ade0=_0x5ee40d[_0x1e17d4(0xba)][_0x1e17d4(0xc3)]);break;default:switch(_0x5ee40d[_0x1e17d4(0xba)]?.[_0x1e17d4(0x100)]?.[_0x1e17d4(0xf0)]()){case _0x1e17d4(0x9c):_0x5ee40d['data']?.['paid']===!![]?_0x3a1d30='PAID':_0x3a1d30=_0x1e17d4(0xd8);break;case'CAN':_0x3a1d30=_0x1e17d4(0xd8);break;case _0x1e17d4(0xa3):_0x3a1d30='EXPIRED';break;case _0x1e17d4(0xa8):_0x3a1d30=_0x1e17d4(0xd8);!_0x51ade0&&_0x5ee40d[_0x1e17d4(0xba)]?.[_0x1e17d4(0xc3)]&&(_0x51ade0=_0x5ee40d[_0x1e17d4(0xba)][_0x1e17d4(0xc3)]);break;case _0x1e17d4(0xb2):case _0x1e17d4(0xbc):default:_0x3a1d30=_0x1e17d4(0x93);break;}break;}const _0x34ed36={};return _0x5ee40d[_0x1e17d4(0xba)]?.['payment_method_data']?.[_0x1e17d4(0xf1)]&&(_0x34ed36[_0x1e17d4(0x91)]=_0x5ee40d[_0x1e17d4(0xba)][_0x1e17d4(0x94)][_0x1e17d4(0xf1)]),_0x5ee40d[_0x1e17d4(0xba)]?.['payment_method_type']&&(_0x34ed36[_0x1e17d4(0xd3)]=_0x5ee40d[_0x1e17d4(0xba)][_0x1e17d4(0x89)]),_0x5ee40d[_0x1e17d4(0xba)]?.['error_code']&&(_0x34ed36[_0x1e17d4(0xbd)]=_0x5ee40d[_0x1e17d4(0xba)][_0x1e17d4(0xb3)]),_0x5ee40d[_0x1e17d4(0xba)]?.[_0x1e17d4(0xb4)]&&(_0x34ed36['failureCode']=_0x5ee40d[_0x1e17d4(0xba)][_0x1e17d4(0xb4)]),console['log'](_0x1e17d4(0xfe)+_0x3a1d30+_0x1e17d4(0xd2)+(_0x51ade0||_0x1e17d4(0xb6))),{'paymentId':_0x5ee40d[_0x1e17d4(0xba)]?.[_0x1e17d4(0x99)]||'','status':_0x3a1d30,'amount':_0x5ee40d['data']?.[_0x1e17d4(0xa6)],'currency':_0x5ee40d['data']?.['currency'],'failureMessage':_0x51ade0,'additionalInfo':_0x34ed36};}}function a45_0x58c2(){const _0x2998d8=['Redirect\x20URL:','headers','data','Response\x20Time:','ACT','errorCode','1813155bGUPww','TesSoft\x20Payment\x20System/1.0','redirect_url','Unknown\x20error\x20from\x20Rapyd\x20API','===\x20RAPYD\x20SERVICE\x20ERROR\x20===','failure_message','PAYMENT_FAILED','apiUrl','error','Parsed\x20Result:','394086ECWaGO','Processing\x20Rapyd\x20webhook:','Request\x20Body\x20(Updated\x20Format):','Status:','parse','Status\x20Text:','===\x20RAPYD\x20SUCCESS\x20===','Missing\x20id\x20or\x20redirect_url\x20in\x20response','Rapyd\x20payment\x20verification\x20error:','text',',\x20failureMessage=','paymentMethod','872JwxGka','log','Incomplete\x20response:\x20missing\x20id\x20or\x20redirect_url','EXPIRED','FAILED','paid','statusText','stack','loggerService','createPaymentLink','):\x20','51079amKjsa','HTTP\x20error!\x20status:\x20','https://tesoft.uk/gateway/fail.php?id=','💥\x20Rapyd\x20failure\x20message:\x20','\x20(always\x20GB\x20for\x20Rapyd)','now','Business\x20Error\x20(','864544JblqxG','Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20Unknown\x20error','Error\x20details:','===\x20RAPYD\x20API\x20ERROR\x20===','/v1/hosted/payment_links/','UNKNOWN','../loggerService','verifyPayment','Rapyd\x20API\x20error:\x20','processWebhook','toUpperCase','last4','3287358FwYLZk','ORDER:\x20','1878EjQivP','POST','gb_visa_card','🇬🇧\x20Country\x20used:\x20','/v1/hosted/payment_links','Invalid\x20response\x20from\x20Rapyd\x20API:\x20missing\x20id\x20or\x20redirect_url','stringify','CAN','Failed\x20to\x20parse\x20JSON\x20response:','PAYMENT_CANCELED','🔄\x20Rapyd\x20webhook\x20processed:\x20status=','Error\x20stack:','status','Response\x20Body:','Error\x20Code:','defineProperty','💳\x20Payment\x20Methods:\x20gb_visa_card,\x20gb_mastercard_card','🌐\x20Rapyd\x20service\x20initialized\x20with\x20white\x20domain\x20proxy','Invalid\x20JSON\x20response\x20from\x20Rapyd\x20API:\x20','1366768WyqsBD','Headers:','payment_method_type','RapydService','===\x20PARSED\x20RAPYD\x20RESPONSE\x20===','PAYMENT_COMPLETED','Error\x20Message:','application/json','Raw\x20Response\x20Body:','13990jYnTjk','cardLast4','HTTP\x20Status:','PENDING','payment_method_data',',\x20body:\x20','entries','json','Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20','merchant_reference_id','Rapyd\x20API\x20error\x20(','===\x20RAPYD\x20API\x20RESPONSE\x20(White\x20Domain)\x20===','CLO','Full\x20Error\x20Data:','Unknown\x20error','https://tesoft.uk/gateway/success.php?id=','\x20(GB\x20-\x20Britain)','logWhiteDomainResponse','GET','EXP','Error\x20message:','rapyd','amount','PAYMENT_EXPIRED','ERR','fromEntries','===\x20RAPYD\x20API\x20BUSINESS\x20ERROR\x20===','Failed\x20to\x20verify\x20Rapyd\x20payment:\x20','SUCCESS','PAID','message','__esModule','logWhiteDomainRequest','logWhiteDomainError','NEW','error_code','failure_code','currency','none','HTTP\x20'];a45_0x58c2=function(){return _0x2998d8;};return a45_0x58c2();}exports[a45_0x309992(0x8a)]=RapydService;