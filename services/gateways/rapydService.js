'use strict';const a56_0x18928e=a56_0x40a8;(function(_0xc2d676,_0xf65017){const _0x966f03=a56_0x40a8,_0x1ffc2d=_0xc2d676();while(!![]){try{const _0x220362=-parseInt(_0x966f03(0x1ec))/0x1+-parseInt(_0x966f03(0x23a))/0x2+-parseInt(_0x966f03(0x1c2))/0x3+-parseInt(_0x966f03(0x1f0))/0x4+parseInt(_0x966f03(0x1d8))/0x5+parseInt(_0x966f03(0x223))/0x6+parseInt(_0x966f03(0x1df))/0x7;if(_0x220362===_0xf65017)break;else _0x1ffc2d['push'](_0x1ffc2d['shift']());}catch(_0xcadbbc){_0x1ffc2d['push'](_0x1ffc2d['shift']());}}}(a56_0x1bd4,0x21b50));Object[a56_0x18928e(0x218)](exports,a56_0x18928e(0x1c6),{'value':!![]}),exports[a56_0x18928e(0x1dc)]=void 0x0;function a56_0x1bd4(){const _0x18a248=['Headers:','error','rapyd','amount','418824eJcuHz','PAYMENT_EXPIRED','===\x20RAPYD\x20API\x20ERROR\x20===','\x20->\x20EUR:','üí±\x20Adding\x20currency\x20conversion\x20fields\x20for\x20','text','requested_currency','Invalid\x20response\x20from\x20Rapyd\x20API:\x20missing\x20id\x20or\x20redirect_url','Rapyd\x20payment\x20verification\x20error:','merchant_reference_id','Error\x20message:','last4','SUCCESS','Raw\x20Response\x20Body:','Parsed\x20Result:','failure_code','URL:','redirect_url','===\x20PARSED\x20RAPYD\x20RESPONSE\x20===','üåê\x20Rapyd\x20service\x20initialized\x20with\x20white\x20domain\x20proxy','paid','Status:','===\x20RAPYD\x20SUCCESS\x20===','52038HcXAQV','failure_message','):\x20','log','üá¨üáß\x20Country:\x20','Error\x20Code:','logWhiteDomainError','https://tesoft.uk/gateway/success.php?id=','message','üí≥\x20Payment\x20Methods:\x20gb_visa_card,\x20gb_mastercard_card','784041kpwrcD','GET','EUR','Incomplete\x20response:\x20missing\x20id\x20or\x20redirect_url','__esModule','===\x20RAPYD\x20API\x20BUSINESS\x20ERROR\x20===','Response\x20data:','type','Rapyd\x20API\x20error\x20(','HTTP\x20Status:','UNKNOWN','none','toUpperCase','Business\x20Error\x20(','\x20\x20\x20requested_currency:\x20EUR',',\x20failureMessage=','JSON\x20Parse\x20Error:\x20','Request\x20Body\x20(Updated\x20Format):','payment_method_type','cardLast4','floor','Redirect\x20URL:','445075kLESaG','üîÑ\x20Rapyd\x20webhook\x20processed:\x20status=','status','buy','RapydService','PAYMENT_CANCELED','PENDING','3755570FTdNnX','üí•\x20Rapyd\x20failure\x20message:\x20','application/json','processWebhook','ERR','HTTP\x20error!\x20status:\x20','Unknown\x20error\x20from\x20Rapyd\x20API','CLO','logWhiteDomainRequest','PAID','logWhiteDomainResponse','===\x20RAPYD\x20API\x20INCOMPLETE\x20RESPONSE\x20===','apiUrl','36883JTUwZy','failureCode','ACT','now','932064GABQCA','/v1/hosted/payment_links/','===\x20RAPYD\x20SERVICE\x20ERROR\x20===','===\x20RAPYD\x20API\x20REQUEST\x20(White\x20Domain\x20-\x20Updated\x20Format)\x20===','\x20\x20\x20fixed_side:\x20buy','Error\x20details:','Response\x20Body:','payment_method_data','Processing\x20Rapyd\x20webhook:','stringify','error_code','Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20','/v1/hosted/payment_links','PAYMENT_COMPLETED','loggerService','\x20(GB\x20-\x20Britain)','gb_mastercard_card','../loggerService','PAYMENT_FAILED','\x20\x20\x20expiration:\x20','entries','data','üá¨üáß\x20Using\x20GB\x20(Britain)\x20as\x20country\x20for\x20Rapyd\x20payment\x20link','Rapyd\x20API\x20error:\x20','Failed\x20to\x20parse\x20JSON\x20response:','HTTP\x20','Payment\x20System/1.0','ORDER:\x20','EXP','FAILED','EXPIRED','expiration','Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20Unknown\x20error','stack','parse','üá¨üáß\x20Country\x20used:\x20','Unknown\x20error','POST','currency','toISOString','defineProperty','\x20(always\x20GB\x20for\x20Rapyd)','https://tesoft.uk/gateway/rapyd/','Invalid\x20JSON\x20response\x20from\x20Rapyd\x20API:\x20','statusText','Full\x20Error\x20Data:',',\x20body:\x20'];a56_0x1bd4=function(){return _0x18a248;};return a56_0x1bd4();}const loggerService_1=require(a56_0x18928e(0x201));class RapydService{constructor(){const _0x9e8c06=a56_0x18928e;this[_0x9e8c06(0x1eb)]=_0x9e8c06(0x21a),console[_0x9e8c06(0x23d)](_0x9e8c06(0x236));}async['createPaymentLink'](_0x5b3c49){const _0x5887dc=a56_0x18928e,{orderId:_0x2c951b,orderName:_0x4bd5f1,amount:_0x1c1d63,currency:_0x518ed5,usage:_0x5d39c1,maxPayments:_0x5643e3,successUrl:_0x2e4d77,failUrl:_0x1748f1}=_0x5b3c49,_0xcf6dc4=_0x518ed5[_0x5887dc(0x1ce)](),_0xd9e0b7='GB';console[_0x5887dc(0x23d)](_0x5887dc(0x206));const _0x37eede=_0x5887dc(0x241)+_0x2c951b,_0x21d2b7='https://tesoft.uk/gateway/fail.php?id='+_0x2c951b,_0x4d2007={'amount':_0x1c1d63,'currency':_0xcf6dc4,'cancel_checkout_url':_0x21d2b7,'complete_checkout_url':_0x37eede,'complete_payment_url':_0x37eede,'merchant_reference_id':_0x2c951b,'description':_0x5887dc(0x20b)+_0x2c951b,'country':'GB','payment_method_types_include':['gb_visa_card',_0x5887dc(0x200)],'custom_elements':{'display_description':!![]}};if(_0xcf6dc4!==_0x5887dc(0x1c4)){const _0x293a3d=Math[_0x5887dc(0x1d6)](Date[_0x5887dc(0x1ef)]()/0x3e8)+0x1e*0x3c;_0x4d2007['fixed_side']=_0x5887dc(0x1db),_0x4d2007[_0x5887dc(0x229)]=_0x5887dc(0x1c4),_0x4d2007[_0x5887dc(0x20f)]=_0x293a3d,console[_0x5887dc(0x23d)](_0x5887dc(0x227)+_0xcf6dc4+_0x5887dc(0x226)),console[_0x5887dc(0x23d)](_0x5887dc(0x1f4)),console['log'](_0x5887dc(0x1d0)),console[_0x5887dc(0x23d)](_0x5887dc(0x203)+_0x293a3d+'\x20('+new Date(_0x293a3d*0x3e8)[_0x5887dc(0x217)]()+')');}const _0x536df2=Date[_0x5887dc(0x1ef)]();try{console[_0x5887dc(0x23d)](_0x5887dc(0x1f3)),console[_0x5887dc(0x23d)](_0x5887dc(0x233),this['apiUrl']),console[_0x5887dc(0x23d)](_0x5887dc(0x1d3),JSON[_0x5887dc(0x1f9)](_0x4d2007,null,0x2)),console[_0x5887dc(0x23d)](_0x5887dc(0x23e)+_0xd9e0b7+_0x5887dc(0x219)),console['log'](_0x5887dc(0x1c1)),loggerService_1[_0x5887dc(0x1fe)][_0x5887dc(0x1e7)](_0x5887dc(0x221),_0x5887dc(0x1fc),_0x5887dc(0x215),_0x4d2007);const _0x82b716=await fetch(this['apiUrl'],{'method':_0x5887dc(0x215),'headers':{'Content-Type':_0x5887dc(0x1e1),'User-Agent':_0x5887dc(0x20a)},'body':JSON['stringify'](_0x4d2007)}),_0x1dd166=Date[_0x5887dc(0x1ef)]()-_0x536df2;console[_0x5887dc(0x23d)]('===\x20RAPYD\x20API\x20RESPONSE\x20(White\x20Domain)\x20==='),console[_0x5887dc(0x23d)](_0x5887dc(0x238),_0x82b716['status']),console[_0x5887dc(0x23d)]('Status\x20Text:',_0x82b716[_0x5887dc(0x21c)]),console[_0x5887dc(0x23d)](_0x5887dc(0x21f),Object['fromEntries'](_0x82b716['headers'][_0x5887dc(0x204)]())),console[_0x5887dc(0x23d)]('Response\x20Time:',_0x1dd166+'ms');const _0x37c812=await _0x82b716[_0x5887dc(0x228)]();console[_0x5887dc(0x23d)](_0x5887dc(0x230),_0x37c812);if(!_0x82b716['ok']){console[_0x5887dc(0x220)](_0x5887dc(0x225)),console[_0x5887dc(0x220)](_0x5887dc(0x1cb),_0x82b716[_0x5887dc(0x1da)]),console[_0x5887dc(0x220)](_0x5887dc(0x1f6),_0x37c812),loggerService_1[_0x5887dc(0x1fe)][_0x5887dc(0x1e9)](_0x5887dc(0x221),_0x5887dc(0x1fc),_0x82b716[_0x5887dc(0x1da)],_0x37c812,_0x1dd166),loggerService_1[_0x5887dc(0x1fe)][_0x5887dc(0x240)](_0x5887dc(0x221),_0x5887dc(0x1fc),_0x5887dc(0x209)+_0x82b716['status']+':\x20'+_0x37c812);throw new Error('HTTP\x20error!\x20status:\x20'+_0x82b716[_0x5887dc(0x1da)]+_0x5887dc(0x21e)+_0x37c812);}let _0x2e0795;try{_0x2e0795=JSON[_0x5887dc(0x212)](_0x37c812);}catch(_0x1ec9a8){console[_0x5887dc(0x220)](_0x5887dc(0x208),_0x1ec9a8),loggerService_1['loggerService']['logWhiteDomainError']('rapyd',_0x5887dc(0x1fc),_0x5887dc(0x1d2)+_0x1ec9a8);throw new Error(_0x5887dc(0x21b)+_0x37c812);}console[_0x5887dc(0x23d)](_0x5887dc(0x235)),console[_0x5887dc(0x23d)](_0x5887dc(0x231),JSON['stringify'](_0x2e0795,null,0x2)),loggerService_1[_0x5887dc(0x1fe)]['logWhiteDomainResponse'](_0x5887dc(0x221),'/v1/hosted/payment_links',_0x82b716[_0x5887dc(0x1da)],_0x2e0795,_0x1dd166);if(_0x2e0795[_0x5887dc(0x1da)]?.[_0x5887dc(0x1da)]!==_0x5887dc(0x22f)){const _0xcfe2c6=_0x2e0795[_0x5887dc(0x1da)]?.[_0x5887dc(0x1c0)]||_0x5887dc(0x1e5),_0x1de983=_0x2e0795[_0x5887dc(0x1da)]?.[_0x5887dc(0x1fa)]||_0x5887dc(0x1cc);console[_0x5887dc(0x220)](_0x5887dc(0x1c7)),console['error'](_0x5887dc(0x23f),_0x1de983),console[_0x5887dc(0x220)]('Error\x20Message:',_0xcfe2c6),console[_0x5887dc(0x220)](_0x5887dc(0x21d),_0x2e0795[_0x5887dc(0x1da)]),loggerService_1[_0x5887dc(0x1fe)][_0x5887dc(0x240)](_0x5887dc(0x221),_0x5887dc(0x1fc),_0x5887dc(0x1cf)+_0x1de983+_0x5887dc(0x23c)+_0xcfe2c6);throw new Error(_0x5887dc(0x1ca)+_0x1de983+_0x5887dc(0x23c)+_0xcfe2c6);}if(!_0x2e0795[_0x5887dc(0x205)]?.['id']||!_0x2e0795[_0x5887dc(0x205)]?.[_0x5887dc(0x234)]){console[_0x5887dc(0x220)](_0x5887dc(0x1ea)),console[_0x5887dc(0x220)]('Missing\x20id\x20or\x20redirect_url\x20in\x20response'),console[_0x5887dc(0x220)](_0x5887dc(0x1c8),_0x2e0795['data']),loggerService_1[_0x5887dc(0x1fe)][_0x5887dc(0x240)](_0x5887dc(0x221),_0x5887dc(0x1fc),_0x5887dc(0x1c5));throw new Error(_0x5887dc(0x22a));}return console['log'](_0x5887dc(0x239)),console[_0x5887dc(0x23d)]('Payment\x20Link\x20ID:',_0x2e0795[_0x5887dc(0x205)]['id']),console[_0x5887dc(0x23d)](_0x5887dc(0x1d7),_0x2e0795[_0x5887dc(0x205)]['redirect_url']),console[_0x5887dc(0x23d)](_0x5887dc(0x213)+_0xd9e0b7+_0x5887dc(0x1ff)),console['log']('üí≥\x20Payment\x20Methods:\x20gb_visa_card,\x20gb_mastercard_card'),{'gateway_payment_id':_0x2e0795[_0x5887dc(0x205)]['id'],'payment_url':_0x2e0795[_0x5887dc(0x205)][_0x5887dc(0x234)]};}catch(_0x3d1b36){console[_0x5887dc(0x220)](_0x5887dc(0x1f2)),console['error'](_0x5887dc(0x1f5),_0x3d1b36),loggerService_1[_0x5887dc(0x1fe)][_0x5887dc(0x240)]('rapyd','/v1/hosted/payment_links',_0x3d1b36);if(_0x3d1b36 instanceof Error){console[_0x5887dc(0x220)](_0x5887dc(0x22d),_0x3d1b36[_0x5887dc(0x1c0)]),console[_0x5887dc(0x220)]('Error\x20stack:',_0x3d1b36[_0x5887dc(0x211)]);throw new Error(_0x5887dc(0x1fb)+_0x3d1b36[_0x5887dc(0x1c0)]);}throw new Error(_0x5887dc(0x210));}}async['verifyPayment'](_0x1e716a){const _0x35d37a=a56_0x18928e,_0x4bc39a=Date[_0x35d37a(0x1ef)]();try{loggerService_1['loggerService'][_0x35d37a(0x1e7)]('rapyd',_0x35d37a(0x1f1)+_0x1e716a,_0x35d37a(0x1c3),{});const _0x1675b1=await fetch(this['apiUrl']+'/'+_0x1e716a,{'method':'GET','headers':{'Content-Type':_0x35d37a(0x1e1),'User-Agent':_0x35d37a(0x20a)}}),_0x14d034=Date[_0x35d37a(0x1ef)]()-_0x4bc39a;if(!_0x1675b1['ok']){const _0x10ba9e=await _0x1675b1[_0x35d37a(0x228)]();loggerService_1['loggerService'][_0x35d37a(0x1e9)](_0x35d37a(0x221),_0x35d37a(0x1f1)+_0x1e716a,_0x1675b1['status'],_0x10ba9e,_0x14d034);throw new Error(_0x35d37a(0x1e4)+_0x1675b1[_0x35d37a(0x1da)]);}const _0x4c3aef=await _0x1675b1['json']();loggerService_1[_0x35d37a(0x1fe)]['logWhiteDomainResponse'](_0x35d37a(0x221),_0x35d37a(0x1f1)+_0x1e716a,_0x1675b1[_0x35d37a(0x1da)],_0x4c3aef,_0x14d034);if(_0x4c3aef[_0x35d37a(0x1da)]?.[_0x35d37a(0x1da)]!=='SUCCESS'){loggerService_1[_0x35d37a(0x1fe)][_0x35d37a(0x240)](_0x35d37a(0x221),_0x35d37a(0x1f1)+_0x1e716a,_0x35d37a(0x207)+(_0x4c3aef['status']?.[_0x35d37a(0x1c0)]||_0x35d37a(0x214)));throw new Error(_0x35d37a(0x207)+(_0x4c3aef[_0x35d37a(0x1da)]?.['message']||_0x35d37a(0x214)));}let _0x42d61c='PENDING';if(_0x4c3aef[_0x35d37a(0x205)]?.['status'])switch(_0x4c3aef['data']['status'][_0x35d37a(0x1ce)]()){case _0x35d37a(0x1e6):_0x42d61c=_0x35d37a(0x1e8);break;case'CAN':_0x42d61c='FAILED';break;case _0x35d37a(0x20c):_0x42d61c=_0x35d37a(0x20e);break;case _0x35d37a(0x1e3):_0x42d61c=_0x35d37a(0x20d);break;case'NEW':case _0x35d37a(0x1ee):default:_0x42d61c=_0x35d37a(0x1de);break;}return{'status':_0x42d61c,'amount':_0x4c3aef[_0x35d37a(0x205)]?.[_0x35d37a(0x222)],'currency':_0x4c3aef['data']?.[_0x35d37a(0x216)]};}catch(_0x15f030){console[_0x35d37a(0x220)](_0x35d37a(0x22b),_0x15f030),loggerService_1[_0x35d37a(0x1fe)]['logWhiteDomainError'](_0x35d37a(0x221),'/v1/hosted/payment_links/'+_0x1e716a,_0x15f030);throw new Error('Failed\x20to\x20verify\x20Rapyd\x20payment:\x20'+(_0x15f030 instanceof Error?_0x15f030[_0x35d37a(0x1c0)]:_0x35d37a(0x214)));}}async[a56_0x18928e(0x1e2)](_0x299760){const _0x45b4bd=a56_0x18928e;console['log'](_0x45b4bd(0x1f8),_0x299760);let _0x5cb6db=_0x45b4bd(0x1de),_0x567ee3;_0x299760[_0x45b4bd(0x205)]?.[_0x45b4bd(0x23b)]&&(_0x567ee3=_0x299760[_0x45b4bd(0x205)][_0x45b4bd(0x23b)],console[_0x45b4bd(0x23d)](_0x45b4bd(0x1e0)+_0x567ee3));switch(_0x299760[_0x45b4bd(0x1c9)]?.[_0x45b4bd(0x1ce)]()){case _0x45b4bd(0x1fd):_0x299760[_0x45b4bd(0x205)]?.[_0x45b4bd(0x237)]===!![]&&_0x299760[_0x45b4bd(0x205)]?.[_0x45b4bd(0x1da)]===_0x45b4bd(0x1e6)?_0x5cb6db='PAID':_0x5cb6db='PENDING';break;case _0x45b4bd(0x1dd):_0x5cb6db=_0x45b4bd(0x20d);break;case _0x45b4bd(0x224):_0x5cb6db='EXPIRED';break;case _0x45b4bd(0x202):_0x5cb6db='FAILED';!_0x567ee3&&_0x299760['data']?.[_0x45b4bd(0x23b)]&&(_0x567ee3=_0x299760[_0x45b4bd(0x205)][_0x45b4bd(0x23b)]);break;default:switch(_0x299760[_0x45b4bd(0x205)]?.['status']?.[_0x45b4bd(0x1ce)]()){case _0x45b4bd(0x1e6):_0x299760[_0x45b4bd(0x205)]?.[_0x45b4bd(0x237)]===!![]?_0x5cb6db=_0x45b4bd(0x1e8):_0x5cb6db='FAILED';break;case'CAN':_0x5cb6db=_0x45b4bd(0x20d);break;case _0x45b4bd(0x20c):_0x5cb6db=_0x45b4bd(0x20e);break;case _0x45b4bd(0x1e3):_0x5cb6db=_0x45b4bd(0x20d);!_0x567ee3&&_0x299760['data']?.[_0x45b4bd(0x23b)]&&(_0x567ee3=_0x299760[_0x45b4bd(0x205)][_0x45b4bd(0x23b)]);break;case'NEW':case'ACT':default:_0x5cb6db=_0x45b4bd(0x1de);break;}break;}const _0x579417={};return _0x299760[_0x45b4bd(0x205)]?.[_0x45b4bd(0x1f7)]?.[_0x45b4bd(0x22e)]&&(_0x579417[_0x45b4bd(0x1d5)]=_0x299760[_0x45b4bd(0x205)]['payment_method_data'][_0x45b4bd(0x22e)]),_0x299760['data']?.[_0x45b4bd(0x1d4)]&&(_0x579417['paymentMethod']=_0x299760['data'][_0x45b4bd(0x1d4)]),_0x299760[_0x45b4bd(0x205)]?.[_0x45b4bd(0x1fa)]&&(_0x579417['errorCode']=_0x299760[_0x45b4bd(0x205)][_0x45b4bd(0x1fa)]),_0x299760[_0x45b4bd(0x205)]?.[_0x45b4bd(0x232)]&&(_0x579417[_0x45b4bd(0x1ed)]=_0x299760[_0x45b4bd(0x205)][_0x45b4bd(0x232)]),console[_0x45b4bd(0x23d)](_0x45b4bd(0x1d9)+_0x5cb6db+_0x45b4bd(0x1d1)+(_0x567ee3||_0x45b4bd(0x1cd))),{'paymentId':_0x299760[_0x45b4bd(0x205)]?.[_0x45b4bd(0x22c)]||'','status':_0x5cb6db,'amount':_0x299760[_0x45b4bd(0x205)]?.[_0x45b4bd(0x222)],'currency':_0x299760[_0x45b4bd(0x205)]?.['currency'],'failureMessage':_0x567ee3,'additionalInfo':_0x579417};}}function a56_0x40a8(_0xde9638,_0x2f57b2){const _0x1bd430=a56_0x1bd4();return a56_0x40a8=function(_0x40a8d1,_0x4c8e0e){_0x40a8d1=_0x40a8d1-0x1c0;let _0x25eee4=_0x1bd430[_0x40a8d1];return _0x25eee4;},a56_0x40a8(_0xde9638,_0x2f57b2);}exports[a56_0x18928e(0x1dc)]=RapydService;