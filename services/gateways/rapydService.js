'use strict';function a42_0x5c82(_0x460c8a,_0x2634d5){const _0x3ceda3=a42_0x3ced();return a42_0x5c82=function(_0x5c828d,_0x3a93a7){_0x5c828d=_0x5c828d-0xea;let _0x2e5532=_0x3ceda3[_0x5c828d];return _0x2e5532;},a42_0x5c82(_0x460c8a,_0x2634d5);}const a42_0x221a89=a42_0x5c82;(function(_0x556dfe,_0x4ddec6){const _0xa530c8=a42_0x5c82,_0x19cc37=_0x556dfe();while(!![]){try{const _0x1385b5=-parseInt(_0xa530c8(0x12c))/0x1+parseInt(_0xa530c8(0x138))/0x2*(-parseInt(_0xa530c8(0x11e))/0x3)+parseInt(_0xa530c8(0xed))/0x4+parseInt(_0xa530c8(0xf0))/0x5+parseInt(_0xa530c8(0x126))/0x6*(parseInt(_0xa530c8(0x119))/0x7)+parseInt(_0xa530c8(0x144))/0x8+-parseInt(_0xa530c8(0x141))/0x9;if(_0x1385b5===_0x4ddec6)break;else _0x19cc37['push'](_0x19cc37['shift']());}catch(_0x1bc52e){_0x19cc37['push'](_0x19cc37['shift']());}}}(a42_0x3ced,0x68e39));Object['defineProperty'](exports,a42_0x221a89(0x117),{'value':!![]}),exports[a42_0x221a89(0x102)]=void 0x0;const loggerService_1=require(a42_0x221a89(0xf8));class RapydService{constructor(){const _0x26be97=a42_0x221a89;this['apiUrl']=_0x26be97(0x143),console['log'](_0x26be97(0x106));}async['createPaymentLink'](_0x41b02e){const _0x5c1898=a42_0x221a89,{orderId:_0x3458dd,orderName:_0x115611,amount:_0x5028e8,currency:_0x59c892,usage:_0x3c454b,maxPayments:_0x172ed7,successUrl:_0x1670d2,failUrl:_0x68a5b5}=_0x41b02e,_0x5eac30=_0x59c892['toUpperCase'](),_0x1b98ce='GB';console[_0x5c1898(0x120)](_0x5c1898(0x105));const _0x1441e2=_0x5c1898(0x14c)+_0x3458dd,_0x5e0317=_0x5c1898(0x114)+_0x3458dd,_0x4b4aed={'amount':_0x5028e8,'cancel_checkout_url':_0x5e0317,'complete_checkout_url':_0x1441e2,'complete_payment_url':_0x1441e2,'merchant_reference_id':_0x3458dd,'description':_0x5c1898(0x124)+_0x3458dd,'payment_method_types_include':[_0x5c1898(0xec),_0x5c1898(0x10c)],'custom_elements':{'display_description':!![]}},_0x5a3c42=Date[_0x5c1898(0x11b)]();try{console[_0x5c1898(0x120)](_0x5c1898(0xfa)),console['log'](_0x5c1898(0x107),this[_0x5c1898(0xfe)]),console[_0x5c1898(0x120)]('Request\x20Body\x20(Updated\x20Format):',JSON[_0x5c1898(0x12f)](_0x4b4aed,null,0x2)),console[_0x5c1898(0x120)](_0x5c1898(0x12b)+_0x1b98ce+_0x5c1898(0x13f)),console[_0x5c1898(0x120)](_0x5c1898(0x10e)),loggerService_1[_0x5c1898(0xef)][_0x5c1898(0x134)](_0x5c1898(0x13d),_0x5c1898(0x14f),'POST',_0x4b4aed);const _0x34b787=await fetch(this['apiUrl'],{'method':'POST','headers':{'Content-Type':'application/json','User-Agent':_0x5c1898(0x10f)},'body':JSON[_0x5c1898(0x12f)](_0x4b4aed)}),_0x330f71=Date['now']()-_0x5a3c42;console['log']('===\x20RAPYD\x20API\x20RESPONSE\x20(White\x20Domain)\x20==='),console[_0x5c1898(0x120)]('Status:',_0x34b787[_0x5c1898(0x123)]),console[_0x5c1898(0x120)](_0x5c1898(0x128),_0x34b787[_0x5c1898(0x129)]),console[_0x5c1898(0x120)](_0x5c1898(0x147),Object[_0x5c1898(0x121)](_0x34b787[_0x5c1898(0x130)][_0x5c1898(0x13a)]())),console[_0x5c1898(0x120)]('Response\x20Time:',_0x330f71+'ms');const _0x8e46ed=await _0x34b787[_0x5c1898(0x111)]();console[_0x5c1898(0x120)]('Raw\x20Response\x20Body:',_0x8e46ed);if(!_0x34b787['ok']){console[_0x5c1898(0xff)]('===\x20RAPYD\x20API\x20ERROR\x20==='),console[_0x5c1898(0xff)](_0x5c1898(0x11a),_0x34b787['status']),console['error'](_0x5c1898(0x110),_0x8e46ed),loggerService_1[_0x5c1898(0xef)][_0x5c1898(0xfd)](_0x5c1898(0x13d),_0x5c1898(0x14f),_0x34b787[_0x5c1898(0x123)],_0x8e46ed,_0x330f71),loggerService_1[_0x5c1898(0xef)][_0x5c1898(0x11c)]('rapyd',_0x5c1898(0x14f),_0x5c1898(0x14d)+_0x34b787['status']+':\x20'+_0x8e46ed);throw new Error('HTTP\x20error!\x20status:\x20'+_0x34b787[_0x5c1898(0x123)]+',\x20body:\x20'+_0x8e46ed);}let _0x14cbf4;try{_0x14cbf4=JSON[_0x5c1898(0x112)](_0x8e46ed);}catch(_0x5bf53d){console[_0x5c1898(0xff)](_0x5c1898(0x12d),_0x5bf53d),loggerService_1[_0x5c1898(0xef)][_0x5c1898(0x11c)](_0x5c1898(0x13d),_0x5c1898(0x14f),_0x5c1898(0x10d)+_0x5bf53d);throw new Error(_0x5c1898(0x10a)+_0x8e46ed);}console[_0x5c1898(0x120)](_0x5c1898(0x127)),console['log'](_0x5c1898(0xf5),JSON[_0x5c1898(0x12f)](_0x14cbf4,null,0x2)),loggerService_1[_0x5c1898(0xef)][_0x5c1898(0xfd)]('rapyd',_0x5c1898(0x14f),_0x34b787['status'],_0x14cbf4,_0x330f71);if(_0x14cbf4['status']?.[_0x5c1898(0x123)]!==_0x5c1898(0xf2)){const _0x32a7e=_0x14cbf4[_0x5c1898(0x123)]?.[_0x5c1898(0x131)]||'Unknown\x20error\x20from\x20Rapyd\x20API',_0x406cec=_0x14cbf4[_0x5c1898(0x123)]?.['error_code']||_0x5c1898(0xfc);console[_0x5c1898(0xff)](_0x5c1898(0x132)),console['error']('Error\x20Code:',_0x406cec),console['error'](_0x5c1898(0xf1),_0x32a7e),console[_0x5c1898(0xff)](_0x5c1898(0x150),_0x14cbf4[_0x5c1898(0x123)]),loggerService_1[_0x5c1898(0xef)][_0x5c1898(0x11c)](_0x5c1898(0x13d),'/v1/hosted/payment_links',_0x5c1898(0x125)+_0x406cec+_0x5c1898(0x151)+_0x32a7e);throw new Error(_0x5c1898(0xeb)+_0x406cec+_0x5c1898(0x151)+_0x32a7e);}if(!_0x14cbf4[_0x5c1898(0x14e)]?.['id']||!_0x14cbf4[_0x5c1898(0x14e)]?.[_0x5c1898(0x122)]){console['error']('===\x20RAPYD\x20API\x20INCOMPLETE\x20RESPONSE\x20==='),console[_0x5c1898(0xff)](_0x5c1898(0xf7)),console[_0x5c1898(0xff)](_0x5c1898(0x142),_0x14cbf4[_0x5c1898(0x14e)]),loggerService_1[_0x5c1898(0xef)][_0x5c1898(0x11c)]('rapyd','/v1/hosted/payment_links','Incomplete\x20response:\x20missing\x20id\x20or\x20redirect_url');throw new Error('Invalid\x20response\x20from\x20Rapyd\x20API:\x20missing\x20id\x20or\x20redirect_url');}return console[_0x5c1898(0x120)](_0x5c1898(0x116)),console[_0x5c1898(0x120)](_0x5c1898(0x103),_0x14cbf4[_0x5c1898(0x14e)]['id']),console['log'](_0x5c1898(0x13e),_0x14cbf4[_0x5c1898(0x14e)][_0x5c1898(0x122)]),console['log']('üá¨üáß\x20Country\x20used:\x20'+_0x1b98ce+_0x5c1898(0xf4)),console[_0x5c1898(0x120)](_0x5c1898(0x10e)),{'gateway_payment_id':_0x14cbf4[_0x5c1898(0x14e)]['id'],'payment_url':_0x14cbf4[_0x5c1898(0x14e)][_0x5c1898(0x122)]};}catch(_0x22c97d){console[_0x5c1898(0xff)](_0x5c1898(0x11d)),console[_0x5c1898(0xff)](_0x5c1898(0x139),_0x22c97d),loggerService_1[_0x5c1898(0xef)][_0x5c1898(0x11c)](_0x5c1898(0x13d),_0x5c1898(0x14f),_0x22c97d);if(_0x22c97d instanceof Error){console['error'](_0x5c1898(0x137),_0x22c97d[_0x5c1898(0x131)]),console['error'](_0x5c1898(0xf3),_0x22c97d[_0x5c1898(0xf6)]);throw new Error('Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20'+_0x22c97d[_0x5c1898(0x131)]);}throw new Error('Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20Unknown\x20error');}}async[a42_0x221a89(0xee)](_0x3b4f6f){const _0x147629=a42_0x221a89,_0x49dc01=Date['now']();try{loggerService_1[_0x147629(0xef)]['logWhiteDomainRequest'](_0x147629(0x13d),_0x147629(0x118)+_0x3b4f6f,_0x147629(0x12a),{});const _0x28741e=await fetch(this['apiUrl']+'/'+_0x3b4f6f,{'method':_0x147629(0x12a),'headers':{'Content-Type':_0x147629(0x13b),'User-Agent':'TesSoft\x20Payment\x20System/1.0'}}),_0xc59680=Date[_0x147629(0x11b)]()-_0x49dc01;if(!_0x28741e['ok']){const _0x3f9e5e=await _0x28741e[_0x147629(0x111)]();loggerService_1[_0x147629(0xef)][_0x147629(0xfd)](_0x147629(0x13d),_0x147629(0x118)+_0x3b4f6f,_0x28741e[_0x147629(0x123)],_0x3f9e5e,_0xc59680);throw new Error(_0x147629(0x148)+_0x28741e[_0x147629(0x123)]);}const _0x155a51=await _0x28741e[_0x147629(0x115)]();loggerService_1[_0x147629(0xef)][_0x147629(0xfd)](_0x147629(0x13d),_0x147629(0x118)+_0x3b4f6f,_0x28741e[_0x147629(0x123)],_0x155a51,_0xc59680);if(_0x155a51[_0x147629(0x123)]?.[_0x147629(0x123)]!==_0x147629(0xf2)){loggerService_1['loggerService'][_0x147629(0x11c)]('rapyd',_0x147629(0x118)+_0x3b4f6f,_0x147629(0x100)+(_0x155a51[_0x147629(0x123)]?.[_0x147629(0x131)]||_0x147629(0x146)));throw new Error(_0x147629(0x100)+(_0x155a51[_0x147629(0x123)]?.[_0x147629(0x131)]||_0x147629(0x146)));}let _0x391d14=_0x147629(0x140);if(_0x155a51[_0x147629(0x14e)]?.[_0x147629(0x123)])switch(_0x155a51[_0x147629(0x14e)][_0x147629(0x123)]['toUpperCase']()){case _0x147629(0xea):_0x391d14='PAID';break;case _0x147629(0x10b):_0x391d14=_0x147629(0x108);break;case _0x147629(0x152):_0x391d14=_0x147629(0x14a);break;case'ERR':_0x391d14=_0x147629(0x108);break;case _0x147629(0x11f):case _0x147629(0x149):default:_0x391d14=_0x147629(0x140);break;}return{'status':_0x391d14,'amount':_0x155a51[_0x147629(0x14e)]?.[_0x147629(0x136)],'currency':_0x155a51[_0x147629(0x14e)]?.[_0x147629(0x101)]};}catch(_0x2f43d2){console[_0x147629(0xff)](_0x147629(0x13c),_0x2f43d2),loggerService_1[_0x147629(0xef)][_0x147629(0x11c)](_0x147629(0x13d),_0x147629(0x118)+_0x3b4f6f,_0x2f43d2);throw new Error('Failed\x20to\x20verify\x20Rapyd\x20payment:\x20'+(_0x2f43d2 instanceof Error?_0x2f43d2[_0x147629(0x131)]:_0x147629(0x146)));}}async[a42_0x221a89(0x104)](_0x3cd16b){const _0x7e1922=a42_0x221a89;console[_0x7e1922(0x120)](_0x7e1922(0x109),_0x3cd16b);let _0x9fcbfd=_0x7e1922(0x140);switch(_0x3cd16b['type']?.[_0x7e1922(0x133)]()){case _0x7e1922(0x14b):_0x3cd16b[_0x7e1922(0x14e)]?.[_0x7e1922(0xf9)]===!![]&&_0x3cd16b[_0x7e1922(0x14e)]?.[_0x7e1922(0x123)]===_0x7e1922(0xea)?_0x9fcbfd='PAID':_0x9fcbfd=_0x7e1922(0x140);break;case _0x7e1922(0x12e):_0x9fcbfd=_0x7e1922(0x108);break;case _0x7e1922(0x113):_0x9fcbfd=_0x7e1922(0x14a);break;case _0x7e1922(0x135):_0x9fcbfd=_0x7e1922(0x108);break;default:switch(_0x3cd16b[_0x7e1922(0x14e)]?.['status']?.[_0x7e1922(0x133)]()){case _0x7e1922(0xea):_0x3cd16b[_0x7e1922(0x14e)]?.[_0x7e1922(0xf9)]===!![]?_0x9fcbfd='PAID':_0x9fcbfd='FAILED';break;case'CAN':_0x9fcbfd=_0x7e1922(0x108);break;case _0x7e1922(0x152):_0x9fcbfd=_0x7e1922(0x14a);break;case _0x7e1922(0x145):_0x9fcbfd=_0x7e1922(0x108);break;case _0x7e1922(0x11f):case _0x7e1922(0x149):default:_0x9fcbfd=_0x7e1922(0x140);break;}break;}return{'paymentId':_0x3cd16b[_0x7e1922(0x14e)]?.[_0x7e1922(0xfb)]||'','status':_0x9fcbfd,'amount':_0x3cd16b[_0x7e1922(0x14e)]?.[_0x7e1922(0x136)],'currency':_0x3cd16b['data']?.['currency']};}}exports[a42_0x221a89(0x102)]=RapydService;function a42_0x3ced(){const _0x13c919=['NEW','log','fromEntries','redirect_url','status','ORDER:\x20','Business\x20Error\x20(','66bLcyKY','===\x20PARSED\x20RAPYD\x20RESPONSE\x20===','Status\x20Text:','statusText','GET','üá¨üáß\x20Country:\x20','85072pZOcDG','Failed\x20to\x20parse\x20JSON\x20response:','PAYMENT_CANCELED','stringify','headers','message','===\x20RAPYD\x20API\x20BUSINESS\x20ERROR\x20===','toUpperCase','logWhiteDomainRequest','PAYMENT_FAILED','amount','Error\x20message:','4wlZqsE','Error\x20details:','entries','application/json','Rapyd\x20payment\x20verification\x20error:','rapyd','Redirect\x20URL:','\x20(always\x20GB\x20for\x20Rapyd)','PENDING','11998503CVbwjd','Response\x20data:','https://tesoft.uk/gateway/rapyd/','4456888gZXesU','ERR','Unknown\x20error','Headers:','HTTP\x20error!\x20status:\x20','ACT','EXPIRED','PAYMENT_COMPLETED','https://tesoft.uk/gateway/success.php?id=','HTTP\x20','data','/v1/hosted/payment_links','Full\x20Error\x20Data:','):\x20','EXP','CLO','Rapyd\x20API\x20error\x20(','gb_visa_card','3201036xMwNxs','verifyPayment','loggerService','1867110fWrzMo','Error\x20Message:','SUCCESS','Error\x20stack:','\x20(GB\x20-\x20Britain)','Parsed\x20Result:','stack','Missing\x20id\x20or\x20redirect_url\x20in\x20response','../loggerService','paid','===\x20RAPYD\x20API\x20REQUEST\x20(White\x20Domain\x20-\x20Updated\x20Format)\x20===','merchant_reference_id','UNKNOWN','logWhiteDomainResponse','apiUrl','error','Rapyd\x20API\x20error:\x20','currency','RapydService','Payment\x20Link\x20ID:','processWebhook','üá¨üáß\x20Using\x20GB\x20(Britain)\x20as\x20country\x20for\x20Rapyd\x20payment\x20link','üåê\x20Rapyd\x20service\x20initialized\x20with\x20white\x20domain\x20proxy','URL:','FAILED','Processing\x20Rapyd\x20webhook:','Invalid\x20JSON\x20response\x20from\x20Rapyd\x20API:\x20','CAN','gb_mastercard_card','JSON\x20Parse\x20Error:\x20','üí≥\x20Payment\x20Methods:\x20gb_visa_card,\x20gb_mastercard_card','TesSoft\x20Payment\x20System/1.0','Response\x20Body:','text','parse','PAYMENT_EXPIRED','https://tesoft.uk/gateway/fail.php?id=','json','===\x20RAPYD\x20SUCCESS\x20===','__esModule','/v1/hosted/payment_links/','328566whxkpC','HTTP\x20Status:','now','logWhiteDomainError','===\x20RAPYD\x20SERVICE\x20ERROR\x20===','598869grsSot'];a42_0x3ced=function(){return _0x13c919;};return a42_0x3ced();}