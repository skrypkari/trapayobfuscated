'use strict';function a42_0x5b8f(_0x216bb4,_0x43dc5d){const _0x341705=a42_0x3417();return a42_0x5b8f=function(_0x5b8fa2,_0x59ef4c){_0x5b8fa2=_0x5b8fa2-0x1cd;let _0x47c917=_0x341705[_0x5b8fa2];return _0x47c917;},a42_0x5b8f(_0x216bb4,_0x43dc5d);}function a42_0x3417(){const _0x3be3a8=['log','1518cUzmNa','apiUrl','===\x20RAPYD\x20API\x20ERROR\x20===','NEW','Missing\x20id\x20or\x20redirect_url\x20in\x20response','CAN','PENDING','__esModule','PAYMENT_CANCELED','error','PAYMENT_COMPLETED','statusText','Unknown\x20error','error_code','../loggerService','===\x20RAPYD\x20API\x20BUSINESS\x20ERROR\x20===','Status:','===\x20RAPYD\x20API\x20RESPONSE\x20(White\x20Domain)\x20===','üîÑ\x20Rapyd\x20webhook\x20processed:\x20status=','Error\x20message:','üá¨üáß\x20Country:\x20','failureCode','https://tesoft.uk/gateway/rapyd/','CLO','data','EXP','paid','PAYMENT_EXPIRED','Full\x20Error\x20Data:','currency','EXPIRED','Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20Unknown\x20error','HTTP\x20','entries','Incomplete\x20response:\x20missing\x20id\x20or\x20redirect_url','stringify','üí•\x20Rapyd\x20failure\x20message:\x20','/v1/hosted/payment_links','üá¨üáß\x20Country\x20used:\x20','RapydService','Processing\x20Rapyd\x20webhook:','Business\x20Error\x20(','Error\x20Message:','POST','Rapyd\x20payment\x20verification\x20error:','logWhiteDomainRequest','PAYMENT_FAILED','Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20','last4','/v1/hosted/payment_links/','Headers:','logWhiteDomainError','HTTP\x20error!\x20status:\x20','logWhiteDomainResponse','Failed\x20to\x20parse\x20JSON\x20response:','17032fjHfBl','FAILED','1480CutOHD','parse','failure_code','amount','none',',\x20failureMessage=','rapyd','loggerService','URL:','Error\x20stack:','UNKNOWN','GET','type','üá¨üáß\x20Using\x20GB\x20(Britain)\x20as\x20country\x20for\x20Rapyd\x20payment\x20link','failure_message','ACT','Invalid\x20response\x20from\x20Rapyd\x20API:\x20missing\x20id\x20or\x20redirect_url','redirect_url','Response\x20Body:','Rapyd\x20API\x20error:\x20','merchant_reference_id','Status\x20Text:','gb_mastercard_card','toUpperCase','üí≥\x20Payment\x20Methods:\x20gb_visa_card,\x20gb_mastercard_card','cardLast4','now','createPaymentLink','processWebhook','defineProperty','12820CsFxEG','fromEntries','67sQbYaT','headers','Failed\x20to\x20verify\x20Rapyd\x20payment:\x20','üåê\x20Rapyd\x20service\x20initialized\x20with\x20white\x20domain\x20proxy','JSON\x20Parse\x20Error:\x20','28642TVTAaF','):\x20','===\x20RAPYD\x20SERVICE\x20ERROR\x20===','PAID','22939NqyHIq','payment_method_type','verifyPayment','===\x20RAPYD\x20API\x20REQUEST\x20(White\x20Domain\x20-\x20Updated\x20Format)\x20===','SUCCESS','Request\x20Body\x20(Updated\x20Format):','json','===\x20PARSED\x20RAPYD\x20RESPONSE\x20===','===\x20RAPYD\x20SUCCESS\x20===','Error\x20details:','Rapyd\x20API\x20error\x20(','application/json','ERR','11193750IfdMZb','payment_method_data','3362919iUTuit','errorCode','message','Invalid\x20JSON\x20response\x20from\x20Rapyd\x20API:\x20','status','gb_visa_card','144KKHsro','15968007HZXlUY','text','https://tesoft.uk/gateway/success.php?id=','Response\x20Time:','https://tesoft.uk/gateway/fail.php?id='];a42_0x3417=function(){return _0x3be3a8;};return a42_0x3417();}const a42_0x5fc94c=a42_0x5b8f;(function(_0xaeabf0,_0x1595cf){const _0x25fb48=a42_0x5b8f,_0x12d63f=_0xaeabf0();while(!![]){try{const _0x43e4a4=-parseInt(_0x25fb48(0x20e))/0x1*(-parseInt(_0x25fb48(0x213))/0x2)+parseInt(_0x25fb48(0x226))/0x3+-parseInt(_0x25fb48(0x1ee))/0x4*(parseInt(_0x25fb48(0x20c))/0x5)+-parseInt(_0x25fb48(0x233))/0x6*(parseInt(_0x25fb48(0x217))/0x7)+-parseInt(_0x25fb48(0x1ec))/0x8*(-parseInt(_0x25fb48(0x22c))/0x9)+-parseInt(_0x25fb48(0x224))/0xa+parseInt(_0x25fb48(0x22d))/0xb;if(_0x43e4a4===_0x1595cf)break;else _0x12d63f['push'](_0x12d63f['shift']());}catch(_0x2d0925){_0x12d63f['push'](_0x12d63f['shift']());}}}(a42_0x3417,0xa3575));Object[a42_0x5fc94c(0x20b)](exports,a42_0x5fc94c(0x23a),{'value':!![]}),exports['RapydService']=void 0x0;const loggerService_1=require(a42_0x5fc94c(0x241));class RapydService{constructor(){const _0x1a8617=a42_0x5fc94c;this[_0x1a8617(0x234)]=_0x1a8617(0x249),console[_0x1a8617(0x232)](_0x1a8617(0x211));}async[a42_0x5fc94c(0x209)](_0x451d09){const _0x562b19=a42_0x5fc94c,{orderId:_0x5803ad,orderName:_0x40d03b,amount:_0x3d3ea3,currency:_0x66a10e,usage:_0x4f53cc,maxPayments:_0x4d7b86,successUrl:_0x54aee5,failUrl:_0x2a3979}=_0x451d09,_0x13dde9=_0x66a10e[_0x562b19(0x205)](),_0x5e4869='GB';console[_0x562b19(0x232)](_0x562b19(0x1fb));const _0x418c0b=_0x562b19(0x22f)+_0x5803ad,_0x3c36a2=_0x562b19(0x231)+_0x5803ad,_0x292653={'amount':_0x3d3ea3,'currency':_0x13dde9,'cancel_checkout_url':_0x3c36a2,'complete_checkout_url':_0x418c0b,'complete_payment_url':_0x418c0b,'merchant_reference_id':_0x5803ad,'description':'ORDER:\x20'+_0x5803ad,'country':'GB','payment_method_types_include':[_0x562b19(0x22b),_0x562b19(0x204)],'custom_elements':{'display_description':!![]}},_0x4a26a3=Date[_0x562b19(0x208)]();try{console[_0x562b19(0x232)](_0x562b19(0x21a)),console[_0x562b19(0x232)](_0x562b19(0x1f6),this[_0x562b19(0x234)]),console[_0x562b19(0x232)](_0x562b19(0x21c),JSON[_0x562b19(0x1d8)](_0x292653,null,0x2)),console[_0x562b19(0x232)](_0x562b19(0x247)+_0x5e4869+'\x20(always\x20GB\x20for\x20Rapyd)'),console['log'](_0x562b19(0x206)),loggerService_1['loggerService'][_0x562b19(0x1e2)](_0x562b19(0x1f4),_0x562b19(0x1da),_0x562b19(0x1e0),_0x292653);const _0x7e17cc=await fetch(this[_0x562b19(0x234)],{'method':_0x562b19(0x1e0),'headers':{'Content-Type':_0x562b19(0x222),'User-Agent':'TesSoft\x20Payment\x20System/1.0'},'body':JSON[_0x562b19(0x1d8)](_0x292653)}),_0x577e56=Date[_0x562b19(0x208)]()-_0x4a26a3;console[_0x562b19(0x232)](_0x562b19(0x244)),console[_0x562b19(0x232)](_0x562b19(0x243),_0x7e17cc[_0x562b19(0x22a)]),console[_0x562b19(0x232)](_0x562b19(0x203),_0x7e17cc[_0x562b19(0x23e)]),console[_0x562b19(0x232)](_0x562b19(0x1e7),Object[_0x562b19(0x20d)](_0x7e17cc[_0x562b19(0x20f)][_0x562b19(0x1d6)]())),console[_0x562b19(0x232)](_0x562b19(0x230),_0x577e56+'ms');const _0x52df58=await _0x7e17cc['text']();console[_0x562b19(0x232)]('Raw\x20Response\x20Body:',_0x52df58);if(!_0x7e17cc['ok']){console[_0x562b19(0x23c)](_0x562b19(0x235)),console[_0x562b19(0x23c)]('HTTP\x20Status:',_0x7e17cc[_0x562b19(0x22a)]),console[_0x562b19(0x23c)](_0x562b19(0x200),_0x52df58),loggerService_1[_0x562b19(0x1f5)][_0x562b19(0x1ea)]('rapyd',_0x562b19(0x1da),_0x7e17cc[_0x562b19(0x22a)],_0x52df58,_0x577e56),loggerService_1[_0x562b19(0x1f5)]['logWhiteDomainError'](_0x562b19(0x1f4),_0x562b19(0x1da),_0x562b19(0x1d5)+_0x7e17cc['status']+':\x20'+_0x52df58);throw new Error(_0x562b19(0x1e9)+_0x7e17cc['status']+',\x20body:\x20'+_0x52df58);}let _0x197c5f;try{_0x197c5f=JSON[_0x562b19(0x1ef)](_0x52df58);}catch(_0x44f474){console[_0x562b19(0x23c)](_0x562b19(0x1eb),_0x44f474),loggerService_1[_0x562b19(0x1f5)][_0x562b19(0x1e8)](_0x562b19(0x1f4),_0x562b19(0x1da),_0x562b19(0x212)+_0x44f474);throw new Error(_0x562b19(0x229)+_0x52df58);}console['log'](_0x562b19(0x21e)),console[_0x562b19(0x232)]('Parsed\x20Result:',JSON[_0x562b19(0x1d8)](_0x197c5f,null,0x2)),loggerService_1[_0x562b19(0x1f5)][_0x562b19(0x1ea)]('rapyd','/v1/hosted/payment_links',_0x7e17cc[_0x562b19(0x22a)],_0x197c5f,_0x577e56);if(_0x197c5f[_0x562b19(0x22a)]?.[_0x562b19(0x22a)]!==_0x562b19(0x21b)){const _0x3e9a41=_0x197c5f['status']?.[_0x562b19(0x228)]||'Unknown\x20error\x20from\x20Rapyd\x20API',_0x17b5c2=_0x197c5f[_0x562b19(0x22a)]?.['error_code']||_0x562b19(0x1f8);console[_0x562b19(0x23c)](_0x562b19(0x242)),console[_0x562b19(0x23c)]('Error\x20Code:',_0x17b5c2),console[_0x562b19(0x23c)](_0x562b19(0x1df),_0x3e9a41),console[_0x562b19(0x23c)](_0x562b19(0x1d1),_0x197c5f[_0x562b19(0x22a)]),loggerService_1[_0x562b19(0x1f5)][_0x562b19(0x1e8)](_0x562b19(0x1f4),_0x562b19(0x1da),_0x562b19(0x1de)+_0x17b5c2+_0x562b19(0x214)+_0x3e9a41);throw new Error(_0x562b19(0x221)+_0x17b5c2+_0x562b19(0x214)+_0x3e9a41);}if(!_0x197c5f[_0x562b19(0x1cd)]?.['id']||!_0x197c5f[_0x562b19(0x1cd)]?.['redirect_url']){console[_0x562b19(0x23c)]('===\x20RAPYD\x20API\x20INCOMPLETE\x20RESPONSE\x20==='),console[_0x562b19(0x23c)](_0x562b19(0x237)),console[_0x562b19(0x23c)]('Response\x20data:',_0x197c5f[_0x562b19(0x1cd)]),loggerService_1['loggerService'][_0x562b19(0x1e8)](_0x562b19(0x1f4),_0x562b19(0x1da),_0x562b19(0x1d7));throw new Error(_0x562b19(0x1fe));}return console[_0x562b19(0x232)](_0x562b19(0x21f)),console[_0x562b19(0x232)]('Payment\x20Link\x20ID:',_0x197c5f[_0x562b19(0x1cd)]['id']),console[_0x562b19(0x232)]('Redirect\x20URL:',_0x197c5f['data'][_0x562b19(0x1ff)]),console[_0x562b19(0x232)](_0x562b19(0x1db)+_0x5e4869+'\x20(GB\x20-\x20Britain)'),console[_0x562b19(0x232)](_0x562b19(0x206)),{'gateway_payment_id':_0x197c5f[_0x562b19(0x1cd)]['id'],'payment_url':_0x197c5f['data']['redirect_url']};}catch(_0x14cc6c){console[_0x562b19(0x23c)](_0x562b19(0x215)),console[_0x562b19(0x23c)](_0x562b19(0x220),_0x14cc6c),loggerService_1[_0x562b19(0x1f5)][_0x562b19(0x1e8)](_0x562b19(0x1f4),'/v1/hosted/payment_links',_0x14cc6c);if(_0x14cc6c instanceof Error){console[_0x562b19(0x23c)](_0x562b19(0x246),_0x14cc6c[_0x562b19(0x228)]),console['error'](_0x562b19(0x1f7),_0x14cc6c['stack']);throw new Error(_0x562b19(0x1e4)+_0x14cc6c[_0x562b19(0x228)]);}throw new Error(_0x562b19(0x1d4));}}async[a42_0x5fc94c(0x219)](_0x96cbbb){const _0x55ff42=a42_0x5fc94c,_0xbe6335=Date['now']();try{loggerService_1[_0x55ff42(0x1f5)][_0x55ff42(0x1e2)]('rapyd',_0x55ff42(0x1e6)+_0x96cbbb,_0x55ff42(0x1f9),{});const _0x167739=await fetch(this[_0x55ff42(0x234)]+'/'+_0x96cbbb,{'method':_0x55ff42(0x1f9),'headers':{'Content-Type':_0x55ff42(0x222),'User-Agent':'TesSoft\x20Payment\x20System/1.0'}}),_0x464f95=Date['now']()-_0xbe6335;if(!_0x167739['ok']){const _0x18e0d6=await _0x167739[_0x55ff42(0x22e)]();loggerService_1['loggerService'][_0x55ff42(0x1ea)]('rapyd',_0x55ff42(0x1e6)+_0x96cbbb,_0x167739[_0x55ff42(0x22a)],_0x18e0d6,_0x464f95);throw new Error(_0x55ff42(0x1e9)+_0x167739[_0x55ff42(0x22a)]);}const _0x1a03cc=await _0x167739[_0x55ff42(0x21d)]();loggerService_1[_0x55ff42(0x1f5)]['logWhiteDomainResponse']('rapyd','/v1/hosted/payment_links/'+_0x96cbbb,_0x167739[_0x55ff42(0x22a)],_0x1a03cc,_0x464f95);if(_0x1a03cc[_0x55ff42(0x22a)]?.['status']!==_0x55ff42(0x21b)){loggerService_1[_0x55ff42(0x1f5)]['logWhiteDomainError']('rapyd','/v1/hosted/payment_links/'+_0x96cbbb,_0x55ff42(0x201)+(_0x1a03cc['status']?.[_0x55ff42(0x228)]||_0x55ff42(0x23f)));throw new Error(_0x55ff42(0x201)+(_0x1a03cc[_0x55ff42(0x22a)]?.[_0x55ff42(0x228)]||_0x55ff42(0x23f)));}let _0x587793='PENDING';if(_0x1a03cc[_0x55ff42(0x1cd)]?.[_0x55ff42(0x22a)])switch(_0x1a03cc[_0x55ff42(0x1cd)]['status'][_0x55ff42(0x205)]()){case _0x55ff42(0x24a):_0x587793=_0x55ff42(0x216);break;case _0x55ff42(0x238):_0x587793=_0x55ff42(0x1ed);break;case _0x55ff42(0x1ce):_0x587793=_0x55ff42(0x1d3);break;case _0x55ff42(0x223):_0x587793='FAILED';break;case'NEW':case'ACT':default:_0x587793='PENDING';break;}return{'status':_0x587793,'amount':_0x1a03cc[_0x55ff42(0x1cd)]?.[_0x55ff42(0x1f1)],'currency':_0x1a03cc[_0x55ff42(0x1cd)]?.[_0x55ff42(0x1d2)]};}catch(_0x13d4d8){console['error'](_0x55ff42(0x1e1),_0x13d4d8),loggerService_1[_0x55ff42(0x1f5)][_0x55ff42(0x1e8)](_0x55ff42(0x1f4),'/v1/hosted/payment_links/'+_0x96cbbb,_0x13d4d8);throw new Error(_0x55ff42(0x210)+(_0x13d4d8 instanceof Error?_0x13d4d8[_0x55ff42(0x228)]:_0x55ff42(0x23f)));}}async[a42_0x5fc94c(0x20a)](_0x59d3de){const _0x1c549a=a42_0x5fc94c;console[_0x1c549a(0x232)](_0x1c549a(0x1dd),_0x59d3de);let _0x485e4a='PENDING',_0x22f6f1;_0x59d3de['data']?.[_0x1c549a(0x1fc)]&&(_0x22f6f1=_0x59d3de[_0x1c549a(0x1cd)][_0x1c549a(0x1fc)],console[_0x1c549a(0x232)](_0x1c549a(0x1d9)+_0x22f6f1));switch(_0x59d3de[_0x1c549a(0x1fa)]?.['toUpperCase']()){case _0x1c549a(0x23d):_0x59d3de[_0x1c549a(0x1cd)]?.[_0x1c549a(0x1cf)]===!![]&&_0x59d3de[_0x1c549a(0x1cd)]?.[_0x1c549a(0x22a)]===_0x1c549a(0x24a)?_0x485e4a=_0x1c549a(0x216):_0x485e4a='PENDING';break;case _0x1c549a(0x23b):_0x485e4a=_0x1c549a(0x1ed);break;case _0x1c549a(0x1d0):_0x485e4a=_0x1c549a(0x1d3);break;case _0x1c549a(0x1e3):_0x485e4a=_0x1c549a(0x1ed);!_0x22f6f1&&_0x59d3de[_0x1c549a(0x1cd)]?.[_0x1c549a(0x1fc)]&&(_0x22f6f1=_0x59d3de[_0x1c549a(0x1cd)][_0x1c549a(0x1fc)]);break;default:switch(_0x59d3de[_0x1c549a(0x1cd)]?.[_0x1c549a(0x22a)]?.[_0x1c549a(0x205)]()){case'CLO':_0x59d3de[_0x1c549a(0x1cd)]?.[_0x1c549a(0x1cf)]===!![]?_0x485e4a='PAID':_0x485e4a=_0x1c549a(0x1ed);break;case'CAN':_0x485e4a='FAILED';break;case _0x1c549a(0x1ce):_0x485e4a=_0x1c549a(0x1d3);break;case _0x1c549a(0x223):_0x485e4a=_0x1c549a(0x1ed);!_0x22f6f1&&_0x59d3de[_0x1c549a(0x1cd)]?.[_0x1c549a(0x1fc)]&&(_0x22f6f1=_0x59d3de['data']['failure_message']);break;case _0x1c549a(0x236):case _0x1c549a(0x1fd):default:_0x485e4a=_0x1c549a(0x239);break;}break;}const _0x16d676={};return _0x59d3de[_0x1c549a(0x1cd)]?.[_0x1c549a(0x225)]?.[_0x1c549a(0x1e5)]&&(_0x16d676[_0x1c549a(0x207)]=_0x59d3de[_0x1c549a(0x1cd)][_0x1c549a(0x225)][_0x1c549a(0x1e5)]),_0x59d3de['data']?.[_0x1c549a(0x218)]&&(_0x16d676['paymentMethod']=_0x59d3de[_0x1c549a(0x1cd)][_0x1c549a(0x218)]),_0x59d3de['data']?.[_0x1c549a(0x240)]&&(_0x16d676[_0x1c549a(0x227)]=_0x59d3de['data'][_0x1c549a(0x240)]),_0x59d3de[_0x1c549a(0x1cd)]?.[_0x1c549a(0x1f0)]&&(_0x16d676[_0x1c549a(0x248)]=_0x59d3de[_0x1c549a(0x1cd)][_0x1c549a(0x1f0)]),console[_0x1c549a(0x232)](_0x1c549a(0x245)+_0x485e4a+_0x1c549a(0x1f3)+(_0x22f6f1||_0x1c549a(0x1f2))),{'paymentId':_0x59d3de[_0x1c549a(0x1cd)]?.[_0x1c549a(0x202)]||'','status':_0x485e4a,'amount':_0x59d3de[_0x1c549a(0x1cd)]?.[_0x1c549a(0x1f1)],'currency':_0x59d3de[_0x1c549a(0x1cd)]?.[_0x1c549a(0x1d2)],'failureMessage':_0x22f6f1,'additionalInfo':_0x16d676};}}exports[a42_0x5fc94c(0x1dc)]=RapydService;