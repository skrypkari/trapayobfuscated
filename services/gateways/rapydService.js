'use strict';function a45_0xe645(){const _0x48d710=['rapyd','JSON\x20Parse\x20Error:\x20','EXPIRED','redirect_url','ACT','Failed\x20to\x20parse\x20JSON\x20response:','===\x20RAPYD\x20API\x20BUSINESS\x20ERROR\x20===','application/json','üá¨üáß\x20Country\x20used:\x20','UNKNOWN','Redirect\x20URL:','Invalid\x20JSON\x20response\x20from\x20Rapyd\x20API:\x20','===\x20RAPYD\x20API\x20RESPONSE\x20(White\x20Domain)\x20===','SUCCESS','6322150PxDloO','verifyPayment','970236XMcIEL','Error\x20Message:','Error\x20stack:','571832cXrOSg','ORDER:\x20','üí•\x20Rapyd\x20failure\x20message:\x20','POST','55vwHTCh','/v1/hosted/payment_links','PAYMENT_CANCELED','EXP','Response\x20Time:','CAN','190444UHXTVF','stringify','PAYMENT_COMPLETED','paid','üåê\x20Rapyd\x20service\x20initialized\x20with\x20white\x20domain\x20proxy','apiUrl','Error\x20details:','133KZEbsy','Status:','HTTP\x20error!\x20status:\x20','Parsed\x20Result:','\x20(always\x20GB\x20for\x20Rapyd)','toUpperCase','Request\x20Body\x20(Updated\x20Format):','Response\x20Body:','https://tesoft.uk/gateway/success.php?id=','error_code','text','GET','gb_mastercard_card','üîÑ\x20Rapyd\x20webhook\x20processed:\x20status=','PAID','TesSoft\x20Payment\x20System/1.0','NEW','gb_visa_card','fromEntries','data','):\x20','43944sQAcev','===\x20RAPYD\x20SERVICE\x20ERROR\x20===','Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20Unknown\x20error','===\x20RAPYD\x20SUCCESS\x20===','Processing\x20Rapyd\x20webhook:','FAILED','PENDING','payment_method_data','../loggerService','URL:','errorCode','statusText','5702796sZFWDi','Incomplete\x20response:\x20missing\x20id\x20or\x20redirect_url','payment_method_type','9hoiJdv','logWhiteDomainError','255YZUloO','CLO','Invalid\x20response\x20from\x20Rapyd\x20API:\x20missing\x20id\x20or\x20redirect_url','last4','HTTP\x20','headers','Business\x20Error\x20(','RapydService','defineProperty','logWhiteDomainResponse','Missing\x20id\x20or\x20redirect_url\x20in\x20response','PAYMENT_FAILED','üá¨üáß\x20Country:\x20','Unknown\x20error','===\x20PARSED\x20RAPYD\x20RESPONSE\x20===','message','json','===\x20RAPYD\x20API\x20INCOMPLETE\x20RESPONSE\x20===','https://tesoft.uk/gateway/rapyd/','failure_code','HTTP\x20Status:','loggerService','Rapyd\x20payment\x20verification\x20error:','Status\x20Text:','currency','Error\x20message:','===\x20RAPYD\x20API\x20ERROR\x20===','Headers:','===\x20RAPYD\x20API\x20REQUEST\x20(White\x20Domain\x20-\x20Updated\x20Format)\x20===','now','failure_message','status','/v1/hosted/payment_links/','Rapyd\x20API\x20error\x20(','parse','Rapyd\x20API\x20error:\x20','4414155wVSnwC','merchant_reference_id','Raw\x20Response\x20Body:','logWhiteDomainRequest','error','processWebhook','entries','8ZulpkD','üá¨üáß\x20Using\x20GB\x20(Britain)\x20as\x20country\x20for\x20Rapyd\x20payment\x20link','type','log','Response\x20data:'];a45_0xe645=function(){return _0x48d710;};return a45_0xe645();}function a45_0x22eb(_0x1ea65a,_0x50fb65){const _0xe64535=a45_0xe645();return a45_0x22eb=function(_0x22eb4c,_0x2e2717){_0x22eb4c=_0x22eb4c-0x142;let _0x696b1d=_0xe64535[_0x22eb4c];return _0x696b1d;},a45_0x22eb(_0x1ea65a,_0x50fb65);}const a45_0x480592=a45_0x22eb;(function(_0x5679c9,_0x3ce789){const _0x3093a9=a45_0x22eb,_0xa08d77=_0x5679c9();while(!![]){try{const _0x481917=parseInt(_0x3093a9(0x17f))/0x1*(-parseInt(_0x3093a9(0x1a1))/0x2)+parseInt(_0x3093a9(0x178))/0x3+-parseInt(_0x3093a9(0x143))/0x4*(parseInt(_0x3093a9(0x154))/0x5)+-parseInt(_0x3093a9(0x14f))/0x6+parseInt(_0x3093a9(0x1a8))/0x7*(parseInt(_0x3093a9(0x197))/0x8)+-parseInt(_0x3093a9(0x152))/0x9*(-parseInt(_0x3093a9(0x192))/0xa)+parseInt(_0x3093a9(0x19b))/0xb*(-parseInt(_0x3093a9(0x194))/0xc);if(_0x481917===_0x3ce789)break;else _0xa08d77['push'](_0xa08d77['shift']());}catch(_0x208b56){_0xa08d77['push'](_0xa08d77['shift']());}}}(a45_0xe645,0xbfa0c));Object[a45_0x480592(0x15c)](exports,'__esModule',{'value':!![]}),exports['RapydService']=void 0x0;const loggerService_1=require(a45_0x480592(0x14b));class RapydService{constructor(){const _0x2f615b=a45_0x480592;this['apiUrl']=_0x2f615b(0x166),console['log'](_0x2f615b(0x1a5));}async['createPaymentLink'](_0x45aa1d){const _0x4698e6=a45_0x480592,{orderId:_0xf0aac2,orderName:_0x2cd736,amount:_0x3fd3d7,currency:_0xd5e2cf,usage:_0x334af9,maxPayments:_0x323ebc,successUrl:_0x4cff43,failUrl:_0xb55c3f}=_0x45aa1d,_0x557a5b=_0xd5e2cf[_0x4698e6(0x1ad)](),_0x3a14fb='GB';console[_0x4698e6(0x182)](_0x4698e6(0x180));const _0x5a1c8c=_0x4698e6(0x1b0)+_0xf0aac2,_0x46db4c='https://tesoft.uk/gateway/fail.php?id='+_0xf0aac2,_0x204186={'amount':_0x3fd3d7,'currency':_0x557a5b,'cancel_checkout_url':_0x46db4c,'complete_checkout_url':_0x5a1c8c,'complete_payment_url':_0x5a1c8c,'merchant_reference_id':_0xf0aac2,'description':_0x4698e6(0x198)+_0xf0aac2,'country':'GB','payment_method_types_include':[_0x4698e6(0x1b9),_0x4698e6(0x1b4)],'custom_elements':{'display_description':!![]}},_0x462eff=Date['now']();try{console[_0x4698e6(0x182)](_0x4698e6(0x170)),console[_0x4698e6(0x182)](_0x4698e6(0x14c),this[_0x4698e6(0x1a6)]),console[_0x4698e6(0x182)](_0x4698e6(0x1ae),JSON[_0x4698e6(0x1a2)](_0x204186,null,0x2)),console[_0x4698e6(0x182)](_0x4698e6(0x160)+_0x3a14fb+_0x4698e6(0x1ac)),console[_0x4698e6(0x182)]('üí≥\x20Payment\x20Methods:\x20gb_visa_card,\x20gb_mastercard_card'),loggerService_1[_0x4698e6(0x169)][_0x4698e6(0x17b)](_0x4698e6(0x184),_0x4698e6(0x19c),_0x4698e6(0x19a),_0x204186);const _0x4f5f87=await fetch(this[_0x4698e6(0x1a6)],{'method':_0x4698e6(0x19a),'headers':{'Content-Type':_0x4698e6(0x18b),'User-Agent':_0x4698e6(0x1b7)},'body':JSON[_0x4698e6(0x1a2)](_0x204186)}),_0x51ce18=Date[_0x4698e6(0x171)]()-_0x462eff;console[_0x4698e6(0x182)](_0x4698e6(0x190)),console[_0x4698e6(0x182)](_0x4698e6(0x1a9),_0x4f5f87[_0x4698e6(0x173)]),console[_0x4698e6(0x182)](_0x4698e6(0x16b),_0x4f5f87[_0x4698e6(0x14e)]),console['log'](_0x4698e6(0x16f),Object[_0x4698e6(0x1ba)](_0x4f5f87[_0x4698e6(0x159)][_0x4698e6(0x17e)]())),console[_0x4698e6(0x182)](_0x4698e6(0x19f),_0x51ce18+'ms');const _0x37ab04=await _0x4f5f87[_0x4698e6(0x1b2)]();console[_0x4698e6(0x182)](_0x4698e6(0x17a),_0x37ab04);if(!_0x4f5f87['ok']){console['error'](_0x4698e6(0x16e)),console[_0x4698e6(0x17c)](_0x4698e6(0x168),_0x4f5f87[_0x4698e6(0x173)]),console[_0x4698e6(0x17c)](_0x4698e6(0x1af),_0x37ab04),loggerService_1[_0x4698e6(0x169)]['logWhiteDomainResponse']('rapyd',_0x4698e6(0x19c),_0x4f5f87[_0x4698e6(0x173)],_0x37ab04,_0x51ce18),loggerService_1['loggerService'][_0x4698e6(0x153)]('rapyd',_0x4698e6(0x19c),_0x4698e6(0x158)+_0x4f5f87[_0x4698e6(0x173)]+':\x20'+_0x37ab04);throw new Error(_0x4698e6(0x1aa)+_0x4f5f87[_0x4698e6(0x173)]+',\x20body:\x20'+_0x37ab04);}let _0x5c7c63;try{_0x5c7c63=JSON[_0x4698e6(0x176)](_0x37ab04);}catch(_0x40372f){console[_0x4698e6(0x17c)](_0x4698e6(0x189),_0x40372f),loggerService_1[_0x4698e6(0x169)][_0x4698e6(0x153)]('rapyd',_0x4698e6(0x19c),_0x4698e6(0x185)+_0x40372f);throw new Error(_0x4698e6(0x18f)+_0x37ab04);}console[_0x4698e6(0x182)](_0x4698e6(0x162)),console['log'](_0x4698e6(0x1ab),JSON[_0x4698e6(0x1a2)](_0x5c7c63,null,0x2)),loggerService_1[_0x4698e6(0x169)][_0x4698e6(0x15d)](_0x4698e6(0x184),_0x4698e6(0x19c),_0x4f5f87[_0x4698e6(0x173)],_0x5c7c63,_0x51ce18);if(_0x5c7c63[_0x4698e6(0x173)]?.[_0x4698e6(0x173)]!==_0x4698e6(0x191)){const _0x3b4a02=_0x5c7c63[_0x4698e6(0x173)]?.[_0x4698e6(0x163)]||'Unknown\x20error\x20from\x20Rapyd\x20API',_0x23d664=_0x5c7c63[_0x4698e6(0x173)]?.[_0x4698e6(0x1b1)]||_0x4698e6(0x18d);console[_0x4698e6(0x17c)](_0x4698e6(0x18a)),console[_0x4698e6(0x17c)]('Error\x20Code:',_0x23d664),console[_0x4698e6(0x17c)](_0x4698e6(0x195),_0x3b4a02),console[_0x4698e6(0x17c)]('Full\x20Error\x20Data:',_0x5c7c63[_0x4698e6(0x173)]),loggerService_1['loggerService'][_0x4698e6(0x153)]('rapyd','/v1/hosted/payment_links',_0x4698e6(0x15a)+_0x23d664+_0x4698e6(0x142)+_0x3b4a02);throw new Error(_0x4698e6(0x175)+_0x23d664+_0x4698e6(0x142)+_0x3b4a02);}if(!_0x5c7c63[_0x4698e6(0x1bb)]?.['id']||!_0x5c7c63[_0x4698e6(0x1bb)]?.['redirect_url']){console['error'](_0x4698e6(0x165)),console['error'](_0x4698e6(0x15e)),console[_0x4698e6(0x17c)](_0x4698e6(0x183),_0x5c7c63[_0x4698e6(0x1bb)]),loggerService_1[_0x4698e6(0x169)]['logWhiteDomainError']('rapyd',_0x4698e6(0x19c),_0x4698e6(0x150));throw new Error(_0x4698e6(0x156));}return console[_0x4698e6(0x182)](_0x4698e6(0x146)),console[_0x4698e6(0x182)]('Payment\x20Link\x20ID:',_0x5c7c63[_0x4698e6(0x1bb)]['id']),console['log'](_0x4698e6(0x18e),_0x5c7c63[_0x4698e6(0x1bb)][_0x4698e6(0x187)]),console[_0x4698e6(0x182)](_0x4698e6(0x18c)+_0x3a14fb+'\x20(GB\x20-\x20Britain)'),console[_0x4698e6(0x182)]('üí≥\x20Payment\x20Methods:\x20gb_visa_card,\x20gb_mastercard_card'),{'gateway_payment_id':_0x5c7c63[_0x4698e6(0x1bb)]['id'],'payment_url':_0x5c7c63['data'][_0x4698e6(0x187)]};}catch(_0x1a4a46){console[_0x4698e6(0x17c)](_0x4698e6(0x144)),console[_0x4698e6(0x17c)](_0x4698e6(0x1a7),_0x1a4a46),loggerService_1[_0x4698e6(0x169)][_0x4698e6(0x153)](_0x4698e6(0x184),_0x4698e6(0x19c),_0x1a4a46);if(_0x1a4a46 instanceof Error){console['error'](_0x4698e6(0x16d),_0x1a4a46[_0x4698e6(0x163)]),console[_0x4698e6(0x17c)](_0x4698e6(0x196),_0x1a4a46['stack']);throw new Error('Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20'+_0x1a4a46['message']);}throw new Error(_0x4698e6(0x145));}}async[a45_0x480592(0x193)](_0x359614){const _0x233640=a45_0x480592,_0x461923=Date[_0x233640(0x171)]();try{loggerService_1[_0x233640(0x169)]['logWhiteDomainRequest']('rapyd','/v1/hosted/payment_links/'+_0x359614,_0x233640(0x1b3),{});const _0xa09b25=await fetch(this[_0x233640(0x1a6)]+'/'+_0x359614,{'method':'GET','headers':{'Content-Type':_0x233640(0x18b),'User-Agent':_0x233640(0x1b7)}}),_0x4f6f26=Date['now']()-_0x461923;if(!_0xa09b25['ok']){const _0x3b26f0=await _0xa09b25[_0x233640(0x1b2)]();loggerService_1['loggerService'][_0x233640(0x15d)]('rapyd',_0x233640(0x174)+_0x359614,_0xa09b25[_0x233640(0x173)],_0x3b26f0,_0x4f6f26);throw new Error(_0x233640(0x1aa)+_0xa09b25[_0x233640(0x173)]);}const _0x1164e1=await _0xa09b25[_0x233640(0x164)]();loggerService_1['loggerService']['logWhiteDomainResponse'](_0x233640(0x184),_0x233640(0x174)+_0x359614,_0xa09b25[_0x233640(0x173)],_0x1164e1,_0x4f6f26);if(_0x1164e1['status']?.[_0x233640(0x173)]!=='SUCCESS'){loggerService_1['loggerService']['logWhiteDomainError'](_0x233640(0x184),_0x233640(0x174)+_0x359614,_0x233640(0x177)+(_0x1164e1[_0x233640(0x173)]?.[_0x233640(0x163)]||_0x233640(0x161)));throw new Error(_0x233640(0x177)+(_0x1164e1['status']?.[_0x233640(0x163)]||'Unknown\x20error'));}let _0x2830eb=_0x233640(0x149);if(_0x1164e1['data']?.[_0x233640(0x173)])switch(_0x1164e1[_0x233640(0x1bb)][_0x233640(0x173)]['toUpperCase']()){case _0x233640(0x155):_0x2830eb=_0x233640(0x1b6);break;case _0x233640(0x1a0):_0x2830eb=_0x233640(0x148);break;case _0x233640(0x19e):_0x2830eb=_0x233640(0x186);break;case'ERR':_0x2830eb='FAILED';break;case _0x233640(0x1b8):case _0x233640(0x188):default:_0x2830eb=_0x233640(0x149);break;}return{'status':_0x2830eb,'amount':_0x1164e1[_0x233640(0x1bb)]?.['amount'],'currency':_0x1164e1[_0x233640(0x1bb)]?.[_0x233640(0x16c)]};}catch(_0x5713f0){console[_0x233640(0x17c)](_0x233640(0x16a),_0x5713f0),loggerService_1[_0x233640(0x169)][_0x233640(0x153)](_0x233640(0x184),_0x233640(0x174)+_0x359614,_0x5713f0);throw new Error('Failed\x20to\x20verify\x20Rapyd\x20payment:\x20'+(_0x5713f0 instanceof Error?_0x5713f0[_0x233640(0x163)]:'Unknown\x20error'));}}async[a45_0x480592(0x17d)](_0x3fa48b){const _0x5a6ffb=a45_0x480592;console[_0x5a6ffb(0x182)](_0x5a6ffb(0x147),_0x3fa48b);let _0x39a184=_0x5a6ffb(0x149),_0x486093;_0x3fa48b[_0x5a6ffb(0x1bb)]?.[_0x5a6ffb(0x172)]&&(_0x486093=_0x3fa48b[_0x5a6ffb(0x1bb)][_0x5a6ffb(0x172)],console[_0x5a6ffb(0x182)](_0x5a6ffb(0x199)+_0x486093));switch(_0x3fa48b[_0x5a6ffb(0x181)]?.[_0x5a6ffb(0x1ad)]()){case _0x5a6ffb(0x1a3):_0x3fa48b[_0x5a6ffb(0x1bb)]?.[_0x5a6ffb(0x1a4)]===!![]&&_0x3fa48b[_0x5a6ffb(0x1bb)]?.['status']===_0x5a6ffb(0x155)?_0x39a184=_0x5a6ffb(0x1b6):_0x39a184=_0x5a6ffb(0x149);break;case _0x5a6ffb(0x19d):_0x39a184=_0x5a6ffb(0x148);break;case'PAYMENT_EXPIRED':_0x39a184='EXPIRED';break;case _0x5a6ffb(0x15f):_0x39a184=_0x5a6ffb(0x148);!_0x486093&&_0x3fa48b[_0x5a6ffb(0x1bb)]?.[_0x5a6ffb(0x172)]&&(_0x486093=_0x3fa48b[_0x5a6ffb(0x1bb)]['failure_message']);break;default:switch(_0x3fa48b[_0x5a6ffb(0x1bb)]?.[_0x5a6ffb(0x173)]?.[_0x5a6ffb(0x1ad)]()){case _0x5a6ffb(0x155):_0x3fa48b[_0x5a6ffb(0x1bb)]?.[_0x5a6ffb(0x1a4)]===!![]?_0x39a184=_0x5a6ffb(0x1b6):_0x39a184=_0x5a6ffb(0x148);break;case _0x5a6ffb(0x1a0):_0x39a184=_0x5a6ffb(0x148);break;case _0x5a6ffb(0x19e):_0x39a184=_0x5a6ffb(0x186);break;case'ERR':_0x39a184=_0x5a6ffb(0x148);!_0x486093&&_0x3fa48b[_0x5a6ffb(0x1bb)]?.[_0x5a6ffb(0x172)]&&(_0x486093=_0x3fa48b['data'][_0x5a6ffb(0x172)]);break;case _0x5a6ffb(0x1b8):case _0x5a6ffb(0x188):default:_0x39a184='PENDING';break;}break;}const _0xba35ef={};return _0x3fa48b[_0x5a6ffb(0x1bb)]?.[_0x5a6ffb(0x14a)]?.[_0x5a6ffb(0x157)]&&(_0xba35ef['cardLast4']=_0x3fa48b[_0x5a6ffb(0x1bb)][_0x5a6ffb(0x14a)]['last4']),_0x3fa48b[_0x5a6ffb(0x1bb)]?.['payment_method_type']&&(_0xba35ef['paymentMethod']=_0x3fa48b[_0x5a6ffb(0x1bb)][_0x5a6ffb(0x151)]),_0x3fa48b[_0x5a6ffb(0x1bb)]?.['error_code']&&(_0xba35ef[_0x5a6ffb(0x14d)]=_0x3fa48b[_0x5a6ffb(0x1bb)]['error_code']),_0x3fa48b[_0x5a6ffb(0x1bb)]?.[_0x5a6ffb(0x167)]&&(_0xba35ef['failureCode']=_0x3fa48b[_0x5a6ffb(0x1bb)][_0x5a6ffb(0x167)]),console['log'](_0x5a6ffb(0x1b5)+_0x39a184+',\x20failureMessage='+(_0x486093||'none')),{'paymentId':_0x3fa48b[_0x5a6ffb(0x1bb)]?.[_0x5a6ffb(0x179)]||'','status':_0x39a184,'amount':_0x3fa48b[_0x5a6ffb(0x1bb)]?.['amount'],'currency':_0x3fa48b['data']?.[_0x5a6ffb(0x16c)],'failureMessage':_0x486093,'additionalInfo':_0xba35ef};}}exports[a45_0x480592(0x15b)]=RapydService;