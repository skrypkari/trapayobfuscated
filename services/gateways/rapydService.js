'use strict';const a53_0x500011=a53_0x566f;(function(_0x50088a,_0xa6c68a){const _0x5439ca=a53_0x566f,_0x28356a=_0x50088a();while(!![]){try{const _0xeeea44=parseInt(_0x5439ca(0xc8))/0x1*(-parseInt(_0x5439ca(0x8f))/0x2)+parseInt(_0x5439ca(0x7f))/0x3+-parseInt(_0x5439ca(0x90))/0x4*(-parseInt(_0x5439ca(0x7d))/0x5)+parseInt(_0x5439ca(0x6e))/0x6+-parseInt(_0x5439ca(0xbc))/0x7*(-parseInt(_0x5439ca(0x6f))/0x8)+-parseInt(_0x5439ca(0xa3))/0x9*(parseInt(_0x5439ca(0x9b))/0xa)+parseInt(_0x5439ca(0xcd))/0xb*(-parseInt(_0x5439ca(0xa7))/0xc);if(_0xeeea44===_0xa6c68a)break;else _0x28356a['push'](_0x28356a['shift']());}catch(_0x33ca0e){_0x28356a['push'](_0x28356a['shift']());}}}(a53_0x238a,0x86431));function a53_0x238a(){const _0x203163=['2537556aJHMUu','URL:','Headers:','application/json','Failed\x20to\x20parse\x20JSON\x20response:','expiration','HTTP\x20error!\x20status:\x20','RapydService','fromEntries','EXP','json','parse','HTTP\x20','error','last4','FAILED','2WtvvOE','11020FZzTVy','failureCode','cardLast4','logWhiteDomainResponse','now',',\x20failureMessage=','floor',',\x20body:\x20','PAYMENT_FAILED','text','failure_message','10iKGaDn','Parsed\x20Result:','Request\x20Body\x20(Updated\x20Format):','🌐\x20Rapyd\x20service\x20initialized\x20with\x20white\x20domain\x20proxy','__esModule','paymentMethod','\x20(always\x20GB\x20for\x20Rapyd)','loggerService','1230885wXvnTA','https://tesoft.uk/gateway/rapyd/','/v1/hosted/payment_links/','Error\x20stack:','168VynLFM','message','log','ORDER:\x20','https://tesoft.uk/gateway/success.php?id=','fixed_side','EUR','toISOString','CLO','rapyd','===\x20RAPYD\x20API\x20REQUEST\x20(White\x20Domain\x20-\x20Updated\x20Format)\x20===','POST','Response\x20Time:','CAN','===\x20RAPYD\x20API\x20RESPONSE\x20(White\x20Domain)\x20===','Redirect\x20URL:','statusText','Error\x20message:','GET','buy','data','7SXroXB','paid','PAYMENT_COMPLETED','🇬🇧\x20Country:\x20','/v1/hosted/payment_links','none','Raw\x20Response\x20Body:','💳\x20Payment\x20Methods:\x20gb_visa_card,\x20gb_mastercard_card','\x20\x20\x20expiration:\x20','JSON\x20Parse\x20Error:\x20','Unknown\x20error','gb_mastercard_card','7655eJpCfG','Rapyd\x20API\x20error\x20(','ERR','type','payment_method_type','1550747lxsJMT','stringify','===\x20PARSED\x20RAPYD\x20RESPONSE\x20===','toUpperCase','Status:','Error\x20Code:','currency','headers','===\x20RAPYD\x20API\x20INCOMPLETE\x20RESPONSE\x20===','Payment\x20System/1.0','SUCCESS','Invalid\x20response\x20from\x20Rapyd\x20API:\x20missing\x20id\x20or\x20redirect_url','Processing\x20Rapyd\x20webhook:','💱\x20Adding\x20currency\x20conversion\x20fields\x20for\x20','redirect_url','🇬🇧\x20Country\x20used:\x20','stack','PAYMENT_CANCELED','status','Rapyd\x20API\x20error:\x20','===\x20RAPYD\x20API\x20BUSINESS\x20ERROR\x20===','../loggerService','Full\x20Error\x20Data:','defineProperty','🇬🇧\x20Using\x20GB\x20(Britain)\x20as\x20country\x20for\x20Rapyd\x20payment\x20link','ACT','NEW','PAYMENT_EXPIRED','Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20','verifyPayment','===\x20RAPYD\x20SERVICE\x20ERROR\x20===','apiUrl','===\x20RAPYD\x20API\x20ERROR\x20===','gb_visa_card','🔄\x20Rapyd\x20webhook\x20processed:\x20status=','5990574PxQqIf','440872ZPNDJs','Missing\x20id\x20or\x20redirect_url\x20in\x20response','PAID','HTTP\x20Status:','payment_method_data','amount','):\x20','💥\x20Rapyd\x20failure\x20message:\x20','EXPIRED','error_code','Error\x20details:','\x20(GB\x20-\x20Britain)','processWebhook','logWhiteDomainError','1395YmXvlQ','PENDING'];a53_0x238a=function(){return _0x203163;};return a53_0x238a();}Object[a53_0x500011(0xe4)](exports,a53_0x500011(0x9f),{'value':!![]}),exports[a53_0x500011(0x86)]=void 0x0;const loggerService_1=require(a53_0x500011(0xe2));function a53_0x566f(_0x2ab1b4,_0x2a5ec0){const _0x238a0c=a53_0x238a();return a53_0x566f=function(_0x566f69,_0x1a10d8){_0x566f69=_0x566f69-0x66;let _0x57d71a=_0x238a0c[_0x566f69];return _0x57d71a;},a53_0x566f(_0x2ab1b4,_0x2a5ec0);}class RapydService{constructor(){const _0x1f456f=a53_0x500011;this[_0x1f456f(0x6a)]=_0x1f456f(0xa4),console[_0x1f456f(0xa9)](_0x1f456f(0x9e));}async['createPaymentLink'](_0x4a3494){const _0x33a50b=a53_0x500011,{orderId:_0x1ad6b8,orderName:_0x351b79,amount:_0x4561c6,currency:_0xa87063,usage:_0x4fbc20,maxPayments:_0x5cdfd0,successUrl:_0x115825,failUrl:_0x42a4d8}=_0x4a3494,_0x5c19ec=_0xa87063['toUpperCase'](),_0x4ab5a7='GB';console['log'](_0x33a50b(0xe5));const _0x48d5bd=_0x33a50b(0xab)+_0x1ad6b8,_0x591c40='https://tesoft.uk/gateway/fail.php?id='+_0x1ad6b8,_0x2f8fbe={'amount':_0x4561c6,'currency':_0x5c19ec,'cancel_checkout_url':_0x591c40,'complete_checkout_url':_0x48d5bd,'complete_payment_url':_0x48d5bd,'merchant_reference_id':_0x1ad6b8,'description':_0x33a50b(0xaa)+_0x1ad6b8,'country':'GB','payment_method_types_include':[_0x33a50b(0x6c),_0x33a50b(0xc7)],'custom_elements':{'display_description':!![]}};if(_0x5c19ec!==_0x33a50b(0xad)){const _0x4a5f60=Math[_0x33a50b(0x96)](Date[_0x33a50b(0x94)]()/0x3e8)+0x1e*0x3c;_0x2f8fbe[_0x33a50b(0xac)]=_0x33a50b(0xba),_0x2f8fbe['requested_currency']=_0x33a50b(0xad),_0x2f8fbe[_0x33a50b(0x84)]=_0x4a5f60,console['log'](_0x33a50b(0xda)+_0x5c19ec+'\x20->\x20EUR:'),console[_0x33a50b(0xa9)]('\x20\x20\x20fixed_side:\x20buy'),console[_0x33a50b(0xa9)]('\x20\x20\x20requested_currency:\x20EUR'),console[_0x33a50b(0xa9)](_0x33a50b(0xc4)+_0x4a5f60+'\x20('+new Date(_0x4a5f60*0x3e8)[_0x33a50b(0xae)]()+')');}const _0x5ea319=Date[_0x33a50b(0x94)]();try{console['log'](_0x33a50b(0xb1)),console['log'](_0x33a50b(0x80),this['apiUrl']),console[_0x33a50b(0xa9)](_0x33a50b(0x9d),JSON[_0x33a50b(0xce)](_0x2f8fbe,null,0x2)),console[_0x33a50b(0xa9)](_0x33a50b(0xbf)+_0x4ab5a7+_0x33a50b(0xa1)),console[_0x33a50b(0xa9)]('💳\x20Payment\x20Methods:\x20gb_visa_card,\x20gb_mastercard_card'),loggerService_1[_0x33a50b(0xa2)]['logWhiteDomainRequest'](_0x33a50b(0xb0),_0x33a50b(0xc0),_0x33a50b(0xb2),_0x2f8fbe);const _0x1b0c97=await fetch(this[_0x33a50b(0x6a)],{'method':_0x33a50b(0xb2),'headers':{'Content-Type':_0x33a50b(0x82),'User-Agent':_0x33a50b(0xd6)},'body':JSON['stringify'](_0x2f8fbe)}),_0x95d856=Date[_0x33a50b(0x94)]()-_0x5ea319;console[_0x33a50b(0xa9)](_0x33a50b(0xb5)),console[_0x33a50b(0xa9)](_0x33a50b(0xd1),_0x1b0c97[_0x33a50b(0xdf)]),console['log']('Status\x20Text:',_0x1b0c97[_0x33a50b(0xb7)]),console['log'](_0x33a50b(0x81),Object[_0x33a50b(0x87)](_0x1b0c97[_0x33a50b(0xd4)]['entries']())),console[_0x33a50b(0xa9)](_0x33a50b(0xb3),_0x95d856+'ms');const _0x1df335=await _0x1b0c97[_0x33a50b(0x99)]();console[_0x33a50b(0xa9)](_0x33a50b(0xc2),_0x1df335);if(!_0x1b0c97['ok']){console[_0x33a50b(0x8c)](_0x33a50b(0x6b)),console['error'](_0x33a50b(0x72),_0x1b0c97[_0x33a50b(0xdf)]),console['error']('Response\x20Body:',_0x1df335),loggerService_1[_0x33a50b(0xa2)][_0x33a50b(0x93)](_0x33a50b(0xb0),_0x33a50b(0xc0),_0x1b0c97[_0x33a50b(0xdf)],_0x1df335,_0x95d856),loggerService_1[_0x33a50b(0xa2)][_0x33a50b(0x7c)](_0x33a50b(0xb0),_0x33a50b(0xc0),_0x33a50b(0x8b)+_0x1b0c97[_0x33a50b(0xdf)]+':\x20'+_0x1df335);throw new Error(_0x33a50b(0x85)+_0x1b0c97[_0x33a50b(0xdf)]+_0x33a50b(0x97)+_0x1df335);}let _0x588039;try{_0x588039=JSON[_0x33a50b(0x8a)](_0x1df335);}catch(_0x5df4dc){console[_0x33a50b(0x8c)](_0x33a50b(0x83),_0x5df4dc),loggerService_1[_0x33a50b(0xa2)][_0x33a50b(0x7c)](_0x33a50b(0xb0),_0x33a50b(0xc0),_0x33a50b(0xc5)+_0x5df4dc);throw new Error('Invalid\x20JSON\x20response\x20from\x20Rapyd\x20API:\x20'+_0x1df335);}console['log'](_0x33a50b(0xcf)),console[_0x33a50b(0xa9)](_0x33a50b(0x9c),JSON[_0x33a50b(0xce)](_0x588039,null,0x2)),loggerService_1['loggerService'][_0x33a50b(0x93)](_0x33a50b(0xb0),_0x33a50b(0xc0),_0x1b0c97['status'],_0x588039,_0x95d856);if(_0x588039[_0x33a50b(0xdf)]?.[_0x33a50b(0xdf)]!==_0x33a50b(0xd7)){const _0x29b48b=_0x588039[_0x33a50b(0xdf)]?.[_0x33a50b(0xa8)]||'Unknown\x20error\x20from\x20Rapyd\x20API',_0x1fceaf=_0x588039[_0x33a50b(0xdf)]?.['error_code']||'UNKNOWN';console[_0x33a50b(0x8c)](_0x33a50b(0xe1)),console[_0x33a50b(0x8c)](_0x33a50b(0xd2),_0x1fceaf),console[_0x33a50b(0x8c)]('Error\x20Message:',_0x29b48b),console[_0x33a50b(0x8c)](_0x33a50b(0xe3),_0x588039[_0x33a50b(0xdf)]),loggerService_1[_0x33a50b(0xa2)]['logWhiteDomainError'](_0x33a50b(0xb0),_0x33a50b(0xc0),'Business\x20Error\x20('+_0x1fceaf+'):\x20'+_0x29b48b);throw new Error(_0x33a50b(0xc9)+_0x1fceaf+_0x33a50b(0x75)+_0x29b48b);}if(!_0x588039['data']?.['id']||!_0x588039[_0x33a50b(0xbb)]?.[_0x33a50b(0xdb)]){console[_0x33a50b(0x8c)](_0x33a50b(0xd5)),console[_0x33a50b(0x8c)](_0x33a50b(0x70)),console[_0x33a50b(0x8c)]('Response\x20data:',_0x588039[_0x33a50b(0xbb)]),loggerService_1[_0x33a50b(0xa2)][_0x33a50b(0x7c)](_0x33a50b(0xb0),_0x33a50b(0xc0),'Incomplete\x20response:\x20missing\x20id\x20or\x20redirect_url');throw new Error(_0x33a50b(0xd8));}return console[_0x33a50b(0xa9)]('===\x20RAPYD\x20SUCCESS\x20==='),console[_0x33a50b(0xa9)]('Payment\x20Link\x20ID:',_0x588039['data']['id']),console[_0x33a50b(0xa9)](_0x33a50b(0xb6),_0x588039[_0x33a50b(0xbb)]['redirect_url']),console[_0x33a50b(0xa9)](_0x33a50b(0xdc)+_0x4ab5a7+_0x33a50b(0x7a)),console[_0x33a50b(0xa9)](_0x33a50b(0xc3)),{'gateway_payment_id':_0x588039[_0x33a50b(0xbb)]['id'],'payment_url':_0x588039['data'][_0x33a50b(0xdb)]};}catch(_0x2ce5c2){console[_0x33a50b(0x8c)](_0x33a50b(0x69)),console[_0x33a50b(0x8c)](_0x33a50b(0x79),_0x2ce5c2),loggerService_1['loggerService']['logWhiteDomainError'](_0x33a50b(0xb0),_0x33a50b(0xc0),_0x2ce5c2);if(_0x2ce5c2 instanceof Error){console['error'](_0x33a50b(0xb8),_0x2ce5c2[_0x33a50b(0xa8)]),console[_0x33a50b(0x8c)](_0x33a50b(0xa6),_0x2ce5c2[_0x33a50b(0xdd)]);throw new Error(_0x33a50b(0x67)+_0x2ce5c2[_0x33a50b(0xa8)]);}throw new Error('Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20Unknown\x20error');}}async[a53_0x500011(0x68)](_0x41d1f4){const _0x461a0a=a53_0x500011,_0x45c76a=Date['now']();try{loggerService_1['loggerService']['logWhiteDomainRequest'](_0x461a0a(0xb0),_0x461a0a(0xa5)+_0x41d1f4,_0x461a0a(0xb9),{});const _0x84b18f=await fetch(this[_0x461a0a(0x6a)]+'/'+_0x41d1f4,{'method':_0x461a0a(0xb9),'headers':{'Content-Type':_0x461a0a(0x82),'User-Agent':_0x461a0a(0xd6)}}),_0x1a24a0=Date[_0x461a0a(0x94)]()-_0x45c76a;if(!_0x84b18f['ok']){const _0xf5c0fd=await _0x84b18f[_0x461a0a(0x99)]();loggerService_1[_0x461a0a(0xa2)][_0x461a0a(0x93)](_0x461a0a(0xb0),_0x461a0a(0xa5)+_0x41d1f4,_0x84b18f[_0x461a0a(0xdf)],_0xf5c0fd,_0x1a24a0);throw new Error('HTTP\x20error!\x20status:\x20'+_0x84b18f[_0x461a0a(0xdf)]);}const _0x18d8d7=await _0x84b18f[_0x461a0a(0x89)]();loggerService_1[_0x461a0a(0xa2)]['logWhiteDomainResponse'](_0x461a0a(0xb0),'/v1/hosted/payment_links/'+_0x41d1f4,_0x84b18f[_0x461a0a(0xdf)],_0x18d8d7,_0x1a24a0);if(_0x18d8d7['status']?.[_0x461a0a(0xdf)]!==_0x461a0a(0xd7)){loggerService_1[_0x461a0a(0xa2)]['logWhiteDomainError']('rapyd',_0x461a0a(0xa5)+_0x41d1f4,'Rapyd\x20API\x20error:\x20'+(_0x18d8d7[_0x461a0a(0xdf)]?.[_0x461a0a(0xa8)]||_0x461a0a(0xc6)));throw new Error(_0x461a0a(0xe0)+(_0x18d8d7[_0x461a0a(0xdf)]?.[_0x461a0a(0xa8)]||_0x461a0a(0xc6)));}let _0x1db99e=_0x461a0a(0x7e);if(_0x18d8d7[_0x461a0a(0xbb)]?.[_0x461a0a(0xdf)])switch(_0x18d8d7['data'][_0x461a0a(0xdf)][_0x461a0a(0xd0)]()){case'CLO':_0x1db99e=_0x461a0a(0x71);break;case _0x461a0a(0xb4):_0x1db99e=_0x461a0a(0x8e);break;case _0x461a0a(0x88):_0x1db99e='EXPIRED';break;case'ERR':_0x1db99e=_0x461a0a(0x8e);break;case _0x461a0a(0xe7):case _0x461a0a(0xe6):default:_0x1db99e=_0x461a0a(0x7e);break;}return{'status':_0x1db99e,'amount':_0x18d8d7[_0x461a0a(0xbb)]?.['amount'],'currency':_0x18d8d7[_0x461a0a(0xbb)]?.['currency']};}catch(_0x336255){console[_0x461a0a(0x8c)]('Rapyd\x20payment\x20verification\x20error:',_0x336255),loggerService_1[_0x461a0a(0xa2)][_0x461a0a(0x7c)](_0x461a0a(0xb0),_0x461a0a(0xa5)+_0x41d1f4,_0x336255);throw new Error('Failed\x20to\x20verify\x20Rapyd\x20payment:\x20'+(_0x336255 instanceof Error?_0x336255['message']:_0x461a0a(0xc6)));}}async[a53_0x500011(0x7b)](_0x143f80){const _0x243721=a53_0x500011;console[_0x243721(0xa9)](_0x243721(0xd9),_0x143f80);let _0x3c1a2f=_0x243721(0x7e),_0x32b4b1;_0x143f80[_0x243721(0xbb)]?.[_0x243721(0x9a)]&&(_0x32b4b1=_0x143f80[_0x243721(0xbb)][_0x243721(0x9a)],console[_0x243721(0xa9)](_0x243721(0x76)+_0x32b4b1));switch(_0x143f80[_0x243721(0xcb)]?.[_0x243721(0xd0)]()){case _0x243721(0xbe):_0x143f80[_0x243721(0xbb)]?.[_0x243721(0xbd)]===!![]&&_0x143f80[_0x243721(0xbb)]?.[_0x243721(0xdf)]===_0x243721(0xaf)?_0x3c1a2f=_0x243721(0x71):_0x3c1a2f=_0x243721(0x7e);break;case _0x243721(0xde):_0x3c1a2f=_0x243721(0x8e);break;case _0x243721(0x66):_0x3c1a2f='EXPIRED';break;case _0x243721(0x98):_0x3c1a2f=_0x243721(0x8e);!_0x32b4b1&&_0x143f80['data']?.[_0x243721(0x9a)]&&(_0x32b4b1=_0x143f80[_0x243721(0xbb)][_0x243721(0x9a)]);break;default:switch(_0x143f80[_0x243721(0xbb)]?.[_0x243721(0xdf)]?.[_0x243721(0xd0)]()){case'CLO':_0x143f80[_0x243721(0xbb)]?.[_0x243721(0xbd)]===!![]?_0x3c1a2f=_0x243721(0x71):_0x3c1a2f=_0x243721(0x8e);break;case'CAN':_0x3c1a2f=_0x243721(0x8e);break;case _0x243721(0x88):_0x3c1a2f=_0x243721(0x77);break;case _0x243721(0xca):_0x3c1a2f='FAILED';!_0x32b4b1&&_0x143f80['data']?.['failure_message']&&(_0x32b4b1=_0x143f80[_0x243721(0xbb)][_0x243721(0x9a)]);break;case _0x243721(0xe7):case _0x243721(0xe6):default:_0x3c1a2f=_0x243721(0x7e);break;}break;}const _0x1e934b={};return _0x143f80[_0x243721(0xbb)]?.[_0x243721(0x73)]?.[_0x243721(0x8d)]&&(_0x1e934b[_0x243721(0x92)]=_0x143f80[_0x243721(0xbb)][_0x243721(0x73)]['last4']),_0x143f80[_0x243721(0xbb)]?.[_0x243721(0xcc)]&&(_0x1e934b[_0x243721(0xa0)]=_0x143f80[_0x243721(0xbb)]['payment_method_type']),_0x143f80[_0x243721(0xbb)]?.[_0x243721(0x78)]&&(_0x1e934b['errorCode']=_0x143f80['data']['error_code']),_0x143f80[_0x243721(0xbb)]?.['failure_code']&&(_0x1e934b[_0x243721(0x91)]=_0x143f80[_0x243721(0xbb)]['failure_code']),console[_0x243721(0xa9)](_0x243721(0x6d)+_0x3c1a2f+_0x243721(0x95)+(_0x32b4b1||_0x243721(0xc1))),{'paymentId':_0x143f80['data']?.['merchant_reference_id']||'','status':_0x3c1a2f,'amount':_0x143f80[_0x243721(0xbb)]?.[_0x243721(0x74)],'currency':_0x143f80['data']?.[_0x243721(0xd3)],'failureMessage':_0x32b4b1,'additionalInfo':_0x1e934b};}}exports[a53_0x500011(0x86)]=RapydService;