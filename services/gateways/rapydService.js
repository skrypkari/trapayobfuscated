'use strict';const a42_0x59c48e=a42_0x419e;function a42_0x419e(_0x581119,_0xf28198){const _0x279dfa=a42_0x279d();return a42_0x419e=function(_0x419e41,_0x55aed4){_0x419e41=_0x419e41-0x17c;let _0x3fd121=_0x279dfa[_0x419e41];return _0x3fd121;},a42_0x419e(_0x581119,_0xf28198);}(function(_0x543783,_0x47bcf7){const _0x4c6ebb=a42_0x419e,_0x3fa329=_0x543783();while(!![]){try{const _0x48e27d=-parseInt(_0x4c6ebb(0x1a9))/0x1*(parseInt(_0x4c6ebb(0x1bd))/0x2)+-parseInt(_0x4c6ebb(0x1be))/0x3+parseInt(_0x4c6ebb(0x192))/0x4*(parseInt(_0x4c6ebb(0x1d4))/0x5)+-parseInt(_0x4c6ebb(0x1c6))/0x6+-parseInt(_0x4c6ebb(0x199))/0x7*(-parseInt(_0x4c6ebb(0x1c5))/0x8)+parseInt(_0x4c6ebb(0x1dc))/0x9*(-parseInt(_0x4c6ebb(0x1c0))/0xa)+-parseInt(_0x4c6ebb(0x1d0))/0xb*(-parseInt(_0x4c6ebb(0x17d))/0xc);if(_0x48e27d===_0x47bcf7)break;else _0x3fa329['push'](_0x3fa329['shift']());}catch(_0x5acbae){_0x3fa329['push'](_0x3fa329['shift']());}}}(a42_0x279d,0x8025a));Object[a42_0x59c48e(0x183)](exports,'__esModule',{'value':!![]}),exports['RapydService']=void 0x0;const loggerService_1=require(a42_0x59c48e(0x1d5));class RapydService{constructor(){const _0x5b4577=a42_0x59c48e;this[_0x5b4577(0x1e3)]=_0x5b4577(0x1cc),console['log']('üåê\x20Rapyd\x20service\x20initialized\x20with\x20white\x20domain\x20proxy');}async[a42_0x59c48e(0x17f)](_0x54d9ab){const _0x290504=a42_0x59c48e,{orderId:_0x32b9fb,orderName:_0x22eaa4,amount:_0x1f3cd1,currency:_0x22e458,usage:_0x4658b9,maxPayments:_0x4dd2f3,successUrl:_0xf8727b,failUrl:_0x5e01ec}=_0x54d9ab,_0x32f10c=_0x22e458['toUpperCase'](),_0x4de436='GB';console[_0x290504(0x1cb)](_0x290504(0x1d7));const _0x3c86b9=_0x290504(0x1c2)+_0x32b9fb,_0x31eb61=_0x290504(0x19d)+_0x32b9fb,_0x51cafa={'amount':_0x1f3cd1,'currency':_0x32f10c,'cancel_checkout_url':_0x31eb61,'complete_checkout_url':_0x3c86b9,'complete_payment_url':_0x3c86b9,'merchant_reference_id':_0x32b9fb,'description':_0x290504(0x1a7)+_0x32b9fb,'country':'GB','payment_method_types_include':[_0x290504(0x18c),'gb_mastercard_card'],'custom_elements':{'display_description':!![]}},_0x295384=Date[_0x290504(0x1af)]();try{console['log'](_0x290504(0x1b2)),console[_0x290504(0x1cb)](_0x290504(0x1e4),this[_0x290504(0x1e3)]),console[_0x290504(0x1cb)](_0x290504(0x1df),JSON[_0x290504(0x1c1)](_0x51cafa,null,0x2)),console[_0x290504(0x1cb)]('üá¨üáß\x20Country:\x20'+_0x4de436+_0x290504(0x188)),console[_0x290504(0x1cb)](_0x290504(0x1e2)),loggerService_1[_0x290504(0x1d2)]['logWhiteDomainRequest']('rapyd','/v1/hosted/payment_links','POST',_0x51cafa);const _0x49eec3=await fetch(this[_0x290504(0x1e3)],{'method':'POST','headers':{'Content-Type':_0x290504(0x18a),'User-Agent':_0x290504(0x1e1)},'body':JSON[_0x290504(0x1c1)](_0x51cafa)}),_0x32885a=Date[_0x290504(0x1af)]()-_0x295384;console[_0x290504(0x1cb)]('===\x20RAPYD\x20API\x20RESPONSE\x20(White\x20Domain)\x20==='),console[_0x290504(0x1cb)](_0x290504(0x1c7),_0x49eec3[_0x290504(0x1a2)]),console['log']('Status\x20Text:',_0x49eec3['statusText']),console[_0x290504(0x1cb)](_0x290504(0x1c3),Object[_0x290504(0x187)](_0x49eec3[_0x290504(0x181)][_0x290504(0x1a3)]())),console[_0x290504(0x1cb)](_0x290504(0x1b6),_0x32885a+'ms');const _0x2caac9=await _0x49eec3[_0x290504(0x1b7)]();console[_0x290504(0x1cb)](_0x290504(0x1cf),_0x2caac9);if(!_0x49eec3['ok']){console[_0x290504(0x19b)](_0x290504(0x1b0)),console[_0x290504(0x19b)](_0x290504(0x1ce),_0x49eec3[_0x290504(0x1a2)]),console[_0x290504(0x19b)](_0x290504(0x1e0),_0x2caac9),loggerService_1[_0x290504(0x1d2)][_0x290504(0x1d8)](_0x290504(0x17c),_0x290504(0x193),_0x49eec3[_0x290504(0x1a2)],_0x2caac9,_0x32885a),loggerService_1[_0x290504(0x1d2)][_0x290504(0x1e6)](_0x290504(0x17c),'/v1/hosted/payment_links','HTTP\x20'+_0x49eec3[_0x290504(0x1a2)]+':\x20'+_0x2caac9);throw new Error(_0x290504(0x1aa)+_0x49eec3[_0x290504(0x1a2)]+_0x290504(0x1ad)+_0x2caac9);}let _0x3ca212;try{_0x3ca212=JSON['parse'](_0x2caac9);}catch(_0x4ba32b){console[_0x290504(0x19b)](_0x290504(0x195),_0x4ba32b),loggerService_1['loggerService'][_0x290504(0x1e6)](_0x290504(0x17c),_0x290504(0x193),_0x290504(0x1bb)+_0x4ba32b);throw new Error(_0x290504(0x18e)+_0x2caac9);}console[_0x290504(0x1cb)]('===\x20PARSED\x20RAPYD\x20RESPONSE\x20==='),console['log'](_0x290504(0x1a6),JSON[_0x290504(0x1c1)](_0x3ca212,null,0x2)),loggerService_1[_0x290504(0x1d2)][_0x290504(0x1d8)](_0x290504(0x17c),_0x290504(0x193),_0x49eec3[_0x290504(0x1a2)],_0x3ca212,_0x32885a);if(_0x3ca212[_0x290504(0x1a2)]?.[_0x290504(0x1a2)]!==_0x290504(0x191)){const _0x5f0900=_0x3ca212[_0x290504(0x1a2)]?.[_0x290504(0x1ac)]||_0x290504(0x1d6),_0x17d111=_0x3ca212[_0x290504(0x1a2)]?.[_0x290504(0x18b)]||_0x290504(0x1b5);console[_0x290504(0x19b)](_0x290504(0x1c8)),console[_0x290504(0x19b)](_0x290504(0x1b8),_0x17d111),console[_0x290504(0x19b)]('Error\x20Message:',_0x5f0900),console[_0x290504(0x19b)]('Full\x20Error\x20Data:',_0x3ca212[_0x290504(0x1a2)]),loggerService_1[_0x290504(0x1d2)][_0x290504(0x1e6)]('rapyd',_0x290504(0x193),_0x290504(0x182)+_0x17d111+'):\x20'+_0x5f0900);throw new Error(_0x290504(0x1a4)+_0x17d111+'):\x20'+_0x5f0900);}if(!_0x3ca212['data']?.['id']||!_0x3ca212[_0x290504(0x1cd)]?.['redirect_url']){console['error'](_0x290504(0x186)),console['error']('Missing\x20id\x20or\x20redirect_url\x20in\x20response'),console['error'](_0x290504(0x1bc),_0x3ca212[_0x290504(0x1cd)]),loggerService_1[_0x290504(0x1d2)][_0x290504(0x1e6)]('rapyd','/v1/hosted/payment_links','Incomplete\x20response:\x20missing\x20id\x20or\x20redirect_url');throw new Error(_0x290504(0x1d9));}return console[_0x290504(0x1cb)]('===\x20RAPYD\x20SUCCESS\x20==='),console[_0x290504(0x1cb)](_0x290504(0x1b4),_0x3ca212[_0x290504(0x1cd)]['id']),console['log'](_0x290504(0x1b3),_0x3ca212[_0x290504(0x1cd)][_0x290504(0x19e)]),console[_0x290504(0x1cb)](_0x290504(0x185)+_0x4de436+_0x290504(0x194)),console[_0x290504(0x1cb)]('üí≥\x20Payment\x20Methods:\x20gb_visa_card,\x20gb_mastercard_card'),{'gateway_payment_id':_0x3ca212[_0x290504(0x1cd)]['id'],'payment_url':_0x3ca212[_0x290504(0x1cd)][_0x290504(0x19e)]};}catch(_0x416907){console[_0x290504(0x19b)](_0x290504(0x1a0)),console[_0x290504(0x19b)]('Error\x20details:',_0x416907),loggerService_1[_0x290504(0x1d2)]['logWhiteDomainError'](_0x290504(0x17c),_0x290504(0x193),_0x416907);if(_0x416907 instanceof Error){console['error'](_0x290504(0x1da),_0x416907[_0x290504(0x1ac)]),console[_0x290504(0x19b)](_0x290504(0x1e9),_0x416907[_0x290504(0x1e8)]);throw new Error(_0x290504(0x17e)+_0x416907[_0x290504(0x1ac)]);}throw new Error(_0x290504(0x19c));}}async[a42_0x59c48e(0x1d3)](_0x2273a8){const _0x52e2c8=a42_0x59c48e,_0x561e05=Date[_0x52e2c8(0x1af)]();try{loggerService_1[_0x52e2c8(0x1d2)][_0x52e2c8(0x1c9)](_0x52e2c8(0x17c),'/v1/hosted/payment_links/'+_0x2273a8,_0x52e2c8(0x19f),{});const _0x57177b=await fetch(this[_0x52e2c8(0x1e3)]+'/'+_0x2273a8,{'method':'GET','headers':{'Content-Type':_0x52e2c8(0x18a),'User-Agent':_0x52e2c8(0x1e1)}}),_0x368948=Date[_0x52e2c8(0x1af)]()-_0x561e05;if(!_0x57177b['ok']){const _0x51cfb5=await _0x57177b[_0x52e2c8(0x1b7)]();loggerService_1['loggerService'][_0x52e2c8(0x1d8)](_0x52e2c8(0x17c),_0x52e2c8(0x190)+_0x2273a8,_0x57177b['status'],_0x51cfb5,_0x368948);throw new Error(_0x52e2c8(0x1aa)+_0x57177b['status']);}const _0x323634=await _0x57177b[_0x52e2c8(0x1ab)]();loggerService_1[_0x52e2c8(0x1d2)][_0x52e2c8(0x1d8)](_0x52e2c8(0x17c),_0x52e2c8(0x190)+_0x2273a8,_0x57177b[_0x52e2c8(0x1a2)],_0x323634,_0x368948);if(_0x323634[_0x52e2c8(0x1a2)]?.['status']!==_0x52e2c8(0x191)){loggerService_1['loggerService'][_0x52e2c8(0x1e6)](_0x52e2c8(0x17c),'/v1/hosted/payment_links/'+_0x2273a8,'Rapyd\x20API\x20error:\x20'+(_0x323634[_0x52e2c8(0x1a2)]?.[_0x52e2c8(0x1ac)]||_0x52e2c8(0x1e7)));throw new Error(_0x52e2c8(0x198)+(_0x323634['status']?.[_0x52e2c8(0x1ac)]||_0x52e2c8(0x1e7)));}let _0x27e22a=_0x52e2c8(0x189);if(_0x323634['data']?.[_0x52e2c8(0x1a2)])switch(_0x323634[_0x52e2c8(0x1cd)]['status'][_0x52e2c8(0x1a1)]()){case _0x52e2c8(0x19a):_0x27e22a=_0x52e2c8(0x1db);break;case _0x52e2c8(0x1ae):_0x27e22a=_0x52e2c8(0x1a8);break;case _0x52e2c8(0x18d):_0x27e22a=_0x52e2c8(0x1bf);break;case _0x52e2c8(0x18f):_0x27e22a=_0x52e2c8(0x1a8);break;case'NEW':case'ACT':default:_0x27e22a=_0x52e2c8(0x189);break;}return{'status':_0x27e22a,'amount':_0x323634['data']?.[_0x52e2c8(0x1ba)],'currency':_0x323634['data']?.[_0x52e2c8(0x1d1)]};}catch(_0x4c71e0){console[_0x52e2c8(0x19b)](_0x52e2c8(0x1de),_0x4c71e0),loggerService_1[_0x52e2c8(0x1d2)]['logWhiteDomainError'](_0x52e2c8(0x17c),_0x52e2c8(0x190)+_0x2273a8,_0x4c71e0);throw new Error(_0x52e2c8(0x1dd)+(_0x4c71e0 instanceof Error?_0x4c71e0[_0x52e2c8(0x1ac)]:_0x52e2c8(0x1e7)));}}async['processWebhook'](_0x3312b3){const _0x23e983=a42_0x59c48e;console[_0x23e983(0x1cb)](_0x23e983(0x196),_0x3312b3);let _0x970acf=_0x23e983(0x189);switch(_0x3312b3[_0x23e983(0x180)]?.[_0x23e983(0x1a1)]()){case _0x23e983(0x1a5):_0x3312b3[_0x23e983(0x1cd)]?.[_0x23e983(0x1c4)]===!![]&&_0x3312b3[_0x23e983(0x1cd)]?.[_0x23e983(0x1a2)]==='CLO'?_0x970acf='PAID':_0x970acf=_0x23e983(0x189);break;case'PAYMENT_CANCELED':_0x970acf=_0x23e983(0x1a8);break;case _0x23e983(0x197):_0x970acf=_0x23e983(0x1bf);break;case _0x23e983(0x184):_0x970acf=_0x23e983(0x1a8);break;default:switch(_0x3312b3[_0x23e983(0x1cd)]?.[_0x23e983(0x1a2)]?.[_0x23e983(0x1a1)]()){case _0x23e983(0x19a):_0x3312b3['data']?.[_0x23e983(0x1c4)]===!![]?_0x970acf=_0x23e983(0x1db):_0x970acf=_0x23e983(0x1a8);break;case'CAN':_0x970acf='FAILED';break;case'EXP':_0x970acf=_0x23e983(0x1bf);break;case _0x23e983(0x18f):_0x970acf=_0x23e983(0x1a8);break;case _0x23e983(0x1b1):case _0x23e983(0x1e5):default:_0x970acf=_0x23e983(0x189);break;}break;}return{'paymentId':_0x3312b3[_0x23e983(0x1cd)]?.[_0x23e983(0x1b9)]||'','status':_0x970acf,'amount':_0x3312b3[_0x23e983(0x1cd)]?.['amount'],'currency':_0x3312b3[_0x23e983(0x1cd)]?.[_0x23e983(0x1d1)]};}}function a42_0x279d(){const _0x6449f4=['../loggerService','Unknown\x20error\x20from\x20Rapyd\x20API','üá¨üáß\x20Using\x20GB\x20(Britain)\x20as\x20country\x20for\x20Rapyd\x20payment\x20link','logWhiteDomainResponse','Invalid\x20response\x20from\x20Rapyd\x20API:\x20missing\x20id\x20or\x20redirect_url','Error\x20message:','PAID','72126lYoYKJ','Failed\x20to\x20verify\x20Rapyd\x20payment:\x20','Rapyd\x20payment\x20verification\x20error:','Request\x20Body\x20(Updated\x20Format):','Response\x20Body:','TesSoft\x20Payment\x20System/1.0','üí≥\x20Payment\x20Methods:\x20gb_visa_card,\x20gb_mastercard_card','apiUrl','URL:','ACT','logWhiteDomainError','Unknown\x20error','stack','Error\x20stack:','rapyd','1403568lbDwoG','Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20','createPaymentLink','type','headers','Business\x20Error\x20(','defineProperty','PAYMENT_FAILED','üá¨üáß\x20Country\x20used:\x20','===\x20RAPYD\x20API\x20INCOMPLETE\x20RESPONSE\x20===','fromEntries','\x20(always\x20GB\x20for\x20Rapyd)','PENDING','application/json','error_code','gb_visa_card','EXP','Invalid\x20JSON\x20response\x20from\x20Rapyd\x20API:\x20','ERR','/v1/hosted/payment_links/','SUCCESS','764WnHxAk','/v1/hosted/payment_links','\x20(GB\x20-\x20Britain)','Failed\x20to\x20parse\x20JSON\x20response:','Processing\x20Rapyd\x20webhook:','PAYMENT_EXPIRED','Rapyd\x20API\x20error:\x20','403207Jkxphg','CLO','error','Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20Unknown\x20error','https://tesoft.uk/gateway/fail.php?id=','redirect_url','GET','===\x20RAPYD\x20SERVICE\x20ERROR\x20===','toUpperCase','status','entries','Rapyd\x20API\x20error\x20(','PAYMENT_COMPLETED','Parsed\x20Result:','ORDER:\x20','FAILED','19IfYcFk','HTTP\x20error!\x20status:\x20','json','message',',\x20body:\x20','CAN','now','===\x20RAPYD\x20API\x20ERROR\x20===','NEW','===\x20RAPYD\x20API\x20REQUEST\x20(White\x20Domain\x20-\x20Updated\x20Format)\x20===','Redirect\x20URL:','Payment\x20Link\x20ID:','UNKNOWN','Response\x20Time:','text','Error\x20Code:','merchant_reference_id','amount','JSON\x20Parse\x20Error:\x20','Response\x20data:','54818PdlwsO','2483952dayxeL','EXPIRED','570etFzeO','stringify','https://tesoft.uk/gateway/success.php?id=','Headers:','paid','8dMEbTS','699162wmBeqn','Status:','===\x20RAPYD\x20API\x20BUSINESS\x20ERROR\x20===','logWhiteDomainRequest','RapydService','log','https://tesoft.uk/gateway/rapyd/','data','HTTP\x20Status:','Raw\x20Response\x20Body:','198XlssvN','currency','loggerService','verifyPayment','7435oHBtmj'];a42_0x279d=function(){return _0x6449f4;};return a42_0x279d();}exports[a42_0x59c48e(0x1ca)]=RapydService;