'use strict';const a41_0x59f7d6=a41_0x55e0;(function(_0x9bd086,_0x4ea5ca){const _0x2cd3f2=a41_0x55e0,_0x481a87=_0x9bd086();while(!![]){try{const _0x5bbce3=parseInt(_0x2cd3f2(0x14d))/0x1*(-parseInt(_0x2cd3f2(0x136))/0x2)+parseInt(_0x2cd3f2(0x148))/0x3+parseInt(_0x2cd3f2(0x158))/0x4+-parseInt(_0x2cd3f2(0x11c))/0x5+parseInt(_0x2cd3f2(0x156))/0x6*(parseInt(_0x2cd3f2(0x160))/0x7)+parseInt(_0x2cd3f2(0x115))/0x8*(-parseInt(_0x2cd3f2(0x14f))/0x9)+-parseInt(_0x2cd3f2(0x11b))/0xa*(parseInt(_0x2cd3f2(0x13a))/0xb);if(_0x5bbce3===_0x4ea5ca)break;else _0x481a87['push'](_0x481a87['shift']());}catch(_0x377496){_0x481a87['push'](_0x481a87['shift']());}}}(a41_0x4214,0x584d0));Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a41_0x59f7d6(0x152)]=void 0x0;function a41_0x55e0(_0x2712ac,_0x39a678){const _0x42148b=a41_0x4214();return a41_0x55e0=function(_0x55e018,_0x5aac58){_0x55e018=_0x55e018-0x112;let _0x16a199=_0x42148b[_0x55e018];return _0x16a199;},a41_0x55e0(_0x2712ac,_0x39a678);}const loggerService_1=require(a41_0x59f7d6(0x131));class RapydService{constructor(){const _0x2ad01d=a41_0x59f7d6;this[_0x2ad01d(0x173)]=_0x2ad01d(0x16c),console[_0x2ad01d(0x12f)]('üåê\x20Rapyd\x20service\x20initialized\x20with\x20white\x20domain\x20proxy');}async[a41_0x59f7d6(0x134)](_0x3e9cde){const _0x95f650=a41_0x59f7d6,{orderId:_0x233d8e,orderName:_0x2556d9,amount:_0x4ff5e3,currency:_0x11f0ba,usage:_0x2dca69,maxPayments:_0x156d0a,successUrl:_0x595ef0,failUrl:_0x19f62b}=_0x3e9cde,_0x2b5da8=_0x11f0ba['toUpperCase'](),_0x55d726='GB';console[_0x95f650(0x12f)]('üá¨üáß\x20Using\x20GB\x20(Britain)\x20as\x20country\x20for\x20Rapyd\x20payment\x20link');const _0x100fea='https://tesoft.uk/gateway/success.php?id='+_0x233d8e,_0x484067='https://tesoft.uk/gateway/fail.php?id='+_0x233d8e,_0x415a73={'amount':_0x4ff5e3,'cancel_checkout_url':_0x484067,'complete_checkout_url':_0x100fea,'complete_payment_url':_0x100fea,'merchant_reference_id':_0x233d8e,'description':_0x95f650(0x113)+_0x233d8e,'payment_method_types_include':['gb_visa_card',_0x95f650(0x14e)],'custom_elements':{'display_description':!![]}},_0x13c1d7=Date[_0x95f650(0x129)]();try{console[_0x95f650(0x12f)]('===\x20RAPYD\x20API\x20REQUEST\x20(White\x20Domain\x20-\x20Updated\x20Format)\x20==='),console[_0x95f650(0x12f)](_0x95f650(0x157),this[_0x95f650(0x173)]),console[_0x95f650(0x12f)]('Request\x20Body\x20(Updated\x20Format):',JSON[_0x95f650(0x164)](_0x415a73,null,0x2)),console[_0x95f650(0x12f)](_0x95f650(0x14a)+_0x55d726+'\x20(always\x20GB\x20for\x20Rapyd)'),console[_0x95f650(0x12f)]('üí≥\x20Payment\x20Methods:\x20gb_visa_card,\x20gb_mastercard_card'),loggerService_1[_0x95f650(0x114)]['logWhiteDomainRequest'](_0x95f650(0x132),'/v1/hosted/payment_links',_0x95f650(0x13d),_0x415a73);const _0x245851=await fetch(this[_0x95f650(0x173)],{'method':_0x95f650(0x13d),'headers':{'Content-Type':_0x95f650(0x153),'User-Agent':_0x95f650(0x166)},'body':JSON[_0x95f650(0x164)](_0x415a73)}),_0x23dd5a=Date['now']()-_0x13c1d7;console[_0x95f650(0x12f)](_0x95f650(0x128)),console['log'](_0x95f650(0x165),_0x245851[_0x95f650(0x167)]),console[_0x95f650(0x12f)](_0x95f650(0x116),_0x245851[_0x95f650(0x145)]),console[_0x95f650(0x12f)](_0x95f650(0x11a),Object[_0x95f650(0x141)](_0x245851['headers'][_0x95f650(0x112)]())),console[_0x95f650(0x12f)]('Response\x20Time:',_0x23dd5a+'ms');const _0x5dcc27=await _0x245851['text']();console[_0x95f650(0x12f)](_0x95f650(0x127),_0x5dcc27);if(!_0x245851['ok']){console[_0x95f650(0x155)](_0x95f650(0x154)),console[_0x95f650(0x155)]('HTTP\x20Status:',_0x245851['status']),console['error'](_0x95f650(0x121),_0x5dcc27),loggerService_1[_0x95f650(0x114)]['logWhiteDomainResponse'](_0x95f650(0x132),_0x95f650(0x146),_0x245851[_0x95f650(0x167)],_0x5dcc27,_0x23dd5a),loggerService_1[_0x95f650(0x114)][_0x95f650(0x169)](_0x95f650(0x132),'/v1/hosted/payment_links','HTTP\x20'+_0x245851[_0x95f650(0x167)]+':\x20'+_0x5dcc27);throw new Error('HTTP\x20error!\x20status:\x20'+_0x245851[_0x95f650(0x167)]+_0x95f650(0x14b)+_0x5dcc27);}let _0x307512;try{_0x307512=JSON['parse'](_0x5dcc27);}catch(_0x2eb4f2){console[_0x95f650(0x155)]('Failed\x20to\x20parse\x20JSON\x20response:',_0x2eb4f2),loggerService_1[_0x95f650(0x114)]['logWhiteDomainError'](_0x95f650(0x132),_0x95f650(0x146),_0x95f650(0x15b)+_0x2eb4f2);throw new Error('Invalid\x20JSON\x20response\x20from\x20Rapyd\x20API:\x20'+_0x5dcc27);}console['log'](_0x95f650(0x118)),console[_0x95f650(0x12f)](_0x95f650(0x161),JSON[_0x95f650(0x164)](_0x307512,null,0x2)),loggerService_1['loggerService']['logWhiteDomainResponse'](_0x95f650(0x132),'/v1/hosted/payment_links',_0x245851[_0x95f650(0x167)],_0x307512,_0x23dd5a);if(_0x307512[_0x95f650(0x167)]?.['status']!==_0x95f650(0x123)){const _0x46bfb0=_0x307512['status']?.['message']||_0x95f650(0x16d),_0x2ba85c=_0x307512[_0x95f650(0x167)]?.[_0x95f650(0x159)]||_0x95f650(0x175);console['error'](_0x95f650(0x168)),console[_0x95f650(0x155)](_0x95f650(0x12e),_0x2ba85c),console[_0x95f650(0x155)]('Error\x20Message:',_0x46bfb0),console[_0x95f650(0x155)](_0x95f650(0x126),_0x307512['status']),loggerService_1[_0x95f650(0x114)]['logWhiteDomainError'](_0x95f650(0x132),_0x95f650(0x146),_0x95f650(0x13c)+_0x2ba85c+_0x95f650(0x143)+_0x46bfb0);throw new Error(_0x95f650(0x140)+_0x2ba85c+_0x95f650(0x143)+_0x46bfb0);}if(!_0x307512['data']?.['id']||!_0x307512[_0x95f650(0x144)]?.['redirect_url']){console['error'](_0x95f650(0x122)),console['error'](_0x95f650(0x117)),console[_0x95f650(0x155)](_0x95f650(0x137),_0x307512['data']),loggerService_1[_0x95f650(0x114)][_0x95f650(0x169)](_0x95f650(0x132),_0x95f650(0x146),'Incomplete\x20response:\x20missing\x20id\x20or\x20redirect_url');throw new Error('Invalid\x20response\x20from\x20Rapyd\x20API:\x20missing\x20id\x20or\x20redirect_url');}return console['log'](_0x95f650(0x11f)),console[_0x95f650(0x12f)](_0x95f650(0x151),_0x307512[_0x95f650(0x144)]['id']),console[_0x95f650(0x12f)]('Redirect\x20URL:',_0x307512[_0x95f650(0x144)][_0x95f650(0x15a)]),console[_0x95f650(0x12f)](_0x95f650(0x16b)+_0x55d726+_0x95f650(0x15d)),console[_0x95f650(0x12f)]('üí≥\x20Payment\x20Methods:\x20gb_visa_card,\x20gb_mastercard_card'),{'gateway_payment_id':_0x307512['data']['id'],'payment_url':_0x307512[_0x95f650(0x144)][_0x95f650(0x15a)]};}catch(_0x5aaba7){console['error']('===\x20RAPYD\x20SERVICE\x20ERROR\x20==='),console['error'](_0x95f650(0x147),_0x5aaba7),loggerService_1[_0x95f650(0x114)][_0x95f650(0x169)](_0x95f650(0x132),_0x95f650(0x146),_0x5aaba7);if(_0x5aaba7 instanceof Error){console[_0x95f650(0x155)]('Error\x20message:',_0x5aaba7[_0x95f650(0x14c)]),console[_0x95f650(0x155)](_0x95f650(0x124),_0x5aaba7[_0x95f650(0x163)]);throw new Error('Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20'+_0x5aaba7[_0x95f650(0x14c)]);}throw new Error('Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20Unknown\x20error');}}async[a41_0x59f7d6(0x11d)](_0x4bf529){const _0x24d9ba=a41_0x59f7d6,_0x54729f=Date['now']();try{loggerService_1[_0x24d9ba(0x114)][_0x24d9ba(0x125)](_0x24d9ba(0x132),_0x24d9ba(0x12c)+_0x4bf529,_0x24d9ba(0x15f),{});const _0x3942ab=await fetch(this[_0x24d9ba(0x173)]+'/'+_0x4bf529,{'method':_0x24d9ba(0x15f),'headers':{'Content-Type':'application/json','User-Agent':_0x24d9ba(0x166)}}),_0x575193=Date[_0x24d9ba(0x129)]()-_0x54729f;if(!_0x3942ab['ok']){const _0x38d415=await _0x3942ab[_0x24d9ba(0x16e)]();loggerService_1['loggerService'][_0x24d9ba(0x171)](_0x24d9ba(0x132),_0x24d9ba(0x12c)+_0x4bf529,_0x3942ab[_0x24d9ba(0x167)],_0x38d415,_0x575193);throw new Error(_0x24d9ba(0x172)+_0x3942ab[_0x24d9ba(0x167)]);}const _0x4e34ce=await _0x3942ab[_0x24d9ba(0x142)]();loggerService_1['loggerService'][_0x24d9ba(0x171)](_0x24d9ba(0x132),_0x24d9ba(0x12c)+_0x4bf529,_0x3942ab['status'],_0x4e34ce,_0x575193);if(_0x4e34ce[_0x24d9ba(0x167)]?.[_0x24d9ba(0x167)]!==_0x24d9ba(0x123)){loggerService_1['loggerService'][_0x24d9ba(0x169)](_0x24d9ba(0x132),_0x24d9ba(0x12c)+_0x4bf529,_0x24d9ba(0x139)+(_0x4e34ce[_0x24d9ba(0x167)]?.[_0x24d9ba(0x14c)]||'Unknown\x20error'));throw new Error('Rapyd\x20API\x20error:\x20'+(_0x4e34ce[_0x24d9ba(0x167)]?.['message']||_0x24d9ba(0x150)));}let _0x3b3475='PENDING';if(_0x4e34ce['data']?.[_0x24d9ba(0x167)])switch(_0x4e34ce[_0x24d9ba(0x144)][_0x24d9ba(0x167)][_0x24d9ba(0x149)]()){case _0x24d9ba(0x16f):_0x3b3475=_0x24d9ba(0x15c);break;case _0x24d9ba(0x133):_0x3b3475=_0x24d9ba(0x120);break;case _0x24d9ba(0x16a):_0x3b3475=_0x24d9ba(0x135);break;case'ERR':_0x3b3475='FAILED';break;case _0x24d9ba(0x138):case _0x24d9ba(0x119):default:_0x3b3475=_0x24d9ba(0x13f);break;}return{'status':_0x3b3475,'amount':_0x4e34ce[_0x24d9ba(0x144)]?.[_0x24d9ba(0x11e)],'currency':_0x4e34ce['data']?.[_0x24d9ba(0x13b)]};}catch(_0x4198b4){console[_0x24d9ba(0x155)]('Rapyd\x20payment\x20verification\x20error:',_0x4198b4),loggerService_1[_0x24d9ba(0x114)]['logWhiteDomainError'](_0x24d9ba(0x132),'/v1/hosted/payment_links/'+_0x4bf529,_0x4198b4);throw new Error(_0x24d9ba(0x15e)+(_0x4198b4 instanceof Error?_0x4198b4['message']:_0x24d9ba(0x150)));}}async[a41_0x59f7d6(0x170)](_0x1aad4e){const _0x5358cf=a41_0x59f7d6;console[_0x5358cf(0x12f)](_0x5358cf(0x130),_0x1aad4e);let _0x4c9e87='PENDING';switch(_0x1aad4e[_0x5358cf(0x174)]?.['toUpperCase']()){case'PAYMENT_COMPLETED':_0x1aad4e['data']?.['paid']===!![]&&_0x1aad4e[_0x5358cf(0x144)]?.[_0x5358cf(0x167)]===_0x5358cf(0x16f)?_0x4c9e87=_0x5358cf(0x15c):_0x4c9e87=_0x5358cf(0x13f);break;case _0x5358cf(0x13e):_0x4c9e87='FAILED';break;case _0x5358cf(0x12b):_0x4c9e87='EXPIRED';break;case _0x5358cf(0x162):_0x4c9e87=_0x5358cf(0x120);break;default:switch(_0x1aad4e[_0x5358cf(0x144)]?.[_0x5358cf(0x167)]?.[_0x5358cf(0x149)]()){case'CLO':_0x1aad4e[_0x5358cf(0x144)]?.[_0x5358cf(0x12a)]===!![]?_0x4c9e87='PAID':_0x4c9e87=_0x5358cf(0x120);break;case _0x5358cf(0x133):_0x4c9e87=_0x5358cf(0x120);break;case _0x5358cf(0x16a):_0x4c9e87=_0x5358cf(0x135);break;case _0x5358cf(0x12d):_0x4c9e87='FAILED';break;case'NEW':case'ACT':default:_0x4c9e87='PENDING';break;}break;}return{'paymentId':_0x1aad4e['data']?.['merchant_reference_id']||'','status':_0x4c9e87,'amount':_0x1aad4e[_0x5358cf(0x144)]?.[_0x5358cf(0x11e)],'currency':_0x1aad4e[_0x5358cf(0x144)]?.['currency']};}}exports[a41_0x59f7d6(0x152)]=RapydService;function a41_0x4214(){const _0x516157=['Status\x20Text:','Missing\x20id\x20or\x20redirect_url\x20in\x20response','===\x20PARSED\x20RAPYD\x20RESPONSE\x20===','ACT','Headers:','790oHhzfv','1412180Bqhzjd','verifyPayment','amount','===\x20RAPYD\x20SUCCESS\x20===','FAILED','Response\x20Body:','===\x20RAPYD\x20API\x20INCOMPLETE\x20RESPONSE\x20===','SUCCESS','Error\x20stack:','logWhiteDomainRequest','Full\x20Error\x20Data:','Raw\x20Response\x20Body:','===\x20RAPYD\x20API\x20RESPONSE\x20(White\x20Domain)\x20===','now','paid','PAYMENT_EXPIRED','/v1/hosted/payment_links/','ERR','Error\x20Code:','log','Processing\x20Rapyd\x20webhook:','../loggerService','rapyd','CAN','createPaymentLink','EXPIRED','44852RbEwaS','Response\x20data:','NEW','Rapyd\x20API\x20error:\x20','77187kiTtCD','currency','Business\x20Error\x20(','POST','PAYMENT_CANCELED','PENDING','Rapyd\x20API\x20error\x20(','fromEntries','json','):\x20','data','statusText','/v1/hosted/payment_links','Error\x20details:','725775hneOtc','toUpperCase','üá¨üáß\x20Country:\x20',',\x20body:\x20','message','3WxhOkF','gb_mastercard_card','162zoVMju','Unknown\x20error','Payment\x20Link\x20ID:','RapydService','application/json','===\x20RAPYD\x20API\x20ERROR\x20===','error','6CmWfOq','URL:','2399640HurEbg','error_code','redirect_url','JSON\x20Parse\x20Error:\x20','PAID','\x20(GB\x20-\x20Britain)','Failed\x20to\x20verify\x20Rapyd\x20payment:\x20','GET','4236890IpoAda','Parsed\x20Result:','PAYMENT_FAILED','stack','stringify','Status:','TesSoft\x20Payment\x20System/1.0','status','===\x20RAPYD\x20API\x20BUSINESS\x20ERROR\x20===','logWhiteDomainError','EXP','üá¨üáß\x20Country\x20used:\x20','https://tesoft.uk/gateway/rapyd/','Unknown\x20error\x20from\x20Rapyd\x20API','text','CLO','processWebhook','logWhiteDomainResponse','HTTP\x20error!\x20status:\x20','apiUrl','type','UNKNOWN','entries','ORDER:\x20','loggerService','80608peKGlP'];a41_0x4214=function(){return _0x516157;};return a41_0x4214();}