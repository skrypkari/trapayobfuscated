'use strict';const a45_0x2deac6=a45_0x3951;(function(_0x5a5f66,_0x102654){const _0xa7556b=a45_0x3951,_0x466e64=_0x5a5f66();while(!![]){try{const _0xef27af=-parseInt(_0xa7556b(0x19b))/0x1+parseInt(_0xa7556b(0x13b))/0x2*(parseInt(_0xa7556b(0x18c))/0x3)+-parseInt(_0xa7556b(0x189))/0x4+-parseInt(_0xa7556b(0x131))/0x5*(-parseInt(_0xa7556b(0x16c))/0x6)+parseInt(_0xa7556b(0x18d))/0x7*(-parseInt(_0xa7556b(0x168))/0x8)+parseInt(_0xa7556b(0x130))/0x9*(parseInt(_0xa7556b(0x1a2))/0xa)+parseInt(_0xa7556b(0x173))/0xb*(parseInt(_0xa7556b(0x199))/0xc);if(_0xef27af===_0x102654)break;else _0x466e64['push'](_0x466e64['shift']());}catch(_0x411b94){_0x466e64['push'](_0x466e64['shift']());}}}(a45_0x5b91,0x2880f));Object[a45_0x2deac6(0x152)](exports,'__esModule',{'value':!![]}),exports['RapydService']=void 0x0;function a45_0x3951(_0x225887,_0xc1bacb){const _0x5b916a=a45_0x5b91();return a45_0x3951=function(_0x3951a5,_0x5312f9){_0x3951a5=_0x3951a5-0x129;let _0x3c5265=_0x5b916a[_0x3951a5];return _0x3c5265;},a45_0x3951(_0x225887,_0xc1bacb);}const loggerService_1=require(a45_0x2deac6(0x17d));class RapydService{constructor(){const _0x133219=a45_0x2deac6;this[_0x133219(0x165)]=_0x133219(0x14f),console['log']('üåê\x20Rapyd\x20service\x20initialized\x20with\x20white\x20domain\x20proxy');}async[a45_0x2deac6(0x156)](_0x5eba21){const _0x2182fb=a45_0x2deac6,{orderId:_0x4c6481,orderName:_0x5ed8e9,amount:_0x449afd,currency:_0xe81d41,usage:_0x295c5e,maxPayments:_0x593275,successUrl:_0x4bc1c2,failUrl:_0x1eaa36}=_0x5eba21,_0x59b594=_0xe81d41[_0x2182fb(0x141)](),_0x20e4fe='GB';console[_0x2182fb(0x167)](_0x2182fb(0x147));const _0x36c7db=_0x2182fb(0x150)+_0x4c6481,_0x341d81=_0x2182fb(0x13a)+_0x4c6481,_0x1cded8={'amount':_0x449afd,'currency':_0x59b594,'cancel_checkout_url':_0x341d81,'complete_checkout_url':_0x36c7db,'complete_payment_url':_0x36c7db,'merchant_reference_id':_0x4c6481,'description':_0x2182fb(0x19a)+_0x4c6481,'country':'GB','payment_method_types_include':[_0x2182fb(0x193),_0x2182fb(0x16e)],'custom_elements':{'display_description':!![]}},_0x3d87e8=Date[_0x2182fb(0x177)]();try{console[_0x2182fb(0x167)](_0x2182fb(0x178)),console['log'](_0x2182fb(0x149),this[_0x2182fb(0x165)]),console[_0x2182fb(0x167)](_0x2182fb(0x15a),JSON[_0x2182fb(0x12b)](_0x1cded8,null,0x2)),console[_0x2182fb(0x167)](_0x2182fb(0x15c)+_0x20e4fe+_0x2182fb(0x195)),console[_0x2182fb(0x167)](_0x2182fb(0x185)),loggerService_1[_0x2182fb(0x18a)]['logWhiteDomainRequest'](_0x2182fb(0x159),'/v1/hosted/payment_links',_0x2182fb(0x16a),_0x1cded8);const _0x3979eb=await fetch(this[_0x2182fb(0x165)],{'method':_0x2182fb(0x16a),'headers':{'Content-Type':'application/json','User-Agent':_0x2182fb(0x172)},'body':JSON[_0x2182fb(0x12b)](_0x1cded8)}),_0x4ed6c8=Date['now']()-_0x3d87e8;console[_0x2182fb(0x167)](_0x2182fb(0x12a)),console[_0x2182fb(0x167)]('Status:',_0x3979eb['status']),console[_0x2182fb(0x167)](_0x2182fb(0x13f),_0x3979eb[_0x2182fb(0x145)]),console['log'](_0x2182fb(0x194),Object[_0x2182fb(0x176)](_0x3979eb['headers']['entries']())),console[_0x2182fb(0x167)](_0x2182fb(0x162),_0x4ed6c8+'ms');const _0x91f84=await _0x3979eb['text']();console['log'](_0x2182fb(0x190),_0x91f84);if(!_0x3979eb['ok']){console[_0x2182fb(0x15d)](_0x2182fb(0x196)),console[_0x2182fb(0x15d)](_0x2182fb(0x157),_0x3979eb['status']),console[_0x2182fb(0x15d)]('Response\x20Body:',_0x91f84),loggerService_1['loggerService']['logWhiteDomainResponse'](_0x2182fb(0x159),'/v1/hosted/payment_links',_0x3979eb[_0x2182fb(0x183)],_0x91f84,_0x4ed6c8),loggerService_1[_0x2182fb(0x18a)]['logWhiteDomainError'](_0x2182fb(0x159),'/v1/hosted/payment_links',_0x2182fb(0x13c)+_0x3979eb['status']+':\x20'+_0x91f84);throw new Error(_0x2182fb(0x17b)+_0x3979eb[_0x2182fb(0x183)]+_0x2182fb(0x142)+_0x91f84);}let _0x3b7ae2;try{_0x3b7ae2=JSON[_0x2182fb(0x151)](_0x91f84);}catch(_0x2029ba){console[_0x2182fb(0x15d)](_0x2182fb(0x136),_0x2029ba),loggerService_1[_0x2182fb(0x18a)][_0x2182fb(0x12d)](_0x2182fb(0x159),'/v1/hosted/payment_links','JSON\x20Parse\x20Error:\x20'+_0x2029ba);throw new Error('Invalid\x20JSON\x20response\x20from\x20Rapyd\x20API:\x20'+_0x91f84);}console[_0x2182fb(0x167)](_0x2182fb(0x16d)),console[_0x2182fb(0x167)](_0x2182fb(0x180),JSON[_0x2182fb(0x12b)](_0x3b7ae2,null,0x2)),loggerService_1[_0x2182fb(0x18a)][_0x2182fb(0x146)](_0x2182fb(0x159),_0x2182fb(0x17e),_0x3979eb['status'],_0x3b7ae2,_0x4ed6c8);if(_0x3b7ae2[_0x2182fb(0x183)]?.[_0x2182fb(0x183)]!==_0x2182fb(0x15f)){const _0x5afc67=_0x3b7ae2[_0x2182fb(0x183)]?.['message']||_0x2182fb(0x155),_0x4df5c2=_0x3b7ae2['status']?.[_0x2182fb(0x158)]||'UNKNOWN';console[_0x2182fb(0x15d)](_0x2182fb(0x174)),console[_0x2182fb(0x15d)](_0x2182fb(0x153),_0x4df5c2),console[_0x2182fb(0x15d)](_0x2182fb(0x184),_0x5afc67),console[_0x2182fb(0x15d)](_0x2182fb(0x166),_0x3b7ae2[_0x2182fb(0x183)]),loggerService_1[_0x2182fb(0x18a)][_0x2182fb(0x12d)](_0x2182fb(0x159),'/v1/hosted/payment_links',_0x2182fb(0x18f)+_0x4df5c2+_0x2182fb(0x18e)+_0x5afc67);throw new Error(_0x2182fb(0x187)+_0x4df5c2+_0x2182fb(0x18e)+_0x5afc67);}if(!_0x3b7ae2[_0x2182fb(0x161)]?.['id']||!_0x3b7ae2[_0x2182fb(0x161)]?.[_0x2182fb(0x14e)]){console[_0x2182fb(0x15d)](_0x2182fb(0x135)),console[_0x2182fb(0x15d)](_0x2182fb(0x1a1)),console[_0x2182fb(0x15d)](_0x2182fb(0x148),_0x3b7ae2['data']),loggerService_1[_0x2182fb(0x18a)]['logWhiteDomainError'](_0x2182fb(0x159),_0x2182fb(0x17e),_0x2182fb(0x14a));throw new Error(_0x2182fb(0x171));}return console[_0x2182fb(0x167)](_0x2182fb(0x192)),console['log']('Payment\x20Link\x20ID:',_0x3b7ae2[_0x2182fb(0x161)]['id']),console['log'](_0x2182fb(0x12c),_0x3b7ae2[_0x2182fb(0x161)][_0x2182fb(0x14e)]),console[_0x2182fb(0x167)]('üá¨üáß\x20Country\x20used:\x20'+_0x20e4fe+_0x2182fb(0x13d)),console[_0x2182fb(0x167)](_0x2182fb(0x185)),{'gateway_payment_id':_0x3b7ae2[_0x2182fb(0x161)]['id'],'payment_url':_0x3b7ae2[_0x2182fb(0x161)][_0x2182fb(0x14e)]};}catch(_0x4bb665){console[_0x2182fb(0x15d)]('===\x20RAPYD\x20SERVICE\x20ERROR\x20==='),console[_0x2182fb(0x15d)](_0x2182fb(0x18b),_0x4bb665),loggerService_1[_0x2182fb(0x18a)][_0x2182fb(0x12d)](_0x2182fb(0x159),_0x2182fb(0x17e),_0x4bb665);if(_0x4bb665 instanceof Error){console[_0x2182fb(0x15d)](_0x2182fb(0x139),_0x4bb665[_0x2182fb(0x14c)]),console[_0x2182fb(0x15d)](_0x2182fb(0x160),_0x4bb665['stack']);throw new Error('Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20'+_0x4bb665[_0x2182fb(0x14c)]);}throw new Error(_0x2182fb(0x144));}}async[a45_0x2deac6(0x13e)](_0x498364){const _0x2d5d62=a45_0x2deac6,_0x55d1ea=Date['now']();try{loggerService_1[_0x2d5d62(0x18a)][_0x2d5d62(0x134)](_0x2d5d62(0x159),'/v1/hosted/payment_links/'+_0x498364,'GET',{});const _0x4cd6d0=await fetch(this[_0x2d5d62(0x165)]+'/'+_0x498364,{'method':'GET','headers':{'Content-Type':_0x2d5d62(0x179),'User-Agent':_0x2d5d62(0x172)}}),_0x30ab93=Date[_0x2d5d62(0x177)]()-_0x55d1ea;if(!_0x4cd6d0['ok']){const _0x329f37=await _0x4cd6d0[_0x2d5d62(0x175)]();loggerService_1[_0x2d5d62(0x18a)][_0x2d5d62(0x146)](_0x2d5d62(0x159),_0x2d5d62(0x19e)+_0x498364,_0x4cd6d0['status'],_0x329f37,_0x30ab93);throw new Error(_0x2d5d62(0x17b)+_0x4cd6d0[_0x2d5d62(0x183)]);}const _0x3a74b9=await _0x4cd6d0['json']();loggerService_1['loggerService'][_0x2d5d62(0x146)](_0x2d5d62(0x159),_0x2d5d62(0x19e)+_0x498364,_0x4cd6d0['status'],_0x3a74b9,_0x30ab93);if(_0x3a74b9[_0x2d5d62(0x183)]?.[_0x2d5d62(0x183)]!==_0x2d5d62(0x15f)){loggerService_1['loggerService'][_0x2d5d62(0x12d)](_0x2d5d62(0x159),_0x2d5d62(0x19e)+_0x498364,_0x2d5d62(0x137)+(_0x3a74b9[_0x2d5d62(0x183)]?.[_0x2d5d62(0x14c)]||_0x2d5d62(0x170)));throw new Error('Rapyd\x20API\x20error:\x20'+(_0x3a74b9[_0x2d5d62(0x183)]?.[_0x2d5d62(0x14c)]||_0x2d5d62(0x170)));}let _0x2e2f44=_0x2d5d62(0x191);if(_0x3a74b9[_0x2d5d62(0x161)]?.[_0x2d5d62(0x183)])switch(_0x3a74b9[_0x2d5d62(0x161)][_0x2d5d62(0x183)]['toUpperCase']()){case _0x2d5d62(0x154):_0x2e2f44=_0x2d5d62(0x182);break;case _0x2d5d62(0x169):_0x2e2f44=_0x2d5d62(0x16f);break;case _0x2d5d62(0x132):_0x2e2f44=_0x2d5d62(0x129);break;case _0x2d5d62(0x198):_0x2e2f44=_0x2d5d62(0x16f);break;case _0x2d5d62(0x16b):case _0x2d5d62(0x140):default:_0x2e2f44=_0x2d5d62(0x191);break;}return{'status':_0x2e2f44,'amount':_0x3a74b9[_0x2d5d62(0x161)]?.[_0x2d5d62(0x14b)],'currency':_0x3a74b9[_0x2d5d62(0x161)]?.['currency']};}catch(_0x517c3e){console[_0x2d5d62(0x15d)]('Rapyd\x20payment\x20verification\x20error:',_0x517c3e),loggerService_1['loggerService'][_0x2d5d62(0x12d)]('rapyd','/v1/hosted/payment_links/'+_0x498364,_0x517c3e);throw new Error(_0x2d5d62(0x133)+(_0x517c3e instanceof Error?_0x517c3e['message']:_0x2d5d62(0x170)));}}async[a45_0x2deac6(0x15e)](_0x36f5e0){const _0x1c7a94=a45_0x2deac6;console['log'](_0x1c7a94(0x188),_0x36f5e0);let _0x16585a='PENDING',_0x599b70;_0x36f5e0[_0x1c7a94(0x161)]?.[_0x1c7a94(0x164)]&&(_0x599b70=_0x36f5e0[_0x1c7a94(0x161)][_0x1c7a94(0x164)],console[_0x1c7a94(0x167)]('üí•\x20Rapyd\x20failure\x20message:\x20'+_0x599b70));switch(_0x36f5e0[_0x1c7a94(0x15b)]?.[_0x1c7a94(0x141)]()){case _0x1c7a94(0x17f):_0x36f5e0['data']?.['paid']===!![]&&_0x36f5e0[_0x1c7a94(0x161)]?.[_0x1c7a94(0x183)]==='CLO'?_0x16585a=_0x1c7a94(0x182):_0x16585a='PENDING';break;case _0x1c7a94(0x163):_0x16585a=_0x1c7a94(0x16f);break;case _0x1c7a94(0x138):_0x16585a=_0x1c7a94(0x129);break;case _0x1c7a94(0x186):_0x16585a=_0x1c7a94(0x16f);!_0x599b70&&_0x36f5e0[_0x1c7a94(0x161)]?.[_0x1c7a94(0x164)]&&(_0x599b70=_0x36f5e0['data'][_0x1c7a94(0x164)]);break;default:switch(_0x36f5e0[_0x1c7a94(0x161)]?.[_0x1c7a94(0x183)]?.[_0x1c7a94(0x141)]()){case _0x1c7a94(0x154):_0x36f5e0[_0x1c7a94(0x161)]?.[_0x1c7a94(0x17c)]===!![]?_0x16585a=_0x1c7a94(0x182):_0x16585a=_0x1c7a94(0x16f);break;case _0x1c7a94(0x169):_0x16585a=_0x1c7a94(0x16f);break;case'EXP':_0x16585a='EXPIRED';break;case _0x1c7a94(0x198):_0x16585a='FAILED';!_0x599b70&&_0x36f5e0[_0x1c7a94(0x161)]?.[_0x1c7a94(0x164)]&&(_0x599b70=_0x36f5e0['data'][_0x1c7a94(0x164)]);break;case _0x1c7a94(0x16b):case'ACT':default:_0x16585a=_0x1c7a94(0x191);break;}break;}const _0x8673cb={};return _0x36f5e0[_0x1c7a94(0x161)]?.[_0x1c7a94(0x197)]?.['last4']&&(_0x8673cb['cardLast4']=_0x36f5e0['data'][_0x1c7a94(0x197)][_0x1c7a94(0x19d)]),_0x36f5e0[_0x1c7a94(0x161)]?.[_0x1c7a94(0x19c)]&&(_0x8673cb['paymentMethod']=_0x36f5e0[_0x1c7a94(0x161)][_0x1c7a94(0x19c)]),_0x36f5e0[_0x1c7a94(0x161)]?.['error_code']&&(_0x8673cb['errorCode']=_0x36f5e0[_0x1c7a94(0x161)][_0x1c7a94(0x158)]),_0x36f5e0[_0x1c7a94(0x161)]?.[_0x1c7a94(0x1a0)]&&(_0x8673cb[_0x1c7a94(0x14d)]=_0x36f5e0[_0x1c7a94(0x161)][_0x1c7a94(0x1a0)]),console[_0x1c7a94(0x167)](_0x1c7a94(0x12e)+_0x16585a+_0x1c7a94(0x17a)+(_0x599b70||_0x1c7a94(0x19f))),{'paymentId':_0x36f5e0[_0x1c7a94(0x161)]?.[_0x1c7a94(0x12f)]||'','status':_0x16585a,'amount':_0x36f5e0[_0x1c7a94(0x161)]?.[_0x1c7a94(0x14b)],'currency':_0x36f5e0[_0x1c7a94(0x161)]?.[_0x1c7a94(0x181)],'failureMessage':_0x599b70,'additionalInfo':_0x8673cb};}}function a45_0x5b91(){const _0x567d6d=['123112GhnVRl','payment_method_type','last4','/v1/hosted/payment_links/','none','failure_code','Missing\x20id\x20or\x20redirect_url\x20in\x20response','10HisWpx','EXPIRED','===\x20RAPYD\x20API\x20RESPONSE\x20(White\x20Domain)\x20===','stringify','Redirect\x20URL:','logWhiteDomainError','üîÑ\x20Rapyd\x20webhook\x20processed:\x20status=','merchant_reference_id','2379069RJEOGD','175qUxIel','EXP','Failed\x20to\x20verify\x20Rapyd\x20payment:\x20','logWhiteDomainRequest','===\x20RAPYD\x20API\x20INCOMPLETE\x20RESPONSE\x20===','Failed\x20to\x20parse\x20JSON\x20response:','Rapyd\x20API\x20error:\x20','PAYMENT_EXPIRED','Error\x20message:','https://tesoft.uk/gateway/fail.php?id=','586VNxVds','HTTP\x20','\x20(GB\x20-\x20Britain)','verifyPayment','Status\x20Text:','ACT','toUpperCase',',\x20body:\x20','RapydService','Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20Unknown\x20error','statusText','logWhiteDomainResponse','üá¨üáß\x20Using\x20GB\x20(Britain)\x20as\x20country\x20for\x20Rapyd\x20payment\x20link','Response\x20data:','URL:','Incomplete\x20response:\x20missing\x20id\x20or\x20redirect_url','amount','message','failureCode','redirect_url','https://tesoft.uk/gateway/rapyd/','https://tesoft.uk/gateway/success.php?id=','parse','defineProperty','Error\x20Code:','CLO','Unknown\x20error\x20from\x20Rapyd\x20API','createPaymentLink','HTTP\x20Status:','error_code','rapyd','Request\x20Body\x20(Updated\x20Format):','type','üá¨üáß\x20Country:\x20','error','processWebhook','SUCCESS','Error\x20stack:','data','Response\x20Time:','PAYMENT_CANCELED','failure_message','apiUrl','Full\x20Error\x20Data:','log','16DDrlWC','CAN','POST','NEW','28230pSTRFP','===\x20PARSED\x20RAPYD\x20RESPONSE\x20===','gb_mastercard_card','FAILED','Unknown\x20error','Invalid\x20response\x20from\x20Rapyd\x20API:\x20missing\x20id\x20or\x20redirect_url','TesSoft\x20Payment\x20System/1.0','1005807QjSnyZ','===\x20RAPYD\x20API\x20BUSINESS\x20ERROR\x20===','text','fromEntries','now','===\x20RAPYD\x20API\x20REQUEST\x20(White\x20Domain\x20-\x20Updated\x20Format)\x20===','application/json',',\x20failureMessage=','HTTP\x20error!\x20status:\x20','paid','../loggerService','/v1/hosted/payment_links','PAYMENT_COMPLETED','Parsed\x20Result:','currency','PAID','status','Error\x20Message:','üí≥\x20Payment\x20Methods:\x20gb_visa_card,\x20gb_mastercard_card','PAYMENT_FAILED','Rapyd\x20API\x20error\x20(','Processing\x20Rapyd\x20webhook:','962232SCSUzH','loggerService','Error\x20details:','669LhsyTx','1156855mxpqvP','):\x20','Business\x20Error\x20(','Raw\x20Response\x20Body:','PENDING','===\x20RAPYD\x20SUCCESS\x20===','gb_visa_card','Headers:','\x20(always\x20GB\x20for\x20Rapyd)','===\x20RAPYD\x20API\x20ERROR\x20===','payment_method_data','ERR','48bnhAyD','ORDER:\x20'];a45_0x5b91=function(){return _0x567d6d;};return a45_0x5b91();}exports[a45_0x2deac6(0x143)]=RapydService;