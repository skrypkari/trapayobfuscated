'use strict';const a45_0x3e694a=a45_0x3ab2;(function(_0xb620a3,_0x501d69){const _0x127ef8=a45_0x3ab2,_0x39c114=_0xb620a3();while(!![]){try{const _0x1fbebf=parseInt(_0x127ef8(0x238))/0x1+parseInt(_0x127ef8(0x1f3))/0x2+-parseInt(_0x127ef8(0x22a))/0x3*(parseInt(_0x127ef8(0x1ec))/0x4)+parseInt(_0x127ef8(0x1f1))/0x5*(-parseInt(_0x127ef8(0x1bc))/0x6)+-parseInt(_0x127ef8(0x1fa))/0x7*(-parseInt(_0x127ef8(0x232))/0x8)+parseInt(_0x127ef8(0x1fc))/0x9+parseInt(_0x127ef8(0x1d7))/0xa;if(_0x1fbebf===_0x501d69)break;else _0x39c114['push'](_0x39c114['shift']());}catch(_0x17e1d8){_0x39c114['push'](_0x39c114['shift']());}}}(a45_0x5ba4,0x9fc57));Object[a45_0x3e694a(0x1cd)](exports,a45_0x3e694a(0x1e7),{'value':!![]}),exports[a45_0x3e694a(0x1f7)]=void 0x0;function a45_0x5ba4(){const _0x52405f=['Rapyd\x20payment\x20status\x20check\x20error:','redirect_url','===\x20RAPYD\x20SUCCESS\x20===','5iiRUXm','Missing\x20data\x20in\x20response','2209344aZzLUH','Raw\x20Response\x20Body:','logWhiteDomainError','gb_mastercard_card','RapydService','Headers:','logWhiteDomainRequest','417347vATFay','URL:','9951039lYbMPP','ORDER:\x20','Parsed\x20Result:','Unknown\x20error','üá¨üáß\x20Country\x20used:\x20','Paid:','FAILED','Response\x20Body:','payment_method','PAYMENT_COMPLETED','CAN','/v1/hosted/payment_links','errorCode','statusUrl','Failed\x20to\x20verify\x20Rapyd\x20payment:\x20','Full\x20Error\x20Data:','Response\x20Time:','none','Final\x20Status:','Invalid\x20response\x20from\x20Rapyd\x20status\x20API:\x20missing\x20data','PAID','https://tesoft.uk/gateway/rapyd/status.php','Incomplete\x20response:\x20missing\x20data','===\x20RAPYD\x20STATUS\x20SUCCESS\x20===','Rapyd\x20API\x20error\x20(','POST','üìä\x20Checking\x20Rapyd\x20payment\x20status\x20for:\x20','===\x20RAPYD\x20API\x20BUSINESS\x20ERROR\x20===','===\x20RAPYD\x20API\x20ERROR\x20===','Status\x20Code:','üåê\x20Rapyd\x20service\x20initialized\x20with\x20white\x20domain\x20proxy','Error\x20message:','ERR','üîÑ\x20Rapyd\x20webhook\x20processed:\x20status=','PENDING','üí•\x20Rapyd\x20failure\x20message:\x20','https://tesoft.uk/gateway/fail.php?id=','‚ùå\x20Payment\x20marked\x20as\x20FAILED\x20(status:\x20','Paid\x20At:','/status.php','entries','json','Error\x20stack:','Error\x20Code:','Error\x20details:','data','2157ySdUcg','paid','EXPIRED','rapyd','Failed\x20to\x20parse\x20JSON\x20response:','===\x20RAPYD\x20API\x20REQUEST\x20(White\x20Domain\x20-\x20Updated\x20Format)\x20===','merchant_reference_id','Rapyd\x20status\x20API\x20error:\x20','8OsyfiI','failureCode','error','===\x20PARSED\x20RAPYD\x20RESPONSE\x20===','TesSoft\x20Payment\x20System/1.0','payment_method_data','96335maPqpb','HTTP\x20Status:','Failed\x20to\x20check\x20Rapyd\x20payment\x20status:\x20','failure_code','CLO','loggerService','Missing\x20id\x20or\x20redirect_url\x20in\x20response','Rapyd\x20API\x20error:\x20','ACT','===\x20RAPYD\x20API\x20INCOMPLETE\x20RESPONSE\x20===','PAYMENT_FAILED','===\x20RAPYD\x20API\x20RESPONSE\x20(White\x20Domain)\x20===','Created\x20At:','NEW','application/json','status','Transaction\x20ID:','now','createPaymentLink','failure_message','SUCCESS','headers','created_at','apiUrl','6822246zeNoPM','):\x20','Unknown\x20error\x20from\x20Rapyd\x20status\x20API','Result:','log','text','Invalid\x20JSON\x20response\x20from\x20Rapyd\x20API:\x20','HTTP\x20','Request\x20Body\x20(Updated\x20Format):','/v1/hosted/payment_links/','Error\x20Message:','Redirect\x20URL:','message','https://tesoft.uk/gateway/rapyd/','parse','transaction_id','https://tesoft.uk/gateway/success.php?id=','defineProperty','stringify','‚è∞\x20Payment\x20marked\x20as\x20EXPIRED\x20(status:\x20','Status\x20Text:','error_code','üá¨üáß\x20Country:\x20','amount','üí≥\x20Payment\x20Methods:\x20gb_visa_card,\x20gb_mastercard_card','Payment\x20Link\x20ID:','HTTP\x20error!\x20status:\x20','2958740eGkjDZ','‚úÖ\x20Payment\x20marked\x20as\x20PAID\x20(paid\x20===\x20true)','paid_at','PAYMENT_CANCELED','response_code','Business\x20Error\x20(','../loggerService','last4','payment_method_type','Invalid\x20response\x20from\x20Rapyd\x20API:\x20missing\x20id\x20or\x20redirect_url','currency','type','===\x20RAPYD\x20STATUS\x20API\x20INCOMPLETE\x20RESPONSE\x20===','üìä\x20Status\x20check\x20URL:','toUpperCase','GET','__esModule','JSON\x20Parse\x20Error:\x20','Response\x20data:','Status:','EXP','4844mhNbXY','logWhiteDomainResponse'];a45_0x5ba4=function(){return _0x52405f;};return a45_0x5ba4();}const loggerService_1=require(a45_0x3e694a(0x1dd));function a45_0x3ab2(_0x138f06,_0x2ef311){const _0x5ba44d=a45_0x5ba4();return a45_0x3ab2=function(_0x3ab226,_0x1280a5){_0x3ab226=_0x3ab226-0x1a9;let _0x1359a9=_0x5ba44d[_0x3ab226];return _0x1359a9;},a45_0x3ab2(_0x138f06,_0x2ef311);}class RapydService{constructor(){const _0x9a1517=a45_0x3e694a;this['apiUrl']=_0x9a1517(0x1c9),this[_0x9a1517(0x209)]=_0x9a1517(0x211),console[_0x9a1517(0x1c0)](_0x9a1517(0x21a)),console[_0x9a1517(0x1c0)](_0x9a1517(0x1e4),this[_0x9a1517(0x209)]);}async[a45_0x3e694a(0x1b6)](_0x5820db){const _0x382cfe=a45_0x3e694a,{orderId:_0x58c646,orderName:_0x556444,amount:_0x540325,currency:_0xa14e83,usage:_0x52c8f1,maxPayments:_0x56efef,successUrl:_0x349cde,failUrl:_0x4a4ecd}=_0x5820db,_0x5ae961=_0xa14e83[_0x382cfe(0x1e5)](),_0x6e0aca='GB';console[_0x382cfe(0x1c0)]('üá¨üáß\x20Using\x20GB\x20(Britain)\x20as\x20country\x20for\x20Rapyd\x20payment\x20link');const _0x360546=_0x382cfe(0x1cc)+_0x58c646,_0x28bdca=_0x382cfe(0x220)+_0x58c646,_0x147fdd={'amount':_0x540325,'currency':_0x5ae961,'cancel_checkout_url':_0x28bdca,'complete_checkout_url':_0x360546,'complete_payment_url':_0x360546,'merchant_reference_id':_0x58c646,'description':_0x382cfe(0x1fd)+_0x58c646,'country':'GB','payment_method_types_include':['gb_visa_card',_0x382cfe(0x1f6)],'custom_elements':{'display_description':!![]}},_0x120d4c=Date[_0x382cfe(0x1b5)]();try{console['log'](_0x382cfe(0x22f)),console['log'](_0x382cfe(0x1fb),this['apiUrl']),console[_0x382cfe(0x1c0)](_0x382cfe(0x1c4),JSON[_0x382cfe(0x1ce)](_0x147fdd,null,0x2)),console['log'](_0x382cfe(0x1d2)+_0x6e0aca+'\x20(always\x20GB\x20for\x20Rapyd)'),console[_0x382cfe(0x1c0)](_0x382cfe(0x1d4)),loggerService_1[_0x382cfe(0x1a9)][_0x382cfe(0x1f9)](_0x382cfe(0x22d),'/v1/hosted/payment_links',_0x382cfe(0x215),_0x147fdd);const _0x337cb5=await fetch(this[_0x382cfe(0x1bb)],{'method':_0x382cfe(0x215),'headers':{'Content-Type':_0x382cfe(0x1b2),'User-Agent':_0x382cfe(0x236)},'body':JSON[_0x382cfe(0x1ce)](_0x147fdd)}),_0x16451f=Date[_0x382cfe(0x1b5)]()-_0x120d4c;console[_0x382cfe(0x1c0)](_0x382cfe(0x1af)),console[_0x382cfe(0x1c0)](_0x382cfe(0x1ea),_0x337cb5['status']),console[_0x382cfe(0x1c0)](_0x382cfe(0x1d0),_0x337cb5['statusText']),console[_0x382cfe(0x1c0)](_0x382cfe(0x1f8),Object['fromEntries'](_0x337cb5[_0x382cfe(0x1b9)][_0x382cfe(0x224)]())),console[_0x382cfe(0x1c0)](_0x382cfe(0x20c),_0x16451f+'ms');const _0x35cf90=await _0x337cb5[_0x382cfe(0x1c1)]();console['log'](_0x382cfe(0x1f4),_0x35cf90);if(!_0x337cb5['ok']){console[_0x382cfe(0x234)](_0x382cfe(0x218)),console[_0x382cfe(0x234)](_0x382cfe(0x239),_0x337cb5[_0x382cfe(0x1b3)]),console['error'](_0x382cfe(0x203),_0x35cf90),loggerService_1[_0x382cfe(0x1a9)]['logWhiteDomainResponse']('rapyd',_0x382cfe(0x207),_0x337cb5[_0x382cfe(0x1b3)],_0x35cf90,_0x16451f),loggerService_1[_0x382cfe(0x1a9)][_0x382cfe(0x1f5)](_0x382cfe(0x22d),'/v1/hosted/payment_links','HTTP\x20'+_0x337cb5[_0x382cfe(0x1b3)]+':\x20'+_0x35cf90);throw new Error(_0x382cfe(0x1d6)+_0x337cb5[_0x382cfe(0x1b3)]+',\x20body:\x20'+_0x35cf90);}let _0x1c0790;try{_0x1c0790=JSON[_0x382cfe(0x1ca)](_0x35cf90);}catch(_0x4e2d2d){console[_0x382cfe(0x234)]('Failed\x20to\x20parse\x20JSON\x20response:',_0x4e2d2d),loggerService_1[_0x382cfe(0x1a9)][_0x382cfe(0x1f5)](_0x382cfe(0x22d),_0x382cfe(0x207),_0x382cfe(0x1e8)+_0x4e2d2d);throw new Error(_0x382cfe(0x1c2)+_0x35cf90);}console['log'](_0x382cfe(0x235)),console[_0x382cfe(0x1c0)](_0x382cfe(0x1fe),JSON[_0x382cfe(0x1ce)](_0x1c0790,null,0x2)),loggerService_1[_0x382cfe(0x1a9)][_0x382cfe(0x1ed)](_0x382cfe(0x22d),_0x382cfe(0x207),_0x337cb5['status'],_0x1c0790,_0x16451f);if(_0x1c0790[_0x382cfe(0x1b3)]?.[_0x382cfe(0x1b3)]!==_0x382cfe(0x1b8)){const _0x1fb9a5=_0x1c0790[_0x382cfe(0x1b3)]?.[_0x382cfe(0x1c8)]||'Unknown\x20error\x20from\x20Rapyd\x20API',_0x5d3526=_0x1c0790[_0x382cfe(0x1b3)]?.[_0x382cfe(0x1d1)]||'UNKNOWN';console[_0x382cfe(0x234)](_0x382cfe(0x217)),console[_0x382cfe(0x234)](_0x382cfe(0x227),_0x5d3526),console['error'](_0x382cfe(0x1c6),_0x1fb9a5),console[_0x382cfe(0x234)](_0x382cfe(0x20b),_0x1c0790[_0x382cfe(0x1b3)]),loggerService_1['loggerService'][_0x382cfe(0x1f5)](_0x382cfe(0x22d),'/v1/hosted/payment_links',_0x382cfe(0x1dc)+_0x5d3526+_0x382cfe(0x1bd)+_0x1fb9a5);throw new Error(_0x382cfe(0x214)+_0x5d3526+_0x382cfe(0x1bd)+_0x1fb9a5);}if(!_0x1c0790[_0x382cfe(0x229)]?.['id']||!_0x1c0790[_0x382cfe(0x229)]?.['redirect_url']){console[_0x382cfe(0x234)](_0x382cfe(0x1ad)),console[_0x382cfe(0x234)](_0x382cfe(0x1aa)),console[_0x382cfe(0x234)](_0x382cfe(0x1e9),_0x1c0790[_0x382cfe(0x229)]),loggerService_1[_0x382cfe(0x1a9)][_0x382cfe(0x1f5)](_0x382cfe(0x22d),_0x382cfe(0x207),'Incomplete\x20response:\x20missing\x20id\x20or\x20redirect_url');throw new Error(_0x382cfe(0x1e0));}return console['log'](_0x382cfe(0x1f0)),console[_0x382cfe(0x1c0)](_0x382cfe(0x1d5),_0x1c0790[_0x382cfe(0x229)]['id']),console[_0x382cfe(0x1c0)](_0x382cfe(0x1c7),_0x1c0790['data'][_0x382cfe(0x1ef)]),console[_0x382cfe(0x1c0)](_0x382cfe(0x200)+_0x6e0aca+'\x20(GB\x20-\x20Britain)'),console[_0x382cfe(0x1c0)](_0x382cfe(0x1d4)),{'gateway_payment_id':_0x1c0790['data']['id'],'payment_url':_0x1c0790['data'][_0x382cfe(0x1ef)]};}catch(_0x3a831e){console[_0x382cfe(0x234)]('===\x20RAPYD\x20SERVICE\x20ERROR\x20==='),console[_0x382cfe(0x234)](_0x382cfe(0x228),_0x3a831e),loggerService_1[_0x382cfe(0x1a9)][_0x382cfe(0x1f5)]('rapyd','/v1/hosted/payment_links',_0x3a831e);if(_0x3a831e instanceof Error){console['error'](_0x382cfe(0x21b),_0x3a831e[_0x382cfe(0x1c8)]),console[_0x382cfe(0x234)](_0x382cfe(0x226),_0x3a831e['stack']);throw new Error('Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20'+_0x3a831e[_0x382cfe(0x1c8)]);}throw new Error('Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20Unknown\x20error');}}async['checkPaymentStatus'](_0x3345d9){const _0x4d5952=a45_0x3e694a,_0xdcbabf=Date[_0x4d5952(0x1b5)]();try{console[_0x4d5952(0x1c0)](_0x4d5952(0x216)+_0x3345d9),loggerService_1[_0x4d5952(0x1a9)][_0x4d5952(0x1f9)](_0x4d5952(0x22d),_0x4d5952(0x223),'GET',{'payment':_0x3345d9});const _0x3e8512=await fetch(this[_0x4d5952(0x209)]+'?payment='+_0x3345d9,{'method':'GET','headers':{'Content-Type':_0x4d5952(0x1b2),'Accept':_0x4d5952(0x1b2),'User-Agent':'TesSoft\x20Payment\x20System/1.0'}}),_0x437be8=Date[_0x4d5952(0x1b5)]()-_0xdcbabf;console[_0x4d5952(0x1c0)]('===\x20RAPYD\x20STATUS\x20CHECK\x20RESPONSE\x20==='),console['log'](_0x4d5952(0x1ea),_0x3e8512[_0x4d5952(0x1b3)]),console['log'](_0x4d5952(0x20c),_0x437be8+'ms');if(!_0x3e8512['ok']){const _0x2472e6=await _0x3e8512[_0x4d5952(0x1c1)]();console[_0x4d5952(0x234)](_0x4d5952(0x239),_0x3e8512[_0x4d5952(0x1b3)]),console['error'](_0x4d5952(0x203),_0x2472e6),loggerService_1[_0x4d5952(0x1a9)][_0x4d5952(0x1ed)](_0x4d5952(0x22d),_0x4d5952(0x223),_0x3e8512[_0x4d5952(0x1b3)],_0x2472e6,_0x437be8),loggerService_1['loggerService']['logWhiteDomainError'](_0x4d5952(0x22d),_0x4d5952(0x223),_0x4d5952(0x1c3)+_0x3e8512[_0x4d5952(0x1b3)]+':\x20'+_0x2472e6);throw new Error(_0x4d5952(0x1d6)+_0x3e8512[_0x4d5952(0x1b3)]);}const _0x23065a=await _0x3e8512[_0x4d5952(0x1c1)]();console['log'](_0x4d5952(0x1f4),_0x23065a);let _0x2a1b41;try{_0x2a1b41=JSON[_0x4d5952(0x1ca)](_0x23065a);}catch(_0x4f8a14){console[_0x4d5952(0x234)](_0x4d5952(0x22e),_0x4f8a14),loggerService_1[_0x4d5952(0x1a9)][_0x4d5952(0x1f5)](_0x4d5952(0x22d),_0x4d5952(0x223),_0x4d5952(0x1e8)+_0x4f8a14);throw new Error('Invalid\x20JSON\x20response\x20from\x20Rapyd\x20status\x20API:\x20'+_0x23065a);}loggerService_1['loggerService'][_0x4d5952(0x1ed)](_0x4d5952(0x22d),_0x4d5952(0x223),_0x3e8512['status'],_0x2a1b41,_0x437be8),console[_0x4d5952(0x1c0)]('===\x20PARSED\x20RAPYD\x20STATUS\x20RESPONSE\x20==='),console[_0x4d5952(0x1c0)](_0x4d5952(0x1bf),_0x2a1b41[_0x4d5952(0x1b3)][_0x4d5952(0x1b3)]),console[_0x4d5952(0x1c0)](_0x4d5952(0x219),_0x2a1b41[_0x4d5952(0x1b3)][_0x4d5952(0x1db)]),console[_0x4d5952(0x1c0)]('Payment\x20Status:',_0x2a1b41[_0x4d5952(0x229)]?.['status']),console[_0x4d5952(0x1c0)](_0x4d5952(0x201),_0x2a1b41[_0x4d5952(0x229)]?.[_0x4d5952(0x22b)]),console[_0x4d5952(0x1c0)]('Amount:',_0x2a1b41[_0x4d5952(0x229)]?.[_0x4d5952(0x1d3)]),console['log']('Currency:',_0x2a1b41[_0x4d5952(0x229)]?.['currency_code']);if(_0x2a1b41['status'][_0x4d5952(0x1b3)]!=='SUCCESS'){const _0x269a51=_0x2a1b41['status']['message']||_0x4d5952(0x1be);console[_0x4d5952(0x234)]('===\x20RAPYD\x20STATUS\x20API\x20ERROR\x20==='),console['error'](_0x4d5952(0x1c6),_0x269a51),loggerService_1[_0x4d5952(0x1a9)]['logWhiteDomainError']('rapyd',_0x4d5952(0x223),'Status\x20API\x20Error:\x20'+_0x269a51);throw new Error(_0x4d5952(0x231)+_0x269a51);}if(!_0x2a1b41['data']){console[_0x4d5952(0x234)](_0x4d5952(0x1e3)),console[_0x4d5952(0x234)](_0x4d5952(0x1f2)),loggerService_1[_0x4d5952(0x1a9)][_0x4d5952(0x1f5)]('rapyd',_0x4d5952(0x223),_0x4d5952(0x212));throw new Error(_0x4d5952(0x20f));}let _0x191cc0='PENDING';if(_0x2a1b41[_0x4d5952(0x229)][_0x4d5952(0x22b)]===!![])_0x191cc0=_0x4d5952(0x210),console[_0x4d5952(0x1c0)](_0x4d5952(0x1d8));else switch(_0x2a1b41['data'][_0x4d5952(0x1b3)]?.[_0x4d5952(0x1e5)]()){case'CAN':case'ERR':_0x191cc0=_0x4d5952(0x202),console[_0x4d5952(0x1c0)](_0x4d5952(0x221)+_0x2a1b41['data'][_0x4d5952(0x1b3)]+')');break;case _0x4d5952(0x1eb):_0x191cc0=_0x4d5952(0x22c),console[_0x4d5952(0x1c0)](_0x4d5952(0x1cf)+_0x2a1b41[_0x4d5952(0x229)][_0x4d5952(0x1b3)]+')');break;default:_0x191cc0=_0x4d5952(0x21e),console[_0x4d5952(0x1c0)]('üïê\x20Payment\x20remains\x20PENDING\x20(paid:\x20false,\x20status:\x20'+_0x2a1b41[_0x4d5952(0x229)]['status']+')');break;}const _0x10e728={'transactionId':_0x2a1b41[_0x4d5952(0x229)]['transaction_id'],'paymentMethod':_0x2a1b41['data'][_0x4d5952(0x204)],'paymentMethodType':_0x2a1b41[_0x4d5952(0x229)][_0x4d5952(0x1df)],'createdAt':_0x2a1b41['data'][_0x4d5952(0x1ba)],'paidAt':_0x2a1b41['data'][_0x4d5952(0x1d9)],'failureCode':_0x2a1b41['data'][_0x4d5952(0x23b)],'failureMessage':_0x2a1b41[_0x4d5952(0x229)][_0x4d5952(0x1b7)]};return console['log'](_0x4d5952(0x213)),console[_0x4d5952(0x1c0)](_0x4d5952(0x20e),_0x191cc0),console[_0x4d5952(0x1c0)]('Amount:',_0x2a1b41[_0x4d5952(0x229)]['amount'],_0x2a1b41[_0x4d5952(0x229)]['currency_code']),console['log'](_0x4d5952(0x1b4),_0x2a1b41[_0x4d5952(0x229)][_0x4d5952(0x1cb)]),console[_0x4d5952(0x1c0)](_0x4d5952(0x222),_0x2a1b41['data']['paid_at']||'not\x20paid'),console[_0x4d5952(0x1c0)](_0x4d5952(0x1b0),_0x2a1b41[_0x4d5952(0x229)][_0x4d5952(0x1ba)]),{'status':_0x191cc0,'amount':_0x2a1b41[_0x4d5952(0x229)][_0x4d5952(0x1d3)]||undefined,'currency':_0x2a1b41[_0x4d5952(0x229)]['currency_code']||undefined,'paymentDetails':_0x10e728};}catch(_0x53da68){console[_0x4d5952(0x234)](_0x4d5952(0x1ee),_0x53da68),loggerService_1[_0x4d5952(0x1a9)][_0x4d5952(0x1f5)](_0x4d5952(0x22d),_0x4d5952(0x223),_0x53da68);throw new Error(_0x4d5952(0x23a)+(_0x53da68 instanceof Error?_0x53da68[_0x4d5952(0x1c8)]:_0x4d5952(0x1ff)));}}async['verifyPayment'](_0xe2ffb2){const _0x316331=a45_0x3e694a,_0x3638c7=Date[_0x316331(0x1b5)]();try{loggerService_1[_0x316331(0x1a9)][_0x316331(0x1f9)](_0x316331(0x22d),_0x316331(0x1c5)+_0xe2ffb2,_0x316331(0x1e6),{});const _0x16debe=await fetch(this[_0x316331(0x1bb)]+'/'+_0xe2ffb2,{'method':_0x316331(0x1e6),'headers':{'Content-Type':'application/json','User-Agent':_0x316331(0x236)}}),_0x416142=Date['now']()-_0x3638c7;if(!_0x16debe['ok']){const _0x49cc36=await _0x16debe[_0x316331(0x1c1)]();loggerService_1[_0x316331(0x1a9)][_0x316331(0x1ed)](_0x316331(0x22d),'/v1/hosted/payment_links/'+_0xe2ffb2,_0x16debe[_0x316331(0x1b3)],_0x49cc36,_0x416142);throw new Error(_0x316331(0x1d6)+_0x16debe[_0x316331(0x1b3)]);}const _0x3f50c5=await _0x16debe[_0x316331(0x225)]();loggerService_1[_0x316331(0x1a9)][_0x316331(0x1ed)]('rapyd',_0x316331(0x1c5)+_0xe2ffb2,_0x16debe[_0x316331(0x1b3)],_0x3f50c5,_0x416142);if(_0x3f50c5[_0x316331(0x1b3)]?.['status']!==_0x316331(0x1b8)){loggerService_1[_0x316331(0x1a9)]['logWhiteDomainError'](_0x316331(0x22d),_0x316331(0x1c5)+_0xe2ffb2,_0x316331(0x1ab)+(_0x3f50c5[_0x316331(0x1b3)]?.['message']||_0x316331(0x1ff)));throw new Error(_0x316331(0x1ab)+(_0x3f50c5[_0x316331(0x1b3)]?.[_0x316331(0x1c8)]||'Unknown\x20error'));}let _0x55a54a='PENDING';if(_0x3f50c5[_0x316331(0x229)]?.[_0x316331(0x1b3)])switch(_0x3f50c5['data']['status'][_0x316331(0x1e5)]()){case _0x316331(0x23c):_0x55a54a=_0x316331(0x210);break;case _0x316331(0x206):_0x55a54a='FAILED';break;case _0x316331(0x1eb):_0x55a54a=_0x316331(0x22c);break;case _0x316331(0x21c):_0x55a54a=_0x316331(0x202);break;case _0x316331(0x1b1):case'ACT':default:_0x55a54a=_0x316331(0x21e);break;}return{'status':_0x55a54a,'amount':_0x3f50c5[_0x316331(0x229)]?.[_0x316331(0x1d3)],'currency':_0x3f50c5[_0x316331(0x229)]?.[_0x316331(0x1e1)]};}catch(_0x549894){console[_0x316331(0x234)]('Rapyd\x20payment\x20verification\x20error:',_0x549894),loggerService_1[_0x316331(0x1a9)][_0x316331(0x1f5)]('rapyd',_0x316331(0x1c5)+_0xe2ffb2,_0x549894);throw new Error(_0x316331(0x20a)+(_0x549894 instanceof Error?_0x549894[_0x316331(0x1c8)]:_0x316331(0x1ff)));}}async['processWebhook'](_0x26711c){const _0x5193ad=a45_0x3e694a;console[_0x5193ad(0x1c0)]('Processing\x20Rapyd\x20webhook:',_0x26711c);let _0x2875ff=_0x5193ad(0x21e),_0x31349d;_0x26711c[_0x5193ad(0x229)]?.[_0x5193ad(0x1b7)]&&(_0x31349d=_0x26711c[_0x5193ad(0x229)]['failure_message'],console[_0x5193ad(0x1c0)](_0x5193ad(0x21f)+_0x31349d));switch(_0x26711c[_0x5193ad(0x1e2)]?.[_0x5193ad(0x1e5)]()){case _0x5193ad(0x205):_0x26711c[_0x5193ad(0x229)]?.[_0x5193ad(0x22b)]===!![]&&_0x26711c[_0x5193ad(0x229)]?.[_0x5193ad(0x1b3)]==='CLO'?_0x2875ff=_0x5193ad(0x210):_0x2875ff='PENDING';break;case _0x5193ad(0x1da):_0x2875ff=_0x5193ad(0x202);break;case'PAYMENT_EXPIRED':_0x2875ff=_0x5193ad(0x22c);break;case _0x5193ad(0x1ae):_0x2875ff=_0x5193ad(0x202);!_0x31349d&&_0x26711c[_0x5193ad(0x229)]?.['failure_message']&&(_0x31349d=_0x26711c[_0x5193ad(0x229)][_0x5193ad(0x1b7)]);break;default:switch(_0x26711c['data']?.[_0x5193ad(0x1b3)]?.[_0x5193ad(0x1e5)]()){case'CLO':_0x26711c['data']?.['paid']===!![]?_0x2875ff=_0x5193ad(0x210):_0x2875ff=_0x5193ad(0x202);break;case'CAN':_0x2875ff=_0x5193ad(0x202);break;case'EXP':_0x2875ff=_0x5193ad(0x22c);break;case _0x5193ad(0x21c):_0x2875ff=_0x5193ad(0x202);!_0x31349d&&_0x26711c[_0x5193ad(0x229)]?.[_0x5193ad(0x1b7)]&&(_0x31349d=_0x26711c[_0x5193ad(0x229)][_0x5193ad(0x1b7)]);break;case'NEW':case _0x5193ad(0x1ac):default:_0x2875ff=_0x5193ad(0x21e);break;}break;}const _0x21ccbb={};return _0x26711c[_0x5193ad(0x229)]?.[_0x5193ad(0x237)]?.[_0x5193ad(0x1de)]&&(_0x21ccbb['cardLast4']=_0x26711c['data'][_0x5193ad(0x237)]['last4']),_0x26711c[_0x5193ad(0x229)]?.['payment_method_type']&&(_0x21ccbb['paymentMethod']=_0x26711c[_0x5193ad(0x229)][_0x5193ad(0x1df)]),_0x26711c['data']?.[_0x5193ad(0x1d1)]&&(_0x21ccbb[_0x5193ad(0x208)]=_0x26711c[_0x5193ad(0x229)][_0x5193ad(0x1d1)]),_0x26711c['data']?.[_0x5193ad(0x23b)]&&(_0x21ccbb[_0x5193ad(0x233)]=_0x26711c[_0x5193ad(0x229)][_0x5193ad(0x23b)]),console[_0x5193ad(0x1c0)](_0x5193ad(0x21d)+_0x2875ff+',\x20failureMessage='+(_0x31349d||_0x5193ad(0x20d))),{'paymentId':_0x26711c[_0x5193ad(0x229)]?.[_0x5193ad(0x230)]||'','status':_0x2875ff,'amount':_0x26711c['data']?.[_0x5193ad(0x1d3)],'currency':_0x26711c['data']?.[_0x5193ad(0x1e1)],'failureMessage':_0x31349d,'additionalInfo':_0x21ccbb};}}exports[a45_0x3e694a(0x1f7)]=RapydService;