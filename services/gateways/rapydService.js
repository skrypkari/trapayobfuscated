'use strict';function a42_0x1d9d(){const _0x40c78b=['Parsed\x20Result:','https://tesoft.uk/gateway/success.php?id=','application/json','Unknown\x20error\x20from\x20Rapyd\x20API','):\x20','243106sTjdND','Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20Unknown\x20error','PAYMENT_COMPLETED','3277645rRODwZ','Payment\x20Link\x20ID:','Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20','rapyd','headers','currency','Business\x20Error\x20(','Error\x20Message:','PAID','processWebhook','amount','Redirect\x20URL:','PENDING','logWhiteDomainError','type','Response\x20Body:','entries','EXP','verifyPayment','CLO','NEW','üí≥\x20Payment\x20Methods:\x20gb_visa_card,\x20gb_mastercard_card','===\x20RAPYD\x20SERVICE\x20ERROR\x20===','Error\x20details:','2935532nuQeaB','15856YALWIz','gb_visa_card','RapydService','JSON\x20Parse\x20Error:\x20','GET','../loggerService','HTTP\x20Status:','EXPIRED','===\x20PARSED\x20RAPYD\x20RESPONSE\x20===','status','log','Rapyd\x20payment\x20verification\x20error:','===\x20RAPYD\x20API\x20REQUEST\x20(White\x20Domain\x20-\x20Updated\x20Format)\x20===','5359528GBlDqQ','URL:',',\x20body:\x20','/v1/hosted/payment_links/','loggerService','message','129370nzkWov','redirect_url','408yqklon','https://tesoft.uk/gateway/fail.php?id=','üá¨üáß\x20Country\x20used:\x20','üåê\x20Rapyd\x20service\x20initialized\x20with\x20white\x20domain\x20proxy','TesSoft\x20Payment\x20System/1.0','981OQkDVA','json','createPaymentLink','17586itAtEO','error','Error\x20stack:','error_code','Rapyd\x20API\x20error\x20(','Headers:','===\x20RAPYD\x20API\x20RESPONSE\x20(White\x20Domain)\x20===','apiUrl','gb_mastercard_card','/v1/hosted/payment_links','\x20(always\x20GB\x20for\x20Rapyd)','FAILED','Rapyd\x20API\x20error:\x20','CAN','stringify','SUCCESS','PAYMENT_EXPIRED','text','ORDER:\x20','fromEntries','üá¨üáß\x20Using\x20GB\x20(Britain)\x20as\x20country\x20for\x20Rapyd\x20payment\x20link','toUpperCase','üá¨üáß\x20Country:\x20','Failed\x20to\x20parse\x20JSON\x20response:','Failed\x20to\x20verify\x20Rapyd\x20payment:\x20','80vRhzWY','PAYMENT_CANCELED','Error\x20Code:','ACT','PAYMENT_FAILED','===\x20RAPYD\x20API\x20INCOMPLETE\x20RESPONSE\x20===','ERR','now','HTTP\x20error!\x20status:\x20','Error\x20message:','paid','Status:','data','logWhiteDomainRequest','Missing\x20id\x20or\x20redirect_url\x20in\x20response','Status\x20Text:','Raw\x20Response\x20Body:','Unknown\x20error','POST','parse','logWhiteDomainResponse','merchant_reference_id','Request\x20Body\x20(Updated\x20Format):'];a42_0x1d9d=function(){return _0x40c78b;};return a42_0x1d9d();}const a42_0x3c70ae=a42_0x1dcd;(function(_0xf701eb,_0x3a9052){const _0x14415f=a42_0x1dcd,_0x40af0b=_0xf701eb();while(!![]){try{const _0xfee69=-parseInt(_0x14415f(0xcf))/0x1+-parseInt(_0x14415f(0xeb))/0x2*(parseInt(_0x14415f(0x92))/0x3)+-parseInt(_0x14415f(0xea))/0x4+-parseInt(_0x14415f(0xb3))/0x5*(-parseInt(_0x14415f(0x9a))/0x6)+parseInt(_0x14415f(0xd2))/0x7+parseInt(_0x14415f(0x8a))/0x8+-parseInt(_0x14415f(0x97))/0x9*(-parseInt(_0x14415f(0x90))/0xa);if(_0xfee69===_0x3a9052)break;else _0x40af0b['push'](_0x40af0b['shift']());}catch(_0x1c8dbe){_0x40af0b['push'](_0x40af0b['shift']());}}}(a42_0x1d9d,0x83d68));function a42_0x1dcd(_0x3be283,_0x2883ba){const _0x1d9dca=a42_0x1d9d();return a42_0x1dcd=function(_0x1dcd28,_0x2ae2ae){_0x1dcd28=_0x1dcd28-0x86;let _0x15833d=_0x1d9dca[_0x1dcd28];return _0x15833d;},a42_0x1dcd(_0x3be283,_0x2883ba);}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a42_0x3c70ae(0xed)]=void 0x0;const loggerService_1=require(a42_0x3c70ae(0xf0));class RapydService{constructor(){const _0x5d85b3=a42_0x3c70ae;this[_0x5d85b3(0xa1)]='https://tesoft.uk/gateway/rapyd/',console[_0x5d85b3(0x87)](_0x5d85b3(0x95));}async[a42_0x3c70ae(0x99)](_0xe5390d){const _0x2d1fa6=a42_0x3c70ae,{orderId:_0x4dd3fe,orderName:_0x1380b5,amount:_0x39bcec,currency:_0x343a71,usage:_0x204598,maxPayments:_0x4c1eac,successUrl:_0x1ce342,failUrl:_0x44b65a}=_0xe5390d,_0x13fe98=_0x343a71[_0x2d1fa6(0xaf)](),_0x12f0f5='GB';console['log'](_0x2d1fa6(0xae));const _0x4cfc87=_0x2d1fa6(0xcb)+_0x4dd3fe,_0x3204bd=_0x2d1fa6(0x93)+_0x4dd3fe,_0x5ad663={'amount':_0x39bcec,'cancel_checkout_url':_0x3204bd,'complete_checkout_url':_0x4cfc87,'complete_payment_url':_0x4cfc87,'merchant_reference_id':_0x4dd3fe,'description':_0x2d1fa6(0xac)+_0x4dd3fe,'payment_method_types_include':[_0x2d1fa6(0xec),_0x2d1fa6(0xa2)],'custom_elements':{'display_description':!![]}},_0x5ecb4a=Date[_0x2d1fa6(0xba)]();try{console[_0x2d1fa6(0x87)](_0x2d1fa6(0x89)),console[_0x2d1fa6(0x87)](_0x2d1fa6(0x8b),this['apiUrl']),console[_0x2d1fa6(0x87)](_0x2d1fa6(0xc9),JSON[_0x2d1fa6(0xa8)](_0x5ad663,null,0x2)),console[_0x2d1fa6(0x87)](_0x2d1fa6(0xb0)+_0x12f0f5+_0x2d1fa6(0xa4)),console['log'](_0x2d1fa6(0xe7)),loggerService_1[_0x2d1fa6(0x8e)][_0x2d1fa6(0xc0)](_0x2d1fa6(0xd5),_0x2d1fa6(0xa3),_0x2d1fa6(0xc5),_0x5ad663);const _0x93e220=await fetch(this['apiUrl'],{'method':'POST','headers':{'Content-Type':_0x2d1fa6(0xcc),'User-Agent':_0x2d1fa6(0x96)},'body':JSON[_0x2d1fa6(0xa8)](_0x5ad663)}),_0x22817a=Date[_0x2d1fa6(0xba)]()-_0x5ecb4a;console[_0x2d1fa6(0x87)](_0x2d1fa6(0xa0)),console[_0x2d1fa6(0x87)](_0x2d1fa6(0xbe),_0x93e220[_0x2d1fa6(0x86)]),console[_0x2d1fa6(0x87)](_0x2d1fa6(0xc2),_0x93e220['statusText']),console[_0x2d1fa6(0x87)](_0x2d1fa6(0x9f),Object[_0x2d1fa6(0xad)](_0x93e220[_0x2d1fa6(0xd6)][_0x2d1fa6(0xe2)]())),console[_0x2d1fa6(0x87)]('Response\x20Time:',_0x22817a+'ms');const _0x343730=await _0x93e220[_0x2d1fa6(0xab)]();console['log'](_0x2d1fa6(0xc3),_0x343730);if(!_0x93e220['ok']){console['error']('===\x20RAPYD\x20API\x20ERROR\x20==='),console[_0x2d1fa6(0x9b)](_0x2d1fa6(0xf1),_0x93e220[_0x2d1fa6(0x86)]),console[_0x2d1fa6(0x9b)](_0x2d1fa6(0xe1),_0x343730),loggerService_1[_0x2d1fa6(0x8e)][_0x2d1fa6(0xc7)](_0x2d1fa6(0xd5),_0x2d1fa6(0xa3),_0x93e220[_0x2d1fa6(0x86)],_0x343730,_0x22817a),loggerService_1[_0x2d1fa6(0x8e)]['logWhiteDomainError'](_0x2d1fa6(0xd5),_0x2d1fa6(0xa3),'HTTP\x20'+_0x93e220[_0x2d1fa6(0x86)]+':\x20'+_0x343730);throw new Error(_0x2d1fa6(0xbb)+_0x93e220[_0x2d1fa6(0x86)]+_0x2d1fa6(0x8c)+_0x343730);}let _0x47a700;try{_0x47a700=JSON[_0x2d1fa6(0xc6)](_0x343730);}catch(_0xf3fdcd){console[_0x2d1fa6(0x9b)](_0x2d1fa6(0xb1),_0xf3fdcd),loggerService_1[_0x2d1fa6(0x8e)]['logWhiteDomainError'](_0x2d1fa6(0xd5),_0x2d1fa6(0xa3),_0x2d1fa6(0xee)+_0xf3fdcd);throw new Error('Invalid\x20JSON\x20response\x20from\x20Rapyd\x20API:\x20'+_0x343730);}console[_0x2d1fa6(0x87)](_0x2d1fa6(0xf3)),console[_0x2d1fa6(0x87)](_0x2d1fa6(0xca),JSON['stringify'](_0x47a700,null,0x2)),loggerService_1['loggerService'][_0x2d1fa6(0xc7)]('rapyd','/v1/hosted/payment_links',_0x93e220[_0x2d1fa6(0x86)],_0x47a700,_0x22817a);if(_0x47a700[_0x2d1fa6(0x86)]?.[_0x2d1fa6(0x86)]!==_0x2d1fa6(0xa9)){const _0x958873=_0x47a700['status']?.[_0x2d1fa6(0x8f)]||_0x2d1fa6(0xcd),_0x3a32ba=_0x47a700[_0x2d1fa6(0x86)]?.[_0x2d1fa6(0x9d)]||'UNKNOWN';console[_0x2d1fa6(0x9b)]('===\x20RAPYD\x20API\x20BUSINESS\x20ERROR\x20==='),console[_0x2d1fa6(0x9b)](_0x2d1fa6(0xb5),_0x3a32ba),console[_0x2d1fa6(0x9b)](_0x2d1fa6(0xd9),_0x958873),console[_0x2d1fa6(0x9b)]('Full\x20Error\x20Data:',_0x47a700[_0x2d1fa6(0x86)]),loggerService_1[_0x2d1fa6(0x8e)]['logWhiteDomainError'](_0x2d1fa6(0xd5),_0x2d1fa6(0xa3),_0x2d1fa6(0xd8)+_0x3a32ba+_0x2d1fa6(0xce)+_0x958873);throw new Error(_0x2d1fa6(0x9e)+_0x3a32ba+_0x2d1fa6(0xce)+_0x958873);}if(!_0x47a700[_0x2d1fa6(0xbf)]?.['id']||!_0x47a700[_0x2d1fa6(0xbf)]?.[_0x2d1fa6(0x91)]){console[_0x2d1fa6(0x9b)](_0x2d1fa6(0xb8)),console[_0x2d1fa6(0x9b)](_0x2d1fa6(0xc1)),console[_0x2d1fa6(0x9b)]('Response\x20data:',_0x47a700['data']),loggerService_1[_0x2d1fa6(0x8e)][_0x2d1fa6(0xdf)](_0x2d1fa6(0xd5),_0x2d1fa6(0xa3),'Incomplete\x20response:\x20missing\x20id\x20or\x20redirect_url');throw new Error('Invalid\x20response\x20from\x20Rapyd\x20API:\x20missing\x20id\x20or\x20redirect_url');}return console['log']('===\x20RAPYD\x20SUCCESS\x20==='),console[_0x2d1fa6(0x87)](_0x2d1fa6(0xd3),_0x47a700[_0x2d1fa6(0xbf)]['id']),console[_0x2d1fa6(0x87)](_0x2d1fa6(0xdd),_0x47a700['data']['redirect_url']),console['log'](_0x2d1fa6(0x94)+_0x12f0f5+'\x20(GB\x20-\x20Britain)'),console[_0x2d1fa6(0x87)](_0x2d1fa6(0xe7)),{'gateway_payment_id':_0x47a700[_0x2d1fa6(0xbf)]['id'],'payment_url':_0x47a700[_0x2d1fa6(0xbf)][_0x2d1fa6(0x91)]};}catch(_0x4890c9){console['error'](_0x2d1fa6(0xe8)),console[_0x2d1fa6(0x9b)](_0x2d1fa6(0xe9),_0x4890c9),loggerService_1[_0x2d1fa6(0x8e)][_0x2d1fa6(0xdf)](_0x2d1fa6(0xd5),_0x2d1fa6(0xa3),_0x4890c9);if(_0x4890c9 instanceof Error){console[_0x2d1fa6(0x9b)](_0x2d1fa6(0xbc),_0x4890c9[_0x2d1fa6(0x8f)]),console[_0x2d1fa6(0x9b)](_0x2d1fa6(0x9c),_0x4890c9['stack']);throw new Error(_0x2d1fa6(0xd4)+_0x4890c9[_0x2d1fa6(0x8f)]);}throw new Error(_0x2d1fa6(0xd0));}}async[a42_0x3c70ae(0xe4)](_0x4f891e){const _0x4226b8=a42_0x3c70ae,_0x399a9b=Date[_0x4226b8(0xba)]();try{loggerService_1[_0x4226b8(0x8e)][_0x4226b8(0xc0)]('rapyd','/v1/hosted/payment_links/'+_0x4f891e,_0x4226b8(0xef),{});const _0x148867=await fetch(this[_0x4226b8(0xa1)]+'/'+_0x4f891e,{'method':_0x4226b8(0xef),'headers':{'Content-Type':_0x4226b8(0xcc),'User-Agent':_0x4226b8(0x96)}}),_0x53a194=Date[_0x4226b8(0xba)]()-_0x399a9b;if(!_0x148867['ok']){const _0x4b8827=await _0x148867[_0x4226b8(0xab)]();loggerService_1[_0x4226b8(0x8e)][_0x4226b8(0xc7)]('rapyd',_0x4226b8(0x8d)+_0x4f891e,_0x148867[_0x4226b8(0x86)],_0x4b8827,_0x53a194);throw new Error(_0x4226b8(0xbb)+_0x148867[_0x4226b8(0x86)]);}const _0x361588=await _0x148867[_0x4226b8(0x98)]();loggerService_1[_0x4226b8(0x8e)][_0x4226b8(0xc7)](_0x4226b8(0xd5),_0x4226b8(0x8d)+_0x4f891e,_0x148867[_0x4226b8(0x86)],_0x361588,_0x53a194);if(_0x361588['status']?.[_0x4226b8(0x86)]!==_0x4226b8(0xa9)){loggerService_1[_0x4226b8(0x8e)][_0x4226b8(0xdf)](_0x4226b8(0xd5),_0x4226b8(0x8d)+_0x4f891e,'Rapyd\x20API\x20error:\x20'+(_0x361588[_0x4226b8(0x86)]?.[_0x4226b8(0x8f)]||_0x4226b8(0xc4)));throw new Error(_0x4226b8(0xa6)+(_0x361588[_0x4226b8(0x86)]?.[_0x4226b8(0x8f)]||_0x4226b8(0xc4)));}let _0x2b70ba=_0x4226b8(0xde);if(_0x361588[_0x4226b8(0xbf)]?.['status'])switch(_0x361588[_0x4226b8(0xbf)]['status'][_0x4226b8(0xaf)]()){case'CLO':_0x2b70ba=_0x4226b8(0xda);break;case _0x4226b8(0xa7):_0x2b70ba=_0x4226b8(0xa5);break;case'EXP':_0x2b70ba=_0x4226b8(0xf2);break;case _0x4226b8(0xb9):_0x2b70ba=_0x4226b8(0xa5);break;case _0x4226b8(0xe6):case _0x4226b8(0xb6):default:_0x2b70ba=_0x4226b8(0xde);break;}return{'status':_0x2b70ba,'amount':_0x361588[_0x4226b8(0xbf)]?.[_0x4226b8(0xdc)],'currency':_0x361588[_0x4226b8(0xbf)]?.[_0x4226b8(0xd7)]};}catch(_0x30d88b){console[_0x4226b8(0x9b)](_0x4226b8(0x88),_0x30d88b),loggerService_1['loggerService'][_0x4226b8(0xdf)](_0x4226b8(0xd5),_0x4226b8(0x8d)+_0x4f891e,_0x30d88b);throw new Error(_0x4226b8(0xb2)+(_0x30d88b instanceof Error?_0x30d88b[_0x4226b8(0x8f)]:_0x4226b8(0xc4)));}}async[a42_0x3c70ae(0xdb)](_0x457181){const _0x563e2d=a42_0x3c70ae;console[_0x563e2d(0x87)]('Processing\x20Rapyd\x20webhook:',_0x457181);let _0x97a83a=_0x563e2d(0xde);switch(_0x457181[_0x563e2d(0xe0)]?.['toUpperCase']()){case _0x563e2d(0xd1):_0x457181[_0x563e2d(0xbf)]?.[_0x563e2d(0xbd)]===!![]&&_0x457181[_0x563e2d(0xbf)]?.[_0x563e2d(0x86)]===_0x563e2d(0xe5)?_0x97a83a='PAID':_0x97a83a=_0x563e2d(0xde);break;case _0x563e2d(0xb4):_0x97a83a=_0x563e2d(0xa5);break;case _0x563e2d(0xaa):_0x97a83a='EXPIRED';break;case _0x563e2d(0xb7):_0x97a83a=_0x563e2d(0xa5);break;default:switch(_0x457181[_0x563e2d(0xbf)]?.[_0x563e2d(0x86)]?.[_0x563e2d(0xaf)]()){case _0x563e2d(0xe5):_0x457181[_0x563e2d(0xbf)]?.[_0x563e2d(0xbd)]===!![]?_0x97a83a=_0x563e2d(0xda):_0x97a83a=_0x563e2d(0xa5);break;case _0x563e2d(0xa7):_0x97a83a=_0x563e2d(0xa5);break;case _0x563e2d(0xe3):_0x97a83a=_0x563e2d(0xf2);break;case _0x563e2d(0xb9):_0x97a83a=_0x563e2d(0xa5);break;case _0x563e2d(0xe6):case'ACT':default:_0x97a83a='PENDING';break;}break;}return{'paymentId':_0x457181['data']?.[_0x563e2d(0xc8)]||'','status':_0x97a83a,'amount':_0x457181['data']?.[_0x563e2d(0xdc)],'currency':_0x457181[_0x563e2d(0xbf)]?.[_0x563e2d(0xd7)]};}}exports[a42_0x3c70ae(0xed)]=RapydService;