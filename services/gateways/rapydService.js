'use strict';const a44_0x16de59=a44_0x526e;(function(_0x36f120,_0x59309f){const _0x163e64=a44_0x526e,_0x110a8e=_0x36f120();while(!![]){try{const _0x4f6cd8=-parseInt(_0x163e64(0x1b8))/0x1+parseInt(_0x163e64(0x206))/0x2*(-parseInt(_0x163e64(0x1df))/0x3)+parseInt(_0x163e64(0x1f9))/0x4+parseInt(_0x163e64(0x1bb))/0x5+parseInt(_0x163e64(0x1e2))/0x6+parseInt(_0x163e64(0x1a9))/0x7*(-parseInt(_0x163e64(0x1b9))/0x8)+-parseInt(_0x163e64(0x1d3))/0x9*(parseInt(_0x163e64(0x1c9))/0xa);if(_0x4f6cd8===_0x59309f)break;else _0x110a8e['push'](_0x110a8e['shift']());}catch(_0x4ac73b){_0x110a8e['push'](_0x110a8e['shift']());}}}(a44_0x2fa6,0xf4207));function a44_0x526e(_0x3a7f9e,_0x285abb){const _0x2fa6e4=a44_0x2fa6();return a44_0x526e=function(_0x526ef9,_0x1ada67){_0x526ef9=_0x526ef9-0x1a1;let _0x4ce4da=_0x2fa6e4[_0x526ef9];return _0x4ce4da;},a44_0x526e(_0x3a7f9e,_0x285abb);}Object[a44_0x16de59(0x211)](exports,a44_0x16de59(0x1ab),{'value':!![]}),exports['RapydService']=void 0x0;const loggerService_1=require(a44_0x16de59(0x1e8));class RapydService{constructor(){const _0x235108=a44_0x16de59;this[_0x235108(0x1d1)]=_0x235108(0x203),console[_0x235108(0x1b2)](_0x235108(0x1f3));}async[a44_0x16de59(0x1c7)](_0x185ada){const _0x57f4f0=a44_0x16de59,{orderId:_0x48a795,orderName:_0x28a9e8,amount:_0x433a11,currency:_0x46575a,usage:_0x5f24fe,maxPayments:_0x5e16f5,successUrl:_0x2c7b53,failUrl:_0x21be0f}=_0x185ada,_0x2b35e1=_0x46575a[_0x57f4f0(0x21c)](),_0x10872a='GB';console[_0x57f4f0(0x1b2)]('🇬🇧\x20Using\x20GB\x20(Britain)\x20as\x20country\x20for\x20Rapyd\x20payment\x20link');const _0x2d36aa=_0x57f4f0(0x1e7)+_0x48a795,_0x3bf83d=_0x57f4f0(0x1d9)+_0x48a795,_0x332b97={'amount':_0x433a11,'currency':_0x2b35e1,'cancel_checkout_url':_0x3bf83d,'complete_checkout_url':_0x2d36aa,'complete_payment_url':_0x2d36aa,'merchant_reference_id':_0x48a795,'description':_0x57f4f0(0x1c6)+_0x48a795,'country':'GB','payment_method_types_include':[_0x57f4f0(0x1be),_0x57f4f0(0x1b7)],'custom_elements':{'display_description':!![]}},_0x273c66=Date[_0x57f4f0(0x1e6)]();try{console[_0x57f4f0(0x1b2)](_0x57f4f0(0x201)),console['log'](_0x57f4f0(0x1a4),this[_0x57f4f0(0x1d1)]),console[_0x57f4f0(0x1b2)](_0x57f4f0(0x215),JSON[_0x57f4f0(0x20f)](_0x332b97,null,0x2)),console['log'](_0x57f4f0(0x1af)+_0x10872a+_0x57f4f0(0x1ac)),console[_0x57f4f0(0x1b2)](_0x57f4f0(0x1c4)),loggerService_1[_0x57f4f0(0x1cd)][_0x57f4f0(0x1c2)](_0x57f4f0(0x20d),'/v1/hosted/payment_links',_0x57f4f0(0x202),_0x332b97);const _0x2169c3=await fetch(this[_0x57f4f0(0x1d1)],{'method':_0x57f4f0(0x202),'headers':{'Content-Type':_0x57f4f0(0x1fa),'User-Agent':_0x57f4f0(0x209)},'body':JSON['stringify'](_0x332b97)}),_0x379a2c=Date[_0x57f4f0(0x1e6)]()-_0x273c66;console[_0x57f4f0(0x1b2)](_0x57f4f0(0x1f6)),console[_0x57f4f0(0x1b2)](_0x57f4f0(0x1e5),_0x2169c3[_0x57f4f0(0x207)]),console[_0x57f4f0(0x1b2)](_0x57f4f0(0x1fc),_0x2169c3[_0x57f4f0(0x1a3)]),console[_0x57f4f0(0x1b2)](_0x57f4f0(0x1d4),Object['fromEntries'](_0x2169c3[_0x57f4f0(0x1f4)][_0x57f4f0(0x1fd)]())),console['log'](_0x57f4f0(0x1d0),_0x379a2c+'ms');const _0x14d058=await _0x2169c3[_0x57f4f0(0x1ca)]();console[_0x57f4f0(0x1b2)](_0x57f4f0(0x1c3),_0x14d058);if(!_0x2169c3['ok']){console[_0x57f4f0(0x1dc)](_0x57f4f0(0x1ae)),console[_0x57f4f0(0x1dc)](_0x57f4f0(0x1f2),_0x2169c3['status']),console[_0x57f4f0(0x1dc)]('Response\x20Body:',_0x14d058),loggerService_1[_0x57f4f0(0x1cd)]['logWhiteDomainResponse'](_0x57f4f0(0x20d),_0x57f4f0(0x1a6),_0x2169c3['status'],_0x14d058,_0x379a2c),loggerService_1[_0x57f4f0(0x1cd)][_0x57f4f0(0x1c1)](_0x57f4f0(0x20d),'/v1/hosted/payment_links','HTTP\x20'+_0x2169c3['status']+':\x20'+_0x14d058);throw new Error(_0x57f4f0(0x213)+_0x2169c3['status']+_0x57f4f0(0x1eb)+_0x14d058);}let _0xd14c3d;try{_0xd14c3d=JSON[_0x57f4f0(0x1d7)](_0x14d058);}catch(_0x44853b){console['error'](_0x57f4f0(0x212),_0x44853b),loggerService_1[_0x57f4f0(0x1cd)]['logWhiteDomainError'](_0x57f4f0(0x20d),'/v1/hosted/payment_links',_0x57f4f0(0x1f0)+_0x44853b);throw new Error(_0x57f4f0(0x20e)+_0x14d058);}console[_0x57f4f0(0x1b2)]('===\x20PARSED\x20RAPYD\x20RESPONSE\x20==='),console[_0x57f4f0(0x1b2)](_0x57f4f0(0x1ec),JSON[_0x57f4f0(0x20f)](_0xd14c3d,null,0x2)),loggerService_1['loggerService']['logWhiteDomainResponse'](_0x57f4f0(0x20d),_0x57f4f0(0x1a6),_0x2169c3[_0x57f4f0(0x207)],_0xd14c3d,_0x379a2c);if(_0xd14c3d[_0x57f4f0(0x207)]?.['status']!==_0x57f4f0(0x1f1)){const _0x2de308=_0xd14c3d['status']?.['message']||_0x57f4f0(0x210),_0x2e63e4=_0xd14c3d[_0x57f4f0(0x207)]?.[_0x57f4f0(0x1e9)]||'UNKNOWN';console[_0x57f4f0(0x1dc)](_0x57f4f0(0x1e1)),console['error'](_0x57f4f0(0x217),_0x2e63e4),console[_0x57f4f0(0x1dc)](_0x57f4f0(0x1a8),_0x2de308),console[_0x57f4f0(0x1dc)]('Full\x20Error\x20Data:',_0xd14c3d['status']),loggerService_1[_0x57f4f0(0x1cd)][_0x57f4f0(0x1c1)](_0x57f4f0(0x20d),_0x57f4f0(0x1a6),_0x57f4f0(0x1bd)+_0x2e63e4+_0x57f4f0(0x1db)+_0x2de308);throw new Error(_0x57f4f0(0x1ea)+_0x2e63e4+'):\x20'+_0x2de308);}if(!_0xd14c3d[_0x57f4f0(0x20c)]?.['id']||!_0xd14c3d['data']?.[_0x57f4f0(0x1a2)]){console[_0x57f4f0(0x1dc)](_0x57f4f0(0x1d8)),console[_0x57f4f0(0x1dc)](_0x57f4f0(0x1cf)),console['error'](_0x57f4f0(0x1dd),_0xd14c3d[_0x57f4f0(0x20c)]),loggerService_1[_0x57f4f0(0x1cd)][_0x57f4f0(0x1c1)](_0x57f4f0(0x20d),_0x57f4f0(0x1a6),'Incomplete\x20response:\x20missing\x20id\x20or\x20redirect_url');throw new Error('Invalid\x20response\x20from\x20Rapyd\x20API:\x20missing\x20id\x20or\x20redirect_url');}return console['log'](_0x57f4f0(0x20a)),console['log'](_0x57f4f0(0x1bc),_0xd14c3d[_0x57f4f0(0x20c)]['id']),console[_0x57f4f0(0x1b2)](_0x57f4f0(0x1de),_0xd14c3d[_0x57f4f0(0x20c)]['redirect_url']),console[_0x57f4f0(0x1b2)](_0x57f4f0(0x205)+_0x10872a+_0x57f4f0(0x1a7)),console[_0x57f4f0(0x1b2)](_0x57f4f0(0x1c4)),{'gateway_payment_id':_0xd14c3d[_0x57f4f0(0x20c)]['id'],'payment_url':_0xd14c3d[_0x57f4f0(0x20c)][_0x57f4f0(0x1a2)]};}catch(_0x4a3ce0){console[_0x57f4f0(0x1dc)](_0x57f4f0(0x1b1)),console[_0x57f4f0(0x1dc)](_0x57f4f0(0x216),_0x4a3ce0),loggerService_1['loggerService'][_0x57f4f0(0x1c1)](_0x57f4f0(0x20d),_0x57f4f0(0x1a6),_0x4a3ce0);if(_0x4a3ce0 instanceof Error){console['error']('Error\x20message:',_0x4a3ce0['message']),console['error']('Error\x20stack:',_0x4a3ce0[_0x57f4f0(0x1e4)]);throw new Error(_0x57f4f0(0x1aa)+_0x4a3ce0[_0x57f4f0(0x1d2)]);}throw new Error(_0x57f4f0(0x1ed));}}async[a44_0x16de59(0x1b3)](_0x279fbd){const _0x315d8d=a44_0x16de59,_0x3868d4=Date[_0x315d8d(0x1e6)]();try{loggerService_1[_0x315d8d(0x1cd)][_0x315d8d(0x1c2)](_0x315d8d(0x20d),_0x315d8d(0x1b5)+_0x279fbd,_0x315d8d(0x1a1),{});const _0x39192d=await fetch(this[_0x315d8d(0x1d1)]+'/'+_0x279fbd,{'method':_0x315d8d(0x1a1),'headers':{'Content-Type':_0x315d8d(0x1fa),'User-Agent':_0x315d8d(0x209)}}),_0x152bc0=Date[_0x315d8d(0x1e6)]()-_0x3868d4;if(!_0x39192d['ok']){const _0x5b973c=await _0x39192d['text']();loggerService_1['loggerService']['logWhiteDomainResponse'](_0x315d8d(0x20d),'/v1/hosted/payment_links/'+_0x279fbd,_0x39192d[_0x315d8d(0x207)],_0x5b973c,_0x152bc0);throw new Error(_0x315d8d(0x213)+_0x39192d['status']);}const _0x1cb543=await _0x39192d[_0x315d8d(0x1f5)]();loggerService_1[_0x315d8d(0x1cd)][_0x315d8d(0x208)]('rapyd',_0x315d8d(0x1b5)+_0x279fbd,_0x39192d[_0x315d8d(0x207)],_0x1cb543,_0x152bc0);if(_0x1cb543[_0x315d8d(0x207)]?.[_0x315d8d(0x207)]!==_0x315d8d(0x1f1)){loggerService_1['loggerService'][_0x315d8d(0x1c1)](_0x315d8d(0x20d),_0x315d8d(0x1b5)+_0x279fbd,_0x315d8d(0x1cc)+(_0x1cb543[_0x315d8d(0x207)]?.['message']||_0x315d8d(0x1f8)));throw new Error(_0x315d8d(0x1cc)+(_0x1cb543[_0x315d8d(0x207)]?.[_0x315d8d(0x1d2)]||_0x315d8d(0x1f8)));}let _0x3c09c1=_0x315d8d(0x1ce);if(_0x1cb543[_0x315d8d(0x20c)]?.['status'])switch(_0x1cb543[_0x315d8d(0x20c)][_0x315d8d(0x207)][_0x315d8d(0x21c)]()){case _0x315d8d(0x1cb):_0x3c09c1='PAID';break;case _0x315d8d(0x21d):_0x3c09c1='FAILED';break;case'EXP':_0x3c09c1=_0x315d8d(0x1b6);break;case _0x315d8d(0x218):_0x3c09c1=_0x315d8d(0x1bf);break;case _0x315d8d(0x1e0):case'ACT':default:_0x3c09c1=_0x315d8d(0x1ce);break;}return{'status':_0x3c09c1,'amount':_0x1cb543[_0x315d8d(0x20c)]?.[_0x315d8d(0x20b)],'currency':_0x1cb543[_0x315d8d(0x20c)]?.[_0x315d8d(0x21b)]};}catch(_0x210107){console[_0x315d8d(0x1dc)](_0x315d8d(0x1b4),_0x210107),loggerService_1[_0x315d8d(0x1cd)][_0x315d8d(0x1c1)]('rapyd','/v1/hosted/payment_links/'+_0x279fbd,_0x210107);throw new Error(_0x315d8d(0x1fb)+(_0x210107 instanceof Error?_0x210107[_0x315d8d(0x1d2)]:_0x315d8d(0x1f8)));}}async[a44_0x16de59(0x1e3)](_0x14e3e0){const _0x420174=a44_0x16de59;console[_0x420174(0x1b2)](_0x420174(0x1f7),_0x14e3e0);let _0x279d32='PENDING',_0x488f72;_0x14e3e0[_0x420174(0x20c)]?.['failure_message']&&(_0x488f72=_0x14e3e0['data'][_0x420174(0x214)],console[_0x420174(0x1b2)](_0x420174(0x1ba)+_0x488f72));switch(_0x14e3e0['type']?.[_0x420174(0x21c)]()){case'PAYMENT_COMPLETED':_0x14e3e0['data']?.['paid']===!![]&&_0x14e3e0[_0x420174(0x20c)]?.[_0x420174(0x207)]===_0x420174(0x1cb)?_0x279d32=_0x420174(0x1ee):_0x279d32='PENDING';break;case _0x420174(0x1ad):_0x279d32='FAILED';break;case'PAYMENT_EXPIRED':_0x279d32=_0x420174(0x1b6);break;case _0x420174(0x200):_0x279d32=_0x420174(0x1bf);!_0x488f72&&_0x14e3e0[_0x420174(0x20c)]?.[_0x420174(0x214)]&&(_0x488f72=_0x14e3e0['data'][_0x420174(0x214)]);break;default:switch(_0x14e3e0[_0x420174(0x20c)]?.[_0x420174(0x207)]?.['toUpperCase']()){case'CLO':_0x14e3e0['data']?.[_0x420174(0x1ef)]===!![]?_0x279d32='PAID':_0x279d32=_0x420174(0x1bf);break;case _0x420174(0x21d):_0x279d32=_0x420174(0x1bf);break;case _0x420174(0x219):_0x279d32=_0x420174(0x1b6);break;case _0x420174(0x218):_0x279d32=_0x420174(0x1bf);!_0x488f72&&_0x14e3e0[_0x420174(0x20c)]?.['failure_message']&&(_0x488f72=_0x14e3e0['data']['failure_message']);break;case _0x420174(0x1e0):case _0x420174(0x1da):default:_0x279d32=_0x420174(0x1ce);break;}break;}const _0x566af2={};return _0x14e3e0['data']?.[_0x420174(0x21a)]?.[_0x420174(0x1c5)]&&(_0x566af2[_0x420174(0x1d6)]=_0x14e3e0['data']['payment_method_data'][_0x420174(0x1c5)]),_0x14e3e0['data']?.[_0x420174(0x204)]&&(_0x566af2[_0x420174(0x1ff)]=_0x14e3e0['data'][_0x420174(0x204)]),_0x14e3e0['data']?.[_0x420174(0x1e9)]&&(_0x566af2[_0x420174(0x1c8)]=_0x14e3e0[_0x420174(0x20c)][_0x420174(0x1e9)]),_0x14e3e0['data']?.['failure_code']&&(_0x566af2[_0x420174(0x1b0)]=_0x14e3e0[_0x420174(0x20c)]['failure_code']),console[_0x420174(0x1b2)](_0x420174(0x1d5)+_0x279d32+_0x420174(0x1fe)+(_0x488f72||'none')),{'paymentId':_0x14e3e0['data']?.[_0x420174(0x1c0)]||'','status':_0x279d32,'amount':_0x14e3e0[_0x420174(0x20c)]?.[_0x420174(0x20b)],'currency':_0x14e3e0[_0x420174(0x20c)]?.[_0x420174(0x21b)],'failureMessage':_0x488f72,'additionalInfo':_0x566af2};}}function a44_0x2fa6(){const _0x94cb93=['payment_method_data','currency','toUpperCase','CAN','GET','redirect_url','statusText','URL:','RapydService','/v1/hosted/payment_links','\x20(GB\x20-\x20Britain)','Error\x20Message:','24073qHVOPP','Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20','__esModule','\x20(always\x20GB\x20for\x20Rapyd)','PAYMENT_CANCELED','===\x20RAPYD\x20API\x20ERROR\x20===','🇬🇧\x20Country:\x20','failureCode','===\x20RAPYD\x20SERVICE\x20ERROR\x20===','log','verifyPayment','Rapyd\x20payment\x20verification\x20error:','/v1/hosted/payment_links/','EXPIRED','gb_mastercard_card','1363768OULcUh','112AcpANb','💥\x20Rapyd\x20failure\x20message:\x20','9114045NWAdFZ','Payment\x20Link\x20ID:','Business\x20Error\x20(','gb_visa_card','FAILED','merchant_reference_id','logWhiteDomainError','logWhiteDomainRequest','Raw\x20Response\x20Body:','💳\x20Payment\x20Methods:\x20gb_visa_card,\x20gb_mastercard_card','last4','ORDER:\x20','createPaymentLink','errorCode','10nMyjgV','text','CLO','Rapyd\x20API\x20error:\x20','loggerService','PENDING','Missing\x20id\x20or\x20redirect_url\x20in\x20response','Response\x20Time:','apiUrl','message','2017881LyJTuU','Headers:','🔄\x20Rapyd\x20webhook\x20processed:\x20status=','cardLast4','parse','===\x20RAPYD\x20API\x20INCOMPLETE\x20RESPONSE\x20===','https://tesoft.uk/gateway/fail.php?id=','ACT','):\x20','error','Response\x20data:','Redirect\x20URL:','69738slhqPy','NEW','===\x20RAPYD\x20API\x20BUSINESS\x20ERROR\x20===','7581156VdVyFz','processWebhook','stack','Status:','now','https://tesoft.uk/gateway/success.php?id=','../loggerService','error_code','Rapyd\x20API\x20error\x20(',',\x20body:\x20','Parsed\x20Result:','Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20Unknown\x20error','PAID','paid','JSON\x20Parse\x20Error:\x20','SUCCESS','HTTP\x20Status:','🌐\x20Rapyd\x20service\x20initialized\x20with\x20white\x20domain\x20proxy','headers','json','===\x20RAPYD\x20API\x20RESPONSE\x20(White\x20Domain)\x20===','Processing\x20Rapyd\x20webhook:','Unknown\x20error','3684980dVbMVc','application/json','Failed\x20to\x20verify\x20Rapyd\x20payment:\x20','Status\x20Text:','entries',',\x20failureMessage=','paymentMethod','PAYMENT_FAILED','===\x20RAPYD\x20API\x20REQUEST\x20(White\x20Domain\x20-\x20Updated\x20Format)\x20===','POST','https://tesoft.uk/gateway/rapyd/','payment_method_type','🇬🇧\x20Country\x20used:\x20','118yeIDma','status','logWhiteDomainResponse','TesSoft\x20Payment\x20System/1.0','===\x20RAPYD\x20SUCCESS\x20===','amount','data','rapyd','Invalid\x20JSON\x20response\x20from\x20Rapyd\x20API:\x20','stringify','Unknown\x20error\x20from\x20Rapyd\x20API','defineProperty','Failed\x20to\x20parse\x20JSON\x20response:','HTTP\x20error!\x20status:\x20','failure_message','Request\x20Body\x20(Updated\x20Format):','Error\x20details:','Error\x20Code:','ERR','EXP'];a44_0x2fa6=function(){return _0x94cb93;};return a44_0x2fa6();}exports[a44_0x16de59(0x1a5)]=RapydService;