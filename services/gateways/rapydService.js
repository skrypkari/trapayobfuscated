'use strict';const a56_0x54cd5a=a56_0x4500;(function(_0x143ee6,_0x5c95a9){const _0x280367=a56_0x4500,_0x405b26=_0x143ee6();while(!![]){try{const _0x29e07e=-parseInt(_0x280367(0x95))/0x1*(parseInt(_0x280367(0x8e))/0x2)+parseInt(_0x280367(0x100))/0x3*(-parseInt(_0x280367(0x82))/0x4)+-parseInt(_0x280367(0xc9))/0x5*(parseInt(_0x280367(0xa3))/0x6)+-parseInt(_0x280367(0xec))/0x7+-parseInt(_0x280367(0xae))/0x8+-parseInt(_0x280367(0xca))/0x9+-parseInt(_0x280367(0xf0))/0xa*(-parseInt(_0x280367(0x86))/0xb);if(_0x29e07e===_0x5c95a9)break;else _0x405b26['push'](_0x405b26['shift']());}catch(_0x4ea548){_0x405b26['push'](_0x405b26['shift']());}}}(a56_0x516f,0xd1336));Object[a56_0x54cd5a(0xa5)](exports,a56_0x54cd5a(0xbe),{'value':!![]}),exports[a56_0x54cd5a(0xd3)]=void 0x0;function a56_0x4500(_0x776310,_0x150f97){const _0x516fb2=a56_0x516f();return a56_0x4500=function(_0x4500ee,_0x52e57f){_0x4500ee=_0x4500ee-0x81;let _0xa2d98b=_0x516fb2[_0x4500ee];return _0xa2d98b;},a56_0x4500(_0x776310,_0x150f97);}function a56_0x516f(){const _0x130ac8=['PAYMENT_COMPLETED','GET','apiUrl','EUR','now','errorCode','3892263FaywpV','paid','paymentMethod','application/json','parse','4ikhrEP','Rapyd\x20API\x20error:\x20','Unknown\x20error','💥\x20Rapyd\x20failure\x20message:\x20','11nRlgni','===\x20RAPYD\x20SUCCESS\x20===','Invalid\x20JSON\x20response\x20from\x20Rapyd\x20API:\x20','rapyd','verifyPayment','\x20\x20\x20expiration:\x20','Failed\x20to\x20verify\x20Rapyd\x20payment:\x20','Parsed\x20Result:','6TqqDiZ','currency','\x20\x20\x20fixed_side:\x20buy','failure_message','last4','logWhiteDomainError','💳\x20Payment\x20Methods:\x20gb_visa_card,\x20gb_mastercard_card','391605DVyXAy','loggerService','expiration','toUpperCase','stringify','\x20(always\x20GB\x20for\x20Rapyd)','):\x20','log','Response\x20Body:','Error\x20message:','💱\x20Adding\x20currency\x20conversion\x20fields\x20for\x20','EXP','Status:','===\x20RAPYD\x20API\x20REQUEST\x20(White\x20Domain\x20-\x20Updated\x20Format)\x20===','512004GKWbOw','Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20','defineProperty','Payment\x20Link\x20ID:','Error\x20Code:','ACT','failureCode','Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20Unknown\x20error','PAYMENT_EXPIRED','Missing\x20id\x20or\x20redirect_url\x20in\x20response','createPaymentLink','9080928Tmsjsi','Failed\x20to\x20parse\x20JSON\x20response:','🇬🇧\x20Country\x20used:\x20','POST','statusText','Rapyd\x20API\x20error\x20(','text','data','===\x20RAPYD\x20API\x20BUSINESS\x20ERROR\x20===','error_code','Business\x20Error\x20(','UNKNOWN','FAILED','payment_method_data','HTTP\x20Status:','🌐\x20Rapyd\x20service\x20initialized\x20with\x20white\x20domain\x20proxy','__esModule','NEW','SUCCESS','failure_code','logWhiteDomainResponse','CAN','\x20\x20\x20requested_currency:\x20EUR','/v1/hosted/payment_links','HTTP\x20','\x20->\x20EUR:',',\x20failureMessage=','65JVlCtT','8833662HaJrTM','error','buy','fixed_side','status','===\x20RAPYD\x20SERVICE\x20ERROR\x20===','stack','\x20(GB\x20-\x20Britain)','gb_mastercard_card','RapydService','===\x20RAPYD\x20API\x20ERROR\x20===','Rapyd\x20payment\x20verification\x20error:','Response\x20Time:','Payment\x20System/1.0','URL:','CLO','payment_method_type','none','Response\x20data:','PENDING','Error\x20Message:','logWhiteDomainRequest','fromEntries','cardLast4','ERR','Processing\x20Rapyd\x20webhook:','Error\x20stack:','EXPIRED','https://tesoft.uk/gateway/rapyd/','amount','Unknown\x20error\x20from\x20Rapyd\x20API','redirect_url','Invalid\x20response\x20from\x20Rapyd\x20API:\x20missing\x20id\x20or\x20redirect_url','🇬🇧\x20Using\x20GB\x20(Britain)\x20as\x20country\x20for\x20Rapyd\x20payment\x20link','7172361XAWyhN','Incomplete\x20response:\x20missing\x20id\x20or\x20redirect_url','../loggerService','ORDER:\x20','75797210chfRrP','/v1/hosted/payment_links/','Status\x20Text:','processWebhook','🇬🇧\x20Country:\x20','HTTP\x20error!\x20status:\x20','===\x20RAPYD\x20API\x20INCOMPLETE\x20RESPONSE\x20===','floor','PAID','message'];a56_0x516f=function(){return _0x130ac8;};return a56_0x516f();}const loggerService_1=require(a56_0x54cd5a(0xee));class RapydService{constructor(){const _0x1b6638=a56_0x54cd5a;this['apiUrl']=_0x1b6638(0xe6),console['log'](_0x1b6638(0xbd));}async[a56_0x54cd5a(0xad)](_0x5e106c){const _0x469d87=a56_0x54cd5a,{orderId:_0x20984a,orderName:_0x13e1d6,amount:_0x23b6b5,currency:_0x448a1c,usage:_0x2b30f3,maxPayments:_0x38f27e,successUrl:_0x32ac6b,failUrl:_0x50873b}=_0x5e106c,_0x1e0b13=_0x448a1c[_0x469d87(0x98)](),_0x340a24='GB';console[_0x469d87(0x9c)](_0x469d87(0xeb));const _0x876058='https://tesoft.uk/gateway/success.php?id='+_0x20984a,_0x259079='https://tesoft.uk/gateway/fail.php?id='+_0x20984a,_0x238e7a={'amount':_0x23b6b5,'currency':_0x1e0b13,'cancel_checkout_url':_0x259079,'complete_checkout_url':_0x876058,'complete_payment_url':_0x876058,'merchant_reference_id':_0x20984a,'description':_0x469d87(0xef)+_0x20984a,'country':'GB','payment_method_types_include':['gb_visa_card',_0x469d87(0xd2)],'custom_elements':{'display_description':!![]}};if(_0x1e0b13!==_0x469d87(0xfd)){const _0x4e462c=Math[_0x469d87(0xf7)](Date['now']()/0x3e8)+0x1e*0x3c;_0x238e7a[_0x469d87(0xcd)]=_0x469d87(0xcc),_0x238e7a['requested_currency']=_0x469d87(0xfd),_0x238e7a[_0x469d87(0x97)]=_0x4e462c,console['log'](_0x469d87(0x9f)+_0x1e0b13+_0x469d87(0xc7)),console[_0x469d87(0x9c)](_0x469d87(0x90)),console[_0x469d87(0x9c)](_0x469d87(0xc4)),console['log'](_0x469d87(0x8b)+_0x4e462c+'\x20('+new Date(_0x4e462c*0x3e8)['toISOString']()+')');}const _0x3f7869=Date[_0x469d87(0xfe)]();try{console[_0x469d87(0x9c)](_0x469d87(0xa2)),console['log'](_0x469d87(0xd8),this[_0x469d87(0xfc)]),console['log']('Request\x20Body\x20(Updated\x20Format):',JSON[_0x469d87(0x99)](_0x238e7a,null,0x2)),console[_0x469d87(0x9c)](_0x469d87(0xf4)+_0x340a24+_0x469d87(0x9a)),console[_0x469d87(0x9c)](_0x469d87(0x94)),loggerService_1[_0x469d87(0x96)][_0x469d87(0xdf)]('rapyd','/v1/hosted/payment_links',_0x469d87(0xb1),_0x238e7a);const _0x3a0983=await fetch(this[_0x469d87(0xfc)],{'method':'POST','headers':{'Content-Type':_0x469d87(0x103),'User-Agent':_0x469d87(0xd7)},'body':JSON['stringify'](_0x238e7a)}),_0x3814=Date[_0x469d87(0xfe)]()-_0x3f7869;console['log']('===\x20RAPYD\x20API\x20RESPONSE\x20(White\x20Domain)\x20==='),console[_0x469d87(0x9c)](_0x469d87(0xa1),_0x3a0983[_0x469d87(0xce)]),console[_0x469d87(0x9c)](_0x469d87(0xf2),_0x3a0983[_0x469d87(0xb2)]),console[_0x469d87(0x9c)]('Headers:',Object[_0x469d87(0xe0)](_0x3a0983['headers']['entries']())),console[_0x469d87(0x9c)](_0x469d87(0xd6),_0x3814+'ms');const _0x5f08ef=await _0x3a0983[_0x469d87(0xb4)]();console[_0x469d87(0x9c)]('Raw\x20Response\x20Body:',_0x5f08ef);if(!_0x3a0983['ok']){console[_0x469d87(0xcb)](_0x469d87(0xd4)),console['error'](_0x469d87(0xbc),_0x3a0983['status']),console['error'](_0x469d87(0x9d),_0x5f08ef),loggerService_1['loggerService'][_0x469d87(0xc2)]('rapyd',_0x469d87(0xc5),_0x3a0983[_0x469d87(0xce)],_0x5f08ef,_0x3814),loggerService_1[_0x469d87(0x96)][_0x469d87(0x93)](_0x469d87(0x89),'/v1/hosted/payment_links',_0x469d87(0xc6)+_0x3a0983[_0x469d87(0xce)]+':\x20'+_0x5f08ef);throw new Error(_0x469d87(0xf5)+_0x3a0983[_0x469d87(0xce)]+',\x20body:\x20'+_0x5f08ef);}let _0x4cf03c;try{_0x4cf03c=JSON[_0x469d87(0x81)](_0x5f08ef);}catch(_0x37eb4e){console[_0x469d87(0xcb)](_0x469d87(0xaf),_0x37eb4e),loggerService_1[_0x469d87(0x96)][_0x469d87(0x93)]('rapyd','/v1/hosted/payment_links','JSON\x20Parse\x20Error:\x20'+_0x37eb4e);throw new Error(_0x469d87(0x88)+_0x5f08ef);}console[_0x469d87(0x9c)]('===\x20PARSED\x20RAPYD\x20RESPONSE\x20==='),console[_0x469d87(0x9c)](_0x469d87(0x8d),JSON[_0x469d87(0x99)](_0x4cf03c,null,0x2)),loggerService_1['loggerService'][_0x469d87(0xc2)](_0x469d87(0x89),_0x469d87(0xc5),_0x3a0983[_0x469d87(0xce)],_0x4cf03c,_0x3814);if(_0x4cf03c[_0x469d87(0xce)]?.[_0x469d87(0xce)]!==_0x469d87(0xc0)){const _0x5d1410=_0x4cf03c[_0x469d87(0xce)]?.[_0x469d87(0xf9)]||_0x469d87(0xe8),_0x4632da=_0x4cf03c[_0x469d87(0xce)]?.[_0x469d87(0xb7)]||_0x469d87(0xb9);console[_0x469d87(0xcb)](_0x469d87(0xb6)),console['error'](_0x469d87(0xa7),_0x4632da),console[_0x469d87(0xcb)](_0x469d87(0xde),_0x5d1410),console[_0x469d87(0xcb)]('Full\x20Error\x20Data:',_0x4cf03c['status']),loggerService_1[_0x469d87(0x96)][_0x469d87(0x93)](_0x469d87(0x89),_0x469d87(0xc5),_0x469d87(0xb8)+_0x4632da+'):\x20'+_0x5d1410);throw new Error(_0x469d87(0xb3)+_0x4632da+_0x469d87(0x9b)+_0x5d1410);}if(!_0x4cf03c['data']?.['id']||!_0x4cf03c[_0x469d87(0xb5)]?.[_0x469d87(0xe9)]){console[_0x469d87(0xcb)](_0x469d87(0xf6)),console[_0x469d87(0xcb)](_0x469d87(0xac)),console['error'](_0x469d87(0xdc),_0x4cf03c[_0x469d87(0xb5)]),loggerService_1['loggerService']['logWhiteDomainError'](_0x469d87(0x89),'/v1/hosted/payment_links',_0x469d87(0xed));throw new Error(_0x469d87(0xea));}return console['log'](_0x469d87(0x87)),console[_0x469d87(0x9c)](_0x469d87(0xa6),_0x4cf03c['data']['id']),console[_0x469d87(0x9c)]('Redirect\x20URL:',_0x4cf03c[_0x469d87(0xb5)]['redirect_url']),console['log'](_0x469d87(0xb0)+_0x340a24+_0x469d87(0xd1)),console[_0x469d87(0x9c)](_0x469d87(0x94)),{'gateway_payment_id':_0x4cf03c[_0x469d87(0xb5)]['id'],'payment_url':_0x4cf03c[_0x469d87(0xb5)]['redirect_url']};}catch(_0x3d5ea4){console[_0x469d87(0xcb)](_0x469d87(0xcf)),console[_0x469d87(0xcb)]('Error\x20details:',_0x3d5ea4),loggerService_1[_0x469d87(0x96)]['logWhiteDomainError'](_0x469d87(0x89),_0x469d87(0xc5),_0x3d5ea4);if(_0x3d5ea4 instanceof Error){console['error'](_0x469d87(0x9e),_0x3d5ea4[_0x469d87(0xf9)]),console[_0x469d87(0xcb)](_0x469d87(0xe4),_0x3d5ea4[_0x469d87(0xd0)]);throw new Error(_0x469d87(0xa4)+_0x3d5ea4[_0x469d87(0xf9)]);}throw new Error(_0x469d87(0xaa));}}async[a56_0x54cd5a(0x8a)](_0x3521d9){const _0x2e26c7=a56_0x54cd5a,_0x380ade=Date[_0x2e26c7(0xfe)]();try{loggerService_1[_0x2e26c7(0x96)][_0x2e26c7(0xdf)](_0x2e26c7(0x89),_0x2e26c7(0xf1)+_0x3521d9,_0x2e26c7(0xfb),{});const _0x188fbc=await fetch(this['apiUrl']+'/'+_0x3521d9,{'method':_0x2e26c7(0xfb),'headers':{'Content-Type':_0x2e26c7(0x103),'User-Agent':'Payment\x20System/1.0'}}),_0x534b83=Date['now']()-_0x380ade;if(!_0x188fbc['ok']){const _0x5b0bd3=await _0x188fbc[_0x2e26c7(0xb4)]();loggerService_1['loggerService']['logWhiteDomainResponse'](_0x2e26c7(0x89),_0x2e26c7(0xf1)+_0x3521d9,_0x188fbc['status'],_0x5b0bd3,_0x534b83);throw new Error(_0x2e26c7(0xf5)+_0x188fbc[_0x2e26c7(0xce)]);}const _0x4986c9=await _0x188fbc['json']();loggerService_1[_0x2e26c7(0x96)][_0x2e26c7(0xc2)]('rapyd',_0x2e26c7(0xf1)+_0x3521d9,_0x188fbc[_0x2e26c7(0xce)],_0x4986c9,_0x534b83);if(_0x4986c9[_0x2e26c7(0xce)]?.[_0x2e26c7(0xce)]!==_0x2e26c7(0xc0)){loggerService_1[_0x2e26c7(0x96)][_0x2e26c7(0x93)](_0x2e26c7(0x89),_0x2e26c7(0xf1)+_0x3521d9,_0x2e26c7(0x83)+(_0x4986c9[_0x2e26c7(0xce)]?.['message']||_0x2e26c7(0x84)));throw new Error(_0x2e26c7(0x83)+(_0x4986c9[_0x2e26c7(0xce)]?.[_0x2e26c7(0xf9)]||_0x2e26c7(0x84)));}let _0x5859e0=_0x2e26c7(0xdd);if(_0x4986c9['data']?.['status'])switch(_0x4986c9[_0x2e26c7(0xb5)][_0x2e26c7(0xce)][_0x2e26c7(0x98)]()){case _0x2e26c7(0xd9):_0x5859e0='PAID';break;case _0x2e26c7(0xc3):_0x5859e0=_0x2e26c7(0xba);break;case _0x2e26c7(0xa0):_0x5859e0=_0x2e26c7(0xe5);break;case _0x2e26c7(0xe2):_0x5859e0=_0x2e26c7(0xba);break;case _0x2e26c7(0xbf):case _0x2e26c7(0xa8):default:_0x5859e0=_0x2e26c7(0xdd);break;}return{'status':_0x5859e0,'amount':_0x4986c9['data']?.[_0x2e26c7(0xe7)],'currency':_0x4986c9[_0x2e26c7(0xb5)]?.[_0x2e26c7(0x8f)]};}catch(_0x147c80){console['error'](_0x2e26c7(0xd5),_0x147c80),loggerService_1['loggerService']['logWhiteDomainError'](_0x2e26c7(0x89),_0x2e26c7(0xf1)+_0x3521d9,_0x147c80);throw new Error(_0x2e26c7(0x8c)+(_0x147c80 instanceof Error?_0x147c80[_0x2e26c7(0xf9)]:'Unknown\x20error'));}}async[a56_0x54cd5a(0xf3)](_0x75a48){const _0x50337e=a56_0x54cd5a;console[_0x50337e(0x9c)](_0x50337e(0xe3),_0x75a48);let _0x1499c9=_0x50337e(0xdd),_0x36d1e5;_0x75a48[_0x50337e(0xb5)]?.[_0x50337e(0x91)]&&(_0x36d1e5=_0x75a48[_0x50337e(0xb5)][_0x50337e(0x91)],console[_0x50337e(0x9c)](_0x50337e(0x85)+_0x36d1e5));switch(_0x75a48['type']?.[_0x50337e(0x98)]()){case _0x50337e(0xfa):_0x75a48[_0x50337e(0xb5)]?.[_0x50337e(0x101)]===!![]&&_0x75a48[_0x50337e(0xb5)]?.[_0x50337e(0xce)]===_0x50337e(0xd9)?_0x1499c9=_0x50337e(0xf8):_0x1499c9='PENDING';break;case'PAYMENT_CANCELED':_0x1499c9=_0x50337e(0xba);break;case _0x50337e(0xab):_0x1499c9=_0x50337e(0xe5);break;case'PAYMENT_FAILED':_0x1499c9=_0x50337e(0xba);!_0x36d1e5&&_0x75a48[_0x50337e(0xb5)]?.[_0x50337e(0x91)]&&(_0x36d1e5=_0x75a48[_0x50337e(0xb5)]['failure_message']);break;default:switch(_0x75a48[_0x50337e(0xb5)]?.[_0x50337e(0xce)]?.[_0x50337e(0x98)]()){case _0x50337e(0xd9):_0x75a48[_0x50337e(0xb5)]?.[_0x50337e(0x101)]===!![]?_0x1499c9=_0x50337e(0xf8):_0x1499c9=_0x50337e(0xba);break;case _0x50337e(0xc3):_0x1499c9='FAILED';break;case'EXP':_0x1499c9='EXPIRED';break;case _0x50337e(0xe2):_0x1499c9='FAILED';!_0x36d1e5&&_0x75a48[_0x50337e(0xb5)]?.['failure_message']&&(_0x36d1e5=_0x75a48[_0x50337e(0xb5)][_0x50337e(0x91)]);break;case _0x50337e(0xbf):case _0x50337e(0xa8):default:_0x1499c9=_0x50337e(0xdd);break;}break;}const _0x3d1abc={};return _0x75a48[_0x50337e(0xb5)]?.['payment_method_data']?.[_0x50337e(0x92)]&&(_0x3d1abc[_0x50337e(0xe1)]=_0x75a48[_0x50337e(0xb5)][_0x50337e(0xbb)][_0x50337e(0x92)]),_0x75a48[_0x50337e(0xb5)]?.[_0x50337e(0xda)]&&(_0x3d1abc[_0x50337e(0x102)]=_0x75a48[_0x50337e(0xb5)][_0x50337e(0xda)]),_0x75a48[_0x50337e(0xb5)]?.[_0x50337e(0xb7)]&&(_0x3d1abc[_0x50337e(0xff)]=_0x75a48[_0x50337e(0xb5)][_0x50337e(0xb7)]),_0x75a48['data']?.[_0x50337e(0xc1)]&&(_0x3d1abc[_0x50337e(0xa9)]=_0x75a48[_0x50337e(0xb5)][_0x50337e(0xc1)]),console[_0x50337e(0x9c)]('🔄\x20Rapyd\x20webhook\x20processed:\x20status='+_0x1499c9+_0x50337e(0xc8)+(_0x36d1e5||_0x50337e(0xdb))),{'paymentId':_0x75a48['data']?.['merchant_reference_id']||'','status':_0x1499c9,'amount':_0x75a48[_0x50337e(0xb5)]?.[_0x50337e(0xe7)],'currency':_0x75a48['data']?.[_0x50337e(0x8f)],'failureMessage':_0x36d1e5,'additionalInfo':_0x3d1abc};}}exports[a56_0x54cd5a(0xd3)]=RapydService;