'use strict';const a42_0xe60e06=a42_0x27c9;(function(_0x14fadc,_0x518ff6){const _0x324ed7=a42_0x27c9,_0x383c50=_0x14fadc();while(!![]){try{const _0x82e5e5=parseInt(_0x324ed7(0x1b3))/0x1+-parseInt(_0x324ed7(0x1a9))/0x2+-parseInt(_0x324ed7(0x196))/0x3*(-parseInt(_0x324ed7(0x18e))/0x4)+-parseInt(_0x324ed7(0x17c))/0x5*(parseInt(_0x324ed7(0x16c))/0x6)+parseInt(_0x324ed7(0x1b9))/0x7*(-parseInt(_0x324ed7(0x166))/0x8)+parseInt(_0x324ed7(0x194))/0x9+-parseInt(_0x324ed7(0x160))/0xa*(-parseInt(_0x324ed7(0x182))/0xb);if(_0x82e5e5===_0x518ff6)break;else _0x383c50['push'](_0x383c50['shift']());}catch(_0x6d590){_0x383c50['push'](_0x383c50['shift']());}}}(a42_0x504b,0x9ec5f));Object[a42_0xe60e06(0x188)](exports,'__esModule',{'value':!![]}),exports[a42_0xe60e06(0x163)]=void 0x0;const loggerService_1=require(a42_0xe60e06(0x1bb));class RapydService{constructor(){const _0x4285bd=a42_0xe60e06;this[_0x4285bd(0x193)]=_0x4285bd(0x1a2),console['log'](_0x4285bd(0x1a0));}async['createPaymentLink'](_0x24d467){const _0x2efa43=a42_0xe60e06,{orderId:_0x11d629,orderName:_0x263b6f,amount:_0x26371c,currency:_0x22dccb,usage:_0x4ef879,maxPayments:_0xa1de87,successUrl:_0x1dc0b1,failUrl:_0x169d55}=_0x24d467,_0x4e071d=_0x22dccb[_0x2efa43(0x199)](),_0x244a8f='GB';console[_0x2efa43(0x18c)](_0x2efa43(0x19c));const _0x11c7a9=_0x2efa43(0x16d)+_0x11d629,_0xc6eb90=_0x2efa43(0x16f)+_0x11d629,_0x4f1741={'amount':_0x26371c,'currency':_0x4e071d,'cancel_checkout_url':_0xc6eb90,'complete_checkout_url':_0x11c7a9,'complete_payment_url':_0x11c7a9,'merchant_reference_id':_0x11d629,'description':_0x2efa43(0x183)+_0x11d629,'country':'GB','payment_method_types_include':[_0x2efa43(0x1c2),_0x2efa43(0x17a)],'custom_elements':{'display_description':!![]}},_0x3d63a1=Date['now']();try{console[_0x2efa43(0x18c)](_0x2efa43(0x1ae)),console['log'](_0x2efa43(0x1c3),this[_0x2efa43(0x193)]),console[_0x2efa43(0x18c)](_0x2efa43(0x167),JSON[_0x2efa43(0x161)](_0x4f1741,null,0x2)),console['log']('üá¨üáß\x20Country:\x20'+_0x244a8f+_0x2efa43(0x164)),console[_0x2efa43(0x18c)]('üí≥\x20Payment\x20Methods:\x20gb_visa_card,\x20gb_mastercard_card'),loggerService_1[_0x2efa43(0x1ad)]['logWhiteDomainRequest'](_0x2efa43(0x1ba),'/v1/hosted/payment_links',_0x2efa43(0x197),_0x4f1741);const _0x13eed8=await fetch(this[_0x2efa43(0x193)],{'method':_0x2efa43(0x197),'headers':{'Content-Type':_0x2efa43(0x17e),'User-Agent':_0x2efa43(0x1c1)},'body':JSON[_0x2efa43(0x161)](_0x4f1741)}),_0x1646d1=Date[_0x2efa43(0x1c7)]()-_0x3d63a1;console['log'](_0x2efa43(0x1be)),console[_0x2efa43(0x18c)](_0x2efa43(0x186),_0x13eed8[_0x2efa43(0x177)]),console[_0x2efa43(0x18c)]('Status\x20Text:',_0x13eed8[_0x2efa43(0x179)]),console[_0x2efa43(0x18c)](_0x2efa43(0x165),Object['fromEntries'](_0x13eed8['headers'][_0x2efa43(0x16a)]())),console[_0x2efa43(0x18c)](_0x2efa43(0x189),_0x1646d1+'ms');const _0x27e550=await _0x13eed8[_0x2efa43(0x1a3)]();console[_0x2efa43(0x18c)](_0x2efa43(0x1a6),_0x27e550);if(!_0x13eed8['ok']){console[_0x2efa43(0x1b8)](_0x2efa43(0x184)),console['error']('HTTP\x20Status:',_0x13eed8[_0x2efa43(0x177)]),console[_0x2efa43(0x1b8)](_0x2efa43(0x175),_0x27e550),loggerService_1[_0x2efa43(0x1ad)][_0x2efa43(0x1bd)](_0x2efa43(0x1ba),_0x2efa43(0x168),_0x13eed8[_0x2efa43(0x177)],_0x27e550,_0x1646d1),loggerService_1['loggerService']['logWhiteDomainError'](_0x2efa43(0x1ba),_0x2efa43(0x168),_0x2efa43(0x18d)+_0x13eed8['status']+':\x20'+_0x27e550);throw new Error(_0x2efa43(0x15f)+_0x13eed8[_0x2efa43(0x177)]+',\x20body:\x20'+_0x27e550);}let _0x109af7;try{_0x109af7=JSON['parse'](_0x27e550);}catch(_0x2a3721){console[_0x2efa43(0x1b8)]('Failed\x20to\x20parse\x20JSON\x20response:',_0x2a3721),loggerService_1[_0x2efa43(0x1ad)][_0x2efa43(0x171)](_0x2efa43(0x1ba),_0x2efa43(0x168),'JSON\x20Parse\x20Error:\x20'+_0x2a3721);throw new Error(_0x2efa43(0x1b6)+_0x27e550);}console[_0x2efa43(0x18c)](_0x2efa43(0x195)),console[_0x2efa43(0x18c)]('Parsed\x20Result:',JSON[_0x2efa43(0x161)](_0x109af7,null,0x2)),loggerService_1['loggerService']['logWhiteDomainResponse'](_0x2efa43(0x1ba),_0x2efa43(0x168),_0x13eed8[_0x2efa43(0x177)],_0x109af7,_0x1646d1);if(_0x109af7[_0x2efa43(0x177)]?.[_0x2efa43(0x177)]!=='SUCCESS'){const _0x4b972e=_0x109af7['status']?.[_0x2efa43(0x1aa)]||_0x2efa43(0x178),_0x498773=_0x109af7[_0x2efa43(0x177)]?.[_0x2efa43(0x18a)]||'UNKNOWN';console[_0x2efa43(0x1b8)]('===\x20RAPYD\x20API\x20BUSINESS\x20ERROR\x20==='),console['error'](_0x2efa43(0x173),_0x498773),console[_0x2efa43(0x1b8)](_0x2efa43(0x185),_0x4b972e),console['error'](_0x2efa43(0x172),_0x109af7['status']),loggerService_1[_0x2efa43(0x1ad)][_0x2efa43(0x171)](_0x2efa43(0x1ba),_0x2efa43(0x168),_0x2efa43(0x17b)+_0x498773+_0x2efa43(0x18f)+_0x4b972e);throw new Error(_0x2efa43(0x1b2)+_0x498773+'):\x20'+_0x4b972e);}if(!_0x109af7[_0x2efa43(0x170)]?.['id']||!_0x109af7['data']?.[_0x2efa43(0x187)]){console[_0x2efa43(0x1b8)](_0x2efa43(0x16b)),console[_0x2efa43(0x1b8)](_0x2efa43(0x1b1)),console['error'](_0x2efa43(0x192),_0x109af7['data']),loggerService_1[_0x2efa43(0x1ad)][_0x2efa43(0x171)](_0x2efa43(0x1ba),_0x2efa43(0x168),'Incomplete\x20response:\x20missing\x20id\x20or\x20redirect_url');throw new Error(_0x2efa43(0x19f));}return console[_0x2efa43(0x18c)](_0x2efa43(0x1a7)),console[_0x2efa43(0x18c)](_0x2efa43(0x1b0),_0x109af7['data']['id']),console[_0x2efa43(0x18c)]('Redirect\x20URL:',_0x109af7['data'][_0x2efa43(0x187)]),console[_0x2efa43(0x18c)](_0x2efa43(0x176)+_0x244a8f+_0x2efa43(0x19e)),console['log']('üí≥\x20Payment\x20Methods:\x20gb_visa_card,\x20gb_mastercard_card'),{'gateway_payment_id':_0x109af7[_0x2efa43(0x170)]['id'],'payment_url':_0x109af7[_0x2efa43(0x170)][_0x2efa43(0x187)]};}catch(_0x21f8ef){console[_0x2efa43(0x1b8)](_0x2efa43(0x162)),console[_0x2efa43(0x1b8)](_0x2efa43(0x17f),_0x21f8ef),loggerService_1[_0x2efa43(0x1ad)][_0x2efa43(0x171)](_0x2efa43(0x1ba),_0x2efa43(0x168),_0x21f8ef);if(_0x21f8ef instanceof Error){console[_0x2efa43(0x1b8)]('Error\x20message:',_0x21f8ef[_0x2efa43(0x1aa)]),console['error'](_0x2efa43(0x1c0),_0x21f8ef[_0x2efa43(0x1a8)]);throw new Error(_0x2efa43(0x1b5)+_0x21f8ef[_0x2efa43(0x1aa)]);}throw new Error('Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20Unknown\x20error');}}async[a42_0xe60e06(0x1af)](_0x22cdea){const _0x4c2d5e=a42_0xe60e06,_0x453937=Date[_0x4c2d5e(0x1c7)]();try{loggerService_1[_0x4c2d5e(0x1ad)][_0x4c2d5e(0x19d)](_0x4c2d5e(0x1ba),_0x4c2d5e(0x198)+_0x22cdea,'GET',{});const _0x306d20=await fetch(this[_0x4c2d5e(0x193)]+'/'+_0x22cdea,{'method':_0x4c2d5e(0x1c4),'headers':{'Content-Type':_0x4c2d5e(0x17e),'User-Agent':'TesSoft\x20Payment\x20System/1.0'}}),_0x57e38f=Date[_0x4c2d5e(0x1c7)]()-_0x453937;if(!_0x306d20['ok']){const _0x3fae34=await _0x306d20['text']();loggerService_1[_0x4c2d5e(0x1ad)]['logWhiteDomainResponse'](_0x4c2d5e(0x1ba),'/v1/hosted/payment_links/'+_0x22cdea,_0x306d20[_0x4c2d5e(0x177)],_0x3fae34,_0x57e38f);throw new Error('HTTP\x20error!\x20status:\x20'+_0x306d20[_0x4c2d5e(0x177)]);}const _0x1e5439=await _0x306d20[_0x4c2d5e(0x19a)]();loggerService_1[_0x4c2d5e(0x1ad)]['logWhiteDomainResponse']('rapyd','/v1/hosted/payment_links/'+_0x22cdea,_0x306d20[_0x4c2d5e(0x177)],_0x1e5439,_0x57e38f);if(_0x1e5439['status']?.[_0x4c2d5e(0x177)]!==_0x4c2d5e(0x18b)){loggerService_1[_0x4c2d5e(0x1ad)][_0x4c2d5e(0x171)](_0x4c2d5e(0x1ba),'/v1/hosted/payment_links/'+_0x22cdea,_0x4c2d5e(0x17d)+(_0x1e5439[_0x4c2d5e(0x177)]?.[_0x4c2d5e(0x1aa)]||'Unknown\x20error'));throw new Error('Rapyd\x20API\x20error:\x20'+(_0x1e5439[_0x4c2d5e(0x177)]?.[_0x4c2d5e(0x1aa)]||'Unknown\x20error'));}let _0x34dbac='PENDING';if(_0x1e5439[_0x4c2d5e(0x170)]?.[_0x4c2d5e(0x177)])switch(_0x1e5439[_0x4c2d5e(0x170)][_0x4c2d5e(0x177)][_0x4c2d5e(0x199)]()){case'CLO':_0x34dbac='PAID';break;case _0x4c2d5e(0x1bf):_0x34dbac=_0x4c2d5e(0x1bc);break;case _0x4c2d5e(0x1c6):_0x34dbac='EXPIRED';break;case'ERR':_0x34dbac='FAILED';break;case _0x4c2d5e(0x1ac):case _0x4c2d5e(0x191):default:_0x34dbac=_0x4c2d5e(0x190);break;}return{'status':_0x34dbac,'amount':_0x1e5439[_0x4c2d5e(0x170)]?.[_0x4c2d5e(0x1a4)],'currency':_0x1e5439[_0x4c2d5e(0x170)]?.['currency']};}catch(_0x357239){console[_0x4c2d5e(0x1b8)]('Rapyd\x20payment\x20verification\x20error:',_0x357239),loggerService_1[_0x4c2d5e(0x1ad)][_0x4c2d5e(0x171)](_0x4c2d5e(0x1ba),_0x4c2d5e(0x198)+_0x22cdea,_0x357239);throw new Error('Failed\x20to\x20verify\x20Rapyd\x20payment:\x20'+(_0x357239 instanceof Error?_0x357239[_0x4c2d5e(0x1aa)]:'Unknown\x20error'));}}async[a42_0xe60e06(0x180)](_0x2fa040){const _0x4bf243=a42_0xe60e06;console[_0x4bf243(0x18c)](_0x4bf243(0x174),_0x2fa040);let _0x20a35f=_0x4bf243(0x190);switch(_0x2fa040['type']?.[_0x4bf243(0x199)]()){case _0x4bf243(0x1b7):_0x2fa040[_0x4bf243(0x170)]?.[_0x4bf243(0x19b)]===!![]&&_0x2fa040[_0x4bf243(0x170)]?.['status']===_0x4bf243(0x16e)?_0x20a35f='PAID':_0x20a35f='PENDING';break;case _0x4bf243(0x181):_0x20a35f='FAILED';break;case _0x4bf243(0x1ab):_0x20a35f=_0x4bf243(0x1a5);break;case _0x4bf243(0x169):_0x20a35f=_0x4bf243(0x1bc);break;default:switch(_0x2fa040[_0x4bf243(0x170)]?.['status']?.[_0x4bf243(0x199)]()){case'CLO':_0x2fa040[_0x4bf243(0x170)]?.[_0x4bf243(0x19b)]===!![]?_0x20a35f=_0x4bf243(0x1c5):_0x20a35f=_0x4bf243(0x1bc);break;case _0x4bf243(0x1bf):_0x20a35f=_0x4bf243(0x1bc);break;case _0x4bf243(0x1c6):_0x20a35f=_0x4bf243(0x1a5);break;case'ERR':_0x20a35f=_0x4bf243(0x1bc);break;case _0x4bf243(0x1ac):case _0x4bf243(0x191):default:_0x20a35f=_0x4bf243(0x190);break;}break;}return{'paymentId':_0x2fa040[_0x4bf243(0x170)]?.[_0x4bf243(0x1b4)]||'','status':_0x20a35f,'amount':_0x2fa040['data']?.[_0x4bf243(0x1a4)],'currency':_0x2fa040[_0x4bf243(0x170)]?.[_0x4bf243(0x1a1)]};}}function a42_0x504b(){const _0x4bb36a=['stringify','===\x20RAPYD\x20SERVICE\x20ERROR\x20===','RapydService','\x20(always\x20GB\x20for\x20Rapyd)','Headers:','6600HnUYIG','Request\x20Body\x20(Updated\x20Format):','/v1/hosted/payment_links','PAYMENT_FAILED','entries','===\x20RAPYD\x20API\x20INCOMPLETE\x20RESPONSE\x20===','518010PPdhwF','https://tesoft.uk/gateway/success.php?id=','CLO','https://tesoft.uk/gateway/fail.php?id=','data','logWhiteDomainError','Full\x20Error\x20Data:','Error\x20Code:','Processing\x20Rapyd\x20webhook:','Response\x20Body:','üá¨üáß\x20Country\x20used:\x20','status','Unknown\x20error\x20from\x20Rapyd\x20API','statusText','gb_mastercard_card','Business\x20Error\x20(','15LHNzSY','Rapyd\x20API\x20error:\x20','application/json','Error\x20details:','processWebhook','PAYMENT_CANCELED','893849VxcXaj','ORDER:\x20','===\x20RAPYD\x20API\x20ERROR\x20===','Error\x20Message:','Status:','redirect_url','defineProperty','Response\x20Time:','error_code','SUCCESS','log','HTTP\x20','166792AQQWMj','):\x20','PENDING','ACT','Response\x20data:','apiUrl','6821514QwVTqM','===\x20PARSED\x20RAPYD\x20RESPONSE\x20===','60yosYrG','POST','/v1/hosted/payment_links/','toUpperCase','json','paid','üá¨üáß\x20Using\x20GB\x20(Britain)\x20as\x20country\x20for\x20Rapyd\x20payment\x20link','logWhiteDomainRequest','\x20(GB\x20-\x20Britain)','Invalid\x20response\x20from\x20Rapyd\x20API:\x20missing\x20id\x20or\x20redirect_url','üåê\x20Rapyd\x20service\x20initialized\x20with\x20white\x20domain\x20proxy','currency','https://tesoft.uk/gateway/rapyd/','text','amount','EXPIRED','Raw\x20Response\x20Body:','===\x20RAPYD\x20SUCCESS\x20===','stack','2287448dCqPHW','message','PAYMENT_EXPIRED','NEW','loggerService','===\x20RAPYD\x20API\x20REQUEST\x20(White\x20Domain\x20-\x20Updated\x20Format)\x20===','verifyPayment','Payment\x20Link\x20ID:','Missing\x20id\x20or\x20redirect_url\x20in\x20response','Rapyd\x20API\x20error\x20(','1102599TYbgaL','merchant_reference_id','Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20','Invalid\x20JSON\x20response\x20from\x20Rapyd\x20API:\x20','PAYMENT_COMPLETED','error','6132AGYgad','rapyd','../loggerService','FAILED','logWhiteDomainResponse','===\x20RAPYD\x20API\x20RESPONSE\x20(White\x20Domain)\x20===','CAN','Error\x20stack:','TesSoft\x20Payment\x20System/1.0','gb_visa_card','URL:','GET','PAID','EXP','now','HTTP\x20error!\x20status:\x20','10lpZxgE'];a42_0x504b=function(){return _0x4bb36a;};return a42_0x504b();}function a42_0x27c9(_0x1366a0,_0x1be8af){const _0x504b61=a42_0x504b();return a42_0x27c9=function(_0x27c93e,_0x79268e){_0x27c93e=_0x27c93e-0x15f;let _0x25a66e=_0x504b61[_0x27c93e];return _0x25a66e;},a42_0x27c9(_0x1366a0,_0x1be8af);}exports[a42_0xe60e06(0x163)]=RapydService;