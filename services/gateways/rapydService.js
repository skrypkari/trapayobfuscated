'use strict';const a42_0x38e2da=a42_0xccc5;(function(_0x3c887a,_0x3df8f9){const _0x3364a6=a42_0xccc5,_0x43bbf6=_0x3c887a();while(!![]){try{const _0x1a39ab=-parseInt(_0x3364a6(0x209))/0x1+parseInt(_0x3364a6(0x1f1))/0x2+parseInt(_0x3364a6(0x228))/0x3*(parseInt(_0x3364a6(0x200))/0x4)+parseInt(_0x3364a6(0x202))/0x5+parseInt(_0x3364a6(0x22e))/0x6*(parseInt(_0x3364a6(0x222))/0x7)+parseInt(_0x3364a6(0x20e))/0x8+parseInt(_0x3364a6(0x22f))/0x9*(-parseInt(_0x3364a6(0x22a))/0xa);if(_0x1a39ab===_0x3df8f9)break;else _0x43bbf6['push'](_0x43bbf6['shift']());}catch(_0x42c389){_0x43bbf6['push'](_0x43bbf6['shift']());}}}(a42_0x3d1b,0x6726d));function a42_0xccc5(_0x51423f,_0x110d43){const _0x3d1b26=a42_0x3d1b();return a42_0xccc5=function(_0xccc53a,_0x28489c){_0xccc53a=_0xccc53a-0x1d6;let _0xefef8e=_0x3d1b26[_0xccc53a];return _0xefef8e;},a42_0xccc5(_0x51423f,_0x110d43);}Object[a42_0x38e2da(0x221)](exports,'__esModule',{'value':!![]}),exports[a42_0x38e2da(0x1d9)]=void 0x0;const loggerService_1=require(a42_0x38e2da(0x236));class RapydService{constructor(){const _0x398507=a42_0x38e2da;this['apiUrl']=_0x398507(0x210),console[_0x398507(0x220)]('üåê\x20Rapyd\x20service\x20initialized\x20with\x20white\x20domain\x20proxy');}async[a42_0x38e2da(0x1fd)](_0x5d8d85){const _0x189a9b=a42_0x38e2da,{orderId:_0x33bbad,orderName:_0x56f525,amount:_0x2475a0,currency:_0x4db312,usage:_0x5357d0,maxPayments:_0x3b9c25,successUrl:_0x2bc778,failUrl:_0x3d3c29}=_0x5d8d85,_0x462ad6=_0x4db312['toUpperCase'](),_0x5c3ece='GB';console[_0x189a9b(0x220)](_0x189a9b(0x235));const _0x581066=_0x189a9b(0x219)+_0x33bbad,_0x2582aa=_0x189a9b(0x22c)+_0x33bbad,_0x28228e={'amount':_0x2475a0,'currency':_0x462ad6,'cancel_checkout_url':_0x2582aa,'complete_checkout_url':_0x581066,'complete_payment_url':_0x581066,'merchant_reference_id':_0x33bbad,'description':'ORDER:\x20'+_0x33bbad,'country':'GB','payment_method_types_include':[_0x189a9b(0x21e),'gb_mastercard_card'],'custom_elements':{'display_description':!![]}},_0x37c2f8=Date[_0x189a9b(0x229)]();try{console[_0x189a9b(0x220)](_0x189a9b(0x1ed)),console['log'](_0x189a9b(0x243),this[_0x189a9b(0x1de)]),console[_0x189a9b(0x220)](_0x189a9b(0x1f5),JSON[_0x189a9b(0x1fa)](_0x28228e,null,0x2)),console[_0x189a9b(0x220)](_0x189a9b(0x1d8)+_0x5c3ece+_0x189a9b(0x23c)),console['log'](_0x189a9b(0x231)),loggerService_1[_0x189a9b(0x224)][_0x189a9b(0x23f)](_0x189a9b(0x226),_0x189a9b(0x218),'POST',_0x28228e);const _0x18c465=await fetch(this[_0x189a9b(0x1de)],{'method':_0x189a9b(0x1e6),'headers':{'Content-Type':_0x189a9b(0x1e7),'User-Agent':'TesSoft\x20Payment\x20System/1.0'},'body':JSON[_0x189a9b(0x1fa)](_0x28228e)}),_0x2f4e3c=Date[_0x189a9b(0x229)]()-_0x37c2f8;console[_0x189a9b(0x220)](_0x189a9b(0x21b)),console[_0x189a9b(0x220)](_0x189a9b(0x1f4),_0x18c465['status']),console[_0x189a9b(0x220)](_0x189a9b(0x20b),_0x18c465[_0x189a9b(0x1f7)]),console[_0x189a9b(0x220)]('Headers:',Object['fromEntries'](_0x18c465[_0x189a9b(0x1eb)][_0x189a9b(0x23d)]())),console[_0x189a9b(0x220)]('Response\x20Time:',_0x2f4e3c+'ms');const _0xb8becf=await _0x18c465[_0x189a9b(0x1fe)]();console[_0x189a9b(0x220)]('Raw\x20Response\x20Body:',_0xb8becf);if(!_0x18c465['ok']){console['error'](_0x189a9b(0x240)),console[_0x189a9b(0x1e2)](_0x189a9b(0x201),_0x18c465[_0x189a9b(0x1da)]),console[_0x189a9b(0x1e2)](_0x189a9b(0x20d),_0xb8becf),loggerService_1[_0x189a9b(0x224)][_0x189a9b(0x1fb)](_0x189a9b(0x226),_0x189a9b(0x218),_0x18c465[_0x189a9b(0x1da)],_0xb8becf,_0x2f4e3c),loggerService_1[_0x189a9b(0x224)][_0x189a9b(0x21f)](_0x189a9b(0x226),'/v1/hosted/payment_links',_0x189a9b(0x1db)+_0x18c465[_0x189a9b(0x1da)]+':\x20'+_0xb8becf);throw new Error(_0x189a9b(0x1f9)+_0x18c465[_0x189a9b(0x1da)]+_0x189a9b(0x1e3)+_0xb8becf);}let _0x46d1e7;try{_0x46d1e7=JSON[_0x189a9b(0x1ec)](_0xb8becf);}catch(_0x1a87bb){console['error'](_0x189a9b(0x216),_0x1a87bb),loggerService_1[_0x189a9b(0x224)][_0x189a9b(0x21f)](_0x189a9b(0x226),_0x189a9b(0x218),'JSON\x20Parse\x20Error:\x20'+_0x1a87bb);throw new Error(_0x189a9b(0x21d)+_0xb8becf);}console[_0x189a9b(0x220)]('===\x20PARSED\x20RAPYD\x20RESPONSE\x20==='),console[_0x189a9b(0x220)]('Parsed\x20Result:',JSON[_0x189a9b(0x1fa)](_0x46d1e7,null,0x2)),loggerService_1[_0x189a9b(0x224)][_0x189a9b(0x1fb)]('rapyd','/v1/hosted/payment_links',_0x18c465['status'],_0x46d1e7,_0x2f4e3c);if(_0x46d1e7[_0x189a9b(0x1da)]?.[_0x189a9b(0x1da)]!=='SUCCESS'){const _0x148c6a=_0x46d1e7[_0x189a9b(0x1da)]?.[_0x189a9b(0x23b)]||'Unknown\x20error\x20from\x20Rapyd\x20API',_0x466796=_0x46d1e7[_0x189a9b(0x1da)]?.[_0x189a9b(0x211)]||'UNKNOWN';console[_0x189a9b(0x1e2)](_0x189a9b(0x204)),console[_0x189a9b(0x1e2)](_0x189a9b(0x21c),_0x466796),console[_0x189a9b(0x1e2)](_0x189a9b(0x23e),_0x148c6a),console['error'](_0x189a9b(0x1f2),_0x46d1e7[_0x189a9b(0x1da)]),loggerService_1[_0x189a9b(0x224)][_0x189a9b(0x21f)]('rapyd',_0x189a9b(0x218),_0x189a9b(0x1df)+_0x466796+'):\x20'+_0x148c6a);throw new Error(_0x189a9b(0x20f)+_0x466796+_0x189a9b(0x20c)+_0x148c6a);}if(!_0x46d1e7[_0x189a9b(0x205)]?.['id']||!_0x46d1e7[_0x189a9b(0x205)]?.[_0x189a9b(0x20a)]){console[_0x189a9b(0x1e2)](_0x189a9b(0x1f3)),console[_0x189a9b(0x1e2)](_0x189a9b(0x1dd)),console[_0x189a9b(0x1e2)](_0x189a9b(0x203),_0x46d1e7['data']),loggerService_1[_0x189a9b(0x224)][_0x189a9b(0x21f)](_0x189a9b(0x226),_0x189a9b(0x218),_0x189a9b(0x1dc));throw new Error(_0x189a9b(0x223));}return console[_0x189a9b(0x220)](_0x189a9b(0x1e4)),console[_0x189a9b(0x220)](_0x189a9b(0x1e9),_0x46d1e7[_0x189a9b(0x205)]['id']),console[_0x189a9b(0x220)](_0x189a9b(0x241),_0x46d1e7[_0x189a9b(0x205)]['redirect_url']),console[_0x189a9b(0x220)]('üá¨üáß\x20Country\x20used:\x20'+_0x5c3ece+_0x189a9b(0x208)),console[_0x189a9b(0x220)](_0x189a9b(0x231)),{'gateway_payment_id':_0x46d1e7[_0x189a9b(0x205)]['id'],'payment_url':_0x46d1e7['data']['redirect_url']};}catch(_0x194da){console[_0x189a9b(0x1e2)]('===\x20RAPYD\x20SERVICE\x20ERROR\x20==='),console[_0x189a9b(0x1e2)]('Error\x20details:',_0x194da),loggerService_1[_0x189a9b(0x224)][_0x189a9b(0x21f)](_0x189a9b(0x226),_0x189a9b(0x218),_0x194da);if(_0x194da instanceof Error){console[_0x189a9b(0x1e2)](_0x189a9b(0x230),_0x194da[_0x189a9b(0x23b)]),console[_0x189a9b(0x1e2)](_0x189a9b(0x22b),_0x194da[_0x189a9b(0x21a)]);throw new Error(_0x189a9b(0x1e5)+_0x194da['message']);}throw new Error(_0x189a9b(0x232));}}async[a42_0x38e2da(0x234)](_0x2b236b){const _0x17971d=a42_0x38e2da,_0x49c134=Date[_0x17971d(0x229)]();try{loggerService_1[_0x17971d(0x224)][_0x17971d(0x23f)](_0x17971d(0x226),_0x17971d(0x242)+_0x2b236b,_0x17971d(0x1ff),{});const _0x1c2951=await fetch(this[_0x17971d(0x1de)]+'/'+_0x2b236b,{'method':'GET','headers':{'Content-Type':_0x17971d(0x1e7),'User-Agent':'TesSoft\x20Payment\x20System/1.0'}}),_0x51571c=Date[_0x17971d(0x229)]()-_0x49c134;if(!_0x1c2951['ok']){const _0x1b0596=await _0x1c2951[_0x17971d(0x1fe)]();loggerService_1['loggerService']['logWhiteDomainResponse'](_0x17971d(0x226),_0x17971d(0x242)+_0x2b236b,_0x1c2951['status'],_0x1b0596,_0x51571c);throw new Error(_0x17971d(0x1f9)+_0x1c2951[_0x17971d(0x1da)]);}const _0x5bd5b1=await _0x1c2951[_0x17971d(0x1fc)]();loggerService_1[_0x17971d(0x224)][_0x17971d(0x1fb)]('rapyd','/v1/hosted/payment_links/'+_0x2b236b,_0x1c2951['status'],_0x5bd5b1,_0x51571c);if(_0x5bd5b1[_0x17971d(0x1da)]?.['status']!==_0x17971d(0x217)){loggerService_1[_0x17971d(0x224)][_0x17971d(0x21f)](_0x17971d(0x226),_0x17971d(0x242)+_0x2b236b,_0x17971d(0x227)+(_0x5bd5b1['status']?.[_0x17971d(0x23b)]||_0x17971d(0x238)));throw new Error(_0x17971d(0x227)+(_0x5bd5b1[_0x17971d(0x1da)]?.['message']||_0x17971d(0x238)));}let _0xded442='PENDING';if(_0x5bd5b1[_0x17971d(0x205)]?.[_0x17971d(0x1da)])switch(_0x5bd5b1[_0x17971d(0x205)][_0x17971d(0x1da)][_0x17971d(0x1d7)]()){case _0x17971d(0x1f8):_0xded442=_0x17971d(0x207);break;case _0x17971d(0x1e0):_0xded442=_0x17971d(0x214);break;case _0x17971d(0x212):_0xded442=_0x17971d(0x1ea);break;case _0x17971d(0x1ee):_0xded442=_0x17971d(0x214);break;case _0x17971d(0x225):case _0x17971d(0x1e8):default:_0xded442=_0x17971d(0x22d);break;}return{'status':_0xded442,'amount':_0x5bd5b1['data']?.[_0x17971d(0x206)],'currency':_0x5bd5b1[_0x17971d(0x205)]?.['currency']};}catch(_0x2767b6){console['error'](_0x17971d(0x213),_0x2767b6),loggerService_1[_0x17971d(0x224)][_0x17971d(0x21f)](_0x17971d(0x226),_0x17971d(0x242)+_0x2b236b,_0x2767b6);throw new Error('Failed\x20to\x20verify\x20Rapyd\x20payment:\x20'+(_0x2767b6 instanceof Error?_0x2767b6[_0x17971d(0x23b)]:_0x17971d(0x238)));}}async[a42_0x38e2da(0x1f0)](_0x433a18){const _0xba96ad=a42_0x38e2da;console['log'](_0xba96ad(0x1e1),_0x433a18);let _0x2a158e=_0xba96ad(0x22d);switch(_0x433a18[_0xba96ad(0x1d6)]?.[_0xba96ad(0x1d7)]()){case _0xba96ad(0x239):_0x433a18[_0xba96ad(0x205)]?.['paid']===!![]&&_0x433a18[_0xba96ad(0x205)]?.[_0xba96ad(0x1da)]==='CLO'?_0x2a158e=_0xba96ad(0x207):_0x2a158e=_0xba96ad(0x22d);break;case _0xba96ad(0x23a):_0x2a158e=_0xba96ad(0x214);break;case _0xba96ad(0x233):_0x2a158e=_0xba96ad(0x1ea);break;case _0xba96ad(0x1ef):_0x2a158e=_0xba96ad(0x214);break;default:switch(_0x433a18[_0xba96ad(0x205)]?.[_0xba96ad(0x1da)]?.[_0xba96ad(0x1d7)]()){case _0xba96ad(0x1f8):_0x433a18[_0xba96ad(0x205)]?.[_0xba96ad(0x215)]===!![]?_0x2a158e=_0xba96ad(0x207):_0x2a158e=_0xba96ad(0x214);break;case'CAN':_0x2a158e=_0xba96ad(0x214);break;case _0xba96ad(0x212):_0x2a158e=_0xba96ad(0x1ea);break;case _0xba96ad(0x1ee):_0x2a158e=_0xba96ad(0x214);break;case _0xba96ad(0x225):case _0xba96ad(0x1e8):default:_0x2a158e=_0xba96ad(0x22d);break;}break;}return{'paymentId':_0x433a18[_0xba96ad(0x205)]?.[_0xba96ad(0x1f6)]||'','status':_0x2a158e,'amount':_0x433a18[_0xba96ad(0x205)]?.[_0xba96ad(0x206)],'currency':_0x433a18[_0xba96ad(0x205)]?.[_0xba96ad(0x237)]};}}exports[a42_0x38e2da(0x1d9)]=RapydService;function a42_0x3d1b(){const _0x47666a=['entries','Error\x20Message:','logWhiteDomainRequest','===\x20RAPYD\x20API\x20ERROR\x20===','Redirect\x20URL:','/v1/hosted/payment_links/','URL:','type','toUpperCase','üá¨üáß\x20Country:\x20','RapydService','status','HTTP\x20','Incomplete\x20response:\x20missing\x20id\x20or\x20redirect_url','Missing\x20id\x20or\x20redirect_url\x20in\x20response','apiUrl','Business\x20Error\x20(','CAN','Processing\x20Rapyd\x20webhook:','error',',\x20body:\x20','===\x20RAPYD\x20SUCCESS\x20===','Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20','POST','application/json','ACT','Payment\x20Link\x20ID:','EXPIRED','headers','parse','===\x20RAPYD\x20API\x20REQUEST\x20(White\x20Domain\x20-\x20Updated\x20Format)\x20===','ERR','PAYMENT_FAILED','processWebhook','1330516BTuCan','Full\x20Error\x20Data:','===\x20RAPYD\x20API\x20INCOMPLETE\x20RESPONSE\x20===','Status:','Request\x20Body\x20(Updated\x20Format):','merchant_reference_id','statusText','CLO','HTTP\x20error!\x20status:\x20','stringify','logWhiteDomainResponse','json','createPaymentLink','text','GET','744632JUuiEO','HTTP\x20Status:','3578820luCraQ','Response\x20data:','===\x20RAPYD\x20API\x20BUSINESS\x20ERROR\x20===','data','amount','PAID','\x20(GB\x20-\x20Britain)','300153hHfPfC','redirect_url','Status\x20Text:','):\x20','Response\x20Body:','3521008QdniTK','Rapyd\x20API\x20error\x20(','https://tesoft.uk/gateway/rapyd/','error_code','EXP','Rapyd\x20payment\x20verification\x20error:','FAILED','paid','Failed\x20to\x20parse\x20JSON\x20response:','SUCCESS','/v1/hosted/payment_links','https://tesoft.uk/gateway/success.php?id=','stack','===\x20RAPYD\x20API\x20RESPONSE\x20(White\x20Domain)\x20===','Error\x20Code:','Invalid\x20JSON\x20response\x20from\x20Rapyd\x20API:\x20','gb_visa_card','logWhiteDomainError','log','defineProperty','10549GVJmlK','Invalid\x20response\x20from\x20Rapyd\x20API:\x20missing\x20id\x20or\x20redirect_url','loggerService','NEW','rapyd','Rapyd\x20API\x20error:\x20','3qPFZMW','now','30WgJloo','Error\x20stack:','https://tesoft.uk/gateway/fail.php?id=','PENDING','1626kJrKBl','5079123JuDuVl','Error\x20message:','üí≥\x20Payment\x20Methods:\x20gb_visa_card,\x20gb_mastercard_card','Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20Unknown\x20error','PAYMENT_EXPIRED','verifyPayment','üá¨üáß\x20Using\x20GB\x20(Britain)\x20as\x20country\x20for\x20Rapyd\x20payment\x20link','../loggerService','currency','Unknown\x20error','PAYMENT_COMPLETED','PAYMENT_CANCELED','message','\x20(always\x20GB\x20for\x20Rapyd)'];a42_0x3d1b=function(){return _0x47666a;};return a42_0x3d1b();}