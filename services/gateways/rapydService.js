'use strict';const a42_0x2f66c7=a42_0x55c3;(function(_0x414688,_0x30a02){const _0x535ec9=a42_0x55c3,_0x39ae45=_0x414688();while(!![]){try{const _0x24ad2e=-parseInt(_0x535ec9(0x1d2))/0x1+parseInt(_0x535ec9(0x1c6))/0x2*(parseInt(_0x535ec9(0x1ae))/0x3)+parseInt(_0x535ec9(0x1ea))/0x4*(-parseInt(_0x535ec9(0x1d4))/0x5)+parseInt(_0x535ec9(0x1ed))/0x6+-parseInt(_0x535ec9(0x1cc))/0x7+parseInt(_0x535ec9(0x1e2))/0x8+-parseInt(_0x535ec9(0x1fd))/0x9*(-parseInt(_0x535ec9(0x1a1))/0xa);if(_0x24ad2e===_0x30a02)break;else _0x39ae45['push'](_0x39ae45['shift']());}catch(_0x2d1536){_0x39ae45['push'](_0x39ae45['shift']());}}}(a42_0x2b92,0x8a718));Object[a42_0x2f66c7(0x1c5)](exports,a42_0x2f66c7(0x1be),{'value':!![]}),exports['RapydService']=void 0x0;const loggerService_1=require(a42_0x2f66c7(0x202));function a42_0x55c3(_0x4a2b0e,_0x179935){const _0x2b92c4=a42_0x2b92();return a42_0x55c3=function(_0x55c33c,_0x2bba2a){_0x55c33c=_0x55c33c-0x19d;let _0x131621=_0x2b92c4[_0x55c33c];return _0x131621;},a42_0x55c3(_0x4a2b0e,_0x179935);}class RapydService{constructor(){const _0x494c0c=a42_0x2f66c7;this[_0x494c0c(0x1fa)]=_0x494c0c(0x1f9),console[_0x494c0c(0x1fb)](_0x494c0c(0x1a5));}async[a42_0x2f66c7(0x1b0)](_0x5e98c3){const _0x405e4b=a42_0x2f66c7,{orderId:_0xa13de3,orderName:_0xc8102,amount:_0x5776ea,currency:_0x21dd8f,usage:_0x323204,maxPayments:_0x49d7d2,successUrl:_0x570997,failUrl:_0x3e02a8}=_0x5e98c3,_0x4131ae=_0x21dd8f[_0x405e4b(0x1a9)](),_0x4c8abd='GB';console[_0x405e4b(0x1fb)]('üá¨üáß\x20Using\x20GB\x20(Britain)\x20as\x20country\x20for\x20Rapyd\x20payment\x20link');const _0x5570ca='https://tesoft.uk/gateway/success.php?id='+_0xa13de3,_0x54f21c=_0x405e4b(0x1b9)+_0xa13de3,_0x80d20a={'amount':_0x5776ea,'currency':_0x4131ae,'cancel_checkout_url':_0x54f21c,'complete_checkout_url':_0x5570ca,'complete_payment_url':_0x5570ca,'merchant_reference_id':_0xa13de3,'description':_0x405e4b(0x200)+_0xa13de3,'country':'GB','payment_method_types_include':[_0x405e4b(0x1ca),_0x405e4b(0x19f)],'custom_elements':{'display_description':!![]}},_0x1f0390=Date[_0x405e4b(0x1da)]();try{console['log']('===\x20RAPYD\x20API\x20REQUEST\x20(White\x20Domain\x20-\x20Updated\x20Format)\x20==='),console['log'](_0x405e4b(0x1f2),this['apiUrl']),console[_0x405e4b(0x1fb)](_0x405e4b(0x1dc),JSON['stringify'](_0x80d20a,null,0x2)),console[_0x405e4b(0x1fb)](_0x405e4b(0x1b8)+_0x4c8abd+_0x405e4b(0x1a2)),console[_0x405e4b(0x1fb)](_0x405e4b(0x1f5)),loggerService_1[_0x405e4b(0x1f0)][_0x405e4b(0x1bd)](_0x405e4b(0x1a6),_0x405e4b(0x207),_0x405e4b(0x1ba),_0x80d20a);const _0xcfe250=await fetch(this[_0x405e4b(0x1fa)],{'method':_0x405e4b(0x1ba),'headers':{'Content-Type':_0x405e4b(0x1ac),'User-Agent':_0x405e4b(0x1a3)},'body':JSON[_0x405e4b(0x1c2)](_0x80d20a)}),_0xf0534=Date[_0x405e4b(0x1da)]()-_0x1f0390;console[_0x405e4b(0x1fb)](_0x405e4b(0x1b4)),console[_0x405e4b(0x1fb)](_0x405e4b(0x1c1),_0xcfe250[_0x405e4b(0x1e6)]),console[_0x405e4b(0x1fb)](_0x405e4b(0x1b5),_0xcfe250[_0x405e4b(0x1f1)]),console[_0x405e4b(0x1fb)](_0x405e4b(0x1f8),Object[_0x405e4b(0x1b7)](_0xcfe250[_0x405e4b(0x1c3)][_0x405e4b(0x1c8)]())),console['log'](_0x405e4b(0x1f4),_0xf0534+'ms');const _0x1a90e3=await _0xcfe250['text']();console[_0x405e4b(0x1fb)](_0x405e4b(0x1e0),_0x1a90e3);if(!_0xcfe250['ok']){console['error'](_0x405e4b(0x203)),console[_0x405e4b(0x19e)](_0x405e4b(0x1fe),_0xcfe250[_0x405e4b(0x1e6)]),console[_0x405e4b(0x19e)](_0x405e4b(0x1f3),_0x1a90e3),loggerService_1[_0x405e4b(0x1f0)]['logWhiteDomainResponse'](_0x405e4b(0x1a6),'/v1/hosted/payment_links',_0xcfe250['status'],_0x1a90e3,_0xf0534),loggerService_1[_0x405e4b(0x1f0)]['logWhiteDomainError'](_0x405e4b(0x1a6),'/v1/hosted/payment_links',_0x405e4b(0x1c7)+_0xcfe250[_0x405e4b(0x1e6)]+':\x20'+_0x1a90e3);throw new Error('HTTP\x20error!\x20status:\x20'+_0xcfe250[_0x405e4b(0x1e6)]+_0x405e4b(0x1b1)+_0x1a90e3);}let _0x2919ba;try{_0x2919ba=JSON[_0x405e4b(0x1b2)](_0x1a90e3);}catch(_0x53c8e6){console[_0x405e4b(0x19e)]('Failed\x20to\x20parse\x20JSON\x20response:',_0x53c8e6),loggerService_1[_0x405e4b(0x1f0)]['logWhiteDomainError']('rapyd',_0x405e4b(0x207),_0x405e4b(0x1aa)+_0x53c8e6);throw new Error('Invalid\x20JSON\x20response\x20from\x20Rapyd\x20API:\x20'+_0x1a90e3);}console[_0x405e4b(0x1fb)](_0x405e4b(0x1ff)),console[_0x405e4b(0x1fb)]('Parsed\x20Result:',JSON[_0x405e4b(0x1c2)](_0x2919ba,null,0x2)),loggerService_1['loggerService'][_0x405e4b(0x1c4)](_0x405e4b(0x1a6),_0x405e4b(0x207),_0xcfe250['status'],_0x2919ba,_0xf0534);if(_0x2919ba[_0x405e4b(0x1e6)]?.['status']!=='SUCCESS'){const _0x31ba84=_0x2919ba[_0x405e4b(0x1e6)]?.['message']||_0x405e4b(0x1d0),_0x257461=_0x2919ba[_0x405e4b(0x1e6)]?.[_0x405e4b(0x1de)]||_0x405e4b(0x1f7);console[_0x405e4b(0x19e)](_0x405e4b(0x1e9)),console[_0x405e4b(0x19e)](_0x405e4b(0x1a8),_0x257461),console[_0x405e4b(0x19e)](_0x405e4b(0x1f6),_0x31ba84),console[_0x405e4b(0x19e)](_0x405e4b(0x1b6),_0x2919ba['status']),loggerService_1['loggerService'][_0x405e4b(0x1cb)]('rapyd',_0x405e4b(0x207),_0x405e4b(0x1bb)+_0x257461+_0x405e4b(0x1d1)+_0x31ba84);throw new Error('Rapyd\x20API\x20error\x20('+_0x257461+_0x405e4b(0x1d1)+_0x31ba84);}if(!_0x2919ba[_0x405e4b(0x1a4)]?.['id']||!_0x2919ba[_0x405e4b(0x1a4)]?.[_0x405e4b(0x1ad)]){console[_0x405e4b(0x19e)]('===\x20RAPYD\x20API\x20INCOMPLETE\x20RESPONSE\x20==='),console[_0x405e4b(0x19e)]('Missing\x20id\x20or\x20redirect_url\x20in\x20response'),console[_0x405e4b(0x19e)](_0x405e4b(0x1df),_0x2919ba[_0x405e4b(0x1a4)]),loggerService_1[_0x405e4b(0x1f0)][_0x405e4b(0x1cb)](_0x405e4b(0x1a6),_0x405e4b(0x207),_0x405e4b(0x204));throw new Error('Invalid\x20response\x20from\x20Rapyd\x20API:\x20missing\x20id\x20or\x20redirect_url');}return console[_0x405e4b(0x1fb)]('===\x20RAPYD\x20SUCCESS\x20==='),console[_0x405e4b(0x1fb)](_0x405e4b(0x1cd),_0x2919ba[_0x405e4b(0x1a4)]['id']),console[_0x405e4b(0x1fb)](_0x405e4b(0x1e7),_0x2919ba[_0x405e4b(0x1a4)][_0x405e4b(0x1ad)]),console[_0x405e4b(0x1fb)]('üá¨üáß\x20Country\x20used:\x20'+_0x4c8abd+'\x20(GB\x20-\x20Britain)'),console['log'](_0x405e4b(0x1f5)),{'gateway_payment_id':_0x2919ba[_0x405e4b(0x1a4)]['id'],'payment_url':_0x2919ba[_0x405e4b(0x1a4)][_0x405e4b(0x1ad)]};}catch(_0x2f873f){console[_0x405e4b(0x19e)](_0x405e4b(0x1b3)),console['error'](_0x405e4b(0x1ee),_0x2f873f),loggerService_1[_0x405e4b(0x1f0)][_0x405e4b(0x1cb)](_0x405e4b(0x1a6),_0x405e4b(0x207),_0x2f873f);if(_0x2f873f instanceof Error){console[_0x405e4b(0x19e)]('Error\x20message:',_0x2f873f[_0x405e4b(0x201)]),console[_0x405e4b(0x19e)](_0x405e4b(0x1bc),_0x2f873f[_0x405e4b(0x1bf)]);throw new Error(_0x405e4b(0x1cf)+_0x2f873f[_0x405e4b(0x201)]);}throw new Error('Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20Unknown\x20error');}}async[a42_0x2f66c7(0x1d6)](_0x5f2db3){const _0x4c24cf=a42_0x2f66c7,_0x3e139c=Date[_0x4c24cf(0x1da)]();try{loggerService_1[_0x4c24cf(0x1f0)][_0x4c24cf(0x1bd)](_0x4c24cf(0x1a6),_0x4c24cf(0x19d)+_0x5f2db3,_0x4c24cf(0x1a7),{});const _0x3503ed=await fetch(this[_0x4c24cf(0x1fa)]+'/'+_0x5f2db3,{'method':_0x4c24cf(0x1a7),'headers':{'Content-Type':_0x4c24cf(0x1ac),'User-Agent':_0x4c24cf(0x1a3)}}),_0x4dfb66=Date[_0x4c24cf(0x1da)]()-_0x3e139c;if(!_0x3503ed['ok']){const _0x42f0c9=await _0x3503ed['text']();loggerService_1[_0x4c24cf(0x1f0)][_0x4c24cf(0x1c4)](_0x4c24cf(0x1a6),_0x4c24cf(0x19d)+_0x5f2db3,_0x3503ed[_0x4c24cf(0x1e6)],_0x42f0c9,_0x4dfb66);throw new Error(_0x4c24cf(0x1ab)+_0x3503ed['status']);}const _0x385e7b=await _0x3503ed[_0x4c24cf(0x1d3)]();loggerService_1[_0x4c24cf(0x1f0)][_0x4c24cf(0x1c4)](_0x4c24cf(0x1a6),_0x4c24cf(0x19d)+_0x5f2db3,_0x3503ed[_0x4c24cf(0x1e6)],_0x385e7b,_0x4dfb66);if(_0x385e7b[_0x4c24cf(0x1e6)]?.['status']!==_0x4c24cf(0x1e3)){loggerService_1[_0x4c24cf(0x1f0)][_0x4c24cf(0x1cb)](_0x4c24cf(0x1a6),_0x4c24cf(0x19d)+_0x5f2db3,_0x4c24cf(0x1eb)+(_0x385e7b[_0x4c24cf(0x1e6)]?.[_0x4c24cf(0x201)]||_0x4c24cf(0x1d5)));throw new Error(_0x4c24cf(0x1eb)+(_0x385e7b[_0x4c24cf(0x1e6)]?.['message']||_0x4c24cf(0x1d5)));}let _0x201f4b='PENDING';if(_0x385e7b[_0x4c24cf(0x1a4)]?.[_0x4c24cf(0x1e6)])switch(_0x385e7b[_0x4c24cf(0x1a4)][_0x4c24cf(0x1e6)][_0x4c24cf(0x1a9)]()){case _0x4c24cf(0x206):_0x201f4b=_0x4c24cf(0x1d7);break;case _0x4c24cf(0x1e8):_0x201f4b=_0x4c24cf(0x1af);break;case _0x4c24cf(0x1fc):_0x201f4b=_0x4c24cf(0x1db);break;case _0x4c24cf(0x1ce):_0x201f4b='FAILED';break;case'NEW':case _0x4c24cf(0x1e1):default:_0x201f4b=_0x4c24cf(0x1d8);break;}return{'status':_0x201f4b,'amount':_0x385e7b[_0x4c24cf(0x1a4)]?.[_0x4c24cf(0x1ef)],'currency':_0x385e7b['data']?.[_0x4c24cf(0x1e5)]};}catch(_0x1e9771){console[_0x4c24cf(0x19e)]('Rapyd\x20payment\x20verification\x20error:',_0x1e9771),loggerService_1['loggerService']['logWhiteDomainError']('rapyd','/v1/hosted/payment_links/'+_0x5f2db3,_0x1e9771);throw new Error(_0x4c24cf(0x1c9)+(_0x1e9771 instanceof Error?_0x1e9771[_0x4c24cf(0x201)]:'Unknown\x20error'));}}async[a42_0x2f66c7(0x1ec)](_0x599ea8){const _0x23934a=a42_0x2f66c7;console[_0x23934a(0x1fb)](_0x23934a(0x1e4),_0x599ea8);let _0x2f8886=_0x23934a(0x1d8);switch(_0x599ea8[_0x23934a(0x205)]?.['toUpperCase']()){case _0x23934a(0x1a0):_0x599ea8[_0x23934a(0x1a4)]?.[_0x23934a(0x1c0)]===!![]&&_0x599ea8['data']?.[_0x23934a(0x1e6)]===_0x23934a(0x206)?_0x2f8886=_0x23934a(0x1d7):_0x2f8886=_0x23934a(0x1d8);break;case'PAYMENT_CANCELED':_0x2f8886=_0x23934a(0x1af);break;case _0x23934a(0x1d9):_0x2f8886=_0x23934a(0x1db);break;case'PAYMENT_FAILED':_0x2f8886=_0x23934a(0x1af);break;default:switch(_0x599ea8['data']?.['status']?.[_0x23934a(0x1a9)]()){case _0x23934a(0x206):_0x599ea8[_0x23934a(0x1a4)]?.[_0x23934a(0x1c0)]===!![]?_0x2f8886='PAID':_0x2f8886=_0x23934a(0x1af);break;case _0x23934a(0x1e8):_0x2f8886=_0x23934a(0x1af);break;case _0x23934a(0x1fc):_0x2f8886=_0x23934a(0x1db);break;case'ERR':_0x2f8886=_0x23934a(0x1af);break;case _0x23934a(0x1dd):case _0x23934a(0x1e1):default:_0x2f8886=_0x23934a(0x1d8);break;}break;}return{'paymentId':_0x599ea8[_0x23934a(0x1a4)]?.['merchant_reference_id']||'','status':_0x2f8886,'amount':_0x599ea8['data']?.[_0x23934a(0x1ef)],'currency':_0x599ea8[_0x23934a(0x1a4)]?.['currency']};}}function a42_0x2b92(){const _0x150d59=['UNKNOWN','Headers:','https://tesoft.uk/gateway/rapyd/','apiUrl','log','EXP','2745ZjhKNx','HTTP\x20Status:','===\x20PARSED\x20RAPYD\x20RESPONSE\x20===','ORDER:\x20','message','../loggerService','===\x20RAPYD\x20API\x20ERROR\x20===','Incomplete\x20response:\x20missing\x20id\x20or\x20redirect_url','type','CLO','/v1/hosted/payment_links','/v1/hosted/payment_links/','error','gb_mastercard_card','PAYMENT_COMPLETED','6710kfYuUu','\x20(always\x20GB\x20for\x20Rapyd)','TesSoft\x20Payment\x20System/1.0','data','üåê\x20Rapyd\x20service\x20initialized\x20with\x20white\x20domain\x20proxy','rapyd','GET','Error\x20Code:','toUpperCase','JSON\x20Parse\x20Error:\x20','HTTP\x20error!\x20status:\x20','application/json','redirect_url','594831ifAmGx','FAILED','createPaymentLink',',\x20body:\x20','parse','===\x20RAPYD\x20SERVICE\x20ERROR\x20===','===\x20RAPYD\x20API\x20RESPONSE\x20(White\x20Domain)\x20===','Status\x20Text:','Full\x20Error\x20Data:','fromEntries','üá¨üáß\x20Country:\x20','https://tesoft.uk/gateway/fail.php?id=','POST','Business\x20Error\x20(','Error\x20stack:','logWhiteDomainRequest','__esModule','stack','paid','Status:','stringify','headers','logWhiteDomainResponse','defineProperty','10vqXUvM','HTTP\x20','entries','Failed\x20to\x20verify\x20Rapyd\x20payment:\x20','gb_visa_card','logWhiteDomainError','790489EjSlGE','Payment\x20Link\x20ID:','ERR','Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20','Unknown\x20error\x20from\x20Rapyd\x20API','):\x20','880360bAEHon','json','5rkykCl','Unknown\x20error','verifyPayment','PAID','PENDING','PAYMENT_EXPIRED','now','EXPIRED','Request\x20Body\x20(Updated\x20Format):','NEW','error_code','Response\x20data:','Raw\x20Response\x20Body:','ACT','6324904bHEMMm','SUCCESS','Processing\x20Rapyd\x20webhook:','currency','status','Redirect\x20URL:','CAN','===\x20RAPYD\x20API\x20BUSINESS\x20ERROR\x20===','3406540RgkOmD','Rapyd\x20API\x20error:\x20','processWebhook','2551998SAAaRs','Error\x20details:','amount','loggerService','statusText','URL:','Response\x20Body:','Response\x20Time:','üí≥\x20Payment\x20Methods:\x20gb_visa_card,\x20gb_mastercard_card','Error\x20Message:'];a42_0x2b92=function(){return _0x150d59;};return a42_0x2b92();}exports['RapydService']=RapydService;