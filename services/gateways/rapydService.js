'use strict';const a42_0x53ee41=a42_0x5069;(function(_0x28378c,_0x3665d2){const _0xdae60f=a42_0x5069,_0x57731a=_0x28378c();while(!![]){try{const _0x3e159e=-parseInt(_0xdae60f(0x121))/0x1*(-parseInt(_0xdae60f(0x139))/0x2)+parseInt(_0xdae60f(0x131))/0x3+-parseInt(_0xdae60f(0x118))/0x4+-parseInt(_0xdae60f(0xfb))/0x5+-parseInt(_0xdae60f(0xe0))/0x6*(parseInt(_0xdae60f(0x10a))/0x7)+parseInt(_0xdae60f(0xeb))/0x8*(parseInt(_0xdae60f(0xea))/0x9)+-parseInt(_0xdae60f(0xe3))/0xa*(-parseInt(_0xdae60f(0x109))/0xb);if(_0x3e159e===_0x3665d2)break;else _0x57731a['push'](_0x57731a['shift']());}catch(_0x58c3e8){_0x57731a['push'](_0x57731a['shift']());}}}(a42_0x576f,0x4f6d3));function a42_0x5069(_0x5c96d5,_0x195b61){const _0x576f09=a42_0x576f();return a42_0x5069=function(_0x506905,_0x4a6ec4){_0x506905=_0x506905-0xd7;let _0x52d790=_0x576f09[_0x506905];return _0x52d790;},a42_0x5069(_0x5c96d5,_0x195b61);}Object[a42_0x53ee41(0xda)](exports,a42_0x53ee41(0x12f),{'value':!![]}),exports['RapydService']=void 0x0;function a42_0x576f(){const _0x396005=['===\x20RAPYD\x20API\x20BUSINESS\x20ERROR\x20===','6eodaOo','Incomplete\x20response:\x20missing\x20id\x20or\x20redirect_url','https://tesoft.uk/gateway/success.php?id=','gb_visa_card','PAYMENT_EXPIRED','Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20','üåê\x20Rapyd\x20service\x20initialized\x20with\x20white\x20domain\x20proxy','Rapyd\x20payment\x20verification\x20error:','gb_mastercard_card','/v1/hosted/payment_links','processWebhook','Parsed\x20Result:','===\x20RAPYD\x20API\x20ERROR\x20===','===\x20RAPYD\x20API\x20RESPONSE\x20(White\x20Domain)\x20===','__esModule','Request\x20Body\x20(Updated\x20Format):','125064UeKAHn','/v1/hosted/payment_links/','Status\x20Text:','Response\x20data:','Missing\x20id\x20or\x20redirect_url\x20in\x20response','logWhiteDomainRequest','üá¨üáß\x20Country\x20used:\x20','verifyPayment','50538rojACo','ACT','Error\x20message:','createPaymentLink','toUpperCase','data','redirect_url','application/json','EXPIRED','text','headers','EXP','HTTP\x20Status:','Error\x20Code:','Rapyd\x20API\x20error\x20(','HTTP\x20error!\x20status:\x20','loggerService','PENDING','parse','defineProperty','Error\x20details:','CLO','Response\x20Body:','Processing\x20Rapyd\x20webhook:','status','1143222YNceWD','statusText','Failed\x20to\x20parse\x20JSON\x20response:','9106830GLYFky','NEW','../loggerService','üí≥\x20Payment\x20Methods:\x20gb_visa_card,\x20gb_mastercard_card','GET','paid','now','27ToFXmD','169256AdsJQx','===\x20PARSED\x20RAPYD\x20RESPONSE\x20===','FAILED','log','CAN','ORDER:\x20','Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20Unknown\x20error','rapyd','Failed\x20to\x20verify\x20Rapyd\x20payment:\x20','SUCCESS','logWhiteDomainResponse','Rapyd\x20API\x20error:\x20','):\x20','error','json','PAYMENT_CANCELED','2083085WebBAQ','TesSoft\x20Payment\x20System/1.0','stringify','===\x20RAPYD\x20SUCCESS\x20===','currency','PAYMENT_COMPLETED','ERR','Headers:','entries','Payment\x20Link\x20ID:','Invalid\x20response\x20from\x20Rapyd\x20API:\x20missing\x20id\x20or\x20redirect_url','https://tesoft.uk/gateway/fail.php?id=','Full\x20Error\x20Data:','stack','11BhFfAk','14lvEQNW','===\x20RAPYD\x20SERVICE\x20ERROR\x20===','UNKNOWN','type','POST','message',',\x20body:\x20','logWhiteDomainError','merchant_reference_id','Unknown\x20error\x20from\x20Rapyd\x20API','\x20(always\x20GB\x20for\x20Rapyd)','https://tesoft.uk/gateway/rapyd/','üá¨üáß\x20Using\x20GB\x20(Britain)\x20as\x20country\x20for\x20Rapyd\x20payment\x20link','Unknown\x20error','177736rKjGWA','===\x20RAPYD\x20API\x20INCOMPLETE\x20RESPONSE\x20===','Raw\x20Response\x20Body:','amount','RapydService','apiUrl','HTTP\x20','PAID'];a42_0x576f=function(){return _0x396005;};return a42_0x576f();}const loggerService_1=require(a42_0x53ee41(0xe5));class RapydService{constructor(){const _0x8768b=a42_0x53ee41;this[_0x8768b(0x11d)]=_0x8768b(0x115),console['log'](_0x8768b(0x127));}async[a42_0x53ee41(0x13c)](_0x864cb6){const _0x2f4c98=a42_0x53ee41,{orderId:_0x5b4742,orderName:_0x4f7693,amount:_0x4d9df3,currency:_0x23a28d,usage:_0x584193,maxPayments:_0x496743,successUrl:_0xe270bf,failUrl:_0x1abaf1}=_0x864cb6,_0x395b92=_0x23a28d['toUpperCase'](),_0x2e72fb='GB';console['log'](_0x2f4c98(0x116));const _0x169909=_0x2f4c98(0x123)+_0x5b4742,_0x198f30=_0x2f4c98(0x106)+_0x5b4742,_0x36b007={'amount':_0x4d9df3,'currency':_0x395b92,'cancel_checkout_url':_0x198f30,'complete_checkout_url':_0x169909,'complete_payment_url':_0x169909,'merchant_reference_id':_0x5b4742,'description':_0x2f4c98(0xf0)+_0x5b4742,'country':'GB','payment_method_types_include':[_0x2f4c98(0x124),_0x2f4c98(0x129)],'custom_elements':{'display_description':!![]}},_0xc4184a=Date[_0x2f4c98(0xe9)]();try{console[_0x2f4c98(0xee)]('===\x20RAPYD\x20API\x20REQUEST\x20(White\x20Domain\x20-\x20Updated\x20Format)\x20==='),console['log']('URL:',this[_0x2f4c98(0x11d)]),console[_0x2f4c98(0xee)](_0x2f4c98(0x130),JSON[_0x2f4c98(0xfd)](_0x36b007,null,0x2)),console[_0x2f4c98(0xee)]('üá¨üáß\x20Country:\x20'+_0x2e72fb+_0x2f4c98(0x114)),console[_0x2f4c98(0xee)](_0x2f4c98(0xe6)),loggerService_1[_0x2f4c98(0xd7)][_0x2f4c98(0x136)](_0x2f4c98(0xf2),_0x2f4c98(0x12a),_0x2f4c98(0x10e),_0x36b007);const _0x2df2d2=await fetch(this[_0x2f4c98(0x11d)],{'method':_0x2f4c98(0x10e),'headers':{'Content-Type':'application/json','User-Agent':_0x2f4c98(0xfc)},'body':JSON[_0x2f4c98(0xfd)](_0x36b007)}),_0x3c879e=Date[_0x2f4c98(0xe9)]()-_0xc4184a;console[_0x2f4c98(0xee)](_0x2f4c98(0x12e)),console[_0x2f4c98(0xee)]('Status:',_0x2df2d2[_0x2f4c98(0xdf)]),console[_0x2f4c98(0xee)](_0x2f4c98(0x133),_0x2df2d2[_0x2f4c98(0xe1)]),console[_0x2f4c98(0xee)](_0x2f4c98(0x102),Object['fromEntries'](_0x2df2d2[_0x2f4c98(0x143)][_0x2f4c98(0x103)]())),console[_0x2f4c98(0xee)]('Response\x20Time:',_0x3c879e+'ms');const _0x4b25c4=await _0x2df2d2[_0x2f4c98(0x142)]();console['log'](_0x2f4c98(0x11a),_0x4b25c4);if(!_0x2df2d2['ok']){console[_0x2f4c98(0xf8)](_0x2f4c98(0x12d)),console[_0x2f4c98(0xf8)](_0x2f4c98(0x145),_0x2df2d2[_0x2f4c98(0xdf)]),console['error'](_0x2f4c98(0xdd),_0x4b25c4),loggerService_1[_0x2f4c98(0xd7)][_0x2f4c98(0xf5)](_0x2f4c98(0xf2),_0x2f4c98(0x12a),_0x2df2d2[_0x2f4c98(0xdf)],_0x4b25c4,_0x3c879e),loggerService_1[_0x2f4c98(0xd7)]['logWhiteDomainError'](_0x2f4c98(0xf2),_0x2f4c98(0x12a),_0x2f4c98(0x11e)+_0x2df2d2[_0x2f4c98(0xdf)]+':\x20'+_0x4b25c4);throw new Error('HTTP\x20error!\x20status:\x20'+_0x2df2d2[_0x2f4c98(0xdf)]+_0x2f4c98(0x110)+_0x4b25c4);}let _0x1f892a;try{_0x1f892a=JSON[_0x2f4c98(0xd9)](_0x4b25c4);}catch(_0x1de899){console['error'](_0x2f4c98(0xe2),_0x1de899),loggerService_1['loggerService'][_0x2f4c98(0x111)](_0x2f4c98(0xf2),_0x2f4c98(0x12a),'JSON\x20Parse\x20Error:\x20'+_0x1de899);throw new Error('Invalid\x20JSON\x20response\x20from\x20Rapyd\x20API:\x20'+_0x4b25c4);}console[_0x2f4c98(0xee)](_0x2f4c98(0xec)),console['log'](_0x2f4c98(0x12c),JSON[_0x2f4c98(0xfd)](_0x1f892a,null,0x2)),loggerService_1['loggerService']['logWhiteDomainResponse']('rapyd','/v1/hosted/payment_links',_0x2df2d2[_0x2f4c98(0xdf)],_0x1f892a,_0x3c879e);if(_0x1f892a[_0x2f4c98(0xdf)]?.[_0x2f4c98(0xdf)]!==_0x2f4c98(0xf4)){const _0x3a8e34=_0x1f892a[_0x2f4c98(0xdf)]?.['message']||_0x2f4c98(0x113),_0x55a45e=_0x1f892a[_0x2f4c98(0xdf)]?.['error_code']||_0x2f4c98(0x10c);console[_0x2f4c98(0xf8)](_0x2f4c98(0x120)),console[_0x2f4c98(0xf8)](_0x2f4c98(0x146),_0x55a45e),console[_0x2f4c98(0xf8)]('Error\x20Message:',_0x3a8e34),console[_0x2f4c98(0xf8)](_0x2f4c98(0x107),_0x1f892a[_0x2f4c98(0xdf)]),loggerService_1[_0x2f4c98(0xd7)][_0x2f4c98(0x111)](_0x2f4c98(0xf2),'/v1/hosted/payment_links','Business\x20Error\x20('+_0x55a45e+_0x2f4c98(0xf7)+_0x3a8e34);throw new Error(_0x2f4c98(0x147)+_0x55a45e+_0x2f4c98(0xf7)+_0x3a8e34);}if(!_0x1f892a[_0x2f4c98(0x13e)]?.['id']||!_0x1f892a[_0x2f4c98(0x13e)]?.['redirect_url']){console[_0x2f4c98(0xf8)](_0x2f4c98(0x119)),console[_0x2f4c98(0xf8)](_0x2f4c98(0x135)),console[_0x2f4c98(0xf8)](_0x2f4c98(0x134),_0x1f892a[_0x2f4c98(0x13e)]),loggerService_1['loggerService'][_0x2f4c98(0x111)](_0x2f4c98(0xf2),_0x2f4c98(0x12a),_0x2f4c98(0x122));throw new Error(_0x2f4c98(0x105));}return console[_0x2f4c98(0xee)](_0x2f4c98(0xfe)),console['log'](_0x2f4c98(0x104),_0x1f892a[_0x2f4c98(0x13e)]['id']),console[_0x2f4c98(0xee)]('Redirect\x20URL:',_0x1f892a['data'][_0x2f4c98(0x13f)]),console[_0x2f4c98(0xee)](_0x2f4c98(0x137)+_0x2e72fb+'\x20(GB\x20-\x20Britain)'),console[_0x2f4c98(0xee)](_0x2f4c98(0xe6)),{'gateway_payment_id':_0x1f892a[_0x2f4c98(0x13e)]['id'],'payment_url':_0x1f892a[_0x2f4c98(0x13e)][_0x2f4c98(0x13f)]};}catch(_0x4a3e92){console[_0x2f4c98(0xf8)](_0x2f4c98(0x10b)),console[_0x2f4c98(0xf8)](_0x2f4c98(0xdb),_0x4a3e92),loggerService_1[_0x2f4c98(0xd7)][_0x2f4c98(0x111)](_0x2f4c98(0xf2),_0x2f4c98(0x12a),_0x4a3e92);if(_0x4a3e92 instanceof Error){console['error'](_0x2f4c98(0x13b),_0x4a3e92[_0x2f4c98(0x10f)]),console[_0x2f4c98(0xf8)]('Error\x20stack:',_0x4a3e92[_0x2f4c98(0x108)]);throw new Error(_0x2f4c98(0x126)+_0x4a3e92[_0x2f4c98(0x10f)]);}throw new Error(_0x2f4c98(0xf1));}}async[a42_0x53ee41(0x138)](_0x406f31){const _0x566967=a42_0x53ee41,_0x426463=Date['now']();try{loggerService_1['loggerService'][_0x566967(0x136)](_0x566967(0xf2),'/v1/hosted/payment_links/'+_0x406f31,'GET',{});const _0x4da5dc=await fetch(this[_0x566967(0x11d)]+'/'+_0x406f31,{'method':_0x566967(0xe7),'headers':{'Content-Type':_0x566967(0x140),'User-Agent':_0x566967(0xfc)}}),_0x3ce42a=Date[_0x566967(0xe9)]()-_0x426463;if(!_0x4da5dc['ok']){const _0x13ea94=await _0x4da5dc[_0x566967(0x142)]();loggerService_1[_0x566967(0xd7)][_0x566967(0xf5)](_0x566967(0xf2),'/v1/hosted/payment_links/'+_0x406f31,_0x4da5dc['status'],_0x13ea94,_0x3ce42a);throw new Error(_0x566967(0x148)+_0x4da5dc[_0x566967(0xdf)]);}const _0x4d8421=await _0x4da5dc[_0x566967(0xf9)]();loggerService_1[_0x566967(0xd7)][_0x566967(0xf5)](_0x566967(0xf2),'/v1/hosted/payment_links/'+_0x406f31,_0x4da5dc['status'],_0x4d8421,_0x3ce42a);if(_0x4d8421[_0x566967(0xdf)]?.[_0x566967(0xdf)]!==_0x566967(0xf4)){loggerService_1[_0x566967(0xd7)][_0x566967(0x111)]('rapyd',_0x566967(0x132)+_0x406f31,_0x566967(0xf6)+(_0x4d8421[_0x566967(0xdf)]?.[_0x566967(0x10f)]||'Unknown\x20error'));throw new Error(_0x566967(0xf6)+(_0x4d8421[_0x566967(0xdf)]?.[_0x566967(0x10f)]||_0x566967(0x117)));}let _0xef7d0c=_0x566967(0xd8);if(_0x4d8421['data']?.[_0x566967(0xdf)])switch(_0x4d8421[_0x566967(0x13e)][_0x566967(0xdf)]['toUpperCase']()){case _0x566967(0xdc):_0xef7d0c=_0x566967(0x11f);break;case _0x566967(0xef):_0xef7d0c=_0x566967(0xed);break;case'EXP':_0xef7d0c=_0x566967(0x141);break;case _0x566967(0x101):_0xef7d0c=_0x566967(0xed);break;case _0x566967(0xe4):case _0x566967(0x13a):default:_0xef7d0c='PENDING';break;}return{'status':_0xef7d0c,'amount':_0x4d8421[_0x566967(0x13e)]?.[_0x566967(0x11b)],'currency':_0x4d8421[_0x566967(0x13e)]?.[_0x566967(0xff)]};}catch(_0x445c32){console[_0x566967(0xf8)](_0x566967(0x128),_0x445c32),loggerService_1[_0x566967(0xd7)][_0x566967(0x111)](_0x566967(0xf2),_0x566967(0x132)+_0x406f31,_0x445c32);throw new Error(_0x566967(0xf3)+(_0x445c32 instanceof Error?_0x445c32[_0x566967(0x10f)]:_0x566967(0x117)));}}async[a42_0x53ee41(0x12b)](_0x28d912){const _0x3f0dee=a42_0x53ee41;console[_0x3f0dee(0xee)](_0x3f0dee(0xde),_0x28d912);let _0x1850e7=_0x3f0dee(0xd8);switch(_0x28d912[_0x3f0dee(0x10d)]?.[_0x3f0dee(0x13d)]()){case _0x3f0dee(0x100):_0x28d912['data']?.[_0x3f0dee(0xe8)]===!![]&&_0x28d912[_0x3f0dee(0x13e)]?.[_0x3f0dee(0xdf)]==='CLO'?_0x1850e7=_0x3f0dee(0x11f):_0x1850e7=_0x3f0dee(0xd8);break;case _0x3f0dee(0xfa):_0x1850e7=_0x3f0dee(0xed);break;case _0x3f0dee(0x125):_0x1850e7=_0x3f0dee(0x141);break;case'PAYMENT_FAILED':_0x1850e7='FAILED';break;default:switch(_0x28d912[_0x3f0dee(0x13e)]?.[_0x3f0dee(0xdf)]?.['toUpperCase']()){case _0x3f0dee(0xdc):_0x28d912[_0x3f0dee(0x13e)]?.[_0x3f0dee(0xe8)]===!![]?_0x1850e7='PAID':_0x1850e7=_0x3f0dee(0xed);break;case'CAN':_0x1850e7=_0x3f0dee(0xed);break;case _0x3f0dee(0x144):_0x1850e7='EXPIRED';break;case _0x3f0dee(0x101):_0x1850e7=_0x3f0dee(0xed);break;case _0x3f0dee(0xe4):case _0x3f0dee(0x13a):default:_0x1850e7=_0x3f0dee(0xd8);break;}break;}return{'paymentId':_0x28d912[_0x3f0dee(0x13e)]?.[_0x3f0dee(0x112)]||'','status':_0x1850e7,'amount':_0x28d912[_0x3f0dee(0x13e)]?.[_0x3f0dee(0x11b)],'currency':_0x28d912[_0x3f0dee(0x13e)]?.[_0x3f0dee(0xff)]};}}exports[a42_0x53ee41(0x11c)]=RapydService;