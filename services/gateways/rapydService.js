'use strict';const a45_0x361f79=a45_0x1b62;(function(_0x35b0a7,_0x3f669a){const _0x3adb38=a45_0x1b62,_0x1360e2=_0x35b0a7();while(!![]){try{const _0x19d2b0=parseInt(_0x3adb38(0xdc))/0x1+-parseInt(_0x3adb38(0xd4))/0x2*(parseInt(_0x3adb38(0x71))/0x3)+parseInt(_0x3adb38(0xa3))/0x4*(-parseInt(_0x3adb38(0x92))/0x5)+parseInt(_0x3adb38(0x91))/0x6+-parseInt(_0x3adb38(0x85))/0x7+-parseInt(_0x3adb38(0xc3))/0x8+parseInt(_0x3adb38(0xa1))/0x9;if(_0x19d2b0===_0x3f669a)break;else _0x1360e2['push'](_0x1360e2['shift']());}catch(_0x2d7520){_0x1360e2['push'](_0x1360e2['shift']());}}}(a45_0x1ca1,0xc1658));Object[a45_0x361f79(0xb0)](exports,'__esModule',{'value':!![]}),exports['RapydService']=void 0x0;const loggerService_1=require(a45_0x361f79(0x9d));class RapydService{constructor(){const _0x2ae790=a45_0x361f79;this[_0x2ae790(0xd3)]='https://tesoft.uk/gateway/rapyd/',console[_0x2ae790(0x90)](_0x2ae790(0xda));}async[a45_0x361f79(0xb4)](_0x38b501){const _0x416ca8=a45_0x361f79,{orderId:_0xf66605,orderName:_0x134215,amount:_0x16b412,currency:_0x477085,usage:_0x463cfb,maxPayments:_0x2fcae6,successUrl:_0xb0f192,failUrl:_0x5c999b}=_0x38b501,_0x37d381=_0x477085[_0x416ca8(0xcf)](),_0x1fe3ac='GB';console[_0x416ca8(0x90)](_0x416ca8(0x82));const _0x13994a='https://tesoft.uk/gateway/success.php?id='+_0xf66605,_0x15608c=_0x416ca8(0x72)+_0xf66605,_0x158eb2={'amount':_0x16b412,'currency':_0x37d381,'cancel_checkout_url':_0x15608c,'complete_checkout_url':_0x13994a,'complete_payment_url':_0x13994a,'merchant_reference_id':_0xf66605,'description':_0x416ca8(0xad)+_0xf66605,'country':'GB','payment_method_types_include':[_0x416ca8(0xb2),_0x416ca8(0xc5)],'custom_elements':{'display_description':!![]}},_0x5bf554=Date[_0x416ca8(0xd9)]();try{console[_0x416ca8(0x90)](_0x416ca8(0x84)),console[_0x416ca8(0x90)](_0x416ca8(0xca),this[_0x416ca8(0xd3)]),console[_0x416ca8(0x90)](_0x416ca8(0x87),JSON[_0x416ca8(0xbf)](_0x158eb2,null,0x2)),console[_0x416ca8(0x90)]('🇬🇧\x20Country:\x20'+_0x1fe3ac+'\x20(always\x20GB\x20for\x20Rapyd)'),console[_0x416ca8(0x90)]('💳\x20Payment\x20Methods:\x20gb_visa_card,\x20gb_mastercard_card'),loggerService_1['loggerService'][_0x416ca8(0xc4)](_0x416ca8(0xa6),_0x416ca8(0x97),_0x416ca8(0x9c),_0x158eb2);const _0x569e62=await fetch(this['apiUrl'],{'method':_0x416ca8(0x9c),'headers':{'Content-Type':_0x416ca8(0xa2),'User-Agent':'TesSoft\x20Payment\x20System/1.0'},'body':JSON['stringify'](_0x158eb2)}),_0x4a51cd=Date[_0x416ca8(0xd9)]()-_0x5bf554;console[_0x416ca8(0x90)](_0x416ca8(0x7b)),console[_0x416ca8(0x90)](_0x416ca8(0xae),_0x569e62['status']),console[_0x416ca8(0x90)](_0x416ca8(0x89),_0x569e62[_0x416ca8(0xbe)]),console['log'](_0x416ca8(0xd0),Object[_0x416ca8(0xc9)](_0x569e62[_0x416ca8(0xd8)][_0x416ca8(0xc2)]())),console['log']('Response\x20Time:',_0x4a51cd+'ms');const _0x4f239a=await _0x569e62[_0x416ca8(0xde)]();console['log'](_0x416ca8(0xa8),_0x4f239a);if(!_0x569e62['ok']){console['error'](_0x416ca8(0xa7)),console[_0x416ca8(0x70)](_0x416ca8(0xd7),_0x569e62[_0x416ca8(0x7e)]),console['error'](_0x416ca8(0x93),_0x4f239a),loggerService_1[_0x416ca8(0xb7)]['logWhiteDomainResponse']('rapyd',_0x416ca8(0x97),_0x569e62['status'],_0x4f239a,_0x4a51cd),loggerService_1[_0x416ca8(0xb7)][_0x416ca8(0xdd)]('rapyd',_0x416ca8(0x97),_0x416ca8(0xc0)+_0x569e62[_0x416ca8(0x7e)]+':\x20'+_0x4f239a);throw new Error(_0x416ca8(0xce)+_0x569e62[_0x416ca8(0x7e)]+_0x416ca8(0x86)+_0x4f239a);}let _0x5401ce;try{_0x5401ce=JSON['parse'](_0x4f239a);}catch(_0x4b1bad){console[_0x416ca8(0x70)]('Failed\x20to\x20parse\x20JSON\x20response:',_0x4b1bad),loggerService_1[_0x416ca8(0xb7)]['logWhiteDomainError']('rapyd',_0x416ca8(0x97),_0x416ca8(0x95)+_0x4b1bad);throw new Error(_0x416ca8(0x98)+_0x4f239a);}console[_0x416ca8(0x90)](_0x416ca8(0x8c)),console[_0x416ca8(0x90)](_0x416ca8(0x78),JSON['stringify'](_0x5401ce,null,0x2)),loggerService_1['loggerService'][_0x416ca8(0x6d)](_0x416ca8(0xa6),_0x416ca8(0x97),_0x569e62[_0x416ca8(0x7e)],_0x5401ce,_0x4a51cd);if(_0x5401ce[_0x416ca8(0x7e)]?.[_0x416ca8(0x7e)]!=='SUCCESS'){const _0x1139f4=_0x5401ce[_0x416ca8(0x7e)]?.[_0x416ca8(0xd6)]||_0x416ca8(0x6f),_0x445247=_0x5401ce[_0x416ca8(0x7e)]?.['error_code']||_0x416ca8(0xa4);console[_0x416ca8(0x70)](_0x416ca8(0x83)),console[_0x416ca8(0x70)](_0x416ca8(0x8b),_0x445247),console[_0x416ca8(0x70)](_0x416ca8(0x75),_0x1139f4),console['error']('Full\x20Error\x20Data:',_0x5401ce['status']),loggerService_1[_0x416ca8(0xb7)][_0x416ca8(0xdd)]('rapyd',_0x416ca8(0x97),'Business\x20Error\x20('+_0x445247+'):\x20'+_0x1139f4);throw new Error('Rapyd\x20API\x20error\x20('+_0x445247+_0x416ca8(0x9f)+_0x1139f4);}if(!_0x5401ce['data']?.['id']||!_0x5401ce[_0x416ca8(0xc8)]?.[_0x416ca8(0x99)]){console['error'](_0x416ca8(0x8f)),console[_0x416ca8(0x70)](_0x416ca8(0x80)),console['error']('Response\x20data:',_0x5401ce['data']),loggerService_1[_0x416ca8(0xb7)][_0x416ca8(0xdd)](_0x416ca8(0xa6),_0x416ca8(0x97),_0x416ca8(0x9b));throw new Error(_0x416ca8(0xbd));}return console[_0x416ca8(0x90)](_0x416ca8(0x74)),console[_0x416ca8(0x90)]('Payment\x20Link\x20ID:',_0x5401ce['data']['id']),console['log'](_0x416ca8(0xb9),_0x5401ce[_0x416ca8(0xc8)][_0x416ca8(0x99)]),console['log'](_0x416ca8(0xbc)+_0x1fe3ac+'\x20(GB\x20-\x20Britain)'),console[_0x416ca8(0x90)]('💳\x20Payment\x20Methods:\x20gb_visa_card,\x20gb_mastercard_card'),{'gateway_payment_id':_0x5401ce[_0x416ca8(0xc8)]['id'],'payment_url':_0x5401ce[_0x416ca8(0xc8)][_0x416ca8(0x99)]};}catch(_0x36f9c8){console[_0x416ca8(0x70)](_0x416ca8(0x76)),console[_0x416ca8(0x70)]('Error\x20details:',_0x36f9c8),loggerService_1['loggerService']['logWhiteDomainError'](_0x416ca8(0xa6),_0x416ca8(0x97),_0x36f9c8);if(_0x36f9c8 instanceof Error){console[_0x416ca8(0x70)](_0x416ca8(0x81),_0x36f9c8[_0x416ca8(0xd6)]),console[_0x416ca8(0x70)](_0x416ca8(0xb6),_0x36f9c8[_0x416ca8(0xba)]);throw new Error(_0x416ca8(0x8e)+_0x36f9c8['message']);}throw new Error(_0x416ca8(0xd2));}}async['verifyPayment'](_0x449c61){const _0x422620=a45_0x361f79,_0xb5ee2c=Date[_0x422620(0xd9)]();try{loggerService_1[_0x422620(0xb7)][_0x422620(0xc4)](_0x422620(0xa6),_0x422620(0xcd)+_0x449c61,_0x422620(0x6c),{});const _0x1b653a=await fetch(this['apiUrl']+'/'+_0x449c61,{'method':_0x422620(0x6c),'headers':{'Content-Type':_0x422620(0xa2),'User-Agent':'TesSoft\x20Payment\x20System/1.0'}}),_0x4ee0fe=Date[_0x422620(0xd9)]()-_0xb5ee2c;if(!_0x1b653a['ok']){const _0x89b74b=await _0x1b653a[_0x422620(0xde)]();loggerService_1['loggerService']['logWhiteDomainResponse'](_0x422620(0xa6),_0x422620(0xcd)+_0x449c61,_0x1b653a['status'],_0x89b74b,_0x4ee0fe);throw new Error(_0x422620(0xce)+_0x1b653a[_0x422620(0x7e)]);}const _0x35c4fd=await _0x1b653a[_0x422620(0x9e)]();loggerService_1[_0x422620(0xb7)]['logWhiteDomainResponse'](_0x422620(0xa6),_0x422620(0xcd)+_0x449c61,_0x1b653a[_0x422620(0x7e)],_0x35c4fd,_0x4ee0fe);if(_0x35c4fd[_0x422620(0x7e)]?.['status']!==_0x422620(0xa9)){loggerService_1[_0x422620(0xb7)][_0x422620(0xdd)]('rapyd',_0x422620(0xcd)+_0x449c61,_0x422620(0xcc)+(_0x35c4fd[_0x422620(0x7e)]?.[_0x422620(0xd6)]||'Unknown\x20error'));throw new Error(_0x422620(0xcc)+(_0x35c4fd[_0x422620(0x7e)]?.['message']||_0x422620(0xb1)));}let _0x41f945=_0x422620(0xb8);if(_0x35c4fd[_0x422620(0xc8)]?.[_0x422620(0x7e)])switch(_0x35c4fd['data'][_0x422620(0x7e)][_0x422620(0xcf)]()){case _0x422620(0x6b):_0x41f945=_0x422620(0xd1);break;case _0x422620(0x96):_0x41f945='FAILED';break;case _0x422620(0x7c):_0x41f945=_0x422620(0xc7);break;case _0x422620(0xaa):_0x41f945=_0x422620(0x6e);break;case'NEW':case _0x422620(0x73):default:_0x41f945=_0x422620(0xb8);break;}return{'status':_0x41f945,'amount':_0x35c4fd[_0x422620(0xc8)]?.['amount'],'currency':_0x35c4fd['data']?.[_0x422620(0xaf)]};}catch(_0xc0e232){console[_0x422620(0x70)](_0x422620(0xab),_0xc0e232),loggerService_1['loggerService'][_0x422620(0xdd)](_0x422620(0xa6),_0x422620(0xcd)+_0x449c61,_0xc0e232);throw new Error(_0x422620(0x8a)+(_0xc0e232 instanceof Error?_0xc0e232['message']:_0x422620(0xb1)));}}async[a45_0x361f79(0xb3)](_0x277fa5){const _0x31a166=a45_0x361f79;console[_0x31a166(0x90)](_0x31a166(0x94),_0x277fa5);let _0x5cfd27=_0x31a166(0xb8),_0x2decff;_0x277fa5[_0x31a166(0xc8)]?.[_0x31a166(0x7a)]&&(_0x2decff=_0x277fa5[_0x31a166(0xc8)][_0x31a166(0x7a)],console[_0x31a166(0x90)](_0x31a166(0xcb)+_0x2decff));switch(_0x277fa5[_0x31a166(0x7f)]?.[_0x31a166(0xcf)]()){case _0x31a166(0x7d):_0x277fa5[_0x31a166(0xc8)]?.[_0x31a166(0x77)]===!![]&&_0x277fa5['data']?.[_0x31a166(0x7e)]===_0x31a166(0x6b)?_0x5cfd27='PAID':_0x5cfd27=_0x31a166(0xb8);break;case'PAYMENT_CANCELED':_0x5cfd27='FAILED';break;case _0x31a166(0xbb):_0x5cfd27='EXPIRED';break;case'PAYMENT_FAILED':_0x5cfd27='FAILED';!_0x2decff&&_0x277fa5['data']?.[_0x31a166(0x7a)]&&(_0x2decff=_0x277fa5['data'][_0x31a166(0x7a)]);break;default:switch(_0x277fa5[_0x31a166(0xc8)]?.[_0x31a166(0x7e)]?.[_0x31a166(0xcf)]()){case'CLO':_0x277fa5[_0x31a166(0xc8)]?.['paid']===!![]?_0x5cfd27=_0x31a166(0xd1):_0x5cfd27=_0x31a166(0x6e);break;case _0x31a166(0x96):_0x5cfd27=_0x31a166(0x6e);break;case'EXP':_0x5cfd27=_0x31a166(0xc7);break;case _0x31a166(0xaa):_0x5cfd27=_0x31a166(0x6e);!_0x2decff&&_0x277fa5[_0x31a166(0xc8)]?.[_0x31a166(0x7a)]&&(_0x2decff=_0x277fa5[_0x31a166(0xc8)][_0x31a166(0x7a)]);break;case'NEW':case'ACT':default:_0x5cfd27=_0x31a166(0xb8);break;}break;}const _0x4ca3f7={};return _0x277fa5[_0x31a166(0xc8)]?.['payment_method_data']?.['last4']&&(_0x4ca3f7[_0x31a166(0xa0)]=_0x277fa5[_0x31a166(0xc8)][_0x31a166(0xd5)][_0x31a166(0xa5)]),_0x277fa5[_0x31a166(0xc8)]?.['payment_method_type']&&(_0x4ca3f7[_0x31a166(0x88)]=_0x277fa5['data']['payment_method_type']),_0x277fa5['data']?.[_0x31a166(0xdb)]&&(_0x4ca3f7[_0x31a166(0xb5)]=_0x277fa5['data'][_0x31a166(0xdb)]),_0x277fa5['data']?.[_0x31a166(0xac)]&&(_0x4ca3f7['failureCode']=_0x277fa5[_0x31a166(0xc8)]['failure_code']),console[_0x31a166(0x90)](_0x31a166(0xc1)+_0x5cfd27+_0x31a166(0x79)+(_0x2decff||'none')),{'paymentId':_0x277fa5[_0x31a166(0xc8)]?.[_0x31a166(0x9a)]||'','status':_0x5cfd27,'amount':_0x277fa5['data']?.[_0x31a166(0xc6)],'currency':_0x277fa5['data']?.[_0x31a166(0xaf)],'failureMessage':_0x2decff,'additionalInfo':_0x4ca3f7};}}exports[a45_0x361f79(0x8d)]=RapydService;function a45_0x1b62(_0x17df0c,_0x2d579e){const _0x1ca163=a45_0x1ca1();return a45_0x1b62=function(_0x1b62dc,_0x1bbd5e){_0x1b62dc=_0x1b62dc-0x6b;let _0x247418=_0x1ca163[_0x1b62dc];return _0x247418;},a45_0x1b62(_0x17df0c,_0x2d579e);}function a45_0x1ca1(){const _0x3550ac=['5486478vFREkW','5aaGyla','Response\x20Body:','Processing\x20Rapyd\x20webhook:','JSON\x20Parse\x20Error:\x20','CAN','/v1/hosted/payment_links','Invalid\x20JSON\x20response\x20from\x20Rapyd\x20API:\x20','redirect_url','merchant_reference_id','Incomplete\x20response:\x20missing\x20id\x20or\x20redirect_url','POST','../loggerService','json','):\x20','cardLast4','20260170iuZPku','application/json','5569332PdAXgJ','UNKNOWN','last4','rapyd','===\x20RAPYD\x20API\x20ERROR\x20===','Raw\x20Response\x20Body:','SUCCESS','ERR','Rapyd\x20payment\x20verification\x20error:','failure_code','ORDER:\x20','Status:','currency','defineProperty','Unknown\x20error','gb_visa_card','processWebhook','createPaymentLink','errorCode','Error\x20stack:','loggerService','PENDING','Redirect\x20URL:','stack','PAYMENT_EXPIRED','🇬🇧\x20Country\x20used:\x20','Invalid\x20response\x20from\x20Rapyd\x20API:\x20missing\x20id\x20or\x20redirect_url','statusText','stringify','HTTP\x20','🔄\x20Rapyd\x20webhook\x20processed:\x20status=','entries','3194928kQVxYN','logWhiteDomainRequest','gb_mastercard_card','amount','EXPIRED','data','fromEntries','URL:','💥\x20Rapyd\x20failure\x20message:\x20','Rapyd\x20API\x20error:\x20','/v1/hosted/payment_links/','HTTP\x20error!\x20status:\x20','toUpperCase','Headers:','PAID','Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20Unknown\x20error','apiUrl','676stpRnK','payment_method_data','message','HTTP\x20Status:','headers','now','🌐\x20Rapyd\x20service\x20initialized\x20with\x20white\x20domain\x20proxy','error_code','1210459zUaNAJ','logWhiteDomainError','text','CLO','GET','logWhiteDomainResponse','FAILED','Unknown\x20error\x20from\x20Rapyd\x20API','error','12633qBHhnW','https://tesoft.uk/gateway/fail.php?id=','ACT','===\x20RAPYD\x20SUCCESS\x20===','Error\x20Message:','===\x20RAPYD\x20SERVICE\x20ERROR\x20===','paid','Parsed\x20Result:',',\x20failureMessage=','failure_message','===\x20RAPYD\x20API\x20RESPONSE\x20(White\x20Domain)\x20===','EXP','PAYMENT_COMPLETED','status','type','Missing\x20id\x20or\x20redirect_url\x20in\x20response','Error\x20message:','🇬🇧\x20Using\x20GB\x20(Britain)\x20as\x20country\x20for\x20Rapyd\x20payment\x20link','===\x20RAPYD\x20API\x20BUSINESS\x20ERROR\x20===','===\x20RAPYD\x20API\x20REQUEST\x20(White\x20Domain\x20-\x20Updated\x20Format)\x20===','2581831DBpWIq',',\x20body:\x20','Request\x20Body\x20(Updated\x20Format):','paymentMethod','Status\x20Text:','Failed\x20to\x20verify\x20Rapyd\x20payment:\x20','Error\x20Code:','===\x20PARSED\x20RAPYD\x20RESPONSE\x20===','RapydService','Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20','===\x20RAPYD\x20API\x20INCOMPLETE\x20RESPONSE\x20===','log'];a45_0x1ca1=function(){return _0x3550ac;};return a45_0x1ca1();}