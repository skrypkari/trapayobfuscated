'use strict';const a42_0x3dc494=a42_0x5bcb;(function(_0x1e1d8f,_0x31a595){const _0x10461d=a42_0x5bcb,_0xc6a374=_0x1e1d8f();while(!![]){try{const _0x3662ea=parseInt(_0x10461d(0xd7))/0x1+parseInt(_0x10461d(0xf3))/0x2+parseInt(_0x10461d(0xc7))/0x3*(parseInt(_0x10461d(0x11b))/0x4)+parseInt(_0x10461d(0xf1))/0x5+parseInt(_0x10461d(0xcf))/0x6*(-parseInt(_0x10461d(0x12a))/0x7)+-parseInt(_0x10461d(0xe5))/0x8+-parseInt(_0x10461d(0xe1))/0x9;if(_0x3662ea===_0x31a595)break;else _0xc6a374['push'](_0xc6a374['shift']());}catch(_0x401f4e){_0xc6a374['push'](_0xc6a374['shift']());}}}(a42_0x62ff,0xbf164));function a42_0x62ff(){const _0x421160=['text','Failed\x20to\x20parse\x20JSON\x20response:','1155979sKLDIb','redirect_url','Invalid\x20JSON\x20response\x20from\x20Rapyd\x20API:\x20','RapydService','===\x20RAPYD\x20SUCCESS\x20===','Unknown\x20error','/v1/hosted/payment_links/','application/json','PAYMENT_FAILED','parse','18358299iCZagf','apiUrl','Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20','Error\x20details:','427144yibBcp','GET','ERR','\x20(always\x20GB\x20for\x20Rapyd)','Parsed\x20Result:','json','Response\x20Body:','https://tesoft.uk/gateway/fail.php?id=','amount','/v1/hosted/payment_links','https://tesoft.uk/gateway/success.php?id=','JSON\x20Parse\x20Error:\x20','5719350CuyzmK','CLO','1881398YuxqWw','type','HTTP\x20error!\x20status:\x20','Redirect\x20URL:','NEW','Unknown\x20error\x20from\x20Rapyd\x20API','Rapyd\x20API\x20error:\x20','loggerService','toUpperCase','stack','Status:','Failed\x20to\x20verify\x20Rapyd\x20payment:\x20','Error\x20stack:','Response\x20Time:','UNKNOWN','HTTP\x20Status:','defineProperty','CAN','statusText','POST','):\x20','Business\x20Error\x20(','üí≥\x20Payment\x20Methods:\x20gb_visa_card,\x20gb_mastercard_card','Failed\x20to\x20create\x20Rapyd\x20payment\x20link:\x20Unknown\x20error','Processing\x20Rapyd\x20webhook:','ORDER:\x20','\x20(GB\x20-\x20Britain)','../loggerService','Incomplete\x20response:\x20missing\x20id\x20or\x20redirect_url','error','ACT','processWebhook','Error\x20Message:','===\x20RAPYD\x20API\x20REQUEST\x20(White\x20Domain\x20-\x20Updated\x20Format)\x20===','Status\x20Text:','Response\x20data:','logWhiteDomainResponse','===\x20PARSED\x20RAPYD\x20RESPONSE\x20===','now','error_code','377404HwYSsa','EXPIRED','HTTP\x20','headers','TesSoft\x20Payment\x20System/1.0','verifyPayment','log','rapyd','PAYMENT_COMPLETED','status','PAYMENT_CANCELED','fromEntries','Payment\x20Link\x20ID:','logWhiteDomainError','PAID','7EfgpXW','gb_mastercard_card','===\x20RAPYD\x20SERVICE\x20ERROR\x20===','__esModule','Full\x20Error\x20Data:','üåê\x20Rapyd\x20service\x20initialized\x20with\x20white\x20domain\x20proxy','Request\x20Body\x20(Updated\x20Format):','logWhiteDomainRequest','PENDING','currency','message','FAILED','paid','stringify','21JhxELp',',\x20body:\x20','Error\x20Code:','createPaymentLink','data','Error\x20message:','üá¨üáß\x20Using\x20GB\x20(Britain)\x20as\x20country\x20for\x20Rapyd\x20payment\x20link','Rapyd\x20payment\x20verification\x20error:','6150654rGTOqS','merchant_reference_id','https://tesoft.uk/gateway/rapyd/','EXP','===\x20RAPYD\x20API\x20INCOMPLETE\x20RESPONSE\x20===','SUCCESS'];a42_0x62ff=function(){return _0x421160;};return a42_0x62ff();}function a42_0x5bcb(_0x560e77,_0x29bde7){const _0x62ff9f=a42_0x62ff();return a42_0x5bcb=function(_0x5bcb18,_0x502272){_0x5bcb18=_0x5bcb18-0xbd;let _0x2ba0e2=_0x62ff9f[_0x5bcb18];return _0x2ba0e2;},a42_0x5bcb(_0x560e77,_0x29bde7);}Object[a42_0x3dc494(0x103)](exports,a42_0x3dc494(0x12d),{'value':!![]}),exports[a42_0x3dc494(0xda)]=void 0x0;const loggerService_1=require(a42_0x3dc494(0x10e));class RapydService{constructor(){const _0x47d286=a42_0x3dc494;this[_0x47d286(0xe2)]=_0x47d286(0xd1),console[_0x47d286(0x121)](_0x47d286(0xbe));}async[a42_0x3dc494(0xca)](_0x4881f5){const _0x38dc68=a42_0x3dc494,{orderId:_0x2cde75,orderName:_0x1d2606,amount:_0x5774e6,currency:_0x5dcb5d,usage:_0x61d912,maxPayments:_0x4bfa12,successUrl:_0x4511dc,failUrl:_0x117cb4}=_0x4881f5,_0x10be72=_0x5dcb5d[_0x38dc68(0xfb)](),_0x146b3b='GB';console[_0x38dc68(0x121)](_0x38dc68(0xcd));const _0x9533c8=_0x38dc68(0xef)+_0x2cde75,_0x3cd4d7=_0x38dc68(0xec)+_0x2cde75,_0x59a678={'amount':_0x5774e6,'currency':_0x10be72,'cancel_checkout_url':_0x3cd4d7,'complete_checkout_url':_0x9533c8,'complete_payment_url':_0x9533c8,'merchant_reference_id':_0x2cde75,'description':_0x38dc68(0x10c)+_0x2cde75,'country':'GB','payment_method_types_include':['gb_visa_card',_0x38dc68(0x12b)],'custom_elements':{'display_description':!![]}},_0x470e97=Date[_0x38dc68(0x119)]();try{console[_0x38dc68(0x121)](_0x38dc68(0x114)),console[_0x38dc68(0x121)]('URL:',this['apiUrl']),console[_0x38dc68(0x121)](_0x38dc68(0xbf),JSON[_0x38dc68(0xc6)](_0x59a678,null,0x2)),console['log']('üá¨üáß\x20Country:\x20'+_0x146b3b+_0x38dc68(0xe8)),console[_0x38dc68(0x121)]('üí≥\x20Payment\x20Methods:\x20gb_visa_card,\x20gb_mastercard_card'),loggerService_1[_0x38dc68(0xfa)][_0x38dc68(0xc0)]('rapyd','/v1/hosted/payment_links',_0x38dc68(0x106),_0x59a678);const _0x1dc19d=await fetch(this[_0x38dc68(0xe2)],{'method':'POST','headers':{'Content-Type':_0x38dc68(0xde),'User-Agent':_0x38dc68(0x11f)},'body':JSON[_0x38dc68(0xc6)](_0x59a678)}),_0x1e9416=Date[_0x38dc68(0x119)]()-_0x470e97;console[_0x38dc68(0x121)]('===\x20RAPYD\x20API\x20RESPONSE\x20(White\x20Domain)\x20==='),console[_0x38dc68(0x121)](_0x38dc68(0xfd),_0x1dc19d[_0x38dc68(0x124)]),console['log'](_0x38dc68(0x115),_0x1dc19d[_0x38dc68(0x105)]),console[_0x38dc68(0x121)]('Headers:',Object[_0x38dc68(0x126)](_0x1dc19d[_0x38dc68(0x11e)]['entries']())),console['log'](_0x38dc68(0x100),_0x1e9416+'ms');const _0x2083cf=await _0x1dc19d[_0x38dc68(0xd5)]();console['log']('Raw\x20Response\x20Body:',_0x2083cf);if(!_0x1dc19d['ok']){console[_0x38dc68(0x110)]('===\x20RAPYD\x20API\x20ERROR\x20==='),console[_0x38dc68(0x110)](_0x38dc68(0x102),_0x1dc19d[_0x38dc68(0x124)]),console[_0x38dc68(0x110)](_0x38dc68(0xeb),_0x2083cf),loggerService_1[_0x38dc68(0xfa)][_0x38dc68(0x117)](_0x38dc68(0x122),_0x38dc68(0xee),_0x1dc19d[_0x38dc68(0x124)],_0x2083cf,_0x1e9416),loggerService_1['loggerService'][_0x38dc68(0x128)]('rapyd','/v1/hosted/payment_links',_0x38dc68(0x11d)+_0x1dc19d['status']+':\x20'+_0x2083cf);throw new Error(_0x38dc68(0xf5)+_0x1dc19d[_0x38dc68(0x124)]+_0x38dc68(0xc8)+_0x2083cf);}let _0xbe2a83;try{_0xbe2a83=JSON[_0x38dc68(0xe0)](_0x2083cf);}catch(_0x471d6c){console[_0x38dc68(0x110)](_0x38dc68(0xd6),_0x471d6c),loggerService_1[_0x38dc68(0xfa)][_0x38dc68(0x128)]('rapyd',_0x38dc68(0xee),_0x38dc68(0xf0)+_0x471d6c);throw new Error(_0x38dc68(0xd9)+_0x2083cf);}console['log'](_0x38dc68(0x118)),console[_0x38dc68(0x121)](_0x38dc68(0xe9),JSON['stringify'](_0xbe2a83,null,0x2)),loggerService_1[_0x38dc68(0xfa)]['logWhiteDomainResponse'](_0x38dc68(0x122),'/v1/hosted/payment_links',_0x1dc19d[_0x38dc68(0x124)],_0xbe2a83,_0x1e9416);if(_0xbe2a83[_0x38dc68(0x124)]?.[_0x38dc68(0x124)]!==_0x38dc68(0xd4)){const _0x10ca34=_0xbe2a83[_0x38dc68(0x124)]?.[_0x38dc68(0xc3)]||_0x38dc68(0xf8),_0x31ba3b=_0xbe2a83[_0x38dc68(0x124)]?.[_0x38dc68(0x11a)]||_0x38dc68(0x101);console[_0x38dc68(0x110)]('===\x20RAPYD\x20API\x20BUSINESS\x20ERROR\x20==='),console['error'](_0x38dc68(0xc9),_0x31ba3b),console[_0x38dc68(0x110)](_0x38dc68(0x113),_0x10ca34),console[_0x38dc68(0x110)](_0x38dc68(0xbd),_0xbe2a83[_0x38dc68(0x124)]),loggerService_1[_0x38dc68(0xfa)][_0x38dc68(0x128)](_0x38dc68(0x122),_0x38dc68(0xee),_0x38dc68(0x108)+_0x31ba3b+_0x38dc68(0x107)+_0x10ca34);throw new Error('Rapyd\x20API\x20error\x20('+_0x31ba3b+'):\x20'+_0x10ca34);}if(!_0xbe2a83[_0x38dc68(0xcb)]?.['id']||!_0xbe2a83[_0x38dc68(0xcb)]?.['redirect_url']){console['error'](_0x38dc68(0xd3)),console['error']('Missing\x20id\x20or\x20redirect_url\x20in\x20response'),console[_0x38dc68(0x110)](_0x38dc68(0x116),_0xbe2a83[_0x38dc68(0xcb)]),loggerService_1[_0x38dc68(0xfa)][_0x38dc68(0x128)](_0x38dc68(0x122),'/v1/hosted/payment_links',_0x38dc68(0x10f));throw new Error('Invalid\x20response\x20from\x20Rapyd\x20API:\x20missing\x20id\x20or\x20redirect_url');}return console[_0x38dc68(0x121)](_0x38dc68(0xdb)),console[_0x38dc68(0x121)](_0x38dc68(0x127),_0xbe2a83[_0x38dc68(0xcb)]['id']),console['log'](_0x38dc68(0xf6),_0xbe2a83[_0x38dc68(0xcb)][_0x38dc68(0xd8)]),console[_0x38dc68(0x121)]('üá¨üáß\x20Country\x20used:\x20'+_0x146b3b+_0x38dc68(0x10d)),console[_0x38dc68(0x121)](_0x38dc68(0x109)),{'gateway_payment_id':_0xbe2a83[_0x38dc68(0xcb)]['id'],'payment_url':_0xbe2a83[_0x38dc68(0xcb)]['redirect_url']};}catch(_0x297898){console[_0x38dc68(0x110)](_0x38dc68(0x12c)),console[_0x38dc68(0x110)](_0x38dc68(0xe4),_0x297898),loggerService_1[_0x38dc68(0xfa)][_0x38dc68(0x128)](_0x38dc68(0x122),'/v1/hosted/payment_links',_0x297898);if(_0x297898 instanceof Error){console[_0x38dc68(0x110)](_0x38dc68(0xcc),_0x297898[_0x38dc68(0xc3)]),console[_0x38dc68(0x110)](_0x38dc68(0xff),_0x297898[_0x38dc68(0xfc)]);throw new Error(_0x38dc68(0xe3)+_0x297898['message']);}throw new Error(_0x38dc68(0x10a));}}async[a42_0x3dc494(0x120)](_0x3273cb){const _0xe37ffe=a42_0x3dc494,_0x5c2f3e=Date[_0xe37ffe(0x119)]();try{loggerService_1[_0xe37ffe(0xfa)][_0xe37ffe(0xc0)](_0xe37ffe(0x122),_0xe37ffe(0xdd)+_0x3273cb,_0xe37ffe(0xe6),{});const _0x5de4f6=await fetch(this[_0xe37ffe(0xe2)]+'/'+_0x3273cb,{'method':_0xe37ffe(0xe6),'headers':{'Content-Type':_0xe37ffe(0xde),'User-Agent':_0xe37ffe(0x11f)}}),_0x45d1cf=Date[_0xe37ffe(0x119)]()-_0x5c2f3e;if(!_0x5de4f6['ok']){const _0xabeacc=await _0x5de4f6[_0xe37ffe(0xd5)]();loggerService_1[_0xe37ffe(0xfa)][_0xe37ffe(0x117)](_0xe37ffe(0x122),_0xe37ffe(0xdd)+_0x3273cb,_0x5de4f6['status'],_0xabeacc,_0x45d1cf);throw new Error(_0xe37ffe(0xf5)+_0x5de4f6[_0xe37ffe(0x124)]);}const _0x1ae62b=await _0x5de4f6[_0xe37ffe(0xea)]();loggerService_1[_0xe37ffe(0xfa)][_0xe37ffe(0x117)](_0xe37ffe(0x122),_0xe37ffe(0xdd)+_0x3273cb,_0x5de4f6[_0xe37ffe(0x124)],_0x1ae62b,_0x45d1cf);if(_0x1ae62b['status']?.[_0xe37ffe(0x124)]!==_0xe37ffe(0xd4)){loggerService_1[_0xe37ffe(0xfa)][_0xe37ffe(0x128)](_0xe37ffe(0x122),_0xe37ffe(0xdd)+_0x3273cb,_0xe37ffe(0xf9)+(_0x1ae62b[_0xe37ffe(0x124)]?.[_0xe37ffe(0xc3)]||_0xe37ffe(0xdc)));throw new Error(_0xe37ffe(0xf9)+(_0x1ae62b['status']?.[_0xe37ffe(0xc3)]||'Unknown\x20error'));}let _0x52e5e8=_0xe37ffe(0xc1);if(_0x1ae62b[_0xe37ffe(0xcb)]?.['status'])switch(_0x1ae62b['data'][_0xe37ffe(0x124)]['toUpperCase']()){case _0xe37ffe(0xf2):_0x52e5e8=_0xe37ffe(0x129);break;case _0xe37ffe(0x104):_0x52e5e8=_0xe37ffe(0xc4);break;case _0xe37ffe(0xd2):_0x52e5e8=_0xe37ffe(0x11c);break;case _0xe37ffe(0xe7):_0x52e5e8='FAILED';break;case'NEW':case _0xe37ffe(0x111):default:_0x52e5e8=_0xe37ffe(0xc1);break;}return{'status':_0x52e5e8,'amount':_0x1ae62b['data']?.[_0xe37ffe(0xed)],'currency':_0x1ae62b['data']?.['currency']};}catch(_0x513100){console[_0xe37ffe(0x110)](_0xe37ffe(0xce),_0x513100),loggerService_1['loggerService']['logWhiteDomainError'](_0xe37ffe(0x122),_0xe37ffe(0xdd)+_0x3273cb,_0x513100);throw new Error(_0xe37ffe(0xfe)+(_0x513100 instanceof Error?_0x513100['message']:_0xe37ffe(0xdc)));}}async[a42_0x3dc494(0x112)](_0x212b87){const _0x21530c=a42_0x3dc494;console[_0x21530c(0x121)](_0x21530c(0x10b),_0x212b87);let _0x28a0a1=_0x21530c(0xc1);switch(_0x212b87[_0x21530c(0xf4)]?.[_0x21530c(0xfb)]()){case _0x21530c(0x123):_0x212b87[_0x21530c(0xcb)]?.[_0x21530c(0xc5)]===!![]&&_0x212b87['data']?.[_0x21530c(0x124)]==='CLO'?_0x28a0a1=_0x21530c(0x129):_0x28a0a1='PENDING';break;case _0x21530c(0x125):_0x28a0a1=_0x21530c(0xc4);break;case'PAYMENT_EXPIRED':_0x28a0a1=_0x21530c(0x11c);break;case _0x21530c(0xdf):_0x28a0a1=_0x21530c(0xc4);break;default:switch(_0x212b87[_0x21530c(0xcb)]?.[_0x21530c(0x124)]?.[_0x21530c(0xfb)]()){case _0x21530c(0xf2):_0x212b87[_0x21530c(0xcb)]?.[_0x21530c(0xc5)]===!![]?_0x28a0a1=_0x21530c(0x129):_0x28a0a1=_0x21530c(0xc4);break;case _0x21530c(0x104):_0x28a0a1=_0x21530c(0xc4);break;case _0x21530c(0xd2):_0x28a0a1=_0x21530c(0x11c);break;case _0x21530c(0xe7):_0x28a0a1=_0x21530c(0xc4);break;case _0x21530c(0xf7):case _0x21530c(0x111):default:_0x28a0a1=_0x21530c(0xc1);break;}break;}return{'paymentId':_0x212b87[_0x21530c(0xcb)]?.[_0x21530c(0xd0)]||'','status':_0x28a0a1,'amount':_0x212b87[_0x21530c(0xcb)]?.['amount'],'currency':_0x212b87[_0x21530c(0xcb)]?.[_0x21530c(0xc2)]};}}exports[a42_0x3dc494(0xda)]=RapydService;