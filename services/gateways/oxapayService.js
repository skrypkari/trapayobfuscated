'use strict';const a73_0xc3ca22=a73_0x3e2c;(function(_0x326111,_0x1ede0a){const _0x4e344a=a73_0x3e2c,_0x4c3aa0=_0x326111();while(!![]){try{const _0x23041b=-parseInt(_0x4e344a(0x15f))/0x1*(-parseInt(_0x4e344a(0x164))/0x2)+-parseInt(_0x4e344a(0x17a))/0x3+-parseInt(_0x4e344a(0x168))/0x4*(-parseInt(_0x4e344a(0x171))/0x5)+-parseInt(_0x4e344a(0x17b))/0x6*(parseInt(_0x4e344a(0x148))/0x7)+-parseInt(_0x4e344a(0x17c))/0x8*(parseInt(_0x4e344a(0x169))/0x9)+-parseInt(_0x4e344a(0x16b))/0xa*(-parseInt(_0x4e344a(0x139))/0xb)+-parseInt(_0x4e344a(0x13f))/0xc;if(_0x23041b===_0x1ede0a)break;else _0x4c3aa0['push'](_0x4c3aa0['shift']());}catch(_0x208cb4){_0x4c3aa0['push'](_0x4c3aa0['shift']());}}}(a73_0x3d9b,0x401aa));Object[a73_0xc3ca22(0x151)](exports,a73_0xc3ca22(0x145),{'value':!![]}),exports['oxapayService']=exports[a73_0xc3ca22(0x14a)]=void 0x0;const loggerService_1=require(a73_0xc3ca22(0x154));function a73_0x3e2c(_0x223075,_0x1407f0){_0x223075=_0x223075-0x12a;const _0x3d9bca=a73_0x3d9b();let _0x3e2c2c=_0x3d9bca[_0x223075];return _0x3e2c2c;}class OxaPayService{constructor(){const _0xb73f64=a73_0xc3ca22;this['apiUrl']='https://api.oxapay.com/v1/payment/white-label',this[_0xb73f64(0x160)]=process.env.OXAPAY_API_KEY||_0xb73f64(0x14e),!this[_0xb73f64(0x160)]?console[_0xb73f64(0x132)](_0xb73f64(0x146)):console[_0xb73f64(0x17e)](_0xb73f64(0x135));}async[a73_0xc3ca22(0x166)](_0x2fe774){const _0x28743e=a73_0xc3ca22,{orderId:_0xa766ca,amount:_0x2bac8f,currency:_0xeb5fcd,payCurrency:_0x59161c,network:_0x4915f2,description:_0x51fbdf,customerEmail:_0x10f7b5,lifetime:_0x4fd58a,feePaidByPayer:_0x397c17,underPaidCoverage:_0x5d9c30}=_0x2fe774;if(!this['apiKey'])throw new Error(_0x28743e(0x15b));const _0x4c0255={'amount':_0x2bac8f,'currency':_0xeb5fcd['toLowerCase'](),'callback_url':_0x28743e(0x155),'order_id':_0xa766ca,'description':_0x51fbdf||_0x28743e(0x156)+_0xa766ca};_0x59161c&&(_0x4c0255[_0x28743e(0x158)]=_0x59161c[_0x28743e(0x137)]());_0x4915f2&&(_0x4c0255[_0x28743e(0x178)]=_0x4915f2);_0x10f7b5&&(_0x4c0255[_0x28743e(0x16a)]=_0x10f7b5);_0x4fd58a!==undefined?_0x4c0255[_0x28743e(0x143)]=_0x4fd58a:_0x4c0255[_0x28743e(0x143)]=0x3c;_0x397c17!==undefined&&(_0x4c0255[_0x28743e(0x12c)]=_0x397c17);_0x5d9c30!==undefined&&(_0x4c0255[_0x28743e(0x140)]=_0x5d9c30);const _0x44ed29=Date['now']();try{console[_0x28743e(0x17e)](_0x28743e(0x12d)),console[_0x28743e(0x17e)]('URL:',this[_0x28743e(0x172)]),console[_0x28743e(0x17e)](_0x28743e(0x138),JSON['stringify'](_0x4c0255,null,0x2)),loggerService_1[_0x28743e(0x14c)][_0x28743e(0x167)](_0x28743e(0x161),_0x28743e(0x133),_0x28743e(0x142),_0x4c0255);const _0xf8ab98=await fetch(this[_0x28743e(0x172)],{'method':_0x28743e(0x142),'headers':{'Content-Type':_0x28743e(0x13c),'merchant_api_key':this[_0x28743e(0x160)]},'body':JSON[_0x28743e(0x134)](_0x4c0255)}),_0x5431cc=Date['now']()-_0x44ed29;console[_0x28743e(0x17e)](_0x28743e(0x174)),console[_0x28743e(0x17e)](_0x28743e(0x14d),_0xf8ab98[_0x28743e(0x13b)]),console['log'](_0x28743e(0x16f),_0xf8ab98['statusText']),console['log'](_0x28743e(0x159),_0x5431cc+'ms');const _0x734e9f=await _0xf8ab98['text']();console[_0x28743e(0x17e)](_0x28743e(0x130),_0x734e9f);let _0xcd6ead;try{_0xcd6ead=JSON[_0x28743e(0x144)](_0x734e9f);}catch(_0x5b1782){console[_0x28743e(0x173)]('Failed\x20to\x20parse\x20JSON\x20response:',_0x5b1782),loggerService_1[_0x28743e(0x14c)]['logWhiteDomainError'](_0x28743e(0x161),_0x28743e(0x133),_0x28743e(0x13d)+_0x5b1782);throw new Error('Invalid\x20JSON\x20response\x20from\x20OxaPay\x20API:\x20'+_0x734e9f);}console[_0x28743e(0x17e)]('===\x20PARSED\x20OXAPAY\x20RESPONSE\x20==='),console[_0x28743e(0x17e)]('Parsed\x20Result:',JSON['stringify'](_0xcd6ead,null,0x2)),loggerService_1[_0x28743e(0x14c)][_0x28743e(0x131)](_0x28743e(0x161),_0x28743e(0x133),_0xf8ab98[_0x28743e(0x13b)],_0xcd6ead,_0x5431cc);if(_0xcd6ead[_0x28743e(0x13b)]!==0xc8||!_0xcd6ead[_0x28743e(0x176)]){const _0x532e46=_0xcd6ead['error']?.[_0x28743e(0x15e)]||_0xcd6ead['message']||'Unknown\x20error\x20from\x20OxaPay\x20API';console[_0x28743e(0x173)]('===\x20OXAPAY\x20API\x20ERROR\x20==='),console[_0x28743e(0x173)](_0x28743e(0x136),_0x532e46),console['error'](_0x28743e(0x17f),_0xcd6ead[_0x28743e(0x173)]),loggerService_1[_0x28743e(0x14c)][_0x28743e(0x157)](_0x28743e(0x161),'/payment/white-label',_0x28743e(0x15c)+_0x532e46);throw new Error(_0x28743e(0x15a)+_0x532e46);}if(!_0xcd6ead[_0x28743e(0x176)][_0x28743e(0x15d)]||!_0xcd6ead['data']['address']){console[_0x28743e(0x173)](_0x28743e(0x149)),console[_0x28743e(0x173)](_0x28743e(0x16e)),console[_0x28743e(0x173)](_0x28743e(0x162),_0xcd6ead[_0x28743e(0x176)]),loggerService_1[_0x28743e(0x14c)][_0x28743e(0x157)](_0x28743e(0x161),_0x28743e(0x133),_0x28743e(0x16c));throw new Error('Invalid\x20response\x20from\x20OxaPay\x20API:\x20missing\x20track_id\x20or\x20address');}console['log']('===\x20OXAPAY\x20SUCCESS\x20==='),console['log'](_0x28743e(0x12b),_0xcd6ead[_0x28743e(0x176)][_0x28743e(0x15d)]),console['log']('Address:',_0xcd6ead[_0x28743e(0x176)][_0x28743e(0x17d)]),console[_0x28743e(0x17e)](_0x28743e(0x177),_0xcd6ead[_0x28743e(0x176)][_0x28743e(0x12f)],_0xcd6ead['data']['pay_currency']),console[_0x28743e(0x17e)](_0x28743e(0x13e),_0xcd6ead[_0x28743e(0x176)][_0x28743e(0x178)]);const _0xce7522=_0x28743e(0x153)+_0x2fe774[_0x28743e(0x180)];return{'gateway_payment_id':_0xcd6ead[_0x28743e(0x176)][_0x28743e(0x15d)],'payment_url':_0xce7522,'track_id':_0xcd6ead[_0x28743e(0x176)][_0x28743e(0x15d)],'amount':_0xcd6ead[_0x28743e(0x176)][_0x28743e(0x147)],'currency':_0xcd6ead[_0x28743e(0x176)][_0x28743e(0x163)],'pay_amount':_0xcd6ead[_0x28743e(0x176)]['pay_amount'],'pay_currency':_0xcd6ead[_0x28743e(0x176)][_0x28743e(0x158)],'network':_0xcd6ead['data'][_0x28743e(0x178)],'address':_0xcd6ead[_0x28743e(0x176)][_0x28743e(0x17d)],'qr_code':_0xcd6ead[_0x28743e(0x176)][_0x28743e(0x14b)],'rate':_0xcd6ead[_0x28743e(0x176)]['rate'],'expired_at':_0xcd6ead[_0x28743e(0x176)]['expired_at']};}catch(_0x3bd725){console[_0x28743e(0x173)](_0x28743e(0x165)),console[_0x28743e(0x173)](_0x28743e(0x152),_0x3bd725),loggerService_1[_0x28743e(0x14c)][_0x28743e(0x157)](_0x28743e(0x161),_0x28743e(0x133),_0x3bd725 instanceof Error?_0x3bd725['message']:String(_0x3bd725));throw _0x3bd725;}}[a73_0xc3ca22(0x16d)](_0x3d1c49){const _0x5f534d=a73_0xc3ca22;switch(_0x3d1c49[_0x5f534d(0x137)]()){case _0x5f534d(0x14f):return _0x5f534d(0x170);case'waiting':return _0x5f534d(0x170);case'paying':return _0x5f534d(0x141);case'paid':return'PAID';case _0x5f534d(0x12a):return _0x5f534d(0x175);case _0x5f534d(0x179):return _0x5f534d(0x175);case _0x5f534d(0x12e):return'REFUND';case _0x5f534d(0x150):return'REFUND';case'expired':return'EXPIRED';default:return _0x5f534d(0x170);}}}exports[a73_0xc3ca22(0x14a)]=OxaPayService,exports[a73_0xc3ca22(0x13a)]=new OxaPayService();function a73_0x3d9b(){const _0x5b2780=['Request\x20Body:','33vKujtO','oxapayService','status','application/json','JSON\x20Parse\x20Error:\x20','Network:','785856NySfpK','under_paid_coverage','PROCESSING','POST','lifetime','parse','__esModule','‚ö†Ô∏è\x20OXAPAY_API_KEY\x20not\x20found\x20in\x20environment\x20variables','amount','581fYVShV','===\x20OXAPAY\x20API\x20INCOMPLETE\x20RESPONSE\x20===','OxaPayService','qr_code','loggerService','Status:','WCXQ21-DL5OZP-H3SSHH-4GVAR4','new','refunded','defineProperty','Error:','https://app.trapay.uk/payment/','../loggerService','https://api.trapay.uk/api/oxapay/callback','Order\x20#','logWhiteDomainError','pay_currency','Response\x20Time:','OxaPay\x20API\x20error:\x20','OxaPay\x20API\x20key\x20is\x20not\x20configured','API\x20Error:\x20','track_id','message','3wYmPNS','apiKey','oxapay','Response\x20data:','currency','228818sRikHk','===\x20OXAPAY\x20REQUEST\x20ERROR\x20===','createPayment','logWhiteDomainRequest','4ybedKM','1625121NfVIgr','email','906520AGWUID','Incomplete\x20response:\x20missing\x20track_id\x20or\x20address','getPaymentStatusFromCallback','Missing\x20track_id\x20or\x20address\x20in\x20response','Status\x20Text:','PENDING','2264285YASQfI','apiUrl','error','===\x20OXAPAY\x20API\x20RESPONSE\x20===','PAID','data','Amount:','network','underpaid','24747cvvjyu','26790WJxASQ','16SMsbOk','address','log','Error\x20Details:','paymentId','manual_accept','Track\x20ID:','fee_paid_by_payer','===\x20OXAPAY\x20API\x20REQUEST\x20===','refunding','pay_amount','Raw\x20Response\x20Body:','logWhiteDomainResponse','warn','/payment/white-label','stringify','üí∞\x20OxaPay\x20service\x20initialized','Error\x20Message:','toLowerCase'];a73_0x3d9b=function(){return _0x5b2780;};return a73_0x3d9b();}