'use strict';const a73_0x5ed53b=a73_0x28c8;(function(_0x41cb49,_0x28d2d9){const _0x900d87=a73_0x28c8,_0x2b88e5=_0x41cb49();while(!![]){try{const _0x555eb0=-parseInt(_0x900d87(0x1a3))/0x1*(parseInt(_0x900d87(0x1d8))/0x2)+parseInt(_0x900d87(0x1af))/0x3*(parseInt(_0x900d87(0x19d))/0x4)+parseInt(_0x900d87(0x1b2))/0x5+parseInt(_0x900d87(0x1c5))/0x6+parseInt(_0x900d87(0x1a8))/0x7+parseInt(_0x900d87(0x199))/0x8+-parseInt(_0x900d87(0x1b0))/0x9;if(_0x555eb0===_0x28d2d9)break;else _0x2b88e5['push'](_0x2b88e5['shift']());}catch(_0x4d5008){_0x2b88e5['push'](_0x2b88e5['shift']());}}}(a73_0x26ed,0x946fc));Object[a73_0x5ed53b(0x19c)](exports,a73_0x5ed53b(0x1b3),{'value':!![]}),exports[a73_0x5ed53b(0x1a9)]=exports[a73_0x5ed53b(0x1da)]=void 0x0;const loggerService_1=require(a73_0x5ed53b(0x1c0));class OxaPayService{constructor(){const _0x276f0f=a73_0x5ed53b;this['apiUrl']='https://api.oxapay.com/v1/payment/white-label',this[_0x276f0f(0x19e)]=process.env.OXAPAY_API_KEY||'WCXQ21-DL5OZP-H3SSHH-4GVAR4',!this[_0x276f0f(0x19e)]?console[_0x276f0f(0x18f)](_0x276f0f(0x190)):console[_0x276f0f(0x1c3)]('üí∞\x20OxaPay\x20service\x20initialized');}async[a73_0x5ed53b(0x19a)](_0x4a2f04){const _0x4fc407=a73_0x5ed53b,{orderId:_0x2b08e8,amount:_0x1da288,currency:_0x815389,payCurrency:_0x32ac29,network:_0x3e1cb8,description:_0xd5e855,customerEmail:_0x484103,lifetime:_0x59afcc,feePaidByPayer:_0x2c274b,underPaidCoverage:_0x20d970}=_0x4a2f04;if(!this[_0x4fc407(0x19e)])throw new Error(_0x4fc407(0x1a2));const _0x20b188={'amount':_0x1da288,'currency':_0x815389[_0x4fc407(0x188)](),'callback_url':_0x4fc407(0x18e),'order_id':_0x2b08e8,'description':_0xd5e855||'Order\x20#'+_0x2b08e8};_0x32ac29&&(_0x20b188['pay_currency']=_0x32ac29[_0x4fc407(0x188)]());_0x3e1cb8&&(_0x20b188[_0x4fc407(0x1c7)]=_0x3e1cb8);_0x484103&&(_0x20b188[_0x4fc407(0x192)]=_0x484103);_0x59afcc!==undefined?_0x20b188[_0x4fc407(0x191)]=_0x59afcc:_0x20b188[_0x4fc407(0x191)]=0x3c;_0x2c274b!==undefined&&(_0x20b188[_0x4fc407(0x1c9)]=_0x2c274b);_0x20d970!==undefined&&(_0x20b188[_0x4fc407(0x1bb)]=_0x20d970);const _0x362686=Date[_0x4fc407(0x1d9)]();try{console[_0x4fc407(0x1c3)](_0x4fc407(0x1b4)),console[_0x4fc407(0x1c3)]('URL:',this['apiUrl']),console[_0x4fc407(0x1c3)](_0x4fc407(0x1cc),JSON[_0x4fc407(0x1b1)](_0x20b188,null,0x2)),loggerService_1[_0x4fc407(0x1d5)][_0x4fc407(0x19b)](_0x4fc407(0x1a5),'/payment/white-label',_0x4fc407(0x1a6),_0x20b188);const _0xe08c84=await fetch(this[_0x4fc407(0x1ad)],{'method':_0x4fc407(0x1a6),'headers':{'Content-Type':_0x4fc407(0x1ba),'merchant_api_key':this[_0x4fc407(0x19e)]},'body':JSON[_0x4fc407(0x1b1)](_0x20b188)}),_0x2be7c6=Date['now']()-_0x362686;console[_0x4fc407(0x1c3)](_0x4fc407(0x1cf)),console['log'](_0x4fc407(0x196),_0xe08c84[_0x4fc407(0x1be)]),console['log'](_0x4fc407(0x1b8),_0xe08c84[_0x4fc407(0x1db)]),console[_0x4fc407(0x1c3)]('Response\x20Time:',_0x2be7c6+'ms');const _0x53cb2f=await _0xe08c84[_0x4fc407(0x18c)]();console[_0x4fc407(0x1c3)](_0x4fc407(0x1a1),_0x53cb2f);let _0x1cc8da;try{_0x1cc8da=JSON[_0x4fc407(0x184)](_0x53cb2f);}catch(_0x308c95){console['error'](_0x4fc407(0x1c4),_0x308c95),loggerService_1[_0x4fc407(0x1d5)][_0x4fc407(0x1a0)]('oxapay',_0x4fc407(0x185),_0x4fc407(0x1d0)+_0x308c95);throw new Error(_0x4fc407(0x1c8)+_0x53cb2f);}console[_0x4fc407(0x1c3)](_0x4fc407(0x1aa)),console[_0x4fc407(0x1c3)](_0x4fc407(0x194),JSON[_0x4fc407(0x1b1)](_0x1cc8da,null,0x2)),loggerService_1[_0x4fc407(0x1d5)]['logWhiteDomainResponse'](_0x4fc407(0x1a5),_0x4fc407(0x185),_0xe08c84['status'],_0x1cc8da,_0x2be7c6);if(_0x1cc8da[_0x4fc407(0x1be)]!==0xc8||!_0x1cc8da['data']){const _0xd33826=_0x1cc8da[_0x4fc407(0x18a)]?.[_0x4fc407(0x1a7)]||_0x1cc8da[_0x4fc407(0x1a7)]||'Unknown\x20error\x20from\x20OxaPay\x20API';console[_0x4fc407(0x18a)]('===\x20OXAPAY\x20API\x20ERROR\x20==='),console[_0x4fc407(0x18a)](_0x4fc407(0x198),_0xd33826),console[_0x4fc407(0x18a)](_0x4fc407(0x1ca),_0x1cc8da['error']),loggerService_1['loggerService'][_0x4fc407(0x1a0)](_0x4fc407(0x1a5),_0x4fc407(0x185),_0x4fc407(0x1c2)+_0xd33826);throw new Error(_0x4fc407(0x1d1)+_0xd33826);}if(!_0x1cc8da[_0x4fc407(0x1bd)]['track_id']||!_0x1cc8da[_0x4fc407(0x1bd)][_0x4fc407(0x189)]){console[_0x4fc407(0x18a)]('===\x20OXAPAY\x20API\x20INCOMPLETE\x20RESPONSE\x20==='),console['error'](_0x4fc407(0x187)),console[_0x4fc407(0x18a)](_0x4fc407(0x1ac),_0x1cc8da['data']),loggerService_1[_0x4fc407(0x1d5)][_0x4fc407(0x1a0)](_0x4fc407(0x1a5),_0x4fc407(0x185),_0x4fc407(0x1ce));throw new Error('Invalid\x20response\x20from\x20OxaPay\x20API:\x20missing\x20track_id\x20or\x20address');}console[_0x4fc407(0x1c3)](_0x4fc407(0x1b9)),console['log']('Track\x20ID:',_0x1cc8da[_0x4fc407(0x1bd)][_0x4fc407(0x1cb)]),console[_0x4fc407(0x1c3)](_0x4fc407(0x1c6),_0x1cc8da['data'][_0x4fc407(0x189)]),console[_0x4fc407(0x1c3)](_0x4fc407(0x193),_0x1cc8da['data'][_0x4fc407(0x1a4)],_0x1cc8da['data']['pay_currency']),console[_0x4fc407(0x1c3)](_0x4fc407(0x19f),_0x1cc8da[_0x4fc407(0x1bd)][_0x4fc407(0x1c7)]);const _0xe2a160=_0x4fc407(0x1d7)+_0x4a2f04[_0x4fc407(0x1cd)];return{'gateway_payment_id':_0x1cc8da[_0x4fc407(0x1bd)]['track_id'],'payment_url':_0xe2a160,'track_id':_0x1cc8da[_0x4fc407(0x1bd)][_0x4fc407(0x1cb)],'amount':_0x1cc8da[_0x4fc407(0x1bd)][_0x4fc407(0x186)],'currency':_0x1cc8da[_0x4fc407(0x1bd)][_0x4fc407(0x18b)],'pay_amount':_0x1cc8da[_0x4fc407(0x1bd)][_0x4fc407(0x1a4)],'pay_currency':_0x1cc8da[_0x4fc407(0x1bd)][_0x4fc407(0x1b6)],'network':_0x1cc8da[_0x4fc407(0x1bd)]['network'],'address':_0x1cc8da[_0x4fc407(0x1bd)][_0x4fc407(0x189)],'qr_code':_0x1cc8da[_0x4fc407(0x1bd)][_0x4fc407(0x1d6)],'rate':_0x1cc8da[_0x4fc407(0x1bd)][_0x4fc407(0x1bf)],'expired_at':_0x1cc8da[_0x4fc407(0x1bd)]['expired_at']};}catch(_0x3e7890){console[_0x4fc407(0x18a)](_0x4fc407(0x1d2)),console[_0x4fc407(0x18a)](_0x4fc407(0x18d),_0x3e7890),loggerService_1['loggerService']['logWhiteDomainError'](_0x4fc407(0x1a5),_0x4fc407(0x185),_0x3e7890 instanceof Error?_0x3e7890['message']:String(_0x3e7890));throw _0x3e7890;}}[a73_0x5ed53b(0x1d3)](_0x7633e2){const _0x2f8786=a73_0x5ed53b;switch(_0x7633e2[_0x2f8786(0x188)]()){case _0x2f8786(0x1d4):return'PENDING';case _0x2f8786(0x197):return _0x2f8786(0x1c1);case'paying':return'PROCESSING';case _0x2f8786(0x195):return _0x2f8786(0x1ae);case _0x2f8786(0x1b7):return _0x2f8786(0x1ae);case _0x2f8786(0x183):return _0x2f8786(0x1ae);case'refunding':return _0x2f8786(0x1bc);case'refunded':return _0x2f8786(0x1bc);case _0x2f8786(0x1ab):return _0x2f8786(0x1b5);default:return'PENDING';}}}function a73_0x26ed(){const _0x49a4a0=['https://api.trapay.uk/api/oxapay/callback','warn','‚ö†Ô∏è\x20OXAPAY_API_KEY\x20not\x20found\x20in\x20environment\x20variables','lifetime','email','Amount:','Parsed\x20Result:','paid','Status:','waiting','Error\x20Message:','9657736LIkGVj','createPayment','logWhiteDomainRequest','defineProperty','6696gzEQJQ','apiKey','Network:','logWhiteDomainError','Raw\x20Response\x20Body:','OxaPay\x20API\x20key\x20is\x20not\x20configured','51tUAclq','pay_amount','oxapay','POST','message','1847174pLFJPn','oxapayService','===\x20PARSED\x20OXAPAY\x20RESPONSE\x20===','expired','Response\x20data:','apiUrl','PAID','1827yGpkBP','16355745iWNJYK','stringify','1472275Ihdygh','__esModule','===\x20OXAPAY\x20API\x20REQUEST\x20===','EXPIRED','pay_currency','manual_accept','Status\x20Text:','===\x20OXAPAY\x20SUCCESS\x20===','application/json','under_paid_coverage','REFUND','data','status','rate','../loggerService','PENDING','API\x20Error:\x20','log','Failed\x20to\x20parse\x20JSON\x20response:','2162406juDqdy','Address:','network','Invalid\x20JSON\x20response\x20from\x20OxaPay\x20API:\x20','fee_paid_by_payer','Error\x20Details:','track_id','Request\x20Body:','paymentId','Incomplete\x20response:\x20missing\x20track_id\x20or\x20address','===\x20OXAPAY\x20API\x20RESPONSE\x20===','JSON\x20Parse\x20Error:\x20','OxaPay\x20API\x20error:\x20','===\x20OXAPAY\x20REQUEST\x20ERROR\x20===','getPaymentStatusFromCallback','new','loggerService','qr_code','https://app.trapay.uk/payment/','28240FFEKBQ','now','OxaPayService','statusText','underpaid','parse','/payment/white-label','amount','Missing\x20track_id\x20or\x20address\x20in\x20response','toLowerCase','address','error','currency','text','Error:'];a73_0x26ed=function(){return _0x49a4a0;};return a73_0x26ed();}function a73_0x28c8(_0x488f1e,_0x44dfc9){_0x488f1e=_0x488f1e-0x183;const _0x26edd0=a73_0x26ed();let _0x28c8c2=_0x26edd0[_0x488f1e];return _0x28c8c2;}exports[a73_0x5ed53b(0x1da)]=OxaPayService,exports[a73_0x5ed53b(0x1a9)]=new OxaPayService();