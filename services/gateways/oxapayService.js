'use strict';const a65_0x1a2fcd=a65_0x53d3;(function(_0xd7bcb0,_0x6516d8){const _0x1d024d=a65_0x53d3,_0x47b13a=_0xd7bcb0();while(!![]){try{const _0x5cd6da=parseInt(_0x1d024d(0x144))/0x1*(parseInt(_0x1d024d(0x16b))/0x2)+-parseInt(_0x1d024d(0x17d))/0x3*(parseInt(_0x1d024d(0x147))/0x4)+-parseInt(_0x1d024d(0x179))/0x5*(parseInt(_0x1d024d(0x151))/0x6)+parseInt(_0x1d024d(0x145))/0x7*(parseInt(_0x1d024d(0x173))/0x8)+parseInt(_0x1d024d(0x142))/0x9*(parseInt(_0x1d024d(0x182))/0xa)+-parseInt(_0x1d024d(0x164))/0xb*(parseInt(_0x1d024d(0x17c))/0xc)+parseInt(_0x1d024d(0x190))/0xd;if(_0x5cd6da===_0x6516d8)break;else _0x47b13a['push'](_0x47b13a['shift']());}catch(_0x408015){_0x47b13a['push'](_0x47b13a['shift']());}}}(a65_0x4285,0x19c9d));Object[a65_0x1a2fcd(0x153)](exports,'__esModule',{'value':!![]}),exports[a65_0x1a2fcd(0x18f)]=exports['OxaPayService']=void 0x0;const loggerService_1=require(a65_0x1a2fcd(0x171));class OxaPayService{constructor(){const _0x1d3168=a65_0x1a2fcd;this[_0x1d3168(0x15b)]='https://api.oxapay.com/v1/payment/white-label',this[_0x1d3168(0x15e)]=process[_0x1d3168(0x15d)]['OXAPAY_API_KEY']||_0x1d3168(0x186),!this[_0x1d3168(0x15e)]?console['warn']('‚ö†Ô∏è\x20OXAPAY_API_KEY\x20not\x20found\x20in\x20environment\x20variables'):console[_0x1d3168(0x157)](_0x1d3168(0x180));}async[a65_0x1a2fcd(0x191)](_0x3051ea){const _0x1f6d00=a65_0x1a2fcd,{orderId:_0x2f5607,amount:_0x3f119f,currency:_0x80426a,payCurrency:_0x16c33e,network:_0x138caa,description:_0x2e6358,customerEmail:_0x1c984f,lifetime:_0x42d537,feePaidByPayer:_0x4cb577,underPaidCoverage:_0x5f39e5}=_0x3051ea;if(!this['apiKey'])throw new Error(_0x1f6d00(0x18e));const _0x56926b={'amount':_0x3f119f,'currency':_0x80426a[_0x1f6d00(0x154)](),'callback_url':_0x1f6d00(0x14e),'order_id':_0x2f5607,'description':_0x2e6358||_0x1f6d00(0x155)+_0x2f5607};_0x16c33e&&(_0x56926b[_0x1f6d00(0x15c)]=_0x16c33e[_0x1f6d00(0x154)]());_0x138caa&&(_0x56926b[_0x1f6d00(0x176)]=_0x138caa);_0x1c984f&&(_0x56926b[_0x1f6d00(0x174)]=_0x1c984f);_0x42d537!==undefined?_0x56926b[_0x1f6d00(0x18b)]=_0x42d537:_0x56926b[_0x1f6d00(0x18b)]=0x3c;_0x4cb577!==undefined&&(_0x56926b[_0x1f6d00(0x178)]=_0x4cb577);_0x5f39e5!==undefined&&(_0x56926b[_0x1f6d00(0x170)]=_0x5f39e5);const _0x9fc22f=Date[_0x1f6d00(0x172)]();try{console[_0x1f6d00(0x157)]('===\x20OXAPAY\x20API\x20REQUEST\x20==='),console[_0x1f6d00(0x157)](_0x1f6d00(0x146),this['apiUrl']),console[_0x1f6d00(0x157)](_0x1f6d00(0x18c),JSON['stringify'](_0x56926b,null,0x2)),loggerService_1[_0x1f6d00(0x150)][_0x1f6d00(0x152)]('oxapay',_0x1f6d00(0x177),_0x1f6d00(0x160),_0x56926b);const _0x366bb2=await fetch(this['apiUrl'],{'method':'POST','headers':{'Content-Type':_0x1f6d00(0x18a),'merchant_api_key':this[_0x1f6d00(0x15e)]},'body':JSON[_0x1f6d00(0x175)](_0x56926b)}),_0x1f764c=Date[_0x1f6d00(0x172)]()-_0x9fc22f;console[_0x1f6d00(0x157)](_0x1f6d00(0x194)),console[_0x1f6d00(0x157)]('Status:',_0x366bb2[_0x1f6d00(0x19b)]),console[_0x1f6d00(0x157)]('Status\x20Text:',_0x366bb2[_0x1f6d00(0x192)]),console[_0x1f6d00(0x157)]('Response\x20Time:',_0x1f764c+'ms');const _0x158bd2=await _0x366bb2['text']();console[_0x1f6d00(0x157)]('Raw\x20Response\x20Body:',_0x158bd2);let _0x30e63c;try{_0x30e63c=JSON[_0x1f6d00(0x193)](_0x158bd2);}catch(_0x566469){console['error'](_0x1f6d00(0x188),_0x566469),loggerService_1[_0x1f6d00(0x150)]['logWhiteDomainError']('oxapay',_0x1f6d00(0x177),_0x1f6d00(0x16e)+_0x566469);throw new Error('Invalid\x20JSON\x20response\x20from\x20OxaPay\x20API:\x20'+_0x158bd2);}console[_0x1f6d00(0x157)](_0x1f6d00(0x14d)),console[_0x1f6d00(0x157)](_0x1f6d00(0x198),JSON[_0x1f6d00(0x175)](_0x30e63c,null,0x2)),loggerService_1[_0x1f6d00(0x150)][_0x1f6d00(0x16c)](_0x1f6d00(0x181),'/payment/white-label',_0x366bb2[_0x1f6d00(0x19b)],_0x30e63c,_0x1f764c);if(_0x30e63c[_0x1f6d00(0x19b)]!==0xc8||!_0x30e63c['data']){const _0x400936=_0x30e63c[_0x1f6d00(0x18d)]?.[_0x1f6d00(0x168)]||_0x30e63c['message']||_0x1f6d00(0x169);console[_0x1f6d00(0x18d)]('===\x20OXAPAY\x20API\x20ERROR\x20==='),console[_0x1f6d00(0x18d)](_0x1f6d00(0x163),_0x400936),console['error']('Error\x20Details:',_0x30e63c[_0x1f6d00(0x18d)]),loggerService_1['loggerService'][_0x1f6d00(0x17b)]('oxapay',_0x1f6d00(0x177),_0x1f6d00(0x14a)+_0x400936);throw new Error(_0x1f6d00(0x199)+_0x400936);}if(!_0x30e63c[_0x1f6d00(0x16f)][_0x1f6d00(0x161)]||!_0x30e63c['data'][_0x1f6d00(0x189)]){console[_0x1f6d00(0x18d)](_0x1f6d00(0x184)),console[_0x1f6d00(0x18d)](_0x1f6d00(0x149)),console['error'](_0x1f6d00(0x14c),_0x30e63c[_0x1f6d00(0x16f)]),loggerService_1[_0x1f6d00(0x150)]['logWhiteDomainError'](_0x1f6d00(0x181),_0x1f6d00(0x177),_0x1f6d00(0x14b));throw new Error(_0x1f6d00(0x162));}console[_0x1f6d00(0x157)](_0x1f6d00(0x16a)),console[_0x1f6d00(0x157)](_0x1f6d00(0x16d),_0x30e63c[_0x1f6d00(0x16f)][_0x1f6d00(0x161)]),console['log'](_0x1f6d00(0x17a),_0x30e63c['data'][_0x1f6d00(0x189)]),console['log'](_0x1f6d00(0x19a),_0x30e63c[_0x1f6d00(0x16f)][_0x1f6d00(0x15f)],_0x30e63c[_0x1f6d00(0x16f)][_0x1f6d00(0x15c)]),console[_0x1f6d00(0x157)]('Network:',_0x30e63c[_0x1f6d00(0x16f)][_0x1f6d00(0x176)]);const _0x4dd683=_0x1f6d00(0x195)+_0x3051ea[_0x1f6d00(0x167)];return{'gateway_payment_id':_0x30e63c[_0x1f6d00(0x16f)][_0x1f6d00(0x161)],'payment_url':_0x4dd683,'track_id':_0x30e63c[_0x1f6d00(0x16f)][_0x1f6d00(0x161)],'amount':_0x30e63c['data']['amount'],'currency':_0x30e63c[_0x1f6d00(0x16f)][_0x1f6d00(0x165)],'pay_amount':_0x30e63c[_0x1f6d00(0x16f)][_0x1f6d00(0x15f)],'pay_currency':_0x30e63c['data']['pay_currency'],'network':_0x30e63c[_0x1f6d00(0x16f)][_0x1f6d00(0x176)],'address':_0x30e63c['data'][_0x1f6d00(0x189)],'qr_code':_0x30e63c[_0x1f6d00(0x16f)]['qr_code'],'rate':_0x30e63c[_0x1f6d00(0x16f)][_0x1f6d00(0x196)],'expired_at':_0x30e63c[_0x1f6d00(0x16f)][_0x1f6d00(0x185)]};}catch(_0x3986ac){console[_0x1f6d00(0x18d)]('===\x20OXAPAY\x20REQUEST\x20ERROR\x20==='),console[_0x1f6d00(0x18d)](_0x1f6d00(0x166),_0x3986ac),loggerService_1[_0x1f6d00(0x150)][_0x1f6d00(0x17b)]('oxapay',_0x1f6d00(0x177),_0x3986ac instanceof Error?_0x3986ac['message']:String(_0x3986ac));throw _0x3986ac;}}[a65_0x1a2fcd(0x183)](_0x14e06c){const _0x16b8ae=a65_0x1a2fcd;switch(_0x14e06c['toLowerCase']()){case _0x16b8ae(0x17e):return'PENDING';case _0x16b8ae(0x158):return _0x16b8ae(0x17f);case _0x16b8ae(0x148):return'PROCESSING';case _0x16b8ae(0x197):return _0x16b8ae(0x143);case'manual_accept':return _0x16b8ae(0x143);case _0x16b8ae(0x14f):return _0x16b8ae(0x143);case _0x16b8ae(0x156):return _0x16b8ae(0x15a);case'refunded':return _0x16b8ae(0x15a);case'expired':return _0x16b8ae(0x187);default:return _0x16b8ae(0x17f);}}}function a65_0x53d3(_0x3a9a36,_0x48418f){_0x3a9a36=_0x3a9a36-0x142;const _0x428502=a65_0x4285();let _0x53d324=_0x428502[_0x3a9a36];return _0x53d324;}function a65_0x4285(){const _0xe0e8a6=['fee_paid_by_payer','35bLZUAY','Address:','logWhiteDomainError','24DexpQI','6OeYYmg','new','PENDING','üí∞\x20OxaPay\x20service\x20initialized','oxapay','90KhGnde','getPaymentStatusFromCallback','===\x20OXAPAY\x20API\x20INCOMPLETE\x20RESPONSE\x20===','expired_at','WCXQ21-DL5OZP-H3SSHH-4GVAR4','EXPIRED','Failed\x20to\x20parse\x20JSON\x20response:','address','application/json','lifetime','Request\x20Body:','error','OxaPay\x20API\x20key\x20is\x20not\x20configured','oxapayService','3557047mIMLrR','createPayment','statusText','parse','===\x20OXAPAY\x20API\x20RESPONSE\x20===','https://app.trapay.uk/payment/','rate','paid','Parsed\x20Result:','OxaPay\x20API\x20error:\x20','Amount:','status','151497qwfsoR','PAID','5806xsJpMl','161OvgClm','URL:','360796JtpCVX','paying','Missing\x20track_id\x20or\x20address\x20in\x20response','API\x20Error:\x20','Incomplete\x20response:\x20missing\x20track_id\x20or\x20address','Response\x20data:','===\x20PARSED\x20OXAPAY\x20RESPONSE\x20===','https://api.trapay.uk/api/oxapay/callback','underpaid','loggerService','122646LMuTvw','logWhiteDomainRequest','defineProperty','toLowerCase','Order\x20#','refunding','log','waiting','OxaPayService','REFUND','apiUrl','pay_currency','env','apiKey','pay_amount','POST','track_id','Invalid\x20response\x20from\x20OxaPay\x20API:\x20missing\x20track_id\x20or\x20address','Error\x20Message:','954173dASeyv','currency','Error:','paymentId','message','Unknown\x20error\x20from\x20OxaPay\x20API','===\x20OXAPAY\x20SUCCESS\x20===','40REsZjM','logWhiteDomainResponse','Track\x20ID:','JSON\x20Parse\x20Error:\x20','data','under_paid_coverage','../loggerService','now','21344yhjhbH','email','stringify','network','/payment/white-label'];a65_0x4285=function(){return _0xe0e8a6;};return a65_0x4285();}exports[a65_0x1a2fcd(0x159)]=OxaPayService,exports[a65_0x1a2fcd(0x18f)]=new OxaPayService();