'use strict';const a73_0x5d8479=a73_0x4882;(function(_0x14b88d,_0x446112){const _0x2f3d84=a73_0x4882,_0xa6624a=_0x14b88d();while(!![]){try{const _0xf96e4a=-parseInt(_0x2f3d84(0x17c))/0x1+parseInt(_0x2f3d84(0x132))/0x2+parseInt(_0x2f3d84(0x15c))/0x3+-parseInt(_0x2f3d84(0x15e))/0x4*(parseInt(_0x2f3d84(0x121))/0x5)+parseInt(_0x2f3d84(0x12f))/0x6*(parseInt(_0x2f3d84(0x178))/0x7)+-parseInt(_0x2f3d84(0x17a))/0x8*(parseInt(_0x2f3d84(0x12b))/0x9)+parseInt(_0x2f3d84(0x175))/0xa;if(_0xf96e4a===_0x446112)break;else _0xa6624a['push'](_0xa6624a['shift']());}catch(_0x3a56fc){_0xa6624a['push'](_0xa6624a['shift']());}}}(a73_0x5211,0x9af3a));Object[a73_0x5d8479(0x14a)](exports,a73_0x5d8479(0x162),{'value':!![]}),exports[a73_0x5d8479(0x165)]=exports[a73_0x5d8479(0x16d)]=void 0x0;const loggerService_1=require(a73_0x5d8479(0x157));class OxaPayService{constructor(){const _0x4120ef=a73_0x5d8479;this[_0x4120ef(0x14f)]=_0x4120ef(0x176),this[_0x4120ef(0x12c)]=process.env.OXAPAY_API_KEY||_0x4120ef(0x123),!this[_0x4120ef(0x12c)]?console[_0x4120ef(0x133)](_0x4120ef(0x177)):console[_0x4120ef(0x144)](_0x4120ef(0x179));}async[a73_0x5d8479(0x17e)](_0x53fbe2){const _0x5a4ce3=a73_0x5d8479,{orderId:_0x5de0b1,amount:_0x253dd7,currency:_0x3ad2c8,payCurrency:_0x21f09d,network:_0x3512a9,description:_0x2df05e,customerEmail:_0xcfc4e4,lifetime:_0x11c956,feePaidByPayer:_0x30503f,underPaidCoverage:_0x3d1ee2}=_0x53fbe2;if(!this[_0x5a4ce3(0x12c)])throw new Error(_0x5a4ce3(0x170));const _0x410efe={'amount':_0x253dd7,'currency':_0x3ad2c8[_0x5a4ce3(0x143)](),'callback_url':_0x5a4ce3(0x14e),'order_id':_0x5de0b1,'description':_0x2df05e||_0x5a4ce3(0x137)+_0x5de0b1};_0x21f09d&&(_0x410efe[_0x5a4ce3(0x14d)]=_0x21f09d[_0x5a4ce3(0x143)]());_0x3512a9&&(_0x410efe[_0x5a4ce3(0x125)]=_0x3512a9);_0xcfc4e4&&(_0x410efe[_0x5a4ce3(0x155)]=_0xcfc4e4);_0x11c956!==undefined?_0x410efe['lifetime']=_0x11c956:_0x410efe[_0x5a4ce3(0x16f)]=0x3c;_0x30503f!==undefined&&(_0x410efe[_0x5a4ce3(0x14b)]=_0x30503f);_0x3d1ee2!==undefined&&(_0x410efe['under_paid_coverage']=_0x3d1ee2);const _0x2f9d6f=Date['now']();try{console[_0x5a4ce3(0x144)](_0x5a4ce3(0x147)),console['log']('URL:',this['apiUrl']),console[_0x5a4ce3(0x144)](_0x5a4ce3(0x163),JSON[_0x5a4ce3(0x148)](_0x410efe,null,0x2)),loggerService_1[_0x5a4ce3(0x161)]['logWhiteDomainRequest'](_0x5a4ce3(0x150),_0x5a4ce3(0x13d),_0x5a4ce3(0x146),_0x410efe);const _0x937d66=await fetch(this[_0x5a4ce3(0x14f)],{'method':_0x5a4ce3(0x146),'headers':{'Content-Type':_0x5a4ce3(0x13b),'merchant_api_key':this[_0x5a4ce3(0x12c)]},'body':JSON[_0x5a4ce3(0x148)](_0x410efe)}),_0x50426e=Date[_0x5a4ce3(0x168)]()-_0x2f9d6f;console[_0x5a4ce3(0x144)](_0x5a4ce3(0x13c)),console[_0x5a4ce3(0x144)]('Status:',_0x937d66['status']),console[_0x5a4ce3(0x144)]('Status\x20Text:',_0x937d66[_0x5a4ce3(0x172)]),console[_0x5a4ce3(0x144)](_0x5a4ce3(0x16c),_0x50426e+'ms');const _0x28c85d=await _0x937d66[_0x5a4ce3(0x174)]();console['log'](_0x5a4ce3(0x158),_0x28c85d);let _0x26cdb0;try{_0x26cdb0=JSON[_0x5a4ce3(0x160)](_0x28c85d);}catch(_0x405b42){console[_0x5a4ce3(0x169)](_0x5a4ce3(0x136),_0x405b42),loggerService_1['loggerService'][_0x5a4ce3(0x16b)](_0x5a4ce3(0x150),'/payment/white-label',_0x5a4ce3(0x12e)+_0x405b42);throw new Error(_0x5a4ce3(0x128)+_0x28c85d);}console[_0x5a4ce3(0x144)](_0x5a4ce3(0x131)),console['log'](_0x5a4ce3(0x14c),JSON['stringify'](_0x26cdb0,null,0x2)),loggerService_1[_0x5a4ce3(0x161)][_0x5a4ce3(0x130)](_0x5a4ce3(0x150),_0x5a4ce3(0x13d),_0x937d66[_0x5a4ce3(0x141)],_0x26cdb0,_0x50426e);if(_0x26cdb0[_0x5a4ce3(0x141)]!==0xc8||!_0x26cdb0[_0x5a4ce3(0x15a)]){const _0x1f8a8b=_0x26cdb0[_0x5a4ce3(0x169)]?.[_0x5a4ce3(0x139)]||_0x26cdb0[_0x5a4ce3(0x139)]||_0x5a4ce3(0x159);console[_0x5a4ce3(0x169)](_0x5a4ce3(0x145)),console[_0x5a4ce3(0x169)](_0x5a4ce3(0x166),_0x1f8a8b),console[_0x5a4ce3(0x169)](_0x5a4ce3(0x154),_0x26cdb0[_0x5a4ce3(0x169)]),loggerService_1['loggerService']['logWhiteDomainError']('oxapay',_0x5a4ce3(0x13d),'API\x20Error:\x20'+_0x1f8a8b);throw new Error('OxaPay\x20API\x20error:\x20'+_0x1f8a8b);}if(!_0x26cdb0[_0x5a4ce3(0x15a)][_0x5a4ce3(0x16e)]||!_0x26cdb0['data'][_0x5a4ce3(0x127)]){console[_0x5a4ce3(0x169)](_0x5a4ce3(0x156)),console[_0x5a4ce3(0x169)](_0x5a4ce3(0x152)),console[_0x5a4ce3(0x169)](_0x5a4ce3(0x124),_0x26cdb0[_0x5a4ce3(0x15a)]),loggerService_1[_0x5a4ce3(0x161)][_0x5a4ce3(0x16b)](_0x5a4ce3(0x150),_0x5a4ce3(0x13d),_0x5a4ce3(0x173));throw new Error(_0x5a4ce3(0x171));}console['log'](_0x5a4ce3(0x138)),console[_0x5a4ce3(0x144)](_0x5a4ce3(0x17d),_0x26cdb0[_0x5a4ce3(0x15a)][_0x5a4ce3(0x16e)]),console['log'](_0x5a4ce3(0x129),_0x26cdb0[_0x5a4ce3(0x15a)]['address']),console['log'](_0x5a4ce3(0x13a),_0x26cdb0[_0x5a4ce3(0x15a)]['pay_amount'],_0x26cdb0['data'][_0x5a4ce3(0x14d)]),console[_0x5a4ce3(0x144)](_0x5a4ce3(0x17b),_0x26cdb0[_0x5a4ce3(0x15a)][_0x5a4ce3(0x125)]);const _0x583e5f=_0x5a4ce3(0x164)+_0x53fbe2[_0x5a4ce3(0x12a)];return{'gateway_payment_id':_0x26cdb0['data']['track_id'],'payment_url':_0x583e5f,'track_id':_0x26cdb0[_0x5a4ce3(0x15a)]['track_id'],'amount':_0x26cdb0['data'][_0x5a4ce3(0x13f)],'currency':_0x26cdb0[_0x5a4ce3(0x15a)][_0x5a4ce3(0x13e)],'pay_amount':_0x26cdb0[_0x5a4ce3(0x15a)][_0x5a4ce3(0x12d)],'pay_currency':_0x26cdb0[_0x5a4ce3(0x15a)]['pay_currency'],'network':_0x26cdb0[_0x5a4ce3(0x15a)][_0x5a4ce3(0x125)],'address':_0x26cdb0[_0x5a4ce3(0x15a)][_0x5a4ce3(0x127)],'qr_code':_0x26cdb0[_0x5a4ce3(0x15a)][_0x5a4ce3(0x15f)],'rate':_0x26cdb0[_0x5a4ce3(0x15a)][_0x5a4ce3(0x153)],'expired_at':_0x26cdb0['data'][_0x5a4ce3(0x15d)]};}catch(_0x3a1aa6){console[_0x5a4ce3(0x169)]('===\x20OXAPAY\x20REQUEST\x20ERROR\x20==='),console[_0x5a4ce3(0x169)](_0x5a4ce3(0x142),_0x3a1aa6),loggerService_1['loggerService']['logWhiteDomainError']('oxapay','/payment/white-label',_0x3a1aa6 instanceof Error?_0x3a1aa6[_0x5a4ce3(0x139)]:String(_0x3a1aa6));throw _0x3a1aa6;}}[a73_0x5d8479(0x167)](_0x58f54c){const _0x5e9ae4=a73_0x5d8479;switch(_0x58f54c[_0x5e9ae4(0x143)]()){case _0x5e9ae4(0x16a):return _0x5e9ae4(0x134);case'waiting':return _0x5e9ae4(0x134);case _0x5e9ae4(0x126):return'PROCESSING';case'paid':return _0x5e9ae4(0x140);case _0x5e9ae4(0x135):return _0x5e9ae4(0x140);case _0x5e9ae4(0x149):return'PAID';case _0x5e9ae4(0x151):return _0x5e9ae4(0x122);case'refunded':return _0x5e9ae4(0x122);case'expired':return _0x5e9ae4(0x15b);default:return _0x5e9ae4(0x134);}}}function a73_0x4882(_0x151303,_0x13809e){_0x151303=_0x151303-0x121;const _0x521109=a73_0x5211();let _0x488298=_0x521109[_0x151303];return _0x488298;}function a73_0x5211(){const _0x389508=['11991950VTwVfv','https://api.oxapay.com/v1/payment/white-label','‚ö†Ô∏è\x20OXAPAY_API_KEY\x20not\x20found\x20in\x20environment\x20variables','2204062BCTzoL','üí∞\x20OxaPay\x20service\x20initialized','3232PSOgnB','Network:','1025734WwXAXX','Track\x20ID:','createPayment','1385630Yasezz','REFUND','WCXQ21-DL5OZP-H3SSHH-4GVAR4','Response\x20data:','network','paying','address','Invalid\x20JSON\x20response\x20from\x20OxaPay\x20API:\x20','Address:','paymentId','2619PMYxCe','apiKey','pay_amount','JSON\x20Parse\x20Error:\x20','6euiiZo','logWhiteDomainResponse','===\x20PARSED\x20OXAPAY\x20RESPONSE\x20===','1089662QfKXxJ','warn','PENDING','manual_accept','Failed\x20to\x20parse\x20JSON\x20response:','Order\x20#','===\x20OXAPAY\x20SUCCESS\x20===','message','Amount:','application/json','===\x20OXAPAY\x20API\x20RESPONSE\x20===','/payment/white-label','currency','amount','PAID','status','Error:','toLowerCase','log','===\x20OXAPAY\x20API\x20ERROR\x20===','POST','===\x20OXAPAY\x20API\x20REQUEST\x20===','stringify','underpaid','defineProperty','fee_paid_by_payer','Parsed\x20Result:','pay_currency','https://api.trapay.uk/api/oxapay/callback','apiUrl','oxapay','refunding','Missing\x20track_id\x20or\x20address\x20in\x20response','rate','Error\x20Details:','email','===\x20OXAPAY\x20API\x20INCOMPLETE\x20RESPONSE\x20===','../loggerService','Raw\x20Response\x20Body:','Unknown\x20error\x20from\x20OxaPay\x20API','data','EXPIRED','820020vJvZCC','expired_at','8bnllxE','qr_code','parse','loggerService','__esModule','Request\x20Body:','https://app.trapay.uk/payment/','oxapayService','Error\x20Message:','getPaymentStatusFromCallback','now','error','new','logWhiteDomainError','Response\x20Time:','OxaPayService','track_id','lifetime','OxaPay\x20API\x20key\x20is\x20not\x20configured','Invalid\x20response\x20from\x20OxaPay\x20API:\x20missing\x20track_id\x20or\x20address','statusText','Incomplete\x20response:\x20missing\x20track_id\x20or\x20address','text'];a73_0x5211=function(){return _0x389508;};return a73_0x5211();}exports[a73_0x5d8479(0x16d)]=OxaPayService,exports[a73_0x5d8479(0x165)]=new OxaPayService();