'use strict';const a73_0x56062b=a73_0x1696;function a73_0xc320(){const _0x530348=['Response\x20Time:','2630309FGgfjx','data','4338785xISaiG','getPaymentStatusFromCallback','https://api.trapay.uk/api/oxapay/callback','Raw\x20Response\x20Body:','paying','logWhiteDomainRequest','__esModule','toLowerCase','Request\x20Body:','status','POST','pay_currency','rate','qr_code','Parsed\x20Result:','Track\x20ID:','address','Unknown\x20error\x20from\x20OxaPay\x20API','===\x20PARSED\x20OXAPAY\x20RESPONSE\x20===','createPayment','OxaPay\x20API\x20error:\x20','network','loggerService','===\x20OXAPAY\x20API\x20INCOMPLETE\x20RESPONSE\x20===','underpaid','Error\x20Details:','6592872jloxWA','Invalid\x20JSON\x20response\x20from\x20OxaPay\x20API:\x20','waiting','‚ö†Ô∏è\x20OXAPAY_API_KEY\x20not\x20found\x20in\x20environment\x20variables','PENDING','message','stringify','Invalid\x20response\x20from\x20OxaPay\x20API:\x20missing\x20track_id\x20or\x20address','===\x20OXAPAY\x20SUCCESS\x20===','amount','PAID','Error\x20Message:','lifetime','apiUrl','REFUND','statusText','34712EgNTJN','WCXQ21-DL5OZP-H3SSHH-4GVAR4','manual_accept','API\x20Error:\x20','OxaPay\x20API\x20key\x20is\x20not\x20configured','defineProperty','82tdZlhp','6382hwiqMP','===\x20OXAPAY\x20API\x20REQUEST\x20===','Address:','fee_paid_by_payer','Missing\x20track_id\x20or\x20address\x20in\x20response','logWhiteDomainResponse','currency','log','pay_amount','apiKey','Order\x20#','Error:','Response\x20data:','3756Uyjzxd','üí∞\x20OxaPay\x20service\x20initialized','===\x20OXAPAY\x20REQUEST\x20ERROR\x20===','oxapayService','OxaPayService','../loggerService','5589198cbnXsX','https://app.trapay.uk/payment/','/payment/white-label','236pFkAbr','track_id','Incomplete\x20response:\x20missing\x20track_id\x20or\x20address','application/json','under_paid_coverage','error','logWhiteDomainError','Failed\x20to\x20parse\x20JSON\x20response:','oxapay','refunding','287xbKbCE','PROCESSING','JSON\x20Parse\x20Error:\x20','10pelvAL','refunded','Status\x20Text:','now'];a73_0xc320=function(){return _0x530348;};return a73_0xc320();}(function(_0x15a2cf,_0x896087){const _0x84c65e=a73_0x1696,_0x437511=_0x15a2cf();while(!![]){try{const _0x19c384=parseInt(_0x84c65e(0xea))/0x1*(-parseInt(_0x84c65e(0xeb))/0x2)+-parseInt(_0x84c65e(0xf8))/0x3*(-parseInt(_0x84c65e(0x101))/0x4)+parseInt(_0x84c65e(0xba))/0x5+-parseInt(_0x84c65e(0xd4))/0x6+-parseInt(_0x84c65e(0x10b))/0x7*(-parseInt(_0x84c65e(0xe4))/0x8)+parseInt(_0x84c65e(0xfe))/0x9*(parseInt(_0x84c65e(0xb3))/0xa)+parseInt(_0x84c65e(0xb8))/0xb;if(_0x19c384===_0x896087)break;else _0x437511['push'](_0x437511['shift']());}catch(_0x5b67d8){_0x437511['push'](_0x437511['shift']());}}}(a73_0xc320,0x972b7));Object[a73_0x56062b(0xe9)](exports,a73_0x56062b(0xc0),{'value':!![]}),exports['oxapayService']=exports[a73_0x56062b(0xfc)]=void 0x0;const loggerService_1=require(a73_0x56062b(0xfd));class OxaPayService{constructor(){const _0x4a347b=a73_0x56062b;this[_0x4a347b(0xe1)]='https://api.oxapay.com/v1/payment/white-label',this[_0x4a347b(0xf4)]=process.env.OXAPAY_API_KEY||_0x4a347b(0xe5),!this[_0x4a347b(0xf4)]?console['warn'](_0x4a347b(0xd7)):console['log'](_0x4a347b(0xf9));}async[a73_0x56062b(0xcd)](_0x25309f){const _0x223aa9=a73_0x56062b,{orderId:_0x5ed195,amount:_0x17488f,currency:_0x236b04,payCurrency:_0x29d3c7,network:_0x4561ca,description:_0x4bab3b,customerEmail:_0x5f4c5f,lifetime:_0x5b397f,feePaidByPayer:_0xd0bfe7,underPaidCoverage:_0x3ce2b0}=_0x25309f;if(!this[_0x223aa9(0xf4)])throw new Error(_0x223aa9(0xe8));const _0x12fc20={'amount':_0x17488f,'currency':_0x236b04[_0x223aa9(0xc1)](),'callback_url':_0x223aa9(0xbc),'order_id':_0x5ed195,'description':_0x4bab3b||_0x223aa9(0xf5)+_0x5ed195};_0x29d3c7&&(_0x12fc20[_0x223aa9(0xc5)]=_0x29d3c7[_0x223aa9(0xc1)]());_0x4561ca&&(_0x12fc20[_0x223aa9(0xcf)]=_0x4561ca);_0x5f4c5f&&(_0x12fc20['email']=_0x5f4c5f);_0x5b397f!==undefined?_0x12fc20[_0x223aa9(0xe0)]=_0x5b397f:_0x12fc20[_0x223aa9(0xe0)]=0x3c;_0xd0bfe7!==undefined&&(_0x12fc20[_0x223aa9(0xee)]=_0xd0bfe7);_0x3ce2b0!==undefined&&(_0x12fc20[_0x223aa9(0x105)]=_0x3ce2b0);const _0x2280b9=Date[_0x223aa9(0xb6)]();try{console[_0x223aa9(0xf2)](_0x223aa9(0xec)),console[_0x223aa9(0xf2)]('URL:',this['apiUrl']),console[_0x223aa9(0xf2)](_0x223aa9(0xc2),JSON[_0x223aa9(0xda)](_0x12fc20,null,0x2)),loggerService_1[_0x223aa9(0xd0)][_0x223aa9(0xbf)](_0x223aa9(0x109),_0x223aa9(0x100),_0x223aa9(0xc4),_0x12fc20);const _0x291301=await fetch(this[_0x223aa9(0xe1)],{'method':_0x223aa9(0xc4),'headers':{'Content-Type':_0x223aa9(0x104),'merchant_api_key':this['apiKey']},'body':JSON[_0x223aa9(0xda)](_0x12fc20)}),_0x3cf8c1=Date['now']()-_0x2280b9;console[_0x223aa9(0xf2)]('===\x20OXAPAY\x20API\x20RESPONSE\x20==='),console[_0x223aa9(0xf2)]('Status:',_0x291301['status']),console[_0x223aa9(0xf2)](_0x223aa9(0xb5),_0x291301[_0x223aa9(0xe3)]),console[_0x223aa9(0xf2)](_0x223aa9(0xb7),_0x3cf8c1+'ms');const _0x442efc=await _0x291301['text']();console['log'](_0x223aa9(0xbd),_0x442efc);let _0x5832e6;try{_0x5832e6=JSON['parse'](_0x442efc);}catch(_0x2471ff){console['error'](_0x223aa9(0x108),_0x2471ff),loggerService_1[_0x223aa9(0xd0)][_0x223aa9(0x107)]('oxapay',_0x223aa9(0x100),_0x223aa9(0x10d)+_0x2471ff);throw new Error(_0x223aa9(0xd5)+_0x442efc);}console['log'](_0x223aa9(0xcc)),console[_0x223aa9(0xf2)](_0x223aa9(0xc8),JSON['stringify'](_0x5832e6,null,0x2)),loggerService_1['loggerService'][_0x223aa9(0xf0)]('oxapay','/payment/white-label',_0x291301[_0x223aa9(0xc3)],_0x5832e6,_0x3cf8c1);if(_0x5832e6[_0x223aa9(0xc3)]!==0xc8||!_0x5832e6[_0x223aa9(0xb9)]){const _0x4aad17=_0x5832e6['error']?.[_0x223aa9(0xd9)]||_0x5832e6['message']||_0x223aa9(0xcb);console[_0x223aa9(0x106)]('===\x20OXAPAY\x20API\x20ERROR\x20==='),console[_0x223aa9(0x106)](_0x223aa9(0xdf),_0x4aad17),console[_0x223aa9(0x106)](_0x223aa9(0xd3),_0x5832e6[_0x223aa9(0x106)]),loggerService_1[_0x223aa9(0xd0)][_0x223aa9(0x107)](_0x223aa9(0x109),_0x223aa9(0x100),_0x223aa9(0xe7)+_0x4aad17);throw new Error(_0x223aa9(0xce)+_0x4aad17);}if(!_0x5832e6[_0x223aa9(0xb9)][_0x223aa9(0x102)]||!_0x5832e6[_0x223aa9(0xb9)][_0x223aa9(0xca)]){console[_0x223aa9(0x106)](_0x223aa9(0xd1)),console[_0x223aa9(0x106)](_0x223aa9(0xef)),console[_0x223aa9(0x106)](_0x223aa9(0xf7),_0x5832e6[_0x223aa9(0xb9)]),loggerService_1[_0x223aa9(0xd0)][_0x223aa9(0x107)](_0x223aa9(0x109),'/payment/white-label',_0x223aa9(0x103));throw new Error(_0x223aa9(0xdb));}console[_0x223aa9(0xf2)](_0x223aa9(0xdc)),console[_0x223aa9(0xf2)](_0x223aa9(0xc9),_0x5832e6[_0x223aa9(0xb9)]['track_id']),console[_0x223aa9(0xf2)](_0x223aa9(0xed),_0x5832e6[_0x223aa9(0xb9)]['address']),console['log']('Amount:',_0x5832e6[_0x223aa9(0xb9)]['pay_amount'],_0x5832e6['data'][_0x223aa9(0xc5)]),console[_0x223aa9(0xf2)]('Network:',_0x5832e6[_0x223aa9(0xb9)][_0x223aa9(0xcf)]);const _0x191a22=_0x223aa9(0xff)+_0x25309f['paymentId'];return{'gateway_payment_id':_0x5832e6['data']['track_id'],'payment_url':_0x191a22,'track_id':_0x5832e6[_0x223aa9(0xb9)][_0x223aa9(0x102)],'amount':_0x5832e6[_0x223aa9(0xb9)][_0x223aa9(0xdd)],'currency':_0x5832e6[_0x223aa9(0xb9)][_0x223aa9(0xf1)],'pay_amount':_0x5832e6[_0x223aa9(0xb9)][_0x223aa9(0xf3)],'pay_currency':_0x5832e6['data'][_0x223aa9(0xc5)],'network':_0x5832e6[_0x223aa9(0xb9)][_0x223aa9(0xcf)],'address':_0x5832e6[_0x223aa9(0xb9)]['address'],'qr_code':_0x5832e6['data'][_0x223aa9(0xc7)],'rate':_0x5832e6[_0x223aa9(0xb9)][_0x223aa9(0xc6)],'expired_at':_0x5832e6[_0x223aa9(0xb9)]['expired_at']};}catch(_0x146734){console[_0x223aa9(0x106)](_0x223aa9(0xfa)),console[_0x223aa9(0x106)](_0x223aa9(0xf6),_0x146734),loggerService_1[_0x223aa9(0xd0)][_0x223aa9(0x107)](_0x223aa9(0x109),'/payment/white-label',_0x146734 instanceof Error?_0x146734[_0x223aa9(0xd9)]:String(_0x146734));throw _0x146734;}}[a73_0x56062b(0xbb)](_0x3f042f){const _0x132547=a73_0x56062b;switch(_0x3f042f['toLowerCase']()){case'new':return'PENDING';case _0x132547(0xd6):return _0x132547(0xd8);case _0x132547(0xbe):return _0x132547(0x10c);case'paid':return'PAID';case _0x132547(0xe6):return _0x132547(0xde);case _0x132547(0xd2):return'PAID';case _0x132547(0x10a):return _0x132547(0xe2);case _0x132547(0xb4):return _0x132547(0xe2);case'expired':return'EXPIRED';default:return _0x132547(0xd8);}}}function a73_0x1696(_0x493772,_0x26dd6a){_0x493772=_0x493772-0xb3;const _0xc320a7=a73_0xc320();let _0x16967d=_0xc320a7[_0x493772];return _0x16967d;}exports[a73_0x56062b(0xfc)]=OxaPayService,exports[a73_0x56062b(0xfb)]=new OxaPayService();