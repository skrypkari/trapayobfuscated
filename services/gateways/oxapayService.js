'use strict';const a73_0x2d5f4e=a73_0x264b;(function(_0x466e9e,_0x21d3fb){const _0x2afef1=a73_0x264b,_0x30a429=_0x466e9e();while(!![]){try{const _0x12ac42=parseInt(_0x2afef1(0x20c))/0x1+parseInt(_0x2afef1(0x22c))/0x2*(-parseInt(_0x2afef1(0x1f9))/0x3)+-parseInt(_0x2afef1(0x22a))/0x4+-parseInt(_0x2afef1(0x216))/0x5+-parseInt(_0x2afef1(0x20f))/0x6*(parseInt(_0x2afef1(0x1fc))/0x7)+parseInt(_0x2afef1(0x210))/0x8*(-parseInt(_0x2afef1(0x212))/0x9)+-parseInt(_0x2afef1(0x1eb))/0xa*(-parseInt(_0x2afef1(0x221))/0xb);if(_0x12ac42===_0x21d3fb)break;else _0x30a429['push'](_0x30a429['shift']());}catch(_0x216494){_0x30a429['push'](_0x30a429['shift']());}}}(a73_0x5cbf,0x1e6cd));function a73_0x264b(_0x38727d,_0x5d0639){_0x38727d=_0x38727d-0x1d8;const _0x5cbfdc=a73_0x5cbf();let _0x264b1f=_0x5cbfdc[_0x38727d];return _0x264b1f;}Object[a73_0x2d5f4e(0x203)](exports,'__esModule',{'value':!![]}),exports['oxapayService']=exports[a73_0x2d5f4e(0x22f)]=void 0x0;const loggerService_1=require(a73_0x2d5f4e(0x20e));class OxaPayService{constructor(){const _0x41fe39=a73_0x2d5f4e;this['apiUrl']=_0x41fe39(0x21b),this[_0x41fe39(0x1e9)]=process.env.OXAPAY_API_KEY||'WCXQ21-DL5OZP-H3SSHH-4GVAR4',!this[_0x41fe39(0x1e9)]?console[_0x41fe39(0x205)]('‚ö†Ô∏è\x20OXAPAY_API_KEY\x20not\x20found\x20in\x20environment\x20variables'):console[_0x41fe39(0x1fd)](_0x41fe39(0x20a));}async[a73_0x2d5f4e(0x202)](_0x58ef4a){const _0x23962=a73_0x2d5f4e,{orderId:_0x11e3f3,amount:_0x370df3,currency:_0x5f00f8,payCurrency:_0x3b6111,network:_0xf7f04,description:_0xcc66de,customerEmail:_0x13920f,lifetime:_0x2d98f0,feePaidByPayer:_0x469241,underPaidCoverage:_0x4b384f}=_0x58ef4a;if(!this[_0x23962(0x1e9)])throw new Error('OxaPay\x20API\x20key\x20is\x20not\x20configured');const _0x385b43={'amount':_0x370df3,'currency':_0x5f00f8[_0x23962(0x1e5)](),'callback_url':_0x23962(0x21c),'order_id':_0x11e3f3,'description':_0xcc66de||_0x23962(0x1ea)+_0x11e3f3};_0x3b6111&&(_0x385b43[_0x23962(0x1db)]=_0x3b6111[_0x23962(0x1e5)]());_0xf7f04&&(_0x385b43[_0x23962(0x22e)]=_0xf7f04);_0x13920f&&(_0x385b43[_0x23962(0x204)]=_0x13920f);_0x2d98f0!==undefined?_0x385b43['lifetime']=_0x2d98f0:_0x385b43[_0x23962(0x1e6)]=0x3c;_0x469241!==undefined&&(_0x385b43[_0x23962(0x1f2)]=_0x469241);_0x4b384f!==undefined&&(_0x385b43[_0x23962(0x1e1)]=_0x4b384f);const _0x32a784=Date[_0x23962(0x229)]();try{console[_0x23962(0x1fd)](_0x23962(0x1df)),console[_0x23962(0x1fd)]('URL:',this['apiUrl']),console['log'](_0x23962(0x223),JSON[_0x23962(0x1e8)](_0x385b43,null,0x2)),loggerService_1[_0x23962(0x220)]['logWhiteDomainRequest']('oxapay','/payment/white-label',_0x23962(0x217),_0x385b43);const _0x98a3ed=await fetch(this[_0x23962(0x206)],{'method':_0x23962(0x217),'headers':{'Content-Type':'application/json','merchant_api_key':this['apiKey']},'body':JSON[_0x23962(0x1e8)](_0x385b43)}),_0x10e427=Date[_0x23962(0x229)]()-_0x32a784;console[_0x23962(0x1fd)](_0x23962(0x215)),console[_0x23962(0x1fd)](_0x23962(0x21a),_0x98a3ed[_0x23962(0x1ef)]),console[_0x23962(0x1fd)]('Status\x20Text:',_0x98a3ed[_0x23962(0x1ed)]),console[_0x23962(0x1fd)](_0x23962(0x201),_0x10e427+'ms');const _0x594e0a=await _0x98a3ed[_0x23962(0x1f4)]();console['log'](_0x23962(0x1e0),_0x594e0a);let _0x4b1943;try{_0x4b1943=JSON[_0x23962(0x214)](_0x594e0a);}catch(_0x16088f){console[_0x23962(0x1d9)]('Failed\x20to\x20parse\x20JSON\x20response:',_0x16088f),loggerService_1[_0x23962(0x220)][_0x23962(0x222)](_0x23962(0x22b),_0x23962(0x1da),_0x23962(0x1e3)+_0x16088f);throw new Error('Invalid\x20JSON\x20response\x20from\x20OxaPay\x20API:\x20'+_0x594e0a);}console['log'](_0x23962(0x231)),console[_0x23962(0x1fd)](_0x23962(0x228),JSON['stringify'](_0x4b1943,null,0x2)),loggerService_1['loggerService'][_0x23962(0x226)](_0x23962(0x22b),_0x23962(0x1da),_0x98a3ed[_0x23962(0x1ef)],_0x4b1943,_0x10e427);if(_0x4b1943[_0x23962(0x1ef)]!==0xc8||!_0x4b1943[_0x23962(0x21d)]){const _0x1d8c9f=_0x4b1943[_0x23962(0x1d9)]?.['message']||_0x4b1943[_0x23962(0x22d)]||_0x23962(0x1ec);console[_0x23962(0x1d9)]('===\x20OXAPAY\x20API\x20ERROR\x20==='),console[_0x23962(0x1d9)](_0x23962(0x1dd),_0x1d8c9f),console[_0x23962(0x1d9)](_0x23962(0x1fe),_0x4b1943['error']),loggerService_1['loggerService'][_0x23962(0x222)]('oxapay',_0x23962(0x1da),_0x23962(0x1fb)+_0x1d8c9f);throw new Error('OxaPay\x20API\x20error:\x20'+_0x1d8c9f);}if(!_0x4b1943[_0x23962(0x21d)][_0x23962(0x1e4)]||!_0x4b1943['data'][_0x23962(0x200)]){console[_0x23962(0x1d9)](_0x23962(0x1f5)),console[_0x23962(0x1d9)](_0x23962(0x208)),console[_0x23962(0x1d9)](_0x23962(0x218),_0x4b1943['data']),loggerService_1['loggerService'][_0x23962(0x222)](_0x23962(0x22b),'/payment/white-label','Incomplete\x20response:\x20missing\x20track_id\x20or\x20address');throw new Error(_0x23962(0x1ee));}console[_0x23962(0x1fd)](_0x23962(0x230)),console[_0x23962(0x1fd)](_0x23962(0x1ff),_0x4b1943[_0x23962(0x21d)][_0x23962(0x1e4)]),console['log'](_0x23962(0x1de),_0x4b1943[_0x23962(0x21d)][_0x23962(0x200)]),console[_0x23962(0x1fd)](_0x23962(0x1e2),_0x4b1943['data'][_0x23962(0x213)],_0x4b1943[_0x23962(0x21d)][_0x23962(0x1db)]),console[_0x23962(0x1fd)](_0x23962(0x1d8),_0x4b1943[_0x23962(0x21d)][_0x23962(0x22e)]);const _0x54d113=_0x23962(0x227)+_0x58ef4a[_0x23962(0x225)];return{'gateway_payment_id':_0x4b1943[_0x23962(0x21d)]['track_id'],'payment_url':_0x54d113,'track_id':_0x4b1943[_0x23962(0x21d)][_0x23962(0x1e4)],'amount':_0x4b1943['data'][_0x23962(0x207)],'currency':_0x4b1943[_0x23962(0x21d)][_0x23962(0x20d)],'pay_amount':_0x4b1943[_0x23962(0x21d)][_0x23962(0x213)],'pay_currency':_0x4b1943[_0x23962(0x21d)]['pay_currency'],'network':_0x4b1943[_0x23962(0x21d)]['network'],'address':_0x4b1943[_0x23962(0x21d)][_0x23962(0x200)],'qr_code':_0x4b1943[_0x23962(0x21d)]['qr_code'],'rate':_0x4b1943['data'][_0x23962(0x219)],'expired_at':_0x4b1943[_0x23962(0x21d)][_0x23962(0x1f7)]};}catch(_0x1d700e){console[_0x23962(0x1d9)](_0x23962(0x1f8)),console[_0x23962(0x1d9)](_0x23962(0x209),_0x1d700e),loggerService_1[_0x23962(0x220)][_0x23962(0x222)](_0x23962(0x22b),'/payment/white-label',_0x1d700e instanceof Error?_0x1d700e[_0x23962(0x22d)]:String(_0x1d700e));throw _0x1d700e;}}['getPaymentStatusFromCallback'](_0x2b0762){const _0x66c9d7=a73_0x2d5f4e;switch(_0x2b0762['toLowerCase']()){case _0x66c9d7(0x20b):return _0x66c9d7(0x1e7);case _0x66c9d7(0x224):return _0x66c9d7(0x1e7);case _0x66c9d7(0x1f1):return'PROCESSING';case'paid':return _0x66c9d7(0x1fa);case _0x66c9d7(0x1f0):return _0x66c9d7(0x1fa);case _0x66c9d7(0x21f):return _0x66c9d7(0x1fa);case'refunding':return _0x66c9d7(0x21e);case _0x66c9d7(0x1f6):return _0x66c9d7(0x21e);case _0x66c9d7(0x211):return _0x66c9d7(0x1f3);default:return _0x66c9d7(0x1e7);}}}exports[a73_0x2d5f4e(0x22f)]=OxaPayService,exports[a73_0x2d5f4e(0x1dc)]=new OxaPayService();function a73_0x5cbf(){const _0xe98f29=['logWhiteDomainResponse','https://app.trapay.uk/payment/','Parsed\x20Result:','now','743180hRbOSo','oxapay','2qdLmdu','message','network','OxaPayService','===\x20OXAPAY\x20SUCCESS\x20===','===\x20PARSED\x20OXAPAY\x20RESPONSE\x20===','Network:','error','/payment/white-label','pay_currency','oxapayService','Error\x20Message:','Address:','===\x20OXAPAY\x20API\x20REQUEST\x20===','Raw\x20Response\x20Body:','under_paid_coverage','Amount:','JSON\x20Parse\x20Error:\x20','track_id','toLowerCase','lifetime','PENDING','stringify','apiKey','Order\x20#','4533590qwSYZX','Unknown\x20error\x20from\x20OxaPay\x20API','statusText','Invalid\x20response\x20from\x20OxaPay\x20API:\x20missing\x20track_id\x20or\x20address','status','manual_accept','paying','fee_paid_by_payer','EXPIRED','text','===\x20OXAPAY\x20API\x20INCOMPLETE\x20RESPONSE\x20===','refunded','expired_at','===\x20OXAPAY\x20REQUEST\x20ERROR\x20===','350718KWndzj','PAID','API\x20Error:\x20','971173mGCUYj','log','Error\x20Details:','Track\x20ID:','address','Response\x20Time:','createPayment','defineProperty','email','warn','apiUrl','amount','Missing\x20track_id\x20or\x20address\x20in\x20response','Error:','üí∞\x20OxaPay\x20service\x20initialized','new','207537nxEByu','currency','../loggerService','6gVCMRF','128cNLMHe','expired','38187bBLDJC','pay_amount','parse','===\x20OXAPAY\x20API\x20RESPONSE\x20===','134735SveMMZ','POST','Response\x20data:','rate','Status:','https://api.oxapay.com/v1/payment/white-label','https://api.trapay.uk/api/oxapay/callback','data','REFUND','underpaid','loggerService','11dLncUP','logWhiteDomainError','Request\x20Body:','waiting','paymentId'];a73_0x5cbf=function(){return _0xe98f29;};return a73_0x5cbf();}