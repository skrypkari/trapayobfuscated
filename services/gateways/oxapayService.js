'use strict';function a65_0x298c(){const _0x172842=['parse','POST','Request\x20Body:','===\x20PARSED\x20OXAPAY\x20RESPONSE\x20===','error','logWhiteDomainResponse','Error:','status','OxaPayService','fee_paid_by_payer','paying','Error\x20Details:','REFUND','expired_at','text','refunding','env','email','oxapay','===\x20OXAPAY\x20API\x20REQUEST\x20===','Order\x20#','JSON\x20Parse\x20Error:\x20','now','defineProperty','Parsed\x20Result:','===\x20OXAPAY\x20API\x20RESPONSE\x20===','===\x20OXAPAY\x20API\x20INCOMPLETE\x20RESPONSE\x20===','OXAPAY_API_KEY','Invalid\x20JSON\x20response\x20from\x20OxaPay\x20API:\x20','qr_code','Error\x20Message:','5694648ZmLHRw','lifetime','OxaPay\x20API\x20error:\x20','3700712JMUrUX','Network:','address','https://app.trapay.uk/payment/','paid','loggerService','Failed\x20to\x20parse\x20JSON\x20response:','2114658eRHwlZ','5653920AxCyGt','../loggerService','data','currency','Amount:','log','233825leAtgg','Unknown\x20error\x20from\x20OxaPay\x20API','getPaymentStatusFromCallback','Address:','application/json','üí∞\x20OxaPay\x20service\x20initialized','new','===\x20OXAPAY\x20SUCCESS\x20===','apiKey','Response\x20data:','Invalid\x20response\x20from\x20OxaPay\x20API:\x20missing\x20track_id\x20or\x20address','pay_currency','message','6BXxLjG','__esModule','track_id','===\x20OXAPAY\x20API\x20ERROR\x20===','underpaid','oxapayService','apiUrl','waiting','PROCESSING','manual_accept','logWhiteDomainRequest','8289MALrTQ','OxaPay\x20API\x20key\x20is\x20not\x20configured','toLowerCase','warn','WCXQ21-DL5OZP-H3SSHH-4GVAR4','logWhiteDomainError','/payment/white-label','API\x20Error:\x20','createPayment','pay_amount','PENDING','https://api.oxapay.com/v1/payment/white-label','‚ö†Ô∏è\x20OXAPAY_API_KEY\x20not\x20found\x20in\x20environment\x20variables','rate','under_paid_coverage','statusText','20024XIYjgI','stringify','PAID','6197849qthNiF','network'];a65_0x298c=function(){return _0x172842;};return a65_0x298c();}const a65_0x4a5a94=a65_0x8dee;function a65_0x8dee(_0x5a84e5,_0x56f262){_0x5a84e5=_0x5a84e5-0x87;const _0x298c60=a65_0x298c();let _0x8deeef=_0x298c60[_0x5a84e5];return _0x8deeef;}(function(_0x2dde85,_0x525a0e){const _0x12833b=a65_0x8dee,_0xa53b01=_0x2dde85();while(!![]){try{const _0x5e962c=-parseInt(_0x12833b(0x93))/0x1*(parseInt(_0x12833b(0xa0))/0x2)+-parseInt(_0x12833b(0x8c))/0x3+-parseInt(_0x12833b(0xe2))/0x4+-parseInt(_0x12833b(0x8d))/0x5+parseInt(_0x12833b(0xdf))/0x6+parseInt(_0x12833b(0xbe))/0x7+parseInt(_0x12833b(0xbb))/0x8*(parseInt(_0x12833b(0xab))/0x9);if(_0x5e962c===_0x525a0e)break;else _0xa53b01['push'](_0xa53b01['shift']());}catch(_0x27765b){_0xa53b01['push'](_0xa53b01['shift']());}}}(a65_0x298c,0xa564f));Object[a65_0x4a5a94(0xd7)](exports,a65_0x4a5a94(0xa1),{'value':!![]}),exports[a65_0x4a5a94(0xa5)]=exports[a65_0x4a5a94(0xc8)]=void 0x0;const loggerService_1=require(a65_0x4a5a94(0x8e));class OxaPayService{constructor(){const _0x16358e=a65_0x4a5a94;this[_0x16358e(0xa6)]=_0x16358e(0xb6),this[_0x16358e(0x9b)]=process[_0x16358e(0xd0)][_0x16358e(0xdb)]||_0x16358e(0xaf),!this[_0x16358e(0x9b)]?console[_0x16358e(0xae)](_0x16358e(0xb7)):console[_0x16358e(0x92)](_0x16358e(0x98));}async[a65_0x4a5a94(0xb3)](_0x190b48){const _0x56b926=a65_0x4a5a94,{orderId:_0x2ed550,amount:_0x249d8f,currency:_0x42156c,payCurrency:_0x4fe6cd,network:_0x5973ec,description:_0x48875f,customerEmail:_0x4d86c2,lifetime:_0x4cbc6d,feePaidByPayer:_0x1e4671,underPaidCoverage:_0x353f26}=_0x190b48;if(!this[_0x56b926(0x9b)])throw new Error(_0x56b926(0xac));const _0x151e2f={'amount':_0x249d8f,'currency':_0x42156c['toLowerCase'](),'callback_url':'https://api.trapay.uk/api/oxapay/callback','order_id':_0x2ed550,'description':_0x48875f||_0x56b926(0xd4)+_0x2ed550};_0x4fe6cd&&(_0x151e2f[_0x56b926(0x9e)]=_0x4fe6cd[_0x56b926(0xad)]());_0x5973ec&&(_0x151e2f['network']=_0x5973ec);_0x4d86c2&&(_0x151e2f[_0x56b926(0xd1)]=_0x4d86c2);_0x4cbc6d!==undefined?_0x151e2f[_0x56b926(0xe0)]=_0x4cbc6d:_0x151e2f[_0x56b926(0xe0)]=0x3c;_0x1e4671!==undefined&&(_0x151e2f[_0x56b926(0xc9)]=_0x1e4671);_0x353f26!==undefined&&(_0x151e2f[_0x56b926(0xb9)]=_0x353f26);const _0x355153=Date[_0x56b926(0xd6)]();try{console[_0x56b926(0x92)](_0x56b926(0xd3)),console[_0x56b926(0x92)]('URL:',this[_0x56b926(0xa6)]),console[_0x56b926(0x92)](_0x56b926(0xc2),JSON[_0x56b926(0xbc)](_0x151e2f,null,0x2)),loggerService_1['loggerService'][_0x56b926(0xaa)](_0x56b926(0xd2),'/payment/white-label',_0x56b926(0xc1),_0x151e2f);const _0x13eb73=await fetch(this[_0x56b926(0xa6)],{'method':_0x56b926(0xc1),'headers':{'Content-Type':_0x56b926(0x97),'merchant_api_key':this[_0x56b926(0x9b)]},'body':JSON[_0x56b926(0xbc)](_0x151e2f)}),_0x26f804=Date[_0x56b926(0xd6)]()-_0x355153;console[_0x56b926(0x92)](_0x56b926(0xd9)),console[_0x56b926(0x92)]('Status:',_0x13eb73[_0x56b926(0xc7)]),console[_0x56b926(0x92)]('Status\x20Text:',_0x13eb73[_0x56b926(0xba)]),console[_0x56b926(0x92)]('Response\x20Time:',_0x26f804+'ms');const _0x1c35c2=await _0x13eb73[_0x56b926(0xce)]();console[_0x56b926(0x92)]('Raw\x20Response\x20Body:',_0x1c35c2);let _0x12734f;try{_0x12734f=JSON[_0x56b926(0xc0)](_0x1c35c2);}catch(_0x9cad5c){console[_0x56b926(0xc4)](_0x56b926(0x8b),_0x9cad5c),loggerService_1[_0x56b926(0x8a)][_0x56b926(0xb0)](_0x56b926(0xd2),_0x56b926(0xb1),_0x56b926(0xd5)+_0x9cad5c);throw new Error(_0x56b926(0xdc)+_0x1c35c2);}console[_0x56b926(0x92)](_0x56b926(0xc3)),console[_0x56b926(0x92)](_0x56b926(0xd8),JSON[_0x56b926(0xbc)](_0x12734f,null,0x2)),loggerService_1[_0x56b926(0x8a)][_0x56b926(0xc5)](_0x56b926(0xd2),_0x56b926(0xb1),_0x13eb73['status'],_0x12734f,_0x26f804);if(_0x12734f[_0x56b926(0xc7)]!==0xc8||!_0x12734f[_0x56b926(0x8f)]){const _0x3bcb98=_0x12734f[_0x56b926(0xc4)]?.[_0x56b926(0x9f)]||_0x12734f[_0x56b926(0x9f)]||_0x56b926(0x94);console[_0x56b926(0xc4)](_0x56b926(0xa3)),console['error'](_0x56b926(0xde),_0x3bcb98),console[_0x56b926(0xc4)](_0x56b926(0xcb),_0x12734f[_0x56b926(0xc4)]),loggerService_1[_0x56b926(0x8a)][_0x56b926(0xb0)]('oxapay','/payment/white-label',_0x56b926(0xb2)+_0x3bcb98);throw new Error(_0x56b926(0xe1)+_0x3bcb98);}if(!_0x12734f['data'][_0x56b926(0xa2)]||!_0x12734f[_0x56b926(0x8f)][_0x56b926(0x87)]){console[_0x56b926(0xc4)](_0x56b926(0xda)),console[_0x56b926(0xc4)]('Missing\x20track_id\x20or\x20address\x20in\x20response'),console[_0x56b926(0xc4)](_0x56b926(0x9c),_0x12734f[_0x56b926(0x8f)]),loggerService_1[_0x56b926(0x8a)][_0x56b926(0xb0)]('oxapay',_0x56b926(0xb1),'Incomplete\x20response:\x20missing\x20track_id\x20or\x20address');throw new Error(_0x56b926(0x9d));}console['log'](_0x56b926(0x9a)),console[_0x56b926(0x92)]('Track\x20ID:',_0x12734f[_0x56b926(0x8f)][_0x56b926(0xa2)]),console[_0x56b926(0x92)](_0x56b926(0x96),_0x12734f[_0x56b926(0x8f)][_0x56b926(0x87)]),console[_0x56b926(0x92)](_0x56b926(0x91),_0x12734f[_0x56b926(0x8f)][_0x56b926(0xb4)],_0x12734f['data']['pay_currency']),console['log'](_0x56b926(0xe3),_0x12734f[_0x56b926(0x8f)][_0x56b926(0xbf)]);const _0x2c87a6=_0x56b926(0x88)+_0x190b48['paymentId'];return{'gateway_payment_id':_0x12734f['data'][_0x56b926(0xa2)],'payment_url':_0x2c87a6,'track_id':_0x12734f[_0x56b926(0x8f)][_0x56b926(0xa2)],'amount':_0x12734f[_0x56b926(0x8f)]['amount'],'currency':_0x12734f[_0x56b926(0x8f)][_0x56b926(0x90)],'pay_amount':_0x12734f['data'][_0x56b926(0xb4)],'pay_currency':_0x12734f[_0x56b926(0x8f)][_0x56b926(0x9e)],'network':_0x12734f['data'][_0x56b926(0xbf)],'address':_0x12734f['data'][_0x56b926(0x87)],'qr_code':_0x12734f[_0x56b926(0x8f)][_0x56b926(0xdd)],'rate':_0x12734f[_0x56b926(0x8f)][_0x56b926(0xb8)],'expired_at':_0x12734f[_0x56b926(0x8f)][_0x56b926(0xcd)]};}catch(_0x551f29){console[_0x56b926(0xc4)]('===\x20OXAPAY\x20REQUEST\x20ERROR\x20==='),console[_0x56b926(0xc4)](_0x56b926(0xc6),_0x551f29),loggerService_1[_0x56b926(0x8a)][_0x56b926(0xb0)](_0x56b926(0xd2),_0x56b926(0xb1),_0x551f29 instanceof Error?_0x551f29[_0x56b926(0x9f)]:String(_0x551f29));throw _0x551f29;}}[a65_0x4a5a94(0x95)](_0x4335b7){const _0x2da63d=a65_0x4a5a94;switch(_0x4335b7[_0x2da63d(0xad)]()){case _0x2da63d(0x99):return _0x2da63d(0xb5);case _0x2da63d(0xa7):return _0x2da63d(0xb5);case _0x2da63d(0xca):return _0x2da63d(0xa8);case _0x2da63d(0x89):return _0x2da63d(0xbd);case _0x2da63d(0xa9):return'PAID';case _0x2da63d(0xa4):return'PAID';case _0x2da63d(0xcf):return _0x2da63d(0xcc);case'refunded':return'REFUND';case'expired':return'EXPIRED';default:return _0x2da63d(0xb5);}}}exports[a65_0x4a5a94(0xc8)]=OxaPayService,exports['oxapayService']=new OxaPayService();