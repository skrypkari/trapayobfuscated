'use strict';const a46_0x58a354=a46_0x28ec;function a46_0x47c6(){const _0x573c61=['EST','Forced\x20status\x20(webhook\x20disabled):\x20','AUT','ECU','GUY','SYC','client_transaction_id','healthCheck','AmPay\x20payment\x20creation\x20failed:\x20','MEX','defineProperty','MDG','FLK','BEL','‚ùå\x20AmPay\x20payment\x20creation\x20failed:','LBN','132OoecLJ','893640wASnGw','createPaymentLink','PER','health.php','JPN','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20failure...','KOR','Email:','__esModule','LKA','object','‚ö†Ô∏è\x20Unknown\x20country\x20code:\x20','SGP','https://traffer.uk/gateway/ampay/webhook.php','ZMB','IND','redirect_url','FIN','TKM','253736xTOsdM','LVA','GBR','Payment\x20URL:','apiUrl','Order\x20ID:','Customer:','POL','ALB','NGA','AUS','1882176alkWXN','TUR','AZE','status','SAU','1355139oJUnRT','No\x20payment\x20ID\x20found\x20in\x20webhook\x20data','ISR','GHA','SRB','58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda','KHM','LTU','Invalid\x20JSON\x20response\x20from\x20AmPay:\x20','ITA','Extracted\x20payment\x20ID:\x20','QAT','BLR','parse','YEM','üì§\x20AmPay\x20request\x20body:','ampay.php','MDA','Customer\x20Country\x20(3-letter):','GAM','ESP','Webhook\x20data:','Webhook\x20data\x20type:','convert2LetterTo3LetterCountryCode','PRK','application/json','PSE','processWebhook','BGD','ROU','MMR','MYS','PAK','UKR','https://traffer.uk/gateway/ampay/','error','199544ohoWHo','GEO','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20event...','stringify','NPL','SYR','===\x20Processing\x20AmPay\x20webhook\x20===','UZB','NOR','Tracker\x20ID:','message','UGA','CHE','3584NmLrll','13941khRjOt','log','Status:','EGY','USA','SUR','üá¶üá≤\x20Creating\x20AmPay\x20payment\x20link...','MDV','MNE','ISL','TrapayAPI/1.0','Amount:','Customer\x20Country\x20(2-letter):','HUN','ARE','2091440wxeyPt','üá¶üá≤\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing','XKX','forEach','BOL','ZAF','tracker_id','VNM','GRC','SWE','FRA','PRY','VAT','CZE','üì•\x20AmPay\x20raw\x20response:','MCO','system_id','THA','BTN','Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id','ARM','‚úÖ\x20AmPay\x20payment\x20link\x20created\x20successfully','AFG','LAO','MNG','SMR','SVK','toUpperCase','DEU','CHL','MLT','üìä\x20AmPay\x20response\x20data:','a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815','‚ö†Ô∏è\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status','currency','HRV','KGZ','IRQ','RUS','‚ùå\x20AmPay\x20health\x20check\x20failed:','KEN','CYP','URY','keys','KAZ','CAN','AmPayService',',\x20using\x20RUS\x20as\x20fallback','LUX','ZWE','BRA','DNK','MWI','warn','GET','REU','CLIENT_MERCHANT_ID','ampayService','amount'];a46_0x47c6=function(){return _0x573c61;};return a46_0x47c6();}(function(_0x4066b9,_0x28545c){const _0x8e3e58=a46_0x28ec,_0x1f2803=_0x4066b9();while(!![]){try{const _0x4d6046=-parseInt(_0x8e3e58(0x209))/0x1+parseInt(_0x8e3e58(0x1e0))/0x2+-parseInt(_0x8e3e58(0x1e5))/0x3+parseInt(_0x8e3e58(0x176))/0x4+-parseInt(_0x8e3e58(0x1c2))/0x5+-parseInt(_0x8e3e58(0x1c1))/0x6*(-parseInt(_0x8e3e58(0x1d5))/0x7)+-parseInt(_0x8e3e58(0x216))/0x8*(parseInt(_0x8e3e58(0x217))/0x9);if(_0x4d6046===_0x28545c)break;else _0x1f2803['push'](_0x1f2803['shift']());}catch(_0x3afafb){_0x1f2803['push'](_0x1f2803['shift']());}}}(a46_0x47c6,0xb40bb));Object[a46_0x58a354(0x1bb)](exports,a46_0x58a354(0x1ca),{'value':!![]}),exports['ampayService']=exports[a46_0x58a354(0x1a4)]=void 0x0;class AmPayService{constructor(){const _0x2ef6ac=a46_0x58a354;this[_0x2ef6ac(0x1ae)]='TRAFFER',this['API_PUBLIC_KEY']=_0x2ef6ac(0x1ea),this['API_PRIVATE_KEY']=_0x2ef6ac(0x196),this[_0x2ef6ac(0x1d9)]=_0x2ef6ac(0x207),console['log'](_0x2ef6ac(0x177));}[a46_0x58a354(0x1fc)](_0x5df481){const _0xa1e944=a46_0x58a354,_0x3ee458={'AD':'AND','AL':_0xa1e944(0x1dd),'AT':_0xa1e944(0x1b3),'BA':'BIH','BE':_0xa1e944(0x1be),'BG':'BGR','BY':_0xa1e944(0x1f1),'CH':_0xa1e944(0x215),'CY':_0xa1e944(0x19f),'CZ':_0xa1e944(0x183),'DE':_0xa1e944(0x192),'DK':_0xa1e944(0x1a9),'EE':_0xa1e944(0x1b1),'ES':_0xa1e944(0x1f9),'FI':_0xa1e944(0x1d3),'FR':_0xa1e944(0x180),'GB':_0xa1e944(0x1d7),'GE':_0xa1e944(0x20a),'GR':_0xa1e944(0x17e),'HR':_0xa1e944(0x199),'HU':_0xa1e944(0x224),'IE':'IRL','IS':_0xa1e944(0x220),'IT':_0xa1e944(0x1ee),'LI':'LIE','LT':_0xa1e944(0x1ec),'LU':_0xa1e944(0x1a6),'LV':_0xa1e944(0x1d6),'MC':_0xa1e944(0x185),'MD':_0xa1e944(0x1f6),'ME':_0xa1e944(0x21f),'MK':'MKD','MT':_0xa1e944(0x194),'NL':'NLD','NO':_0xa1e944(0x211),'PL':_0xa1e944(0x1dc),'PT':'PRT','RO':_0xa1e944(0x202),'RS':_0xa1e944(0x1e9),'RU':'RUS','SE':_0xa1e944(0x17f),'SI':'SVN','SK':_0xa1e944(0x190),'SM':_0xa1e944(0x18f),'UA':_0xa1e944(0x206),'VA':_0xa1e944(0x182),'XK':_0xa1e944(0x178),'AM':_0xa1e944(0x18a),'AZ':_0xa1e944(0x1e2),'KZ':_0xa1e944(0x1a2),'KG':_0xa1e944(0x19a),'TJ':'TJK','TM':_0xa1e944(0x1d4),'UZ':_0xa1e944(0x210),'US':_0xa1e944(0x21b),'CA':_0xa1e944(0x1a3),'AU':_0xa1e944(0x1df),'JP':_0xa1e944(0x1c6),'CN':'CHN','IN':_0xa1e944(0x1d1),'BR':_0xa1e944(0x1a8),'MX':_0xa1e944(0x1ba),'AR':'ARG','CL':_0xa1e944(0x193),'PE':_0xa1e944(0x1c4),'CO':'COL','VE':'VEN','EC':_0xa1e944(0x1b4),'BO':_0xa1e944(0x17a),'PY':_0xa1e944(0x181),'UY':_0xa1e944(0x1a0),'SR':_0xa1e944(0x21c),'GY':_0xa1e944(0x1b5),'FK':_0xa1e944(0x1bd),'ZA':_0xa1e944(0x17b),'EG':_0xa1e944(0x21a),'NG':_0xa1e944(0x1de),'KE':_0xa1e944(0x19e),'GH':_0xa1e944(0x1e8),'TZ':'TZA','UG':_0xa1e944(0x214),'ZW':_0xa1e944(0x1a7),'ZM':_0xa1e944(0x1d0),'MW':_0xa1e944(0x1aa),'MZ':'MOZ','MG':_0xa1e944(0x1bc),'MU':'MUS','SC':_0xa1e944(0x1b6),'RE':_0xa1e944(0x1ad),'TR':_0xa1e944(0x1e1),'IR':'IRN','IQ':_0xa1e944(0x19b),'SA':_0xa1e944(0x1e4),'AE':_0xa1e944(0x175),'KW':'KWT','QA':_0xa1e944(0x1f0),'BH':'BHR','OM':'OMN','YE':_0xa1e944(0x1f3),'JO':'JOR','LB':_0xa1e944(0x1c0),'SY':_0xa1e944(0x20e),'IL':_0xa1e944(0x1e7),'PS':_0xa1e944(0x1ff),'KR':_0xa1e944(0x1c8),'KP':_0xa1e944(0x1fd),'TH':_0xa1e944(0x187),'VN':_0xa1e944(0x17d),'MY':_0xa1e944(0x204),'SG':_0xa1e944(0x1ce),'ID':'IDN','PH':'PHL','LA':_0xa1e944(0x18d),'KH':_0xa1e944(0x1eb),'MM':_0xa1e944(0x203),'BD':_0xa1e944(0x201),'LK':_0xa1e944(0x1cb),'NP':_0xa1e944(0x20d),'BT':_0xa1e944(0x188),'MV':_0xa1e944(0x21e),'AF':_0xa1e944(0x18c),'PK':_0xa1e944(0x205),'MN':_0xa1e944(0x18e)},_0x47e2cd=_0x3ee458[_0x5df481[_0xa1e944(0x191)]()];if(!_0x47e2cd)return console[_0xa1e944(0x1ab)](_0xa1e944(0x1cd)+_0x5df481+_0xa1e944(0x1a5)),_0xa1e944(0x19c);return _0x47e2cd;}async[a46_0x58a354(0x1c3)](_0x38ea38){const _0x1f7245=a46_0x58a354;try{const {orderId:_0xcd268c,amount:_0x5a4402,currency:_0x1d06e8,firstName:_0x4cf1b4,lastName:_0x7cbebe,email:_0x440ecc,customerIp:_0x5a64ff,customerCountry:_0x56fa5f,successUrl:_0x348b65,failureUrl:_0x312ecb}=_0x38ea38;console[_0x1f7245(0x218)](_0x1f7245(0x21d)),console[_0x1f7245(0x218)](_0x1f7245(0x1da),_0xcd268c),console[_0x1f7245(0x218)](_0x1f7245(0x222),_0x5a4402,_0x1d06e8),console[_0x1f7245(0x218)](_0x1f7245(0x1db),_0x4cf1b4+'\x20'+_0x7cbebe),console[_0x1f7245(0x218)](_0x1f7245(0x1c9),_0x440ecc),console[_0x1f7245(0x218)]('Customer\x20IP:',_0x5a64ff),console[_0x1f7245(0x218)](_0x1f7245(0x223),_0x56fa5f);const _0x54e882=this[_0x1f7245(0x1fc)](_0x56fa5f);console['log'](_0x1f7245(0x1f7),_0x54e882);const _0x268781={'sub_method':_0x1f7245(0x1f8),'currency':_0x1d06e8[_0x1f7245(0x191)](),'amount':_0x5a4402,'callback_url':_0x1f7245(0x1cf),'client_merchant_id':this[_0x1f7245(0x1ae)],'client_transaction_id':_0xcd268c,'transaction_description':_0xcd268c,'customer':{'ip':_0x5a64ff,'email':_0x440ecc,'full_name':_0x4cf1b4+'\x20'+_0x7cbebe,'country':_0x54e882},'success_redirect_url':_0x348b65,'error_redirect_url':_0x312ecb};console[_0x1f7245(0x218)](_0x1f7245(0x1f4),JSON[_0x1f7245(0x20c)](_0x268781,null,0x2));const _0x5f191c=await fetch(this[_0x1f7245(0x1d9)]+_0x1f7245(0x1f5),{'method':'POST','headers':{'Content-Type':_0x1f7245(0x1fe),'User-Agent':_0x1f7245(0x221)},'body':JSON[_0x1f7245(0x20c)](_0x268781)}),_0x123181=await _0x5f191c['text']();console[_0x1f7245(0x218)](_0x1f7245(0x184),_0x123181);if(!_0x5f191c['ok'])throw new Error('AmPay\x20API\x20error:\x20HTTP\x20'+_0x5f191c['status']+'\x20-\x20'+_0x123181);let _0x1a7238;try{_0x1a7238=JSON[_0x1f7245(0x1f2)](_0x123181);}catch(_0x43429c){throw new Error(_0x1f7245(0x1ed)+_0x123181);}console[_0x1f7245(0x218)](_0x1f7245(0x195),JSON[_0x1f7245(0x20c)](_0x1a7238,null,0x2));if(!_0x1a7238[_0x1f7245(0x1d2)])throw new Error(_0x1f7245(0x1b9)+(_0x1a7238['error_message']||_0x1a7238[_0x1f7245(0x213)]||'Unknown\x20error'));const _0x636677=_0x1a7238[_0x1f7245(0x1d2)],_0x51a165=_0x1a7238[_0x1f7245(0x186)],_0x3537a5=_0x1a7238[_0x1f7245(0x17c)];return console[_0x1f7245(0x218)](_0x1f7245(0x18b)),console['log'](_0x1f7245(0x1d8),_0x636677),console[_0x1f7245(0x218)]('System\x20ID:',_0x51a165),console[_0x1f7245(0x218)](_0x1f7245(0x212),_0x3537a5),console[_0x1f7245(0x218)](_0x1f7245(0x219),_0x1a7238[_0x1f7245(0x1e3)]),console[_0x1f7245(0x218)](_0x1f7245(0x20b)),{'gateway_payment_id':_0x51a165||_0x3537a5||_0xcd268c,'payment_url':_0x636677||'','transaction_id':_0x51a165};}catch(_0x142087){console[_0x1f7245(0x208)](_0x1f7245(0x1bf),_0x142087),console[_0x1f7245(0x218)](_0x1f7245(0x1c7));throw _0x142087;}}async[a46_0x58a354(0x1b8)](){const _0x4e36b9=a46_0x58a354;try{const _0x1839d0=await fetch(this[_0x4e36b9(0x1d9)]+_0x4e36b9(0x1c5),{'method':_0x4e36b9(0x1ac),'headers':{'Content-Type':'application/json','User-Agent':_0x4e36b9(0x221)}});return _0x1839d0&&_0x1839d0[_0x4e36b9(0x1e3)]===0xc8?!![]:![];}catch(_0x11b6b6){return console[_0x4e36b9(0x208)](_0x4e36b9(0x19d),_0x11b6b6),![];}}async[a46_0x58a354(0x200)](_0x309293){const _0x532cee=a46_0x58a354;console[_0x532cee(0x218)](_0x532cee(0x20f)),console[_0x532cee(0x218)](_0x532cee(0x197)),console[_0x532cee(0x218)](_0x532cee(0x1fa),_0x309293),console[_0x532cee(0x218)](_0x532cee(0x1fb),typeof _0x309293),console[_0x532cee(0x218)]('Available\x20fields:');_0x309293&&typeof _0x309293===_0x532cee(0x1cc)&&Object[_0x532cee(0x1a1)](_0x309293)[_0x532cee(0x179)](_0xd388=>{const _0x15359d=_0x532cee;console[_0x15359d(0x218)]('\x20\x20'+_0xd388+':\x20'+_0x309293[_0xd388]+'\x20('+typeof _0x309293[_0xd388]+')');});let _0x5ecefe='PENDING';const _0x212cf3=_0x309293[_0x532cee(0x1b7)]||_0x309293[_0x532cee(0x186)]||_0x309293[_0x532cee(0x17c)]||'';return console[_0x532cee(0x218)](_0x532cee(0x1ef)+_0x212cf3),console[_0x532cee(0x218)](_0x532cee(0x1b2)+_0x5ecefe),!_0x212cf3&&(console['error'](_0x532cee(0x1e6)),console[_0x532cee(0x208)](_0x532cee(0x189))),{'paymentId':_0x212cf3,'status':_0x5ecefe,'amount':_0x309293[_0x532cee(0x1b0)],'currency':_0x309293[_0x532cee(0x198)]};}}function a46_0x28ec(_0x5353b8,_0x322940){const _0x47c676=a46_0x47c6();return a46_0x28ec=function(_0x28ec1d,_0x899f68){_0x28ec1d=_0x28ec1d-0x175;let _0xa88ac8=_0x47c676[_0x28ec1d];return _0xa88ac8;},a46_0x28ec(_0x5353b8,_0x322940);}exports[a46_0x58a354(0x1a4)]=AmPayService,exports[a46_0x58a354(0x1af)]=new AmPayService();