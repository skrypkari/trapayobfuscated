'use strict';const a42_0x12aa2f=a42_0x4f67;(function(_0x1ffeae,_0x1a1471){const _0x4823f0=a42_0x4f67,_0x37a6a6=_0x1ffeae();while(!![]){try{const _0xb0fc03=parseInt(_0x4823f0(0x143))/0x1*(-parseInt(_0x4823f0(0x131))/0x2)+-parseInt(_0x4823f0(0x10e))/0x3*(parseInt(_0x4823f0(0x147))/0x4)+-parseInt(_0x4823f0(0xd3))/0x5+parseInt(_0x4823f0(0x162))/0x6+-parseInt(_0x4823f0(0x109))/0x7*(-parseInt(_0x4823f0(0x10f))/0x8)+-parseInt(_0x4823f0(0x136))/0x9*(parseInt(_0x4823f0(0x11e))/0xa)+parseInt(_0x4823f0(0x10d))/0xb;if(_0xb0fc03===_0x1a1471)break;else _0x37a6a6['push'](_0x37a6a6['shift']());}catch(_0x353877){_0x37a6a6['push'](_0x37a6a6['shift']());}}}(a42_0x53c3,0xa7aa8));function a42_0x53c3(){const _0x564e72=['Extracted\x20payment\x20ID:\x20','TKM','YEM','466065xmjIPw','PENDING','system_id','warn','MDG','Tracker\x20ID:','text','__esModule','PRY','FIN','Customer\x20Country\x20(3-letter):','✅\x20AmPay\x20payment\x20link\x20created\x20successfully','LUX','System\x20ID:','ZMB','BGR','KHM','createPaymentLink','application/json','\x20-\x20','LVA','MUS','CAN','TUR','log','KEN','📤\x20AmPay\x20request\x20body:','SYC','ISR','58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda','Status:','POST','Amount:','ARG','Available\x20fields:','ALB','API_PUBLIC_KEY','IDN','AUT','LIE','MEX','USA','CHL','COL','MDA','BEL','UGA','===\x20Processing\x20AmPay\x20webhook\x20===','redirect_url','ZWE','defineProperty','AFG','stringify','SGP','7skNrjH','NGA','CHE','health.php','6923070xlaUaQ','9nSaJBJ','8261304yjBYwH','FLK','EGY','LBN','KAZ','POL','amount','AmPay\x20API\x20error:\x20HTTP\x20','SUR','PAK','MMR','MLT','KOR','⚠️\x20Unknown\x20country\x20code:\x20','NLD','5046070Xhlgok','SWE','XKX','PSE','API_PRIVATE_KEY','CZE','MOZ','No\x20payment\x20ID\x20found\x20in\x20webhook\x20data','ARM','Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id','DEU','GRC','IND','forEach','BHR','TJK','📝\x20Logging\x20AmPay\x20payment\x20creation\x20failure...','client_transaction_id','ampayService','471332gPPBcC','UKR','HUN','CHN','healthCheck','9uMcYRE','MKD','SYR','toUpperCase','TRAFFER','BGD','⚠️\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status','Unknown\x20error','AND','ampay.php','PRK','TZA','https://traffer.uk/gateway/ampay/','1aFMEUk','UZB','THA','PRT','406712DvHbVV','IRQ','ECU','keys','convert2LetterTo3LetterCountryCode','🇦🇲\x20Creating\x20AmPay\x20payment\x20link...','BLR','REU','processWebhook','Customer:','Webhook\x20data\x20type:','Email:','GUY','SVK','📥\x20AmPay\x20raw\x20response:','https://api.trapay.uk/api/webhooks/gateway/ampay','currency','TrapayAPI/1.0','LTU','apiUrl','IRL','RUS','OMN','BTN',',\x20using\x20RUS\x20as\x20fallback','❌\x20AmPay\x20payment\x20creation\x20failed:','tracker_id','979482sIeroR','SVN','Order\x20ID:','Invalid\x20JSON\x20response\x20from\x20AmPay:\x20','MCO','ITA','MWI','GBR','SRB','status','🇦🇲\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing','PER','EST','GHA','MNE','KWT','GET','LKA','message','ESP','error','IRN','object','AmPayService','CLIENT_MERCHANT_ID','QAT','MYS'];a42_0x53c3=function(){return _0x564e72;};return a42_0x53c3();}Object[a42_0x12aa2f(0x105)](exports,a42_0x12aa2f(0xda),{'value':!![]}),exports[a42_0x12aa2f(0x130)]=exports[a42_0x12aa2f(0x179)]=void 0x0;class AmPayService{constructor(){const _0x11d304=a42_0x12aa2f;this[_0x11d304(0x17a)]=_0x11d304(0x13a),this[_0x11d304(0xf7)]=_0x11d304(0xf0),this[_0x11d304(0x122)]='a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815',this['apiUrl']=_0x11d304(0x142),console[_0x11d304(0xeb)](_0x11d304(0x16c));}[a42_0x12aa2f(0x14b)](_0x377566){const _0x86d09c=a42_0x12aa2f,_0x424f70={'AD':_0x86d09c(0x13e),'AL':_0x86d09c(0xf6),'AT':_0x86d09c(0xf9),'BA':'BIH','BE':_0x86d09c(0x100),'BG':_0x86d09c(0xe2),'BY':_0x86d09c(0x14d),'CH':_0x86d09c(0x10b),'CY':'CYP','CZ':_0x86d09c(0x123),'DE':_0x86d09c(0x128),'DK':'DNK','EE':_0x86d09c(0x16e),'ES':_0x86d09c(0x175),'FI':_0x86d09c(0xdc),'FR':'FRA','GB':_0x86d09c(0x169),'GE':'GEO','GR':_0x86d09c(0x129),'HR':'HRV','HU':_0x86d09c(0x133),'IE':_0x86d09c(0x15b),'IS':'ISL','IT':_0x86d09c(0x167),'LI':_0x86d09c(0xfa),'LT':_0x86d09c(0x159),'LU':_0x86d09c(0xdf),'LV':_0x86d09c(0xe7),'MC':_0x86d09c(0x166),'MD':_0x86d09c(0xff),'ME':_0x86d09c(0x170),'MK':_0x86d09c(0x137),'MT':_0x86d09c(0x11a),'NL':_0x86d09c(0x11d),'NO':'NOR','PL':_0x86d09c(0x114),'PT':_0x86d09c(0x146),'RO':'ROU','RS':_0x86d09c(0x16a),'RU':'RUS','SE':_0x86d09c(0x11f),'SI':_0x86d09c(0x163),'SK':_0x86d09c(0x154),'SM':'SMR','UA':_0x86d09c(0x132),'VA':'VAT','XK':_0x86d09c(0x120),'AM':_0x86d09c(0x126),'AZ':'AZE','KZ':_0x86d09c(0x113),'KG':'KGZ','TJ':_0x86d09c(0x12d),'TM':_0x86d09c(0xd1),'UZ':_0x86d09c(0x144),'US':_0x86d09c(0xfc),'CA':_0x86d09c(0xe9),'AU':'AUS','JP':'JPN','CN':_0x86d09c(0x134),'IN':_0x86d09c(0x12a),'BR':'BRA','MX':_0x86d09c(0xfb),'AR':_0x86d09c(0xf4),'CL':_0x86d09c(0xfd),'PE':_0x86d09c(0x16d),'CO':_0x86d09c(0xfe),'VE':'VEN','EC':_0x86d09c(0x149),'BO':'BOL','PY':_0x86d09c(0xdb),'UY':'URY','SR':_0x86d09c(0x117),'GY':_0x86d09c(0x153),'FK':_0x86d09c(0x110),'ZA':'ZAF','EG':_0x86d09c(0x111),'NG':_0x86d09c(0x10a),'KE':_0x86d09c(0xec),'GH':_0x86d09c(0x16f),'TZ':_0x86d09c(0x141),'UG':_0x86d09c(0x101),'ZW':_0x86d09c(0x104),'ZM':_0x86d09c(0xe1),'MW':_0x86d09c(0x168),'MZ':_0x86d09c(0x124),'MG':_0x86d09c(0xd7),'MU':_0x86d09c(0xe8),'SC':_0x86d09c(0xee),'RE':_0x86d09c(0x14e),'TR':_0x86d09c(0xea),'IR':_0x86d09c(0x177),'IQ':_0x86d09c(0x148),'SA':'SAU','AE':'ARE','KW':_0x86d09c(0x171),'QA':_0x86d09c(0xce),'BH':_0x86d09c(0x12c),'OM':_0x86d09c(0x15d),'YE':_0x86d09c(0xd2),'JO':'JOR','LB':_0x86d09c(0x112),'SY':_0x86d09c(0x138),'IL':_0x86d09c(0xef),'PS':_0x86d09c(0x121),'KR':_0x86d09c(0x11b),'KP':_0x86d09c(0x140),'TH':_0x86d09c(0x145),'VN':'VNM','MY':_0x86d09c(0xcf),'SG':_0x86d09c(0x108),'ID':_0x86d09c(0xf8),'PH':'PHL','LA':'LAO','KH':_0x86d09c(0xe3),'MM':_0x86d09c(0x119),'BD':_0x86d09c(0x13b),'LK':_0x86d09c(0x173),'NP':'NPL','BT':_0x86d09c(0x15e),'MV':'MDV','AF':_0x86d09c(0x106),'PK':_0x86d09c(0x118),'MN':'MNG'},_0x39e946=_0x424f70[_0x377566['toUpperCase']()];if(!_0x39e946)return console[_0x86d09c(0xd6)](_0x86d09c(0x11c)+_0x377566+_0x86d09c(0x15f)),_0x86d09c(0x15c);return _0x39e946;}async[a42_0x12aa2f(0xe4)](_0x30e946){const _0xe91388=a42_0x12aa2f;try{const {orderId:_0x180abe,amount:_0x122384,currency:_0x161b6b,firstName:_0x550bc9,lastName:_0x26b68c,email:_0x485547,customerIp:_0x294ac4,customerCountry:_0x524a2d,successUrl:_0x361781,failureUrl:_0x321935}=_0x30e946;console['log'](_0xe91388(0x14c)),console[_0xe91388(0xeb)](_0xe91388(0x164),_0x180abe),console[_0xe91388(0xeb)](_0xe91388(0xf3),_0x122384,_0x161b6b),console['log'](_0xe91388(0x150),_0x550bc9+'\x20'+_0x26b68c),console[_0xe91388(0xeb)](_0xe91388(0x152),_0x485547),console['log']('Customer\x20IP:',_0x294ac4),console[_0xe91388(0xeb)]('Customer\x20Country\x20(2-letter):',_0x524a2d);const _0x3a5648=this['convert2LetterTo3LetterCountryCode'](_0x524a2d);console[_0xe91388(0xeb)](_0xe91388(0xdd),_0x3a5648);const _0x447460={'sub_method':'GAM','currency':_0x161b6b[_0xe91388(0x139)](),'amount':_0x122384,'callback_url':_0xe91388(0x156),'client_merchant_id':this[_0xe91388(0x17a)],'client_transaction_id':_0x180abe,'transaction_description':_0x180abe,'customer':{'ip':_0x294ac4,'email':_0x485547,'full_name':_0x550bc9+'\x20'+_0x26b68c,'country':_0x3a5648},'success_redirect_url':_0x361781,'error_redirect_url':_0x321935};console[_0xe91388(0xeb)](_0xe91388(0xed),JSON['stringify'](_0x447460,null,0x2));const _0x1f9105=await fetch(this[_0xe91388(0x15a)]+_0xe91388(0x13f),{'method':_0xe91388(0xf2),'headers':{'Content-Type':_0xe91388(0xe5),'User-Agent':_0xe91388(0x158)},'body':JSON[_0xe91388(0x107)](_0x447460)}),_0x532f2a=await _0x1f9105[_0xe91388(0xd9)]();console[_0xe91388(0xeb)](_0xe91388(0x155),_0x532f2a);if(!_0x1f9105['ok'])throw new Error(_0xe91388(0x116)+_0x1f9105[_0xe91388(0x16b)]+_0xe91388(0xe6)+_0x532f2a);let _0x1c0e47;try{_0x1c0e47=JSON['parse'](_0x532f2a);}catch(_0xc1b333){throw new Error(_0xe91388(0x165)+_0x532f2a);}console[_0xe91388(0xeb)]('📊\x20AmPay\x20response\x20data:',JSON[_0xe91388(0x107)](_0x1c0e47,null,0x2));if(!_0x1c0e47[_0xe91388(0x103)])throw new Error('AmPay\x20payment\x20creation\x20failed:\x20'+(_0x1c0e47['error_message']||_0x1c0e47[_0xe91388(0x174)]||_0xe91388(0x13d)));const _0x4c05b3=_0x1c0e47[_0xe91388(0x103)],_0x206331=_0x1c0e47[_0xe91388(0xd5)],_0x2aafc5=_0x1c0e47[_0xe91388(0x161)];return console[_0xe91388(0xeb)](_0xe91388(0xde)),console[_0xe91388(0xeb)]('Payment\x20URL:',_0x4c05b3),console[_0xe91388(0xeb)](_0xe91388(0xe0),_0x206331),console[_0xe91388(0xeb)](_0xe91388(0xd8),_0x2aafc5),console['log'](_0xe91388(0xf1),_0x1c0e47[_0xe91388(0x16b)]),console[_0xe91388(0xeb)]('📝\x20Logging\x20AmPay\x20payment\x20creation\x20event...'),{'gateway_payment_id':_0x206331||_0x2aafc5||_0x180abe,'payment_url':_0x4c05b3||'','transaction_id':_0x206331};}catch(_0x56ac1e){console[_0xe91388(0x176)](_0xe91388(0x160),_0x56ac1e),console['log'](_0xe91388(0x12e));throw _0x56ac1e;}}async[a42_0x12aa2f(0x135)](){const _0x1d728b=a42_0x12aa2f;try{const _0x229b16=await fetch(this[_0x1d728b(0x15a)]+_0x1d728b(0x10c),{'method':_0x1d728b(0x172),'headers':{'Content-Type':'application/json','User-Agent':'TrapayAPI/1.0'}});return _0x229b16&&_0x229b16[_0x1d728b(0x16b)]===0xc8?!![]:![];}catch(_0x3a3259){return console[_0x1d728b(0x176)]('❌\x20AmPay\x20health\x20check\x20failed:',_0x3a3259),![];}}async[a42_0x12aa2f(0x14f)](_0x37ee81){const _0x4703e5=a42_0x12aa2f;console['log'](_0x4703e5(0x102)),console['log'](_0x4703e5(0x13c)),console[_0x4703e5(0xeb)]('Webhook\x20data:',_0x37ee81),console['log'](_0x4703e5(0x151),typeof _0x37ee81),console[_0x4703e5(0xeb)](_0x4703e5(0xf5));_0x37ee81&&typeof _0x37ee81===_0x4703e5(0x178)&&Object[_0x4703e5(0x14a)](_0x37ee81)[_0x4703e5(0x12b)](_0x2c0c65=>{const _0x5693da=_0x4703e5;console[_0x5693da(0xeb)]('\x20\x20'+_0x2c0c65+':\x20'+_0x37ee81[_0x2c0c65]+'\x20('+typeof _0x37ee81[_0x2c0c65]+')');});let _0x4e79a2=_0x4703e5(0xd4);const _0x11653c=_0x37ee81[_0x4703e5(0x12f)]||_0x37ee81[_0x4703e5(0xd5)]||_0x37ee81['tracker_id']||'';return console[_0x4703e5(0xeb)](_0x4703e5(0xd0)+_0x11653c),console[_0x4703e5(0xeb)]('Forced\x20status\x20(webhook\x20disabled):\x20'+_0x4e79a2),!_0x11653c&&(console[_0x4703e5(0x176)](_0x4703e5(0x125)),console['error'](_0x4703e5(0x127))),{'paymentId':_0x11653c,'status':_0x4e79a2,'amount':_0x37ee81[_0x4703e5(0x115)],'currency':_0x37ee81[_0x4703e5(0x157)]};}}function a42_0x4f67(_0x34006d,_0x2f2694){const _0x53c305=a42_0x53c3();return a42_0x4f67=function(_0x4f6741,_0x22ebdb){_0x4f6741=_0x4f6741-0xce;let _0x3591f7=_0x53c305[_0x4f6741];return _0x3591f7;},a42_0x4f67(_0x34006d,_0x2f2694);}exports[a42_0x12aa2f(0x179)]=AmPayService,exports[a42_0x12aa2f(0x130)]=new AmPayService();