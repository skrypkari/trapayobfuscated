'use strict';function a46_0x2877(_0x4cc4ae,_0x3f086a){const _0x3c8964=a46_0x3c89();return a46_0x2877=function(_0x28772c,_0x175e1a){_0x28772c=_0x28772c-0xdb;let _0x2ae83a=_0x3c8964[_0x28772c];return _0x2ae83a;},a46_0x2877(_0x4cc4ae,_0x3f086a);}const a46_0x1616bc=a46_0x2877;(function(_0x428259,_0x234629){const _0x5de1d7=a46_0x2877,_0x4ab2bb=_0x428259();while(!![]){try{const _0x941f8b=parseInt(_0x5de1d7(0x123))/0x1+-parseInt(_0x5de1d7(0x17b))/0x2+parseInt(_0x5de1d7(0x173))/0x3+parseInt(_0x5de1d7(0x16c))/0x4*(-parseInt(_0x5de1d7(0x122))/0x5)+-parseInt(_0x5de1d7(0x134))/0x6+-parseInt(_0x5de1d7(0xf2))/0x7+parseInt(_0x5de1d7(0x158))/0x8;if(_0x941f8b===_0x234629)break;else _0x4ab2bb['push'](_0x4ab2bb['shift']());}catch(_0x4c2475){_0x4ab2bb['push'](_0x4ab2bb['shift']());}}}(a46_0x3c89,0xd34cb));Object[a46_0x1616bc(0x148)](exports,a46_0x1616bc(0x157),{'value':!![]}),exports[a46_0x1616bc(0x169)]=exports[a46_0x1616bc(0x11a)]=void 0x0;class AmPayService{constructor(){const _0x57623f=a46_0x1616bc;this[_0x57623f(0xef)]='TRAFFER',this['API_PUBLIC_KEY']=_0x57623f(0x15d),this[_0x57623f(0x175)]=_0x57623f(0xdd),this['apiUrl']=_0x57623f(0x13d),console['log']('üá¶üá≤\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing');}['convert2LetterTo3LetterCountryCode'](_0x35d0fb){const _0x4f66d7=a46_0x1616bc,_0x498ae1={'AD':_0x4f66d7(0x171),'AL':'ALB','AT':_0x4f66d7(0x141),'BA':'BIH','BE':_0x4f66d7(0xde),'BG':_0x4f66d7(0x113),'BY':'BLR','CH':_0x4f66d7(0x115),'CY':_0x4f66d7(0x10a),'CZ':'CZE','DE':_0x4f66d7(0x15b),'DK':_0x4f66d7(0x10e),'EE':_0x4f66d7(0x152),'ES':_0x4f66d7(0xea),'FI':'FIN','FR':'FRA','GB':_0x4f66d7(0xf4),'GE':_0x4f66d7(0x10f),'GR':_0x4f66d7(0x144),'HR':'HRV','HU':_0x4f66d7(0xf3),'IE':_0x4f66d7(0xfb),'IS':'ISL','IT':'ITA','LI':'LIE','LT':_0x4f66d7(0x166),'LU':_0x4f66d7(0xe2),'LV':'LVA','MC':_0x4f66d7(0x146),'MD':_0x4f66d7(0x160),'ME':_0x4f66d7(0xf8),'MK':_0x4f66d7(0xdc),'MT':_0x4f66d7(0x164),'NL':_0x4f66d7(0x114),'NO':_0x4f66d7(0x167),'PL':_0x4f66d7(0x14c),'PT':_0x4f66d7(0x102),'RO':'ROU','RS':'SRB','RU':_0x4f66d7(0x125),'SE':_0x4f66d7(0x120),'SI':_0x4f66d7(0x118),'SK':'SVK','SM':_0x4f66d7(0xfd),'UA':_0x4f66d7(0xeb),'VA':_0x4f66d7(0x178),'XK':_0x4f66d7(0x109),'AM':_0x4f66d7(0x137),'AZ':_0x4f66d7(0x138),'KZ':_0x4f66d7(0x12e),'KG':'KGZ','TJ':'TJK','TM':'TKM','UZ':_0x4f66d7(0xed),'US':_0x4f66d7(0x155),'CA':_0x4f66d7(0x128),'AU':_0x4f66d7(0x142),'JP':_0x4f66d7(0x105),'CN':_0x4f66d7(0x13c),'IN':_0x4f66d7(0x172),'BR':'BRA','MX':_0x4f66d7(0x119),'AR':_0x4f66d7(0x15e),'CL':_0x4f66d7(0x163),'PE':_0x4f66d7(0x161),'CO':_0x4f66d7(0x117),'VE':_0x4f66d7(0x16a),'EC':_0x4f66d7(0xf5),'BO':'BOL','PY':_0x4f66d7(0x132),'UY':_0x4f66d7(0xdb),'SR':_0x4f66d7(0x16d),'GY':_0x4f66d7(0x130),'FK':_0x4f66d7(0x111),'ZA':_0x4f66d7(0x107),'EG':'EGY','NG':_0x4f66d7(0x14a),'KE':_0x4f66d7(0x15a),'GH':'GHA','TZ':_0x4f66d7(0x12f),'UG':_0x4f66d7(0xf1),'ZW':_0x4f66d7(0x121),'ZM':_0x4f66d7(0x149),'MW':_0x4f66d7(0xe5),'MZ':_0x4f66d7(0x133),'MG':'MDG','MU':_0x4f66d7(0x165),'SC':_0x4f66d7(0x135),'RE':_0x4f66d7(0xfe),'TR':_0x4f66d7(0x12b),'IR':_0x4f66d7(0x104),'IQ':_0x4f66d7(0x12d),'SA':_0x4f66d7(0xff),'AE':'ARE','KW':_0x4f66d7(0xdf),'QA':'QAT','BH':_0x4f66d7(0x14d),'OM':_0x4f66d7(0xee),'YE':_0x4f66d7(0x154),'JO':'JOR','LB':'LBN','SY':_0x4f66d7(0x16e),'IL':_0x4f66d7(0x13a),'PS':_0x4f66d7(0x17a),'KR':_0x4f66d7(0xe4),'KP':_0x4f66d7(0x16f),'TH':_0x4f66d7(0x147),'VN':'VNM','MY':_0x4f66d7(0x139),'SG':_0x4f66d7(0x103),'ID':'IDN','PH':_0x4f66d7(0xe8),'LA':_0x4f66d7(0x13e),'KH':_0x4f66d7(0x177),'MM':_0x4f66d7(0x16b),'BD':'BGD','LK':'LKA','NP':'NPL','BT':_0x4f66d7(0x150),'MV':'MDV','AF':_0x4f66d7(0x156),'PK':_0x4f66d7(0x159),'MN':_0x4f66d7(0x11c)},_0x580837=_0x498ae1[_0x35d0fb[_0x4f66d7(0x124)]()];if(!_0x580837)return console[_0x4f66d7(0x145)]('‚ö†Ô∏è\x20Unknown\x20country\x20code:\x20'+_0x35d0fb+_0x4f66d7(0x112)),'RUS';return _0x580837;}async[a46_0x1616bc(0x10d)](_0x8034cd){const _0x305756=a46_0x1616bc;try{const {orderId:_0x295833,amount:_0x2f9b31,currency:_0x5cef49,firstName:_0x2eee68,lastName:_0x463d33,email:_0x5e85e0,customerIp:_0x542331,customerCountry:_0x51ddf8,successUrl:_0x17c9a6,failureUrl:_0x4434f8}=_0x8034cd;console[_0x305756(0x131)]('üá¶üá≤\x20Creating\x20AmPay\x20payment\x20link...'),console['log'](_0x305756(0x14b),_0x295833),console['log'](_0x305756(0x127),_0x2f9b31,_0x5cef49),console[_0x305756(0x131)](_0x305756(0xfc),_0x2eee68+'\x20'+_0x463d33),console[_0x305756(0x131)]('Email:',_0x5e85e0),console[_0x305756(0x131)](_0x305756(0x162),_0x542331),console['log'](_0x305756(0xe0),_0x51ddf8);const _0x2300fd=this[_0x305756(0xe3)](_0x51ddf8);console[_0x305756(0x131)](_0x305756(0xf6),_0x2300fd);const _0x16bba8={'sub_method':_0x305756(0xe7),'currency':_0x5cef49[_0x305756(0x124)](),'amount':_0x2f9b31,'callback_url':_0x305756(0x14f),'client_merchant_id':this[_0x305756(0xef)],'client_transaction_id':_0x295833,'transaction_description':_0x295833,'customer':{'ip':_0x542331,'email':_0x5e85e0,'full_name':_0x2eee68+'\x20'+_0x463d33,'country':_0x2300fd},'success_redirect_url':_0x17c9a6,'error_redirect_url':_0x4434f8};console['log'](_0x305756(0xec),JSON[_0x305756(0x11e)](_0x16bba8,null,0x2));const _0xf6651c=await fetch(this[_0x305756(0x12c)]+_0x305756(0xfa),{'method':'POST','headers':{'Content-Type':_0x305756(0x143),'User-Agent':_0x305756(0x170)},'body':JSON[_0x305756(0x11e)](_0x16bba8)}),_0x393524=await _0xf6651c[_0x305756(0x13b)]();console[_0x305756(0x131)]('üì•\x20AmPay\x20raw\x20response:',_0x393524);if(!_0xf6651c['ok'])throw new Error(_0x305756(0x116)+_0xf6651c[_0x305756(0x126)]+'\x20-\x20'+_0x393524);let _0x406acb;try{_0x406acb=JSON['parse'](_0x393524);}catch(_0x4e3e1e){throw new Error(_0x305756(0x14e)+_0x393524);}console['log'](_0x305756(0x176),JSON['stringify'](_0x406acb,null,0x2));if(!_0x406acb['redirect_url'])throw new Error(_0x305756(0x11d)+(_0x406acb[_0x305756(0x140)]||_0x406acb['message']||'Unknown\x20error'));const _0x4f6b68=_0x406acb[_0x305756(0x13f)],_0x21f785=_0x406acb[_0x305756(0xe1)],_0x7f4261=_0x406acb[_0x305756(0x100)];return console[_0x305756(0x131)](_0x305756(0x110)),console['log'](_0x305756(0xf0),_0x4f6b68),console['log'](_0x305756(0x15c),_0x21f785),console[_0x305756(0x131)](_0x305756(0x129),_0x7f4261),console['log'](_0x305756(0x108),_0x406acb[_0x305756(0x126)]),console['log'](_0x305756(0xf9)),{'gateway_payment_id':_0x21f785||_0x7f4261||_0x295833,'payment_url':_0x4f6b68||'','transaction_id':_0x21f785};}catch(_0x141960){console[_0x305756(0x153)]('‚ùå\x20AmPay\x20payment\x20creation\x20failed:',_0x141960),console[_0x305756(0x131)](_0x305756(0x168));throw _0x141960;}}async[a46_0x1616bc(0x174)](){const _0x2542c4=a46_0x1616bc;try{const _0x491c3e=await fetch(this['apiUrl']+_0x2542c4(0x101),{'method':_0x2542c4(0xe9),'headers':{'Content-Type':_0x2542c4(0x143),'User-Agent':_0x2542c4(0x170)}});return _0x491c3e&&_0x491c3e[_0x2542c4(0x126)]===0xc8?!![]:![];}catch(_0x33d36b){return console[_0x2542c4(0x153)]('‚ùå\x20AmPay\x20health\x20check\x20failed:',_0x33d36b),![];}}async['processWebhook'](_0x4465b4){const _0x3cb677=a46_0x1616bc;console[_0x3cb677(0x131)]('===\x20Processing\x20AmPay\x20webhook\x20==='),console[_0x3cb677(0x131)]('‚ö†Ô∏è\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status'),console[_0x3cb677(0x131)](_0x3cb677(0x12a),_0x4465b4),console[_0x3cb677(0x131)](_0x3cb677(0x10c),typeof _0x4465b4),console['log'](_0x3cb677(0x136));_0x4465b4&&typeof _0x4465b4===_0x3cb677(0x11f)&&Object[_0x3cb677(0x179)](_0x4465b4)[_0x3cb677(0x10b)](_0x54a0af=>{const _0x2d9951=_0x3cb677;console[_0x2d9951(0x131)]('\x20\x20'+_0x54a0af+':\x20'+_0x4465b4[_0x54a0af]+'\x20('+typeof _0x4465b4[_0x54a0af]+')');});let _0x471d09=_0x3cb677(0xf7);const _0x83ee06=_0x4465b4[_0x3cb677(0x11b)]||_0x4465b4['system_id']||_0x4465b4['tracker_id']||'';return console['log']('Extracted\x20payment\x20ID:\x20'+_0x83ee06),console[_0x3cb677(0x131)](_0x3cb677(0xe6)+_0x471d09),!_0x83ee06&&(console[_0x3cb677(0x153)](_0x3cb677(0x151)),console[_0x3cb677(0x153)](_0x3cb677(0x106))),{'paymentId':_0x83ee06,'status':_0x471d09,'amount':_0x4465b4[_0x3cb677(0x15f)],'currency':_0x4465b4['currency']};}}exports['AmPayService']=AmPayService,exports['ampayService']=new AmPayService();function a46_0x3c89(){const _0xff57b4=['DEU','System\x20ID:','58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda','ARG','amount','MDA','PER','Customer\x20IP:','CHL','MLT','MUS','LTU','NOR','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20failure...','ampayService','VEN','MMR','128jGIOkS','SUR','SYR','PRK','TrapayAPI/1.0','AND','IND','1269633xZlcLl','healthCheck','API_PRIVATE_KEY','üìä\x20AmPay\x20response\x20data:','KHM','VAT','keys','PSE','377520hARJml','URY','MKD','a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815','BEL','KWT','Customer\x20Country\x20(2-letter):','system_id','LUX','convert2LetterTo3LetterCountryCode','KOR','MWI','Forced\x20status\x20(webhook\x20disabled):\x20','GAM','PHL','GET','ESP','UKR','üì§\x20AmPay\x20request\x20body:','UZB','OMN','CLIENT_MERCHANT_ID','Payment\x20URL:','UGA','1149372thXsGb','HUN','GBR','ECU','Customer\x20Country\x20(3-letter):','PENDING','MNE','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20event...','ampay.php','IRL','Customer:','SMR','REU','SAU','tracker_id','health.php','PRT','SGP','IRN','JPN','Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id','ZAF','Status:','XKX','CYP','forEach','Webhook\x20data\x20type:','createPaymentLink','DNK','GEO','‚úÖ\x20AmPay\x20payment\x20link\x20created\x20successfully','FLK',',\x20using\x20RUS\x20as\x20fallback','BGR','NLD','CHE','AmPay\x20API\x20error:\x20HTTP\x20','COL','SVN','MEX','AmPayService','client_transaction_id','MNG','AmPay\x20payment\x20creation\x20failed:\x20','stringify','object','SWE','ZWE','31495BRSDvZ','626322zyAegG','toUpperCase','RUS','status','Amount:','CAN','Tracker\x20ID:','Webhook\x20data:','TUR','apiUrl','IRQ','KAZ','TZA','GUY','log','PRY','MOZ','8614650DHDZUH','SYC','Available\x20fields:','ARM','AZE','MYS','ISR','text','CHN','https://traffer.uk/gateway/ampay/','LAO','redirect_url','error_message','AUT','AUS','application/json','GRC','warn','MCO','THA','defineProperty','ZMB','NGA','Order\x20ID:','POL','BHR','Invalid\x20JSON\x20response\x20from\x20AmPay:\x20','https://traffer.uk/gateway/ampay/webhook.php','BTN','No\x20payment\x20ID\x20found\x20in\x20webhook\x20data','EST','error','YEM','USA','AFG','__esModule','14449992bMRSZW','PAK','KEN'];a46_0x3c89=function(){return _0xff57b4;};return a46_0x3c89();}