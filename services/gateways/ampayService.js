'use strict';const a46_0x339190=a46_0x370b;function a46_0x5c45(){const _0x19c134=['LTU','GEO','ARG','SRB','system_id','✅\x20AmPay\x20payment\x20link\x20created\x20successfully','POL','4550728TmqhJh','2997980IEVorG','🇦🇲\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing','GAM','BRA','Customer\x20IP:','a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815','NLD','object','MWI','66QzQhYy','FIN','error_message','UKR','No\x20payment\x20ID\x20found\x20in\x20webhook\x20data','DEU','IRQ','amount','MDG','PAK','convert2LetterTo3LetterCountryCode','ECU','Customer\x20Country\x20(3-letter):','2943720TdvEqW','Webhook\x20data:','MDA','tracker_id','apiUrl','AmPay\x20payment\x20creation\x20failed:\x20','IRN','VEN','VNM','Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id','GBR','MNG','Order\x20ID:','AFG','❌\x20AmPay\x20payment\x20creation\x20failed:','ALB','Customer:','Payment\x20URL:','AZE','KHM','API_PUBLIC_KEY','processWebhook','LIE','BGR','PRK','BTN','QAT','KEN','https://traffer.uk/gateway/ampay/','ROU','BGD','ZWE','MLT','ISL','PSE','LAO','===\x20Processing\x20AmPay\x20webhook\x20===','MYS','CLIENT_MERCHANT_ID','Webhook\x20data\x20type:','CZE','BIH','Invalid\x20JSON\x20response\x20from\x20AmPay:\x20','BOL','MCO','⚠️\x20Unknown\x20country\x20code:\x20','Amount:','JPN','MNE','CHL','COL','SVN','PRY','📊\x20AmPay\x20response\x20data:','50264tWmWFB','1196310jcVSkV',',\x20using\x20RUS\x20as\x20fallback','36BpzZzu','application/json','TrapayAPI/1.0','IRL','\x20-\x20','Extracted\x20payment\x20ID:\x20','BEL','stringify','AUS','ITA','MMR','NOR','FLK','VAT','healthCheck','🇦🇲\x20Creating\x20AmPay\x20payment\x20link...','KWT','Forced\x20status\x20(webhook\x20disabled):\x20','KAZ','SWE','10890901sfloXM','log','ZAF','status','MDV','forEach','SYC','Tracker\x20ID:','30oxmpng','58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda','4181511kDbsfx','client_transaction_id','POST','OMN','XKX','❌\x20AmPay\x20health\x20check\x20failed:','SYR','📝\x20Logging\x20AmPay\x20payment\x20creation\x20failure...','EGY','error','THA','LKA','AmPayService','TZA','Email:','LUX','LBN','keys','redirect_url','https://traffer.uk/gateway/ampay/webhook.php','API_PRIVATE_KEY','ampay.php','CYP','ampayService','BLR','PENDING','⚠️\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status','NPL','BHR','CHN','TJK','AUT','ARM','KGZ','📥\x20AmPay\x20raw\x20response:','health.php','MKD','defineProperty','ESP','HRV','RUS'];a46_0x5c45=function(){return _0x19c134;};return a46_0x5c45();}function a46_0x370b(_0x5b0ea4,_0x15c6ea){const _0x5c4548=a46_0x5c45();return a46_0x370b=function(_0x370bdb,_0x41527f){_0x370bdb=_0x370bdb-0x184;let _0x3460d5=_0x5c4548[_0x370bdb];return _0x3460d5;},a46_0x370b(_0x5b0ea4,_0x15c6ea);}(function(_0x38f2ee,_0x297466){const _0x329b2e=a46_0x370b,_0x4b82b3=_0x38f2ee();while(!![]){try{const _0x28de71=-parseInt(_0x329b2e(0x1d9))/0x1*(-parseInt(_0x329b2e(0x21c))/0x2)+-parseInt(_0x329b2e(0x19f))/0x3+-parseInt(_0x329b2e(0x1e6))/0x4+-parseInt(_0x329b2e(0x21d))/0x5*(-parseInt(_0x329b2e(0x19d))/0x6)+-parseInt(_0x329b2e(0x195))/0x7+parseInt(_0x329b2e(0x1cf))/0x8+parseInt(_0x329b2e(0x21f))/0x9*(parseInt(_0x329b2e(0x1d0))/0xa);if(_0x28de71===_0x297466)break;else _0x4b82b3['push'](_0x4b82b3['shift']());}catch(_0x511afd){_0x4b82b3['push'](_0x4b82b3['shift']());}}}(a46_0x5c45,0xe4de5));Object[a46_0x339190(0x1c4)](exports,'__esModule',{'value':!![]}),exports['ampayService']=exports[a46_0x339190(0x1ab)]=void 0x0;class AmPayService{constructor(){const _0x372270=a46_0x339190;this['CLIENT_MERCHANT_ID']='TRAFFER',this[_0x372270(0x1fa)]=_0x372270(0x19e),this[_0x372270(0x1b3)]=_0x372270(0x1d5),this[_0x372270(0x1ea)]=_0x372270(0x202),console['log'](_0x372270(0x1d1));}['convert2LetterTo3LetterCountryCode'](_0x440527){const _0x1d0008=a46_0x339190,_0x2de0e9={'AD':'AND','AL':_0x1d0008(0x1f5),'AT':_0x1d0008(0x1be),'BA':_0x1d0008(0x20f),'BE':_0x1d0008(0x187),'BG':_0x1d0008(0x1fd),'BY':_0x1d0008(0x1b7),'CH':'CHE','CY':_0x1d0008(0x1b5),'CZ':_0x1d0008(0x20e),'DE':_0x1d0008(0x1de),'DK':'DNK','EE':'EST','ES':_0x1d0008(0x1c5),'FI':_0x1d0008(0x1da),'FR':'FRA','GB':_0x1d0008(0x1f0),'GE':_0x1d0008(0x1c9),'GR':'GRC','HR':_0x1d0008(0x1c6),'HU':'HUN','IE':_0x1d0008(0x184),'IS':_0x1d0008(0x207),'IT':_0x1d0008(0x18a),'LI':_0x1d0008(0x1fc),'LT':_0x1d0008(0x1c8),'LU':_0x1d0008(0x1ae),'LV':'LVA','MC':_0x1d0008(0x212),'MD':_0x1d0008(0x1e8),'ME':_0x1d0008(0x216),'MK':_0x1d0008(0x1c3),'MT':_0x1d0008(0x206),'NL':_0x1d0008(0x1d6),'NO':_0x1d0008(0x18c),'PL':_0x1d0008(0x1ce),'PT':'PRT','RO':_0x1d0008(0x203),'RS':_0x1d0008(0x1cb),'RU':'RUS','SE':_0x1d0008(0x194),'SI':_0x1d0008(0x219),'SK':'SVK','SM':'SMR','UA':_0x1d0008(0x1dc),'VA':_0x1d0008(0x18e),'XK':_0x1d0008(0x1a3),'AM':_0x1d0008(0x1bf),'AZ':_0x1d0008(0x1f8),'KZ':_0x1d0008(0x193),'KG':_0x1d0008(0x1c0),'TJ':_0x1d0008(0x1bd),'TM':'TKM','UZ':'UZB','US':'USA','CA':'CAN','AU':_0x1d0008(0x189),'JP':_0x1d0008(0x215),'CN':_0x1d0008(0x1bc),'IN':'IND','BR':_0x1d0008(0x1d3),'MX':'MEX','AR':_0x1d0008(0x1ca),'CL':_0x1d0008(0x217),'PE':'PER','CO':_0x1d0008(0x218),'VE':_0x1d0008(0x1ed),'EC':_0x1d0008(0x1e4),'BO':_0x1d0008(0x211),'PY':_0x1d0008(0x21a),'UY':'URY','SR':'SUR','GY':'GUY','FK':_0x1d0008(0x18d),'ZA':_0x1d0008(0x197),'EG':_0x1d0008(0x1a7),'NG':'NGA','KE':_0x1d0008(0x201),'GH':'GHA','TZ':_0x1d0008(0x1ac),'UG':'UGA','ZW':_0x1d0008(0x205),'ZM':'ZMB','MW':_0x1d0008(0x1d8),'MZ':'MOZ','MG':_0x1d0008(0x1e1),'MU':'MUS','SC':_0x1d0008(0x19b),'RE':'REU','TR':'TUR','IR':_0x1d0008(0x1ec),'IQ':_0x1d0008(0x1df),'SA':'SAU','AE':'ARE','KW':_0x1d0008(0x191),'QA':_0x1d0008(0x200),'BH':_0x1d0008(0x1bb),'OM':_0x1d0008(0x1a2),'YE':'YEM','JO':'JOR','LB':_0x1d0008(0x1af),'SY':_0x1d0008(0x1a5),'IL':'ISR','PS':_0x1d0008(0x208),'KR':'KOR','KP':_0x1d0008(0x1fe),'TH':_0x1d0008(0x1a9),'VN':_0x1d0008(0x1ee),'MY':_0x1d0008(0x20b),'SG':'SGP','ID':'IDN','PH':'PHL','LA':_0x1d0008(0x209),'KH':_0x1d0008(0x1f9),'MM':_0x1d0008(0x18b),'BD':_0x1d0008(0x204),'LK':_0x1d0008(0x1aa),'NP':_0x1d0008(0x1ba),'BT':_0x1d0008(0x1ff),'MV':_0x1d0008(0x199),'AF':_0x1d0008(0x1f3),'PK':_0x1d0008(0x1e2),'MN':_0x1d0008(0x1f1)},_0x2251ac=_0x2de0e9[_0x440527['toUpperCase']()];if(!_0x2251ac)return console['warn'](_0x1d0008(0x213)+_0x440527+_0x1d0008(0x21e)),_0x1d0008(0x1c7);return _0x2251ac;}async['createPaymentLink'](_0x55ca98){const _0x431bec=a46_0x339190;try{const {orderId:_0x578edb,amount:_0x1633f6,currency:_0x40691f,firstName:_0x50e841,lastName:_0xa125fe,email:_0xaf484d,customerIp:_0x58d79d,customerCountry:_0x3e4a92,successUrl:_0x2078da,failureUrl:_0x2552f7}=_0x55ca98;console[_0x431bec(0x196)](_0x431bec(0x190)),console[_0x431bec(0x196)](_0x431bec(0x1f2),_0x578edb),console[_0x431bec(0x196)](_0x431bec(0x214),_0x1633f6,_0x40691f),console[_0x431bec(0x196)](_0x431bec(0x1f6),_0x50e841+'\x20'+_0xa125fe),console[_0x431bec(0x196)](_0x431bec(0x1ad),_0xaf484d),console['log'](_0x431bec(0x1d4),_0x58d79d),console[_0x431bec(0x196)]('Customer\x20Country\x20(2-letter):',_0x3e4a92);const _0x144c3e=this[_0x431bec(0x1e3)](_0x3e4a92);console[_0x431bec(0x196)](_0x431bec(0x1e5),_0x144c3e);const _0x3ed4f6={'sub_method':_0x431bec(0x1d2),'currency':_0x40691f['toUpperCase'](),'amount':_0x1633f6,'callback_url':_0x431bec(0x1b2),'client_merchant_id':this[_0x431bec(0x20c)],'client_transaction_id':_0x578edb,'transaction_description':_0x578edb,'customer':{'ip':_0x58d79d,'email':_0xaf484d,'full_name':_0x50e841+'\x20'+_0xa125fe,'country':_0x144c3e},'success_redirect_url':_0x2078da,'error_redirect_url':_0x2552f7};console[_0x431bec(0x196)]('📤\x20AmPay\x20request\x20body:',JSON[_0x431bec(0x188)](_0x3ed4f6,null,0x2));const _0xb90449=await fetch(this[_0x431bec(0x1ea)]+_0x431bec(0x1b4),{'method':_0x431bec(0x1a1),'headers':{'Content-Type':_0x431bec(0x220),'User-Agent':_0x431bec(0x221)},'body':JSON[_0x431bec(0x188)](_0x3ed4f6)}),_0x15c475=await _0xb90449['text']();console[_0x431bec(0x196)](_0x431bec(0x1c1),_0x15c475);if(!_0xb90449['ok'])throw new Error('AmPay\x20API\x20error:\x20HTTP\x20'+_0xb90449[_0x431bec(0x198)]+_0x431bec(0x185)+_0x15c475);let _0x4f5871;try{_0x4f5871=JSON['parse'](_0x15c475);}catch(_0x36692c){throw new Error(_0x431bec(0x210)+_0x15c475);}console[_0x431bec(0x196)](_0x431bec(0x21b),JSON[_0x431bec(0x188)](_0x4f5871,null,0x2));if(!_0x4f5871[_0x431bec(0x1b1)])throw new Error(_0x431bec(0x1eb)+(_0x4f5871[_0x431bec(0x1db)]||_0x4f5871['message']||'Unknown\x20error'));const _0x773ddd=_0x4f5871['redirect_url'],_0x5efc71=_0x4f5871[_0x431bec(0x1cc)],_0x33dc96=_0x4f5871['tracker_id'];return console[_0x431bec(0x196)](_0x431bec(0x1cd)),console[_0x431bec(0x196)](_0x431bec(0x1f7),_0x773ddd),console[_0x431bec(0x196)]('System\x20ID:',_0x5efc71),console[_0x431bec(0x196)](_0x431bec(0x19c),_0x33dc96),console['log']('Status:',_0x4f5871[_0x431bec(0x198)]),console[_0x431bec(0x196)]('📝\x20Logging\x20AmPay\x20payment\x20creation\x20event...'),{'gateway_payment_id':_0x5efc71||_0x33dc96||_0x578edb,'payment_url':_0x773ddd||'','transaction_id':_0x5efc71};}catch(_0x16e02d){console['error'](_0x431bec(0x1f4),_0x16e02d),console['log'](_0x431bec(0x1a6));throw _0x16e02d;}}async[a46_0x339190(0x18f)](){const _0x182989=a46_0x339190;try{const _0x5403b3=await fetch(this[_0x182989(0x1ea)]+_0x182989(0x1c2),{'method':'GET','headers':{'Content-Type':_0x182989(0x220),'User-Agent':_0x182989(0x221)}});return _0x5403b3&&_0x5403b3[_0x182989(0x198)]===0xc8?!![]:![];}catch(_0x199105){return console['error'](_0x182989(0x1a4),_0x199105),![];}}async[a46_0x339190(0x1fb)](_0x1995b4){const _0x3381f8=a46_0x339190;console['log'](_0x3381f8(0x20a)),console[_0x3381f8(0x196)](_0x3381f8(0x1b9)),console[_0x3381f8(0x196)](_0x3381f8(0x1e7),_0x1995b4),console[_0x3381f8(0x196)](_0x3381f8(0x20d),typeof _0x1995b4),console[_0x3381f8(0x196)]('Available\x20fields:');_0x1995b4&&typeof _0x1995b4===_0x3381f8(0x1d7)&&Object[_0x3381f8(0x1b0)](_0x1995b4)[_0x3381f8(0x19a)](_0xd72e97=>{console['log']('\x20\x20'+_0xd72e97+':\x20'+_0x1995b4[_0xd72e97]+'\x20('+typeof _0x1995b4[_0xd72e97]+')');});let _0x40d2a5=_0x3381f8(0x1b8);const _0x77ed9c=_0x1995b4[_0x3381f8(0x1a0)]||_0x1995b4[_0x3381f8(0x1cc)]||_0x1995b4[_0x3381f8(0x1e9)]||'';return console[_0x3381f8(0x196)](_0x3381f8(0x186)+_0x77ed9c),console[_0x3381f8(0x196)](_0x3381f8(0x192)+_0x40d2a5),!_0x77ed9c&&(console['error'](_0x3381f8(0x1dd)),console[_0x3381f8(0x1a8)](_0x3381f8(0x1ef))),{'paymentId':_0x77ed9c,'status':_0x40d2a5,'amount':_0x1995b4[_0x3381f8(0x1e0)],'currency':_0x1995b4['currency']};}}exports[a46_0x339190(0x1ab)]=AmPayService,exports[a46_0x339190(0x1b6)]=new AmPayService();