'use strict';const a54_0x105a24=a54_0xad2a;(function(_0x1051d9,_0x156f99){const _0x53203a=a54_0xad2a,_0x5bb859=_0x1051d9();while(!![]){try{const _0x4f120b=parseInt(_0x53203a(0x17a))/0x1*(parseInt(_0x53203a(0x197))/0x2)+-parseInt(_0x53203a(0x1a2))/0x3+-parseInt(_0x53203a(0x1a4))/0x4+parseInt(_0x53203a(0x1c9))/0x5+parseInt(_0x53203a(0x1d9))/0x6+-parseInt(_0x53203a(0x1e2))/0x7+parseInt(_0x53203a(0x1a0))/0x8*(parseInt(_0x53203a(0x15c))/0x9);if(_0x4f120b===_0x156f99)break;else _0x5bb859['push'](_0x5bb859['shift']());}catch(_0x2aaa2c){_0x5bb859['push'](_0x5bb859['shift']());}}}(a54_0x5c1b,0x8d76d));Object['defineProperty'](exports,a54_0x105a24(0x1f4),{'value':!![]}),exports[a54_0x105a24(0x1de)]=exports[a54_0x105a24(0x1f7)]=void 0x0;function a54_0xad2a(_0x306db9,_0x486ec7){_0x306db9=_0x306db9-0x151;const _0x5c1b81=a54_0x5c1b();let _0xad2a06=_0x5c1b81[_0x306db9];return _0xad2a06;}class AmPayService{constructor(){const _0x288755=a54_0x105a24;this[_0x288755(0x1d1)]=_0x288755(0x1b2),this[_0x288755(0x1ca)]=_0x288755(0x169),this[_0x288755(0x19c)]=_0x288755(0x1c1),this['apiUrl']=_0x288755(0x19f),console[_0x288755(0x1d0)](_0x288755(0x15b));}[a54_0x105a24(0x1c6)](_0x27be9d){const _0xda9df3=a54_0x105a24,_0x3be737={'AD':'AND','AL':_0xda9df3(0x1dd),'AT':_0xda9df3(0x16a),'BA':'BIH','BE':_0xda9df3(0x1a9),'BG':'BGR','BY':_0xda9df3(0x1a8),'CH':_0xda9df3(0x188),'CY':'CYP','CZ':_0xda9df3(0x152),'DE':_0xda9df3(0x19e),'DK':_0xda9df3(0x154),'EE':'EST','ES':_0xda9df3(0x1c5),'FI':_0xda9df3(0x1f1),'FR':_0xda9df3(0x1d8),'GB':'GBR','GE':'GEO','GR':_0xda9df3(0x1af),'HR':_0xda9df3(0x1ef),'HU':_0xda9df3(0x18e),'IE':_0xda9df3(0x1f5),'IS':_0xda9df3(0x1f6),'IT':_0xda9df3(0x153),'LI':_0xda9df3(0x1bb),'LT':_0xda9df3(0x162),'LU':_0xda9df3(0x195),'LV':_0xda9df3(0x190),'MC':_0xda9df3(0x1ad),'MD':_0xda9df3(0x17f),'ME':_0xda9df3(0x17b),'MK':_0xda9df3(0x1d4),'MT':_0xda9df3(0x18f),'NL':_0xda9df3(0x165),'NO':'NOR','PL':_0xda9df3(0x19a),'PT':_0xda9df3(0x18d),'RO':_0xda9df3(0x1db),'RS':_0xda9df3(0x1f2),'RU':_0xda9df3(0x164),'SE':'SWE','SI':'SVN','SK':_0xda9df3(0x1c8),'SM':'SMR','UA':'UKR','VA':_0xda9df3(0x181),'XK':_0xda9df3(0x1d7),'AM':_0xda9df3(0x199),'AZ':_0xda9df3(0x1e3),'KZ':_0xda9df3(0x16e),'KG':_0xda9df3(0x182),'TJ':'TJK','TM':'TKM','UZ':_0xda9df3(0x1ae),'US':_0xda9df3(0x1e9),'CA':'CAN','AU':_0xda9df3(0x15e),'JP':_0xda9df3(0x1ed),'CN':_0xda9df3(0x168),'IN':'IND','BR':_0xda9df3(0x1e1),'MX':'MEX','AR':'ARG','CL':'CHL','PE':_0xda9df3(0x15a),'CO':_0xda9df3(0x1cc),'VE':'VEN','EC':_0xda9df3(0x1ea),'BO':'BOL','PY':_0xda9df3(0x175),'UY':_0xda9df3(0x1cd),'SR':_0xda9df3(0x1df),'GY':'GUY','FK':_0xda9df3(0x1ce),'ZA':_0xda9df3(0x157),'EG':_0xda9df3(0x1f3),'NG':_0xda9df3(0x192),'KE':_0xda9df3(0x1d5),'GH':'GHA','TZ':_0xda9df3(0x16d),'UG':_0xda9df3(0x1a1),'ZW':'ZWE','ZM':_0xda9df3(0x1ba),'MW':_0xda9df3(0x178),'MZ':_0xda9df3(0x161),'MG':_0xda9df3(0x1b1),'MU':'MUS','SC':'SYC','RE':_0xda9df3(0x1be),'TR':_0xda9df3(0x159),'IR':_0xda9df3(0x16b),'IQ':'IRQ','SA':_0xda9df3(0x1e0),'AE':_0xda9df3(0x1eb),'KW':_0xda9df3(0x1d3),'QA':_0xda9df3(0x167),'BH':_0xda9df3(0x1d2),'OM':_0xda9df3(0x1e8),'YE':_0xda9df3(0x1b3),'JO':_0xda9df3(0x1a3),'LB':_0xda9df3(0x15d),'SY':_0xda9df3(0x1cb),'IL':_0xda9df3(0x184),'PS':_0xda9df3(0x1e5),'KR':_0xda9df3(0x1a5),'KP':'PRK','TH':_0xda9df3(0x1cf),'VN':_0xda9df3(0x1b7),'MY':_0xda9df3(0x156),'SG':_0xda9df3(0x1e4),'ID':_0xda9df3(0x17e),'PH':_0xda9df3(0x1b9),'LA':_0xda9df3(0x170),'KH':_0xda9df3(0x17d),'MM':_0xda9df3(0x1b0),'BD':'BGD','LK':_0xda9df3(0x198),'NP':_0xda9df3(0x1c7),'BT':_0xda9df3(0x1c2),'MV':_0xda9df3(0x176),'AF':_0xda9df3(0x191),'PK':_0xda9df3(0x163),'MN':_0xda9df3(0x173)},_0x43fc73=_0x3be737[_0x27be9d['toUpperCase']()];if(!_0x43fc73)return console[_0xda9df3(0x155)]('‚ö†Ô∏è\x20Unknown\x20country\x20code:\x20'+_0x27be9d+_0xda9df3(0x19d)),'RUS';return _0x43fc73;}async['createPaymentLink'](_0x58d630){const _0x5364f5=a54_0x105a24;try{const {orderId:_0x3cd61b,amount:_0x58875f,currency:_0x459ad3,firstName:_0x36532b,lastName:_0x42dc9f,email:_0x23c20c,customerIp:_0x489d08,customerCountry:_0x52e15e,successUrl:_0x9bf5e,failureUrl:_0xfc3c7b}=_0x58d630;console['log'](_0x5364f5(0x1e6)),console[_0x5364f5(0x1d0)]('Order\x20ID:',_0x3cd61b),console[_0x5364f5(0x1d0)](_0x5364f5(0x194),_0x58875f,_0x459ad3),console[_0x5364f5(0x1d0)](_0x5364f5(0x1dc),_0x36532b+'\x20'+_0x42dc9f),console[_0x5364f5(0x1d0)](_0x5364f5(0x1da),_0x23c20c),console[_0x5364f5(0x1d0)](_0x5364f5(0x187),_0x489d08),console[_0x5364f5(0x1d0)](_0x5364f5(0x1b5),_0x52e15e);const _0x51a5a7=this[_0x5364f5(0x1c6)](_0x52e15e);console[_0x5364f5(0x1d0)](_0x5364f5(0x17c),_0x51a5a7);const _0x41c594={'sub_method':'GAM','currency':_0x459ad3[_0x5364f5(0x196)](),'amount':_0x58875f,'callback_url':_0x5364f5(0x1bd),'client_merchant_id':this[_0x5364f5(0x1d1)],'client_transaction_id':_0x3cd61b,'transaction_description':_0x3cd61b,'customer':{'ip':_0x489d08,'email':_0x23c20c,'full_name':_0x36532b+'\x20'+_0x42dc9f,'country':_0x51a5a7},'success_redirect_url':_0x9bf5e,'error_redirect_url':_0xfc3c7b};console[_0x5364f5(0x1d0)](_0x5364f5(0x1ab),JSON[_0x5364f5(0x1ac)](_0x41c594,null,0x2));const _0x2edc97=await fetch(this[_0x5364f5(0x186)]+_0x5364f5(0x1f8),{'method':_0x5364f5(0x160),'headers':{'Content-Type':'application/json','User-Agent':'TrapayAPI/1.0'},'body':JSON['stringify'](_0x41c594)}),_0x38adf3=await _0x2edc97[_0x5364f5(0x1b8)]();console[_0x5364f5(0x1d0)](_0x5364f5(0x183),_0x38adf3);if(!_0x2edc97['ok'])throw new Error('AmPay\x20API\x20error:\x20HTTP\x20'+_0x2edc97[_0x5364f5(0x180)]+_0x5364f5(0x193)+_0x38adf3);let _0x133182;try{_0x133182=JSON[_0x5364f5(0x1f0)](_0x38adf3);}catch(_0x425a2a){throw new Error(_0x5364f5(0x1c0)+_0x38adf3);}console['log']('üìä\x20AmPay\x20response\x20data:',JSON[_0x5364f5(0x1ac)](_0x133182,null,0x2));if(!_0x133182[_0x5364f5(0x177)])throw new Error('AmPay\x20payment\x20creation\x20failed:\x20'+(_0x133182['error_message']||_0x133182[_0x5364f5(0x171)]||_0x5364f5(0x172)));const _0x5203a5=_0x133182[_0x5364f5(0x177)],_0x195298=_0x133182[_0x5364f5(0x166)],_0x2cc116=_0x133182[_0x5364f5(0x1ee)];return console[_0x5364f5(0x1d0)](_0x5364f5(0x1b4)),console[_0x5364f5(0x1d0)]('Payment\x20URL:',_0x5203a5),console[_0x5364f5(0x1d0)](_0x5364f5(0x1c4),_0x195298),console['log']('Tracker\x20ID:',_0x2cc116),console[_0x5364f5(0x1d0)](_0x5364f5(0x16f),_0x133182[_0x5364f5(0x180)]),console[_0x5364f5(0x1d0)](_0x5364f5(0x16c)),{'gateway_payment_id':_0x195298||_0x2cc116||_0x3cd61b,'payment_url':_0x5203a5||'','transaction_id':_0x195298};}catch(_0x51dbbc){console[_0x5364f5(0x1b6)](_0x5364f5(0x174),_0x51dbbc),console['log'](_0x5364f5(0x19b));throw _0x51dbbc;}}async['healthCheck'](){const _0x518d4c=a54_0x105a24;try{const _0x9f4497=await fetch(this['apiUrl']+_0x518d4c(0x189),{'method':'GET','headers':{'Content-Type':'application/json','User-Agent':_0x518d4c(0x18a)}});return _0x9f4497&&_0x9f4497[_0x518d4c(0x180)]===0xc8?!![]:![];}catch(_0x30e9e6){return console['error'](_0x518d4c(0x1ec),_0x30e9e6),![];}}async[a54_0x105a24(0x179)](_0x5153b7){const _0x196821=a54_0x105a24;console[_0x196821(0x1d0)](_0x196821(0x1c3)),console[_0x196821(0x1d0)](_0x196821(0x18c)),console[_0x196821(0x1d0)](_0x196821(0x151),_0x5153b7),console['log'](_0x196821(0x18b),typeof _0x5153b7),console[_0x196821(0x1d0)](_0x196821(0x158));_0x5153b7&&typeof _0x5153b7===_0x196821(0x1d6)&&Object[_0x196821(0x185)](_0x5153b7)[_0x196821(0x1bf)](_0x5ac247=>{console['log']('\x20\x20'+_0x5ac247+':\x20'+_0x5153b7[_0x5ac247]+'\x20('+typeof _0x5153b7[_0x5ac247]+')');});let _0x12dbf4='PENDING';const _0x2c2c4f=_0x5153b7[_0x196821(0x1a7)]||_0x5153b7['system_id']||_0x5153b7[_0x196821(0x1ee)]||'';return console['log']('Extracted\x20payment\x20ID:\x20'+_0x2c2c4f),console['log'](_0x196821(0x1bc)+_0x12dbf4),!_0x2c2c4f&&(console[_0x196821(0x1b6)](_0x196821(0x1e7)),console[_0x196821(0x1b6)](_0x196821(0x15f))),{'paymentId':_0x2c2c4f,'status':_0x12dbf4,'amount':_0x5153b7[_0x196821(0x1aa)],'currency':_0x5153b7[_0x196821(0x1a6)]};}}exports[a54_0x105a24(0x1f7)]=AmPayService,exports[a54_0x105a24(0x1de)]=new AmPayService();function a54_0x5c1b(){const _0xb302b=['__esModule','IRL','ISL','AmPayService','ampay.php','Webhook\x20data:','CZE','ITA','DNK','warn','MYS','ZAF','Available\x20fields:','TUR','PER','üá¶üá≤\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing','4812741gXNmtA','LBN','AUS','Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id','POST','MOZ','LTU','PAK','RUS','NLD','system_id','QAT','CHN','58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda','AUT','IRN','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20event...','TZA','KAZ','Status:','LAO','message','Unknown\x20error','MNG','‚ùå\x20AmPay\x20payment\x20creation\x20failed:','PRY','MDV','redirect_url','MWI','processWebhook','1180IjUjoD','MNE','Customer\x20Country\x20(3-letter):','KHM','IDN','MDA','status','VAT','KGZ','üì•\x20AmPay\x20raw\x20response:','ISR','keys','apiUrl','Customer\x20IP:','CHE','health.php','TrapayAPI/1.0','Webhook\x20data\x20type:','‚ö†Ô∏è\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status','PRT','HUN','MLT','LVA','AFG','NGA','\x20-\x20','Amount:','LUX','toUpperCase','1568leFxZN','LKA','ARM','POL','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20failure...','API_PRIVATE_KEY',',\x20using\x20RUS\x20as\x20fallback','DEU','https://traffer.uk/gateway/ampay/','16jrEYLt','UGA','2393688DcrPAU','JOR','3261684DTXwfU','KOR','currency','client_transaction_id','BLR','BEL','amount','üì§\x20AmPay\x20request\x20body:','stringify','MCO','UZB','GRC','MMR','MDG','TRAFFER','YEM','‚úÖ\x20AmPay\x20payment\x20link\x20created\x20successfully','Customer\x20Country\x20(2-letter):','error','VNM','text','PHL','ZMB','LIE','Forced\x20status\x20(webhook\x20disabled):\x20','https://traffer.uk/gateway/ampay/webhook.php','REU','forEach','Invalid\x20JSON\x20response\x20from\x20AmPay:\x20','a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815','BTN','===\x20Processing\x20AmPay\x20webhook\x20===','System\x20ID:','ESP','convert2LetterTo3LetterCountryCode','NPL','SVK','2739800iUYStG','API_PUBLIC_KEY','SYR','COL','URY','FLK','THA','log','CLIENT_MERCHANT_ID','BHR','KWT','MKD','KEN','object','XKX','FRA','758268MibuES','Email:','ROU','Customer:','ALB','ampayService','SUR','SAU','BRA','3333414nUFgdg','AZE','SGP','PSE','üá¶üá≤\x20Creating\x20AmPay\x20payment\x20link...','No\x20payment\x20ID\x20found\x20in\x20webhook\x20data','OMN','USA','ECU','ARE','‚ùå\x20AmPay\x20health\x20check\x20failed:','JPN','tracker_id','HRV','parse','FIN','SRB','EGY'];a54_0x5c1b=function(){return _0xb302b;};return a54_0x5c1b();}