'use strict';const a42_0x3d0a6f=a42_0x4f07;(function(_0x59d929,_0x5e870a){const _0x1a2b5a=a42_0x4f07,_0x1dbddf=_0x59d929();while(!![]){try{const _0x36f62f=-parseInt(_0x1a2b5a(0xff))/0x1*(parseInt(_0x1a2b5a(0xb0))/0x2)+-parseInt(_0x1a2b5a(0xa2))/0x3*(-parseInt(_0x1a2b5a(0xac))/0x4)+parseInt(_0x1a2b5a(0x110))/0x5+-parseInt(_0x1a2b5a(0x9b))/0x6+-parseInt(_0x1a2b5a(0xcc))/0x7*(-parseInt(_0x1a2b5a(0x116))/0x8)+-parseInt(_0x1a2b5a(0x74))/0x9*(-parseInt(_0x1a2b5a(0x100))/0xa)+-parseInt(_0x1a2b5a(0x112))/0xb*(parseInt(_0x1a2b5a(0xe0))/0xc);if(_0x36f62f===_0x5e870a)break;else _0x1dbddf['push'](_0x1dbddf['shift']());}catch(_0x2403d9){_0x1dbddf['push'](_0x1dbddf['shift']());}}}(a42_0x3d52,0x68647));function a42_0x3d52(){const _0x38ff31=['GRC','MDV','CAN','CLIENT_MERCHANT_ID','URY','üìä\x20AmPay\x20response\x20data:','Customer\x20Country\x20(3-letter):','Tracker\x20ID:','PRK','SYC','ZMB','58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda','log','YEM','RUS','‚ö†Ô∏è\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status','FRA','63tHwIxM','createPaymentLink','LUX','Status:','‚ùå\x20AmPay\x20payment\x20creation\x20failed:','UZB','‚úÖ\x20AmPay\x20payment\x20link\x20created\x20successfully','SVK','status','LBN','POL','ARE','TJK','redirect_url','EST','ESP','error','COL','ISL','MCO','25188AcglFo','CZE','message','stringify','Invalid\x20JSON\x20response\x20from\x20AmPay:\x20','MNG','BIH','tracker_id','IRQ','üá¶üá≤\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing','LTU','TRAFFER','MYS','object','ZWE','error_message','CHL','MMR','health.php','No\x20payment\x20ID\x20found\x20in\x20webhook\x20data','BGR','GBR','NPL','BRA','toUpperCase','Extracted\x20payment\x20ID:\x20','OMN','Amount:','Webhook\x20data:','SYR','warn','5DbfpOH','1695020BXittz','NLD','DEU','BGD','BLR','KWT','DNK','GEO','Email:','application/json','BHR','‚ùå\x20AmPay\x20health\x20check\x20failed:','IND','LKA','GHA','Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id','3665880aaeBNk','PRY','11451BBItlf','healthCheck','ROU','UKR','724024NTcNLm','JOR','MLT','LVA','LAO','ZAF','AND','MOZ','Customer\x20IP:','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20failure...','AmPayService','AFG','XKX','ALB','processWebhook','Webhook\x20data\x20type:','36LngBTw','KAZ','SMR','defineProperty','ITA','PENDING','USA','currency','REU','JPN','CYP','forEach','a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815','SAU','ISR','PER','GUY','NOR','BOL','BTN','IDN','KEN','TUR','UGA','SGP','system_id','MUS','ARM','ARG','SWE','MKD','SRB','apiUrl','AZE','Customer\x20Country\x20(2-letter):','https://api.trapay.uk/api/webhooks/gateway/ampay','KHM','AUT','PSE','63738eNYyyF','IRL','EGY','CHE','ECU','THA','API_PUBLIC_KEY','18813smvDhx','HRV','CHN','Available\x20fields:','HUN','MNE','API_PRIVATE_KEY','TrapayAPI/1.0','Payment\x20URL:','SUR','448SrqDly','GET','\x20-\x20','client_transaction_id','121916XIfVIN','text','TKM','Forced\x20status\x20(webhook\x20disabled):\x20','===\x20Processing\x20AmPay\x20webhook\x20===','IRN','KGZ','ampay.php','FIN','‚ö†Ô∏è\x20Unknown\x20country\x20code:\x20','üì•\x20AmPay\x20raw\x20response:'];a42_0x3d52=function(){return _0x38ff31;};return a42_0x3d52();}function a42_0x4f07(_0x34de2b,_0x1bfaf5){const _0x3d5245=a42_0x3d52();return a42_0x4f07=function(_0x4f077d,_0x87ef17){_0x4f077d=_0x4f077d-0x65;let _0x108ed5=_0x3d5245[_0x4f077d];return _0x108ed5;},a42_0x4f07(_0x34de2b,_0x1bfaf5);}Object[a42_0x3d0a6f(0x77)](exports,'__esModule',{'value':!![]}),exports['ampayService']=exports[a42_0x3d0a6f(0x6e)]=void 0x0;class AmPayService{constructor(){const _0x3ad839=a42_0x3d0a6f;this[_0x3ad839(0xbe)]=_0x3ad839(0xeb),this[_0x3ad839(0xa1)]=_0x3ad839(0xc6),this[_0x3ad839(0xa8)]=_0x3ad839(0x80),this[_0x3ad839(0x94)]='https://traffer.uk/gateway/ampay/',console['log'](_0x3ad839(0xe9));}['convert2LetterTo3LetterCountryCode'](_0x4a4e03){const _0x5ae5dc=a42_0x3d0a6f,_0x5000d7={'AD':_0x5ae5dc(0x6a),'AL':_0x5ae5dc(0x71),'AT':_0x5ae5dc(0x99),'BA':_0x5ae5dc(0xe6),'BE':'BEL','BG':_0x5ae5dc(0xf4),'BY':_0x5ae5dc(0x104),'CH':_0x5ae5dc(0x9e),'CY':_0x5ae5dc(0x7e),'CZ':_0x5ae5dc(0xe1),'DE':_0x5ae5dc(0x102),'DK':_0x5ae5dc(0x106),'EE':_0x5ae5dc(0xda),'ES':_0x5ae5dc(0xdb),'FI':_0x5ae5dc(0xb8),'FR':_0x5ae5dc(0xcb),'GB':_0x5ae5dc(0xf5),'GE':_0x5ae5dc(0x107),'GR':_0x5ae5dc(0xbb),'HR':_0x5ae5dc(0xa3),'HU':_0x5ae5dc(0xa6),'IE':_0x5ae5dc(0x9c),'IS':_0x5ae5dc(0xde),'IT':_0x5ae5dc(0x78),'LI':'LIE','LT':_0x5ae5dc(0xea),'LU':_0x5ae5dc(0xce),'LV':_0x5ae5dc(0x67),'MC':_0x5ae5dc(0xdf),'MD':'MDA','ME':_0x5ae5dc(0xa7),'MK':_0x5ae5dc(0x92),'MT':_0x5ae5dc(0x66),'NL':_0x5ae5dc(0x101),'NO':_0x5ae5dc(0x85),'PL':_0x5ae5dc(0xd6),'PT':'PRT','RO':_0x5ae5dc(0x114),'RS':_0x5ae5dc(0x93),'RU':_0x5ae5dc(0xc9),'SE':_0x5ae5dc(0x91),'SI':'SVN','SK':_0x5ae5dc(0xd3),'SM':_0x5ae5dc(0x76),'UA':_0x5ae5dc(0x115),'VA':'VAT','XK':_0x5ae5dc(0x70),'AM':_0x5ae5dc(0x8f),'AZ':_0x5ae5dc(0x95),'KZ':_0x5ae5dc(0x75),'KG':_0x5ae5dc(0xb6),'TJ':_0x5ae5dc(0xd8),'TM':_0x5ae5dc(0xb2),'UZ':_0x5ae5dc(0xd1),'US':_0x5ae5dc(0x7a),'CA':_0x5ae5dc(0xbd),'AU':'AUS','JP':_0x5ae5dc(0x7d),'CN':_0x5ae5dc(0xa4),'IN':_0x5ae5dc(0x10c),'BR':_0x5ae5dc(0xf7),'MX':'MEX','AR':_0x5ae5dc(0x90),'CL':_0x5ae5dc(0xf0),'PE':_0x5ae5dc(0x83),'CO':_0x5ae5dc(0xdd),'VE':'VEN','EC':_0x5ae5dc(0x9f),'BO':_0x5ae5dc(0x86),'PY':_0x5ae5dc(0x111),'UY':_0x5ae5dc(0xbf),'SR':_0x5ae5dc(0xab),'GY':_0x5ae5dc(0x84),'FK':'FLK','ZA':_0x5ae5dc(0x69),'EG':_0x5ae5dc(0x9d),'NG':'NGA','KE':_0x5ae5dc(0x89),'GH':_0x5ae5dc(0x10e),'TZ':'TZA','UG':_0x5ae5dc(0x8b),'ZW':_0x5ae5dc(0xee),'ZM':_0x5ae5dc(0xc5),'MW':'MWI','MZ':_0x5ae5dc(0x6b),'MG':'MDG','MU':_0x5ae5dc(0x8e),'SC':_0x5ae5dc(0xc4),'RE':_0x5ae5dc(0x7c),'TR':_0x5ae5dc(0x8a),'IR':_0x5ae5dc(0xb5),'IQ':_0x5ae5dc(0xe8),'SA':_0x5ae5dc(0x81),'AE':_0x5ae5dc(0xd7),'KW':_0x5ae5dc(0x105),'QA':'QAT','BH':_0x5ae5dc(0x10a),'OM':_0x5ae5dc(0xfa),'YE':_0x5ae5dc(0xc8),'JO':_0x5ae5dc(0x65),'LB':_0x5ae5dc(0xd5),'SY':_0x5ae5dc(0xfd),'IL':_0x5ae5dc(0x82),'PS':_0x5ae5dc(0x9a),'KR':'KOR','KP':_0x5ae5dc(0xc3),'TH':_0x5ae5dc(0xa0),'VN':'VNM','MY':_0x5ae5dc(0xec),'SG':_0x5ae5dc(0x8c),'ID':_0x5ae5dc(0x88),'PH':'PHL','LA':_0x5ae5dc(0x68),'KH':_0x5ae5dc(0x98),'MM':_0x5ae5dc(0xf1),'BD':_0x5ae5dc(0x103),'LK':_0x5ae5dc(0x10d),'NP':_0x5ae5dc(0xf6),'BT':_0x5ae5dc(0x87),'MV':_0x5ae5dc(0xbc),'AF':_0x5ae5dc(0x6f),'PK':'PAK','MN':_0x5ae5dc(0xe5)},_0x22f39e=_0x5000d7[_0x4a4e03[_0x5ae5dc(0xf8)]()];if(!_0x22f39e)return console[_0x5ae5dc(0xfe)](_0x5ae5dc(0xb9)+_0x4a4e03+',\x20using\x20RUS\x20as\x20fallback'),'RUS';return _0x22f39e;}async[a42_0x3d0a6f(0xcd)](_0x4dfa00){const _0x3bf501=a42_0x3d0a6f;try{const {orderId:_0x1b0655,amount:_0x1a04f0,currency:_0x7d8c5c,firstName:_0x3b7f71,lastName:_0x39c5fb,email:_0x3f1777,customerIp:_0xe5169b,customerCountry:_0x3a78f9,successUrl:_0x384282,failureUrl:_0x4fbb1f}=_0x4dfa00;console[_0x3bf501(0xc7)]('üá¶üá≤\x20Creating\x20AmPay\x20payment\x20link...'),console[_0x3bf501(0xc7)]('Order\x20ID:',_0x1b0655),console[_0x3bf501(0xc7)](_0x3bf501(0xfb),_0x1a04f0,_0x7d8c5c),console[_0x3bf501(0xc7)]('Customer:',_0x3b7f71+'\x20'+_0x39c5fb),console['log'](_0x3bf501(0x108),_0x3f1777),console['log'](_0x3bf501(0x6c),_0xe5169b),console['log'](_0x3bf501(0x96),_0x3a78f9);const _0x23c601=this['convert2LetterTo3LetterCountryCode'](_0x3a78f9);console[_0x3bf501(0xc7)](_0x3bf501(0xc1),_0x23c601);const _0x2ed8a1={'sub_method':'GAM','currency':_0x7d8c5c['toUpperCase'](),'amount':_0x1a04f0,'callback_url':_0x3bf501(0x97),'client_merchant_id':this['CLIENT_MERCHANT_ID'],'client_transaction_id':_0x1b0655,'transaction_description':_0x1b0655,'customer':{'ip':_0xe5169b,'email':_0x3f1777,'full_name':_0x3b7f71+'\x20'+_0x39c5fb,'country':_0x23c601},'success_redirect_url':_0x384282,'error_redirect_url':_0x4fbb1f};console[_0x3bf501(0xc7)]('üì§\x20AmPay\x20request\x20body:',JSON[_0x3bf501(0xe3)](_0x2ed8a1,null,0x2));const _0x3c4b9e=await fetch(this[_0x3bf501(0x94)]+_0x3bf501(0xb7),{'method':'POST','headers':{'Content-Type':_0x3bf501(0x109),'User-Agent':_0x3bf501(0xa9)},'body':JSON['stringify'](_0x2ed8a1)}),_0x1db741=await _0x3c4b9e[_0x3bf501(0xb1)]();console[_0x3bf501(0xc7)](_0x3bf501(0xba),_0x1db741);if(!_0x3c4b9e['ok'])throw new Error('AmPay\x20API\x20error:\x20HTTP\x20'+_0x3c4b9e['status']+_0x3bf501(0xae)+_0x1db741);let _0x52569b;try{_0x52569b=JSON['parse'](_0x1db741);}catch(_0x18df09){throw new Error(_0x3bf501(0xe4)+_0x1db741);}console[_0x3bf501(0xc7)](_0x3bf501(0xc0),JSON[_0x3bf501(0xe3)](_0x52569b,null,0x2));if(!_0x52569b[_0x3bf501(0xd9)])throw new Error('AmPay\x20payment\x20creation\x20failed:\x20'+(_0x52569b[_0x3bf501(0xef)]||_0x52569b[_0x3bf501(0xe2)]||'Unknown\x20error'));const _0x3c60b9=_0x52569b[_0x3bf501(0xd9)],_0x3d4d3a=_0x52569b[_0x3bf501(0x8d)],_0x409826=_0x52569b[_0x3bf501(0xe7)];return console['log'](_0x3bf501(0xd2)),console[_0x3bf501(0xc7)](_0x3bf501(0xaa),_0x3c60b9),console[_0x3bf501(0xc7)]('System\x20ID:',_0x3d4d3a),console[_0x3bf501(0xc7)](_0x3bf501(0xc2),_0x409826),console[_0x3bf501(0xc7)](_0x3bf501(0xcf),_0x52569b['status']),console[_0x3bf501(0xc7)]('üìù\x20Logging\x20AmPay\x20payment\x20creation\x20event...'),{'gateway_payment_id':_0x3d4d3a||_0x409826||_0x1b0655,'payment_url':_0x3c60b9||'','transaction_id':_0x3d4d3a};}catch(_0x1880b1){console[_0x3bf501(0xdc)](_0x3bf501(0xd0),_0x1880b1),console['log'](_0x3bf501(0x6d));throw _0x1880b1;}}async[a42_0x3d0a6f(0x113)](){const _0x459f9e=a42_0x3d0a6f;try{const _0x3f6702=await fetch(this[_0x459f9e(0x94)]+_0x459f9e(0xf2),{'method':_0x459f9e(0xad),'headers':{'Content-Type':_0x459f9e(0x109),'User-Agent':_0x459f9e(0xa9)}});return _0x3f6702&&_0x3f6702[_0x459f9e(0xd4)]===0xc8?!![]:![];}catch(_0x35d4c5){return console['error'](_0x459f9e(0x10b),_0x35d4c5),![];}}async[a42_0x3d0a6f(0x72)](_0x2d2648){const _0x100c2e=a42_0x3d0a6f;console['log'](_0x100c2e(0xb4)),console[_0x100c2e(0xc7)](_0x100c2e(0xca)),console[_0x100c2e(0xc7)](_0x100c2e(0xfc),_0x2d2648),console[_0x100c2e(0xc7)](_0x100c2e(0x73),typeof _0x2d2648),console[_0x100c2e(0xc7)](_0x100c2e(0xa5));_0x2d2648&&typeof _0x2d2648===_0x100c2e(0xed)&&Object['keys'](_0x2d2648)[_0x100c2e(0x7f)](_0x44ede7=>{const _0x418064=_0x100c2e;console[_0x418064(0xc7)]('\x20\x20'+_0x44ede7+':\x20'+_0x2d2648[_0x44ede7]+'\x20('+typeof _0x2d2648[_0x44ede7]+')');});let _0x47ecfc=_0x100c2e(0x79);const _0xd27214=_0x2d2648[_0x100c2e(0xaf)]||_0x2d2648[_0x100c2e(0x8d)]||_0x2d2648[_0x100c2e(0xe7)]||'';return console[_0x100c2e(0xc7)](_0x100c2e(0xf9)+_0xd27214),console[_0x100c2e(0xc7)](_0x100c2e(0xb3)+_0x47ecfc),!_0xd27214&&(console[_0x100c2e(0xdc)](_0x100c2e(0xf3)),console['error'](_0x100c2e(0x10f))),{'paymentId':_0xd27214,'status':_0x47ecfc,'amount':_0x2d2648['amount'],'currency':_0x2d2648[_0x100c2e(0x7b)]};}}exports[a42_0x3d0a6f(0x6e)]=AmPayService,exports['ampayService']=new AmPayService();