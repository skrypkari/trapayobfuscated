'use strict';function a62_0x3b57(_0x4f1150,_0x46df5e){_0x4f1150=_0x4f1150-0xcc;const _0x3dd3cd=a62_0x3dd3();let _0x3b5743=_0x3dd3cd[_0x4f1150];return _0x3b5743;}const a62_0x27654a=a62_0x3b57;(function(_0x231fe9,_0x5b70ea){const _0x5864e6=a62_0x3b57,_0x20b56e=_0x231fe9();while(!![]){try{const _0x630bd7=parseInt(_0x5864e6(0xd0))/0x1*(parseInt(_0x5864e6(0xdd))/0x2)+parseInt(_0x5864e6(0x12f))/0x3+parseInt(_0x5864e6(0x130))/0x4+parseInt(_0x5864e6(0x152))/0x5*(parseInt(_0x5864e6(0x111))/0x6)+parseInt(_0x5864e6(0x12e))/0x7+parseInt(_0x5864e6(0x121))/0x8*(-parseInt(_0x5864e6(0xe8))/0x9)+-parseInt(_0x5864e6(0x113))/0xa;if(_0x630bd7===_0x5b70ea)break;else _0x20b56e['push'](_0x20b56e['shift']());}catch(_0x4a6652){_0x20b56e['push'](_0x20b56e['shift']());}}}(a62_0x3dd3,0x65d2f));Object[a62_0x27654a(0x11f)](exports,a62_0x27654a(0xf6),{'value':!![]}),exports[a62_0x27654a(0xe7)]=exports[a62_0x27654a(0xd5)]=void 0x0;class AmPayService{constructor(){const _0x3d42e5=a62_0x27654a;this['CLIENT_MERCHANT_ID']='TRAFFER',this['API_PUBLIC_KEY']='58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda',this[_0x3d42e5(0x11b)]=_0x3d42e5(0x110),this[_0x3d42e5(0x13f)]='https://traffer.uk/gateway/ampay/',console[_0x3d42e5(0x134)]('üá¶üá≤\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing');}[a62_0x27654a(0x135)](_0x25ef21){const _0x53036e=a62_0x27654a,_0x5f09c7={'AD':_0x53036e(0x10c),'AL':_0x53036e(0xcf),'AT':_0x53036e(0xdc),'BA':_0x53036e(0x15f),'BE':'BEL','BG':'BGR','BY':'BLR','CH':_0x53036e(0xdb),'CY':'CYP','CZ':_0x53036e(0x15e),'DE':'DEU','DK':'DNK','EE':_0x53036e(0x149),'ES':_0x53036e(0x10f),'FI':_0x53036e(0x160),'FR':_0x53036e(0x159),'GB':_0x53036e(0x155),'GE':'GEO','GR':'GRC','HR':_0x53036e(0xf2),'HU':_0x53036e(0x133),'IE':_0x53036e(0xf4),'IS':_0x53036e(0xe5),'IT':_0x53036e(0x10a),'LI':'LIE','LT':_0x53036e(0x118),'LU':'LUX','LV':'LVA','MC':'MCO','MD':'MDA','ME':'MNE','MK':_0x53036e(0x147),'MT':_0x53036e(0x128),'NL':_0x53036e(0x137),'NO':_0x53036e(0x13b),'PL':_0x53036e(0xe3),'PT':_0x53036e(0xe0),'RO':_0x53036e(0xd3),'RS':_0x53036e(0xfa),'RU':_0x53036e(0x104),'SE':_0x53036e(0xfe),'SI':_0x53036e(0xe2),'SK':_0x53036e(0x14c),'SM':_0x53036e(0x100),'UA':_0x53036e(0x14b),'VA':'VAT','XK':_0x53036e(0x10e),'AM':_0x53036e(0x112),'AZ':'AZE','KZ':_0x53036e(0x14e),'KG':'KGZ','TJ':'TJK','TM':'TKM','UZ':_0x53036e(0x129),'US':_0x53036e(0xe9),'CA':_0x53036e(0x132),'AU':'AUS','JP':_0x53036e(0xe4),'CN':_0x53036e(0xcc),'IN':_0x53036e(0x157),'BR':_0x53036e(0x140),'MX':_0x53036e(0x167),'AR':_0x53036e(0x150),'CL':_0x53036e(0xd2),'PE':_0x53036e(0xf9),'CO':'COL','VE':_0x53036e(0x13e),'EC':'ECU','BO':_0x53036e(0x136),'PY':_0x53036e(0x102),'UY':_0x53036e(0x108),'SR':_0x53036e(0x148),'GY':_0x53036e(0x124),'FK':'FLK','ZA':_0x53036e(0xf8),'EG':'EGY','NG':_0x53036e(0x117),'KE':'KEN','GH':_0x53036e(0x122),'TZ':'TZA','UG':'UGA','ZW':'ZWE','ZM':_0x53036e(0x162),'MW':_0x53036e(0x158),'MZ':'MOZ','MG':'MDG','MU':_0x53036e(0x153),'SC':_0x53036e(0x10d),'RE':_0x53036e(0xff),'TR':_0x53036e(0x101),'IR':_0x53036e(0xdf),'IQ':_0x53036e(0x106),'SA':_0x53036e(0x143),'AE':'ARE','KW':_0x53036e(0x163),'QA':_0x53036e(0xd1),'BH':_0x53036e(0xd6),'OM':_0x53036e(0x119),'YE':_0x53036e(0xd7),'JO':_0x53036e(0xfc),'LB':_0x53036e(0x144),'SY':_0x53036e(0x115),'IL':_0x53036e(0x10b),'PS':_0x53036e(0x14a),'KR':_0x53036e(0xf7),'KP':_0x53036e(0x11d),'TH':'THA','VN':_0x53036e(0x13a),'MY':'MYS','SG':'SGP','ID':_0x53036e(0xea),'PH':_0x53036e(0xf3),'LA':'LAO','KH':_0x53036e(0x116),'MM':'MMR','BD':_0x53036e(0xda),'LK':_0x53036e(0x123),'NP':_0x53036e(0x13d),'BT':_0x53036e(0x120),'MV':'MDV','AF':_0x53036e(0xde),'PK':_0x53036e(0x12a),'MN':_0x53036e(0xe6)},_0x1d3d3f=_0x5f09c7[_0x25ef21[_0x53036e(0x151)]()];if(!_0x1d3d3f)return console['warn'](_0x53036e(0x15c)+_0x25ef21+_0x53036e(0x164)),_0x53036e(0x104);return _0x1d3d3f;}async[a62_0x27654a(0x109)](_0x290343){const _0x23081d=a62_0x27654a;try{const {orderId:_0xdcc6c7,amount:_0x187a8f,currency:_0x508557,firstName:_0x10b4a7,lastName:_0x4da5ae,email:_0x7a3b3d,customerIp:_0x4b1ece,customerCountry:_0x59b6c6,successUrl:_0x287d3f,failureUrl:_0x3e8b1b}=_0x290343;console[_0x23081d(0x134)](_0x23081d(0x14f)),console['log'](_0x23081d(0xeb),_0xdcc6c7),console[_0x23081d(0x134)](_0x23081d(0x103),_0x187a8f,_0x508557),console[_0x23081d(0x134)](_0x23081d(0x15d),_0x10b4a7+'\x20'+_0x4da5ae),console[_0x23081d(0x134)](_0x23081d(0xcd),_0x7a3b3d),console[_0x23081d(0x134)](_0x23081d(0xd9),_0x4b1ece),console[_0x23081d(0x134)](_0x23081d(0x154),_0x59b6c6);const _0x4d3728=this[_0x23081d(0x135)](_0x59b6c6);console[_0x23081d(0x134)](_0x23081d(0xef),_0x4d3728);const _0x363262={'sub_method':_0x23081d(0xd8),'currency':_0x508557[_0x23081d(0x151)](),'amount':_0x187a8f,'callback_url':'https://traffer.uk/gateway/ampay/webhook.php','client_merchant_id':this[_0x23081d(0x15b)],'client_transaction_id':_0xdcc6c7,'transaction_description':_0xdcc6c7,'customer':{'ip':_0x4b1ece,'email':_0x7a3b3d,'full_name':_0x10b4a7+'\x20'+_0x4da5ae,'country':_0x4d3728},'success_redirect_url':_0x287d3f,'error_redirect_url':_0x3e8b1b};console[_0x23081d(0x134)](_0x23081d(0xfb),JSON[_0x23081d(0x11a)](_0x363262,null,0x2));const _0x388ca2=await fetch(this[_0x23081d(0x13f)]+'ampay.php',{'method':_0x23081d(0xfd),'headers':{'Content-Type':'application/json','User-Agent':_0x23081d(0x126)},'body':JSON[_0x23081d(0x11a)](_0x363262)}),_0x15ff47=await _0x388ca2['text']();console[_0x23081d(0x134)](_0x23081d(0x165),_0x15ff47);if(!_0x388ca2['ok'])throw new Error(_0x23081d(0x11e)+_0x388ca2[_0x23081d(0x127)]+_0x23081d(0x142)+_0x15ff47);let _0x1d7bf5;try{_0x1d7bf5=JSON[_0x23081d(0xf0)](_0x15ff47);}catch(_0x4a9922){throw new Error(_0x23081d(0x168)+_0x15ff47);}console['log'](_0x23081d(0x131),JSON[_0x23081d(0x11a)](_0x1d7bf5,null,0x2));if(!_0x1d7bf5['redirect_url'])throw new Error('AmPay\x20payment\x20creation\x20failed:\x20'+(_0x1d7bf5[_0x23081d(0x14d)]||_0x1d7bf5[_0x23081d(0xee)]||_0x23081d(0x146)));const _0x1755b8=_0x1d7bf5['redirect_url'],_0xc0bc99=_0x1d7bf5[_0x23081d(0x12c)],_0x54ec35=_0x1d7bf5['tracker_id'];return console[_0x23081d(0x134)](_0x23081d(0x12b)),console['log'](_0x23081d(0x125),_0x1755b8),console[_0x23081d(0x134)](_0x23081d(0x13c),_0xc0bc99),console['log']('Tracker\x20ID:',_0x54ec35),console[_0x23081d(0x134)](_0x23081d(0x145),_0x1d7bf5['status']),console[_0x23081d(0x134)]('üìù\x20Logging\x20AmPay\x20payment\x20creation\x20event...'),{'gateway_payment_id':_0xc0bc99||_0x54ec35||_0xdcc6c7,'payment_url':_0x1755b8||'','transaction_id':_0xc0bc99};}catch(_0x59f815){console['error'](_0x23081d(0x114),_0x59f815),console[_0x23081d(0x134)](_0x23081d(0xec));throw _0x59f815;}}async[a62_0x27654a(0x12d)](){const _0x1c1647=a62_0x27654a;try{const _0x14c230=await fetch(this['apiUrl']+'health.php',{'method':_0x1c1647(0x15a),'headers':{'Content-Type':'application/json','User-Agent':_0x1c1647(0x126)}});return _0x14c230&&_0x14c230[_0x1c1647(0x127)]===0xc8?!![]:![];}catch(_0x3382d8){return console[_0x1c1647(0xce)](_0x1c1647(0x161),_0x3382d8),![];}}async[a62_0x27654a(0x166)](_0x239309){const _0x2a8321=a62_0x27654a;console[_0x2a8321(0x134)](_0x2a8321(0x139)),console[_0x2a8321(0x134)](_0x2a8321(0x138)),console[_0x2a8321(0x134)]('Webhook\x20data:',_0x239309),console[_0x2a8321(0x134)]('Webhook\x20data\x20type:',typeof _0x239309),console['log'](_0x2a8321(0x156));_0x239309&&typeof _0x239309===_0x2a8321(0x107)&&Object[_0x2a8321(0xd4)](_0x239309)[_0x2a8321(0xe1)](_0x52a181=>{console['log']('\x20\x20'+_0x52a181+':\x20'+_0x239309[_0x52a181]+'\x20('+typeof _0x239309[_0x52a181]+')');});let _0x81a578=_0x2a8321(0xed);const _0xdadbc=_0x239309[_0x2a8321(0xf1)]||_0x239309[_0x2a8321(0x12c)]||_0x239309[_0x2a8321(0xf5)]||'';return console['log'](_0x2a8321(0x11c)+_0xdadbc),console[_0x2a8321(0x134)]('Forced\x20status\x20(webhook\x20disabled):\x20'+_0x81a578),!_0xdadbc&&(console[_0x2a8321(0xce)]('No\x20payment\x20ID\x20found\x20in\x20webhook\x20data'),console[_0x2a8321(0xce)](_0x2a8321(0x141))),{'paymentId':_0xdadbc,'status':_0x81a578,'amount':_0x239309[_0x2a8321(0x105)],'currency':_0x239309['currency']};}}function a62_0x3dd3(){const _0x4cebcf=['SMR','TUR','PRY','Amount:','RUS','amount','IRQ','object','URY','createPaymentLink','ITA','ISR','AND','SYC','XKX','ESP','a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815','174BlOkfk','ARM','9136440uUvKgx','‚ùå\x20AmPay\x20payment\x20creation\x20failed:','SYR','KHM','NGA','LTU','OMN','stringify','API_PRIVATE_KEY','Extracted\x20payment\x20ID:\x20','PRK','AmPay\x20API\x20error:\x20HTTP\x20','defineProperty','BTN','5344YpvgcC','GHA','LKA','GUY','Payment\x20URL:','TrapayAPI/1.0','status','MLT','UZB','PAK','‚úÖ\x20AmPay\x20payment\x20link\x20created\x20successfully','system_id','healthCheck','1980342hrwqBc','1831551djgHyk','425236slKhHD','üìä\x20AmPay\x20response\x20data:','CAN','HUN','log','convert2LetterTo3LetterCountryCode','BOL','NLD','‚ö†Ô∏è\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status','===\x20Processing\x20AmPay\x20webhook\x20===','VNM','NOR','System\x20ID:','NPL','VEN','apiUrl','BRA','Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id','\x20-\x20','SAU','LBN','Status:','Unknown\x20error','MKD','SUR','EST','PSE','UKR','SVK','error_message','KAZ','üá¶üá≤\x20Creating\x20AmPay\x20payment\x20link...','ARG','toUpperCase','96365SCDPIS','MUS','Customer\x20Country\x20(2-letter):','GBR','Available\x20fields:','IND','MWI','FRA','GET','CLIENT_MERCHANT_ID','‚ö†Ô∏è\x20Unknown\x20country\x20code:\x20','Customer:','CZE','BIH','FIN','‚ùå\x20AmPay\x20health\x20check\x20failed:','ZMB','KWT',',\x20using\x20RUS\x20as\x20fallback','üì•\x20AmPay\x20raw\x20response:','processWebhook','MEX','Invalid\x20JSON\x20response\x20from\x20AmPay:\x20','CHN','Email:','error','ALB','8922POqLFu','QAT','CHL','ROU','keys','AmPayService','BHR','YEM','GAM','Customer\x20IP:','BGD','CHE','AUT','10Qtrthz','AFG','IRN','PRT','forEach','SVN','POL','JPN','ISL','MNG','ampayService','3672nGUNsR','USA','IDN','Order\x20ID:','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20failure...','PENDING','message','Customer\x20Country\x20(3-letter):','parse','client_transaction_id','HRV','PHL','IRL','tracker_id','__esModule','KOR','ZAF','PER','SRB','üì§\x20AmPay\x20request\x20body:','JOR','POST','SWE','REU'];a62_0x3dd3=function(){return _0x4cebcf;};return a62_0x3dd3();}exports[a62_0x27654a(0xd5)]=AmPayService,exports[a62_0x27654a(0xe7)]=new AmPayService();