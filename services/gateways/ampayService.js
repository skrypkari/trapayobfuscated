'use strict';function a44_0x1d1f(){const _0x51e32c=['ITA','IND','üì•\x20AmPay\x20raw\x20response:','USA','HRV','EGY','PENDING','BEL','ISL','1296310EFhTdj','BGD','FIN','PHL','KAZ','THA','ZWE','NLD','client_transaction_id','ECU','API_PRIVATE_KEY','log','MUS','CZE','currency','12auXwnf','SAU','TZA','tracker_id','IDN','Status:','TKM','MNE','KGZ','7330HJWbRJ','UZB','ARM','__esModule','REU','LTU','defineProperty','ampay.php','CYP','GUY','apiUrl','application/json','AmPay\x20API\x20error:\x20HTTP\x20','MNG','Amount:','YEM','LAO','TJK','Webhook\x20data\x20type:','HUN','IRL','ZAF','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20failure...','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20event...','Forced\x20status\x20(webhook\x20disabled):\x20','AND','error','MDG','‚ö†Ô∏è\x20Unknown\x20country\x20code:\x20','VAT','BGR','GAM','ESP','CHE','parse','PER','Customer\x20Country\x20(3-letter):','LBN','convert2LetterTo3LetterCountryCode','üìä\x20AmPay\x20response\x20data:','CAN','===\x20Processing\x20AmPay\x20webhook\x20===','ALB','TUR','SVK','processWebhook','BOL','BTN','GHA','RUS','Customer\x20Country\x20(2-letter):','keys','a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815','CHN','BHR','üá¶üá≤\x20Creating\x20AmPay\x20payment\x20link...','AZE','PAK','IRN','status','PRY','JPN','PSE','DEU','Tracker\x20ID:',',\x20using\x20RUS\x20as\x20fallback','MLT','CHL','VNM','stringify','BLR','https://traffer.uk/gateway/ampay/webhook.php','MEX','SYC','19269BxFjtk','Customer\x20IP:','Payment\x20URL:','PRT','ROU','‚úÖ\x20AmPay\x20payment\x20link\x20created\x20successfully','POL','Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id','TRAFFER','NGA','TrapayAPI/1.0','VEN','QAT','KEN','redirect_url','amount','MCO','IRQ','AFG','UKR','GBR','message','XKX','247836TsRJjh','JOR','system_id','MDA','BIH','OMN','‚ùå\x20AmPay\x20health\x20check\x20failed:','Available\x20fields:','GRC','CLIENT_MERCHANT_ID','KOR','POST','System\x20ID:','ampayService','COL','üì§\x20AmPay\x20request\x20body:','forEach','5249184LNoXvK','toUpperCase','2528980gBoVOa','ARE','912501eWutzD','8449wqtcuE','Extracted\x20payment\x20ID:\x20','Invalid\x20JSON\x20response\x20from\x20AmPay:\x20','Unknown\x20error','AmPayService','health.php','warn','FRA','üá¶üá≤\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing','LKA','PRK','MWI','336ZSyZEq','DNK','SRB','SYR','GET','SVN'];a44_0x1d1f=function(){return _0x51e32c;};return a44_0x1d1f();}const a44_0x1cbefc=a44_0x46af;function a44_0x46af(_0x43ab36,_0x55f10c){const _0x1d1f72=a44_0x1d1f();return a44_0x46af=function(_0x46af68,_0x2afb1b){_0x46af68=_0x46af68-0x13f;let _0x50a5b4=_0x1d1f72[_0x46af68];return _0x50a5b4;},a44_0x46af(_0x43ab36,_0x55f10c);}(function(_0x2e020d,_0x23a7b0){const _0x15c350=a44_0x46af,_0x8c3925=_0x2e020d();while(!![]){try{const _0x49bdc7=parseInt(_0x15c350(0x14d))/0x1+-parseInt(_0x15c350(0x1e2))/0x2*(parseInt(_0x15c350(0x178))/0x3)+-parseInt(_0x15c350(0x14b))/0x4+-parseInt(_0x15c350(0x169))/0x5+parseInt(_0x15c350(0x15a))/0x6*(parseInt(_0x15c350(0x14e))/0x7)+-parseInt(_0x15c350(0x149))/0x8+parseInt(_0x15c350(0x1cb))/0x9*(parseInt(_0x15c350(0x181))/0xa);if(_0x49bdc7===_0x23a7b0)break;else _0x8c3925['push'](_0x8c3925['shift']());}catch(_0x204ae9){_0x8c3925['push'](_0x8c3925['shift']());}}}(a44_0x1d1f,0x7b907));Object[a44_0x1cbefc(0x187)](exports,a44_0x1cbefc(0x184),{'value':!![]}),exports[a44_0x1cbefc(0x145)]=exports['AmPayService']=void 0x0;class AmPayService{constructor(){const _0x5b8480=a44_0x1cbefc;this[_0x5b8480(0x141)]=_0x5b8480(0x1d3),this['API_PUBLIC_KEY']='58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda',this[_0x5b8480(0x173)]=_0x5b8480(0x1b5),this[_0x5b8480(0x18b)]='https://traffer.uk/gateway/ampay/',console[_0x5b8480(0x174)](_0x5b8480(0x156));}[a44_0x1cbefc(0x1a7)](_0x219192){const _0x4cab23=a44_0x1cbefc,_0x248591={'AD':_0x4cab23(0x19a),'AL':_0x4cab23(0x1ab),'AT':'AUT','BA':_0x4cab23(0x1e6),'BE':_0x4cab23(0x167),'BG':_0x4cab23(0x19f),'BY':_0x4cab23(0x1c7),'CH':_0x4cab23(0x1a2),'CY':_0x4cab23(0x189),'CZ':_0x4cab23(0x176),'DE':_0x4cab23(0x1c0),'DK':_0x4cab23(0x15b),'EE':'EST','ES':_0x4cab23(0x1a1),'FI':_0x4cab23(0x16b),'FR':_0x4cab23(0x155),'GB':_0x4cab23(0x1df),'GE':'GEO','GR':_0x4cab23(0x140),'HR':_0x4cab23(0x164),'HU':_0x4cab23(0x194),'IE':_0x4cab23(0x195),'IS':_0x4cab23(0x168),'IT':_0x4cab23(0x160),'LI':'LIE','LT':_0x4cab23(0x186),'LU':'LUX','LV':'LVA','MC':_0x4cab23(0x1db),'MD':_0x4cab23(0x1e5),'ME':_0x4cab23(0x17f),'MK':'MKD','MT':_0x4cab23(0x1c3),'NL':_0x4cab23(0x170),'NO':'NOR','PL':_0x4cab23(0x1d1),'PT':_0x4cab23(0x1ce),'RO':_0x4cab23(0x1cf),'RS':_0x4cab23(0x15c),'RU':_0x4cab23(0x1b2),'SE':'SWE','SI':_0x4cab23(0x15f),'SK':_0x4cab23(0x1ad),'SM':'SMR','UA':_0x4cab23(0x1de),'VA':_0x4cab23(0x19e),'XK':_0x4cab23(0x1e1),'AM':_0x4cab23(0x183),'AZ':_0x4cab23(0x1b9),'KZ':_0x4cab23(0x16d),'KG':_0x4cab23(0x180),'TJ':_0x4cab23(0x192),'TM':_0x4cab23(0x17e),'UZ':_0x4cab23(0x182),'US':_0x4cab23(0x163),'CA':_0x4cab23(0x1a9),'AU':'AUS','JP':_0x4cab23(0x1be),'CN':_0x4cab23(0x1b6),'IN':_0x4cab23(0x161),'BR':'BRA','MX':_0x4cab23(0x1c9),'AR':'ARG','CL':_0x4cab23(0x1c4),'PE':_0x4cab23(0x1a4),'CO':_0x4cab23(0x146),'VE':_0x4cab23(0x1d6),'EC':_0x4cab23(0x172),'BO':_0x4cab23(0x1af),'PY':_0x4cab23(0x1bd),'UY':'URY','SR':'SUR','GY':_0x4cab23(0x18a),'FK':'FLK','ZA':_0x4cab23(0x196),'EG':_0x4cab23(0x165),'NG':_0x4cab23(0x1d4),'KE':_0x4cab23(0x1d8),'GH':_0x4cab23(0x1b1),'TZ':_0x4cab23(0x17a),'UG':'UGA','ZW':_0x4cab23(0x16f),'ZM':'ZMB','MW':_0x4cab23(0x159),'MZ':'MOZ','MG':_0x4cab23(0x19c),'MU':_0x4cab23(0x175),'SC':_0x4cab23(0x1ca),'RE':_0x4cab23(0x185),'TR':_0x4cab23(0x1ac),'IR':_0x4cab23(0x1bb),'IQ':_0x4cab23(0x1dc),'SA':_0x4cab23(0x179),'AE':_0x4cab23(0x14c),'KW':'KWT','QA':_0x4cab23(0x1d7),'BH':_0x4cab23(0x1b7),'OM':_0x4cab23(0x1e7),'YE':_0x4cab23(0x190),'JO':_0x4cab23(0x1e3),'LB':_0x4cab23(0x1a6),'SY':_0x4cab23(0x15d),'IL':'ISR','PS':_0x4cab23(0x1bf),'KR':_0x4cab23(0x142),'KP':_0x4cab23(0x158),'TH':_0x4cab23(0x16e),'VN':_0x4cab23(0x1c5),'MY':'MYS','SG':'SGP','ID':_0x4cab23(0x17c),'PH':_0x4cab23(0x16c),'LA':_0x4cab23(0x191),'KH':'KHM','MM':'MMR','BD':_0x4cab23(0x16a),'LK':_0x4cab23(0x157),'NP':'NPL','BT':_0x4cab23(0x1b0),'MV':'MDV','AF':_0x4cab23(0x1dd),'PK':_0x4cab23(0x1ba),'MN':_0x4cab23(0x18e)},_0x333306=_0x248591[_0x219192[_0x4cab23(0x14a)]()];if(!_0x333306)return console[_0x4cab23(0x154)](_0x4cab23(0x19d)+_0x219192+_0x4cab23(0x1c2)),'RUS';return _0x333306;}async['createPaymentLink'](_0x5a225d){const _0x123533=a44_0x1cbefc;try{const {orderId:_0x38d6b2,amount:_0x36f992,currency:_0x538364,firstName:_0x21849a,lastName:_0x2bf42d,email:_0x2f56f6,customerIp:_0xaf9073,customerCountry:_0x593e70,successUrl:_0x234fbe,failureUrl:_0x1bf60f}=_0x5a225d;console['log'](_0x123533(0x1b8)),console['log']('Order\x20ID:',_0x38d6b2),console[_0x123533(0x174)](_0x123533(0x18f),_0x36f992,_0x538364),console[_0x123533(0x174)]('Customer:',_0x21849a+'\x20'+_0x2bf42d),console[_0x123533(0x174)]('Email:',_0x2f56f6),console[_0x123533(0x174)](_0x123533(0x1cc),_0xaf9073),console[_0x123533(0x174)](_0x123533(0x1b3),_0x593e70);const _0x3f59ef=this[_0x123533(0x1a7)](_0x593e70);console[_0x123533(0x174)](_0x123533(0x1a5),_0x3f59ef);const _0x92998={'sub_method':_0x123533(0x1a0),'currency':_0x538364['toUpperCase'](),'amount':_0x36f992,'callback_url':_0x123533(0x1c8),'client_merchant_id':this[_0x123533(0x141)],'client_transaction_id':_0x38d6b2,'transaction_description':_0x38d6b2,'customer':{'ip':_0xaf9073,'email':_0x2f56f6,'full_name':_0x21849a+'\x20'+_0x2bf42d,'country':_0x3f59ef},'success_redirect_url':_0x234fbe,'error_redirect_url':_0x1bf60f};console[_0x123533(0x174)](_0x123533(0x147),JSON[_0x123533(0x1c6)](_0x92998,null,0x2));const _0x4a6665=await fetch(this[_0x123533(0x18b)]+_0x123533(0x188),{'method':_0x123533(0x143),'headers':{'Content-Type':_0x123533(0x18c),'User-Agent':_0x123533(0x1d5)},'body':JSON['stringify'](_0x92998)}),_0x3f2f42=await _0x4a6665['text']();console[_0x123533(0x174)](_0x123533(0x162),_0x3f2f42);if(!_0x4a6665['ok'])throw new Error(_0x123533(0x18d)+_0x4a6665[_0x123533(0x1bc)]+'\x20-\x20'+_0x3f2f42);let _0xa38e2d;try{_0xa38e2d=JSON[_0x123533(0x1a3)](_0x3f2f42);}catch(_0x534d80){throw new Error(_0x123533(0x150)+_0x3f2f42);}console['log'](_0x123533(0x1a8),JSON['stringify'](_0xa38e2d,null,0x2));if(!_0xa38e2d[_0x123533(0x1d9)])throw new Error('AmPay\x20payment\x20creation\x20failed:\x20'+(_0xa38e2d['error_message']||_0xa38e2d[_0x123533(0x1e0)]||_0x123533(0x151)));const _0x5e073f=_0xa38e2d['redirect_url'],_0x1dee6c=_0xa38e2d[_0x123533(0x1e4)],_0x1c2e96=_0xa38e2d[_0x123533(0x17b)];return console[_0x123533(0x174)](_0x123533(0x1d0)),console[_0x123533(0x174)](_0x123533(0x1cd),_0x5e073f),console['log'](_0x123533(0x144),_0x1dee6c),console[_0x123533(0x174)](_0x123533(0x1c1),_0x1c2e96),console[_0x123533(0x174)](_0x123533(0x17d),_0xa38e2d[_0x123533(0x1bc)]),console[_0x123533(0x174)](_0x123533(0x198)),{'gateway_payment_id':_0x1dee6c||_0x1c2e96||_0x38d6b2,'payment_url':_0x5e073f||'','transaction_id':_0x1dee6c};}catch(_0x33fc20){console[_0x123533(0x19b)]('‚ùå\x20AmPay\x20payment\x20creation\x20failed:',_0x33fc20),console[_0x123533(0x174)](_0x123533(0x197));throw _0x33fc20;}}async['healthCheck'](){const _0xbf2ecd=a44_0x1cbefc;try{const _0x4ed0f2=await fetch(this[_0xbf2ecd(0x18b)]+_0xbf2ecd(0x153),{'method':_0xbf2ecd(0x15e),'headers':{'Content-Type':_0xbf2ecd(0x18c),'User-Agent':_0xbf2ecd(0x1d5)}});return _0x4ed0f2&&_0x4ed0f2[_0xbf2ecd(0x1bc)]===0xc8?!![]:![];}catch(_0x4e06db){return console[_0xbf2ecd(0x19b)](_0xbf2ecd(0x1e8),_0x4e06db),![];}}async[a44_0x1cbefc(0x1ae)](_0x2fd98e){const _0x373998=a44_0x1cbefc;console['log'](_0x373998(0x1aa)),console[_0x373998(0x174)]('‚ö†Ô∏è\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status'),console[_0x373998(0x174)]('Webhook\x20data:',_0x2fd98e),console['log'](_0x373998(0x193),typeof _0x2fd98e),console[_0x373998(0x174)](_0x373998(0x13f));_0x2fd98e&&typeof _0x2fd98e==='object'&&Object[_0x373998(0x1b4)](_0x2fd98e)[_0x373998(0x148)](_0x5c34f5=>{console['log']('\x20\x20'+_0x5c34f5+':\x20'+_0x2fd98e[_0x5c34f5]+'\x20('+typeof _0x2fd98e[_0x5c34f5]+')');});let _0x2495f1=_0x373998(0x166);const _0x56a2a8=_0x2fd98e[_0x373998(0x171)]||_0x2fd98e[_0x373998(0x1e4)]||_0x2fd98e[_0x373998(0x17b)]||'';return console[_0x373998(0x174)](_0x373998(0x14f)+_0x56a2a8),console['log'](_0x373998(0x199)+_0x2495f1),!_0x56a2a8&&(console['error']('No\x20payment\x20ID\x20found\x20in\x20webhook\x20data'),console[_0x373998(0x19b)](_0x373998(0x1d2))),{'paymentId':_0x56a2a8,'status':_0x2495f1,'amount':_0x2fd98e[_0x373998(0x1da)],'currency':_0x2fd98e[_0x373998(0x177)]};}}exports[a44_0x1cbefc(0x152)]=AmPayService,exports[a44_0x1cbefc(0x145)]=new AmPayService();