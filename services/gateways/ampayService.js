'use strict';function a62_0x174e(){const _0x3be425=['ampayService','EGY','MUS','Tracker\x20ID:','5WRzsfe','HRV','API_PRIVATE_KEY','58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda','LBN','CLIENT_MERCHANT_ID','VNM','ampay.php','TKM','ARE','BGD','Invalid\x20JSON\x20response\x20from\x20AmPay:\x20','AUT','error','defineProperty','Customer\x20Country\x20(3-letter):','Customer\x20Country\x20(2-letter):','AND','NOR','POST','IND','GRC','Webhook\x20data:','SRB','redirect_url','\x20-\x20','PRK','Webhook\x20data\x20type:','KHM','ðŸ“¤\x20AmPay\x20request\x20body:','EST','TRAFFER','a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815','MOZ','AmPay\x20API\x20error:\x20HTTP\x20','currency','83916NLJMTz','IRQ','application/json','ECU','toUpperCase','UGA','PHL','SVN','Status:','4592436lKAMJn','client_transaction_id','PRT','âœ…\x20AmPay\x20payment\x20link\x20created\x20successfully','NLD','UZB','log','SAU','GEO','SVK','ZWE','PAK','API_PUBLIC_KEY','FLK','VEN','Extracted\x20payment\x20ID:\x20','CHL','BRA','REU','ARG','MMR','QAT','THA','POL',',\x20using\x20RUS\x20as\x20fallback','processWebhook','IDN','ISL','RUS','SYC','apiUrl','error_message','TZA','Customer\x20IP:','OMN','ISR','SYR','BOL','KGZ','BEL','Forced\x20status\x20(webhook\x20disabled):\x20','KOR','No\x20payment\x20ID\x20found\x20in\x20webhook\x20data','TUR','âŒ\x20AmPay\x20health\x20check\x20failed:','https://traffer.uk/gateway/ampay/webhook.php','MDG','stringify','12652320tyPoFf','PER','===\x20Processing\x20AmPay\x20webhook\x20===','FRA','status','MNG','ESP','GHA','BIH','amount','SGP','1195239pkhwoa','CAN','AFG','ALB','Payment\x20URL:','https://traffer.uk/gateway/ampay/','Email:','CHE','ITA','XKX','SUR','âš ï¸\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status','LTU','SMR','PENDING','CHN','ðŸ‡¦ðŸ‡²\x20Creating\x20AmPay\x20payment\x20link...','ðŸ“¥\x20AmPay\x20raw\x20response:','âš ï¸\x20Unknown\x20country\x20code:\x20','tracker_id','Unknown\x20error','UKR','GUY','Available\x20fields:','VAT','MLT','ðŸ“\x20Logging\x20AmPay\x20payment\x20creation\x20failure...','Customer:','System\x20ID:','2725608fBDSVK','PRY','forEach','10467216dSeLZF','AmPay\x20payment\x20creation\x20failed:\x20','HUN','USA','DNK','Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id','IRN','system_id','MNE','LIE','CZE','5375300IsqkpU','KAZ','3uGjAjD','URY','MYS','AUS','ZAF','CYP','convert2LetterTo3LetterCountryCode','MEX','BGR','BTN','AmPayService','ðŸ“Š\x20AmPay\x20response\x20data:','KWT','MDA'];a62_0x174e=function(){return _0x3be425;};return a62_0x174e();}const a62_0xbe96c9=a62_0x4f14;(function(_0x4386d6,_0x3694bc){const _0x4dfb46=a62_0x4f14,_0x58b898=_0x4386d6();while(!![]){try{const _0x36017a=parseInt(_0x4dfb46(0x1be))/0x1+parseInt(_0x4dfb46(0x1db))/0x2*(parseInt(_0x4dfb46(0x1eb))/0x3)+-parseInt(_0x4dfb46(0x1e9))/0x4+-parseInt(_0x4dfb46(0x1fd))/0x5*(parseInt(_0x4dfb46(0x22a))/0x6)+-parseInt(_0x4dfb46(0x221))/0x7+parseInt(_0x4dfb46(0x1b3))/0x8+-parseInt(_0x4dfb46(0x1de))/0x9;if(_0x36017a===_0x3694bc)break;else _0x58b898['push'](_0x58b898['shift']());}catch(_0x5e846c){_0x58b898['push'](_0x58b898['shift']());}}}(a62_0x174e,0xd0d2c));Object[a62_0xbe96c9(0x20b)](exports,'__esModule',{'value':!![]}),exports[a62_0xbe96c9(0x1f9)]=exports[a62_0xbe96c9(0x1f5)]=void 0x0;function a62_0x4f14(_0x1f2e8d,_0x21ac62){_0x1f2e8d=_0x1f2e8d-0x19c;const _0x174e01=a62_0x174e();let _0x4f14e7=_0x174e01[_0x1f2e8d];return _0x4f14e7;}class AmPayService{constructor(){const _0x544766=a62_0xbe96c9;this[_0x544766(0x202)]=_0x544766(0x21c),this[_0x544766(0x236)]=_0x544766(0x200),this[_0x544766(0x1ff)]=_0x544766(0x21d),this[_0x544766(0x1a1)]=_0x544766(0x1c3),console['log']('ðŸ‡¦ðŸ‡²\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing');}['convert2LetterTo3LetterCountryCode'](_0x1f8bab){const _0x91456a=a62_0xbe96c9,_0x300b34={'AD':_0x91456a(0x20e),'AL':_0x91456a(0x1c1),'AT':_0x91456a(0x209),'BA':_0x91456a(0x1bb),'BE':_0x91456a(0x1aa),'BG':_0x91456a(0x1f3),'BY':'BLR','CH':_0x91456a(0x1c5),'CY':_0x91456a(0x1f0),'CZ':_0x91456a(0x1e8),'DE':'DEU','DK':_0x91456a(0x1e2),'EE':_0x91456a(0x21b),'ES':_0x91456a(0x1b9),'FI':'FIN','FR':_0x91456a(0x1b6),'GB':'GBR','GE':_0x91456a(0x232),'GR':_0x91456a(0x212),'HR':_0x91456a(0x1fe),'HU':_0x91456a(0x1e0),'IE':'IRL','IS':_0x91456a(0x19e),'IT':_0x91456a(0x1c6),'LI':_0x91456a(0x1e7),'LT':_0x91456a(0x1ca),'LU':'LUX','LV':'LVA','MC':'MCO','MD':_0x91456a(0x1f8),'ME':_0x91456a(0x1e6),'MK':'MKD','MT':_0x91456a(0x1d7),'NL':_0x91456a(0x22e),'NO':_0x91456a(0x20f),'PL':_0x91456a(0x241),'PT':_0x91456a(0x22c),'RO':'ROU','RS':_0x91456a(0x214),'RU':_0x91456a(0x19f),'SE':'SWE','SI':_0x91456a(0x228),'SK':_0x91456a(0x233),'SM':_0x91456a(0x1cb),'UA':_0x91456a(0x1d3),'VA':_0x91456a(0x1d6),'XK':_0x91456a(0x1c7),'AM':'ARM','AZ':'AZE','KZ':_0x91456a(0x1ea),'KG':_0x91456a(0x1a9),'TJ':'TJK','TM':_0x91456a(0x205),'UZ':_0x91456a(0x22f),'US':_0x91456a(0x1e1),'CA':_0x91456a(0x1bf),'AU':_0x91456a(0x1ee),'JP':'JPN','CN':_0x91456a(0x1cd),'IN':_0x91456a(0x211),'BR':_0x91456a(0x23b),'MX':_0x91456a(0x1f2),'AR':_0x91456a(0x23d),'CL':_0x91456a(0x23a),'PE':_0x91456a(0x1b4),'CO':'COL','VE':_0x91456a(0x238),'EC':_0x91456a(0x224),'BO':_0x91456a(0x1a8),'PY':_0x91456a(0x1dc),'UY':_0x91456a(0x1ec),'SR':_0x91456a(0x1c8),'GY':_0x91456a(0x1d4),'FK':_0x91456a(0x237),'ZA':_0x91456a(0x1ef),'EG':_0x91456a(0x1fa),'NG':'NGA','KE':'KEN','GH':_0x91456a(0x1ba),'TZ':_0x91456a(0x1a3),'UG':_0x91456a(0x226),'ZW':_0x91456a(0x234),'ZM':'ZMB','MW':'MWI','MZ':_0x91456a(0x21e),'MG':_0x91456a(0x1b1),'MU':_0x91456a(0x1fb),'SC':_0x91456a(0x1a0),'RE':_0x91456a(0x23c),'TR':_0x91456a(0x1ae),'IR':_0x91456a(0x1e4),'IQ':_0x91456a(0x222),'SA':_0x91456a(0x231),'AE':_0x91456a(0x206),'KW':_0x91456a(0x1f7),'QA':_0x91456a(0x23f),'BH':'BHR','OM':_0x91456a(0x1a5),'YE':'YEM','JO':'JOR','LB':_0x91456a(0x201),'SY':_0x91456a(0x1a7),'IL':_0x91456a(0x1a6),'PS':'PSE','KR':_0x91456a(0x1ac),'KP':_0x91456a(0x217),'TH':_0x91456a(0x240),'VN':_0x91456a(0x203),'MY':_0x91456a(0x1ed),'SG':_0x91456a(0x1bd),'ID':_0x91456a(0x19d),'PH':_0x91456a(0x227),'LA':'LAO','KH':_0x91456a(0x219),'MM':_0x91456a(0x23e),'BD':_0x91456a(0x207),'LK':'LKA','NP':'NPL','BT':_0x91456a(0x1f4),'MV':'MDV','AF':_0x91456a(0x1c0),'PK':_0x91456a(0x235),'MN':_0x91456a(0x1b8)},_0x2664d4=_0x300b34[_0x1f8bab[_0x91456a(0x225)]()];if(!_0x2664d4)return console['warn'](_0x91456a(0x1d0)+_0x1f8bab+_0x91456a(0x242)),_0x91456a(0x19f);return _0x2664d4;}async['createPaymentLink'](_0x8e9db1){const _0x2a871a=a62_0xbe96c9;try{const {orderId:_0x13e982,amount:_0x3f98e9,currency:_0x57d16b,firstName:_0x3ec3da,lastName:_0x20a230,email:_0x13e9a6,customerIp:_0x266755,customerCountry:_0x350c1e,successUrl:_0x5be7f8,failureUrl:_0x37cb8e}=_0x8e9db1;console[_0x2a871a(0x230)](_0x2a871a(0x1ce)),console[_0x2a871a(0x230)]('Order\x20ID:',_0x13e982),console[_0x2a871a(0x230)]('Amount:',_0x3f98e9,_0x57d16b),console['log'](_0x2a871a(0x1d9),_0x3ec3da+'\x20'+_0x20a230),console[_0x2a871a(0x230)](_0x2a871a(0x1c4),_0x13e9a6),console[_0x2a871a(0x230)](_0x2a871a(0x1a4),_0x266755),console[_0x2a871a(0x230)](_0x2a871a(0x20d),_0x350c1e);const _0x1ea408=this[_0x2a871a(0x1f1)](_0x350c1e);console['log'](_0x2a871a(0x20c),_0x1ea408);const _0x5ce0f0={'sub_method':'GAM','currency':_0x57d16b[_0x2a871a(0x225)](),'amount':_0x3f98e9,'callback_url':_0x2a871a(0x1b0),'client_merchant_id':this[_0x2a871a(0x202)],'client_transaction_id':_0x13e982,'transaction_description':_0x13e982,'customer':{'ip':_0x266755,'email':_0x13e9a6,'full_name':_0x3ec3da+'\x20'+_0x20a230,'country':_0x1ea408},'success_redirect_url':_0x5be7f8,'error_redirect_url':_0x37cb8e};console['log'](_0x2a871a(0x21a),JSON[_0x2a871a(0x1b2)](_0x5ce0f0,null,0x2));const _0x176058=await fetch(this['apiUrl']+_0x2a871a(0x204),{'method':_0x2a871a(0x210),'headers':{'Content-Type':'application/json','User-Agent':'TrapayAPI/1.0'},'body':JSON[_0x2a871a(0x1b2)](_0x5ce0f0)}),_0x52ef16=await _0x176058['text']();console[_0x2a871a(0x230)](_0x2a871a(0x1cf),_0x52ef16);if(!_0x176058['ok'])throw new Error(_0x2a871a(0x21f)+_0x176058['status']+_0x2a871a(0x216)+_0x52ef16);let _0x4dfd61;try{_0x4dfd61=JSON['parse'](_0x52ef16);}catch(_0x4d996f){throw new Error(_0x2a871a(0x208)+_0x52ef16);}console[_0x2a871a(0x230)](_0x2a871a(0x1f6),JSON['stringify'](_0x4dfd61,null,0x2));if(!_0x4dfd61[_0x2a871a(0x215)])throw new Error(_0x2a871a(0x1df)+(_0x4dfd61[_0x2a871a(0x1a2)]||_0x4dfd61['message']||_0x2a871a(0x1d2)));const _0x480678=_0x4dfd61['redirect_url'],_0x158383=_0x4dfd61[_0x2a871a(0x1e5)],_0x2fa91e=_0x4dfd61[_0x2a871a(0x1d1)];return console[_0x2a871a(0x230)](_0x2a871a(0x22d)),console['log'](_0x2a871a(0x1c2),_0x480678),console[_0x2a871a(0x230)](_0x2a871a(0x1da),_0x158383),console[_0x2a871a(0x230)](_0x2a871a(0x1fc),_0x2fa91e),console[_0x2a871a(0x230)](_0x2a871a(0x229),_0x4dfd61[_0x2a871a(0x1b7)]),console[_0x2a871a(0x230)]('ðŸ“\x20Logging\x20AmPay\x20payment\x20creation\x20event...'),{'gateway_payment_id':_0x158383||_0x2fa91e||_0x13e982,'payment_url':_0x480678||'','transaction_id':_0x158383};}catch(_0x21034d){console[_0x2a871a(0x20a)]('âŒ\x20AmPay\x20payment\x20creation\x20failed:',_0x21034d),console['log'](_0x2a871a(0x1d8));throw _0x21034d;}}async['healthCheck'](){const _0x5ef297=a62_0xbe96c9;try{const _0x4a4fe5=await fetch(this[_0x5ef297(0x1a1)]+'health.php',{'method':'GET','headers':{'Content-Type':_0x5ef297(0x223),'User-Agent':'TrapayAPI/1.0'}});return _0x4a4fe5&&_0x4a4fe5[_0x5ef297(0x1b7)]===0xc8?!![]:![];}catch(_0x94f936){return console[_0x5ef297(0x20a)](_0x5ef297(0x1af),_0x94f936),![];}}async[a62_0xbe96c9(0x19c)](_0x37e75f){const _0xab5900=a62_0xbe96c9;console[_0xab5900(0x230)](_0xab5900(0x1b5)),console[_0xab5900(0x230)](_0xab5900(0x1c9)),console['log'](_0xab5900(0x213),_0x37e75f),console['log'](_0xab5900(0x218),typeof _0x37e75f),console[_0xab5900(0x230)](_0xab5900(0x1d5));_0x37e75f&&typeof _0x37e75f==='object'&&Object['keys'](_0x37e75f)[_0xab5900(0x1dd)](_0x227e8e=>{const _0x52e03f=_0xab5900;console[_0x52e03f(0x230)]('\x20\x20'+_0x227e8e+':\x20'+_0x37e75f[_0x227e8e]+'\x20('+typeof _0x37e75f[_0x227e8e]+')');});let _0x1125d8=_0xab5900(0x1cc);const _0x116222=_0x37e75f[_0xab5900(0x22b)]||_0x37e75f['system_id']||_0x37e75f[_0xab5900(0x1d1)]||'';return console['log'](_0xab5900(0x239)+_0x116222),console['log'](_0xab5900(0x1ab)+_0x1125d8),!_0x116222&&(console['error'](_0xab5900(0x1ad)),console[_0xab5900(0x20a)](_0xab5900(0x1e3))),{'paymentId':_0x116222,'status':_0x1125d8,'amount':_0x37e75f[_0xab5900(0x1bc)],'currency':_0x37e75f[_0xab5900(0x220)]};}}exports['AmPayService']=AmPayService,exports[a62_0xbe96c9(0x1f9)]=new AmPayService();