'use strict';const a62_0x22e2ba=a62_0x1807;(function(_0x22c61b,_0x2ca86b){const _0x287487=a62_0x1807,_0x6a9a8e=_0x22c61b();while(!![]){try{const _0x616134=parseInt(_0x287487(0x216))/0x1+-parseInt(_0x287487(0x201))/0x2*(-parseInt(_0x287487(0x204))/0x3)+-parseInt(_0x287487(0x209))/0x4*(-parseInt(_0x287487(0x26c))/0x5)+parseInt(_0x287487(0x224))/0x6*(parseInt(_0x287487(0x248))/0x7)+-parseInt(_0x287487(0x21f))/0x8+parseInt(_0x287487(0x267))/0x9*(parseInt(_0x287487(0x1fe))/0xa)+parseInt(_0x287487(0x1e6))/0xb*(-parseInt(_0x287487(0x25e))/0xc);if(_0x616134===_0x2ca86b)break;else _0x6a9a8e['push'](_0x6a9a8e['shift']());}catch(_0xd6e9d1){_0x6a9a8e['push'](_0x6a9a8e['shift']());}}}(a62_0x54aa,0x762a0));function a62_0x1807(_0x3e742a,_0x1040ee){_0x3e742a=_0x3e742a-0x1d1;const _0x54aad6=a62_0x54aa();let _0x18079e=_0x54aad6[_0x3e742a];return _0x18079e;}Object['defineProperty'](exports,a62_0x22e2ba(0x25c),{'value':!![]}),exports[a62_0x22e2ba(0x250)]=exports[a62_0x22e2ba(0x276)]=void 0x0;class AmPayService{constructor(){const _0x3ae8fa=a62_0x22e2ba;this[_0x3ae8fa(0x229)]='TRAFFER',this[_0x3ae8fa(0x1d3)]='58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda',this[_0x3ae8fa(0x241)]=_0x3ae8fa(0x1d5),this[_0x3ae8fa(0x269)]=_0x3ae8fa(0x1df),console['log']('üá¶üá≤\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing');}['convert2LetterTo3LetterCountryCode'](_0x4e3ef5){const _0x3eb5fb=a62_0x22e2ba,_0x1adbfc={'AD':_0x3eb5fb(0x234),'AL':_0x3eb5fb(0x203),'AT':_0x3eb5fb(0x1dd),'BA':_0x3eb5fb(0x24a),'BE':_0x3eb5fb(0x24e),'BG':_0x3eb5fb(0x1d1),'BY':'BLR','CH':_0x3eb5fb(0x26e),'CY':_0x3eb5fb(0x1f4),'CZ':_0x3eb5fb(0x223),'DE':_0x3eb5fb(0x1fa),'DK':_0x3eb5fb(0x1e3),'EE':_0x3eb5fb(0x211),'ES':_0x3eb5fb(0x1da),'FI':_0x3eb5fb(0x24c),'FR':_0x3eb5fb(0x247),'GB':_0x3eb5fb(0x222),'GE':_0x3eb5fb(0x231),'GR':'GRC','HR':_0x3eb5fb(0x26b),'HU':_0x3eb5fb(0x25b),'IE':_0x3eb5fb(0x219),'IS':_0x3eb5fb(0x20b),'IT':'ITA','LI':_0x3eb5fb(0x1ec),'LT':_0x3eb5fb(0x1e1),'LU':'LUX','LV':_0x3eb5fb(0x244),'MC':_0x3eb5fb(0x208),'MD':_0x3eb5fb(0x236),'ME':_0x3eb5fb(0x1d2),'MK':'MKD','MT':_0x3eb5fb(0x260),'NL':_0x3eb5fb(0x1db),'NO':_0x3eb5fb(0x1e2),'PL':_0x3eb5fb(0x228),'PT':_0x3eb5fb(0x239),'RO':_0x3eb5fb(0x214),'RS':_0x3eb5fb(0x25a),'RU':_0x3eb5fb(0x23c),'SE':_0x3eb5fb(0x220),'SI':_0x3eb5fb(0x259),'SK':_0x3eb5fb(0x1d9),'SM':_0x3eb5fb(0x20f),'UA':_0x3eb5fb(0x20a),'VA':'VAT','XK':'XKX','AM':_0x3eb5fb(0x1d8),'AZ':_0x3eb5fb(0x246),'KZ':_0x3eb5fb(0x212),'KG':'KGZ','TJ':_0x3eb5fb(0x1e5),'TM':_0x3eb5fb(0x1fc),'UZ':_0x3eb5fb(0x264),'US':'USA','CA':_0x3eb5fb(0x263),'AU':_0x3eb5fb(0x251),'JP':_0x3eb5fb(0x1dc),'CN':_0x3eb5fb(0x1ef),'IN':_0x3eb5fb(0x1f5),'BR':_0x3eb5fb(0x1f8),'MX':_0x3eb5fb(0x1f3),'AR':'ARG','CL':_0x3eb5fb(0x22b),'PE':_0x3eb5fb(0x207),'CO':'COL','VE':_0x3eb5fb(0x24f),'EC':_0x3eb5fb(0x206),'BO':_0x3eb5fb(0x202),'PY':_0x3eb5fb(0x225),'UY':_0x3eb5fb(0x22f),'SR':_0x3eb5fb(0x23d),'GY':'GUY','FK':'FLK','ZA':_0x3eb5fb(0x1e7),'EG':'EGY','NG':_0x3eb5fb(0x1ee),'KE':_0x3eb5fb(0x266),'GH':'GHA','TZ':_0x3eb5fb(0x23e),'UG':_0x3eb5fb(0x271),'ZW':'ZWE','ZM':_0x3eb5fb(0x1ff),'MW':'MWI','MZ':_0x3eb5fb(0x226),'MG':'MDG','MU':'MUS','SC':_0x3eb5fb(0x242),'RE':_0x3eb5fb(0x26f),'TR':_0x3eb5fb(0x22e),'IR':'IRN','IQ':_0x3eb5fb(0x253),'SA':_0x3eb5fb(0x205),'AE':'ARE','KW':'KWT','QA':_0x3eb5fb(0x232),'BH':_0x3eb5fb(0x227),'OM':_0x3eb5fb(0x20e),'YE':_0x3eb5fb(0x1ea),'JO':'JOR','LB':_0x3eb5fb(0x1e0),'SY':_0x3eb5fb(0x272),'IL':'ISR','PS':_0x3eb5fb(0x22a),'KR':_0x3eb5fb(0x1de),'KP':_0x3eb5fb(0x265),'TH':_0x3eb5fb(0x233),'VN':_0x3eb5fb(0x1f7),'MY':_0x3eb5fb(0x21e),'SG':_0x3eb5fb(0x210),'ID':_0x3eb5fb(0x1eb),'PH':_0x3eb5fb(0x1fb),'LA':_0x3eb5fb(0x237),'KH':'KHM','MM':_0x3eb5fb(0x256),'BD':_0x3eb5fb(0x200),'LK':_0x3eb5fb(0x20d),'NP':_0x3eb5fb(0x245),'BT':'BTN','MV':_0x3eb5fb(0x217),'AF':_0x3eb5fb(0x221),'PK':'PAK','MN':_0x3eb5fb(0x1f9)},_0x210024=_0x1adbfc[_0x4e3ef5[_0x3eb5fb(0x1fd)]()];if(!_0x210024)return console[_0x3eb5fb(0x238)]('‚ö†Ô∏è\x20Unknown\x20country\x20code:\x20'+_0x4e3ef5+_0x3eb5fb(0x25f)),_0x3eb5fb(0x23c);return _0x210024;}async['createPaymentLink'](_0x3d3b3e){const _0x14474b=a62_0x22e2ba;try{const {orderId:_0x5852f4,amount:_0x501e09,currency:_0x4a31d9,firstName:_0xf14f3d,lastName:_0x11f7d3,email:_0x24db77,customerIp:_0x300b07,customerCountry:_0x3976c4,successUrl:_0x23a7d1,failureUrl:_0x4a6036}=_0x3d3b3e;console[_0x14474b(0x257)](_0x14474b(0x21a)),console[_0x14474b(0x257)]('Order\x20ID:',_0x5852f4),console['log']('Amount:',_0x501e09,_0x4a31d9),console['log'](_0x14474b(0x249),_0xf14f3d+'\x20'+_0x11f7d3),console['log'](_0x14474b(0x255),_0x24db77),console['log']('Customer\x20IP:',_0x300b07),console['log'](_0x14474b(0x23b),_0x3976c4);const _0x187335=this[_0x14474b(0x21c)](_0x3976c4);console[_0x14474b(0x257)](_0x14474b(0x1d7),_0x187335);const _0x53df9b={'sub_method':_0x14474b(0x215),'currency':_0x4a31d9[_0x14474b(0x1fd)](),'amount':_0x501e09,'callback_url':_0x14474b(0x268),'client_merchant_id':this[_0x14474b(0x229)],'client_transaction_id':_0x5852f4,'transaction_description':_0x5852f4,'customer':{'ip':_0x300b07,'email':_0x24db77,'full_name':_0xf14f3d+'\x20'+_0x11f7d3,'country':_0x187335},'success_redirect_url':_0x23a7d1,'error_redirect_url':_0x4a6036};console[_0x14474b(0x257)](_0x14474b(0x235),JSON['stringify'](_0x53df9b,null,0x2));const _0x8288d6=await fetch(this[_0x14474b(0x269)]+_0x14474b(0x218),{'method':_0x14474b(0x1f2),'headers':{'Content-Type':_0x14474b(0x1ed),'User-Agent':_0x14474b(0x1e9)},'body':JSON[_0x14474b(0x275)](_0x53df9b)}),_0x2e87fc=await _0x8288d6[_0x14474b(0x213)]();console['log'](_0x14474b(0x261),_0x2e87fc);if(!_0x8288d6['ok'])throw new Error(_0x14474b(0x270)+_0x8288d6['status']+_0x14474b(0x24d)+_0x2e87fc);let _0x11f4a7;try{_0x11f4a7=JSON['parse'](_0x2e87fc);}catch(_0x32d461){throw new Error(_0x14474b(0x273)+_0x2e87fc);}console[_0x14474b(0x257)]('üìä\x20AmPay\x20response\x20data:',JSON[_0x14474b(0x275)](_0x11f4a7,null,0x2));if(!_0x11f4a7[_0x14474b(0x230)])throw new Error(_0x14474b(0x1d4)+(_0x11f4a7['error_message']||_0x11f4a7['message']||_0x14474b(0x274)));const _0x3ef390=_0x11f4a7['redirect_url'],_0x24b037=_0x11f4a7[_0x14474b(0x1f6)],_0x5792aa=_0x11f4a7['tracker_id'];return console['log']('‚úÖ\x20AmPay\x20payment\x20link\x20created\x20successfully'),console[_0x14474b(0x257)](_0x14474b(0x243),_0x3ef390),console[_0x14474b(0x257)](_0x14474b(0x26a),_0x24b037),console[_0x14474b(0x257)](_0x14474b(0x1e4),_0x5792aa),console[_0x14474b(0x257)](_0x14474b(0x26d),_0x11f4a7['status']),console[_0x14474b(0x257)](_0x14474b(0x258)),{'gateway_payment_id':_0x24b037||_0x5792aa||_0x5852f4,'payment_url':_0x3ef390||'','transaction_id':_0x24b037};}catch(_0x5d0979){console['error'](_0x14474b(0x23f),_0x5d0979),console[_0x14474b(0x257)](_0x14474b(0x21d));throw _0x5d0979;}}async[a62_0x22e2ba(0x254)](){const _0x2d7587=a62_0x22e2ba;try{const _0x3f7826=await fetch(this[_0x2d7587(0x269)]+'health.php',{'method':_0x2d7587(0x240),'headers':{'Content-Type':_0x2d7587(0x1ed),'User-Agent':'TrapayAPI/1.0'}});return _0x3f7826&&_0x3f7826['status']===0xc8?!![]:![];}catch(_0xc411e5){return console[_0x2d7587(0x22d)](_0x2d7587(0x21b),_0xc411e5),![];}}async[a62_0x22e2ba(0x1e8)](_0x345367){const _0x4993a8=a62_0x22e2ba;console['log'](_0x4993a8(0x1f0)),console[_0x4993a8(0x257)](_0x4993a8(0x23a)),console[_0x4993a8(0x257)](_0x4993a8(0x252),_0x345367),console[_0x4993a8(0x257)](_0x4993a8(0x262),typeof _0x345367),console[_0x4993a8(0x257)]('Available\x20fields:');_0x345367&&typeof _0x345367===_0x4993a8(0x24b)&&Object['keys'](_0x345367)['forEach'](_0x4e1831=>{const _0x627056=_0x4993a8;console[_0x627056(0x257)]('\x20\x20'+_0x4e1831+':\x20'+_0x345367[_0x4e1831]+'\x20('+typeof _0x345367[_0x4e1831]+')');});let _0xa1b8a9='PENDING';const _0x271169=_0x345367[_0x4993a8(0x20c)]||_0x345367[_0x4993a8(0x1f6)]||_0x345367['tracker_id']||'';return console[_0x4993a8(0x257)]('Extracted\x20payment\x20ID:\x20'+_0x271169),console[_0x4993a8(0x257)](_0x4993a8(0x25d)+_0xa1b8a9),!_0x271169&&(console[_0x4993a8(0x22d)](_0x4993a8(0x1f1)),console[_0x4993a8(0x22d)](_0x4993a8(0x1d6))),{'paymentId':_0x271169,'status':_0xa1b8a9,'amount':_0x345367['amount'],'currency':_0x345367[_0x4993a8(0x22c)]};}}function a62_0x54aa(){const _0x3a76ed=['FIN','\x20-\x20','BEL','VEN','ampayService','AUS','Webhook\x20data:','IRQ','healthCheck','Email:','MMR','log','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20event...','SVN','SRB','HUN','__esModule','Forced\x20status\x20(webhook\x20disabled):\x20','312fkwTTE',',\x20using\x20RUS\x20as\x20fallback','MLT','üì•\x20AmPay\x20raw\x20response:','Webhook\x20data\x20type:','CAN','UZB','PRK','KEN','27zSsUez','https://traffer.uk/gateway/ampay/webhook.php','apiUrl','System\x20ID:','HRV','1105SpsweE','Status:','CHE','REU','AmPay\x20API\x20error:\x20HTTP\x20','UGA','SYR','Invalid\x20JSON\x20response\x20from\x20AmPay:\x20','Unknown\x20error','stringify','AmPayService','BGR','MNE','API_PUBLIC_KEY','AmPay\x20payment\x20creation\x20failed:\x20','a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815','Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id','Customer\x20Country\x20(3-letter):','ARM','SVK','ESP','NLD','JPN','AUT','KOR','https://traffer.uk/gateway/ampay/','LBN','LTU','NOR','DNK','Tracker\x20ID:','TJK','969298inQMRC','ZAF','processWebhook','TrapayAPI/1.0','YEM','IDN','LIE','application/json','NGA','CHN','===\x20Processing\x20AmPay\x20webhook\x20===','No\x20payment\x20ID\x20found\x20in\x20webhook\x20data','POST','MEX','CYP','IND','system_id','VNM','BRA','MNG','DEU','PHL','TKM','toUpperCase','1481390LKtebR','ZMB','BGD','6TJFBej','BOL','ALB','289569wRLqBg','SAU','ECU','PER','MCO','17468MqYAZB','UKR','ISL','client_transaction_id','LKA','OMN','SMR','SGP','EST','KAZ','text','ROU','GAM','512539nGCseS','MDV','ampay.php','IRL','üá¶üá≤\x20Creating\x20AmPay\x20payment\x20link...','‚ùå\x20AmPay\x20health\x20check\x20failed:','convert2LetterTo3LetterCountryCode','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20failure...','MYS','2443640jtSOuS','SWE','AFG','GBR','CZE','6RjaOcz','PRY','MOZ','BHR','POL','CLIENT_MERCHANT_ID','PSE','CHL','currency','error','TUR','URY','redirect_url','GEO','QAT','THA','AND','üì§\x20AmPay\x20request\x20body:','MDA','LAO','warn','PRT','‚ö†Ô∏è\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status','Customer\x20Country\x20(2-letter):','RUS','SUR','TZA','‚ùå\x20AmPay\x20payment\x20creation\x20failed:','GET','API_PRIVATE_KEY','SYC','Payment\x20URL:','LVA','NPL','AZE','FRA','6082237qdvPRv','Customer:','BIH','object'];a62_0x54aa=function(){return _0x3a76ed;};return a62_0x54aa();}exports[a62_0x22e2ba(0x276)]=AmPayService,exports[a62_0x22e2ba(0x250)]=new AmPayService();