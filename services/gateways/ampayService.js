'use strict';const a46_0x5e460f=a46_0x1399;(function(_0x57c252,_0x2b7e43){const _0x432c79=a46_0x1399,_0x494c20=_0x57c252();while(!![]){try{const _0x24dd95=parseInt(_0x432c79(0x192))/0x1+parseInt(_0x432c79(0x12c))/0x2*(parseInt(_0x432c79(0x1a0))/0x3)+-parseInt(_0x432c79(0x1b9))/0x4*(-parseInt(_0x432c79(0x15e))/0x5)+parseInt(_0x432c79(0x12d))/0x6+-parseInt(_0x432c79(0x120))/0x7*(-parseInt(_0x432c79(0x15d))/0x8)+-parseInt(_0x432c79(0x194))/0x9+parseInt(_0x432c79(0x1b2))/0xa*(-parseInt(_0x432c79(0x128))/0xb);if(_0x24dd95===_0x2b7e43)break;else _0x494c20['push'](_0x494c20['shift']());}catch(_0x58c966){_0x494c20['push'](_0x494c20['shift']());}}}(a46_0x131c,0x87342));function a46_0x1399(_0x1780cc,_0xe05d8c){const _0x131c1c=a46_0x131c();return a46_0x1399=function(_0x139975,_0x3c654a){_0x139975=_0x139975-0x119;let _0x5f1476=_0x131c1c[_0x139975];return _0x5f1476;},a46_0x1399(_0x1780cc,_0xe05d8c);}Object[a46_0x5e460f(0x1b0)](exports,a46_0x5e460f(0x1a9),{'value':!![]}),exports['ampayService']=exports[a46_0x5e460f(0x19d)]=void 0x0;function a46_0x131c(){const _0x1fcd50=['GAM','HRV','CZE','492905SRGqkW','PER','MNG','UZB','client_transaction_id','AUS','Customer\x20Country\x20(2-letter):','ROU','1991acsCCE','https://traffer.uk/gateway/ampay/webhook.php','GUY','RUS','589346Obsdpl','6581604sWxMoz','IDN','Forced\x20status\x20(webhook\x20disabled):\x20','apiUrl','LIE','UGA','DEU','COL','ARG','SVK','healthCheck','📝\x20Logging\x20AmPay\x20payment\x20creation\x20failure...','FLK','PRK','AUT','CAN','EST','HUN','AND','TJK','SMR','FRA','ALB','\x20-\x20','POL','SYR','KWT','GRC','amount','Webhook\x20data\x20type:','MWI','ampayService','CHN','TUR','MCO','===\x20Processing\x20AmPay\x20webhook\x20===','API_PUBLIC_KEY','PHL','No\x20payment\x20ID\x20found\x20in\x20webhook\x20data','log','BEL','✅\x20AmPay\x20payment\x20link\x20created\x20successfully','status','createPaymentLink','FIN','BOL','URY','message','72vGnskp','295CSrUbA','CHE','CLIENT_MERCHANT_ID','📥\x20AmPay\x20raw\x20response:','Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id','warn','UKR','processWebhook','Status:','KHM','LBN','TrapayAPI/1.0','Invalid\x20JSON\x20response\x20from\x20AmPay:\x20','SGP','BRA','BTN','KOR','Email:','NLD','BGR','application/json','toUpperCase','stringify','MKD','❌\x20AmPay\x20payment\x20creation\x20failed:','ARE','IRN','currency','📊\x20AmPay\x20response\x20data:','GHA','MNE','XKX','tracker_id','MDA','MOZ','BIH','Tracker\x20ID:','KGZ','PRY','redirect_url','MMR','DNK','Customer:','TRAFFER','BGD','ISL','Amount:','Customer\x20Country\x20(3-letter):','convert2LetterTo3LetterCountryCode','MUS','ECU',',\x20using\x20RUS\x20as\x20fallback','786873JHbpoh','VAT','8040438tWxBgn','⚠️\x20Unknown\x20country\x20code:\x20','IRL','Customer\x20IP:','SUR','ampay.php','USA','GET','REU','AmPayService','BHR','YEM','3BfcwSf','SYC','health.php','Unknown\x20error','TKM','error_message','SRB','MEX','ESP','__esModule','LAO','ISR','JOR','ZAF','PAK','API_PRIVATE_KEY','defineProperty','Payment\x20URL:','109630rfFfHJ','KAZ','LUX','❌\x20AmPay\x20health\x20check\x20failed:','JPN','error','TZA','41984dysgFo','LTU','KEN','THA','LKA'];a46_0x131c=function(){return _0x1fcd50;};return a46_0x131c();}class AmPayService{constructor(){const _0x128687=a46_0x5e460f;this[_0x128687(0x160)]=_0x128687(0x189),this[_0x128687(0x151)]='58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda',this[_0x128687(0x1af)]='a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815',this['apiUrl']='https://traffer.uk/gateway/ampay/',console[_0x128687(0x154)]('🇦🇲\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing');}[a46_0x5e460f(0x18e)](_0x3f10ae){const _0x3c2020=a46_0x5e460f,_0x5bed68={'AD':_0x3c2020(0x13f),'AL':_0x3c2020(0x143),'AT':_0x3c2020(0x13b),'BA':_0x3c2020(0x181),'BE':_0x3c2020(0x155),'BG':_0x3c2020(0x171),'BY':'BLR','CH':_0x3c2020(0x15f),'CY':'CYP','CZ':_0x3c2020(0x11f),'DE':_0x3c2020(0x133),'DK':_0x3c2020(0x187),'EE':_0x3c2020(0x13d),'ES':_0x3c2020(0x1a8),'FI':_0x3c2020(0x159),'FR':_0x3c2020(0x142),'GB':'GBR','GE':'GEO','GR':_0x3c2020(0x148),'HR':_0x3c2020(0x11e),'HU':_0x3c2020(0x13e),'IE':_0x3c2020(0x196),'IS':_0x3c2020(0x18b),'IT':'ITA','LI':_0x3c2020(0x131),'LT':_0x3c2020(0x119),'LU':_0x3c2020(0x1b4),'LV':'LVA','MC':_0x3c2020(0x14f),'MD':_0x3c2020(0x17f),'ME':_0x3c2020(0x17c),'MK':_0x3c2020(0x175),'MT':'MLT','NL':_0x3c2020(0x170),'NO':'NOR','PL':_0x3c2020(0x145),'PT':'PRT','RO':_0x3c2020(0x127),'RS':_0x3c2020(0x1a6),'RU':_0x3c2020(0x12b),'SE':'SWE','SI':'SVN','SK':_0x3c2020(0x136),'SM':_0x3c2020(0x141),'UA':_0x3c2020(0x164),'VA':_0x3c2020(0x193),'XK':_0x3c2020(0x17d),'AM':'ARM','AZ':'AZE','KZ':_0x3c2020(0x1b3),'KG':_0x3c2020(0x183),'TJ':_0x3c2020(0x140),'TM':_0x3c2020(0x1a4),'UZ':_0x3c2020(0x123),'US':_0x3c2020(0x19a),'CA':_0x3c2020(0x13c),'AU':_0x3c2020(0x125),'JP':_0x3c2020(0x1b6),'CN':_0x3c2020(0x14d),'IN':'IND','BR':_0x3c2020(0x16c),'MX':_0x3c2020(0x1a7),'AR':_0x3c2020(0x135),'CL':'CHL','PE':_0x3c2020(0x121),'CO':_0x3c2020(0x134),'VE':'VEN','EC':_0x3c2020(0x190),'BO':_0x3c2020(0x15a),'PY':_0x3c2020(0x184),'UY':_0x3c2020(0x15b),'SR':_0x3c2020(0x198),'GY':_0x3c2020(0x12a),'FK':_0x3c2020(0x139),'ZA':_0x3c2020(0x1ad),'EG':'EGY','NG':'NGA','KE':_0x3c2020(0x11a),'GH':_0x3c2020(0x17b),'TZ':_0x3c2020(0x1b8),'UG':_0x3c2020(0x132),'ZW':'ZWE','ZM':'ZMB','MW':_0x3c2020(0x14b),'MZ':_0x3c2020(0x180),'MG':'MDG','MU':_0x3c2020(0x18f),'SC':_0x3c2020(0x1a1),'RE':_0x3c2020(0x19c),'TR':_0x3c2020(0x14e),'IR':_0x3c2020(0x178),'IQ':'IRQ','SA':'SAU','AE':_0x3c2020(0x177),'KW':_0x3c2020(0x147),'QA':'QAT','BH':_0x3c2020(0x19e),'OM':'OMN','YE':_0x3c2020(0x19f),'JO':_0x3c2020(0x1ac),'LB':_0x3c2020(0x168),'SY':_0x3c2020(0x146),'IL':_0x3c2020(0x1ab),'PS':'PSE','KR':_0x3c2020(0x16e),'KP':_0x3c2020(0x13a),'TH':_0x3c2020(0x11b),'VN':'VNM','MY':'MYS','SG':_0x3c2020(0x16b),'ID':_0x3c2020(0x12e),'PH':_0x3c2020(0x152),'LA':_0x3c2020(0x1aa),'KH':_0x3c2020(0x167),'MM':_0x3c2020(0x186),'BD':_0x3c2020(0x18a),'LK':_0x3c2020(0x11c),'NP':'NPL','BT':_0x3c2020(0x16d),'MV':'MDV','AF':'AFG','PK':_0x3c2020(0x1ae),'MN':_0x3c2020(0x122)},_0x3fb90d=_0x5bed68[_0x3f10ae[_0x3c2020(0x173)]()];if(!_0x3fb90d)return console[_0x3c2020(0x163)](_0x3c2020(0x195)+_0x3f10ae+_0x3c2020(0x191)),_0x3c2020(0x12b);return _0x3fb90d;}async[a46_0x5e460f(0x158)](_0x24cd8e){const _0x56b486=a46_0x5e460f;try{const {orderId:_0x4a4b8f,amount:_0x3c7c73,currency:_0x121a87,firstName:_0x5eecfd,lastName:_0x59679c,email:_0x5887bb,customerIp:_0x589dcf,customerCountry:_0x407eae,successUrl:_0x4768a5,failureUrl:_0x15abf1}=_0x24cd8e;console[_0x56b486(0x154)]('🇦🇲\x20Creating\x20AmPay\x20payment\x20link...'),console['log']('Order\x20ID:',_0x4a4b8f),console[_0x56b486(0x154)](_0x56b486(0x18c),_0x3c7c73,_0x121a87),console[_0x56b486(0x154)](_0x56b486(0x188),_0x5eecfd+'\x20'+_0x59679c),console['log'](_0x56b486(0x16f),_0x5887bb),console[_0x56b486(0x154)](_0x56b486(0x197),_0x589dcf),console['log'](_0x56b486(0x126),_0x407eae);const _0xcf700e=this[_0x56b486(0x18e)](_0x407eae);console[_0x56b486(0x154)](_0x56b486(0x18d),_0xcf700e);const _0x592a8b={'sub_method':_0x56b486(0x11d),'currency':_0x121a87[_0x56b486(0x173)](),'amount':_0x3c7c73,'callback_url':_0x56b486(0x129),'client_merchant_id':this[_0x56b486(0x160)],'client_transaction_id':_0x4a4b8f,'transaction_description':_0x4a4b8f,'customer':{'ip':_0x589dcf,'email':_0x5887bb,'full_name':_0x5eecfd+'\x20'+_0x59679c,'country':_0xcf700e},'success_redirect_url':_0x4768a5,'error_redirect_url':_0x15abf1};console['log']('📤\x20AmPay\x20request\x20body:',JSON[_0x56b486(0x174)](_0x592a8b,null,0x2));const _0x33c7ef=await fetch(this[_0x56b486(0x130)]+_0x56b486(0x199),{'method':'POST','headers':{'Content-Type':'application/json','User-Agent':_0x56b486(0x169)},'body':JSON['stringify'](_0x592a8b)}),_0x1430fc=await _0x33c7ef['text']();console['log'](_0x56b486(0x161),_0x1430fc);if(!_0x33c7ef['ok'])throw new Error('AmPay\x20API\x20error:\x20HTTP\x20'+_0x33c7ef['status']+_0x56b486(0x144)+_0x1430fc);let _0x1873e9;try{_0x1873e9=JSON['parse'](_0x1430fc);}catch(_0x614bcc){throw new Error(_0x56b486(0x16a)+_0x1430fc);}console[_0x56b486(0x154)](_0x56b486(0x17a),JSON[_0x56b486(0x174)](_0x1873e9,null,0x2));if(!_0x1873e9[_0x56b486(0x185)])throw new Error('AmPay\x20payment\x20creation\x20failed:\x20'+(_0x1873e9[_0x56b486(0x1a5)]||_0x1873e9[_0x56b486(0x15c)]||_0x56b486(0x1a3)));const _0xd0ab85=_0x1873e9[_0x56b486(0x185)],_0x69acf2=_0x1873e9['system_id'],_0x4de3b0=_0x1873e9[_0x56b486(0x17e)];return console[_0x56b486(0x154)](_0x56b486(0x156)),console[_0x56b486(0x154)](_0x56b486(0x1b1),_0xd0ab85),console[_0x56b486(0x154)]('System\x20ID:',_0x69acf2),console[_0x56b486(0x154)](_0x56b486(0x182),_0x4de3b0),console[_0x56b486(0x154)](_0x56b486(0x166),_0x1873e9[_0x56b486(0x157)]),console[_0x56b486(0x154)]('📝\x20Logging\x20AmPay\x20payment\x20creation\x20event...'),{'gateway_payment_id':_0x69acf2||_0x4de3b0||_0x4a4b8f,'payment_url':_0xd0ab85||'','transaction_id':_0x69acf2};}catch(_0x2b059d){console['error'](_0x56b486(0x176),_0x2b059d),console[_0x56b486(0x154)](_0x56b486(0x138));throw _0x2b059d;}}async[a46_0x5e460f(0x137)](){const _0x50c7ec=a46_0x5e460f;try{const _0x9aa889=await fetch(this[_0x50c7ec(0x130)]+_0x50c7ec(0x1a2),{'method':_0x50c7ec(0x19b),'headers':{'Content-Type':_0x50c7ec(0x172),'User-Agent':_0x50c7ec(0x169)}});return _0x9aa889&&_0x9aa889[_0x50c7ec(0x157)]===0xc8?!![]:![];}catch(_0x61bf6c){return console[_0x50c7ec(0x1b7)](_0x50c7ec(0x1b5),_0x61bf6c),![];}}async[a46_0x5e460f(0x165)](_0x4da7b8){const _0x194243=a46_0x5e460f;console[_0x194243(0x154)](_0x194243(0x150)),console['log']('⚠️\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status'),console['log']('Webhook\x20data:',_0x4da7b8),console['log'](_0x194243(0x14a),typeof _0x4da7b8),console[_0x194243(0x154)]('Available\x20fields:');_0x4da7b8&&typeof _0x4da7b8==='object'&&Object['keys'](_0x4da7b8)['forEach'](_0x5c4da3=>{const _0x3fc010=_0x194243;console[_0x3fc010(0x154)]('\x20\x20'+_0x5c4da3+':\x20'+_0x4da7b8[_0x5c4da3]+'\x20('+typeof _0x4da7b8[_0x5c4da3]+')');});let _0x24bc1f='PENDING';const _0x52bd00=_0x4da7b8[_0x194243(0x124)]||_0x4da7b8['system_id']||_0x4da7b8[_0x194243(0x17e)]||'';return console[_0x194243(0x154)]('Extracted\x20payment\x20ID:\x20'+_0x52bd00),console['log'](_0x194243(0x12f)+_0x24bc1f),!_0x52bd00&&(console[_0x194243(0x1b7)](_0x194243(0x153)),console[_0x194243(0x1b7)](_0x194243(0x162))),{'paymentId':_0x52bd00,'status':_0x24bc1f,'amount':_0x4da7b8[_0x194243(0x149)],'currency':_0x4da7b8[_0x194243(0x179)]};}}exports[a46_0x5e460f(0x19d)]=AmPayService,exports[a46_0x5e460f(0x14c)]=new AmPayService();