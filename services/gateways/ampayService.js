'use strict';function a42_0x26b0(_0x451dbd,_0x321935){const _0x4ca2d4=a42_0x4ca2();return a42_0x26b0=function(_0x26b093,_0xbec936){_0x26b093=_0x26b093-0x1e7;let _0x28e1de=_0x4ca2d4[_0x26b093];return _0x28e1de;},a42_0x26b0(_0x451dbd,_0x321935);}const a42_0x8637d1=a42_0x26b0;(function(_0xfeccd4,_0xb050fa){const _0x4da234=a42_0x26b0,_0x3dd80c=_0xfeccd4();while(!![]){try{const _0x11e716=-parseInt(_0x4da234(0x260))/0x1+parseInt(_0x4da234(0x205))/0x2*(-parseInt(_0x4da234(0x23d))/0x3)+-parseInt(_0x4da234(0x288))/0x4*(-parseInt(_0x4da234(0x1ef))/0x5)+-parseInt(_0x4da234(0x230))/0x6+-parseInt(_0x4da234(0x251))/0x7+parseInt(_0x4da234(0x239))/0x8*(parseInt(_0x4da234(0x255))/0x9)+parseInt(_0x4da234(0x1f8))/0xa;if(_0x11e716===_0xb050fa)break;else _0x3dd80c['push'](_0x3dd80c['shift']());}catch(_0x21007c){_0x3dd80c['push'](_0x3dd80c['shift']());}}}(a42_0x4ca2,0x3ce5b));Object[a42_0x8637d1(0x237)](exports,'__esModule',{'value':!![]}),exports['ampayService']=exports[a42_0x8637d1(0x206)]=void 0x0;class AmPayService{constructor(){const _0x3fe8c8=a42_0x8637d1;this[_0x3fe8c8(0x1e8)]='TRAFFER',this[_0x3fe8c8(0x256)]=_0x3fe8c8(0x264),this[_0x3fe8c8(0x26b)]=_0x3fe8c8(0x1f3),this['apiUrl']='https://traffer.uk/gateway/ampay/',console[_0x3fe8c8(0x25a)](_0x3fe8c8(0x24c));}[a42_0x8637d1(0x244)](_0x41a70f){const _0x56249a=a42_0x8637d1,_0x19d201={'AD':_0x56249a(0x271),'AL':_0x56249a(0x27b),'AT':_0x56249a(0x249),'BA':_0x56249a(0x1fb),'BE':_0x56249a(0x289),'BG':_0x56249a(0x248),'BY':'BLR','CH':'CHE','CY':_0x56249a(0x269),'CZ':_0x56249a(0x24f),'DE':_0x56249a(0x1f1),'DK':_0x56249a(0x22e),'EE':'EST','ES':'ESP','FI':_0x56249a(0x210),'FR':_0x56249a(0x215),'GB':_0x56249a(0x279),'GE':_0x56249a(0x1eb),'GR':_0x56249a(0x241),'HR':_0x56249a(0x282),'HU':'HUN','IE':_0x56249a(0x24e),'IS':_0x56249a(0x26e),'IT':'ITA','LI':_0x56249a(0x209),'LT':_0x56249a(0x208),'LU':_0x56249a(0x262),'LV':'LVA','MC':'MCO','MD':'MDA','ME':_0x56249a(0x221),'MK':_0x56249a(0x28b),'MT':_0x56249a(0x22f),'NL':_0x56249a(0x245),'NO':_0x56249a(0x1ec),'PL':_0x56249a(0x229),'PT':'PRT','RO':_0x56249a(0x26a),'RS':_0x56249a(0x225),'RU':_0x56249a(0x240),'SE':_0x56249a(0x219),'SI':'SVN','SK':'SVK','SM':'SMR','UA':_0x56249a(0x1f2),'VA':'VAT','XK':_0x56249a(0x21b),'AM':_0x56249a(0x201),'AZ':_0x56249a(0x273),'KZ':_0x56249a(0x22d),'KG':_0x56249a(0x275),'TJ':_0x56249a(0x1f0),'TM':_0x56249a(0x277),'UZ':_0x56249a(0x246),'US':_0x56249a(0x216),'CA':_0x56249a(0x217),'AU':_0x56249a(0x224),'JP':_0x56249a(0x23f),'CN':_0x56249a(0x27f),'IN':_0x56249a(0x1fc),'BR':_0x56249a(0x203),'MX':'MEX','AR':_0x56249a(0x254),'CL':_0x56249a(0x20c),'PE':'PER','CO':_0x56249a(0x22a),'VE':'VEN','EC':_0x56249a(0x28a),'BO':_0x56249a(0x1ed),'PY':'PRY','UY':_0x56249a(0x257),'SR':_0x56249a(0x231),'GY':'GUY','FK':_0x56249a(0x212),'ZA':_0x56249a(0x22b),'EG':_0x56249a(0x286),'NG':_0x56249a(0x218),'KE':_0x56249a(0x27d),'GH':_0x56249a(0x1ea),'TZ':_0x56249a(0x21f),'UG':'UGA','ZW':_0x56249a(0x263),'ZM':_0x56249a(0x27c),'MW':'MWI','MZ':_0x56249a(0x278),'MG':_0x56249a(0x26c),'MU':_0x56249a(0x258),'SC':_0x56249a(0x20d),'RE':'REU','TR':_0x56249a(0x27a),'IR':_0x56249a(0x234),'IQ':_0x56249a(0x281),'SA':_0x56249a(0x283),'AE':'ARE','KW':_0x56249a(0x242),'QA':_0x56249a(0x1fd),'BH':'BHR','OM':'OMN','YE':'YEM','JO':'JOR','LB':_0x56249a(0x1e7),'SY':_0x56249a(0x1f9),'IL':_0x56249a(0x214),'PS':_0x56249a(0x207),'KR':_0x56249a(0x200),'KP':_0x56249a(0x1f7),'TH':'THA','VN':_0x56249a(0x270),'MY':_0x56249a(0x223),'SG':_0x56249a(0x276),'ID':_0x56249a(0x23e),'PH':_0x56249a(0x22c),'LA':_0x56249a(0x247),'KH':'KHM','MM':_0x56249a(0x243),'BD':_0x56249a(0x253),'LK':_0x56249a(0x202),'NP':_0x56249a(0x259),'BT':_0x56249a(0x266),'MV':_0x56249a(0x25e),'AF':_0x56249a(0x21e),'PK':_0x56249a(0x21a),'MN':'MNG'},_0x484c60=_0x19d201[_0x41a70f[_0x56249a(0x287)]()];if(!_0x484c60)return console[_0x56249a(0x232)](_0x56249a(0x233)+_0x41a70f+_0x56249a(0x23b)),_0x56249a(0x240);return _0x484c60;}async[a42_0x8637d1(0x20e)](_0x42dca3){const _0x6a60f5=a42_0x8637d1;try{const {orderId:_0x1c4871,amount:_0x5eb5bc,currency:_0x2e3951,firstName:_0x51e042,lastName:_0x24547e,email:_0x456266,customerIp:_0x406dee,customerCountry:_0x399a85,successUrl:_0x3cce94,failureUrl:_0x195eb1}=_0x42dca3;console[_0x6a60f5(0x25a)](_0x6a60f5(0x1e9)),console[_0x6a60f5(0x25a)](_0x6a60f5(0x27e),_0x1c4871),console['log'](_0x6a60f5(0x20b),_0x5eb5bc,_0x2e3951),console[_0x6a60f5(0x25a)]('Customer:',_0x51e042+'\x20'+_0x24547e),console[_0x6a60f5(0x25a)](_0x6a60f5(0x26f),_0x456266),console['log']('Customer\x20IP:',_0x406dee),console[_0x6a60f5(0x25a)](_0x6a60f5(0x204),_0x399a85);const _0x22c24c=this['convert2LetterTo3LetterCountryCode'](_0x399a85);console[_0x6a60f5(0x25a)](_0x6a60f5(0x284),_0x22c24c);const _0xd1567={'sub_method':'GAM','currency':_0x2e3951[_0x6a60f5(0x287)](),'amount':_0x5eb5bc,'callback_url':_0x6a60f5(0x272),'client_merchant_id':this[_0x6a60f5(0x1e8)],'client_transaction_id':_0x1c4871,'transaction_description':_0x1c4871,'customer':{'ip':_0x406dee,'email':_0x456266,'full_name':_0x51e042+'\x20'+_0x24547e,'country':_0x22c24c},'success_redirect_url':_0x3cce94,'error_redirect_url':_0x195eb1};console[_0x6a60f5(0x25a)](_0x6a60f5(0x21d),JSON[_0x6a60f5(0x1f4)](_0xd1567,null,0x2));const _0x3b7c99=await fetch(this[_0x6a60f5(0x25b)]+_0x6a60f5(0x226),{'method':_0x6a60f5(0x265),'headers':{'Content-Type':_0x6a60f5(0x213),'User-Agent':_0x6a60f5(0x227)},'body':JSON[_0x6a60f5(0x1f4)](_0xd1567)}),_0x4de67b=await _0x3b7c99[_0x6a60f5(0x25d)]();console[_0x6a60f5(0x25a)](_0x6a60f5(0x21c),_0x4de67b);if(!_0x3b7c99['ok'])throw new Error(_0x6a60f5(0x250)+_0x3b7c99[_0x6a60f5(0x1ee)]+'\x20-\x20'+_0x4de67b);let _0x2775c5;try{_0x2775c5=JSON['parse'](_0x4de67b);}catch(_0x9508a9){throw new Error('Invalid\x20JSON\x20response\x20from\x20AmPay:\x20'+_0x4de67b);}console[_0x6a60f5(0x25a)](_0x6a60f5(0x267),JSON[_0x6a60f5(0x1f4)](_0x2775c5,null,0x2));if(!_0x2775c5['redirect_url'])throw new Error(_0x6a60f5(0x20a)+(_0x2775c5[_0x6a60f5(0x25c)]||_0x2775c5['message']||_0x6a60f5(0x280)));const _0x339e00=_0x2775c5[_0x6a60f5(0x274)],_0x5bea6a=_0x2775c5[_0x6a60f5(0x1fa)],_0x5e2f38=_0x2775c5[_0x6a60f5(0x23a)];return console[_0x6a60f5(0x25a)]('‚úÖ\x20AmPay\x20payment\x20link\x20created\x20successfully'),console[_0x6a60f5(0x25a)]('Payment\x20URL:',_0x339e00),console[_0x6a60f5(0x25a)](_0x6a60f5(0x268),_0x5bea6a),console['log'](_0x6a60f5(0x23c),_0x5e2f38),console[_0x6a60f5(0x25a)]('Status:',_0x2775c5[_0x6a60f5(0x1ee)]),console['log'](_0x6a60f5(0x235)),{'gateway_payment_id':_0x5bea6a||_0x5e2f38||_0x1c4871,'payment_url':_0x339e00||'','transaction_id':_0x5bea6a};}catch(_0x204e21){console[_0x6a60f5(0x220)]('‚ùå\x20AmPay\x20payment\x20creation\x20failed:',_0x204e21),console['log']('üìù\x20Logging\x20AmPay\x20payment\x20creation\x20failure...');throw _0x204e21;}}async[a42_0x8637d1(0x252)](){const _0x2d6b7c=a42_0x8637d1;try{const _0x2ce583=await fetch(this[_0x2d6b7c(0x25b)]+_0x2d6b7c(0x24d),{'method':_0x2d6b7c(0x1ff),'headers':{'Content-Type':_0x2d6b7c(0x213),'User-Agent':_0x2d6b7c(0x227)}});return _0x2ce583&&_0x2ce583[_0x2d6b7c(0x1ee)]===0xc8?!![]:![];}catch(_0x4d45ac){return console[_0x2d6b7c(0x220)](_0x2d6b7c(0x285),_0x4d45ac),![];}}async[a42_0x8637d1(0x28c)](_0x401510){const _0x2067f6=a42_0x8637d1;console[_0x2067f6(0x25a)](_0x2067f6(0x236)),console[_0x2067f6(0x25a)]('‚ö†Ô∏è\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status'),console['log'](_0x2067f6(0x25f),_0x401510),console[_0x2067f6(0x25a)](_0x2067f6(0x238),typeof _0x401510),console[_0x2067f6(0x25a)](_0x2067f6(0x24b));_0x401510&&typeof _0x401510===_0x2067f6(0x211)&&Object[_0x2067f6(0x228)](_0x401510)[_0x2067f6(0x222)](_0x44053c=>{const _0x142b02=_0x2067f6;console[_0x142b02(0x25a)]('\x20\x20'+_0x44053c+':\x20'+_0x401510[_0x44053c]+'\x20('+typeof _0x401510[_0x44053c]+')');});let _0x192f4c=_0x2067f6(0x20f);const _0xc9188b=_0x401510[_0x2067f6(0x24a)]||_0x401510[_0x2067f6(0x1fa)]||_0x401510[_0x2067f6(0x23a)]||'';return console[_0x2067f6(0x25a)]('Extracted\x20payment\x20ID:\x20'+_0xc9188b),console[_0x2067f6(0x25a)](_0x2067f6(0x26d)+_0x192f4c),!_0xc9188b&&(console[_0x2067f6(0x220)](_0x2067f6(0x261)),console['error'](_0x2067f6(0x1f6))),{'paymentId':_0xc9188b,'status':_0x192f4c,'amount':_0x401510['amount'],'currency':_0x401510[_0x2067f6(0x1f5)]};}}function a42_0x4ca2(){const _0x53d2d5=['CAN','NGA','SWE','PAK','XKX','üì•\x20AmPay\x20raw\x20response:','üì§\x20AmPay\x20request\x20body:','AFG','TZA','error','MNE','forEach','MYS','AUS','SRB','ampay.php','TrapayAPI/1.0','keys','POL','COL','ZAF','PHL','KAZ','DNK','MLT','1985370mqWPKN','SUR','warn','‚ö†Ô∏è\x20Unknown\x20country\x20code:\x20','IRN','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20event...','===\x20Processing\x20AmPay\x20webhook\x20===','defineProperty','Webhook\x20data\x20type:','2893624oVCXOr','tracker_id',',\x20using\x20RUS\x20as\x20fallback','Tracker\x20ID:','2955PAYjhE','IDN','JPN','RUS','GRC','KWT','MMR','convert2LetterTo3LetterCountryCode','NLD','UZB','LAO','BGR','AUT','client_transaction_id','Available\x20fields:','üá¶üá≤\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing','health.php','IRL','CZE','AmPay\x20API\x20error:\x20HTTP\x20','558439mMLRyi','healthCheck','BGD','ARG','9bdTHuy','API_PUBLIC_KEY','URY','MUS','NPL','log','apiUrl','error_message','text','MDV','Webhook\x20data:','201256kjVwlW','No\x20payment\x20ID\x20found\x20in\x20webhook\x20data','LUX','ZWE','58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda','POST','BTN','üìä\x20AmPay\x20response\x20data:','System\x20ID:','CYP','ROU','API_PRIVATE_KEY','MDG','Forced\x20status\x20(webhook\x20disabled):\x20','ISL','Email:','VNM','AND','https://api.trapay.uk/api/webhooks/gateway/ampay','AZE','redirect_url','KGZ','SGP','TKM','MOZ','GBR','TUR','ALB','ZMB','KEN','Order\x20ID:','CHN','Unknown\x20error','IRQ','HRV','SAU','Customer\x20Country\x20(3-letter):','‚ùå\x20AmPay\x20health\x20check\x20failed:','EGY','toUpperCase','12OEsyOS','BEL','ECU','MKD','processWebhook','LBN','CLIENT_MERCHANT_ID','üá¶üá≤\x20Creating\x20AmPay\x20payment\x20link...','GHA','GEO','NOR','BOL','status','806155SxFers','TJK','DEU','UKR','a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815','stringify','currency','Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id','PRK','996920trbSdC','SYR','system_id','BIH','IND','QAT','ampayService','GET','KOR','ARM','LKA','BRA','Customer\x20Country\x20(2-letter):','170gmvCVD','AmPayService','PSE','LTU','LIE','AmPay\x20payment\x20creation\x20failed:\x20','Amount:','CHL','SYC','createPaymentLink','PENDING','FIN','object','FLK','application/json','ISR','FRA','USA'];a42_0x4ca2=function(){return _0x53d2d5;};return a42_0x4ca2();}exports[a42_0x8637d1(0x206)]=AmPayService,exports[a42_0x8637d1(0x1fe)]=new AmPayService();