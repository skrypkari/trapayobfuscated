'use strict';const a42_0x16effa=a42_0x1985;function a42_0x36d6(){const _0x176415=['KOR','parse','OMN','CHN','BLR','URY','EST','📝\x20Logging\x20AmPay\x20payment\x20creation\x20event...','216crNcsg','tracker_id','warn','CHL','✅\x20AmPay\x20payment\x20link\x20created\x20successfully','472460FxJKxV','FRA','BEL','CYP','SVN','TZA','system_id','5150096bAjduh','🇦🇲\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing','Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id','VAT','SVK','toUpperCase','ITA','110115lGqQln','QAT','58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda','🇦🇲\x20Creating\x20AmPay\x20payment\x20link...','HRV','AZE','LTU','❌\x20AmPay\x20health\x20check\x20failed:','KGZ','ampayService','amount','FLK','GHA','1513050GtNvlJ','VEN','VNM','MMR','GEO','MDG','IDN','MUS','879ILApJp','ARM','PENDING','MWI','TrapayAPI/1.0','MYS','KAZ','NPL','LBN','ALB','⚠️\x20Unknown\x20country\x20code:\x20','UGA','ZAF','No\x20payment\x20ID\x20found\x20in\x20webhook\x20data','JPN','application/json','Customer\x20Country\x20(3-letter):','healthCheck','apiUrl','IRN','ESP','redirect_url','https://traffer.uk/gateway/ampay/','RUS','defineProperty','PER','LAO','LKA','TRAFFER','ISR','2044842fRBJfJ','AmPay\x20API\x20error:\x20HTTP\x20','Customer\x20Country\x20(2-letter):','Order\x20ID:','XKX','HUN','log','22585nOYppj','LUX','SYR','https://api.trapay.uk/api/webhooks/gateway/ampay','3516uLDHXA','CHE','error_message','TJK','GET','UKR','ampay.php','SGP','AUT','EGY','Available\x20fields:',',\x20using\x20RUS\x20as\x20fallback','\x20-\x20','CLIENT_MERCHANT_ID','MCO','health.php','TUR','IRL','THA','forEach','Invalid\x20JSON\x20response\x20from\x20AmPay:\x20','COL','Amount:','POL','📥\x20AmPay\x20raw\x20response:','__esModule','320SwNgMX','AUS','GAM','AmPayService','Status:','Customer:','IND','PSE','KHM','POST','PAK','SAU','Customer\x20IP:','SYC','USA','ZMB','===\x20Processing\x20AmPay\x20webhook\x20===','error','ZWE','YEM','currency','BIH','PRY','object','Payment\x20URL:','ISL','API_PUBLIC_KEY','stringify','IRQ','DNK','NGA','convert2LetterTo3LetterCountryCode','BOL','keys','a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815','SWE','📊\x20AmPay\x20response\x20data:','BGR','GBR','TKM','Email:','status','GRC','📝\x20Logging\x20AmPay\x20payment\x20creation\x20failure...','BHR'];a42_0x36d6=function(){return _0x176415;};return a42_0x36d6();}(function(_0x3fc47e,_0x3e77a2){const _0x1fb825=a42_0x1985,_0x27f32c=_0x3fc47e();while(!![]){try{const _0xab6f16=-parseInt(_0x1fb825(0x199))/0x1+parseInt(_0x1fb825(0x13a))/0x2+parseInt(_0x1fb825(0x11c))/0x3*(-parseInt(_0x1fb825(0x145))/0x4)+parseInt(_0x1fb825(0x141))/0x5*(-parseInt(_0x1fb825(0x194))/0x6)+parseInt(_0x1fb825(0x1a0))/0x7+-parseInt(_0x1fb825(0x15f))/0x8*(parseInt(_0x1fb825(0x1a7))/0x9)+parseInt(_0x1fb825(0x114))/0xa;if(_0xab6f16===_0x3e77a2)break;else _0x27f32c['push'](_0x27f32c['shift']());}catch(_0x5f56f0){_0x27f32c['push'](_0x27f32c['shift']());}}}(a42_0x36d6,0x80c4b));Object[a42_0x16effa(0x134)](exports,a42_0x16effa(0x15e),{'value':!![]}),exports[a42_0x16effa(0x110)]=exports[a42_0x16effa(0x162)]=void 0x0;class AmPayService{constructor(){const _0x584abd=a42_0x16effa;this[_0x584abd(0x152)]=_0x584abd(0x138),this[_0x584abd(0x179)]=_0x584abd(0x1a9),this['API_PRIVATE_KEY']=_0x584abd(0x181),this[_0x584abd(0x12e)]=_0x584abd(0x132),console[_0x584abd(0x140)](_0x584abd(0x1a1));}['convert2LetterTo3LetterCountryCode'](_0xb7d311){const _0x5a6b76=a42_0x16effa,_0x46e1c7={'AD':'AND','AL':_0x5a6b76(0x125),'AT':_0x5a6b76(0x14d),'BA':_0x5a6b76(0x174),'BE':_0x5a6b76(0x19b),'BG':_0x5a6b76(0x184),'BY':_0x5a6b76(0x190),'CH':_0x5a6b76(0x146),'CY':_0x5a6b76(0x19c),'CZ':'CZE','DE':'DEU','DK':_0x5a6b76(0x17c),'EE':_0x5a6b76(0x192),'ES':_0x5a6b76(0x130),'FI':'FIN','FR':_0x5a6b76(0x19a),'GB':_0x5a6b76(0x185),'GE':_0x5a6b76(0x118),'GR':_0x5a6b76(0x189),'HR':_0x5a6b76(0x10b),'HU':_0x5a6b76(0x13f),'IE':_0x5a6b76(0x156),'IS':_0x5a6b76(0x178),'IT':_0x5a6b76(0x1a6),'LI':'LIE','LT':_0x5a6b76(0x10d),'LU':_0x5a6b76(0x142),'LV':'LVA','MC':_0x5a6b76(0x153),'MD':'MDA','ME':'MNE','MK':'MKD','MT':'MLT','NL':'NLD','NO':'NOR','PL':_0x5a6b76(0x15c),'PT':'PRT','RO':'ROU','RS':'SRB','RU':_0x5a6b76(0x133),'SE':_0x5a6b76(0x182),'SI':_0x5a6b76(0x19d),'SK':_0x5a6b76(0x1a4),'SM':'SMR','UA':_0x5a6b76(0x14a),'VA':_0x5a6b76(0x1a3),'XK':_0x5a6b76(0x13e),'AM':_0x5a6b76(0x11d),'AZ':_0x5a6b76(0x10c),'KZ':_0x5a6b76(0x122),'KG':_0x5a6b76(0x10f),'TJ':_0x5a6b76(0x148),'TM':_0x5a6b76(0x186),'UZ':'UZB','US':_0x5a6b76(0x16d),'CA':'CAN','AU':_0x5a6b76(0x160),'JP':_0x5a6b76(0x12a),'CN':_0x5a6b76(0x18f),'IN':_0x5a6b76(0x165),'BR':'BRA','MX':'MEX','AR':'ARG','CL':_0x5a6b76(0x197),'PE':_0x5a6b76(0x135),'CO':_0x5a6b76(0x15a),'VE':_0x5a6b76(0x115),'EC':'ECU','BO':_0x5a6b76(0x17f),'PY':_0x5a6b76(0x175),'UY':_0x5a6b76(0x191),'SR':'SUR','GY':'GUY','FK':_0x5a6b76(0x112),'ZA':_0x5a6b76(0x128),'EG':_0x5a6b76(0x14e),'NG':_0x5a6b76(0x17d),'KE':'KEN','GH':_0x5a6b76(0x113),'TZ':_0x5a6b76(0x19e),'UG':_0x5a6b76(0x127),'ZW':_0x5a6b76(0x171),'ZM':_0x5a6b76(0x16e),'MW':_0x5a6b76(0x11f),'MZ':'MOZ','MG':_0x5a6b76(0x119),'MU':_0x5a6b76(0x11b),'SC':_0x5a6b76(0x16c),'RE':'REU','TR':_0x5a6b76(0x155),'IR':_0x5a6b76(0x12f),'IQ':_0x5a6b76(0x17b),'SA':_0x5a6b76(0x16a),'AE':'ARE','KW':'KWT','QA':_0x5a6b76(0x1a8),'BH':_0x5a6b76(0x18b),'OM':_0x5a6b76(0x18e),'YE':_0x5a6b76(0x172),'JO':'JOR','LB':_0x5a6b76(0x124),'SY':_0x5a6b76(0x143),'IL':_0x5a6b76(0x139),'PS':_0x5a6b76(0x166),'KR':_0x5a6b76(0x18c),'KP':'PRK','TH':_0x5a6b76(0x157),'VN':_0x5a6b76(0x116),'MY':_0x5a6b76(0x121),'SG':_0x5a6b76(0x14c),'ID':_0x5a6b76(0x11a),'PH':'PHL','LA':_0x5a6b76(0x136),'KH':_0x5a6b76(0x167),'MM':_0x5a6b76(0x117),'BD':'BGD','LK':_0x5a6b76(0x137),'NP':_0x5a6b76(0x123),'BT':'BTN','MV':'MDV','AF':'AFG','PK':_0x5a6b76(0x169),'MN':'MNG'},_0x1b4bd2=_0x46e1c7[_0xb7d311[_0x5a6b76(0x1a5)]()];if(!_0x1b4bd2)return console[_0x5a6b76(0x196)](_0x5a6b76(0x126)+_0xb7d311+_0x5a6b76(0x150)),_0x5a6b76(0x133);return _0x1b4bd2;}async['createPaymentLink'](_0x28b09d){const _0xb20794=a42_0x16effa;try{const {orderId:_0x29b444,amount:_0x533d35,currency:_0x530788,firstName:_0x1ac70d,lastName:_0x3c3102,email:_0x4441f1,customerIp:_0x33fa5b,customerCountry:_0x315e30,successUrl:_0x6dcc97,failureUrl:_0x2a07a0}=_0x28b09d;console[_0xb20794(0x140)](_0xb20794(0x1aa)),console[_0xb20794(0x140)](_0xb20794(0x13d),_0x29b444),console['log'](_0xb20794(0x15b),_0x533d35,_0x530788),console[_0xb20794(0x140)](_0xb20794(0x164),_0x1ac70d+'\x20'+_0x3c3102),console[_0xb20794(0x140)](_0xb20794(0x187),_0x4441f1),console['log'](_0xb20794(0x16b),_0x33fa5b),console[_0xb20794(0x140)](_0xb20794(0x13c),_0x315e30);const _0x2b353c=this[_0xb20794(0x17e)](_0x315e30);console['log'](_0xb20794(0x12c),_0x2b353c);const _0x37c9f3={'sub_method':_0xb20794(0x161),'currency':_0x530788['toUpperCase'](),'amount':_0x533d35,'callback_url':_0xb20794(0x144),'client_merchant_id':this['CLIENT_MERCHANT_ID'],'client_transaction_id':_0x29b444,'transaction_description':_0x29b444,'customer':{'ip':_0x33fa5b,'email':_0x4441f1,'full_name':_0x1ac70d+'\x20'+_0x3c3102,'country':_0x2b353c},'success_redirect_url':_0x6dcc97,'error_redirect_url':_0x2a07a0};console[_0xb20794(0x140)]('📤\x20AmPay\x20request\x20body:',JSON[_0xb20794(0x17a)](_0x37c9f3,null,0x2));const _0x18b40b=await fetch(this['apiUrl']+_0xb20794(0x14b),{'method':_0xb20794(0x168),'headers':{'Content-Type':_0xb20794(0x12b),'User-Agent':'TrapayAPI/1.0'},'body':JSON[_0xb20794(0x17a)](_0x37c9f3)}),_0x21bee0=await _0x18b40b['text']();console[_0xb20794(0x140)](_0xb20794(0x15d),_0x21bee0);if(!_0x18b40b['ok'])throw new Error(_0xb20794(0x13b)+_0x18b40b[_0xb20794(0x188)]+_0xb20794(0x151)+_0x21bee0);let _0x326888;try{_0x326888=JSON[_0xb20794(0x18d)](_0x21bee0);}catch(_0x2df3d5){throw new Error(_0xb20794(0x159)+_0x21bee0);}console[_0xb20794(0x140)](_0xb20794(0x183),JSON['stringify'](_0x326888,null,0x2));if(!_0x326888['redirect_url'])throw new Error('AmPay\x20payment\x20creation\x20failed:\x20'+(_0x326888[_0xb20794(0x147)]||_0x326888['message']||'Unknown\x20error'));const _0xa96893=_0x326888[_0xb20794(0x131)],_0x2dc8ef=_0x326888[_0xb20794(0x19f)],_0x468440=_0x326888[_0xb20794(0x195)];return console[_0xb20794(0x140)](_0xb20794(0x198)),console[_0xb20794(0x140)](_0xb20794(0x177),_0xa96893),console[_0xb20794(0x140)]('System\x20ID:',_0x2dc8ef),console[_0xb20794(0x140)]('Tracker\x20ID:',_0x468440),console[_0xb20794(0x140)](_0xb20794(0x163),_0x326888[_0xb20794(0x188)]),console[_0xb20794(0x140)](_0xb20794(0x193)),{'gateway_payment_id':_0x2dc8ef||_0x468440||_0x29b444,'payment_url':_0xa96893||'','transaction_id':_0x2dc8ef};}catch(_0x3a16f5){console[_0xb20794(0x170)]('❌\x20AmPay\x20payment\x20creation\x20failed:',_0x3a16f5),console[_0xb20794(0x140)](_0xb20794(0x18a));throw _0x3a16f5;}}async[a42_0x16effa(0x12d)](){const _0x54d1e9=a42_0x16effa;try{const _0x4b028d=await fetch(this[_0x54d1e9(0x12e)]+_0x54d1e9(0x154),{'method':_0x54d1e9(0x149),'headers':{'Content-Type':_0x54d1e9(0x12b),'User-Agent':_0x54d1e9(0x120)}});return _0x4b028d&&_0x4b028d[_0x54d1e9(0x188)]===0xc8?!![]:![];}catch(_0x51b2a9){return console[_0x54d1e9(0x170)](_0x54d1e9(0x10e),_0x51b2a9),![];}}async['processWebhook'](_0x52b560){const _0x585c03=a42_0x16effa;console[_0x585c03(0x140)](_0x585c03(0x16f)),console[_0x585c03(0x140)]('⚠️\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status'),console['log']('Webhook\x20data:',_0x52b560),console['log']('Webhook\x20data\x20type:',typeof _0x52b560),console[_0x585c03(0x140)](_0x585c03(0x14f));_0x52b560&&typeof _0x52b560===_0x585c03(0x176)&&Object[_0x585c03(0x180)](_0x52b560)[_0x585c03(0x158)](_0xd51d0c=>{const _0x3e8218=_0x585c03;console[_0x3e8218(0x140)]('\x20\x20'+_0xd51d0c+':\x20'+_0x52b560[_0xd51d0c]+'\x20('+typeof _0x52b560[_0xd51d0c]+')');});let _0x65294b=_0x585c03(0x11e);const _0x1d6991=_0x52b560['client_transaction_id']||_0x52b560['system_id']||_0x52b560['tracker_id']||'';return console[_0x585c03(0x140)]('Extracted\x20payment\x20ID:\x20'+_0x1d6991),console[_0x585c03(0x140)]('Forced\x20status\x20(webhook\x20disabled):\x20'+_0x65294b),!_0x1d6991&&(console[_0x585c03(0x170)](_0x585c03(0x129)),console[_0x585c03(0x170)](_0x585c03(0x1a2))),{'paymentId':_0x1d6991,'status':_0x65294b,'amount':_0x52b560[_0x585c03(0x111)],'currency':_0x52b560[_0x585c03(0x173)]};}}function a42_0x1985(_0x4b2cd2,_0x29fb2d){const _0x36d632=a42_0x36d6();return a42_0x1985=function(_0x198594,_0x221b89){_0x198594=_0x198594-0x10b;let _0xf836b1=_0x36d632[_0x198594];return _0xf836b1;},a42_0x1985(_0x4b2cd2,_0x29fb2d);}exports[a42_0x16effa(0x162)]=AmPayService,exports[a42_0x16effa(0x110)]=new AmPayService();