'use strict';function a54_0x12a4(_0x148903,_0x202b17){_0x148903=_0x148903-0xdd;const _0x11c9a7=a54_0x11c9();let _0x12a485=_0x11c9a7[_0x148903];return _0x12a485;}const a54_0x4bfae4=a54_0x12a4;function a54_0x11c9(){const _0x45ceb0=['16FvswnZ','system_id','NPL','GHA','GET','Tracker\x20ID:','GRC','TrapayAPI/1.0','ðŸ‡¦ðŸ‡²\x20Creating\x20AmPay\x20payment\x20link...','CZE','apiUrl','Webhook\x20data:','IRQ','Forced\x20status\x20(webhook\x20disabled):\x20','THA','58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda','CHN','CHE','createPaymentLink','KEN','QAT','GAM','HRV','JOR','VEN','ampayService','object','MOZ','CYP','ðŸ“¤\x20AmPay\x20request\x20body:','MWI','AmPay\x20payment\x20creation\x20failed:\x20','MKD','Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id','PER','BEL','KGZ','9288mnghBe','redirect_url','RUS','===\x20Processing\x20AmPay\x20webhook\x20===','FLK','XKX','\x20-\x20','SAU','AmPay\x20API\x20error:\x20HTTP\x20','SVN','stringify','Webhook\x20data\x20type:','LTU','ZMB','AZE','3043566ZeFQXE','https://traffer.uk/gateway/ampay/','PHL','MCO','Extracted\x20payment\x20ID:\x20','BLR','MMR','https://traffer.uk/gateway/ampay/webhook.php','IDN','UZB','IND','error','PRY','SUR','NLD','LIE','HUN','application/json','PRK','ARG','Invalid\x20JSON\x20response\x20from\x20AmPay:\x20','ðŸ“\x20Logging\x20AmPay\x20payment\x20creation\x20failure...','LBN','134690UsPIsz','Unknown\x20error','SWE','LAO','CLIENT_MERCHANT_ID','POST','PAK','health.php','No\x20payment\x20ID\x20found\x20in\x20webhook\x20data','MDG','ampay.php','âŒ\x20AmPay\x20health\x20check\x20failed:','MDV','Status:','AND','toUpperCase','Customer\x20Country\x20(2-letter):','BIH','LKA','Customer\x20Country\x20(3-letter):','3752MyLzNf','TJK','âœ…\x20AmPay\x20payment\x20link\x20created\x20successfully','BHR','YEM','IRN','TRAFFER','forEach','Customer\x20IP:','parse','status','defineProperty','LVA','SYC','SYR','Payment\x20URL:','ZWE','MDA','EGY','TUR','356277xiWSie','LUX','API_PRIVATE_KEY','ðŸ“¥\x20AmPay\x20raw\x20response:','currency','keys','KOR',',\x20using\x20RUS\x20as\x20fallback','4218420kfHKQE','healthCheck','ECU','error_message','COL','BOL','REU','9ZIpIYd','SVK','BGR','GBR','KAZ','KHM','a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815','amount','TZA','ðŸ‡¦ðŸ‡²\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing','ISL','GUY','DNK','NGA','CAN','ITA','BTN','4510648DxlfoQ','Amount:','PENDING','text','UGA','OMN','GEO','convert2LetterTo3LetterCountryCode','KWT','log','__esModule','MYS','processWebhook','USA','URY','ISR','9130040zQuTdp','UKR','ARM','âš ï¸\x20Unknown\x20country\x20code:\x20','tracker_id','FRA','warn','CHL'];a54_0x11c9=function(){return _0x45ceb0;};return a54_0x11c9();}(function(_0xd45af3,_0x194ba6){const _0x361ad7=a54_0x12a4,_0x2b67be=_0xd45af3();while(!![]){try{const _0x1cc977=parseInt(_0x361ad7(0xf1))/0x1*(-parseInt(_0x361ad7(0x165))/0x2)+-parseInt(_0x361ad7(0xe2))/0x3*(-parseInt(_0x361ad7(0x11a))/0x4)+parseInt(_0x361ad7(0xea))/0x5+parseInt(_0x361ad7(0x13f))/0x6*(parseInt(_0x361ad7(0x179))/0x7)+parseInt(_0x361ad7(0x102))/0x8+-parseInt(_0x361ad7(0x14e))/0x9+-parseInt(_0x361ad7(0x112))/0xa;if(_0x1cc977===_0x194ba6)break;else _0x2b67be['push'](_0x2b67be['shift']());}catch(_0x3797aa){_0x2b67be['push'](_0x2b67be['shift']());}}}(a54_0x11c9,0xd0bd4));Object[a54_0x4bfae4(0x184)](exports,a54_0x4bfae4(0x10c),{'value':!![]}),exports[a54_0x4bfae4(0x133)]=exports['AmPayService']=void 0x0;class AmPayService{constructor(){const _0x1e254b=a54_0x4bfae4;this[_0x1e254b(0x169)]=_0x1e254b(0x17f),this['API_PUBLIC_KEY']=_0x1e254b(0x129),this[_0x1e254b(0xe4)]=_0x1e254b(0xf7),this['apiUrl']=_0x1e254b(0x14f),console[_0x1e254b(0x10b)](_0x1e254b(0xfa));}[a54_0x4bfae4(0x109)](_0x4e5d72){const _0x26d584=a54_0x4bfae4,_0x7cd05e={'AD':_0x26d584(0x173),'AL':'ALB','AT':'AUT','BA':_0x26d584(0x176),'BE':_0x26d584(0x13d),'BG':_0x26d584(0xf3),'BY':_0x26d584(0x153),'CH':_0x26d584(0x12b),'CY':_0x26d584(0x136),'CZ':_0x26d584(0x123),'DE':'DEU','DK':_0x26d584(0xfd),'EE':'EST','ES':'ESP','FI':'FIN','FR':_0x26d584(0x117),'GB':_0x26d584(0xf4),'GE':_0x26d584(0x108),'GR':_0x26d584(0x120),'HR':_0x26d584(0x130),'HU':_0x26d584(0x15e),'IE':'IRL','IS':_0x26d584(0xfb),'IT':_0x26d584(0x100),'LI':_0x26d584(0x15d),'LT':_0x26d584(0x14b),'LU':_0x26d584(0xe3),'LV':_0x26d584(0x185),'MC':_0x26d584(0x151),'MD':_0x26d584(0xdf),'ME':'MNE','MK':_0x26d584(0x13a),'MT':'MLT','NL':_0x26d584(0x15c),'NO':'NOR','PL':'POL','PT':'PRT','RO':'ROU','RS':'SRB','RU':_0x26d584(0x141),'SE':_0x26d584(0x167),'SI':_0x26d584(0x148),'SK':_0x26d584(0xf2),'SM':'SMR','UA':_0x26d584(0x113),'VA':'VAT','XK':_0x26d584(0x144),'AM':_0x26d584(0x114),'AZ':_0x26d584(0x14d),'KZ':_0x26d584(0xf5),'KG':_0x26d584(0x13e),'TJ':_0x26d584(0x17a),'TM':'TKM','UZ':_0x26d584(0x157),'US':_0x26d584(0x10f),'CA':_0x26d584(0xff),'AU':'AUS','JP':'JPN','CN':_0x26d584(0x12a),'IN':_0x26d584(0x158),'BR':'BRA','MX':'MEX','AR':_0x26d584(0x161),'CL':_0x26d584(0x119),'PE':_0x26d584(0x13c),'CO':_0x26d584(0xee),'VE':_0x26d584(0x132),'EC':_0x26d584(0xec),'BO':_0x26d584(0xef),'PY':_0x26d584(0x15a),'UY':_0x26d584(0x110),'SR':_0x26d584(0x15b),'GY':_0x26d584(0xfc),'FK':_0x26d584(0x143),'ZA':'ZAF','EG':_0x26d584(0xe0),'NG':_0x26d584(0xfe),'KE':_0x26d584(0x12d),'GH':_0x26d584(0x11d),'TZ':_0x26d584(0xf9),'UG':_0x26d584(0x106),'ZW':_0x26d584(0xde),'ZM':_0x26d584(0x14c),'MW':_0x26d584(0x138),'MZ':_0x26d584(0x135),'MG':_0x26d584(0x16e),'MU':'MUS','SC':_0x26d584(0x186),'RE':_0x26d584(0xf0),'TR':_0x26d584(0xe1),'IR':_0x26d584(0x17e),'IQ':_0x26d584(0x126),'SA':_0x26d584(0x146),'AE':'ARE','KW':_0x26d584(0x10a),'QA':_0x26d584(0x12e),'BH':_0x26d584(0x17c),'OM':_0x26d584(0x107),'YE':_0x26d584(0x17d),'JO':_0x26d584(0x131),'LB':_0x26d584(0x164),'SY':_0x26d584(0x187),'IL':_0x26d584(0x111),'PS':'PSE','KR':_0x26d584(0xe8),'KP':_0x26d584(0x160),'TH':_0x26d584(0x128),'VN':'VNM','MY':_0x26d584(0x10d),'SG':'SGP','ID':_0x26d584(0x156),'PH':_0x26d584(0x150),'LA':_0x26d584(0x168),'KH':_0x26d584(0xf6),'MM':_0x26d584(0x154),'BD':'BGD','LK':_0x26d584(0x177),'NP':_0x26d584(0x11c),'BT':_0x26d584(0x101),'MV':_0x26d584(0x171),'AF':'AFG','PK':_0x26d584(0x16b),'MN':'MNG'},_0x40b84a=_0x7cd05e[_0x4e5d72[_0x26d584(0x174)]()];if(!_0x40b84a)return console[_0x26d584(0x118)](_0x26d584(0x115)+_0x4e5d72+_0x26d584(0xe9)),'RUS';return _0x40b84a;}async[a54_0x4bfae4(0x12c)](_0x5a9f8b){const _0x442c38=a54_0x4bfae4;try{const {orderId:_0x108e65,amount:_0x3f1605,currency:_0x1f587c,firstName:_0xc8d394,lastName:_0x3215a6,email:_0x3fbdb8,customerIp:_0x579fdf,customerCountry:_0x5b4b11,successUrl:_0x4344cb,failureUrl:_0x2eefb1}=_0x5a9f8b;console['log'](_0x442c38(0x122)),console[_0x442c38(0x10b)]('Order\x20ID:',_0x108e65),console['log'](_0x442c38(0x103),_0x3f1605,_0x1f587c),console[_0x442c38(0x10b)]('Customer:',_0xc8d394+'\x20'+_0x3215a6),console[_0x442c38(0x10b)]('Email:',_0x3fbdb8),console[_0x442c38(0x10b)](_0x442c38(0x181),_0x579fdf),console['log'](_0x442c38(0x175),_0x5b4b11);const _0x1a329e=this['convert2LetterTo3LetterCountryCode'](_0x5b4b11);console[_0x442c38(0x10b)](_0x442c38(0x178),_0x1a329e);const _0x340540={'sub_method':_0x442c38(0x12f),'currency':_0x1f587c[_0x442c38(0x174)](),'amount':_0x3f1605,'callback_url':_0x442c38(0x155),'client_merchant_id':this[_0x442c38(0x169)],'client_transaction_id':_0x108e65,'transaction_description':_0x108e65,'customer':{'ip':_0x579fdf,'email':_0x3fbdb8,'full_name':_0xc8d394+'\x20'+_0x3215a6,'country':_0x1a329e},'success_redirect_url':_0x4344cb,'error_redirect_url':_0x2eefb1};console[_0x442c38(0x10b)](_0x442c38(0x137),JSON[_0x442c38(0x149)](_0x340540,null,0x2));const _0x38aed3=await fetch(this[_0x442c38(0x124)]+_0x442c38(0x16f),{'method':_0x442c38(0x16a),'headers':{'Content-Type':_0x442c38(0x15f),'User-Agent':_0x442c38(0x121)},'body':JSON[_0x442c38(0x149)](_0x340540)}),_0x140811=await _0x38aed3[_0x442c38(0x105)]();console[_0x442c38(0x10b)](_0x442c38(0xe5),_0x140811);if(!_0x38aed3['ok'])throw new Error(_0x442c38(0x147)+_0x38aed3[_0x442c38(0x183)]+_0x442c38(0x145)+_0x140811);let _0x43c3d1;try{_0x43c3d1=JSON[_0x442c38(0x182)](_0x140811);}catch(_0x52b91e){throw new Error(_0x442c38(0x162)+_0x140811);}console[_0x442c38(0x10b)]('ðŸ“Š\x20AmPay\x20response\x20data:',JSON[_0x442c38(0x149)](_0x43c3d1,null,0x2));if(!_0x43c3d1[_0x442c38(0x140)])throw new Error(_0x442c38(0x139)+(_0x43c3d1[_0x442c38(0xed)]||_0x43c3d1['message']||_0x442c38(0x166)));const _0x210442=_0x43c3d1['redirect_url'],_0x17c292=_0x43c3d1[_0x442c38(0x11b)],_0x12c398=_0x43c3d1[_0x442c38(0x116)];return console[_0x442c38(0x10b)](_0x442c38(0x17b)),console[_0x442c38(0x10b)](_0x442c38(0xdd),_0x210442),console[_0x442c38(0x10b)]('System\x20ID:',_0x17c292),console[_0x442c38(0x10b)](_0x442c38(0x11f),_0x12c398),console[_0x442c38(0x10b)](_0x442c38(0x172),_0x43c3d1[_0x442c38(0x183)]),console[_0x442c38(0x10b)]('ðŸ“\x20Logging\x20AmPay\x20payment\x20creation\x20event...'),{'gateway_payment_id':_0x17c292||_0x12c398||_0x108e65,'payment_url':_0x210442||'','transaction_id':_0x17c292};}catch(_0x11e40c){console['error']('âŒ\x20AmPay\x20payment\x20creation\x20failed:',_0x11e40c),console[_0x442c38(0x10b)](_0x442c38(0x163));throw _0x11e40c;}}async[a54_0x4bfae4(0xeb)](){const _0x486622=a54_0x4bfae4;try{const _0x121f75=await fetch(this[_0x486622(0x124)]+_0x486622(0x16c),{'method':_0x486622(0x11e),'headers':{'Content-Type':'application/json','User-Agent':'TrapayAPI/1.0'}});return _0x121f75&&_0x121f75[_0x486622(0x183)]===0xc8?!![]:![];}catch(_0x39e4cb){return console[_0x486622(0x159)](_0x486622(0x170),_0x39e4cb),![];}}async[a54_0x4bfae4(0x10e)](_0x4dba07){const _0x33f159=a54_0x4bfae4;console['log'](_0x33f159(0x142)),console[_0x33f159(0x10b)]('âš ï¸\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status'),console[_0x33f159(0x10b)](_0x33f159(0x125),_0x4dba07),console['log'](_0x33f159(0x14a),typeof _0x4dba07),console[_0x33f159(0x10b)]('Available\x20fields:');_0x4dba07&&typeof _0x4dba07===_0x33f159(0x134)&&Object[_0x33f159(0xe7)](_0x4dba07)[_0x33f159(0x180)](_0x1c19b3=>{const _0x21bb34=_0x33f159;console[_0x21bb34(0x10b)]('\x20\x20'+_0x1c19b3+':\x20'+_0x4dba07[_0x1c19b3]+'\x20('+typeof _0x4dba07[_0x1c19b3]+')');});let _0x2c33a1=_0x33f159(0x104);const _0x49ac7a=_0x4dba07['client_transaction_id']||_0x4dba07['system_id']||_0x4dba07[_0x33f159(0x116)]||'';return console[_0x33f159(0x10b)](_0x33f159(0x152)+_0x49ac7a),console[_0x33f159(0x10b)](_0x33f159(0x127)+_0x2c33a1),!_0x49ac7a&&(console['error'](_0x33f159(0x16d)),console[_0x33f159(0x159)](_0x33f159(0x13b))),{'paymentId':_0x49ac7a,'status':_0x2c33a1,'amount':_0x4dba07[_0x33f159(0xf8)],'currency':_0x4dba07[_0x33f159(0xe6)]};}}exports['AmPayService']=AmPayService,exports[a54_0x4bfae4(0x133)]=new AmPayService();