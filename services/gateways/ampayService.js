'use strict';const a46_0x5c3021=a46_0x1ed2;(function(_0x5cff1d,_0x4989ff){const _0x5bc67b=a46_0x1ed2,_0x270e99=_0x5cff1d();while(!![]){try{const _0x405a44=parseInt(_0x5bc67b(0x171))/0x1*(parseInt(_0x5bc67b(0x190))/0x2)+-parseInt(_0x5bc67b(0x1e2))/0x3*(-parseInt(_0x5bc67b(0x1c5))/0x4)+-parseInt(_0x5bc67b(0x1c7))/0x5+parseInt(_0x5bc67b(0x1b3))/0x6+-parseInt(_0x5bc67b(0x177))/0x7+-parseInt(_0x5bc67b(0x15c))/0x8*(-parseInt(_0x5bc67b(0x16b))/0x9)+parseInt(_0x5bc67b(0x19c))/0xa*(parseInt(_0x5bc67b(0x1c4))/0xb);if(_0x405a44===_0x4989ff)break;else _0x270e99['push'](_0x270e99['shift']());}catch(_0x4d3e50){_0x270e99['push'](_0x270e99['shift']());}}}(a46_0xb334,0x5b934));function a46_0x1ed2(_0xb659a5,_0x5822db){const _0xb33433=a46_0xb334();return a46_0x1ed2=function(_0x1ed27d,_0x5e8da9){_0x1ed27d=_0x1ed27d-0x158;let _0x4275f2=_0xb33433[_0x1ed27d];return _0x4275f2;},a46_0x1ed2(_0xb659a5,_0x5822db);}Object['defineProperty'](exports,a46_0x5c3021(0x1e8),{'value':!![]}),exports[a46_0x5c3021(0x1b0)]=exports['AmPayService']=void 0x0;class AmPayService{constructor(){const _0x5d80bf=a46_0x5c3021;this[_0x5d80bf(0x1e5)]=_0x5d80bf(0x191),this['API_PUBLIC_KEY']=_0x5d80bf(0x1eb),this[_0x5d80bf(0x187)]=_0x5d80bf(0x194),this[_0x5d80bf(0x19e)]='https://traffer.uk/gateway/ampay/',console[_0x5d80bf(0x16c)](_0x5d80bf(0x199));}[a46_0x5c3021(0x19d)](_0x21fc7d){const _0x28fb09=a46_0x5c3021,_0x279619={'AD':_0x28fb09(0x18c),'AL':_0x28fb09(0x179),'AT':_0x28fb09(0x198),'BA':_0x28fb09(0x1a9),'BE':_0x28fb09(0x188),'BG':'BGR','BY':_0x28fb09(0x166),'CH':_0x28fb09(0x176),'CY':_0x28fb09(0x193),'CZ':_0x28fb09(0x1ce),'DE':_0x28fb09(0x1ab),'DK':_0x28fb09(0x169),'EE':'EST','ES':_0x28fb09(0x168),'FI':_0x28fb09(0x1cc),'FR':_0x28fb09(0x1d6),'GB':'GBR','GE':_0x28fb09(0x17d),'GR':'GRC','HR':_0x28fb09(0x172),'HU':_0x28fb09(0x16e),'IE':'IRL','IS':_0x28fb09(0x1b1),'IT':_0x28fb09(0x180),'LI':_0x28fb09(0x1f4),'LT':_0x28fb09(0x1a0),'LU':_0x28fb09(0x1d5),'LV':_0x28fb09(0x1d9),'MC':_0x28fb09(0x163),'MD':_0x28fb09(0x1cf),'ME':'MNE','MK':'MKD','MT':'MLT','NL':_0x28fb09(0x19f),'NO':_0x28fb09(0x183),'PL':_0x28fb09(0x1a7),'PT':_0x28fb09(0x1e3),'RO':_0x28fb09(0x17e),'RS':_0x28fb09(0x167),'RU':_0x28fb09(0x1b4),'SE':_0x28fb09(0x160),'SI':_0x28fb09(0x173),'SK':_0x28fb09(0x185),'SM':'SMR','UA':_0x28fb09(0x15e),'VA':_0x28fb09(0x17f),'XK':_0x28fb09(0x1c3),'AM':_0x28fb09(0x15f),'AZ':_0x28fb09(0x1f0),'KZ':_0x28fb09(0x1d1),'KG':_0x28fb09(0x1db),'TJ':'TJK','TM':_0x28fb09(0x1a6),'UZ':_0x28fb09(0x159),'US':_0x28fb09(0x18b),'CA':'CAN','AU':_0x28fb09(0x1bf),'JP':_0x28fb09(0x1ae),'CN':_0x28fb09(0x1b7),'IN':_0x28fb09(0x1ef),'BR':_0x28fb09(0x1bc),'MX':_0x28fb09(0x164),'AR':_0x28fb09(0x1f7),'CL':'CHL','PE':_0x28fb09(0x1f5),'CO':_0x28fb09(0x1c8),'VE':_0x28fb09(0x1e1),'EC':_0x28fb09(0x189),'BO':_0x28fb09(0x18a),'PY':'PRY','UY':'URY','SR':_0x28fb09(0x1a5),'GY':_0x28fb09(0x170),'FK':_0x28fb09(0x1d4),'ZA':_0x28fb09(0x1ec),'EG':_0x28fb09(0x1de),'NG':'NGA','KE':_0x28fb09(0x1ea),'GH':_0x28fb09(0x1ee),'TZ':_0x28fb09(0x1ad),'UG':'UGA','ZW':_0x28fb09(0x1ac),'ZM':'ZMB','MW':'MWI','MZ':_0x28fb09(0x1af),'MG':_0x28fb09(0x1f2),'MU':_0x28fb09(0x1dd),'SC':_0x28fb09(0x1c9),'RE':_0x28fb09(0x16d),'TR':_0x28fb09(0x197),'IR':'IRN','IQ':_0x28fb09(0x1a1),'SA':_0x28fb09(0x178),'AE':_0x28fb09(0x1cb),'KW':_0x28fb09(0x19b),'QA':_0x28fb09(0x1f9),'BH':'BHR','OM':'OMN','YE':'YEM','JO':_0x28fb09(0x1ed),'LB':'LBN','SY':_0x28fb09(0x174),'IL':_0x28fb09(0x18f),'PS':'PSE','KR':'KOR','KP':_0x28fb09(0x1f3),'TH':'THA','VN':_0x28fb09(0x19a),'MY':_0x28fb09(0x1c0),'SG':_0x28fb09(0x1b9),'ID':_0x28fb09(0x17a),'PH':_0x28fb09(0x1d0),'LA':_0x28fb09(0x186),'KH':'KHM','MM':_0x28fb09(0x1be),'BD':'BGD','LK':'LKA','NP':_0x28fb09(0x1d7),'BT':_0x28fb09(0x16f),'MV':_0x28fb09(0x18e),'AF':'AFG','PK':_0x28fb09(0x195),'MN':_0x28fb09(0x1c6)},_0x36cc49=_0x279619[_0x21fc7d[_0x28fb09(0x15d)]()];if(!_0x36cc49)return console['warn'](_0x28fb09(0x1b6)+_0x21fc7d+_0x28fb09(0x17c)),_0x28fb09(0x1b4);return _0x36cc49;}async[a46_0x5c3021(0x1c1)](_0x35f50c){const _0xf7153b=a46_0x5c3021;try{const {orderId:_0x249ed7,amount:_0x29a32d,currency:_0x50441d,firstName:_0x3a0199,lastName:_0xb2e4db,email:_0x15104b,customerIp:_0x1fd4af,customerCountry:_0x2fab51,successUrl:_0x4df21c,failureUrl:_0x4092c5}=_0x35f50c;console[_0xf7153b(0x16c)](_0xf7153b(0x1b2)),console[_0xf7153b(0x16c)](_0xf7153b(0x1d8),_0x249ed7),console[_0xf7153b(0x16c)](_0xf7153b(0x162),_0x29a32d,_0x50441d),console['log'](_0xf7153b(0x1b8),_0x3a0199+'\x20'+_0xb2e4db),console[_0xf7153b(0x16c)](_0xf7153b(0x1f8),_0x15104b),console[_0xf7153b(0x16c)]('Customer\x20IP:',_0x1fd4af),console['log'](_0xf7153b(0x1ba),_0x2fab51);const _0x3cf3fa=this['convert2LetterTo3LetterCountryCode'](_0x2fab51);console['log']('Customer\x20Country\x20(3-letter):',_0x3cf3fa);const _0x3f17a2={'sub_method':'GAM','currency':_0x50441d[_0xf7153b(0x15d)](),'amount':_0x29a32d,'callback_url':_0xf7153b(0x1fa),'client_merchant_id':this[_0xf7153b(0x1e5)],'client_transaction_id':_0x249ed7,'transaction_description':_0x249ed7,'customer':{'ip':_0x1fd4af,'email':_0x15104b,'full_name':_0x3a0199+'\x20'+_0xb2e4db,'country':_0x3cf3fa},'success_redirect_url':_0x4df21c,'error_redirect_url':_0x4092c5};console['log'](_0xf7153b(0x182),JSON[_0xf7153b(0x1e0)](_0x3f17a2,null,0x2));const _0x4b800b=await fetch(this[_0xf7153b(0x19e)]+_0xf7153b(0x18d),{'method':'POST','headers':{'Content-Type':_0xf7153b(0x1a4),'User-Agent':_0xf7153b(0x1e4)},'body':JSON[_0xf7153b(0x1e0)](_0x3f17a2)}),_0x578ea1=await _0x4b800b[_0xf7153b(0x1df)]();console['log'](_0xf7153b(0x158),_0x578ea1);if(!_0x4b800b['ok'])throw new Error(_0xf7153b(0x15a)+_0x4b800b['status']+_0xf7153b(0x165)+_0x578ea1);let _0x5b0c49;try{_0x5b0c49=JSON[_0xf7153b(0x181)](_0x578ea1);}catch(_0x1552e6){throw new Error(_0xf7153b(0x1a3)+_0x578ea1);}console['log'](_0xf7153b(0x161),JSON[_0xf7153b(0x1e0)](_0x5b0c49,null,0x2));if(!_0x5b0c49[_0xf7153b(0x1a2)])throw new Error('AmPay\x20payment\x20creation\x20failed:\x20'+(_0x5b0c49[_0xf7153b(0x1e7)]||_0x5b0c49['message']||_0xf7153b(0x1f6)));const _0x5ebf7a=_0x5b0c49['redirect_url'],_0x21670b=_0x5b0c49[_0xf7153b(0x1aa)],_0x341929=_0x5b0c49[_0xf7153b(0x1bd)];return console[_0xf7153b(0x16c)](_0xf7153b(0x1cd)),console[_0xf7153b(0x16c)]('Payment\x20URL:',_0x5ebf7a),console['log'](_0xf7153b(0x15b),_0x21670b),console[_0xf7153b(0x16c)](_0xf7153b(0x1dc),_0x341929),console[_0xf7153b(0x16c)](_0xf7153b(0x1bb),_0x5b0c49[_0xf7153b(0x1d2)]),console['log'](_0xf7153b(0x175)),{'gateway_payment_id':_0x21670b||_0x341929||_0x249ed7,'payment_url':_0x5ebf7a||'','transaction_id':_0x21670b};}catch(_0x3e84cd){console[_0xf7153b(0x16a)]('‚ùå\x20AmPay\x20payment\x20creation\x20failed:',_0x3e84cd),console[_0xf7153b(0x16c)](_0xf7153b(0x1a8));throw _0x3e84cd;}}async['healthCheck'](){const _0x33a6b3=a46_0x5c3021;try{const _0x386d8e=await fetch(this[_0x33a6b3(0x19e)]+'health.php',{'method':_0x33a6b3(0x1ca),'headers':{'Content-Type':'application/json','User-Agent':'TrapayAPI/1.0'}});return _0x386d8e&&_0x386d8e[_0x33a6b3(0x1d2)]===0xc8?!![]:![];}catch(_0x28f791){return console[_0x33a6b3(0x16a)](_0x33a6b3(0x1f1),_0x28f791),![];}}async[a46_0x5c3021(0x1d3)](_0x414b00){const _0x4a81c5=a46_0x5c3021;console['log'](_0x4a81c5(0x196)),console[_0x4a81c5(0x16c)]('‚ö†Ô∏è\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status'),console[_0x4a81c5(0x16c)](_0x4a81c5(0x1e6),_0x414b00),console[_0x4a81c5(0x16c)](_0x4a81c5(0x184),typeof _0x414b00),console[_0x4a81c5(0x16c)]('Available\x20fields:');_0x414b00&&typeof _0x414b00===_0x4a81c5(0x1da)&&Object['keys'](_0x414b00)['forEach'](_0x3d18f9=>{console['log']('\x20\x20'+_0x3d18f9+':\x20'+_0x414b00[_0x3d18f9]+'\x20('+typeof _0x414b00[_0x3d18f9]+')');});let _0x3e7cdf=_0x4a81c5(0x1e9);const _0x42a3ed=_0x414b00['client_transaction_id']||_0x414b00[_0x4a81c5(0x1aa)]||_0x414b00[_0x4a81c5(0x1bd)]||'';return console[_0x4a81c5(0x16c)](_0x4a81c5(0x1b5)+_0x42a3ed),console[_0x4a81c5(0x16c)](_0x4a81c5(0x192)+_0x3e7cdf),!_0x42a3ed&&(console[_0x4a81c5(0x16a)]('No\x20payment\x20ID\x20found\x20in\x20webhook\x20data'),console[_0x4a81c5(0x16a)]('Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id')),{'paymentId':_0x42a3ed,'status':_0x3e7cdf,'amount':_0x414b00['amount'],'currency':_0x414b00[_0x4a81c5(0x1c2)]};}}exports[a46_0x5c3021(0x17b)]=AmPayService,exports[a46_0x5c3021(0x1b0)]=new AmPayService();function a46_0xb334(){const _0x565e34=['SWE','üìä\x20AmPay\x20response\x20data:','Amount:','MCO','MEX','\x20-\x20','BLR','SRB','ESP','DNK','error','6164082QkFRys','log','REU','HUN','BTN','GUY','386ITqhKG','HRV','SVN','SYR','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20event...','CHE','3374448PLqPaI','SAU','ALB','IDN','AmPayService',',\x20using\x20RUS\x20as\x20fallback','GEO','ROU','VAT','ITA','parse','üì§\x20AmPay\x20request\x20body:','NOR','Webhook\x20data\x20type:','SVK','LAO','API_PRIVATE_KEY','BEL','ECU','BOL','USA','AND','ampay.php','MDV','ISR','212nBUOqh','TRAFFER','Forced\x20status\x20(webhook\x20disabled):\x20','CYP','a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815','PAK','===\x20Processing\x20AmPay\x20webhook\x20===','TUR','AUT','üá¶üá≤\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing','VNM','KWT','12310gGpkaA','convert2LetterTo3LetterCountryCode','apiUrl','NLD','LTU','IRQ','redirect_url','Invalid\x20JSON\x20response\x20from\x20AmPay:\x20','application/json','SUR','TKM','POL','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20failure...','BIH','system_id','DEU','ZWE','TZA','JPN','MOZ','ampayService','ISL','üá¶üá≤\x20Creating\x20AmPay\x20payment\x20link...','771324uNBcrm','RUS','Extracted\x20payment\x20ID:\x20','‚ö†Ô∏è\x20Unknown\x20country\x20code:\x20','CHN','Customer:','SGP','Customer\x20Country\x20(2-letter):','Status:','BRA','tracker_id','MMR','AUS','MYS','createPaymentLink','currency','XKX','2167NyGeTQ','355340uoLNtm','MNG','1642770XTPzxN','COL','SYC','GET','ARE','FIN','‚úÖ\x20AmPay\x20payment\x20link\x20created\x20successfully','CZE','MDA','PHL','KAZ','status','processWebhook','FLK','LUX','FRA','NPL','Order\x20ID:','LVA','object','KGZ','Tracker\x20ID:','MUS','EGY','text','stringify','VEN','3soIRuV','PRT','TrapayAPI/1.0','CLIENT_MERCHANT_ID','Webhook\x20data:','error_message','__esModule','PENDING','KEN','58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda','ZAF','JOR','GHA','IND','AZE','‚ùå\x20AmPay\x20health\x20check\x20failed:','MDG','PRK','LIE','PER','Unknown\x20error','ARG','Email:','QAT','https://traffer.uk/gateway/ampay/webhook.php','üì•\x20AmPay\x20raw\x20response:','UZB','AmPay\x20API\x20error:\x20HTTP\x20','System\x20ID:','8NMPRKB','toUpperCase','UKR','ARM'];a46_0xb334=function(){return _0x565e34;};return a46_0xb334();}