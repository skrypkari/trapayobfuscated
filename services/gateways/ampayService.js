'use strict';const a42_0x24a1b5=a42_0x2311;(function(_0x3e91a9,_0xf797ed){const _0x3452a0=a42_0x2311,_0x142465=_0x3e91a9();while(!![]){try{const _0x17345f=-parseInt(_0x3452a0(0x11a))/0x1+parseInt(_0x3452a0(0x13c))/0x2*(parseInt(_0x3452a0(0x18e))/0x3)+parseInt(_0x3452a0(0x12d))/0x4*(-parseInt(_0x3452a0(0x12a))/0x5)+-parseInt(_0x3452a0(0x129))/0x6*(-parseInt(_0x3452a0(0x172))/0x7)+-parseInt(_0x3452a0(0x130))/0x8*(parseInt(_0x3452a0(0x174))/0x9)+parseInt(_0x3452a0(0x14d))/0xa+parseInt(_0x3452a0(0xf8))/0xb*(parseInt(_0x3452a0(0x11c))/0xc);if(_0x17345f===_0xf797ed)break;else _0x142465['push'](_0x142465['shift']());}catch(_0x537ccd){_0x142465['push'](_0x142465['shift']());}}}(a42_0x2062,0xc5381));function a42_0x2062(){const _0x44e43d=['NLD','CHL','LAO','IRQ','KAZ','Customer\x20Country\x20(3-letter):','USA','AUS','163554ObTvYX','10vxoIrP','log','ARG','559524rhBVRi','KEN','MNE','16DmkHVd','TRAFFER','‚ùå\x20AmPay\x20payment\x20creation\x20failed:','FLK','GET','AUT','object','Available\x20fields:','MDA','MEX','58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda','VNM','1460suotuv','PSE','message','redirect_url','AmPayService','error_message','FRA','TrapayAPI/1.0','===\x20Processing\x20AmPay\x20webhook\x20===','ESP','SVN','‚ö†Ô∏è\x20Unknown\x20country\x20code:\x20','SMR','Order\x20ID:','üì§\x20AmPay\x20request\x20body:','JOR','XKX','2742760SGvsMv','convert2LetterTo3LetterCountryCode','forEach','MWI','FIN','AZE','SYR','ECU','\x20-\x20','GHA','IRL','CZE','defineProperty','System\x20ID:','Payment\x20URL:','tracker_id','SVK','createPaymentLink','Amount:','YEM','Webhook\x20data\x20type:','üá¶üá≤\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing','SAU','https://api.trapay.uk/api/webhooks/gateway/ampay','Webhook\x20data:','application/json','BIH','Customer\x20IP:','VAT','ZMB','KHM','SRB','toUpperCase','healthCheck','COL','IND','LTU','21BNRmhk','Unknown\x20error','4159746tLQSNq','LBN','QAT','KGZ','LVA','amount','SYC','EST','status','LKA','MDV','PENDING','MKD','BGR','URY','Status:','AND','Customer\x20Country\x20(2-letter):','Email:','AmPay\x20payment\x20creation\x20failed:\x20','CYP','Customer:','Extracted\x20payment\x20ID:\x20','SGP','DNK','ZAF','1689BFeUsl','UKR','apiUrl','parse','client_transaction_id','ampayService','MNG','BOL','system_id','AmPay\x20API\x20error:\x20HTTP\x20','MDG','TJK','warn','üá¶üá≤\x20Creating\x20AmPay\x20payment\x20link...','BTN','BGD','‚ùå\x20AmPay\x20health\x20check\x20failed:','ARM','MYS','ALB','737oEqDiq','processWebhook','GAM','ISR','IDN','https://traffer.uk/gateway/ampay/','VEN','‚ö†Ô∏è\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status','Invalid\x20JSON\x20response\x20from\x20AmPay:\x20','error','UZB','currency','OMN','ampay.php','ROU','HRV','PRT','LUX','HUN','AFG','üì•\x20AmPay\x20raw\x20response:','POST','BRA','GRC','TUR','PHL','Forced\x20status\x20(webhook\x20disabled):\x20','REU','Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id','SUR','MMR','THA','ARE','TKM','1283664BQVxrp','CHN','452880PVcMLe','‚úÖ\x20AmPay\x20payment\x20link\x20created\x20successfully',',\x20using\x20RUS\x20as\x20fallback','CLIENT_MERCHANT_ID','stringify'];a42_0x2062=function(){return _0x44e43d;};return a42_0x2062();}Object[a42_0x24a1b5(0x159)](exports,'__esModule',{'value':!![]}),exports[a42_0x24a1b5(0x193)]=exports['AmPayService']=void 0x0;function a42_0x2311(_0x5d6925,_0x4fb772){const _0x20623c=a42_0x2062();return a42_0x2311=function(_0x23114e,_0xaa3984){_0x23114e=_0x23114e-0xf8;let _0x3667f1=_0x20623c[_0x23114e];return _0x3667f1;},a42_0x2311(_0x5d6925,_0x4fb772);}class AmPayService{constructor(){const _0x321ba4=a42_0x24a1b5;this[_0x321ba4(0x11f)]=_0x321ba4(0x131),this['API_PUBLIC_KEY']=_0x321ba4(0x13a),this['API_PRIVATE_KEY']='a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815',this[_0x321ba4(0x190)]=_0x321ba4(0xfd),console[_0x321ba4(0x12b)](_0x321ba4(0x162));}['convert2LetterTo3LetterCountryCode'](_0x1d5128){const _0x3e6479=a42_0x24a1b5,_0x39ed5c={'AD':_0x3e6479(0x184),'AL':_0x3e6479(0x1a1),'AT':_0x3e6479(0x135),'BA':_0x3e6479(0x167),'BE':'BEL','BG':_0x3e6479(0x181),'BY':'BLR','CH':'CHE','CY':_0x3e6479(0x188),'CZ':_0x3e6479(0x158),'DE':'DEU','DK':_0x3e6479(0x18c),'EE':_0x3e6479(0x17b),'ES':_0x3e6479(0x145),'FI':_0x3e6479(0x151),'FR':_0x3e6479(0x142),'GB':'GBR','GE':'GEO','GR':_0x3e6479(0x10f),'HR':_0x3e6479(0x107),'HU':_0x3e6479(0x10a),'IE':_0x3e6479(0x157),'IS':'ISL','IT':'ITA','LI':'LIE','LT':_0x3e6479(0x171),'LU':_0x3e6479(0x109),'LV':_0x3e6479(0x178),'MC':'MCO','MD':_0x3e6479(0x138),'ME':_0x3e6479(0x12f),'MK':_0x3e6479(0x180),'MT':'MLT','NL':_0x3e6479(0x121),'NO':'NOR','PL':'POL','PT':_0x3e6479(0x108),'RO':_0x3e6479(0x106),'RS':_0x3e6479(0x16c),'RU':'RUS','SE':'SWE','SI':_0x3e6479(0x146),'SK':_0x3e6479(0x15d),'SM':_0x3e6479(0x148),'UA':_0x3e6479(0x18f),'VA':_0x3e6479(0x169),'XK':_0x3e6479(0x14c),'AM':_0x3e6479(0x19f),'AZ':_0x3e6479(0x152),'KZ':_0x3e6479(0x125),'KG':_0x3e6479(0x177),'TJ':_0x3e6479(0x199),'TM':_0x3e6479(0x119),'UZ':_0x3e6479(0x102),'US':_0x3e6479(0x127),'CA':'CAN','AU':_0x3e6479(0x128),'JP':'JPN','CN':_0x3e6479(0x11b),'IN':_0x3e6479(0x170),'BR':_0x3e6479(0x10e),'MX':_0x3e6479(0x139),'AR':_0x3e6479(0x12c),'CL':_0x3e6479(0x122),'PE':'PER','CO':_0x3e6479(0x16f),'VE':_0x3e6479(0xfe),'EC':_0x3e6479(0x154),'BO':_0x3e6479(0x195),'PY':'PRY','UY':_0x3e6479(0x182),'SR':_0x3e6479(0x115),'GY':'GUY','FK':_0x3e6479(0x133),'ZA':_0x3e6479(0x18d),'EG':'EGY','NG':'NGA','KE':_0x3e6479(0x12e),'GH':_0x3e6479(0x156),'TZ':'TZA','UG':'UGA','ZW':'ZWE','ZM':_0x3e6479(0x16a),'MW':_0x3e6479(0x150),'MZ':'MOZ','MG':_0x3e6479(0x198),'MU':'MUS','SC':_0x3e6479(0x17a),'RE':_0x3e6479(0x113),'TR':_0x3e6479(0x110),'IR':'IRN','IQ':_0x3e6479(0x124),'SA':_0x3e6479(0x163),'AE':_0x3e6479(0x118),'KW':'KWT','QA':_0x3e6479(0x176),'BH':'BHR','OM':_0x3e6479(0x104),'YE':_0x3e6479(0x160),'JO':_0x3e6479(0x14b),'LB':_0x3e6479(0x175),'SY':_0x3e6479(0x153),'IL':_0x3e6479(0xfb),'PS':_0x3e6479(0x13d),'KR':'KOR','KP':'PRK','TH':_0x3e6479(0x117),'VN':_0x3e6479(0x13b),'MY':_0x3e6479(0x1a0),'SG':_0x3e6479(0x18b),'ID':_0x3e6479(0xfc),'PH':_0x3e6479(0x111),'LA':_0x3e6479(0x123),'KH':_0x3e6479(0x16b),'MM':_0x3e6479(0x116),'BD':_0x3e6479(0x19d),'LK':_0x3e6479(0x17d),'NP':'NPL','BT':_0x3e6479(0x19c),'MV':_0x3e6479(0x17e),'AF':_0x3e6479(0x10b),'PK':'PAK','MN':_0x3e6479(0x194)},_0x26ca6c=_0x39ed5c[_0x1d5128[_0x3e6479(0x16d)]()];if(!_0x26ca6c)return console[_0x3e6479(0x19a)](_0x3e6479(0x147)+_0x1d5128+_0x3e6479(0x11e)),'RUS';return _0x26ca6c;}async[a42_0x24a1b5(0x15e)](_0x580e92){const _0x5647b9=a42_0x24a1b5;try{const {orderId:_0x1f7dd9,amount:_0x31aa3a,currency:_0x2af6eb,firstName:_0xf52bc9,lastName:_0x23d4d2,email:_0x51639c,customerIp:_0x6426dd,customerCountry:_0x2e28b8,successUrl:_0x1b1771,failureUrl:_0x34e7cc}=_0x580e92;console[_0x5647b9(0x12b)](_0x5647b9(0x19b)),console['log'](_0x5647b9(0x149),_0x1f7dd9),console[_0x5647b9(0x12b)](_0x5647b9(0x15f),_0x31aa3a,_0x2af6eb),console[_0x5647b9(0x12b)](_0x5647b9(0x189),_0xf52bc9+'\x20'+_0x23d4d2),console[_0x5647b9(0x12b)](_0x5647b9(0x186),_0x51639c),console['log'](_0x5647b9(0x168),_0x6426dd),console['log'](_0x5647b9(0x185),_0x2e28b8);const _0x22babe=this[_0x5647b9(0x14e)](_0x2e28b8);console[_0x5647b9(0x12b)](_0x5647b9(0x126),_0x22babe);const _0x7b7953={'sub_method':_0x5647b9(0xfa),'currency':_0x2af6eb[_0x5647b9(0x16d)](),'amount':_0x31aa3a,'callback_url':_0x5647b9(0x164),'client_merchant_id':this['CLIENT_MERCHANT_ID'],'client_transaction_id':_0x1f7dd9,'transaction_description':_0x1f7dd9,'customer':{'ip':_0x6426dd,'email':_0x51639c,'full_name':_0xf52bc9+'\x20'+_0x23d4d2,'country':_0x22babe},'success_redirect_url':_0x1b1771,'error_redirect_url':_0x34e7cc};console[_0x5647b9(0x12b)](_0x5647b9(0x14a),JSON[_0x5647b9(0x120)](_0x7b7953,null,0x2));const _0x5371b6=await fetch(this[_0x5647b9(0x190)]+_0x5647b9(0x105),{'method':_0x5647b9(0x10d),'headers':{'Content-Type':_0x5647b9(0x166),'User-Agent':_0x5647b9(0x143)},'body':JSON[_0x5647b9(0x120)](_0x7b7953)}),_0x6572d1=await _0x5371b6['text']();console[_0x5647b9(0x12b)](_0x5647b9(0x10c),_0x6572d1);if(!_0x5371b6['ok'])throw new Error(_0x5647b9(0x197)+_0x5371b6['status']+_0x5647b9(0x155)+_0x6572d1);let _0x5ed0ff;try{_0x5ed0ff=JSON[_0x5647b9(0x191)](_0x6572d1);}catch(_0x5dac3a){throw new Error(_0x5647b9(0x100)+_0x6572d1);}console['log']('üìä\x20AmPay\x20response\x20data:',JSON[_0x5647b9(0x120)](_0x5ed0ff,null,0x2));if(!_0x5ed0ff['redirect_url'])throw new Error(_0x5647b9(0x187)+(_0x5ed0ff[_0x5647b9(0x141)]||_0x5ed0ff[_0x5647b9(0x13e)]||_0x5647b9(0x173)));const _0x24867c=_0x5ed0ff[_0x5647b9(0x13f)],_0x27e1cc=_0x5ed0ff[_0x5647b9(0x196)],_0x4de640=_0x5ed0ff[_0x5647b9(0x15c)];return console[_0x5647b9(0x12b)](_0x5647b9(0x11d)),console['log'](_0x5647b9(0x15b),_0x24867c),console['log'](_0x5647b9(0x15a),_0x27e1cc),console[_0x5647b9(0x12b)]('Tracker\x20ID:',_0x4de640),console['log'](_0x5647b9(0x183),_0x5ed0ff[_0x5647b9(0x17c)]),console[_0x5647b9(0x12b)]('üìù\x20Logging\x20AmPay\x20payment\x20creation\x20event...'),{'gateway_payment_id':_0x27e1cc||_0x4de640||_0x1f7dd9,'payment_url':_0x24867c||'','transaction_id':_0x27e1cc};}catch(_0x5b46ab){console[_0x5647b9(0x101)](_0x5647b9(0x132),_0x5b46ab),console['log']('üìù\x20Logging\x20AmPay\x20payment\x20creation\x20failure...');throw _0x5b46ab;}}async[a42_0x24a1b5(0x16e)](){const _0x3ab697=a42_0x24a1b5;try{const _0x60a091=await fetch(this[_0x3ab697(0x190)]+'health.php',{'method':_0x3ab697(0x134),'headers':{'Content-Type':_0x3ab697(0x166),'User-Agent':_0x3ab697(0x143)}});return _0x60a091&&_0x60a091[_0x3ab697(0x17c)]===0xc8?!![]:![];}catch(_0x4bdf0f){return console[_0x3ab697(0x101)](_0x3ab697(0x19e),_0x4bdf0f),![];}}async[a42_0x24a1b5(0xf9)](_0x4c4a23){const _0x31a2c1=a42_0x24a1b5;console['log'](_0x31a2c1(0x144)),console[_0x31a2c1(0x12b)](_0x31a2c1(0xff)),console[_0x31a2c1(0x12b)](_0x31a2c1(0x165),_0x4c4a23),console[_0x31a2c1(0x12b)](_0x31a2c1(0x161),typeof _0x4c4a23),console[_0x31a2c1(0x12b)](_0x31a2c1(0x137));_0x4c4a23&&typeof _0x4c4a23===_0x31a2c1(0x136)&&Object['keys'](_0x4c4a23)[_0x31a2c1(0x14f)](_0x78b434=>{console['log']('\x20\x20'+_0x78b434+':\x20'+_0x4c4a23[_0x78b434]+'\x20('+typeof _0x4c4a23[_0x78b434]+')');});let _0x34d152=_0x31a2c1(0x17f);const _0x358c8b=_0x4c4a23[_0x31a2c1(0x192)]||_0x4c4a23['system_id']||_0x4c4a23[_0x31a2c1(0x15c)]||'';return console[_0x31a2c1(0x12b)](_0x31a2c1(0x18a)+_0x358c8b),console[_0x31a2c1(0x12b)](_0x31a2c1(0x112)+_0x34d152),!_0x358c8b&&(console[_0x31a2c1(0x101)]('No\x20payment\x20ID\x20found\x20in\x20webhook\x20data'),console[_0x31a2c1(0x101)](_0x31a2c1(0x114))),{'paymentId':_0x358c8b,'status':_0x34d152,'amount':_0x4c4a23[_0x31a2c1(0x179)],'currency':_0x4c4a23[_0x31a2c1(0x103)]};}}exports[a42_0x24a1b5(0x140)]=AmPayService,exports[a42_0x24a1b5(0x193)]=new AmPayService();