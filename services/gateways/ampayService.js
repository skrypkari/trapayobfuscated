'use strict';const a42_0x14569a=a42_0x28fd;(function(_0x20d3e1,_0x9903c3){const _0x15d37e=a42_0x28fd,_0x282b19=_0x20d3e1();while(!![]){try{const _0x493950=parseInt(_0x15d37e(0x178))/0x1*(-parseInt(_0x15d37e(0x13d))/0x2)+parseInt(_0x15d37e(0x119))/0x3+parseInt(_0x15d37e(0x17f))/0x4+-parseInt(_0x15d37e(0x150))/0x5*(parseInt(_0x15d37e(0x139))/0x6)+parseInt(_0x15d37e(0x10b))/0x7*(-parseInt(_0x15d37e(0x126))/0x8)+-parseInt(_0x15d37e(0x12f))/0x9+parseInt(_0x15d37e(0x108))/0xa;if(_0x493950===_0x9903c3)break;else _0x282b19['push'](_0x282b19['shift']());}catch(_0x4ce1d6){_0x282b19['push'](_0x282b19['shift']());}}}(a42_0x5c3a,0x97acf));function a42_0x28fd(_0x158d73,_0x504023){const _0x5c3afa=a42_0x5c3a();return a42_0x28fd=function(_0x28fd12,_0x40c57f){_0x28fd12=_0x28fd12-0xe7;let _0x405209=_0x5c3afa[_0x28fd12];return _0x405209;},a42_0x28fd(_0x158d73,_0x504023);}Object[a42_0x14569a(0x12a)](exports,a42_0x14569a(0x11e),{'value':!![]}),exports[a42_0x14569a(0x17a)]=exports[a42_0x14569a(0xe7)]=void 0x0;function a42_0x5c3a(){const _0xa773de=['KEN','NLD','OMN','EST','JPN','redirect_url','üì§\x20AmPay\x20request\x20body:','health.php','LAO','22459560mBleTR','LVA','QAT','1576743iZHMIK','58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda','AUS','XKX','BEL','AZE','Unknown\x20error','warn','error','AmPay\x20payment\x20creation\x20failed:\x20','POL','log','https://traffer.uk/gateway/ampay/','IND','2344149zRUqYp','PHL','MNE','ECU','ARG','__esModule','HRV','message','IDN','‚ö†Ô∏è\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status','Available\x20fields:','VEN','Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id','24KxauaE','KAZ','REU','MKD','defineProperty','text','MYS','AFG','BHR','10087578kaqofF','ALB','IRL','MDA','BTN','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20event...','FRA','HUN','TRAFFER','Extracted\x20payment\x20ID:\x20','150VNZUOu','LUX','‚ö†Ô∏è\x20Unknown\x20country\x20code:\x20','toUpperCase','4ANAdbq','BGD','UZB','LTU','error_message','üì•\x20AmPay\x20raw\x20response:','IRQ','KOR','MUS','MDV','EGY','RUS','PAK','AND','Webhook\x20data\x20type:','COL','ZAF','DEU','PRY','175345nIXFhV','BOL','üìä\x20AmPay\x20response\x20data:','URY','GUY','SVN','CHN','MCO','Amount:','SAU','application/json','FIN','Status:','MOZ','processWebhook','SRB','Webhook\x20data:','NPL','currency','ARM','MEX','üá¶üá≤\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing','Forced\x20status\x20(webhook\x20disabled):\x20','healthCheck','SYR','PER','AUT','\x20-\x20','Customer\x20IP:','convert2LetterTo3LetterCountryCode','‚ùå\x20AmPay\x20payment\x20creation\x20failed:','FLK','‚úÖ\x20AmPay\x20payment\x20link\x20created\x20successfully','CHL','MWI','LBN','KHM','Customer\x20Country\x20(2-letter):','No\x20payment\x20ID\x20found\x20in\x20webhook\x20data','UGA','79711oxrlvF','LKA','ampayService','ISR','SWE','NOR','keys','1706640qZbEMj','ampay.php','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20failure...','JOR','ZMB','BLR','System\x20ID:','PSE','POST','Invalid\x20JSON\x20response\x20from\x20AmPay:\x20','IRN','AmPayService','ROU','Customer:','GEO','YEM','LIE','USA','CAN','TZA','GAM','status','SGP','GBR','BRA','===\x20Processing\x20AmPay\x20webhook\x20===','object','MDG','TrapayAPI/1.0','stringify','BIH','TJK','https://traffer.uk/gateway/ampay/webhook.php','apiUrl','Tracker\x20ID:'];a42_0x5c3a=function(){return _0xa773de;};return a42_0x5c3a();}class AmPayService{constructor(){const _0x2fae2b=a42_0x14569a;this['CLIENT_MERCHANT_ID']=_0x2fae2b(0x137),this['API_PUBLIC_KEY']=_0x2fae2b(0x10c),this['API_PRIVATE_KEY']='a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815',this[_0x2fae2b(0xfd)]=_0x2fae2b(0x117),console[_0x2fae2b(0x116)](_0x2fae2b(0x165));}[a42_0x14569a(0x16d)](_0x49e3b9){const _0x56f81d=a42_0x14569a,_0x523195={'AD':_0x56f81d(0x14a),'AL':_0x56f81d(0x130),'AT':_0x56f81d(0x16a),'BA':_0x56f81d(0xfa),'BE':_0x56f81d(0x10f),'BG':'BGR','BY':_0x56f81d(0x184),'CH':'CHE','CY':'CYP','CZ':'CZE','DE':_0x56f81d(0x14e),'DK':'DNK','EE':_0x56f81d(0x102),'ES':'ESP','FI':_0x56f81d(0x15b),'FR':_0x56f81d(0x135),'GB':_0x56f81d(0xf3),'GE':_0x56f81d(0xea),'GR':'GRC','HR':_0x56f81d(0x11f),'HU':_0x56f81d(0x136),'IE':_0x56f81d(0x131),'IS':'ISL','IT':'ITA','LI':_0x56f81d(0xec),'LT':_0x56f81d(0x140),'LU':_0x56f81d(0x13a),'LV':_0x56f81d(0x109),'MC':_0x56f81d(0x157),'MD':_0x56f81d(0x132),'ME':_0x56f81d(0x11b),'MK':_0x56f81d(0x129),'MT':'MLT','NL':_0x56f81d(0x100),'NO':_0x56f81d(0x17d),'PL':_0x56f81d(0x115),'PT':'PRT','RO':_0x56f81d(0xe8),'RS':_0x56f81d(0x15f),'RU':_0x56f81d(0x148),'SE':_0x56f81d(0x17c),'SI':_0x56f81d(0x155),'SK':'SVK','SM':'SMR','UA':'UKR','VA':'VAT','XK':_0x56f81d(0x10e),'AM':_0x56f81d(0x163),'AZ':_0x56f81d(0x110),'KZ':_0x56f81d(0x127),'KG':'KGZ','TJ':_0x56f81d(0xfb),'TM':'TKM','UZ':_0x56f81d(0x13f),'US':_0x56f81d(0xed),'CA':_0x56f81d(0xee),'AU':_0x56f81d(0x10d),'JP':_0x56f81d(0x103),'CN':_0x56f81d(0x156),'IN':_0x56f81d(0x118),'BR':_0x56f81d(0xf4),'MX':_0x56f81d(0x164),'AR':_0x56f81d(0x11d),'CL':_0x56f81d(0x171),'PE':_0x56f81d(0x169),'CO':_0x56f81d(0x14c),'VE':_0x56f81d(0x124),'EC':_0x56f81d(0x11c),'BO':_0x56f81d(0x151),'PY':_0x56f81d(0x14f),'UY':_0x56f81d(0x153),'SR':'SUR','GY':_0x56f81d(0x154),'FK':_0x56f81d(0x16f),'ZA':_0x56f81d(0x14d),'EG':_0x56f81d(0x147),'NG':'NGA','KE':_0x56f81d(0xff),'GH':'GHA','TZ':_0x56f81d(0xef),'UG':_0x56f81d(0x177),'ZW':'ZWE','ZM':_0x56f81d(0x183),'MW':_0x56f81d(0x172),'MZ':_0x56f81d(0x15d),'MG':_0x56f81d(0xf7),'MU':_0x56f81d(0x145),'SC':'SYC','RE':_0x56f81d(0x128),'TR':'TUR','IR':_0x56f81d(0x189),'IQ':_0x56f81d(0x143),'SA':_0x56f81d(0x159),'AE':'ARE','KW':'KWT','QA':_0x56f81d(0x10a),'BH':_0x56f81d(0x12e),'OM':_0x56f81d(0x101),'YE':_0x56f81d(0xeb),'JO':_0x56f81d(0x182),'LB':_0x56f81d(0x173),'SY':_0x56f81d(0x168),'IL':_0x56f81d(0x17b),'PS':_0x56f81d(0x186),'KR':_0x56f81d(0x144),'KP':'PRK','TH':'THA','VN':'VNM','MY':_0x56f81d(0x12c),'SG':_0x56f81d(0xf2),'ID':_0x56f81d(0x121),'PH':_0x56f81d(0x11a),'LA':_0x56f81d(0x107),'KH':_0x56f81d(0x174),'MM':'MMR','BD':_0x56f81d(0x13e),'LK':_0x56f81d(0x179),'NP':_0x56f81d(0x161),'BT':_0x56f81d(0x133),'MV':_0x56f81d(0x146),'AF':_0x56f81d(0x12d),'PK':_0x56f81d(0x149),'MN':'MNG'},_0x1776d8=_0x523195[_0x49e3b9['toUpperCase']()];if(!_0x1776d8)return console[_0x56f81d(0x112)](_0x56f81d(0x13b)+_0x49e3b9+',\x20using\x20RUS\x20as\x20fallback'),'RUS';return _0x1776d8;}async['createPaymentLink'](_0x3fbdbe){const _0x23cf6c=a42_0x14569a;try{const {orderId:_0x659e5b,amount:_0x15d158,currency:_0x4e7b43,firstName:_0x2c8e8d,lastName:_0x3c76a1,email:_0x391599,customerIp:_0x7480b1,customerCountry:_0x88d55c,successUrl:_0x14c77d,failureUrl:_0xd42ab2}=_0x3fbdbe;console[_0x23cf6c(0x116)]('üá¶üá≤\x20Creating\x20AmPay\x20payment\x20link...'),console[_0x23cf6c(0x116)]('Order\x20ID:',_0x659e5b),console[_0x23cf6c(0x116)](_0x23cf6c(0x158),_0x15d158,_0x4e7b43),console[_0x23cf6c(0x116)](_0x23cf6c(0xe9),_0x2c8e8d+'\x20'+_0x3c76a1),console[_0x23cf6c(0x116)]('Email:',_0x391599),console[_0x23cf6c(0x116)](_0x23cf6c(0x16c),_0x7480b1),console[_0x23cf6c(0x116)](_0x23cf6c(0x175),_0x88d55c);const _0x2c4cdc=this[_0x23cf6c(0x16d)](_0x88d55c);console[_0x23cf6c(0x116)]('Customer\x20Country\x20(3-letter):',_0x2c4cdc);const _0x558936={'sub_method':_0x23cf6c(0xf0),'currency':_0x4e7b43[_0x23cf6c(0x13c)](),'amount':_0x15d158,'callback_url':_0x23cf6c(0xfc),'client_merchant_id':this['CLIENT_MERCHANT_ID'],'client_transaction_id':_0x659e5b,'transaction_description':_0x659e5b,'customer':{'ip':_0x7480b1,'email':_0x391599,'full_name':_0x2c8e8d+'\x20'+_0x3c76a1,'country':_0x2c4cdc},'success_redirect_url':_0x14c77d,'error_redirect_url':_0xd42ab2};console[_0x23cf6c(0x116)](_0x23cf6c(0x105),JSON['stringify'](_0x558936,null,0x2));const _0x497191=await fetch(this[_0x23cf6c(0xfd)]+_0x23cf6c(0x180),{'method':_0x23cf6c(0x187),'headers':{'Content-Type':_0x23cf6c(0x15a),'User-Agent':_0x23cf6c(0xf8)},'body':JSON[_0x23cf6c(0xf9)](_0x558936)}),_0x52ab95=await _0x497191[_0x23cf6c(0x12b)]();console[_0x23cf6c(0x116)](_0x23cf6c(0x142),_0x52ab95);if(!_0x497191['ok'])throw new Error('AmPay\x20API\x20error:\x20HTTP\x20'+_0x497191['status']+_0x23cf6c(0x16b)+_0x52ab95);let _0x130a0c;try{_0x130a0c=JSON['parse'](_0x52ab95);}catch(_0x413d0f){throw new Error(_0x23cf6c(0x188)+_0x52ab95);}console[_0x23cf6c(0x116)](_0x23cf6c(0x152),JSON[_0x23cf6c(0xf9)](_0x130a0c,null,0x2));if(!_0x130a0c[_0x23cf6c(0x104)])throw new Error(_0x23cf6c(0x114)+(_0x130a0c[_0x23cf6c(0x141)]||_0x130a0c[_0x23cf6c(0x120)]||_0x23cf6c(0x111)));const _0x8eab94=_0x130a0c[_0x23cf6c(0x104)],_0x21574d=_0x130a0c['system_id'],_0x445746=_0x130a0c['tracker_id'];return console['log'](_0x23cf6c(0x170)),console[_0x23cf6c(0x116)]('Payment\x20URL:',_0x8eab94),console[_0x23cf6c(0x116)](_0x23cf6c(0x185),_0x21574d),console[_0x23cf6c(0x116)](_0x23cf6c(0xfe),_0x445746),console[_0x23cf6c(0x116)](_0x23cf6c(0x15c),_0x130a0c[_0x23cf6c(0xf1)]),console[_0x23cf6c(0x116)](_0x23cf6c(0x134)),{'gateway_payment_id':_0x21574d||_0x445746||_0x659e5b,'payment_url':_0x8eab94||'','transaction_id':_0x21574d};}catch(_0x1286ba){console[_0x23cf6c(0x113)](_0x23cf6c(0x16e),_0x1286ba),console['log'](_0x23cf6c(0x181));throw _0x1286ba;}}async[a42_0x14569a(0x167)](){const _0x39e636=a42_0x14569a;try{const _0xd9821d=await fetch(this[_0x39e636(0xfd)]+_0x39e636(0x106),{'method':'GET','headers':{'Content-Type':_0x39e636(0x15a),'User-Agent':_0x39e636(0xf8)}});return _0xd9821d&&_0xd9821d[_0x39e636(0xf1)]===0xc8?!![]:![];}catch(_0x25641c){return console['error']('‚ùå\x20AmPay\x20health\x20check\x20failed:',_0x25641c),![];}}async[a42_0x14569a(0x15e)](_0x18e5c6){const _0x30bd9f=a42_0x14569a;console[_0x30bd9f(0x116)](_0x30bd9f(0xf5)),console[_0x30bd9f(0x116)](_0x30bd9f(0x122)),console[_0x30bd9f(0x116)](_0x30bd9f(0x160),_0x18e5c6),console[_0x30bd9f(0x116)](_0x30bd9f(0x14b),typeof _0x18e5c6),console[_0x30bd9f(0x116)](_0x30bd9f(0x123));_0x18e5c6&&typeof _0x18e5c6===_0x30bd9f(0xf6)&&Object[_0x30bd9f(0x17e)](_0x18e5c6)['forEach'](_0x4504a6=>{const _0x285f1d=_0x30bd9f;console[_0x285f1d(0x116)]('\x20\x20'+_0x4504a6+':\x20'+_0x18e5c6[_0x4504a6]+'\x20('+typeof _0x18e5c6[_0x4504a6]+')');});let _0x52448e='PENDING';const _0x23535d=_0x18e5c6['client_transaction_id']||_0x18e5c6['system_id']||_0x18e5c6['tracker_id']||'';return console[_0x30bd9f(0x116)](_0x30bd9f(0x138)+_0x23535d),console[_0x30bd9f(0x116)](_0x30bd9f(0x166)+_0x52448e),!_0x23535d&&(console[_0x30bd9f(0x113)](_0x30bd9f(0x176)),console[_0x30bd9f(0x113)](_0x30bd9f(0x125))),{'paymentId':_0x23535d,'status':_0x52448e,'amount':_0x18e5c6['amount'],'currency':_0x18e5c6[_0x30bd9f(0x162)]};}}exports[a42_0x14569a(0xe7)]=AmPayService,exports['ampayService']=new AmPayService();