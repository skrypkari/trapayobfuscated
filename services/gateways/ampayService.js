'use strict';const a58_0x5d32eb=a58_0x124c;function a58_0x124c(_0x546907,_0x4ea412){_0x546907=_0x546907-0x121;const _0x57751f=a58_0x5775();let _0x124c92=_0x57751f[_0x546907];return _0x124c92;}(function(_0x23340c,_0x374983){const _0x12038d=a58_0x124c,_0x1898a9=_0x23340c();while(!![]){try{const _0x163ecb=-parseInt(_0x12038d(0x14f))/0x1+parseInt(_0x12038d(0x1a8))/0x2*(parseInt(_0x12038d(0x170))/0x3)+-parseInt(_0x12038d(0x125))/0x4+-parseInt(_0x12038d(0x121))/0x5+-parseInt(_0x12038d(0x18a))/0x6+parseInt(_0x12038d(0x1b4))/0x7+-parseInt(_0x12038d(0x1a7))/0x8*(-parseInt(_0x12038d(0x14b))/0x9);if(_0x163ecb===_0x374983)break;else _0x1898a9['push'](_0x1898a9['shift']());}catch(_0x46fac1){_0x1898a9['push'](_0x1898a9['shift']());}}}(a58_0x5775,0xbfbf7));Object[a58_0x5d32eb(0x122)](exports,a58_0x5d32eb(0x192),{'value':!![]}),exports[a58_0x5d32eb(0x199)]=exports[a58_0x5d32eb(0x17c)]=void 0x0;class AmPayService{constructor(){const _0x3c9586=a58_0x5d32eb;this[_0x3c9586(0x127)]='TRAFFER',this[_0x3c9586(0x123)]=_0x3c9586(0x19f),this[_0x3c9586(0x17f)]=_0x3c9586(0x155),this[_0x3c9586(0x156)]='https://traffer.uk/gateway/ampay/',console[_0x3c9586(0x1a5)](_0x3c9586(0x150));}[a58_0x5d32eb(0x18b)](_0x2aa997){const _0xc0c5f9=a58_0x5d32eb,_0x13cb6e={'AD':_0xc0c5f9(0x1a3),'AL':_0xc0c5f9(0x191),'AT':_0xc0c5f9(0x188),'BA':_0xc0c5f9(0x130),'BE':'BEL','BG':'BGR','BY':'BLR','CH':_0xc0c5f9(0x1a0),'CY':_0xc0c5f9(0x154),'CZ':_0xc0c5f9(0x1b7),'DE':_0xc0c5f9(0x196),'DK':_0xc0c5f9(0x185),'EE':_0xc0c5f9(0x157),'ES':_0xc0c5f9(0x16b),'FI':'FIN','FR':_0xc0c5f9(0x197),'GB':_0xc0c5f9(0x1b2),'GE':_0xc0c5f9(0x17b),'GR':'GRC','HR':'HRV','HU':'HUN','IE':_0xc0c5f9(0x164),'IS':_0xc0c5f9(0x146),'IT':'ITA','LI':'LIE','LT':_0xc0c5f9(0x144),'LU':'LUX','LV':_0xc0c5f9(0x148),'MC':_0xc0c5f9(0x140),'MD':_0xc0c5f9(0x139),'ME':_0xc0c5f9(0x183),'MK':_0xc0c5f9(0x174),'MT':_0xc0c5f9(0x136),'NL':_0xc0c5f9(0x151),'NO':_0xc0c5f9(0x178),'PL':_0xc0c5f9(0x165),'PT':_0xc0c5f9(0x15d),'RO':_0xc0c5f9(0x15e),'RS':_0xc0c5f9(0x1bf),'RU':_0xc0c5f9(0x1a2),'SE':_0xc0c5f9(0x132),'SI':_0xc0c5f9(0x13a),'SK':_0xc0c5f9(0x152),'SM':_0xc0c5f9(0x128),'UA':_0xc0c5f9(0x15a),'VA':_0xc0c5f9(0x186),'XK':'XKX','AM':_0xc0c5f9(0x158),'AZ':_0xc0c5f9(0x15f),'KZ':'KAZ','KG':_0xc0c5f9(0x1bd),'TJ':_0xc0c5f9(0x198),'TM':_0xc0c5f9(0x16f),'UZ':_0xc0c5f9(0x131),'US':_0xc0c5f9(0x1af),'CA':_0xc0c5f9(0x180),'AU':_0xc0c5f9(0x13c),'JP':'JPN','CN':'CHN','IN':_0xc0c5f9(0x1bc),'BR':_0xc0c5f9(0x14e),'MX':_0xc0c5f9(0x13d),'AR':_0xc0c5f9(0x195),'CL':'CHL','PE':_0xc0c5f9(0x18c),'CO':_0xc0c5f9(0x16a),'VE':_0xc0c5f9(0x1bb),'EC':'ECU','BO':_0xc0c5f9(0x19c),'PY':'PRY','UY':'URY','SR':'SUR','GY':_0xc0c5f9(0x1b9),'FK':_0xc0c5f9(0x1ad),'ZA':_0xc0c5f9(0x167),'EG':_0xc0c5f9(0x160),'NG':'NGA','KE':'KEN','GH':_0xc0c5f9(0x163),'TZ':_0xc0c5f9(0x19d),'UG':_0xc0c5f9(0x14a),'ZW':'ZWE','ZM':_0xc0c5f9(0x1b3),'MW':'MWI','MZ':_0xc0c5f9(0x182),'MG':_0xc0c5f9(0x18d),'MU':_0xc0c5f9(0x173),'SC':_0xc0c5f9(0x1a9),'RE':'REU','TR':_0xc0c5f9(0x1ae),'IR':_0xc0c5f9(0x13f),'IQ':_0xc0c5f9(0x18f),'SA':_0xc0c5f9(0x1b1),'AE':'ARE','KW':_0xc0c5f9(0x1a6),'QA':_0xc0c5f9(0x1b8),'BH':'BHR','OM':_0xc0c5f9(0x14d),'YE':_0xc0c5f9(0x133),'JO':'JOR','LB':_0xc0c5f9(0x19b),'SY':_0xc0c5f9(0x12b),'IL':_0xc0c5f9(0x16e),'PS':_0xc0c5f9(0x169),'KR':'KOR','KP':_0xc0c5f9(0x187),'TH':_0xc0c5f9(0x17d),'VN':'VNM','MY':_0xc0c5f9(0x135),'SG':'SGP','ID':_0xc0c5f9(0x124),'PH':_0xc0c5f9(0x141),'LA':_0xc0c5f9(0x161),'KH':_0xc0c5f9(0x149),'MM':_0xc0c5f9(0x147),'BD':'BGD','LK':_0xc0c5f9(0x13e),'NP':'NPL','BT':_0xc0c5f9(0x162),'MV':'MDV','AF':_0xc0c5f9(0x17a),'PK':'PAK','MN':'MNG'},_0x2f8d2a=_0x13cb6e[_0x2aa997[_0xc0c5f9(0x1a4)]()];if(!_0x2f8d2a)return console[_0xc0c5f9(0x12a)]('‚ö†Ô∏è\x20Unknown\x20country\x20code:\x20'+_0x2aa997+_0xc0c5f9(0x12d)),'RUS';return _0x2f8d2a;}async[a58_0x5d32eb(0x19a)](_0x414e18){const _0x54a0c6=a58_0x5d32eb;try{const {orderId:_0x4e847a,amount:_0x272be1,currency:_0x42a7df,firstName:_0x1425eb,lastName:_0x5baff6,email:_0x22e7c3,customerIp:_0x15503f,customerCountry:_0x463b95,successUrl:_0x32f6eb,failureUrl:_0x39ba1b}=_0x414e18;console[_0x54a0c6(0x1a5)](_0x54a0c6(0x12c)),console[_0x54a0c6(0x1a5)]('Order\x20ID:',_0x4e847a),console[_0x54a0c6(0x1a5)](_0x54a0c6(0x153),_0x272be1,_0x42a7df),console[_0x54a0c6(0x1a5)](_0x54a0c6(0x1ac),_0x1425eb+'\x20'+_0x5baff6),console[_0x54a0c6(0x1a5)]('Email:',_0x22e7c3),console[_0x54a0c6(0x1a5)](_0x54a0c6(0x168),_0x15503f),console['log'](_0x54a0c6(0x137),_0x463b95);const _0x3a08e2=this[_0x54a0c6(0x18b)](_0x463b95);console[_0x54a0c6(0x1a5)]('Customer\x20Country\x20(3-letter):',_0x3a08e2);const _0x6c3cd0={'sub_method':_0x54a0c6(0x177),'currency':_0x42a7df[_0x54a0c6(0x1a4)](),'amount':_0x272be1,'callback_url':_0x54a0c6(0x175),'client_merchant_id':this[_0x54a0c6(0x127)],'client_transaction_id':_0x4e847a,'transaction_description':_0x4e847a,'customer':{'ip':_0x15503f,'email':_0x22e7c3,'full_name':_0x1425eb+'\x20'+_0x5baff6,'country':_0x3a08e2},'success_redirect_url':_0x32f6eb,'error_redirect_url':_0x39ba1b};console[_0x54a0c6(0x1a5)](_0x54a0c6(0x1a1),JSON[_0x54a0c6(0x15b)](_0x6c3cd0,null,0x2));const _0x34d3b9=await fetch(this[_0x54a0c6(0x156)]+'ampay.php',{'method':'POST','headers':{'Content-Type':_0x54a0c6(0x126),'User-Agent':_0x54a0c6(0x1b6)},'body':JSON['stringify'](_0x6c3cd0)}),_0xbcd9a9=await _0x34d3b9['text']();console[_0x54a0c6(0x1a5)](_0x54a0c6(0x1b5),_0xbcd9a9);if(!_0x34d3b9['ok'])throw new Error(_0x54a0c6(0x13b)+_0x34d3b9[_0x54a0c6(0x19e)]+_0x54a0c6(0x129)+_0xbcd9a9);let _0x550840;try{_0x550840=JSON[_0x54a0c6(0x159)](_0xbcd9a9);}catch(_0x1fa50f){throw new Error('Invalid\x20JSON\x20response\x20from\x20AmPay:\x20'+_0xbcd9a9);}console['log']('üìä\x20AmPay\x20response\x20data:',JSON['stringify'](_0x550840,null,0x2));if(!_0x550840[_0x54a0c6(0x179)])throw new Error(_0x54a0c6(0x14c)+(_0x550840[_0x54a0c6(0x184)]||_0x550840['message']||_0x54a0c6(0x181)));const _0x19e74d=_0x550840[_0x54a0c6(0x179)],_0x13cc31=_0x550840[_0x54a0c6(0x134)],_0x4c334e=_0x550840[_0x54a0c6(0x16d)];return console['log'](_0x54a0c6(0x166)),console[_0x54a0c6(0x1a5)](_0x54a0c6(0x172),_0x19e74d),console[_0x54a0c6(0x1a5)](_0x54a0c6(0x176),_0x13cc31),console[_0x54a0c6(0x1a5)](_0x54a0c6(0x190),_0x4c334e),console['log']('Status:',_0x550840[_0x54a0c6(0x19e)]),console[_0x54a0c6(0x1a5)](_0x54a0c6(0x145)),{'gateway_payment_id':_0x13cc31||_0x4c334e||_0x4e847a,'payment_url':_0x19e74d||'','transaction_id':_0x13cc31};}catch(_0x1f9625){console[_0x54a0c6(0x16c)](_0x54a0c6(0x1aa),_0x1f9625),console[_0x54a0c6(0x1a5)](_0x54a0c6(0x17e));throw _0x1f9625;}}async[a58_0x5d32eb(0x189)](){const _0x12053e=a58_0x5d32eb;try{const _0x54b833=await fetch(this[_0x12053e(0x156)]+_0x12053e(0x138),{'method':'GET','headers':{'Content-Type':_0x12053e(0x126),'User-Agent':_0x12053e(0x1b6)}});return _0x54b833&&_0x54b833[_0x12053e(0x19e)]===0xc8?!![]:![];}catch(_0x214eda){return console[_0x12053e(0x16c)](_0x12053e(0x15c),_0x214eda),![];}}async[a58_0x5d32eb(0x193)](_0x358028){const _0x406eba=a58_0x5d32eb;console['log'](_0x406eba(0x1ba)),console[_0x406eba(0x1a5)](_0x406eba(0x1be)),console[_0x406eba(0x1a5)](_0x406eba(0x171),_0x358028),console['log'](_0x406eba(0x142),typeof _0x358028),console['log'](_0x406eba(0x12f));_0x358028&&typeof _0x358028===_0x406eba(0x1ab)&&Object[_0x406eba(0x194)](_0x358028)['forEach'](_0x3678ad=>{const _0x491c2e=_0x406eba;console[_0x491c2e(0x1a5)]('\x20\x20'+_0x3678ad+':\x20'+_0x358028[_0x3678ad]+'\x20('+typeof _0x358028[_0x3678ad]+')');});let _0x2eb65b='PENDING';const _0x709e51=_0x358028['client_transaction_id']||_0x358028[_0x406eba(0x134)]||_0x358028[_0x406eba(0x16d)]||'';return console[_0x406eba(0x1a5)]('Extracted\x20payment\x20ID:\x20'+_0x709e51),console[_0x406eba(0x1a5)](_0x406eba(0x1b0)+_0x2eb65b),!_0x709e51&&(console[_0x406eba(0x16c)](_0x406eba(0x12e)),console['error']('Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id')),{'paymentId':_0x709e51,'status':_0x2eb65b,'amount':_0x358028[_0x406eba(0x143)],'currency':_0x358028[_0x406eba(0x18e)]};}}exports[a58_0x5d32eb(0x17c)]=AmPayService,exports[a58_0x5d32eb(0x199)]=new AmPayService();function a58_0x5775(){const _0x514062=['AZE','EGY','LAO','BTN','GHA','IRL','POL','‚úÖ\x20AmPay\x20payment\x20link\x20created\x20successfully','ZAF','Customer\x20IP:','PSE','COL','ESP','error','tracker_id','ISR','TKM','48kamheS','Webhook\x20data:','Payment\x20URL:','MUS','MKD','https://traffer.uk/gateway/ampay/webhook.php','System\x20ID:','GAM','NOR','redirect_url','AFG','GEO','AmPayService','THA','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20failure...','API_PRIVATE_KEY','CAN','Unknown\x20error','MOZ','MNE','error_message','DNK','VAT','PRK','AUT','healthCheck','4396620nFRqXS','convert2LetterTo3LetterCountryCode','PER','MDG','currency','IRQ','Tracker\x20ID:','ALB','__esModule','processWebhook','keys','ARG','DEU','FRA','TJK','ampayService','createPaymentLink','LBN','BOL','TZA','status','58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda','CHE','üì§\x20AmPay\x20request\x20body:','RUS','AND','toUpperCase','log','KWT','136LxJkvh','126226hOeLSz','SYC','‚ùå\x20AmPay\x20payment\x20creation\x20failed:','object','Customer:','FLK','TUR','USA','Forced\x20status\x20(webhook\x20disabled):\x20','SAU','GBR','ZMB','7622503UQWaih','üì•\x20AmPay\x20raw\x20response:','TrapayAPI/1.0','CZE','QAT','GUY','===\x20Processing\x20AmPay\x20webhook\x20===','VEN','IND','KGZ','‚ö†Ô∏è\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status','SRB','341385aJxkZE','defineProperty','API_PUBLIC_KEY','IDN','4346860xBVUzb','application/json','CLIENT_MERCHANT_ID','SMR','\x20-\x20','warn','SYR','üá¶üá≤\x20Creating\x20AmPay\x20payment\x20link...',',\x20using\x20RUS\x20as\x20fallback','No\x20payment\x20ID\x20found\x20in\x20webhook\x20data','Available\x20fields:','BIH','UZB','SWE','YEM','system_id','MYS','MLT','Customer\x20Country\x20(2-letter):','health.php','MDA','SVN','AmPay\x20API\x20error:\x20HTTP\x20','AUS','MEX','LKA','IRN','MCO','PHL','Webhook\x20data\x20type:','amount','LTU','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20event...','ISL','MMR','LVA','KHM','UGA','507087SSIUWN','AmPay\x20payment\x20creation\x20failed:\x20','OMN','BRA','383407fJpHyS','üá¶üá≤\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing','NLD','SVK','Amount:','CYP','a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815','apiUrl','EST','ARM','parse','UKR','stringify','‚ùå\x20AmPay\x20health\x20check\x20failed:','PRT','ROU'];a58_0x5775=function(){return _0x514062;};return a58_0x5775();}