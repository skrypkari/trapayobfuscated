'use strict';const a54_0x262479=a54_0xe05b;(function(_0x37014e,_0x4c9cbf){const _0x596bfa=a54_0xe05b,_0xd34b2a=_0x37014e();while(!![]){try{const _0x4d031e=parseInt(_0x596bfa(0x102))/0x1*(parseInt(_0x596bfa(0x114))/0x2)+-parseInt(_0x596bfa(0x137))/0x3*(-parseInt(_0x596bfa(0xf2))/0x4)+parseInt(_0x596bfa(0x129))/0x5+parseInt(_0x596bfa(0x13b))/0x6*(-parseInt(_0x596bfa(0x17d))/0x7)+-parseInt(_0x596bfa(0xfd))/0x8*(-parseInt(_0x596bfa(0x126))/0x9)+parseInt(_0x596bfa(0x14c))/0xa+-parseInt(_0x596bfa(0x145))/0xb;if(_0x4d031e===_0x4c9cbf)break;else _0xd34b2a['push'](_0xd34b2a['shift']());}catch(_0x5319f9){_0xd34b2a['push'](_0xd34b2a['shift']());}}}(a54_0x4ddf,0x5bd0e));Object[a54_0x262479(0x127)](exports,a54_0x262479(0x178),{'value':!![]}),exports[a54_0x262479(0x173)]=exports[a54_0x262479(0x116)]=void 0x0;function a54_0xe05b(_0x507176,_0x1712e2){_0x507176=_0x507176-0xd5;const _0x4ddf61=a54_0x4ddf();let _0xe05b1f=_0x4ddf61[_0x507176];return _0xe05b1f;}class AmPayService{constructor(){const _0x12774e=a54_0x262479;this['CLIENT_MERCHANT_ID']=_0x12774e(0x128),this['API_PUBLIC_KEY']=_0x12774e(0xf6),this[_0x12774e(0x172)]=_0x12774e(0x10e),this['apiUrl']=_0x12774e(0x14a),console[_0x12774e(0x149)](_0x12774e(0xda));}[a54_0x262479(0x17b)](_0x24e8b3){const _0x4c4532=a54_0x262479,_0x234aca={'AD':'AND','AL':'ALB','AT':_0x4c4532(0x132),'BA':'BIH','BE':_0x4c4532(0x164),'BG':_0x4c4532(0x118),'BY':_0x4c4532(0x158),'CH':_0x4c4532(0xdb),'CY':'CYP','CZ':_0x4c4532(0x13a),'DE':'DEU','DK':'DNK','EE':_0x4c4532(0x165),'ES':_0x4c4532(0x100),'FI':_0x4c4532(0x13f),'FR':'FRA','GB':_0x4c4532(0x162),'GE':_0x4c4532(0x146),'GR':_0x4c4532(0xf9),'HR':_0x4c4532(0xe5),'HU':_0x4c4532(0xd5),'IE':_0x4c4532(0x13c),'IS':_0x4c4532(0x152),'IT':_0x4c4532(0x14d),'LI':'LIE','LT':_0x4c4532(0xf0),'LU':_0x4c4532(0x11f),'LV':_0x4c4532(0xeb),'MC':'MCO','MD':_0x4c4532(0x136),'ME':'MNE','MK':_0x4c4532(0xdc),'MT':_0x4c4532(0xf7),'NL':_0x4c4532(0x14f),'NO':_0x4c4532(0x124),'PL':_0x4c4532(0x151),'PT':'PRT','RO':_0x4c4532(0x10a),'RS':'SRB','RU':'RUS','SE':_0x4c4532(0x135),'SI':_0x4c4532(0x16e),'SK':_0x4c4532(0x16d),'SM':_0x4c4532(0x121),'UA':_0x4c4532(0x108),'VA':_0x4c4532(0x155),'XK':_0x4c4532(0x14e),'AM':_0x4c4532(0x11c),'AZ':_0x4c4532(0x15d),'KZ':'KAZ','KG':_0x4c4532(0x105),'TJ':_0x4c4532(0xff),'TM':_0x4c4532(0x11d),'UZ':_0x4c4532(0xec),'US':_0x4c4532(0xd7),'CA':_0x4c4532(0x153),'AU':_0x4c4532(0x106),'JP':_0x4c4532(0x11e),'CN':'CHN','IN':_0x4c4532(0x131),'BR':'BRA','MX':_0x4c4532(0x139),'AR':_0x4c4532(0x12b),'CL':_0x4c4532(0x113),'PE':'PER','CO':'COL','VE':_0x4c4532(0x13d),'EC':_0x4c4532(0x163),'BO':_0x4c4532(0xea),'PY':'PRY','UY':_0x4c4532(0x119),'SR':_0x4c4532(0x180),'GY':_0x4c4532(0xe2),'FK':'FLK','ZA':_0x4c4532(0xfb),'EG':'EGY','NG':_0x4c4532(0x12c),'KE':_0x4c4532(0x112),'GH':'GHA','TZ':_0x4c4532(0xed),'UG':_0x4c4532(0x101),'ZW':_0x4c4532(0x16c),'ZM':_0x4c4532(0xef),'MW':'MWI','MZ':_0x4c4532(0x161),'MG':_0x4c4532(0xd8),'MU':'MUS','SC':_0x4c4532(0x15e),'RE':_0x4c4532(0x103),'TR':_0x4c4532(0x160),'IR':_0x4c4532(0x11a),'IQ':_0x4c4532(0xf5),'SA':_0x4c4532(0xd6),'AE':_0x4c4532(0x104),'KW':_0x4c4532(0x140),'QA':_0x4c4532(0x159),'BH':_0x4c4532(0x141),'OM':_0x4c4532(0xee),'YE':_0x4c4532(0x10d),'JO':_0x4c4532(0xdf),'LB':_0x4c4532(0x16a),'SY':_0x4c4532(0xd9),'IL':_0x4c4532(0x148),'PS':_0x4c4532(0xfc),'KR':_0x4c4532(0x170),'KP':'PRK','TH':'THA','VN':'VNM','MY':_0x4c4532(0x144),'SG':_0x4c4532(0x150),'ID':_0x4c4532(0x174),'PH':_0x4c4532(0xf4),'LA':_0x4c4532(0x175),'KH':_0x4c4532(0x12d),'MM':_0x4c4532(0x17a),'BD':'BGD','LK':_0x4c4532(0x15f),'NP':_0x4c4532(0x110),'BT':_0x4c4532(0x17c),'MV':_0x4c4532(0x16f),'AF':_0x4c4532(0x154),'PK':_0x4c4532(0xe1),'MN':_0x4c4532(0xdd)},_0x242c82=_0x234aca[_0x24e8b3['toUpperCase']()];if(!_0x242c82)return console[_0x4c4532(0x134)](_0x4c4532(0x13e)+_0x24e8b3+_0x4c4532(0xf3)),_0x4c4532(0xe3);return _0x242c82;}async[a54_0x262479(0x167)](_0x50a9c6){const _0x43bb72=a54_0x262479;try{const {orderId:_0x44d57d,amount:_0x222449,currency:_0x5b8fcd,firstName:_0x143e47,lastName:_0x135f95,email:_0xc6bd22,customerIp:_0x1108c5,customerCountry:_0x41ed92,successUrl:_0x269760,failureUrl:_0x2ad211}=_0x50a9c6;console[_0x43bb72(0x149)](_0x43bb72(0xde)),console['log'](_0x43bb72(0x133),_0x44d57d),console['log'](_0x43bb72(0x15a),_0x222449,_0x5b8fcd),console[_0x43bb72(0x149)](_0x43bb72(0x130),_0x143e47+'\x20'+_0x135f95),console['log'](_0x43bb72(0x157),_0xc6bd22),console[_0x43bb72(0x149)](_0x43bb72(0x15c),_0x1108c5),console[_0x43bb72(0x149)](_0x43bb72(0xf8),_0x41ed92);const _0x9711a9=this[_0x43bb72(0x17b)](_0x41ed92);console['log']('Customer\x20Country\x20(3-letter):',_0x9711a9);const _0xe2b65d={'sub_method':_0x43bb72(0xf1),'currency':_0x5b8fcd[_0x43bb72(0x12f)](),'amount':_0x222449,'callback_url':_0x43bb72(0x15b),'client_merchant_id':this['CLIENT_MERCHANT_ID'],'client_transaction_id':_0x44d57d,'transaction_description':_0x44d57d,'customer':{'ip':_0x1108c5,'email':_0xc6bd22,'full_name':_0x143e47+'\x20'+_0x135f95,'country':_0x9711a9},'success_redirect_url':_0x269760,'error_redirect_url':_0x2ad211};console[_0x43bb72(0x149)]('üì§\x20AmPay\x20request\x20body:',JSON[_0x43bb72(0x115)](_0xe2b65d,null,0x2));const _0x18f53f=await fetch(this[_0x43bb72(0x14b)]+'ampay.php',{'method':_0x43bb72(0x117),'headers':{'Content-Type':'application/json','User-Agent':_0x43bb72(0x138)},'body':JSON[_0x43bb72(0x115)](_0xe2b65d)}),_0x3f375b=await _0x18f53f[_0x43bb72(0x125)]();console[_0x43bb72(0x149)](_0x43bb72(0x168),_0x3f375b);if(!_0x18f53f['ok'])throw new Error(_0x43bb72(0xe7)+_0x18f53f[_0x43bb72(0x12e)]+_0x43bb72(0xe6)+_0x3f375b);let _0x175fe2;try{_0x175fe2=JSON[_0x43bb72(0x171)](_0x3f375b);}catch(_0x300d71){throw new Error(_0x43bb72(0x17f)+_0x3f375b);}console[_0x43bb72(0x149)](_0x43bb72(0xfe),JSON[_0x43bb72(0x115)](_0x175fe2,null,0x2));if(!_0x175fe2[_0x43bb72(0x177)])throw new Error(_0x43bb72(0x107)+(_0x175fe2[_0x43bb72(0x179)]||_0x175fe2[_0x43bb72(0x123)]||_0x43bb72(0xe9)));const _0x43c764=_0x175fe2[_0x43bb72(0x177)],_0x1f5556=_0x175fe2[_0x43bb72(0x11b)],_0x183a41=_0x175fe2[_0x43bb72(0xfa)];return console[_0x43bb72(0x149)](_0x43bb72(0x10f)),console['log'](_0x43bb72(0x12a),_0x43c764),console[_0x43bb72(0x149)](_0x43bb72(0xe0),_0x1f5556),console[_0x43bb72(0x149)]('Tracker\x20ID:',_0x183a41),console[_0x43bb72(0x149)](_0x43bb72(0x111),_0x175fe2[_0x43bb72(0x12e)]),console[_0x43bb72(0x149)](_0x43bb72(0x122)),{'gateway_payment_id':_0x1f5556||_0x183a41||_0x44d57d,'payment_url':_0x43c764||'','transaction_id':_0x1f5556};}catch(_0x3d791c){console[_0x43bb72(0xe8)]('‚ùå\x20AmPay\x20payment\x20creation\x20failed:',_0x3d791c),console['log'](_0x43bb72(0xe4));throw _0x3d791c;}}async[a54_0x262479(0x147)](){const _0x39fe7f=a54_0x262479;try{const _0x53b426=await fetch(this[_0x39fe7f(0x14b)]+_0x39fe7f(0x156),{'method':_0x39fe7f(0x10c),'headers':{'Content-Type':'application/json','User-Agent':'TrapayAPI/1.0'}});return _0x53b426&&_0x53b426[_0x39fe7f(0x12e)]===0xc8?!![]:![];}catch(_0x510768){return console[_0x39fe7f(0xe8)](_0x39fe7f(0x181),_0x510768),![];}}async['processWebhook'](_0x424287){const _0x29f76e=a54_0x262479;console[_0x29f76e(0x149)](_0x29f76e(0x143)),console['log']('‚ö†Ô∏è\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status'),console[_0x29f76e(0x149)](_0x29f76e(0x10b),_0x424287),console[_0x29f76e(0x149)](_0x29f76e(0x166),typeof _0x424287),console[_0x29f76e(0x149)](_0x29f76e(0x120));_0x424287&&typeof _0x424287===_0x29f76e(0x17e)&&Object['keys'](_0x424287)[_0x29f76e(0x176)](_0x3e02c3=>{const _0xf18466=_0x29f76e;console[_0xf18466(0x149)]('\x20\x20'+_0x3e02c3+':\x20'+_0x424287[_0x3e02c3]+'\x20('+typeof _0x424287[_0x3e02c3]+')');});let _0x4c2319='PENDING';const _0x21532d=_0x424287['client_transaction_id']||_0x424287['system_id']||_0x424287[_0x29f76e(0xfa)]||'';return console[_0x29f76e(0x149)](_0x29f76e(0x142)+_0x21532d),console[_0x29f76e(0x149)](_0x29f76e(0x16b)+_0x4c2319),!_0x21532d&&(console[_0x29f76e(0xe8)](_0x29f76e(0x169)),console[_0x29f76e(0xe8)]('Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id')),{'paymentId':_0x21532d,'status':_0x4c2319,'amount':_0x424287['amount'],'currency':_0x424287[_0x29f76e(0x109)]};}}exports['AmPayService']=AmPayService,exports['ampayService']=new AmPayService();function a54_0x4ddf(){const _0x3f1562=['SGP','POL','ISL','CAN','AFG','VAT','health.php','Email:','BLR','QAT','Amount:','https://traffer.uk/gateway/ampay/webhook.php','Customer\x20IP:','AZE','SYC','LKA','TUR','MOZ','GBR','ECU','BEL','EST','Webhook\x20data\x20type:','createPaymentLink','üì•\x20AmPay\x20raw\x20response:','No\x20payment\x20ID\x20found\x20in\x20webhook\x20data','LBN','Forced\x20status\x20(webhook\x20disabled):\x20','ZWE','SVK','SVN','MDV','KOR','parse','API_PRIVATE_KEY','ampayService','IDN','LAO','forEach','redirect_url','__esModule','error_message','MMR','convert2LetterTo3LetterCountryCode','BTN','1193983RjMEST','object','Invalid\x20JSON\x20response\x20from\x20AmPay:\x20','SUR','‚ùå\x20AmPay\x20health\x20check\x20failed:','HUN','SAU','USA','MDG','SYR','üá¶üá≤\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing','CHE','MKD','MNG','üá¶üá≤\x20Creating\x20AmPay\x20payment\x20link...','JOR','System\x20ID:','PAK','GUY','RUS','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20failure...','HRV','\x20-\x20','AmPay\x20API\x20error:\x20HTTP\x20','error','Unknown\x20error','BOL','LVA','UZB','TZA','OMN','ZMB','LTU','GAM','188ZcGfOT',',\x20using\x20RUS\x20as\x20fallback','PHL','IRQ','58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda','MLT','Customer\x20Country\x20(2-letter):','GRC','tracker_id','ZAF','PSE','4747928kaYwRs','üìä\x20AmPay\x20response\x20data:','TJK','ESP','UGA','419AqUbYT','REU','ARE','KGZ','AUS','AmPay\x20payment\x20creation\x20failed:\x20','UKR','currency','ROU','Webhook\x20data:','GET','YEM','a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815','‚úÖ\x20AmPay\x20payment\x20link\x20created\x20successfully','NPL','Status:','KEN','CHL','108scekIW','stringify','AmPayService','POST','BGR','URY','IRN','system_id','ARM','TKM','JPN','LUX','Available\x20fields:','SMR','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20event...','message','NOR','text','9jVpzou','defineProperty','TRAFFER','3513275rZGtDB','Payment\x20URL:','ARG','NGA','KHM','status','toUpperCase','Customer:','IND','AUT','Order\x20ID:','warn','SWE','MDA','37992COSEiN','TrapayAPI/1.0','MEX','CZE','6anHOsB','IRL','VEN','‚ö†Ô∏è\x20Unknown\x20country\x20code:\x20','FIN','KWT','BHR','Extracted\x20payment\x20ID:\x20','===\x20Processing\x20AmPay\x20webhook\x20===','MYS','15885518vzKKLZ','GEO','healthCheck','ISR','log','https://traffer.uk/gateway/ampay/','apiUrl','768050RJiTHG','ITA','XKX','NLD'];a54_0x4ddf=function(){return _0x3f1562;};return a54_0x4ddf();}