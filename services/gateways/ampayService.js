'use strict';const a52_0x270060=a52_0x1781;(function(_0x1b9e5d,_0x8d8916){const _0x466fab=a52_0x1781,_0x39e042=_0x1b9e5d();while(!![]){try{const _0x27f4fd=-parseInt(_0x466fab(0x1c0))/0x1+parseInt(_0x466fab(0x1ef))/0x2*(parseInt(_0x466fab(0x1b5))/0x3)+-parseInt(_0x466fab(0x1d3))/0x4+parseInt(_0x466fab(0x229))/0x5+-parseInt(_0x466fab(0x231))/0x6+-parseInt(_0x466fab(0x212))/0x7+parseInt(_0x466fab(0x22f))/0x8;if(_0x27f4fd===_0x8d8916)break;else _0x39e042['push'](_0x39e042['shift']());}catch(_0x26e1b3){_0x39e042['push'](_0x39e042['shift']());}}}(a52_0x25f1,0x1d5bf));Object[a52_0x270060(0x1cb)](exports,a52_0x270060(0x197),{'value':!![]}),exports[a52_0x270060(0x1fb)]=exports[a52_0x270060(0x20d)]=void 0x0;function a52_0x1781(_0x4327d5,_0x1f397b){_0x4327d5=_0x4327d5-0x191;const _0x25f17b=a52_0x25f1();let _0x17811c=_0x25f17b[_0x4327d5];return _0x17811c;}class AmPayService{constructor(){const _0x421361=a52_0x270060;this[_0x421361(0x1cc)]=_0x421361(0x1d4),this[_0x421361(0x226)]=_0x421361(0x1a4),this[_0x421361(0x1e0)]=_0x421361(0x1c1),this[_0x421361(0x215)]='https://traffer.uk/gateway/ampay/',console[_0x421361(0x1fa)](_0x421361(0x193));}[a52_0x270060(0x1f6)](_0x4976ec){const _0x32d5b8=a52_0x270060,_0x5adeb8={'AD':'AND','AL':_0x32d5b8(0x1cd),'AT':_0x32d5b8(0x1e6),'BA':_0x32d5b8(0x1dc),'BE':_0x32d5b8(0x1f4),'BG':_0x32d5b8(0x1b8),'BY':'BLR','CH':_0x32d5b8(0x228),'CY':_0x32d5b8(0x1df),'CZ':_0x32d5b8(0x230),'DE':_0x32d5b8(0x21c),'DK':_0x32d5b8(0x1a0),'EE':'EST','ES':_0x32d5b8(0x1e1),'FI':_0x32d5b8(0x20a),'FR':_0x32d5b8(0x1d5),'GB':_0x32d5b8(0x1be),'GE':'GEO','GR':_0x32d5b8(0x1d8),'HR':'HRV','HU':'HUN','IE':'IRL','IS':_0x32d5b8(0x20c),'IT':_0x32d5b8(0x1c7),'LI':_0x32d5b8(0x22e),'LT':_0x32d5b8(0x208),'LU':_0x32d5b8(0x207),'LV':_0x32d5b8(0x1f9),'MC':'MCO','MD':_0x32d5b8(0x22d),'ME':_0x32d5b8(0x1aa),'MK':'MKD','MT':_0x32d5b8(0x204),'NL':_0x32d5b8(0x194),'NO':'NOR','PL':_0x32d5b8(0x1ce),'PT':_0x32d5b8(0x206),'RO':_0x32d5b8(0x201),'RS':_0x32d5b8(0x1f3),'RU':_0x32d5b8(0x22b),'SE':_0x32d5b8(0x1fe),'SI':_0x32d5b8(0x1f5),'SK':_0x32d5b8(0x21b),'SM':'SMR','UA':'UKR','VA':'VAT','XK':'XKX','AM':_0x32d5b8(0x1c3),'AZ':_0x32d5b8(0x19e),'KZ':'KAZ','KG':_0x32d5b8(0x1d7),'TJ':_0x32d5b8(0x1ca),'TM':_0x32d5b8(0x20b),'UZ':_0x32d5b8(0x227),'US':_0x32d5b8(0x1b4),'CA':_0x32d5b8(0x1ab),'AU':_0x32d5b8(0x1e8),'JP':_0x32d5b8(0x224),'CN':'CHN','IN':_0x32d5b8(0x1ae),'BR':_0x32d5b8(0x19b),'MX':'MEX','AR':_0x32d5b8(0x1cf),'CL':_0x32d5b8(0x225),'PE':_0x32d5b8(0x1f8),'CO':_0x32d5b8(0x1fd),'VE':_0x32d5b8(0x1de),'EC':_0x32d5b8(0x1ed),'BO':_0x32d5b8(0x1af),'PY':_0x32d5b8(0x1dd),'UY':_0x32d5b8(0x203),'SR':_0x32d5b8(0x1e2),'GY':_0x32d5b8(0x22c),'FK':_0x32d5b8(0x1db),'ZA':_0x32d5b8(0x195),'EG':_0x32d5b8(0x1c2),'NG':_0x32d5b8(0x199),'KE':_0x32d5b8(0x192),'GH':_0x32d5b8(0x1a6),'TZ':_0x32d5b8(0x1b3),'UG':_0x32d5b8(0x211),'ZW':'ZWE','ZM':_0x32d5b8(0x1c6),'MW':_0x32d5b8(0x1a8),'MZ':'MOZ','MG':'MDG','MU':_0x32d5b8(0x1e5),'SC':_0x32d5b8(0x1f1),'RE':_0x32d5b8(0x219),'TR':_0x32d5b8(0x1f2),'IR':_0x32d5b8(0x216),'IQ':'IRQ','SA':_0x32d5b8(0x20e),'AE':_0x32d5b8(0x1a2),'KW':_0x32d5b8(0x21a),'QA':_0x32d5b8(0x1fc),'BH':_0x32d5b8(0x1a7),'OM':'OMN','YE':_0x32d5b8(0x1a9),'JO':_0x32d5b8(0x1eb),'LB':'LBN','SY':'SYR','IL':_0x32d5b8(0x1d0),'PS':'PSE','KR':_0x32d5b8(0x1ad),'KP':_0x32d5b8(0x1c9),'TH':_0x32d5b8(0x1ac),'VN':'VNM','MY':_0x32d5b8(0x202),'SG':'SGP','ID':_0x32d5b8(0x1c8),'PH':_0x32d5b8(0x223),'LA':'LAO','KH':_0x32d5b8(0x1a1),'MM':_0x32d5b8(0x222),'BD':'BGD','LK':_0x32d5b8(0x1c5),'NP':'NPL','BT':_0x32d5b8(0x1ee),'MV':_0x32d5b8(0x1b7),'AF':_0x32d5b8(0x1b1),'PK':_0x32d5b8(0x1b6),'MN':'MNG'},_0x35c6bb=_0x5adeb8[_0x4976ec[_0x32d5b8(0x191)]()];if(!_0x35c6bb)return console[_0x32d5b8(0x214)](_0x32d5b8(0x1d9)+_0x4976ec+_0x32d5b8(0x20f)),_0x32d5b8(0x22b);return _0x35c6bb;}async[a52_0x270060(0x200)](_0x4292dc){const _0x1cf7e8=a52_0x270060;try{const {orderId:_0x7310ca,amount:_0x155421,currency:_0x57c153,firstName:_0x41e39e,lastName:_0x551e35,email:_0x2a1d2d,customerIp:_0x475702,customerCountry:_0x45911d,successUrl:_0x34f32f,failureUrl:_0x9436cd}=_0x4292dc;console[_0x1cf7e8(0x1fa)](_0x1cf7e8(0x217)),console[_0x1cf7e8(0x1fa)](_0x1cf7e8(0x198),_0x7310ca),console[_0x1cf7e8(0x1fa)](_0x1cf7e8(0x1a5),_0x155421,_0x57c153),console[_0x1cf7e8(0x1fa)](_0x1cf7e8(0x1bd),_0x41e39e+'\x20'+_0x551e35),console['log'](_0x1cf7e8(0x19a),_0x2a1d2d),console[_0x1cf7e8(0x1fa)](_0x1cf7e8(0x1d6),_0x475702),console[_0x1cf7e8(0x1fa)](_0x1cf7e8(0x1d1),_0x45911d);const _0x221ff2=this[_0x1cf7e8(0x1f6)](_0x45911d);console[_0x1cf7e8(0x1fa)](_0x1cf7e8(0x21e),_0x221ff2);const _0x24232d={'sub_method':_0x1cf7e8(0x1b0),'currency':_0x57c153['toUpperCase'](),'amount':_0x155421,'callback_url':'https://traffer.uk/gateway/ampay/webhook.php','client_merchant_id':this[_0x1cf7e8(0x1cc)],'client_transaction_id':_0x7310ca,'transaction_description':_0x7310ca,'customer':{'ip':_0x475702,'email':_0x2a1d2d,'full_name':_0x41e39e+'\x20'+_0x551e35,'country':_0x221ff2},'success_redirect_url':_0x34f32f,'error_redirect_url':_0x9436cd};console['log'](_0x1cf7e8(0x21d),JSON[_0x1cf7e8(0x218)](_0x24232d,null,0x2));const _0x2b2f1d=await fetch(this[_0x1cf7e8(0x215)]+'ampay.php',{'method':'POST','headers':{'Content-Type':_0x1cf7e8(0x1ba),'User-Agent':_0x1cf7e8(0x196)},'body':JSON[_0x1cf7e8(0x218)](_0x24232d)}),_0x2c7ca9=await _0x2b2f1d['text']();console[_0x1cf7e8(0x1fa)](_0x1cf7e8(0x1e3),_0x2c7ca9);if(!_0x2b2f1d['ok'])throw new Error(_0x1cf7e8(0x1e4)+_0x2b2f1d[_0x1cf7e8(0x1c4)]+_0x1cf7e8(0x209)+_0x2c7ca9);let _0x24189a;try{_0x24189a=JSON['parse'](_0x2c7ca9);}catch(_0x594568){throw new Error(_0x1cf7e8(0x1bf)+_0x2c7ca9);}console[_0x1cf7e8(0x1fa)](_0x1cf7e8(0x1f7),JSON['stringify'](_0x24189a,null,0x2));if(!_0x24189a[_0x1cf7e8(0x19f)])throw new Error(_0x1cf7e8(0x1b9)+(_0x24189a[_0x1cf7e8(0x213)]||_0x24189a['message']||'Unknown\x20error'));const _0x4b3ee8=_0x24189a[_0x1cf7e8(0x19f)],_0x543e56=_0x24189a[_0x1cf7e8(0x1ea)],_0x403361=_0x24189a['tracker_id'];return console['log']('‚úÖ\x20AmPay\x20payment\x20link\x20created\x20successfully'),console[_0x1cf7e8(0x1fa)](_0x1cf7e8(0x1e9),_0x4b3ee8),console['log']('System\x20ID:',_0x543e56),console[_0x1cf7e8(0x1fa)](_0x1cf7e8(0x221),_0x403361),console[_0x1cf7e8(0x1fa)](_0x1cf7e8(0x19c),_0x24189a['status']),console[_0x1cf7e8(0x1fa)](_0x1cf7e8(0x1ec)),{'gateway_payment_id':_0x543e56||_0x403361||_0x7310ca,'payment_url':_0x4b3ee8||'','transaction_id':_0x543e56};}catch(_0x1807ba){console[_0x1cf7e8(0x1f0)](_0x1cf7e8(0x1bc),_0x1807ba),console[_0x1cf7e8(0x1fa)](_0x1cf7e8(0x1e7));throw _0x1807ba;}}async[a52_0x270060(0x1a3)](){const _0xce1e2b=a52_0x270060;try{const _0x52aeee=await fetch(this[_0xce1e2b(0x215)]+'health.php',{'method':_0xce1e2b(0x19d),'headers':{'Content-Type':'application/json','User-Agent':_0xce1e2b(0x196)}});return _0x52aeee&&_0x52aeee['status']===0xc8?!![]:![];}catch(_0x2b028a){return console[_0xce1e2b(0x1f0)]('‚ùå\x20AmPay\x20health\x20check\x20failed:',_0x2b028a),![];}}async[a52_0x270060(0x21f)](_0x1a2f38){const _0xa6519f=a52_0x270060;console['log']('===\x20Processing\x20AmPay\x20webhook\x20==='),console[_0xa6519f(0x1fa)]('‚ö†Ô∏è\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status'),console[_0xa6519f(0x1fa)]('Webhook\x20data:',_0x1a2f38),console[_0xa6519f(0x1fa)](_0xa6519f(0x1ff),typeof _0x1a2f38),console[_0xa6519f(0x1fa)](_0xa6519f(0x1b2));_0x1a2f38&&typeof _0x1a2f38===_0xa6519f(0x22a)&&Object['keys'](_0x1a2f38)['forEach'](_0x1a2dc9=>{console['log']('\x20\x20'+_0x1a2dc9+':\x20'+_0x1a2f38[_0x1a2dc9]+'\x20('+typeof _0x1a2f38[_0x1a2dc9]+')');});let _0x45d0f5=_0xa6519f(0x1bb);const _0x5829d4=_0x1a2f38[_0xa6519f(0x210)]||_0x1a2f38[_0xa6519f(0x1ea)]||_0x1a2f38[_0xa6519f(0x1da)]||'';return console['log'](_0xa6519f(0x1d2)+_0x5829d4),console['log']('Forced\x20status\x20(webhook\x20disabled):\x20'+_0x45d0f5),!_0x5829d4&&(console[_0xa6519f(0x1f0)](_0xa6519f(0x205)),console[_0xa6519f(0x1f0)]('Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id')),{'paymentId':_0x5829d4,'status':_0x45d0f5,'amount':_0x1a2f38[_0xa6519f(0x220)],'currency':_0x1a2f38['currency']};}}exports[a52_0x270060(0x20d)]=AmPayService,exports['ampayService']=new AmPayService();function a52_0x25f1(){const _0x3623f9=['error','SYC','TUR','SRB','BEL','SVN','convert2LetterTo3LetterCountryCode','üìä\x20AmPay\x20response\x20data:','PER','LVA','log','ampayService','QAT','COL','SWE','Webhook\x20data\x20type:','createPaymentLink','ROU','MYS','URY','MLT','No\x20payment\x20ID\x20found\x20in\x20webhook\x20data','PRT','LUX','LTU','\x20-\x20','FIN','TKM','ISL','AmPayService','SAU',',\x20using\x20RUS\x20as\x20fallback','client_transaction_id','UGA','1154951LRDHFW','error_message','warn','apiUrl','IRN','üá¶üá≤\x20Creating\x20AmPay\x20payment\x20link...','stringify','REU','KWT','SVK','DEU','üì§\x20AmPay\x20request\x20body:','Customer\x20Country\x20(3-letter):','processWebhook','amount','Tracker\x20ID:','MMR','PHL','JPN','CHL','API_PUBLIC_KEY','UZB','CHE','800780QGvltt','object','RUS','GUY','MDA','LIE','2514240dMIkLy','CZE','1027638ubZrJl','toUpperCase','KEN','üá¶üá≤\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing','NLD','ZAF','TrapayAPI/1.0','__esModule','Order\x20ID:','NGA','Email:','BRA','Status:','GET','AZE','redirect_url','DNK','KHM','ARE','healthCheck','58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda','Amount:','GHA','BHR','MWI','YEM','MNE','CAN','THA','KOR','IND','BOL','GAM','AFG','Available\x20fields:','TZA','USA','203538gPUxzk','PAK','MDV','BGR','AmPay\x20payment\x20creation\x20failed:\x20','application/json','PENDING','‚ùå\x20AmPay\x20payment\x20creation\x20failed:','Customer:','GBR','Invalid\x20JSON\x20response\x20from\x20AmPay:\x20','140057amaUbw','a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815','EGY','ARM','status','LKA','ZMB','ITA','IDN','PRK','TJK','defineProperty','CLIENT_MERCHANT_ID','ALB','POL','ARG','ISR','Customer\x20Country\x20(2-letter):','Extracted\x20payment\x20ID:\x20','54200WhuYBi','TRAFFER','FRA','Customer\x20IP:','KGZ','GRC','‚ö†Ô∏è\x20Unknown\x20country\x20code:\x20','tracker_id','FLK','BIH','PRY','VEN','CYP','API_PRIVATE_KEY','ESP','SUR','üì•\x20AmPay\x20raw\x20response:','AmPay\x20API\x20error:\x20HTTP\x20','MUS','AUT','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20failure...','AUS','Payment\x20URL:','system_id','JOR','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20event...','ECU','BTN','4sezlPY'];a52_0x25f1=function(){return _0x3623f9;};return a52_0x25f1();}