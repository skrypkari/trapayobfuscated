'use strict';function a62_0x4813(_0x3aeb0f,_0x41f8b){_0x3aeb0f=_0x3aeb0f-0x1cb;const _0x434f1b=a62_0x434f();let _0x481377=_0x434f1b[_0x3aeb0f];return _0x481377;}function a62_0x434f(){const _0x1e0967=['stringify','âŒ\x20AmPay\x20health\x20check\x20failed:','ARG','convert2LetterTo3LetterCountryCode','CHE','PAK','createPaymentLink','NOR','No\x20payment\x20ID\x20found\x20in\x20webhook\x20data','Forced\x20status\x20(webhook\x20disabled):\x20','URY','SGP','health.php','AmPay\x20payment\x20creation\x20failed:\x20','PER','UZB','1HARWFP','âŒ\x20AmPay\x20payment\x20creation\x20failed:','ZMB','COL','SRB','KHM','SAU','error_message','HUN','Webhook\x20data:','Available\x20fields:','defineProperty','BGD','error','apiUrl','LTU','TKM','ðŸ“\x20Logging\x20AmPay\x20payment\x20creation\x20event...','MKD','KGZ','log','ðŸ“Š\x20AmPay\x20response\x20data:','âš ï¸\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status','a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815','Customer\x20IP:','RUS','8zhJUAa','API_PRIVATE_KEY','Payment\x20URL:','VAT','client_transaction_id','GEO','VEN','AFG','YEM','===\x20Processing\x20AmPay\x20webhook\x20===','SYR','MLT','2356506LWlRkH',',\x20using\x20RUS\x20as\x20fallback','ARM','QAT','ðŸ“¤\x20AmPay\x20request\x20body:','XKX','AmPay\x20API\x20error:\x20HTTP\x20','448274WKESts','\x20-\x20','3717126uCmtil','Email:','SMR','PHL','ISL','DEU','GAM','ampay.php','3419965JeYaLP','SUR','BTN','CYP','Order\x20ID:','BEL','REU','MDA','AZE','LVA','MMR','IND','healthCheck','forEach','GET','Invalid\x20JSON\x20response\x20from\x20AmPay:\x20','THA','MDG','ðŸ‡¦ðŸ‡²\x20Creating\x20AmPay\x20payment\x20link...','toUpperCase','KAZ','system_id','GBR','LIE','CZE','EGY','EST','ALB','ðŸ‡¦ðŸ‡²\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing','AUS','TRAFFER','UGA','CLIENT_MERCHANT_ID','redirect_url','TrapayAPI/1.0','MUS','FLK','application/json','PSE','BRA','https://traffer.uk/gateway/ampay/','MEX','parse','ECU','PRY','warn','PRT','API_PUBLIC_KEY','TUR','ampayService','Status:','Amount:','Tracker\x20ID:','MNG','status','GHA','KWT','System\x20ID:','CHN','Unknown\x20error','MYS','Customer\x20Country\x20(2-letter):','GRC','ðŸ“\x20Logging\x20AmPay\x20payment\x20creation\x20failure...','Customer\x20Country\x20(3-letter):','21604940oONvXu','699954eTAwmU','KOR','SWE','BIH','currency','ISR','HRV','TJK','LBN','4915128AIUENw','MOZ','USA','LKA','IRL','MWI','FRA','tracker_id','6rhPPrs','SYC','object','LAO','Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id','text','NGA'];a62_0x434f=function(){return _0x1e0967;};return a62_0x434f();}const a62_0x2494af=a62_0x4813;(function(_0x1c7676,_0x13a744){const _0xea8203=a62_0x4813,_0x47a7f3=_0x1c7676();while(!![]){try{const _0x253034=-parseInt(_0xea8203(0x206))/0x1*(-parseInt(_0xea8203(0x233))/0x2)+parseInt(_0xea8203(0x1de))/0x3*(-parseInt(_0xea8203(0x220))/0x4)+parseInt(_0xea8203(0x23d))/0x5*(-parseInt(_0xea8203(0x1ef))/0x6)+-parseInt(_0xea8203(0x235))/0x7+-parseInt(_0xea8203(0x1e7))/0x8+parseInt(_0xea8203(0x22c))/0x9+parseInt(_0xea8203(0x1dd))/0xa;if(_0x253034===_0x13a744)break;else _0x47a7f3['push'](_0x47a7f3['shift']());}catch(_0x2ca443){_0x47a7f3['push'](_0x47a7f3['shift']());}}}(a62_0x434f,0x558db));Object[a62_0x2494af(0x211)](exports,'__esModule',{'value':!![]}),exports['ampayService']=exports['AmPayService']=void 0x0;class AmPayService{constructor(){const _0x4fa88e=a62_0x2494af;this['CLIENT_MERCHANT_ID']=_0x4fa88e(0x25b),this[_0x4fa88e(0x1cb)]='58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda',this[_0x4fa88e(0x221)]=_0x4fa88e(0x21d),this['apiUrl']=_0x4fa88e(0x265),console[_0x4fa88e(0x21a)](_0x4fa88e(0x259));}[a62_0x2494af(0x1f9)](_0x1f6c2b){const _0x1f1313=a62_0x2494af,_0x5a63d4={'AD':'AND','AL':_0x1f1313(0x258),'AT':'AUT','BA':_0x1f1313(0x1e1),'BE':_0x1f1313(0x242),'BG':'BGR','BY':'BLR','CH':_0x1f1313(0x1fa),'CY':_0x1f1313(0x240),'CZ':_0x1f1313(0x255),'DE':_0x1f1313(0x23a),'DK':'DNK','EE':_0x1f1313(0x257),'ES':'ESP','FI':'FIN','FR':_0x1f1313(0x1ed),'GB':_0x1f1313(0x253),'GE':_0x1f1313(0x225),'GR':_0x1f1313(0x1da),'HR':_0x1f1313(0x1e4),'HU':_0x1f1313(0x20e),'IE':_0x1f1313(0x1eb),'IS':_0x1f1313(0x239),'IT':'ITA','LI':_0x1f1313(0x254),'LT':_0x1f1313(0x215),'LU':'LUX','LV':_0x1f1313(0x246),'MC':'MCO','MD':_0x1f1313(0x244),'ME':'MNE','MK':_0x1f1313(0x218),'MT':_0x1f1313(0x22b),'NL':'NLD','NO':_0x1f1313(0x1fd),'PL':'POL','PT':_0x1f1313(0x26b),'RO':'ROU','RS':_0x1f1313(0x20a),'RU':_0x1f1313(0x21f),'SE':_0x1f1313(0x1e0),'SI':'SVN','SK':'SVK','SM':_0x1f1313(0x237),'UA':'UKR','VA':_0x1f1313(0x223),'XK':_0x1f1313(0x231),'AM':_0x1f1313(0x22e),'AZ':_0x1f1313(0x245),'KZ':_0x1f1313(0x251),'KG':_0x1f1313(0x219),'TJ':_0x1f1313(0x1e5),'TM':_0x1f1313(0x216),'UZ':_0x1f1313(0x205),'US':_0x1f1313(0x1e9),'CA':'CAN','AU':_0x1f1313(0x25a),'JP':'JPN','CN':_0x1f1313(0x1d6),'IN':_0x1f1313(0x248),'BR':_0x1f1313(0x264),'MX':_0x1f1313(0x266),'AR':_0x1f1313(0x1f8),'CL':'CHL','PE':_0x1f1313(0x204),'CO':_0x1f1313(0x209),'VE':_0x1f1313(0x226),'EC':_0x1f1313(0x268),'BO':'BOL','PY':_0x1f1313(0x269),'UY':_0x1f1313(0x200),'SR':_0x1f1313(0x23e),'GY':'GUY','FK':_0x1f1313(0x261),'ZA':'ZAF','EG':_0x1f1313(0x256),'NG':_0x1f1313(0x1f5),'KE':'KEN','GH':_0x1f1313(0x1d3),'TZ':'TZA','UG':_0x1f1313(0x25c),'ZW':'ZWE','ZM':_0x1f1313(0x208),'MW':_0x1f1313(0x1ec),'MZ':_0x1f1313(0x1e8),'MG':_0x1f1313(0x24e),'MU':_0x1f1313(0x260),'SC':_0x1f1313(0x1f0),'RE':_0x1f1313(0x243),'TR':_0x1f1313(0x1cc),'IR':'IRN','IQ':'IRQ','SA':_0x1f1313(0x20c),'AE':'ARE','KW':_0x1f1313(0x1d4),'QA':_0x1f1313(0x22f),'BH':'BHR','OM':'OMN','YE':_0x1f1313(0x228),'JO':'JOR','LB':_0x1f1313(0x1e6),'SY':_0x1f1313(0x22a),'IL':_0x1f1313(0x1e3),'PS':_0x1f1313(0x263),'KR':_0x1f1313(0x1df),'KP':'PRK','TH':_0x1f1313(0x24d),'VN':'VNM','MY':_0x1f1313(0x1d8),'SG':_0x1f1313(0x201),'ID':'IDN','PH':_0x1f1313(0x238),'LA':_0x1f1313(0x1f2),'KH':_0x1f1313(0x20b),'MM':_0x1f1313(0x247),'BD':_0x1f1313(0x212),'LK':_0x1f1313(0x1ea),'NP':'NPL','BT':_0x1f1313(0x23f),'MV':'MDV','AF':_0x1f1313(0x227),'PK':_0x1f1313(0x1fb),'MN':_0x1f1313(0x1d1)},_0x89801=_0x5a63d4[_0x1f6c2b[_0x1f1313(0x250)]()];if(!_0x89801)return console[_0x1f1313(0x26a)]('âš ï¸\x20Unknown\x20country\x20code:\x20'+_0x1f6c2b+_0x1f1313(0x22d)),_0x1f1313(0x21f);return _0x89801;}async[a62_0x2494af(0x1fc)](_0x1340c8){const _0xe9dde4=a62_0x2494af;try{const {orderId:_0x1676eb,amount:_0x67ffa7,currency:_0x244de7,firstName:_0x517628,lastName:_0x5b0ee6,email:_0x5ddc52,customerIp:_0x716806,customerCountry:_0x11b972,successUrl:_0x323549,failureUrl:_0x4b40f7}=_0x1340c8;console[_0xe9dde4(0x21a)](_0xe9dde4(0x24f)),console[_0xe9dde4(0x21a)](_0xe9dde4(0x241),_0x1676eb),console['log'](_0xe9dde4(0x1cf),_0x67ffa7,_0x244de7),console['log']('Customer:',_0x517628+'\x20'+_0x5b0ee6),console[_0xe9dde4(0x21a)](_0xe9dde4(0x236),_0x5ddc52),console[_0xe9dde4(0x21a)](_0xe9dde4(0x21e),_0x716806),console['log'](_0xe9dde4(0x1d9),_0x11b972);const _0x8394d3=this[_0xe9dde4(0x1f9)](_0x11b972);console[_0xe9dde4(0x21a)](_0xe9dde4(0x1dc),_0x8394d3);const _0x56d3c2={'sub_method':_0xe9dde4(0x23b),'currency':_0x244de7['toUpperCase'](),'amount':_0x67ffa7,'callback_url':'https://traffer.uk/gateway/ampay/webhook.php','client_merchant_id':this[_0xe9dde4(0x25d)],'client_transaction_id':_0x1676eb,'transaction_description':_0x1676eb,'customer':{'ip':_0x716806,'email':_0x5ddc52,'full_name':_0x517628+'\x20'+_0x5b0ee6,'country':_0x8394d3},'success_redirect_url':_0x323549,'error_redirect_url':_0x4b40f7};console[_0xe9dde4(0x21a)](_0xe9dde4(0x230),JSON[_0xe9dde4(0x1f6)](_0x56d3c2,null,0x2));const _0x5d8ce4=await fetch(this[_0xe9dde4(0x214)]+_0xe9dde4(0x23c),{'method':'POST','headers':{'Content-Type':_0xe9dde4(0x262),'User-Agent':_0xe9dde4(0x25f)},'body':JSON[_0xe9dde4(0x1f6)](_0x56d3c2)}),_0x5dd0b8=await _0x5d8ce4[_0xe9dde4(0x1f4)]();console[_0xe9dde4(0x21a)]('ðŸ“¥\x20AmPay\x20raw\x20response:',_0x5dd0b8);if(!_0x5d8ce4['ok'])throw new Error(_0xe9dde4(0x232)+_0x5d8ce4[_0xe9dde4(0x1d2)]+_0xe9dde4(0x234)+_0x5dd0b8);let _0x30ced2;try{_0x30ced2=JSON[_0xe9dde4(0x267)](_0x5dd0b8);}catch(_0x19c417){throw new Error(_0xe9dde4(0x24c)+_0x5dd0b8);}console[_0xe9dde4(0x21a)](_0xe9dde4(0x21b),JSON[_0xe9dde4(0x1f6)](_0x30ced2,null,0x2));if(!_0x30ced2[_0xe9dde4(0x25e)])throw new Error(_0xe9dde4(0x203)+(_0x30ced2[_0xe9dde4(0x20d)]||_0x30ced2['message']||_0xe9dde4(0x1d7)));const _0x3a1c42=_0x30ced2['redirect_url'],_0x4d6d6d=_0x30ced2[_0xe9dde4(0x252)],_0x5c9fda=_0x30ced2[_0xe9dde4(0x1ee)];return console[_0xe9dde4(0x21a)]('âœ…\x20AmPay\x20payment\x20link\x20created\x20successfully'),console[_0xe9dde4(0x21a)](_0xe9dde4(0x222),_0x3a1c42),console[_0xe9dde4(0x21a)](_0xe9dde4(0x1d5),_0x4d6d6d),console['log'](_0xe9dde4(0x1d0),_0x5c9fda),console['log'](_0xe9dde4(0x1ce),_0x30ced2['status']),console[_0xe9dde4(0x21a)](_0xe9dde4(0x217)),{'gateway_payment_id':_0x4d6d6d||_0x5c9fda||_0x1676eb,'payment_url':_0x3a1c42||'','transaction_id':_0x4d6d6d};}catch(_0x2e4925){console[_0xe9dde4(0x213)](_0xe9dde4(0x207),_0x2e4925),console[_0xe9dde4(0x21a)](_0xe9dde4(0x1db));throw _0x2e4925;}}async[a62_0x2494af(0x249)](){const _0x1a816f=a62_0x2494af;try{const _0x768901=await fetch(this['apiUrl']+_0x1a816f(0x202),{'method':_0x1a816f(0x24b),'headers':{'Content-Type':_0x1a816f(0x262),'User-Agent':_0x1a816f(0x25f)}});return _0x768901&&_0x768901['status']===0xc8?!![]:![];}catch(_0x50f334){return console[_0x1a816f(0x213)](_0x1a816f(0x1f7),_0x50f334),![];}}async['processWebhook'](_0x552aad){const _0x2f419a=a62_0x2494af;console[_0x2f419a(0x21a)](_0x2f419a(0x229)),console[_0x2f419a(0x21a)](_0x2f419a(0x21c)),console[_0x2f419a(0x21a)](_0x2f419a(0x20f),_0x552aad),console['log']('Webhook\x20data\x20type:',typeof _0x552aad),console[_0x2f419a(0x21a)](_0x2f419a(0x210));_0x552aad&&typeof _0x552aad===_0x2f419a(0x1f1)&&Object['keys'](_0x552aad)[_0x2f419a(0x24a)](_0x11fb57=>{const _0x490bf1=_0x2f419a;console[_0x490bf1(0x21a)]('\x20\x20'+_0x11fb57+':\x20'+_0x552aad[_0x11fb57]+'\x20('+typeof _0x552aad[_0x11fb57]+')');});let _0x1797f5='PENDING';const _0x31d378=_0x552aad[_0x2f419a(0x224)]||_0x552aad[_0x2f419a(0x252)]||_0x552aad[_0x2f419a(0x1ee)]||'';return console[_0x2f419a(0x21a)]('Extracted\x20payment\x20ID:\x20'+_0x31d378),console['log'](_0x2f419a(0x1ff)+_0x1797f5),!_0x31d378&&(console[_0x2f419a(0x213)](_0x2f419a(0x1fe)),console[_0x2f419a(0x213)](_0x2f419a(0x1f3))),{'paymentId':_0x31d378,'status':_0x1797f5,'amount':_0x552aad['amount'],'currency':_0x552aad[_0x2f419a(0x1e2)]};}}exports['AmPayService']=AmPayService,exports[a62_0x2494af(0x1cd)]=new AmPayService();