'use strict';const a46_0x250fdd=a46_0x2310;(function(_0x5cff04,_0x79eb03){const _0x2b8f4d=a46_0x2310,_0x35f342=_0x5cff04();while(!![]){try{const _0x46a48f=-parseInt(_0x2b8f4d(0xe8))/0x1+-parseInt(_0x2b8f4d(0x9f))/0x2*(-parseInt(_0x2b8f4d(0xce))/0x3)+-parseInt(_0x2b8f4d(0x113))/0x4*(parseInt(_0x2b8f4d(0x132))/0x5)+parseInt(_0x2b8f4d(0x10b))/0x6+-parseInt(_0x2b8f4d(0x12a))/0x7*(parseInt(_0x2b8f4d(0xbe))/0x8)+parseInt(_0x2b8f4d(0x12e))/0x9+-parseInt(_0x2b8f4d(0x11e))/0xa*(parseInt(_0x2b8f4d(0xf0))/0xb);if(_0x46a48f===_0x79eb03)break;else _0x35f342['push'](_0x35f342['shift']());}catch(_0x4d7974){_0x35f342['push'](_0x35f342['shift']());}}}(a46_0xfe8c,0xd8029));function a46_0xfe8c(){const _0x6ce44d=['parse','SWE','MDG','TUR','ampayService','Extracted\x20payment\x20ID:\x20','BLR','BHR','GRC','9320184OtRZQu','convert2LetterTo3LetterCountryCode','KGZ','AUT','createPaymentLink','BIH','KHM','AFG','219636LsDVxR','THA','GET','AZE','ESP','MEX','COL','LKA','keys','USA','Unknown\x20error','145850lIzNba','CLIENT_MERCHANT_ID','UZB','API_PRIVATE_KEY','BRA','redirect_url','üá¶üá≤\x20Creating\x20AmPay\x20payment\x20link...','tracker_id','SGP','RUS','Tracker\x20ID:','GHA','21kdbNKe','ZWE','toUpperCase','PENDING','10085112yzSwgR','log','TZA','Webhook\x20data\x20type:','115uNQyNs','ARG','message','application/json','XKX','CAN','MMR','REU','Forced\x20status\x20(webhook\x20disabled):\x20',',\x20using\x20RUS\x20as\x20fallback','TRAFFER','error','GUY','NGA','__esModule','üì•\x20AmPay\x20raw\x20response:','UKR','TKM','IRQ','forEach','AND','Status:','6sghwzv','OMN','üì§\x20AmPay\x20request\x20body:','MUS','LIE','‚ùå\x20AmPay\x20health\x20check\x20failed:','SAU','üìä\x20AmPay\x20response\x20data:','AmPayService','SVK','FRA','JOR','system_id','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20event...','GBR','Amount:','üá¶üá≤\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing','warn','\x20-\x20','ARM','ALB','BGR','IRL','NPL','===\x20Processing\x20AmPay\x20webhook\x20===','ITA','TrapayAPI/1.0','DEU','MNE','VAT','YEM','239960fQkVEz','BGD','KOR','FLK','object','SUR','System\x20ID:','58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda','IND','‚ùå\x20AmPay\x20payment\x20creation\x20failed:','MKD','Customer\x20Country\x20(3-letter):','‚ö†Ô∏è\x20Unknown\x20country\x20code:\x20','error_message','HRV','MDV','708465PqimYT','ECU','PHL','Order\x20ID:','apiUrl','BTN','CHN','Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id','DNK','ROU','SRB','NLD','PRK','stringify','Customer\x20IP:','ampay.php','SYR','SVN','text','No\x20payment\x20ID\x20found\x20in\x20webhook\x20data','QAT','API_PUBLIC_KEY','CYP','VNM','KAZ','NOR','838443XfjzoX','client_transaction_id','PRT','SYC','LBN','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20failure...','Payment\x20URL:','IDN','231GfNieW','Email:','KWT','PAK','IRN','MNG','MCO','health.php','AUS','GAM','JPN','LTU','SMR','MYS','POST','ZAF','CHE','TJK'];a46_0xfe8c=function(){return _0x6ce44d;};return a46_0xfe8c();}Object['defineProperty'](exports,a46_0x250fdd(0x97),{'value':!![]}),exports[a46_0x250fdd(0x106)]=exports['AmPayService']=void 0x0;function a46_0x2310(_0x382539,_0x45f01c){const _0xfe8ce9=a46_0xfe8c();return a46_0x2310=function(_0x23109a,_0x5e53ad){_0x23109a=_0x23109a-0x8d;let _0x44cd23=_0xfe8ce9[_0x23109a];return _0x44cd23;},a46_0x2310(_0x382539,_0x45f01c);}class AmPayService{constructor(){const _0x364ab0=a46_0x250fdd;this[_0x364ab0(0x11f)]=_0x364ab0(0x93),this[_0x364ab0(0xe3)]=_0x364ab0(0xc5),this[_0x364ab0(0x121)]='a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815',this['apiUrl']='https://traffer.uk/gateway/ampay/',console[_0x364ab0(0x12f)](_0x364ab0(0xaf));}[a46_0x250fdd(0x10c)](_0x48bf94){const _0x121788=a46_0x250fdd,_0x15e6e1={'AD':_0x121788(0x9d),'AL':_0x121788(0xb3),'AT':_0x121788(0x10e),'BA':_0x121788(0x110),'BE':'BEL','BG':_0x121788(0xb4),'BY':_0x121788(0x108),'CH':_0x121788(0x100),'CY':_0x121788(0xe4),'CZ':'CZE','DE':_0x121788(0xba),'DK':_0x121788(0xd6),'EE':'EST','ES':_0x121788(0x117),'FI':'FIN','FR':_0x121788(0xa9),'GB':_0x121788(0xad),'GE':'GEO','GR':_0x121788(0x10a),'HR':_0x121788(0xcc),'HU':'HUN','IE':_0x121788(0xb5),'IS':'ISL','IT':_0x121788(0xb8),'LI':_0x121788(0xa3),'LT':_0x121788(0xfb),'LU':'LUX','LV':'LVA','MC':_0x121788(0xf6),'MD':'MDA','ME':_0x121788(0xbb),'MK':_0x121788(0xc8),'MT':'MLT','NL':_0x121788(0xd9),'NO':_0x121788(0xe7),'PL':'POL','PT':_0x121788(0xea),'RO':_0x121788(0xd7),'RS':_0x121788(0xd8),'RU':'RUS','SE':_0x121788(0x103),'SI':_0x121788(0xdf),'SK':_0x121788(0xa8),'SM':_0x121788(0xfc),'UA':_0x121788(0x99),'VA':_0x121788(0xbc),'XK':_0x121788(0x8d),'AM':_0x121788(0xb2),'AZ':_0x121788(0x116),'KZ':_0x121788(0xe6),'KG':_0x121788(0x10d),'TJ':_0x121788(0x101),'TM':_0x121788(0x9a),'UZ':_0x121788(0x120),'US':_0x121788(0x11c),'CA':_0x121788(0x8e),'AU':_0x121788(0xf8),'JP':_0x121788(0xfa),'CN':_0x121788(0xd4),'IN':_0x121788(0xc6),'BR':_0x121788(0x122),'MX':_0x121788(0x118),'AR':_0x121788(0x133),'CL':'CHL','PE':'PER','CO':_0x121788(0x119),'VE':'VEN','EC':_0x121788(0xcf),'BO':'BOL','PY':'PRY','UY':'URY','SR':_0x121788(0xc3),'GY':_0x121788(0x95),'FK':_0x121788(0xc1),'ZA':_0x121788(0xff),'EG':'EGY','NG':_0x121788(0x96),'KE':'KEN','GH':_0x121788(0x129),'TZ':_0x121788(0x130),'UG':'UGA','ZW':_0x121788(0x12b),'ZM':'ZMB','MW':'MWI','MZ':'MOZ','MG':_0x121788(0x104),'MU':_0x121788(0xa2),'SC':_0x121788(0xeb),'RE':_0x121788(0x90),'TR':_0x121788(0x105),'IR':_0x121788(0xf4),'IQ':_0x121788(0x9b),'SA':_0x121788(0xa5),'AE':'ARE','KW':_0x121788(0xf2),'QA':_0x121788(0xe2),'BH':_0x121788(0x109),'OM':_0x121788(0xa0),'YE':_0x121788(0xbd),'JO':_0x121788(0xaa),'LB':_0x121788(0xec),'SY':_0x121788(0xde),'IL':'ISR','PS':'PSE','KR':_0x121788(0xc0),'KP':_0x121788(0xda),'TH':_0x121788(0x114),'VN':_0x121788(0xe5),'MY':_0x121788(0xfd),'SG':_0x121788(0x126),'ID':_0x121788(0xef),'PH':_0x121788(0xd0),'LA':'LAO','KH':_0x121788(0x111),'MM':_0x121788(0x8f),'BD':_0x121788(0xbf),'LK':_0x121788(0x11a),'NP':_0x121788(0xb6),'BT':_0x121788(0xd3),'MV':_0x121788(0xcd),'AF':_0x121788(0x112),'PK':_0x121788(0xf3),'MN':_0x121788(0xf5)},_0x53921f=_0x15e6e1[_0x48bf94[_0x121788(0x12c)]()];if(!_0x53921f)return console[_0x121788(0xb0)](_0x121788(0xca)+_0x48bf94+_0x121788(0x92)),_0x121788(0x127);return _0x53921f;}async[a46_0x250fdd(0x10f)](_0x47153b){const _0x21617c=a46_0x250fdd;try{const {orderId:_0x420f31,amount:_0x29f689,currency:_0x3704d1,firstName:_0x457435,lastName:_0x4e47b3,email:_0x1bfd9f,customerIp:_0x552dc8,customerCountry:_0xe3509f,successUrl:_0x1ffb83,failureUrl:_0x27b336}=_0x47153b;console[_0x21617c(0x12f)](_0x21617c(0x124)),console[_0x21617c(0x12f)](_0x21617c(0xd1),_0x420f31),console[_0x21617c(0x12f)](_0x21617c(0xae),_0x29f689,_0x3704d1),console[_0x21617c(0x12f)]('Customer:',_0x457435+'\x20'+_0x4e47b3),console[_0x21617c(0x12f)](_0x21617c(0xf1),_0x1bfd9f),console['log'](_0x21617c(0xdc),_0x552dc8),console[_0x21617c(0x12f)]('Customer\x20Country\x20(2-letter):',_0xe3509f);const _0x4dc04c=this[_0x21617c(0x10c)](_0xe3509f);console[_0x21617c(0x12f)](_0x21617c(0xc9),_0x4dc04c);const _0xb1750a={'sub_method':_0x21617c(0xf9),'currency':_0x3704d1[_0x21617c(0x12c)](),'amount':_0x29f689,'callback_url':'https://traffer.uk/gateway/ampay/webhook.php','client_merchant_id':this[_0x21617c(0x11f)],'client_transaction_id':_0x420f31,'transaction_description':_0x420f31,'customer':{'ip':_0x552dc8,'email':_0x1bfd9f,'full_name':_0x457435+'\x20'+_0x4e47b3,'country':_0x4dc04c},'success_redirect_url':_0x1ffb83,'error_redirect_url':_0x27b336};console[_0x21617c(0x12f)](_0x21617c(0xa1),JSON[_0x21617c(0xdb)](_0xb1750a,null,0x2));const _0xfe0a93=await fetch(this[_0x21617c(0xd2)]+_0x21617c(0xdd),{'method':_0x21617c(0xfe),'headers':{'Content-Type':'application/json','User-Agent':_0x21617c(0xb9)},'body':JSON[_0x21617c(0xdb)](_0xb1750a)}),_0x4b990b=await _0xfe0a93[_0x21617c(0xe0)]();console[_0x21617c(0x12f)](_0x21617c(0x98),_0x4b990b);if(!_0xfe0a93['ok'])throw new Error('AmPay\x20API\x20error:\x20HTTP\x20'+_0xfe0a93['status']+_0x21617c(0xb1)+_0x4b990b);let _0x549be9;try{_0x549be9=JSON[_0x21617c(0x102)](_0x4b990b);}catch(_0x9ad95f){throw new Error('Invalid\x20JSON\x20response\x20from\x20AmPay:\x20'+_0x4b990b);}console[_0x21617c(0x12f)](_0x21617c(0xa6),JSON[_0x21617c(0xdb)](_0x549be9,null,0x2));if(!_0x549be9['redirect_url'])throw new Error('AmPay\x20payment\x20creation\x20failed:\x20'+(_0x549be9[_0x21617c(0xcb)]||_0x549be9[_0x21617c(0x134)]||_0x21617c(0x11d)));const _0x93cb3c=_0x549be9[_0x21617c(0x123)],_0x4b9c88=_0x549be9[_0x21617c(0xab)],_0x454568=_0x549be9[_0x21617c(0x125)];return console['log']('‚úÖ\x20AmPay\x20payment\x20link\x20created\x20successfully'),console[_0x21617c(0x12f)](_0x21617c(0xee),_0x93cb3c),console[_0x21617c(0x12f)](_0x21617c(0xc4),_0x4b9c88),console[_0x21617c(0x12f)](_0x21617c(0x128),_0x454568),console['log'](_0x21617c(0x9e),_0x549be9['status']),console[_0x21617c(0x12f)](_0x21617c(0xac)),{'gateway_payment_id':_0x4b9c88||_0x454568||_0x420f31,'payment_url':_0x93cb3c||'','transaction_id':_0x4b9c88};}catch(_0x4eed4a){console[_0x21617c(0x94)](_0x21617c(0xc7),_0x4eed4a),console[_0x21617c(0x12f)](_0x21617c(0xed));throw _0x4eed4a;}}async['healthCheck'](){const _0x3faa38=a46_0x250fdd;try{const _0x27bb7e=await fetch(this[_0x3faa38(0xd2)]+_0x3faa38(0xf7),{'method':_0x3faa38(0x115),'headers':{'Content-Type':_0x3faa38(0x135),'User-Agent':_0x3faa38(0xb9)}});return _0x27bb7e&&_0x27bb7e['status']===0xc8?!![]:![];}catch(_0x46db17){return console[_0x3faa38(0x94)](_0x3faa38(0xa4),_0x46db17),![];}}async['processWebhook'](_0xca2821){const _0x31a5f5=a46_0x250fdd;console[_0x31a5f5(0x12f)](_0x31a5f5(0xb7)),console[_0x31a5f5(0x12f)]('‚ö†Ô∏è\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status'),console['log']('Webhook\x20data:',_0xca2821),console['log'](_0x31a5f5(0x131),typeof _0xca2821),console[_0x31a5f5(0x12f)]('Available\x20fields:');_0xca2821&&typeof _0xca2821===_0x31a5f5(0xc2)&&Object[_0x31a5f5(0x11b)](_0xca2821)[_0x31a5f5(0x9c)](_0x4f298e=>{const _0x308743=_0x31a5f5;console[_0x308743(0x12f)]('\x20\x20'+_0x4f298e+':\x20'+_0xca2821[_0x4f298e]+'\x20('+typeof _0xca2821[_0x4f298e]+')');});let _0xd89cea=_0x31a5f5(0x12d);const _0x1a076b=_0xca2821[_0x31a5f5(0xe9)]||_0xca2821['system_id']||_0xca2821[_0x31a5f5(0x125)]||'';return console[_0x31a5f5(0x12f)](_0x31a5f5(0x107)+_0x1a076b),console[_0x31a5f5(0x12f)](_0x31a5f5(0x91)+_0xd89cea),!_0x1a076b&&(console[_0x31a5f5(0x94)](_0x31a5f5(0xe1)),console['error'](_0x31a5f5(0xd5))),{'paymentId':_0x1a076b,'status':_0xd89cea,'amount':_0xca2821['amount'],'currency':_0xca2821['currency']};}}exports[a46_0x250fdd(0xa7)]=AmPayService,exports[a46_0x250fdd(0x106)]=new AmPayService();