'use strict';const a42_0x52ef42=a42_0x176c;(function(_0xc16814,_0x394494){const _0x19c888=a42_0x176c,_0x4b3cbd=_0xc16814();while(!![]){try{const _0x1cb63b=parseInt(_0x19c888(0x17e))/0x1+-parseInt(_0x19c888(0x1b1))/0x2+-parseInt(_0x19c888(0x16f))/0x3+parseInt(_0x19c888(0x1c1))/0x4+parseInt(_0x19c888(0x154))/0x5+parseInt(_0x19c888(0x175))/0x6*(parseInt(_0x19c888(0x1a6))/0x7)+-parseInt(_0x19c888(0x141))/0x8*(parseInt(_0x19c888(0x19f))/0x9);if(_0x1cb63b===_0x394494)break;else _0x4b3cbd['push'](_0x4b3cbd['shift']());}catch(_0x47b5bb){_0x4b3cbd['push'](_0x4b3cbd['shift']());}}}(a42_0x166f,0x45426));function a42_0x166f(){const _0x16b540=['JPN','ZWE','CAN','FIN','SAU','URY','MNE','MWI','üì§\x20AmPay\x20request\x20body:','365530SwaBBR','GET','GBR','AND','apiUrl','üìä\x20AmPay\x20response\x20data:','warn','PRK','DEU','UKR','MKD','TRAFFER','application/json','Forced\x20status\x20(webhook\x20disabled):\x20','BOL','Available\x20fields:','POST','PHL','MEX','AmPay\x20API\x20error:\x20HTTP\x20','XKX','YEM','Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id','KAZ','LVA','LIE','stringify','252261WZxxll','PAK','BTN','ARG','SVN','PER','133968aoDIvp','IRQ','HRV','MNG','VAT','TZA','TrapayAPI/1.0','IND','AZE','97227SDUHTk','GRC','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20failure...','NOR','PRY','üì•\x20AmPay\x20raw\x20response:','ROU','‚ùå\x20AmPay\x20health\x20check\x20failed:','CLIENT_MERCHANT_ID','Webhook\x20data:','QAT','system_id','ZAF','BRA','ESP','client_transaction_id','status','KOR','parse','\x20-\x20','MDA','MUS','BLR','PRT','health.php','API_PUBLIC_KEY','No\x20payment\x20ID\x20found\x20in\x20webhook\x20data','===\x20Processing\x20AmPay\x20webhook\x20===','SWE','error','LTU','System\x20ID:','toUpperCase','26649ICqasz','AmPayService','KHM','SRB','BGR','healthCheck','MMR','126RNfegs','MDG','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20event...','convert2LetterTo3LetterCountryCode','error_message','VNM','Order\x20ID:','KGZ','BGD','https://traffer.uk/gateway/ampay/','object','1100256IUWSRC','CHE','üá¶üá≤\x20Creating\x20AmPay\x20payment\x20link...','THA','TUR','MYS','VEN','forEach','keys','RUS','Customer\x20Country\x20(2-letter):','ARE','CZE','processWebhook','IRL','tracker_id','1702444bfgjzw','‚ùå\x20AmPay\x20payment\x20creation\x20failed:','BHR','58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda','UGA','CYP','NLD','CHN','log','message','GHA','COL','Customer:','NPL','ZMB','SVK','IDN','BEL','redirect_url',',\x20using\x20RUS\x20as\x20fallback','MCO','Status:','Unknown\x20error','UZB','HUN','DNK','Extracted\x20payment\x20ID:\x20','ISL','REU','FRA','Customer\x20IP:','ARM','MOZ','EST','text','a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815','__esModule','AUT','ampayService','TJK','AUS','PENDING','TKM','https://api.trapay.uk/api/webhooks/gateway/ampay','216iGjdaZ','AFG','LUX','OMN','FLK','POL','ampay.php','Tracker\x20ID:','MDV','SYR'];a42_0x166f=function(){return _0x16b540;};return a42_0x166f();}Object['defineProperty'](exports,a42_0x52ef42(0x139),{'value':!![]}),exports[a42_0x52ef42(0x13b)]=exports[a42_0x52ef42(0x1a0)]=void 0x0;function a42_0x176c(_0x44177f,_0x3f0aec){const _0x166f78=a42_0x166f();return a42_0x176c=function(_0x176c7b,_0xc4c902){_0x176c7b=_0x176c7b-0x12d;let _0xf8cb4f=_0x166f78[_0x176c7b];return _0xf8cb4f;},a42_0x176c(_0x44177f,_0x3f0aec);}class AmPayService{constructor(){const _0x3fc21d=a42_0x52ef42;this[_0x3fc21d(0x186)]=_0x3fc21d(0x15f),this[_0x3fc21d(0x197)]=_0x3fc21d(0x1c4),this['API_PRIVATE_KEY']=_0x3fc21d(0x138),this['apiUrl']=_0x3fc21d(0x1af),console[_0x3fc21d(0x1c9)]('üá¶üá≤\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing');}[a42_0x52ef42(0x1a9)](_0xa6af00){const _0x432640=a42_0x52ef42,_0x3ca290={'AD':_0x432640(0x157),'AL':'ALB','AT':_0x432640(0x13a),'BA':'BIH','BE':_0x432640(0x1d2),'BG':_0x432640(0x1a3),'BY':_0x432640(0x194),'CH':_0x432640(0x1b2),'CY':_0x432640(0x1c6),'CZ':_0x432640(0x1bd),'DE':_0x432640(0x15c),'DK':_0x432640(0x12e),'EE':_0x432640(0x136),'ES':_0x432640(0x18c),'FI':_0x432640(0x14e),'FR':_0x432640(0x132),'GB':_0x432640(0x156),'GE':'GEO','GR':_0x432640(0x17f),'HR':_0x432640(0x177),'HU':_0x432640(0x12d),'IE':_0x432640(0x1bf),'IS':_0x432640(0x130),'IT':'ITA','LI':_0x432640(0x16d),'LT':_0x432640(0x19c),'LU':_0x432640(0x143),'LV':_0x432640(0x16c),'MC':_0x432640(0x1d5),'MD':_0x432640(0x192),'ME':_0x432640(0x151),'MK':_0x432640(0x15e),'MT':'MLT','NL':_0x432640(0x1c7),'NO':_0x432640(0x181),'PL':_0x432640(0x146),'PT':_0x432640(0x195),'RO':_0x432640(0x184),'RS':_0x432640(0x1a2),'RU':_0x432640(0x1ba),'SE':_0x432640(0x19a),'SI':_0x432640(0x173),'SK':_0x432640(0x1d0),'SM':'SMR','UA':_0x432640(0x15d),'VA':_0x432640(0x179),'XK':_0x432640(0x168),'AM':_0x432640(0x134),'AZ':_0x432640(0x17d),'KZ':_0x432640(0x16b),'KG':_0x432640(0x1ad),'TJ':_0x432640(0x13c),'TM':_0x432640(0x13f),'UZ':_0x432640(0x1d8),'US':'USA','CA':_0x432640(0x14d),'AU':_0x432640(0x13d),'JP':_0x432640(0x14b),'CN':_0x432640(0x1c8),'IN':_0x432640(0x17c),'BR':_0x432640(0x18b),'MX':_0x432640(0x166),'AR':_0x432640(0x172),'CL':'CHL','PE':_0x432640(0x174),'CO':_0x432640(0x1cc),'VE':_0x432640(0x1b7),'EC':'ECU','BO':_0x432640(0x162),'PY':_0x432640(0x182),'UY':_0x432640(0x150),'SR':'SUR','GY':'GUY','FK':_0x432640(0x145),'ZA':_0x432640(0x18a),'EG':'EGY','NG':'NGA','KE':'KEN','GH':_0x432640(0x1cb),'TZ':_0x432640(0x17a),'UG':_0x432640(0x1c5),'ZW':_0x432640(0x14c),'ZM':_0x432640(0x1cf),'MW':_0x432640(0x152),'MZ':_0x432640(0x135),'MG':_0x432640(0x1a7),'MU':_0x432640(0x193),'SC':'SYC','RE':_0x432640(0x131),'TR':_0x432640(0x1b5),'IR':'IRN','IQ':_0x432640(0x176),'SA':_0x432640(0x14f),'AE':_0x432640(0x1bc),'KW':'KWT','QA':_0x432640(0x188),'BH':_0x432640(0x1c3),'OM':_0x432640(0x144),'YE':_0x432640(0x169),'JO':'JOR','LB':'LBN','SY':_0x432640(0x14a),'IL':'ISR','PS':'PSE','KR':_0x432640(0x18f),'KP':_0x432640(0x15b),'TH':_0x432640(0x1b4),'VN':_0x432640(0x1ab),'MY':_0x432640(0x1b6),'SG':'SGP','ID':_0x432640(0x1d1),'PH':_0x432640(0x165),'LA':'LAO','KH':_0x432640(0x1a1),'MM':_0x432640(0x1a5),'BD':_0x432640(0x1ae),'LK':'LKA','NP':_0x432640(0x1ce),'BT':_0x432640(0x171),'MV':_0x432640(0x149),'AF':_0x432640(0x142),'PK':_0x432640(0x170),'MN':_0x432640(0x178)},_0x297cff=_0x3ca290[_0xa6af00[_0x432640(0x19e)]()];if(!_0x297cff)return console[_0x432640(0x15a)]('‚ö†Ô∏è\x20Unknown\x20country\x20code:\x20'+_0xa6af00+_0x432640(0x1d4)),'RUS';return _0x297cff;}async['createPaymentLink'](_0x115637){const _0x490c0d=a42_0x52ef42;try{const {orderId:_0x5a36f,amount:_0x2fe852,currency:_0x20e33d,firstName:_0x11183e,lastName:_0x3187f7,email:_0x49cca8,customerIp:_0x399995,customerCountry:_0x4ff9a7,successUrl:_0x564d6d,failureUrl:_0x5ced58}=_0x115637;console[_0x490c0d(0x1c9)](_0x490c0d(0x1b3)),console[_0x490c0d(0x1c9)](_0x490c0d(0x1ac),_0x5a36f),console['log']('Amount:',_0x2fe852,_0x20e33d),console[_0x490c0d(0x1c9)](_0x490c0d(0x1cd),_0x11183e+'\x20'+_0x3187f7),console[_0x490c0d(0x1c9)]('Email:',_0x49cca8),console[_0x490c0d(0x1c9)](_0x490c0d(0x133),_0x399995),console['log'](_0x490c0d(0x1bb),_0x4ff9a7);const _0x48c1f1=this[_0x490c0d(0x1a9)](_0x4ff9a7);console[_0x490c0d(0x1c9)]('Customer\x20Country\x20(3-letter):',_0x48c1f1);const _0x943500={'sub_method':'GAM','currency':_0x20e33d[_0x490c0d(0x19e)](),'amount':_0x2fe852,'callback_url':_0x490c0d(0x140),'client_merchant_id':this[_0x490c0d(0x186)],'client_transaction_id':_0x5a36f,'transaction_description':_0x5a36f,'customer':{'ip':_0x399995,'email':_0x49cca8,'full_name':_0x11183e+'\x20'+_0x3187f7,'country':_0x48c1f1},'success_redirect_url':_0x564d6d,'error_redirect_url':_0x5ced58};console[_0x490c0d(0x1c9)](_0x490c0d(0x153),JSON[_0x490c0d(0x16e)](_0x943500,null,0x2));const _0x19dbe6=await fetch(this[_0x490c0d(0x158)]+_0x490c0d(0x147),{'method':_0x490c0d(0x164),'headers':{'Content-Type':'application/json','User-Agent':_0x490c0d(0x17b)},'body':JSON[_0x490c0d(0x16e)](_0x943500)}),_0x1e09ea=await _0x19dbe6[_0x490c0d(0x137)]();console[_0x490c0d(0x1c9)](_0x490c0d(0x183),_0x1e09ea);if(!_0x19dbe6['ok'])throw new Error(_0x490c0d(0x167)+_0x19dbe6[_0x490c0d(0x18e)]+_0x490c0d(0x191)+_0x1e09ea);let _0x130d99;try{_0x130d99=JSON[_0x490c0d(0x190)](_0x1e09ea);}catch(_0xc83818){throw new Error('Invalid\x20JSON\x20response\x20from\x20AmPay:\x20'+_0x1e09ea);}console[_0x490c0d(0x1c9)](_0x490c0d(0x159),JSON['stringify'](_0x130d99,null,0x2));if(!_0x130d99['redirect_url'])throw new Error('AmPay\x20payment\x20creation\x20failed:\x20'+(_0x130d99[_0x490c0d(0x1aa)]||_0x130d99[_0x490c0d(0x1ca)]||_0x490c0d(0x1d7)));const _0x52ded0=_0x130d99[_0x490c0d(0x1d3)],_0x5be710=_0x130d99[_0x490c0d(0x189)],_0x5b9543=_0x130d99['tracker_id'];return console[_0x490c0d(0x1c9)]('‚úÖ\x20AmPay\x20payment\x20link\x20created\x20successfully'),console['log']('Payment\x20URL:',_0x52ded0),console[_0x490c0d(0x1c9)](_0x490c0d(0x19d),_0x5be710),console[_0x490c0d(0x1c9)](_0x490c0d(0x148),_0x5b9543),console[_0x490c0d(0x1c9)](_0x490c0d(0x1d6),_0x130d99['status']),console[_0x490c0d(0x1c9)](_0x490c0d(0x1a8)),{'gateway_payment_id':_0x5be710||_0x5b9543||_0x5a36f,'payment_url':_0x52ded0||'','transaction_id':_0x5be710};}catch(_0x28a361){console[_0x490c0d(0x19b)](_0x490c0d(0x1c2),_0x28a361),console['log'](_0x490c0d(0x180));throw _0x28a361;}}async[a42_0x52ef42(0x1a4)](){const _0x40ce30=a42_0x52ef42;try{const _0x59b659=await fetch(this['apiUrl']+_0x40ce30(0x196),{'method':_0x40ce30(0x155),'headers':{'Content-Type':_0x40ce30(0x160),'User-Agent':_0x40ce30(0x17b)}});return _0x59b659&&_0x59b659[_0x40ce30(0x18e)]===0xc8?!![]:![];}catch(_0x2f442d){return console[_0x40ce30(0x19b)](_0x40ce30(0x185),_0x2f442d),![];}}async[a42_0x52ef42(0x1be)](_0x112d40){const _0x9f123=a42_0x52ef42;console['log'](_0x9f123(0x199)),console['log']('‚ö†Ô∏è\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status'),console['log'](_0x9f123(0x187),_0x112d40),console[_0x9f123(0x1c9)]('Webhook\x20data\x20type:',typeof _0x112d40),console[_0x9f123(0x1c9)](_0x9f123(0x163));_0x112d40&&typeof _0x112d40===_0x9f123(0x1b0)&&Object[_0x9f123(0x1b9)](_0x112d40)[_0x9f123(0x1b8)](_0x25aca9=>{const _0x81baa2=_0x9f123;console[_0x81baa2(0x1c9)]('\x20\x20'+_0x25aca9+':\x20'+_0x112d40[_0x25aca9]+'\x20('+typeof _0x112d40[_0x25aca9]+')');});let _0x3fc197=_0x9f123(0x13e);const _0x35767e=_0x112d40[_0x9f123(0x18d)]||_0x112d40[_0x9f123(0x189)]||_0x112d40[_0x9f123(0x1c0)]||'';return console[_0x9f123(0x1c9)](_0x9f123(0x12f)+_0x35767e),console[_0x9f123(0x1c9)](_0x9f123(0x161)+_0x3fc197),!_0x35767e&&(console[_0x9f123(0x19b)](_0x9f123(0x198)),console['error'](_0x9f123(0x16a))),{'paymentId':_0x35767e,'status':_0x3fc197,'amount':_0x112d40['amount'],'currency':_0x112d40['currency']};}}exports[a42_0x52ef42(0x1a0)]=AmPayService,exports['ampayService']=new AmPayService();