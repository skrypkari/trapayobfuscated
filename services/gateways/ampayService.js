'use strict';const a44_0x39590b=a44_0x7cc1;function a44_0x2d3d(){const _0x2f6d9e=['UZB','log','toUpperCase','678984iqwxnq','EGY','SMR','📝\x20Logging\x20AmPay\x20payment\x20creation\x20event...','apiUrl','Invalid\x20JSON\x20response\x20from\x20AmPay:\x20','CHN','system_id',',\x20using\x20RUS\x20as\x20fallback','BHR','2839639Xxagol','HRV','SUR','POL','https://traffer.uk/gateway/ampay/','Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id','redirect_url','POST','Order\x20ID:','MDV','PHL','GUY','ampayService','MCO','ROU','ISR','✅\x20AmPay\x20payment\x20link\x20created\x20successfully','MNE','BIH','THA','❌\x20AmPay\x20health\x20check\x20failed:','__esModule','ISL','🇦🇲\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing','58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda','MDA','System\x20ID:','16Xzvdjr','AZE','BEL','LUX','1413jDKkca','DEU','ampay.php','RUS','message','Customer\x20Country\x20(2-letter):','EST','IND','FLK','error','⚠️\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status','convert2LetterTo3LetterCountryCode','JOR','KAZ','Email:','TRAFFER','currency','tracker_id','No\x20payment\x20ID\x20found\x20in\x20webhook\x20data','URY','ZMB','194710hICTar','VAT','AND','Payment\x20URL:','📤\x20AmPay\x20request\x20body:','XKX','MWI','warn','BLR','ITA','AmPayService','Unknown\x20error','BOL','KHM','AmPay\x20payment\x20creation\x20failed:\x20','Webhook\x20data\x20type:','MDG','client_transaction_id','ARM','📝\x20Logging\x20AmPay\x20payment\x20creation\x20failure...','TKM','stringify','770833HGPygX','176bhhUDe','parse','USA','LIE','394815odrnaq','📊\x20AmPay\x20response\x20data:','SWE','ECU','KGZ','Status:','health.php','GBR','SYC','CYP','amount','ARG','GEO','PER','Customer\x20Country\x20(3-letter):','JPN','VEN','Forced\x20status\x20(webhook\x20disabled):\x20','PRY','PRT','Extracted\x20payment\x20ID:\x20','SVK','AmPay\x20API\x20error:\x20HTTP\x20','CZE','ZAF','Customer\x20IP:','KEN','SGP','ARE','❌\x20AmPay\x20payment\x20creation\x20failed:','2097uDVARp','📥\x20AmPay\x20raw\x20response:','TZA','MEX','TrapayAPI/1.0','SYR','CHL','QAT','status','Amount:','MOZ','NLD','14330zCIlba','CHE','ALB','UKR','AUS','COL','KOR','BRA','SVN','2moQbtO','LAO','NOR','IRQ','18uTSYOO','===\x20Processing\x20AmPay\x20webhook\x20===','LKA','GET','🇦🇲\x20Creating\x20AmPay\x20payment\x20link...','API_PRIVATE_KEY','TJK','ZWE','error_message','AUT','SRB','IRN','keys','LVA','GRC','LTU','OMN','BGR','forEach','Customer:','createPaymentLink','AFG','⚠️\x20Unknown\x20country\x20code:\x20'];a44_0x2d3d=function(){return _0x2f6d9e;};return a44_0x2d3d();}(function(_0x2b6765,_0x4c59be){const _0x250c7e=a44_0x7cc1,_0x36f486=_0x2b6765();while(!![]){try{const _0x382e2c=parseInt(_0x250c7e(0x189))/0x1*(parseInt(_0x250c7e(0x13b))/0x2)+-parseInt(_0x250c7e(0x174))/0x3*(-parseInt(_0x250c7e(0x152))/0x4)+parseInt(_0x250c7e(0x156))/0x5*(parseInt(_0x250c7e(0x18d))/0x6)+parseInt(_0x250c7e(0x151))/0x7*(-parseInt(_0x250c7e(0x122))/0x8)+parseInt(_0x250c7e(0x126))/0x9*(parseInt(_0x250c7e(0x180))/0xa)+-parseInt(_0x250c7e(0x107))/0xb+-parseInt(_0x250c7e(0xfd))/0xc;if(_0x382e2c===_0x4c59be)break;else _0x36f486['push'](_0x36f486['shift']());}catch(_0x9fed96){_0x36f486['push'](_0x36f486['shift']());}}}(a44_0x2d3d,0x2532f));Object['defineProperty'](exports,a44_0x39590b(0x11c),{'value':!![]}),exports['ampayService']=exports[a44_0x39590b(0x145)]=void 0x0;class AmPayService{constructor(){const _0x3c93cb=a44_0x39590b;this['CLIENT_MERCHANT_ID']=_0x3c93cb(0x135),this['API_PUBLIC_KEY']=_0x3c93cb(0x11f),this[_0x3c93cb(0x192)]='a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815',this[_0x3c93cb(0x101)]=_0x3c93cb(0x10b),console[_0x3c93cb(0xfb)](_0x3c93cb(0x11e));}[a44_0x39590b(0x131)](_0x330dd8){const _0x4bebaa=a44_0x39590b,_0x50b845={'AD':_0x4bebaa(0x13d),'AL':_0x4bebaa(0x182),'AT':_0x4bebaa(0xec),'BA':_0x4bebaa(0x119),'BE':_0x4bebaa(0x124),'BG':_0x4bebaa(0xf4),'BY':_0x4bebaa(0x143),'CH':_0x4bebaa(0x181),'CY':_0x4bebaa(0x15f),'CZ':_0x4bebaa(0x16d),'DE':_0x4bebaa(0x127),'DK':'DNK','EE':_0x4bebaa(0x12c),'ES':'ESP','FI':'FIN','FR':'FRA','GB':_0x4bebaa(0x15d),'GE':_0x4bebaa(0x162),'GR':_0x4bebaa(0xf1),'HR':_0x4bebaa(0x108),'HU':'HUN','IE':'IRL','IS':_0x4bebaa(0x11d),'IT':_0x4bebaa(0x144),'LI':_0x4bebaa(0x155),'LT':_0x4bebaa(0xf2),'LU':_0x4bebaa(0x125),'LV':_0x4bebaa(0xf0),'MC':_0x4bebaa(0x114),'MD':_0x4bebaa(0x120),'ME':_0x4bebaa(0x118),'MK':'MKD','MT':'MLT','NL':_0x4bebaa(0x17f),'NO':_0x4bebaa(0x18b),'PL':_0x4bebaa(0x10a),'PT':_0x4bebaa(0x169),'RO':_0x4bebaa(0x115),'RS':_0x4bebaa(0xed),'RU':_0x4bebaa(0x129),'SE':_0x4bebaa(0x158),'SI':_0x4bebaa(0x188),'SK':_0x4bebaa(0x16b),'SM':_0x4bebaa(0xff),'UA':_0x4bebaa(0x183),'VA':_0x4bebaa(0x13c),'XK':_0x4bebaa(0x140),'AM':_0x4bebaa(0x14d),'AZ':_0x4bebaa(0x123),'KZ':_0x4bebaa(0x133),'KG':_0x4bebaa(0x15a),'TJ':_0x4bebaa(0x193),'TM':_0x4bebaa(0x14f),'UZ':_0x4bebaa(0xfa),'US':_0x4bebaa(0x154),'CA':'CAN','AU':_0x4bebaa(0x184),'JP':_0x4bebaa(0x165),'CN':_0x4bebaa(0x103),'IN':_0x4bebaa(0x12d),'BR':_0x4bebaa(0x187),'MX':_0x4bebaa(0x177),'AR':_0x4bebaa(0x161),'CL':_0x4bebaa(0x17a),'PE':_0x4bebaa(0x163),'CO':_0x4bebaa(0x185),'VE':_0x4bebaa(0x166),'EC':_0x4bebaa(0x159),'BO':_0x4bebaa(0x147),'PY':_0x4bebaa(0x168),'UY':_0x4bebaa(0x139),'SR':_0x4bebaa(0x109),'GY':_0x4bebaa(0x112),'FK':_0x4bebaa(0x12e),'ZA':_0x4bebaa(0x16e),'EG':_0x4bebaa(0xfe),'NG':'NGA','KE':_0x4bebaa(0x170),'GH':'GHA','TZ':_0x4bebaa(0x176),'UG':'UGA','ZW':_0x4bebaa(0x194),'ZM':_0x4bebaa(0x13a),'MW':_0x4bebaa(0x141),'MZ':_0x4bebaa(0x17e),'MG':_0x4bebaa(0x14b),'MU':'MUS','SC':_0x4bebaa(0x15e),'RE':'REU','TR':'TUR','IR':_0x4bebaa(0xee),'IQ':_0x4bebaa(0x18c),'SA':'SAU','AE':_0x4bebaa(0x172),'KW':'KWT','QA':_0x4bebaa(0x17b),'BH':_0x4bebaa(0x106),'OM':_0x4bebaa(0xf3),'YE':'YEM','JO':_0x4bebaa(0x132),'LB':'LBN','SY':_0x4bebaa(0x179),'IL':_0x4bebaa(0x116),'PS':'PSE','KR':_0x4bebaa(0x186),'KP':'PRK','TH':_0x4bebaa(0x11a),'VN':'VNM','MY':'MYS','SG':_0x4bebaa(0x171),'ID':'IDN','PH':_0x4bebaa(0x111),'LA':_0x4bebaa(0x18a),'KH':_0x4bebaa(0x148),'MM':'MMR','BD':'BGD','LK':_0x4bebaa(0x18f),'NP':'NPL','BT':'BTN','MV':_0x4bebaa(0x110),'AF':_0x4bebaa(0xf8),'PK':'PAK','MN':'MNG'},_0x1e0146=_0x50b845[_0x330dd8[_0x4bebaa(0xfc)]()];if(!_0x1e0146)return console[_0x4bebaa(0x142)](_0x4bebaa(0xf9)+_0x330dd8+_0x4bebaa(0x105)),_0x4bebaa(0x129);return _0x1e0146;}async[a44_0x39590b(0xf7)](_0x4e53ee){const _0x51d124=a44_0x39590b;try{const {orderId:_0x596217,amount:_0x1ed93b,currency:_0x3e0148,firstName:_0x5dead1,lastName:_0x14d86f,email:_0x432f12,customerIp:_0x570b2d,customerCountry:_0x1410d1,successUrl:_0x326525,failureUrl:_0x3d89e7}=_0x4e53ee;console[_0x51d124(0xfb)](_0x51d124(0x191)),console[_0x51d124(0xfb)](_0x51d124(0x10f),_0x596217),console[_0x51d124(0xfb)](_0x51d124(0x17d),_0x1ed93b,_0x3e0148),console[_0x51d124(0xfb)](_0x51d124(0xf6),_0x5dead1+'\x20'+_0x14d86f),console[_0x51d124(0xfb)](_0x51d124(0x134),_0x432f12),console[_0x51d124(0xfb)](_0x51d124(0x16f),_0x570b2d),console[_0x51d124(0xfb)](_0x51d124(0x12b),_0x1410d1);const _0x3e4c5d=this['convert2LetterTo3LetterCountryCode'](_0x1410d1);console[_0x51d124(0xfb)](_0x51d124(0x164),_0x3e4c5d);const _0x159d8d={'sub_method':'GAM','currency':_0x3e0148['toUpperCase'](),'amount':_0x1ed93b,'callback_url':'https://traffer.uk/gateway/ampay/webhook.php','client_merchant_id':this['CLIENT_MERCHANT_ID'],'client_transaction_id':_0x596217,'transaction_description':_0x596217,'customer':{'ip':_0x570b2d,'email':_0x432f12,'full_name':_0x5dead1+'\x20'+_0x14d86f,'country':_0x3e4c5d},'success_redirect_url':_0x326525,'error_redirect_url':_0x3d89e7};console['log'](_0x51d124(0x13f),JSON[_0x51d124(0x150)](_0x159d8d,null,0x2));const _0x31eba1=await fetch(this[_0x51d124(0x101)]+_0x51d124(0x128),{'method':_0x51d124(0x10e),'headers':{'Content-Type':'application/json','User-Agent':_0x51d124(0x178)},'body':JSON[_0x51d124(0x150)](_0x159d8d)}),_0x8ab4c5=await _0x31eba1['text']();console[_0x51d124(0xfb)](_0x51d124(0x175),_0x8ab4c5);if(!_0x31eba1['ok'])throw new Error(_0x51d124(0x16c)+_0x31eba1[_0x51d124(0x17c)]+'\x20-\x20'+_0x8ab4c5);let _0x1bb526;try{_0x1bb526=JSON[_0x51d124(0x153)](_0x8ab4c5);}catch(_0x13034d){throw new Error(_0x51d124(0x102)+_0x8ab4c5);}console[_0x51d124(0xfb)](_0x51d124(0x157),JSON[_0x51d124(0x150)](_0x1bb526,null,0x2));if(!_0x1bb526[_0x51d124(0x10d)])throw new Error(_0x51d124(0x149)+(_0x1bb526[_0x51d124(0x195)]||_0x1bb526[_0x51d124(0x12a)]||_0x51d124(0x146)));const _0x269795=_0x1bb526[_0x51d124(0x10d)],_0x985b9a=_0x1bb526[_0x51d124(0x104)],_0x345d3a=_0x1bb526[_0x51d124(0x137)];return console['log'](_0x51d124(0x117)),console[_0x51d124(0xfb)](_0x51d124(0x13e),_0x269795),console[_0x51d124(0xfb)](_0x51d124(0x121),_0x985b9a),console['log']('Tracker\x20ID:',_0x345d3a),console[_0x51d124(0xfb)](_0x51d124(0x15b),_0x1bb526[_0x51d124(0x17c)]),console['log'](_0x51d124(0x100)),{'gateway_payment_id':_0x985b9a||_0x345d3a||_0x596217,'payment_url':_0x269795||'','transaction_id':_0x985b9a};}catch(_0x5d196c){console[_0x51d124(0x12f)](_0x51d124(0x173),_0x5d196c),console['log'](_0x51d124(0x14e));throw _0x5d196c;}}async['healthCheck'](){const _0x11b619=a44_0x39590b;try{const _0x4d622d=await fetch(this[_0x11b619(0x101)]+_0x11b619(0x15c),{'method':_0x11b619(0x190),'headers':{'Content-Type':'application/json','User-Agent':_0x11b619(0x178)}});return _0x4d622d&&_0x4d622d[_0x11b619(0x17c)]===0xc8?!![]:![];}catch(_0x5a7159){return console[_0x11b619(0x12f)](_0x11b619(0x11b),_0x5a7159),![];}}async['processWebhook'](_0x15f80e){const _0x5c3843=a44_0x39590b;console[_0x5c3843(0xfb)](_0x5c3843(0x18e)),console[_0x5c3843(0xfb)](_0x5c3843(0x130)),console[_0x5c3843(0xfb)]('Webhook\x20data:',_0x15f80e),console[_0x5c3843(0xfb)](_0x5c3843(0x14a),typeof _0x15f80e),console['log']('Available\x20fields:');_0x15f80e&&typeof _0x15f80e==='object'&&Object[_0x5c3843(0xef)](_0x15f80e)[_0x5c3843(0xf5)](_0xaf1104=>{const _0x19c916=_0x5c3843;console[_0x19c916(0xfb)]('\x20\x20'+_0xaf1104+':\x20'+_0x15f80e[_0xaf1104]+'\x20('+typeof _0x15f80e[_0xaf1104]+')');});let _0x3f4be4='PENDING';const _0x4c6ba9=_0x15f80e[_0x5c3843(0x14c)]||_0x15f80e[_0x5c3843(0x104)]||_0x15f80e['tracker_id']||'';return console['log'](_0x5c3843(0x16a)+_0x4c6ba9),console[_0x5c3843(0xfb)](_0x5c3843(0x167)+_0x3f4be4),!_0x4c6ba9&&(console['error'](_0x5c3843(0x138)),console[_0x5c3843(0x12f)](_0x5c3843(0x10c))),{'paymentId':_0x4c6ba9,'status':_0x3f4be4,'amount':_0x15f80e[_0x5c3843(0x160)],'currency':_0x15f80e[_0x5c3843(0x136)]};}}function a44_0x7cc1(_0x41be9b,_0x274617){const _0x2d3d82=a44_0x2d3d();return a44_0x7cc1=function(_0x7cc10d,_0x19bcca){_0x7cc10d=_0x7cc10d-0xec;let _0x2a5a07=_0x2d3d82[_0x7cc10d];return _0x2a5a07;},a44_0x7cc1(_0x41be9b,_0x274617);}exports[a44_0x39590b(0x145)]=AmPayService,exports[a44_0x39590b(0x113)]=new AmPayService();