'use strict';const a42_0x261525=a42_0x3e49;(function(_0x16db70,_0x4c5f75){const _0x4f01b5=a42_0x3e49,_0x1c6f09=_0x16db70();while(!![]){try{const _0x2832fd=parseInt(_0x4f01b5(0x164))/0x1*(parseInt(_0x4f01b5(0x18f))/0x2)+parseInt(_0x4f01b5(0x197))/0x3+-parseInt(_0x4f01b5(0x192))/0x4*(parseInt(_0x4f01b5(0x1a7))/0x5)+-parseInt(_0x4f01b5(0x190))/0x6*(-parseInt(_0x4f01b5(0x15c))/0x7)+parseInt(_0x4f01b5(0x180))/0x8*(parseInt(_0x4f01b5(0x17b))/0x9)+-parseInt(_0x4f01b5(0x154))/0xa*(parseInt(_0x4f01b5(0x186))/0xb)+-parseInt(_0x4f01b5(0x11c))/0xc;if(_0x2832fd===_0x4c5f75)break;else _0x1c6f09['push'](_0x1c6f09['shift']());}catch(_0x3eec8a){_0x1c6f09['push'](_0x1c6f09['shift']());}}}(a42_0x2561,0xa448c));Object['defineProperty'](exports,a42_0x261525(0x181),{'value':!![]}),exports[a42_0x261525(0x195)]=exports[a42_0x261525(0x12e)]=void 0x0;function a42_0x3e49(_0x55583e,_0x67a707){const _0x2561ef=a42_0x2561();return a42_0x3e49=function(_0x3e4940,_0x4d750e){_0x3e4940=_0x3e4940-0x11c;let _0x347704=_0x2561ef[_0x3e4940];return _0x347704;},a42_0x3e49(_0x55583e,_0x67a707);}class AmPayService{constructor(){const _0x3a657e=a42_0x261525;this['CLIENT_MERCHANT_ID']=_0x3a657e(0x12c),this['API_PUBLIC_KEY']='58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda',this[_0x3a657e(0x19c)]='a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815',this[_0x3a657e(0x162)]=_0x3a657e(0x1be),console[_0x3a657e(0x156)](_0x3a657e(0x193));}[a42_0x261525(0x134)](_0x49dacb){const _0x1b7485=a42_0x261525,_0x1b3435={'AD':_0x1b7485(0x14e),'AL':_0x1b7485(0x161),'AT':_0x1b7485(0x13a),'BA':_0x1b7485(0x149),'BE':'BEL','BG':'BGR','BY':_0x1b7485(0x140),'CH':'CHE','CY':_0x1b7485(0x19a),'CZ':'CZE','DE':_0x1b7485(0x187),'DK':_0x1b7485(0x128),'EE':_0x1b7485(0x17d),'ES':_0x1b7485(0x171),'FI':_0x1b7485(0x18d),'FR':_0x1b7485(0x142),'GB':_0x1b7485(0x173),'GE':_0x1b7485(0x15f),'GR':_0x1b7485(0x159),'HR':_0x1b7485(0x1bb),'HU':_0x1b7485(0x19e),'IE':'IRL','IS':_0x1b7485(0x176),'IT':'ITA','LI':_0x1b7485(0x178),'LT':_0x1b7485(0x14f),'LU':_0x1b7485(0x1b1),'LV':_0x1b7485(0x146),'MC':_0x1b7485(0x12d),'MD':_0x1b7485(0x1c3),'ME':_0x1b7485(0x18b),'MK':_0x1b7485(0x194),'MT':_0x1b7485(0x177),'NL':_0x1b7485(0x1a6),'NO':_0x1b7485(0x15a),'PL':_0x1b7485(0x196),'PT':'PRT','RO':'ROU','RS':_0x1b7485(0x137),'RU':'RUS','SE':_0x1b7485(0x144),'SI':'SVN','SK':_0x1b7485(0x123),'SM':_0x1b7485(0x150),'UA':_0x1b7485(0x16a),'VA':_0x1b7485(0x18a),'XK':_0x1b7485(0x17a),'AM':_0x1b7485(0x17c),'AZ':_0x1b7485(0x1b9),'KZ':_0x1b7485(0x153),'KG':_0x1b7485(0x175),'TJ':_0x1b7485(0x189),'TM':'TKM','UZ':'UZB','US':'USA','CA':'CAN','AU':_0x1b7485(0x1b5),'JP':'JPN','CN':_0x1b7485(0x138),'IN':_0x1b7485(0x1bf),'BR':_0x1b7485(0x139),'MX':_0x1b7485(0x172),'AR':_0x1b7485(0x199),'CL':_0x1b7485(0x157),'PE':_0x1b7485(0x163),'CO':_0x1b7485(0x1c6),'VE':_0x1b7485(0x1b8),'EC':_0x1b7485(0x132),'BO':_0x1b7485(0x1a9),'PY':_0x1b7485(0x143),'UY':_0x1b7485(0x184),'SR':_0x1b7485(0x15e),'GY':_0x1b7485(0x1b4),'FK':'FLK','ZA':_0x1b7485(0x18e),'EG':_0x1b7485(0x166),'NG':_0x1b7485(0x126),'KE':'KEN','GH':'GHA','TZ':'TZA','UG':_0x1b7485(0x1ad),'ZW':'ZWE','ZM':_0x1b7485(0x168),'MW':_0x1b7485(0x14d),'MZ':_0x1b7485(0x11e),'MG':'MDG','MU':_0x1b7485(0x183),'SC':'SYC','RE':_0x1b7485(0x14a),'TR':_0x1b7485(0x155),'IR':_0x1b7485(0x13f),'IQ':_0x1b7485(0x16d),'SA':_0x1b7485(0x1c1),'AE':'ARE','KW':'KWT','QA':_0x1b7485(0x16b),'BH':_0x1b7485(0x122),'OM':'OMN','YE':_0x1b7485(0x131),'JO':_0x1b7485(0x120),'LB':_0x1b7485(0x185),'SY':_0x1b7485(0x1a0),'IL':'ISR','PS':_0x1b7485(0x1b2),'KR':'KOR','KP':_0x1b7485(0x1ab),'TH':_0x1b7485(0x1b0),'VN':_0x1b7485(0x1a1),'MY':_0x1b7485(0x1c2),'SG':'SGP','ID':_0x1b7485(0x182),'PH':_0x1b7485(0x1c0),'LA':_0x1b7485(0x167),'KH':_0x1b7485(0x191),'MM':_0x1b7485(0x170),'BD':_0x1b7485(0x1a8),'LK':'LKA','NP':_0x1b7485(0x1a5),'BT':_0x1b7485(0x174),'MV':_0x1b7485(0x1a4),'AF':_0x1b7485(0x129),'PK':_0x1b7485(0x16e),'MN':_0x1b7485(0x16f)},_0x2e5140=_0x1b3435[_0x49dacb[_0x1b7485(0x17e)]()];if(!_0x2e5140)return console[_0x1b7485(0x151)](_0x1b7485(0x13e)+_0x49dacb+',\x20using\x20RUS\x20as\x20fallback'),_0x1b7485(0x1bc);return _0x2e5140;}async[a42_0x261525(0x13b)](_0x5452a1){const _0x1fda19=a42_0x261525;try{const {orderId:_0x34ecd6,amount:_0x1ae7c6,currency:_0x330eb7,firstName:_0x80e56f,lastName:_0x3e9263,email:_0x1ee45d,customerIp:_0x34043f,customerCountry:_0x482ca2,successUrl:_0x3b0176,failureUrl:_0x248bf1}=_0x5452a1;console[_0x1fda19(0x156)]('üá¶üá≤\x20Creating\x20AmPay\x20payment\x20link...'),console['log'](_0x1fda19(0x1ae),_0x34ecd6),console[_0x1fda19(0x156)]('Amount:',_0x1ae7c6,_0x330eb7),console['log']('Customer:',_0x80e56f+'\x20'+_0x3e9263),console[_0x1fda19(0x156)](_0x1fda19(0x145),_0x1ee45d),console[_0x1fda19(0x156)](_0x1fda19(0x1bd),_0x34043f),console[_0x1fda19(0x156)](_0x1fda19(0x1c8),_0x482ca2);const _0x376c76=this['convert2LetterTo3LetterCountryCode'](_0x482ca2);console[_0x1fda19(0x156)](_0x1fda19(0x121),_0x376c76);const _0x31b79d={'sub_method':_0x1fda19(0x1b7),'currency':_0x330eb7[_0x1fda19(0x17e)](),'amount':_0x1ae7c6,'callback_url':_0x1fda19(0x12f),'client_merchant_id':this['CLIENT_MERCHANT_ID'],'client_transaction_id':_0x34ecd6,'transaction_description':_0x34ecd6,'customer':{'ip':_0x34043f,'email':_0x1ee45d,'full_name':_0x80e56f+'\x20'+_0x3e9263,'country':_0x376c76},'success_redirect_url':_0x3b0176,'error_redirect_url':_0x248bf1};console[_0x1fda19(0x156)](_0x1fda19(0x15b),JSON['stringify'](_0x31b79d,null,0x2));const _0x55f3ae=await fetch(this[_0x1fda19(0x162)]+_0x1fda19(0x1a2),{'method':_0x1fda19(0x12a),'headers':{'Content-Type':_0x1fda19(0x152),'User-Agent':_0x1fda19(0x198)},'body':JSON[_0x1fda19(0x135)](_0x31b79d)}),_0x20a2b7=await _0x55f3ae[_0x1fda19(0x1b6)]();console['log'](_0x1fda19(0x165),_0x20a2b7);if(!_0x55f3ae['ok'])throw new Error(_0x1fda19(0x136)+_0x55f3ae['status']+'\x20-\x20'+_0x20a2b7);let _0x1d99d9;try{_0x1d99d9=JSON[_0x1fda19(0x1c5)](_0x20a2b7);}catch(_0x2a3a58){throw new Error(_0x1fda19(0x1ba)+_0x20a2b7);}console['log'](_0x1fda19(0x160),JSON[_0x1fda19(0x135)](_0x1d99d9,null,0x2));if(!_0x1d99d9['redirect_url'])throw new Error(_0x1fda19(0x14b)+(_0x1d99d9[_0x1fda19(0x1b3)]||_0x1d99d9[_0x1fda19(0x1ac)]||_0x1fda19(0x130)));const _0x18af48=_0x1d99d9['redirect_url'],_0x4689e6=_0x1d99d9[_0x1fda19(0x158)],_0x52f119=_0x1d99d9[_0x1fda19(0x11d)];return console[_0x1fda19(0x156)](_0x1fda19(0x1a3)),console[_0x1fda19(0x156)](_0x1fda19(0x14c),_0x18af48),console[_0x1fda19(0x156)](_0x1fda19(0x179),_0x4689e6),console[_0x1fda19(0x156)](_0x1fda19(0x1aa),_0x52f119),console[_0x1fda19(0x156)](_0x1fda19(0x124),_0x1d99d9['status']),console[_0x1fda19(0x156)](_0x1fda19(0x169)),{'gateway_payment_id':_0x4689e6||_0x52f119||_0x34ecd6,'payment_url':_0x18af48||'','transaction_id':_0x4689e6};}catch(_0x7b7ef3){console[_0x1fda19(0x133)](_0x1fda19(0x19b),_0x7b7ef3),console[_0x1fda19(0x156)](_0x1fda19(0x15d));throw _0x7b7ef3;}}async['healthCheck'](){const _0x52e966=a42_0x261525;try{const _0x458ba9=await fetch(this[_0x52e966(0x162)]+_0x52e966(0x11f),{'method':_0x52e966(0x125),'headers':{'Content-Type':_0x52e966(0x152),'User-Agent':'TrapayAPI/1.0'}});return _0x458ba9&&_0x458ba9[_0x52e966(0x16c)]===0xc8?!![]:![];}catch(_0x2bacfd){return console['error'](_0x52e966(0x127),_0x2bacfd),![];}}async[a42_0x261525(0x17f)](_0x25018f){const _0x33c892=a42_0x261525;console[_0x33c892(0x156)](_0x33c892(0x12b)),console[_0x33c892(0x156)](_0x33c892(0x13d)),console[_0x33c892(0x156)](_0x33c892(0x147),_0x25018f),console[_0x33c892(0x156)](_0x33c892(0x1c7),typeof _0x25018f),console[_0x33c892(0x156)](_0x33c892(0x1c4));_0x25018f&&typeof _0x25018f==='object'&&Object[_0x33c892(0x19f)](_0x25018f)['forEach'](_0x395c34=>{console['log']('\x20\x20'+_0x395c34+':\x20'+_0x25018f[_0x395c34]+'\x20('+typeof _0x25018f[_0x395c34]+')');});let _0x5e8766=_0x33c892(0x1af);const _0x4ad6fc=_0x25018f[_0x33c892(0x19d)]||_0x25018f['system_id']||_0x25018f[_0x33c892(0x11d)]||'';return console['log'](_0x33c892(0x18c)+_0x4ad6fc),console['log'](_0x33c892(0x13c)+_0x5e8766),!_0x4ad6fc&&(console[_0x33c892(0x133)]('No\x20payment\x20ID\x20found\x20in\x20webhook\x20data'),console[_0x33c892(0x133)](_0x33c892(0x148))),{'paymentId':_0x4ad6fc,'status':_0x5e8766,'amount':_0x25018f[_0x33c892(0x188)],'currency':_0x25018f[_0x33c892(0x141)]};}}function a42_0x2561(){const _0x988329=['MMR','ESP','MEX','GBR','BTN','KGZ','ISL','MLT','LIE','System\x20ID:','XKX','60543IMzLLm','ARM','EST','toUpperCase','processWebhook','504jKApVi','__esModule','IDN','MUS','URY','LBN','23661UeXpnH','DEU','amount','TJK','VAT','MNE','Extracted\x20payment\x20ID:\x20','FIN','ZAF','185858EQrbWl','1730274nrQMew','KHM','1618588ztoeOY','üá¶üá≤\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing','MKD','ampayService','POL','3545340wCOLXe','TrapayAPI/1.0','ARG','CYP','‚ùå\x20AmPay\x20payment\x20creation\x20failed:','API_PRIVATE_KEY','client_transaction_id','HUN','keys','SYR','VNM','ampay.php','‚úÖ\x20AmPay\x20payment\x20link\x20created\x20successfully','MDV','NPL','NLD','10GHtbKE','BGD','BOL','Tracker\x20ID:','PRK','message','UGA','Order\x20ID:','PENDING','THA','LUX','PSE','error_message','GUY','AUS','text','GAM','VEN','AZE','Invalid\x20JSON\x20response\x20from\x20AmPay:\x20','HRV','RUS','Customer\x20IP:','https://traffer.uk/gateway/ampay/','IND','PHL','SAU','MYS','MDA','Available\x20fields:','parse','COL','Webhook\x20data\x20type:','Customer\x20Country\x20(2-letter):','4848312FoeIQX','tracker_id','MOZ','health.php','JOR','Customer\x20Country\x20(3-letter):','BHR','SVK','Status:','GET','NGA','‚ùå\x20AmPay\x20health\x20check\x20failed:','DNK','AFG','POST','===\x20Processing\x20AmPay\x20webhook\x20===','TRAFFER','MCO','AmPayService','https://api.trapay.uk/api/webhooks/gateway/ampay','Unknown\x20error','YEM','ECU','error','convert2LetterTo3LetterCountryCode','stringify','AmPay\x20API\x20error:\x20HTTP\x20','SRB','CHN','BRA','AUT','createPaymentLink','Forced\x20status\x20(webhook\x20disabled):\x20','‚ö†Ô∏è\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status','‚ö†Ô∏è\x20Unknown\x20country\x20code:\x20','IRN','BLR','currency','FRA','PRY','SWE','Email:','LVA','Webhook\x20data:','Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id','BIH','REU','AmPay\x20payment\x20creation\x20failed:\x20','Payment\x20URL:','MWI','AND','LTU','SMR','warn','application/json','KAZ','900IajyFU','TUR','log','CHL','system_id','GRC','NOR','üì§\x20AmPay\x20request\x20body:','7gqwyBY','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20failure...','SUR','GEO','üìä\x20AmPay\x20response\x20data:','ALB','apiUrl','PER','2cIjFoY','üì•\x20AmPay\x20raw\x20response:','EGY','LAO','ZMB','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20event...','UKR','QAT','status','IRQ','PAK','MNG'];a42_0x2561=function(){return _0x988329;};return a42_0x2561();}exports['AmPayService']=AmPayService,exports[a42_0x261525(0x195)]=new AmPayService();