'use strict';function a44_0x18a6(_0xe4521d,_0x5b6b64){const _0x566247=a44_0x5662();return a44_0x18a6=function(_0x18a60c,_0x5a148a){_0x18a60c=_0x18a60c-0x167;let _0x1a7aef=_0x566247[_0x18a60c];return _0x1a7aef;},a44_0x18a6(_0xe4521d,_0x5b6b64);}function a44_0x5662(){const _0x46f238=['TrapayAPI/1.0','THA','IRQ','ALB','📊\x20AmPay\x20response\x20data:','GEO','GRC','healthCheck','error_message','https://traffer.uk/gateway/ampay/webhook.php','LAO','tracker_id','PAK','Webhook\x20data:','SMR','HUN','parse','ampayService','CLIENT_MERCHANT_ID','BRA','1166881LFyMEd','defineProperty','forEach','__esModule','object','AND','Order\x20ID:','58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda','LVA','System\x20ID:','stringify','apiUrl','keys','BIH','SVK','ITA','CZE','CHE','redirect_url','139824MyHVsW','SGP','KWT',',\x20using\x20RUS\x20as\x20fallback','Unknown\x20error','ECU','IDN','AmPay\x20payment\x20creation\x20failed:\x20','TKM','BHR','BGD','processWebhook','ARM','API_PRIVATE_KEY','POL','KHM','EGY','message','CHL','✅\x20AmPay\x20payment\x20link\x20created\x20successfully','JOR','https://traffer.uk/gateway/ampay/','TRAFFER','KAZ','MWI','⚠️\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status','AmPayService','KEN','UKR','Available\x20fields:','161RbBXcW','18MTmNbh','Status:','warn','\x20-\x20','SYR','Invalid\x20JSON\x20response\x20from\x20AmPay:\x20','health.php','CHN','Extracted\x20payment\x20ID:\x20','189902azZAYT','PSE','📥\x20AmPay\x20raw\x20response:','23894496NmFJCH','YEM','ARE','CAN','POST','PENDING','Email:','AFG','DEU','MEX','AZE','SVN','No\x20payment\x20ID\x20found\x20in\x20webhook\x20data','SAU','Customer\x20Country\x20(2-letter):','HRV','OMN','20KXCrEQ','VEN','❌\x20AmPay\x20payment\x20creation\x20failed:','8IeatmG','📝\x20Logging\x20AmPay\x20payment\x20creation\x20event...','📝\x20Logging\x20AmPay\x20payment\x20creation\x20failure...','GET','RUS','ROU','BGR','⚠️\x20Unknown\x20country\x20code:\x20','currency','Customer\x20IP:','13623104OmVJHV','GUY','PRT','🇦🇲\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing','TUR','ESP','SWE','status','PRK','Customer:','system_id','AUS','4252875IZGdIk','MDG','AmPay\x20API\x20error:\x20HTTP\x20','KGZ','application/json','log','TZA','Forced\x20status\x20(webhook\x20disabled):\x20','JPN','MMR','MDA','Amount:','📤\x20AmPay\x20request\x20body:','FLK','GAM','MNG','VNM','VAT','MYS','AUT','1967485wIpZjx','createPaymentLink','ZWE','EST','QAT','UGA','error','MKD','PHL','toUpperCase','9DgOZtI','FRA','PER','GBR'];a44_0x5662=function(){return _0x46f238;};return a44_0x5662();}const a44_0x2d8751=a44_0x18a6;(function(_0x5bcd28,_0x51afff){const _0x28bdc5=a44_0x18a6,_0x42e173=_0x5bcd28();while(!![]){try{const _0x5ccabb=parseInt(_0x28bdc5(0x1f7))/0x1+parseInt(_0x28bdc5(0x194))/0x2*(parseInt(_0x28bdc5(0x18b))/0x3)+parseInt(_0x28bdc5(0x1ab))/0x4*(-parseInt(_0x28bdc5(0x1d5))/0x5)+-parseInt(_0x28bdc5(0x16c))/0x6*(parseInt(_0x28bdc5(0x18a))/0x7)+parseInt(_0x28bdc5(0x1b5))/0x8*(parseInt(_0x28bdc5(0x1df))/0x9)+-parseInt(_0x28bdc5(0x1a8))/0xa*(-parseInt(_0x28bdc5(0x1c1))/0xb)+-parseInt(_0x28bdc5(0x197))/0xc;if(_0x5ccabb===_0x51afff)break;else _0x42e173['push'](_0x42e173['shift']());}catch(_0x52bced){_0x42e173['push'](_0x42e173['shift']());}}}(a44_0x5662,0xdb5e3));Object[a44_0x2d8751(0x1f8)](exports,a44_0x2d8751(0x1fa),{'value':!![]}),exports[a44_0x2d8751(0x1f4)]=exports[a44_0x2d8751(0x186)]=void 0x0;class AmPayService{constructor(){const _0x3522e7=a44_0x2d8751;this[_0x3522e7(0x1f5)]=_0x3522e7(0x182),this['API_PUBLIC_KEY']=_0x3522e7(0x1fe),this[_0x3522e7(0x179)]='a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815',this['apiUrl']=_0x3522e7(0x181),console[_0x3522e7(0x1c6)](_0x3522e7(0x1b8));}['convert2LetterTo3LetterCountryCode'](_0x1428f2){const _0x7f03f7=a44_0x2d8751,_0x3397a1={'AD':_0x7f03f7(0x1fc),'AL':_0x7f03f7(0x1e6),'AT':_0x7f03f7(0x1d4),'BA':_0x7f03f7(0x204),'BE':'BEL','BG':_0x7f03f7(0x1b1),'BY':'BLR','CH':_0x7f03f7(0x16a),'CY':'CYP','CZ':_0x7f03f7(0x169),'DE':_0x7f03f7(0x19f),'DK':'DNK','EE':_0x7f03f7(0x1d8),'ES':_0x7f03f7(0x1ba),'FI':'FIN','FR':_0x7f03f7(0x1e0),'GB':_0x7f03f7(0x1e2),'GE':_0x7f03f7(0x1e8),'GR':_0x7f03f7(0x1e9),'HR':_0x7f03f7(0x1a6),'HU':_0x7f03f7(0x1f2),'IE':'IRL','IS':'ISL','IT':_0x7f03f7(0x168),'LI':'LIE','LT':'LTU','LU':'LUX','LV':_0x7f03f7(0x1ff),'MC':'MCO','MD':_0x7f03f7(0x1cb),'ME':'MNE','MK':_0x7f03f7(0x1dc),'MT':'MLT','NL':'NLD','NO':'NOR','PL':_0x7f03f7(0x17a),'PT':_0x7f03f7(0x1b7),'RO':_0x7f03f7(0x1b0),'RS':'SRB','RU':_0x7f03f7(0x1af),'SE':_0x7f03f7(0x1bb),'SI':_0x7f03f7(0x1a2),'SK':_0x7f03f7(0x167),'SM':_0x7f03f7(0x1f1),'UA':_0x7f03f7(0x188),'VA':_0x7f03f7(0x1d2),'XK':'XKX','AM':_0x7f03f7(0x178),'AZ':_0x7f03f7(0x1a1),'KZ':_0x7f03f7(0x183),'KG':_0x7f03f7(0x1c4),'TJ':'TJK','TM':_0x7f03f7(0x174),'UZ':'UZB','US':'USA','CA':_0x7f03f7(0x19a),'AU':_0x7f03f7(0x1c0),'JP':_0x7f03f7(0x1c9),'CN':_0x7f03f7(0x192),'IN':'IND','BR':_0x7f03f7(0x1f6),'MX':_0x7f03f7(0x1a0),'AR':'ARG','CL':_0x7f03f7(0x17e),'PE':_0x7f03f7(0x1e1),'CO':'COL','VE':_0x7f03f7(0x1a9),'EC':_0x7f03f7(0x171),'BO':'BOL','PY':'PRY','UY':'URY','SR':'SUR','GY':_0x7f03f7(0x1b6),'FK':_0x7f03f7(0x1ce),'ZA':'ZAF','EG':_0x7f03f7(0x17c),'NG':'NGA','KE':_0x7f03f7(0x187),'GH':'GHA','TZ':_0x7f03f7(0x1c7),'UG':_0x7f03f7(0x1da),'ZW':_0x7f03f7(0x1d7),'ZM':'ZMB','MW':_0x7f03f7(0x184),'MZ':'MOZ','MG':_0x7f03f7(0x1c2),'MU':'MUS','SC':'SYC','RE':'REU','TR':_0x7f03f7(0x1b9),'IR':'IRN','IQ':_0x7f03f7(0x1e5),'SA':_0x7f03f7(0x1a4),'AE':_0x7f03f7(0x199),'KW':_0x7f03f7(0x16e),'QA':_0x7f03f7(0x1d9),'BH':_0x7f03f7(0x175),'OM':_0x7f03f7(0x1a7),'YE':_0x7f03f7(0x198),'JO':_0x7f03f7(0x180),'LB':'LBN','SY':_0x7f03f7(0x18f),'IL':'ISR','PS':_0x7f03f7(0x195),'KR':'KOR','KP':_0x7f03f7(0x1bd),'TH':_0x7f03f7(0x1e4),'VN':_0x7f03f7(0x1d1),'MY':_0x7f03f7(0x1d3),'SG':_0x7f03f7(0x16d),'ID':_0x7f03f7(0x172),'PH':_0x7f03f7(0x1dd),'LA':_0x7f03f7(0x1ed),'KH':_0x7f03f7(0x17b),'MM':_0x7f03f7(0x1ca),'BD':_0x7f03f7(0x176),'LK':'LKA','NP':'NPL','BT':'BTN','MV':'MDV','AF':_0x7f03f7(0x19e),'PK':_0x7f03f7(0x1ef),'MN':_0x7f03f7(0x1d0)},_0x2c7469=_0x3397a1[_0x1428f2[_0x7f03f7(0x1de)]()];if(!_0x2c7469)return console[_0x7f03f7(0x18d)](_0x7f03f7(0x1b2)+_0x1428f2+_0x7f03f7(0x16f)),_0x7f03f7(0x1af);return _0x2c7469;}async[a44_0x2d8751(0x1d6)](_0x2fc748){const _0x47b259=a44_0x2d8751;try{const {orderId:_0x38289b,amount:_0x4c958a,currency:_0x4ae286,firstName:_0x4a2876,lastName:_0x467f6c,email:_0x3776c0,customerIp:_0x1db88f,customerCountry:_0x4494f5,successUrl:_0x5169ac,failureUrl:_0x323b2f}=_0x2fc748;console[_0x47b259(0x1c6)]('🇦🇲\x20Creating\x20AmPay\x20payment\x20link...'),console[_0x47b259(0x1c6)](_0x47b259(0x1fd),_0x38289b),console['log'](_0x47b259(0x1cc),_0x4c958a,_0x4ae286),console[_0x47b259(0x1c6)](_0x47b259(0x1be),_0x4a2876+'\x20'+_0x467f6c),console[_0x47b259(0x1c6)](_0x47b259(0x19d),_0x3776c0),console[_0x47b259(0x1c6)](_0x47b259(0x1b4),_0x1db88f),console[_0x47b259(0x1c6)](_0x47b259(0x1a5),_0x4494f5);const _0x446622=this['convert2LetterTo3LetterCountryCode'](_0x4494f5);console[_0x47b259(0x1c6)]('Customer\x20Country\x20(3-letter):',_0x446622);const _0x22ce67={'sub_method':_0x47b259(0x1cf),'currency':_0x4ae286[_0x47b259(0x1de)](),'amount':_0x4c958a,'callback_url':_0x47b259(0x1ec),'client_merchant_id':this[_0x47b259(0x1f5)],'client_transaction_id':_0x38289b,'transaction_description':_0x38289b,'customer':{'ip':_0x1db88f,'email':_0x3776c0,'full_name':_0x4a2876+'\x20'+_0x467f6c,'country':_0x446622},'success_redirect_url':_0x5169ac,'error_redirect_url':_0x323b2f};console[_0x47b259(0x1c6)](_0x47b259(0x1cd),JSON[_0x47b259(0x201)](_0x22ce67,null,0x2));const _0x3816bc=await fetch(this[_0x47b259(0x202)]+'ampay.php',{'method':_0x47b259(0x19b),'headers':{'Content-Type':_0x47b259(0x1c5),'User-Agent':_0x47b259(0x1e3)},'body':JSON[_0x47b259(0x201)](_0x22ce67)}),_0xd6b685=await _0x3816bc['text']();console[_0x47b259(0x1c6)](_0x47b259(0x196),_0xd6b685);if(!_0x3816bc['ok'])throw new Error(_0x47b259(0x1c3)+_0x3816bc[_0x47b259(0x1bc)]+_0x47b259(0x18e)+_0xd6b685);let _0x401af2;try{_0x401af2=JSON[_0x47b259(0x1f3)](_0xd6b685);}catch(_0x2b6c2a){throw new Error(_0x47b259(0x190)+_0xd6b685);}console[_0x47b259(0x1c6)](_0x47b259(0x1e7),JSON['stringify'](_0x401af2,null,0x2));if(!_0x401af2[_0x47b259(0x16b)])throw new Error(_0x47b259(0x173)+(_0x401af2[_0x47b259(0x1eb)]||_0x401af2[_0x47b259(0x17d)]||_0x47b259(0x170)));const _0x29ad6b=_0x401af2[_0x47b259(0x16b)],_0x3f9757=_0x401af2['system_id'],_0x4b91bf=_0x401af2[_0x47b259(0x1ee)];return console['log'](_0x47b259(0x17f)),console[_0x47b259(0x1c6)]('Payment\x20URL:',_0x29ad6b),console[_0x47b259(0x1c6)](_0x47b259(0x200),_0x3f9757),console['log']('Tracker\x20ID:',_0x4b91bf),console['log'](_0x47b259(0x18c),_0x401af2[_0x47b259(0x1bc)]),console['log'](_0x47b259(0x1ac)),{'gateway_payment_id':_0x3f9757||_0x4b91bf||_0x38289b,'payment_url':_0x29ad6b||'','transaction_id':_0x3f9757};}catch(_0x1614b3){console[_0x47b259(0x1db)](_0x47b259(0x1aa),_0x1614b3),console[_0x47b259(0x1c6)](_0x47b259(0x1ad));throw _0x1614b3;}}async[a44_0x2d8751(0x1ea)](){const _0x57f167=a44_0x2d8751;try{const _0x104802=await fetch(this['apiUrl']+_0x57f167(0x191),{'method':_0x57f167(0x1ae),'headers':{'Content-Type':_0x57f167(0x1c5),'User-Agent':_0x57f167(0x1e3)}});return _0x104802&&_0x104802[_0x57f167(0x1bc)]===0xc8?!![]:![];}catch(_0x514454){return console[_0x57f167(0x1db)]('❌\x20AmPay\x20health\x20check\x20failed:',_0x514454),![];}}async[a44_0x2d8751(0x177)](_0x33d72a){const _0x1ff768=a44_0x2d8751;console['log']('===\x20Processing\x20AmPay\x20webhook\x20==='),console[_0x1ff768(0x1c6)](_0x1ff768(0x185)),console[_0x1ff768(0x1c6)](_0x1ff768(0x1f0),_0x33d72a),console[_0x1ff768(0x1c6)]('Webhook\x20data\x20type:',typeof _0x33d72a),console['log'](_0x1ff768(0x189));_0x33d72a&&typeof _0x33d72a===_0x1ff768(0x1fb)&&Object[_0x1ff768(0x203)](_0x33d72a)[_0x1ff768(0x1f9)](_0x2014cf=>{const _0x349018=_0x1ff768;console[_0x349018(0x1c6)]('\x20\x20'+_0x2014cf+':\x20'+_0x33d72a[_0x2014cf]+'\x20('+typeof _0x33d72a[_0x2014cf]+')');});let _0x92a66d=_0x1ff768(0x19c);const _0x2fada0=_0x33d72a['client_transaction_id']||_0x33d72a[_0x1ff768(0x1bf)]||_0x33d72a['tracker_id']||'';return console[_0x1ff768(0x1c6)](_0x1ff768(0x193)+_0x2fada0),console[_0x1ff768(0x1c6)](_0x1ff768(0x1c8)+_0x92a66d),!_0x2fada0&&(console[_0x1ff768(0x1db)](_0x1ff768(0x1a3)),console[_0x1ff768(0x1db)]('Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id')),{'paymentId':_0x2fada0,'status':_0x92a66d,'amount':_0x33d72a['amount'],'currency':_0x33d72a[_0x1ff768(0x1b3)]};}}exports[a44_0x2d8751(0x186)]=AmPayService,exports[a44_0x2d8751(0x1f4)]=new AmPayService();