'use strict';const a44_0x5127b5=a44_0x22f5;(function(_0x49e225,_0x4814da){const _0x5530ae=a44_0x22f5,_0x4dbe6f=_0x49e225();while(!![]){try{const _0x321200=-parseInt(_0x5530ae(0x193))/0x1+-parseInt(_0x5530ae(0x1cf))/0x2*(-parseInt(_0x5530ae(0x1ce))/0x3)+-parseInt(_0x5530ae(0x19c))/0x4*(parseInt(_0x5530ae(0x1f8))/0x5)+-parseInt(_0x5530ae(0x1e9))/0x6*(-parseInt(_0x5530ae(0x1d7))/0x7)+-parseInt(_0x5530ae(0x21c))/0x8+-parseInt(_0x5530ae(0x220))/0x9+parseInt(_0x5530ae(0x190))/0xa;if(_0x321200===_0x4814da)break;else _0x4dbe6f['push'](_0x4dbe6f['shift']());}catch(_0xfeb893){_0x4dbe6f['push'](_0x4dbe6f['shift']());}}}(a44_0x2bd5,0x52fb2));function a44_0x22f5(_0x233727,_0x930b2a){const _0x2bd52d=a44_0x2bd5();return a44_0x22f5=function(_0x22f581,_0x1f0474){_0x22f581=_0x22f581-0x17f;let _0x1d88cb=_0x2bd52d[_0x22f581];return _0x1d88cb;},a44_0x22f5(_0x233727,_0x930b2a);}Object[a44_0x5127b5(0x1d4)](exports,a44_0x5127b5(0x217),{'value':!![]}),exports[a44_0x5127b5(0x17f)]=exports['AmPayService']=void 0x0;class AmPayService{constructor(){const _0x125703=a44_0x5127b5;this['CLIENT_MERCHANT_ID']='TRAFFER',this[_0x125703(0x1d6)]='58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda',this[_0x125703(0x216)]=_0x125703(0x18f),this[_0x125703(0x19f)]=_0x125703(0x224),console[_0x125703(0x1e2)](_0x125703(0x212));}['convert2LetterTo3LetterCountryCode'](_0x2dee86){const _0x6ccf12=a44_0x5127b5,_0x313d67={'AD':'AND','AL':'ALB','AT':_0x6ccf12(0x1b1),'BA':_0x6ccf12(0x1ae),'BE':_0x6ccf12(0x1ed),'BG':_0x6ccf12(0x1dc),'BY':_0x6ccf12(0x226),'CH':_0x6ccf12(0x1f9),'CY':_0x6ccf12(0x1e6),'CZ':'CZE','DE':'DEU','DK':_0x6ccf12(0x1dd),'EE':_0x6ccf12(0x21e),'ES':'ESP','FI':_0x6ccf12(0x1aa),'FR':_0x6ccf12(0x1cb),'GB':'GBR','GE':_0x6ccf12(0x1b2),'GR':'GRC','HR':_0x6ccf12(0x1b3),'HU':_0x6ccf12(0x180),'IE':_0x6ccf12(0x1f6),'IS':'ISL','IT':_0x6ccf12(0x203),'LI':'LIE','LT':_0x6ccf12(0x1cc),'LU':'LUX','LV':'LVA','MC':_0x6ccf12(0x1f4),'MD':_0x6ccf12(0x1c4),'ME':'MNE','MK':_0x6ccf12(0x1f2),'MT':_0x6ccf12(0x209),'NL':_0x6ccf12(0x1a7),'NO':_0x6ccf12(0x22a),'PL':_0x6ccf12(0x1a4),'PT':_0x6ccf12(0x1b0),'RO':'ROU','RS':'SRB','RU':_0x6ccf12(0x196),'SE':_0x6ccf12(0x1f7),'SI':'SVN','SK':_0x6ccf12(0x1a2),'SM':_0x6ccf12(0x186),'UA':'UKR','VA':_0x6ccf12(0x1e8),'XK':_0x6ccf12(0x1f5),'AM':_0x6ccf12(0x1e1),'AZ':_0x6ccf12(0x21a),'KZ':_0x6ccf12(0x195),'KG':_0x6ccf12(0x1c6),'TJ':_0x6ccf12(0x1df),'TM':_0x6ccf12(0x191),'UZ':_0x6ccf12(0x18b),'US':_0x6ccf12(0x1b8),'CA':_0x6ccf12(0x19b),'AU':'AUS','JP':_0x6ccf12(0x1fd),'CN':_0x6ccf12(0x1bb),'IN':_0x6ccf12(0x1da),'BR':_0x6ccf12(0x1ac),'MX':_0x6ccf12(0x1a9),'AR':_0x6ccf12(0x20f),'CL':_0x6ccf12(0x181),'PE':_0x6ccf12(0x1e7),'CO':_0x6ccf12(0x20c),'VE':_0x6ccf12(0x185),'EC':_0x6ccf12(0x1a6),'BO':'BOL','PY':'PRY','UY':_0x6ccf12(0x204),'SR':_0x6ccf12(0x211),'GY':_0x6ccf12(0x184),'FK':'FLK','ZA':'ZAF','EG':'EGY','NG':_0x6ccf12(0x19d),'KE':_0x6ccf12(0x1de),'GH':_0x6ccf12(0x1ea),'TZ':'TZA','UG':'UGA','ZW':'ZWE','ZM':_0x6ccf12(0x18e),'MW':_0x6ccf12(0x221),'MZ':_0x6ccf12(0x1d2),'MG':_0x6ccf12(0x20a),'MU':_0x6ccf12(0x1e5),'SC':_0x6ccf12(0x188),'RE':_0x6ccf12(0x225),'TR':_0x6ccf12(0x1ad),'IR':_0x6ccf12(0x1c2),'IQ':_0x6ccf12(0x22b),'SA':_0x6ccf12(0x1c8),'AE':_0x6ccf12(0x201),'KW':_0x6ccf12(0x1a1),'QA':_0x6ccf12(0x1a3),'BH':_0x6ccf12(0x1a0),'OM':_0x6ccf12(0x182),'YE':_0x6ccf12(0x202),'JO':'JOR','LB':_0x6ccf12(0x207),'SY':_0x6ccf12(0x1eb),'IL':_0x6ccf12(0x205),'PS':_0x6ccf12(0x19a),'KR':_0x6ccf12(0x214),'KP':_0x6ccf12(0x1b7),'TH':_0x6ccf12(0x1ab),'VN':_0x6ccf12(0x18d),'MY':'MYS','SG':_0x6ccf12(0x1fc),'ID':_0x6ccf12(0x20e),'PH':_0x6ccf12(0x1b5),'LA':_0x6ccf12(0x1ef),'KH':_0x6ccf12(0x1be),'MM':_0x6ccf12(0x1ec),'BD':_0x6ccf12(0x1c3),'LK':'LKA','NP':_0x6ccf12(0x210),'BT':_0x6ccf12(0x200),'MV':_0x6ccf12(0x1e3),'AF':_0x6ccf12(0x194),'PK':_0x6ccf12(0x1bf),'MN':_0x6ccf12(0x228)},_0x1e7e78=_0x313d67[_0x2dee86['toUpperCase']()];if(!_0x1e7e78)return console[_0x6ccf12(0x218)](_0x6ccf12(0x20d)+_0x2dee86+_0x6ccf12(0x1d8)),'RUS';return _0x1e7e78;}async['createPaymentLink'](_0x4490ed){const _0x5e89f9=a44_0x5127b5;try{const {orderId:_0x34b702,amount:_0x58c694,currency:_0x342f21,firstName:_0x1b0a91,lastName:_0x554b71,email:_0x32d1a9,customerIp:_0x1bd5ca,customerCountry:_0x102370,successUrl:_0x5f0893,failureUrl:_0x70a37e}=_0x4490ed;console[_0x5e89f9(0x1e2)](_0x5e89f9(0x1ee)),console[_0x5e89f9(0x1e2)](_0x5e89f9(0x21f),_0x34b702),console[_0x5e89f9(0x1e2)](_0x5e89f9(0x219),_0x58c694,_0x342f21),console[_0x5e89f9(0x1e2)](_0x5e89f9(0x21d),_0x1b0a91+'\x20'+_0x554b71),console['log'](_0x5e89f9(0x1af),_0x32d1a9),console[_0x5e89f9(0x1e2)](_0x5e89f9(0x199),_0x1bd5ca),console[_0x5e89f9(0x1e2)](_0x5e89f9(0x1d3),_0x102370);const _0x1ffb9d=this['convert2LetterTo3LetterCountryCode'](_0x102370);console[_0x5e89f9(0x1e2)]('Customer\x20Country\x20(3-letter):',_0x1ffb9d);const _0x252e72={'sub_method':_0x5e89f9(0x1ba),'currency':_0x342f21[_0x5e89f9(0x215)](),'amount':_0x58c694,'callback_url':'https://traffer.uk/gateway/ampay/webhook.php','client_merchant_id':this[_0x5e89f9(0x1b6)],'client_transaction_id':_0x34b702,'transaction_description':_0x34b702,'customer':{'ip':_0x1bd5ca,'email':_0x32d1a9,'full_name':_0x1b0a91+'\x20'+_0x554b71,'country':_0x1ffb9d},'success_redirect_url':_0x5f0893,'error_redirect_url':_0x70a37e};console[_0x5e89f9(0x1e2)]('üì§\x20AmPay\x20request\x20body:',JSON['stringify'](_0x252e72,null,0x2));const _0x3a2c73=await fetch(this[_0x5e89f9(0x19f)]+'ampay.php',{'method':_0x5e89f9(0x1ca),'headers':{'Content-Type':_0x5e89f9(0x1b9),'User-Agent':_0x5e89f9(0x18c)},'body':JSON[_0x5e89f9(0x1d0)](_0x252e72)}),_0xe8edd3=await _0x3a2c73[_0x5e89f9(0x1d1)]();console[_0x5e89f9(0x1e2)](_0x5e89f9(0x1e4),_0xe8edd3);if(!_0x3a2c73['ok'])throw new Error('AmPay\x20API\x20error:\x20HTTP\x20'+_0x3a2c73[_0x5e89f9(0x1a8)]+_0x5e89f9(0x1fa)+_0xe8edd3);let _0x1309aa;try{_0x1309aa=JSON[_0x5e89f9(0x1c0)](_0xe8edd3);}catch(_0x5f4168){throw new Error(_0x5e89f9(0x1bd)+_0xe8edd3);}console[_0x5e89f9(0x1e2)](_0x5e89f9(0x213),JSON[_0x5e89f9(0x1d0)](_0x1309aa,null,0x2));if(!_0x1309aa['redirect_url'])throw new Error(_0x5e89f9(0x1d5)+(_0x1309aa[_0x5e89f9(0x1ff)]||_0x1309aa[_0x5e89f9(0x189)]||_0x5e89f9(0x222)));const _0x2bcce1=_0x1309aa[_0x5e89f9(0x1bc)],_0x32f551=_0x1309aa[_0x5e89f9(0x197)],_0x34e208=_0x1309aa[_0x5e89f9(0x19e)];return console[_0x5e89f9(0x1e2)](_0x5e89f9(0x227)),console[_0x5e89f9(0x1e2)]('Payment\x20URL:',_0x2bcce1),console['log'](_0x5e89f9(0x1db),_0x32f551),console[_0x5e89f9(0x1e2)](_0x5e89f9(0x1e0),_0x34e208),console[_0x5e89f9(0x1e2)](_0x5e89f9(0x1f3),_0x1309aa[_0x5e89f9(0x1a8)]),console[_0x5e89f9(0x1e2)](_0x5e89f9(0x1fe)),{'gateway_payment_id':_0x32f551||_0x34e208||_0x34b702,'payment_url':_0x2bcce1||'','transaction_id':_0x32f551};}catch(_0x4d87eb){console[_0x5e89f9(0x21b)](_0x5e89f9(0x1d9),_0x4d87eb),console[_0x5e89f9(0x1e2)](_0x5e89f9(0x18a));throw _0x4d87eb;}}async['healthCheck'](){const _0x82f962=a44_0x5127b5;try{const _0x54557e=await fetch(this[_0x82f962(0x19f)]+_0x82f962(0x1cd),{'method':_0x82f962(0x1fb),'headers':{'Content-Type':_0x82f962(0x1b9),'User-Agent':'TrapayAPI/1.0'}});return _0x54557e&&_0x54557e[_0x82f962(0x1a8)]===0xc8?!![]:![];}catch(_0x436dc1){return console['error'](_0x82f962(0x198),_0x436dc1),![];}}async[a44_0x5127b5(0x20b)](_0x1e217a){const _0x198d77=a44_0x5127b5;console[_0x198d77(0x1e2)](_0x198d77(0x1f1)),console[_0x198d77(0x1e2)](_0x198d77(0x1c7)),console[_0x198d77(0x1e2)](_0x198d77(0x1f0),_0x1e217a),console[_0x198d77(0x1e2)](_0x198d77(0x206),typeof _0x1e217a),console[_0x198d77(0x1e2)](_0x198d77(0x1c1));_0x1e217a&&typeof _0x1e217a==='object'&&Object['keys'](_0x1e217a)[_0x198d77(0x1b4)](_0x2e6989=>{const _0x7a30fd=_0x198d77;console[_0x7a30fd(0x1e2)]('\x20\x20'+_0x2e6989+':\x20'+_0x1e217a[_0x2e6989]+'\x20('+typeof _0x1e217a[_0x2e6989]+')');});let _0x1f8b2e=_0x198d77(0x183);const _0x439346=_0x1e217a[_0x198d77(0x1a5)]||_0x1e217a[_0x198d77(0x197)]||_0x1e217a[_0x198d77(0x19e)]||'';return console[_0x198d77(0x1e2)](_0x198d77(0x229)+_0x439346),console['log'](_0x198d77(0x223)+_0x1f8b2e),!_0x439346&&(console[_0x198d77(0x21b)](_0x198d77(0x1c5)),console[_0x198d77(0x21b)](_0x198d77(0x1c9))),{'paymentId':_0x439346,'status':_0x1f8b2e,'amount':_0x1e217a[_0x198d77(0x192)],'currency':_0x1e217a[_0x198d77(0x187)]};}}exports[a44_0x5127b5(0x208)]=AmPayService,exports[a44_0x5127b5(0x17f)]=new AmPayService();function a44_0x2bd5(){const _0x44737f=['üì•\x20AmPay\x20raw\x20response:','MUS','CYP','PER','VAT','6oYxaOc','GHA','SYR','MMR','BEL','üá¶üá≤\x20Creating\x20AmPay\x20payment\x20link...','LAO','Webhook\x20data:','===\x20Processing\x20AmPay\x20webhook\x20===','MKD','Status:','MCO','XKX','IRL','SWE','193745uYVzqc','CHE','\x20-\x20','GET','SGP','JPN','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20event...','error_message','BTN','ARE','YEM','ITA','URY','ISR','Webhook\x20data\x20type:','LBN','AmPayService','MLT','MDG','processWebhook','COL','‚ö†Ô∏è\x20Unknown\x20country\x20code:\x20','IDN','ARG','NPL','SUR','üá¶üá≤\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing','üìä\x20AmPay\x20response\x20data:','KOR','toUpperCase','API_PRIVATE_KEY','__esModule','warn','Amount:','AZE','error','5423440hcgtzt','Customer:','EST','Order\x20ID:','3819006iQHHuj','MWI','Unknown\x20error','Forced\x20status\x20(webhook\x20disabled):\x20','https://traffer.uk/gateway/ampay/','REU','BLR','‚úÖ\x20AmPay\x20payment\x20link\x20created\x20successfully','MNG','Extracted\x20payment\x20ID:\x20','NOR','IRQ','ampayService','HUN','CHL','OMN','PENDING','GUY','VEN','SMR','currency','SYC','message','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20failure...','UZB','TrapayAPI/1.0','VNM','ZMB','a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815','10759480TyWSfZ','TKM','amount','315921UXQTbp','AFG','KAZ','RUS','system_id','‚ùå\x20AmPay\x20health\x20check\x20failed:','Customer\x20IP:','PSE','CAN','4CxQnVT','NGA','tracker_id','apiUrl','BHR','KWT','SVK','QAT','POL','client_transaction_id','ECU','NLD','status','MEX','FIN','THA','BRA','TUR','BIH','Email:','PRT','AUT','GEO','HRV','forEach','PHL','CLIENT_MERCHANT_ID','PRK','USA','application/json','GAM','CHN','redirect_url','Invalid\x20JSON\x20response\x20from\x20AmPay:\x20','KHM','PAK','parse','Available\x20fields:','IRN','BGD','MDA','No\x20payment\x20ID\x20found\x20in\x20webhook\x20data','KGZ','‚ö†Ô∏è\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status','SAU','Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id','POST','FRA','LTU','health.php','945429tpWnsD','2kWTGau','stringify','text','MOZ','Customer\x20Country\x20(2-letter):','defineProperty','AmPay\x20payment\x20creation\x20failed:\x20','API_PUBLIC_KEY','2840131QntCqN',',\x20using\x20RUS\x20as\x20fallback','‚ùå\x20AmPay\x20payment\x20creation\x20failed:','IND','System\x20ID:','BGR','DNK','KEN','TJK','Tracker\x20ID:','ARM','log','MDV'];a44_0x2bd5=function(){return _0x44737f;};return a44_0x2bd5();}