'use strict';const a62_0x2aa9ea=a62_0x129e;function a62_0x129e(_0x333f36,_0x2dacca){_0x333f36=_0x333f36-0x6c;const _0x30612b=a62_0x3061();let _0x129ed8=_0x30612b[_0x333f36];return _0x129ed8;}(function(_0x569660,_0x56a882){const _0x81aea6=a62_0x129e,_0x283143=_0x569660();while(!![]){try{const _0x5ac54e=parseInt(_0x81aea6(0xef))/0x1+parseInt(_0x81aea6(0xce))/0x2+-parseInt(_0x81aea6(0xa8))/0x3*(-parseInt(_0x81aea6(0x10d))/0x4)+parseInt(_0x81aea6(0xa7))/0x5+parseInt(_0x81aea6(0x107))/0x6*(parseInt(_0x81aea6(0xd3))/0x7)+parseInt(_0x81aea6(0xc0))/0x8*(parseInt(_0x81aea6(0xf6))/0x9)+-parseInt(_0x81aea6(0x74))/0xa;if(_0x5ac54e===_0x56a882)break;else _0x283143['push'](_0x283143['shift']());}catch(_0x1063e5){_0x283143['push'](_0x283143['shift']());}}}(a62_0x3061,0x18dfd));function a62_0x3061(){const _0x59c645=['4pMzgTZ','IRQ','VNM','FIN','MEX','AND','UGA','AmPay\x20API\x20error:\x20HTTP\x20','PAK','UZB','TRAFFER','Webhook\x20data:','3985890VQHhKU','PHL','parse','ISR','KOR','BLR','FRA','BIH','ARG','SAU','VAT',',\x20using\x20RUS\x20as\x20fallback','ðŸ“¤\x20AmPay\x20request\x20body:','error','Customer\x20Country\x20(3-letter):','FLK','Invalid\x20JSON\x20response\x20from\x20AmPay:\x20','system_id','ITA','BEL','ðŸ“\x20Logging\x20AmPay\x20payment\x20creation\x20event...','Order\x20ID:','SMR','__esModule','BGD','58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda','health.php','ampay.php','IDN','PSE','forEach','Tracker\x20ID:','Forced\x20status\x20(webhook\x20disabled):\x20','COL','KGZ','QAT','===\x20Processing\x20AmPay\x20webhook\x20===','AZE','warn','MOZ','ðŸ‡¦ðŸ‡²\x20Creating\x20AmPay\x20payment\x20link...','Webhook\x20data\x20type:','MLT','ECU','ðŸ‡¦ðŸ‡²\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing','API_PRIVATE_KEY','GAM','ðŸ“\x20Logging\x20AmPay\x20payment\x20creation\x20failure...','MDA','log','toUpperCase','734420GqLMDe','133473iSAXDo','NLD','PER','ZMB','MKD','CHE','Email:','healthCheck','THA','createPaymentLink','RUS','MMR','GBR','ZWE','EGY','ALB','PENDING','JOR','SWE','Payment\x20URL:','stringify','âš ï¸\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status','Extracted\x20payment\x20ID:\x20','defineProperty','40dGgcCM','HRV','No\x20payment\x20ID\x20found\x20in\x20webhook\x20data','UKR','KAZ','CZE','SYR','client_transaction_id','TKM','Unknown\x20error','MCO','ðŸ“¥\x20AmPay\x20raw\x20response:','Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id','YEM','242626OksMmd','GUY','MYS','AmPayService','IRL','14KpHNHL','ARM','redirect_url','TUR','System\x20ID:','MNG','POL','application/json','PRK','MUS','LVA','EST','ISL','KHM','Customer\x20IP:','DNK','ZAF','apiUrl','status','LIE','ARE','error_message','API_PUBLIC_KEY','tracker_id','keys','NOR','CHL','SRB','88587EpLppI','URY','PRT','Amount:','amount','GEO','SGP','13023oczaRM','BHR','KWT','TJK','GHA','processWebhook','ROU','Customer\x20Country\x20(2-letter):','a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815','MWI','ampayService','AUS','currency','Customer:','GET','MDV','SUR','275892FhMFmc','DEU','BOL','ESP','\x20-\x20','TZA'];a62_0x3061=function(){return _0x59c645;};return a62_0x3061();}Object[a62_0x2aa9ea(0xbf)](exports,a62_0x2aa9ea(0x8b),{'value':!![]}),exports['ampayService']=exports[a62_0x2aa9ea(0xd1)]=void 0x0;class AmPayService{constructor(){const _0x5b2690=a62_0x2aa9ea;this['CLIENT_MERCHANT_ID']=_0x5b2690(0x72),this[_0x5b2690(0xe9)]=_0x5b2690(0x8d),this[_0x5b2690(0xa1)]=_0x5b2690(0xfe),this[_0x5b2690(0xe4)]='https://traffer.uk/gateway/ampay/',console[_0x5b2690(0xa5)](_0x5b2690(0xa0));}['convert2LetterTo3LetterCountryCode'](_0x26d9cd){const _0x215883=a62_0x2aa9ea,_0x50f26e={'AD':_0x215883(0x6d),'AL':_0x215883(0xb7),'AT':'AUT','BA':_0x215883(0x7b),'BE':_0x215883(0x87),'BG':'BGR','BY':_0x215883(0x79),'CH':_0x215883(0xad),'CY':'CYP','CZ':_0x215883(0xc5),'DE':_0x215883(0x108),'DK':_0x215883(0xe2),'EE':_0x215883(0xde),'ES':_0x215883(0x10a),'FI':_0x215883(0x110),'FR':_0x215883(0x7a),'GB':_0x215883(0xb4),'GE':_0x215883(0xf4),'GR':'GRC','HR':_0x215883(0xc1),'HU':'HUN','IE':_0x215883(0xd2),'IS':_0x215883(0xdf),'IT':_0x215883(0x86),'LI':_0x215883(0xe6),'LT':'LTU','LU':'LUX','LV':_0x215883(0xdd),'MC':_0x215883(0xca),'MD':_0x215883(0xa4),'ME':'MNE','MK':_0x215883(0xac),'MT':_0x215883(0x9e),'NL':_0x215883(0xa9),'NO':_0x215883(0xec),'PL':_0x215883(0xd9),'PT':_0x215883(0xf1),'RO':_0x215883(0xfc),'RS':_0x215883(0xee),'RU':_0x215883(0xb2),'SE':_0x215883(0xba),'SI':'SVN','SK':'SVK','SM':_0x215883(0x8a),'UA':_0x215883(0xc3),'VA':_0x215883(0x7e),'XK':'XKX','AM':_0x215883(0xd4),'AZ':_0x215883(0x99),'KZ':_0x215883(0xc4),'KG':_0x215883(0x96),'TJ':_0x215883(0xf9),'TM':_0x215883(0xc8),'UZ':_0x215883(0x71),'US':'USA','CA':'CAN','AU':_0x215883(0x101),'JP':'JPN','CN':'CHN','IN':'IND','BR':'BRA','MX':_0x215883(0x6c),'AR':_0x215883(0x7c),'CL':_0x215883(0xed),'PE':_0x215883(0xaa),'CO':_0x215883(0x95),'VE':'VEN','EC':_0x215883(0x9f),'BO':_0x215883(0x109),'PY':'PRY','UY':_0x215883(0xf0),'SR':_0x215883(0x106),'GY':_0x215883(0xcf),'FK':_0x215883(0x83),'ZA':_0x215883(0xe3),'EG':_0x215883(0xb6),'NG':'NGA','KE':'KEN','GH':_0x215883(0xfa),'TZ':_0x215883(0x10c),'UG':_0x215883(0x6e),'ZW':_0x215883(0xb5),'ZM':_0x215883(0xab),'MW':_0x215883(0xff),'MZ':_0x215883(0x9b),'MG':'MDG','MU':_0x215883(0xdc),'SC':'SYC','RE':'REU','TR':_0x215883(0xd6),'IR':'IRN','IQ':_0x215883(0x10e),'SA':_0x215883(0x7d),'AE':_0x215883(0xe7),'KW':_0x215883(0xf8),'QA':_0x215883(0x97),'BH':_0x215883(0xf7),'OM':'OMN','YE':_0x215883(0xcd),'JO':_0x215883(0xb9),'LB':'LBN','SY':_0x215883(0xc6),'IL':_0x215883(0x77),'PS':_0x215883(0x91),'KR':_0x215883(0x78),'KP':_0x215883(0xdb),'TH':_0x215883(0xb0),'VN':_0x215883(0x10f),'MY':_0x215883(0xd0),'SG':_0x215883(0xf5),'ID':_0x215883(0x90),'PH':_0x215883(0x75),'LA':'LAO','KH':_0x215883(0xe0),'MM':_0x215883(0xb3),'BD':_0x215883(0x8c),'LK':'LKA','NP':'NPL','BT':'BTN','MV':_0x215883(0x105),'AF':'AFG','PK':_0x215883(0x70),'MN':_0x215883(0xd8)},_0x5ae1a7=_0x50f26e[_0x26d9cd[_0x215883(0xa6)]()];if(!_0x5ae1a7)return console[_0x215883(0x9a)]('âš ï¸\x20Unknown\x20country\x20code:\x20'+_0x26d9cd+_0x215883(0x7f)),_0x215883(0xb2);return _0x5ae1a7;}async[a62_0x2aa9ea(0xb1)](_0x4a190c){const _0x4cb4d9=a62_0x2aa9ea;try{const {orderId:_0x21ac8a,amount:_0x193130,currency:_0x3b9464,firstName:_0x48abd0,lastName:_0x3fb80f,email:_0x2d8fad,customerIp:_0x3425c9,customerCountry:_0x5473db,successUrl:_0x5a50cc,failureUrl:_0x3f61c1}=_0x4a190c;console[_0x4cb4d9(0xa5)](_0x4cb4d9(0x9c)),console[_0x4cb4d9(0xa5)](_0x4cb4d9(0x89),_0x21ac8a),console[_0x4cb4d9(0xa5)](_0x4cb4d9(0xf2),_0x193130,_0x3b9464),console[_0x4cb4d9(0xa5)](_0x4cb4d9(0x103),_0x48abd0+'\x20'+_0x3fb80f),console[_0x4cb4d9(0xa5)](_0x4cb4d9(0xae),_0x2d8fad),console[_0x4cb4d9(0xa5)](_0x4cb4d9(0xe1),_0x3425c9),console[_0x4cb4d9(0xa5)](_0x4cb4d9(0xfd),_0x5473db);const _0x16ea1e=this['convert2LetterTo3LetterCountryCode'](_0x5473db);console[_0x4cb4d9(0xa5)](_0x4cb4d9(0x82),_0x16ea1e);const _0x428901={'sub_method':_0x4cb4d9(0xa2),'currency':_0x3b9464[_0x4cb4d9(0xa6)](),'amount':_0x193130,'callback_url':'https://traffer.uk/gateway/ampay/webhook.php','client_merchant_id':this['CLIENT_MERCHANT_ID'],'client_transaction_id':_0x21ac8a,'transaction_description':_0x21ac8a,'customer':{'ip':_0x3425c9,'email':_0x2d8fad,'full_name':_0x48abd0+'\x20'+_0x3fb80f,'country':_0x16ea1e},'success_redirect_url':_0x5a50cc,'error_redirect_url':_0x3f61c1};console[_0x4cb4d9(0xa5)](_0x4cb4d9(0x80),JSON[_0x4cb4d9(0xbc)](_0x428901,null,0x2));const _0x3ab3c8=await fetch(this[_0x4cb4d9(0xe4)]+_0x4cb4d9(0x8f),{'method':'POST','headers':{'Content-Type':_0x4cb4d9(0xda),'User-Agent':'TrapayAPI/1.0'},'body':JSON[_0x4cb4d9(0xbc)](_0x428901)}),_0xc5615c=await _0x3ab3c8['text']();console[_0x4cb4d9(0xa5)](_0x4cb4d9(0xcb),_0xc5615c);if(!_0x3ab3c8['ok'])throw new Error(_0x4cb4d9(0x6f)+_0x3ab3c8['status']+_0x4cb4d9(0x10b)+_0xc5615c);let _0x36a57c;try{_0x36a57c=JSON[_0x4cb4d9(0x76)](_0xc5615c);}catch(_0x4d642e){throw new Error(_0x4cb4d9(0x84)+_0xc5615c);}console[_0x4cb4d9(0xa5)]('ðŸ“Š\x20AmPay\x20response\x20data:',JSON[_0x4cb4d9(0xbc)](_0x36a57c,null,0x2));if(!_0x36a57c[_0x4cb4d9(0xd5)])throw new Error('AmPay\x20payment\x20creation\x20failed:\x20'+(_0x36a57c[_0x4cb4d9(0xe8)]||_0x36a57c['message']||_0x4cb4d9(0xc9)));const _0x4d3790=_0x36a57c[_0x4cb4d9(0xd5)],_0x5aa7b5=_0x36a57c['system_id'],_0x5a8976=_0x36a57c[_0x4cb4d9(0xea)];return console[_0x4cb4d9(0xa5)]('âœ…\x20AmPay\x20payment\x20link\x20created\x20successfully'),console[_0x4cb4d9(0xa5)](_0x4cb4d9(0xbb),_0x4d3790),console['log'](_0x4cb4d9(0xd7),_0x5aa7b5),console[_0x4cb4d9(0xa5)](_0x4cb4d9(0x93),_0x5a8976),console[_0x4cb4d9(0xa5)]('Status:',_0x36a57c['status']),console[_0x4cb4d9(0xa5)](_0x4cb4d9(0x88)),{'gateway_payment_id':_0x5aa7b5||_0x5a8976||_0x21ac8a,'payment_url':_0x4d3790||'','transaction_id':_0x5aa7b5};}catch(_0x30b739){console[_0x4cb4d9(0x81)]('âŒ\x20AmPay\x20payment\x20creation\x20failed:',_0x30b739),console[_0x4cb4d9(0xa5)](_0x4cb4d9(0xa3));throw _0x30b739;}}async[a62_0x2aa9ea(0xaf)](){const _0x37bb1e=a62_0x2aa9ea;try{const _0x5cf83a=await fetch(this['apiUrl']+_0x37bb1e(0x8e),{'method':_0x37bb1e(0x104),'headers':{'Content-Type':_0x37bb1e(0xda),'User-Agent':'TrapayAPI/1.0'}});return _0x5cf83a&&_0x5cf83a[_0x37bb1e(0xe5)]===0xc8?!![]:![];}catch(_0x514f76){return console['error']('âŒ\x20AmPay\x20health\x20check\x20failed:',_0x514f76),![];}}async[a62_0x2aa9ea(0xfb)](_0x419ce0){const _0xe05027=a62_0x2aa9ea;console['log'](_0xe05027(0x98)),console[_0xe05027(0xa5)](_0xe05027(0xbd)),console[_0xe05027(0xa5)](_0xe05027(0x73),_0x419ce0),console[_0xe05027(0xa5)](_0xe05027(0x9d),typeof _0x419ce0),console['log']('Available\x20fields:');_0x419ce0&&typeof _0x419ce0==='object'&&Object[_0xe05027(0xeb)](_0x419ce0)[_0xe05027(0x92)](_0x2883f1=>{const _0x58e5a6=_0xe05027;console[_0x58e5a6(0xa5)]('\x20\x20'+_0x2883f1+':\x20'+_0x419ce0[_0x2883f1]+'\x20('+typeof _0x419ce0[_0x2883f1]+')');});let _0xbc0621=_0xe05027(0xb8);const _0x7ca01b=_0x419ce0[_0xe05027(0xc7)]||_0x419ce0[_0xe05027(0x85)]||_0x419ce0[_0xe05027(0xea)]||'';return console['log'](_0xe05027(0xbe)+_0x7ca01b),console[_0xe05027(0xa5)](_0xe05027(0x94)+_0xbc0621),!_0x7ca01b&&(console[_0xe05027(0x81)](_0xe05027(0xc2)),console['error'](_0xe05027(0xcc))),{'paymentId':_0x7ca01b,'status':_0xbc0621,'amount':_0x419ce0[_0xe05027(0xf3)],'currency':_0x419ce0[_0xe05027(0x102)]};}}exports['AmPayService']=AmPayService,exports[a62_0x2aa9ea(0x100)]=new AmPayService();