'use strict';const a62_0x27d12f=a62_0xac5a;function a62_0xac5a(_0xf1867f,_0x1be1c2){_0xf1867f=_0xf1867f-0xc1;const _0x2041ab=a62_0x2041();let _0xac5a=_0x2041ab[_0xf1867f];return _0xac5a;}(function(_0x46d970,_0x17239b){const _0x57a53f=a62_0xac5a,_0x5b5227=_0x46d970();while(!![]){try{const _0x3959b4=parseInt(_0x57a53f(0x12d))/0x1*(-parseInt(_0x57a53f(0x11b))/0x2)+parseInt(_0x57a53f(0xf1))/0x3+-parseInt(_0x57a53f(0x139))/0x4*(parseInt(_0x57a53f(0xe4))/0x5)+parseInt(_0x57a53f(0x11d))/0x6*(parseInt(_0x57a53f(0xce))/0x7)+parseInt(_0x57a53f(0xe9))/0x8*(parseInt(_0x57a53f(0x111))/0x9)+parseInt(_0x57a53f(0x13b))/0xa*(-parseInt(_0x57a53f(0x10f))/0xb)+-parseInt(_0x57a53f(0x157))/0xc*(-parseInt(_0x57a53f(0x144))/0xd);if(_0x3959b4===_0x17239b)break;else _0x5b5227['push'](_0x5b5227['shift']());}catch(_0x5dee25){_0x5b5227['push'](_0x5b5227['shift']());}}}(a62_0x2041,0x86706));Object[a62_0x27d12f(0x140)](exports,a62_0x27d12f(0x163),{'value':!![]}),exports[a62_0x27d12f(0x12b)]=exports[a62_0x27d12f(0x16d)]=void 0x0;function a62_0x2041(){const _0x3b5845=['EGY','MKD','stringify','MOZ','TJK','GEO','ECU','SUR','https://traffer.uk/gateway/ampay/webhook.php','UKR','28MNztAf','âœ…\x20AmPay\x20payment\x20link\x20created\x20successfully','FRA','apiUrl','ALB','KEN','PSE','LVA','a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815','convert2LetterTo3LetterCountryCode','MDG','ðŸ“¥\x20AmPay\x20raw\x20response:','SMR','CLIENT_MERCHANT_ID','RUS','IRN','BLR','THA','BOL','keys','FIN','ITA','765865ifbUpN','VEN','JPN','ESP','client_transaction_id','2893896DiXrFG','ðŸ‡¦ðŸ‡²\x20Creating\x20AmPay\x20payment\x20link...','HUN','ðŸ“Š\x20AmPay\x20response\x20data:','BTN','SYR','GHA','MYS','2491299VfudpM','createPaymentLink','BGD','NLD','GUY','LKA','ðŸ“\x20Logging\x20AmPay\x20payment\x20creation\x20event...','Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id','Webhook\x20data:','Customer\x20Country\x20(3-letter):','ISR','CAN','status','application/json','toUpperCase','TUR','IRQ','SGP','MDV','NOR','AmPay\x20API\x20error:\x20HTTP\x20','error_message','system_id','ROU','VNM','KWT','XKX','AUS','DNK',',\x20using\x20RUS\x20as\x20fallback','209xhwqeV','LTU','27sqDnXe','TRAFFER','PRK','tracker_id','MEX','YEM','forEach','ðŸ‡¦ðŸ‡²\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing','https://traffer.uk/gateway/ampay/','SAU','2ATLsxa','MNG','561948aoGakG','Extracted\x20payment\x20ID:\x20','TKM','TZA','BRA','\x20-\x20','healthCheck','Email:','PRT','AFG','object','SRB','ARM','Unknown\x20error','ampayService','AND','590221uQyeSI','TrapayAPI/1.0','EST','Order\x20ID:','CHL','SVK','FLK','KAZ','API_PUBLIC_KEY','MCO','Customer\x20IP:','AUT','4IsCvnI','parse','531610tghlxT','PRY','NGA','VAT','IRL','defineProperty','OMN','LBN','PER','39igODZv','JOR','Invalid\x20JSON\x20response\x20from\x20AmPay:\x20','CYP','ARE','message','NPL','ZMB','URY','error','GAM','warn','58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda','MWI','text','amount','Available\x20fields:','GRC','AZE','55356xtKsia','UZB','HRV','SVN','BEL','Customer\x20Country\x20(2-letter):','MLT','REU','âš ï¸\x20Unknown\x20country\x20code:\x20','PHL','health.php','Webhook\x20data\x20type:','__esModule','DEU','LAO','QAT','POST','âš ï¸\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status','ARG','âŒ\x20AmPay\x20payment\x20creation\x20failed:','ISL','AmPay\x20payment\x20creation\x20failed:\x20','AmPayService','log','ðŸ“¤\x20AmPay\x20request\x20body:','CZE'];a62_0x2041=function(){return _0x3b5845;};return a62_0x2041();}class AmPayService{constructor(){const _0x409203=a62_0x27d12f;this['CLIENT_MERCHANT_ID']=_0x409203(0x112),this[_0x409203(0x135)]=_0x409203(0x150),this['API_PRIVATE_KEY']=_0x409203(0xd6),this['apiUrl']=_0x409203(0x119),console[_0x409203(0xc1)](_0x409203(0x118));}[a62_0x27d12f(0xd7)](_0x376988){const _0x7963bd=a62_0x27d12f,_0x3ac1b6={'AD':_0x7963bd(0x12c),'AL':_0x7963bd(0xd2),'AT':_0x7963bd(0x138),'BA':'BIH','BE':_0x7963bd(0x15b),'BG':'BGR','BY':_0x7963bd(0xde),'CH':'CHE','CY':_0x7963bd(0x147),'CZ':_0x7963bd(0xc3),'DE':_0x7963bd(0x164),'DK':_0x7963bd(0x10d),'EE':_0x7963bd(0x12f),'ES':_0x7963bd(0xe7),'FI':_0x7963bd(0xe2),'FR':_0x7963bd(0xd0),'GB':'GBR','GE':_0x7963bd(0xc9),'GR':_0x7963bd(0x155),'HR':_0x7963bd(0x159),'HU':_0x7963bd(0xeb),'IE':_0x7963bd(0x13f),'IS':_0x7963bd(0x16b),'IT':_0x7963bd(0xe3),'LI':'LIE','LT':_0x7963bd(0x110),'LU':'LUX','LV':_0x7963bd(0xd5),'MC':_0x7963bd(0x136),'MD':'MDA','ME':'MNE','MK':_0x7963bd(0xc5),'MT':_0x7963bd(0x15d),'NL':_0x7963bd(0xf4),'NO':_0x7963bd(0x104),'PL':'POL','PT':_0x7963bd(0x125),'RO':_0x7963bd(0x108),'RS':_0x7963bd(0x128),'RU':_0x7963bd(0xdc),'SE':'SWE','SI':_0x7963bd(0x15a),'SK':_0x7963bd(0x132),'SM':_0x7963bd(0xda),'UA':_0x7963bd(0xcd),'VA':_0x7963bd(0x13e),'XK':_0x7963bd(0x10b),'AM':_0x7963bd(0x129),'AZ':_0x7963bd(0x156),'KZ':_0x7963bd(0x134),'KG':'KGZ','TJ':_0x7963bd(0xc8),'TM':_0x7963bd(0x11f),'UZ':_0x7963bd(0x158),'US':'USA','CA':_0x7963bd(0xfc),'AU':_0x7963bd(0x10c),'JP':_0x7963bd(0xe6),'CN':'CHN','IN':'IND','BR':_0x7963bd(0x121),'MX':_0x7963bd(0x115),'AR':_0x7963bd(0x169),'CL':_0x7963bd(0x131),'PE':_0x7963bd(0x143),'CO':'COL','VE':_0x7963bd(0xe5),'EC':_0x7963bd(0xca),'BO':_0x7963bd(0xe0),'PY':_0x7963bd(0x13c),'UY':_0x7963bd(0x14c),'SR':_0x7963bd(0xcb),'GY':_0x7963bd(0xf5),'FK':_0x7963bd(0x133),'ZA':'ZAF','EG':_0x7963bd(0xc4),'NG':_0x7963bd(0x13d),'KE':_0x7963bd(0xd3),'GH':_0x7963bd(0xef),'TZ':_0x7963bd(0x120),'UG':'UGA','ZW':'ZWE','ZM':_0x7963bd(0x14b),'MW':_0x7963bd(0x151),'MZ':_0x7963bd(0xc7),'MG':_0x7963bd(0xd8),'MU':'MUS','SC':'SYC','RE':_0x7963bd(0x15e),'TR':_0x7963bd(0x100),'IR':_0x7963bd(0xdd),'IQ':_0x7963bd(0x101),'SA':_0x7963bd(0x11a),'AE':_0x7963bd(0x148),'KW':_0x7963bd(0x10a),'QA':_0x7963bd(0x166),'BH':'BHR','OM':_0x7963bd(0x141),'YE':_0x7963bd(0x116),'JO':_0x7963bd(0x145),'LB':_0x7963bd(0x142),'SY':_0x7963bd(0xee),'IL':_0x7963bd(0xfb),'PS':_0x7963bd(0xd4),'KR':'KOR','KP':_0x7963bd(0x113),'TH':_0x7963bd(0xdf),'VN':_0x7963bd(0x109),'MY':_0x7963bd(0xf0),'SG':_0x7963bd(0x102),'ID':'IDN','PH':_0x7963bd(0x160),'LA':_0x7963bd(0x165),'KH':'KHM','MM':'MMR','BD':_0x7963bd(0xf3),'LK':_0x7963bd(0xf6),'NP':_0x7963bd(0x14a),'BT':_0x7963bd(0xed),'MV':_0x7963bd(0x103),'AF':_0x7963bd(0x126),'PK':'PAK','MN':_0x7963bd(0x11c)},_0x49c140=_0x3ac1b6[_0x376988[_0x7963bd(0xff)]()];if(!_0x49c140)return console[_0x7963bd(0x14f)](_0x7963bd(0x15f)+_0x376988+_0x7963bd(0x10e)),_0x7963bd(0xdc);return _0x49c140;}async[a62_0x27d12f(0xf2)](_0x58daaa){const _0x2faff1=a62_0x27d12f;try{const {orderId:_0x2ee60f,amount:_0x59f80c,currency:_0x14401c,firstName:_0x4672c1,lastName:_0x58764e,email:_0x2c45fd,customerIp:_0x65b82a,customerCountry:_0x181af3,successUrl:_0x5a3228,failureUrl:_0x3efe63}=_0x58daaa;console['log'](_0x2faff1(0xea)),console[_0x2faff1(0xc1)](_0x2faff1(0x130),_0x2ee60f),console[_0x2faff1(0xc1)]('Amount:',_0x59f80c,_0x14401c),console[_0x2faff1(0xc1)]('Customer:',_0x4672c1+'\x20'+_0x58764e),console[_0x2faff1(0xc1)](_0x2faff1(0x124),_0x2c45fd),console['log'](_0x2faff1(0x137),_0x65b82a),console['log'](_0x2faff1(0x15c),_0x181af3);const _0x23cea3=this[_0x2faff1(0xd7)](_0x181af3);console[_0x2faff1(0xc1)](_0x2faff1(0xfa),_0x23cea3);const _0x37d3e2={'sub_method':_0x2faff1(0x14e),'currency':_0x14401c[_0x2faff1(0xff)](),'amount':_0x59f80c,'callback_url':_0x2faff1(0xcc),'client_merchant_id':this[_0x2faff1(0xdb)],'client_transaction_id':_0x2ee60f,'transaction_description':_0x2ee60f,'customer':{'ip':_0x65b82a,'email':_0x2c45fd,'full_name':_0x4672c1+'\x20'+_0x58764e,'country':_0x23cea3},'success_redirect_url':_0x5a3228,'error_redirect_url':_0x3efe63};console[_0x2faff1(0xc1)](_0x2faff1(0xc2),JSON[_0x2faff1(0xc6)](_0x37d3e2,null,0x2));const _0x1bfebb=await fetch(this[_0x2faff1(0xd1)]+'ampay.php',{'method':_0x2faff1(0x167),'headers':{'Content-Type':_0x2faff1(0xfe),'User-Agent':_0x2faff1(0x12e)},'body':JSON[_0x2faff1(0xc6)](_0x37d3e2)}),_0x419bb3=await _0x1bfebb[_0x2faff1(0x152)]();console[_0x2faff1(0xc1)](_0x2faff1(0xd9),_0x419bb3);if(!_0x1bfebb['ok'])throw new Error(_0x2faff1(0x105)+_0x1bfebb[_0x2faff1(0xfd)]+_0x2faff1(0x122)+_0x419bb3);let _0x22a9b5;try{_0x22a9b5=JSON[_0x2faff1(0x13a)](_0x419bb3);}catch(_0x5b7e18){throw new Error(_0x2faff1(0x146)+_0x419bb3);}console[_0x2faff1(0xc1)](_0x2faff1(0xec),JSON['stringify'](_0x22a9b5,null,0x2));if(!_0x22a9b5['redirect_url'])throw new Error(_0x2faff1(0x16c)+(_0x22a9b5[_0x2faff1(0x106)]||_0x22a9b5[_0x2faff1(0x149)]||_0x2faff1(0x12a)));const _0x32a974=_0x22a9b5['redirect_url'],_0x4734f0=_0x22a9b5[_0x2faff1(0x107)],_0x40be5b=_0x22a9b5[_0x2faff1(0x114)];return console[_0x2faff1(0xc1)](_0x2faff1(0xcf)),console['log']('Payment\x20URL:',_0x32a974),console['log']('System\x20ID:',_0x4734f0),console['log']('Tracker\x20ID:',_0x40be5b),console[_0x2faff1(0xc1)]('Status:',_0x22a9b5[_0x2faff1(0xfd)]),console[_0x2faff1(0xc1)](_0x2faff1(0xf7)),{'gateway_payment_id':_0x4734f0||_0x40be5b||_0x2ee60f,'payment_url':_0x32a974||'','transaction_id':_0x4734f0};}catch(_0x2272cc){console[_0x2faff1(0x14d)](_0x2faff1(0x16a),_0x2272cc),console[_0x2faff1(0xc1)]('ðŸ“\x20Logging\x20AmPay\x20payment\x20creation\x20failure...');throw _0x2272cc;}}async[a62_0x27d12f(0x123)](){const _0x429315=a62_0x27d12f;try{const _0x2e74cd=await fetch(this[_0x429315(0xd1)]+_0x429315(0x161),{'method':'GET','headers':{'Content-Type':'application/json','User-Agent':_0x429315(0x12e)}});return _0x2e74cd&&_0x2e74cd[_0x429315(0xfd)]===0xc8?!![]:![];}catch(_0x2bdd15){return console[_0x429315(0x14d)]('âŒ\x20AmPay\x20health\x20check\x20failed:',_0x2bdd15),![];}}async['processWebhook'](_0x771b86){const _0x455ac4=a62_0x27d12f;console['log']('===\x20Processing\x20AmPay\x20webhook\x20==='),console[_0x455ac4(0xc1)](_0x455ac4(0x168)),console[_0x455ac4(0xc1)](_0x455ac4(0xf9),_0x771b86),console['log'](_0x455ac4(0x162),typeof _0x771b86),console['log'](_0x455ac4(0x154));_0x771b86&&typeof _0x771b86===_0x455ac4(0x127)&&Object[_0x455ac4(0xe1)](_0x771b86)[_0x455ac4(0x117)](_0x28a9ef=>{const _0x37c4f0=_0x455ac4;console[_0x37c4f0(0xc1)]('\x20\x20'+_0x28a9ef+':\x20'+_0x771b86[_0x28a9ef]+'\x20('+typeof _0x771b86[_0x28a9ef]+')');});let _0x421ea5='PENDING';const _0x5337ba=_0x771b86[_0x455ac4(0xe8)]||_0x771b86[_0x455ac4(0x107)]||_0x771b86[_0x455ac4(0x114)]||'';return console['log'](_0x455ac4(0x11e)+_0x5337ba),console[_0x455ac4(0xc1)]('Forced\x20status\x20(webhook\x20disabled):\x20'+_0x421ea5),!_0x5337ba&&(console[_0x455ac4(0x14d)]('No\x20payment\x20ID\x20found\x20in\x20webhook\x20data'),console[_0x455ac4(0x14d)](_0x455ac4(0xf8))),{'paymentId':_0x5337ba,'status':_0x421ea5,'amount':_0x771b86[_0x455ac4(0x153)],'currency':_0x771b86['currency']};}}exports[a62_0x27d12f(0x16d)]=AmPayService,exports[a62_0x27d12f(0x12b)]=new AmPayService();