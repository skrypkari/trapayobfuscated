'use strict';const a62_0x5c1a3c=a62_0x508b;(function(_0xd8a13d,_0x2b0e00){const _0x11cdc7=a62_0x508b,_0x619226=_0xd8a13d();while(!![]){try{const _0x378a33=parseInt(_0x11cdc7(0xd6))/0x1*(-parseInt(_0x11cdc7(0xe4))/0x2)+-parseInt(_0x11cdc7(0x11f))/0x3+-parseInt(_0x11cdc7(0x12a))/0x4*(parseInt(_0x11cdc7(0xa6))/0x5)+parseInt(_0x11cdc7(0xb9))/0x6+parseInt(_0x11cdc7(0xc5))/0x7*(parseInt(_0x11cdc7(0x130))/0x8)+parseInt(_0x11cdc7(0xc9))/0x9*(-parseInt(_0x11cdc7(0xc4))/0xa)+parseInt(_0x11cdc7(0xf7))/0xb;if(_0x378a33===_0x2b0e00)break;else _0x619226['push'](_0x619226['shift']());}catch(_0x500326){_0x619226['push'](_0x619226['shift']());}}}(a62_0x5750,0x25339));function a62_0x508b(_0x47dfbf,_0x4761a3){_0x47dfbf=_0x47dfbf-0xa2;const _0x5750cd=a62_0x5750();let _0x508bc4=_0x5750cd[_0x47dfbf];return _0x508bc4;}function a62_0x5750(){const _0x54ed1d=['MMR','ðŸ“\x20Logging\x20AmPay\x20payment\x20creation\x20failure...','HRV','PRT','TUR','SRB','ðŸ‡¦ðŸ‡²\x20Creating\x20AmPay\x20payment\x20link...','âš ï¸\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status','AmPayService','KOR','THA','EGY','âœ…\x20AmPay\x20payment\x20link\x20created\x20successfully','âš ï¸\x20Unknown\x20country\x20code:\x20','MWI','redirect_url','TRAFFER','GEO','toUpperCase','NGA','ISL','188760iUsydE','BGD','a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815','PENDING','FRA','URY','GET','Customer:','AUS','BIH','ECU','47572geFWYg','log','QAT','IRQ','ALB','ZAF','25496AbGKoO','GHA','__esModule','BEL','ðŸ‡¦ðŸ‡²\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing','MEX','IDN','https://traffer.uk/gateway/ampay/','error_message','Forced\x20status\x20(webhook\x20disabled):\x20','REU','PHL','ðŸ“Š\x20AmPay\x20response\x20data:','AZE','SUR','SAU','MDV','system_id','===\x20Processing\x20AmPay\x20webhook\x20===','HUN','FIN','CHN','NPL','105TALaFd','BRA','Amount:','KWT','message','MLT','Invalid\x20JSON\x20response\x20from\x20AmPay:\x20','ARE','GRC','Unknown\x20error','SGP','MNE','CLIENT_MERCHANT_ID','EST','forEach','Available\x20fields:','status','LKA','SMR','350634gifYzu','PSE','tracker_id','IRL','object','No\x20payment\x20ID\x20found\x20in\x20webhook\x20data','ampayService','RUS','MOZ','JOR','IND','20LknREc','287kuTfwS','COL','CYP','CHL','1144764OevZgQ','ARG','Webhook\x20data:','stringify','Status:','YEM','PAK','health.php','DNK','GBR','MYS','MDG','FLK','349kYcjYq','ARM','apiUrl','LUX','KGZ','ZMB','NLD','âŒ\x20AmPay\x20payment\x20creation\x20failed:','https://traffer.uk/gateway/ampay/webhook.php','BOL','TZA','Extracted\x20payment\x20ID:\x20','createPaymentLink','KEN','1042xKysuN','OMN',',\x20using\x20RUS\x20as\x20fallback','ðŸ“\x20Logging\x20AmPay\x20payment\x20creation\x20event...','AFG','POST','SWE','SVN','CZE','LVA','Tracker\x20ID:','Webhook\x20data\x20type:','API_PRIVATE_KEY','âŒ\x20AmPay\x20health\x20check\x20failed:','UGA','amount','POL','API_PUBLIC_KEY','PRY','7833815xWuWWW','UZB','UKR','Payment\x20URL:','LBN','\x20-\x20','LIE','TrapayAPI/1.0','VNM','MDA','error','IRN','convert2LetterTo3LetterCountryCode','NOR','ðŸ“¤\x20AmPay\x20request\x20body:','ESP','application/json','CHE','text'];a62_0x5750=function(){return _0x54ed1d;};return a62_0x5750();}Object['defineProperty'](exports,a62_0x5c1a3c(0x132),{'value':!![]}),exports['ampayService']=exports[a62_0x5c1a3c(0x112)]=void 0x0;class AmPayService{constructor(){const _0x2720e1=a62_0x5c1a3c;this[_0x2720e1(0xb2)]=_0x2720e1(0x11a),this[_0x2720e1(0xf5)]='58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda',this[_0x2720e1(0xf0)]=_0x2720e1(0x121),this[_0x2720e1(0xd8)]=_0x2720e1(0x137),console['log'](_0x2720e1(0x134));}[a62_0x5c1a3c(0x103)](_0x3bd1cf){const _0xdf9771=a62_0x5c1a3c,_0x51cd76={'AD':'AND','AL':_0xdf9771(0x12e),'AT':'AUT','BA':_0xdf9771(0x128),'BE':_0xdf9771(0x133),'BG':'BGR','BY':'BLR','CH':_0xdf9771(0x108),'CY':_0xdf9771(0xc7),'CZ':_0xdf9771(0xec),'DE':'DEU','DK':_0xdf9771(0xd1),'EE':_0xdf9771(0xb3),'ES':_0xdf9771(0x106),'FI':_0xdf9771(0xa3),'FR':_0xdf9771(0x123),'GB':_0xdf9771(0xd2),'GE':_0xdf9771(0x11b),'GR':_0xdf9771(0xae),'HR':_0xdf9771(0x10c),'HU':_0xdf9771(0xa2),'IE':_0xdf9771(0xbc),'IS':_0xdf9771(0x11e),'IT':'ITA','LI':_0xdf9771(0xfd),'LT':'LTU','LU':_0xdf9771(0xd9),'LV':_0xdf9771(0xed),'MC':'MCO','MD':_0xdf9771(0x100),'ME':_0xdf9771(0xb1),'MK':'MKD','MT':_0xdf9771(0xab),'NL':_0xdf9771(0xdc),'NO':_0xdf9771(0x104),'PL':_0xdf9771(0xf4),'PT':_0xdf9771(0x10d),'RO':'ROU','RS':_0xdf9771(0x10f),'RU':_0xdf9771(0xc0),'SE':_0xdf9771(0xea),'SI':_0xdf9771(0xeb),'SK':'SVK','SM':_0xdf9771(0xb8),'UA':_0xdf9771(0xf9),'VA':'VAT','XK':'XKX','AM':_0xdf9771(0xd7),'AZ':_0xdf9771(0x13d),'KZ':'KAZ','KG':_0xdf9771(0xda),'TJ':'TJK','TM':'TKM','UZ':_0xdf9771(0xf8),'US':'USA','CA':'CAN','AU':_0xdf9771(0x127),'JP':'JPN','CN':_0xdf9771(0xa4),'IN':_0xdf9771(0xc3),'BR':_0xdf9771(0xa7),'MX':_0xdf9771(0x135),'AR':_0xdf9771(0xca),'CL':_0xdf9771(0xc8),'PE':'PER','CO':_0xdf9771(0xc6),'VE':'VEN','EC':_0xdf9771(0x129),'BO':_0xdf9771(0xdf),'PY':_0xdf9771(0xf6),'UY':_0xdf9771(0x124),'SR':_0xdf9771(0x13e),'GY':'GUY','FK':_0xdf9771(0xd5),'ZA':_0xdf9771(0x12f),'EG':_0xdf9771(0x115),'NG':_0xdf9771(0x11d),'KE':_0xdf9771(0xe3),'GH':_0xdf9771(0x131),'TZ':_0xdf9771(0xe0),'UG':_0xdf9771(0xf2),'ZW':'ZWE','ZM':_0xdf9771(0xdb),'MW':_0xdf9771(0x118),'MZ':_0xdf9771(0xc1),'MG':_0xdf9771(0xd4),'MU':'MUS','SC':'SYC','RE':_0xdf9771(0x13a),'TR':_0xdf9771(0x10e),'IR':_0xdf9771(0x102),'IQ':_0xdf9771(0x12d),'SA':_0xdf9771(0x13f),'AE':_0xdf9771(0xad),'KW':_0xdf9771(0xa9),'QA':_0xdf9771(0x12c),'BH':'BHR','OM':_0xdf9771(0xe5),'YE':_0xdf9771(0xce),'JO':_0xdf9771(0xc2),'LB':_0xdf9771(0xfb),'SY':'SYR','IL':'ISR','PS':_0xdf9771(0xba),'KR':_0xdf9771(0x113),'KP':'PRK','TH':_0xdf9771(0x114),'VN':_0xdf9771(0xff),'MY':_0xdf9771(0xd3),'SG':_0xdf9771(0xb0),'ID':_0xdf9771(0x136),'PH':_0xdf9771(0x13b),'LA':'LAO','KH':'KHM','MM':_0xdf9771(0x10a),'BD':_0xdf9771(0x120),'LK':_0xdf9771(0xb7),'NP':_0xdf9771(0xa5),'BT':'BTN','MV':_0xdf9771(0x140),'AF':_0xdf9771(0xe8),'PK':_0xdf9771(0xcf),'MN':'MNG'},_0x589ed1=_0x51cd76[_0x3bd1cf[_0xdf9771(0x11c)]()];if(!_0x589ed1)return console['warn'](_0xdf9771(0x117)+_0x3bd1cf+_0xdf9771(0xe6)),'RUS';return _0x589ed1;}async[a62_0x5c1a3c(0xe2)](_0xf02cc5){const _0x244557=a62_0x5c1a3c;try{const {orderId:_0x6cab6c,amount:_0x304c27,currency:_0xbf6d34,firstName:_0x97be81,lastName:_0x1327eb,email:_0x23f7dc,customerIp:_0x4c433e,customerCountry:_0x12dfdd,successUrl:_0x25b535,failureUrl:_0x4202a4}=_0xf02cc5;console[_0x244557(0x12b)](_0x244557(0x110)),console[_0x244557(0x12b)]('Order\x20ID:',_0x6cab6c),console['log'](_0x244557(0xa8),_0x304c27,_0xbf6d34),console['log'](_0x244557(0x126),_0x97be81+'\x20'+_0x1327eb),console[_0x244557(0x12b)]('Email:',_0x23f7dc),console[_0x244557(0x12b)]('Customer\x20IP:',_0x4c433e),console[_0x244557(0x12b)]('Customer\x20Country\x20(2-letter):',_0x12dfdd);const _0x1845d1=this['convert2LetterTo3LetterCountryCode'](_0x12dfdd);console['log']('Customer\x20Country\x20(3-letter):',_0x1845d1);const _0x742ac1={'sub_method':'GAM','currency':_0xbf6d34[_0x244557(0x11c)](),'amount':_0x304c27,'callback_url':_0x244557(0xde),'client_merchant_id':this[_0x244557(0xb2)],'client_transaction_id':_0x6cab6c,'transaction_description':_0x6cab6c,'customer':{'ip':_0x4c433e,'email':_0x23f7dc,'full_name':_0x97be81+'\x20'+_0x1327eb,'country':_0x1845d1},'success_redirect_url':_0x25b535,'error_redirect_url':_0x4202a4};console['log'](_0x244557(0x105),JSON['stringify'](_0x742ac1,null,0x2));const _0x58f7c4=await fetch(this[_0x244557(0xd8)]+'ampay.php',{'method':_0x244557(0xe9),'headers':{'Content-Type':_0x244557(0x107),'User-Agent':_0x244557(0xfe)},'body':JSON[_0x244557(0xcc)](_0x742ac1)}),_0xed60b0=await _0x58f7c4[_0x244557(0x109)]();console[_0x244557(0x12b)]('ðŸ“¥\x20AmPay\x20raw\x20response:',_0xed60b0);if(!_0x58f7c4['ok'])throw new Error('AmPay\x20API\x20error:\x20HTTP\x20'+_0x58f7c4[_0x244557(0xb6)]+_0x244557(0xfc)+_0xed60b0);let _0x1a622b;try{_0x1a622b=JSON['parse'](_0xed60b0);}catch(_0x3b033d){throw new Error(_0x244557(0xac)+_0xed60b0);}console[_0x244557(0x12b)](_0x244557(0x13c),JSON[_0x244557(0xcc)](_0x1a622b,null,0x2));if(!_0x1a622b[_0x244557(0x119)])throw new Error('AmPay\x20payment\x20creation\x20failed:\x20'+(_0x1a622b[_0x244557(0x138)]||_0x1a622b[_0x244557(0xaa)]||_0x244557(0xaf)));const _0x1b1da4=_0x1a622b[_0x244557(0x119)],_0x14eff2=_0x1a622b[_0x244557(0x141)],_0x4b2e81=_0x1a622b[_0x244557(0xbb)];return console[_0x244557(0x12b)](_0x244557(0x116)),console['log'](_0x244557(0xfa),_0x1b1da4),console[_0x244557(0x12b)]('System\x20ID:',_0x14eff2),console[_0x244557(0x12b)](_0x244557(0xee),_0x4b2e81),console[_0x244557(0x12b)](_0x244557(0xcd),_0x1a622b['status']),console[_0x244557(0x12b)](_0x244557(0xe7)),{'gateway_payment_id':_0x14eff2||_0x4b2e81||_0x6cab6c,'payment_url':_0x1b1da4||'','transaction_id':_0x14eff2};}catch(_0xb8800c){console['error'](_0x244557(0xdd),_0xb8800c),console[_0x244557(0x12b)](_0x244557(0x10b));throw _0xb8800c;}}async['healthCheck'](){const _0x5959d4=a62_0x5c1a3c;try{const _0x211cc0=await fetch(this[_0x5959d4(0xd8)]+_0x5959d4(0xd0),{'method':_0x5959d4(0x125),'headers':{'Content-Type':_0x5959d4(0x107),'User-Agent':_0x5959d4(0xfe)}});return _0x211cc0&&_0x211cc0[_0x5959d4(0xb6)]===0xc8?!![]:![];}catch(_0x2c463b){return console[_0x5959d4(0x101)](_0x5959d4(0xf1),_0x2c463b),![];}}async['processWebhook'](_0x5e07d7){const _0x27024e=a62_0x5c1a3c;console[_0x27024e(0x12b)](_0x27024e(0x142)),console[_0x27024e(0x12b)](_0x27024e(0x111)),console['log'](_0x27024e(0xcb),_0x5e07d7),console[_0x27024e(0x12b)](_0x27024e(0xef),typeof _0x5e07d7),console['log'](_0x27024e(0xb5));_0x5e07d7&&typeof _0x5e07d7===_0x27024e(0xbd)&&Object['keys'](_0x5e07d7)[_0x27024e(0xb4)](_0x1df0e0=>{const _0x5ef241=_0x27024e;console[_0x5ef241(0x12b)]('\x20\x20'+_0x1df0e0+':\x20'+_0x5e07d7[_0x1df0e0]+'\x20('+typeof _0x5e07d7[_0x1df0e0]+')');});let _0x1a5ec2=_0x27024e(0x122);const _0x368c95=_0x5e07d7['client_transaction_id']||_0x5e07d7[_0x27024e(0x141)]||_0x5e07d7[_0x27024e(0xbb)]||'';return console[_0x27024e(0x12b)](_0x27024e(0xe1)+_0x368c95),console[_0x27024e(0x12b)](_0x27024e(0x139)+_0x1a5ec2),!_0x368c95&&(console[_0x27024e(0x101)](_0x27024e(0xbe)),console[_0x27024e(0x101)]('Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id')),{'paymentId':_0x368c95,'status':_0x1a5ec2,'amount':_0x5e07d7[_0x27024e(0xf3)],'currency':_0x5e07d7['currency']};}}exports[a62_0x5c1a3c(0x112)]=AmPayService,exports[a62_0x5c1a3c(0xbf)]=new AmPayService();