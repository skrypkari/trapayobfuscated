'use strict';const a62_0x24ffd6=a62_0x133c;function a62_0x1b19(){const _0x59d501=['application/json','KHM','ISL','ALB','text','CYP','amount','BGR','112597zKiILl','System\x20ID:','764170hgRKYh','GRC','AUT','ampay.php','HRV','UZB','GEO','redirect_url','Customer\x20Country\x20(2-letter):','__esModule','IRQ','VEN','ITA','MMR','THA','keys',',\x20using\x20RUS\x20as\x20fallback','warn','AUS','convert2LetterTo3LetterCountryCode','AmPay\x20API\x20error:\x20HTTP\x20','PHL','AZE','36fbONDJ','KAZ','apiUrl','SAU','513964pUpZlv','ROU','LVA','Webhook\x20data\x20type:','AmPay\x20payment\x20creation\x20failed:\x20','TrapayAPI/1.0','client_transaction_id','object','PENDING','BIH','Available\x20fields:','===\x20Processing\x20AmPay\x20webhook\x20===','Invalid\x20JSON\x20response\x20from\x20AmPay:\x20','MWI','AmPayService','2ylmbsi','MDV','a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815','GET','GBR','MDG','2243096WRaVwL','Status:','Payment\x20URL:','NOR','toUpperCase','CHN','processWebhook','ðŸ“Š\x20AmPay\x20response\x20data:','BRA','error_message','QAT','GHA','RUS','FLK','74070mtijPb','âœ…\x20AmPay\x20payment\x20link\x20created\x20successfully','PSE','NLD','log','PAK','error','BHR','TJK','MDA','ECU','CHE','9dWhMlB','https://traffer.uk/gateway/ampay/webhook.php','MOZ','MNE','Order\x20ID:','âŒ\x20AmPay\x20health\x20check\x20failed:','message','JOR','SMR','system_id','SRB','1553299iwOjvK','AND','ðŸ“¥\x20AmPay\x20raw\x20response:','healthCheck','LIE','URY','FIN','TZA','ampayService','DNK','KWT','MCO','LKA','MUS','MNG','Forced\x20status\x20(webhook\x20disabled):\x20','ESP','UKR','BTN','forEach','CLIENT_MERCHANT_ID','MLT','TUR','parse','HUN','defineProperty','PRY','COL','Customer:','Webhook\x20data:','DEU','Tracker\x20ID:','EGY','LUX','IRL','SVN','tracker_id','BLR','SGP','Customer\x20Country\x20(3-letter):','SVK','IND','status','PER','âš ï¸\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status','CZE','ZWE','NPL','USA','SYR','POL','FRA','No\x20payment\x20ID\x20found\x20in\x20webhook\x20data','3hKBzjg','GUY','1239707wymgIf','stringify','TRAFFER','ARG','âŒ\x20AmPay\x20payment\x20creation\x20failed:','Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id','API_PRIVATE_KEY','BOL','YEM','ðŸ‡¦ðŸ‡²\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing','LTU','POST','ðŸ“\x20Logging\x20AmPay\x20payment\x20creation\x20event...','SWE','CHL','âš ï¸\x20Unknown\x20country\x20code:\x20','ARM','TKM','OMN'];a62_0x1b19=function(){return _0x59d501;};return a62_0x1b19();}(function(_0x5e402e,_0x33d78f){const _0x2d84f8=a62_0x133c,_0x2a6e18=_0x5e402e();while(!![]){try{const _0x228210=parseInt(_0x2d84f8(0x1e7))/0x1*(-parseInt(_0x2d84f8(0x16a))/0x2)+parseInt(_0x2d84f8(0x1ca))/0x3*(parseInt(_0x2d84f8(0x15b))/0x4)+parseInt(_0x2d84f8(0x17e))/0x5*(parseInt(_0x2d84f8(0x157))/0x6)+parseInt(_0x2d84f8(0x1cc))/0x7+-parseInt(_0x2d84f8(0x170))/0x8*(parseInt(_0x2d84f8(0x18a))/0x9)+parseInt(_0x2d84f8(0x1e9))/0xa+parseInt(_0x2d84f8(0x195))/0xb;if(_0x228210===_0x33d78f)break;else _0x2a6e18['push'](_0x2a6e18['shift']());}catch(_0x42f28c){_0x2a6e18['push'](_0x2a6e18['shift']());}}}(a62_0x1b19,0x357ee));function a62_0x133c(_0x2f6223,_0x4fbafa){_0x2f6223=_0x2f6223-0x156;const _0x1b19c3=a62_0x1b19();let _0x133c31=_0x1b19c3[_0x2f6223];return _0x133c31;}Object[a62_0x24ffd6(0x1ae)](exports,a62_0x24ffd6(0x1f2),{'value':!![]}),exports['ampayService']=exports['AmPayService']=void 0x0;class AmPayService{constructor(){const _0x482a37=a62_0x24ffd6;this[_0x482a37(0x1a9)]=_0x482a37(0x1ce),this['API_PUBLIC_KEY']='58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda',this[_0x482a37(0x1d2)]=_0x482a37(0x16c),this['apiUrl']='https://traffer.uk/gateway/ampay/',console[_0x482a37(0x182)](_0x482a37(0x1d5));}['convert2LetterTo3LetterCountryCode'](_0x3705e3){const _0x415b44=a62_0x24ffd6,_0x266ede={'AD':_0x415b44(0x196),'AL':_0x415b44(0x1e2),'AT':_0x415b44(0x1eb),'BA':_0x415b44(0x164),'BE':'BEL','BG':_0x415b44(0x1e6),'BY':_0x415b44(0x1ba),'CH':_0x415b44(0x189),'CY':_0x415b44(0x1e4),'CZ':_0x415b44(0x1c2),'DE':_0x415b44(0x1b3),'DK':_0x415b44(0x19e),'EE':'EST','ES':_0x415b44(0x1a5),'FI':_0x415b44(0x19b),'FR':_0x415b44(0x1c8),'GB':_0x415b44(0x16e),'GE':_0x415b44(0x1ef),'GR':_0x415b44(0x1ea),'HR':_0x415b44(0x1ed),'HU':_0x415b44(0x1ad),'IE':_0x415b44(0x1b7),'IS':_0x415b44(0x1e1),'IT':_0x415b44(0x1f5),'LI':_0x415b44(0x199),'LT':_0x415b44(0x1d6),'LU':_0x415b44(0x1b6),'LV':_0x415b44(0x15d),'MC':_0x415b44(0x1a0),'MD':_0x415b44(0x187),'ME':_0x415b44(0x18d),'MK':'MKD','MT':_0x415b44(0x1aa),'NL':_0x415b44(0x181),'NO':_0x415b44(0x173),'PL':_0x415b44(0x1c7),'PT':'PRT','RO':_0x415b44(0x15c),'RS':_0x415b44(0x194),'RU':_0x415b44(0x17c),'SE':_0x415b44(0x1d9),'SI':_0x415b44(0x1b8),'SK':_0x415b44(0x1bd),'SM':_0x415b44(0x192),'UA':_0x415b44(0x1a6),'VA':'VAT','XK':'XKX','AM':_0x415b44(0x1dc),'AZ':_0x415b44(0x156),'KZ':_0x415b44(0x158),'KG':'KGZ','TJ':_0x415b44(0x186),'TM':_0x415b44(0x1dd),'UZ':_0x415b44(0x1ee),'US':_0x415b44(0x1c5),'CA':'CAN','AU':_0x415b44(0x1fb),'JP':'JPN','CN':_0x415b44(0x175),'IN':_0x415b44(0x1be),'BR':_0x415b44(0x178),'MX':'MEX','AR':_0x415b44(0x1cf),'CL':_0x415b44(0x1da),'PE':_0x415b44(0x1c0),'CO':_0x415b44(0x1b0),'VE':_0x415b44(0x1f4),'EC':_0x415b44(0x188),'BO':_0x415b44(0x1d3),'PY':_0x415b44(0x1af),'UY':_0x415b44(0x19a),'SR':'SUR','GY':_0x415b44(0x1cb),'FK':_0x415b44(0x17d),'ZA':'ZAF','EG':_0x415b44(0x1b5),'NG':'NGA','KE':'KEN','GH':_0x415b44(0x17b),'TZ':_0x415b44(0x19c),'UG':'UGA','ZW':_0x415b44(0x1c3),'ZM':'ZMB','MW':_0x415b44(0x168),'MZ':_0x415b44(0x18c),'MG':_0x415b44(0x16f),'MU':_0x415b44(0x1a2),'SC':'SYC','RE':'REU','TR':_0x415b44(0x1ab),'IR':'IRN','IQ':_0x415b44(0x1f3),'SA':_0x415b44(0x15a),'AE':'ARE','KW':_0x415b44(0x19f),'QA':_0x415b44(0x17a),'BH':_0x415b44(0x185),'OM':_0x415b44(0x1de),'YE':_0x415b44(0x1d4),'JO':_0x415b44(0x191),'LB':'LBN','SY':_0x415b44(0x1c6),'IL':'ISR','PS':_0x415b44(0x180),'KR':'KOR','KP':'PRK','TH':_0x415b44(0x1f7),'VN':'VNM','MY':'MYS','SG':_0x415b44(0x1bb),'ID':'IDN','PH':_0x415b44(0x1fe),'LA':'LAO','KH':_0x415b44(0x1e0),'MM':_0x415b44(0x1f6),'BD':'BGD','LK':_0x415b44(0x1a1),'NP':_0x415b44(0x1c4),'BT':_0x415b44(0x1a7),'MV':_0x415b44(0x16b),'AF':'AFG','PK':_0x415b44(0x183),'MN':_0x415b44(0x1a3)},_0x24e3c5=_0x266ede[_0x3705e3['toUpperCase']()];if(!_0x24e3c5)return console[_0x415b44(0x1fa)](_0x415b44(0x1db)+_0x3705e3+_0x415b44(0x1f9)),'RUS';return _0x24e3c5;}async['createPaymentLink'](_0x154efc){const _0x8bd900=a62_0x24ffd6;try{const {orderId:_0x197a61,amount:_0x10816e,currency:_0x114b0a,firstName:_0x248a2c,lastName:_0x406307,email:_0x1920cb,customerIp:_0x8fe044,customerCountry:_0x5bb341,successUrl:_0x4811bc,failureUrl:_0x342cde}=_0x154efc;console[_0x8bd900(0x182)]('ðŸ‡¦ðŸ‡²\x20Creating\x20AmPay\x20payment\x20link...'),console[_0x8bd900(0x182)](_0x8bd900(0x18e),_0x197a61),console[_0x8bd900(0x182)]('Amount:',_0x10816e,_0x114b0a),console[_0x8bd900(0x182)](_0x8bd900(0x1b1),_0x248a2c+'\x20'+_0x406307),console['log']('Email:',_0x1920cb),console['log']('Customer\x20IP:',_0x8fe044),console['log'](_0x8bd900(0x1f1),_0x5bb341);const _0x4c7627=this[_0x8bd900(0x1fc)](_0x5bb341);console['log'](_0x8bd900(0x1bc),_0x4c7627);const _0x58f77b={'sub_method':'GAM','currency':_0x114b0a[_0x8bd900(0x174)](),'amount':_0x10816e,'callback_url':_0x8bd900(0x18b),'client_merchant_id':this[_0x8bd900(0x1a9)],'client_transaction_id':_0x197a61,'transaction_description':_0x197a61,'customer':{'ip':_0x8fe044,'email':_0x1920cb,'full_name':_0x248a2c+'\x20'+_0x406307,'country':_0x4c7627},'success_redirect_url':_0x4811bc,'error_redirect_url':_0x342cde};console[_0x8bd900(0x182)]('ðŸ“¤\x20AmPay\x20request\x20body:',JSON[_0x8bd900(0x1cd)](_0x58f77b,null,0x2));const _0x56346e=await fetch(this[_0x8bd900(0x159)]+_0x8bd900(0x1ec),{'method':_0x8bd900(0x1d7),'headers':{'Content-Type':'application/json','User-Agent':_0x8bd900(0x160)},'body':JSON[_0x8bd900(0x1cd)](_0x58f77b)}),_0x243762=await _0x56346e[_0x8bd900(0x1e3)]();console[_0x8bd900(0x182)](_0x8bd900(0x197),_0x243762);if(!_0x56346e['ok'])throw new Error(_0x8bd900(0x1fd)+_0x56346e[_0x8bd900(0x1bf)]+'\x20-\x20'+_0x243762);let _0x4e50b9;try{_0x4e50b9=JSON[_0x8bd900(0x1ac)](_0x243762);}catch(_0x8ca256){throw new Error(_0x8bd900(0x167)+_0x243762);}console['log'](_0x8bd900(0x177),JSON[_0x8bd900(0x1cd)](_0x4e50b9,null,0x2));if(!_0x4e50b9['redirect_url'])throw new Error(_0x8bd900(0x15f)+(_0x4e50b9[_0x8bd900(0x179)]||_0x4e50b9[_0x8bd900(0x190)]||'Unknown\x20error'));const _0x376d66=_0x4e50b9[_0x8bd900(0x1f0)],_0x15fa79=_0x4e50b9[_0x8bd900(0x193)],_0x5a86d3=_0x4e50b9[_0x8bd900(0x1b9)];return console['log'](_0x8bd900(0x17f)),console['log'](_0x8bd900(0x172),_0x376d66),console[_0x8bd900(0x182)](_0x8bd900(0x1e8),_0x15fa79),console[_0x8bd900(0x182)](_0x8bd900(0x1b4),_0x5a86d3),console[_0x8bd900(0x182)](_0x8bd900(0x171),_0x4e50b9[_0x8bd900(0x1bf)]),console[_0x8bd900(0x182)](_0x8bd900(0x1d8)),{'gateway_payment_id':_0x15fa79||_0x5a86d3||_0x197a61,'payment_url':_0x376d66||'','transaction_id':_0x15fa79};}catch(_0x1a7512){console[_0x8bd900(0x184)](_0x8bd900(0x1d0),_0x1a7512),console['log']('ðŸ“\x20Logging\x20AmPay\x20payment\x20creation\x20failure...');throw _0x1a7512;}}async[a62_0x24ffd6(0x198)](){const _0x31b432=a62_0x24ffd6;try{const _0x22c3c1=await fetch(this[_0x31b432(0x159)]+'health.php',{'method':_0x31b432(0x16d),'headers':{'Content-Type':_0x31b432(0x1df),'User-Agent':_0x31b432(0x160)}});return _0x22c3c1&&_0x22c3c1[_0x31b432(0x1bf)]===0xc8?!![]:![];}catch(_0x1f8cd2){return console['error'](_0x31b432(0x18f),_0x1f8cd2),![];}}async[a62_0x24ffd6(0x176)](_0x1c6b47){const _0x4e7558=a62_0x24ffd6;console['log'](_0x4e7558(0x166)),console['log'](_0x4e7558(0x1c1)),console[_0x4e7558(0x182)](_0x4e7558(0x1b2),_0x1c6b47),console[_0x4e7558(0x182)](_0x4e7558(0x15e),typeof _0x1c6b47),console[_0x4e7558(0x182)](_0x4e7558(0x165));_0x1c6b47&&typeof _0x1c6b47===_0x4e7558(0x162)&&Object[_0x4e7558(0x1f8)](_0x1c6b47)[_0x4e7558(0x1a8)](_0x2ba105=>{const _0x2e2fa1=_0x4e7558;console[_0x2e2fa1(0x182)]('\x20\x20'+_0x2ba105+':\x20'+_0x1c6b47[_0x2ba105]+'\x20('+typeof _0x1c6b47[_0x2ba105]+')');});let _0x1227e0=_0x4e7558(0x163);const _0x1b2fd1=_0x1c6b47[_0x4e7558(0x161)]||_0x1c6b47[_0x4e7558(0x193)]||_0x1c6b47['tracker_id']||'';return console[_0x4e7558(0x182)]('Extracted\x20payment\x20ID:\x20'+_0x1b2fd1),console[_0x4e7558(0x182)](_0x4e7558(0x1a4)+_0x1227e0),!_0x1b2fd1&&(console[_0x4e7558(0x184)](_0x4e7558(0x1c9)),console[_0x4e7558(0x184)](_0x4e7558(0x1d1))),{'paymentId':_0x1b2fd1,'status':_0x1227e0,'amount':_0x1c6b47[_0x4e7558(0x1e5)],'currency':_0x1c6b47['currency']};}}exports[a62_0x24ffd6(0x169)]=AmPayService,exports[a62_0x24ffd6(0x19d)]=new AmPayService();