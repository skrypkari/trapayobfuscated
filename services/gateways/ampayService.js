'use strict';const a52_0x2f3783=a52_0x3053;(function(_0x53699c,_0x427938){const _0x57460a=a52_0x3053,_0x235ff3=_0x53699c();while(!![]){try{const _0x163d5b=-parseInt(_0x57460a(0x1e2))/0x1+-parseInt(_0x57460a(0x1c2))/0x2+-parseInt(_0x57460a(0x1d1))/0x3*(-parseInt(_0x57460a(0x1ac))/0x4)+-parseInt(_0x57460a(0x223))/0x5*(parseInt(_0x57460a(0x239))/0x6)+-parseInt(_0x57460a(0x20e))/0x7*(parseInt(_0x57460a(0x1e5))/0x8)+-parseInt(_0x57460a(0x219))/0x9+parseInt(_0x57460a(0x1bb))/0xa*(parseInt(_0x57460a(0x1ba))/0xb);if(_0x163d5b===_0x427938)break;else _0x235ff3['push'](_0x235ff3['shift']());}catch(_0x42c036){_0x235ff3['push'](_0x235ff3['shift']());}}}(a52_0x1115,0xa9a3a));Object[a52_0x2f3783(0x1a0)](exports,'__esModule',{'value':!![]}),exports[a52_0x2f3783(0x1cf)]=exports[a52_0x2f3783(0x208)]=void 0x0;function a52_0x3053(_0x1a71ea,_0x1dd160){_0x1a71ea=_0x1a71ea-0x194;const _0x111511=a52_0x1115();let _0x305364=_0x111511[_0x1a71ea];return _0x305364;}class AmPayService{constructor(){const _0x5a20a2=a52_0x2f3783;this[_0x5a20a2(0x218)]=_0x5a20a2(0x195),this[_0x5a20a2(0x1c4)]=_0x5a20a2(0x1b2),this[_0x5a20a2(0x203)]=_0x5a20a2(0x23d),this['apiUrl']=_0x5a20a2(0x1f9),console[_0x5a20a2(0x1f8)](_0x5a20a2(0x21e));}[a52_0x2f3783(0x204)](_0x111ab6){const _0x5590b5=a52_0x2f3783,_0x483d67={'AD':_0x5590b5(0x22f),'AL':'ALB','AT':'AUT','BA':_0x5590b5(0x1fe),'BE':_0x5590b5(0x1fc),'BG':_0x5590b5(0x1da),'BY':_0x5590b5(0x1ae),'CH':_0x5590b5(0x22e),'CY':_0x5590b5(0x221),'CZ':_0x5590b5(0x1cd),'DE':_0x5590b5(0x1f1),'DK':'DNK','EE':_0x5590b5(0x215),'ES':_0x5590b5(0x1d4),'FI':_0x5590b5(0x1bf),'FR':_0x5590b5(0x1f5),'GB':_0x5590b5(0x1ce),'GE':_0x5590b5(0x217),'GR':'GRC','HR':_0x5590b5(0x1b4),'HU':_0x5590b5(0x238),'IE':_0x5590b5(0x1db),'IS':_0x5590b5(0x216),'IT':_0x5590b5(0x1c0),'LI':_0x5590b5(0x1af),'LT':_0x5590b5(0x1d9),'LU':_0x5590b5(0x1cb),'LV':_0x5590b5(0x207),'MC':_0x5590b5(0x1fa),'MD':_0x5590b5(0x19c),'ME':_0x5590b5(0x1b7),'MK':_0x5590b5(0x1e7),'MT':'MLT','NL':_0x5590b5(0x233),'NO':_0x5590b5(0x1c5),'PL':_0x5590b5(0x211),'PT':_0x5590b5(0x1b8),'RO':'ROU','RS':_0x5590b5(0x1b5),'RU':_0x5590b5(0x1cc),'SE':_0x5590b5(0x19f),'SI':_0x5590b5(0x237),'SK':'SVK','SM':'SMR','UA':_0x5590b5(0x1c9),'VA':'VAT','XK':'XKX','AM':_0x5590b5(0x229),'AZ':_0x5590b5(0x1c8),'KZ':_0x5590b5(0x199),'KG':_0x5590b5(0x1f4),'TJ':_0x5590b5(0x1ec),'TM':_0x5590b5(0x23b),'UZ':'UZB','US':'USA','CA':'CAN','AU':_0x5590b5(0x20f),'JP':_0x5590b5(0x1e1),'CN':_0x5590b5(0x20c),'IN':'IND','BR':_0x5590b5(0x1d2),'MX':'MEX','AR':'ARG','CL':_0x5590b5(0x1c7),'PE':_0x5590b5(0x227),'CO':_0x5590b5(0x23c),'VE':_0x5590b5(0x1ff),'EC':_0x5590b5(0x1a7),'BO':'BOL','PY':_0x5590b5(0x1a8),'UY':_0x5590b5(0x205),'SR':'SUR','GY':_0x5590b5(0x19e),'FK':_0x5590b5(0x21a),'ZA':_0x5590b5(0x1ad),'EG':_0x5590b5(0x19d),'NG':_0x5590b5(0x1d6),'KE':'KEN','GH':'GHA','TZ':_0x5590b5(0x220),'UG':'UGA','ZW':_0x5590b5(0x231),'ZM':_0x5590b5(0x209),'MW':_0x5590b5(0x22b),'MZ':_0x5590b5(0x1dc),'MG':_0x5590b5(0x21d),'MU':'MUS','SC':_0x5590b5(0x198),'RE':'REU','TR':'TUR','IR':_0x5590b5(0x19a),'IQ':'IRQ','SA':_0x5590b5(0x1d8),'AE':_0x5590b5(0x19b),'KW':_0x5590b5(0x1e9),'QA':_0x5590b5(0x1fb),'BH':_0x5590b5(0x22d),'OM':_0x5590b5(0x1aa),'YE':_0x5590b5(0x21b),'JO':_0x5590b5(0x225),'LB':_0x5590b5(0x1bc),'SY':_0x5590b5(0x1c3),'IL':_0x5590b5(0x21c),'PS':_0x5590b5(0x235),'KR':_0x5590b5(0x1ca),'KP':'PRK','TH':_0x5590b5(0x214),'VN':_0x5590b5(0x1e4),'MY':_0x5590b5(0x20b),'SG':'SGP','ID':'IDN','PH':_0x5590b5(0x197),'LA':_0x5590b5(0x1d7),'KH':_0x5590b5(0x1ef),'MM':_0x5590b5(0x1f3),'BD':_0x5590b5(0x1fd),'LK':_0x5590b5(0x1a5),'NP':_0x5590b5(0x1eb),'BT':'BTN','MV':_0x5590b5(0x1f6),'AF':_0x5590b5(0x224),'PK':_0x5590b5(0x1a1),'MN':_0x5590b5(0x236)},_0x112d52=_0x483d67[_0x111ab6[_0x5590b5(0x1df)]()];if(!_0x112d52)return console[_0x5590b5(0x1ed)](_0x5590b5(0x1e3)+_0x111ab6+_0x5590b5(0x1d0)),'RUS';return _0x112d52;}async[a52_0x2f3783(0x1a9)](_0xb7db6){const _0x2a6128=a52_0x2f3783;try{const {orderId:_0x356fe3,amount:_0x5f0ca1,currency:_0x515866,firstName:_0x5d6e5b,lastName:_0x2ccbe7,email:_0x40925b,customerIp:_0x46041d,customerCountry:_0x280e9a,successUrl:_0x5612c9,failureUrl:_0x2134d7}=_0xb7db6;console[_0x2a6128(0x1f8)](_0x2a6128(0x1de)),console[_0x2a6128(0x1f8)](_0x2a6128(0x1f7),_0x356fe3),console[_0x2a6128(0x1f8)](_0x2a6128(0x1f0),_0x5f0ca1,_0x515866),console[_0x2a6128(0x1f8)](_0x2a6128(0x1a4),_0x5d6e5b+'\x20'+_0x2ccbe7),console[_0x2a6128(0x1f8)](_0x2a6128(0x1bd),_0x40925b),console['log']('Customer\x20IP:',_0x46041d),console[_0x2a6128(0x1f8)]('Customer\x20Country\x20(2-letter):',_0x280e9a);const _0x5f3398=this['convert2LetterTo3LetterCountryCode'](_0x280e9a);console[_0x2a6128(0x1f8)]('Customer\x20Country\x20(3-letter):',_0x5f3398);const _0x2cca74={'sub_method':'GAM','currency':_0x515866[_0x2a6128(0x1df)](),'amount':_0x5f0ca1,'callback_url':_0x2a6128(0x1b1),'client_merchant_id':this[_0x2a6128(0x218)],'client_transaction_id':_0x356fe3,'transaction_description':_0x356fe3,'customer':{'ip':_0x46041d,'email':_0x40925b,'full_name':_0x5d6e5b+'\x20'+_0x2ccbe7,'country':_0x5f3398},'success_redirect_url':_0x5612c9,'error_redirect_url':_0x2134d7};console[_0x2a6128(0x1f8)](_0x2a6128(0x1ea),JSON[_0x2a6128(0x1b3)](_0x2cca74,null,0x2));const _0x311a7c=await fetch(this[_0x2a6128(0x1b6)]+_0x2a6128(0x23f),{'method':_0x2a6128(0x1b0),'headers':{'Content-Type':_0x2a6128(0x230),'User-Agent':_0x2a6128(0x212)},'body':JSON[_0x2a6128(0x1b3)](_0x2cca74)}),_0x1242db=await _0x311a7c[_0x2a6128(0x226)]();console[_0x2a6128(0x1f8)](_0x2a6128(0x1a6),_0x1242db);if(!_0x311a7c['ok'])throw new Error(_0x2a6128(0x234)+_0x311a7c['status']+'\x20-\x20'+_0x1242db);let _0x5f9162;try{_0x5f9162=JSON[_0x2a6128(0x1e8)](_0x1242db);}catch(_0x56b2c9){throw new Error('Invalid\x20JSON\x20response\x20from\x20AmPay:\x20'+_0x1242db);}console[_0x2a6128(0x1f8)](_0x2a6128(0x1b9),JSON[_0x2a6128(0x1b3)](_0x5f9162,null,0x2));if(!_0x5f9162[_0x2a6128(0x23a)])throw new Error(_0x2a6128(0x1c1)+(_0x5f9162[_0x2a6128(0x1a2)]||_0x5f9162[_0x2a6128(0x1e6)]||_0x2a6128(0x22c)));const _0x544389=_0x5f9162[_0x2a6128(0x23a)],_0xefa8ec=_0x5f9162[_0x2a6128(0x1ee)],_0x4a593a=_0x5f9162[_0x2a6128(0x21f)];return console[_0x2a6128(0x1f8)](_0x2a6128(0x210)),console[_0x2a6128(0x1f8)](_0x2a6128(0x1e0),_0x544389),console[_0x2a6128(0x1f8)](_0x2a6128(0x196),_0xefa8ec),console['log']('Tracker\x20ID:',_0x4a593a),console['log'](_0x2a6128(0x228),_0x5f9162['status']),console['log'](_0x2a6128(0x201)),{'gateway_payment_id':_0xefa8ec||_0x4a593a||_0x356fe3,'payment_url':_0x544389||'','transaction_id':_0xefa8ec};}catch(_0x2163e1){console[_0x2a6128(0x1a3)](_0x2a6128(0x1c6),_0x2163e1),console[_0x2a6128(0x1f8)]('üìù\x20Logging\x20AmPay\x20payment\x20creation\x20failure...');throw _0x2163e1;}}async[a52_0x2f3783(0x22a)](){const _0x179575=a52_0x2f3783;try{const _0x919631=await fetch(this[_0x179575(0x1b6)]+_0x179575(0x200),{'method':_0x179575(0x194),'headers':{'Content-Type':_0x179575(0x230),'User-Agent':_0x179575(0x212)}});return _0x919631&&_0x919631[_0x179575(0x1d5)]===0xc8?!![]:![];}catch(_0x4d7588){return console['error'](_0x179575(0x1d3),_0x4d7588),![];}}async['processWebhook'](_0x4b2fb9){const _0x214bd3=a52_0x2f3783;console[_0x214bd3(0x1f8)](_0x214bd3(0x202)),console[_0x214bd3(0x1f8)](_0x214bd3(0x206)),console['log'](_0x214bd3(0x232),_0x4b2fb9),console['log'](_0x214bd3(0x20d),typeof _0x4b2fb9),console[_0x214bd3(0x1f8)]('Available\x20fields:');_0x4b2fb9&&typeof _0x4b2fb9===_0x214bd3(0x20a)&&Object['keys'](_0x4b2fb9)[_0x214bd3(0x213)](_0x9040b7=>{const _0x2bd8cb=_0x214bd3;console[_0x2bd8cb(0x1f8)]('\x20\x20'+_0x9040b7+':\x20'+_0x4b2fb9[_0x9040b7]+'\x20('+typeof _0x4b2fb9[_0x9040b7]+')');});let _0x5edd95=_0x214bd3(0x1ab);const _0x2ae651=_0x4b2fb9[_0x214bd3(0x23e)]||_0x4b2fb9[_0x214bd3(0x1ee)]||_0x4b2fb9['tracker_id']||'';return console[_0x214bd3(0x1f8)]('Extracted\x20payment\x20ID:\x20'+_0x2ae651),console['log'](_0x214bd3(0x1dd)+_0x5edd95),!_0x2ae651&&(console[_0x214bd3(0x1a3)](_0x214bd3(0x1be)),console[_0x214bd3(0x1a3)](_0x214bd3(0x222))),{'paymentId':_0x2ae651,'status':_0x5edd95,'amount':_0x4b2fb9[_0x214bd3(0x1f2)],'currency':_0x4b2fb9['currency']};}}exports[a52_0x2f3783(0x208)]=AmPayService,exports[a52_0x2f3783(0x1cf)]=new AmPayService();function a52_0x1115(){const _0x4f38b2=['EST','ISL','GEO','CLIENT_MERCHANT_ID','3639996XkgYxa','FLK','YEM','ISR','MDG','üá¶üá≤\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing','tracker_id','TZA','CYP','Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id','6055895KhOshx','AFG','JOR','text','PER','Status:','ARM','healthCheck','MWI','Unknown\x20error','BHR','CHE','AND','application/json','ZWE','Webhook\x20data:','NLD','AmPay\x20API\x20error:\x20HTTP\x20','PSE','MNG','SVN','HUN','6xWGGUB','redirect_url','TKM','COL','a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815','client_transaction_id','ampay.php','GET','TRAFFER','System\x20ID:','PHL','SYC','KAZ','IRN','ARE','MDA','EGY','GUY','SWE','defineProperty','PAK','error_message','error','Customer:','LKA','üì•\x20AmPay\x20raw\x20response:','ECU','PRY','createPaymentLink','OMN','PENDING','16hHelgc','ZAF','BLR','LIE','POST','https://traffer.uk/gateway/ampay/webhook.php','58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda','stringify','HRV','SRB','apiUrl','MNE','PRT','üìä\x20AmPay\x20response\x20data:','5819407ZdTSfn','90KcBQCX','LBN','Email:','No\x20payment\x20ID\x20found\x20in\x20webhook\x20data','FIN','ITA','AmPay\x20payment\x20creation\x20failed:\x20','2613318ZQqaPy','SYR','API_PUBLIC_KEY','NOR','‚ùå\x20AmPay\x20payment\x20creation\x20failed:','CHL','AZE','UKR','KOR','LUX','RUS','CZE','GBR','ampayService',',\x20using\x20RUS\x20as\x20fallback','829779Hcwjts','BRA','‚ùå\x20AmPay\x20health\x20check\x20failed:','ESP','status','NGA','LAO','SAU','LTU','BGR','IRL','MOZ','Forced\x20status\x20(webhook\x20disabled):\x20','üá¶üá≤\x20Creating\x20AmPay\x20payment\x20link...','toUpperCase','Payment\x20URL:','JPN','1310701cGdWvp','‚ö†Ô∏è\x20Unknown\x20country\x20code:\x20','VNM','160GeHgqb','message','MKD','parse','KWT','üì§\x20AmPay\x20request\x20body:','NPL','TJK','warn','system_id','KHM','Amount:','DEU','amount','MMR','KGZ','FRA','MDV','Order\x20ID:','log','https://traffer.uk/gateway/ampay/','MCO','QAT','BEL','BGD','BIH','VEN','health.php','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20event...','===\x20Processing\x20AmPay\x20webhook\x20===','API_PRIVATE_KEY','convert2LetterTo3LetterCountryCode','URY','‚ö†Ô∏è\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status','LVA','AmPayService','ZMB','object','MYS','CHN','Webhook\x20data\x20type:','328958jmlvpg','AUS','‚úÖ\x20AmPay\x20payment\x20link\x20created\x20successfully','POL','TrapayAPI/1.0','forEach','THA'];a52_0x1115=function(){return _0x4f38b2;};return a52_0x1115();}