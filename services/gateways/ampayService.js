'use strict';const a46_0x16e0a7=a46_0x55ee;(function(_0x5d26a5,_0x324308){const _0x4a0be1=a46_0x55ee,_0xabca9=_0x5d26a5();while(!![]){try{const _0x4469a6=-parseInt(_0x4a0be1(0x219))/0x1+parseInt(_0x4a0be1(0x224))/0x2*(parseInt(_0x4a0be1(0x236))/0x3)+-parseInt(_0x4a0be1(0x214))/0x4*(-parseInt(_0x4a0be1(0x23c))/0x5)+parseInt(_0x4a0be1(0x21f))/0x6*(parseInt(_0x4a0be1(0x1ea))/0x7)+parseInt(_0x4a0be1(0x221))/0x8*(parseInt(_0x4a0be1(0x1f9))/0x9)+parseInt(_0x4a0be1(0x24e))/0xa*(-parseInt(_0x4a0be1(0x1ff))/0xb)+-parseInt(_0x4a0be1(0x286))/0xc;if(_0x4469a6===_0x324308)break;else _0xabca9['push'](_0xabca9['shift']());}catch(_0x50f169){_0xabca9['push'](_0xabca9['shift']());}}}(a46_0x228f,0xb55af));function a46_0x55ee(_0x5b39ba,_0x27f360){const _0x228fb3=a46_0x228f();return a46_0x55ee=function(_0x55ee15,_0x3c6244){_0x55ee15=_0x55ee15-0x1ea;let _0xea60c8=_0x228fb3[_0x55ee15];return _0xea60c8;},a46_0x55ee(_0x5b39ba,_0x27f360);}Object[a46_0x16e0a7(0x23e)](exports,'__esModule',{'value':!![]}),exports[a46_0x16e0a7(0x26b)]=exports[a46_0x16e0a7(0x1f4)]=void 0x0;class AmPayService{constructor(){const _0x2a87f3=a46_0x16e0a7;this['CLIENT_MERCHANT_ID']=_0x2a87f3(0x23b),this[_0x2a87f3(0x1f8)]='58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda',this[_0x2a87f3(0x231)]='a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815',this[_0x2a87f3(0x211)]=_0x2a87f3(0x21b),console[_0x2a87f3(0x20c)](_0x2a87f3(0x1ec));}['convert2LetterTo3LetterCountryCode'](_0x3af1d9){const _0x5c0543=a46_0x16e0a7,_0x53a108={'AD':_0x5c0543(0x237),'AL':_0x5c0543(0x27a),'AT':_0x5c0543(0x272),'BA':'BIH','BE':_0x5c0543(0x228),'BG':_0x5c0543(0x28a),'BY':_0x5c0543(0x206),'CH':_0x5c0543(0x264),'CY':_0x5c0543(0x284),'CZ':_0x5c0543(0x23d),'DE':_0x5c0543(0x260),'DK':_0x5c0543(0x25b),'EE':_0x5c0543(0x233),'ES':_0x5c0543(0x28b),'FI':_0x5c0543(0x25d),'FR':'FRA','GB':'GBR','GE':_0x5c0543(0x222),'GR':'GRC','HR':_0x5c0543(0x204),'HU':_0x5c0543(0x262),'IE':_0x5c0543(0x216),'IS':_0x5c0543(0x267),'IT':_0x5c0543(0x226),'LI':_0x5c0543(0x210),'LT':_0x5c0543(0x268),'LU':_0x5c0543(0x26e),'LV':'LVA','MC':_0x5c0543(0x285),'MD':'MDA','ME':'MNE','MK':_0x5c0543(0x269),'MT':_0x5c0543(0x1f0),'NL':_0x5c0543(0x234),'NO':'NOR','PL':_0x5c0543(0x245),'PT':'PRT','RO':_0x5c0543(0x26c),'RS':_0x5c0543(0x24f),'RU':_0x5c0543(0x21d),'SE':_0x5c0543(0x263),'SI':_0x5c0543(0x232),'SK':_0x5c0543(0x240),'SM':_0x5c0543(0x274),'UA':_0x5c0543(0x1f6),'VA':_0x5c0543(0x250),'XK':_0x5c0543(0x278),'AM':_0x5c0543(0x201),'AZ':_0x5c0543(0x213),'KZ':_0x5c0543(0x243),'KG':_0x5c0543(0x266),'TJ':'TJK','TM':'TKM','UZ':_0x5c0543(0x229),'US':_0x5c0543(0x205),'CA':_0x5c0543(0x20b),'AU':_0x5c0543(0x255),'JP':'JPN','CN':_0x5c0543(0x280),'IN':_0x5c0543(0x27e),'BR':'BRA','MX':'MEX','AR':_0x5c0543(0x25f),'CL':_0x5c0543(0x203),'PE':_0x5c0543(0x20d),'CO':_0x5c0543(0x244),'VE':'VEN','EC':_0x5c0543(0x1ed),'BO':_0x5c0543(0x1eb),'PY':'PRY','UY':_0x5c0543(0x287),'SR':_0x5c0543(0x27c),'GY':'GUY','FK':_0x5c0543(0x261),'ZA':_0x5c0543(0x241),'EG':_0x5c0543(0x22b),'NG':'NGA','KE':_0x5c0543(0x288),'GH':_0x5c0543(0x1fc),'TZ':_0x5c0543(0x21e),'UG':'UGA','ZW':_0x5c0543(0x22c),'ZM':_0x5c0543(0x1fe),'MW':_0x5c0543(0x22d),'MZ':_0x5c0543(0x27f),'MG':_0x5c0543(0x1ef),'MU':'MUS','SC':_0x5c0543(0x220),'RE':_0x5c0543(0x279),'TR':'TUR','IR':'IRN','IQ':'IRQ','SA':_0x5c0543(0x207),'AE':'ARE','KW':_0x5c0543(0x217),'QA':_0x5c0543(0x26d),'BH':'BHR','OM':_0x5c0543(0x257),'YE':_0x5c0543(0x27b),'JO':_0x5c0543(0x227),'LB':'LBN','SY':_0x5c0543(0x1f3),'IL':_0x5c0543(0x281),'PS':_0x5c0543(0x22a),'KR':_0x5c0543(0x247),'KP':_0x5c0543(0x282),'TH':'THA','VN':_0x5c0543(0x270),'MY':_0x5c0543(0x28c),'SG':'SGP','ID':_0x5c0543(0x1f1),'PH':'PHL','LA':_0x5c0543(0x20a),'KH':'KHM','MM':_0x5c0543(0x24a),'BD':_0x5c0543(0x277),'LK':_0x5c0543(0x283),'NP':_0x5c0543(0x20e),'BT':_0x5c0543(0x1f5),'MV':_0x5c0543(0x26a),'AF':_0x5c0543(0x27d),'PK':_0x5c0543(0x275),'MN':_0x5c0543(0x1fb)},_0x600630=_0x53a108[_0x3af1d9['toUpperCase']()];if(!_0x600630)return console['warn'](_0x5c0543(0x256)+_0x3af1d9+',\x20using\x20RUS\x20as\x20fallback'),_0x5c0543(0x21d);return _0x600630;}async[a46_0x16e0a7(0x225)](_0x2e041d){const _0x286e28=a46_0x16e0a7;try{const {orderId:_0x3542f5,amount:_0x3acd04,currency:_0xfed280,firstName:_0x552b2d,lastName:_0xbebda8,email:_0x1e3378,customerIp:_0x17c6dc,customerCountry:_0x2e2312,successUrl:_0x3b728b,failureUrl:_0x58f35d}=_0x2e041d;console[_0x286e28(0x20c)](_0x286e28(0x230)),console[_0x286e28(0x20c)](_0x286e28(0x23f),_0x3542f5),console[_0x286e28(0x20c)](_0x286e28(0x239),_0x3acd04,_0xfed280),console[_0x286e28(0x20c)](_0x286e28(0x258),_0x552b2d+'\x20'+_0xbebda8),console[_0x286e28(0x20c)](_0x286e28(0x25e),_0x1e3378),console['log']('Customer\x20IP:',_0x17c6dc),console[_0x286e28(0x20c)](_0x286e28(0x252),_0x2e2312);const _0x23c015=this[_0x286e28(0x249)](_0x2e2312);console[_0x286e28(0x20c)](_0x286e28(0x22e),_0x23c015);const _0xa0ecf1={'sub_method':_0x286e28(0x238),'currency':_0xfed280['toUpperCase'](),'amount':_0x3acd04,'callback_url':_0x286e28(0x251),'client_merchant_id':this[_0x286e28(0x202)],'client_transaction_id':_0x3542f5,'transaction_description':_0x3542f5,'customer':{'ip':_0x17c6dc,'email':_0x1e3378,'full_name':_0x552b2d+'\x20'+_0xbebda8,'country':_0x23c015},'success_redirect_url':_0x3b728b,'error_redirect_url':_0x58f35d};console['log'](_0x286e28(0x21a),JSON[_0x286e28(0x289)](_0xa0ecf1,null,0x2));const _0x253ef8=await fetch(this[_0x286e28(0x211)]+_0x286e28(0x254),{'method':_0x286e28(0x24d),'headers':{'Content-Type':_0x286e28(0x20f),'User-Agent':'TrapayAPI/1.0'},'body':JSON[_0x286e28(0x289)](_0xa0ecf1)}),_0x990b64=await _0x253ef8[_0x286e28(0x253)]();console[_0x286e28(0x20c)](_0x286e28(0x23a),_0x990b64);if(!_0x253ef8['ok'])throw new Error('AmPay\x20API\x20error:\x20HTTP\x20'+_0x253ef8['status']+'\x20-\x20'+_0x990b64);let _0x738930;try{_0x738930=JSON[_0x286e28(0x1fa)](_0x990b64);}catch(_0x2f22b9){throw new Error('Invalid\x20JSON\x20response\x20from\x20AmPay:\x20'+_0x990b64);}console[_0x286e28(0x20c)](_0x286e28(0x24b),JSON[_0x286e28(0x289)](_0x738930,null,0x2));if(!_0x738930[_0x286e28(0x1f2)])throw new Error('AmPay\x20payment\x20creation\x20failed:\x20'+(_0x738930[_0x286e28(0x1f7)]||_0x738930[_0x286e28(0x223)]||_0x286e28(0x26f)));const _0x2f2875=_0x738930[_0x286e28(0x1f2)],_0x5b5eea=_0x738930[_0x286e28(0x22f)],_0x1cad84=_0x738930[_0x286e28(0x1fd)];return console[_0x286e28(0x20c)]('‚úÖ\x20AmPay\x20payment\x20link\x20created\x20successfully'),console[_0x286e28(0x20c)]('Payment\x20URL:',_0x2f2875),console[_0x286e28(0x20c)]('System\x20ID:',_0x5b5eea),console[_0x286e28(0x20c)]('Tracker\x20ID:',_0x1cad84),console[_0x286e28(0x20c)](_0x286e28(0x276),_0x738930[_0x286e28(0x24c)]),console[_0x286e28(0x20c)](_0x286e28(0x273)),{'gateway_payment_id':_0x5b5eea||_0x1cad84||_0x3542f5,'payment_url':_0x2f2875||'','transaction_id':_0x5b5eea};}catch(_0x57aca0){console[_0x286e28(0x259)](_0x286e28(0x209),_0x57aca0),console[_0x286e28(0x20c)]('üìù\x20Logging\x20AmPay\x20payment\x20creation\x20failure...');throw _0x57aca0;}}async[a46_0x16e0a7(0x218)](){const _0x2acf81=a46_0x16e0a7;try{const _0x1a10dc=await fetch(this['apiUrl']+_0x2acf81(0x235),{'method':_0x2acf81(0x200),'headers':{'Content-Type':_0x2acf81(0x20f),'User-Agent':_0x2acf81(0x215)}});return _0x1a10dc&&_0x1a10dc['status']===0xc8?!![]:![];}catch(_0x5dd6bd){return console[_0x2acf81(0x259)](_0x2acf81(0x271),_0x5dd6bd),![];}}async['processWebhook'](_0x257e0e){const _0x1d7d9f=a46_0x16e0a7;console[_0x1d7d9f(0x20c)](_0x1d7d9f(0x21c)),console[_0x1d7d9f(0x20c)]('‚ö†Ô∏è\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status'),console[_0x1d7d9f(0x20c)]('Webhook\x20data:',_0x257e0e),console[_0x1d7d9f(0x20c)](_0x1d7d9f(0x248),typeof _0x257e0e),console[_0x1d7d9f(0x20c)]('Available\x20fields:');_0x257e0e&&typeof _0x257e0e==='object'&&Object[_0x1d7d9f(0x212)](_0x257e0e)[_0x1d7d9f(0x242)](_0x30ceb4=>{const _0x4a1044=_0x1d7d9f;console[_0x4a1044(0x20c)]('\x20\x20'+_0x30ceb4+':\x20'+_0x257e0e[_0x30ceb4]+'\x20('+typeof _0x257e0e[_0x30ceb4]+')');});let _0x291f0f=_0x1d7d9f(0x208);const _0x2b0c9c=_0x257e0e[_0x1d7d9f(0x265)]||_0x257e0e[_0x1d7d9f(0x22f)]||_0x257e0e['tracker_id']||'';return console[_0x1d7d9f(0x20c)]('Extracted\x20payment\x20ID:\x20'+_0x2b0c9c),console[_0x1d7d9f(0x20c)](_0x1d7d9f(0x25a)+_0x291f0f),!_0x2b0c9c&&(console[_0x1d7d9f(0x259)]('No\x20payment\x20ID\x20found\x20in\x20webhook\x20data'),console[_0x1d7d9f(0x259)](_0x1d7d9f(0x1ee))),{'paymentId':_0x2b0c9c,'status':_0x291f0f,'amount':_0x257e0e[_0x1d7d9f(0x25c)],'currency':_0x257e0e[_0x1d7d9f(0x246)]};}}function a46_0x228f(){const _0x55a5e6=['Status:','BGD','XKX','REU','ALB','YEM','SUR','AFG','IND','MOZ','CHN','ISR','PRK','LKA','CYP','MCO','22426560eGYXJz','URY','KEN','stringify','BGR','ESP','MYS','5026FZWWkz','BOL','üá¶üá≤\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing','ECU','Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id','MDG','MLT','IDN','redirect_url','SYR','AmPayService','BTN','UKR','error_message','API_PUBLIC_KEY','13231557pUmgqm','parse','MNG','GHA','tracker_id','ZMB','2684LGBjgj','GET','ARM','CLIENT_MERCHANT_ID','CHL','HRV','USA','BLR','SAU','PENDING','‚ùå\x20AmPay\x20payment\x20creation\x20failed:','LAO','CAN','log','PER','NPL','application/json','LIE','apiUrl','keys','AZE','4yTtUat','TrapayAPI/1.0','IRL','KWT','healthCheck','1223694VGMvVM','üì§\x20AmPay\x20request\x20body:','https://traffer.uk/gateway/ampay/','===\x20Processing\x20AmPay\x20webhook\x20===','RUS','TZA','10398vtchIz','SYC','8ZfGiuO','GEO','message','22pCJucJ','createPaymentLink','ITA','JOR','BEL','UZB','PSE','EGY','ZWE','MWI','Customer\x20Country\x20(3-letter):','system_id','üá¶üá≤\x20Creating\x20AmPay\x20payment\x20link...','API_PRIVATE_KEY','SVN','EST','NLD','health.php','163281nPPbru','AND','GAM','Amount:','üì•\x20AmPay\x20raw\x20response:','TRAFFER','2613645fiooqp','CZE','defineProperty','Order\x20ID:','SVK','ZAF','forEach','KAZ','COL','POL','currency','KOR','Webhook\x20data\x20type:','convert2LetterTo3LetterCountryCode','MMR','üìä\x20AmPay\x20response\x20data:','status','POST','20xjWwhe','SRB','VAT','https://traffer.uk/gateway/ampay/webhook.php','Customer\x20Country\x20(2-letter):','text','ampay.php','AUS','‚ö†Ô∏è\x20Unknown\x20country\x20code:\x20','OMN','Customer:','error','Forced\x20status\x20(webhook\x20disabled):\x20','DNK','amount','FIN','Email:','ARG','DEU','FLK','HUN','SWE','CHE','client_transaction_id','KGZ','ISL','LTU','MKD','MDV','ampayService','ROU','QAT','LUX','Unknown\x20error','VNM','‚ùå\x20AmPay\x20health\x20check\x20failed:','AUT','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20event...','SMR','PAK'];a46_0x228f=function(){return _0x55a5e6;};return a46_0x228f();}exports['AmPayService']=AmPayService,exports[a46_0x16e0a7(0x26b)]=new AmPayService();