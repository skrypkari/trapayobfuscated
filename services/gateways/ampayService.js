'use strict';function a58_0x2ad9(_0x5d8713,_0x492f19){_0x5d8713=_0x5d8713-0x1f0;const _0x28f60c=a58_0x28f6();let _0x2ad92b=_0x28f60c[_0x5d8713];return _0x2ad92b;}const a58_0x59b617=a58_0x2ad9;(function(_0x14e27f,_0xc9f340){const _0x8c5344=a58_0x2ad9,_0x2dd1c2=_0x14e27f();while(!![]){try{const _0x1c6654=-parseInt(_0x8c5344(0x235))/0x1*(-parseInt(_0x8c5344(0x23f))/0x2)+parseInt(_0x8c5344(0x250))/0x3+parseInt(_0x8c5344(0x233))/0x4+-parseInt(_0x8c5344(0x26d))/0x5*(parseInt(_0x8c5344(0x254))/0x6)+-parseInt(_0x8c5344(0x203))/0x7*(parseInt(_0x8c5344(0x251))/0x8)+parseInt(_0x8c5344(0x277))/0x9*(parseInt(_0x8c5344(0x1f0))/0xa)+-parseInt(_0x8c5344(0x283))/0xb;if(_0x1c6654===_0xc9f340)break;else _0x2dd1c2['push'](_0x2dd1c2['shift']());}catch(_0x38fae9){_0x2dd1c2['push'](_0x2dd1c2['shift']());}}}(a58_0x28f6,0x40415));function a58_0x28f6(){const _0x426a63=['TUR','Tracker\x20ID:','GRC','stringify','USA','CHE','text','VEN','58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda','a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815','SUR','MDV','tracker_id','UKR','BTN','ðŸ“\x20Logging\x20AmPay\x20payment\x20creation\x20event...','status','forEach','parse','ITA','processWebhook','Customer:','redirect_url','MUS','No\x20payment\x20ID\x20found\x20in\x20webhook\x20data','MEX','ARE','TZA','YEM','API_PRIVATE_KEY','POL','BHR','714248RpOMgY','BRA','1rFHhQk','client_transaction_id','MYS','error','AFG','FRA','DEU','LAO','KWT','ðŸ‡¦ðŸ‡²\x20Creating\x20AmPay\x20payment\x20link...','416362zViaJm','CAN','API_PUBLIC_KEY','object','Payment\x20URL:','Available\x20fields:','Extracted\x20payment\x20ID:\x20','ARM','AUS','SMR','Status:','application/json','https://traffer.uk/gateway/ampay/','SVN','SRB','ZMB','LBN','1218204sQogvP','40ecUWix','Customer\x20Country\x20(2-letter):','SYC','324NZjSIK','IDN','EGY','MDA','BIH','defineProperty','CLIENT_MERCHANT_ID','MDG','HUN','Webhook\x20data\x20type:','âœ…\x20AmPay\x20payment\x20link\x20created\x20successfully','âš ï¸\x20Unknown\x20country\x20code:\x20','ISL','KHM','KGZ','PENDING','ALB','Order\x20ID:','ZAF','CYP','NLD','ISR','HRV','SWE','LTU','36645uyhsSa','Email:','ampayService','TrapayAPI/1.0','COL','ESP','SGP','AND','JOR','MNE','303039wZMaca','GAM','__esModule','VNM','BGR','GEO',',\x20using\x20RUS\x20as\x20fallback','VAT','LUX','Forced\x20status\x20(webhook\x20disabled):\x20','IND','createPaymentLink','3208601ovxnld','URY','ECU','TKM','QAT','âŒ\x20AmPay\x20payment\x20creation\x20failed:','THA','System\x20ID:','convert2LetterTo3LetterCountryCode','GHA','system_id','ðŸ“¤\x20AmPay\x20request\x20body:','IRL','GET','LIE','GBR','BOL','ðŸ“¥\x20AmPay\x20raw\x20response:','amount','ðŸ“\x20Logging\x20AmPay\x20payment\x20creation\x20failure...','KEN','MOZ','https://traffer.uk/gateway/ampay/webhook.php','AmPay\x20payment\x20creation\x20failed:\x20','currency','AmPay\x20API\x20error:\x20HTTP\x20','50EJVJMF','BGD','NOR','UGA','toUpperCase','SAU','MKD','JPN','âŒ\x20AmPay\x20health\x20check\x20failed:','keys','MNG','message','RUS','DNK','IRN','REU','XKX','CHL','TRAFFER','14728LzwRFB','Webhook\x20data:','ðŸ‡¦ðŸ‡²\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing','Customer\x20Country\x20(3-letter):','log','Amount:','error_message','AZE','EST','apiUrl','health.php','===\x20Processing\x20AmPay\x20webhook\x20===','Customer\x20IP:','OMN','SVK','KAZ'];a58_0x28f6=function(){return _0x426a63;};return a58_0x28f6();}Object[a58_0x59b617(0x259)](exports,a58_0x59b617(0x279),{'value':!![]}),exports[a58_0x59b617(0x26f)]=exports['AmPayService']=void 0x0;class AmPayService{constructor(){const _0x1e4998=a58_0x59b617;this[_0x1e4998(0x25a)]=_0x1e4998(0x202),this[_0x1e4998(0x241)]=_0x1e4998(0x21b),this[_0x1e4998(0x230)]=_0x1e4998(0x21c),this[_0x1e4998(0x20c)]=_0x1e4998(0x24b),console[_0x1e4998(0x207)](_0x1e4998(0x205));}[a58_0x59b617(0x28b)](_0x3d1c0d){const _0xba80d5=a58_0x59b617,_0x50001f={'AD':_0xba80d5(0x274),'AL':_0xba80d5(0x264),'AT':'AUT','BA':_0xba80d5(0x258),'BE':'BEL','BG':_0xba80d5(0x27b),'BY':'BLR','CH':_0xba80d5(0x218),'CY':_0xba80d5(0x267),'CZ':'CZE','DE':_0xba80d5(0x23b),'DK':_0xba80d5(0x1fd),'EE':_0xba80d5(0x20b),'ES':_0xba80d5(0x272),'FI':'FIN','FR':_0xba80d5(0x23a),'GB':_0xba80d5(0x292),'GE':_0xba80d5(0x27c),'GR':_0xba80d5(0x215),'HR':_0xba80d5(0x26a),'HU':_0xba80d5(0x25c),'IE':_0xba80d5(0x28f),'IS':_0xba80d5(0x260),'IT':_0xba80d5(0x226),'LI':_0xba80d5(0x291),'LT':_0xba80d5(0x26c),'LU':_0xba80d5(0x27f),'LV':'LVA','MC':'MCO','MD':_0xba80d5(0x257),'ME':_0xba80d5(0x276),'MK':_0xba80d5(0x1f6),'MT':'MLT','NL':_0xba80d5(0x268),'NO':_0xba80d5(0x1f2),'PL':_0xba80d5(0x231),'PT':'PRT','RO':'ROU','RS':_0xba80d5(0x24d),'RU':_0xba80d5(0x1fc),'SE':_0xba80d5(0x26b),'SI':_0xba80d5(0x24c),'SK':_0xba80d5(0x211),'SM':_0xba80d5(0x248),'UA':_0xba80d5(0x220),'VA':_0xba80d5(0x27e),'XK':_0xba80d5(0x200),'AM':_0xba80d5(0x246),'AZ':_0xba80d5(0x20a),'KZ':_0xba80d5(0x212),'KG':_0xba80d5(0x262),'TJ':'TJK','TM':_0xba80d5(0x286),'UZ':'UZB','US':_0xba80d5(0x217),'CA':_0xba80d5(0x240),'AU':_0xba80d5(0x247),'JP':_0xba80d5(0x1f7),'CN':'CHN','IN':_0xba80d5(0x281),'BR':_0xba80d5(0x234),'MX':_0xba80d5(0x22c),'AR':'ARG','CL':_0xba80d5(0x201),'PE':'PER','CO':_0xba80d5(0x271),'VE':_0xba80d5(0x21a),'EC':_0xba80d5(0x285),'BO':_0xba80d5(0x293),'PY':'PRY','UY':_0xba80d5(0x284),'SR':_0xba80d5(0x21d),'GY':'GUY','FK':'FLK','ZA':_0xba80d5(0x266),'EG':_0xba80d5(0x256),'NG':'NGA','KE':_0xba80d5(0x297),'GH':_0xba80d5(0x28c),'TZ':_0xba80d5(0x22e),'UG':_0xba80d5(0x1f3),'ZW':'ZWE','ZM':_0xba80d5(0x24e),'MW':'MWI','MZ':_0xba80d5(0x298),'MG':_0xba80d5(0x25b),'MU':_0xba80d5(0x22a),'SC':_0xba80d5(0x253),'RE':_0xba80d5(0x1ff),'TR':_0xba80d5(0x213),'IR':_0xba80d5(0x1fe),'IQ':'IRQ','SA':_0xba80d5(0x1f5),'AE':_0xba80d5(0x22d),'KW':_0xba80d5(0x23d),'QA':_0xba80d5(0x287),'BH':_0xba80d5(0x232),'OM':_0xba80d5(0x210),'YE':_0xba80d5(0x22f),'JO':_0xba80d5(0x275),'LB':_0xba80d5(0x24f),'SY':'SYR','IL':_0xba80d5(0x269),'PS':'PSE','KR':'KOR','KP':'PRK','TH':_0xba80d5(0x289),'VN':_0xba80d5(0x27a),'MY':_0xba80d5(0x237),'SG':_0xba80d5(0x273),'ID':_0xba80d5(0x255),'PH':'PHL','LA':_0xba80d5(0x23c),'KH':_0xba80d5(0x261),'MM':'MMR','BD':_0xba80d5(0x1f1),'LK':'LKA','NP':'NPL','BT':_0xba80d5(0x221),'MV':_0xba80d5(0x21e),'AF':_0xba80d5(0x239),'PK':'PAK','MN':_0xba80d5(0x1fa)},_0x48c7ae=_0x50001f[_0x3d1c0d[_0xba80d5(0x1f4)]()];if(!_0x48c7ae)return console['warn'](_0xba80d5(0x25f)+_0x3d1c0d+_0xba80d5(0x27d)),'RUS';return _0x48c7ae;}async[a58_0x59b617(0x282)](_0x1074a4){const _0x49c188=a58_0x59b617;try{const {orderId:_0x343f44,amount:_0x56622f,currency:_0x41a4de,firstName:_0x3dfb8f,lastName:_0x411a6a,email:_0x5f1406,customerIp:_0x8b80f1,customerCountry:_0x3c67bf,successUrl:_0x456fac,failureUrl:_0x1ef260}=_0x1074a4;console[_0x49c188(0x207)](_0x49c188(0x23e)),console[_0x49c188(0x207)](_0x49c188(0x265),_0x343f44),console['log'](_0x49c188(0x208),_0x56622f,_0x41a4de),console[_0x49c188(0x207)](_0x49c188(0x228),_0x3dfb8f+'\x20'+_0x411a6a),console[_0x49c188(0x207)](_0x49c188(0x26e),_0x5f1406),console['log'](_0x49c188(0x20f),_0x8b80f1),console['log'](_0x49c188(0x252),_0x3c67bf);const _0x44f036=this['convert2LetterTo3LetterCountryCode'](_0x3c67bf);console[_0x49c188(0x207)](_0x49c188(0x206),_0x44f036);const _0x4454f2={'sub_method':_0x49c188(0x278),'currency':_0x41a4de[_0x49c188(0x1f4)](),'amount':_0x56622f,'callback_url':_0x49c188(0x299),'client_merchant_id':this[_0x49c188(0x25a)],'client_transaction_id':_0x343f44,'transaction_description':_0x343f44,'customer':{'ip':_0x8b80f1,'email':_0x5f1406,'full_name':_0x3dfb8f+'\x20'+_0x411a6a,'country':_0x44f036},'success_redirect_url':_0x456fac,'error_redirect_url':_0x1ef260};console['log'](_0x49c188(0x28e),JSON[_0x49c188(0x216)](_0x4454f2,null,0x2));const _0x29fe44=await fetch(this[_0x49c188(0x20c)]+'ampay.php',{'method':'POST','headers':{'Content-Type':_0x49c188(0x24a),'User-Agent':_0x49c188(0x270)},'body':JSON[_0x49c188(0x216)](_0x4454f2)}),_0x202fc5=await _0x29fe44[_0x49c188(0x219)]();console[_0x49c188(0x207)](_0x49c188(0x294),_0x202fc5);if(!_0x29fe44['ok'])throw new Error(_0x49c188(0x29c)+_0x29fe44[_0x49c188(0x223)]+'\x20-\x20'+_0x202fc5);let _0x2c736b;try{_0x2c736b=JSON[_0x49c188(0x225)](_0x202fc5);}catch(_0x1dfefe){throw new Error('Invalid\x20JSON\x20response\x20from\x20AmPay:\x20'+_0x202fc5);}console[_0x49c188(0x207)]('ðŸ“Š\x20AmPay\x20response\x20data:',JSON[_0x49c188(0x216)](_0x2c736b,null,0x2));if(!_0x2c736b[_0x49c188(0x229)])throw new Error(_0x49c188(0x29a)+(_0x2c736b[_0x49c188(0x209)]||_0x2c736b[_0x49c188(0x1fb)]||'Unknown\x20error'));const _0x45dd05=_0x2c736b[_0x49c188(0x229)],_0x4c8d51=_0x2c736b[_0x49c188(0x28d)],_0xd85ed=_0x2c736b['tracker_id'];return console['log'](_0x49c188(0x25e)),console['log'](_0x49c188(0x243),_0x45dd05),console['log'](_0x49c188(0x28a),_0x4c8d51),console[_0x49c188(0x207)](_0x49c188(0x214),_0xd85ed),console[_0x49c188(0x207)](_0x49c188(0x249),_0x2c736b[_0x49c188(0x223)]),console[_0x49c188(0x207)](_0x49c188(0x222)),{'gateway_payment_id':_0x4c8d51||_0xd85ed||_0x343f44,'payment_url':_0x45dd05||'','transaction_id':_0x4c8d51};}catch(_0x5991ac){console['error'](_0x49c188(0x288),_0x5991ac),console['log'](_0x49c188(0x296));throw _0x5991ac;}}async['healthCheck'](){const _0x411550=a58_0x59b617;try{const _0x2bae51=await fetch(this[_0x411550(0x20c)]+_0x411550(0x20d),{'method':_0x411550(0x290),'headers':{'Content-Type':'application/json','User-Agent':_0x411550(0x270)}});return _0x2bae51&&_0x2bae51['status']===0xc8?!![]:![];}catch(_0x298613){return console[_0x411550(0x238)](_0x411550(0x1f8),_0x298613),![];}}async[a58_0x59b617(0x227)](_0x150434){const _0x109c44=a58_0x59b617;console[_0x109c44(0x207)](_0x109c44(0x20e)),console[_0x109c44(0x207)]('âš ï¸\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status'),console[_0x109c44(0x207)](_0x109c44(0x204),_0x150434),console[_0x109c44(0x207)](_0x109c44(0x25d),typeof _0x150434),console[_0x109c44(0x207)](_0x109c44(0x244));_0x150434&&typeof _0x150434===_0x109c44(0x242)&&Object[_0x109c44(0x1f9)](_0x150434)[_0x109c44(0x224)](_0x5edfbf=>{const _0x2c23bd=_0x109c44;console[_0x2c23bd(0x207)]('\x20\x20'+_0x5edfbf+':\x20'+_0x150434[_0x5edfbf]+'\x20('+typeof _0x150434[_0x5edfbf]+')');});let _0x1442bf=_0x109c44(0x263);const _0x353cb4=_0x150434[_0x109c44(0x236)]||_0x150434['system_id']||_0x150434[_0x109c44(0x21f)]||'';return console[_0x109c44(0x207)](_0x109c44(0x245)+_0x353cb4),console[_0x109c44(0x207)](_0x109c44(0x280)+_0x1442bf),!_0x353cb4&&(console['error'](_0x109c44(0x22b)),console[_0x109c44(0x238)]('Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id')),{'paymentId':_0x353cb4,'status':_0x1442bf,'amount':_0x150434[_0x109c44(0x295)],'currency':_0x150434[_0x109c44(0x29b)]};}}exports['AmPayService']=AmPayService,exports[a58_0x59b617(0x26f)]=new AmPayService();