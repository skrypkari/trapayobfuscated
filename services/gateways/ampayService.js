'use strict';function a44_0xcef9(){const _0x495467=['Customer\x20Country\x20(3-letter):','⚠️\x20Unknown\x20country\x20code:\x20','AND','QAT','EST','IND','apiUrl','GHA','SYR','redirect_url','Webhook\x20data:','JOR','TZA','toUpperCase','BGR','📥\x20AmPay\x20raw\x20response:','21632wdZUkd','object','FRA','📝\x20Logging\x20AmPay\x20payment\x20creation\x20event...','client_transaction_id','IRN','NLD','Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id','CHL','MKD','CHE','AZE','Invalid\x20JSON\x20response\x20from\x20AmPay:\x20','KEN','❌\x20AmPay\x20health\x20check\x20failed:','DEU','FIN','PRY','MMR','__esModule','2397434wjlJbo','parse','🇦🇲\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing','Email:','MWI','AUT','stringify','BTN','EGY','https://traffer.uk/gateway/ampay/','GAM','SVN','Customer\x20IP:','PER','AmPay\x20payment\x20creation\x20failed:\x20','Available\x20fields:','USA','RUS','SWE','AUS','PRT','📊\x20AmPay\x20response\x20data:','Customer:','warn','Tracker\x20ID:','9MHCWLf','LUX','KWT','THA','FLK','defineProperty','convert2LetterTo3LetterCountryCode','ARM','UGA','GET','\x20-\x20','KGZ',',\x20using\x20RUS\x20as\x20fallback','amount','📝\x20Logging\x20AmPay\x20payment\x20creation\x20failure...','a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815','6742960UBGVCz','System\x20ID:','10512suFKfx','JPN','GRC','NGA','POL','COL','MLT','ECU','XKX','7508214dvroAl','UKR','6428282XyJgYP','MEX','CAN','SUR','SYC','LKA','🇦🇲\x20Creating\x20AmPay\x20payment\x20link...','LVA','REU','📤\x20AmPay\x20request\x20body:','MYS','message','783232jHsuHV','MDG','IRQ','PSE','Extracted\x20payment\x20ID:\x20','VEN','SAU','Order\x20ID:','MOZ','KHM','BLR','ZAF','LTU','MNG','ARG','currency','CZE','✅\x20AmPay\x20payment\x20link\x20created\x20successfully','ZWE','1106724OnCSdj','MUS','GUY','ISL','IRL','status','health.php','application/json','BEL','ampay.php','BIH','AmPayService','ZMB','Customer\x20Country\x20(2-letter):','VNM','GBR','SMR','log','URY','ITA','IDN','ARE','No\x20payment\x20ID\x20found\x20in\x20webhook\x20data','PRK','LAO','ISR','Forced\x20status\x20(webhook\x20disabled):\x20','BOL','API_PRIVATE_KEY','CHN','Webhook\x20data\x20type:','AFG','UZB','MCO','ampayService','SGP','TrapayAPI/1.0','DNK','text','healthCheck','CLIENT_MERCHANT_ID','NPL','CYP','AmPay\x20API\x20error:\x20HTTP\x20','HUN','error'];a44_0xcef9=function(){return _0x495467;};return a44_0xcef9();}const a44_0x2a80e3=a44_0x1b67;(function(_0x30d50f,_0x531df6){const _0x3eeec7=a44_0x1b67,_0x532a6f=_0x30d50f();while(!![]){try{const _0x427a5a=parseInt(_0x3eeec7(0xd0))/0x1+parseInt(_0x3eeec7(0x8e))/0x2+-parseInt(_0x3eeec7(0xa7))/0x3*(parseInt(_0x3eeec7(0xe3))/0x4)+-parseInt(_0x3eeec7(0xb7))/0x5+-parseInt(_0x3eeec7(0xc2))/0x6+-parseInt(_0x3eeec7(0xc4))/0x7+parseInt(_0x3eeec7(0x121))/0x8*(parseInt(_0x3eeec7(0xb9))/0x9);if(_0x427a5a===_0x531df6)break;else _0x532a6f['push'](_0x532a6f['shift']());}catch(_0x3c84bc){_0x532a6f['push'](_0x532a6f['shift']());}}}(a44_0xcef9,0xc1553));function a44_0x1b67(_0x28b364,_0x2390df){const _0xcef905=a44_0xcef9();return a44_0x1b67=function(_0x1b6712,_0x3b3bc7){_0x1b6712=_0x1b6712-0x82;let _0x5533e4=_0xcef905[_0x1b6712];return _0x5533e4;},a44_0x1b67(_0x28b364,_0x2390df);}Object[a44_0x2a80e3(0xac)](exports,a44_0x2a80e3(0x8d),{'value':!![]}),exports[a44_0x2a80e3(0x105)]=exports[a44_0x2a80e3(0xee)]=void 0x0;class AmPayService{constructor(){const _0x19da5d=a44_0x2a80e3;this['CLIENT_MERCHANT_ID']='TRAFFER',this['API_PUBLIC_KEY']='58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda',this[_0x19da5d(0xff)]=_0x19da5d(0xb6),this[_0x19da5d(0x117)]=_0x19da5d(0x97),console[_0x19da5d(0xf4)](_0x19da5d(0x90));}['convert2LetterTo3LetterCountryCode'](_0x58b0d8){const _0x433a56=a44_0x2a80e3,_0x23a88d={'AD':_0x433a56(0x113),'AL':'ALB','AT':_0x433a56(0x93),'BA':_0x433a56(0xed),'BE':_0x433a56(0xeb),'BG':_0x433a56(0x11f),'BY':_0x433a56(0xda),'CH':_0x433a56(0x84),'CY':_0x433a56(0x10d),'CZ':_0x433a56(0xe0),'DE':_0x433a56(0x89),'DK':_0x433a56(0x108),'EE':_0x433a56(0x115),'ES':'ESP','FI':_0x433a56(0x8a),'FR':_0x433a56(0x123),'GB':_0x433a56(0xf2),'GE':'GEO','GR':_0x433a56(0xbb),'HR':'HRV','HU':_0x433a56(0x10f),'IE':_0x433a56(0xe7),'IS':_0x433a56(0xe6),'IT':_0x433a56(0xf6),'LI':'LIE','LT':_0x433a56(0xdc),'LU':_0x433a56(0xa8),'LV':_0x433a56(0xcb),'MC':_0x433a56(0x104),'MD':'MDA','ME':'MNE','MK':_0x433a56(0x83),'MT':_0x433a56(0xbf),'NL':_0x433a56(0x127),'NO':'NOR','PL':_0x433a56(0xbd),'PT':_0x433a56(0xa2),'RO':'ROU','RS':'SRB','RU':'RUS','SE':_0x433a56(0xa0),'SI':_0x433a56(0x99),'SK':'SVK','SM':_0x433a56(0xf3),'UA':_0x433a56(0xc3),'VA':'VAT','XK':_0x433a56(0xc1),'AM':_0x433a56(0xae),'AZ':_0x433a56(0x85),'KZ':'KAZ','KG':_0x433a56(0xb2),'TJ':'TJK','TM':'TKM','UZ':_0x433a56(0x103),'US':_0x433a56(0x9e),'CA':_0x433a56(0xc6),'AU':_0x433a56(0xa1),'JP':_0x433a56(0xba),'CN':_0x433a56(0x100),'IN':_0x433a56(0x116),'BR':'BRA','MX':_0x433a56(0xc5),'AR':_0x433a56(0xde),'CL':_0x433a56(0x82),'PE':_0x433a56(0x9b),'CO':_0x433a56(0xbe),'VE':_0x433a56(0xd5),'EC':_0x433a56(0xc0),'BO':_0x433a56(0xfe),'PY':_0x433a56(0x8b),'UY':_0x433a56(0xf5),'SR':_0x433a56(0xc7),'GY':_0x433a56(0xe5),'FK':_0x433a56(0xab),'ZA':_0x433a56(0xdb),'EG':_0x433a56(0x96),'NG':_0x433a56(0xbc),'KE':_0x433a56(0x87),'GH':_0x433a56(0x118),'TZ':_0x433a56(0x11d),'UG':_0x433a56(0xaf),'ZW':_0x433a56(0xe2),'ZM':_0x433a56(0xef),'MW':_0x433a56(0x92),'MZ':_0x433a56(0xd8),'MG':_0x433a56(0xd1),'MU':_0x433a56(0xe4),'SC':_0x433a56(0xc8),'RE':_0x433a56(0xcc),'TR':'TUR','IR':_0x433a56(0x126),'IQ':_0x433a56(0xd2),'SA':_0x433a56(0xd6),'AE':_0x433a56(0xf8),'KW':_0x433a56(0xa9),'QA':_0x433a56(0x114),'BH':'BHR','OM':'OMN','YE':'YEM','JO':_0x433a56(0x11c),'LB':'LBN','SY':_0x433a56(0x119),'IL':_0x433a56(0xfc),'PS':_0x433a56(0xd3),'KR':'KOR','KP':_0x433a56(0xfa),'TH':_0x433a56(0xaa),'VN':_0x433a56(0xf1),'MY':_0x433a56(0xce),'SG':_0x433a56(0x106),'ID':_0x433a56(0xf7),'PH':'PHL','LA':_0x433a56(0xfb),'KH':_0x433a56(0xd9),'MM':_0x433a56(0x8c),'BD':'BGD','LK':_0x433a56(0xc9),'NP':_0x433a56(0x10c),'BT':_0x433a56(0x95),'MV':'MDV','AF':_0x433a56(0x102),'PK':'PAK','MN':_0x433a56(0xdd)},_0x175307=_0x23a88d[_0x58b0d8[_0x433a56(0x11e)]()];if(!_0x175307)return console[_0x433a56(0xa5)](_0x433a56(0x112)+_0x58b0d8+_0x433a56(0xb3)),_0x433a56(0x9f);return _0x175307;}async['createPaymentLink'](_0x538507){const _0x520d65=a44_0x2a80e3;try{const {orderId:_0x592559,amount:_0x430533,currency:_0x3a4349,firstName:_0x47eff8,lastName:_0x4bc364,email:_0x34ccc9,customerIp:_0x560e5c,customerCountry:_0x1d7066,successUrl:_0x1eeead,failureUrl:_0x1a260b}=_0x538507;console[_0x520d65(0xf4)](_0x520d65(0xca)),console[_0x520d65(0xf4)](_0x520d65(0xd7),_0x592559),console['log']('Amount:',_0x430533,_0x3a4349),console[_0x520d65(0xf4)](_0x520d65(0xa4),_0x47eff8+'\x20'+_0x4bc364),console['log'](_0x520d65(0x91),_0x34ccc9),console[_0x520d65(0xf4)](_0x520d65(0x9a),_0x560e5c),console[_0x520d65(0xf4)](_0x520d65(0xf0),_0x1d7066);const _0x4d7a4b=this[_0x520d65(0xad)](_0x1d7066);console[_0x520d65(0xf4)](_0x520d65(0x111),_0x4d7a4b);const _0x180a72={'sub_method':_0x520d65(0x98),'currency':_0x3a4349[_0x520d65(0x11e)](),'amount':_0x430533,'callback_url':'https://traffer.uk/gateway/ampay/webhook.php','client_merchant_id':this[_0x520d65(0x10b)],'client_transaction_id':_0x592559,'transaction_description':_0x592559,'customer':{'ip':_0x560e5c,'email':_0x34ccc9,'full_name':_0x47eff8+'\x20'+_0x4bc364,'country':_0x4d7a4b},'success_redirect_url':_0x1eeead,'error_redirect_url':_0x1a260b};console[_0x520d65(0xf4)](_0x520d65(0xcd),JSON[_0x520d65(0x94)](_0x180a72,null,0x2));const _0x147796=await fetch(this[_0x520d65(0x117)]+_0x520d65(0xec),{'method':'POST','headers':{'Content-Type':_0x520d65(0xea),'User-Agent':_0x520d65(0x107)},'body':JSON[_0x520d65(0x94)](_0x180a72)}),_0x3d6412=await _0x147796[_0x520d65(0x109)]();console[_0x520d65(0xf4)](_0x520d65(0x120),_0x3d6412);if(!_0x147796['ok'])throw new Error(_0x520d65(0x10e)+_0x147796[_0x520d65(0xe8)]+_0x520d65(0xb1)+_0x3d6412);let _0x1d3e98;try{_0x1d3e98=JSON[_0x520d65(0x8f)](_0x3d6412);}catch(_0x42cfa3){throw new Error(_0x520d65(0x86)+_0x3d6412);}console[_0x520d65(0xf4)](_0x520d65(0xa3),JSON[_0x520d65(0x94)](_0x1d3e98,null,0x2));if(!_0x1d3e98[_0x520d65(0x11a)])throw new Error(_0x520d65(0x9c)+(_0x1d3e98['error_message']||_0x1d3e98[_0x520d65(0xcf)]||'Unknown\x20error'));const _0x101847=_0x1d3e98[_0x520d65(0x11a)],_0x171412=_0x1d3e98['system_id'],_0x4c18c1=_0x1d3e98['tracker_id'];return console['log'](_0x520d65(0xe1)),console[_0x520d65(0xf4)]('Payment\x20URL:',_0x101847),console[_0x520d65(0xf4)](_0x520d65(0xb8),_0x171412),console[_0x520d65(0xf4)](_0x520d65(0xa6),_0x4c18c1),console[_0x520d65(0xf4)]('Status:',_0x1d3e98[_0x520d65(0xe8)]),console['log'](_0x520d65(0x124)),{'gateway_payment_id':_0x171412||_0x4c18c1||_0x592559,'payment_url':_0x101847||'','transaction_id':_0x171412};}catch(_0xa8fde4){console[_0x520d65(0x110)]('❌\x20AmPay\x20payment\x20creation\x20failed:',_0xa8fde4),console[_0x520d65(0xf4)](_0x520d65(0xb5));throw _0xa8fde4;}}async[a44_0x2a80e3(0x10a)](){const _0x48bf75=a44_0x2a80e3;try{const _0xbc9b25=await fetch(this[_0x48bf75(0x117)]+_0x48bf75(0xe9),{'method':_0x48bf75(0xb0),'headers':{'Content-Type':'application/json','User-Agent':'TrapayAPI/1.0'}});return _0xbc9b25&&_0xbc9b25[_0x48bf75(0xe8)]===0xc8?!![]:![];}catch(_0x5e4735){return console[_0x48bf75(0x110)](_0x48bf75(0x88),_0x5e4735),![];}}async['processWebhook'](_0x46b7d0){const _0xcb063f=a44_0x2a80e3;console[_0xcb063f(0xf4)]('===\x20Processing\x20AmPay\x20webhook\x20==='),console[_0xcb063f(0xf4)]('⚠️\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status'),console[_0xcb063f(0xf4)](_0xcb063f(0x11b),_0x46b7d0),console[_0xcb063f(0xf4)](_0xcb063f(0x101),typeof _0x46b7d0),console['log'](_0xcb063f(0x9d));_0x46b7d0&&typeof _0x46b7d0===_0xcb063f(0x122)&&Object['keys'](_0x46b7d0)['forEach'](_0x230acd=>{console['log']('\x20\x20'+_0x230acd+':\x20'+_0x46b7d0[_0x230acd]+'\x20('+typeof _0x46b7d0[_0x230acd]+')');});let _0x160177='PENDING';const _0x35b5b9=_0x46b7d0[_0xcb063f(0x125)]||_0x46b7d0['system_id']||_0x46b7d0['tracker_id']||'';return console[_0xcb063f(0xf4)](_0xcb063f(0xd4)+_0x35b5b9),console[_0xcb063f(0xf4)](_0xcb063f(0xfd)+_0x160177),!_0x35b5b9&&(console[_0xcb063f(0x110)](_0xcb063f(0xf9)),console[_0xcb063f(0x110)](_0xcb063f(0x128))),{'paymentId':_0x35b5b9,'status':_0x160177,'amount':_0x46b7d0[_0xcb063f(0xb4)],'currency':_0x46b7d0[_0xcb063f(0xdf)]};}}exports[a44_0x2a80e3(0xee)]=AmPayService,exports[a44_0x2a80e3(0x105)]=new AmPayService();