'use strict';const a54_0x90199=a54_0x573b;(function(_0x3e3682,_0x52b73f){const _0x559054=a54_0x573b,_0x1fbdf5=_0x3e3682();while(!![]){try{const _0x535b2b=-parseInt(_0x559054(0x1ac))/0x1*(parseInt(_0x559054(0x1d1))/0x2)+-parseInt(_0x559054(0x20a))/0x3+parseInt(_0x559054(0x1dd))/0x4*(-parseInt(_0x559054(0x202))/0x5)+parseInt(_0x559054(0x1cb))/0x6*(-parseInt(_0x559054(0x1d8))/0x7)+-parseInt(_0x559054(0x22a))/0x8+parseInt(_0x559054(0x1ab))/0x9*(parseInt(_0x559054(0x1ca))/0xa)+parseInt(_0x559054(0x1dc))/0xb*(parseInt(_0x559054(0x24c))/0xc);if(_0x535b2b===_0x52b73f)break;else _0x1fbdf5['push'](_0x1fbdf5['shift']());}catch(_0x1b5f66){_0x1fbdf5['push'](_0x1fbdf5['shift']());}}}(a54_0x524e,0xbf4a4));function a54_0x573b(_0x54f91c,_0x2a3323){_0x54f91c=_0x54f91c-0x1ab;const _0x524e07=a54_0x524e();let _0x573b49=_0x524e07[_0x54f91c];return _0x573b49;}Object[a54_0x90199(0x1df)](exports,a54_0x90199(0x209),{'value':!![]}),exports[a54_0x90199(0x1ce)]=exports['AmPayService']=void 0x0;function a54_0x524e(){const _0x225e3b=['VEN','IND','ARG','ALB','application/json','a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815','message','POST','stringify','AmPayService','URY','Customer\x20Country\x20(3-letter):','MLT','205610veyvJH','PRY','system_id','ZMB','ðŸ“¥\x20AmPay\x20raw\x20response:','EST','SMR','__esModule','3674376WkmPYl','SWE','JOR','ðŸ‡¦ðŸ‡²\x20Creating\x20AmPay\x20payment\x20link...','JPN','LUX','CLIENT_MERCHANT_ID','HRV','ITA','TrapayAPI/1.0','Available\x20fields:','TRAFFER','KHM','GUY','status','XKX','currency','ZAF','SAU','USA','BIH','ampay.php','KOR','CHL','https://traffer.uk/gateway/ampay/webhook.php','UGA','TJK','IRN','https://traffer.uk/gateway/ampay/','AUS','EGY','System\x20ID:','5145424pkSBhe','VNM','PSE','convert2LetterTo3LetterCountryCode','IRQ','PER','\x20-\x20','COL','MKD','error','58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda','ARM','AZE','toUpperCase','MMR','SYR','ARE','OMN','MCO','Amount:','âš ï¸\x20Unknown\x20country\x20code:\x20','MEX','tracker_id','ESP','apiUrl','log','FIN','MWI','REU','healthCheck','amount','NPL','THA','IDN','12RUHsVz','LVA',',\x20using\x20RUS\x20as\x20fallback','GEO','AFG','518778nWrvTC','1519257MLEYaG','ðŸ“\x20Logging\x20AmPay\x20payment\x20creation\x20failure...','object','FRA','SUR','BHR','PAK','MDA','MOZ','BEL','LIE','CAN','===\x20Processing\x20AmPay\x20webhook\x20===','Webhook\x20data\x20type:','ðŸ“¤\x20AmPay\x20request\x20body:','GHA','PRK','LBN','TZA','ZWE','UKR','health.php','VAT','Extracted\x20payment\x20ID:\x20','SVN','No\x20payment\x20ID\x20found\x20in\x20webhook\x20data','POL','LTU','text','LKA','80FkGkfj','9043956oSMubq','IRL','MDG','ampayService','DNK','Forced\x20status\x20(webhook\x20disabled):\x20','2OCNJXc','ISR','KAZ','Tracker\x20ID:','KWT','CHE','FLK','7jsgcIj','BOL','ðŸ‡¦ðŸ‡²\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing','PRT','70504269FuLGlo','116MVRfTj','AUT','defineProperty','MNE','CZE','ROU','NOR','QAT','Status:','AND','redirect_url','BRA','PHL','SGP','CYP','client_transaction_id','API_PUBLIC_KEY','UZB','Order\x20ID:','âŒ\x20AmPay\x20payment\x20creation\x20failed:','âŒ\x20AmPay\x20health\x20check\x20failed:','KEN','BGR','AmPay\x20payment\x20creation\x20failed:\x20'];a54_0x524e=function(){return _0x225e3b;};return a54_0x524e();}class AmPayService{constructor(){const _0x4c221f=a54_0x90199;this[_0x4c221f(0x210)]=_0x4c221f(0x215),this[_0x4c221f(0x1ed)]=_0x4c221f(0x234),this['API_PRIVATE_KEY']=_0x4c221f(0x1fa),this[_0x4c221f(0x242)]=_0x4c221f(0x226),console[_0x4c221f(0x243)](_0x4c221f(0x1da));}['convert2LetterTo3LetterCountryCode'](_0x2beb4b){const _0x1398c9=a54_0x90199,_0x434c69={'AD':_0x1398c9(0x1e6),'AL':_0x1398c9(0x1f8),'AT':_0x1398c9(0x1de),'BA':_0x1398c9(0x21e),'BE':_0x1398c9(0x1b5),'BG':_0x1398c9(0x1f3),'BY':'BLR','CH':_0x1398c9(0x1d6),'CY':_0x1398c9(0x1eb),'CZ':_0x1398c9(0x1e1),'DE':'DEU','DK':_0x1398c9(0x1cf),'EE':_0x1398c9(0x207),'ES':_0x1398c9(0x241),'FI':_0x1398c9(0x244),'FR':_0x1398c9(0x1af),'GB':'GBR','GE':_0x1398c9(0x24f),'GR':'GRC','HR':_0x1398c9(0x211),'HU':'HUN','IE':_0x1398c9(0x1cc),'IS':'ISL','IT':_0x1398c9(0x212),'LI':_0x1398c9(0x1b6),'LT':_0x1398c9(0x1c7),'LU':_0x1398c9(0x20f),'LV':_0x1398c9(0x24d),'MC':_0x1398c9(0x23c),'MD':_0x1398c9(0x1b3),'ME':_0x1398c9(0x1e0),'MK':_0x1398c9(0x232),'MT':_0x1398c9(0x201),'NL':'NLD','NO':_0x1398c9(0x1e3),'PL':_0x1398c9(0x1c6),'PT':_0x1398c9(0x1db),'RO':_0x1398c9(0x1e2),'RS':'SRB','RU':'RUS','SE':_0x1398c9(0x20b),'SI':_0x1398c9(0x1c4),'SK':'SVK','SM':_0x1398c9(0x208),'UA':_0x1398c9(0x1c0),'VA':_0x1398c9(0x1c2),'XK':_0x1398c9(0x219),'AM':_0x1398c9(0x235),'AZ':_0x1398c9(0x236),'KZ':_0x1398c9(0x1d3),'KG':'KGZ','TJ':_0x1398c9(0x224),'TM':'TKM','UZ':_0x1398c9(0x1ee),'US':_0x1398c9(0x21d),'CA':_0x1398c9(0x1b7),'AU':_0x1398c9(0x227),'JP':_0x1398c9(0x20e),'CN':'CHN','IN':_0x1398c9(0x1f6),'BR':_0x1398c9(0x1e8),'MX':_0x1398c9(0x23f),'AR':_0x1398c9(0x1f7),'CL':_0x1398c9(0x221),'PE':_0x1398c9(0x22f),'CO':_0x1398c9(0x231),'VE':_0x1398c9(0x1f5),'EC':'ECU','BO':_0x1398c9(0x1d9),'PY':_0x1398c9(0x203),'UY':_0x1398c9(0x1ff),'SR':_0x1398c9(0x1b0),'GY':_0x1398c9(0x217),'FK':_0x1398c9(0x1d7),'ZA':_0x1398c9(0x21b),'EG':_0x1398c9(0x228),'NG':'NGA','KE':_0x1398c9(0x1f2),'GH':_0x1398c9(0x1bb),'TZ':_0x1398c9(0x1be),'UG':_0x1398c9(0x223),'ZW':_0x1398c9(0x1bf),'ZM':_0x1398c9(0x205),'MW':_0x1398c9(0x245),'MZ':_0x1398c9(0x1b4),'MG':_0x1398c9(0x1cd),'MU':'MUS','SC':'SYC','RE':_0x1398c9(0x246),'TR':'TUR','IR':_0x1398c9(0x225),'IQ':_0x1398c9(0x22e),'SA':_0x1398c9(0x21c),'AE':_0x1398c9(0x23a),'KW':_0x1398c9(0x1d5),'QA':_0x1398c9(0x1e4),'BH':_0x1398c9(0x1b1),'OM':_0x1398c9(0x23b),'YE':'YEM','JO':_0x1398c9(0x20c),'LB':_0x1398c9(0x1bd),'SY':_0x1398c9(0x239),'IL':_0x1398c9(0x1d2),'PS':_0x1398c9(0x22c),'KR':_0x1398c9(0x220),'KP':_0x1398c9(0x1bc),'TH':_0x1398c9(0x24a),'VN':_0x1398c9(0x22b),'MY':'MYS','SG':_0x1398c9(0x1ea),'ID':_0x1398c9(0x24b),'PH':_0x1398c9(0x1e9),'LA':'LAO','KH':_0x1398c9(0x216),'MM':_0x1398c9(0x238),'BD':'BGD','LK':_0x1398c9(0x1c9),'NP':_0x1398c9(0x249),'BT':'BTN','MV':'MDV','AF':_0x1398c9(0x250),'PK':_0x1398c9(0x1b2),'MN':'MNG'},_0x25873a=_0x434c69[_0x2beb4b[_0x1398c9(0x237)]()];if(!_0x25873a)return console['warn'](_0x1398c9(0x23e)+_0x2beb4b+_0x1398c9(0x24e)),'RUS';return _0x25873a;}async['createPaymentLink'](_0x12dbc8){const _0x15ce74=a54_0x90199;try{const {orderId:_0x2bf547,amount:_0x542383,currency:_0x2716d9,firstName:_0xbb22ef,lastName:_0x383ebc,email:_0x51fc34,customerIp:_0x33c986,customerCountry:_0x41a33e,successUrl:_0xd636f9,failureUrl:_0x332a2b}=_0x12dbc8;console[_0x15ce74(0x243)](_0x15ce74(0x20d)),console[_0x15ce74(0x243)](_0x15ce74(0x1ef),_0x2bf547),console[_0x15ce74(0x243)](_0x15ce74(0x23d),_0x542383,_0x2716d9),console[_0x15ce74(0x243)]('Customer:',_0xbb22ef+'\x20'+_0x383ebc),console[_0x15ce74(0x243)]('Email:',_0x51fc34),console[_0x15ce74(0x243)]('Customer\x20IP:',_0x33c986),console[_0x15ce74(0x243)]('Customer\x20Country\x20(2-letter):',_0x41a33e);const _0x2b69d5=this[_0x15ce74(0x22d)](_0x41a33e);console[_0x15ce74(0x243)](_0x15ce74(0x200),_0x2b69d5);const _0x3f6470={'sub_method':'GAM','currency':_0x2716d9[_0x15ce74(0x237)](),'amount':_0x542383,'callback_url':_0x15ce74(0x222),'client_merchant_id':this[_0x15ce74(0x210)],'client_transaction_id':_0x2bf547,'transaction_description':_0x2bf547,'customer':{'ip':_0x33c986,'email':_0x51fc34,'full_name':_0xbb22ef+'\x20'+_0x383ebc,'country':_0x2b69d5},'success_redirect_url':_0xd636f9,'error_redirect_url':_0x332a2b};console[_0x15ce74(0x243)](_0x15ce74(0x1ba),JSON[_0x15ce74(0x1fd)](_0x3f6470,null,0x2));const _0xcf9ac5=await fetch(this[_0x15ce74(0x242)]+_0x15ce74(0x21f),{'method':_0x15ce74(0x1fc),'headers':{'Content-Type':_0x15ce74(0x1f9),'User-Agent':_0x15ce74(0x213)},'body':JSON[_0x15ce74(0x1fd)](_0x3f6470)}),_0x67d03=await _0xcf9ac5[_0x15ce74(0x1c8)]();console[_0x15ce74(0x243)](_0x15ce74(0x206),_0x67d03);if(!_0xcf9ac5['ok'])throw new Error('AmPay\x20API\x20error:\x20HTTP\x20'+_0xcf9ac5['status']+_0x15ce74(0x230)+_0x67d03);let _0x4ce654;try{_0x4ce654=JSON['parse'](_0x67d03);}catch(_0x2875fa){throw new Error('Invalid\x20JSON\x20response\x20from\x20AmPay:\x20'+_0x67d03);}console[_0x15ce74(0x243)]('ðŸ“Š\x20AmPay\x20response\x20data:',JSON[_0x15ce74(0x1fd)](_0x4ce654,null,0x2));if(!_0x4ce654[_0x15ce74(0x1e7)])throw new Error(_0x15ce74(0x1f4)+(_0x4ce654['error_message']||_0x4ce654[_0x15ce74(0x1fb)]||'Unknown\x20error'));const _0x5b2ad7=_0x4ce654[_0x15ce74(0x1e7)],_0x41ce89=_0x4ce654[_0x15ce74(0x204)],_0x1a40f3=_0x4ce654[_0x15ce74(0x240)];return console[_0x15ce74(0x243)]('âœ…\x20AmPay\x20payment\x20link\x20created\x20successfully'),console[_0x15ce74(0x243)]('Payment\x20URL:',_0x5b2ad7),console[_0x15ce74(0x243)](_0x15ce74(0x229),_0x41ce89),console[_0x15ce74(0x243)](_0x15ce74(0x1d4),_0x1a40f3),console[_0x15ce74(0x243)](_0x15ce74(0x1e5),_0x4ce654[_0x15ce74(0x218)]),console[_0x15ce74(0x243)]('ðŸ“\x20Logging\x20AmPay\x20payment\x20creation\x20event...'),{'gateway_payment_id':_0x41ce89||_0x1a40f3||_0x2bf547,'payment_url':_0x5b2ad7||'','transaction_id':_0x41ce89};}catch(_0x539672){console[_0x15ce74(0x233)](_0x15ce74(0x1f0),_0x539672),console[_0x15ce74(0x243)](_0x15ce74(0x1ad));throw _0x539672;}}async[a54_0x90199(0x247)](){const _0x3fcd31=a54_0x90199;try{const _0x376d00=await fetch(this[_0x3fcd31(0x242)]+_0x3fcd31(0x1c1),{'method':'GET','headers':{'Content-Type':_0x3fcd31(0x1f9),'User-Agent':'TrapayAPI/1.0'}});return _0x376d00&&_0x376d00['status']===0xc8?!![]:![];}catch(_0x4c39ec){return console[_0x3fcd31(0x233)](_0x3fcd31(0x1f1),_0x4c39ec),![];}}async['processWebhook'](_0x4e52e0){const _0x270f72=a54_0x90199;console[_0x270f72(0x243)](_0x270f72(0x1b8)),console[_0x270f72(0x243)]('âš ï¸\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status'),console[_0x270f72(0x243)]('Webhook\x20data:',_0x4e52e0),console[_0x270f72(0x243)](_0x270f72(0x1b9),typeof _0x4e52e0),console[_0x270f72(0x243)](_0x270f72(0x214));_0x4e52e0&&typeof _0x4e52e0===_0x270f72(0x1ae)&&Object['keys'](_0x4e52e0)['forEach'](_0x29f0e4=>{const _0x70791f=_0x270f72;console[_0x70791f(0x243)]('\x20\x20'+_0x29f0e4+':\x20'+_0x4e52e0[_0x29f0e4]+'\x20('+typeof _0x4e52e0[_0x29f0e4]+')');});let _0x8497ae='PENDING';const _0x5c2c91=_0x4e52e0[_0x270f72(0x1ec)]||_0x4e52e0['system_id']||_0x4e52e0[_0x270f72(0x240)]||'';return console['log'](_0x270f72(0x1c3)+_0x5c2c91),console[_0x270f72(0x243)](_0x270f72(0x1d0)+_0x8497ae),!_0x5c2c91&&(console[_0x270f72(0x233)](_0x270f72(0x1c5)),console['error']('Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id')),{'paymentId':_0x5c2c91,'status':_0x8497ae,'amount':_0x4e52e0[_0x270f72(0x248)],'currency':_0x4e52e0[_0x270f72(0x21a)]};}}exports[a54_0x90199(0x1fe)]=AmPayService,exports[a54_0x90199(0x1ce)]=new AmPayService();