'use strict';const a46_0x1ff6f6=a46_0x156c;(function(_0x70ed76,_0xee276f){const _0x32b951=a46_0x156c,_0x3e0ce1=_0x70ed76();while(!![]){try{const _0x2d8885=-parseInt(_0x32b951(0x1e9))/0x1+parseInt(_0x32b951(0x18a))/0x2+-parseInt(_0x32b951(0x1ec))/0x3*(-parseInt(_0x32b951(0x172))/0x4)+parseInt(_0x32b951(0x1c8))/0x5*(parseInt(_0x32b951(0x19f))/0x6)+-parseInt(_0x32b951(0x1de))/0x7*(parseInt(_0x32b951(0x1d1))/0x8)+parseInt(_0x32b951(0x170))/0x9*(parseInt(_0x32b951(0x18d))/0xa)+parseInt(_0x32b951(0x1ca))/0xb*(-parseInt(_0x32b951(0x179))/0xc);if(_0x2d8885===_0xee276f)break;else _0x3e0ce1['push'](_0x3e0ce1['shift']());}catch(_0x32bd4b){_0x3e0ce1['push'](_0x3e0ce1['shift']());}}}(a46_0xa2ce,0x44ebd));function a46_0x156c(_0x1db2f5,_0x3416c9){const _0xa2ce5f=a46_0xa2ce();return a46_0x156c=function(_0x156c95,_0x7892ff){_0x156c95=_0x156c95-0x16a;let _0x2cb0f3=_0xa2ce5f[_0x156c95];return _0x2cb0f3;},a46_0x156c(_0x1db2f5,_0x3416c9);}Object['defineProperty'](exports,a46_0x1ff6f6(0x1a8),{'value':!![]}),exports[a46_0x1ff6f6(0x17e)]=exports['AmPayService']=void 0x0;class AmPayService{constructor(){const _0x80e231=a46_0x1ff6f6;this[_0x80e231(0x1e0)]=_0x80e231(0x1fd),this[_0x80e231(0x1cc)]=_0x80e231(0x1b3),this[_0x80e231(0x1bd)]='a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815',this[_0x80e231(0x1a3)]=_0x80e231(0x1c4),console[_0x80e231(0x1bf)]('üá¶üá≤\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing');}[a46_0x1ff6f6(0x1cf)](_0x35b255){const _0x319c0c=a46_0x1ff6f6,_0x1dbfa5={'AD':_0x319c0c(0x1c0),'AL':_0x319c0c(0x17d),'AT':_0x319c0c(0x1c6),'BA':'BIH','BE':_0x319c0c(0x1f2),'BG':_0x319c0c(0x1ab),'BY':'BLR','CH':'CHE','CY':'CYP','CZ':_0x319c0c(0x1e5),'DE':_0x319c0c(0x19e),'DK':_0x319c0c(0x1ff),'EE':_0x319c0c(0x1d5),'ES':_0x319c0c(0x17a),'FI':'FIN','FR':_0x319c0c(0x181),'GB':_0x319c0c(0x189),'GE':'GEO','GR':_0x319c0c(0x194),'HR':'HRV','HU':_0x319c0c(0x1db),'IE':'IRL','IS':_0x319c0c(0x175),'IT':_0x319c0c(0x1a1),'LI':_0x319c0c(0x1b8),'LT':'LTU','LU':'LUX','LV':'LVA','MC':_0x319c0c(0x1a6),'MD':'MDA','ME':_0x319c0c(0x1a0),'MK':'MKD','MT':'MLT','NL':_0x319c0c(0x1e3),'NO':'NOR','PL':'POL','PT':_0x319c0c(0x1d2),'RO':_0x319c0c(0x184),'RS':_0x319c0c(0x1f1),'RU':_0x319c0c(0x190),'SE':_0x319c0c(0x196),'SI':'SVN','SK':'SVK','SM':_0x319c0c(0x1e8),'UA':_0x319c0c(0x1be),'VA':_0x319c0c(0x192),'XK':_0x319c0c(0x173),'AM':'ARM','AZ':'AZE','KZ':_0x319c0c(0x1b5),'KG':'KGZ','TJ':_0x319c0c(0x17b),'TM':_0x319c0c(0x1d3),'UZ':_0x319c0c(0x1b0),'US':'USA','CA':_0x319c0c(0x1a2),'AU':_0x319c0c(0x1df),'JP':_0x319c0c(0x1ee),'CN':_0x319c0c(0x1d4),'IN':_0x319c0c(0x1c9),'BR':_0x319c0c(0x199),'MX':'MEX','AR':_0x319c0c(0x1a7),'CL':_0x319c0c(0x1a5),'PE':_0x319c0c(0x186),'CO':_0x319c0c(0x1f0),'VE':_0x319c0c(0x16a),'EC':_0x319c0c(0x171),'BO':_0x319c0c(0x1ed),'PY':'PRY','UY':_0x319c0c(0x1f3),'SR':_0x319c0c(0x17c),'GY':'GUY','FK':'FLK','ZA':_0x319c0c(0x182),'EG':_0x319c0c(0x1c1),'NG':'NGA','KE':_0x319c0c(0x1e7),'GH':_0x319c0c(0x1ba),'TZ':_0x319c0c(0x1e6),'UG':'UGA','ZW':'ZWE','ZM':'ZMB','MW':'MWI','MZ':_0x319c0c(0x1f4),'MG':_0x319c0c(0x1f8),'MU':_0x319c0c(0x185),'SC':'SYC','RE':_0x319c0c(0x176),'TR':_0x319c0c(0x18f),'IR':_0x319c0c(0x1fe),'IQ':_0x319c0c(0x16e),'SA':'SAU','AE':_0x319c0c(0x188),'KW':_0x319c0c(0x1f6),'QA':_0x319c0c(0x1bb),'BH':'BHR','OM':_0x319c0c(0x1d6),'YE':_0x319c0c(0x193),'JO':_0x319c0c(0x17f),'LB':_0x319c0c(0x16f),'SY':'SYR','IL':_0x319c0c(0x1b6),'PS':'PSE','KR':'KOR','KP':_0x319c0c(0x1ae),'TH':'THA','VN':'VNM','MY':_0x319c0c(0x1ad),'SG':_0x319c0c(0x187),'ID':'IDN','PH':_0x319c0c(0x1ef),'LA':'LAO','KH':_0x319c0c(0x1ac),'MM':_0x319c0c(0x1dc),'BD':_0x319c0c(0x1fb),'LK':_0x319c0c(0x18b),'NP':_0x319c0c(0x1dd),'BT':_0x319c0c(0x195),'MV':_0x319c0c(0x1d9),'AF':_0x319c0c(0x1ce),'PK':_0x319c0c(0x1fa),'MN':_0x319c0c(0x18e)},_0x5c460e=_0x1dbfa5[_0x35b255[_0x319c0c(0x1e1)]()];if(!_0x5c460e)return console[_0x319c0c(0x1d0)](_0x319c0c(0x1c2)+_0x35b255+_0x319c0c(0x1cb)),'RUS';return _0x5c460e;}async[a46_0x1ff6f6(0x1a4)](_0x1a8ed6){const _0x55b136=a46_0x1ff6f6;try{const {orderId:_0x2125ea,amount:_0x12b1c8,currency:_0x4eec06,firstName:_0x2acd83,lastName:_0x311079,email:_0x37ea94,customerIp:_0x19f7fa,customerCountry:_0x3ea2d1,successUrl:_0x45b5f6,failureUrl:_0x2b17d2}=_0x1a8ed6;console[_0x55b136(0x1bf)]('üá¶üá≤\x20Creating\x20AmPay\x20payment\x20link...'),console[_0x55b136(0x1bf)](_0x55b136(0x19d),_0x2125ea),console[_0x55b136(0x1bf)](_0x55b136(0x16b),_0x12b1c8,_0x4eec06),console[_0x55b136(0x1bf)](_0x55b136(0x19a),_0x2acd83+'\x20'+_0x311079),console[_0x55b136(0x1bf)](_0x55b136(0x19b),_0x37ea94),console[_0x55b136(0x1bf)](_0x55b136(0x1b7),_0x19f7fa),console['log']('Customer\x20Country\x20(2-letter):',_0x3ea2d1);const _0x45c53f=this[_0x55b136(0x1cf)](_0x3ea2d1);console[_0x55b136(0x1bf)](_0x55b136(0x180),_0x45c53f);const _0x12b962={'sub_method':_0x55b136(0x1b1),'currency':_0x4eec06[_0x55b136(0x1e1)](),'amount':_0x12b1c8,'callback_url':_0x55b136(0x1a9),'client_merchant_id':this['CLIENT_MERCHANT_ID'],'client_transaction_id':_0x2125ea,'transaction_description':_0x2125ea,'customer':{'ip':_0x19f7fa,'email':_0x37ea94,'full_name':_0x2acd83+'\x20'+_0x311079,'country':_0x45c53f},'success_redirect_url':_0x45b5f6,'error_redirect_url':_0x2b17d2};console[_0x55b136(0x1bf)](_0x55b136(0x1eb),JSON[_0x55b136(0x1d8)](_0x12b962,null,0x2));const _0x4b9c2b=await fetch(this[_0x55b136(0x1a3)]+_0x55b136(0x1c3),{'method':'POST','headers':{'Content-Type':_0x55b136(0x1d7),'User-Agent':_0x55b136(0x18c)},'body':JSON[_0x55b136(0x1d8)](_0x12b962)}),_0x4cc204=await _0x4b9c2b[_0x55b136(0x1bc)]();console[_0x55b136(0x1bf)](_0x55b136(0x1ea),_0x4cc204);if(!_0x4b9c2b['ok'])throw new Error(_0x55b136(0x1b4)+_0x4b9c2b['status']+'\x20-\x20'+_0x4cc204);let _0x554931;try{_0x554931=JSON['parse'](_0x4cc204);}catch(_0x5eee48){throw new Error('Invalid\x20JSON\x20response\x20from\x20AmPay:\x20'+_0x4cc204);}console['log']('üìä\x20AmPay\x20response\x20data:',JSON[_0x55b136(0x1d8)](_0x554931,null,0x2));if(!_0x554931[_0x55b136(0x1b2)])throw new Error('AmPay\x20payment\x20creation\x20failed:\x20'+(_0x554931[_0x55b136(0x191)]||_0x554931[_0x55b136(0x16c)]||_0x55b136(0x1c7)));const _0x1cfb6d=_0x554931[_0x55b136(0x1b2)],_0x51db33=_0x554931[_0x55b136(0x1da)],_0x210c75=_0x554931[_0x55b136(0x174)];return console[_0x55b136(0x1bf)]('‚úÖ\x20AmPay\x20payment\x20link\x20created\x20successfully'),console[_0x55b136(0x1bf)]('Payment\x20URL:',_0x1cfb6d),console[_0x55b136(0x1bf)]('System\x20ID:',_0x51db33),console['log'](_0x55b136(0x177),_0x210c75),console[_0x55b136(0x1bf)](_0x55b136(0x1c5),_0x554931[_0x55b136(0x1e4)]),console[_0x55b136(0x1bf)](_0x55b136(0x1cd)),{'gateway_payment_id':_0x51db33||_0x210c75||_0x2125ea,'payment_url':_0x1cfb6d||'','transaction_id':_0x51db33};}catch(_0x3a6cd6){console['error']('‚ùå\x20AmPay\x20payment\x20creation\x20failed:',_0x3a6cd6),console[_0x55b136(0x1bf)](_0x55b136(0x197));throw _0x3a6cd6;}}async[a46_0x1ff6f6(0x183)](){const _0x5616af=a46_0x1ff6f6;try{const _0x411485=await fetch(this['apiUrl']+_0x5616af(0x198),{'method':'GET','headers':{'Content-Type':'application/json','User-Agent':_0x5616af(0x18c)}});return _0x411485&&_0x411485[_0x5616af(0x1e4)]===0xc8?!![]:![];}catch(_0x51e907){return console['error'](_0x5616af(0x19c),_0x51e907),![];}}async[a46_0x1ff6f6(0x16d)](_0x1e6793){const _0x30b049=a46_0x1ff6f6;console[_0x30b049(0x1bf)](_0x30b049(0x1e2)),console['log'](_0x30b049(0x1f9)),console[_0x30b049(0x1bf)]('Webhook\x20data:',_0x1e6793),console['log']('Webhook\x20data\x20type:',typeof _0x1e6793),console['log']('Available\x20fields:');_0x1e6793&&typeof _0x1e6793===_0x30b049(0x1b9)&&Object['keys'](_0x1e6793)[_0x30b049(0x1f5)](_0x4a2997=>{const _0xd0208a=_0x30b049;console[_0xd0208a(0x1bf)]('\x20\x20'+_0x4a2997+':\x20'+_0x1e6793[_0x4a2997]+'\x20('+typeof _0x1e6793[_0x4a2997]+')');});let _0x59400d=_0x30b049(0x1f7);const _0x361c62=_0x1e6793[_0x30b049(0x1aa)]||_0x1e6793[_0x30b049(0x1da)]||_0x1e6793[_0x30b049(0x174)]||'';return console[_0x30b049(0x1bf)]('Extracted\x20payment\x20ID:\x20'+_0x361c62),console[_0x30b049(0x1bf)](_0x30b049(0x1fc)+_0x59400d),!_0x361c62&&(console[_0x30b049(0x1af)]('No\x20payment\x20ID\x20found\x20in\x20webhook\x20data'),console[_0x30b049(0x1af)](_0x30b049(0x178))),{'paymentId':_0x361c62,'status':_0x59400d,'amount':_0x1e6793['amount'],'currency':_0x1e6793['currency']};}}exports['AmPayService']=AmPayService,exports['ampayService']=new AmPayService();function a46_0xa2ce(){const _0x1ccd3b=['LBN','9171Muftew','ECU','476716QYrwEB','XKX','tracker_id','ISL','REU','Tracker\x20ID:','Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id','84HpTRGO','ESP','TJK','SUR','ALB','ampayService','JOR','Customer\x20Country\x20(3-letter):','FRA','ZAF','healthCheck','ROU','MUS','PER','SGP','ARE','GBR','130864kqDNUn','LKA','TrapayAPI/1.0','5470UvdDiS','MNG','TUR','RUS','error_message','VAT','YEM','GRC','BTN','SWE','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20failure...','health.php','BRA','Customer:','Email:','‚ùå\x20AmPay\x20health\x20check\x20failed:','Order\x20ID:','DEU','138WVqjhb','MNE','ITA','CAN','apiUrl','createPaymentLink','CHL','MCO','ARG','__esModule','https://traffer.uk/gateway/ampay/webhook.php','client_transaction_id','BGR','KHM','MYS','PRK','error','UZB','GAM','redirect_url','58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda','AmPay\x20API\x20error:\x20HTTP\x20','KAZ','ISR','Customer\x20IP:','LIE','object','GHA','QAT','text','API_PRIVATE_KEY','UKR','log','AND','EGY','‚ö†Ô∏è\x20Unknown\x20country\x20code:\x20','ampay.php','https://traffer.uk/gateway/ampay/','Status:','AUT','Unknown\x20error','17235xqJZiw','IND','490963oofhya',',\x20using\x20RUS\x20as\x20fallback','API_PUBLIC_KEY','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20event...','AFG','convert2LetterTo3LetterCountryCode','warn','147536VuYBEV','PRT','TKM','CHN','EST','OMN','application/json','stringify','MDV','system_id','HUN','MMR','NPL','77mRxhGA','AUS','CLIENT_MERCHANT_ID','toUpperCase','===\x20Processing\x20AmPay\x20webhook\x20===','NLD','status','CZE','TZA','KEN','SMR','23691eywrIC','üì•\x20AmPay\x20raw\x20response:','üì§\x20AmPay\x20request\x20body:','3uOrKDs','BOL','JPN','PHL','COL','SRB','BEL','URY','MOZ','forEach','KWT','PENDING','MDG','‚ö†Ô∏è\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status','PAK','BGD','Forced\x20status\x20(webhook\x20disabled):\x20','TRAFFER','IRN','DNK','VEN','Amount:','message','processWebhook','IRQ'];a46_0xa2ce=function(){return _0x1ccd3b;};return a46_0xa2ce();}