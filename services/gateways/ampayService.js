'use strict';function a56_0x1760(){const _0xc15e4=['ðŸ‡¦ðŸ‡²\x20Creating\x20AmPay\x20payment\x20link...','âš ï¸\x20Unknown\x20country\x20code:\x20','ECU','message','MKD','ðŸ“\x20Logging\x20AmPay\x20payment\x20creation\x20failure...','ROU','GAM','KAZ','MYS','ðŸ“Š\x20AmPay\x20response\x20data:','toUpperCase','stringify','Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id','9081hnEkEJ','112103mBjscx','__esModule','NPL','625912umxwZf','health.php','amount','AUS','GHA','AZE','POL','BGD','currency','API_PRIVATE_KEY','IRQ','MDV','ARM','status','SMR','text','PENDING','HRV','JOR','KGZ','PSE','ISR','Extracted\x20payment\x20ID:\x20','LVA','JPN','redirect_url','ARE','GBR','Available\x20fields:','MNG','HUN','MNE','ESP','DNK','BEL','âœ…\x20AmPay\x20payment\x20link\x20created\x20successfully','SRB','tracker_id','ALB','NLD','âŒ\x20AmPay\x20health\x20check\x20failed:','SAU','GET','system_id','USA','ZMB','LUX','API_PUBLIC_KEY','===\x20Processing\x20AmPay\x20webhook\x20===','error','URY','Order\x20ID:','UGA','TUR','SUR','BHR','FRA','KHM','Amount:','Forced\x20status\x20(webhook\x20disabled):\x20','NGA','log','EST','convert2LetterTo3LetterCountryCode','ITA','MMR','apiUrl','GEO','a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815','LTU','application/json','CLIENT_MERCHANT_ID','UZB','CYP','ZWE','MDA','LBN','PRT','MOZ','CHE','BOL','IND','AmPayService','PAK','LAO','No\x20payment\x20ID\x20found\x20in\x20webhook\x20data','POST','NOR','âš ï¸\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status','ampayService','BRA','MCO','SYR','Payment\x20URL:','https://traffer.uk/gateway/ampay/','GRC','CAN','client_transaction_id','THA','VAT','RUS','PRY','SWE','Customer\x20IP:','BTN','YEM','REU','ampay.php','SVK','Email:','System\x20ID:','GUY','ðŸ“¥\x20AmPay\x20raw\x20response:','BIH','AmPay\x20payment\x20creation\x20failed:\x20','AND','OMN','CHL','https://traffer.uk/gateway/ampay/webhook.php','TRAFFER','1919267oyyHAA','parse','IRN','58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda','Unknown\x20error','DEU','MLT','852306NuYaad','\x20-\x20','MDG','Webhook\x20data\x20type:','3WRlNSk','VEN','PER','2536HtnZVz','TrapayAPI/1.0','ðŸ“¤\x20AmPay\x20request\x20body:','forEach','createPaymentLink','AFG','KEN','38489vmBxqF','Customer:','1390mMuKMi','error_message','FLK','âŒ\x20AmPay\x20payment\x20creation\x20failed:','SYC','Tracker\x20ID:','133138leeyMb','PRK','SVN','defineProperty','10EOjisf',',\x20using\x20RUS\x20as\x20fallback'];a56_0x1760=function(){return _0xc15e4;};return a56_0x1760();}const a56_0x456dc5=a56_0x1dd6;(function(_0x345709,_0xebe005){const _0x358c35=a56_0x1dd6,_0x3e1138=_0x345709();while(!![]){try{const _0x5fd05=-parseInt(_0x358c35(0x19f))/0x1+parseInt(_0x358c35(0x18a))/0x2*(-parseInt(_0x358c35(0x178))/0x3)+-parseInt(_0x358c35(0x1a2))/0x4*(parseInt(_0x358c35(0x18e))/0x5)+parseInt(_0x358c35(0x174))/0x6+-parseInt(_0x358c35(0x21a))/0x7+-parseInt(_0x358c35(0x17b))/0x8*(-parseInt(_0x358c35(0x19e))/0x9)+-parseInt(_0x358c35(0x184))/0xa*(-parseInt(_0x358c35(0x182))/0xb);if(_0x5fd05===_0xebe005)break;else _0x3e1138['push'](_0x3e1138['shift']());}catch(_0x2a9223){_0x3e1138['push'](_0x3e1138['shift']());}}}(a56_0x1760,0x2c8b8));Object[a56_0x456dc5(0x18d)](exports,a56_0x456dc5(0x1a0),{'value':!![]}),exports[a56_0x456dc5(0x1fb)]=exports[a56_0x456dc5(0x1f4)]=void 0x0;class AmPayService{constructor(){const _0x131b59=a56_0x456dc5;this[_0x131b59(0x1e9)]=_0x131b59(0x219),this[_0x131b59(0x1d1)]=_0x131b59(0x21d),this[_0x131b59(0x1ab)]=_0x131b59(0x1e6),this[_0x131b59(0x1e4)]=_0x131b59(0x200),console[_0x131b59(0x1df)]('ðŸ‡¦ðŸ‡²\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing');}[a56_0x456dc5(0x1e1)](_0x32d81a){const _0x2c6810=a56_0x456dc5,_0x150eba={'AD':_0x2c6810(0x215),'AL':_0x2c6810(0x1c8),'AT':'AUT','BA':_0x2c6810(0x213),'BE':_0x2c6810(0x1c4),'BG':'BGR','BY':'BLR','CH':_0x2c6810(0x1f1),'CY':_0x2c6810(0x1eb),'CZ':'CZE','DE':_0x2c6810(0x172),'DK':_0x2c6810(0x1c3),'EE':_0x2c6810(0x1e0),'ES':_0x2c6810(0x1c2),'FI':'FIN','FR':_0x2c6810(0x1da),'GB':_0x2c6810(0x1bd),'GE':_0x2c6810(0x1e5),'GR':_0x2c6810(0x201),'HR':_0x2c6810(0x1b3),'HU':_0x2c6810(0x1c0),'IE':'IRL','IS':'ISL','IT':_0x2c6810(0x1e2),'LI':'LIE','LT':_0x2c6810(0x1e7),'LU':_0x2c6810(0x1d0),'LV':_0x2c6810(0x1b9),'MC':_0x2c6810(0x1fd),'MD':_0x2c6810(0x1ed),'ME':_0x2c6810(0x1c1),'MK':_0x2c6810(0x194),'MT':_0x2c6810(0x173),'NL':_0x2c6810(0x1c9),'NO':_0x2c6810(0x1f9),'PL':_0x2c6810(0x1a8),'PT':_0x2c6810(0x1ef),'RO':_0x2c6810(0x196),'RS':_0x2c6810(0x1c6),'RU':_0x2c6810(0x206),'SE':_0x2c6810(0x208),'SI':_0x2c6810(0x18c),'SK':_0x2c6810(0x20e),'SM':_0x2c6810(0x1b0),'UA':'UKR','VA':_0x2c6810(0x205),'XK':'XKX','AM':_0x2c6810(0x1ae),'AZ':_0x2c6810(0x1a7),'KZ':_0x2c6810(0x198),'KG':_0x2c6810(0x1b5),'TJ':'TJK','TM':'TKM','UZ':_0x2c6810(0x1ea),'US':_0x2c6810(0x1ce),'CA':_0x2c6810(0x202),'AU':_0x2c6810(0x1a5),'JP':_0x2c6810(0x1ba),'CN':'CHN','IN':_0x2c6810(0x1f3),'BR':_0x2c6810(0x1fc),'MX':'MEX','AR':'ARG','CL':_0x2c6810(0x217),'PE':_0x2c6810(0x17a),'CO':'COL','VE':_0x2c6810(0x179),'EC':_0x2c6810(0x192),'BO':_0x2c6810(0x1f2),'PY':_0x2c6810(0x207),'UY':_0x2c6810(0x1d4),'SR':_0x2c6810(0x1d8),'GY':_0x2c6810(0x211),'FK':_0x2c6810(0x186),'ZA':'ZAF','EG':'EGY','NG':_0x2c6810(0x1de),'KE':_0x2c6810(0x181),'GH':_0x2c6810(0x1a6),'TZ':'TZA','UG':_0x2c6810(0x1d6),'ZW':_0x2c6810(0x1ec),'ZM':_0x2c6810(0x1cf),'MW':'MWI','MZ':_0x2c6810(0x1f0),'MG':_0x2c6810(0x176),'MU':'MUS','SC':_0x2c6810(0x188),'RE':_0x2c6810(0x20c),'TR':_0x2c6810(0x1d7),'IR':_0x2c6810(0x21c),'IQ':_0x2c6810(0x1ac),'SA':_0x2c6810(0x1cb),'AE':_0x2c6810(0x1bc),'KW':'KWT','QA':'QAT','BH':_0x2c6810(0x1d9),'OM':_0x2c6810(0x216),'YE':_0x2c6810(0x20b),'JO':_0x2c6810(0x1b4),'LB':_0x2c6810(0x1ee),'SY':_0x2c6810(0x1fe),'IL':_0x2c6810(0x1b7),'PS':_0x2c6810(0x1b6),'KR':'KOR','KP':_0x2c6810(0x18b),'TH':_0x2c6810(0x204),'VN':'VNM','MY':_0x2c6810(0x199),'SG':'SGP','ID':'IDN','PH':'PHL','LA':_0x2c6810(0x1f6),'KH':_0x2c6810(0x1db),'MM':_0x2c6810(0x1e3),'BD':_0x2c6810(0x1a9),'LK':'LKA','NP':_0x2c6810(0x1a1),'BT':_0x2c6810(0x20a),'MV':_0x2c6810(0x1ad),'AF':_0x2c6810(0x180),'PK':_0x2c6810(0x1f5),'MN':_0x2c6810(0x1bf)},_0x4ad4bb=_0x150eba[_0x32d81a[_0x2c6810(0x19b)]()];if(!_0x4ad4bb)return console['warn'](_0x2c6810(0x191)+_0x32d81a+_0x2c6810(0x18f)),'RUS';return _0x4ad4bb;}async[a56_0x456dc5(0x17f)](_0x5a6fb9){const _0x474026=a56_0x456dc5;try{const {orderId:_0x392ed3,amount:_0x4b1261,currency:_0x5700ed,firstName:_0x25a817,lastName:_0xadaa73,email:_0x57ffb0,customerIp:_0xc35bad,customerCountry:_0x488e0c,successUrl:_0xb0fcce,failureUrl:_0x3c88ac}=_0x5a6fb9;console[_0x474026(0x1df)](_0x474026(0x190)),console['log'](_0x474026(0x1d5),_0x392ed3),console[_0x474026(0x1df)](_0x474026(0x1dc),_0x4b1261,_0x5700ed),console[_0x474026(0x1df)](_0x474026(0x183),_0x25a817+'\x20'+_0xadaa73),console[_0x474026(0x1df)](_0x474026(0x20f),_0x57ffb0),console[_0x474026(0x1df)](_0x474026(0x209),_0xc35bad),console[_0x474026(0x1df)]('Customer\x20Country\x20(2-letter):',_0x488e0c);const _0x305bc0=this[_0x474026(0x1e1)](_0x488e0c);console[_0x474026(0x1df)]('Customer\x20Country\x20(3-letter):',_0x305bc0);const _0x493a38={'sub_method':_0x474026(0x197),'currency':_0x5700ed['toUpperCase'](),'amount':_0x4b1261,'callback_url':_0x474026(0x218),'client_merchant_id':this[_0x474026(0x1e9)],'client_transaction_id':_0x392ed3,'transaction_description':_0x392ed3,'customer':{'ip':_0xc35bad,'email':_0x57ffb0,'full_name':_0x25a817+'\x20'+_0xadaa73,'country':_0x305bc0},'success_redirect_url':_0xb0fcce,'error_redirect_url':_0x3c88ac};console['log'](_0x474026(0x17d),JSON[_0x474026(0x19c)](_0x493a38,null,0x2));const _0x5c2bde=await fetch(this[_0x474026(0x1e4)]+_0x474026(0x20d),{'method':_0x474026(0x1f8),'headers':{'Content-Type':'application/json','User-Agent':_0x474026(0x17c)},'body':JSON[_0x474026(0x19c)](_0x493a38)}),_0x260299=await _0x5c2bde[_0x474026(0x1b1)]();console[_0x474026(0x1df)](_0x474026(0x212),_0x260299);if(!_0x5c2bde['ok'])throw new Error('AmPay\x20API\x20error:\x20HTTP\x20'+_0x5c2bde[_0x474026(0x1af)]+_0x474026(0x175)+_0x260299);let _0x1aee8e;try{_0x1aee8e=JSON[_0x474026(0x21b)](_0x260299);}catch(_0x52351c){throw new Error('Invalid\x20JSON\x20response\x20from\x20AmPay:\x20'+_0x260299);}console['log'](_0x474026(0x19a),JSON[_0x474026(0x19c)](_0x1aee8e,null,0x2));if(!_0x1aee8e[_0x474026(0x1bb)])throw new Error(_0x474026(0x214)+(_0x1aee8e[_0x474026(0x185)]||_0x1aee8e[_0x474026(0x193)]||_0x474026(0x21e)));const _0x5d2b89=_0x1aee8e[_0x474026(0x1bb)],_0x5543d0=_0x1aee8e['system_id'],_0x42478b=_0x1aee8e[_0x474026(0x1c7)];return console[_0x474026(0x1df)](_0x474026(0x1c5)),console[_0x474026(0x1df)](_0x474026(0x1ff),_0x5d2b89),console[_0x474026(0x1df)](_0x474026(0x210),_0x5543d0),console['log'](_0x474026(0x189),_0x42478b),console[_0x474026(0x1df)]('Status:',_0x1aee8e[_0x474026(0x1af)]),console['log']('ðŸ“\x20Logging\x20AmPay\x20payment\x20creation\x20event...'),{'gateway_payment_id':_0x5543d0||_0x42478b||_0x392ed3,'payment_url':_0x5d2b89||'','transaction_id':_0x5543d0};}catch(_0x45eda7){console[_0x474026(0x1d3)](_0x474026(0x187),_0x45eda7),console[_0x474026(0x1df)](_0x474026(0x195));throw _0x45eda7;}}async['healthCheck'](){const _0x456a1c=a56_0x456dc5;try{const _0x455a60=await fetch(this['apiUrl']+_0x456a1c(0x1a3),{'method':_0x456a1c(0x1cc),'headers':{'Content-Type':_0x456a1c(0x1e8),'User-Agent':_0x456a1c(0x17c)}});return _0x455a60&&_0x455a60['status']===0xc8?!![]:![];}catch(_0x3ca8d6){return console['error'](_0x456a1c(0x1ca),_0x3ca8d6),![];}}async['processWebhook'](_0x18a1f3){const _0x372a17=a56_0x456dc5;console[_0x372a17(0x1df)](_0x372a17(0x1d2)),console['log'](_0x372a17(0x1fa)),console['log']('Webhook\x20data:',_0x18a1f3),console[_0x372a17(0x1df)](_0x372a17(0x177),typeof _0x18a1f3),console[_0x372a17(0x1df)](_0x372a17(0x1be));_0x18a1f3&&typeof _0x18a1f3==='object'&&Object['keys'](_0x18a1f3)[_0x372a17(0x17e)](_0x544506=>{console['log']('\x20\x20'+_0x544506+':\x20'+_0x18a1f3[_0x544506]+'\x20('+typeof _0x18a1f3[_0x544506]+')');});let _0x124bd0=_0x372a17(0x1b2);const _0x243aba=_0x18a1f3[_0x372a17(0x203)]||_0x18a1f3[_0x372a17(0x1cd)]||_0x18a1f3[_0x372a17(0x1c7)]||'';return console[_0x372a17(0x1df)](_0x372a17(0x1b8)+_0x243aba),console['log'](_0x372a17(0x1dd)+_0x124bd0),!_0x243aba&&(console['error'](_0x372a17(0x1f7)),console[_0x372a17(0x1d3)](_0x372a17(0x19d))),{'paymentId':_0x243aba,'status':_0x124bd0,'amount':_0x18a1f3[_0x372a17(0x1a4)],'currency':_0x18a1f3[_0x372a17(0x1aa)]};}}function a56_0x1dd6(_0x247781,_0x26e1ee){_0x247781=_0x247781-0x172;const _0x176063=a56_0x1760();let _0x1dd6ff=_0x176063[_0x247781];return _0x1dd6ff;}exports[a56_0x456dc5(0x1f4)]=AmPayService,exports[a56_0x456dc5(0x1fb)]=new AmPayService();