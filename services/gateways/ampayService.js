'use strict';const a44_0x96f8bd=a44_0x429a;(function(_0x42ec11,_0x40eef5){const _0xed063b=a44_0x429a,_0x30e1c0=_0x42ec11();while(!![]){try{const _0x259484=-parseInt(_0xed063b(0x260))/0x1+-parseInt(_0xed063b(0x201))/0x2*(parseInt(_0xed063b(0x1e9))/0x3)+parseInt(_0xed063b(0x214))/0x4*(parseInt(_0xed063b(0x25d))/0x5)+parseInt(_0xed063b(0x227))/0x6*(parseInt(_0xed063b(0x24b))/0x7)+-parseInt(_0xed063b(0x23a))/0x8*(parseInt(_0xed063b(0x206))/0x9)+parseInt(_0xed063b(0x1d2))/0xa*(-parseInt(_0xed063b(0x221))/0xb)+parseInt(_0xed063b(0x23e))/0xc;if(_0x259484===_0x40eef5)break;else _0x30e1c0['push'](_0x30e1c0['shift']());}catch(_0x367d0e){_0x30e1c0['push'](_0x30e1c0['shift']());}}}(a44_0x42e9,0x2dad8));function a44_0x429a(_0x19e90f,_0x371059){const _0x42e9af=a44_0x42e9();return a44_0x429a=function(_0x429ab6,_0x1caa6c){_0x429ab6=_0x429ab6-0x1be;let _0x12ccda=_0x42e9af[_0x429ab6];return _0x12ccda;},a44_0x429a(_0x19e90f,_0x371059);}Object[a44_0x96f8bd(0x220)](exports,a44_0x96f8bd(0x1f3),{'value':!![]}),exports[a44_0x96f8bd(0x224)]=exports[a44_0x96f8bd(0x1d6)]=void 0x0;class AmPayService{constructor(){const _0x2f3b9f=a44_0x96f8bd;this[_0x2f3b9f(0x264)]=_0x2f3b9f(0x232),this[_0x2f3b9f(0x251)]=_0x2f3b9f(0x258),this[_0x2f3b9f(0x22d)]=_0x2f3b9f(0x1d9),this[_0x2f3b9f(0x1ec)]='https://traffer.uk/gateway/ampay/',console['log'](_0x2f3b9f(0x1d0));}[a44_0x96f8bd(0x1e6)](_0x28ccda){const _0x37594c=a44_0x96f8bd,_0x2eb25b={'AD':'AND','AL':_0x37594c(0x1ee),'AT':'AUT','BA':'BIH','BE':_0x37594c(0x1db),'BG':'BGR','BY':_0x37594c(0x259),'CH':_0x37594c(0x230),'CY':_0x37594c(0x24f),'CZ':_0x37594c(0x24e),'DE':'DEU','DK':_0x37594c(0x215),'EE':_0x37594c(0x218),'ES':_0x37594c(0x21b),'FI':'FIN','FR':_0x37594c(0x1c5),'GB':'GBR','GE':_0x37594c(0x1e5),'GR':'GRC','HR':_0x37594c(0x25b),'HU':_0x37594c(0x23b),'IE':'IRL','IS':_0x37594c(0x1cb),'IT':'ITA','LI':'LIE','LT':_0x37594c(0x268),'LU':_0x37594c(0x1e0),'LV':_0x37594c(0x1f8),'MC':_0x37594c(0x226),'MD':_0x37594c(0x1ff),'ME':_0x37594c(0x1e2),'MK':_0x37594c(0x237),'MT':_0x37594c(0x1c1),'NL':_0x37594c(0x24c),'NO':'NOR','PL':_0x37594c(0x1f0),'PT':_0x37594c(0x22b),'RO':_0x37594c(0x1eb),'RS':_0x37594c(0x21d),'RU':'RUS','SE':_0x37594c(0x20a),'SI':_0x37594c(0x242),'SK':_0x37594c(0x1fd),'SM':_0x37594c(0x1ca),'UA':_0x37594c(0x22c),'VA':_0x37594c(0x200),'XK':_0x37594c(0x252),'AM':_0x37594c(0x234),'AZ':_0x37594c(0x1cc),'KZ':_0x37594c(0x21e),'KG':_0x37594c(0x23f),'TJ':_0x37594c(0x1c3),'TM':_0x37594c(0x20e),'UZ':'UZB','US':_0x37594c(0x213),'CA':_0x37594c(0x1cf),'AU':_0x37594c(0x23d),'JP':_0x37594c(0x1f4),'CN':_0x37594c(0x256),'IN':_0x37594c(0x1f6),'BR':_0x37594c(0x233),'MX':_0x37594c(0x263),'AR':_0x37594c(0x229),'CL':'CHL','PE':_0x37594c(0x1f5),'CO':_0x37594c(0x208),'VE':_0x37594c(0x1e1),'EC':_0x37594c(0x1ea),'BO':_0x37594c(0x205),'PY':_0x37594c(0x1ed),'UY':_0x37594c(0x20d),'SR':'SUR','GY':_0x37594c(0x1c8),'FK':'FLK','ZA':_0x37594c(0x1ef),'EG':_0x37594c(0x1f2),'NG':'NGA','KE':'KEN','GH':_0x37594c(0x244),'TZ':_0x37594c(0x23c),'UG':'UGA','ZW':_0x37594c(0x243),'ZM':_0x37594c(0x1e3),'MW':'MWI','MZ':_0x37594c(0x223),'MG':_0x37594c(0x22e),'MU':_0x37594c(0x1d7),'SC':_0x37594c(0x202),'RE':_0x37594c(0x1fe),'TR':_0x37594c(0x209),'IR':_0x37594c(0x219),'IQ':'IRQ','SA':_0x37594c(0x1c4),'AE':_0x37594c(0x255),'KW':_0x37594c(0x265),'QA':'QAT','BH':_0x37594c(0x239),'OM':'OMN','YE':_0x37594c(0x235),'JO':_0x37594c(0x20c),'LB':_0x37594c(0x211),'SY':'SYR','IL':_0x37594c(0x228),'PS':_0x37594c(0x1be),'KR':'KOR','KP':'PRK','TH':_0x37594c(0x1fa),'VN':'VNM','MY':_0x37594c(0x1d8),'SG':_0x37594c(0x1e7),'ID':'IDN','PH':_0x37594c(0x1f1),'LA':_0x37594c(0x1c9),'KH':_0x37594c(0x262),'MM':'MMR','BD':'BGD','LK':_0x37594c(0x20f),'NP':_0x37594c(0x269),'BT':'BTN','MV':_0x37594c(0x21a),'AF':'AFG','PK':_0x37594c(0x25a),'MN':_0x37594c(0x250)},_0x2a68cc=_0x2eb25b[_0x28ccda[_0x37594c(0x248)]()];if(!_0x2a68cc)return console[_0x37594c(0x1cd)](_0x37594c(0x203)+_0x28ccda+_0x37594c(0x1dc)),_0x37594c(0x1e4);return _0x2a68cc;}async[a44_0x96f8bd(0x25c)](_0x40cb06){const _0x478357=a44_0x96f8bd;try{const {orderId:_0x1d8ded,amount:_0xd4f539,currency:_0x47f462,firstName:_0x43e577,lastName:_0x28a550,email:_0x48c5d5,customerIp:_0x170feb,customerCountry:_0x458734,successUrl:_0x3ea479,failureUrl:_0x5a0596}=_0x40cb06;console[_0x478357(0x1f9)](_0x478357(0x1de)),console[_0x478357(0x1f9)](_0x478357(0x1bf),_0x1d8ded),console[_0x478357(0x1f9)](_0x478357(0x25f),_0xd4f539,_0x47f462),console[_0x478357(0x1f9)]('Customer:',_0x43e577+'\x20'+_0x28a550),console[_0x478357(0x1f9)](_0x478357(0x245),_0x48c5d5),console[_0x478357(0x1f9)](_0x478357(0x225),_0x170feb),console[_0x478357(0x1f9)](_0x478357(0x249),_0x458734);const _0x1acffe=this[_0x478357(0x1e6)](_0x458734);console[_0x478357(0x1f9)](_0x478357(0x204),_0x1acffe);const _0xfcd1b1={'sub_method':_0x478357(0x1df),'currency':_0x47f462[_0x478357(0x248)](),'amount':_0xd4f539,'callback_url':_0x478357(0x1c0),'client_merchant_id':this[_0x478357(0x264)],'client_transaction_id':_0x1d8ded,'transaction_description':_0x1d8ded,'customer':{'ip':_0x170feb,'email':_0x48c5d5,'full_name':_0x43e577+'\x20'+_0x28a550,'country':_0x1acffe},'success_redirect_url':_0x3ea479,'error_redirect_url':_0x5a0596};console['log'](_0x478357(0x22f),JSON['stringify'](_0xfcd1b1,null,0x2));const _0x373713=await fetch(this[_0x478357(0x1ec)]+'ampay.php',{'method':_0x478357(0x254),'headers':{'Content-Type':_0x478357(0x1ce),'User-Agent':_0x478357(0x231)},'body':JSON[_0x478357(0x1d3)](_0xfcd1b1)}),_0x351dcf=await _0x373713['text']();console[_0x478357(0x1f9)](_0x478357(0x24d),_0x351dcf);if(!_0x373713['ok'])throw new Error(_0x478357(0x1c7)+_0x373713[_0x478357(0x1d4)]+_0x478357(0x247)+_0x351dcf);let _0x5d33c2;try{_0x5d33c2=JSON['parse'](_0x351dcf);}catch(_0x1d638f){throw new Error(_0x478357(0x246)+_0x351dcf);}console[_0x478357(0x1f9)]('üìä\x20AmPay\x20response\x20data:',JSON['stringify'](_0x5d33c2,null,0x2));if(!_0x5d33c2[_0x478357(0x267)])throw new Error(_0x478357(0x217)+(_0x5d33c2[_0x478357(0x22a)]||_0x5d33c2['message']||_0x478357(0x257)));const _0x495f65=_0x5d33c2['redirect_url'],_0x2e1c0b=_0x5d33c2[_0x478357(0x1d5)],_0x41004b=_0x5d33c2[_0x478357(0x238)];return console[_0x478357(0x1f9)](_0x478357(0x212)),console['log'](_0x478357(0x25e),_0x495f65),console[_0x478357(0x1f9)](_0x478357(0x216),_0x2e1c0b),console[_0x478357(0x1f9)](_0x478357(0x207),_0x41004b),console[_0x478357(0x1f9)](_0x478357(0x1c2),_0x5d33c2[_0x478357(0x1d4)]),console['log'](_0x478357(0x1f7)),{'gateway_payment_id':_0x2e1c0b||_0x41004b||_0x1d8ded,'payment_url':_0x495f65||'','transaction_id':_0x2e1c0b};}catch(_0x18db71){console[_0x478357(0x1da)](_0x478357(0x24a),_0x18db71),console[_0x478357(0x1f9)]('üìù\x20Logging\x20AmPay\x20payment\x20creation\x20failure...');throw _0x18db71;}}async[a44_0x96f8bd(0x21c)](){const _0x32ee03=a44_0x96f8bd;try{const _0x5b9d78=await fetch(this['apiUrl']+_0x32ee03(0x1dd),{'method':_0x32ee03(0x241),'headers':{'Content-Type':'application/json','User-Agent':_0x32ee03(0x231)}});return _0x5b9d78&&_0x5b9d78['status']===0xc8?!![]:![];}catch(_0x47cbf3){return console[_0x32ee03(0x1da)](_0x32ee03(0x21f),_0x47cbf3),![];}}async[a44_0x96f8bd(0x266)](_0x23dbfe){const _0x5a1d2b=a44_0x96f8bd;console['log'](_0x5a1d2b(0x20b)),console[_0x5a1d2b(0x1f9)](_0x5a1d2b(0x1fb)),console[_0x5a1d2b(0x1f9)](_0x5a1d2b(0x253),_0x23dbfe),console[_0x5a1d2b(0x1f9)](_0x5a1d2b(0x1c6),typeof _0x23dbfe),console[_0x5a1d2b(0x1f9)]('Available\x20fields:');_0x23dbfe&&typeof _0x23dbfe===_0x5a1d2b(0x1fc)&&Object[_0x5a1d2b(0x1d1)](_0x23dbfe)['forEach'](_0x1d2cab=>{const _0x405424=_0x5a1d2b;console[_0x405424(0x1f9)]('\x20\x20'+_0x1d2cab+':\x20'+_0x23dbfe[_0x1d2cab]+'\x20('+typeof _0x23dbfe[_0x1d2cab]+')');});let _0x27a167=_0x5a1d2b(0x240);const _0x121a20=_0x23dbfe['client_transaction_id']||_0x23dbfe[_0x5a1d2b(0x1d5)]||_0x23dbfe['tracker_id']||'';return console[_0x5a1d2b(0x1f9)]('Extracted\x20payment\x20ID:\x20'+_0x121a20),console[_0x5a1d2b(0x1f9)](_0x5a1d2b(0x210)+_0x27a167),!_0x121a20&&(console[_0x5a1d2b(0x1da)](_0x5a1d2b(0x1e8)),console[_0x5a1d2b(0x1da)](_0x5a1d2b(0x236))),{'paymentId':_0x121a20,'status':_0x27a167,'amount':_0x23dbfe[_0x5a1d2b(0x222)],'currency':_0x23dbfe[_0x5a1d2b(0x261)]};}}function a44_0x42e9(){const _0x278644=['ROU','apiUrl','PRY','ALB','ZAF','POL','PHL','EGY','__esModule','JPN','PER','IND','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20event...','LVA','log','THA','‚ö†Ô∏è\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status','object','SVK','REU','MDA','VAT','2GwYayV','SYC','‚ö†Ô∏è\x20Unknown\x20country\x20code:\x20','Customer\x20Country\x20(3-letter):','BOL','4383qgSbfg','Tracker\x20ID:','COL','TUR','SWE','===\x20Processing\x20AmPay\x20webhook\x20===','JOR','URY','TKM','LKA','Forced\x20status\x20(webhook\x20disabled):\x20','LBN','‚úÖ\x20AmPay\x20payment\x20link\x20created\x20successfully','USA','32556ctyRWQ','DNK','System\x20ID:','AmPay\x20payment\x20creation\x20failed:\x20','EST','IRN','MDV','ESP','healthCheck','SRB','KAZ','‚ùå\x20AmPay\x20health\x20check\x20failed:','defineProperty','976613DNsZxi','amount','MOZ','ampayService','Customer\x20IP:','MCO','12GeEJja','ISR','ARG','error_message','PRT','UKR','API_PRIVATE_KEY','MDG','üì§\x20AmPay\x20request\x20body:','CHE','TrapayAPI/1.0','TRAFFER','BRA','ARM','YEM','Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id','MKD','tracker_id','BHR','24IPSRiZ','HUN','TZA','AUS','3777096xWMDDZ','KGZ','PENDING','GET','SVN','ZWE','GHA','Email:','Invalid\x20JSON\x20response\x20from\x20AmPay:\x20','\x20-\x20','toUpperCase','Customer\x20Country\x20(2-letter):','‚ùå\x20AmPay\x20payment\x20creation\x20failed:','558082ZgsgaU','NLD','üì•\x20AmPay\x20raw\x20response:','CZE','CYP','MNG','API_PUBLIC_KEY','XKX','Webhook\x20data:','POST','ARE','CHN','Unknown\x20error','58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda','BLR','PAK','HRV','createPaymentLink','105aJtLzQ','Payment\x20URL:','Amount:','85842vIALcM','currency','KHM','MEX','CLIENT_MERCHANT_ID','KWT','processWebhook','redirect_url','LTU','NPL','PSE','Order\x20ID:','https://traffer.uk/gateway/ampay/webhook.php','MLT','Status:','TJK','SAU','FRA','Webhook\x20data\x20type:','AmPay\x20API\x20error:\x20HTTP\x20','GUY','LAO','SMR','ISL','AZE','warn','application/json','CAN','üá¶üá≤\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing','keys','20fCOuSi','stringify','status','system_id','AmPayService','MUS','MYS','a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815','error','BEL',',\x20using\x20RUS\x20as\x20fallback','health.php','üá¶üá≤\x20Creating\x20AmPay\x20payment\x20link...','GAM','LUX','VEN','MNE','ZMB','RUS','GEO','convert2LetterTo3LetterCountryCode','SGP','No\x20payment\x20ID\x20found\x20in\x20webhook\x20data','579492ceHNFM','ECU'];a44_0x42e9=function(){return _0x278644;};return a44_0x42e9();}exports[a44_0x96f8bd(0x1d6)]=AmPayService,exports[a44_0x96f8bd(0x224)]=new AmPayService();