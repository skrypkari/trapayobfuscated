'use strict';const a52_0x5693f2=a52_0x5d55;function a52_0x5d55(_0x56e28c,_0x2db38c){_0x56e28c=_0x56e28c-0x16a;const _0xb6e6f9=a52_0xb6e6();let _0x5d5537=_0xb6e6f9[_0x56e28c];return _0x5d5537;}(function(_0x18c5c6,_0x13df4d){const _0xe5dede=a52_0x5d55,_0x121047=_0x18c5c6();while(!![]){try{const _0x381709=parseInt(_0xe5dede(0x1e8))/0x1*(-parseInt(_0xe5dede(0x191))/0x2)+parseInt(_0xe5dede(0x1dc))/0x3+-parseInt(_0xe5dede(0x16a))/0x4+-parseInt(_0xe5dede(0x1ad))/0x5*(parseInt(_0xe5dede(0x1cb))/0x6)+parseInt(_0xe5dede(0x1d6))/0x7*(-parseInt(_0xe5dede(0x189))/0x8)+parseInt(_0xe5dede(0x1e6))/0x9+parseInt(_0xe5dede(0x18f))/0xa;if(_0x381709===_0x13df4d)break;else _0x121047['push'](_0x121047['shift']());}catch(_0x17d89c){_0x121047['push'](_0x121047['shift']());}}}(a52_0xb6e6,0x2b6d5));Object[a52_0x5693f2(0x1fb)](exports,a52_0x5693f2(0x173),{'value':!![]}),exports[a52_0x5693f2(0x174)]=exports[a52_0x5693f2(0x1c8)]=void 0x0;class AmPayService{constructor(){const _0x4b09a4=a52_0x5693f2;this[_0x4b09a4(0x17d)]=_0x4b09a4(0x171),this[_0x4b09a4(0x170)]=_0x4b09a4(0x186),this[_0x4b09a4(0x20a)]=_0x4b09a4(0x1e3),this[_0x4b09a4(0x1d0)]='https://traffer.uk/gateway/ampay/',console[_0x4b09a4(0x197)](_0x4b09a4(0x200));}['convert2LetterTo3LetterCountryCode'](_0x3fed7c){const _0x2ae319=a52_0x5693f2,_0x509ac4={'AD':'AND','AL':_0x2ae319(0x18b),'AT':_0x2ae319(0x1d4),'BA':'BIH','BE':'BEL','BG':_0x2ae319(0x177),'BY':_0x2ae319(0x194),'CH':'CHE','CY':_0x2ae319(0x1f4),'CZ':_0x2ae319(0x1a2),'DE':_0x2ae319(0x1a8),'DK':'DNK','EE':_0x2ae319(0x181),'ES':_0x2ae319(0x1cd),'FI':'FIN','FR':'FRA','GB':_0x2ae319(0x1f9),'GE':_0x2ae319(0x1ce),'GR':'GRC','HR':_0x2ae319(0x1ea),'HU':_0x2ae319(0x19b),'IE':_0x2ae319(0x202),'IS':_0x2ae319(0x1bd),'IT':_0x2ae319(0x1d2),'LI':_0x2ae319(0x1d9),'LT':_0x2ae319(0x1c7),'LU':'LUX','LV':'LVA','MC':_0x2ae319(0x16c),'MD':'MDA','ME':_0x2ae319(0x206),'MK':_0x2ae319(0x1c4),'MT':_0x2ae319(0x1fe),'NL':_0x2ae319(0x1af),'NO':_0x2ae319(0x1fa),'PL':'POL','PT':_0x2ae319(0x1bf),'RO':_0x2ae319(0x1a3),'RS':_0x2ae319(0x187),'RU':'RUS','SE':_0x2ae319(0x1b1),'SI':_0x2ae319(0x1b3),'SK':_0x2ae319(0x1eb),'SM':_0x2ae319(0x18a),'UA':_0x2ae319(0x18d),'VA':_0x2ae319(0x20b),'XK':_0x2ae319(0x178),'AM':'ARM','AZ':_0x2ae319(0x1ed),'KZ':_0x2ae319(0x199),'KG':_0x2ae319(0x1f3),'TJ':_0x2ae319(0x1bb),'TM':_0x2ae319(0x1df),'UZ':_0x2ae319(0x183),'US':'USA','CA':_0x2ae319(0x1db),'AU':_0x2ae319(0x19e),'JP':_0x2ae319(0x1c6),'CN':_0x2ae319(0x1ec),'IN':_0x2ae319(0x1ba),'BR':_0x2ae319(0x1c3),'MX':_0x2ae319(0x201),'AR':_0x2ae319(0x17a),'CL':'CHL','PE':_0x2ae319(0x1ca),'CO':'COL','VE':_0x2ae319(0x1b9),'EC':'ECU','BO':_0x2ae319(0x1f0),'PY':'PRY','UY':'URY','SR':'SUR','GY':'GUY','FK':_0x2ae319(0x1b5),'ZA':_0x2ae319(0x1b6),'EG':_0x2ae319(0x1be),'NG':_0x2ae319(0x1d5),'KE':'KEN','GH':_0x2ae319(0x1de),'TZ':_0x2ae319(0x184),'UG':_0x2ae319(0x1c0),'ZW':_0x2ae319(0x175),'ZM':_0x2ae319(0x20d),'MW':'MWI','MZ':_0x2ae319(0x1d7),'MG':_0x2ae319(0x18e),'MU':_0x2ae319(0x1b4),'SC':'SYC','RE':'REU','TR':_0x2ae319(0x1e7),'IR':_0x2ae319(0x1f8),'IQ':_0x2ae319(0x182),'SA':_0x2ae319(0x1ff),'AE':_0x2ae319(0x192),'KW':'KWT','QA':_0x2ae319(0x205),'BH':_0x2ae319(0x1fd),'OM':_0x2ae319(0x17b),'YE':_0x2ae319(0x185),'JO':_0x2ae319(0x1e4),'LB':_0x2ae319(0x1a6),'SY':_0x2ae319(0x1ee),'IL':_0x2ae319(0x20c),'PS':_0x2ae319(0x18c),'KR':_0x2ae319(0x1aa),'KP':_0x2ae319(0x17f),'TH':_0x2ae319(0x204),'VN':_0x2ae319(0x193),'MY':_0x2ae319(0x203),'SG':_0x2ae319(0x16f),'ID':_0x2ae319(0x16d),'PH':_0x2ae319(0x1f6),'LA':_0x2ae319(0x20e),'KH':'KHM','MM':_0x2ae319(0x179),'BD':_0x2ae319(0x1e1),'LK':_0x2ae319(0x1d3),'NP':'NPL','BT':'BTN','MV':_0x2ae319(0x1a1),'AF':_0x2ae319(0x19f),'PK':_0x2ae319(0x1a5),'MN':_0x2ae319(0x1b7)},_0x298f70=_0x509ac4[_0x3fed7c['toUpperCase']()];if(!_0x298f70)return console[_0x2ae319(0x180)](_0x2ae319(0x1ac)+_0x3fed7c+_0x2ae319(0x1b8)),_0x2ae319(0x1d1);return _0x298f70;}async['createPaymentLink'](_0x3523ff){const _0x5df7b7=a52_0x5693f2;try{const {orderId:_0x16e1a2,amount:_0x5ccb3a,currency:_0x2ea90d,firstName:_0x5e2655,lastName:_0x4a379b,email:_0x3902a5,customerIp:_0x1ddbf8,customerCountry:_0x53222e,successUrl:_0xf6cc07,failureUrl:_0x971e7b}=_0x3523ff;console['log']('üá¶üá≤\x20Creating\x20AmPay\x20payment\x20link...'),console['log'](_0x5df7b7(0x1ef),_0x16e1a2),console[_0x5df7b7(0x197)](_0x5df7b7(0x1f1),_0x5ccb3a,_0x2ea90d),console[_0x5df7b7(0x197)](_0x5df7b7(0x1b0),_0x5e2655+'\x20'+_0x4a379b),console[_0x5df7b7(0x197)](_0x5df7b7(0x195),_0x3902a5),console[_0x5df7b7(0x197)]('Customer\x20IP:',_0x1ddbf8),console[_0x5df7b7(0x197)]('Customer\x20Country\x20(2-letter):',_0x53222e);const _0x21f54f=this[_0x5df7b7(0x19a)](_0x53222e);console['log'](_0x5df7b7(0x1ae),_0x21f54f);const _0x537a9a={'sub_method':_0x5df7b7(0x1a4),'currency':_0x2ea90d[_0x5df7b7(0x1e9)](),'amount':_0x5ccb3a,'callback_url':_0x5df7b7(0x1ab),'client_merchant_id':this['CLIENT_MERCHANT_ID'],'client_transaction_id':_0x16e1a2,'transaction_description':_0x16e1a2,'customer':{'ip':_0x1ddbf8,'email':_0x3902a5,'full_name':_0x5e2655+'\x20'+_0x4a379b,'country':_0x21f54f},'success_redirect_url':_0xf6cc07,'error_redirect_url':_0x971e7b};console['log'](_0x5df7b7(0x17e),JSON[_0x5df7b7(0x1f5)](_0x537a9a,null,0x2));const _0x59dfcd=await fetch(this[_0x5df7b7(0x1d0)]+_0x5df7b7(0x1e2),{'method':'POST','headers':{'Content-Type':'application/json','User-Agent':'TrapayAPI/1.0'},'body':JSON[_0x5df7b7(0x1f5)](_0x537a9a)}),_0x655b6b=await _0x59dfcd['text']();console[_0x5df7b7(0x197)]('üì•\x20AmPay\x20raw\x20response:',_0x655b6b);if(!_0x59dfcd['ok'])throw new Error('AmPay\x20API\x20error:\x20HTTP\x20'+_0x59dfcd[_0x5df7b7(0x207)]+_0x5df7b7(0x1e0)+_0x655b6b);let _0x1bfc99;try{_0x1bfc99=JSON[_0x5df7b7(0x19d)](_0x655b6b);}catch(_0x1b4098){throw new Error(_0x5df7b7(0x1c5)+_0x655b6b);}console[_0x5df7b7(0x197)](_0x5df7b7(0x1fc),JSON['stringify'](_0x1bfc99,null,0x2));if(!_0x1bfc99[_0x5df7b7(0x211)])throw new Error(_0x5df7b7(0x190)+(_0x1bfc99[_0x5df7b7(0x198)]||_0x1bfc99['message']||_0x5df7b7(0x1c9)));const _0x3b527f=_0x1bfc99[_0x5df7b7(0x211)],_0x1f6359=_0x1bfc99[_0x5df7b7(0x1f7)],_0x269503=_0x1bfc99[_0x5df7b7(0x210)];return console[_0x5df7b7(0x197)](_0x5df7b7(0x1bc)),console[_0x5df7b7(0x197)](_0x5df7b7(0x19c),_0x3b527f),console[_0x5df7b7(0x197)]('System\x20ID:',_0x1f6359),console[_0x5df7b7(0x197)](_0x5df7b7(0x1f2),_0x269503),console[_0x5df7b7(0x197)](_0x5df7b7(0x1d8),_0x1bfc99[_0x5df7b7(0x207)]),console[_0x5df7b7(0x197)](_0x5df7b7(0x196)),{'gateway_payment_id':_0x1f6359||_0x269503||_0x16e1a2,'payment_url':_0x3b527f||'','transaction_id':_0x1f6359};}catch(_0x307f1c){console['error'](_0x5df7b7(0x1a0),_0x307f1c),console[_0x5df7b7(0x197)](_0x5df7b7(0x176));throw _0x307f1c;}}async[a52_0x5693f2(0x1dd)](){const _0x36748a=a52_0x5693f2;try{const _0x4e3189=await fetch(this[_0x36748a(0x1d0)]+_0x36748a(0x209),{'method':_0x36748a(0x1c1),'headers':{'Content-Type':'application/json','User-Agent':_0x36748a(0x1e5)}});return _0x4e3189&&_0x4e3189[_0x36748a(0x207)]===0xc8?!![]:![];}catch(_0x50d623){return console[_0x36748a(0x1da)](_0x36748a(0x17c),_0x50d623),![];}}async['processWebhook'](_0x441b26){const _0x233bb9=a52_0x5693f2;console[_0x233bb9(0x197)](_0x233bb9(0x1cf)),console[_0x233bb9(0x197)](_0x233bb9(0x172)),console['log']('Webhook\x20data:',_0x441b26),console[_0x233bb9(0x197)](_0x233bb9(0x1cc),typeof _0x441b26),console[_0x233bb9(0x197)](_0x233bb9(0x208));_0x441b26&&typeof _0x441b26==='object'&&Object[_0x233bb9(0x20f)](_0x441b26)[_0x233bb9(0x1c2)](_0x5c90fe=>{console['log']('\x20\x20'+_0x5c90fe+':\x20'+_0x441b26[_0x5c90fe]+'\x20('+typeof _0x441b26[_0x5c90fe]+')');});let _0x5bede9=_0x233bb9(0x1b2);const _0x379a0c=_0x441b26[_0x233bb9(0x1a9)]||_0x441b26[_0x233bb9(0x1f7)]||_0x441b26[_0x233bb9(0x210)]||'';return console['log']('Extracted\x20payment\x20ID:\x20'+_0x379a0c),console['log'](_0x233bb9(0x16e)+_0x5bede9),!_0x379a0c&&(console[_0x233bb9(0x1da)]('No\x20payment\x20ID\x20found\x20in\x20webhook\x20data'),console[_0x233bb9(0x1da)](_0x233bb9(0x1a7))),{'paymentId':_0x379a0c,'status':_0x5bede9,'amount':_0x441b26[_0x233bb9(0x188)],'currency':_0x441b26[_0x233bb9(0x16b)]};}}exports[a52_0x5693f2(0x1c8)]=AmPayService,exports[a52_0x5693f2(0x174)]=new AmPayService();function a52_0xb6e6(){const _0x330c9f=['‚ö†Ô∏è\x20Unknown\x20country\x20code:\x20','5PUpwwq','Customer\x20Country\x20(3-letter):','NLD','Customer:','SWE','PENDING','SVN','MUS','FLK','ZAF','MNG',',\x20using\x20RUS\x20as\x20fallback','VEN','IND','TJK','‚úÖ\x20AmPay\x20payment\x20link\x20created\x20successfully','ISL','EGY','PRT','UGA','GET','forEach','BRA','MKD','Invalid\x20JSON\x20response\x20from\x20AmPay:\x20','JPN','LTU','AmPayService','Unknown\x20error','PER','1484904dCJEBZ','Webhook\x20data\x20type:','ESP','GEO','===\x20Processing\x20AmPay\x20webhook\x20===','apiUrl','RUS','ITA','LKA','AUT','NGA','7847VoDNUq','MOZ','Status:','LIE','error','CAN','979602WuOwgy','healthCheck','GHA','TKM','\x20-\x20','BGD','ampay.php','a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815','JOR','TrapayAPI/1.0','631746QPONYZ','TUR','3RPuHGU','toUpperCase','HRV','SVK','CHN','AZE','SYR','Order\x20ID:','BOL','Amount:','Tracker\x20ID:','KGZ','CYP','stringify','PHL','system_id','IRN','GBR','NOR','defineProperty','üìä\x20AmPay\x20response\x20data:','BHR','MLT','SAU','üá¶üá≤\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing','MEX','IRL','MYS','THA','QAT','MNE','status','Available\x20fields:','health.php','API_PRIVATE_KEY','VAT','ISR','ZMB','LAO','keys','tracker_id','redirect_url','1282796yOzuEz','currency','MCO','IDN','Forced\x20status\x20(webhook\x20disabled):\x20','SGP','API_PUBLIC_KEY','TRAFFER','‚ö†Ô∏è\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status','__esModule','ampayService','ZWE','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20failure...','BGR','XKX','MMR','ARG','OMN','‚ùå\x20AmPay\x20health\x20check\x20failed:','CLIENT_MERCHANT_ID','üì§\x20AmPay\x20request\x20body:','PRK','warn','EST','IRQ','UZB','TZA','YEM','58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda','SRB','amount','1416DFCBfs','SMR','ALB','PSE','UKR','MDG','5834520COYdgA','AmPay\x20payment\x20creation\x20failed:\x20','23802jeopaW','ARE','VNM','BLR','Email:','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20event...','log','error_message','KAZ','convert2LetterTo3LetterCountryCode','HUN','Payment\x20URL:','parse','AUS','AFG','‚ùå\x20AmPay\x20payment\x20creation\x20failed:','MDV','CZE','ROU','GAM','PAK','LBN','Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id','DEU','client_transaction_id','KOR','https://traffer.uk/gateway/ampay/webhook.php'];a52_0xb6e6=function(){return _0x330c9f;};return a52_0xb6e6();}