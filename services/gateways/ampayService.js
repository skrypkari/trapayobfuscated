'use strict';const a56_0x281e6c=a56_0x12fd;(function(_0x1cf33c,_0x7a2aa6){const _0x1d16d8=a56_0x12fd,_0x1c9281=_0x1cf33c();while(!![]){try{const _0x38730a=parseInt(_0x1d16d8(0x128))/0x1+parseInt(_0x1d16d8(0x147))/0x2+parseInt(_0x1d16d8(0x110))/0x3*(parseInt(_0x1d16d8(0x149))/0x4)+parseInt(_0x1d16d8(0x17f))/0x5+parseInt(_0x1d16d8(0xf7))/0x6*(parseInt(_0x1d16d8(0x18b))/0x7)+parseInt(_0x1d16d8(0x138))/0x8*(-parseInt(_0x1d16d8(0x16e))/0x9)+-parseInt(_0x1d16d8(0x190))/0xa;if(_0x38730a===_0x7a2aa6)break;else _0x1c9281['push'](_0x1c9281['shift']());}catch(_0x5f5702){_0x1c9281['push'](_0x1c9281['shift']());}}}(a56_0xbda0,0xf0474));Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a56_0x281e6c(0x17e)]=exports[a56_0x281e6c(0x16a)]=void 0x0;function a56_0x12fd(_0x1cd2ca,_0x173709){_0x1cd2ca=_0x1cd2ca-0xf6;const _0xbda017=a56_0xbda0();let _0x12fde5=_0xbda017[_0x1cd2ca];return _0x12fde5;}class AmPayService{constructor(){const _0x2fbad4=a56_0x281e6c;this[_0x2fbad4(0x18c)]=_0x2fbad4(0x173),this[_0x2fbad4(0x11e)]=_0x2fbad4(0x142),this[_0x2fbad4(0x135)]='a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815',this[_0x2fbad4(0x16b)]=_0x2fbad4(0x176),console['log']('üá¶üá≤\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing');}['convert2LetterTo3LetterCountryCode'](_0x2c86d0){const _0x235dde=a56_0x281e6c,_0x33944d={'AD':_0x235dde(0x187),'AL':_0x235dde(0x185),'AT':_0x235dde(0x105),'BA':_0x235dde(0x18d),'BE':_0x235dde(0x18a),'BG':'BGR','BY':_0x235dde(0xfc),'CH':_0x235dde(0x13c),'CY':_0x235dde(0x15e),'CZ':_0x235dde(0xfd),'DE':'DEU','DK':_0x235dde(0x17a),'EE':_0x235dde(0x10e),'ES':_0x235dde(0x17b),'FI':_0x235dde(0x197),'FR':_0x235dde(0x18f),'GB':_0x235dde(0x137),'GE':'GEO','GR':'GRC','HR':_0x235dde(0x163),'HU':_0x235dde(0x109),'IE':_0x235dde(0x14e),'IS':_0x235dde(0x12e),'IT':'ITA','LI':_0x235dde(0x12c),'LT':'LTU','LU':_0x235dde(0x174),'LV':_0x235dde(0x12b),'MC':_0x235dde(0x161),'MD':_0x235dde(0x19b),'ME':'MNE','MK':_0x235dde(0x172),'MT':_0x235dde(0xfb),'NL':_0x235dde(0x151),'NO':'NOR','PL':_0x235dde(0x13a),'PT':_0x235dde(0x162),'RO':_0x235dde(0x17d),'RS':_0x235dde(0x101),'RU':'RUS','SE':_0x235dde(0x15b),'SI':'SVN','SK':_0x235dde(0x126),'SM':'SMR','UA':_0x235dde(0x184),'VA':'VAT','XK':'XKX','AM':_0x235dde(0x15c),'AZ':'AZE','KZ':'KAZ','KG':_0x235dde(0x116),'TJ':'TJK','TM':_0x235dde(0x189),'UZ':_0x235dde(0x13b),'US':_0x235dde(0x154),'CA':_0x235dde(0x150),'AU':_0x235dde(0x15f),'JP':_0x235dde(0x145),'CN':'CHN','IN':_0x235dde(0x164),'BR':_0x235dde(0x196),'MX':_0x235dde(0x180),'AR':_0x235dde(0x158),'CL':_0x235dde(0x13d),'PE':_0x235dde(0x133),'CO':_0x235dde(0x16c),'VE':_0x235dde(0x144),'EC':_0x235dde(0x14a),'BO':_0x235dde(0x16d),'PY':_0x235dde(0xfe),'UY':_0x235dde(0x152),'SR':_0x235dde(0x118),'GY':_0x235dde(0x11f),'FK':_0x235dde(0x156),'ZA':_0x235dde(0x136),'EG':_0x235dde(0x179),'NG':_0x235dde(0x198),'KE':_0x235dde(0x146),'GH':'GHA','TZ':_0x235dde(0x186),'UG':_0x235dde(0x124),'ZW':_0x235dde(0x195),'ZM':_0x235dde(0x125),'MW':_0x235dde(0x182),'MZ':'MOZ','MG':_0x235dde(0x13f),'MU':'MUS','SC':'SYC','RE':'REU','TR':_0x235dde(0x140),'IR':_0x235dde(0x12d),'IQ':_0x235dde(0x10a),'SA':_0x235dde(0x107),'AE':'ARE','KW':_0x235dde(0x143),'QA':_0x235dde(0xfa),'BH':_0x235dde(0x106),'OM':_0x235dde(0x177),'YE':_0x235dde(0x14b),'JO':'JOR','LB':_0x235dde(0x199),'SY':_0x235dde(0x167),'IL':_0x235dde(0x160),'PS':_0x235dde(0x132),'KR':_0x235dde(0x12f),'KP':_0x235dde(0x10d),'TH':_0x235dde(0xf6),'VN':_0x235dde(0x100),'MY':_0x235dde(0x131),'SG':_0x235dde(0xf9),'ID':_0x235dde(0x191),'PH':_0x235dde(0x115),'LA':_0x235dde(0x15d),'KH':_0x235dde(0x17c),'MM':'MMR','BD':_0x235dde(0x165),'LK':_0x235dde(0x168),'NP':'NPL','BT':'BTN','MV':_0x235dde(0x119),'AF':_0x235dde(0x120),'PK':_0x235dde(0x141),'MN':'MNG'},_0x11d232=_0x33944d[_0x2c86d0[_0x235dde(0x127)]()];if(!_0x11d232)return console['warn'](_0x235dde(0x11b)+_0x2c86d0+',\x20using\x20RUS\x20as\x20fallback'),_0x235dde(0x139);return _0x11d232;}async[a56_0x281e6c(0x155)](_0x1825a4){const _0x399f18=a56_0x281e6c;try{const {orderId:_0x624c22,amount:_0x1fd31a,currency:_0x57254a,firstName:_0x47a188,lastName:_0x20948c,email:_0x34dbdc,customerIp:_0x292dec,customerCountry:_0x3325df,successUrl:_0x2f4b34,failureUrl:_0x4b3a8f}=_0x1825a4;console['log'](_0x399f18(0x121)),console['log']('Order\x20ID:',_0x624c22),console['log'](_0x399f18(0x19c),_0x1fd31a,_0x57254a),console[_0x399f18(0x192)](_0x399f18(0x169),_0x47a188+'\x20'+_0x20948c),console['log'](_0x399f18(0x11d),_0x34dbdc),console['log']('Customer\x20IP:',_0x292dec),console[_0x399f18(0x192)](_0x399f18(0x13e),_0x3325df);const _0x4bd104=this[_0x399f18(0x129)](_0x3325df);console[_0x399f18(0x192)](_0x399f18(0x134),_0x4bd104);const _0x31e49f={'sub_method':_0x399f18(0x19a),'currency':_0x57254a[_0x399f18(0x127)](),'amount':_0x1fd31a,'callback_url':_0x399f18(0x108),'client_merchant_id':this[_0x399f18(0x18c)],'client_transaction_id':_0x624c22,'transaction_description':_0x624c22,'customer':{'ip':_0x292dec,'email':_0x34dbdc,'full_name':_0x47a188+'\x20'+_0x20948c,'country':_0x4bd104},'success_redirect_url':_0x2f4b34,'error_redirect_url':_0x4b3a8f};console['log'](_0x399f18(0x166),JSON[_0x399f18(0x122)](_0x31e49f,null,0x2));const _0x365f6a=await fetch(this[_0x399f18(0x16b)]+_0x399f18(0x171),{'method':'POST','headers':{'Content-Type':'application/json','User-Agent':_0x399f18(0x10f)},'body':JSON[_0x399f18(0x122)](_0x31e49f)}),_0x12513d=await _0x365f6a[_0x399f18(0x103)]();console[_0x399f18(0x192)]('üì•\x20AmPay\x20raw\x20response:',_0x12513d);if(!_0x365f6a['ok'])throw new Error(_0x399f18(0x10b)+_0x365f6a[_0x399f18(0x153)]+_0x399f18(0x18e)+_0x12513d);let _0xc988ff;try{_0xc988ff=JSON[_0x399f18(0x14f)](_0x12513d);}catch(_0x5cd063){throw new Error('Invalid\x20JSON\x20response\x20from\x20AmPay:\x20'+_0x12513d);}console[_0x399f18(0x192)](_0x399f18(0x181),JSON[_0x399f18(0x122)](_0xc988ff,null,0x2));if(!_0xc988ff[_0x399f18(0x159)])throw new Error(_0x399f18(0x16f)+(_0xc988ff[_0x399f18(0x188)]||_0xc988ff[_0x399f18(0x113)]||_0x399f18(0x14c)));const _0x5bdbcf=_0xc988ff[_0x399f18(0x159)],_0x4e39a6=_0xc988ff[_0x399f18(0x14d)],_0x4421d2=_0xc988ff[_0x399f18(0x11a)];return console['log'](_0x399f18(0x194)),console['log'](_0x399f18(0x175),_0x5bdbcf),console[_0x399f18(0x192)](_0x399f18(0x123),_0x4e39a6),console['log'](_0x399f18(0x111),_0x4421d2),console[_0x399f18(0x192)]('Status:',_0xc988ff[_0x399f18(0x153)]),console['log']('üìù\x20Logging\x20AmPay\x20payment\x20creation\x20event...'),{'gateway_payment_id':_0x4e39a6||_0x4421d2||_0x624c22,'payment_url':_0x5bdbcf||'','transaction_id':_0x4e39a6};}catch(_0x4dde34){console['error'](_0x399f18(0x117),_0x4dde34),console[_0x399f18(0x192)]('üìù\x20Logging\x20AmPay\x20payment\x20creation\x20failure...');throw _0x4dde34;}}async[a56_0x281e6c(0x193)](){const _0x3bc344=a56_0x281e6c;try{const _0x478f5e=await fetch(this['apiUrl']+_0x3bc344(0xff),{'method':_0x3bc344(0x178),'headers':{'Content-Type':_0x3bc344(0x104),'User-Agent':_0x3bc344(0x10f)}});return _0x478f5e&&_0x478f5e['status']===0xc8?!![]:![];}catch(_0x148435){return console[_0x3bc344(0x102)](_0x3bc344(0x12a),_0x148435),![];}}async[a56_0x281e6c(0x11c)](_0x75fac1){const _0x3789c0=a56_0x281e6c;console['log'](_0x3789c0(0x183)),console[_0x3789c0(0x192)]('‚ö†Ô∏è\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status'),console[_0x3789c0(0x192)](_0x3789c0(0x148),_0x75fac1),console[_0x3789c0(0x192)](_0x3789c0(0x112),typeof _0x75fac1),console[_0x3789c0(0x192)](_0x3789c0(0x114));_0x75fac1&&typeof _0x75fac1===_0x3789c0(0x170)&&Object['keys'](_0x75fac1)[_0x3789c0(0x157)](_0x17ddfb=>{const _0x3884f0=_0x3789c0;console[_0x3884f0(0x192)]('\x20\x20'+_0x17ddfb+':\x20'+_0x75fac1[_0x17ddfb]+'\x20('+typeof _0x75fac1[_0x17ddfb]+')');});let _0x6d6984='PENDING';const _0x844d2c=_0x75fac1[_0x3789c0(0x10c)]||_0x75fac1['system_id']||_0x75fac1[_0x3789c0(0x11a)]||'';return console[_0x3789c0(0x192)](_0x3789c0(0xf8)+_0x844d2c),console[_0x3789c0(0x192)]('Forced\x20status\x20(webhook\x20disabled):\x20'+_0x6d6984),!_0x844d2c&&(console[_0x3789c0(0x102)]('No\x20payment\x20ID\x20found\x20in\x20webhook\x20data'),console['error'](_0x3789c0(0x130))),{'paymentId':_0x844d2c,'status':_0x6d6984,'amount':_0x75fac1['amount'],'currency':_0x75fac1[_0x3789c0(0x15a)]};}}function a56_0xbda0(){const _0x11712e=['BIH','\x20-\x20','FRA','35616050BKDJEt','IDN','log','healthCheck','‚úÖ\x20AmPay\x20payment\x20link\x20created\x20successfully','ZWE','BRA','FIN','NGA','LBN','GAM','MDA','Amount:','THA','90606fzAXbG','Extracted\x20payment\x20ID:\x20','SGP','QAT','MLT','BLR','CZE','PRY','health.php','VNM','SRB','error','text','application/json','AUT','BHR','SAU','https://traffer.uk/gateway/ampay/webhook.php','HUN','IRQ','AmPay\x20API\x20error:\x20HTTP\x20','client_transaction_id','PRK','EST','TrapayAPI/1.0','15lpNLhL','Tracker\x20ID:','Webhook\x20data\x20type:','message','Available\x20fields:','PHL','KGZ','‚ùå\x20AmPay\x20payment\x20creation\x20failed:','SUR','MDV','tracker_id','‚ö†Ô∏è\x20Unknown\x20country\x20code:\x20','processWebhook','Email:','API_PUBLIC_KEY','GUY','AFG','üá¶üá≤\x20Creating\x20AmPay\x20payment\x20link...','stringify','System\x20ID:','UGA','ZMB','SVK','toUpperCase','1149245TuqInN','convert2LetterTo3LetterCountryCode','‚ùå\x20AmPay\x20health\x20check\x20failed:','LVA','LIE','IRN','ISL','KOR','Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id','MYS','PSE','PER','Customer\x20Country\x20(3-letter):','API_PRIVATE_KEY','ZAF','GBR','160LFwKyk','RUS','POL','UZB','CHE','CHL','Customer\x20Country\x20(2-letter):','MDG','TUR','PAK','58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda','KWT','VEN','JPN','KEN','1477782WnDRgR','Webhook\x20data:','1118428fiJLAY','ECU','YEM','Unknown\x20error','system_id','IRL','parse','CAN','NLD','URY','status','USA','createPaymentLink','FLK','forEach','ARG','redirect_url','currency','SWE','ARM','LAO','CYP','AUS','ISR','MCO','PRT','HRV','IND','BGD','üì§\x20AmPay\x20request\x20body:','SYR','LKA','Customer:','AmPayService','apiUrl','COL','BOL','61371qOwwpw','AmPay\x20payment\x20creation\x20failed:\x20','object','ampay.php','MKD','TRAFFER','LUX','Payment\x20URL:','https://traffer.uk/gateway/ampay/','OMN','GET','EGY','DNK','ESP','KHM','ROU','ampayService','4790325VHZEPf','MEX','üìä\x20AmPay\x20response\x20data:','MWI','===\x20Processing\x20AmPay\x20webhook\x20===','UKR','ALB','TZA','AND','error_message','TKM','BEL','203BrmMwX','CLIENT_MERCHANT_ID'];a56_0xbda0=function(){return _0x11712e;};return a56_0xbda0();}exports[a56_0x281e6c(0x16a)]=AmPayService,exports[a56_0x281e6c(0x17e)]=new AmPayService();