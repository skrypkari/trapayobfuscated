'use strict';const a62_0x463ba1=a62_0x1716;(function(_0x42fb08,_0x34699b){const _0x44c52b=a62_0x1716,_0x451aa5=_0x42fb08();while(!![]){try{const _0x2a3ee9=parseInt(_0x44c52b(0x162))/0x1+-parseInt(_0x44c52b(0xe8))/0x2*(parseInt(_0x44c52b(0x134))/0x3)+parseInt(_0x44c52b(0xe2))/0x4*(-parseInt(_0x44c52b(0x143))/0x5)+-parseInt(_0x44c52b(0x115))/0x6+parseInt(_0x44c52b(0x10f))/0x7+parseInt(_0x44c52b(0x150))/0x8*(parseInt(_0x44c52b(0x100))/0x9)+parseInt(_0x44c52b(0xfe))/0xa*(parseInt(_0x44c52b(0x126))/0xb);if(_0x2a3ee9===_0x34699b)break;else _0x451aa5['push'](_0x451aa5['shift']());}catch(_0x5c532e){_0x451aa5['push'](_0x451aa5['shift']());}}}(a62_0x1e94,0x700ff));function a62_0x1e94(){const _0x4e002a=['NOR','ðŸ“Š\x20AmPay\x20response\x20data:','KAZ','VEN','MYS','UGA','POST','AmPayService','MLT','ALB','522849CveKCF','health.php','convert2LetterTo3LetterCountryCode','MMR','MUS','GBR','ISL','Customer:','REU','IRQ','ðŸ“¤\x20AmPay\x20request\x20body:','MNG','TKM','LKA','NGA','10Rvitbg','Invalid\x20JSON\x20response\x20from\x20AmPay:\x20','Available\x20fields:','GAM','TRAFFER','THA','keys','GUY','ECU','LIE','BHR','status','SYC','3120952rEBOrE','\x20-\x20',',\x20using\x20RUS\x20as\x20fallback','https://traffer.uk/gateway/ampay/','MWI','text','CHL','SRB','MDG','CAN','ROU','BGD','Forced\x20status\x20(webhook\x20disabled):\x20','ARE','Amount:','RUS','FLK','MOZ','646035LPyePe','Payment\x20URL:','TrapayAPI/1.0','DNK','__esModule','AZE','ðŸ‡¦ðŸ‡²\x20Creating\x20AmPay\x20payment\x20link...','healthCheck','IDN','ISR','BIH','SAU','SMR','ðŸ‡¦ðŸ‡²\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing','toUpperCase','error','BEL','ITA','TUR','NLD','âŒ\x20AmPay\x20payment\x20creation\x20failed:','AND','message','QAT','IRL','stringify','USA','Status:','1228020vlOZeg','ðŸ“\x20Logging\x20AmPay\x20payment\x20creation\x20failure...','log','AmPay\x20payment\x20creation\x20failed:\x20','BRA','DEU','8civhKa','CYP','LAO','Unknown\x20error','SUR','PENDING','NPL','ðŸ“\x20Logging\x20AmPay\x20payment\x20creation\x20event...','VNM','âš ï¸\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status','apiUrl','âœ…\x20AmPay\x20payment\x20link\x20created\x20successfully','BOL','LUX','ESP','system_id','No\x20payment\x20ID\x20found\x20in\x20webhook\x20data','MDV','BTN','TZA','CLIENT_MERCHANT_ID','error_message','2272260pPwclh','PRK','9gnmwIO','Extracted\x20payment\x20ID:\x20','KOR','KHM','POL','application/json','currency','ampay.php','EGY','HUN','SVK','GET','redirect_url','BGR','Webhook\x20data\x20type:','4264190yArUkx','Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id','IRN','MCO','AmPay\x20API\x20error:\x20HTTP\x20','https://traffer.uk/gateway/ampay/webhook.php','614406YeRDUD','warn','a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815','createPaymentLink','SWE','AUS','KEN','PRY','YEM','âš ï¸\x20Unknown\x20country\x20code:\x20','JPN','ARM','EST','VAT','FRA','MEX','PHL','11ivewJX','Customer\x20IP:','KWT','KGZ'];a62_0x1e94=function(){return _0x4e002a;};return a62_0x1e94();}Object['defineProperty'](exports,a62_0x463ba1(0x166),{'value':!![]}),exports['ampayService']=exports[a62_0x463ba1(0x131)]=void 0x0;class AmPayService{constructor(){const _0x57c90c=a62_0x463ba1;this[_0x57c90c(0xfc)]=_0x57c90c(0x147),this['API_PUBLIC_KEY']='58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda',this['API_PRIVATE_KEY']=_0x57c90c(0x117),this[_0x57c90c(0xf2)]=_0x57c90c(0x153),console['log'](_0x57c90c(0xd3));}[a62_0x463ba1(0x136)](_0x27020e){const _0x2ad72a=a62_0x463ba1,_0xfabc68={'AD':_0x2ad72a(0xdb),'AL':_0x2ad72a(0x133),'AT':'AUT','BA':_0x2ad72a(0xd0),'BE':_0x2ad72a(0xd6),'BG':_0x2ad72a(0x10d),'BY':'BLR','CH':'CHE','CY':_0x2ad72a(0xe9),'CZ':'CZE','DE':_0x2ad72a(0xe7),'DK':_0x2ad72a(0x165),'EE':_0x2ad72a(0x121),'ES':_0x2ad72a(0xf6),'FI':'FIN','FR':_0x2ad72a(0x123),'GB':_0x2ad72a(0x139),'GE':'GEO','GR':'GRC','HR':'HRV','HU':_0x2ad72a(0x109),'IE':_0x2ad72a(0xde),'IS':_0x2ad72a(0x13a),'IT':_0x2ad72a(0xd7),'LI':_0x2ad72a(0x14c),'LT':'LTU','LU':_0x2ad72a(0xf5),'LV':'LVA','MC':_0x2ad72a(0x112),'MD':'MDA','ME':'MNE','MK':'MKD','MT':_0x2ad72a(0x132),'NL':_0x2ad72a(0xd9),'NO':_0x2ad72a(0x12a),'PL':_0x2ad72a(0x104),'PT':'PRT','RO':_0x2ad72a(0x15a),'RS':_0x2ad72a(0x157),'RU':_0x2ad72a(0x15f),'SE':_0x2ad72a(0x119),'SI':'SVN','SK':_0x2ad72a(0x10a),'SM':_0x2ad72a(0xd2),'UA':'UKR','VA':_0x2ad72a(0x122),'XK':'XKX','AM':_0x2ad72a(0x120),'AZ':_0x2ad72a(0x167),'KZ':_0x2ad72a(0x12c),'KG':_0x2ad72a(0x129),'TJ':'TJK','TM':_0x2ad72a(0x140),'UZ':'UZB','US':_0x2ad72a(0xe0),'CA':_0x2ad72a(0x159),'AU':_0x2ad72a(0x11a),'JP':_0x2ad72a(0x11f),'CN':'CHN','IN':'IND','BR':_0x2ad72a(0xe6),'MX':_0x2ad72a(0x124),'AR':'ARG','CL':_0x2ad72a(0x156),'PE':'PER','CO':'COL','VE':_0x2ad72a(0x12d),'EC':_0x2ad72a(0x14b),'BO':_0x2ad72a(0xf4),'PY':_0x2ad72a(0x11c),'UY':'URY','SR':_0x2ad72a(0xec),'GY':_0x2ad72a(0x14a),'FK':_0x2ad72a(0x160),'ZA':'ZAF','EG':_0x2ad72a(0x108),'NG':_0x2ad72a(0x142),'KE':_0x2ad72a(0x11b),'GH':'GHA','TZ':_0x2ad72a(0xfb),'UG':_0x2ad72a(0x12f),'ZW':'ZWE','ZM':'ZMB','MW':_0x2ad72a(0x154),'MZ':_0x2ad72a(0x161),'MG':_0x2ad72a(0x158),'MU':_0x2ad72a(0x138),'SC':_0x2ad72a(0x14f),'RE':_0x2ad72a(0x13c),'TR':_0x2ad72a(0xd8),'IR':_0x2ad72a(0x111),'IQ':_0x2ad72a(0x13d),'SA':_0x2ad72a(0xd1),'AE':_0x2ad72a(0x15d),'KW':_0x2ad72a(0x128),'QA':_0x2ad72a(0xdd),'BH':_0x2ad72a(0x14d),'OM':'OMN','YE':_0x2ad72a(0x11d),'JO':'JOR','LB':'LBN','SY':'SYR','IL':_0x2ad72a(0xcf),'PS':'PSE','KR':_0x2ad72a(0x102),'KP':_0x2ad72a(0xff),'TH':_0x2ad72a(0x148),'VN':_0x2ad72a(0xf0),'MY':_0x2ad72a(0x12e),'SG':'SGP','ID':_0x2ad72a(0xce),'PH':_0x2ad72a(0x125),'LA':_0x2ad72a(0xea),'KH':_0x2ad72a(0x103),'MM':_0x2ad72a(0x137),'BD':_0x2ad72a(0x15b),'LK':_0x2ad72a(0x141),'NP':_0x2ad72a(0xee),'BT':_0x2ad72a(0xfa),'MV':_0x2ad72a(0xf9),'AF':'AFG','PK':'PAK','MN':_0x2ad72a(0x13f)},_0x5c2963=_0xfabc68[_0x27020e[_0x2ad72a(0xd4)]()];if(!_0x5c2963)return console[_0x2ad72a(0x116)](_0x2ad72a(0x11e)+_0x27020e+_0x2ad72a(0x152)),_0x2ad72a(0x15f);return _0x5c2963;}async[a62_0x463ba1(0x118)](_0x513914){const _0x15c5d5=a62_0x463ba1;try{const {orderId:_0x14f584,amount:_0x346420,currency:_0x11352a,firstName:_0x42eb0b,lastName:_0x4deae2,email:_0xa519fc,customerIp:_0x5e2b06,customerCountry:_0x535232,successUrl:_0x494a40,failureUrl:_0x31302d}=_0x513914;console['log'](_0x15c5d5(0x168)),console[_0x15c5d5(0xe4)]('Order\x20ID:',_0x14f584),console['log'](_0x15c5d5(0x15e),_0x346420,_0x11352a),console[_0x15c5d5(0xe4)](_0x15c5d5(0x13b),_0x42eb0b+'\x20'+_0x4deae2),console[_0x15c5d5(0xe4)]('Email:',_0xa519fc),console[_0x15c5d5(0xe4)](_0x15c5d5(0x127),_0x5e2b06),console[_0x15c5d5(0xe4)]('Customer\x20Country\x20(2-letter):',_0x535232);const _0xd65b37=this[_0x15c5d5(0x136)](_0x535232);console[_0x15c5d5(0xe4)]('Customer\x20Country\x20(3-letter):',_0xd65b37);const _0x3c5d9e={'sub_method':_0x15c5d5(0x146),'currency':_0x11352a[_0x15c5d5(0xd4)](),'amount':_0x346420,'callback_url':_0x15c5d5(0x114),'client_merchant_id':this['CLIENT_MERCHANT_ID'],'client_transaction_id':_0x14f584,'transaction_description':_0x14f584,'customer':{'ip':_0x5e2b06,'email':_0xa519fc,'full_name':_0x42eb0b+'\x20'+_0x4deae2,'country':_0xd65b37},'success_redirect_url':_0x494a40,'error_redirect_url':_0x31302d};console[_0x15c5d5(0xe4)](_0x15c5d5(0x13e),JSON['stringify'](_0x3c5d9e,null,0x2));const _0x44bdd2=await fetch(this[_0x15c5d5(0xf2)]+_0x15c5d5(0x107),{'method':_0x15c5d5(0x130),'headers':{'Content-Type':_0x15c5d5(0x105),'User-Agent':_0x15c5d5(0x164)},'body':JSON[_0x15c5d5(0xdf)](_0x3c5d9e)}),_0x16a6f9=await _0x44bdd2[_0x15c5d5(0x155)]();console[_0x15c5d5(0xe4)]('ðŸ“¥\x20AmPay\x20raw\x20response:',_0x16a6f9);if(!_0x44bdd2['ok'])throw new Error(_0x15c5d5(0x113)+_0x44bdd2[_0x15c5d5(0x14e)]+_0x15c5d5(0x151)+_0x16a6f9);let _0x25bd8a;try{_0x25bd8a=JSON['parse'](_0x16a6f9);}catch(_0x44e6d6){throw new Error(_0x15c5d5(0x144)+_0x16a6f9);}console['log'](_0x15c5d5(0x12b),JSON[_0x15c5d5(0xdf)](_0x25bd8a,null,0x2));if(!_0x25bd8a[_0x15c5d5(0x10c)])throw new Error(_0x15c5d5(0xe5)+(_0x25bd8a[_0x15c5d5(0xfd)]||_0x25bd8a[_0x15c5d5(0xdc)]||_0x15c5d5(0xeb)));const _0x1d7f5f=_0x25bd8a[_0x15c5d5(0x10c)],_0x3d1e3d=_0x25bd8a['system_id'],_0x5e3dc0=_0x25bd8a['tracker_id'];return console[_0x15c5d5(0xe4)](_0x15c5d5(0xf3)),console[_0x15c5d5(0xe4)](_0x15c5d5(0x163),_0x1d7f5f),console[_0x15c5d5(0xe4)]('System\x20ID:',_0x3d1e3d),console[_0x15c5d5(0xe4)]('Tracker\x20ID:',_0x5e3dc0),console[_0x15c5d5(0xe4)](_0x15c5d5(0xe1),_0x25bd8a['status']),console[_0x15c5d5(0xe4)](_0x15c5d5(0xef)),{'gateway_payment_id':_0x3d1e3d||_0x5e3dc0||_0x14f584,'payment_url':_0x1d7f5f||'','transaction_id':_0x3d1e3d};}catch(_0x1d5e59){console[_0x15c5d5(0xd5)](_0x15c5d5(0xda),_0x1d5e59),console['log'](_0x15c5d5(0xe3));throw _0x1d5e59;}}async[a62_0x463ba1(0xcd)](){const _0x4bf6dc=a62_0x463ba1;try{const _0x1b43b6=await fetch(this['apiUrl']+_0x4bf6dc(0x135),{'method':_0x4bf6dc(0x10b),'headers':{'Content-Type':_0x4bf6dc(0x105),'User-Agent':_0x4bf6dc(0x164)}});return _0x1b43b6&&_0x1b43b6[_0x4bf6dc(0x14e)]===0xc8?!![]:![];}catch(_0x25fe6d){return console[_0x4bf6dc(0xd5)]('âŒ\x20AmPay\x20health\x20check\x20failed:',_0x25fe6d),![];}}async['processWebhook'](_0x1b4ae4){const _0x3b30db=a62_0x463ba1;console[_0x3b30db(0xe4)]('===\x20Processing\x20AmPay\x20webhook\x20==='),console['log'](_0x3b30db(0xf1)),console['log']('Webhook\x20data:',_0x1b4ae4),console[_0x3b30db(0xe4)](_0x3b30db(0x10e),typeof _0x1b4ae4),console[_0x3b30db(0xe4)](_0x3b30db(0x145));_0x1b4ae4&&typeof _0x1b4ae4==='object'&&Object[_0x3b30db(0x149)](_0x1b4ae4)['forEach'](_0x2c63b3=>{const _0x4df186=_0x3b30db;console[_0x4df186(0xe4)]('\x20\x20'+_0x2c63b3+':\x20'+_0x1b4ae4[_0x2c63b3]+'\x20('+typeof _0x1b4ae4[_0x2c63b3]+')');});let _0x16a80f=_0x3b30db(0xed);const _0x14b681=_0x1b4ae4['client_transaction_id']||_0x1b4ae4[_0x3b30db(0xf7)]||_0x1b4ae4['tracker_id']||'';return console[_0x3b30db(0xe4)](_0x3b30db(0x101)+_0x14b681),console[_0x3b30db(0xe4)](_0x3b30db(0x15c)+_0x16a80f),!_0x14b681&&(console[_0x3b30db(0xd5)](_0x3b30db(0xf8)),console[_0x3b30db(0xd5)](_0x3b30db(0x110))),{'paymentId':_0x14b681,'status':_0x16a80f,'amount':_0x1b4ae4['amount'],'currency':_0x1b4ae4[_0x3b30db(0x106)]};}}function a62_0x1716(_0x259aaa,_0x7a752f){_0x259aaa=_0x259aaa-0xcd;const _0x1e94ab=a62_0x1e94();let _0x1716d2=_0x1e94ab[_0x259aaa];return _0x1716d2;}exports[a62_0x463ba1(0x131)]=AmPayService,exports['ampayService']=new AmPayService();