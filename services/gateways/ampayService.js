'use strict';const a42_0x4c8d03=a42_0x4169;(function(_0x3c8c71,_0x1256fe){const _0x1831f2=a42_0x4169,_0x585552=_0x3c8c71();while(!![]){try{const _0x1a4464=parseInt(_0x1831f2(0x1d5))/0x1+-parseInt(_0x1831f2(0x1b8))/0x2*(-parseInt(_0x1831f2(0x1f3))/0x3)+-parseInt(_0x1831f2(0x1d1))/0x4+parseInt(_0x1831f2(0x1ea))/0x5+parseInt(_0x1831f2(0x1b0))/0x6*(-parseInt(_0x1831f2(0x1f0))/0x7)+-parseInt(_0x1831f2(0x1ce))/0x8+parseInt(_0x1831f2(0x171))/0x9;if(_0x1a4464===_0x1256fe)break;else _0x585552['push'](_0x585552['shift']());}catch(_0x5e7564){_0x585552['push'](_0x585552['shift']());}}}(a42_0x30e0,0x59574));function a42_0x4169(_0xf98f60,_0x4170ea){const _0x30e069=a42_0x30e0();return a42_0x4169=function(_0x41692e,_0x4e3f45){_0x41692e=_0x41692e-0x158;let _0x58dc57=_0x30e069[_0x41692e];return _0x58dc57;},a42_0x4169(_0xf98f60,_0x4170ea);}Object[a42_0x4c8d03(0x174)](exports,a42_0x4c8d03(0x168),{'value':!![]}),exports[a42_0x4c8d03(0x1a1)]=exports[a42_0x4c8d03(0x1d6)]=void 0x0;class AmPayService{constructor(){const _0xa0f717=a42_0x4c8d03;this[_0xa0f717(0x184)]='TRAFFER',this[_0xa0f717(0x191)]='58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda',this[_0xa0f717(0x161)]=_0xa0f717(0x173),this[_0xa0f717(0x1fe)]=_0xa0f717(0x1f2),console[_0xa0f717(0x1dc)](_0xa0f717(0x15f));}[a42_0x4c8d03(0x186)](_0x107c2b){const _0x51da1a=a42_0x4c8d03,_0x81db26={'AD':_0x51da1a(0x1e1),'AL':_0x51da1a(0x1e6),'AT':_0x51da1a(0x1be),'BA':_0x51da1a(0x1aa),'BE':_0x51da1a(0x159),'BG':'BGR','BY':_0x51da1a(0x1ec),'CH':_0x51da1a(0x1bb),'CY':_0x51da1a(0x1bc),'CZ':_0x51da1a(0x17e),'DE':'DEU','DK':_0x51da1a(0x177),'EE':'EST','ES':_0x51da1a(0x1ef),'FI':_0x51da1a(0x1a3),'FR':'FRA','GB':_0x51da1a(0x179),'GE':_0x51da1a(0x1ae),'GR':_0x51da1a(0x1bd),'HR':_0x51da1a(0x1b5),'HU':_0x51da1a(0x1f7),'IE':'IRL','IS':'ISL','IT':_0x51da1a(0x1c6),'LI':'LIE','LT':'LTU','LU':_0x51da1a(0x199),'LV':_0x51da1a(0x181),'MC':_0x51da1a(0x1ee),'MD':_0x51da1a(0x1ba),'ME':_0x51da1a(0x15d),'MK':_0x51da1a(0x1a4),'MT':_0x51da1a(0x187),'NL':_0x51da1a(0x198),'NO':_0x51da1a(0x1f8),'PL':'POL','PT':_0x51da1a(0x1eb),'RO':_0x51da1a(0x19b),'RS':'SRB','RU':'RUS','SE':_0x51da1a(0x1dd),'SI':_0x51da1a(0x17d),'SK':_0x51da1a(0x180),'SM':_0x51da1a(0x1d9),'UA':'UKR','VA':_0x51da1a(0x193),'XK':'XKX','AM':_0x51da1a(0x19d),'AZ':'AZE','KZ':_0x51da1a(0x18b),'KG':_0x51da1a(0x1a7),'TJ':'TJK','TM':_0x51da1a(0x1ed),'UZ':_0x51da1a(0x1b7),'US':_0x51da1a(0x189),'CA':_0x51da1a(0x1b9),'AU':_0x51da1a(0x1f4),'JP':'JPN','CN':_0x51da1a(0x1da),'IN':'IND','BR':_0x51da1a(0x1cf),'MX':_0x51da1a(0x16f),'AR':_0x51da1a(0x1fc),'CL':_0x51da1a(0x1f5),'PE':_0x51da1a(0x1cd),'CO':_0x51da1a(0x1a8),'VE':_0x51da1a(0x1de),'EC':'ECU','BO':_0x51da1a(0x17f),'PY':_0x51da1a(0x1e9),'UY':'URY','SR':_0x51da1a(0x1fb),'GY':_0x51da1a(0x1a0),'FK':_0x51da1a(0x183),'ZA':_0x51da1a(0x1c7),'EG':_0x51da1a(0x1e8),'NG':'NGA','KE':_0x51da1a(0x1e0),'GH':_0x51da1a(0x17b),'TZ':_0x51da1a(0x196),'UG':'UGA','ZW':_0x51da1a(0x1d4),'ZM':'ZMB','MW':_0x51da1a(0x19a),'MZ':_0x51da1a(0x1b4),'MG':_0x51da1a(0x1c0),'MU':_0x51da1a(0x170),'SC':_0x51da1a(0x16d),'RE':_0x51da1a(0x1f1),'TR':_0x51da1a(0x16e),'IR':_0x51da1a(0x1d2),'IQ':'IRQ','SA':_0x51da1a(0x1ac),'AE':_0x51da1a(0x1cc),'KW':_0x51da1a(0x1c5),'QA':'QAT','BH':_0x51da1a(0x165),'OM':_0x51da1a(0x190),'YE':_0x51da1a(0x167),'JO':_0x51da1a(0x1e4),'LB':_0x51da1a(0x1ff),'SY':_0x51da1a(0x18c),'IL':_0x51da1a(0x1fa),'PS':_0x51da1a(0x1ad),'KR':_0x51da1a(0x1c9),'KP':'PRK','TH':'THA','VN':_0x51da1a(0x1d8),'MY':_0x51da1a(0x1d7),'SG':_0x51da1a(0x1e2),'ID':_0x51da1a(0x1fd),'PH':_0x51da1a(0x1df),'LA':_0x51da1a(0x19e),'KH':'KHM','MM':_0x51da1a(0x176),'BD':'BGD','LK':_0x51da1a(0x188),'NP':'NPL','BT':_0x51da1a(0x16a),'MV':_0x51da1a(0x1a6),'AF':_0x51da1a(0x1b6),'PK':_0x51da1a(0x17c),'MN':_0x51da1a(0x158)},_0x208999=_0x81db26[_0x107c2b[_0x51da1a(0x175)]()];if(!_0x208999)return console[_0x51da1a(0x1e7)](_0x51da1a(0x162)+_0x107c2b+_0x51da1a(0x1b2)),'RUS';return _0x208999;}async['createPaymentLink'](_0x45911e){const _0x510109=a42_0x4c8d03;try{const {orderId:_0x167175,amount:_0x441fb1,currency:_0x5e18d0,firstName:_0x54be46,lastName:_0x525b11,email:_0xe5f9b4,customerIp:_0x22c241,customerCountry:_0x43aca8,successUrl:_0x58caec,failureUrl:_0xaef43c}=_0x45911e;console['log'](_0x510109(0x1c8)),console[_0x510109(0x1dc)](_0x510109(0x1cb),_0x167175),console[_0x510109(0x1dc)](_0x510109(0x19f),_0x441fb1,_0x5e18d0),console['log'](_0x510109(0x1ca),_0x54be46+'\x20'+_0x525b11),console[_0x510109(0x1dc)](_0x510109(0x192),_0xe5f9b4),console[_0x510109(0x1dc)](_0x510109(0x18f),_0x22c241),console[_0x510109(0x1dc)]('Customer\x20Country\x20(2-letter):',_0x43aca8);const _0x50b6de=this['convert2LetterTo3LetterCountryCode'](_0x43aca8);console[_0x510109(0x1dc)](_0x510109(0x18e),_0x50b6de);const _0x5aee47={'sub_method':_0x510109(0x15e),'currency':_0x5e18d0[_0x510109(0x175)](),'amount':_0x441fb1,'callback_url':_0x510109(0x172),'client_merchant_id':this[_0x510109(0x184)],'client_transaction_id':_0x167175,'transaction_description':_0x167175,'customer':{'ip':_0x22c241,'email':_0xe5f9b4,'full_name':_0x54be46+'\x20'+_0x525b11,'country':_0x50b6de},'success_redirect_url':_0x58caec,'error_redirect_url':_0xaef43c};console['log'](_0x510109(0x18a),JSON[_0x510109(0x182)](_0x5aee47,null,0x2));const _0x1b6857=await fetch(this[_0x510109(0x1fe)]+_0x510109(0x1c3),{'method':_0x510109(0x163),'headers':{'Content-Type':_0x510109(0x197),'User-Agent':_0x510109(0x1e3)},'body':JSON['stringify'](_0x5aee47)}),_0x134332=await _0x1b6857['text']();console[_0x510109(0x1dc)](_0x510109(0x1d3),_0x134332);if(!_0x1b6857['ok'])throw new Error(_0x510109(0x15b)+_0x1b6857[_0x510109(0x1f9)]+'\x20-\x20'+_0x134332);let _0x290eaf;try{_0x290eaf=JSON['parse'](_0x134332);}catch(_0x587e26){throw new Error(_0x510109(0x1a2)+_0x134332);}console[_0x510109(0x1dc)](_0x510109(0x1c1),JSON[_0x510109(0x182)](_0x290eaf,null,0x2));if(!_0x290eaf[_0x510109(0x1e5)])throw new Error(_0x510109(0x178)+(_0x290eaf['error_message']||_0x290eaf[_0x510109(0x16c)]||_0x510109(0x185)));const _0x5ddb81=_0x290eaf[_0x510109(0x1e5)],_0x2de1c6=_0x290eaf[_0x510109(0x1f6)],_0x3f2138=_0x290eaf['tracker_id'];return console[_0x510109(0x1dc)](_0x510109(0x1db)),console[_0x510109(0x1dc)]('Payment\x20URL:',_0x5ddb81),console[_0x510109(0x1dc)](_0x510109(0x164),_0x2de1c6),console['log'](_0x510109(0x195),_0x3f2138),console[_0x510109(0x1dc)](_0x510109(0x169),_0x290eaf[_0x510109(0x1f9)]),console[_0x510109(0x1dc)](_0x510109(0x1b3)),{'gateway_payment_id':_0x2de1c6||_0x3f2138||_0x167175,'payment_url':_0x5ddb81||'','transaction_id':_0x2de1c6};}catch(_0x4942b5){console[_0x510109(0x19c)]('‚ùå\x20AmPay\x20payment\x20creation\x20failed:',_0x4942b5),console[_0x510109(0x1dc)]('üìù\x20Logging\x20AmPay\x20payment\x20creation\x20failure...');throw _0x4942b5;}}async[a42_0x4c8d03(0x160)](){const _0x265573=a42_0x4c8d03;try{const _0x4c89c2=await fetch(this['apiUrl']+_0x265573(0x1a5),{'method':_0x265573(0x15c),'headers':{'Content-Type':_0x265573(0x197),'User-Agent':'TrapayAPI/1.0'}});return _0x4c89c2&&_0x4c89c2[_0x265573(0x1f9)]===0xc8?!![]:![];}catch(_0x386f50){return console[_0x265573(0x19c)](_0x265573(0x1a9),_0x386f50),![];}}async[a42_0x4c8d03(0x1bf)](_0x2b5310){const _0x5c7726=a42_0x4c8d03;console[_0x5c7726(0x1dc)](_0x5c7726(0x18d)),console['log'](_0x5c7726(0x1af)),console['log']('Webhook\x20data:',_0x2b5310),console[_0x5c7726(0x1dc)](_0x5c7726(0x166),typeof _0x2b5310),console[_0x5c7726(0x1dc)](_0x5c7726(0x1c4));_0x2b5310&&typeof _0x2b5310===_0x5c7726(0x1ab)&&Object[_0x5c7726(0x1d0)](_0x2b5310)['forEach'](_0x44bf1a=>{console['log']('\x20\x20'+_0x44bf1a+':\x20'+_0x2b5310[_0x44bf1a]+'\x20('+typeof _0x2b5310[_0x44bf1a]+')');});let _0x42f198=_0x5c7726(0x17a);const _0x2ad9f1=_0x2b5310[_0x5c7726(0x194)]||_0x2b5310['system_id']||_0x2b5310[_0x5c7726(0x16b)]||'';return console[_0x5c7726(0x1dc)](_0x5c7726(0x15a)+_0x2ad9f1),console[_0x5c7726(0x1dc)]('Forced\x20status\x20(webhook\x20disabled):\x20'+_0x42f198),!_0x2ad9f1&&(console[_0x5c7726(0x19c)]('No\x20payment\x20ID\x20found\x20in\x20webhook\x20data'),console[_0x5c7726(0x19c)]('Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id')),{'paymentId':_0x2ad9f1,'status':_0x42f198,'amount':_0x2b5310[_0x5c7726(0x1b1)],'currency':_0x2b5310[_0x5c7726(0x1c2)]};}}function a42_0x30e0(){const _0x4c0bef=['warn','EGY','PRY','1403490aAxJba','PRT','BLR','TKM','MCO','ESP','389900XROEpp','REU','https://traffer.uk/gateway/ampay/','7803bdwUnu','AUS','CHL','system_id','HUN','NOR','status','ISR','SUR','ARG','IDN','apiUrl','LBN','MNG','BEL','Extracted\x20payment\x20ID:\x20','AmPay\x20API\x20error:\x20HTTP\x20','GET','MNE','GAM','üá¶üá≤\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing','healthCheck','API_PRIVATE_KEY','‚ö†Ô∏è\x20Unknown\x20country\x20code:\x20','POST','System\x20ID:','BHR','Webhook\x20data\x20type:','YEM','__esModule','Status:','BTN','tracker_id','message','SYC','TUR','MEX','MUS','4683951adUuqM','https://traffer.uk/gateway/ampay/webhook.php','a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815','defineProperty','toUpperCase','MMR','DNK','AmPay\x20payment\x20creation\x20failed:\x20','GBR','PENDING','GHA','PAK','SVN','CZE','BOL','SVK','LVA','stringify','FLK','CLIENT_MERCHANT_ID','Unknown\x20error','convert2LetterTo3LetterCountryCode','MLT','LKA','USA','üì§\x20AmPay\x20request\x20body:','KAZ','SYR','===\x20Processing\x20AmPay\x20webhook\x20===','Customer\x20Country\x20(3-letter):','Customer\x20IP:','OMN','API_PUBLIC_KEY','Email:','VAT','client_transaction_id','Tracker\x20ID:','TZA','application/json','NLD','LUX','MWI','ROU','error','ARM','LAO','Amount:','GUY','ampayService','Invalid\x20JSON\x20response\x20from\x20AmPay:\x20','FIN','MKD','health.php','MDV','KGZ','COL','‚ùå\x20AmPay\x20health\x20check\x20failed:','BIH','object','SAU','PSE','GEO','‚ö†Ô∏è\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status','24OPLsrM','amount',',\x20using\x20RUS\x20as\x20fallback','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20event...','MOZ','HRV','AFG','UZB','548YeOOuU','CAN','MDA','CHE','CYP','GRC','AUT','processWebhook','MDG','üìä\x20AmPay\x20response\x20data:','currency','ampay.php','Available\x20fields:','KWT','ITA','ZAF','üá¶üá≤\x20Creating\x20AmPay\x20payment\x20link...','KOR','Customer:','Order\x20ID:','ARE','PER','4495312FFsyPk','BRA','keys','2044120YbbzxV','IRN','üì•\x20AmPay\x20raw\x20response:','ZWE','147873CitzTt','AmPayService','MYS','VNM','SMR','CHN','‚úÖ\x20AmPay\x20payment\x20link\x20created\x20successfully','log','SWE','VEN','PHL','KEN','AND','SGP','TrapayAPI/1.0','JOR','redirect_url','ALB'];a42_0x30e0=function(){return _0x4c0bef;};return a42_0x30e0();}exports[a42_0x4c8d03(0x1d6)]=AmPayService,exports['ampayService']=new AmPayService();