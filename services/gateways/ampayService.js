'use strict';const a54_0x2c32c0=a54_0x171a;(function(_0x167a55,_0x45db8f){const _0x1b4f07=a54_0x171a,_0x35e12d=_0x167a55();while(!![]){try{const _0x2b04b6=parseInt(_0x1b4f07(0x12e))/0x1+-parseInt(_0x1b4f07(0xd7))/0x2+-parseInt(_0x1b4f07(0xaa))/0x3*(parseInt(_0x1b4f07(0x11d))/0x4)+parseInt(_0x1b4f07(0xd9))/0x5*(parseInt(_0x1b4f07(0xfb))/0x6)+-parseInt(_0x1b4f07(0xb6))/0x7+-parseInt(_0x1b4f07(0xce))/0x8*(-parseInt(_0x1b4f07(0x103))/0x9)+-parseInt(_0x1b4f07(0x12c))/0xa*(-parseInt(_0x1b4f07(0x116))/0xb);if(_0x2b04b6===_0x45db8f)break;else _0x35e12d['push'](_0x35e12d['shift']());}catch(_0x218279){_0x35e12d['push'](_0x35e12d['shift']());}}}(a54_0x1765,0xc6b2d));Object[a54_0x2c32c0(0xe3)](exports,a54_0x2c32c0(0xaf),{'value':!![]}),exports[a54_0x2c32c0(0xa1)]=exports['AmPayService']=void 0x0;function a54_0x1765(){const _0x5b87bf=['MEX','TJK','8780136fLjdSg','PAK','IDN','GUY','MCO','SYC','AmPay\x20API\x20error:\x20HTTP\x20','Customer\x20Country\x20(2-letter):','currency','2251446lEkMgO','YEM','4807245KvBqwV','https://traffer.uk/gateway/ampay/','AmPayService','ARE','ARG','System\x20ID:','MWI','PER','IRN','AFG','defineProperty','ALB','ðŸ“Š\x20AmPay\x20response\x20data:','ðŸ‡¦ðŸ‡²\x20Creating\x20AmPay\x20payment\x20link...','Customer\x20IP:','API_PRIVATE_KEY','NPL','UKR','UZB','ISL','SYR','Invalid\x20JSON\x20response\x20from\x20AmPay:\x20','GEO','GRC','application/json','JOR','FLK','FIN','MNG','Customer\x20Country\x20(3-letter):','SUR','ECU','SMR','PRK','6tvKQKJ','SAU','MUS','ðŸ“\x20Logging\x20AmPay\x20payment\x20creation\x20event...','BRA','BIH','CAN','HUN','9iiCVTA','FRA','object','https://traffer.uk/gateway/ampay/webhook.php','redirect_url','Status:','AUS','ðŸ“¤\x20AmPay\x20request\x20body:','CLIENT_MERCHANT_ID','ZWE','log','DNK','Available\x20fields:','createPaymentLink','ISR','OMN','\x20-\x20','LUX','SGP','1040149gyvGPl','AmPay\x20payment\x20creation\x20failed:\x20','processWebhook','Amount:','LAO','VEN','PSE','636DWznAB','ðŸ‡¦ðŸ‡²\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing','THA','tracker_id','VAT','REU','ampay.php','Tracker\x20ID:','convert2LetterTo3LetterCountryCode','ARM','KGZ','TZA','IRL','Order\x20ID:','parse','130iiCBsc','MDA','538252vxQtyM','VNM','Customer:','stringify','Extracted\x20payment\x20ID:\x20','forEach','MYS','AZE','API_PUBLIC_KEY','MKD','Webhook\x20data:','CHE','apiUrl','MNE','ZAF','BTN','UGA','LKA','KOR','âš ï¸\x20Unknown\x20country\x20code:\x20','system_id',',\x20using\x20RUS\x20as\x20fallback','SVN','Forced\x20status\x20(webhook\x20disabled):\x20','error_message','HRV','client_transaction_id','CZE','IRQ','ampayService','message','ITA','DEU','BGR','Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id','COL','CHN','BEL','15213BTefsv','error','RUS','QAT','BLR','__esModule','TrapayAPI/1.0','PRT','SRB','LBN','NOR','JPN','7564228zwiZLH','SVK','keys','toUpperCase','ðŸ“\x20Logging\x20AmPay\x20payment\x20creation\x20failure...','EST','ZMB','MDG','TUR','XKX','status','Payment\x20URL:','LTU','GET','Webhook\x20data\x20type:','CHL','âŒ\x20AmPay\x20health\x20check\x20failed:','IND','MOZ','POL','âœ…\x20AmPay\x20payment\x20link\x20created\x20successfully','PENDING'];a54_0x1765=function(){return _0x5b87bf;};return a54_0x1765();}class AmPayService{constructor(){const _0x2e55cd=a54_0x2c32c0;this[_0x2e55cd(0x10b)]='TRAFFER',this[_0x2e55cd(0x136)]='58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda',this[_0x2e55cd(0xe8)]='a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815',this[_0x2e55cd(0x13a)]=_0x2e55cd(0xda),console['log'](_0x2e55cd(0x11e));}[a54_0x2c32c0(0x125)](_0x2ce490){const _0x222329=a54_0x2c32c0,_0x465cde={'AD':'AND','AL':_0x222329(0xe4),'AT':'AUT','BA':_0x222329(0x100),'BE':_0x222329(0xa9),'BG':_0x222329(0xa5),'BY':_0x222329(0xae),'CH':_0x222329(0x139),'CY':'CYP','CZ':_0x222329(0x9f),'DE':_0x222329(0xa4),'DK':_0x222329(0x10e),'EE':_0x222329(0xbb),'ES':'ESP','FI':_0x222329(0xf4),'FR':_0x222329(0x104),'GB':'GBR','GE':_0x222329(0xef),'GR':_0x222329(0xf0),'HR':_0x222329(0x9d),'HU':_0x222329(0x102),'IE':_0x222329(0x129),'IS':_0x222329(0xec),'IT':_0x222329(0xa3),'LI':'LIE','LT':_0x222329(0xc2),'LU':_0x222329(0x114),'LV':'LVA','MC':_0x222329(0xd2),'MD':_0x222329(0x12d),'ME':_0x222329(0x13b),'MK':_0x222329(0x137),'MT':'MLT','NL':'NLD','NO':_0x222329(0xb4),'PL':_0x222329(0xc9),'PT':_0x222329(0xb1),'RO':'ROU','RS':_0x222329(0xb2),'RU':'RUS','SE':'SWE','SI':_0x222329(0x9a),'SK':_0x222329(0xb7),'SM':_0x222329(0xf9),'UA':_0x222329(0xea),'VA':_0x222329(0x121),'XK':_0x222329(0xbf),'AM':_0x222329(0x126),'AZ':_0x222329(0x135),'KZ':'KAZ','KG':_0x222329(0x127),'TJ':_0x222329(0xcd),'TM':'TKM','UZ':_0x222329(0xeb),'US':'USA','CA':_0x222329(0x101),'AU':_0x222329(0x109),'JP':_0x222329(0xb5),'CN':_0x222329(0xa8),'IN':_0x222329(0xc7),'BR':_0x222329(0xff),'MX':_0x222329(0xcc),'AR':_0x222329(0xdd),'CL':_0x222329(0xc5),'PE':_0x222329(0xe0),'CO':_0x222329(0xa7),'VE':_0x222329(0x11b),'EC':_0x222329(0xf8),'BO':'BOL','PY':'PRY','UY':'URY','SR':_0x222329(0xf7),'GY':_0x222329(0xd1),'FK':_0x222329(0xf3),'ZA':_0x222329(0x13c),'EG':'EGY','NG':'NGA','KE':'KEN','GH':'GHA','TZ':_0x222329(0x128),'UG':_0x222329(0x13e),'ZW':_0x222329(0x10c),'ZM':_0x222329(0xbc),'MW':_0x222329(0xdf),'MZ':_0x222329(0xc8),'MG':_0x222329(0xbd),'MU':_0x222329(0xfd),'SC':_0x222329(0xd3),'RE':_0x222329(0x122),'TR':_0x222329(0xbe),'IR':_0x222329(0xe1),'IQ':_0x222329(0xa0),'SA':_0x222329(0xfc),'AE':_0x222329(0xdc),'KW':'KWT','QA':_0x222329(0xad),'BH':'BHR','OM':_0x222329(0x112),'YE':_0x222329(0xd8),'JO':_0x222329(0xf2),'LB':_0x222329(0xb3),'SY':_0x222329(0xed),'IL':_0x222329(0x111),'PS':_0x222329(0x11c),'KR':_0x222329(0x140),'KP':_0x222329(0xfa),'TH':_0x222329(0x11f),'VN':_0x222329(0x12f),'MY':_0x222329(0x134),'SG':_0x222329(0x115),'ID':_0x222329(0xd0),'PH':'PHL','LA':_0x222329(0x11a),'KH':'KHM','MM':'MMR','BD':'BGD','LK':_0x222329(0x13f),'NP':_0x222329(0xe9),'BT':_0x222329(0x13d),'MV':'MDV','AF':_0x222329(0xe2),'PK':_0x222329(0xcf),'MN':_0x222329(0xf5)},_0x2cf40b=_0x465cde[_0x2ce490[_0x222329(0xb9)]()];if(!_0x2cf40b)return console['warn'](_0x222329(0x141)+_0x2ce490+_0x222329(0x143)),_0x222329(0xac);return _0x2cf40b;}async[a54_0x2c32c0(0x110)](_0x5dd9ba){const _0x158a79=a54_0x2c32c0;try{const {orderId:_0x38d300,amount:_0x58750b,currency:_0x51e72a,firstName:_0x27a9c6,lastName:_0x33609a,email:_0x381d82,customerIp:_0x218831,customerCountry:_0x5a9ecd,successUrl:_0x4f127d,failureUrl:_0x43d6a6}=_0x5dd9ba;console[_0x158a79(0x10d)](_0x158a79(0xe6)),console['log'](_0x158a79(0x12a),_0x38d300),console[_0x158a79(0x10d)](_0x158a79(0x119),_0x58750b,_0x51e72a),console[_0x158a79(0x10d)](_0x158a79(0x130),_0x27a9c6+'\x20'+_0x33609a),console[_0x158a79(0x10d)]('Email:',_0x381d82),console[_0x158a79(0x10d)](_0x158a79(0xe7),_0x218831),console['log'](_0x158a79(0xd5),_0x5a9ecd);const _0x396d9f=this[_0x158a79(0x125)](_0x5a9ecd);console[_0x158a79(0x10d)](_0x158a79(0xf6),_0x396d9f);const _0x19ece4={'sub_method':'GAM','currency':_0x51e72a[_0x158a79(0xb9)](),'amount':_0x58750b,'callback_url':_0x158a79(0x106),'client_merchant_id':this[_0x158a79(0x10b)],'client_transaction_id':_0x38d300,'transaction_description':_0x38d300,'customer':{'ip':_0x218831,'email':_0x381d82,'full_name':_0x27a9c6+'\x20'+_0x33609a,'country':_0x396d9f},'success_redirect_url':_0x4f127d,'error_redirect_url':_0x43d6a6};console[_0x158a79(0x10d)](_0x158a79(0x10a),JSON[_0x158a79(0x131)](_0x19ece4,null,0x2));const _0x3e0df7=await fetch(this[_0x158a79(0x13a)]+_0x158a79(0x123),{'method':'POST','headers':{'Content-Type':'application/json','User-Agent':_0x158a79(0xb0)},'body':JSON[_0x158a79(0x131)](_0x19ece4)}),_0x1f82a7=await _0x3e0df7['text']();console[_0x158a79(0x10d)]('ðŸ“¥\x20AmPay\x20raw\x20response:',_0x1f82a7);if(!_0x3e0df7['ok'])throw new Error(_0x158a79(0xd4)+_0x3e0df7[_0x158a79(0xc0)]+_0x158a79(0x113)+_0x1f82a7);let _0x48eba0;try{_0x48eba0=JSON[_0x158a79(0x12b)](_0x1f82a7);}catch(_0x720f3b){throw new Error(_0x158a79(0xee)+_0x1f82a7);}console[_0x158a79(0x10d)](_0x158a79(0xe5),JSON['stringify'](_0x48eba0,null,0x2));if(!_0x48eba0[_0x158a79(0x107)])throw new Error(_0x158a79(0x117)+(_0x48eba0[_0x158a79(0x9c)]||_0x48eba0[_0x158a79(0xa2)]||'Unknown\x20error'));const _0x5717a7=_0x48eba0['redirect_url'],_0x163757=_0x48eba0['system_id'],_0xd75d38=_0x48eba0[_0x158a79(0x120)];return console['log'](_0x158a79(0xca)),console[_0x158a79(0x10d)](_0x158a79(0xc1),_0x5717a7),console['log'](_0x158a79(0xde),_0x163757),console[_0x158a79(0x10d)](_0x158a79(0x124),_0xd75d38),console[_0x158a79(0x10d)](_0x158a79(0x108),_0x48eba0['status']),console[_0x158a79(0x10d)](_0x158a79(0xfe)),{'gateway_payment_id':_0x163757||_0xd75d38||_0x38d300,'payment_url':_0x5717a7||'','transaction_id':_0x163757};}catch(_0x4b5808){console[_0x158a79(0xab)]('âŒ\x20AmPay\x20payment\x20creation\x20failed:',_0x4b5808),console[_0x158a79(0x10d)](_0x158a79(0xba));throw _0x4b5808;}}async['healthCheck'](){const _0x473bdf=a54_0x2c32c0;try{const _0x3b087d=await fetch(this[_0x473bdf(0x13a)]+'health.php',{'method':_0x473bdf(0xc3),'headers':{'Content-Type':_0x473bdf(0xf1),'User-Agent':_0x473bdf(0xb0)}});return _0x3b087d&&_0x3b087d[_0x473bdf(0xc0)]===0xc8?!![]:![];}catch(_0x2dfc20){return console[_0x473bdf(0xab)](_0x473bdf(0xc6),_0x2dfc20),![];}}async[a54_0x2c32c0(0x118)](_0x4be94d){const _0x2ec813=a54_0x2c32c0;console[_0x2ec813(0x10d)]('===\x20Processing\x20AmPay\x20webhook\x20==='),console[_0x2ec813(0x10d)]('âš ï¸\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status'),console[_0x2ec813(0x10d)](_0x2ec813(0x138),_0x4be94d),console['log'](_0x2ec813(0xc4),typeof _0x4be94d),console[_0x2ec813(0x10d)](_0x2ec813(0x10f));_0x4be94d&&typeof _0x4be94d===_0x2ec813(0x105)&&Object[_0x2ec813(0xb8)](_0x4be94d)[_0x2ec813(0x133)](_0x5886b8=>{const _0x455019=_0x2ec813;console[_0x455019(0x10d)]('\x20\x20'+_0x5886b8+':\x20'+_0x4be94d[_0x5886b8]+'\x20('+typeof _0x4be94d[_0x5886b8]+')');});let _0x4b2368=_0x2ec813(0xcb);const _0x4fc2b5=_0x4be94d[_0x2ec813(0x9e)]||_0x4be94d[_0x2ec813(0x142)]||_0x4be94d['tracker_id']||'';return console[_0x2ec813(0x10d)](_0x2ec813(0x132)+_0x4fc2b5),console[_0x2ec813(0x10d)](_0x2ec813(0x9b)+_0x4b2368),!_0x4fc2b5&&(console[_0x2ec813(0xab)]('No\x20payment\x20ID\x20found\x20in\x20webhook\x20data'),console['error'](_0x2ec813(0xa6))),{'paymentId':_0x4fc2b5,'status':_0x4b2368,'amount':_0x4be94d['amount'],'currency':_0x4be94d[_0x2ec813(0xd6)]};}}function a54_0x171a(_0x4f6b4a,_0x3ea37a){_0x4f6b4a=_0x4f6b4a-0x9a;const _0x17659f=a54_0x1765();let _0x171a67=_0x17659f[_0x4f6b4a];return _0x171a67;}exports[a54_0x2c32c0(0xdb)]=AmPayService,exports[a54_0x2c32c0(0xa1)]=new AmPayService();