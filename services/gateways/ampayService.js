'use strict';const a44_0xff8dd=a44_0x5b21;(function(_0x4d9179,_0x38b2e5){const _0x163153=a44_0x5b21,_0x1366eb=_0x4d9179();while(!![]){try{const _0x528c18=parseInt(_0x163153(0xb1))/0x1+parseInt(_0x163153(0xe4))/0x2+-parseInt(_0x163153(0x129))/0x3*(parseInt(_0x163153(0xf4))/0x4)+parseInt(_0x163153(0xa4))/0x5*(-parseInt(_0x163153(0x114))/0x6)+parseInt(_0x163153(0x107))/0x7+-parseInt(_0x163153(0xbb))/0x8*(-parseInt(_0x163153(0xca))/0x9)+parseInt(_0x163153(0xef))/0xa;if(_0x528c18===_0x38b2e5)break;else _0x1366eb['push'](_0x1366eb['shift']());}catch(_0x2435b){_0x1366eb['push'](_0x1366eb['shift']());}}}(a44_0x1c67,0x9a223));function a44_0x1c67(){const _0x2edc62=['EGY','58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda','XKX','GAM','RUS','TUR','SYR',',\x20using\x20RUS\x20as\x20fallback','YEM','tracker_id','ampayService','Unknown\x20error','ARM','currency','VNM','5NiYFSm','API_PUBLIC_KEY','ISR','KOR','API_PRIVATE_KEY','Tracker\x20ID:','POL','Invalid\x20JSON\x20response\x20from\x20AmPay:\x20','BGD','ZWE','ampay.php','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20failure...','SMR','566253sICacC','LIE','https://traffer.uk/gateway/ampay/webhook.php','keys','error','GET','üì§\x20AmPay\x20request\x20body:','MNG','SWE','status','147848gPPhnT','MOZ','convert2LetterTo3LetterCountryCode','BLR','parse','SGP','‚ùå\x20AmPay\x20health\x20check\x20failed:','Customer:','NLD','stringify','EST','FRA','VEN','healthCheck','GRC','63nfTGfF','forEach','Payment\x20URL:','KAZ','NPL','ALB','amount','__esModule','CYP','MNE','redirect_url','POST','‚ùå\x20AmPay\x20payment\x20creation\x20failed:','createPaymentLink','REU','Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id','CLIENT_MERCHANT_ID','AmPay\x20API\x20error:\x20HTTP\x20','ITA','LKA','ECU','SUR','NOR','THA','ESP','LVA','1469174WcsQwT','KGZ','ROU','AFG','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20event...','IRN','AUS','NGA','BHR','CAN','VAT','8167860zvjITF','MDG','ARE','PSE','PRY','12GjEsjR','Webhook\x20data\x20type:','System\x20ID:','‚úÖ\x20AmPay\x20payment\x20link\x20created\x20successfully','Amount:','Customer\x20IP:','JOR','CHN','application/json','AmPayService','TKM','PRT','UGA','SRB','error_message','UZB','JPN','‚ö†Ô∏è\x20Unknown\x20country\x20code:\x20','FIN','2546313QRzzjQ','MLT','GHA','BTN','IRL','KEN','FLK','MWI','SVK','MDV','Customer\x20Country\x20(2-letter):','log','SVN','6102918ObrTqm','MMR','===\x20Processing\x20AmPay\x20webhook\x20===','processWebhook','PENDING','MUS','toUpperCase','MKD','LTU','Customer\x20Country\x20(3-letter):','defineProperty','AmPay\x20payment\x20creation\x20failed:\x20','BOL','MYS','GBR','BRA','No\x20payment\x20ID\x20found\x20in\x20webhook\x20data','AUT','CHE','TrapayAPI/1.0','MCO','962268onYDNU','health.php','üìä\x20AmPay\x20response\x20data:','TZA','IDN','LBN','MEX','PAK','GEO','KWT','client_transaction_id','GUY','HRV','KHM','PER','BIH','PRK','TRAFFER','ARG','https://traffer.uk/gateway/ampay/','PHL','USA','CHL','IRQ','LUX','HUN','apiUrl','message'];a44_0x1c67=function(){return _0x2edc62;};return a44_0x1c67();}function a44_0x5b21(_0x541a19,_0x267027){const _0x1c6729=a44_0x1c67();return a44_0x5b21=function(_0x5b21ec,_0xc16e0a){_0x5b21ec=_0x5b21ec-0x96;let _0x27f2b7=_0x1c6729[_0x5b21ec];return _0x27f2b7;},a44_0x5b21(_0x541a19,_0x267027);}Object[a44_0xff8dd(0x11e)](exports,a44_0xff8dd(0xd1),{'value':!![]}),exports[a44_0xff8dd(0x9f)]=exports['AmPayService']=void 0x0;class AmPayService{constructor(){const _0x1d251f=a44_0xff8dd;this[_0x1d251f(0xda)]=_0x1d251f(0x13a),this[_0x1d251f(0xa5)]=_0x1d251f(0x96),this[_0x1d251f(0xa8)]='a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815',this['apiUrl']=_0x1d251f(0x13c),console[_0x1d251f(0x112)]('üá¶üá≤\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing');}[a44_0xff8dd(0xbd)](_0x5363e5){const _0x1fb017=a44_0xff8dd,_0x2b618f={'AD':'AND','AL':_0x1fb017(0xcf),'AT':_0x1fb017(0x125),'BA':_0x1fb017(0x138),'BE':'BEL','BG':'BGR','BY':_0x1fb017(0xbe),'CH':_0x1fb017(0x126),'CY':_0x1fb017(0xd2),'CZ':'CZE','DE':'DEU','DK':'DNK','EE':_0x1fb017(0xc5),'ES':_0x1fb017(0xe2),'FI':_0x1fb017(0x106),'FR':_0x1fb017(0xc6),'GB':_0x1fb017(0x122),'GE':_0x1fb017(0x131),'GR':_0x1fb017(0xc9),'HR':_0x1fb017(0x135),'HU':_0x1fb017(0x142),'IE':_0x1fb017(0x10b),'IS':'ISL','IT':_0x1fb017(0xdc),'LI':_0x1fb017(0xb2),'LT':_0x1fb017(0x11c),'LU':_0x1fb017(0x141),'LV':_0x1fb017(0xe3),'MC':_0x1fb017(0x128),'MD':'MDA','ME':_0x1fb017(0xd3),'MK':_0x1fb017(0x11b),'MT':_0x1fb017(0x108),'NL':_0x1fb017(0xc3),'NO':_0x1fb017(0xe0),'PL':_0x1fb017(0xaa),'PT':_0x1fb017(0xff),'RO':_0x1fb017(0xe6),'RS':_0x1fb017(0x101),'RU':_0x1fb017(0x99),'SE':_0x1fb017(0xb9),'SI':_0x1fb017(0x113),'SK':_0x1fb017(0x10f),'SM':_0x1fb017(0xb0),'UA':'UKR','VA':_0x1fb017(0xee),'XK':_0x1fb017(0x97),'AM':_0x1fb017(0xa1),'AZ':'AZE','KZ':_0x1fb017(0xcd),'KG':_0x1fb017(0xe5),'TJ':'TJK','TM':_0x1fb017(0xfe),'UZ':_0x1fb017(0x103),'US':_0x1fb017(0x13e),'CA':_0x1fb017(0xed),'AU':_0x1fb017(0xea),'JP':_0x1fb017(0x104),'CN':_0x1fb017(0xfb),'IN':'IND','BR':_0x1fb017(0x123),'MX':_0x1fb017(0x12f),'AR':_0x1fb017(0x13b),'CL':_0x1fb017(0x13f),'PE':_0x1fb017(0x137),'CO':'COL','VE':_0x1fb017(0xc7),'EC':_0x1fb017(0xde),'BO':_0x1fb017(0x120),'PY':_0x1fb017(0xf3),'UY':'URY','SR':_0x1fb017(0xdf),'GY':_0x1fb017(0x134),'FK':_0x1fb017(0x10d),'ZA':'ZAF','EG':_0x1fb017(0x145),'NG':_0x1fb017(0xeb),'KE':_0x1fb017(0x10c),'GH':_0x1fb017(0x109),'TZ':_0x1fb017(0x12c),'UG':_0x1fb017(0x100),'ZW':_0x1fb017(0xad),'ZM':'ZMB','MW':_0x1fb017(0x10e),'MZ':_0x1fb017(0xbc),'MG':_0x1fb017(0xf0),'MU':_0x1fb017(0x119),'SC':'SYC','RE':_0x1fb017(0xd8),'TR':_0x1fb017(0x9a),'IR':_0x1fb017(0xe9),'IQ':_0x1fb017(0x140),'SA':'SAU','AE':_0x1fb017(0xf1),'KW':_0x1fb017(0x132),'QA':'QAT','BH':_0x1fb017(0xec),'OM':'OMN','YE':_0x1fb017(0x9d),'JO':_0x1fb017(0xfa),'LB':_0x1fb017(0x12e),'SY':_0x1fb017(0x9b),'IL':_0x1fb017(0xa6),'PS':_0x1fb017(0xf2),'KR':_0x1fb017(0xa7),'KP':_0x1fb017(0x139),'TH':_0x1fb017(0xe1),'VN':_0x1fb017(0xa3),'MY':_0x1fb017(0x121),'SG':_0x1fb017(0xc0),'ID':_0x1fb017(0x12d),'PH':_0x1fb017(0x13d),'LA':'LAO','KH':_0x1fb017(0x136),'MM':_0x1fb017(0x115),'BD':_0x1fb017(0xac),'LK':_0x1fb017(0xdd),'NP':_0x1fb017(0xce),'BT':_0x1fb017(0x10a),'MV':_0x1fb017(0x110),'AF':_0x1fb017(0xe7),'PK':_0x1fb017(0x130),'MN':_0x1fb017(0xb8)},_0x462424=_0x2b618f[_0x5363e5['toUpperCase']()];if(!_0x462424)return console['warn'](_0x1fb017(0x105)+_0x5363e5+_0x1fb017(0x9c)),_0x1fb017(0x99);return _0x462424;}async[a44_0xff8dd(0xd7)](_0x3069c3){const _0x33b3be=a44_0xff8dd;try{const {orderId:_0x1e54e6,amount:_0x48ae8b,currency:_0x3a10d7,firstName:_0x1f1e20,lastName:_0x462723,email:_0x4c6c70,customerIp:_0x1a42c7,customerCountry:_0x11000f,successUrl:_0x3ce5e8,failureUrl:_0x22efb6}=_0x3069c3;console[_0x33b3be(0x112)]('üá¶üá≤\x20Creating\x20AmPay\x20payment\x20link...'),console[_0x33b3be(0x112)]('Order\x20ID:',_0x1e54e6),console[_0x33b3be(0x112)](_0x33b3be(0xf8),_0x48ae8b,_0x3a10d7),console[_0x33b3be(0x112)](_0x33b3be(0xc2),_0x1f1e20+'\x20'+_0x462723),console['log']('Email:',_0x4c6c70),console[_0x33b3be(0x112)](_0x33b3be(0xf9),_0x1a42c7),console['log'](_0x33b3be(0x111),_0x11000f);const _0xcdf789=this['convert2LetterTo3LetterCountryCode'](_0x11000f);console[_0x33b3be(0x112)](_0x33b3be(0x11d),_0xcdf789);const _0x886982={'sub_method':_0x33b3be(0x98),'currency':_0x3a10d7[_0x33b3be(0x11a)](),'amount':_0x48ae8b,'callback_url':_0x33b3be(0xb3),'client_merchant_id':this[_0x33b3be(0xda)],'client_transaction_id':_0x1e54e6,'transaction_description':_0x1e54e6,'customer':{'ip':_0x1a42c7,'email':_0x4c6c70,'full_name':_0x1f1e20+'\x20'+_0x462723,'country':_0xcdf789},'success_redirect_url':_0x3ce5e8,'error_redirect_url':_0x22efb6};console[_0x33b3be(0x112)](_0x33b3be(0xb7),JSON['stringify'](_0x886982,null,0x2));const _0x10d6fe=await fetch(this[_0x33b3be(0x143)]+_0x33b3be(0xae),{'method':_0x33b3be(0xd5),'headers':{'Content-Type':'application/json','User-Agent':_0x33b3be(0x127)},'body':JSON['stringify'](_0x886982)}),_0x44bd81=await _0x10d6fe['text']();console['log']('üì•\x20AmPay\x20raw\x20response:',_0x44bd81);if(!_0x10d6fe['ok'])throw new Error(_0x33b3be(0xdb)+_0x10d6fe[_0x33b3be(0xba)]+'\x20-\x20'+_0x44bd81);let _0xe89feb;try{_0xe89feb=JSON[_0x33b3be(0xbf)](_0x44bd81);}catch(_0x404494){throw new Error(_0x33b3be(0xab)+_0x44bd81);}console['log'](_0x33b3be(0x12b),JSON[_0x33b3be(0xc4)](_0xe89feb,null,0x2));if(!_0xe89feb[_0x33b3be(0xd4)])throw new Error(_0x33b3be(0x11f)+(_0xe89feb[_0x33b3be(0x102)]||_0xe89feb[_0x33b3be(0x144)]||_0x33b3be(0xa0)));const _0x2a133d=_0xe89feb[_0x33b3be(0xd4)],_0x4f257d=_0xe89feb['system_id'],_0x287fd0=_0xe89feb['tracker_id'];return console[_0x33b3be(0x112)](_0x33b3be(0xf7)),console[_0x33b3be(0x112)](_0x33b3be(0xcc),_0x2a133d),console[_0x33b3be(0x112)](_0x33b3be(0xf6),_0x4f257d),console[_0x33b3be(0x112)](_0x33b3be(0xa9),_0x287fd0),console[_0x33b3be(0x112)]('Status:',_0xe89feb[_0x33b3be(0xba)]),console['log'](_0x33b3be(0xe8)),{'gateway_payment_id':_0x4f257d||_0x287fd0||_0x1e54e6,'payment_url':_0x2a133d||'','transaction_id':_0x4f257d};}catch(_0x41ed73){console[_0x33b3be(0xb5)](_0x33b3be(0xd6),_0x41ed73),console['log'](_0x33b3be(0xaf));throw _0x41ed73;}}async[a44_0xff8dd(0xc8)](){const _0x38962e=a44_0xff8dd;try{const _0x4db514=await fetch(this[_0x38962e(0x143)]+_0x38962e(0x12a),{'method':_0x38962e(0xb6),'headers':{'Content-Type':_0x38962e(0xfc),'User-Agent':_0x38962e(0x127)}});return _0x4db514&&_0x4db514[_0x38962e(0xba)]===0xc8?!![]:![];}catch(_0x3f39a1){return console[_0x38962e(0xb5)](_0x38962e(0xc1),_0x3f39a1),![];}}async[a44_0xff8dd(0x117)](_0x348251){const _0x1966f3=a44_0xff8dd;console[_0x1966f3(0x112)](_0x1966f3(0x116)),console['log']('‚ö†Ô∏è\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status'),console[_0x1966f3(0x112)]('Webhook\x20data:',_0x348251),console[_0x1966f3(0x112)](_0x1966f3(0xf5),typeof _0x348251),console[_0x1966f3(0x112)]('Available\x20fields:');_0x348251&&typeof _0x348251==='object'&&Object[_0x1966f3(0xb4)](_0x348251)[_0x1966f3(0xcb)](_0x45276b=>{const _0x4d32df=_0x1966f3;console[_0x4d32df(0x112)]('\x20\x20'+_0x45276b+':\x20'+_0x348251[_0x45276b]+'\x20('+typeof _0x348251[_0x45276b]+')');});let _0x202aad=_0x1966f3(0x118);const _0x1886c1=_0x348251[_0x1966f3(0x133)]||_0x348251['system_id']||_0x348251[_0x1966f3(0x9e)]||'';return console[_0x1966f3(0x112)]('Extracted\x20payment\x20ID:\x20'+_0x1886c1),console[_0x1966f3(0x112)]('Forced\x20status\x20(webhook\x20disabled):\x20'+_0x202aad),!_0x1886c1&&(console['error'](_0x1966f3(0x124)),console['error'](_0x1966f3(0xd9))),{'paymentId':_0x1886c1,'status':_0x202aad,'amount':_0x348251[_0x1966f3(0xd0)],'currency':_0x348251[_0x1966f3(0xa2)]};}}exports[a44_0xff8dd(0xfd)]=AmPayService,exports['ampayService']=new AmPayService();