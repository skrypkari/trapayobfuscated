'use strict';const a44_0x4445b7=a44_0x4678;(function(_0x27ddc8,_0x4e70e2){const _0x25d15b=a44_0x4678,_0x50a293=_0x27ddc8();while(!![]){try{const _0x503524=parseInt(_0x25d15b(0x1ea))/0x1*(parseInt(_0x25d15b(0x1e2))/0x2)+-parseInt(_0x25d15b(0x183))/0x3*(-parseInt(_0x25d15b(0x1b0))/0x4)+parseInt(_0x25d15b(0x1d2))/0x5*(parseInt(_0x25d15b(0x16e))/0x6)+parseInt(_0x25d15b(0x195))/0x7+parseInt(_0x25d15b(0x1ff))/0x8*(parseInt(_0x25d15b(0x1aa))/0x9)+-parseInt(_0x25d15b(0x17e))/0xa+parseInt(_0x25d15b(0x16d))/0xb*(-parseInt(_0x25d15b(0x166))/0xc);if(_0x503524===_0x4e70e2)break;else _0x50a293['push'](_0x50a293['shift']());}catch(_0x1ea4a0){_0x50a293['push'](_0x50a293['shift']());}}}(a44_0x3220,0xf0ced));function a44_0x4678(_0x10d9b2,_0xe2c618){const _0x3220b6=a44_0x3220();return a44_0x4678=function(_0x46780b,_0x1a9b19){_0x46780b=_0x46780b-0x166;let _0x5e4f04=_0x3220b6[_0x46780b];return _0x5e4f04;},a44_0x4678(_0x10d9b2,_0xe2c618);}Object[a44_0x4445b7(0x1d3)](exports,a44_0x4445b7(0x18f),{'value':!![]}),exports[a44_0x4445b7(0x1d6)]=exports[a44_0x4445b7(0x171)]=void 0x0;function a44_0x3220(){const _0x459b51=['BTN','FIN','UKR','system_id','LUX','redirect_url','DNK','46cSRdVN','object','‚ö†Ô∏è\x20Unknown\x20country\x20code:\x20','API_PRIVATE_KEY','MYS','Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id','SVK','SAU','BOL','YEM','AZE','EST','convert2LetterTo3LetterCountryCode','FLK','LIE','IND','IRL','No\x20payment\x20ID\x20found\x20in\x20webhook\x20data','Payment\x20URL:','PRY','LAO','1885192PTbDAv','VEN','HUN','‚ùå\x20AmPay\x20health\x20check\x20failed:','DEU','LKA','USA','PER','COL','AmPay\x20payment\x20creation\x20failed:\x20','AmPay\x20API\x20error:\x20HTTP\x20','a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815','MOZ','JPN','üì•\x20AmPay\x20raw\x20response:','CHL','Webhook\x20data:','SGP','GEO','PHL','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20failure...','TRAFFER','log','Unknown\x20error','408IGvxge','REU','CHE','ROU','MDA','stringify','VAT','1335521wpJGue','6SruqFs','MKD','SVN','AmPayService','KEN','MUS','üá¶üá≤\x20Creating\x20AmPay\x20payment\x20link...','BIH','MNE','createPaymentLink','MWI','Available\x20fields:','MEX','MDV','application/json','IDN','7950200zSJHZa','amount','AND','RUS','Customer\x20IP:','3cabzcb','Email:','NOR','‚ùå\x20AmPay\x20payment\x20creation\x20failed:','KOR','IRN','tracker_id','Forced\x20status\x20(webhook\x20disabled):\x20','ALB','GUY','EGY','System\x20ID:','__esModule','client_transaction_id','LBN','keys','ZAF','KAZ','12935923YATbwV','LTU','MDG','error','TKM','POST','‚ö†Ô∏è\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status','API_PUBLIC_KEY','THA','PRK','toUpperCase','Extracted\x20payment\x20ID:\x20','BEL','üìä\x20AmPay\x20response\x20data:','apiUrl','Customer\x20Country\x20(3-letter):','KGZ','BRA','Tracker\x20ID:','SWE','TrapayAPI/1.0','54EPQYoo','58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda','SYC','CHN','TZA','ZMB','1613868LEYcuC','message','text','VNM','SUR','https://traffer.uk/gateway/ampay/webhook.php','MCO','JOR','KHM','MLT','FRA','üì§\x20AmPay\x20request\x20body:','ECU','GAM','NLD','ARM','URY','AUS','ISR','CLIENT_MERCHANT_ID','ZWE','ARE','AUT','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20event...','‚úÖ\x20AmPay\x20payment\x20link\x20created\x20successfully','PRT','BGR','healthCheck','SYR','SRB','HRV','BHR','ISL','ITA','3351435QwepgR','defineProperty','NPL','forEach','ampayService','TUR','status','Customer\x20Country\x20(2-letter):','currency','XKX','üá¶üá≤\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing','PAK','KWT','\x20-\x20','https://traffer.uk/gateway/ampay/','Order\x20ID:','68422noIKtg'];a44_0x3220=function(){return _0x459b51;};return a44_0x3220();}class AmPayService{constructor(){const _0x2a57f5=a44_0x4445b7;this['CLIENT_MERCHANT_ID']=_0x2a57f5(0x214),this[_0x2a57f5(0x19c)]=_0x2a57f5(0x1ab),this[_0x2a57f5(0x1ed)]=_0x2a57f5(0x20a),this['apiUrl']=_0x2a57f5(0x1e0),console['log'](_0x2a57f5(0x1dc));}[a44_0x4445b7(0x1f6)](_0x44c230){const _0x1c3484=a44_0x4445b7,_0x142813={'AD':_0x1c3484(0x180),'AL':_0x1c3484(0x18b),'AT':_0x1c3484(0x1c6),'BA':_0x1c3484(0x175),'BE':_0x1c3484(0x1a1),'BG':_0x1c3484(0x1ca),'BY':'BLR','CH':_0x1c3484(0x168),'CY':'CYP','CZ':'CZE','DE':_0x1c3484(0x203),'DK':_0x1c3484(0x1e9),'EE':_0x1c3484(0x1f5),'ES':'ESP','FI':_0x1c3484(0x1e4),'FR':_0x1c3484(0x1ba),'GB':'GBR','GE':_0x1c3484(0x211),'GR':'GRC','HR':_0x1c3484(0x1ce),'HU':_0x1c3484(0x201),'IE':_0x1c3484(0x1fa),'IS':_0x1c3484(0x1d0),'IT':_0x1c3484(0x1d1),'LI':_0x1c3484(0x1f8),'LT':_0x1c3484(0x196),'LU':_0x1c3484(0x1e7),'LV':'LVA','MC':_0x1c3484(0x1b6),'MD':_0x1c3484(0x16a),'ME':_0x1c3484(0x176),'MK':_0x1c3484(0x16f),'MT':_0x1c3484(0x1b9),'NL':_0x1c3484(0x1be),'NO':_0x1c3484(0x185),'PL':'POL','PT':_0x1c3484(0x1c9),'RO':_0x1c3484(0x169),'RS':_0x1c3484(0x1cd),'RU':'RUS','SE':_0x1c3484(0x1a8),'SI':_0x1c3484(0x170),'SK':_0x1c3484(0x1f0),'SM':'SMR','UA':_0x1c3484(0x1e5),'VA':_0x1c3484(0x16c),'XK':_0x1c3484(0x1db),'AM':_0x1c3484(0x1bf),'AZ':_0x1c3484(0x1f4),'KZ':_0x1c3484(0x194),'KG':_0x1c3484(0x1a5),'TJ':'TJK','TM':_0x1c3484(0x199),'UZ':'UZB','US':_0x1c3484(0x205),'CA':'CAN','AU':_0x1c3484(0x1c1),'JP':_0x1c3484(0x20c),'CN':_0x1c3484(0x1ad),'IN':_0x1c3484(0x1f9),'BR':_0x1c3484(0x1a6),'MX':_0x1c3484(0x17a),'AR':'ARG','CL':_0x1c3484(0x20e),'PE':_0x1c3484(0x206),'CO':_0x1c3484(0x207),'VE':_0x1c3484(0x200),'EC':_0x1c3484(0x1bc),'BO':_0x1c3484(0x1f2),'PY':_0x1c3484(0x1fd),'UY':_0x1c3484(0x1c0),'SR':_0x1c3484(0x1b4),'GY':_0x1c3484(0x18c),'FK':_0x1c3484(0x1f7),'ZA':_0x1c3484(0x193),'EG':_0x1c3484(0x18d),'NG':'NGA','KE':_0x1c3484(0x172),'GH':'GHA','TZ':_0x1c3484(0x1ae),'UG':'UGA','ZW':_0x1c3484(0x1c4),'ZM':_0x1c3484(0x1af),'MW':_0x1c3484(0x178),'MZ':_0x1c3484(0x20b),'MG':_0x1c3484(0x197),'MU':_0x1c3484(0x173),'SC':_0x1c3484(0x1ac),'RE':_0x1c3484(0x167),'TR':_0x1c3484(0x1d7),'IR':_0x1c3484(0x188),'IQ':'IRQ','SA':_0x1c3484(0x1f1),'AE':_0x1c3484(0x1c5),'KW':_0x1c3484(0x1de),'QA':'QAT','BH':_0x1c3484(0x1cf),'OM':'OMN','YE':_0x1c3484(0x1f3),'JO':_0x1c3484(0x1b7),'LB':_0x1c3484(0x191),'SY':_0x1c3484(0x1cc),'IL':_0x1c3484(0x1c2),'PS':'PSE','KR':_0x1c3484(0x187),'KP':_0x1c3484(0x19e),'TH':_0x1c3484(0x19d),'VN':_0x1c3484(0x1b3),'MY':_0x1c3484(0x1ee),'SG':_0x1c3484(0x210),'ID':_0x1c3484(0x17d),'PH':_0x1c3484(0x212),'LA':_0x1c3484(0x1fe),'KH':_0x1c3484(0x1b8),'MM':'MMR','BD':'BGD','LK':_0x1c3484(0x204),'NP':_0x1c3484(0x1d4),'BT':_0x1c3484(0x1e3),'MV':_0x1c3484(0x17b),'AF':'AFG','PK':_0x1c3484(0x1dd),'MN':'MNG'},_0x16474b=_0x142813[_0x44c230[_0x1c3484(0x19f)]()];if(!_0x16474b)return console['warn'](_0x1c3484(0x1ec)+_0x44c230+',\x20using\x20RUS\x20as\x20fallback'),_0x1c3484(0x181);return _0x16474b;}async[a44_0x4445b7(0x177)](_0x59fcaa){const _0x4a3f43=a44_0x4445b7;try{const {orderId:_0x56e06a,amount:_0x370037,currency:_0x3b85a8,firstName:_0x8e17df,lastName:_0x11e8e0,email:_0x425632,customerIp:_0x172fbc,customerCountry:_0x558e85,successUrl:_0xe45602,failureUrl:_0x1864d5}=_0x59fcaa;console['log'](_0x4a3f43(0x174)),console[_0x4a3f43(0x215)](_0x4a3f43(0x1e1),_0x56e06a),console[_0x4a3f43(0x215)]('Amount:',_0x370037,_0x3b85a8),console[_0x4a3f43(0x215)]('Customer:',_0x8e17df+'\x20'+_0x11e8e0),console['log'](_0x4a3f43(0x184),_0x425632),console['log'](_0x4a3f43(0x182),_0x172fbc),console[_0x4a3f43(0x215)](_0x4a3f43(0x1d9),_0x558e85);const _0x94f9ea=this[_0x4a3f43(0x1f6)](_0x558e85);console[_0x4a3f43(0x215)](_0x4a3f43(0x1a4),_0x94f9ea);const _0x3add53={'sub_method':_0x4a3f43(0x1bd),'currency':_0x3b85a8[_0x4a3f43(0x19f)](),'amount':_0x370037,'callback_url':_0x4a3f43(0x1b5),'client_merchant_id':this[_0x4a3f43(0x1c3)],'client_transaction_id':_0x56e06a,'transaction_description':_0x56e06a,'customer':{'ip':_0x172fbc,'email':_0x425632,'full_name':_0x8e17df+'\x20'+_0x11e8e0,'country':_0x94f9ea},'success_redirect_url':_0xe45602,'error_redirect_url':_0x1864d5};console['log'](_0x4a3f43(0x1bb),JSON['stringify'](_0x3add53,null,0x2));const _0x31223f=await fetch(this['apiUrl']+'ampay.php',{'method':_0x4a3f43(0x19a),'headers':{'Content-Type':_0x4a3f43(0x17c),'User-Agent':'TrapayAPI/1.0'},'body':JSON[_0x4a3f43(0x16b)](_0x3add53)}),_0x3f8bfb=await _0x31223f[_0x4a3f43(0x1b2)]();console[_0x4a3f43(0x215)](_0x4a3f43(0x20d),_0x3f8bfb);if(!_0x31223f['ok'])throw new Error(_0x4a3f43(0x209)+_0x31223f['status']+_0x4a3f43(0x1df)+_0x3f8bfb);let _0x2d6f73;try{_0x2d6f73=JSON['parse'](_0x3f8bfb);}catch(_0x2aedc9){throw new Error('Invalid\x20JSON\x20response\x20from\x20AmPay:\x20'+_0x3f8bfb);}console['log'](_0x4a3f43(0x1a2),JSON[_0x4a3f43(0x16b)](_0x2d6f73,null,0x2));if(!_0x2d6f73[_0x4a3f43(0x1e8)])throw new Error(_0x4a3f43(0x208)+(_0x2d6f73['error_message']||_0x2d6f73[_0x4a3f43(0x1b1)]||_0x4a3f43(0x216)));const _0x165b37=_0x2d6f73['redirect_url'],_0x479b3d=_0x2d6f73[_0x4a3f43(0x1e6)],_0x5fcf45=_0x2d6f73[_0x4a3f43(0x189)];return console['log'](_0x4a3f43(0x1c8)),console['log'](_0x4a3f43(0x1fc),_0x165b37),console[_0x4a3f43(0x215)](_0x4a3f43(0x18e),_0x479b3d),console['log'](_0x4a3f43(0x1a7),_0x5fcf45),console[_0x4a3f43(0x215)]('Status:',_0x2d6f73[_0x4a3f43(0x1d8)]),console[_0x4a3f43(0x215)](_0x4a3f43(0x1c7)),{'gateway_payment_id':_0x479b3d||_0x5fcf45||_0x56e06a,'payment_url':_0x165b37||'','transaction_id':_0x479b3d};}catch(_0x132155){console[_0x4a3f43(0x198)](_0x4a3f43(0x186),_0x132155),console[_0x4a3f43(0x215)](_0x4a3f43(0x213));throw _0x132155;}}async[a44_0x4445b7(0x1cb)](){const _0x48b562=a44_0x4445b7;try{const _0x3622fc=await fetch(this[_0x48b562(0x1a3)]+'health.php',{'method':'GET','headers':{'Content-Type':'application/json','User-Agent':_0x48b562(0x1a9)}});return _0x3622fc&&_0x3622fc[_0x48b562(0x1d8)]===0xc8?!![]:![];}catch(_0x3ec21e){return console['error'](_0x48b562(0x202),_0x3ec21e),![];}}async['processWebhook'](_0xeed545){const _0x34218c=a44_0x4445b7;console[_0x34218c(0x215)]('===\x20Processing\x20AmPay\x20webhook\x20==='),console[_0x34218c(0x215)](_0x34218c(0x19b)),console[_0x34218c(0x215)](_0x34218c(0x20f),_0xeed545),console[_0x34218c(0x215)]('Webhook\x20data\x20type:',typeof _0xeed545),console[_0x34218c(0x215)](_0x34218c(0x179));_0xeed545&&typeof _0xeed545===_0x34218c(0x1eb)&&Object[_0x34218c(0x192)](_0xeed545)[_0x34218c(0x1d5)](_0x5ed2e8=>{const _0x252396=_0x34218c;console[_0x252396(0x215)]('\x20\x20'+_0x5ed2e8+':\x20'+_0xeed545[_0x5ed2e8]+'\x20('+typeof _0xeed545[_0x5ed2e8]+')');});let _0x733012='PENDING';const _0x42616c=_0xeed545[_0x34218c(0x190)]||_0xeed545[_0x34218c(0x1e6)]||_0xeed545[_0x34218c(0x189)]||'';return console[_0x34218c(0x215)](_0x34218c(0x1a0)+_0x42616c),console[_0x34218c(0x215)](_0x34218c(0x18a)+_0x733012),!_0x42616c&&(console['error'](_0x34218c(0x1fb)),console[_0x34218c(0x198)](_0x34218c(0x1ef))),{'paymentId':_0x42616c,'status':_0x733012,'amount':_0xeed545[_0x34218c(0x17f)],'currency':_0xeed545[_0x34218c(0x1da)]};}}exports[a44_0x4445b7(0x171)]=AmPayService,exports['ampayService']=new AmPayService();