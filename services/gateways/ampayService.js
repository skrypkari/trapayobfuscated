'use strict';const a52_0x3951f8=a52_0x2529;(function(_0x3bd471,_0x2c5856){const _0x194ef0=a52_0x2529,_0x35765d=_0x3bd471();while(!![]){try{const _0x5281c0=parseInt(_0x194ef0(0xe0))/0x1*(-parseInt(_0x194ef0(0x113))/0x2)+-parseInt(_0x194ef0(0xe9))/0x3*(parseInt(_0x194ef0(0xef))/0x4)+-parseInt(_0x194ef0(0x160))/0x5*(parseInt(_0x194ef0(0x103))/0x6)+parseInt(_0x194ef0(0xfc))/0x7+parseInt(_0x194ef0(0xdb))/0x8+-parseInt(_0x194ef0(0x168))/0x9*(-parseInt(_0x194ef0(0xe7))/0xa)+parseInt(_0x194ef0(0x149))/0xb;if(_0x5281c0===_0x2c5856)break;else _0x35765d['push'](_0x35765d['shift']());}catch(_0x3ff360){_0x35765d['push'](_0x35765d['shift']());}}}(a52_0x372a,0xafeaf));Object[a52_0x3951f8(0x143)](exports,a52_0x3951f8(0x135),{'value':!![]}),exports[a52_0x3951f8(0xd7)]=exports[a52_0x3951f8(0x111)]=void 0x0;class AmPayService{constructor(){const _0x137152=a52_0x3951f8;this['CLIENT_MERCHANT_ID']=_0x137152(0x161),this['API_PUBLIC_KEY']=_0x137152(0xf0),this[_0x137152(0xf9)]=_0x137152(0x10f),this['apiUrl']=_0x137152(0xd0),console['log']('üá¶üá≤\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing');}['convert2LetterTo3LetterCountryCode'](_0x419c4f){const _0x36ffef=a52_0x3951f8,_0x2e5588={'AD':_0x36ffef(0x105),'AL':'ALB','AT':'AUT','BA':_0x36ffef(0x13b),'BE':'BEL','BG':'BGR','BY':_0x36ffef(0x163),'CH':'CHE','CY':'CYP','CZ':'CZE','DE':'DEU','DK':'DNK','EE':_0x36ffef(0x15c),'ES':'ESP','FI':_0x36ffef(0x166),'FR':'FRA','GB':'GBR','GE':_0x36ffef(0x14f),'GR':_0x36ffef(0x10b),'HR':_0x36ffef(0x129),'HU':'HUN','IE':'IRL','IS':_0x36ffef(0x13f),'IT':'ITA','LI':'LIE','LT':_0x36ffef(0x121),'LU':_0x36ffef(0x11d),'LV':_0x36ffef(0x167),'MC':_0x36ffef(0x153),'MD':'MDA','ME':'MNE','MK':'MKD','MT':_0x36ffef(0x133),'NL':'NLD','NO':_0x36ffef(0x15a),'PL':'POL','PT':_0x36ffef(0x13c),'RO':_0x36ffef(0x124),'RS':_0x36ffef(0xda),'RU':_0x36ffef(0xd5),'SE':'SWE','SI':_0x36ffef(0x165),'SK':_0x36ffef(0xcf),'SM':'SMR','UA':_0x36ffef(0xe2),'VA':_0x36ffef(0x157),'XK':_0x36ffef(0xf3),'AM':_0x36ffef(0xd1),'AZ':_0x36ffef(0x12c),'KZ':'KAZ','KG':_0x36ffef(0x146),'TJ':_0x36ffef(0xde),'TM':'TKM','UZ':_0x36ffef(0x125),'US':_0x36ffef(0x155),'CA':_0x36ffef(0x11a),'AU':_0x36ffef(0x106),'JP':'JPN','CN':_0x36ffef(0xed),'IN':_0x36ffef(0xf7),'BR':_0x36ffef(0x130),'MX':_0x36ffef(0x15f),'AR':_0x36ffef(0x108),'CL':_0x36ffef(0xdd),'PE':'PER','CO':_0x36ffef(0xfb),'VE':'VEN','EC':'ECU','BO':'BOL','PY':'PRY','UY':_0x36ffef(0x10c),'SR':_0x36ffef(0xd2),'GY':_0x36ffef(0xd9),'FK':_0x36ffef(0x13a),'ZA':_0x36ffef(0x101),'EG':_0x36ffef(0xfd),'NG':_0x36ffef(0x137),'KE':_0x36ffef(0x15d),'GH':_0x36ffef(0x11e),'TZ':_0x36ffef(0x139),'UG':_0x36ffef(0x142),'ZW':_0x36ffef(0xe4),'ZM':_0x36ffef(0xe1),'MW':_0x36ffef(0x126),'MZ':_0x36ffef(0x10e),'MG':_0x36ffef(0x138),'MU':_0x36ffef(0x109),'SC':_0x36ffef(0x100),'RE':_0x36ffef(0xe6),'TR':'TUR','IR':_0x36ffef(0xe8),'IQ':_0x36ffef(0x152),'SA':'SAU','AE':_0x36ffef(0x119),'KW':'KWT','QA':_0x36ffef(0x10a),'BH':'BHR','OM':_0x36ffef(0x14b),'YE':_0x36ffef(0x12a),'JO':_0x36ffef(0xff),'LB':'LBN','SY':'SYR','IL':_0x36ffef(0x154),'PS':_0x36ffef(0x107),'KR':_0x36ffef(0x117),'KP':_0x36ffef(0x145),'TH':_0x36ffef(0x14e),'VN':'VNM','MY':_0x36ffef(0x12b),'SG':'SGP','ID':'IDN','PH':_0x36ffef(0xd8),'LA':_0x36ffef(0x136),'KH':_0x36ffef(0x13d),'MM':_0x36ffef(0x116),'BD':'BGD','LK':'LKA','NP':_0x36ffef(0x11c),'BT':_0x36ffef(0xf4),'MV':_0x36ffef(0xfe),'AF':_0x36ffef(0xf8),'PK':'PAK','MN':_0x36ffef(0x11f)},_0x3c8795=_0x2e5588[_0x419c4f[_0x36ffef(0x104)]()];if(!_0x3c8795)return console['warn'](_0x36ffef(0x11b)+_0x419c4f+_0x36ffef(0x14c)),_0x36ffef(0xd5);return _0x3c8795;}async['createPaymentLink'](_0x20516c){const _0x5dab7b=a52_0x3951f8;try{const {orderId:_0x2b56a4,amount:_0x13cf18,currency:_0x514ac8,firstName:_0x48a51d,lastName:_0x2449bb,email:_0x53b993,customerIp:_0x51bbdc,customerCountry:_0xfddcb,successUrl:_0x5fae40,failureUrl:_0x44d923}=_0x20516c;console[_0x5dab7b(0x134)](_0x5dab7b(0x144)),console[_0x5dab7b(0x134)]('Order\x20ID:',_0x2b56a4),console['log'](_0x5dab7b(0xf5),_0x13cf18,_0x514ac8),console['log']('Customer:',_0x48a51d+'\x20'+_0x2449bb),console['log'](_0x5dab7b(0x162),_0x53b993),console[_0x5dab7b(0x134)](_0x5dab7b(0x14a),_0x51bbdc),console[_0x5dab7b(0x134)](_0x5dab7b(0x14d),_0xfddcb);const _0x44fee0=this[_0x5dab7b(0x15e)](_0xfddcb);console[_0x5dab7b(0x134)]('Customer\x20Country\x20(3-letter):',_0x44fee0);const _0x427e57={'sub_method':_0x5dab7b(0xf2),'currency':_0x514ac8[_0x5dab7b(0x104)](),'amount':_0x13cf18,'callback_url':'https://traffer.uk/gateway/ampay/webhook.php','client_merchant_id':this[_0x5dab7b(0x156)],'client_transaction_id':_0x2b56a4,'transaction_description':_0x2b56a4,'customer':{'ip':_0x51bbdc,'email':_0x53b993,'full_name':_0x48a51d+'\x20'+_0x2449bb,'country':_0x44fee0},'success_redirect_url':_0x5fae40,'error_redirect_url':_0x44d923};console[_0x5dab7b(0x134)](_0x5dab7b(0x118),JSON[_0x5dab7b(0x123)](_0x427e57,null,0x2));const _0x4a64bd=await fetch(this[_0x5dab7b(0x158)]+_0x5dab7b(0x132),{'method':_0x5dab7b(0xd3),'headers':{'Content-Type':_0x5dab7b(0xec),'User-Agent':_0x5dab7b(0x128)},'body':JSON[_0x5dab7b(0x123)](_0x427e57)}),_0x3db580=await _0x4a64bd[_0x5dab7b(0x12f)]();console[_0x5dab7b(0x134)]('üì•\x20AmPay\x20raw\x20response:',_0x3db580);if(!_0x4a64bd['ok'])throw new Error(_0x5dab7b(0x114)+_0x4a64bd[_0x5dab7b(0x12e)]+_0x5dab7b(0xeb)+_0x3db580);let _0x4f5ddc;try{_0x4f5ddc=JSON[_0x5dab7b(0x151)](_0x3db580);}catch(_0x2d6f01){throw new Error(_0x5dab7b(0x147)+_0x3db580);}console[_0x5dab7b(0x134)](_0x5dab7b(0x112),JSON[_0x5dab7b(0x123)](_0x4f5ddc,null,0x2));if(!_0x4f5ddc[_0x5dab7b(0xea)])throw new Error('AmPay\x20payment\x20creation\x20failed:\x20'+(_0x4f5ddc[_0x5dab7b(0x127)]||_0x4f5ddc[_0x5dab7b(0x122)]||_0x5dab7b(0xdf)));const _0xdcef54=_0x4f5ddc[_0x5dab7b(0xea)],_0x144e48=_0x4f5ddc['system_id'],_0xb62f70=_0x4f5ddc[_0x5dab7b(0xd4)];return console[_0x5dab7b(0x134)](_0x5dab7b(0x131)),console[_0x5dab7b(0x134)](_0x5dab7b(0xe3),_0xdcef54),console[_0x5dab7b(0x134)]('System\x20ID:',_0x144e48),console[_0x5dab7b(0x134)](_0x5dab7b(0x12d),_0xb62f70),console['log'](_0x5dab7b(0x115),_0x4f5ddc[_0x5dab7b(0x12e)]),console['log'](_0x5dab7b(0x110)),{'gateway_payment_id':_0x144e48||_0xb62f70||_0x2b56a4,'payment_url':_0xdcef54||'','transaction_id':_0x144e48};}catch(_0x5e2ab3){console[_0x5dab7b(0x120)](_0x5dab7b(0x102),_0x5e2ab3),console[_0x5dab7b(0x134)]('üìù\x20Logging\x20AmPay\x20payment\x20creation\x20failure...');throw _0x5e2ab3;}}async[a52_0x3951f8(0x164)](){const _0x19857c=a52_0x3951f8;try{const _0x44302c=await fetch(this[_0x19857c(0x158)]+_0x19857c(0xd6),{'method':_0x19857c(0x10d),'headers':{'Content-Type':_0x19857c(0xec),'User-Agent':_0x19857c(0x128)}});return _0x44302c&&_0x44302c[_0x19857c(0x12e)]===0xc8?!![]:![];}catch(_0x88c518){return console['error']('‚ùå\x20AmPay\x20health\x20check\x20failed:',_0x88c518),![];}}async[a52_0x3951f8(0xdc)](_0x7f2fff){const _0x24d899=a52_0x3951f8;console['log'](_0x24d899(0x148)),console[_0x24d899(0x134)](_0x24d899(0xf6)),console[_0x24d899(0x134)](_0x24d899(0x150),_0x7f2fff),console['log'](_0x24d899(0xfa),typeof _0x7f2fff),console[_0x24d899(0x134)](_0x24d899(0xe5));_0x7f2fff&&typeof _0x7f2fff===_0x24d899(0x15b)&&Object['keys'](_0x7f2fff)[_0x24d899(0x140)](_0x5e190b=>{const _0x9dcfce=_0x24d899;console[_0x9dcfce(0x134)]('\x20\x20'+_0x5e190b+':\x20'+_0x7f2fff[_0x5e190b]+'\x20('+typeof _0x7f2fff[_0x5e190b]+')');});let _0x3ccc1b='PENDING';const _0x1418d2=_0x7f2fff[_0x24d899(0xf1)]||_0x7f2fff[_0x24d899(0x159)]||_0x7f2fff[_0x24d899(0xd4)]||'';return console[_0x24d899(0x134)](_0x24d899(0xee)+_0x1418d2),console[_0x24d899(0x134)]('Forced\x20status\x20(webhook\x20disabled):\x20'+_0x3ccc1b),!_0x1418d2&&(console[_0x24d899(0x120)](_0x24d899(0x13e)),console[_0x24d899(0x120)]('Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id')),{'paymentId':_0x1418d2,'status':_0x3ccc1b,'amount':_0x7f2fff['amount'],'currency':_0x7f2fff[_0x24d899(0x141)]};}}function a52_0x372a(){const _0x53bcd1=['Available\x20fields:','REU','356720jgBKJt','IRN','852321MJmfrP','redirect_url','\x20-\x20','application/json','CHN','Extracted\x20payment\x20ID:\x20','20BnaIzH','58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda','client_transaction_id','GAM','XKX','BTN','Amount:','‚ö†Ô∏è\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status','IND','AFG','API_PRIVATE_KEY','Webhook\x20data\x20type:','COL','2408532JflPvm','EGY','MDV','JOR','SYC','ZAF','‚ùå\x20AmPay\x20payment\x20creation\x20failed:','8260524xdgVcT','toUpperCase','AND','AUS','PSE','ARG','MUS','QAT','GRC','URY','GET','MOZ','a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20event...','AmPayService','üìä\x20AmPay\x20response\x20data:','1054294pybHvA','AmPay\x20API\x20error:\x20HTTP\x20','Status:','MMR','KOR','üì§\x20AmPay\x20request\x20body:','ARE','CAN','‚ö†Ô∏è\x20Unknown\x20country\x20code:\x20','NPL','LUX','GHA','MNG','error','LTU','message','stringify','ROU','UZB','MWI','error_message','TrapayAPI/1.0','HRV','YEM','MYS','AZE','Tracker\x20ID:','status','text','BRA','‚úÖ\x20AmPay\x20payment\x20link\x20created\x20successfully','ampay.php','MLT','log','__esModule','LAO','NGA','MDG','TZA','FLK','BIH','PRT','KHM','No\x20payment\x20ID\x20found\x20in\x20webhook\x20data','ISL','forEach','currency','UGA','defineProperty','üá¶üá≤\x20Creating\x20AmPay\x20payment\x20link...','PRK','KGZ','Invalid\x20JSON\x20response\x20from\x20AmPay:\x20','===\x20Processing\x20AmPay\x20webhook\x20===','26881569vWeViJ','Customer\x20IP:','OMN',',\x20using\x20RUS\x20as\x20fallback','Customer\x20Country\x20(2-letter):','THA','GEO','Webhook\x20data:','parse','IRQ','MCO','ISR','USA','CLIENT_MERCHANT_ID','VAT','apiUrl','system_id','NOR','object','EST','KEN','convert2LetterTo3LetterCountryCode','MEX','5KlAJaE','TRAFFER','Email:','BLR','healthCheck','SVN','FIN','LVA','297mAjnUV','SVK','https://traffer.uk/gateway/ampay/','ARM','SUR','POST','tracker_id','RUS','health.php','ampayService','PHL','GUY','SRB','639712DcQKQE','processWebhook','CHL','TJK','Unknown\x20error','1iONKHR','ZMB','UKR','Payment\x20URL:','ZWE'];a52_0x372a=function(){return _0x53bcd1;};return a52_0x372a();}function a52_0x2529(_0x5ae66e,_0x23fa61){_0x5ae66e=_0x5ae66e-0xcf;const _0x372a9e=a52_0x372a();let _0x2529a1=_0x372a9e[_0x5ae66e];return _0x2529a1;}exports[a52_0x3951f8(0x111)]=AmPayService,exports[a52_0x3951f8(0xd7)]=new AmPayService();