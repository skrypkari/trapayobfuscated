'use strict';function a46_0x30d5(_0x5a340f,_0x39e2f7){const _0x888d29=a46_0x888d();return a46_0x30d5=function(_0x30d520,_0xb33a39){_0x30d520=_0x30d520-0x1a6;let _0x386fb8=_0x888d29[_0x30d520];return _0x386fb8;},a46_0x30d5(_0x5a340f,_0x39e2f7);}const a46_0x17f6de=a46_0x30d5;(function(_0x843860,_0x4620cd){const _0xeacce5=a46_0x30d5,_0x4a36ef=_0x843860();while(!![]){try{const _0x3fa68b=parseInt(_0xeacce5(0x1c0))/0x1+-parseInt(_0xeacce5(0x215))/0x2*(-parseInt(_0xeacce5(0x248))/0x3)+parseInt(_0xeacce5(0x210))/0x4+parseInt(_0xeacce5(0x23e))/0x5*(-parseInt(_0xeacce5(0x1b9))/0x6)+-parseInt(_0xeacce5(0x225))/0x7*(parseInt(_0xeacce5(0x1b4))/0x8)+-parseInt(_0xeacce5(0x234))/0x9*(parseInt(_0xeacce5(0x243))/0xa)+parseInt(_0xeacce5(0x1c9))/0xb;if(_0x3fa68b===_0x4620cd)break;else _0x4a36ef['push'](_0x4a36ef['shift']());}catch(_0x22bb10){_0x4a36ef['push'](_0x4a36ef['shift']());}}}(a46_0x888d,0xe9a94));function a46_0x888d(){const _0x49f94e=['error','status','AZE','SAU','IRQ','AmPayService','Customer:','currency','CHN','===\x20Processing\x20AmPay\x20webhook\x20===','AUT','FRA','Customer\x20Country\x20(3-letter):','toUpperCase','PRT','KGZ','JOR','IRL','Webhook\x20data\x20type:','Customer\x20Country\x20(2-letter):','SVK','log','https://traffer.uk/gateway/ampay/','SWE','MDV','4049236qdhtxP','‚ö†Ô∏è\x20Unknown\x20country\x20code:\x20','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20failure...','ITA','ESP','50FUyzCV','SUR','ISR','MUS','TUR','text','URY','system_id','error_message','POL','LVA','Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id','EST','GHA','PAK','Invalid\x20JSON\x20response\x20from\x20AmPay:\x20','7kADNrg','MLT','SMR','CLIENT_MERCHANT_ID','GET','PER','LBN','Customer\x20IP:','Webhook\x20data:','amount','GUY','SRB','CHE','SYR','BEL','36jvvIpn','POST','ALB','object','ARG','redirect_url','LTU','üìä\x20AmPay\x20response\x20data:','No\x20payment\x20ID\x20found\x20in\x20webhook\x20data','MOZ','473705dGuUTk','DNK','THA','UKR','üá¶üá≤\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing','4622210DMqipN','SVN','Available\x20fields:','‚ö†Ô∏è\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status','tracker_id','105909tHAGVa','REU','SYC','üì§\x20AmPay\x20request\x20body:','NPL','‚ùå\x20AmPay\x20health\x20check\x20failed:','\x20-\x20','BGR','OMN','healthCheck','BRA','IRN','VEN','VNM','ZMB','ampayService','MCO','ZWE','7352440Bapgpw','FIN','TrapayAPI/1.0','KWT','MKD','60oeFClV','ARE',',\x20using\x20RUS\x20as\x20fallback','ARM','AmPay\x20API\x20error:\x20HTTP\x20','AUS','Forced\x20status\x20(webhook\x20disabled):\x20','702670TPHilR','PRY','convert2LetterTo3LetterCountryCode','AFG','API_PUBLIC_KEY','IDN','UGA','TKM','JPN','22823581aiCENN','LKA','LUX','stringify','AND','ECU','API_PRIVATE_KEY','üì•\x20AmPay\x20raw\x20response:','MYS','USA','GEO','NOR','keys','PENDING','message','CAN','client_transaction_id','BIH','MEX','RUS','FLK','UZB','apiUrl','BGD','Amount:','https://traffer.uk/gateway/ampay/webhook.php','AmPay\x20payment\x20creation\x20failed:\x20','ampay.php','application/json','HRV','CYP','MDA','processWebhook','‚úÖ\x20AmPay\x20payment\x20link\x20created\x20successfully','LIE','MMR','ROU','Tracker\x20ID:','MNE','TRAFFER','KEN','YEM','Email:','IND','TZA','LAO'];a46_0x888d=function(){return _0x49f94e;};return a46_0x888d();}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a46_0x17f6de(0x1b1)]=exports[a46_0x17f6de(0x1fc)]=void 0x0;class AmPayService{constructor(){const _0x37eff9=a46_0x17f6de;this[_0x37eff9(0x228)]=_0x37eff9(0x1f0),this[_0x37eff9(0x1c4)]='58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda',this[_0x37eff9(0x1cf)]='a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815',this['apiUrl']=_0x37eff9(0x20d),console[_0x37eff9(0x20c)](_0x37eff9(0x242));}[a46_0x17f6de(0x1c2)](_0x59a9e2){const _0x51e11d=a46_0x17f6de,_0x4f4ff4={'AD':_0x51e11d(0x1cd),'AL':_0x51e11d(0x236),'AT':_0x51e11d(0x201),'BA':_0x51e11d(0x1da),'BE':_0x51e11d(0x233),'BG':_0x51e11d(0x1a9),'BY':'BLR','CH':_0x51e11d(0x231),'CY':_0x51e11d(0x1e7),'CZ':'CZE','DE':'DEU','DK':_0x51e11d(0x23f),'EE':_0x51e11d(0x221),'ES':_0x51e11d(0x214),'FI':_0x51e11d(0x1b5),'FR':_0x51e11d(0x202),'GB':'GBR','GE':_0x51e11d(0x1d3),'GR':'GRC','HR':_0x51e11d(0x1e6),'HU':'HUN','IE':_0x51e11d(0x208),'IS':'ISL','IT':_0x51e11d(0x213),'LI':_0x51e11d(0x1eb),'LT':_0x51e11d(0x23a),'LU':_0x51e11d(0x1cb),'LV':_0x51e11d(0x21f),'MC':_0x51e11d(0x1b2),'MD':_0x51e11d(0x1e8),'ME':_0x51e11d(0x1ef),'MK':_0x51e11d(0x1b8),'MT':_0x51e11d(0x226),'NL':'NLD','NO':_0x51e11d(0x1d4),'PL':_0x51e11d(0x21e),'PT':_0x51e11d(0x205),'RO':_0x51e11d(0x1ed),'RS':_0x51e11d(0x230),'RU':_0x51e11d(0x1dc),'SE':_0x51e11d(0x20e),'SI':_0x51e11d(0x244),'SK':_0x51e11d(0x20b),'SM':_0x51e11d(0x227),'UA':_0x51e11d(0x241),'VA':'VAT','XK':'XKX','AM':_0x51e11d(0x1bc),'AZ':_0x51e11d(0x1f9),'KZ':'KAZ','KG':_0x51e11d(0x206),'TJ':'TJK','TM':_0x51e11d(0x1c7),'UZ':_0x51e11d(0x1de),'US':_0x51e11d(0x1d2),'CA':_0x51e11d(0x1d8),'AU':_0x51e11d(0x1be),'JP':_0x51e11d(0x1c8),'CN':_0x51e11d(0x1ff),'IN':_0x51e11d(0x1f4),'BR':_0x51e11d(0x1ac),'MX':_0x51e11d(0x1db),'AR':_0x51e11d(0x238),'CL':'CHL','PE':_0x51e11d(0x22a),'CO':'COL','VE':_0x51e11d(0x1ae),'EC':_0x51e11d(0x1ce),'BO':'BOL','PY':_0x51e11d(0x1c1),'UY':_0x51e11d(0x21b),'SR':_0x51e11d(0x216),'GY':_0x51e11d(0x22f),'FK':_0x51e11d(0x1dd),'ZA':'ZAF','EG':'EGY','NG':'NGA','KE':_0x51e11d(0x1f1),'GH':_0x51e11d(0x222),'TZ':_0x51e11d(0x1f5),'UG':_0x51e11d(0x1c6),'ZW':_0x51e11d(0x1b3),'ZM':_0x51e11d(0x1b0),'MW':'MWI','MZ':_0x51e11d(0x23d),'MG':'MDG','MU':_0x51e11d(0x218),'SC':_0x51e11d(0x24a),'RE':_0x51e11d(0x249),'TR':_0x51e11d(0x219),'IR':_0x51e11d(0x1ad),'IQ':_0x51e11d(0x1fb),'SA':_0x51e11d(0x1fa),'AE':_0x51e11d(0x1ba),'KW':_0x51e11d(0x1b7),'QA':'QAT','BH':'BHR','OM':_0x51e11d(0x1aa),'YE':_0x51e11d(0x1f2),'JO':_0x51e11d(0x207),'LB':_0x51e11d(0x22b),'SY':_0x51e11d(0x232),'IL':_0x51e11d(0x217),'PS':'PSE','KR':'KOR','KP':'PRK','TH':_0x51e11d(0x240),'VN':_0x51e11d(0x1af),'MY':_0x51e11d(0x1d1),'SG':'SGP','ID':_0x51e11d(0x1c5),'PH':'PHL','LA':_0x51e11d(0x1f6),'KH':'KHM','MM':_0x51e11d(0x1ec),'BD':_0x51e11d(0x1e0),'LK':_0x51e11d(0x1ca),'NP':_0x51e11d(0x1a6),'BT':'BTN','MV':_0x51e11d(0x20f),'AF':_0x51e11d(0x1c3),'PK':_0x51e11d(0x223),'MN':'MNG'},_0x46046e=_0x4f4ff4[_0x59a9e2[_0x51e11d(0x204)]()];if(!_0x46046e)return console['warn'](_0x51e11d(0x211)+_0x59a9e2+_0x51e11d(0x1bb)),_0x51e11d(0x1dc);return _0x46046e;}async['createPaymentLink'](_0x304ed5){const _0x1fe923=a46_0x17f6de;try{const {orderId:_0x491caa,amount:_0xcd299,currency:_0x3db942,firstName:_0x36bdbb,lastName:_0x375b11,email:_0x3463a0,customerIp:_0x46caab,customerCountry:_0x10b42b,successUrl:_0x2be3b6,failureUrl:_0x18ff40}=_0x304ed5;console[_0x1fe923(0x20c)]('üá¶üá≤\x20Creating\x20AmPay\x20payment\x20link...'),console[_0x1fe923(0x20c)]('Order\x20ID:',_0x491caa),console[_0x1fe923(0x20c)](_0x1fe923(0x1e1),_0xcd299,_0x3db942),console[_0x1fe923(0x20c)](_0x1fe923(0x1fd),_0x36bdbb+'\x20'+_0x375b11),console[_0x1fe923(0x20c)](_0x1fe923(0x1f3),_0x3463a0),console[_0x1fe923(0x20c)](_0x1fe923(0x22c),_0x46caab),console[_0x1fe923(0x20c)](_0x1fe923(0x20a),_0x10b42b);const _0x1601ea=this[_0x1fe923(0x1c2)](_0x10b42b);console[_0x1fe923(0x20c)](_0x1fe923(0x203),_0x1601ea);const _0x3899b0={'sub_method':'GAM','currency':_0x3db942[_0x1fe923(0x204)](),'amount':_0xcd299,'callback_url':_0x1fe923(0x1e2),'client_merchant_id':this[_0x1fe923(0x228)],'client_transaction_id':_0x491caa,'transaction_description':_0x491caa,'customer':{'ip':_0x46caab,'email':_0x3463a0,'full_name':_0x36bdbb+'\x20'+_0x375b11,'country':_0x1601ea},'success_redirect_url':_0x2be3b6,'error_redirect_url':_0x18ff40};console['log'](_0x1fe923(0x24b),JSON[_0x1fe923(0x1cc)](_0x3899b0,null,0x2));const _0x26347a=await fetch(this[_0x1fe923(0x1df)]+_0x1fe923(0x1e4),{'method':_0x1fe923(0x235),'headers':{'Content-Type':_0x1fe923(0x1e5),'User-Agent':_0x1fe923(0x1b6)},'body':JSON[_0x1fe923(0x1cc)](_0x3899b0)}),_0x18d51e=await _0x26347a[_0x1fe923(0x21a)]();console[_0x1fe923(0x20c)](_0x1fe923(0x1d0),_0x18d51e);if(!_0x26347a['ok'])throw new Error(_0x1fe923(0x1bd)+_0x26347a[_0x1fe923(0x1f8)]+_0x1fe923(0x1a8)+_0x18d51e);let _0x3915ef;try{_0x3915ef=JSON['parse'](_0x18d51e);}catch(_0x4e6bdd){throw new Error(_0x1fe923(0x224)+_0x18d51e);}console['log'](_0x1fe923(0x23b),JSON[_0x1fe923(0x1cc)](_0x3915ef,null,0x2));if(!_0x3915ef[_0x1fe923(0x239)])throw new Error(_0x1fe923(0x1e3)+(_0x3915ef[_0x1fe923(0x21d)]||_0x3915ef[_0x1fe923(0x1d7)]||'Unknown\x20error'));const _0x547d32=_0x3915ef[_0x1fe923(0x239)],_0x4df5d0=_0x3915ef['system_id'],_0x70e6e2=_0x3915ef[_0x1fe923(0x247)];return console[_0x1fe923(0x20c)](_0x1fe923(0x1ea)),console[_0x1fe923(0x20c)]('Payment\x20URL:',_0x547d32),console[_0x1fe923(0x20c)]('System\x20ID:',_0x4df5d0),console['log'](_0x1fe923(0x1ee),_0x70e6e2),console[_0x1fe923(0x20c)]('Status:',_0x3915ef['status']),console[_0x1fe923(0x20c)]('üìù\x20Logging\x20AmPay\x20payment\x20creation\x20event...'),{'gateway_payment_id':_0x4df5d0||_0x70e6e2||_0x491caa,'payment_url':_0x547d32||'','transaction_id':_0x4df5d0};}catch(_0x432c31){console[_0x1fe923(0x1f7)]('‚ùå\x20AmPay\x20payment\x20creation\x20failed:',_0x432c31),console[_0x1fe923(0x20c)](_0x1fe923(0x212));throw _0x432c31;}}async[a46_0x17f6de(0x1ab)](){const _0x25a244=a46_0x17f6de;try{const _0x23f411=await fetch(this[_0x25a244(0x1df)]+'health.php',{'method':_0x25a244(0x229),'headers':{'Content-Type':_0x25a244(0x1e5),'User-Agent':_0x25a244(0x1b6)}});return _0x23f411&&_0x23f411[_0x25a244(0x1f8)]===0xc8?!![]:![];}catch(_0x4c852e){return console[_0x25a244(0x1f7)](_0x25a244(0x1a7),_0x4c852e),![];}}async[a46_0x17f6de(0x1e9)](_0x555ec6){const _0x11c02c=a46_0x17f6de;console[_0x11c02c(0x20c)](_0x11c02c(0x200)),console['log'](_0x11c02c(0x246)),console[_0x11c02c(0x20c)](_0x11c02c(0x22d),_0x555ec6),console[_0x11c02c(0x20c)](_0x11c02c(0x209),typeof _0x555ec6),console['log'](_0x11c02c(0x245));_0x555ec6&&typeof _0x555ec6===_0x11c02c(0x237)&&Object[_0x11c02c(0x1d5)](_0x555ec6)['forEach'](_0x29305f=>{console['log']('\x20\x20'+_0x29305f+':\x20'+_0x555ec6[_0x29305f]+'\x20('+typeof _0x555ec6[_0x29305f]+')');});let _0x2f959c=_0x11c02c(0x1d6);const _0x331c4c=_0x555ec6[_0x11c02c(0x1d9)]||_0x555ec6[_0x11c02c(0x21c)]||_0x555ec6[_0x11c02c(0x247)]||'';return console['log']('Extracted\x20payment\x20ID:\x20'+_0x331c4c),console[_0x11c02c(0x20c)](_0x11c02c(0x1bf)+_0x2f959c),!_0x331c4c&&(console[_0x11c02c(0x1f7)](_0x11c02c(0x23c)),console[_0x11c02c(0x1f7)](_0x11c02c(0x220))),{'paymentId':_0x331c4c,'status':_0x2f959c,'amount':_0x555ec6[_0x11c02c(0x22e)],'currency':_0x555ec6[_0x11c02c(0x1fe)]};}}exports[a46_0x17f6de(0x1fc)]=AmPayService,exports['ampayService']=new AmPayService();