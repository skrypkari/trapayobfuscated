'use strict';const a52_0x5d44ba=a52_0x2a5d;(function(_0x51bfd9,_0x5ba8b8){const _0x311f95=a52_0x2a5d,_0x498853=_0x51bfd9();while(!![]){try{const _0x9c5139=parseInt(_0x311f95(0x189))/0x1*(parseInt(_0x311f95(0x11b))/0x2)+parseInt(_0x311f95(0x1a9))/0x3+parseInt(_0x311f95(0x12f))/0x4*(-parseInt(_0x311f95(0x158))/0x5)+parseInt(_0x311f95(0x17c))/0x6*(-parseInt(_0x311f95(0x16e))/0x7)+-parseInt(_0x311f95(0x1bc))/0x8+-parseInt(_0x311f95(0x1af))/0x9+-parseInt(_0x311f95(0x11a))/0xa*(-parseInt(_0x311f95(0x118))/0xb);if(_0x9c5139===_0x5ba8b8)break;else _0x498853['push'](_0x498853['shift']());}catch(_0x274f39){_0x498853['push'](_0x498853['shift']());}}}(a52_0x11bb,0x8829d));Object[a52_0x5d44ba(0x11c)](exports,a52_0x5d44ba(0x174),{'value':!![]}),exports[a52_0x5d44ba(0x17d)]=exports[a52_0x5d44ba(0x121)]=void 0x0;function a52_0x2a5d(_0xfab865,_0x1f078f){_0xfab865=_0xfab865-0x115;const _0x11bb43=a52_0x11bb();let _0x2a5d54=_0x11bb43[_0xfab865];return _0x2a5d54;}class AmPayService{constructor(){const _0x36f4ea=a52_0x5d44ba;this['CLIENT_MERCHANT_ID']='TRAFFER',this['API_PUBLIC_KEY']='58b59ccbc03dcdcfc20d830edfba765dbf9f3531c692533d84b17938e9c40bda',this[_0x36f4ea(0x151)]=_0x36f4ea(0x135),this[_0x36f4ea(0x155)]=_0x36f4ea(0x170),console[_0x36f4ea(0x1b1)]('üá¶üá≤\x20AmPay\x20service\x20initialized\x20with\x20Open\x20Banking\x20AM\x20processing');}['convert2LetterTo3LetterCountryCode'](_0x3896a5){const _0xd07362=a52_0x5d44ba,_0x238cd2={'AD':_0xd07362(0x14a),'AL':_0xd07362(0x16c),'AT':_0xd07362(0x166),'BA':_0xd07362(0x140),'BE':_0xd07362(0x1a8),'BG':_0xd07362(0x1a5),'BY':_0xd07362(0x1ad),'CH':_0xd07362(0x134),'CY':_0xd07362(0x18e),'CZ':_0xd07362(0x12b),'DE':_0xd07362(0x177),'DK':_0xd07362(0x1aa),'EE':_0xd07362(0x18f),'ES':_0xd07362(0x1bb),'FI':_0xd07362(0x133),'FR':_0xd07362(0x17e),'GB':_0xd07362(0x184),'GE':_0xd07362(0x149),'GR':'GRC','HR':'HRV','HU':'HUN','IE':_0xd07362(0x19a),'IS':_0xd07362(0x1ab),'IT':_0xd07362(0x1bd),'LI':'LIE','LT':_0xd07362(0x187),'LU':_0xd07362(0x160),'LV':_0xd07362(0x14e),'MC':_0xd07362(0x1a4),'MD':_0xd07362(0x127),'ME':_0xd07362(0x18a),'MK':_0xd07362(0x168),'MT':'MLT','NL':_0xd07362(0x130),'NO':_0xd07362(0x129),'PL':'POL','PT':'PRT','RO':_0xd07362(0x119),'RS':_0xd07362(0x1b6),'RU':_0xd07362(0x19d),'SE':'SWE','SI':_0xd07362(0x125),'SK':'SVK','SM':_0xd07362(0x178),'UA':'UKR','VA':_0xd07362(0x115),'XK':_0xd07362(0x1a2),'AM':_0xd07362(0x196),'AZ':_0xd07362(0x192),'KZ':_0xd07362(0x154),'KG':_0xd07362(0x13b),'TJ':'TJK','TM':_0xd07362(0x11e),'UZ':_0xd07362(0x14b),'US':_0xd07362(0x143),'CA':_0xd07362(0x18d),'AU':_0xd07362(0x132),'JP':_0xd07362(0x124),'CN':_0xd07362(0x153),'IN':_0xd07362(0x163),'BR':_0xd07362(0x14d),'MX':_0xd07362(0x186),'AR':_0xd07362(0x19b),'CL':_0xd07362(0x18b),'PE':'PER','CO':_0xd07362(0x13e),'VE':'VEN','EC':'ECU','BO':_0xd07362(0x148),'PY':'PRY','UY':_0xd07362(0x136),'SR':'SUR','GY':_0xd07362(0x17f),'FK':_0xd07362(0x17b),'ZA':_0xd07362(0x183),'EG':_0xd07362(0x1ae),'NG':_0xd07362(0x147),'KE':_0xd07362(0x181),'GH':_0xd07362(0x123),'TZ':_0xd07362(0x169),'UG':_0xd07362(0x16b),'ZW':'ZWE','ZM':_0xd07362(0x1a0),'MW':_0xd07362(0x15b),'MZ':'MOZ','MG':'MDG','MU':_0xd07362(0x139),'SC':'SYC','RE':_0xd07362(0x172),'TR':'TUR','IR':_0xd07362(0x195),'IQ':_0xd07362(0x175),'SA':_0xd07362(0x15d),'AE':_0xd07362(0x142),'KW':_0xd07362(0x157),'QA':_0xd07362(0x16f),'BH':_0xd07362(0x146),'OM':_0xd07362(0x11f),'YE':_0xd07362(0x152),'JO':_0xd07362(0x180),'LB':_0xd07362(0x1b7),'SY':_0xd07362(0x193),'IL':_0xd07362(0x1b0),'PS':_0xd07362(0x1a7),'KR':_0xd07362(0x131),'KP':_0xd07362(0x17a),'TH':'THA','VN':_0xd07362(0x191),'MY':_0xd07362(0x126),'SG':_0xd07362(0x15c),'ID':_0xd07362(0x182),'PH':_0xd07362(0x1b2),'LA':_0xd07362(0x1b9),'KH':_0xd07362(0x162),'MM':_0xd07362(0x167),'BD':_0xd07362(0x15e),'LK':_0xd07362(0x188),'NP':_0xd07362(0x13a),'BT':_0xd07362(0x19f),'MV':_0xd07362(0x197),'AF':_0xd07362(0x144),'PK':_0xd07362(0x11d),'MN':_0xd07362(0x176)},_0x468825=_0x238cd2[_0x3896a5[_0xd07362(0x138)]()];if(!_0x468825)return console[_0xd07362(0x16d)]('‚ö†Ô∏è\x20Unknown\x20country\x20code:\x20'+_0x3896a5+',\x20using\x20RUS\x20as\x20fallback'),'RUS';return _0x468825;}async[a52_0x5d44ba(0x161)](_0x4b7957){const _0x2898ce=a52_0x5d44ba;try{const {orderId:_0x2262eb,amount:_0x5660cb,currency:_0xe76c76,firstName:_0x4c7246,lastName:_0x2dfd56,email:_0xe60ee0,customerIp:_0x6e0b6c,customerCountry:_0x4c3253,successUrl:_0x4978e9,failureUrl:_0x598d87}=_0x4b7957;console[_0x2898ce(0x1b1)](_0x2898ce(0x13d)),console[_0x2898ce(0x1b1)]('Order\x20ID:',_0x2262eb),console['log'](_0x2898ce(0x194),_0x5660cb,_0xe76c76),console[_0x2898ce(0x1b1)](_0x2898ce(0x141),_0x4c7246+'\x20'+_0x2dfd56),console[_0x2898ce(0x1b1)](_0x2898ce(0x1b5),_0xe60ee0),console[_0x2898ce(0x1b1)]('Customer\x20IP:',_0x6e0b6c),console['log'](_0x2898ce(0x16a),_0x4c3253);const _0x2ce054=this['convert2LetterTo3LetterCountryCode'](_0x4c3253);console[_0x2898ce(0x1b1)]('Customer\x20Country\x20(3-letter):',_0x2ce054);const _0x32d3fc={'sub_method':'GAM','currency':_0xe76c76[_0x2898ce(0x138)](),'amount':_0x5660cb,'callback_url':_0x2898ce(0x185),'client_merchant_id':this['CLIENT_MERCHANT_ID'],'client_transaction_id':_0x2262eb,'transaction_description':_0x2262eb,'customer':{'ip':_0x6e0b6c,'email':_0xe60ee0,'full_name':_0x4c7246+'\x20'+_0x2dfd56,'country':_0x2ce054},'success_redirect_url':_0x4978e9,'error_redirect_url':_0x598d87};console[_0x2898ce(0x1b1)](_0x2898ce(0x13f),JSON[_0x2898ce(0x179)](_0x32d3fc,null,0x2));const _0x3d7173=await fetch(this[_0x2898ce(0x155)]+_0x2898ce(0x1ac),{'method':_0x2898ce(0x120),'headers':{'Content-Type':_0x2898ce(0x1b8),'User-Agent':'TrapayAPI/1.0'},'body':JSON[_0x2898ce(0x179)](_0x32d3fc)}),_0x55a289=await _0x3d7173['text']();console['log'](_0x2898ce(0x165),_0x55a289);if(!_0x3d7173['ok'])throw new Error(_0x2898ce(0x1a3)+_0x3d7173['status']+_0x2898ce(0x1b4)+_0x55a289);let _0x1e7a1a;try{_0x1e7a1a=JSON[_0x2898ce(0x164)](_0x55a289);}catch(_0x25e4e8){throw new Error('Invalid\x20JSON\x20response\x20from\x20AmPay:\x20'+_0x55a289);}console[_0x2898ce(0x1b1)](_0x2898ce(0x198),JSON[_0x2898ce(0x179)](_0x1e7a1a,null,0x2));if(!_0x1e7a1a[_0x2898ce(0x15f)])throw new Error('AmPay\x20payment\x20creation\x20failed:\x20'+(_0x1e7a1a[_0x2898ce(0x12c)]||_0x1e7a1a[_0x2898ce(0x14f)]||_0x2898ce(0x13c)));const _0x5926ca=_0x1e7a1a[_0x2898ce(0x15f)],_0x1c303d=_0x1e7a1a['system_id'],_0x419ec7=_0x1e7a1a[_0x2898ce(0x171)];return console[_0x2898ce(0x1b1)](_0x2898ce(0x1b3)),console[_0x2898ce(0x1b1)](_0x2898ce(0x19e),_0x5926ca),console[_0x2898ce(0x1b1)](_0x2898ce(0x15a),_0x1c303d),console[_0x2898ce(0x1b1)]('Tracker\x20ID:',_0x419ec7),console['log']('Status:',_0x1e7a1a['status']),console[_0x2898ce(0x1b1)](_0x2898ce(0x12a)),{'gateway_payment_id':_0x1c303d||_0x419ec7||_0x2262eb,'payment_url':_0x5926ca||'','transaction_id':_0x1c303d};}catch(_0x307ac5){console[_0x2898ce(0x116)]('‚ùå\x20AmPay\x20payment\x20creation\x20failed:',_0x307ac5),console[_0x2898ce(0x1b1)](_0x2898ce(0x150));throw _0x307ac5;}}async['healthCheck'](){const _0x2d1b78=a52_0x5d44ba;try{const _0x24fd51=await fetch(this[_0x2d1b78(0x155)]+_0x2d1b78(0x14c),{'method':'GET','headers':{'Content-Type':_0x2d1b78(0x1b8),'User-Agent':_0x2d1b78(0x122)}});return _0x24fd51&&_0x24fd51[_0x2d1b78(0x1ba)]===0xc8?!![]:![];}catch(_0x211182){return console[_0x2d1b78(0x116)](_0x2d1b78(0x12e),_0x211182),![];}}async[a52_0x5d44ba(0x128)](_0x3865e4){const _0x5b959a=a52_0x5d44ba;console[_0x5b959a(0x1b1)](_0x5b959a(0x1a1)),console[_0x5b959a(0x1b1)](_0x5b959a(0x12d)),console[_0x5b959a(0x1b1)](_0x5b959a(0x156),_0x3865e4),console[_0x5b959a(0x1b1)](_0x5b959a(0x173),typeof _0x3865e4),console[_0x5b959a(0x1b1)]('Available\x20fields:');_0x3865e4&&typeof _0x3865e4===_0x5b959a(0x137)&&Object[_0x5b959a(0x145)](_0x3865e4)['forEach'](_0x35cf28=>{const _0x4888a5=_0x5b959a;console[_0x4888a5(0x1b1)]('\x20\x20'+_0x35cf28+':\x20'+_0x3865e4[_0x35cf28]+'\x20('+typeof _0x3865e4[_0x35cf28]+')');});let _0x13a9c2='PENDING';const _0x48005f=_0x3865e4[_0x5b959a(0x19c)]||_0x3865e4[_0x5b959a(0x18c)]||_0x3865e4[_0x5b959a(0x171)]||'';return console['log'](_0x5b959a(0x1a6)+_0x48005f),console[_0x5b959a(0x1b1)](_0x5b959a(0x117)+_0x13a9c2),!_0x48005f&&(console[_0x5b959a(0x116)](_0x5b959a(0x199)),console['error']('Checked\x20fields:\x20client_transaction_id,\x20system_id,\x20tracker_id')),{'paymentId':_0x48005f,'status':_0x13a9c2,'amount':_0x3865e4[_0x5b959a(0x159)],'currency':_0x3865e4[_0x5b959a(0x190)]};}}exports[a52_0x5d44ba(0x121)]=AmPayService,exports['ampayService']=new AmPayService();function a52_0x11bb(){const _0x26f8ae=['5551083HoCBGm','ISR','log','PHL','‚úÖ\x20AmPay\x20payment\x20link\x20created\x20successfully','\x20-\x20','Email:','SRB','LBN','application/json','LAO','status','ESP','5114504XGSQVc','ITA','VAT','error','Forced\x20status\x20(webhook\x20disabled):\x20','1533477zcgfQX','ROU','100yuxHnH','2150752ptqpLF','defineProperty','PAK','TKM','OMN','POST','AmPayService','TrapayAPI/1.0','GHA','JPN','SVN','MYS','MDA','processWebhook','NOR','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20event...','CZE','error_message','‚ö†Ô∏è\x20WEBHOOKS\x20TEMPORARILY\x20DISABLED\x20-\x20Always\x20returning\x20PROCESSING\x20status','‚ùå\x20AmPay\x20health\x20check\x20failed:','12pbcMmi','NLD','KOR','AUS','FIN','CHE','a5a059aa63392e571341bddc5148a5db66643722e9a6bf16a9395fb690a80288931d5a1180a85a28eb9f6516cf61dfc1bf4e37898f3a35261cd2db88888d3815','URY','object','toUpperCase','MUS','NPL','KGZ','Unknown\x20error','üá¶üá≤\x20Creating\x20AmPay\x20payment\x20link...','COL','üì§\x20AmPay\x20request\x20body:','BIH','Customer:','ARE','USA','AFG','keys','BHR','NGA','BOL','GEO','AND','UZB','health.php','BRA','LVA','message','üìù\x20Logging\x20AmPay\x20payment\x20creation\x20failure...','API_PRIVATE_KEY','YEM','CHN','KAZ','apiUrl','Webhook\x20data:','KWT','850810YxgImY','amount','System\x20ID:','MWI','SGP','SAU','BGD','redirect_url','LUX','createPaymentLink','KHM','IND','parse','üì•\x20AmPay\x20raw\x20response:','AUT','MMR','MKD','TZA','Customer\x20Country\x20(2-letter):','UGA','ALB','warn','3434830IzJweV','QAT','https://traffer.uk/gateway/ampay/','tracker_id','REU','Webhook\x20data\x20type:','__esModule','IRQ','MNG','DEU','SMR','stringify','PRK','FLK','6gHLPHX','ampayService','FRA','GUY','JOR','KEN','IDN','ZAF','GBR','https://traffer.uk/gateway/ampay/webhook.php','MEX','LTU','LKA','1eCFoKp','MNE','CHL','system_id','CAN','CYP','EST','currency','VNM','AZE','SYR','Amount:','IRN','ARM','MDV','üìä\x20AmPay\x20response\x20data:','No\x20payment\x20ID\x20found\x20in\x20webhook\x20data','IRL','ARG','client_transaction_id','RUS','Payment\x20URL:','BTN','ZMB','===\x20Processing\x20AmPay\x20webhook\x20===','XKX','AmPay\x20API\x20error:\x20HTTP\x20','MCO','BGR','Extracted\x20payment\x20ID:\x20','PSE','BEL','1036665ZuTqxX','DNK','ISL','ampay.php','BLR','EGY'];a52_0x11bb=function(){return _0x26f8ae;};return a52_0x11bb();}