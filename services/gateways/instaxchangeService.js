'use strict';function a58_0x214d(){const _0x26c400=['card','timeout','HTTP\x20','stringify','parse','841128Ethmxw','üê≥\x20Creating\x20InstaXChange\x20payment\x20session:','proxyUrl','split','sending','from_currency','application/json','createPayment','from_amount','InstaXChange\x20payment\x20creation\x20failed:\x20','message','268380yBExHp','5921600FnYzxH','INSTAXCHANGE_WALLET_ADDRESS','https://tesoft.uk/gateway/instaxchange/create.php','slice','N/A','üì§\x20Sending\x20request\x20to\x20InstaXChange\x20proxy:','6CHjKBY','error','https://tesoft.uk/gateway/instaxchange/webhook.php?paymentId=','‚ùå\x20Failed\x20to\x20parse\x20JSON\x20response:','\x20\x20\x20Last\x20Name:\x20','802120kPQyzZ','https://instaxchange.com/order/','üì•\x20InstaXChange\x20proxy\x20response:','status','\x20\x20\x20Error\x20details:','env','InstaXChange\x20payment\x20creation\x20failed:\x20Unknown\x20error','1238034OwxSah','\x20\x20\x20Amount:\x20','__esModule','Invalid\x20JSON\x20response\x20from\x20proxy:\x20','log','statusText','to_amount','substring','INSTAXCHANGE_ACCOUNT_REF_ID','66965fnSkaq','InstaXChangeService','Customer','\x20\x20\x20Order\x20ID:\x20','1191fTXxfY'];a58_0x214d=function(){return _0x26c400;};return a58_0x214d();}const a58_0x3c1e91=a58_0x3427;(function(_0x15e6e7,_0xbbd142){const _0x296322=a58_0x3427,_0x4af717=_0x15e6e7();while(!![]){try{const _0x6be7ea=-parseInt(_0x296322(0x107))/0x1+-parseInt(_0x296322(0x123))/0x2*(-parseInt(_0x296322(0x10b))/0x3)+-parseInt(_0x296322(0xf7))/0x4+-parseInt(_0x296322(0x11c))/0x5+-parseInt(_0x296322(0x111))/0x6+-parseInt(_0x296322(0xfe))/0x7+parseInt(_0x296322(0x11d))/0x8;if(_0x6be7ea===_0xbbd142)break;else _0x4af717['push'](_0x4af717['shift']());}catch(_0x17b558){_0x4af717['push'](_0x4af717['shift']());}}}(a58_0x214d,0x19302));function a58_0x3427(_0x378dd7,_0x44e302){_0x378dd7=_0x378dd7-0xf3;const _0x214d54=a58_0x214d();let _0x34276f=_0x214d54[_0x378dd7];return _0x34276f;}Object['defineProperty'](exports,a58_0x3c1e91(0x100),{'value':!![]}),exports['InstaXChangeService']=void 0x0;class InstaXChangeService{constructor(){const _0x29bfbe=a58_0x3c1e91;this[_0x29bfbe(0x113)]=_0x29bfbe(0x11f);}async[a58_0x3c1e91(0x118)](_0x5904b3){const _0x304303=a58_0x3c1e91,{paymentId:_0x21b00f,orderId:_0x5439ea,amount:_0x8b0ce6,currency:_0x12c20b,method:method=_0x304303(0x10c),customerEmail:_0x380448,customerName:_0x2f84a9,returnUrl:_0xa26211}=_0x5904b3;console['log'](_0x304303(0x112)),console[_0x304303(0x102)]('\x20\x20\x20Payment\x20ID:\x20'+_0x21b00f),console['log'](_0x304303(0x10a)+_0x5439ea),console[_0x304303(0x102)](_0x304303(0xff)+_0x8b0ce6+'\x20'+_0x12c20b),console[_0x304303(0x102)]('\x20\x20\x20Method:\x20'+method),console['log']('\x20\x20\x20Customer:\x20'+(_0x2f84a9||_0x304303(0x121))+'\x20('+(_0x380448||_0x304303(0x121))+')');let _0x41f9d7='Customer',_0x35d271='';if(_0x2f84a9){const _0x1d5f92=_0x2f84a9['trim']()[_0x304303(0x114)]('\x20');_0x41f9d7=_0x1d5f92[0x0]||_0x304303(0x109),_0x35d271=_0x1d5f92[_0x304303(0x120)](0x1)['join']('\x20')||'';}console[_0x304303(0x102)]('\x20\x20\x20First\x20Name:\x20'+_0x41f9d7),console[_0x304303(0x102)](_0x304303(0xf6)+_0x35d271);const _0xf21ed1={'accountRefId':process[_0x304303(0xfc)][_0x304303(0x106)],'fromAmount':_0x8b0ce6,'toCurrency':'USDC','fromCurrency':_0x12c20b,'address':process['env'][_0x304303(0x11e)],'amountDirection':_0x304303(0x115),'webhookRef':_0x304303(0xf4)+_0x21b00f,'returnUrl':_0xa26211,'method':method,'email':_0x380448||'','firstName':_0x41f9d7,'lastName':_0x35d271};console[_0x304303(0x102)](_0x304303(0x122),_0xf21ed1);try{const _0x50c21f=await fetch(this['proxyUrl'],{'method':'POST','headers':{'Content-Type':_0x304303(0x117)},'body':JSON[_0x304303(0x10f)](_0xf21ed1),'signal':AbortSignal[_0x304303(0x10d)](0x7530)});console[_0x304303(0x102)]('üì•\x20InstaXChange\x20proxy\x20HTTP\x20status:\x20'+_0x50c21f['status']+'\x20'+_0x50c21f[_0x304303(0x103)]);const _0x372c65=await _0x50c21f['text']();console[_0x304303(0x102)]('üì•\x20InstaXChange\x20proxy\x20raw\x20response:',_0x372c65);let _0x4c29f3;try{_0x4c29f3=JSON[_0x304303(0x110)](_0x372c65);}catch(_0x2a0cd5){console[_0x304303(0xf3)](_0x304303(0xf5),_0x2a0cd5);throw new Error(_0x304303(0x101)+_0x372c65[_0x304303(0x105)](0x0,0xc8));}console[_0x304303(0x102)](_0x304303(0xf9),_0x4c29f3);if(!_0x50c21f['ok']){const _0x41a7bb=_0x4c29f3?.['error']||_0x4c29f3?.[_0x304303(0x11b)]||_0x304303(0x10e)+_0x50c21f[_0x304303(0xfa)]+':\x20'+_0x50c21f[_0x304303(0x103)];console['error'](_0x304303(0xfb),_0x4c29f3);throw new Error(_0x304303(0x11a)+_0x41a7bb);}if(!_0x4c29f3||!_0x4c29f3['id'])throw new Error('Invalid\x20response\x20from\x20InstaXChange\x20proxy');const _0x5e05c7=_0x4c29f3['id'],_0x2be186=_0x304303(0xf8)+_0x5e05c7;return console[_0x304303(0x102)]('‚úÖ\x20InstaXChange\x20payment\x20session\x20created:'),console[_0x304303(0x102)]('\x20\x20\x20Session\x20ID:\x20'+_0x5e05c7),console['log']('\x20\x20\x20Payment\x20URL:\x20'+_0x2be186),console['log']('\x20\x20\x20Status:\x20'+_0x4c29f3[_0x304303(0xfa)]),console[_0x304303(0x102)]('\x20\x20\x20From\x20Amount:\x20'+_0x4c29f3[_0x304303(0x119)]+'\x20'+_0x4c29f3[_0x304303(0x116)]),console[_0x304303(0x102)]('\x20\x20\x20To\x20Amount:\x20'+_0x4c29f3[_0x304303(0x104)]+'\x20'+_0x4c29f3['to_currency']),{'gateway_payment_id':_0x5e05c7,'payment_url':_0x2be186,'session_id':_0x5e05c7,'status':_0x4c29f3[_0x304303(0xfa)],'from_amount':_0x4c29f3[_0x304303(0x119)],'to_amount':_0x4c29f3[_0x304303(0x104)]};}catch(_0x2152a8){console[_0x304303(0xf3)]('‚ùå\x20InstaXChange\x20proxy\x20request\x20failed:',_0x2152a8);if(_0x2152a8 instanceof Error)throw new Error(_0x304303(0x11a)+_0x2152a8['message']);throw new Error(_0x304303(0xfd));}}}exports[a58_0x3c1e91(0x108)]=InstaXChangeService;