'use strict';function a66_0x55ef(_0x544f80,_0xa8c676){_0x544f80=_0x544f80-0xe9;const _0x2cba1d=a66_0x2cba();let _0x55ef41=_0x2cba1d[_0x544f80];return _0x55ef41;}const a66_0x3237f9=a66_0x55ef;(function(_0x399be1,_0x1aa775){const _0x1ef14d=a66_0x55ef,_0x14a569=_0x399be1();while(!![]){try{const _0x271eab=parseInt(_0x1ef14d(0x118))/0x1*(-parseInt(_0x1ef14d(0xff))/0x2)+-parseInt(_0x1ef14d(0x105))/0x3+parseInt(_0x1ef14d(0x101))/0x4+parseInt(_0x1ef14d(0xf0))/0x5*(parseInt(_0x1ef14d(0x10e))/0x6)+-parseInt(_0x1ef14d(0x10d))/0x7+parseInt(_0x1ef14d(0x11d))/0x8+-parseInt(_0x1ef14d(0x11b))/0x9*(-parseInt(_0x1ef14d(0x100))/0xa);if(_0x271eab===_0x1aa775)break;else _0x14a569['push'](_0x14a569['shift']());}catch(_0x1f4336){_0x14a569['push'](_0x14a569['shift']());}}}(a66_0x2cba,0xc1dc3));Object[a66_0x3237f9(0xf6)](exports,a66_0x3237f9(0x10a),{'value':!![]}),exports[a66_0x3237f9(0x114)]=void 0x0;function a66_0x2cba(){const _0x348bb6=['log','proxyUrl','Invalid\x20response\x20from\x20InstaXChange\x20proxy','https://tesoft.uk/gateway/instaxchange/create.php','‚ùå\x20Failed\x20to\x20parse\x20JSON\x20response:','application/json','text','\x20\x20\x20From\x20Amount:\x20','status','55ODRyTn','https://tesoft.uk/gateway/instaxchange/webhook.php?paymentId=','InstaXChange\x20payment\x20creation\x20failed:\x20','parse','substring','üê≥\x20Creating\x20InstaXChange\x20payment\x20session:','defineProperty','üì§\x20Sending\x20request\x20to\x20InstaXChange\x20proxy:','\x20\x20\x20Method:\x20','‚úÖ\x20InstaXChange\x20payment\x20session\x20created:','\x20\x20\x20Session\x20ID:\x20','createPayment','join','https://instaxchange.com/order/','sending','4FZzMfw','1520110YaNTNI','2777428FFjMCV','message','timeout','üì•\x20InstaXChange\x20proxy\x20HTTP\x20status:\x20','3767931esRJzO','from_currency','N/A','\x20\x20\x20Order\x20ID:\x20','slice','__esModule','error','HTTP\x20','2827223gyGfhQ','265260eEbNGm','\x20\x20\x20Last\x20Name:\x20','Customer','from_amount','\x20\x20\x20First\x20Name:\x20','to_amount','InstaXChangeService','InstaXChange\x20payment\x20creation\x20failed:\x20Unknown\x20error','stringify','POST','7472entuhn','card','\x20\x20\x20Amount:\x20','27ChAJbS','statusText','6657288ZaAxjN','\x20\x20\x20Error\x20details:','\x20\x20\x20Payment\x20ID:\x20','\x20\x20\x20Customer:\x20','‚ùå\x20InstaXChange\x20proxy\x20request\x20failed:'];a66_0x2cba=function(){return _0x348bb6;};return a66_0x2cba();}class InstaXChangeService{constructor(){const _0x328016=a66_0x3237f9;this[_0x328016(0x123)]=_0x328016(0xea);}async[a66_0x3237f9(0xfb)](_0x3a8215){const _0x23831c=a66_0x3237f9,{paymentId:_0x398bde,orderId:_0x4ef6b6,amount:_0x3f971e,currency:_0xa6e27c,method:method=_0x23831c(0x119),customerEmail:_0x36e55b,customerName:_0x31f620,returnUrl:_0x291ac3}=_0x3a8215;console[_0x23831c(0x122)](_0x23831c(0xf5)),console[_0x23831c(0x122)](_0x23831c(0x11f)+_0x398bde),console[_0x23831c(0x122)](_0x23831c(0x108)+_0x4ef6b6),console[_0x23831c(0x122)](_0x23831c(0x11a)+_0x3f971e+'\x20'+_0xa6e27c),console['log'](_0x23831c(0xf8)+method),console[_0x23831c(0x122)](_0x23831c(0x120)+(_0x31f620||_0x23831c(0x107))+'\x20('+(_0x36e55b||_0x23831c(0x107))+')');let _0x746ea2=_0x23831c(0x110),_0x2c1385='';if(_0x31f620){const _0x2c7e60=_0x31f620['trim']()['split']('\x20');_0x746ea2=_0x2c7e60[0x0]||'Customer',_0x2c1385=_0x2c7e60[_0x23831c(0x109)](0x1)[_0x23831c(0xfc)]('\x20')||'';}console[_0x23831c(0x122)](_0x23831c(0x112)+_0x746ea2),console['log'](_0x23831c(0x10f)+_0x2c1385);const _0x304a3e={'accountRefId':process.env.INSTAXCHANGE_ACCOUNT_REF_ID,'fromAmount':_0x3f971e,'toCurrency':'USDC','fromCurrency':_0xa6e27c,'address':process.env.INSTAXCHANGE_WALLET_ADDRESS,'amountDirection':_0x23831c(0xfe),'webhookRef':_0x23831c(0xf1)+_0x398bde,'returnUrl':_0x291ac3,'method':method,'email':_0x36e55b||'','firstName':_0x746ea2,'lastName':_0x2c1385};console[_0x23831c(0x122)](_0x23831c(0xf7),_0x304a3e);try{const _0x174076=await fetch(this[_0x23831c(0x123)],{'method':_0x23831c(0x117),'headers':{'Content-Type':_0x23831c(0xec)},'body':JSON[_0x23831c(0x116)](_0x304a3e),'signal':AbortSignal[_0x23831c(0x103)](0x7530)});console[_0x23831c(0x122)](_0x23831c(0x104)+_0x174076[_0x23831c(0xef)]+'\x20'+_0x174076[_0x23831c(0x11c)]);const _0x244cad=await _0x174076[_0x23831c(0xed)]();console[_0x23831c(0x122)]('üì•\x20InstaXChange\x20proxy\x20raw\x20response:',_0x244cad);let _0x17009e;try{_0x17009e=JSON[_0x23831c(0xf3)](_0x244cad);}catch(_0x1734c1){console[_0x23831c(0x10b)](_0x23831c(0xeb),_0x1734c1);throw new Error('Invalid\x20JSON\x20response\x20from\x20proxy:\x20'+_0x244cad[_0x23831c(0xf4)](0x0,0xc8));}console[_0x23831c(0x122)]('üì•\x20InstaXChange\x20proxy\x20response:',_0x17009e);if(!_0x174076['ok']){const _0x234c6b=_0x17009e?.['error']||_0x17009e?.[_0x23831c(0x102)]||_0x23831c(0x10c)+_0x174076[_0x23831c(0xef)]+':\x20'+_0x174076[_0x23831c(0x11c)];console[_0x23831c(0x10b)](_0x23831c(0x11e),_0x17009e);throw new Error(_0x23831c(0xf2)+_0x234c6b);}if(!_0x17009e||!_0x17009e['id'])throw new Error(_0x23831c(0xe9));const _0x406369=_0x17009e['id'],_0x18754b=_0x23831c(0xfd)+_0x406369;return console['log'](_0x23831c(0xf9)),console['log'](_0x23831c(0xfa)+_0x406369),console['log']('\x20\x20\x20Payment\x20URL:\x20'+_0x18754b),console[_0x23831c(0x122)]('\x20\x20\x20Status:\x20'+_0x17009e[_0x23831c(0xef)]),console['log'](_0x23831c(0xee)+_0x17009e[_0x23831c(0x111)]+'\x20'+_0x17009e[_0x23831c(0x106)]),console[_0x23831c(0x122)]('\x20\x20\x20To\x20Amount:\x20'+_0x17009e[_0x23831c(0x113)]+'\x20'+_0x17009e['to_currency']),{'gateway_payment_id':_0x406369,'payment_url':_0x18754b,'session_id':_0x406369,'status':_0x17009e[_0x23831c(0xef)],'from_amount':_0x17009e['from_amount'],'to_amount':_0x17009e[_0x23831c(0x113)]};}catch(_0x58244e){console[_0x23831c(0x10b)](_0x23831c(0x121),_0x58244e);if(_0x58244e instanceof Error)throw new Error(_0x23831c(0xf2)+_0x58244e[_0x23831c(0x102)]);throw new Error(_0x23831c(0x115));}}}exports['InstaXChangeService']=InstaXChangeService;