'use strict';const a66_0xc09209=a66_0x351a;(function(_0x39b45b,_0x254a58){const _0x7157da=a66_0x351a,_0x3e601d=_0x39b45b();while(!![]){try{const _0x296d2e=-parseInt(_0x7157da(0x178))/0x1*(parseInt(_0x7157da(0x169))/0x2)+-parseInt(_0x7157da(0x16a))/0x3+-parseInt(_0x7157da(0x187))/0x4+parseInt(_0x7157da(0x17b))/0x5*(parseInt(_0x7157da(0x181))/0x6)+parseInt(_0x7157da(0x170))/0x7+-parseInt(_0x7157da(0x172))/0x8*(-parseInt(_0x7157da(0x153))/0x9)+parseInt(_0x7157da(0x176))/0xa;if(_0x296d2e===_0x254a58)break;else _0x3e601d['push'](_0x3e601d['shift']());}catch(_0x2c92c6){_0x3e601d['push'](_0x3e601d['shift']());}}}(a66_0x47c4,0x613ed));function a66_0x351a(_0x268d64,_0x277bd8){_0x268d64=_0x268d64-0x150;const _0x47c4c5=a66_0x47c4();let _0x351aaa=_0x47c4c5[_0x268d64];return _0x351aaa;}function a66_0x47c4(){const _0x234ab0=['HTTP\x20','log','defineProperty','\x20\x20\x20Method:\x20','1060028KWuTJw','to_currency','__esModule','‚úÖ\x20InstaXChange\x20payment\x20session\x20created:','27KsXvOv','status','statusText','createPayment','error','\x20\x20\x20From\x20Amount:\x20','join','‚ùå\x20Failed\x20to\x20parse\x20JSON\x20response:','InstaXChange\x20payment\x20creation\x20failed:\x20','stringify','\x20\x20\x20Session\x20ID:\x20','\x20\x20\x20First\x20Name:\x20','Invalid\x20JSON\x20response\x20from\x20proxy:\x20','üì•\x20InstaXChange\x20proxy\x20HTTP\x20status:\x20','substring','\x20\x20\x20Last\x20Name:\x20','https://instaxchange.com/order/','from_amount','üì§\x20Sending\x20request\x20to\x20InstaXChange\x20proxy:','Customer','InstaXChange\x20payment\x20creation\x20failed:\x20Unknown\x20error','message','151546AlyYaK','1315065xOaqSk','text','split','N/A','\x20\x20\x20Amount:\x20','sending','3662064QzShzg','‚ùå\x20InstaXChange\x20proxy\x20request\x20failed:','1303384ayxMHV','trim','üì•\x20InstaXChange\x20proxy\x20raw\x20response:','timeout','1658400Jhmxcr','application/json','5GAItgf','from_currency','üì•\x20InstaXChange\x20proxy\x20response:','5iBlrHZ','\x20\x20\x20To\x20Amount:\x20','Invalid\x20response\x20from\x20InstaXChange\x20proxy','proxyUrl','\x20\x20\x20Order\x20ID:\x20','\x20\x20\x20Payment\x20ID:\x20','1816698EKKtCR','InstaXChangeService'];a66_0x47c4=function(){return _0x234ab0;};return a66_0x47c4();}Object[a66_0xc09209(0x185)](exports,a66_0xc09209(0x151),{'value':!![]}),exports['InstaXChangeService']=void 0x0;class InstaXChangeService{constructor(){const _0xf4d91d=a66_0xc09209;this[_0xf4d91d(0x17e)]='https://tesoft.uk/gateway/instaxchange/create.php';}async[a66_0xc09209(0x156)](_0x281296){const _0x4febf7=a66_0xc09209,{paymentId:_0x38f4c7,orderId:_0xf04cbf,amount:_0x164f1b,currency:_0x2393ff,method:method='card',customerEmail:_0x435608,customerName:_0xf9e7f6,returnUrl:_0x2278e6}=_0x281296;console['log']('üê≥\x20Creating\x20InstaXChange\x20payment\x20session:'),console[_0x4febf7(0x184)](_0x4febf7(0x180)+_0x38f4c7),console[_0x4febf7(0x184)](_0x4febf7(0x17f)+_0xf04cbf),console['log'](_0x4febf7(0x16e)+_0x164f1b+'\x20'+_0x2393ff),console[_0x4febf7(0x184)](_0x4febf7(0x186)+method),console[_0x4febf7(0x184)]('\x20\x20\x20Customer:\x20'+(_0xf9e7f6||_0x4febf7(0x16d))+'\x20('+(_0x435608||_0x4febf7(0x16d))+')');let _0x31f971='Customer',_0x1dcb9e='';if(_0xf9e7f6){const _0x36223d=_0xf9e7f6[_0x4febf7(0x173)]()[_0x4febf7(0x16c)]('\x20');_0x31f971=_0x36223d[0x0]||_0x4febf7(0x166),_0x1dcb9e=_0x36223d['slice'](0x1)[_0x4febf7(0x159)]('\x20')||'';}console[_0x4febf7(0x184)](_0x4febf7(0x15e)+_0x31f971),console['log'](_0x4febf7(0x162)+_0x1dcb9e);const _0x1cfb20={'accountRefId':process.env.INSTAXCHANGE_ACCOUNT_REF_ID,'fromAmount':_0x164f1b,'toCurrency':'USDC','fromCurrency':_0x2393ff,'address':process.env.INSTAXCHANGE_WALLET_ADDRESS,'amountDirection':_0x4febf7(0x16f),'webhookRef':'https://tesoft.uk/gateway/instaxchange/webhook.php?paymentId='+_0x38f4c7,'returnUrl':_0x2278e6,'method':method,'email':_0x435608||'','firstName':_0x31f971,'lastName':_0x1dcb9e};console[_0x4febf7(0x184)](_0x4febf7(0x165),_0x1cfb20);try{const _0x21520e=await fetch(this[_0x4febf7(0x17e)],{'method':'POST','headers':{'Content-Type':_0x4febf7(0x177)},'body':JSON[_0x4febf7(0x15c)](_0x1cfb20),'signal':AbortSignal[_0x4febf7(0x175)](0x7530)});console[_0x4febf7(0x184)](_0x4febf7(0x160)+_0x21520e[_0x4febf7(0x154)]+'\x20'+_0x21520e[_0x4febf7(0x155)]);const _0x34230f=await _0x21520e[_0x4febf7(0x16b)]();console[_0x4febf7(0x184)](_0x4febf7(0x174),_0x34230f);let _0x11b6bf;try{_0x11b6bf=JSON['parse'](_0x34230f);}catch(_0x26f759){console[_0x4febf7(0x157)](_0x4febf7(0x15a),_0x26f759);throw new Error(_0x4febf7(0x15f)+_0x34230f[_0x4febf7(0x161)](0x0,0xc8));}console['log'](_0x4febf7(0x17a),_0x11b6bf);if(!_0x21520e['ok']){const _0x66508c=_0x11b6bf?.[_0x4febf7(0x157)]||_0x11b6bf?.[_0x4febf7(0x168)]||_0x4febf7(0x183)+_0x21520e[_0x4febf7(0x154)]+':\x20'+_0x21520e[_0x4febf7(0x155)];console['error']('\x20\x20\x20Error\x20details:',_0x11b6bf);throw new Error(_0x4febf7(0x15b)+_0x66508c);}if(!_0x11b6bf||!_0x11b6bf['id'])throw new Error(_0x4febf7(0x17d));const _0x38c3fc=_0x11b6bf['id'],_0xefcf55=_0x4febf7(0x163)+_0x38c3fc;return console[_0x4febf7(0x184)](_0x4febf7(0x152)),console[_0x4febf7(0x184)](_0x4febf7(0x15d)+_0x38c3fc),console[_0x4febf7(0x184)]('\x20\x20\x20Payment\x20URL:\x20'+_0xefcf55),console[_0x4febf7(0x184)]('\x20\x20\x20Status:\x20'+_0x11b6bf[_0x4febf7(0x154)]),console['log'](_0x4febf7(0x158)+_0x11b6bf[_0x4febf7(0x164)]+'\x20'+_0x11b6bf[_0x4febf7(0x179)]),console[_0x4febf7(0x184)](_0x4febf7(0x17c)+_0x11b6bf['to_amount']+'\x20'+_0x11b6bf[_0x4febf7(0x150)]),{'gateway_payment_id':_0x38c3fc,'payment_url':_0xefcf55,'session_id':_0x38c3fc,'status':_0x11b6bf[_0x4febf7(0x154)],'from_amount':_0x11b6bf[_0x4febf7(0x164)],'to_amount':_0x11b6bf['to_amount']};}catch(_0x5ea08b){console[_0x4febf7(0x157)](_0x4febf7(0x171),_0x5ea08b);if(_0x5ea08b instanceof Error)throw new Error(_0x4febf7(0x15b)+_0x5ea08b[_0x4febf7(0x168)]);throw new Error(_0x4febf7(0x167));}}}exports[a66_0xc09209(0x182)]=InstaXChangeService;