'use strict';function a66_0x3044(){const _0x6ff149=['\x20\x20\x20Amount:\x20','14nqXJoT','https://tesoft.uk/gateway/instaxchange/webhook.php?paymentId=','‚ùå\x20Failed\x20to\x20parse\x20JSON\x20response:','sending','‚ùå\x20InstaXChange\x20proxy\x20request\x20failed:','POST','\x20\x20\x20Session\x20ID:\x20','log','substring','error','parse','to_amount','33451fkBvYk','üì•\x20InstaXChange\x20proxy\x20response:','3535182AXqKlP','defineProperty','üì•\x20InstaXChange\x20proxy\x20raw\x20response:','87lbHPor','N/A','proxyUrl','Customer','message','190SCTQEl','createPayment','join','Invalid\x20response\x20from\x20InstaXChange\x20proxy','8QsDnkg','https://tesoft.uk/gateway/instaxchange/create.php','\x20\x20\x20Order\x20ID:\x20','62784UgudvC','1030xYBrOY','application/json','\x20\x20\x20Error\x20details:','trim','\x20\x20\x20Payment\x20URL:\x20','‚úÖ\x20InstaXChange\x20payment\x20session\x20created:','status','InstaXChangeService','to_currency','from_amount','__esModule','\x20\x20\x20To\x20Amount:\x20','slice','\x20\x20\x20Last\x20Name:\x20','split','üì•\x20InstaXChange\x20proxy\x20HTTP\x20status:\x20','3096228IhCRPM','HTTP\x20','üê≥\x20Creating\x20InstaXChange\x20payment\x20session:','6812npqwYl','from_currency','timeout','126616EcLTwr','üì§\x20Sending\x20request\x20to\x20InstaXChange\x20proxy:','USDC','792027WbsBHE','Invalid\x20JSON\x20response\x20from\x20proxy:\x20'];a66_0x3044=function(){return _0x6ff149;};return a66_0x3044();}const a66_0x42afa8=a66_0x4cee;(function(_0x5ca7de,_0x19aaad){const _0x519e6f=a66_0x4cee,_0x21563a=_0x5ca7de();while(!![]){try{const _0x3fdd78=-parseInt(_0x519e6f(0x160))/0x1*(parseInt(_0x519e6f(0x15a))/0x2)+-parseInt(_0x519e6f(0x171))/0x3*(-parseInt(_0x519e6f(0x157))/0x4)+parseInt(_0x519e6f(0x176))/0x5*(parseInt(_0x519e6f(0x17d))/0x6)+parseInt(_0x519e6f(0x16e))/0x7+parseInt(_0x519e6f(0x17a))/0x8*(-parseInt(_0x519e6f(0x15d))/0x9)+-parseInt(_0x519e6f(0x17e))/0xa*(-parseInt(_0x519e6f(0x16c))/0xb)+parseInt(_0x519e6f(0x154))/0xc;if(_0x3fdd78===_0x19aaad)break;else _0x21563a['push'](_0x21563a['shift']());}catch(_0x410fca){_0x21563a['push'](_0x21563a['shift']());}}}(a66_0x3044,0x8606c));Object[a66_0x42afa8(0x16f)](exports,a66_0x42afa8(0x188),{'value':!![]}),exports[a66_0x42afa8(0x185)]=void 0x0;class InstaXChangeService{constructor(){const _0xdf09e0=a66_0x42afa8;this[_0xdf09e0(0x173)]=_0xdf09e0(0x17b);}async[a66_0x42afa8(0x177)](_0x17618){const _0x51b6b0=a66_0x42afa8,{paymentId:_0x2dd36d,orderId:_0x5f3085,amount:_0x3f1c66,currency:_0x491b2d,method:method='card',customerEmail:_0x11980c,customerName:_0x4ad949,returnUrl:_0x2835f5}=_0x17618;console[_0x51b6b0(0x167)](_0x51b6b0(0x156)),console[_0x51b6b0(0x167)]('\x20\x20\x20Payment\x20ID:\x20'+_0x2dd36d),console['log'](_0x51b6b0(0x17c)+_0x5f3085),console[_0x51b6b0(0x167)](_0x51b6b0(0x15f)+_0x3f1c66+'\x20'+_0x491b2d),console[_0x51b6b0(0x167)]('\x20\x20\x20Method:\x20'+method),console[_0x51b6b0(0x167)]('\x20\x20\x20Customer:\x20'+(_0x4ad949||'N/A')+'\x20('+(_0x11980c||_0x51b6b0(0x172))+')');let _0x1f0b97='Customer',_0x3318b9='';if(_0x4ad949){const _0x1c8dd5=_0x4ad949[_0x51b6b0(0x181)]()[_0x51b6b0(0x152)]('\x20');_0x1f0b97=_0x1c8dd5[0x0]||_0x51b6b0(0x174),_0x3318b9=_0x1c8dd5[_0x51b6b0(0x150)](0x1)[_0x51b6b0(0x178)]('\x20')||'';}console[_0x51b6b0(0x167)]('\x20\x20\x20First\x20Name:\x20'+_0x1f0b97),console['log'](_0x51b6b0(0x151)+_0x3318b9);const _0x44ea57={'accountRefId':process.env.INSTAXCHANGE_ACCOUNT_REF_ID,'fromAmount':_0x3f1c66,'toCurrency':_0x51b6b0(0x15c),'fromCurrency':_0x491b2d,'address':process.env.INSTAXCHANGE_WALLET_ADDRESS,'amountDirection':_0x51b6b0(0x163),'webhookRef':_0x51b6b0(0x161)+_0x2dd36d,'returnUrl':_0x2835f5,'method':method,'email':_0x11980c||'','firstName':_0x1f0b97,'lastName':_0x3318b9};console[_0x51b6b0(0x167)](_0x51b6b0(0x15b),_0x44ea57);try{const _0x3a3eae=await fetch(this[_0x51b6b0(0x173)],{'method':_0x51b6b0(0x165),'headers':{'Content-Type':_0x51b6b0(0x17f)},'body':JSON['stringify'](_0x44ea57),'signal':AbortSignal[_0x51b6b0(0x159)](0x7530)});console[_0x51b6b0(0x167)](_0x51b6b0(0x153)+_0x3a3eae['status']+'\x20'+_0x3a3eae['statusText']);const _0x538cde=await _0x3a3eae['text']();console[_0x51b6b0(0x167)](_0x51b6b0(0x170),_0x538cde);let _0x4c3433;try{_0x4c3433=JSON[_0x51b6b0(0x16a)](_0x538cde);}catch(_0x3fd66c){console[_0x51b6b0(0x169)](_0x51b6b0(0x162),_0x3fd66c);throw new Error(_0x51b6b0(0x15e)+_0x538cde[_0x51b6b0(0x168)](0x0,0xc8));}console[_0x51b6b0(0x167)](_0x51b6b0(0x16d),_0x4c3433);if(!_0x3a3eae['ok']){const _0x53e1b9=_0x4c3433?.[_0x51b6b0(0x169)]||_0x4c3433?.[_0x51b6b0(0x175)]||_0x51b6b0(0x155)+_0x3a3eae[_0x51b6b0(0x184)]+':\x20'+_0x3a3eae['statusText'];console[_0x51b6b0(0x169)](_0x51b6b0(0x180),_0x4c3433);throw new Error('InstaXChange\x20payment\x20creation\x20failed:\x20'+_0x53e1b9);}if(!_0x4c3433||!_0x4c3433['id'])throw new Error(_0x51b6b0(0x179));const _0xae8a8c=_0x4c3433['id'],_0x34367b='https://instaxchange.com/order/'+_0xae8a8c;return console[_0x51b6b0(0x167)](_0x51b6b0(0x183)),console[_0x51b6b0(0x167)](_0x51b6b0(0x166)+_0xae8a8c),console[_0x51b6b0(0x167)](_0x51b6b0(0x182)+_0x34367b),console[_0x51b6b0(0x167)]('\x20\x20\x20Status:\x20'+_0x4c3433[_0x51b6b0(0x184)]),console[_0x51b6b0(0x167)]('\x20\x20\x20From\x20Amount:\x20'+_0x4c3433[_0x51b6b0(0x187)]+'\x20'+_0x4c3433[_0x51b6b0(0x158)]),console[_0x51b6b0(0x167)](_0x51b6b0(0x14f)+_0x4c3433['to_amount']+'\x20'+_0x4c3433[_0x51b6b0(0x186)]),{'gateway_payment_id':_0xae8a8c,'payment_url':_0x34367b,'session_id':_0xae8a8c,'status':_0x4c3433['status'],'from_amount':_0x4c3433[_0x51b6b0(0x187)],'to_amount':_0x4c3433[_0x51b6b0(0x16b)]};}catch(_0x4d60d9){console['error'](_0x51b6b0(0x164),_0x4d60d9);if(_0x4d60d9 instanceof Error)throw new Error('InstaXChange\x20payment\x20creation\x20failed:\x20'+_0x4d60d9[_0x51b6b0(0x175)]);throw new Error('InstaXChange\x20payment\x20creation\x20failed:\x20Unknown\x20error');}}}function a66_0x4cee(_0x2651bf,_0x4c1292){_0x2651bf=_0x2651bf-0x14f;const _0x3044aa=a66_0x3044();let _0x4cee8c=_0x3044aa[_0x2651bf];return _0x4cee8c;}exports[a66_0x42afa8(0x185)]=InstaXChangeService;