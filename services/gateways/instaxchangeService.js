'use strict';const a66_0x46effa=a66_0x2c55;(function(_0x3ddf92,_0x3ee9be){const _0x13ddc9=a66_0x2c55,_0x44923c=_0x3ddf92();while(!![]){try{const _0x42447b=-parseInt(_0x13ddc9(0x1ec))/0x1*(-parseInt(_0x13ddc9(0x1e8))/0x2)+-parseInt(_0x13ddc9(0x1de))/0x3*(parseInt(_0x13ddc9(0x1e0))/0x4)+-parseInt(_0x13ddc9(0x1f3))/0x5+-parseInt(_0x13ddc9(0x1e9))/0x6+parseInt(_0x13ddc9(0x204))/0x7*(-parseInt(_0x13ddc9(0x1e4))/0x8)+parseInt(_0x13ddc9(0x1dc))/0x9*(parseInt(_0x13ddc9(0x1f6))/0xa)+-parseInt(_0x13ddc9(0x1d3))/0xb*(-parseInt(_0x13ddc9(0x1d1))/0xc);if(_0x42447b===_0x3ee9be)break;else _0x44923c['push'](_0x44923c['shift']());}catch(_0x4c8618){_0x44923c['push'](_0x44923c['shift']());}}}(a66_0x1105,0xcdaf0));function a66_0x2c55(_0x435a09,_0x285a3b){_0x435a09=_0x435a09-0x1d0;const _0x1105ba=a66_0x1105();let _0x2c5584=_0x1105ba[_0x435a09];return _0x2c5584;}Object[a66_0x46effa(0x1e5)](exports,'__esModule',{'value':!![]}),exports[a66_0x46effa(0x1d9)]=void 0x0;function a66_0x1105(){const _0x37f969=['\x20\x20\x20Payment\x20URL:\x20','Invalid\x20response\x20from\x20InstaXChange\x20proxy','stringify','message','\x20\x20\x20Last\x20Name:\x20','\x20\x20\x20Status:\x20','from_currency','to_amount','Customer','text','InstaXChange\x20payment\x20creation\x20failed:\x20','\x20\x20\x20Order\x20ID:\x20','trim','14602FwpYoR','InstaXChange\x20payment\x20creation\x20failed:\x20Unknown\x20error','‚ùå\x20Failed\x20to\x20parse\x20JSON\x20response:','to_currency','error','üì§\x20Sending\x20request\x20to\x20InstaXChange\x20proxy:','proxyUrl','POST','üì•\x20InstaXChange\x20proxy\x20HTTP\x20status:\x20','\x20\x20\x20Amount:\x20','12GGCGsE','application/json','26236573XXrnwB','\x20\x20\x20Session\x20ID:\x20','https://instaxchange.com/order/','createPayment','parse','\x20\x20\x20To\x20Amount:\x20','InstaXChangeService','log','card','423gsxvIm','https://tesoft.uk/gateway/instaxchange/webhook.php?paymentId=','3FrOEPj','statusText','3208236MwzyJV','\x20\x20\x20First\x20Name:\x20','‚úÖ\x20InstaXChange\x20payment\x20session\x20created:','https://tesoft.uk/gateway/instaxchange/create.php','4200DHyqwp','defineProperty','üê≥\x20Creating\x20InstaXChange\x20payment\x20session:','split','2vejbGr','7293396cUAzaQ','sending','\x20\x20\x20Method:\x20','899467sMncJR','substring','join','slice','from_amount','timeout','‚ùå\x20InstaXChange\x20proxy\x20request\x20failed:','3907570YikfsD','HTTP\x20','status','308970cMgymW'];a66_0x1105=function(){return _0x37f969;};return a66_0x1105();}class InstaXChangeService{constructor(){const _0x1456f6=a66_0x46effa;this[_0x1456f6(0x20a)]=_0x1456f6(0x1e3);}async[a66_0x46effa(0x1d6)](_0x3f98c7){const _0x56baa3=a66_0x46effa,{paymentId:_0x702bb3,orderId:_0x518720,amount:_0x13ec08,currency:_0x4d46ce,method:method=_0x56baa3(0x1db),customerEmail:_0x4bede8,customerName:_0x1e2c5a,returnUrl:_0x4e446a}=_0x3f98c7;console['log'](_0x56baa3(0x1e6)),console[_0x56baa3(0x1da)]('\x20\x20\x20Payment\x20ID:\x20'+_0x702bb3),console[_0x56baa3(0x1da)](_0x56baa3(0x202)+_0x518720),console['log'](_0x56baa3(0x1d0)+_0x13ec08+'\x20'+_0x4d46ce),console['log'](_0x56baa3(0x1eb)+method),console[_0x56baa3(0x1da)]('\x20\x20\x20Customer:\x20'+(_0x1e2c5a||'N/A')+'\x20('+(_0x4bede8||'N/A')+')');let _0x153ba1=_0x56baa3(0x1ff),_0x29bf4e='';if(_0x1e2c5a){const _0x2c420=_0x1e2c5a[_0x56baa3(0x203)]()[_0x56baa3(0x1e7)]('\x20');_0x153ba1=_0x2c420[0x0]||_0x56baa3(0x1ff),_0x29bf4e=_0x2c420[_0x56baa3(0x1ef)](0x1)[_0x56baa3(0x1ee)]('\x20')||'';}console[_0x56baa3(0x1da)](_0x56baa3(0x1e1)+_0x153ba1),console['log'](_0x56baa3(0x1fb)+_0x29bf4e);const _0x5048a6={'accountRefId':process.env.INSTAXCHANGE_ACCOUNT_REF_ID,'fromAmount':_0x13ec08,'toCurrency':'USDC','fromCurrency':_0x4d46ce,'address':process.env.INSTAXCHANGE_WALLET_ADDRESS,'amountDirection':_0x56baa3(0x1ea),'webhookRef':_0x56baa3(0x1dd)+_0x702bb3,'returnUrl':_0x4e446a,'method':method,'email':_0x4bede8||'','firstName':_0x153ba1,'lastName':_0x29bf4e};console[_0x56baa3(0x1da)](_0x56baa3(0x209),_0x5048a6);try{const _0x164035=await fetch(this[_0x56baa3(0x20a)],{'method':_0x56baa3(0x20b),'headers':{'Content-Type':_0x56baa3(0x1d2)},'body':JSON[_0x56baa3(0x1f9)](_0x5048a6),'signal':AbortSignal[_0x56baa3(0x1f1)](0x7530)});console[_0x56baa3(0x1da)](_0x56baa3(0x20c)+_0x164035[_0x56baa3(0x1f5)]+'\x20'+_0x164035[_0x56baa3(0x1df)]);const _0x1dcfe9=await _0x164035[_0x56baa3(0x200)]();console[_0x56baa3(0x1da)]('üì•\x20InstaXChange\x20proxy\x20raw\x20response:',_0x1dcfe9);let _0x41142f;try{_0x41142f=JSON[_0x56baa3(0x1d7)](_0x1dcfe9);}catch(_0x391f39){console[_0x56baa3(0x208)](_0x56baa3(0x206),_0x391f39);throw new Error('Invalid\x20JSON\x20response\x20from\x20proxy:\x20'+_0x1dcfe9[_0x56baa3(0x1ed)](0x0,0xc8));}console[_0x56baa3(0x1da)]('üì•\x20InstaXChange\x20proxy\x20response:',_0x41142f);if(!_0x164035['ok']){const _0x1558af=_0x41142f?.[_0x56baa3(0x208)]||_0x41142f?.['message']||_0x56baa3(0x1f4)+_0x164035[_0x56baa3(0x1f5)]+':\x20'+_0x164035[_0x56baa3(0x1df)];console[_0x56baa3(0x208)]('\x20\x20\x20Error\x20details:',_0x41142f);throw new Error('InstaXChange\x20payment\x20creation\x20failed:\x20'+_0x1558af);}if(!_0x41142f||!_0x41142f['id'])throw new Error(_0x56baa3(0x1f8));const _0xc35d0f=_0x41142f['id'],_0x258e28=_0x56baa3(0x1d5)+_0xc35d0f;return console[_0x56baa3(0x1da)](_0x56baa3(0x1e2)),console[_0x56baa3(0x1da)](_0x56baa3(0x1d4)+_0xc35d0f),console[_0x56baa3(0x1da)](_0x56baa3(0x1f7)+_0x258e28),console['log'](_0x56baa3(0x1fc)+_0x41142f[_0x56baa3(0x1f5)]),console['log']('\x20\x20\x20From\x20Amount:\x20'+_0x41142f[_0x56baa3(0x1f0)]+'\x20'+_0x41142f[_0x56baa3(0x1fd)]),console[_0x56baa3(0x1da)](_0x56baa3(0x1d8)+_0x41142f[_0x56baa3(0x1fe)]+'\x20'+_0x41142f[_0x56baa3(0x207)]),{'gateway_payment_id':_0xc35d0f,'payment_url':_0x258e28,'session_id':_0xc35d0f,'status':_0x41142f[_0x56baa3(0x1f5)],'from_amount':_0x41142f['from_amount'],'to_amount':_0x41142f[_0x56baa3(0x1fe)]};}catch(_0x4277a3){console[_0x56baa3(0x208)](_0x56baa3(0x1f2),_0x4277a3);if(_0x4277a3 instanceof Error)throw new Error(_0x56baa3(0x201)+_0x4277a3[_0x56baa3(0x1fa)]);throw new Error(_0x56baa3(0x205));}}}exports[a66_0x46effa(0x1d9)]=InstaXChangeService;