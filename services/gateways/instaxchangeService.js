'use strict';const a60_0x1bb2fa=a60_0x2076;(function(_0x37311d,_0x3dd5e7){const _0xc62bf8=a60_0x2076,_0x3cab56=_0x37311d();while(!![]){try{const _0x73a437=-parseInt(_0xc62bf8(0x94))/0x1+parseInt(_0xc62bf8(0xb2))/0x2+-parseInt(_0xc62bf8(0x89))/0x3*(-parseInt(_0xc62bf8(0xa2))/0x4)+-parseInt(_0xc62bf8(0x8a))/0x5+parseInt(_0xc62bf8(0x91))/0x6*(parseInt(_0xc62bf8(0x99))/0x7)+parseInt(_0xc62bf8(0xb5))/0x8*(-parseInt(_0xc62bf8(0x86))/0x9)+parseInt(_0xc62bf8(0xb9))/0xa*(-parseInt(_0xc62bf8(0xad))/0xb);if(_0x73a437===_0x3dd5e7)break;else _0x3cab56['push'](_0x3cab56['shift']());}catch(_0x1dd108){_0x3cab56['push'](_0x3cab56['shift']());}}}(a60_0x49eb,0xeb2ad));Object[a60_0x1bb2fa(0xbe)](exports,a60_0x1bb2fa(0x9a),{'value':!![]}),exports[a60_0x1bb2fa(0xa6)]=void 0x0;function a60_0x49eb(){const _0x1a366d=['stringify','Customer','to_currency','341jlBjkV','‚ùå\x20InstaXChange\x20proxy\x20request\x20failed:','text','trim','\x20\x20\x20Status:\x20','2309638aVVpre','\x20\x20\x20Method:\x20','\x20\x20\x20Payment\x20ID:\x20','32YORCsc','\x20\x20\x20First\x20Name:\x20','‚úÖ\x20InstaXChange\x20payment\x20session\x20created:','message','95330jXFweP','HTTP\x20','\x20\x20\x20To\x20Amount:\x20','application/json','\x20\x20\x20Customer:\x20','defineProperty','https://tesoft.uk/gateway/instaxchange/create.php','log','to_amount','617751wZIpCN','Invalid\x20response\x20from\x20InstaXChange\x20proxy','üì•\x20InstaXChange\x20proxy\x20raw\x20response:','2050626GWBNrX','778490clwkUL','InstaXChange\x20payment\x20creation\x20failed:\x20','substring','from_currency','error','üê≥\x20Creating\x20InstaXChange\x20payment\x20session:','timeout','7152RWqtxg','‚ùå\x20Failed\x20to\x20parse\x20JSON\x20response:','status','904401xnGbFp','join','\x20\x20\x20From\x20Amount:\x20','proxyUrl','üì•\x20InstaXChange\x20proxy\x20HTTP\x20status:\x20','420nGHcTI','__esModule','POST','slice','USDC','N/A','InstaXChange\x20payment\x20creation\x20failed:\x20Unknown\x20error','https://instaxchange.com/order/','statusText','8aZpheG','\x20\x20\x20Amount:\x20','from_amount','Invalid\x20JSON\x20response\x20from\x20proxy:\x20','InstaXChangeService','\x20\x20\x20Session\x20ID:\x20','createPayment','parse'];a60_0x49eb=function(){return _0x1a366d;};return a60_0x49eb();}function a60_0x2076(_0x30863e,_0x3fae57){_0x30863e=_0x30863e-0x84;const _0x49eb92=a60_0x49eb();let _0x20767d=_0x49eb92[_0x30863e];return _0x20767d;}class InstaXChangeService{constructor(){const _0x3ba223=a60_0x1bb2fa;this[_0x3ba223(0x97)]=_0x3ba223(0xbf);}async[a60_0x1bb2fa(0xa8)](_0x2a440b){const _0x4100b7=a60_0x1bb2fa,{paymentId:_0xd35151,orderId:_0x32ad0f,amount:_0x34e3b0,currency:_0x5587ff,method:method='card',customerEmail:_0x435d1b,customerName:_0x5a5950,returnUrl:_0x49aab7}=_0x2a440b;console['log'](_0x4100b7(0x8f)),console[_0x4100b7(0x84)](_0x4100b7(0xb4)+_0xd35151),console[_0x4100b7(0x84)]('\x20\x20\x20Order\x20ID:\x20'+_0x32ad0f),console['log'](_0x4100b7(0xa3)+_0x34e3b0+'\x20'+_0x5587ff),console[_0x4100b7(0x84)](_0x4100b7(0xb3)+method),console['log'](_0x4100b7(0xbd)+(_0x5a5950||_0x4100b7(0x9e))+'\x20('+(_0x435d1b||_0x4100b7(0x9e))+')');let _0x16ef50=_0x4100b7(0xab),_0x4bff25='';if(_0x5a5950){const _0x2c5cb7=_0x5a5950[_0x4100b7(0xb0)]()['split']('\x20');_0x16ef50=_0x2c5cb7[0x0]||_0x4100b7(0xab),_0x4bff25=_0x2c5cb7[_0x4100b7(0x9c)](0x1)[_0x4100b7(0x95)]('\x20')||'';}console[_0x4100b7(0x84)](_0x4100b7(0xb6)+_0x16ef50),console[_0x4100b7(0x84)]('\x20\x20\x20Last\x20Name:\x20'+_0x4bff25);const _0x5ab80d={'accountRefId':process.env.INSTAXCHANGE_ACCOUNT_REF_ID,'fromAmount':_0x34e3b0,'toCurrency':_0x4100b7(0x9d),'fromCurrency':_0x5587ff,'address':process.env.INSTAXCHANGE_WALLET_ADDRESS,'amountDirection':'sending','webhookRef':'https://tesoft.uk/gateway/instaxchange/webhook.php?paymentId='+_0xd35151,'returnUrl':_0x49aab7,'method':method,'email':_0x435d1b||'','firstName':_0x16ef50,'lastName':_0x4bff25};console['log']('üì§\x20Sending\x20request\x20to\x20InstaXChange\x20proxy:',_0x5ab80d);try{const _0x1a9cc2=await fetch(this[_0x4100b7(0x97)],{'method':_0x4100b7(0x9b),'headers':{'Content-Type':_0x4100b7(0xbc)},'body':JSON[_0x4100b7(0xaa)](_0x5ab80d),'signal':AbortSignal[_0x4100b7(0x90)](0x7530)});console[_0x4100b7(0x84)](_0x4100b7(0x98)+_0x1a9cc2['status']+'\x20'+_0x1a9cc2['statusText']);const _0x3c6bba=await _0x1a9cc2[_0x4100b7(0xaf)]();console['log'](_0x4100b7(0x88),_0x3c6bba);let _0x55ebc8;try{_0x55ebc8=JSON[_0x4100b7(0xa9)](_0x3c6bba);}catch(_0x37f182){console[_0x4100b7(0x8e)](_0x4100b7(0x92),_0x37f182);throw new Error(_0x4100b7(0xa5)+_0x3c6bba[_0x4100b7(0x8c)](0x0,0xc8));}console[_0x4100b7(0x84)]('üì•\x20InstaXChange\x20proxy\x20response:',_0x55ebc8);if(!_0x1a9cc2['ok']){const _0x28fc49=_0x55ebc8?.['error']||_0x55ebc8?.[_0x4100b7(0xb8)]||_0x4100b7(0xba)+_0x1a9cc2[_0x4100b7(0x93)]+':\x20'+_0x1a9cc2[_0x4100b7(0xa1)];console[_0x4100b7(0x8e)]('\x20\x20\x20Error\x20details:',_0x55ebc8);throw new Error(_0x4100b7(0x8b)+_0x28fc49);}if(!_0x55ebc8||!_0x55ebc8['id'])throw new Error(_0x4100b7(0x87));const _0x318caa=_0x55ebc8['id'],_0x1d8753=_0x4100b7(0xa0)+_0x318caa;return console[_0x4100b7(0x84)](_0x4100b7(0xb7)),console[_0x4100b7(0x84)](_0x4100b7(0xa7)+_0x318caa),console[_0x4100b7(0x84)]('\x20\x20\x20Payment\x20URL:\x20'+_0x1d8753),console[_0x4100b7(0x84)](_0x4100b7(0xb1)+_0x55ebc8[_0x4100b7(0x93)]),console[_0x4100b7(0x84)](_0x4100b7(0x96)+_0x55ebc8[_0x4100b7(0xa4)]+'\x20'+_0x55ebc8[_0x4100b7(0x8d)]),console[_0x4100b7(0x84)](_0x4100b7(0xbb)+_0x55ebc8['to_amount']+'\x20'+_0x55ebc8[_0x4100b7(0xac)]),{'gateway_payment_id':_0x318caa,'payment_url':_0x1d8753,'session_id':_0x318caa,'status':_0x55ebc8[_0x4100b7(0x93)],'from_amount':_0x55ebc8[_0x4100b7(0xa4)],'to_amount':_0x55ebc8[_0x4100b7(0x85)]};}catch(_0x4f4395){console[_0x4100b7(0x8e)](_0x4100b7(0xae),_0x4f4395);if(_0x4f4395 instanceof Error)throw new Error('InstaXChange\x20payment\x20creation\x20failed:\x20'+_0x4f4395[_0x4100b7(0xb8)]);throw new Error(_0x4100b7(0x9f));}}}exports[a60_0x1bb2fa(0xa6)]=InstaXChangeService;