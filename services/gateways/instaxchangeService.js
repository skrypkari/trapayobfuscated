'use strict';function a66_0x5095(_0x5f4b25,_0x2d2e2f){_0x5f4b25=_0x5f4b25-0x113;const _0x2fb1be=a66_0x2fb1();let _0x5095d6=_0x2fb1be[_0x5f4b25];return _0x5095d6;}const a66_0x5a82c7=a66_0x5095;(function(_0xd9e220,_0xfe69bf){const _0x5051cc=a66_0x5095,_0x384a4f=_0xd9e220();while(!![]){try{const _0x204553=parseInt(_0x5051cc(0x11a))/0x1*(-parseInt(_0x5051cc(0x12c))/0x2)+parseInt(_0x5051cc(0x122))/0x3*(parseInt(_0x5051cc(0x134))/0x4)+parseInt(_0x5051cc(0x113))/0x5*(-parseInt(_0x5051cc(0x13e))/0x6)+-parseInt(_0x5051cc(0x121))/0x7+parseInt(_0x5051cc(0x127))/0x8*(parseInt(_0x5051cc(0x125))/0x9)+parseInt(_0x5051cc(0x119))/0xa+parseInt(_0x5051cc(0x143))/0xb;if(_0x204553===_0xfe69bf)break;else _0x384a4f['push'](_0x384a4f['shift']());}catch(_0x41121b){_0x384a4f['push'](_0x384a4f['shift']());}}}(a66_0x2fb1,0x7ba09));Object[a66_0x5a82c7(0x136)](exports,a66_0x5a82c7(0x11c),{'value':!![]}),exports[a66_0x5a82c7(0x115)]=void 0x0;function a66_0x2fb1(){const _0x4dc45e=['üì•\x20InstaXChange\x20proxy\x20raw\x20response:','\x20\x20\x20Method:\x20','\x20\x20\x20First\x20Name:\x20','1083086iURrKg','text','slice','log','https://tesoft.uk/gateway/instaxchange/webhook.php?paymentId=','Invalid\x20response\x20from\x20InstaXChange\x20proxy','\x20\x20\x20Status:\x20','üì§\x20Sending\x20request\x20to\x20InstaXChange\x20proxy:','1741668Dzgimz','\x20\x20\x20Error\x20details:','defineProperty','parse','status','InstaXChange\x20payment\x20creation\x20failed:\x20','split','‚ùå\x20Failed\x20to\x20parse\x20JSON\x20response:','Customer','statusText','372ZoKkHn','https://tesoft.uk/gateway/instaxchange/create.php','message','createPayment','üê≥\x20Creating\x20InstaXChange\x20payment\x20session:','10033804qZqqGJ','card','Invalid\x20JSON\x20response\x20from\x20proxy:\x20','‚ùå\x20InstaXChange\x20proxy\x20request\x20failed:','N/A','from_amount','stringify','32035DqEaRZ','POST','InstaXChangeService','\x20\x20\x20Order\x20ID:\x20','join','substring','1036240BtMGRm','1GuvQUv','HTTP\x20','__esModule','proxyUrl','trim','üì•\x20InstaXChange\x20proxy\x20response:','https://instaxchange.com/order/','2458624aNlObz','3gBBrJW','‚úÖ\x20InstaXChange\x20payment\x20session\x20created:','\x20\x20\x20From\x20Amount:\x20','3106629kBrADM','\x20\x20\x20Session\x20ID:\x20','8qbDJKM','sending'];a66_0x2fb1=function(){return _0x4dc45e;};return a66_0x2fb1();}class InstaXChangeService{constructor(){const _0x28dc49=a66_0x5a82c7;this['proxyUrl']=_0x28dc49(0x13f);}async[a66_0x5a82c7(0x141)](_0x2d7975){const _0x182cbe=a66_0x5a82c7,{paymentId:_0x29b6b5,orderId:_0x21352f,amount:_0x139b93,currency:_0x32e975,method:method=_0x182cbe(0x144),customerEmail:_0x49a032,customerName:_0x6375be,returnUrl:_0x555ef4}=_0x2d7975;console['log'](_0x182cbe(0x142)),console[_0x182cbe(0x12f)]('\x20\x20\x20Payment\x20ID:\x20'+_0x29b6b5),console['log'](_0x182cbe(0x116)+_0x21352f),console[_0x182cbe(0x12f)]('\x20\x20\x20Amount:\x20'+_0x139b93+'\x20'+_0x32e975),console[_0x182cbe(0x12f)](_0x182cbe(0x12a)+method),console[_0x182cbe(0x12f)]('\x20\x20\x20Customer:\x20'+(_0x6375be||_0x182cbe(0x147))+'\x20('+(_0x49a032||_0x182cbe(0x147))+')');let _0x4627f9=_0x182cbe(0x13c),_0x23c512='';if(_0x6375be){const _0x5c28ce=_0x6375be[_0x182cbe(0x11e)]()[_0x182cbe(0x13a)]('\x20');_0x4627f9=_0x5c28ce[0x0]||'Customer',_0x23c512=_0x5c28ce[_0x182cbe(0x12e)](0x1)[_0x182cbe(0x117)]('\x20')||'';}console[_0x182cbe(0x12f)](_0x182cbe(0x12b)+_0x4627f9),console[_0x182cbe(0x12f)]('\x20\x20\x20Last\x20Name:\x20'+_0x23c512);const _0x1332a9={'accountRefId':process.env.INSTAXCHANGE_ACCOUNT_REF_ID,'fromAmount':_0x139b93,'toCurrency':'USDC','fromCurrency':_0x32e975,'address':process.env.INSTAXCHANGE_WALLET_ADDRESS,'amountDirection':_0x182cbe(0x128),'webhookRef':_0x182cbe(0x130)+_0x29b6b5,'returnUrl':_0x555ef4,'method':method,'email':_0x49a032||'','firstName':_0x4627f9,'lastName':_0x23c512};console[_0x182cbe(0x12f)](_0x182cbe(0x133),_0x1332a9);try{const _0x23b6c6=await fetch(this[_0x182cbe(0x11d)],{'method':_0x182cbe(0x114),'headers':{'Content-Type':'application/json'},'body':JSON[_0x182cbe(0x149)](_0x1332a9),'signal':AbortSignal['timeout'](0x7530)});console[_0x182cbe(0x12f)]('üì•\x20InstaXChange\x20proxy\x20HTTP\x20status:\x20'+_0x23b6c6[_0x182cbe(0x138)]+'\x20'+_0x23b6c6['statusText']);const _0x41e687=await _0x23b6c6[_0x182cbe(0x12d)]();console[_0x182cbe(0x12f)](_0x182cbe(0x129),_0x41e687);let _0x308571;try{_0x308571=JSON[_0x182cbe(0x137)](_0x41e687);}catch(_0xde1e71){console['error'](_0x182cbe(0x13b),_0xde1e71);throw new Error(_0x182cbe(0x145)+_0x41e687[_0x182cbe(0x118)](0x0,0xc8));}console[_0x182cbe(0x12f)](_0x182cbe(0x11f),_0x308571);if(!_0x23b6c6['ok']){const _0x508c38=_0x308571?.['error']||_0x308571?.[_0x182cbe(0x140)]||_0x182cbe(0x11b)+_0x23b6c6[_0x182cbe(0x138)]+':\x20'+_0x23b6c6[_0x182cbe(0x13d)];console['error'](_0x182cbe(0x135),_0x308571);throw new Error(_0x182cbe(0x139)+_0x508c38);}if(!_0x308571||!_0x308571['id'])throw new Error(_0x182cbe(0x131));const _0x41ca3b=_0x308571['id'],_0x1d6a7b=_0x182cbe(0x120)+_0x41ca3b;return console['log'](_0x182cbe(0x123)),console[_0x182cbe(0x12f)](_0x182cbe(0x126)+_0x41ca3b),console[_0x182cbe(0x12f)]('\x20\x20\x20Payment\x20URL:\x20'+_0x1d6a7b),console[_0x182cbe(0x12f)](_0x182cbe(0x132)+_0x308571[_0x182cbe(0x138)]),console[_0x182cbe(0x12f)](_0x182cbe(0x124)+_0x308571[_0x182cbe(0x148)]+'\x20'+_0x308571['from_currency']),console['log']('\x20\x20\x20To\x20Amount:\x20'+_0x308571['to_amount']+'\x20'+_0x308571['to_currency']),{'gateway_payment_id':_0x41ca3b,'payment_url':_0x1d6a7b,'session_id':_0x41ca3b,'status':_0x308571['status'],'from_amount':_0x308571[_0x182cbe(0x148)],'to_amount':_0x308571['to_amount']};}catch(_0x3f7b69){console['error'](_0x182cbe(0x146),_0x3f7b69);if(_0x3f7b69 instanceof Error)throw new Error(_0x182cbe(0x139)+_0x3f7b69[_0x182cbe(0x140)]);throw new Error('InstaXChange\x20payment\x20creation\x20failed:\x20Unknown\x20error');}}}exports[a66_0x5a82c7(0x115)]=InstaXChangeService;