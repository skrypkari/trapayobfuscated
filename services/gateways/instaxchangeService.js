'use strict';const a66_0x1cf911=a66_0x2cf7;(function(_0x1f576f,_0x3362de){const _0x410653=a66_0x2cf7,_0x431060=_0x1f576f();while(!![]){try{const _0x2b6c30=parseInt(_0x410653(0x109))/0x1*(parseInt(_0x410653(0x108))/0x2)+-parseInt(_0x410653(0x100))/0x3+-parseInt(_0x410653(0xeb))/0x4*(parseInt(_0x410653(0x103))/0x5)+parseInt(_0x410653(0xfa))/0x6+-parseInt(_0x410653(0xdb))/0x7+parseInt(_0x410653(0xef))/0x8+-parseInt(_0x410653(0xda))/0x9*(-parseInt(_0x410653(0xf8))/0xa);if(_0x2b6c30===_0x3362de)break;else _0x431060['push'](_0x431060['shift']());}catch(_0x1df95d){_0x431060['push'](_0x431060['shift']());}}}(a66_0x33a8,0xdecf8));function a66_0x33a8(){const _0x1425c5=['4665CZjgcq','sending','\x20\x20\x20Payment\x20ID:\x20','to_amount','InstaXChange\x20payment\x20creation\x20failed:\x20Unknown\x20error','2RwQDrN','11686FIMIjQ','üì•\x20InstaXChange\x20proxy\x20response:','stringify','\x20\x20\x20Method:\x20','USDC','Customer','defineProperty','message','status','to_currency','application/json','27261dIlYSs','2725114MdOIaL','\x20\x20\x20Customer:\x20','substring','\x20\x20\x20Payment\x20URL:\x20','createPayment','https://tesoft.uk/gateway/instaxchange/webhook.php?paymentId=','text','N/A','proxyUrl','from_currency','https://tesoft.uk/gateway/instaxchange/create.php','join','InstaXChangeService','error','https://instaxchange.com/order/','timeout','2520RXUFIc','\x20\x20\x20Error\x20details:','Invalid\x20response\x20from\x20InstaXChange\x20proxy','üì§\x20Sending\x20request\x20to\x20InstaXChange\x20proxy:','5272144SMqEMg','InstaXChange\x20payment\x20creation\x20failed:\x20','\x20\x20\x20Status:\x20','\x20\x20\x20First\x20Name:\x20','\x20\x20\x20Order\x20ID:\x20','\x20\x20\x20Amount:\x20','POST','\x20\x20\x20Session\x20ID:\x20','‚úÖ\x20InstaXChange\x20payment\x20session\x20created:','3600aUMzwp','split','10110510ShTBkJ','üê≥\x20Creating\x20InstaXChange\x20payment\x20session:','log','from_amount','slice','parse','4669515uHwSYl','\x20\x20\x20Last\x20Name:\x20','statusText'];a66_0x33a8=function(){return _0x1425c5;};return a66_0x33a8();}function a66_0x2cf7(_0x1877de,_0x41387a){_0x1877de=_0x1877de-0xd5;const _0x33a803=a66_0x33a8();let _0x2cf703=_0x33a803[_0x1877de];return _0x2cf703;}Object[a66_0x1cf911(0xd5)](exports,'__esModule',{'value':!![]}),exports[a66_0x1cf911(0xe7)]=void 0x0;class InstaXChangeService{constructor(){const _0x268349=a66_0x1cf911;this[_0x268349(0xe3)]=_0x268349(0xe5);}async[a66_0x1cf911(0xdf)](_0x2b1abc){const _0x1997b9=a66_0x1cf911,{paymentId:_0x222c10,orderId:_0x38bb29,amount:_0x2971cc,currency:_0x22f983,method:method='card',customerEmail:_0x1e1d8b,customerName:_0x39d831,returnUrl:_0x13ff94}=_0x2b1abc;console[_0x1997b9(0xfc)](_0x1997b9(0xfb)),console[_0x1997b9(0xfc)](_0x1997b9(0x105)+_0x222c10),console['log'](_0x1997b9(0xf3)+_0x38bb29),console[_0x1997b9(0xfc)](_0x1997b9(0xf4)+_0x2971cc+'\x20'+_0x22f983),console[_0x1997b9(0xfc)](_0x1997b9(0x10c)+method),console[_0x1997b9(0xfc)](_0x1997b9(0xdc)+(_0x39d831||_0x1997b9(0xe2))+'\x20('+(_0x1e1d8b||_0x1997b9(0xe2))+')');let _0x41c310=_0x1997b9(0x10e),_0x56004c='';if(_0x39d831){const _0x53d01b=_0x39d831['trim']()[_0x1997b9(0xf9)]('\x20');_0x41c310=_0x53d01b[0x0]||_0x1997b9(0x10e),_0x56004c=_0x53d01b[_0x1997b9(0xfe)](0x1)[_0x1997b9(0xe6)]('\x20')||'';}console[_0x1997b9(0xfc)](_0x1997b9(0xf2)+_0x41c310),console[_0x1997b9(0xfc)](_0x1997b9(0x101)+_0x56004c);const _0x595a06={'accountRefId':process.env.INSTAXCHANGE_ACCOUNT_REF_ID,'fromAmount':_0x2971cc,'toCurrency':_0x1997b9(0x10d),'fromCurrency':_0x22f983,'address':process.env.INSTAXCHANGE_WALLET_ADDRESS,'amountDirection':_0x1997b9(0x104),'webhookRef':_0x1997b9(0xe0)+_0x222c10,'returnUrl':_0x13ff94,'method':method,'email':_0x1e1d8b||'','firstName':_0x41c310,'lastName':_0x56004c};console[_0x1997b9(0xfc)](_0x1997b9(0xee),_0x595a06);try{const _0x1acf0f=await fetch(this[_0x1997b9(0xe3)],{'method':_0x1997b9(0xf5),'headers':{'Content-Type':_0x1997b9(0xd9)},'body':JSON[_0x1997b9(0x10b)](_0x595a06),'signal':AbortSignal[_0x1997b9(0xea)](0x7530)});console[_0x1997b9(0xfc)]('üì•\x20InstaXChange\x20proxy\x20HTTP\x20status:\x20'+_0x1acf0f[_0x1997b9(0xd7)]+'\x20'+_0x1acf0f[_0x1997b9(0x102)]);const _0x56d6c3=await _0x1acf0f[_0x1997b9(0xe1)]();console[_0x1997b9(0xfc)]('üì•\x20InstaXChange\x20proxy\x20raw\x20response:',_0x56d6c3);let _0xe56b36;try{_0xe56b36=JSON[_0x1997b9(0xff)](_0x56d6c3);}catch(_0x2cfcbb){console[_0x1997b9(0xe8)]('‚ùå\x20Failed\x20to\x20parse\x20JSON\x20response:',_0x2cfcbb);throw new Error('Invalid\x20JSON\x20response\x20from\x20proxy:\x20'+_0x56d6c3[_0x1997b9(0xdd)](0x0,0xc8));}console[_0x1997b9(0xfc)](_0x1997b9(0x10a),_0xe56b36);if(!_0x1acf0f['ok']){const _0x194cbf=_0xe56b36?.[_0x1997b9(0xe8)]||_0xe56b36?.[_0x1997b9(0xd6)]||'HTTP\x20'+_0x1acf0f[_0x1997b9(0xd7)]+':\x20'+_0x1acf0f[_0x1997b9(0x102)];console[_0x1997b9(0xe8)](_0x1997b9(0xec),_0xe56b36);throw new Error(_0x1997b9(0xf0)+_0x194cbf);}if(!_0xe56b36||!_0xe56b36['id'])throw new Error(_0x1997b9(0xed));const _0x26390d=_0xe56b36['id'],_0x5107f4=_0x1997b9(0xe9)+_0x26390d;return console[_0x1997b9(0xfc)](_0x1997b9(0xf7)),console[_0x1997b9(0xfc)](_0x1997b9(0xf6)+_0x26390d),console[_0x1997b9(0xfc)](_0x1997b9(0xde)+_0x5107f4),console[_0x1997b9(0xfc)](_0x1997b9(0xf1)+_0xe56b36[_0x1997b9(0xd7)]),console[_0x1997b9(0xfc)]('\x20\x20\x20From\x20Amount:\x20'+_0xe56b36[_0x1997b9(0xfd)]+'\x20'+_0xe56b36[_0x1997b9(0xe4)]),console['log']('\x20\x20\x20To\x20Amount:\x20'+_0xe56b36['to_amount']+'\x20'+_0xe56b36[_0x1997b9(0xd8)]),{'gateway_payment_id':_0x26390d,'payment_url':_0x5107f4,'session_id':_0x26390d,'status':_0xe56b36['status'],'from_amount':_0xe56b36['from_amount'],'to_amount':_0xe56b36[_0x1997b9(0x106)]};}catch(_0x3606dd){console[_0x1997b9(0xe8)]('‚ùå\x20InstaXChange\x20proxy\x20request\x20failed:',_0x3606dd);if(_0x3606dd instanceof Error)throw new Error(_0x1997b9(0xf0)+_0x3606dd[_0x1997b9(0xd6)]);throw new Error(_0x1997b9(0x107));}}}exports[a66_0x1cf911(0xe7)]=InstaXChangeService;