'use strict';const a66_0x339264=a66_0x149d;(function(_0x18efaf,_0x33a0e3){const _0x397b96=a66_0x149d,_0x236d45=_0x18efaf();while(!![]){try{const _0x1a308e=-parseInt(_0x397b96(0xa7))/0x1+parseInt(_0x397b96(0xa0))/0x2+parseInt(_0x397b96(0xbd))/0x3*(-parseInt(_0x397b96(0x99))/0x4)+-parseInt(_0x397b96(0xa6))/0x5*(parseInt(_0x397b96(0xbf))/0x6)+-parseInt(_0x397b96(0x92))/0x7*(parseInt(_0x397b96(0x9a))/0x8)+parseInt(_0x397b96(0xc4))/0x9+-parseInt(_0x397b96(0xb3))/0xa*(-parseInt(_0x397b96(0xb1))/0xb);if(_0x1a308e===_0x33a0e3)break;else _0x236d45['push'](_0x236d45['shift']());}catch(_0x38aa33){_0x236d45['push'](_0x236d45['shift']());}}}(a66_0x15e6,0x7f604));function a66_0x15e6(){const _0x6b2a76=['\x20\x20\x20Order\x20ID:\x20','status','https://instaxchange.com/order/','message','\x20\x20\x20Customer:\x20','76VjeaDA','3391928UkatcL','to_amount','slice','InstaXChange\x20payment\x20creation\x20failed:\x20Unknown\x20error','N/A','trim','1246070uNPquG','üê≥\x20Creating\x20InstaXChange\x20payment\x20session:','USDC','üì•\x20InstaXChange\x20proxy\x20HTTP\x20status:\x20','üì•\x20InstaXChange\x20proxy\x20response:','defineProperty','165RMJLIO','872886OprXSg','\x20\x20\x20Error\x20details:','createPayment','application/json','InstaXChangeService','‚úÖ\x20InstaXChange\x20payment\x20session\x20created:','Customer','proxyUrl','\x20\x20\x20First\x20Name:\x20','log','1683231mciGLQ','POST','110nnguha','parse','‚ùå\x20Failed\x20to\x20parse\x20JSON\x20response:','https://tesoft.uk/gateway/instaxchange/create.php','statusText','card','\x20\x20\x20Payment\x20ID:\x20','üì§\x20Sending\x20request\x20to\x20InstaXChange\x20proxy:','\x20\x20\x20Last\x20Name:\x20','substring','12858JuYFCF','Invalid\x20JSON\x20response\x20from\x20proxy:\x20','79236StThqV','from_amount','Invalid\x20response\x20from\x20InstaXChange\x20proxy','InstaXChange\x20payment\x20creation\x20failed:\x20','error','266175KDwtaZ','\x20\x20\x20Session\x20ID:\x20','\x20\x20\x20To\x20Amount:\x20','sending','7HdldQd','text'];a66_0x15e6=function(){return _0x6b2a76;};return a66_0x15e6();}function a66_0x149d(_0x431516,_0x7ab2d2){_0x431516=_0x431516-0x8f;const _0x15e629=a66_0x15e6();let _0x149d18=_0x15e629[_0x431516];return _0x149d18;}Object[a66_0x339264(0xa5)](exports,'__esModule',{'value':!![]}),exports['InstaXChangeService']=void 0x0;class InstaXChangeService{constructor(){const _0x467cab=a66_0x339264;this[_0x467cab(0xae)]=_0x467cab(0xb6);}async[a66_0x339264(0xa9)](_0x56b17e){const _0xb2bddb=a66_0x339264,{paymentId:_0x1879ae,orderId:_0x229bbf,amount:_0x487ef5,currency:_0x2c7f98,method:method=_0xb2bddb(0xb8),customerEmail:_0x231842,customerName:_0x18678c,returnUrl:_0x24e54e}=_0x56b17e;console[_0xb2bddb(0xb0)](_0xb2bddb(0xa1)),console[_0xb2bddb(0xb0)](_0xb2bddb(0xb9)+_0x1879ae),console[_0xb2bddb(0xb0)](_0xb2bddb(0x94)+_0x229bbf),console[_0xb2bddb(0xb0)]('\x20\x20\x20Amount:\x20'+_0x487ef5+'\x20'+_0x2c7f98),console[_0xb2bddb(0xb0)]('\x20\x20\x20Method:\x20'+method),console[_0xb2bddb(0xb0)](_0xb2bddb(0x98)+(_0x18678c||_0xb2bddb(0x9e))+'\x20('+(_0x231842||_0xb2bddb(0x9e))+')');let _0x6afe3=_0xb2bddb(0xad),_0x47c4cb='';if(_0x18678c){const _0x12f526=_0x18678c[_0xb2bddb(0x9f)]()['split']('\x20');_0x6afe3=_0x12f526[0x0]||_0xb2bddb(0xad),_0x47c4cb=_0x12f526[_0xb2bddb(0x9c)](0x1)['join']('\x20')||'';}console[_0xb2bddb(0xb0)](_0xb2bddb(0xaf)+_0x6afe3),console['log'](_0xb2bddb(0xbb)+_0x47c4cb);const _0x13fe5a={'accountRefId':process.env.INSTAXCHANGE_ACCOUNT_REF_ID,'fromAmount':_0x487ef5,'toCurrency':_0xb2bddb(0xa2),'fromCurrency':_0x2c7f98,'address':process.env.INSTAXCHANGE_WALLET_ADDRESS,'amountDirection':_0xb2bddb(0x91),'webhookRef':'https://tesoft.uk/gateway/instaxchange/webhook.php?paymentId='+_0x1879ae,'returnUrl':_0x24e54e,'method':method,'email':_0x231842||'','firstName':_0x6afe3,'lastName':_0x47c4cb};console[_0xb2bddb(0xb0)](_0xb2bddb(0xba),_0x13fe5a);try{const _0x2a7d2d=await fetch(this['proxyUrl'],{'method':_0xb2bddb(0xb2),'headers':{'Content-Type':_0xb2bddb(0xaa)},'body':JSON['stringify'](_0x13fe5a),'signal':AbortSignal['timeout'](0x7530)});console[_0xb2bddb(0xb0)](_0xb2bddb(0xa3)+_0x2a7d2d['status']+'\x20'+_0x2a7d2d[_0xb2bddb(0xb7)]);const _0x390274=await _0x2a7d2d[_0xb2bddb(0x93)]();console['log']('üì•\x20InstaXChange\x20proxy\x20raw\x20response:',_0x390274);let _0x21c468;try{_0x21c468=JSON[_0xb2bddb(0xb4)](_0x390274);}catch(_0x2e55f7){console[_0xb2bddb(0xc3)](_0xb2bddb(0xb5),_0x2e55f7);throw new Error(_0xb2bddb(0xbe)+_0x390274[_0xb2bddb(0xbc)](0x0,0xc8));}console[_0xb2bddb(0xb0)](_0xb2bddb(0xa4),_0x21c468);if(!_0x2a7d2d['ok']){const _0x611a15=_0x21c468?.['error']||_0x21c468?.[_0xb2bddb(0x97)]||'HTTP\x20'+_0x2a7d2d[_0xb2bddb(0x95)]+':\x20'+_0x2a7d2d['statusText'];console[_0xb2bddb(0xc3)](_0xb2bddb(0xa8),_0x21c468);throw new Error(_0xb2bddb(0xc2)+_0x611a15);}if(!_0x21c468||!_0x21c468['id'])throw new Error(_0xb2bddb(0xc1));const _0x450c89=_0x21c468['id'],_0x33b25d=_0xb2bddb(0x96)+_0x450c89;return console[_0xb2bddb(0xb0)](_0xb2bddb(0xac)),console['log'](_0xb2bddb(0x8f)+_0x450c89),console[_0xb2bddb(0xb0)]('\x20\x20\x20Payment\x20URL:\x20'+_0x33b25d),console[_0xb2bddb(0xb0)]('\x20\x20\x20Status:\x20'+_0x21c468[_0xb2bddb(0x95)]),console[_0xb2bddb(0xb0)]('\x20\x20\x20From\x20Amount:\x20'+_0x21c468['from_amount']+'\x20'+_0x21c468['from_currency']),console[_0xb2bddb(0xb0)](_0xb2bddb(0x90)+_0x21c468['to_amount']+'\x20'+_0x21c468['to_currency']),{'gateway_payment_id':_0x450c89,'payment_url':_0x33b25d,'session_id':_0x450c89,'status':_0x21c468[_0xb2bddb(0x95)],'from_amount':_0x21c468[_0xb2bddb(0xc0)],'to_amount':_0x21c468[_0xb2bddb(0x9b)]};}catch(_0x19a85f){console[_0xb2bddb(0xc3)]('‚ùå\x20InstaXChange\x20proxy\x20request\x20failed:',_0x19a85f);if(_0x19a85f instanceof Error)throw new Error(_0xb2bddb(0xc2)+_0x19a85f[_0xb2bddb(0x97)]);throw new Error(_0xb2bddb(0x9d));}}}exports[a66_0x339264(0xab)]=InstaXChangeService;