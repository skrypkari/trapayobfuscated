'use strict';function a60_0x36a5(){const _0x498427=['application/json','timeout','__esModule','\x20\x20\x20Customer:\x20','N/A','message','slice','\x20\x20\x20Error\x20details:','InstaXChange\x20payment\x20creation\x20failed:\x20','524YeuinH','üì•\x20InstaXChange\x20proxy\x20raw\x20response:','18699PDMMbB','InstaXChange\x20payment\x20creation\x20failed:\x20Unknown\x20error','error','‚ùå\x20Failed\x20to\x20parse\x20JSON\x20response:','card','\x20\x20\x20To\x20Amount:\x20','proxyUrl','\x20\x20\x20Method:\x20','https://tesoft.uk/gateway/instaxchange/create.php','2653062VzfNHA','7094101QWhmvd','log','\x20\x20\x20Payment\x20ID:\x20','defineProperty','Invalid\x20JSON\x20response\x20from\x20proxy:\x20','https://tesoft.uk/gateway/instaxchange/webhook.php?paymentId=','trim','üê≥\x20Creating\x20InstaXChange\x20payment\x20session:','from_currency','27300136UXSxmF','POST','status','‚úÖ\x20InstaXChange\x20payment\x20session\x20created:','Customer','\x20\x20\x20Payment\x20URL:\x20','statusText','createPayment','6994392RsxEDX','üì•\x20InstaXChange\x20proxy\x20HTTP\x20status:\x20','InstaXChangeService','split','\x20\x20\x20Status:\x20','parse','5856150rDvIlG','to_amount','\x20\x20\x20First\x20Name:\x20','150460yeWWzZ','Invalid\x20response\x20from\x20InstaXChange\x20proxy','from_amount'];a60_0x36a5=function(){return _0x498427;};return a60_0x36a5();}const a60_0x5ec749=a60_0x231f;(function(_0x14269c,_0x51b5b8){const _0x5b12d4=a60_0x231f,_0x4af1e7=_0x14269c();while(!![]){try{const _0x50e46f=parseInt(_0x5b12d4(0x14f))/0x1+parseInt(_0x5b12d4(0x166))/0x2+parseInt(_0x5b12d4(0x15d))/0x3*(-parseInt(_0x5b12d4(0x15b))/0x4)+-parseInt(_0x5b12d4(0x14c))/0x5+-parseInt(_0x5b12d4(0x146))/0x6+-parseInt(_0x5b12d4(0x167))/0x7+parseInt(_0x5b12d4(0x13e))/0x8;if(_0x50e46f===_0x51b5b8)break;else _0x4af1e7['push'](_0x4af1e7['shift']());}catch(_0x41d8dc){_0x4af1e7['push'](_0x4af1e7['shift']());}}}(a60_0x36a5,0xb0694));Object[a60_0x5ec749(0x16a)](exports,a60_0x5ec749(0x154),{'value':!![]}),exports[a60_0x5ec749(0x148)]=void 0x0;class InstaXChangeService{constructor(){const _0x3997a3=a60_0x5ec749;this[_0x3997a3(0x163)]=_0x3997a3(0x165);}async[a60_0x5ec749(0x145)](_0x5bec51){const _0x514a87=a60_0x5ec749,{paymentId:_0x9492be,orderId:_0x19f7c3,amount:_0x3892e9,currency:_0x1fbd3c,method:method=_0x514a87(0x161),customerEmail:_0x38d7e3,customerName:_0x534560,returnUrl:_0x3ae8fb}=_0x5bec51;console['log'](_0x514a87(0x13c)),console[_0x514a87(0x168)](_0x514a87(0x169)+_0x9492be),console[_0x514a87(0x168)]('\x20\x20\x20Order\x20ID:\x20'+_0x19f7c3),console[_0x514a87(0x168)]('\x20\x20\x20Amount:\x20'+_0x3892e9+'\x20'+_0x1fbd3c),console[_0x514a87(0x168)](_0x514a87(0x164)+method),console['log'](_0x514a87(0x155)+(_0x534560||_0x514a87(0x156))+'\x20('+(_0x38d7e3||_0x514a87(0x156))+')');let _0x39b969=_0x514a87(0x142),_0x4ad04f='';if(_0x534560){const _0x404bd5=_0x534560[_0x514a87(0x16d)]()[_0x514a87(0x149)]('\x20');_0x39b969=_0x404bd5[0x0]||_0x514a87(0x142),_0x4ad04f=_0x404bd5[_0x514a87(0x158)](0x1)['join']('\x20')||'';}console[_0x514a87(0x168)](_0x514a87(0x14e)+_0x39b969),console[_0x514a87(0x168)]('\x20\x20\x20Last\x20Name:\x20'+_0x4ad04f);const _0x260d30={'accountRefId':process.env.INSTAXCHANGE_ACCOUNT_REF_ID,'fromAmount':_0x3892e9,'toCurrency':'USDC','fromCurrency':_0x1fbd3c,'address':process.env.INSTAXCHANGE_WALLET_ADDRESS,'amountDirection':'sending','webhookRef':_0x514a87(0x16c)+_0x9492be,'returnUrl':_0x3ae8fb,'method':method,'email':_0x38d7e3||'','firstName':_0x39b969,'lastName':_0x4ad04f};console[_0x514a87(0x168)]('üì§\x20Sending\x20request\x20to\x20InstaXChange\x20proxy:',_0x260d30);try{const _0x2e4700=await fetch(this['proxyUrl'],{'method':_0x514a87(0x13f),'headers':{'Content-Type':_0x514a87(0x152)},'body':JSON['stringify'](_0x260d30),'signal':AbortSignal[_0x514a87(0x153)](0x7530)});console[_0x514a87(0x168)](_0x514a87(0x147)+_0x2e4700[_0x514a87(0x140)]+'\x20'+_0x2e4700[_0x514a87(0x144)]);const _0x158909=await _0x2e4700['text']();console['log'](_0x514a87(0x15c),_0x158909);let _0x5a18c4;try{_0x5a18c4=JSON[_0x514a87(0x14b)](_0x158909);}catch(_0x45dc8d){console['error'](_0x514a87(0x160),_0x45dc8d);throw new Error(_0x514a87(0x16b)+_0x158909['substring'](0x0,0xc8));}console[_0x514a87(0x168)]('üì•\x20InstaXChange\x20proxy\x20response:',_0x5a18c4);if(!_0x2e4700['ok']){const _0x46a4fe=_0x5a18c4?.[_0x514a87(0x15f)]||_0x5a18c4?.['message']||'HTTP\x20'+_0x2e4700[_0x514a87(0x140)]+':\x20'+_0x2e4700[_0x514a87(0x144)];console['error'](_0x514a87(0x159),_0x5a18c4);throw new Error('InstaXChange\x20payment\x20creation\x20failed:\x20'+_0x46a4fe);}if(!_0x5a18c4||!_0x5a18c4['id'])throw new Error(_0x514a87(0x150));const _0x45a261=_0x5a18c4['id'],_0x135162='https://instaxchange.com/order/'+_0x45a261;return console[_0x514a87(0x168)](_0x514a87(0x141)),console[_0x514a87(0x168)]('\x20\x20\x20Session\x20ID:\x20'+_0x45a261),console[_0x514a87(0x168)](_0x514a87(0x143)+_0x135162),console[_0x514a87(0x168)](_0x514a87(0x14a)+_0x5a18c4[_0x514a87(0x140)]),console[_0x514a87(0x168)]('\x20\x20\x20From\x20Amount:\x20'+_0x5a18c4[_0x514a87(0x151)]+'\x20'+_0x5a18c4[_0x514a87(0x13d)]),console[_0x514a87(0x168)](_0x514a87(0x162)+_0x5a18c4[_0x514a87(0x14d)]+'\x20'+_0x5a18c4['to_currency']),{'gateway_payment_id':_0x45a261,'payment_url':_0x135162,'session_id':_0x45a261,'status':_0x5a18c4[_0x514a87(0x140)],'from_amount':_0x5a18c4[_0x514a87(0x151)],'to_amount':_0x5a18c4['to_amount']};}catch(_0x4319a4){console[_0x514a87(0x15f)]('‚ùå\x20InstaXChange\x20proxy\x20request\x20failed:',_0x4319a4);if(_0x4319a4 instanceof Error)throw new Error(_0x514a87(0x15a)+_0x4319a4[_0x514a87(0x157)]);throw new Error(_0x514a87(0x15e));}}}function a60_0x231f(_0x564837,_0x3300a0){_0x564837=_0x564837-0x13c;const _0x36a578=a60_0x36a5();let _0x231fe0=_0x36a578[_0x564837];return _0x231fe0;}exports[a60_0x5ec749(0x148)]=InstaXChangeService;