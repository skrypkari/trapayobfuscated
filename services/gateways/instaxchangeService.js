'use strict';function a66_0x27b3(_0x26e874,_0x3c9025){_0x26e874=_0x26e874-0x15b;const _0x379e4c=a66_0x379e();let _0x27b32c=_0x379e4c[_0x26e874];return _0x27b32c;}function a66_0x379e(){const _0x5cdabf=['10CLxKgH','from_amount','19970nnModu','log','66HKqPgM','trim','from_currency','sending','\x20\x20\x20Customer:\x20','üì•\x20InstaXChange\x20proxy\x20response:','https://tesoft.uk/gateway/instaxchange/create.php','‚ùå\x20Failed\x20to\x20parse\x20JSON\x20response:','742628nlPKjy','1449376QeMjaI','üì•\x20InstaXChange\x20proxy\x20raw\x20response:','substring','\x20\x20\x20Amount:\x20','\x20\x20\x20Payment\x20URL:\x20','\x20\x20\x20Order\x20ID:\x20','184723vHzrpy','N/A','üì§\x20Sending\x20request\x20to\x20InstaXChange\x20proxy:','USDC','https://instaxchange.com/order/','üì•\x20InstaXChange\x20proxy\x20HTTP\x20status:\x20','1036533Xhzgzp','üê≥\x20Creating\x20InstaXChange\x20payment\x20session:','slice','application/json','split','Customer','‚úÖ\x20InstaXChange\x20payment\x20session\x20created:','to_amount','to_currency','8340920Pffnet','275856kvoGQe','\x20\x20\x20First\x20Name:\x20','\x20\x20\x20Session\x20ID:\x20','__esModule','InstaXChange\x20payment\x20creation\x20failed:\x20','https://tesoft.uk/gateway/instaxchange/webhook.php?paymentId=','InstaXChangeService','proxyUrl','error','1449jIXHZE','\x20\x20\x20Status:\x20','status','InstaXChange\x20payment\x20creation\x20failed:\x20Unknown\x20error','defineProperty','POST','\x20\x20\x20Error\x20details:','\x20\x20\x20From\x20Amount:\x20','statusText','parse','‚ùå\x20InstaXChange\x20proxy\x20request\x20failed:','join','Invalid\x20JSON\x20response\x20from\x20proxy:\x20','Invalid\x20response\x20from\x20InstaXChange\x20proxy','card','message'];a66_0x379e=function(){return _0x5cdabf;};return a66_0x379e();}const a66_0x26cfbb=a66_0x27b3;(function(_0x372ea9,_0x42b2b5){const _0xdb4852=a66_0x27b3,_0x4b73a1=_0x372ea9();while(!![]){try{const _0x59ebbe=parseInt(_0xdb4852(0x173))/0x1+-parseInt(_0xdb4852(0x18c))/0x2*(-parseInt(_0xdb4852(0x169))/0x3)+-parseInt(_0xdb4852(0x15c))/0x4+-parseInt(_0xdb4852(0x172))/0x5+parseInt(_0xdb4852(0x190))/0x6*(parseInt(_0xdb4852(0x163))/0x7)+parseInt(_0xdb4852(0x15d))/0x8+-parseInt(_0xdb4852(0x17c))/0x9*(-parseInt(_0xdb4852(0x18e))/0xa);if(_0x59ebbe===_0x42b2b5)break;else _0x4b73a1['push'](_0x4b73a1['shift']());}catch(_0x510616){_0x4b73a1['push'](_0x4b73a1['shift']());}}}(a66_0x379e,0xe61ca));Object[a66_0x26cfbb(0x180)](exports,a66_0x26cfbb(0x176),{'value':!![]}),exports[a66_0x26cfbb(0x179)]=void 0x0;class InstaXChangeService{constructor(){const _0x4a74ad=a66_0x26cfbb;this['proxyUrl']=_0x4a74ad(0x196);}async['createPayment'](_0x3bf720){const _0x3dfcb2=a66_0x26cfbb,{paymentId:_0x167048,orderId:_0x5ed994,amount:_0x2a9780,currency:_0x32d18f,method:method=_0x3dfcb2(0x18a),customerEmail:_0x427668,customerName:_0x1c01f8,returnUrl:_0x5ee98d}=_0x3bf720;console['log'](_0x3dfcb2(0x16a)),console['log']('\x20\x20\x20Payment\x20ID:\x20'+_0x167048),console[_0x3dfcb2(0x18f)](_0x3dfcb2(0x162)+_0x5ed994),console[_0x3dfcb2(0x18f)](_0x3dfcb2(0x160)+_0x2a9780+'\x20'+_0x32d18f),console[_0x3dfcb2(0x18f)]('\x20\x20\x20Method:\x20'+method),console[_0x3dfcb2(0x18f)](_0x3dfcb2(0x194)+(_0x1c01f8||_0x3dfcb2(0x164))+'\x20('+(_0x427668||_0x3dfcb2(0x164))+')');let _0x16dc3a='Customer',_0x4752a7='';if(_0x1c01f8){const _0x5efa36=_0x1c01f8[_0x3dfcb2(0x191)]()[_0x3dfcb2(0x16d)]('\x20');_0x16dc3a=_0x5efa36[0x0]||_0x3dfcb2(0x16e),_0x4752a7=_0x5efa36[_0x3dfcb2(0x16b)](0x1)[_0x3dfcb2(0x187)]('\x20')||'';}console[_0x3dfcb2(0x18f)](_0x3dfcb2(0x174)+_0x16dc3a),console[_0x3dfcb2(0x18f)]('\x20\x20\x20Last\x20Name:\x20'+_0x4752a7);const _0x48f339={'accountRefId':process.env.INSTAXCHANGE_ACCOUNT_REF_ID,'fromAmount':_0x2a9780,'toCurrency':_0x3dfcb2(0x166),'fromCurrency':_0x32d18f,'address':process.env.INSTAXCHANGE_WALLET_ADDRESS,'amountDirection':_0x3dfcb2(0x193),'webhookRef':_0x3dfcb2(0x178)+_0x167048,'returnUrl':_0x5ee98d,'method':method,'email':_0x427668||'','firstName':_0x16dc3a,'lastName':_0x4752a7};console[_0x3dfcb2(0x18f)](_0x3dfcb2(0x165),_0x48f339);try{const _0x18e6ba=await fetch(this[_0x3dfcb2(0x17a)],{'method':_0x3dfcb2(0x181),'headers':{'Content-Type':_0x3dfcb2(0x16c)},'body':JSON['stringify'](_0x48f339),'signal':AbortSignal['timeout'](0x7530)});console['log'](_0x3dfcb2(0x168)+_0x18e6ba[_0x3dfcb2(0x17e)]+'\x20'+_0x18e6ba[_0x3dfcb2(0x184)]);const _0x339f4e=await _0x18e6ba['text']();console['log'](_0x3dfcb2(0x15e),_0x339f4e);let _0x5e1ede;try{_0x5e1ede=JSON[_0x3dfcb2(0x185)](_0x339f4e);}catch(_0x5a2499){console[_0x3dfcb2(0x17b)](_0x3dfcb2(0x15b),_0x5a2499);throw new Error(_0x3dfcb2(0x188)+_0x339f4e[_0x3dfcb2(0x15f)](0x0,0xc8));}console[_0x3dfcb2(0x18f)](_0x3dfcb2(0x195),_0x5e1ede);if(!_0x18e6ba['ok']){const _0x4737f5=_0x5e1ede?.['error']||_0x5e1ede?.[_0x3dfcb2(0x18b)]||'HTTP\x20'+_0x18e6ba[_0x3dfcb2(0x17e)]+':\x20'+_0x18e6ba[_0x3dfcb2(0x184)];console[_0x3dfcb2(0x17b)](_0x3dfcb2(0x182),_0x5e1ede);throw new Error(_0x3dfcb2(0x177)+_0x4737f5);}if(!_0x5e1ede||!_0x5e1ede['id'])throw new Error(_0x3dfcb2(0x189));const _0x241155=_0x5e1ede['id'],_0xbaa384=_0x3dfcb2(0x167)+_0x241155;return console[_0x3dfcb2(0x18f)](_0x3dfcb2(0x16f)),console[_0x3dfcb2(0x18f)](_0x3dfcb2(0x175)+_0x241155),console[_0x3dfcb2(0x18f)](_0x3dfcb2(0x161)+_0xbaa384),console[_0x3dfcb2(0x18f)](_0x3dfcb2(0x17d)+_0x5e1ede['status']),console[_0x3dfcb2(0x18f)](_0x3dfcb2(0x183)+_0x5e1ede[_0x3dfcb2(0x18d)]+'\x20'+_0x5e1ede[_0x3dfcb2(0x192)]),console[_0x3dfcb2(0x18f)]('\x20\x20\x20To\x20Amount:\x20'+_0x5e1ede[_0x3dfcb2(0x170)]+'\x20'+_0x5e1ede[_0x3dfcb2(0x171)]),{'gateway_payment_id':_0x241155,'payment_url':_0xbaa384,'session_id':_0x241155,'status':_0x5e1ede['status'],'from_amount':_0x5e1ede[_0x3dfcb2(0x18d)],'to_amount':_0x5e1ede[_0x3dfcb2(0x170)]};}catch(_0x95db60){console[_0x3dfcb2(0x17b)](_0x3dfcb2(0x186),_0x95db60);if(_0x95db60 instanceof Error)throw new Error('InstaXChange\x20payment\x20creation\x20failed:\x20'+_0x95db60[_0x3dfcb2(0x18b)]);throw new Error(_0x3dfcb2(0x17f));}}}exports['InstaXChangeService']=InstaXChangeService;