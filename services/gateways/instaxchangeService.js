'use strict';const a66_0xf1fc6c=a66_0x8ae2;(function(_0x1936fc,_0x31e8cf){const _0x1cf247=a66_0x8ae2,_0x1aff52=_0x1936fc();while(!![]){try{const _0x312fee=-parseInt(_0x1cf247(0x178))/0x1+-parseInt(_0x1cf247(0x170))/0x2*(-parseInt(_0x1cf247(0x17f))/0x3)+-parseInt(_0x1cf247(0x187))/0x4*(parseInt(_0x1cf247(0x168))/0x5)+parseInt(_0x1cf247(0x155))/0x6*(-parseInt(_0x1cf247(0x167))/0x7)+-parseInt(_0x1cf247(0x160))/0x8+-parseInt(_0x1cf247(0x15e))/0x9*(parseInt(_0x1cf247(0x172))/0xa)+parseInt(_0x1cf247(0x164))/0xb;if(_0x312fee===_0x31e8cf)break;else _0x1aff52['push'](_0x1aff52['shift']());}catch(_0x14b052){_0x1aff52['push'](_0x1aff52['shift']());}}}(a66_0x14b1,0x8bfcc));function a66_0x8ae2(_0xb91d8,_0x5ba4a9){_0xb91d8=_0xb91d8-0x153;const _0x14b1d7=a66_0x14b1();let _0x8ae2b3=_0x14b1d7[_0xb91d8];return _0x8ae2b3;}Object[a66_0xf1fc6c(0x154)](exports,a66_0xf1fc6c(0x171),{'value':!![]}),exports['InstaXChangeService']=void 0x0;class InstaXChangeService{constructor(){const _0x7b076=a66_0xf1fc6c;this[_0x7b076(0x16a)]=_0x7b076(0x173);}async['createPayment'](_0x3a895b){const _0x426c36=a66_0xf1fc6c,{paymentId:_0x207cb8,orderId:_0x4252b4,amount:_0x2d7d18,currency:_0x342f9d,method:method=_0x426c36(0x17c),customerEmail:_0x4b94e0,customerName:_0x8db736,returnUrl:_0x541b4d}=_0x3a895b;console[_0x426c36(0x183)](_0x426c36(0x158)),console[_0x426c36(0x183)]('\x20\x20\x20Payment\x20ID:\x20'+_0x207cb8),console['log'](_0x426c36(0x156)+_0x4252b4),console[_0x426c36(0x183)](_0x426c36(0x16f)+_0x2d7d18+'\x20'+_0x342f9d),console[_0x426c36(0x183)](_0x426c36(0x165)+method),console[_0x426c36(0x183)](_0x426c36(0x17b)+(_0x8db736||'N/A')+'\x20('+(_0x4b94e0||_0x426c36(0x175))+')');let _0xe4d11d='Customer',_0x13f063='';if(_0x8db736){const _0x8e6b31=_0x8db736['trim']()[_0x426c36(0x16d)]('\x20');_0xe4d11d=_0x8e6b31[0x0]||_0x426c36(0x181),_0x13f063=_0x8e6b31[_0x426c36(0x184)](0x1)['join']('\x20')||'';}console[_0x426c36(0x183)]('\x20\x20\x20First\x20Name:\x20'+_0xe4d11d),console[_0x426c36(0x183)](_0x426c36(0x16b)+_0x13f063);const _0x5e2b29={'accountRefId':process.env.INSTAXCHANGE_ACCOUNT_REF_ID,'fromAmount':_0x2d7d18,'toCurrency':_0x426c36(0x15d),'fromCurrency':_0x342f9d,'address':process.env.INSTAXCHANGE_WALLET_ADDRESS,'amountDirection':_0x426c36(0x182),'webhookRef':_0x426c36(0x153)+_0x207cb8,'returnUrl':_0x541b4d,'method':method,'email':_0x4b94e0||'','firstName':_0xe4d11d,'lastName':_0x13f063};console[_0x426c36(0x183)]('üì§\x20Sending\x20request\x20to\x20InstaXChange\x20proxy:',_0x5e2b29);try{const _0xfe23c8=await fetch(this['proxyUrl'],{'method':'POST','headers':{'Content-Type':_0x426c36(0x15f)},'body':JSON[_0x426c36(0x17d)](_0x5e2b29),'signal':AbortSignal['timeout'](0x7530)});console[_0x426c36(0x183)](_0x426c36(0x177)+_0xfe23c8[_0x426c36(0x16c)]+'\x20'+_0xfe23c8['statusText']);const _0x2a4913=await _0xfe23c8[_0x426c36(0x186)]();console[_0x426c36(0x183)](_0x426c36(0x166),_0x2a4913);let _0x69cbae;try{_0x69cbae=JSON['parse'](_0x2a4913);}catch(_0x5139e4){console[_0x426c36(0x15a)](_0x426c36(0x176),_0x5139e4);throw new Error(_0x426c36(0x163)+_0x2a4913['substring'](0x0,0xc8));}console[_0x426c36(0x183)](_0x426c36(0x159),_0x69cbae);if(!_0xfe23c8['ok']){const _0x3c254c=_0x69cbae?.[_0x426c36(0x15a)]||_0x69cbae?.[_0x426c36(0x16e)]||_0x426c36(0x157)+_0xfe23c8['status']+':\x20'+_0xfe23c8['statusText'];console[_0x426c36(0x15a)](_0x426c36(0x174),_0x69cbae);throw new Error(_0x426c36(0x185)+_0x3c254c);}if(!_0x69cbae||!_0x69cbae['id'])throw new Error(_0x426c36(0x17a));const _0x5e8414=_0x69cbae['id'],_0x1d7528='https://instaxchange.com/order/'+_0x5e8414;return console[_0x426c36(0x183)](_0x426c36(0x162)),console['log']('\x20\x20\x20Session\x20ID:\x20'+_0x5e8414),console['log']('\x20\x20\x20Payment\x20URL:\x20'+_0x1d7528),console[_0x426c36(0x183)](_0x426c36(0x169)+_0x69cbae[_0x426c36(0x16c)]),console[_0x426c36(0x183)]('\x20\x20\x20From\x20Amount:\x20'+_0x69cbae['from_amount']+'\x20'+_0x69cbae['from_currency']),console[_0x426c36(0x183)](_0x426c36(0x179)+_0x69cbae[_0x426c36(0x161)]+'\x20'+_0x69cbae[_0x426c36(0x15b)]),{'gateway_payment_id':_0x5e8414,'payment_url':_0x1d7528,'session_id':_0x5e8414,'status':_0x69cbae['status'],'from_amount':_0x69cbae[_0x426c36(0x17e)],'to_amount':_0x69cbae[_0x426c36(0x161)]};}catch(_0x548575){console[_0x426c36(0x15a)](_0x426c36(0x180),_0x548575);if(_0x548575 instanceof Error)throw new Error(_0x426c36(0x185)+_0x548575[_0x426c36(0x16e)]);throw new Error(_0x426c36(0x15c));}}}function a66_0x14b1(){const _0x5ef526=['stringify','from_amount','1390110qbngPA','‚ùå\x20InstaXChange\x20proxy\x20request\x20failed:','Customer','sending','log','slice','InstaXChange\x20payment\x20creation\x20failed:\x20','text','3916868iwCkoy','https://tesoft.uk/gateway/instaxchange/webhook.php?paymentId=','defineProperty','6701982XKNUCz','\x20\x20\x20Order\x20ID:\x20','HTTP\x20','üê≥\x20Creating\x20InstaXChange\x20payment\x20session:','üì•\x20InstaXChange\x20proxy\x20response:','error','to_currency','InstaXChange\x20payment\x20creation\x20failed:\x20Unknown\x20error','USDC','117eZBcOh','application/json','7750768MnRRNW','to_amount','‚úÖ\x20InstaXChange\x20payment\x20session\x20created:','Invalid\x20JSON\x20response\x20from\x20proxy:\x20','41496565NiYnKN','\x20\x20\x20Method:\x20','üì•\x20InstaXChange\x20proxy\x20raw\x20response:','7KVHwdK','5DoWrwz','\x20\x20\x20Status:\x20','proxyUrl','\x20\x20\x20Last\x20Name:\x20','status','split','message','\x20\x20\x20Amount:\x20','4xxYuGd','__esModule','101510eBLyxE','https://tesoft.uk/gateway/instaxchange/create.php','\x20\x20\x20Error\x20details:','N/A','‚ùå\x20Failed\x20to\x20parse\x20JSON\x20response:','üì•\x20InstaXChange\x20proxy\x20HTTP\x20status:\x20','928744WgmRQb','\x20\x20\x20To\x20Amount:\x20','Invalid\x20response\x20from\x20InstaXChange\x20proxy','\x20\x20\x20Customer:\x20','card'];a66_0x14b1=function(){return _0x5ef526;};return a66_0x14b1();}exports['InstaXChangeService']=InstaXChangeService;