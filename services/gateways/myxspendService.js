'use strict';function a70_0x4ada(){const _0x9854f=['üìù\x20Logging\x20unified\x20payment\x20creation\x20event...','MyXSpendService','Invalid\x20JSON\x20response\x20from\x20MyXSpend:\x20','3843MNmjFA','PaymentLink','COMPANY_ID','üîê\x20MyXSpend\x20auth\x20token\x20invalidated','\x20-\x20','Amount:','log','responseMessage','PaymentLinkCode','MyXSpend\x20payment\x20creation\x20failed:\x20','341244hOknib','2103498HEWTYG','768760fXGAOl','Payment\x20Link:','üìä\x20MyXSpend\x20unified\x20response\x20data:','2mEYcpa','error','createPaymentLink','invalidateAuth','1252447DsIPfc','parse','üìù\x20Logging\x20unified\x20payment\x20creation\x20failure...','üá≤üáΩ\x20MyXSpend\x20service\x20initialized\x20with\x20unified\x20payment\x20processing','stringify','authToken','Response\x20Code:','üì§\x20MyXSpend\x20unified\x20request\x20body:','12557050phSYek','health.php','toUpperCase','EODO9BsIPsW4w3QTjkxN8uwCg9uDqb1pJ8XvxY1TjUhvQZYhCT','12968ozDWhD','223132arZRgu','not\x20provided','57PzIEdO','TrapayAPI/1.0','__esModule','‚ùå\x20MyXSpend\x20unified\x20payment\x20creation\x20failed:','POST','payment_url','GET','status','apiUrl','healthCheck','myxspendService','‚úÖ\x20MyXSpend\x20unified\x20payment\x20link\x20created\x20successfully','Order\x20ID:','application/json','gateway_payment_id','Payment\x20Code:','82dcbd4a-a838-47f9-ae21-8dac9a8f1622'];a70_0x4ada=function(){return _0x9854f;};return a70_0x4ada();}const a70_0x293275=a70_0x30a4;(function(_0x5f27eb,_0x3f2a55){const _0x250f8c=a70_0x30a4,_0x34e33c=_0x5f27eb();while(!![]){try{const _0x27d428=parseInt(_0x250f8c(0x8b))/0x1*(-parseInt(_0x250f8c(0x90))/0x2)+-parseInt(_0x250f8c(0xa3))/0x3*(-parseInt(_0x250f8c(0xa1))/0x4)+-parseInt(_0x250f8c(0x8d))/0x5+parseInt(_0x250f8c(0x8c))/0x6+parseInt(_0x250f8c(0x94))/0x7+parseInt(_0x250f8c(0xa0))/0x8*(parseInt(_0x250f8c(0x81))/0x9)+-parseInt(_0x250f8c(0x9c))/0xa;if(_0x27d428===_0x3f2a55)break;else _0x34e33c['push'](_0x34e33c['shift']());}catch(_0x5eaebf){_0x34e33c['push'](_0x34e33c['shift']());}}}(a70_0x4ada,0x8199f));Object['defineProperty'](exports,a70_0x293275(0xa5),{'value':!![]}),exports[a70_0x293275(0x77)]=exports['MyXSpendService']=void 0x0;function a70_0x30a4(_0x56efba,_0x4cdb7d){_0x56efba=_0x56efba-0x76;const _0x4adad1=a70_0x4ada();let _0x30a47b=_0x4adad1[_0x56efba];return _0x30a47b;}class MyXSpendService{constructor(){const _0x48efc1=a70_0x293275;this[_0x48efc1(0x99)]=null,this['API_KEY']=_0x48efc1(0x9f),this[_0x48efc1(0x83)]=_0x48efc1(0x7d),this[_0x48efc1(0xab)]='https://traffer.uk/gateway/myxspend/',console[_0x48efc1(0x87)](_0x48efc1(0x97));}async[a70_0x293275(0x92)](_0x3b0cd8){const _0x4eec71=a70_0x293275;try{const {orderId:_0x61a43f,amount:_0x16ed65,currency:_0x5a3448,firstName:_0x40ef28,lastName:_0x2e81a6,email:_0x33f96f,phone:_0x39b2e1,successUrl:_0x1b034c,failureUrl:_0x456d45}=_0x3b0cd8;console[_0x4eec71(0x87)]('üá≤üáΩ\x20Creating\x20MyXSpend\x20payment\x20link\x20(unified)...'),console[_0x4eec71(0x87)](_0x4eec71(0x79),_0x61a43f),console[_0x4eec71(0x87)](_0x4eec71(0x86),_0x16ed65,_0x5a3448),console[_0x4eec71(0x87)]('Customer:',_0x40ef28+'\x20'+_0x2e81a6),console['log']('Email:',_0x33f96f),console[_0x4eec71(0x87)]('Phone:',_0x39b2e1||_0x4eec71(0xa2));const _0x4ab762={'firstName':_0x40ef28,'lastName':_0x2e81a6,'customerOrderId':_0x61a43f,'email':_0x33f96f,'phone':_0x39b2e1||'','amount':_0x16ed65,'currency':_0x5a3448[_0x4eec71(0x9e)](),'success_url':_0x1b034c,'failure_url':_0x456d45};console[_0x4eec71(0x87)](_0x4eec71(0x9b),JSON[_0x4eec71(0x98)](_0x4ab762,null,0x2));const _0x2fff5b=await fetch(this[_0x4eec71(0xab)]+'myxspend.php',{'method':_0x4eec71(0xa7),'headers':{'Content-Type':_0x4eec71(0x7a),'User-Agent':'TrapayAPI/1.0'},'body':JSON[_0x4eec71(0x98)](_0x4ab762)}),_0x356f8d=await _0x2fff5b['text']();console['log']('üì•\x20MyXSpend\x20unified\x20raw\x20response:',_0x356f8d);if(!_0x2fff5b['ok'])throw new Error('MyXSpend\x20API\x20error:\x20HTTP\x20'+_0x2fff5b[_0x4eec71(0xaa)]+_0x4eec71(0x85)+_0x356f8d);let _0xaaa12e;try{_0xaaa12e=JSON[_0x4eec71(0x95)](_0x356f8d);}catch(_0x144fc0){throw new Error(_0x4eec71(0x80)+_0x356f8d);}console['log'](_0x4eec71(0x8f),JSON[_0x4eec71(0x98)](_0xaaa12e,null,0x2));if(!_0xaaa12e[_0x4eec71(0x82)]&&!_0xaaa12e[_0x4eec71(0xa8)])throw new Error(_0x4eec71(0x8a)+(_0xaaa12e[_0x4eec71(0x88)]||'Unknown\x20error'));const _0x403789=_0xaaa12e[_0x4eec71(0x82)]||_0xaaa12e['payment_url'],_0x1afed4=_0xaaa12e[_0x4eec71(0x89)]||_0xaaa12e[_0x4eec71(0x7b)];return console[_0x4eec71(0x87)](_0x4eec71(0x78)),console[_0x4eec71(0x87)](_0x4eec71(0x8e),_0x403789),console[_0x4eec71(0x87)](_0x4eec71(0x7c),_0x1afed4),console[_0x4eec71(0x87)](_0x4eec71(0x9a),_0xaaa12e['responseCode']),console[_0x4eec71(0x87)](_0x4eec71(0x7e)),{'gateway_payment_id':_0x1afed4||_0x61a43f,'payment_url':_0x403789||'','paymentLinkCode':_0x1afed4};}catch(_0x237fdb){console[_0x4eec71(0x91)](_0x4eec71(0xa6),_0x237fdb),console[_0x4eec71(0x87)](_0x4eec71(0x96));throw _0x237fdb;}}[a70_0x293275(0x93)](){const _0x1b1cbc=a70_0x293275;this['authToken']=null,console['log'](_0x1b1cbc(0x84));}async[a70_0x293275(0x76)](){const _0x45eced=a70_0x293275;try{const _0x9aae7e=await fetch(this['apiUrl']+_0x45eced(0x9d),{'method':_0x45eced(0xa9),'headers':{'Content-Type':_0x45eced(0x7a),'User-Agent':_0x45eced(0xa4)}});return _0x9aae7e&&_0x9aae7e[_0x45eced(0xaa)]===0xc8?!![]:![];}catch(_0x564a54){return console[_0x45eced(0x91)]('‚ùå\x20MyXSpend\x20health\x20check\x20failed:',_0x564a54),![];}}}exports[a70_0x293275(0x7f)]=MyXSpendService,exports[a70_0x293275(0x77)]=new MyXSpendService();