'use strict';const a70_0x20695c=a70_0x1e67;(function(_0x34a1b1,_0x240c12){const _0x257165=a70_0x1e67,_0x31d6c3=_0x34a1b1();while(!![]){try{const _0x1384e3=-parseInt(_0x257165(0x9d))/0x1+-parseInt(_0x257165(0x8f))/0x2*(parseInt(_0x257165(0x8b))/0x3)+-parseInt(_0x257165(0x87))/0x4*(parseInt(_0x257165(0xac))/0x5)+parseInt(_0x257165(0xaf))/0x6+-parseInt(_0x257165(0x93))/0x7*(parseInt(_0x257165(0x86))/0x8)+-parseInt(_0x257165(0xb2))/0x9*(-parseInt(_0x257165(0xa3))/0xa)+parseInt(_0x257165(0xa9))/0xb;if(_0x1384e3===_0x240c12)break;else _0x31d6c3['push'](_0x31d6c3['shift']());}catch(_0x18de73){_0x31d6c3['push'](_0x31d6c3['shift']());}}}(a70_0x167e,0xbf8c2));function a70_0x1e67(_0x559059,_0x4fed14){_0x559059=_0x559059-0x80;const _0x167e58=a70_0x167e();let _0x1e6789=_0x167e58[_0x559059];return _0x1e6789;}function a70_0x167e(){const _0x58e318=['defineProperty','toUpperCase','health.php','82dcbd4a-a838-47f9-ae21-8dac9a8f1622','invalidateAuth','Payment\x20Code:','responseMessage','Email:','354808FIdAgB','892THyBsd','myxspend.php','TrapayAPI/1.0','text','105KqusEL','üì•\x20MyXSpend\x20unified\x20raw\x20response:','status','MyXSpend\x20API\x20error:\x20HTTP\x20','54758FAPyyX','Phone:','createPaymentLink','__esModule','56HAyFOt','COMPANY_ID','GET','log','apiUrl','EODO9BsIPsW4w3QTjkxN8uwCg9uDqb1pJ8XvxY1TjUhvQZYhCT','Unknown\x20error','myxspendService','‚ùå\x20MyXSpend\x20unified\x20payment\x20creation\x20failed:','API_KEY','1553791BMrVDw','üîê\x20MyXSpend\x20auth\x20token\x20invalidated','authToken','responseCode','Customer:','‚úÖ\x20MyXSpend\x20unified\x20payment\x20link\x20created\x20successfully','244040LiJfLP','POST','error','\x20-\x20','not\x20provided','payment_url','18811309PuDvbZ','PaymentLinkCode','Payment\x20Link:','20055izefBd','Response\x20Code:','üá≤üáΩ\x20Creating\x20MyXSpend\x20payment\x20link\x20(unified)...','8375640XNBHCJ','stringify','PaymentLink','531CbNBor','Invalid\x20JSON\x20response\x20from\x20MyXSpend:\x20','gateway_payment_id','https://traffer.uk/gateway/myxspend/'];a70_0x167e=function(){return _0x58e318;};return a70_0x167e();}Object[a70_0x20695c(0xb6)](exports,a70_0x20695c(0x92),{'value':!![]}),exports[a70_0x20695c(0x9a)]=exports['MyXSpendService']=void 0x0;class MyXSpendService{constructor(){const _0x491149=a70_0x20695c;this[_0x491149(0x9f)]=null,this[_0x491149(0x9c)]=_0x491149(0x98),this[_0x491149(0x94)]=_0x491149(0x81),this[_0x491149(0x97)]=_0x491149(0xb5),console['log']('üá≤üáΩ\x20MyXSpend\x20service\x20initialized\x20with\x20unified\x20payment\x20processing');}async[a70_0x20695c(0x91)](_0x88ecc9){const _0x1ee3f7=a70_0x20695c;try{const {orderId:_0x2b07e4,amount:_0x2174e0,currency:_0x4ce935,firstName:_0x28ebf0,lastName:_0x3c5d1,email:_0x26e3b2,phone:_0x5d1c43,successUrl:_0x4aabbc,failureUrl:_0x41b6de}=_0x88ecc9;console[_0x1ee3f7(0x96)](_0x1ee3f7(0xae)),console['log']('Order\x20ID:',_0x2b07e4),console[_0x1ee3f7(0x96)]('Amount:',_0x2174e0,_0x4ce935),console[_0x1ee3f7(0x96)](_0x1ee3f7(0xa1),_0x28ebf0+'\x20'+_0x3c5d1),console['log'](_0x1ee3f7(0x85),_0x26e3b2),console[_0x1ee3f7(0x96)](_0x1ee3f7(0x90),_0x5d1c43||_0x1ee3f7(0xa7));const _0x3a7301={'firstName':_0x28ebf0,'lastName':_0x3c5d1,'customerOrderId':_0x2b07e4,'email':_0x26e3b2,'phone':_0x5d1c43||'','amount':_0x2174e0,'currency':_0x4ce935[_0x1ee3f7(0xb7)](),'success_url':_0x4aabbc,'failure_url':_0x41b6de};console[_0x1ee3f7(0x96)]('üì§\x20MyXSpend\x20unified\x20request\x20body:',JSON[_0x1ee3f7(0xb0)](_0x3a7301,null,0x2));const _0x855b30=await fetch(this[_0x1ee3f7(0x97)]+_0x1ee3f7(0x88),{'method':_0x1ee3f7(0xa4),'headers':{'Content-Type':'application/json','User-Agent':_0x1ee3f7(0x89)},'body':JSON[_0x1ee3f7(0xb0)](_0x3a7301)}),_0x20e305=await _0x855b30[_0x1ee3f7(0x8a)]();console[_0x1ee3f7(0x96)](_0x1ee3f7(0x8c),_0x20e305);if(!_0x855b30['ok'])throw new Error(_0x1ee3f7(0x8e)+_0x855b30[_0x1ee3f7(0x8d)]+_0x1ee3f7(0xa6)+_0x20e305);let _0x4f7a5e;try{_0x4f7a5e=JSON['parse'](_0x20e305);}catch(_0x4301df){throw new Error(_0x1ee3f7(0xb3)+_0x20e305);}console[_0x1ee3f7(0x96)]('üìä\x20MyXSpend\x20unified\x20response\x20data:',JSON[_0x1ee3f7(0xb0)](_0x4f7a5e,null,0x2));if(!_0x4f7a5e[_0x1ee3f7(0xb1)]&&!_0x4f7a5e[_0x1ee3f7(0xa8)])throw new Error('MyXSpend\x20payment\x20creation\x20failed:\x20'+(_0x4f7a5e[_0x1ee3f7(0x84)]||_0x1ee3f7(0x99)));const _0x52d318=_0x4f7a5e[_0x1ee3f7(0xb1)]||_0x4f7a5e['payment_url'],_0x473dfa=_0x4f7a5e[_0x1ee3f7(0xaa)]||_0x4f7a5e[_0x1ee3f7(0xb4)];return console[_0x1ee3f7(0x96)](_0x1ee3f7(0xa2)),console[_0x1ee3f7(0x96)](_0x1ee3f7(0xab),_0x52d318),console['log'](_0x1ee3f7(0x83),_0x473dfa),console[_0x1ee3f7(0x96)](_0x1ee3f7(0xad),_0x4f7a5e[_0x1ee3f7(0xa0)]),console[_0x1ee3f7(0x96)]('üìù\x20Logging\x20unified\x20payment\x20creation\x20event...'),{'gateway_payment_id':_0x473dfa||_0x2b07e4,'payment_url':_0x52d318||'','paymentLinkCode':_0x473dfa};}catch(_0xd90733){console[_0x1ee3f7(0xa5)](_0x1ee3f7(0x9b),_0xd90733),console['log']('üìù\x20Logging\x20unified\x20payment\x20creation\x20failure...');throw _0xd90733;}}[a70_0x20695c(0x82)](){const _0x19e3fc=a70_0x20695c;this[_0x19e3fc(0x9f)]=null,console['log'](_0x19e3fc(0x9e));}async['healthCheck'](){const _0x5d8db8=a70_0x20695c;try{const _0x9fe49a=await fetch(this[_0x5d8db8(0x97)]+_0x5d8db8(0x80),{'method':_0x5d8db8(0x95),'headers':{'Content-Type':'application/json','User-Agent':_0x5d8db8(0x89)}});return _0x9fe49a&&_0x9fe49a['status']===0xc8?!![]:![];}catch(_0x32e1c2){return console[_0x5d8db8(0xa5)]('‚ùå\x20MyXSpend\x20health\x20check\x20failed:',_0x32e1c2),![];}}}exports['MyXSpendService']=MyXSpendService,exports[a70_0x20695c(0x9a)]=new MyXSpendService();