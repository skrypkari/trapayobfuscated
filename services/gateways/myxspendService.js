'use strict';const a52_0x575137=a52_0x1b63;function a52_0x4a3c(){const _0x15baab=['healthCheck','GET','text','4511944rtHzpq','Payment\x20Link:','Order\x20ID:','COMPANY_ID','üá≤üáΩ\x20Creating\x20MyXSpend\x20payment\x20link\x20(unified)...','__esModule','‚ùå\x20MyXSpend\x20unified\x20payment\x20creation\x20failed:','3gDmoOH','Phone:','TrapayAPI/1.0','82dcbd4a-a838-47f9-ae21-8dac9a8f1622','üì§\x20MyXSpend\x20unified\x20request\x20body:','myxspend.php','status','POST','üì•\x20MyXSpend\x20unified\x20raw\x20response:','Unknown\x20error','Payment\x20Code:','Customer:','responseCode','PaymentLinkCode','responseMessage','defineProperty','3972240oFhVCo','payment_url','log','https://traffer.uk/gateway/myxspend/','gateway_payment_id','üìä\x20MyXSpend\x20unified\x20response\x20data:','7NUSrRS','‚úÖ\x20MyXSpend\x20unified\x20payment\x20link\x20created\x20successfully','MyXSpendService','createPaymentLink','myxspendService','stringify','not\x20provided','invalidateAuth','1290945Tburxb','üìù\x20Logging\x20unified\x20payment\x20creation\x20event...','authToken','1410618VdFhpw','4257uGvZrZ','application/json','496629kJMMTY','parse','1780420bOiPsh','API_KEY','Response\x20Code:','PaymentLink','apiUrl'];a52_0x4a3c=function(){return _0x15baab;};return a52_0x4a3c();}(function(_0x326894,_0x5658e9){const _0x5846af=a52_0x1b63,_0x27b2ef=_0x326894();while(!![]){try{const _0x52f2a4=parseInt(_0x5846af(0x1b2))/0x1+parseInt(_0x5846af(0x1af))/0x2+-parseInt(_0x5846af(0x1c3))/0x3*(parseInt(_0x5846af(0x1b4))/0x4)+-parseInt(_0x5846af(0x1ac))/0x5+-parseInt(_0x5846af(0x19e))/0x6+parseInt(_0x5846af(0x1a4))/0x7*(parseInt(_0x5846af(0x1bc))/0x8)+parseInt(_0x5846af(0x1b0))/0x9;if(_0x52f2a4===_0x5658e9)break;else _0x27b2ef['push'](_0x27b2ef['shift']());}catch(_0x4074ef){_0x27b2ef['push'](_0x27b2ef['shift']());}}}(a52_0x4a3c,0x61eae));function a52_0x1b63(_0x331e82,_0x243b5c){const _0x4a3c2a=a52_0x4a3c();return a52_0x1b63=function(_0x1b63bf,_0x2f1fcf){_0x1b63bf=_0x1b63bf-0x199;let _0x43c806=_0x4a3c2a[_0x1b63bf];return _0x43c806;},a52_0x1b63(_0x331e82,_0x243b5c);}Object[a52_0x575137(0x19d)](exports,a52_0x575137(0x1c1),{'value':!![]}),exports['myxspendService']=exports['MyXSpendService']=void 0x0;class MyXSpendService{constructor(){const _0x489671=a52_0x575137;this[_0x489671(0x1ae)]=null,this[_0x489671(0x1b5)]='EODO9BsIPsW4w3QTjkxN8uwCg9uDqb1pJ8XvxY1TjUhvQZYhCT',this[_0x489671(0x1bf)]=_0x489671(0x1c6),this['apiUrl']=_0x489671(0x1a1),console['log']('üá≤üáΩ\x20MyXSpend\x20service\x20initialized\x20with\x20unified\x20payment\x20processing');}async[a52_0x575137(0x1a7)](_0x164d64){const _0x37c269=a52_0x575137;try{const {orderId:_0x401fa1,amount:_0x2cf1c9,currency:_0x9c8590,firstName:_0x364531,lastName:_0x1c7286,email:_0x5bd270,phone:_0x49292e,successUrl:_0xc20e5c,failureUrl:_0x3da383}=_0x164d64;console[_0x37c269(0x1a0)](_0x37c269(0x1c0)),console[_0x37c269(0x1a0)](_0x37c269(0x1be),_0x401fa1),console[_0x37c269(0x1a0)]('Amount:',_0x2cf1c9,_0x9c8590),console[_0x37c269(0x1a0)](_0x37c269(0x199),_0x364531+'\x20'+_0x1c7286),console[_0x37c269(0x1a0)]('Email:',_0x5bd270),console[_0x37c269(0x1a0)](_0x37c269(0x1c4),_0x49292e||_0x37c269(0x1aa));const _0x38c2b8={'firstName':_0x364531,'lastName':_0x1c7286,'customerOrderId':_0x401fa1,'email':_0x5bd270,'phone':_0x49292e||'','amount':_0x2cf1c9,'currency':_0x9c8590['toUpperCase'](),'success_url':_0xc20e5c,'failure_url':_0x3da383};console[_0x37c269(0x1a0)](_0x37c269(0x1c7),JSON[_0x37c269(0x1a9)](_0x38c2b8,null,0x2));const _0x2dc748=await fetch(this[_0x37c269(0x1b8)]+_0x37c269(0x1c8),{'method':_0x37c269(0x1ca),'headers':{'Content-Type':_0x37c269(0x1b1),'User-Agent':'TrapayAPI/1.0'},'body':JSON['stringify'](_0x38c2b8)}),_0x164a0e=await _0x2dc748[_0x37c269(0x1bb)]();console['log'](_0x37c269(0x1cb),_0x164a0e);if(!_0x2dc748['ok'])throw new Error('MyXSpend\x20API\x20error:\x20HTTP\x20'+_0x2dc748[_0x37c269(0x1c9)]+'\x20-\x20'+_0x164a0e);let _0x2c15f4;try{_0x2c15f4=JSON[_0x37c269(0x1b3)](_0x164a0e);}catch(_0x389201){throw new Error('Invalid\x20JSON\x20response\x20from\x20MyXSpend:\x20'+_0x164a0e);}console[_0x37c269(0x1a0)](_0x37c269(0x1a3),JSON[_0x37c269(0x1a9)](_0x2c15f4,null,0x2));if(!_0x2c15f4['PaymentLink']&&!_0x2c15f4[_0x37c269(0x19f)])throw new Error('MyXSpend\x20payment\x20creation\x20failed:\x20'+(_0x2c15f4[_0x37c269(0x19c)]||_0x37c269(0x1cc)));const _0x2f4b52=_0x2c15f4[_0x37c269(0x1b7)]||_0x2c15f4[_0x37c269(0x19f)],_0x3611e1=_0x2c15f4[_0x37c269(0x19b)]||_0x2c15f4[_0x37c269(0x1a2)];return console['log'](_0x37c269(0x1a5)),console[_0x37c269(0x1a0)](_0x37c269(0x1bd),_0x2f4b52),console['log'](_0x37c269(0x1cd),_0x3611e1),console[_0x37c269(0x1a0)](_0x37c269(0x1b6),_0x2c15f4[_0x37c269(0x19a)]),console['log'](_0x37c269(0x1ad)),{'gateway_payment_id':_0x3611e1||_0x401fa1,'payment_url':_0x2f4b52||'','paymentLinkCode':_0x3611e1};}catch(_0xdc0bf0){console['error'](_0x37c269(0x1c2),_0xdc0bf0),console['log']('üìù\x20Logging\x20unified\x20payment\x20creation\x20failure...');throw _0xdc0bf0;}}[a52_0x575137(0x1ab)](){const _0x1d15ca=a52_0x575137;this[_0x1d15ca(0x1ae)]=null,console[_0x1d15ca(0x1a0)]('üîê\x20MyXSpend\x20auth\x20token\x20invalidated');}async[a52_0x575137(0x1b9)](){const _0xd35a58=a52_0x575137;try{const _0xb9f518=await fetch(this[_0xd35a58(0x1b8)]+'health.php',{'method':_0xd35a58(0x1ba),'headers':{'Content-Type':_0xd35a58(0x1b1),'User-Agent':_0xd35a58(0x1c5)}});return _0xb9f518&&_0xb9f518[_0xd35a58(0x1c9)]===0xc8?!![]:![];}catch(_0xf0caab){return console['error']('‚ùå\x20MyXSpend\x20health\x20check\x20failed:',_0xf0caab),![];}}}exports[a52_0x575137(0x1a6)]=MyXSpendService,exports[a52_0x575137(0x1a8)]=new MyXSpendService();