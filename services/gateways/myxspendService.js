'use strict';const a50_0x56ae9a=a50_0x5df6;(function(_0x9d5ff,_0x149236){const _0x2cc57d=a50_0x5df6,_0xfd705=_0x9d5ff();while(!![]){try{const _0x4d0546=-parseInt(_0x2cc57d(0xff))/0x1+-parseInt(_0x2cc57d(0xf7))/0x2+-parseInt(_0x2cc57d(0x118))/0x3*(parseInt(_0x2cc57d(0x107))/0x4)+parseInt(_0x2cc57d(0x10d))/0x5+parseInt(_0x2cc57d(0x11e))/0x6*(-parseInt(_0x2cc57d(0x103))/0x7)+-parseInt(_0x2cc57d(0x108))/0x8+parseInt(_0x2cc57d(0xf9))/0x9*(parseInt(_0x2cc57d(0x11d))/0xa);if(_0x4d0546===_0x149236)break;else _0xfd705['push'](_0xfd705['shift']());}catch(_0x59b3bc){_0xfd705['push'](_0xfd705['shift']());}}}(a50_0x1f20,0x72e87));function a50_0x1f20(){const _0x466d9c=['invalidateAuth','212xANPYT','1526760ocoEbf','stringify','defineProperty','parse','‚úÖ\x20MyXSpend\x20unified\x20payment\x20link\x20created\x20successfully','451650UVYHiL','üîê\x20MyXSpend\x20auth\x20token\x20invalidated','üì•\x20MyXSpend\x20unified\x20raw\x20response:','Customer:','__esModule','üá≤üáΩ\x20Creating\x20MyXSpend\x20payment\x20link\x20(unified)...','PaymentLink','üá≤üáΩ\x20MyXSpend\x20service\x20initialized\x20with\x20unified\x20payment\x20processing','payment_url','authToken','application/json','10470bEfnmt','MyXSpend\x20API\x20error:\x20HTTP\x20','Response\x20Code:','responseMessage','MyXSpendService','230yFMMQT','3534lysmRo','Payment\x20Code:','apiUrl','API_KEY','82dcbd4a-a838-47f9-ae21-8dac9a8f1622','not\x20provided','TrapayAPI/1.0','COMPANY_ID','Order\x20ID:','Unknown\x20error','gateway_payment_id','üìä\x20MyXSpend\x20unified\x20response\x20data:','GET','EODO9BsIPsW4w3QTjkxN8uwCg9uDqb1pJ8XvxY1TjUhvQZYhCT','üìù\x20Logging\x20unified\x20payment\x20creation\x20failure...','myxspendService','POST','Amount:','toUpperCase','1832816DrZXTq','PaymentLinkCode','1122921QQhohI','Email:','status','log','üì§\x20MyXSpend\x20unified\x20request\x20body:','üìù\x20Logging\x20unified\x20payment\x20creation\x20event...','356628grYikV','MyXSpend\x20payment\x20creation\x20failed:\x20','healthCheck','‚ùå\x20MyXSpend\x20unified\x20payment\x20creation\x20failed:','9989ERUfMz','Invalid\x20JSON\x20response\x20from\x20MyXSpend:\x20','text'];a50_0x1f20=function(){return _0x466d9c;};return a50_0x1f20();}Object[a50_0x56ae9a(0x10a)](exports,a50_0x56ae9a(0x111),{'value':!![]}),exports[a50_0x56ae9a(0xf3)]=exports[a50_0x56ae9a(0x11c)]=void 0x0;class MyXSpendService{constructor(){const _0x1d8935=a50_0x56ae9a;this['authToken']=null,this[_0x1d8935(0x121)]=_0x1d8935(0xf1),this[_0x1d8935(0x125)]=_0x1d8935(0x122),this[_0x1d8935(0x120)]='https://traffer.uk/gateway/myxspend/',console[_0x1d8935(0xfc)](_0x1d8935(0x114));}async['createPaymentLink'](_0xd79431){const _0x332d55=a50_0x56ae9a;try{const {orderId:_0x63b5eb,amount:_0x145f48,currency:_0x34b63a,firstName:_0x25cbc7,lastName:_0x50499e,email:_0x2af924,phone:_0x54b215,successUrl:_0x5a2c8e,failureUrl:_0x66f35}=_0xd79431;console[_0x332d55(0xfc)](_0x332d55(0x112)),console[_0x332d55(0xfc)](_0x332d55(0x126),_0x63b5eb),console[_0x332d55(0xfc)](_0x332d55(0xf5),_0x145f48,_0x34b63a),console[_0x332d55(0xfc)](_0x332d55(0x110),_0x25cbc7+'\x20'+_0x50499e),console['log'](_0x332d55(0xfa),_0x2af924),console['log']('Phone:',_0x54b215||_0x332d55(0x123));const _0x15f17d={'firstName':_0x25cbc7,'lastName':_0x50499e,'customerOrderId':_0x63b5eb,'email':_0x2af924,'phone':_0x54b215||'','amount':_0x145f48,'currency':_0x34b63a[_0x332d55(0xf6)](),'success_url':_0x5a2c8e,'failure_url':_0x66f35};console[_0x332d55(0xfc)](_0x332d55(0xfd),JSON[_0x332d55(0x109)](_0x15f17d,null,0x2));const _0x204c09=await fetch(this['apiUrl']+'myxspend.php',{'method':_0x332d55(0xf4),'headers':{'Content-Type':_0x332d55(0x117),'User-Agent':_0x332d55(0x124)},'body':JSON[_0x332d55(0x109)](_0x15f17d)}),_0x407074=await _0x204c09[_0x332d55(0x105)]();console['log'](_0x332d55(0x10f),_0x407074);if(!_0x204c09['ok'])throw new Error(_0x332d55(0x119)+_0x204c09['status']+'\x20-\x20'+_0x407074);let _0x4f5cda;try{_0x4f5cda=JSON[_0x332d55(0x10b)](_0x407074);}catch(_0x221087){throw new Error(_0x332d55(0x104)+_0x407074);}console['log'](_0x332d55(0xef),JSON[_0x332d55(0x109)](_0x4f5cda,null,0x2));if(!_0x4f5cda[_0x332d55(0x113)]&&!_0x4f5cda['payment_url'])throw new Error(_0x332d55(0x100)+(_0x4f5cda[_0x332d55(0x11b)]||_0x332d55(0x127)));const _0x43a915=_0x4f5cda['PaymentLink']||_0x4f5cda[_0x332d55(0x115)],_0x48b7e3=_0x4f5cda[_0x332d55(0xf8)]||_0x4f5cda[_0x332d55(0xee)];return console[_0x332d55(0xfc)](_0x332d55(0x10c)),console[_0x332d55(0xfc)]('Payment\x20Link:',_0x43a915),console['log'](_0x332d55(0x11f),_0x48b7e3),console[_0x332d55(0xfc)](_0x332d55(0x11a),_0x4f5cda['responseCode']),console[_0x332d55(0xfc)](_0x332d55(0xfe)),{'gateway_payment_id':_0x48b7e3||_0x63b5eb,'payment_url':_0x43a915||'','paymentLinkCode':_0x48b7e3};}catch(_0x5b9a02){console['error'](_0x332d55(0x102),_0x5b9a02),console[_0x332d55(0xfc)](_0x332d55(0xf2));throw _0x5b9a02;}}[a50_0x56ae9a(0x106)](){const _0x4223d9=a50_0x56ae9a;this[_0x4223d9(0x116)]=null,console[_0x4223d9(0xfc)](_0x4223d9(0x10e));}async[a50_0x56ae9a(0x101)](){const _0x27c0f5=a50_0x56ae9a;try{const _0x3ca696=await fetch(this[_0x27c0f5(0x120)]+'health.php',{'method':_0x27c0f5(0xf0),'headers':{'Content-Type':_0x27c0f5(0x117),'User-Agent':'TrapayAPI/1.0'}});return _0x3ca696&&_0x3ca696[_0x27c0f5(0xfb)]===0xc8?!![]:![];}catch(_0x22a59c){return console['error']('‚ùå\x20MyXSpend\x20health\x20check\x20failed:',_0x22a59c),![];}}}function a50_0x5df6(_0x265a3b,_0x1494de){const _0x1f204c=a50_0x1f20();return a50_0x5df6=function(_0x5df63c,_0x22695c){_0x5df63c=_0x5df63c-0xee;let _0x1a9998=_0x1f204c[_0x5df63c];return _0x1a9998;},a50_0x5df6(_0x265a3b,_0x1494de);}exports['MyXSpendService']=MyXSpendService,exports['myxspendService']=new MyXSpendService();