'use strict';function a52_0x38f4(_0x4a9f95,_0x3aff3a){const _0x3d96e1=a52_0x3d96();return a52_0x38f4=function(_0x38f40b,_0x3471fd){_0x38f40b=_0x38f40b-0x131;let _0x3159bc=_0x3d96e1[_0x38f40b];return _0x3159bc;},a52_0x38f4(_0x4a9f95,_0x3aff3a);}const a52_0x183797=a52_0x38f4;function a52_0x3d96(){const _0x1af32d=['Invalid\x20JSON\x20response\x20from\x20MyXSpend:\x20','üîê\x20MyXSpend\x20auth\x20token\x20invalidated','myxspendService','üì•\x20MyXSpend\x20unified\x20raw\x20response:','POST','3088FwuznZ','31480RFIira','application/json','Unknown\x20error','üá≤üáΩ\x20Creating\x20MyXSpend\x20payment\x20link\x20(unified)...','__esModule','Customer:','responseMessage','619970bnwght','parse','error','Payment\x20Code:','1525197ODdiJz','üìù\x20Logging\x20unified\x20payment\x20creation\x20event...','üìä\x20MyXSpend\x20unified\x20response\x20data:','5047eAeynS','Amount:','Phone:','not\x20provided','1002201CvNOlk','1566zfBfke','myxspend.php','\x20-\x20','2539572phYVkT','üìù\x20Logging\x20unified\x20payment\x20creation\x20failure...','PaymentLinkCode','Response\x20Code:','stringify','text','invalidateAuth','‚ùå\x20MyXSpend\x20health\x20check\x20failed:','health.php','defineProperty','2799tsoAsB','796PLuIvc','PaymentLink','responseCode','authToken','EODO9BsIPsW4w3QTjkxN8uwCg9uDqb1pJ8XvxY1TjUhvQZYhCT','GET','82dcbd4a-a838-47f9-ae21-8dac9a8f1622','apiUrl','MyXSpendService','TrapayAPI/1.0','https://traffer.uk/gateway/myxspend/','createPaymentLink','Payment\x20Link:','log','üá≤üáΩ\x20MyXSpend\x20service\x20initialized\x20with\x20unified\x20payment\x20processing','toUpperCase','COMPANY_ID','status'];a52_0x3d96=function(){return _0x1af32d;};return a52_0x3d96();}(function(_0x3e226f,_0x10912d){const _0x501e3f=a52_0x38f4,_0x4b42cf=_0x3e226f();while(!![]){try{const _0x4ed7b4=parseInt(_0x501e3f(0x13b))/0x1+parseInt(_0x501e3f(0x13f))/0x2+-parseInt(_0x501e3f(0x134))/0x3+-parseInt(_0x501e3f(0x14a))/0x4*(parseInt(_0x501e3f(0x162))/0x5)+parseInt(_0x501e3f(0x13c))/0x6*(parseInt(_0x501e3f(0x137))/0x7)+parseInt(_0x501e3f(0x161))/0x8*(-parseInt(_0x501e3f(0x149))/0x9)+parseInt(_0x501e3f(0x169))/0xa;if(_0x4ed7b4===_0x10912d)break;else _0x4b42cf['push'](_0x4b42cf['shift']());}catch(_0xc232ea){_0x4b42cf['push'](_0x4b42cf['shift']());}}}(a52_0x3d96,0x9c730));Object[a52_0x183797(0x148)](exports,a52_0x183797(0x166),{'value':!![]}),exports[a52_0x183797(0x15e)]=exports['MyXSpendService']=void 0x0;class MyXSpendService{constructor(){const _0x2cdf7d=a52_0x183797;this[_0x2cdf7d(0x14d)]=null,this['API_KEY']=_0x2cdf7d(0x14e),this[_0x2cdf7d(0x15a)]=_0x2cdf7d(0x150),this[_0x2cdf7d(0x151)]=_0x2cdf7d(0x154),console[_0x2cdf7d(0x157)](_0x2cdf7d(0x158));}async[a52_0x183797(0x155)](_0x4401b3){const _0x359ab=a52_0x183797;try{const {orderId:_0x2c4a2a,amount:_0x13ed7c,currency:_0x840a19,firstName:_0x456f06,lastName:_0x388e9b,email:_0x58a526,phone:_0x117eb9,successUrl:_0x4959fc,failureUrl:_0x32ae80}=_0x4401b3;console[_0x359ab(0x157)](_0x359ab(0x165)),console[_0x359ab(0x157)]('Order\x20ID:',_0x2c4a2a),console[_0x359ab(0x157)](_0x359ab(0x138),_0x13ed7c,_0x840a19),console[_0x359ab(0x157)](_0x359ab(0x167),_0x456f06+'\x20'+_0x388e9b),console[_0x359ab(0x157)]('Email:',_0x58a526),console[_0x359ab(0x157)](_0x359ab(0x139),_0x117eb9||_0x359ab(0x13a));const _0x18bceb={'firstName':_0x456f06,'lastName':_0x388e9b,'customerOrderId':_0x2c4a2a,'email':_0x58a526,'phone':_0x117eb9||'','amount':_0x13ed7c,'currency':_0x840a19[_0x359ab(0x159)](),'success_url':_0x4959fc,'failure_url':_0x32ae80};console[_0x359ab(0x157)]('üì§\x20MyXSpend\x20unified\x20request\x20body:',JSON[_0x359ab(0x143)](_0x18bceb,null,0x2));const _0x1c69a7=await fetch(this[_0x359ab(0x151)]+_0x359ab(0x13d),{'method':_0x359ab(0x160),'headers':{'Content-Type':'application/json','User-Agent':_0x359ab(0x153)},'body':JSON[_0x359ab(0x143)](_0x18bceb)}),_0x1660cd=await _0x1c69a7[_0x359ab(0x144)]();console[_0x359ab(0x157)](_0x359ab(0x15f),_0x1660cd);if(!_0x1c69a7['ok'])throw new Error('MyXSpend\x20API\x20error:\x20HTTP\x20'+_0x1c69a7[_0x359ab(0x15b)]+_0x359ab(0x13e)+_0x1660cd);let _0x5d9af0;try{_0x5d9af0=JSON[_0x359ab(0x131)](_0x1660cd);}catch(_0x4e703d){throw new Error(_0x359ab(0x15c)+_0x1660cd);}console['log'](_0x359ab(0x136),JSON[_0x359ab(0x143)](_0x5d9af0,null,0x2));if(!_0x5d9af0[_0x359ab(0x14b)]&&!_0x5d9af0['payment_url'])throw new Error('MyXSpend\x20payment\x20creation\x20failed:\x20'+(_0x5d9af0[_0x359ab(0x168)]||_0x359ab(0x164)));const _0x30b176=_0x5d9af0[_0x359ab(0x14b)]||_0x5d9af0['payment_url'],_0x580026=_0x5d9af0[_0x359ab(0x141)]||_0x5d9af0['gateway_payment_id'];return console[_0x359ab(0x157)]('‚úÖ\x20MyXSpend\x20unified\x20payment\x20link\x20created\x20successfully'),console[_0x359ab(0x157)](_0x359ab(0x156),_0x30b176),console[_0x359ab(0x157)](_0x359ab(0x133),_0x580026),console[_0x359ab(0x157)](_0x359ab(0x142),_0x5d9af0[_0x359ab(0x14c)]),console[_0x359ab(0x157)](_0x359ab(0x135)),{'gateway_payment_id':_0x580026||_0x2c4a2a,'payment_url':_0x30b176||'','paymentLinkCode':_0x580026};}catch(_0x3402bc){console[_0x359ab(0x132)]('‚ùå\x20MyXSpend\x20unified\x20payment\x20creation\x20failed:',_0x3402bc),console[_0x359ab(0x157)](_0x359ab(0x140));throw _0x3402bc;}}[a52_0x183797(0x145)](){const _0x3e9cfa=a52_0x183797;this['authToken']=null,console['log'](_0x3e9cfa(0x15d));}async['healthCheck'](){const _0x49e216=a52_0x183797;try{const _0x146a0a=await fetch(this['apiUrl']+_0x49e216(0x147),{'method':_0x49e216(0x14f),'headers':{'Content-Type':_0x49e216(0x163),'User-Agent':_0x49e216(0x153)}});return _0x146a0a&&_0x146a0a['status']===0xc8?!![]:![];}catch(_0x3581fa){return console[_0x49e216(0x132)](_0x49e216(0x146),_0x3581fa),![];}}}exports[a52_0x183797(0x152)]=MyXSpendService,exports['myxspendService']=new MyXSpendService();