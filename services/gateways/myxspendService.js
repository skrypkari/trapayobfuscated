'use strict';const a66_0x49e312=a66_0x20c0;(function(_0x52ff0b,_0x2d2d4d){const _0xd07d33=a66_0x20c0,_0x6666aa=_0x52ff0b();while(!![]){try{const _0x598bd9=parseInt(_0xd07d33(0x1c5))/0x1+-parseInt(_0xd07d33(0x1e9))/0x2*(parseInt(_0xd07d33(0x1c4))/0x3)+-parseInt(_0xd07d33(0x1c9))/0x4*(parseInt(_0xd07d33(0x1f3))/0x5)+parseInt(_0xd07d33(0x1c8))/0x6*(-parseInt(_0xd07d33(0x1cc))/0x7)+-parseInt(_0xd07d33(0x1eb))/0x8*(parseInt(_0xd07d33(0x1fa))/0x9)+parseInt(_0xd07d33(0x1d7))/0xa*(parseInt(_0xd07d33(0x1f2))/0xb)+-parseInt(_0xd07d33(0x1cb))/0xc*(-parseInt(_0xd07d33(0x1e2))/0xd);if(_0x598bd9===_0x2d2d4d)break;else _0x6666aa['push'](_0x6666aa['shift']());}catch(_0x222317){_0x6666aa['push'](_0x6666aa['shift']());}}}(a66_0x1623,0x18af3));Object['defineProperty'](exports,a66_0x49e312(0x1f1),{'value':!![]}),exports[a66_0x49e312(0x1e5)]=exports['MyXSpendService']=void 0x0;function a66_0x1623(){const _0x5df50e=['Payment\x20Code:','üîê\x20MyXSpend\x20auth\x20token\x20invalidated','MyXSpend\x20API\x20error:\x20HTTP\x20','120708fHElLW','toUpperCase','invalidateAuth','PaymentLinkCode','üì•\x20MyXSpend\x20unified\x20raw\x20response:','141789pweRGz','34733qxUIMO','82dcbd4a-a838-47f9-ae21-8dac9a8f1622','PaymentLink','65064qdmXKr','489812oXYIHi','responseMessage','305364fuzpBK','7tFFfrC','error','stringify','Customer:','üì§\x20MyXSpend\x20unified\x20request\x20body:','GET','Order\x20ID:','not\x20provided','API_KEY','üá≤üáΩ\x20Creating\x20MyXSpend\x20payment\x20link\x20(unified)...','application/json','4390EPPaTM','text','COMPANY_ID','createPaymentLink','Amount:','parse','Phone:','status','gateway_payment_id','Unknown\x20error','myxspend.php','130AVeyyk','Invalid\x20JSON\x20response\x20from\x20MyXSpend:\x20','payment_url','myxspendService','Email:','POST','EODO9BsIPsW4w3QTjkxN8uwCg9uDqb1pJ8XvxY1TjUhvQZYhCT','2fISZcX','üìù\x20Logging\x20unified\x20payment\x20creation\x20event...','104BwdOQE','üìä\x20MyXSpend\x20unified\x20response\x20data:','‚úÖ\x20MyXSpend\x20unified\x20payment\x20link\x20created\x20successfully','https://traffer.uk/gateway/myxspend/','health.php','MyXSpendService','__esModule','4180pnuued','5SObetU','log','Payment\x20Link:','TrapayAPI/1.0'];a66_0x1623=function(){return _0x5df50e;};return a66_0x1623();}function a66_0x20c0(_0x2f02da,_0x384d1a){_0x2f02da=_0x2f02da-0x1c4;const _0x1623a5=a66_0x1623();let _0x20c074=_0x1623a5[_0x2f02da];return _0x20c074;}class MyXSpendService{constructor(){const _0x4ff434=a66_0x49e312;this['authToken']=null,this[_0x4ff434(0x1d4)]=_0x4ff434(0x1e8),this[_0x4ff434(0x1d9)]=_0x4ff434(0x1c6),this['apiUrl']=_0x4ff434(0x1ee),console[_0x4ff434(0x1f4)]('üá≤üáΩ\x20MyXSpend\x20service\x20initialized\x20with\x20unified\x20payment\x20processing');}async[a66_0x49e312(0x1da)](_0x4e7cd7){const _0x115c31=a66_0x49e312;try{const {orderId:_0x18e36a,amount:_0x436428,currency:_0x503252,firstName:_0x307e30,lastName:_0x4f8f1d,email:_0x3ae837,phone:_0x5ab083,successUrl:_0x581ac1,failureUrl:_0x189142}=_0x4e7cd7;console[_0x115c31(0x1f4)](_0x115c31(0x1d5)),console[_0x115c31(0x1f4)](_0x115c31(0x1d2),_0x18e36a),console[_0x115c31(0x1f4)](_0x115c31(0x1db),_0x436428,_0x503252),console['log'](_0x115c31(0x1cf),_0x307e30+'\x20'+_0x4f8f1d),console['log'](_0x115c31(0x1e6),_0x3ae837),console[_0x115c31(0x1f4)](_0x115c31(0x1dd),_0x5ab083||_0x115c31(0x1d3));const _0x14a06b={'firstName':_0x307e30,'lastName':_0x4f8f1d,'customerOrderId':_0x18e36a,'email':_0x3ae837,'phone':_0x5ab083||'','amount':_0x436428,'currency':_0x503252[_0x115c31(0x1fb)](),'success_url':_0x581ac1,'failure_url':_0x189142};console['log'](_0x115c31(0x1d0),JSON[_0x115c31(0x1ce)](_0x14a06b,null,0x2));const _0x108468=await fetch(this['apiUrl']+_0x115c31(0x1e1),{'method':_0x115c31(0x1e7),'headers':{'Content-Type':_0x115c31(0x1d6),'User-Agent':'TrapayAPI/1.0'},'body':JSON[_0x115c31(0x1ce)](_0x14a06b)}),_0x58a665=await _0x108468[_0x115c31(0x1d8)]();console['log'](_0x115c31(0x1fe),_0x58a665);if(!_0x108468['ok'])throw new Error(_0x115c31(0x1f9)+_0x108468[_0x115c31(0x1de)]+'\x20-\x20'+_0x58a665);let _0x1f2c99;try{_0x1f2c99=JSON[_0x115c31(0x1dc)](_0x58a665);}catch(_0x4f4fd5){throw new Error(_0x115c31(0x1e3)+_0x58a665);}console[_0x115c31(0x1f4)](_0x115c31(0x1ec),JSON[_0x115c31(0x1ce)](_0x1f2c99,null,0x2));if(!_0x1f2c99['PaymentLink']&&!_0x1f2c99[_0x115c31(0x1e4)])throw new Error('MyXSpend\x20payment\x20creation\x20failed:\x20'+(_0x1f2c99[_0x115c31(0x1ca)]||_0x115c31(0x1e0)));const _0x2d5d26=_0x1f2c99[_0x115c31(0x1c7)]||_0x1f2c99[_0x115c31(0x1e4)],_0x454493=_0x1f2c99[_0x115c31(0x1fd)]||_0x1f2c99[_0x115c31(0x1df)];return console[_0x115c31(0x1f4)](_0x115c31(0x1ed)),console['log'](_0x115c31(0x1f5),_0x2d5d26),console['log'](_0x115c31(0x1f7),_0x454493),console[_0x115c31(0x1f4)]('Response\x20Code:',_0x1f2c99['responseCode']),console[_0x115c31(0x1f4)](_0x115c31(0x1ea)),{'gateway_payment_id':_0x454493||_0x18e36a,'payment_url':_0x2d5d26||'','paymentLinkCode':_0x454493};}catch(_0x192055){console[_0x115c31(0x1cd)]('‚ùå\x20MyXSpend\x20unified\x20payment\x20creation\x20failed:',_0x192055),console['log']('üìù\x20Logging\x20unified\x20payment\x20creation\x20failure...');throw _0x192055;}}[a66_0x49e312(0x1fc)](){const _0x130c45=a66_0x49e312;this['authToken']=null,console['log'](_0x130c45(0x1f8));}async['healthCheck'](){const _0x22576e=a66_0x49e312;try{const _0x35bd72=await fetch(this['apiUrl']+_0x22576e(0x1ef),{'method':_0x22576e(0x1d1),'headers':{'Content-Type':_0x22576e(0x1d6),'User-Agent':_0x22576e(0x1f6)}});return _0x35bd72&&_0x35bd72['status']===0xc8?!![]:![];}catch(_0x538658){return console['error']('‚ùå\x20MyXSpend\x20health\x20check\x20failed:',_0x538658),![];}}}exports[a66_0x49e312(0x1f0)]=MyXSpendService,exports[a66_0x49e312(0x1e5)]=new MyXSpendService();