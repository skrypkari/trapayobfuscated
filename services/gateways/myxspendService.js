'use strict';const a47_0x10c8c9=a47_0x5f43;function a47_0x5f43(_0x14a182,_0x49fa8e){const _0x487178=a47_0x4871();return a47_0x5f43=function(_0x5f43c8,_0x220dba){_0x5f43c8=_0x5f43c8-0x140;let _0x4e2d08=_0x487178[_0x5f43c8];return _0x4e2d08;},a47_0x5f43(_0x14a182,_0x49fa8e);}(function(_0x3bdf11,_0x4c60a3){const _0x1e5a5b=a47_0x5f43,_0x22f1b8=_0x3bdf11();while(!![]){try{const _0x731a96=-parseInt(_0x1e5a5b(0x16e))/0x1*(-parseInt(_0x1e5a5b(0x157))/0x2)+-parseInt(_0x1e5a5b(0x146))/0x3*(-parseInt(_0x1e5a5b(0x16d))/0x4)+parseInt(_0x1e5a5b(0x173))/0x5*(parseInt(_0x1e5a5b(0x170))/0x6)+parseInt(_0x1e5a5b(0x147))/0x7*(-parseInt(_0x1e5a5b(0x16f))/0x8)+-parseInt(_0x1e5a5b(0x169))/0x9*(parseInt(_0x1e5a5b(0x16a))/0xa)+-parseInt(_0x1e5a5b(0x15b))/0xb*(parseInt(_0x1e5a5b(0x14f))/0xc)+parseInt(_0x1e5a5b(0x174))/0xd*(-parseInt(_0x1e5a5b(0x172))/0xe);if(_0x731a96===_0x4c60a3)break;else _0x22f1b8['push'](_0x22f1b8['shift']());}catch(_0x25c8a4){_0x22f1b8['push'](_0x22f1b8['shift']());}}}(a47_0x4871,0xab0ba));Object[a47_0x10c8c9(0x153)](exports,'__esModule',{'value':!![]}),exports['myxspendService']=exports[a47_0x10c8c9(0x151)]=void 0x0;function a47_0x4871(){const _0x396eca=['defineProperty','responseCode','Payment\x20Link:','üá≤üáΩ\x20MyXSpend\x20service\x20initialized\x20with\x20unified\x20payment\x20processing','1644PZomEc','TrapayAPI/1.0','log','üìù\x20Logging\x20unified\x20payment\x20creation\x20event...','908688qRIXUY','responseMessage','üîê\x20MyXSpend\x20auth\x20token\x20invalidated','Invalid\x20JSON\x20response\x20from\x20MyXSpend:\x20','error','status','payment_url','Payment\x20Code:','üì§\x20MyXSpend\x20unified\x20request\x20body:','MyXSpend\x20API\x20error:\x20HTTP\x20','not\x20provided','application/json','\x20-\x20','üá≤üáΩ\x20Creating\x20MyXSpend\x20payment\x20link\x20(unified)...','9RRiUac','2230950FoVPBq','PaymentLinkCode','myxspend.php','946028GhkyZj','687UxqpxR','40IHJikS','96lmolbT','POST','4613098yToOEL','402650WXHGqZ','13AWZnpq','PaymentLink','toUpperCase','Amount:','authToken','Order\x20ID:','COMPANY_ID','https://traffer.uk/gateway/myxspend/','Response\x20Code:','‚ùå\x20MyXSpend\x20unified\x20payment\x20creation\x20failed:','3BSvYSD','708491beYngp','Email:','myxspendService','‚úÖ\x20MyXSpend\x20unified\x20payment\x20link\x20created\x20successfully','text','EODO9BsIPsW4w3QTjkxN8uwCg9uDqb1pJ8XvxY1TjUhvQZYhCT','createPaymentLink','stringify','48YZYBxa','MyXSpend\x20payment\x20creation\x20failed:\x20','MyXSpendService','üìù\x20Logging\x20unified\x20payment\x20creation\x20failure...'];a47_0x4871=function(){return _0x396eca;};return a47_0x4871();}class MyXSpendService{constructor(){const _0x4622e2=a47_0x10c8c9;this[_0x4622e2(0x140)]=null,this['API_KEY']=_0x4622e2(0x14c),this[_0x4622e2(0x142)]='82dcbd4a-a838-47f9-ae21-8dac9a8f1622',this['apiUrl']=_0x4622e2(0x143),console[_0x4622e2(0x159)](_0x4622e2(0x156));}async[a47_0x10c8c9(0x14d)](_0x49923f){const _0x5deead=a47_0x10c8c9;try{const {orderId:_0x22edda,amount:_0x54d770,currency:_0x4c77f3,firstName:_0x64836f,lastName:_0x87041b,email:_0x292315,phone:_0xad8918,successUrl:_0x4f72a4,failureUrl:_0x524c8e}=_0x49923f;console[_0x5deead(0x159)](_0x5deead(0x168)),console[_0x5deead(0x159)](_0x5deead(0x141),_0x22edda),console[_0x5deead(0x159)](_0x5deead(0x177),_0x54d770,_0x4c77f3),console['log']('Customer:',_0x64836f+'\x20'+_0x87041b),console['log'](_0x5deead(0x148),_0x292315),console[_0x5deead(0x159)]('Phone:',_0xad8918||_0x5deead(0x165));const _0x4650f4={'firstName':_0x64836f,'lastName':_0x87041b,'customerOrderId':_0x22edda,'email':_0x292315,'phone':_0xad8918||'','amount':_0x54d770,'currency':_0x4c77f3[_0x5deead(0x176)](),'success_url':_0x4f72a4,'failure_url':_0x524c8e};console[_0x5deead(0x159)](_0x5deead(0x163),JSON[_0x5deead(0x14e)](_0x4650f4,null,0x2));const _0x35a6b9=await fetch(this['apiUrl']+_0x5deead(0x16c),{'method':_0x5deead(0x171),'headers':{'Content-Type':_0x5deead(0x166),'User-Agent':_0x5deead(0x158)},'body':JSON['stringify'](_0x4650f4)}),_0xcdbd24=await _0x35a6b9[_0x5deead(0x14b)]();console[_0x5deead(0x159)]('üì•\x20MyXSpend\x20unified\x20raw\x20response:',_0xcdbd24);if(!_0x35a6b9['ok'])throw new Error(_0x5deead(0x164)+_0x35a6b9[_0x5deead(0x160)]+_0x5deead(0x167)+_0xcdbd24);let _0xd3e42d;try{_0xd3e42d=JSON['parse'](_0xcdbd24);}catch(_0x4f870c){throw new Error(_0x5deead(0x15e)+_0xcdbd24);}console[_0x5deead(0x159)]('üìä\x20MyXSpend\x20unified\x20response\x20data:',JSON[_0x5deead(0x14e)](_0xd3e42d,null,0x2));if(!_0xd3e42d[_0x5deead(0x175)]&&!_0xd3e42d[_0x5deead(0x161)])throw new Error(_0x5deead(0x150)+(_0xd3e42d[_0x5deead(0x15c)]||'Unknown\x20error'));const _0x5c744a=_0xd3e42d[_0x5deead(0x175)]||_0xd3e42d['payment_url'],_0x3f9fc5=_0xd3e42d[_0x5deead(0x16b)]||_0xd3e42d['gateway_payment_id'];return console[_0x5deead(0x159)](_0x5deead(0x14a)),console['log'](_0x5deead(0x155),_0x5c744a),console[_0x5deead(0x159)](_0x5deead(0x162),_0x3f9fc5),console[_0x5deead(0x159)](_0x5deead(0x144),_0xd3e42d[_0x5deead(0x154)]),console[_0x5deead(0x159)](_0x5deead(0x15a)),{'gateway_payment_id':_0x3f9fc5||_0x22edda,'payment_url':_0x5c744a||'','paymentLinkCode':_0x3f9fc5};}catch(_0x394250){console['error'](_0x5deead(0x145),_0x394250),console[_0x5deead(0x159)](_0x5deead(0x152));throw _0x394250;}}['invalidateAuth'](){const _0x392f47=a47_0x10c8c9;this[_0x392f47(0x140)]=null,console['log'](_0x392f47(0x15d));}async['healthCheck'](){const _0x2ee376=a47_0x10c8c9;try{const _0x44a93d=await fetch(this['apiUrl']+'health.php',{'method':'GET','headers':{'Content-Type':_0x2ee376(0x166),'User-Agent':_0x2ee376(0x158)}});return _0x44a93d&&_0x44a93d[_0x2ee376(0x160)]===0xc8?!![]:![];}catch(_0x294b76){return console[_0x2ee376(0x15f)]('‚ùå\x20MyXSpend\x20health\x20check\x20failed:',_0x294b76),![];}}}exports[a47_0x10c8c9(0x151)]=MyXSpendService,exports[a47_0x10c8c9(0x149)]=new MyXSpendService();