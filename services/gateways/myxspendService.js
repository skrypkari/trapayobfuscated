'use strict';const a49_0x3ceb54=a49_0x444a;function a49_0x4879(){const _0x417864=['log','Response\x20Code:','5VPoRYk','80KzAOZj','\x20-\x20','__esModule','üîê\x20MyXSpend\x20auth\x20token\x20invalidated','not\x20provided','error','payment_url','EODO9BsIPsW4w3QTjkxN8uwCg9uDqb1pJ8XvxY1TjUhvQZYhCT','Customer:','MyXSpend\x20API\x20error:\x20HTTP\x20','‚ùå\x20MyXSpend\x20health\x20check\x20failed:','4757115ocOjbh','PaymentLinkCode','‚úÖ\x20MyXSpend\x20unified\x20payment\x20link\x20created\x20successfully','apiUrl','11833836ADeebZ','authToken','responseMessage','myxspendService','PaymentLink','üì§\x20MyXSpend\x20unified\x20request\x20body:','Payment\x20Link:','defineProperty','707203GJBbwT','5100882moLKrd','toUpperCase','82dcbd4a-a838-47f9-ae21-8dac9a8f1622','text','905616CSpkBu','4dGYhXK','parse','784149LAABdp','Order\x20ID:','27680wKEiNa','48YvAeKJ','Email:','myxspend.php','status','Invalid\x20JSON\x20response\x20from\x20MyXSpend:\x20','Phone:','55OqdLPl','MyXSpend\x20payment\x20creation\x20failed:\x20','COMPANY_ID','invalidateAuth','üìù\x20Logging\x20unified\x20payment\x20creation\x20event...','application/json','üá≤üáΩ\x20MyXSpend\x20service\x20initialized\x20with\x20unified\x20payment\x20processing','MyXSpendService','responseCode','healthCheck','gateway_payment_id','üìä\x20MyXSpend\x20unified\x20response\x20data:','health.php','https://traffer.uk/gateway/myxspend/','Amount:','stringify','POST'];a49_0x4879=function(){return _0x417864;};return a49_0x4879();}(function(_0x2fd14a,_0x348d7f){const _0x59730e=a49_0x444a,_0x251cd8=_0x2fd14a();while(!![]){try{const _0x4c8e6b=parseInt(_0x59730e(0x180))/0x1*(parseInt(_0x59730e(0x179))/0x2)+parseInt(_0x59730e(0x177))/0x3*(-parseInt(_0x59730e(0x175))/0x4)+-parseInt(_0x59730e(0x157))/0x5*(parseInt(_0x59730e(0x170))/0x6)+-parseInt(_0x59730e(0x16f))/0x7*(-parseInt(_0x59730e(0x17a))/0x8)+parseInt(_0x59730e(0x174))/0x9*(parseInt(_0x59730e(0x158))/0xa)+parseInt(_0x59730e(0x163))/0xb+-parseInt(_0x59730e(0x167))/0xc;if(_0x4c8e6b===_0x348d7f)break;else _0x251cd8['push'](_0x251cd8['shift']());}catch(_0x59c495){_0x251cd8['push'](_0x251cd8['shift']());}}}(a49_0x4879,0x7bd0c));Object[a49_0x3ceb54(0x16e)](exports,a49_0x3ceb54(0x15a),{'value':!![]}),exports[a49_0x3ceb54(0x16a)]=exports[a49_0x3ceb54(0x187)]=void 0x0;class MyXSpendService{constructor(){const _0x303a92=a49_0x3ceb54;this[_0x303a92(0x168)]=null,this['API_KEY']=_0x303a92(0x15f),this[_0x303a92(0x182)]=_0x303a92(0x172),this['apiUrl']=_0x303a92(0x151),console[_0x303a92(0x155)](_0x303a92(0x186));}async['createPaymentLink'](_0xd97d27){const _0x4b13e1=a49_0x3ceb54;try{const {orderId:_0xd1ddbb,amount:_0x3379d2,currency:_0x250570,firstName:_0x1a74d5,lastName:_0x207f67,email:_0x2efb8a,phone:_0x4e7fb0,successUrl:_0x5ec50e,failureUrl:_0x19cc45}=_0xd97d27;console['log']('üá≤üáΩ\x20Creating\x20MyXSpend\x20payment\x20link\x20(unified)...'),console[_0x4b13e1(0x155)](_0x4b13e1(0x178),_0xd1ddbb),console[_0x4b13e1(0x155)](_0x4b13e1(0x152),_0x3379d2,_0x250570),console[_0x4b13e1(0x155)](_0x4b13e1(0x160),_0x1a74d5+'\x20'+_0x207f67),console[_0x4b13e1(0x155)](_0x4b13e1(0x17b),_0x2efb8a),console['log'](_0x4b13e1(0x17f),_0x4e7fb0||_0x4b13e1(0x15c));const _0x3fa6b9={'firstName':_0x1a74d5,'lastName':_0x207f67,'customerOrderId':_0xd1ddbb,'email':_0x2efb8a,'phone':_0x4e7fb0||'','amount':_0x3379d2,'currency':_0x250570[_0x4b13e1(0x171)](),'success_url':_0x5ec50e,'failure_url':_0x19cc45};console[_0x4b13e1(0x155)](_0x4b13e1(0x16c),JSON[_0x4b13e1(0x153)](_0x3fa6b9,null,0x2));const _0x4b9bd0=await fetch(this[_0x4b13e1(0x166)]+_0x4b13e1(0x17c),{'method':_0x4b13e1(0x154),'headers':{'Content-Type':_0x4b13e1(0x185),'User-Agent':'TrapayAPI/1.0'},'body':JSON[_0x4b13e1(0x153)](_0x3fa6b9)}),_0x3b6618=await _0x4b9bd0[_0x4b13e1(0x173)]();console['log']('üì•\x20MyXSpend\x20unified\x20raw\x20response:',_0x3b6618);if(!_0x4b9bd0['ok'])throw new Error(_0x4b13e1(0x161)+_0x4b9bd0[_0x4b13e1(0x17d)]+_0x4b13e1(0x159)+_0x3b6618);let _0xe402fe;try{_0xe402fe=JSON[_0x4b13e1(0x176)](_0x3b6618);}catch(_0x2946da){throw new Error(_0x4b13e1(0x17e)+_0x3b6618);}console[_0x4b13e1(0x155)](_0x4b13e1(0x18b),JSON[_0x4b13e1(0x153)](_0xe402fe,null,0x2));if(!_0xe402fe[_0x4b13e1(0x16b)]&&!_0xe402fe['payment_url'])throw new Error(_0x4b13e1(0x181)+(_0xe402fe[_0x4b13e1(0x169)]||'Unknown\x20error'));const _0x5927c8=_0xe402fe[_0x4b13e1(0x16b)]||_0xe402fe[_0x4b13e1(0x15e)],_0x1fc8c2=_0xe402fe[_0x4b13e1(0x164)]||_0xe402fe[_0x4b13e1(0x18a)];return console['log'](_0x4b13e1(0x165)),console[_0x4b13e1(0x155)](_0x4b13e1(0x16d),_0x5927c8),console[_0x4b13e1(0x155)]('Payment\x20Code:',_0x1fc8c2),console[_0x4b13e1(0x155)](_0x4b13e1(0x156),_0xe402fe[_0x4b13e1(0x188)]),console[_0x4b13e1(0x155)](_0x4b13e1(0x184)),{'gateway_payment_id':_0x1fc8c2||_0xd1ddbb,'payment_url':_0x5927c8||'','paymentLinkCode':_0x1fc8c2};}catch(_0x281bce){console['error']('‚ùå\x20MyXSpend\x20unified\x20payment\x20creation\x20failed:',_0x281bce),console[_0x4b13e1(0x155)]('üìù\x20Logging\x20unified\x20payment\x20creation\x20failure...');throw _0x281bce;}}[a49_0x3ceb54(0x183)](){const _0x2726b7=a49_0x3ceb54;this[_0x2726b7(0x168)]=null,console['log'](_0x2726b7(0x15b));}async[a49_0x3ceb54(0x189)](){const _0x147f16=a49_0x3ceb54;try{const _0x1df398=await fetch(this[_0x147f16(0x166)]+_0x147f16(0x150),{'method':'GET','headers':{'Content-Type':_0x147f16(0x185),'User-Agent':'TrapayAPI/1.0'}});return _0x1df398&&_0x1df398[_0x147f16(0x17d)]===0xc8?!![]:![];}catch(_0xae91a0){return console[_0x147f16(0x15d)](_0x147f16(0x162),_0xae91a0),![];}}}function a49_0x444a(_0x58d941,_0x1bb78b){const _0x4879bc=a49_0x4879();return a49_0x444a=function(_0x444a97,_0x876ae5){_0x444a97=_0x444a97-0x150;let _0x31c764=_0x4879bc[_0x444a97];return _0x31c764;},a49_0x444a(_0x58d941,_0x1bb78b);}exports[a49_0x3ceb54(0x187)]=MyXSpendService,exports[a49_0x3ceb54(0x16a)]=new MyXSpendService();