'use strict';const a47_0x41e437=a47_0x3432;(function(_0x167b53,_0x44b935){const _0x197d0d=a47_0x3432,_0x928e64=_0x167b53();while(!![]){try{const _0x5c493c=-parseInt(_0x197d0d(0x1a1))/0x1+parseInt(_0x197d0d(0x1a2))/0x2+parseInt(_0x197d0d(0x1ae))/0x3*(-parseInt(_0x197d0d(0x1a0))/0x4)+parseInt(_0x197d0d(0x1bf))/0x5*(-parseInt(_0x197d0d(0x1b2))/0x6)+parseInt(_0x197d0d(0x1ac))/0x7*(-parseInt(_0x197d0d(0x1b4))/0x8)+parseInt(_0x197d0d(0x1aa))/0x9+parseInt(_0x197d0d(0x1ab))/0xa;if(_0x5c493c===_0x44b935)break;else _0x928e64['push'](_0x928e64['shift']());}catch(_0x233654){_0x928e64['push'](_0x928e64['shift']());}}}(a47_0x208b,0x8372f));function a47_0x208b(){const _0xb6d03f=['‚ùå\x20MyXSpend\x20unified\x20payment\x20creation\x20failed:','3IQPVus','COMPANY_ID','TrapayAPI/1.0','API_KEY','21510VOQfxg','myxspendService','3667832TCgLMX','POST','log','responseMessage','toUpperCase','__esModule','application/json','gateway_payment_id','Customer:','responseCode','PaymentLink','250GEfkde','GET','status','Order\x20ID:','payment_url','Invalid\x20JSON\x20response\x20from\x20MyXSpend:\x20','PaymentLinkCode','error','Phone:','‚úÖ\x20MyXSpend\x20unified\x20payment\x20link\x20created\x20successfully','invalidateAuth','‚ùå\x20MyXSpend\x20health\x20check\x20failed:','stringify','üá≤üáΩ\x20MyXSpend\x20service\x20initialized\x20with\x20unified\x20payment\x20processing','üá≤üáΩ\x20Creating\x20MyXSpend\x20payment\x20link\x20(unified)...','Response\x20Code:','üìù\x20Logging\x20unified\x20payment\x20creation\x20event...','Email:','defineProperty','apiUrl','MyXSpendService','2403364iskNZO','65420DCWofr','2073140zKpiXh','üìä\x20MyXSpend\x20unified\x20response\x20data:','text','MyXSpend\x20API\x20error:\x20HTTP\x20','myxspend.php','üì§\x20MyXSpend\x20unified\x20request\x20body:','üìù\x20Logging\x20unified\x20payment\x20creation\x20failure...','authToken','1882647MSIuEN','10551310mwCuNc','14IPiAmr'];a47_0x208b=function(){return _0xb6d03f;};return a47_0x208b();}Object[a47_0x41e437(0x19d)](exports,a47_0x41e437(0x1b9),{'value':!![]}),exports['myxspendService']=exports['MyXSpendService']=void 0x0;function a47_0x3432(_0x6a2e3f,_0x17cd95){const _0x208bf9=a47_0x208b();return a47_0x3432=function(_0x34324c,_0xfda3a4){_0x34324c=_0x34324c-0x190;let _0x3be7ef=_0x208bf9[_0x34324c];return _0x3be7ef;},a47_0x3432(_0x6a2e3f,_0x17cd95);}class MyXSpendService{constructor(){const _0x4686e1=a47_0x41e437;this['authToken']=null,this[_0x4686e1(0x1b1)]='EODO9BsIPsW4w3QTjkxN8uwCg9uDqb1pJ8XvxY1TjUhvQZYhCT',this[_0x4686e1(0x1af)]='82dcbd4a-a838-47f9-ae21-8dac9a8f1622',this['apiUrl']='https://traffer.uk/gateway/myxspend/',console[_0x4686e1(0x1b6)](_0x4686e1(0x198));}async['createPaymentLink'](_0x16403c){const _0x5ad9a6=a47_0x41e437;try{const {orderId:_0x312ec9,amount:_0x543d71,currency:_0x1fc499,firstName:_0x12f608,lastName:_0x232792,email:_0x306d54,phone:_0xd762be,successUrl:_0x3ac0eb,failureUrl:_0x3202af}=_0x16403c;console[_0x5ad9a6(0x1b6)](_0x5ad9a6(0x199)),console[_0x5ad9a6(0x1b6)](_0x5ad9a6(0x1c2),_0x312ec9),console[_0x5ad9a6(0x1b6)]('Amount:',_0x543d71,_0x1fc499),console[_0x5ad9a6(0x1b6)](_0x5ad9a6(0x1bc),_0x12f608+'\x20'+_0x232792),console['log'](_0x5ad9a6(0x19c),_0x306d54),console['log'](_0x5ad9a6(0x193),_0xd762be||'not\x20provided');const _0x19c153={'firstName':_0x12f608,'lastName':_0x232792,'customerOrderId':_0x312ec9,'email':_0x306d54,'phone':_0xd762be||'','amount':_0x543d71,'currency':_0x1fc499[_0x5ad9a6(0x1b8)](),'success_url':_0x3ac0eb,'failure_url':_0x3202af};console['log'](_0x5ad9a6(0x1a7),JSON[_0x5ad9a6(0x197)](_0x19c153,null,0x2));const _0x4b3fb7=await fetch(this[_0x5ad9a6(0x19e)]+_0x5ad9a6(0x1a6),{'method':_0x5ad9a6(0x1b5),'headers':{'Content-Type':_0x5ad9a6(0x1ba),'User-Agent':_0x5ad9a6(0x1b0)},'body':JSON['stringify'](_0x19c153)}),_0x2b8c91=await _0x4b3fb7[_0x5ad9a6(0x1a4)]();console[_0x5ad9a6(0x1b6)]('üì•\x20MyXSpend\x20unified\x20raw\x20response:',_0x2b8c91);if(!_0x4b3fb7['ok'])throw new Error(_0x5ad9a6(0x1a5)+_0x4b3fb7[_0x5ad9a6(0x1c1)]+'\x20-\x20'+_0x2b8c91);let _0xac65c2;try{_0xac65c2=JSON['parse'](_0x2b8c91);}catch(_0x269a09){throw new Error(_0x5ad9a6(0x190)+_0x2b8c91);}console[_0x5ad9a6(0x1b6)](_0x5ad9a6(0x1a3),JSON[_0x5ad9a6(0x197)](_0xac65c2,null,0x2));if(!_0xac65c2[_0x5ad9a6(0x1be)]&&!_0xac65c2[_0x5ad9a6(0x1c3)])throw new Error('MyXSpend\x20payment\x20creation\x20failed:\x20'+(_0xac65c2[_0x5ad9a6(0x1b7)]||'Unknown\x20error'));const _0x3901d4=_0xac65c2['PaymentLink']||_0xac65c2[_0x5ad9a6(0x1c3)],_0x1b2a35=_0xac65c2[_0x5ad9a6(0x191)]||_0xac65c2[_0x5ad9a6(0x1bb)];return console[_0x5ad9a6(0x1b6)](_0x5ad9a6(0x194)),console[_0x5ad9a6(0x1b6)]('Payment\x20Link:',_0x3901d4),console[_0x5ad9a6(0x1b6)]('Payment\x20Code:',_0x1b2a35),console[_0x5ad9a6(0x1b6)](_0x5ad9a6(0x19a),_0xac65c2[_0x5ad9a6(0x1bd)]),console[_0x5ad9a6(0x1b6)](_0x5ad9a6(0x19b)),{'gateway_payment_id':_0x1b2a35||_0x312ec9,'payment_url':_0x3901d4||'','paymentLinkCode':_0x1b2a35};}catch(_0x56962b){console[_0x5ad9a6(0x192)](_0x5ad9a6(0x1ad),_0x56962b),console[_0x5ad9a6(0x1b6)](_0x5ad9a6(0x1a8));throw _0x56962b;}}[a47_0x41e437(0x195)](){const _0xbb0b9a=a47_0x41e437;this[_0xbb0b9a(0x1a9)]=null,console[_0xbb0b9a(0x1b6)]('üîê\x20MyXSpend\x20auth\x20token\x20invalidated');}async['healthCheck'](){const _0x5f2646=a47_0x41e437;try{const _0x2b37a6=await fetch(this['apiUrl']+'health.php',{'method':_0x5f2646(0x1c0),'headers':{'Content-Type':_0x5f2646(0x1ba),'User-Agent':_0x5f2646(0x1b0)}});return _0x2b37a6&&_0x2b37a6['status']===0xc8?!![]:![];}catch(_0x5a871a){return console['error'](_0x5f2646(0x196),_0x5a871a),![];}}}exports[a47_0x41e437(0x19f)]=MyXSpendService,exports[a47_0x41e437(0x1b3)]=new MyXSpendService();