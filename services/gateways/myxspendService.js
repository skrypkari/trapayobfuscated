'use strict';const a70_0x2eb039=a70_0x950f;(function(_0x29ed58,_0x1c82dd){const _0xacb4e9=a70_0x950f,_0x42ccb8=_0x29ed58();while(!![]){try{const _0x5be903=-parseInt(_0xacb4e9(0x18e))/0x1*(parseInt(_0xacb4e9(0x19f))/0x2)+parseInt(_0xacb4e9(0x1a0))/0x3+parseInt(_0xacb4e9(0x1a3))/0x4*(-parseInt(_0xacb4e9(0x1b3))/0x5)+-parseInt(_0xacb4e9(0x1af))/0x6*(-parseInt(_0xacb4e9(0x1a8))/0x7)+parseInt(_0xacb4e9(0x1a5))/0x8*(parseInt(_0xacb4e9(0x192))/0x9)+-parseInt(_0xacb4e9(0x187))/0xa*(-parseInt(_0xacb4e9(0x1ae))/0xb)+-parseInt(_0xacb4e9(0x194))/0xc;if(_0x5be903===_0x1c82dd)break;else _0x42ccb8['push'](_0x42ccb8['shift']());}catch(_0xc5c78d){_0x42ccb8['push'](_0x42ccb8['shift']());}}}(a70_0x3cfb,0x34818));function a70_0x950f(_0x3fffdc,_0x5d238e){_0x3fffdc=_0x3fffdc-0x187;const _0x3cfbd1=a70_0x3cfb();let _0x950fe8=_0x3cfbd1[_0x3fffdc];return _0x950fe8;}function a70_0x3cfb(){const _0x34c455=['health.php','log','responseCode','defineProperty','257990ifwQQN','Payment\x20Code:','stringify','MyXSpend\x20payment\x20creation\x20failed:\x20','responseMessage','PaymentLinkCode','application/json','11ldjisb','üá≤üáΩ\x20MyXSpend\x20service\x20initialized\x20with\x20unified\x20payment\x20processing','not\x20provided','apiUrl','63GQoQpo','‚ùå\x20MyXSpend\x20unified\x20payment\x20creation\x20failed:','2415468gDPEzy','myxspendService','parse','API_KEY','status','üìù\x20Logging\x20unified\x20payment\x20creation\x20event...','healthCheck','‚úÖ\x20MyXSpend\x20unified\x20payment\x20link\x20created\x20successfully','82dcbd4a-a838-47f9-ae21-8dac9a8f1622','__esModule','payment_url','16092TRvGaz','442719HLGzCa','Customer:','authToken','1045032uTLiFT','EODO9BsIPsW4w3QTjkxN8uwCg9uDqb1pJ8XvxY1TjUhvQZYhCT','265096vFUjzu','createPaymentLink','üîê\x20MyXSpend\x20auth\x20token\x20invalidated','154qiGjig','invalidateAuth','Invalid\x20JSON\x20response\x20from\x20MyXSpend:\x20','Amount:','gateway_payment_id','TrapayAPI/1.0','33TscVNs','84324SsvXGq','GET','MyXSpend\x20API\x20error:\x20HTTP\x20','üá≤üáΩ\x20Creating\x20MyXSpend\x20payment\x20link\x20(unified)...','5EMNpWW','myxspend.php','Response\x20Code:','Email:','MyXSpendService'];a70_0x3cfb=function(){return _0x34c455;};return a70_0x3cfb();}Object[a70_0x2eb039(0x1bb)](exports,a70_0x2eb039(0x19d),{'value':!![]}),exports['myxspendService']=exports[a70_0x2eb039(0x1b7)]=void 0x0;class MyXSpendService{constructor(){const _0x3d893d=a70_0x2eb039;this[_0x3d893d(0x1a2)]=null,this[_0x3d893d(0x197)]=_0x3d893d(0x1a4),this['COMPANY_ID']=_0x3d893d(0x19c),this[_0x3d893d(0x191)]='https://traffer.uk/gateway/myxspend/',console[_0x3d893d(0x1b9)](_0x3d893d(0x18f));}async[a70_0x2eb039(0x1a6)](_0x304686){const _0x290fd1=a70_0x2eb039;try{const {orderId:_0x5144f0,amount:_0x1032e2,currency:_0x1c884a,firstName:_0x49922a,lastName:_0x4b3b3f,email:_0x24444b,phone:_0x362382,successUrl:_0x3ca5cd,failureUrl:_0x294e6d}=_0x304686;console[_0x290fd1(0x1b9)](_0x290fd1(0x1b2)),console[_0x290fd1(0x1b9)]('Order\x20ID:',_0x5144f0),console[_0x290fd1(0x1b9)](_0x290fd1(0x1ab),_0x1032e2,_0x1c884a),console[_0x290fd1(0x1b9)](_0x290fd1(0x1a1),_0x49922a+'\x20'+_0x4b3b3f),console[_0x290fd1(0x1b9)](_0x290fd1(0x1b6),_0x24444b),console['log']('Phone:',_0x362382||_0x290fd1(0x190));const _0x2553a1={'firstName':_0x49922a,'lastName':_0x4b3b3f,'customerOrderId':_0x5144f0,'email':_0x24444b,'phone':_0x362382||'','amount':_0x1032e2,'currency':_0x1c884a['toUpperCase'](),'success_url':_0x3ca5cd,'failure_url':_0x294e6d};console[_0x290fd1(0x1b9)]('üì§\x20MyXSpend\x20unified\x20request\x20body:',JSON[_0x290fd1(0x189)](_0x2553a1,null,0x2));const _0xdb673f=await fetch(this[_0x290fd1(0x191)]+_0x290fd1(0x1b4),{'method':'POST','headers':{'Content-Type':_0x290fd1(0x18d),'User-Agent':_0x290fd1(0x1ad)},'body':JSON['stringify'](_0x2553a1)}),_0x4cf9dc=await _0xdb673f['text']();console[_0x290fd1(0x1b9)]('üì•\x20MyXSpend\x20unified\x20raw\x20response:',_0x4cf9dc);if(!_0xdb673f['ok'])throw new Error(_0x290fd1(0x1b1)+_0xdb673f[_0x290fd1(0x198)]+'\x20-\x20'+_0x4cf9dc);let _0x168e86;try{_0x168e86=JSON[_0x290fd1(0x196)](_0x4cf9dc);}catch(_0x546291){throw new Error(_0x290fd1(0x1aa)+_0x4cf9dc);}console['log']('üìä\x20MyXSpend\x20unified\x20response\x20data:',JSON[_0x290fd1(0x189)](_0x168e86,null,0x2));if(!_0x168e86['PaymentLink']&&!_0x168e86[_0x290fd1(0x19e)])throw new Error(_0x290fd1(0x18a)+(_0x168e86[_0x290fd1(0x18b)]||'Unknown\x20error'));const _0x2556c4=_0x168e86['PaymentLink']||_0x168e86['payment_url'],_0x236271=_0x168e86[_0x290fd1(0x18c)]||_0x168e86[_0x290fd1(0x1ac)];return console['log'](_0x290fd1(0x19b)),console[_0x290fd1(0x1b9)]('Payment\x20Link:',_0x2556c4),console['log'](_0x290fd1(0x188),_0x236271),console[_0x290fd1(0x1b9)](_0x290fd1(0x1b5),_0x168e86[_0x290fd1(0x1ba)]),console[_0x290fd1(0x1b9)](_0x290fd1(0x199)),{'gateway_payment_id':_0x236271||_0x5144f0,'payment_url':_0x2556c4||'','paymentLinkCode':_0x236271};}catch(_0x22195f){console['error'](_0x290fd1(0x193),_0x22195f),console['log']('üìù\x20Logging\x20unified\x20payment\x20creation\x20failure...');throw _0x22195f;}}[a70_0x2eb039(0x1a9)](){const _0x205b5a=a70_0x2eb039;this['authToken']=null,console['log'](_0x205b5a(0x1a7));}async[a70_0x2eb039(0x19a)](){const _0x47a4c8=a70_0x2eb039;try{const _0x429d3b=await fetch(this[_0x47a4c8(0x191)]+_0x47a4c8(0x1b8),{'method':_0x47a4c8(0x1b0),'headers':{'Content-Type':_0x47a4c8(0x18d),'User-Agent':_0x47a4c8(0x1ad)}});return _0x429d3b&&_0x429d3b[_0x47a4c8(0x198)]===0xc8?!![]:![];}catch(_0x572f88){return console['error']('‚ùå\x20MyXSpend\x20health\x20check\x20failed:',_0x572f88),![];}}}exports[a70_0x2eb039(0x1b7)]=MyXSpendService,exports[a70_0x2eb039(0x195)]=new MyXSpendService();