'use strict';const a59_0x292c4f=a59_0x3afe;(function(_0x44677b,_0x4215ff){const _0xedf929=a59_0x3afe,_0x34d439=_0x44677b();while(!![]){try{const _0x2cfd67=-parseInt(_0xedf929(0x179))/0x1+parseInt(_0xedf929(0x178))/0x2+parseInt(_0xedf929(0x168))/0x3+parseInt(_0xedf929(0x16a))/0x4*(-parseInt(_0xedf929(0x15e))/0x5)+parseInt(_0xedf929(0x17e))/0x6+-parseInt(_0xedf929(0x17a))/0x7*(parseInt(_0xedf929(0x16e))/0x8)+parseInt(_0xedf929(0x165))/0x9;if(_0x2cfd67===_0x4215ff)break;else _0x34d439['push'](_0x34d439['shift']());}catch(_0x4899c0){_0x34d439['push'](_0x34d439['shift']());}}}(a59_0x196a,0xee562));function a59_0x3afe(_0x141cdb,_0x3823ca){_0x141cdb=_0x141cdb-0x153;const _0x196adf=a59_0x196a();let _0x3afe4a=_0x196adf[_0x141cdb];return _0x3afe4a;}function a59_0x196a(){const _0x5c073d=['‚úÖ\x20MyXSpend\x20unified\x20payment\x20link\x20created\x20successfully','EODO9BsIPsW4w3QTjkxN8uwCg9uDqb1pJ8XvxY1TjUhvQZYhCT','myxspendService','üì•\x20MyXSpend\x20unified\x20raw\x20response:','toUpperCase','createPaymentLink','__esModule','payment_url','TrapayAPI/1.0','355etKpyu','text','responseCode','Customer:','Payment\x20Link:','authToken','healthCheck','14579622Qowuvj','POST','MyXSpend\x20API\x20error:\x20HTTP\x20','4734828lKJuiz','Email:','108844NhLxQa','application/json','invalidateAuth','‚ùå\x20MyXSpend\x20unified\x20payment\x20creation\x20failed:','14786584rCxLPq','COMPANY_ID','Unknown\x20error','PaymentLink','Invalid\x20JSON\x20response\x20from\x20MyXSpend:\x20','üìù\x20Logging\x20unified\x20payment\x20creation\x20failure...','\x20-\x20','üá≤üáΩ\x20MyXSpend\x20service\x20initialized\x20with\x20unified\x20payment\x20processing','Payment\x20Code:','Amount:','2169178NYglfV','161700CqSJJD','7heDojI','defineProperty','status','responseMessage','3812442JFPAlh','error','üì§\x20MyXSpend\x20unified\x20request\x20body:','MyXSpendService','82dcbd4a-a838-47f9-ae21-8dac9a8f1622','stringify','apiUrl','log','MyXSpend\x20payment\x20creation\x20failed:\x20','myxspend.php'];a59_0x196a=function(){return _0x5c073d;};return a59_0x196a();}Object[a59_0x292c4f(0x17b)](exports,a59_0x292c4f(0x15b),{'value':!![]}),exports[a59_0x292c4f(0x157)]=exports[a59_0x292c4f(0x181)]=void 0x0;class MyXSpendService{constructor(){const _0x5bf1db=a59_0x292c4f;this[_0x5bf1db(0x163)]=null,this['API_KEY']=_0x5bf1db(0x156),this[_0x5bf1db(0x16f)]=_0x5bf1db(0x182),this['apiUrl']='https://traffer.uk/gateway/myxspend/',console['log'](_0x5bf1db(0x175));}async[a59_0x292c4f(0x15a)](_0x113d1b){const _0x39e021=a59_0x292c4f;try{const {orderId:_0x4f7842,amount:_0x498b6b,currency:_0x3c6d36,firstName:_0x243053,lastName:_0x44a2f6,email:_0x4cc9e,phone:_0x3ea47f,successUrl:_0x39dd77,failureUrl:_0x2d3cbe}=_0x113d1b;console[_0x39e021(0x185)]('üá≤üáΩ\x20Creating\x20MyXSpend\x20payment\x20link\x20(unified)...'),console['log']('Order\x20ID:',_0x4f7842),console[_0x39e021(0x185)](_0x39e021(0x177),_0x498b6b,_0x3c6d36),console[_0x39e021(0x185)](_0x39e021(0x161),_0x243053+'\x20'+_0x44a2f6),console[_0x39e021(0x185)](_0x39e021(0x169),_0x4cc9e),console[_0x39e021(0x185)]('Phone:',_0x3ea47f||'not\x20provided');const _0xd6b291={'firstName':_0x243053,'lastName':_0x44a2f6,'customerOrderId':_0x4f7842,'email':_0x4cc9e,'phone':_0x3ea47f||'','amount':_0x498b6b,'currency':_0x3c6d36[_0x39e021(0x159)](),'success_url':_0x39dd77,'failure_url':_0x2d3cbe};console[_0x39e021(0x185)](_0x39e021(0x180),JSON[_0x39e021(0x183)](_0xd6b291,null,0x2));const _0x3120c4=await fetch(this['apiUrl']+_0x39e021(0x154),{'method':_0x39e021(0x166),'headers':{'Content-Type':_0x39e021(0x16b),'User-Agent':'TrapayAPI/1.0'},'body':JSON[_0x39e021(0x183)](_0xd6b291)}),_0x4011f1=await _0x3120c4[_0x39e021(0x15f)]();console['log'](_0x39e021(0x158),_0x4011f1);if(!_0x3120c4['ok'])throw new Error(_0x39e021(0x167)+_0x3120c4[_0x39e021(0x17c)]+_0x39e021(0x174)+_0x4011f1);let _0x4ead22;try{_0x4ead22=JSON['parse'](_0x4011f1);}catch(_0x2ad601){throw new Error(_0x39e021(0x172)+_0x4011f1);}console[_0x39e021(0x185)]('üìä\x20MyXSpend\x20unified\x20response\x20data:',JSON['stringify'](_0x4ead22,null,0x2));if(!_0x4ead22[_0x39e021(0x171)]&&!_0x4ead22[_0x39e021(0x15c)])throw new Error(_0x39e021(0x153)+(_0x4ead22[_0x39e021(0x17d)]||_0x39e021(0x170)));const _0x5c6118=_0x4ead22[_0x39e021(0x171)]||_0x4ead22['payment_url'],_0x2530a4=_0x4ead22['PaymentLinkCode']||_0x4ead22['gateway_payment_id'];return console[_0x39e021(0x185)](_0x39e021(0x155)),console['log'](_0x39e021(0x162),_0x5c6118),console[_0x39e021(0x185)](_0x39e021(0x176),_0x2530a4),console[_0x39e021(0x185)]('Response\x20Code:',_0x4ead22[_0x39e021(0x160)]),console[_0x39e021(0x185)]('üìù\x20Logging\x20unified\x20payment\x20creation\x20event...'),{'gateway_payment_id':_0x2530a4||_0x4f7842,'payment_url':_0x5c6118||'','paymentLinkCode':_0x2530a4};}catch(_0x1154bb){console[_0x39e021(0x17f)](_0x39e021(0x16d),_0x1154bb),console[_0x39e021(0x185)](_0x39e021(0x173));throw _0x1154bb;}}[a59_0x292c4f(0x16c)](){const _0x24980b=a59_0x292c4f;this['authToken']=null,console[_0x24980b(0x185)]('üîê\x20MyXSpend\x20auth\x20token\x20invalidated');}async[a59_0x292c4f(0x164)](){const _0x26b894=a59_0x292c4f;try{const _0x3c930a=await fetch(this[_0x26b894(0x184)]+'health.php',{'method':'GET','headers':{'Content-Type':'application/json','User-Agent':_0x26b894(0x15d)}});return _0x3c930a&&_0x3c930a[_0x26b894(0x17c)]===0xc8?!![]:![];}catch(_0x34862d){return console[_0x26b894(0x17f)]('‚ùå\x20MyXSpend\x20health\x20check\x20failed:',_0x34862d),![];}}}exports[a59_0x292c4f(0x181)]=MyXSpendService,exports[a59_0x292c4f(0x157)]=new MyXSpendService();