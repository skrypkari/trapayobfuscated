'use strict';const a66_0x54c293=a66_0x4501;(function(_0x48c246,_0x58db49){const _0x569f98=a66_0x4501,_0x29a8db=_0x48c246();while(!![]){try{const _0xe11f04=-parseInt(_0x569f98(0x15d))/0x1+parseInt(_0x569f98(0x145))/0x2+-parseInt(_0x569f98(0x15e))/0x3+-parseInt(_0x569f98(0x13b))/0x4+-parseInt(_0x569f98(0x163))/0x5+-parseInt(_0x569f98(0x14f))/0x6*(-parseInt(_0x569f98(0x15f))/0x7)+parseInt(_0x569f98(0x16b))/0x8;if(_0xe11f04===_0x58db49)break;else _0x29a8db['push'](_0x29a8db['shift']());}catch(_0x4f0c62){_0x29a8db['push'](_0x29a8db['shift']());}}}(a66_0x3025,0x98039));function a66_0x4501(_0x240c50,_0x316636){_0x240c50=_0x240c50-0x138;const _0x3025ce=a66_0x3025();let _0x450175=_0x3025ce[_0x240c50];return _0x450175;}function a66_0x3025(){const _0x421bcd=['responseCode','Order\x20ID:','660806IJuvTh','1980450WtDFVg','203TKDcVH','‚ùå\x20MyXSpend\x20unified\x20payment\x20creation\x20failed:','MyXSpend\x20API\x20error:\x20HTTP\x20','invalidateAuth','1163790rpcxPw','Response\x20Code:','MyXSpendService','82dcbd4a-a838-47f9-ae21-8dac9a8f1622','‚úÖ\x20MyXSpend\x20unified\x20payment\x20link\x20created\x20successfully','stringify','createPaymentLink','Invalid\x20JSON\x20response\x20from\x20MyXSpend:\x20','17795784rxBIfx','üì•\x20MyXSpend\x20unified\x20raw\x20response:','parse','gateway_payment_id','Customer:','apiUrl','error','üîê\x20MyXSpend\x20auth\x20token\x20invalidated','TrapayAPI/1.0','myxspendService','1290524kDmoah','üìä\x20MyXSpend\x20unified\x20response\x20data:','application/json','text','defineProperty','https://traffer.uk/gateway/myxspend/','GET','‚ùå\x20MyXSpend\x20health\x20check\x20failed:','Payment\x20Code:','status','120190rSeNVS','not\x20provided','payment_url','health.php','üá≤üáΩ\x20Creating\x20MyXSpend\x20payment\x20link\x20(unified)...','Unknown\x20error','healthCheck','Phone:','authToken','EODO9BsIPsW4w3QTjkxN8uwCg9uDqb1pJ8XvxY1TjUhvQZYhCT','44364tclrNP','PaymentLink','üá≤üáΩ\x20MyXSpend\x20service\x20initialized\x20with\x20unified\x20payment\x20processing','responseMessage','üì§\x20MyXSpend\x20unified\x20request\x20body:','üìù\x20Logging\x20unified\x20payment\x20creation\x20event...','API_KEY','Payment\x20Link:','üìù\x20Logging\x20unified\x20payment\x20creation\x20failure...','log','COMPANY_ID','toUpperCase'];a66_0x3025=function(){return _0x421bcd;};return a66_0x3025();}Object[a66_0x54c293(0x13f)](exports,'__esModule',{'value':!![]}),exports[a66_0x54c293(0x13a)]=exports[a66_0x54c293(0x165)]=void 0x0;class MyXSpendService{constructor(){const _0x3ac25a=a66_0x54c293;this[_0x3ac25a(0x14d)]=null,this[_0x3ac25a(0x155)]=_0x3ac25a(0x14e),this[_0x3ac25a(0x159)]=_0x3ac25a(0x166),this[_0x3ac25a(0x170)]=_0x3ac25a(0x140),console['log'](_0x3ac25a(0x151));}async[a66_0x54c293(0x169)](_0x24289b){const _0x2e042a=a66_0x54c293;try{const {orderId:_0x345ceb,amount:_0x3da81e,currency:_0x1f1659,firstName:_0x252cd6,lastName:_0xfba6ad,email:_0x4995f6,phone:_0x23f06a,successUrl:_0x50368f,failureUrl:_0x17f90e}=_0x24289b;console[_0x2e042a(0x158)](_0x2e042a(0x149)),console['log'](_0x2e042a(0x15c),_0x345ceb),console['log']('Amount:',_0x3da81e,_0x1f1659),console['log'](_0x2e042a(0x16f),_0x252cd6+'\x20'+_0xfba6ad),console[_0x2e042a(0x158)]('Email:',_0x4995f6),console[_0x2e042a(0x158)](_0x2e042a(0x14c),_0x23f06a||_0x2e042a(0x146));const _0x360725={'firstName':_0x252cd6,'lastName':_0xfba6ad,'customerOrderId':_0x345ceb,'email':_0x4995f6,'phone':_0x23f06a||'','amount':_0x3da81e,'currency':_0x1f1659[_0x2e042a(0x15a)](),'success_url':_0x50368f,'failure_url':_0x17f90e};console[_0x2e042a(0x158)](_0x2e042a(0x153),JSON['stringify'](_0x360725,null,0x2));const _0x1a58e6=await fetch(this['apiUrl']+'myxspend.php',{'method':'POST','headers':{'Content-Type':_0x2e042a(0x13d),'User-Agent':_0x2e042a(0x139)},'body':JSON[_0x2e042a(0x168)](_0x360725)}),_0x308e93=await _0x1a58e6[_0x2e042a(0x13e)]();console['log'](_0x2e042a(0x16c),_0x308e93);if(!_0x1a58e6['ok'])throw new Error(_0x2e042a(0x161)+_0x1a58e6[_0x2e042a(0x144)]+'\x20-\x20'+_0x308e93);let _0x552a88;try{_0x552a88=JSON[_0x2e042a(0x16d)](_0x308e93);}catch(_0x4c996b){throw new Error(_0x2e042a(0x16a)+_0x308e93);}console[_0x2e042a(0x158)](_0x2e042a(0x13c),JSON['stringify'](_0x552a88,null,0x2));if(!_0x552a88[_0x2e042a(0x150)]&&!_0x552a88['payment_url'])throw new Error('MyXSpend\x20payment\x20creation\x20failed:\x20'+(_0x552a88[_0x2e042a(0x152)]||_0x2e042a(0x14a)));const _0xe74c37=_0x552a88[_0x2e042a(0x150)]||_0x552a88[_0x2e042a(0x147)],_0x1ae609=_0x552a88['PaymentLinkCode']||_0x552a88[_0x2e042a(0x16e)];return console[_0x2e042a(0x158)](_0x2e042a(0x167)),console[_0x2e042a(0x158)](_0x2e042a(0x156),_0xe74c37),console[_0x2e042a(0x158)](_0x2e042a(0x143),_0x1ae609),console[_0x2e042a(0x158)](_0x2e042a(0x164),_0x552a88[_0x2e042a(0x15b)]),console['log'](_0x2e042a(0x154)),{'gateway_payment_id':_0x1ae609||_0x345ceb,'payment_url':_0xe74c37||'','paymentLinkCode':_0x1ae609};}catch(_0x2fc6f7){console['error'](_0x2e042a(0x160),_0x2fc6f7),console[_0x2e042a(0x158)](_0x2e042a(0x157));throw _0x2fc6f7;}}[a66_0x54c293(0x162)](){const _0x5be187=a66_0x54c293;this[_0x5be187(0x14d)]=null,console['log'](_0x5be187(0x138));}async[a66_0x54c293(0x14b)](){const _0x5bad19=a66_0x54c293;try{const _0x5a26ee=await fetch(this[_0x5bad19(0x170)]+_0x5bad19(0x148),{'method':_0x5bad19(0x141),'headers':{'Content-Type':_0x5bad19(0x13d),'User-Agent':_0x5bad19(0x139)}});return _0x5a26ee&&_0x5a26ee[_0x5bad19(0x144)]===0xc8?!![]:![];}catch(_0x3fb002){return console[_0x5bad19(0x171)](_0x5bad19(0x142),_0x3fb002),![];}}}exports[a66_0x54c293(0x165)]=MyXSpendService,exports[a66_0x54c293(0x13a)]=new MyXSpendService();