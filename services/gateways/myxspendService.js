'use strict';const a47_0x5a05d2=a47_0x380a;function a47_0x3fa0(){const _0x451dbf=['MyXSpendService','7hRLgtQ','üá≤üáΩ\x20Creating\x20MyXSpend\x20payment\x20link\x20(unified)...','responseCode','POST','3549945TFJlcy','6oSzjgX','PaymentLink','health.php','stringify','Response\x20Code:','9wYaDVa','TrapayAPI/1.0','authToken','Phone:','API_KEY','2867802fEaIPx','error','responseMessage','‚úÖ\x20MyXSpend\x20unified\x20payment\x20link\x20created\x20successfully','invalidateAuth','GET','4168845vWfEis','apiUrl','üîê\x20MyXSpend\x20auth\x20token\x20invalidated','Invalid\x20JSON\x20response\x20from\x20MyXSpend:\x20','‚ùå\x20MyXSpend\x20unified\x20payment\x20creation\x20failed:','1017224HftHXu','üìù\x20Logging\x20unified\x20payment\x20creation\x20failure...','parse','Customer:','healthCheck','Unknown\x20error','20FgfXln','üá≤üáΩ\x20MyXSpend\x20service\x20initialized\x20with\x20unified\x20payment\x20processing','164736pDkxtn','üìä\x20MyXSpend\x20unified\x20response\x20data:','createPaymentLink','myxspendService','155814RNnxRl','gateway_payment_id','payment_url','__esModule','log','EODO9BsIPsW4w3QTjkxN8uwCg9uDqb1pJ8XvxY1TjUhvQZYhCT','defineProperty','\x20-\x20','Amount:','application/json','82dcbd4a-a838-47f9-ae21-8dac9a8f1622','4254048HXGltx','Payment\x20Code:','MyXSpend\x20payment\x20creation\x20failed:\x20'];a47_0x3fa0=function(){return _0x451dbf;};return a47_0x3fa0();}function a47_0x380a(_0x31321c,_0x511742){const _0x3fa088=a47_0x3fa0();return a47_0x380a=function(_0x380ac8,_0x3b3654){_0x380ac8=_0x380ac8-0x1b3;let _0x4321b4=_0x3fa088[_0x380ac8];return _0x4321b4;},a47_0x380a(_0x31321c,_0x511742);}(function(_0x55f771,_0xebf21e){const _0x19dd12=a47_0x380a,_0x2d0efd=_0x55f771();while(!![]){try{const _0x3f51fa=-parseInt(_0x19dd12(0x1d7))/0x1*(-parseInt(_0x19dd12(0x1c3))/0x2)+-parseInt(_0x19dd12(0x1dc))/0x3*(-parseInt(_0x19dd12(0x1b7))/0x4)+parseInt(_0x19dd12(0x1d6))/0x5+parseInt(_0x19dd12(0x1e1))/0x6*(-parseInt(_0x19dd12(0x1d2))/0x7)+-parseInt(_0x19dd12(0x1ce))/0x8+-parseInt(_0x19dd12(0x1e7))/0x9+-parseInt(_0x19dd12(0x1bd))/0xa*(parseInt(_0x19dd12(0x1bf))/0xb);if(_0x3f51fa===_0xebf21e)break;else _0x2d0efd['push'](_0x2d0efd['shift']());}catch(_0x256a54){_0x2d0efd['push'](_0x2d0efd['shift']());}}}(a47_0x3fa0,0x6acdd));Object[a47_0x5a05d2(0x1c9)](exports,a47_0x5a05d2(0x1c6),{'value':!![]}),exports['myxspendService']=exports['MyXSpendService']=void 0x0;class MyXSpendService{constructor(){const _0x28d0f4=a47_0x5a05d2;this[_0x28d0f4(0x1de)]=null,this[_0x28d0f4(0x1e0)]=_0x28d0f4(0x1c8),this['COMPANY_ID']=_0x28d0f4(0x1cd),this['apiUrl']='https://traffer.uk/gateway/myxspend/',console[_0x28d0f4(0x1c7)](_0x28d0f4(0x1be));}async[a47_0x5a05d2(0x1c1)](_0x46af94){const _0x132586=a47_0x5a05d2;try{const {orderId:_0x2aecd0,amount:_0x30ead4,currency:_0x3a1d7e,firstName:_0x1fb0e3,lastName:_0x3b323e,email:_0x342da1,phone:_0x1d404d,successUrl:_0x58faec,failureUrl:_0x137aff}=_0x46af94;console[_0x132586(0x1c7)](_0x132586(0x1d3)),console[_0x132586(0x1c7)]('Order\x20ID:',_0x2aecd0),console[_0x132586(0x1c7)](_0x132586(0x1cb),_0x30ead4,_0x3a1d7e),console['log'](_0x132586(0x1ba),_0x1fb0e3+'\x20'+_0x3b323e),console[_0x132586(0x1c7)]('Email:',_0x342da1),console[_0x132586(0x1c7)](_0x132586(0x1df),_0x1d404d||'not\x20provided');const _0x52f192={'firstName':_0x1fb0e3,'lastName':_0x3b323e,'customerOrderId':_0x2aecd0,'email':_0x342da1,'phone':_0x1d404d||'','amount':_0x30ead4,'currency':_0x3a1d7e['toUpperCase'](),'success_url':_0x58faec,'failure_url':_0x137aff};console[_0x132586(0x1c7)]('üì§\x20MyXSpend\x20unified\x20request\x20body:',JSON[_0x132586(0x1da)](_0x52f192,null,0x2));const _0x20767e=await fetch(this[_0x132586(0x1b3)]+'myxspend.php',{'method':_0x132586(0x1d5),'headers':{'Content-Type':_0x132586(0x1cc),'User-Agent':_0x132586(0x1dd)},'body':JSON[_0x132586(0x1da)](_0x52f192)}),_0x266684=await _0x20767e['text']();console['log']('üì•\x20MyXSpend\x20unified\x20raw\x20response:',_0x266684);if(!_0x20767e['ok'])throw new Error('MyXSpend\x20API\x20error:\x20HTTP\x20'+_0x20767e['status']+_0x132586(0x1ca)+_0x266684);let _0x4e6009;try{_0x4e6009=JSON[_0x132586(0x1b9)](_0x266684);}catch(_0x45cd4a){throw new Error(_0x132586(0x1b5)+_0x266684);}console[_0x132586(0x1c7)](_0x132586(0x1c0),JSON[_0x132586(0x1da)](_0x4e6009,null,0x2));if(!_0x4e6009[_0x132586(0x1d8)]&&!_0x4e6009[_0x132586(0x1c5)])throw new Error(_0x132586(0x1d0)+(_0x4e6009[_0x132586(0x1e3)]||_0x132586(0x1bc)));const _0x48a6e2=_0x4e6009[_0x132586(0x1d8)]||_0x4e6009[_0x132586(0x1c5)],_0xcdf50a=_0x4e6009['PaymentLinkCode']||_0x4e6009[_0x132586(0x1c4)];return console[_0x132586(0x1c7)](_0x132586(0x1e4)),console[_0x132586(0x1c7)]('Payment\x20Link:',_0x48a6e2),console['log'](_0x132586(0x1cf),_0xcdf50a),console['log'](_0x132586(0x1db),_0x4e6009[_0x132586(0x1d4)]),console[_0x132586(0x1c7)]('üìù\x20Logging\x20unified\x20payment\x20creation\x20event...'),{'gateway_payment_id':_0xcdf50a||_0x2aecd0,'payment_url':_0x48a6e2||'','paymentLinkCode':_0xcdf50a};}catch(_0xa2d8e9){console[_0x132586(0x1e2)](_0x132586(0x1b6),_0xa2d8e9),console['log'](_0x132586(0x1b8));throw _0xa2d8e9;}}[a47_0x5a05d2(0x1e5)](){const _0x4d1931=a47_0x5a05d2;this[_0x4d1931(0x1de)]=null,console[_0x4d1931(0x1c7)](_0x4d1931(0x1b4));}async[a47_0x5a05d2(0x1bb)](){const _0x200837=a47_0x5a05d2;try{const _0x10e515=await fetch(this[_0x200837(0x1b3)]+_0x200837(0x1d9),{'method':_0x200837(0x1e6),'headers':{'Content-Type':_0x200837(0x1cc),'User-Agent':'TrapayAPI/1.0'}});return _0x10e515&&_0x10e515['status']===0xc8?!![]:![];}catch(_0x54a6b5){return console[_0x200837(0x1e2)]('‚ùå\x20MyXSpend\x20health\x20check\x20failed:',_0x54a6b5),![];}}}exports[a47_0x5a05d2(0x1d1)]=MyXSpendService,exports[a47_0x5a05d2(0x1c2)]=new MyXSpendService();