'use strict';const a59_0x4aa5ff=a59_0x2675;function a59_0x2675(_0x56af84,_0xc8c76f){_0x56af84=_0x56af84-0x151;const _0x35c7fd=a59_0x35c7();let _0x26751f=_0x35c7fd[_0x56af84];return _0x26751f;}(function(_0x77bb2b,_0x6e49cb){const _0x3bb69b=a59_0x2675,_0x4f8b90=_0x77bb2b();while(!![]){try{const _0x54b349=-parseInt(_0x3bb69b(0x159))/0x1*(parseInt(_0x3bb69b(0x17e))/0x2)+-parseInt(_0x3bb69b(0x158))/0x3*(-parseInt(_0x3bb69b(0x153))/0x4)+parseInt(_0x3bb69b(0x186))/0x5*(parseInt(_0x3bb69b(0x15c))/0x6)+-parseInt(_0x3bb69b(0x15e))/0x7*(-parseInt(_0x3bb69b(0x152))/0x8)+parseInt(_0x3bb69b(0x187))/0x9+parseInt(_0x3bb69b(0x16e))/0xa*(-parseInt(_0x3bb69b(0x180))/0xb)+-parseInt(_0x3bb69b(0x16a))/0xc*(parseInt(_0x3bb69b(0x151))/0xd);if(_0x54b349===_0x6e49cb)break;else _0x4f8b90['push'](_0x4f8b90['shift']());}catch(_0x1c229a){_0x4f8b90['push'](_0x4f8b90['shift']());}}}(a59_0x35c7,0x38499));function a59_0x35c7(){const _0x59a207=['306008hsnZDN','üìù\x20Logging\x20unified\x20payment\x20creation\x20failure...','apiUrl','API_KEY','‚úÖ\x20MyXSpend\x20unified\x20payment\x20link\x20created\x20successfully','12lwGvjw','200643bxHuPy','payment_url','text','18PmgyXG','COMPANY_ID','7XbRuEP','82dcbd4a-a838-47f9-ae21-8dac9a8f1622','MyXSpend\x20API\x20error:\x20HTTP\x20','Amount:','authToken','Email:','parse','TrapayAPI/1.0','application/json','responseMessage','PaymentLink','toUpperCase','24IUpYbX','responseCode','‚ùå\x20MyXSpend\x20unified\x20payment\x20creation\x20failed:','PaymentLinkCode','30720FftYZE','https://traffer.uk/gateway/myxspend/','not\x20provided','myxspendService','log','Payment\x20Link:','üì§\x20MyXSpend\x20unified\x20request\x20body:','üìù\x20Logging\x20unified\x20payment\x20creation\x20event...','stringify','GET','Order\x20ID:','üîê\x20MyXSpend\x20auth\x20token\x20invalidated','createPaymentLink','Payment\x20Code:','\x20-\x20','status','2WmzUEw','POST','781tcXkEJ','healthCheck','‚ùå\x20MyXSpend\x20health\x20check\x20failed:','error','MyXSpend\x20payment\x20creation\x20failed:\x20','myxspend.php','754610vUryeL','3777273DEeccP','MyXSpendService','Invalid\x20JSON\x20response\x20from\x20MyXSpend:\x20','4660903YgWDhP','1503192KJpfQN'];a59_0x35c7=function(){return _0x59a207;};return a59_0x35c7();}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a59_0x4aa5ff(0x171)]=exports[a59_0x4aa5ff(0x188)]=void 0x0;class MyXSpendService{constructor(){const _0x55e0f5=a59_0x4aa5ff;this['authToken']=null,this[_0x55e0f5(0x156)]='EODO9BsIPsW4w3QTjkxN8uwCg9uDqb1pJ8XvxY1TjUhvQZYhCT',this[_0x55e0f5(0x15d)]=_0x55e0f5(0x15f),this[_0x55e0f5(0x155)]=_0x55e0f5(0x16f),console[_0x55e0f5(0x172)]('üá≤üáΩ\x20MyXSpend\x20service\x20initialized\x20with\x20unified\x20payment\x20processing');}async[a59_0x4aa5ff(0x17a)](_0x1d9dd2){const _0x24869f=a59_0x4aa5ff;try{const {orderId:_0x59c3b8,amount:_0x3ce9a2,currency:_0x44759d,firstName:_0x17772f,lastName:_0x1ccfa6,email:_0x21e904,phone:_0x470aa8,successUrl:_0x488147,failureUrl:_0x2e42cd}=_0x1d9dd2;console[_0x24869f(0x172)]('üá≤üáΩ\x20Creating\x20MyXSpend\x20payment\x20link\x20(unified)...'),console[_0x24869f(0x172)](_0x24869f(0x178),_0x59c3b8),console[_0x24869f(0x172)](_0x24869f(0x161),_0x3ce9a2,_0x44759d),console[_0x24869f(0x172)]('Customer:',_0x17772f+'\x20'+_0x1ccfa6),console[_0x24869f(0x172)](_0x24869f(0x163),_0x21e904),console[_0x24869f(0x172)]('Phone:',_0x470aa8||_0x24869f(0x170));const _0x54a0b9={'firstName':_0x17772f,'lastName':_0x1ccfa6,'customerOrderId':_0x59c3b8,'email':_0x21e904,'phone':_0x470aa8||'','amount':_0x3ce9a2,'currency':_0x44759d[_0x24869f(0x169)](),'success_url':_0x488147,'failure_url':_0x2e42cd};console[_0x24869f(0x172)](_0x24869f(0x174),JSON[_0x24869f(0x176)](_0x54a0b9,null,0x2));const _0x20e494=await fetch(this[_0x24869f(0x155)]+_0x24869f(0x185),{'method':_0x24869f(0x17f),'headers':{'Content-Type':'application/json','User-Agent':_0x24869f(0x165)},'body':JSON[_0x24869f(0x176)](_0x54a0b9)}),_0x2bb490=await _0x20e494[_0x24869f(0x15b)]();console[_0x24869f(0x172)]('üì•\x20MyXSpend\x20unified\x20raw\x20response:',_0x2bb490);if(!_0x20e494['ok'])throw new Error(_0x24869f(0x160)+_0x20e494[_0x24869f(0x17d)]+_0x24869f(0x17c)+_0x2bb490);let _0x4369f5;try{_0x4369f5=JSON[_0x24869f(0x164)](_0x2bb490);}catch(_0x5e29de){throw new Error(_0x24869f(0x189)+_0x2bb490);}console[_0x24869f(0x172)]('üìä\x20MyXSpend\x20unified\x20response\x20data:',JSON[_0x24869f(0x176)](_0x4369f5,null,0x2));if(!_0x4369f5['PaymentLink']&&!_0x4369f5[_0x24869f(0x15a)])throw new Error(_0x24869f(0x184)+(_0x4369f5[_0x24869f(0x167)]||'Unknown\x20error'));const _0x415b9b=_0x4369f5[_0x24869f(0x168)]||_0x4369f5[_0x24869f(0x15a)],_0x2e497e=_0x4369f5[_0x24869f(0x16d)]||_0x4369f5['gateway_payment_id'];return console[_0x24869f(0x172)](_0x24869f(0x157)),console[_0x24869f(0x172)](_0x24869f(0x173),_0x415b9b),console[_0x24869f(0x172)](_0x24869f(0x17b),_0x2e497e),console[_0x24869f(0x172)]('Response\x20Code:',_0x4369f5[_0x24869f(0x16b)]),console[_0x24869f(0x172)](_0x24869f(0x175)),{'gateway_payment_id':_0x2e497e||_0x59c3b8,'payment_url':_0x415b9b||'','paymentLinkCode':_0x2e497e};}catch(_0x4f0dee){console[_0x24869f(0x183)](_0x24869f(0x16c),_0x4f0dee),console[_0x24869f(0x172)](_0x24869f(0x154));throw _0x4f0dee;}}['invalidateAuth'](){const _0x482fba=a59_0x4aa5ff;this[_0x482fba(0x162)]=null,console[_0x482fba(0x172)](_0x482fba(0x179));}async[a59_0x4aa5ff(0x181)](){const _0x468c80=a59_0x4aa5ff;try{const _0xd754a5=await fetch(this[_0x468c80(0x155)]+'health.php',{'method':_0x468c80(0x177),'headers':{'Content-Type':_0x468c80(0x166),'User-Agent':_0x468c80(0x165)}});return _0xd754a5&&_0xd754a5[_0x468c80(0x17d)]===0xc8?!![]:![];}catch(_0x519b02){return console[_0x468c80(0x183)](_0x468c80(0x182),_0x519b02),![];}}}exports[a59_0x4aa5ff(0x188)]=MyXSpendService,exports[a59_0x4aa5ff(0x171)]=new MyXSpendService();