'use strict';function a46_0x1dfe(_0xe39e73,_0x844dc7){const _0x55183c=a46_0x5518();return a46_0x1dfe=function(_0x1dfea2,_0x450860){_0x1dfea2=_0x1dfea2-0x16c;let _0x3672dc=_0x55183c[_0x1dfea2];return _0x3672dc;},a46_0x1dfe(_0xe39e73,_0x844dc7);}const a46_0x2025c5=a46_0x1dfe;(function(_0x8efdb3,_0x5a2674){const _0x4fb933=a46_0x1dfe,_0x5a205c=_0x8efdb3();while(!![]){try{const _0x2b11bd=-parseInt(_0x4fb933(0x177))/0x1+-parseInt(_0x4fb933(0x19b))/0x2+-parseInt(_0x4fb933(0x17d))/0x3*(-parseInt(_0x4fb933(0x188))/0x4)+-parseInt(_0x4fb933(0x173))/0x5*(-parseInt(_0x4fb933(0x17f))/0x6)+-parseInt(_0x4fb933(0x16c))/0x7+parseInt(_0x4fb933(0x16f))/0x8+parseInt(_0x4fb933(0x19f))/0x9*(parseInt(_0x4fb933(0x174))/0xa);if(_0x2b11bd===_0x5a2674)break;else _0x5a205c['push'](_0x5a205c['shift']());}catch(_0x3d6074){_0x5a205c['push'](_0x5a205c['shift']());}}}(a46_0x5518,0x513de));Object[a46_0x2025c5(0x1a3)](exports,'__esModule',{'value':!![]}),exports[a46_0x2025c5(0x16d)]=exports['MyXSpendService']=void 0x0;class MyXSpendService{constructor(){const _0x34ac71=a46_0x2025c5;this['authToken']=null,this['API_KEY']=_0x34ac71(0x17a),this[_0x34ac71(0x196)]=_0x34ac71(0x185),this[_0x34ac71(0x192)]=_0x34ac71(0x189),console[_0x34ac71(0x198)](_0x34ac71(0x17b));}async[a46_0x2025c5(0x195)](){const _0x5d149a=a46_0x2025c5;if(this['authToken'])return this[_0x5d149a(0x18a)];try{console[_0x5d149a(0x198)](_0x5d149a(0x19c));const _0x147514={'email':process[_0x5d149a(0x1a1)][_0x5d149a(0x182)]||'','password':process[_0x5d149a(0x1a1)]['MYXSPEND_PASSWORD']||''},_0x22e3d4=await fetch(this[_0x5d149a(0x192)]+'auth.php',{'method':_0x5d149a(0x19e),'headers':{'Content-Type':_0x5d149a(0x18c),'User-Agent':_0x5d149a(0x175)},'body':JSON[_0x5d149a(0x183)](_0x147514)});if(!_0x22e3d4['ok'])throw new Error('MyXSpend\x20auth\x20failed:\x20HTTP\x20'+_0x22e3d4[_0x5d149a(0x180)]);const _0x110f97=await _0x22e3d4['json']();return console[_0x5d149a(0x198)](_0x5d149a(0x197)),console[_0x5d149a(0x198)]('Account\x20ID:',_0x110f97['accountId']),console[_0x5d149a(0x198)](_0x5d149a(0x1a0),_0x110f97['roles']),this[_0x5d149a(0x18a)]=_0x110f97['token'],this[_0x5d149a(0x18a)];}catch(_0x3a3cd1){console[_0x5d149a(0x199)]('‚ùå\x20MyXSpend\x20authentication\x20failed:',_0x3a3cd1);throw new Error('MyXSpend\x20authentication\x20failed:\x20'+_0x3a3cd1);}}async['createPaymentLink'](_0x36a63c){const _0x2cc956=a46_0x2025c5;try{const _0x26060e=await this[_0x2cc956(0x195)](),{orderId:_0x4a64cf,amount:_0x735e63,currency:_0x5174c2,firstName:_0x98fb3b,lastName:_0x2aa8a9,email:_0x12d8b1,phone:_0x28c9bc,successUrl:_0x1ee337,failureUrl:_0x4e3c93}=_0x36a63c;console['log'](_0x2cc956(0x18b)),console[_0x2cc956(0x198)]('Order\x20ID:',_0x4a64cf),console[_0x2cc956(0x198)]('Amount:',_0x735e63,_0x5174c2),console[_0x2cc956(0x198)](_0x2cc956(0x1a5),_0x98fb3b+'\x20'+_0x2aa8a9),console[_0x2cc956(0x198)](_0x2cc956(0x17c),_0x12d8b1),console['log']('Phone:',_0x28c9bc||'not\x20provided');const _0x58938d={'firstName':_0x98fb3b,'lastName':_0x2aa8a9,'customerOrderId':_0x4a64cf,'email':_0x12d8b1,'phone':_0x28c9bc||'','amount':_0x735e63,'currency':_0x5174c2[_0x2cc956(0x178)](),'success_url':_0x1ee337,'failure_url':_0x4e3c93};console['log']('üì§\x20MyXSpend\x20request\x20body:',JSON[_0x2cc956(0x183)](_0x58938d,null,0x2));const _0x17c867=await fetch(this[_0x2cc956(0x192)]+_0x2cc956(0x17e),{'method':'POST','headers':{'Authorization':_0x2cc956(0x184)+_0x26060e,'Content-Type':_0x2cc956(0x18c),'X-API-KEY':this[_0x2cc956(0x19a)],'X-COMPANY-ID':this[_0x2cc956(0x196)],'User-Agent':_0x2cc956(0x175)},'body':JSON['stringify'](_0x58938d)}),_0x2ff09c=await _0x17c867['text']();console[_0x2cc956(0x198)](_0x2cc956(0x191),_0x2ff09c);if(!_0x17c867['ok'])throw new Error(_0x2cc956(0x181)+_0x17c867[_0x2cc956(0x180)]+_0x2cc956(0x171)+_0x2ff09c);let _0x34e270;try{_0x34e270=JSON[_0x2cc956(0x179)](_0x2ff09c);}catch(_0x41fee2){throw new Error(_0x2cc956(0x16e)+_0x2ff09c);}console['log'](_0x2cc956(0x18f),JSON[_0x2cc956(0x183)](_0x34e270,null,0x2));if(!_0x34e270[_0x2cc956(0x1a4)])throw new Error(_0x2cc956(0x194)+(_0x34e270[_0x2cc956(0x176)]||_0x2cc956(0x1a2)));return console[_0x2cc956(0x198)](_0x2cc956(0x193)),console[_0x2cc956(0x198)](_0x2cc956(0x190),_0x34e270['PaymentLink']),console[_0x2cc956(0x198)](_0x2cc956(0x172),_0x34e270[_0x2cc956(0x18d)]),console['log'](_0x2cc956(0x187),_0x34e270[_0x2cc956(0x186)]),console[_0x2cc956(0x198)]('üìù\x20Logging\x20payment\x20creation\x20event...'),{'gateway_payment_id':_0x34e270['PaymentLinkCode']||_0x4a64cf,'payment_url':_0x34e270[_0x2cc956(0x1a4)],'paymentLinkCode':_0x34e270[_0x2cc956(0x18d)]};}catch(_0x239df8){console[_0x2cc956(0x199)](_0x2cc956(0x18e),_0x239df8),console['log'](_0x2cc956(0x19d));throw _0x239df8;}}['invalidateAuth'](){const _0x3ebda5=a46_0x2025c5;this[_0x3ebda5(0x18a)]=null,console[_0x3ebda5(0x198)](_0x3ebda5(0x170));}async['healthCheck'](){const _0x4c1f56=a46_0x2025c5;try{const _0x567043=await this[_0x4c1f56(0x195)]();return!!_0x567043;}catch(_0x125e18){return console['error']('‚ùå\x20MyXSpend\x20health\x20check\x20failed:',_0x125e18),![];}}}function a46_0x5518(){const _0x1fe5e4=['API_KEY','1150924SSkpYM','üîê\x20Authenticating\x20with\x20MyXSpend...','üìù\x20Logging\x20payment\x20creation\x20failure...','POST','63vzXulW','Roles:','env','Unknown\x20error','defineProperty','PaymentLink','Customer:','2283806JgyNyp','myxspendService','Invalid\x20JSON\x20response\x20from\x20MyXSpend:\x20','4785400sNsCMg','üîê\x20MyXSpend\x20auth\x20token\x20invalidated','\x20-\x20','Payment\x20Code:','15uNdOyI','789830OKaJoV','TrapayAPI/1.0','responseMessage','472634BJdghc','toUpperCase','parse','EODO9BsIPsW4w3QTjkxN8uwCg9uDqb1pJ8XvxY1TjUhvQZYhCT','üá≤üáΩ\x20MyXSpend\x20service\x20initialized\x20with\x20white\x20domain\x20proxy','Email:','57jOtjHH','payment.php','69066vgRSCq','status','MyXSpend\x20API\x20error:\x20HTTP\x20','MYXSPEND_EMAIL','stringify','Bearer\x20','82dcbd4a-a838-47f9-ae21-8dac9a8f1622','responseCode','Response\x20Code:','109796JVPyrH','https://traffer.uk/gateway/myxspend/','authToken','üá≤üáΩ\x20Creating\x20MyXSpend\x20payment\x20link...','application/json','PaymentLinkCode','‚ùå\x20MyXSpend\x20payment\x20creation\x20failed:','üìä\x20MyXSpend\x20response\x20data:','Payment\x20Link:','üì•\x20MyXSpend\x20raw\x20response:','apiUrl','‚úÖ\x20MyXSpend\x20payment\x20link\x20created\x20successfully','MyXSpend\x20payment\x20creation\x20failed:\x20','authenticate','COMPANY_ID','‚úÖ\x20MyXSpend\x20authentication\x20successful','log','error'];a46_0x5518=function(){return _0x1fe5e4;};return a46_0x5518();}exports['MyXSpendService']=MyXSpendService,exports[a46_0x2025c5(0x16d)]=new MyXSpendService();