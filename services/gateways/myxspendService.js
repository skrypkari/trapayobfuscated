'use strict';const a59_0x163dff=a59_0x5099;function a59_0x5099(_0x46e867,_0x292af4){_0x46e867=_0x46e867-0x18e;const _0x41f24c=a59_0x41f2();let _0x50993f=_0x41f24c[_0x46e867];return _0x50993f;}function a59_0x41f2(){const _0x51f1b0=['336611mPmvnd','Unknown\x20error','Response\x20Code:','üîê\x20MyXSpend\x20auth\x20token\x20invalidated','log','invalidateAuth','COMPANY_ID','4dPEDaF','üìù\x20Logging\x20unified\x20payment\x20creation\x20event...','Order\x20ID:','24EzzZbD','1527775hIAadi','payment_url','4724740HUNAXG','__esModule','603DdUdjO','MyXSpendService','apiUrl','\x20-\x20','Payment\x20Code:','myxspend.php','MyXSpend\x20API\x20error:\x20HTTP\x20','authToken','TrapayAPI/1.0','myxspendService','gateway_payment_id','Email:','25064eaRkbD','responseMessage','stringify','1044552gseszl','üá≤üáΩ\x20MyXSpend\x20service\x20initialized\x20with\x20unified\x20payment\x20processing','parse','API_KEY','1494731PDGuyp','Payment\x20Link:','error','toUpperCase','EODO9BsIPsW4w3QTjkxN8uwCg9uDqb1pJ8XvxY1TjUhvQZYhCT','Invalid\x20JSON\x20response\x20from\x20MyXSpend:\x20','üì§\x20MyXSpend\x20unified\x20request\x20body:','https://traffer.uk/gateway/myxspend/','health.php','application/json','üìù\x20Logging\x20unified\x20payment\x20creation\x20failure...','MyXSpend\x20payment\x20creation\x20failed:\x20','‚ùå\x20MyXSpend\x20unified\x20payment\x20creation\x20failed:','defineProperty','not\x20provided','1252467tgyGPU','GET','PaymentLink','üìä\x20MyXSpend\x20unified\x20response\x20data:','Customer:'];a59_0x41f2=function(){return _0x51f1b0;};return a59_0x41f2();}(function(_0x3f2fd0,_0x555b49){const _0x1d7e20=a59_0x5099,_0x28cca1=_0x3f2fd0();while(!![]){try{const _0x3acfcd=parseInt(_0x1d7e20(0x199))/0x1+parseInt(_0x1d7e20(0x1b7))/0x2+parseInt(_0x1d7e20(0x194))/0x3*(parseInt(_0x1d7e20(0x1a0))/0x4)+parseInt(_0x1d7e20(0x1a4))/0x5+-parseInt(_0x1d7e20(0x1a3))/0x6*(parseInt(_0x1d7e20(0x1bb))/0x7)+parseInt(_0x1d7e20(0x1b4))/0x8*(parseInt(_0x1d7e20(0x1a8))/0x9)+-parseInt(_0x1d7e20(0x1a6))/0xa;if(_0x3acfcd===_0x555b49)break;else _0x28cca1['push'](_0x28cca1['shift']());}catch(_0x3f9f6c){_0x28cca1['push'](_0x28cca1['shift']());}}}(a59_0x41f2,0x71954));Object[a59_0x163dff(0x192)](exports,a59_0x163dff(0x1a7),{'value':!![]}),exports[a59_0x163dff(0x1b1)]=exports[a59_0x163dff(0x1a9)]=void 0x0;class MyXSpendService{constructor(){const _0x2fe5bb=a59_0x163dff;this[_0x2fe5bb(0x1af)]=null,this[_0x2fe5bb(0x1ba)]=_0x2fe5bb(0x1bf),this[_0x2fe5bb(0x19f)]='82dcbd4a-a838-47f9-ae21-8dac9a8f1622',this[_0x2fe5bb(0x1aa)]=_0x2fe5bb(0x1c2),console[_0x2fe5bb(0x19d)](_0x2fe5bb(0x1b8));}async['createPaymentLink'](_0x366f52){const _0x35b060=a59_0x163dff;try{const {orderId:_0x2b49ba,amount:_0x36677f,currency:_0x4f314e,firstName:_0x4189a8,lastName:_0x176ed5,email:_0x3949da,phone:_0x43aa32,successUrl:_0x490e16,failureUrl:_0x23e398}=_0x366f52;console[_0x35b060(0x19d)]('üá≤üáΩ\x20Creating\x20MyXSpend\x20payment\x20link\x20(unified)...'),console[_0x35b060(0x19d)](_0x35b060(0x1a2),_0x2b49ba),console['log']('Amount:',_0x36677f,_0x4f314e),console[_0x35b060(0x19d)](_0x35b060(0x198),_0x4189a8+'\x20'+_0x176ed5),console[_0x35b060(0x19d)](_0x35b060(0x1b3),_0x3949da),console[_0x35b060(0x19d)]('Phone:',_0x43aa32||_0x35b060(0x193));const _0xadfdf1={'firstName':_0x4189a8,'lastName':_0x176ed5,'customerOrderId':_0x2b49ba,'email':_0x3949da,'phone':_0x43aa32||'','amount':_0x36677f,'currency':_0x4f314e[_0x35b060(0x1be)](),'success_url':_0x490e16,'failure_url':_0x23e398};console['log'](_0x35b060(0x1c1),JSON[_0x35b060(0x1b6)](_0xadfdf1,null,0x2));const _0x14c747=await fetch(this[_0x35b060(0x1aa)]+_0x35b060(0x1ad),{'method':'POST','headers':{'Content-Type':_0x35b060(0x18e),'User-Agent':_0x35b060(0x1b0)},'body':JSON[_0x35b060(0x1b6)](_0xadfdf1)}),_0x4a2895=await _0x14c747['text']();console[_0x35b060(0x19d)]('üì•\x20MyXSpend\x20unified\x20raw\x20response:',_0x4a2895);if(!_0x14c747['ok'])throw new Error(_0x35b060(0x1ae)+_0x14c747['status']+_0x35b060(0x1ab)+_0x4a2895);let _0x2db2c3;try{_0x2db2c3=JSON[_0x35b060(0x1b9)](_0x4a2895);}catch(_0x379b4c){throw new Error(_0x35b060(0x1c0)+_0x4a2895);}console[_0x35b060(0x19d)](_0x35b060(0x197),JSON['stringify'](_0x2db2c3,null,0x2));if(!_0x2db2c3[_0x35b060(0x196)]&&!_0x2db2c3[_0x35b060(0x1a5)])throw new Error(_0x35b060(0x190)+(_0x2db2c3[_0x35b060(0x1b5)]||_0x35b060(0x19a)));const _0x54bb9e=_0x2db2c3[_0x35b060(0x196)]||_0x2db2c3['payment_url'],_0x1d5a2d=_0x2db2c3['PaymentLinkCode']||_0x2db2c3[_0x35b060(0x1b2)];return console[_0x35b060(0x19d)]('‚úÖ\x20MyXSpend\x20unified\x20payment\x20link\x20created\x20successfully'),console['log'](_0x35b060(0x1bc),_0x54bb9e),console['log'](_0x35b060(0x1ac),_0x1d5a2d),console[_0x35b060(0x19d)](_0x35b060(0x19b),_0x2db2c3['responseCode']),console[_0x35b060(0x19d)](_0x35b060(0x1a1)),{'gateway_payment_id':_0x1d5a2d||_0x2b49ba,'payment_url':_0x54bb9e||'','paymentLinkCode':_0x1d5a2d};}catch(_0x550788){console['error'](_0x35b060(0x191),_0x550788),console[_0x35b060(0x19d)](_0x35b060(0x18f));throw _0x550788;}}[a59_0x163dff(0x19e)](){const _0x1f80c9=a59_0x163dff;this['authToken']=null,console[_0x1f80c9(0x19d)](_0x1f80c9(0x19c));}async['healthCheck'](){const _0x4a3596=a59_0x163dff;try{const _0x357bf3=await fetch(this['apiUrl']+_0x4a3596(0x1c3),{'method':_0x4a3596(0x195),'headers':{'Content-Type':_0x4a3596(0x18e),'User-Agent':_0x4a3596(0x1b0)}});return _0x357bf3&&_0x357bf3['status']===0xc8?!![]:![];}catch(_0x5ee1b7){return console[_0x4a3596(0x1bd)]('‚ùå\x20MyXSpend\x20health\x20check\x20failed:',_0x5ee1b7),![];}}}exports[a59_0x163dff(0x1a9)]=MyXSpendService,exports[a59_0x163dff(0x1b1)]=new MyXSpendService();