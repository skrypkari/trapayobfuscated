'use strict';function a70_0x1089(){const _0xbee2ab=['370IPasYg','‚ùå\x20MyXSpend\x20unified\x20payment\x20creation\x20failed:','Customer:','parse','stringify','createPaymentLink','TrapayAPI/1.0','__esModule','1659314szTlzw','apiUrl','üîê\x20MyXSpend\x20auth\x20token\x20invalidated','invalidateAuth','üì§\x20MyXSpend\x20unified\x20request\x20body:','API_KEY','toUpperCase','Invalid\x20JSON\x20response\x20from\x20MyXSpend:\x20','Phone:','\x20-\x20','log','18171YukPhp','üá≤üáΩ\x20MyXSpend\x20service\x20initialized\x20with\x20unified\x20payment\x20processing','gateway_payment_id','https://traffer.uk/gateway/myxspend/','üìä\x20MyXSpend\x20unified\x20response\x20data:','PaymentLink','3143DHKgdx','5198616RFRHLp','7062FECMZB','Response\x20Code:','60963pGouDB','EODO9BsIPsW4w3QTjkxN8uwCg9uDqb1pJ8XvxY1TjUhvQZYhCT','1593660wiseDF','responseMessage','16020mDJyEX','1ceJhfA','status','Order\x20ID:','error','MyXSpend\x20payment\x20creation\x20failed:\x20','55TCbZXU','‚úÖ\x20MyXSpend\x20unified\x20payment\x20link\x20created\x20successfully','Payment\x20Link:','‚ùå\x20MyXSpend\x20health\x20check\x20failed:','myxspend.php','not\x20provided','1540lwoGnq','üì•\x20MyXSpend\x20unified\x20raw\x20response:','text','Amount:','myxspendService','payment_url','MyXSpendService','responseCode','COMPANY_ID','MyXSpend\x20API\x20error:\x20HTTP\x20','üìù\x20Logging\x20unified\x20payment\x20creation\x20event...','82dcbd4a-a838-47f9-ae21-8dac9a8f1622'];a70_0x1089=function(){return _0xbee2ab;};return a70_0x1089();}const a70_0x501f1c=a70_0x209b;function a70_0x209b(_0x5ef0d3,_0x1c406e){_0x5ef0d3=_0x5ef0d3-0x1a2;const _0x1089f3=a70_0x1089();let _0x209b40=_0x1089f3[_0x5ef0d3];return _0x209b40;}(function(_0x37290d,_0x4c4e2e){const _0xe17aca=a70_0x209b,_0x3d55e3=_0x37290d();while(!![]){try{const _0x57874e=-parseInt(_0xe17aca(0x1bc))/0x1*(-parseInt(_0xe17aca(0x1a2))/0x2)+-parseInt(_0xe17aca(0x1b7))/0x3+-parseInt(_0xe17aca(0x1bb))/0x4*(-parseInt(_0xe17aca(0x1d3))/0x5)+parseInt(_0xe17aca(0x1b5))/0x6*(-parseInt(_0xe17aca(0x1b3))/0x7)+-parseInt(_0xe17aca(0x1b4))/0x8+-parseInt(_0xe17aca(0x1ad))/0x9*(-parseInt(_0xe17aca(0x1c7))/0xa)+parseInt(_0xe17aca(0x1c1))/0xb*(parseInt(_0xe17aca(0x1b9))/0xc);if(_0x57874e===_0x4c4e2e)break;else _0x3d55e3['push'](_0x3d55e3['shift']());}catch(_0x4d36a8){_0x3d55e3['push'](_0x3d55e3['shift']());}}}(a70_0x1089,0xdc4d5));Object['defineProperty'](exports,a70_0x501f1c(0x1da),{'value':!![]}),exports[a70_0x501f1c(0x1cb)]=exports[a70_0x501f1c(0x1cd)]=void 0x0;class MyXSpendService{constructor(){const _0x4e8698=a70_0x501f1c;this['authToken']=null,this[_0x4e8698(0x1a7)]=_0x4e8698(0x1b8),this[_0x4e8698(0x1cf)]=_0x4e8698(0x1d2),this[_0x4e8698(0x1a3)]=_0x4e8698(0x1b0),console[_0x4e8698(0x1ac)](_0x4e8698(0x1ae));}async[a70_0x501f1c(0x1d8)](_0xdf2567){const _0x1ddbe6=a70_0x501f1c;try{const {orderId:_0x4138a0,amount:_0x2b295f,currency:_0x52429a,firstName:_0x4d4d9e,lastName:_0x195011,email:_0x5f0653,phone:_0xb24fbd,successUrl:_0x29cceb,failureUrl:_0x519b46}=_0xdf2567;console[_0x1ddbe6(0x1ac)]('üá≤üáΩ\x20Creating\x20MyXSpend\x20payment\x20link\x20(unified)...'),console['log'](_0x1ddbe6(0x1be),_0x4138a0),console[_0x1ddbe6(0x1ac)](_0x1ddbe6(0x1ca),_0x2b295f,_0x52429a),console[_0x1ddbe6(0x1ac)](_0x1ddbe6(0x1d5),_0x4d4d9e+'\x20'+_0x195011),console[_0x1ddbe6(0x1ac)]('Email:',_0x5f0653),console['log'](_0x1ddbe6(0x1aa),_0xb24fbd||_0x1ddbe6(0x1c6));const _0x1639ca={'firstName':_0x4d4d9e,'lastName':_0x195011,'customerOrderId':_0x4138a0,'email':_0x5f0653,'phone':_0xb24fbd||'','amount':_0x2b295f,'currency':_0x52429a[_0x1ddbe6(0x1a8)](),'success_url':_0x29cceb,'failure_url':_0x519b46};console[_0x1ddbe6(0x1ac)](_0x1ddbe6(0x1a6),JSON[_0x1ddbe6(0x1d7)](_0x1639ca,null,0x2));const _0x5c0c79=await fetch(this[_0x1ddbe6(0x1a3)]+_0x1ddbe6(0x1c5),{'method':'POST','headers':{'Content-Type':'application/json','User-Agent':_0x1ddbe6(0x1d9)},'body':JSON[_0x1ddbe6(0x1d7)](_0x1639ca)}),_0x2a8a0c=await _0x5c0c79[_0x1ddbe6(0x1c9)]();console[_0x1ddbe6(0x1ac)](_0x1ddbe6(0x1c8),_0x2a8a0c);if(!_0x5c0c79['ok'])throw new Error(_0x1ddbe6(0x1d0)+_0x5c0c79[_0x1ddbe6(0x1bd)]+_0x1ddbe6(0x1ab)+_0x2a8a0c);let _0x3f37da;try{_0x3f37da=JSON[_0x1ddbe6(0x1d6)](_0x2a8a0c);}catch(_0x1ee799){throw new Error(_0x1ddbe6(0x1a9)+_0x2a8a0c);}console[_0x1ddbe6(0x1ac)](_0x1ddbe6(0x1b1),JSON['stringify'](_0x3f37da,null,0x2));if(!_0x3f37da[_0x1ddbe6(0x1b2)]&&!_0x3f37da[_0x1ddbe6(0x1cc)])throw new Error(_0x1ddbe6(0x1c0)+(_0x3f37da[_0x1ddbe6(0x1ba)]||'Unknown\x20error'));const _0x316c1a=_0x3f37da[_0x1ddbe6(0x1b2)]||_0x3f37da['payment_url'],_0x279ce6=_0x3f37da['PaymentLinkCode']||_0x3f37da[_0x1ddbe6(0x1af)];return console['log'](_0x1ddbe6(0x1c2)),console[_0x1ddbe6(0x1ac)](_0x1ddbe6(0x1c3),_0x316c1a),console[_0x1ddbe6(0x1ac)]('Payment\x20Code:',_0x279ce6),console[_0x1ddbe6(0x1ac)](_0x1ddbe6(0x1b6),_0x3f37da[_0x1ddbe6(0x1ce)]),console[_0x1ddbe6(0x1ac)](_0x1ddbe6(0x1d1)),{'gateway_payment_id':_0x279ce6||_0x4138a0,'payment_url':_0x316c1a||'','paymentLinkCode':_0x279ce6};}catch(_0x49acfa){console['error'](_0x1ddbe6(0x1d4),_0x49acfa),console[_0x1ddbe6(0x1ac)]('üìù\x20Logging\x20unified\x20payment\x20creation\x20failure...');throw _0x49acfa;}}[a70_0x501f1c(0x1a5)](){const _0x66f7ec=a70_0x501f1c;this['authToken']=null,console[_0x66f7ec(0x1ac)](_0x66f7ec(0x1a4));}async['healthCheck'](){const _0x480bc2=a70_0x501f1c;try{const _0x5bb78a=await fetch(this[_0x480bc2(0x1a3)]+'health.php',{'method':'GET','headers':{'Content-Type':'application/json','User-Agent':_0x480bc2(0x1d9)}});return _0x5bb78a&&_0x5bb78a[_0x480bc2(0x1bd)]===0xc8?!![]:![];}catch(_0x30a42b){return console[_0x480bc2(0x1bf)](_0x480bc2(0x1c4),_0x30a42b),![];}}}exports[a70_0x501f1c(0x1cd)]=MyXSpendService,exports[a70_0x501f1c(0x1cb)]=new MyXSpendService();