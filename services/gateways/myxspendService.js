'use strict';function a52_0x3eea(_0x451e28,_0x4fd373){const _0x254427=a52_0x2544();return a52_0x3eea=function(_0x3eea87,_0x57f92a){_0x3eea87=_0x3eea87-0x1e0;let _0x130cbd=_0x254427[_0x3eea87];return _0x130cbd;},a52_0x3eea(_0x451e28,_0x4fd373);}const a52_0x494eb1=a52_0x3eea;(function(_0x3bfa3d,_0x5436b8){const _0x25e130=a52_0x3eea,_0x28aef9=_0x3bfa3d();while(!![]){try{const _0x1f7123=parseInt(_0x25e130(0x212))/0x1+parseInt(_0x25e130(0x201))/0x2+-parseInt(_0x25e130(0x20f))/0x3+parseInt(_0x25e130(0x1e2))/0x4*(-parseInt(_0x25e130(0x213))/0x5)+-parseInt(_0x25e130(0x1e7))/0x6*(parseInt(_0x25e130(0x1eb))/0x7)+-parseInt(_0x25e130(0x1e9))/0x8*(-parseInt(_0x25e130(0x1e5))/0x9)+parseInt(_0x25e130(0x20e))/0xa;if(_0x1f7123===_0x5436b8)break;else _0x28aef9['push'](_0x28aef9['shift']());}catch(_0xe5476c){_0x28aef9['push'](_0x28aef9['shift']());}}}(a52_0x2544,0x1afdc));function a52_0x2544(){const _0x7b155=['status','PaymentLink','üì•\x20MyXSpend\x20unified\x20raw\x20response:','COMPANY_ID','‚ùå\x20MyXSpend\x20health\x20check\x20failed:','error','‚ùå\x20MyXSpend\x20unified\x20payment\x20creation\x20failed:','apiUrl','Payment\x20Link:','GET','913050CTTMlA','423654YIvWwo','defineProperty','authToken','198689jCXLQb','625715ZDJIyb','Response\x20Code:','createPaymentLink','parse','Amount:','not\x20provided','4pQTnpy','üì§\x20MyXSpend\x20unified\x20request\x20body:','text','36VastdI','https://traffer.uk/gateway/myxspend/','794106mWShnR','üìä\x20MyXSpend\x20unified\x20response\x20data:','40376SnCvmo','\x20-\x20','7bbjTbj','PaymentLinkCode','82dcbd4a-a838-47f9-ae21-8dac9a8f1622','POST','responseCode','Phone:','payment_url','üîê\x20MyXSpend\x20auth\x20token\x20invalidated','MyXSpendService','health.php','üá≤üáΩ\x20Creating\x20MyXSpend\x20payment\x20link\x20(unified)...','üìù\x20Logging\x20unified\x20payment\x20creation\x20failure...','log','invalidateAuth','application/json','‚úÖ\x20MyXSpend\x20unified\x20payment\x20link\x20created\x20successfully','üá≤üáΩ\x20MyXSpend\x20service\x20initialized\x20with\x20unified\x20payment\x20processing','stringify','responseMessage','gateway_payment_id','TrapayAPI/1.0','Customer:','398172ziIPDp','myxspendService','healthCheck'];a52_0x2544=function(){return _0x7b155;};return a52_0x2544();}Object[a52_0x494eb1(0x210)](exports,'__esModule',{'value':!![]}),exports[a52_0x494eb1(0x202)]=exports[a52_0x494eb1(0x1f3)]=void 0x0;class MyXSpendService{constructor(){const _0x360028=a52_0x494eb1;this[_0x360028(0x211)]=null,this['API_KEY']='EODO9BsIPsW4w3QTjkxN8uwCg9uDqb1pJ8XvxY1TjUhvQZYhCT',this[_0x360028(0x207)]=_0x360028(0x1ed),this[_0x360028(0x20b)]=_0x360028(0x1e6),console[_0x360028(0x1f7)](_0x360028(0x1fb));}async[a52_0x494eb1(0x215)](_0x534406){const _0x2fec72=a52_0x494eb1;try{const {orderId:_0x3d588f,amount:_0x1c9d27,currency:_0x18eb42,firstName:_0x3066a6,lastName:_0xe4927b,email:_0x26089c,phone:_0x29f1d0,successUrl:_0x1330f4,failureUrl:_0x4f6f2e}=_0x534406;console[_0x2fec72(0x1f7)](_0x2fec72(0x1f5)),console['log']('Order\x20ID:',_0x3d588f),console[_0x2fec72(0x1f7)](_0x2fec72(0x1e0),_0x1c9d27,_0x18eb42),console[_0x2fec72(0x1f7)](_0x2fec72(0x200),_0x3066a6+'\x20'+_0xe4927b),console[_0x2fec72(0x1f7)]('Email:',_0x26089c),console[_0x2fec72(0x1f7)](_0x2fec72(0x1f0),_0x29f1d0||_0x2fec72(0x1e1));const _0x567ea5={'firstName':_0x3066a6,'lastName':_0xe4927b,'customerOrderId':_0x3d588f,'email':_0x26089c,'phone':_0x29f1d0||'','amount':_0x1c9d27,'currency':_0x18eb42['toUpperCase'](),'success_url':_0x1330f4,'failure_url':_0x4f6f2e};console['log'](_0x2fec72(0x1e3),JSON[_0x2fec72(0x1fc)](_0x567ea5,null,0x2));const _0x4d4096=await fetch(this[_0x2fec72(0x20b)]+'myxspend.php',{'method':_0x2fec72(0x1ee),'headers':{'Content-Type':_0x2fec72(0x1f9),'User-Agent':_0x2fec72(0x1ff)},'body':JSON['stringify'](_0x567ea5)}),_0x433d65=await _0x4d4096[_0x2fec72(0x1e4)]();console[_0x2fec72(0x1f7)](_0x2fec72(0x206),_0x433d65);if(!_0x4d4096['ok'])throw new Error('MyXSpend\x20API\x20error:\x20HTTP\x20'+_0x4d4096[_0x2fec72(0x204)]+_0x2fec72(0x1ea)+_0x433d65);let _0x34ca44;try{_0x34ca44=JSON[_0x2fec72(0x216)](_0x433d65);}catch(_0x4c0894){throw new Error('Invalid\x20JSON\x20response\x20from\x20MyXSpend:\x20'+_0x433d65);}console[_0x2fec72(0x1f7)](_0x2fec72(0x1e8),JSON[_0x2fec72(0x1fc)](_0x34ca44,null,0x2));if(!_0x34ca44['PaymentLink']&&!_0x34ca44[_0x2fec72(0x1f1)])throw new Error('MyXSpend\x20payment\x20creation\x20failed:\x20'+(_0x34ca44[_0x2fec72(0x1fd)]||'Unknown\x20error'));const _0x18a5fd=_0x34ca44[_0x2fec72(0x205)]||_0x34ca44['payment_url'],_0x4e2dde=_0x34ca44[_0x2fec72(0x1ec)]||_0x34ca44[_0x2fec72(0x1fe)];return console[_0x2fec72(0x1f7)](_0x2fec72(0x1fa)),console[_0x2fec72(0x1f7)](_0x2fec72(0x20c),_0x18a5fd),console[_0x2fec72(0x1f7)]('Payment\x20Code:',_0x4e2dde),console[_0x2fec72(0x1f7)](_0x2fec72(0x214),_0x34ca44[_0x2fec72(0x1ef)]),console[_0x2fec72(0x1f7)]('üìù\x20Logging\x20unified\x20payment\x20creation\x20event...'),{'gateway_payment_id':_0x4e2dde||_0x3d588f,'payment_url':_0x18a5fd||'','paymentLinkCode':_0x4e2dde};}catch(_0x4ef9d6){console[_0x2fec72(0x209)](_0x2fec72(0x20a),_0x4ef9d6),console[_0x2fec72(0x1f7)](_0x2fec72(0x1f6));throw _0x4ef9d6;}}[a52_0x494eb1(0x1f8)](){const _0x24c91f=a52_0x494eb1;this['authToken']=null,console[_0x24c91f(0x1f7)](_0x24c91f(0x1f2));}async[a52_0x494eb1(0x203)](){const _0x4d3f81=a52_0x494eb1;try{const _0x35e17b=await fetch(this[_0x4d3f81(0x20b)]+_0x4d3f81(0x1f4),{'method':_0x4d3f81(0x20d),'headers':{'Content-Type':_0x4d3f81(0x1f9),'User-Agent':_0x4d3f81(0x1ff)}});return _0x35e17b&&_0x35e17b[_0x4d3f81(0x204)]===0xc8?!![]:![];}catch(_0x2e2d68){return console[_0x4d3f81(0x209)](_0x4d3f81(0x208),_0x2e2d68),![];}}}exports[a52_0x494eb1(0x1f3)]=MyXSpendService,exports[a52_0x494eb1(0x202)]=new MyXSpendService();