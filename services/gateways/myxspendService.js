'use strict';const a59_0x1dfcaf=a59_0x400f;(function(_0x43f166,_0x4f4cce){const _0x28de1c=a59_0x400f,_0x5382cf=_0x43f166();while(!![]){try{const _0x4c8097=-parseInt(_0x28de1c(0x1f7))/0x1*(-parseInt(_0x28de1c(0x1f1))/0x2)+-parseInt(_0x28de1c(0x1e4))/0x3+parseInt(_0x28de1c(0x1e2))/0x4*(-parseInt(_0x28de1c(0x1eb))/0x5)+parseInt(_0x28de1c(0x1e8))/0x6+parseInt(_0x28de1c(0x1ef))/0x7*(-parseInt(_0x28de1c(0x1f2))/0x8)+-parseInt(_0x28de1c(0x1d5))/0x9*(-parseInt(_0x28de1c(0x1e6))/0xa)+-parseInt(_0x28de1c(0x1e7))/0xb*(parseInt(_0x28de1c(0x1dc))/0xc);if(_0x4c8097===_0x4f4cce)break;else _0x5382cf['push'](_0x5382cf['shift']());}catch(_0x3132d6){_0x5382cf['push'](_0x5382cf['shift']());}}}(a59_0x4afd,0xde8c2));function a59_0x400f(_0xd7a228,_0x53e897){_0xd7a228=_0xd7a228-0x1ce;const _0x4afd01=a59_0x4afd();let _0x400f70=_0x4afd01[_0xd7a228];return _0x400f70;}Object[a59_0x1dfcaf(0x1db)](exports,a59_0x1dfcaf(0x201),{'value':!![]}),exports[a59_0x1dfcaf(0x1cf)]=exports[a59_0x1dfcaf(0x1d8)]=void 0x0;class MyXSpendService{constructor(){const _0x568c20=a59_0x1dfcaf;this[_0x568c20(0x1de)]=null,this['API_KEY']=_0x568c20(0x1f9),this['COMPANY_ID']=_0x568c20(0x1df),this['apiUrl']=_0x568c20(0x1da),console[_0x568c20(0x1f6)]('üá≤üáΩ\x20MyXSpend\x20service\x20initialized\x20with\x20unified\x20payment\x20processing');}async[a59_0x1dfcaf(0x1e1)](_0x2e9641){const _0x2d2b66=a59_0x1dfcaf;try{const {orderId:_0x5e3624,amount:_0x5b4046,currency:_0x8bcc98,firstName:_0x5dd755,lastName:_0x417d74,email:_0x35b5dd,phone:_0x1663c2,successUrl:_0x20920e,failureUrl:_0x65d30a}=_0x2e9641;console[_0x2d2b66(0x1f6)]('üá≤üáΩ\x20Creating\x20MyXSpend\x20payment\x20link\x20(unified)...'),console[_0x2d2b66(0x1f6)](_0x2d2b66(0x1fb),_0x5e3624),console[_0x2d2b66(0x1f6)](_0x2d2b66(0x1d7),_0x5b4046,_0x8bcc98),console[_0x2d2b66(0x1f6)](_0x2d2b66(0x1fe),_0x5dd755+'\x20'+_0x417d74),console[_0x2d2b66(0x1f6)]('Email:',_0x35b5dd),console[_0x2d2b66(0x1f6)]('Phone:',_0x1663c2||_0x2d2b66(0x1fa));const _0x38fa18={'firstName':_0x5dd755,'lastName':_0x417d74,'customerOrderId':_0x5e3624,'email':_0x35b5dd,'phone':_0x1663c2||'','amount':_0x5b4046,'currency':_0x8bcc98[_0x2d2b66(0x204)](),'success_url':_0x20920e,'failure_url':_0x65d30a};console[_0x2d2b66(0x1f6)](_0x2d2b66(0x1d9),JSON['stringify'](_0x38fa18,null,0x2));const _0x280ad7=await fetch(this['apiUrl']+'myxspend.php',{'method':_0x2d2b66(0x1ce),'headers':{'Content-Type':_0x2d2b66(0x1fc),'User-Agent':_0x2d2b66(0x203)},'body':JSON['stringify'](_0x38fa18)}),_0x2f088c=await _0x280ad7[_0x2d2b66(0x200)]();console[_0x2d2b66(0x1f6)](_0x2d2b66(0x1d4),_0x2f088c);if(!_0x280ad7['ok'])throw new Error('MyXSpend\x20API\x20error:\x20HTTP\x20'+_0x280ad7[_0x2d2b66(0x1ea)]+_0x2d2b66(0x1d6)+_0x2f088c);let _0x3ce0e6;try{_0x3ce0e6=JSON[_0x2d2b66(0x1f0)](_0x2f088c);}catch(_0x2c6021){throw new Error(_0x2d2b66(0x1f5)+_0x2f088c);}console[_0x2d2b66(0x1f6)](_0x2d2b66(0x1dd),JSON['stringify'](_0x3ce0e6,null,0x2));if(!_0x3ce0e6[_0x2d2b66(0x1d2)]&&!_0x3ce0e6[_0x2d2b66(0x1f3)])throw new Error(_0x2d2b66(0x1e3)+(_0x3ce0e6[_0x2d2b66(0x202)]||'Unknown\x20error'));const _0x20163b=_0x3ce0e6[_0x2d2b66(0x1d2)]||_0x3ce0e6['payment_url'],_0x389c7e=_0x3ce0e6[_0x2d2b66(0x1ee)]||_0x3ce0e6[_0x2d2b66(0x1ed)];return console[_0x2d2b66(0x1f6)]('‚úÖ\x20MyXSpend\x20unified\x20payment\x20link\x20created\x20successfully'),console[_0x2d2b66(0x1f6)](_0x2d2b66(0x1f4),_0x20163b),console[_0x2d2b66(0x1f6)]('Payment\x20Code:',_0x389c7e),console[_0x2d2b66(0x1f6)](_0x2d2b66(0x1d0),_0x3ce0e6[_0x2d2b66(0x1ff)]),console[_0x2d2b66(0x1f6)]('üìù\x20Logging\x20unified\x20payment\x20creation\x20event...'),{'gateway_payment_id':_0x389c7e||_0x5e3624,'payment_url':_0x20163b||'','paymentLinkCode':_0x389c7e};}catch(_0x1fed7c){console[_0x2d2b66(0x1f8)](_0x2d2b66(0x1e0),_0x1fed7c),console['log'](_0x2d2b66(0x1fd));throw _0x1fed7c;}}['invalidateAuth'](){const _0x56b8b4=a59_0x1dfcaf;this[_0x56b8b4(0x1de)]=null,console[_0x56b8b4(0x1f6)](_0x56b8b4(0x1ec));}async[a59_0x1dfcaf(0x1d1)](){const _0x1c3896=a59_0x1dfcaf;try{const _0x6ec9e2=await fetch(this[_0x1c3896(0x1e9)]+_0x1c3896(0x1d3),{'method':'GET','headers':{'Content-Type':_0x1c3896(0x1fc),'User-Agent':_0x1c3896(0x203)}});return _0x6ec9e2&&_0x6ec9e2[_0x1c3896(0x1ea)]===0xc8?!![]:![];}catch(_0x20b87d){return console[_0x1c3896(0x1f8)](_0x1c3896(0x1e5),_0x20b87d),![];}}}function a59_0x4afd(){const _0x501dc8=['__esModule','responseMessage','TrapayAPI/1.0','toUpperCase','POST','myxspendService','Response\x20Code:','healthCheck','PaymentLink','health.php','üì•\x20MyXSpend\x20unified\x20raw\x20response:','12230343QliCww','\x20-\x20','Amount:','MyXSpendService','üì§\x20MyXSpend\x20unified\x20request\x20body:','https://traffer.uk/gateway/myxspend/','defineProperty','11962284UhIpRM','üìä\x20MyXSpend\x20unified\x20response\x20data:','authToken','82dcbd4a-a838-47f9-ae21-8dac9a8f1622','‚ùå\x20MyXSpend\x20unified\x20payment\x20creation\x20failed:','createPaymentLink','1089484QrThwF','MyXSpend\x20payment\x20creation\x20failed:\x20','1897962Sutgel','‚ùå\x20MyXSpend\x20health\x20check\x20failed:','10YpbmCB','11BUGNOI','7249884DmjdOJ','apiUrl','status','25xuJbVt','üîê\x20MyXSpend\x20auth\x20token\x20invalidated','gateway_payment_id','PaymentLinkCode','1498yEFDpf','parse','6CJArfy','5056flaAwa','payment_url','Payment\x20Link:','Invalid\x20JSON\x20response\x20from\x20MyXSpend:\x20','log','490309IZdYiD','error','EODO9BsIPsW4w3QTjkxN8uwCg9uDqb1pJ8XvxY1TjUhvQZYhCT','not\x20provided','Order\x20ID:','application/json','üìù\x20Logging\x20unified\x20payment\x20creation\x20failure...','Customer:','responseCode','text'];a59_0x4afd=function(){return _0x501dc8;};return a59_0x4afd();}exports['MyXSpendService']=MyXSpendService,exports['myxspendService']=new MyXSpendService();