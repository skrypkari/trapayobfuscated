'use strict';const a70_0x262889=a70_0x2c6f;function a70_0x1680(){const _0x18422d=['EODO9BsIPsW4w3QTjkxN8uwCg9uDqb1pJ8XvxY1TjUhvQZYhCT','responseMessage','19013fKwYLV','373974Cnsvsy','MyXSpendService','apiUrl','parse','Payment\x20Code:','API_KEY','2415581KNGJOX','MyXSpend\x20API\x20error:\x20HTTP\x20','stringify','status','GET','COMPANY_ID','MyXSpend\x20payment\x20creation\x20failed:\x20','__esModule','20BrfxPP','health.php','myxspendService','43870kEkOkQ','\x20-\x20','responseCode','Order\x20ID:','‚úÖ\x20MyXSpend\x20unified\x20payment\x20link\x20created\x20successfully','invalidateAuth','text','9bMeNbI','46EMmJcD','PaymentLink','6748032PsYrjb','üîê\x20MyXSpend\x20auth\x20token\x20invalidated','üá≤üáΩ\x20Creating\x20MyXSpend\x20payment\x20link\x20(unified)...','payment_url','log','Payment\x20Link:','Customer:','POST','PaymentLinkCode','737SIlCvO','82dcbd4a-a838-47f9-ae21-8dac9a8f1622','21aRxZjn','error','application/json','üá≤üáΩ\x20MyXSpend\x20service\x20initialized\x20with\x20unified\x20payment\x20processing','‚ùå\x20MyXSpend\x20unified\x20payment\x20creation\x20failed:','TrapayAPI/1.0','üì§\x20MyXSpend\x20unified\x20request\x20body:','authToken','üìù\x20Logging\x20unified\x20payment\x20creation\x20failure...','üì•\x20MyXSpend\x20unified\x20raw\x20response:','101236EMDXLt','Response\x20Code:','myxspend.php','Email:','‚ùå\x20MyXSpend\x20health\x20check\x20failed:','üìä\x20MyXSpend\x20unified\x20response\x20data:','not\x20provided','2925192BfZLWU','üìù\x20Logging\x20unified\x20payment\x20creation\x20event...','toUpperCase','https://traffer.uk/gateway/myxspend/','gateway_payment_id'];a70_0x1680=function(){return _0x18422d;};return a70_0x1680();}(function(_0x4353ce,_0xb75200){const _0x447a84=a70_0x2c6f,_0x4c1922=_0x4353ce();while(!![]){try{const _0x7f3324=parseInt(_0x447a84(0x12a))/0x1*(parseInt(_0x447a84(0x105))/0x2)+parseInt(_0x447a84(0x112))/0x3*(parseInt(_0x447a84(0x11c))/0x4)+-parseInt(_0x447a84(0x139))/0x5*(parseInt(_0x447a84(0x12b))/0x6)+parseInt(_0x447a84(0x131))/0x7+-parseInt(_0x447a84(0x123))/0x8*(-parseInt(_0x447a84(0x104))/0x9)+parseInt(_0x447a84(0xfd))/0xa*(-parseInt(_0x447a84(0x110))/0xb)+-parseInt(_0x447a84(0x107))/0xc;if(_0x7f3324===_0xb75200)break;else _0x4c1922['push'](_0x4c1922['shift']());}catch(_0x15370d){_0x4c1922['push'](_0x4c1922['shift']());}}}(a70_0x1680,0x359dd));function a70_0x2c6f(_0x30d7a5,_0x37069e){_0x30d7a5=_0x30d7a5-0xfd;const _0x16809d=a70_0x1680();let _0x2c6fc3=_0x16809d[_0x30d7a5];return _0x2c6fc3;}Object['defineProperty'](exports,a70_0x262889(0x138),{'value':!![]}),exports['myxspendService']=exports[a70_0x262889(0x12c)]=void 0x0;class MyXSpendService{constructor(){const _0x549e10=a70_0x262889;this['authToken']=null,this[_0x549e10(0x130)]=_0x549e10(0x128),this[_0x549e10(0x136)]=_0x549e10(0x111),this[_0x549e10(0x12d)]=_0x549e10(0x126),console[_0x549e10(0x10b)](_0x549e10(0x115));}async['createPaymentLink'](_0x36b232){const _0x33c6eb=a70_0x262889;try{const {orderId:_0x4f77d1,amount:_0x5b9d90,currency:_0x55703e,firstName:_0x2eb05e,lastName:_0x512103,email:_0x544199,phone:_0x4a3eb8,successUrl:_0x3c54de,failureUrl:_0xc0382}=_0x36b232;console['log'](_0x33c6eb(0x109)),console[_0x33c6eb(0x10b)](_0x33c6eb(0x100),_0x4f77d1),console['log']('Amount:',_0x5b9d90,_0x55703e),console[_0x33c6eb(0x10b)](_0x33c6eb(0x10d),_0x2eb05e+'\x20'+_0x512103),console[_0x33c6eb(0x10b)](_0x33c6eb(0x11f),_0x544199),console['log']('Phone:',_0x4a3eb8||_0x33c6eb(0x122));const _0x325d41={'firstName':_0x2eb05e,'lastName':_0x512103,'customerOrderId':_0x4f77d1,'email':_0x544199,'phone':_0x4a3eb8||'','amount':_0x5b9d90,'currency':_0x55703e[_0x33c6eb(0x125)](),'success_url':_0x3c54de,'failure_url':_0xc0382};console[_0x33c6eb(0x10b)](_0x33c6eb(0x118),JSON[_0x33c6eb(0x133)](_0x325d41,null,0x2));const _0x3a3e53=await fetch(this[_0x33c6eb(0x12d)]+_0x33c6eb(0x11e),{'method':_0x33c6eb(0x10e),'headers':{'Content-Type':_0x33c6eb(0x114),'User-Agent':_0x33c6eb(0x117)},'body':JSON[_0x33c6eb(0x133)](_0x325d41)}),_0x36c42d=await _0x3a3e53[_0x33c6eb(0x103)]();console['log'](_0x33c6eb(0x11b),_0x36c42d);if(!_0x3a3e53['ok'])throw new Error(_0x33c6eb(0x132)+_0x3a3e53[_0x33c6eb(0x134)]+_0x33c6eb(0xfe)+_0x36c42d);let _0x15b2d3;try{_0x15b2d3=JSON[_0x33c6eb(0x12e)](_0x36c42d);}catch(_0x1a0c64){throw new Error('Invalid\x20JSON\x20response\x20from\x20MyXSpend:\x20'+_0x36c42d);}console[_0x33c6eb(0x10b)](_0x33c6eb(0x121),JSON[_0x33c6eb(0x133)](_0x15b2d3,null,0x2));if(!_0x15b2d3['PaymentLink']&&!_0x15b2d3[_0x33c6eb(0x10a)])throw new Error(_0x33c6eb(0x137)+(_0x15b2d3[_0x33c6eb(0x129)]||'Unknown\x20error'));const _0x37ded8=_0x15b2d3[_0x33c6eb(0x106)]||_0x15b2d3['payment_url'],_0x3d53e2=_0x15b2d3[_0x33c6eb(0x10f)]||_0x15b2d3[_0x33c6eb(0x127)];return console['log'](_0x33c6eb(0x101)),console['log'](_0x33c6eb(0x10c),_0x37ded8),console['log'](_0x33c6eb(0x12f),_0x3d53e2),console[_0x33c6eb(0x10b)](_0x33c6eb(0x11d),_0x15b2d3[_0x33c6eb(0xff)]),console['log'](_0x33c6eb(0x124)),{'gateway_payment_id':_0x3d53e2||_0x4f77d1,'payment_url':_0x37ded8||'','paymentLinkCode':_0x3d53e2};}catch(_0x18819b){console[_0x33c6eb(0x113)](_0x33c6eb(0x116),_0x18819b),console[_0x33c6eb(0x10b)](_0x33c6eb(0x11a));throw _0x18819b;}}[a70_0x262889(0x102)](){const _0x42e42f=a70_0x262889;this[_0x42e42f(0x119)]=null,console[_0x42e42f(0x10b)](_0x42e42f(0x108));}async['healthCheck'](){const _0x3a74fd=a70_0x262889;try{const _0x4e7a51=await fetch(this[_0x3a74fd(0x12d)]+_0x3a74fd(0x13a),{'method':_0x3a74fd(0x135),'headers':{'Content-Type':_0x3a74fd(0x114),'User-Agent':_0x3a74fd(0x117)}});return _0x4e7a51&&_0x4e7a51['status']===0xc8?!![]:![];}catch(_0x45a08f){return console[_0x3a74fd(0x113)](_0x3a74fd(0x120),_0x45a08f),![];}}}exports[a70_0x262889(0x12c)]=MyXSpendService,exports[a70_0x262889(0x13b)]=new MyXSpendService();