'use strict';const a47_0x1512df=a47_0x136c;(function(_0x49c9d8,_0x574432){const _0x167a87=a47_0x136c,_0x5a5fbf=_0x49c9d8();while(!![]){try{const _0x81fc7f=parseInt(_0x167a87(0xfa))/0x1+-parseInt(_0x167a87(0xfb))/0x2+-parseInt(_0x167a87(0xe6))/0x3+-parseInt(_0x167a87(0xf8))/0x4*(parseInt(_0x167a87(0xed))/0x5)+parseInt(_0x167a87(0xdc))/0x6+-parseInt(_0x167a87(0xef))/0x7*(-parseInt(_0x167a87(0x108))/0x8)+parseInt(_0x167a87(0x10c))/0x9;if(_0x81fc7f===_0x574432)break;else _0x5a5fbf['push'](_0x5a5fbf['shift']());}catch(_0x41ef9a){_0x5a5fbf['push'](_0x5a5fbf['shift']());}}}(a47_0x34d8,0x63595));function a47_0x136c(_0x46959b,_0x3bb5d0){const _0x34d8e1=a47_0x34d8();return a47_0x136c=function(_0x136ce9,_0x200a62){_0x136ce9=_0x136ce9-0xd7;let _0x16cf33=_0x34d8e1[_0x136ce9];return _0x16cf33;},a47_0x136c(_0x46959b,_0x3bb5d0);}function a47_0x34d8(){const _0x24d539=['Unknown\x20error','apiUrl','MyXSpendService','\x20-\x20','API_KEY','COMPANY_ID','gateway_payment_id','POST','PaymentLink','80tgUgPZ','defineProperty','Order\x20ID:','createPaymentLink','4273110LNCBxR','log','error','MyXSpend\x20API\x20error:\x20HTTP\x20','üá≤üáΩ\x20Creating\x20MyXSpend\x20payment\x20link\x20(unified)...','authToken','application/json','373428zaYVck','Customer:','stringify','https://traffer.uk/gateway/myxspend/','responseMessage','myxspendService','Phone:','text','üìä\x20MyXSpend\x20unified\x20response\x20data:','Email:','849372RKOPXf','GET','üì•\x20MyXSpend\x20unified\x20raw\x20response:','üì§\x20MyXSpend\x20unified\x20request\x20body:','‚ùå\x20MyXSpend\x20health\x20check\x20failed:','EODO9BsIPsW4w3QTjkxN8uwCg9uDqb1pJ8XvxY1TjUhvQZYhCT','Amount:','395VhRKDd','üîê\x20MyXSpend\x20auth\x20token\x20invalidated','561477dZCqhu','toUpperCase','‚úÖ\x20MyXSpend\x20unified\x20payment\x20link\x20created\x20successfully','responseCode','MyXSpend\x20payment\x20creation\x20failed:\x20','TrapayAPI/1.0','PaymentLinkCode','Payment\x20Link:','health.php','40264HqQdcv','parse','176982pTzcEN','61698xQKWsX','payment_url','not\x20provided','Invalid\x20JSON\x20response\x20from\x20MyXSpend:\x20'];a47_0x34d8=function(){return _0x24d539;};return a47_0x34d8();}Object[a47_0x1512df(0x109)](exports,'__esModule',{'value':!![]}),exports[a47_0x1512df(0xe1)]=exports[a47_0x1512df(0x101)]=void 0x0;class MyXSpendService{constructor(){const _0x2544f3=a47_0x1512df;this[_0x2544f3(0xda)]=null,this[_0x2544f3(0x103)]=_0x2544f3(0xeb),this[_0x2544f3(0x104)]='82dcbd4a-a838-47f9-ae21-8dac9a8f1622',this[_0x2544f3(0x100)]=_0x2544f3(0xdf),console[_0x2544f3(0x10d)]('üá≤üáΩ\x20MyXSpend\x20service\x20initialized\x20with\x20unified\x20payment\x20processing');}async[a47_0x1512df(0x10b)](_0x35137e){const _0x56ab9a=a47_0x1512df;try{const {orderId:_0x249ba0,amount:_0x2c6a0d,currency:_0x1a419b,firstName:_0x2476b1,lastName:_0x483d97,email:_0x85063a,phone:_0x4bd97e,successUrl:_0x45a5de,failureUrl:_0x393964}=_0x35137e;console['log'](_0x56ab9a(0xd9)),console['log'](_0x56ab9a(0x10a),_0x249ba0),console[_0x56ab9a(0x10d)](_0x56ab9a(0xec),_0x2c6a0d,_0x1a419b),console['log'](_0x56ab9a(0xdd),_0x2476b1+'\x20'+_0x483d97),console['log'](_0x56ab9a(0xe5),_0x85063a),console[_0x56ab9a(0x10d)](_0x56ab9a(0xe2),_0x4bd97e||_0x56ab9a(0xfd));const _0x43bae0={'firstName':_0x2476b1,'lastName':_0x483d97,'customerOrderId':_0x249ba0,'email':_0x85063a,'phone':_0x4bd97e||'','amount':_0x2c6a0d,'currency':_0x1a419b[_0x56ab9a(0xf0)](),'success_url':_0x45a5de,'failure_url':_0x393964};console[_0x56ab9a(0x10d)](_0x56ab9a(0xe9),JSON[_0x56ab9a(0xde)](_0x43bae0,null,0x2));const _0x1ecfaf=await fetch(this[_0x56ab9a(0x100)]+'myxspend.php',{'method':_0x56ab9a(0x106),'headers':{'Content-Type':_0x56ab9a(0xdb),'User-Agent':_0x56ab9a(0xf4)},'body':JSON['stringify'](_0x43bae0)}),_0x3ceadf=await _0x1ecfaf[_0x56ab9a(0xe3)]();console[_0x56ab9a(0x10d)](_0x56ab9a(0xe8),_0x3ceadf);if(!_0x1ecfaf['ok'])throw new Error(_0x56ab9a(0xd8)+_0x1ecfaf['status']+_0x56ab9a(0x102)+_0x3ceadf);let _0x29d732;try{_0x29d732=JSON[_0x56ab9a(0xf9)](_0x3ceadf);}catch(_0x5b1973){throw new Error(_0x56ab9a(0xfe)+_0x3ceadf);}console[_0x56ab9a(0x10d)](_0x56ab9a(0xe4),JSON[_0x56ab9a(0xde)](_0x29d732,null,0x2));if(!_0x29d732[_0x56ab9a(0x107)]&&!_0x29d732[_0x56ab9a(0xfc)])throw new Error(_0x56ab9a(0xf3)+(_0x29d732[_0x56ab9a(0xe0)]||_0x56ab9a(0xff)));const _0x2bf3c5=_0x29d732[_0x56ab9a(0x107)]||_0x29d732[_0x56ab9a(0xfc)],_0x1512e7=_0x29d732[_0x56ab9a(0xf5)]||_0x29d732[_0x56ab9a(0x105)];return console[_0x56ab9a(0x10d)](_0x56ab9a(0xf1)),console[_0x56ab9a(0x10d)](_0x56ab9a(0xf6),_0x2bf3c5),console[_0x56ab9a(0x10d)]('Payment\x20Code:',_0x1512e7),console['log']('Response\x20Code:',_0x29d732[_0x56ab9a(0xf2)]),console['log']('üìù\x20Logging\x20unified\x20payment\x20creation\x20event...'),{'gateway_payment_id':_0x1512e7||_0x249ba0,'payment_url':_0x2bf3c5||'','paymentLinkCode':_0x1512e7};}catch(_0x15e6cf){console['error']('‚ùå\x20MyXSpend\x20unified\x20payment\x20creation\x20failed:',_0x15e6cf),console[_0x56ab9a(0x10d)]('üìù\x20Logging\x20unified\x20payment\x20creation\x20failure...');throw _0x15e6cf;}}['invalidateAuth'](){const _0x4b1770=a47_0x1512df;this[_0x4b1770(0xda)]=null,console[_0x4b1770(0x10d)](_0x4b1770(0xee));}async['healthCheck'](){const _0x1d1fc1=a47_0x1512df;try{const _0x2be1c0=await fetch(this['apiUrl']+_0x1d1fc1(0xf7),{'method':_0x1d1fc1(0xe7),'headers':{'Content-Type':_0x1d1fc1(0xdb),'User-Agent':'TrapayAPI/1.0'}});return _0x2be1c0&&_0x2be1c0['status']===0xc8?!![]:![];}catch(_0x59c001){return console[_0x1d1fc1(0xd7)](_0x1d1fc1(0xea),_0x59c001),![];}}}exports['MyXSpendService']=MyXSpendService,exports[a47_0x1512df(0xe1)]=new MyXSpendService();