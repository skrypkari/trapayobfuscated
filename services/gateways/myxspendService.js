'use strict';const a46_0x45aa82=a46_0x448a;(function(_0x195c14,_0x2bd676){const _0x5b7bf5=a46_0x448a,_0x34b177=_0x195c14();while(!![]){try{const _0x300ade=-parseInt(_0x5b7bf5(0x18d))/0x1*(-parseInt(_0x5b7bf5(0x1b4))/0x2)+parseInt(_0x5b7bf5(0x196))/0x3+-parseInt(_0x5b7bf5(0x178))/0x4+-parseInt(_0x5b7bf5(0x17f))/0x5*(parseInt(_0x5b7bf5(0x19e))/0x6)+parseInt(_0x5b7bf5(0x1a7))/0x7*(parseInt(_0x5b7bf5(0x198))/0x8)+-parseInt(_0x5b7bf5(0x1ad))/0x9*(parseInt(_0x5b7bf5(0x1a3))/0xa)+parseInt(_0x5b7bf5(0x197))/0xb;if(_0x300ade===_0x2bd676)break;else _0x34b177['push'](_0x34b177['shift']());}catch(_0x2d13b1){_0x34b177['push'](_0x34b177['shift']());}}}(a46_0x4d13,0xdb120));function a46_0x4d13(){const _0x3d4807=['authenticate','Payment\x20Code:','auth.php','parse','invalidateAuth','payment.php','Unknown\x20error','184879xpYHdw','82dcbd4a-a838-47f9-ae21-8dac9a8f1622','https://traffer.uk/gateway/myxspend/','status','üîê\x20Authenticating\x20with\x20MyXSpend...','authToken','log','Payment\x20Link:','stringify','1455153FuZkkJ','13971804FiefkV','2503416hKFvxM','toUpperCase','myxspendService','defineProperty','error','üîê\x20MyXSpend\x20auth\x20token\x20invalidated','566778CwMzjz','COMPANY_ID','Amount:','Account\x20ID:','Roles:','10asZjYx','responseCode','üì§\x20MyXSpend\x20request\x20body:','TrapayAPI/1.0','14UbUtas','PaymentLink','‚ùå\x20MyXSpend\x20health\x20check\x20failed:','MyXSpend\x20auth\x20failed:\x20HTTP\x20','MYXSPEND_EMAIL','API_KEY','6521265JjZhQj','json','createPaymentLink','MyXSpend\x20authentication\x20failed:\x20','MyXSpend\x20payment\x20creation\x20failed:\x20','Email:','Response\x20Code:','4wwFpvU','üì•\x20MyXSpend\x20raw\x20response:','üá≤üáΩ\x20Creating\x20MyXSpend\x20payment\x20link...','üá≤üáΩ\x20MyXSpend\x20service\x20initialized\x20with\x20white\x20domain\x20proxy','Invalid\x20JSON\x20response\x20from\x20MyXSpend:\x20','PaymentLinkCode','healthCheck','env','MyXSpend\x20API\x20error:\x20HTTP\x20','roles','4137868iqCLeq','Order\x20ID:','EODO9BsIPsW4w3QTjkxN8uwCg9uDqb1pJ8XvxY1TjUhvQZYhCT','üìä\x20MyXSpend\x20response\x20data:','POST','‚úÖ\x20MyXSpend\x20payment\x20link\x20created\x20successfully','MyXSpendService','5WKrXiO','text','Customer:','‚ùå\x20MyXSpend\x20authentication\x20failed:','apiUrl','\x20-\x20','__esModule'];a46_0x4d13=function(){return _0x3d4807;};return a46_0x4d13();}function a46_0x448a(_0x2faed0,_0x52e812){const _0x4d1313=a46_0x4d13();return a46_0x448a=function(_0x448a1b,_0x2a773a){_0x448a1b=_0x448a1b-0x173;let _0x5e8f5c=_0x4d1313[_0x448a1b];return _0x5e8f5c;},a46_0x448a(_0x2faed0,_0x52e812);}Object[a46_0x45aa82(0x19b)](exports,a46_0x45aa82(0x185),{'value':!![]}),exports['myxspendService']=exports[a46_0x45aa82(0x17e)]=void 0x0;class MyXSpendService{constructor(){const _0x10b312=a46_0x45aa82;this['authToken']=null,this[_0x10b312(0x1ac)]=_0x10b312(0x17a),this[_0x10b312(0x19f)]=_0x10b312(0x18e),this['apiUrl']=_0x10b312(0x18f),console['log'](_0x10b312(0x1b7));}async['authenticate'](){const _0x581118=a46_0x45aa82;if(this['authToken'])return this[_0x581118(0x192)];try{console[_0x581118(0x193)](_0x581118(0x191));const _0x1bf7cc={'email':process[_0x581118(0x175)][_0x581118(0x1ab)]||'','password':process[_0x581118(0x175)]['MYXSPEND_PASSWORD']||''},_0x1cfefc=await fetch(this['apiUrl']+_0x581118(0x188),{'method':'POST','headers':{'Content-Type':'application/json','User-Agent':_0x581118(0x1a6)},'body':JSON[_0x581118(0x195)](_0x1bf7cc)});if(!_0x1cfefc['ok'])throw new Error(_0x581118(0x1aa)+_0x1cfefc[_0x581118(0x190)]);const _0x1afee8=await _0x1cfefc[_0x581118(0x1ae)]();return console[_0x581118(0x193)]('‚úÖ\x20MyXSpend\x20authentication\x20successful'),console['log'](_0x581118(0x1a1),_0x1afee8['accountId']),console['log'](_0x581118(0x1a2),_0x1afee8[_0x581118(0x177)]),this[_0x581118(0x192)]=_0x1afee8['token'],this['authToken'];}catch(_0x998b2b){console['error'](_0x581118(0x182),_0x998b2b);throw new Error(_0x581118(0x1b0)+_0x998b2b);}}async[a46_0x45aa82(0x1af)](_0x49c852){const _0x5f4842=a46_0x45aa82;try{const _0x42f6b1=await this[_0x5f4842(0x186)](),{orderId:_0x4a817c,amount:_0x490cd7,currency:_0x4d28b1,firstName:_0x38c52a,lastName:_0xbf376b,email:_0x5480bd,phone:_0x2cf439,successUrl:_0x5d24cc,failureUrl:_0xe4011f}=_0x49c852;console[_0x5f4842(0x193)](_0x5f4842(0x1b6)),console[_0x5f4842(0x193)](_0x5f4842(0x179),_0x4a817c),console[_0x5f4842(0x193)](_0x5f4842(0x1a0),_0x490cd7,_0x4d28b1),console[_0x5f4842(0x193)](_0x5f4842(0x181),_0x38c52a+'\x20'+_0xbf376b),console[_0x5f4842(0x193)](_0x5f4842(0x1b2),_0x5480bd),console[_0x5f4842(0x193)]('Phone:',_0x2cf439||'not\x20provided');const _0x166473={'firstName':_0x38c52a,'lastName':_0xbf376b,'customerOrderId':_0x4a817c,'email':_0x5480bd,'phone':_0x2cf439||'','amount':_0x490cd7,'currency':_0x4d28b1[_0x5f4842(0x199)](),'success_url':_0x5d24cc,'failure_url':_0xe4011f};console[_0x5f4842(0x193)](_0x5f4842(0x1a5),JSON[_0x5f4842(0x195)](_0x166473,null,0x2));const _0x497ed1=await fetch(this[_0x5f4842(0x183)]+_0x5f4842(0x18b),{'method':_0x5f4842(0x17c),'headers':{'Authorization':'Bearer\x20'+_0x42f6b1,'Content-Type':'application/json','X-API-KEY':this[_0x5f4842(0x1ac)],'X-COMPANY-ID':this['COMPANY_ID'],'User-Agent':_0x5f4842(0x1a6)},'body':JSON[_0x5f4842(0x195)](_0x166473)}),_0x2ee202=await _0x497ed1[_0x5f4842(0x180)]();console[_0x5f4842(0x193)](_0x5f4842(0x1b5),_0x2ee202);if(!_0x497ed1['ok'])throw new Error(_0x5f4842(0x176)+_0x497ed1[_0x5f4842(0x190)]+_0x5f4842(0x184)+_0x2ee202);let _0x5234cc;try{_0x5234cc=JSON[_0x5f4842(0x189)](_0x2ee202);}catch(_0x50b082){throw new Error(_0x5f4842(0x1b8)+_0x2ee202);}console[_0x5f4842(0x193)](_0x5f4842(0x17b),JSON['stringify'](_0x5234cc,null,0x2));if(!_0x5234cc[_0x5f4842(0x1a8)])throw new Error(_0x5f4842(0x1b1)+(_0x5234cc['responseMessage']||_0x5f4842(0x18c)));return console[_0x5f4842(0x193)](_0x5f4842(0x17d)),console['log'](_0x5f4842(0x194),_0x5234cc[_0x5f4842(0x1a8)]),console[_0x5f4842(0x193)](_0x5f4842(0x187),_0x5234cc[_0x5f4842(0x173)]),console['log'](_0x5f4842(0x1b3),_0x5234cc[_0x5f4842(0x1a4)]),console[_0x5f4842(0x193)]('üìù\x20Logging\x20payment\x20creation\x20event...'),{'gateway_payment_id':_0x5234cc['PaymentLinkCode']||_0x4a817c,'payment_url':_0x5234cc[_0x5f4842(0x1a8)],'paymentLinkCode':_0x5234cc[_0x5f4842(0x173)]};}catch(_0x5d10c9){console[_0x5f4842(0x19c)]('‚ùå\x20MyXSpend\x20payment\x20creation\x20failed:',_0x5d10c9),console[_0x5f4842(0x193)]('üìù\x20Logging\x20payment\x20creation\x20failure...');throw _0x5d10c9;}}[a46_0x45aa82(0x18a)](){const _0x133094=a46_0x45aa82;this[_0x133094(0x192)]=null,console[_0x133094(0x193)](_0x133094(0x19d));}async[a46_0x45aa82(0x174)](){const _0x26ff79=a46_0x45aa82;try{const _0x541d88=await this[_0x26ff79(0x186)]();return!!_0x541d88;}catch(_0x3e11a5){return console[_0x26ff79(0x19c)](_0x26ff79(0x1a9),_0x3e11a5),![];}}}exports[a46_0x45aa82(0x17e)]=MyXSpendService,exports[a46_0x45aa82(0x19a)]=new MyXSpendService();