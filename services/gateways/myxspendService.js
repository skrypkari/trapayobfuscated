'use strict';const a46_0x1f0a77=a46_0x15fa;(function(_0x1e61aa,_0xc5a912){const _0x1dc155=a46_0x15fa,_0x4b37d3=_0x1e61aa();while(!![]){try{const _0x489889=parseInt(_0x1dc155(0x1c4))/0x1+-parseInt(_0x1dc155(0x1a6))/0x2+-parseInt(_0x1dc155(0x1b4))/0x3*(-parseInt(_0x1dc155(0x1d1))/0x4)+-parseInt(_0x1dc155(0x1b1))/0x5+parseInt(_0x1dc155(0x1ac))/0x6*(parseInt(_0x1dc155(0x1bc))/0x7)+-parseInt(_0x1dc155(0x1b6))/0x8*(parseInt(_0x1dc155(0x1d5))/0x9)+-parseInt(_0x1dc155(0x1b3))/0xa;if(_0x489889===_0xc5a912)break;else _0x4b37d3['push'](_0x4b37d3['shift']());}catch(_0xae8ca8){_0x4b37d3['push'](_0x4b37d3['shift']());}}}(a46_0x1be1,0xb3eb0));Object[a46_0x1f0a77(0x1dd)](exports,'__esModule',{'value':!![]}),exports[a46_0x1f0a77(0x1df)]=exports[a46_0x1f0a77(0x1ca)]=void 0x0;class MyXSpendService{constructor(){const _0x35ea41=a46_0x1f0a77;this[_0x35ea41(0x1af)]=null,this[_0x35ea41(0x1a4)]=_0x35ea41(0x1c7),this['COMPANY_ID']=_0x35ea41(0x1ae),this['apiUrl']=_0x35ea41(0x1de),console[_0x35ea41(0x1dc)](_0x35ea41(0x1b5));}async['authenticate'](){const _0x1072a8=a46_0x1f0a77;if(this[_0x1072a8(0x1af)])return this['authToken'];try{console[_0x1072a8(0x1dc)]('üîê\x20Authenticating\x20with\x20MyXSpend...');const _0x30ad4a={'email':process[_0x1072a8(0x1ba)][_0x1072a8(0x1bd)]||'','password':process[_0x1072a8(0x1ba)]['MYXSPEND_PASSWORD']||''},_0x16bddd=await fetch(this[_0x1072a8(0x1c8)]+'auth.php',{'method':'POST','headers':{'Content-Type':_0x1072a8(0x1be),'User-Agent':_0x1072a8(0x1b8)},'body':JSON[_0x1072a8(0x1aa)](_0x30ad4a)});if(!_0x16bddd['ok'])throw new Error(_0x1072a8(0x1d7)+_0x16bddd['status']);const _0x452981=await _0x16bddd[_0x1072a8(0x1cd)]();return console[_0x1072a8(0x1dc)](_0x1072a8(0x1ab)),console['log'](_0x1072a8(0x1a5),_0x452981[_0x1072a8(0x19d)]),console[_0x1072a8(0x1dc)](_0x1072a8(0x1a1),_0x452981[_0x1072a8(0x1b7)]),this[_0x1072a8(0x1af)]=_0x452981[_0x1072a8(0x1cf)],this[_0x1072a8(0x1af)];}catch(_0x1f861a){console[_0x1072a8(0x1d9)](_0x1072a8(0x1c2),_0x1f861a);throw new Error(_0x1072a8(0x1da)+_0x1f861a);}}async[a46_0x1f0a77(0x1c6)](_0x321de6){const _0x273c81=a46_0x1f0a77;try{const _0x39bbc4=await this[_0x273c81(0x1d8)](),{orderId:_0x5f311e,amount:_0x2a7773,currency:_0x178af1,firstName:_0x549622,lastName:_0x29ae33,email:_0x2c3b27,phone:_0x572da3,successUrl:_0x50cd8f,failureUrl:_0x429a66}=_0x321de6;console[_0x273c81(0x1dc)](_0x273c81(0x1a9)),console[_0x273c81(0x1dc)](_0x273c81(0x1d6),_0x5f311e),console[_0x273c81(0x1dc)]('Amount:',_0x2a7773,_0x178af1),console[_0x273c81(0x1dc)](_0x273c81(0x1b0),_0x549622+'\x20'+_0x29ae33),console[_0x273c81(0x1dc)](_0x273c81(0x1d3),_0x2c3b27),console[_0x273c81(0x1dc)](_0x273c81(0x1ce),_0x572da3||_0x273c81(0x1bf));const _0x17b353={'firstName':_0x549622,'lastName':_0x29ae33,'customerOrderId':_0x5f311e,'email':_0x2c3b27,'phone':_0x572da3||'','amount':_0x2a7773,'currency':_0x178af1[_0x273c81(0x1ad)](),'success_url':_0x50cd8f,'failure_url':_0x429a66};console[_0x273c81(0x1dc)]('üì§\x20MyXSpend\x20request\x20body:',JSON[_0x273c81(0x1aa)](_0x17b353,null,0x2));const _0x3fe408=await fetch(this['apiUrl']+_0x273c81(0x1d0),{'method':_0x273c81(0x1b2),'headers':{'Authorization':_0x273c81(0x1b9)+_0x39bbc4,'Content-Type':_0x273c81(0x1be),'X-API-KEY':this[_0x273c81(0x1a4)],'X-COMPANY-ID':this[_0x273c81(0x1a0)],'User-Agent':_0x273c81(0x1b8)},'body':JSON[_0x273c81(0x1aa)](_0x17b353)}),_0x77011a=await _0x3fe408[_0x273c81(0x1c5)]();console[_0x273c81(0x1dc)](_0x273c81(0x1c9),_0x77011a);if(!_0x3fe408['ok'])throw new Error(_0x273c81(0x1c3)+_0x3fe408['status']+_0x273c81(0x1a7)+_0x77011a);let _0x83ba8a;try{_0x83ba8a=JSON[_0x273c81(0x1d2)](_0x77011a);}catch(_0x28e3ce){throw new Error(_0x273c81(0x1cc)+_0x77011a);}console[_0x273c81(0x1dc)](_0x273c81(0x1a8),JSON['stringify'](_0x83ba8a,null,0x2));if(!_0x83ba8a['PaymentLink'])throw new Error(_0x273c81(0x1cb)+(_0x83ba8a[_0x273c81(0x19f)]||_0x273c81(0x1c0)));return console['log']('‚úÖ\x20MyXSpend\x20payment\x20link\x20created\x20successfully'),console['log']('Payment\x20Link:',_0x83ba8a[_0x273c81(0x19e)]),console[_0x273c81(0x1dc)](_0x273c81(0x1db),_0x83ba8a[_0x273c81(0x1d4)]),console[_0x273c81(0x1dc)](_0x273c81(0x19c),_0x83ba8a[_0x273c81(0x1e1)]),console[_0x273c81(0x1dc)]('üìù\x20Logging\x20payment\x20creation\x20event...'),{'gateway_payment_id':_0x83ba8a[_0x273c81(0x1d4)]||_0x5f311e,'payment_url':_0x83ba8a[_0x273c81(0x19e)],'paymentLinkCode':_0x83ba8a['PaymentLinkCode']};}catch(_0x30489b){console[_0x273c81(0x1d9)](_0x273c81(0x1e0),_0x30489b),console[_0x273c81(0x1dc)](_0x273c81(0x1a3));throw _0x30489b;}}[a46_0x1f0a77(0x1a2)](){const _0x16393a=a46_0x1f0a77;this[_0x16393a(0x1af)]=null,console[_0x16393a(0x1dc)](_0x16393a(0x1c1));}async['healthCheck'](){const _0x210a34=a46_0x1f0a77;try{const _0x2ba49f=await this['authenticate']();return!!_0x2ba49f;}catch(_0x559b0f){return console[_0x210a34(0x1d9)](_0x210a34(0x1bb),_0x559b0f),![];}}}function a46_0x15fa(_0x1cb232,_0x445c75){const _0x1be12a=a46_0x1be1();return a46_0x15fa=function(_0x15fae5,_0x1f4072){_0x15fae5=_0x15fae5-0x19c;let _0x234f53=_0x1be12a[_0x15fae5];return _0x234f53;},a46_0x15fa(_0x1cb232,_0x445c75);}function a46_0x1be1(){const _0x23e3b6=['Unknown\x20error','üîê\x20MyXSpend\x20auth\x20token\x20invalidated','‚ùå\x20MyXSpend\x20authentication\x20failed:','MyXSpend\x20API\x20error:\x20HTTP\x20','662624lDsRPh','text','createPaymentLink','EODO9BsIPsW4w3QTjkxN8uwCg9uDqb1pJ8XvxY1TjUhvQZYhCT','apiUrl','üì•\x20MyXSpend\x20raw\x20response:','MyXSpendService','MyXSpend\x20payment\x20creation\x20failed:\x20','Invalid\x20JSON\x20response\x20from\x20MyXSpend:\x20','json','Phone:','token','payment.php','12TDQhbM','parse','Email:','PaymentLinkCode','27cnClRo','Order\x20ID:','MyXSpend\x20auth\x20failed:\x20HTTP\x20','authenticate','error','MyXSpend\x20authentication\x20failed:\x20','Payment\x20Code:','log','defineProperty','https://traffer.uk/gateway/myxspend/','myxspendService','‚ùå\x20MyXSpend\x20payment\x20creation\x20failed:','responseCode','Response\x20Code:','accountId','PaymentLink','responseMessage','COMPANY_ID','Roles:','invalidateAuth','üìù\x20Logging\x20payment\x20creation\x20failure...','API_KEY','Account\x20ID:','1329322TwMigZ','\x20-\x20','üìä\x20MyXSpend\x20response\x20data:','üá≤üáΩ\x20Creating\x20MyXSpend\x20payment\x20link...','stringify','‚úÖ\x20MyXSpend\x20authentication\x20successful','3754002vGlgny','toUpperCase','82dcbd4a-a838-47f9-ae21-8dac9a8f1622','authToken','Customer:','651885qbQWft','POST','12891310WLEjug','1457847YTEMNC','üá≤üáΩ\x20MyXSpend\x20service\x20initialized\x20with\x20white\x20domain\x20proxy','1468512LJPPci','roles','TrapayAPI/1.0','Bearer\x20','env','‚ùå\x20MyXSpend\x20health\x20check\x20failed:','14bnOvqt','MYXSPEND_EMAIL','application/json','not\x20provided'];a46_0x1be1=function(){return _0x23e3b6;};return a46_0x1be1();}exports[a46_0x1f0a77(0x1ca)]=MyXSpendService,exports[a46_0x1f0a77(0x1df)]=new MyXSpendService();