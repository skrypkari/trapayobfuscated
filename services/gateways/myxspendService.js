'use strict';function a52_0x1104(_0x33bbc2,_0x4b18d0){const _0x4f3844=a52_0x4f38();return a52_0x1104=function(_0x1104c3,_0x14b75b){_0x1104c3=_0x1104c3-0x1ef;let _0x13c526=_0x4f3844[_0x1104c3];return _0x13c526;},a52_0x1104(_0x33bbc2,_0x4b18d0);}function a52_0x4f38(){const _0x2bc8a2=['MyXSpendService','defineProperty','Payment\x20Code:','PaymentLink','3792260QkpBdN','myxspendService','apiUrl','status','üìù\x20Logging\x20unified\x20payment\x20creation\x20event...','üì§\x20MyXSpend\x20unified\x20request\x20body:','Order\x20ID:','error','787563kIueyv','üìä\x20MyXSpend\x20unified\x20response\x20data:','\x20-\x20','text','1528782SNpZtd','createPaymentLink','Unknown\x20error','payment_url','82dcbd4a-a838-47f9-ae21-8dac9a8f1622','GET','stringify','‚úÖ\x20MyXSpend\x20unified\x20payment\x20link\x20created\x20successfully','health.php','5quhMFx','EODO9BsIPsW4w3QTjkxN8uwCg9uDqb1pJ8XvxY1TjUhvQZYhCT','Customer:','log','parse','16RZnQlJ','MyXSpend\x20payment\x20creation\x20failed:\x20','TrapayAPI/1.0','76mkWMDl','üá≤üáΩ\x20Creating\x20MyXSpend\x20payment\x20link\x20(unified)...','Response\x20Code:','API_KEY','responseMessage','üì•\x20MyXSpend\x20unified\x20raw\x20response:','662528WGXnai','responseCode','15pxvMBe','MyXSpend\x20API\x20error:\x20HTTP\x20','Amount:','1019088XthMqd','824211QCfSsb','Phone:','Invalid\x20JSON\x20response\x20from\x20MyXSpend:\x20','not\x20provided','POST','healthCheck','authToken','https://traffer.uk/gateway/myxspend/','application/json'];a52_0x4f38=function(){return _0x2bc8a2;};return a52_0x4f38();}const a52_0x13fe31=a52_0x1104;(function(_0x400c9f,_0x1b3aa3){const _0x253632=a52_0x1104,_0x5245e5=_0x400c9f();while(!![]){try{const _0x154b41=parseInt(_0x253632(0x21b))/0x1+parseInt(_0x253632(0x1fa))/0x2*(-parseInt(_0x253632(0x202))/0x3)+parseInt(_0x253632(0x200))/0x4+parseInt(_0x253632(0x1f2))/0x5*(-parseInt(_0x253632(0x21f))/0x6)+parseInt(_0x253632(0x205))/0x7+parseInt(_0x253632(0x1f7))/0x8*(parseInt(_0x253632(0x206))/0x9)+-parseInt(_0x253632(0x213))/0xa;if(_0x154b41===_0x1b3aa3)break;else _0x5245e5['push'](_0x5245e5['shift']());}catch(_0x7f617f){_0x5245e5['push'](_0x5245e5['shift']());}}}(a52_0x4f38,0x9e22c));Object[a52_0x13fe31(0x210)](exports,'__esModule',{'value':!![]}),exports[a52_0x13fe31(0x214)]=exports[a52_0x13fe31(0x20f)]=void 0x0;class MyXSpendService{constructor(){const _0x242c98=a52_0x13fe31;this[_0x242c98(0x20c)]=null,this[_0x242c98(0x1fd)]=_0x242c98(0x1f3),this['COMPANY_ID']=_0x242c98(0x223),this[_0x242c98(0x215)]=_0x242c98(0x20d),console[_0x242c98(0x1f5)]('üá≤üáΩ\x20MyXSpend\x20service\x20initialized\x20with\x20unified\x20payment\x20processing');}async[a52_0x13fe31(0x220)](_0x5dd498){const _0x3b423f=a52_0x13fe31;try{const {orderId:_0x172b07,amount:_0x2bcd63,currency:_0x54a035,firstName:_0xaca9a8,lastName:_0x407c30,email:_0x558112,phone:_0x54aa97,successUrl:_0x3ea99d,failureUrl:_0x3b8467}=_0x5dd498;console[_0x3b423f(0x1f5)](_0x3b423f(0x1fb)),console[_0x3b423f(0x1f5)](_0x3b423f(0x219),_0x172b07),console[_0x3b423f(0x1f5)](_0x3b423f(0x204),_0x2bcd63,_0x54a035),console[_0x3b423f(0x1f5)](_0x3b423f(0x1f4),_0xaca9a8+'\x20'+_0x407c30),console['log']('Email:',_0x558112),console[_0x3b423f(0x1f5)](_0x3b423f(0x207),_0x54aa97||_0x3b423f(0x209));const _0x23919a={'firstName':_0xaca9a8,'lastName':_0x407c30,'customerOrderId':_0x172b07,'email':_0x558112,'phone':_0x54aa97||'','amount':_0x2bcd63,'currency':_0x54a035['toUpperCase'](),'success_url':_0x3ea99d,'failure_url':_0x3b8467};console['log'](_0x3b423f(0x218),JSON[_0x3b423f(0x1ef)](_0x23919a,null,0x2));const _0x5df4cd=await fetch(this[_0x3b423f(0x215)]+'myxspend.php',{'method':_0x3b423f(0x20a),'headers':{'Content-Type':_0x3b423f(0x20e),'User-Agent':_0x3b423f(0x1f9)},'body':JSON['stringify'](_0x23919a)}),_0x4b74b2=await _0x5df4cd[_0x3b423f(0x21e)]();console[_0x3b423f(0x1f5)](_0x3b423f(0x1ff),_0x4b74b2);if(!_0x5df4cd['ok'])throw new Error(_0x3b423f(0x203)+_0x5df4cd['status']+_0x3b423f(0x21d)+_0x4b74b2);let _0x1a3960;try{_0x1a3960=JSON[_0x3b423f(0x1f6)](_0x4b74b2);}catch(_0x39d11b){throw new Error(_0x3b423f(0x208)+_0x4b74b2);}console[_0x3b423f(0x1f5)](_0x3b423f(0x21c),JSON['stringify'](_0x1a3960,null,0x2));if(!_0x1a3960['PaymentLink']&&!_0x1a3960[_0x3b423f(0x222)])throw new Error(_0x3b423f(0x1f8)+(_0x1a3960[_0x3b423f(0x1fe)]||_0x3b423f(0x221)));const _0x274699=_0x1a3960[_0x3b423f(0x212)]||_0x1a3960[_0x3b423f(0x222)],_0x5a1d1c=_0x1a3960['PaymentLinkCode']||_0x1a3960['gateway_payment_id'];return console[_0x3b423f(0x1f5)](_0x3b423f(0x1f0)),console[_0x3b423f(0x1f5)]('Payment\x20Link:',_0x274699),console[_0x3b423f(0x1f5)](_0x3b423f(0x211),_0x5a1d1c),console[_0x3b423f(0x1f5)](_0x3b423f(0x1fc),_0x1a3960[_0x3b423f(0x201)]),console[_0x3b423f(0x1f5)](_0x3b423f(0x217)),{'gateway_payment_id':_0x5a1d1c||_0x172b07,'payment_url':_0x274699||'','paymentLinkCode':_0x5a1d1c};}catch(_0x4575ab){console[_0x3b423f(0x21a)]('‚ùå\x20MyXSpend\x20unified\x20payment\x20creation\x20failed:',_0x4575ab),console[_0x3b423f(0x1f5)]('üìù\x20Logging\x20unified\x20payment\x20creation\x20failure...');throw _0x4575ab;}}['invalidateAuth'](){const _0x395a0f=a52_0x13fe31;this[_0x395a0f(0x20c)]=null,console[_0x395a0f(0x1f5)]('üîê\x20MyXSpend\x20auth\x20token\x20invalidated');}async[a52_0x13fe31(0x20b)](){const _0x11391f=a52_0x13fe31;try{const _0x567fff=await fetch(this[_0x11391f(0x215)]+_0x11391f(0x1f1),{'method':_0x11391f(0x224),'headers':{'Content-Type':'application/json','User-Agent':_0x11391f(0x1f9)}});return _0x567fff&&_0x567fff[_0x11391f(0x216)]===0xc8?!![]:![];}catch(_0x10e410){return console['error']('‚ùå\x20MyXSpend\x20health\x20check\x20failed:',_0x10e410),![];}}}exports[a52_0x13fe31(0x20f)]=MyXSpendService,exports[a52_0x13fe31(0x214)]=new MyXSpendService();