'use strict';function a59_0x2e62(){const _0x2f94dd=['48362sQnpcD','apiUrl','healthCheck','üìù\x20Logging\x20unified\x20payment\x20creation\x20event...','üá≤üáΩ\x20Creating\x20MyXSpend\x20payment\x20link\x20(unified)...','myxspend.php','responseCode','authToken','MyXSpend\x20payment\x20creation\x20failed:\x20','Order\x20ID:','Payment\x20Link:','PaymentLink','‚úÖ\x20MyXSpend\x20unified\x20payment\x20link\x20created\x20successfully','46601850HUgKjw','GET','payment_url','59vLoGpE','‚ùå\x20MyXSpend\x20unified\x20payment\x20creation\x20failed:','toUpperCase','4196355JcJLGW','PaymentLinkCode','TrapayAPI/1.0','MyXSpendService','3736280tJCmnm','üá≤üáΩ\x20MyXSpend\x20service\x20initialized\x20with\x20unified\x20payment\x20processing','stringify','gateway_payment_id','üì§\x20MyXSpend\x20unified\x20request\x20body:','not\x20provided','Unknown\x20error','log','Customer:','\x20-\x20','12wuQBOM','POST','status','4158440RiiDYx','9cfiWge','error','4912859YdGfLu','‚ùå\x20MyXSpend\x20health\x20check\x20failed:','üì•\x20MyXSpend\x20unified\x20raw\x20response:','__esModule','responseMessage','EODO9BsIPsW4w3QTjkxN8uwCg9uDqb1pJ8XvxY1TjUhvQZYhCT','API_KEY','3674380HNDMLj','Payment\x20Code:','application/json','text','Invalid\x20JSON\x20response\x20from\x20MyXSpend:\x20','Email:','myxspendService','invalidateAuth'];a59_0x2e62=function(){return _0x2f94dd;};return a59_0x2e62();}const a59_0x256770=a59_0x38f5;(function(_0x6d702f,_0x5616d8){const _0x543357=a59_0x38f5,_0x383755=_0x6d702f();while(!![]){try{const _0x381d1b=-parseInt(_0x543357(0xaa))/0x1*(-parseInt(_0x543357(0x9a))/0x2)+parseInt(_0x543357(0xad))/0x3+parseInt(_0x543357(0x7b))/0x4+parseInt(_0x543357(0x92))/0x5+parseInt(_0x543357(0x85))/0x6*(parseInt(_0x543357(0x8b))/0x7)+parseInt(_0x543357(0x88))/0x8*(-parseInt(_0x543357(0x89))/0x9)+-parseInt(_0x543357(0xa7))/0xa;if(_0x381d1b===_0x5616d8)break;else _0x383755['push'](_0x383755['shift']());}catch(_0x161874){_0x383755['push'](_0x383755['shift']());}}}(a59_0x2e62,0xaf50e));function a59_0x38f5(_0x33e061,_0x51da45){_0x33e061=_0x33e061-0x79;const _0x2e6285=a59_0x2e62();let _0x38f5e1=_0x2e6285[_0x33e061];return _0x38f5e1;}Object['defineProperty'](exports,a59_0x256770(0x8e),{'value':!![]}),exports[a59_0x256770(0x98)]=exports[a59_0x256770(0x7a)]=void 0x0;class MyXSpendService{constructor(){const _0x6e77cb=a59_0x256770;this['authToken']=null,this[_0x6e77cb(0x91)]=_0x6e77cb(0x90),this['COMPANY_ID']='82dcbd4a-a838-47f9-ae21-8dac9a8f1622',this['apiUrl']='https://traffer.uk/gateway/myxspend/',console[_0x6e77cb(0x82)](_0x6e77cb(0x7c));}async['createPaymentLink'](_0x5b6989){const _0x4486c1=a59_0x256770;try{const {orderId:_0x5ec6bf,amount:_0x173a05,currency:_0x57e8f3,firstName:_0x55be5c,lastName:_0x4e1fc3,email:_0x4a9b7c,phone:_0x1fc1aa,successUrl:_0x3fd5b7,failureUrl:_0x100b3c}=_0x5b6989;console[_0x4486c1(0x82)](_0x4486c1(0x9e)),console[_0x4486c1(0x82)](_0x4486c1(0xa3),_0x5ec6bf),console[_0x4486c1(0x82)]('Amount:',_0x173a05,_0x57e8f3),console['log'](_0x4486c1(0x83),_0x55be5c+'\x20'+_0x4e1fc3),console[_0x4486c1(0x82)](_0x4486c1(0x97),_0x4a9b7c),console[_0x4486c1(0x82)]('Phone:',_0x1fc1aa||_0x4486c1(0x80));const _0x18345a={'firstName':_0x55be5c,'lastName':_0x4e1fc3,'customerOrderId':_0x5ec6bf,'email':_0x4a9b7c,'phone':_0x1fc1aa||'','amount':_0x173a05,'currency':_0x57e8f3[_0x4486c1(0xac)](),'success_url':_0x3fd5b7,'failure_url':_0x100b3c};console[_0x4486c1(0x82)](_0x4486c1(0x7f),JSON[_0x4486c1(0x7d)](_0x18345a,null,0x2));const _0x2af607=await fetch(this[_0x4486c1(0x9b)]+_0x4486c1(0x9f),{'method':_0x4486c1(0x86),'headers':{'Content-Type':_0x4486c1(0x94),'User-Agent':_0x4486c1(0x79)},'body':JSON[_0x4486c1(0x7d)](_0x18345a)}),_0x5e279a=await _0x2af607[_0x4486c1(0x95)]();console['log'](_0x4486c1(0x8d),_0x5e279a);if(!_0x2af607['ok'])throw new Error('MyXSpend\x20API\x20error:\x20HTTP\x20'+_0x2af607['status']+_0x4486c1(0x84)+_0x5e279a);let _0x3992b0;try{_0x3992b0=JSON['parse'](_0x5e279a);}catch(_0x28f1bc){throw new Error(_0x4486c1(0x96)+_0x5e279a);}console[_0x4486c1(0x82)]('üìä\x20MyXSpend\x20unified\x20response\x20data:',JSON[_0x4486c1(0x7d)](_0x3992b0,null,0x2));if(!_0x3992b0[_0x4486c1(0xa5)]&&!_0x3992b0[_0x4486c1(0xa9)])throw new Error(_0x4486c1(0xa2)+(_0x3992b0[_0x4486c1(0x8f)]||_0x4486c1(0x81)));const _0x717a32=_0x3992b0[_0x4486c1(0xa5)]||_0x3992b0[_0x4486c1(0xa9)],_0x90439a=_0x3992b0[_0x4486c1(0xae)]||_0x3992b0[_0x4486c1(0x7e)];return console['log'](_0x4486c1(0xa6)),console['log'](_0x4486c1(0xa4),_0x717a32),console[_0x4486c1(0x82)](_0x4486c1(0x93),_0x90439a),console['log']('Response\x20Code:',_0x3992b0[_0x4486c1(0xa0)]),console[_0x4486c1(0x82)](_0x4486c1(0x9d)),{'gateway_payment_id':_0x90439a||_0x5ec6bf,'payment_url':_0x717a32||'','paymentLinkCode':_0x90439a};}catch(_0x2ac2dc){console[_0x4486c1(0x8a)](_0x4486c1(0xab),_0x2ac2dc),console[_0x4486c1(0x82)]('üìù\x20Logging\x20unified\x20payment\x20creation\x20failure...');throw _0x2ac2dc;}}[a59_0x256770(0x99)](){const _0x525278=a59_0x256770;this[_0x525278(0xa1)]=null,console[_0x525278(0x82)]('üîê\x20MyXSpend\x20auth\x20token\x20invalidated');}async[a59_0x256770(0x9c)](){const _0x475d5e=a59_0x256770;try{const _0x1a8919=await fetch(this[_0x475d5e(0x9b)]+'health.php',{'method':_0x475d5e(0xa8),'headers':{'Content-Type':_0x475d5e(0x94),'User-Agent':_0x475d5e(0x79)}});return _0x1a8919&&_0x1a8919[_0x475d5e(0x87)]===0xc8?!![]:![];}catch(_0x4f3ca5){return console[_0x475d5e(0x8a)](_0x475d5e(0x8c),_0x4f3ca5),![];}}}exports[a59_0x256770(0x7a)]=MyXSpendService,exports['myxspendService']=new MyXSpendService();