'use strict';const a46_0x10615d=a46_0x1264;(function(_0x80123d,_0x52368c){const _0x245409=a46_0x1264,_0x1c8cf6=_0x80123d();while(!![]){try{const _0xc74254=-parseInt(_0x245409(0x98))/0x1+-parseInt(_0x245409(0xb7))/0x2+-parseInt(_0x245409(0xc5))/0x3+-parseInt(_0x245409(0xae))/0x4*(-parseInt(_0x245409(0xab))/0x5)+parseInt(_0x245409(0x94))/0x6*(-parseInt(_0x245409(0xa0))/0x7)+-parseInt(_0x245409(0xac))/0x8*(-parseInt(_0x245409(0xa3))/0x9)+parseInt(_0x245409(0x95))/0xa*(parseInt(_0x245409(0x9b))/0xb);if(_0xc74254===_0x52368c)break;else _0x1c8cf6['push'](_0x1c8cf6['shift']());}catch(_0x2f8d3b){_0x1c8cf6['push'](_0x1c8cf6['shift']());}}}(a46_0x3219,0xa43aa));function a46_0x3219(){const _0x43560a=['json','üìù\x20Logging\x20payment\x20creation\x20failure...','application/json','MyXSpend\x20payment\x20creation\x20failed:\x20','‚ùå\x20MyXSpend\x20payment\x20creation\x20failed:','Bearer\x20','üì§\x20MyXSpend\x20request\x20body:','POST','payment.php','1461381edFNHS','apiUrl','myxspendService','82dcbd4a-a838-47f9-ae21-8dac9a8f1622','roles','PaymentLinkCode','stringify','‚ùå\x20MyXSpend\x20health\x20check\x20failed:','toUpperCase','üì•\x20MyXSpend\x20raw\x20response:','responseMessage','Response\x20Code:','status','error','Customer:','TrapayAPI/1.0','https://traffer.uk/gateway/myxspend/','Sich2002!','Email:','Invalid\x20JSON\x20response\x20from\x20MyXSpend:\x20','responseCode','36HdEMXJ','207890wrryjp','Unknown\x20error','MyXSpendService','1215434udNiBs','accountId','MyXSpend\x20auth\x20failed:\x20HTTP\x20','1903haWRjw','text','authenticate','Payment\x20Code:','Roles:','616546IcTVRG','‚úÖ\x20MyXSpend\x20payment\x20link\x20created\x20successfully','not\x20provided','99wKJHvK','Account\x20ID:','EODO9BsIPsW4w3QTjkxN8uwCg9uDqb1pJ8XvxY1TjUhvQZYhCT','\x20-\x20','API_KEY','PaymentLink','Phone:','üìù\x20Logging\x20payment\x20creation\x20event...','627230BYARpt','296528WspGIy','‚úÖ\x20MyXSpend\x20authentication\x20successful','4Rtgbnk','MyXSpend\x20API\x20error:\x20HTTP\x20','defineProperty','üá≤üáΩ\x20MyXSpend\x20service\x20initialized\x20with\x20white\x20domain\x20proxy','üìä\x20MyXSpend\x20response\x20data:','authToken','MyXSpend\x20authentication\x20failed:\x20','Order\x20ID:','log','2451916PybIBw','üîê\x20MyXSpend\x20auth\x20token\x20invalidated','Payment\x20Link:','createPaymentLink','parse'];a46_0x3219=function(){return _0x43560a;};return a46_0x3219();}Object[a46_0x10615d(0xb0)](exports,'__esModule',{'value':!![]}),exports[a46_0x10615d(0xc7)]=exports[a46_0x10615d(0x97)]=void 0x0;function a46_0x1264(_0x33de8f,_0x2d73c5){const _0x32192c=a46_0x3219();return a46_0x1264=function(_0x1264fa,_0x46bd3e){_0x1264fa=_0x1264fa-0x91;let _0x2ba378=_0x32192c[_0x1264fa];return _0x2ba378;},a46_0x1264(_0x33de8f,_0x2d73c5);}class MyXSpendService{constructor(){const _0x5d3355=a46_0x10615d;this[_0x5d3355(0xb3)]=null,this[_0x5d3355(0xa7)]=_0x5d3355(0xa5),this['COMPANY_ID']=_0x5d3355(0xc8),this['apiUrl']=_0x5d3355(0xd5),console['log'](_0x5d3355(0xb1));}async[a46_0x10615d(0x9d)](){const _0x3cd696=a46_0x10615d;if(this[_0x3cd696(0xb3)])return this[_0x3cd696(0xb3)];try{console[_0x3cd696(0xb6)]('üîê\x20Authenticating\x20with\x20MyXSpend...');const _0x2b86fe={'email':'vsichkar2002@gmail.com','password':_0x3cd696(0xd6)},_0x482b86=await fetch(this[_0x3cd696(0xc6)]+'auth.php',{'method':_0x3cd696(0xc3),'headers':{'Content-Type':_0x3cd696(0xbe),'User-Agent':_0x3cd696(0xd4)},'body':JSON[_0x3cd696(0xcb)](_0x2b86fe)});if(!_0x482b86['ok'])throw new Error(_0x3cd696(0x9a)+_0x482b86['status']);const _0x16b7aa=await _0x482b86[_0x3cd696(0xbc)]();return console[_0x3cd696(0xb6)](_0x3cd696(0xad)),console[_0x3cd696(0xb6)](_0x3cd696(0xa4),_0x16b7aa[_0x3cd696(0x99)]),console[_0x3cd696(0xb6)](_0x3cd696(0x9f),_0x16b7aa[_0x3cd696(0xc9)]),this['authToken']=_0x16b7aa['token'],this[_0x3cd696(0xb3)];}catch(_0x224840){console['error']('‚ùå\x20MyXSpend\x20authentication\x20failed:',_0x224840);throw new Error(_0x3cd696(0xb4)+_0x224840);}}async[a46_0x10615d(0xba)](_0x3dfbe9){const _0x54afba=a46_0x10615d;try{const _0x225eba=await this[_0x54afba(0x9d)](),{orderId:_0x3850f2,amount:_0x19ac33,currency:_0x37b771,firstName:_0x1d5911,lastName:_0x2d57f0,email:_0x3611e6,phone:_0x33a4ad,successUrl:_0x4055fd,failureUrl:_0x4e154d}=_0x3dfbe9;console[_0x54afba(0xb6)]('üá≤üáΩ\x20Creating\x20MyXSpend\x20payment\x20link...'),console[_0x54afba(0xb6)](_0x54afba(0xb5),_0x3850f2),console[_0x54afba(0xb6)]('Amount:',_0x19ac33,_0x37b771),console['log'](_0x54afba(0xd3),_0x1d5911+'\x20'+_0x2d57f0),console[_0x54afba(0xb6)](_0x54afba(0x91),_0x3611e6),console[_0x54afba(0xb6)](_0x54afba(0xa9),_0x33a4ad||_0x54afba(0xa2));const _0x2fc55c={'firstName':_0x1d5911,'lastName':_0x2d57f0,'customerOrderId':_0x3850f2,'email':_0x3611e6,'phone':_0x33a4ad||'','amount':_0x19ac33,'currency':_0x37b771[_0x54afba(0xcd)](),'success_url':_0x4055fd,'failure_url':_0x4e154d};console['log'](_0x54afba(0xc2),JSON[_0x54afba(0xcb)](_0x2fc55c,null,0x2));const _0x247401=await fetch(this[_0x54afba(0xc6)]+_0x54afba(0xc4),{'method':_0x54afba(0xc3),'headers':{'Authorization':_0x54afba(0xc1)+_0x225eba,'Content-Type':'application/json','X-API-KEY':this[_0x54afba(0xa7)],'X-COMPANY-ID':this['COMPANY_ID'],'User-Agent':'TrapayAPI/1.0'},'body':JSON[_0x54afba(0xcb)](_0x2fc55c)}),_0x1fed0e=await _0x247401[_0x54afba(0x9c)]();console[_0x54afba(0xb6)](_0x54afba(0xce),_0x1fed0e);if(!_0x247401['ok'])throw new Error(_0x54afba(0xaf)+_0x247401[_0x54afba(0xd1)]+_0x54afba(0xa6)+_0x1fed0e);let _0xdb74a0;try{_0xdb74a0=JSON[_0x54afba(0xbb)](_0x1fed0e);}catch(_0x45e958){throw new Error(_0x54afba(0x92)+_0x1fed0e);}console['log'](_0x54afba(0xb2),JSON[_0x54afba(0xcb)](_0xdb74a0,null,0x2));if(!_0xdb74a0[_0x54afba(0xa8)])throw new Error(_0x54afba(0xbf)+(_0xdb74a0[_0x54afba(0xcf)]||_0x54afba(0x96)));return console[_0x54afba(0xb6)](_0x54afba(0xa1)),console[_0x54afba(0xb6)](_0x54afba(0xb9),_0xdb74a0[_0x54afba(0xa8)]),console[_0x54afba(0xb6)](_0x54afba(0x9e),_0xdb74a0['PaymentLinkCode']),console['log'](_0x54afba(0xd0),_0xdb74a0[_0x54afba(0x93)]),console[_0x54afba(0xb6)](_0x54afba(0xaa)),{'gateway_payment_id':_0xdb74a0['PaymentLinkCode']||_0x3850f2,'payment_url':_0xdb74a0[_0x54afba(0xa8)],'paymentLinkCode':_0xdb74a0[_0x54afba(0xca)]};}catch(_0x33152b){console[_0x54afba(0xd2)](_0x54afba(0xc0),_0x33152b),console[_0x54afba(0xb6)](_0x54afba(0xbd));throw _0x33152b;}}['invalidateAuth'](){const _0x1f34eb=a46_0x10615d;this[_0x1f34eb(0xb3)]=null,console[_0x1f34eb(0xb6)](_0x1f34eb(0xb8));}async['healthCheck'](){const _0x404b42=a46_0x10615d;try{const _0x281626=await this[_0x404b42(0x9d)]();return!!_0x281626;}catch(_0x5b0c2b){return console['error'](_0x404b42(0xcc),_0x5b0c2b),![];}}}exports['MyXSpendService']=MyXSpendService,exports[a46_0x10615d(0xc7)]=new MyXSpendService();