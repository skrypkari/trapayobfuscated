'use strict';const a47_0x320777=a47_0x1f42;function a47_0x1f42(_0x2062cf,_0x55b4af){const _0x50f66b=a47_0x50f6();return a47_0x1f42=function(_0x1f42c8,_0x16f343){_0x1f42c8=_0x1f42c8-0x15d;let _0x42dd3d=_0x50f66b[_0x1f42c8];return _0x42dd3d;},a47_0x1f42(_0x2062cf,_0x55b4af);}function a47_0x50f6(){const _0x1a4b67=['authToken','üá≤üáΩ\x20Creating\x20MyXSpend\x20payment\x20link\x20(unified)...','__esModule','Order\x20ID:','244gSuKwz','not\x20provided','TrapayAPI/1.0','Payment\x20Code:','üìù\x20Logging\x20unified\x20payment\x20creation\x20failure...','2988818nnAudB','8300ydVtPV','Unknown\x20error','585876dTAVei','üá≤üáΩ\x20MyXSpend\x20service\x20initialized\x20with\x20unified\x20payment\x20processing','27384wKapJF','üìä\x20MyXSpend\x20unified\x20response\x20data:','GET','Email:','toUpperCase','status','error','447930kWPtRh','MyXSpendService','API_KEY','createPaymentLink','stringify','144ZweClL','82dcbd4a-a838-47f9-ae21-8dac9a8f1622','responseCode','PaymentLinkCode','\x20-\x20','üìù\x20Logging\x20unified\x20payment\x20creation\x20event...','‚ùå\x20MyXSpend\x20health\x20check\x20failed:','2090TegQAx','üîê\x20MyXSpend\x20auth\x20token\x20invalidated','payment_url','COMPANY_ID','invalidateAuth','POST','25710AUJkgh','63114bBUNaU','Phone:','PaymentLink','gateway_payment_id','https://traffer.uk/gateway/myxspend/','application/json','apiUrl','responseMessage','‚úÖ\x20MyXSpend\x20unified\x20payment\x20link\x20created\x20successfully','MyXSpend\x20payment\x20creation\x20failed:\x20','log','‚ùå\x20MyXSpend\x20unified\x20payment\x20creation\x20failed:','myxspend.php','healthCheck','MyXSpend\x20API\x20error:\x20HTTP\x20','parse','Payment\x20Link:','myxspendService','2oFhshv'];a47_0x50f6=function(){return _0x1a4b67;};return a47_0x50f6();}(function(_0x9e4357,_0x3b270f){const _0x582a10=a47_0x1f42,_0x15fc37=_0x9e4357();while(!![]){try{const _0x10a691=-parseInt(_0x582a10(0x181))/0x1*(parseInt(_0x582a10(0x16f))/0x2)+parseInt(_0x582a10(0x18e))/0x3+parseInt(_0x582a10(0x186))/0x4*(parseInt(_0x582a10(0x18c))/0x5)+-parseInt(_0x582a10(0x197))/0x6+-parseInt(_0x582a10(0x18b))/0x7+parseInt(_0x582a10(0x190))/0x8*(parseInt(_0x582a10(0x161))/0x9)+-parseInt(_0x582a10(0x16e))/0xa*(-parseInt(_0x582a10(0x168))/0xb);if(_0x10a691===_0x3b270f)break;else _0x15fc37['push'](_0x15fc37['shift']());}catch(_0x276548){_0x15fc37['push'](_0x15fc37['shift']());}}}(a47_0x50f6,0x4327b));Object['defineProperty'](exports,a47_0x320777(0x184),{'value':!![]}),exports[a47_0x320777(0x180)]=exports[a47_0x320777(0x15d)]=void 0x0;class MyXSpendService{constructor(){const _0x384146=a47_0x320777;this[_0x384146(0x182)]=null,this[_0x384146(0x15e)]='EODO9BsIPsW4w3QTjkxN8uwCg9uDqb1pJ8XvxY1TjUhvQZYhCT',this[_0x384146(0x16b)]=_0x384146(0x162),this[_0x384146(0x175)]=_0x384146(0x173),console['log'](_0x384146(0x18f));}async[a47_0x320777(0x15f)](_0x4c14ee){const _0x286aba=a47_0x320777;try{const {orderId:_0x139e51,amount:_0x4f4b35,currency:_0x246f43,firstName:_0x51396b,lastName:_0x388bf4,email:_0x205b86,phone:_0x11aa6a,successUrl:_0x2fe462,failureUrl:_0x15cd77}=_0x4c14ee;console[_0x286aba(0x179)](_0x286aba(0x183)),console[_0x286aba(0x179)](_0x286aba(0x185),_0x139e51),console[_0x286aba(0x179)]('Amount:',_0x4f4b35,_0x246f43),console[_0x286aba(0x179)]('Customer:',_0x51396b+'\x20'+_0x388bf4),console[_0x286aba(0x179)](_0x286aba(0x193),_0x205b86),console[_0x286aba(0x179)](_0x286aba(0x170),_0x11aa6a||_0x286aba(0x187));const _0xe211d1={'firstName':_0x51396b,'lastName':_0x388bf4,'customerOrderId':_0x139e51,'email':_0x205b86,'phone':_0x11aa6a||'','amount':_0x4f4b35,'currency':_0x246f43[_0x286aba(0x194)](),'success_url':_0x2fe462,'failure_url':_0x15cd77};console[_0x286aba(0x179)]('üì§\x20MyXSpend\x20unified\x20request\x20body:',JSON['stringify'](_0xe211d1,null,0x2));const _0x5f396e=await fetch(this[_0x286aba(0x175)]+_0x286aba(0x17b),{'method':_0x286aba(0x16d),'headers':{'Content-Type':_0x286aba(0x174),'User-Agent':_0x286aba(0x188)},'body':JSON[_0x286aba(0x160)](_0xe211d1)}),_0x5f1316=await _0x5f396e['text']();console['log']('üì•\x20MyXSpend\x20unified\x20raw\x20response:',_0x5f1316);if(!_0x5f396e['ok'])throw new Error(_0x286aba(0x17d)+_0x5f396e[_0x286aba(0x195)]+_0x286aba(0x165)+_0x5f1316);let _0x2d2d42;try{_0x2d2d42=JSON[_0x286aba(0x17e)](_0x5f1316);}catch(_0x933b9e){throw new Error('Invalid\x20JSON\x20response\x20from\x20MyXSpend:\x20'+_0x5f1316);}console[_0x286aba(0x179)](_0x286aba(0x191),JSON[_0x286aba(0x160)](_0x2d2d42,null,0x2));if(!_0x2d2d42[_0x286aba(0x171)]&&!_0x2d2d42[_0x286aba(0x16a)])throw new Error(_0x286aba(0x178)+(_0x2d2d42[_0x286aba(0x176)]||_0x286aba(0x18d)));const _0x522df1=_0x2d2d42[_0x286aba(0x171)]||_0x2d2d42['payment_url'],_0x33a697=_0x2d2d42[_0x286aba(0x164)]||_0x2d2d42[_0x286aba(0x172)];return console['log'](_0x286aba(0x177)),console[_0x286aba(0x179)](_0x286aba(0x17f),_0x522df1),console[_0x286aba(0x179)](_0x286aba(0x189),_0x33a697),console[_0x286aba(0x179)]('Response\x20Code:',_0x2d2d42[_0x286aba(0x163)]),console[_0x286aba(0x179)](_0x286aba(0x166)),{'gateway_payment_id':_0x33a697||_0x139e51,'payment_url':_0x522df1||'','paymentLinkCode':_0x33a697};}catch(_0x3cdb1f){console[_0x286aba(0x196)](_0x286aba(0x17a),_0x3cdb1f),console['log'](_0x286aba(0x18a));throw _0x3cdb1f;}}[a47_0x320777(0x16c)](){const _0x352d3f=a47_0x320777;this[_0x352d3f(0x182)]=null,console[_0x352d3f(0x179)](_0x352d3f(0x169));}async[a47_0x320777(0x17c)](){const _0x5e9244=a47_0x320777;try{const _0x23fe19=await fetch(this[_0x5e9244(0x175)]+'health.php',{'method':_0x5e9244(0x192),'headers':{'Content-Type':_0x5e9244(0x174),'User-Agent':_0x5e9244(0x188)}});return _0x23fe19&&_0x23fe19['status']===0xc8?!![]:![];}catch(_0x1b9815){return console[_0x5e9244(0x196)](_0x5e9244(0x167),_0x1b9815),![];}}}exports[a47_0x320777(0x15d)]=MyXSpendService,exports[a47_0x320777(0x180)]=new MyXSpendService();