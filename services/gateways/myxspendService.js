'use strict';function a59_0x2c5d(){const _0x260818=['2PinLbG','Unknown\x20error','parse','MyXSpend\x20API\x20error:\x20HTTP\x20','993888TiVqTi','654000YYujBr','application/json','Phone:','Response\x20Code:','Order\x20ID:','createPaymentLink','‚úÖ\x20MyXSpend\x20unified\x20payment\x20link\x20created\x20successfully','742761RKxruy','‚ùå\x20MyXSpend\x20health\x20check\x20failed:','MyXSpend\x20payment\x20creation\x20failed:\x20','not\x20provided','üìä\x20MyXSpend\x20unified\x20response\x20data:','TrapayAPI/1.0','healthCheck','PaymentLink','MyXSpendService','1592148nRutSk','232556TLOOHe','‚ùå\x20MyXSpend\x20unified\x20payment\x20creation\x20failed:','82dcbd4a-a838-47f9-ae21-8dac9a8f1622','Payment\x20Link:','gateway_payment_id','toUpperCase','status','\x20-\x20','text','GET','üá≤üáΩ\x20MyXSpend\x20service\x20initialized\x20with\x20unified\x20payment\x20processing','log','EODO9BsIPsW4w3QTjkxN8uwCg9uDqb1pJ8XvxY1TjUhvQZYhCT','myxspendService','üîê\x20MyXSpend\x20auth\x20token\x20invalidated','7DVmyZS','üì•\x20MyXSpend\x20unified\x20raw\x20response:','error','üìù\x20Logging\x20unified\x20payment\x20creation\x20event...','POST','üìù\x20Logging\x20unified\x20payment\x20creation\x20failure...','authToken','https://traffer.uk/gateway/myxspend/','invalidateAuth','responseMessage','stringify','apiUrl','Amount:','defineProperty','üá≤üáΩ\x20Creating\x20MyXSpend\x20payment\x20link\x20(unified)...','1083484lANaCH','931810xaopNP','responseCode','PaymentLinkCode','__esModule','Customer:'];a59_0x2c5d=function(){return _0x260818;};return a59_0x2c5d();}const a59_0x4e150f=a59_0x10cd;function a59_0x10cd(_0x35fc99,_0x5318ea){_0x35fc99=_0x35fc99-0x69;const _0x2c5d5a=a59_0x2c5d();let _0x10cdf6=_0x2c5d5a[_0x35fc99];return _0x10cdf6;}(function(_0x94e48a,_0x58fcdb){const _0x1ca265=a59_0x10cd,_0x891d=_0x94e48a();while(!![]){try{const _0x28b95a=-parseInt(_0x1ca265(0x7a))/0x1*(parseInt(_0x1ca265(0x9e))/0x2)+parseInt(_0x1ca265(0x69))/0x3+parseInt(_0x1ca265(0x98))/0x4+parseInt(_0x1ca265(0x99))/0x5+parseInt(_0x1ca265(0x79))/0x6*(-parseInt(_0x1ca265(0x89))/0x7)+-parseInt(_0x1ca265(0xa2))/0x8+parseInt(_0x1ca265(0x70))/0x9;if(_0x28b95a===_0x58fcdb)break;else _0x891d['push'](_0x891d['shift']());}catch(_0x16dbc5){_0x891d['push'](_0x891d['shift']());}}}(a59_0x2c5d,0x211bc));Object[a59_0x4e150f(0x96)](exports,a59_0x4e150f(0x9c),{'value':!![]}),exports['myxspendService']=exports[a59_0x4e150f(0x78)]=void 0x0;class MyXSpendService{constructor(){const _0x2a1963=a59_0x4e150f;this['authToken']=null,this['API_KEY']=_0x2a1963(0x86),this['COMPANY_ID']=_0x2a1963(0x7c),this[_0x2a1963(0x94)]=_0x2a1963(0x90),console[_0x2a1963(0x85)](_0x2a1963(0x84));}async[a59_0x4e150f(0x6e)](_0x869a77){const _0x27d2f8=a59_0x4e150f;try{const {orderId:_0x3fcd61,amount:_0x12f990,currency:_0xd0e9b,firstName:_0x39e735,lastName:_0x200ba3,email:_0x5b7061,phone:_0x243748,successUrl:_0x15711a,failureUrl:_0xe69071}=_0x869a77;console[_0x27d2f8(0x85)](_0x27d2f8(0x97)),console[_0x27d2f8(0x85)](_0x27d2f8(0x6d),_0x3fcd61),console[_0x27d2f8(0x85)](_0x27d2f8(0x95),_0x12f990,_0xd0e9b),console[_0x27d2f8(0x85)](_0x27d2f8(0x9d),_0x39e735+'\x20'+_0x200ba3),console[_0x27d2f8(0x85)]('Email:',_0x5b7061),console[_0x27d2f8(0x85)](_0x27d2f8(0x6b),_0x243748||_0x27d2f8(0x73));const _0x1a31d6={'firstName':_0x39e735,'lastName':_0x200ba3,'customerOrderId':_0x3fcd61,'email':_0x5b7061,'phone':_0x243748||'','amount':_0x12f990,'currency':_0xd0e9b[_0x27d2f8(0x7f)](),'success_url':_0x15711a,'failure_url':_0xe69071};console['log']('üì§\x20MyXSpend\x20unified\x20request\x20body:',JSON[_0x27d2f8(0x93)](_0x1a31d6,null,0x2));const _0x1413ea=await fetch(this[_0x27d2f8(0x94)]+'myxspend.php',{'method':_0x27d2f8(0x8d),'headers':{'Content-Type':_0x27d2f8(0x6a),'User-Agent':'TrapayAPI/1.0'},'body':JSON[_0x27d2f8(0x93)](_0x1a31d6)}),_0x3d6871=await _0x1413ea[_0x27d2f8(0x82)]();console['log'](_0x27d2f8(0x8a),_0x3d6871);if(!_0x1413ea['ok'])throw new Error(_0x27d2f8(0xa1)+_0x1413ea['status']+_0x27d2f8(0x81)+_0x3d6871);let _0x190928;try{_0x190928=JSON[_0x27d2f8(0xa0)](_0x3d6871);}catch(_0x5b0f14){throw new Error('Invalid\x20JSON\x20response\x20from\x20MyXSpend:\x20'+_0x3d6871);}console[_0x27d2f8(0x85)](_0x27d2f8(0x74),JSON[_0x27d2f8(0x93)](_0x190928,null,0x2));if(!_0x190928[_0x27d2f8(0x77)]&&!_0x190928['payment_url'])throw new Error(_0x27d2f8(0x72)+(_0x190928[_0x27d2f8(0x92)]||_0x27d2f8(0x9f)));const _0x2b20d6=_0x190928[_0x27d2f8(0x77)]||_0x190928['payment_url'],_0x511092=_0x190928[_0x27d2f8(0x9b)]||_0x190928[_0x27d2f8(0x7e)];return console[_0x27d2f8(0x85)](_0x27d2f8(0x6f)),console[_0x27d2f8(0x85)](_0x27d2f8(0x7d),_0x2b20d6),console[_0x27d2f8(0x85)]('Payment\x20Code:',_0x511092),console['log'](_0x27d2f8(0x6c),_0x190928[_0x27d2f8(0x9a)]),console['log'](_0x27d2f8(0x8c)),{'gateway_payment_id':_0x511092||_0x3fcd61,'payment_url':_0x2b20d6||'','paymentLinkCode':_0x511092};}catch(_0x5d81e3){console['error'](_0x27d2f8(0x7b),_0x5d81e3),console[_0x27d2f8(0x85)](_0x27d2f8(0x8e));throw _0x5d81e3;}}[a59_0x4e150f(0x91)](){const _0x242395=a59_0x4e150f;this[_0x242395(0x8f)]=null,console[_0x242395(0x85)](_0x242395(0x88));}async[a59_0x4e150f(0x76)](){const _0x40467d=a59_0x4e150f;try{const _0x1f4208=await fetch(this[_0x40467d(0x94)]+'health.php',{'method':_0x40467d(0x83),'headers':{'Content-Type':'application/json','User-Agent':_0x40467d(0x75)}});return _0x1f4208&&_0x1f4208[_0x40467d(0x80)]===0xc8?!![]:![];}catch(_0x582028){return console[_0x40467d(0x8b)](_0x40467d(0x71),_0x582028),![];}}}exports['MyXSpendService']=MyXSpendService,exports[a59_0x4e150f(0x87)]=new MyXSpendService();