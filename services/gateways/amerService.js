'use strict';function a61_0x4d00(_0x687a5,_0x25b788){_0x687a5=_0x687a5-0x172;const _0x1d43a6=a61_0x1d43();let _0x4d001e=_0x1d43a6[_0x687a5];return _0x4d001e;}function a61_0x1d43(){const _0x22407a=['Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20','AmerService','Error\x20stack:','===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20===','amer','logWhiteDomainRequest','Failed\x20to\x20verify\x20Amer\x20payment:\x20','PENDING','816480JnqvjO','4201368AJJSYF','error','/payment/verify/','&order=','currency','paymentId','&currency=','/payment.php?payment_id=','Payment\x20ID:','Error\x20message:','toUpperCase','Error\x20details:','449632nJwgdL','message','6SvefMo','logWhiteDomainError','FAILED','createPaymentLink','stack','paymentMethod','528277xYICKo','__esModule','/payment','779005GJzitd','68NyLfAH','transactionId','log','297RAbGht','https://api2.trapay.uk','üîç\x20Verifying\x20Amer\x20payment:\x20','cardLast4','verifyPayment','GET','&amount=','üí∞\x20Amount:\x20','üîÑ\x20Amer\x20webhook\x20processed:\x20status=','success','Processing\x20Amer\x20webhook:','118380ZGcdln','loggerService','Unknown\x20error','../loggerService','PAID','136930MGgfls','apiUrl','amount','Payment\x20URL:','orderId'];a61_0x1d43=function(){return _0x22407a;};return a61_0x1d43();}const a61_0x3efbae=a61_0x4d00;(function(_0x46c8ce,_0x4dd30f){const _0x1cc91b=a61_0x4d00,_0xf14e71=_0x46c8ce();while(!![]){try{const _0x2bfff7=-parseInt(_0x1cc91b(0x1aa))/0x1+parseInt(_0x1cc91b(0x1a2))/0x2+parseInt(_0x1cc91b(0x183))/0x3*(parseInt(_0x1cc91b(0x175))/0x4)+parseInt(_0x1cc91b(0x174))/0x5*(parseInt(_0x1cc91b(0x1a4))/0x6)+parseInt(_0x1cc91b(0x195))/0x7+-parseInt(_0x1cc91b(0x196))/0x8+parseInt(_0x1cc91b(0x178))/0x9*(parseInt(_0x1cc91b(0x188))/0xa);if(_0x2bfff7===_0x4dd30f)break;else _0xf14e71['push'](_0xf14e71['shift']());}catch(_0x1a7e68){_0xf14e71['push'](_0xf14e71['shift']());}}}(a61_0x1d43,0x8a4e2));Object['defineProperty'](exports,a61_0x3efbae(0x172),{'value':!![]}),exports[a61_0x3efbae(0x18e)]=void 0x0;const loggerService_1=require(a61_0x3efbae(0x186));class AmerService{constructor(){const _0x325fae=a61_0x3efbae;this[_0x325fae(0x189)]=_0x325fae(0x179),console[_0x325fae(0x177)]('üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain');}async[a61_0x3efbae(0x1a7)](_0x31c6b1){const _0x314115=a61_0x3efbae,{paymentId:_0x3bbd7b,orderId:_0x27a0ad,orderName:_0x2e76cf,amount:_0x2351b1,currency:_0x57fdaa,usage:_0x1070d5,maxPayments:_0x3af9be,successUrl:_0x496bf7,failUrl:_0x5ca9ca}=_0x31c6b1,_0x2b7c28=_0x57fdaa[_0x314115(0x1a0)]();console['log']('üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20'+_0x27a0ad),console['log'](_0x314115(0x17f)+_0x2351b1+'\x20'+_0x2b7c28);try{const _0x14b8f3=this[_0x314115(0x189)]+_0x314115(0x19d)+_0x3bbd7b+_0x314115(0x17e)+_0x2351b1+_0x314115(0x19c)+_0x2b7c28+_0x314115(0x199)+_0x27a0ad;return console['log'](_0x314115(0x190)),console[_0x314115(0x177)](_0x314115(0x19e),_0x3bbd7b),console[_0x314115(0x177)](_0x314115(0x18b),_0x14b8f3),console['log']('Amount:',_0x2351b1,_0x2b7c28),loggerService_1[_0x314115(0x184)][_0x314115(0x192)](_0x314115(0x191),_0x314115(0x173),_0x314115(0x17d),{'paymentId':_0x3bbd7b,'amount':_0x2351b1,'currency':_0x2b7c28,'orderId':_0x27a0ad}),{'gateway_payment_id':_0x3bbd7b,'payment_url':_0x14b8f3};}catch(_0x79c4ff){console['error']('===\x20AMER\x20SERVICE\x20ERROR\x20==='),console[_0x314115(0x197)](_0x314115(0x1a1),_0x79c4ff),loggerService_1[_0x314115(0x184)][_0x314115(0x1a5)](_0x314115(0x191),_0x314115(0x173),_0x79c4ff);if(_0x79c4ff instanceof Error){console[_0x314115(0x197)](_0x314115(0x19f),_0x79c4ff[_0x314115(0x1a3)]),console[_0x314115(0x197)](_0x314115(0x18f),_0x79c4ff[_0x314115(0x1a8)]);throw new Error(_0x314115(0x18d)+_0x79c4ff[_0x314115(0x1a3)]);}throw new Error('Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error');}}async[a61_0x3efbae(0x17c)](_0x4fa76a){const _0x10a961=a61_0x3efbae;console[_0x10a961(0x177)](_0x10a961(0x17a)+_0x4fa76a);try{return loggerService_1[_0x10a961(0x184)][_0x10a961(0x192)](_0x10a961(0x191),'/payment/verify/'+_0x4fa76a,_0x10a961(0x17d),{}),{'status':_0x10a961(0x194)};}catch(_0x333473){console[_0x10a961(0x197)]('Amer\x20payment\x20verification\x20error:',_0x333473),loggerService_1[_0x10a961(0x184)][_0x10a961(0x1a5)](_0x10a961(0x191),_0x10a961(0x198)+_0x4fa76a,_0x333473);throw new Error(_0x10a961(0x193)+(_0x333473 instanceof Error?_0x333473[_0x10a961(0x1a3)]:_0x10a961(0x185)));}}async['processWebhook'](_0x1bddc7){const _0x57f030=a61_0x3efbae;console['log'](_0x57f030(0x182),_0x1bddc7);let _0x69fafa=_0x57f030(0x194);if(_0x1bddc7[_0x57f030(0x181)]===!![])_0x69fafa=_0x57f030(0x187);else _0x1bddc7[_0x57f030(0x181)]===![]&&(_0x69fafa=_0x57f030(0x1a6));const _0x366b89={};return _0x1bddc7[_0x57f030(0x17b)]&&(_0x366b89[_0x57f030(0x17b)]=_0x1bddc7[_0x57f030(0x17b)]),_0x1bddc7[_0x57f030(0x1a9)]&&(_0x366b89[_0x57f030(0x1a9)]=_0x1bddc7[_0x57f030(0x1a9)]),_0x1bddc7[_0x57f030(0x176)]&&(_0x366b89[_0x57f030(0x176)]=_0x1bddc7[_0x57f030(0x176)],_0x366b89['gatewayPaymentId']=_0x1bddc7[_0x57f030(0x176)]),console[_0x57f030(0x177)](_0x57f030(0x180)+_0x69fafa),{'paymentId':_0x1bddc7[_0x57f030(0x19b)]||_0x1bddc7[_0x57f030(0x18c)]||'','status':_0x69fafa,'amount':_0x1bddc7[_0x57f030(0x18a)],'currency':_0x1bddc7[_0x57f030(0x19a)],'additionalInfo':_0x366b89};}}exports[a61_0x3efbae(0x18e)]=AmerService;