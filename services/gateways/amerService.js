'use strict';const a45_0x19c930=a45_0xbcfc;(function(_0x129cc8,_0x473dff){const _0x457a0c=a45_0xbcfc,_0x4988cf=_0x129cc8();while(!![]){try{const _0x2f7e6a=parseInt(_0x457a0c(0x16f))/0x1+-parseInt(_0x457a0c(0x165))/0x2+parseInt(_0x457a0c(0x151))/0x3+parseInt(_0x457a0c(0x152))/0x4+parseInt(_0x457a0c(0x162))/0x5*(parseInt(_0x457a0c(0x155))/0x6)+-parseInt(_0x457a0c(0x171))/0x7+-parseInt(_0x457a0c(0x16e))/0x8;if(_0x2f7e6a===_0x473dff)break;else _0x4988cf['push'](_0x4988cf['shift']());}catch(_0xe453be){_0x4988cf['push'](_0x4988cf['shift']());}}}(a45_0x2dfe,0x5a217));Object[a45_0x19c930(0x15f)](exports,a45_0x19c930(0x146),{'value':!![]}),exports[a45_0x19c930(0x16a)]=void 0x0;function a45_0x2dfe(){const _0x10180f=['log','loggerService','838065pKTGwf','253000dAZukV','GET','orderId','317868vxDkOz','&currency=','paymentMethod','success','&order=','logWhiteDomainError','message','Payment\x20ID:','/payment','PENDING','defineProperty','error','toUpperCase','40brxZkN','logWhiteDomainRequest','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20','1309934PUpagO','Payment\x20URL:','/payment.php?payment_id=','Error\x20details:','gatewayPaymentId','AmerService','transactionId','paymentId','stack','384584CloJYo','508922gvCGtS','../loggerService','1421952NGPWXo','&amount=','amount','Failed\x20to\x20verify\x20Amer\x20payment:\x20','verifyPayment','cardLast4','__esModule','üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain','===\x20AMER\x20SERVICE\x20ERROR\x20===','https://api2.trapay.uk','/payment/verify/','amer','currency','Amount:','apiUrl'];a45_0x2dfe=function(){return _0x10180f;};return a45_0x2dfe();}function a45_0xbcfc(_0x264019,_0x21be0c){const _0x2dfe52=a45_0x2dfe();return a45_0xbcfc=function(_0xbcfce2,_0x353336){_0xbcfce2=_0xbcfce2-0x141;let _0x44da05=_0x2dfe52[_0xbcfce2];return _0x44da05;},a45_0xbcfc(_0x264019,_0x21be0c);}const loggerService_1=require(a45_0x19c930(0x170));class AmerService{constructor(){const _0x8f8d24=a45_0x19c930;this[_0x8f8d24(0x14e)]=_0x8f8d24(0x149),console[_0x8f8d24(0x14f)](_0x8f8d24(0x147));}async['createPaymentLink'](_0x52e3cc){const _0x54ee60=a45_0x19c930,{paymentId:_0x3a8246,orderId:_0x5a3d92,orderName:_0xa74502,amount:_0x2fa4ce,currency:_0x175f83,usage:_0x3ca7a0,maxPayments:_0x4619e8,successUrl:_0x106a19,failUrl:_0x49e461}=_0x52e3cc,_0x3b2165=_0x175f83[_0x54ee60(0x161)]();console[_0x54ee60(0x14f)]('üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20'+_0x5a3d92),console[_0x54ee60(0x14f)]('üí∞\x20Amount:\x20'+_0x2fa4ce+'\x20'+_0x3b2165);try{const _0x1bfb6d=this['apiUrl']+_0x54ee60(0x167)+_0x3a8246+_0x54ee60(0x141)+_0x2fa4ce+_0x54ee60(0x156)+_0x3b2165+_0x54ee60(0x159)+_0x5a3d92;return console[_0x54ee60(0x14f)]('===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20==='),console['log'](_0x54ee60(0x15c),_0x3a8246),console[_0x54ee60(0x14f)](_0x54ee60(0x166),_0x1bfb6d),console[_0x54ee60(0x14f)](_0x54ee60(0x14d),_0x2fa4ce,_0x3b2165),loggerService_1[_0x54ee60(0x150)][_0x54ee60(0x163)](_0x54ee60(0x14b),_0x54ee60(0x15d),_0x54ee60(0x153),{'paymentId':_0x3a8246,'amount':_0x2fa4ce,'currency':_0x3b2165,'orderId':_0x5a3d92}),{'gateway_payment_id':_0x3a8246,'payment_url':_0x1bfb6d};}catch(_0x118ca9){console['error'](_0x54ee60(0x148)),console[_0x54ee60(0x160)](_0x54ee60(0x168),_0x118ca9),loggerService_1[_0x54ee60(0x150)][_0x54ee60(0x15a)]('amer','/payment',_0x118ca9);if(_0x118ca9 instanceof Error){console[_0x54ee60(0x160)]('Error\x20message:',_0x118ca9[_0x54ee60(0x15b)]),console['error']('Error\x20stack:',_0x118ca9[_0x54ee60(0x16d)]);throw new Error(_0x54ee60(0x164)+_0x118ca9[_0x54ee60(0x15b)]);}throw new Error('Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error');}}async[a45_0x19c930(0x144)](_0x519672){const _0x5dbd84=a45_0x19c930;console[_0x5dbd84(0x14f)]('üîç\x20Verifying\x20Amer\x20payment:\x20'+_0x519672);try{return loggerService_1[_0x5dbd84(0x150)]['logWhiteDomainRequest'](_0x5dbd84(0x14b),_0x5dbd84(0x14a)+_0x519672,_0x5dbd84(0x153),{}),{'status':_0x5dbd84(0x15e)};}catch(_0x39185a){console[_0x5dbd84(0x160)]('Amer\x20payment\x20verification\x20error:',_0x39185a),loggerService_1['loggerService'][_0x5dbd84(0x15a)]('amer','/payment/verify/'+_0x519672,_0x39185a);throw new Error(_0x5dbd84(0x143)+(_0x39185a instanceof Error?_0x39185a[_0x5dbd84(0x15b)]:'Unknown\x20error'));}}async['processWebhook'](_0x41e4ef){const _0xd379b7=a45_0x19c930;console['log']('Processing\x20Amer\x20webhook:',_0x41e4ef);let _0xc04fca=_0xd379b7(0x15e);if(_0x41e4ef[_0xd379b7(0x158)]===!![])_0xc04fca='PAID';else _0x41e4ef['success']===![]&&(_0xc04fca='FAILED');const _0x4feeff={};return _0x41e4ef[_0xd379b7(0x145)]&&(_0x4feeff[_0xd379b7(0x145)]=_0x41e4ef['cardLast4']),_0x41e4ef['paymentMethod']&&(_0x4feeff[_0xd379b7(0x157)]=_0x41e4ef[_0xd379b7(0x157)]),_0x41e4ef['transactionId']&&(_0x4feeff[_0xd379b7(0x16b)]=_0x41e4ef[_0xd379b7(0x16b)],_0x4feeff[_0xd379b7(0x169)]=_0x41e4ef[_0xd379b7(0x16b)]),console['log']('üîÑ\x20Amer\x20webhook\x20processed:\x20status='+_0xc04fca),{'paymentId':_0x41e4ef[_0xd379b7(0x16c)]||_0x41e4ef[_0xd379b7(0x154)]||'','status':_0xc04fca,'amount':_0x41e4ef[_0xd379b7(0x142)],'currency':_0x41e4ef[_0xd379b7(0x14c)],'additionalInfo':_0x4feeff};}}exports[a45_0x19c930(0x16a)]=AmerService;