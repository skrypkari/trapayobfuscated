'use strict';const a41_0x245fa3=a41_0x233e;(function(_0x59477e,_0x488cc6){const _0x3c4861=a41_0x233e,_0x908aff=_0x59477e();while(!![]){try{const _0x2bcb8b=parseInt(_0x3c4861(0x129))/0x1*(-parseInt(_0x3c4861(0x12d))/0x2)+parseInt(_0x3c4861(0x12e))/0x3+parseInt(_0x3c4861(0x12c))/0x4*(-parseInt(_0x3c4861(0x153))/0x5)+parseInt(_0x3c4861(0x13e))/0x6+parseInt(_0x3c4861(0x13f))/0x7*(parseInt(_0x3c4861(0x134))/0x8)+parseInt(_0x3c4861(0x141))/0x9+-parseInt(_0x3c4861(0x14c))/0xa*(-parseInt(_0x3c4861(0x152))/0xb);if(_0x2bcb8b===_0x488cc6)break;else _0x908aff['push'](_0x908aff['shift']());}catch(_0x2b5609){_0x908aff['push'](_0x908aff['shift']());}}}(a41_0x573a,0xde4d8));function a41_0x233e(_0x3f0370,_0x5c1236){const _0x573acf=a41_0x573a();return a41_0x233e=function(_0x233ef1,_0x1a4d51){_0x233ef1=_0x233ef1-0x128;let _0xa007dd=_0x573acf[_0x233ef1];return _0xa007dd;},a41_0x233e(_0x3f0370,_0x5c1236);}function a41_0x573a(){const _0x2d3156=['createPaymentLink','/payment','loggerService','gatewayPaymentId','Payment\x20ID:','../loggerService','===\x20AMER\x20SERVICE\x20ERROR\x20===','1022101ifqGQc','Error\x20details:','GET','7159472WZAzkQ','2svYZDM','857007eOIUJW','Error\x20message:','stack','log','/payment.php?payment_id=','__esModule','8iLHIhS','success','logWhiteDomainRequest','processWebhook','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20','Unknown\x20error','üîç\x20Verifying\x20Amer\x20payment:\x20','error','&amount=','üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain','10339992nbPBaX','3016454HowCRn','paymentMethod','7372656kScGFF','toUpperCase','Processing\x20Amer\x20webhook:','message','amount','defineProperty','orderId','FAILED','&currency=','===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20===','üîÑ\x20Amer\x20webhook\x20processed:\x20status=','20bljVSG','transactionId','cardLast4','https://api2.trapay.uk','PENDING','amer','2548777InjoCk','5YJdPLN','logWhiteDomainError','Amount:','Amer\x20payment\x20verification\x20error:','apiUrl','Failed\x20to\x20verify\x20Amer\x20payment:\x20'];a41_0x573a=function(){return _0x2d3156;};return a41_0x573a();}Object[a41_0x245fa3(0x146)](exports,a41_0x245fa3(0x133),{'value':!![]}),exports['AmerService']=void 0x0;const loggerService_1=require(a41_0x245fa3(0x15e));class AmerService{constructor(){const _0x381f34=a41_0x245fa3;this[_0x381f34(0x157)]=_0x381f34(0x14f),console[_0x381f34(0x131)](_0x381f34(0x13d));}async[a41_0x245fa3(0x159)](_0x17708c){const _0x409b23=a41_0x245fa3,{paymentId:_0x2087be,orderId:_0x3bd734,orderName:_0x1c77e5,amount:_0xaeacba,currency:_0x2f3389,usage:_0x7eda78,maxPayments:_0x555dd2,successUrl:_0x59d967,failUrl:_0x2d0126}=_0x17708c,_0x2f18c4=_0x2f3389[_0x409b23(0x142)]();console['log']('üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20'+_0x3bd734),console[_0x409b23(0x131)]('üí∞\x20Amount:\x20'+_0xaeacba+'\x20'+_0x2f18c4);try{const _0x4dbda5=this[_0x409b23(0x157)]+_0x409b23(0x132)+_0x2087be+_0x409b23(0x13c)+_0xaeacba+_0x409b23(0x149)+_0x2f18c4+'&order='+_0x3bd734;return console['log'](_0x409b23(0x14a)),console[_0x409b23(0x131)](_0x409b23(0x15d),_0x2087be),console[_0x409b23(0x131)]('Payment\x20URL:',_0x4dbda5),console[_0x409b23(0x131)](_0x409b23(0x155),_0xaeacba,_0x2f18c4),loggerService_1[_0x409b23(0x15b)][_0x409b23(0x136)]('amer',_0x409b23(0x15a),_0x409b23(0x12b),{'paymentId':_0x2087be,'amount':_0xaeacba,'currency':_0x2f18c4,'orderId':_0x3bd734}),{'gateway_payment_id':_0x2087be,'payment_url':_0x4dbda5};}catch(_0x36e59e){console[_0x409b23(0x13b)](_0x409b23(0x128)),console[_0x409b23(0x13b)](_0x409b23(0x12a),_0x36e59e),loggerService_1[_0x409b23(0x15b)][_0x409b23(0x154)](_0x409b23(0x151),_0x409b23(0x15a),_0x36e59e);if(_0x36e59e instanceof Error){console[_0x409b23(0x13b)](_0x409b23(0x12f),_0x36e59e[_0x409b23(0x144)]),console[_0x409b23(0x13b)]('Error\x20stack:',_0x36e59e[_0x409b23(0x130)]);throw new Error(_0x409b23(0x138)+_0x36e59e[_0x409b23(0x144)]);}throw new Error('Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error');}}async['verifyPayment'](_0x5f3e4b){const _0x3d15d8=a41_0x245fa3;console[_0x3d15d8(0x131)](_0x3d15d8(0x13a)+_0x5f3e4b);try{return loggerService_1[_0x3d15d8(0x15b)][_0x3d15d8(0x136)](_0x3d15d8(0x151),'/payment/verify/'+_0x5f3e4b,'GET',{}),{'status':'PENDING'};}catch(_0x5708fc){console['error'](_0x3d15d8(0x156),_0x5708fc),loggerService_1['loggerService'][_0x3d15d8(0x154)]('amer','/payment/verify/'+_0x5f3e4b,_0x5708fc);throw new Error(_0x3d15d8(0x158)+(_0x5708fc instanceof Error?_0x5708fc[_0x3d15d8(0x144)]:_0x3d15d8(0x139)));}}async[a41_0x245fa3(0x137)](_0x29556e){const _0x1a7796=a41_0x245fa3;console[_0x1a7796(0x131)](_0x1a7796(0x143),_0x29556e);let _0x370d88=_0x1a7796(0x150);if(_0x29556e[_0x1a7796(0x135)]===!![])_0x370d88='PAID';else _0x29556e[_0x1a7796(0x135)]===![]&&(_0x370d88=_0x1a7796(0x148));const _0x35a7e8={};return _0x29556e['cardLast4']&&(_0x35a7e8['cardLast4']=_0x29556e[_0x1a7796(0x14e)]),_0x29556e[_0x1a7796(0x140)]&&(_0x35a7e8[_0x1a7796(0x140)]=_0x29556e['paymentMethod']),_0x29556e['transactionId']&&(_0x35a7e8['transactionId']=_0x29556e[_0x1a7796(0x14d)],_0x35a7e8[_0x1a7796(0x15c)]=_0x29556e[_0x1a7796(0x14d)]),console[_0x1a7796(0x131)](_0x1a7796(0x14b)+_0x370d88),{'paymentId':_0x29556e['paymentId']||_0x29556e[_0x1a7796(0x147)]||'','status':_0x370d88,'amount':_0x29556e[_0x1a7796(0x145)],'currency':_0x29556e['currency'],'additionalInfo':_0x35a7e8};}}exports['AmerService']=AmerService;