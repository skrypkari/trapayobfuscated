'use strict';function a43_0x4fff(_0x14298b,_0x33e4ba){const _0x1f220b=a43_0x1f22();return a43_0x4fff=function(_0x4fff3f,_0x5e39ad){_0x4fff3f=_0x4fff3f-0x194;let _0x2a7e0a=_0x1f220b[_0x4fff3f];return _0x2a7e0a;},a43_0x4fff(_0x14298b,_0x33e4ba);}function a43_0x1f22(){const _0x23bf83=['amount','__esModule','===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20===','transactionId','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error','PENDING','5djwtLk','Failed\x20to\x20verify\x20Amer\x20payment:\x20','7584840EscUuO','/payment.php?payment_id=','log','3317720FAFnuK','8535318jsNUlr','üí∞\x20Amount:\x20','Error\x20message:','apiUrl','/payment','Error\x20details:','loggerService','toUpperCase','Amount:','verifyPayment','currency','AmerService','https://api2.trapay.uk','message','2668276mNUWHu','Processing\x20Amer\x20webhook:','../loggerService','&order=','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20','Unknown\x20error','processWebhook','&amount=','üîÑ\x20Amer\x20webhook\x20processed:\x20status=','paymentId','Amer\x20payment\x20verification\x20error:','error','/payment/verify/','Payment\x20ID:','&currency=','PAID','logWhiteDomainError','defineProperty','194607MprjCf','===\x20AMER\x20SERVICE\x20ERROR\x20===','14cBldgI','2167437RAYsIr','success','FAILED','3082576midihT','gatewayPaymentId','createPaymentLink','paymentMethod','logWhiteDomainRequest','cardLast4','amer'];a43_0x1f22=function(){return _0x23bf83;};return a43_0x1f22();}const a43_0x500439=a43_0x4fff;(function(_0x541b94,_0x524eed){const _0x40487a=a43_0x4fff,_0x19d4fb=_0x541b94();while(!![]){try{const _0x4f98f5=-parseInt(_0x40487a(0x1ca))/0x1*(-parseInt(_0x40487a(0x1cc))/0x2)+parseInt(_0x40487a(0x194))/0x3+-parseInt(_0x40487a(0x1b8))/0x4*(parseInt(_0x40487a(0x1a4))/0x5)+-parseInt(_0x40487a(0x1aa))/0x6+-parseInt(_0x40487a(0x197))/0x7+parseInt(_0x40487a(0x1a9))/0x8+parseInt(_0x40487a(0x1a6))/0x9;if(_0x4f98f5===_0x524eed)break;else _0x19d4fb['push'](_0x19d4fb['shift']());}catch(_0x33af9a){_0x19d4fb['push'](_0x19d4fb['shift']());}}}(a43_0x1f22,0xc64b5));Object[a43_0x500439(0x1c9)](exports,a43_0x500439(0x19f),{'value':!![]}),exports[a43_0x500439(0x1b5)]=void 0x0;const loggerService_1=require(a43_0x500439(0x1ba));class AmerService{constructor(){const _0x53df5e=a43_0x500439;this[_0x53df5e(0x1ad)]=_0x53df5e(0x1b6),console[_0x53df5e(0x1a8)]('üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain');}async[a43_0x500439(0x199)](_0x1f70a1){const _0x5632a4=a43_0x500439,{paymentId:_0x13eaaa,orderId:_0x15020e,orderName:_0x306edb,amount:_0x3b397c,currency:_0x233e71,usage:_0x1d1e87,maxPayments:_0x4c6a93,successUrl:_0x24764e,failUrl:_0xd6e539}=_0x1f70a1,_0x25acc0=_0x233e71[_0x5632a4(0x1b1)]();console['log']('üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20'+_0x15020e),console[_0x5632a4(0x1a8)](_0x5632a4(0x1ab)+_0x3b397c+'\x20'+_0x25acc0);try{const _0x3a67a3=this['apiUrl']+_0x5632a4(0x1a7)+_0x13eaaa+_0x5632a4(0x1bf)+_0x3b397c+_0x5632a4(0x1c6)+_0x25acc0+_0x5632a4(0x1bb)+_0x15020e;return console[_0x5632a4(0x1a8)](_0x5632a4(0x1a0)),console[_0x5632a4(0x1a8)](_0x5632a4(0x1c5),_0x13eaaa),console['log']('Payment\x20URL:',_0x3a67a3),console[_0x5632a4(0x1a8)](_0x5632a4(0x1b2),_0x3b397c,_0x25acc0),loggerService_1['loggerService'][_0x5632a4(0x19b)]('amer','/payment','GET',{'paymentId':_0x13eaaa,'amount':_0x3b397c,'currency':_0x25acc0,'orderId':_0x15020e}),{'gateway_payment_id':_0x13eaaa,'payment_url':_0x3a67a3};}catch(_0x315eeb){console[_0x5632a4(0x1c3)](_0x5632a4(0x1cb)),console[_0x5632a4(0x1c3)](_0x5632a4(0x1af),_0x315eeb),loggerService_1['loggerService'][_0x5632a4(0x1c8)](_0x5632a4(0x19d),_0x5632a4(0x1ae),_0x315eeb);if(_0x315eeb instanceof Error){console[_0x5632a4(0x1c3)](_0x5632a4(0x1ac),_0x315eeb[_0x5632a4(0x1b7)]),console['error']('Error\x20stack:',_0x315eeb['stack']);throw new Error(_0x5632a4(0x1bc)+_0x315eeb['message']);}throw new Error(_0x5632a4(0x1a2));}}async[a43_0x500439(0x1b3)](_0x24c44c){const _0x58a9a9=a43_0x500439;console['log']('üîç\x20Verifying\x20Amer\x20payment:\x20'+_0x24c44c);try{return loggerService_1[_0x58a9a9(0x1b0)][_0x58a9a9(0x19b)](_0x58a9a9(0x19d),'/payment/verify/'+_0x24c44c,'GET',{}),{'status':'PENDING'};}catch(_0x2b86dc){console['error'](_0x58a9a9(0x1c2),_0x2b86dc),loggerService_1[_0x58a9a9(0x1b0)][_0x58a9a9(0x1c8)]('amer',_0x58a9a9(0x1c4)+_0x24c44c,_0x2b86dc);throw new Error(_0x58a9a9(0x1a5)+(_0x2b86dc instanceof Error?_0x2b86dc[_0x58a9a9(0x1b7)]:_0x58a9a9(0x1bd)));}}async[a43_0x500439(0x1be)](_0x3827ed){const _0x743185=a43_0x500439;console[_0x743185(0x1a8)](_0x743185(0x1b9),_0x3827ed);let _0xe273dd=_0x743185(0x1a3);if(_0x3827ed['success']===!![])_0xe273dd=_0x743185(0x1c7);else _0x3827ed[_0x743185(0x195)]===![]&&(_0xe273dd=_0x743185(0x196));const _0x49245e={};return _0x3827ed['cardLast4']&&(_0x49245e[_0x743185(0x19c)]=_0x3827ed['cardLast4']),_0x3827ed[_0x743185(0x19a)]&&(_0x49245e['paymentMethod']=_0x3827ed['paymentMethod']),_0x3827ed[_0x743185(0x1a1)]&&(_0x49245e[_0x743185(0x1a1)]=_0x3827ed[_0x743185(0x1a1)],_0x49245e[_0x743185(0x198)]=_0x3827ed[_0x743185(0x1a1)]),console['log'](_0x743185(0x1c0)+_0xe273dd),{'paymentId':_0x3827ed[_0x743185(0x1c1)]||_0x3827ed['orderId']||'','status':_0xe273dd,'amount':_0x3827ed[_0x743185(0x19e)],'currency':_0x3827ed[_0x743185(0x1b4)],'additionalInfo':_0x49245e};}}exports[a43_0x500439(0x1b5)]=AmerService;