'use strict';const a41_0x593ba4=a41_0x4ce5;(function(_0x1ab02e,_0x132cd4){const _0x5c34f9=a41_0x4ce5,_0xab58f1=_0x1ab02e();while(!![]){try{const _0x2a8bd5=-parseInt(_0x5c34f9(0x1d9))/0x1*(parseInt(_0x5c34f9(0x1bd))/0x2)+-parseInt(_0x5c34f9(0x1d5))/0x3+parseInt(_0x5c34f9(0x1c2))/0x4*(-parseInt(_0x5c34f9(0x1ce))/0x5)+-parseInt(_0x5c34f9(0x1de))/0x6+-parseInt(_0x5c34f9(0x1c9))/0x7*(-parseInt(_0x5c34f9(0x1c8))/0x8)+-parseInt(_0x5c34f9(0x1b3))/0x9+parseInt(_0x5c34f9(0x1bb))/0xa;if(_0x2a8bd5===_0x132cd4)break;else _0xab58f1['push'](_0xab58f1['shift']());}catch(_0x506b2f){_0xab58f1['push'](_0xab58f1['shift']());}}}(a41_0x48d7,0x79ead));function a41_0x48d7(){const _0x2b803b=['toUpperCase','apiUrl','1318QpSRls','/payment/verify/','Unknown\x20error','Payment\x20ID:','defineProperty','4568298sevXIY','verifyPayment','message','&currency=','/payment.php?payment_id=','transactionId','===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20===','Payment\x20URL:','246546aOqmwv','success','processWebhook','__esModule','FAILED','amer','log','logWhiteDomainRequest','26610400RNinhJ','üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20','850oKdgAg','Failed\x20to\x20verify\x20Amer\x20payment:\x20','paymentMethod','logWhiteDomainError','Processing\x20Amer\x20webhook:','172LgKzzj','üîç\x20Verifying\x20Amer\x20payment:\x20','&order=','gatewayPaymentId','cardLast4','error','25656NfpENS','1631tWxGUw','/payment','orderId','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20','loggerService','103895iDHtEH','amount','üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain','AmerService','GET','PENDING','../loggerService','1999422PoUxPS','&amount='];a41_0x48d7=function(){return _0x2b803b;};return a41_0x48d7();}Object[a41_0x593ba4(0x1dd)](exports,a41_0x593ba4(0x1b6),{'value':!![]}),exports['AmerService']=void 0x0;function a41_0x4ce5(_0x4b29c6,_0x3c4bc7){const _0x48d7b2=a41_0x48d7();return a41_0x4ce5=function(_0x4ce5cc,_0xa60c6){_0x4ce5cc=_0x4ce5cc-0x1ad;let _0x3fc9f8=_0x48d7b2[_0x4ce5cc];return _0x3fc9f8;},a41_0x4ce5(_0x4b29c6,_0x3c4bc7);}const loggerService_1=require(a41_0x593ba4(0x1d4));class AmerService{constructor(){const _0x1ecbb2=a41_0x593ba4;this[_0x1ecbb2(0x1d8)]='https://api2.trapay.uk',console[_0x1ecbb2(0x1b9)](_0x1ecbb2(0x1d0));}async['createPaymentLink'](_0x544e95){const _0x386a39=a41_0x593ba4,{paymentId:_0x384160,orderId:_0x2f7b03,orderName:_0xb44f6b,amount:_0x5b260a,currency:_0x5a4ef9,usage:_0xf1f55b,maxPayments:_0x25b4c5,successUrl:_0x368053,failUrl:_0x22c710}=_0x544e95,_0x3e7d46=_0x5a4ef9[_0x386a39(0x1d7)]();console[_0x386a39(0x1b9)](_0x386a39(0x1bc)+_0x2f7b03),console[_0x386a39(0x1b9)]('üí∞\x20Amount:\x20'+_0x5b260a+'\x20'+_0x3e7d46);try{const _0x478525=this[_0x386a39(0x1d8)]+_0x386a39(0x1af)+_0x384160+_0x386a39(0x1d6)+_0x5b260a+_0x386a39(0x1ae)+_0x3e7d46+_0x386a39(0x1c4)+_0x2f7b03;return console[_0x386a39(0x1b9)](_0x386a39(0x1b1)),console[_0x386a39(0x1b9)](_0x386a39(0x1dc),_0x384160),console[_0x386a39(0x1b9)](_0x386a39(0x1b2),_0x478525),console['log']('Amount:',_0x5b260a,_0x3e7d46),loggerService_1[_0x386a39(0x1cd)][_0x386a39(0x1ba)]('amer',_0x386a39(0x1ca),_0x386a39(0x1d2),{'paymentId':_0x384160,'amount':_0x5b260a,'currency':_0x3e7d46,'orderId':_0x2f7b03}),{'gateway_payment_id':_0x384160,'payment_url':_0x478525};}catch(_0x5f3310){console[_0x386a39(0x1c7)]('===\x20AMER\x20SERVICE\x20ERROR\x20==='),console['error']('Error\x20details:',_0x5f3310),loggerService_1[_0x386a39(0x1cd)]['logWhiteDomainError'](_0x386a39(0x1b8),'/payment',_0x5f3310);if(_0x5f3310 instanceof Error){console[_0x386a39(0x1c7)]('Error\x20message:',_0x5f3310[_0x386a39(0x1ad)]),console[_0x386a39(0x1c7)]('Error\x20stack:',_0x5f3310['stack']);throw new Error(_0x386a39(0x1cc)+_0x5f3310['message']);}throw new Error('Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error');}}async[a41_0x593ba4(0x1df)](_0xac35c7){const _0x93c3cc=a41_0x593ba4;console['log'](_0x93c3cc(0x1c3)+_0xac35c7);try{return loggerService_1['loggerService'][_0x93c3cc(0x1ba)]('amer',_0x93c3cc(0x1da)+_0xac35c7,_0x93c3cc(0x1d2),{}),{'status':'PENDING'};}catch(_0x3d06af){console[_0x93c3cc(0x1c7)]('Amer\x20payment\x20verification\x20error:',_0x3d06af),loggerService_1[_0x93c3cc(0x1cd)][_0x93c3cc(0x1c0)](_0x93c3cc(0x1b8),'/payment/verify/'+_0xac35c7,_0x3d06af);throw new Error(_0x93c3cc(0x1be)+(_0x3d06af instanceof Error?_0x3d06af[_0x93c3cc(0x1ad)]:_0x93c3cc(0x1db)));}}async[a41_0x593ba4(0x1b5)](_0xe8376d){const _0x28c23d=a41_0x593ba4;console[_0x28c23d(0x1b9)](_0x28c23d(0x1c1),_0xe8376d);let _0x3d53af=_0x28c23d(0x1d3);if(_0xe8376d[_0x28c23d(0x1b4)]===!![])_0x3d53af='PAID';else _0xe8376d[_0x28c23d(0x1b4)]===![]&&(_0x3d53af=_0x28c23d(0x1b7));const _0x58441c={};return _0xe8376d[_0x28c23d(0x1c6)]&&(_0x58441c[_0x28c23d(0x1c6)]=_0xe8376d[_0x28c23d(0x1c6)]),_0xe8376d['paymentMethod']&&(_0x58441c['paymentMethod']=_0xe8376d[_0x28c23d(0x1bf)]),_0xe8376d['transactionId']&&(_0x58441c[_0x28c23d(0x1b0)]=_0xe8376d[_0x28c23d(0x1b0)],_0x58441c[_0x28c23d(0x1c5)]=_0xe8376d['transactionId']),console[_0x28c23d(0x1b9)]('üîÑ\x20Amer\x20webhook\x20processed:\x20status='+_0x3d53af),{'paymentId':_0xe8376d['paymentId']||_0xe8376d[_0x28c23d(0x1cb)]||'','status':_0x3d53af,'amount':_0xe8376d[_0x28c23d(0x1cf)],'currency':_0xe8376d['currency'],'additionalInfo':_0x58441c};}}exports[a41_0x593ba4(0x1d1)]=AmerService;