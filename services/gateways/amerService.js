'use strict';function a41_0x53ba(_0x55bc05,_0x130244){const _0x41bcea=a41_0x41bc();return a41_0x53ba=function(_0x53bab8,_0x1b59ad){_0x53bab8=_0x53bab8-0x67;let _0x2c2a8f=_0x41bcea[_0x53bab8];return _0x2c2a8f;},a41_0x53ba(_0x55bc05,_0x130244);}function a41_0x41bc(){const _0x14a62a=['defineProperty','Error\x20message:','PENDING','orderId','transactionId','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20','üîç\x20Verifying\x20Amer\x20payment:\x20','&currency=','cardLast4','https://api2.trapay.uk','Payment\x20URL:','üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20','Amer\x20payment\x20verification\x20error:','/payment','/payment.php?payment_id=','151538nutgle','Error\x20stack:','===\x20AMER\x20SERVICE\x20ERROR\x20===','loggerService','logWhiteDomainRequest','36tcjzCs','37045AEyIjd','6226836dpSPqo','Payment\x20ID:','üîÑ\x20Amer\x20webhook\x20processed:\x20status=','677868mtKXZe','paymentId','amer','FAILED','üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain','__esModule','message','1iLbIRx','GET','../loggerService','log','stack','apiUrl','PAID','toUpperCase','526722MHbZym','851680mvGegR','Amount:','createPaymentLink','===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20===','2545980oPUbkl','/payment/verify/','14zqLaFW','processWebhook','Processing\x20Amer\x20webhook:','paymentMethod','Unknown\x20error','&order=','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error','AmerService','error','68PXFbeK','success'];a41_0x41bc=function(){return _0x14a62a;};return a41_0x41bc();}const a41_0x33d049=a41_0x53ba;(function(_0x382a39,_0xf9f645){const _0x212824=a41_0x53ba,_0x4900f6=_0x382a39();while(!![]){try{const _0x2eefa0=-parseInt(_0x212824(0x8b))/0x1*(parseInt(_0x212824(0x7a))/0x2)+parseInt(_0x212824(0x84))/0x3+parseInt(_0x212824(0x69))/0x4*(parseInt(_0x212824(0x80))/0x5)+parseInt(_0x212824(0x93))/0x6*(-parseInt(_0x212824(0x9a))/0x7)+-parseInt(_0x212824(0x94))/0x8*(-parseInt(_0x212824(0x7f))/0x9)+parseInt(_0x212824(0x98))/0xa+-parseInt(_0x212824(0x81))/0xb;if(_0x2eefa0===_0xf9f645)break;else _0x4900f6['push'](_0x4900f6['shift']());}catch(_0xabf58c){_0x4900f6['push'](_0x4900f6['shift']());}}}(a41_0x41bc,0x34790));Object[a41_0x33d049(0x6b)](exports,a41_0x33d049(0x89),{'value':!![]}),exports[a41_0x33d049(0x67)]=void 0x0;const loggerService_1=require(a41_0x33d049(0x8d));class AmerService{constructor(){const _0x13c53a=a41_0x33d049;this[_0x13c53a(0x90)]=_0x13c53a(0x74),console[_0x13c53a(0x8e)](_0x13c53a(0x88));}async[a41_0x33d049(0x96)](_0x3ca85d){const _0x39f6bf=a41_0x33d049,{paymentId:_0x328d3f,orderId:_0x5ed169,orderName:_0x5bf8fb,amount:_0x14f407,currency:_0x2e4b7e,usage:_0x546bdc,maxPayments:_0x42d93a,successUrl:_0x422df5,failUrl:_0x410bd3}=_0x3ca85d,_0x1342ef=_0x2e4b7e[_0x39f6bf(0x92)]();console['log'](_0x39f6bf(0x76)+_0x5ed169),console[_0x39f6bf(0x8e)]('üí∞\x20Amount:\x20'+_0x14f407+'\x20'+_0x1342ef);try{const _0x520726=this[_0x39f6bf(0x90)]+_0x39f6bf(0x79)+_0x328d3f+'&amount='+_0x14f407+_0x39f6bf(0x72)+_0x1342ef+_0x39f6bf(0x9f)+_0x5ed169;return console[_0x39f6bf(0x8e)](_0x39f6bf(0x97)),console[_0x39f6bf(0x8e)](_0x39f6bf(0x82),_0x328d3f),console[_0x39f6bf(0x8e)](_0x39f6bf(0x75),_0x520726),console[_0x39f6bf(0x8e)](_0x39f6bf(0x95),_0x14f407,_0x1342ef),loggerService_1[_0x39f6bf(0x7d)][_0x39f6bf(0x7e)](_0x39f6bf(0x86),_0x39f6bf(0x78),_0x39f6bf(0x8c),{'paymentId':_0x328d3f,'amount':_0x14f407,'currency':_0x1342ef,'orderId':_0x5ed169}),{'gateway_payment_id':_0x328d3f,'payment_url':_0x520726};}catch(_0x509175){console['error'](_0x39f6bf(0x7c)),console[_0x39f6bf(0x68)]('Error\x20details:',_0x509175),loggerService_1[_0x39f6bf(0x7d)]['logWhiteDomainError'](_0x39f6bf(0x86),_0x39f6bf(0x78),_0x509175);if(_0x509175 instanceof Error){console['error'](_0x39f6bf(0x6c),_0x509175[_0x39f6bf(0x8a)]),console[_0x39f6bf(0x68)](_0x39f6bf(0x7b),_0x509175[_0x39f6bf(0x8f)]);throw new Error(_0x39f6bf(0x70)+_0x509175[_0x39f6bf(0x8a)]);}throw new Error(_0x39f6bf(0xa0));}}async['verifyPayment'](_0x48c53c){const _0x397147=a41_0x33d049;console['log'](_0x397147(0x71)+_0x48c53c);try{return loggerService_1[_0x397147(0x7d)][_0x397147(0x7e)](_0x397147(0x86),'/payment/verify/'+_0x48c53c,_0x397147(0x8c),{}),{'status':_0x397147(0x6d)};}catch(_0x1f410f){console[_0x397147(0x68)](_0x397147(0x77),_0x1f410f),loggerService_1[_0x397147(0x7d)]['logWhiteDomainError'](_0x397147(0x86),_0x397147(0x99)+_0x48c53c,_0x1f410f);throw new Error('Failed\x20to\x20verify\x20Amer\x20payment:\x20'+(_0x1f410f instanceof Error?_0x1f410f['message']:_0x397147(0x9e)));}}async[a41_0x33d049(0x9b)](_0x73d5b6){const _0x406945=a41_0x33d049;console[_0x406945(0x8e)](_0x406945(0x9c),_0x73d5b6);let _0x41f85e=_0x406945(0x6d);if(_0x73d5b6[_0x406945(0x6a)]===!![])_0x41f85e=_0x406945(0x91);else _0x73d5b6[_0x406945(0x6a)]===![]&&(_0x41f85e=_0x406945(0x87));const _0x1a9b6c={};return _0x73d5b6['cardLast4']&&(_0x1a9b6c[_0x406945(0x73)]=_0x73d5b6[_0x406945(0x73)]),_0x73d5b6['paymentMethod']&&(_0x1a9b6c['paymentMethod']=_0x73d5b6[_0x406945(0x9d)]),_0x73d5b6[_0x406945(0x6f)]&&(_0x1a9b6c['transactionId']=_0x73d5b6['transactionId'],_0x1a9b6c['gatewayPaymentId']=_0x73d5b6[_0x406945(0x6f)]),console[_0x406945(0x8e)](_0x406945(0x83)+_0x41f85e),{'paymentId':_0x73d5b6[_0x406945(0x85)]||_0x73d5b6[_0x406945(0x6e)]||'','status':_0x41f85e,'amount':_0x73d5b6['amount'],'currency':_0x73d5b6['currency'],'additionalInfo':_0x1a9b6c};}}exports[a41_0x33d049(0x67)]=AmerService;