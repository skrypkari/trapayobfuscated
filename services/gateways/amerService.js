'use strict';const a43_0x126d5d=a43_0x3a59;(function(_0x5aa58d,_0x377d1e){const _0x7bb54=a43_0x3a59,_0x1fc4dd=_0x5aa58d();while(!![]){try{const _0x24d2bd=parseInt(_0x7bb54(0x14a))/0x1*(-parseInt(_0x7bb54(0x142))/0x2)+parseInt(_0x7bb54(0x14d))/0x3*(-parseInt(_0x7bb54(0x13c))/0x4)+-parseInt(_0x7bb54(0x141))/0x5+parseInt(_0x7bb54(0x13a))/0x6+-parseInt(_0x7bb54(0x12d))/0x7*(-parseInt(_0x7bb54(0x124))/0x8)+parseInt(_0x7bb54(0x129))/0x9+-parseInt(_0x7bb54(0x147))/0xa*(-parseInt(_0x7bb54(0x14c))/0xb);if(_0x24d2bd===_0x377d1e)break;else _0x1fc4dd['push'](_0x1fc4dd['shift']());}catch(_0x148a10){_0x1fc4dd['push'](_0x1fc4dd['shift']());}}}(a43_0x31c6,0x2d6cd));Object['defineProperty'](exports,a43_0x126d5d(0x11b),{'value':!![]}),exports['AmerService']=void 0x0;function a43_0x3a59(_0x9394a1,_0x3f7494){const _0x31c651=a43_0x31c6();return a43_0x3a59=function(_0x3a5991,_0x34dd65){_0x3a5991=_0x3a5991-0x118;let _0x30ca1f=_0x31c651[_0x3a5991];return _0x30ca1f;},a43_0x3a59(_0x9394a1,_0x3f7494);}const loggerService_1=require('../loggerService');class AmerService{constructor(){const _0x137f1a=a43_0x126d5d;this['apiUrl']=_0x137f1a(0x122),console[_0x137f1a(0x131)](_0x137f1a(0x119));}async[a43_0x126d5d(0x137)](_0x1e7a14){const _0x38b9bb=a43_0x126d5d,{paymentId:_0x4f2595,orderId:_0x5587cb,orderName:_0x196a41,amount:_0x29557a,currency:_0x4839f5,usage:_0x2882c8,maxPayments:_0x34edd5,successUrl:_0x3ded46,failUrl:_0x42f25e}=_0x1e7a14,_0x5f4d4c=_0x4839f5[_0x38b9bb(0x128)]();console[_0x38b9bb(0x131)](_0x38b9bb(0x12c)+_0x5587cb),console[_0x38b9bb(0x131)](_0x38b9bb(0x127)+_0x29557a+'\x20'+_0x5f4d4c);try{const _0x36f554=this['apiUrl']+'/payment.php?payment_id='+_0x4f2595+_0x38b9bb(0x130)+_0x29557a+_0x38b9bb(0x135)+_0x5f4d4c+'&order='+_0x5587cb;return console[_0x38b9bb(0x131)](_0x38b9bb(0x12b)),console['log'](_0x38b9bb(0x11e),_0x4f2595),console['log']('Payment\x20URL:',_0x36f554),console[_0x38b9bb(0x131)](_0x38b9bb(0x12f),_0x29557a,_0x5f4d4c),loggerService_1['loggerService']['logWhiteDomainRequest'](_0x38b9bb(0x144),_0x38b9bb(0x133),_0x38b9bb(0x125),{'paymentId':_0x4f2595,'amount':_0x29557a,'currency':_0x5f4d4c,'orderId':_0x5587cb}),{'gateway_payment_id':_0x4f2595,'payment_url':_0x36f554};}catch(_0x13a764){console[_0x38b9bb(0x13f)](_0x38b9bb(0x14b)),console[_0x38b9bb(0x13f)]('Error\x20details:',_0x13a764),loggerService_1[_0x38b9bb(0x136)]['logWhiteDomainError'](_0x38b9bb(0x144),_0x38b9bb(0x133),_0x13a764);if(_0x13a764 instanceof Error){console[_0x38b9bb(0x13f)](_0x38b9bb(0x12e),_0x13a764[_0x38b9bb(0x123)]),console[_0x38b9bb(0x13f)](_0x38b9bb(0x143),_0x13a764[_0x38b9bb(0x140)]);throw new Error(_0x38b9bb(0x146)+_0x13a764[_0x38b9bb(0x123)]);}throw new Error(_0x38b9bb(0x11a));}}async[a43_0x126d5d(0x11f)](_0x25c24c){const _0x2b8f62=a43_0x126d5d;console[_0x2b8f62(0x131)]('üîç\x20Verifying\x20Amer\x20payment:\x20'+_0x25c24c);try{return loggerService_1[_0x2b8f62(0x136)][_0x2b8f62(0x12a)]('amer','/payment/verify/'+_0x25c24c,_0x2b8f62(0x125),{}),{'status':'PENDING'};}catch(_0x4799f7){console[_0x2b8f62(0x13f)](_0x2b8f62(0x120),_0x4799f7),loggerService_1[_0x2b8f62(0x136)][_0x2b8f62(0x149)](_0x2b8f62(0x144),_0x2b8f62(0x139)+_0x25c24c,_0x4799f7);throw new Error(_0x2b8f62(0x14e)+(_0x4799f7 instanceof Error?_0x4799f7[_0x2b8f62(0x123)]:_0x2b8f62(0x126)));}}async[a43_0x126d5d(0x134)](_0x4f5558){const _0x51e89a=a43_0x126d5d;console['log'](_0x51e89a(0x148),_0x4f5558);let _0x4dfbdb=_0x51e89a(0x121);if(_0x4f5558['success']===!![])_0x4dfbdb=_0x51e89a(0x11d);else _0x4f5558['success']===![]&&(_0x4dfbdb='FAILED');const _0x3e3f58={};return _0x4f5558[_0x51e89a(0x13e)]&&(_0x3e3f58[_0x51e89a(0x13e)]=_0x4f5558[_0x51e89a(0x13e)]),_0x4f5558[_0x51e89a(0x11c)]&&(_0x3e3f58['paymentMethod']=_0x4f5558[_0x51e89a(0x11c)]),_0x4f5558[_0x51e89a(0x138)]&&(_0x3e3f58[_0x51e89a(0x138)]=_0x4f5558[_0x51e89a(0x138)],_0x3e3f58[_0x51e89a(0x13d)]=_0x4f5558['transactionId']),console[_0x51e89a(0x131)]('üîÑ\x20Amer\x20webhook\x20processed:\x20status='+_0x4dfbdb),{'paymentId':_0x4f5558[_0x51e89a(0x118)]||_0x4f5558[_0x51e89a(0x145)]||'','status':_0x4dfbdb,'amount':_0x4f5558[_0x51e89a(0x13b)],'currency':_0x4f5558[_0x51e89a(0x132)],'additionalInfo':_0x3e3f58};}}exports['AmerService']=AmerService;function a43_0x31c6(){const _0x595d57=['274136NFVqsp','GET','Unknown\x20error','üí∞\x20Amount:\x20','toUpperCase','455679Nhsvmo','logWhiteDomainRequest','===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20===','üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20','35UpQSgk','Error\x20message:','Amount:','&amount=','log','currency','/payment','processWebhook','&currency=','loggerService','createPaymentLink','transactionId','/payment/verify/','1571754qZnjEe','amount','3068abVXgS','gatewayPaymentId','cardLast4','error','stack','556715XboHwa','2aQuCeB','Error\x20stack:','amer','orderId','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20','20RnsuhM','Processing\x20Amer\x20webhook:','logWhiteDomainError','263450lFGDjA','===\x20AMER\x20SERVICE\x20ERROR\x20===','570757IrlBzL','105xbkIZS','Failed\x20to\x20verify\x20Amer\x20payment:\x20','paymentId','üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error','__esModule','paymentMethod','PAID','Payment\x20ID:','verifyPayment','Amer\x20payment\x20verification\x20error:','PENDING','https://api2.trapay.uk','message'];a43_0x31c6=function(){return _0x595d57;};return a43_0x31c6();}