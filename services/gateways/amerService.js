'use strict';function a45_0x1656(){const _0x1b530a=['Amount:','Error\x20details:','7558830qbNpcG','log','üí∞\x20Amount:\x20','&currency=','orderId','currency','amount','Processing\x20Amer\x20webhook:','Payment\x20URL:','createPaymentLink','8ArKuhK','transactionId','defineProperty','üîÑ\x20Amer\x20webhook\x20processed:\x20status=','apiUrl','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20','processWebhook','paymentId','__esModule','toUpperCase','PENDING','success','42387ZbMnUa','FAILED','16680PrGLsp','GET','cardLast4','gatewayPaymentId','AmerService','üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20','===\x20AMER\x20SERVICE\x20ERROR\x20===','Amer\x20payment\x20verification\x20error:','paymentMethod','===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20===','error','logWhiteDomainRequest','/payment/verify/','/payment','loggerService','logWhiteDomainError','PAID','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error','126sOHomp','Error\x20stack:','5097969yjtIpM','message','9932178wWgjEu','Error\x20message:','üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain','amer','stack','766976sASLTn','1907822WUMAfQ'];a45_0x1656=function(){return _0x1b530a;};return a45_0x1656();}const a45_0x21509b=a45_0x3e59;function a45_0x3e59(_0x892ada,_0x124a51){const _0x165651=a45_0x1656();return a45_0x3e59=function(_0x3e59ef,_0x40b4d6){_0x3e59ef=_0x3e59ef-0x1e1;let _0x44d536=_0x165651[_0x3e59ef];return _0x44d536;},a45_0x3e59(_0x892ada,_0x124a51);}(function(_0x4b0f51,_0x290f6f){const _0x13b196=a45_0x3e59,_0x38f769=_0x4b0f51();while(!![]){try{const _0x3a3bcf=parseInt(_0x13b196(0x1e4))/0x1+parseInt(_0x13b196(0x1f8))/0x2*(parseInt(_0x13b196(0x1e6))/0x3)+-parseInt(_0x13b196(0x201))/0x4+parseInt(_0x13b196(0x205))/0x5+-parseInt(_0x13b196(0x1fc))/0x6+parseInt(_0x13b196(0x202))/0x7+-parseInt(_0x13b196(0x20f))/0x8*(-parseInt(_0x13b196(0x1fa))/0x9);if(_0x3a3bcf===_0x290f6f)break;else _0x38f769['push'](_0x38f769['shift']());}catch(_0x5e8414){_0x38f769['push'](_0x38f769['shift']());}}}(a45_0x1656,0xdad39));Object[a45_0x21509b(0x211)](exports,a45_0x21509b(0x217),{'value':!![]}),exports['AmerService']=void 0x0;const loggerService_1=require('../loggerService');class AmerService{constructor(){const _0xb3fd57=a45_0x21509b;this[_0xb3fd57(0x213)]='https://api2.trapay.uk',console[_0xb3fd57(0x206)](_0xb3fd57(0x1fe));}async[a45_0x21509b(0x20e)](_0x568a8e){const _0x49b14c=a45_0x21509b,{paymentId:_0x1d369d,orderId:_0x53d4db,orderName:_0x331af5,amount:_0x22085c,currency:_0x8b100c,usage:_0x194448,maxPayments:_0xef6eb9,successUrl:_0x478b65,failUrl:_0x3fd06e}=_0x568a8e,_0x28a771=_0x8b100c[_0x49b14c(0x1e1)]();console['log'](_0x49b14c(0x1eb)+_0x53d4db),console[_0x49b14c(0x206)](_0x49b14c(0x207)+_0x22085c+'\x20'+_0x28a771);try{const _0x3aa726=this[_0x49b14c(0x213)]+'/payment.php?payment_id='+_0x1d369d+'&amount='+_0x22085c+_0x49b14c(0x208)+_0x28a771+'&order='+_0x53d4db;return console[_0x49b14c(0x206)](_0x49b14c(0x1ef)),console[_0x49b14c(0x206)]('Payment\x20ID:',_0x1d369d),console['log'](_0x49b14c(0x20d),_0x3aa726),console[_0x49b14c(0x206)](_0x49b14c(0x203),_0x22085c,_0x28a771),loggerService_1['loggerService'][_0x49b14c(0x1f1)](_0x49b14c(0x1ff),_0x49b14c(0x1f3),_0x49b14c(0x1e7),{'paymentId':_0x1d369d,'amount':_0x22085c,'currency':_0x28a771,'orderId':_0x53d4db}),{'gateway_payment_id':_0x1d369d,'payment_url':_0x3aa726};}catch(_0x9739d2){console['error'](_0x49b14c(0x1ec)),console['error'](_0x49b14c(0x204),_0x9739d2),loggerService_1['loggerService'][_0x49b14c(0x1f5)](_0x49b14c(0x1ff),'/payment',_0x9739d2);if(_0x9739d2 instanceof Error){console[_0x49b14c(0x1f0)](_0x49b14c(0x1fd),_0x9739d2[_0x49b14c(0x1fb)]),console[_0x49b14c(0x1f0)](_0x49b14c(0x1f9),_0x9739d2[_0x49b14c(0x200)]);throw new Error(_0x49b14c(0x214)+_0x9739d2[_0x49b14c(0x1fb)]);}throw new Error(_0x49b14c(0x1f7));}}async['verifyPayment'](_0xf79784){const _0x3a5d8b=a45_0x21509b;console[_0x3a5d8b(0x206)]('üîç\x20Verifying\x20Amer\x20payment:\x20'+_0xf79784);try{return loggerService_1[_0x3a5d8b(0x1f4)][_0x3a5d8b(0x1f1)](_0x3a5d8b(0x1ff),'/payment/verify/'+_0xf79784,'GET',{}),{'status':_0x3a5d8b(0x1e2)};}catch(_0x5623dd){console[_0x3a5d8b(0x1f0)](_0x3a5d8b(0x1ed),_0x5623dd),loggerService_1[_0x3a5d8b(0x1f4)][_0x3a5d8b(0x1f5)](_0x3a5d8b(0x1ff),_0x3a5d8b(0x1f2)+_0xf79784,_0x5623dd);throw new Error('Failed\x20to\x20verify\x20Amer\x20payment:\x20'+(_0x5623dd instanceof Error?_0x5623dd[_0x3a5d8b(0x1fb)]:'Unknown\x20error'));}}async[a45_0x21509b(0x215)](_0xb8b784){const _0x5438c5=a45_0x21509b;console[_0x5438c5(0x206)](_0x5438c5(0x20c),_0xb8b784);let _0xf8e3b9=_0x5438c5(0x1e2);if(_0xb8b784[_0x5438c5(0x1e3)]===!![])_0xf8e3b9=_0x5438c5(0x1f6);else _0xb8b784['success']===![]&&(_0xf8e3b9=_0x5438c5(0x1e5));const _0x38b206={};return _0xb8b784['cardLast4']&&(_0x38b206[_0x5438c5(0x1e8)]=_0xb8b784[_0x5438c5(0x1e8)]),_0xb8b784[_0x5438c5(0x1ee)]&&(_0x38b206[_0x5438c5(0x1ee)]=_0xb8b784[_0x5438c5(0x1ee)]),_0xb8b784[_0x5438c5(0x210)]&&(_0x38b206['transactionId']=_0xb8b784['transactionId'],_0x38b206[_0x5438c5(0x1e9)]=_0xb8b784['transactionId']),console[_0x5438c5(0x206)](_0x5438c5(0x212)+_0xf8e3b9),{'paymentId':_0xb8b784[_0x5438c5(0x216)]||_0xb8b784[_0x5438c5(0x209)]||'','status':_0xf8e3b9,'amount':_0xb8b784[_0x5438c5(0x20b)],'currency':_0xb8b784[_0x5438c5(0x20a)],'additionalInfo':_0x38b206};}}exports[a45_0x21509b(0x1ea)]=AmerService;