'use strict';const a43_0x356d64=a43_0x34f1;(function(_0x290913,_0x5f5d39){const _0x17099d=a43_0x34f1,_0x2dcce4=_0x290913();while(!![]){try{const _0x4eb27c=-parseInt(_0x17099d(0xd3))/0x1*(parseInt(_0x17099d(0xb8))/0x2)+-parseInt(_0x17099d(0xc0))/0x3+-parseInt(_0x17099d(0xbc))/0x4*(parseInt(_0x17099d(0xa3))/0x5)+parseInt(_0x17099d(0xd9))/0x6*(parseInt(_0x17099d(0xc4))/0x7)+parseInt(_0x17099d(0xb4))/0x8*(parseInt(_0x17099d(0xc7))/0x9)+parseInt(_0x17099d(0xae))/0xa*(parseInt(_0x17099d(0xac))/0xb)+parseInt(_0x17099d(0xc5))/0xc;if(_0x4eb27c===_0x5f5d39)break;else _0x2dcce4['push'](_0x2dcce4['shift']());}catch(_0x5f07ec){_0x2dcce4['push'](_0x2dcce4['shift']());}}}(a43_0x506c,0x2ed98));function a43_0x34f1(_0x148112,_0x21310a){const _0x506ce5=a43_0x506c();return a43_0x34f1=function(_0x34f10e,_0xfe3c6f){_0x34f10e=_0x34f10e-0xa3;let _0x3f6aac=_0x506ce5[_0x34f10e];return _0x3f6aac;},a43_0x34f1(_0x148112,_0x21310a);}Object[a43_0x356d64(0xb5)](exports,a43_0x356d64(0xbe),{'value':!![]}),exports[a43_0x356d64(0xc3)]=void 0x0;function a43_0x506c(){const _0x3fabc2=['220idCrvK','toUpperCase','GET','Payment\x20URL:','amer','processWebhook','464NmsEJp','defineProperty','&amount=','logWhiteDomainError','2904ktAfMG','üí∞\x20Amount:\x20','üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain','message','4wDopsS','/payment.php?payment_id=','__esModule','transactionId','744912pgtyHg','../loggerService','loggerService','AmerService','14jnPKkL','150444KwMmTr','üîÑ\x20Amer\x20webhook\x20processed:\x20status=','46458gggDNv','paymentId','Unknown\x20error','cardLast4','paymentMethod','Error\x20message:','Error\x20details:','log','Amer\x20payment\x20verification\x20error:','currency','logWhiteDomainRequest','createPaymentLink','19qOlEga','/payment','stack','apiUrl','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error','FAILED','425268xoFHKG','1522195LtBRfB','orderId','error','verifyPayment','===\x20AMER\x20SERVICE\x20ERROR\x20===','&order=','Failed\x20to\x20verify\x20Amer\x20payment:\x20','/payment/verify/','success','159269OHkgke','Processing\x20Amer\x20webhook:'];a43_0x506c=function(){return _0x3fabc2;};return a43_0x506c();}const loggerService_1=require(a43_0x356d64(0xc1));class AmerService{constructor(){const _0xaf25cb=a43_0x356d64;this['apiUrl']='https://api2.trapay.uk',console['log'](_0xaf25cb(0xba));}async[a43_0x356d64(0xd2)](_0x3a7628){const _0x50117f=a43_0x356d64,{paymentId:_0x1cfd22,orderId:_0x11f6fb,orderName:_0x1ec17c,amount:_0x4a7900,currency:_0x39c5ee,usage:_0x49215e,maxPayments:_0x4c3c4a,successUrl:_0x3145be,failUrl:_0x5157ff}=_0x3a7628,_0x12b934=_0x39c5ee[_0x50117f(0xaf)]();console[_0x50117f(0xce)]('üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20'+_0x11f6fb),console[_0x50117f(0xce)](_0x50117f(0xb9)+_0x4a7900+'\x20'+_0x12b934);try{const _0x59972a=this[_0x50117f(0xd6)]+_0x50117f(0xbd)+_0x1cfd22+_0x50117f(0xb6)+_0x4a7900+'&currency='+_0x12b934+_0x50117f(0xa8)+_0x11f6fb;return console[_0x50117f(0xce)]('===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20==='),console[_0x50117f(0xce)]('Payment\x20ID:',_0x1cfd22),console[_0x50117f(0xce)](_0x50117f(0xb1),_0x59972a),console[_0x50117f(0xce)]('Amount:',_0x4a7900,_0x12b934),loggerService_1[_0x50117f(0xc2)]['logWhiteDomainRequest'](_0x50117f(0xb2),_0x50117f(0xd4),_0x50117f(0xb0),{'paymentId':_0x1cfd22,'amount':_0x4a7900,'currency':_0x12b934,'orderId':_0x11f6fb}),{'gateway_payment_id':_0x1cfd22,'payment_url':_0x59972a};}catch(_0x24e50d){console[_0x50117f(0xa5)](_0x50117f(0xa7)),console[_0x50117f(0xa5)](_0x50117f(0xcd),_0x24e50d),loggerService_1[_0x50117f(0xc2)][_0x50117f(0xb7)](_0x50117f(0xb2),_0x50117f(0xd4),_0x24e50d);if(_0x24e50d instanceof Error){console['error'](_0x50117f(0xcc),_0x24e50d[_0x50117f(0xbb)]),console[_0x50117f(0xa5)]('Error\x20stack:',_0x24e50d[_0x50117f(0xd5)]);throw new Error('Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20'+_0x24e50d[_0x50117f(0xbb)]);}throw new Error(_0x50117f(0xd7));}}async[a43_0x356d64(0xa6)](_0x150b65){const _0x2c1fa2=a43_0x356d64;console[_0x2c1fa2(0xce)]('üîç\x20Verifying\x20Amer\x20payment:\x20'+_0x150b65);try{return loggerService_1['loggerService'][_0x2c1fa2(0xd1)](_0x2c1fa2(0xb2),_0x2c1fa2(0xaa)+_0x150b65,_0x2c1fa2(0xb0),{}),{'status':'PENDING'};}catch(_0x1fa633){console[_0x2c1fa2(0xa5)](_0x2c1fa2(0xcf),_0x1fa633),loggerService_1[_0x2c1fa2(0xc2)]['logWhiteDomainError'](_0x2c1fa2(0xb2),_0x2c1fa2(0xaa)+_0x150b65,_0x1fa633);throw new Error(_0x2c1fa2(0xa9)+(_0x1fa633 instanceof Error?_0x1fa633['message']:_0x2c1fa2(0xc9)));}}async[a43_0x356d64(0xb3)](_0x3c9a26){const _0x28a800=a43_0x356d64;console[_0x28a800(0xce)](_0x28a800(0xad),_0x3c9a26);let _0x41a016='PENDING';if(_0x3c9a26[_0x28a800(0xab)]===!![])_0x41a016='PAID';else _0x3c9a26['success']===![]&&(_0x41a016=_0x28a800(0xd8));const _0x4b7ee4={};return _0x3c9a26[_0x28a800(0xca)]&&(_0x4b7ee4[_0x28a800(0xca)]=_0x3c9a26[_0x28a800(0xca)]),_0x3c9a26[_0x28a800(0xcb)]&&(_0x4b7ee4[_0x28a800(0xcb)]=_0x3c9a26[_0x28a800(0xcb)]),_0x3c9a26[_0x28a800(0xbf)]&&(_0x4b7ee4[_0x28a800(0xbf)]=_0x3c9a26[_0x28a800(0xbf)],_0x4b7ee4['gatewayPaymentId']=_0x3c9a26[_0x28a800(0xbf)]),console[_0x28a800(0xce)](_0x28a800(0xc6)+_0x41a016),{'paymentId':_0x3c9a26[_0x28a800(0xc8)]||_0x3c9a26[_0x28a800(0xa4)]||'','status':_0x41a016,'amount':_0x3c9a26['amount'],'currency':_0x3c9a26[_0x28a800(0xd0)],'additionalInfo':_0x4b7ee4};}}exports[a43_0x356d64(0xc3)]=AmerService;