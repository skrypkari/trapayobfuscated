'use strict';const a41_0x2fef4f=a41_0x5029;(function(_0x530654,_0x1abbec){const _0xace048=a41_0x5029,_0x152f4a=_0x530654();while(!![]){try{const _0x2cb877=parseInt(_0xace048(0xac))/0x1*(parseInt(_0xace048(0xaa))/0x2)+parseInt(_0xace048(0xb6))/0x3+parseInt(_0xace048(0xa8))/0x4+parseInt(_0xace048(0xbd))/0x5+-parseInt(_0xace048(0x9f))/0x6*(parseInt(_0xace048(0xb7))/0x7)+-parseInt(_0xace048(0xa7))/0x8*(-parseInt(_0xace048(0xb9))/0x9)+-parseInt(_0xace048(0x99))/0xa;if(_0x2cb877===_0x1abbec)break;else _0x152f4a['push'](_0x152f4a['shift']());}catch(_0x10754f){_0x152f4a['push'](_0x152f4a['shift']());}}}(a41_0x273e,0x3099f));function a41_0x5029(_0x4369d1,_0x32e7c1){const _0x273e0b=a41_0x273e();return a41_0x5029=function(_0x5029dc,_0x439e58){_0x5029dc=_0x5029dc-0x8e;let _0x4e3eff=_0x273e0b[_0x5029dc];return _0x4e3eff;},a41_0x5029(_0x4369d1,_0x32e7c1);}Object[a41_0x2fef4f(0x91)](exports,'__esModule',{'value':!![]}),exports[a41_0x2fef4f(0xa2)]=void 0x0;const loggerService_1=require(a41_0x2fef4f(0xbc));class AmerService{constructor(){const _0x54dfa1=a41_0x2fef4f;this['apiUrl']=_0x54dfa1(0x9b),console[_0x54dfa1(0xa5)]('üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain');}async[a41_0x2fef4f(0x9c)](_0x5237f2){const _0x28f15a=a41_0x2fef4f,{paymentId:_0x4be531,orderId:_0x540de8,orderName:_0x4ef7f2,amount:_0x32bdbc,currency:_0x4c5191,usage:_0x59df0f,maxPayments:_0x4264e6,successUrl:_0x1f2b92,failUrl:_0x211012}=_0x5237f2,_0x149b31=_0x4c5191[_0x28f15a(0xc1)]();console['log'](_0x28f15a(0xae)+_0x540de8),console[_0x28f15a(0xa5)](_0x28f15a(0xbf)+_0x32bdbc+'\x20'+_0x149b31);try{const _0x1605b9=this[_0x28f15a(0xbe)]+'/payment.php?payment_id='+_0x4be531+'&amount='+_0x32bdbc+_0x28f15a(0xa6)+_0x149b31+'&order='+_0x540de8;return console['log']('===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20==='),console[_0x28f15a(0xa5)](_0x28f15a(0x8f),_0x4be531),console['log'](_0x28f15a(0xba),_0x1605b9),console['log']('Amount:',_0x32bdbc,_0x149b31),loggerService_1[_0x28f15a(0x9e)][_0x28f15a(0x96)](_0x28f15a(0xb3),_0x28f15a(0x92),'GET',{'paymentId':_0x4be531,'amount':_0x32bdbc,'currency':_0x149b31,'orderId':_0x540de8}),{'gateway_payment_id':_0x4be531,'payment_url':_0x1605b9};}catch(_0x56b222){console['error'](_0x28f15a(0x9d)),console['error'](_0x28f15a(0xc0),_0x56b222),loggerService_1[_0x28f15a(0x9e)]['logWhiteDomainError'](_0x28f15a(0xb3),_0x28f15a(0x92),_0x56b222);if(_0x56b222 instanceof Error){console['error'](_0x28f15a(0xad),_0x56b222['message']),console['error']('Error\x20stack:',_0x56b222[_0x28f15a(0xa0)]);throw new Error('Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20'+_0x56b222[_0x28f15a(0xa1)]);}throw new Error(_0x28f15a(0xb1));}}async[a41_0x2fef4f(0x98)](_0x5d05cb){const _0x379a64=a41_0x2fef4f;console[_0x379a64(0xa5)](_0x379a64(0x95)+_0x5d05cb);try{return loggerService_1['loggerService'][_0x379a64(0x96)]('amer',_0x379a64(0x8e)+_0x5d05cb,_0x379a64(0xa9),{}),{'status':_0x379a64(0xab)};}catch(_0x569766){console[_0x379a64(0x94)](_0x379a64(0x90),_0x569766),loggerService_1[_0x379a64(0x9e)][_0x379a64(0xb0)](_0x379a64(0xb3),_0x379a64(0x8e)+_0x5d05cb,_0x569766);throw new Error(_0x379a64(0x9a)+(_0x569766 instanceof Error?_0x569766[_0x379a64(0xa1)]:'Unknown\x20error'));}}async['processWebhook'](_0x2d717a){const _0x5b83fb=a41_0x2fef4f;console[_0x5b83fb(0xa5)]('Processing\x20Amer\x20webhook:',_0x2d717a);let _0x19fc1b=_0x5b83fb(0xab);if(_0x2d717a[_0x5b83fb(0xb2)]===!![])_0x19fc1b=_0x5b83fb(0xbb);else _0x2d717a[_0x5b83fb(0xb2)]===![]&&(_0x19fc1b=_0x5b83fb(0xb4));const _0x48de0a={};return _0x2d717a[_0x5b83fb(0xa4)]&&(_0x48de0a[_0x5b83fb(0xa4)]=_0x2d717a[_0x5b83fb(0xa4)]),_0x2d717a['paymentMethod']&&(_0x48de0a[_0x5b83fb(0xb8)]=_0x2d717a[_0x5b83fb(0xb8)]),_0x2d717a[_0x5b83fb(0xa3)]&&(_0x48de0a[_0x5b83fb(0xa3)]=_0x2d717a['transactionId'],_0x48de0a[_0x5b83fb(0xb5)]=_0x2d717a[_0x5b83fb(0xa3)]),console[_0x5b83fb(0xa5)]('üîÑ\x20Amer\x20webhook\x20processed:\x20status='+_0x19fc1b),{'paymentId':_0x2d717a['paymentId']||_0x2d717a[_0x5b83fb(0x93)]||'','status':_0x19fc1b,'amount':_0x2d717a[_0x5b83fb(0x97)],'currency':_0x2d717a[_0x5b83fb(0xaf)],'additionalInfo':_0x48de0a};}}function a41_0x273e(){const _0x271d1d=['9ncOVgr','Payment\x20URL:','PAID','../loggerService','1277850Qbsgnc','apiUrl','üí∞\x20Amount:\x20','Error\x20details:','toUpperCase','/payment/verify/','Payment\x20ID:','Amer\x20payment\x20verification\x20error:','defineProperty','/payment','orderId','error','üîç\x20Verifying\x20Amer\x20payment:\x20','logWhiteDomainRequest','amount','verifyPayment','5833080PtAUzr','Failed\x20to\x20verify\x20Amer\x20payment:\x20','https://api2.trapay.uk','createPaymentLink','===\x20AMER\x20SERVICE\x20ERROR\x20===','loggerService','1284KWSSLq','stack','message','AmerService','transactionId','cardLast4','log','&currency=','2175344YqGBfx','230640kcUjlA','GET','535742lETniu','PENDING','1udxhAR','Error\x20message:','üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20','currency','logWhiteDomainError','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error','success','amer','FAILED','gatewayPaymentId','335706mOhaPn','5971UDMfOP','paymentMethod'];a41_0x273e=function(){return _0x271d1d;};return a41_0x273e();}exports[a41_0x2fef4f(0xa2)]=AmerService;