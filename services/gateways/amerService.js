'use strict';const a41_0x4b1b11=a41_0x2ae5;(function(_0x30591c,_0xd02162){const _0x4bf68a=a41_0x2ae5,_0x4126f4=_0x30591c();while(!![]){try{const _0x33e625=-parseInt(_0x4bf68a(0xe5))/0x1*(-parseInt(_0x4bf68a(0xca))/0x2)+-parseInt(_0x4bf68a(0xea))/0x3+parseInt(_0x4bf68a(0xe8))/0x4+-parseInt(_0x4bf68a(0xe6))/0x5*(parseInt(_0x4bf68a(0xbd))/0x6)+-parseInt(_0x4bf68a(0xde))/0x7+-parseInt(_0x4bf68a(0xdc))/0x8+parseInt(_0x4bf68a(0xce))/0x9*(parseInt(_0x4bf68a(0xd9))/0xa);if(_0x33e625===_0xd02162)break;else _0x4126f4['push'](_0x4126f4['shift']());}catch(_0x5265a7){_0x4126f4['push'](_0x4126f4['shift']());}}}(a41_0x93e4,0xe48e6));function a41_0x93e4(){const _0x32bafc=['Processing\x20Amer\x20webhook:','2ZBuvBf','loggerService','PENDING','&amount=','126bwVQsF','/payment/verify/','currency','log','üîÑ\x20Amer\x20webhook\x20processed:\x20status=','verifyPayment','Unknown\x20error','stack','https://api2.trapay.uk','transactionId','logWhiteDomainError','2503990whsYuY','createPaymentLink','Error\x20message:','7990464FwErnH','logWhiteDomainRequest','3469473JUUouk','Error\x20stack:','GET','amount','processWebhook','cardLast4','error','1314829XOpjdc','15IlQOdR','message','2096200yKTfJo','defineProperty','5528646dKSpYP','../loggerService','toUpperCase','Amount:','AmerService','success','paymentMethod','Error\x20details:','2141940QTrSEI','apiUrl','FAILED','gatewayPaymentId','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20','amer','Payment\x20ID:','===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20===','orderId','üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain','/payment','Failed\x20to\x20verify\x20Amer\x20payment:\x20'];a41_0x93e4=function(){return _0x32bafc;};return a41_0x93e4();}Object[a41_0x4b1b11(0xe9)](exports,'__esModule',{'value':!![]}),exports['AmerService']=void 0x0;const loggerService_1=require(a41_0x4b1b11(0xeb));function a41_0x2ae5(_0x257b06,_0x12b5d5){const _0x93e49c=a41_0x93e4();return a41_0x2ae5=function(_0x2ae530,_0x1a190){_0x2ae530=_0x2ae530-0xba;let _0x312bb7=_0x93e49c[_0x2ae530];return _0x312bb7;},a41_0x2ae5(_0x257b06,_0x12b5d5);}class AmerService{constructor(){const _0x3c0966=a41_0x4b1b11;this['apiUrl']=_0x3c0966(0xd6),console['log'](_0x3c0966(0xc6));}async[a41_0x4b1b11(0xda)](_0x2ef157){const _0x5e4010=a41_0x4b1b11,{paymentId:_0x5da6c3,orderId:_0x2820c0,orderName:_0x56e4c3,amount:_0x29e380,currency:_0x57353f,usage:_0x4cb4a6,maxPayments:_0x554af5,successUrl:_0x41ee90,failUrl:_0x2d2b55}=_0x2ef157,_0x2aa05e=_0x57353f[_0x5e4010(0xec)]();console[_0x5e4010(0xd1)]('üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20'+_0x2820c0),console[_0x5e4010(0xd1)]('üí∞\x20Amount:\x20'+_0x29e380+'\x20'+_0x2aa05e);try{const _0x1765bb=this[_0x5e4010(0xbe)]+'/payment.php?payment_id='+_0x5da6c3+_0x5e4010(0xcd)+_0x29e380+'&currency='+_0x2aa05e+'&order='+_0x2820c0;return console['log'](_0x5e4010(0xc4)),console[_0x5e4010(0xd1)](_0x5e4010(0xc3),_0x5da6c3),console[_0x5e4010(0xd1)]('Payment\x20URL:',_0x1765bb),console['log'](_0x5e4010(0xed),_0x29e380,_0x2aa05e),loggerService_1[_0x5e4010(0xcb)][_0x5e4010(0xdd)](_0x5e4010(0xc2),_0x5e4010(0xc7),_0x5e4010(0xe0),{'paymentId':_0x5da6c3,'amount':_0x29e380,'currency':_0x2aa05e,'orderId':_0x2820c0}),{'gateway_payment_id':_0x5da6c3,'payment_url':_0x1765bb};}catch(_0x2f8b1a){console['error']('===\x20AMER\x20SERVICE\x20ERROR\x20==='),console['error'](_0x5e4010(0xbc),_0x2f8b1a),loggerService_1['loggerService'][_0x5e4010(0xd8)]('amer','/payment',_0x2f8b1a);if(_0x2f8b1a instanceof Error){console[_0x5e4010(0xe4)](_0x5e4010(0xdb),_0x2f8b1a[_0x5e4010(0xe7)]),console[_0x5e4010(0xe4)](_0x5e4010(0xdf),_0x2f8b1a[_0x5e4010(0xd5)]);throw new Error(_0x5e4010(0xc1)+_0x2f8b1a[_0x5e4010(0xe7)]);}throw new Error('Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error');}}async[a41_0x4b1b11(0xd3)](_0xed7699){const _0x136a0e=a41_0x4b1b11;console[_0x136a0e(0xd1)]('üîç\x20Verifying\x20Amer\x20payment:\x20'+_0xed7699);try{return loggerService_1[_0x136a0e(0xcb)][_0x136a0e(0xdd)]('amer',_0x136a0e(0xcf)+_0xed7699,'GET',{}),{'status':'PENDING'};}catch(_0x3ea0af){console[_0x136a0e(0xe4)]('Amer\x20payment\x20verification\x20error:',_0x3ea0af),loggerService_1['loggerService'][_0x136a0e(0xd8)](_0x136a0e(0xc2),_0x136a0e(0xcf)+_0xed7699,_0x3ea0af);throw new Error(_0x136a0e(0xc8)+(_0x3ea0af instanceof Error?_0x3ea0af[_0x136a0e(0xe7)]:_0x136a0e(0xd4)));}}async[a41_0x4b1b11(0xe2)](_0x2d9d8f){const _0x120cc1=a41_0x4b1b11;console[_0x120cc1(0xd1)](_0x120cc1(0xc9),_0x2d9d8f);let _0x1ae5d4=_0x120cc1(0xcc);if(_0x2d9d8f[_0x120cc1(0xba)]===!![])_0x1ae5d4='PAID';else _0x2d9d8f[_0x120cc1(0xba)]===![]&&(_0x1ae5d4=_0x120cc1(0xbf));const _0x2e63b1={};return _0x2d9d8f[_0x120cc1(0xe3)]&&(_0x2e63b1[_0x120cc1(0xe3)]=_0x2d9d8f[_0x120cc1(0xe3)]),_0x2d9d8f[_0x120cc1(0xbb)]&&(_0x2e63b1[_0x120cc1(0xbb)]=_0x2d9d8f['paymentMethod']),_0x2d9d8f['transactionId']&&(_0x2e63b1['transactionId']=_0x2d9d8f[_0x120cc1(0xd7)],_0x2e63b1[_0x120cc1(0xc0)]=_0x2d9d8f[_0x120cc1(0xd7)]),console[_0x120cc1(0xd1)](_0x120cc1(0xd2)+_0x1ae5d4),{'paymentId':_0x2d9d8f['paymentId']||_0x2d9d8f[_0x120cc1(0xc5)]||'','status':_0x1ae5d4,'amount':_0x2d9d8f[_0x120cc1(0xe1)],'currency':_0x2d9d8f[_0x120cc1(0xd0)],'additionalInfo':_0x2e63b1};}}exports[a41_0x4b1b11(0xee)]=AmerService;