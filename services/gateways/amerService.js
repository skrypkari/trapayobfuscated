'use strict';const a43_0xdfc27b=a43_0x4b55;function a43_0x4b55(_0x37236f,_0x50d01b){const _0x132223=a43_0x1322();return a43_0x4b55=function(_0x4b55f0,_0x10958d){_0x4b55f0=_0x4b55f0-0x163;let _0x8807f1=_0x132223[_0x4b55f0];return _0x8807f1;},a43_0x4b55(_0x37236f,_0x50d01b);}(function(_0x6e7f5e,_0x43c1a0){const _0x4c1a81=a43_0x4b55,_0x100826=_0x6e7f5e();while(!![]){try{const _0x492eb2=-parseInt(_0x4c1a81(0x169))/0x1+-parseInt(_0x4c1a81(0x176))/0x2+parseInt(_0x4c1a81(0x192))/0x3+parseInt(_0x4c1a81(0x17b))/0x4*(parseInt(_0x4c1a81(0x187))/0x5)+parseInt(_0x4c1a81(0x18b))/0x6*(-parseInt(_0x4c1a81(0x190))/0x7)+-parseInt(_0x4c1a81(0x183))/0x8+-parseInt(_0x4c1a81(0x167))/0x9*(-parseInt(_0x4c1a81(0x17c))/0xa);if(_0x492eb2===_0x43c1a0)break;else _0x100826['push'](_0x100826['shift']());}catch(_0x518297){_0x100826['push'](_0x100826['shift']());}}}(a43_0x1322,0x9b8ce));Object[a43_0xdfc27b(0x163)](exports,'__esModule',{'value':!![]}),exports[a43_0xdfc27b(0x16a)]=void 0x0;const loggerService_1=require(a43_0xdfc27b(0x191));class AmerService{constructor(){const _0x533bbf=a43_0xdfc27b;this[_0x533bbf(0x174)]='https://api2.trapay.uk',console[_0x533bbf(0x189)]('üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain');}async[a43_0xdfc27b(0x172)](_0x4d8a53){const _0x1ac01a=a43_0xdfc27b,{paymentId:_0x3f6934,orderId:_0x5bfbe7,orderName:_0x539435,amount:_0x1365b7,currency:_0x3962f4,usage:_0x5ac3b7,maxPayments:_0x5663ff,successUrl:_0x1ed674,failUrl:_0x1361b1}=_0x4d8a53,_0x3d299e=_0x3962f4[_0x1ac01a(0x184)]();console[_0x1ac01a(0x189)](_0x1ac01a(0x178)+_0x5bfbe7),console[_0x1ac01a(0x189)](_0x1ac01a(0x173)+_0x1365b7+'\x20'+_0x3d299e);try{const _0x1fc2ac=this['apiUrl']+_0x1ac01a(0x16e)+_0x3f6934+_0x1ac01a(0x16f)+_0x1365b7+_0x1ac01a(0x17f)+_0x3d299e+_0x1ac01a(0x18f)+_0x5bfbe7;return console[_0x1ac01a(0x189)](_0x1ac01a(0x17a)),console[_0x1ac01a(0x189)]('Payment\x20ID:',_0x3f6934),console['log'](_0x1ac01a(0x170),_0x1fc2ac),console[_0x1ac01a(0x189)]('Amount:',_0x1365b7,_0x3d299e),loggerService_1[_0x1ac01a(0x193)][_0x1ac01a(0x16d)](_0x1ac01a(0x16c),_0x1ac01a(0x177),_0x1ac01a(0x179),{'paymentId':_0x3f6934,'amount':_0x1365b7,'currency':_0x3d299e,'orderId':_0x5bfbe7}),{'gateway_payment_id':_0x3f6934,'payment_url':_0x1fc2ac};}catch(_0x4d1f65){console['error'](_0x1ac01a(0x188)),console[_0x1ac01a(0x180)]('Error\x20details:',_0x4d1f65),loggerService_1[_0x1ac01a(0x193)][_0x1ac01a(0x186)](_0x1ac01a(0x16c),_0x1ac01a(0x177),_0x4d1f65);if(_0x4d1f65 instanceof Error){console['error'](_0x1ac01a(0x185),_0x4d1f65[_0x1ac01a(0x164)]),console[_0x1ac01a(0x180)]('Error\x20stack:',_0x4d1f65['stack']);throw new Error('Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20'+_0x4d1f65[_0x1ac01a(0x164)]);}throw new Error(_0x1ac01a(0x171));}}async[a43_0xdfc27b(0x17e)](_0x4d5a9f){const _0x67dd95=a43_0xdfc27b;console[_0x67dd95(0x189)]('üîç\x20Verifying\x20Amer\x20payment:\x20'+_0x4d5a9f);try{return loggerService_1['loggerService'][_0x67dd95(0x16d)]('amer',_0x67dd95(0x18c)+_0x4d5a9f,_0x67dd95(0x179),{}),{'status':_0x67dd95(0x182)};}catch(_0x22c578){console['error'](_0x67dd95(0x165),_0x22c578),loggerService_1[_0x67dd95(0x193)][_0x67dd95(0x186)]('amer',_0x67dd95(0x18c)+_0x4d5a9f,_0x22c578);throw new Error(_0x67dd95(0x18d)+(_0x22c578 instanceof Error?_0x22c578['message']:'Unknown\x20error'));}}async['processWebhook'](_0x2941f7){const _0x19781b=a43_0xdfc27b;console[_0x19781b(0x189)]('Processing\x20Amer\x20webhook:',_0x2941f7);let _0x8d44f4=_0x19781b(0x182);if(_0x2941f7[_0x19781b(0x17d)]===!![])_0x8d44f4=_0x19781b(0x166);else _0x2941f7['success']===![]&&(_0x8d44f4=_0x19781b(0x18a));const _0x127050={};return _0x2941f7['cardLast4']&&(_0x127050[_0x19781b(0x18e)]=_0x2941f7[_0x19781b(0x18e)]),_0x2941f7[_0x19781b(0x16b)]&&(_0x127050[_0x19781b(0x16b)]=_0x2941f7[_0x19781b(0x16b)]),_0x2941f7['transactionId']&&(_0x127050['transactionId']=_0x2941f7[_0x19781b(0x175)],_0x127050[_0x19781b(0x168)]=_0x2941f7[_0x19781b(0x175)]),console[_0x19781b(0x189)]('üîÑ\x20Amer\x20webhook\x20processed:\x20status='+_0x8d44f4),{'paymentId':_0x2941f7['paymentId']||_0x2941f7['orderId']||'','status':_0x8d44f4,'amount':_0x2941f7[_0x19781b(0x181)],'currency':_0x2941f7['currency'],'additionalInfo':_0x127050};}}exports['AmerService']=AmerService;function a43_0x1322(){const _0x314066=['gatewayPaymentId','1084691zXbyZC','AmerService','paymentMethod','amer','logWhiteDomainRequest','/payment.php?payment_id=','&amount=','Payment\x20URL:','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error','createPaymentLink','üí∞\x20Amount:\x20','apiUrl','transactionId','1520270rKRDJT','/payment','üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20','GET','===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20===','4stNSAW','5327890bWmLzC','success','verifyPayment','&currency=','error','amount','PENDING','892600UsJMkh','toUpperCase','Error\x20message:','logWhiteDomainError','3402265VgabrN','===\x20AMER\x20SERVICE\x20ERROR\x20===','log','FAILED','42HdfMxh','/payment/verify/','Failed\x20to\x20verify\x20Amer\x20payment:\x20','cardLast4','&order=','1012501JEyzxv','../loggerService','784914giPOGl','loggerService','defineProperty','message','Amer\x20payment\x20verification\x20error:','PAID','45ZmfnXT'];a43_0x1322=function(){return _0x314066;};return a43_0x1322();}