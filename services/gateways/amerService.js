'use strict';const a41_0x582450=a41_0x91f2;function a41_0x91f2(_0x429a6c,_0x2f90ad){const _0x4561e3=a41_0x4561();return a41_0x91f2=function(_0x91f24d,_0x8a24fd){_0x91f24d=_0x91f24d-0x128;let _0x199a24=_0x4561e3[_0x91f24d];return _0x199a24;},a41_0x91f2(_0x429a6c,_0x2f90ad);}(function(_0x5e9090,_0x1f6f21){const _0x35173e=a41_0x91f2,_0x40d7b7=_0x5e9090();while(!![]){try{const _0x320298=parseInt(_0x35173e(0x158))/0x1+parseInt(_0x35173e(0x134))/0x2*(-parseInt(_0x35173e(0x12a))/0x3)+-parseInt(_0x35173e(0x14a))/0x4+parseInt(_0x35173e(0x159))/0x5*(-parseInt(_0x35173e(0x135))/0x6)+parseInt(_0x35173e(0x139))/0x7+parseInt(_0x35173e(0x149))/0x8*(-parseInt(_0x35173e(0x15a))/0x9)+parseInt(_0x35173e(0x15b))/0xa;if(_0x320298===_0x1f6f21)break;else _0x40d7b7['push'](_0x40d7b7['shift']());}catch(_0x45b2bc){_0x40d7b7['push'](_0x40d7b7['shift']());}}}(a41_0x4561,0x72ff8));function a41_0x4561(){const _0xe8f139=['Error\x20stack:','AmerService','631890gucMDF','705fEzGSj','1051119rumLwD','15406490mrHjVQ','success','cardLast4','processWebhook','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20','70887Noliuf','Unknown\x20error','loggerService','log','&currency=','Error\x20message:','Error\x20details:','/payment','Payment\x20ID:','paymentMethod','14tCGDbh','31086tkVmZz','Payment\x20URL:','PAID','üîÑ\x20Amer\x20webhook\x20processed:\x20status=','3892245sfVcTP','../loggerService','defineProperty','&order=','currency','/payment/verify/','&amount=','Processing\x20Amer\x20webhook:','logWhiteDomainError','stack','logWhiteDomainRequest','error','Amount:','toUpperCase','===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20===','üí∞\x20Amount:\x20','56IYNuGK','2176324SQBNQN','gatewayPaymentId','FAILED','Failed\x20to\x20verify\x20Amer\x20payment:\x20','apiUrl','amer','message','verifyPayment','GET','üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain','PENDING','transactionId'];a41_0x4561=function(){return _0xe8f139;};return a41_0x4561();}Object[a41_0x582450(0x13b)](exports,'__esModule',{'value':!![]}),exports[a41_0x582450(0x157)]=void 0x0;const loggerService_1=require(a41_0x582450(0x13a));class AmerService{constructor(){const _0x19cb63=a41_0x582450;this[_0x19cb63(0x14e)]='https://api2.trapay.uk',console['log'](_0x19cb63(0x153));}async['createPaymentLink'](_0xb0935b){const _0x18a977=a41_0x582450,{paymentId:_0x320430,orderId:_0x51c700,orderName:_0x5712ea,amount:_0x5b5b28,currency:_0x1663fe,usage:_0xbde3e6,maxPayments:_0x304e5e,successUrl:_0x5ab1ae,failUrl:_0x141e16}=_0xb0935b,_0x180a15=_0x1663fe[_0x18a977(0x146)]();console[_0x18a977(0x12d)]('üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20'+_0x51c700),console[_0x18a977(0x12d)](_0x18a977(0x148)+_0x5b5b28+'\x20'+_0x180a15);try{const _0x3848e1=this['apiUrl']+'/payment.php?payment_id='+_0x320430+_0x18a977(0x13f)+_0x5b5b28+_0x18a977(0x12e)+_0x180a15+_0x18a977(0x13c)+_0x51c700;return console[_0x18a977(0x12d)](_0x18a977(0x147)),console[_0x18a977(0x12d)](_0x18a977(0x132),_0x320430),console[_0x18a977(0x12d)](_0x18a977(0x136),_0x3848e1),console['log'](_0x18a977(0x145),_0x5b5b28,_0x180a15),loggerService_1['loggerService'][_0x18a977(0x143)]('amer',_0x18a977(0x131),'GET',{'paymentId':_0x320430,'amount':_0x5b5b28,'currency':_0x180a15,'orderId':_0x51c700}),{'gateway_payment_id':_0x320430,'payment_url':_0x3848e1};}catch(_0x4d0284){console['error']('===\x20AMER\x20SERVICE\x20ERROR\x20==='),console[_0x18a977(0x144)](_0x18a977(0x130),_0x4d0284),loggerService_1[_0x18a977(0x12c)][_0x18a977(0x141)](_0x18a977(0x14f),_0x18a977(0x131),_0x4d0284);if(_0x4d0284 instanceof Error){console['error'](_0x18a977(0x12f),_0x4d0284[_0x18a977(0x150)]),console['error'](_0x18a977(0x156),_0x4d0284[_0x18a977(0x142)]);throw new Error(_0x18a977(0x129)+_0x4d0284[_0x18a977(0x150)]);}throw new Error('Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error');}}async[a41_0x582450(0x151)](_0x302588){const _0x1cbe5c=a41_0x582450;console[_0x1cbe5c(0x12d)]('üîç\x20Verifying\x20Amer\x20payment:\x20'+_0x302588);try{return loggerService_1[_0x1cbe5c(0x12c)]['logWhiteDomainRequest'](_0x1cbe5c(0x14f),_0x1cbe5c(0x13e)+_0x302588,_0x1cbe5c(0x152),{}),{'status':_0x1cbe5c(0x154)};}catch(_0x3d0968){console[_0x1cbe5c(0x144)]('Amer\x20payment\x20verification\x20error:',_0x3d0968),loggerService_1[_0x1cbe5c(0x12c)][_0x1cbe5c(0x141)](_0x1cbe5c(0x14f),_0x1cbe5c(0x13e)+_0x302588,_0x3d0968);throw new Error(_0x1cbe5c(0x14d)+(_0x3d0968 instanceof Error?_0x3d0968[_0x1cbe5c(0x150)]:_0x1cbe5c(0x12b)));}}async[a41_0x582450(0x128)](_0x22951b){const _0x4e8a31=a41_0x582450;console[_0x4e8a31(0x12d)](_0x4e8a31(0x140),_0x22951b);let _0x9e0f53=_0x4e8a31(0x154);if(_0x22951b[_0x4e8a31(0x15c)]===!![])_0x9e0f53=_0x4e8a31(0x137);else _0x22951b['success']===![]&&(_0x9e0f53=_0x4e8a31(0x14c));const _0x466d4b={};return _0x22951b['cardLast4']&&(_0x466d4b[_0x4e8a31(0x15d)]=_0x22951b[_0x4e8a31(0x15d)]),_0x22951b[_0x4e8a31(0x133)]&&(_0x466d4b['paymentMethod']=_0x22951b[_0x4e8a31(0x133)]),_0x22951b[_0x4e8a31(0x155)]&&(_0x466d4b[_0x4e8a31(0x155)]=_0x22951b[_0x4e8a31(0x155)],_0x466d4b[_0x4e8a31(0x14b)]=_0x22951b[_0x4e8a31(0x155)]),console['log'](_0x4e8a31(0x138)+_0x9e0f53),{'paymentId':_0x22951b['paymentId']||_0x22951b['orderId']||'','status':_0x9e0f53,'amount':_0x22951b['amount'],'currency':_0x22951b[_0x4e8a31(0x13d)],'additionalInfo':_0x466d4b};}}exports[a41_0x582450(0x157)]=AmerService;