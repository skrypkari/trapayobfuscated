'use strict';const a45_0x6dd1d7=a45_0x24a9;(function(_0xedf83b,_0x413266){const _0x560bff=a45_0x24a9,_0x294802=_0xedf83b();while(!![]){try{const _0x39b928=parseInt(_0x560bff(0xe4))/0x1*(-parseInt(_0x560bff(0xcf))/0x2)+-parseInt(_0x560bff(0xec))/0x3+parseInt(_0x560bff(0xc4))/0x4*(-parseInt(_0x560bff(0xba))/0x5)+parseInt(_0x560bff(0xea))/0x6+-parseInt(_0x560bff(0xed))/0x7*(-parseInt(_0x560bff(0xc0))/0x8)+-parseInt(_0x560bff(0xe1))/0x9+parseInt(_0x560bff(0xd8))/0xa;if(_0x39b928===_0x413266)break;else _0x294802['push'](_0x294802['shift']());}catch(_0x361dae){_0x294802['push'](_0x294802['shift']());}}}(a45_0x497b,0xb83ee));Object[a45_0x6dd1d7(0xc6)](exports,a45_0x6dd1d7(0xbc),{'value':!![]}),exports[a45_0x6dd1d7(0xc2)]=void 0x0;const loggerService_1=require('../loggerService');function a45_0x497b(){const _0x43e358=['&currency=','===\x20AMER\x20SERVICE\x20ERROR\x20===','toUpperCase','createPaymentLink','32263360gznXSY','stack','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20','FAILED','Payment\x20ID:','/payment','Amer\x20payment\x20verification\x20error:','https://api2.trapay.uk','currency','12438999efBaOO','amount','üîÑ\x20Amer\x20webhook\x20processed:\x20status=','2cxYKOE','transactionId','paymentId','Error\x20stack:','Failed\x20to\x20verify\x20Amer\x20payment:\x20','apiUrl','4602438snuXyH','PENDING','3637488aKKamV','21EBHGmy','Amount:','paymentMethod','Payment\x20URL:','PAID','üí∞\x20Amount:\x20','&amount=','301295cKsgYE','üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain','__esModule','GET','üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20','processWebhook','3544632srVdxD','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error','AmerService','/payment/verify/','84EkHnil','error','defineProperty','üîç\x20Verifying\x20Amer\x20payment:\x20','===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20===','Unknown\x20error','log','loggerService','logWhiteDomainError','cardLast4','orderId','707930wBtTDz','amer','success','message','logWhiteDomainRequest'];a45_0x497b=function(){return _0x43e358;};return a45_0x497b();}function a45_0x24a9(_0x311804,_0x1fad11){const _0x497b8b=a45_0x497b();return a45_0x24a9=function(_0x24a919,_0x41bb24){_0x24a919=_0x24a919-0xb5;let _0x203849=_0x497b8b[_0x24a919];return _0x203849;},a45_0x24a9(_0x311804,_0x1fad11);}class AmerService{constructor(){const _0x3014d9=a45_0x6dd1d7;this['apiUrl']=_0x3014d9(0xdf),console[_0x3014d9(0xca)](_0x3014d9(0xbb));}async[a45_0x6dd1d7(0xd7)](_0x5f1ad2){const _0x3f70a6=a45_0x6dd1d7,{paymentId:_0x5af615,orderId:_0x5978ac,orderName:_0x10d5be,amount:_0x17134f,currency:_0x327b6b,usage:_0x69b485,maxPayments:_0x490671,successUrl:_0x3b3c93,failUrl:_0x3938dd}=_0x5f1ad2,_0x4d2f7b=_0x327b6b[_0x3f70a6(0xd6)]();console['log'](_0x3f70a6(0xbe)+_0x5978ac),console[_0x3f70a6(0xca)](_0x3f70a6(0xb8)+_0x17134f+'\x20'+_0x4d2f7b);try{const _0x2f0215=this[_0x3f70a6(0xe9)]+'/payment.php?payment_id='+_0x5af615+_0x3f70a6(0xb9)+_0x17134f+_0x3f70a6(0xd4)+_0x4d2f7b+'&order='+_0x5978ac;return console[_0x3f70a6(0xca)](_0x3f70a6(0xc8)),console[_0x3f70a6(0xca)](_0x3f70a6(0xdc),_0x5af615),console[_0x3f70a6(0xca)](_0x3f70a6(0xb6),_0x2f0215),console[_0x3f70a6(0xca)](_0x3f70a6(0xee),_0x17134f,_0x4d2f7b),loggerService_1[_0x3f70a6(0xcb)]['logWhiteDomainRequest'](_0x3f70a6(0xd0),'/payment',_0x3f70a6(0xbd),{'paymentId':_0x5af615,'amount':_0x17134f,'currency':_0x4d2f7b,'orderId':_0x5978ac}),{'gateway_payment_id':_0x5af615,'payment_url':_0x2f0215};}catch(_0x1cff5a){console['error'](_0x3f70a6(0xd5)),console[_0x3f70a6(0xc5)]('Error\x20details:',_0x1cff5a),loggerService_1[_0x3f70a6(0xcb)][_0x3f70a6(0xcc)](_0x3f70a6(0xd0),_0x3f70a6(0xdd),_0x1cff5a);if(_0x1cff5a instanceof Error){console[_0x3f70a6(0xc5)]('Error\x20message:',_0x1cff5a[_0x3f70a6(0xd2)]),console[_0x3f70a6(0xc5)](_0x3f70a6(0xe7),_0x1cff5a[_0x3f70a6(0xd9)]);throw new Error(_0x3f70a6(0xda)+_0x1cff5a[_0x3f70a6(0xd2)]);}throw new Error(_0x3f70a6(0xc1));}}async['verifyPayment'](_0x39959a){const _0x473319=a45_0x6dd1d7;console[_0x473319(0xca)](_0x473319(0xc7)+_0x39959a);try{return loggerService_1['loggerService'][_0x473319(0xd3)](_0x473319(0xd0),_0x473319(0xc3)+_0x39959a,_0x473319(0xbd),{}),{'status':_0x473319(0xeb)};}catch(_0x4a20f8){console['error'](_0x473319(0xde),_0x4a20f8),loggerService_1[_0x473319(0xcb)]['logWhiteDomainError']('amer','/payment/verify/'+_0x39959a,_0x4a20f8);throw new Error(_0x473319(0xe8)+(_0x4a20f8 instanceof Error?_0x4a20f8[_0x473319(0xd2)]:_0x473319(0xc9)));}}async[a45_0x6dd1d7(0xbf)](_0x23e4d8){const _0x5a9155=a45_0x6dd1d7;console['log']('Processing\x20Amer\x20webhook:',_0x23e4d8);let _0x4d8b0e='PENDING';if(_0x23e4d8[_0x5a9155(0xd1)]===!![])_0x4d8b0e=_0x5a9155(0xb7);else _0x23e4d8[_0x5a9155(0xd1)]===![]&&(_0x4d8b0e=_0x5a9155(0xdb));const _0x18c107={};return _0x23e4d8[_0x5a9155(0xcd)]&&(_0x18c107[_0x5a9155(0xcd)]=_0x23e4d8[_0x5a9155(0xcd)]),_0x23e4d8[_0x5a9155(0xb5)]&&(_0x18c107['paymentMethod']=_0x23e4d8[_0x5a9155(0xb5)]),_0x23e4d8[_0x5a9155(0xe5)]&&(_0x18c107[_0x5a9155(0xe5)]=_0x23e4d8[_0x5a9155(0xe5)],_0x18c107['gatewayPaymentId']=_0x23e4d8[_0x5a9155(0xe5)]),console[_0x5a9155(0xca)](_0x5a9155(0xe3)+_0x4d8b0e),{'paymentId':_0x23e4d8[_0x5a9155(0xe6)]||_0x23e4d8[_0x5a9155(0xce)]||'','status':_0x4d8b0e,'amount':_0x23e4d8[_0x5a9155(0xe2)],'currency':_0x23e4d8[_0x5a9155(0xe0)],'additionalInfo':_0x18c107};}}exports['AmerService']=AmerService;