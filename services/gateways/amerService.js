'use strict';const a51_0x1f8d87=a51_0x3bc4;(function(_0xd545bb,_0x297736){const _0x40d504=a51_0x3bc4,_0x2d174c=_0xd545bb();while(!![]){try{const _0x15d24f=-parseInt(_0x40d504(0x16b))/0x1*(-parseInt(_0x40d504(0x171))/0x2)+parseInt(_0x40d504(0x172))/0x3+parseInt(_0x40d504(0x16f))/0x4*(parseInt(_0x40d504(0x173))/0x5)+parseInt(_0x40d504(0x198))/0x6+parseInt(_0x40d504(0x185))/0x7+-parseInt(_0x40d504(0x177))/0x8+-parseInt(_0x40d504(0x19f))/0x9;if(_0x15d24f===_0x297736)break;else _0x2d174c['push'](_0x2d174c['shift']());}catch(_0x25a848){_0x2d174c['push'](_0x2d174c['shift']());}}}(a51_0x3df0,0xa4d7b));Object[a51_0x1f8d87(0x197)](exports,a51_0x1f8d87(0x18c),{'value':!![]}),exports['AmerService']=void 0x0;function a51_0x3df0(){const _0x130a37=['Error\x20stack:','defineProperty','36342yRjzlo','../loggerService','orderId','Error\x20message:','verifyPayment','apiUrl','paymentMethod','29811024vUjEEz','cardLast4','&order=','log','95797cLMtKS','loggerService','üîç\x20Verifying\x20Amer\x20payment:\x20','AmerService','4626092hqJCdY','stack','26lrTngl','3234132gzrSBl','5AzdXAx','Processing\x20Amer\x20webhook:','/payment.php?payment_id=','success','2302056YLgSii','processWebhook','Amer\x20payment\x20verification\x20error:','PENDING','Failed\x20to\x20verify\x20Amer\x20payment:\x20','GET','amount','üí∞\x20Amount:\x20','logWhiteDomainError','amer','PAID','paymentId','üîÑ\x20Amer\x20webhook\x20processed:\x20status=','createPaymentLink','5525121PtKMXr','message','Unknown\x20error','Error\x20details:','/payment','FAILED','currency','__esModule','üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain','/payment/verify/','logWhiteDomainRequest','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20','===\x20AMER\x20SERVICE\x20ERROR\x20===','error','Amount:','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error','transactionId'];a51_0x3df0=function(){return _0x130a37;};return a51_0x3df0();}const loggerService_1=require(a51_0x1f8d87(0x199));class AmerService{constructor(){const _0x2efbd2=a51_0x1f8d87;this[_0x2efbd2(0x19d)]='https://api2.trapay.uk',console[_0x2efbd2(0x1a2)](_0x2efbd2(0x18d));}async[a51_0x1f8d87(0x184)](_0x5708b7){const _0xa2df02=a51_0x1f8d87,{paymentId:_0x3cb370,orderId:_0x37ba64,orderName:_0x3db910,amount:_0x3819ac,currency:_0x397e74,usage:_0x2cd790,maxPayments:_0x1ba91b,successUrl:_0x1c32c7,failUrl:_0x31f5d6}=_0x5708b7,_0x11e786=_0x397e74['toUpperCase']();console[_0xa2df02(0x1a2)]('üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20'+_0x37ba64),console[_0xa2df02(0x1a2)](_0xa2df02(0x17e)+_0x3819ac+'\x20'+_0x11e786);try{const _0x466671=this[_0xa2df02(0x19d)]+_0xa2df02(0x175)+_0x3cb370+'&amount='+_0x3819ac+'&currency='+_0x11e786+_0xa2df02(0x1a1)+_0x37ba64;return console[_0xa2df02(0x1a2)]('===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20==='),console[_0xa2df02(0x1a2)]('Payment\x20ID:',_0x3cb370),console[_0xa2df02(0x1a2)]('Payment\x20URL:',_0x466671),console['log'](_0xa2df02(0x193),_0x3819ac,_0x11e786),loggerService_1[_0xa2df02(0x16c)]['logWhiteDomainRequest'](_0xa2df02(0x180),'/payment','GET',{'paymentId':_0x3cb370,'amount':_0x3819ac,'currency':_0x11e786,'orderId':_0x37ba64}),{'gateway_payment_id':_0x3cb370,'payment_url':_0x466671};}catch(_0xcbe85a){console[_0xa2df02(0x192)](_0xa2df02(0x191)),console[_0xa2df02(0x192)](_0xa2df02(0x188),_0xcbe85a),loggerService_1[_0xa2df02(0x16c)]['logWhiteDomainError'](_0xa2df02(0x180),_0xa2df02(0x189),_0xcbe85a);if(_0xcbe85a instanceof Error){console[_0xa2df02(0x192)](_0xa2df02(0x19b),_0xcbe85a[_0xa2df02(0x186)]),console[_0xa2df02(0x192)](_0xa2df02(0x196),_0xcbe85a[_0xa2df02(0x170)]);throw new Error(_0xa2df02(0x190)+_0xcbe85a['message']);}throw new Error(_0xa2df02(0x194));}}async[a51_0x1f8d87(0x19c)](_0x39d8c4){const _0x5b8c87=a51_0x1f8d87;console[_0x5b8c87(0x1a2)](_0x5b8c87(0x16d)+_0x39d8c4);try{return loggerService_1[_0x5b8c87(0x16c)][_0x5b8c87(0x18f)](_0x5b8c87(0x180),_0x5b8c87(0x18e)+_0x39d8c4,_0x5b8c87(0x17c),{}),{'status':'PENDING'};}catch(_0x2ac79c){console['error'](_0x5b8c87(0x179),_0x2ac79c),loggerService_1[_0x5b8c87(0x16c)][_0x5b8c87(0x17f)](_0x5b8c87(0x180),_0x5b8c87(0x18e)+_0x39d8c4,_0x2ac79c);throw new Error(_0x5b8c87(0x17b)+(_0x2ac79c instanceof Error?_0x2ac79c[_0x5b8c87(0x186)]:_0x5b8c87(0x187)));}}async[a51_0x1f8d87(0x178)](_0xeb5be2){const _0x1cc994=a51_0x1f8d87;console[_0x1cc994(0x1a2)](_0x1cc994(0x174),_0xeb5be2);let _0x22672d=_0x1cc994(0x17a);if(_0xeb5be2[_0x1cc994(0x176)]===!![])_0x22672d=_0x1cc994(0x181);else _0xeb5be2[_0x1cc994(0x176)]===![]&&(_0x22672d=_0x1cc994(0x18a));const _0x5f5468={};return _0xeb5be2['cardLast4']&&(_0x5f5468['cardLast4']=_0xeb5be2[_0x1cc994(0x1a0)]),_0xeb5be2[_0x1cc994(0x19e)]&&(_0x5f5468[_0x1cc994(0x19e)]=_0xeb5be2[_0x1cc994(0x19e)]),_0xeb5be2['transactionId']&&(_0x5f5468[_0x1cc994(0x195)]=_0xeb5be2[_0x1cc994(0x195)],_0x5f5468['gatewayPaymentId']=_0xeb5be2[_0x1cc994(0x195)]),console[_0x1cc994(0x1a2)](_0x1cc994(0x183)+_0x22672d),{'paymentId':_0xeb5be2[_0x1cc994(0x182)]||_0xeb5be2[_0x1cc994(0x19a)]||'','status':_0x22672d,'amount':_0xeb5be2[_0x1cc994(0x17d)],'currency':_0xeb5be2[_0x1cc994(0x18b)],'additionalInfo':_0x5f5468};}}function a51_0x3bc4(_0x170907,_0x46a19a){_0x170907=_0x170907-0x16b;const _0x3df057=a51_0x3df0();let _0x3bc4eb=_0x3df057[_0x170907];return _0x3bc4eb;}exports[a51_0x1f8d87(0x16e)]=AmerService;