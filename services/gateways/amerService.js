'use strict';const a55_0x481c38=a55_0x4d7a;(function(_0x2f9dce,_0x2fce72){const _0x528ab0=a55_0x4d7a,_0x3c7b7f=_0x2f9dce();while(!![]){try{const _0x4e24fa=parseInt(_0x528ab0(0x143))/0x1*(parseInt(_0x528ab0(0x147))/0x2)+parseInt(_0x528ab0(0x151))/0x3+-parseInt(_0x528ab0(0x155))/0x4*(-parseInt(_0x528ab0(0x13f))/0x5)+-parseInt(_0x528ab0(0x152))/0x6+parseInt(_0x528ab0(0x141))/0x7+parseInt(_0x528ab0(0x139))/0x8+parseInt(_0x528ab0(0x13c))/0x9*(-parseInt(_0x528ab0(0x161))/0xa);if(_0x4e24fa===_0x2fce72)break;else _0x3c7b7f['push'](_0x3c7b7f['shift']());}catch(_0x44bcbf){_0x3c7b7f['push'](_0x3c7b7f['shift']());}}}(a55_0x4995,0x833fc));function a55_0x4995(){const _0x5f33da=['10XLymOu','stack','&currency=','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20','/payment.php?payment_id=','paymentId','/payment','transactionId','amer','https://api2.trapay.uk','üîç\x20Verifying\x20Amer\x20payment:\x20','Error\x20details:','logWhiteDomainError','4047656AjFDht','../loggerService','Error\x20message:','24807366GZPpyO','cardLast4','logWhiteDomainRequest','15tkrtTb','GET','5709487zdCmCO','Amer\x20payment\x20verification\x20error:','179953QrdYTR','__esModule','üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain','===\x20AMER\x20SERVICE\x20ERROR\x20===','6qMKqxB','Payment\x20ID:','üîÑ\x20Amer\x20webhook\x20processed:\x20status=','Payment\x20URL:','/payment/verify/','loggerService','FAILED','message','currency','apiUrl','2326314JJdvoc','1968948NoFFoX','log','Processing\x20Amer\x20webhook:','1313644JgsgTu','paymentMethod','createPaymentLink','defineProperty','&amount=','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error','&order=','PAID','amount','AmerService','PENDING','error'];a55_0x4995=function(){return _0x5f33da;};return a55_0x4995();}Object[a55_0x481c38(0x158)](exports,a55_0x481c38(0x144),{'value':!![]}),exports[a55_0x481c38(0x15e)]=void 0x0;const loggerService_1=require(a55_0x481c38(0x13a));class AmerService{constructor(){const _0xdef158=a55_0x481c38;this['apiUrl']=_0xdef158(0x135),console[_0xdef158(0x153)](_0xdef158(0x145));}async[a55_0x481c38(0x157)](_0x3c7abe){const _0x29b891=a55_0x481c38,{paymentId:_0x266801,orderId:_0x70b7ff,orderName:_0x1e48e9,amount:_0x947627,currency:_0x7a8e1f,usage:_0x1a1860,maxPayments:_0x1da827,successUrl:_0x324851,failUrl:_0x2b9448}=_0x3c7abe,_0x590beb=_0x7a8e1f['toUpperCase']();console['log']('üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20'+_0x70b7ff),console['log']('üí∞\x20Amount:\x20'+_0x947627+'\x20'+_0x590beb);try{const _0x1b9700=this[_0x29b891(0x150)]+_0x29b891(0x130)+_0x266801+_0x29b891(0x159)+_0x947627+_0x29b891(0x12e)+_0x590beb+_0x29b891(0x15b)+_0x70b7ff;return console['log']('===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20==='),console[_0x29b891(0x153)](_0x29b891(0x148),_0x266801),console['log'](_0x29b891(0x14a),_0x1b9700),console[_0x29b891(0x153)]('Amount:',_0x947627,_0x590beb),loggerService_1[_0x29b891(0x14c)][_0x29b891(0x13e)]('amer',_0x29b891(0x132),'GET',{'paymentId':_0x266801,'amount':_0x947627,'currency':_0x590beb,'orderId':_0x70b7ff}),{'gateway_payment_id':_0x266801,'payment_url':_0x1b9700};}catch(_0x2b44d8){console[_0x29b891(0x160)](_0x29b891(0x146)),console['error'](_0x29b891(0x137),_0x2b44d8),loggerService_1['loggerService'][_0x29b891(0x138)](_0x29b891(0x134),'/payment',_0x2b44d8);if(_0x2b44d8 instanceof Error){console['error'](_0x29b891(0x13b),_0x2b44d8[_0x29b891(0x14e)]),console[_0x29b891(0x160)]('Error\x20stack:',_0x2b44d8[_0x29b891(0x12d)]);throw new Error(_0x29b891(0x12f)+_0x2b44d8[_0x29b891(0x14e)]);}throw new Error(_0x29b891(0x15a));}}async['verifyPayment'](_0x4fcd60){const _0x23078e=a55_0x481c38;console['log'](_0x23078e(0x136)+_0x4fcd60);try{return loggerService_1[_0x23078e(0x14c)][_0x23078e(0x13e)](_0x23078e(0x134),_0x23078e(0x14b)+_0x4fcd60,_0x23078e(0x140),{}),{'status':'PENDING'};}catch(_0x230653){console[_0x23078e(0x160)](_0x23078e(0x142),_0x230653),loggerService_1[_0x23078e(0x14c)][_0x23078e(0x138)]('amer',_0x23078e(0x14b)+_0x4fcd60,_0x230653);throw new Error('Failed\x20to\x20verify\x20Amer\x20payment:\x20'+(_0x230653 instanceof Error?_0x230653[_0x23078e(0x14e)]:'Unknown\x20error'));}}async['processWebhook'](_0xfdaf7){const _0x2ed621=a55_0x481c38;console['log'](_0x2ed621(0x154),_0xfdaf7);let _0x146206=_0x2ed621(0x15f);if(_0xfdaf7['success']===!![])_0x146206=_0x2ed621(0x15c);else _0xfdaf7['success']===![]&&(_0x146206=_0x2ed621(0x14d));const _0x120b72={};return _0xfdaf7['cardLast4']&&(_0x120b72[_0x2ed621(0x13d)]=_0xfdaf7[_0x2ed621(0x13d)]),_0xfdaf7['paymentMethod']&&(_0x120b72['paymentMethod']=_0xfdaf7[_0x2ed621(0x156)]),_0xfdaf7[_0x2ed621(0x133)]&&(_0x120b72[_0x2ed621(0x133)]=_0xfdaf7['transactionId'],_0x120b72['gatewayPaymentId']=_0xfdaf7[_0x2ed621(0x133)]),console[_0x2ed621(0x153)](_0x2ed621(0x149)+_0x146206),{'paymentId':_0xfdaf7[_0x2ed621(0x131)]||_0xfdaf7['orderId']||'','status':_0x146206,'amount':_0xfdaf7[_0x2ed621(0x15d)],'currency':_0xfdaf7[_0x2ed621(0x14f)],'additionalInfo':_0x120b72};}}function a55_0x4d7a(_0x30982c,_0x5ced9f){_0x30982c=_0x30982c-0x12d;const _0x499576=a55_0x4995();let _0x4d7adc=_0x499576[_0x30982c];return _0x4d7adc;}exports[a55_0x481c38(0x15e)]=AmerService;