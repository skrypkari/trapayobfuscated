'use strict';function a41_0x2308(_0x1696d5,_0x19fdc9){const _0x4f4a1d=a41_0x4f4a();return a41_0x2308=function(_0x2308bd,_0x93b537){_0x2308bd=_0x2308bd-0x146;let _0x5e302b=_0x4f4a1d[_0x2308bd];return _0x5e302b;},a41_0x2308(_0x1696d5,_0x19fdc9);}function a41_0x4f4a(){const _0x769517=['transactionId','message','paymentMethod','Error\x20stack:','../loggerService','createPaymentLink','Payment\x20ID:','üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain','logWhiteDomainError','/payment/verify/','FAILED','stack','orderId','defineProperty','cardLast4','5550MpPYfB','GET','https://api2.trapay.uk','150TYcMxB','PENDING','Payment\x20URL:','loggerService','üîÑ\x20Amer\x20webhook\x20processed:\x20status=','log','üí∞\x20Amount:\x20','&currency=','Error\x20details:','paymentId','üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20','6482gVVkHu','7272734sJvssa','verifyPayment','/payment','Processing\x20Amer\x20webhook:','logWhiteDomainRequest','Unknown\x20error','1181688DXsTaU','11226368ZMWiGi','/payment.php?payment_id=','amer','toUpperCase','894HfJIOO','===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20===','AmerService','16983ZxhZGX','218578vKljfl','success','PAID','__esModule','error','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error','255445gOcobR','apiUrl','Amount:','currency','&order=','üîç\x20Verifying\x20Amer\x20payment:\x20'];a41_0x4f4a=function(){return _0x769517;};return a41_0x4f4a();}const a41_0x3e9477=a41_0x2308;(function(_0x5226f9,_0x2dbfc7){const _0x2a6a23=a41_0x2308,_0x14fccd=_0x5226f9();while(!![]){try{const _0x5d1485=-parseInt(_0x2a6a23(0x153))/0x1+-parseInt(_0x2a6a23(0x17c))/0x2*(parseInt(_0x2a6a23(0x14f))/0x3)+-parseInt(_0x2a6a23(0x14a))/0x4+parseInt(_0x2a6a23(0x159))/0x5*(-parseInt(_0x2a6a23(0x171))/0x6)+parseInt(_0x2a6a23(0x17d))/0x7+parseInt(_0x2a6a23(0x14b))/0x8+-parseInt(_0x2a6a23(0x152))/0x9*(-parseInt(_0x2a6a23(0x16e))/0xa);if(_0x5d1485===_0x2dbfc7)break;else _0x14fccd['push'](_0x14fccd['shift']());}catch(_0x21a5d0){_0x14fccd['push'](_0x14fccd['shift']());}}}(a41_0x4f4a,0xb2d54));Object[a41_0x3e9477(0x16c)](exports,a41_0x3e9477(0x156),{'value':!![]}),exports[a41_0x3e9477(0x151)]=void 0x0;const loggerService_1=require(a41_0x3e9477(0x163));class AmerService{constructor(){const _0x2e4809=a41_0x3e9477;this[_0x2e4809(0x15a)]=_0x2e4809(0x170),console[_0x2e4809(0x176)](_0x2e4809(0x166));}async[a41_0x3e9477(0x164)](_0x322909){const _0x299876=a41_0x3e9477,{paymentId:_0x80a77f,orderId:_0x56dbc1,orderName:_0x2f2d13,amount:_0x2c5965,currency:_0x1e4bd5,usage:_0xd6e504,maxPayments:_0x5b33eb,successUrl:_0x26ff74,failUrl:_0x4b297d}=_0x322909,_0x435335=_0x1e4bd5[_0x299876(0x14e)]();console[_0x299876(0x176)](_0x299876(0x17b)+_0x56dbc1),console[_0x299876(0x176)](_0x299876(0x177)+_0x2c5965+'\x20'+_0x435335);try{const _0x2d6f8e=this[_0x299876(0x15a)]+_0x299876(0x14c)+_0x80a77f+'&amount='+_0x2c5965+_0x299876(0x178)+_0x435335+_0x299876(0x15d)+_0x56dbc1;return console[_0x299876(0x176)](_0x299876(0x150)),console['log'](_0x299876(0x165),_0x80a77f),console['log'](_0x299876(0x173),_0x2d6f8e),console[_0x299876(0x176)](_0x299876(0x15b),_0x2c5965,_0x435335),loggerService_1[_0x299876(0x174)]['logWhiteDomainRequest']('amer','/payment',_0x299876(0x16f),{'paymentId':_0x80a77f,'amount':_0x2c5965,'currency':_0x435335,'orderId':_0x56dbc1}),{'gateway_payment_id':_0x80a77f,'payment_url':_0x2d6f8e};}catch(_0x210991){console[_0x299876(0x157)]('===\x20AMER\x20SERVICE\x20ERROR\x20==='),console[_0x299876(0x157)](_0x299876(0x179),_0x210991),loggerService_1['loggerService'][_0x299876(0x167)]('amer',_0x299876(0x146),_0x210991);if(_0x210991 instanceof Error){console[_0x299876(0x157)]('Error\x20message:',_0x210991[_0x299876(0x160)]),console[_0x299876(0x157)](_0x299876(0x162),_0x210991[_0x299876(0x16a)]);throw new Error('Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20'+_0x210991['message']);}throw new Error(_0x299876(0x158));}}async[a41_0x3e9477(0x17e)](_0x464ca0){const _0x269694=a41_0x3e9477;console['log'](_0x269694(0x15e)+_0x464ca0);try{return loggerService_1[_0x269694(0x174)][_0x269694(0x148)](_0x269694(0x14d),_0x269694(0x168)+_0x464ca0,_0x269694(0x16f),{}),{'status':_0x269694(0x172)};}catch(_0x46e756){console[_0x269694(0x157)]('Amer\x20payment\x20verification\x20error:',_0x46e756),loggerService_1[_0x269694(0x174)][_0x269694(0x167)](_0x269694(0x14d),_0x269694(0x168)+_0x464ca0,_0x46e756);throw new Error('Failed\x20to\x20verify\x20Amer\x20payment:\x20'+(_0x46e756 instanceof Error?_0x46e756['message']:_0x269694(0x149)));}}async['processWebhook'](_0x36d4ab){const _0x409330=a41_0x3e9477;console['log'](_0x409330(0x147),_0x36d4ab);let _0xfd10cb='PENDING';if(_0x36d4ab[_0x409330(0x154)]===!![])_0xfd10cb=_0x409330(0x155);else _0x36d4ab[_0x409330(0x154)]===![]&&(_0xfd10cb=_0x409330(0x169));const _0x20bf63={};return _0x36d4ab[_0x409330(0x16d)]&&(_0x20bf63[_0x409330(0x16d)]=_0x36d4ab[_0x409330(0x16d)]),_0x36d4ab[_0x409330(0x161)]&&(_0x20bf63[_0x409330(0x161)]=_0x36d4ab[_0x409330(0x161)]),_0x36d4ab[_0x409330(0x15f)]&&(_0x20bf63['transactionId']=_0x36d4ab[_0x409330(0x15f)],_0x20bf63['gatewayPaymentId']=_0x36d4ab[_0x409330(0x15f)]),console[_0x409330(0x176)](_0x409330(0x175)+_0xfd10cb),{'paymentId':_0x36d4ab[_0x409330(0x17a)]||_0x36d4ab[_0x409330(0x16b)]||'','status':_0xfd10cb,'amount':_0x36d4ab['amount'],'currency':_0x36d4ab[_0x409330(0x15c)],'additionalInfo':_0x20bf63};}}exports[a41_0x3e9477(0x151)]=AmerService;