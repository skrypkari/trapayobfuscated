'use strict';const a41_0x172ac6=a41_0x5c9f;(function(_0x12b74c,_0x11372e){const _0x2549e4=a41_0x5c9f,_0x3dbb8b=_0x12b74c();while(!![]){try{const _0x27c72b=-parseInt(_0x2549e4(0x1c4))/0x1*(parseInt(_0x2549e4(0x1c5))/0x2)+-parseInt(_0x2549e4(0x1b8))/0x3+-parseInt(_0x2549e4(0x1b1))/0x4+-parseInt(_0x2549e4(0x1cb))/0x5+-parseInt(_0x2549e4(0x1ce))/0x6+parseInt(_0x2549e4(0x1cd))/0x7+parseInt(_0x2549e4(0x19d))/0x8*(parseInt(_0x2549e4(0x1ac))/0x9);if(_0x27c72b===_0x11372e)break;else _0x3dbb8b['push'](_0x3dbb8b['shift']());}catch(_0x1a93b3){_0x3dbb8b['push'](_0x3dbb8b['shift']());}}}(a41_0x315f,0x1c574));Object['defineProperty'](exports,a41_0x172ac6(0x1c1),{'value':!![]}),exports[a41_0x172ac6(0x1be)]=void 0x0;function a41_0x5c9f(_0x394377,_0x186b55){const _0x315f94=a41_0x315f();return a41_0x5c9f=function(_0x5c9f0b,_0x456f6e){_0x5c9f0b=_0x5c9f0b-0x19d;let _0x16a471=_0x315f94[_0x5c9f0b];return _0x16a471;},a41_0x5c9f(_0x394377,_0x186b55);}function a41_0x315f(){const _0x5869e1=['146830gQjKOn','GET','1576302nSNqnE','1237248pbUHzc','Payment\x20URL:','Amount:','8JlYyaW','createPaymentLink','===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20===','Amer\x20payment\x20verification\x20error:','üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain','apiUrl','===\x20AMER\x20SERVICE\x20ERROR\x20===','/payment.php?payment_id=','logWhiteDomainRequest','amer','toUpperCase','&order=','verifyPayment','message','success','3573117UFQTye','&currency=','üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20','loggerService','stack','295044jsGJNf','log','transactionId','/payment/verify/','error','PENDING','amount','484725WKlZia','FAILED','currency','Unknown\x20error','logWhiteDomainError','orderId','AmerService','../loggerService','&amount=','__esModule','paymentMethod','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error','2347QMaPuP','30wFPENW','cardLast4','https://api2.trapay.uk','/payment','Failed\x20to\x20verify\x20Amer\x20payment:\x20','paymentId'];a41_0x315f=function(){return _0x5869e1;};return a41_0x315f();}const loggerService_1=require(a41_0x172ac6(0x1bf));class AmerService{constructor(){const _0x4800c8=a41_0x172ac6;this[_0x4800c8(0x1a2)]=_0x4800c8(0x1c7),console[_0x4800c8(0x1b2)](_0x4800c8(0x1a1));}async[a41_0x172ac6(0x19e)](_0x54c056){const _0x5e786d=a41_0x172ac6,{paymentId:_0xe270f8,orderId:_0x1e49d7,orderName:_0x355d80,amount:_0x4ea89c,currency:_0x5b8943,usage:_0x1d6faf,maxPayments:_0x7ccca1,successUrl:_0x29e1bd,failUrl:_0x4b8c24}=_0x54c056,_0xddcd7d=_0x5b8943[_0x5e786d(0x1a7)]();console[_0x5e786d(0x1b2)](_0x5e786d(0x1ae)+_0x1e49d7),console[_0x5e786d(0x1b2)]('üí∞\x20Amount:\x20'+_0x4ea89c+'\x20'+_0xddcd7d);try{const _0x2ac8d2=this['apiUrl']+_0x5e786d(0x1a4)+_0xe270f8+_0x5e786d(0x1c0)+_0x4ea89c+_0x5e786d(0x1ad)+_0xddcd7d+_0x5e786d(0x1a8)+_0x1e49d7;return console[_0x5e786d(0x1b2)](_0x5e786d(0x19f)),console[_0x5e786d(0x1b2)]('Payment\x20ID:',_0xe270f8),console[_0x5e786d(0x1b2)](_0x5e786d(0x1cf),_0x2ac8d2),console['log'](_0x5e786d(0x1d0),_0x4ea89c,_0xddcd7d),loggerService_1['loggerService'][_0x5e786d(0x1a5)](_0x5e786d(0x1a6),_0x5e786d(0x1c8),'GET',{'paymentId':_0xe270f8,'amount':_0x4ea89c,'currency':_0xddcd7d,'orderId':_0x1e49d7}),{'gateway_payment_id':_0xe270f8,'payment_url':_0x2ac8d2};}catch(_0x2c56ac){console['error'](_0x5e786d(0x1a3)),console[_0x5e786d(0x1b5)]('Error\x20details:',_0x2c56ac),loggerService_1[_0x5e786d(0x1af)][_0x5e786d(0x1bc)](_0x5e786d(0x1a6),_0x5e786d(0x1c8),_0x2c56ac);if(_0x2c56ac instanceof Error){console[_0x5e786d(0x1b5)]('Error\x20message:',_0x2c56ac[_0x5e786d(0x1aa)]),console['error']('Error\x20stack:',_0x2c56ac[_0x5e786d(0x1b0)]);throw new Error('Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20'+_0x2c56ac['message']);}throw new Error(_0x5e786d(0x1c3));}}async[a41_0x172ac6(0x1a9)](_0x5598e7){const _0x52c428=a41_0x172ac6;console[_0x52c428(0x1b2)]('üîç\x20Verifying\x20Amer\x20payment:\x20'+_0x5598e7);try{return loggerService_1[_0x52c428(0x1af)][_0x52c428(0x1a5)](_0x52c428(0x1a6),'/payment/verify/'+_0x5598e7,_0x52c428(0x1cc),{}),{'status':'PENDING'};}catch(_0x338887){console['error'](_0x52c428(0x1a0),_0x338887),loggerService_1[_0x52c428(0x1af)][_0x52c428(0x1bc)]('amer',_0x52c428(0x1b4)+_0x5598e7,_0x338887);throw new Error(_0x52c428(0x1c9)+(_0x338887 instanceof Error?_0x338887[_0x52c428(0x1aa)]:_0x52c428(0x1bb)));}}async['processWebhook'](_0x212b55){const _0x34e7fc=a41_0x172ac6;console['log']('Processing\x20Amer\x20webhook:',_0x212b55);let _0x567e55=_0x34e7fc(0x1b6);if(_0x212b55['success']===!![])_0x567e55='PAID';else _0x212b55[_0x34e7fc(0x1ab)]===![]&&(_0x567e55=_0x34e7fc(0x1b9));const _0x8cac9f={};return _0x212b55[_0x34e7fc(0x1c6)]&&(_0x8cac9f['cardLast4']=_0x212b55[_0x34e7fc(0x1c6)]),_0x212b55[_0x34e7fc(0x1c2)]&&(_0x8cac9f['paymentMethod']=_0x212b55[_0x34e7fc(0x1c2)]),_0x212b55[_0x34e7fc(0x1b3)]&&(_0x8cac9f[_0x34e7fc(0x1b3)]=_0x212b55[_0x34e7fc(0x1b3)],_0x8cac9f['gatewayPaymentId']=_0x212b55['transactionId']),console[_0x34e7fc(0x1b2)]('üîÑ\x20Amer\x20webhook\x20processed:\x20status='+_0x567e55),{'paymentId':_0x212b55[_0x34e7fc(0x1ca)]||_0x212b55[_0x34e7fc(0x1bd)]||'','status':_0x567e55,'amount':_0x212b55[_0x34e7fc(0x1b7)],'currency':_0x212b55[_0x34e7fc(0x1ba)],'additionalInfo':_0x8cac9f};}}exports['AmerService']=AmerService;