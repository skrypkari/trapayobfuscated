'use strict';const a45_0x556b8a=a45_0x5bde;function a45_0x5bde(_0x3c9959,_0x39c7dc){const _0x7aa77a=a45_0x7aa7();return a45_0x5bde=function(_0x5bdec0,_0x17fae0){_0x5bdec0=_0x5bdec0-0x1d7;let _0x46b34a=_0x7aa77a[_0x5bdec0];return _0x46b34a;},a45_0x5bde(_0x3c9959,_0x39c7dc);}(function(_0xd830ec,_0x1a016f){const _0x160632=a45_0x5bde,_0x177887=_0xd830ec();while(!![]){try{const _0x1dd7a0=parseInt(_0x160632(0x1fc))/0x1+-parseInt(_0x160632(0x203))/0x2+parseInt(_0x160632(0x1e5))/0x3+-parseInt(_0x160632(0x1f2))/0x4*(parseInt(_0x160632(0x1fa))/0x5)+parseInt(_0x160632(0x1e1))/0x6+-parseInt(_0x160632(0x1f5))/0x7*(-parseInt(_0x160632(0x1ef))/0x8)+-parseInt(_0x160632(0x1db))/0x9;if(_0x1dd7a0===_0x1a016f)break;else _0x177887['push'](_0x177887['shift']());}catch(_0x3df64d){_0x177887['push'](_0x177887['shift']());}}}(a45_0x7aa7,0xb2f58));Object[a45_0x556b8a(0x1e9)](exports,'__esModule',{'value':!![]}),exports[a45_0x556b8a(0x1df)]=void 0x0;const loggerService_1=require('../loggerService');function a45_0x7aa7(){const _0x2da00f=['toUpperCase','Processing\x20Amer\x20webhook:','&amount=','amer','846535aKAKRY','paymentId','250286qYEvZz','GET','processWebhook','paymentMethod','/payment','Error\x20stack:','gatewayPaymentId','281208SsXNvA','&currency=','üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20','apiUrl','üîç\x20Verifying\x20Amer\x20payment:\x20','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20','currency','üí∞\x20Amount:\x20','&order=','success','transactionId','21782142KSKVMZ','message','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error','https://api2.trapay.uk','AmerService','logWhiteDomainError','6064806jtozDN','amount','logWhiteDomainRequest','log','3242640nNcrGE','stack','Failed\x20to\x20verify\x20Amer\x20payment:\x20','verifyPayment','defineProperty','Amount:','Payment\x20URL:','PENDING','orderId','error','96JFrGwl','cardLast4','/payment/verify/','12VjSGci','loggerService','üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain','851557miPvRq'];a45_0x7aa7=function(){return _0x2da00f;};return a45_0x7aa7();}class AmerService{constructor(){const _0x17bbbe=a45_0x556b8a;this[_0x17bbbe(0x206)]=_0x17bbbe(0x1de),console[_0x17bbbe(0x1e4)](_0x17bbbe(0x1f4));}async['createPaymentLink'](_0x3237e6){const _0x1d72f1=a45_0x556b8a,{paymentId:_0x597543,orderId:_0x2b3400,orderName:_0x2b83e6,amount:_0x3a9bd0,currency:_0x3538ce,usage:_0x219485,maxPayments:_0xe06735,successUrl:_0x181fb3,failUrl:_0x3e446d}=_0x3237e6,_0x102227=_0x3538ce[_0x1d72f1(0x1f6)]();console['log'](_0x1d72f1(0x205)+_0x2b3400),console[_0x1d72f1(0x1e4)](_0x1d72f1(0x1d7)+_0x3a9bd0+'\x20'+_0x102227);try{const _0x34d959=this[_0x1d72f1(0x206)]+'/payment.php?payment_id='+_0x597543+_0x1d72f1(0x1f8)+_0x3a9bd0+_0x1d72f1(0x204)+_0x102227+_0x1d72f1(0x1d8)+_0x2b3400;return console['log']('===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20==='),console[_0x1d72f1(0x1e4)]('Payment\x20ID:',_0x597543),console[_0x1d72f1(0x1e4)](_0x1d72f1(0x1eb),_0x34d959),console['log'](_0x1d72f1(0x1ea),_0x3a9bd0,_0x102227),loggerService_1[_0x1d72f1(0x1f3)][_0x1d72f1(0x1e3)]('amer',_0x1d72f1(0x200),'GET',{'paymentId':_0x597543,'amount':_0x3a9bd0,'currency':_0x102227,'orderId':_0x2b3400}),{'gateway_payment_id':_0x597543,'payment_url':_0x34d959};}catch(_0x17ca6c){console[_0x1d72f1(0x1ee)]('===\x20AMER\x20SERVICE\x20ERROR\x20==='),console[_0x1d72f1(0x1ee)]('Error\x20details:',_0x17ca6c),loggerService_1['loggerService'][_0x1d72f1(0x1e0)]('amer',_0x1d72f1(0x200),_0x17ca6c);if(_0x17ca6c instanceof Error){console[_0x1d72f1(0x1ee)]('Error\x20message:',_0x17ca6c[_0x1d72f1(0x1dc)]),console[_0x1d72f1(0x1ee)](_0x1d72f1(0x201),_0x17ca6c[_0x1d72f1(0x1e6)]);throw new Error(_0x1d72f1(0x208)+_0x17ca6c[_0x1d72f1(0x1dc)]);}throw new Error(_0x1d72f1(0x1dd));}}async[a45_0x556b8a(0x1e8)](_0x1f94ce){const _0x5dc7a1=a45_0x556b8a;console[_0x5dc7a1(0x1e4)](_0x5dc7a1(0x207)+_0x1f94ce);try{return loggerService_1[_0x5dc7a1(0x1f3)]['logWhiteDomainRequest'](_0x5dc7a1(0x1f9),'/payment/verify/'+_0x1f94ce,_0x5dc7a1(0x1fd),{}),{'status':'PENDING'};}catch(_0x4784f8){console['error']('Amer\x20payment\x20verification\x20error:',_0x4784f8),loggerService_1['loggerService'][_0x5dc7a1(0x1e0)](_0x5dc7a1(0x1f9),_0x5dc7a1(0x1f1)+_0x1f94ce,_0x4784f8);throw new Error(_0x5dc7a1(0x1e7)+(_0x4784f8 instanceof Error?_0x4784f8['message']:'Unknown\x20error'));}}async[a45_0x556b8a(0x1fe)](_0x4cf82a){const _0x44dfb6=a45_0x556b8a;console[_0x44dfb6(0x1e4)](_0x44dfb6(0x1f7),_0x4cf82a);let _0x394abf=_0x44dfb6(0x1ec);if(_0x4cf82a[_0x44dfb6(0x1d9)]===!![])_0x394abf='PAID';else _0x4cf82a[_0x44dfb6(0x1d9)]===![]&&(_0x394abf='FAILED');const _0x31cb75={};return _0x4cf82a[_0x44dfb6(0x1f0)]&&(_0x31cb75[_0x44dfb6(0x1f0)]=_0x4cf82a[_0x44dfb6(0x1f0)]),_0x4cf82a[_0x44dfb6(0x1ff)]&&(_0x31cb75[_0x44dfb6(0x1ff)]=_0x4cf82a[_0x44dfb6(0x1ff)]),_0x4cf82a['transactionId']&&(_0x31cb75['transactionId']=_0x4cf82a[_0x44dfb6(0x1da)],_0x31cb75[_0x44dfb6(0x202)]=_0x4cf82a[_0x44dfb6(0x1da)]),console[_0x44dfb6(0x1e4)]('üîÑ\x20Amer\x20webhook\x20processed:\x20status='+_0x394abf),{'paymentId':_0x4cf82a[_0x44dfb6(0x1fb)]||_0x4cf82a[_0x44dfb6(0x1ed)]||'','status':_0x394abf,'amount':_0x4cf82a[_0x44dfb6(0x1e2)],'currency':_0x4cf82a[_0x44dfb6(0x209)],'additionalInfo':_0x31cb75};}}exports[a45_0x556b8a(0x1df)]=AmerService;