'use strict';const a61_0x3aa1ba=a61_0x299d;(function(_0x5bae58,_0x1e65d1){const _0x10e1af=a61_0x299d,_0x114026=_0x5bae58();while(!![]){try{const _0x1e4d52=-parseInt(_0x10e1af(0x1bb))/0x1+-parseInt(_0x10e1af(0x1e2))/0x2*(-parseInt(_0x10e1af(0x1dc))/0x3)+parseInt(_0x10e1af(0x1db))/0x4+parseInt(_0x10e1af(0x1ba))/0x5*(-parseInt(_0x10e1af(0x1cf))/0x6)+-parseInt(_0x10e1af(0x1b7))/0x7*(-parseInt(_0x10e1af(0x1d5))/0x8)+parseInt(_0x10e1af(0x1bf))/0x9+-parseInt(_0x10e1af(0x1e0))/0xa;if(_0x1e4d52===_0x1e65d1)break;else _0x114026['push'](_0x114026['shift']());}catch(_0x2855f5){_0x114026['push'](_0x114026['shift']());}}}(a61_0x286a,0xbd27d));function a61_0x299d(_0x3eeb3a,_0x5b9a9f){_0x3eeb3a=_0x3eeb3a-0x1b0;const _0x286a6d=a61_0x286a();let _0x299d77=_0x286a6d[_0x3eeb3a];return _0x299d77;}Object[a61_0x3aa1ba(0x1d3)](exports,a61_0x3aa1ba(0x1e4),{'value':!![]}),exports[a61_0x3aa1ba(0x1c9)]=void 0x0;const loggerService_1=require('../loggerService');function a61_0x286a(){const _0x38de61=['/payment','Amer\x20payment\x20verification\x20error:','AmerService','apiUrl','Payment\x20ID:','üîÑ\x20Amer\x20webhook\x20processed:\x20status=','FAILED','paymentId','1230738ybZSmK','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error','üîç\x20Verifying\x20Amer\x20payment:\x20','===\x20AMER\x20SERVICE\x20ERROR\x20===','defineProperty','paymentMethod','10691248LKStEx','===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20===','stack','amer','/payment/verify/','/payment.php?payment_id=','1929180NnJbyA','168600hwnfUc','logWhiteDomainRequest','üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain','processWebhook','13857440tmEnHm','success','6GYOgsP','loggerService','__esModule','toUpperCase','&amount=','Error\x20details:','PENDING','error','&order=','transactionId','log','7AfXrQr','createPaymentLink','Failed\x20to\x20verify\x20Amer\x20payment:\x20','15RhdFos','290081wrujGl','üí∞\x20Amount:\x20','Amount:','message','9708066jUGNSQ','logWhiteDomainError','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20','cardLast4','Unknown\x20error','GET','Processing\x20Amer\x20webhook:','https://api2.trapay.uk'];a61_0x286a=function(){return _0x38de61;};return a61_0x286a();}class AmerService{constructor(){const _0xfc2f56=a61_0x3aa1ba;this['apiUrl']=_0xfc2f56(0x1c6),console[_0xfc2f56(0x1b6)](_0xfc2f56(0x1de));}async[a61_0x3aa1ba(0x1b8)](_0x49fc22){const _0x1e9196=a61_0x3aa1ba,{paymentId:_0x914573,orderId:_0xcb560b,orderName:_0x32bbb0,amount:_0x15a182,currency:_0x5321f1,usage:_0xa4106c,maxPayments:_0xb6eccc,successUrl:_0x85e9ec,failUrl:_0x2b0bdf}=_0x49fc22,_0x4c8a7d=_0x5321f1[_0x1e9196(0x1e5)]();console[_0x1e9196(0x1b6)]('üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20'+_0xcb560b),console[_0x1e9196(0x1b6)](_0x1e9196(0x1bc)+_0x15a182+'\x20'+_0x4c8a7d);try{const _0x13d183=this[_0x1e9196(0x1ca)]+_0x1e9196(0x1da)+_0x914573+_0x1e9196(0x1b0)+_0x15a182+'&currency='+_0x4c8a7d+_0x1e9196(0x1b4)+_0xcb560b;return console[_0x1e9196(0x1b6)](_0x1e9196(0x1d6)),console[_0x1e9196(0x1b6)](_0x1e9196(0x1cb),_0x914573),console[_0x1e9196(0x1b6)]('Payment\x20URL:',_0x13d183),console[_0x1e9196(0x1b6)](_0x1e9196(0x1bd),_0x15a182,_0x4c8a7d),loggerService_1[_0x1e9196(0x1e3)][_0x1e9196(0x1dd)](_0x1e9196(0x1d8),_0x1e9196(0x1c7),_0x1e9196(0x1c4),{'paymentId':_0x914573,'amount':_0x15a182,'currency':_0x4c8a7d,'orderId':_0xcb560b}),{'gateway_payment_id':_0x914573,'payment_url':_0x13d183};}catch(_0x72eee2){console[_0x1e9196(0x1b3)](_0x1e9196(0x1d2)),console[_0x1e9196(0x1b3)](_0x1e9196(0x1b1),_0x72eee2),loggerService_1['loggerService'][_0x1e9196(0x1c0)]('amer',_0x1e9196(0x1c7),_0x72eee2);if(_0x72eee2 instanceof Error){console[_0x1e9196(0x1b3)]('Error\x20message:',_0x72eee2['message']),console['error']('Error\x20stack:',_0x72eee2[_0x1e9196(0x1d7)]);throw new Error(_0x1e9196(0x1c1)+_0x72eee2[_0x1e9196(0x1be)]);}throw new Error(_0x1e9196(0x1d0));}}async['verifyPayment'](_0x4d45bb){const _0x1472e1=a61_0x3aa1ba;console['log'](_0x1472e1(0x1d1)+_0x4d45bb);try{return loggerService_1[_0x1472e1(0x1e3)][_0x1472e1(0x1dd)](_0x1472e1(0x1d8),'/payment/verify/'+_0x4d45bb,_0x1472e1(0x1c4),{}),{'status':_0x1472e1(0x1b2)};}catch(_0x380b5c){console[_0x1472e1(0x1b3)](_0x1472e1(0x1c8),_0x380b5c),loggerService_1[_0x1472e1(0x1e3)][_0x1472e1(0x1c0)](_0x1472e1(0x1d8),_0x1472e1(0x1d9)+_0x4d45bb,_0x380b5c);throw new Error(_0x1472e1(0x1b9)+(_0x380b5c instanceof Error?_0x380b5c[_0x1472e1(0x1be)]:_0x1472e1(0x1c3)));}}async[a61_0x3aa1ba(0x1df)](_0xb6deaf){const _0x4284ac=a61_0x3aa1ba;console[_0x4284ac(0x1b6)](_0x4284ac(0x1c5),_0xb6deaf);let _0x2de622=_0x4284ac(0x1b2);if(_0xb6deaf[_0x4284ac(0x1e1)]===!![])_0x2de622='PAID';else _0xb6deaf[_0x4284ac(0x1e1)]===![]&&(_0x2de622=_0x4284ac(0x1cd));const _0x1452b0={};return _0xb6deaf[_0x4284ac(0x1c2)]&&(_0x1452b0[_0x4284ac(0x1c2)]=_0xb6deaf['cardLast4']),_0xb6deaf['paymentMethod']&&(_0x1452b0[_0x4284ac(0x1d4)]=_0xb6deaf[_0x4284ac(0x1d4)]),_0xb6deaf[_0x4284ac(0x1b5)]&&(_0x1452b0[_0x4284ac(0x1b5)]=_0xb6deaf[_0x4284ac(0x1b5)],_0x1452b0['gatewayPaymentId']=_0xb6deaf[_0x4284ac(0x1b5)]),console[_0x4284ac(0x1b6)](_0x4284ac(0x1cc)+_0x2de622),{'paymentId':_0xb6deaf[_0x4284ac(0x1ce)]||_0xb6deaf['orderId']||'','status':_0x2de622,'amount':_0xb6deaf['amount'],'currency':_0xb6deaf['currency'],'additionalInfo':_0x1452b0};}}exports['AmerService']=AmerService;