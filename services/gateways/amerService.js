'use strict';const a41_0x33bc41=a41_0x3a1a;(function(_0x102b29,_0x5a8360){const _0x11f33e=a41_0x3a1a,_0x200ed0=_0x102b29();while(!![]){try{const _0x90818f=-parseInt(_0x11f33e(0x1cf))/0x1+parseInt(_0x11f33e(0x1b6))/0x2+parseInt(_0x11f33e(0x1d8))/0x3*(parseInt(_0x11f33e(0x1c0))/0x4)+parseInt(_0x11f33e(0x1be))/0x5*(-parseInt(_0x11f33e(0x1ab))/0x6)+parseInt(_0x11f33e(0x1c2))/0x7*(parseInt(_0x11f33e(0x1b3))/0x8)+parseInt(_0x11f33e(0x1c9))/0x9*(parseInt(_0x11f33e(0x1d9))/0xa)+-parseInt(_0x11f33e(0x1b7))/0xb;if(_0x90818f===_0x5a8360)break;else _0x200ed0['push'](_0x200ed0['shift']());}catch(_0x5ca1dc){_0x200ed0['push'](_0x200ed0['shift']());}}}(a41_0x5e4d,0xae9e9));function a41_0x3a1a(_0x409a27,_0x44f190){const _0x5e4d2f=a41_0x5e4d();return a41_0x3a1a=function(_0x3a1ac2,_0x496500){_0x3a1ac2=_0x3a1ac2-0x1a8;let _0x593098=_0x5e4d2f[_0x3a1ac2];return _0x593098;},a41_0x3a1a(_0x409a27,_0x44f190);}function a41_0x5e4d(){const _0x42ae0f=['/payment','3207Fmnzhh','10UrIIDX','amer','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error','currency','FAILED','254958XJbpEv','&currency=','defineProperty','&amount=','üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20','transactionId','Unknown\x20error','üîÑ\x20Amer\x20webhook\x20processed:\x20status=','21992oUoUXI','apiUrl','verifyPayment','1656884xnKMLx','29914104HFpKsc','error','logWhiteDomainRequest','===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20===','Error\x20message:','message','gatewayPaymentId','30WCtdGD','GET','908vZpBLG','PENDING','3535ITdztt','üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain','&order=','/payment/verify/','paymentMethod','loggerService','Payment\x20URL:','11310129kQhGqN','Error\x20stack:','logWhiteDomainError','Amer\x20payment\x20verification\x20error:','Failed\x20to\x20verify\x20Amer\x20payment:\x20','üîç\x20Verifying\x20Amer\x20payment:\x20','26368KkLUfB','?id=','toUpperCase','log','Amount:','processWebhook','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20','üí∞\x20Amount:\x20'];a41_0x5e4d=function(){return _0x42ae0f;};return a41_0x5e4d();}Object[a41_0x33bc41(0x1ad)](exports,'__esModule',{'value':!![]}),exports['AmerService']=void 0x0;const loggerService_1=require('../loggerService');class AmerService{constructor(){const _0xfd1342=a41_0x33bc41;this[_0xfd1342(0x1b4)]='https://api2.trapay.uk/payment/',console[_0xfd1342(0x1d2)](_0xfd1342(0x1c3));}async['createPaymentLink'](_0x42cb65){const _0x1f615f=a41_0x33bc41,{paymentId:_0x23d899,orderId:_0x11abdf,orderName:_0x2a6040,amount:_0x5a7f5f,currency:_0x35d4a8,usage:_0xa0dbd1,maxPayments:_0x301a5c,successUrl:_0x14ee81,failUrl:_0x312b6c}=_0x42cb65,_0x228989=_0x35d4a8[_0x1f615f(0x1d1)]();console['log'](_0x1f615f(0x1af)+_0x11abdf),console[_0x1f615f(0x1d2)](_0x1f615f(0x1d6)+_0x5a7f5f+'\x20'+_0x228989);try{const _0x37eb3e=this[_0x1f615f(0x1b4)]+_0x1f615f(0x1d0)+_0x23d899+_0x1f615f(0x1ae)+_0x5a7f5f+_0x1f615f(0x1ac)+_0x228989+_0x1f615f(0x1c4)+_0x11abdf;return console['log'](_0x1f615f(0x1ba)),console['log']('Payment\x20ID:',_0x23d899),console[_0x1f615f(0x1d2)](_0x1f615f(0x1c8),_0x37eb3e),console[_0x1f615f(0x1d2)](_0x1f615f(0x1d3),_0x5a7f5f,_0x228989),loggerService_1['loggerService'][_0x1f615f(0x1b9)](_0x1f615f(0x1da),_0x1f615f(0x1d7),_0x1f615f(0x1bf),{'paymentId':_0x23d899,'amount':_0x5a7f5f,'currency':_0x228989,'orderId':_0x11abdf}),{'gateway_payment_id':_0x23d899,'payment_url':_0x37eb3e};}catch(_0x323905){console['error']('===\x20AMER\x20SERVICE\x20ERROR\x20==='),console[_0x1f615f(0x1b8)]('Error\x20details:',_0x323905),loggerService_1[_0x1f615f(0x1c7)][_0x1f615f(0x1cb)](_0x1f615f(0x1da),_0x1f615f(0x1d7),_0x323905);if(_0x323905 instanceof Error){console[_0x1f615f(0x1b8)](_0x1f615f(0x1bb),_0x323905['message']),console[_0x1f615f(0x1b8)](_0x1f615f(0x1ca),_0x323905['stack']);throw new Error(_0x1f615f(0x1d5)+_0x323905['message']);}throw new Error(_0x1f615f(0x1a8));}}async[a41_0x33bc41(0x1b5)](_0x1d7d86){const _0x269185=a41_0x33bc41;console[_0x269185(0x1d2)](_0x269185(0x1ce)+_0x1d7d86);try{return loggerService_1[_0x269185(0x1c7)][_0x269185(0x1b9)](_0x269185(0x1da),_0x269185(0x1c5)+_0x1d7d86,'GET',{}),{'status':_0x269185(0x1c1)};}catch(_0x97f5c8){console[_0x269185(0x1b8)](_0x269185(0x1cc),_0x97f5c8),loggerService_1[_0x269185(0x1c7)]['logWhiteDomainError']('amer',_0x269185(0x1c5)+_0x1d7d86,_0x97f5c8);throw new Error(_0x269185(0x1cd)+(_0x97f5c8 instanceof Error?_0x97f5c8[_0x269185(0x1bc)]:_0x269185(0x1b1)));}}async[a41_0x33bc41(0x1d4)](_0x5856c1){const _0x268eff=a41_0x33bc41;console[_0x268eff(0x1d2)]('Processing\x20Amer\x20webhook:',_0x5856c1);let _0x2dd6f2=_0x268eff(0x1c1);if(_0x5856c1['success']===!![])_0x2dd6f2='PAID';else _0x5856c1['success']===![]&&(_0x2dd6f2=_0x268eff(0x1aa));const _0xcbf58d={};return _0x5856c1['cardLast4']&&(_0xcbf58d['cardLast4']=_0x5856c1['cardLast4']),_0x5856c1[_0x268eff(0x1c6)]&&(_0xcbf58d[_0x268eff(0x1c6)]=_0x5856c1['paymentMethod']),_0x5856c1[_0x268eff(0x1b0)]&&(_0xcbf58d[_0x268eff(0x1b0)]=_0x5856c1[_0x268eff(0x1b0)],_0xcbf58d[_0x268eff(0x1bd)]=_0x5856c1['transactionId']),console[_0x268eff(0x1d2)](_0x268eff(0x1b2)+_0x2dd6f2),{'paymentId':_0x5856c1['paymentId']||_0x5856c1['orderId']||'','status':_0x2dd6f2,'amount':_0x5856c1['amount'],'currency':_0x5856c1[_0x268eff(0x1a9)],'additionalInfo':_0xcbf58d};}}exports['AmerService']=AmerService;