'use strict';const a43_0x42c621=a43_0x4c5a;(function(_0x5dc45f,_0x318e0b){const _0x4baca0=a43_0x4c5a,_0x163d48=_0x5dc45f();while(!![]){try{const _0x33a837=parseInt(_0x4baca0(0x1bd))/0x1*(parseInt(_0x4baca0(0x1dc))/0x2)+-parseInt(_0x4baca0(0x1c8))/0x3*(parseInt(_0x4baca0(0x1cd))/0x4)+-parseInt(_0x4baca0(0x1d5))/0x5*(-parseInt(_0x4baca0(0x1d9))/0x6)+parseInt(_0x4baca0(0x1cf))/0x7+-parseInt(_0x4baca0(0x1d8))/0x8*(-parseInt(_0x4baca0(0x1bb))/0x9)+-parseInt(_0x4baca0(0x1da))/0xa*(parseInt(_0x4baca0(0x1d7))/0xb)+-parseInt(_0x4baca0(0x1d6))/0xc;if(_0x33a837===_0x318e0b)break;else _0x163d48['push'](_0x163d48['shift']());}catch(_0x3ebec2){_0x163d48['push'](_0x163d48['shift']());}}}(a43_0x3388,0xaf25a));function a43_0x4c5a(_0x51cf3d,_0x12c28b){const _0x33880c=a43_0x3388();return a43_0x4c5a=function(_0x4c5aa7,_0x4af67c){_0x4c5aa7=_0x4c5aa7-0x1b2;let _0x1df928=_0x33880c[_0x4c5aa7];return _0x1df928;},a43_0x4c5a(_0x51cf3d,_0x12c28b);}function a43_0x3388(){const _0x2ad77d=['Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20','/payment','/payment.php?payment_id=','Payment\x20URL:','PENDING','message','apiUrl','Unknown\x20error','error','===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20===','AmerService','loggerService','logWhiteDomainError','Processing\x20Amer\x20webhook:','Error\x20message:','2655SqJImz','FAILED','130777xRcMGu','/payment/verify/','Amount:','amount','Payment\x20ID:','üîç\x20Verifying\x20Amer\x20payment:\x20','üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20','orderId','transactionId','cardLast4','stack','9897AUZcRR','Failed\x20to\x20verify\x20Amer\x20payment:\x20','amer','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error','GET','188eouwBd','logWhiteDomainRequest','9637607amQDHI','../loggerService','currency','&currency=','Error\x20stack:','Amer\x20payment\x20verification\x20error:','105KHcEGN','12438924CwGGkZ','9802507GEbZXV','30824xLZFMb','7194ZFKYca','10YcuHlv','üîÑ\x20Amer\x20webhook\x20processed:\x20status=','4XfRwMo','__esModule','defineProperty','log','paymentMethod'];a43_0x3388=function(){return _0x2ad77d;};return a43_0x3388();}Object[a43_0x42c621(0x1de)](exports,a43_0x42c621(0x1dd),{'value':!![]}),exports[a43_0x42c621(0x1b6)]=void 0x0;const loggerService_1=require(a43_0x42c621(0x1d0));class AmerService{constructor(){const _0x4d7214=a43_0x42c621;this['apiUrl']='https://api2.trapay.uk',console[_0x4d7214(0x1df)]('üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain');}async['createPaymentLink'](_0x537012){const _0x587d11=a43_0x42c621,{paymentId:_0xd3b4f3,orderId:_0x50ff9c,orderName:_0x5b7177,amount:_0x3a8f9d,currency:_0x1967a9,usage:_0x3677b2,maxPayments:_0x570543,successUrl:_0x1405e7,failUrl:_0x128b83}=_0x537012,_0x106627=_0x1967a9['toUpperCase']();console[_0x587d11(0x1df)](_0x587d11(0x1c3)+_0x50ff9c),console[_0x587d11(0x1df)]('üí∞\x20Amount:\x20'+_0x3a8f9d+'\x20'+_0x106627);try{const _0x2e06f4=this[_0x587d11(0x1b2)]+_0x587d11(0x1e3)+_0xd3b4f3+'&amount='+_0x3a8f9d+_0x587d11(0x1d2)+_0x106627+'&order='+_0x50ff9c;return console[_0x587d11(0x1df)](_0x587d11(0x1b5)),console[_0x587d11(0x1df)](_0x587d11(0x1c1),_0xd3b4f3),console[_0x587d11(0x1df)](_0x587d11(0x1e4),_0x2e06f4),console[_0x587d11(0x1df)](_0x587d11(0x1bf),_0x3a8f9d,_0x106627),loggerService_1['loggerService'][_0x587d11(0x1ce)](_0x587d11(0x1ca),_0x587d11(0x1e2),_0x587d11(0x1cc),{'paymentId':_0xd3b4f3,'amount':_0x3a8f9d,'currency':_0x106627,'orderId':_0x50ff9c}),{'gateway_payment_id':_0xd3b4f3,'payment_url':_0x2e06f4};}catch(_0x34ec61){console[_0x587d11(0x1b4)]('===\x20AMER\x20SERVICE\x20ERROR\x20==='),console[_0x587d11(0x1b4)]('Error\x20details:',_0x34ec61),loggerService_1[_0x587d11(0x1b7)][_0x587d11(0x1b8)](_0x587d11(0x1ca),_0x587d11(0x1e2),_0x34ec61);if(_0x34ec61 instanceof Error){console[_0x587d11(0x1b4)](_0x587d11(0x1ba),_0x34ec61[_0x587d11(0x1e6)]),console['error'](_0x587d11(0x1d3),_0x34ec61[_0x587d11(0x1c7)]);throw new Error(_0x587d11(0x1e1)+_0x34ec61[_0x587d11(0x1e6)]);}throw new Error(_0x587d11(0x1cb));}}async['verifyPayment'](_0x1b5190){const _0x3732d9=a43_0x42c621;console[_0x3732d9(0x1df)](_0x3732d9(0x1c2)+_0x1b5190);try{return loggerService_1[_0x3732d9(0x1b7)][_0x3732d9(0x1ce)](_0x3732d9(0x1ca),_0x3732d9(0x1be)+_0x1b5190,'GET',{}),{'status':_0x3732d9(0x1e5)};}catch(_0x488c46){console['error'](_0x3732d9(0x1d4),_0x488c46),loggerService_1[_0x3732d9(0x1b7)]['logWhiteDomainError'](_0x3732d9(0x1ca),_0x3732d9(0x1be)+_0x1b5190,_0x488c46);throw new Error(_0x3732d9(0x1c9)+(_0x488c46 instanceof Error?_0x488c46[_0x3732d9(0x1e6)]:_0x3732d9(0x1b3)));}}async['processWebhook'](_0x51e3af){const _0x23f58a=a43_0x42c621;console['log'](_0x23f58a(0x1b9),_0x51e3af);let _0x16fc1a='PENDING';if(_0x51e3af['success']===!![])_0x16fc1a='PAID';else _0x51e3af['success']===![]&&(_0x16fc1a=_0x23f58a(0x1bc));const _0x1c6ddf={};return _0x51e3af['cardLast4']&&(_0x1c6ddf[_0x23f58a(0x1c6)]=_0x51e3af['cardLast4']),_0x51e3af[_0x23f58a(0x1e0)]&&(_0x1c6ddf[_0x23f58a(0x1e0)]=_0x51e3af['paymentMethod']),_0x51e3af[_0x23f58a(0x1c5)]&&(_0x1c6ddf[_0x23f58a(0x1c5)]=_0x51e3af['transactionId'],_0x1c6ddf['gatewayPaymentId']=_0x51e3af[_0x23f58a(0x1c5)]),console['log'](_0x23f58a(0x1db)+_0x16fc1a),{'paymentId':_0x51e3af['paymentId']||_0x51e3af[_0x23f58a(0x1c4)]||'','status':_0x16fc1a,'amount':_0x51e3af[_0x23f58a(0x1c0)],'currency':_0x51e3af[_0x23f58a(0x1d1)],'additionalInfo':_0x1c6ddf};}}exports[a43_0x42c621(0x1b6)]=AmerService;