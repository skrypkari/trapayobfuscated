'use strict';const a51_0x570340=a51_0x4316;function a51_0x5b43(){const _0xe1fa44=['üí∞\x20Amount:\x20','message','107298FuWrfV','createPaymentLink','50ExnIPZ','../loggerService','paymentId','294767abbYxJ','Unknown\x20error','2091848atgtEE','defineProperty','error','GET','üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20','Failed\x20to\x20verify\x20Amer\x20payment:\x20','stack','cardLast4','Error\x20details:','__esModule','548977DQFzDu','üîç\x20Verifying\x20Amer\x20payment:\x20','PENDING','AmerService','22cfQvjR','31030lPVJwT','84izPwDE','orderId','&currency=','gatewayPaymentId','apiUrl','amer','1212736rNmpNa','&amount=','/payment','/payment.php?payment_id=','logWhiteDomainRequest','paymentMethod','Error\x20message:','loggerService','logWhiteDomainError','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20','transactionId','Amount:','111066RpNfYN','Payment\x20URL:','üîÑ\x20Amer\x20webhook\x20processed:\x20status=','/payment/verify/','927iFgMbL','7HwMQii','currency','success','Payment\x20ID:','Processing\x20Amer\x20webhook:','log','===\x20AMER\x20SERVICE\x20ERROR\x20===','===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20==='];a51_0x5b43=function(){return _0xe1fa44;};return a51_0x5b43();}(function(_0x300acc,_0x7e1f86){const _0x12f059=a51_0x4316,_0x247ede=_0x300acc();while(!![]){try{const _0x53ac10=-parseInt(_0x12f059(0x17c))/0x1+parseInt(_0x12f059(0x148))/0x2*(parseInt(_0x12f059(0x16b))/0x3)+parseInt(_0x12f059(0x150))/0x4+parseInt(_0x12f059(0x16d))/0x5*(-parseInt(_0x12f059(0x15c))/0x6)+parseInt(_0x12f059(0x161))/0x7*(parseInt(_0x12f059(0x172))/0x8)+parseInt(_0x12f059(0x160))/0x9*(parseInt(_0x12f059(0x149))/0xa)+-parseInt(_0x12f059(0x170))/0xb*(parseInt(_0x12f059(0x14a))/0xc);if(_0x53ac10===_0x7e1f86)break;else _0x247ede['push'](_0x247ede['shift']());}catch(_0x31d327){_0x247ede['push'](_0x247ede['shift']());}}}(a51_0x5b43,0x56ec2));Object[a51_0x570340(0x173)](exports,a51_0x570340(0x17b),{'value':!![]}),exports[a51_0x570340(0x147)]=void 0x0;function a51_0x4316(_0x28e07c,_0x43b56a){_0x28e07c=_0x28e07c-0x145;const _0x5b4375=a51_0x5b43();let _0x431658=_0x5b4375[_0x28e07c];return _0x431658;}const loggerService_1=require(a51_0x570340(0x16e));class AmerService{constructor(){const _0x1c4c4c=a51_0x570340;this[_0x1c4c4c(0x14e)]='https://api2.trapay.uk',console[_0x1c4c4c(0x166)]('üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain');}async[a51_0x570340(0x16c)](_0x2703bc){const _0x54b635=a51_0x570340,{paymentId:_0x3d9355,orderId:_0x18e758,orderName:_0x229e22,amount:_0x184fbc,currency:_0x13f631,usage:_0x553253,maxPayments:_0xe6080c,successUrl:_0x258a8b,failUrl:_0x2a0c85}=_0x2703bc,_0x24802d=_0x13f631['toUpperCase']();console[_0x54b635(0x166)](_0x54b635(0x176)+_0x18e758),console[_0x54b635(0x166)](_0x54b635(0x169)+_0x184fbc+'\x20'+_0x24802d);try{const _0x46a1b1=this[_0x54b635(0x14e)]+_0x54b635(0x153)+_0x3d9355+_0x54b635(0x151)+_0x184fbc+_0x54b635(0x14c)+_0x24802d+'&order='+_0x18e758;return console['log'](_0x54b635(0x168)),console['log'](_0x54b635(0x164),_0x3d9355),console['log'](_0x54b635(0x15d),_0x46a1b1),console['log'](_0x54b635(0x15b),_0x184fbc,_0x24802d),loggerService_1['loggerService']['logWhiteDomainRequest']('amer',_0x54b635(0x152),'GET',{'paymentId':_0x3d9355,'amount':_0x184fbc,'currency':_0x24802d,'orderId':_0x18e758}),{'gateway_payment_id':_0x3d9355,'payment_url':_0x46a1b1};}catch(_0x4b3e8d){console['error'](_0x54b635(0x167)),console[_0x54b635(0x174)](_0x54b635(0x17a),_0x4b3e8d),loggerService_1['loggerService'][_0x54b635(0x158)](_0x54b635(0x14f),'/payment',_0x4b3e8d);if(_0x4b3e8d instanceof Error){console[_0x54b635(0x174)](_0x54b635(0x156),_0x4b3e8d[_0x54b635(0x16a)]),console[_0x54b635(0x174)]('Error\x20stack:',_0x4b3e8d[_0x54b635(0x178)]);throw new Error(_0x54b635(0x159)+_0x4b3e8d[_0x54b635(0x16a)]);}throw new Error('Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error');}}async['verifyPayment'](_0x75acd2){const _0x1b29e5=a51_0x570340;console['log'](_0x1b29e5(0x145)+_0x75acd2);try{return loggerService_1['loggerService'][_0x1b29e5(0x154)](_0x1b29e5(0x14f),_0x1b29e5(0x15f)+_0x75acd2,_0x1b29e5(0x175),{}),{'status':_0x1b29e5(0x146)};}catch(_0xb64d50){console[_0x1b29e5(0x174)]('Amer\x20payment\x20verification\x20error:',_0xb64d50),loggerService_1[_0x1b29e5(0x157)][_0x1b29e5(0x158)](_0x1b29e5(0x14f),'/payment/verify/'+_0x75acd2,_0xb64d50);throw new Error(_0x1b29e5(0x177)+(_0xb64d50 instanceof Error?_0xb64d50['message']:_0x1b29e5(0x171)));}}async['processWebhook'](_0x3efb8a){const _0x2f2c3b=a51_0x570340;console[_0x2f2c3b(0x166)](_0x2f2c3b(0x165),_0x3efb8a);let _0x47de0b=_0x2f2c3b(0x146);if(_0x3efb8a[_0x2f2c3b(0x163)]===!![])_0x47de0b='PAID';else _0x3efb8a[_0x2f2c3b(0x163)]===![]&&(_0x47de0b='FAILED');const _0x4a5130={};return _0x3efb8a[_0x2f2c3b(0x179)]&&(_0x4a5130[_0x2f2c3b(0x179)]=_0x3efb8a[_0x2f2c3b(0x179)]),_0x3efb8a['paymentMethod']&&(_0x4a5130[_0x2f2c3b(0x155)]=_0x3efb8a[_0x2f2c3b(0x155)]),_0x3efb8a[_0x2f2c3b(0x15a)]&&(_0x4a5130[_0x2f2c3b(0x15a)]=_0x3efb8a[_0x2f2c3b(0x15a)],_0x4a5130[_0x2f2c3b(0x14d)]=_0x3efb8a['transactionId']),console[_0x2f2c3b(0x166)](_0x2f2c3b(0x15e)+_0x47de0b),{'paymentId':_0x3efb8a[_0x2f2c3b(0x16f)]||_0x3efb8a[_0x2f2c3b(0x14b)]||'','status':_0x47de0b,'amount':_0x3efb8a['amount'],'currency':_0x3efb8a[_0x2f2c3b(0x162)],'additionalInfo':_0x4a5130};}}exports[a51_0x570340(0x147)]=AmerService;