'use strict';const a53_0x211fc7=a53_0x12b7;(function(_0x2a09bc,_0x3dde6c){const _0x5eec5a=a53_0x12b7,_0x578062=_0x2a09bc();while(!![]){try{const _0x2bebd8=parseInt(_0x5eec5a(0x9c))/0x1*(parseInt(_0x5eec5a(0xb4))/0x2)+-parseInt(_0x5eec5a(0xab))/0x3*(parseInt(_0x5eec5a(0xa7))/0x4)+parseInt(_0x5eec5a(0xa6))/0x5+parseInt(_0x5eec5a(0x8a))/0x6+parseInt(_0x5eec5a(0xa8))/0x7+parseInt(_0x5eec5a(0xa5))/0x8+-parseInt(_0x5eec5a(0x81))/0x9;if(_0x2bebd8===_0x3dde6c)break;else _0x578062['push'](_0x578062['shift']());}catch(_0x5b65a4){_0x578062['push'](_0x578062['shift']());}}}(a53_0x1649,0x9ba25));Object[a53_0x211fc7(0x92)](exports,a53_0x211fc7(0x9d),{'value':!![]}),exports[a53_0x211fc7(0xa2)]=void 0x0;function a53_0x1649(){const _0x3bc5c7=['success','42MkVXye','error','&amount=','PENDING','paymentMethod','stack','log','16993647YIWKsp','===\x20AMER\x20SERVICE\x20ERROR\x20===','createPaymentLink','GET','/payment.php?payment_id=','verifyPayment','/payment/verify/','üîç\x20Verifying\x20Amer\x20payment:\x20','currency','2861550MmvVFP','message','logWhiteDomainRequest','Amer\x20payment\x20verification\x20error:','/payment','Unknown\x20error','amer','PAID','defineProperty','apiUrl','transactionId','processWebhook','Error\x20message:','Payment\x20ID:','cardLast4','Failed\x20to\x20verify\x20Amer\x20payment:\x20','üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20','37253jqufDC','__esModule','toUpperCase','üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain','paymentId','../loggerService','AmerService','üí∞\x20Amount:\x20','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error','9373376RIreRz','620080tJtqAW','268HbeiZt','6426329IQuwYS','Amount:','loggerService','42417rVrBIA','===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20===','Payment\x20URL:','Error\x20details:','üîÑ\x20Amer\x20webhook\x20processed:\x20status=','&currency=','&order=','logWhiteDomainError'];a53_0x1649=function(){return _0x3bc5c7;};return a53_0x1649();}function a53_0x12b7(_0x96bd53,_0x158f6f){_0x96bd53=_0x96bd53-0x7b;const _0x16492a=a53_0x1649();let _0x12b7b3=_0x16492a[_0x96bd53];return _0x12b7b3;}const loggerService_1=require(a53_0x211fc7(0xa1));class AmerService{constructor(){const _0x277df9=a53_0x211fc7;this[_0x277df9(0x93)]='https://api2.trapay.uk',console[_0x277df9(0x80)](_0x277df9(0x9f));}async[a53_0x211fc7(0x83)](_0x3df662){const _0x3b6566=a53_0x211fc7,{paymentId:_0x13baec,orderId:_0x443ca2,orderName:_0x4f60b9,amount:_0x4aec34,currency:_0x4bfc41,usage:_0x5efaf0,maxPayments:_0x4876a8,successUrl:_0x11f349,failUrl:_0x1c16f3}=_0x3df662,_0x418ce7=_0x4bfc41[_0x3b6566(0x9e)]();console['log'](_0x3b6566(0x9a)+_0x443ca2),console[_0x3b6566(0x80)](_0x3b6566(0xa3)+_0x4aec34+'\x20'+_0x418ce7);try{const _0xf9f44d=this[_0x3b6566(0x93)]+_0x3b6566(0x85)+_0x13baec+_0x3b6566(0x7c)+_0x4aec34+_0x3b6566(0xb0)+_0x418ce7+_0x3b6566(0xb1)+_0x443ca2;return console['log'](_0x3b6566(0xac)),console[_0x3b6566(0x80)](_0x3b6566(0x97),_0x13baec),console[_0x3b6566(0x80)](_0x3b6566(0xad),_0xf9f44d),console[_0x3b6566(0x80)](_0x3b6566(0xa9),_0x4aec34,_0x418ce7),loggerService_1[_0x3b6566(0xaa)][_0x3b6566(0x8c)]('amer','/payment','GET',{'paymentId':_0x13baec,'amount':_0x4aec34,'currency':_0x418ce7,'orderId':_0x443ca2}),{'gateway_payment_id':_0x13baec,'payment_url':_0xf9f44d};}catch(_0xc7c687){console['error'](_0x3b6566(0x82)),console['error'](_0x3b6566(0xae),_0xc7c687),loggerService_1[_0x3b6566(0xaa)][_0x3b6566(0xb2)]('amer',_0x3b6566(0x8e),_0xc7c687);if(_0xc7c687 instanceof Error){console['error'](_0x3b6566(0x96),_0xc7c687['message']),console[_0x3b6566(0x7b)]('Error\x20stack:',_0xc7c687[_0x3b6566(0x7f)]);throw new Error(_0x3b6566(0x9b)+_0xc7c687['message']);}throw new Error(_0x3b6566(0xa4));}}async[a53_0x211fc7(0x86)](_0x3347be){const _0x1c3993=a53_0x211fc7;console['log'](_0x1c3993(0x88)+_0x3347be);try{return loggerService_1[_0x1c3993(0xaa)][_0x1c3993(0x8c)](_0x1c3993(0x90),'/payment/verify/'+_0x3347be,_0x1c3993(0x84),{}),{'status':'PENDING'};}catch(_0x29b787){console[_0x1c3993(0x7b)](_0x1c3993(0x8d),_0x29b787),loggerService_1[_0x1c3993(0xaa)]['logWhiteDomainError'](_0x1c3993(0x90),_0x1c3993(0x87)+_0x3347be,_0x29b787);throw new Error(_0x1c3993(0x99)+(_0x29b787 instanceof Error?_0x29b787[_0x1c3993(0x8b)]:_0x1c3993(0x8f)));}}async[a53_0x211fc7(0x95)](_0x3e4f60){const _0x527a52=a53_0x211fc7;console[_0x527a52(0x80)]('Processing\x20Amer\x20webhook:',_0x3e4f60);let _0x335848=_0x527a52(0x7d);if(_0x3e4f60[_0x527a52(0xb3)]===!![])_0x335848=_0x527a52(0x91);else _0x3e4f60[_0x527a52(0xb3)]===![]&&(_0x335848='FAILED');const _0x4c1d79={};return _0x3e4f60[_0x527a52(0x98)]&&(_0x4c1d79[_0x527a52(0x98)]=_0x3e4f60['cardLast4']),_0x3e4f60[_0x527a52(0x7e)]&&(_0x4c1d79[_0x527a52(0x7e)]=_0x3e4f60[_0x527a52(0x7e)]),_0x3e4f60[_0x527a52(0x94)]&&(_0x4c1d79[_0x527a52(0x94)]=_0x3e4f60[_0x527a52(0x94)],_0x4c1d79['gatewayPaymentId']=_0x3e4f60[_0x527a52(0x94)]),console['log'](_0x527a52(0xaf)+_0x335848),{'paymentId':_0x3e4f60[_0x527a52(0xa0)]||_0x3e4f60['orderId']||'','status':_0x335848,'amount':_0x3e4f60['amount'],'currency':_0x3e4f60[_0x527a52(0x89)],'additionalInfo':_0x4c1d79};}}exports[a53_0x211fc7(0xa2)]=AmerService;