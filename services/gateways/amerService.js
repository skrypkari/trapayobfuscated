'use strict';const a51_0x4d712b=a51_0x47bb;(function(_0x4a34d0,_0x4d02bc){const _0x14427c=a51_0x47bb,_0x4218d2=_0x4a34d0();while(!![]){try{const _0x408cbf=parseInt(_0x14427c(0x165))/0x1+parseInt(_0x14427c(0x164))/0x2+-parseInt(_0x14427c(0x168))/0x3*(-parseInt(_0x14427c(0x16f))/0x4)+parseInt(_0x14427c(0x179))/0x5+-parseInt(_0x14427c(0x175))/0x6+-parseInt(_0x14427c(0x171))/0x7*(-parseInt(_0x14427c(0x177))/0x8)+-parseInt(_0x14427c(0x180))/0x9*(parseInt(_0x14427c(0x184))/0xa);if(_0x408cbf===_0x4d02bc)break;else _0x4218d2['push'](_0x4218d2['shift']());}catch(_0x48d4fe){_0x4218d2['push'](_0x4218d2['shift']());}}}(a51_0x8734,0x4c592));function a51_0x47bb(_0x26e40d,_0x5f398d){_0x26e40d=_0x26e40d-0x161;const _0x87347e=a51_0x8734();let _0x47bb87=_0x87347e[_0x26e40d];return _0x47bb87;}function a51_0x8734(){const _0x1d0b43=['Error\x20message:','PAID','cardLast4','toUpperCase','log','message','logWhiteDomainError','PENDING','Failed\x20to\x20verify\x20Amer\x20payment:\x20','orderId','Payment\x20URL:','709318KNYPCH','584940cUOjIH','/payment.php?payment_id=','transactionId','3SZXtsg','FAILED','amer','/payment/verify/','paymentMethod','Amount:','===\x20AMER\x20SERVICE\x20ERROR\x20===','748588rwSJEL','error','70mAvcWQ','&order=','verifyPayment','&currency=','1234692sMDrrq','GET','439448jYkZnR','apiUrl','329425VAAMCt','Error\x20details:','/payment','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error','__esModule','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20','gatewayPaymentId','9qQljlo','processWebhook','Amer\x20payment\x20verification\x20error:','üîç\x20Verifying\x20Amer\x20payment:\x20','12234370zgTzlE','loggerService','AmerService','Processing\x20Amer\x20webhook:','createPaymentLink','logWhiteDomainRequest'];a51_0x8734=function(){return _0x1d0b43;};return a51_0x8734();}Object['defineProperty'](exports,a51_0x4d712b(0x17d),{'value':!![]}),exports[a51_0x4d712b(0x186)]=void 0x0;const loggerService_1=require('../loggerService');class AmerService{constructor(){const _0x103179=a51_0x4d712b;this[_0x103179(0x178)]='https://api2.trapay.uk',console[_0x103179(0x18e)]('üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain');}async[a51_0x4d712b(0x188)](_0x15852d){const _0x3df0f0=a51_0x4d712b,{paymentId:_0x28fd30,orderId:_0x2d3e20,orderName:_0x24294f,amount:_0x1358ad,currency:_0x18c0bd,usage:_0x4b909a,maxPayments:_0x2c69db,successUrl:_0x40f073,failUrl:_0x5c8e0d}=_0x15852d,_0x1d3b69=_0x18c0bd[_0x3df0f0(0x18d)]();console[_0x3df0f0(0x18e)]('üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20'+_0x2d3e20),console[_0x3df0f0(0x18e)]('üí∞\x20Amount:\x20'+_0x1358ad+'\x20'+_0x1d3b69);try{const _0x57e370=this[_0x3df0f0(0x178)]+_0x3df0f0(0x166)+_0x28fd30+'&amount='+_0x1358ad+_0x3df0f0(0x174)+_0x1d3b69+_0x3df0f0(0x172)+_0x2d3e20;return console[_0x3df0f0(0x18e)]('===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20==='),console['log']('Payment\x20ID:',_0x28fd30),console[_0x3df0f0(0x18e)](_0x3df0f0(0x163),_0x57e370),console[_0x3df0f0(0x18e)](_0x3df0f0(0x16d),_0x1358ad,_0x1d3b69),loggerService_1[_0x3df0f0(0x185)][_0x3df0f0(0x189)](_0x3df0f0(0x16a),_0x3df0f0(0x17b),'GET',{'paymentId':_0x28fd30,'amount':_0x1358ad,'currency':_0x1d3b69,'orderId':_0x2d3e20}),{'gateway_payment_id':_0x28fd30,'payment_url':_0x57e370};}catch(_0x41c775){console[_0x3df0f0(0x170)](_0x3df0f0(0x16e)),console[_0x3df0f0(0x170)](_0x3df0f0(0x17a),_0x41c775),loggerService_1[_0x3df0f0(0x185)][_0x3df0f0(0x190)](_0x3df0f0(0x16a),'/payment',_0x41c775);if(_0x41c775 instanceof Error){console[_0x3df0f0(0x170)](_0x3df0f0(0x18a),_0x41c775[_0x3df0f0(0x18f)]),console['error']('Error\x20stack:',_0x41c775['stack']);throw new Error(_0x3df0f0(0x17e)+_0x41c775[_0x3df0f0(0x18f)]);}throw new Error(_0x3df0f0(0x17c));}}async[a51_0x4d712b(0x173)](_0x1840ab){const _0x25c470=a51_0x4d712b;console[_0x25c470(0x18e)](_0x25c470(0x183)+_0x1840ab);try{return loggerService_1['loggerService'][_0x25c470(0x189)]('amer','/payment/verify/'+_0x1840ab,_0x25c470(0x176),{}),{'status':_0x25c470(0x191)};}catch(_0x5962d8){console['error'](_0x25c470(0x182),_0x5962d8),loggerService_1['loggerService'][_0x25c470(0x190)]('amer',_0x25c470(0x16b)+_0x1840ab,_0x5962d8);throw new Error(_0x25c470(0x161)+(_0x5962d8 instanceof Error?_0x5962d8['message']:'Unknown\x20error'));}}async[a51_0x4d712b(0x181)](_0x3e5426){const _0x346c9c=a51_0x4d712b;console['log'](_0x346c9c(0x187),_0x3e5426);let _0x20fb39=_0x346c9c(0x191);if(_0x3e5426['success']===!![])_0x20fb39=_0x346c9c(0x18b);else _0x3e5426['success']===![]&&(_0x20fb39=_0x346c9c(0x169));const _0x4a985b={};return _0x3e5426[_0x346c9c(0x18c)]&&(_0x4a985b[_0x346c9c(0x18c)]=_0x3e5426[_0x346c9c(0x18c)]),_0x3e5426[_0x346c9c(0x16c)]&&(_0x4a985b['paymentMethod']=_0x3e5426[_0x346c9c(0x16c)]),_0x3e5426[_0x346c9c(0x167)]&&(_0x4a985b['transactionId']=_0x3e5426[_0x346c9c(0x167)],_0x4a985b[_0x346c9c(0x17f)]=_0x3e5426['transactionId']),console['log']('üîÑ\x20Amer\x20webhook\x20processed:\x20status='+_0x20fb39),{'paymentId':_0x3e5426['paymentId']||_0x3e5426[_0x346c9c(0x162)]||'','status':_0x20fb39,'amount':_0x3e5426['amount'],'currency':_0x3e5426['currency'],'additionalInfo':_0x4a985b};}}exports[a51_0x4d712b(0x186)]=AmerService;