'use strict';function a45_0x5c9f(){const _0x11eeb7=['apiUrl','8swVUfq','amount','defineProperty','amer','&order=','&currency=','742137pjpilC','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20','PENDING','log','157976dieRye','AmerService','Payment\x20URL:','&amount=','3vvxYxM','GET','orderId','Processing\x20Amer\x20webhook:','/payment.php?payment_id=','logWhiteDomainError','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error','https://api2.trapay.uk','üîç\x20Verifying\x20Amer\x20payment:\x20','success','loggerService','paymentMethod','FAILED','üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20','PAID','/payment','message','paymentId','===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20===','1439955HcvEmd','Error\x20stack:','logWhiteDomainRequest','399312HNgsYh','currency','error','Payment\x20ID:','createPaymentLink','verifyPayment','420408FdobpW','808713oybwOm','/payment/verify/','95926WxBBIG','gatewayPaymentId','cardLast4','transactionId'];a45_0x5c9f=function(){return _0x11eeb7;};return a45_0x5c9f();}function a45_0x1e40(_0x19ef5c,_0x1abff7){const _0x5c9f21=a45_0x5c9f();return a45_0x1e40=function(_0x1e4067,_0x49ff60){_0x1e4067=_0x1e4067-0x8a;let _0x45b072=_0x5c9f21[_0x1e4067];return _0x45b072;},a45_0x1e40(_0x19ef5c,_0x1abff7);}const a45_0x42c834=a45_0x1e40;(function(_0xef6eb9,_0x40d24e){const _0x22f85f=a45_0x1e40,_0x4a9149=_0xef6eb9();while(!![]){try{const _0x524db5=-parseInt(_0x22f85f(0x9b))/0x1*(-parseInt(_0x22f85f(0xba))/0x2)+-parseInt(_0x22f85f(0x93))/0x3+parseInt(_0x22f85f(0xb1))/0x4+parseInt(_0x22f85f(0xae))/0x5+-parseInt(_0x22f85f(0xb7))/0x6+parseInt(_0x22f85f(0x97))/0x7+parseInt(_0x22f85f(0x8d))/0x8*(-parseInt(_0x22f85f(0xb8))/0x9);if(_0x524db5===_0x40d24e)break;else _0x4a9149['push'](_0x4a9149['shift']());}catch(_0x6871ec){_0x4a9149['push'](_0x4a9149['shift']());}}}(a45_0x5c9f,0x23e1c));Object[a45_0x42c834(0x8f)](exports,'__esModule',{'value':!![]}),exports[a45_0x42c834(0x98)]=void 0x0;const loggerService_1=require('../loggerService');class AmerService{constructor(){const _0x19f0ad=a45_0x42c834;this[_0x19f0ad(0x8c)]=_0x19f0ad(0xa2),console[_0x19f0ad(0x96)]('üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain');}async[a45_0x42c834(0xb5)](_0x2df101){const _0x325291=a45_0x42c834,{paymentId:_0x277930,orderId:_0x30c6ee,orderName:_0x18dbe9,amount:_0x4c9972,currency:_0x4b13c3,usage:_0x46e338,maxPayments:_0xe7e5e1,successUrl:_0x34d8ea,failUrl:_0x366e49}=_0x2df101,_0xd6980a=_0x4b13c3['toUpperCase']();console[_0x325291(0x96)](_0x325291(0xa8)+_0x30c6ee),console[_0x325291(0x96)]('üí∞\x20Amount:\x20'+_0x4c9972+'\x20'+_0xd6980a);try{const _0x1dc35d=this['apiUrl']+_0x325291(0x9f)+_0x277930+_0x325291(0x9a)+_0x4c9972+_0x325291(0x92)+_0xd6980a+_0x325291(0x91)+_0x30c6ee;return console[_0x325291(0x96)](_0x325291(0xad)),console[_0x325291(0x96)](_0x325291(0xb4),_0x277930),console[_0x325291(0x96)](_0x325291(0x99),_0x1dc35d),console[_0x325291(0x96)]('Amount:',_0x4c9972,_0xd6980a),loggerService_1[_0x325291(0xa5)][_0x325291(0xb0)](_0x325291(0x90),_0x325291(0xaa),_0x325291(0x9c),{'paymentId':_0x277930,'amount':_0x4c9972,'currency':_0xd6980a,'orderId':_0x30c6ee}),{'gateway_payment_id':_0x277930,'payment_url':_0x1dc35d};}catch(_0x32ff1d){console[_0x325291(0xb3)]('===\x20AMER\x20SERVICE\x20ERROR\x20==='),console['error']('Error\x20details:',_0x32ff1d),loggerService_1[_0x325291(0xa5)][_0x325291(0xa0)](_0x325291(0x90),_0x325291(0xaa),_0x32ff1d);if(_0x32ff1d instanceof Error){console[_0x325291(0xb3)]('Error\x20message:',_0x32ff1d[_0x325291(0xab)]),console[_0x325291(0xb3)](_0x325291(0xaf),_0x32ff1d['stack']);throw new Error(_0x325291(0x94)+_0x32ff1d[_0x325291(0xab)]);}throw new Error(_0x325291(0xa1));}}async[a45_0x42c834(0xb6)](_0x588e1a){const _0x4928de=a45_0x42c834;console[_0x4928de(0x96)](_0x4928de(0xa3)+_0x588e1a);try{return loggerService_1['loggerService'][_0x4928de(0xb0)]('amer',_0x4928de(0xb9)+_0x588e1a,_0x4928de(0x9c),{}),{'status':_0x4928de(0x95)};}catch(_0x3e573e){console[_0x4928de(0xb3)]('Amer\x20payment\x20verification\x20error:',_0x3e573e),loggerService_1[_0x4928de(0xa5)][_0x4928de(0xa0)](_0x4928de(0x90),_0x4928de(0xb9)+_0x588e1a,_0x3e573e);throw new Error('Failed\x20to\x20verify\x20Amer\x20payment:\x20'+(_0x3e573e instanceof Error?_0x3e573e[_0x4928de(0xab)]:'Unknown\x20error'));}}async['processWebhook'](_0x57c386){const _0x374161=a45_0x42c834;console[_0x374161(0x96)](_0x374161(0x9e),_0x57c386);let _0x618f2f='PENDING';if(_0x57c386[_0x374161(0xa4)]===!![])_0x618f2f=_0x374161(0xa9);else _0x57c386['success']===![]&&(_0x618f2f=_0x374161(0xa7));const _0x38902c={};return _0x57c386['cardLast4']&&(_0x38902c[_0x374161(0x8a)]=_0x57c386[_0x374161(0x8a)]),_0x57c386[_0x374161(0xa6)]&&(_0x38902c[_0x374161(0xa6)]=_0x57c386[_0x374161(0xa6)]),_0x57c386['transactionId']&&(_0x38902c[_0x374161(0x8b)]=_0x57c386[_0x374161(0x8b)],_0x38902c[_0x374161(0xbb)]=_0x57c386[_0x374161(0x8b)]),console[_0x374161(0x96)]('üîÑ\x20Amer\x20webhook\x20processed:\x20status='+_0x618f2f),{'paymentId':_0x57c386[_0x374161(0xac)]||_0x57c386[_0x374161(0x9d)]||'','status':_0x618f2f,'amount':_0x57c386[_0x374161(0x8e)],'currency':_0x57c386[_0x374161(0xb2)],'additionalInfo':_0x38902c};}}exports['AmerService']=AmerService;