'use strict';const a41_0x484458=a41_0x34e4;(function(_0x6b00a8,_0x45e012){const _0x58c1c2=a41_0x34e4,_0x92b80=_0x6b00a8();while(!![]){try{const _0x2731a3=-parseInt(_0x58c1c2(0x1d1))/0x1*(parseInt(_0x58c1c2(0x1cd))/0x2)+parseInt(_0x58c1c2(0x1c9))/0x3+-parseInt(_0x58c1c2(0x1b6))/0x4+parseInt(_0x58c1c2(0x1bb))/0x5+parseInt(_0x58c1c2(0x1bf))/0x6*(parseInt(_0x58c1c2(0x1d2))/0x7)+-parseInt(_0x58c1c2(0x1b1))/0x8+-parseInt(_0x58c1c2(0x1c0))/0x9;if(_0x2731a3===_0x45e012)break;else _0x92b80['push'](_0x92b80['shift']());}catch(_0x219aa6){_0x92b80['push'](_0x92b80['shift']());}}}(a41_0x5772,0x3ed58));Object[a41_0x484458(0x1a9)](exports,a41_0x484458(0x1c1),{'value':!![]}),exports[a41_0x484458(0x1c6)]=void 0x0;function a41_0x34e4(_0x46aa55,_0xebcee6){const _0x5772e8=a41_0x5772();return a41_0x34e4=function(_0x34e499,_0x58e542){_0x34e499=_0x34e499-0x1a2;let _0x323694=_0x5772e8[_0x34e499];return _0x323694;},a41_0x34e4(_0x46aa55,_0xebcee6);}function a41_0x5772(){const _0x50a33e=['üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20','Payment\x20URL:','üîÑ\x20Amer\x20webhook\x20processed:\x20status=','1959370fochCR','Amer\x20payment\x20verification\x20error:','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20','84pKxWHN','1423908iTUuNW','__esModule','log','Error\x20message:','gatewayPaymentId','GET','AmerService','message','amount','1516620UUKwpc','===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20===','paymentId','cardLast4','14dMKGDc','logWhiteDomainRequest','error','loggerService','37247MtpWPR','244146fUbzdC','logWhiteDomainError','https://api2.trapay.uk','Payment\x20ID:','/payment','orderId','Processing\x20Amer\x20webhook:','currency','&amount=','Error\x20stack:','defineProperty','transactionId','üí∞\x20Amount:\x20','/payment/verify/','../loggerService','success','amer','PAID','3639192KdEnEO','FAILED','Failed\x20to\x20verify\x20Amer\x20payment:\x20','stack','/payment.php?payment_id=','1017992nImeWI','paymentMethod'];a41_0x5772=function(){return _0x50a33e;};return a41_0x5772();}const loggerService_1=require(a41_0x484458(0x1ad));class AmerService{constructor(){const _0x537ce7=a41_0x484458;this['apiUrl']=_0x537ce7(0x1d4),console[_0x537ce7(0x1c2)]('üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain');}async['createPaymentLink'](_0x1e7b7e){const _0x1fd7fc=a41_0x484458,{paymentId:_0x5c9c71,orderId:_0x3c29ac,orderName:_0x11177b,amount:_0x456691,currency:_0x2f200c,usage:_0x20b822,maxPayments:_0xb7e89d,successUrl:_0x118c89,failUrl:_0x353212}=_0x1e7b7e,_0xa8f88e=_0x2f200c['toUpperCase']();console[_0x1fd7fc(0x1c2)](_0x1fd7fc(0x1b8)+_0x3c29ac),console['log'](_0x1fd7fc(0x1ab)+_0x456691+'\x20'+_0xa8f88e);try{const _0x314e9c=this['apiUrl']+_0x1fd7fc(0x1b5)+_0x5c9c71+_0x1fd7fc(0x1a7)+_0x456691+'&currency='+_0xa8f88e+'&order='+_0x3c29ac;return console[_0x1fd7fc(0x1c2)](_0x1fd7fc(0x1ca)),console[_0x1fd7fc(0x1c2)](_0x1fd7fc(0x1a2),_0x5c9c71),console[_0x1fd7fc(0x1c2)](_0x1fd7fc(0x1b9),_0x314e9c),console[_0x1fd7fc(0x1c2)]('Amount:',_0x456691,_0xa8f88e),loggerService_1[_0x1fd7fc(0x1d0)][_0x1fd7fc(0x1ce)](_0x1fd7fc(0x1af),_0x1fd7fc(0x1a3),_0x1fd7fc(0x1c5),{'paymentId':_0x5c9c71,'amount':_0x456691,'currency':_0xa8f88e,'orderId':_0x3c29ac}),{'gateway_payment_id':_0x5c9c71,'payment_url':_0x314e9c};}catch(_0x2279fe){console[_0x1fd7fc(0x1cf)]('===\x20AMER\x20SERVICE\x20ERROR\x20==='),console['error']('Error\x20details:',_0x2279fe),loggerService_1[_0x1fd7fc(0x1d0)]['logWhiteDomainError'](_0x1fd7fc(0x1af),_0x1fd7fc(0x1a3),_0x2279fe);if(_0x2279fe instanceof Error){console[_0x1fd7fc(0x1cf)](_0x1fd7fc(0x1c3),_0x2279fe['message']),console['error'](_0x1fd7fc(0x1a8),_0x2279fe[_0x1fd7fc(0x1b4)]);throw new Error(_0x1fd7fc(0x1be)+_0x2279fe[_0x1fd7fc(0x1c7)]);}throw new Error(_0x1fd7fc(0x1bd));}}async['verifyPayment'](_0x21a45a){const _0x423d0e=a41_0x484458;console[_0x423d0e(0x1c2)]('üîç\x20Verifying\x20Amer\x20payment:\x20'+_0x21a45a);try{return loggerService_1[_0x423d0e(0x1d0)][_0x423d0e(0x1ce)](_0x423d0e(0x1af),_0x423d0e(0x1ac)+_0x21a45a,_0x423d0e(0x1c5),{}),{'status':'PENDING'};}catch(_0x5936b9){console[_0x423d0e(0x1cf)](_0x423d0e(0x1bc),_0x5936b9),loggerService_1[_0x423d0e(0x1d0)][_0x423d0e(0x1d3)](_0x423d0e(0x1af),_0x423d0e(0x1ac)+_0x21a45a,_0x5936b9);throw new Error(_0x423d0e(0x1b3)+(_0x5936b9 instanceof Error?_0x5936b9[_0x423d0e(0x1c7)]:'Unknown\x20error'));}}async['processWebhook'](_0x332210){const _0x103680=a41_0x484458;console[_0x103680(0x1c2)](_0x103680(0x1a5),_0x332210);let _0x53bfcd='PENDING';if(_0x332210[_0x103680(0x1ae)]===!![])_0x53bfcd=_0x103680(0x1b0);else _0x332210['success']===![]&&(_0x53bfcd=_0x103680(0x1b2));const _0x1c30ba={};return _0x332210[_0x103680(0x1cc)]&&(_0x1c30ba[_0x103680(0x1cc)]=_0x332210['cardLast4']),_0x332210[_0x103680(0x1b7)]&&(_0x1c30ba[_0x103680(0x1b7)]=_0x332210[_0x103680(0x1b7)]),_0x332210['transactionId']&&(_0x1c30ba[_0x103680(0x1aa)]=_0x332210['transactionId'],_0x1c30ba[_0x103680(0x1c4)]=_0x332210[_0x103680(0x1aa)]),console[_0x103680(0x1c2)](_0x103680(0x1ba)+_0x53bfcd),{'paymentId':_0x332210[_0x103680(0x1cb)]||_0x332210[_0x103680(0x1a4)]||'','status':_0x53bfcd,'amount':_0x332210[_0x103680(0x1c8)],'currency':_0x332210[_0x103680(0x1a6)],'additionalInfo':_0x1c30ba};}}exports[a41_0x484458(0x1c6)]=AmerService;