'use strict';const a61_0x16e377=a61_0x37fe;(function(_0x11decd,_0x55d8e1){const _0x2e92f4=a61_0x37fe,_0x358ad6=_0x11decd();while(!![]){try{const _0x6d945d=parseInt(_0x2e92f4(0x15c))/0x1+parseInt(_0x2e92f4(0x160))/0x2+-parseInt(_0x2e92f4(0x150))/0x3*(-parseInt(_0x2e92f4(0x13c))/0x4)+parseInt(_0x2e92f4(0x12c))/0x5*(-parseInt(_0x2e92f4(0x15e))/0x6)+parseInt(_0x2e92f4(0x148))/0x7+-parseInt(_0x2e92f4(0x135))/0x8+-parseInt(_0x2e92f4(0x153))/0x9*(parseInt(_0x2e92f4(0x13e))/0xa);if(_0x6d945d===_0x55d8e1)break;else _0x358ad6['push'](_0x358ad6['shift']());}catch(_0x50f32d){_0x358ad6['push'](_0x358ad6['shift']());}}}(a61_0x3120,0x8d4fb));Object[a61_0x16e377(0x131)](exports,'__esModule',{'value':!![]}),exports[a61_0x16e377(0x140)]=void 0x0;const loggerService_1=require('../loggerService');class AmerService{constructor(){this['apiUrl']='https://api2.trapay.uk',console['log']('üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain');}async[a61_0x16e377(0x158)](_0x4163e5){const _0x4d6ffc=a61_0x16e377,{paymentId:_0x52e427,orderId:_0x53b826,orderName:_0x5bacde,amount:_0x20036a,currency:_0x59c128,usage:_0x539f42,maxPayments:_0xd52a76,successUrl:_0x405584,failUrl:_0x23ae47}=_0x4163e5,_0x208f4b=_0x59c128['toUpperCase']();console[_0x4d6ffc(0x139)](_0x4d6ffc(0x14c)+_0x53b826),console[_0x4d6ffc(0x139)](_0x4d6ffc(0x137)+_0x20036a+'\x20'+_0x208f4b);try{const _0x1b8065=this[_0x4d6ffc(0x154)]+_0x4d6ffc(0x13f)+_0x52e427+_0x4d6ffc(0x13d)+_0x20036a+'&currency='+_0x208f4b+_0x4d6ffc(0x15f)+_0x53b826;return console[_0x4d6ffc(0x139)](_0x4d6ffc(0x132)),console[_0x4d6ffc(0x139)](_0x4d6ffc(0x134),_0x52e427),console[_0x4d6ffc(0x139)](_0x4d6ffc(0x138),_0x1b8065),console[_0x4d6ffc(0x139)](_0x4d6ffc(0x151),_0x20036a,_0x208f4b),loggerService_1['loggerService']['logWhiteDomainRequest']('amer',_0x4d6ffc(0x14b),_0x4d6ffc(0x159),{'paymentId':_0x52e427,'amount':_0x20036a,'currency':_0x208f4b,'orderId':_0x53b826}),{'gateway_payment_id':_0x52e427,'payment_url':_0x1b8065};}catch(_0x31c949){console[_0x4d6ffc(0x14f)]('===\x20AMER\x20SERVICE\x20ERROR\x20==='),console['error'](_0x4d6ffc(0x147),_0x31c949),loggerService_1[_0x4d6ffc(0x15b)][_0x4d6ffc(0x149)](_0x4d6ffc(0x130),_0x4d6ffc(0x14b),_0x31c949);if(_0x31c949 instanceof Error){console[_0x4d6ffc(0x14f)](_0x4d6ffc(0x13a),_0x31c949['message']),console[_0x4d6ffc(0x14f)](_0x4d6ffc(0x142),_0x31c949[_0x4d6ffc(0x14d)]);throw new Error(_0x4d6ffc(0x146)+_0x31c949['message']);}throw new Error(_0x4d6ffc(0x143));}}async[a61_0x16e377(0x152)](_0xe3ad4d){const _0x5dd340=a61_0x16e377;console['log'](_0x5dd340(0x15a)+_0xe3ad4d);try{return loggerService_1[_0x5dd340(0x15b)][_0x5dd340(0x14e)]('amer',_0x5dd340(0x157)+_0xe3ad4d,_0x5dd340(0x159),{}),{'status':_0x5dd340(0x13b)};}catch(_0x52386d){console[_0x5dd340(0x14f)](_0x5dd340(0x14a),_0x52386d),loggerService_1[_0x5dd340(0x15b)]['logWhiteDomainError']('amer','/payment/verify/'+_0xe3ad4d,_0x52386d);throw new Error('Failed\x20to\x20verify\x20Amer\x20payment:\x20'+(_0x52386d instanceof Error?_0x52386d[_0x5dd340(0x161)]:'Unknown\x20error'));}}async[a61_0x16e377(0x156)](_0x36df4e){const _0x2a4f4f=a61_0x16e377;console['log'](_0x2a4f4f(0x136),_0x36df4e);let _0x4d3f31=_0x2a4f4f(0x13b);if(_0x36df4e[_0x2a4f4f(0x133)]===!![])_0x4d3f31='PAID';else _0x36df4e[_0x2a4f4f(0x133)]===![]&&(_0x4d3f31=_0x2a4f4f(0x12f));const _0x37485f={};return _0x36df4e[_0x2a4f4f(0x145)]&&(_0x37485f[_0x2a4f4f(0x145)]=_0x36df4e[_0x2a4f4f(0x145)]),_0x36df4e['paymentMethod']&&(_0x37485f[_0x2a4f4f(0x12d)]=_0x36df4e[_0x2a4f4f(0x12d)]),_0x36df4e['transactionId']&&(_0x37485f[_0x2a4f4f(0x141)]=_0x36df4e[_0x2a4f4f(0x141)],_0x37485f[_0x2a4f4f(0x155)]=_0x36df4e['transactionId']),console['log']('üîÑ\x20Amer\x20webhook\x20processed:\x20status='+_0x4d3f31),{'paymentId':_0x36df4e['paymentId']||_0x36df4e[_0x2a4f4f(0x144)]||'','status':_0x4d3f31,'amount':_0x36df4e[_0x2a4f4f(0x15d)],'currency':_0x36df4e[_0x2a4f4f(0x12e)],'additionalInfo':_0x37485f};}}function a61_0x3120(){const _0x1fadea=['&order=','641730uSOiCo','message','20NDVrru','paymentMethod','currency','FAILED','amer','defineProperty','===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20===','success','Payment\x20ID:','7809976dZfgtJ','Processing\x20Amer\x20webhook:','üí∞\x20Amount:\x20','Payment\x20URL:','log','Error\x20message:','PENDING','3365380jnkwbs','&amount=','260ikArym','/payment.php?payment_id=','AmerService','transactionId','Error\x20stack:','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error','orderId','cardLast4','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20','Error\x20details:','2798677fBosEy','logWhiteDomainError','Amer\x20payment\x20verification\x20error:','/payment','üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20','stack','logWhiteDomainRequest','error','3pGBQRg','Amount:','verifyPayment','186822JSavCJ','apiUrl','gatewayPaymentId','processWebhook','/payment/verify/','createPaymentLink','GET','üîç\x20Verifying\x20Amer\x20payment:\x20','loggerService','1061773aiOqkS','amount','793542cbzbIv'];a61_0x3120=function(){return _0x1fadea;};return a61_0x3120();}function a61_0x37fe(_0x2ea87c,_0x3f97bc){_0x2ea87c=_0x2ea87c-0x12c;const _0x3120d2=a61_0x3120();let _0x37feb8=_0x3120d2[_0x2ea87c];return _0x37feb8;}exports[a61_0x16e377(0x140)]=AmerService;