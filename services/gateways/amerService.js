'use strict';const a55_0x12bceb=a55_0x1720;function a55_0x1720(_0x224d27,_0x3d7c94){_0x224d27=_0x224d27-0x176;const _0x2f8e49=a55_0x2f8e();let _0x1720db=_0x2f8e49[_0x224d27];return _0x1720db;}function a55_0x2f8e(){const _0x59389a=['paymentMethod','amount','currency','670565lUkNEs','amer','===\x20AMER\x20SERVICE\x20ERROR\x20===','/payment/verify/','Unknown\x20error','paymentId','üîÑ\x20Amer\x20webhook\x20processed:\x20status=','üîç\x20Verifying\x20Amer\x20payment:\x20','loggerService','__esModule','gatewayPaymentId','Error\x20details:','cardLast4','success','327vwkpmn','AmerService','&order=','Payment\x20ID:','apiUrl','6403880IiIKAW','PAID','stack','/payment','verifyPayment','log','Processing\x20Amer\x20webhook:','2522IwyPdB','32080nXOGOV','===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20===','10XMcrAX','createPaymentLink','&currency=','PENDING','logWhiteDomainRequest','Failed\x20to\x20verify\x20Amer\x20payment:\x20','GET','/payment.php?payment_id=','üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20','24uxgBze','Amount:','transactionId','üí∞\x20Amount:\x20','675508ybKqCG','error','1335672WuOVlV','message','&amount=','FAILED','1314234KusSMt'];a55_0x2f8e=function(){return _0x59389a;};return a55_0x2f8e();}(function(_0x2dc06d,_0x257d3c){const _0x495b29=a55_0x1720,_0x1db2cc=_0x2dc06d();while(!![]){try{const _0x358e38=-parseInt(_0x495b29(0x17c))/0x1+parseInt(_0x495b29(0x196))/0x2*(-parseInt(_0x495b29(0x18a))/0x3)+parseInt(_0x495b29(0x1a7))/0x4+-parseInt(_0x495b29(0x197))/0x5*(parseInt(_0x495b29(0x1a3))/0x6)+parseInt(_0x495b29(0x18f))/0x7+parseInt(_0x495b29(0x1a9))/0x8+parseInt(_0x495b29(0x178))/0x9*(parseInt(_0x495b29(0x199))/0xa);if(_0x358e38===_0x257d3c)break;else _0x1db2cc['push'](_0x1db2cc['shift']());}catch(_0x42605f){_0x1db2cc['push'](_0x1db2cc['shift']());}}}(a55_0x2f8e,0x89750));Object['defineProperty'](exports,a55_0x12bceb(0x185),{'value':!![]}),exports[a55_0x12bceb(0x18b)]=void 0x0;const loggerService_1=require('../loggerService');class AmerService{constructor(){const _0x2fb71e=a55_0x12bceb;this[_0x2fb71e(0x18e)]='https://api2.trapay.uk',console['log']('üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain');}async[a55_0x12bceb(0x19a)](_0x47478f){const _0x902819=a55_0x12bceb,{paymentId:_0x255927,orderId:_0x1017b5,orderName:_0x18478f,amount:_0x3d3ec2,currency:_0x55d08c,usage:_0x39c977,maxPayments:_0x14b2b2,successUrl:_0x29a5dd,failUrl:_0x563921}=_0x47478f,_0x3fe9f1=_0x55d08c['toUpperCase']();console['log'](_0x902819(0x1a1)+_0x1017b5),console['log'](_0x902819(0x1a6)+_0x3d3ec2+'\x20'+_0x3fe9f1);try{const _0xf3f88e=this['apiUrl']+_0x902819(0x1a0)+_0x255927+_0x902819(0x176)+_0x3d3ec2+_0x902819(0x19b)+_0x3fe9f1+_0x902819(0x18c)+_0x1017b5;return console['log'](_0x902819(0x198)),console['log'](_0x902819(0x18d),_0x255927),console[_0x902819(0x194)]('Payment\x20URL:',_0xf3f88e),console['log'](_0x902819(0x1a4),_0x3d3ec2,_0x3fe9f1),loggerService_1['loggerService'][_0x902819(0x19d)](_0x902819(0x17d),_0x902819(0x192),_0x902819(0x19f),{'paymentId':_0x255927,'amount':_0x3d3ec2,'currency':_0x3fe9f1,'orderId':_0x1017b5}),{'gateway_payment_id':_0x255927,'payment_url':_0xf3f88e};}catch(_0x3567bc){console[_0x902819(0x1a8)](_0x902819(0x17e)),console[_0x902819(0x1a8)](_0x902819(0x187),_0x3567bc),loggerService_1[_0x902819(0x184)]['logWhiteDomainError'](_0x902819(0x17d),_0x902819(0x192),_0x3567bc);if(_0x3567bc instanceof Error){console[_0x902819(0x1a8)]('Error\x20message:',_0x3567bc[_0x902819(0x1aa)]),console['error']('Error\x20stack:',_0x3567bc[_0x902819(0x191)]);throw new Error(_0x902819(0x1a2)+_0x3567bc[_0x902819(0x1aa)]);}throw new Error('Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error');}}async[a55_0x12bceb(0x193)](_0x1d5ebd){const _0xef676a=a55_0x12bceb;console[_0xef676a(0x194)](_0xef676a(0x183)+_0x1d5ebd);try{return loggerService_1[_0xef676a(0x184)][_0xef676a(0x19d)](_0xef676a(0x17d),'/payment/verify/'+_0x1d5ebd,_0xef676a(0x19f),{}),{'status':'PENDING'};}catch(_0x8c2c39){console[_0xef676a(0x1a8)]('Amer\x20payment\x20verification\x20error:',_0x8c2c39),loggerService_1[_0xef676a(0x184)]['logWhiteDomainError']('amer',_0xef676a(0x17f)+_0x1d5ebd,_0x8c2c39);throw new Error(_0xef676a(0x19e)+(_0x8c2c39 instanceof Error?_0x8c2c39[_0xef676a(0x1aa)]:_0xef676a(0x180)));}}async['processWebhook'](_0x469f73){const _0x4ecec7=a55_0x12bceb;console[_0x4ecec7(0x194)](_0x4ecec7(0x195),_0x469f73);let _0x2f2d1c=_0x4ecec7(0x19c);if(_0x469f73[_0x4ecec7(0x189)]===!![])_0x2f2d1c=_0x4ecec7(0x190);else _0x469f73[_0x4ecec7(0x189)]===![]&&(_0x2f2d1c=_0x4ecec7(0x177));const _0xce997c={};return _0x469f73['cardLast4']&&(_0xce997c[_0x4ecec7(0x188)]=_0x469f73['cardLast4']),_0x469f73['paymentMethod']&&(_0xce997c[_0x4ecec7(0x179)]=_0x469f73['paymentMethod']),_0x469f73[_0x4ecec7(0x1a5)]&&(_0xce997c['transactionId']=_0x469f73['transactionId'],_0xce997c[_0x4ecec7(0x186)]=_0x469f73[_0x4ecec7(0x1a5)]),console[_0x4ecec7(0x194)](_0x4ecec7(0x182)+_0x2f2d1c),{'paymentId':_0x469f73[_0x4ecec7(0x181)]||_0x469f73['orderId']||'','status':_0x2f2d1c,'amount':_0x469f73[_0x4ecec7(0x17a)],'currency':_0x469f73[_0x4ecec7(0x17b)],'additionalInfo':_0xce997c};}}exports[a55_0x12bceb(0x18b)]=AmerService;