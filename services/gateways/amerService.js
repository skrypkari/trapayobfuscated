'use strict';const a61_0x111888=a61_0x5a3b;(function(_0x7a4077,_0x25bd58){const _0x4e01ae=a61_0x5a3b,_0x381093=_0x7a4077();while(!![]){try{const _0x5064f9=parseInt(_0x4e01ae(0x8d))/0x1*(parseInt(_0x4e01ae(0xae))/0x2)+-parseInt(_0x4e01ae(0x8e))/0x3*(-parseInt(_0x4e01ae(0x9e))/0x4)+parseInt(_0x4e01ae(0xb8))/0x5+-parseInt(_0x4e01ae(0xa2))/0x6+parseInt(_0x4e01ae(0xad))/0x7+-parseInt(_0x4e01ae(0x8a))/0x8*(parseInt(_0x4e01ae(0x9c))/0x9)+parseInt(_0x4e01ae(0x93))/0xa*(-parseInt(_0x4e01ae(0x8b))/0xb);if(_0x5064f9===_0x25bd58)break;else _0x381093['push'](_0x381093['shift']());}catch(_0x1c73d5){_0x381093['push'](_0x381093['shift']());}}}(a61_0x146b,0xae6cc));Object[a61_0x111888(0x89)](exports,'__esModule',{'value':!![]}),exports[a61_0x111888(0xb3)]=void 0x0;const loggerService_1=require(a61_0x111888(0xb7));function a61_0x5a3b(_0x2b601e,_0x4d2c1b){_0x2b601e=_0x2b601e-0x89;const _0x146b80=a61_0x146b();let _0x5a3bd8=_0x146b80[_0x2b601e];return _0x5a3bd8;}function a61_0x146b(){const _0x2ccdb2=['orderId','12740otrHQH','&order=','Payment\x20ID:','Failed\x20to\x20verify\x20Amer\x20payment:\x20','logWhiteDomainError','amer','/payment/verify/','üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain','paymentMethod','2550519DoXXrZ','paymentId','182828csWZWV','transactionId','logWhiteDomainRequest','üîç\x20Verifying\x20Amer\x20payment:\x20','8530038YEXcuw','üí∞\x20Amount:\x20','amount','Unknown\x20error','üîÑ\x20Amer\x20webhook\x20processed:\x20status=','message','FAILED','success','PAID','PENDING','log','8090292XMFecB','10JCSRwn','GET','&amount=','cardLast4','currency','AmerService','loggerService','error','Processing\x20Amer\x20webhook:','../loggerService','4444075bGkEEr','https://api2.trapay.uk','/payment','Error\x20message:','Amer\x20payment\x20verification\x20error:','defineProperty','8irOIzz','6523tSXuOj','verifyPayment','116387KaewPm','36eVlpvR','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20','apiUrl','/payment.php?payment_id='];a61_0x146b=function(){return _0x2ccdb2;};return a61_0x146b();}class AmerService{constructor(){const _0x1e54a1=a61_0x111888;this[_0x1e54a1(0x90)]=_0x1e54a1(0xb9),console[_0x1e54a1(0xac)](_0x1e54a1(0x9a));}async['createPaymentLink'](_0x1920b4){const _0x55aac7=a61_0x111888,{paymentId:_0x268854,orderId:_0x39caf8,orderName:_0x13f786,amount:_0x2879fd,currency:_0x2f3845,usage:_0x19d4af,maxPayments:_0x473f41,successUrl:_0xe934cb,failUrl:_0x55ee06}=_0x1920b4,_0x20ca20=_0x2f3845['toUpperCase']();console[_0x55aac7(0xac)]('üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20'+_0x39caf8),console[_0x55aac7(0xac)](_0x55aac7(0xa3)+_0x2879fd+'\x20'+_0x20ca20);try{const _0x23b7fb=this[_0x55aac7(0x90)]+_0x55aac7(0x91)+_0x268854+_0x55aac7(0xb0)+_0x2879fd+'&currency='+_0x20ca20+_0x55aac7(0x94)+_0x39caf8;return console[_0x55aac7(0xac)]('===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20==='),console[_0x55aac7(0xac)](_0x55aac7(0x95),_0x268854),console[_0x55aac7(0xac)]('Payment\x20URL:',_0x23b7fb),console[_0x55aac7(0xac)]('Amount:',_0x2879fd,_0x20ca20),loggerService_1[_0x55aac7(0xb4)][_0x55aac7(0xa0)](_0x55aac7(0x98),_0x55aac7(0xba),_0x55aac7(0xaf),{'paymentId':_0x268854,'amount':_0x2879fd,'currency':_0x20ca20,'orderId':_0x39caf8}),{'gateway_payment_id':_0x268854,'payment_url':_0x23b7fb};}catch(_0x167e6d){console[_0x55aac7(0xb5)]('===\x20AMER\x20SERVICE\x20ERROR\x20==='),console[_0x55aac7(0xb5)]('Error\x20details:',_0x167e6d),loggerService_1[_0x55aac7(0xb4)][_0x55aac7(0x97)](_0x55aac7(0x98),_0x55aac7(0xba),_0x167e6d);if(_0x167e6d instanceof Error){console[_0x55aac7(0xb5)](_0x55aac7(0xbb),_0x167e6d['message']),console[_0x55aac7(0xb5)]('Error\x20stack:',_0x167e6d['stack']);throw new Error(_0x55aac7(0x8f)+_0x167e6d[_0x55aac7(0xa7)]);}throw new Error('Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error');}}async[a61_0x111888(0x8c)](_0x4d1651){const _0x423cfd=a61_0x111888;console['log'](_0x423cfd(0xa1)+_0x4d1651);try{return loggerService_1[_0x423cfd(0xb4)][_0x423cfd(0xa0)]('amer',_0x423cfd(0x99)+_0x4d1651,_0x423cfd(0xaf),{}),{'status':_0x423cfd(0xab)};}catch(_0x53ca41){console[_0x423cfd(0xb5)](_0x423cfd(0xbc),_0x53ca41),loggerService_1[_0x423cfd(0xb4)][_0x423cfd(0x97)](_0x423cfd(0x98),'/payment/verify/'+_0x4d1651,_0x53ca41);throw new Error(_0x423cfd(0x96)+(_0x53ca41 instanceof Error?_0x53ca41['message']:_0x423cfd(0xa5)));}}async['processWebhook'](_0x2f4d5f){const _0x5a1510=a61_0x111888;console['log'](_0x5a1510(0xb6),_0x2f4d5f);let _0x4b3f25=_0x5a1510(0xab);if(_0x2f4d5f[_0x5a1510(0xa9)]===!![])_0x4b3f25=_0x5a1510(0xaa);else _0x2f4d5f[_0x5a1510(0xa9)]===![]&&(_0x4b3f25=_0x5a1510(0xa8));const _0x1b171d={};return _0x2f4d5f['cardLast4']&&(_0x1b171d[_0x5a1510(0xb1)]=_0x2f4d5f[_0x5a1510(0xb1)]),_0x2f4d5f['paymentMethod']&&(_0x1b171d[_0x5a1510(0x9b)]=_0x2f4d5f['paymentMethod']),_0x2f4d5f[_0x5a1510(0x9f)]&&(_0x1b171d['transactionId']=_0x2f4d5f[_0x5a1510(0x9f)],_0x1b171d['gatewayPaymentId']=_0x2f4d5f[_0x5a1510(0x9f)]),console[_0x5a1510(0xac)](_0x5a1510(0xa6)+_0x4b3f25),{'paymentId':_0x2f4d5f[_0x5a1510(0x9d)]||_0x2f4d5f[_0x5a1510(0x92)]||'','status':_0x4b3f25,'amount':_0x2f4d5f[_0x5a1510(0xa4)],'currency':_0x2f4d5f[_0x5a1510(0xb2)],'additionalInfo':_0x1b171d};}}exports['AmerService']=AmerService;