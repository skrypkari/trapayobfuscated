'use strict';const a41_0x596a2d=a41_0x3674;(function(_0x3c138f,_0x31180c){const _0x431041=a41_0x3674,_0x309ab7=_0x3c138f();while(!![]){try{const _0x1acf84=-parseInt(_0x431041(0x148))/0x1+parseInt(_0x431041(0x156))/0x2+-parseInt(_0x431041(0x13b))/0x3+parseInt(_0x431041(0x145))/0x4*(-parseInt(_0x431041(0x14d))/0x5)+-parseInt(_0x431041(0x14a))/0x6+parseInt(_0x431041(0x149))/0x7+parseInt(_0x431041(0x146))/0x8;if(_0x1acf84===_0x31180c)break;else _0x309ab7['push'](_0x309ab7['shift']());}catch(_0x5161fc){_0x309ab7['push'](_0x309ab7['shift']());}}}(a41_0x4282,0xc8b76));Object[a41_0x596a2d(0x138)](exports,a41_0x596a2d(0x134),{'value':!![]}),exports['AmerService']=void 0x0;function a41_0x4282(){const _0x23b228=['gatewayPaymentId','1331492ufhglu','GET','logWhiteDomainRequest','Payment\x20ID:','Error\x20details:','stack','üîç\x20Verifying\x20Amer\x20payment:\x20','Amount:','Error\x20message:','===\x20AMER\x20SERVICE\x20ERROR\x20===','===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20===','PAID','üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20','paymentMethod','üîÑ\x20Amer\x20webhook\x20processed:\x20status=','AmerService','/payment/verify/','__esModule','verifyPayment','success','log','defineProperty','Failed\x20to\x20verify\x20Amer\x20payment:\x20','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error','2844012EKzNHh','currency','apiUrl','loggerService','cardLast4','transactionId','toUpperCase','message','/payment.php?payment_id=','error','19288xVybOf','27077504kVDoBc','amer','646149pUTQvm','3992856ulZjZg','8685006GxqaMq','logWhiteDomainError','paymentId','785tJeggQ','Error\x20stack:','Payment\x20URL:','FAILED','https://api2.trapay.uk','Processing\x20Amer\x20webhook:','processWebhook','Amer\x20payment\x20verification\x20error:'];a41_0x4282=function(){return _0x23b228;};return a41_0x4282();}const loggerService_1=require('../loggerService');class AmerService{constructor(){const _0x3b2bb7=a41_0x596a2d;this['apiUrl']=_0x3b2bb7(0x151),console['log']('üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain');}async['createPaymentLink'](_0x4825f7){const _0x3480f2=a41_0x596a2d,{paymentId:_0x19caca,orderId:_0x389bcd,orderName:_0x5279d1,amount:_0x54ce50,currency:_0xa8d753,usage:_0x5d15f7,maxPayments:_0xa09d64,successUrl:_0x1120a2,failUrl:_0x34d8e8}=_0x4825f7,_0x4603fe=_0xa8d753[_0x3480f2(0x141)]();console[_0x3480f2(0x137)](_0x3480f2(0x12f)+_0x389bcd),console['log']('üí∞\x20Amount:\x20'+_0x54ce50+'\x20'+_0x4603fe);try{const _0x2ee423=this[_0x3480f2(0x13d)]+_0x3480f2(0x143)+_0x19caca+'&amount='+_0x54ce50+'&currency='+_0x4603fe+'&order='+_0x389bcd;return console[_0x3480f2(0x137)](_0x3480f2(0x160)),console['log'](_0x3480f2(0x159),_0x19caca),console[_0x3480f2(0x137)](_0x3480f2(0x14f),_0x2ee423),console['log'](_0x3480f2(0x15d),_0x54ce50,_0x4603fe),loggerService_1[_0x3480f2(0x13e)][_0x3480f2(0x158)](_0x3480f2(0x147),'/payment',_0x3480f2(0x157),{'paymentId':_0x19caca,'amount':_0x54ce50,'currency':_0x4603fe,'orderId':_0x389bcd}),{'gateway_payment_id':_0x19caca,'payment_url':_0x2ee423};}catch(_0x30d3b9){console['error'](_0x3480f2(0x15f)),console['error'](_0x3480f2(0x15a),_0x30d3b9),loggerService_1['loggerService'][_0x3480f2(0x14b)](_0x3480f2(0x147),'/payment',_0x30d3b9);if(_0x30d3b9 instanceof Error){console[_0x3480f2(0x144)](_0x3480f2(0x15e),_0x30d3b9['message']),console[_0x3480f2(0x144)](_0x3480f2(0x14e),_0x30d3b9[_0x3480f2(0x15b)]);throw new Error('Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20'+_0x30d3b9['message']);}throw new Error(_0x3480f2(0x13a));}}async[a41_0x596a2d(0x135)](_0x5bf6b4){const _0x542a0b=a41_0x596a2d;console[_0x542a0b(0x137)](_0x542a0b(0x15c)+_0x5bf6b4);try{return loggerService_1[_0x542a0b(0x13e)][_0x542a0b(0x158)](_0x542a0b(0x147),'/payment/verify/'+_0x5bf6b4,_0x542a0b(0x157),{}),{'status':'PENDING'};}catch(_0x493c6c){console[_0x542a0b(0x144)](_0x542a0b(0x154),_0x493c6c),loggerService_1[_0x542a0b(0x13e)][_0x542a0b(0x14b)]('amer',_0x542a0b(0x133)+_0x5bf6b4,_0x493c6c);throw new Error(_0x542a0b(0x139)+(_0x493c6c instanceof Error?_0x493c6c[_0x542a0b(0x142)]:'Unknown\x20error'));}}async[a41_0x596a2d(0x153)](_0x3329ba){const _0x1e8643=a41_0x596a2d;console[_0x1e8643(0x137)](_0x1e8643(0x152),_0x3329ba);let _0x3c2861='PENDING';if(_0x3329ba[_0x1e8643(0x136)]===!![])_0x3c2861=_0x1e8643(0x12e);else _0x3329ba[_0x1e8643(0x136)]===![]&&(_0x3c2861=_0x1e8643(0x150));const _0x58cf41={};return _0x3329ba[_0x1e8643(0x13f)]&&(_0x58cf41[_0x1e8643(0x13f)]=_0x3329ba[_0x1e8643(0x13f)]),_0x3329ba[_0x1e8643(0x130)]&&(_0x58cf41[_0x1e8643(0x130)]=_0x3329ba['paymentMethod']),_0x3329ba[_0x1e8643(0x140)]&&(_0x58cf41[_0x1e8643(0x140)]=_0x3329ba[_0x1e8643(0x140)],_0x58cf41[_0x1e8643(0x155)]=_0x3329ba[_0x1e8643(0x140)]),console[_0x1e8643(0x137)](_0x1e8643(0x131)+_0x3c2861),{'paymentId':_0x3329ba[_0x1e8643(0x14c)]||_0x3329ba['orderId']||'','status':_0x3c2861,'amount':_0x3329ba['amount'],'currency':_0x3329ba[_0x1e8643(0x13c)],'additionalInfo':_0x58cf41};}}function a41_0x3674(_0x5d07a3,_0x324f79){const _0x4282b6=a41_0x4282();return a41_0x3674=function(_0x3674d4,_0x3f5b9c){_0x3674d4=_0x3674d4-0x12e;let _0x192d3e=_0x4282b6[_0x3674d4];return _0x192d3e;},a41_0x3674(_0x5d07a3,_0x324f79);}exports[a41_0x596a2d(0x132)]=AmerService;