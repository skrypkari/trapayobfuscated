'use strict';function a41_0x4547(_0xf87cc2,_0x234873){const _0x573a3a=a41_0x573a();return a41_0x4547=function(_0x454750,_0x42d3a6){_0x454750=_0x454750-0xfb;let _0x4658ad=_0x573a3a[_0x454750];return _0x4658ad;},a41_0x4547(_0xf87cc2,_0x234873);}const a41_0x2792f6=a41_0x4547;(function(_0x1420e5,_0xcee09d){const _0x27fefa=a41_0x4547,_0x43e7d3=_0x1420e5();while(!![]){try{const _0x7d1caf=-parseInt(_0x27fefa(0x125))/0x1*(parseInt(_0x27fefa(0x10d))/0x2)+parseInt(_0x27fefa(0x10a))/0x3*(parseInt(_0x27fefa(0x111))/0x4)+-parseInt(_0x27fefa(0x114))/0x5*(-parseInt(_0x27fefa(0x11f))/0x6)+parseInt(_0x27fefa(0x12b))/0x7*(parseInt(_0x27fefa(0x129))/0x8)+-parseInt(_0x27fefa(0x118))/0x9*(parseInt(_0x27fefa(0x131))/0xa)+-parseInt(_0x27fefa(0x102))/0xb*(-parseInt(_0x27fefa(0x105))/0xc)+-parseInt(_0x27fefa(0xfc))/0xd*(parseInt(_0x27fefa(0x108))/0xe);if(_0x7d1caf===_0xcee09d)break;else _0x43e7d3['push'](_0x43e7d3['shift']());}catch(_0x44a3b4){_0x43e7d3['push'](_0x43e7d3['shift']());}}}(a41_0x573a,0x37f4b));Object[a41_0x2792f6(0x10f)](exports,a41_0x2792f6(0x132),{'value':!![]}),exports[a41_0x2792f6(0x11d)]=void 0x0;function a41_0x573a(){const _0x5ed449=['Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20','paymentId','error','Error\x20message:','234310xdNYgA','__esModule','Amount:','verifyPayment','toUpperCase','5130021UlMsAx','apiUrl','createPaymentLink','Error\x20stack:','&order=','cardLast4','22bGKVmk','Payment\x20ID:','https://api2.trapay.uk','1395348tzSWRc','../loggerService','/payment','14XOtevK','üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain','60BhBeeS','message','Payment\x20URL:','2naqMgr','GET','defineProperty','Error\x20details:','71168hYmSPM','PENDING','success','1742905ghAsse','amer','loggerService','logWhiteDomainRequest','162bAaAAe','Failed\x20to\x20verify\x20Amer\x20payment:\x20','&currency=','currency','transactionId','AmerService','stack','6FUxNFb','üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20','paymentMethod','/payment.php?payment_id=','üîÑ\x20Amer\x20webhook\x20processed:\x20status=','FAILED','333553LikLQo','===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20===','log','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error','32PVxqdo','processWebhook','773752SCWWrV','/payment/verify/'];a41_0x573a=function(){return _0x5ed449;};return a41_0x573a();}const loggerService_1=require(a41_0x2792f6(0x106));class AmerService{constructor(){const _0xbc0d7c=a41_0x2792f6;this[_0xbc0d7c(0xfd)]=_0xbc0d7c(0x104),console[_0xbc0d7c(0x127)](_0xbc0d7c(0x109));}async[a41_0x2792f6(0xfe)](_0x583335){const _0x4cfae0=a41_0x2792f6,{paymentId:_0x526ef0,orderId:_0x5be33e,orderName:_0x4e34d0,amount:_0x20f684,currency:_0x25149b,usage:_0xd72122,maxPayments:_0x72b847,successUrl:_0x55c19a,failUrl:_0x5355c4}=_0x583335,_0x1a8829=_0x25149b[_0x4cfae0(0xfb)]();console[_0x4cfae0(0x127)](_0x4cfae0(0x120)+_0x5be33e),console[_0x4cfae0(0x127)]('üí∞\x20Amount:\x20'+_0x20f684+'\x20'+_0x1a8829);try{const _0x413372=this[_0x4cfae0(0xfd)]+_0x4cfae0(0x122)+_0x526ef0+'&amount='+_0x20f684+_0x4cfae0(0x11a)+_0x1a8829+_0x4cfae0(0x100)+_0x5be33e;return console[_0x4cfae0(0x127)](_0x4cfae0(0x126)),console[_0x4cfae0(0x127)](_0x4cfae0(0x103),_0x526ef0),console['log'](_0x4cfae0(0x10c),_0x413372),console['log'](_0x4cfae0(0x133),_0x20f684,_0x1a8829),loggerService_1[_0x4cfae0(0x116)][_0x4cfae0(0x117)](_0x4cfae0(0x115),_0x4cfae0(0x107),_0x4cfae0(0x10e),{'paymentId':_0x526ef0,'amount':_0x20f684,'currency':_0x1a8829,'orderId':_0x5be33e}),{'gateway_payment_id':_0x526ef0,'payment_url':_0x413372};}catch(_0x29852f){console[_0x4cfae0(0x12f)]('===\x20AMER\x20SERVICE\x20ERROR\x20==='),console[_0x4cfae0(0x12f)](_0x4cfae0(0x110),_0x29852f),loggerService_1[_0x4cfae0(0x116)]['logWhiteDomainError'](_0x4cfae0(0x115),_0x4cfae0(0x107),_0x29852f);if(_0x29852f instanceof Error){console[_0x4cfae0(0x12f)](_0x4cfae0(0x130),_0x29852f[_0x4cfae0(0x10b)]),console[_0x4cfae0(0x12f)](_0x4cfae0(0xff),_0x29852f[_0x4cfae0(0x11e)]);throw new Error(_0x4cfae0(0x12d)+_0x29852f[_0x4cfae0(0x10b)]);}throw new Error(_0x4cfae0(0x128));}}async[a41_0x2792f6(0x134)](_0x193a85){const _0x1b2d21=a41_0x2792f6;console[_0x1b2d21(0x127)]('üîç\x20Verifying\x20Amer\x20payment:\x20'+_0x193a85);try{return loggerService_1[_0x1b2d21(0x116)][_0x1b2d21(0x117)]('amer','/payment/verify/'+_0x193a85,_0x1b2d21(0x10e),{}),{'status':_0x1b2d21(0x112)};}catch(_0x1de5e1){console[_0x1b2d21(0x12f)]('Amer\x20payment\x20verification\x20error:',_0x1de5e1),loggerService_1['loggerService']['logWhiteDomainError']('amer',_0x1b2d21(0x12c)+_0x193a85,_0x1de5e1);throw new Error(_0x1b2d21(0x119)+(_0x1de5e1 instanceof Error?_0x1de5e1[_0x1b2d21(0x10b)]:'Unknown\x20error'));}}async[a41_0x2792f6(0x12a)](_0x4c7a0c){const _0xdd8cf=a41_0x2792f6;console[_0xdd8cf(0x127)]('Processing\x20Amer\x20webhook:',_0x4c7a0c);let _0x523650=_0xdd8cf(0x112);if(_0x4c7a0c[_0xdd8cf(0x113)]===!![])_0x523650='PAID';else _0x4c7a0c[_0xdd8cf(0x113)]===![]&&(_0x523650=_0xdd8cf(0x124));const _0xa0b4fc={};return _0x4c7a0c[_0xdd8cf(0x101)]&&(_0xa0b4fc[_0xdd8cf(0x101)]=_0x4c7a0c[_0xdd8cf(0x101)]),_0x4c7a0c['paymentMethod']&&(_0xa0b4fc[_0xdd8cf(0x121)]=_0x4c7a0c['paymentMethod']),_0x4c7a0c[_0xdd8cf(0x11c)]&&(_0xa0b4fc['transactionId']=_0x4c7a0c['transactionId'],_0xa0b4fc['gatewayPaymentId']=_0x4c7a0c['transactionId']),console['log'](_0xdd8cf(0x123)+_0x523650),{'paymentId':_0x4c7a0c[_0xdd8cf(0x12e)]||_0x4c7a0c['orderId']||'','status':_0x523650,'amount':_0x4c7a0c['amount'],'currency':_0x4c7a0c[_0xdd8cf(0x11b)],'additionalInfo':_0xa0b4fc};}}exports[a41_0x2792f6(0x11d)]=AmerService;