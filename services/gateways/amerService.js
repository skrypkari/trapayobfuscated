'use strict';function a45_0xb38c(_0x2bed73,_0x3751d8){const _0x2a7a25=a45_0x2a7a();return a45_0xb38c=function(_0xb38c3c,_0x23bc53){_0xb38c3c=_0xb38c3c-0x77;let _0x2e84a1=_0x2a7a25[_0xb38c3c];return _0x2e84a1;},a45_0xb38c(_0x2bed73,_0x3751d8);}const a45_0x4eb2c6=a45_0xb38c;(function(_0x4d065a,_0x5c7b01){const _0x429038=a45_0xb38c,_0xe74a22=_0x4d065a();while(!![]){try{const _0x3e20ed=parseInt(_0x429038(0xa0))/0x1+parseInt(_0x429038(0xae))/0x2+-parseInt(_0x429038(0x97))/0x3+-parseInt(_0x429038(0x93))/0x4*(parseInt(_0x429038(0x92))/0x5)+-parseInt(_0x429038(0x87))/0x6*(-parseInt(_0x429038(0xa5))/0x7)+parseInt(_0x429038(0xab))/0x8*(parseInt(_0x429038(0x90))/0x9)+-parseInt(_0x429038(0x9d))/0xa;if(_0x3e20ed===_0x5c7b01)break;else _0xe74a22['push'](_0xe74a22['shift']());}catch(_0x2a2413){_0xe74a22['push'](_0xe74a22['shift']());}}}(a45_0x2a7a,0xa6bf7));Object[a45_0x4eb2c6(0x8b)](exports,'__esModule',{'value':!![]}),exports[a45_0x4eb2c6(0xa6)]=void 0x0;const loggerService_1=require(a45_0x4eb2c6(0x82));function a45_0x2a7a(){const _0x14646f=['üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20','log','/payment/verify/','Unknown\x20error','Processing\x20Amer\x20webhook:','loggerService','../loggerService','createPaymentLink','FAILED','orderId','Failed\x20to\x20verify\x20Amer\x20payment:\x20','24cliIqa','cardLast4','https://api2.trapay.uk','toUpperCase','defineProperty','Amer\x20payment\x20verification\x20error:','gatewayPaymentId','currency','transactionId','130563JKAtKa','amount','3630VZIoUc','6488WQLgfl','stack','&amount=','&currency=','17013TPmDSq','message','===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20===','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error','/payment','amer','7270970AURNtm','GET','Error\x20details:','330678TZcFsN','PENDING','logWhiteDomainRequest','apiUrl','üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain','1215571ZtuBIm','AmerService','processWebhook','üîÑ\x20Amer\x20webhook\x20processed:\x20status=','===\x20AMER\x20SERVICE\x20ERROR\x20===','error','320VyCNDl','üí∞\x20Amount:\x20','paymentMethod','1975538SothnS','PAID','&order=','verifyPayment','Amount:','Payment\x20ID:'];a45_0x2a7a=function(){return _0x14646f;};return a45_0x2a7a();}class AmerService{constructor(){const _0x31cc04=a45_0x4eb2c6;this['apiUrl']=_0x31cc04(0x89),console['log'](_0x31cc04(0xa4));}async[a45_0x4eb2c6(0x83)](_0x312726){const _0x13bca6=a45_0x4eb2c6,{paymentId:_0x3210ac,orderId:_0x1091a1,orderName:_0x5edb41,amount:_0x3c1859,currency:_0x1ee9d0,usage:_0x2ca03a,maxPayments:_0x223331,successUrl:_0xbbc6c4,failUrl:_0x2bb33d}=_0x312726,_0x338d2c=_0x1ee9d0[_0x13bca6(0x8a)]();console[_0x13bca6(0x7d)](_0x13bca6(0x7c)+_0x1091a1),console[_0x13bca6(0x7d)](_0x13bca6(0xac)+_0x3c1859+'\x20'+_0x338d2c);try{const _0x22f67e=this[_0x13bca6(0xa3)]+'/payment.php?payment_id='+_0x3210ac+_0x13bca6(0x95)+_0x3c1859+_0x13bca6(0x96)+_0x338d2c+_0x13bca6(0x78)+_0x1091a1;return console[_0x13bca6(0x7d)](_0x13bca6(0x99)),console[_0x13bca6(0x7d)](_0x13bca6(0x7b),_0x3210ac),console[_0x13bca6(0x7d)]('Payment\x20URL:',_0x22f67e),console[_0x13bca6(0x7d)](_0x13bca6(0x7a),_0x3c1859,_0x338d2c),loggerService_1[_0x13bca6(0x81)][_0x13bca6(0xa2)]('amer',_0x13bca6(0x9b),_0x13bca6(0x9e),{'paymentId':_0x3210ac,'amount':_0x3c1859,'currency':_0x338d2c,'orderId':_0x1091a1}),{'gateway_payment_id':_0x3210ac,'payment_url':_0x22f67e};}catch(_0x5396cf){console[_0x13bca6(0xaa)](_0x13bca6(0xa9)),console[_0x13bca6(0xaa)](_0x13bca6(0x9f),_0x5396cf),loggerService_1[_0x13bca6(0x81)]['logWhiteDomainError'](_0x13bca6(0x9c),_0x13bca6(0x9b),_0x5396cf);if(_0x5396cf instanceof Error){console['error']('Error\x20message:',_0x5396cf[_0x13bca6(0x98)]),console['error']('Error\x20stack:',_0x5396cf[_0x13bca6(0x94)]);throw new Error('Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20'+_0x5396cf[_0x13bca6(0x98)]);}throw new Error(_0x13bca6(0x9a));}}async[a45_0x4eb2c6(0x79)](_0x579f26){const _0x58443b=a45_0x4eb2c6;console[_0x58443b(0x7d)]('üîç\x20Verifying\x20Amer\x20payment:\x20'+_0x579f26);try{return loggerService_1[_0x58443b(0x81)]['logWhiteDomainRequest'](_0x58443b(0x9c),_0x58443b(0x7e)+_0x579f26,'GET',{}),{'status':'PENDING'};}catch(_0x3093ca){console[_0x58443b(0xaa)](_0x58443b(0x8c),_0x3093ca),loggerService_1[_0x58443b(0x81)]['logWhiteDomainError'](_0x58443b(0x9c),_0x58443b(0x7e)+_0x579f26,_0x3093ca);throw new Error(_0x58443b(0x86)+(_0x3093ca instanceof Error?_0x3093ca['message']:_0x58443b(0x7f)));}}async[a45_0x4eb2c6(0xa7)](_0xbc9e20){const _0x145bbe=a45_0x4eb2c6;console['log'](_0x145bbe(0x80),_0xbc9e20);let _0x5e2676=_0x145bbe(0xa1);if(_0xbc9e20['success']===!![])_0x5e2676=_0x145bbe(0x77);else _0xbc9e20['success']===![]&&(_0x5e2676=_0x145bbe(0x84));const _0x46a269={};return _0xbc9e20['cardLast4']&&(_0x46a269[_0x145bbe(0x88)]=_0xbc9e20[_0x145bbe(0x88)]),_0xbc9e20[_0x145bbe(0xad)]&&(_0x46a269[_0x145bbe(0xad)]=_0xbc9e20['paymentMethod']),_0xbc9e20['transactionId']&&(_0x46a269[_0x145bbe(0x8f)]=_0xbc9e20[_0x145bbe(0x8f)],_0x46a269[_0x145bbe(0x8d)]=_0xbc9e20[_0x145bbe(0x8f)]),console[_0x145bbe(0x7d)](_0x145bbe(0xa8)+_0x5e2676),{'paymentId':_0xbc9e20['paymentId']||_0xbc9e20[_0x145bbe(0x85)]||'','status':_0x5e2676,'amount':_0xbc9e20[_0x145bbe(0x91)],'currency':_0xbc9e20[_0x145bbe(0x8e)],'additionalInfo':_0x46a269};}}exports['AmerService']=AmerService;