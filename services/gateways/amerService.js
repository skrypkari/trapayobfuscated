'use strict';const a41_0x3c0921=a41_0x13ac;(function(_0x109775,_0x5ea077){const _0x24b0a0=a41_0x13ac,_0x3b2a4d=_0x109775();while(!![]){try{const _0x184d40=-parseInt(_0x24b0a0(0x110))/0x1+parseInt(_0x24b0a0(0x10f))/0x2+-parseInt(_0x24b0a0(0x102))/0x3+parseInt(_0x24b0a0(0xff))/0x4*(parseInt(_0x24b0a0(0xe4))/0x5)+-parseInt(_0x24b0a0(0x101))/0x6+parseInt(_0x24b0a0(0xef))/0x7+parseInt(_0x24b0a0(0x10a))/0x8;if(_0x184d40===_0x5ea077)break;else _0x3b2a4d['push'](_0x3b2a4d['shift']());}catch(_0x391c5e){_0x3b2a4d['push'](_0x3b2a4d['shift']());}}}(a41_0x2777,0x60e04));function a41_0x2777(){const _0x25548c=['success','16bdLpaU','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error','3685710HBREiq','647937uXaSXr','Amount:','Amer\x20payment\x20verification\x20error:','/payment.php?payment_id=','paymentId','üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20','Failed\x20to\x20verify\x20Amer\x20payment:\x20','===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20===','3113056NomujQ','Error\x20details:','Payment\x20ID:','AmerService','error','853776uYwGbO','394133IWvKee','üîÑ\x20Amer\x20webhook\x20processed:\x20status=','log','üîç\x20Verifying\x20Amer\x20payment:\x20','Error\x20message:','/payment/verify/','toUpperCase','266105nAscSx','orderId','transactionId','amer','Unknown\x20error','message','&amount=','logWhiteDomainError','defineProperty','===\x20AMER\x20SERVICE\x20ERROR\x20===','__esModule','4146079XvwhCj','amount','verifyPayment','apiUrl','FAILED','Processing\x20Amer\x20webhook:','loggerService','paymentMethod','currency','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20','/payment','processWebhook','GET','PENDING','cardLast4'];a41_0x2777=function(){return _0x25548c;};return a41_0x2777();}Object[a41_0x3c0921(0xec)](exports,a41_0x3c0921(0xee),{'value':!![]}),exports[a41_0x3c0921(0x10d)]=void 0x0;const loggerService_1=require('../loggerService');function a41_0x13ac(_0x2aba05,_0x25c487){const _0x277749=a41_0x2777();return a41_0x13ac=function(_0x13ac49,_0x19bcff){_0x13ac49=_0x13ac49-0xe2;let _0x1519c2=_0x277749[_0x13ac49];return _0x1519c2;},a41_0x13ac(_0x2aba05,_0x25c487);}class AmerService{constructor(){const _0x25d687=a41_0x3c0921;this['apiUrl']='https://api2.trapay.uk',console[_0x25d687(0x112)]('üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain');}async['createPaymentLink'](_0x4702c){const _0x35bb43=a41_0x3c0921,{paymentId:_0x529e11,orderId:_0x124f39,orderName:_0x670a08,amount:_0x638816,currency:_0x42b1fa,usage:_0x3869c6,maxPayments:_0x5d5aba,successUrl:_0x41465f,failUrl:_0x50b335}=_0x4702c,_0x11c88d=_0x42b1fa[_0x35bb43(0xe3)]();console[_0x35bb43(0x112)](_0x35bb43(0x107)+_0x124f39),console[_0x35bb43(0x112)]('üí∞\x20Amount:\x20'+_0x638816+'\x20'+_0x11c88d);try{const _0x5d4caa=this[_0x35bb43(0xf2)]+_0x35bb43(0x105)+_0x529e11+_0x35bb43(0xea)+_0x638816+'&currency='+_0x11c88d+'&order='+_0x124f39;return console[_0x35bb43(0x112)](_0x35bb43(0x109)),console[_0x35bb43(0x112)](_0x35bb43(0x10c),_0x529e11),console['log']('Payment\x20URL:',_0x5d4caa),console[_0x35bb43(0x112)](_0x35bb43(0x103),_0x638816,_0x11c88d),loggerService_1['loggerService']['logWhiteDomainRequest']('amer',_0x35bb43(0xf9),'GET',{'paymentId':_0x529e11,'amount':_0x638816,'currency':_0x11c88d,'orderId':_0x124f39}),{'gateway_payment_id':_0x529e11,'payment_url':_0x5d4caa};}catch(_0xe25ade){console['error'](_0x35bb43(0xed)),console[_0x35bb43(0x10e)](_0x35bb43(0x10b),_0xe25ade),loggerService_1[_0x35bb43(0xf5)][_0x35bb43(0xeb)](_0x35bb43(0xe7),_0x35bb43(0xf9),_0xe25ade);if(_0xe25ade instanceof Error){console[_0x35bb43(0x10e)](_0x35bb43(0x114),_0xe25ade[_0x35bb43(0xe9)]),console[_0x35bb43(0x10e)]('Error\x20stack:',_0xe25ade['stack']);throw new Error(_0x35bb43(0xf8)+_0xe25ade[_0x35bb43(0xe9)]);}throw new Error(_0x35bb43(0x100));}}async[a41_0x3c0921(0xf1)](_0x48368f){const _0x33bd98=a41_0x3c0921;console[_0x33bd98(0x112)](_0x33bd98(0x113)+_0x48368f);try{return loggerService_1['loggerService']['logWhiteDomainRequest']('amer','/payment/verify/'+_0x48368f,_0x33bd98(0xfb),{}),{'status':_0x33bd98(0xfc)};}catch(_0xa3fab8){console[_0x33bd98(0x10e)](_0x33bd98(0x104),_0xa3fab8),loggerService_1[_0x33bd98(0xf5)][_0x33bd98(0xeb)](_0x33bd98(0xe7),_0x33bd98(0xe2)+_0x48368f,_0xa3fab8);throw new Error(_0x33bd98(0x108)+(_0xa3fab8 instanceof Error?_0xa3fab8[_0x33bd98(0xe9)]:_0x33bd98(0xe8)));}}async[a41_0x3c0921(0xfa)](_0x37907a){const _0xdfbd50=a41_0x3c0921;console[_0xdfbd50(0x112)](_0xdfbd50(0xf4),_0x37907a);let _0x42727d=_0xdfbd50(0xfc);if(_0x37907a[_0xdfbd50(0xfe)]===!![])_0x42727d='PAID';else _0x37907a[_0xdfbd50(0xfe)]===![]&&(_0x42727d=_0xdfbd50(0xf3));const _0x159ed2={};return _0x37907a[_0xdfbd50(0xfd)]&&(_0x159ed2[_0xdfbd50(0xfd)]=_0x37907a[_0xdfbd50(0xfd)]),_0x37907a[_0xdfbd50(0xf6)]&&(_0x159ed2['paymentMethod']=_0x37907a[_0xdfbd50(0xf6)]),_0x37907a['transactionId']&&(_0x159ed2[_0xdfbd50(0xe6)]=_0x37907a[_0xdfbd50(0xe6)],_0x159ed2['gatewayPaymentId']=_0x37907a[_0xdfbd50(0xe6)]),console['log'](_0xdfbd50(0x111)+_0x42727d),{'paymentId':_0x37907a[_0xdfbd50(0x106)]||_0x37907a[_0xdfbd50(0xe5)]||'','status':_0x42727d,'amount':_0x37907a[_0xdfbd50(0xf0)],'currency':_0x37907a[_0xdfbd50(0xf7)],'additionalInfo':_0x159ed2};}}exports[a41_0x3c0921(0x10d)]=AmerService;