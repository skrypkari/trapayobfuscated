'use strict';const a41_0x427dbc=a41_0x158d;(function(_0x110284,_0x3ee876){const _0x229742=a41_0x158d,_0x5adfe4=_0x110284();while(!![]){try{const _0x20e62c=parseInt(_0x229742(0x6f))/0x1+parseInt(_0x229742(0x74))/0x2+parseInt(_0x229742(0x7b))/0x3*(parseInt(_0x229742(0x94))/0x4)+parseInt(_0x229742(0x76))/0x5*(-parseInt(_0x229742(0x8b))/0x6)+parseInt(_0x229742(0x97))/0x7+parseInt(_0x229742(0x9e))/0x8*(parseInt(_0x229742(0x7e))/0x9)+-parseInt(_0x229742(0xa5))/0xa*(parseInt(_0x229742(0x7d))/0xb);if(_0x20e62c===_0x3ee876)break;else _0x5adfe4['push'](_0x5adfe4['shift']());}catch(_0x30306f){_0x5adfe4['push'](_0x5adfe4['shift']());}}}(a41_0x4c23,0x4ff68));function a41_0x158d(_0x2ba596,_0x327d48){const _0x4c2364=a41_0x4c23();return a41_0x158d=function(_0x158d13,_0x157899){_0x158d13=_0x158d13-0x6f;let _0x3c95f8=_0x4c2364[_0x158d13];return _0x3c95f8;},a41_0x158d(_0x2ba596,_0x327d48);}Object[a41_0x427dbc(0x8c)](exports,'__esModule',{'value':!![]}),exports['AmerService']=void 0x0;const loggerService_1=require('../loggerService');function a41_0x4c23(){const _0x401c7e=['paymentMethod','&amount=','/payment/verify/','paymentId','apiUrl','462856qlnYNL','amer','===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20===','2187605oIdXVg','/payment','loggerService','Failed\x20to\x20verify\x20Amer\x20payment:\x20','===\x20AMER\x20SERVICE\x20ERROR\x20===','Processing\x20Amer\x20webhook:','Payment\x20ID:','32KZoZkx','message','Error\x20details:','https://api2.trapay.uk','Error\x20message:','log','success','7438390yeQBgS','logWhiteDomainRequest','Error\x20stack:','379731zmDHBx','üîÑ\x20Amer\x20webhook\x20processed:\x20status=','PENDING','üîç\x20Verifying\x20Amer\x20payment:\x20','toUpperCase','1125896MsiFtb','stack','2435PovgXZ','amount','GET','üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain','transactionId','6ELpZHB','verifyPayment','11WCOdhb','333459PAgusD','Payment\x20URL:','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error','orderId','&order=','gatewayPaymentId','&currency=','üí∞\x20Amount:\x20','AmerService','logWhiteDomainError','error','/payment.php?payment_id=','cardLast4','6942GciJIq','defineProperty','Amount:','currency'];a41_0x4c23=function(){return _0x401c7e;};return a41_0x4c23();}class AmerService{constructor(){const _0x2e399c=a41_0x427dbc;this[_0x2e399c(0x93)]=_0x2e399c(0xa1),console['log'](_0x2e399c(0x79));}async['createPaymentLink'](_0x4f37fd){const _0x4f00d7=a41_0x427dbc,{paymentId:_0x1debc0,orderId:_0x1d2b39,orderName:_0x27bf6b,amount:_0x376dd3,currency:_0x48abaa,usage:_0x483a71,maxPayments:_0x46e912,successUrl:_0x109a7b,failUrl:_0xf23070}=_0x4f37fd,_0x1b608d=_0x48abaa[_0x4f00d7(0x73)]();console[_0x4f00d7(0xa3)]('üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20'+_0x1d2b39),console[_0x4f00d7(0xa3)](_0x4f00d7(0x85)+_0x376dd3+'\x20'+_0x1b608d);try{const _0x4abf2e=this[_0x4f00d7(0x93)]+_0x4f00d7(0x89)+_0x1debc0+_0x4f00d7(0x90)+_0x376dd3+_0x4f00d7(0x84)+_0x1b608d+_0x4f00d7(0x82)+_0x1d2b39;return console[_0x4f00d7(0xa3)](_0x4f00d7(0x96)),console['log'](_0x4f00d7(0x9d),_0x1debc0),console[_0x4f00d7(0xa3)](_0x4f00d7(0x7f),_0x4abf2e),console[_0x4f00d7(0xa3)](_0x4f00d7(0x8d),_0x376dd3,_0x1b608d),loggerService_1['loggerService']['logWhiteDomainRequest'](_0x4f00d7(0x95),_0x4f00d7(0x98),_0x4f00d7(0x78),{'paymentId':_0x1debc0,'amount':_0x376dd3,'currency':_0x1b608d,'orderId':_0x1d2b39}),{'gateway_payment_id':_0x1debc0,'payment_url':_0x4abf2e};}catch(_0x465c24){console[_0x4f00d7(0x88)](_0x4f00d7(0x9b)),console[_0x4f00d7(0x88)](_0x4f00d7(0xa0),_0x465c24),loggerService_1[_0x4f00d7(0x99)][_0x4f00d7(0x87)](_0x4f00d7(0x95),_0x4f00d7(0x98),_0x465c24);if(_0x465c24 instanceof Error){console[_0x4f00d7(0x88)](_0x4f00d7(0xa2),_0x465c24['message']),console[_0x4f00d7(0x88)](_0x4f00d7(0xa7),_0x465c24[_0x4f00d7(0x75)]);throw new Error('Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20'+_0x465c24[_0x4f00d7(0x9f)]);}throw new Error(_0x4f00d7(0x80));}}async[a41_0x427dbc(0x7c)](_0xd0c749){const _0x4f27bd=a41_0x427dbc;console[_0x4f27bd(0xa3)](_0x4f27bd(0x72)+_0xd0c749);try{return loggerService_1[_0x4f27bd(0x99)][_0x4f27bd(0xa6)](_0x4f27bd(0x95),_0x4f27bd(0x91)+_0xd0c749,_0x4f27bd(0x78),{}),{'status':'PENDING'};}catch(_0x23c0e7){console[_0x4f27bd(0x88)]('Amer\x20payment\x20verification\x20error:',_0x23c0e7),loggerService_1[_0x4f27bd(0x99)][_0x4f27bd(0x87)](_0x4f27bd(0x95),'/payment/verify/'+_0xd0c749,_0x23c0e7);throw new Error(_0x4f27bd(0x9a)+(_0x23c0e7 instanceof Error?_0x23c0e7[_0x4f27bd(0x9f)]:'Unknown\x20error'));}}async['processWebhook'](_0x8a6896){const _0x2c4bb6=a41_0x427dbc;console[_0x2c4bb6(0xa3)](_0x2c4bb6(0x9c),_0x8a6896);let _0x729f36=_0x2c4bb6(0x71);if(_0x8a6896[_0x2c4bb6(0xa4)]===!![])_0x729f36='PAID';else _0x8a6896[_0x2c4bb6(0xa4)]===![]&&(_0x729f36='FAILED');const _0x48b53f={};return _0x8a6896['cardLast4']&&(_0x48b53f[_0x2c4bb6(0x8a)]=_0x8a6896[_0x2c4bb6(0x8a)]),_0x8a6896[_0x2c4bb6(0x8f)]&&(_0x48b53f['paymentMethod']=_0x8a6896['paymentMethod']),_0x8a6896['transactionId']&&(_0x48b53f[_0x2c4bb6(0x7a)]=_0x8a6896['transactionId'],_0x48b53f[_0x2c4bb6(0x83)]=_0x8a6896[_0x2c4bb6(0x7a)]),console['log'](_0x2c4bb6(0x70)+_0x729f36),{'paymentId':_0x8a6896[_0x2c4bb6(0x92)]||_0x8a6896[_0x2c4bb6(0x81)]||'','status':_0x729f36,'amount':_0x8a6896[_0x2c4bb6(0x77)],'currency':_0x8a6896[_0x2c4bb6(0x8e)],'additionalInfo':_0x48b53f};}}exports[a41_0x427dbc(0x86)]=AmerService;