'use strict';const a51_0x4eb84b=a51_0xba55;(function(_0x5c3685,_0x262c96){const _0x5a21a3=a51_0xba55,_0x40482c=_0x5c3685();while(!![]){try{const _0x512739=parseInt(_0x5a21a3(0x18c))/0x1+-parseInt(_0x5a21a3(0x191))/0x2*(-parseInt(_0x5a21a3(0x1a4))/0x3)+parseInt(_0x5a21a3(0x189))/0x4+parseInt(_0x5a21a3(0x18a))/0x5+parseInt(_0x5a21a3(0x1ab))/0x6+-parseInt(_0x5a21a3(0x1aa))/0x7+parseInt(_0x5a21a3(0x18d))/0x8*(-parseInt(_0x5a21a3(0x17f))/0x9);if(_0x512739===_0x262c96)break;else _0x40482c['push'](_0x40482c['shift']());}catch(_0x343c6f){_0x40482c['push'](_0x40482c['shift']());}}}(a51_0x222b,0xab5f6));Object[a51_0x4eb84b(0x179)](exports,a51_0x4eb84b(0x181),{'value':!![]}),exports[a51_0x4eb84b(0x18f)]=void 0x0;function a51_0x222b(){const _0x5c9d13=['cardLast4','FAILED','defineProperty','amer','logWhiteDomainRequest','üí∞\x20Amount:\x20','&amount=','üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain','450RGatpQ','Processing\x20Amer\x20webhook:','__esModule','processWebhook','/payment','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20','Error\x20details:','currency','Amount:','PENDING','3655976lfJxJV','736660ktEEVy','üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20','1374954INqgFw','406152VNgVbg','toUpperCase','AmerService','loggerService','25362AvdqyK','../loggerService','Amer\x20payment\x20verification\x20error:','paymentId','logWhiteDomainError','message','&order=','transactionId','error','/payment/verify/','GET','Failed\x20to\x20verify\x20Amer\x20payment:\x20','amount','paymentMethod','log','&currency=','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error','===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20===','üîç\x20Verifying\x20Amer\x20payment:\x20','102MIEYMD','gatewayPaymentId','stack','Error\x20message:','success','apiUrl','3473610vkECzq','5215128eNxcgG','https://api2.trapay.uk'];a51_0x222b=function(){return _0x5c9d13;};return a51_0x222b();}const loggerService_1=require(a51_0x4eb84b(0x192));function a51_0xba55(_0x284b5f,_0x543831){_0x284b5f=_0x284b5f-0x179;const _0x222bde=a51_0x222b();let _0xba558=_0x222bde[_0x284b5f];return _0xba558;}class AmerService{constructor(){const _0x193db0=a51_0x4eb84b;this[_0x193db0(0x1a9)]=_0x193db0(0x1ac),console[_0x193db0(0x19f)](_0x193db0(0x17e));}async['createPaymentLink'](_0x2bbc1b){const _0x4ed241=a51_0x4eb84b,{paymentId:_0x274e95,orderId:_0x5c6fd9,orderName:_0x4f4a6d,amount:_0x319469,currency:_0x4be9b0,usage:_0x38a7c1,maxPayments:_0x141f03,successUrl:_0x1564f2,failUrl:_0x5390ed}=_0x2bbc1b,_0x213ed7=_0x4be9b0[_0x4ed241(0x18e)]();console['log'](_0x4ed241(0x18b)+_0x5c6fd9),console['log'](_0x4ed241(0x17c)+_0x319469+'\x20'+_0x213ed7);try{const _0x583e31=this[_0x4ed241(0x1a9)]+'/payment.php?payment_id='+_0x274e95+_0x4ed241(0x17d)+_0x319469+_0x4ed241(0x1a0)+_0x213ed7+_0x4ed241(0x197)+_0x5c6fd9;return console['log'](_0x4ed241(0x1a2)),console['log']('Payment\x20ID:',_0x274e95),console['log']('Payment\x20URL:',_0x583e31),console['log'](_0x4ed241(0x187),_0x319469,_0x213ed7),loggerService_1[_0x4ed241(0x190)]['logWhiteDomainRequest'](_0x4ed241(0x17a),_0x4ed241(0x183),_0x4ed241(0x19b),{'paymentId':_0x274e95,'amount':_0x319469,'currency':_0x213ed7,'orderId':_0x5c6fd9}),{'gateway_payment_id':_0x274e95,'payment_url':_0x583e31};}catch(_0x3eb432){console[_0x4ed241(0x199)]('===\x20AMER\x20SERVICE\x20ERROR\x20==='),console[_0x4ed241(0x199)](_0x4ed241(0x185),_0x3eb432),loggerService_1[_0x4ed241(0x190)][_0x4ed241(0x195)](_0x4ed241(0x17a),_0x4ed241(0x183),_0x3eb432);if(_0x3eb432 instanceof Error){console[_0x4ed241(0x199)](_0x4ed241(0x1a7),_0x3eb432[_0x4ed241(0x196)]),console['error']('Error\x20stack:',_0x3eb432[_0x4ed241(0x1a6)]);throw new Error(_0x4ed241(0x184)+_0x3eb432[_0x4ed241(0x196)]);}throw new Error(_0x4ed241(0x1a1));}}async['verifyPayment'](_0xd650df){const _0x257e84=a51_0x4eb84b;console['log'](_0x257e84(0x1a3)+_0xd650df);try{return loggerService_1['loggerService'][_0x257e84(0x17b)](_0x257e84(0x17a),_0x257e84(0x19a)+_0xd650df,_0x257e84(0x19b),{}),{'status':_0x257e84(0x188)};}catch(_0x3b5885){console['error'](_0x257e84(0x193),_0x3b5885),loggerService_1['loggerService']['logWhiteDomainError'](_0x257e84(0x17a),_0x257e84(0x19a)+_0xd650df,_0x3b5885);throw new Error(_0x257e84(0x19c)+(_0x3b5885 instanceof Error?_0x3b5885['message']:'Unknown\x20error'));}}async[a51_0x4eb84b(0x182)](_0x30bb21){const _0x232571=a51_0x4eb84b;console['log'](_0x232571(0x180),_0x30bb21);let _0x3d9bec=_0x232571(0x188);if(_0x30bb21[_0x232571(0x1a8)]===!![])_0x3d9bec='PAID';else _0x30bb21[_0x232571(0x1a8)]===![]&&(_0x3d9bec=_0x232571(0x1ae));const _0x13c68a={};return _0x30bb21[_0x232571(0x1ad)]&&(_0x13c68a[_0x232571(0x1ad)]=_0x30bb21['cardLast4']),_0x30bb21[_0x232571(0x19e)]&&(_0x13c68a[_0x232571(0x19e)]=_0x30bb21['paymentMethod']),_0x30bb21[_0x232571(0x198)]&&(_0x13c68a['transactionId']=_0x30bb21[_0x232571(0x198)],_0x13c68a[_0x232571(0x1a5)]=_0x30bb21[_0x232571(0x198)]),console['log']('üîÑ\x20Amer\x20webhook\x20processed:\x20status='+_0x3d9bec),{'paymentId':_0x30bb21[_0x232571(0x194)]||_0x30bb21['orderId']||'','status':_0x3d9bec,'amount':_0x30bb21[_0x232571(0x19d)],'currency':_0x30bb21[_0x232571(0x186)],'additionalInfo':_0x13c68a};}}exports[a51_0x4eb84b(0x18f)]=AmerService;