'use strict';const a45_0x1336a1=a45_0x35a9;(function(_0x7973ac,_0x3deca1){const _0x496cda=a45_0x35a9,_0xdb67d1=_0x7973ac();while(!![]){try{const _0x55065f=parseInt(_0x496cda(0x120))/0x1+parseInt(_0x496cda(0x141))/0x2+-parseInt(_0x496cda(0x124))/0x3+parseInt(_0x496cda(0x118))/0x4*(parseInt(_0x496cda(0x111))/0x5)+-parseInt(_0x496cda(0x116))/0x6+-parseInt(_0x496cda(0x112))/0x7+parseInt(_0x496cda(0x12b))/0x8;if(_0x55065f===_0x3deca1)break;else _0xdb67d1['push'](_0xdb67d1['shift']());}catch(_0x321fbf){_0xdb67d1['push'](_0xdb67d1['shift']());}}}(a45_0x3e7e,0x1c042));Object['defineProperty'](exports,a45_0x1336a1(0x12d),{'value':!![]}),exports[a45_0x1336a1(0x137)]=void 0x0;function a45_0x3e7e(){const _0x564444=['Error\x20stack:','Amount:','AmerService','/payment/verify/','processWebhook','/payment.php?payment_id=','amer','message','toUpperCase','verifyPayment','Processing\x20Amer\x20webhook:','paymentMethod','185280MlgnPe','&order=','/payment','PAID','cardLast4','apiUrl','Error\x20message:','15MXrPth','867181xbbpbM','log','currency','===\x20AMER\x20SERVICE\x20ERROR\x20===','380178QaiNrX','logWhiteDomainError','87908aVqEex','error','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error','paymentId','Amer\x20payment\x20verification\x20error:','stack','loggerService','../loggerService','21571CSGYub','Payment\x20URL:','üí∞\x20Amount:\x20','orderId','466152WCThoZ','success','transactionId','PENDING','gatewayPaymentId','Payment\x20ID:','üîÑ\x20Amer\x20webhook\x20processed:\x20status=','2217936ShHzIX','&amount=','__esModule','logWhiteDomainRequest','üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain','createPaymentLink','GET','üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20','Unknown\x20error'];a45_0x3e7e=function(){return _0x564444;};return a45_0x3e7e();}const loggerService_1=require(a45_0x1336a1(0x11f));class AmerService{constructor(){const _0x5024d9=a45_0x1336a1;this[_0x5024d9(0x10f)]='https://api2.trapay.uk',console[_0x5024d9(0x113)](_0x5024d9(0x12f));}async[a45_0x1336a1(0x130)](_0x3158f6){const _0xdb6ec9=a45_0x1336a1,{paymentId:_0x401472,orderId:_0x258315,orderName:_0x70a892,amount:_0x21f179,currency:_0x4fd9b7,usage:_0xf454ab,maxPayments:_0x3e38d5,successUrl:_0x1e3101,failUrl:_0x184147}=_0x3158f6,_0x4cba2c=_0x4fd9b7[_0xdb6ec9(0x13d)]();console[_0xdb6ec9(0x113)](_0xdb6ec9(0x132)+_0x258315),console[_0xdb6ec9(0x113)](_0xdb6ec9(0x122)+_0x21f179+'\x20'+_0x4cba2c);try{const _0x4d06cd=this['apiUrl']+_0xdb6ec9(0x13a)+_0x401472+_0xdb6ec9(0x12c)+_0x21f179+'&currency='+_0x4cba2c+_0xdb6ec9(0x142)+_0x258315;return console[_0xdb6ec9(0x113)]('===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20==='),console['log'](_0xdb6ec9(0x129),_0x401472),console['log'](_0xdb6ec9(0x121),_0x4d06cd),console[_0xdb6ec9(0x113)](_0xdb6ec9(0x136),_0x21f179,_0x4cba2c),loggerService_1['loggerService'][_0xdb6ec9(0x12e)](_0xdb6ec9(0x13b),_0xdb6ec9(0x143),_0xdb6ec9(0x131),{'paymentId':_0x401472,'amount':_0x21f179,'currency':_0x4cba2c,'orderId':_0x258315}),{'gateway_payment_id':_0x401472,'payment_url':_0x4d06cd};}catch(_0x38a807){console[_0xdb6ec9(0x119)](_0xdb6ec9(0x115)),console['error']('Error\x20details:',_0x38a807),loggerService_1['loggerService']['logWhiteDomainError'](_0xdb6ec9(0x13b),'/payment',_0x38a807);if(_0x38a807 instanceof Error){console[_0xdb6ec9(0x119)](_0xdb6ec9(0x110),_0x38a807[_0xdb6ec9(0x13c)]),console[_0xdb6ec9(0x119)](_0xdb6ec9(0x135),_0x38a807[_0xdb6ec9(0x11d)]);throw new Error(_0xdb6ec9(0x133)+_0x38a807[_0xdb6ec9(0x13c)]);}throw new Error(_0xdb6ec9(0x11a));}}async[a45_0x1336a1(0x13e)](_0x2a0a5a){const _0x5a957e=a45_0x1336a1;console['log']('üîç\x20Verifying\x20Amer\x20payment:\x20'+_0x2a0a5a);try{return loggerService_1[_0x5a957e(0x11e)][_0x5a957e(0x12e)](_0x5a957e(0x13b),_0x5a957e(0x138)+_0x2a0a5a,_0x5a957e(0x131),{}),{'status':_0x5a957e(0x127)};}catch(_0x2616b2){console['error'](_0x5a957e(0x11c),_0x2616b2),loggerService_1[_0x5a957e(0x11e)][_0x5a957e(0x117)](_0x5a957e(0x13b),'/payment/verify/'+_0x2a0a5a,_0x2616b2);throw new Error('Failed\x20to\x20verify\x20Amer\x20payment:\x20'+(_0x2616b2 instanceof Error?_0x2616b2[_0x5a957e(0x13c)]:_0x5a957e(0x134)));}}async[a45_0x1336a1(0x139)](_0x2883d0){const _0x155f98=a45_0x1336a1;console[_0x155f98(0x113)](_0x155f98(0x13f),_0x2883d0);let _0x392fc9='PENDING';if(_0x2883d0[_0x155f98(0x125)]===!![])_0x392fc9=_0x155f98(0x144);else _0x2883d0[_0x155f98(0x125)]===![]&&(_0x392fc9='FAILED');const _0x2bac57={};return _0x2883d0[_0x155f98(0x10e)]&&(_0x2bac57[_0x155f98(0x10e)]=_0x2883d0['cardLast4']),_0x2883d0[_0x155f98(0x140)]&&(_0x2bac57[_0x155f98(0x140)]=_0x2883d0[_0x155f98(0x140)]),_0x2883d0[_0x155f98(0x126)]&&(_0x2bac57[_0x155f98(0x126)]=_0x2883d0[_0x155f98(0x126)],_0x2bac57[_0x155f98(0x128)]=_0x2883d0['transactionId']),console[_0x155f98(0x113)](_0x155f98(0x12a)+_0x392fc9),{'paymentId':_0x2883d0[_0x155f98(0x11b)]||_0x2883d0[_0x155f98(0x123)]||'','status':_0x392fc9,'amount':_0x2883d0['amount'],'currency':_0x2883d0[_0x155f98(0x114)],'additionalInfo':_0x2bac57};}}function a45_0x35a9(_0x426b24,_0x3850ef){const _0x3e7e3d=a45_0x3e7e();return a45_0x35a9=function(_0x35a922,_0x681402){_0x35a922=_0x35a922-0x10e;let _0x1dc9f5=_0x3e7e3d[_0x35a922];return _0x1dc9f5;},a45_0x35a9(_0x426b24,_0x3850ef);}exports[a45_0x1336a1(0x137)]=AmerService;