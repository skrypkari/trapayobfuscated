'use strict';function a51_0x83dd(){const _0x1ff7f8=['https://api2.trapay.uk','logWhiteDomainRequest','orderId','paymentMethod','FAILED','message','üîç\x20Verifying\x20Amer\x20payment:\x20','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20','399600nLxYYA','amount','gatewayPaymentId','90489ZjUOoe','Payment\x20ID:','/payment/verify/','paymentId','===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20===','15xaiPXO','/payment.php?payment_id=','Processing\x20Amer\x20webhook:','cardLast4','125470jIIMAv','loggerService','Error\x20stack:','log','1884270TCegmA','error','üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20','createPaymentLink','PAID','transactionId','AmerService','GET','apiUrl','/payment','469560biewCk','Payment\x20URL:','2242936apQXYn','currency','Amount:','__esModule','Error\x20details:','&amount=','Unknown\x20error','92157cNGnln','Failed\x20to\x20verify\x20Amer\x20payment:\x20','logWhiteDomainError','success','toUpperCase','amer','üîÑ\x20Amer\x20webhook\x20processed:\x20status=','PENDING','Amer\x20payment\x20verification\x20error:'];a51_0x83dd=function(){return _0x1ff7f8;};return a51_0x83dd();}const a51_0x58f19d=a51_0x3281;(function(_0x4b92ee,_0x5e8385){const _0x19a85c=a51_0x3281,_0x5688e5=_0x4b92ee();while(!![]){try{const _0x236c2e=parseInt(_0x19a85c(0xd1))/0x1+-parseInt(_0x19a85c(0xee))/0x2*(parseInt(_0x19a85c(0xea))/0x3)+-parseInt(_0x19a85c(0xe2))/0x4+-parseInt(_0x19a85c(0xfc))/0x5+parseInt(_0x19a85c(0xf2))/0x6+-parseInt(_0x19a85c(0xe5))/0x7+parseInt(_0x19a85c(0xca))/0x8;if(_0x236c2e===_0x5e8385)break;else _0x5688e5['push'](_0x5688e5['shift']());}catch(_0x2ed9ab){_0x5688e5['push'](_0x5688e5['shift']());}}}(a51_0x83dd,0x2890b));function a51_0x3281(_0x55f9fb,_0x4a0f19){_0x55f9fb=_0x55f9fb-0xc9;const _0x83ddf5=a51_0x83dd();let _0x328117=_0x83ddf5[_0x55f9fb];return _0x328117;}Object['defineProperty'](exports,a51_0x58f19d(0xcd),{'value':!![]}),exports['AmerService']=void 0x0;const loggerService_1=require('../loggerService');class AmerService{constructor(){const _0x467260=a51_0x58f19d;this[_0x467260(0xfa)]=_0x467260(0xda),console['log']('üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain');}async[a51_0x58f19d(0xf5)](_0x4541b8){const _0x5bb96b=a51_0x58f19d,{paymentId:_0xeecc99,orderId:_0x43c781,orderName:_0x11c291,amount:_0x506cff,currency:_0x3572c5,usage:_0x17af88,maxPayments:_0x24888b,successUrl:_0x23639a,failUrl:_0x3af3df}=_0x4541b8,_0x2706b2=_0x3572c5[_0x5bb96b(0xd5)]();console[_0x5bb96b(0xf1)](_0x5bb96b(0xf4)+_0x43c781),console[_0x5bb96b(0xf1)]('üí∞\x20Amount:\x20'+_0x506cff+'\x20'+_0x2706b2);try{const _0x1cc12e=this['apiUrl']+_0x5bb96b(0xeb)+_0xeecc99+_0x5bb96b(0xcf)+_0x506cff+'&currency='+_0x2706b2+'&order='+_0x43c781;return console[_0x5bb96b(0xf1)](_0x5bb96b(0xe9)),console[_0x5bb96b(0xf1)](_0x5bb96b(0xe6),_0xeecc99),console[_0x5bb96b(0xf1)](_0x5bb96b(0xc9),_0x1cc12e),console[_0x5bb96b(0xf1)](_0x5bb96b(0xcc),_0x506cff,_0x2706b2),loggerService_1[_0x5bb96b(0xef)][_0x5bb96b(0xdb)]('amer',_0x5bb96b(0xfb),_0x5bb96b(0xf9),{'paymentId':_0xeecc99,'amount':_0x506cff,'currency':_0x2706b2,'orderId':_0x43c781}),{'gateway_payment_id':_0xeecc99,'payment_url':_0x1cc12e};}catch(_0x2de28e){console[_0x5bb96b(0xf3)]('===\x20AMER\x20SERVICE\x20ERROR\x20==='),console['error'](_0x5bb96b(0xce),_0x2de28e),loggerService_1[_0x5bb96b(0xef)]['logWhiteDomainError'](_0x5bb96b(0xd6),_0x5bb96b(0xfb),_0x2de28e);if(_0x2de28e instanceof Error){console[_0x5bb96b(0xf3)]('Error\x20message:',_0x2de28e['message']),console['error'](_0x5bb96b(0xf0),_0x2de28e['stack']);throw new Error(_0x5bb96b(0xe1)+_0x2de28e[_0x5bb96b(0xdf)]);}throw new Error('Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error');}}async['verifyPayment'](_0x332048){const _0x39a389=a51_0x58f19d;console[_0x39a389(0xf1)](_0x39a389(0xe0)+_0x332048);try{return loggerService_1[_0x39a389(0xef)][_0x39a389(0xdb)](_0x39a389(0xd6),_0x39a389(0xe7)+_0x332048,_0x39a389(0xf9),{}),{'status':_0x39a389(0xd8)};}catch(_0x13e0b3){console[_0x39a389(0xf3)](_0x39a389(0xd9),_0x13e0b3),loggerService_1[_0x39a389(0xef)][_0x39a389(0xd3)](_0x39a389(0xd6),_0x39a389(0xe7)+_0x332048,_0x13e0b3);throw new Error(_0x39a389(0xd2)+(_0x13e0b3 instanceof Error?_0x13e0b3[_0x39a389(0xdf)]:_0x39a389(0xd0)));}}async['processWebhook'](_0x5f7ecf){const _0x4f8bab=a51_0x58f19d;console[_0x4f8bab(0xf1)](_0x4f8bab(0xec),_0x5f7ecf);let _0x476c0c=_0x4f8bab(0xd8);if(_0x5f7ecf[_0x4f8bab(0xd4)]===!![])_0x476c0c=_0x4f8bab(0xf6);else _0x5f7ecf['success']===![]&&(_0x476c0c=_0x4f8bab(0xde));const _0x17cf5b={};return _0x5f7ecf['cardLast4']&&(_0x17cf5b[_0x4f8bab(0xed)]=_0x5f7ecf[_0x4f8bab(0xed)]),_0x5f7ecf[_0x4f8bab(0xdd)]&&(_0x17cf5b[_0x4f8bab(0xdd)]=_0x5f7ecf['paymentMethod']),_0x5f7ecf[_0x4f8bab(0xf7)]&&(_0x17cf5b['transactionId']=_0x5f7ecf[_0x4f8bab(0xf7)],_0x17cf5b[_0x4f8bab(0xe4)]=_0x5f7ecf[_0x4f8bab(0xf7)]),console[_0x4f8bab(0xf1)](_0x4f8bab(0xd7)+_0x476c0c),{'paymentId':_0x5f7ecf[_0x4f8bab(0xe8)]||_0x5f7ecf[_0x4f8bab(0xdc)]||'','status':_0x476c0c,'amount':_0x5f7ecf[_0x4f8bab(0xe3)],'currency':_0x5f7ecf[_0x4f8bab(0xcb)],'additionalInfo':_0x17cf5b};}}exports[a51_0x58f19d(0xf8)]=AmerService;