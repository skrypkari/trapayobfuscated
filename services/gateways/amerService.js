'use strict';const a41_0x2e351f=a41_0x76cc;(function(_0x1e7497,_0x57fcb8){const _0x10a1b3=a41_0x76cc,_0x2b9709=_0x1e7497();while(!![]){try{const _0x31d81c=-parseInt(_0x10a1b3(0x166))/0x1+-parseInt(_0x10a1b3(0x154))/0x2*(-parseInt(_0x10a1b3(0x13e))/0x3)+parseInt(_0x10a1b3(0x16f))/0x4+parseInt(_0x10a1b3(0x14e))/0x5+parseInt(_0x10a1b3(0x151))/0x6+-parseInt(_0x10a1b3(0x14c))/0x7+parseInt(_0x10a1b3(0x163))/0x8*(-parseInt(_0x10a1b3(0x140))/0x9);if(_0x31d81c===_0x57fcb8)break;else _0x2b9709['push'](_0x2b9709['shift']());}catch(_0x475437){_0x2b9709['push'](_0x2b9709['shift']());}}}(a41_0x43bf,0xa222c));function a41_0x43bf(){const _0x389ba4=['GET','51312DgYNmW','verifyPayment','&order=','235097rOOLvX','Unknown\x20error','createPaymentLink','amer','üîç\x20Verifying\x20Amer\x20payment:\x20','Error\x20message:','currency','../loggerService','FAILED','3590908BbLfHV','/payment','üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain','logWhiteDomainRequest','toUpperCase','===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20===','/payment/verify/','54ZPJejJ','loggerService','2259OaPOqY','stack','/payment.php?payment_id=','transactionId','defineProperty','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20','log','üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20','amount','Failed\x20to\x20verify\x20Amer\x20payment:\x20','message','orderId','6026622AFFlLn','paymentMethod','4647835gYJosw','success','PENDING','1499958ELoHBh','PAID','apiUrl','143642uMobGg','üí∞\x20Amount:\x20','processWebhook','logWhiteDomainError','AmerService','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error','cardLast4','&amount=','Error\x20stack:','Error\x20details:','Amount:','üîÑ\x20Amer\x20webhook\x20processed:\x20status=','paymentId','error'];a41_0x43bf=function(){return _0x389ba4;};return a41_0x43bf();}Object[a41_0x2e351f(0x144)](exports,'__esModule',{'value':!![]}),exports[a41_0x2e351f(0x158)]=void 0x0;const loggerService_1=require(a41_0x2e351f(0x16d));class AmerService{constructor(){const _0x11a9d3=a41_0x2e351f;this[_0x11a9d3(0x153)]='https://api2.trapay.uk',console[_0x11a9d3(0x146)](_0x11a9d3(0x171));}async[a41_0x2e351f(0x168)](_0x4de5cf){const _0x194015=a41_0x2e351f,{paymentId:_0x39909d,orderId:_0xd5ff24,orderName:_0x391986,amount:_0x3e7271,currency:_0xd29fcf,usage:_0x10703d,maxPayments:_0x196133,successUrl:_0x240642,failUrl:_0x1f0e6d}=_0x4de5cf,_0x387fee=_0xd29fcf[_0x194015(0x173)]();console[_0x194015(0x146)](_0x194015(0x147)+_0xd5ff24),console['log'](_0x194015(0x155)+_0x3e7271+'\x20'+_0x387fee);try{const _0x40a554=this['apiUrl']+_0x194015(0x142)+_0x39909d+_0x194015(0x15b)+_0x3e7271+'&currency='+_0x387fee+_0x194015(0x165)+_0xd5ff24;return console['log'](_0x194015(0x13c)),console['log']('Payment\x20ID:',_0x39909d),console[_0x194015(0x146)]('Payment\x20URL:',_0x40a554),console[_0x194015(0x146)](_0x194015(0x15e),_0x3e7271,_0x387fee),loggerService_1[_0x194015(0x13f)][_0x194015(0x172)]('amer',_0x194015(0x170),_0x194015(0x162),{'paymentId':_0x39909d,'amount':_0x3e7271,'currency':_0x387fee,'orderId':_0xd5ff24}),{'gateway_payment_id':_0x39909d,'payment_url':_0x40a554};}catch(_0x4b93f3){console[_0x194015(0x161)]('===\x20AMER\x20SERVICE\x20ERROR\x20==='),console[_0x194015(0x161)](_0x194015(0x15d),_0x4b93f3),loggerService_1[_0x194015(0x13f)][_0x194015(0x157)](_0x194015(0x169),_0x194015(0x170),_0x4b93f3);if(_0x4b93f3 instanceof Error){console['error'](_0x194015(0x16b),_0x4b93f3[_0x194015(0x14a)]),console['error'](_0x194015(0x15c),_0x4b93f3[_0x194015(0x141)]);throw new Error(_0x194015(0x145)+_0x4b93f3[_0x194015(0x14a)]);}throw new Error(_0x194015(0x159));}}async[a41_0x2e351f(0x164)](_0x2b211d){const _0x3fa182=a41_0x2e351f;console[_0x3fa182(0x146)](_0x3fa182(0x16a)+_0x2b211d);try{return loggerService_1[_0x3fa182(0x13f)]['logWhiteDomainRequest'](_0x3fa182(0x169),'/payment/verify/'+_0x2b211d,_0x3fa182(0x162),{}),{'status':_0x3fa182(0x150)};}catch(_0x438316){console[_0x3fa182(0x161)]('Amer\x20payment\x20verification\x20error:',_0x438316),loggerService_1['loggerService'][_0x3fa182(0x157)](_0x3fa182(0x169),_0x3fa182(0x13d)+_0x2b211d,_0x438316);throw new Error(_0x3fa182(0x149)+(_0x438316 instanceof Error?_0x438316['message']:_0x3fa182(0x167)));}}async[a41_0x2e351f(0x156)](_0xf573f1){const _0x2ba18e=a41_0x2e351f;console['log']('Processing\x20Amer\x20webhook:',_0xf573f1);let _0x4e4e11=_0x2ba18e(0x150);if(_0xf573f1[_0x2ba18e(0x14f)]===!![])_0x4e4e11=_0x2ba18e(0x152);else _0xf573f1[_0x2ba18e(0x14f)]===![]&&(_0x4e4e11=_0x2ba18e(0x16e));const _0x47fb96={};return _0xf573f1[_0x2ba18e(0x15a)]&&(_0x47fb96['cardLast4']=_0xf573f1[_0x2ba18e(0x15a)]),_0xf573f1[_0x2ba18e(0x14d)]&&(_0x47fb96[_0x2ba18e(0x14d)]=_0xf573f1[_0x2ba18e(0x14d)]),_0xf573f1[_0x2ba18e(0x143)]&&(_0x47fb96[_0x2ba18e(0x143)]=_0xf573f1[_0x2ba18e(0x143)],_0x47fb96['gatewayPaymentId']=_0xf573f1[_0x2ba18e(0x143)]),console[_0x2ba18e(0x146)](_0x2ba18e(0x15f)+_0x4e4e11),{'paymentId':_0xf573f1[_0x2ba18e(0x160)]||_0xf573f1[_0x2ba18e(0x14b)]||'','status':_0x4e4e11,'amount':_0xf573f1[_0x2ba18e(0x148)],'currency':_0xf573f1[_0x2ba18e(0x16c)],'additionalInfo':_0x47fb96};}}function a41_0x76cc(_0x14f1e4,_0x2696d3){const _0x43bf47=a41_0x43bf();return a41_0x76cc=function(_0x76cc0c,_0xd7b8d6){_0x76cc0c=_0x76cc0c-0x13c;let _0x14564f=_0x43bf47[_0x76cc0c];return _0x14564f;},a41_0x76cc(_0x14f1e4,_0x2696d3);}exports[a41_0x2e351f(0x158)]=AmerService;