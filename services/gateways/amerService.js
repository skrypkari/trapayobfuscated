'use strict';const a41_0x1667fd=a41_0x125f;(function(_0xe296d0,_0x3ad0e4){const _0x185f75=a41_0x125f,_0x4abb99=_0xe296d0();while(!![]){try{const _0xccbbb2=parseInt(_0x185f75(0x10a))/0x1+parseInt(_0x185f75(0xee))/0x2+parseInt(_0x185f75(0x11a))/0x3*(parseInt(_0x185f75(0x114))/0x4)+parseInt(_0x185f75(0xf4))/0x5+-parseInt(_0x185f75(0x11e))/0x6*(-parseInt(_0x185f75(0x122))/0x7)+-parseInt(_0x185f75(0x112))/0x8*(parseInt(_0x185f75(0xed))/0x9)+-parseInt(_0x185f75(0x110))/0xa;if(_0xccbbb2===_0x3ad0e4)break;else _0x4abb99['push'](_0x4abb99['shift']());}catch(_0x1d83bc){_0x4abb99['push'](_0x4abb99['shift']());}}}(a41_0x1663,0xd1de0));function a41_0x125f(_0x37e1e3,_0x20fa9b){const _0x16634d=a41_0x1663();return a41_0x125f=function(_0x125f4e,_0xc6d892){_0x125f4e=_0x125f4e-0xed;let _0x52b465=_0x16634d[_0x125f4e];return _0x52b465;},a41_0x125f(_0x37e1e3,_0x20fa9b);}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a41_0x1667fd(0xfb)]=void 0x0;const loggerService_1=require(a41_0x1667fd(0x10b));function a41_0x1663(){const _0x35deb3=['Unknown\x20error','üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain','FAILED','Payment\x20URL:','PAID','PENDING','üîç\x20Verifying\x20Amer\x20payment:\x20','&order=','GET','1324821lsPMjD','../loggerService','Processing\x20Amer\x20webhook:','üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20','createPaymentLink','amer','31313070yIxvUy','Error\x20stack:','10902448BXnEUy','success','671364eeZwdQ','paymentId','amount','currency','Amount:','logWhiteDomainRequest','6OFXNLY','gatewayPaymentId','log','Error\x20message:','3524058GqzNln','üí∞\x20Amount:\x20','Failed\x20to\x20verify\x20Amer\x20payment:\x20','apiUrl','14IdUXcz','transactionId','cardLast4','processWebhook','9ctEoqW','2168644HtnKWS','&currency=','üîÑ\x20Amer\x20webhook\x20processed:\x20status=','paymentMethod','stack','Payment\x20ID:','7171090VVRgro','loggerService','Amer\x20payment\x20verification\x20error:','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error','/payment/verify/','message','toUpperCase','AmerService','https://api2.trapay.uk','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20','/payment','error','===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20==='];a41_0x1663=function(){return _0x35deb3;};return a41_0x1663();}class AmerService{constructor(){const _0x34be21=a41_0x1667fd;this[_0x34be21(0x121)]=_0x34be21(0xfc),console[_0x34be21(0x11c)](_0x34be21(0x102));}async[a41_0x1667fd(0x10e)](_0x1647d7){const _0x21f4ed=a41_0x1667fd,{paymentId:_0x459b66,orderId:_0x13dbbf,orderName:_0x164f34,amount:_0x55e8a7,currency:_0x195f1a,usage:_0x345606,maxPayments:_0x36c50c,successUrl:_0x5225f8,failUrl:_0x1cab00}=_0x1647d7,_0x12b202=_0x195f1a[_0x21f4ed(0xfa)]();console[_0x21f4ed(0x11c)](_0x21f4ed(0x10d)+_0x13dbbf),console['log'](_0x21f4ed(0x11f)+_0x55e8a7+'\x20'+_0x12b202);try{const _0x3c198e=this[_0x21f4ed(0x121)]+'/payment.php?payment_id='+_0x459b66+'&amount='+_0x55e8a7+_0x21f4ed(0xef)+_0x12b202+_0x21f4ed(0x108)+_0x13dbbf;return console[_0x21f4ed(0x11c)](_0x21f4ed(0x100)),console[_0x21f4ed(0x11c)](_0x21f4ed(0xf3),_0x459b66),console['log'](_0x21f4ed(0x104),_0x3c198e),console['log'](_0x21f4ed(0x118),_0x55e8a7,_0x12b202),loggerService_1[_0x21f4ed(0xf5)][_0x21f4ed(0x119)](_0x21f4ed(0x10f),'/payment',_0x21f4ed(0x109),{'paymentId':_0x459b66,'amount':_0x55e8a7,'currency':_0x12b202,'orderId':_0x13dbbf}),{'gateway_payment_id':_0x459b66,'payment_url':_0x3c198e};}catch(_0x2b3b30){console[_0x21f4ed(0xff)]('===\x20AMER\x20SERVICE\x20ERROR\x20==='),console[_0x21f4ed(0xff)]('Error\x20details:',_0x2b3b30),loggerService_1[_0x21f4ed(0xf5)]['logWhiteDomainError']('amer',_0x21f4ed(0xfe),_0x2b3b30);if(_0x2b3b30 instanceof Error){console[_0x21f4ed(0xff)](_0x21f4ed(0x11d),_0x2b3b30[_0x21f4ed(0xf9)]),console['error'](_0x21f4ed(0x111),_0x2b3b30[_0x21f4ed(0xf2)]);throw new Error(_0x21f4ed(0xfd)+_0x2b3b30['message']);}throw new Error(_0x21f4ed(0xf7));}}async['verifyPayment'](_0x1686e6){const _0x543def=a41_0x1667fd;console[_0x543def(0x11c)](_0x543def(0x107)+_0x1686e6);try{return loggerService_1[_0x543def(0xf5)]['logWhiteDomainRequest'](_0x543def(0x10f),_0x543def(0xf8)+_0x1686e6,_0x543def(0x109),{}),{'status':_0x543def(0x106)};}catch(_0x5e98e0){console[_0x543def(0xff)](_0x543def(0xf6),_0x5e98e0),loggerService_1[_0x543def(0xf5)]['logWhiteDomainError'](_0x543def(0x10f),_0x543def(0xf8)+_0x1686e6,_0x5e98e0);throw new Error(_0x543def(0x120)+(_0x5e98e0 instanceof Error?_0x5e98e0[_0x543def(0xf9)]:_0x543def(0x101)));}}async[a41_0x1667fd(0x125)](_0x45c684){const _0x57c7e6=a41_0x1667fd;console['log'](_0x57c7e6(0x10c),_0x45c684);let _0x105b56=_0x57c7e6(0x106);if(_0x45c684[_0x57c7e6(0x113)]===!![])_0x105b56=_0x57c7e6(0x105);else _0x45c684[_0x57c7e6(0x113)]===![]&&(_0x105b56=_0x57c7e6(0x103));const _0x40c633={};return _0x45c684['cardLast4']&&(_0x40c633[_0x57c7e6(0x124)]=_0x45c684[_0x57c7e6(0x124)]),_0x45c684['paymentMethod']&&(_0x40c633[_0x57c7e6(0xf1)]=_0x45c684[_0x57c7e6(0xf1)]),_0x45c684[_0x57c7e6(0x123)]&&(_0x40c633[_0x57c7e6(0x123)]=_0x45c684['transactionId'],_0x40c633[_0x57c7e6(0x11b)]=_0x45c684[_0x57c7e6(0x123)]),console[_0x57c7e6(0x11c)](_0x57c7e6(0xf0)+_0x105b56),{'paymentId':_0x45c684[_0x57c7e6(0x115)]||_0x45c684['orderId']||'','status':_0x105b56,'amount':_0x45c684[_0x57c7e6(0x116)],'currency':_0x45c684[_0x57c7e6(0x117)],'additionalInfo':_0x40c633};}}exports['AmerService']=AmerService;