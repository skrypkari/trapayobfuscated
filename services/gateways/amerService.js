'use strict';const a61_0xd75cfd=a61_0x5f58;function a61_0x1daf(){const _0x3396de=['/payment','2GvVOnd','toUpperCase','üîÑ\x20Amer\x20webhook\x20processed:\x20status=','üí∞\x20Amount:\x20','message','stack','createPaymentLink','GET','loggerService','amer','Amer\x20payment\x20verification\x20error:','PENDING','paymentId','üîç\x20Verifying\x20Amer\x20payment:\x20','2250522FopBqE','success','Unknown\x20error','defineProperty','processWebhook','FAILED','/payment.php?payment_id=','2934200SguLSf','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error','üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20','orderId','paymentMethod','https://api2.trapay.uk','&currency=','3604377kLClFE','apiUrl','AmerService','üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain','logWhiteDomainError','/payment/verify/','__esModule','cardLast4','error','transactionId','log','552826wmwEFL','Payment\x20ID:','PAID','3014872GegNyA','Error\x20details:','amount','../loggerService','3066060GnQWoQ','logWhiteDomainRequest','Amount:','10899342eCXKNh','Error\x20message:','===\x20AMER\x20SERVICE\x20ERROR\x20===','8wUhSJq'];a61_0x1daf=function(){return _0x3396de;};return a61_0x1daf();}(function(_0x752c8b,_0x2dea83){const _0x5bca57=a61_0x5f58,_0x560fb6=_0x752c8b();while(!![]){try{const _0x3644cd=parseInt(_0x5bca57(0x172))/0x1*(-parseInt(_0x5bca57(0x163))/0x2)+parseInt(_0x5bca57(0x14a))/0x3+parseInt(_0x5bca57(0x166))/0x4+-parseInt(_0x5bca57(0x151))/0x5+-parseInt(_0x5bca57(0x16a))/0x6+-parseInt(_0x5bca57(0x158))/0x7+-parseInt(_0x5bca57(0x170))/0x8*(-parseInt(_0x5bca57(0x16d))/0x9);if(_0x3644cd===_0x2dea83)break;else _0x560fb6['push'](_0x560fb6['shift']());}catch(_0x36daeb){_0x560fb6['push'](_0x560fb6['shift']());}}}(a61_0x1daf,0x861df));Object[a61_0xd75cfd(0x14d)](exports,a61_0xd75cfd(0x15e),{'value':!![]}),exports[a61_0xd75cfd(0x15a)]=void 0x0;const loggerService_1=require(a61_0xd75cfd(0x169));function a61_0x5f58(_0x5ff723,_0x48cbd0){_0x5ff723=_0x5ff723-0x142;const _0x1daf75=a61_0x1daf();let _0x5f5869=_0x1daf75[_0x5ff723];return _0x5f5869;}class AmerService{constructor(){const _0x52c7a5=a61_0xd75cfd;this[_0x52c7a5(0x159)]=_0x52c7a5(0x156),console[_0x52c7a5(0x162)](_0x52c7a5(0x15b));}async[a61_0xd75cfd(0x142)](_0x31b253){const _0x4fd7e7=a61_0xd75cfd,{paymentId:_0xec0c11,orderId:_0x50efc8,orderName:_0x254d39,amount:_0x445441,currency:_0xad151e,usage:_0x2314ea,maxPayments:_0xabb5ea,successUrl:_0x598f99,failUrl:_0x5b922b}=_0x31b253,_0x582696=_0xad151e[_0x4fd7e7(0x173)]();console[_0x4fd7e7(0x162)](_0x4fd7e7(0x153)+_0x50efc8),console['log'](_0x4fd7e7(0x175)+_0x445441+'\x20'+_0x582696);try{const _0x472291=this[_0x4fd7e7(0x159)]+_0x4fd7e7(0x150)+_0xec0c11+'&amount='+_0x445441+_0x4fd7e7(0x157)+_0x582696+'&order='+_0x50efc8;return console['log']('===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20==='),console[_0x4fd7e7(0x162)](_0x4fd7e7(0x164),_0xec0c11),console[_0x4fd7e7(0x162)]('Payment\x20URL:',_0x472291),console['log'](_0x4fd7e7(0x16c),_0x445441,_0x582696),loggerService_1['loggerService'][_0x4fd7e7(0x16b)](_0x4fd7e7(0x145),_0x4fd7e7(0x171),_0x4fd7e7(0x143),{'paymentId':_0xec0c11,'amount':_0x445441,'currency':_0x582696,'orderId':_0x50efc8}),{'gateway_payment_id':_0xec0c11,'payment_url':_0x472291};}catch(_0x8e6a9a){console['error'](_0x4fd7e7(0x16f)),console[_0x4fd7e7(0x160)](_0x4fd7e7(0x167),_0x8e6a9a),loggerService_1['loggerService']['logWhiteDomainError'](_0x4fd7e7(0x145),_0x4fd7e7(0x171),_0x8e6a9a);if(_0x8e6a9a instanceof Error){console['error'](_0x4fd7e7(0x16e),_0x8e6a9a[_0x4fd7e7(0x176)]),console['error']('Error\x20stack:',_0x8e6a9a[_0x4fd7e7(0x177)]);throw new Error('Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20'+_0x8e6a9a['message']);}throw new Error(_0x4fd7e7(0x152));}}async['verifyPayment'](_0xc04a96){const _0x44be1d=a61_0xd75cfd;console[_0x44be1d(0x162)](_0x44be1d(0x149)+_0xc04a96);try{return loggerService_1['loggerService'][_0x44be1d(0x16b)](_0x44be1d(0x145),_0x44be1d(0x15d)+_0xc04a96,_0x44be1d(0x143),{}),{'status':'PENDING'};}catch(_0x48b708){console[_0x44be1d(0x160)](_0x44be1d(0x146),_0x48b708),loggerService_1[_0x44be1d(0x144)][_0x44be1d(0x15c)](_0x44be1d(0x145),_0x44be1d(0x15d)+_0xc04a96,_0x48b708);throw new Error('Failed\x20to\x20verify\x20Amer\x20payment:\x20'+(_0x48b708 instanceof Error?_0x48b708[_0x44be1d(0x176)]:_0x44be1d(0x14c)));}}async[a61_0xd75cfd(0x14e)](_0x1d6f76){const _0x1a4505=a61_0xd75cfd;console[_0x1a4505(0x162)]('Processing\x20Amer\x20webhook:',_0x1d6f76);let _0x5fb077=_0x1a4505(0x147);if(_0x1d6f76[_0x1a4505(0x14b)]===!![])_0x5fb077=_0x1a4505(0x165);else _0x1d6f76[_0x1a4505(0x14b)]===![]&&(_0x5fb077=_0x1a4505(0x14f));const _0x446b27={};return _0x1d6f76['cardLast4']&&(_0x446b27[_0x1a4505(0x15f)]=_0x1d6f76['cardLast4']),_0x1d6f76[_0x1a4505(0x155)]&&(_0x446b27[_0x1a4505(0x155)]=_0x1d6f76['paymentMethod']),_0x1d6f76['transactionId']&&(_0x446b27[_0x1a4505(0x161)]=_0x1d6f76['transactionId'],_0x446b27['gatewayPaymentId']=_0x1d6f76[_0x1a4505(0x161)]),console[_0x1a4505(0x162)](_0x1a4505(0x174)+_0x5fb077),{'paymentId':_0x1d6f76[_0x1a4505(0x148)]||_0x1d6f76[_0x1a4505(0x154)]||'','status':_0x5fb077,'amount':_0x1d6f76[_0x1a4505(0x168)],'currency':_0x1d6f76['currency'],'additionalInfo':_0x446b27};}}exports[a61_0xd75cfd(0x15a)]=AmerService;