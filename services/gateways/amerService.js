'use strict';function a43_0x2c49(_0x2d3838,_0x2aac1e){const _0x16432c=a43_0x1643();return a43_0x2c49=function(_0x2c49a6,_0x1f75b3){_0x2c49a6=_0x2c49a6-0xc0;let _0x49ad9e=_0x16432c[_0x2c49a6];return _0x49ad9e;},a43_0x2c49(_0x2d3838,_0x2aac1e);}const a43_0x435f44=a43_0x2c49;function a43_0x1643(){const _0x4ac4b3=['createPaymentLink','paymentMethod','8333592SKdPur','üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20','Amer\x20payment\x20verification\x20error:','transactionId','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20','message','8415008uVmJmD','21438243fLJEsT','249jvYuGz','===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20===','currency','logWhiteDomainRequest','loggerService','amer','/payment/verify/','defineProperty','/payment.php?payment_id=','log','AmerService','success','Payment\x20URL:','https://api2.trapay.uk','1351823eDwunJ','Unknown\x20error','PAID','7060sVEDen','../loggerService','error','Payment\x20ID:','üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain','35130EFRLVp','3816ZhrJxo','Amount:','&amount=','8682086AiWkde','logWhiteDomainError','cardLast4','GET','orderId','/payment','Error\x20stack:','Error\x20message:','üí∞\x20Amount:\x20','PENDING','__esModule','stack','üîç\x20Verifying\x20Amer\x20payment:\x20','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error'];a43_0x1643=function(){return _0x4ac4b3;};return a43_0x1643();}(function(_0x2f293d,_0x3757b2){const _0x58d978=a43_0x2c49,_0x7ebe8a=_0x2f293d();while(!![]){try{const _0x57c5eb=parseInt(_0x58d978(0xde))/0x1+-parseInt(_0x58d978(0xe6))/0x2*(-parseInt(_0x58d978(0xd0))/0x3)+-parseInt(_0x58d978(0xe7))/0x4*(-parseInt(_0x58d978(0xe1))/0x5)+parseInt(_0x58d978(0xc8))/0x6+-parseInt(_0x58d978(0xea))/0x7+-parseInt(_0x58d978(0xce))/0x8+-parseInt(_0x58d978(0xcf))/0x9;if(_0x57c5eb===_0x3757b2)break;else _0x7ebe8a['push'](_0x7ebe8a['shift']());}catch(_0x35c8b6){_0x7ebe8a['push'](_0x7ebe8a['shift']());}}}(a43_0x1643,0xd4c49));Object[a43_0x435f44(0xd7)](exports,a43_0x435f44(0xc2),{'value':!![]}),exports[a43_0x435f44(0xda)]=void 0x0;const loggerService_1=require(a43_0x435f44(0xe2));class AmerService{constructor(){const _0x5480a4=a43_0x435f44;this['apiUrl']=_0x5480a4(0xdd),console[_0x5480a4(0xd9)](_0x5480a4(0xe5));}async[a43_0x435f44(0xc6)](_0x5e631c){const _0x227043=a43_0x435f44,{paymentId:_0x243852,orderId:_0x2a05f4,orderName:_0x305e12,amount:_0x5aa7e7,currency:_0x392aa8,usage:_0x11058a,maxPayments:_0x57df37,successUrl:_0x427ff4,failUrl:_0x576f97}=_0x5e631c,_0x26b9d5=_0x392aa8['toUpperCase']();console[_0x227043(0xd9)](_0x227043(0xc9)+_0x2a05f4),console[_0x227043(0xd9)](_0x227043(0xc0)+_0x5aa7e7+'\x20'+_0x26b9d5);try{const _0x4c6c89=this['apiUrl']+_0x227043(0xd8)+_0x243852+_0x227043(0xe9)+_0x5aa7e7+'&currency='+_0x26b9d5+'&order='+_0x2a05f4;return console[_0x227043(0xd9)](_0x227043(0xd1)),console[_0x227043(0xd9)](_0x227043(0xe4),_0x243852),console[_0x227043(0xd9)](_0x227043(0xdc),_0x4c6c89),console[_0x227043(0xd9)](_0x227043(0xe8),_0x5aa7e7,_0x26b9d5),loggerService_1[_0x227043(0xd4)][_0x227043(0xd3)](_0x227043(0xd5),_0x227043(0xef),'GET',{'paymentId':_0x243852,'amount':_0x5aa7e7,'currency':_0x26b9d5,'orderId':_0x2a05f4}),{'gateway_payment_id':_0x243852,'payment_url':_0x4c6c89};}catch(_0x6a63a9){console['error']('===\x20AMER\x20SERVICE\x20ERROR\x20==='),console[_0x227043(0xe3)]('Error\x20details:',_0x6a63a9),loggerService_1['loggerService'][_0x227043(0xeb)](_0x227043(0xd5),_0x227043(0xef),_0x6a63a9);if(_0x6a63a9 instanceof Error){console[_0x227043(0xe3)](_0x227043(0xf1),_0x6a63a9[_0x227043(0xcd)]),console[_0x227043(0xe3)](_0x227043(0xf0),_0x6a63a9[_0x227043(0xc3)]);throw new Error(_0x227043(0xcc)+_0x6a63a9[_0x227043(0xcd)]);}throw new Error(_0x227043(0xc5));}}async['verifyPayment'](_0x166da3){const _0x51e039=a43_0x435f44;console[_0x51e039(0xd9)](_0x51e039(0xc4)+_0x166da3);try{return loggerService_1[_0x51e039(0xd4)][_0x51e039(0xd3)](_0x51e039(0xd5),_0x51e039(0xd6)+_0x166da3,_0x51e039(0xed),{}),{'status':_0x51e039(0xc1)};}catch(_0x37e55b){console[_0x51e039(0xe3)](_0x51e039(0xca),_0x37e55b),loggerService_1[_0x51e039(0xd4)][_0x51e039(0xeb)](_0x51e039(0xd5),'/payment/verify/'+_0x166da3,_0x37e55b);throw new Error('Failed\x20to\x20verify\x20Amer\x20payment:\x20'+(_0x37e55b instanceof Error?_0x37e55b[_0x51e039(0xcd)]:_0x51e039(0xdf)));}}async['processWebhook'](_0x24bb87){const _0x1fc9bd=a43_0x435f44;console[_0x1fc9bd(0xd9)]('Processing\x20Amer\x20webhook:',_0x24bb87);let _0x1ce8e4=_0x1fc9bd(0xc1);if(_0x24bb87['success']===!![])_0x1ce8e4=_0x1fc9bd(0xe0);else _0x24bb87[_0x1fc9bd(0xdb)]===![]&&(_0x1ce8e4='FAILED');const _0x3093c0={};return _0x24bb87[_0x1fc9bd(0xec)]&&(_0x3093c0[_0x1fc9bd(0xec)]=_0x24bb87['cardLast4']),_0x24bb87[_0x1fc9bd(0xc7)]&&(_0x3093c0[_0x1fc9bd(0xc7)]=_0x24bb87['paymentMethod']),_0x24bb87[_0x1fc9bd(0xcb)]&&(_0x3093c0['transactionId']=_0x24bb87['transactionId'],_0x3093c0['gatewayPaymentId']=_0x24bb87[_0x1fc9bd(0xcb)]),console['log']('üîÑ\x20Amer\x20webhook\x20processed:\x20status='+_0x1ce8e4),{'paymentId':_0x24bb87['paymentId']||_0x24bb87[_0x1fc9bd(0xee)]||'','status':_0x1ce8e4,'amount':_0x24bb87['amount'],'currency':_0x24bb87[_0x1fc9bd(0xd2)],'additionalInfo':_0x3093c0};}}exports['AmerService']=AmerService;