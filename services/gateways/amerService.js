'use strict';const a45_0x12aedb=a45_0x404c;function a45_0x404c(_0xaf3332,_0x5853e9){const _0x594d49=a45_0x594d();return a45_0x404c=function(_0x404cf3,_0x35068c){_0x404cf3=_0x404cf3-0xab;let _0x1e3e18=_0x594d49[_0x404cf3];return _0x1e3e18;},a45_0x404c(_0xaf3332,_0x5853e9);}(function(_0x33efa1,_0x1e530d){const _0x45c18b=a45_0x404c,_0x5a21e8=_0x33efa1();while(!![]){try{const _0xfd753d=-parseInt(_0x45c18b(0xc0))/0x1*(-parseInt(_0x45c18b(0xbe))/0x2)+-parseInt(_0x45c18b(0xbb))/0x3+parseInt(_0x45c18b(0xd7))/0x4*(parseInt(_0x45c18b(0xb5))/0x5)+-parseInt(_0x45c18b(0xd4))/0x6+parseInt(_0x45c18b(0xde))/0x7+-parseInt(_0x45c18b(0xbf))/0x8*(-parseInt(_0x45c18b(0xd5))/0x9)+parseInt(_0x45c18b(0xdf))/0xa*(-parseInt(_0x45c18b(0xb7))/0xb);if(_0xfd753d===_0x1e530d)break;else _0x5a21e8['push'](_0x5a21e8['shift']());}catch(_0x2cb6b7){_0x5a21e8['push'](_0x5a21e8['shift']());}}}(a45_0x594d,0xbf1be));function a45_0x594d(){const _0x26e981=['Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20','986064DJVmoH','9bEbeop','https://api2.trapay.uk','110996zunNwv','verifyPayment','üîç\x20Verifying\x20Amer\x20payment:\x20','Payment\x20URL:','currency','&order=','log','6127485SIykYA','132670xxOqXz','paymentMethod','Processing\x20Amer\x20webhook:','Error\x20stack:','&currency=','toUpperCase','cardLast4','orderId','success','defineProperty','PENDING','loggerService','transactionId','215ppqfDn','üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain','1353veaXEt','paymentId','üí∞\x20Amount:\x20','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error','3806424CfSbtE','error','../loggerService','476mVrrdL','5878952KVTSmt','4388hhpsKQ','Amount:','GET','PAID','AmerService','logWhiteDomainRequest','amer','&amount=','logWhiteDomainError','/payment.php?payment_id=','Failed\x20to\x20verify\x20Amer\x20payment:\x20','Payment\x20ID:','Error\x20details:','message','üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20','Unknown\x20error','===\x20AMER\x20SERVICE\x20ERROR\x20===','/payment/verify/','apiUrl'];a45_0x594d=function(){return _0x26e981;};return a45_0x594d();}Object[a45_0x12aedb(0xb1)](exports,'__esModule',{'value':!![]}),exports['AmerService']=void 0x0;const loggerService_1=require(a45_0x12aedb(0xbd));class AmerService{constructor(){const _0x5afe33=a45_0x12aedb;this[_0x5afe33(0xd2)]=_0x5afe33(0xd6),console[_0x5afe33(0xdd)](_0x5afe33(0xb6));}async['createPaymentLink'](_0xe63c25){const _0xb32144=a45_0x12aedb,{paymentId:_0x554d52,orderId:_0x3234ea,orderName:_0x21ca9c,amount:_0x56cfa7,currency:_0x37c56e,usage:_0x3ba76f,maxPayments:_0x135cea,successUrl:_0x3526f4,failUrl:_0x3a8838}=_0xe63c25,_0x55647f=_0x37c56e[_0xb32144(0xad)]();console[_0xb32144(0xdd)](_0xb32144(0xce)+_0x3234ea),console[_0xb32144(0xdd)](_0xb32144(0xb9)+_0x56cfa7+'\x20'+_0x55647f);try{const _0x5bdb40=this[_0xb32144(0xd2)]+_0xb32144(0xc9)+_0x554d52+_0xb32144(0xc7)+_0x56cfa7+_0xb32144(0xac)+_0x55647f+_0xb32144(0xdc)+_0x3234ea;return console[_0xb32144(0xdd)]('===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20==='),console[_0xb32144(0xdd)](_0xb32144(0xcb),_0x554d52),console[_0xb32144(0xdd)](_0xb32144(0xda),_0x5bdb40),console[_0xb32144(0xdd)](_0xb32144(0xc1),_0x56cfa7,_0x55647f),loggerService_1[_0xb32144(0xb3)][_0xb32144(0xc5)]('amer','/payment',_0xb32144(0xc2),{'paymentId':_0x554d52,'amount':_0x56cfa7,'currency':_0x55647f,'orderId':_0x3234ea}),{'gateway_payment_id':_0x554d52,'payment_url':_0x5bdb40};}catch(_0x5ca37d){console[_0xb32144(0xbc)](_0xb32144(0xd0)),console[_0xb32144(0xbc)](_0xb32144(0xcc),_0x5ca37d),loggerService_1[_0xb32144(0xb3)][_0xb32144(0xc8)](_0xb32144(0xc6),'/payment',_0x5ca37d);if(_0x5ca37d instanceof Error){console['error']('Error\x20message:',_0x5ca37d['message']),console[_0xb32144(0xbc)](_0xb32144(0xab),_0x5ca37d['stack']);throw new Error(_0xb32144(0xd3)+_0x5ca37d[_0xb32144(0xcd)]);}throw new Error(_0xb32144(0xba));}}async[a45_0x12aedb(0xd8)](_0x5abaa9){const _0x68ae8a=a45_0x12aedb;console['log'](_0x68ae8a(0xd9)+_0x5abaa9);try{return loggerService_1[_0x68ae8a(0xb3)]['logWhiteDomainRequest'](_0x68ae8a(0xc6),_0x68ae8a(0xd1)+_0x5abaa9,_0x68ae8a(0xc2),{}),{'status':'PENDING'};}catch(_0x1ca024){console[_0x68ae8a(0xbc)]('Amer\x20payment\x20verification\x20error:',_0x1ca024),loggerService_1[_0x68ae8a(0xb3)][_0x68ae8a(0xc8)](_0x68ae8a(0xc6),'/payment/verify/'+_0x5abaa9,_0x1ca024);throw new Error(_0x68ae8a(0xca)+(_0x1ca024 instanceof Error?_0x1ca024[_0x68ae8a(0xcd)]:_0x68ae8a(0xcf)));}}async['processWebhook'](_0xbd2fbc){const _0x303e8d=a45_0x12aedb;console[_0x303e8d(0xdd)](_0x303e8d(0xe1),_0xbd2fbc);let _0x178f9a=_0x303e8d(0xb2);if(_0xbd2fbc[_0x303e8d(0xb0)]===!![])_0x178f9a=_0x303e8d(0xc3);else _0xbd2fbc['success']===![]&&(_0x178f9a='FAILED');const _0x1d9e8b={};return _0xbd2fbc[_0x303e8d(0xae)]&&(_0x1d9e8b[_0x303e8d(0xae)]=_0xbd2fbc[_0x303e8d(0xae)]),_0xbd2fbc['paymentMethod']&&(_0x1d9e8b['paymentMethod']=_0xbd2fbc[_0x303e8d(0xe0)]),_0xbd2fbc[_0x303e8d(0xb4)]&&(_0x1d9e8b[_0x303e8d(0xb4)]=_0xbd2fbc[_0x303e8d(0xb4)],_0x1d9e8b['gatewayPaymentId']=_0xbd2fbc[_0x303e8d(0xb4)]),console[_0x303e8d(0xdd)]('üîÑ\x20Amer\x20webhook\x20processed:\x20status='+_0x178f9a),{'paymentId':_0xbd2fbc[_0x303e8d(0xb8)]||_0xbd2fbc[_0x303e8d(0xaf)]||'','status':_0x178f9a,'amount':_0xbd2fbc['amount'],'currency':_0xbd2fbc[_0x303e8d(0xdb)],'additionalInfo':_0x1d9e8b};}}exports[a45_0x12aedb(0xc4)]=AmerService;