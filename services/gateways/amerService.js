'use strict';function a41_0x2ba8(_0x3e8ec3,_0x2657b4){const _0x2d269d=a41_0x2d26();return a41_0x2ba8=function(_0x2ba828,_0x385889){_0x2ba828=_0x2ba828-0x144;let _0x2dbad1=_0x2d269d[_0x2ba828];return _0x2dbad1;},a41_0x2ba8(_0x3e8ec3,_0x2657b4);}const a41_0x59f8cf=a41_0x2ba8;(function(_0x52576e,_0x2ca1fe){const _0x4136c6=a41_0x2ba8,_0x38f7cd=_0x52576e();while(!![]){try{const _0x509139=parseInt(_0x4136c6(0x153))/0x1+-parseInt(_0x4136c6(0x146))/0x2*(-parseInt(_0x4136c6(0x16d))/0x3)+parseInt(_0x4136c6(0x166))/0x4*(parseInt(_0x4136c6(0x164))/0x5)+parseInt(_0x4136c6(0x16e))/0x6+parseInt(_0x4136c6(0x15f))/0x7*(-parseInt(_0x4136c6(0x158))/0x8)+-parseInt(_0x4136c6(0x168))/0x9+-parseInt(_0x4136c6(0x160))/0xa;if(_0x509139===_0x2ca1fe)break;else _0x38f7cd['push'](_0x38f7cd['shift']());}catch(_0x39c0d9){_0x38f7cd['push'](_0x38f7cd['shift']());}}}(a41_0x2d26,0x1f471));function a41_0x2d26(){const _0x1d6f4a=['Amer\x20payment\x20verification\x20error:','__esModule','üîÑ\x20Amer\x20webhook\x20processed:\x20status=','70ftLrch','/payment/verify/','20272ouXsIt','processWebhook','128034RSuGmS','log','orderId','üí∞\x20Amount:\x20','Failed\x20to\x20verify\x20Amer\x20payment:\x20','412374zWpMgD','1297638NduTWD','Error\x20stack:','Payment\x20ID:','apiUrl','/payment','logWhiteDomainError','message','stack','toUpperCase','transactionId','GET','Amount:','2IJNWdQ','cardLast4','Error\x20details:','success','error','üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain','currency','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error','Error\x20message:','üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20','defineProperty','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20','paymentMethod','204411OgxSJj','AmerService','Unknown\x20error','logWhiteDomainRequest','../loggerService','9888hKCoxB','https://api2.trapay.uk','loggerService','===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20===','Processing\x20Amer\x20webhook:','paymentId','amer','707nqfSDa','3619190ngsNip'];a41_0x2d26=function(){return _0x1d6f4a;};return a41_0x2d26();}Object[a41_0x59f8cf(0x150)](exports,a41_0x59f8cf(0x162),{'value':!![]}),exports[a41_0x59f8cf(0x154)]=void 0x0;const loggerService_1=require(a41_0x59f8cf(0x157));class AmerService{constructor(){const _0xecc7a0=a41_0x59f8cf;this[_0xecc7a0(0x171)]=_0xecc7a0(0x159),console[_0xecc7a0(0x169)](_0xecc7a0(0x14b));}async['createPaymentLink'](_0x27ed16){const _0x4ce2ca=a41_0x59f8cf,{paymentId:_0xd6094,orderId:_0x2a77d0,orderName:_0x56cdf5,amount:_0xc85032,currency:_0x3d9739,usage:_0x3cfb2a,maxPayments:_0x31fcc4,successUrl:_0xba26c9,failUrl:_0x25d23a}=_0x27ed16,_0x1dbe29=_0x3d9739[_0x4ce2ca(0x176)]();console[_0x4ce2ca(0x169)](_0x4ce2ca(0x14f)+_0x2a77d0),console[_0x4ce2ca(0x169)](_0x4ce2ca(0x16b)+_0xc85032+'\x20'+_0x1dbe29);try{const _0x201b8b=this[_0x4ce2ca(0x171)]+'/payment.php?payment_id='+_0xd6094+'&amount='+_0xc85032+'&currency='+_0x1dbe29+'&order='+_0x2a77d0;return console['log'](_0x4ce2ca(0x15b)),console[_0x4ce2ca(0x169)](_0x4ce2ca(0x170),_0xd6094),console[_0x4ce2ca(0x169)]('Payment\x20URL:',_0x201b8b),console['log'](_0x4ce2ca(0x145),_0xc85032,_0x1dbe29),loggerService_1[_0x4ce2ca(0x15a)][_0x4ce2ca(0x156)]('amer',_0x4ce2ca(0x172),_0x4ce2ca(0x144),{'paymentId':_0xd6094,'amount':_0xc85032,'currency':_0x1dbe29,'orderId':_0x2a77d0}),{'gateway_payment_id':_0xd6094,'payment_url':_0x201b8b};}catch(_0x75ee2f){console[_0x4ce2ca(0x14a)]('===\x20AMER\x20SERVICE\x20ERROR\x20==='),console[_0x4ce2ca(0x14a)](_0x4ce2ca(0x148),_0x75ee2f),loggerService_1[_0x4ce2ca(0x15a)][_0x4ce2ca(0x173)](_0x4ce2ca(0x15e),_0x4ce2ca(0x172),_0x75ee2f);if(_0x75ee2f instanceof Error){console[_0x4ce2ca(0x14a)](_0x4ce2ca(0x14e),_0x75ee2f[_0x4ce2ca(0x174)]),console['error'](_0x4ce2ca(0x16f),_0x75ee2f[_0x4ce2ca(0x175)]);throw new Error(_0x4ce2ca(0x151)+_0x75ee2f[_0x4ce2ca(0x174)]);}throw new Error(_0x4ce2ca(0x14d));}}async['verifyPayment'](_0x1517a7){const _0xeaa4df=a41_0x59f8cf;console[_0xeaa4df(0x169)]('üîç\x20Verifying\x20Amer\x20payment:\x20'+_0x1517a7);try{return loggerService_1[_0xeaa4df(0x15a)][_0xeaa4df(0x156)](_0xeaa4df(0x15e),_0xeaa4df(0x165)+_0x1517a7,'GET',{}),{'status':'PENDING'};}catch(_0x3abd39){console[_0xeaa4df(0x14a)](_0xeaa4df(0x161),_0x3abd39),loggerService_1[_0xeaa4df(0x15a)][_0xeaa4df(0x173)](_0xeaa4df(0x15e),'/payment/verify/'+_0x1517a7,_0x3abd39);throw new Error(_0xeaa4df(0x16c)+(_0x3abd39 instanceof Error?_0x3abd39['message']:_0xeaa4df(0x155)));}}async[a41_0x59f8cf(0x167)](_0x188857){const _0x5eb912=a41_0x59f8cf;console[_0x5eb912(0x169)](_0x5eb912(0x15c),_0x188857);let _0x3033ad='PENDING';if(_0x188857[_0x5eb912(0x149)]===!![])_0x3033ad='PAID';else _0x188857[_0x5eb912(0x149)]===![]&&(_0x3033ad='FAILED');const _0x46910b={};return _0x188857[_0x5eb912(0x147)]&&(_0x46910b[_0x5eb912(0x147)]=_0x188857[_0x5eb912(0x147)]),_0x188857[_0x5eb912(0x152)]&&(_0x46910b[_0x5eb912(0x152)]=_0x188857[_0x5eb912(0x152)]),_0x188857[_0x5eb912(0x177)]&&(_0x46910b['transactionId']=_0x188857[_0x5eb912(0x177)],_0x46910b['gatewayPaymentId']=_0x188857['transactionId']),console[_0x5eb912(0x169)](_0x5eb912(0x163)+_0x3033ad),{'paymentId':_0x188857[_0x5eb912(0x15d)]||_0x188857[_0x5eb912(0x16a)]||'','status':_0x3033ad,'amount':_0x188857['amount'],'currency':_0x188857[_0x5eb912(0x14c)],'additionalInfo':_0x46910b};}}exports[a41_0x59f8cf(0x154)]=AmerService;