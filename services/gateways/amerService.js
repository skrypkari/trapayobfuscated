'use strict';function a45_0x1a55(_0x26c57d,_0x1f95e1){const _0x43130c=a45_0x4313();return a45_0x1a55=function(_0x1a5565,_0x20f572){_0x1a5565=_0x1a5565-0x1ea;let _0x2562b9=_0x43130c[_0x1a5565];return _0x2562b9;},a45_0x1a55(_0x26c57d,_0x1f95e1);}const a45_0x37ba58=a45_0x1a55;(function(_0x3aceb0,_0x6507c5){const _0x4ad186=a45_0x1a55,_0x4a2ac5=_0x3aceb0();while(!![]){try{const _0x51540f=-parseInt(_0x4ad186(0x1ed))/0x1+-parseInt(_0x4ad186(0x219))/0x2*(-parseInt(_0x4ad186(0x1ff))/0x3)+parseInt(_0x4ad186(0x206))/0x4+-parseInt(_0x4ad186(0x21f))/0x5*(-parseInt(_0x4ad186(0x202))/0x6)+-parseInt(_0x4ad186(0x1ea))/0x7*(parseInt(_0x4ad186(0x217))/0x8)+-parseInt(_0x4ad186(0x1f7))/0x9+parseInt(_0x4ad186(0x211))/0xa;if(_0x51540f===_0x6507c5)break;else _0x4a2ac5['push'](_0x4a2ac5['shift']());}catch(_0x42393b){_0x4a2ac5['push'](_0x4a2ac5['shift']());}}}(a45_0x4313,0x8431d));Object['defineProperty'](exports,a45_0x37ba58(0x207),{'value':!![]}),exports[a45_0x37ba58(0x200)]=void 0x0;const loggerService_1=require(a45_0x37ba58(0x1fd));class AmerService{constructor(){const _0x5c5e26=a45_0x37ba58;this[_0x5c5e26(0x201)]='https://api2.trapay.uk',console[_0x5c5e26(0x210)](_0x5c5e26(0x1f5));}async['createPaymentLink'](_0x1f2861){const _0x1bf637=a45_0x37ba58,{paymentId:_0x216b82,orderId:_0x5597c8,orderName:_0x588640,amount:_0x5559f3,currency:_0x59b20d,usage:_0x4a9cbc,maxPayments:_0x1ab293,successUrl:_0x13eb70,failUrl:_0x5b67c1}=_0x1f2861,_0x3479a4=_0x59b20d[_0x1bf637(0x21c)]();console[_0x1bf637(0x210)](_0x1bf637(0x20c)+_0x5597c8),console[_0x1bf637(0x210)](_0x1bf637(0x1f9)+_0x5559f3+'\x20'+_0x3479a4);try{const _0x19ba24=this[_0x1bf637(0x201)]+_0x1bf637(0x1f4)+_0x216b82+_0x1bf637(0x1f8)+_0x5559f3+_0x1bf637(0x21a)+_0x3479a4+'&order='+_0x5597c8;return console[_0x1bf637(0x210)]('===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20==='),console['log'](_0x1bf637(0x20d),_0x216b82),console[_0x1bf637(0x210)]('Payment\x20URL:',_0x19ba24),console[_0x1bf637(0x210)](_0x1bf637(0x1ef),_0x5559f3,_0x3479a4),loggerService_1[_0x1bf637(0x1eb)][_0x1bf637(0x214)](_0x1bf637(0x209),_0x1bf637(0x208),_0x1bf637(0x1fa),{'paymentId':_0x216b82,'amount':_0x5559f3,'currency':_0x3479a4,'orderId':_0x5597c8}),{'gateway_payment_id':_0x216b82,'payment_url':_0x19ba24};}catch(_0x1d2d1c){console[_0x1bf637(0x220)](_0x1bf637(0x1fb)),console[_0x1bf637(0x220)](_0x1bf637(0x204),_0x1d2d1c),loggerService_1[_0x1bf637(0x1eb)]['logWhiteDomainError'](_0x1bf637(0x209),_0x1bf637(0x208),_0x1d2d1c);if(_0x1d2d1c instanceof Error){console[_0x1bf637(0x220)](_0x1bf637(0x215),_0x1d2d1c[_0x1bf637(0x1ec)]),console['error'](_0x1bf637(0x218),_0x1d2d1c[_0x1bf637(0x203)]);throw new Error(_0x1bf637(0x21b)+_0x1d2d1c[_0x1bf637(0x1ec)]);}throw new Error(_0x1bf637(0x212));}}async[a45_0x37ba58(0x20b)](_0x480928){const _0x497feb=a45_0x37ba58;console[_0x497feb(0x210)]('üîç\x20Verifying\x20Amer\x20payment:\x20'+_0x480928);try{return loggerService_1[_0x497feb(0x1eb)][_0x497feb(0x214)](_0x497feb(0x209),_0x497feb(0x205)+_0x480928,'GET',{}),{'status':'PENDING'};}catch(_0x5dc112){console['error'](_0x497feb(0x21d),_0x5dc112),loggerService_1[_0x497feb(0x1eb)][_0x497feb(0x20f)](_0x497feb(0x209),'/payment/verify/'+_0x480928,_0x5dc112);throw new Error(_0x497feb(0x1f2)+(_0x5dc112 instanceof Error?_0x5dc112[_0x497feb(0x1ec)]:'Unknown\x20error'));}}async['processWebhook'](_0x266620){const _0x11670c=a45_0x37ba58;console['log'](_0x11670c(0x213),_0x266620);let _0x37e58f=_0x11670c(0x1fe);if(_0x266620[_0x11670c(0x1ee)]===!![])_0x37e58f=_0x11670c(0x1f3);else _0x266620[_0x11670c(0x1ee)]===![]&&(_0x37e58f=_0x11670c(0x20a));const _0x2bb6ef={};return _0x266620[_0x11670c(0x1fc)]&&(_0x2bb6ef['cardLast4']=_0x266620[_0x11670c(0x1fc)]),_0x266620[_0x11670c(0x21e)]&&(_0x2bb6ef['paymentMethod']=_0x266620[_0x11670c(0x21e)]),_0x266620[_0x11670c(0x216)]&&(_0x2bb6ef[_0x11670c(0x216)]=_0x266620[_0x11670c(0x216)],_0x2bb6ef[_0x11670c(0x20e)]=_0x266620['transactionId']),console[_0x11670c(0x210)](_0x11670c(0x1f1)+_0x37e58f),{'paymentId':_0x266620[_0x11670c(0x1f6)]||_0x266620['orderId']||'','status':_0x37e58f,'amount':_0x266620[_0x11670c(0x1f0)],'currency':_0x266620['currency'],'additionalInfo':_0x2bb6ef};}}function a45_0x4313(){const _0x17bc95=['736740fnLFie','success','Amount:','amount','üîÑ\x20Amer\x20webhook\x20processed:\x20status=','Failed\x20to\x20verify\x20Amer\x20payment:\x20','PAID','/payment.php?payment_id=','üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain','paymentId','4913316MxRJvX','&amount=','üí∞\x20Amount:\x20','GET','===\x20AMER\x20SERVICE\x20ERROR\x20===','cardLast4','../loggerService','PENDING','6444Qovnfy','AmerService','apiUrl','490128ZDahJw','stack','Error\x20details:','/payment/verify/','746252IEzpuT','__esModule','/payment','amer','FAILED','verifyPayment','üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20','Payment\x20ID:','gatewayPaymentId','logWhiteDomainError','log','16452780YTxiEs','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error','Processing\x20Amer\x20webhook:','logWhiteDomainRequest','Error\x20message:','transactionId','6808Lacbvn','Error\x20stack:','332ZWiayl','&currency=','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20','toUpperCase','Amer\x20payment\x20verification\x20error:','paymentMethod','30xjJEML','error','7028llcylc','loggerService','message'];a45_0x4313=function(){return _0x17bc95;};return a45_0x4313();}exports['AmerService']=AmerService;