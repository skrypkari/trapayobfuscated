'use strict';function a53_0x2624(){const _0xa0b63f=['3678168TnmrKf','message','161748Rztvzb','amount','error','log','2120485tBeIzQ','üîç\x20Verifying\x20Amer\x20payment:\x20','/payment/verify/','Failed\x20to\x20verify\x20Amer\x20payment:\x20','gatewayPaymentId','Amount:','AmerService','success','processWebhook','/payment','15zMJXxW','PENDING','Payment\x20URL:','paymentMethod','Error\x20stack:','verifyPayment','amer','GET','32pTcQVU','logWhiteDomainError','stack','1163934TxFKem','293406gGGUQW','&amount=','logWhiteDomainRequest','currency','FAILED','5050390agHSSZ','Error\x20message:','toUpperCase','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error','paymentId','createPaymentLink','Payment\x20ID:','loggerService','üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20','__esModule','transactionId','cardLast4','&currency=','1021409Adoblp','apiUrl','357JVsULf','===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20==='];a53_0x2624=function(){return _0xa0b63f;};return a53_0x2624();}const a53_0x16660d=a53_0x124e;(function(_0x1635ba,_0x39c840){const _0x1ef434=a53_0x124e,_0x1e0cc0=_0x1635ba();while(!![]){try{const _0x14ae30=parseInt(_0x1ef434(0x9b))/0x1+-parseInt(_0x1ef434(0x89))/0x2*(-parseInt(_0x1ef434(0x7d))/0x3)+parseInt(_0x1ef434(0x9f))/0x4+parseInt(_0x1ef434(0xa5))/0x5+parseInt(_0x1ef434(0xa1))/0x6*(-parseInt(_0x1ef434(0x9d))/0x7)+-parseInt(_0x1ef434(0x85))/0x8*(parseInt(_0x1ef434(0x88))/0x9)+-parseInt(_0x1ef434(0x8e))/0xa;if(_0x14ae30===_0x39c840)break;else _0x1e0cc0['push'](_0x1e0cc0['shift']());}catch(_0x5b1e48){_0x1e0cc0['push'](_0x1e0cc0['shift']());}}}(a53_0x2624,0xab3b2));Object['defineProperty'](exports,a53_0x16660d(0x97),{'value':!![]}),exports[a53_0x16660d(0xab)]=void 0x0;const loggerService_1=require('../loggerService');class AmerService{constructor(){const _0x2dfe5e=a53_0x16660d;this[_0x2dfe5e(0x9c)]='https://api2.trapay.uk',console[_0x2dfe5e(0xa4)]('üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain');}async[a53_0x16660d(0x93)](_0x422788){const _0x597697=a53_0x16660d,{paymentId:_0x31d0c8,orderId:_0x4c445d,orderName:_0x3175d5,amount:_0x492ce8,currency:_0x57c3ff,usage:_0x56515e,maxPayments:_0x527219,successUrl:_0x4f97ed,failUrl:_0x1375d6}=_0x422788,_0x5d9e31=_0x57c3ff[_0x597697(0x90)]();console[_0x597697(0xa4)](_0x597697(0x96)+_0x4c445d),console[_0x597697(0xa4)]('üí∞\x20Amount:\x20'+_0x492ce8+'\x20'+_0x5d9e31);try{const _0x38ddca=this['apiUrl']+'/payment.php?payment_id='+_0x31d0c8+_0x597697(0x8a)+_0x492ce8+_0x597697(0x9a)+_0x5d9e31+'&order='+_0x4c445d;return console['log'](_0x597697(0x9e)),console['log'](_0x597697(0x94),_0x31d0c8),console[_0x597697(0xa4)](_0x597697(0x7f),_0x38ddca),console[_0x597697(0xa4)](_0x597697(0xaa),_0x492ce8,_0x5d9e31),loggerService_1[_0x597697(0x95)][_0x597697(0x8b)](_0x597697(0x83),_0x597697(0x7c),_0x597697(0x84),{'paymentId':_0x31d0c8,'amount':_0x492ce8,'currency':_0x5d9e31,'orderId':_0x4c445d}),{'gateway_payment_id':_0x31d0c8,'payment_url':_0x38ddca};}catch(_0x5885b9){console['error']('===\x20AMER\x20SERVICE\x20ERROR\x20==='),console[_0x597697(0xa3)]('Error\x20details:',_0x5885b9),loggerService_1[_0x597697(0x95)][_0x597697(0x86)](_0x597697(0x83),_0x597697(0x7c),_0x5885b9);if(_0x5885b9 instanceof Error){console['error'](_0x597697(0x8f),_0x5885b9[_0x597697(0xa0)]),console[_0x597697(0xa3)](_0x597697(0x81),_0x5885b9[_0x597697(0x87)]);throw new Error('Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20'+_0x5885b9[_0x597697(0xa0)]);}throw new Error(_0x597697(0x91));}}async[a53_0x16660d(0x82)](_0x4edc1f){const _0x955d1c=a53_0x16660d;console[_0x955d1c(0xa4)](_0x955d1c(0xa6)+_0x4edc1f);try{return loggerService_1[_0x955d1c(0x95)][_0x955d1c(0x8b)](_0x955d1c(0x83),_0x955d1c(0xa7)+_0x4edc1f,_0x955d1c(0x84),{}),{'status':_0x955d1c(0x7e)};}catch(_0x318b22){console[_0x955d1c(0xa3)]('Amer\x20payment\x20verification\x20error:',_0x318b22),loggerService_1[_0x955d1c(0x95)]['logWhiteDomainError'](_0x955d1c(0x83),'/payment/verify/'+_0x4edc1f,_0x318b22);throw new Error(_0x955d1c(0xa8)+(_0x318b22 instanceof Error?_0x318b22['message']:'Unknown\x20error'));}}async[a53_0x16660d(0xad)](_0x6dcce0){const _0x35f964=a53_0x16660d;console[_0x35f964(0xa4)]('Processing\x20Amer\x20webhook:',_0x6dcce0);let _0x4ebf98=_0x35f964(0x7e);if(_0x6dcce0[_0x35f964(0xac)]===!![])_0x4ebf98='PAID';else _0x6dcce0[_0x35f964(0xac)]===![]&&(_0x4ebf98=_0x35f964(0x8d));const _0x236b64={};return _0x6dcce0[_0x35f964(0x99)]&&(_0x236b64[_0x35f964(0x99)]=_0x6dcce0['cardLast4']),_0x6dcce0[_0x35f964(0x80)]&&(_0x236b64[_0x35f964(0x80)]=_0x6dcce0[_0x35f964(0x80)]),_0x6dcce0[_0x35f964(0x98)]&&(_0x236b64[_0x35f964(0x98)]=_0x6dcce0['transactionId'],_0x236b64[_0x35f964(0xa9)]=_0x6dcce0['transactionId']),console[_0x35f964(0xa4)]('üîÑ\x20Amer\x20webhook\x20processed:\x20status='+_0x4ebf98),{'paymentId':_0x6dcce0[_0x35f964(0x92)]||_0x6dcce0['orderId']||'','status':_0x4ebf98,'amount':_0x6dcce0[_0x35f964(0xa2)],'currency':_0x6dcce0[_0x35f964(0x8c)],'additionalInfo':_0x236b64};}}function a53_0x124e(_0x5d8743,_0x48a9cf){_0x5d8743=_0x5d8743-0x7c;const _0x262432=a53_0x2624();let _0x124e25=_0x262432[_0x5d8743];return _0x124e25;}exports[a53_0x16660d(0xab)]=AmerService;