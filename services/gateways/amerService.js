'use strict';function a43_0xf3ab(){const _0x5e494b=['Error\x20details:','&amount=','1282375dZKnSo','Processing\x20Amer\x20webhook:','/payment','Failed\x20to\x20verify\x20Amer\x20payment:\x20','929600oZXkYi','logWhiteDomainRequest','log','82689GmIUeZ','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20','error','===\x20AMER\x20SERVICE\x20ERROR\x20===','verifyPayment','paymentId','message','https://api2.trapay.uk','3124642AcqaNt','Unknown\x20error','Amer\x20payment\x20verification\x20error:','256914dnlwKx','Amount:','logWhiteDomainError','PAID','paymentMethod','üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error','FAILED','2022192dLVKRy','168vIDFLp','/payment/verify/','createPaymentLink','AmerService','===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20===','processWebhook','orderId','18obihQU','Payment\x20ID:','cardLast4','PENDING','amer','loggerService','11761302WdyOQZ','Error\x20message:','/payment.php?payment_id=','success','transactionId','&order=','__esModule','currency','stack','GET'];a43_0xf3ab=function(){return _0x5e494b;};return a43_0xf3ab();}const a43_0xd787d=a43_0x39e0;(function(_0x33ec20,_0x422251){const _0x313de5=a43_0x39e0,_0x523740=_0x33ec20();while(!![]){try{const _0x15599e=-parseInt(_0x313de5(0xa3))/0x1+-parseInt(_0x313de5(0x77))/0x2+parseInt(_0x313de5(0x7a))/0x3+parseInt(_0x313de5(0xa0))/0x4+-parseInt(_0x313de5(0x9c))/0x5*(parseInt(_0x313de5(0x8a))/0x6)+-parseInt(_0x313de5(0x90))/0x7+parseInt(_0x313de5(0x83))/0x8*(parseInt(_0x313de5(0x82))/0x9);if(_0x15599e===_0x422251)break;else _0x523740['push'](_0x523740['shift']());}catch(_0x4bb421){_0x523740['push'](_0x523740['shift']());}}}(a43_0xf3ab,0xe5f29));Object['defineProperty'](exports,a43_0xd787d(0x96),{'value':!![]}),exports[a43_0xd787d(0x86)]=void 0x0;const loggerService_1=require('../loggerService');class AmerService{constructor(){const _0x5c7402=a43_0xd787d;this['apiUrl']=_0x5c7402(0x76),console[_0x5c7402(0xa2)](_0x5c7402(0x7f));}async[a43_0xd787d(0x85)](_0x58150b){const _0x4fedd6=a43_0xd787d,{paymentId:_0x21a574,orderId:_0x461ce7,orderName:_0x51a1c9,amount:_0x36c1ab,currency:_0x2bf31,usage:_0x973fa8,maxPayments:_0x2a9a23,successUrl:_0xb0cf73,failUrl:_0x373da9}=_0x58150b,_0xa76a4d=_0x2bf31['toUpperCase']();console[_0x4fedd6(0xa2)]('üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20'+_0x461ce7),console[_0x4fedd6(0xa2)]('üí∞\x20Amount:\x20'+_0x36c1ab+'\x20'+_0xa76a4d);try{const _0x4b6a1c=this['apiUrl']+_0x4fedd6(0x92)+_0x21a574+_0x4fedd6(0x9b)+_0x36c1ab+'&currency='+_0xa76a4d+_0x4fedd6(0x95)+_0x461ce7;return console[_0x4fedd6(0xa2)](_0x4fedd6(0x87)),console['log'](_0x4fedd6(0x8b),_0x21a574),console[_0x4fedd6(0xa2)]('Payment\x20URL:',_0x4b6a1c),console['log'](_0x4fedd6(0x7b),_0x36c1ab,_0xa76a4d),loggerService_1[_0x4fedd6(0x8f)][_0x4fedd6(0xa1)](_0x4fedd6(0x8e),_0x4fedd6(0x9e),_0x4fedd6(0x99),{'paymentId':_0x21a574,'amount':_0x36c1ab,'currency':_0xa76a4d,'orderId':_0x461ce7}),{'gateway_payment_id':_0x21a574,'payment_url':_0x4b6a1c};}catch(_0x59443f){console[_0x4fedd6(0xa5)](_0x4fedd6(0xa6)),console[_0x4fedd6(0xa5)](_0x4fedd6(0x9a),_0x59443f),loggerService_1[_0x4fedd6(0x8f)][_0x4fedd6(0x7c)](_0x4fedd6(0x8e),_0x4fedd6(0x9e),_0x59443f);if(_0x59443f instanceof Error){console[_0x4fedd6(0xa5)](_0x4fedd6(0x91),_0x59443f[_0x4fedd6(0x75)]),console['error']('Error\x20stack:',_0x59443f[_0x4fedd6(0x98)]);throw new Error(_0x4fedd6(0xa4)+_0x59443f[_0x4fedd6(0x75)]);}throw new Error(_0x4fedd6(0x80));}}async[a43_0xd787d(0x73)](_0x36427f){const _0x5d9bf5=a43_0xd787d;console['log']('üîç\x20Verifying\x20Amer\x20payment:\x20'+_0x36427f);try{return loggerService_1['loggerService']['logWhiteDomainRequest']('amer',_0x5d9bf5(0x84)+_0x36427f,'GET',{}),{'status':_0x5d9bf5(0x8d)};}catch(_0x37aeb1){console[_0x5d9bf5(0xa5)](_0x5d9bf5(0x79),_0x37aeb1),loggerService_1[_0x5d9bf5(0x8f)][_0x5d9bf5(0x7c)](_0x5d9bf5(0x8e),_0x5d9bf5(0x84)+_0x36427f,_0x37aeb1);throw new Error(_0x5d9bf5(0x9f)+(_0x37aeb1 instanceof Error?_0x37aeb1[_0x5d9bf5(0x75)]:_0x5d9bf5(0x78)));}}async[a43_0xd787d(0x88)](_0x4a557b){const _0x3d954e=a43_0xd787d;console[_0x3d954e(0xa2)](_0x3d954e(0x9d),_0x4a557b);let _0x4b67d0=_0x3d954e(0x8d);if(_0x4a557b[_0x3d954e(0x93)]===!![])_0x4b67d0=_0x3d954e(0x7d);else _0x4a557b[_0x3d954e(0x93)]===![]&&(_0x4b67d0=_0x3d954e(0x81));const _0x1d04f3={};return _0x4a557b[_0x3d954e(0x8c)]&&(_0x1d04f3[_0x3d954e(0x8c)]=_0x4a557b[_0x3d954e(0x8c)]),_0x4a557b['paymentMethod']&&(_0x1d04f3[_0x3d954e(0x7e)]=_0x4a557b[_0x3d954e(0x7e)]),_0x4a557b[_0x3d954e(0x94)]&&(_0x1d04f3['transactionId']=_0x4a557b[_0x3d954e(0x94)],_0x1d04f3['gatewayPaymentId']=_0x4a557b[_0x3d954e(0x94)]),console['log']('üîÑ\x20Amer\x20webhook\x20processed:\x20status='+_0x4b67d0),{'paymentId':_0x4a557b[_0x3d954e(0x74)]||_0x4a557b[_0x3d954e(0x89)]||'','status':_0x4b67d0,'amount':_0x4a557b['amount'],'currency':_0x4a557b[_0x3d954e(0x97)],'additionalInfo':_0x1d04f3};}}function a43_0x39e0(_0x477418,_0x110bab){const _0xf3aba6=a43_0xf3ab();return a43_0x39e0=function(_0x39e0d8,_0x51f059){_0x39e0d8=_0x39e0d8-0x73;let _0x35dadf=_0xf3aba6[_0x39e0d8];return _0x35dadf;},a43_0x39e0(_0x477418,_0x110bab);}exports[a43_0xd787d(0x86)]=AmerService;