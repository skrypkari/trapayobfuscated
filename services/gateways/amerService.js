'use strict';const a51_0x46c107=a51_0x5af7;(function(_0x5b8373,_0x523d51){const _0x3beaf1=a51_0x5af7,_0x40182a=_0x5b8373();while(!![]){try{const _0x424925=parseInt(_0x3beaf1(0x8e))/0x1*(parseInt(_0x3beaf1(0x81))/0x2)+-parseInt(_0x3beaf1(0x8b))/0x3*(-parseInt(_0x3beaf1(0x90))/0x4)+parseInt(_0x3beaf1(0x78))/0x5*(parseInt(_0x3beaf1(0x93))/0x6)+parseInt(_0x3beaf1(0x83))/0x7*(-parseInt(_0x3beaf1(0x82))/0x8)+parseInt(_0x3beaf1(0x73))/0x9+parseInt(_0x3beaf1(0x6b))/0xa+-parseInt(_0x3beaf1(0x6d))/0xb;if(_0x424925===_0x523d51)break;else _0x40182a['push'](_0x40182a['shift']());}catch(_0x1eedee){_0x40182a['push'](_0x40182a['shift']());}}}(a51_0x2fd5,0x9cdc8));Object['defineProperty'](exports,a51_0x46c107(0x66),{'value':!![]}),exports['AmerService']=void 0x0;function a51_0x2fd5(){const _0xf3890e=['Amer\x20payment\x20verification\x20error:','GET','üí∞\x20Amount:\x20','paymentId','Error\x20message:','__esModule','amount','log','FAILED','createPaymentLink','4470470ikLFFS','PAID','23895377nhYgAT','cardLast4','&order=','/payment.php?payment_id=','/payment/verify/','success','11320587fbLcHN','loggerService','Payment\x20ID:','message','Error\x20stack:','85pUFUVr','gatewayPaymentId','paymentMethod','/payment','verifyPayment','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20','&currency=','error','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error','2cKeeAo','304HhTKjo','125041hsmiGK','PENDING','logWhiteDomainRequest','üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20','apiUrl','Amount:','transactionId','orderId','3tBwRhL','AmerService','&amount=','936365fPQwgv','üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain','1886540zdaEHj','Unknown\x20error','amer','134370bnQkqS','logWhiteDomainError'];a51_0x2fd5=function(){return _0xf3890e;};return a51_0x2fd5();}function a51_0x5af7(_0x21462c,_0xc0994c){_0x21462c=_0x21462c-0x66;const _0x2fd5e6=a51_0x2fd5();let _0x5af7d0=_0x2fd5e6[_0x21462c];return _0x5af7d0;}const loggerService_1=require('../loggerService');class AmerService{constructor(){const _0x37a0dc=a51_0x46c107;this[_0x37a0dc(0x87)]='https://api2.trapay.uk',console['log'](_0x37a0dc(0x8f));}async[a51_0x46c107(0x6a)](_0x27d15b){const _0x4707b3=a51_0x46c107,{paymentId:_0x251c58,orderId:_0x366344,orderName:_0x51c195,amount:_0xf51cab,currency:_0x4b8fc0,usage:_0x27cdd6,maxPayments:_0x2e6442,successUrl:_0x7c82b7,failUrl:_0xa459ae}=_0x27d15b,_0x24e44c=_0x4b8fc0['toUpperCase']();console[_0x4707b3(0x68)](_0x4707b3(0x86)+_0x366344),console[_0x4707b3(0x68)](_0x4707b3(0x97)+_0xf51cab+'\x20'+_0x24e44c);try{const _0x734cde=this[_0x4707b3(0x87)]+_0x4707b3(0x70)+_0x251c58+_0x4707b3(0x8d)+_0xf51cab+_0x4707b3(0x7e)+_0x24e44c+_0x4707b3(0x6f)+_0x366344;return console[_0x4707b3(0x68)]('===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20==='),console[_0x4707b3(0x68)](_0x4707b3(0x75),_0x251c58),console['log']('Payment\x20URL:',_0x734cde),console['log'](_0x4707b3(0x88),_0xf51cab,_0x24e44c),loggerService_1[_0x4707b3(0x74)][_0x4707b3(0x85)]('amer',_0x4707b3(0x7b),_0x4707b3(0x96),{'paymentId':_0x251c58,'amount':_0xf51cab,'currency':_0x24e44c,'orderId':_0x366344}),{'gateway_payment_id':_0x251c58,'payment_url':_0x734cde};}catch(_0x50037f){console[_0x4707b3(0x7f)]('===\x20AMER\x20SERVICE\x20ERROR\x20==='),console[_0x4707b3(0x7f)]('Error\x20details:',_0x50037f),loggerService_1[_0x4707b3(0x74)][_0x4707b3(0x94)]('amer',_0x4707b3(0x7b),_0x50037f);if(_0x50037f instanceof Error){console[_0x4707b3(0x7f)](_0x4707b3(0x99),_0x50037f[_0x4707b3(0x76)]),console['error'](_0x4707b3(0x77),_0x50037f['stack']);throw new Error(_0x4707b3(0x7d)+_0x50037f['message']);}throw new Error(_0x4707b3(0x80));}}async[a51_0x46c107(0x7c)](_0x27ecb4){const _0x44fd11=a51_0x46c107;console['log']('üîç\x20Verifying\x20Amer\x20payment:\x20'+_0x27ecb4);try{return loggerService_1[_0x44fd11(0x74)][_0x44fd11(0x85)]('amer',_0x44fd11(0x71)+_0x27ecb4,'GET',{}),{'status':_0x44fd11(0x84)};}catch(_0x3133f2){console[_0x44fd11(0x7f)](_0x44fd11(0x95),_0x3133f2),loggerService_1['loggerService'][_0x44fd11(0x94)](_0x44fd11(0x92),_0x44fd11(0x71)+_0x27ecb4,_0x3133f2);throw new Error('Failed\x20to\x20verify\x20Amer\x20payment:\x20'+(_0x3133f2 instanceof Error?_0x3133f2[_0x44fd11(0x76)]:_0x44fd11(0x91)));}}async['processWebhook'](_0x3a1b70){const _0x9de71a=a51_0x46c107;console[_0x9de71a(0x68)]('Processing\x20Amer\x20webhook:',_0x3a1b70);let _0x76234a=_0x9de71a(0x84);if(_0x3a1b70[_0x9de71a(0x72)]===!![])_0x76234a=_0x9de71a(0x6c);else _0x3a1b70[_0x9de71a(0x72)]===![]&&(_0x76234a=_0x9de71a(0x69));const _0x26ce48={};return _0x3a1b70[_0x9de71a(0x6e)]&&(_0x26ce48[_0x9de71a(0x6e)]=_0x3a1b70['cardLast4']),_0x3a1b70['paymentMethod']&&(_0x26ce48['paymentMethod']=_0x3a1b70[_0x9de71a(0x7a)]),_0x3a1b70[_0x9de71a(0x89)]&&(_0x26ce48[_0x9de71a(0x89)]=_0x3a1b70['transactionId'],_0x26ce48[_0x9de71a(0x79)]=_0x3a1b70[_0x9de71a(0x89)]),console[_0x9de71a(0x68)]('üîÑ\x20Amer\x20webhook\x20processed:\x20status='+_0x76234a),{'paymentId':_0x3a1b70[_0x9de71a(0x98)]||_0x3a1b70[_0x9de71a(0x8a)]||'','status':_0x76234a,'amount':_0x3a1b70[_0x9de71a(0x67)],'currency':_0x3a1b70['currency'],'additionalInfo':_0x26ce48};}}exports[a51_0x46c107(0x8c)]=AmerService;