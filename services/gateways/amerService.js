'use strict';const a43_0x2490f5=a43_0xac3d;(function(_0xea4be0,_0x2d3a97){const _0x173384=a43_0xac3d,_0x3413b1=_0xea4be0();while(!![]){try{const _0x1baa6d=parseInt(_0x173384(0x1eb))/0x1*(parseInt(_0x173384(0x20e))/0x2)+-parseInt(_0x173384(0x1dd))/0x3+-parseInt(_0x173384(0x1f1))/0x4+parseInt(_0x173384(0x1fd))/0x5+-parseInt(_0x173384(0x1e3))/0x6+parseInt(_0x173384(0x1f4))/0x7*(-parseInt(_0x173384(0x1da))/0x8)+parseInt(_0x173384(0x209))/0x9*(parseInt(_0x173384(0x206))/0xa);if(_0x1baa6d===_0x2d3a97)break;else _0x3413b1['push'](_0x3413b1['shift']());}catch(_0x2a3e2c){_0x3413b1['push'](_0x3413b1['shift']());}}}(a43_0x2c7b,0xa136e));function a43_0x2c7b(){const _0x1b7d08=['AmerService','../loggerService','log','stack','3IGvwvi','verifyPayment','===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20===','&currency=','Failed\x20to\x20verify\x20Amer\x20payment:\x20','https://api2.trapay.uk','160652WjQtSi','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20','message','62762cRdrPO','amount','GET','processWebhook','apiUrl','üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain','logWhiteDomainRequest','üí∞\x20Amount:\x20','paymentId','5446390bBCDJU','loggerService','üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20','Amount:','PENDING','&order=','Error\x20message:','cardLast4','transactionId','43840tPEFGp','success','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error','54tZLUAQ','/payment','amer','/payment/verify/','Error\x20details:','574094tuExTR','&amount=','error','paymentMethod','Error\x20stack:','logWhiteDomainError','896UEPkdg','orderId','toUpperCase','558393MSzSyJ','üîç\x20Verifying\x20Amer\x20payment:\x20','FAILED','gatewayPaymentId','Payment\x20URL:','Unknown\x20error','515418aBsIni','currency','PAID','üîÑ\x20Amer\x20webhook\x20processed:\x20status='];a43_0x2c7b=function(){return _0x1b7d08;};return a43_0x2c7b();}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a43_0x2490f5(0x1e7)]=void 0x0;function a43_0xac3d(_0x552309,_0x14abb6){const _0x2c7bb4=a43_0x2c7b();return a43_0xac3d=function(_0xac3d5e,_0x4cf884){_0xac3d5e=_0xac3d5e-0x1d6;let _0x364cdd=_0x2c7bb4[_0xac3d5e];return _0x364cdd;},a43_0xac3d(_0x552309,_0x14abb6);}const loggerService_1=require(a43_0x2490f5(0x1e8));class AmerService{constructor(){const _0x4302d2=a43_0x2490f5;this['apiUrl']=_0x4302d2(0x1f0),console[_0x4302d2(0x1e9)](_0x4302d2(0x1f9));}async['createPaymentLink'](_0x5f14f3){const _0x79235a=a43_0x2490f5,{paymentId:_0x4a9f22,orderId:_0x514463,orderName:_0x3f953f,amount:_0x1c0679,currency:_0x557e91,usage:_0x4265ee,maxPayments:_0x4d2d99,successUrl:_0x20dff4,failUrl:_0x5c21cb}=_0x5f14f3,_0x30d54b=_0x557e91[_0x79235a(0x1dc)]();console[_0x79235a(0x1e9)](_0x79235a(0x1ff)+_0x514463),console[_0x79235a(0x1e9)](_0x79235a(0x1fb)+_0x1c0679+'\x20'+_0x30d54b);try{const _0x5d9a4c=this[_0x79235a(0x1f8)]+'/payment.php?payment_id='+_0x4a9f22+_0x79235a(0x20f)+_0x1c0679+_0x79235a(0x1ee)+_0x30d54b+_0x79235a(0x202)+_0x514463;return console[_0x79235a(0x1e9)](_0x79235a(0x1ed)),console[_0x79235a(0x1e9)]('Payment\x20ID:',_0x4a9f22),console[_0x79235a(0x1e9)](_0x79235a(0x1e1),_0x5d9a4c),console[_0x79235a(0x1e9)](_0x79235a(0x200),_0x1c0679,_0x30d54b),loggerService_1[_0x79235a(0x1fe)][_0x79235a(0x1fa)](_0x79235a(0x20b),_0x79235a(0x20a),'GET',{'paymentId':_0x4a9f22,'amount':_0x1c0679,'currency':_0x30d54b,'orderId':_0x514463}),{'gateway_payment_id':_0x4a9f22,'payment_url':_0x5d9a4c};}catch(_0x4099a2){console[_0x79235a(0x1d6)]('===\x20AMER\x20SERVICE\x20ERROR\x20==='),console[_0x79235a(0x1d6)](_0x79235a(0x20d),_0x4099a2),loggerService_1[_0x79235a(0x1fe)][_0x79235a(0x1d9)](_0x79235a(0x20b),_0x79235a(0x20a),_0x4099a2);if(_0x4099a2 instanceof Error){console[_0x79235a(0x1d6)](_0x79235a(0x203),_0x4099a2['message']),console[_0x79235a(0x1d6)](_0x79235a(0x1d8),_0x4099a2[_0x79235a(0x1ea)]);throw new Error(_0x79235a(0x1f2)+_0x4099a2['message']);}throw new Error(_0x79235a(0x208));}}async[a43_0x2490f5(0x1ec)](_0x90899e){const _0x1dc3e2=a43_0x2490f5;console['log'](_0x1dc3e2(0x1de)+_0x90899e);try{return loggerService_1[_0x1dc3e2(0x1fe)][_0x1dc3e2(0x1fa)](_0x1dc3e2(0x20b),_0x1dc3e2(0x20c)+_0x90899e,_0x1dc3e2(0x1f6),{}),{'status':_0x1dc3e2(0x201)};}catch(_0x30c98c){console[_0x1dc3e2(0x1d6)]('Amer\x20payment\x20verification\x20error:',_0x30c98c),loggerService_1[_0x1dc3e2(0x1fe)]['logWhiteDomainError'](_0x1dc3e2(0x20b),'/payment/verify/'+_0x90899e,_0x30c98c);throw new Error(_0x1dc3e2(0x1ef)+(_0x30c98c instanceof Error?_0x30c98c[_0x1dc3e2(0x1f3)]:_0x1dc3e2(0x1e2)));}}async[a43_0x2490f5(0x1f7)](_0x3a6f65){const _0x1c30e0=a43_0x2490f5;console[_0x1c30e0(0x1e9)]('Processing\x20Amer\x20webhook:',_0x3a6f65);let _0x118f26='PENDING';if(_0x3a6f65[_0x1c30e0(0x207)]===!![])_0x118f26=_0x1c30e0(0x1e5);else _0x3a6f65[_0x1c30e0(0x207)]===![]&&(_0x118f26=_0x1c30e0(0x1df));const _0x3f8a24={};return _0x3a6f65[_0x1c30e0(0x204)]&&(_0x3f8a24['cardLast4']=_0x3a6f65[_0x1c30e0(0x204)]),_0x3a6f65['paymentMethod']&&(_0x3f8a24[_0x1c30e0(0x1d7)]=_0x3a6f65[_0x1c30e0(0x1d7)]),_0x3a6f65[_0x1c30e0(0x205)]&&(_0x3f8a24[_0x1c30e0(0x205)]=_0x3a6f65[_0x1c30e0(0x205)],_0x3f8a24[_0x1c30e0(0x1e0)]=_0x3a6f65[_0x1c30e0(0x205)]),console['log'](_0x1c30e0(0x1e6)+_0x118f26),{'paymentId':_0x3a6f65[_0x1c30e0(0x1fc)]||_0x3a6f65[_0x1c30e0(0x1db)]||'','status':_0x118f26,'amount':_0x3a6f65[_0x1c30e0(0x1f5)],'currency':_0x3a6f65[_0x1c30e0(0x1e4)],'additionalInfo':_0x3f8a24};}}exports[a43_0x2490f5(0x1e7)]=AmerService;