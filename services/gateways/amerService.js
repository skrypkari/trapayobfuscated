'use strict';const a43_0x337519=a43_0x23b8;(function(_0xa74d7b,_0x3e9f2c){const _0x250073=a43_0x23b8,_0x44c1ce=_0xa74d7b();while(!![]){try{const _0x1fddd5=-parseInt(_0x250073(0x1cf))/0x1+-parseInt(_0x250073(0x1d1))/0x2+-parseInt(_0x250073(0x1c6))/0x3+-parseInt(_0x250073(0x1c8))/0x4+parseInt(_0x250073(0x1d3))/0x5+-parseInt(_0x250073(0x1bc))/0x6+parseInt(_0x250073(0x1d7))/0x7*(parseInt(_0x250073(0x1c5))/0x8);if(_0x1fddd5===_0x3e9f2c)break;else _0x44c1ce['push'](_0x44c1ce['shift']());}catch(_0x1944ac){_0x44c1ce['push'](_0x44c1ce['shift']());}}}(a43_0xdfdc,0x90b4f));Object[a43_0x337519(0x1df)](exports,a43_0x337519(0x1d4),{'value':!![]}),exports[a43_0x337519(0x1dd)]=void 0x0;function a43_0x23b8(_0x399947,_0x300d9f){const _0xdfdc1e=a43_0xdfdc();return a43_0x23b8=function(_0x23b87a,_0x12ab79){_0x23b87a=_0x23b87a-0x1b9;let _0x39020e=_0xdfdc1e[_0x23b87a];return _0x39020e;},a43_0x23b8(_0x399947,_0x300d9f);}const loggerService_1=require('../loggerService');class AmerService{constructor(){const _0x6fa4f4=a43_0x337519;this['apiUrl']=_0x6fa4f4(0x1c3),console['log'](_0x6fa4f4(0x1eb));}async[a43_0x337519(0x1d0)](_0x59f4a3){const _0x3f7553=a43_0x337519,{paymentId:_0x5e5785,orderId:_0x48ea98,orderName:_0x272d33,amount:_0x5917d4,currency:_0x83ee2f,usage:_0x3effea,maxPayments:_0x3c70db,successUrl:_0x481809,failUrl:_0x43d0d4}=_0x59f4a3,_0x528890=_0x83ee2f[_0x3f7553(0x1d6)]();console[_0x3f7553(0x1e4)](_0x3f7553(0x1da)+_0x48ea98),console['log']('üí∞\x20Amount:\x20'+_0x5917d4+'\x20'+_0x528890);try{const _0x3a4077=this[_0x3f7553(0x1d9)]+_0x3f7553(0x1ba)+_0x5e5785+_0x3f7553(0x1e8)+_0x5917d4+_0x3f7553(0x1ca)+_0x528890+_0x3f7553(0x1e0)+_0x48ea98;return console['log'](_0x3f7553(0x1e1)),console['log'](_0x3f7553(0x1d8),_0x5e5785),console[_0x3f7553(0x1e4)]('Payment\x20URL:',_0x3a4077),console['log'](_0x3f7553(0x1b9),_0x5917d4,_0x528890),loggerService_1[_0x3f7553(0x1e7)][_0x3f7553(0x1c7)]('amer',_0x3f7553(0x1ea),_0x3f7553(0x1d5),{'paymentId':_0x5e5785,'amount':_0x5917d4,'currency':_0x528890,'orderId':_0x48ea98}),{'gateway_payment_id':_0x5e5785,'payment_url':_0x3a4077};}catch(_0x323067){console[_0x3f7553(0x1e5)](_0x3f7553(0x1c9)),console[_0x3f7553(0x1e5)](_0x3f7553(0x1db),_0x323067),loggerService_1['loggerService']['logWhiteDomainError'](_0x3f7553(0x1c0),_0x3f7553(0x1ea),_0x323067);if(_0x323067 instanceof Error){console['error'](_0x3f7553(0x1e6),_0x323067[_0x3f7553(0x1c1)]),console[_0x3f7553(0x1e5)]('Error\x20stack:',_0x323067[_0x3f7553(0x1bd)]);throw new Error(_0x3f7553(0x1c4)+_0x323067[_0x3f7553(0x1c1)]);}throw new Error(_0x3f7553(0x1bf));}}async['verifyPayment'](_0x3208b7){const _0x2e0103=a43_0x337519;console[_0x2e0103(0x1e4)]('üîç\x20Verifying\x20Amer\x20payment:\x20'+_0x3208b7);try{return loggerService_1[_0x2e0103(0x1e7)][_0x2e0103(0x1c7)](_0x2e0103(0x1c0),_0x2e0103(0x1cc)+_0x3208b7,_0x2e0103(0x1d5),{}),{'status':_0x2e0103(0x1e3)};}catch(_0x1d3bde){console[_0x2e0103(0x1e5)](_0x2e0103(0x1e2),_0x1d3bde),loggerService_1['loggerService']['logWhiteDomainError'](_0x2e0103(0x1c0),'/payment/verify/'+_0x3208b7,_0x1d3bde);throw new Error('Failed\x20to\x20verify\x20Amer\x20payment:\x20'+(_0x1d3bde instanceof Error?_0x1d3bde[_0x2e0103(0x1c1)]:_0x2e0103(0x1de)));}}async['processWebhook'](_0x54edbc){const _0x1056b7=a43_0x337519;console[_0x1056b7(0x1e4)](_0x1056b7(0x1cb),_0x54edbc);let _0x27d302='PENDING';if(_0x54edbc[_0x1056b7(0x1ec)]===!![])_0x27d302=_0x1056b7(0x1ce);else _0x54edbc[_0x1056b7(0x1ec)]===![]&&(_0x27d302=_0x1056b7(0x1be));const _0x1c28a9={};return _0x54edbc[_0x1056b7(0x1bb)]&&(_0x1c28a9[_0x1056b7(0x1bb)]=_0x54edbc[_0x1056b7(0x1bb)]),_0x54edbc[_0x1056b7(0x1cd)]&&(_0x1c28a9[_0x1056b7(0x1cd)]=_0x54edbc[_0x1056b7(0x1cd)]),_0x54edbc[_0x1056b7(0x1dc)]&&(_0x1c28a9[_0x1056b7(0x1dc)]=_0x54edbc[_0x1056b7(0x1dc)],_0x1c28a9[_0x1056b7(0x1c2)]=_0x54edbc[_0x1056b7(0x1dc)]),console[_0x1056b7(0x1e4)](_0x1056b7(0x1e9)+_0x27d302),{'paymentId':_0x54edbc['paymentId']||_0x54edbc['orderId']||'','status':_0x27d302,'amount':_0x54edbc['amount'],'currency':_0x54edbc[_0x1056b7(0x1d2)],'additionalInfo':_0x1c28a9};}}function a43_0xdfdc(){const _0x779add=['__esModule','GET','toUpperCase','7QwLUXo','Payment\x20ID:','apiUrl','üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20','Error\x20details:','transactionId','AmerService','Unknown\x20error','defineProperty','&order=','===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20===','Amer\x20payment\x20verification\x20error:','PENDING','log','error','Error\x20message:','loggerService','&amount=','üîÑ\x20Amer\x20webhook\x20processed:\x20status=','/payment','üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain','success','Amount:','/payment.php?payment_id=','cardLast4','6480558qWGcaO','stack','FAILED','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error','amer','message','gatewayPaymentId','https://api2.trapay.uk','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20','36066104mgQssY','1356210cErKOC','logWhiteDomainRequest','2528052wrYRRM','===\x20AMER\x20SERVICE\x20ERROR\x20===','&currency=','Processing\x20Amer\x20webhook:','/payment/verify/','paymentMethod','PAID','1083296TqrJNU','createPaymentLink','1720816HhZRFn','currency','961680NBbTMH'];a43_0xdfdc=function(){return _0x779add;};return a43_0xdfdc();}exports['AmerService']=AmerService;