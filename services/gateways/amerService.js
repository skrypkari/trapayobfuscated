'use strict';const a41_0x360550=a41_0x3e89;(function(_0x51d5ee,_0x375bce){const _0x3a152d=a41_0x3e89,_0x49afa4=_0x51d5ee();while(!![]){try{const _0x16d667=-parseInt(_0x3a152d(0x192))/0x1+-parseInt(_0x3a152d(0x1b1))/0x2+-parseInt(_0x3a152d(0x1a3))/0x3+parseInt(_0x3a152d(0x197))/0x4*(parseInt(_0x3a152d(0x19c))/0x5)+parseInt(_0x3a152d(0x18e))/0x6*(parseInt(_0x3a152d(0x1b0))/0x7)+parseInt(_0x3a152d(0x1b3))/0x8+parseInt(_0x3a152d(0x1ba))/0x9;if(_0x16d667===_0x375bce)break;else _0x49afa4['push'](_0x49afa4['shift']());}catch(_0x589314){_0x49afa4['push'](_0x49afa4['shift']());}}}(a41_0x50b5,0xbd00b));Object[a41_0x360550(0x1a7)](exports,'__esModule',{'value':!![]}),exports[a41_0x360550(0x18c)]=void 0x0;const loggerService_1=require('../loggerService');function a41_0x50b5(){const _0x500606=['üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain','&amount=','4VuDZJk','Amer\x20payment\x20verification\x20error:','/payment','Error\x20message:','Error\x20stack:','4201655zyPkMl','gatewayPaymentId','Processing\x20Amer\x20webhook:','Payment\x20URL:','Payment\x20ID:','===\x20AMER\x20SERVICE\x20ERROR\x20===','/payment.php?payment_id=','416313gsgDUU','üí∞\x20Amount:\x20','https://api2.trapay.uk','&order=','defineProperty','createPaymentLink','error','loggerService','Error\x20details:','Failed\x20to\x20verify\x20Amer\x20payment:\x20','===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20===','FAILED','currency','2829064cRwdcm','2934324acKGDW','logWhiteDomainRequest','2730632uUXGOR','message','stack','amount','cardLast4','verifyPayment','PENDING','16542774mXSndq','paymentMethod','paymentId','PAID','üîÑ\x20Amer\x20webhook\x20processed:\x20status=','transactionId','success','üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20','AmerService','üîç\x20Verifying\x20Amer\x20payment:\x20','12rPkMAG','amer','log','orderId','1447962fUHGkK','GET','logWhiteDomainError'];a41_0x50b5=function(){return _0x500606;};return a41_0x50b5();}function a41_0x3e89(_0x39dfac,_0x505877){const _0x50b51e=a41_0x50b5();return a41_0x3e89=function(_0x3e896a,_0x59d7dd){_0x3e896a=_0x3e896a-0x188;let _0xaddaf0=_0x50b51e[_0x3e896a];return _0xaddaf0;},a41_0x3e89(_0x39dfac,_0x505877);}class AmerService{constructor(){const _0x1a56a0=a41_0x360550;this['apiUrl']=_0x1a56a0(0x1a5),console[_0x1a56a0(0x190)](_0x1a56a0(0x195));}async[a41_0x360550(0x1a8)](_0x208049){const _0x3ff618=a41_0x360550,{paymentId:_0x4f7750,orderId:_0x57ff68,orderName:_0x57e38e,amount:_0x1f1444,currency:_0x5dd80e,usage:_0x2cab65,maxPayments:_0x313764,successUrl:_0x511f63,failUrl:_0x379ba4}=_0x208049,_0x2b1d13=_0x5dd80e['toUpperCase']();console[_0x3ff618(0x190)](_0x3ff618(0x18b)+_0x57ff68),console[_0x3ff618(0x190)](_0x3ff618(0x1a4)+_0x1f1444+'\x20'+_0x2b1d13);try{const _0x4a6785=this['apiUrl']+_0x3ff618(0x1a2)+_0x4f7750+_0x3ff618(0x196)+_0x1f1444+'&currency='+_0x2b1d13+_0x3ff618(0x1a6)+_0x57ff68;return console[_0x3ff618(0x190)](_0x3ff618(0x1ad)),console[_0x3ff618(0x190)](_0x3ff618(0x1a0),_0x4f7750),console[_0x3ff618(0x190)](_0x3ff618(0x19f),_0x4a6785),console[_0x3ff618(0x190)]('Amount:',_0x1f1444,_0x2b1d13),loggerService_1[_0x3ff618(0x1aa)][_0x3ff618(0x1b2)](_0x3ff618(0x18f),_0x3ff618(0x199),_0x3ff618(0x193),{'paymentId':_0x4f7750,'amount':_0x1f1444,'currency':_0x2b1d13,'orderId':_0x57ff68}),{'gateway_payment_id':_0x4f7750,'payment_url':_0x4a6785};}catch(_0x3abedc){console['error'](_0x3ff618(0x1a1)),console[_0x3ff618(0x1a9)](_0x3ff618(0x1ab),_0x3abedc),loggerService_1[_0x3ff618(0x1aa)][_0x3ff618(0x194)]('amer',_0x3ff618(0x199),_0x3abedc);if(_0x3abedc instanceof Error){console[_0x3ff618(0x1a9)](_0x3ff618(0x19a),_0x3abedc[_0x3ff618(0x1b4)]),console[_0x3ff618(0x1a9)](_0x3ff618(0x19b),_0x3abedc[_0x3ff618(0x1b5)]);throw new Error('Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20'+_0x3abedc[_0x3ff618(0x1b4)]);}throw new Error('Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error');}}async[a41_0x360550(0x1b8)](_0x424ee1){const _0x3faa98=a41_0x360550;console[_0x3faa98(0x190)](_0x3faa98(0x18d)+_0x424ee1);try{return loggerService_1[_0x3faa98(0x1aa)][_0x3faa98(0x1b2)](_0x3faa98(0x18f),'/payment/verify/'+_0x424ee1,_0x3faa98(0x193),{}),{'status':'PENDING'};}catch(_0x504bc7){console[_0x3faa98(0x1a9)](_0x3faa98(0x198),_0x504bc7),loggerService_1['loggerService'][_0x3faa98(0x194)](_0x3faa98(0x18f),'/payment/verify/'+_0x424ee1,_0x504bc7);throw new Error(_0x3faa98(0x1ac)+(_0x504bc7 instanceof Error?_0x504bc7[_0x3faa98(0x1b4)]:'Unknown\x20error'));}}async['processWebhook'](_0xc226a1){const _0x464c66=a41_0x360550;console[_0x464c66(0x190)](_0x464c66(0x19e),_0xc226a1);let _0x4ef3c3=_0x464c66(0x1b9);if(_0xc226a1['success']===!![])_0x4ef3c3=_0x464c66(0x1bd);else _0xc226a1[_0x464c66(0x18a)]===![]&&(_0x4ef3c3=_0x464c66(0x1ae));const _0x16f831={};return _0xc226a1['cardLast4']&&(_0x16f831[_0x464c66(0x1b7)]=_0xc226a1[_0x464c66(0x1b7)]),_0xc226a1[_0x464c66(0x1bb)]&&(_0x16f831[_0x464c66(0x1bb)]=_0xc226a1[_0x464c66(0x1bb)]),_0xc226a1[_0x464c66(0x189)]&&(_0x16f831[_0x464c66(0x189)]=_0xc226a1[_0x464c66(0x189)],_0x16f831[_0x464c66(0x19d)]=_0xc226a1[_0x464c66(0x189)]),console[_0x464c66(0x190)](_0x464c66(0x188)+_0x4ef3c3),{'paymentId':_0xc226a1[_0x464c66(0x1bc)]||_0xc226a1[_0x464c66(0x191)]||'','status':_0x4ef3c3,'amount':_0xc226a1[_0x464c66(0x1b6)],'currency':_0xc226a1[_0x464c66(0x1af)],'additionalInfo':_0x16f831};}}exports[a41_0x360550(0x18c)]=AmerService;