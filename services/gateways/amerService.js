'use strict';const a45_0x21a06d=a45_0x2f97;(function(_0x5bb077,_0x374535){const _0x37d505=a45_0x2f97,_0x5e64cd=_0x5bb077();while(!![]){try{const _0x4c05c4=parseInt(_0x37d505(0x1d7))/0x1+-parseInt(_0x37d505(0x1cf))/0x2+-parseInt(_0x37d505(0x1d1))/0x3+parseInt(_0x37d505(0x1e9))/0x4*(-parseInt(_0x37d505(0x1f1))/0x5)+parseInt(_0x37d505(0x1dc))/0x6*(parseInt(_0x37d505(0x1ea))/0x7)+-parseInt(_0x37d505(0x1de))/0x8+parseInt(_0x37d505(0x1fa))/0x9*(parseInt(_0x37d505(0x1e6))/0xa);if(_0x4c05c4===_0x374535)break;else _0x5e64cd['push'](_0x5e64cd['shift']());}catch(_0x35c9ac){_0x5e64cd['push'](_0x5e64cd['shift']());}}}(a45_0x1908,0x8f323));function a45_0x1908(){const _0x3425b8=['stack','orderId','üîç\x20Verifying\x20Amer\x20payment:\x20','Payment\x20URL:','logWhiteDomainError','apiUrl','1524244EstnKE','/payment.php?payment_id=','709866EcYTTn','logWhiteDomainRequest','PAID','loggerService','log','../loggerService','938947YXepeN','GET','amount','gatewayPaymentId','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error','19230eMdYST','https://api2.trapay.uk','1647920YuEOaW','success','/payment/verify/','Error\x20details:','üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain','üí∞\x20Amount:\x20','paymentMethod','verifyPayment','13660530wbLmjl','üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20','AmerService','16OJuEGf','371PytEbl','/payment','__esModule','Payment\x20ID:','===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20===','Amount:','message','854500sHEzBg','transactionId','error','processWebhook','FAILED','amer','PENDING','&amount=','defineProperty','9nPnsrT','cardLast4'];a45_0x1908=function(){return _0x3425b8;};return a45_0x1908();}Object[a45_0x21a06d(0x1f9)](exports,a45_0x21a06d(0x1ec),{'value':!![]}),exports[a45_0x21a06d(0x1e8)]=void 0x0;const loggerService_1=require(a45_0x21a06d(0x1d6));function a45_0x2f97(_0x260ed0,_0xaa4278){const _0x190812=a45_0x1908();return a45_0x2f97=function(_0x2f97bc,_0x54f6fc){_0x2f97bc=_0x2f97bc-0x1cd;let _0x2e364c=_0x190812[_0x2f97bc];return _0x2e364c;},a45_0x2f97(_0x260ed0,_0xaa4278);}class AmerService{constructor(){const _0xaae62f=a45_0x21a06d;this['apiUrl']=_0xaae62f(0x1dd),console[_0xaae62f(0x1d5)](_0xaae62f(0x1e2));}async['createPaymentLink'](_0x2f1ba6){const _0x480bd8=a45_0x21a06d,{paymentId:_0x4a3eb5,orderId:_0x994bfa,orderName:_0x42ad04,amount:_0x4de808,currency:_0x40adf7,usage:_0x209acd,maxPayments:_0x26f12c,successUrl:_0xc6ba25,failUrl:_0x4156cd}=_0x2f1ba6,_0x39f8ab=_0x40adf7['toUpperCase']();console['log'](_0x480bd8(0x1e7)+_0x994bfa),console[_0x480bd8(0x1d5)](_0x480bd8(0x1e3)+_0x4de808+'\x20'+_0x39f8ab);try{const _0x46ef9d=this[_0x480bd8(0x1ce)]+_0x480bd8(0x1d0)+_0x4a3eb5+_0x480bd8(0x1f8)+_0x4de808+'&currency='+_0x39f8ab+'&order='+_0x994bfa;return console[_0x480bd8(0x1d5)](_0x480bd8(0x1ee)),console['log'](_0x480bd8(0x1ed),_0x4a3eb5),console[_0x480bd8(0x1d5)](_0x480bd8(0x1ff),_0x46ef9d),console[_0x480bd8(0x1d5)](_0x480bd8(0x1ef),_0x4de808,_0x39f8ab),loggerService_1[_0x480bd8(0x1d4)]['logWhiteDomainRequest'](_0x480bd8(0x1f6),_0x480bd8(0x1eb),_0x480bd8(0x1d8),{'paymentId':_0x4a3eb5,'amount':_0x4de808,'currency':_0x39f8ab,'orderId':_0x994bfa}),{'gateway_payment_id':_0x4a3eb5,'payment_url':_0x46ef9d};}catch(_0x1bac69){console[_0x480bd8(0x1f3)]('===\x20AMER\x20SERVICE\x20ERROR\x20==='),console[_0x480bd8(0x1f3)](_0x480bd8(0x1e1),_0x1bac69),loggerService_1['loggerService'][_0x480bd8(0x1cd)](_0x480bd8(0x1f6),_0x480bd8(0x1eb),_0x1bac69);if(_0x1bac69 instanceof Error){console[_0x480bd8(0x1f3)]('Error\x20message:',_0x1bac69[_0x480bd8(0x1f0)]),console['error']('Error\x20stack:',_0x1bac69[_0x480bd8(0x1fc)]);throw new Error('Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20'+_0x1bac69[_0x480bd8(0x1f0)]);}throw new Error(_0x480bd8(0x1db));}}async[a45_0x21a06d(0x1e5)](_0x194b6f){const _0x469dde=a45_0x21a06d;console[_0x469dde(0x1d5)](_0x469dde(0x1fe)+_0x194b6f);try{return loggerService_1['loggerService'][_0x469dde(0x1d2)]('amer','/payment/verify/'+_0x194b6f,'GET',{}),{'status':_0x469dde(0x1f7)};}catch(_0x18b300){console[_0x469dde(0x1f3)]('Amer\x20payment\x20verification\x20error:',_0x18b300),loggerService_1['loggerService'][_0x469dde(0x1cd)](_0x469dde(0x1f6),_0x469dde(0x1e0)+_0x194b6f,_0x18b300);throw new Error('Failed\x20to\x20verify\x20Amer\x20payment:\x20'+(_0x18b300 instanceof Error?_0x18b300[_0x469dde(0x1f0)]:'Unknown\x20error'));}}async[a45_0x21a06d(0x1f4)](_0x27b583){const _0x5d6980=a45_0x21a06d;console[_0x5d6980(0x1d5)]('Processing\x20Amer\x20webhook:',_0x27b583);let _0x15ea1f=_0x5d6980(0x1f7);if(_0x27b583['success']===!![])_0x15ea1f=_0x5d6980(0x1d3);else _0x27b583[_0x5d6980(0x1df)]===![]&&(_0x15ea1f=_0x5d6980(0x1f5));const _0x33cba9={};return _0x27b583[_0x5d6980(0x1fb)]&&(_0x33cba9[_0x5d6980(0x1fb)]=_0x27b583[_0x5d6980(0x1fb)]),_0x27b583[_0x5d6980(0x1e4)]&&(_0x33cba9[_0x5d6980(0x1e4)]=_0x27b583['paymentMethod']),_0x27b583['transactionId']&&(_0x33cba9[_0x5d6980(0x1f2)]=_0x27b583[_0x5d6980(0x1f2)],_0x33cba9[_0x5d6980(0x1da)]=_0x27b583[_0x5d6980(0x1f2)]),console[_0x5d6980(0x1d5)]('üîÑ\x20Amer\x20webhook\x20processed:\x20status='+_0x15ea1f),{'paymentId':_0x27b583['paymentId']||_0x27b583[_0x5d6980(0x1fd)]||'','status':_0x15ea1f,'amount':_0x27b583[_0x5d6980(0x1d9)],'currency':_0x27b583['currency'],'additionalInfo':_0x33cba9};}}exports['AmerService']=AmerService;