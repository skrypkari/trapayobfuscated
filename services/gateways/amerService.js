'use strict';const a41_0x3814c6=a41_0x11a9;(function(_0xad9f33,_0x5e09ea){const _0x40d51d=a41_0x11a9,_0xb5d757=_0xad9f33();while(!![]){try{const _0x1c2e53=-parseInt(_0x40d51d(0x162))/0x1*(-parseInt(_0x40d51d(0x155))/0x2)+parseInt(_0x40d51d(0x13a))/0x3+parseInt(_0x40d51d(0x15d))/0x4+-parseInt(_0x40d51d(0x16b))/0x5+parseInt(_0x40d51d(0x14c))/0x6+parseInt(_0x40d51d(0x166))/0x7+-parseInt(_0x40d51d(0x169))/0x8*(parseInt(_0x40d51d(0x157))/0x9);if(_0x1c2e53===_0x5e09ea)break;else _0xb5d757['push'](_0xb5d757['shift']());}catch(_0x49dc6c){_0xb5d757['push'](_0xb5d757['shift']());}}}(a41_0x43b0,0x83597));function a41_0x11a9(_0x5e2cd2,_0x11403b){const _0x43b05c=a41_0x43b0();return a41_0x11a9=function(_0x11a984,_0x538c9a){_0x11a984=_0x11a984-0x135;let _0x4a1420=_0x43b05c[_0x11a984];return _0x4a1420;},a41_0x11a9(_0x5e2cd2,_0x11403b);}Object[a41_0x3814c6(0x161)](exports,a41_0x3814c6(0x135),{'value':!![]}),exports['AmerService']=void 0x0;const loggerService_1=require('../loggerService');function a41_0x43b0(){const _0x538b8f=['transactionId','apiUrl','FAILED','/payment/verify/','üí∞\x20Amount:\x20','&order=','logWhiteDomainError','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error','https://api2.trapay.uk','GET','/payment','paymentId','error','logWhiteDomainRequest','üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20','4123440rtRUfh','orderId','verifyPayment','loggerService','message','üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain','amount','===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20===','Error\x20message:','2428IKAKLv','toUpperCase','8620272kqMJhR','PENDING','Payment\x20URL:','processWebhook','stack','gatewayPaymentId','659196IQEcXa','Amer\x20payment\x20verification\x20error:','Processing\x20Amer\x20webhook:','&amount=','defineProperty','485PkEqoI','success','amer','paymentMethod','5700996LOgUTm','PAID','cardLast4','16hIdiDC','log','3519380sfvfcZ','__esModule','Failed\x20to\x20verify\x20Amer\x20payment:\x20','Amount:','Unknown\x20error','===\x20AMER\x20SERVICE\x20ERROR\x20===','2706726ywSjcW','Error\x20details:','createPaymentLink'];a41_0x43b0=function(){return _0x538b8f;};return a41_0x43b0();}class AmerService{constructor(){const _0x3603c4=a41_0x3814c6;this[_0x3603c4(0x13e)]=_0x3603c4(0x145),console[_0x3603c4(0x16a)](_0x3603c4(0x151));}async[a41_0x3814c6(0x13c)](_0x558d96){const _0x205cd1=a41_0x3814c6,{paymentId:_0x1037ab,orderId:_0x34a14c,orderName:_0x4b5046,amount:_0x5e0f05,currency:_0x3d3803,usage:_0x269f18,maxPayments:_0x4b47a0,successUrl:_0x1ad577,failUrl:_0x58eaf4}=_0x558d96,_0x24884c=_0x3d3803[_0x205cd1(0x156)]();console['log'](_0x205cd1(0x14b)+_0x34a14c),console[_0x205cd1(0x16a)](_0x205cd1(0x141)+_0x5e0f05+'\x20'+_0x24884c);try{const _0x2047f0=this[_0x205cd1(0x13e)]+'/payment.php?payment_id='+_0x1037ab+_0x205cd1(0x160)+_0x5e0f05+'&currency='+_0x24884c+_0x205cd1(0x142)+_0x34a14c;return console[_0x205cd1(0x16a)](_0x205cd1(0x153)),console['log']('Payment\x20ID:',_0x1037ab),console[_0x205cd1(0x16a)](_0x205cd1(0x159),_0x2047f0),console['log'](_0x205cd1(0x137),_0x5e0f05,_0x24884c),loggerService_1[_0x205cd1(0x14f)]['logWhiteDomainRequest'](_0x205cd1(0x164),_0x205cd1(0x147),_0x205cd1(0x146),{'paymentId':_0x1037ab,'amount':_0x5e0f05,'currency':_0x24884c,'orderId':_0x34a14c}),{'gateway_payment_id':_0x1037ab,'payment_url':_0x2047f0};}catch(_0x26ddd9){console[_0x205cd1(0x149)](_0x205cd1(0x139)),console['error'](_0x205cd1(0x13b),_0x26ddd9),loggerService_1[_0x205cd1(0x14f)]['logWhiteDomainError'](_0x205cd1(0x164),_0x205cd1(0x147),_0x26ddd9);if(_0x26ddd9 instanceof Error){console['error'](_0x205cd1(0x154),_0x26ddd9[_0x205cd1(0x150)]),console['error']('Error\x20stack:',_0x26ddd9[_0x205cd1(0x15b)]);throw new Error('Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20'+_0x26ddd9[_0x205cd1(0x150)]);}throw new Error(_0x205cd1(0x144));}}async[a41_0x3814c6(0x14e)](_0x1ff686){const _0x14b425=a41_0x3814c6;console[_0x14b425(0x16a)]('üîç\x20Verifying\x20Amer\x20payment:\x20'+_0x1ff686);try{return loggerService_1[_0x14b425(0x14f)][_0x14b425(0x14a)](_0x14b425(0x164),'/payment/verify/'+_0x1ff686,_0x14b425(0x146),{}),{'status':_0x14b425(0x158)};}catch(_0x115d1a){console[_0x14b425(0x149)](_0x14b425(0x15e),_0x115d1a),loggerService_1[_0x14b425(0x14f)][_0x14b425(0x143)](_0x14b425(0x164),_0x14b425(0x140)+_0x1ff686,_0x115d1a);throw new Error(_0x14b425(0x136)+(_0x115d1a instanceof Error?_0x115d1a['message']:_0x14b425(0x138)));}}async[a41_0x3814c6(0x15a)](_0x44ebf2){const _0x37a6e1=a41_0x3814c6;console[_0x37a6e1(0x16a)](_0x37a6e1(0x15f),_0x44ebf2);let _0x2bd078=_0x37a6e1(0x158);if(_0x44ebf2[_0x37a6e1(0x163)]===!![])_0x2bd078=_0x37a6e1(0x167);else _0x44ebf2['success']===![]&&(_0x2bd078=_0x37a6e1(0x13f));const _0x4688cd={};return _0x44ebf2[_0x37a6e1(0x168)]&&(_0x4688cd[_0x37a6e1(0x168)]=_0x44ebf2[_0x37a6e1(0x168)]),_0x44ebf2[_0x37a6e1(0x165)]&&(_0x4688cd[_0x37a6e1(0x165)]=_0x44ebf2[_0x37a6e1(0x165)]),_0x44ebf2[_0x37a6e1(0x13d)]&&(_0x4688cd[_0x37a6e1(0x13d)]=_0x44ebf2[_0x37a6e1(0x13d)],_0x4688cd[_0x37a6e1(0x15c)]=_0x44ebf2['transactionId']),console[_0x37a6e1(0x16a)]('üîÑ\x20Amer\x20webhook\x20processed:\x20status='+_0x2bd078),{'paymentId':_0x44ebf2[_0x37a6e1(0x148)]||_0x44ebf2[_0x37a6e1(0x14d)]||'','status':_0x2bd078,'amount':_0x44ebf2[_0x37a6e1(0x152)],'currency':_0x44ebf2['currency'],'additionalInfo':_0x4688cd};}}exports['AmerService']=AmerService;