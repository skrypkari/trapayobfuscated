'use strict';function a41_0x40a1(_0x3c4dcc,_0x1f5b3f){const _0x3fd6b2=a41_0x3fd6();return a41_0x40a1=function(_0x40a113,_0x2af858){_0x40a113=_0x40a113-0xce;let _0x2663f0=_0x3fd6b2[_0x40a113];return _0x2663f0;},a41_0x40a1(_0x3c4dcc,_0x1f5b3f);}const a41_0x591721=a41_0x40a1;(function(_0x2d61b6,_0x530811){const _0x494ff6=a41_0x40a1,_0x5309da=_0x2d61b6();while(!![]){try{const _0x1bcc3a=parseInt(_0x494ff6(0xf8))/0x1*(-parseInt(_0x494ff6(0xd3))/0x2)+parseInt(_0x494ff6(0xd9))/0x3*(-parseInt(_0x494ff6(0xda))/0x4)+-parseInt(_0x494ff6(0xf7))/0x5*(parseInt(_0x494ff6(0xf6))/0x6)+parseInt(_0x494ff6(0x106))/0x7+parseInt(_0x494ff6(0xf4))/0x8*(-parseInt(_0x494ff6(0xfd))/0x9)+-parseInt(_0x494ff6(0x102))/0xa*(-parseInt(_0x494ff6(0xe0))/0xb)+parseInt(_0x494ff6(0xf0))/0xc;if(_0x1bcc3a===_0x530811)break;else _0x5309da['push'](_0x5309da['shift']());}catch(_0x4d1a76){_0x5309da['push'](_0x5309da['shift']());}}}(a41_0x3fd6,0xa6ea7));Object[a41_0x591721(0x100)](exports,'__esModule',{'value':!![]}),exports[a41_0x591721(0xd1)]=void 0x0;function a41_0x3fd6(){const _0x3993cf=['9AENyGI','Error\x20stack:','paymentId','defineProperty','error','1871300MciNeH','paymentMethod','https://api2.trapay.uk','cardLast4','2709462EvsNQk','success','===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20===','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error','transactionId','AmerService','orderId','13988idQIFu','Failed\x20to\x20verify\x20Amer\x20payment:\x20','toUpperCase','PAID','üîÑ\x20Amer\x20webhook\x20processed:\x20status=','FAILED','3362118ezdlfZ','4wLXqmu','apiUrl','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20','Error\x20message:','processWebhook','&currency=','33akrNlv','logWhiteDomainError','log','/payment/verify/','amount','createPaymentLink','PENDING','üîç\x20Verifying\x20Amer\x20payment:\x20','message','&amount=','verifyPayment','amer','/payment','/payment.php?payment_id=','Amount:','logWhiteDomainRequest','47968500jDtMjz','Error\x20details:','currency','Unknown\x20error','7003112PBopDp','GET','6wNBDXG','6259595cDSgbl','145wuybmo','&order=','loggerService','gatewayPaymentId','üí∞\x20Amount:\x20'];a41_0x3fd6=function(){return _0x3993cf;};return a41_0x3fd6();}const loggerService_1=require('../loggerService');class AmerService{constructor(){const _0x5c2336=a41_0x591721;this[_0x5c2336(0xdb)]=_0x5c2336(0x104),console[_0x5c2336(0xe2)]('üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain');}async[a41_0x591721(0xe5)](_0x2d869c){const _0x52b47a=a41_0x591721,{paymentId:_0x47c44e,orderId:_0x452019,orderName:_0x114e7e,amount:_0x129550,currency:_0x4ce362,usage:_0x11ced3,maxPayments:_0x3d11ac,successUrl:_0x507ebc,failUrl:_0x1a2c6a}=_0x2d869c,_0x44e3ac=_0x4ce362[_0x52b47a(0xd5)]();console['log']('üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20'+_0x452019),console[_0x52b47a(0xe2)](_0x52b47a(0xfc)+_0x129550+'\x20'+_0x44e3ac);try{const _0x2287dc=this[_0x52b47a(0xdb)]+_0x52b47a(0xed)+_0x47c44e+_0x52b47a(0xe9)+_0x129550+_0x52b47a(0xdf)+_0x44e3ac+_0x52b47a(0xf9)+_0x452019;return console[_0x52b47a(0xe2)](_0x52b47a(0xce)),console[_0x52b47a(0xe2)]('Payment\x20ID:',_0x47c44e),console['log']('Payment\x20URL:',_0x2287dc),console['log'](_0x52b47a(0xee),_0x129550,_0x44e3ac),loggerService_1[_0x52b47a(0xfa)][_0x52b47a(0xef)](_0x52b47a(0xeb),_0x52b47a(0xec),_0x52b47a(0xf5),{'paymentId':_0x47c44e,'amount':_0x129550,'currency':_0x44e3ac,'orderId':_0x452019}),{'gateway_payment_id':_0x47c44e,'payment_url':_0x2287dc};}catch(_0x2424f5){console[_0x52b47a(0x101)]('===\x20AMER\x20SERVICE\x20ERROR\x20==='),console[_0x52b47a(0x101)](_0x52b47a(0xf1),_0x2424f5),loggerService_1[_0x52b47a(0xfa)][_0x52b47a(0xe1)]('amer',_0x52b47a(0xec),_0x2424f5);if(_0x2424f5 instanceof Error){console[_0x52b47a(0x101)](_0x52b47a(0xdd),_0x2424f5[_0x52b47a(0xe8)]),console[_0x52b47a(0x101)](_0x52b47a(0xfe),_0x2424f5['stack']);throw new Error(_0x52b47a(0xdc)+_0x2424f5[_0x52b47a(0xe8)]);}throw new Error(_0x52b47a(0xcf));}}async[a41_0x591721(0xea)](_0x2f996d){const _0x528153=a41_0x591721;console[_0x528153(0xe2)](_0x528153(0xe7)+_0x2f996d);try{return loggerService_1[_0x528153(0xfa)][_0x528153(0xef)](_0x528153(0xeb),_0x528153(0xe3)+_0x2f996d,_0x528153(0xf5),{}),{'status':_0x528153(0xe6)};}catch(_0x51fdf8){console[_0x528153(0x101)]('Amer\x20payment\x20verification\x20error:',_0x51fdf8),loggerService_1[_0x528153(0xfa)][_0x528153(0xe1)](_0x528153(0xeb),_0x528153(0xe3)+_0x2f996d,_0x51fdf8);throw new Error(_0x528153(0xd4)+(_0x51fdf8 instanceof Error?_0x51fdf8[_0x528153(0xe8)]:_0x528153(0xf3)));}}async[a41_0x591721(0xde)](_0x111fa7){const _0xb333b2=a41_0x591721;console['log']('Processing\x20Amer\x20webhook:',_0x111fa7);let _0x28da91='PENDING';if(_0x111fa7['success']===!![])_0x28da91=_0xb333b2(0xd6);else _0x111fa7[_0xb333b2(0x107)]===![]&&(_0x28da91=_0xb333b2(0xd8));const _0x4f5acd={};return _0x111fa7['cardLast4']&&(_0x4f5acd[_0xb333b2(0x105)]=_0x111fa7[_0xb333b2(0x105)]),_0x111fa7[_0xb333b2(0x103)]&&(_0x4f5acd[_0xb333b2(0x103)]=_0x111fa7[_0xb333b2(0x103)]),_0x111fa7[_0xb333b2(0xd0)]&&(_0x4f5acd[_0xb333b2(0xd0)]=_0x111fa7['transactionId'],_0x4f5acd[_0xb333b2(0xfb)]=_0x111fa7[_0xb333b2(0xd0)]),console[_0xb333b2(0xe2)](_0xb333b2(0xd7)+_0x28da91),{'paymentId':_0x111fa7[_0xb333b2(0xff)]||_0x111fa7[_0xb333b2(0xd2)]||'','status':_0x28da91,'amount':_0x111fa7[_0xb333b2(0xe4)],'currency':_0x111fa7[_0xb333b2(0xf2)],'additionalInfo':_0x4f5acd};}}exports['AmerService']=AmerService;