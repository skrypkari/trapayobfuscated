'use strict';const a41_0x1e984a=a41_0x592f;(function(_0x3123f3,_0x485db3){const _0x4197f6=a41_0x592f,_0x1df867=_0x3123f3();while(!![]){try{const _0x377392=parseInt(_0x4197f6(0x158))/0x1+-parseInt(_0x4197f6(0x14c))/0x2+parseInt(_0x4197f6(0x14e))/0x3+-parseInt(_0x4197f6(0x140))/0x4*(parseInt(_0x4197f6(0x15e))/0x5)+parseInt(_0x4197f6(0x148))/0x6*(-parseInt(_0x4197f6(0x160))/0x7)+parseInt(_0x4197f6(0x147))/0x8+-parseInt(_0x4197f6(0x159))/0x9*(parseInt(_0x4197f6(0x14d))/0xa);if(_0x377392===_0x485db3)break;else _0x1df867['push'](_0x1df867['shift']());}catch(_0x18d182){_0x1df867['push'](_0x1df867['shift']());}}}(a41_0x2ef4,0xd52b7));function a41_0x2ef4(){const _0x4e230f=['Failed\x20to\x20verify\x20Amer\x20payment:\x20','processWebhook','üí∞\x20Amount:\x20','711514inntEv','9efurkk','AmerService','loggerService','PAID','üîç\x20Verifying\x20Amer\x20payment:\x20','2058165PZdnel','üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain','259xaprBN','success','https://api2.trapay.uk/payment/','/payment','cardLast4','/payment/verify/','transactionId','orderId','apiUrl','&order=','logWhiteDomainRequest','GET','verifyPayment','Error\x20message:','../loggerService','PENDING','defineProperty','===\x20AMER\x20SERVICE\x20ERROR\x20===','Amer\x20payment\x20verification\x20error:','toUpperCase','4UpbFxB','&currency=','message','gatewayPaymentId','error','log','===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20===','4386872bzNIjf','55710jpyWee','Processing\x20Amer\x20webhook:','stack','paymentMethod','858836yZHqNb','628970VlaYPl','2582289EoKELH','__esModule','amer','Error\x20stack:','amount','Payment\x20ID:','paymentId'];a41_0x2ef4=function(){return _0x4e230f;};return a41_0x2ef4();}function a41_0x592f(_0x4b6641,_0x490ede){const _0x2ef4a3=a41_0x2ef4();return a41_0x592f=function(_0x592ff3,_0x5698fc){_0x592ff3=_0x592ff3-0x139;let _0x215571=_0x2ef4a3[_0x592ff3];return _0x215571;},a41_0x592f(_0x4b6641,_0x490ede);}Object[a41_0x1e984a(0x13c)](exports,a41_0x1e984a(0x14f),{'value':!![]}),exports[a41_0x1e984a(0x15a)]=void 0x0;const loggerService_1=require(a41_0x1e984a(0x13a));class AmerService{constructor(){const _0x9f982a=a41_0x1e984a;this[_0x9f982a(0x168)]=_0x9f982a(0x162),console[_0x9f982a(0x145)](_0x9f982a(0x15f));}async['createPaymentLink'](_0x3d35ac){const _0x3df090=a41_0x1e984a,{paymentId:_0x30d60c,orderId:_0x262f2f,orderName:_0x431077,amount:_0x4ceb60,currency:_0x3b7839,usage:_0x54aa07,maxPayments:_0x331471,successUrl:_0x3fbdc6,failUrl:_0x1ae0e9}=_0x3d35ac,_0x4036cb=_0x3b7839[_0x3df090(0x13f)]();console[_0x3df090(0x145)]('üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20'+_0x262f2f),console[_0x3df090(0x145)](_0x3df090(0x157)+_0x4ceb60+'\x20'+_0x4036cb);try{const _0x3048d5=this[_0x3df090(0x168)]+'?id='+_0x30d60c+'&amount='+_0x4ceb60+_0x3df090(0x141)+_0x4036cb+_0x3df090(0x169)+_0x262f2f;return console['log'](_0x3df090(0x146)),console[_0x3df090(0x145)](_0x3df090(0x153),_0x30d60c),console['log']('Payment\x20URL:',_0x3048d5),console[_0x3df090(0x145)]('Amount:',_0x4ceb60,_0x4036cb),loggerService_1[_0x3df090(0x15b)]['logWhiteDomainRequest'](_0x3df090(0x150),_0x3df090(0x163),_0x3df090(0x16b),{'paymentId':_0x30d60c,'amount':_0x4ceb60,'currency':_0x4036cb,'orderId':_0x262f2f}),{'gateway_payment_id':_0x30d60c,'payment_url':_0x3048d5};}catch(_0x2c494d){console[_0x3df090(0x144)](_0x3df090(0x13d)),console[_0x3df090(0x144)]('Error\x20details:',_0x2c494d),loggerService_1[_0x3df090(0x15b)]['logWhiteDomainError']('amer','/payment',_0x2c494d);if(_0x2c494d instanceof Error){console[_0x3df090(0x144)](_0x3df090(0x139),_0x2c494d[_0x3df090(0x142)]),console[_0x3df090(0x144)](_0x3df090(0x151),_0x2c494d[_0x3df090(0x14a)]);throw new Error('Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20'+_0x2c494d[_0x3df090(0x142)]);}throw new Error('Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error');}}async[a41_0x1e984a(0x16c)](_0xba760b){const _0x56346a=a41_0x1e984a;console[_0x56346a(0x145)](_0x56346a(0x15d)+_0xba760b);try{return loggerService_1[_0x56346a(0x15b)][_0x56346a(0x16a)](_0x56346a(0x150),_0x56346a(0x165)+_0xba760b,_0x56346a(0x16b),{}),{'status':_0x56346a(0x13b)};}catch(_0x2a48a7){console[_0x56346a(0x144)](_0x56346a(0x13e),_0x2a48a7),loggerService_1[_0x56346a(0x15b)]['logWhiteDomainError'](_0x56346a(0x150),'/payment/verify/'+_0xba760b,_0x2a48a7);throw new Error(_0x56346a(0x155)+(_0x2a48a7 instanceof Error?_0x2a48a7[_0x56346a(0x142)]:'Unknown\x20error'));}}async[a41_0x1e984a(0x156)](_0x1175f0){const _0x65a96f=a41_0x1e984a;console[_0x65a96f(0x145)](_0x65a96f(0x149),_0x1175f0);let _0x1dd1e2=_0x65a96f(0x13b);if(_0x1175f0[_0x65a96f(0x161)]===!![])_0x1dd1e2=_0x65a96f(0x15c);else _0x1175f0[_0x65a96f(0x161)]===![]&&(_0x1dd1e2='FAILED');const _0x382daf={};return _0x1175f0[_0x65a96f(0x164)]&&(_0x382daf[_0x65a96f(0x164)]=_0x1175f0['cardLast4']),_0x1175f0[_0x65a96f(0x14b)]&&(_0x382daf[_0x65a96f(0x14b)]=_0x1175f0['paymentMethod']),_0x1175f0[_0x65a96f(0x166)]&&(_0x382daf['transactionId']=_0x1175f0[_0x65a96f(0x166)],_0x382daf[_0x65a96f(0x143)]=_0x1175f0[_0x65a96f(0x166)]),console[_0x65a96f(0x145)]('üîÑ\x20Amer\x20webhook\x20processed:\x20status='+_0x1dd1e2),{'paymentId':_0x1175f0[_0x65a96f(0x154)]||_0x1175f0[_0x65a96f(0x167)]||'','status':_0x1dd1e2,'amount':_0x1175f0[_0x65a96f(0x152)],'currency':_0x1175f0['currency'],'additionalInfo':_0x382daf};}}exports['AmerService']=AmerService;