'use strict';const a57_0x43401e=a57_0x3e3b;(function(_0x36176d,_0x2547cc){const _0x294e49=a57_0x3e3b,_0x440904=_0x36176d();while(!![]){try{const _0x30aa77=-parseInt(_0x294e49(0x109))/0x1*(parseInt(_0x294e49(0xff))/0x2)+-parseInt(_0x294e49(0xf1))/0x3*(-parseInt(_0x294e49(0x11d))/0x4)+parseInt(_0x294e49(0xf5))/0x5+-parseInt(_0x294e49(0x11c))/0x6*(parseInt(_0x294e49(0x119))/0x7)+parseInt(_0x294e49(0x10d))/0x8+-parseInt(_0x294e49(0x11a))/0x9+-parseInt(_0x294e49(0xf6))/0xa*(parseInt(_0x294e49(0x108))/0xb);if(_0x30aa77===_0x2547cc)break;else _0x440904['push'](_0x440904['shift']());}catch(_0x3f882b){_0x440904['push'](_0x440904['shift']());}}}(a57_0x19bb,0xad7cf));Object[a57_0x43401e(0x124)](exports,a57_0x43401e(0xf9),{'value':!![]}),exports['AmerService']=void 0x0;const loggerService_1=require(a57_0x43401e(0x100));function a57_0x3e3b(_0x4ac6c8,_0x46f8b8){_0x4ac6c8=_0x4ac6c8-0xf0;const _0x19bbde=a57_0x19bb();let _0x3e3b59=_0x19bbde[_0x4ac6c8];return _0x3e3b59;}class AmerService{constructor(){const _0x35aedc=a57_0x43401e;this['apiUrl']=_0x35aedc(0x11f),console[_0x35aedc(0xf8)](_0x35aedc(0xf0));}async[a57_0x43401e(0x104)](_0x2875ac){const _0x50ac96=a57_0x43401e,{paymentId:_0x52ba1d,orderId:_0xf05119,orderName:_0x14cb53,amount:_0x2afd75,currency:_0x3fbfef,usage:_0x348df8,maxPayments:_0x3157cf,successUrl:_0x1dd7b6,failUrl:_0x1f198b}=_0x2875ac,_0x2747a0=_0x3fbfef[_0x50ac96(0x122)]();console[_0x50ac96(0xf8)]('üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20'+_0xf05119),console[_0x50ac96(0xf8)](_0x50ac96(0x105)+_0x2afd75+'\x20'+_0x2747a0);try{const _0x3f40f4=this[_0x50ac96(0x127)]+'/payment.php?payment_id='+_0x52ba1d+'&amount='+_0x2afd75+_0x50ac96(0x10a)+_0x2747a0+_0x50ac96(0x112)+_0xf05119;return console[_0x50ac96(0xf8)]('===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20==='),console['log'](_0x50ac96(0x11e),_0x52ba1d),console['log'](_0x50ac96(0x114),_0x3f40f4),console[_0x50ac96(0xf8)]('Amount:',_0x2afd75,_0x2747a0),loggerService_1[_0x50ac96(0xfe)]['logWhiteDomainRequest'](_0x50ac96(0xf4),'/payment',_0x50ac96(0xfd),{'paymentId':_0x52ba1d,'amount':_0x2afd75,'currency':_0x2747a0,'orderId':_0xf05119}),{'gateway_payment_id':_0x52ba1d,'payment_url':_0x3f40f4};}catch(_0x463842){console[_0x50ac96(0x11b)](_0x50ac96(0x118)),console[_0x50ac96(0x11b)](_0x50ac96(0x123),_0x463842),loggerService_1[_0x50ac96(0xfe)]['logWhiteDomainError']('amer',_0x50ac96(0xf3),_0x463842);if(_0x463842 instanceof Error){console[_0x50ac96(0x11b)](_0x50ac96(0x110),_0x463842[_0x50ac96(0x10c)]),console[_0x50ac96(0x11b)](_0x50ac96(0x10b),_0x463842[_0x50ac96(0xfb)]);throw new Error(_0x50ac96(0x10f)+_0x463842[_0x50ac96(0x10c)]);}throw new Error('Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error');}}async[a57_0x43401e(0x117)](_0x9884f8){const _0x40f8cb=a57_0x43401e;console[_0x40f8cb(0xf8)]('üîç\x20Verifying\x20Amer\x20payment:\x20'+_0x9884f8);try{return loggerService_1['loggerService'][_0x40f8cb(0x128)](_0x40f8cb(0xf4),_0x40f8cb(0x107)+_0x9884f8,_0x40f8cb(0xfd),{}),{'status':_0x40f8cb(0x113)};}catch(_0x202b3d){console[_0x40f8cb(0x11b)](_0x40f8cb(0x102),_0x202b3d),loggerService_1[_0x40f8cb(0xfe)][_0x40f8cb(0x10e)]('amer',_0x40f8cb(0x107)+_0x9884f8,_0x202b3d);throw new Error('Failed\x20to\x20verify\x20Amer\x20payment:\x20'+(_0x202b3d instanceof Error?_0x202b3d[_0x40f8cb(0x10c)]:'Unknown\x20error'));}}async[a57_0x43401e(0x111)](_0x3e95ca){const _0x36d126=a57_0x43401e;console[_0x36d126(0xf8)](_0x36d126(0x115),_0x3e95ca);let _0x37271f=_0x36d126(0x113);if(_0x3e95ca['success']===!![])_0x37271f=_0x36d126(0xf2);else _0x3e95ca[_0x36d126(0x103)]===![]&&(_0x37271f=_0x36d126(0xfa));const _0x4ddcbe={};return _0x3e95ca[_0x36d126(0x125)]&&(_0x4ddcbe['cardLast4']=_0x3e95ca[_0x36d126(0x125)]),_0x3e95ca[_0x36d126(0x116)]&&(_0x4ddcbe[_0x36d126(0x116)]=_0x3e95ca[_0x36d126(0x116)]),_0x3e95ca[_0x36d126(0xfc)]&&(_0x4ddcbe['transactionId']=_0x3e95ca[_0x36d126(0xfc)],_0x4ddcbe[_0x36d126(0x120)]=_0x3e95ca['transactionId']),console[_0x36d126(0xf8)](_0x36d126(0x101)+_0x37271f),{'paymentId':_0x3e95ca[_0x36d126(0xf7)]||_0x3e95ca[_0x36d126(0x121)]||'','status':_0x37271f,'amount':_0x3e95ca[_0x36d126(0x106)],'currency':_0x3e95ca[_0x36d126(0x126)],'additionalInfo':_0x4ddcbe};}}function a57_0x19bb(){const _0x1c6cbe=['Error\x20message:','processWebhook','&order=','PENDING','Payment\x20URL:','Processing\x20Amer\x20webhook:','paymentMethod','verifyPayment','===\x20AMER\x20SERVICE\x20ERROR\x20===','84gackqK','8719074KZzXqD','error','31182bKXDRG','5414236SocjLA','Payment\x20ID:','https://api2.trapay.uk','gatewayPaymentId','orderId','toUpperCase','Error\x20details:','defineProperty','cardLast4','currency','apiUrl','logWhiteDomainRequest','üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain','3dTVTWx','PAID','/payment','amer','2835340kvivEm','1635770WEJLHQ','paymentId','log','__esModule','FAILED','stack','transactionId','GET','loggerService','32bEPrmK','../loggerService','üîÑ\x20Amer\x20webhook\x20processed:\x20status=','Amer\x20payment\x20verification\x20error:','success','createPaymentLink','üí∞\x20Amount:\x20','amount','/payment/verify/','11Moemhu','84748Vyzklh','&currency=','Error\x20stack:','message','10725400DZHWXO','logWhiteDomainError','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20'];a57_0x19bb=function(){return _0x1c6cbe;};return a57_0x19bb();}exports['AmerService']=AmerService;