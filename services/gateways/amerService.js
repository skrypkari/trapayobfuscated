'use strict';const a61_0x417cb9=a61_0xcbb3;(function(_0x59aaf6,_0xc28852){const _0x166f67=a61_0xcbb3,_0x163446=_0x59aaf6();while(!![]){try{const _0x4b3e9c=parseInt(_0x166f67(0x166))/0x1+-parseInt(_0x166f67(0x139))/0x2+parseInt(_0x166f67(0x15e))/0x3+-parseInt(_0x166f67(0x13a))/0x4*(parseInt(_0x166f67(0x14e))/0x5)+-parseInt(_0x166f67(0x13c))/0x6+-parseInt(_0x166f67(0x152))/0x7+parseInt(_0x166f67(0x160))/0x8*(parseInt(_0x166f67(0x131))/0x9);if(_0x4b3e9c===_0xc28852)break;else _0x163446['push'](_0x163446['shift']());}catch(_0x11f120){_0x163446['push'](_0x163446['shift']());}}}(a61_0x3dfa,0x321f0));function a61_0xcbb3(_0x48e207,_0x2b3fdd){_0x48e207=_0x48e207-0x131;const _0x3dfa2b=a61_0x3dfa();let _0xcbb329=_0x3dfa2b[_0x48e207];return _0xcbb329;}Object[a61_0x417cb9(0x154)](exports,'__esModule',{'value':!![]}),exports[a61_0x417cb9(0x142)]=void 0x0;function a61_0x3dfa(){const _0x610939=['FAILED','Processing\x20Amer\x20webhook:','Error\x20details:','Error\x20message:','Amer\x20payment\x20verification\x20error:','processWebhook','345xIMgMy','gatewayPaymentId','message','currency','67123lSCAKj','===\x20AMER\x20SERVICE\x20ERROR\x20===','defineProperty','üí∞\x20Amount:\x20','amer','Payment\x20ID:','paymentId','cardLast4','log','GET','verifyPayment','/payment.php?payment_id=','446493mVSYFy','transactionId','24WxrGPD','/payment/verify/','/payment','PENDING','Failed\x20to\x20verify\x20Amer\x20payment:\x20','üîÑ\x20Amer\x20webhook\x20processed:\x20status=','284020plBJDN','1745775AyDZPc','amount','createPaymentLink','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20','üîç\x20Verifying\x20Amer\x20payment:\x20','paymentMethod','orderId','apiUrl','756578WbQjeK','19388NJmLgu','success','522954WqaCNE','&amount=','logWhiteDomainError','&currency=','===\x20AMER\x20PAYMENT\x20LINK\x20CREATED\x20===','logWhiteDomainRequest','AmerService','üåê\x20Amer\x20service\x20initialized\x20with\x20api2.trapay.uk\x20domain','Failed\x20to\x20create\x20Amer\x20payment\x20link:\x20Unknown\x20error','&order=','error','loggerService'];a61_0x3dfa=function(){return _0x610939;};return a61_0x3dfa();}const loggerService_1=require('../loggerService');class AmerService{constructor(){const _0x49e8a6=a61_0x417cb9;this['apiUrl']='https://api2.trapay.uk',console[_0x49e8a6(0x15a)](_0x49e8a6(0x143));}async[a61_0x417cb9(0x133)](_0x9cd0ef){const _0x316ed9=a61_0x417cb9,{paymentId:_0xc9dd18,orderId:_0x4f54de,orderName:_0x339e0e,amount:_0x4591fc,currency:_0x2254a1,usage:_0x280615,maxPayments:_0x3e91ff,successUrl:_0x434a46,failUrl:_0xc53522}=_0x9cd0ef,_0x3a9395=_0x2254a1['toUpperCase']();console[_0x316ed9(0x15a)]('üí≥\x20Creating\x20Amer\x20payment\x20link\x20for\x20order\x20'+_0x4f54de),console[_0x316ed9(0x15a)](_0x316ed9(0x155)+_0x4591fc+'\x20'+_0x3a9395);try{const _0x5cfc5b=this[_0x316ed9(0x138)]+_0x316ed9(0x15d)+_0xc9dd18+_0x316ed9(0x13d)+_0x4591fc+_0x316ed9(0x13f)+_0x3a9395+_0x316ed9(0x145)+_0x4f54de;return console['log'](_0x316ed9(0x140)),console[_0x316ed9(0x15a)](_0x316ed9(0x157),_0xc9dd18),console[_0x316ed9(0x15a)]('Payment\x20URL:',_0x5cfc5b),console[_0x316ed9(0x15a)]('Amount:',_0x4591fc,_0x3a9395),loggerService_1['loggerService'][_0x316ed9(0x141)]('amer',_0x316ed9(0x162),_0x316ed9(0x15b),{'paymentId':_0xc9dd18,'amount':_0x4591fc,'currency':_0x3a9395,'orderId':_0x4f54de}),{'gateway_payment_id':_0xc9dd18,'payment_url':_0x5cfc5b};}catch(_0x5827bc){console[_0x316ed9(0x146)](_0x316ed9(0x153)),console[_0x316ed9(0x146)](_0x316ed9(0x14a),_0x5827bc),loggerService_1[_0x316ed9(0x147)][_0x316ed9(0x13e)](_0x316ed9(0x156),_0x316ed9(0x162),_0x5827bc);if(_0x5827bc instanceof Error){console[_0x316ed9(0x146)](_0x316ed9(0x14b),_0x5827bc[_0x316ed9(0x150)]),console['error']('Error\x20stack:',_0x5827bc['stack']);throw new Error(_0x316ed9(0x134)+_0x5827bc[_0x316ed9(0x150)]);}throw new Error(_0x316ed9(0x144));}}async[a61_0x417cb9(0x15c)](_0x24df90){const _0x1a66c3=a61_0x417cb9;console[_0x1a66c3(0x15a)](_0x1a66c3(0x135)+_0x24df90);try{return loggerService_1['loggerService'][_0x1a66c3(0x141)](_0x1a66c3(0x156),_0x1a66c3(0x161)+_0x24df90,_0x1a66c3(0x15b),{}),{'status':_0x1a66c3(0x163)};}catch(_0xfa12af){console[_0x1a66c3(0x146)](_0x1a66c3(0x14c),_0xfa12af),loggerService_1[_0x1a66c3(0x147)][_0x1a66c3(0x13e)]('amer',_0x1a66c3(0x161)+_0x24df90,_0xfa12af);throw new Error(_0x1a66c3(0x164)+(_0xfa12af instanceof Error?_0xfa12af['message']:'Unknown\x20error'));}}async[a61_0x417cb9(0x14d)](_0x5e4a2f){const _0x4e768f=a61_0x417cb9;console[_0x4e768f(0x15a)](_0x4e768f(0x149),_0x5e4a2f);let _0x3f36cb=_0x4e768f(0x163);if(_0x5e4a2f[_0x4e768f(0x13b)]===!![])_0x3f36cb='PAID';else _0x5e4a2f['success']===![]&&(_0x3f36cb=_0x4e768f(0x148));const _0x38200b={};return _0x5e4a2f[_0x4e768f(0x159)]&&(_0x38200b['cardLast4']=_0x5e4a2f[_0x4e768f(0x159)]),_0x5e4a2f[_0x4e768f(0x136)]&&(_0x38200b['paymentMethod']=_0x5e4a2f[_0x4e768f(0x136)]),_0x5e4a2f[_0x4e768f(0x15f)]&&(_0x38200b[_0x4e768f(0x15f)]=_0x5e4a2f[_0x4e768f(0x15f)],_0x38200b[_0x4e768f(0x14f)]=_0x5e4a2f[_0x4e768f(0x15f)]),console[_0x4e768f(0x15a)](_0x4e768f(0x165)+_0x3f36cb),{'paymentId':_0x5e4a2f[_0x4e768f(0x158)]||_0x5e4a2f[_0x4e768f(0x137)]||'','status':_0x3f36cb,'amount':_0x5e4a2f[_0x4e768f(0x132)],'currency':_0x5e4a2f[_0x4e768f(0x151)],'additionalInfo':_0x38200b};}}exports[a61_0x417cb9(0x142)]=AmerService;